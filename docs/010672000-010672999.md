# StackOverflow 问答 10672000-10672999

# asp.net - UpdatePanel 的更新模式属性

> ID：10672004
> 
> 赞同：1
> 
> 时间：2012-05-20T08:38:49.477
> 
> 标签：asp.net, ajax, updatepanel

以下是我的 ASPX 代码。

```
<form id="form1" runat="server">
  <div>
   <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
   <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
   <asp:UpdatePanel UpdateMode="Conditional" ID="UpdatePanel1" runat="server">
   <ContentTemplate>
     <asp:Label ID="lblid" runat="server" Text="Label"></asp:Label>
   </ContentTemplate>
   </asp:UpdatePanel>
   <asp:Button ID="btnid" runat="server" Text="Button"/>
  </div>
</form> 
```

我有一个更新面板控件，并且在更新面板控件中包含了单个标签控件。我在更新面板控件之外有 Button 和 Lable，在 page_load 期间我更新了两个 lable 控件的文本值，如下所示。

```
protected void Page_Load(object sender, EventArgs e)
{
  lblid.Text = DateTime.Now.ToString();
  Label1.Text = DateTime.Now.ToString();
} 
```

我已将更新模式属性设置为“条件”，以便当用户单击更新面板外的按钮控件时，它不应更改 ipdate 面板内的 lable 文本值。但它会更新并显示更新面板内标签文本的更改值。我的理解是，当我们将更新模式属性设置为“有条件”时，更新面板内的内容不会更新（或在客户端渲染），当由于更新面板外部的控制而发生回发时，那么在我的情况下发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:27:59.977

单击 UpdatePanel 外部的按钮会导致整个页面回发。在整个页面被回发的情况下，UpdatePanel 不能阻止刷新其中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T10:27:51.447

如果您只有一个更新面板，则毫无意义，请参阅此示例，它确实有意义。
尝试将第二个更新面板从 Conditional 更改为 Always
ASPX：

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
<div>

    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
    <asp:UpdatePanel  ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:Label ID="lblid" runat="server" Text="Label"></asp:Label>
            <asp:Button ID="btnid" runat="server" Text="Button" />
        </ContentTemplate>
    </asp:UpdatePanel>

    <asp:UpdatePanel UpdateMode="Conditional"  ID="UpdatePanel2" runat="server">
        <ContentTemplate>
            <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label>             
        </ContentTemplate>
    </asp:UpdatePanel>

</div> 
```

CS：

```
protected void Page_Load(object sender, EventArgs e)
    {
        lblid.Text = DateTime.Now.ToString();
        Label1.Text = DateTime.Now.ToString();
        Label2.Text = DateTime.Now.ToString();
    } 
```

# facebook - 如何设置 og:image 以便从页面获取图像？

> ID：10672007
> 
> 赞同：27
> 
> 时间：2012-05-20T08:39:28.930
> 
> 标签：facebook, mediawiki

我正在使用 mediawiki 1.19，并且添加了 facebook 'like'。当我点击像张贴的图像是网站标志。如何从页面中获取图像。我已经通过[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)运行该站点，并且似乎 og:image 设置为站点徽标。如何更改此元属性？我的网站是 thepetwiki.com 谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-20T08:42:19.767

您将给页面的 HTML 标记添加一些自定义`og:tags`，并指定要使用的图像...

看看[Facebook 文档](https://developers.facebook.com/docs/opengraphprotocol/)中的示例-

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
  <head>
    <title>The Rock (1996)</title>
    <meta property="og:title" content="The Rock"/>
    <meta property="og:type" content="movie"/>
    <meta property="og:url" content="http://www.imdb.com/title/tt0117500/"/>
    <meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/>
    <meta property="og:site_name" content="IMDb"/>
    <meta property="fb:admins" content="USER_ID"/>
    <meta property="og:description"
          content="A group of U.S. Marines, under command of
                   a renegade general, take over Alcatraz and
                   threaten San Francisco Bay with biological
                   weapons."/>
    ...
  </head>
  ...
</html> 
```

如您所见，`og:image`此处指定了参数，它允许 Facebook 正确显示与该 URL 关联的元数据...

您可能不需要`og:tags`此处指定的所有内容，`title`, `url`,`image`并且`description`只需要一个 LIKE 按钮就可以了。

您已经了解该`debugger`工具 - 它将帮助您调试 LIKE 按钮和`og:tags`. 对您的 HTML 标记进行一些更改，每次您都必须通过调试器发送您的 URL 以刷新 Facebook 的 URL 缓存版本。

* * *

一个快速的谷歌搜索给了我这个`mediawiki`看起来可以帮助你的扩展 -

[http://www.mediawiki.org/wiki/Extension:OpenGraphMeta](http://www.mediawiki.org/wiki/Extension:OpenGraphMeta)

> OpenGraphMeta 为 wiki 上的文章提供 OpenGraph 协议元数据，供 Facebook 等第三方提取...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:40:51.280

见帖子[http://www.mediawiki.org/wiki/Extension_talk:Facebook#OpenGraph_image_problems](http://www.mediawiki.org/wiki/Extension_talk:Facebook#OpenGraph_image_problems)。开放图形编码是 Facebook 扩展的一部分。

# php - for() 循环显示 $row_record[] 一次但 $message $i 次 - PHP

> ID：10672009
> 
> 赞同：3
> 
> 时间：2012-05-20T08:39:40.290
> 
> 标签：php

```
$RecordCount=mysql_num_rows($pnname); 

for($el=1; $el<=$RecordCount;$el++) {
$message .= "test--test";

echo $el."--".$row_pnname01['pnom']."<BR>";
echo $message."<BR>";

} 
```

这里`$message`显示`$i`count 次，即如果`$i`=5`$message`显示5 次但每次count`$row_pnname01['pnom']`只显示一次。`$i`

关于为什么会发生的任何想法。当然，我一定忽略了一些事情。

谢谢让

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:43:37.400

而不是这个

```
$message .= "test--test"; 
```

做这个

```
$message = "test--test"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:53:01.137

```
$RecordCount=mysql_num_rows($pnname); 

for ($el=1; $el<=$RecordCount;$el++) {
  $message = "test--test";

  echo $el."--".$row_pnname01['pnom']."<BR>";
  echo $message."<BR>";
} 
```

这应该可以解决问题。不断将`$message .= "test--test";`字符串“test--test”附加到变量`$message`. 使用`=`and 而不是`.=`将简单地分配一个新值给`$message`.

# security - OpenSSL 库可以针对电压攻击进行修复吗？ SSL 库也可以吗？

> ID：10672012
> 
> 赞同：1
> 
> 时间：2012-05-20T08:40:06.357
> 
> 标签：security, ssl, encryption, openssl

我不是专家，我无法详细理解理论，但[这里](http://pronewb.com/how-to-crack-1024-bit-rsa-encryption-by-clusterfck)说 OpenSSL 有缺陷。什么样的瑕疵不清楚，能修复吗？

其他 ssl 库呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:44:43.437

只需更新 OpenSSL（：发现此漏洞后不久就发布了解决此漏洞的补丁

CVE-2012-0884：2012 年 3 月 12 日

见这里： [http ://www.openssl.org/news/vulnerabilities.html](http://www.openssl.org/news/vulnerabilities.html)

# android - 如何将用户重定向到市场中的开发者页面？

> ID：10672029
> 
> 赞同：5
> 
> 时间：2012-05-20T08:43:31.723
> 
> 标签：android, google-play

我使用此代码将用户重定向到市场中的特定应用程序：

```
Uri marketUri = Uri.parse("market://details?id=" + packageName);
Intent marketIntent = new Intent(Intent.ACTION_VIEW, marketUri);
startActivity(marketIntent); 
```

如何将用户重定向到市场中的开发者页面？
我尝试将链接从浏览器复制到 Uri

```
Uri marketUri = Uri.parse("market://developer?id=Developer+Name"); 
```

实名已更改，
导致致命异常

```
E/AndroidRuntime(29775): android.content.ActivityNotFoundException: No Activity found to handle Intent 
```

我可以用

```
Uri marketUri = Uri.parse("https://play.google.com/store/apps/developer?id=Developer+Name"); 
```

但会出现应用程序选择对话框（Play Market 或 Browser）。我想默认使用市场。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T08:52:06.177

正确的查询是：

```
 market://search?q=pub:\"IncrediApp\" 
```

关于您的错误：

> 这会导致致命异常

这是因为您可能在模拟器或未安装 Google Play 应用程序的设备上运行它。

> 但会出现应用程序选择对话框（Play Market 或 Browser）。我想默认使用市场。

如果您使用 market:// 前缀，它将是默认值。对于[https://play.google.com](https://play.google.com)，它根据用户的设置工作，并会询问用户是否未定义默认值。

# javascript - 如何优雅地将js代码传递给字符串？

> ID：10672033
> 
> 赞同：0
> 
> 时间：2012-05-20T08:44:11.893
> 
> 标签：javascript, jquery

有我的代码

```
<input type="radio" name="category" id="elementary" value="elementary" /> 1
<input type="radio" name="category" id="junior" value="junior" /> 2
<input type="radio" name="category" id="senior" value="senior" /> 3
<input type="radio" name="category" id="university" value="university" /> 4
<input type="radio" name="category" id="profession"/> 5

<div id='grade_select' class="clearfix">
  <div id='elementary_grade' class="clearfix"></div>
  <div id='junior_grade' class="clearfix"></div>
  <div id='senior_grade' class="clearfix"></div>
  <div id='university_grade' class="clearfix"></div>
  <div id='profession_grade' class="clearfix"></div>
</div> 
```

我想：

选中一个radio时，需要隐藏grade_select中的所有div，然后显示id包含当前radio值的div

有我的js代码，不知道怎么回事

```
 <script type="text/javascript">
    $(document).ready(function($){
      $( "input[name='category']" ).bind( "click", category_select)
    });
    function category_select(){
        $("div:[id=this.attr[id]]).show()
    }
    </script> 
```

**仅供参考：**这个问题是[另一个问题的衍生问题](https://stackoverflow.com/questions/10671865/how-to-change-muitl-divs-the-display-which-have-some-special-id)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T08:47:52.010

```
<script type="text/javascript">
    $(document).ready(function($){
        $( "input[name='category']" ).bind( "click", function() {
            $("#grade_select div").hide().parent().find( '#' + this.id + "_grade" ).show();
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T08:49:19.723

尝试：

```
$("input[name='category']").click(function(){
    var id = $(this).attr('id');
    $("div#grade_select > div").hide();
    $("#" + id + "_grade").show();  
});​ 
```

## [演示](http://jsfiddle.net/8JCXD/9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T08:50:40.233

```
$("input[name='category']").click(function(){
    $("#grade_select div").hide().filter('#' + this.id + '_grade').show();
}); 
```

[**现场演示**](http://jsfiddle.net/EnwVb/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T08:49:54.447

您可以先创建一个保存 ID 的变量，然后将其用作选择器：

```
function category_select() {
     var $this = $(this),
     id = '#' + $this.attr('id') + '_grade'; // calculate ID of element to show

     $('#grade_select')
         .children() // select all children
         .hide() // hide all children
         .filter(id) // select the right one
         .show(); // and show it
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T08:50:09.427

使用选择器`#grade_select > div`隐藏所有直接子级的 div（以便您可以根据需要在其中包含其他 div），然后过滤掉您要显示的那个：

```
$(document).ready(function($){
  $("input[name=category]").click(function(){
    $("#grade_select > div").hide().filter("#" + this.id + "_grade").show();
  });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-20T08:53:39.300

[**演示**](http://jsfiddle.net/QbDgd/)

**jQuery代码**

```
$("input[type='radio']").click(function() {
    $("#grade_select div").hide();
    $("#" + this.id + "_grade").show();
});​ 
```

# ruby-on-rails - 区域设置更改时如何使片段缓存过期？

> ID：10672034
> 
> 赞同：7
> 
> 时间：2012-05-20T08:44:14.933
> 
> 标签：ruby-on-rails, caching, internationalization

我正在尝试使用片段缓存来缓存使用 I18n 的 Ruby on Rails 站点上的页脚和导航栏。问题是，更改语言然后以错误的语言显示页脚和导航栏。当区域设置更改时，您如何处理过期的片段缓存？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-20T09:04:19.980

而不是使片段缓存过期，您应该将区域设置作为缓存键的一部分，即类似于

```
cache :locale => I18n.locale, ... do
  ...
end 
```

这样，不同的用户可以看到页脚/导航栏的不同语言版本，但所有人都会看到缓存的版本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-12T14:02:11.483

在 Rails 3 中缓存片段时，这对我有用：

```
- cache([object, locale: I18n.locale]) do 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-19T16:16:50.007

我曾经有这个助手，所以我不需要明确地将语言环境传递给每个`cache`调用：

```
# frozen_string_literal: true
module CacheHelper
  # Always using current I18n.locale to cache things.
  def cache(name = {}, options = {}, &block)
    name_with_locale = [name].flatten << I18n.locale.to_s
    super(name_with_locale, options, &block)
  end
end 
```

# objective-c - 如何根据属性列表中的日期对 UITableViewCells 进行排序？

> ID：10672035
> 
> 赞同：4
> 
> 时间：2012-05-20T08:44:28.017
> 
> 标签：objective-c, ios, xcode

（准备好见证一个新手非常非常困惑，我认为这是我的大脑难以掌握的基本逻辑形式。）

我现在有一个 .plist 文件。在“Key”列中有事件的名称（目前只是虚拟内容），在“Value”列中有这种格式的日期：19-07-2012。每行都是“字符串”类型。

在 viewDidLoad 方法中，我使用以下代码：

```
NSString *theFile = [[NSBundle mainBundle] pathForResource:@"dates" ofType:@"plist"];
theDates = [[NSDictionary alloc] initWithContentsOfFile:theFile];
theDatesList = [theDates allKeys]; 
```

这会将 plist 文件加载到字典中，然后将键加载到数组中，这是我学会填充 a 的方式`UITableView`，特别是在方法中使用以下代码`cellForRowAtIndexPath`：

```
NSString *eventFromFile = [theDatesList objectAtIndex:indexPath.row];
NSString *dateFromFile = [theDates objectForKey:[theDatesList objectAtIndex:indexPath.row]]; 
```

但是我现在很困惑的是，我如何`UITableView`根据最快的日期订购细胞？因此，7 月 19 日的单元格将出现在 8 月 21 日之前，无论它在 plist 文件中的顺序如何。

在`UITableViewCell`我已经设法计算了当前日期和 plist 中定义的日期之间的天数。就是这个代码：

```
// Set the date format
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd-MM-yyyy"];

// Get the current, then future date
NSDate *currentDate = [NSDate date];
NSDate *futureDate = [dateFormatter dateFromString:dateFromFile];

// Create the calendar object
NSCalendar *theCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

// Extract the "day" component from the calendar object
NSDateComponents *theDifferenceBetweenDays = [theCalendar   components:NSDayCalendarUnit
                                                            fromDate:currentDate
                                                            toDate:futureDate
                                                            options:0];

NSInteger theRemainingDays = [theDifferenceBetweenDays day]; 
```

但我真的不知道我在做什么。有人可以在正确的方向上轻推我吗？我研究了似乎相关`NSSortDescriptors`的方法，但实际实施的行为让我在过去六个小时内陷入困境。`sortedArrayUsingSelector`或者，也许他们不是正确的轨道。就像我说的，我很困惑。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:24:11.237

有几种方法可以按降序对`NSArray`of`NSDates`进行排序。

你可以使用`sortedArrayUsingDescriptors:`：

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"self" ascending:NO];
theDatesList = [theDatesList sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]]; 
```

但我个人更喜欢`sortedArrayUsingComparator:`：

```
theDatesList = [theDatesList sortedArrayUsingComparator:^NSComparisonResult(NSDate *date1, NSDate *date2){
    return [date2 compare:date1];
}]; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-20T08:48:15.753

monotouch.dialog 存在一个目标 C 等价物。有了这个，它应该很容易。

# objective-c - 将 SimpleAudioEngine 与 avaudioRecorder 一起使用

> ID：10672037
> 
> 赞同：1
> 
> 时间：2012-05-20T08:44:41.027
> 
> 标签：objective-c, cocos2d-iphone, simpleaudioengine

我知道我不能使用`SimpleAudioEngine`之前的，`avaudioRecorder`因为它将会话设置为播放而不是录制。

如果我用录音机录制然后玩：

```
[[SimpleAudioEngine sharedEngine]  playEffect:soundFilePath pitch:2.0f pan:0.0f gain:1.0f]; 
```

它工作得很好，但如果我想再次录制，它不是。

我必须玩 `SimpleAudioEngine`，我正在寻找一种方法让它在我玩后再次录制。

玩过之后我试过做：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:nil]; 
```

没有成功。

有什么帮助吗？

谢谢。

# opengl - 为什么法线较大的顶点看起来更暗？

> ID：10672048
> 
> 赞同：0
> 
> 时间：2012-05-20T08:47:49.660
> 
> 标签：opengl

不使用时`GL_NORMALIZE`，如果我们使用正因子（更大的对象和更长的法线）缩放对象（连同其法线），则对象看起来更暗。

我希望更大的法线在照明方程中具有更大的 cos（照明角度）项，从而使物体更轻。

那么为什么会反过来呢？

*（我通过 JOGL 使用 OpenGL v1.1）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:52:42.160

在进行变换时，法线不像法线点那样处理；它们使用用于变换点的矩阵的*逆转置进行变换，并移除了平移分量。*对于固定管道，这由 GL 自动处理。

对于缩放，这具有以相反幅度缩放法线的效果。因此，在关闭 GL_NORMALIZE 的情况下使对象变大会导致法线的大小变小，因此光照计算会导致颜色变深。

至于*为什么*以这种方式转换法线，[此页面](http://tog.acm.org/resources/RTNews/html/rtnews1a.html#art4)对此进行了充分解释。还有[这个](http://www.lighthouse3d.com/tutorials/glsl-tutorial/the-normal-matrix/)。

# python - python/scapy RandMAC() 问题

> ID：10672053
> 
> 赞同：2
> 
> 时间：2012-05-20T08:48:17.927
> 
> 标签：python, scapy

我有一个非常烦人的问题，我试图解决几天。我在网上找不到任何信息。

我试图自己解决它，查阅了文档。但没有任何效果。

我的问题是

`X`当我用`RandMAC()`函数分配变量时，`X`每次使用时都应该相同。

就像，， `X = RandMAC()`让我们说`X`现在`AA:BB:CC:DD:EE:FF` ，当我打印 X 3 次时，它应该是这样的。

```
X = AA:BB:CC:DD:EE:FF  
X = AA:BB:CC:DD:EE:FF  
X = AA:BB:CC:DD:EE:FF 
```

但代码实际上做的是

```
X = AA:BB:CC:DD:EE:FF  
X = 00:0A:0B:0C:0D:0E:0F  
X = 11:22:33:44:55:66 
```

所以每次我调用 print X 时它都会改变。

我该如何解决这个问题？

我的代码如下。

```
from scapy.all import *

X = RandMAC()

print X
print X
print X 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T09:42:19.583

`RandMAC`是一个类，当你调用`RandMAC()`你得到的是那个类的一个实例。`scapy`有很多这样的`RandXXXXX`类，它们的行为方式都相同：类的实例实际上是一种随机事物生成器，而不是固定（但随机选择）的事物。在这种情况下，a`RandMac`由 6 个`RandByte`s 构成，并且`RandByte`每次请求其值时，a 都会变成 0 到 255 之间的随机值。

我认为，这个想法是为了让构建（例如）一个 IP 数据包随机化器变得容易，它为您提供所有相同的 IP 数据包，除了为每个数据包随机选择几个字段。

因此，无论如何，对随机事物对象的许多操作都有效地委托给“修复”它们的结果（即，选择特定的随机值）；见`volatile.py`源代码，类`VolatileValue`；魔法发生在`__getattr__`方法中。特别是，这适用于 stringifying via `__str__`，这是`str()`Lycha 观察到的和`print`Karun S 观察到的。

如果要获取单个随机值，最接近 Right Way 的方法可能是调用`_fix`方法：`X = RandMAC()._fix()`. 这恰好与`str`for相同`RandMAC`，但例如，如果你有一个随机整数，那么`_fix`会给你一个实际的整数，同时`str`会给你它的字符串表示形式。

这些似乎都没有记录。不要对它在未来版本中仍然有效的任何大赌注。（但是，就其价值而言，`volatile.py`大约两年没有改变。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T09:01:50.787

我不知道是否`RandMac`有其他方法可以做到这一点，但你可以将它转换`X`成一个字符串，这样它就会保持不变。在您的代码中`X`实际上每次都调用一个函数。

```
X = str(RandMAC())
print X
print X
print X 
```

# c# - IoC 设计 - 从服务内部引用服务定位器以用于动态委托服务

> ID：10672054
> 
> 赞同：0
> 
> 时间：2012-05-20T08:48:27.010
> 
> 标签：c#, .net, inversion-of-control, ioc-container

我正在使用 IoC 容器 (Unity) 来注册接口并解析/实例化对象。

它工作正常，所有依赖接口的类都被注入到构造函数中，但是我遇到了设计问题。

我有一个 CronJob 服务，它在特定时间调用注册的代表，它也由服务定位器实例化。

由于可以注册作业，我从实例化类中引用服务定位器 Unity 容器，我这样做是因为我在编译时不知道哪些对象将传递给构造函数，因为可以动态注册作业。

然而，虽然我是 IoC 和统一的新手，但据我所知，从服务中引用静态服务定位器是不好的，所有依赖项都应该在构造函数中传递 - 所以我希望能想到其他方式可以做到这一点或在这种情况下可以引用服务定位器吗？

谢谢，

克里斯

代码如下：

**使用 Unity 的服务定位器**

```
// ServiceManager provides service location facilities, logging facilities, and database access via IUnitOfWork interface
public class ServiceManager
{
    private static readonly UnityContainer m_ServicesContainer = new UnityContainer();
    private static readonly ServiceManager m_Manager = new ServiceManager();
    public static ServiceManager Instance { get { return m_Manager; } }
    private ILogger Logger { get { return Resolve<ILogger>(); } }

    public T Resolve<T>()
    {
        return m_ServicesContainer.Resolve<T>();
    }

    private ServiceManager()
    {
        // register the unit of work class first!!
        RegisterType<IUnitOfWork, UnitOfWork>();
        // always register the logger (without logging)
        RegisterType<ILogger, NLogForEntityFrameworkLogger>(true);
        // always register the settings manager (without logging)
        RegisterType<ISettingsService, SettingsService>();
        RegisterType<IPluginManagerService, PluginManagerService>(true);
        RegisterType<ICronJobService, CronJobService>(true);
        RegisterType<IReminderGeneratorService, ReminderGeneratorService>();
        RegisterType<IInvoiceService, InvoiceService>();
    }

    public void RegisterType<TFrom, TTo>(bool isSingleton = false)
    {
         if (isSingleton == false)
            m_ServicesContainer.RegisterType(typeof(TFrom), typeof(TTo));
        else
            m_ServicesContainer.RegisterType(typeof(TFrom), typeof(TTo), new ContainerControlledLifetimeManager());

    }
} 
```

**CronJob 类**

```
public static class CronJobDelegates
{
    public static void SyncRecords(BusinessUnit businessUnit)
    {
        ISynchronisationService syncService = ServiceManager.Instance.Resolve<ISynchronisationService>();
        syncService.Sync(businessUnit);
    }
}

class CronJobService : ServiceBaseWithUnitOfWork, ICronJobService
{
    public CronJobService(IUnitOfWork unitOfWork, ILogger logger, ISettingsService settings)
        : base(unitOfWork, logger)
    {
        m_Settings = settings;
        RegisterCronJob("SyncAccountRecords", CronJobDelegates.SyncRecords,"*1****");
    }

    ISettingsService m_Settings;

    public class RegisteredCronJob
    {
        public RegisteredCronJob(string jobName, EventJobDelegate job)
        {
            JobName = jobName;
            Job = job;
        }

        public string JobName { get; private set; }
        public EventJobDelegate Job { get; private set; }
    }

    static object Lock = new object();

    Dictionary<string, EventJobDelegate> CronJobs = new Dictionary<string, EventJobDelegate>();

    public void RegisterCronJob(string jobName, EventJobDelegate jobCallback, string jobSetting)
    {
        lock(Lock)
        {
            if(CronJobs.ContainsKey(jobName))
            {
                LogMessage("Job '" + jobName + "' already registered", LogLevel.Warn);
                // warning job already registered
            }
            else
            {
                CronJob cronJobRecord = UnitOfWork.CronJobRepository.GetByID(jobName);

                if (cronJobRecord == null)
                {
                    CronJob newCronJob = new CronJob()
                    {
                        JobName = jobName,
                        JobSetting = jobSetting
                    };
                    UnitOfWork.CronJobRepository.Insert(newCronJob);
                }
                else
                    jobSetting = cronJobRecord.JobSetting;

                LogMessage("Job '" + jobName + "' registered using settings: " + jobSetting + ". Next run due on UTC " + NCrontab.CrontabSchedule.Parse(jobSetting).GetNextOccurrence(DateTime.UtcNow), LogLevel.Info);

                CronJobs.Add(jobName, jobCallback);
                UnitOfWork.Save();
            }
        }
    }

    public void ProcessEvents()
    {
        foreach(BusinessUnit businessUnit in UnitOfWork.BusinessUnitRepository.Get())
        {
            foreach (CronJob cronJob in UnitOfWork.CronJobRepository.Get())
            {
                lock(Lock)
                {
                    NCrontab.CrontabSchedule schedule = NCrontab.CrontabSchedule.Parse(cronJob.JobSetting);

                    if (schedule.GetNextOccurrence(cronJob.LastRan) > DateTime.UtcNow.AddHours(businessUnit.GmtOffset))
                    {
                        EventJobDelegate jobDelegate;
                        if (CronJobs.TryGetValue(cronJob.JobName, out jobDelegate) == true )
                        {
                            jobDelegate(businessUnit);
                            cronJob.LastRan = DateTime.UtcNow;
                            UnitOfWork.CronJobRepository.Update(cronJob);
                            LogMessage("Job '" + cronJob.JobName + "' ran, next schedule on " + schedule.GetNextOccurrence(cronJob.LastRan));
                        }
                    }
                }
            }
        }
        UnitOfWork.Save();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:25:33.727

您可以注入一个工厂，然后解析一个调用容器的 ISynchronisationService 实例，就像您在 SyncRecords 中所做的那样。

有关实现工厂方法的示例，请参见[此处](http://blog.ploeh.dk/2012/03/15/ImplementingAnAbstractFactory.aspx)，其中列出了几种替代方案。

# perl - Perl - 在哈希中分配哈希引用

> ID：10672061
> 
> 赞同：0
> 
> 时间：2012-05-20T08:49:02.827
> 
> 标签：perl, hash, reference

```
use 5.010;
use strict;
use warnings;
use JSON::XS;
use YAML::XS;
my %data = ();
my $content = <<HERE;
{
  "name":"BLAHBLAH","contact":{"phone":"12345","twitter":"BLAHBLAH"},
  "location": {"address":"NOTTELLING","lat":10,"lng":10,"postalCode":"1234",
  "city":"BLAH","state":"BLAH","country":"BLAH"},
  "categories":[{"id":"BLAH","name":"BLAH"}]
}
HERE

my $id = "name1";

sub function {
    my ( $id, $data, $content ) = @_;
    my %data = %$data;
    my $out = decode_json($content);
    say "out:", Dump $out;
    $data{$id} = $out;
}

function( $id, \%data, $content );
say "data:", Dump %data; 
```

这不像我预期的那样工作。你能告诉我为什么以及它将如何工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T09:00:41.747

> “这不像我预期的那样工作。”

你期待什么？让我们逐步解决错误：

1) `date`!=`data`

2)`$content=~m!(,*)!`将`$1`留空，因为`$content`不包含任何逗号。

3)`decode_json($1)`将抛出运行时错误，因为`$1`它是空的并且`decode_json()` **只能应用于格式正确的 JSON 字符串。**

4)`$id`未定义。

> “你能告诉我为什么以及它将如何工作吗？”

如果还不清楚，它不会起作用。 *那里的错误比代码多。*

> “如何将哈希引用分配给哈希？”

使用`\`一元引用运算符，例如：

```
my %h = ();

my %h2 = (
    a => 10
);

$h{h2} = \%h2;

print $h{h2}->{a}; 
```

您还可以将标量 ( `$`) 声明为对**匿名**（未命名）散列的引用；这`$hr`是一个参考，哈希本身没有与之关联的符号或名称：

```
my $hr = {
    n => 42
};

# as an existing hash member:

$h{h3} = {
    x => 666,
    # some other examples:
    hr => \%h2,
    hr2 => {
        x => 1024
    }    
}; 
```

注意声明中使用的花括号`{}`，而不是`()`. 当您像 with 一样嵌套（匿名）哈希时`hr2`，请始终使用该形式。

如果你搜索*perl hash tutorial*，你会发现更深入的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T11:51:42.083

`%data`您在 package-scoped （紧随其后定义的那个）中找不到任何内容的原因是因为您正在使用该行`use YAML::XS`创建一个全新且完全独立`%data`的内部`function`

```
my %data = %$data; 
```

这会创建一个新的散列并将 引用的散列的内容复制`$data`到其中。

试试这个：

```
sub function {
  my ($id, $data, $content) = @_;
  my $out = decode_json($content);
  say "out:", Dump $out;
  $data->{$id} = $out;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T09:32:57.283

我认为你有一个错字：

```
function($id,/%data,$content); 
```

一定是

```
function($id,\%data,$content); 
```

并且 $content 不是对 %data 哈希的引用，所以在你的函数中你应该这样做：

```
my %data=%$data;  # in place of "my %content=%$content;" 
```

# php - 在 PHP 中加密 PNG 图像内容

> ID：10672065
> 
> 赞同：1
> 
> 时间：2012-05-20T08:49:46.183
> 
> 标签：php, encryption, png

我想在 PHP 中**加密 PNG 文件**（不是标题）的内容。

加密 (RSA) 后，IDAT 块的大小（包含有关像素的信息）会发生变化。所以我想到了手动更改那些二进制数据（块的长度、整个块和校验和）。宽度、高度、颜色深度等特定信息将保持不变（未加密）。

**只是想知道是否有一个函数可以为我创建整个标题，并能够插入二进制数据作为内容**（计算校验和以便正确显示图像）还是我必须自己做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:46:16.703

最近我在 C++ 中做了类似的事情。我没有更改*IDAT* ，而是添加了带有压缩和加密图像的自定义块（例如*xRSA*）（无论如何，这种加密是特定于应用程序的）。

我最初能够使用 3rd 方库将图像（灰色背景和通知该图像已加密的文本）保存在*PNG中。*然后我在这个文件中附加了自定义块（记住*IEND*块）。

在 PHP 中按照这种方式，您可以使用[imagecreatetruecolor()](http://www.php.net/manual/en/function.imagecreatetruecolor.php "图像创建真彩色（）")（通常为 GD）生成背景（可能不完全是灰色，但有些噪声看起来更酷），然后在自定义块中添加原始加密图像。

对不起我的英语，我希望我能帮上忙。

# php - Virtuemart 2/Joomla 2.5.4 浏览页面上的 Virtuemart 添加到购物车按钮

> ID：10672070
> 
> 赞同：3
> 
> 时间：2012-05-20T08:50:17.817
> 
> 标签：php, joomla, content-management-system, virtuemart

我试图弄清楚如何做到这一点，但无法解决，我尝试在这里、谷歌和 Virtuemart 论坛上搜索，但没有成功。

我正在尝试在类别浏览页面的产品详细信息页面上显示添加到购物车按钮。我之前在 Virtuemart 1.1 中使用以下代码执行此操作：

```
<?php echo $form_addtocart ?> 
```

然而，在尝试在 Virtuemart 2 中使用相同的代码时，我没有得到任何结果，即使他们的指南仍然说明了这一点，据我所知：http: [//virtuemart.net/documentation/Developer_Manual/Modifying_the_Layout.html](http://virtuemart.net/documentation/Developer_Manual/Modifying_the_Layout.html)

我尝试从产品页面复制确切的代码，但这也不起作用，代码是：

```
<?php
// Add To Cart Button
if (!VmConfig::get('use_as_catalog', 0) and !empty($this->product->prices)) {
echo $this->loadTemplate('addtocart');
}  // Add To Cart Button END
?> 
```

我要覆盖的文件位于：

```
/components/com_virtuemart/views/category/tmpl/default.php (the Category template)
/components/com_virtuemart/views/productdetails/tmpl/default.php (the Product page that the button is from) 
```

=====

如果我忽略了一些简单的事情或者我遗漏了任何必要的信息，我深表歉意。

问候，亚历克斯尼尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:46:18.063

使用 VM，它可能是很多事情。如果您没有调试工具，只需添加这些行以查看是否满足条件（如 Damien 所述）：

```
echo "vmConfig says: |".VmConfig::get('use_as_catalog', 0)."|";
echo ", Product has prices?: |".$this->product->prices."|";
// Add To Cart Button
if (!VmConfig::get('use_as_catalog', 0) and !empty($this->product->prices)) {
    echo $this->loadTemplate('addtocart');
}  // Add To Cart Button END 
```

如果两者都返回 true，那么它就是 addtocart 按钮的模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:52:27.723

（示例：）`default_products.php`这将添加“添加到购物车按钮”

```
<form method="post" class="product" action="index.php" id="addtocartproduct<?php echo $product->virtuemart_product_id ?>">
        <?php // Product custom_fields
        if (!empty($product->customfieldsCart)) {  ?>
        <div class="product-fields">
            <?php foreach ($product->customfieldsCart as $field)
            { ?><div style="display:inline-block;" class="product-field product-field-type-<?php echo $field->field_type ?>">
                <span class="product-fields-title" ><b><?php echo  JText::_($field->custom_title) ?></b></span>
                <?php echo JHTML::tooltip($field->custom_tip,  JText::_($field->custom_title), 'tooltip.png'); ?>
                <span class="product-field-display"><?php echo $field->display ?></span>

                <span class="product-field-desc"><?php echo $field->custom_field_desc ?></span>
                </div><br/ >
                <?php
            }
            ?>
        </div>
        <?php }
         /* Product custom Childs
          * to display a simple link use $field->virtuemart_product_id as link to child product_id
          * custom_value is relation value to child
          */

        if (!empty($this->product->customsChilds)) {  ?>
            <div class="product-fields">
                <?php foreach ($this->product->customsChilds as $field) {  ?>
                    <div style="display:inline-block;" class="product-field product-field-type-<?php echo $field->field->field_type ?>">
                    <span class="product-fields-title" ><b><?php echo JText::_($field->field->custom_title) ?></b></span>
                    <span class="product-field-desc"><?php echo JText::_($field->field->custom_value) ?></span>
                    <span class="product-field-display"><?php echo $field->display ?></span>

                    </div><br/ >
                    <?php
                } ?>
            </div>
        <?php } ?>

            <div class="addtocart-bar">

                <?php // Display the quantity box ?>
                <!-- <label for="quantity<?php echo $this->product->virtuemart_product_id;?>" class="quantity_box"><?php echo JText::_('COM_VIRTUEMART_CART_QUANTITY'); ?>: </label> -->
                <span class="quantity-box">
                    <input type="text" class="quantity-input" name="quantity[]" value="1" />
                </span>
                <span class="quantity-controls">
                    <input type="button" class="quantity-controls quantity-plus" />
                    <input type="button" class="quantity-controls quantity-minus" />
                </span>
                <?php // Display the quantity box END ?>

                <?php // Add the button
                $button_lbl = JText::_('COM_VIRTUEMART_CART_ADD_TO');
                $button_cls = ''; //$button_cls = 'addtocart_button';
                if (VmConfig::get('check_stock') == '1' && !$this->product->product_in_stock) {
                    $button_lbl = JText::_('COM_VIRTUEMART_CART_NOTIFY');
                    $button_cls = 'notify-button';
                } ?>

                <?php // Display the add to cart button ?>
                <span class="addtocart-button">
                    <input type="submit" name="addtocart"  class="addtocart-button" value="<?php echo $button_lbl ?>" title="<?php echo $button_lbl ?>" />
                </span>

            <div class="clear"></div>
            </div>

            <?php // Display the add to cart button END ?>
            <input type="hidden" class="pname" value="<?php echo $product->product_name ?>">
            <input type="hidden" name="option" value="com_virtuemart" />
            <input type="hidden" name="view" value="cart" />
            <noscript><input type="hidden" name="task" value="add" /></noscript>
            <input type="hidden" name="virtuemart_product_id[]" value="<?php echo $product->virtuemart_product_id ?>" />
            <?php /** @todo Handle the manufacturer view */ ?>
            <input type="hidden" name="virtuemart_manufacturer_id" value="<?php echo $product->virtuemart_manufacturer_id ?>" />
            <input type="hidden" name="virtuemart_category_id[]" value="<?php echo $product->virtuemart_category_id ?>" />
    </form> 
```

# google-chrome - 如何检测浏览器是否支持 contenteditable 参数中的“纯文本”值？

> ID：10672081
> 
> 赞同：11
> 
> 时间：2012-05-20T08:52:41.290
> 
> 标签：google-chrome, contenteditable, browser-support

我找不到有关“contenteditable”HTML5 参数的任何相关信息。我发现 Google Plus 正在将它用于 Chrome 浏览器：

```
<div contenteditable="plaintext-only"></div> 
```

似乎没有其他浏览器支持这一点，它只是 Chrome 的专有价值。我想在我的项目中使用它。但是，我需要检测浏览器并确定是否支持“纯文本”设置。

当然，我只能检测到 Chrome，但可能有其他浏览器支持它（我目前不知道）或者其他主流浏览器将来可能会开始支持此功能。

因此，我宁愿检测是否支持“纯文本”功能，而不是仅检测 Chrome 浏览器。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-19T14:58:26.190

如果您不想依赖捕获异常来检测功能，这里有一个替代方案：

```
function supportsPlaintextEditables () {
    var div = document.createElement('div');
    div.setAttribute('contenteditable', 'PLAINTEXT-ONLY');

    return div.contentEditable === 'plaintext-only';
}

console.log(supportsPlaintextEditables);
//-> true/false 
```

这是有效的，因为如果将值设置为属性而不是属性，则不会引发 SyntaxError 异常`'plaintext-only'`，而是将属性值设置为默认值`'inherit'`。

在设置属性后获取属性会导致小写字符串，因此将属性值设置为`'PLAINTEXT-ONLY'`将导致属性值为`'plaintext-only'`(supported/true) 或`'inherit'`(not supported/false)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-20T09:44:24.220

它似乎是一个[webkit-only](https://bugs.webkit.org/show_bug.cgi?id=54041)功能。[规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#contenteditable)只允许“真”、“假”和“继承”作为属性的可能值

已经提交了一个[错误以向编辑规范添加对纯文本的支持，但有趣的是请求是“纯文本”而不​​是“纯文本”。](https://www.w3.org/Bugs/Public/show_bug.cgi?id=14554)

编辑：此代码可用于检测支持。[演示](http://jsfiddle.net/e9t2d/1/)：

```
function supportsPlainText()
{
    var d = document.createElement("div");
    try {
        d.contentEditable="PLAINtext-onLY";
    } catch(e) {
        return false;
    }
    return d.contentEditable=="plaintext-only";
}

alert(supportsPlainText()); 
```

但是请记住，做浏览器特定的页面是导致我们遇到 IE6 问题的原因。

# autohotkey - 使用 AutoHotkey 将每一行包含在引号内

> ID：10672085
> 
> 赞同：0
> 
> 时间：2012-05-20T08:53:39.350
> 
> 标签：autohotkey

我有两千行文字。我需要将每一行都用引号括起来，例如“example”。

**前**

```
line 1
line 2
line 3 
```

**后**

```
"line 1"
"line 2"
"line 3" 
```

我怎么能用 AutoHotkey 来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:55:36.930

像这样？

```
text=
(
bla bla bla
blah blah blah blah
blablah blablah blablah
)
MsgBox %    RegExReplace(RegExReplace(text,"`am)^.","""$0"),"`am).$","$0""") 
```

# javascript - HTML5 音频 - 进度条

> ID：10672089
> 
> 赞同：5
> 
> 时间：2012-05-20T08:54:23.590
> 
> 标签：javascript, html, audio, canvas

我正在尝试用 HTML5 制作 MP3 播放器。几乎所有的工作都完成了，但我需要的是我想替换`<audio>`标签中的默认控件并制作我自己的控件。播放、暂停、停止和音量等简单控制已完成，但我想制作一个进度条来跟踪音频/MP3 的持续时间，当我点击相关位置时，它会转到轨道上的特定位置。就像下面例子中的那个。

[http://msdn.microsoft.com/en-us/library/ie/gg589528(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/gg589528(v=vs.85).aspx)

这里的问题是，在上面的示例中，文件/MP3 已经加载，我实际上是通过使用创建一个音频元素`document.createElement("audio");`

当我尝试使用不同的方法来更改上面的示例时，我大多会收到一个错误“无法调用 null 的 addeventlistener 方法”。我希望这个播放器在 Chrome 上运行。

提前感谢您的支持和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:40:52.193

在我不久前写的本教程中有一个进度条示例：[使用 HTML5 多媒体组件 - 第 3 部分：自定义控件](http://www.adobe.com/devnet/html5/articles/html5-multimedia-pt3.html)。`audio`对于动态创建的元素，调用等应该相同。

但是，是的，您正在做的一些代码示例会很有用。

# android - 总是在 AndroidManifest 文件中声明活动和服务？

> ID：10672090
> 
> 赞同：3
> 
> 时间：2012-05-20T08:54:28.533
> 
> 标签：android, android-intent, android-manifest, android-service, android-activity

我知道您必须在*AndroidManifest.xml文件中声明所有**活动*和*服务*，以便系统可以访问它们（如官方文档中所述），但如果我有一个*服务*或*活动*，我只想通过我的应用程序中的另一个*活动*，我需要在清单中声明它吗？即，我总是从我的应用程序的主要活动启动次要活动，直接指向次要活动的类（没有*意图过滤器分辨率******)，还需要在manifest中声明次要activity吗？如果我不希望我的应用程序之外的任何人能够启动我的辅助活动怎么办？如果这是一个愚蠢的问题，我很抱歉，我只是想了解当您希望仅通过在同一个应用程序。*****

 **** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T08:58:39.730

您必须在 AndroidManifest.xml 文件中声明所有活动和服务（以及其他所有内容，如 BroadcastReceivers）。否则您将无法使用它们。

* * *

编辑：根据 CommonsWare 评论，将 android:exported="false" 添加到 AndroidManifest.xml 的活动声明中会阻止您的辅助活动在您的应用程序之外启动。***

# xml - 如何通过 xslt 1.0 添加命名空间和模式

> ID：10672091
> 
> 赞同：-1
> 
> 时间：2012-05-20T08:54:33.947
> 
> 标签：xml, xslt, namespaces, schema

我收到了多个 xml 文档，我必须通过 xsl 将它们转换为一个 unifrom xml 文档。我还必须向这个结果 xml 文档添加名称空间和架构。我的问题是我必须通过 xsl 样式表将模式和名称空间添加到该文档中，但我不知道该怎么做。尽管我在弄清楚如何添加命名空间方面已经走了很长一段路，但是如何通过样式表为我的 xml 结果文档提供我的模式的位置？

这是我目前在我的样式表中的内容，由于 schemaLocation，它不起作用：

```
<xsl:stylesheet  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:main="http://www.vm.com/main"
        xmlns:teleprompt ="http://www.vm.com/teleprompt"
        xmlns:warner ="http://www.vm.com/warner"
        xsi:schemaLocation="http://www.vm.com/main mainSchema.xsd"
        version="1.0"> 
```

这就是我想要使用命名空间的地方：

```
<album teleprompt:type="simple" teleprompt:href="http://www.vm.com/teleprompt"> 
```

我还需要将上面的代码应用于其树中的所有内容。

其中有四个专辑，其中只有两个需要命名空间。请不要给我答案，因为我没有在我的样式表中使用将元素分解为模板。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:27:49.413

您需要为“xsi”添加名称空间绑定，即[http://www.w3.org/2001/XMLSchema-instance](http://www.w3.org/2001/XMLSchema-instance)。

```
<xsl:stylesheet  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:main="http://www.vm.com/main"
    xmlns:teleprompt ="http://www.vm.com/teleprompt"
    xmlns:warner ="http://www.vm.com/warner"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.vm.com/main mainSchema.xsd"
    version="1.0"> 
```

不使用模板如何成功当然是另一回事。

# parsing - 使用 Powershell 读取/解析二进制文件

> ID：10672092
> 
> 赞同：29
> 
> 时间：2012-05-20T08:54:38.273
> 
> 标签：parsing, powershell, binary

我正在尝试解析二进制文件，我需要一些关于去哪里的帮助。我在网上寻找“解析二进制文件”、“读取二进制文件”、“读取二进制文件中的文本”等，但我没有任何运气。

例如，我如何从这个二进制文件中读取这个文本？任何帮助将非常感激。我正在使用powershell。

![在此处输入图像描述](../Images/ea6e42939e3c332eebac6b2dc1ccf6b1.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-20T09:33:36.470

似乎您有一个二进制文件，其文本位于固定或其他可推导的位置。[`Get-Content`](http://technet.microsoft.com/en-us/library/ee176843)可能对您有所帮助，但是...它将尝试将整个文件解析为字符串数组，从而创建一个“垃圾”数组。此外，您不会知道特定“字符绳”是从哪个文件位置开始的。

您可以尝试使用 .NET 类[`File`](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)进行读取和[`Encoding`](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)解码。每次调用只需一行：

```
# Read the entire file to an array of bytes.
$bytes = [System.IO.File]::ReadAllBytes("path_to_the_file")
# Decode first 12 bytes to a text assuming ASCII encoding.
$text = [System.Text.Encoding]::ASCII.GetString($bytes, 0, 12) 
```

在您的实际情况下，您可能会在循环中遍历字节数组，查找特定字符串序列的开始和结束，并使用这些索引来指定要从中提取文本的字节范围[`GetString`](http://msdn.microsoft.com/en-us/library/05cts4c3.aspx)。

我提到的 .NET 方法在 .NET Framework 2.0 或更高版本中可用。如果您安装了 PowerShell 2.0，那么您已经拥有它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-20T20:47:59.587

如果您只是在寻找字符串，请查看 SysInternals 的[strings.exe](http://technet.microsoft.com/en-us/sysinternals/bb897439)实用程序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-20T08:59:55.360

您可以通过 Get-Content -Encoding byte 读取文件。我不确定如何解析它。

# c++ - stdio 是否总是设置 errno？

> ID：10672095
> 
> 赞同：10
> 
> 时间：2012-05-20T08:55:30.563
> 
> 标签：c++, c, error-handling, stdio, errno

当`stdio`流遇到错误（但不是 EOF）时，将设置流的错误指示符，以便`ferror()`返回非零值。我一直认为更多信息可在`errno`. 但是我怎么知道呢？

一些功能的文档[例如`man fopen`在 Linux 下] 说也`errno`将被设置。不过`man fgets`完全没提`errno`。glibc 信息页面令人放心：

> 除了设置与流相关的错误指示符之外，对流进行操作的函数也设置 `errno' 的方式与对文件描述符进行操作的相应低级函数相同。

但我不知道这个保证有多强。是C标准要求的吗？在 Visual C/C++ 中会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T09:18:20.910

C 标准本身并不需要大量使用 errno WRT`stdio`函数；它指定`ferror()`但仅说

> **7.13.10.3 ferror 函数**ferror 函数测试stream 指向的流的错误指示符。当且仅当为流设置了错误指示符时，ferror 函数才返回非零值。

来自 C99 草案： http: [//www.vmunix.com/~gabor/c/draft.html](http://www.vmunix.com/~gabor/c/draft.html)。在大多数情况下，使用的任何实际错误代码都是由实现定义的。

但是，Linux 上的 GNU C 库也符合 POSIX 规范：

[http://pubs.opengroup.org/onlinepubs/9699919799/toc.htm](http://pubs.opengroup.org/onlinepubs/9699919799/toc.htm)

在这种情况下，它们的定义要好得多。例如，如果您查看页面`fopen`：

[http://pubs.opengroup.org/onlinepubs/9699919799/functions/fopen.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fopen.html)

*您将在Errors*下看到很多详细信息，包括特定的 errno 代码。

同样，几乎所有普通 linux 系统上使用的 GNU C 库都符合 POSIX，因此您可以依靠该信息；）。那些（在线）POSIX 手册页通常也比标准的 linux 系统手册页更详细（同时阅读）。

WRT 到其他（非 POSIX）平台上的文件操作，它们将有自己的实现。不幸的是，这样的东西在标准 C 中并不是透明可移植的。不过，C++ 流确实具有更标准化的错误处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T11:04:03.433

根据 C11 标准，第 7.21 章（“stdio.h”），只有`fgetpos`,`fsetpos`并在发生错误时`ftell`写入。`errno`

# javascript - 如何使 Three.js 全屏？

> ID：10672101
> 
> 赞同：3
> 
> 时间：2012-05-20T08:56:46.580
> 
> 标签：javascript, html, 3d, fullscreen, three.js

我想用 Three.js 做一个游戏，但是如何让它全屏呢？我看到了[这篇文章](http://learningthreejs.com/blog/2011/11/17/lets-make-a-3d-game-make-it-fullscreen)，并且在我的代码中包含了 THREEx，但是当我这样做时：`THREEx.FullScreen.request()`没有任何反应！为了调试，我查看了 THREEx 代码，并将其更改为：

```
THREEx.FullScreen.request   = function(element)
{
    element = element   || document.body;
    if( this._hasWebkitFullScreen ){
        element.webkitRequestFullScreen();
        console.log("f");
    }else if( this._hasMozFullScreen ){
        element.mozRequestFullScreen();
        console.log("g");
    }else{
        console.assert(false);
    }
} 
```

因此，这默认使 document.body 全屏，并在控制台中打印“f”。但是——什么都没有！控制台中没有错误消息或任何东西......我已经尝试了他的池示例，它有效，所以我很确定这不是我的电脑的错......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T11:19:19.637

你必须：

1.  在用户允许时请求，例如 on `keydown`。我想原因与打开弹出窗口相同。一个网页自行随机切换全屏可以说比自动打开的弹出窗口更烦人。
2.  在元素上请求全屏，而不是`document`.
3.  设置为调用（所以只需像下面这样调用它）`request`。`this``THREEx.FullScreen`

所以例如：

```
document.body.addEventListener("keydown", function() {
  THREEx.FullScreen.request();
}, false); 
```

# json - 使用 JSON 和 Wink 的 JAX-RS 客户端/服务器应用程序

> ID：10672104
> 
> 赞同：3
> 
> 时间：2012-05-20T08:57:17.393
> 
> 标签：json, rest, websphere, jax-rs, apache-wink

我想使用 JSON（杰克逊转换器）格式和 Wink 提供程序来实现 JAX-RS 服务器（在 WebSphere Application Server 上）和客户端应用程序。

1.  我是否需要为将传入和传出 REST 服务的 DTO 类使用 JAXB 注释，因此必须是可序列化的？

2.  我需要使用哪种响应类型，JSONObject 或我的 Class 类型，即客户端/服务器之间的 Post 方法协商中的 MyClass 或 String？

在哪些情况下，我们对 Rest 服务中的域类使用 JAXB 注释？

您的见解/方向将不胜感激。

在此先感谢，欧文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T06:11:43.600

我想你需要阅读更多关于杰克逊的信息。
但这里有一些简短的答案：

1.  对于 90% 的情况，您根本不需要在类上添加 JAXB 注释。
2.  您需要使用您的课程：

    @POST public MyClass myMethod(MyOtherClass mcls)

3.  当您对默认结果不满意时，您可以使用 JAXB 注释进行一些复杂的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:45:15.680

除了上面的答案：在 Apache Wink 中使用 Jackson 处理 JSON 通常是有意义的。Jackson 比捆绑的工具更强大、更灵活。

[http://www.ibm.com/developerworks/java/library/wa-aj-jackson/index.html](http://www.ibm.com/developerworks/java/library/wa-aj-jackson/index.html)展示了如何为 Jackson 配置 Apache Wink。

# python - 从 Python 中存储在 HDFS 上的文件中读取行的最有效方法是什么？

> ID：10672105
> 
> 赞同：2
> 
> 时间：2012-05-20T08:57:25.123
> 
> 标签：python, hadoop, hdfs

我试图找出一种方法来从存储在 HDFS 服务器上的多个文本文件中读取数据行，在 Python 中。我需要解析每一行并只保留部分数据，所以我不想将文件保存在本地。

我需要一种连接到服务器的方法，查看特定文件夹中的所有文件，并从每个文件中读取所有行并对它们执行（与此问题无关）操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:04:51.163

问题评论中提到的 GitHub 存储库 python-hdfs 通过 libhdfs（HDFS 的 C 接口）从 Python 查询 HDFS。最近引入了WebHDFS，它为HDFS提供了一个REST接口。[https://github.com/drelu/webhdfs-py](https://github.com/drelu/webhdfs-py)是 WebHDFS 的 Python 客户端，可能比 python-hdfs 更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-05T19:25:10.627

这样做的pythonic方法是使用itertools.chain。但是您可以编写一个小型实用程序生成器函数，它迭代文件，然后迭代文件中的行并一次生成一行。像这样的东西：

```
def lines_in_files(connection):
    for f in # some code which fetches a files at a time from the connection
         for line in f:
             yield line 
```

如果您获取的文件对象不支持所有文件方法，请在执行之前将其内容包装在 StringIO 中`for line in`。

# html - 对齐表单域的浮动部分

> ID：10672114
> 
> 赞同：0
> 
> 时间：2012-05-20T08:58:59.327
> 
> 标签：html, css, positioning, css-float

我有一个包含在结构`ul`中的表单字段列表。`li`我已经简化了我的标记以专注于我遇到的问题。

这是标记：

```
<ul>
<li class="multiplechoice">
   <fieldset>
     <legend>my label</legend>
     <div class="description">My description</div>

          <ul>        
            <li>
              <button value="asdf" readonly="readonly"></button>
              <label>test12</label>
             </li>
             <li>
               <button value="0" readonly="readonly"></button>
               <label for="test23">test23</label> </li>
           </ul>

    </fieldset>
</li>
</ul> 
```

到目前为止，我拥有的 CSS：

```
legend{
    float: left;
    width: 80px;
    margin-right: 20px;
}

.description{
    clear: both;
    float: left;
    width: 80px;
    margin-right: 20px;
}

ul{
    float: left;
} 
```

注意：`div`带有类的`description`可以不存在、内部不包含文本或包含文本。

我想做的是让图例和描述都浮动到左边。说明应位于图例下方。包含的`ul`按钮应该与那些浮动项目分开一个边距，对齐到第一个浮动的顶部并垂直对齐。

这是一张显示事物当前状态的图片： ![在此处输入图像描述](../Images/7e0066c39c9532fb5dc6f91fd150063d.png)

我一直在尝试各种浮动和定位，但似乎无法到达那里。任何人都可以就如何达到预期的结果提出建议吗？

我正在寻找仅 CSS 的解决方案，最好不要使用 javascript :)

小提琴：http: [//jsfiddle.net/eHEcJ/](http://jsfiddle.net/eHEcJ/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T19:19:28.377

这里有一些有用的东西，如上所述，您并不总是需要一个表格来对齐字段。在我尝试为报告创建标题时通过反复试验发现；我是 HTML 的初学者，所以这可能不是最优雅的解决方案。

![在此处输入图像描述](../Images/d1953634ad190a473cd408ed978e0363.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:09:23.620

将 移动`description`到 中`label`，您可以从中删除`clear:both`和`float:left`属性 - 描述现在是左侧浮动标签的一部分，因此它应该可以工作。使`Description` `display:block`

```
<style>
.myLabel{
    float: left;
    width: 80px;
    margin-right: 20px;
}

.description{
    width: 80px;
    margin-right: 20px;
    display:block;
}

ul{
    float: left;
}

</style>
<fieldset>
  <ul>
    <li class="multiplechoice">
          <label class="myLabel">my label
            <span class="description">some description</span>
          </label>
          <ul>
            <li>
              <button value="asdf" readonly="readonly"></button>
              <label>test12</label>
             </li>
             <li>
               <button value="0" readonly="readonly"></button>
               <label for="test23">test23</label> </li>
           </ul>
     </li>
</ul></fieldset> 
```

*最终标签未呈现时存在一些问题。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T09:53:25.417

我最终只是摆脱了浮动`ul`并使其成为`inline-block`：

```
legend{
    float: left;
    width: 80px;
    margin-right: 20px;
}

.description{
    clear: both;
    float: left;
    width: 80px;
    margin-right: 20px;
}

ul{
    display: inline-block;
} 
```

和小提琴：http: [//jsfiddle.net/BU57V/](http://jsfiddle.net/BU57V/)

# couchdb - ektorp / CouchDB 混合 HashMap 和 Annotations

> ID：10672115
> 
> 赞同：0
> 
> 时间：2012-05-20T08:59:08.003
> 
> 标签：couchdb, ektorp

在 jcouchdb 中，我曾经扩展 BaseDocument，然后以透明的方式混合注释和未声明的字段。例子：

```
import org.jcouchdb.document.BaseDocument;

public class SiteDocument extends BaseDocument {
    private String site;

    @org.svenson.JSONProperty(value = "site", ignoreIfNull = true)
    public String getSite() {
        return site;
    }

    public void setSite(String name) {
        site = name;
    }
} 
```

然后使用它：

```
// Create a SiteDocument
SiteDocument site2 = new SiteDocument();
site2.setProperty("site", "http://www.starckoverflow.com/index.html");
// Set value using setSite
site2.setSite("www.stackoverflow.com");
// and using setProperty
site2.setProperty("description", "Questions & Answers");
db.createOrUpdateDocument(site2); 
```

我同时使用通过注释定义的文档字段（站点）和未定义的属性字段（描述），当我保存文档时，两者都会被序列化。

这对我来说很方便，因为我可以处理半结构化文档。

当我尝试对 Ektorp 做同样的事情时，我有使用注释的文档和使用 HashMap 的文档但是我找不到一种简单的方法来混合两者（我尝试过使用我自己的序列化程序，但这似乎对某些事情很有用我在 jcouchdb 中免费获得）。还尝试注释 HashMap 字段，但随后被序列化为对象，并且我将字段自动保存在具有 HashMap 字段名称的对象内。

是否可以（轻松/免费）使用 Ektorp？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T06:45:04.883

这绝对是可能的。你有两个选择：

1.  以 org.ektorp.support.OpenCouchDbDocument 为基础
2.  使用 @JsonAnySetter 和 @JsonAnyGetter 注释你的类。红色更多：[http ://wiki.fasterxml.com/JacksonFeatureAnyGetter](http://wiki.fasterxml.com/JacksonFeatureAnyGetter)

# c# - 如何在资源中的 wpf 表单上设置背景？

> ID：10672120
> 
> 赞同：0
> 
> 时间：2012-05-20T09:00:15.250
> 
> 标签：c#, wpf, background, pack

```
this.Background =  
    new ImageBrush(new BitmapImage(
        new Uri(@"pack://application:,,,/Stream;component/images/empty.png"))); 
```

不工作！我收到一个 IOException，上面写着找不到资源，我的项目名称是流，甚至是我的程序集名称和默认名称空间...请帮助...

或者如果有像将位图图像转换为 ImageSource 之类的替代方法，请告诉我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T09:12:09.567

检查**构建操作**（`empty.png`右键单击解决方案资源管理器中的文件并选择属性）。应该是`Resource`（**不是** `Embedded Resource`）。

# vhdl - VHDL 方法调用

> ID：10672123
> 
> 赞同：1
> 
> 时间：2012-05-20T09:00:48.407
> 
> 标签：vhdl

是否可以编写一个代码段并调用它，而不是多次编写该段？IE。我想重用一段代码，如下所示：

```
process (currentState)
begin
    case currentState is
    when requiredCoinsTensAnode => anodes <= "100000";--turn on the tens display
        case tensCount is
        when "0000" => segDisplay <= "1111110"; --0
        when "0001" => segDisplay <= "0110000"; --1
        when "0010" => segDisplay <= "1101101"; --2
        when "0011" => segDisplay <= "1111001"; --3
        when "0100" => segDisplay <= "0110011"; --4
        when "0101" => segDisplay <= "1011011"; --5
        when "0110" => segDisplay <= "1011111"; --6
        when "0111" => segDisplay <= "1110000"; --7
        when "1000" => segDisplay <= "1111111"; --8
        when others => segDisplay <= "1111011"; --9
        end case;
        nextState <= requiredCoinsUnitsAnode;--just displayed the tens digit, next we need to display the units digit
    when requiredCoinsUnitsAnode => anodes <= "010000";--turn on the units display
        case unitsCount is
        when "0000" => segDisplay <= "1111110"; --0
        when "0001" => segDisplay <= "0110000"; --1
        when "0010" => segDisplay <= "1101101"; --2
        when "0011" => segDisplay <= "1111001"; --3
        when "0100" => segDisplay <= "0110011"; --4
        when "0101" => segDisplay <= "1011011"; --5
        when "0110" => segDisplay <= "1011111"; --6
        when "0111" => segDisplay <= "1110000"; --7
        when "1000" => segDisplay <= "1111111"; --8
        when others => segDisplay <= "1111011"; --9
        end case;
        nextState <= insertedCoinsTensAnode;
    end case;
end process; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T09:03:47.747

是的，您可以使用 VHDL 中的函数。

检查[http://www.csee.umbc.edu/portal/help/VHDL/design.html#funcd](http://www.csee.umbc.edu/portal/help/VHDL/design.html#funcd)
[http://www.pldworld.com/_hdl/1/www.ireste.fr/fdl/vcl/lesd/ les_3.htm](http://www.pldworld.com/_hdl/1/www.ireste.fr/fdl/vcl/lesd/les_3.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T10:57:14.560

正如 ravi 所指出的，函数是一种选择。

```
function f_segDisplay (
  signal segCount : std_logic_vector(6 downto 0))
  return std_logic_vector(3 downto 0) is
begin  -- f_segDisplay
    case segCount is
      when "0000" => return "1111110";  --0
      when "0001" => return "0110000";  --1
      when "0010" => return "1101101";  --2
      when "0011" => return "1111001";  --3
      when "0100" => return "0110011";  --4
      when "0101" => return "1011011";  --5
      when "0110" => return "1011111";  --6
      when "0111" => return "1110000";  --7
      when "1000" => return "1111111";  --8
      when others => return "1111011";  --9
    end case;
end f_segDisplay;

process (currentState, tensCount, unitsCount)
begin
  case currentState is
    when requiredCoinsTensAnode =>
      anodes     <= "100000";          --turn on the tens display
      segDisplay <= f_segDisplay(tensCount);
      nextState  <= requiredCoinsUnitsAnode;
    when requiredCoinsUnitsAnode =>
      anodes     <= "010000";          --turn on the units display
      segDisplay <= f_segDisplay(unitsCount);
      nextState  <= insertedCoinsTensAnode;
  end case;
end process; 
```

根据编译器和选项，它可能决定将函数代码内嵌。这将导致放置多个逻辑实例，就像您的原始代码一样。

另一种方法是将公共代码取出到另一个进程中：

```
p_segdisplay : process (segCount)
begin  -- process p_segdisplay
  case segCount is
    when "0000" => segDisplay <= "1111110";  --0
    when "0001" => segDisplay <= "0110000";  --1
    when "0010" => segDisplay <= "1101101";  --2
    when "0011" => segDisplay <= "1111001";  --3
    when "0100" => segDisplay <= "0110011";  --4
    when "0101" => segDisplay <= "1011011";  --5
    when "0110" => segDisplay <= "1011111";  --6
    when "0111" => segDisplay <= "1110000";  --7
    when "1000" => segDisplay <= "1111111";  --8
    when others => segDisplay <= "1111011";  --9
  end case;
end process p_segdisplay;

process (currentState, tensCount, unitsCount)
begin
  case currentState is
    when requiredCoinsTensAnode =>
      anodes    <= "100000";          --turn on the tens display
      segCount  <= tensCount;
      nextState <= requiredCoinsUnitsAnode;
    when requiredCoinsUnitsAnode =>
      anodes    <= "010000";          --turn on the units display
      segCount  <= unitsCount;
      nextState <= insertedCoinsTensAnode;
  end case;
end process; 
```

顺便说一句：您的敏感度列表中需要 tensCount 和 unitsCount。

在进行区域或功率意识设计时，像这样抽象公共资源是一种有用的技术。

两者应该以相同的方式工作，完美的工具会从两者中产生相同的逻辑，但我们很少有完美的工具。尝试不同的风格。有些在某些工具上产生更好的结果，有些在其他工具上产生更好的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T12:06:38.157

该代码可能是最好的 a `function`or `procedure`。

An`entity`是在 VHDL 中封装代码的另一种方法。

# sql - 存储过程和 WCF 数据服务

> ID：10672127
> 
> 赞同：1
> 
> 时间：2012-05-20T09:01:26.030
> 
> 标签：sql, wcf

我有一个 WCF 数据服务设置，可以通过浏览器 url 访问表数据。

已经创建了一个简单的存储过程，它接受一个参数，然后通过连接从各种表中返回一些列 - 我该如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:03:18.160

如果您使用的是实体框架模型，您可以这样做：

1.  打开模型浏览器。
2.  右击“EntityContainer:(name)”->“Function Imports”，选择“Add Function Imports...”。
3.  选择存储过程，将“Complex”指定为“Returns a Collection Of”，单击“Get Column Information”并单击“Create New Complex Type”。![在此处输入图像描述](../Images/8ba7b8c20719495f7e3768e3eeae3c7f.png)
4.  添加`config.SetServiceOperationAccessRule("SomeStoredProcedure", ServiceOperationRights.AllRead);`到 SomeDataService.svc.cs 中的 InitializeService 方法。
5.  现在向 SomeDataService.svc.cs 添加一个具有 WebGet 属性的方法，该方法返回您之前定义的复杂类型的 IQueryable：

```
 `[WebGet]
    public IQueryable<SomeStoredProcedure_Result> SomeStoredProcedure()
    {
      return CurrentDataSource.SomeStoredProcedure(1).AsQueryable();
    }` 
```

`上面的1是存储过程的参数。`

 `现在可以在以下位置使用存储过程：

```
http://localhost/SomeDataService.svc/SomeStoredProcedure 
````

# c++ - Visual C++ 程序崩溃，但没有生成转储文件。为什么？

> ID：10672130
> 
> 赞同：3
> 
> 时间：2012-05-20T09:02:17.963
> 
> 标签：c++, dump, iocp

我有一个非常奇怪的情况。我正在运行由 Visual Studio 2010 用 C++ 编写的 IOCP 服务器程序。

它使用'minidump'，所以当出现诸如指针滥用之类的逻辑错误时，程序会因转储文件而崩溃，因此我可以找出代码中的崩溃点在哪里。

有时（很少），程序崩溃并且没有转储文件。

什么情况下`SetUnhandledExceptionFilter()`不工作？有人知道这个问题吗？我想不通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T10:00:16.117

好吧，您当然不知道，因为您没有要查看的小型转储。当 SetUnhandledExceptionFilter 回调触发时，您应该做绝对最小值。该过程处于危险状态。它崩溃了。锁可能会被持有，堆锁特别麻烦。你不能指望 MiniDumpWriteDump() 会成功。

您需要的是一个等待命名事件的小守护进程。尽早在您的 main() 函数中启动它并将您的进程 ID 传递给它。守卫进程等待该事件和您的进程句柄。在您的异常回调中，只需发出事件信号并立即休眠很长时间。这会唤醒守卫进程，它会调用 MiniDumpWriteDump() 以及让您了解崩溃的任何其他必要信息。并杀死你的主程序。

# mysql - 表关系的 SQL 可视化软件

> ID：10672132
> 
> 赞同：1
> 
> 时间：2012-05-20T09:02:48.717
> 
> 标签：mysql, sql, relationship

我有来自我的 MYSQL 数据库的 SQL 文件。我怎样才能快速获得表关系的图片，如下所示：

![图片在这里](../Images/edfd28920b02c2b1f2472e09b2a09428.png)

如果我可以将文件导入软件并输出程序视图，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:05:12.647

您必须使用 mysql 实用程序将文件加载到数据库中：

```
mysql -u root -p db_name < file.sql 
```

然后您可以使用[mysql workbench](http://www.mysql.com/products/workbench/)之类的可视化工具打开数据库...

# django - 无法将上下文变量发送到 Django 中的模板

> ID：10672135
> 
> 赞同：0
> 
> 时间：2012-05-20T09:03:49.613
> 
> 标签：django, django-templates, django-views

在我的 Django 视图中，当我尝试将变量分配给我的上下文变量时，它不起作用。我基本上从请求中获取数据，根据请求执行搜索，然后将该搜索结果分配给我的上下文。**这是我的**view.py：EDIT2

 **```
def home(request):
    GET = request.GET
    utilisateur = ""
    context = {}
    if GET.has_key('name'):
        me = UserProfile.objects.filter(facebookId=GET[u'name'])
        utilisateur = me[0].facebookId
        print utilisateur
        context.update({"nom":str(utilisateur)})
        print context.get("nom")    
        return render_to_response('home.html',context)
    else:
        print "Request doenst have a Name variable"
        return render_to_response("home.html",context,
            context_instance=RequestContext(request)) 
```

现在即使我用`var`数字替换变量，我仍然无法通过上下文将它发送到模板，但我仍然可以从控制台看到它的值（注意这些`print var`行）

我在这里做错什么了吗？**编辑 **

我的 home.html 文件：

```
<!DOCTYPE html>
 <html>
 <head>
<title>Welcome</title>
<script type="text/javascript"    src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
</head>
<body>

<div id="fb-root"></div>
<script>
var username = "";
$(document).ready(function(){

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

  // Init the SDK upon load
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '302210766529054', // App ID
      channelUrl : '//'+window.location.hostname+'/channel', // Path to your Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // listen for and handle auth.statusChange events
    FB.Event.subscribe('auth.statusChange', function(response) {
      if (response.authResponse) {
        // user has auth'd your app and is logged into Facebook
        FB.api('/me', function(me){
          if (me.username) {
            document.getElementById('auth-displayname').innerHTML = me.name;
            username = me.username;
            document.getElementById('picture').innerHTML = "<img src = 'https://graph.facebook.com/"+me.username+"/picture'>";
            xmlhttp = new XMLHttpRequest();
            xmlhttp.open('GET','?name='+me.username, true);
            xmlhttp.send();
          }
        })
        document.getElementById('auth-loggedout').style.display = 'none';
        document.getElementById('auth-loggedin').style.display = 'block';
      } else {
        // user has not auth'd your app, or is not logged into Facebook
        document.getElementById('auth-loggedout').style.display = 'block';
        document.getElementById('auth-loggedin').style.display = 'none';
      }
    });

    // respond to clicks on the login and logout links
    document.getElementById('auth-loginlink').addEventListener('click', function(){
      FB.login();
    });
    document.getElementById('auth-logoutlink').addEventListener('click', function(){
      xmlhttp = new XMLHttpRequest();
      xmlhttp.open('GET','?name='+username+'&logout=True', true);
      xmlhttp.send();
      FB.logout();
    }); 
  } 

  }
  );
</script>

<h1>Skèmpi:Rediscover your heritage</h1>
  <div id="auth-status">
    <div id="auth-loggedout">
      <a href="#" id="auth-loginlink">Login</a>
    </div>
    <div id="auth-loggedin" style="display:none">
    <div id="picture"></div>
      Hi, <span id="auth-displayname"></span>  
    (<a href="#" id="auth-logoutlink">logout</a>)
   {{ nom }}

  </div>
</div> 
```

**编辑 3**

```
Quit the server with CONTROL-C.
[21/May/2012 01:10:35] "GET /skempi/home HTTP/1.1" 301 0
Request doesn't have a Name variable
[21/May/2012 01:10:35] "GET /skempi/home/ HTTP/1.1" 200 3179
dontshare
[21/May/2012 01:10:35] "GET /skempi/home/?name=dontshare HTTP/1.1" 200 3188 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:16:36.997

因此，似乎这里可能发生了很多事情。

您是否验证`settings.TEMPLATE_DIRS`设置正确并且`home.html`模板实际上正在呈现？为了验证这一点，当您尝试在 Web 浏览器中加载页面时，是否会出现 SDK 样板文件？

我假设你点击了正确的 URL - `http://127.0.0.1:8000/?name=Mohamed`。那是对的吗？

最后，该`print`语句是否返回任何内容——也就是说，您是否从`UserProfile`查询中得到响应？

验证了所有这些内容后，您使用的上下文变量名称之间存在一些混淆。在`views.py`中，您设置了上下文变量`temp`，但在模板中`home.html`您尝试输出上下文变量`nom`。这就是我可能实现视图的方式：

```
def home(request):
    context = {}
    if 'name' in request.GET:
        me = UserProfile.objects.filter(facebookId=request.GET[u'name'])
        context['nom'] = str(me[0].facebookId)
        print context['nom'] # if you really want see what's been stored 
    else:
        print "Request doesn't have a Name variable"

    return render_to_response("home.html", context,
        context_instance=RequestContext(request)) 
```

然后呈现的页面应显示返回的 Facebook ID，无论您将`{{ nom }}`.**

# java - 任何 DLL 导入都会引发 UnsatisfiedLinkError，尽管 DLL 似乎已加载

> ID：10672136
> 
> 赞同：0
> 
> 时间：2012-05-20T09:03:51.443
> 
> 标签：java, dll, methods, import, jna

我使用 Eclipse Java 32Bit JDK。我正在尝试导入一个 32 位 DLL，但我得到的文档很少。我正在使用`com.sun.jna`. `InitImagerIPC`文档告诉我在没有任何参数的情况下调用该方法。

在这个[例子](http://www.javaworld.com/javaworld/jw-02-2008/jw-02-opensourcejava-jna.html?page=2)中，我创建了一个接口：

```
public interface ImagerIPC extends com.sun.jna.win32.StdCallLibrary{ 
  HRESULT InitImagerIPC ();
} 
```

当我尝试导入 DLL 时，不会发生错误。

```
ImagerIPC lib = (ImagerIPC) Native.loadLibrary ("ImagerIPC", ImagerIPC.class); 
```

`UnsatisfiedLinkError`但如果我输入错误的 DLL 名称，我会收到一条消息。所以我猜它加载正确？

但是当我尝试打电话时

```
lib.InitImagerIPC(); 
```

我得到`UnsatisfiedLinkError`. :( 哪里错了？

顺便说一句：DLL 导出查看器为所需方法提取此信息：

```
_InitImagerIPC@0    0x10001fc0  0x00001fc0  45 (0x2d)   
    ImagerIPC.dll   J:\<my Path>\ImagerIPC.dll  Exported Function 
```

我不确定命名。我还必须添加`_`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:00:04.213

您的 DLL 使用 stdcall 调用约定，该约定通常具有编译器 mangle 函数名称以包含参数的堆栈大小。当您加载库（或重新编译库以使用未修饰的名称）时，您需要使用`StdCallFunctionMapper`传入的选项。`Library.OPTION_FUNCTION_MAPPER`

```
Library.loadLibrary("myLib", myLib.class, new HashMap() { { put(Library.OPTION_FUNCTION_MAPPER, new StdCallFunctionMapper()); } }); 
```

# c# - 使用系统库在用户系统上安装 C# 应用程序

> ID：10672137
> 
> 赞同：0
> 
> 时间：2012-05-20T09:03:56.593
> 
> 标签：c#

我创建了一个 C# 2010 应用程序，现在当我在用户应用程序上安装它时，它要求提供完整的 dot net 框架。如果我只能将所需的 dll 文件放在我的应用程序中，而不是在用户机器上安装完整的 dot net 框架，是否有可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T09:08:48.873

## 不，这是不可能的

.NET 框架不仅仅是要在目标计算机上复制的程序集。它是一个更复杂的基础架构，在加载可执行文件时与操作系统交互，如果它包含 IL 指令，它会*及时*编译它以使其运行。因此，为了让我在没有 .NET 框架设置的情况下使其正常工作，可以在单独的步骤中完成，或者通过为您的应用程序创建一个安装程序，并将正确的框架版本作为先决条件。[可以在此处找到该框架](http://msdn.microsoft.com/en-us/library/zw4w595w%28v=vs.90%29.aspx)的概述，但网络中提供了更多其他框架，您应该阅读它以了解为什么这不仅仅是您需要或不需要的功能的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:22:11.860

您可以选择以 .NET Framework 客户端配置文件为目标。这将减少 .NET 文件的下载大小。有关主题的更多详细信息，请参阅此链接：http: [//msdn.microsoft.com/en-us/library/cc656912.aspx#targeting_the_net_framework_client_profile](http://msdn.microsoft.com/en-us/library/cc656912.aspx#targeting_the_net_framework_client_profile)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T09:23:38.703

**不，这是不可能的。**为了安装和运行面向 .NET Framework 的应用程序，用户必须在他/她的计算机上安装适当版本的 .NET Framework。

如果您想让事情变得更简单，您应该使用安装程序分发您的应用程序，以确保 .NET Framework 与您的应用程序一起自动安装。用户没有理由必须自己下载和安装 .NET Framework。您甚至可以直接从 Visual Studio 创建安装程序，因此没有理由不使用它。它还使管理依赖项和版本控制冲突变得更加容易。

如果您真的担心依赖项的大小并且以 .NET 4.0 为目标，则可以只需要[Client Profile](http://msdn.microsoft.com/en-us/library/cc656912.aspx)，它是为客户端应用程序优化的 .NET Framework 的子集。您必须将项目的属性设置为以 .NET 4.0 客户端配置文件为目标，并确保您没有使用它忽略的任何程序集。

不过，我不建议在这上面浪费太多时间。根据最新统计，客户端配置文件仅比完整版小 15-16% ——这对于当今世界大部分地区的快速互联网连接而言并没有太大的不同。如果您在真实媒体上分发，问题就更小了。

* * *

如果您在交付没有任何依赖关系的应用程序方面完全死心塌地（正如对其他答案的评论所暗示的那样），那么您将面临一条艰难的道路。对于初学者，您需要完全放弃 .NET 和 C#，而改用 C 或 C++ 等非托管语言。这是一个与 C#*非常*不同的编程环境。即使你是世界上最优秀的 C# 程序员，学习 C++ 也将经历一段重要的学习曲线。

这仍然不能解决你所有的问题。使用现代版本的 Visual Studio 编译的 C++ 应用程序仍需要在用户计算机上安装适当版本的 C 运行时库。当然，这是一个比整个 .NET Framework*小得多*的包，但您不能指望它始终存在，因此您需要将它与您的应用程序一起安装。

此外，与 .NET 框架（具有 WinForms、WPF、Silverlight 等）不同，没有与 C++ 捆绑的 GUI 库。如果您选择除本机平台 API 之外的任何 GUI 库*（*例如，Qt，由于我仍然无法解释的原因而非常流行），这会给您带来额外的依赖。您多次提到 Google 的应用程序作为模型。Google Chrome 直接以 Win32 API 为目标，并编写了*一堆*自己的代码来在该基础框架之上绘制自定义 GUI。这确实是您要完全消除依赖关系的唯一方法。*并在很*长一段时间内延迟您的应用程序上市。

# html - 当在 Chrome 和 Firefox 中包含文本时，如何将内联跨度设置为具有相同的高度？

> ID：10672141
> 
> 赞同：0
> 
> 时间：2012-05-20T09:04:39.870
> 
> 标签：html, css, firefox, google-chrome, cross-browser

我有以下风格：

```
 background-color: #C9C5BC;
  color: #FFF;
  font-size: 10px;
  font-weight: bold;
  padding: 0 3px;
  text-transform: uppercase;
  cursor:pointer 
```

HTML 元素是

```
<span class="name-indicator">NameIndicator1</span> 
```

它看起来像 Firefox（需要）

![在此处输入图像描述](../Images/9173f70e5cfc37307f7c8b4605908540.png)

在 Chrome 中它看起来像这样（错误）

![在此处输入图像描述](../Images/bb0fddab4c4a61267bb05c932de47fcb.png)

问题是在 chrome 中 span 元素之间没有空白，这是由于在 FF 中高度为 13px 而在 Chrome 中为 15px，当将 chrome 中的字体大小设置为 7px 时，我达到了正确的效果。

如何在两个浏览器上解决这个问题？我想保持字体大小为 10px

**编辑：**

我创建了一个[小提琴](http://jsfiddle.net/zZJef/)，请看一下 FF 和 Chrome

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:17:41.973

我注意到`codes`stackoverflow 中的答案看起来与您提供的图像（第二张）相似。如果将此 CSS`line-height: 21px`放在容器上`.wmd-preview p`，则代码之间会出现分隔符。所以你的问题可以通过将 line-height 添加到那些`span`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T09:12:42.480

为了有更好的机会在许多浏览器中获得相同的结果`css-reset`，请在页面的开头使用。这段 css 将确保所有元素在所有浏览器中都具有相同的默认值。你可以从[这里](http://meyerweb.com/eric/tools/css/reset/)得到一个。

# extjs - 从 Sencha Picker 中删除工具栏

> ID：10672142
> 
> 赞同：0
> 
> 时间：2012-05-20T09:04:51.847
> 
> 标签：extjs, toolbar, picker

我正在尝试从 Sencha Picker 中删除工具栏（我只需要带有事件“pick”的滚动区域）-但似乎没有任何效果。问题是我们必须复制 Picker 的 sencha docs 代码（带有 slotpicker 代码）并尝试从那里删除它。但是 - 这不起作用并删除了整个插槽区域。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:14:13.720

只需将工具栏设置为不可见

```
toolbar: {
    hidden: true
} 
```

顺便说一句，为什么不只是做

```
doneButton: false,
cancelButton: false,
toolbar: {
    ui: 'light',
    title: 'My Picker!'
} 
```

?

# php - div onclick 不起作用

> ID：10672153
> 
> 赞同：1
> 
> 时间：2012-05-20T09:06:40.300
> 
> 标签：php, html, wordpress

我试图让我的滑块的标题部分链接到我的 wordpress 网站上的相应文章网址。我很确定我在插件代码中找到了我认为需要编辑的部分，但是当我尝试执行以下操作时：

```
<?php 
echo "<div id='" . $sl_caption . "' class='nivo-html-caption'>" . $sl_htmlcaption . onclick="location.href='$url';"</div>"; 
```

?>

我收到“语法错误，意外的 T_STRING，期待 ',' 或 ';” 显示在我的滑块中，而我网站的其余部分无法正常工作。我已经尝试了许多我在这里尝试过的变体，但我似乎找不到一个有效的变体。

如果有帮助，这是原始的整个滑块代码：http: [//pastebin.com/4nKxXkSa](http://pastebin.com/4nKxXkSa)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:10:45.000

**双引号的打开/关闭是错误的**：在 PHP 中，字符串必须用引号或双引号括起来；如果你想把双引号放在双引号括起来的字符串中，你必须用`\`.

例如，您需要在 之前打开引号或双引号`onclick`，因为这是字符串的一部分。

此外，您**`onclick`应该在`<div ...>`tag**内，而不是在`<div>`and之间`</div>`。

最后，您的 PHP 代码看起来有点像这样*（我已经为变量设置了硬编码值，以帮助测试）*：

```
$sl_caption = 'ID';
$sl_htmlcaption = 'HTML';
$url = "URL";

echo "<div id='" 
    . $sl_caption 
    . "' class='nivo-html-caption' onclick=\"location.href='$url'\">"
    . $sl_htmlcaption 
    . "</div>"
; 
```

你会得到以下 HTML 作为输出：

```
<div id='ID' class='nivo-html-caption' onclick="location.href='URL'" >HTML</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:10:27.697

你的报价是问题所在。它应该是：

```
echo "<div id='" . $sl_caption . "' class='nivo-html-caption'>" . $sl_htmlcaption . "onclick=\"location.href='$url';\"</div>"; 
```

您需要双引号在连接运算符 ( ) 之后再次启动字符串`.`，但是您需要使用黑斜线转义此字符串中的双引号，以便 PHP 解释器不会认为该字符串过早结束。

* * *

正如 Pascal 指出的那样，该`onclick`属性实际上应该在声明`div`标签内：

```
echo "<div id='" . $sl_caption . "' class='nivo-html-caption'onclick=\"location.href='$url';\">" . $sl_htmlcaption . </div>"; 
```

* * *

使用**插值**也可以使事情变得更容易。使用双引号分隔字符串时，您可以使用大括号 ( )*插入*`{}`变量值，如下所示：

```
echo "<div id='{$sl_caption}' class='nivo-html-caption'onclick=\"location.href='{$url}';\">{$sl_htmlcaption}</div>"; 
```

这样，您只需打开和关闭字符串一次（在开头和结尾）。

谨防：

*   您不能直接插入函数调用。您可以`"<p>".strlen($x)."</p>"`像以前一样连接或将结果存储在变量中并进行插值；`"<p>{$result}</p>"`.
*   不过，您仍然必须在字符串中转义双引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T09:12:09.553

您的字符串引号未正确放置。试试这个

```
echo "<div id='" . $sl_caption . "' class='nivo-html-caption'>" . $sl_htmlcaption . "onclick=\"location.href='$url';\"</div>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T09:15:21.260

问题是它所说的-“onclick”在您的示例中不是带引号的字符串（`T_STRING`在 PHP 中）。您在字符串中连接（连接）的所有内容都需要是 a）引号中的字符串（单引号或双引号），b）可以转换为字符串的内容或 c）变量/常量/函数调用。

如果您没有该错误，那么您当前的示例也将“onclick”作为标签的内容，而不是标签上的属性。我想你想要的是：

```
<?php 
 echo "<div id='" . $sl_caption . "' class='nivo-html-caption' onclick='location.href=\'"  . $url . "\''>" . $sl_htmlcaption . "</div>";
?> 
```

如果你想要标准的 HTML 属性，那么你通常会使用双引号，这会给你：

```
<?php 
 echo '<div id="' . $sl_caption . '" class="nivo-html-caption" onclick="location.href='  . $url . '">' . $sl_htmlcaption . '</div>';
?> 
```

另外，您是否有任何理由使用 onclick 来设置当前位置而不是正常位置`<a href>`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T09:15:33.100

qoute 不是唯一的问题。onclick 也超出了 div 元素的属性。必须是（更改单打的双打以使其更清晰）：

```
echo '<div id="' . $sl_caption . '" class="nivo-html-caption" onclick="location.href=' . $url . ';">' . $sl_htmlcaption . '</div>'; 
```

# .net - 如何保存我在VS2008中选择的启动项目

> ID：10672156
> 
> 赞同：1
> 
> 时间：2012-05-20T09:07:52.623
> 
> 标签：.net, visual-studio, tfs, projects-and-solutions

我们有一个由 Team System 源代码控制的解决方案。当我们从源代码管理中获取新计算机的所有文件时，VS2008 会随机选择一个项目作为启动项目。

更改启动项目时，将为当前用户保存配置，并且不会更新解决方案本身中的任何内容。

似乎启动项目的选择保存在本地，无法签入到源代码管理。

有没有办法在VS2008中保存解决方案的默认启动项目并将其保存在源代码管理中，以便每个打开解决方案的用户都会自动获得它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:37:26.287

启动项目保存在解决方案目录中的 {SolutionName}.suo 文件中。该文件已隐藏。

不要将此文件置于源代码控制之下，因为它包含许多每个用户/每个会话的晦涩内容。

所以基本上没有办法做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T05:47:31.037

我找到了答案：

在检查并为我的解决方案寻找不同的解决方案后，我发现了这个旧帖子： [LINK](https://stackoverflow.com/questions/1238553/vs2008-where-is-the-startup-project-setting-stored-for-a-solution)

Kirtan 的第一个答案提出了一个可以解决问题的修复方法。他建议在文本编辑器中编辑 .sln 文件，并将我想要的项目作为启动项目作为列表中的第一个项目。

当没有 .suo 文件时，选择列表中的第一个项目作为默认启动项目。

我已经尝试过了，它有效！

现在我可以签入更新的 .sln 文件并确保默认启动项目是正确的。

感谢所有的帮助...

# r - RApache 找不到正确的包路径

> ID：10672157
> 
> 赞同：1
> 
> 时间：2012-05-20T09:08:25.547
> 
> 标签：r, configuration, rapache

我正在尝试在我的 Linux 系统上配置 Apache，但它找不到 R 包的正确路径（因此它找不到`brew`包）。

我安装了 R 包`~/R/libs`，当`.libPaths()`从 R 会话运行时，我得到：

```
[1] "/home/nico/R/libs"    "/usr/lib/R/library"   "/usr/share/R/library" 
```

但是，如果我将 RApache 配置为`RApacheInfo()`使用

```
<Location /RApacheInfo>
SetHandler r-info
</Location> 
```

在 .libPaths RApache 仅报告

```
/usr/lib/R/library
/usr/share/R/library 
```

我如何告诉 RApache 去寻找`~/R/libs`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:22:58.973

根据[RApache 配置文档](http://rapache.net/manual.html#Configuring_rapache)，您可以尝试 直接`REvalOnStartup`设置指令`.libPaths()`。

# java - 从 JFrame 中删除 JPanel

> ID：10672160
> 
> 赞同：0
> 
> 时间：2012-05-20T09:08:41.967
> 
> 标签：java, swing, jframe, jpanel, jbutton

我正在尝试删除 JPanel 而不是隐藏它，但我找不到任何有效的东西。

这是面板中的代码，需要在按下按钮时自行删除：

```
 play.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            Frame frame = new Frame(); //referencing to my JFrame class (this class is a JPanel)
            //need to remove this panel on this line
            frame.ThreeD(); // adds a new panel
        }
    }); 
```

**更新**

这是完整的代码：

```
package ThreeD;

import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.UIManager;

import Run.Frame;

public class Launcher extends JPanel{   
    private JButton play, options, help, mainMenu;
    private Rectangle rplay, roptions, rhelp, rmainMenu;

    private int buttonWidthLocation, buttonWidth, buttonHeight;
    private int width = 1280;

    public Launcher() {
        this.setLayout(null);

        drawButtons();
    }

    private void drawButtons() {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch(Exception e) {
            e.printStackTrace();
        }

        play = new JButton("Play");
        options = new JButton("Options");
        help = new JButton("Help");
        mainMenu = new JButton("Main Menu");

        buttonWidthLocation = (width / 2) - (buttonWidth / 2);
        buttonWidth = 80;
        buttonHeight = 40;

        rplay = new Rectangle(buttonWidthLocation, 150, buttonWidth, buttonHeight);
        roptions = new Rectangle(buttonWidthLocation, 300, buttonWidth, buttonHeight);
        rhelp = new Rectangle(buttonWidthLocation, 450, buttonWidth, buttonHeight);
        rmainMenu = new Rectangle(buttonWidthLocation, 600, buttonWidth, buttonHeight);

        play.setBounds(rplay);
        options.setBounds(roptions);
        help.setBounds(rhelp);
        mainMenu.setBounds(rmainMenu);

        add(play);
        add(options);
        add(help);
        add(mainMenu);

        play.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                Frame frame = new Frame();
                //need to remove this panel here
                frame.ThreeD();
            }
        });
        options.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.out.println("options");
            }
        });
        help.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.out.println("help");
            }
        });
        mainMenu.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.out.println("mainMenu");
            }
        });
    }
} 
```

这是我的框架类：

```
package Run;

import javax.swing.*;

import ThreeD.Display;
import ThreeD.Launcher;
import TowerDefence.Window;

import java.awt.*;
import java.awt.image.BufferedImage;

public class Frame extends JFrame{

    public static String title = "Game";        

    /*public static int GetScreenWorkingWidth() {
        return java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds().width;
    }*/

    /*public static int GetScreenWorkingHeight() {
        return java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds().height;
    }*/

    //public static Dimension size = new Dimension(GetScreenWorkingWidth(), GetScreenWorkingHeight());
    public static Dimension size = new Dimension(1280, 774);

    public static void main(String args[]) {
        Frame frame = new Frame();

        System.out.println("Width of the Frame Size is "+size.width+" pixels");
        System.out.println("Height of the Frame Size is "+size.height+" pixels");
    }

    public Frame() {
        setTitle(title);
        setSize(size);
        setResizable(false);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        ThreeDLauncher();
    }

    public void ThreeDLauncher() {      
        Launcher launcher = new Launcher();
        add(launcher);

        setVisible(true);       
    }

    public void TowerDefence() {
        setLayout(new GridLayout(1, 1, 0, 0));

        Window window = new Window(this);
        add(window);

        setVisible(true);
    }

    public void ThreeD() {
        BufferedImage cursor = new BufferedImage(16, 16, BufferedImage.TYPE_INT_ARGB);
        Cursor blank = Toolkit.getDefaultToolkit().createCustomCursor(cursor, new Point(0, 0), "blank");

        getContentPane().setCursor(blank);

        Display display = new Display();
        add(display);

        setVisible(true);

        display.start();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T09:24:12.980

基本上 - 您正在创建新的 inline 实例`Frame`：

```
Frame frame = new Frame(); //referencing to my JFrame class (this class is a JPanel) 
```

的新实例`Frame`是不可见的，您正在尝试`Launcher`从不可见的 new中删除您的实例`Frame`。但这是错误的 - 您应该`Launcher`从`Frame`之前在`main`函数中创建的内容中删除（即：`Launcher`组件的父级）。

这是一个例子：

```
public class TestFrame extends JFrame {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                TestFrame frame = new TestFrame();
                frame.getContentPane().add(new MyPanel(frame));
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
            }
        });

    }
} 
```

和`MyPanel`类：

```
public class MyPanel extends JPanel {
    public MyPanel(final TestFrame frame) {
        JButton b = new JButton("Play");
        add(b);
        b.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                Container pane = frame.getContentPane();
                pane.remove(MyPanel.this);
                JPanel otherPanel = new JPanel();
                otherPanel.add(new JLabel("OtherPanel"));
                pane.add(otherPanel);
                pane.revalidate();
            }
        });
    }
} 
```

在您的示例中，您应该`Frame`在`Launcher`构造函数中添加对的引用：

```
public Launcher(Frame frame) {
    this.frame = frame;
    ... 
```

初始化`Launcher`：

```
public void ThreeDLauncher() {     
    Launcher launcher = new Launcher(this); 
```

并使用：

```
 play.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            //need to remove this panel here
            frame.getContentPane().remove(Launcher.this);
            frame.ThreeD();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T09:27:02.870

假设您的面板是`myPanel`您可以通过以下方式将其从主框架中删除：

```
frame.getContentPane().remove(myPanel); 
```

# windows - 有没有办法从命令行处理锁定的文件并释放它？

> ID：10672166
> 
> 赞同：13
> 
> 时间：2012-05-20T09:09:40.870
> 
> 标签：windows, command-line, locked-files

有没有办法检测指定文件夹中的锁定文件并通过命令行释放它们？

类似这样的伪代码：

```
for file in folder do
unlock file 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-20T10:05:12.040

是的，这可以使用Mark Russinovich 的名为**Handle的免费实用程序来实现。**

它可以[从 Microsoft](http://technet.microsoft.com/en-us/sysinternals/bb896655)下载。

这从命令行运行，并会告诉您哪个程序打开了特定的文件或目录，具体取决于它是否具有该资源的打开*句柄*。

通过`handle.exe`使用`-c`标志运行，您还可以强制关闭指定的句柄，这将解锁资源。但公平的警告：这可能会导致使用资源的应用程序崩溃，甚至可能导致整个系统变得不稳定。所以我不会养成这样做的习惯；仅将它用于特殊情况，例如您预计会出现一些不稳定性的调试。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-05-20T09:15:06.847

不，您不能必须先关闭持有锁的应用程序。[Unlocker](http://en.wikipedia.org/wiki/Unlocker)可以帮助您找到锁的来源 - 如果它是一个崩溃的应用程序，那么您将能够终止它的进程。

# php - 获取经过身份验证的用户的 Spotify 播放列表

> ID：10672169
> 
> 赞同：1
> 
> 时间：2012-05-20T09:09:57.670
> 
> 标签：php, web, spotify

我想获取用户播放列表和收件箱。在 spotify 上经过身份验证的我的应用程序。就像我们从 facebook api 获取数据一样。

谢谢

编辑：我发现只尝试过[https://developer.spotify.com/technologies/web-api/](https://developer.spotify.com/technologies/web-api/)但这仅提供曲目、专辑等的查找和搜索，而不是特定用户的播放列表，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:59:03.227

出于隐私原因，Spotify Apps API 不提供对用户播放列表的直接访问。

但是，如果您允许用户将播放列表拖放到您的应用程序中，您就可以通过这种方式获取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-24T10:33:00.977

可以通过 spotify API 访问播放列表

[https://developer.spotify.com/web-api/console/playlists/](https://developer.spotify.com/web-api/console/playlists/)

但是，您需要用户授权才能访问私人播放列表。

# git - Github：推送额外的提交以拉取请求

> ID：10672172
> 
> 赞同：11
> 
> 时间：2012-05-20T09:10:09.540
> 
> 标签：git, command-line, github, pull-request

我提出了一个拉取请求，但现在我需要向这个拉取请求推送一个额外的提交。Github 说：

> 您可以通过推送到 myaccount/repo 上的 x4e925e4 分支向此拉取请求添加更多提交。

如何通过命令行实现这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T09:25:17.273

```
git push origin master:x4e925e4 
```

如果你想从另一个分支推送，只需更改“master”位。

拉取请求完成后，如果此分支未自动删除，您可以使用以下命令将其删除：

```
git push origin :x4e925e4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T13:47:28.980

嗯。我对此的看法是

```
git checkout x4e925e4
// add commits
git push origin x4e925e4 
```

我对最佳实践的看法：您应该专门为每个拉取请求创建一个主题分支，并使用合理的名称。有些人更喜欢你用你的 github 用户 ID 命名它。这样他们就可以在本地自由地检查它以进行尝试，而不必担心分支名称冲突。

所以我通常将我的拉取请求分支命名为

```
claybridges-do-the-things 
```

# android - Android：开发者控制台 - Google Play

> ID：10672174
> 
> 赞同：-6
> 
> 时间：2012-05-20T09:10:16.200
> 
> 标签：android

我的 DEMO 应用程序有问题，它是免费的。我在美国市场看不到我的应用程序 - 我认为只能从美国市场看到。请检查。只有完整的应用程序 TrainBrain，但没有免费的应用程序。有谁知道，问题出在哪里？以及如何查看其他国家/地区的可用性？

这是来自开发者控制台的图片，美国标签在哪里交叉。 [图片](http://dl.dropbox.com/u/55504275/1.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T09:19:47.400

[http://support.google.com/googleplay/android-developer/bin/request.py?contact_type=publishing](http://support.google.com/googleplay/android-developer/bin/request.py?contact_type=publishing)

使用此链接并将票证提交给谷歌。

Google 会尽快给您适当的回复，并帮助您解决问题。

# php - LOAD DATA LOCAL INFILE 不能跳过列？

> ID：10672177
> 
> 赞同：0
> 
> 时间：2012-05-20T09:11:11.020
> 
> 标签：php, mysql

我已经搜索了几个小时，但它不起作用。

我有一个 csv 总统文件。第一行是标题。

```
Presidency ,President ,Wikipedia Entry,Took office ,Left office ,Party ,Portrait,Thumbnail,Home State 
```

我想创建一个只有`Presidency`,`President`和的关系`Party`。

```
$sqlquerycreate1 = "CREATE TABLE IF NOT EXISTS `sample1` (
  `Presidency`  VARCHAR(30),
  `President` VARCHAR(30),
  `Party` VARCHAR(30)
)";
mysql_query($sqlquerycreate1);

# download the file off the internet
$file = file_get_contents("http://localhost/sample.csv");
$filepath = "sample.csv";
file_put_contents($filepath, $file);

# load the data into nycgrid table
$pt11 = "LOAD DATA LOCAL INFILE ";
$pt21 = "'C:/xampp/htdocs/test/file/sample.csv' INTO TABLE sample1(Presidency,President,@Wikipedia Entry,@Took office ,@Left office ,Party,@Portrait,@Thumbnail,@Home State) ";
$pt31 = "FIELDS TERMINATED BY ',' ENCLOSED BY '\"' ";
$pt41 = "LINES TERMINATED BY '\r\n' ";
$pt51 = "IGNORE 1 LINES";
$sqlquerynew1 = $pt11.$pt21.$pt31.$pt41.$pt51;
mysql_query($sqlquerynew1); 
```

它不起作用。表已创建，但未加载数据。知道为什么吗？谢谢。

* * *

```
mysql> LOAD DATA LOCAL INFILE 'C:/xampp/htdocs/sample.csv' INTO TABLE sample1(Pr
esidency, President, @x, @x, @x, Party, @x, @x, @x) FIELDS TERMINATED BY ',' ENC
LOSED BY '\"' LINES TERMINATED BY '\n' IGNORE 1 LINES;

ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near 'FIELD
S TERMINATED BY ',' ENCLOSED BY '\"' LINES TERMINATED BY '\n' IGNORE 1 LINE' at
line 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T09:29:16.397

您的`LOAD DATA`语句中有语法错误。尤其是：

1.  如[手册](http://dev.mysql.com/doc/en/user-variables.html)所述：

    > 用户变量写为`@var_name`，其中变量名称***`var_name`***由字母数字字符、“<code>.”、“<code>_”和“<code>$”组成。如果您将用户变量名称作为字符串或标识符引用（例如，、、或），则用户变量名称可以`@'my-var'`包含`@"my-var"`其他`@`my-var``字符

    因此，您的名为`@Wikipedia Entry`,和的变量在语法上都是不正确的。您必须删除空格或引用变量名。`@Took office``@Left office``@Home state`

    但是，除非您打算在别处引用它们，否则您不需要使用不同的变量名称。如[手册](http://dev.mysql.com/doc/en/load-data.html)所述：

    > 您还可以通过将输入值分配给用户变量而不将变量分配给表列来丢弃输入值：
    > 
    > ```
    > LOAD DATA INFILE 'file.txt'
    >   INTO TABLE t1
    >   (column1, @dummy, column2, @dummy, column3); 
    > ```

2.  ,`FIELDS`和子句都应该`LINES`在*列*列表之前。如[手册](http://dev.mysql.com/doc/en/load-data.html)中所述，语法为：`IGNORE`

     *> ```
    > LOAD DATA [LOW_PRIORITY | CONCURRENT] [LOCAL] INFILE '***file_name***'
    >     [REPLACE | IGNORE]
    >     INTO TABLE ***tbl_name***
    >     [CHARACTER SET ***charset_name***]
    >     [{FIELDS | COLUMNS}
    >         [TERMINATED BY '***string***']
    >         [[OPTIONALLY] ENCLOSED BY '***char***']
    >         [ESCAPED BY '***char***']
    >     ]
    >     [LINES
    >         [STARTING BY '***string***']
    >         [TERMINATED BY '***string***']
    >     ]
    >     [IGNORE ***number*** LINES]
    >     [(***col_name_or_user_var***,...)]
    >     [SET col_name = ***expr***,...]
    > ```* 

 *因此，您可以简单地执行以下操作：

```
LOAD DATA LOCAL INFILE 'C:/xampp/htdocs/test/file/sample.csv'
    INTO TABLE sample1
    FIELDS
        TERMINATED BY ','
        ENCLOSED BY '\"'
    LINES
        TERMINATED BY '\r\n'
    IGNORE 1 LINES
    (Presidency, President, @x, @x, @x, Party, @x, @x, @x) 
```*

# oracle - 如何检查表中是否存在包含给定单词的记录

> ID：10672178
> 
> 赞同：0
> 
> 时间：2012-05-20T09:11:21.200
> 
> 标签：oracle, plsql

我正在使用 PL/SQL，我想检查表中是否存在记录，我尝试使用 when exists 或 if not exists，但最终出现异常。

```
Select name from nameTable where name = nameFromArgument; 
```

当程序启动时，我输入了一个错误的名称，它不在数据库中我得到一个错误，甚至无法处理它

我试过这样的事情：

[PL/SQL 检查查询是否返回空](https://stackoverflow.com/questions/5955025/pl-sql-check-if-query-returns-empty)

编辑：

对不起，我之前放的选择只是一个例子，整个代码[对不起变量名...]在这里：

```
CREATE OR REPLACE
PROCEDURE SELLSTOCKS
( IloscAkcji IN NUMBER
, NazwaAkcji IN VARCHAR2
, IdRachunkuMaklerskiego IN NUMBER
)  AS
Bledna_ilosc EXCEPTION;
Bledna_nazwa EXCEPTION;
amount NUMBER;
stocksCash number;
idRachunku number;
stocksOnDealerSide number;
temp number;
tempus akcje_uzytkownika.nazwa % type;
BEGIN

--Select nazwa into tempus from akcje_uzytkownika where nazwa = nazwaakcji;
--dbms_output.put_line(tempus);

  dbms_output.put_line('pre');
 select nazwa into tempus from akcje_uzytkownika where nazwa = nazwaakcji;
 dbms_output.put_line('pre2');
 if tempus!=null then
    if ( iloscakcji> amount) THEN
  raise Bledna_ilosc;
  else
  select ilosc, cena_sztuki into amount, stockscash from akcje_uzytkownika where nazwa= NazwaAkcji and id_rachunku_maklerskiego= IdRachunkuMaklerskiego;
 dbms_output.put_line(amount);
 dbms_output.put_line(stockscash);
  amount :=amount - iloscakcji;
  dbms_output.put_line(amount);
  update akcje_uzytkownika set ilosc= amount  where nazwa=NazwaAkcji and  id_rachunku_maklerskiego= idrachunkumaklerskiego;
  stockscash:= iloscAkcji * stocksCash;
  dbms_output.put_line(stockscash);
  select id_rachunku into idrachunku from rachunek_maklerski where id_rachunku_maklerskiego= idrachunkumaklerskiego; 
  temp:=SALDOUPDATE(stockscash, idrachunku);
  select ilosc into stocksOnDealerSide from akcje where nazwa = nazwaAkcji;
  stocksOnDealerSide := stocksondealerside+ iloscakcji;
  dbms_output.put_line(stocksOnDealerSide);
  update akcje set ilosc = stocksondealerside where nazwa = nazwaAkcji;
  end if;
  else
  dbms_output.put_line('post');
  end if;
EXCEPTION

  when Bledna_ilosc then
  dbms_output.put_line('Bledna ilosc');
  when Bledna_nazwa then
  dbms_output.put_line('Bledna nazwa');

END SELLSTOCKS; 
```

我正在使用 oracle sql developer 1.5.5

```
BEGIN

--Select nazwa into tempus from akcje_uzytkownika where nazwa = nazwaakcji;
--dbms_output.put_line(tempus);

  dbms_output.put_line('pre');
  select nazwa into tempus from akcje_uzytkownika where nazwa = nazwaakcji;
  dbms_output.put_line('pre2');
  exception when no_data_found then
  raise no_data_found;

-- is this the right place?

  select ilosc, cena_sztuki into amount, stockscash from akcje_uzytkownika where nazwa= NazwaAkcji and id_rachunku_maklerskiego= IdRachunkuMaklerskiego;
  dbms_output.put_line(amount);
  dbms_output.put_line(stockscash);
  amount :=amount - iloscakcji;
  dbms_output.put_line(amount);
  if ( iloscakcji> amount) THEN
  raise Bledna_ilosc;
  else
  update akcje_uzytkownika set ilosc= amount  where nazwa=NazwaAkcji and  id_rachunku_maklerskiego= idrachunkumaklerskiego;
  stockscash:= iloscAkcji * stocksCash;
  dbms_output.put_line(stockscash);
  select id_rachunku into idrachunku from rachunek_maklerski where id_rachunku_maklerskiego= idrachunkumaklerskiego; 
  temp:=SALDOUPDATE(stockscash, idrachunku); 
```

...........

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T10:31:33.183

你有四个主要的错误（我可以看到）。

首先，`tempus!=null`永远*不会*工作。由于 null 是缺少信息，因此您在检查 null 时不能使用（不）等式运算符。不存在！=不存在。正确的语法是使用[`is null`](http://www.techonthenet.com/oracle/isnull.php), 或在你的情况下`tempus is not null`.

其次，`if ( iloscakcji> amount) THEN`由于您没有初始化 value ，因此永远不会评估为 true `amount`。一个数字不能大于，`null`因为它不存在。您必须初始化变量`amount`。也许您的意思是下一个选择语句在此之上？

第三，您的所有`select ... into ...`语句都包含在单个变量中 - 而不是用户定义的表类型。这意味着如果您的查询返回 0 行，`no_data_found`则会引发异常。如果返回*多于*一行，`too_many_rows`则会引发异常。

如果您只期望最多一排，那么您无需过多担心`too_many_rows`. 如果可能的话，这应该由你的表上的唯一约束来强制执行。例如，我希望这`nazwa`应该是唯一的`akcje_uzytkownika`。

`no_data_found`略有不同，我希望，你的意思是`tempus != null`. 假设`amount`已初始化为一个值，则可以将其重写为：

```
begin

    -- do some stuff    
    begin

       select nazwa into tempus from akcje_uzytkownika where nazwa = nazwaakcji;

    -- If there-s no data catch the exception.
    exception when no_data_found then
       if ( iloscakcji > amount) then
          raise Bledna_ilosc;
       end if;

    end;        
    -- do some more stuff

end; 
```

最后，这并不是一个真正的错误，但是您的代码相当不可读。我会考虑使用更多的空格，以便您可以看到发生了什么。

PS 通过 Oracle 版本，我的意思是 11gr2 或 10g 等，但在这种情况下没有任何区别。

# php - 自动更改记录

> ID：10672179
> 
> 赞同：0
> 
> 时间：2012-05-20T09:11:21.390
> 
> 标签：php, mysql

在我正在开发的网站上，我正在为禁止和取消禁止用户制作一个系统。

在我的数据库中，我有一个表“禁止”，其中包含有关禁止的字段（用户 ID、活动、创建日期、原因 ecc）。

我想做的是：

为过期日期添加另一个字段，当此日期出现时，将字段“活动”自动更改为 0。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T09:19:20.783

我不会像您那样使用两个字段——因为我不想在`active`达到取消禁令日期时依赖一项任务来更改该字段。

相反，我只会使用一个名为 like 的日期时间字段`banned_until`；该字段将：

*   当`NULL`用户未被禁止时，
*   或者包含用户被禁止的日期。

然后，当用户尝试做某事*（登录、发布、...）*时，我会检查：

*   此字段是`NULL`，在这种情况下用户不会被禁止
*   或者该字段中包含的日期是过去的日期，在该日期用户已被禁止，但不再是。

在第二种情况下，您甚至可以将该字段重置为`NULL`，因为已达到取消禁止日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T09:27:50.517

它要么使用 cron 脚本，要么在获得被禁止的用户时，应用 where 子句来检查禁令是否已过期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T11:03:46.273

您可以比较`expiry_date`value`current_date`以检查用户在登录时是否处于活动状态。

```
SELECT 
 ( DATE_FORMAT( expiry_date_field, '%Y-%m-%d' )
   < 
   DATE_FORMAT( CURRENT_DATE, '%Y-%m-%d' )
 ) AS isActive
FROM
 banned 
WHERE
 user_id=?; 
```

`0`返回的代表*非**活动*状态和`1`活动。

 *但是不管用户是否登录，如果你想保持用户的活动状态，你可以[***使用 Event Scheduler***](http://dev.mysql.com/doc/refman/5.1/en/events.html)来实现。

以下示例为您提供了实施一个想法。

```
drop event if exists event_user_bans_scheduling;
delimiter //

create event if not exists event_user_bans_scheduling
--  on schedule every 86400 second starts 00:00:00
--  at timestamp( adddate( current_date, 1 ),'00:00:00' )
  on schedule every 1 day starts timestamp( current_date + 1, '00:00:01' )

  comment 'Scheduler to update active status of users'
  do
    UPDATE my_app_db.banned
      SET ACTIVE=0
      WHERE
        date_format( expiry_date_field,'%Y-%m-%d' ) = date_format( CURRENT_DATE, '%Y-%m-%d' );
;
//
delimiter ; 
```

***注意***：
全局`event_scheduler`系统变量确定事件调度程序是否在服务器上启用和运行。[*`Event Scheduler Configuration`*](http://dev.mysql.com/doc/refman/5.1/en/events-configuration.html)在处理 MySQL 事件之前阅读完整的注释

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T09:22:38.420

创建一个 php 脚本来检查时间是否超过了到期日期。SQL 将是这样的：

```
UPDATE banned SET active=0 WHERE expire_date<=NOW() 
```

将其保存为示例`task.php`

然后创建一个cron任务`crontab -e`

```
*/10 * * * * php /path/to/your/taks/task.php 
```

这将导致该脚本每 10 分钟执行一次，并取消禁止所有被禁止的 ppl。

--

还有其他方法，也许是更好的方法，例如 Pascal 描述的，但这个答案是为了你的想法。*

# javascript - jquery可拖动和可调整大小不适用于克隆的div

> ID：10672180
> 
> 赞同：0
> 
> 时间：2012-05-20T09:11:29.353
> 
> 标签：javascript, jquery, jquery-ui

我有一个`div`具有可拖动和可调整大小的`jQuery UI`. 我克隆`div`并将其附加到同一个父级：

```
<div class="drag resize"> ... </div>

$(".drag").live("mouseenter", function() { $(this).draggable(); });
$(".resize").live("mouseenter", function() { $(this).resizable(); });

$("div").clone(true).appendTo($("div").parent()); 
```

克隆创建成功，但是当我试图拖动它时，原来的那个会拖动。调整大小也不起作用。谁能解释一下这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:44:42.193

我会改用`.on`事件处理程序并将其附加到此 div 的父级。

```
$(".drag").parent().on("mouseenter", ".drag", function() { $(this).draggable(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:39:07.973

你可能想看看这个 SO post [jQuery UI resizable cloned element(.clone(true)) doesn't resize](https://stackoverflow.com/questions/3829270/jquery-ui-resizable-cloned-element-clonetrue-doesnt-resize) - 在克隆元素上应用 resizable() 之前移除调整大小的处理程序对我有用

# javascript - jquery image load() 并在 IE 中设置超时冲突

> ID：10672181
> 
> 赞同：1
> 
> 时间：2012-05-20T09:11:31.413
> 
> 标签：javascript, jquery, html, internet-explorer, animation

当我将鼠标悬停在一个小 img 上时，我读取了它的较大图像属性，并创建了要显示的图像。

问题是我想在显示图像之前设置超时。

在等待超时的同时，我们假设已经设置了一个 src 以使其提前加载。

由于某种原因，它永远不会在 IE 中运行。即，即使在我第二次悬停小图像时，它也只会触发加载。我不知道它出了什么问题，我在另一个页面上有非常相似的动画，它在超时的情况下工作得很好。

有任何想法吗？..

```
$(document).ready(function(){

var nn_pp_trail=0;
    $('div.nn_pp_in').hover(function(){
        var limg=$(this).children('img').attr('limg');
        var img=new Image();
            //img.src=limg;
            img.className='nn_pp_z';
            img.src=limg;

        var a=(function(img,par,limg){
            return function(){
                nn_pp_trail=window.setTimeout(showtrail,50);
                $(img).one('load',(function(par){   //.attr('src',limg).
                    return function(){
                        // alert('loaded');
                    window.clearTimeout(nn_pp_trail);
                    hidetrail(); 
                    var width=this.width;
                    var height=this.height;
                    var coef=width/313;
                    var newHeight=height/coef;
                    var newHpeak=newHeight*1.7;
                    var nn=par.parents('.tata_psychopata').nextAll('.nn_wrap').first();
                    var pheight=nn.height();
                    var ptop=nn.position().top-2+pheight/2-1;
                    var pleft=nn.position().left+90+157-1;
                    $(this).appendTo(nn).css('left',pleft+'px').css('top',ptop+'px')
                        .animate({opacity:0.6},0)
                        .animate({opacity:1,top:'-='+newHpeak/2+'px',height:'+='+(newHpeak)+'px',left:'-=10px',width:'+=20px'},130,(function(newHeight,newHpeak){
                            return function(){
                            $(this).animate({left:'-='+(156-10)+'px',width:'+='+(313-20)+'px',height:newHeight+'px',top:'+='+(newHpeak-newHeight)/2+'px'},200,function(){});
                            }
                            })(newHeight,newHpeak)
                        );
                }
                })(par)
                ).each(function(){
                        if(this.complete || this.readyState == 4 || this.readyState == "complete" || (jQuery.browser.msie && parseInt(jQuery.browser.version) <=6)) 
                        $(this).trigger("load");}); ;
            }
        })(img,$(this),limg);   
        window.setTimeout(a,20);    //if I set 0 - it loads all the time. 
                                    //if I set more than 0 timeout
                                    //the load triggers only on the 2nd time I hover.

        $(this).data('img',$(img));

    },function(){

    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T12:44:41.177

Thank you, this helped me a lot. I had a similar situation.

As you said: First the "load"-event, then the "src" for IE.

* * *

```
// This was not working in IE (all other Browsers yes)
var image = new Image();
image.src = "/img/mypic.jpg";

$(image).load(function() {
    //pic is loaded: now display it
}); 
```

* * *

```
// This was working well also in IE
var image = new Image();
imagSrc = "/img/mypic.jpg";

$(image).load(function() {
    //pic is loaded: now resize and display
}).attr('src',imageSrc); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:43:09.450

```
 img.src=limg; 
```

这就是问题所在，在 IE 中我们不需要在创建图像对象时设置 src，而是首先将加载事件附加到它，然后才设置 attr src，然后使用 each 触发完成，例如：

```
img.one(load, function(){}).attr('src','i.png').each(function(){ /*loaded? then it's complete*/ }); 
```

希望有人能从我的错误中吸取教训:-)

# matlab - 在matlab中实现IMFILTER

> ID：10672184
> 
> 赞同：7
> 
> 时间：2012-05-20T09:11:38.700
> 
> 标签：matlab

我正在尝试过滤图像而不使用`imfilter`. 我应该得到相同的结果，`imfilter`但我不断得到不同的结果。有人能告诉我哪里出错了吗？

```
orignal=imread('obj6__17.png');
filter=1/9*[-1 -1 -1 ; -1 17 -1 ; -1 -1 -1];
s=size(orignal);
r=zeros(s(1));
temp = zeros(3);

for i= 2: s(1)-1
for j = 2: s(2)-1

    for n= 1: 3
        for m= 1:3
            temp(n,m)=orignal(i+2-n,j+2-m)*filter(n,m);
        end
    end
    r(i,j)=sum(single(sum(temp)));
end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T12:08:32.483

的大小`r`应该与我认为的原始大小相同。而且我不明白您为什么使用`single`. 无论如何，我认为您想要执行以下操作：

```
%# Let's first create a small test image from the built-in peppers image
original = im2double(imread('peppers.png'));
original = original(1:5,1:8,1);

filter = 1/9 * [-1 -1 -1 ; -1 17 -1 ; -1 -1 -1];
s = size(original);
r = zeros(s);

for i = 2:s(1)-1
    for j = 2:s(2)-1
        temp = original(i-1:i+1,j-1:j+1) .* filter;
        r(i,j) = sum(temp(:));
    end
end 
```

结果如下：

```
r =

         0         0         0         0         0         0         0         0
         0    0.2336    0.2157    0.2514    0.2436    0.2257    0.2344         0
         0    0.2453    0.2444    0.2671    0.2693    0.2418    0.2240         0
         0    0.2741    0.2728    0.2397    0.2505    0.2375    0.2436         0
         0         0         0         0         0         0         0         0 
```

与`imfilter`，它是：

```
r2 = imfilter(original, filter)

r2 =

    0.3778    0.3325    0.3307    0.3442    0.3516    0.3312    0.3163    0.3856
    0.3298    0.2336    0.2157    0.2514    0.2436    0.2257    0.2344    0.3386
    0.3434    0.2453    0.2444    0.2671    0.2693    0.2418    0.2240    0.3512
    0.3272    0.2741    0.2728    0.2397    0.2505    0.2375    0.2436    0.3643
    0.3830    0.3181    0.3329    0.3403    0.3508    0.3272    0.3412    0.4035 
```

如您所见，除了边界上的结果之外，结果是相同的。有一些策略可以计算边界上的那些，例如将图像镜像到边界外，保持它们相同等。请阅读文档[`imfilter`](http://www.mathworks.com/help/toolbox/images/ref/imfilter.html)并选择一种策略。

请注意，我没有`filter`在这里翻转，因为过滤器在两个方向上都是对称的。我建议你避免循环！您的代码中有深度为 4 的嵌套循环！

最后，您可以使用 2-D 卷积来执行以下操作`imfilter`：

```
r3 = conv2(original, filter, 'same');

r3 =

    0.3778    0.3325    0.3307    0.3442    0.3516    0.3312    0.3163    0.3856
    0.3298    0.2336    0.2157    0.2514    0.2436    0.2257    0.2344    0.3386
    0.3434    0.2453    0.2444    0.2671    0.2693    0.2418    0.2240    0.3512
    0.3272    0.2741    0.2728    0.2397    0.2505    0.2375    0.2436    0.3643
    0.3830    0.3181    0.3329    0.3403    0.3508    0.3272    0.3412    0.4035 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T14:13:23.833

这是修改代码并给出与 imfilter 完全相同的结果...。

```
%# Let's first create a small test image from the built-in peppers image
original = im2double(imread('peppers.png'));
original = original(1:5,1:8,1);

filter = 1/9 * [-1 -1 -1 ; -1 17 -1 ; -1 -1 -1];
s = size(original);
r = zeros(s);
original=padarray(original,[1,1]);
for i = 2:s(1)
for j = 2:s(2)
    temp = original(i-1:i+1,j-1:j+1) .* filter;
    r(i-1,j-1) = sum(temp(:));
end
end 
```

这给出了与函数完全相同的结果矩阵......

# javascript - 如何在 jquery 中获取文本值？

> ID：10672187
> 
> 赞同：1
> 
> 时间：2012-05-20T09:12:05.703
> 
> 标签：javascript, jquery

我有三个元素，它们在屏幕上滑动，我想获取当前显示在屏幕上的元素的文本，我尝试了 .text() 函数，但这会返回所有 s 元素的文本，有没有使用javascript或jquery的方式来做到这一点。

```
<div id="text">
<span style=" font-size:100px;text-align:center;">koko</span>
<span style=" font-size:100px;text-align:center;">abc</span>
<span style=" font-size:100px;text-align:center;">efh</span>
</div>

$(document).ready(function(){  

$('#text').mouseover(function(){
var txt = $('#text span').text();
alert(txt);

});
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T09:13:54.033

[**演示**](http://jsfiddle.net/QbDgd/3/) **或** [**其他在这里**](http://jsfiddle.net/QbDgd/4/)

代码

```
$('#text > span').mouseover(function(){
    var txt = $(this).text();
    alert(txt);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:44:27.613

由于您使用的是循环插件，因此活动幻灯片被赋予类“activeSlide”。您可以通过执行类似的操作来获取活动幻灯片的文本。`$('.activeSlide').text();` 您还可以在初始化循环插件时在选项中设置回调。您可以在此处查看可以使用循环设置的选项：http: [//jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

如果您想在每次幻灯片更改时执行某些操作，您将能够使用“之后”事件回调。

```
$(document).ready(function () {
    $('#text').cycle({
        after: function (currSlideElement, nextSlideElement, options, forwardFlag) {
                alert($(nextSlideElement).text());
        }
    });
}); 
```

# html - 如何在网页上显示存储在表格中的代码？

> ID：10672191
> 
> 赞同：-4
> 
> 时间：2012-05-20T09:12:17.233
> 
> 标签：html, syntax-highlighting

我正在用asp.net c#做一个基于在线考试的小学术项目，所以必须将问题和答案的数量显示为多项选择，并且我使用数据列表视图在页面上显示问题和答案。但问题是编程代码像普通文本一样显示。

我的要求是按**行**显示程序代码，并使用**彩色关键字和数据类型等**。

我正在使用标签工具来显示存储在 VARCHAR(MAX) 数据类型的 SQL 表中的问题和程序。如果程序需要存储在像 XML 或任何其他文件这样的单独文件中，请给我一些想法如何做到这一点？

我的页面看起来像： ![有问题的标签我想逐行显示代码语句。 我该怎么做呢？](../Images/c8470b4155c21d525f258b551f842276.png)

我需要将问题标签显示为： ![在此处输入图像描述](../Images/2f75b459a89c20a8c260d755dee6e4f0.png)

任何帮助，将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T09:34:01.293

使用[SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/)，也很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:36:13.177

如果我理解正确，您是在问如何在网页上显示一些 Java 代码行，以便

*   它看起来像正确缩进的 Java 代码，并且不会出现在一行长行中
*   它有语法着色。

第一部分很容易使用`<pre>`HTML 标记完成：

```
<pre>
some lines of Java code
</pre> 
```

`pre`HTML 标记用于保留换行符和空格。

对于语法着色，请考虑使用一些 JavaScript 库，例如[SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/)。

# javascript - jquery表单插件：如何正确处理从服务器发回的重定向请求

> ID：10672200
> 
> 赞同：1
> 
> 时间：2012-05-20T09:13:54.900
> 
> 标签：javascript, jquery, html

我正在使用`jquery ajax plugin`提交表单。

```
$('#profile-form').ajaxForm({
            success:function(response, statusText, xhr, $form){
                console.log(statusText,response,xhr);
            },
            beforeSubmit : function(formData, jqForm, options){
                if ($('#permissions').data("permissionsModified") == true){
                    formData.push({name : 'selectedPermissions', value : JSON.stringify($('#permissions').data('selected'))});
                }
            }
        }); 
```

服务器发回重定向请求，并且在 firebug 控制台上显示以下内容：

> 302 临时搬家

在表单的操作 url 前面。紧接着，重定向 URL 会显示出来，并且**from 中的“请求进行中”符号一直在旋转**。在ajaxform的**成功****回调**中， statusText为“成功”，响应文本为整个新的重定向页面。如何检查服务器是否已重定向请求（然后，如何在浏览器上显示重定向页面）或服务器是否有 json 响应

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T23:48:49.830

如果我没记错的话，浏览器应该默默地（透明地）遵循通过 AJAX 请求发出的任何重定向。

经过一番挖掘，看来我是正确的，见第 2 点：[http ://www.w3.org/TR/XMLHttpRequest/#same-origin-request-event-rules](http://www.w3.org/TR/XMLHttpRequest/#same-origin-request-event-rules)

我能想到的唯一解决方案是自定义状态码，但这有点把范式延伸了一点。不幸的是，没有什么可以做的。**

# jquery - 如何将事件对象从函数传递到 AJAX 调用并在其成功处理程序中使用它？

> ID：10672202
> 
> 赞同：0
> 
> 时间：2012-05-20T09:14:52.223
> 
> 标签：jquery, ajax, events, jquery-mobile, coldfusion

我有一个多语言的 Jquery 移动网站（后端是 Coldfusion8/MySQL）。

我正在使用通用 Ajax-form-poster 将数据“传递”到服务器，我在整个脚本中调用该服务器，并传递相应的 AJAX 参数，如下所示：

我的**Ajax 调用者**之一：

```
$(document).on( "pagebeforechange.lang", function( e, data ) {
    if (typeof data.toPage === "string") {
        if (data.toPage.indexOf("?sprachwechsel=") > -1) {
            // stop
            e.preventDefault();
            // get the language from clicked link
            var viewSwitch  = $.mobile.path.parseUrl( data.toPage ).hash.replace( /.*sprachwechsel=/, "" ),
               service = "services/form_service_user.cfc",
               method = "process",
               returnformat = "JSON",
               targetUrl = "",
               // fake a form
               formdata = "form_submitted=lang&viewSwitch="+viewSwitch+"&method="+method+"&returnformat="+returnformat,
               // create the success handler
               successHandler = function(e, data) {
                   data.options.reloadPage = true;    
                   data.options.allowSamePageTransition = true;
                   data.options.transition = "fade";
                   // reload page with new language
                   $.mobile.changePage( window.location.href, data.options);    
                   };
            // hand over to Ajax
            ajaxFormSubmit( form, service, formdata, targetUrl, successHandler );
            }
         } 
    });
}; 
```

所有调用者都转到一个中央**AJAX 表单提交**，如下所示：

```
var ajaxFormSubmit = function ( form, service, formdata, targetUrl, successHandler ){
    $.ajax({
        async: false,
        type: "post",
        url: service,
        data: formdata,
        dataType: "json",
        success: function( objResponse ){
            if (objResponse.SUCCESS){
                alert("success");
                successHandler;
            } else { }
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) { 
        }
    });
} 
```

我不是一直提交表单，而是尝试使用这种方式来更新会话设置，例如要显示的语言。

**我的问题：**
如果我在 pagebeforechange 事件上捕获 Jquery Mobile changePage，然后 preventDefault，执行 AJAX 调用并希望使用原始事件和数据对象从成功处理程序触发新的 changePage 转换......**我如何通过他们通过到成功处理程序**？

附带问题：这种方法可行还是应该以更简单的方式完成？我需要相当多地重置视图和语言，并且我想保持应用程序运行并且不必一直硬重新加载页面，只是为了将单个冷融合变量从“EN”设置为“DE”。

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:07:24.883

除非我误解了您的问题，否则您的成功处理程序已经可以访问`data`对象和`e`事件对象，因为它已“封闭”到该函数中。唯一的问题是将它们作为预期参数添加到成功处理函数中。把它们拿走，你就可以访问从 ajax 调用返回的数据和其他两个变量。像这样...

```
$(document).on( "pagebeforechange.lang", function( e, data ) {
    if (typeof data.toPage === "string") {
        if (data.toPage.indexOf("?sprachwechsel=") > -1) {
            // stop
            e.preventDefault();
            // get the language from clicked link
            var viewSwitch  = $.mobile.path.parseUrl( data.toPage ).hash.replace( /.*sprachwechsel=/, "" ),
               service = "services/form_service_user.cfc",
               method = "process",
               returnformat = "JSON",
               targetUrl = "",
               // fake a form
               formdata = "form_submitted=lang&viewSwitch="+viewSwitch+"&method="+method+"&returnformat="+returnformat,
               // create the success handler
               successHandler = function(response) { // response is data from server
                   data.options.reloadPage = true; // data is from outer function
                   data.options.allowSamePageTransition = true;
                   data.options.transition = "fade";
                   // reload page with new language
                   $.mobile.changePage( window.location.href, data.options);    
                   };
            // hand over to Ajax
            ajaxFormSubmit( form, service, formdata, targetUrl, successHandler );
            }
         } 
    });
}; 
```

现在您可以将处理函数传递给 ajax 调用。

```
var ajaxFormSubmit = function ( form, service, formdata, targetUrl, successHandler ){
    $.ajax({
        async: false,
        type: "post",
        url: service,
        data: formdata,
        dataType: "json",
        success: successHandler,
        error: function (XMLHttpRequest, textStatus, errorThrown) { 
        }
    });
} 
```

# php - jQuery ajax 从 PHP 获取数据到 jQuery 变量中

> ID：10672209
> 
> 赞同：0
> 
> 时间：2012-05-20T09:15:36.550
> 
> 标签：php, jquery, ajax

我需要使用 ajax 和 php 和 jquery 接收投票状态。以下是我的代码：

```
var VoteStatus= GetStatus() ;
var ID = $('#ID').val();

function GetStatus() {
    var res = '';

    $.ajax({
        type: "POST",
        data: {VoteID:ID} ,
        url: "/vote_status.php",
        async: false,       
        success: function(result) { res=result; } 
    });                  

    return res;
}

alert('Vote Status= ' + VoteStatus); 
```

在我的 php 文件中：

```
$VoteID = $_POST['VoteID'];
$Property = $_POST['Property'];

if ( $VoteID == 0 ) 
    echo 'No Vote provided - Property = '. $Property;

exit; 
```

警报框显示：**投票状态 = 未提供投票**

请帮忙。

我已经发布了 VoteID，但 php 文件似乎没有收到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:22:36.073

POST 变量的名称需要用引号引起来，如

```
data: {"VoteID":ID} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T09:36:12.897

在此处尝试警报并检查其是否有效

```
 $.ajax({
        type: "POST",
        data: {"VoteID":ID} ,
        url: "/vote_status.php",
        async: false,       
        success: function(result) { 
  alert(result); } 
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T09:40:30.160

试试这个并检查 jquery ajax [手册](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
    type: "POST",        
    data:"VoteID=" + ID +"&secondparam=" + secondvalue,
    url: "/vote_status.php",
    async: false,       
    success: function(result) { alert(result); } 
}); 
```

# javascript - 带有事件处理程序的 Javascript 变量范围

> ID：10672212
> 
> 赞同：0
> 
> 时间：2012-05-20T09:16:05.360
> 
> 标签：javascript, html

这是关于 JS 变量范围的第 n 个问题，但我通读了其余部分并没有完全得到答案。

```
var notification = window.webkitNotifications.createNotification(
'image.png',                      // The image.
'New Post: ',// The title.
'New stuff'// The body.
);

var itemLink = 'http://pathtothefile.com';

notification.onclick = function(itemLink) { 
window.focus(); 
window.open(itemLink,'_blank' );
this.cancel(); 
};

notification.show(); 
```

如何让在全局范围内定义的 itemLink 在 onclick 函数中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:18:25.213

从函数中删除参数：

```
notification.onclick = function(itemLink) { // overrides itemLink in the global
                                            // object. 
```

**固定代码：**

```
notification.onclick = function() { 
    window.focus(); 
    window.open(itemLink,'_blank' );
    this.cancel(); 
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T09:18:43.127

在名称冲突期间，局部变量优先。删除或重命名参数`itemLink`。

```
notification.onclick = function(something_else) { 
    //global itemLink should be accessible
}; 
```

# android - Android SQLite 不会读取特定值

> ID：10672214
> 
> 赞同：2
> 
> 时间：2012-05-20T09:16:49.940
> 
> 标签：android, sqlite

我在尝试从内部 SQLite 数据库（Android）中读取时遇到问题。

这是我的本地数据库代码：

```
public class LocalDatabase extends SQLiteOpenHelper{

static final String DATABASE_NAME = "database";
static final int DATABASE_VER = 2;

static final String PROFILES_TABLE_NAME = "profiles";
static final String KEY_ID = "node_id";
static final String KEY_USERID = "user_id";
static final String KEY_EMAIL = "email";
static final String KEY_FIRSTNAME = "firstname";
static final String KEY_LASTNAME = "lastname";
static final String KEY_STUDY = "study";
static final String KEY_PROFESSION = "profession";
static final String KEY_KNOWS = "knows";
static final String KEY_LOCATION = "location";
static final String KEY_STATUS = "status";
static final String KEY_POINTS = "points";
static final String KEY_GENDER = "gender";
static final String KEY_DOB = "dob";
static final String KEY_CREATED = "created";

public LocalDatabase(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VER);

}

@Override
public void onCreate(SQLiteDatabase db) {

    String CreateProfileTable = "CREATE TABLE " + PROFILES_TABLE_NAME + "(" +
                                KEY_ID + " INTEGER PRIMARY KEY," +
                                KEY_USERID + " TEXT," +
                                KEY_EMAIL + " TEXT," +
                                KEY_FIRSTNAME + " TEXT," +
                                KEY_LASTNAME + " TEXT," +
                                KEY_STUDY + " TEXT," + 
                                KEY_PROFESSION + " TEXT," +
                                KEY_KNOWS + " TEXT," +
                                KEY_LOCATION + " TEXT," +
                                KEY_STATUS + " TEXT," +
                                KEY_POINTS + " INTEGER," +
                                KEY_GENDER + " TEXT," +
                                KEY_DOB + " TEXT," +
                                KEY_CREATED + "TEXT)";

    db.execSQL(CreateProfileTable);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    db.execSQL("DROP TABLE IF EXISTS " + PROFILES_TABLE_NAME);

    onCreate(db);

}

public void addUserProfile(String userID, String email, String firstname, String lastname, String study, String profession, String knows,
        String location, String status, int points, String gender, String DOB, String created){

    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues params = new ContentValues();

    params.put(KEY_USERID, userID);
    params.put(KEY_EMAIL, email);
    params.put(KEY_FIRSTNAME, firstname);
    params.put(KEY_LASTNAME, lastname);
    params.put(KEY_STUDY, study);
    params.put(KEY_PROFESSION, profession);
    params.put(KEY_KNOWS, knows);
    params.put(KEY_LOCATION, location);
    params.put(KEY_STATUS, status);
    params.put(KEY_POINTS, points);
    params.put(KEY_GENDER, gender);
    params.put(KEY_DOB, DOB);
    params.put(KEY_CREATED, created);

    db.insert(PROFILES_TABLE_NAME, null, params);
    db.close();

}

public ContentValues getUserProfile(){

    String query = "SELECT * FROM " + PROFILES_TABLE_NAME;
    ContentValues userProfile = new ContentValues();

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor c = db.rawQuery(query, null);

    c.moveToFirst();

    if(c.getCount()>0){

        userProfile.put(KEY_USERID, c.getString(1));
        userProfile.put(KEY_EMAIL, c.getString(2));
        userProfile.put(KEY_FIRSTNAME, c.getString(3));
        userProfile.put(KEY_LASTNAME, c.getString(4));
        userProfile.put(KEY_STUDY, c.getString(5));
        userProfile.put(KEY_PROFESSION, c.getString(6));
        userProfile.put(KEY_KNOWS, c.getString(7));
        userProfile.put(KEY_LOCATION, c.getString(8));
        userProfile.put(KEY_STATUS, c.getString(9));
        userProfile.put(KEY_POINTS, c.getString(10));
        userProfile.put(KEY_GENDER, c.getString(11));
        userProfile.put(KEY_DOB, c.getString(12));
        userProfile.put(KEY_CREATED, c.getString(13));

    }

    c.close();
    db.close();

    return userProfile;

} 
```

}

问题是，当我尝试使用（getUserProfile）读取数据时，将数据插入数据库（使用添加用户配置文件）后，除了user_id和email之外的所有字段都为空，我检查了addUserProfile中的params变量，它得到了正确的值

有人可以解释一下我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:13:29.277

你错过了一个空格。 `KEY_CREATED + "TEXT)";`应该`KEY_CREATED + " TEXT)";`

我通过测试活动将您的所有代码放入 Eclipse 中，并且能够使其正常工作。

我将以下代码放入我的活动中以对其进行测试（在使用 adb 删除由上述错字引起的带有坏表的数据库之后），一切都按预期工作。

```
 LocalDatabase db = new LocalDatabase(this);
    db.addUserProfile("01", "email", "firstname", "lastname", "study",
            "profession", "knows", "location", "status", 1,
            "gender", "DOB", "created");

    ContentValues cv = new ContentValues();

    cv = db.getUserProfile(); 
```

cv 包含预期值。如果您仍有问题，请告诉我们。

如果您在删除旧数据库时遇到问题，请尝试`DATABASE_VER`在 LocalDatabase 类中更新版本号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:56:08.270

我的猜测是您最初输入了一些值（可能仅用于用户 ID 和电子邮件字段），后来没有清除应用程序的数据，因此再次重建数据库（并且您继续在数据库中保留那些先前输入的值）。在这种情况下，即使您输入了新值，您也将仅为结果*c*`ContentValues`中的第一个数据行构建对象（包含结果）（您这样做）。第一个值是只有用户 ID 和电子邮件的值，你可以得到其他所有值。`Cursor` *`c.moveToFirst();``null`*

 *此外，您的 sql 创建字符串中有错字`CreateProfileTable`，应该是这样的：

```
...KEY_CREATED + " TEXT)"; 
```

像上面一样修改`CreateProfileTable`字符串，然后卸载并重新安装您的应用程序。*

# python - 在python中解析ERF捕获文件

> ID：10672215
> 
> 赞同：3
> 
> 时间：2012-05-20T09:16:50.840
> 
> 标签：python

在python中解析ERF（endace）捕获文件的最佳方法是什么？我找到了一个用于 python 的 libpcap 包装器，但我认为 lipcap 不支持 ERF 格式。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T21:40:42.740

这是一个简单的 ERF 记录解析器，它为每个数据包返回一个字典（我只是将它破解在一起，所以没有经过很好的测试。并非所有标志字段都被解码，但那些没有被解码的字段并不广泛适用）：

注意：

*   ERF 记录类型：1 = HDLC、2 = 以太网、3 = ATM、4 = 重组 AAL5、5-7 多通道变体，此处未处理额外的标头。
*   `rlen`可以小于`wlen+len(header)`如果 snaplength 太短。
*   间隙丢失计数器是当其输入队列溢出时，Dag 数据包处理器记录此数据包与先前捕获的数据包之间丢失的数据包数。
*   如果您不想使用 scapy，请注释掉这两条 scapy 行。

代码：

```
import scapy.layers.all as sl

def erf_records( f ):
    """
    Generator which parses ERF records from file-like ``f``
    """
    while True:
        # The ERF header is fixed length 16 bytes
        hdr = f.read( 16 )
        if hdr:
            rec = {}
            # The timestamp is in Intel byte-order
            rec['ts'] = struct.unpack( '<Q', hdr[:8] )[0]
            # The rest is in network byte-order
            rec.update( zip( ('type',  # ERF record type
                              'flags', # Raw flags bit field
                              'rlen',  # Length of entire record
                              'lctr',  # Interstitial loss counter
                              'wlen'), # Length of packet on wire
                             struct.unpack( '>BBHHH', hdr[8:] ) ) )
            rec['iface']  = rec['flags'] & 0x03
            rec['rx_err'] = rec['flags'] & 0x10 != 0
            rec['pkt'] = f.read( rec['rlen'] - 16 )
            if rec['type'] == 2:
                # ERF Ethernet has an extra two bytes of pad between ERF header
                # and beginning of MAC header so that IP-layer data are DWORD
                # aligned.  From memory, none of the other types have pad.
                rec['pkt'] = rec['pkt'][2:]
                rec['pkt'] = sl.Ether( rec['pkt'] )
            yield rec
        else:
            return 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-26T16:30:53.910

ERF 记录可以包含附加到 16 字节 ERF 记录头的可选扩展头。“类型”字段的高位表示存在扩展头。我在 strix 的示例中添加了扩展头的测试，以及扩展头本身的解码。请注意，如果存在扩展标头，则以太网帧的测试也需要稍作更改。

**警告：** 我相信 ERF 记录可以包含*多个*扩展标题，但我不知道要测试这些。Extension Header 结构没有特别详细的文档记录，我在囚禁中的唯一记录只包含一个扩展名。

```
import struct
import scapy.layers.all as sl

def erf_records( f ):
    """
    Generator which parses ERF records from file-like ``f``
    """
    while True:
        # The ERF header is fixed length 16 bytes
        hdr = f.read( 16 )
        if hdr:
            rec = {}
            # The timestamp is in Intel byte-order
            rec['ts'] = struct.unpack( '<Q', hdr[:8] )[0]
            # The rest is in network byte-order
            rec.update( zip( ('type',  # ERF record type
                              'flags', # Raw flags bit field
                              'rlen',  # Length of entire record
                              'lctr',  # Interstitial loss counter
                              'wlen'), # Length of packet on wire
                             struct.unpack( '>BBHHH', hdr[8:] ) ) )
            rec['iface']  = rec['flags'] & 0x03
            rec['rx_err'] = rec['flags'] & 0x10 != 0

            #- Check if ERF Extension Header present.  
            #  Each Extension Header is 8 bytes.
            if rec['type'] & 0x80:
                ext_hdr = f.read( 8 )
                rec.update( zip( (
                        'ext_hdr_signature',     # 1 byte
                        'ext_hdr_payload_hash',  # 3 bytes
                        'ext_hdr_filter_color',  # 1 bye
                        'ext_hdr_flow_hash'),    # 3 bytes
                        struct.unpack( '>B3sB3s', ext_hdr ) ) )
                #- get remaining payload, less ext_hdr
                rec['pkt'] = f.read( rec['rlen'] - 24 )
            else:
                rec['pkt'] = f.read( rec['rlen'] - 16 )
            if rec['type'] & 0x02:
                # ERF Ethernet has an extra two bytes of pad between ERF header
                # and beginning of MAC header so that IP-layer data are DWORD
                # aligned.  From memory, none of the other types have pad.
                rec['pkt'] = rec['pkt'][2:]
                rec['pkt'] = sl.Ether( rec['pkt'] )
            yield rec
        else:
            return 
```

# c# - 如何在 C# 中定义一个控制按钮 l 并为其添加特殊效果和属性？

> ID：10672218
> 
> 赞同：-1
> 
> 时间：2012-05-20T09:17:31.913
> 
> 标签：c#, button, properties

我不知道如何在 c# 中定义一个控制按钮？然后给它定义一些特殊的属性和效果，而不是我们现在在visual studio中拥有的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:47:22.470

尝试扩展课程`System.Windows.Forms.Button`

```
namespace MyDemo {
  public class MyButton : System.Windows.Forms.Button {
      public MyButton() {
         Text = "This is custom text";
         BackColor = Color.Red;
      }
  }
} 
```

您应该在应用程序中使用 MyButton 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:56:29.430

要将属性添加到按钮，只需使用 get & set 。这是一个示例代码：

```
public class CustomButton : Button
{
    string _LockStatus;

    public string LockStatus
    {

        get { return _LockStatus; }

        set { _LockStatus = value; }

    }
} 
```

# android - Android布局宽度？

> ID：10672222
> 
> 赞同：-2
> 
> 时间：2012-05-20T09:17:52.197
> 
> 标签：android

在制作android应用布局的时候我们要定义布局宽度，这是什么意思 `android:layout_width="wrap_content"`呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T09:25:18.613

任一属性都可以应用于 View 的（视觉控制）水平或垂直尺寸。它用于根据其内容或其父布局的大小设置视图或布局大小，而不是显式指定维度。

**填充父**

将小部件的布局设置为 fill_parent 将强制它展开以占用它所在的布局元素中可用的空间。

将顶级布局或控件设置为 fill_parent 将强制它占据整个屏幕。

**包装内容**

将 View 的大小设置为 wrap_content 将强制它仅扩展到足以包含它所包含的值（或子控件）的程度。对于控件——如文本框 (TextView) 或图像 (ImageView)——这将包装正在显示的文本或图像。对于布局元素，它将调整布局大小以适应作为其子元素添加的控件/布局。

查看[官方文档](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)了解更多详情！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-24T10:46:14.957

`android:layout_width="wrap_content"`意味着布局是固定的，它会扩展到与您的内容大小完全相同。如果您的内容更多，它会扩展到该限制，并且与短内容相同。这是一个例子..

```
<RelativeLayout  

    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/btnButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button ABC"/>

</RelativeLayout> 
```

`wrap_content`图片：

[![图片](../Images/badb50a03e2f6fb8a967fc741ccc6ca0.png)](https://i.stack.imgur.com/CmjpF.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T09:22:50.987

`wrap_content`意味着宽度由小部件的宽度决定，分别不是整个显示器的宽度，而只是小部件需要的宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T09:31:28.067

参考[Android官方文档](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#attr_android:layout_width)：

**安卓：布局宽度**

> 指定视图的基本宽度。这是包含布局管理器内的任何视图的必需属性。它的值可以是固定宽度或特殊常数之一的尺寸（例如“12dip”）。可能是一个维度值，它是一个浮点数加上一个单位，如“14.5sp”。可用单位有：px（像素）、dp（与密度无关的像素）、sp（基于首选字体大小的缩放像素）、in（英寸）、mm（毫米）。这也可能是对包含此类型值的资源（形式为“@[package:]type:name”）或主题属性（形式为“?[package:][type:]name”）的引用. 可能是以下常数值之一。
> 
> *   **fill_parent** -1 视图应该与其父级一样大（减去填充）。从 API 级别 8 开始不推荐使用此常量，并由 match_parent 替换。
> *   **match_parent** -1 视图应该与其父级一样大（减去填充）。在 API 级别 8 中引入。
> *   **wrap_content** -2 视图应该足够大以包含其内容（加上填充）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-07T08:16:17.137

`android:layout_width="wrap_content"` 意味着布局宽度没有确定或固定，它会根据其组件占用空间。假设在一个文本字段中你只有一个单词，那么你的文本字段将只占用一个单词的空间，然后如果你的文本字段中有两个单词，那么当你将宽度声明为 wrap_content 时，它将占用两个单词的空间。同样的事情也适用于 layout_height 。

# sql - 毫秒访问最大计数

> ID：10672226
> 
> 赞同：0
> 
> 时间：2012-05-20T09:18:30.407
> 
> 标签：sql, ms-access

这是我的查询：

```
SELECT Count(*) AS CountOfJoker, tblPrediction.GameID
FROM (tblUser INNER JOIN (tblPool INNER JOIN tblUserPool ON tblPool.PoolID = tblUserPool.PoolID) ON tblUser.UserID = tblUserPool.UserID) INNER JOIN (tblResult INNER JOIN tblPrediction ON tblResult.GameID = tblPrediction.GameID) ON tblUser.UserID = tblPrediction.UserID
GROUP BY tblPrediction.GameID, tblPrediction.Joker, tblResult.GroupName, tblPool.PoolID
HAVING (((tblPrediction.Joker)=True) AND ((tblResult.GroupName)='A') AND ((tblPool.PoolID)=314)); 
```

这是输出：

```
CountOfJoker    GameID
2       1
2       2
2       9
1       10
1       17
3       18 
```

我想要具有以下输出的 CountOfJoker 的 MAX：

```
CountOfJoker    GameID
3       18 
```

谢谢德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:33:56.437

你可以使用`select top`和`order by ... desc`

```
 SELECT TOP 1 Count(*) AS CountOfJoker, tblPrediction.GameID
    FROM (tblUser INNER JOIN (tblPool INNER JOIN tblUserPool ON tblPool.PoolID = tblUserPool.PoolID) ON tblUser.UserID = tblUserPool.UserID) INNER JOIN (tblResult INNER JOIN tblPrediction ON tblResult.GameID = tblPrediction.GameID) ON tblUser.UserID = tblPrediction.UserID
    GROUP BY tblPrediction.GameID, tblPrediction.Joker, tblResult.GroupName, tblPool.PoolID
    HAVING (((tblPrediction.Joker)=True) AND ((tblResult.GroupName)='A') AND ((tblPool.PoolID)=314));
    ORDER BY Count(*) DESC 
```

# c# - Webservice 无法序列化，因为它没有无参数构造函数

> ID：10672232
> 
> 赞同：7
> 
> 时间：2012-05-20T09:19:15.997
> 
> 标签：c#, web-services

我有一个我已经编辑过的网络服务，在它正常工作之前。但是现在我收到此错误：无法序列化，因为它没有无参数构造函数我在下面发布了我的类。

```
public class Class
{
    public class AnsweredQ
    {
        public string Question { get; set; }
        public string Answer { get; set; }

        public AnsweredQ(string _Question, string _Answer)
        {
            Question = _Question;
            Answer = _Answer;
        }
    }
    public class UnAnsweredQ
    {
        public string Question { get; set; }
        public string[] Options { get; set; }

        public UnAnsweredQ(string _Question, string[] _Options)
        {
            Question = _Question;
            Options = _Options;
        }
    }
    public class Trial
    {
        public string User { get; set; }
        public DateTime TrialDate { get; set; }
        public bool Expired { get; set; }

        public Trial (string _User, DateTime _TrialDate, bool _Expired)
        {
            User = _User;
            TrialDate = _TrialDate;
            Expired = _Expired;
        }
    }
} 
```

如果你能解决这个问题，请解释我做错了什么:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T09:26:27.923

为了能够序列化/反序列化一个类，序列化器需要一个无参数的构造函数。因此，您需要将无参数构造函数添加到您的类中，即：

```
public class AnsweredQ
    {
        public string Question { get; set; }
        public string Answer { get; set; }

       public AnsweredQ() {  }

        public AnsweredQ(string _Question, string _Answer)
        {
            Question = _Question;
            Answer = _Answer;
        }
    }
    public class UnAnsweredQ
    {

        public string Question { get; set; }
        public string[] Options { get; set; }

        public UnAnsweredQ() {}

        public UnAnsweredQ(string _Question, string[] _Options)
        {
            Question = _Question;
            Options = _Options;
        }
    }

    public class Trial
    {
        public string User { get; set; }
        public DateTime TrialDate { get; set; }
        public bool Expired { get; set; }

        public Trial ()
        {
        }

        public Trial (string _User, DateTime _TrialDate, bool _Expired)
        {
            User = _User;
            TrialDate = _TrialDate;
            Expired = _Expired;
        }
    }
} 
```

# xml - “安装”——撒克逊

> ID：10672242
> 
> 赞同：0
> 
> 时间：2012-05-20T09:21:58.803
> 
> 标签：xml, xquery, saxon, xquery-sql

我正在尝试为 xquery 文档“安装”Saxon。

因此，我使用 saxon9he.jar 作为文件名设置了 Classpath var，并在 cmd saxon9he 中进行了尝试，但没有任何反应。所以我尝试通过以下方式执行 xquery 文件：

```
java net.sf.saxon.Query 
```

我得到了：

```
C:\Users\Admin>java net.sf.saxon.Query
Exception in thread "main" java.lang.NoClassDefFoundError: net/sf/saxon/Query
Caused by: java.lang.ClassNotFoundException: net.sf.saxon.Query
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: net.sf.saxon.Query.  Program will exit. 
```

我的配置有什么问题？

**--更新1--**

```
C:\Users\Admin\Desktop\Studium\5tes Semster\Semistrukturierte Daten\3 Übung>jav
a -cp saxon9he.jar net.sf.saxon.Query
No query file name
Saxon-HE 9.2.1.2J from Saxonica
Usage: java net.sf.saxon.Query [options] query {param=value}...
Options:
  -backup:on|off        Save updated documents before overwriting
  -config:filename      Use configuration file
  -cr:classname         Use specified CollectionURIResolver class
  -dtd:on|off           Validate using DTD
  -expand:on|off        Expand defaults defined in schema/DTD
  -explain[:filename]   Display compiled expression tree
  -ext:[on|off]         Allow|Disallow external Java functions
... 
```

类路径变量似乎设置正确......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:47:53.077

[saxon 文档展示](http://www.saxonica.com/documentation/using-xquery/commandline.xml)了如何从命令行执行 XQuery：

> java net.sf.saxon.Query [选项] -q:queryfile [参数...]

此外，[它指出](http://www.saxonica.com/documentation/using-xquery/intro.xml)：

> XQuery 处理器可以从操作系统命令行调用，也可以通过用户编写的应用程序的 API 调用。没有提供图形用户界面。

而且由于它是基于 java 的，因此需要正确[处理 classpath](http://en.wikipedia.org/wiki/Classpath_%28Java%29)。因此，如果您对 java 和使用 cli 应用程序都没有太多经验，那么另一个 XQuery 可能更容易处理。除了 BaseX，还有[Zorba](http://www.zorba-xquery.com)；一个相当复杂的解决方案是[eXist-db](http://www.exist-db.org)，一个带有 XQuery 处理器和编辑器的原生 XML 数据库。

# vb.net - 如何将颜色与数据表中的特定用户相关联

> ID：10672244
> 
> 赞同：0
> 
> 时间：2012-05-20T09:22:21.347
> 
> 标签：vb.net, colors, dataset

我对使用 Visual Basic 还是很陌生。而且我以前从未使用过数据库/数据表。

在我的数据表上（我希望这是正确的词）我有两列要存储颜色值。我将数据类型更改为“System.Drawing.Color”。

但是，看来我不能简单地输入字符串（例如：“Color.Black”）以将其添加到数据库中。当使用更新 SQL 查询并使其在表单上查找颜色值时，它希望将它们转换为字符串。

是否可以以这种方式存储这样的颜色值，或者我是否使用了另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T00:28:20.990

所有颜色都由“Color.Black”或“#000000”上的字符串表示，因此您唯一能做的就是在放入 DataTable 时将其转换为字符串，然后在检索时将其转换回颜色从数据表

# mysql - 带有全文搜索的 MySQL 更新

> ID：10672245
> 
> 赞同：1
> 
> 时间：2012-05-20T09:22:33.530
> 
> 标签：mysql, full-text-search

```
UPDATE mytable SET this = 'this' AND that = 'that'
WHERE MATCH (items) AGAINST ('item5') 
```

问题是此查询将对`UPDATE`找到的每个匹配项执行一次，而不是更新匹配的第一行所需的结果。

添加`LIMIT 0, 1`到查询会导致 MySQL 语法错误。有没有办法对使用全文查询找到的第一条记录进行更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T09:25:00.347

根据 的[**文档`update`**](http://dev.mysql.com/doc/refman/5.5/en/update.html)，您可以使用：

```
[LIMIT row_count] 
```

而不是，就像你做的那样：

```
LIMIT 0, 1 
```

因此，在您的情况下，您的查询将如下所示：

```
UPDATE mytable SET this = 'this' AND that = 'that'
WHERE MATCH (items) AGAINST ('item5')
LIMIT 1 
```

# css - 当我缩短浏览器窗口时 CSS 重叠

> ID：10672254
> 
> 赞同：1
> 
> 时间：2012-05-20T09:23:45.040
> 
> 标签：css

我仍然有一些 CSS 问题，我似乎无法修复它。我只是在这里做了一个**[测试页面](http://phpblog.inutritie.ro/test.html)**，看看是否有人可以提供帮助：

的HTML：

```
<div class="menu_background">
    <div class="menu">This is my menu</div>
</div> 
```

CSS：

```
body {
background-color: #FFC;
margin:0;
padding:0
}
.menu_background {
background:url(images/headline.jpg) repeat-x;
}
.menu {
width:60em;
margin:0 2em;
border:solid 1px #F00;
color:#FFF
} 
```

问题：当您缩短浏览器窗口时，会发生奇怪的重叠，使其小于 60em。

您可以查看测试页面，这里有两个屏幕截图：

**1.这是浏览器全尺寸的时候：** ![在此处输入图像描述](../Images/349a6587a336b26add91af155112b6c3.png)

2.  这是我**缩短浏览器窗口并向右滚动的时候：** ![**在此处输入图片描述**](../Images/d3accec6a8d919fbb5a38324561d0e85.png)

最好的方法是查看我的[测试页面](http://phpblog.inutritie.ro/test.html)并亲自查看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:36:08.723

`.menu_background { min-width:56em }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T09:42:02.717

避免将背景直接放在菜单中

```
.menu {
  background:url(images/headline.jpg) repeat-x;
  width:60em;
  margin:0 2em;
  border:solid 1px #F00;
  color:#FFF
} 
```

（审查）有背景 100%

```
.menu_background {
   background:url(http://phpblog.inutritie.ro/images/headline.jpg) repeat-x;
   min-width: 64em;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T09:43:16.573

我已经在 Chrome、Mozilla 和 IE（最新版本）中进行了测试。它似乎只发生在 IE 中。

怎么样：

```
.menu_background {
    position:relative;
} 
```

和

```
.menu {
    position:absolute;
} 
```

# vhdl - 循环代码的短 VHDL 我不明白

> ID：10672256
> 
> 赞同：0
> 
> 时间：2012-05-20T09:24:34.643
> 
> 标签：vhdl

我确实了解如何将二进制数转换为十进制数，但是下面应该这样做的代码没有意义。我的意思是让我们有一个二进制数 10，然后 v(i) 将为 0，因此结果保持为 0。在下一次迭代时 v(i) 将为 1，因此结果将为 0 + 1 。循环停止，函数将返回结果值 1 而不是 2，这是放入函数的二进制数的值。有人能告诉我为什么我错了吗？此代码附带大学作业，因此它应该是正确的。谢谢。:)

```
-------------------------------------------------------------------------------
-- convert std_logic vector v to natural
-------------------------------------------------------------------------------

FUNCTION s2n(v: std_logic_vector)
RETURN natural IS
VARIABLE result: natural := 0;
BEGIN
    FOR i IN v'range LOOP
            result := result * 2;
            IF v(i) = '1' THEN
                    result := result + 1;
            END IF;
    END LOOP;
    RETURN result;
END s2n; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:04:59.437

`'range`循环从左到右工作。惯例是最重要的位在左边

通过首先对其进行解码，该`*2`操作在 MSB 上运行的次数最多，正如您所期望的那样。

（顺便说一句，如果您出于某种原因希望范围相反，您可以使用该`'reverse_range`属性）

# ember.js - 将数组 2D 添加到 Ember.View 的内容数组中

> ID：10672259
> 
> 赞同：2
> 
> 时间：2012-05-20T09:25:03.653
> 
> 标签：ember.js

我是Ember入门，所以想问一下如何将数组2D添加到Ember.View的内容数组中？前任

```
var IconMeaning = {
OK:  ['theme/dark/images/providers/ok.png', 'OK', 'Both'],
Cancel: ['theme/dark/images/providers/delete.png', 'Cancel', 'Both'],
Edit: ['theme/dark/images/providers/edit.png', 'Edit', 'AdminOnly'],
Save: ['theme/dark/images/providers/save.png', 'Submit,Save', 'AdminOnly'],
Add: ['theme/dark/images/providers/plus_blue.png', 'Add,Create,Insert', 'Both'],
Remove: ['theme/dark/images/providers/remove.png', 'Remove,Delete', 'Both'],
Next: ['theme/dark/images/providers/next.png', 'Next,Continue', 'Both'],
Previous: ['theme/dark/images/providers/previous.png', 'Back,Previous', 'AdminOnly'],
Up: ['theme/dark/images/goback.png', 'Up a Level', 'Both'],
Info: ['theme/dark/images/providers/info.png', 'More Information', 'Both'],
Public: ['theme/dark/images/public.png', 'Make,Active/Public', 'AdminOnly'],
Private: ['theme/dark/images/private.png', 'Make,Inactive/Private', 'AdminOnly'],
Calendar: ['theme/dark/images/calendar.png', 'Select Date', 'AdminOnly'],
Download: ['theme/dark/images/providers/download.png', 'Download', 'Both'],
Reload: ['theme/dark/images/providers/reload.png', 'Reload,Refresh', 'AdminOnly'],
Print: ['theme/dark/images/providers/print.png', 'Print', 'Both'],
Unlink: ['theme/dark/images/providers/unlink.png', 'Unlink,Unregister', 'AdminOnly'],
AddToCart: ['theme/dark/images/providers/plus_green.png', 'Add to Cart', 'Both'],
Checkout: ['theme/dark/images/providers/checkout.png', 'Checkout', 'Both'],
Help: ['theme/dark/images/providers/help.png', 'Help', 'Both'],
VideoHelp: ['theme/dark/images/providers/helpbutton.png', 'Video Help', 'Both'] 
```

}

我想将它们添加到 Ember.View 中的内容数组中。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:57:14.467

您可以`Ember.Object`为 IconMeaning-Object 的每个“行”创建一个，其中包含您的键和值数组。然后使用 an`Ember.ArrayController`并将所有行推入其内容数组`pushObject`：

```
App.controller = Ember.ArrayController.create({
    content: []
});

for (var propertyName in IconMeaning) {
    var emberObj = Ember.Object.create({
        key: propertyName,
        values: IconMeaning[propertyName]
    });
    App.controller.pushObject(emberObj);
} 
```

使用 Ember 绑定连接到您的视图：

```
App.view = Ember.View.extend({
    contentBinding: 'App.controller'
}); 
```

[我在http://jsfiddle.net/HUHnE/](http://jsfiddle.net/HUHnE/)创建了一个完整的工作示例

# delphi - 输出参数和“ShowMessage”函数

> ID：10672260
> 
> 赞同：1
> 
> 时间：2012-05-20T09:25:06.023
> 
> 标签：delphi, delphi-2007

我有一个这样的函数声明：

`function execProc(ProcName,InValues:PChar;out OutValues:PChar):integer; //The "OutValues" is a out parameter.`

我这样称呼这个函数：

```
procedure TForm1.Button6Click(Sender: TObject);
var
 v:integer;
 s:pchar;
begin
 Memo1.Clear;
 v := execProc(pchar('PROC_TEST'),pchar('aaa'),s);
 showmessage(inttostr(v)); //mark line
 Memo1.Lines.Add(strpas(s));
end; 
```

当我删除标记行（showmessage（inttostr（v）））时，我将在Memo1中显示正确的结果，但如果我继续使用showmessage（），memo1将显示错误字符串：“Messag”，为什么? 谢谢你的帮助！

```
function execProc(ProcName,InValues:PChar;out OutValues:PChar):integer;
var
  str: TStrings;
  InValue,OutValue: string;
  i,j,scount: integer;
begin
Result := -100;
i := 0;
j := 0;
str := TStringList.Create;
try
  sCount := ExtractStrings(['|'], [], InValues, str);
  with kbmMWClientStoredProc1 do
  begin
    Close;
    Params.Clear;
    StoredProcName := StrPas(ProcName);
    FieldDefs.Updated := False;
    FieldDefs.Update;
    for i := 0 to Params.Count - 1 do
    begin
      if (Params[i].ParamType = ptUnknown) or
       (Params[i].ParamType = ptInput) or
       (Params[i].ParamType = ptInputOutput) then
      begin
        inc(j);
        InValue := str[j-1];
        Params[i].Value := InValue;
      end;
    end;
    try
      ExecProc;
      for i := 0 to Params.Count - 1 do
      begin
        if  (Params[i].ParamType = ptOutput) or
       (Params[i].ParamType = ptInputOutput) then
         OutValue := OutValue + '|' + Params[i].AsString;
      end;
      OutValues := PChar(Copy(OutValue,2,Length(OutValue)-1));
      Result := 0;
    except
      on E:Exception do
      begin
        if E.Message = 'Connection lost.' then Result := -101;//服务器连接失败
        if E.Message = 'Authorization failed.' then Result := -102;//身份验证失败
        Writelog(E.Message);
      end;
    end;
  end;
finally
  str.Free;
end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T06:12:38.860

问题在于界面的设计和`PChar`.

```
OutValues := PChar(Copy(OutValue,2,Length(OutValue)-1)); 
```

这是通过创建一个隐含的、隐藏的、本地的字符串变量来实现的，该变量保存该值

```
Copy(OutValue,2,Length(OutValue)-1) 
```

当函数返回时，该字符串变量被销毁，因此`OutValues`指向已释放的内存。有时您的程序似乎可以工作，但这完全取决于机会。正如您所观察到的，任何微小的变化都会扰乱这一点。

这个问题很容易解决。只需使用字符串参数而不是`PChar`. 这将使代码更易于阅读并使其正常工作。

```
function execProc(ProcName, InValues: string; out OutValues: string): integer; 
```

# android - java.lang.NoClassDefFoundError: com.urbanairship.UAirship

> ID：10672263
> 
> 赞同：4
> 
> 时间：2012-05-20T09:25:36.257
> 
> 标签：android, macos, urbanairship.com

我有一个新的 mac (Lion 10.7.3)。安装了 Eclipse 和 android sdk。从 SVN 检查了我的项目，尝试运行并得到了这个丑陋的异常：

```
05-20 12:17:21.175: E/AndroidRuntime(32499): FATAL EXCEPTION: main
05-20 12:17:21.175: E/AndroidRuntime(32499): java.lang.NoClassDefFoundError: com.urbanairship.UAirship
05-20 12:17:21.175: E/AndroidRuntime(32499):    at com.neo.ovs3.MyApp.onCreate(MyApp.java:16)
05-20 12:17:21.175: E/AndroidRuntime(32499):    at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
05-20 12:17:21.175: E/AndroidRuntime(32499):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3292)
05-20 12:17:21.175: E/AndroidRuntime(32499):    at android.app.ActivityThread.access$2200(ActivityThread.java:117)
05-20 12:17:21.175: E/AndroidRuntime(32499):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:969)
05-20 12:17:21.175: E/AndroidRuntime(32499):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-20 12:17:21.175: E/AndroidRuntime(32499):    at android.os.Looper.loop(Looper.java:130)
05-20 12:17:21.175: E/AndroidRuntime(32499):    at android.app.ActivityThread.main(ActivityThread.java:3703)
05-20 12:17:21.175: E/AndroidRuntime(32499):    at java.lang.reflect.Method.invokeNative(Native Method)
05-20 12:17:21.175: E/AndroidRuntime(32499):    at java.lang.reflect.Method.invoke(Method.java:507)
05-20 12:17:21.175: E/AndroidRuntime(32499):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
05-20 12:17:21.175: E/AndroidRuntime(32499):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
05-20 12:17:21.175: E/AndroidRuntime(32499):    at dalvik.system.NativeStart.main(Native Method) 
```

尝试通过创建新项目、重新创建清单文件、更改 UA 库、配置构建路径以各种方式修复它。没有任何帮助。项目本身编译没有错误。

值得一提的是，在我以前的 Mac（和 PC）上，相同的项目在签出后立即运行。这意味着这不是项目问题。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:14:58.477

Google 已经对他们处理使用最新 ADT 版本中库项目的项目的方式进行了一些更改。虽然这些更改是有福的，但在将旧 ADT 插件版本与新版本混合时会导致错误。

如果你在旧电脑上有一个旧的 ADT 插件并且你以这种方式提交它，它会导致错误......

如果是这样，我建议回到您的旧计算机并更新所有 Google 工具。确保项目运行良好并提交到 SVN。在新电脑上结帐，希望它能工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:54:34.927

找到了解决方案！

这确实是由 ADT 更新引起的。

我刚刚创建了一个新的 android 项目，并注意到其结构与我之前的 SVN 项目不同。

之后，在 ADT 和 SDK 工具更新到 v17 之后，我关注了这篇文章[Gson NoClassDefFoundError](https://stackoverflow.com/questions/9820675/gson-noclassdeffounderror-after-adt-and-sdk-tools-update-to-v17)

并将旧文件复制到新项目中。最后一切正常。

我希望这会帮助有同样问题的人。

# backbone.js - model.bind 和 model.on：这些方法是否等效？我应该更喜欢哪一个？

> ID：10672265
> 
> 赞同：3
> 
> 时间：2012-05-20T09:26:09.283
> 
> 标签：backbone.js

我确实在我的`initialise`函数中尝试了以下内容`Backbone.View`

```
this.model.bind('change', this.render, this);
this.model.on('change', this.render, this); 
```

显然它们的工作方式相同。

这种方法是否等效。
我应该更喜欢哪一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T10:26:24.040

是的，它们是等价的。但是，绑定（和取消绑定）只是为了向后兼容而保留的。你应该使用。

希望这可以帮助！

# machine-learning - SVM 与 MLP（神经网络）：通过性能和预测精度进行比较

> ID：10672268
> 
> 赞同：10
> 
> 时间：2012-05-20T09:26:32.153
> 
> 标签：machine-learning, neural-network, deep-learning, svm

对于某些图像处理应用程序，我应该在 SVM 和神经网络之间做出决定。分类器必须足够快以实现近实时应用，并且准确性也很重要。由于这是医疗应用，因此分类器具有低故障率很重要。

哪一个是更好的选择？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-20T16:01:40.493

一些附带条件：

ML 分类器的性能可以指 (i) 分类器本身的性能；或 (ii) 谓词步骤的性能：模型构建算法的执行速度。特别是在这种情况下，答案完全不同，具体取决于 OP 中打算使用的两者中的哪一个，因此我将分别回答每个问题。

其次，通过*神经网络*，我假设您指的是最常见的实现——即前馈、反向传播的单隐藏层感知器。

**训练时间** *（模型构建器的执行速度）*

对于 SVM 与 NN 相比：***SVM 慢得多***。这有一个直接的原因：SVM 训练需要解决相关的拉格朗日对偶（而不是原始）问题。这是一个*二次*优化问题，其中变量的数量非常大——即等于训练实例的数量（数据矩阵的“长度”）。

在实践中，如果您的方案中存在两个因素，则可能会抵消这一优势：

*   *NN 训练很容易并行化*（通过 map reduce）；并行化 SVM 训练并非微不足道，但也并非不可能——在过去八年左右的时间里，已经发布了几个实现并被证明是可行的 ( [https://bibliographie.uni-tuebingen.de/xmlui/bitstream/handle/ 10900/49015/pdf/tech_21.pdf](https://bibliographie.uni-tuebingen.de/xmlui/bitstream/handle/10900/49015/pdf/tech_21.pdf) )

*   *多类分类问题*SVM 是**二类分类器**。它们可以适用于多类问题，但这从来都不是直截了当的，因为 SVM 使用直接决策函数。（将 SVM 修改为多类问题的一个很好的来源是 S. Abe，*支持向量机用于模式分类*，Springer，2005）。这种修改可能会消除 SVM 相对于 NN 的任何性能优势：例如，如果您的数据有 *两个以上的类*，并且您选择使用连续分类（又名一对多分类）来配置 SVM，其中数据被馈送到第一个 SVM 分类器，将数据点分类为*I 类*或*其他*; 如果该类是 other ，则将数据点馈送到第二个分类器，该分类器将其分类为 *II 类*或*other*等。

**预测性能** *（模型的执行速度）*

*与 NN 相比，SVM 的性能要高得多*。对于三层（一个隐藏层）NN，预测需要将输入向量连续乘以两个二维矩阵（权重矩阵）。对于 SVM，分类涉及确定给定点位于决策边界的哪一侧，即*余弦积*。

**预测精度**

通过“故障率”，我假设您的意思是*错误率*，而不是分类器在生产使用中的故障。如果是后者，那么 SVM 和 NN 之间几乎没有差异——这两种模型通常在数值上都是稳定的。

比较两个模型的预测精度，并假设两者都经过适当的配置和训练，***SVM 将优于 NN*。**

SVM 相对于 NN 的卓越分辨率在[科学文献](http://www.nature.com/ki/journal/v69/n1/full/5000010a.html)中有详细记载。确实，这样的比较取决于两个模型的数据、配置和参数选择。事实上，这种比较已经被广泛研究——也许是所有可以想象的参数空间——结果如此一致，即使在不切实际的情况下存在一些例外（尽管我不知道）也不应该干扰了 SVM 优于 NN 的结论。

*为什么 SVM 优于 NN？*

这两种模型基于根本不同的学习策略。

在 NN 中，调整网络权重（NN 的拟合参数，在训练期间调整）以使网络输出与实际值（目标）之间的平方和误差最小化。

相比之下，训练 SVM 意味着***直接从训练数据中明确确定决策边界***。这当然是构建 SVM 模型所需的优化问题的谓词步骤：最小化最大边距超平面和支持向量之间的总距离。

在实践中，虽然配置算法来训练 SVM 更难。原因是由于配置所需的参数数量很大（与 NN 相比）：

*   内核的选择

*   内核参数的选择

*   边距参数值的选择

# android - 为什么项目在 Android GridView 中滚动时会更改顺序？

> ID：10672273
> 
> 赞同：15
> 
> 时间：2012-05-20T09:27:25.400
> 
> 标签：android, android-gridview

我在 android 中有一个 GridView，我用从 xml 资源检索到的数据填充它。
例如，我在 GridView 中有 15 个项目按顺序放置。总高度超过了屏幕高度，所以我必须滚动才能看到其余的项目。
问题是当我向上滚动时，不可见行的顺序已经改变。这是一种神秘的行为，因为有时项目会相互交换行。这是我的`getView`方法：

```
public class ImageAdapter extends BaseAdapter {
        public ImageAdapter(Context c, NodeList cuu) {
                cu = cuu;
        }
        public int getCount() {
                Log.d("Node Count",cu.getLength()+"");
                return cu.getLength();
        }
        public Object getItem(int position) {
                return position;
        }
        public long getItemId(int position) {
                return position;
        }
        public View getView(int position, View convertView, ViewGroup parent) {
                View myView = convertView;
                if (convertView == null) {
                    Node nd = cu.item(position);
                    Log.d("nodes","Pos: "+(position)+" Name: "+nd.getNodeName()+" Title: "+nd.getAttributes().getNamedItem("title").getTextContent());
                    int catID = Integer.parseInt(nd.getAttributes().getNamedItem("id").getTextContent());
                    LayoutInflater li = getLayoutInflater();
                    myView = li.inflate(R.layout.grid_item, null);
                   ImageView imageView = (ImageView) myView.findViewById(R.id.grid_item_image);
                   myView.setLayoutParams(new GridView.LayoutParams(70, 100));
                   id.download(nd.getAttributes().getNamedItem("icon").getTextContent(),imageView);
                   TextView textView = (TextView) myView.findViewById(R.id.grid_item_text);
                   textView.setText(nd.getAttributes().getNamedItem("title").getTextContent());
                   myView.setTag((Object) catID);
                }else{
                    //Log.d("nodes","Pos: "+(position));
                }
                return myView;
        }
        private NodeList cu = null;
    } 
```

**更新：**嗯，这很奇怪。经过更多调试后，我注意到在 GridView 中，适配器跳过了第 13 个位置，这意味着它返回 1 而不是 13，然后移动到 14！（我猜 13 是运气不好！）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-08T09:48:25.190

```
public View getView(int position, View convertView, ViewGroup parent) {
    View view;
    if (convertView == null) {
        view= inflate your xml
    } else {
        view=convertView;
    }
    // all remaining code like 
    // view.findViewById(R.id.btn).setText("MyButton");                            
    // must be outside if-else
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-20T11:49:22.430

如果这是您在`getView`方法中拥有的所有代码，那么您没有正确实施它：

```
public View getView(int position, View convertView, ViewGroup parent) {
        View myView = convertView;
        if (myView == null) {           
            Node nd = cu.item(position);
            int catID = Integer.parseInt(nd.getAttributes().getNamedItem("id")
                    .getTextContent());
            LayoutInflater li = getLayoutInflater();
            myView = li.inflate(R.layout.grid_item, null);
            myView.setLayoutParams(new GridView.LayoutParams(70, 100));         
            myView.setTag((Object) catID);
        } 
        Node nd = cu.item(position);
        Log.d("nodes", "Pos: " + (position) + " Name: " + nd.getNodeName()
                + " Title: "
                + nd.getAttributes().getNamedItem("title").getTextContent());
        ImageView imageView = (ImageView) myView
                .findViewById(R.id.grid_item_image);
        id.download(nd.getAttributes().getNamedItem("icon")
                .getTextContent(), imageView);
        TextView textView = (TextView) myView
                .findViewById(R.id.grid_item_text);
        textView.setText(nd.getAttributes().getNamedItem("title")
                .getTextContent());
        return myView;
    } 
```

我不知道上面的代码是否有效，你的有点奇怪。无论如何，我认为您看到的行为是正常的，因为您在适配器中所做的一切都是填充第一个可见元素，然后由于回收，当您上下滚动时，适配器将重用**完全相同的元素。**在`getView`你应该：

*   检查是否`convertView`是`null`：
    *   如果是`null`时候`View`为 this`GridView`的元素添加一个新的了。您还可以使用持有人模式来缓存寻找组成`Views`（而不是`findViewById`每次都搜索）（您使用`setTag`元素作为膨胀视图，但它是来自数据元素的一条`Node`数据？！？你打算用它做什么？！？）
    *   如果不是`null`，您将什么也不做（或者如果您实现持有人模式，您将获得带有已搜索标签的标签`Views`）

这就是你在 if/else 语句中应该做的事情

*   在上面的部分之后，您将填充`Views`数据（因此它们为该位置保存适当的数据）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-11T17:18:14.727

我刚刚删除了

```
if(convertView==null) 
```

有用

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-20T11:43:01.773

您的适配器实现存在致命缺陷。

在`getView()`, if `convertView`is 中`null`，您膨胀布局并填充其小部件。这可以。

在`getView()`, 如果`convertView`不是`null`, 你绝对什么也不做。这是非常错误的。

如果不是，您*应该*做的*仍然是填充单元格的小部件*。表示要回收的单元格，因此您可以跳过通货膨胀并节省 CPU 时间，但您仍然必须更新该单元格的小部件以反映您应该在此特定调用中设置的任何位置。`getView()``convertView``null`*`convertView``getView()`*

 ** * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-29T00:34:57.233

如果您的 Grid 项目**中有多个视图，**您可以使用`getTag()`和`setTag()`方法。在这种情况下，网格项目不会再在滚动时改变它们的位置，并且性能仍然很好：

```
public class SomeAdapter extends BaseAdapter {

    public static class ViewHolder {
        public TextView tvTitle;
        public ImageView imgPoster;
    }

    //...
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder grid;
        LayoutInflater inflator = activity.getLayoutInflater();

        if (convertView == null) {
            grid = new ViewHolder();
            convertView = inflator.inflate(R.layout.grid_item, null);
            grid.tvTitle = (TextView) convertView.findViewById(R.id.tv_title);
            grid.imgPoster = (ImageView) convertView.findViewById(R.id.img_poster);

            convertView.setTag(grid);   // <<-- H E R E
        } else {
            grid = (ViewHolder) convertView.getTag();   // <<-- H E R E
        }
        grid.tvTitle.setText(dataItem.getTitle());
        grid.imgPoster.setImage(dataItem.getImage());
        return convertView;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-02T20:09:17.250

我使用了这个解决方案，基于另一个样本，并且工作：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View view = null;
    if (convertView == null) {
        view = inflate your xml and apply the View Holder pattern
    } else {
        view = convertView;
    }
    // retrieve the object by Holder pattern 
    // extra code here
} 
```*

# asp.net-mvc - 如何在c#中查询类继承？

> ID：10672279
> 
> 赞同：2
> 
> 时间：2012-05-20T09:28:31.060
> 
> 标签：asp.net-mvc, linq, inheritance, reflection

有没有办法使用 linq 和反射查询有多少类继承了一个类？例如。如何知道 System.Web.Mvc.dll 中继承自 System.Web.Mvc.ActionResult 的类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:49:07.003

您可以使用两种方法来做到这一点，1\. [`IsAssignableFrom`](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx), 2\. `assembly.GetTypes`：

```
var t = typeof(System.Web.Mvc.ActionResult);
var asmb = Assembly.GetAssembly(t);
return asmb.GetTypes().Where(x=>x.IsAssignableFrom(t) && x != t); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:07:43.447

如果您只想检索类而不是接口（IsAssignablefrom 也返回接口），您应该尝试

```
var t = typeof(System.Web.Mvc.ActionResult);
var asmb = Assembly.GetAssembly(t);//or get all assemblies you need and put next code in loop
return asmb.GetTypes().Where(x=>x.IsSubClassOf(t)).ToList(); 
```

# css - 如何使 div 拉伸以适应 textarea 的高度？

> ID：10672280
> 
> 赞同：0
> 
> 时间：2012-05-20T09:28:47.317
> 
> 标签：css, html

我有以下内容：

```
 <div id="tab-notes" class="clearfix">
                <textarea cols=100 rows=15 class="full-width" id="dialogNotes" name="Pages">@Model.Notes</textarea>
        </div> 
```

我添加了一个 clearfix 类，但似乎 DIV 没有拉伸到适合 textarea 的高度。我缺少一些简单的东西吗？

```
.clearfix:after, .block-controls:after, .side-tabs:after {
    clear: both;
    content: " ";
    display: block;
    font-size: 0;
    height: 0;
    line-height: 0;
    visibility: hidden;
    width: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:36:48.293

如果真的没有任何其他影响这些元素的css规则，给你`#tab-notes`一个`background-color`你会看到它*确实延伸到textareas高（就像它应该的那样）。*

你可以在这里看到它的作用：http: [//jsfiddle.net/Mqke4/](http://jsfiddle.net/Mqke4/)

仅给出此代码段，clearsfix 似乎毫无意义，并且没有改变任何东西（[http://jsfiddle.net/Mqke4/1/](http://jsfiddle.net/Mqke4/1/)）。鉴于此，必须为`.full-width`, `#tab-notes`, `#dialogNotes`（或类似的东西）定义导致此问题的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:36:22.147

你的 textarea 是用`float: left`or应用的`float: right`吗？

如果是这样，请从 textarea 中删除 float 属性。

但是，如果您必须使用该属性，解决问题的最简单方法是将 也应用`float:`到您的 div 中。

或者您可以使用更改您的 div 的显示类型以阻止`display: block`

还有更多方法可以解决这个问题。
但我认为这些是最简单的。

# android - 使用 onClick 回调时，我的 android 应用程序崩溃

> ID：10672285
> 
> 赞同：-1
> 
> 时间：2012-05-20T09:30:24.317
> 
> 标签：android, nullpointerexception

当我点击提交时，我的应用程序崩溃了`Button`，看看 qf.xml 和 Math.java ，因为那是它崩溃的地方，下面的文本来自`logcat`（从应用程序的初始化直到它崩溃）：

```
05-20 12:08:11.671: D/libEGL(22022): 加载 /system/lib/egl/libGLES_android.so
05-20 12:08:11.686: D/libEGL(22022): 加载 /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
05-20 12:08:11.694: D/libEGL(22022): 加载 /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
05-20 12:08:11.694: D/libEGL(22022): 加载 /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
05-20 12:08:11.866: D/OpenGLRenderer(22022): 启用调试模式 0
05-20 12:08:16.514：D/OpenGLRenderer(22022)：刷新缓存（模式 0）
05-20 12:08:22.335: D/AndroidRuntime(22022): 关闭虚拟机
05-20 12:08:22.335: W/dalvikvm(22022): threadid=1: 线程以未捕获的异常退出 (group=0x40a421f8)
05-20 12:08:22.342: E/AndroidRuntime(22022): 致命异常: main
05-20 12:08:22.342: E/AndroidRuntime(22022): java.lang.NullPointerException
05-20 12:08:22.342: E/AndroidRuntime(22022): at com.wael.test.Math$1$1.onClick(Math.java:85)
05-20 12:08:22.342: E/AndroidRuntime(22022): 在 android.view.View.performClick(View.java:3511)
05-20 12:08:22.342: E/AndroidRuntime(22022): 在 android.view.View$PerformClick.run(View.java:14105)
05-20 12:08:22.342: E/AndroidRuntime(22022): 在 android.os.Handler.handleCallback(Handler.java:605)
05-20 12:08:22.342: E/AndroidRuntime(22022): 在 android.os.Handler.dispatchMessage(Handler.java:92)
05-20 12:08:22.342: E/AndroidRuntime(22022): 在 android.os.Looper.loop(Looper.java:137)
05-20 12:08:22.342: E/AndroidRuntime(22022): 在 android.app.ActivityThread.main(ActivityThread.java:4424)
05-20 12:08:22.342: E/AndroidRuntime(22022): 在 java.lang.reflect.Method.invokeNative(Native Method)
05-20 12:08:22.342: E/AndroidRuntime(22022): 在 java.lang.reflect.Method.invoke(Method.java:511)
05-20 12:08:22.342: E/AndroidRuntime(22022): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-20 12:08:22.342: E/AndroidRuntime(22022): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-20 12:08:22.342: E/AndroidRuntime(22022): at dalvik.system.NativeStart.main(Native Method)
05-20 12:08:23.913: I/Process(22022): 发送信号。PID：22022 SIG：9

```

这是 Math.java 的代码：

```
 package com.wael.test;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.text.InputType;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import com.wael.first.app.R;

public class Math extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.math);
        final Button button1 = (Button) findViewById(R.id.lf);
        final Button button2 = (Button) findViewById(R.id.qf);
        button1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click
                setContentView(R.layout.qf);
                final Button submit1 = (Button) findViewById(R.id.qfButton);
                final EditText ix = (EditText) findViewById(R.id.lfET1);
                final EditText ia = (EditText) findViewById(R.id.lfET2);
                final EditText ib = (EditText) findViewById(R.id.lfET3);
                final TextView result = (TextView)                                   findViewById(R.id.tvResultQf);
            // setting EditText input type
            ix.setInputType(InputType.TYPE_CLASS_NUMBER);
            ia.setInputType(InputType.TYPE_CLASS_NUMBER);
            ib.setInputType(InputType.TYPE_CLASS_NUMBER);
            submit1.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Boolean TF = true;
                    String sx = String.valueOf(ix);
                    String sa = String.valueOf(ia);
                    String sb = String.valueOf(ib);
                    if (sx.matches("")) {
                        TF = false;
                        Context context =  getApplicationContext();
                        CharSequence text = "Enter a value in x";
                        int duration = Toast.LENGTH_SHORT;

                        Toast toast = Toast.makeText(context, text,
                                duration);
                        toast.show();
                    }
                    if (sa.matches("")) {
                        TF = false;
                        Context context = getApplicationContext();
                        CharSequence text = "Enter a value in a";
                        int duration = Toast.LENGTH_SHORT;

                        Toast toast = Toast.makeText(context, text,
                                duration);
                        toast.show();
                    }
                    if (sb.matches("")) {
                        TF = false;
                        Context context = getApplicationContext();
                        CharSequence text = "Enter a value in b";
                        int duration = Toast.LENGTH_SHORT;

                        Toast toast = Toast.makeText(context, text,
                                duration);
                        toast.show();
                    }
                    if (TF == true) {
                        double x = Double.parseDouble(ix.getText()
                                .toString());
                        double a = Double.parseDouble(ia.getText()
                                .toString());
                        double b = Double.parseDouble(ib.getText()
                                .toString());
                        double y = a * x + b;
                        String sy = String.valueOf(y);
                        result.setText(sy);
                    }
                }

            });
        }
    });
    button2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Perform action on click
            setContentView(R.layout.qf);
            final Button submit2 = (Button) findViewById(R.id.qfButton);
            final EditText ix = (EditText) findViewById(R.id.qfET1);
            final EditText ia = (EditText) findViewById(R.id.qfET2);
            final EditText ib = (EditText) findViewById(R.id.qfET3);
            final EditText ic = (EditText) findViewById(R.id.qfET4);
            final TextView result = (TextView) findViewById(R.id.tvResultLf);
            // setting EditText input type
            ix.setInputType(InputType.TYPE_CLASS_NUMBER);
            ia.setInputType(InputType.TYPE_CLASS_NUMBER);
            ib.setInputType(InputType.TYPE_CLASS_NUMBER);
            ic.setInputType(InputType.TYPE_CLASS_NUMBER);

            submit2.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Boolean TF = true;
                    String sx = String.valueOf(ix);
                    String sa = String.valueOf(ia);
                    String sb = String.valueOf(ib);
                    String sc = String.valueOf(ic);
                    if (sx.matches("")) {
                        TF = false;
                        Context context = getApplicationContext();
                        CharSequence text = "Enter a value in x";
                        int duration = Toast.LENGTH_SHORT;

                        Toast toast = Toast.makeText(context, text,
                                duration);
                        toast.show();
                    }
                    if (sa.matches("")) {
                        TF = false;
                        Context context = getApplicationContext();
                        CharSequence text = "Enter a value in a";
                        int duration = Toast.LENGTH_SHORT;

                        Toast toast = Toast.makeText(context, text,
                                duration);
                        toast.show();
                    }
                    if (sb.matches("")) {
                        TF = false;
                        Context context = getApplicationContext();
                        CharSequence text = "Enter a value in b";
                        int duration = Toast.LENGTH_SHORT;

                        Toast toast = Toast.makeText(context, text,
                                duration);
                        toast.show();
                    }
                    if (sc.matches("")) {
                        TF = false;
                        Context context = getApplicationContext();
                        CharSequence text = "Enter a value in c";
                        int duration = Toast.LENGTH_SHORT;

                        Toast toast = Toast.makeText(context, text,
                                duration);
                        toast.show();
                    }
                    if (TF == true) {
                        double x = Double.parseDouble(ix.getText()
                                .toString());
                        double a = Double.parseDouble(ia.getText()
                                .toString());
                        double b = Double.parseDouble(ib.getText()
                                .toString());
                        double c = Double.parseDouble(ic.getText()
                                .toString());
                        double y=a*(x*x)+b*x+c;
                        String sy = String.valueOf(y);
                        result.setText(sy);
                    }
                }

            });
        }
    });
} 
```

}

这是 qf.xml（布局）的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/lf"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Space
    android:layout_width="fill_parent"
    android:layout_height="10dp" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/enter_all"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#FF0000" />

<Space
    android:layout_width="fill_parent"
    android:layout_height="20dp" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/x"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/lfET1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:digits="true"
    android:ems="10"
    android:hint="@string/x"
    android:inputType="number" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/a"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/lfET2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:digits="true"
    android:ems="10"
    android:hint="@string/b"
    android:inputType="number" >
</EditText>

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/b"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/lfET3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:digits="true"
    android:ems="10"
    android:hint="@string/a"
    android:inputType="number" />

<Space
    android:layout_width="fill_parent"
    android:layout_height="20dp" />

<Button
    android:id="@+id/qfButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@string/sub" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/y"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/tvResultLf"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:36:22.087

A`NullPointerException`表示您试图访问尚未初始化的内容。例如，如果您执行以下操作：

```
Button myButton = null;
myButton.setText("some text"); 
```

它在语法上是正确的，但`myButton`在 UI 上没有引用任何内容，因此尝试更改未初始化对象的属性会使您的应用程序崩溃。由于我还看不到您的代码，因此这只是可能导致该异常的示例。

从关于`NullPointerException`

> 当程序尝试访问对象的字段或方法或数组的元素时，如果没有实例或数组可供使用，即**对象或数组指向 null 时抛出**。它也发生在其他一些不太明显的情况下，例如 Throwable 引用为空的 throw e 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:21:44.167

**编辑：** 在`OnClickListener`第一个`Button` *button1*中，您搜索带有 id 的`TextView`（*结果*），`tvResultQf`但您的`R.layout.qf`布局中没有一个（您有一个带有 id 的`tvResultLf`，可能是错字？），当您尝试使用它时设置 text( `result.setText(sy);`) 它会抛出`NullPointerException`.

同样在`OnCLickListener`button2`Button` *中*，您搜索`EditText`带有 id的 an，`qfET4`但`R.layout.qf`布局中没有，因此当您尝试设置 inputType( `ic.setInputType(InputType.TYPE_CLASS_NUMBER);` ) 时，它会再次抛出 a `NullPointerException`。

可能还有其他错误，这只是快速浏览。

* * *

您没有指出哪一行`85`（引发异常），但我猜您的`TextView` *结果*是`null`当您尝试在该行上设置文本时：

```
result.setText(sy);// the last line in your code 
```

如果这是行`85`，则检查布局`R.layout.qf`并查看是否有`TextView`id `tvResultLf`。如果你有它，那么也尝试通过转到菜单`Project`->来清理项目`Clean`。

如果这不起作用，请发布`R.layout.qf`文件的布局。

# php - PHP preg_replace 替换文本，除非在括号内

> ID：10672286
> 
> 赞同：1
> 
> 时间：2012-05-20T09:30:25.910
> 
> 标签：php, regex, string-matching, assertions, replace

我想使用 PHP`preg_replace()`在文本中搜索某个单词的出现，并将该单词括在括号中，除非已经存在括号。这里的挑战是我想测试可能与我正在寻找的文本直接相邻或不直接相邻的括号。

随机示例：我想替换`warfarin`为`[[warfarin]]`

1.  在这个字符串中：`Use warfarin for the prevention of strokes`
2.  但**不在**此字符串中：（`Use [[warfarin]] for the prevention of strokes`括号已存在）
3.  也不**在**这个字符串中：（`Use [[generic warfarin formulation]] for the prevention of strokes`'remote' 括号已经存在）

我可以使用lookbehind 和lookahead 断言来满足前两个要求：

```
php > echo preg_replace( "/(?<!\[\[)(warfarin)(?!]])/", "[[$1]]", "Use warfarin for the prevention of strokes" );
Use [[warfarin]] for the prevention of strokes
php > echo preg_replace( "/(?<!\[\[)(warfarin)(?!]])/", "[[$1]]", "Use [[warfarin]] for the prevention of strokes" );
Use [[warfarin]] for the prevention of strokes 
```

但是我需要您对第三个要求的帮助，即当存在“远程”括号时不要添加括号：

```
php > echo preg_replace( "/(?<!\[\[)(warfarin)(?!]])/", "[[$1]]", "Use [[generic warfarin formulation]] for the prevention of strokes" );
Use [[generic [[warfarin]] formulation]] for the prevention of strokes 
```

在最后一个示例中，不应将方括号**添加**到单词中，`warfarin`因为它包含在已包含在括号中的较长表达式中。

问题是 PHP 的正则表达式断言必须有固定的长度，否则会很简单。

我正在使用

```
PHP 5.3.10-1ubuntu3.1 with Suhosin-Patch (cli) (built: May  4 2012 02:20:36) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:54:55.680

这就是我会做的。

```
$str = 'Use warfarin for the prevention of strokes. ';
$str .= 'Use [[warfarin]] for the prevention of strokes. ';
$str .= 'Use [[generic warfarin formulation]] for the prevention of strokes';
$arr = preg_split('/(\[\[.*?\]\])/',$str,-1,PREG_SPLIT_DELIM_CAPTURE);
// split the string by [[...]] groups
for ($i = 0; $i < count($arr); $i+=2) {
    // even indexes will give plain text parts
    $arr[$i] = preg_replace('/(warfarin)/i','[[$1]]',$arr[$i]);
    // enclose necessary ones by double brackets
}
echo '<h3>Original:</h3>' . $str;
$str = implode('',$arr); // finally join them
echo '<h3>Changed:</h3>' . $str; 
```

将导致

> ### 原来的：
> 
> 使用华法林预防中风。使用 [[华法林]] 预防中风。使用 [[通用华法林制剂]] 预防中风
> 
> ### 改变：
> 
> 使用 [[华法林]] 预防中风。使用 [[华法林]] 预防中风。使用 [[通用华法林制剂]] 预防中风

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T09:54:10.970

试试这个：

```
echo preg_replace( "/(warfarin)([^\]]+(\[|$))/", "[[$1]]$2", "Use generic warfarin[[ formulation for]] the prevention of strokes\n" ); 
```

我假设没有左括号就不会出现任何右括号的情况。

# linker - FMDB：链接器命令失败，退出代码为 1

> ID：10672287
> 
> 赞同：2
> 
> 时间：2012-05-20T09:30:36.290
> 
> 标签：linker, command, fmdb

我尝试使用 FMDB 数据库，但出现错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_FMDatabase", referenced from:
      objc-class-ref in MainViewAppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经添加了 src 目录，除了：fmdb.m, libsqlite3.0.dylib 到我的库中，我已经在我的 Appdelegate.h 中导入了“FMDatabase.h”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T22:17:29.653

此问题是由 FMDB 无法找到 libsqlite3.0.dylib 库引起的。单击项目导航器顶部的项目，将其导入您的项目，单击“构建阶段”选项卡，然后单击加号按钮将其添加到“将二进制文件与库链接”部分下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:39:34.697

我只能猜测，但我认为您在将文件添加到项目时错过了“添加到目标”复选框。您也可以在文件检查器的目标成员块中选中此复选框（如果您在导入时忘记执行此操作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-25T03:44:14.123

此问题是由 FMDB 无法找到**liFMDB-IOS.a**库引起的。将其导入您的项目，单击项目导航器顶部的项目，单击“构建阶段”选项卡，然后单击加号按钮将其添加到“将二进制文件与库链接”部分下。

# iphone - 像现在播放视图一样的 Spotify/iPod

> ID：10672288
> 
> 赞同：0
> 
> 时间：2012-05-20T09:30:47.407
> 
> 标签：iphone, ios

我正在开发一个广播应用程序，它可以从互联网上流式传输 mp3。我有一个自定义视图来控制播放（播放/停止）。

我想用音量控制器视图在按钮上实现 Spotify 之类的“正在播放”视图。我知道可以使用 MPMoviePlayerViewController，但是这个视图不像 Spotify/iPod。

有人知道如何解决这个问题吗？我可以重复使用 Apple API 中的视图吗？

![视图的屏幕截图](../Images/0dfe3aa5effcc109678ad558aed3a986.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:18:56.543

你需要自己制作这个视图，但还有什么是新的。

至于音量视图，最容易使用的是这个，它与 AirPlay 配合得很好：

[http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPVolumeView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPVolumeView_Class/Reference/Reference.html)

# module - Verilog：将向量作为端口传递给模块

> ID：10672296
> 
> 赞同：0
> 
> 时间：2012-05-20T09:32:47.340
> 
> 标签：module, verilog, xilinx, lcd, spartan

我有两个模块

1.  计数器：输出是一个称为 error_count 的向量。
2.  lcd：在 LCD 上显示代码的模块。输入包括时钟和error_count。

以下代码片段最相关并附在下面：

1.  顶层模块：

    ```
    计数器 counter1 (..., error_count);
    lcd lcd1 (..., error_count);
    ```

2.  计数器模块：

    ```
    模块计数器（...，error_count）；
    ...
    输出 reg [31:0] error_count = 0;
    ... //每个时钟周期更新计数器
    端模块

    ```

3.  液晶模组：

    ```
    模块 lcd (..., error_count);
    ...
    输入 [31:0] 错误计数；
    ... //error_count 用于在 LCD 上显示
    端模块

    ```

这段代码有什么问题？显示器只打印 0 作为输出。我传递向量的方式有什么问题吗？

附加信息：我正在使用 Xilinx Spartan 3E 入门套件来测试此代码。LCD 代码很好，我已经用本地计数器（reg[31:0]）对其进行了测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T12:21:23.067

您需要在顶层模块中声明 32 位线以连接两个端口。

`wire [31:0] error_count;`

如果您忽略它，则会声明一个隐式网络，它只是一个 1 位线，并且不会正确连接向量。

这个错误是一个经典的 Verilog 陷阱。这里的演示文稿很好地解释了这个和其他：

[http://www.sutherland-hdl.com/papers/2006-SNUG-Boston_standard_gotchas_presentation.pdf](http://www.sutherland-hdl.com/papers/2006-SNUG-Boston_standard_gotchas_presentation.pdf)

# qt - Qt 独立 qmainwindows 的父子关系

> ID：10672302
> 
> 赞同：2
> 
> 时间：2012-05-20T09:33:31.537
> 
> 标签：qt, window, parent-child

使用 Pyside，但一般 Qt 问题：

我正在构建一个带有控制 QMainWindow 的 Qt 应用程序。从这个窗口，用户可以打开其他 QMainWindows（或 QDialogs），并从其中一些她可以打开更多。用户打算将第一个 QMainWindow 视为“应用程序”，而将其他 QMainWindow 视为对或多或少相同数据的许多不同视图。

所以我希望所有的窗口都可以独立堆叠，这​​样用户就可以根据自己的要求设置屏幕。特别是，如果需要，我希望用户能够将第一个 QMainWindow 置于顶部。但是我真的不希望每个窗口都有自己的任务栏条目（尽管我可以忍受）。此外，我希望它们一起最小化和恢复，并且我希望它们在第一个主窗口关闭时全部关闭。

如果我将它们全部放在第一个主窗口上，它会很好地工作，只是它们留在上面，这不是我想要的。

相反，我通过使它们都独立于 parent = None 来使其工作。然后我将它们全部注册到主窗口并在它关闭时将它们全部关闭。但这使它们有点过于独立——它们分别最小化并有自己的任务栏条目。

我错过了一些明显的解决方法吗？有什么简单的方法（一面旗帜？）来阻止孩子们站在父母的头上吗？

或者是否有一些我想要打破的 UI 指南？

或者是否有更清洁的设计？我想添加一个他们都可以继承的虚拟父母，但也许这很混乱。那位父母需要视觉上的存在吗？我不想那样。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:18:58.190

您可以拥有任意数量的 QMainWindows，或无父 QWidget。我认为处理您的情况的最佳方法是创建自己的伪父子关系，如下所示：

在您的 QMainWindow 子类中，存储您希望它管理的所有 QWidget 的 QList。然后，再次在您的 QMainWindow 子类中，重新实现方法，例如`QWidget::closeEvent()`，`QWidget::hideEvent()`（当窗口最小化时）和`QWidget::showEvent()`（当它恢复时），以便它也关闭、隐藏或显示其 QList 中的所有小部件。确保`delete`它们也在 QMainWindow 子类的析构函数中。现在，每当您创建子窗口时，将主窗口的指针传递给它，**而不是作为普通的 QWidget child**，而只是为了可以将其添加到主窗口的 QWidget 的 QList 中进行管理。例如：

```
MainWindowSubclass::addPseudoChild(QWidget *pseudoChild)
{
    myListOfPseudoChildren.append(pseudoChild);
} 
```

尚未提及的另一种替代方法是使用[QMdiSubWindows](http://qt-project.org/doc/qt-4.8/qmdiarea.html)填充[QMdiArea](http://qt-project.org/doc/qt-4.8/qmdisubwindow.html)。它并没有完全按照你的要求做，但它仍然是一个非常干净的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T22:08:57.857

所以我想我会添加我最终确定的内容。这特别受到@leemes 的评论（谢谢 - 好东西）和我自己的一些实验的启发。

我使用此处附加的代码[DetachTabExample](http://www.qtcentre.org/threads/50024-Drag-n-drop-Tab-inside-and-outside-the-Main-Application?p=225235#post225235%7CThread) 来开发“可拆卸标签”小部件和标签栏。这允许选项卡在成为独立窗口时被拖到主窗口之外。然后，如果关闭，它们将返回标签栏。

Then I placed all my content in the `QMainWindow` but in separate tabs. The users can drag the ones they want out on to the other monitor. Seems to be working fine. There are still some extra windows that I have floating but it has cut down the clutter and clarified the structure.

# html - IE6（及更早版本）中的 Nowrap 继承错误

> ID：10672309
> 
> 赞同：3
> 
> 时间：2012-05-20T09:34:45.067
> 
> 标签：html, css, internet-explorer, internet-explorer-6

我有一些任务来制作一个旋转木马，它可以容纳几个未定义宽度的元素。所以，最简单的方法——通过 CSS 将所有元素排成一行，然后进行所有 JS 计算等等。在（错误生成器）IE6 中进行测试之前，一切都很顺利。

这是浏览器中发生的示例：

Safari (5.1.2)、Firefox (10.0.2)、Opera (11.62) ![Safari 5.1.2](../Images/3d1424d671c0e2e354a8775e8aedf5f8.png)

互联网浏览器 (9.1) ![互联网浏览器 9.1](../Images/d5d4e6ebe1df25c2037036a4f282de27.png)

**Internet Explorer (6)** (span bump li box 中的文字) ![跨度凹凸 li 框中的文本 — Internet Explorer 6](../Images/001f8da906e298e1612dd794dcf5bc05.png)

关于 LI 的 DebugBar，它忽略了预设规则**white-space: normal** — Internet Explorer 6 ![关于 LI 的 DebugBar — Internet Explorer 6](../Images/a1e275ca9b7d30a310372da98e60488e.png)

关于 SPAN 的 DebugBar，它忽略了继承预设规则**white-space: normal** — Internet Explorer 6 ![关于 SPAN 的 DebugBar — Internet Explorer 6](../Images/53f107b2ac00c5a730e0191085149844.png)

这里的 HTML 示例：

```
<div class="carousel">
  <div class="box">
    <ul>
      <li>
        <span>Some text</span>
      </li>
      <li>
        <span>Some longer text</span>
      </li>
      <li>
        …
      </li>
    </ul>
  </div>
</div> 
```

这是管理它的 CSS 的一部分：

```
div.carousel {
  width: 700px; height:200px;
  }
  div.carousel div.box {
    width: 100%; height: 100%;
    overflow: hidden;
    }
    div.carousel div.box ul {
      display: block; 
      white-space: nowrap; /* to make all inside elements lay in row */
      }
      div.carousel div.box ul li {
        margin-left: 23px;
        width: 130px; height: 150px;
        display: inline-block;
        vertical-align: bottom;
        white-space: normal;
        } 
```

IE6 及更早版本的框更正：

```
div.carousel div.box ul li {
  display: inline;
  zoom: 1;
  } 
```

jsFiddle 中的[实时示例](http://jsfiddle.net/ZCuJT/73/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:39:27.250

见这个网址：[http ://cos.livejournal.com/36490.html](http://cos.livejournal.com/36490.html)

答案似乎是我们最喜欢的Quirks Mode。在 Quirks 模式下，IE 无法识别`white-space:normal`样式，但可以识别其他`white-space`样式，因此会出现级联问题。

解决方案是阻止 IE 进入怪癖模式。这就像在页面的开头添加一个有效的 Doctype 一样简单。

怪癖模式也可能会在您的页面中引入其他布局故障，因此这一修复应该可以解决您可能遇到的其他问题。

# arrays - 非常奇怪：每次更新数组时，它的值都会被搞砸

> ID：10672310
> 
> 赞同：0
> 
> 时间：2012-05-20T09:34:48.943
> 
> 标签：arrays, loops, mouse, raphael

你可以在那里看到代码：http: [//jsfiddle.net/jocose/CkL5F/901/](http://jsfiddle.net/jocose/CkL5F/901/) （双击框并移动鼠标）

注意：这是一个简化的示例，它是更大系统的一部分。我的最终目标是操纵路径的各个顶点。

**更新：我计算了数字，数学实际上似乎是正确的。我想要做的是计算每个点到鼠标的偏移量，然后将该点移动到鼠标位置+偏移量。因此，如果我有一个 224 的鼠标，那么 224-103 = 121 然后我添加： 121+224=345 这会产生我所看到的起伏循环。我不知道为什么这些让我如此难过，任何帮助将不胜感激。**

我需要手动更新 Raphael 路径元素。

为此，我使用 Raphael 强大的内置函数“parsePathString”将绝对路径转换为数组

然后我循环遍历该数组并根据鼠标位置修改值。

仅对 X 值进行更新，并且是实时的；每次鼠标移动时调用。

当元素移动时，它会在正确位置和某个异常位置之间来回闪烁。

我不知道它为什么这样做。我花了将近 5 个小时试图弄清楚这一点，但我被正式卡住了。

这是一个结果示例，您可以在其中看到值跳跃：

```
MOUSE224 
M,103.676287 
MOUSE225 
M,346.323713 
MOUSE227 
M,107.676287 
MOUSE228 
M,348.323713 12
MOUSE228 
M,107.676287 
MOUSE229 
M,350.323713
MOUSE231 
M,111.67S287 
MOUSE232 
M,3S2.323713
MOUSE233 
M,113.676287
MOUSE233 
M,3S2.323713 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T21:19:05.910

这是我修改后的[小提琴](http://jsfiddle.net/amadanNM/KHbWh/)版本，以执行我认为您需要的操作。至少，它似乎有效。这是我必须为 Raphael 2 转换修复的同一类型的[问题](https://stackoverflow.com/a/8190476/981898)。

基本上，在您的 mousemove 中，我已将 mx 更改为计算鼠标现在所在位置与上次调用 mousemove 所在位置之间的偏移量。您的 move() 函数现在只需将此值添加到 x 坐标。

希望这对您有所帮助

# php - while 里面 while php

> ID：10672312
> 
> 赞同：0
> 
> 时间：2012-05-20T09:34:56.457
> 
> 标签：php, list, while-loop

我们试图在一个while循环中加入一个while。第一个 while 运行，结果显示在列表中 (139, 140, 141)。第二个列表只显示一个值（第一个部队）。结果如下：
139
1 部队
140
141

所以似乎第二个 while 只执行一次。我能做些什么来解决这个问题？

```
echo "<ul>";            
            while($user = $allUsersintroops->fetch_assoc())
            {

                if($user['userid'] == $_SESSION['userid'])
                {   
                    echo "<li>" . $user['troopid'].  " </li>";

                    while ($mytroops = $alltroops->fetch_assoc()) 
                    {
                        if($user['troopid'] == $mytroops['troopid'])
                        {
                            echo "<li>" . $mytroops['description'].  " </li>";
                        }
                    }
                }   
            }           
echo "</ul>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:44:44.310

内部循环一旦`fetch_assoc`返回 false 就停止......但这表明所有找到的结果都结束了，并且它没有任何行可用于下一次迭代。

您应该将所有行从`$alltroops`一个数组中收集一次，然后对其进行迭代：

```
echo "<ul>";
$allTroopsList = array();
while ($mytroops = $alltroops->fetch_assoc()) {
  $allTroopsList []= $mytroops;
}
while($user = $allUsersintroops->fetch_assoc()) {
  if($user['userid'] == $_SESSION['userid']) {   
    echo "<li>" . $user['troopid'].  " </li>";

    foreach($allTroopsList as $mytroops) {
      if($user['troopid'] == $mytroops['troopid']) {
        echo "<li>" . $mytroops['description'].  " </li>";
      }
    }
  }   
}           
echo "</ul>"; 
```

Additionally, you should consider adding some filtering to your `$allUsersintroops` query, because you are only using a part of the the returned rows, which means the rest of the rows are sent from the DB to your code for no reason, wasting time and bandwidth.

# python - 布尔列表重置

> ID：10672313
> 
> 赞同：0
> 
> 时间：2012-05-20T09:34:58.047
> 
> 标签：python, python-3.x

有没有办法将下面的列表重置为所有“假”我有一个使用布尔列表的程序，例如

```
bat=[False,False,False,False,False,False,False,False,False,False,False] 
```

当主循环执行第二个团队的第二次迭代时，它仍然带有来自第一个团队的“True”值。我需要把它清理干净，这样第二队才能记录正确的分数。

任何帮助都感激不尽。干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T09:57:22.377

为什么不在每次迭代之前重新绑定变量？IE，

```
for team in teams:
    bat = [False] * 11
    # do whatever 
```

如果您必须就地重置列表，那就是

```
bat[:] = [False] * 11 
```

或者

```
bat[:] = [False] * len(bat) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T10:01:18.797

一个简单的列表理解应该可以解决问题：

```
bat = [False for _ in bat] 
```

或乘以`len`：

```
bat = [False] * len(bat) 
```

**编辑：**您应该`bat[:] =`用于这些作业（请参阅关于 larsmans 答案的评论了解原因）

# javascript - 如何使滚动到目标平滑

> ID：10672316
> 
> 赞同：0
> 
> 时间：2012-05-20T09:35:17.470
> 
> 标签：javascript, jquery, html

我设置了一个评论按钮，链接到页面的评论部分，就像这样评论

本页演示 [http://stramaxon.blogspot.com/2012/04/how-to-remove-shadows-from-pictures-in.html#disqus_thread](http://stramaxon.blogspot.com/2012/04/how-to-remove-shadows-from-pictures-in.html#disqus_thread)

当您单击它时，您将被带到评论部分，现在我希望滚动流畅，我知道这是可能的，但找不到实现它的关键。我确信 Stackoverflow 中的智能网页设计师会帮助我。

我希望它是这样的，请查看此页面[http://www.labnol.org/internet/bing-background-for-google-homepage/21303/](http://www.labnol.org/internet/bing-background-for-google-homepage/21303/)

向下滚动，您会看到一个返回顶部按钮，它非常流畅，我喜欢它并想要类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:54:45.237

```
$("#topBtn").click(scrollToTop);

function scrollToTop()
{
    $('html, body').animate({scrollTop:0}, 1000);
} 
```

应该管用

编辑：这是一个非href，当你想在href上使用它时，你应该像这样

```
function scrollToTop()
{
    $('html, body').animate({scrollTop:0}, 1000);
    return false;
} 
```

# jquery - 文本没有被切换回来

> ID：10672320
> 
> 赞同：1
> 
> 时间：2012-05-20T09:35:59.027
> 
> 标签：jquery, text, toggle

我有这个小切换脚本，它切换面板、类和文本。我在切换文本时遇到了麻烦。它在第一次单击时更改，但之后不会更改回来。

[这](http://jsfiddle.net/zXXUM/2/)是一个小提琴。这是相关的代码：

```
var visibleText = "Hide";
var hiddenText = "Show";
var textChange = $("#hidewrap a span");
var dynText = textChange.text() == visibleText ? hiddenText : visibleText;

textChange.text(dynText); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:47:52.500

首先，[这](http://jsfiddle.net/zXXUM/6/)是答案。

其次，解释：您检查`<span></span>`元素文本的逻辑在 $.ready 方法中。jQuery 在每次页面加载时在内部调用此方法一次，因此逻辑只会检查一次 span 的文本值。我只是将逻辑检查`var dynText = textChange.text() == visibleText ? hiddenText : visibleText;`移到 .click 中，这样每次单击链接时都会进行检查，而不是每次加载页面一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T09:45:58.307

[**工作演示小提琴链接在这里**](http://jsfiddle.net/rejRh/)

可见文本需要隐藏，隐藏应使用当前可见文本更新，

在单击的绑定事件中移动这 3 行将为您解决问题：

```
 var visibleText = $("#hidewrap a span").text();

    var dynText = textChange.text() == visibleText ? hiddenText : visibleText;
    hiddenText = textChange.text(); 
```

**jQuery代码**

```
$(document).ready(function() {
    var panel = $("#topnav nav");
    var button = $("#hidewrap");
    var hiddenClass = "hidden";
    var visibleText = $("#hidewrap a span").text(); //"Hide";
    var hiddenText = "Show";
    var textChange = $("#hidewrap a span");

    var classAdd = $("aside#topnav");

    button.click(function(e) {
        var visibleText = $("#hidewrap a span").text();

        var dynText = textChange.text() == visibleText ? hiddenText : visibleText;
        hiddenText = textChange.text();
        e.preventDefault();
        e.stopImmediatePropagation();

        textChange.text(dynText);
        classAdd.toggleClass(hiddenClass);
        panel.slideToggle("fast");
    });
});​ 
```

# python - 通过副本修改的numpy矩阵

> ID：10672322
> 
> 赞同：2
> 
> 时间：2012-05-20T09:36:04.877
> 
> 标签：python, numpy

在带有 numpy 1.5.1 的 python 2.7.1 中：

```
import numpy as np

B = np.matrix([[-float('inf'), 0], [0., 1]])
print B
Bm = B[1:, :]
Bm[:, 1] = float('inf')
print B 
```

返回

```
[[-inf   0.]
 [  0\.   1.]]
[[-inf   0.]
 [  0\.  inf]] 
```

这是非常出乎意料的，因为我认为 Bm 是一个副本（如在[这个问题](https://stackoverflow.com/questions/7869095/concatenate-numpy-arrays-without-copying)中）。

任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T10:06:04.630

[numpy 中的基本切片](http://docs.scipy.org/doc/numpy-1.6.0/reference/arrays.indexing.html#basic-slicing)返回一个视图，而不是切片 Python 列表，后者复制它们。

但是，如果使用高级切片，切片将*始终*复制数据，就像连接或附加 numpy 数组一样。

比较

```
a = np.arange(16).reshape((4,4))
a_view = a[::2, ::3]  # basic slicing
a_copy = a[[0, 2], :]  # advanced 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T09:48:26.457

在我的问题中，这是`np.append`在制作副本。切片不会复制数组/矩阵。

你可以`Bm`用

```
Bm = B[1:, :].copy() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T01:49:39.813

从 jorgeca 的例子来看，这很有趣：

```
a = np.arange(16).reshape((4,4))
a_view = a[::2, ::3]  # basic slicing
a_copy = a[[0, 2], :]  # advanced 
```

我的附加评论可能是题外话，但令人惊讶的是以下两者

```
a[::2, ::3]+= 1  # basic slicing
a[[0, 2], :]+= 1 # advanced 
```

将对 a 进行更改。

# python - Python：如何动态调用具有各种签名的方法

> ID：10672328
> 
> 赞同：0
> 
> 时间：2012-05-20T09:36:36.133
> 
> 标签：python

我正在用 Python 编写一个测试自动化工具。该工具的一个关键特性是通过具有各种签名的名称调用方法，就像 C# 反射所做的那样。然而，在阅读了一堆文章并做了几次测试之后，我未能找到处理各种签名的方法。

这是我的第一个想法——

```
def invoke(obj, method_name, *args):
    print type(args)
    method = getattr(obj, method_name)
    method(*args)

import sys
module = sys.modules[__name__]
invoke(module, 'foo', 1, 2) 
```

它确实有效。但问题是，通过名称调用的方法可以有不同数量的参数。然后我在想参数列表可以用一个元组表示，因为 args 的类型是一个元组。所以我改变了最后一行代码 -

```
invoke(module, 'foo', (1, 2)) # pass parameter list using a tuple (1, 2) 
```

但翻译告诉我——

```
Traceback (most recent call last):
  File "\Src\studies\dynamic_method_call.py", line 14, in <module>
    invoke(module, 'foo', (1, 2))
  File "\Src\studies\dynamic_method_call.py", line 9, in invoke
    print method(*args)
TypeError: foo() takes exactly 2 arguments (1 given) 
```

我还尝试了列表和关键字参数。他们都没有工作。请指教！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T09:44:10.957

为了将值元组“解包”为函数调用的参数，只需使用`*`，例如：

```
invoke(module, 'foo', *(1, 2)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:15:37.847

`invoke(module, 'foo', (1, 2))`扩大到`foo((1, 2))`如此`args`是`((1, 2),)`。那`foo`用一个参数调用，而不是两个参数，因此你的错误。

要么使用：

```
def invoke(obj, method_name, *args):
    method = getattr(obj, method_name)
    method(*args)

invoke(module, 'foo', 1, 2) 
```

或者

```
def invoke(obj, method_name, args):
    method = getattr(obj, method_name)
    method(*args)

invoke(module, 'foo', (1, 2)) 
```

# java - 访问 TextView 时出现 NullPointerException

> ID：10672338
> 
> 赞同：0
> 
> 时间：2012-05-20T09:38:52.587
> 
> 标签：java, android, android-service

我正在尝试从 java 中的布局访问 textview。访问它时，我的 logcat 中出现 NullPointerException。这是我的代码

```
public class GameActivity extends Activity {
TextView tv = (TextView)findViewById(R.id.ctry);

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tv.setText("Text");
}
} 
```

这是我的日志猫

```
05-20 12:32:57.808: D/AndroidRuntime(18776): Shutting down VM
05-20 12:32:57.808: W/dalvikvm(18776): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-20 12:32:57.808: E/AndroidRuntime(18776): FATAL EXCEPTION: main
05-20 12:32:57.808: E/AndroidRuntime(18776): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.zafar.game/com.zafar.game.GameActivity}: java.lang.NullPointerException
05-20 12:32:57.808: E/AndroidRuntime(18776):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at android.os.Looper.loop(Looper.java:130)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at java.lang.reflect.Method.invokeNative(Native Method)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at java.lang.reflect.Method.invoke(Method.java:507)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at dalvik.system.NativeStart.main(Native Method)
05-20 12:32:57.808: E/AndroidRuntime(18776): Caused by: java.lang.NullPointerException
05-20 12:32:57.808: E/AndroidRuntime(18776):    at android.app.Activity.findViewById(Activity.java:1653)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at com.zafar.game.GameActivity.<init>(GameActivity.java:11)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at java.lang.Class.newInstanceImpl(Native Method)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at java.lang.Class.newInstance(Class.java:1409)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-20 12:32:57.808: E/AndroidRuntime(18776):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
05-20 12:32:57.808: E/AndroidRuntime(18776):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T09:41:27.260

您应该`findViewById(R.id.ctry)`只在调用`setContentView(R.layout.main)`代码`onCreate()`后调用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T09:41:46.340

你不能打电话

```
TextView tv = (TextView)findViewById(R.id.ctry); 
```

前

```
setContentView 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T09:42:25.217

```
TextView tv = (TextView)findViewById(R.id.ctry); 
```

上面的线之后

```
setContentView(R.layout.main); 
```

**使用喜欢**

```
public class GameActivity extends Activity {

 TextView tv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv = (TextView)findViewById(R.id.ctry);
        tv.setText("Text");
    }

} 
```

**更新**

在`main.xml`

```
<Button android:id="@+id/match" ... /> 
```

# java - 如何实现两个具有相同名称和不同返回类型的方法？

> ID：10672339
> 
> 赞同：-4
> 
> 时间：2012-05-20T09:38:53.997
> 
> 标签：java, interface, return

我想知道是否可以实现这样的代码？

```
public interface A {
public void execute();
}

public interface B { 
    public String execute(); 
}

class C implements A, B {
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T09:42:26.917

不可以。这是不允许的，因为编译器无法判断`execute`您要使用哪个版本。

如果要重载方法，则需要改变方法参数，例如：

```
   公共无效执行（）；

   公共字符串执行（int someParam）；

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T11:57:36.027

不，你不能。

JLS 要求每种方法具有不同的签名：

> JLS 8.4 - *“类的主体将两个具有重写等效签名的方法声明为成员是编译时错误（第 8.4.2 节）。”*

其中 8.4.2 将*覆盖等效签名*指定为在类型擦除后具有相同方法名称和相同参数类型的方法签名。

# javascript - 在 JavaScript 对象字面量中组织方法和属性的最佳方式

> ID：10672340
> 
> 赞同：0
> 
> 时间：2012-05-20T09:38:55.790
> 
> 标签：javascript, oop, code-organization

组织 JavaScript 对象字面量的最佳方式是什么？

我通常会这样做：

```
var myObj = {
    property1 : 'string',
    property2 : true,
    method1 : function() {},
    method2 : function() {
        // Do something with method1 here
        method1();
    }
    init : function() {
        method2();
    }    
}; 
```

基本上，我在顶部有我的全局属性，方法如下。

另外，如果我有一个方法调用另一种方法，我会先编写较低级别的方法，然后再编写处理它的方法。这对我来说是合乎逻辑的，因为您首先阅读了更基本的功能，而不是使用它完成的操作。但是，我注意到比我更有经验的人会反过来做。

是否有正确的方法来做到这一点，还是选择问题？

另外，我注意到在教程中，人们通常会在某些方法（例如 build 方法或 init 方法）前加上下划线，例如`_bulid`or `_init`。这背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:48:33.300

这实际上取决于您的程序和编写代码的方式，因为[在 JS 中有很多方法可以命名空间](http://addyosmani.com/blog/essential-js-namespacing/)，而对象文字只是其中之一。

关于`_`前缀，JS 没有在“类”中创建“私有成员”的内置方法。你必须使用闭包来模拟这样的。否则，这意味着 JS 中的对象始终具有公开的属性和方法。作为一些约定，在它前面加上前缀`_`意味着成员被用作私有成员。

# sql - 这个 SQLAlchemy 相交有什么问题？

> ID：10672345
> 
> 赞同：0
> 
> 时间：2012-05-20T09:39:57.547
> 
> 标签：sql, sqlalchemy

我正在尝试与以下 2 个查询相交，但出现此错误：

> ProgrammingError：（ProgrammingError）（1064，“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在 'INTERSECT SELECT user_checkpoint.id AS user_checkpoint_id, user_checkpoint.user_' 行附近使用4" ）“SELECT anon_1.user_checkpoint_id AS anon_1_user_checkpoint_id，anon_1.user_checkpoint_user_id AS anon_1_user_checkpoint_user_id，anon_1.user_checkpoint_checkpoint_id AS anon_1_user_checkpoint_checkpoint_id，anon_1.user_checkpoint_date_added AS anon_1_user_checkpoint_date_added \ n从（SELECT user_checkpoint.id AS user_checkpoint_id，user_checkpoint.user_id AS user_checkpoint_user_id，user_checkpoint.checkpoint_id AS user_checkpoint_checkpoint_id，用户检查点。date_added AS user_checkpoint_date_added \nFROM user_checkpoint INNER JOIN checkpoint ON checkpoint.id = user_checkpoint.checkpoint_id INNER JOIN user AS user_1 ON user_checkpoint.user_id = user_1.id INNER JOIN facebook_user AS facebook_user_1 ON facebook_user_1.id = user_1.facebook_user_id INNER JOIN friend_connection ONfriend_connection.fb_user_to = facebook_user_1.id INNER JOIN facebook_user ON facebook_user.id =friend_connection.fb_user_from INNER JOIN user ON user.facebook_user_id = facebook_user.id \nWHERE user.id != %s AND checkpoint.creator = user_1.id AND checkpoint.demo = %s交叉选择 user_checkpoint.id AS user_checkpoint_id, user_checkpoint.user_id AS user_checkpoint_user_id, user_checkpoint.checkpoint_id AS user_checkpoint_checkpoint_id, user_checkpoint。date_added AS user_checkpoint_date_added \nFROM user_checkpoint INNER JOIN checkpoint ON checkpoint.id = user_checkpoint.checkpoint_id \nWHERE checkpoint.creator != %s AND checkpoint.demo = %s) AS anon_1 ORDER BY checkpoint.date_created DESC \n LIMIT %s' (185L , 0, 185L, 0, 1)

```
 #get checkpoints from users with friends
    FriendUserCheckpoint, FriendFacebookUser, FriendUser = aliased(UserCheckpoint), aliased(FacebookUser), aliased(User)
    q = (db.session.query(UserCheckpoint).
         join(Checkpoint, Checkpoint.id == UserCheckpoint.checkpoint_id).
         join(FriendUser, FriendUser.id == UserCheckpoint.user_id).
         join(FriendFacebookUser, FriendFacebookUser.id == FriendUser.facebook_user_id).
         join(FriendConnection, FriendConnection.fb_user_to == FriendFacebookUser.id).
         join(FacebookUser, FacebookUser.id == FriendConnection.fb_user_from).
         join(User, User.facebook_user_id == FacebookUser.id).
         filter(User.id != user_obj.id).
         filter(Checkpoint.creator == FriendUser.id).
         filter(Checkpoint.demo == False)
         )

    #get checkpoints from users without friends
    p = (db.session.query(UserCheckpoint).
         join(Checkpoint, Checkpoint.id == UserCheckpoint.checkpoint_id).
         filter(Checkpoint.creator != user_obj.id).
         filter(Checkpoint.demo == False)
         )

    w = q.intersect(p)

    return w.order_by(desc(Checkpoint.date_created)).limit(limit).all() 
```

我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:15:29.657

您的查询的问题是`order_by`：您尝试按不在查询中的列进行排序。您生成的`SQL`查询如下所示：

```
SELECT anon_1.col1, anon_1.col2, ...
FROM (
    SELECT  <UserCheckpoint columns>
    FROM    UserCheckpoint
    ... (joins, filters etc)

    INTERSECT

    SELECT  <UserCheckpoint columns>
    FROM    UserCheckpoint
    ... (joins, filters etc)
) anon_1
ORDER BY checkpoint.date_created DESC -- @note: here is the problem 
```

如您所见，外部查询`checkpoint`的源表列表中没有表（仅包含一个*表* `anon_1`）。删除`order_by`，我假设您的查询将起作用。

如果您需要 order_by，则更改查询以返回该`date_created`列，对结果进行排序，然后稍后删除该列：

```
q = (db.session.query(UserCheckpoint, Checkpoint.date_created).
...
p = (db.session.query(UserCheckpoint, Checkpoint.date_created).
...
return [uc for (uc, _) in w.order_by(desc(Checkpoint.date_created)).limit(limit).all()] 
```

# php - 有没有办法在一个文件中进行多个 phpt 测试？

> ID：10672346
> 
> 赞同：0
> 
> 时间：2012-05-20T09:40:19.663
> 
> 标签：php, unit-testing, phpt

有没有办法拥有多个块

```
--TEST--
...
--FILE--
...
--EXPECT--
... 
```

在一个 phpt 文件中？

像这样：

```
--TEST--
...
--FILE--
...
--EXPECT--
...

--TEST--
...
--FILE--
...
--EXPECT--
... 
```

我发现指令和示例在单个 --EXPECT-- 下测试了多行输出，但这不一样：

[http://qa.php.net/sample_tests/sample001.php](http://qa.php.net/sample_tests/sample001.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:17:29.077

如此[处](http://qa.php.net/phpt_details.php)所述，不可能在一个 PHPT 文件中包含多个 PHPT 测试。

如果您愿意对 Web 应用程序进行单元测试，那么您真的应该看看[PHPUnit](https://github.com/sebastianbergmann/phpunit)或[Atoum 。](https://github.com/mageekguy/atoum)

# iphone - Quartz：获取两个图像的差异图像

> ID：10672348
> 
> 赞同：5
> 
> 时间：2012-05-20T09:40:31.023
> 
> 标签：iphone, objective-c, ipad, image-processing, core-graphics

我关注了两张图片，背景可能是完全不同的图片，例如不仅仅是纯色。

![图片一](../Images/397458de729e6ef30f4d14c4fff2e2c0.png) ![在此处输入图像描述](../Images/e9b7c2a16db5fcfe0a7378fb65868379.png)

所以基本上我想得到这两个图像的差异图像，即

![在此处输入图像描述](../Images/e954e9ea0d2ece5e046f8dcd8d684109.png)

> 两个图像的差异图像是大小相同但像素设置为透明且未更改的图像。差异图像由具有第二张图像颜色的差异像素构成

我正在寻找基于核心图形技术的解决方案，请不要建议在循环中运行所有像素。我很关心表演。

由于我是 Quartz 的新手，所以我想知道是否可以使用遮罩来实现这一点？或者请提出另一种方法！

**使用差异混合模式的更新** 实际上，如果我使用差异混合模式，它并不能解决我的问题，因为它不能保持像素的正确颜色。如果我将差异混合模式应用于以上 2 张图像，我将得到以下信息

![在此处输入图像描述](../Images/597d308bdea0e48037d813734c8aac7f.png)

这似乎对像素有反转的颜色，然后如果我反转它们，我会得到关注

![在此处输入图像描述](../Images/245f3928998bfed04358dde83ee18bad.png)

这实际上不是我想要的，因为像素颜色完全不同

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T14:55:44.100

您可以使用 Core Graphics 混合任何绘图

```
CGContextSetBlendMode(kCGBlendModeDifference); 
```

通过绘制第一张图像，然后将混合模式设置为差异并绘制第二张图像，您将获得差异（正如我在评论中建议的那样）。这为您提供了一个倒置的图像（如您的更新问题中所示）。要反转图像，您可以使用白色填充相同的矩形（因为混合模式仍设置为“差异”）。

```
CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0);
CGContextFillRect(context, frame); 
```

* * *

执行所有这些操作的示例代码（在 drawRect 内部：）如下所示。

```
CGContextRef context = UIGraphicsGetCurrentContext();

// Your two images
CGImageRef img1 = [[UIImage imageNamed:@"Ygsvt.png"] CGImage];
CGImageRef img2 = [[UIImage imageNamed:@"ay5DB.png"] CGImage];

// Some arbitrary frame
CGRect frame = CGRectMake(30, 30, 100, 100);

// Invert the coordinates to not draw upside down
CGContextTranslateCTM(context, 0, frame.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

// Draw original image
CGContextDrawImage(context, frame, img1);

// Draw the second image using difference blend more over the first
CGContextSetBlendMode(context, kCGBlendModeDifference);
CGContextDrawImage(context, frame, img2);

// Fill the same rect with white color to invert 
// (still difference blend mode)
CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0);
CGContextFillRect(context, frame); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:03:56.550

感谢@David Rönnqvist 的提示，我的问题已解决 +2 给他 :)

我已经在我的博客中发布了解决方案[http://levonp.blogspot.com/2012/05/quartz-getting-diff-images-of-two.html](http://levonp.blogspot.com/2012/05/quartz-getting-diff-images-of-two.html)

# c# - C# SKYPE4COMLib Facebook

> ID：10672349
> 
> 赞同：1
> 
> 时间：2012-05-20T09:40:31.940
> 
> 标签：c#, facebook, skype, skype4com

我正在制作 SkypeBot，我也想回复 Facebook 消息。我正在使用 SKYPE4COMLib。但它仅适用于 Skype 协议。

```
skype.MessageStatus += new _ISkypeEvents_MessageStatusEventHandler(skype_MessageStatus);

// in event
skype.SendMessage(msg.Sender.Handle, message); 
```

或者我可以简单地通过 SkypeKitNET 制作它吗？

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:07:49.823

如果 Facebook 帐户已绑定到 Skype 帐户，则在 Skype 客户端中接收 Facebook 消息的方式与其他消息相同，并且可以以与普通 Skype 消息相同的方式处理这些消息。

值得注意的是，Skype 使用条款可能禁止使用桌面 API 的服务器实现。

SkypeKit 在许可协议中明确禁止任何服务器暗示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:53:21.817

只需使用 Facebook 库即可。例如：[http](http://csharpsdk.org/) ://csharpsdk.org/ 就可以同时运行这两个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T21:20:34.103

我使用 XMPP 库 agsXMPP SDK for .NET C# 感谢您的回复。

# php - PHP：将相对网址替换为文本区域中的绝对网址

> ID：10672356
> 
> 赞同：0
> 
> 时间：2012-05-20T09:42:01.257
> 
> 标签：php, url, relative-path, absolute-path

我想将相对 URL 替换为文本区域中的绝对 URL。所以是这样的：

```
/somefolder/somefile 
```

被替换为：

```
http://www.mysite123.com/somefolder/somefile 
```

我有这个替换功能来完成这项工作：

```
$replaceStrs = array('href=/', "href='/", 'href="/');
$datdescription = str_ireplace($replaceStrs, 'href="http://www.' . $domain . "/", $datdescription); 
```

1.  问题是它需要在值的开头，因此不会替换`/`类似的 URL 。`href=somefolder/somefile`
2.  如果零件中的`/`前后有空格，我也希望它能够工作。`=``href`

第1点是最重要的。你能帮助改善这一点吗？

我已经看到 PHP 示例将相对 URL 替换为[像这样](http://nashruddin.com/PHP_Script_for_Converting_Relative_to_Absolute_URL)的绝对 URL 。

但要求是已知相对 URL，`/`但在我的情况下，我没有管理这部分（我正在替换文本区域中的所有 URL）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:31:12.167

I expanded Mihai Stancu answer for you!

* * *

```
<?php 
function expand_hrefs($link, $url) {
    return('href="http://'.$url.'/'.trim($link, '\'"/\\').'"');
}

function expand_srcs($link, $url) {
    return('src="http://'.$url.'/'.trim($link, '\'"/\\').'"');
}

$html = preg_replace('/href\s*=\s*(?<href>"[^\\"]*"|\'[^\\\']*\')/e', 'expand_hrefs("$1", "'.$url.'")', $html);
$html = preg_replace('/src\s*=\s*(?<src>"[^\\"]*"|\'[^\\\']*\')/e', 'expand_srcs("$1", "'.$url.'")', $html);
?> 
```

This is MY first answer..

Stackoverflow.com is Brilliant!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:39:02.217

当一个 PHP 函数已经可以为你做这件事时，为什么要大惊小怪呢？

[http://php.net/manual/en/function.http-build-url.php](http://php.net/manual/en/function.http-build-url.php)

**PS：**它似乎只在PECL上可用。我刚刚测试了我的 Hostgator VPS（标准 CentOS 5 存储库）以及我的测试 WAMP 环境，它似乎在两者上都可用。

**注意：**另外，你**真的**不应该盲目地替换 HTML 片段。首先，它最终可能无法正常工作（编码问题），其次，它可能会给您的代码添加安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T09:46:21.440

PHP：

```
function expand_links($link) {
    return('href="http://example.com/'.trim($link, '\'"/\\').'"');
}
$textarea = preg_replace('/href\s*=\s*(?<href>"[^\\"]*"|\'[^\\\']*\')/e', 'expand_links("$1")', $textarea); 
```

我还更改了正则表达式以使用双引号或撇号。

# vim - 在 mingW32 窗口的 vim 中设置选项卡大小

> ID：10672359
> 
> 赞同：2
> 
> 时间：2012-05-20T09:42:15.200
> 
> 标签：vim, mingw32

我正在使用 mingw32 在 Windows 上使用 VIM。有没有办法更改默认选项卡大小？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-08T15:16:22.850

在没有 mingw32 的 MS Windows 上，要编辑的资源文件称为 " `_vimrc`"，可以在 Vim 的安装目录中找到，通常在 Program Files 下。

例如

`c:\Program Files (x86)\Vim`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T09:44:53.500

将此添加到您的`.vimrc`（如果需要，例如 3 标签大小）：

```
set tabstop=3
set shiftwidth=3
set expandtab "for converting tabs to spaces
set noexpandtab "for not converting tabs to spaces 
```

# c++ - 如何设置零标志

> ID：10672360
> 
> 赞同：3
> 
> 时间：2012-05-20T09:42:15.480
> 
> 标签：c++, x86

```
LONG WINAPI MyUnhandledExceptionFilter(PEXCEPTION_POINTERS p)
{

    if(p->ExceptionRecord->ExceptionCode==EXCEPTION_ACCESS_VIOLATION){
        if(p->ContextRecord->Eip==6F3A15FD){
            p->ContextRecord->EFlags
        } 
```

如果指定地址发生异常，我希望我的异常处理程序设置零标志；）我该怎么做`p->ContextRecord->EFlags|=`？

另外，如果我只是`EXCEPTION_CONTINUE_EXECUTION`在访问违规后给予它会起作用吗？:D 而且，我是否必须加入 EIP 否则它将落在下一条指令上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T09:45:37.903

`ZF`是 的第 6 位`EFLAGS`，所以`EFlags |= 1 << 6;`

下载 Intel 或 AMD 的 CPU 手册。你会在那里找到所有这些信息。

# android - android中的背景图像大小

> ID：10672362
> 
> 赞同：0
> 
> 时间：2012-05-20T09:42:20.037
> 
> 标签：android, android-layout

我正在尝试找出不同手机的确切分辨率。对于启动器图标，有一些标准分辨率`36px 72 px 96px`，例如`xhdpi`. 请任何人都可以告诉我我应该使用什么尺寸，`background images`这样它们就不会感觉被拉伸、模糊等。

此致

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T09:46:16.520

你见过[“支持多屏”](http://developer.android.com/guide/practices/screens_support.html)吗？

它应该回答您对此的所有问题。另外，我现在或多或少地引用自己的话。这个问题[不是原创](https://stackoverflow.com/search?q=different%20screen%20sizes%20%5Bandroid%5D)的（链接到 SO 搜索）。

# css - 如何不继承css中的宽度？

> ID：10672366
> 
> 赞同：2
> 
> 时间：2012-05-20T09:42:50.930
> 
> 标签：css

所以我有这个html：

```
<p>here is some <span>random</span> content that I might use</p>​ 
```

这个CSS：

```
span{
    position: relative;
}

span:before{
    content: 'this is more content';
    position:absolute;
    color: red;
    top: -15px;
} 
```

发生的情况是，用 css 添加的内容继承了`span`（单词'random'）的宽度。有没有办法删除继承的宽度**而不**添加宽度值来覆盖继承

这是演示[http://jsfiddle.net/7dBbZ/1/](http://jsfiddle.net/7dBbZ/1/) 谢谢​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T10:02:28.567

您正在寻找的是`white-space:nowrap;`因为元素是用`display:inline`. 它实际上并没有继承`width`，因为 BoltClock 指出它*不是*隐式继承的属性，而是用允许的包装填充父元素。

[http://jsfiddle.net/7dBbZ/5/](http://jsfiddle.net/7dBbZ/5/)

尝试使用不同的值`content`并亲自查看（即文本比父元素短，文本没有空格等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:58:20.080

尝试这个：

```
span:before {
    white-space: nowrap;
} 
```

# java - 访问数据以在 Android 应用中显示为搜索结果

> ID：10672371
> 
> 赞同：2
> 
> 时间：2012-05-20T09:43:31.783
> 
> 标签：java, android, database, google-maps

我正在开发一个 Android 应用程序，它获取用户的当前位置并显示靠近他/她位置的餐馆列表。餐厅的数据可供我使用（即我确实有我想在搜索结果中显示的每家餐厅的纬度/经度）。我不能使用 Google Places API，因为我只需要显示我们数据库（在我们的网站）中可用的那些餐馆。我的问题是如何访问计算机上的数据库（甚至是 URL），以提取餐馆的数据并在我的 android 应用程序中显示为搜索结果？
我实际上正在制作无缝（[http://bit.ly/Jp7pUN](http://bit.ly/Jp7pUN)) 我公司的类型应用程序。我是 android 应用程序开发的新手。所以，如果这真的是一个非常广泛或愚蠢的问题，请原谅我。请告诉我我需要学习哪些主题来实现这一点。我会自己学习和做。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:48:12.237

你会需要：

*   用于存储餐厅及其经度/纬度的**Sqlite 数据库**
*   用于显示地图的**MapView**（不要忘记注册您的 Google Maps **API 密钥**）
*   **地图叠加层**以显示地图上的标记
*   **GPS访问**获取用户位置（需要相应的**Android权限**）
*   一种简单的**搜索算法**，用于检索距离用户位置 x 距离内的餐馆结果集

**编辑**

如果您的数据库存储在服务器上，您将需要一种查询服务器的方法，最好使用基于 HTTP 的协议，例如**REST**。**在 Android 设备（使用 Sqlite）上缓存**餐厅位置很有用（但不是必需的） ，以防用户离线（好消息：由于您可以在 Android 和服务器上使用 Java，90% 的数据访问层，您只需要编写一次）。

对于从服务器到 Android 客户端的数据传输，**JSON**是一种流行的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T09:54:02.327

要访问您计算机上的数据库（不是 Android 上的 SQLite），您应该使用 url 将您的数据库服务器更改`localhost`为：10.0.2.2。但是如果您的数据库将在 Internet 上 - 您应该创建一些 REST API 来获取您需要的数据。然后用于`HttpClient`从服务器获取数据。

您需要的一切都在[开发人员指南](http://developer.android.com/guide/index.html)中：[MapView](http://developer.android.com/guide/tutorials/views/hello-mapview.html) 并且为了检索当前位置，我建议使用`MyLocationOverlay`

例如（到服务器的 URL）：

```
//public static final String SERVER_ADDRESS = "http://10.0.2.2:3000"; // for localhost server
public static final String SERVER_ADDRESS = "http://railsserver.herokuapp.com"; //for remote server 
```

访问服务器上的数据 - 这取决于您如何实现（以及使用什么技术）您的服务器（REST API？、WebService？、纯 HTML？）以及来自服务器的响应格式（JSON？XML？， ETC。）

我建议使用 JSON，因为使用 Android SDK 中包含的类很容易解析：

```
 String json = execute(new HttpGet(Constants.SERVER_URL + "/fetchData"));
        JSONObject responseJSON = new JSONObject(json);
        if(responseJSON.has("auth_error")) {
            throw new IOException("fetchData_error");
        } 
```

# php - 互相调用两个ajax函数

> ID：10672377
> 
> 赞同：0
> 
> 时间：2012-05-20T09:44:18.743
> 
> 标签：php, jquery, ajax

我有一个 ajax 调用，它工作得很好，当我在旧的调用中调用一个新的 ajax 调用时，我在第一次调用时出错了

# 只有一个ajax调用

```
$.getJSON("http://localhost/Mar7ba/Ontology/getRelatedConceptsAndRelations/"+conceptName+"/TRUE",function(data){
            var concepts = data[0];
            var relations = data[1];
            for(var i = 0 ; i < concepts.length ; i++){
                var IOS = '';
                $("#ioAddRelatedConcepts").append('<p>\n\
                  connect to\n\
                  <span class="ioAddConcept">'+concepts[i]+'</span>\n\
                  with\n\
                  <span class="ioAddRelation">'+relations[i]+'</span>\n\
                  <select name ="concetedIOs[]" class="TypeSelector">\n\
                  '+IOS+'</select>\n\
                  <span class="errorMessage"></span>\n\
                  <a href="#" class="removeA" id="aioRemoveIO">remove</a>\n\
                </p>\n\
                  <p>');
            }
        }); 
```

# 添加此 ajax 调用后

```
$.getJSON("http://localhost/Mar7ba/Ontology/getRelatedConceptsAndRelations/"+conceptName+"/TRUE",function(data){
            var concepts = data[0];
            var relations = data[1];
            for(var i = 0 ; i < concepts.length ; i++){
                $.getJSON("http://localhost/Mar7ba/InformationObject/getIOsForConcept/"+concepts[i]+"/TRUE",function(data1){
                    var IOS = '';
                    $("#ioAddRelatedConcepts").append('<p>\n\
                  connect to\n\
                  <span class="ioAddConcept">'+concepts[i]+'</span>\n\
                  with\n\
                  <span class="ioAddRelation">'+relations[i]+'</span>\n\
                  <select name ="concetedIOs[]" class="TypeSelector">\n\
                  '+IOS+'</select>\n\
                  <span class="errorMessage"></span>\n\
                  <a href="#" class="removeA" id="aioRemoveIO">remove</a>\n\
                </p>\n\
                  <p>');
                });
            }
        }); 
```

之后，概念[i] 和关系[i] 将是未定义 **的，并且 data1.length 始终为空** ，这是 ajax 的第二个 php 代码

```
public function getIOsForConcept($conceptName, $AJAX) {
        if ($AJAX) {
            $results = $this->model->getIOsForConcept($conceptName);
            $IOs = array();
            $i = 0;
            while ($row = $results->fetch()) {
                $IOs[$i] = $row['name'];
                $i++;
            }
            return json_encode($IOs);
        }
    } 
```

我试过了，效果很好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T11:17:50.353

您不能在回调函数中使用循环变量（`i`在您的情况下） - 在调用异步回调函数时循环终止时，它将具有任何值。

由于您已经在使用 jQuery，您不妨使用`$.each()`：

```
$.getJSON(..., function(data) {

    var concepts = data[0];
    var relations = data[1];

    $.each(concepts, function(i, value) {

        // concepts[i] is OK to use now, and is also in "value"
        // relations[i] is OK to use too

        $.getJSON(..., function() {

            // you can still use them here, too!

        });
    });
}); 
```

这将确保`i`每次都正确绑定到当前迭代次数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T11:17:38.310

内部函数的回调函数中未定义`concepts[i]`和 的原因是*异步*的，这意味着整个 for 循环将在内部调用发生任何回调之前完成运行 - 所以当这些内部回调发生时比和数组的最大索引高一。`relations[i]``$.getJSON()``$.getJSON()`*`$.getJSON()``i``concepts``relations`*

 *为了解决这个问题，您可以引入一个额外的闭包来保留每次迭代的值：

```
$.getJSON("http://localhost/Mar7ba/Ontology/getRelatedConceptsAndRelations/"+conceptName+"/TRUE", function(data){
   var concepts = data[0];
   var relations = data[1];
   for(var i = 0 ; i < concepts.length ; i++){
      (function(currentConcept, currentRelation) {
         $.getJSON("http://localhost/Mar7ba/InformationObject/getIOsForConcept/"+currentConcept+"/TRUE" , function(data1){
            var IOS = '';
            $("#ioAddRelatedConcepts").append('<p>\n\
              connect to\n\
              <span class="ioAddConcept">'+ currentConcept +'</span>\n\
              with\n\
              <span class="ioAddRelation">'+ currentRelation +'</span>\n\
              <select name ="concetedIOs[]" class="TypeSelector">\n\
              '+IOS+'</select>\n\
              <span class="errorMessage"></span>\n\
              <a href="#" class="removeA" id="aioRemoveIO">remove</a>\n\
              </p>\n\
              <p>');
         });
      })(concepts[i], relations[i]);
   }
}); 
```

我在 for 循环中添加的匿名函数将在每次迭代时运行一次，创建单独的闭包，每个闭包都有自己的`currentConcept`and `currentRelation`。

编辑：为了让我与您的原始代码相比，我所做的更改非常明显 -

`for`在现有循环中添加以下行作为第一件事：

```
 (function(currentConcept, currentRelation) { 
```

然后将以下行作为现有`for`循环关闭之前的最后一件事`}`：

```
 })(concepts[i], relations[i]); 
```

然后`for`在你确实拥有的循环内的任何地方`concepts[i]`，并将`relations[i]`它们更改为`currentConcept`and `currentRelation`。*

# asp.net - 调用 WCF 服务时收到 ProtocolException

> ID：10672382
> 
> 赞同：1
> 
> 时间：2012-05-20T09:44:45.527
> 
> 标签：asp.net, wcf, web-services, exception, protocols

我从一个星期开始就遇到这个问题并且无法解决这个问题。我查看了各种帖子，但没有发现与该问题相关的内容。

我在同一个网站项目中有一个网站和一个 WCF 服务。一切正常，但突然间，WCF 服务客户端无法从服务接收到有效响应。

错误信息：

> 发生协议异常
> 
> 内容类型 text/html；响应消息的 charset=utf-8 与绑定的内容类型不匹配 (text/xml; charset=utf-8)。如果使用自定义编码器，请确保正确实现 IsContentTypeSupported 方法。响应的前 1024 个字节是：'
> 
> 值不能为空。
> 参数名称：输入正文 {font-family:"Verdana";font-weight:norma....

我不明白这个参数是什么`input`。我该如何解决这个问题？WCF 服务可以通过浏览器使用在`web.config`

这是代码：

后面的代码：

```
using (var client = new Agent4HomeWebsite.PhotosWebServiceRef.PhotosWebServiceClient())
{
    var temp = client.GetImageObjects();
} 
```

`Web.config`：

```
<configuration>
  ....
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IPhotosWebService" />
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint 
          address="http://localhost:49274/PhotosWebService.svc"
          binding="basicHttpBinding" 
          bindingConfiguration="BasicHttpBinding_IPhotosWebService"
          contract="PhotosWebServiceRef.IPhotosWebService"
          name="BasicHttpBinding_IPhotosWebService" />
    </client>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
</configuration> 
```

# php - 在 32 位 PHP 中处理大整数

> ID：10672386
> 
> 赞同：3
> 
> 时间：2012-05-20T09:45:28.177
> 
> 标签：php, floating-point, int, floating-point-precision

我有一门课来计算一个数字的 Luhn 校验和。它将整数作为输入并返回 true 或 false 以指示有效性或其他情况，或者如果输入的数据类型不合适，则会引发异常。

代码如下（完整源码在[GitHub 上](https://github.com/gordiansolutions/reefknot/blob/master/input/validate/prop/Luhn.php)）：

```
class Luhn extends abstr\Prop implements iface\Prop
{
    /**
     * Test that the given data passes a Luhn check. 
     * 
     * @return bool True if the data passes the Luhn check
     * @throws \InvalidArgumentException 
     * @see http://en.wikipedia.org/wiki/Luhn_algorithm
     */
    public function isValid ()
    {
        $data   = $this -> getData ();
        $valid  = false;

        switch (gettype ($data))
        {
            case 'NULL'     :
                $valid  = true;
            break;
            case 'integer'  :
                // Get the sequence of digits that make up the number under test
                $digits = array_reverse (array_map ('intval', str_split ((string) $data)));
                // Walk the array, doubling the value of every second digit
                for ($i = 0, $count = count ($digits); $i < $count; $i++)
                {
                    if ($i % 2)
                    {
                        // Double the digit
                        if (($digits [$i] *= 2) > 9)
                        {
                            // Handle the case where the doubled digit is over 9
                            $digits [$i]    -= 10;
                            $digits []      = 1;
                        }
                    }
                }
                // The Luhn is valid if the sum of the digits ends in a 0
                $valid  = ((array_sum ($digits) % 10) === 0);
            break;
            default         :
                // An attempt was made to apply the check to an invalid data type
                throw new \InvalidArgumentException (__CLASS__ . ': This property cannot be applied to data of type ' . gettype ($data));
            break;
        }

        return ($valid);
    }
} 
```

我还建立了一个完整的[单元测试](https://github.com/gordiansolutions/reefknot/blob/master/_unittest/input/validate/prop/LuhnTest.php)来练习课程。

我的主要开发环境是在 OSX Lion 下运行 64 位构建 PHP 5.3 和 Apache 的工作站。我还使用一台运行 64 位版本的 Apache 和 PHP 5.4 的笔记本电脑，也在 Apache 下运行。除此之外，我还有一个运行 64 位 Apache 和 PHP 5.3 的 Ubuntu Linux 虚拟机。正如预期的那样，单元测试对所有这些都很好。

我以为我可以在工作午餐期间（Windows 7、XAMPP、32 位 PHP 5.3）有一些空闲时间来处理这个类所属的项目，但我遇到的第一件事是单元测试失败。

问题是，在 PHP 的 32 位构建中，如果数字超过 32 位整数的限制，则该数字会被静默地转换为浮点数。我提出的解决方案是为浮动设置一个特殊情况。如果输入类型是浮点数，并且它的值超出了可以用 int (PHP_INT_MIN .. PHP_INT_MAX) 表示的范围，那么我将对其进行 number_format() 以将其恢复为一串数字。如果它在整数范围内，那么我将抛出异常。

然而，这导致了它自己的问题。我知道，浮点数离 0 越远，数字的分辨率越低（给定数字和下一个可表示数字之间的增量越小）。在你不能再可靠地表示整数部分之前，你必须离 0 多远才能表示数字的整数部分？（我不确定这是否真的很清楚，例如，在分辨率下降到一个 int 和下一个 int 之间的差异之前，限制是 1000。我可以输入一个大于 1000 的数字，比如 1001，但是限制浮点数意味着它最终是 1001.9，四舍五入得到 1002，这意味着我失去了我感兴趣的值）。

是否有可能检测到分辨率的损失何时会成为浮点数的问题？

**编辑添加**：我想我可以修改扩展名以接受字符串而不是数字类型，然后验证它是否仅包含使用正则表达式或其他类似技术的数字，但由于 Luhn-checkable 数据是一串数字不知何故，我觉得不对劲。有一些 PHP 扩展可以处理 bignums，但由于它们是扩展，并且这意味着它是一段可能部署在各种配置上的框架代码，我宁愿不依赖这样的存在尽可能扩展。此外，以上都没有解决如果你给 PHP 一个大的 int 它会默默地将它转换为 float 的问题。我需要一种检测这种情况发生的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T09:47:57.323

如果您需要精度，则不应使用浮点数。

相反，特别是当您想使用整数时*（如果我理解正确的话）*，您可以尝试使用以下`bc*`函数：[**BCMath 任意精度数学**](http://fr2.php.net/bcmath)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T09:52:44.487

如果您需要精度，则不应使用浮点数。

相反，特别是当您想使用整数时（*如果我理解正确*的话），您可以尝试使用以下`gmp*`函数：[**GMP - GNU Multiple Precision**](http://www.php.net/manual/en/ref.gmp.php)

如果您无法使用该扩展程序，您可能会从中获得一些额外的想法

*   [**PEAR Big Integer - 纯 PHP 任意精度整数算术库**](http://pear.php.net/package/Math_BigInteger)

# ios - 为什么 didFinishLaunchingWithOptions 中的动画失败了？

> ID：10672398
> 
> 赞同：1
> 
> 时间：2012-05-20T09:47:30.303
> 
> 标签：ios, core-animation

我只想在 didFinishLaunchingWithOptions 中用动画显示视图，我的代码如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    CGRect finalRect = CGRectMake(0, 0, [[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height);

    UIImage *image = [UIImage imageNamed:@"122.jpg"]; 

    UIButton* pic = [[UIButton alloc] initWithFrame:finalRect];
    [pic setBackgroundImage:image forState:UIControlStateNormal];
    [pic setHidden:true];
    pic.center = CGPointMake(finalRect.size.width / 2, finalRect.size.height / 2);

    UIViewController* controller = [[UIViewController alloc] init];
    [controller setView:pic];

    [self.window setRootViewController:controller];
    [self.window makeKeyAndVisible];

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:2.5];
    [pic setHidden:false];
    [UIView commitAnimations];

    return YES;
} 
```

但动画根本不起作用。屏幕上突然出现了带有图片的子视图。但是，如果我使用按钮触发动画代码，视图将按预期显示动画。didFinishLaunchingWithOptions 是否有任何限制？

PS：

这个问题通过将动画代码移动到控制器的 viewDidAppear proc 中来解决，就像下面的 rokjarc 所说。

但是还有另一种解决方案，方法是在从 didFinishLaunchingWithOptions 调用的延迟例程中执行动画代码，例如：

```
[self performSelector:@selector(executeAnimation) withObject:nil afterDelay:1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:21:30.483

你的按钮被它覆盖，`controller.view`它也加载在`window.view`你的`pic`.

您可以通过将代码移动到`controller::viewDidAppear`.

如果您决定采用这种方式，请不要忘记将按钮添加到`controller.view`而不是`appDelegate.window`.

由于看起来您只想在应用程序启动时显示此动画，您可以设置添加一个名为 showAnimation 的 BOOL 属性到控制器。将此属性设置为`YES`in`didFinishLaunchingWithOptions:`和 to`NO`的末尾`controller::viewDidAppear`。

这样，您可以有条件地 ( `if (self.showAnimation)...`) 只显示一次所需的动画 (in `controller::viewDidAppear`)。

# .net - QtAppWrapper：找不到运行时版本

> ID：10672399
> 
> 赞同：2
> 
> 时间：2012-05-20T09:47:41.597
> 
> 标签：.net, visual-studio-2010, qt, initialization, runtime

最近我为 Visual Studio 2010 构建了 Qt 4.8.1。

但是当我打开 Visual Studio 2010 时，它说：

**“qtappwrapper.exe：.NET Framework 初始化错误 - 无法找到此应用程序的运行时版本”**

我在 Windows XP Professional SP3 上并使用安装了 SP1 的 Visual Studio 2010 Ultimate。

（安装的.NET Framework是4.0）

任何帮助，将不胜感激。

（顺便说一句，我阅读了 Qt Visual Studio 插件的更改日志，说它已经删除了对 .NET 3.5 版的依赖）

谢谢，

潘卡伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-20T12:13:42.300

我有错误。请尝试在以下位置查找缺少文件 qtappwrapper.exe.config：c:\Qt\Digia\Qt4VSAddin - 有关 Visual Studio 的 Qt4 插件的路径，取决于它的安装位置。

它应该包含类似的内容：

`<configuration> <startup> <supportedRuntime version="v4.0.30319" /> </startup> </configuration>`

插件安装后丢失。

细节：

[Qt SDK，Appwrapper：它是什么，它做什么。](https://stackoverflow.com/questions/9050959/qt-sdk-apwrapper-what-is-it-what-does-it-do)

# java - Java：文字字符串

> ID：10672402
> 
> 赞同：6
> 
> 时间：2012-05-20T09:47:50.123
> 
> 标签：java, string

```
class A { 

String s4 = "abc";

 static public void main(String[]args ) {

        String s1 = "abc";
        String s2 = "abc";
        String s3 = new String("abc");
        A o = new A();
        String s5 = new String("def");

        System.out.println("s1==s2 : " + (s1==s2));
        System.out.println("s1==s1.intern : " + (s1==s1.intern()));
        System.out.println("s1==s3 : " + (s1==s3));
        System.out.println("s1.intern==s3.intern : " + (s1.intern()==s3.intern()));
        System.out.println("s1==s4 : " + (s1==o.s4));
 }
} 
```

输出：

```
s1==s2 : true
s1==s1.intern : true
s1==s3 : false
s1.intern==s3.intern : true
s1==s4 : true 
```

我的问题：

1.会发生什么`"String s1 = "abc"`？我猜 String 对象是作为实习字符串添加到 String 类中的池中的吗？它放在哪里？“永久代”还是只是堆（作为字符串类实例的数据成员）？

2.会发生什么`"String s2 = "abc"`？我想没有创建任何对象。但这是否意味着 Java 解释器需要搜索所有的实习字符串？这会导致任何性能问题吗？

`String s3 = new String("abc")` 3.似乎不使用interned string。为什么？

4.会`String s5 = new String("def")`创建任何新的实习字符串吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T09:58:21.000

1.  *编译器**在常量池中*为“abc”创建一个String对象，并在赋值语句的字节码中生成对它的引用。

2.  见（1）。没有搜索；没有性能问题。

3.  这会在运行时创建一个新的 String 对象，因为这就是“new”运算符所做的：创建新对象。

4.  是的，对于“def”，但由于 (3) 还在运行时创建了一个新字符串。

3-4 处的 String 对象没有被实习。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T10:53:48.037

> 1\. "String s1 = "abc" 会发生什么？

在编译时，文字的表示被写入包含此代码的类的类文件的“常量池”部分。

加载类时，会读取类文件常量池中字符串文字的表示形式，并从中创建一个新的 String 对象。然后这个字符串被实习，然后对实习字符串的引用被“嵌入”到代码中。

在运行时，对先前创建/实习的 String 的引用被分配给`s1`. （执行此语句时不会发生字符串创建或实习。）

> 我猜 String 对象是作为实习字符串添加到 String 类中的池中的吗？

是的。但不是在执行代码时。

> 它放在哪里？“永久代”还是只是堆（作为字符串类实例的数据成员）？

它存储在堆的 permgen 区域中。（String 类没有静态字段。JVM 的字符串池是用本机代码实现的。）

> 2\. "String s2 = "abc" 会发生什么？

加载时没有任何反应。当编译器创建类文件时，它为第一次使用文字时使用的文字重用了相同的常量池条目。因此，此语句使用的 String 引用与前一个语句使用的相同。

> 我想没有创建任何对象。

正确的。

> 但这是否意味着 Java 解释器需要搜索所有的实习字符串？这会导致任何性能问题吗？

不，不。Java 解释器（或 JIT 编译代码）使用与为前一个语句创建/嵌入的相同引用。

> 3.似乎String s3 = new String("abc")不使用interned string。为什么？

它比这更复杂。构造函数调用*使用*内部字符串，然后创建一个新字符串，并将内部字符串的字符复制到新字符串的表示中。新创建的字符串分配给`s3`.

为什么？因为`new`被*指定*为总是创建一个新对象（参见 JLS），而`String`构造函数被*指定*为复制字符。

> 4\. String s5 = new String("def") 会创建任何新的实习字符串吗？

在加载时创建一个新的实习字符串（对于“def”），然后在运行时创建一个新的 String 对象，它是实习字符串的*副本*。（有关详细信息，请参阅前面的文本。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T09:58:30.960

在 SO 上看到[这个](https://stackoverflow.com/a/1881936/473637)答案。另请参阅[有关](http://en.wikipedia.org/wiki/String_interning)字符串实习的维基百科文章。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-20T09:52:59.030

`String s1 = "abc";`创建一个新的字符串并实习它。

`String s2 = "abc";``s1`将从实习生池中拖动相同的对象。JVM 这样做是为了提高性能。它比创建新字符串更快。

调用`new String()`是多余的，因为它将返回一个新的隐式字符串对象。**不要**从实习生池中检索它。

正如 Keyser 所说，`==`比较对象是否相等的字符串，如果它们是相同的对象，则返回 true。比较字符串内容时，您应该使用`.equals()`

# objective-c - 应用程序检索后，iCloud 图像是否缓存在 iOS 设备中？

> ID：10672408
> 
> 赞同：1
> 
> 时间：2012-05-20T09:48:39.350
> 
> 标签：objective-c, ios, uitableview, icloud

我有一个简单的 UITableView，其中每个单元格都有用户可能使用其 iOS 设备相机拍摄的缩略图。

如果启用了 iCloud，图像将保存在其中。但是我想知道加载图像时是否会发生某种缓存，因为我注意到第一次加载时速度很慢，即使当单元格显示在屏幕上时再次调用这段代码，图像显示速度也很快。

这是相关的代码片段，我省略了构建单元格的逻辑，我认为它不相关，因为问题是关于其他方面的：

```
- (UITableViewCell *)tableView:(UITableView *)table cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    // logic for retrieve data and build cell

    NSURL *ubiquityUrl = [fm URLForUbiquityContainerIdentifier:nil];
    NSURL *docURL = [ubiquityUrl
                     URLByAppendingPathComponent:[NSString stringWithFormat:@"P_%@_%@.jpg",imgId,@"thumbnail"]
                     isDirectory:NO];
    // this a custom object extending UIDocument
    IP2DataDocument *dataDocument = [[IP2DataDocument alloc] initWithFileURL:docURL];

    [dataDocument openWithCompletionHandler:^(BOOL success) {
        if (success) {
            NSLog(@"iCloud document opened");
            // logic for filling table cell picture 
        } else {                
            NSLog(@"failed opening document from iCloud");                
        }

       }];

    // returning cell
} 
```

每次显示单元格时，我都可以在 Xcode 中看到“已打开 iCloud 文档”。如果发生某种缓存，您能指出在哪里以及如何进行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:03:20.577

iOS的[基于文档的应用程序编程指南](http://developer.apple.com/library/ios/DOCUMENTATION/DataManagement/Conceptual/DocumentBasedAppPGiOS/ManageDocumentLifeCycle/ManageDocumentLifeCycle.html#//apple_ref/doc/uid/TP40011149-CH4-SW25)说：

> 当您运行元数据查询以了解应用程序的 iCloud 文档时，查询结果是`NSMetadataItem`文档文件的占位符项目（对象）。这些项目包含有关文件的元数据，例如其 URL 和修改日期。文档文件不在 iCloud 容器目录中。
> 
> 在发生以下情况之一之前，不会下载文档的实际数据：
> 
> *   您的应用程序尝试打开或访问该文件，例如通过调用`openWithCompletionHandler:`.
> *   您的应用程序调用该`NSFileManager`方法`startDownloadingUbiquitousItemAtURL:error:`来显式下载数据。

总结一下：第一次打开文档时，它可能还没有从 iCloud 下载，这就是为什么它需要更长的时间。之后，有一个文件的本地副本，显然读取速度更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:55:33.733

这是您的 docURL 或特别

```
NSURL *ubiquityUrl = [fm URLForUbiquityContainerIdentifier:nil]; 
```

您实际上并没有直接访问 iCloud。您访问启用了 iCloud 的等效本地位置 (ubiquityUrl)。如果您尝试获取的文件尚未在本地下载，则本地 iCloud 守护程序将在您访问时下载它。一旦发生这种情况，它就会本地存储在您的设备中。因此，下一次，您尝试使用 docURL 再次访问它，因此速度要快得多。iCloud 守护进程还负责同步您的文档版本。因此，如果其他人从另一台设备更新了同一文档的较新版本，您无需担心。

# jquery - 如何使用jquery检测父元素的可见性变化

> ID：10672412
> 
> 赞同：0
> 
> 时间：2012-05-20T09:49:26.113
> 
> 标签：jquery, jquery-selectors

我一直在使用 ExtendStudio 的 JQuery PowerSlider 在网页上旋转图像，并希望检测新图像何时出现。我使用 Chrome 调试器检查了他们的 HTML，每个滑块图像始终可见，但父 div 的不透明度由他们的滑块代码调整。

```
<div style="opacity: 0; "><img name="slide1_img" src="img1.jpg"></div>
<div style="opacity: 1; "><img name="slide2_img" src="img2.jpg"></div>
<div style="opacity: 0; "><img name="slide3_img" src="img3.jpg"></div> [etc...] 
```

所以理想情况下，我想要一个脚本来检测适当的 div 何时可见。我是 Web 编码和 jQuery 的新手，所以已经回顾了包括 .live()、.delegate() 和 livequery 插件在内的方法，但我不确定我是否能 100% 搞清楚它们中的任何一个，但是这是我认为应该起作用的：

```
$(document).ready(function() {
    $('div:visible > img[name="slide2_img"]').livequery(function() {
        alert("Slide 2 is visible");
    });
}); 
```

我想这可能是选择器、livequery、语法或...的问题的任何组合。另外，我在上面脚本的第二行设置了一个断点，它似乎只在文档准备好时触发一次。我知道 livequery 很旧，显然 .live() 和 .delegate() 可以更好地检测更改，但是 jQuery 站点上的描述似乎并没有解决我的情况。

非常感谢所有建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:13:37.717

1.  在项目中不要使用`:visible`，使用`:not(:hidden)`

2.  就 jQuery 而言，所有 div 都是可见的

3.  您不需要检查可见性，您需要检查`css('opacity')`. 使用下面的代码：

* * *

```
$('div > img[name="slide2_img"]').on('click',function(){
  var T = $(this), P = T.parent('div');
  if(P.css('opacity') == '0'){
    alert("Slide 2 is not visible");
  }
  else{
    alert("Slide 2 is visible");
  }
}); 
```

# javascript - 在css div中包装文本

> ID：10672413
> 
> 赞同：2
> 
> 时间：2012-05-20T09:49:28.360
> 
> 标签：javascript, jquery, html, css

大家好，由于某种原因，我的文本没有换行`Div`，我放置了三个 div`inline-block`并且`floating left`。如果我不使用左浮动，则 div 会被向下推。

***CSS 代码***

```
#OuterSection
{
border-top: 10px solid #0272b0;
border-left: 5px solid #0272b0;
border-bottom: 5px solid #0272b0;
border-right: 5px solid #0272b0;
border-radius: 10px;
background-color: #0272b0;
width:250px;
height: auto;
display:inline-block;
}

#InnerSection
{
width:auto;
height:auto;
text-align:center;
background-color: #FFF;
border-radius: 5px;   
text-align:left;
word-wrap: break-word;
float:left;
}

#SectionTitle
{
color: #FFF;
display: inline-block;
font-weight: bold;
margin-bottom: 5px;

} 
```

***HTML代码在这里***

```
<div id="OuterSection">
<span id="SectionTitle">section1</span>
<div id="InnerSection">

 testtesttesttesttesttesttesttesttesttesttesttest

</div>
</div>

<div id="OuterSection">
<span id="SectionTitle">section2</span>
<div id="InnerSection">

</div>
</div>

<div id="OuterSection">
<span id="SectionTitle">section3</span>
<div id="InnerSection"></div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:53:58.947

`#Section{display:inline-block;}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:28:04.210

修复可以在这里找到：[**DEMO**](http://jsfiddle.net/WGtQB/)

`word-wrap:break-word;`在你的innerSection上使用`width:100%;`

# pdf - 是否有关于如何解释 PDF 文档的教程和示例

> ID：10672414
> 
> 赞同：-2
> 
> 时间：2012-05-20T09:50:05.530
> 
> 标签：pdf

我正在使用[PDFBox](http://pdfbox.apache.org/)等工具来解释 PDF 文件（包括文本、笔划、字形和图像），并且可以访问流和字典。我不清楚这些组件如何链接在一起以及如何解释它们。特别是我想知道如何从流中访问字体。

注意：我对如何创建 PDF 文档的教程不感兴趣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:01:54.493

Planetpdf.com 上有很多好文章，许多 PDF 开发人员在博客上运行有用的通用文章。我们已经在我们的博客上运行了一个完整的负载 (http://www.jpedal.org/PDFblog/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:59:53.567

您可能应该从阅读[PDF Reference](http://www.adobe.com/devnet/pdf/pdf_reference.html)开始。这是一个巨大的文件，但您可能只阅读相关部分。

要了解字体流，您基本上需要阅读有关[TrueType](https://developer.apple.com/fonts/TTRefMan/RM06/Chap6.html)和[Type1](http://partners.adobe.com/public/developer/en/font/T1_SPEC.PDF)字体格式的信息（这也不是一个容易阅读的内容）。PDF 可能包含其他字体类型，但 TrueType 和 Type1 可能使用最广泛。

摆弄字体可能很复杂，因此您可能会发现使用某些字体库作为[FreeType](http://www.freetype.org/)从 PDF 字体流中提取信息更容易。

# python - python中的类常量

> ID：10672419
> 
> 赞同：154
> 
> 时间：2012-05-20T09:51:25.653
> 
> 标签：python, constants

在 python 中，我希望一个类有一些在所有子类中通用的“常量”（实际上是变量）。有没有办法用友好的语法来做到这一点？现在我使用：

```
class Animal:
    SIZES=["Huge","Big","Medium","Small"]

class Horse(Animal):
    def printSize(self):
        print(Animal.SIZES[1]) 
```

我想知道是否有更好的方法可以做到这一点，或者无需写“动物”就可以做到这一点。在尺寸之前。马继承自动物。

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-05-20T10:46:20.147

由于`Horse`是 的子类`Animal`，因此您可以更改

```
print(Animal.SIZES[1]) 
```

和

```
print(self.SIZES[1]) 
```

不过，您需要记住这`SIZES[1]`意味着“大”，因此您可能可以通过执行以下操作来改进您的代码：

```
class Animal:
    SIZE_HUGE="Huge"
    SIZE_BIG="Big"
    SIZE_MEDIUM="Medium"
    SIZE_SMALL="Small"

class Horse(Animal):
    def printSize(self):
        print(self.SIZE_BIG) 
```

或者，您可以创建中间类：`HugeAnimal`、`BigAnimal`等。如果每个动物类都包含不同的逻辑，那将特别有用。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-20T09:53:44.847

您可以`SIZES`通过`self.SIZES`（在实例方法中）或`cls.SIZES`（在类方法中）来获取。

在任何情况下，您都必须明确说明在哪里可以找到`SIZES`. 另一种方法是放入`SIZES`包含类的模块，但是您需要在单个模块中定义所有类。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-20T09:53:46.550

```
class Animal:
    HUGE = "Huge"
    BIG = "Big"

class Horse:
    def printSize(self):
        print(Animal.HUGE) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-21T07:28:00.573

扩展 betabandido 的答案，您可以编写一个函数将属性作为常量注入模块：

```
def module_register_class_constants(klass, attr_prefix):
    globals().update(
        (name, getattr(klass, name)) for name in dir(klass) if name.startswith(attr_prefix)
    )

class Animal(object):
    SIZE_HUGE = "Huge"
    SIZE_BIG = "Big"

module_register_class_constants(Animal, "SIZE_")

class Horse(Animal):
    def printSize(self):
        print SIZE_BIG 
```

# c# - 正则表达式提取字符串

> ID：10672421
> 
> 赞同：2
> 
> 时间：2012-05-20T09:51:58.400
> 
> 标签：c#, regex

我有一个字符串：

```
string s = "GameObject.Find(\"MyObj\").GetComponent(\"MyComponent\")"; 
```

我想提取“GameObject.Find(\"MyObj\")”，其中 MyObj 可以包含任何数量或类型的字符，但换行符除外。

这是我的代码：

```
Match match = Regex.Match(s, "GameObject.Find(\".+\")"); 
```

我知道我做错了什么，但我不知道从这里去哪里。我们如何才能使这个表达式按预期工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T09:54:57.710

```
Match match = Regex.Match(s, "GameObject.Find(\".+?\")"); 
```

您应该进行非贪婪搜索，但要注意它只会从括号+引号匹配到第一个引号+括号。

因此对于，

```
string s = "GameObject.Find(\"seckin(\\\"hand\\\").thumb()\").GetComponent(\"MyComponent\")" 
```

它会匹配`"GameObject.Find(\"seckin(\\\"hand\\\")"`

但是没有办法使用正则表达式匹配括号，所以它是最好的次优解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T09:55:23.707

也许你应该尝试：

```
Match match = Regex.Match(s, "GameObject.Find(\".+?\")"); 
```

# php - imagedashedline 有问题吗？

> ID：10672423
> 
> 赞同：1
> 
> 时间：2012-05-20T09:52:35.447
> 
> 标签：php, gd

下面的代码有错误吗？

```
imagedashedline($image, $posax, $posay, $posbx, $posay, $black); 
```

它显示的是：

![imagedashedline 会发生什么](../Images/f0576c5580642a36c7e705db9f4f97fc.png)

我试过这样：

```
imageline($image, $posax, $posay, $posbx, $posay, $black); 
```

它显示的是：

![imageline 看似有效，但 imagedashedline 无效！](../Images/9f77d9a2a9c22495f1d75018b9726b69.png)

它在 gd 代码中完美运行。真正让我困惑的是垂直向下的虚线。它根本没有被阻止。如果是因为三角形区域与其重叠，那么底线应该至少部分显示。那么必须是什么错误？它`imagepolygon`的 z-index 是否高于`imagedashedline`，但不高于`imageline`？（一个多边形部分覆盖了这条应该是虚线。）但是两个`imagedashedline`语句（一个创建垂直线，另一个创建水平线）在`imagepolygon`函数之后执行，所以如果 z-index 是，它们都不应该显示案子。

**编辑：**我找出了原因，发现水平线`imagedashedline`的高度为 0，使它们对眼睛不可见。只要您增加`imagesetthickness`函数值，任何其他倾斜角度都可以。看看是否有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:37:12.447

啊，我找到了答案 - 水平线的高度为 0px，因为该线是完全水平的。使线条稍微倾斜，使其再次可见。

# javascript - 如何在 Plone 中针对特定视图注册 Javascript

> ID：10672433
> 
> 赞同：1
> 
> 时间：2012-05-20T09:53:35.953
> 
> 标签：javascript, plone

我只想为特定视图加载 Javascripts。

我真的很想在这个很少打开并且只有管理员 JS 代码的单一视图中加载它们。我仍然希望 Javascript 由 portal_javascripts 处理，因此缓存破坏支持是自动的。

针对特定视图及其子类注册 Javascript 的最佳方法是什么？通过接口？通过完整的虚线类名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T03:20:10.327

什么 Martijn 是正确的；但是，如果您真的需要/想要使用 portal_javascripts，请确保基类实现了一个接口，然后为您在 portal_javascript 注册表值中的条件语句执行类似的操作。

```
python: context.restrictedTraverse('@@plone_interface_info').provides('my.package.interfaces.IMyInterface') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T12:58:24.450

我从不为这种一次性的 JS 资源而烦恼。只需使用特定视图直接加载您的 JS。您始终可以指示该视图的少数用户使用 CTRL-Reload。

弄乱portal_javascript只会增加维护负担，因为您需要确保不破坏全局JS资源的可合并性。

# java - 如何停止多线程聊天客户端

> ID：10672437
> 
> 赞同：1
> 
> 时间：2012-05-20T09:54:00.930
> 
> 标签：java, multithreading, client, chat

我正在尝试使用 Java 创建一个多线程聊天客户端服务器。我使用本教程作为开始： http: [//pguides.net/java-tutorial/java-tcp-clientserver-chat/](http://pguides.net/java-tutorial/java-tcp-clientserver-chat/)

我希望客户端在我输入字符串“退出”时停止，但我不明白我该怎么做。此外，当客户端断开连接时，我需要从连接的昵称列表中删除客户端。

服务器

```
/* ChatServer.java */
import java.net.ServerSocket;
import java.net.Socket;

import java.io.IOException;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintWriter;

import java.util.Hashtable;

public class ChatServer {
    private static int port = 1001; 

    public static void main (String[] args) throws IOException {

        ServerSocket server = null;
        try {
            server = new ServerSocket(port);
        } catch (IOException e) {
            System.err.println("Could not listen on port: " + port);
            System.err.println(e);
            System.exit(1);
        }

        Socket client = null;
        while(true) {
            try {
                client = server.accept();
            } catch (IOException e) {
                System.err.println("Accept failed.");
                System.err.println(e);
                System.exit(1);
            }
            /* start a new thread to handle this client */
            Thread t = new Thread(new ClientConn(client));
            t.start();
        }
       }
}

class ChatServerProtocol {
    private String nick;
    private ClientConn conn;

    private static Hashtable<String, ClientConn> nicks = new Hashtable<String, ClientConn>();

    private static final String msg_OK = "OK";
    private static final String msg_INVALID = "INVALID COMMAND";
    private static final String msg_SEND_FAILED = "FAILED TO SEND";

    private static boolean add_nick(String nick, ClientConn c) {
        if (nicks.containsKey(nick)) {
            return false;
        } else {
            nicks.put(nick, c);
            return true;
        }
    }

    private static boolean remove_nick(String nick, ClientConn c) {
        if (!(nicks.containsKey(nick))) {
            return false;
        } else {
            nicks.remove(nick);
            return true;
        }
    }

    public ChatServerProtocol(ClientConn c) throws IOException {
        nick = null;
        conn = c;
    }

    private boolean sendMsg(String recipient, String msg) {
        if (nicks.containsKey(recipient)) {
            ClientConn c = nicks.get(recipient);
            c.sendMsg(nick + ": " + msg);
            return true;
        } else {
            return false;
        }
    }

    public String process(String msg) {
        if (msg.startswith("Nick"){
        String output = "";
        if(add_nick(tryauthor, this.conn)) {
            this.nick = tryauthor;
            output = "Welcome "+tryauthor;
            } else {
                    output = "Nick already in";
                }
            }

        }
        else if (msg.startsWith("msg")) {
            String[] msg_parts = msg.split(":");
            for(int i=0; i<msg_parts.length; i++){
                System.out.println(msg_parts[i]);
            }
            String msg_type = msg_parts[0];
            if(msg_type.equals("msg")) {
                if(msg_parts.length < 3) output = msg_INVALID;
                if(sendMsg(msg_parts[1], msg_parts[2])) output = msg_OK;
                else output = msg_SEND_FAILED;
            } else {
                output = msg_INVALID;
            }
        }

        return output;
     }
    }

class ClientConn implements Runnable {
    private Socket client;
    private BufferedReader in = null;
    private PrintWriter out = null;

    public ClientConn(Socket client) {
        this.client = client;
        try {
            /* obtain an input stream to this client ... */
            in = new BufferedReader(new InputStreamReader(client.getInputStream()));
            /* ... and an output stream to the same client */
            out = new PrintWriter(client.getOutputStream(), true);
        } catch (IOException e) {
            System.err.println(e);
            return;
        }
    }

    public void run() {
        String msg, response;

        try {
             ChatServerProtocol protocol = new ChatServerProtocol(this);
            /* loop reading lines from the client which are processed 
             * according to our protocol and the resulting response is 
             * sent back to the client */
            while ((msg = in.readLine()) != "quit\r\n") {
                response = protocol.process(msg);
                out.println("SERVER: " + response);
            }
            this.close();
        } catch (IOException e) {
            System.err.println(e);
        }
    }

    public void sendMsg(String msg) {
        out.println(msg);
     }

    public void close() throws IOException {
        in.close();
        out.close();
        client.close();
    }

} 
```

客户

```
/* ChatClient.java */
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;

public class ChatClient {
private static int port = 1001; 
private static String host = "localhost"; 

private static BufferedReader stdIn;

public static void main (String[] args) throws IOException {

    Socket server = null;

    try {
        server = new Socket(host, port);
    } catch (UnknownHostException e) {
        System.err.println(e);
        System.exit(1);
    }

    stdIn = new BufferedReader(new InputStreamReader(System.in));

    PrintWriter out = new PrintWriter(server.getOutputStream(), true);
    BufferedReader in = new BufferedReader(new InputStreamReader(server.getInputStream()));

    System.out.print("Nick: ");
    String auth = stdIn.readLine();
    out.println("Nick: " + auth);
    String serverResponse = in.readLine();
    System.out.println(serverResponse);

    if (serverResponse.startsWith("SERVER: welcome")) {
         /* create a thread to asyncronously read messages from the server */
        ServerConn sc = new ServerConn(server);
        Thread t = new Thread(sc);
        t.start();

        String msg;
        /* loop reading messages from stdin and sending them to the server */
        while ((msg = stdIn.readLine()) != "quit\r\n") {
            out.println(msg);
        }
        sc.close();
        System.out.println("Exit.");
        System.out.println("---Client Error---");
    }
    else {
        System.out.println("Exit.");
        System.out.println("---Client Error---");
    }

  }
}

class ServerConn implements Runnable {
    private BufferedReader in = null;
    private Socket server;

    public ServerConn(Socket s) throws IOException {
        server = s;
        in = new BufferedReader(new InputStreamReader(s.getInputStream()));
    }

    public void run() {
        String msg;
        try {
            /* loop reading messages from the server and show them 
             * on stdout */
             while ((msg = in.readLine()) != "quit\r\n") {
                System.out.println(msg);
             }
             this.close();
        } catch (IOException e) {
            System.err.println(e);
        }
      }

    public void close() throws IOException {
        in.close();
        server.close();
    }

} 
```

我应该在哪里以及如何关闭连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:13:51.533

> 现在，只有当他的名字是我之前创建的图表的一部分时，才能对客户进行身份验证。

这似乎写在代码中。在您的`Process()`方法中，您在 中查找作者，`authorsgraph`如果未找到，则返回错误。这不是你想要的吗？如果找不到作者，是否应该添加它们？如果您还没有找到它们以及将作者添加`add_nice()`到?`else``authorsgraph`

在调试器中处理新连接可能会对您有所帮助。消息的自由使用`System.out.println()`也可能是有用的。

> 我希望客户端在我输入字符串“退出”时停止，但我不明白我该怎么做。

那么这段代码有一个错误。您必须使用`.equals()`来检查是否`String`相等。 `!=`只是测试`msg`没有相同的`String` *引用*，不同的字符串*内容*：

```
// can't use != on a `String` to check contents
while ((msg = stdIn.readLine()) != "quit\r\n") { 
```

它应该是：

```
while (true) {
   msg = stdIn.readLine();
   if (msg == null || msg.equals("quit")) {
      break;
   }
   ... 
```

另请注意，我没有检查“\r\n”。该`readLine()`方法返回字符串（引用 javadocs）“不包括任何行终止字符”。此外，您应该测试`null`套接字是否关闭。您的客户端代码中也有 2 个位置存在相同的错误。

> 当客户端断开连接时，我需要从连接的昵称列表中删除客户端。

`while`如果客户端套接字关闭或它们进入，您的循环将退出`"quit"`。然后你打电话`close()`。打电话后，`close()`您可以打电话`protocol.remove_nicks()`将他从循环中删除。但你没有`"nick"` `String`那里。

真的，维护`nicks` 里面的列表`ChatServerProtocol`可能不是合适的地方。我会自己`ChatServerProtocol`加入`ClientConn`课堂，因为每个连接都有一个。无论哪种方式，某些对象都需要存储`"nick"`作者登录时使用的字符串，然后在输入或连接关闭`remove_nick()`后使用该字符串调用。`"quit"`

最后，`HashTable`从 Java 5 开始不推荐使用 of。我会`Collections.synchronizedMap(new HashMap<...>())`改用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T10:46:31.733

> 我希望客户端在我输入字符串“退出”时停止，但我不明白我该怎么做。

您可以使用 立即终止当前的 Java 程序`System.exit(status)`。由于操作系统会在进程终止时自动释放进程获取的所有资源（例如 tcp 套接字），这也会关闭您的连接。

> 此外，当客户端断开连接时，我需要从连接的昵称列表中删除客户端。

那更难。请记住，断开连接可能是由于客户端终止以外的原因而发生的，例如因为网络电缆被拔出。也就是说，客户端不能可靠地通知服务器它不再存在，服务器必须自己检测到这一点。我希望服务器操作系统的 tcp 实现能够检测到客户端不再存在（取决于实现的速度可能有多快），并使用该套接字向应用程序抛出异常，您可以捕获并从列表。

# c++ - 如果类型是在命名空间内创建的，我怎样才能知道？

> ID：10672439
> 
> 赞同：1
> 
> 时间：2012-05-20T09:54:03.730
> 
> 标签：c++, macros, typetraits

我创建了标签系统，它允许在 ma 引擎中标记实体。它基于 c++ 类型工作，所以每个标签都是一个类型（我有我的理由）。

现在，当我想创建新标签时，我必须调用`struct tagname{};`.

如果我想在其他文件中使用标签，我使用前向声明`struct name;`

为了使其更加用户友好，我创建了宏

```
#define CREATE_TAG(name) struct name{};
#define USE_TAG(name)    struct name; 
```

但是当用户在命名空间内调用一个宏和在命名空间外调用另一个宏时，我遇到了问题，因为那是两种不同的类型。

我想确保用户在任何命名空间之外调用宏。由于我们的项目在一个命名空间`namespace root`中，我可以使用它进行检查。

到目前为止，这是我想出的：

```
namespace root
{
    const unsigned TAGS_CAN_NOT_BE_DEFINED_INSIDE_ANY_NAMESPACE = 1;
};

#define CREATE_TAG(name)    namespace root{  struct name{}; static_assert(root::TAGS_CAN_NOT_BE_DEFINED_INSIDE_ANY_NAMESPACE,"");  }
#define USE_TAG(name)       namespace root{  struct name;   static_assert(root::TAGS_CAN_NOT_BE_DEFINED_INSIDE_ANY_NAMESPACE,"");  } 
```

现在，当在根命名空间之外使用宏时，一切都很好。在根命名空间或其他嵌套命名空间内调用时，会出现错误`TAGS_CAN_BE... not a member`。

但我真的不喜欢它。我不喜欢整个宏观的东西，但这不是问题。问题是：是否有更好的方法来找出是否在命名空间中调用了宏？由于我的宏传入类型，我可以使用一些类型特征，但我没有找到任何合适的类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:12:20.573

你可以尝试这样的事情：

```
#include <type_traits>
#define DECLARE_ME(name) struct tag_##name { static_assert(!std::is_same<tag_##name, ::tag_##name>::value, "Not in global namespace"); } 
```

你可能会得到一个编译器错误，它甚至不是静态断言，以防误用，但它应该能解决问题。您可能可以使用更精细的 trait 类使其更加用户友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:18:53.943

所以看起来

```
namespace root
{
    const unsigned TAGS_CAN_NOT_BE_DEFINED_INSIDE_ANY_NAMESPACE = 1;
};

#define CREATE_TAG(name)    namespace root{  struct name{}; static_assert(root::TAGS_CAN_NOT_BE_DEFINED_INSIDE_ANY_NAMESPACE,"");  }
#define USE_TAG(name)       namespace root{  struct name;   static_assert(root::TAGS_CAN_NOT_BE_DEFINED_INSIDE_ANY_NAMESPACE,"");  } 
```

是答案...

我会等几天再接受。我仍然愿意接受你的回答

# objective-c - UIWindow makeKeyWindow: 与 makeKeyAndVisible:

> ID：10672441
> 
> 赞同：2
> 
> 时间：2012-05-20T09:54:36.533
> 
> 标签：objective-c, cocoa-touch, xamarin.ios, uikit

如果 iOS 想要截取应用程序的屏幕截图，我的应用程序正在使用第二个 UIWindow 来显示一个特殊屏幕。`[UIWindow makeKeyWindow:]`如果我想再次删除第二个窗口，我无意中在我的主窗口上使用了。这确实应该是`makeKeyAndVisible:`，但我想知道为什么它会起作用。我的意思是：大多数时候（99%），我的第二个窗口按预期被移除，我的主窗口变得可见。我问是因为我想知道我是否真的发现了问题，或者是否还有其他问题？

或者可能是该方法在（以前的）MonoTouch 版本中被错误地绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:41:13.760

每个方法都映射到同名的选择器[`makeKeyAndVisible`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html#//apple_ref/occ/instm/UIWindow/makeKeyAndVisible)和[`makeKeyWindow`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html#//apple_ref/occ/instm/UIWindow/makeKeyWindow).

> 或者可能是该方法在（以前的）MonoTouch 版本中被错误地绑定？

GIT 历史表明（我 ;-）自从首次添加（两年多前）以来，两者都没有改变。

关于前者的文档说明：

> 您还可以使用继承的 hidden 属性隐藏和显示窗口`UIView`。

也许这发生在您的代码中（甚至在 iOS 代码中）。

# iphone - 当我尝试在 iphone 上启动应用程序时，它不显示 TableView

> ID：10672442
> 
> 赞同：0
> 
> 时间：2012-05-20T09:54:41.900
> 
> 标签：iphone, objective-c, xcode, uitableview

所以我有一个应用程序，它在选项卡栏中有一个选项卡，显示我的 TableView。最近我对其进行了修改，并将我的表路径从默认值更改为
`NSString *path = [[NSBundle mainBundle]pathForResource:@"Food" ofType"plist"];`

用这个替换它：
`NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject]stringByAppendingString:@"food.plist"];`

所以我的问题是，当我在 XCode 的模拟器上启动它时它工作得很好，但是当我试图在我的 iPhone 上启动它时，我看不到任何`TableView`出现，只是空的搜索栏和顶部导航栏。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject]stringByAppendingString:@"food.plist"];
    listOfItems = [[NSMutableArray alloc]initWithContentsOfFile:path];
    searchListOfItems = [[NSMutableArray alloc]init];

    searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 320, 45)];
    searchBar.barStyle = UIBarStyleBlackTranslucent;
    searchBar.showsCancelButton = NO;
    searchBar.autocorrectionType = UITextAutocorrectionTypeNo;
    searchBar.autocapitalizationType = UITextAutocapitalizationTypeNone;
    searchBar.delegate = self; 
    [[self tableView] setTableHeaderView:searchBar];

    searching = NO;
    letUserSelectRow = YES;
    UIBarButtonItem *addButton = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addProduct:)];
    self.navigationItem.rightBarButtonItem = addButton;

    [self.tableView reloadData]; 
}

- (void)hideModalViewController:(NSNotification *)notif {
    [self dismissModalViewControllerAnimated:YES];
    [self viewDidLoad];
}
- (void)addProduct:(UIBarButtonItem *)button {
    BIDAddProductViewController *addProductVC = [[BIDAddProductViewController alloc]init];
    [self presentModalViewController:addProductVC animated:YES];
    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(hideModalViewController:) name:@"HideModalViewController" object:addProductVC];
}
- (void)viewDidUnload {
    [super viewDidUnload];
    self.childController = nil;
    self.tableView = nil;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        NSLog(@"Delete");
        NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject]stringByAppendingString:@"food.plist"];
        NSMutableArray *listOfItemsToDelete = [[NSMutableArray alloc]initWithContentsOfFile:path];

        [[[listOfItemsToDelete objectAtIndex:indexPath.section]objectForKey:@"Products"] removeObjectAtIndex:indexPath.row];
        [listOfItemsToDelete writeToFile:path atomically:YES];
        [self viewDidLoad];
    }
}
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {
    return UITableViewCellEditingStyleDelete;
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *SectionsTableIdentifier = @"SectionsTableIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: SectionsTableIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:SectionsTableIdentifier];
    }

    if(searching)
        cell.textLabel.text = [[searchListOfItems objectAtIndex:indexPath.row]valueForKey:@"ProductName"];
    else {
        NSDictionary *dictionary = [listOfItems objectAtIndex:indexPath.section];
         NSArray *array = [[dictionary objectForKey:@"Products"]valueForKeyPath:@"ProductName"];
        NSString *cellValue = [array objectAtIndex:indexPath.row];
        cell.textLabel.text = cellValue;
    }
    cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
    return cell;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    if (searching)
        return 1;
    else
        return [listOfItems count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (searching)
        return [searchListOfItems count];
    else {
        NSDictionary *dictionary = [listOfItems objectAtIndex:section];
        NSArray *array = [dictionary objectForKey:@"Products"];
        return [array count];
    }
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    if(searching)
        return @"";
   return [[listOfItems objectAtIndex:section]valueForKey:@"SectionName"];
}

@end 
```

我想提一下，我使用 Project 和 Target 设置做了一些事情，但是，在那之前，一切都很好。我有一个 iPhone 4s 如果那很重要。而且我确实削减了很多代码行，只是为了更容易阅读（删除了搜索方法和选择行方法）。

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:16:42.807

我认为问题在于 -

```
NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject]stringByAppendingString:@"food.plist"]; 
```

你需要使用 -

```
NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject]stringByAppendingPathComponent:@"food.plist"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T10:28:53.713

我想你的问题可能是

```
NSString *path = [[NSBundle mainBundle]pathForResource:@"Food" ofType"plist"]; 
```

搜索“Food.plist”（注意 F）

并且在

```
NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject]stringByAppendingString:@"food.plist"]; 
```

你搜索“food.plist”（注意低大写f）

由于您的设备区分大小写，而您的 Mac 默认不区分大小写，我怀疑这是您的问题

# codeigniter - Variable inside function __construct() in Codeigniter

> ID：10672444
> 
> 赞同：2
> 
> 时间：2012-05-20T09:54:48.517
> 
> 标签：codeigniter, codeigniter-2

I am using Tank_auth for user authentication in codeigniter. To check if any user is logged in or not, if he is then to get the username and id I need to use the following code in every functions of my controllers, which is very irritating.

```
 // If any user is logged in get his/her userid or name
    if ($this->tank_auth->is_logged_in()) {

        $data['user_id']    = $this->tank_auth->get_user_id();
        $data['username']   = $this->tank_auth->get_username();
    } 
```

So , I was wondering if I could make life easier by putting the following code inside the `function __construct()` like following, but its not working.

Could you please tell me how to get it work?

Thanks in Advance :)

```
 function __construct()
    {
        parent::__construct();

      $this->load->helper('url');
      $this->load->library('tank_auth');

          if ($this->tank_auth->is_logged_in()) {

        $data['user_id']    = $this->tank_auth->get_user_id();
        $data['username']   = $this->tank_auth->get_username();
    }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T10:01:52.727

if you plan to use this array only inside this controller, you can use it like this:

```
//outside the functions define the $data as controller class property:

private $data = array();

function __construct()
{
    parent::__construct();

    $this->load->helper('url');
    $this->load->library('tank_auth');

    if ($this->tank_auth->is_logged_in()) {
        $this->data['user_id']    = $this->tank_auth->get_user_id();
        $this->data['username']   = $this->tank_auth->get_username();
    }
}

//and then use it like 

function index(){
    $this->load->view("something.php",$this->data);
} 
```

# xcode - 如何通过点击使用 CCLayerPanZoom 类的等距平铺地图来放置平铺

> ID：10672447
> 
> 赞同：1
> 
> 时间：2012-05-20T09:55:01.850
> 
> 标签：xcode, map, cocos2d-iphone, isometric

我有一张平铺地图。我使用 cocos2D。等轴测图有一个 CCLayerPanZoom。用于缩放和滚动。现在我想在我按下它的位置添加一个瓷砖。这没用。它将瓷砖插入错误的位置。

它是否与地图的缩放有关（可能的缩放和滚动）。？

```
-(void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event{

    touchLocation = [touch locationInView: [touch view]];   
    touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];
    touchLocation = [self convertToNodeSpace:touchLocation];

    CGPoint playerPos = _player.position;
    CGPoint diff = ccpSub(touchLocation, playerPos);
    if (abs(diff.x) > abs(diff.y)) {
        if (diff.x > 0) {
            playerPos.x += self.map.tileSize.width;
        } else {
            playerPos.x -= self.map.tileSize.width; 
        }    
    } else {
        if (diff.y > 0) {
            playerPos.y += self.map.tileSize.height;
        } else {
            playerPos.y -= self.map.tileSize.height;
        }
    }
    //player.position = playerPos; // Todo: Trymove

    if (playerPos.x <= (self.map.mapSize.width * self.map.tileSize.width) &&
        playerPos.y <= (self.map.mapSize.height * self.map.tileSize.height) &&
        playerPos.y >= 0 &&
        playerPos.x >= 0 ) {
        [self setPlayerPosition:playerPos];
    }

    if([TileMapLayer isOnTheMapMoreRestrictive:touchLocation map:self.map mapsize:self.map.mapSize.width] )
        [self plantObject:touchLocation];
    else
        CCLOG(@"Outside possition");

   [self setDotPosition: [self tilePosFromLocation:touchLocation tileMap:self.map]];

}

-(void)plantObject:(CGPoint) location{

    punkt = [CCSprite spriteWithFile:@"tree.png"];
    punkt. position = [self tilePosFromLocation:location tileMap:self.map];
    [_map  addChild:punkt z:4];
} 
```

# iphone - UITalbeViewController的UITableView的位置

> ID：10672452
> 
> 赞同：1
> 
> 时间：2012-05-20T09:55:59.447
> 
> 标签：iphone, objective-c, ios, xcode4.2

如何自定义 的垂直位置`UITableView`。`UITableViewController`我试图在窗口中间显示表格（3 个单元格）。我的类是继承`UITableViewController`类。请有人给我建议。或替代方法来做到这一点。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T10:07:03.197

尝试创建一个 UIViewController，并在其中放入一个 UITableView。我认为您可以设置 tableView 的 origin.y。确保设置 UITableView 的数据源和委托。祝你好运。

# c# - 合并 xps 文档使最后一个重复

> ID：10672456
> 
> 赞同：3
> 
> 时间：2012-05-20T09:57:26.187
> 
> 标签：c#, .net, wpf, xps, xpsdocument

将多个 XPS 文档合并为一个时出现问题。当我合并它们时，结果 xps 包含最后一个重复的 XPS 文档。这是我的合并功能（[此问题的修改版](https://stackoverflow.com/questions/1660748/can-multiple-xps-documents-be-merged-to-one-in-wpf)）：

```
 public XpsDocument CreateXPSStream(List<XpsDocument> ListToMerge)
    {
        var memoryStream = new MemoryStream();
        Package container = Package.Open(memoryStream, FileMode.Create);
        string pack = "pack://temp.xps"; 
        PackageStore.RemovePackage(new Uri(pack));
        PackageStore.AddPackage(new Uri(pack), container);

        XpsDocument xpsDoc = new XpsDocument(container, CompressionOption.SuperFast, "pack://temp.xps");
        FixedDocumentSequence seqNew = new FixedDocumentSequence();
        foreach (var sourceDocument in ListToMerge)
        {
            FixedDocumentSequence seqOld = sourceDocument.GetFixedDocumentSequence();
            foreach (DocumentReference r in seqOld.References)
            {
                DocumentReference newRef = new DocumentReference();
                ((IUriContext)newRef).BaseUri = ((IUriContext)r).BaseUri;
                newRef.Source = r.Source;
                seqNew.References.Add(newRef);
            }
        }
        XpsDocumentWriter xpsWriter = XpsDocument.CreateXpsDocumentWriter(xpsDoc);
        xpsWriter.Write(seqNew);
        //xpsDoc.Close();
        //container.Close();
        return xpsDoc;
    } 
```

结果转到 DocumentViewer 并将其显示给用户。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T14:53:19.957

我创建了以下功能，它对我有用。

```
 public void MergeXpsDocument(string newFile, List<XpsDocument> sourceDocuments)
    {
        if (File.Exists(newFile))
        {
            File.Delete(newFile);
        }

        XpsDocument xpsDocument = new XpsDocument(newFile, System.IO.FileAccess.ReadWrite);
        XpsDocumentWriter xpsDocumentWriter = XpsDocument.CreateXpsDocumentWriter(xpsDocument);
        FixedDocumentSequence fixedDocumentSequence = new FixedDocumentSequence();

        foreach(XpsDocument doc in sourceDocuments)
        {
            FixedDocumentSequence sourceSequence = doc.GetFixedDocumentSequence();
            foreach (DocumentReference dr in sourceSequence.References)
            {
                DocumentReference newDocumentReference = new DocumentReference();
                newDocumentReference.Source = dr.Source;
                (newDocumentReference as IUriContext).BaseUri = (dr as IUriContext).BaseUri;
                FixedDocument fd = newDocumentReference.GetDocument(true);
                newDocumentReference.SetDocument(fd);
                fixedDocumentSequence.References.Add(newDocumentReference);
            }
        }
        xpsDocumentWriter.Write(fixedDocumentSequence);
        xpsDocument.Close();
    } 
```

# google-app-engine - 将文件写入 Google Cloud Storage 时出现 IO 异常

> ID：10672457
> 
> 赞同：2
> 
> 时间：2012-05-20T09:57:28.470
> 
> 标签：google-app-engine, google-cloud-storage

我正在尝试将文件从 Google App Engine 写入 Google Cloud，并使用后端处理将一堆文件写入 Google 云存储的请求。但似乎我在大约 5 分钟内得到了 IOException（我尝试了不同的文件大小，每个文件的线程休眠 30 秒等，只有时间似乎是一致的）。

然后我测试了以下代码：

```
 String testString = "1,1,1,1,1,1,1,1"; 
         for (int i = 0; i < 200; i++) {
            log.info("Dumping file " + i);
            String fileName = "test/test" + i + ".csv";
            FileService fs = FileServiceFactory.getFileService();
            GSFileOptionsBuilder optionsBuilder = new GSFileOptionsBuilder()
                .setBucket(BUCKET_NAME)
                .setKey(fileName)
                .setAcl("public_read");
            AppEngineFile writableFile = fs.createNewGSFile(optionsBuilder.build());
            FileWriteChannel writeChannel = fs.openWriteChannel(writableFile, true);
            PrintWriter out = new PrintWriter(Channels.newWriter(writeChannel, "UTF8"));
            for (int j = 0; j < 10; j++) { 
                out.println(testString);
            }
            out.close();
            writeChannel.closeFinally();
            Thread.sleep(30000);
        } 
```

我得到 IOException 如下：

```
java.io.IOException
    at com.google.appengine.api.files.FileServiceImpl.translateException(FileServiceImpl.java:617)
    at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:590)
    at com.google.appengine.api.files.FileServiceImpl.create(FileServiceImpl.java:498)
    at com.google.appengine.api.files.FileServiceImpl.createNewGSFile(FileServiceImpl.java:153) 
```

在谷歌云存储桶中，11个文件被写入并且是好的（每个有160字节），并且在创建第12个文件时请求失败。对于我的真实应用程序，它将在 writeChannel.closeFinally() 上失败。

```
java.io.IOException
    at com.google.appengine.api.files.FileServiceImpl.translateException(FileServiceImpl.java:617)
    at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:590)
    at com.google.appengine.api.files.FileServiceImpl.close(FileServiceImpl.java:551)
    at com.google.appengine.api.files.FileServiceImpl.close(FileServiceImpl.java:441)
    at com.google.appengine.api.files.FileWriteChannelImpl.closeFinally(FileWriteChannelImpl.java:81) 
```

顺便提一句。我确信我授予对我的 GAE 应用程序的 google 服务帐户的完全控制访问权限，以便写入相应的存储桶。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:50:56.893

文件 API 仍处于试验阶段 - 我认为您现在只是遇到了该服务的一般问题，因为它仍处于试验阶段。

我知道在提高此服务的可靠性方面正在进行一些非常积极的工作，因此现在您可能应该进行防御性编码并在看到此类暂时性错误时实施重试。

# c - 如何从 C 中的 txt 文件创建 char[][]？

> ID：10672459
> 
> 赞同：0
> 
> 时间：2012-05-20T09:58:10.577
> 
> 标签：c, arrays, fopen, text-files

我对 C 很陌生，我在 C 中遇到了一个问题：我想编写一个程序来读取 txt 文件并将其内容写入`char[50][50]`.

要读取我使用的文件，`fopen`但我不知道如何将其写入数组。解决这个问题的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T11:28:56.743

如果 fread 仅从特定大小的文件中读取，则易于使用。
例如

```
#include <stdio.h>
#include <stdlib.h>

int main() {
    FILE *fp;
    char data[50][50];
    int count;

    if(NULL==(fp=fopen("data.txt","r"))){
        perror("file not open\n");
        exit(EXIT_FAILURE);
    }
    count=fread(&data[0][0], sizeof(char), 50*50, fp);
    fclose(fp);

    {   //input check
        int i;
        char *p = &data[0][0];
        for(i=0;i<count;++i)
            putchar(*p++);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T10:34:32.250

编辑：@BLUEPIXY 的答案明显优于这种方法。

@Hidde 的代码适用于这个特定的例子：

```
// Include the standard input / output files.
// We'll need these for opening our file
#include <stdio.h>

int main ()
{
    // A pointer to point to the memory containing the file data:
    FILE * pFile;

    // Open the file itself:
    pFile=fopen ("250.txt","r");
    // Check that we opened the file successfully:
    if (pFile==NULL)
    {
        perror ("Error opening file");
    }
    else
    {
        // The file is open so we can read its contents.
        // Lets just assume its got 50*50=250 chars in.

        // Initialise an array to hold our results:
        char array[50][50];
        int row, col;
        for (row = 0; row < 50; row++)
        {
            for (col = 0; col < 50; col++)
            {
                // Store the next char from our file in our array:
                array[row][col] = fgetc (pFile);
            }
        }

        // Close the file
        fclose (pFile);

        // Demonstrate that we've succeeded:
        for (row = 0; row < 50; row++)
        {
            for (col = 0; col < 50; col++)
            {
                printf("%c", array[row][col]);
            }
            printf("\n");
        }
    }
    // Return 0 indictaes success
    return 0;
} 
```

确实应该有一些代码来检查输入文件是否符合您的期望，否则可能会发生奇怪的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T10:04:06.003

```
/* fgetc example: money counter */
#include <stdio.h>
int main ()
{
  FILE * pFile;
  int c;
  int n = 0;
  pFile=fopen ("myfile.txt","r");
  if (pFile==NULL) perror ("Error opening file");
  else
  {
    do {
      c = fgetc (pFile);
      if (c == '$') n++;
    } while (c != EOF);
    fclose (pFile);
    printf ("The file contains %d dollar sign characters ($).\n",n);
  }
  return 0;
} 
```

从[CPlusPlus.com](http://www.cplusplus.com/reference/clibrary/cstdio/fgetc/)复制。您可以使用 读取文件`fgetc(FILE* )`。您创建一个 while 循环，在其中测试读取的最后一个字符是否不是文件的结尾。我希望你能用这段代码填充你的数组。

# c# - 想要在天气应用程序中添加一个将摄氏温度更改为华氏温度的按钮

> ID：10672460
> 
> 赞同：0
> 
> 时间：2012-05-20T09:58:12.720
> 
> 标签：c#, windows-phone-7

最近我使用 C# 为 windows phone 7 创建了一个天气应用程序。但它只能以摄氏度显示温度，但我想在 settings.xaml 页面中创建一个按钮，该按钮可以选择摄氏度或华氏度（目前我还没有为此创建任何按钮，应用程序将自动显示摄氏温度）。有人可以帮我吗？？？提前感谢您的辛勤工作。

以下是我使用的代码-：

```
private void ForecastDownloaded(object sender, DownloadStringCompletedEventArgs e)
{
    if (e.Result == null || e.Error != null)
    {
            MessageBox.Show("Cannot load Weather Forecast!");
    }
    else
    {
        XDocument document = XDocument.Parse(e.Result);
        var data1 = from query in document.Descendants("current_condition")
                   select new Forecast
                   {
                       observation_time = (string) query.Element("observation_time"),
                       temp_C = (string)query.Element("temp_C"),
                       temp_F = (string)query.Element("temp_F"),
                       weatherIconUrl = (string)query.Element("weatherIconUrl"),
                       weatherDesc = (string)query.Element("weatherDesc"),
                       humidity = (string)query.Element("humidity"),
                       windspeedMiles = (string)query.Element("windspeedMiles"),
                       windspeedKmph = (string)query.Element("windspeedKmph")
                   };

        Forecast forecast = data1.ToList<Forecast>()[0];

        var data2 = from query in document.Descendants("weather")
                    select new Forecast
                    {
                        date = (string)query.Element("date"),
                        tempMaxC = (string)query.Element("tempMaxC"),
                        tempMaxF = (string)query.Element("tempMaxF"),
                        tempMinC = (string)query.Element("tempMinC"),
                        tempMinF = (string)query.Element("tempMinF"),
                        weatherIconUrl = (string)query.Element("weatherIconUrl"),
                    };

        List<Forecast> forecasts = data2.ToList<Forecast>();

        for (int i = 0; i < forecasts.Count(); i++)
        {
            forecasts[i].date = DateTime.Parse(forecasts[i].date).ToString("dddd");
        }

         AddPanoramaItem(forecast,forecasts); 
    }
}

private void AddPanoramaItem(Forecast forecast, List<Forecast> forecasts)
{
    PanoramaItemObject pio = new PanoramaItemObject();
    pio.temperature = "Temperature: " + forecast.temp_C + " °C";
    pio.observation_time = "Observ. Time: " + forecast.observation_time;
    pio.windspeed = "Wind Speed: " + forecast.windspeedKmph + " Kmph";
    pio.huminity = "Huminity: " + forecast.humidity + " %";
    pio.weatherIconUrl = forecast.weatherIconUrl;
    pio.forecasts = forecasts;

    PanoramaItem panoramaItem = new PanoramaItem();
    panoramaItem.Header = queries[query];
    int index = queries[query].IndexOf(",");
    if (index != -1) panoramaItem.Header = 
        queries[query].Substring(0, queries[query].IndexOf(","));
    else panoramaItem.Header = queries[query];

    panoramaItem.ContentTemplate = 
       (DataTemplate)Application.Current.Resources["ForecastTemplate"];
    panoramaItem.Content = pio;

    Panorama.Items.Add(panoramaItem);

    query++;
    if (query < queries.Count()) 
        LoadForecast();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:01:12.223

使用这个公式

为 Celcius 到 Farenhite

```
Tc = 5 (Tf-32) /9; 
```

从 Farenhite 到 Celcius

```
Tf = (9/5)*Tc+32 
```

其中`Tc = temperature in degrees Celsius`,`Tf = temperature in degrees Fahrenheit`

# c++ - 如何获取特定年份中指定周数（1-53）的第一个和最后一个日期（日和月）？

> ID：10672461
> 
> 赞同：2
> 
> 时间：2012-05-20T09:58:13.650
> 
> 标签：c++, date

如果给出了特定年份的周数，如何使用 C/C++ 轻松确定一周的第一个和最后一个日期（日和月）？先感谢您！

李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:56:18.713

旧问题的新答案。

此答案包括为标准化而提出的代码并被拒绝。`std::chrono`我提到这一点的原因是，出于提案的目的，代码位于命名空间中。但重要的是要意识到该提议未被接受，因此如果您使用它，您可能应该将提议的部分移动到您自己的命名空间中。它们不是任何标准的一部分，甚至没有被考虑标准化！

这是[我的日期类的用户文档，](http://howardhinnant.github.io/date/date.html)它使这个计算相当容易（假设 ISO 标准周编号）。该文档指向一个标题[`<date>`](http://howardhinnant.github.io/date)和一个源[date.cpp](http://howardhinnant.github.io/date.cpp)，它实现了该提案。

使用这些资源和下面显示的两个非常简短的辅助函数，这是一个程序，它需要一个星期数和年份，并打印出民用（公历）中该周的第一天（星期一）和最后一个（星期日）：

```
#include "date"
#include <utility>
#include <iostream>

std::chrono::date
week_to_date(int weeknum, std::chrono::weekday wd, std::chrono::year y)
{
    using namespace std::chrono;
    return (mon <= jan/_4th/y) + days((weeknum - 1)*7 + (wd == 0 ? 6 : wd - 1));
}

std::pair<std::chrono::date, std::chrono::date>
get_dates(unsigned week_num, unsigned y)
{
    using namespace std::chrono;
    return std::make_pair(week_to_date(week_num, mon, year(y)),
                          week_to_date(week_num, sun, year(y)));
}

int main()
{
    auto p = get_dates(9, 2013);
    std::cout << p.first << '\n';
    std::cout << p.second << '\n';
} 
```

对我来说，这打印出来：

```
2013-02-25
2013-03-03 
```

中的 return 语句`week_to_date`可以使用一点解释：

```
(mon <= jan/_4th/y) 
```

上面的表达式构造了一个日期，它是 y 年 1 月 4 日或之前的星期一。然后，我在该日期之前的每周添加 7 天`weeknum`：

```
+ days((weeknum - 1)*7 
```

最后，如果工作日 ( `wd`) 是星期日，我添加 6 天，否则我添加`wd-1`以星期一 == 1、星期二 == 2、星期六 == 6（星期日 == 0）编号的天数。

```
+ (wd == 0 ? 6 : wd - 1)) 
```

最后一步是考虑到基于 ISO 周的日历周从星期一开始，而日期类的这个实现遵循从星期日开始的一周的 C/C++ 约定。

该[提案](http://howardhinnant.github.io/date/date.html)实际上包括定义`week_to_date`和基于 ISO 周的年份，尽管这些在提案中只是作为如何使用日期类的示例而不是提案的一部分。

随意使用该代码，但我强烈建议先将其从命名空间 std 中删除。源代码足够短，这样的小修改应该不难。

* * *

**更新**

这个答案的链接已经过时，所以我更新了它们。但是，除了更新链接之外，我还想提请注意对上面链接的库的重新设计。重新设计对效率有了新的关注，包括在编译时已知所有输入时的编译时日期计算。

鉴于 C++14 的支持，即“日期常量”现在是真实的。

[此处记录了](http://howardhinnant.github.io/date/date.html)这个重新设计的库，其中包含从文档链接的单个标头实现。语法类似，但与上面介绍的不完全相同：

```
#include "date.h"
#include <iostream>

constexpr
date::year_month_day
week_to_date(int weeknum, date::weekday wd, date::year y)
{
    using namespace date;
    auto const dp = sys_days(jan/4/y);
    auto const wdjan4 = weekday(dp);
    return dp - (wdjan4 - mon)
       + days((weeknum - 1)*7 + (wd == sun ? 6 : static_cast<unsigned>(wd) - 1));
}

constexpr
std::pair<date::year_month_day, date::year_month_day>
get_dates(int week_num, date::year y)
{
    using namespace date;
    return std::make_pair(week_to_date(week_num, mon, y),
                          week_to_date(week_num, sun, y));
}

int
main()
{
    using namespace date;
    constexpr auto p = get_dates(9, 2013_y);
    static_assert(p.first == feb/25/2013, "");
    static_assert(p.second == 2013_y/mar/3, "");
    std::cout << p.first << '\n';
    std::cout << p.second << '\n';
} 
```

两个主要区别是（在 C++14 中）可以进行计算`constexpr`。并且`operator<=`不再可用于查找工作日等于或早于日期的日期。相反，这个功能是由“工作日减法”处理的，它总是产生一个正数（从 weekday1 到 weekday2 需要多少天？）。

该程序的输出与以前的版本相同：

```
2013-02-25
2013-03-03 
```

现在最大的不同是编译时常量被输出到`std::cout`. 但是相同的代码（减去`static_asserts`）适用于运行时输入。

**节拍继续**

结合上面介绍的库，加上一个新的兼容[`"iso_week.h"`](https://github.com/HowardHinnant/date/blob/master/iso_week.h)库，大大简化了上述计算的语法：

```
#include "date.h"
#include "iso_week.h"
#include <iostream>

int
main()
{
    using namespace iso_week::literals;
    auto y = 2013_y;
    auto wn = 9_w;
    std::cout << "The dates for " << y/wn << " are "
              << date::year_month_day{y/wn/mon} << " through "
              << date::year_month_day{y/wn/sun} << '\n';
} 
```

输出：

```
The dates for 2013-W09 are 2013-02-25 through 2013-03-03 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:27:40.257

这受到当地周编号规则的严重影响。对于一周的开始日期，至少有两个通用规则，对于在年初将哪一周编号为 1，有三个通用规则。

避免无休止地修改那种代码并使用库。ICU 图书馆的日历类涵盖了这一点。相关介绍页面[在这里](http://userguide.icu-project.org/datetime/calendar)。检查页面底部 WEEK_OF_YEAR 字段中的注释。

# java - 在 Java 或 MYSQL 中检查特殊字符更好吗？

> ID：10672467
> 
> 赞同：1
> 
> 时间：2012-05-20T09:59:14.570
> 
> 标签：java, mysql, regex, special-characters

在保存用户输入的数据之前，我想检查输入的数据是否有特殊字符。**不想保存特殊字符**

可以在此[链接中给出的 JAVA 中检查特殊字符](https://stackoverflow.com/questions/1795402/java-check-a-string-if-there-is-a-special-character-in-it)

可以在 MYSQL 中完成特殊字符的检查，如本[链接所示](https://stackoverflow.com/questions/4990530/regex-in-mysql-query)

我想知道，在性能方面，检查 JAVA 或 MYSQL 中的特殊字符是否更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T10:03:50.187

如果您的 MySQL 数据库用于存储数据，您应该只传递有效数据——这意味着验证*（在您的情况下检查特殊字符）*应该在进入数据库**之前完成——因此，在 Java 端。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T10:06:31.653

在 Java 中执行此操作更有效，因为您将节省到数据库的往返行程。用Java来做也比较合乎逻辑，因为这是业务逻辑，业务逻辑一般应该在应用程序代码中，而不是在数据库中。

以下是一些关于性能的良好经验法则：

*   不要将所有设计选择都基于性能。尝试使您的代码干净、结构良好并首先工作。然后，如果您有性能问题，请测量以了解它的来源。然后只在必要的地方进行优化。过早的优化是万恶之源。
*   处理内存中数据的某些代码行几乎总是比进程间调用快几个数量级，甚至比网络调用快几个数量级。记忆是隔壁的房子。数据库是火星。

# asp.net-mvc-3 - 在 nopcommerce 中使用通配符 SSL

> ID：10672468
> 
> 赞同：1
> 
> 时间：2012-05-20T09:59:26.210
> 
> 标签：asp.net-mvc-3, ssl-certificate, nopcommerce

我有一个*通配符 SSL 证书*。我想在**nopcommerce** 2.5 版中使用它。我可以在管理部分看到一个功能，它说使用 SSL，然后它要求提供**Shared SSL URL:**和**Non-secured URL:**。这个**Shared SSL**是否意味着与**Wildcard SSL**相同。请任何人都可以帮助我如何在 nopcommerce 中使用通配符 SSL。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:14:46.683

我想这是一个带有 SSL 证书的 URL。不一定表示通配符，尽管它可以是通配符、SAN 或标准单域证书。

# sql - 如何在 CakePHP 的 order 参数中使用 IF(bool, a, b) 子句？

> ID：10672473
> 
> 赞同：0
> 
> 时间：2012-05-20T10:01:11.420
> 
> 标签：sql, cakephp

我正在编写一个 SQL 查询以按价格升序订购产品，但最后放置价格为 0 的产品。

据我所知，我可以用`ORDER BY IF(price=0,1,0) ASC, price ASC`它来完成它。但是当我传递`'order' => array('IF(Product.price=0, 1, 0) ASC', 'Product.price' => 'ASC')`给 CakePHP 中的分页组件时，该`IF`部分会自动关闭。

我想知道如何使用 CakePHP 样式的参数数组在 CakePHP 中完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:24:19.280

我想你想要这个...

```
if($condition) ? /**want do you want if true/ : /** do what you want if false/; 
```

希望有帮助

# java - JDBC MySQL查询错误？

> ID：10672478
> 
> 赞同：1
> 
> 时间：2012-05-20T10:01:40.310
> 
> 标签：java, mysql, sql, jdbc

我正在尝试将一些数据插入到 mysql 数据库中，但是我收到一个错误，并且我找不到代码的错误。我不擅长mysql。

```
String insertQuery = "insert into books(title, author, description, prize)values("
            + title
            + ","
            + author
            + ","
            + desc
            + ", "
            + prize
            +  ");";

mysql> describe books;
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| book_id     | int(11)      | NO   | PRI | NULL    |       |
| title       | varchar(64)  | YES  |     | NULL    |       |
| author      | varchar(64)  | YES  |     | NULL    |       |
| description | varchar(500) | YES  |     | NULL    |       |
| prize       | float        | YES  |     | NULL    |       |
| added       | datetime     | YES  |     | NULL    |       |
+-------------+--------------+------+-----+---------+-------+
6 rows in set (0.01 sec) 
```

我得到的错误是，

```
Query: insert into books(title, author, description, prize)values(sfdfdf,fdfdf,Please    limiasasaat your response to 500 characters., 78.9);
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'limiasasaat your response to 500 characters., 78.9)' at line 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T10:06:55.223

您的字符串值没有用单引号括起来。试试这个：

```
String insertQuery = "insert into books(title, author, description, prize)values('"
            + title
            + "','"
            + author
            + "','"
            + desc
            + "', "
            + prize
            +  ");"; 
```

[RoseIndia 准备好的声明示例](http://www.roseindia.net/jdbc/jdbc-mysql/PreparedStatementSetObject.shtml)

**更新 1**

PreparedStatement 示例：

```
//other codes here
String iSQL = "Insert into books(title, author, description, prize) values (?,?,?,?)";
// con is your active connection object
PreparedStatement pstmt = con.prepareStatement(iSQL);
pstmt.setString(1, title);
pstmt.setString(2, author);
pstmt.setString(3, desc);
pstmt.setFloat(4, prize);
pstmt.executeUpdate();
//other codes here 
```

但不要忘记在你班上的这句话：`import java.sql.*;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T10:03:34.113

`varchar`您的问题是我认为您的参数周围没有引号。

您可以通过简单地在需要它们的参数周围包含引号来解决此问题：

```
String insertQuery = "insert into books(title, author, description, prize)values('"
            + title
            + "','"
            + author
            + "','"
            + desc
            + "', "
            + prize
            +  ");"; 
```

但是，这仍然不是一个好的解决方案，因为您仍然无法处理任何包含单引号的输入（如果`desc`参数包含字符串`Don't try this`，则查询将失败，因为`'`in`don't`将终止`desc`参数并且解析器将然后期望`,`但会遇到`t try this`）并且容易受到[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。

你应该做的是使用准备好的语句。这使其安全，您无需担心转义问题，因为这一切都已为您处理。您可以破解它以如上所述工作。但是为了您自己的理智，以及所有在您之后必须处理您的代码的人，请花一点时间来学习准备好的语句并使用它们。未来的你会感谢现在的你。

[oracle java网站上](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)有一个prepared statement tutorial 。

使用基于索引的预处理语句对我来说总是有点脆弱。有一个[示例说明如何按名称绑定参数，](http://www.javaworld.com/javaworld/jw-04-2007/jw-04-jdbc.html)这可以使 PreparedStatements 更易于阅读，因此它们最终可能是这样的：

```
String iSQL = "Insert into books(title, author, description, prize) values (:title,:author,:description,:prize)";

NamedParameterStatement pstmt =new NamedParameterStatement(connection,iSQL);
pstmt.setString("title", title);
pstmt.setString("author", author);
pstmt.setString("description", desc);
pstmt.setFloat("prize", prize);
pstmt.executeUpdate(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T10:11:28.637

我建议使用Prepared Statement，但如果你仍然想按照你的方式进行，那么你将不得不以某种方式告诉MYSQL这是一个字符条目，这是一个整数条目。

要定义字符条目和整数条目之间的区别，您必须在字符条目周围添加单引号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T12:01:13.763

使用preparedStatement。在值会发生变化的地方使用语句肯定会导致您得出这样的结论。johntotetwoo 给出了一个很好的例子。看看它。

# asp.net - 在选定的 linq 数组中插入对象

> ID：10672482
> 
> 赞同：0
> 
> 时间：2012-05-20T10:02:29.720
> 
> 标签：asp.net, linq, c#-4.0

我实现了以下方法来获取要绑定到下拉列表的部门数组

```
public object[] GetDepartmentOptions()
{
   var departments = from p in context.per_Departments
                     where p.active == true
                     select new { DisplayText = p.departmentNameEn, 
                                  Value = p.departmentId };
   return departments.ToArray();
} 
```

我想在绑定之前在这个数组中插入对象

```
object =new { DisplayText = "Choose", Value = 0 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:39:59.403

出于某种原因，它仅在您的第一个序列是“选择”序列时才有效：

```
 var first = new[] { new { DisplayText = "Choose", Value = 0 } };
    return first.Concat(departments).ToArray(); 
```

# php - 文本框 onBlur 事件上的 JavaScript 函数执行

> ID：10672487
> 
> 赞同：0
> 
> 时间：2012-05-20T10:03:40.293
> 
> 标签：php, javascript

我写了以下内容：

```
function loginName(txtLogin){
    var l = document.getElementById('txtLogin').value;
    <?php
        $query = sprintf("Select * from register where LoginName='%s'",
                        mysql_real_escape_string(l));

        //$query =  "Select * from register where UserName=$Username and     Pwd=$Password";
        $result = mysql_query($query);
        if($result)
        {
            $num_rows =  mysql_num_rows($result);
        }
    ?>
    if($num_rows < 1)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

并在 onBlur 事件上调用该函数，如下所示：

```
 $('#txtLogin').blur(function() {
      if(loginName('txtLogin'))
      {
          //alert('Email is valid');
      }
      else
      {
          alert('Type another login name.');
      }
   }); 
```

但是当我输入与数据库中存在的登录名相同的登录名时，它没有显示错误。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:10:04.957

您不能在`<script>`标签内执行 PHP，因为它只在客户端执行，而 PHP 是一种服务器端语言。取而代之的是，您需要使用 AJAX 来检查用户名的有效性。顺便说一句，您直接从某处复制和粘贴您的代码，因为`return`它不是方法之外的有效关键字。如果您熟悉[jQuery](http://jquery.com/)（一个 javascript 库），我建议您将它用于 AJAX 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T10:10:07.870

PHP 代码在页面被解析时运行。如果您希望它在执行 JS 函数时运行，那么您需要在外部文件中编写 PHP 代码并通过 AJAX 调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T10:10:30.707

PHP 在服务器上运行并输出一些文本。

然后，该文本被浏览器解释为 HTML 和 JavaScript。

当您调用 JavaScript 函数时，其中的任何 PHP 都将已经运行。您不能像那样将变量从 JavaScript 传递给 PHP。

您必须发出新的 HTTP 请求（例如，通过提交表单或使用 Ajax）。

# c# - 我如何改进这个价格计算代码，现在进行 4 次计算，但在不久的将来会有更多？

> ID：10672491
> 
> 赞同：5
> 
> 时间：2012-05-20T10:04:00.373
> 
> 标签：c#, design-patterns

我正在尝试研究如何改进我编写的一些代码，该代码使用一些规则来计算汽车保险的一些不同定价。这是困扰我的部分：

```
public Insurance GetInsurance(CarData carData)
{
    var insurance = new Insurance();

    insurance.priceGeneral = this.CalculatePrice(new Car { BrandDealer = false, MonthPayment = false, CarData = carData });
    insurance.priceGeneralMonth = this.CalculatePrice(new Car { BrandDealer = false, MonthPayment = true, CarData = carData });
    insurance.priceBrandDealer = this.CalculatePrice(new Car { BrandDealer = true, MonthPayment = false, CarData = carData });
    insurance.priceBrandDealerMonth = this.CalculatePrice(new Car { BrandDealer = true, MonthPayment = true, CarData = carData });

    return insurance;
} 
```

请注意，计算每月付款与正常价格（每年付款）之间存在显着差异，并且取决于 BrandDealer 是真是假，它的计算方式也不同。我试图消除这个变量，但客户要求这些规则。

我知道某些属性不是“汽车”的实际属性，但我也会尽快对其进行重构。

我为这个计算做了 4 次而烦恼，以后会有更多的规则。即将到来的新规则将添加另一个布尔值和另外 2 个计算。

是否有一些不错的设计模式我没有在这里发现我应该使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T20:53:23.137

首先，让我们解决您今天遇到的问题，这是一种清理重复计算代码的方法。

首先，我们需要将 Stratgey 模式应用到您的价格计算中，定义计算接口并将不同的计算逻辑代码移动到它们的新位置：

```
// calculation common interface
public interface IPriceCalculation 
{
   public InsurancePrice CalculatePrice(CarData data);   
}

// result from the calculation
public class InsurancePrice
{
   public string Description { get; set; }
   public decimal Price { get; set; }      
}

// concrete implementations 
public class BrandDealerMonthlyPaymentCalculation : IPriceCalculation
{
   public InsurancePrice CalculatePrice(CarData data)
   {
      // logic to perform calculation of BrandDealer = true, MonthPayment = true

      // just for example...
      return new InsurancePrice() 
      { 
         Description = "Policy price with a Brand dealer and monthly payments",
         Price = 250.25;
      };
   }
}

public class BrandDealerYearlyPaymentCalculation : IPriceCalculation
{
   public InsurancePrice CalculatePrice(CarData data)
   {
      // logic to perform calculation of BrandDealer = true, MonthPayment = false
   }
}

public class NonBrandDealerYearlyCalculation : IPriceCalculation
{
   public InsurancePrice CalculatePrice(CarData data)
   {
      // logic to perform calculation of BrandDealer = false, MonthPayment = false
   }
}

public class NonBrandDealerMonthlyCalculation : IPriceCalculation
{
   public InsurancePrice CalculatePrice(CarData data)
   {
      // logic to perform calculation of BrandDealer = false, MonthPayment = true
   }
} 
```

定义计算后，您可以安装它们。在定义 GetInsurance 方法的类（我们称之为 InsuranceFactory）中，我们将在您的 ctor 中执行此操作。这可以通过另一个类通过属性、通过配置、通过 DI 等将它们推入来完成，但是为了说明，ctor 是最简单的：

```
public class InsuranceFactory
{
   private List<IPriceCalculation> _priceCalculators = new List<IPriceCalculation>();

   public InsuranceFactory()
   {
      _priceCalculators.Add(new BrandDealerYearlyPaymentCalculation());
      _priceCalculators.Add(new BrandDealerMonthlyPaymentCalculation());
      _priceCalculators.Add(new NonBrandDealerYearlyCalculation());
      _priceCalculators.Add(new NonBrandDealerMonthlyCalculation());
      // easy to add more calculations right here...
   }

} 
```

接下来我们重新访问上面 InsuranceFactory 类中的 GetInsurance 方法：

```
public Insurance GetInsurance(CarData carData) 
{     
   var insurance = new Insurance();      

   // iterate the different pricing models and them to the insurance policy results

   foreach (IPriceCalculation calculator in _priceCalculators)
   {
      insurance.PriceOptions.Add(calculator.CalculatePrice(carData));
   }

   return insurance; 

} 
```

请注意，您的 GetInsurance 方法不再需要在每次创建新计算时进行更改。同样，通过将结果存储在保险对象 ( `insurance.PriceOptions`) 中的列表中，您的保险类别也不需要更改。您的 UI 代码可以通过迭代该列表来呈现所有选项。这个例子稍微简化了一点，但应该可以帮助你。

现在谈谈我可以预料到的可能的第二个问题。如果你的计算子类开始有额外的排列，你将会有一个类爆炸。例如，现在您有 2 个因素（Brand 和 PaySchedule），每个因素有 2 个选择，给您 2 x 2 = 4 个类。但是，如果我们将 CreditScore 添加到其中，有 3 个选项（Goor、Fair、Poor）会怎样。然后你得到：

```
GoodCreditBrandDealerYearlyPaymentCalculation
GoodCreditBrandDealerMonthlyPaymentCalculation
GoodCreditNonBrandDealerYearlyCalculation
GoodCreditNonBrandDealerMonthlyCalculation
FairCreditBrandDealerYearlyPaymentCalculation
FairCreditBrandDealerMonthlyPaymentCalculation
FairCreditNonBrandDealerYearlyCalculation
FairCreditNonBrandDealerMonthlyCalculation
PoorCreditBrandDealerYearlyPaymentCalculation
PoorCreditBrandDealerMonthlyPaymentCalculation
PoorCreditNonBrandDealerYearlyCalculation
PoorCreditNonBrandDealerMonthlyCalculation 
```

这只会从这里变得更糟。如果出现，这确实值得自己提问和回答，但这是您应该注意的事情。如果它开始变成这样，请重构 Calculation 类。但好的是 GetInsurance 中的代码仍然不需要更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:25:58.693

真正突出的一件事是每次计算时都会创建 4 个新的 Car 对象。这完全有必要吗？您可以使用不同的 BrandDealer/MonthlyPayment 组合预先创建（并存储）其中的 4 个，然后仅使用它们来计算传入适当的 CarData 吗？

此外，使用某种计算工厂可能会更好地实现这一点，该计算工厂抽象/隐藏所需的不同 Car 对象和其他计算细节。考虑为每种计算类型添加内部方法，这样对于新的计算，您只需添加另一种方法，而不是修改一个大方法。通常，这可以通过添加计算对象而不是方法来实现，但这对于这种特殊情况可能是多余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T10:14:32.990

您需要做的是将计算分解为更小的组件。您需要找到通用代码并将其保存在地图中。假设 calc 1 = A * B + C. 和 calc 2 = A * C - b

您只需要执行一次 A ， B ，C 并将其保存在 hashmap 中。现在计算 2 = hash.getOrAdd(A key) * hash.getOrAdd(C key) - hash.getOrAdd(C key)。

如果您找不到任何通用代码，那么您很不走运，需要执行所有计算。

# java - java中没有出现在屏幕上的加载程序屏幕

> ID：10672493
> 
> 赞同：-1
> 
> 时间：2012-05-20T10:04:36.457
> 
> 标签：java, swing, awt

我正在尝试在 java 中制作加载程序屏幕。到目前为止，我已经成功地为我的程序制作了启动画面，启动画面工作正常。我使用相同的代码来创建加载程序，但是当我调用对象时，只有睡眠部分起作用，我的意思是屏幕上没有真正出现。

```
public class IL extends JWindow {
Image L=Toolkit.getDefaultToolkit().getImage("L.png");
ImageIcon LI=new ImageIcon(L);

public IL (){
try  
{  
setSize(LI.getIconWidth(),LI.getIconHeight());  
setLocationRelativeTo(null); 
show();  
Thread.sleep(10000);  
dispose();  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:14:19.590

你用 that 阻塞了 UI 线程`sleep`，基本上阻止它显示任何东西。

您应该为此使用计时器。请参阅[如何使用 Swing 计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)和 Swing [`Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)API 文档。无论您想要多少时间，您都可以使用计时器进行隐藏/处置。您还可以使用该计时器来显示进度条或为加载器页面设置动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T10:33:59.280

由于我有一个方便的，一个完整的实现。

```
import java.awt.Image;
import java.awt.event.*;
import javax.swing.*;
import java.net.URL;
import javax.imageio.ImageIO;

public class Splash extends JWindow {

    public Splash(Image image, int millis){
        ImageIcon icon=new ImageIcon(image);
        add(new JLabel(icon));
        pack();
        setLocationRelativeTo(null);
        ActionListener hideAction = new ActionListener() {
            public void actionPerformed(ActionEvent ae) {
                dispose();
            }
        };
        Timer timer = new Timer(millis, hideAction);
        setVisible(true);
        timer.start();
    }

    public static void main(String[] args) throws Exception {
        final Image image = ImageIO.read(
            new URL("http://pscode.org/media/stromlo2.jpg"));
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new Splash(image, 6000);
            }
        });
    }
} 
```

# .net - 线程启动是否有隐式内存屏障？

> ID：10672495
> 
> 赞同：4
> 
> 时间：2012-05-20T10:05:07.223
> 
> 标签：.net, clr

即当我启动一个新线程时，在线程从新启动的线程开始之前读取任何初始化的变量是否安全？

UPD 为什么我要问？因为一些开发人员认为它确实有，并且没有在那里使用任何显式的内存屏障。而且我无法重现该代码中的任何错误。但是，文档[http://msdn.microsoft.com/en-us/library/ms686355(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms686355(v=vs.85).aspx)并没有说这是安全的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T12:08:05.930

是的，操作系统提供了隐含的屏障。如果不使用保护线程调度程序数据结构的内部锁，它就无法启动线程。

据我所知，这并没有明确*承诺*。从 .NET 2.0 开始，Thread 和 ProcessThread 之间不再有直接对应关系。应 SQL Server 团队的要求，此链接已断开，该团队希望使用光纤实现线程。这实际上并没有发生，当他们无法使其足够可靠时，他们放弃了该项目。鉴于这个项目的结果，而且我所知道的主流项目都没有尝试再次利用这一点，以及实现不使用锁的线程支持的困难，我认为可以安全地假设您可以依靠隐式障碍。

# java - 如何设置 Eclipse 编辑器屏幕和包资源管理器视图？

> ID：10672496
> 
> 赞同：3
> 
> 时间：2012-05-20T10:05:10.587
> 
> 标签：java, android, eclipse, package-explorer

实际上我想出了一个我很久没有遇到的问题。在做项目时，我通常会并排看到我的包资源管理器和编辑器屏幕，但我不知道他们在上面显示的内容发生了什么。下图解释了错误..

![我希望我的屏幕如何...](../Images/3d2feed41e5537a58101413021a085ee.png)

![但它以这种模式显示](../Images/d6a09e8c4e508536303e4925ea50f1d2.png)

任何人都可以帮助我如何让我的编辑器屏幕和包浏览器并排......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-20T10:09:46.113

问题是您的班级文本编辑器已最大化，并且您的项目浏览器在班级的文本编辑器上重叠

你应该这样做，`windows->Reset perspective->Yes`然后eclipse重置你的视角......

# java - 如何在 Java 中填充通用列表的列表？

> ID：10672499
> 
> 赞同：2
> 
> 时间：2012-05-20T10:05:16.653
> 
> 标签：java

观察以下代码：

```
private List<List<Place>> m_grid = constructGrid(10000);

private static List<List<Place>> constructGrid(int size) {
  List<List<Place>> res = new ArrayList<List<Place>>(size);
  for (int i = 0; i < size; ++i) {
    res.add(null);
  }
  return res;
} 
```

它是沉闷的。有没有更漂亮的方法来做同样的事情？使用某种标准库的单班轮？

谢谢。

**编辑**

该列表必须是可变的。因此，`Collections.nCopies`不适合该法案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T10:14:20.323

我真的不明白为什么你`10000`的列表中需要空值，但如果你想这样做，你可以这样做：

```
List<List<Place>> tmp = Collections.nCopies(10000, null); // immutable
List<List<Place>> res = new ArrayList<List<Place>>(tmp);  // mutable 
```

# ios - 找不到 changeMapTyp iOS 的协议声明

> ID：10672500
> 
> 赞同：0
> 
> 时间：2012-05-20T10:05:17.893
> 
> 标签：ios, protocols, delegation

我目前收到错误“找不到 changeMapTyp 的协议声明”，我不知道为什么。我导入了所有必需的文件，但它并没有解决我的问题。

正如我在评论中提到的，当我删除`#import MapsViewController.h`中的 时，错误消息消失了`MapsBackgroundViewController.h`，但我不能删除该行，因为我需要写这行

```
MapsViewController *myMapsViewController = [[MapsViewController alloc] init];
[self setDelegate:myMapsViewController]; 
```

设置我的代表。我对吗？

这是我的代码：

MapsBackgroundViewcontroller.h

```
#import "MapsViewController.h"

@protocol ChangeMapTyp <NSObject>
@required
- (void)segmentedControllChangedMapType:(MKMapType) type ;
@end

@interface MapBackgroundViewController : UIViewController{
IBOutlet UISegmentedControl *segmentedControl;
MKMapType mapType;
id < ChangeMapTyp> delegate;

}

@property (nonatomic) IBOutlet UISegmentedControl *segmentedControl;

@property(nonatomic) MKMapType mapType;

@property(nonatomic)id delegate;

- (IBAction)segmentedControllChanged:(id)sender; 
```

MapsBackgroundViewController.m

```
#import "MapBackgroundViewController.h"

@interface MapBackgroundViewController ()

@end

@implementation MapBackgroundViewController
@synthesize segmentedControl, mapType, delegate;

- (void)viewDidLoad
{
    [super viewDidLoad];

    // that´s why I can´t delete the import ???
    MapsViewController *myMapsViewController = [[MapsViewController alloc] init]; 
    [self setDelegate:myMapsViewController];    
 }

- (IBAction)segmentedControllChanged:(id)sender {

    if (segmentedControl.selectedSegmentIndex == 0) {
        mapType = MKMapTypeStandard;
    }else if (segmentedControl.selectedSegmentIndex == 1) {
        mapType = MKMapTypeSatellite;
    } else if (segmentedControl.selectedSegmentIndex == 2) {
     //   [self.delegate setMapType:MKMapTypeHybrid];
        mapType = MKMapTypeHybrid;
    }

    //Is anyone listening
    if([delegate respondsToSelector:@selector(segmentedControllChangedMapType:)])
    {
        //send the delegate function with the amount entered by the user
        [delegate segmentedControllChangedMapType:mapType];
    }  
    [self dismissModalViewControllerAnimated:YES];    
} 
```

MapsViewController.h

```
#import "MapBackgroundViewController.h"

@class MapBackgroundViewController;

@interface MapsViewController : UIViewController<MKMapViewDelegate,
UISearchBarDelegate,   ChangeMapTyp >{        //here i get the error message
@private
IBOutlet MKMapView *map;

}

@property (nonatomic, retain) IBOutlet MKMapView *map;

@end 
```

MapsViewController.m #import "MapBackgroundViewController.h"

```
@interface MapsViewController ()

@end

@implementation MapsViewController

@synthesize map;

- (void)segmentedControllChangedMapType: (MKMapType) type{
    map.mapType = type;   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:17:00.143

在`MapsViewController.h`中，您需要 -

```
#import "MapBackgroundViewController.h" //Keep This line

@class MapBackgroundViewController;   // Remove this line

@interface MapsViewController : UIViewController<MKMapViewDelegate,UISearchBarDelegate,   ChangeMapTyp >{ 
```

希望这能解决您的问题。

# sql - 能够插入重复值作为主键

> ID：10672502
> 
> 赞同：0
> 
> 时间：2012-05-20T10:05:38.687
> 
> 标签：sql, sqlite

我在 websql/sqllite 中创建了一个主键为 pNum 的表

```
('CREATE TABLE IF NOT EXISTS sInfo (pNum INTEGER NOT NULL PRIMARY KEY, tStamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP, status varchar(20));');
('CREATE TABLE IF NOT EXISTS sData (pNum INTEGER , photoPath varchar(255) , FOREIGN KEY (pNum) REFERENCES surveyInfo(pNum));'); 
```

但我能够插入重复值作为主键。下面是我用来插入数据的javascript代码

```
tr.executeSql("INSERT INTO sInfo('pNum','status') values('" + policy_num + "','" + status + "');"); 
```

如果我插入 ... 46,'ok 和 46,'falied'
两个值都会被添加。

即使我使用了主键，我怎样才能防止重复值..我的陈述有什么问题吗

# iphone - 如何将 iOS 项目更改为根本不使用 nib 而只使用 Objective-C 代码？

> ID：10672503
> 
> 赞同：0
> 
> 时间：2012-05-20T10:05:42.777
> 
> 标签：iphone, ios, xcode, xib, nib

在 Xcode 4.3.2 上创建单视图应用程序后，我们可以做一些事情来使项目完全不使用`.nib`(the `.xib`) 吗？

现在我们可以点击`.xib`并将其在 Xcode 中的自定义类更改为我们的 FooView 类，并在`initWithCoder`代替 中进行初始化`initWithFrame`，并且`.xib`仍在使用，但几乎没有修改。

我们可以更改一些东西以使`.xib`根本不使用，而代码将使用`initWithFrame`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:19:14.167

-创建单视图应用程序
-删除自动创建的.xib文件-打开自动创建
的视图控制器并覆盖`-loadView`方法：

```
-(void)loadView
{
    self.view = [[[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]] autorelease]; //If using ARC you must remove autorelease
} 
```

# assembly - 计算偏移量

> ID：10672507
> 
> 赞同：2
> 
> 时间：2012-05-20T10:06:43.820
> 
> 标签：assembly, mips, spim

我有一个家庭作业问题。

我有一个`BNE`指令`0x88888888`，我需要告诉什么是合法的跳转范围。

我的理论是偏移量告诉我我可以去：

*   从 0x8888888 - 4 * 2 ^(15)
*   至 0x88888888 + 4 * (2 ^(15) -1)

我真的不明白为什么以及如何工作，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T22:56:50.967

查找显示指令编码的指令参考，例如[http://en.wikipedia.org/wiki/MIPS_architecture](http://en.wikipedia.org/wiki/MIPS_architecture)

```
000100ss sssttttt CCCCCCCC CCCCCCCC 
```

s 和 t 保存被比较的寄存器，5 位，分别给出寄存器 0 - 31。低 16 位是以指令为单位的偏移量。

（对于 mips）从程序员的角度来看，假设程序计数器提前 1 条指令，4 字节。因此，对于地址 0x88888888，请使用地址 0x88888888+4 = 0x8888888C 进行计算。

指令编码使用二进制补码，因此您的最大前向分支是 0x7FFF 指令，即 0x7FFF<<2 = 0x1FFFC 字节。当符号扩展为 0xFFFF8000 指令时，最大反向分支为 0x8000，以字节为单位，即 0xFFFF8000<<2 = 0xFFFE000

```
0x8888888C + 0x0001FFC = 0x888A8888
0x8888888C + 0xFFFE000 = 0x88868888 
```

程序计数器调整非常简单，可以通过对工作汇编程序生成的工作代码的反汇编来计算。（加上指令参考至少足以看到您必须使用的位数）。

```
00002030 <back>:
    2034:
    2038:   1443fffd    bne v0,v1,2030 <back>
    203c:   00000000    nop
    2040:   1443fffb    bne v0,v1,2030 <back>
    2044:   00000000    nop
    2048:   1443fff9    bne v0,v1,2030 <back>
    204c:   00000000    nop
    2050:   14430003    bne v0,v1,2060 <fore>
    2054:   00000000    nop
    2058:   14430001    bne v0,v1,2060 <fore>
    205c:   00000000    nop

00002060 <fore>: 
```

0x1443FFFD 和 0x1443FFFB 相隔 8 个字节，两个指令相隔。指令中偏移量之间的差异为 2，因此这意味着编码是以指令/字为单位，而不是以字节或半字为单位。前向引用比较容易先做 0x2060 - 0x2050 是 0x10 字节，也就是 4 条指令。偏移量是 3 条指令，0x2060 减去 3 条指令是 0x2054 执行 bne 之后的下一条指令（很有意义，不管是否流水线化，在您执行时，pc 通常至少在下一条指令上，并且当您使用 pc 执行数学运算时，pc 已经完成了该操作）。这可以通过其他三个分支进行验证。0x2058 表示如果不相等则分支一个指令头，这意味着 pc 是 0x205C，前一个。0xFFFD, 反转并添加 1 = 2+1 = 3，因此要向后退三并到达 0x2030，您需要位于 0x203C，比编码指令提前一个。0xFFFB 4+1 = 5，返回 5 条指令，这意味着你从 0x2044 开始，分支后的指令用 0xFFFB 编码。

其他指令集就没有那么简单了。Arm 相当简单，无论是 arm 还是 thumb 模式，您都假设从包含指令开头的地址开始有两条指令，因此在 thumb 模式下 4 个字节，arm 模式下 8 个字节。即使是主要是 32 位指令的 thumb2，从程序员的角度来看，程序计数器也提前 2 条指令。

可变字长指令集，不像 arm、mips 等那样有规律。尽管实际地址被预取，但硬件使用固定规则，就像它使用 thumb2 一样。或者您必须从指令的大小中知道程序计数器的位置并使用该引用。请注意，当您执行时，程序计数器可能在这些处理器上的第一次切割正好在前面的一两条指令处，但是埋在其中的许多（arm，mips）中的流水线预取地址可能是规则的，但更远，或者当您使用分支预测进行超标量，提取可以在任何地方，甚至可以触及硬件中的寄存器（良好的硬件设计不会在简单的读取时修改任何内容，只会写入，您不会读取值并自动递增硬件指针，例如，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:38:11.587

[这个 SPIM 参考](https://www.scss.tcd.ie/~waldroj/itral/spim_ref.html#branch)说：

> 分支指令使用带符号的 16 位偏移字段；因此它们可以向前跳转 2 ^(15) -1 条指令（不是字节）或向后跳转 2 ^(15)条指令。

由于指令似乎总是 4 个字节宽，因此您的推理似乎是正确的，但您已经交换了符号。

最大向后分支（向低地址）是 2 ^(15) -1 指令，即 32767 条指令或 131068 字节，因此您可以达到`0x88888888 - 131068 = 8886888c`.

同样，最大前向分支会将您带到`0x88888888 + 131072 = 0x888a8888`.

# c++ - C++对绑定成员函数的非法操作

> ID：10672523
> 
> 赞同：0
> 
> 时间：2012-05-20T10:09:21.003
> 
> 标签：c++, access-violation

我遇到了非法访问错误的问题，我已经从 Player.h 中删除了默认构造函数，因为我推断问题是由它引起的。我现在遇到的问题是 Level.cpp 需要一个默认构造函数，所以我编辑了 Level.h 文件，如图所示。该问题已解决，但现在我无法将指针返回给玩家。正在显示错误“对绑定成员函数的非法操作”。请问有什么想法吗？我是 C++ 的初学者，任何帮助将不胜感激。

播放器.h：

```
#ifndef _TAG_PLAYER
#define _TAG_PLAYER
#pragma once
#include "Tile.h"
#include "Point.h"

class CGame;
class CPlayer : public CTile
{

public:

CPlayer(Point pos, CGame* game);
~CPlayer();
char getDisplay() ;
virtual bool canMove(const Direction direction, Point p) ;
virtual void move(const Direction direction, Point p);
bool CheckForHome() ;
};
 #endif _TAG_PLAYER 
```

播放器.cpp：

```
#include "Box.h"
#include "Level.h"
#include "Tile.h"

CPlayer::CPlayer(Point pos, CGame* game)
{
this->game=game;
Point p;
p.x=0;
p.y=0;
setPosition(p);
}

CPlayer::~CPlayer()
{
}

bool CPlayer::CheckForHome() {

Point p = getPosition();
bool OnHomeTile;

if(game->getLevel()->getTiles()[p.y][ p.x] == GOAL)
{
    OnHomeTile = true;
} else {
    OnHomeTile = false;
}

return OnHomeTile;
}

char CPlayer::getDisplay()
{
if (CheckForHome())
{
    return SOKOBANONGOAL_CHAR;
}
else
{
    return PLAYER_CHAR;
}
} 
```

级别.h：

```
 #pragma once
 #include "Point.h"
 #include "Tile.h"
 #include "Player.h"
 #include "Box.h"
 #include <list>
 #include <string>

 class CGame;

 class CLevel 
   {
    private:

list<CBox> boxes;
TileType tiles[GRID_HEIGHT][GRID_WIDTH];
CPlayer player(Point p, CGame* game);  -> new declaration
//CPlayer player;                      -> old declaration

 protected:
CGame* game;

 public:
CLevel();
~CLevel();

CPlayer* getPlayer();
list<CBox>* getBoxes();
TileType (*getTiles())[GRID_WIDTH];

}; 
```

Level.cpp 的构造函数

```
 CLevel::CLevel()
  {
this->game=game;
Point p;
p.x=0;
p.y=0;
player(p,game);

memset(tiles, GROUND, sizeof(TileType)*GRID_HEIGHT*GRID_WIDTH);
} 
```

Level.cpp中有错误的函数：

```
CPlayer* CLevel::getPlayer()
{
return &player;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:56:19.327

目前您已声明`player`为成员函数而不是成员变量，这就是您收到奇怪错误消息的原因。您不能像这样混合声明和初始化成员变量。

你的声明应该是

```
CPlayer player; 
```

但是您的 CLevel 构造函数需要对其进行初始化，例如：

```
CLevel() : player(Point(0, 0), game) { } 
```

但是，问题在于目前`CLevel`没有`game`用于初始化播放器的方法。也许您可以将 传递`game`给 的构造函数`CLevel`？

我认为您需要更多地阅读构造函数和成员的初始化。

# c++ - C ++创建一个计数器宏沿所有文件增加

> ID：10672524
> 
> 赞同：0
> 
> 时间：2012-05-20T10:09:21.723
> 
> 标签：c++, macros

我正在尝试定义一个沿我项目的所有源文件增加的宏。与`__COUNTER__`对所有文件分开的宏不同。我尝试在类中使用静态成员变量，例如：

```
class A{
static int GetNextNum() {
 number++;
 return number - 1;
}
private:
  static int number;
};
#define NEXT_NUM A::GetNextNum() 
```

但结果不是我想要的。例如，我希望在此循环中的每次迭代都具有相同的数字（就像 会发生的那样`__COUNTER__`）：

```
for (int i = 0; i < 10; ++i) {
  doSomething(NEXT_NUM)
} 
```

虽然我已经实施了它，但它在每次迭代中都会增加。关于如何实现我需要的任何想法？（我正在使用 Visual Studio，但更喜欢独立于编译器的解决方案）。

编辑：按照这里的要求，这是一个类似于我想做的事情的简约示例。我尝试定义一个类来计算我通过代码的给定部分的次数。以下是我将如何使用这样的类：

```
for (int i = 0; i < 10; ++i) {
  ExecuteCounter(location_id);
  ... do stuff ...
} 
```

还有很多我在析构函数中记录和积累的东西，但我相信这足以让你明白这一点。起初，我使用了一个地图，其中 entry 是我存储我关心的信息的对象，字符串是通过附加`__FILE__`with形成的`__LINE__`（因此唯一地标识了位置），但事实证明这很慢。因此，我决定在其中使用表格和索引，而不是使用地图。这将从整体复杂性中去除对数并显着提高性能。希望这个解释能让我的问题更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:38:21.863

因此，我知道您希望有一个计数器来记录您访问代码中某个位置的次数。

这种事情的基本思想应该很简单，你的宏首先应该扩展为一个静态变量的声明，每次访问该位置时都会递增。

```
static size_t my_count = 0;
++my_count; 
```

如果你没有多线程，会做的伎俩。（如果有，请查看新的原子操作）。

现在，您还希望在某处可以访问计数的最终结果。`static`使用您自己类型的另一个变量最容易做到这一点，该变量`collector`接收计数器的地址和一些用于命名约定的应用程序字符串作为构造函数的参数。

```
#define DO_ACCOUNTING(NAME)                       \
do {                                              \
  static size_t my_count L = 0;                   \
  static collector my_collector(&my_count, #NAME);\
  ++my_count;
} while(0) 
```

这些`do-while`东西只是让这些变量作用域，这样你就不会污染你的名字空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:01:33.513

像这样简单的事情就足够了吗？

```
#include <stdio.h>
int g_counter = 0;   // make it visible to other files through 'extern'
#define UPDATE_COUNTER()   {\
                        static int _this_counter_ = 0;\
                        if (_this_counter_ == 0) {\
                           g_counter++;\
                           _this_counter_ = 1;\
                        }\
                     }\
int main() {
   printf("Counter: %d\n", g_counter);
   for (int i=0; i<100; i++) {
      UPDATE_COUNTER();
   }
   printf("Counter: %d\n", g_counter);
   for (int i=0; i<100; i++) {
      UPDATE_COUNTER();
   }
   printf("Counter: %d\n", g_counter);
} 
```

您可以通过在头文件中为其声明一个 extern 并将其包含在所有源文件中来使 g_counter 对其他文件可见。同样的头文件也是 UPDATE_COUNTER 宏的好地方。

# macos - NSScroller 在 NSView 上方绘制

> ID：10672525
> 
> 赞同：1
> 
> 时间：2012-05-20T10:09:35.597
> 
> 标签：macos, drawing, nsview, nsscrollview, nsscroller

我有 NSView 和 2 个子视图：NSScrollView（里面有 NSTableView）和自定义 NSView。有时我需要调整自定义 NSView 的大小以将其显示在 NSScrollView 的一部分上方，但是当我滚动表格 NSScroller 的内容时，会在我的自定义 NSView 上方绘制。如何避免？

# facebook - as3-fb-api：如何在 Facebook.init() 之前拥有访问令牌

> ID：10672527
> 
> 赞同：2
> 
> 时间：2012-05-20T10:09:47.470
> 
> 标签：facebook, actionscript-3, facebook-graph-api, facebook-access-token

as3-facebook-api（用于 flash）的 Facebook.init 方法允许使用可选的 accesstoken 参数。

但是 .init(...) 方法的重点是，嗯，初始化一切......访问令牌是初始化阶段的副产品。

那么怎么可能一开始就拥有一个访问令牌。

（请不要用修辞回答……我正在寻找一个实用的答案……谢谢）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:56:50.843

访问令牌在特定时间内有效，因此从技术上讲，您可以重复使用它。那个，或者你可以使用另一种语言连接到 Facebook 并从中获得一个令牌（比你想象的更常见）

**编辑 24/05/2012**

好的，在运行了一些测试并查看了 Facebook AS3 中的代码之后，这就是我所拥有的：

*   你是对的，你必须先调用 Facebook.init()，然后再做任何事情。否则，你只会到处出错
*   传递 accessToken 不会做任何事情*，除非*你也传递和选项`Object`（`status = false`所以你的`init()`电话变成`Facebook.init( APP_ID, this._onInit, {status:false}, myAccessToken);`）
*   基本上它所做的是初始化库，但不调用`getLoginStatus()`外部事件，所以你节省了一些调用，你的程序启动得更快——据我所知，这就是它。
*   如果您不关心库，并且您有访问令牌，从技术上讲，您可以完全绕过，并在您调用（例如）时`init()`附加`?access_token=[myToken]`到您的网址末尾- 或者完全跳过库，然后发出请求到网址`api()``Facebook.api( "/me?access_token=" + myAccessToken, this._onInfo );``URLLoader`

一个简单的例子展示了这一切。正常创建您的应用程序，替换您的应用程序 ID，然后正常连接。它会追踪您的 uid 和访问令牌。复制令牌，再次启动应用程序，然后将令牌粘贴到输入区域。当你`init()`再次使用它时，它现在会使用它。

```
package 
{
    import com.facebook.graph.data.FacebookAuthResponse;
    import com.facebook.graph.Facebook;
    import flash.display.Sprite;
    import flash.events.KeyboardEvent;
    import flash.text.TextField;
    import flash.text.TextFieldType;
    import flash.text.TextFormat;
    import flash.ui.Keyboard;
    import flash.utils.getQualifiedClassName;

    /**
     * Test facebook connect, showing the init() call with and without an access token. Make a normal
     * connection, then copy the access token, and reload. paste your token into the input area to use
     * it for the init() call
     * @author Damian Connolly
     */
    public class Main extends Sprite 
    {
        private static const APP_ID:String = "[SET_YOUR_APP_ID]";

        private var m_tf:TextFormat     = new TextFormat( "Trebuchet Ms", 9 );
        private var m_input:TextField   = null; // for adding the token
        private var m_log:TextField     = null; // for logging our messages

        public function Main():void 
        {
            // create our input
            this.m_input                    = new TextField;
            this.m_input.defaultTextFormat  = this.m_tf;
            this.m_input.border             = true;
            this.m_input.background         = true;
            this.m_input.type               = TextFieldType.INPUT;
            this.m_input.text               = " ";
            this.m_input.width              = 700.0;
            this.m_input.height             = this.m_input.textHeight + 4.0;
            this.m_input.text               = "";
            this.m_input.x = this.m_input.y = 10.0;
            this.addChild( this.m_input );

            // log and add our mouse listeners
            this._log( "Press [SPACE] to init facebook connection, [CTRL] to login, [SHIFT] to get data" );
            this._log( "Copy a pre-existing token into the textfield above to use it in the init() call" );
            this.stage.addEventListener( KeyboardEvent.KEY_DOWN, this._onKeyDown );
        }

        // keyboard listener
        private function _onKeyDown( e:KeyboardEvent ):void
        {
            if ( e.keyCode == Keyboard.SPACE )
                this._init();
            else if ( e.keyCode == Keyboard.CONTROL )
                this._login();
            else if ( e.keyCode == Keyboard.SHIFT )
                this._getData();
        }

        // init our facebook api
        private function _init():void
        {
            // use our token if we have one
            var token:String = ( this.m_input.text != "" ) ? this.m_input.text : null;

            this._log( "---------- Initing facebook with token '" + token + "'" );
            if ( token == null )
                Facebook.init( Main.APP_ID, this._onInit );
            else
            {
                var options:* = { status:false };
                Facebook.init( Main.APP_ID, this._onInit, options, token );
            }
        }

        // callback for init
        private function _onInit( success:*, fail:* ):void
        {
            this._log( "Callback for init 2! success: " + success + ", fail: " + fail );
            this._log( "Success: " + getQualifiedClassName( success ) );
            this._log( "Fail: " + getQualifiedClassName( fail ) );

            var response:FacebookAuthResponse = success as FacebookAuthResponse;
            if ( response != null )
                this._log( "UID: " + response.uid + ", access token: " + response.accessToken );

            this._log( ( success != null ) ? "Logged in" : "Not logged in" );
        }

        // logs into the app if we need to
        private function _login():void
        {
            this._log( "---------- Logging in" );
            Facebook.login( this._onLogin );
        }

        // callback for the login
        private function _onLogin( success:*, fail:* ):void
        {
            this._log( "Callback for _onLogin! success: " + success + ", fail: " + fail );
            this._log( "Success: " + getQualifiedClassName( success ) );
            this._log( "Fail: " + getQualifiedClassName( fail ) );

            var response:FacebookAuthResponse = success as FacebookAuthResponse;
            if ( response != null )
                this._log( "UID: " + response.uid + ", access token: " + response.accessToken );
        }

        // gets our data
        private function _getData():void
        {
            this._log( "---------- getting data with url '/me'" );
            Facebook.api( "/me", this._onGetData );
        }

        // callback for our data
        private function _onGetData( success:*, fail:* ):void
        {
            this._log( "Callback for _onLogin! success: " + success + ", fail: " + fail );
            this._log( "Success: " + getQualifiedClassName( success ) );
            for ( var key:* in success )
                this._log( "  key '" + key + "' = " + success[key] );

            this._log( "Fail: " + getQualifiedClassName( fail ) );
        }

        // logs a message to the console and our textfield
        private function _log( msg:String ):void
        {
            // create our log if needed
            if ( this.m_log == null )
            {
                this.m_log                      = new TextField;
                this.m_log.defaultTextFormat    = this.m_tf;
                this.m_log.border               = true;
                this.m_log.background           = true;
                this.m_log.width                = 700.0;
                this.m_log.height               = 200.0;
                this.m_log.x                    = this.m_input.x;
                this.m_log.y                    = this.m_input.y + this.m_input.height + 5.0;
                this.m_log.wordWrap             = true;
                this.addChild( this.m_log );
            }
            trace( msg );
            this.m_log.appendText( msg + "\n" );
        }

    }

} 
```

# iphone - 如何使用 Flash Builder 4.6 在 iPhone 4 上启用高分辨率显示

> ID：10672543
> 
> 赞同：1
> 
> 时间：2012-05-20T10:12:45.703
> 
> 标签：iphone, ios, flash-builder

我正在使用 Flash Builder 4.6 制作 iOS 应用程序。它运行得相当好，该应用程序在 3GS 和 iPad 上的表现与预期一致。然而，在 4 上它只使用 3GS 分辨率，像素加倍。这很好，但是主应用程序屏幕上有一些组件可以进行自己的缩放，并且手机正在应用的后处理导致它们看起来很糟糕。

现在，从我读过的内容来看，这应该非常简单，在 中`*-App.xml`，这就是我目前为 iPhone 所拥有的：

```
<iPhone>
    <Entitlements>
        <![CDATA[
            <key>get-task-allow</key>
            <false/>
        ]]>
    </Entitlements>

    <InfoAdditions><![CDATA[
        <key>UIDeviceFamily</key>
        <array>
            <string>1</string>
            <string>2</string>
        </array>
        <key>UIApplicationExitsOnSuspend</key>
        <true/>
    ]]></InfoAdditions>
    <requestedDisplayResolution>high</requestedDisplayResolution>
</iPhone> 
```

正如你所看到的，我很好地要求高分辨率，但没有得到它。

有什么想法我可能在这里做错了吗？在 Flash Builder 中，我对此类低级内容没有太多控制权，但这应该可以。非常感谢任何故障排除提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:38:14.843

找到了问题，找到了解决方案。这真的很愚蠢。

即使我以适当的方式请求高分辨率，Flash Builder 也忽略了它，因为 applicationDPI 是 160。尽管这应该没问题，它应该可以处理它。

解决办法就是简单的把applicationDPI设置为320，bam-4S突然用了高分辨率。当然，我必须将所有 UI 元素的大小翻倍。

3GS 和 iPad 仍然可以正常工作。就我而言，这是一个非常愚蠢的 Adob​​e 错误。

# javascript - 获取 facebook 应用安装时间戳

> ID：10672545
> 
> 赞同：0
> 
> 时间：2012-05-20T10:12:54.427
> 
> 标签：javascript, facebook, api, facebook-graph-api

如何仅在当前使用的 facebook 应用程序的安装时间中使用 JS api？

一般来说，我想验证当前在线的用户是新用户，而不是尚未注册的返回用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:20:49.223

您可以按照[这里](http://developers.facebook.com/blog/post/2012/05/08/how-to--improve-the-experience-for-returning-users/)[`FB.getLoginStatus`](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)的推荐使用它可以告诉您天气访问者是否已登录 facebook，如果是，他们是否已在您的应用程序中注册。

```
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    // the user is logged in and has authenticated your
    // app, and response.authResponse supplies
    // the user's ID, a valid access token, a signed
    // request, and the time the access token 
    // and signed request each expire
    var uid = response.authResponse.userID;
    var accessToken = response.authResponse.accessToken;
  } else if (response.status === 'not_authorized') {
    // the user is logged in to Facebook, 
    // but has not authenticated your app
  } else {
    // the user isn't logged in to Facebook.
  }
 }); 
```

# ios - 将数据库检索到 iphone 应用程序中

> ID：10672546
> 
> 赞同：-1
> 
> 时间：2012-05-20T10:12:59.087
> 
> 标签：ios, database, sqlite, offline

我的 iPhone 应用程序需要离线工作，所以我需要将数据库从服务器检索到设备中。该数据库包含大约 10 个表，每个表有几十行。这样做的推荐方法是什么？是 sqlite3 吗？如果是，我如何从数据库构建 sqlite 表？

谢谢，阿萨夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:30:44.253

我用构建的表和一些数据发送我的应用程序，然后让应用程序调用一个将“上次更新”作为参数的 Web 服务，并从那时起返回所有添加/删除（作为 JSON）......然后应用程序解析，并根据需要插入/更新/删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T10:32:52.037

您有多种选择：

*   从网络服务器下载一个 sqlite 数据库文件，将其存储在应用程序的文档或临时文件夹中
*   通过代码动态创建数据库和表，在您的网络服务器上设置 XML 或 JSON 接口，从网络下载数据并插入新数据库

看看这里，[开始在 iOS 上使用 SQLite](https://stackoverflow.com/questions/10438089/using-sqlite-with-ios-very-beginner-program/10438440#10438440)。

是的，它是 iOS 上的 sqlite3。

# php - 在帐户页面中显示基于会话的条件用户名和注销链接

> ID：10672550
> 
> 赞同：0
> 
> 时间：2012-05-20T10:13:30.070
> 
> 标签：php, mysql, authentication, login

以下条件语法在成功登录后在本地托管服务器上的帐户页面中显示登录用户的帐户和注销链接，没有任何问题，但在远程服务器上它突然开始打印“HI”“||” ＆“注销”，即使用户没有登录。知道吗？

```
<?php
if ($totalRows_users > 0) { 
if (checklevel 1()) {
echo "Hi <a href='userarea1/user1.php' target='_self'>".$row_users['user_name']."</a>";
} else { 
echo "Hi <a href='userarea2/user2.php' target='_self'>".$row_users['user_name']."</a>";
}
} else if ($totalRows_visitors > 0) {
echo "Hi <a href='../videoarchive/visitorarea/visitoraccount.php' target='_self'>".$row_visitors['user_name']."</a>";
}
?>  

<?php if ($totalRows_users> 0) { 

if (checklevel1()) {
echo "|| <a href='userarea1/logout.php' target='_self'>"; echo 'Log Out'; echo "</a>";
} else { 
echo "|| <a href='userarea2/logout.php' target='_self'>"; echo 'Log Out'; echo "</a>";
}
} else if ($totalRows_visitors > 0) { 
echo "|| <a href='../videoarchive/logout.php' target='_self'>"; echo 'Log Out'; echo "</a>";
}
?> 
```

谢谢，

# javascript - Javascript：未捕获的类型错误：引用创建的对象时无法调用未定义的方法“添加”

> ID：10672552
> 
> 赞同：0
> 
> 时间：2012-05-20T10:13:57.757
> 
> 标签：javascript, oop

首先，我对 Javascript 的 OOP 方面并不是很熟悉，所以我可能需要回到绘图板并重新编写 javascript，因为我试图做的事情可能是不可能的，所以请让我知道如果那是这样的。我一直在寻找解决方案一段时间，但无法完全找到相同的问题，我可以理解我应该改变什么。

我正在使用这篇文章中定义的类：[https](https://stackoverflow.com/a/7798773/1027442) ://stackoverflow.com/a/7798773/1027442 。

当站点上的组合框发生更改 (onChange) 时，它会调用一个函数，该函数调用下面的函数以在页面上显示一个反馈框：

```
var display_ajax_feedback = function (){

document.getElementById('ajax_feedback').style.display = 'block';

/*if(document.getElementById('ajax_feedback_active').value == "active"){*/
if(timer){
    timer.add(5000);
    }
else{
    var timer = new Timer(function() { // init timer with 5 seconds
            document.getElementById('ajax_feedback').style.display = 'none';
        }, 5000);

    /*document.getElementById('ajax_feedback_active').value ="active";*/
    }

} 
```

这个想法是“ajax_feedback”元素显示 5 秒然后消失，除非再次调用它，在这种情况下添加 5 秒。

使用此代码时，if(timer) 行始终返回 false，因此计时器不会按时添加，而是再次调用该对象。

我引入了额外的 ajax_feedback_active 元素来强制调用 timer.add 方法，但我得到了这个错误：“Uncaught TypeError: Cannot call method 'add' of undefined”

我有什么明显做错了吗？和/或快速修复还是我将不得不重新考虑我的方法？

如果您需要任何进一步的信息，请告诉我。

在此先感谢，理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:26:36.007

您的计时器是函数范围内的变量。如果您想创建对它的全局引用，或者摆脱该`var`关键字，请从该函数中取出计时器。

# php - 使用 php 从多个 mysql 表中获取图像

> ID：10672560
> 
> 赞同：3
> 
> 时间：2012-05-20T10:14:30.443
> 
> 标签：php, mysql, image, fetch, multiple-tables

在过去的几天里，我一直在尝试了解如何从多个表中获取数据，但我不能说我完全理解它是如何工作的。反正 ：）

我想要做的是使用搜索栏获取存储在多个表中的图像来定义参数，即艺术家姓名（我知道将图像存储在数据库中可能会导致很多问题，但它是大学的一项练习，所以我不能真的做很多事情）

所以现在要具体。我有 5 个表，分别称为 animaldata、cardata、landscapedata、peopledata 和 otherdata。每个表都有以下字段：1 id 2 艺术家名称 3 详细信息 4 照片 5 照片类型和 6 日期。其中artist_name 是上传图片的登录人员的姓名，details 是标题，photo 是要保存的blob 项目，phototype 是图片的.. 井类型：P

所以我想做的是当有人使用搜索栏搜索艺术家时，代码可以从艺术家上传的所有表格中获取和显示所有图像。

这是我用来从 1 个表中获取数据的代码，但我不知道如何更改它以便也搜索其他表。

那就是search.php

```
<?php
mysql_connect ("localhost","root","")  or die (mysql_error());
mysql_select_db ("photo_album_db");

$term = $_POST['term'];

$sql = mysql_query("select * from animaldata where artist_name like '%$term%'");

while ($row = mysql_fetch_array($sql)){
    echo $row['details'];
echo "</br>";
echo "<img src=getan.php?id=".$row['id']." width=250 height=200/>";
echo "</br>";
}
?> 
```

搜索栏的形式如下： `<form action="search.php" method="post"><input type="text" name="term" /><input type="submit" name="search" value="Search" /></form>`

提前感谢您的任何建议，如果您需要更多“线索”，请告诉我:) :) :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:19:46.333

如果它们具有相同的列，则要更改表，然后使用：

```
$sql = mysql_query("select animaldata.artist_name AS animaldata_artist_name, cardata.artist_name AS cardata_artist_name /* do this for all columns in all tables, or mor specifically for the columns you need  */ from animaldata AS a, cardata AS c, landscapedata AS l, peopledata AS p where a.artist_name like '%$term%' OR c.artist_name like '%$term%' OR l.artist_name like '%$term%' OR p.artist_name like '%$term%'"); 
```

试试这个来显示图像：

```
<img src="data:image/jpeg;base64,".base64_encode($row['image_blob'])." width... 
```

这不会对照片提出单独的请求。它将图像的内容嵌入到 HTML 中。

该技术由[data:uri](http://en.wikipedia.org/wiki/Data_URI_scheme#HTML)协议支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T13:19:06.213

试试这个：

```
// set up database connection ... 

$term = my_awesome_sanitizer($_POST['term']);

$tables = array("animaldata", "cardata", "landscapedata", "peopledata", "otherdata");
foreach ($tables as $table)
{
    $sql = mysql_query("select * from $table where artist_name like '%$term%'");
    while ($row = mysql_fetch_array($sql))
    {
        echo $row['details'];
        // show stuff ....
    }
} 
```

# java - 内部类和静态方法java

> ID：10672563
> 
> 赞同：0
> 
> 时间：2012-05-20T10:14:50.937
> 
> 标签：java

> **可能重复：**
> [为什么我们不能在内部类中有静态方法？](https://stackoverflow.com/questions/975134/why-cant-we-have-static-method-in-an-inner-class)

我不知道为什么内部类不能有静态方法。为什么是错的？

```
class A1
{
    class B1
    {
         static void fun()
        {
            System.out.println("HIII");
        }
    }
    public static void main(String[] args)
    {
        A1 a = new A1();
        A1.B1 b = new a.B1();
        b.fun();
    }
} 
```

如果外部类对象可以访问静态方法并且`y`不是内部类的变量可以访问？有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:21:55.450

这里的问题是您的非静态内部类有一个静态方法，而您正试图从外部类的静态方法调用它。

非静态内部类仅在外部类实例的上下文中是“相关的”，因为它可以访问外部类的非静态方法和`this`外部类的方法（使用`A1.this`）。

底线：如果你想这样做也将内部类标记为静态：

```
static class B1
{
     static void fun()
    {
        System.out.println("HIII");
    }
} 
```

现在你可以从外部类的静态方法中调用它的静态方法。

# c# - .net 程序集和单独配置

> ID：10672564
> 
> 赞同：0
> 
> 时间：2012-05-20T10:14:52.777
> 
> 标签：c#, configuration, spring.net, .net-assembly

我的主要程序集是一个 Web 应用程序。它使用 spring.net 框架将其他程序集加载到其正在执行的应用程序域中。所以自然这意味着所有**其他**程序集必须从 web.config 获取它们的配置值（例如连接字符串和应用程序设置）。

有没有办法可以覆盖它？一些配置可以来自web.config；其他人必须分开居住。在开发此类 .net 程序集时我应该采取什么样的方法？目标是，一旦此应用程序进入客户端环境，并且客户端决定在遥远的将来在某个地方添加程序集，他应该能够轻松地这样做，并且更改该程序集的配置而不会影响其他程序集。

所以最终我必须提出一种基于框架的方法？是否已经有这种效果？或者我该怎么做？我将面临哪些挑战？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:25:38.300

Web 配置文件允许您创建自定义程序集特定的配置部分。

查看[http://msdn.microsoft.com/en-us/library/2tw134k3.aspx](http://msdn.microsoft.com/en-us/library/2tw134k3.aspx)了解详情

此外，您可以将其他文件指定为配置文件，供 .net 中的配置解析器使用和解析

您可以使用配置文件中的配置源选项来执行此操作：例如

在 App.config/Web.config

```
<configuration>
  <system.serviceModel>
    <services configSource="Services.config" >
    </services> 
  </system.serviceModel>
</configuration> 
```

创建一个名为 Services.config 的文件并在其中：

```
<services>
  <service name="SomeNameSpace.MyService"
           behaviorConfiguration="MyServiceBehaviour">
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:1234/service"/>
      </baseAddresses>
    </host>
    <endpoint address="net.tcp://localhost:8000/service"
              binding="netTcpBinding"
              bindingConfiguration="Binding1"
              contract="SomeNameSpace.IService" />
  </service>
</services> 
```

# python - Django 模板：如何检测请求方法？

> ID：10672567
> 
> 赞同：2
> 
> 时间：2012-05-20T10:15:24.017
> 
> 标签：python, django, templates, django-templates

我想要下一个模板作品：

```
{% if not form.errors and request.method == 'POST' %}

    <span id='saved'>Data has stored.</span>
    <script type='text/javascript'>
        setTimeout( function() { $( '#saved' ).fadeOut( 'slow' ); }, 2000 );
    </script>
{% endif %} 
```

如何在模板中获得对 request.method 的访问权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:25:17.853

RequestContext应该为您做到这一点[。](https://docs.djangoproject.com/en/dev/ref/templates/api/#using-requestcontext)

# sql - 避免在某些情况下返回结果集

> ID：10672568
> 
> 赞同：6
> 
> 时间：2012-05-20T10:15:26.903
> 
> 标签：sql, tsql

我执行一个选择语句。如果结果集中的行数小于或等于某个数字，则返回选定的行。如果行数大于某个数字，我想不返回任何行。

运行选择并进行比较后，如果行数大于允许的行数，我执行：

```
SELECT TOP 0 NULL AS ID 
```

我发现，最初选择的两条记录也与第二个结果集一起返回，其中包含一个名为 ID 的列，没有记录。显然，最初的选择语句仍在返回，我想避免这种情况。有什么办法吗？

编辑：忘了补充说我需要返回一个状态值，指示是否有超过允许的行数。这意味着我必须进行计数，并且希望在不必运行相同查询两次的情况下进行计数。因此，如果允许的最大行数为 25，但实际存在零行，则返回状态 0。但如果行数大于 25，则不返回任何行，但将状态设置为 - 1.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T11:27:59.817

对临时表进行选择，检查表中的行数并在您的选择中使用临时表或返回 0 行。

```
-- Your query goes here
select ID
into #T
from YourTable
--where 

-- Check the number of rows returned
if (select count(*) from #T) <= 10
begin
  -- Return the data
  select ID
  from #T
end
else
begin
  -- Don't return anything
  select ID
  from #T
  where 0 = 1
end

drop table #T 
```

您也可以在一个查询中使用`count(*) over()`.

```
select ID
from
  (
    select ID, count(*) over() as C
    from YourTable
    --where
  ) T
where C <= 10 
```

或使用 CTE

```
with C as
(
  select ID
  from YourTable
  --where
)
select ID
from C
where (select count(*) from C) <= 10 
```

选择最适合您的需求或对您的数据表现最好的任何东西。

**更新**
返回行数的修改后的临时表版本。

```
declare @MaxRows int
set @MaxRows = 25

declare @ActualRowCount int

select top(@MaxRows+1) ID
into #T
from YourTable

set @ActualRowCount = @@rowcount

if @ActualRowCount = 0
begin
  -- No rows returned
  select null as ID, 0 as [RowCount]
end
else
if @ActualRowCount > @MaxRows
begin
  -- Too many rows returned
  select null as ID, -1 as [RowCount]
end
else
begin
  -- Return rows from temp table
  select ID, @ActualRowCount as [RowCount]
  from #T
end

drop table #T 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:00:42.330

我假设您使用的是 SQL Server，因此您可以使用`@@ROWCOUNT`(返回受最后一条语句影响的行数。)

所以这里有一个例子：

```
SELECT ID FROM [YourTable] WHERE [Your Conditions]

IF @@ROWCOUNT > [YourLimit]
  SELECT ID FROM [YourTable] WHERE 0=1 // return empty records
ELSE
  SELECT ID FROM [YourTable] WHERE [Your Conditions] 
```

就这样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T16:00:26.390

将行数参数加载到变量中，然后`SELECT`：

```
DECLARE @rows INT;
DECLARE @maxRows INT = 1000; --set your desired max value here
SELECT @rows=COUNT(1) FROM [myTable];

SELECT ID FROM [myTable]
WHERE @rows <= @maxRows; 
```

当行数过多时，您要么得到一个空集，要么得到结果集

# string - 比较bash中的字母

> ID：10672569
> 
> 赞同：0
> 
> 时间：2012-05-20T10:15:29.193
> 
> 标签：string, compare

我想比较给定目录中文件的第一个字母（字符串），一旦比较为真，脚本就会将该特定文件复制或移动到另一个目录。

在这个例子中，我想复制所有大于字母“m”的文件，即只要文件中的第一个字母大于“m”，假设一个

要比较的文件示例：mard_2002.dat、accd_2001.dat、mcck_1999.dat qddf_2010.dat

x="米"

对于 *.dat 中的文件

做

t="$(echo $file | awk '{print substr($1,1,1)}')"

如果 [ "$t" > "$x" ]

然后
cp $file ./TEMP echo "now the file is compied" else
echo $file fi read pause done

上面的 if [ "$t" > "$x" ] 或 if [ "$t" < "$x" ] 命令似乎总是返回 true。只有当我使用等号时，脚本才会正确复制，如果 ["$t" = "$x"]，在这种情况下，它只会复制那些仅以字母“m”开头的文件。

如有任何意见，请问候 Yacob

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:22:48.580

```
FOO=m

for FILE in `ls -1 [$FOO-z]*|grep -v "^$FOO"`
do
echo "Would do things to file $FILE"
done 
```

# ruby-on-rails - Rails 使用关联进行分组和计数

> ID：10672570
> 
> 赞同：3
> 
> 时间：2012-05-20T10:16:00.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

鉴于我有一个成员表：

```
id   membername
-------------------
1    Fred
2    Dave
3    Jenny 
```

和一个工作表

```
id   member_id   status
1    1           Closed
2    2           Pending
3    2           Open
4    3           Pending
5    3           Pending 
```

我想按成员输出待处理工作的总数。

所以有了上面的数据，我想：

```
membername  count
Dave        1
Jenny       2 
```

我可以使用 group 方法获取计数，例如

```
Job.where("status = ?", "Pending").group(:member_id).count 
```

但这不会返回名称。只是 member_id 和计数的哈希值。我想我需要以某种方式将此结果加入到成员表中。我当然可以使用原始 SQL 来做到这一点，但想知道是否有一种更简洁的方式来获取这些数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T12:49:49.547

```
Job.where("status = ?", "Pending").joins(:member).group("member.name").count 
```

# ruby-on-rails - 不同用户（个人或组织）的不同字段

> ID：10672571
> 
> 赞同：0
> 
> 时间：2012-05-20T10:16:09.213
> 
> 标签：ruby-on-rails, model

我有一个只允许人注册的网站。现在我想添加组织注册。

问题是人和组织有**一些相同的字段**和**一些不同的字段**（例如，组织没有姓氏或出生日期，但可能有人们不需要的其他字段）。

用户**行为是一样的**。只有字段不同。

实施组织注册的最佳方式是什么？我应该创建一个多态关联还是有一个更简单/更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:41:40.983

只需创建第一步，人们可以选择通常或组织的注册，然后呈现正确的表格

用于验证`:if => lambda { self.organization? }` （组织布尔字段）

# django - Django：如何判断 post_save 信号是否在新对象上触发？

> ID：10672572
> 
> 赞同：58
> 
> 时间：2012-05-20T10:16:09.927
> 
> 标签：django, django-signals

我需要对 Django 中新创建的对象进行一些后台后处理。这种后处理应该只在新对象上运行，而不是刚刚更新的对象。

我知道在 pre_save 中我可以检查对象是否有 id，如果没有，则它是一个新对象。但问题是在后处理中我需要访问 id（以便我可以将结果保存回数据库）。

我怎样才能以干净的方式做到这一点？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-05-20T10:58:40.770

看看文档：[https ://docs.djangoproject.com/en/stable/ref/signals/#post-save](https://docs.djangoproject.com/en/stable/ref/signals/#post-save)

如果它是一个新对象，则有一个`created`命名参数将被设置为。`True`

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-06-02T14:17:57.993

正如[文档](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)所述和@seler 指出的那样，但举个例子：

```
def keep_track_save(sender, instance, created, **kwargs):
    action = 'save' if created else 'update'
    save_duplicate((instance.id, instance.__class__.__name__, action))

post_save.connect(keep_track_save, sender=Group) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-02-18T15:10:59.803

我把它留在这里，也许它会对某人有所帮助。

```
from django.db import models
from django.db.models.signals import post_save
from django.dispatch import receiver

class Deal(models.Model):
    name = models.CharField(max_length=255)

@receiver(post_save, sender=Deal)
def print_only_after_deal_created(sender, instance, created, **kwargs):
    if created:
        print(f'New deal with pk: {instance.pk} was created.') 
```

# python - 有什么方法可以将前一个随机数与下一个随机数相加？

> ID：10672576
> 
> 赞同：-2
> 
> 时间：2012-05-20T10:16:40.023
> 
> 标签：python, random

我有一个数字和阿尔法的混合列表。

```
import random

def main():
 list: ['1','2','3','4','5','6','7','a','b','c']

 for count in range (1,5):
   serial_no=("serial #: ", count)
   totallist=0

   from random import choice:
   number=choice(list)

   print(serial_no+'for the time: '+number)

   if number.isdigit() and number<4:
      totallist+=int(number) # want to add the first number >4

   elif number.isdigit()and number>4:
      totallist+=int(number)

   elif number.isalpha():
      list[9]=0
      list[-1]=0
      totallist=int(list[9])+int(list[-1]) #I could not add (error) (want to add alpha(as 0) and number after being alpha)
   print(totallist)

main() 
```

有什么办法可以将第一个随机数> 4 添加到 number < 4 的总随机数中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:51:54.683

我不知道这是否是您想要的，但这与我可以修复您的语法错误和格式并猜测您想要实现的目标一样接近（希望在`A`这里付出努力）：

```
import random

def safe_index(li, i):
   try:
      return li[i]
   except:
      return 0

def main():
   list = ['1','2','3','4','5','6','7','a','b','c']
   totallist = []

   for count in range (1,5):
      serial_no = "serial #%s: " % count

      number = random.choice(list)

      print('%s for the time: %s' % (serial_no, number))

      if number.isdigit() and int(number) < 4:
         print('<4')

         # add digit to first number in series >= 4
         totallist.append(int(number) + 
                          safe_index(filter(lambda x: x >= 4, totallist), 0))

      elif number.isdigit() and int(number) >= 4:
         print('>=4')
         totallist.append(int(number))

      elif number.isalpha():
         print('alpha')

         # convert alpha to ordinal number
         totallist.append(ord(number) - (ord('a') - 1))

   print(totallist)

if __name__ == "__main__":
    main() 
```

样本输出：

```
serial #1:  for the time: 5
>=4
serial #2:  for the time: 2
<4
serial #3:  for the time: 6
>=4
serial #4:  for the time: a
alpha
[5, 7, 6, 1] 
```

# python - 在 Python 中提取视频帧

> ID：10672578
> 
> 赞同：24
> 
> 时间：2012-05-20T10:16:45.077
> 
> 标签：python, ffmpeg

我想提取视频帧并将它们保存为图像。

```
import os, sys
from PIL import Image

a, b, c = os.popen3("ffmpeg -i test.avi")
out = c.read()
dp = out.index("Duration: ")
duration = out[dp+10:dp+out[dp:].index(",")]
hh, mm, ss = map(float, duration.split(":"))
total = (hh*60 + mm)*60 + ss
for i in xrange(9):
    t = (i + 1) * total / 10
    os.system("ffmpeg -i test.avi -ss %0.3fs frame%i.png" % (t, i)) 
```

但我有这个错误：

```
FFmpeg version CVS, Copyright (c) 2000-2004 Fabrice Bellard
Mac OSX universal build for ffmpegX
  configuration:  --enable-memalign-hack --enable-mp3lame --enable-gpl --disable-vhook --disable-ffplay --disable-ffserver --enable-a52 --enable-xvid --enable-faac --enable-faad --enable-amr_nb --enable-amr_wb --enable-pthreads --enable-x264 
  libavutil version: 49.0.0
  libavcodec version: 51.9.0
  libavformat version: 50.4.0
  built on Apr 15 2006 04:58:19, gcc: 4.0.1 (Apple Computer, Inc. build 5250)
Input #0, avi, from 'test.avi':
  Duration: 00:00:30.5, start: 0.000000, bitrate: 465 kb/s
  Stream #0.0, 25.00 fps(r): Video: mpeg4, yuv420p, 640x480
  Stream #0.1: Audio: mp3, 32000 Hz, mono, 32 kb/s
Unable for find a suitable output format for 'frame0.png' 
```

编辑：ffmpeg -formats

```
FFmpeg version CVS, Copyright (c) 2000-2004 Fabrice Bellard
Mac OSX universal build for ffmpegX
  configuration:  --enable-memalign-hack --enable-mp3lame --enable-gpl --disable-vhook --disable-ffplay --disable-ffserver --enable-a52 --enable-xvid --enable-faac --enable-faad --enable-amr_nb --enable-amr_wb --enable-pthreads --enable-x264 
  libavutil version: 49.0.0
  libavcodec version: 51.9.0
  libavformat version: 50.4.0
  built on Apr 15 2006 04:58:19, gcc: 4.0.1 (Apple Computer, Inc. build 5250)
File formats:
  E 3g2             3gp2 format
  E 3gp             3gp format
 D  4xm             4X Technologies format
 D  RoQ             Id RoQ format
 D  aac             ADTS AAC
 DE ac3             raw ac3
  E adts            ADTS AAC
 DE aiff            Audio IFF
 DE alaw            pcm A law format
 DE amr             3gpp amr file format
 DE asf             asf format
  E asf_stream      asf format
 DE au              SUN AU Format
 DE avi             avi format
 D  avs             avs format
  E crc             crc testing format
 D  daud            D-Cinema audio format
 D  dts             raw dts
 DE dv              DV video format
  E dvd             MPEG2 PS format (DVD VOB)
 D  ea              Electronic Arts Multimedia Format
 DE ffm             ffm format
 D  film_cpk        Sega FILM/CPK format
 D  flic            FLI/FLC/FLX animation format
 DE flv             flv format
  E framecrc        framecrc testing format
 DE gif             GIF Animation
 DE h261            raw h261
 DE h263            raw h263
 DE h264            raw H264 video format
 D  idcin           Id CIN format
 DE image           image sequence
 DE image2          image2 sequence
 DE image2pipe      piped image2 sequence
 DE imagepipe       piped image sequence
 D  ingenient       Ingenient MJPEG
 D  ipmovie         Interplay MVE format
 DE m4v             raw MPEG4 video format
 D  matroska        Matroska file format
 DE mjpeg           MJPEG video
 D  mm              American Laser Games MM format
 DE mmf             mmf format
  E mov             mov format
 D  mov,mp4,m4a,3gp,3g2,mj2 QuickTime/MPEG4/Motion JPEG 2000 format
  E mp2             MPEG audio layer 2
 DE mp3             MPEG audio layer 3
  E mp4             mp4 format
 DE mpeg            MPEG1 System format
  E mpeg1video      MPEG video
  E mpeg2video      MPEG2 video
 DE mpegts          MPEG2 transport stream format
 D  mpegvideo       MPEG video
  E mpjpeg          Mime multipart JPEG format
 DE mulaw           pcm mu law format
 D  nsv             NullSoft Video format
  E null            null video format
 DE nut             nut format
 D  nuv             NuppelVideo format
 D  ogg             Ogg
  E psp             psp mp4 format
 D  psxstr          Sony Playstation STR format
 DE rawvideo        raw video format
 D  redir           Redirector format
 DE rm              rm format
  E rtp             RTP output format
 D  rtsp            RTSP input format
 DE s16be           pcm signed 16 bit big endian format
 DE s16le           pcm signed 16 bit little endian format
 DE s8              pcm signed 8 bit format
 D  sdp             SDP
 D  shn             raw shorten
 D  smk             Smacker Video
 D  sol             Sierra SOL Format
  E svcd            MPEG2 PS format (VOB)
 DE swf             Flash format
 D  tta             true-audio
 DE u16be           pcm unsigned 16 bit big endian format
 DE u16le           pcm unsigned 16 bit little endian format
 DE u8              pcm unsigned 8 bit format
  E vcd             MPEG1 System format (VCD)
 D  vmd             Sierra VMD format
  E vob             MPEG2 PS format (VOB)
 DE voc             Creative Voice File format
 DE wav             wav format
 D  wc3movie        Wing Commander III movie format
 D  wsaud           Westwood Studios audio format
 D  wsvqa           Westwood Studios VQA format
 DE yuv4mpegpipe    YUV4MPEG pipe format

Image formats (filename extensions, if any, follow):
 DE gif    gif

Codecs:
 D V    4xm
 D V D  8bps
 DEA    aac
 D V D  aasc
 DEA    ac3
 DEA    adpcm_4xm
 DEA    adpcm_adx
 DEA    adpcm_ct
 DEA    adpcm_ea
 DEA    adpcm_ima_dk3
 DEA    adpcm_ima_dk4
 DEA    adpcm_ima_qt
 DEA    adpcm_ima_smjpeg
 DEA    adpcm_ima_wav
 DEA    adpcm_ima_ws
 DEA    adpcm_ms
 DEA    adpcm_sbpro_2
 DEA    adpcm_sbpro_3
 DEA    adpcm_sbpro_4
 DEA    adpcm_swf
 DEA    adpcm_xa
 DEA    adpcm_yamaha
 D A    alac
 DEA    amr_nb
 DEA    amr_wb
 DEV D  asv1
 DEV D  asv2
 D V D  avs
 D V    bmp
 D V D  camstudio
 D V D  camtasia
 D V D  cinepak
 D V D  cljr
 D A    cook
 D V D  cyuv
 DES    dvbsub
 DES    dvdsub
 DEV D  dvvideo
 DEV D  ffv1
 DEVSD  ffvhuff
 D A    flac
 D V D  flic
 DEVSD  flv
 D V D  fraps
 DEA    g726
 DEV D  h261
 DEVSDT h263
 D VSD  h263i
  EV    h263p
 DEV DT h264
 DEVSD  huffyuv
 D V D  idcinvideo
 D V D  indeo2
 D V    indeo3
 D A    interplay_dpcm
 D V D  interplayvideo
  EV    jpegls
 D V    kmvc
  EV    ljpeg
 D V D  loco
 D A    mace3
 D A    mace6
 D V D  mdec
 DEV D  mjpeg
 D V D  mjpegb
 D V D  mmvideo
 DEA    mp2
 DEA    mp3
 D A    mp3adu
 D A    mp3on4
 DEVSDT mpeg1video
 DEVSDT mpeg2video
 DEVSDT mpeg4
 D A    mpeg4aac
 D VSDT mpegvideo
 DEVSD  msmpeg4
 DEVSD  msmpeg4v1
 DEVSD  msmpeg4v2
 D V D  msrle
 D V D  msvideo1
 D V D  mszh
 D V D  nuv
 DEV    pam
 DEV    pbm
 DEA    pcm_alaw
 DEA    pcm_mulaw
 DEA    pcm_s16be
 DEA    pcm_s16le
 DEA    pcm_s24be
 DEA    pcm_s24daud
 DEA    pcm_s24le
 DEA    pcm_s32be
 DEA    pcm_s32le
 DEA    pcm_s8
 DEA    pcm_u16be
 DEA    pcm_u16le
 DEA    pcm_u24be
 DEA    pcm_u24le
 DEA    pcm_u32be
 DEA    pcm_u32le
 DEA    pcm_u8
 DEV    pgm
 DEV    pgmyuv
 DEV    png
 DEV    ppm
 D A    qdm2
 D V D  qdraw
 D V D  qpeg
 D V D  qtrle
 DEV    rawvideo
 D A    real_144
 D A    real_288
 D A    roq_dpcm
 D V D  roqvideo
 D V D  rpza
 DEV D  rv10
 DEV D  rv20
 D A    shorten
 D A    smackaud
 D V    smackvid
 D V D  smc
 DEV    snow
 D A    sol_dpcm
 DEA    sonic
  EA    sonicls
 D V D  sp5x
 DEV D  svq1
 D VSD  svq3
 D V    theora
 D V D  truemotion1
 D V D  truemotion2
 D A    truespeech
 D A    tta
 D V D  ultimotion
 D V    vc9
 D V D  vcr1
 D A    vmdaudio
 D V D  vmdvideo
 D A    vorbis
 D V    vp3
 D V D  vqavideo
 D A    wmav1
 D A    wmav2
 DEVSD  wmv1
 DEVSD  wmv2
 D V D  wnv1
 D A    ws_snd1
 D A    xan_dpcm
 D V D  xan_wc3
 D V D  xl
  EV    xvid
 DEV D  zlib
 D V    zmbv

Supported file protocols:
 file: pipe: udp: rtp: tcp: http:
Frame size, frame rate abbreviations:
 ntsc pal qntsc qpal sntsc spal film ntsc-film sqcif qcif cif 4cif
Motion estimation methods:
 zero(fastest) full(slowest) log phods epzs(default) x1 hex umh iter

Note, the names of encoders and decoders dont always match, so there are
several cases where the above table shows encoder only or decoder only entries
even though both encoding and decoding are supported for example, the h263
decoder corresponds to the h263 and h263p encoders, for file formats its even
worse 
```

我的代码有什么问题？提前致谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-20T10:31:56.523

ffmpeg 抱怨文件名中缺少`%d`文件，因为您已要求它转换多个帧。

[这篇文章](https://web.archive.org/web/20130118060805/http://www.techskater.com/random/extracting-video-frame-at-specific-time-using-ffmpeg/)表明这​​将是使用 ffmpeg 提取单帧的更好方法

```
ffmpeg -i n.wmv -ss 00:00:20 -t 00:00:1 -s 320×240 -r 1 -f singlejpeg myframe.jpg 
```

[**编辑**]

经过[更多研究](https://web.archive.org/web/20110814003443/http://www.techskater.com/ill-file-this-someday/using-ffmpeg-to-extract-png-files/)，这里有一个命令行，可以输出单个 png 帧

```
ffmpeg -i test.avi -vcodec png -ss 10 -vframes 1 -an -f rawvideo test.png 
```

在我的 ubuntu 12.04 笔记本电脑上测试

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-14T13:16:42.533

简单的方法，使用 Open CV。

```
import cv2

vc = cv2.VideoCapture('Test.mp4')
c=1

if vc.isOpened():
    rval , frame = vc.read()
else:
    rval = False

while rval:
    rval, frame = vc.read()
    cv2.imwrite(str(c) + '.jpg',frame)
    c = c + 1
    cv2.waitKey(1)
vc.release() 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-15T19:34:27.483

有 ffmpeg python 模块可用

ffmpeg：[https ://code.google.com/p/pyffmpeg/](https://code.google.com/p/pyffmpeg/)

pyAV：[https ://github.com/mikeboers/PyAV](https://github.com/mikeboers/PyAV)

```
import av

container = av.open('/path/to/video.mp4')

for packet in container.demux():
    for frame in packet.decode():
        if frame.type == 'video':
            frame.to_image().save('/path/to/frame-%04d.jpg' % frame.index) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T08:36:02.697

您的 ffmpeg 不支持 png 文件格式。您应该改用 jpg 或 gif。也关注这个[帖子](http://www.techskater.com/random/extracting-video-frame-at-specific-time-using-ffmpeg/)（首先由“昨天”发布）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-27T13:27:56.237

有更简单的方法可以做到这一点。只需使用`OpenCV`并获得所需的所有框架。

请参阅此处的答案：[如何从视频中提取帧](https://stackoverflow.com/a/49011190/7319568)

使用`Python3`和完成`OpenCV 3+`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-04-22T01:46:24.090

```
import numpy as np
import cv2

capture = cv2.VideoCapture(0)
size = (int(capture.get(3)),int(capture.get(4)))
fourcc = cv2.VideoWriter_fourcc(*'XVID')
video = cv2.VideoWriter('output.avi',fourcc,30,size)
print capture.isOpened()
num=0

while True:
    ret, img = capture.read()
    video.write(img)
    cv2.imshow('video',img)
    cv2.imwrite("image" + str(num) + ".jpg",img)
    num = num + 1
    key= cv2.waitKey(1)
    if  key == ord('q')
        num=0
        break

video.release()
capture.release()
cv2.destroyAllWindows() 
```

# php - Twitter Web Intents - 获取关注者昵称？

> ID：10672579
> 
> 赞同：1
> 
> 时间：2012-05-20T10:16:46.027
> 
> 标签：php, javascript, twitter, webintents

我正在使用 Twitter Web Intents 检查是否有人关注我。现在的问题是；我只在事件对象中获取我自己的屏幕名称作为回调。

```
twttr.events.bind('follow', function(event) {
    alert(event.data.user_id);
}); 
```

有什么方法可以获取关注者的昵称，所以我可以将其存储在数据库中。我想将其用作一种“请求邀请”功能。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:44:06.297

执行以下操作的用户不会通过 web 意图 javascript 事件显示 - 它会显示有关当前在您网站上的用户的个人信息，而无需该用户明确授予您的网站/应用程序访问该信息的权限。

跟踪帐户最近关注者的最佳方法是使用 User Streams API 在事件发生时实时获取事件：[https ://dev.twitter.com/docs/streaming-apis/streams/user](https://dev.twitter.com/docs/streaming-apis/streams/user)

# php - Breezingforms 更改编码

> ID：10672580
> 
> 赞同：0
> 
> 时间：2012-05-20T10:17:06.013
> 
> 标签：php, encoding, character-encoding, breezingforms

我正在尝试使用我编写的自定义脚本，该脚本在提交片段中收集表单数据并通过电子邮件发送。当输入的数据是英文时，脚本运行良好。但是对于希伯来语，我需要将数据编码为 ISO-8859-1。我相信它现在正在以 utf-8 编码。在示例表单（非轻松形式）中，我可以通过添加到表单标记来完成此操作，如下所示；

```
 <form accept-charset="ISO-8859-1"> 
```

并从 $_REQUEST 数组中收集数据就可以了。我在 breezyform 中添加了“接受字符集”行，但我只能使用 ff_submit 收集数据（$_REQUEST 为空）。我在哪里可以更改表单编码？我已经尝试使用 PHP 来更改字符串的编码，但没有这样做。任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T00:13:33.817

您不能在 ISO-8859-1 中对希伯来语进行编码，因为 ISO-8859-1 仅支持以拉丁字母书写的西欧语言。您可以对其进行音译，或将其编码为 ISO-8859-8，但处理它的最简单方法是以 UTF-8 格式返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:58:18.850

事实证明，我可以通过添加到字段名称来访问`$_REQUEST`数组，因此它会获取您在 breezingform“myfield”中命名的元素`ff_nm_``$_REQUEST[myfield]``$_REQUEST[ff_nm_myfield][0]`

# php - PHP + MYSQL：从（到）许多表中选择/更新/插入

> ID：10672581
> 
> 赞同：0
> 
> 时间：2012-05-20T10:17:10.537
> 
> 标签：php, mysql

我有很多`tableN`带有字段的表（我们应该称它们为 ）：`id`, `valueN`. 假设我们有数组`(value1 => 'val1', value2 => 'val2', value10 => 'val10')`，向 中插入值的方法是什么`table1`，`table2`以及`table10`（我的意思是比对 DB 执行 3 个请求更好）。从行更新表中的值的最简单方法是什么（如果我们知道原因`id`）。`id=ID`最后，从表中获取所有值的最优雅的方法是什么（ `JOIN`？）。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:20:29.407

最简单的方法是将 3 个单独的插入语句写入三个表中。这就是这样做的方法。

如果需要，将它们包装在事务中。

# .net - 我们可以使用 .NET 自定义 Deployer 吗？

> ID：10672582
> 
> 赞同：2
> 
> 时间：2012-05-20T10:17:39.087
> 
> 标签：.net, tridion, tridion2009, tridion-content-delivery

由于某些原因，我需要自定义部署器，我只能看到一些[使用 java 自定义部署器的](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/Deployer_Extensions_With_Eclipse_1.aspx)文章。

我们可以使用 .NET 项目自定义部署程序吗，请分享您的想法，如果可能的话，请分享一些解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T14:14:52.937

显而易见的答案是`NO`。Deployer 是 Content Delivery 的一个相当低级的部分，它的扩展点仅对 Java 可用。

但是，有很多方法可以给这只猫剥皮，这完全取决于您要达到的目标。

例如，您可以使用 .NET 创建一个 Web 服务来完成扩展的所有功能，并编写一个简单的部署模块（使用 Java）来调用该 Web 服务，并将所有必需的参数传递给它。

您可以通过在将包传递到部署程序正在侦听的实际位置之前发布到调用 .NET 方法的位置来预处理传输包。

如果您更喜欢后处理，您可以配置部署程序以保持成功的事务并监控部署程序存储这些事务的位置（“传入文件夹”+“\Success”）。

这实际上完全取决于您想要实现的目标。推荐的方法是使用 Java，但如果您不熟悉该语言，您可以发挥创造力并以最少的 Java 编码实现相同的最终结果。这是一个“空”模块的示例，它遍历正在发布的项目并记录有关对象的信息：

```
import java.util.Iterator;

import com.tridion.configuration.Configuration;
import com.tridion.configuration.ConfigurationException;
import com.tridion.deployer.Module;
import com.tridion.deployer.ProcessingException;
import com.tridion.deployer.Processor;

import com.tridion.transport.transportpackage.Binary;
import com.tridion.transport.transportpackage.BinaryKey;
import com.tridion.transport.transportpackage.Component;
import com.tridion.transport.transportpackage.ComponentKey;
import com.tridion.transport.transportpackage.MetaData;
import com.tridion.transport.transportpackage.MetaDataFile;
import com.tridion.transport.transportpackage.Page;
import com.tridion.transport.transportpackage.PageKey;
import com.tridion.transport.transportpackage.ProcessorInstructions;
import com.tridion.transport.transportpackage.Section;
import com.tridion.transport.transportpackage.TransportPackage;

import org.slf4j.LoggerFactory;
import org.slf4j.Logger;

public class CustomCacheNotificationDeploy extends Module {

    String action = null;
    Logger log = null;
    MetaDataFile pageMeta = null;
    MetaDataFile componentMeta = null;
    MetaDataFile binaryMeta = null;
    public CustomCacheNotificationDeploy(Configuration config, Processor processor)
            throws ConfigurationException {
        super(config, processor);
        log = LoggerFactory.getLogger(getClass());
        // TODO Auto-generated constructor stub
    }

    @SuppressWarnings("deprecation")
    public void process(TransportPackage data) throws ProcessingException{
        ProcessorInstructions instructions = data.getProcessorInstructions();
        action = instructions.getAction();
        MetaData pageMetaInfo = instructions.getMetaData("Pages");
        MetaData componentMetaInfo = instructions.getMetaData("Components");
        MetaData binaryMetaInfo = instructions.getMetaData("Binaries");
        pageMeta = data.getMetaData("Pages", pageMetaInfo.getName());
        componentMeta = data.getMetaData("Components", componentMetaInfo.getName());
        binaryMeta = data.getMetaData("Binaries", binaryMetaInfo.getName());

        log.debug("Action " + action + " started for publication " + instructions.getPublicationId());

        Section section = null;
        Iterator<Section> Sections = instructions.getSections();
        for(; Sections.hasNext(); processSection(section))
        {
            section = Sections.next();
        }

    }

    protected void processSection(Section section)
    {
        log.debug("Processing Section " + section.getName());
        Iterator iterator = section.getFileItems();
        Object item;
        for(; iterator.hasNext(); processItem(item, section))
        {
            item = iterator.next();
        }
        Section subSection;
        for(Iterator i$ = section.getSubSections().iterator(); i$.hasNext(); processSection(subSection))
            subSection = (Section)i$.next();
    }

    protected void processItem(Object obj, Section section)
    {
        if(obj instanceof PageKey)
        {
            log.debug("Object is Page");
            PageKey key = (PageKey) obj;
            Page page = (Page)pageMeta.getMetaData(key);
            log.debug("Page being deployed is " + page.getId() + " with URL " + page.getURLPath());
        }
        if(obj instanceof ComponentKey)
        {
            log.debug("Object is Component");
            ComponentKey key = (ComponentKey) obj;
            Component component = (Component)componentMeta.getMetaData(key);
            log.debug("Component being deployed is " + component.getId());
        }
        if(obj instanceof BinaryKey)
        {
            log.debug("Object is Binary");
            BinaryKey key = (BinaryKey) obj;
            Binary binary = (Binary)binaryMeta.getMetaData(key);
            log.debug("Binary being deployed is " + binary.getId() + " with URL " + binary.getURLPath());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T10:29:36.317

如您所见，部署程序只能使用 Java 进行扩展。如果您想使用 .NET 进行完全自定义的操作，最好的选择是使用 FTP（或没有进程内部署程序的 HTTP）发布文件，并创建一个带有文件系统监视器的 .NET 应用程序来处理文件。

也许您可以分享更多关于您想要实现的目标以及您的 SDL Tridion 版本，以便有人提供更多建议。

# html - 如何使选择元素缩小到字段集中的最大宽度百分比样式

> ID：10672586
> 
> 赞同：38
> 
> 时间：2012-05-20T10:17:53.457
> 
> 标签：html, css

当我减小浏览器窗口的宽度时，尽管有以下命令，但其中的`select`元素`fieldset`大小不会减小：`max-width`

```
<fieldset style="background:blue;">
<select name=countries style="max-width:90%;">
 <option value=gs>South Georgia and the South Sandwich Islands</option>
</select>
</fieldset> 
```

然而，这完全适用于外部`fieldset`元素。如何使`select`元素缩小到字段集中的`max-width`（百分比）？

**注意：**我已经测试了 Firefox 12.0 和 Google Chrome。我现在确定这是一个跨浏览器的问题。

**澄清**：请参考[此示例](http://jsfiddle.net/e2H82/)并注意 a`select`内部元素的行为`fieldset`与`fieldset`. 我想要实现的是让`select`元素内的元素`fieldset`表现得像元素外的`fieldset`元素。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-29T08:04:38.647

### 问题

这是不可能的，至少如果您只使用`max-width`（请参阅下面的解决方案）。`<select>`s 的样式总是[有点棘手](https://stackoverflow.com/a/9285535/1139697)，因为它们是[交互式内容元素](http://www.w3.org/TR/2014/REC-html5-20141028/dom.html#interactive-content) *和*表单控制元素。因此，他们必须遵循一些隐含的规则。一方面，在使用`max-width`. 考虑以下场景：

```
+------------------------------------------------+-+
|另一个条目 |v|
+------------------------------------------------+-+
|另一个条目 |
|请选择框，请选择任何内容 |
|另一个条目 |
|另一个条目 |
+------------------------------------------------+-+

```

假设你想挤压这个`<select>`- 会发生什么？选择的宽度会变小，直到...

```
+------------------------------------------------+-+ +---------- --------------------------+-+
|另一个条目 |v| |另一个条目 |v|
+------------------------------------------------+-+ +---------- --------------------------+-+
|另一个条目 | |另一个条目 |
|请选择框，请选择任何内容|-->|请选择框，请选择任何内容|
|另一个条目 | |另一个条目 |
|另一个条目 | |另一个条目 |
+------------------------------------------------+-+ +---------- --------------------------+-+
                                                   |
           +----------------------------------------------------+
           v
+---------------------------------+-+ +---------- ----------------------+-+
|另一个条目 |v| |另一个条目 |v|
+---------------------------------+-+ +---------- ----------------------+-+
|另一个条目 | |另一个条目 |
|请选择框，请选择任何内容|-->|请选择框，请选择任何内容|
|另一个条目 | |另一个条目 |
|另一个条目 | |另一个条目 |
+---------------------------------+-+ +---------- ----------------------+-+

```

然后该过程将停止，因为`<option>`s 不再适合。请记住，如果没有一些讨厌的怪癖，您将无法设置样式`<option>s`或至少只有一点点（颜色，字体变体）。但是，如果选择准备正确，可以更改边框框：

### 解决方案

在 上使用一个`width`值`select`。是的，就这么简单：

```
<fieldset style="background:blue;">
 <select name=countries style="width:100%;max-width:90%;">
  <option value=gs>South Georgia and the South Sandwich Islands</option>
 </select>
</fieldset> 
```

为什么这行得通？因为`option`现在`width`将正确识别 的`select`并且不会强制`select`具有隐含的`min-width`. 请注意，`width`是荒谬的，因为它比`max-width`. 在这种情况下，大多数浏览器不会关心和使用`max-width`，因为它提供了一个上限。

[**JSFiddle Demo**](http://jsfiddle.net/J5j39/5/)（适用于 FF12、Chrome 18、IE9、Opera 11.60）

### 编辑

基于包装的解决方案，这不会改变原始宽度：

```
<fieldset style="background:blue;">
<div style="display:inline-block;max-width:90%;"> <!-- additional wrapper -->
 <select name=countries style="width:100%">
  <option value=gs>South Georgia and the South Sandwich Islands</option>
 </select>
</div>
</fieldset> 
```

[**JSFiddle Demo**](http://jsfiddle.net/J5j39/6/)（在上面列出的浏览器中工作）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T11:23:47.753

这是[**你**](http://jsfiddle.net/J5j39/4/)要找的吗？

```
<fieldset style="background:blue; display:inline; width:100%;">
  <select name=countries style="width:90%;">
    <option value=gs>South Georgia and the South Sandwich Islands</option>
  </select>

  <input name=others style="display:block; min-width:300px; width:90%;">
</fieldset> 
```

无论哪种方式，当您使用一个值（例如 300 像素）指定宽度时 - 此高度将优先，并且元素本身将被分配 300 像素。定义`width`百分比并给出`min-width`绝对值。百分比取自其父元素。所以，你也应该给它的父母一个百分比。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:39:35.023

将 的 设置`width`为`fieldset`（`100%`或任何其他值）

[http://jsfiddle.net/e2H82/3/](http://jsfiddle.net/e2H82/3/)

在谷歌浏览器中测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-15T16:44:04.933

包装选择。在本例中，我将使用带有“select_wrap”的 div。

```
div.select_wrap {
  height: 1em;
} 
div.select_wrap select { 
  position: absolute;
  max-width: calc(100% - 6px);
  text-overflow: ellipsis;
} 
```

“绝对”上下文允许解释最大宽度 - 没有实际的位置信息，只是将其强制到不同的上下文中。calc() 让您更详细地了解 max-width 实际应该是什么，因为您没有以前的边距和填充。文本溢出看起来不错。

需要 select_wrap 的高度来确保表单按预期围绕 select 流动 - 您需要保留 select 以前填充的空间。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2016-04-06T09:27:27.637

尝试：

```
fieldset select{
    margin:auto
}
```

# c++ - 在 C++ 中表示 BLOB

> ID：10672587
> 
> 赞同：4
> 
> 时间：2012-05-20T10:18:03.420
> 
> 标签：c++, stl, blob

是否有任何 STL 容器似乎非常适合用作数据库软件的 BLOB？我会想一个`vector<char>`，但有更好的吗？也许一个`std::string`？还是一些非 STL 容器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T10:25:43.513

数据库的`BLOB`类型允许存储二进制数据，因此您需要一个有序的字节集合。最简单的选择是 a`vector<>`并且您可以选择`unsigned char`在大多数平台上表示一个字节

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T10:25:12.720

我们`stream`在其中一个项目中使用 s 来表示存储在数据库中的 BLOB/CLOB 值。我认为大多数时候这是最好的方法，因为根据定义，BLOB/CLOB 可能非常大，无法放入内存中。

编写`stream`您自己的实现并像使用其他任何`stream`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T15:24:08.773

我目前`std::string`用于存储 blob，因为我使用 Google 的[Protocol Buffers](https://developers.google.com/protocol-buffers/)库进行对象序列化，这就是他们使用的（例如[MessageLite::SerializeToString](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.message_lite#MessageLite.SerializeToString)）。它非常适合我的目的，因为将生成的字符串作为 blob 插入 SQLite 数据库非常简单：

```
sqlite3_bind_blob(_insert_statement, 3, data.c_str(), data.size(), SQLITE_STATIC); 
```

(`data`是一个`std::string`被绑定为 的第三个参数`_insert_statement`。)

# c++ - 使用 SSE 指令的 C++ 中最快的文件读取

> ID：10672588
> 
> 赞同：-2
> 
> 时间：2012-05-20T10:18:05.657
> 
> 标签：c++, optimization, file-io, sse

我必须以最快的方式从文件中读取 8k x 8k 矩阵。到目前为止，我正在使用 fstat 并将整个文件读入内存，然后对加载的数据进行操作。

这是最快的方法吗。我正在开发带有 SSE 指令的 x86 处理器。我可以利用他们阅读文件的优势吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T10:29:07.227

SSE 指令不会加快读取文件的速度。这将受到您的磁盘访问权限的限制。

将文件放入内存后，如果编译器发出 SSE 指令，则对矩阵执行的操作将受益。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T13:01:40.690

您还可以考虑使用内存映射文件并将一些缓冲责任转移给操作系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T10:28:35.103

如果您需要在处理之前将所有数据保存在内存中，那么您已经在执行的方式看起来是最好的。

SSE 操作可能会帮助您处理数据，但不会帮助您更快地加载数据。无论如何，您可以尝试打开编译器中可用的最大优化（例如，在 GCC 中，您可以使用 -O3 然后指定 -msseX 选项之一）。当然，这样做会降低二进制文件的可移植性。

# php - 我怎样才能只发送一些 GET 参数

> ID：10672590
> 
> 赞同：-1
> 
> 时间：2012-05-20T10:18:11.987
> 
> 标签：php, forms, get

我有一个使用 GET 方法的表单。此表单可能有大量需要更新的字段。所以有时 URL 会变得太长。所以我想我可以添加更多按钮来分别更新每组字段。

**问题**是，即使我添加了一个新按钮，它也会发送**所有**FORMs 参数。我怎样才能只发送一些参数？

* * *

**编辑：**我无法将 GET 替换为 POST，因为此页面不仅从自身调用，而且从其他页面调用，因此必须将其中两个参数用作 GET。我试过

```
if(isset($_GET['param_id1'])) {
           $param_id1 = $_GET['param_id1'];
       } else if(isset($_POST['param_id1'])){
           $param_id1 = $_POST['param_id1'];
       } 
```

并在表格内 -

```
printf ("<form method='post' action='update_order.php'>"); // Use POST instead of GET
printf ("  <input type='hidden' name='param_id1' value='$param_id1'>"); 
```

*但它也没有用。*

**编辑 2：**它不起作用，因为我忘记更改 URL -

```
<form method='post' action='update_order_test_post.php'> 
```

* * *

**我的表单：** [我使用 PHP]

```
<form method='get' action='update_me.php'> 
 . . . 
<input type='submit' name='Submit' value='Update All'>   <!-- Original button -->
 . . . 
<input type='submit' name='Submit' value='Update One Line'> <!-- New button --> 
```

**原始 URL：**用 newLines 分隔以便清楚

```
http://mySite.com/update_order.php?
&infoA=aaa
&infoB=bbb
&infoC=ccc
&Submit=Update
&param1[1]=11
&param2[1]=21
&param3[1]=31
&param4[1]=41
. . . 
&param1[2]=211
&param2[2]=221
&param3[2]=231
&param4[2]=241
. . . 
&param1[3]=3311
&param2[3]=3321
&param3[3]=3331
&param4[3]=3341
. . . 
&param1[4]=411
&param2[4]=421
&param3[4]=431
&param4[4]=441
. . . 
. . . 
```

**我只想将以下字段发送到新 URL**，例如，如果单击了第 3 行中的按钮：

```
http://mySite.com/update_order.php?
&infoA=aaa
&infoB=bbb
&infoC=ccc
&Submit=UpdateOneLine
&param1[3]=3311
&param2[3]=3321
&param3[3]=3331
&param4[3]=3341
. . . 
```

谢谢，阿塔拉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:21:09.267

使用 POST，这就是它的用途。

如果您使用 POST，那么您无需担心减少提交的项目数量。它可能看起来像是大量的项目，但就数据而言，您可能只处理最多 10K 的正在发送的数据。您页面的其余部分可能介于 50 - 300K 之间，因此它只是一小部分。

只需将表单方法更改为 POST 并在 php 接收页面中使用您需要的参数。

**更新** 要回答您的具体问题，如果您将每一行设为单独的表单，那么它只会在用户单击提交按钮时提交该行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T10:51:06.980

@Atara 使用 POST 肯定会解决您的问题。因为您无法在浏览器的地址栏中点击 POST 操作。

# javascript - 如果用户返回，Onbeforeunload 不起作用

> ID：10672591
> 
> 赞同：3
> 
> 时间：2012-05-20T10:18:14.407
> 
> 标签：javascript, jquery, ajax

我在用

```
 $(window).bind('beforeunload', function() {
        $.post("save.php",{name:moves});
 }); 
```

它工作得很好，但前提是用户关闭页面。如果用户返回或键入另一个网站，它就不起作用。我应该使用哪个事件？（它应该在用户离开时触发）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-20T10:42:18.853

你可能会觉得[这](https://stackoverflow.com/questions/116446/what-is-the-best-back-button-jquery-plugin)很有趣。:)

上面的线程归结为[这个](http://www.asual.com/jquery/address/)，一个名为 Asual 的插件。

我在这个插件上的 10 美分。编写良好、维护良好、高度灵活的插件，具有很好的参考 API，使其非常容易实现。

# facebook - 如何使用 Facebook 开放图 API 获取用户的共享链接？

> ID：10672598
> 
> 赞同：2
> 
> 时间：2012-05-20T10:19:54.917
> 
> 标签：facebook, facebook-graph-api, youtube

我有一个网络应用程序，用户必须使用他们的 Facebook 帐户登录。当他/她登录系统时，我想在她/他的时间线上获取用户共享的 youtube 链接。

我认为 open graph api 不支持这样的功能。我不知道这可能与否。

我怎样才能得到这些信息？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T11:30:32.750

您无法过滤特定数据的时间线，但您可以使用“链接”路径组件来缩小要处理的可能记录的数量：

[https://graph.facebook.com/userID/links?access_token=AT](https://graph.facebook.com/userID/links?access_token=AT)

这将返回用户在其时间轴上发布的所有链接。遍历所有返回的结果，搜索链接字段，如果它包含“youtube”，则您有视频。

请记住，即使您设置了上限（例如 2000 个条目），您也需要处理分页。

希望有帮助：拉斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-10T04:29:20.290

**注意：v2.4 及更高版本不推荐使用链接字段**

似乎也无法从 /posts 端点获取共享链接。因为在那里我们只能得到消息。没有关于共享链接的信息。

# php - 实时新消息通知

> ID：10672604
> 
> 赞同：1
> 
> 时间：2012-05-20T10:21:18.290
> 
> 标签：php, jquery, mysql

想象一下，我们正在为我们的网站用户提供一个消息框系统，我想要做的是，如果向成员发送了一条新消息，而目标成员在他的收件箱中，他可以在收到后立即看到一条通知消息新消息。

为此，我们可以拥有“new_messages” div，它将使用带有 setInterval() 的 jQuery 刷新并发送查询以查看是否有新消息，但如果我们有 10.000 个成员，我们不能发送 10.000 个查询，这可能会杀死服务器！我希望仅在 hi 收到新消息时才为目标成员显示通知。类似的，我们可以在我们的页面中有一个“监听”div，当新消息被触发时它会被触发。

我还阅读了有关 MySQL 触发器的信息，但似乎这不是解决此问题的方法，因为它可能会向数据库触发另一个 SQL 语句，而无助于向用户显示通知。

那么这种情况的解决方案是什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:31:34.790

您可以查看[PHP Comet 系统](https://stackoverflow.com/questions/603201/using-comet-with-php)问题，了解有关将实时事件从服务器推送到浏览器的想法。或者尝试查看使用 Websockets 的详细信息。但是这些对于 PHP 来说并不能很好地适应。

但是，如果您希望实现某种聊天，请尝试查看[http://www.phpfreechat.net/](http://www.phpfreechat.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T10:37:47.267

或者您可以使用[Long-Polling](https://stackoverflow.com/questions/6955554/long-polling-using-jquery-and-php)，但我认为 PHP 并不是解决整个问题的最佳解决方案。

[最好通过此处](http://www.quora.com/Where-can-I-find-long-polling-examples-for-PHP-and-jQuery)找到的报价来解释

> 我不会这样做的原因有很多，这里有一些：
> 
> PHP 是为快速执行而设计的（不是为了等待） PHP 将迫使您在服务器端进行某种轮询并依赖 sleep() PHP 会吃掉您的 RAM，而每个请求的生成进程也是如此（Apache 会这样做）
> 
> 但是你可以做到这一点，使用睡眠，轮询数据库（或者更好的缓存 APC/Memcache）。
> 
> 如果您想做类似的事情，请使用一些可以处理事件的技术：Python（Tornado、gevent、eventlet、Twisted，...），Ruby（Eventmachine，...），Erlang，Scala，服务器端 JavaScript（node.js， ……），……</p>
> 
> 抱歉，如果这不是您问题的直接答案，我仍然鼓励您尝试在纯 PHP 中执行此操作以查看其行为方式（尤其是 Web 服务器）。

# iphone - 在 iPad 上 [MFMessageComposeViewCont canSendText] 返回 YES？

> ID：10672607
> 
> 赞同：2
> 
> 时间：2012-05-20T10:21:33.277
> 
> 标签：iphone, ios, ipad

令人惊讶的是，我可以在 iPad 上发送消息。该方法甚至在 iPad 上也会`[MFMessageComposeViewController canSendText]`返回。`YES`我不知道为什么。大约 2 个月前我测试时没问题（该方法将返回 NO）。

iOS版本是5.1（9B176），设备是iPad 2（新Pad也有问题）。xcode 版本是 4.3.1

有没有人遇到过同样的问题？

* * *

@jrturton：是的，你是对的。当我关闭 iMessage 时，`[MFMessageComposeViewController canSendText]`返回`NO`. 似乎`[MFMessageComposeViewController canSendText]`不能用于查找设备是否可以发送短信。又怎样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T11:22:26.500

随着 iOS 5 和 iMessage 的发布，以及配置为发送 iMessage 的 iPad，将重新`YES`启用`[MFMessageComposeViewController canSendText]`.

这不是错误/错误，正如 Apple 所说，它是一项功能！我确实理解这种混乱，因为[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)`MFMessageComposeViewController`没有提到 iPad 激活 iMessage 的可能性。

# git - 在本地切换 SVN 分支而不检查所有内容

> ID：10672612
> 
> 赞同：1
> 
> 时间：2012-05-20T10:22:10.843
> 
> 标签：git, svn

*是否可以从一个分支切换到另一个分支进行工作，而无需每次都检查整个分支？（同时保存任何更改，以便我可以切换回来）*

**场景：** 我正在开发一个企业应用程序，它在 SVN 中具有非常大的代码库。我的问题是我总是必须同时在多个分支上工作，其中大多数代码实际上保持不变。就时间和磁盘空间而言，将这些代码作为单独的副本签出对我来说是一个很大的开销。

**可能的解决方案？**

我不确定 git 是否可以提供帮助。我可以在 git 上做一个本地分支，然后与 SVN 中的另一个分支同步，这样它就可以跟踪分支之间的差异并且只有差异保存在本地文件系统中？

git-svn 会有帮助吗？另外，如果可能的话，我希望在 Eclipse 中完成这些操作。

ps 由于svn repo是企业级的，我不能对它产生任何影响。

提前致谢@

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:56:59.237

你为什么不简单地使用[svn 开关（](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.ref.svn.c.switch)[这里](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.branchmerge.switchwc)有更详细的描述）？

# java - 我有 JSF 1.1 页面，其中有一个 <h:selectonelistbox. 1="" 776="" 当我设置属性="" disabled="true" 时，<h:selectonelistbox在提交页面时，选定的值变为="" null。="" <h:se="" 问问题="" 2012-05-20t10:22:18.613="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我有="" jsf="" 1.1="" 页面，其中有一个<h:selectonelistbox.="" <h:selectonelistbox="" size="1" id="prod" 即使属性设置为="" 谢谢="" 当在disabledhtml="" 输入元素上设置属性时，它不仅不可编辑，而且也不会将其="" name="value" 对作为请求参数发送到服务器。这就解释了为什么服务器会null为它们检索="" s。="" 如果您想让它不可编辑，但仍想将其="" 对作为请求参数发送到服务器，那么您应该readonly改用它。="" <h:someinput="" ...="" readonly="true">javajsf 4 1 回答 1 This answer is useful 5 当在disabledHTML 输入元素上设置属性时，它不仅不可编辑，而且也不会将其 name=value 对作为请求参数发送到服务器。这就解释了为什么服务器会null为它们检索 s。 如果您想让它不可编辑，但仍想将其 name=value 对作为请求参数发送到服务器，那么您应该readonly改用它。 <h:someinput ...="" readonly="true">于 2012-05-20T12:22:59.560 回答 Related 3 ios - 修改 iOS 项目的 RGB 值后尝试更新 UIImageView 时应用程序崩溃 2 php - PHP：从客户端站点上的服务器播放声音文件 1 struts2 - 如何仅使屏幕的一部分可滚动 3 javascript - 延迟后如何更改文本 - jQuery 1 javascript - SoundManager 2 的问题 2 java - 防止css通过restlet 1 android - 暂停在android中的音频播放器中 1 sql - MVC 创建 SQL 视图与将计算放入控制器 1 groovy - Groovy shell 评估中的死锁 2 javascript - 为具有随机 ID 的多个文本框单击选择文本 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</h:someinput></h:selectonelistbox.>

> ID：10672614
> 
> 赞同：1
> 
> 时间：
> 
> 标签：java, jsf

我有 JSF 1.1 页面，其中有一个`<h:selectOneListbox`. 当我设置属性 disabled=true 时，`<h:selectOneListbox`在提交页面时，选定的值变为 null。

```
<h:selectOneListbox size="1" id="prod"  disabled="#{mybean.disable}" 
```

即使属性设置为 disabled=true，如何确保选择的值不为空。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T12:22:59.560

当在`disabled`HTML 输入元素上设置属性时，它不仅不可编辑，而且**也不**会将其 name=value 对作为请求参数发送到服务器。这就解释了为什么服务器会`null`为它们检索 s。

如果您想让它不可编辑，但仍想将其 name=value 对作为请求参数发送到服务器，那么您应该`readonly`改用它。

```
<h:someInput ... readonly="true"> 
```

# c# - 如何将表单类放入另一个选项卡控件中

> ID：10672617
> 
> 赞同：0
> 
> 时间：2012-05-20T10:22:37.853
> 
> 标签：c#, .net, winforms

我有一个有两种形式的 C# 程序。一个表单包含选项卡控件，另一个是具有许多控件的独立表单。

问题是：是否可以将此表单集成到第一个表单的第一个控件的选项卡控件中，或者我必须重写所有代码并将它们放入选项卡控件中？

我使用 C# Visual Studio 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T10:27:34.633

一般来说，这是可能的。但是，我强烈建议您不要使用父表单。相反，将控件移动到 UserContol 并将此 UserControl 的实例添加到第二个窗体和 TabControl 的 TabPage。

下面是显示如何向 TabPage 添加控件的代码：

```
Form f = new Form();
            f.TopLevel = false;
            f.BackColor = Color.Green;
            f.Visible = true;
            tabPage1.Controls.Add(f); 
```

**但是**，我强烈建议您使用基于 UserControl 的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T10:29:56.937

在运行时，您可以将第二个表单作为第一个表单选项卡的子/内容。

虽然不是直接的。

为此，您可以将第二个表单创建为用户控件，将所有代码从第二个表单移动到用户控件，然后将此用户控件用作`TabPages`内容

# c++ - 基于使用 make 命令或 makefile 运行预处理器

> ID：10672620
> 
> 赞同：1
> 
> 时间：2012-05-20T10:23:16.573
> 
> 标签：c++, c, gcc, makefile, c-preprocessor

在 GCC 中，我们可以运行简单的预处理器：

```
g++ -E x.cpp > temp.cpp 
```

但是，在有这么多`makefile`s 的大型项目中；提到所有的依赖关系非常麻烦。例如

```
g++ -I /home/x1 -I /home/x2 ... -DMACRO1 -DMACRO2 ... -E x.cpp > temp.cpp 
```

有什么方法可以通过使用`makefile`，我们可以运行 C 预处理器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T01:53:04.490

使用`.cpp`预处理文件的后缀是一个坏主意，因为它与`.cpp`C++ 文件的后缀冲突。试试别的 - 这是一个你可以开始使用后缀的片段`.e`：

```
CXX      = g++
CPPFLAGS = -E
CXXFLAGS = -Wall -DMACRO1 -DMACRO2
INCLUDES = -I /home/x1 -I /home/x2

%.e : %.c
        $(CXX) $(CXXFLAGS) $(CPPFLAGS) $(INCLUDES) $< -o $@ 
```

小心在'recipe'的开头放置一个TAB（“$(CXX) $(CFLAGS) ...”行）。上面的东西定义了一个规则，告诉`make`如何`.e`从文件构建`.cpp`文件。有了一个文件`x.cpp`，你可以使用

```
make x.e 
```

请注意，-E 标志是在 CPPFLAGS 中定义的。这告诉编译器 (g++) 在预处理阶段之后停止。告诉编译器将`-o`生成的文件放在哪里，而 $@ 是 的`make`简写`target`，在这种情况下是`.e`文件。无需重定向任何东西；g++ 为您编写`.e`文件。

如果要为`.e`cpp 文件列表生成文件，请执行以下操作：

```
SRCS = a.cpp b.cpp c.cpp d.cpp
CPPS = $(SRCS:.cpp=.e)   

.PHONY:cpps
cpps: $(CPPS) 
```

然后构建它们：

```
make cpps 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:44:49.380

你不能使用-save-temps吗？如果您的项目有很多makefile，也许有一个顶层定义了编译器的名称/路径？我只是劫持它看起来像：

CC = 一些目标 gcc -save-temps

然后，您每次构建时都会得到一堆 .i 文件。

# scala - 如何在 specs2 索引页面中显示不同的图标？

> ID：10672626
> 
> 赞同：1
> 
> 时间：2012-05-20T10:24:24.290
> 
> 标签：scala, specs2

我们使用 Specs2 从规范和示例生成 HTML，非常喜欢它。唯一的问题是索引页面没有指出哪些规范没有通过测试——它只包含指向以绿色“ok”图标为前缀的规范页面的链接，这显然是一种误导，因为它可能会让观察者认为所有测试是绿色的。

我们使用以下内容生成了索引页面，如[specs2 用户指南](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#Create+an+index)中所述：

```
package examples

import org.specs2._
import runner.SpecificationsFinder._

/**Creates an index page for the specifications */
class index extends Specification {

  def is =
    examplesLinks("Specs")

  def examplesLinks(t: String) = specifications().foldLeft(t.title) {
    (res, cur) => res ^ see(cur)
  }
} 
```

那么，有没有办法在索引页面中显示不同的图标（红色？）以链接带有失败测试的规范？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T23:54:30.523

这实际上是一个 bug，在 1.11-SNAPSHOT 中修复。

# actionscript-3 - 如何在 Actionscript 3 中真正光栅化文本？

> ID：10672629
> 
> 赞同：2
> 
> 时间：2012-05-20T10:24:53.320
> 
> 标签：actionscript-3, text, rasterizing

Actionscript Bitmap（或 BitmapData）很奇怪。不仅它的 cacheAsBitmap 默认为 false，而且 BitmapData 似乎不仅仅是一个位图！

我发现，动画文本行 alpha 会让它们闪烁。我尝试以多种方式解决它，其中之一是将带有背景的文本绘制到位图并为位图设置动画：

```
package 
{
    import flash.events.Event;
    import flash.display.Sprite;

    import flash.display.Bitmap;
    import flash.display.BitmapData;

    import flash.text.TextField;

    public class Main extends Sprite 
    {
        private var bdata1:BitmapData = new BitmapData ( 150, 50, false, 0xDDDDFF );
        private var bitmap1:Bitmap = new Bitmap( bdata1 );
        private var bdata2:BitmapData = new BitmapData ( 100, 100, false, 0x00FFFF );
        private var bitmap2:Bitmap = new Bitmap ( bdata2 );

        private var show:Boolean = false;

        public function Main():void 
        {
            stage.frameRate = 1;
            var tf:TextField = new TextField ();
            tf.text = "layer top";
            bdata1.draw( tf );
            tf.text = "layer bottom"
            bdata2.draw ( tf );

            //*
            bitmap1.cacheAsBitmap = true;
            bitmap2.cacheAsBitmap = true;
            //*/

            addChild ( bitmap2 );
            addChild ( bitmap1 );
            addEventListener (Event.ENTER_FRAME, onEnterFrame );
        }   

        private function onEnterFrame ( e:Event ):void
        {
            if ( show ) var diff:Number = .2;
            else diff = -.2;

            bitmap1.alpha += diff;
            if ( bitmap1.alpha >= 1 ) {
                show = false;
                bitmap1.alpha = 1;
            }
            else if ( bitmap1.alpha <= 0 ) {
                show = true;
                bitmap1.alpha = 0;
            }
        }
    }
} 
```

它应该做的是在“图层底部”和“图层顶部”文本之间平滑过渡（好吧，如果您更改 FPS）。它的作用很奇怪，至少在我的机器上，清楚地表明位图中的文本没有被视为位图，但仍被视为矢量（可能是 TextLine）。那么 BitmapData 是否仅模拟位图？它是一个错误吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T11:00:43.477

首先，你需要嵌入`Font`swf。假设您已嵌入`"Arial"`. 然后试试这个：

```
var tf:TextField = new TextField ();
var tf_format:TextFormat = tf.defaultTextFormat;
tf_format.font = "Arial";   //Specifying embedded font's name
tf.defaultTextFormat = tf_format; 
tf.embedFonts = true;
tf.antiAliasType = AntiAliasType.ADVANCED;
//......... 
```

在此之后，您将拥有“平滑文本”。

# javascript - 停止对活动元素的传播

> ID：10672633
> 
> 赞同：0
> 
> 时间：2012-05-20T10:25:13.573
> 
> 标签：javascript, jquery

我在停止事件传播时遇到问题。想象一下这个场景：

```
<table id="test">
    <tbody>
        <tr>
            <td class="row"> </td>
            <td class="row"> </td>
            <td class="row"> </td>
            <td class="row"> </td>
            <td class="row"> </td>
        </tr>
        <tr>
            <td class="row"> </td>
            <td class="row"> </td>
            <td class="row"> </td>
            <td class="row"> </td>
        </tr>
    </tbody>
</table>​ 
```

然后这段代码：

```
(function(){
    $('td.row').on('click', function(e){
        if (! e.isPropagationStopped())
             alert('Row clicked!');        
    });
    $('table#test').on('click', 'img.live', function(e){
        e.stopPropagation();
        alert('Image clicked!');            
    });
    $('td.row').html('<img src="http://fc03.deviantart.net/fs71/f/2011/161/f/c/nyan_cat_avatar_by_oxoxnaminemayxoxo-d3il6gm.gif" class="live">');
})();​ 
```

每当单击图像时，都会触发两个事件。我希望它只是触发单击元素*上的事件。*我知道，由于它们是实时的，因此一旦传播结束，它们就会被解雇，但是，有什么解决方法吗？

据我调查，这两个事件实际上是相同的，但从`srcElement`变为。这个跨浏览器是否一致？`HTMLTableCellElement``HTMLImageElement`

我已经在[jsFiddle](http://jsfiddle.net/FrsFT/1/)中放了一个演示，以防您想观看实际操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T10:32:14.480

[这是一个演示](http://jsfiddle.net/FrsFT/3/)

问题是事件必须爬到父级才能找到`<img>`. 所以它必须通过`<td>`并立即触发它的处理程序，因为它不是委托处理程序。

```
*click*   ,-----------------> (1) fire direct td handler
  img -> td -> tr -> table  
                       '----> (2) fire delegated img handler
                       X<---- (3) e.stopPropagation() //too late! 
```

防止双重事件的一种方法是将`<td>`' 处理程序也添加到表中。然后 jQuery 将评估这两个处理程序，从最深的事件开始，如果这些处理程序中的任何一个具有`e.stopPropagation()`，则不会触发更高的事件。

```
$('table#test').on('click', 'img.live', function(e){
    e.stopPropagation();
    alert('Image clicked!');            
});

$('table#test').on('click','td.row', function(e){
     alert('Row clicked!');        
});

*click*                
  img -> td -> tr -> table
                       '----> (1) fire delegated img handler
                       X<---- (2) e.stopPropagation()
                       '----> (3) fire delegated td handler //never gets fired 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T10:39:49.283

也许我错了，但你不能在这里使用[事件委托](http://www.nczonline.net/blog/2009/06/30/event-delegation-in-javascript/)吗？

```
(function(){
    $('#test').on('click', function(e){
        if ( !/img$/i.test((e.target || e.eventSrc).nodeName)){
          alert('row clicked');
        } else {
          alert('image clicked');
        }           

    });
    $('td.row').html('<img src="'+
                     'http://fc03.deviantart.net/fs71/f/2011/'+
                     '161/f/c/nyan_cat_avatar_by_'+
                     'oxoxnaminemayxoxo-d3il6gm.gif" class="live">');
})();​ 
```

它为您省去了传播的麻烦。这是一个[jsfiddle](http://jsfiddle.net/hzpLn/)

# xml - XML 命名空间和无前缀属性

> ID：10672635
> 
> 赞同：5
> 
> 时间：2012-05-20T10:25:18.960
> 
> 标签：xml, xml-namespaces

XML 命名空间规范[解释了无前缀属性的解释由它们出现的元素决定](http://www.w3.org/TR/xml-names/#defaulting)。并且[无前缀属性名称的名称空间名称始终没有值](http://www.w3.org/TR/xml-names/#defaulting)。

`jid`在以下情况下，此规则如何应用于属性的命名空间。

```
<query xmlns="jabber:iq:roster">
  <item jid="romeo@example.com"></item>
</query> 
```

如果命名空间的声明和所讨论的属性都没有前缀，则该属性`jid`在命名空间中`jabber:iq:roster`。

```
<q:query xmlns:q="jabber:iq:roster">
  <q:item q:jid="romeo@example.com"></q:item>
</q:query> 
```

如果命名空间和属性的声明都具有相同的前缀，则属性`jid`也具有命名空间`jabber:iq:roster`：

```
<q:query xmlns:q="jabber:iq:roster">
  <q:item jid="romeo@example.com"></q:item>
</q:query> 
```

但是，如果命名空间是用前缀声明的，但属性没有前缀，那么属性在哪个命名空间中呢？我会假设，该属性`jid`

1.  在父元素中声明了默认命名空间，

    ```
    <parent xmlns="http://example.com">
      <q:query xmlns:q="jabber:iq:roster">
        <q:item jid="romeo@example.com"></q:item>
      </q:query>
    </parent> 
    ```

2.  或者没有命名空间，如果没有这样的声明。

我做对了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T12:17:03.327

XPath 和其他规范使用的正常解释是无前缀属性不在命名空间中。

有些语言律师会坚持命名空间规范没有这么说。它表示无前缀属性位于词汇表设计者所说的任何名称空间中。但这种解释在实践中并不是很有用；重要的是工具的作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T12:17:34.613

没有前缀的属性总是在空的命名空间中，即它没有命名空间。封闭元素是否具有名称空间并不重要。这是我对您提到的第二个陈述的解读，也是对我使用过的所有 XML 工具的解释。

# mercurial - Mercurial：如何推送一个带有书签的变更集，它会创建一个新的远程头，就好像我在推送一个新分支一样？

> ID：10672639
> 
> 赞同：8
> 
> 时间：2012-05-20T10:26:04.933
> 
> 标签：mercurial, merge, push, bookmarks

# 一般问题。

我正在尝试在 mercurial 中使用书签而不是分支。原因是我不想在**分支**中有很多不必要的固定名称的永久物品。

当我使用单独的书签进行新功能开发并且我想将其推送到 out 存储库时，就会出现问题。好吧，如果创建“新远程头”， **hg**不允许我推送。我应该怎么做才能像创建一个新分支一样进行推送？

# 示例（重现问题的方法）。

Alice 创建存储库：

```
C:\TestHg>mkdir Alice
C:\TestHg>cd Alice
C:\TestHg\Alice>hg init
C:\TestHg\Alice>echo line1>>file.txt
C:\TestHg\Alice>hg addremove
adding file.txt
C:\TestHg\Alice>hg commit -m "Initial commit." 
```

Bob 克隆 Alice 的存储库：

```
C:\TestHg\Alice>cd ..
C:\TestHg>hg clone Alice Bob
updating to branch default
1 files updated, 0 files merged, 0 files removed, 0 files unresolved 
```

Alice 对项目的代码进行了一些更改：

```
C:\TestHg>cd Alice
C:\TestHg\Alice>echo line2 by Alice>>file.txt
C:\TestHg\Alice>hg commit -m "Alice continues her work on the project." 
```

Bob 使用单独的书签开始他的 New Cool Feature 工作，以标识他独立的工作“分支”：

```
C:\TestHg\Alice>cd ..\Bob
C:\TestHg\Bob>hg bookmarks
no bookmarks set
C:\TestHg\Bob>hg bookmark NewCoolFeature
C:\TestHg\Bob>hg bookmarks
 * NewCoolFeature            0:792db6cfc262
C:\TestHg\Bob>echo line2 by Bob (as a part of New Cool Feature implementation)>>file.txt
C:\TestHg\Bob>hg commit -m "Bob starts his work on New Cool Feature" 
```

Bob 尝试将他的更改推送到 Alice 的目录：

```
C:\TestHg\Bob>hg push -B NewCoolFeature
pushing to C:\TestHg\Alice
searching for changes
abort: push creates new remote head 38506e28a438!
(you should pull and merge or use push -f to force) 
```

好的，首先 Bob 必须将 Alice 的更改拉到他自己的存储库中：

```
C:\TestHg\Bob>hg pull
pulling from C:\TestHg\Alice
searching for changes
adding changesets
adding manifests
adding file changes
added 1 changesets with 1 changes to 1 files (+1 heads)
(run 'hg heads' to see heads, 'hg merge' to merge) 
```

好吧，现在 Bob 在他的存储库中有两个头，这很好。

```
C:\TestHg\Bob>hg glog
o  changeset:   2:66beef200ba4
|  tag:         tip
|  parent:      0:792db6cfc262
|  user:        Alice
|  date:        Sun May 20 13:10:04 2012 +0400
|  summary:     Alice continues her work on the project.
|
| @  changeset:   1:38506e28a438
|/   bookmark:    NewCoolFeature
|    user:        Bob
|    date:        Sun May 20 13:12:26 2012 +0400
|    summary:     Bob starts his work on New Cool Feature
|
o  changeset:   0:792db6cfc262
   user:        Alice
   date:        Sun May 20 13:08:39 2012 +0400
   summary:     Initial commit. 
```

在尝试再推一次之后，Bob 被要求合并。**Bob 不想进行合并，因为他在 New Cool Feature 上的工作结果还没有为合并做好准备。**

```
C:\TestHg\Bob>hg push -B NewCoolFeature
pushing to C:\TestHg\Alice
searching for changes
abort: push creates new remote head 38506e28a438!
(did you forget to merge? use push -f to force) 
```

# 示例相关问题。

**Bob 应该怎么做才能将他的更改推送到 Alice 的 repo，就好像他的更改在一个单独的分支中一样？**

# 更新

**UPD1：在现实生活中，Alice 的 repo 被用作开发团队所有成员的中央同步点。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T11:41:58.533

他应该：

*   不推。为什么他要在别人的机器上完成他未完成的更改？
*   强迫它。有人问他是否忘记合并。他没有。他想要一个新的头脑，所以强迫它。

信息就在那里，因为通常很容易在没有意识到的情况下创建一个新的头部。然而有时它正是你想要的，所以有覆盖开关。

# c# - 代码分析期间的 LinkDemand 警告。错误 CA2122

> ID：10672640
> 
> 赞同：2
> 
> 时间：2012-05-20T10:26:15.650
> 
> 标签：c#, security, code-analysis

我刚刚对我正在处理的一个项目进行了代码分析，并且收到了这条消息的警报。

> 警告 17 CA2122：Microsoft.Security：“Quantizer.Quantize(Image)”调用具有 LinkDemand 的“Bitmap.LockBits(Rectangle, ImageLockMode, PixelFormat)”。通过进行此调用，“Bitmap.LockBits(Rectangle, ImageLockMode, PixelFormat)”会间接暴露给用户代码。查看以下可能公开绕过安全保护方法的调用堆栈：
> ->'Quantizer.Quantize(Image)' ->'Quantizer.Quantize(Image)' ->'ImageFactory.SaveFileAndReset(string)' ->'ImageFactory.保存（字符串）'

```
 private void SaveFileAndReset(string path)
    {
        // Fix the colour palette of gif images.
        if (this.imageFormat == ImageFormat.Gif)
        {
            OctreeQuantizer quantizer = new OctreeQuantizer(255, 8);
            this.Image = quantizer.Quantize(this.Image);
        }

        /// etc.... 
```

我可以在 MSDN 上找到的信息非常简短，我无法从中提取任何特别有意义的内容，我在网上找到的大多数答案只是建议用标志打开警告显然这是我不想做的事情确保我这样做是安全的。

有人可以解释一下这实际上意味着什么，以及我将如何解决触发警告的任何安全问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T12:29:06.570

看起来您可能在规则中遇到了误报，这似乎没有正确考虑 .NET 4.0 下的默认安全透明度设置。为避免此问题，您可以通过将以下两个程序集级属性添加到包含 ImageFactory 和 OctreeQuantizer 的程序集来简单地使默认透明度显式：

```
[assembly: SecurityCritical]
[assembly: SecurityRules(SecurityRuleSet.Level2)] 
```

由于这些与 CLR 4.0 默认值匹配，因此添加属性不会影响代码的运行时行为。但是，属性的​​存在将允许 CA2122 规则识别它要检测的问题实际上并不存在于您的代码中。

如果您有兴趣了解有关透明度模型和安全规则级别的更多信息，请参阅[http://blogs.msdn.com/b/shawnfa/archive/2009/11/03/transparency-101-basic-transparency-rules。 aspx](http://blogs.msdn.com/b/shawnfa/archive/2009/11/03/transparency-101-basic-transparency-rules.aspx)、[http://blogs.msdn.com/b/shawnfa/archive/2009/11/09/transparency-as-enforcement-in-clr-v4.aspx](http://blogs.msdn.com/b/shawnfa/archive/2009/11/09/transparency-as-enforcement-in-clr-v4.aspx)和[http://blogs.msdn.com/b /shawnfa/archive/2009/11/12/differences-between-the-security-rule-sets.aspx](http://blogs.msdn.com/b/shawnfa/archive/2009/11/12/differences-between-the-security-rule-sets.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T10:56:43.153

为避免这种情况，请确保使用而不是从另一个类调用它`fxCop-error`来标记包含`Bitmap.LockBits(..)`调用及其所有上游调用者的方法的范围。`private``internal``public`

换句话说，确保永远不会发生来自程序集外部的调用。

# php - 反序列化或数组切片？

> ID：10672644
> 
> 赞同：0
> 
> 时间：2012-05-20T10:27:04.167
> 
> 标签：php, serialization, slice

从我的数据库中的这个条目中获取每个数据块的正确方法是什么？

我正在为 wordpress 定制一个名为 custom contact forms 的插件，基本上对于收到的每封电子邮件，都会在数据库中创建一个新条目，格式如下：

`s:8:"enq_name";s:3:"ICE";s:9:"enq_email";s:23:"xvxvxv@hotmail.com";s:9:"enq_phone";s:10:"9191919191";s:11:"enq_message";s:74:"bla bla bla bla and more bla bla bla";s:10:"enq_footer";s:288:"This message has been set to you by my";`

如何获取单个值，例如消息`enq_message`

如果问题标题中提到的一种或两种方法有误，我深表歉意，我不知道如何做到这一点:(

提前致谢

**编辑：** 感谢fulhack，我现在有了这个......

```
$query = "SELECT * FROM `$table_name` WHERE `data_formid` = $ff ORDER BY `$table_name`.`id` ASC LIMIT 0, 5";     
$result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
    echo $myDate = date( 'd/M/Y', $row['data_time'] );
    $string = $row['data_value'];

    $serialized = $string;
    $unserialized = unserialize($serialized);
    $theValue = $unserialized['enq_email'];

    echo $theValue;
    } 
```

但这仅与“e”或更精确的“eeeee”相呼应，因为数据库中有条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:31:14.590

尝试使用 unserialize() （[http://www.php.net/manual/en/function.unserialize.php](http://www.php.net/manual/en/function.unserialize.php)），然后使用密钥（`enq_message`在您的情况下）检索您正在寻找的值。

编辑：我无权访问 PHP 安装，但我认为这可行：

```
$serialized = serialize(array("key" => "value")); // This is the data you supplied
$unserialized = unserialize($serialized);
$theValue = $unserialized["key"]; 
```

不过，您可能应该添加一些错误检查。

# c++ - OpenSSL 错误“断言失败”

> ID：10672645
> 
> 赞同：1
> 
> 时间：2012-05-20T10:27:22.663
> 
> 标签：c++, encryption, openssl

我有一个问题，当我使用[http://slproweb.com/products/Win32OpenSSL.html](http://slproweb.com/products/Win32OpenSSL.html)时，我尝试初始化加密，但总是捕获错误，例如

> “OpenSSL 断言失败，evp_enc.c(282)”

有人可以帮我解决这个问题吗？

**我的代码：**

```
bool do_encrypt(const char *in, unsigned char *out, int *outlen, unsigned char *key, unsigned char *iv)
{
  int buflen, tmplen;

  EVP_CIPHER_CTX ctx;
    EVP_CIPHER_CTX_init(&ctx);
    EVP_EncryptInit_ex(&ctx, EVP_rc4(), NULL, key, iv);

  if(!EVP_EncryptUpdate(&ctx, out, &buflen, (unsigned char*)in, strlen(in))) // error here
    {
        return false;
  }

  if(!EVP_EncryptFinal_ex(&ctx, out + buflen, &tmplen))
    {
        return false;
  }

  buflen += tmplen;
  *outlen = buflen;
    EVP_CIPHER_CTX_cleanup(&ctx);

  return true;
} 
```

我`key`用于测试 {0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15}，`iv`为 NULL。

上面使用这个函数的代码：

```
int WINAPI OwnSend(SOCKET s, const char FAR *buff, int len, int flags )
{
    if(s == ServerSocket)
    {
        if(len > 0)
        {
            int outlen;
            unsigned char EncryptBuffer[5500];
            do_encrypt(buff, EncryptBuffer, &outlen, KeyTest, NULL);
            buff = (const char *) EncryptBuffer;
            return pTrampolineSend(s, buff, outlen, flags);
        }
    }
    return pTrampolineSend(s, buff, len, flags);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:35:03.110

唯一的断言`EVP_EncryptUpdate`是断言缓冲区长度小于或等于加密算法的块大小。

不要调用`strlen(in)`输入的大小，而是尝试循环`EVP_EncryptUpdate`，每次通过时，请确保限制输入大小：

```
int in_size_limit = EVP_CIPHER_CTX_block_size(&ctx); 
```

循环时，请确保将第二个和第四个参数的偏移量增加您已经加密的字节数：

```
if ( EVP_EncryptUpdate(&ctx,
                       out+encrypted_bytes,
                       &bytes_encrypted_this_call,
                       in+encrypted_bytes,
                       in_size_limit) != 1)
{
    /* error */
}
else
{
    encrypted_bytes += bytes_encrypted_this_call;
} 
```

# android - Android PayPal 应用内集成，用于升级到高级版

> ID：10672647
> 
> 赞同：0
> 
> 时间：2012-05-20T10:27:34.493
> 
> 标签：android, paypal

我在我的应用程序中使用广告，并且我为用户提供了一个选项，可以通过 PayPal android api 升级无广告应用程序。

我可以在我的应用程序中成功集成 PayPal api 以进行结帐，但不知道如何告诉我的应用程序该用户已经/现在升级。

我希望用户即使在重新安装应用程序后也能获得无广告应用程序。

我是否需要使用自己的服务器来跟踪所有升级或任何其他可用的最佳实践。

请帮帮我。非常感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:33:20.203

这很可能违反 TOS。据我所知，您只能通过其他方式接受“捐赠”，甚至不清楚。我有一个通过贝宝接受捐赠的应用程序，然后我向那些“捐赠者”发送了电子邮件，并附有解锁码以删除广告。这似乎没有违反任何服务条款，但我不会写任何**明确**表示谷歌沃勒之外的付款将为他们提供免费版本的内容。

> “谷歌一直在向应用程序和手机游戏开发商施压，要求他们使用其更昂贵的内部支付服务——谷歌钱包。现在，谷歌在最近几个月警告了几位开发商，如果他们继续使用其他支付方式——比如 PayPal、Zong和 Boku——他们的应用程序**将从 Google Play 中删除**。此举被视为通过使用他们自己的系统来降低 Google 成本的一种方式。

[资源](http://www.reuters.com/article/2012/03/08/us-google-idUSBRE8271CJ20120308)

# mongodb - 在博客中显示帖子功能

> ID：10672649
> 
> 赞同：0
> 
> 时间：2012-05-20T10:27:38.927
> 
> 标签：mongodb, blogs

我正在制作一个博客，其中主页显示所有博客帖子，每个帖子都链接到帖子的单独页面。我使用 sinatra 作为框架，使用 mongo 作为后端。我生成的网址是这样的：

`http://blogera.io/prakhar/post/4fb8c0562767621088000002/hello-world`

长数字是存储在 mongo 中的帖子的 ObjectID。到达网址后，我将提取对象 ID、查询数据库并显示帖子。有一个更好的方法吗？网址看起来不太好，对 SEO 也可能不利？

任何想法/建议都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:31:42.027

我会使用数字作为标识符，而不是 MongoDB 文档的内部 _id 值。这将使您的 URL 更清晰，例如：

```
http://blogera.io/prakhar/post/1/hello-world 
```

在这种情况下，您将在 MongoDB 中查询具有该数字标识符的博客文章。

如果您决定将来更改数据库，这也更好。您很少希望更改 URL 的结构。如果这样做，您的 URL 中将包含这些长标识符，这些标识符只是源于您过去使用 MongoDB。那是没有意义的。

# python - 我的密码（python 脚本）有多安全？

> ID：10672656
> 
> 赞同：0
> 
> 时间：2012-05-20T10:28:59.417
> 
> 标签：python, encryption

我想出了一个使用 Python 的加密例程，我希望任何人都可以看看。我正在寻找一些信息；以前是否使用过这种方法/变体，如果使用过，它的名称是什么，安全性如何？

这个想法是通过使用双方都知道的两个密码加密的互联网传输数据。

它使用 SHA1 散列对密码进行编码，然后使用散列中的字符创建偏移查找表。将偏移值添加到纯字符以生成加密字符。它使用一对一的方法，而不是压缩或添加数据。

如果使用单词“burger”和“meat”生成了两个 SHA1 哈希，则生成的字符串“Hello StackOverflow”为“wPjOew6AdoNOYgjf7y”。

这是整个代码，对于超长的字典数组感到抱歉：S

代码运行使用：Python 2.7.2（默认，2011 年 6 月 12 日，15:08:59）[MSC v.1500 32 位（英特尔）] 在 win32 上

```
import sys

# burger
sha1_pass1 = '7a86b15480e0a870f0b07a4d23a54ef8f9acac44'

# meat
sha1_pass2 = 'bb40f75a9c6038e0da200fc5c3a6f371c1592c66'

# Characters available to encrypt (can be extended)
valid_chars = '0123456789 abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.,!?' * 2

offset = {'00':0,
    '01':1,
    '02':2,
    '03':3,
    '04':4,
    '05':5,
    '06':6,
    '07':7,
    '08':8,
    '09':9,
    '0a':10,
    '0b':11,
    '0c':12,
    '0d':13,
    '0e':14,
    '0f':15,
    '10':16,
    '11':17,
    '12':18,
    '13':19,
    '14':20,
    '15':21,
    '16':22,
    '17':23,
    '18':24,
    '19':25,
    '1a':26,
    '1b':27,
    '1c':28,
    '1d':29,
    '1e':30,
    '1f':31,
    '20':32,
    '21':33,
    '22':34,
    '23':35,
    '24':36,
    '25':37,
    '26':38,
    '27':39,
    '28':40,
    '29':41,
    '2a':42,
    '2b':43,
    '2c':44,
    '2d':45,
    '2e':46,
    '2f':47,
    '30':48,
    '31':49,
    '32':50,
    '33':51,
    '34':52,
    '35':53,
    '36':54,
    '37':55,
    '38':56,
    '39':57,
    '3a':58,
    '3b':59,
    '3c':60,
    '3d':61,
    '3e':62,
    '3f':63,
    '40':64,
    '41':65,
    '42':66,
    '43':0,
    '44':1,
    '45':2,
    '46':3,
    '47':4,
    '48':5,
    '49':6,
    '4a':7,
    '4b':8,
    '4c':9,
    '4d':10,
    '4e':11,
    '4f':12,
    '50':13,
    '51':14,
    '52':15,
    '53':16,
    '54':17,
    '55':18,
    '56':19,
    '57':20,
    '58':21,
    '59':22,
    '5a':23,
    '5b':24,
    '5c':25,
    '5d':26,
    '5e':27,
    '5f':28,
    '60':29,
    '61':30,
    '62':31,
    '63':32,
    '64':33,
    '65':34,
    '66':35,
    '67':36,
    '68':37,
    '69':38,
    '6a':39,
    '6b':40,
    '6c':41,
    '6d':42,
    '6e':43,
    '6f':44,
    '70':45,
    '71':46,    
    '72':47,
    '73':48,
    '74':49,
    '75':50,
    '76':51,
    '77':52,
    '78':53,
    '79':54,
    '7a':55,
    '7b':56,
    '7c':57,
    '7d':58,
    '7e':59,
    '7f':60,
    '80':61,
    '81':62,
    '82':63,
    '83':64,
    '84':65,
    '85':66,
    '86':0,
    '87':1,
    '88':2,
    '89':3,
    '8a':4,
    '8b':5,
    '8c':6,
    '8d':7,
    '8e':8,
    '8f':9,
    '90':10,
    '91':11,
    '92':12,
    '93':13,
    '94':14,
    '95':15,
    '96':16,
    '97':17,
    '98':18,
    '99':19,
    '9a':20,
    '9b':21,
    '9c':22,
    '9d':23,
    '9e':24,
    '9f':25,
    'a0':26,
    'a1':27,
    'a2':28,
    'a3':29,
    'a4':30,
    'a5':31,
    'a6':32,
    'a7':33,
    'a8':34,
    'a9':35,
    'aa':36,
    'ab':37,
    'ac':38,
    'ad':39,
    'ae':40,
    'af':41,
    'b0':42,
    'b1':43,
    'b2':44,
    'b3':45,
    'b4':46,
    'b5':47,
    'b6':48,
    'b7':49,
    'b8':50,
    'b9':51,
    'ba':52,
    'bb':53,
    'bc':54,
    'bd':55,
    'be':56,
    'bf':57,
    'c0':58,
    'c1':59,
    'c2':60,
    'c3':61,
    'c4':62,
    'c5':63,
    'c6':64,
    'c7':65,
    'c8':66,
    'c9':0,
    'ca':1,
    'cb':2,
    'cc':3,
    'cd':4,
    'ce':5,
    'cf':6,
    'd0':7,
    'd1':8,
    'd2':9,
    'd3':10,
    'd4':11,
    'd5':12,
    'd6':13,
    'd7':14,
    'd8':15,
    'd9':16,
    'da':17,
    'db':18,
    'dc':19,
    'dd':20,
    'de':21,
    'df':22,
    'e0':23,
    'e1':24,
    'e2':25,
    'e3':26,
    'e4':27,
    'e5':28,
    'e6':29,
    'e7':30,
    'e8':31,
    'e9':32,
    'ea':33,
    'eb':34,
    'ec':35,
    'ed':36,
    'ee':37,
    'ef':38,
    'f0':39,
    'f1':40,
    'f2':41,
    'f3':42,
    'f4':43,
    'f5':44,
    'f6':45,
    'f7':46,
    'f8':47,
    'f9':48,
    'fa':49,
    'fb':50,
    'fc':51,
    'fd':52,
    'fe':53,
    'ff':54,}

cipher = []

# create the lookup table in cipher
for n in range(40):
    sp1 = sha1_pass1[n]
    sp2 = sha1_pass2[n]

    cipher.append(offset[sp1 + sp2])

# get a user defined string
ask = raw_input('\n\n>>> ')

print ('\n') # make some space

# exit if return
if not ask:
    sys.exit(1)

cipher_pos = 0    

# progress through the user string
for n in range(len(ask)):
    c = ask[n] # character n 

    # get the position of character in string
    p = valid_chars.find(c) 
    if p == -1: sys.exit(1) # if not found then end

    p += cipher[cipher_pos] # add the offset created by the passwords
    cipher_pos += 1
    if cipher_pos == 40: cipher_pos = 0 # reset lookup table position so it repeats

    # get new character
    x = valid_chars[p] 

    sys.stdout.write(x)

sys.stdout.flush()

print('\n') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T10:56:13.043

您的代码是密码长度为 40 个字符的[Vigenère 密码。](http://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher)所以你可以简单地在链接的维基百科页面上查找它的弱点。

最明显的攻击是：

> **频率分析**
> 
> 一旦知道密钥的长度，就可以将密文改写成那么多列，每列对应于密钥的一个字母。每列由已由单个凯撒密码加密的明文组成；Caesar key (shift) 只是用于该列的 Vigenère 键的字母。使用类似于破解凯撒密码的方法，可以发现密文中的字母。

你有点落伍了，你的计划早在 1553 年就发明了。

* * *

您的代码的另一个问题是它是一个没有初始化向量的[同步流密码。](http://en.wikipedia.org/wiki/Stream_cipher#Synchronous_stream_ciphers)这些密码具有普遍的弱点，即多次使用一个密钥允许攻击者减去两个密文，从而消除密钥。其结果是纯文本的差异。在实践中，这通常足以获得两个明文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T10:39:11.800

您的加密当然不安全。

我认为这是最大的问题：

```
if cipher_pos == 40: cipher_pos = 0 # reset lookup table position so it repeats 
```

这将导致偏移模式每 40 个字符重复一次。对于较长的文本部分，“the”之类的词可能会经常出现并转换为相同的密文。分析重复部分的密文并猜测原始单词将允许您猜测偏移表的部分内容。对文本的不同部分重复此技术最终将为您提供整个偏移表，从而使您能够破译整个消息。

以下计划文本：

```
the bat the bed the book the boy the bun the can the cake the cap the car the cat the cow the cub the cup the dad the the doy the dog the doll the dust the fan the feet the girl the gun the hall 
```

变成这个密文：

```
iScC2xLgwtH Eg6 erW U?xwRdRxlB4tYEMeBexq
?0fH0zsucFKeCe3k0j7hXOlm3Y?AqzW6bkYhGcfd
iKrK5wuvzlWhHb5u,j7hXOlG3Y?AqzX6!kYhGcwk
4KbRowLohlGoJblh0jVo0.iFZ?JwGS95dsJ Hdqc
iScC6BwAcFKeCiar7j7hXOpG1Y?Aqz,66w

```

注意当字符排列为每行 40 个字符时密文中的模式。

# python - django-nginx-gunicorn - 不工作

> ID：10672658
> 
> 赞同：4
> 
> 时间：2012-05-20T10:29:12.427
> 
> 标签：python, django, nginx, gunicorn

[我正在尝试通过这些教程http://senko.net/en/django-nginx-gunicorn/](http://senko.net/en/django-nginx-gunicorn/)和[http://honza.ca/2011/05/deploying-django-with-nginx](http://honza.ca/2011/05/deploying-django-with-nginx-and-gunicorn)使用 nginx 和 gunicorn 设置 django [-and-gunicorn](http://honza.ca/2011/05/deploying-django-with-nginx-and-gunicorn)

设置：

```
virtualenv --no-site-packages qlimp
cd qlimp
source bin/activate
pip install gunicorn django
django-admin.py startproject qlimp
cd qlimp
python manage.py runserver 0.0.0.0:8001 
```

Gunicorn 设置与此处相同[http://senko.net/en/django-nginx-gunicorn/](http://senko.net/en/django-nginx-gunicorn/)

所做的更改（run.sh）：

```
LOGFILE=/var/log/gunicorn/qlimp.log
USER=nirmal
GROUP=nirmal
cd /home/nirmal/qlimp/qlimp 
```

Upstart 也与上面链接中的教程相同

所做的更改：

```
exec /home/nirmal/qlimp/qlimp/run.sh 
```

Nginx 设置：

```
server {
    listen 80;
    server_name qlimp.com;

    access_log /home/nirmal/qlimp/log/access.log;
    error_log /home/nirmal/qlimp/log/error.log;

    location /static {
         root /home/nirmal/qlimp/qlimp;
    }

    location / {
        proxy_pass http://127.0.0.1:8888;
    } 
```

}

然后我重新启动 nginx 并运行 gunicorn 服务器：

```
sudo /etc/init.d/nginx restart
(qlimp) cd qlimp/qlimp
(qlimp) gunicorn_django -D -c run.sh 
```

当我运行 gunicorn 服务器时，我收到此错误：

```
Failed to read config file: run.sh
Traceback (most recent call last):
File "/home/nirmal/qlimp/local/lib/python2.7/site-packages/gunicorn/app/base.py", line  65, in load_config
execfile(opts.config, cfg, cfg)
 File "run.sh", line 3
   LOGFILE=/var/log/gunicorn/qlimp.log
        ^
SyntaxError: invalid syntax 
```

有人可以指导我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:37:38.257

尝试 /etc/gunicorn.d 而不是你自己的 sh 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:53:51.857

我在 EC2 上使用 Gunicorn 和 Nginx 配置 Django 应用程序

纳米 /etc/init/site1.conf

```
description "site1 web server"
start on runlevel [2345]
stop on runlevel [06]
respawn
respawn limit 10 5
exec /home/scripts/gunicorn_runserver.sh 
```

在 gunicorn_runserver.sh

```
#!/bin/bash
  set -e
  LOGFILE=/var/log/nginx/site1.log
  NUM_WORKERS=10
  # user/group to run as
  USER=www-data
  GROUP=adm
  cd /home/projects/project_name/
  #  source ../../bin/activate
  exec gunicorn_django -w $NUM_WORKERS \
    --user=$USER --group=$GROUP --log-level=error \
    --log-file=$LOGFILE 2>>$LOGFILE 
```

Nginx 配置文件

```
upstream app_server_hana {
server localhost:8000 fail_timeout=0;
}

location  / {
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header Host $http_host;
  proxy_redirect off;

  if (!-f $request_filename) {
          proxy_pass http://app_server_site1;
          break;
  }
} 
```

最后

```
/etc/init.d/nginx restart
service site1 start 
```

# zend-framework - Zend Paginate - 在结果中查找特定记录

> ID：10672659
> 
> 赞同：0
> 
> 时间：2012-05-20T10:29:19.953
> 
> 标签：zend-framework

我明白这可能是不可能的，但有没有办法让 Zend Paginate 转到特定项目（记录）？

我想要的结果将允许我在结果列表中查找特定记录，并显示适当的页面（在所有可用页面中）结合名称锚标记以显示特定记录。

澄清一下：如果我有 Zend_Db_Table_Rowset_Abstract 的结果，我会以与 $rowset->seek(8) 类似的方式使用 seek() 方法；虽然我不相信 DbSelect 适配器返回的结果是 SeekableIterator？

我的 Mapper 中的代码（使用表数据网关模式）：

```
public function paginate($where = array(), $order = null)
{

    $select = $this->getDbTable()->select()->from($this->getTableName(), $this->getTableFields());

    foreach ($where as $key => $value) {
            $select->where($key, $value);
    }

    $select->order($order);

    $adapter = new Zend_Paginator_Adapter_DbSelect($select);
    $paginator = new Zend_Paginator($adapter);

    return $paginator;
} 
```

在我的控制器中：

```
 $cache_id = sha1('list');
    $mapper = new Application_Model_Galleries_Mapper();

    if(!($data = Zend_Registry::get('cache')->load($cache_id))) {

        $data = $mapper->paginate(array(), $sort);
        Zend_Registry::get('cache')->save($data, $cache_id, array('list'), 7200);
    }

    $data->setCurrentPageNumber($this->_getParam('page'));
    $data->setItemCountPerPage(30);

    $this->view->paginator = $data; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:13:46.643

要返回`Zend_Paginator`带有可搜索迭代器（Zend_Db_Table_Rowset）的 a，请使用它，`Zend_Paginator_Adapter_DbTableSelect()`因为它返回一个行集对象，而不是`Zend_Paginator_Adaoter_DbSelect()`返回一个数组（）。

[Zend_Paginator](http://framework.zend.com/manual/en/zend.paginator.usage.html)

# python - Python：如何更改此代码，以便每 60 秒可以执行一次 doWork()？

> ID：10672663
> 
> 赞同：1
> 
> 时间：2012-05-20T10:29:44.960
> 
> 标签：python, twisted

如何更改此代码，以便每 60 秒调用一次 doWork()。目前，它正在循环播放，并在 60 秒后停止。想做完全相反的事情。

```
from twisted.internet import task
from twisted.internet import reactor
import twapi
timeout = 200.0 # Sixty seconds

def doWork():
    #do work here
    twapi.main('1')
    pass

l = task.LoopingCall(doWork)
l.start(timeout) # call every sixty seconds

reactor.run() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T12:13:51.400

来自[官方 Twisted 文档](http://twistedmatrix.com/documents/current/core/howto/time.html)

```
from twisted.internet import task
from twisted.internet import reactor

def runEverySecond():
    print "a second has passed"

l = task.LoopingCall(runEverySecond)
l.start(1.0) # call every second

reactor.run() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:30:12.893

我修改了您的脚本以每分钟输出一次当前时间：

```
#!/usr/bin/python
from twisted.internet import task
from twisted.internet import reactor
from datetime import datetime as time
timeout = 60.0 # Sixty seconds

def doWork():
    #do work here
    print time.now().isoformat()

l = task.LoopingCall(doWork)
l.start(timeout) # call every sixty seconds

reactor.run() 
```

它的工作原理是这样的：

```
2012-05-20T19:24:44.388682
2012-05-20T19:25:44.389788
2012-05-20T19:26:44.389424 
```

我能看到的片段中的唯一问题是，您要求反应器每 200 秒调用一次您的函数，而不是 60 秒。

# c# - 打印机假脱机程序的打印文档和附加事件

> ID：10672664
> 
> 赞同：1
> 
> 时间：2012-05-20T10:29:49.567
> 
> 标签：c#, system.printing

我想打印一个文档（在默认打印机中）并能够跟踪它的打印作业，因此我将能够查看该作业是否已发送到假脱机程序，并且它实际上已打印并且由于某种原因没有被取消。我想捕捉打印作业事件并遵循每一步，直到它成功（或没有 - 如果是这样的话是什么原因）打印。

我已经为此寻找解决方案，但我没有得到任何为我工作的东西..实现这个的最佳方法是什么？有一个很好的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:12:32.877

您已经通过标记此 System.Printing 涵盖了您需要的大部分内容 - 假设您使用 .net 运行时的 3.0 版或更高版本，那么 System.Printing 命名空间[在 MSDN 上有很好的记录。](http://msdn.microsoft.com/en-us/library/system.printing.aspx)

# java - 无法将 base64 编码的字符串映射到 JAXRS 中的 Restful 实现

> ID：10672668
> 
> 赞同：1
> 
> 时间：2012-05-20T10:30:25.527
> 
> 标签：java, web-services, rest, base64, jax-rs

我必须从客户端（javascript）向服务器端 Jaxrs 实现发送一个 img。

客户端：

```
function sendRequest()
{
   var url = '<restservicepath>/uploadImage';
  $("body").append('<canvas id="theCanvas" style="display:none" width="300px"          height="300px"></canvas>');
  var canvas = document.getElementById('theCanvas');  
  var context = canvas.getContext('2d');
  var imageObj = new Image();
  imageObj.src = "myjpg.jpeg";  
  context.drawImage(imageObj, 0, 0, 300, 300);
  $.post(url, {'image':canvas.toDataURL("image/jpeg"), 'url':'caption'},     function(file){               
//Callback code
alert("done");
 });
} 
```

在 JAXRS 的服务器端，我正在使用：

```
@POST
@Path("/uploadImage")
@Consumes("text/plain")
public Response upload(String image); 
```

我能够将请求发送到 web 服务，但无法映射，即，我无法将 base64 编码字符串映射到服务器端字符串。我怎样才能做到这一点 ？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:26:12.413

这行得通吗？

```
@POST
@Path("/uploadImage")
@Consumes(MediaType.WILDCARD)
public Response upload(String image) {
    System.out.println(image);
    return Response.noContent().build();
} 
```

# ios - 在 iOS 上，当我们从上下文创建层并获取层的上下文后，这些上下文是如何相互关联的？

> ID：10672691
> 
> 赞同：3
> 
> 时间：2012-05-20T10:34:14.557
> 
> 标签：ios, core-graphics, calayer, quartz-2d, graphicscontext

我们可以从当前图形上下文创建一个图层，然后获取图层的上下文：

```
CGContextRef context = UIGraphicsGetCurrentContext();

CGLayerRef layer = CGLayerCreateWithContext(context, 
                                            CGSizeMake(self.frame.size.width,
                                                self.frame.size.height), NULL);

CGContextRef contextOfLayer = CGLayerGetContext(layer); 
```

所以我们现在有 2 个上下文：`context`和`contextOfLayer`. 这两种情况如何相互关联？`contextOfLayer`实际上是层上下文指针数组的`context`一部分吗？`context`如果我使用 打印出它们的地址`NSLog(@"%p", ...)`，它们有不同的地址，所以它们不是同一个对象。而且我认为`contextOfLayer`不会影响上下文堆栈，所以它只是一个独立的上下文本身就“存在于那里”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T18:14:07.457

如果您了解`CGLayer`. `CGLayer`当您将相同的内容重复绘制到特定类型的上下文中时，这意味着一种优化。

（例如：具有特定格式的位图上下文 - 例如 32 位 RGBA - 或 PDF 上下文等）

创建 时`CGLayer`，将要绘制的上下文传递给它`CGLayer`。这可以让`CGLayer`优化自身针对这种上下文进行优化。

稍后，如果您将其绘制`CGLayer`到该上下文中，或者绘制到具有相同格式的不同上下文中，则绘制速度会更快。

如果您将 a 绘制`CGLayer`到具有不同格式的上下文中，绘图仍然可以工作，并且您不会收到错误。但是，如果您直接进入该上下文，它可能不会比它更快。

[CGLayerCreateWithContext](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGLayer/Reference/reference.html#//apple_ref/doc/uid/TP40001406-CH1g-SW1)的文档说：

> *语境*
> 
> 要相对于创建图层的图形上下文。该层使用此图形上下文作为初始化的参考。

这意味着该层将给定`context`的内容作为参考。这并不一定意味着`context`存储在 中`CGLayer`，或永久引用。可能是这样，但你不能说——这是一个内部实现细节。

[CGLayerGetContext](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGLayer/Reference/reference.html#//apple_ref/doc/uid/TP40001406-CH1g-DontLinkElementID_11)的文档说

> 返回的上下文是图层本身的上下文，而不是您在创建图层时指定的上下文。

所以你应该期待`context != contextOfLayer`。

同样，API 没有指定任何关于这些上下文如何相互关联的内容——它们可能在内部相互引用，也可能不相互引用。作为 API 的用户，我们不应该假设任何事情。

具体回答您的问题：

> contextOfLayer 实际上是上下文的一部分，并且上下文具有层上下文指针数组吗？

我们不知道，也找不到。作为 API 的用户，我们不应该编写任何假定一种或另一种方式的代码。

> 我认为 contextOfLayer 不会影响上下文堆栈，所以它只是一个独立的上下文，只是一种“存在于那里”本身？

是的，它是一个独立的上下文。UIKit 中的“上下文栈”是一个更高层次的概念。`CGLayer`在 CoreGraphics 中是一个较低级别的 API，它对`UIKit`.

# jquery - Rails 3.2 - jQuery-UI 图像在生产模式下不显示

> ID：10672693
> 
> 赞同：0
> 
> 时间：2012-05-20T10:34:31.390
> 
> 标签：jquery, image, jquery-ui, ruby-on-rails-3.2

我的`applications.css`样子：

```
 *= require_self
 *= require twitter/bootstrap
 *= require jquery_ui/jquery-ui-1.8.17.custom
 *= require_tree . 
```

并且 jQuery-UI 图像被放置在`vendor/assets/stylesheets/jquery_ui/images`.

此设置在我的本地主机（开发模式）上运行良好，但是当我将我的应用程序推送到 heroku 时，不显示来自**jQuery-UI**的图像，并且出现类似错误

> [http://my-url.com/assets/images/ui-bg_highlight-soft_100_eeeeee_1x100.png](http://my-url.com/assets/images/ui-bg_highlight-soft_100_eeeeee_1x100.png)

还有什么，我必须允许从这个文件夹中正确加载带有图像的图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:20:41.097

尝试将图像放在图像目录中。但也许您应该尝试使用已经为您执行此操作的[jquery-ui-rails gem。](https://rubygems.org/gems/jquery-ui-rails)

# javascript - javascript错误表单验证：提交时清除所有输入字段

> ID：10672695
> 
> 赞同：0
> 
> 时间：2012-05-20T10:34:37.940
> 
> 标签：javascript

我正在使用表格在我的网站上注册用户，并且我有验证码安全性。一切都运行良好，但我面临的唯一问题是，如果我输入了错误的验证码或以某种方式刷新页面，用户输入的所有数据都会被清除。

我希望实现的是，即使输入的验证码错误并且提交了表单，表单也应该具有完整的用户填写的所有字段，不包括验证码字段。

如何才能做到这一点？我的表单是 html 并通过使用 javascript 即时验证它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:39:58.670

一些浏览器可能足够聪明，可以做到这一点，但如果你想确保，在页面重新加载/刷新（包括表单提交）期间保留数据的唯一方法是将其保留在服务器上，和/或将其放入曲奇饼。

但是，`submit`您可以不使用按钮，而是使用带有功能的普通按钮，该`onclick()`功能首先验证数据，然后在适当的情况下手动提交表单。

```
document.forms["form_name"].submit() 
```

您还必须处理表单文本输入的关键事件，以防止**输入**提交。但是，这最终仍然容易得多，因为它可以防止页面更改并且不需要服务器端存储或 cookie。

# php - 包含不正确结果的电子邮件，从 zencart 1.3.8 中的 php 邮件程序发送

> ID：10672696
> 
> 赞同：0
> 
> 时间：2012-05-20T10:34:59.487
> 
> 标签：php, email, encoding, character-encoding, zen-cart

除了知道我遇到问题之外，我对编码知之甚少，我正在使用 zercant 1.3.8 中的恢复购物车销售模块向未完成购买而放弃购物车的人发送自动电子邮件，问题是我的语言使用了诸如“cão, macarrão, há, número, contúdo”之类的词，而且它们都写错了，

发送的电子邮件中的示例：

mas que nÃ£o 完成交易。

我该如何解决这个问题？

发送的电子邮件标题是这样的：

```
To: [edited for stackoverflow]
Subject: [edited for stackoverflow]
X-PHP-Script: [edited for stackoverflow]
Date: Sun, 20 May 2012 04:44:36 -0500
Return-Path: [edited for stackoverflow]
From: [edited for stackoverflow]
Reply-to: [edited for stackoverflow]
Message-ID: [edited for stackoverflow]
X-Priority: 3
X-Mailer: PHPMailer [version 1.73] via Zen Cart
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset="iso-8859-1" 
```

你能帮我把邮箱弄对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T02:57:27.753

你有几个问题：

*   您正在使用存在已知安全问题的过时版本的 Zen Cart。如果您的网站被黑客入侵，那么由于恶意入侵者对您的网站进行的更改，所提供的任何正常建议都可能不起作用。你真的应该升级到现代版本。您的版本于 2007 年发布。

*   正如 Damien 所建议的，您很可能拥有混合字符集。您的数据库和语言文件以及数据库连接都需要使用相同的字符集配置。在 v1.3.9h 中添加了对指定字符集的支持，并在 v1.5.0 中进一步改进。您正在使用 v1.3.8，它需要特定的代码更改以添加对备用字符集的支持，这再次证实了您需要升级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:18:59.800

电子邮件标题很好（ã 是 ISO-8859-1 的一部分） - 所以它在 ZenCart 方面。我对 ZenCart 了解不多，但也许您的网站是 UTF-8 格式的？

PHPMailer默认编码是iso-8859-1，你可以试试改一下：

```
<?php
$phpMailerObj->CharSet = 'UTF-8'; 
```

您还应该尝试不同的电子邮件客户端。为了您自己的利益，请在任何地方使用 UTF-8。

# asp.net - 使用 ASP.NET RSS 显示完整新闻

> ID：10672697
> 
> 赞同：0
> 
> 时间：2012-05-20T10:35:13.573
> 
> 标签：asp.net, rss

我使用以下代码显示 RSS 新闻主题和摘要，它工作正常，但我想在我自己的站点中显示整个新闻，现在我的用户可以点击新闻链接，整个新闻在主站点中可见，但我想要它显示在我的网站上。有可能吗？我可以使用 RSS 在我自己的站点中显示全部内容，还是应该解析主新闻页面并将其显示在我的站点中？我认为解析这个页面非常困难。

我的服务器代码：

```
//Create a WebRequest
        WebRequest rssReq =
        WebRequest.Create("myRSSsite");
        //Create a Proxy
        WebProxy px = new WebProxy("myRSSsite", true);
        //Assign the proxy to the WebRequest
        rssReq.Proxy = px;
        //Set the timeout in Seconds for the WebRequest
        rssReq.Timeout = 5000;
        try
        {
            //Get the WebResponse
            WebResponse rep = rssReq.GetResponse();
            //Read the Response in a XMLTextReader
            XmlTextReader xtr = new XmlTextReader(rep.GetResponseStream());
            //Create a new DataSet
            DataSet ds = new DataSet();
            //Read the Response into the DataSet
            ds.ReadXml(xtr);
            //Bind the Results to the Repeater
            rssRepeater.DataSource = ds.Tables[2];
            rssRepeater.DataBind(); 
```

我也在我的 ASPX 页面上使用转发器来显示 RSS，但我有一个包含新闻标题（链接到主站点）和一个小摘要的列表，仅此而已！有什么方法可以获取整个新闻 HTML 以便将其存储在我的数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:08:49.517

[网站使用Html Agility Pack](http://htmlagilitypack.codeplex.com/)抓取新闻文章：

```
HttpWebRequest oReq = (HttpWebRequest)WebRequest.Create(url);
HttpWebResponse resp = (HttpWebResponse)oReq.GetResponse();

var doc = new HtmlAgilityPack.HtmlDocument();

doc.Load(resp.GetResponseStream());
var element = doc.GetElementbyId("Id-of-the-article-body-element");
string content = element.OuterHtml; 
```

如果文章正文元素没有 ID，则必须使用 XPath 查询来查找它。查看有关 HTML Agility Pack 的本[教程](http://www.4guysfromrolla.com/articles/011211-1.aspx)。

# asp.net-mvc - Telerik MVC 网格、ajax 绑定和 MVC 区域

> ID：10672698
> 
> 赞同：0
> 
> 时间：2012-05-20T10:35:18.003
> 
> 标签：asp.net-mvc, grid, telerik

我更改了我的项目并将我的文件分成多个区域，但现在我的 ajax 绑定不起作用。

```
.DataBinding(dataBinding => dataBinding.Ajax().Select("GridAjax","Products")) 
```

GridAjax 是动作，而 Products 是控制器。

产品控制器在我的区域/用户/控制器中

但我收到了类似的网址请求

```
http://localhost:1056/user/null 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T02:48:12.823

试试这个：

```
dataBinding.Ajax().Select("GridAjax", "Products", new { area = "user" }) 
```

Select() 方法有一些允许指定其他路由选项的重载。

# hadoop - 对 webhdfs 的 http 请求，但服务器的回复为空

> ID：10672700
> 
> 赞同：8
> 
> 时间：2012-05-20T10:35:44.467
> 
> 标签：hadoop

我是hadoop的新手。我启用了 webhdfs 并使用 curl 命令获取主目录。

curl -i "http://172.16.18.50:9000/webhdfs/v1/?op=GETHOMEDIRECTORY"

但获取信息：来自服务器的空回复。这是 conf 文件：

核心站点.xml ----

```
<configuration>
   <property>
      <name>fs.default.name</name>
      <value>hdfs://webHDFS0:9000</value>
   </property>

   <property>
      <name>hadoop.tmp.dir</name>
      <value>/home/eins/hadoop-1.0.2/tmp</value>
   </property>
</configuration> 
```

hdfs-site.xml ----

```
<configuration>
   <property>
      <name>dfs.replication</name>
      <value>2</value>
   </property>
    <property>
        <name>dfs.webhdfs.enabled</name>
        <value>enabled</value>
    </property>
</configuration> 
```

任何人都可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-21T11:35:11.487

您正在尝试连接到 NameNode IPC 套接字（端口 9000），而不是 Web 套接字（默认为 50075）。试试这个：

```
http://172.16.18.50:50075/webhdfs/v1/?op=GETHOMEDIRECTORY 
```

此外，您在 hdfs-site.xml 中的配置需要具有`true`而不是`enabled`其值：

hdfs-site.xml ----

```
<configuration>
   <property>
      <name>dfs.replication</name>
      <value>2</value>
   </property>
    <property>
        <name>dfs.webhdfs.enabled</name>
        <value>true</value>
    </property>
</configuration> 
```

要确认一切正常，请查看您的名称节点的日志，您应该会看到如下内容：

```
2012-05-22 06:23:42,176 INFO org.apache.hadoop.http.HttpServer: dfs.webhdfs.enabled = true
2012-05-22 06:23:42,177 INFO org.apache.hadoop.http.HttpServer: Added filter 'SPNEGO' (class=org.apache.hadoop.hdfs.web.AuthFilter)
2012-05-22 06:23:42,179 INFO org.apache.hadoop.http.HttpServer: addJerseyResourcePackage: packageName=org.apache.hadoop.hdfs.server.namenode.web.resources;org.apache.hadoop.hdfs.web.resources, pathSpec=/webhdfs/v1/* 
```

目前，我假设你说：

```
2012-05-22 06:11:20,676 INFO org.apache.hadoop.http.HttpServer: dfs.webhdfs.enabled = false 
```

# java - 使用 Maven 自动化负载测试的经过尝试和测试的方法

> ID：10672703
> 
> 赞同：1
> 
> 时间：2012-05-20T10:36:24.080
> 
> 标签：java, performance, maven, load-testing

我试图找出自动化负载测试执行和结果记录的最佳方法。我们目前使用 Maven；理想情况下，该解决方案将作为 Maven 项目生命周期的一部分执行，这样人们就不需要花时间在设置测试上。

它应该保存测试的输出（例如，作为可以提交到版本控制中的一些文件），并且应该不比较在尘土飞扬的 x486 和 8 核 Sparc 上运行的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:54:08.807

[JMeter](http://jakarta.apache.org/jmeter)是另一个非常适合自动化的 Apache 项目（您可以从命令行控制大多数事情）；您还可以使用几个插件将其集成到 Maven 中。就个人而言，我认为这是迄今为止满足此类要求的最佳工具。

您仍然需要创建实际的测试来运行并决定使用哪个环境 - 但无论您选择哪种工具，情况总是如此。

看看[这里](http://jmeter.lazerycode.com/)，[这里](http://blogs.atlassian.com/2009/10/automated_performance_testing_using_jmeter_and_maven/)和[这里](http://wiki.apache.org/jmeter/JMeterMavenPlugin)。

# python - Python：优化导入

> ID：10672709
> 
> 赞同：9
> 
> 时间：2012-05-20T10:37:56.193
> 
> 标签：python, import

在代码中加载模块的位置是否重要？还是应该将它们都声明在顶部，因为在加载期间，无论在代码中声明的位置如何，都必须加载外部模块......？

例子：

```
from os import popen

try:
    popen('echo hi')
    doSomethingIllegal;
except:
    import logging                   #Module called only when needed?
    logging.exception("Record to logger) 
```

或者编译器是否以与以下方式相同的方式进行了优化：

```
from os import popen
import logging                      #Module will always loaded regardless

try:
    popen('echo hi')
    doSomethingIllegal;
except:
    logging.exception("Record to logger) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T10:42:35.480

[这](http://wiki.python.org/moin/PythonSpeed/PerformanceTips#Import_Statement_Overhead)表明它可能会有所作为：

“import 语句几乎可以在任何地方执行。*将它们放在函数中以限制它们的可见性和/或减少初始启动时间通常很有用*。虽然 Python 的解释器经过优化，不会多次导入同一个模块，但*重复执行 import 语句可以在某些情况下严重影响性能*。”

这两个OS问题，[local import语句？](https://stackoverflow.com/questions/128478/should-python-import-statements-always-be-at-the-top-of-a-module) 并[始终在模块顶部导入？](https://stackoverflow.com/questions/1699108/local-import-statements-in-python)详细讨论这个问题。

*最后，如果您对您的具体*案例感到好奇，您可以在您的环境中对您的两个备选方案进行分析/基准测试。

我更喜欢将我所有的导入语句放在源文件的顶部，遵循风格约定和保持一致性（这也将使以后的更改更容易，而不必在源文件中寻找分散在各处的导入语句）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T18:26:55.620

一般的经验法则是导入应该在文件的顶部，因为这样可以使代码更容易理解，并且可以更容易地确定模块需要什么，而无需遍历所有代码。

Python 风格指南涵盖了一些关于导入外观的基本指南：http: [//www.python.org/dev/peps/pep-0008/#imports](http://www.python.org/dev/peps/pep-0008/#imports)

但在实践中，有时从特定函数中导入是有意义的。这提出了循环的导入：

```
# Module 1
from module2 import B

class A(object):
    def do_something(self):
        my_b = B()
        ...

# Module 2
from module1 import A

class B(object):
    def do_something(self):
        my_a = A()
        ... 
```

这不会按原样工作，但您可以通过移动导入来绕过循环：

```
# Module 1
from module2 import B

class A(object):
    def do_something(self):
        my_b = B()
        ...

# Module 2
class B(object):
    def do_something(self):
        from module1 import A
        my_a = A()
        ... 
```

理想情况下，您会设计这样的类，使其永远不会出现，甚至可能将它们包含在同一个模块中。在那个玩具示例中，让每个导入另一个确实没有意义。然而，在实践中，在某些情况下，在方法本身中包含一个方法的导入更有意义，而不是把所有东西都扔到同一个模块中，或者将有问题的方法提取到其他对象中。

但是，除非你有充分的理由偏离，否则我会说遵循模块顶部的约定。

# c++ - 使用 c++ 将 UTF-8 字符转换为最接近的等效 ASCII 字符（没有 winapi）

> ID：10672713
> 
> 赞同：4
> 
> 时间：2012-05-20T10:38:41.027
> 
> 标签：c++, utf-8, ascii

有没有人有一个代码片段可以转换至少欧洲语言最常见的字符？例如：

> 测试

作为 UTF-8 编码的字符串（即十六进制字节：74 65 73 74 c3 a1 c3 a9 6e 0）

到

> 睾丸素

（我想使用 c/c++ 和 std，或小型跨平台库）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T18:43:36.670

这是处理将 ISO-8859-1 范围内的字符转换为 ascii 的代码。替换字符用于 ascii 之外的所有其他内容。

```
#include <codecvt>
#include <array>
#include <string>

#include <iostream>

constexpr char const *rc = "?"; // replacement_char

// table mapping ISO-8859-1 characters to similar ASCII characters
std::array<char const *,96> conversions = {{
   " ",  "!","c","L", rc,"Y", "|","S", rc,"C","a","<<",   rc,  "-",  "R", "-",
    rc,"+/-","2","3","'","u", "P",".",",","1","o",">>","1/4","1/2","3/4", "?", 
   "A",  "A","A","A","A","A","AE","C","E","E","E", "E",  "I",  "I",  "I", "I",
   "D",  "N","O","O","O","O", "O","*","0","U","U", "U",  "U",  "Y",  "P","ss",
   "a",  "a","a","a","a","a","ae","c","e","e","e", "e",  "i",  "i",  "i", "i",
   "d",  "n","o","o","o","o", "o","/","0","u","u", "u",  "u",  "y",  "p", "y"    
}};

template <class Facet>
class usable_facet : public Facet {
public:
    using Facet::Facet;
    ~usable_facet() {}
};

std::string to_ascii(std::string const &utf8) {
    std::wstring_convert<usable_facet<std::codecvt<char32_t,char,std::mbstate_t>>,
                         char32_t> convert;
    std::u32string utf32 = convert.from_bytes(utf8);

    std::string ascii;
    for (char32_t c : utf32) {
        if (c<=U'\u007F')
            ascii.push_back(static_cast<char>(c));
        else if (U'\u00A0'<=c && c<=U'\u00FF')
            ascii.append(conversions[c - U'\u00A0']);
        else
            ascii.append(rc);
    }
    return ascii;
}

int main() {
    std::cout << to_ascii(u8"testáén\n");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T12:12:05.990

您需要处理大量的 Unicode 字符。所以“小”的标准是不可能的标准。ICU 库包含您需要的内容，但由于这个原因，您不会觉得它很小。例如，您需要处理组合修饰符和非组合修饰符。

如果您真的只关心可能的 Unicode 字符的一小部分，那么您可以创建自己的简单映射表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-20T11:46:11.737

> 我想使用 c/c++ 和 std，或小型跨平台库

不幸的是，我不确定是否存在满足您所有标准的库。

您可能会找到的最小的东西是[iconv](http://www.gnu.org/software/libiconv/)，它的 UTF-8 到 ASCII 转换器可能无法完全满足您的要求。

我很确定[ICU](http://site.icu-project.org/)可以做你想做的事，虽然 ICU 是跨平台的，但没有人指责它*很小*。

# django - 表格无效... 为什么？

> ID：10672714
> 
> 赞同：14
> 
> 时间：2012-05-20T10:39:06.060
> 
> 标签：django, django-templates

该模型：

```
class Operation(models.Model):
  operation_type = models.ForeignKey(OperationType)
  category = models.ForeignKey(Category, default=0)
  related_account = models.ForeignKey(Account, related_name = 'related_account', null = True)
  comments = models.TextField(null = True) 
```

编码：

```
def detail(request, category_id):
  class OperationCategoryOnlyForm(forms.ModelForm):
    class Meta:
      model = Operation
      fields = ('operation_type', 'category', 'related_account', )

  from django.forms.models import modelformset_factory
  OperationFormSet = modelformset_factory(Operation, form=OperationCategoryOnlyForm)
  if request.method == "POST":
    formset = OperationFormSet(request.POST, queryset=Operation.objects.filter(category=category_id))
    if formset.is_valid():
      formset.save()
# HERE IS THE FORMSET, WHICH OVERLAPS THE POSTED FORMSET - this was intentionaly to get the current result not result before save, but when you want to debug - you should pay attention at such things.    
#  formset = OperationFormSet(queryset=Operation.objects.filter(category=category_id))

  c = {"formset" : formset,}
  c.update(csrf(request))
  return render_to_response("reports/operation_list.html", c) 
```

模板：**更新：**

```
<form method="post" action="">
  {% csrf_token %}
  {{ formset.management_form }}
  {{ formset.errors }}
  {{ formset.non_field_errors }}
  {{ formset.non_form_errors }}
<table>
 {% for form in formset.forms %}
tr><td> {{ form.errors }} </td><td> {{ form.non_field_errors }}</td></tr>
<tr><td>{{ form.id }}</td><td>{{ form.instance.comments }}</td><td>{{ form.operation_type }}<br>{{ form.related_account }}</td><td>{{ form.category }}</td></tr>
  {% endfor %}
</table>
<input type="submit" value="submit">
</form> 
```

我发现 form.is_valid() = false - 但我不知道如何得到原因 WHY...

**UPD** - 我根据评论更新了模​​板 - 没有结果......

（这是非常愚蠢的规则，我必须编写比问题更少的代码 - 代码是自我解释的，是问题的本质 - 几乎总是问题会简化为一句话，但没有办法减少代码）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-20T15:46:37.513

是的，因为您在显示之前创建了另一个空表单集。在检查`print formset.errors`之前或之后直接添加。`if``is_valid()`

# jsf - 如何给 h:selectManyCheckbox 一个固定的名称属性？

> ID：10672718
> 
> 赞同：0
> 
> 时间：2012-05-20T10:39:51.373
> 
> 标签：jsf, jsf-2

我有一个`<h:selectManyCheckbox>`，他们在 HTML 源中有一个自动生成的`name`属性。我需要给它一个固定的`name`属性。我怎样才能做到这一点？

这是我现在使用的：

```
<h:selectManyCheckbox value="#{tab.values}" layout="pageDirection">
    <f:selectItems value="#{tab.checkBoxes}" />
</h:selectManyCheckbox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:56:33.837

指定`id`属性：

```
<h:selectManyCheckbox id="someName" value="#{tab.values}" layout="pageDirection"> 
```

也看这里：

[JSF HTML 标记参考h:selectManyCheckbox](http://www.jsftoolbox.com/documentation/help/12-TagReference/html/h_selectManyCheckbox.html)

# windows - 用于在 Linux 和 Windows 中工作的命令行参数

> ID：10672722
> 
> 赞同：3
> 
> 时间：2012-05-20T10:40:01.777
> 
> 标签：windows, linux, makefile, command-line-arguments

我已经通过 [从命令行传递附加变量链接到 make](https://stackoverflow.com/questions/2826029/passing-additional-variables-from-command-line-to-make)。

我有一个使用 makefile 在 Linux 和 Windows 上编译的项目。在 Windows 中它使用 gcc 而在 Linux 中它使用`gcc`ie 的 ARM 版本`armv7-linux-gcc`。我想使用一个命令行变量来告诉makefile根据Windows或Linux使用哪个编译器。

例如在 Windows 中它应该有这样的东西：

```
CC= gcc  
CFLAGS= -c -D COMPILE_FOR_WINDOWS 
```

对于 Linux：

```
CC =  armv7-linux-gcc  
CFLAGS = -c -D COMPILE_FOR_LINUX 
```

这些预处理器定义 COMPILE_FOR_WINDOWS 和 COMPILE_FOR_LINUX 存在于代码库中并且不能更改。

同样对于 make clean 它应该为 Windows 和 Linux 清理。我不能假设构建它的人会安装 Cygwin，因此不能`rm`用于删除文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T06:05:49.137

此答案仅在您使用 GNU make 或类似产品时有效：

使用环境变量有条件地设置您的 make 变量。

为了使“干净”规则正常运行，您可能还必须为任一操作系统的文件扩展名的任何差异创建一个 make 变量。

天真的例子：

```
ifeq ($(OS), Windows_NT)
  CC=gcc
  RM=del
  EXE=.exe
  CFLAGS=-c -DCOMPILE_FOR_WINDOWS
else
  CC=armv7-linux-gcc
  RM=rm  
  EXE=
  CFLAGS=-c -DCOMPILE_FOR_LINUX
endif

PROG=thing$(EXE)

.PHONY: all
all: $(PROG)
        $(CC) $(CFLAGS) -o $(PROG) main.c

.PHONY: clean
clean:
        -$(RM) $(PROG) *.o 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T17:21:00.423

也许您可以使用**ant**（带有 build.xml 文件）来构建项目。否则，在 Makefile 中，您需要检查系统并设置一些条件来检查您是在 Unix 环境还是 Windows 环境中制作项目。

# javascript - Chrome 窗口类型。他们代表什么？

> ID：10672724
> 
> 赞同：7
> 
> 时间：2012-05-20T10:40:25.003
> 
> 标签：javascript, google-chrome, google-chrome-extension

chrome.windows API 讲述了 5 种窗口类型：“normal”、“popup”、“panel”、“app”、“shell”。

*   **普通**窗口是带有标签的标准窗口；
*   **弹出**窗口是 1) 带有应用程序的独立窗口（此功能目前在 Windows 和 Linux 上可用），2) chrome devtools，如果其窗口单独打开；

但是其他 3 种窗口类型是什么？官方 API 提供的信息[很少](http://code.google.com/chrome/extensions/windows.html#type-Window)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T17:57:22.287

*   **App**以前是应用程序模式窗口（用 运行`--app=http://...`），现在被 popup 类型取代。基于[this](http://code.google.com/codesearch#-jYZujsTozo/trunk/src/chrome/browser/browser.h)和[this](http://code.google.com/p/chromium-os/issues/detail?id=20857)。

*   **壳牌**我在本机系统对话框（使用打印`Ctrl+Shift+P`）上有钱，但不能确定。

*   **面板**是停靠在托盘区域附近的一些活泼、错误、始终位于顶部的窗口。您需要启用带有`--enable-panels`标志的那些，它们在 Windows 上看起来像这样：

*   ![在此处输入图像描述](../Images/381ae755b7e5d0a44fabe5d2befe5470.png)

# php - 使用自定义路由停止 Ajax 请求的布局呈现

> ID：10672726
> 
> 赞同：3
> 
> 时间：2012-05-20T10:41:01.307
> 
> 标签：php, ajax, json, zend-framework, layout

通过 AJAX 发送请求时，如何停止布局渲染。我面临的问题是 json 数据在浏览器上回显，而不是传递给 jquery 的回调函数

这是我的脚本

```
jQuery.ajax({
    url: "/getPrivileges",
    type: "POST",
    dataType: 'JSON',
    success: function(privileges){
        alert('hellooo');

        buildTree(privileges,".privBox h2");
        if($(".privPrivilege"))
            $("#loading").css("visibility","hidden");
    },
    error: function (request, status, error) {
        alert('Error'+request.responseText);
    }

}); 
```

这是路由

```
resources.router.routes.privilege.route = /getPrivileges
resources.router.routes.privilege.defaults.module = privileges
resources.router.routes.privilege.defaults.controller = privilege
resources.router.routes.privilege.defaults.action = get-privileges 
```

这是我的控制器

```
 public function getPrivilegesAction() {

        if ($this->getRequest()->isXmlHttpRequest()) {
         ...........
         ...........
          $this->_helper->json($appPrivArray);
          $this->_helper->viewRenderer->setNoRender(TRUE);
          $this->_helper->layout->disableLayout();
          $response = $this->getResponse();
          $response->setHeader('Content-type', 'application/json', true);
   }

 } 
```

首先，我面对仍然呈现的布局，但现在 json 打印在屏幕上，即使我没有 get-privileges.phtml 视图页面。

在控制器的 init() 方法中，我这样做

```
 public function init() {
    $ajaxContextSwitch = Zend_Controller_Action_HelperBroker::getStaticHelper('AjaxContext');
    $ajaxContextSwitch->setDefaultContext('json');
    $ajaxContextSwitch->addActionContext('getPrivileges', 'json');
    $ajaxContextSwitch->initContext();
} 
```

如何使响应传递到 jquery 的回调函数！值得一提的是，并非所有 url 都有自定义路由。

请帮忙，因为我几乎将退出使用 Zend 框架的开发！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:09:38.250

JSON 数据通过“在浏览器上回显”返回给 jQuery（或任何其他库）。这就是回调接收数据的方式。

JSON 视图助手会为您禁用布局，并将`Content-Type`标题设置为，`application/json`因此您不必这样做。

`setNoRender(true)`如果您没有给定操作的视图脚本，您可以继续使用。

我认为这段代码应该可以正常工作：

```
public function getPrivilegesAction() {
    if ($this->getRequest()->isXmlHttpRequest()) {
        $this->_helper->viewRenderer->setNoRender(TRUE);
        $this->_helper->json($appPrivArray);
    }
} 
```

您是否收到任何 Javascript 错误或`alert('hello')`没有运行？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:20:09.120

在行动中，你只需要使用

```
$this->_helper->json($appPrivArray) 
```

你不需要使用`setNoRender`或其他任何东西。在 Javascript 中你不需要使用`dataType: 'JSON',` 我测试过的，应该可以正常工作。

# java - android对话框的纯色背景

> ID：10672728
> 
> 赞同：1
> 
> 时间：2012-05-20T10:41:16.277
> 
> 标签：java, android

在 android 1.6 中，背景颜色是纯色，但在 2.3 或更高版本中，对话框是透明的，更像是不透明度 80%。所以我创造了新的风格

```
<style name="SolidDialog" parent="android:Theme.Dialog">

</style> 
```

但我应该在里面放什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:59:38.700

采用：

```
 <item name="android:background">#FF000000</item> 
```

这是不透明的黑色（颜色的第一个字节是不透明度值，0=透明，255=完全不透明）。

# methods - T 和 *T 的方法集

> ID：10672729
> 
> 赞同：1
> 
> 时间：2012-05-20T10:41:37.170
> 
> 标签：methods, interface, go, receiver

Golang[语言规范指出](http://golang.org/ref/spec#Method_sets)：

> 任何其他类型 T 的方法集由所有具有接收者类型的方法组成`T`。对应指针类型的方法`*T`集是所有带有receiver `*T`or的方法的`T`集合（即也包含了的方法集`T`）。

为什么是这样？为什么接收的方法`T`属于设置的方法，`*T`反之不属于？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T11:02:04.463

从[常见问题解答](http://golang.org/doc/go_faq.html#different_method_sets)：

> 如果接口值包含指针*T，则方法调用可以通过解引用指针来获取值，但如果接口值包含值T，则方法调用没有获得指针的有用方法。

顺便说一句，带有指针接收器的方法可以改变它的接收器，就像它可以改变一个指针参数一样。将非指针接收器作为指针传递（假设这是可能的），允许方法更改它，这不应该。

建议对一个类型的所有方法使用一种一致的接收器类型，并避免混合指针和直接接收器。还建议对大类型使用指针接收器。

# html - 在浮动元素中填充

> ID：10672730
> 
> 赞同：0
> 
> 时间：2012-05-20T10:41:52.413
> 
> 标签：html, css

我有一个顶栏，分为三个部分。左侧部分、中间部分和右侧部分。每个部分都是浮动的，因此它们的位置是一致的。

我想做的是为左右元素设置一个填充。

> 10 左填充到左元素。
> 
> 10 右填充到右元素。

但是每当我应用一些填充时，例如 div 元素的`#tbl {padding-left:10px;}`整个结构都会中断。

我想要达到的目标：

![在此处输入图像描述](../Images/08a859606f7a98a11da37e7e307945f0.png)

*代码：*

**HTML：**

```
<div id="topbar">
<div id="tbl">abc</div>
<div id="tbc">abcd</div>
<div id="tbr">abc</div>
</div> 
```

**CSS：**

```
#topbar {

    width:100%;
    height:36px;
    padding-top:12px;
    background-color:#e7e6e6;
    border-top:1px solid #d0cdcd;
    border-bottom:1px solid #d0cdcd;

}

#tbl {float:left; width: 35%; text-align:left;}
#tbc {display:inline-block; width: 30%; text-align:center;}
#tbr {float:right; width: 35%; text-align:right;} 
```

> **JSFIDDLE：http: [//jsfiddle.net/bkwdX/](http://jsfiddle.net/bkwdX/)**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:51:06.733

尝试减小它们的宽度，因为填充加起来是外部宽度，而不是内部宽度。您将元素宽度定义为 300px 并为其添加 10px 右填充，宽度将占用 310px 垂直空间（在某些浏览器中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T10:53:47.753

```
width:100% = width of the floated elements + padding 
```

因此，您需要将浮动元素的宽度设置为低于 100%，以便为填充留出一些空间。

# python - python导入站点失败

> ID：10672731
> 
> 赞同：8
> 
> 时间：2012-05-20T10:41:58.460
> 
> 标签：python, import

当我执行python脚本时，会出现这个问题：

```
'import site' failed; use -v for traceback 
```

所以我再次尝试使用 -v 选项，我可以得到这些消息：

```
'import site' failed; traceback:
Traceback (most recent call last):
  File "/usr/lib/python2.6/site.py", line 513, in <module>
    main()
  File "/usr/lib/python2.6/site.py", line 495, in main
    known_paths = addusersitepackages(known_paths)
  File "/usr/lib/python2.6/site.py", line 238, in addusersitepackages
    USER_BASE = env_base if env_base else joinuser("~", ".local")
  File "/usr/lib/python2.6/site.py", line 225, in joinuser
    return os.path.expanduser(os.path.join(*args))
  File "/usr/lib/python2.6/posixpath.py", line 256, in expanduser
    userhome = pwd.getpwuid(os.getuid()).pw_dir
KeyError: 'getpwuid(): uid not found: 65530' 
```

我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T10:46:28.900

看起来它希望您的系统上存在 id 为 65530 的用户，但事实并非如此。它通过调用`os.getuid()`返回当前用户 ID 来获取该 ID。

也许您正在运行它的用户在此期间已被删除或禁用？检查`/etc/passwd`线索。

* * *

根据您的评论进行更新：`/etc/passwd`您的 chroot 监狱中显然不存在。您可以尝试将其映射，也可以将`HOME`环境变量设置为合理的值，如代码所述`expanduser`：

```
 if 'HOME' not in os.environ:
        import pwd
        userhome = pwd.getpwuid(os.getuid()).pw_dir
    else:
        userhome = os.environ['HOME'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-10T07:09:37.507

我也遇到过这个问题。在网上稍微搜索了一下，我得到了修复。检查您的环境变量 PYTHONHOME。

尝试取消设置 PYTHONHOME 并尝试。它对我有用。

（参考：[https](https://software.intel.com/en-us/forums/intel-fortran-compiler-for-linux-and-mac-os-x/topic/532383) ://software.intel.com/en-us/forums/intel-fortran-compiler-for-linux-and-mac-os-x/topic/532383 ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-15T21:09:08.717

如果您从 apache 上的 mod_wsgi 收到此错误（在您的应用程序错误日志中），则修复是在您的 wsgi.conf 中将“home=/path/to/app”添加到您的 WSGIDaemonProcess 指令中（在哪里并不重要）您将路径设置为）。例如 -

```
WSGIDaemonProcess ckan_default display-name=ckan_default processes=2 threads=15 home=/usr/lib/ckan/default 
```

# css - 将较大的孩子置于父母之上或之上？

> ID：10672734
> 
> 赞同：0
> 
> 时间：2012-05-20T10:42:36.150
> 
> 标签：css

我现在拥有的是[这个页面](http://www.formkid.com/f/kavoir/post-your-jobs-to-xianjobs-com/)。

我希望部分标题栏“雇主信息”比它自然宽 40 像素，脱离其父级，如图[所示](http://postimage.org/image/fkmeju4rp/)。

到目前为止，我尝试过：

```
.content form ol {
    position: relative;
    z-index: 50;
}

.content form ol .section {
    position: absolute;
    left: -20px;
    width: 110%;
    z-index: 100;
} 
```

并尝试了其他几个父元素位置：相对，但它从来没有奏效。

任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:51:45.653

你的`main`班级有`overflow: hidden`，所以它掩盖了它之外的部分。`overflow: visible`用on试试你的代码`.main`。

也使用`position: relative`in `.section`，否则它将脱离自然流，其余内容会跳到它后面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T11:14:06.590

正如“freejost”所说，`overflow:hidden`在类中删除`main`并添加样式`position:relative``li`

IE

```
#submit_form li{
position:relative;
}
#empInfo {
left: 0;
position: absolute;
right: -20px;
top: 0;
} 
```

HTML编辑是：

```
<div id="empInfo" class="description section" >
<h2>Employer Information</h2>
<div>General information regarding the employer business or organization.</div>
</div> 
```

这应该可以解决它..您必须进行一些其他编辑才能使其正常工作，但这应该让您处于舒适的水平

# javascript - 调用jsp文件但保持相同的网页

> ID：10672735
> 
> 赞同：1
> 
> 时间：2012-05-20T10:43:14.987
> 
> 标签：javascript, jsp

我正在尝试制作一个自动化功能来执行几次功能。现在，我有这个：

```
 formulario.action=jspFile.jsp + "?var=" + value;
    formulario.submit(); 
```

如果我只使用一个值，它工作得很好，但如果我使用一个包含 2、3 或更多的数组，它会失败并只执行最后一个。我想做这样的事情：

```
for(i = 0; i < totalCount; i++){
    formulario.action=jspFile.jsp + "?var=" + completeList[i];
    formulario.submit();
} 
```

我的问题是提交时，Web 浏览器转到另一个 jsp 文件。我可以一直保持在我的第一页吗？只是执行其他文件但不去那里。

# android - android：使用openSSL的AES加密/解密

> ID：10672737
> 
> 赞同：1
> 
> 时间：2012-05-20T10:43:49.633
> 
> 标签：android, openssl, aes

我想加密/解密文件（大小合理）。我的代码使用 AES/CBC/PKCS5Padding 正确工作。问题是加密大文件需要很长时间。所以现在我打算使用openSSL。

是否有解释如何从 Java 应用程序使用 openssl 的链接？如何将它集成到我的 java 应用程序中？

非常感谢这方面的任何链接/点。感谢您的帮助和时间

我使用 BC 的代码：

```
public class BouncyCastleProvider_AES_CBC {
    public Cipher encryptcipher, decryptCipher;
    String TAG = "DataEncryptDecrypt";
    private static final String RANDOM_ALGORITHM = "SHA1PRNG";

     // The default block size
    public static int blockSize = 16;

    // Buffer used to transport the bytes from one stream to another
    byte[] buf = new byte[blockSize];       //input buffer
    byte[] obuf = new byte[512];            //output buffer

    // The key
    byte[] key = null;
    // The initialization vector needed by the CBC mode
    byte[] IV = null;

    public BouncyCastleProvider_AES_CBC(String passwd){
        //for a 192 key you must install the unrestricted policy files
        //  from the JCE/JDK downloads page
        key =passwd.getBytes();
        key = "SECRETSECRET_1SE".getBytes();
        Log.i( "SECRETSECRET_1SECRET_2", "length"+ key.length);
        //default IV value initialized with 0
        IV = new byte[blockSize];
        InitCiphers();

    }

    public BouncyCastleProvider_AES_CBC(String pass, byte[] iv){
        //get the key and the IV

        IV = new byte[blockSize];
        System.arraycopy(iv, 0 , IV, 0, iv.length);
    }
    public BouncyCastleProvider_AES_CBC(byte[] pass, byte[]iv){
        //get the key and the IV
        key = new byte[pass.length];
        System.arraycopy(pass, 0 , key, 0, pass.length);
        IV = new byte[blockSize];
        System.arraycopy(iv, 0 , IV, 0, iv.length);
    }

    public void InitCiphers()
            {
        try {
       //1\. create the cipher using Bouncy Castle Provider
       encryptcipher =
               Cipher.getInstance("AES/CBC/PKCS5Padding", "BC");
       //2\. create the key
       SecretKey keyValue = new SecretKeySpec(key,"AES");
       //3\. create the IV
       AlgorithmParameterSpec IVspec = new IvParameterSpec(IV);
       //4\. init the cipher
       encryptcipher.init(Cipher.ENCRYPT_MODE, keyValue, IVspec);
       encryptcipher.getOutputSize(100);

       //1 create the cipher
       decryptCipher =
               Cipher.getInstance("AES/CBC/PKCS5Padding", "BC");
       //2\. the key is already created
       //3\. the IV is already created
       //4\. init the cipher
       decryptCipher.init(Cipher.DECRYPT_MODE, keyValue, IVspec);
        }
        catch(Exception ex) {
            ex.printStackTrace();
        }
    }

    public String encryptData(String inputFileName) {
        String outFilename = null;
        File inputFile = new File(inputFileName);
        try {

            // step 3 - not needed, as we have all the blocks on hand

            // step 4 - call doFinal()

             outFilename = ".".concat(CommonUtils.getHash(inputFile.getName()));
            InputStream fis;
            OutputStream fos;
            fis = new BufferedInputStream(new FileInputStream(inputFileName));

            fos = new BufferedOutputStream(new FileOutputStream(
                    inputFile.getParent() + "/" + outFilename));
            Log.i(TAG, "Output path:" + inputFile.getParent() + "/" + outFilename);
            int bufferLength = (inputFile.length()>10000000?10000000:1000);
            byte[] buffer = new byte[bufferLength];
            int noBytes = 0;
            byte[] cipherBlock = new byte[encryptcipher
                    .getOutputSize(buffer.length)];
            int cipherBytes;
            while ((noBytes = fis.read(buffer)) != -1) {
                cipherBytes = encryptcipher.update(buffer, 0, noBytes,
                        cipherBlock);
                fos.write(cipherBlock, 0, cipherBytes);
            }
            // always call doFinal
            cipherBytes = encryptcipher.doFinal(cipherBlock, 0);
            fos.write(cipherBlock, 0, cipherBytes);

            // close the files
            fos.close();
            fis.close();
            Log.i("encrpty", "done");
            inputFile.delete();
        }

        catch (Exception ex) {
            ex.printStackTrace();
        }
        return inputFile.getParent() + "/" + outFilename;
    }

    public void decryptData(String inputFileName, String outputFileName) {
        InputStream fis;
        OutputStream fos;
        try {
            fis = new BufferedInputStream(new FileInputStream(
                    inputFileName));
            fos = new BufferedOutputStream(new FileOutputStream(
                    outputFileName));
            byte[] buffer = new byte[blockSize*100];
            int noBytes = 0;
            byte[] cipherBlock = new byte[decryptCipher
                    .getOutputSize(buffer.length)];
            int cipherBytes;
            while ((noBytes = fis.read(buffer)) != -1) {
                cipherBytes = decryptCipher.update(buffer, 0, noBytes,
                        cipherBlock);
                fos.write(cipherBlock, 0, cipherBytes);
            }
            // allways call doFinal
            cipherBytes = decryptCipher.doFinal(cipherBlock, 0);
            fos.write(cipherBlock, 0, cipherBytes);

            // close the files
            fos.close();
            fis.close();
            new File(inputFileName).delete();

            Log.i("decrypt", "done");
        } catch (Exception ex) {
            ex.printStackTrace();
        }

    }

    public byte[] generateSalt()  {
        byte[] salt = new byte[16];

        try {
        SecureRandom random = SecureRandom.getInstance(RANDOM_ALGORITHM);
        random.nextBytes(salt);
        }
        catch(Exception ex) {
            ex.printStackTrace();
        }
        return salt;

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T01:47:16.687

Guardian Project 具有适用于 Android 的构建文件。构建完成后，您需要编写一个简单的 JNI 包装器，该包装器使用 OpenSSL API（EVP 等）进行加密/解密，然后从您的应用程序中调用它。您需要在应用程序中包含他的 openssl 和您的 JNI 包装器，并在启动时使用`System.loadLibrary()`.

[https://github.com/guardianproject/openssl-android](https://github.com/guardianproject/openssl-android)

此外：

*   不要直接从字符串派生密码，使用适当的派生算法。
*   不要使用固定的 IV，尤其是全零

# ruby-on-rails - 在 Rails 视图中插入 HTML 元素

> ID：10672740
> 
> 赞同：0
> 
> 时间：2012-05-20T10:45:14.970
> 
> 标签：ruby-on-rails

我有一个包含一堆元素的视图。其中一个（div）显示取决于在 select_tag 内（也在同一页面内）发生变化的值。

我从 select_tag 元素中获取选定的 ID

```
$('#some_id').on('change',function(){
    //$(this).val()
}) 
```

但随后只是不知道如何获取对象并检查其属性之一，这样就知道我是否应该显示 div？

我想把那个 id 发送到服务器......在那里做我需要的任何事情，然后回到视图并尝试这样的事情

```
<% if some_condition %>
 <div>
  ...
 </div>
<% end %> 
```

这（当然）可能不是这样。我很高兴了解这是怎么发生的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:14:08.527

在从服务器获取一些数据后，您可以这样`onChange`做`select`。您也可以考虑这种方法。

但是，如果您可以预先填充 div 并添加一个类或其他一些属性，您可以将其与选择字段中的所选选项相关联，那么您可以完全阻止服务器调用。

```
<div class="opt1Val selectOptsDiv"> </div>
<div class="opt2Val selectOptsDiv"> </div>
<div class="opt3Val selectOptsDiv"> </div> 
```

最初用 . 隐藏所有这些 div `css` `display: none;`。

```
$('#some_id').on('change',function(){
  var selectedOptionVal = $(this).find("option:selected).val();
  $("." + selectedOptionVal).show();
}) 
```

但是我想如果 div 的显示和隐藏仅取决于所选的选项值并且不必在服务器端进行一些其他处理，我想你可以做到这一点。

# caching - 如何将不同的视频文件作为一个文件播放？

> ID：10672742
> 
> 赞同：1
> 
> 时间：2012-05-20T10:45:23.283
> 
> 标签：caching, video, html5-video, jwplayer, transcoding

我想将不同的视频文件（播放列表）连接为一个文件，这样用户就可以像播放一部电影一样播放它们，我阅读了有关预缓冲的信息，但我没有找到明确的方法，也有可能只播放文件的某个部分而不下载整个文件，

问候，

# c# - 实体框架中的嵌套工作单元

> ID：10672744
> 
> 赞同：1
> 
> 时间：2012-05-20T10:45:42.553
> 
> 标签：c#, .net, entity-framework, nested, unit-of-work

我尝试**使用嵌套工作单元**在我的应用程序中实现工作单元模式。

我有以下接口：

```
interface IDataService
{
  IUnitOfWork NewUnitOfWork();
  INestedUnitOfWork NewNestedUnitOfWork(IUnitOfWork parent);
}

interface IUnitOfWork : IDisposable
{
  void Commit();
}

interface INestedUnitOfWork : IUnitOfWork
{
  IUnitOfWork Parent { get; }
  object GetParentObject(object obj);   // get the same object in parent uow
  object GetNestedObject(object obj);   // get the same object in this uow
} 
```

[这几乎就是XPO](http://documentation.devexpress.com/#XPO/CustomDocument2113)中发生的事情。

是否有机会使用 Entity Framework 来实现这些接口，假设版本 4，几乎没有痛苦？

我使用自动生成的实体对象，而不是 POCO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T01:17:34.053

不完全是你的方式，因为我使用带有状态标志的 POCO，但它也可以应用于生成的实体。这是一种管理父实体和子实体状态的递归方法。这是`Parent`实体的状态管理器类：

```
public partial class ParentStateManager : IStateManager<Parent, MyObjContext>
{

    private IStateManager<Child, MyObjContext> _ChildStateManager = new ChildStateManager();
    public void ChangeState(Parent m, MyObjContext ctx)
    {
        if (m == null) return;
        ctx.Parents.Attach(m);
        if (m.IsDeleted)
        {
            ctx.ObjectStateManager.ChangeObjectState(m, System.Data.EntityState.Deleted);
        }
        else
        {
            if (m.IsNew)
            {
                ctx.ObjectStateManager.ChangeObjectState(m, System.Data.EntityState.Added);
            }
            else
            {
                if (m.IsDirty)
                {
                    ctx.ObjectStateManager.ChangeObjectState(m, System.Data.EntityState.Modified);
                }
            }
        }
        SetRelationsState(m, ctx);
    }
    private void SetRelationsState(Parent m, MyObjContext ctx)
    {
        foreach (Child varChild in m.Children.Where(p => !p.IsDeleted))
        {
            _ChildStateManager.ChangeState(varChild, ctx);
        }
        while (m.Children.Where(p => p.IsDeleted).Any())
        {
            _ChildStateManager.ChangeState(m.Children.Where(p => p.IsDeleted).LastOrDefault(), ctx);
        }
    }
} 
```

这是`Child`实体的状态管理器：

```
public partial class ChildStateManager : IStateManager<Child, MyObjContext>
{

    public void ChangeState(Child m, MyObjContext ctx)
    {
        if (m == null) return;
        ctx.Children.Attach(m);
        if (m.IsDeleted)
        {
            ctx.ObjectStateManager.ChangeObjectState(m, System.Data.EntityState.Deleted);
        }
        else
        {
            if (m.IsNew)
            {
                ctx.ObjectStateManager.ChangeObjectState(m, System.Data.EntityState.Added);
            }
            else
            {
                if (m.IsDirty)
                {
                    ctx.ObjectStateManager.ChangeObjectState(m, System.Data.EntityState.Modified);
                }
            }
        }
        SetRelationsState(m, ctx);
    }
    private void SetRelationsState(Child m, MyObjContext ctx)
    {
    }
} 
```

`IStateManager`是一个只有`ChangeState`方法的简单接口。如果`Child`实体有一个`GrandChild`集合，该`ChildStateManager.SetRelationsState()`方法将调用`GrandChildStateManager.ChangeState()`等。这有点复杂，但它适用于我，我使用 T4 模板生成状态管理器代码。

# ruby-on-rails - 如何在不保存的情况下上传文本文件并将内容解析到具有 RoR 的数据库中

> ID：10672745
> 
> 赞同：1
> 
> 时间：2012-05-20T10:45:48.747
> 
> 标签：ruby-on-rails, ruby, file, parsing, upload

我需要上传一个文本文件而不将其保存在数据库中。我的目标是上传这个文件并自动获取您的内容并将其保存在我的数据库中。

我的文件：data.txt

```
name age occupation
julio 19 student
ramon 20 student 
```

我的数据库：

```
class CreateStudents < ActiveRecord::Migration
   def change
     create_table: students do |t|
       t.string "name"
       t.integer "age"
       t.string "occupation"

       t.timestamps
     end
   end
end 
```

有谁知道如何做到这一点？我在互联网上搜索，但没有找到解决我的情况的方法。我需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:10:14.057

```
= form_tag url, {multipart: true} do
  = file_field_tag :file
  .... 
```

在控制器中

```
if params[:file]
  lines = params[:file].tempfile.readlines.map(&:chomp) #readlines from file & removes newline symbol
  lines.shift #remove first line 
  lines.each do |l| 
    m = l.match(/(\S+)\s(\d+)\s(\S+)/) #parse line 
    Student.create {name: m[1],age: m[2], occupation: m[3]}
  end
end 
```

# visual-studio-2010 - Visual Studio 相对路径

> ID：10672747
> 
> 赞同：4
> 
> 时间：2012-05-20T10:45:53.110
> 
> 标签：visual-studio-2010, relative-path

在我的应用程序源代码旁边，我的 SVN 存储库中有一些视频文件。签出后，Visual Studio 项目是使用 cmake 构建的。我的代码需要加载视频文件，并且在从 Visual Studio 运行应用程序时运行良好 - 但是当双击发布/调试文件夹中的 exe 文件时，它会崩溃，因为相对路径不再正确。显然，当从 Visual Studio 中运行它时，.sln 文件所在的文件夹被认为是相对路径的根。

如何从代码中引用视频文件，以便应用程序在我在 Visual Studio 中运行以及双击 release/bin 文件夹中的 exe 时可以正常工作，而不复制视频？（它们很大）

我需要这样做，因为我必须提交我的应用程序，以便它可以编译并开箱即用，也可以在没有 Visual Studio 的情况下执行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T12:24:00.020

您可以更改项目的设置以使 IDE 的行为与双击可执行文件相匹配，然后修复您的相对路径。

对于 VS10/VS11，在项目的属性页面的顶部`All Configurations`从`Configuration:`列表中选择。

然后选择`Configuration Properties`->`Debugging`并设置`Working Directory`为`$(OutDir)`

请注意，在 $(OutDir) 以外的目录中从命令提示符运行可执行文件仍然会失败。

# vb.net - 如何获取完整的文件路径？

> ID：10672751
> 
> 赞同：-3
> 
> 时间：2012-05-20T10:46:30.697
> 
> 标签：vb.net

我需要获取 VS 应用程序路径。

你好！在我的 Windows 窗体应用程序中，我添加了一个图像文件。现在我想获取这个图像文件的完整路径。知道如何实施吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:41:51.677

正如 Cody Gray 指出的那样，如果您已将图像添加为资源，则可以通过类中适用的图像属性在代码中访问它`My.Resources`。

但是，如果您将图像文件添加为项目中包含的常规文件，则需要将其“复制到输出目录”属性设置为“如果较新则复制”或“始终复制”。这样，文件将在构建时复制到项目的 bin 文件夹中。然后您的代码可以通过查看可执行文件夹来找到它。`system.Reflection.Assembly.GetExecutingAssembly().Location`您可以假设它在当前目录中，但使用类似获取完整路径的东西会更安全。

# c# - 运行 winform 应用程序未处理的异常

> ID：10672753
> 
> 赞同：0
> 
> 时间：2012-05-20T10:46:47.683
> 
> 标签：c#, winforms, exception

我想在 C# 中运行非常简单的 videoplayer windows 窗体应用程序，但是当我单击按钮播放视频时，出现此错误：

`"An unhandled exception of type 'System.IO.FileLoadException' occurred in System.Windows.Forms.dll"`

`Form1.cs:`

```
using Microsoft.DirectX.AudioVideoPlayback;

namespace videoplayer
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {            
            Video myVid = new Video("d:\\vids.avi");
            myVid.Owner = panel1;
            myVid.Play();

        }
    }
} 
```

异常错误参考 Program.cs ：

```
namespace videoplayer 
{ 
    static class Program 
    {
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());  //exception error here
        }
    }
} 
```

谢谢

# c - 我的字符设备无法打开

> ID：10672754
> 
> 赞同：4
> 
> 时间：2012-05-20T10:47:08.200
> 
> 标签：c, linux, char, device, linux-device-driver

我有一个问题困扰了我一周。我希望有人能帮助我。我写了一个简单的 char 设备模块，它`insmod`在内核和. 之后我可以看到它。但是当我打开这个 char 设备文件时出现错误。`mknod``/dev``insmod``cat /proc/devices`

我的字符设备代码是：

```
#include <linux/module.h>
#include <linux/types.h>
#include <linux/fs.h>
#include <linux/errno.h>
#include <linux/mm.h>
#include <linux/sched.h>
#include <linux/init.h>
#include <linux/cdev.h>
#include <asm/io.h>
#include <asm/system.h>
#include <asm/uaccess.h>
#define CALL_DEV_NAME  "mn2"
#define CALL_DEV_MAJOR 230
struct cdev cdev;
MODULE_LICENSE("GPL");

int call_open(struct inode *inode,struct file *filp){
    int num=MINOR(inode->i_rdev);
    printk("call open minor is:%d \n",num);
    return 0;
}

static struct file_operations call_fops={
    .owner=THIS_MODULE,
    .open=call_open,
};

int call_init(void){
    int result;
    printk("call call_init \n");
    result=register_chrdev_region(MKDEV(CALL_DEV_MAJOR,0),
        1,CALL_DEV_NAME);
    if(result<0){
        printk("registerfail \n");
        return result;
    }
    cdev_init(&cdev,&call_fops);
    cdev.ops=&call_fops;
    cdev.owner=THIS_MODULE;
    cdev_add(&cdev,MKDEV(CALL_DEV_MAJOR,0),1);
    return 0;
}

void call_exit(void){
    printk("call call_exit \n");
    unregister_chrdev(CALL_DEV_MAJOR,CALL_DEV_NAME);
}

module_init(call_init);
module_exit(call_exit); 
```

测试代码是：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/stat.h>
 #include <fcntl.h>

int main(){
    FILE *fd;
    fd=fopen("/dev/mn2","r+");

    if(fd==NULL)
    printf("fail\n");
    } 
```

我的 Makefile 是：

```
ifneq ($(KERNELRELEASE),)
obj-m := mn2.o
else
KDIR := /lib/modules/$(shell uname -r)/build
PWD := $(shell pwd)

all:
    $(MAKE) -C $(KDIR) M=$(PWD) modules
clean:
    rm -f *.ko *.o *.mod.o *.mod.c *.symvers *.order
endif 
```

我使用的命令是：

```
make
insmod mn2.ko 
```

`mn2`然后我可以看到`/proc/devices`

```
mknod mn2 c 230 0 
```

还有一个文件`mn2`如下`/dev`

但是在我编译 test.c`gcc test.c -o test`并运行测试之后，我总是得到一个`fail`世界。

你能帮我找出我的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:46:49.133

用这个：

`fprintf(stderr, "fopen() failed: %s\n", strerror(errno));`

包括一个文件`<errno.h>`。它将为您提供有关错误的详细信息。我认为它的权限问题。尝试使用 sudo 运行您的用户空间二进制文件。

# ruby-on-rails - 在 has_many 依赖资源上增加索引

> ID：10672755
> 
> 赞同：1
> 
> 时间：2012-05-20T10:47:19.180
> 
> 标签：ruby-on-rails, uniqueidentifier, has-many

我有一个包含许多书籍的项目。每本书都有很多页。我希望每个页面都有一个 pageIndex，使其相对于书是唯一的，这样每次我通过书建立一个页面时，这个索引都会增加。显然，所有模型都有自己的 id，但该 id 在所有页面中都是唯一的。我希望由 Book 构建的第一个 Page 的 pageIndex 为 0，第二个的 pageIndex 为 1，第三个；2等

我可以做这样的事情：

```
book = User.books.last
pageIndex = book.pages.count
book.pages.create(:pageIndex => pageIndex) 
```

但在我看来，如果该索引由本书在创建 Page 类型的依赖资源时自动设置会更好。有没有办法做到这一点？

请注意，我已经看到[了这个问题](https://stackoverflow.com/questions/8752120/rails-nested-association-and-restarted-numbering)，但我正在寻找的是父/拥有资源中的一个钩子，它允许我在创建它之后和保存它之前对它创建的依赖资源做一些事情。类似于 before_save 回调，但与依赖资源的创建有关：after_dependent_create。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T11:08:21.683

关联也有一些回调。请参阅此处[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html) “关联回调”。可能的回调有：before_add、after_add、before_remove 和 after_remove。

此外，我会在书上添加一个 counter_cache，这样您就可以知道您有多少页，并且在创建新页面时您不必计算现有页面

# python - django-pipeline 不编译 sass 文件

> ID：10672758
> 
> 赞同：4
> 
> 时间：2012-05-20T10:48:14.020
> 
> 标签：python, django, sass

我正在使用 django-1.3 与 django-staticfiles-1.2.1 和 django-pipeline-1.2.6 此设置应该根据文档工作。

在我的项目的根目录中，我有一个目录`staticfiles`，其中包含一个`sass`包含我的 sass 文件的目录。我想看到 django-pipeline 编译我的 sass 文件并将它们放在 /static/css/master.css

这是我的 settings.py 文件的摘录

```
MEDIA_ROOT = '/home/jonasg/dev/projectX/media/' 

STATIC_ROOT = 'static/'
STATIC_URL = '/static/'   
PIPELINE=True
PIPELINE_AUTO=True
STATICFILES_STORAGE = 'pipeline.storage.PipelineStorage'
STATICFILES_DIRS = ( 
    'staticfiles',
    )   
PIPELINE_COMPILERS = ( 
      'pipeline.compilers.sass.SASSCompiler',
      )   
PIPELINE_CSS_COMPRESSOR = 'pipeline.compressors.cssmin.CssminCompressor'

PIPLINE_CSS = { 
    'base': {
        'source_filenames': (
            'sass/*.sass'
            ),                                                                                                                                    
        'output_filename': 'css/master.css'
        }   
    }   
PIPELINE_COMPILERS = ( 
      'pipeline.compilers.sass.SASSCompiler',
      )   
PIPELINE_SASS_BINARY='/usr/bin/sass'
STATICFILES_FINDERS = ( 
         'staticfiles.finders.FileSystemFinder',
         'staticfiles.finders.AppDirectoriesFinder',
         'staticfiles.finders.DefaultStorageFinder'
      ) 
```

当我运行 ./manage.py collectstatic 时，/staticfiles 中的所有文件都被复制到 /static 中，但没有任何内容被编译或缩小。我还注意到这个命令从 /media 获取所有内容并将它们放在 /static 中，这不是我所期望的行为。

另外，正如您在上面可能已经注意到的那样，我正在使用 django-staticfiles，如果您仍在使用 django-1.3，则 django-pipeline 建议使用它。如果此应用程序已迁移到 django-1.3 ，我不明白为什么要坚持使用 django-staticfiles ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:03:34.183

SASS 编译器期望您的 sass 文件具有扩展名`.scss`. 看起来 SASS 添加了另一个扩展/语法，它将在下一个版本的管道中修复。

不要忘记像这样更改您的静态文件存储：

```
STATICFILES_STORAGE = 'pipeline.storage.PipelineCachedStorage' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T11:23:56.863

我遇到了同样的问题，这是我的解决方法，添加

```
PIPELINE_STORAGE = 'pipeline.storage.PipelineCachedStorage' 
```

在您的设置中。它至少对我有用。

# android - ImageView 中的循环动画

> ID：10672760
> 
> 赞同：0
> 
> 时间：2012-05-20T10:49:05.870
> 
> 标签：android, animation, imageview

我的屏幕上有一个 ImageView，我想让它摇晃（向左旋转然后向右旋转）。我知道如何为 ImageView 设置动画，这是我的代码：

```
new RotateAnimation(20f, 50f,Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);

anim.setInterpolator(new LinearInterpolator());
anim.setRepeatCount(Animation.INFINITE);
anim.setDuration(700);

// Start animating the image
final ImageView splash = (ImageView) findViewById(R.id.mobileshake);
splash.startAnimation(anim); 
```

问题是，现在 Imageview 正在循环一个动画，但我想要循环 2 个动画（向左旋转然后向右旋转）。

我怎样才能做到这一点？

对不起，我的英语不好..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:02:27.240

您可以使用[`AnimationSet`](http://developer.android.com/reference/android/view/animation/AnimationSet.html).

[API Demos](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/index.html)中有一个使用`TranslateAnimation`xml 定义的“摇晃”动画的示例。您可以通过遵循类似的方法来实现您正在寻找的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:09:07.577

我通过执行以下操作弄清楚了，并且工作非常顺利:)

```
final RotateAnimation anim1 = new RotateAnimation(20f, 50f,Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
        anim1.setInterpolator(new LinearInterpolator());
        //anim1.setRepeatCount(Animation.INFINITE);
        anim1.setDuration(300);

        final RotateAnimation anim2 = new RotateAnimation(50f, 20f,Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
        anim2.setInterpolator(new LinearInterpolator());
        //anim2.setRepeatCount(Animation.INFINITE);
        anim2.setDuration(300);

        final ImageView splash = (ImageView) findViewById(R.id.mobileshake);
        anim1.setAnimationListener(new AnimationListener(){

            public void onAnimationEnd(Animation animation) {
                // TODO Auto-generated method stub
                splash.startAnimation(anim2);
            }

            public void onAnimationRepeat(Animation animation) {
                // TODO Auto-generated method stub

            }

            public void onAnimationStart(Animation animation) {
                // TODO Auto-generated method stub

            }});
        anim2.setAnimationListener(new AnimationListener(){

            public void onAnimationEnd(Animation animation) {
                // TODO Auto-generated method stub
                splash.startAnimation(anim1);
            }

            public void onAnimationRepeat(Animation animation) {
                // TODO Auto-generated method stub

            }

            public void onAnimationStart(Animation animation) {
                // TODO Auto-generated method stub

            }});

        splash.startAnimation(anim1); 
```

# html - 通用/跨浏览器CSS

> ID：10672762
> 
> 赞同：0
> 
> 时间：2012-05-20T10:49:20.533
> 
> 标签：html, css

我使用自己的 CSS 设计了一个网页。我在 Google Chrome 和 Firefox 上运行它们。网页看起来一样，没有问题。但在 IE 中，所有页面都非常难看。我使用了许多 CSS 样式，它们做得更多。但是那些 css 在 IE 中不起作用。如果我使用基本的 css，那么我将不得不使用更多的图像并做更多的事情来获得相同的外观（我想节省时间来使用客户端和服务器中的功能，并且不喜欢花时间设计）。此外，如果使用其他可用的 css 框架（jQuery），则会加载无用的样式和图像，这可能会导致网页加载速度变慢。我使用了 css 重置样式表。但它并没有解决我的问题。我想让我的页面在 IE 中像在 Chrome 和 FF 中一样漂亮，并且少用 css。而不是使用更多 css 框架？我可以为此做些什么？

我是否必须再次完成所有适用于 IE 的 css 工作（花费时间..:( ）？ **编辑：**我查看了许多网站的来源，这些网站属于我的网站类型。他们还使用了基本的 css 并使用了许多图像为了更好看。但我想专注于功能和不喜欢花时间编辑图像和更多的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:57:31.480

您可以使用一个名为 pie.htc 的工具，它允许您在 IE 中使用 css3 属性。它解决了所有问题，但肯定会有所帮助，您需要做的只是一个简单的 CSS 属性。在此处了解更多信息：http: [//css3pie.com/](http://css3pie.com/)

# c++ - 这就是为什么 C++ 11 中的移动构造函数有意义吗？

> ID：10672763
> 
> 赞同：10
> 
> 时间：2012-05-20T10:49:27.980
> 
> 标签：c++, c++11

我最近和 Bjarne Stoustrup 一起参加了一场讲座，他在谈论 c++ 11 以及它为什么有意义。

他的一个新的令人敬畏的例子是移动构造函数的新闻'&&'符号。

然后我想回家并开始思考，“我什么时候需要这样的东西？”。

我的第一个例子是下面的代码：

```
class Number {
private:
    int value;
public:
    Number(const int value) : value(value){
        cout << "Build Constructor on " << value << endl;
    }
    Number(const Number& orig) : value(orig.value){
        cout << "Copy Constructor on " << value << endl;        
    }
    virtual ~Number(){}

    int toInt() const{
        return value;
    }

    friend const Number operator+(const Number& n0, const Number& n1); 
};

const Number operator+(const Number& n0, const Number& n1){
    return  Number(n0.value + n1.value);
}

int main(int argc, char** argv) {

    const Number n3 = (Number(2) + Number(1));
    cout << n3.toInt() << endl;
    return 0;
} 
```

这段代码正是移动构造函数应该解决的问题。n3 变量由对“+”运算符返回的值的引用构成。

除了这是运行代码的输出：

```
Build Constructor on 1
Build Constructor on 2
Build Constructor on 3
3

RUN SUCCESSFUL 
```

输出显示的是复制构造函数永远不会被调用——这是在优化关闭的情况下。我很难扭曲代码的手臂以使其运行复制构造器。将结果包装在 std::pair 中就可以了，但这让我一直在思考。

运算符算术中移动构造函数的参数实际上是一个失败的参数吗？

为什么不调用我的复制构造函数以及为什么调用它：

```
using namespace std;

class Number {
private:
    int value;
public:
    Number(const int value) : value(value){
        cout << "Build Constructor on " << value << endl;
    }
    Number(const Number& orig) : value(orig.value){
        cout << "Copy Constructor on " << value << endl;        
    }
    virtual ~Number(){}

    int toInt() const{
        return value;
    }

    friend const std::pair<const Number, const Number> operator+(const Number& n0, const Number& n1); 
};

const std::pair<const Number, const Number> operator+(const Number& n0, const Number& n1){
    return  make_pair(Number(n0.value + n1.value), n0);
}

int main(int argc, char** argv) {

    const Number n3 = (Number(2) + Number(1)).first;
    cout << n3.toInt() << endl;
    return 0;
} 
```

带输出：

```
Build Constructor on 1
Build Constructor on 2
Copy Constructor on 2
Build Constructor on 3
Copy Constructor on 3
Copy Constructor on 2
Copy Constructor on 3
Copy Constructor on 2
Copy Constructor on 3
3

RUN SUCCESSFUL 
```

我想知道逻辑是什么以及为什么配对运算符基本上会破坏性能？

**更新：**

我做了另一项修改，发现如果我替换`make_pair`为该对的实际模板化构造函数，`pair<const Number, const Number>`这会减少复制构造函数被触发的次数：

```
class Number {
private:
    int value;
public:
    Number(const int value) : value(value){
        cout << "Build Constructor on " << value << endl;
    }
    Number(const Number& orig) : value(orig.value){
        cout << "Copy Constructor on " << value << endl;        
    }
    virtual ~Number(){}

    int toInt() const{
        return value;
    }

    friend const std::pair<const Number, const Number> operator+(const Number& n0, const Number& n1); 
};

const std::pair<const Number, const Number> operator+(const Number& n0, const Number& n1){
    return  std::pair<const Number, const Number>(Number(n0.value + n1.value), n0);
}

int main(int argc, char** argv) {

    const Number n3 = (Number(2) + Number(1)).first;
    cout << n3.toInt() << endl;
    return 0;
} 
```

输出 ：

```
Build Constructor on 1
Build Constructor on 2
Build Constructor on 3
Copy Constructor on 3
Copy Constructor on 2
Copy Constructor on 3
3

RUN SUCCESSFUL 
```

所以看起来使用`make_pair`是有害的吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-20T11:36:32.323

考虑这个简单的 C++ 代码：

```
class StringHolder
{
  std::string member;
public:

  StringHolder(const std::string &newMember) : member(newMember) {}
};

std::string value = "I am a string that will probably be heap-allocated.";
StringHolder hold(value); 
```

执行第二行后，该字符串存在多少份？答案是两个：一个存储在 中`value`，一个存储在 中`hold`。那很好……有时。有时您想给某人一个字符串的副本，同时自己保留它。但有时你*也不想*这样做。例如：

```
StringHolder hold("I am a string that will probably be heap-allocated."); 
```

这将创建一个`std::string`临时的，然后将其传递给`StringHolder`的构造函数。构造函数将复制构造它的成员。构造函数完成后，临时对象将被销毁。*有一次，我们无缘无故*地拥有了两份字符串。

拥有两个字符串副本是没有意义的。我们想要做的是*将*`std::string`参数移动到 中，`StringHolder`这样字符串就只有一个副本。

这就是移动构造的用武之地。

A`std::string`基本上只是一个包装指向已分配字符数组的指针，以及包含该数组长度（和容量，但现在不用管它）的大小。如果你有一个`std::string`，并且你想把它*移到*另一个，那么新字符串必须声明对该分配的字符数组的所有权，并且旧字符串必须放弃所有权。在 C++03 中，您可以通过以下操作来做到这一点`swap`：

```
std::string oldStr = "I am a string that will probably be heap-allocated.";
std::string newStr;
std::swap(newStr, oldStr); 
```

这会将 的内容移动`oldStr`到`newStr`没有任何内存分配的情况下。

C++11 的移动语法提供了两个没有的重要特性`std::swap`。

首先，移动可以隐式发生（但**只有**在这样做是安全的时候）。`swap`如果要交换，必须显式调用；移动可以通过编写自然代码来实现。例如，取我们`StringHolder`之前的内容并进行一项更改：

```
class StringHolder
{
  std::string member;
public:

  StringHolder(std::string newMember) : member(std::move(newMember)) {}
};

StringHolder hold("I am a string that will probably be heap-allocated."); 
```

这个字符串有多少个副本被创建？答案是……只有一个：临时建造。因为它是临时的，所以 C++11 足够聪明，知道它可以移动构造任何被它初始化的东西。所以它移动构造构造函数的值参数`StringHolder`（或者更可能完全省略构造）。这会将存储的内存从临时移动到`newMember`. 所以不会发生复制。

之后，我们在构造时显式调用移动构造函数`member`。这再次将分配的内存从 移动`newMember`到`member`。

我们只分配*一次*字符串*。*这可以大大节省性能。

现在，这与您自己类型的构造函数有什么关系？好吧，考虑一下这段代码：

```
class StringHolder
{
  std::string member;
public:

  StringHolder(std::string newMember) : member(std::move(newMember)) {}

  StringHolder(const StringHolder &old) : member(old.member) {}
  StringHolder(StringHolder &&old) : member(std::move(old.member)) {}
};

StringHolder oldHold = std::string("I am a string that will probably be heap-allocated.");
StringHolder newHold(oldHold); 
```

这一次，我们现在有了一个带有复制和移动构造函数的类。我们得到多少个字符串副本？

二。当然是两个。我们有`oldHold`and `newHold`，每个都有一个字符串的副本。

但是，如果我们这样做：

```
StringHolder oldHold = std::string("I am a string that will probably be heap-allocated.");
StringHolder newHold(std::move(oldHold)); 
```

然后再一次只有*一个*字符串的副本。

这就是为什么运动很重要。这就是它重要的原因：它减少了您可能需要放置的东西的副本数量。

* * *

> 为什么我的复制构造函数没有被调用

您的复制构造函数没有被调用，因为它被*省略*了。它正在做返回值优化。关闭优化不会有帮助，因为大多数编译器无论如何都会忽略。当省略是可能的时，没有理由不这样做。

*对于函数返回值，在无法*进行省略的情况下，移动很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T23:13:17.347

`operator+`如果你用这个重载你，它可能有助于理解移动语义的价值：

```
Number operator+(Number&& n0, Number&& n1){
  n0.value += n1.value;
  return std::move(n0);
} 
```

这有两个重要的变化：

*   它返回一个非常量值
*   它接受右值参数并修改其中一个而不是创建一个新对象

这允许您的示例避免“构建构造函数”调用之一

```
Build Constructor on 1
Build Constructor on 2
Copy Constructor on 3
3 
```

现在代码创建了两个新对象并复制了一个，而不是创建三个新对象，因此到目前为止并不是一个很大的优势。但是如果你添加一个可以用来代替副本的移动构造函数：

```
Number(Number&& orig) : value(orig.value){
  cout << "Move Constructor on " << value << endl;
}

Build Constructor on 1
Build Constructor on 2
Move Constructor on 3
3 
```

如果该类在“Build”和“Copy”构造函数中分配内存，则您已将原始代码中的分配总数从三个减少到两个（假设移动构造函数不分配任何内容，但取得了内存的所有权由它移动的对象拥有。）

现在，如果您将计算更改为：

```
Number n3 = Number(2) + Number(1) + Number(0); 
```

And compare your original code with the move-enabled version you should see the number of "allocations" reduced from five to three. The more temporaries that are involved the greater the benefit of modifying and moving from temporaries instead of creating new objects. The benefit is not only avoiding copies, but also avoiding creating new resources for new objects, by taking ownership of the resources from existing objects instead.

# php - Mysql 行总是 = 1

> ID：10672766
> 
> 赞同：0
> 
> 时间：2012-05-20T10:49:31.350
> 
> 标签：php, mysql, sql

您好，我正在尝试检查数据库中是否有一行，但是对于某些原因，它一直说有但没有。我在一侧有很多 if 语句，所以我认为这就是问题所在。

```
<?php
 if (isset($_POST['A'])) {
$item2= mysql_real_escape_string($_POST['A']);
$item = strip_tags($item2);

$pokemonchoice= mysql_real_escape_string($_POST['B']);
$pokemonchoicee = strip_tags($pokemonchoice);

?><?php  
 if ( $pokemonchoicee == "Add to pokemon 1" ) {
    $pokemonchoicee = '1';
}
 if ( $pokemonchoicee == "Add to pokemon 2" ) {
    $pokemonchoicee = '2';
}
 if ( $pokemonchoicee == "Add to pokemon 3" ) {
    $pokemonchoicee = '3';
}
 if ( $pokemonchoicee == "Add to pokemon 4" ) {
    $pokemonchoicee = '4';
} 
 if ( $pokemonchoicee == "Add to pokemon 5" ) {
    $pokemonchoicee = '5';
}
 if ( $pokemonchoicee == "Add to pokemon 6" ) {
    $pokemonchoicee = '6';
}

 ?>

 <?php

 $query = "SELECT * FROM items WHERE item='".$item."' AND belongsto='".$_SESSION['username']."'";
if(mysql_num_rows($query)!=0)
{
echo "You do not have this item";
}
else
{
echo "You have this item";
}

 ?>

 <?php
 echo $pokemonchoicee ;
 echo $item ;
 }

 ?> 
```

保持打印真实的位是

```
 <?php

 $query = "SELECT * FROM items WHERE item='".$item."' AND belongsto='".$_SESSION['username']."'";
if(mysql_num_rows($query)!=0)
{
echo "You do not have this item";
}
else
{
echo "You have this item";
}

 ?> 
```

我删除了所有行但仍然说你有这个项目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T10:51:32.723

`mysql_num_rows()`获取一个mysql结果类型资源，`$query = mysql_query($query)`在mysql_num_rows之前使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T10:58:13.820

您的 if 语句中有错误。如果返回的行数 > 0，则您正在打印“您**没有**此项目”。应该是相反的，所以改变`!=`检查或让回声交换位置

# c++ - 旋转立方体以使正面保持正方形

> ID：10672768
> 
> 赞同：0
> 
> 时间：2012-05-20T10:49:55.810
> 
> 标签：c++, c, opengl, 3d, transformation

在 OpenGL 中，我必须旋转一个立方体（并翻译它），使它看起来像这两个图像。![立方体](../Images/d29097038f578dc19418bc615e02e609.png)

没有任何变换，只有正面的红脸是可见的。我只是不明白如何旋转它（以便在图像中可以看到顶部和右侧）并保持红脸完全正方形。

我考虑过将它翻译到左下角，但这只会移动红色方块，它不会使其他面孔可见。

我在用着`glFrustum(-20, 20, -20, 20, -1, -10);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:06:54.320

如果您正在使用透视投影（您就是这样）并且立方体的正面平行于 xy 平面，那么如果立方体完全位于眼睛空间的一个象限中，您将只能看到另外两个面；也就是说，如果有水平线和垂直线将窗口切成两半，则立方体必须完全位于四个生成的矩形之一内。

显示其他两个面孔的其他选项是

*   使用等距投影
*   旋转立方体以将其他面带入视野。

为了帮助可视化这一点，试着玩[Minecraft](http://www.minecraft.net/)（比如说）并以不同的方式四处走动，看看不同方块的不同面是如何进入视野的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T11:07:01.933

那不是轮换。

第二张图片看起来像正投影 ( `glOrtho`)，但这可能是巧合。

在任何一种情况下，如果立方体按照您的建议从原点向左下方*平移*，您只能获得这样的图像。

# java - RMS 存储值在 J2ME 仿真器中不是永久可用的

> ID：10672771
> 
> 赞同：2
> 
> 时间：2012-05-20T10:50:34.580
> 
> 标签：java, netbeans, java-me, midp, rms

我有在 J2ME 中使用 RMS 存储值的代码。它在模拟器上运行良好。所以，我的第一个问题是

1.  当我重新启动模拟器时，所有存储的值都会被删除。

2.  存储的值显示在模拟器中，但没有显示在我正在测试我的应用程序的移动设备中。

我正在使用 NetBeans 开发我的 J2ME 应用程序。

**===更新===**

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

import javax.microedition.lcdui.*;
import javax.microedition.midlet.*;
import javax.microedition.rms.*;

public class TryNew extends MIDlet implements CommandListener, ItemCommandListener {

    private RecordStore record;
    private StringItem registered;
    static final String REC_STORE = "SORT";
    //Button existUser;
    Display display = null;
    private Ticker ticker;
    Form form = null;
    Form form1 = null;
    TextField tb, tb1, tb2, tb3;
    ChoiceGroup operator = null;
    String str = null;
    Command backCommand = new Command("Back", Command.BACK, 0);
    Command loginCommand = new Command("Login", Command.OK, 2);
    Command saveCommand = new Command("Save New", Command.OK, 1);
    Command sendCommand = new Command("Send", Command.OK, 2);
    Command selectCommand = new Command("Select", Command.OK, 0);
    Command exitCommand = new Command("Exit", Command.STOP, 3);
    private ValidateLogin ValidateLogin;

    public TryNew() {
    }

    public void startApp() throws MIDletStateChangeException {
        display = Display.getDisplay(this);
        form = new Form("Login");
        registered = new StringItem("", "Registered ?", StringItem.BUTTON);
        form1 = new Form("Home");
        tb = new TextField("Login Id: ", "", 10, TextField.PHONENUMBER);//TextField.PHONENUMBER
        tb1 = new TextField("Password: ", "", 30, TextField.PASSWORD);
        operator = new ChoiceGroup("Select Website", Choice.POPUP, new String[]{"Game", "Joke", "SMS"}, null);
        form.append(tb);
        form.append(tb1);
        form.append(operator);
        form.append(registered);
        registered.setDefaultCommand(selectCommand);
        registered.setItemCommandListener(this);
        form.addCommand(saveCommand);
        ticker = new Ticker("Welcome Screen");
        form.addCommand(loginCommand);
        form.addCommand(selectCommand);
        form.addCommand(exitCommand);
        //   existUser = new StringItem(null, "Registered ?");
        // form.append(existUser);
        form.setCommandListener(this);
        form1.addCommand(exitCommand);
        form1.addCommand(sendCommand);
        form1.setCommandListener(this);
        form.setTicker(ticker);
        display.setCurrent(form);
    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
    }

    void showMessage(String message, Displayable displayable) {
        Alert alert = new Alert("");
        alert.setTitle("Error");
        alert.setString(message);
        alert.setType(AlertType.ERROR);
        alert.setTimeout(5000);
        display.setCurrent(alert, displayable);
    }

    public void commandAction(Command c, Displayable d) {
        if (c == exitCommand) {
            destroyApp(true);
            notifyDestroyed();
        } else if (c == backCommand) {
            display.setCurrent(form);
        } else if (c == loginCommand) {
            ValidateLogin = new ValidateLogin(this);
            ValidateLogin.start();
            ValidateLogin.validateLogin(tb.getString(), tb1.getString(), operator.getString(operator.getSelectedIndex()));
        } else if (c == saveCommand) {
            openRecord();
            writeRecord(tb.getString(), tb1.getString(), operator.getString(operator.getSelectedIndex()));
            closeRecord();
            showAlert("Login Credential Saved Successfully !!");
        } 
    }

    ////==============================================================================/////
    /// Record Management
    public void openRecord() {
        try {
            record = RecordStore.openRecordStore(REC_STORE, true);
        } catch (Exception e) {
            db(e.toString());
        }
    }

    public void closeRecord() {
        try {
            record.closeRecordStore();
        } catch (Exception e) {
            db(e.toString());
        }
    }

    public void deleteRecord() {
        if (RecordStore.listRecordStores() != null) {
            try {
                RecordStore.deleteRecordStore(REC_STORE);
            } catch (Exception e) {
                db(e.toString());
            }
        }
    }

    public void writeRecord(String login_id, String pwd, String operator_name) {
        String credential = login_id + "," + pwd + "," + operator_name;
        byte[] rec = credential.getBytes();
        try {
            if (login_id.length() > 10 || login_id.length() < 10) {
                showAlert("Please Enter valid Login Id");
            } else if (pwd.length() < 1) {
                showAlert("Please Password !!");
            } else {
                record.addRecord(rec, 0, rec.length);
            }

        } catch (Exception e) {
            db(e.toString());
        }
    }

    private void showAlert(String err) {
        Alert a = new Alert("");
        a.setString(err);
        a.setTimeout(Alert.FOREVER);
        display.setCurrent(a);
    }

    public void readRecord() {
        try {
            if (record.getNumRecords() > 0) {
                Comparator comp = new Comparator();
                RecordEnumeration re = record.enumerateRecords(null, comp, false);

                while (re.hasNextElement()) {
                    String str = new String(re.nextRecord());
                    showAlert(str);
                }
            }
        } catch (Exception e) {
            db(e.toString());
        }
    }

    private void db(String error) {
        System.err.println("Exception: " + error);
    }

    public void commandAction(Command c, Item item) {
        if (c == selectCommand && item == registered) {
            openRecord();
            readRecord();
            closeRecord();
        }
    }

    class Comparator implements RecordComparator {

        public int compare(byte[] rec1, byte[] rec2) {
            String str1 = new String(rec1);
            String str2 = new String(rec2);
            int result = str1.compareTo(str2);
            if (result == 0) {
                return RecordComparator.EQUIVALENT;
            } else if (result < 0) {
                return RecordComparator.PRECEDES;
            } else {
                return RecordComparator.FOLLOWS;
            }
        }
    }

    class ValidateLogin implements Runnable {

        TryNew midlet;
        private Display display;
        String login_id;
        String pwd;
        String operator_name;

        public ValidateLogin(TryNew midlet) {
            this.midlet = midlet;
            display = Display.getDisplay(midlet);
        }

        public void start() {
            Thread t = new Thread(this);
            t.start();
        }

        public void run() {
            if (login_id.length() > 10 || login_id.length() < 10) {
                showAlert("Please Enter valid Login Id");
            } else if (pwd.length() < 1) {
                showAlert("Please Password !!");
            } else {
                showHome();
            }
        }
        /* This method takes input from user like text and pass
        to servlet */

        public void validateLogin(String login_id, String pwd, String operator_name) {
            this.login_id = login_id;
            this.pwd = pwd;
            this.operator_name = operator_name;
        }

        /* Display Error On screen*/
        private void showAlert(String err) {
            Alert a = new Alert("");
            a.setString(err);
            a.setTimeout(Alert.FOREVER);
            display.setCurrent(a);
        }

        private void showHome() {
            tb2 = new TextField("To: ", "", 30, TextField.PHONENUMBER);
            tb3 = new TextField("Message: ", "", 300, TextField.ANY);
            form1.append(tb2);
            form1.append(tb3);
            form1.addCommand(loginCommand);
            //display.setCurrent(tb3);
            display.setCurrent(form1);

        }
    };
} 
```

这就是我得到的，当我点击`Manage Emulator`

![管理模拟器](../Images/09e53ce9f24ec6b0847d536437339559.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T10:53:40.270

您需要`storage_root`在 WTK 中修复您的应用程序，

每当您启动 enulator 时，它都会引用相同的 storage_root，默认情况下，它会为每个会话创建不同的数据文件

# jquery - Jquery在表格的链接中选择图像，然后添加到fancybox

> ID：10672774
> 
> 赞同：0
> 
> 时间：2012-05-20T10:50:44.500
> 
> 标签：jquery, fancybox

当用户单击链接/缩略图时，我有一些数据库生成的包含图像的 html，我希望这些图像显示在花式框中

如果缩略图在表格中，我想将它们分组到一个简单的图片库中，就像[这里的例子一样](http://fancyapps.com/fancybox/demo/)

如果它只是某些文本中图像的链接，我希望它在幻想框中显示为单个图像，就像“不同效果”之一

但是，如果链接只是链接，那么它们应该不受影响

我对 jquery 选择器有些困扰，有人能指出错误吗

是否可以在fancybox 中为图像添加缩放功能，而无需链接到另一个更大版本的图像？

```
 <!DOCTYPE html>
    <html>
    <head>
        <title>fancyBox - Fancy jQuery Lightbox Alternative | Demonstration</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <!-- Add jQuery library -->
        <script type="text/javascript" src="../lib/jquery-1.7.2.min.js"></script>

        <!-- Add mousewheel plugin (this is optional) -->
        <script type="text/javascript" src="../lib/jquery.mousewheel-3.0.6.pack.js"></script>

        <!-- Add fancyBox main JS and CSS files -->
        <script type="text/javascript" src="../source/jquery.fancybox.js?v=2.0.6"></script>
        <link rel="stylesheet" type="text/css" href="../source/jquery.fancybox.css?v=2.0.6" media="screen" />

        <!-- Add Button helper (this is optional) -->
        <link rel="stylesheet" type="text/css" href="../source/helpers/jquery.fancybox-buttons.css?v=1.0.2" />
        <script type="text/javascript" src="../source/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>

        <!-- Add Thumbnail helper (this is optional) -->
        <link rel="stylesheet" type="text/css" href="../source/helpers/jquery.fancybox-thumbs.css?v=1.0.2" />
        <script type="text/javascript" src="../source/helpers/jquery.fancybox-thumbs.js?v=1.0.2"></script>

        <!-- Add Media helper (this is optional) -->
        <script type="text/javascript" src="../source/helpers/jquery.fancybox-media.js?v=1.0.0"></script>

        <script type="text/javascript">
       var iTabNum=0;
        $(document).ready(function() {

          $('a > img').each(function(){

            if($(this).parent('table'))
              {
              var TabID;
                  if (typeof($(this).parent('table').attr('id')) == "undefined" )
                     {
                      iTabNum ++;
                      $(this).parent('table').attr('id', "img" + TabID + iTabNum);
                     }
                  else
                     {
                       TabID = "img" + $(this).parent('table').attr('id'); 
                     }
                $(this).closest().attr('class', "fancybox");
                $(this).closest().attr(TabID + '-group', "gallery" );

              }
            else
              {
              $(this).attr('class', "fancybox-effects-d");

              }

        });

            $('.fancybox').fancybox({
          overlay : {
                css : {
        //  hover > img{width:100px;height:100px;z-index:1000;position:relative;top:-50px;left:-50px;},
                    'background-color' : '#eee'
                }
          }});

        $(".fancybox-effects-d").fancybox({
                    padding: 0,

                    openEffect : 'elastic',
                    openSpeed  : 150,

                    closeEffect : 'elastic',
                    closeSpeed  : 150,

                    closeClick : true,

                    helpers : {
                        overlay : null
                    }
                });          
    });

      </script>
      </head>
      <body>
            <div>
              <table>
                <tr>
                  <td><a  href="1_b.jpg" title="Lorem ipsum dolor sit amet"><img src="1_s.jpg" alt="" /></a>
                  </td>
                  <td><a  href="2_b.jpg" title="Etiam quis mi eu elit temp"><img src="2_s.jpg" alt="" /></a>
                  </td>
                </tr>
                <tr>
                  <td><a  href="3_b.jpg" title="Cras neque mi, semper leon"><img src="3_s.jpg" alt="" /></a></td>

                  <td><a  href="4_b.jpg" title="Sed vel sapien vel sem uno"><img src="4_s.jpg" alt="" /></a></td>

                </tr>
              </table>
            </div>
            <div>
                <h3>Etiam quis mi eu elit</h3>
                <p>
                    Lorem ipsum dolor sit amet,  <a href="http://fancyapps.com/fancybox/">www.fancyapps.com/fancybox/</a> consectetur adipiscing elit. Etiam <a href="5_b.jpg" title="Lorem ipsum dolor sit amet, consectetur adipiscing elit">Image</a> quis mi eu elit tempor facilisis id et neque. 
                </p>
        </div>

      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T23:27:51.463

我希望我理解你的问题，但基本上你想要的是：

*   为每个表格分配一个不同`ID`的，以便该表格内的图像（带有缩略图）的链接属于同一个画廊。

*   任何指向图像的链接都应获取`class="fancybox-effects-d"`或`class="fancybox"`满足以下条件：

    *   `fancybox-effects-d`用于指向表格**外部**图像的链接和/或指向**没有**缩略图的图像的链接，无论它们是否在表格内部。
    *   `fancybox`**以及指向表格内**`rel`图像的链接的相同属性（属性应与表格的 ID 匹配，并且与其他表格不同）和**缩略图**。**`rel`**
    *****   其他链接（不是图片）无论是否在表格内都不应受到影响。****

 ****所以如果你有不止一个`table`，每个`table`应该看起来像

```
<table id="img1"></table>
<table id="img2"></table> 
```

**那么 a之外**的每个链接`table`应该如下所示：

```
<a class="fancybox-effects-d" href="image01.jpg"><img src="image01thumb.jpg" alt="" /></a>
<a class="fancybox-effects-d" href="image02.jpg">image 02</a>
<a href="http://example.com">link somewhere else</a> 
```

**a内**的链接`table`应如下所示：

```
<table id="img1">
 <a class="fancybox" rel="img1" href="image03.jpg"><img src="image03thumb.jpg" alt="" /></a>
 <a class="fancybox" rel="img1" href="image04.jpg"><img src="image04thumb.jpg" alt="" /></a>
 <a class="fancybox-effects-d" href="image05.jpg">image 05</a>
 <a href="http://example2.com">another link</a>
</table>
<table id="img2">
 <a class="fancybox" rel="img2" href="image06.jpg"><img src="image06thumb.jpg" alt="" /></a>
 <a class="fancybox" rel="img2" href="image07.jpg"><img src="image07thumb.jpg" alt="" /></a>
 <a class="fancybox-effects-d" href="image08.jpg">image 08</a>
 <a href="http://example3.com">another link</a>
</table> 
```

如果以上所有内容都正确，那么您可以简化脚本，例如：

```
$(document).ready(function() {
 // assign a different ID to each table
 $('table').each(function(i){
  $(this).attr('id', 'img'+(i+1));
 });
 // go through all <a> tags
 $('a').each(function(i){
  // get the parent tag name
  var parentTag = $(this).parents()[0].nodeName;
  // detect if link has thumbnail
  var hasThumb = $(this).children().html();
  // detect if the link targets to an image, otherwise ignored
  if(this.href.match(/\.(jpe?g|gif|png|bmp)((\?|#).*)?$/i)){
   // since the parent of an element inside a table is (should be) "TD" 
   // then evaluate if the link is inside a table
   // AND it has a thumbnail
   if(parentTag == "TD" && hasThumb != null){
    // get the parent table's ID
    var TabID = $(this).closest("table").attr("id");
    // set the class and rel attributes
    $(this).attr({"class":"fancybox","rel": TabID});
   }else{
    // if link to an image has not a thumbnail AND/OR is outside a table
    $(this).addClass("fancybox-effects-d");
   }
  }
 }); // each
}); // ready 
```

您可以调整脚本以满足您的需求。

顺便说一句，您的一个fancybox 脚本的正确语法应该是：

```
 $('.fancybox').fancybox({
  helpers : {
   css : {'background-color' : '#eee'}
  }
 }); 
```

（您省略了该`helpers`选项）****

# objective-c - 如何在 Storyboard 场景中为 UIButton 编写代码

> ID：10672787
> 
> 赞同：0
> 
> 时间：2012-05-20T10:52:48.883
> 
> 标签：objective-c, ios, storyboard

我不知道为什么，但是在谷歌和这里搜索之后，似乎没有人有这个问题。

我在主场景旁边添加了一个新的故事板场景，并为一个按钮编写了一个代码，该按钮将触发部分卷曲过渡到新场景。

在我的新场景中，有一个控件，这是我的问题。我怎样才能为他们编码？我不能将它们作为 IBOutlet 或 IBAction 添加到我的主场景的视图控制器中，这很明显。所以我该怎么做？如何为该新场景添加新的 ViewController.h/m 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:33:42.633

要将此方法添加到您的 ViewController.h/m，您需要将此视图控制器的类设置为“ViewController”。为此，选择视图，并在检查器中选择“显示身份检查器”，然后在“类”字段中键入视图控制器类（ViewController）。

如果您希望此视图控制器位于不同的类中，请在没有 XIB 文件的情况下创建该类，并在“类”字段中键入该类名称。

这将允许您在您指定的类中向该按钮声明 IBAction/IBOutlet。

# git - 仅本地文本段显示在冲突文件中的标记之外

> ID：10672789
> 
> 赞同：0
> 
> 时间：2012-05-20T10:53:01.843
> 
> 标签：git, merge-conflict-resolution

在 git 生成的冲突解决文件中，仅应在标记之外显示公共代码（'<<<<<<< ours' - '>>>>>>> theirs'） - 对吗？！

我有一个 CSS 文件，其中包含我在本地版本中插入的注释并且发生了冲突，并且此注释段列在标记之外。

这发生在普通样式和 diff3 样式（包括基本段）中。

使用可视化工具（在我的情况下为 p4merge）时，所述文本段仅在本地显示，而不在基本或远程显示。

还检查了：

```
git checkout --theirs <file-name>
--> said segment not there

git checkout --ours <file-name>
--> said segment there

git checkout -m <file-name>
--> said segment outside markers 
```

发生什么了？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T21:58:04.723

对有冲突的文件部分的“仅本地”更改有多“接近”？

您的“仅限本地”更改所在的文件部分附近可能没有文本冲突，并且文件的该部分已自动合并。

例如，假设您从分支 A 开始，使用一个名为 README 的文件，该文件如下所示：

```
README

foo

bar 
```

然后你 fork 一个新的分支 B。在分支 B 上，你改变 README 看起来像

```
README

foo

baz 
```

并提交它。现在切换回分支 A，进行两次更改并提交，因此分支 A 的 README 如下所示：

```
README

frotz

foo

qux 
```

现在你将 B 合并到 A 中。这就是你得到的（使用 diff3 冲突样式）：

```
README

frotz

foo

<<<<<<< HEAD
qux
||||||| merged common ancestors
bar
=======
baz
>>>>>>> B 
```

如您所见，git 自动合并了文件的第一部分，但在第二部分上进行了合并。

# c# - 为什么 STAThread 属性被忽略？

> ID：10672793
> 
> 赞同：4
> 
> 时间：2012-05-20T10:53:44.870
> 
> 标签：c#, .net, multithreading, sta

vs 奇怪的行为……

![vs 奇怪的行为](../Images/78118e94a9634241f9f0d36fe2cf222f.png)

大家好！

谁能解释一下，怎么可能？

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T14:10:59.423

我仍然觉得链接的答案有点难以接受，特别是因为 OP 承认他实际上**没有**与 EXE 同名的 DLL。我也无法复制它。

但是，这个解释有*一些*可信度，我注意到当要求 Fusion 搜索程序集时，它会做一些奇怪的事情。您可以在使用 Fuslogvw.exe 时看到这一点，启用“记录所有绑定”选项。奇怪的是，当被要求加载程序集时，它会同时搜索 DLL 和*EXE*。以下是测试控制台应用程序日志条目的片段：

```
LOG: Attempting download of new URL file:///C:/projects/ConsoleApplication3/bin/Debug/ConsoleApplication3.DLL.
LOG: Attempting download of new URL file:///C:/projects/ConsoleApplication3/bin/Debug/ConsoleApplication3/ConsoleApplication3.DLL.
LOG: Attempting download of new URL file:///C:/projects/ConsoleApplication3/bin/Debug/ConsoleApplication3.EXE.
LOG: Assembly download was successful. Attempting setup of file: C:\projects\ConsoleApplication3\bin\Debug\ConsoleApplication3.exe
LOG: Entering run-from-source setup phase. 
```

向右滚动以查看它首先如何查找 DLL。以及它在与程序集同名的子目录中的外观。DLL Hell 的奇怪而巨大的潜力在这里。使用 CLR 以某种方式探测 [STAThread] 属性的错误程序集的故障模式。还解释了对 Connect 反馈文章的奇怪“作为外部关闭”驳回，Fusion 归 Microsoft 的 Windows 小组所有，而不是 DevDiv。

Anyhoo，迹象表明，只需重命名输出文件即可解决您的问题。项目+属性，构建选项卡，输出路径设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:35:03.513

我不是调试器内部工作的专家，但我认为监视窗口中显示的值是由 Visual Studio 线程评估的，而不是应用程序的主线程（在屏幕截图中暂停）。

因此我没有看到矛盾，监视窗口只是说 Visual Studio 线程是 MTA。

尝试使用`Debug.Write`来显示主线程的单元状态。

# python - 通过 webob.Response 返回二进制数据

> ID：10672796
> 
> 赞同：1
> 
> 时间：2012-05-20T10:54:22.480
> 
> 标签：python, python-3.x, wsgi, webob

我正在尝试在 webob.Response 中返回二进制文件，但发生错误

```
file = open(filePath, 'rb')
buffer = file.read()
file.close()

self._response.body = buffer 
```

提供回溯

```
"F:\Program Files\Python32\python.exe" G:/development/projects/AutoBlog/main.py
Traceback (most recent call last):
File "F:\Program Files\Python32\lib\wsgiref\handlers.py", line 137, in run
    self.result = application(self.environ, self.start_response)
File "G:/development/projects/AutoBlog/main.py", line 30, in application
    print(wsgiApplication)
File "F:\Program Files\Python32\lib\site-packages\webob\response.py", line 218, in __str__
    parts += ['', self.text if PY3 else self.body]
File "F:\Program Files\Python32\lib\site-packages\webob\response.py", line 383, in _text__get
    return body.decode(self.charset, self.unicode_errors)
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 0: invalid start byte
activate.adobe.com - - [20/May/2012 14:52:49] "GET /res/images/i.jpg HTTP/1.1" 500 59 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:07:52.403

看起来像是`webob`把你的身体当作一个字符串，而它实际上是一个二进制对象。也许您需要设置内容类型？

# cordova - 在 Ubuntu 上使用 Phonegap *完全* 开发 iOS 应用程序？

> ID：10672798
> 
> 赞同：7
> 
> 时间：2012-05-20T10:54:51.197
> 
> 标签：cordova

是否可以？还是我在某个阶段需要一台 Mac？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T11:00:13.493

如果您希望 AppStore 出现，您将需要一台 Mac 来将您的应用程序提交到 AppStore，但当然，您始终可以在 Cydia 上出售它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T11:11:12.417

根据[Phonegap Build](https://build.phonegap.com/)的常见问题解答，您应该能够将项目上传到构建服务并获得适用于 iOS 的应用商店应用。

它仍处于测试阶段，我自己还没有尝试过。要在 Ubuntu 上调试，我想你可以将它作为一个 android 项目运行，并希望平台之间没有太大区别......

我不确定您是否需要一台实际的 Mac 才能将应用程序提交到应用商店。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-23T01:06:58.713

PhoneGap Build 可以让你为 iOS 构建，你可以在没有 Mac 的情况下签署你的 iOS 开发者证书。请参阅：[创建 iOS 分发证书窗口 - Apple 配置门户](https://stackoverflow.com/questions/12233131/create-ios-distribution-certificate-windows-apple-provisioning-portal)

您必须拥有 Mac 的唯一部分是使用 Application Loader 提交到 AppStore。查看[http://macincloud.com](http://macincloud.com)，您可以按小时付费使用预装了 Application Loader 的 Mac。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T11:01:28.893

您可以开发应用程序，但不能为 ios 设备部署它。您需要安装 xcode 来执行此操作。

# javascript - 如何将 文本节点中的空格更改为 s？

> ID：10672800
> 
> 赞同：1
> 
> 时间：2012-05-20T10:55:10.070
> 
> 标签：javascript, dom, greasemonkey

我正在编写一个 Greasemonkey 脚本，其中在一个地方我将文本中的所有空格转换为`<br>`，以便字符串在表格中的单元格中显得更加垂直。

我匹配的 HTML 是：

```
<span>
    <img class="icon itemicon" alt="Manual item" ...etc...>
    Chapter 2 reading
    <a title="Sort in descending order" href="index.php....."> etc </a>
</span> 
```

这是我的代码：

```
var child = spanelm.firstChild;
var textChild = child.nextSibling;
textChild.textContent = textChild.textContent.replace(/ /g, "<br>"); 
```

我的 Greasemonkey 脚本找到了正确的元素并成功进行了更改，但在网页上我看到了`<br>`字面上的标签：

```
Chapter<br>2<br>reading 
```

（在我的代码的另一个地方，我正在做类似的事情，这似乎有效：

```
spanelm.firstChild.innerHTML = spanelm.firstChild.text.replace(/ /g, "<br>"); 
```

但我无法在这种情况下使用这种 HTML 组织。）

我觉得我需要告诉 Greasemonkey `eval()`HTML 什么的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:08:15.243

文本节点没有`innerHTML`，因此您不能以这种方式插入新标签。（你应该非常小心使用这种字符串替换任何节点`innerHTML`——代码丢弃嵌套元素、内联 JS、附加事件处理程序等只是时间问题）

要在文本元素中插入标签，您需要将该元素分解为新的文本元素，并穿插您想要的标签。在这种情况下，用 a 替换每次运行的空格`<br>`将使用如下代码：

（[**在 jsFiddle 上查看它的实际效果。**](http://jsfiddle.net/pwrft/)）

```
var precedingNode   = document.querySelector ("span > img.icon.itemicon");
var node            = precedingNode.nextSibling;
var words           = node.textContent.split (/ +/);
var parent          = node.parentNode;

for (var J = 0, numWords = words.length;  J < numWords;  ++J) {
    var newWord     = document.createTextNode (words[J]);
    var newBreak    = document.createElement ("br");
    parent.insertBefore (newWord,  node);
    parent.insertBefore (newBreak, node);
}
parent.removeChild (node); 
```

# java - ImageJ - 如何导入和显示网格？

> ID：10672807
> 
> 赞同：1
> 
> 时间：2012-05-20T10:56:54.187
> 
> 标签：java, computational-geometry, mesh, imagej

如何在 ImageJ 上打开并显示网格（使用 .obj、.stl 或 .dxf 格式）？

[我尝试通过 file/open 打开文件，但使用3DViewer](http://rsbweb.nih.gov/ij/plugins/3d-viewer/)或[Interactive 3D Surface Plot](http://rsbweb.nih.gov/ij/plugins/surface-plot-3d.html)插件没有显示任何内容？当我打开 obj 时，我确实得到了下图中的列表...

我看了[教程](http://rsbweb.nih.gov/ij/docs/examples/index.html)和这篇[论文](http://imagejdocu.tudor.lu/lib/exe/fetch.php?media=tutorial:working:workshop3d.pdf)。

![ImageJ WaveFront 导入](../Images/1b977f79be14710641f3fd1bf4dd4f2c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:34:34.180

我猜你是用 ImageJ 的 File->Open 命令打开它的。您应该先打开 3D 查看器，然后单击 File->Importsurfaces->Wavefront（对于 .obj 文件）或 File->Importsurfaces->STL（显然对于 .stl 文件）。重要提示：您必须在 3D 查看器的菜单栏中执行此操作。

[您可以在http://3dviewer.neurofly.de](http://3dviewer.neurofly.de)找到有关 3D 查看器的大量信息

希望有帮助...

贝内

# python - 带有外键字段列表的 Django 表单

> ID：10672811
> 
> 赞同：2
> 
> 时间：2012-05-20T10:57:15.010
> 
> 标签：python, django-models, django-forms, django-views

我有以下模型，我正在尝试为其创建表单：

```
class Letter(models.Model):
   title = models.CharField(max_length=100)
   publish_date = models.TimeField()

class LetterRecipients(models.Model):
   letter = models.ForeignKey(Letter)
   recipient_name = models.CharField(max_length=200)
   recipient_rating = models.IntegerField()
   has_responded = models.BooleanField() 
```

我想要一个允许用户输入信件标题和发布日期的表单，并在同一个表单中按姓名和评级输入多个收件人。

任何人都可以帮助为此创建表单模型吗？我不知道如何让 django 使用`{{ form.as_p }}`. 我想我必须使用 jQuery 在 HTML 页面上创建额外的收件人行，但是我如何让 django 将它们解析到模型中？

任何帮助将不胜感激。

谢谢。方舟

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T03:15:51.693

方舟，你可以使用Django 形式的[ModelMultipleChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ModelMultipleChoiceField)。这里有一些粗略的例子。我创建“帖子”应用程序只是为了快速测试：

表格.py

```
from django import forms
from django_test.posts.models import Letter, LetterRecipients

class LetterForm(forms.Form):
    title = forms.CharField()
    publish_date = forms.TimeField()
    recepient = forms.ModelMultipleChoiceField(
                                        queryset=LetterRecipients.objects.all()
                                        ) 
```

模型.py

```
from django.db import models

class Letter(models.Model):
    title = models.CharField(max_length=100)
    publish_date = models.TimeField()

class LetterRecipients(models.Model):
    letter = models.ForeignKey(Letter)
    recipient_name = models.CharField(max_length=200)
    recipient_rating = models.IntegerField()
    has_responded = models.BooleanField()

    def __unicode__(self):
        return self.recipient_name 
```

视图.py

```
# Create your views here.
from django_test.posts.forms import LetterForm
from django.shortcuts import render

def index(request):
    form = LetterForm()
    data = {'form': form}

    return render(request, 'posts/index.html', data) 
```

索引.html

```
{% load url from future %}

{{ form.as_p }} 
```

# c# - wcf 配置 tcp 和 http

> ID：10672814
> 
> 赞同：1
> 
> 时间：2012-05-20T10:57:17.177
> 
> 标签：c#, wcf, nettcpbinding

嗨，我正在研究具有 http + tcp 服务的 wcf，这是我的配置：

```
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true">
  <baseAddressPrefixFilters>
    <add prefix="http://localhost/API/"/>
  </baseAddressPrefixFilters>
</serviceHostingEnvironment>

<standardEndpoints>
  <webHttpEndpoint>
    <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"/>
  </webHttpEndpoint>
</standardEndpoints>

<services>
  <service name="API.APIsrv" behaviorConfiguration="ServiceBehaviour">

    <endpoint address="http://localhost/tAPI/Basic" binding="basicHttpBinding" name="Basic" bindingConfiguration="Basic" contract="API.IAPIsrv" >
    </endpoint>

    <endpoint address="http://localhost/API" binding="webHttpBinding" name="APIsrv" contract="API.IAPIsrv" behaviorConfiguration="web">
    </endpoint>

    <endpoint address="net.tcp://localhost/API"  binding="netTcpBinding" name="APIsrv.netTcpBinding" contract="API.IAPIsrv">
    </endpoint>

    <endpoint address="http://localhost/API/mex"
      binding="mexHttpBinding"
      contract="IMetadataExchange" />

    <endpoint address="net.tcp://localhost/API/mex"
              binding="mexTcpBinding"
              contract="IMetadataExchange" />

  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehaviour">
      <serviceMetadata httpGetEnabled="true" httpGetUrl="http://localhost/API/APIsrv.svc"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>

  <endpointBehaviors>
    <behavior name="web">
      <webHttp helpEnabled="true"/>
    </behavior>
  </endpointBehaviors>
</behaviors>

<bindings>

  <basicHttpBinding>
    <binding name="Basic" />
  </basicHttpBinding>
  <netTcpBinding>
    <binding name="APIsrv.netTcpBinding" transferMode="Streamed" maxReceivedMessageSize="20480000">
      <security mode="None"></security>
    </binding>
  </netTcpBinding>

</bindings> 
```

在我的全局文件中，我处理路由地址：

```
protected void Application_Start(object sender, EventArgs e)
    {
        RouteTable.Routes.Add(new ServiceRoute("", new ServiceHostFactory(), typeof(APIsrv)));
    } 
```

在我的本地客户端测试中，我收到此错误：由于编译期间出现异常，无法激活服务'/API/'。异常消息是： 'http://localhost/API/Basic' 的 ChannelDispatcher 与合同 '"IAPIsrv"' 无法打开其 IChannelListener。

我该如何解决这个问题

# c# - 无法通过 StreamReader 获取正确的文件路径

> ID：10672818
> 
> 赞同：0
> 
> 时间：2012-05-20T10:57:50.080
> 
> 标签：c#, asp.net, .net, streamreader

在我的`MVC`应用程序中，我试图打开一个文件以通过 StreamReader 读取，我给它的路径是这样的，保持文件在 bin 文件夹中的相对位置：

```
TextReader tr = new StreamReader("Content/files/text/email.txt"); 
```

但是当我运行它时，它会出现这个错误：

> 找不到路径“C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\Content\files\text\email.txt”的一部分。

这非常令人困惑，因为我不知道如何停止它以停止从根目录读取路径，而是从应用程序根文件夹读取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:59:21.447

使用`Application.StartupPath`或`Directory.GetCurrentDirectory`

像

```
TextReader tr = 
     new StreamReader(
         Path.Combine(Directory.GetCurrentDirectory(), 
                      "Content", "files", "text", "email.txt")
         ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T11:05:26.113

如果您正在谈论 winforms 应用程序，您应该这样做。

```
var tr = new StreamReader(Path.Combine(Application.StartupPath, @"Content\files\text\email.txt")); 
```

更新：Web 应用程序不需要 StreamReader。这很简单：

```
string text = new WebClient().DownloadString("URL_TO_WHEREEVER"); 
```

# c++ - 如何使用 std::map 在 C++ 中构建树结构

> ID：10672824
> 
> 赞同：5
> 
> 时间：2012-05-20T10:58:53.577
> 
> 标签：c++, map, tree

我正在尝试用 C++ 编写一种树状结构。就像每棵树都有树枝和树叶一样。一个分支可以包含其他分支以及叶子。现在我的实现要求每个分支和叶子具有不同的功能。举个例子。取树形结构

```
 Root                                             
                                |                          |                             
                             Branch1                     Branch2                     Branch3
      |                |                |
    Leaf1            Leaf2           Branch4 
```

> 现在每个叶子和分支都有一个不同的函数来执行，所以叶子1将有一个名为leaf1_func的函数，叶子2将有一个叶子2_func，分支4有一个分支4_func。

我最初试图实现复合设计模式。但这意味着我将拥有与叶子一样多的课程。但由于我有大量的树叶和树枝，我想避免创建更多的课程。我意识到这是一个不寻常的情况，但希望有人能在这方面帮助我。在不创建太多类的情况下实现这棵树的最佳方法是什么。

我也在使用 map STL 容器来存储数据，我想使用这个树实现来解决 TSP 问题中的这个问题。

```
#include <cstdlib>
#include <iostream>
#include <map>

using namespace std;

int n=4;
int min=1, max=10;

struct graph
{
int nodes;//total no. of nodes or vertices namely cities
std::map<std::pair<int,int>, int> graphMap;//an object that links a pair of vertices   
};

void directed_Graph(graph);

void directed_Graph(graph G)
{
//int n = G->nodes; //city count
int i, j;
for(i = 0; i <= n-1; i++)
{
    for(j = 0; j <= n-1; j++)
    {
        if(i!=j)
        {
            G.graphMap[std::make_pair(i,j)] = (rand()%10)+1;
            //cout<<G.graphMap[std::make_pair(i,j)]<<"\n";
        }

        else
        {
            G.graphMap[std::make_pair(i,j)] = 0;
        }

    }
}
}

int main(int argc, char** argv) 
{
graph g;
g.nodes = 4;

directed_Graph(g);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:30:57.400

具有相同签名的不同函数仍然具有相同的类型。即使函数完全不相关，您也可以通过使用`void *`（类型擦除）拥有一棵存储随机数据的树，然后在到达叶节点后类型转换回已知的实际类型。

```
struct node {
    void (*fptr)(); // pointer to any function taking no args, no return
    void *data; // pointer to anything, need to cast before using
};

void f() { std::cout << "hello"; }
void g() { std::cout << "world"; }

node a = { f, f };
node b = { g, g };

a.fptr();
static_cast< void (*)() >( b.data )(); 
```

您还可以使用具有继承的虚方法，并在树中存储指向基类类型的指针。这取决于节点到底是什么。

这些都与它进入图表的事实无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:15:19.680

从您的图表看起来，您似乎想要一棵树，其中节点可以有两个以上的孩子。如果是这种情况，那么 STL 容器将无法为您工作。它们是自平衡二叉树。

如果你对二叉树没问题，那么有几种方法可以做到这一点。首先是编写函数，然后将函数指针或函子存储在树中。

```
#include <set>

int foo( ) {
  return 5;
}

std::set< int (*)( ) > my_set;
my_set.insert( &foo ); 
```

这种方法的问题是所有函数都必须具有相同的类型，即采用相同的参数并具有相同的返回类型。更重要的是，虽然它们可以定义不同的行为，但它们不能保持状态，即不能将数据存储在函数指针中。

正如您所提到的，第二个选项是编写类。如果您需要改变节点的行为，那么最好的方法是定义一个接口并使用多态性。

```
#include <set>
#include <iostream>

struct base {
  virtual void print( ) const = 0;
};

struct derived1 : public base {
  void print( ) const { std::cout << "derived1" << std::endl; }
};

struct derived2 : public base {
  void print( ) const { std::cout << "derived2" << std::endl; }
};

std::set< base* > my_set;

my_set.insert( new derived1( ));
my_set.insert( new derived2( )); 
```

您没有说是否需要强制某些行为是叶子，而其他行为是内部节点，或者是否需要以特定方式对节点进行排序，但是如果您这样做了，那么您可以通过创建自定义来完成此操作小于函数：

```
bool operator < ( base const * const b1, base const * const b2 ) {
  // Figure out which is less here.
} 
```

同样，如果您需要不是二叉树的东西，那么您就不走运了。并且，无论是函数还是类，您都需要编写一些代码来实现存储在每个节点中的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-02T12:54:08.647

如果树的深度有限，可以这样描述它：

```
typedef std::map<std::string, double> action_map_t;
typedef std::map<std::string, action_map_t> objid_map_t;
typedef std::map<std::string, objid_map_t> objtype_map_t; 
```

//....等这里是深度== 3

```
objtype_map_t m_mapTooltipDuration;
m_mapTooltipDuration[objtype][objid][action] = atof(duration.c_str()); 
```

# javascript - 如何使用javascript拖放触摸屏的div

> ID：10672826
> 
> 赞同：0
> 
> 时间：2012-05-20T10:59:05.993
> 
> 标签：javascript, drag-and-drop, touch

如何使用javascript拖放触摸屏的div（不是iphone或ipad。它拥有像IE6这样的传统浏览器但手指操作）？</p>

在那个设备上，手指==鼠标？

我在传统页面上使用了 onmousedown/onmousemove，但它仍然可以在那个触摸屏上工作吗？

该代码仍然可以正常工作？如果不能，如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:49:03.380

拖放没有特殊的js事件。
您现有的使用鼠标拖放的代码可能会起作用（可能有一些怪癖）。
这完全取决于您的触摸屏显示器将人类触摸转换为鼠标事件的能力。

# dwm - dwm 的放置脚本

> ID：10672827
> 
> 赞同：0
> 
> 时间：2012-05-20T10:59:13.320
> 
> 标签：dwm, window-managers

`dwm``dmenu`在（顶部的栏）上提到了不同的屏幕`1` `2` `3` `4`...我想编写一个脚本，例如打开 application `A`on screen`1`和 application `B`and `C`on screen `2`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:28:58.483

[http://dwm.suckless.org/customisation/rules](http://dwm.suckless.org/customisation/rules)有一些可能有用的例子。

# c - 如何将信号传递给子进程

> ID：10672829
> 
> 赞同：0
> 
> 时间：2012-05-20T10:59:27.320
> 
> 标签：c, shell, io

标题可能有点混乱，所以让我解释一下。我正在尝试编写一个简单的 shell 来练习我的编程。我已经让 get a command、fork、exec 循环工作了。`CTRL-C`但是，当我在子进程仍在执行时按下时，我的 shell 终止，而不是子进程（但子进程将继续运行）。这是主要功能：

```
int main()
{
    dynarray *args; /* pointer to a dynamic array */
    int bytes_read;
    size_t nbytes = 0;
    char *command;
    pid_t pid;
    printf("Enter command: ");
    while ((bytes_read = getline(&command, &nbytes, stdin)) != -1) {
        if (bytes_read == -1) {
            perror("getline");
            exit(EXIT_FAILURE);
        }
        pid = fork();
        if (pid == -1) {
            perror("fork");
            exit(EXIT_FAILURE);
        }
        else if (pid == 0) { /* child process */
            args = newdynarray();
            char *arg = strtok(command, " \n");
            while (arg != NULL) {
                addstring(args, arg);
                arg = strtok(NULL, " \n");
            }
            if (args->nval == 0) {
                freedynarray(args);
                continue;
            }

            addstring(args, NULL);
            char *fullpath = find_executable(args->strings[0]);
            if (fullpath == NULL) {
                fprintf(stderr, "Couldn't find executable: %s\n", command);
                exit(EXIT_FAILURE);
            }
            if (execv(fullpath, args->strings) == -1) {
                perror("execv");
                exit(EXIT_FAILURE);
            }
        } else {
            int status;
            waitpid(pid, &status, 0);
        }
        printf("Enter command: ");
    } 
    return 0;
} 
```

我没有包括其他部分，因为我认为它们不相关。如何让我的子进程捕获来自 stdin 的所有输入，直到它终止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:10:17.847

`SIGINT`您可以在父进程中注册一个信号处理程序，并在其中用于`kill(2)`向子进程发送信号，您应该将其 PID 存储在某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:11:44.260

`How can I make my child process catch all the input from stdin until it terminates?`从标准输入键（例如控制 C）生成的信号将被发送到最后一个进程以使用标准输入，因此除非您可以强制您的孩子使用路径，否则您无能为力。

相反，您需要在 shell 进程中创建一个信号处理程序来捕获 SIGINT（和其他），并将信号（使用该`kill()`函数）重新发送到您想要接收它的进程。

# c++ - 有人能告诉我为什么从我的链接列表中打印垃圾吗？

> ID：10672832
> 
> 赞同：-1
> 
> 时间：2012-05-20T10:59:58.747
> 
> 标签：c++, linked-list

所以我正在为学校做这个项目。我有一切工作。我首先构建了链表，在代码中你可以看到它把一切都很好并打印出来。当我尝试使用菜单将项目插入列表时，它似乎可以工作。我已经打印了几份，看看发生了什么。当我打印列表时，只有菜单估算的项目损坏了。

我查看了几篇表明相同问题的帖子，但我看不出问题可能在我的代码中的哪个位置。

你们可以看看这些功能，看看我是否做错了什么。据我所知，这一切似乎都有效，但输出中充满了垃圾。感谢您的帮助这里是项目的代码

单词.h

```
class Word
{

public:
    void SetEnglish(char *word);
    char *GetEnglish();
    void SetFinnish(char *word);
    char *GetFinnish();
    void SetPrev(Word *word);
    Word *GetPrev();
    void SetNext(Word *word);
    Word *GetNext();

private:
    char *English;
    char *Finnish;
    Word *prev;          //pointer to previous node 
    Word *next;          //pointer to next node 

};

class dlist
{
public:

    Word *front;       //pointer to front of list   
    Word *back;        //pointer to back of list  

dlist()
{
    front=NULL;
    back=NULL;
}

void insertFront(char *Eng, char *Fin);             
int insertBack(char *Eng, char *Fin);
void insertBefore(char *Eng, char *Fin, Word *nodeB);
void insertAfter(char *Eng, char *Fin, Word *nodeA);
void printDListFront();

}; 
```

单词.cpp

```
#include <iostream>
#include "Word.h"

#define Word_OK (0)

using namespace std;

//sets the English word
void Word::SetEnglish(char *Eng)
{
    English = Eng;
}

//gets the English word
char *Word::GetEnglish()
{
    return English;
}

//sets the Finnish word
void Word::SetFinnish(char *Fin)
{
    Finnish = Fin;
}

//gets the Finnish word
char *Word::GetFinnish()
{
    return Finnish;
}

//sets the previous node
void Word::SetPrev(Word *node)
{
    prev = node;
}

//gets the previous node
Word *Word::GetPrev()
{
    return prev;
}

//sets the next node
void Word::SetNext(Word *node)
{
    next = node;
}

//gets the next node
Word *Word::GetNext()
{
    return next;
}

//insert a node after the last node 
int dlist::insertBack (char *Eng, char *Fin)
{          
    cout << "English: " << Eng << " " << "Finnish :" << Fin << "\n";
    if(this->back==NULL)
    {
        cout<<"insert at back";
        insertFront(Eng, Fin);
    }
    else
    {
        cout<<"insert at back";
        insertAfter(Eng, Fin, this->back  );
    }

    return Word_OK;
}

//insert a node before the front node 
void dlist::insertFront (char *Eng, char *Fin)
    {
    Word *newNode;
    if(this->front==NULL)
    {
        newNode=new Word();
        this->front=newNode;
        this->back =newNode;
        newNode->SetPrev(NULL);
        newNode->SetNext(NULL);
        newNode->SetEnglish(Eng);
        newNode->SetFinnish(Fin);
    }
    else
    {
        insertBefore(Eng, Fin, this->front );
    }
}

//insert a node after  nodeB
void dlist::insertAfter(char *Eng, char *Fin, Word *nodeB)
{
    cout << "\nEnglish1: " << Eng << " " << "Finnish1: " << Fin << "\n";
    Word *newNode;
    newNode=new Word();
    newNode->SetNext(nodeB->GetNext()) ;
    newNode->SetPrev(nodeB);
    newNode->SetEnglish(Eng);
    newNode->SetFinnish(Fin);

    if(nodeB->GetNext()==NULL)
    {
        cout<<"\n "<< endl;
        this->back =newNode; 
    }
    nodeB->SetNext(newNode);
    cout<<"2"<<endl;
}

//insert a node before nodeB
void dlist::insertBefore(char *Eng, char *Fin, Word *nodeB)    
{
    Word *newNode;
    newNode=new Word();
    newNode->SetPrev(nodeB->GetPrev());
    newNode->SetNext(nodeB);
    newNode->SetEnglish(Eng); 
    newNode->SetFinnish(Fin); 
    if(nodeB->GetPrev()==NULL)
    {
        this->front=newNode; 
    }
    nodeB->SetPrev(newNode);

}

//Print the list from front 
void dlist::printDListFront()
{
    Word* curr2;
    curr2= this->front;
    cout<<"\n------------------------\n";
    cout<<"Words in the Dictionary: \n";
    cout<<"------------------------\n";

    while(curr2!=NULL)
    {
        cout<<curr2->GetEnglish();
        cout<<" "<< curr2->GetFinnish()<<"\n";
        curr2=curr2->GetNext();
    }
    cout<<endl;
}// print the Double Linked List from front 
```

主文件

```
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <string.h>
#include "menu.h"
#include "Word.h"

using namespace std;

#define Word_OK (0)
#define Word_Not_Found (-1)
#define Word_already_Exist (-2)
#define Word_too_big (-3)
#define Dictionary_empty (-4)
#define File_error (-5)
#define Memory_error (-6)
#define Word_Unknown_Error (-20)
#define Buffer (200)
#define Max_len (30)
#define FILE_NAME "dictionary.txt"

/* Search the word in the list and print it if found. 
   return an error code if not found or the dictionary is empty. */
int SearchWord();
/* Add a word in the list from user input.
   return an error code if the word already exist or if input is too long. */
int InsertWord(dlist *w);
/* Function used by InsertWord() and InitDictionary() to insert a new word in 
   the list at right position (order alphabetically by english word).
   return an error code if there is a memory allocation problem. */
int chainWord(char *en, char *fi, Word *w);
/* Remove a word from the list.
   return an error code if word not found. */
int DeleteWord();
/* Show all the words in the dictionary. This was first a debug function; but
   since it works, I kept it. Considere that as an extra feature.
   return an error code if the dictionnary is empty. */
int ShowAllWord(dlist *list);
/* Print error if something goes wrong. */
void PrintError(int aErrorCode);
/* Read the saved words from the file and load it to the dictionary.
   return an error code if it don't manage to open the file. */
int InitDictionary(dlist *list);
/* Save the words in the file and clean the memory before leaving the program.
   return an error code if there is a problem with the file. */
int ExitDictionary();
int putDictionary(Word *w);

void putword(dlist *st)
{
    char eng[30], fin[30];
    cout << "English word: " ;
    cin >> eng;
    cout << "Finnish word: ";
    cin >> fin;
    st->insertBack(eng, fin);
}

void main()
{
    char eng[30], fin[30];

    dlist *st ;
    st= new dlist();
    cout << "English word: " ;
    cin >> eng;
    cout << "Finnish word: ";
    cin >> fin;
    st->insertBack(eng, fin); 
    st->insertBack("hello", "hei"); 
    st->insertBack("we", "me"); 
    st->insertBack("they", "he"); 
    st->insertBack("truck", "rekka") ;
    st->printDListFront ();

    Menu m;
    m.PrintHeader();
    m.PrintMenu();
    //PrintError(InitDictionary(st));
    int errorcode = 0;
    char c;
    cout << "Choose option: ";
    cin >> c;
    fflush(stdin); //I want one option at the time, so flush the end of line
    while(c != 'e' && c != 'E'){
        switch(c){
            case 's':
            case 'S':
               //  errorcode = SearchWord();
                 break;
            case 'i':
            case 'I':
                  putword(st);
                 break;
            case 'd':
            case 'D':
               //  errorcode = DeleteWord();
                 break;
            case 'a':
            case 'A':
               errorcode = ShowAllWord(st);
                 break;
            default:
                 system("cls");
                 m.PrintMenu();
        }
        PrintError(errorcode);
        cout << "Choose option: ";
        cin >> c;
        fflush(stdin);
    }
    //PrintError(ExitDictionary());

    system("pause");
}

int InsertWord(dlist *list)
{
    char eng[30], fin[30];

    cout << "English word: " ;
    cin >> eng;
    cout << "Finnish word: ";
    cin >> fin;

    int res = list->insertBack(eng, fin);

    return res;
}

int ShowAllWord(dlist *list)
{
    list->printDListFront ();
    return 0;
}

void PrintError(int aErrorCode){
     switch(aErrorCode){
         case Word_OK:
            break;
         case Word_Not_Found:
            cout << "Word not found!" << endl;
            break;
         case Word_already_Exist:
            cout << "The word already exist!" << endl;
            break;
         case Word_too_big:
            cout << "The word is too big!" << endl;
            break;
         case Dictionary_empty:
            cout << "Dictionary is empty!" << endl;
            break;
         case File_error:
            cout << "Error with file!" << endl;
            break;
         case Memory_error:
            cout << "Memory allocation problem!" << endl;
            break;
         case Word_Unknown_Error:
         default:
            cout << "Oppps Unknown Error!" << endl;
            break;
     }                       
} 
```

菜单.h

```
#ifndef _MENU_H_
#define _MENU_H_

//this class was created as an exercise and also to reduce the size of code of
//the main.
class Menu{
    public:
       /*print the information about the program and the author.*/
       void PrintHeader();
       /*print the options for the user.*/
       void PrintMenu();
};

#endif 
```

菜单.cpp

```
#include <iostream>
#include "menu.h"

using namespace std;
/* Implementation of the menu class. */
void Menu::PrintHeader(){
     cout << "*************************************" << endl
          << "****      Dictionary             ****" << endl
          << "****      By Your Name and ID    ****" << endl;
}

void Menu::PrintMenu(){
     cout << "*************************************" << endl
          << "***             MENU              ***" << endl
          << "*************************************" << endl
          << "S - Search"         << endl
          << "I - Insert"         << endl
          << "D - Delete"         << endl
          << "A - Show all words" << endl
          << "E - Exit"           << endl
          << "  - Any other key to clear the screen" << endl
          << "*************************************" << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:08:56.280

```
char eng[30], fin[30];

cout << "English word: " ;
cin >> eng;
cout << "Finnish word: ";
cin >> fin;

int res = list->insertBack(eng, fin); 
```

您使用本地数组作为 insertBack 参数，并且 Word 类也保存指向它们的指针。一旦函数终止，它们就会超出范围，之后的值可能是任何值。您应该在 Word 类中存储的是字符串的**副本**，在它自己的存储中（动态或静态）。

# backbone.js - Chrome 扩展将主干.js 集合转换为常规 JavaScript 数组

> ID：10672838
> 
> 赞同：0
> 
> 时间：2012-05-20T11:00:56.643
> 
> 标签：backbone.js, google-chrome-extension, backbone.js-collections

在我的后台脚本中：

```
var collection = Backbone.Collection.extend({});

chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
  sendResponse(new collection());
} 
```

在我的 browser_action 的 javascript 中：

```
chrome.tabs.getSelected(null, function(tab) {
  chrome.extension.sendRequest({
    action: "someAction",
    tab: tab 
  },  
  function(collection) {
    // collection is now a JS array, rather than Backbone.Collection
  }); 
}); 
```

正如上面评论中提到的，sendRequest 回调中的“collection”参数原来是一个常规的 JS 数组，而不是 Backbone.Collection。

这是铬采取的消毒人工制品/安全措施吗？有没有办法通过 sendRequest 传递 Backbone.Collection？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:18:38.200

从[`onRequest`文档](http://code.google.com/chrome/extensions/extension.html#event-onRequest)中它说参数 to`sendResponse`应该是 JSON-ifiable 对象，所以我假设`toJSON`正在调用 Collection 的方法，只留下数据。

如果您在目标脚本中有 Collection 定义，您可以使用相同的数据实例化一个新对象。

# c# - 正则表达式重复模式

> ID：10672840
> 
> 赞同：0
> 
> 时间：2012-05-20T11:01:14.910
> 
> 标签：c#, regex, split

假设你有一个`string`：

```
string s = "GameObject.Find(\"obj\").GetComponent(\"comp\").GetMethod(\"method\").Get..."; 
```

`string`可以附加任意数量的方法`GetX()`。

而且您需要在没有“。”的情况下分隔每个方法。分隔器。虽然，`GameObject.Find`可以保留`(dot)`。

到目前为止，这是我的代码：

```
Match match = Regex.Match(s, "(.+?\\(\".+?\"\\))(?:\\.??)*"); 
```

这只会产生一组。这个问题的正确解决方案是什么？

**编辑**：

更新为非捕获组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:06:16.473

首先，我建议使用逐字字符串文字在 C# 中编写正则表达式。这减少了您需要编写的反斜杠的数量。

```
 @"(.+?\("".+?""\)\.??)*" 
```

要获取所有捕获，请检查[`Match.Captures`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.group.captures)。

在线查看它：[ideone](http://ideone.com/MJm4R)

# css - 使用带有 24 列网格系统的骨架

> ID：10672842
> 
> 赞同：1
> 
> 时间：2012-05-20T11:01:16.877
> 
> 标签：css, grid, responsive-design, 960.gs, skeleton-css-boilerplate

我有一个用 960gs 和 24 列构建的网站的 Photoshop 模型。我还希望它能够响应骨架样板[http://www.getskeleton.com/](http://www.getskeleton.com/)

由于我的设计是基于 24 列的并且骨架支持 16 列，有没有办法让骨架与 24 列一起工作？

谢谢！马尔切罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T14:20:33.387

在这里试试这个：

[https://github.com/dhgamache/Skeleton/pull/103/files](https://github.com/dhgamache/Skeleton/pull/103/files)

我已经在一个项目中使用过它，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T07:23:34.380

你也可以试试这个： http: [//factifv3.factiftest.nl/cheatsheet.php](http://factifv3.factiftest.nl/cheatsheet.php)这是一个扩展至 1440 像素的变体。css 是用 sass 制作的，并从[https://github.com/dhgamache/Skeleton/pull/103/files](https://github.com/dhgamache/Skeleton/pull/103/files)扩展了代码。

# sql - 我有一个 sqlite 语法错误。什么是不正确的？

> ID：10672844
> 
> 赞同：0
> 
> 时间：2012-05-20T11:01:43.997
> 
> 标签：sql, ios, sqlite

我有一个 sqlite 语法错误。什么是不正确的？

我的代码：

```
+ (void)insertUpdateCatalogTime:(NSString *)time
{
 NSLog(@"%@", time);
 sqlite3 *database; 
 if(sqlite3_open([DatabaseManager databasePath], &database) == SQLITE_OK) 
 {
    const char *sqlStatement = [[NSString stringWithFormat:@"UPDATE t_catalog SET updateTime=%@", time] cStringUsingEncoding:NSASCIIStringEncoding];
    sqlite3_stmt *compiledStatement;
    if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) 
    {
        while(sqlite3_step(compiledStatement) == SQLITE_ROW);
    } 
    else 
    {
        NSLog(@"sqlite3_prepare_v2 error %s", sqlite3_errmsg(database));
    }       
    sqlite3_finalize(compiledStatement);
 } 
 else 
 { 
    NSLog(@"sqlite3_open error");
 }  
 sqlite3_close(database);
} 
```

并记录：

```
 2012-05-10 14:23:04
 sqlite3_prepare_v2 error near "14": syntax error 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T11:29:00.643

您是否尝试用单引号包裹 updateTime？

```
const char *sqlStatement = [[NSString stringWithFormat:@"UPDATE t_catalog SET updateTime='%@'", time] cStringUsingEncoding:NSASCIIStringEncoding]; 
```

# c# - 检测不正确的文件类型

> ID：10672854
> 
> 赞同：0
> 
> 时间：2012-05-20T11:02:38.987
> 
> 标签：c#, .net, asp.net-mvc-3, file

我的应用程序允许用户上传 jpeg/png 文件。我必须检测扩展名已更改的文件。例如：如果有人使用 example.txt 文件并将其名称更改为 example.jpg，因此通过 javascript 检查此文件是不够的，需要服务器解决方案。我怎么能这样做？有人可以显示代码示例吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T11:04:47.753

大多数情况下，您可以在文件开头使用魔术字节来执行此操作。有关不同文件类型的这些数字的列表，请参阅此链接：[http ://www.astro.keele.ac.uk/oldusers/rno/Computing/File_magic.html](http://www.astro.keele.ac.uk/oldusers/rno/Computing/File_magic.html)

例如，JPEG 文件以 . 开头`ff d8 ff e0`，而 png 文件以`89 50 4e 47`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T11:08:52.817

对于您的应用程序（考虑帖子），格式不正确的文件是一种*特殊*情况。因此，我会考虑*尝试*加载*声明*格式的图像的简单`try/catch`块。如果出现异常（例如）=> 通知用户，则该文件似乎格式不正确。

# iphone - 通过 UINavigationController 将 int 变量传递给 UITableView

> ID：10672856
> 
> 赞同：0
> 
> 时间：2012-05-20T11:02:54.317
> 
> 标签：iphone, objective-c, ios, ipad

我正在尝试通过 UINavigationController 将 int 变量传递给 UITableView（我使用的是 xcode 4.3）所以我创建了 2 个类（PartsTableViewController 是“UITableViewController”，PartsNavController 是“UINavigationController”），我想从我的当前传递变量类到 PartsTableViewController ，然后使用包含标题栏的导航控制器打开该表，因此我在当前类中编写了以下代码：

```
PartsNavController *partsNav = [self.storyboard instantiateViewControllerWithIdentifier:@"partsNav"];  
partsNav.groupId = myGroupp.bg_id;
[self presentModalViewController:partsNav animated:YES]; 
```

在我在 viewDidLoad 中编写的 PartsNavController 类中：

```
PartsTableViewController *parts = [self.storyboard instantiateViewControllerWithIdentifier:@"Parts"];
parts.groupId = groupId;
[parts.tableView reloadData]; 
```

在 PartsTableViewController 我在 viewDidLoad 中写道：

```
NSLog(@"This is group: %d", groupId); 
```

但是在运行时，它会生成 2 次输出，

```
This is group:1
This is group:0 
```

第一次是我发送的值，第二次是 0 ，我只想要我发送的值，而不是 0 我怎样才能防止这种情况并获得我发送的值？？？？

![在此处输入图像描述](../Images/b252e6320931ab4966c775f93aa70a67.png)

我想在不使用 segue 的情况下从 (MaktabatyTableViewController) 传递到 (PartsTableViewController)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T11:41:55.313

做你想做的更好的方法是在现有的 UINavigationController 中推送第二个 TableViewController。最简单的方法是在 StoryBoard 中创建 NavContr，而不是在 TableViews 中创建，并将其单元格与带有 segue 的前导视图控制器连接起来。而不是使用下面的方法：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    UIViewController *destViewController = segue.destinationViewController;
    destViewController.integerValue = value;
} 
```

![在此处输入图像描述](../Images/995a99d1f2fc1b0ccebace7fdfc3b4d5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:47:27.703

> 我想在不使用 segue 的情况下从 (MaktabatyTableViewController) 传递到 (PartsTableViewController)

您可以选择（至少）两种策略：

1.  **直接通信：**人们经常问如何在两个对象之间进行通信，它几乎总是归结为一个对象引用另一个对象（有时反之亦然）。要向对象发送消息，您需要一个指向该对象的指针；如果你有指针，那么如何沟通就没有什么神秘的了。用这些术语来思考它可以帮助您以不同的方式思考这个问题：而不是直接的“我如何向该对象发送消息？” 相反，您可以专注于两个对象之间的关系。每一个是如何创建的？其中一个对象是另一个对象的父对象吗？是否有一些可以提供指针的通用父对象？*如果有的话，这些对象应该*如何关联？

2.  **间接通信：**有时不是让两个对象直接通信，而是通过一些中间对象路由通信更合适。例如，您`MaktabatyTableViewController`可能会向其委托人发送一条消息，然后委托人可以将信息传递给`PartsTableViewController`. 一个更通用的解决方案是使用通知：`MaktabatyTableViewController`可以发布一个`PartsTableViewController`监听的通知。这种情况下的中间对象是通知中心。无论哪种方式，间接通信的好处是两个对象都不必知道另一个对象。这减少了两个类之间的耦合，并使它们更加灵活和可重用。

从我在您的问题中可以看到，我建议使用通知。

# nlp - 自然文本的机器表示

> ID：10672858
> 
> 赞同：1
> 
> 时间：2012-05-20T11:03:08.420
> 
> 标签：nlp

我目前正在研究自然文本的高级机器表示。例如，“我有一只狗，但我把它给了没有任何狗的丹尼”将是

```
I.have.dog =1
I.have.dog -=1
Danny.have.dog = 0
Danny.have.dog +=1 
```

像这样的东西......

我正在尝试查找资源，但无法真正找到匹配的主题。这种类型的研究是否有有效的主题名称？任何资源库？自然逻辑听起来像是相关的东西，但它并不是我正在研究的东西。请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T11:15:18.863

表示自然语言的意义是**[计算语义学](https://en.wikipedia.org/wiki/Computational_semantics)**的领域。在该领域内，已经开发了许多框架，尽管基本的框架仍然是一阶逻辑。

具体来说，您的问题似乎是识别**话语语义**的问题，它处理语言使用带来的信息变化。这几乎是一个开放的研究领域，所以期望找到很多研究论文和博士职位，但很少有易于使用的软件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:16:43.510

正如 larsmans 已经说过的，这几乎是一个非常开放的研究领域，称为计算语义学（计算语言学的一个子领域）。

在开始使用 comp-sem 之前，您需要了解一件重要的事情：那里的大多数人都使用花哨的高级语言。我所说的高级不是指 C，而是更像 LISP、Prolog 或最近的 Haskell 之类的东西。计算语义非常接近*逻辑*，这就是为什么研究该主题的人更喜欢函数式和逻辑语言的原因——他们更接近于他们整天实际使用的语言。

首先看一些谓词逻辑的基础课程对您也非常有用，因为这是基础文献通常认为理所当然的。[LTF Gamut — Logic, Language, and Meaning, volume I](https://rads.stackoverflow.com/amzn/click/com/0226280853)很好地介绍了逻辑和语言之间的联系。这涉及*语义的**语言*方面，它不会帮助您*实现*任何东西，但它*会*帮助您*理解*以下文献。也就是说，至少有一些书会解释谓词逻辑，但如果你问我，任何人真正*感兴趣******在将语言表示为一种形式系统时，应该学习谓词以及可能的直觉主义和内涵逻辑的课程。*****

 ***为了让您稍微了解一下，对于当前的 comp-sem 方法，您的示例相当难以处理。并非不可能，但难度已经相当高了。使它变得困难的是一个部分的时态（处理时态和方面通常会使您进入甚至语义，）而且您必须以适用于本示例的方式定义**给予**和**拥有**关系。（一个更简单的例子是，说“我**有** 一条狗，但我把它给了没有狗的丹尼。”你明白为什么吗？）

让我们翻译“我有一条狗”。

```
∃x[dog(x) ∧ have(I,x)] 
```

（有一个对象 x，使得 x 是一条狗，并且“I”和 x 之间存在有关系。）

然后将根据*模型*评估这些句子，其中可能已经定义了“I”常数。通过按顺序评估多个句子，您可以更改该模型，以便它跟踪对话。

让我们给你一些建议，让你开始吧。经典的 comp-sem 系统是 [SHRDLU](http://hci.stanford.edu/winograd/shrdlu/)，它将某种颜色的几何图形放置在虚拟环境中。您可以使用它，因为在我链接到的那个页面上有一个与 Windows 兼容的在线演示。

关于该主题的最佳现代书籍可能是[Blackburn 和 Bos (2005)](http://homepages.inf.ed.ac.uk/jbos/comsem/)。它是用 Prolog 编写的，但是页面上链接了一些资源来学习 Prolog（[现在](http://www.learnprolognow.org/)！）

[Van Eijck 和 Unger](http://www.cambridge.org/gb/knowledge/isbn/item5645253/?site_locale=en_GB)在 Haskell 中提供了一个关于计算语义的很好的课程，这是一个较新的课程，但在我看来，就原始计算语义而言，它不像 Blackburn 和 Bos 那样具有教育意义。***

# javascript - CSS 和 HTML 框在顶部最小但不按顺序排列

> ID：10672871
> 
> 赞同：3
> 
> 时间：2012-05-20T11:05:27.363
> 
> 标签：javascript, html, css

是的，这有点难以解释，但我所追求的是如下：

我有一个将进入 HTML 页面的帖子数据库。显然，所有这些帖子的大小都会不同，因此包含它们的盒子也会有不同的大小。

我所追求的是一种使这些盒子看起来都很好地相互配合的方法，如下图所示。如果第一个帖子是一个小帖子，那么它将开始一行小框。而且它们也不一定都具有相同的高度。在图片中，每个帖子都被编号以显示它在帖子数组中的位置。

请参阅我在这里制作的插图：

![在此处输入图像描述](../Images/a05316a36cabb9fbc2a6e3f3b5e572b7.png)

这可能吗？我假设我可能需要一些 Javascript，而 JQuery 更可取。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T11:41:45.160

由于您愿意使用 Javascript 解决方案，我发现[jQuery Masonry](http://masonry.desandro.com/)插件非常适合“最适合”不同形状的矩形。

您使用以下标记进行设置：

```
<div id="container">
  <div class="item">...</div>
  <div class="item">...</div>
  <div class="item">...</div>
  ...
</div> 
```

然后，`float: left`您将`.item`s，并将 Masonry 处理程序附加到`#container`：

```
$(function(){
  $('#container').masonry({
    // options
    itemSelector : '.item',
    ...
  });
}); 
```

如果您还没有使用 jQuery，还有一个[非 jQuery 版本](http://vanilla-masonry.desandro.com/)

# php - SQL SELECT查询导致不同的列错误

> ID：10672873
> 
> 赞同：3
> 
> 时间：2012-05-20T11:05:52.083
> 
> 标签：php, mysql, html, sql

我正在尝试整理我网站的邮件垃圾部分，这很麻烦，我之前的查询有问题，终于让它工作了，但现在分页也造成了麻烦，我收到了这个错误

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in C:\xampp\htdocs\Arken\pagination\function.php on line 9
SELECT COUNT(*) as `num` FROM user_inbox WHERE user_inbox.receiver_user_id='4' AND user_inbox.mail_deleted ='1' UNION SELECT * FROM user_outbox WHERE user_outbox.sender_user_id='4' AND user_outbox.mail_deleted ='1'

The used SELECT statements have a different number of columns 
```

第 9 行周围的代码如下所示

```
$query = "SELECT COUNT(*) as `num` FROM {$query}";
        $row = mysql_fetch_array(mysql_query($query)) or die($query."<br/><br/>".mysql_error());;
        $total = $row['num']; 
```

9号线是这`mysql_fetch_array`条线

我的 user_inbox 表看起来像这样

```
+------------+---------------+------+-----+----------+
| Field             | Type          | Extra          |
+------------+---------------+------+-----+----------+
| message_id        | int(11)       | auto_increment |
| receiver_user_id  | int(11)                        |
| receiver_username | varchar(255)                   |
| sender_user_id    | int(11)                        |
| sender_username   | varchar(255)                   |
| mail_subject      | varchar(255)                   |
| mail_message      | text                           |
| mail_date_sent    | datetime                       |
| mail_viewed       | enum('0','1')                  |
| mail_deleted      | enum('0','1')                  |
+------------+---------------+------+-----+----------+ 
```

我的 user_outbox 表看起来像这样

```
+------------+---------------+------+-----+----------+
| Field             | Type          | Extra          |
+------------+---------------+------+-----+----------+
| message_id        | int(11)       | auto_increment |
| sender_user_id    | int(11)                        |
| sender_username   | varchar(255)                   |
| receiver_user_id  | int(11)                        |
| receiver_username | varchar(255)                   |
| mail_subject      | varchar(255)                   |
| mail_message      | text                           |
| mail_date_sent    | datetime                       |
| mail_viewed       | enum('0','1')                  |
| mail_deleted      | enum('0','1')                  |
+------------+---------------+------+-----+----------+ 
```

我真的很感谢你们能提供的任何帮助，尝试整理网站的这一部分已经将近 2 天了，我需要完成它。感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T11:09:34.087

问题是您使用 UNION 返回不同数量的列。

```
SELECT COUNT(*) as `num` FROM user_inbox ...
UNION
SELECT * FROM user_outbox ... 
```

您可以让 MySQL 为您计算行数：

```
SELECT COUNT(*) AS `num`
FROM
(
     SELECT * FROM user_inbox ...
     UNION ALL
     SELECT * FROM user_outbox ...
) AS your_table_alias 
```

或者：

```
SELECT 
    (SELECT COUNT(*) FROM user_inbox ...) +
    (SELECT COUNT(*) FROM user_outbox ...) AS `num` 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T11:10:40.420

查询的第二部分（在 UNION 之后）也应该有 COUNT(*)。

```
SELECT COUNT(*) as `num` FROM user_inbox WHERE user_inbox.receiver_user_id='4' AND user_inbox.mail_deleted ='1' UNION SELECT COUNT(*)  FROM user_outbox WHERE user_outbox.sender_user_id='4' AND user_outbox.mail_deleted ='1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T11:11:48.093

您应该对查询“$query”进行更多研究。看起来您正在为 PHP（我认为）代码中的变量“$query”定义的查询中选择不同数量的列（至少错误说明了这一点）。

# spring - 我可以在服务层直接使用spring DataAccessException吗

> ID：10672879
> 
> 赞同：0
> 
> 时间：2012-05-20T11:07:07.387
> 
> 标签：spring, dao, service-layer

我可以直接在服务层使用 spring DataAccessException 吗？这是在服务层中传播框架工作类的良好实践/设计吗？

**或者**

我应该在 dao 层捕获 DataAccessException 并将其作为更通用的异常重新抛出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:10:18.110

我认为 DAO 层抛出该异常很好。服务层已经知道持久层，因此不会创建额外的依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T11:14:38.733

最好将 DataAccessException（从 DAO 层抛出）映射/包装到应用程序特定的异常层次结构（在服务层中），这样依赖/调用层就必须处理您的应用程序特定的异常类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:19:37.630

就个人而言，我在服务层捕获所有检查的异常并抛出我自己的 ServiceExceptions 用捕获的异常初始化它们。这样异常信息不会丢失，Controllers也不需要处理低级异常。但是在 DAO 层中没有必要这样做。

在“Effective Java”（J. Bloch）中有一个关于异常处理的非常好的一章，它和本书的其余部分一样值得阅读。第 61 条处理这个问题。

[http://books.google.de/books/about/Effective_Java.html?id=Ft8t0S4VjmwC](http://books.google.de/books/about/Effective_Java.html?id=Ft8t0S4VjmwC)

# selection - 为什么 Rangy 库不适用于 Opera 中的 contenteditable？

> ID：10672881
> 
> 赞同：0
> 
> 时间：2012-05-20T11:07:23.987
> 
> 标签：selection, opera, contenteditable, rangy

我在 contenteditable DIV 中使用流行的[Rangy 库。](http://code.google.com/p/rangy/)我的代码很简单：

```
var saved_selection = false;

$('#contenteditable').bind('keypress mouseup', function(e){
  $(this).find('.rangySelectionBoundary').remove();
  saved_selection = rangy.saveSelection();
});​ 
```

现在这在 Chrome 和 FF 中效果很好。然而，在 Opera 中，它的行为非常奇怪，因为它不允许在 contenteditable 中插入任何字符，而且它会失去焦点，或者至少看起来如此。

我已经准备好 jsFiddle 进行测试。在 Opera 中，无法在可编辑的 DIV 中输入任何字符：http: [//jsfiddle.net/twST6/1/](http://jsfiddle.net/twST6/1/)

任何人都可以解释和解决我的问题如何使这段代码在 Opera 中工作？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:12:56.233

有趣的。我认为问题在于在 Opera 中的按键事件期间更改 DOM 会阻止本机浏览器按键动作的发生（我想我以前见过）。除了避免在每次按键时保存选择之外，我看不到一个简单的方法。另一种解决方案是将选择保存为内容中的字符索引，这不会更改 DOM，因此应该可以工作。看到这个答案：

[https://stackoverflow.com/a/5596688/96100](https://stackoverflow.com/a/5596688/96100)

我也即将为 Rangy 发布更强大的基于字符索引的选择保存/恢复。在此处查看演示：

[http://rangy.googlecode.com/svn/trunk/demos/textrange.html](http://rangy.googlecode.com/svn/trunk/demos/textrange.html)

顺便说一句，Rangy 中有一个内置方法可以删除选择标记：

```
rangy.removeMarkers(saved_selection); 
```

# string - 如何用批处理计算字符串中的字符？

> ID：10672885
> 
> 赞同：0
> 
> 时间：2012-05-20T11:07:59.810
> 
> 标签：string, batch-file, character, counting

我需要批量计算输入字符串的字符数。我不想使用临时文件。没有他们能做到吗？如果是的话，您的代码的解释将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:51:28.417

一个简单的方法是使用一个函数

```
@echo off
set "myVar=abcdefg"
call :Stringlength result myVar
echo %result%
exit /b

:Stringlength <resultVar> <stringVar>
(   
    setlocal EnableDelayedExpansion
    set "s=!%~2!#"
    set "len=0"
    for %%P in (4096 2048 1024 512 256 128 64 32 16 8 4 2 1) do (
        if "!s:~%%P,1!" NEQ "" ( 
            set /a "len+=%%P"
            set "s=!s:~%%P!"
        )
    )
)
( 
    endlocal
    set "%~1=%len%"
    exit /b
) 
```

这可以测量字符串最大为 8192 个字符，因为字符串的最大大小为 8191 个字节，这应该足够了。
第一个括号块只是为了提高性能。
需要第二个块来返回`%len%`endlocal 屏障后面的值。
主要思想是二进制搜索，在第一个循环中`s`，测试字符串的临时复制是否超过 4096 字节。
然后下一个测试将使用 2048 或 6144 (=2048+4096)，因此`len`每个循环中的变量会更精确一些。
13 次循环后，len 是准确的。

对于更快的 strlen 函数，您可以阅读[strlen boosted](http://www.dostips.com/forum/viewtopic.php?t=1429)，它使用了更多技巧。

还有一个批处理宏的解决方案，宏通常比批处理中的函数快得多。

```
@echo off
call :loadMacros
set "myVar=abcdefg"
%$strlen%  result myVar
echo %result%
exit /b

:loadMacros
set LF=^

::Above 2 blank lines are required - do not remove
set ^"\n=^^^%LF%%LF%^%LF%%LF%^^"
:::: StrLen pResult pString
set $strLen=for /L %%n in (1 1 2) do if %%n==2 (%\n%
        for /F "tokens=1,2 delims=, " %%1 in ("!argv!") do (%\n%
            set "str=A!%%~2!"%\n%
              set "len=0"%\n%
              for /l %%A in (12,-1,0) do (%\n%
                set /a "len|=1<<%%A"%\n%
                for %%B in (!len!) do if "!str:~%%B,1!"=="" set /a "len&=~1<<%%A"%\n%
              )%\n%
              for %%v in (!len!) do endlocal^&if "%%~b" neq "" (set "%%~1=%%v") else echo %%v%\n%
        ) %\n%
) ELSE setlocal enableDelayedExpansion ^& set argv=,

exit /b 
```

在 dostips.com 上有一些关于宏技术的讨论
1 [Batch “宏” 带有参数](http://www.dostips.com/forum/viewtopic.php?p=7330)
2[带有附加参数的宏](http://www.dostips.com/forum/viewtopic.php?p=11344)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:48:37.693

当你调用函数时，第二个参数应该是一个值而不是一个引用：

```
call :Stringlength result %myVar% 
```

# jquery - 获取 div 相对于其他 div 的位置

> ID：10672886
> 
> 赞同：1
> 
> 时间：2012-05-20T11:08:14.710
> 
> 标签：jquery

我有 div 3 x 3 的网格

当我拖动一个项目并将其放下时，我想知道放置的 div 相对于所有其他 div 的位置。

我应该在每个 div 上设置一个 X,Y 值，并且当它被删除时访问被移动的 div 的 X,Y 值吗？

如[http://jsfiddle.net/adrianjsfiddlenetuser/8LQmE/](http://jsfiddle.net/adrianjsfiddlenetuser/8LQmE/)所示，我想获取 div 相对于其他 div 的 X、Y 位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:22:03.717

jQuery 有一个[.offset()](http://api.jquery.com/offset/)方法，它计算并返回给定元素相对于文档的像素坐标。

要获得一个元素相对于另一个元素的位置，请计算两个元素的位置差：

```
var d1 = $("#div1");
var d2 = $("#div2");
var p1 = d1.offset();
var p2 = d2.offset();
var rel = { left: p2.left-p1.left, top: p2.top-p1.top }; 
```

# android - Android - 我需要透明图片作为标题，还是图片上已有文字？

> ID：10672887
> 
> 赞同：0
> 
> 时间：2012-05-20T11:08:18.027
> 
> 标签：android, android-layout

我正在尝试为我的应用程序创建标题导航。我想摆脱按钮之间的空格，据我了解，我需要将图像设置为背景。

我的问题是图像是否应该包含文本，或者是透明的，我只是将文本放在该按钮布局中的文本字段旁边的按钮上？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:16:11.517

两种方式都可以，但我建议在图像上设置文本，这样可以节省空间并留出更多更改空间，以防您想更改不需要编辑图像的单词。

最重要的是，您让 android 自动缩放您的文本以适应屏幕尺寸（当然，如果您设置为 sp）

# javascript - 日期 选择 日 月 年

> ID：10672889
> 
> 赞同：0
> 
> 时间：2012-05-20T11:08:39.633
> 
> 标签：javascript, jquery, datepicker

[http://keith-wood.name/datepick.html](http://keith-wood.name/datepick.html)

但我唯一能看到的是获取整个时间天月的警报

```
$(function() {
    $('#popupDatepicker').datepick();
    $('#inlineDatepicker').datepick({onSelect: showDate});
});

function showDate(date) {
    alert('The date chosen is ' + date);
} 
```

我想知道如何让他们分开喜欢

```
<input type="text" name="date" id="popupDatepicker"> When i select date here the fields in the hidden will change below
<input type="hidden" name="day">
<input type="hidden" name="month">
<input type="hidden" name="year"> 
```

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:14:52.990

日期选择器的`onselect`处理程序的问题是使用您放在日期选择器上的任何格式将日期作为字符串传递。

您可以使用`$('#inlineDatepicker').datepicker('getDate')`来获取`Date`代表所选日期的实际对象。

您还可以使用[`$.datepicker.formatDate()`](http://docs.jquery.com/UI/Datepicker/formatDate)将该对象转换为其他字符串格式，或使用该`Date`对象自己的方法来提取数值。

# grails - Grails - 在编解码器类中访问静态配置对象

> ID：10672891
> 
> 赞同：1
> 
> 时间：2012-05-20T11:08:50.293
> 
> 标签：grails, grails-2.0

我目前正在更新我的 Grails 项目，以便不使用已弃用的 ConfigurationHolder 类。这在大多数情况下都很好，但是我在自定义编解码器类中遇到了麻烦，直到现在我一直在使用以下方法：

```
import org.codehaus.groovy.grails.commons.ConfigurationHolder as CH
class MyCodec {

    static boolean myStaticConfigProperty=CH.config.myStaticConfigProperty

    static encode = { something ->
       if(myStaticConfigProperty)
          ...
    }

} 
```

直接注入使用

```
def grailsApplication 
```

在这种情况下不起作用，因为这将作为非静态对象注入。

相反，我尝试使用这篇文章[getting-grails-2-0-0m1-config-info-in-domain-object-and-static-scope](https://stackoverflow.com/questions/6976983/getting-grails-2-0-0m1-config-info-in-domain-object-and-static-scope)中建议的方法，但即使在注入 grailsApplication 对象后我也无法使其工作在引导程序中进入我的编解码器元类：

```
class BootStrap {

   def grailsApplication

   def init = { servletContext ->
      for (cc in grailsApplication.codecClasses) {
         cc.clazz.metaClass.getGrailsApplication = { -> grailsApplication }
         cc.clazz.metaClass.static.getGrailsApplication = { -> grailsApplication }
      }      
   }
} 
```

任何人都可以提出一种方法，允许我在编解码器类中以静态方式访问配置对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T23:51:50.897

我建议像这样完全未经测试的代码：

```
class MyCodec {

    static def grailsConfig

    static boolean myStaticConfigProperty = grailsConfig.myStaticConfigProperty

    static encode = { something ->
       if(myStaticConfigProperty)
          ...
    }

}

class BootStrap {

   def grailsApplication

   def init = { servletContext ->
      for (cc in grailsApplication.codecClasses) {
         cc.grailsConfig = grailsApplication.config 
      }      
   }
} 
```

如果您的所有编解码器类只需要相同的一个配置属性，您可以完全跳过注入 grailsApplication 和/或配置对象，而只需从 BootStrap 设置一个静态属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T03:14:41.337

它在 grails 2.2.3 中对我有用

```
import grails.util.Holders as holders;

class MyFileCodec {
    static encode = {file ->
        def configPath= holders.grailsApplication.config.share.contextPath
        return "${configPath}/${file.name}"
    }
} 
```

[grails.util.Holders](http://grails.org/doc/2.0.1/api/grails/util/Holders.html)从 grails 2.0 开始引入，它是访问配置对象的方式。

# c#-4.0 - 交错 protobuf-net 和文件

> ID：10672895
> 
> 赞同：1
> 
> 时间：2012-05-20T11:09:10.217
> 
> 标签：c#-4.0, protobuf-net

我需要在计算机之间交换 protobuf-net 对象和文件，并试图找出最好的方法。A 有没有办法通知 B 后面的对象是 protobuf 或文件？或者，当一个文件被传输时，有没有办法知道文件已经结束并且后面的 Byte[] 是一个 protobuf？

使用 C# 4.0、Visual Studio 2010

谢谢，马尼什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:53:32.553

这与 protobuf 或文件无关，与您的通信协议有关，特别是“框架”。这意味着简单：您如何在单个流中划分子消息。例如，如果这是一个原始套接字，您可能会选择发送（全部）

*   一个简短的消息类型，可能是一个字节：01 表示文件，02 表示特定文件的 protobuf 消息
*   长度前缀（通常为 4 字节网络字节顺序）
*   有效载荷，由先前的字节数组成

然后冲洗并重复每条消息。

你没有说明你在问什么通讯，所以我可以更具体。

顺便说一句，另一种方法是将文件视为带有 byte[] 成员的 protobuf 消息 - 虽然主要适用于小文件

# c# - 如何从“第三方”库中的方法返回另一个值？

> ID：10672897
> 
> 赞同：0
> 
> 时间：2012-05-20T11:09:14.967
> 
> 标签：c#, task-parallel-library, parallel-extensions

```
Task<string>[] tableOfWebClientTasks = new Task<string>[taskCount];

for (int i = 0; i < taskCount; i++)
{
    tableOfWebClientTasks[i] = new WebClient().DownloadStringTask(allUrls[count - i - 1]);
}

Task.Factory.ContinueWhenAll(tableOfWebClientTasks, tasks =>
{
    Parallel.ForEach(tasks, task =>
    {
        //Here I have result from each task.
        //But information which url is executed on this task, is lost.
    });
}); 
```

例如，我可以创建类（具有两个公共属性，一个用于任务，第二个用于 url）并返回实例。但是这种方法我与其他方法联系在一起。

你有解决这个问题的办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:54:00.137

如果您希望能够将您的任务与创建它们的 url 相关联，您可以使用字典进行映射：

```
Task<string>[] tableOfWebClientTasks = new Task<string>[taskCount];
var taskIdToUrl = new Dictionary<int,string>();

for (int i = 0; i < taskCount; i++)
{
    var url = allUrls[count - i - 1];
    var task = new WebClient().DownloadStringTask(url);
    tableOfWebClientTasks[i] = task;
    taskIdToUrl.Add(task.Id, url);
}

TaskFactory.ContinueWhenAll(tableOfWebClientTasks, tasks =>
{
    Parallel.ForEach(tasks, task =>
    {
        // To get the url just do:
        var url = taskIdToUrl[task.Id];
    });
}); 
```

# scala - scala中的序列化（酸洗/编组）？

> ID：10672898
> 
> 赞同：1
> 
> 时间：2012-05-20T11:09:15.757
> 
> 标签：scala, serialization, documentation, marshalling, scala-pickling

Scala 中是否有序列化/酸洗/编组对象的示例、教程或文档？我知道[scala.util.Marshal](http://www.scala-lang.org/api/current/scala/util/Marshal%24.html)和[scala.reflect.internal.pickling](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/compiler/scala/reflect/internal/pickling/package.html)的存在，但是它们之间有什么区别？我该如何使用它？这是一些实验功能还是我可以在生产中使用它......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:31:44.577

您应该使用 java 序列化（对于复杂情况，我建议使用 Externalizable 方法）。[您可以通过谷歌搜索“java 序列化教程”](https://www.google.com/search?q=java%20serialization%20tutorial)找到很多教程。

如果你想留在 Scala，你应该看看使用可组合类型类的[SBinary 。](https://github.com/harrah/sbinary)该项目看起来陈旧且无人维护，但与 Scala 2.9.2 一起工作就像一个魅力。自述文件中有一个教程链接，我目前正在写另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:16:48.583

不确定您的要求，但值得一看 Google 的 Protocol Buffers 和 Apache Thrift。两者都提供了有效的序列化机制。

有一个 Protocol Buffers Scala 编译器[ScalaBuff](https://github.com/SandroGrzicic/ScalaBuff)

# java - FlagSort - 分而治之 - 小麻烦

> ID：10672901
> 
> 赞同：2
> 
> 时间：2012-05-20T11:09:43.610
> 
> 标签：java, sorting, recursion, stack-overflow, divide-and-conquer

实现一个特定的排序算法，我遇到了一个问题，即使谷歌不想帮助我......首先**是关于算法的一些话**：

最大的份额是将输入（数组）划分为三个部分：选择两个关键数字（红色和蓝色，断言红色 <= 蓝色），分区的元素将（1）小于两者，（2）在某处在和 (3) 之间大于两个枢轴。这是工作正常的部分！

对数组进行排序应该递归地进行：在对其分区进行分区之前使用任意枢轴对输入进行分区，从而以长度为 1 或 2 的粒子结束，这些粒子按 def 排序。或者说可以很容易地排序。

**现在的问题是**长度 >= 3 的分区由一个键值组成：如果再次分区，无论选择什么枢轴，之后所有元素都会放入同一个分区，最终导致堆栈溢出。**这就是为什么我认为你能够帮助我，**因为我确信有一个解决方案。

强制性 JavaCode 片段：分区 - 对德语调试感到抱歉，也懒得翻译它。IntTuple 只能容纳两个整数；没什么太荒谬的。

```
public static IntTuple partition(int[] E, int left, int right, int red, int blue){
    if (red > blue) {
        int v = red;
        red = blue;
        blue = v;
    }
    System.out.println("Partition Eingabe: " + Arrays.toString(E) + " Links=" + left + " Rechts=" + right + " Rot=" + red + " Blau=" + blue);
    /*
     * Es gilt r <= b, also gilt für beliebige x...
     * ... x < r => x < b
     * ... x > b => x > r.
     *
     * Das Gerüst für diesen Algorithmus wurde kopiert von Folie 7-13
     */
    IntTuple result = new IntTuple (left, right); // rote und blaue Regionen sind leer
    int u = left; // weiße Region ist leer, die unbekannte == E[left...right]
    while (u <= result.v2) {
        System.out.print("E[" + u + "]: ");
        if (E[u] < red) {
            System.out.print("rot  ");
            swap(E, result.v1, u);
            result.v1++; // vergrößere die rote Region
            u++; // verkleinere die unbekannte Region
        } else if ((E[u] >= red) && (E[u] <= blue)) {
            System.out.print("weiß ");
            u++; // verkleinere die unbekannte Region
        } else if (E[u] > blue) {
            System.out.print("blau ");
            swap(E, result.v2, u);
            result.v2--; // vergrößere die blaue Region
        }
        System.out.print("Partition Schritt: [");
        for(int i = left; i < right; i++)
            System.out.print("" + E[i] + " ");
        System.out.println("" + E[right] + "]");
    }
    System.out.print("Partition Ausgabe: [");
    for(int i = left; i < right; i++)
        System.out.print("" + E[i] + " ");
    System.out.println("" + E[right] + "]" + " RotG=" + result.v1 + " BlauG=" + result.v2);
    return result;
} 
```

强制 JavaCode 片段：排序

```
private static void flagSort(int[] E, int left, int right){
    System.out.println("Sortiere: " + left + " bis " + right);
    if(left < right - 1) {
        Random rnd = new Random();
        IntTuple v = partition(E, left, right, rnd.nextInt(50), rnd.nextInt(50));
        //IntTuple v = partition(E, left, right, E[left], E[left + 1]);
        flagSort(E, left, v.v1 - 1);
        flagSort(E, v.v1, v.v2);
        flagSort(E, v.v2 + 1, right);
    } else if((left == right - 1) && (E[left] > E[right])) {
        swap(E, left, right);
    }
} 
```

非常感谢您的任何想法！

问候， LDer

**更多**：我想出了这个 hacky 和尴尬的解决方案：

```
private static void flagSort(int[] E, int left, int right, boolean dual){
    if(left < right) { // Singleton or empty segments are already sorted!
        IntTuple v;
        if(dual) // The last step has produced only a single white partition.
            // Treat this partition with double pivot
            v = partition(E, left, right, E[left], E[left]);
        else    // The last step has produced more than one partition, go on normally.
            v = partition(E, left, right, E[left], E[left + 1]);
        // Analyze partitions
        if((left != v.v1) || (right != v.v2)) {
            // 2 or 3 partitions available. Descend further.
            flagSort(E, left, v.v1 - 1, false);
            flagSort(E, v.v1, v.v2, false);
            flagSort(E, v.v2 + 1, right, false);
        } else if(!dual) {
            // Only the white partition is not empty, partition it with double pivot
            flagSort(E, v.v1, v.v2, true);
        } // Last case: The only not-empty partition is white after partitioning with double pivot.
          // Description of the algorithm immediately implies that this consists of only one key value, thus is sorted.
    }
} 
```

任何人都可以帮助创建一个更具可读性的版本吗？

**更多**：这个看起来好多了：

```
private static void flagSort(int[] E, int left, int right, int offset){
    if(left < right) { // Singleton or empty segments are already sorted!
        IntTuple v = partition(E, left, right, E[left], E[left + offset]);
        // Analyze partitions
        if ((left != v.v1) || (right != v.v2)) {
            // 2 or 3 partitions available. Descend further.
            flagSort(E, left, v.v1 - 1, 1);
            flagSort(E, v.v1, v.v2, 1);
            flagSort(E, v.v2 + 1, right, 1);
        } else if (offset > 0)
            // Only the white partition is not empty, partition it with double pivot
            flagSort2(E, v.v1, v.v2, 0);
        // Last case: The only not-empty partition is white after partitioning with double pivot.
        // Description of the algorithm immediately implies that this consists of only one key value, thus is sorted.
    }
} 
```

特别感谢 toto2，即使我没有明确通过红色/蓝色！

**更多**：更多随机性，因为 toto2 再次完全有一点：

```
private static void flagSort(int[] E, int left, int right, int offset){
    if(left < right) {
        IntTuple v = partition(E, left, right, E[left + (offset % (right - left))], 
            E[left + ((2 * offset) % (right - left))]);
        if ((left != v.v1) || (right != v.v2)) {
            int random = rnd.nextInt(right - left);
            flagSort(E, left, v.v1 - 1, random);
            flagSort(E, v.v1, v.v2, random);
            flagSort(E, v.v2 + 1, right, random);
        } else if (offset > 0)
            flagSort(E, v.v1, v.v2, 0);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:36:34.860

```
IntTuple v = partition(E, left, right, rnd.nextInt(50), rnd.nextInt(50)); 
```

50？您知道当前分区的最小-最大（红-蓝）值，该范围比 0-49 更窄。您应该修改 flagSort 以便不仅传递左右值，还传递红蓝值。

如果使用 red == blue 调用 flagSort，则可以返回，因为子数组具有相同的值并且已经排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:04:42.220

每次调用分区方法时，都会发生一件简单的事情：蓝色和红色索引处的项目正是它们所属的位置。因此，当您调用这部分代码时：

```
 flagSort(E, left, v.v1 - 1);
    flagSort(E, v.v1, v.v2);
    flagSort(E, v.v2 + 1, right); 
```

这些调用不能包含蓝色和红色，换句话说：

```
 flagSort(E, left, v.v1 - 1);
 flagSort(E, v.v1 +1 , v.v2 -1);
 flagSort(E, v.v2 + 1, right); 
```

# asp.net - 如何使用网格显示图像

> ID：10672902
> 
> 赞同：1
> 
> 时间：2012-05-20T11:09:51.007
> 
> 标签：asp.net

如何在 asp.net 的网格中显示图像。这些图像存储在项目目录（图像）的文件夹中。我想在网格中显示这些图像并显示数据库中的图像描述。描述应该显示在图像下方。请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T11:57:20.320

使用[模板字段](http://www.asp.net/web-forms/tutorials/data-access/custom-formatting/using-templatefields-in-the-gridview-control-cs)。

```
<asp:TemplateField HeaderText="Image">           
            <ItemTemplate>
                <img src='<%# "/images/" + Eval("FileName") %>' width="" height="" />
                <br />
                <p>Eval("Description")</p>
            </ItemTemplate>
</asp:TemplateField> 
```

# android - 固定屏幕布局比例

> ID：10672905
> 
> 赞同：1
> 
> 时间：2012-05-20T11:10:19.127
> 
> 标签：android, android-layout, android-view, percentage, android-layout-weight

在我的应用程序中，我有 2 种线性布局：一种在顶部，一种在底部。

我希望**无论这些布局里面**是什么，顶部的布局占屏幕高度的 60%，底部的布局占 40%。这是我的 XML 代码：

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:layout_weight="1.0" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.6"
        android:orientation="vertical" 
         android:id="@+id/layout_top">
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_weight="0.4" 
        android:id="@+id/layout_bottom">
    </LinearLayout>

</LinearLayout> 
```

当这些布局为空时，没有问题，它们具有良好的比例。

问题是，如果我在顶部布局中放置一个小的列表视图，例如，那么布局将采用列表视图的大小，并且不会保留 60/40% 的比例。

我希望即使我的列表视图很小（例如只有 3 个项目），布局也会保留 60%，因此在我的列表视图下放置一些空白空间。

我试图改变`android:layout_height`，`match_parent`但它没有改变任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T11:55:48.703

尝试使用这个布局它适用于我

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:layout_weight="1.0" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="6"
        android:orientation="vertical" 
         android:id="@+id/layout_top"
         android:background="#FF0000">
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:orientation="vertical"
        android:layout_weight="4" 
        android:id="@+id/layout_bottom"
        android:background="#FF00FF">
    </LinearLayout>

</LinearLayout> 
```

诀窍是在纵向模式下设置 a`layout_height="0dip"`而不是 wrap_content 而`layout_with="0dip"`不是在横向模式下设置 wrap_content 你可以使用 layout-land 文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T11:31:55.037

layout_weight 指定视图布局中的额外空间。您应该先尝试测量屏幕，例如：

```
Display display = ((WindowManager) 
  getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay(); 
int width = display.getHeight(); 
```

然后做一些像 width*0.6 和 0.4 这样的计算，这样你的布局总是有 60 40 的比例。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T11:38:46.123

尝试`layout_height = 0dp`在两个孩子`LinearLayouts`中。它的发生是因为你有`wrap_content`这可能是压倒一切的`layout_weight`效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T11:52:44.800

只需在您的父布局中，替换`android:layout_weight="1.0"`为`android:weightSum="1.0"`

这是通过设置父布局的权重和子布局的权重来实现的。孩子的体重应该等于父母的体重总和。看看这个[http://blog.stylingandroid.com/archives/312](http://blog.stylingandroid.com/archives/312)

# mobile - 可以在我的旧三星手机上运送 linux 吗？

> ID：10672907
> 
> 赞同：0
> 
> 时间：2012-05-20T11:10:28.620
> 
> 标签：mobile, java-me, embedded-linux

我有一部旧的触控手机[Samsung Corby S3653](http://www.samsung.com/in/support/model/GT-S3653CYAINS-techspecs)，它现在在 Java 上运行。

我想将操作系统更改为一些嵌入式 linux（除了已经存在的任何东西）。

可以更改操作系统吗？我该怎么做呢？如果我这样做会出现什么并发症？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T11:22:37.910

**TL；DR：不。**

首先，它实际上并不*在*Java 上运行：它能够运行 Java 应用程序，但正如您在链接中看到的那样，它显示“操作系统：专有”。

其次，它可以——非常、非常、非常理论上——可以在其上*创建*一个精简版的 Linux，但你需要在其中投入*大量*的编程工作——可能为架构，然后努力为设备创建*正确*的驱动程序。

第三，内存和 CPU 的限制也很严格——我确信系统的当前操作系统是专门为应对该设备的确切限制而构建的；这不能说是通用操作系统。

一般来说，手机是一种与台式电脑截然不同的动物：你不能只是扔掉一个系统并用另一个系统替换它，因为*在*大多数情况下没有什么可以替换它（在智能手机上，可以替换一个操作系统的版本*与同一操作系统*的另一个版本，但即使这样也是有问题的）。

换句话说：它在理论上是在可能性范围内的，但除了新奇价值之外不值得。您需要花费（数万）小时深入手机系统的内部，寻找专有的或不存在的手机规格，并构建自己的 Linux 端口——即便如此，也不能保证成功。

如果您*真的*坚持，请购买一款实际发货的 Linux 智能手机（或 Android，甚至 - 它是 Linux 的一个分支，并具有各种对开发人员友好的版本）。这会更快，更便宜（严重），更容易并且更有可能工作。

# node.js - Node.js 收缩包装的 package.json 导致 npm install 更新新版本，不管

> ID：10672912
> 
> 赞同：1
> 
> 时间：2012-05-20T11:11:22.527
> 
> 标签：node.js, dependencies, npm

我在一个名为“部署”的 git 分支中有一个`npm-shrinkwrap.json`和一个`package.json`。

在我的服务器上，我从 github 获取并合并这个部署分支。这可确保我的服务器具有最新的部署版本。

因为 node_modules 二进制文件等没有发货，所以在从服务器拉取项目存储库之后，我也需要在服务器端运行`npm install`或运行。`npm update`

这就是我决定使用`npm shrinkwrap`. 但是，即使我`npm-shrinkwrap.json`在主文件夹中有它并运行`npm install`它，它仍然会安装较新版本的子模块，即使收缩包装的 json 文件已将它们锁定。似乎 npm 甚至不查看收缩包装文件。

谁能解释为什么会发生这种情况，以及如何解决这种情况？

这是一部分`package.json`：

```
"dependencies" : {
    "eventemitter2" : "0.4.9",
    "after"         : "0.4.1",
    "express"       : "2.5.9"
},
"devDependencies" : {
    "mocha"     : ">= 1.0.3 < 2",
    "should"    : ">= 0.6.3 < 1",
    "request"   : ">= 2.9.202 < 3",
    "commander" : ">= 0.6.0 < 1"
}, 
```

鉴于`npm-shrinkwrap.json`：

```
{
  "name": "appname",
  "version": "0.0.1",
  "dependencies": {
    "eventemitter2": {
      "version": "0.4.9"
    },
    "after": {
      "version": "0.4.1"
    },
    "express": {
      "version": "2.5.9",
      "dependencies": {
        "connect": {
          "version": "1.8.7",
          "dependencies": {
            "formidable": {
              "version": "1.0.9"
            }
          }
        },
        "mime": {
          "version": "1.2.4"
        },
        "qs": {
          "version": "0.4.2"
        },
        "mkdirp": {
          "version": "0.3.0"
        }
      }
    },
    "commander": {
      "version": "0.6.0"
    },
    "should": {
      "version": "0.6.3"
    },
    "request": {
      "version": "2.9.202"
    }
  }
} 
```

然而，当我运行它时，它从 0.4.2 版`npm install`更新到 0.5.0 版。`qs`此外，它更新`mime`到 1.2.5。为什么这样做？

`npm install`返回这个：

```
qs@0.5.0 ./node_modules/express/node_modules/connect/node_modules/qs
mime@1.2.5 ./node_modules/express/node_modules/connect/node_modules/mime 
```

有趣的是，收缩包装不包含这些。我想这就是问题所在。现在的问题是为什么它不包含这些。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T11:51:06.687

您`npm-shrinkwrap.json`不包括连接的 qs 版本。您应该`npm install`在生成收缩包装之前。

# .htaccess - .htaccess 重定向所有未知的东西，除了一些已定义的

> ID：10672913
> 
> 赞同：0
> 
> 时间：2012-05-20T11:11:29.663
> 
> 标签：.htaccess, url-rewriting

我想重写and `/home`to ，但其他一切，比如我想重定向到`index.php``/edit``edit.php``/asdfg``new.php`

编辑和家庭都在自己的工作上，但`(.*)`优先于这些规则，我在没有 的情况下尝试过`RewriteCond`，但没有任何效果。

```
RewriteEngine on
RewriteBase /
RewriteRule ^home$ /index.php
RewriteRule ^edit$ /edit.php
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ /new.php [L,R=301] 
```

我只需要所有未定义的 URI 重定向到`/new.php`

我还需要将 URI 保留`/asdfg`在 URI 中，这样我就可以使用 JavaScript 抓取它并显示适当的内容，或者显示一个页面以让 ppl 发布新帖子或显示现有内容。

我无法定义所有现有内容，因为它来自数据库，只有少数预定义、保留的`"/folders"`内容会重定向到预定义页面。

我有以下工作：

```
RewriteEngine on
RewriteRule ^home$ /index.php [R]
RewriteRule ^edit$ /edit.php [R] 
```

它将 /home 留在那里并转到 index.php

现在我只需要将所有未知请求重定向到默认页面 new.php。

我基本上想防止用户收到 404 或任何其他错误，永远......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:28:36.050

您需要将`last`标志添加到您的第一个 RewriteRule，以便最后一个 RewriteRule 不生效：

```
RewriteRule ^home$ index.php [L]
RewriteRule ^edit$ edit.php [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T11:29:04.060

尝试将[`[L]`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_l)标志添加到“home”和“edit”规则中，这样“new”规则一旦匹配就不会被处理。

# mysql - MySQL - 如何查询一个值但默认为另一个？

> ID：10672918
> 
> 赞同：0
> 
> 时间：2012-05-20T11:12:06.200
> 
> 标签：mysql

我在上一个线程中询问了有关多行的问题，但现在我需要了解单行。这是一个示例查询：

```
SELECT * FROM table1 WHERE this = 5 LIMIT 1 
```

但是如果没有找到行，那么我会找到具有不同值的记录：

```
SELECT * FROM table1 WHERE this = 1 LIMIT 1 
```

所以我想要的是，找到一个值为 5 的行，如果没有找到，则默认找到一个值为 1 的行。我如何在单个查询中做到这一点？OR 语句会这样工作吗？

```
SELECT * FROM table1 WHERE this = 5 OR this = 1 LIMIT 1 
```

OR 语句的顺序是否会尝试查找任何值为 5 的行，如果找到，它将停止并返回该行？IF not found 然后查找 1 然后返回该行？如果没有，那么我如何使用单个查询来执行此操作，它会搜索一个值，如果未找到则默认查找另一个值？

我在想这个查询：

```
SELECT * FROM table1 WHERE this IN(5,1) ORDER BY this ASC LIMIT 1 
```

但是，如果找到两个值，此查询将始终返回值为 1 对吗？所以我尝试了这个：

```
SELECT * FROM table1 WHERE this IN(5,1) ORDER BY this DESC LIMIT 1 
```

但是，如果发现两行都正确，这将始终返回 5 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:26:17.027

您的问题似乎优先搜索 5，并且只有在未找到时才搜索 1。因此，您的第二个解决方案符合要求。无论是否仅找到 5 或 5 和 1 都存在，它将返回 5 的值。

第二个选项

```
SELECT * FROM table1 WHERE this IN(5,1) ORDER BY this DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:24:41.940

试试这个

```
SELECT * 
FROM table1 tab 
WHERE tab.this = IF((SELECT COUNT(*) 
                     FROM table1 
                     WHERE this = 5) > 0, 5, 1) 
```

IF 内的查询正在检查计数。

我不确定性能，但我认为这可以解决您的问题。

# visual-c++ - Visual Studio 2010 性能分析向导。开放式MP

> ID：10672920
> 
> 赞同：0
> 
> 时间：2012-05-20T11:13:22.997
> 
> 标签：visual-c++, openmp

我正在 Visual Studio 2010 中编写一个 C++ 应用程序。我在性能向导下运行我的代码，它需要将近 17 秒。这些代码非常适合多线程，所以我添加了 openmp 指令。之后，我再次运行我的代码，也需要将近 17 秒。所以，我想知道那个性能向导做了什么来优化代码？它是否分析代码并使其成为多线程或简单地执行编译器优化？该向导如何优化代码？

编辑：我通过添加 /openmp 选项启用了编译器选项。我正在 为 指令使用**#pragma omp parallel。我添加了并行部分代码。**它没有瓶颈，循环迭代不相互依赖。

```
#pragma omp parallel for
for (int i = START; i < END; i++) {
    solutionList[i] = new Solution(list[i]->solution, direction, i);        
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T11:18:15.587

性能向导根本不会优化您的代码。它测量代码的执行——取决于你的配置，通过检测代码（降低效率但更准确的监控）。它是一种工具，您可以使用它来决定要检查代码的哪些区域以进行优化——算法的人工优化，而不是指令的编译器优化。

# python - pyrss2gen，语法错误

> ID：10672924
> 
> 赞同：0
> 
> 时间：2012-05-20T11:14:23.923
> 
> 标签：python

这就是我所拥有的。我收到'])'的语法错误，我不明白为什么？

```
import datetime
import PyRSS2Gen

jp = "Mokuyoubi"
en = "Thursday"

rss = PyRSS2Gen.RSS2(
    title = "Vocab of the Day - JapLearn.com",
    link = "http://www.JapLearn.com",
    description = "The latest JapLearn.com"
                  "Vocab of the Day!",

    lastBuildDate = datetime.datetime.utcnow(),

    items = [
       PyRSS2Gen.RSSItem(
         title = "Vocab of the Day - Date",
         link = "http://www.JapLearn.com",
         description = "   Japanese: "+jp+
                       "Translation: "+en,
         pubDate = datetime.datetime()
    ])

rss.write_xml(open("japlearn-votd.xml", "w")) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T11:16:27.633

贴出的代码有两个问题：

1.  此语句缺少**相应的右括号**

    rss = PyRSS2Gen.RSS2(

2.  此外，正如@RanRag 指出的那样，您`])`需要`pubDate`反转**为`)]`**

我建议使用匹配括号的编辑器（我使用 emacs）和一些工具，如 pylint、pychecker 等......来帮助解决这些类型的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T11:18:05.220

```
items = [
       PyRSS2Gen.RSSItem(
         title = "Vocab of the Day - Date",
         link = "http://www.JapLearn.com",
         description = "   Japanese: "+jp+
                       "Translation: "+en,
         pubDate = datetime.datetime()
    )] 
```

先关闭`(`括号，然后再关闭`[`。

正如@levon 建议的那样，这些事情应该由你的`editor`. 我个人使用带有[syntastic](http://www.vim.org/scripts/script.php?script_id=2736)的 Vim进行自动语法检查。

您还需要为`pudate = datetime.datetime()`. 看看[这里](http://pypi.python.org/pypi/PyRSS2Gen)给出的例子。

你的代码在执行时给了我这个错误。

```
 File "rss.py", line 22, in <module>
    pubDate = datetime.datetime(),
TypeError: Required argument 'year' (pos 1) not found 
```

# javascript - 如何通过jquery创建计数器倒计时天数

> ID：10672928
> 
> 赞同：1
> 
> 时间：2012-05-20T11:14:39.920
> 
> 标签：javascript, jquery

你好我想创建我指定日期的计数器，例如`(2012/07/01) date X`

倒计时`date now < date X`

使用**jQuery** 或任何其他**java 脚本**库

请告诉我我该怎么做

或者在我的情况下给我一些提示

***并且这个计数器仍然倒计时（-1 秒）直到 Arvie 到这个日期，例如当我们在 2 个月内打开网站并在索引中显示这个计数器直到打开它***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T13:37:50.083

使用这样的东西。

请记住创建一个名为“示例”的 id 元素，并设置您想要的日期。

```
 function updateTimer(){
    // Get the element to append to
    var counter = document.getElementById("Example");
    // Set the targetDate
    var targetDate = new Date("July 27, 2012 19:30:00");

    var remainingSeconds = ~ ~((targetDate - new Date()) / 1000);
    var remainingTime = {
        "days": remainingSeconds / (60 * 60 * 24),
        "hours": (remainingSeconds % (60 * 60 * 24)) / (60 * 60),
        "minutes": (remainingSeconds % (60 * 60)) / 60,
        "seconds": remainingSeconds % 60
    };

    var str = "Time left is :: ";
    for (var i in remainingTime) {
        str += ~ ~remainingTime[i] + " " + i + ", ";
    }
    // Store the result in the element
    counter.innerHTML = str.substring(0, str.length - 2);
 }

 // Update the timer every 1 second
 setInterval(updateTimer, 1000); 
```

这是 JSFiddle：http: [//jsfiddle.net/fqPqS/](http://jsfiddle.net/fqPqS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:43:43.387

我不认为你需要一个 javascript 库。
你可以这样做：

```
var date=new Date();
var day=date.getDate();
var month=date.getMonth();
var year=date.getFullYear();
var now=year+'/'+month+'/'+day;
var x='2012/7/1';
if(now==x){
    doSomthing();
}; 
```

# hibernate - 休眠错误 java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration

> ID：10672929
> 
> 赞同：0
> 
> 时间：2012-05-20T11:14:42.793
> 
> 标签：hibernate, noclassdeffounderror

我目前在我的项目中遇到一个奇怪的 java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration 异常。

我在以下行得到了这个异常： SessionFactory sessionFactory = new Configuration().configure("xml\hibernate.cfg.xml").buildSessionFactory();

是的，我在 lib 文件夹中有 hibernate jar，并将它们包含在 java 构建路径中。代码和配置似乎没有问题，因为它们在独立的 java 项目中工作正常，而从 EJB 项目 jar 执行时会引发此异常。

是 EJB 项目 jar 和 Jboss 模块文件夹中的 JBOSS AS7 持久性 jar 之间的类加载冲突吗？

任何帮助将非常感激！！！

更多详情如下：

我正在使用 Eclipse，JBoss AS7.0.2 Final & hibernate 3
我的项目结构如下：
PemEJB
-------.settings
-------build
-------ejbModule
---- -------au（代码）
------------lib
-----------META-INF
------------资源（一些xsd文件）
-----------xml（休眠配置文件）

lib 文件夹中的所有 jar 在部署时都包含在 EJB jar 中，并被提取到 Jboss/standalone/deployments 文件夹中。

我在项目lib文件夹
ant-antlr-1.6.3.jar
antlr-2.7.5H3.jar
asm-attrs.jar
cglib-2.1.jar
commons-collections-2.1.1.jar
commons-logging-1.0中有以下jar .4.jar
dom4j-1.6.jar
ehcache-1.1.jar
ejb-3.0.jar
hibernate-annotations-3.3.0.ga.jar
hibernate-commons-annotations-3.1.0.GA.jar
hibernate3.jar
hornetq-core- 2.2.7.Final.jar
hornetq-jms-2.2.7.Final.jar
hsqldb.jar
javaee.jar
jbossall-client.jar
jms.jar
jnp-client.jar
jta.jar
log4j-1.2.9.jar
mysql-connector-java-5.0.4-bin.jar
ojdbc14.jar
wloracle.jar
wlsqlserver.jar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:34:50.900

尝试删除 Hibernate JAR。IIRC，JBoss 内置了 Hibernate，因此您不需要在项目中使用它们。

这是一篇关于如何在 JBoss 7 上使用 Hibernate 的帖子：[http ://relation.to/Bloggers/SomeTipsOnUsingHibernateInJBossAS700Final](http://relation.to/Bloggers/SomeTipsOnUsingHibernateInJBossAS700Final)

# asp.net - 单击提交按钮时如何更新gridview？

> ID：10672935
> 
> 赞同：0
> 
> 时间：2012-05-20T11:15:30.113
> 
> 标签：asp.net, vb.net, gridview, autopostback

我想将展位详细信息添加到数据库中，用户插入展位别名后，选择展位类型和展位持续时间，然后单击提交按钮，新添加的记录将出现在旧记录下方的网格视图中。

![在此处输入图像描述](../Images/567ca9161bda317256e268c8a473c379.png)

我知道代码中缺少一些东西，但我不确定是什么问题。

客户端代码：

```
<%@ Page Language="VB" MasterPageFile="~/MasterPageAdmin.master" AutoEventWireup="false" CodeFile="addbooth.aspx.vb" Inherits="addbooth" title="Untitled Page" %>
<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="asp" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>

<asp:Content ID="ContentPlaceHolder2" runat="server" 
contentplaceholderid="ContentPlaceHolder2">

 <table class="style8" cellpadding="3">
 <tr>
 <td class="style9">Add New Booth</td>
 <td>&nbsp;</td>
 </tr>
 <tr>
 <td class="style9">&nbsp;</td>
 <td>&nbsp;</td>
 </tr>
 <tr>
 <td class="style9">Event Title:</td>
 <td>
 <asp:SqlDataSource ID="SqlDataSourceEventTitle" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>" SelectCommand="SELECT DISTINCT [eventID], [eventTitle] FROM [eventinfo]">
 </asp:SqlDataSource>
 <asp:DropDownList ID="ddlEventTitle" runat="server" DataSourceID="SqlDataSourceEventTitle" DataTextField="eventTitle" DataValueField="eventID" Width="240px" AutoPostBack="True">
 </asp:DropDownList>
 </td>
 </tr>
 <tr>
 <td class="style9">Booth Alias:</td>
 <td>
 <asp:TextBox ID="txtBoothAlias" runat="server" Width="235px"></asp:TextBox>
 </td>
 </tr>
 <tr>
 <td class="style9"> Booth Type:</td>
 <td>
 <asp:DropDownList ID="ddlBoothType" runat="server" Width="240px" AutoPostBack="True">
 <asp:ListItem Value="7">8&#39;x8&#39;</asp:ListItem>
 <asp:ListItem Value="10">9&#39;x8&#39;</asp:ListItem>
 <asp:ListItem Value="11">12&#39;x50&#39;</asp:ListItem>
 <asp:ListItem Value="12">16&#39;x10&#39;</asp:ListItem>
 <asp:ListItem Value="13">20&#39;x16&#39;</asp:ListItem>
 <asp:ListItem Value="15">32&#39;x10&#39;</asp:ListItem>
 <asp:ListItem Value="17">32&#39;x14.5&#39;</asp:ListItem>
 </asp:DropDownList>
 </td>
 </tr>
 <tr>
 <td class="style10" valign="top" colspan="2">Booth Duration:<br />
 <font size="2">Tick to activate availability</font></td>
 </tr>
 <tr>
 <td class="style10" valign="top" colspan="2" align="center">
 <asp:Panel ID="Panel1" runat="server" Width="328px" Direction="LeftToRight" HorizontalAlign="Center">
 <table cellpadding="5" class="style8">
 <tr>
 <td>
 <asp:CheckBox ID="cbWeek1" runat="server" Text="Week 1" TextAlign="Left" OnCheckedChanged="cbWeek1_CheckedChanged" AutoPostBack="true"/>
  </td>
  <td>
 <asp:CheckBox ID="cbWeek2" runat="server" Text="Week 2" TextAlign="Left" OnCheckedChanged="cbWeek2_CheckedChanged" AutoPostBack="true"/>
   </td>
   <td>
  <asp:CheckBox ID="cbWeek3" runat="server" Text="Week 3" TextAlign="Left" OnCheckedChanged="cbWeek3_CheckedChanged" AutoPostBack="true"/>
   </td>
    <td>
 <asp:CheckBox ID="cbWeek4" runat="server" Text="Week 4" TextAlign="Left" OnCheckedChanged="cbWeek4_CheckedChanged" AutoPostBack="true"/>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td>
                                                                                             <asp:CheckBox ID="cbWeek5" runat="server" Text="Week 5" TextAlign="Left" OnCheckedChanged="cbWeek5_CheckedChanged" AutoPostBack="true"/>
                                                                                </td>
                                                                                <td>
                                                                                              <asp:CheckBox ID="cbWeek6" runat="server" Text="Week 6" TextAlign="Left" OnCheckedChanged="cbWeek6_CheckedChanged" AutoPostBack="true"/>
                                                                                </td>
                                                                                <td>
                                                                                              <asp:CheckBox ID="cbWeek7" runat="server" Text="Week 7" TextAlign="Left" OnCheckedChanged="cbWeek7_CheckedChanged" AutoPostBack="true"/>
                                                                                </td>
                                                                                <td>
                                                                                              <asp:CheckBox ID="cbWeek8" runat="server" Text="Week 8" TextAlign="Left" OnCheckedChanged="cbWeek8_CheckedChanged" AutoPostBack="true"/>
                                                                                </td>
                                                                            </tr>
                                                                        </table>

  </asp:Panel>
  <asp:RoundedCornersExtender ID="Panel1_RoundedCornersExtender"runat="server" Enabled="True" TargetControlID="Panel1" BorderColor="CadetBlue" Color="ButtonFace">
 </asp:RoundedCornersExtender>
       </td>
       </tr>
       <tr>
        <td class="style11">
         </td>
         <td class="style11">
 <asp:Button ID="ButtonAddNewBooth" runat="server" Text="Add New Booth"  Height="50px" />
 </td>
 </tr>
   <tr>
    <td class="style9"> &nbsp;</td>
     <td>&nbsp;</td>
       </tr>
         <tr>
 <td class="style9" colspan="2">
 <asp:GridView ID="GridViewBoothAdded" runat="server" AutoGenerateColumns="False" CellPadding="4" DataSourceID="SqlDataSourceBoothAdded" Font-Size="Small" ForeColor="#333333" GridLines="None" AllowPaging="True" PageSize="5" Visible="False">
 <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
 <Columns>
  <asp:BoundField DataField="boothAlias" HeaderText="Booth Alias" SortExpression="boothAlias" />
 <asp:BoundField DataField="week1" HeaderText="week1" SortExpression="week1" />
 <asp:BoundField DataField="week2" HeaderText="week2" SortExpression="week2" />
 <asp:BoundField DataField="week3" HeaderText="week3" SortExpression="week3" />
 <asp:BoundField DataField="week4" HeaderText="week4" SortExpression="week4" />
 <asp:BoundField DataField="week5" HeaderText="week5" SortExpression="week5" />
 <asp:BoundField DataField="week6" HeaderText="week6" SortExpression="week6" />
 <asp:BoundField DataField="week7" HeaderText="week7" SortExpression="week7" />
 <asp:BoundField DataField="week8" HeaderText="week8" SortExpression="week8" />
  </Columns>
  <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
  <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
  <EmptyDataTemplate>
        No booth record
  </EmptyDataTemplate>
  <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
  <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" Font-Size="Small" ForeColor="White" />
  <EditRowStyle BackColor="#999999" />
  <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
   </asp:GridView>
   <asp:RoundedCornersExtender ID="GridViewBoothAdded_RoundedCornersExtender" runat="server" Enabled="True" TargetControlID="GridViewBoothAdded">
    </asp:RoundedCornersExtender>
    <asp:SqlDataSource ID="SqlDataSourceBoothAdded" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>" 
    SelectCommand="SELECT [week1], [week2], [week3], [week4], [week5], [week6], [week7], [week8], [eventID], [boothAlias], [eventTitle] FROM [booth_eventinfo] WHERE ([eventID] = @eventID)">
   <SelectParameters>
    <asp:ControlParameter ControlID="ddlEventTitle" Name="eventID" PropertyName="SelectedValue" Type="Int32" />
   </SelectParameters>
   </asp:SqlDataSource>
                                                                </td>
                                                            </tr>
   </table> 
```

服务器代码：

```
Imports System
Imports System.Data
Imports System.Data.SqlClient
Imports System.Threading
Partial Class addbooth
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    GridViewBoothAdded.Visible = True
End Sub

Protected Sub ButtonAddNewBooth_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles ButtonAddNewBooth.Click
    Dim connString As String = ConfigurationManager.ConnectionStrings("ConnectionString1").ConnectionString
    '"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\eventdb.mdf;Integrated Security=True;User Instance=True"
    Dim con As SqlConnection = New SqlConnection(connString)

    Dim cmdQuery As String = "INSERT INTO booth(eventID,boothAlias,boothType,week1,week2,week3,week4,week5,week6,week7,week8) VALUES (@eventID,@boothAlias,@boothType,@week1,@week2,@week3,@week4,@week5,@week6,@week7,@week8)"

    Dim cmd = New SqlCommand(cmdQuery)
    cmd.Connection = con
    cmd.CommandType = CommandType.Text
    con.Open()
    cmd.Parameters.AddWithValue("@eventID", ddlEventTitle.SelectedValue)
    cmd.Parameters.AddWithValue("@boothAlias", txtBoothAlias.Text)
    cmd.Parameters.AddWithValue("@boothType", ddlBoothType.SelectedValue)

    If (cbWeek1.Checked = True) Then
        cmd.Parameters.AddWithValue("@week1", "1")
    Else
        cmd.Parameters.AddWithValue("@week1", "0")
    End If

    If (cbWeek2.Checked = True) Then
        cmd.Parameters.AddWithValue("@week2", "1")
    Else
        cmd.Parameters.AddWithValue("@week2", "0")
    End If

    If (cbWeek3.Checked = True) Then
        cmd.Parameters.AddWithValue("@week3", "1")
    Else
        cmd.Parameters.AddWithValue("@week3", "0")
    End If

    If (cbWeek4.Checked = True) Then
        cmd.Parameters.AddWithValue("@week4", "1")
    Else
        cmd.Parameters.AddWithValue("@week4", "0")
    End If

    If (cbWeek5.Checked = True) Then
        cmd.Parameters.AddWithValue("@week5", "1")
    Else
        cmd.Parameters.AddWithValue("@week5", "0")
    End If

    If (cbWeek6.Checked = True) Then
        cmd.Parameters.AddWithValue("@week6", "1")
    Else
        cmd.Parameters.AddWithValue("@week6", "0")
    End If

    If (cbWeek7.Checked = True) Then
        cmd.Parameters.AddWithValue("@week7", "1")
    Else
        cmd.Parameters.AddWithValue("@week7", "0")
    End If

    If (cbWeek8.Checked = True) Then
        cmd.Parameters.AddWithValue("@week8", "1")
    Else
        cmd.Parameters.AddWithValue("@week8", "0")
    End If

    GridViewBoothAdded.Visible = True 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:12:25.757

我在您的 ButtonAddNewBooth_Click 方法中看到您缺少 ExecuteSql() 用于 sqlcommand 和 gridview 绑定代码

**向 cmd 添加参数后，添加以下两行，第一行用于执行插入，另一行用于重新绑定网格**

```
cmd.ExecuteSql()

GridViewBoothAdded.DataBind() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:14:15.943

您能否将 GridView 数据绑定代码移动到文件 Page_Load 方法后面的代码并在 ButtonAddNewBooth_Click 事件结束时调用相同的代码。这将达到你的目的。

链接：[GridView.DataBind](http://msdn.microsoft.com/en-us/library/fkx0cy6d.aspx)

# oop - 需要设计模式 - 多个可互换库的外观

> ID：10672937
> 
> 赞同：2
> 
> 时间：2012-05-20T11:15:40.547
> 
> 标签：oop, design-patterns

我有一个第 3 方库，我正在使用外观模式进行交互。现在，我有一个进一步的要求，即可以轻松更改第 3 方库（而不是在运行时），因此外观必须能够处理这个问题。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T11:30:09.647

我建议创建`Facade`需要具有多个实现的接口（或抽象类，无论您使用哪种语言）。每个实现都是一个包装 3rd 方库的具体外观：

![UML 图](../Images/257385209b63260b504385d890111310.png)

^(由[yuml.me提供支持](http://yuml.me/))

# python - 我应该使用哪种数据库模型在运行时动态修改实体/属性？

> ID：10672939
> 
> 赞同：20
> 
> 时间：2012-05-20T11:16:20.993
> 
> 标签：python, database, dynamic, sqlalchemy, redis

我正在考虑为各种类型的数据创建一个开源数据管理 Web 应用程序。

特权用户必须能够

*   添加新的实体类型（例如“用户”或“家庭”）
*   向实体类型添加新属性（例如“性别”到“用户”）
*   删除/修改实体和属性

这些将是特权用户的常见任务。他将通过应用程序的 Web 界面执行此操作。最后，所有数据都必须可供应用程序的所有类型的用户搜索和排序。有两个问题困扰我：

**a) 数据应该如何存储在数据库中？我应该在运行时动态添加/删除数据库表和/或列吗？**

我不是数据库专家。我一直在想，就关系数据库而言，应用程序必须能够在运行时动态添加/删除表（实体）和/或列（属性）。我不喜欢这个主意。同样，我正在考虑是否应该在 NoSQL 数据库中处理此类动态数据。

无论如何，我相信这类问题有一个智能的规范解决方案，这是我迄今为止没有找到和想到的。*这种动态数据管理的最佳方法是什么？*

**b) 如何使用 ORM 或 NoSQL 在 Python 中实现这一点？**

如果您推荐使用关系数据库模型，那么我想使用 SQLAlchemy。但是，我看不到如何在运行时使用 ORM 动态创建表/列。这就是为什么我希望有一种比在运行时创建表和列更好的方法的原因之一。*推荐的数据库模型是否可以使用 SQLAlchemy 有效实现？*

如果您推荐使用 NoSQL 数据库，是哪一个？我喜欢使用 Redis——*你能想象一个基于 Redis 的高效实现吗？*

感谢您的建议！

**编辑以回应一些评论：**

这个想法是某个实体（“表”）的所有实例（“行”）共享同一组属性/属性（“列”）。但是，如果某些实例的某些属性/属性具有空值，则它将是完全有效的。

基本上，用户将通过网站上的简单表格搜索数据。例如，它们查询具有属性 P 的实体 E 的所有实例，该属性 P 的值 V 高于 T。结果可以按任何属性的值排序。

数据集不会变得太大。因此，我认为即使是最愚蠢的方法仍然会导致工作系统。但是，我是一名爱好者，我想应用现代和适当的技术，同时我想了解理论瓶颈。我想使用这个项目来收集设计“Pythonic”、最先进、可扩展且可靠的 Web 应用程序的经验。

我看到第一条评论倾向于推荐 NoSQL 方法。虽然我真的很喜欢 Redis，但不利用 Mongo/Couch 的 Document/Collection 模型似乎很愚蠢。我一直在研究 Python 的 mongodb 和 mongoengine。通过这样做，我是否朝着正确的方向迈出了一步？

**编辑 2 以回应一些答案/评论：**

从您的大多数答案中，我得出结论，在关系图中动态创建/删除表和列**不是**要走的路。这已经是有价值的信息。此外，一种观点是，动态修改实体和属性的整个想法可能是糟糕的设计。

由于这种动态特性应该是应用程序的主要目的/功能，我不会放弃这一点。从理论的角度来看，我接受在动态数据模型上执行操作必然比在静态数据模型上执行操作慢。这完全没问题。

用抽象的方式表达，应用程序需要管理

1.  *数据布局*，即有效实体类型的“动态列表”和每个有效实体类型的属性“动态列表”
2.  数据*本身*

我正在寻找一种智能且有效的方法来实现这一点。从您的回答看来，NoSQL 似乎是这里的出路，这是另一个重要的结论。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-23T01:18:49.370

SQL 或 NoSQL 的选择不是您的问题。一般来说，您需要阅读更多关于数据库设计的内容。正如你所说，你不是数据库专家（你也不需要是），但你绝对**必须**多学习一点 RDBMS 范式。

业余爱好者选择 NoSQL 解决方案是一个常见的错误。有时 NoSQL 是一个很好的解决方案，**但大多数**时候不是。

以您提到的 MongoDB 为例（它是我尝试过的优秀 NoSQL 解决方案之一）。无模式，对吧？错误..不完全是。你会看到什么时候没有模式意味着没有约束、验证等。但是你的应用程序的模型/实体不能凭空存在！当然，您**将**在软件层上实现一些约束和验证逻辑。所以我给你[mongokit](http://namlook.github.com/mongokit/)！我将仅从项目的描述中引用这一点

> MongoKit 在出色的 pymongo 驱动程序之上带来结构化模式和验证层

嗯……非结构化变成了结构化。

至少我们没有 SQL 对吧？是的，我们没有。我们有一种不同的[查询语言](http://www.mongodb.org/display/DOCS/Querying)，它当然不如 SQL。至少您不需要使用 map/reduce 来进行基本查询（请参阅 CouchDB）。

不要误会我的意思，NoSQL（尤其是 MongoDB）有它的用途，但大多数时候这些技术被用于错误的原因。

此外，如果您关心严重的持久性和数据完整性，请忘记 NoSQL 解决方案。所有这些技术都太实验性了，无法保存您的严肃数据。通过研究一下谁（除了谷歌/亚马逊）使用 NoSQL 解决方案以及究竟是为了什么，你会发现几乎**没有人**使用它来保存他们的重要数据。他们主要将它们用于日志记录、消息和实时数据。基本上可以从他们的 SQL 数据库存储中减轻一些负担。

在我看来，Redis 可能是唯一能够在 NoSQL 爆炸中毫发无损的项目。也许是因为它并没有宣传自己是 NoSQL，而是作为键值存储，这正是它的本质，而且非常好！[他们似乎对坚持](http://antirez.com/post/redis-persistence-demystified.html)很认真。这是一把瑞士军刀，但不是完全替换您的 RDBMS 的好解决方案。

对不起，我说的太多了：）

所以这是我的建议：

1）研究一下RDBMS模型。

**2) 如果您的大部分**项目都将使用 RDBMS，那么 Django 是一个很好的框架。

3) Postgresql 摇滚！还要记住，9.2 版将带来原生[JSON](http://arstechnica.com/business/2012/01/native-json-features-submitted-for-postgresql-92/)支持。您可以在其中转储所有“动态”属性，并且可以使用辅助存储/引擎对所述属性执行查询（map/reduce）。有你的蛋糕，也吃吧！

4）对于严肃的搜索功能，请考虑专门的引擎，如[solr](http://lucene.apache.org/solr/)。

编辑：2013 年 4 月 6 日

5) [django-ext-hstore](https://github.com/niwibe/djorm-ext-hstore)让您可以访问 postgresql hstore 类型。它类似于 python 字典，您可以对其执行查询，但限制是您不能将嵌套字典作为值。key 的值也只能是 type `string`。

玩得开心

* * *

**更新**以响应 OP 的[评论](https://stackoverflow.com/questions/10672939/which-database-model-should-i-use-for-dynamic-modification-of-entities-propertie/10712269#comment14043939_10712269)

> 0) 考虑应用程序“包含数据”并且已经使用了一段时间

我不确定您的意思是它包含旧版 dbms 中的数据，还是您只是想说“想象数据库不为空并考虑以下几点……”。在前一种情况下，这似乎是一个迁移问题（完全不同的问题），在后一种情况下，好吧。

> 1) 管理员删除实体“family”和所有相关数据

为什么有人要完全消除一个实体（表）？您的申请要么与家庭、房屋等有关，要么与此无关。当然，删除族的实例（行）是可以理解的。

> 2）管理员创建实体“房子”

与#1 相同。如果您在您的应用程序中引入一个全新的实体，那么它很可能会封装语义和业务逻辑，必须为其编写新代码。随着时间的推移，所有应用程序都会发生这种情况，当然需要创建一个新表，或者可能是[ALTER](http://www.postgresql.org/docs/9.1/static/sql-altertable.html)现有的表。但此过程不是您的应用程序功能的一部分。即它很少发生，并且是迁移/重构问题。

> 3）管理员添加属性“楼层”，“年龄”，..

为什么？难道我们事先不知道 a`House`有楼层吗？那a`User`有性别吗？动态添加和删除这种类型的属性不是一个特性，而是一个设计缺陷。它是分析/设计阶段的一部分，用于识别您的实体及其各自的属性。

> 4）特权用户添加一些房屋。

是的，他正在向现有实体（表）添加一个实例（行）`House`。

> 5) 用户搜索所有至少五层楼价低于 100 美元的房子

可以使用 SQL 或 NoSQL 解决方案实现的完全有效的查询。在 django 中，它会是这样的：

```
House.objects.filter(floors__gte=5, price__lt=100) 
```

前提是`House`具有属性`floors`和`price`。但是，如果您需要进行基于文本的查询，那么 SQL 和 NoSQL 都不会令人满意。因为您不想自己实现分[面](http://en.wikipedia.org/wiki/Faceted_classification)或[词干提取](http://en.wikipedia.org/wiki/Stemming)！您将使用一些已经讨论过的解决方案（Solr、ElasticSearch 等）。

一些更一般的注释：

您给出的示例`Houses`及其`Users`属性不保证任何动态模式。也许您简化了您的示例只是为了说明您的观点，但是您谈论添加/删除`Entities(tables)`就像它们是数据库中的行一样。实体应该在应用程序中很重要。它们定义了应用程序的目的及其功能。因此，它们不可能每分钟都改变。

你还说：

```
The idea is that all instances ("rows") of a certain entity ("table") share the same set of properties/attributes ("columns"). However, it will be perfectly valid if certain instances have an empty value for certain properties/attributes. 
```

这似乎是属性具有`null=True`.

最后一点，我想建议你尝试两种方法（SQL 和 NoSQL），因为你的职业似乎并不依赖于这个项目。这将是一次受益的经历，因为您将亲身了解每种方法的优缺点。甚至如何将这些方法“混合”在一起。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T04:08:21.510

您要问的是许多系统中的一个常见要求——如何扩展核心数据模型来处理用户定义的数据。这是打包软件（通常以一种方式处理）和开源软件（以另一种方式处理）的流行要求。

早期关于 RDBMS 设计的更多信息的建议通常不会受到伤害。我要补充的是，不要陷入在您自己的特定于应用程序的数据模型中重新实现关系数据库的陷阱！我已经多次看到这样做了，通常是在打包的软件中。不想将核心数据模型（或更改它的权限）暴露给最终用户，开发人员创建了一个通用数据结构和一个应用程序接口，允许最终用户定义实体、字段等，但不使用 RDBMS 工具。这通常是一个错误，因为很难像经验丰富的 RDBMS 为您做的那样彻底或没有错误，而且可能需要很多时间。这很诱人，但恕我直言，这不是一个好主意。

假设数据模型更改是全局性的（一旦管理员进行更改，所有用户共享），我解决此问题的方法是创建一个应用程序界面，位于管理员用户和 RDBMS 之间，并应用您需要的任何规则应用于数据模型更改，然后将最终更改传递给 RDBMS。因此，例如，您可能有规则说实体名称需要遵循某种格式，允许新实体具有现有表的外键但必须始终使用 DELETE CASCADE 规则，字段只能是某些数据类型，所有字段必须有默认值等。您可以有一个非常简单的屏幕，要求用户提供实体名称、字段名称和默认值等，然后生成 SQL 代码（包括所有规则）以对数据库进行这些更改。

一些常见的规则以及您将如何解决它们将是这样的：

-- 如果一个字段不为空并且有默认值，并且在管理员添加该字段之前表中已经存在记录，则在创建字段时更新现有记录以具有默认值（多步骤--添加允许为空的字段；更新所有现有记录；更改表以强制使用默认值不为空）- 否则您将无法使用字段级完整性规则）

-- 新表必须具有不同的命名模式，以便您可以继续将核心数据模型与用户扩展数据模型区分开来，即核心和用户定义具有不同的 RDBMS 所有者（dbo. vs. user.）或前缀（无对于核心，__ 用于用户定义）或类似的东西。

-- 可以将字段添加到核心数据模型中的表（只要它们容忍空值或具有默认值），并且管理员可以删除管理员添加到核心数据模型表中的字段，但管理员无法删除定义为核心数据模型一部分的字段。

换句话说 - 使用 RDBMS 的强大功能来定义表和管理数据，但为了确保始终应用您需要的任何约定或规则，请通过构建应用程序到数据库管理功能来做到这一点，而不是给予管理员用户直接数据库访问权限。

如果您真的只想通过 DB 层执行此操作，您可能可以通过创建一堆实现相同逻辑的存储过程和触发器来实现相同的目标（谁知道呢，也许您会为您的应用程序这样做）。这可能更多的是一个问题，即您的管理员用户在数据库层中工作与通过中间应用程序工作的舒适程度。

* * *

所以直接回答你的问题：

(1) 是的，在运行时添加表和列，但请考虑您需要具备的规则，以确保即使添加了用户定义的数据后您的应用程序也能正常工作，并选择一种方式来执行这些规则（通过应用程序或当您处理表和字段更改时，通过数据库/存储过程或其他方式。

(2) 此问题不受您选择 SQL 与 NoSQL 引擎的强烈影响。在每种情况下，您都有一个核心数据模型和一个扩展数据模型。如果您可以设计您的应用程序以响应动态数据模型（例如，在将字段添加到数据库表或其他任何内容时将新字段添加到屏幕），那么您的应用程序将很好地响应核心数据模型和用户定义数据模型的变化。这是一个有趣的挑战，但受数据库实现风格选择的影响不大。

祝你好运！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T23:05:24.603

模型对象（RDBMS、NoSQL 等）的持久性引擎可能并不重要。您正在寻找的技术是用于搜索和查找对象的索引。

我认为您需要使用他们的模式找到您的对象。因此，如果模式是动态定义的并持久保存在数据库中，您可以构建动态搜索表单等。需要某种实体和属性对真实对象的引用。

看一下[实体-属性-模型模式（EAV）](http://en.wikipedia.org/wiki/Entity-attribute-value_model)。这可以通过 SQLAlchemy 实现，以使用 RDBMS 数据库作为垂直存储模式和数据并将它们关联起来的手段。

您正在进入语义 Web 编程领域，也许您应该少读本书的第一章：

[语义网编程](http://books.google.com.cu/books?id=XShw5YSHoRUC&lpg=PP1&dq=Programming%20the%20Semantic%20Web&pg=PR5#v=onepage&q=Programming%20the%20Semantic%20Web&f=false)

它讲述了您的问题的全部故事：从刚性模式到动态模式，首先实现为键值存储，后来改进为关系模型上的图形持久性。

我的观点是，现在最好的实现可以通过**图形数据库**实现，当前实现的一个很好的例子是 Berkeley DB（一些 LDAP 实现使用 Berkeley DB 作为这个索引问题的技术实现。）

一旦进入图形模型，您就可以对图形进行某种“推理”，使数据库看起来具有某种“智能”。书中有一个例子。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-22T17:56:50.040

因此，如果您将实体概念化为“文档”，那么整个问题可以很好地映射到 no-sql 解决方案。正如评论的那样，您需要有某种模型层，它位于您的文档存储之上并执行诸如验证之类的任务，并且可能强制（或鼓励）某种模式，因为没有隐含的后端要求实体中的相同的集合（与表平行）共享模式。

允许特权用户更改您的架构概念（而不是仅向单个文档添加字段 - 这很容易支持）将带来一些挑战 - 您必须处理迁移现有数据以自动匹配新架构。

阅读您的编辑，Mongo 支持您正在寻找的搜索/排序类型，并将为您提供所需的“空单元格”（缺少特定键的文档）的支持。

如果我是你（并且我目前正在开发类似但更简单的产品），我会坚持使用 Mongo，并研究像 Flask 这样的轻量级 Web 框架来提供前端。您将独自提供模型，但您不会与框架的隐式建模选择作斗争。

# java - 矩形着色逻辑

> ID：10672940
> 
> 赞同：3
> 
> 时间：2012-05-20T11:16:26.273
> 
> 标签：java, swing, graphics, swt

我的画布上有一个三个矩形。我想以一种缓慢的方式一个一个地改变三个矩形的颜色。例如：启动应用程序时，用户应该能够看到三个具有相同颜色（蓝色）的矩形。2 秒后，矩形颜色应变为红色。再次在 2 秒后，下一个矩形颜色应该会改变。最后一个也以相同的方式完成，这意味着在第二个矩形的 2 秒后。

我用我自己的方式写。但它不起作用。所有的矩形都一起改变。我要一个一个。

谁能给我一个逻辑。

```
final Runnable timer = new Runnable() {

        public void run() {

            //list of rectangles size =3; each contain Rectangle.
            for(int i = 0 ; i < rectangleList.size();i++){

                if(rectangleListt.get(i).getBackgroundColor().equals(ColorConstants.blue)){
                    try {

                        rectangleList.get(i).setBackgroundColor(ColorConstants.yellow);
                        Thread.sleep(1500);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    //rectSubFigureList.get(i).setBorder(null);
                }/*else{
                    rectSubFigureList.get(i).setBackgroundColor(ColorConstants.blue);
                }*/

            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T11:18:42.513

您很可能在 Swing 的事件线程或 EDT（用于事件调度线程）内调用 Thread.sleep，这将导致线程本身进入休眠状态。由于该线程负责 Swing 的所有图形和用户交互，因此这实际上会使您的*整个应用程序*进入休眠状态，而不是您希望发生的事情。相反，请继续阅读并为此使用 Swing Timer。

参考：

*   [摇摆计时器教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)
*   [Swing 事件调度线程和 Swingworker 教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

要扩展 Hidde 的代码，您可以执行以下操作：

```
// the timer:     
Timer t = new Timer(2000, new ActionListener() {
     private int changed = 0; // better to keep this private and in the class
     @Override
     public void actionPerformed(ActionEvent e) {
        if (changed < rectangleList.size()) {
            rectangleList.setBackgroundColor(someColor);
        } else {
            ((Timer) e.getSource()).stop();
        }
        changed++;
     }
 });
 t.start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T11:23:07.507

您可以设置一个计时器：

```
 // declaration: 
    static int changed = 0;

    // the timer:     
    Timer t = new Timer(2000, new ActionListener() {
         @Override
         public void actionPerformed(ActionEvent e) {
                // Change the colour here:
                if (changed == 0) {
                  // change the first one
                } else if (changed == 1) {
                  // change the second one
                } else if (changed == 2) {
                  // change the last one
                } else {
                  ((Timer) e.getSource()).stop();
                }
                changed ++;

          }
     });
     t.start(); 
```

# ruby-on-rails - 如何在没有表单字段的轨道中设置值

> ID：10672945
> 
> 赞同：0
> 
> 时间：2012-05-20T11:17:41.043
> 
> 标签：ruby-on-rails, database, validation, oncreate

我们在数据库中有一个字段应该自动设置为 UUID 字符串。我们怎么做。视图不包含此字段，因为它将自动生成。我们的新形式会这样称呼。

```
def new
  @list = List.new
  respond_to do |format|
      format.html
end 
```

我们的创建动作在这里

```
def create
  @list = List.new(params[:list])
  @list = list.create!(params[:list]) 
end 
```

如果我们试试这个

```
@list.admin_key = UUIDTools::UUID.timestamp_create().to_s 
```

我们得到一个验证错误并且该字段为空。控制器要求

```
require 'uuidtools' 
```

我们对该领域的验证是存在且独特的

```
validates :admin_key,
            :presence => true,
            :uniqueness => true 
```

我们是如何将 admin_key 放入数据库的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:45:52.603

你必须在你的模型中这样做

```
before_validation(:on => :create) do
  self.admin_key = UUIDTools::UUID.timestamp_create().to_s
end 
```

# java - Java RegExp：用英文引号“”替换引号“”（思维上下文）

> ID：10672947
> 
> 赞同：-1
> 
> 时间：2012-05-20T11:17:59.660
> 
> 标签：java, regex, typography

是否有任何简单的方法可以通过正则表达式将键盘上的引号转换为英文引号，但要确保 HTML 实体被保留？例如，我们想翻译`some "text"`，但我们不想要`<span id="blah">`。

谢谢！

编辑：

你们中的一些人建议，我自己没有尝试过。我试过——我不想表现出不影响你。但没有成功：

```
string.replace(
     "(?<!\"|\\w|=)\"(?!\\ |\")((?:[^\"]++|\")+?)(?<!\\ |\")\"(?![\"A-Za-z\u00C0-\u02FF\u0370-\u1EFF])()", 
     "“$1”"); 
```

但我无法设法不翻译 HTML 标签中的那些引号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T11:34:19.387

为此使用正则表达式会很麻烦，因为 HTML 不是[常规语言](http://en.wikipedia.org/wiki/Regular_language)。您的用例是如此有限（基本上，只是跳过属性值周围的引号），通过足够的努力（就您而言），您可能能够为它想出一个正则表达式，但我会怀疑（尤其是因为在 the`=`和in 属性之间可以有任意数量的任何类型的空格`"`，这可能使它们看起来很像文本）。

要可靠地做到这一点，您必须真正*解析*HTML，并且只处理非标记文本。但是，您不必编写解析器，您可以使用已经编写的几个中的任何一个。[JSoup](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CHIQFjAC&url=http://jsoup.org/&ei=h9a4T_TTPM358QOR0r3MCg&usg=AFQjCNGlZWM77KWn7rklyQkcisWaUuAq0w)是一个特别有名的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T11:36:52.793

# lotus-notes - 通过按钮创建响应文档

> ID：10672956
> 
> 赞同：0
> 
> 时间：2012-05-20T11:19:06.923
> 
> 标签：lotus-notes, xpages

我有两种形式，组织和联系。Contact 是对 Org 的响应，每个表单都有一个 XPage，可以在其中填写、保存表单等。直接打开 edit_contact.xsp 并创建文档（不是对 org 的响应）时，一切正常。

在 edit_org.xsp 上，我有一个带有 2 个事件的按钮。第一个将一些值复制到 sessionScope 中，以便我可以将它们继承到 Contact 中。第二个是“创建响应文档”事件，它创建一个新响应，其父 ID 为当前组织文档，并将用户发送到 edit_contact.xsp。按下按钮会正确更改 XPage，并且字段继承工作正常，但在联系表单上按下“提交”不会保存任何内容，也不会创建任何文档。

这个完全相同的设置在另一个数据库中可以 100% 工作，我不知道为什么它在这里不能正常工作。我想念的地方是否有一个不起眼的设置？

```
<xp:button value="Create Contact" id="button1" rendered="#{javascript:!document1.isEditable()}">
<xp:eventHandler event="onclick" submit="true" refreshMode="complete">
    <xp:this.action>
        <xp:actionGroup>
            <xp:executeScript>
                <xp:this.script>
                    <![CDATA[#{javascript:var doc = document1.getDocument();

                    sessionScope.PFirstName = doc.getFirstItem("P_Firstname").getValueString(); 
                    sessionScope.PSurname = doc.getFirstItem("P_Surname").getValueString(); 
                    sessionScope.PFamily = doc.getFirstItem("P_Family").getValueString(); 
                    sessionScope.PDOB = doc.getFirstItem("P_DOB") 
                    sessionScope.PAGE = doc.getFirstItem("P_Age").getValueString();}]]
                </xp:this.script>
            </xp:executeScript>
                <xp:createResponse name="/edit_contact.xsp" parentId="#{javascript:document1.getNoteID()}">
                </xp:createResponse>

        </xp:actionGroup>
    </xp:this.action>
</xp:eventHandler>
</xp:button>` 
```

这是一个链接，显示了我正在尝试做的事情（减去字段继承）：

[http://min.us/mKSJED8tT](http://min.us/mKSJED8tT)

目前表单和视图都可以工作，但使用“响应”表单创建的文档似乎不是响应文档 - 它没有 $REF 字段。此设置在不同的数据库中完美运行 - 发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:06:50.567

It would be useful to get an update on two key points made by others:

1.  Is ignoreRequestParams set on your response document datasource? If not, regardless of what you're trying to define for the second datasource, it's UNID etc are pulled from the request parameters. So both datasources are effectively the same datasource.
2.  Is it throwing a validation error? If so, nothing will be saved.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:41:34.627

而不是“推”的方法去“拉” - 只需打开带有父文档的 url 参数的响应页面。在它的 postNewDocument 事件中从它初始化字段值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:57:24.647

有两个可能的问题：

首先，使用 getFirstItem("x") 不是最佳做法。所以：

```
sessionScope.PDOB = doc.getFirstItem("P_DOB") 
```

将在 sessionScope 中存储一个 NotesItem 将不起作用。建议使用：

```
sessionScope.PDOB = doc.getItemValueString("P_DOB"); 
```

其次，使用 getNoteID() 可能不会返回您想要的内容（这是文档的 UNID）。请改用 .getDocument().getUniversalID() 。

```
<xp:createResponse 
     name="/edit_contact.xsp" 
     parentId="#{javascript:document1.getDocument().getUniversalID()}">
</xp:createResponse> 
```

-编辑-/Newbs

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T17:20:21.427

如果没有看到任何代码，很难判断可能会发生什么。由于它在另一个数据库中适用于您，这可能是 ACL 问题吗？您登录的用户（可能是匿名用户）在哪里没有创建文档的能力？

# maven - 通过 Maven 程序集插件将“jar 文件及其依赖项”添加到最终 .Zip

> ID：10672957
> 
> 赞同：1
> 
> 时间：2012-05-20T11:19:07.173
> 
> 标签：maven, maven-3, maven-assembly-plugin

我想通过 Maven Assembly Plugin 制作一个 .Zip 文件并将这些文件放入其中：

1.  可执行jar
2.  lib文件夹中的相关类
3.  运行该 jar 的脚本
4.  一个文件夹，其中包含一些其他依赖项（如 lib 文件夹）和由于这些依赖项而需要的其他类（jar）！

    我的问题是关于第 4 点：有没有办法自动放置这些依赖项？

谢谢 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:35:12.740

maven 组装网站有以下示例，我认为可以回答您的大部分问题：[http ://maven.apache.org/plugins/maven-assembly-plugin/examples/single/index.html](http://maven.apache.org/plugins/maven-assembly-plugin/examples/single/index.html)

# objective-c - SimpleAudioEngine 总是发挥同样的效果？

> ID：10672959
> 
> 赞同：0
> 
> 时间：2012-05-20T11:19:23.980
> 
> 标签：objective-c, cocos2d-iphone, simpleaudioengine

我录制了一些文件，然后播放：

```
NSArray *dirPaths;
    NSString *docsDir;
    dirPaths = NSSearchPathForDirectoriesInDomains(
                                                   NSDocumentDirectory, NSUserDomainMask, YES);
    docsDir = [dirPaths objectAtIndex:0];
    NSString *soundFilePath = [docsDir
                               stringByAppendingPathComponent:@"temp0.caf"];

 //play
[[SimpleAudioEngine sharedEngine] preloadEffect:soundFilePath];
    [[SimpleAudioEngine sharedEngine] playEffect:soundFilePath  pitch:1.5f pan:0.0f gain:0.3f]; 
```

它第一次工作，但第二次它再次播放相同的文件，即使我已经录制了一些其他文件。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:43:44.190

也许您的音频引擎正在预加载该效果并保持该预加载，请尝试：

```
[[SimpleAudioEngine sharedEngine] preloadEffect:nil];
[[SimpleAudioEngine sharedEngine] preloadEffect:soundFilePath];

    [[SimpleAudioEngine sharedEngine] playEffect:soundFilePath  pitch:1.5f pan:0.0f gain:0.3f]; 
```

此外，何时何地调用该代码。它是在你的记录之后调用的，对吗？也许尝试：

```
NSArray *dirPaths = nil;
    NSString *docsDir = nil; 
```

在顶部。试试这个，如果它不起作用我需要看你的录音代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:27:06.467

我认为正在发生的是您的音频文件拒绝被新文件覆盖。也许您应该尝试在用户每次录制文件时更改文件的名称。这样当他录制时，您将文件保存为字符串，格式为：

```
[NSMutableString stringWithFormat:@"temp%d.caf",number]; 
```

然后每当用户想要记录时，您将“数字”增加一。

```
number = number +1; 
```

# php - 如何正确关闭此 php 语句？

> ID：10672961
> 
> 赞同：0
> 
> 时间：2012-05-20T11:20:31.650
> 
> 标签：php, if-statement, syntax

我试图从我从更复杂的行列表等中窃取的一些元素中创建一个简单的列表，我只需要列出用逗号分隔的单行中的值。

```
<?php foreach ($document_items as $document_item)
                {
                    if ($document_item->document_id == $document->id)
                            {
                                    if (nbf_common::nb_strlen($document_item->product_code) > 0)
                                    {
                                    echo nbf_common::nb_strlen($document_item->product_code);
                                    } 
                            ;}  ?> 
                ;} ?>

                    <?php  } ?> 
```

我得到的结果如下 "3 ;} ?> 3 ;} ?> 4 ;} ?> 3 ;} ?> "

提前致谢

弥迦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T11:24:55.033

试试这个

```
<?php
foreach ($document_items as $document_item)
                {
                    if ($document_item->document_id == $document->id)
                            {
                                    if (nbf_common::nb_strlen($document_item->product_code) > 0)
                                    {
                                        echo nbf_common::nb_strlen($document_item->product_code);
                                    } 
                            } 
                } 

?> 
```

更详细的[PHP 标签](http://www.php.net/manual/en/language.basic-syntax.phptags.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T11:41:10.180

更改#9、#10，删除#11 行。你正在做的是打印字符：`;} ?>` 并且在语法上是错误的。这是正确的：

```
<?php foreach ($document_items as $document_item)
{
    if ($document_item->document_id == $document->id)
    {
        if (nbf_common::nb_strlen($document_item->product_code) > 0)
        {
            echo nbf_common::nb_strlen($document_item->product_code);
        } 
    } // here
} // here
?> 
```

同样对于“逗号分隔”部分，将所需值放入变量中并在最后回显。可能是这样的：

```
<?php
$string = '';
foreach ($document_items as $document_item)
{
    if ($document_item->document_id == $document->id)
    {
        if (nbf_common::nb_strlen($document_item->product_code) > 0)
        {
            $string .= nbf_common::nb_strlen($document_item->product_code).',';
        } 
    }
}

echo rtrim($string, ','); // remove the last comma
?> 
```

或使用临时数组将它们粘合到最后：

```
<?php
$lines = array();
foreach ($document_items as $document_item)
{
    if ($document_item->document_id == $document->id)
    {
        if (nbf_common::nb_strlen($document_item->product_code) > 0)
        {
            $lines[] = nbf_common::nb_strlen($document_item->product_code);
        } 
    }
}

echo implode(',', $lines); // bind them with comma
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T11:22:32.513

我不知道为什么你有所有这些额外的`?>`。模式是：

```
<?php

// PHP code goes here

?> 
```

即每个`<?php`都有一个匹配`?>`；不多不少。¹

* * *

[1.除了@Mihai在下面的评论中指出的情况......]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T11:31:44.390

要了解 php 标签，您可能想认为您在 HTML 文件中，并且您正在使用

在编写仅 PHP 的文件（类、接口、函数的特征列表和类似的没有模板的应用程序代码分组）时，建议在文件的第一个字符处打开而不是结束它。

但是，在编写模板文件时，建议使用 php 的[替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)：

```
<?php if($x): ?>
<?php elseif($y): ?>
<?php else: ?>
<?php endif; ?> 
```

而不是标准：

```
<?php if($x) { ?>
<?php } else if($y) { ?>
<?php } else { ?>
<?php } ?> 
```

# ios - 代表没有回应

> ID：10672973
> 
> 赞同：1
> 
> 时间：2012-05-20T11:22:16.233
> 
> 标签：ios, delegation, respondstoselector

我正在尝试在两个 Viewcontroller 之间使用委托，但不幸的是我的委托没有被解雇。我希望有人可以帮助我解决问题。我有一个名为 MapBackgroundViewController 的 ViewContoller 和一个名为 MapsViewController。如果 MapsBackgroundViewController 的 SegmentedControl 发生变化，应通知 MapsViewController。（我实际上尝试在 iPhone 上用 patrial curl 实现类似地图应用的东西）

这是我的代码的一部分：

MapBackgroundViewController.h

```
@protocol ChangeMapTyp <NSObject>
@required
- (void)segmentedControllChangedMapType:(MKMapType) type ;
@end

@interface MapBackgroundViewController : UIViewController{
IBOutlet UISegmentedControl *segmentedControl;
MKMapType mapType;
id < ChangeMapTyp> delegate;

}

@property IBOutlet UISegmentedControl *segmentedControl;

@property MKMapType mapType;

@property(strong)id delegate;

- (IBAction)segmentedControllChanged:(id)sender; 
```

MapBackgroundViewController.m

```
@interface MapBackgroundViewController ()

@end

@implementation MapBackgroundViewController
@synthesize segmentedControl, mapType, delegate;

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.

[self setDelegate:self];

NSLog(@"%@",self.delegate);

}

- (IBAction)segmentedControllChanged:(id)sender {

if (segmentedControl.selectedSegmentIndex == 0) {
    mapType = MKMapTypeStandard;
}else if (segmentedControl.selectedSegmentIndex == 1) {
    mapType = MKMapTypeSatellite;
} else if (segmentedControl.selectedSegmentIndex == 2) {
 //   [self.delegate setMapType:MKMapTypeHybrid];
    mapType = MKMapTypeHybrid;
}

//Is anyone listening

NSLog(@"%@",self.delegate);

if([self.delegate respondsToSelector:@selector(segmentedControllChangedMapType:)])
{
    //send the delegate function with the amount entered by the user
    [self.delegate segmentedControllChangedMapType:mapType];
}

[self dismissModalViewControllerAnimated:YES];

} 
```

MapsViewController.h

```
#import "MapBackgroundViewController.h"

@class MapBackgroundViewController;

@interface MapsViewController : UIViewController<MKMapViewDelegate,
UISearchBarDelegate,  ChangeMapTyp >{
 IBOutlet MKMapView *map;
}

@property (nonatomic, retain) IBOutlet MKMapView *map;

@end 
```

MapsViewController.m（以下方法由于某种原因从未被调用）

```
 - (void)segmentedControllChangedMapType: (MKMapType) type{
    map.mapType = type;
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T11:52:28.467

在`MapBackgroundViewController`您已将`delegate`属性设置为`self`，因此委托是`self`- ( `MapBackgroundViewController`) 因此，当您执行检查时，`if([self.delegate respondsToSelector:@selector(segmentedControllChangedMapType:)])`它返回`NO`，因为`self.delegate`（即`self`，即`MapBackgroundViewController`）未实现此方法。如果你想让你`MapsViewController`成为代表，`MapBackgroundViewController`你必须有一个实例`MapsViewController`（例如调用`myMapsViewController`），然后设置`self.delegate = myMapsViewController`.

# haskell - 导出模板 haskell 生成的定义

> ID：10672981
> 
> 赞同：4
> 
> 时间：2012-05-20T11:24:23.550
> 
> 标签：haskell, code-generation, template-haskell

我的模块包含定义，其中一部分被导出（在`module`子句中）。我也想导出 Template Haskell 生成的声明。但是由于似乎没有办法`module`用 TH 修改子句，所以我不能这样做。

是否可以指定应该导出 TH 生成的声明？或者也许还有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T11:56:34.097

您需要导出生成的 TH 声明的名称。例如，如果您有一个生成`data B = C | D`声明的 TH 函数，您只需简单地 export `module Mymodule (B(C,D)) where ...`。

如果您不指定导出列表，则该模块中的所有声明都将被导出。您可以做的一个小技巧是将所有生成的 TH 函数放在一个模块中，然后重新导出该模块：

```
{-# LANGUAGE TemplateHaskell #-}
-- Put all of the generated stuff in one module
module Bla.Generated where

generateAFunctionCalled "foo"
generateAFunctionCalled "bar"

-- Re-export the generated module
module Bla (module Bla.Generated) where
import qualified Bla.Generated 
```

这样做的缺点是您不能为生成的函数放置黑线鳕文档，但这并不是您通常会做的事情。

# django - 如何正确配置 djcelery 结果后端到数据库

> ID：10672987
> 
> 赞同：10
> 
> 时间：2012-05-20T11:25:14.293
> 
> 标签：django, celery, djcelery

我正在尝试设置 djangocelery 以将任务结果存储在数据库中。

我设置：

```
CELERY_RESULT_BACKEND = 'djcelery.backends.database.DatabaseBackend' 
```

然后我同步并迁移了数据库（没有错误）。

芹菜正在工作并且任务得到处理（我可以得到结果），但管理员显示没有任务。数据库中有两个表`celery_taskmeta`和`djcelery_taskmeta`. 第一个保存结果，第二个显示在管理员中。任何人都知道如何正确配置它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-20T13:48:06.227

检查[文档](http://docs.celeryproject.org/en/latest/configuration.html#celery-result-backend)，当您使用 djcelery 时，设置`CELERY_RESULT_BACKEND="database"`或什至不费心编写此行，因为 djcelery 默认设置它。

结果存储在`celery_taskmeta`表中，您应该自己注册`djcelery.models.TaskMeta`到管理员：

```
# in some admin.py, which is contained by an app after `djcelery` in `INSTALLED_APPS`
# or directly in djcelery/admin.py

from djcelery.models import TaskMeta
class TaskMetaAdmin(admin.ModelAdmin):
    readonly_fields = ('result',)    
admin.site.register(TaskMeta, TaskMetaAdmin) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-03T08:11:34.947

正确答案的相关问题在[这里](https://stackoverflow.com/questions/5809408/monitoring-celery-what-should-i-use)。

您实际上应该运行

```
python manage.py celery worker -E 
```

和

```
python manage.py celerycam 
```

之后任务结果将显示在管理员中（Djcelery › 任务）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-13T03:45:29.893

移动配置更新，例如
app.conf.update(CELERY_RESULT_BACKEND='djcelery.backends.database.DatabaseBackend')

到文件 celery.py 的末尾为我做了诀窍。

# iphone - 如何从我的 iPhone 应用程序中找到整个设备的 CPU 消耗？

> ID：10672990
> 
> 赞同：1
> 
> 时间：2012-05-20T11:26:02.323
> 
> 标签：iphone, ios, system

我试图找到 API 来获取整个设备的 CPU 消耗。目前，我能够找出我的应用程序消耗的 CPU。但我对设备的 CPU 消耗没有任何帮助。任何帮助，将不胜感激..

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:33:30.013

虽然 Apple 没有提供这样的 API，但我不知道你是否可以使用下面的 github 代码。

虽然这段代码没有你想要的，但它可以帮助你。通过下面的github链接：

[https://github.com/erica/uidevice-extension](https://github.com/erica/uidevice-extension)

# asp.net-mvc-3 - 将 FileContentResult 文件导出为 ZIP

> ID：10672991
> 
> 赞同：1
> 
> 时间：2012-05-20T11:26:05.140
> 
> 标签：asp.net-mvc-3, zipfile

我使用 C#-MVC3。我有一个“导出”页面。我有一些函数可以从数据库中导出不同的表，每个函数都从表中创建一个 CSV 文件并将一个 FileContentResult 文件返回给用户。

现在我想为“全部导出”创建一个按钮，一次下载所有文件。我尝试使用 ZipFile，但它只获取文件名和路径 - 保存在服务器上的文件，而不是“FileContentResult”文件。

所以我想将“FileContentResult”文件临时保存在服务器上，压缩并删除它们 - 但我找不到如何保存“FileContentResult”文件。

如果你能帮助我或给我另一个想法，我会很高兴听到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:41:53.153

我的解决方案：

```
 public ZipFile DownloadAllToZip()
    {
        string path = "c:\\TempCSV";
        try
        {
            if (Directory.Exists(path))
            {
                EmptyFolder(path);
            }
            else
            {
                DirectoryInfo di = Directory.CreateDirectory(path);
            }
            List<FileContentResult> filesToExport = GetAllCSVs();

            foreach (var file in filesToExport)
            {
                try
                {
                    using (FileStream stream = new FileStream(path + "\\" + file.FileDownloadName, FileMode.CreateNew))
                    {
                        using (StreamWriter writer = new StreamWriter(stream, Encoding.UTF8))
                        {
                            byte[] buffer = file.FileContents;
                            stream.Write(buffer, 0, buffer.Length);
                            writer.Close();
                        }
                    }
                }
                catch { }
            }
        }
        catch{ }

        Response.Clear();
        Response.BufferOutput = false;
        Response.ContentType = "application/zip";
        Response.AddHeader("content-disposition", "attachment; filename=MaterialAssetTracker.zip");
        ZipFile zip= new ZipFile();
        using (zip)
        {
            zip.CompressionLevel = CompressionLevel.None;
            zip.AddSelectedFiles("*.csv", path + "\\", "", false);
            zip.Save(Response.OutputStream);
        }
        Response.Close();
        EmptyFolder(path);
        return zip;
    } 
```

# android - 复制并粘贴应用程序？

> ID：10672993
> 
> 赞同：0
> 
> 时间：2012-05-20T11:26:14.960
> 
> 标签：android, eclipse

我使用 admob 为我在 eclipse 中的所有下一个应用程序完成了一个“基础应用程序”，请联系我们......

我可以将这个项目导入一个新的应用程序并从那里工作吗？或者只是复制并粘贴所有内容并更改名称？如何？就像刚开始一个新的应用程序一样的所有东西，然后从那里开始工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T11:33:33.827

您可以将您的基础应用程序转换为库项目（请参阅[http://www.vogella.com/blog/2011/03/03/android-library-projects/](http://www.vogella.com/blog/2011/03/03/android-library-projects/)），您的其他应用程序将包含此库。

一个问题是库中的 AndroidManifest.xml 被忽略，因此您可能需要手动将活动、服务等从库清单复制到真实清单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:39:24.490

I would put my "base app" project in a code repository (git in my case), and then just clone it, change the output name, libs etc in any build scripts. Check that into a new repository and keep working from there.

If you don't use git/svn/whatever just copy your source files and create a new project in eclipse, it's probably easier and less error prone than copying the project files as well and trying to remember all the places that refer to your old project.

Might be a little off-topic but what I usually do is I have pure source (and some build scripts) in a code repository and then outside that (in my eclipse workspace) I create the eclipse project and link the source files into my project. So if I trigger builds with eclipse I get the build output in my project directory while keeping my source directory clean.

# regex - 显示带有 count(1s) = count(0s) 的位串是不规则的

> ID：10672996
> 
> 赞同：3
> 
> 时间：2012-05-20T11:26:24.700
> 
> 标签：regex, algorithm, regular-language, automata, proof

令 L 为由字母表 {0,1} 上的字符串组成的语言，其中包含相等数量的 1 和 0。

例如：

```
000111
10010011
10
1010101010 
```

你如何证明 L 不是常规语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T12:35:33.800

我认为您可以使用完全相同的参数来证明 {0^n 1^n: n > 0} 不规则，因为您可以自由选择与抽水引理相矛盾的字符串。

假设 L 是正则的。所以它必须满足某个整数 n（泵送长度）的泵送引理。取属于 L 的字符串`S=0^n 1^n`。根据引理，它可以被拆分为`S=xyz`，`|xy| <= n`，`|y|>0`并且`x y^i z`属于 L ，对于所有`i>=0`。请注意，它`y`必须仅包含零。现在 pump `y`，你只是在字符串中添加零，它不再属于 L。所以你有一个矛盾。所以 L 不是正则的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T11:33:00.713

我不知道正式的证明，但直觉是你不能构造一个 DFA 来识别这种语言（考虑到它需要无限数量的状态来跟踪表单`111...111000...000`或类似的字符串）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T13:48:44.207

可以使用常规语言的泵引理给出正式证明，如下所示：

假设语言是规则的。所以它必须满足 const 整数 p 的泵引理。设`s`0 和 1 数量相等的任意字符串。那么 s 可以分为 3 部分 x,y,z 使得`|xy|<=p`, `|y|>0`, 那么`x(y^i)z`, where`i>=0`也应该属于 L。

让我按如下方式划分字符串：

*   `y`是字符串的一部分，其 0 和 1 的数量不相等。
*   `x`可能是`s`before的子字符串`y`。
*   `z`可能是之后的部分`y`。

现在，如果我通过取 来“抽空”字符串`i = 0`，那么剩下的字符串将是唯一`xz`肯定会有不相等数量的 0 和 1 的不属于语言 L的字符串。

因此，我们遇到了一个矛盾，因为我们之前假设 L 是正则的。

因此，它是不规则的。

如果理解上述部分有点困难，请考虑一个示例。设 p 为整数 5。设`0+1000+11101`L 中的字符串。（+ 表示串联）设 x 为“ `0`”，y 为`"1000"`，z 为余数`11101`。那么如果我们执行`x(y^i)z`，`i=0`剩下的字符串将`011101`不是 L 的一部分。因此是不规则的。

注意：这个例子只是一个让你理解逻辑的例子。不能随机决定 p 的值。

# php - 将 echo 调用转换为 gettext 调用

> ID：10672997
> 
> 赞同：4
> 
> 时间：2012-05-20T11:26:46.277
> 
> 标签：php, gettext

我负责一个需要 *i18n*ed 的项目。唯一的问题是原始开发人员在编写代码时没有考虑到这一点，因此所有字符串都只是“硬编码”。

真是一团糟，我一直在看代码，发现了所有这些情况：

*   echo 调用中的字符串：

    echo "我是一个字符串";

*   echo 调用中的字符串并与 HTML 混合：

    echo "<div><span href=''>我是一个字符串</span></div>";

*   代码的非 PHP（纯 HTML）部分中的字符串。

*   echo 调用中带有 PHP 变量的字符串：

    echo "此列表中有 $number 项";

我的问题是：你知道有什么程序可以自动完成将所有这些转换为`gettext _()`调用的繁琐工作吗？

这个项目很大，我正在考虑自己写（我相信我将来会再次面临这个问题）但我不想重新发明轮子。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T11:46:08.093

您可以使用正则表达式和 sed 来替换至少其中一些回显消息。但请记住，当您使用自动文本替换时，您可能会破坏比您想要修复的更多内容。