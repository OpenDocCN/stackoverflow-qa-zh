# StackOverflow 问答 12011000-12011999

# android - 为什么我的警报对话框崩溃

> ID：12011000
> 
> 赞同：1
> 
> 时间：2012-08-17T18:09:18.417
> 
> 标签：android, android-alertdialog

最近，我遵循了有关如何创建警报对话框的教程，当我单击删除按钮时，它应该在删除之前向我显示警报，但它却崩溃了。有人能告诉我我的错误在哪里吗？

下面是我的代码：

```
// Delete button click event
    btnDeleteEvent.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // alerting user before deleting event
            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                    getApplicationContext());
            // set title
            alertDialogBuilder.setTitle("Warning!");
            // set dialog message
            alertDialogBuilder
                    .setMessage("Are you sure to delete event?")
                    .setCancelable(false)
                    .setPositiveButton("Yes",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    // if yes, deleting event in background
                                    // thread
                                    new DeleteEvent().execute();
                                }
                            })
                    .setNegativeButton("No",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    // if this button is clicked, just close
                                    // the dialog box and do nothing
                                    dialog.cancel();
                                }
                            });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();
        }
    }); 
```

这是我的日志：

```
08-18 02:02:45.804: E/AndroidRuntime(1288): FATAL EXCEPTION: main
08-18 02:02:45.804: E/AndroidRuntime(1288): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
08-18 02:02:45.804: E/AndroidRuntime(1288):     at android.view.ViewRoot.setView(ViewRoot.java:509)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at android.app.Dialog.show(Dialog.java:241)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at com.stts.sparetimetradingsystem.employer.EditEventActivity$5.onClick(EditEventActivity.java:270)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at android.view.View.performClick(View.java:2408)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at android.view.View$PerformClick.run(View.java:8816)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at android.os.Handler.handleCallback(Handler.java:587)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at android.os.Looper.loop(Looper.java:123)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at java.lang.reflect.Method.invokeNative(Native Method)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at java.lang.reflect.Method.invoke(Method.java:521)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-18 02:02:45.804: E/AndroidRuntime(1288):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T18:10:50.783

尝试使用 Activity 的上下文而不是应用程序上下文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:11:26.073

使用 dialog.dismiss() 甚至将 getApplication 上下文更改为 YourActivity.this

可以参考[http://codinglookseasy.blogspot.in/2012/07/alert-box-code.html](http://codinglookseasy.blogspot.in/2012/07/alert-box-code.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:15:30.830

根据[这个相关问题](https://stackoverflow.com/questions/5796611/dialog-throwing-unable-to-add-window-token-null-is-not-for-an-application-wi)，您应该在构造函数中使用`this`而不是。`getApplicationContext()`

```
public void onClick(View arg0) {
    // alerting user before deleting event
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this); 
```

# javascript - 将函数数组作为参数传递

> ID：12011002
> 
> 赞同：3
> 
> 时间：2012-08-17T18:09:27.487
> 
> 标签：javascript, jquery

这是我的代码：

```
function test(e, f) {
    for (var i = 0; i < e.length; i++) {
        $('#clickme').append("<button id='op" + i + "'>" + e[i] + "</button>")
        $('#op' + i).click(function () {
            f[i]();
        })
    }
}

$(function postPunk() {
    var func1 = function () {
        alert('1');
    }
    var func2 = function () {
        alert('2');
    }
    var func3 = function () {
        alert('3');
    }
    test(['Option1', 'Option2', 'Option3'], [func1, func2, func3]);
}) 
```

点击事件不调用函数。如果我在 click 事件中放置一个警报测试，它会很好地触发。

任何想法为什么这不起作用？将函数数组作为参数传递似乎是一个问题。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T18:14:34.267

与所有其他此类问题一样，`i`不断变化。

相反，试试这个：

```
for( var i=0; i<e.length; i++) {
    (function(i) {
        // your code that depends on i not changing
    })(i);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T18:14:49.220

这似乎是经典的 JavaScript 问题，它们都是最后一个值（或者`undefined`因为`f[3]`不存在），因为那是`i`循环之后的值。

尝试将函数引用直接传递给`click`处理程序。

```
function test(e, f) {
    for (var i = 0; i < e.length; i++) {
        $('#clickme').append("<button id='op" + i + "'>" + e[i] + "</button>")
        $('#op' + i).click(f[i])
    }
} 
```

或者，另一种解决方案是创建一个返回函数的函数。这将允许它“关闭”周围`i`。

```
function test(e, f) {
    var makeFunc = function(i) {
        return function() {
            f[i]();
        }
    };
    for (var i = 0; i < e.length; i++) {
        $('#clickme').append("<button id='op" + i + "'>" + e[i] + "</button>")
        $('#op' + i).click(makeFunc(i))
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:19:49.570

回调函数中的代码使用`i`循环结束后的值，因此它指向数组外部的索引。您需要在循环中使用闭包，以便每次迭代都获得自己的变量实例：

```
function test(e, f) {
  for (var i = 0; i < e.length; i++) {
    $('#clickme').append("<button id='op" + i + "'>" + e[i] + "</button>");
    (function(i){
      $('#op' + i).click(function () {
        f[i]();
      });
    })(i);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T18:22:06.850

这是我如何让它工作的：http: [//jsfiddle.net/fH2Dk/3/](http://jsfiddle.net/fH2Dk/3/)

```
function test(e, f){    
     for(var i = 0; i < e.length; i++) {
         (function(i) {
            $('#clickme').append("<button id='op" + i + "'>" + e[i] + "</button>");
            $('#op' + i).click(function(){
                f[i]();
            });
        })(i);    
    }
} 
```

# c# - c#中的xmltextwriter路径

> ID：12011003
> 
> 赞同：0
> 
> 时间：2012-08-17T18:09:28.073
> 
> 标签：c#, asp.net, xml, xmltextwriter

我正在尝试使用 xmltextwriter 并分配需要用于写作的路径。我正在尝试这个：

```
 string path = "~/Uploads/site/" + Current.User.Id + .kml";                                  
XmlTextWriter xtr = new XmlTextWriter(path, System.Text.Encoding.UTF8); 
```

我希望将文件保存在网站目录中的 uploads/site/ 文件夹中，但出现错误：

```
Could not find a part of the path 'c:\windows\system32\inetsrv\~\Uploads\site\16.kml'. 
```

我想知道如何将所需的路径分配给 xmltextwriter。提前致谢， Laziale

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:12:39.673

使用 server.MapPath 方法获取正确的路径。

```
 string path =  Server.MapPath("~/Uploads/site/" + Current.User.Id + ".kml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:11:54.990

这是一个错误

```
 string path = "~/Uploads/site/" + Current.User.Id + .kml"; 
```

应该

```
 string path = "~/Uploads/site/" + Current.User.Id + ".kml"; 
```

它仍然不起作用，答案在这个问题中说明了[Map the physical file path in asp.net mvc](https://stackoverflow.com/questions/2834938/map-the-physical-file-path-in-asp-net-mvc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:14:53.093

您收到此错误是因为您需要使用 Server.MapPath 否则代码会尝试在您的电脑上而不是服务器上进行映射

```
string path = Server.MapPath("~/Uploads/site/" + Current.User.Id + ".kml");
```

# grails - 在 JBoss 7 中部署 Grails Atmosphere 应用程序

> ID：12011010
> 
> 赞同：1
> 
> 时间：2012-08-17T18:10:11.347
> 
> 标签：grails, jboss, websocket, atmosphere

问候，

我正在尝试使用[大气插件使](http://www.grails.org/plugin/atmosphere)[这个示例](https://github.com/Atmosphere/atmosphere/tree/master/samples/chat)在 Grails 2.1 中工作。在 Tomcat 的开发环境中运行时，它不起作用，可能是因为 Tomcat 不支持 Web 服务。所以我将它部署在 JBoss 7.1 上。它也不起作用。并且可以在日志文件中找到以下异常

```
AtmosphereFramework exception: java.lang.IllegalStateException: The servlet or filters
that are being used by this request do not support async operation 
```

我在 Grails 中找到了与异步 servlet 支持相关的[文章。](http://burtbeckwith.com/blog/?p=1251)似乎`Servlet3AsyncWebXmlProcessor`应该向 web.xml 添加异步支持。但有人应该调用它。我认为气氛插件负责允许异步通信。

我错过了什么吗？你能帮忙让它在AS7上工作吗？

理想情况下，我想弄清楚在开发环境中运行大气应用程序的方式？可能吗？

# ios - 在哪里加载我的数组？

> ID：12011011
> 
> 赞同：0
> 
> 时间：2012-08-17T18:10:23.843
> 
> 标签：ios, uitableview

```
 - (void)viewWillAppear:(BOOL)animated
 {

goals = [[NSArray alloc] init];
goals = [[self.operation valueForKeyPath:@"goal.goalNaam"] allObjects]  ;

[self.tableView reloadData]; 
```

正如您在上面的代码中所见，我正在 viewwillappear 中为我的 tableview 加载我的元素。当用户向表中添加某些内容时（添加发生在不同的视图中），它被添加到 Core Data 并在 tableview 再次出现时加载数组（在被解雇的“add-an-element-view”之后），现在我想从表中删除一些东西。但问题是我们现在停留在同一个视图（tableview）中，所以我的数组没有重新加载（因为 viewwillappear 没有执行）。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:30:10.993

你可以调用“[self viewWillAppear:YES];” 从核心数据中删除数据后，数据从同一个视图（Tableview）重新加载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:37:23.737

您将数据加载到`cellForRowAtIndexPath`. 这称为单元格进入视图，并且仅加载视图中（或几乎在视图中）的单元格。

要强制重新加载某些内容，请使用`reloadRowsAtIndexPaths`其他`reload...`方法之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:19:10.877

查看[NSFetchedResultsControllerDelegate](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html)。您可以将您的 VC 设置为获取结果委托，并在数据结构更改时收到通知。

# apache - Apache 使用 Rewrite 或 serveralias 将 .net、.org、.co 重定向到 .com

> ID：12011014
> 
> 赞同：0
> 
> 时间：2012-08-17T18:10:26.753
> 
> 标签：apache, mod-rewrite

我有一个网站。我为我的网站购买了所有 (mydomain.com|net|org|co) 域。现在，我想将我的所有请求重定向到 mydomain.com。目前，在我的 httpd.conf 中，我有将 http 请求转发到 https 的重写规则。

`For forwarding all http requests to https
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) `[https://%](https://%){HTTP_HOST}%{REQUEST_URI}`` 

我将现有设置与[此答案](https://stackoverflow.com/q/1278262/1300040)相结合，并尝试了以下代码： `RewriteEngine on
RewriteCond %{HTTPS} off
RewriteRule (.*) `[https://%](https://%){HTTP_HOST}%{REQUEST_URI}`
RewriteCond %{HTTP_HOST} !^example.org$
RewriteRule ^ `http://example.org%{REQUEST_URI}` [L,R=301]` 

它适用于 http 请求，但不适用于 https（[https://mydomain.net/info](https://mydomain.net/info)）。我获得了 SSL 证书`mydomain.com`。它正在向我显示此连接不受信任页面。

处理这种情况的最佳方法是什么。任何人都可以指导我吗

在此先感谢
死人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:25:04.247

Try this:

```
RewriteEngine on
RewriteCond %{HTTPS} off
RewriteRule (.*) https://example.com%{REQUEST_URI}
RewriteCond %{HTTP_HOST} !^example.com$
RewriteRule ^ http://example.com%{REQUEST_URI} [L,R=301] 
```

# c# - 我想对列表进行排序，但它不起作用

> ID：12011016
> 
> 赞同：0
> 
> 时间：2012-08-17T18:10:29.513
> 
> 标签：c#, c#-4.0, c#-3.0

我有一个产品类别：

```
 public class Product
{
    private string firstname;
    private string lastname;
    private string email;

    public Product()
    {
    }

    public Product(string firstname, string lastname, string email)
    {
        this.Firstname = firstname;
        this.Lastname = lastname;
        this.Email = email;
    }

    public string Firstname
    {
        get
        {
            return firstname;
        }
        set
        {
            firstname = value;
        }
    }

    public string Lastname
    {
        get
        {
            return lastname;
        }
        set
        {
            lastname = value;
        }
    }

    public string Email
    {
        get
        {
            return email;
        }
        set
        {
            email = value;
        }
    }

    public virtual string  GetDisplayText(string sep)
    {
        return Firstname + sep + Lastname + sep + Email;
    }

} 
```

我在做 ICompare 的地方再上一堂课

```
 public class PersonSort : IComparer<Product>
{
    public enum CompareType
    {
        Email
    }

    private CompareType compareType;

    public PersonSort(CompareType cType)
    {
        this.compareType = cType;
    }

    public int Compare(Product x, Product y)
    {
        if (x == null) throw new ArgumentNullException("x");
        if (y == null) throw new ArgumentNullException("y");

        int result;
        switch (compareType)
        {
            case CompareType.Email:
                return x.Email.CompareTo(y.Email);
            default:
                throw new ArgumentNullException("Invalid Compare Type");
        }
    }
} 
```

然后我调用 ProductList 类

```
 List<Product> person;

          public void Sort()
    {
        person.Sort(new PersonSort(PersonSort.CompareType.Email));
    } 
```

然后在 Form 中调用这个方法：

```
 private ProductList products = new ProductList();

           private void button4_Click(object sender, EventArgs e)
    {
        products.Sort();
    } 
```

但它显示空异常：**对象引用未设置为对象的实例。**** 你能帮帮我吗？如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:14:00.363

`null`您在某处有参考。确保列表已初始化。还有，`Product.Email`设置正确吗？

您可能想`StringComparer`改用。代替

```
return x.Email.CompareTo(y.Email); 
```

和

```
return StringComparer.Ordinal.Compare(x.Email, y.Email); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:12:18.927

根据提供的代码，`person`in`ProductList`未初始化。话虽如此，如果您在问题中包含异常的调用堆栈，您将得到明确的答案。

```
List<Product> person; 
```

到

```
List<Product> person = new List<Product>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T19:30:15.420

`List<Product> person;`

这在哪里被赋予了价值？您尚未包含创建`person` 列表并向其中添加项目的代码（或将项目添加到列表然后将其分配给`person`等）。那里的错误可能会导致问题。

```
public int Compare(Product x, Product y)
{
    if (x == null) throw new ArgumentNullException("x");
    if (y == null) throw new ArgumentNullException("y"); 
```

这是一个坏主意，因为它是文档的一部分，`IComparer<T>.Compare`可以传入 null，并且 null 参数的计算结果低于任何其他参数。虽然我不认为它与`List<T>.Sort()`它一起使用，但使用比较器的方法仍然可以依赖于传入 null 是安全的。因此：

```
public int Compare(Product x, Product y)
{
   if(ReferenceEquals(x, y))//either both null or both the same instance
     return 0;
   if(x == null)
     return -1;
   if(y == null)
     return 1; 
```

这可能是相关的。

最后，如果一个`Email`字段为空，它可能会抛出

```
return x.Email.CompareTo(y.Email) 
```

最好的办法是在构造函数和设置器中包含代码，这样就不可能发生这种情况。删除无参数构造函数，向另一个构造函数和检查器添加一个空检查，以便它`ArgumentNullException`在某些东西创建虚假`Product`而不是稍后抛出。

您还可以向比较器添加检查：

```
if(x.Email == null || y.Email == null)
  throw new Exception("Cannot compare a user with null email"); 
```

这不会修复错误，但会帮助您追踪它。

# regex - Perl 提取文本

> ID：12011019
> 
> 赞同：4
> 
> 时间：2012-08-17T18:10:57.440
> 
> 标签：regex, perl, search

我已经为此工作了很长时间！我会很感激你的帮助...

我的文档会是什么样子：

```
<text>
<text> command <+>= "stuff_i_need" <text>
<text>
<text> command <+>= stuff <text>
<text>
<text> command <+>= -stuff <text>
<text> 
```

*   任何带有缠结括号的东西都是可选的
*   东西可以是任何东西（苹果、橙子、香蕉），但这是我需要提取的
*   命令是固定的

到目前为止我的代码：

```
#!/usr/bin/env perl

use warnings;
use strict;
use Text::Diff;

# File Handlers 
open(my $ofh, '>in.txt');
open(my $ifh, '<out.txt');

while (<$ifh>)
{
    # Read in a line
    my $line = $_;
    chomp $line;

    # Extract stuff
    my $extraction = $line;

    if ($line =~ /command \+= /i) {        
        $extraction =~ s/.*"(.*)".*/$1/;
        # Write to file
        print $ofh "$extraction\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:34:45.423

一些东西：

1.  对于提取，不要使用替代（即，使用`m//`和不`s///`）。如果您使用匹配项，则匹配项中的括号组将作为列表返回（如果您愿意，可以分配给`$1`、`$2`、`$3`等）。
2.  `=~`绑定要匹配的变量。所以你想`$extraction`真正成为`$line`.
3.  你的`.*`比赛太贪心了，会阻止比赛按照你想要的方式成功。我所说的“贪婪”的意思是它`.*`会匹配你行中的尾随`"`。它将消耗该行上的其余输入，然后尝试匹配该输入`"`并失败，因为您已到达该行的末尾。

你想指定这个词可能是什么。例如，如果是字母，则匹配`[a-zA-Z]`

```
my ($extraction) = $line =~ /command \+= "([a-zA-Z]*)"/; 
```

如果它是一个数字，你想要`[0-9]`：

```
my ($extraction) = $line =~ /command \+= "([0-9]*)"/; 
```

如果它可以是除了 之外的任何东西`"`，请使用`[^"]`，这意味着“除了”之外的任何东西`"`：

```
my ($extraction) = $line =~ /command \+= "([^"]*)"/; 
```

尝试匹配您正在寻找的东西而不是毯子通常会有所帮助`.*`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:31:09.893

基于示例输入：

```
 if ($line =~ /command\d*\s*\+?=\s*["-]?(\w+)"?/i) {    
    $extraction = $1; 
    print "$extraction\n";
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:35:54.283

以下正则表达式可以帮助您：

```
m{
    (?<= = )        # Find an `=`
    \s*             # Match 0 or more whitespaces
    (?:             # Do not capture
        [ " \- ]    # Match either a `"` or a `-`
    )?              # Match once or never
    (               # Capture
        [^ " \s ]+  # Match anything but a `"` or a whitespace
    )
}x; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T18:36:32.443

下面的单行将提取一个单词（一个不带空格的字符序列），该单词后面有一个等号，前面有一个可选的加号，并用可选的引号括起来。它将读取`in.txt`和写入`out.txt`.

```
perl -lne 'push @a, $1 if /command\s*\+?=\s*("?\S+"?)/ }{ 
    print for @a' in.txt > out.txt 
```

完整的代码 - 如果您更喜欢脚本形式 - 是：

```
BEGIN { $/ = "\n"; $\ = "\n"; }
LINE: while (defined($_ = <ARGV>)) {
    chomp $_;
    push @a, $1 if /command\s*\+?=\s*("?\S+"?)/;
}
{
    print $_ foreach (@a);
} 
```

[由O 模块](http://search.cpan.org/perldoc?O)的 Deparse 函数提供。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T21:47:30.940

一个轻量级的解决方案。

```
#!/usr/bin/env perl
use warnings;
use strict;

open my $ifh, '<','in.txt';
open my $ofh, '>', 'out.txt';

while (<$ifh>)
{
    if (/
        \s command\s\+?=\s
        (?:-|("))?     # The word can be preceded by an optional - or "
        (\w+)
        (?(1)\1)\s+    # If the word is preceded by a " it must be end 
                       # with a "
        /x)
    {
        print $ofh $2."\n";
    }
} 
```

# vba - Excel中与数组项的字符串比较和与VBA的字符串比较

> ID：12011021
> 
> 赞同：0
> 
> 时间：2012-08-17T18:11:02.353
> 
> 标签：vba, excel

这可能是一个简单的，但我似乎无法找出问题所在：

```
if temp_array(1) = temp_string2 & temp_array(2) = "w" then
....
end if 
```

这些值为：

temp_array(1) = "test1"

temp_string2 = "test2"

temp_array(2) = "w"

我收到突出显示条件比较的类型不匹配错误...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:14:44.120

`&`是字符串连接，不是逻辑`and`。

```
if temp_array(1) = temp_string2 And temp_array(2) = "w" then 
```

# regex - 需要正则表达式来忽略特定的数字字符串

> ID：12011022
> 
> 赞同：1
> 
> 时间：2012-08-17T18:11:07.743
> 
> 标签：regex

所以我正在使用使用正则表达式来获取匹配项的 3rd 方应用程序。它会自动设置为仅匹配第一个匹配项，因为它仅在每页查找一条信息。我无法更改此设置，除非我希望它找到所有匹配项以显示为我很少希望它执行的数组。最后一个条件不适用于我想要的比赛。

我希望它找到的是 ID 代码。碰巧所有的 ID 都以 10 开头，后跟 4 个数字

例子：

```
104230 
```

所以我写了这个正则表达式

```
10[0-9]{4} 
```

唯一的问题是标题中有一个名为 10022008.js 的 .js 文件，由于它会自动选择第一个匹配项，因此所有 ID 都设置为此。

你如何让正则表达式忽略那个数字字符串和那个字符串？我所做的所有搜索都只有类似的忽略类型代码没有奏效

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:14:21.950

将“单词边界”正则表达式添加到正则表达式`\b`的每一端：

```
\b10[0-9]{4}\b 
```

任何“单词”字符（即 ）和任何非单词字符之间的单词边界匹配`\w`，`[0-9a-zA-Z_]`反之亦然，并且是零宽度，因此它不会将任何字符添加到您的捕获中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:14:50.800

前瞻是一种解决方案。可能不是最有效的，但我认为它是最易读的。

```
10\d{4}(?!08\.js) 
```

这将匹配 10 后跟任意四位数字，前提是这些数字后面没有`08.js`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T18:14:25.720

我不确定输入数据是什么样的，但你能把它限制在行的开头和结尾吗？

```
^10[0-9]{4}$ 
```

# iphone - iOS - NSURLConnection 段错误

> ID：12011025
> 
> 赞同：0
> 
> 时间：2012-08-17T18:11:15.933
> 
> 标签：iphone, ios, nsurlconnection

我试图找出为什么我的应用程序在 iPad 1 而不是 iPad 2 或新 iPad 上崩溃。当我尝试使用 NSURLConnection 下载东西时，我得到：

```
 Job appears to have crashed: Segmentation fault: 11 
```

该应用程序崩溃，没有任何其他记录给我任何关于在哪里查看的提示。

我检查了一下，我的应用程序中没有任何诊断参数，例如 NSZombies。我正在使用 Instruments 中的分配来分析发布版本。有什么想法吗？

# macos - “在 Mac 中克隆”在 GitHub 上失败。每次都带我去下载页面

> ID：12011030
> 
> 赞同：38
> 
> 时间：2012-08-17T18:11:29.787
> 
> 标签：macos, git, osx-mountain-lion, github-for-mac

我已经重新安装、卸载、重新启动，但是任何存储库页面上的“在 Mac 中克隆”都会失败，并且每次都将我带到 GitHub 下载页面。

本周早些时候它工作正常，但今天不会做任何有用的事情。

知道为什么吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-27T20:16:06.777

看来您不仅必须登录该网站，还必须登录该应用程序一次，这样它就知道您已经安装了它。然后刷新 git repo 页面，链接会自动从下载页面变为打开的应用程序页面。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-10T20:25:57.563

我尝试了上述建议，确保我同时登录了站点和 Github-Mac 应用程序（我已经登录了）并安装了 CLI 工具。这并没有为我解决。经过一番挖掘，我发现[这篇文章](https://help.github.com/articles/github-conduit)解释了它是如何工作的。

应该有一个服务器使用[https://ghconduit.com:25035/status](https://ghconduit.com:25035/status)在您的 localhost 上进行侦听，它应该返回一个看起来像这样的 json 字符串：

```
{"capabilities":["status","unique_id","url-parameter-filepath"],"running":true,"server_version":"5"} 
```

就我而言，我没有得到结果，所以我尝试了 127.0.0.1 而不是 ghconduit.com 并修复了它。

TL;DR：为您的 /etc/hosts 文件添加一个条目**`127.0.0.1 ghconduit.com`**并刷新您所在的 github 页面，桌面上的克隆功能将起作用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-12T08:03:05.137

正如评论中所指出的：您**必须登录**到 Github 才能使用“在 Mac 上克隆”按钮。

*（这个答案主要用于从“未回答”列表中删除这个问题，因为提问者似乎没有关闭它）*

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-04T19:13:34.347

即使对我来说上述所有操作都失败了，但这是有效的：

打开一个新标签。

将此粘贴到地址栏中（不带引号）：“github-mac://openRepo/”

在要克隆的存储库中，复制 HTTPS 克隆 URL，并将其粘贴到上面的链接之后。按回车。

如果服务器在你提到的@rjason-lindberg 上监听你的 Mac，那么它应该在 GutHub for Mac 中打开。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-27T21:01:08.770

我刚遇到这个问题，我发现需要两个步骤才能让它工作：上面的“登录”答案，然后打开 GitHub.app，进入 Preferences > Advanced > Install Command Line Tools。这不花时间。然后我刷新了 github 页面，发现链接现在变成了这样的内容：“github-mac://openRepo/ [https://github.com/](https://github.com/) ......”点击它就可以了。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-16T18:15:33.603

我已经回答了我自己的问题：诀窍是在 GitHub 网站上登录。正如上面尼尔所说，您也需要登录到应用程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-31T15:45:56.013

其他答案都不适合我。我尝试注销（GitHub 和 Mac 版 GitHub）、撤销应用程序访问密钥、退出应用程序、重新安装 GitHub 命令行工具（通过首选项窗格）等。

什么对我有用：

1.  **克隆（编辑：我想我的意思可能是“Fork”？*）github.com 上的存储库**。（是的，通过网络界面）
2.  在 GitHub for Mac 应用程序中，访问 File > New Repository... 并选择“Clone”。选择你刚刚在 github.com 上创建的 repo 并克隆，我的朋友！克隆。

*我写这个答案已经有一段时间了，所以我不确定我是否真的指的是“克隆”......我知道分叉和克隆肯定不是一回事。我会在这里留下这个答案，以防它激发某人的想法！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-22T21:36:50.663

我刚试过这个，它似乎工作。

*   转到 Keychain Access 并参考 GitHub 删除所有存储的密码（Internet、应用程序、Web 表单）。
*   以全新方式登录网站以及 Mac OS 桌面应用程序
*   这次保存密码

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-23T08:25:19.163

其他答案都没有对我有用。但是看到[https://ghconduit.com:25035/status](https://ghconduit.com:25035/status)和[https://localhost:25035/status](https://localhost:25035/status)都无法连接，我意识到 Conduit 进程没有运行。它在“GitHub.app/Contents/Library/LoginItems/GitHub Conduit”中打开，克隆到桌面终于可以再次使用。不知道为什么 GitHub.app 没有自己启动它，但至少它现在可以工作了。

编辑：每次重启后，GitHub Conduit 进程需要再次手动启动。

# .net - ObservableCollection - 无法实现，因为它没有匹配的返回类型

> ID：12011044
> 
> 赞同：0
> 
> 时间：2012-08-17T18:12:19.233
> 
> 标签：.net, compiler-errors

我有两个项目。第一个是 Wpf Project (FrameWork 3.5) 和下一个界面：

```
public interface View
{
    ObservableCollection<int> Items { set; }  
} 
```

和测试项目（FrameWork 4.0）

```
public class ViewFake:View
{
    public ObservableCollection<int> Items
    {
        set { throw new NotImplementedException(); }
    }
} 
```

我收到此错误：

> ViewFake' 没有实现接口成员'View.Items'。“ViewFake.Items”无法实现“View.Items”，因为它没有匹配的返回类型“System.Collections.ObjectModel.ObservableCollection`1”。

我查看了 ObservableCollection 在两个版本中的位置，并且

*   [[框架 4.0] - System.dll](http://msdn.microsoft.com/en-us/library/ms668604%28v=vs.100%29.aspx)
*   [[FrameWork 3.5] - WindowsBase.dll](http://msdn.microsoft.com/en-us/library/ms668604%28v=vs.90%29.aspx)

那么，唯一的解决方案是升级主项目还是降级测试项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:39:35.107

~~如果我没记错的话，ObservableCollection 在 .NET 3.5 中位于 System.Windows.* 命名空间中，并且只有在 4.0 中它才被移到 System.Collections.ObjectModel 命名空间中。~~

*update：改变的不是命名空间，而是程序集。但是结果是一样的：.NET 认为它是不同的类型，因为包含的程序集是类型信息的一部分。

这里更大的问题是您的测试和被测类使用不同的 .NET 框架版本和不同版本的公共语言运行时。这可能会以眼泪收场。您可以为您的项目使用相同的版本吗？

# javascript - Symfony2 - Javascript 文件中的图像路径

> ID：12011045
> 
> 赞同：0
> 
> 时间：2012-08-17T18:12:36.847
> 
> 标签：javascript, symfony

我正在尝试从 javascript 文件中动态加载图像。

如何使用 Assets（或 FOSJsRoutingBundle）加载它，而无需将 .js 文件的代码粘贴到模板中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T19:54:33.367

您可以发布 PHP 生成的 JS 变量，然后在您的 JS 文件中使用它。

例如：

```
<script>
var image_path = '{{ asset('your/path/to/image') }}';
</script> 
```

如果您在通常包含 JS 文件的部分中需要此路径，则始终可以使用树枝块。

# html - 我怎样才能使背景背后 透明？

> ID：12011050
> 
> 赞同：0
> 
> 时间：2012-08-17T18:13:02.123
> 
> 标签：html, css

我似乎无法让 <legend> 元素的背景透明。请参阅此 jsFiddle： http: [//jsfiddle.net/hWZa6/](http://jsfiddle.net/hWZa6/)（在 Chrome 和 Firefox 中测试）

我试图完成的效果实际上是将 <legend> 元素移动到包含 <frameset> 元素的顶部边框下方，但我没有做任何事情使顶部边框完整。无论我尝试使用透明度还是位置，它总是缺少图例所在的行：http: [//cl.ly/image/1W043h0I3f0A/Edit%20this%20Fiddle%20-%20jsFiddle.jpg](http://cl.ly/image/1W043h0I3f0A/Edit%20this%20Fiddle%20-%20jsFiddle.jpg)

我怎样才能使传说中的边界区域完整？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:16:40.987

你可以把它放在屏幕外，

```
position:absolute; left:-999em; 
```

或者您最喜欢的与屏幕阅读器等兼容的偏移技术。（也许调查样板的图像替换样式）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:19:32.770

您可以添加`position:absolute`到`legend`. 可以选择添加`position:relative`到，`fieldset`以便您可以移动东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:19:38.653

试试这个，只需隐藏字段集边框并将元素包装在带边框的 div 中。 [http://jsfiddle.net/hWZa6/15/](http://jsfiddle.net/hWZa6/15/)

```
<div id="wrapper">
  <fieldset>
    <legend>Test</legend>
    The top border is never fully visible, despite the legend being set <code>visibility: hidden</code>.
    <div id="A">
        <div id="B">Upon applying <code>visibility: hidden</code> this div becomes transparent, and the red div behind it is fully visible.</div>
    </div>        
  </fieldset>
</div>
​
fieldset { border: none; }
#wrapper { border: 1px solid black; }
legend { display: block }
#A { background-color: red; width: 300px; height: 150px; padding: 10px;}
#B { background-color: blue; width: 400px; height: 100px;}​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T18:32:25.393

将此 CSS 用于`legend`元素。

```
legend { margin-left: -9999px; } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-17T18:33:16.497

如果您不想或无法更改 HTML，并且不需要使图例文本可见，则可以关闭显示。

```
legend { display: none; } 
```

如果您确实可以控制 HTML，那么@user1289347 的解决方案将起作用，尽管它需要添加包装器元素。

# javascript - 构建模块化的 Google 地图应用程序

> ID：12011051
> 
> 赞同：-1
> 
> 时间：2012-08-17T18:13:11.527
> 
> 标签：javascript, google-maps, google-maps-api-3, requirejs

我正在使用 Google Maps API 构建大型应用程序，并且我发现在我的开发方法中需要更加模块化，并且可以使用一些方向。

我的目标是在逻辑上将我的代码分解为不同的 JS 文件——所以总会有一个“基础”JS 文件负责加载地图、添加基础功能等。但对于不同的客户，我想以此为基础基本*不重复代码*。所以基本 JS 文件保持不变，我只是向另一个特定于客户端的 JS 文件添加一些附加功能，并将这两个文件加载到应用程序中。**这种方法的问题在于，我需要等到 Google Maps API 完全加载后才能加载任何其他 JS 文件**，否则第二个 JS 文件无法访问 API 对象并出现错误。

那么是否有任何库或框架可以解决这个大局和小局问题？[我遇到了 Require.js](http://blog.millermedeiros.com/requirejs-2-0-delayed-module-evaluation-and-google-maps/)作为解决方案，但我想看看这里有哪些选项。任何方向都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:36:05.857

RequireJS 可能是你最好的选择。它将并行*加载*脚本，但按依赖顺序*执行*它们。看起来`async`该博客文章中引用的插件将与 Google 地图加载器所宣传的一样工作。一旦你进入包含多个 JavaScript 文件和类的项目，并尝试使用 RequireJS，你会想知道如果没有它你会怎么做。

# vb.net - vb.net中具有列跨度和行跨度的动态html表

> ID：12011058
> 
> 赞同：0
> 
> 时间：2012-08-17T18:13:39.647
> 
> 标签：vb.net, algorithm, dataset, sqldatareader

如果我有来自 sqlDataReader 的值，如下所示：

```
|  YEAR1 |   NAM1 |  CRDT1 | SEMER1 | YEAR2 |   NAM2 | CRDT2 | SEMER2 |
-----------------------------------------------------------------------
|      1 |  Name1 |      1 |      1 |     1 | Name10 |     1 |      2 |
|      1 |  Name2 |      4 |      1 |     1 |  Name5 |     4 |      2 |
|      1 |  Name3 |      2 |      1 |     1 |  Name6 |     3 |      2 |
|      1 |  Name4 |      7 |      1 |     1 |  Name7 |     6 |      2 |
| (null) | (null) | (null) | (null) |     1 |  Name8 |     1 |      2 |
| (null) | (null) | (null) | (null) |     1 |  Name9 |     1 |      2 |
|      2 | Name11 |      3 |      1 |     2 | Name14 |     2 |      2 |
|      2 | Name12 |      6 |      1 |     2 | Name15 |     1 |      2 |
|      2 | Name13 |      4 |      1 |     2 | Name16 |     1 |      2 |
| (null) | (null) | (null) | (null) |     2 | Name17 |     1 |      2 |
|      3 | Name18 |      5 |      1 |     3 | Name18 |     5 |      2 |
|      3 | Name19 |      1 |      1 |     3 | Name19 |     1 |      2 |
|      3 | Name20 |      1 |      1 |     3 | Name20 |     1 |      2 | 
```

我喜欢将年份列合并为只有一列。如果任何列为空，则它将合并为一列，如果任何当前行和下一行为空，则它将合并。

我想这样输出：

```
 |  YEAR1 |   NAM1 |  CRDT1 | SEMER1 | YEAR2 |   NAM2 | CRDT2 | SEMER2 |
    -----------------------------------------------------------------------
 |        |  Name1 |      1 |      1 |       | Name10 |     1 |      2 |
 |    1   |  Name2 |      4 |      1 |   1   |  Name5 |     4 |      2 |
 |        |  Name3 |      2 |      1 |       |  Name6 |     3 |      2 |
 |        |  Name4 |      7 |      1 |       |  Name7 |     6 |      2 |
 |              (null)               |       |  Name8 |     1 |      2 |
 |                                   |       |  Name9 |     1 |      2 |
 |        | Name11 |      3 |      1 |       | Name14 |     2 |      2 |
 |    2   | Name12 |      6 |      1 |    2  | Name15 |     1 |      2 |
 |        | Name13 |      4 |      1 |       | Name16 |     1 |      2 |
 |              (null)               |       | Name17 |     1 |      2 |
 |        | Name18 |      5 |      1 |       | Name18 |     5 |      2 |
 |    3   | Name19 |      1 |      1 |    3  | Name19 |     1 |      2 |
 |        | Name20 |      1 |      1 |       | Name20 |     1 |      2 | 
```

如何创建一个可以在 vb.net 中输出上述结果的 html 表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:25:49.190

Spin through the result set adding a new table row for each record. Use variables to keep track of when you need to add all of your cells (some with rowspans) or just the ones displayed on every row. Here's 90% of the code for you. You should be able to figure out the rest.

```
 'Convert DataReader into DataTable.
    Dim dtResults As New DataTable
    dtResults.Load(drResults)

    'You can define this in your .Aspx
    Dim tblStudents As New Table

    'These will help you with your table building logic.
    Dim intCurrentYear1 As Integer = 0
    Dim intRowSpan As Integer = 0
    Dim bolDetermineRowSpan = True

    For intRowCursor As Integer = 0 To (dtResults.Rows.Count - 1)

        If bolDetermineRowSpan Then

            'First get the current year (Nulls will be set to 0, but not displayed as such.)
            If dtResults.Rows(intRowCursor).Item("Year1") Is DBNull.Value Then

                intCurrentYear1 = 0

            Else

                intCurrentYear1 = CInt(dtResults.Rows(intRowCursor).Item("Year1"))

            End If

            If intCurrentYear1 > 0 Then

                'Get the total number of records with this year, so we know how many cells to merge.
                intRowSpan = (From d As DataRow In dtResults.Rows _
                              Where Not d.Item("Year1") Is DBNull.Value AndAlso _
                              CInt(d.Item("Year1")) = intCurrentYear1).Count()

            Else

                'Figure out how many null records until the next year, so we know how many to merge.
                Dim bolNextYear As Boolean = False
                Dim intTempCursor As Integer = intRowCursor + 1

                intRowSpan = 1

                Do Until bolNextYear = True OrElse intTempCursor = dtResults.Rows.Count

                    If Not dtResults.Rows(intTempCursor).Item("Year1") Is DBNull.Value Then

                        bolNextYear = True

                    End If

                    intTempCursor += 1
                    intRowSpan += 1

                Loop

            End If

        End If

        Dim tr As New TableRow

        If intCurrentYear1 > 0 Then

            If bolDetermineRowSpan = True Then

                'Add all cells to this Table Row, using RowSpan property to merge desired fields.
                Dim tdYear1 As New TableCell
                tdYear1.RowSpan = intRowSpan
                tdYear1.Text = intCurrentYear1
                tdYear1.VerticalAlign = VerticalAlign.Middle

                tr.Cells.Add(tdYear1)

                Dim tdName1 As New TableCell
                tdName1.Text = CStr(dtResults.Rows(intRowCursor).Item("NAM1"))

                tr.Cells.Add(tdName1)

                'Add the rest of your cells here (omitted).

                'Update this variable to keep sound logic.
                bolDetermineRowSpan = False

            Else

                'Do not add the Year1 Cell because of RowSpan/"Merging".

                Dim tdName1 As New TableCell
                tdName1.Text = CStr(dtResults.Rows(intRowCursor).Item("NAM1"))

                tr.Cells.Add(tdName1)

                'Do for rest of cells.

                'Update this variable to keep sound logic.
                bolDetermineRowSpan = False

            End If

        Else

            'Same logic as other half of this If Statement block, just doing more
            'cells with RowSpans. (These are the null records.)
            If bolDetermineRowSpan = True Then

                'Add all cells (with rowspans)

            Else

                'Add just cells that are displayed on every row.

            End If

        End If

        'Add the row to the table.
        tblStudents.Rows.Add(tr)

        'Do we need to reset our boolean flag to determine row span?
        If bolDetermineRowSpan = False AndAlso dtResults.Rows.Count < (intRowCursor + 1) AndAlso _
           Not dtResults.Rows(intRowCursor + 1).Item("Year1") Is DBNull.Value AndAlso _
               dtResults.Rows(intRowCursor + 1).Item("Year1") <> intCurrentYear1 Then

            bolDetermineRowSpan = True

        End If

    Next 
```

# android - 用于开发 Android 应用程序的 Android 设备

> ID：12011059
> 
> 赞同：-1
> 
> 时间：2012-08-17T18:13:43.530
> 
> 标签：android, device, platform, google-nexus

> **可能重复：**
> [有没有办法在设备上开发 android 应用程序？](https://stackoverflow.com/questions/7527212/is-there-a-way-to-develop-android-applications-on-the-device)

有什么方法可以将 Android 设备（最好是带有 ICS 的平板电脑）用于应用程序开发？google nexus 对开发者有什么优势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:25:09.790

是的。使用 ADB，您可以从 PC 调试 Android 设备上的应用程序。

如果您的意思是直接在设备上编写应用程序，我已经看到允许您将 Java 作为应用程序编写和运行的应用程序，但我无法想象有人用这样的东西制作高质量的应用程序。我会避免它并使用 Eclipse。

Nexus 设备的一个优势应该是它是“普通的”Android——没有像 Touchwiz 和 Sense UI 这样的怪异垃圾。库存测试将导致应用程序更有可能在其他版本的 Android 上运行。Galaxy Nexus 上面有一些额外的东西，但我不记得是什么了。

另一个优点是 Nexus 设备应该直接从谷歌获得更新，而无需等待运营商和制造商在推出新版本之前对其进行修改。

# php - 共享主机上的锂框架

> ID：12011061
> 
> 赞同：0
> 
> 时间：2012-08-17T18:13:48.727
> 
> 标签：php, shared-hosting, lithium

不想为开发工作支付专用服务器。我不想运行实时 apache 服务器。

是否可以将锂框架集成到共享主机帐户 doc-root 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:31:20.443

当然有可能。唯一的要求是 PHP 的版本应该 >= 5.3框架附带
的[.htaccess](https://github.com/UnionOfRAD/framework/blob/master/.htaccess)是唯一需要的，以获取与 Lithium 一起运行的共享 LAMP 堆栈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T00:17:16.607

如果您满足锂的要求（PHP5.3 等），那么您没有理由需要任何专用的东西。

根据[http://li3.me/docs/manual/getting-started/requirements.wiki](http://li3.me/docs/manual/getting-started/requirements.wiki)，唯一的要求是 PHP5.3。其他的都是肉汁。

命令行访问和 git 之类的东西应该与任何自尊的托管公司的产品一起提供，即使是廉价的地下室产品。一些可选模块，如 MongoDB，通常可以在稍微强大的选项上运行（即 Dreamhost 只允许 Mong

查看[http://nephtaliproject.com/php53hosts/index.php](http://nephtaliproject.com/php53hosts/index.php)以获取支持 PHP 5.3（或更高版本）的已知共享托管公司列表

# android - Android 中的自然语言处理 API

> ID：12011068
> 
> 赞同：9
> 
> 时间：2012-08-17T18:14:31.683
> 
> 标签：android, nlp

我正在尝试制作一个类似于[本网站](http://cleverbot.com/)上的 Android 应用程序。

问题是我对自然语言处理领域还很陌生。我不希望实现太多，只是为用户提供一些与应用程序的交互，给他一种他确实在和某人聊天的感觉。

基本上，我只会捕获用户输入的文本并将其发送到 API 并显示从 API 检索到的结果。我遇到了[http://opennlp.apache.org/](http://opennlp.apache.org/)和[http://gate.ac.uk/](http://gate.ac.uk/)但不知道如何在我的 Android 应用程序中实现它们。

**任何**想法/建议/帮助确实会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T06:05:01.690

如果您正在寻找执行 NLP 的 Web 服务，我建议您查看 Maluuba 的 API。这是他们开发者网站的直接链接。

[http://dev.maluuba.com](http://dev.maluuba.com)

# c - Linux内核中的stdlib.h替代品？

> ID：12011075
> 
> 赞同：10
> 
> 时间：2012-08-17T18:14:47.603
> 
> 标签：c, linux, kernel

在 Linux 中开发内核模块时，不允许使用 C 标准库。
但是，如果我需要使用一些常见的功能，例如`strcat()`，我需要去哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T18:46:40.073

Linux内核中没有实现的东西，你必须自己实现或者借用另一个开源内核模块。但是，您会发现它`strcat`是在内核中实现的。

请参阅[内核 API](http://www.kernel.org/doc/htmldocs/kernel-api/)文档。特别是针对您的一般问题的[基本 C 库函数](http://www.kernel.org/doc/htmldocs/kernel-api/libc.html)部分，以及针对您的特定问题的[字符串操作](http://www.kernel.org/doc/htmldocs/kernel-api/ch02s02.html)`strcat`部分。

你会想要包括`linux/string.h`.

我不知道为什么内核 API 文档实际上并没有显示您必须包含的头文件才能获取该函数。但是，如果您正在寻找某些东西，则可以将搜索限制在其中，`/include/linux`因为如果头文件具有在内核的不同部分之间共享的功能，那就是头文件所在的位置。

外部的头文件`/include/linux`仅包含与头文件位于同一目录中的源文件的定义。例外是`/arch/.../include`，它将包含特定于体系结构的标头而不是独立于平台的标头。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T18:38:27.887

抱歉@eq - 考虑另一个功能。

为什么不

```
void (char *d, const char *s);
{
   if (*d)
   { 
       for (; *d; ++d) {} ;
      --d;
   }
   strcpy(d, s);
} 
```

`strcpy`如果你愿意，我可以

# c - Alpha 在 C 中混合 2 种 RGBA 颜色

> ID：12011081
> 
> 赞同：10
> 
> 时间：2012-08-17T18:14:56.510
> 
> 标签：c, colors, alpha, alphablending, rgba

> **可能重复：**
> [如何快速进行 Alpha 混合？](https://stackoverflow.com/questions/1102692/how-to-do-alpha-blend-fast)

Alpha 混合 2 种 RGBA（整数）颜色的最快方法是什么？

请注意，要混合的目标颜色始终是不透明的，只有第二种颜色可以具有不同级别的透明度。

我试图在 C 中找到最快的方法，考虑到混合的最终结果颜色必须最终没有透明度，完全不透明（alpha = 0xff）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-18T07:59:20.463

```
int blend(unsigned char result[4], unsigned char fg[4], unsigned char bg[4])
{
    unsigned int alpha = fg[3] + 1;
    unsigned int inv_alpha = 256 - fg[3];
    result[0] = (unsigned char)((alpha * fg[0] + inv_alpha * bg[0]) >> 8);
    result[1] = (unsigned char)((alpha * fg[1] + inv_alpha * bg[1]) >> 8);
    result[2] = (unsigned char)((alpha * fg[2] + inv_alpha * bg[2]) >> 8);
    result[3] = 0xff;
} 
```

我不知道它有多快，但它都是整数。它通过将 alpha（和 inv_alpha）转换为 8.8 定点表示来工作。不用担心 alpha 的最小值为 1。在这种情况下，fg[3] 为 0，这意味着前景是透明的。混合将是 1*fg + 256*bg，这意味着 fg 的所有位都将从结果中移出。

事实上，如果您将 RGBA 打包成 64 位整数，您可以非常快地完成它。然后，您可以使用单个表达式并行计算所有三种结果颜色。

# python - Scapy BPF 过滤器不工作

> ID：12011089
> 
> 赞同：9
> 
> 时间：2012-08-17T18:15:31.010
> 
> 标签：python, scapy

我正在使用 Scapy 并希望根据目标 mac 地址进行过滤。

但是，我收到的数据包显示的目标 MAC 地址不是过滤器中指定的地址。

这是一个代码片段：

```
from scapy.all import *

sniff(iface="eth1", filter="ether dst host 91:e0:f0:01:00:00", 
      count=3, prn=lambda x: x.show()) 
```

我正在运行 Scapy 2.2.0

对这里的问题有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T15:38:34.580

Scapy 需要许多不同系统的大量依赖项。很可能您没有 BPF 过滤器工作所需的依赖项。

[http://www.secdev.org/projects/scapy/portability.html](http://www.secdev.org/projects/scapy/portability.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-25T13:14:02.043

安装 tcpdump 为我解决了这个问题 - 现在嗅探上的过滤器可以工作了

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-08T02:27:06.927

在我的情况下，升级到 2.3.3dev（github 版本），修复它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-15T07:43:28.840

是`scapy`错！！！似乎在应用 BPF 过滤器（函数参数）`scapy`之前开始接收数据包。需要一段时间才能正常工作！摆脱这种情况的两种方法：`filter``sniff`

1.  用于`lfilter`在脚本中定义您的过滤功能。它在繁忙的链接上效率不高，因为在您的脚本中应用了过滤器，而不是内核。考虑使用`pypy`来加速它。
2.  对于某些第一个数据包，请检查脚本中的目标 MAC 地址，然后不再检查；即在嗅探开始时检查数据包的正确性以通过不稳定阶段，`scapy`然后依靠`scapy`过滤不需要的数据包。

# php - PHP 脚本在 Lion 上通过 Ajax 运行时会回显自己的内容

> ID：12011090
> 
> 赞同：4
> 
> 时间：2012-08-17T18:15:32.440
> 
> 标签：php, javascript, ajax, osx-lion

我有什么对我来说是一个奇怪的问题，我想知道你是否可以帮助我找出我正在犯的可耻的明显错误。

我有一个 javascript 应用程序，它通过 ajax 运行一堆 php 脚本，所有这些脚本都在我的 Mac 上本地运行，使用内置的 apache 服务器。它已经工作了多年，但是在我的新 Lion Mac 上，php 脚本不再返回他们应该阅读的文件。他们返回 php 脚本本身。

如果我从命令行运行 php 脚本，它们可以正常工作。如果我直接从命令行运行它们，它们就可以正常工作。它们在 Snow Leopard 计算机上从 Ajax 运行良好。如果 Ajax 在我的 Lion Mac 上运行它们，它们将不起作用。

我尝试过的事情：

*   我已经调整了 httpd.conf 以便加载 php 模块，并且我已经重新启动了我的 Mac。

*   Apache 肯定在运行：127.0.0.1/~myname/ 得到“它可以工作”的消息。

*   我曾尝试使用 jquery 并使用老式的手写方式运行 ajax。同样的问题。（我已经确定 jquery 实际上正在加载。）

*   我没有使用短代码“<?” 在我的 php 脚本中

*   php 文件与 html 和 javascript 文件位于同一目录中。权限与雪豹电脑上的权限相同，一切正常

我试过上下搜索这个，但我很难过。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:29:25.397

问题似乎是我的 Lion 机器上安装了 php 5.3.1。当我更新到 php5.4 时，它又开始工作了。

要更新到 php5.4，我按照此处的说明进行操作：http://php-osx.liip.ch/[感谢](http://php-osx.liip.ch/)您的帮助，Stackoverflow！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:38:06.747

*   php 是否启用和配置正确？
    编辑您的`/etc/apache2/httpd.conf`并确保该行：`LoadModule php5_module libexec/apache2/libphp5.so`存在，然后重新启动 Apache：`sudo apachectl restart`
*   `php.ini`是否加载了正确/预期的内容？
    *[在 Lion-upgrade 上，`php.ini`文件将被重命名，`/etc/php.ini-5.2-previous`并且一个新的示例 PHP 配置文件`/etc/php.ini.default`就位](http://support.apple.com/kb/HT4786)！！！*
    因此，您可能想要重新配置您的 php.ini 文件。
*   之前安装的扩展`/usr/lib/php/extensions/.../`已被删除。
    因此，如果您希望在 5.3 中仍使用扩展，则需要重新构建它们。
*   您现在可以加载包含`<?php phpinfo();?>`.
*   如果你使用它，现在检查 phpinfo 中的 mySQL 指令（和其他本地指令）。
*   Apple 已包含 Suhosin 补丁和扩展。
    Suhosin 是[Hardened-PHP 项目](http://www.hardened-php.net)的一部分，该项目旨在保护 PHP 应用程序免受缓冲区溢出和格式字符串漏洞的影响。将 Suhosin 的[功能列表](http://www.hardened-php.net/suhosin/a_feature_list.html)与您的 php 脚本进行比较。
*   是否可能使用了已弃用的 php 语句（在旧版本的 php 中有效）？

它现在有效吗？

# python - 尝试实现 python TestSuite

> ID：12011091
> 
> 赞同：37
> 
> 时间：2012-08-17T18:15:36.713
> 
> 标签：python, unit-testing, regression-testing, test-suite, python-unittest

我有两个要在测试套件中一起运行的测试用例（两个不同的文件）。我可以通过“正常”运行 python 来运行测试，但是当我选择运行 python-unit 测试时，它说 0 个测试运行。现在我只是想让至少一项测试正确运行。

```
import usertest
import configtest # first test
import unittest   # second test

testSuite = unittest.TestSuite()
testResult = unittest.TestResult()
confTest = configtest.ConfigTestCase()
testSuite.addTest(configtest.suite())
test = testSuite.run(testResult)
print testResult.testsRun # prints 1 if run "normally" 
```

这是我设置的测试用例的示例

```
class ConfigTestCase(unittest.TestCase):
    def setUp(self):

        ##set up code

    def runTest(self):

        #runs test

def suite():
    """
        Gather all the tests from this module in a test suite.
    """
    test_suite = unittest.TestSuite()
    test_suite.addTest(unittest.makeSuite(ConfigTestCase))
    return test_suite

if __name__ == "__main__":
    #So you can run tests from this module individually.
    unittest.main() 
```

我该怎么做才能正确完成这项工作？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-17T18:46:59.007

你想使用测试服。所以你不需要调用 unittest.main()。testsuit的使用应该是这样的：

```
#import usertest
#import configtest # first test
import unittest   # second test

class ConfigTestCase(unittest.TestCase):
    def setUp(self):
        print 'stp'
        ##set up code

    def runTest(self):
        #runs test
        print 'stp'

def suite():
    """
        Gather all the tests from this module in a test suite.
    """
    test_suite = unittest.TestSuite()
    test_suite.addTest(unittest.makeSuite(ConfigTestCase))
    return test_suite

mySuit=suite()

runner=unittest.TextTestRunner()
runner.run(mySuit) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-17T18:44:30.963

创建加载器和套件的所有代码都是不必要的。您应该编写测试，以便使用您最喜欢的测试运行器通过测试发现运行它们。这仅意味着以标准方式命名您的方法，将它们放在可导入的位置（或将包含它们的文件夹传递给运行程序），并从`unittest.TestCase`. 完成后，您可以使用`python -m unittest discover`最简单或更好的第三方运行程序来发现并运行您的测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-25T17:08:45.383

如果您尝试手动收集`TestCase`s，这很有用`unittest.loader.findTestCases()`：：

```
# Given a module, M, with tests:
mySuite = unittest.loader.findTestCases(M)
runner = unittest.TextTestRunner()
runner.run(mySuit) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T19:20:12.763

我假设您指的是针对合并这两个测试的模块运行 python-unit 测试。如果您为该模块创建测试用例，它将起作用。子类`unittest.TestCase`化并进行一个以“test”开头的简单测试。

*例如*

```
class testall(unittest.TestCase):

    def test_all(self):           
        testSuite = unittest.TestSuite()
        testResult = unittest.TestResult()
        confTest = configtest.ConfigTestCase()
        testSuite.addTest(configtest.suite())
        test = testSuite.run(testResult)
        print testResult.testsRun # prints 1 if run "normally"

if __name__ == "__main__": 
      unittest.main() 
```

# javascript - 访问 jeditable 中的其他变量

> ID：12011092
> 
> 赞同：0
> 
> 时间：2012-08-17T18:15:37.323
> 
> 标签：javascript, jeditable

我对javascript真的很陌生，很抱歉我的无知。在 jeditables 中，您可以指定一个回调函数。我在一个单独的脚本中使用所有这些代码。有没有办法将变量传递给这个回调函数？例如： var info = "foo";

```
$('#bar').editable("/foo/bar",
    callback : function(value, settings) {
        var foobar = value + info;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:17:56.030

```
var info = "foo";
$('#bar').editable("/foo/bar",
    function(value, settings) {
        var foobar = value + info;
}); 
```

您应该阅读 javascript 范围。

我上面所做的通常**不是**要走的路，因为`info`现在在全球范围内。

* * *

侧点：

您甚至可以将回调移动到完全不同的位置：

```
var info = "foo", 
    callBackFn = function(v, s){
         var foobar = v + info;
    };
$('#bar').editable("/foo/bar",  callBackFn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T04:56:29.393

您还可以将属性分配给“设置”对象，如下所示：

```
$(".myClass").editable( "/foo/bar",
{
    indicator: "Saving...",
    tooltip: "Click to edit",
    onblur: "submit",
    bax: bax
},
function(value, settings) {
    var foobar = value + settings.bax;
}); 
```

在您的处理程序中，您可以通过简单地说明来查看对对象的引用的使用`settings.bax`

# android - Listview 自定义适配器通知父活动

> ID：12011095
> 
> 赞同：2
> 
> 时间：2012-08-17T18:15:40.363
> 
> 标签：android, android-listview, android-activity

我创建了一个位于较大活动内的列表视图（列表视图占据了屏幕的一半，上面有输入/按钮）。此列表视图使用自定义适配器来绘制行视图。

行视图内部是一个按钮，当单击/点击它时，我希望活动处理，而不是适配器。但是我不知道如何在适配器类内部，我可以告诉它使用活动。由于它是 OOP，我假设我必须在设置适配器时传递对活动的某种引用（而不是将父活动硬编码到适配器中）。

我在活动和适配器之间共享数据集时遇到了一个更简单的问题（我希望适配器使用活动中的数组列表），但是我也无法解决这个问题，所以我最终将数组列表作为副本传递到适配器。所以我希望解决点击监听器，也意味着我可以摆脱必须创建的重复数据？

所有代码都非常简单，但这里有一个粗略的大纲：

**设置列表适配器和声明数据集（这是活动数据集，而不是适配器）**

```
numbersListAdapter = new NumberListAdapter(this);
numbersList.setAdapter(numbersListAdapter);
this.selectedContacts = new HashMap<Long, HashMap<String, String>>(); 
```

**将条目添加到活动数据集并添加到适配器数据集**

```
HashMap<String, String> tempa = new HashMap<String,String>();
tempa.put("name", name);
tempa.put("number", number);
this.selectedContacts.put(contactID, tempa);

this.numbersListAdapter.addEntry(contactID, tempa); 
```

**适配器添加条目**

```
public void addEntry(Long id, HashMap<String, String> entry) {  

        entry.put("contactID", id.toString());      

        this.selectedNumbers.add(entry);

        this.notifyDataSetChanged();

    } 
```

**适配器构造函数**

```
public NumberListAdapter(Context context) {

        selectedNumbers = new ArrayList<HashMap<String, String>>();

        mInflater = LayoutInflater.from(context);

    } 
```

请注意：这是我第一次尝试这些东西。我从来没有做过 android、java 和非常非常少的 OO 编程。所以我已经知道代码很可能效率低下而且非常糟糕。但我必须以某种方式学习:)

**编辑**

好的，所以我意识到我有点傻，我只需要使用传递给适配器的上下文来引用父活动。但是我仍然没有得到它。继承人的代码：

**适配器的构造函数**

```
numbersListAdapter = new NumberListAdapter(this); 
```

**变量声明和构造方法**

```
public class NumberListAdapter extends BaseAdapter  {

    private LayoutInflater mInflater;

    private ArrayList<HashMap<String, String>> selectedNumbers;

    private Context parentActivity;

    public NumberListAdapter(Context context) {

        parentActivity = (Context) context; 

        selectedNumbers = new ArrayList<HashMap<String, String>>();

        mInflater = LayoutInflater.from(context);

    } 
```

**听者**

```
Button theBtn = (Button)rowView.findViewById(R.id.actionRowBtn);
            theBtn.setOnClickListener(this.parentActivity); 
```

我从 Eclipse 收到两条消息，第一条消息发生在我注释掉侦听器时，我得到了 `The value of the field NumberListAdapter.parentActivity is not used`

一旦我添加了监听器，我就得到了

`The method setOnClickListener(View.OnClickListener) in the type View is not applicable for the arguments (Context)`

显然我做错了什么。可能又是一个非常愚蠢的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:55:44.733

如果您需要在单击列表视图的行时获得回调，您可以使用

> [numbersListAdapter.setOnitemitemClickLiistener](http://developer.android.com/reference/android/widget/AdapterView.html#setOnItemClickListener%28android.widget.AdapterView.OnItemClickListener%29)

但是，如果您需要在每行内单击一个按钮，则必须覆盖

适配器的getView函数，然后单独设置按钮的onclicklistener

编辑：将上下文类型转换为活动

```
theBtn.setOnClickListener((YourActivity)this.parentActivity); 
```

# php - 如何以及何时将刷新令牌与 php google calender api 一起使用

> ID：12011097
> 
> 赞同：0
> 
> 时间：2012-08-17T18:15:48.087
> 
> 标签：php, google-api, google-calendar-api

我正在使用 php google calendar api 的 v3。

在日历所有者授权后，我将带有刷新令牌的 access_token 保存在数据库中。

当任何人显示日历页面时，我都有一些有效的代码

```
$client = new apiClient();
$client->setApplicationName("My Calendar");
$client->setAccessType('offline');
$client->setAccessToken( $_SESSION['google']['access_token'] );
$calService = new apiCalendarService($client);
$optParams = array('timeMin' => $gstart, 'timeMax'=> $gend);
$events = $calService->events->listEvents($_SESSION['google']['google_cal_id'], $optParams); 
```

我在文档中看到，在某些时候我可能必须使用刷新令牌（我在数据库中拥有）。我不知道如何使用这个令牌以及何时使用。setAccessToken 会在某个时候抛出异常吗？什么是最好的测试方法谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:45:19.343

如果您希望在用户重新进行身份验证的情况下保持身份验证处于活动状态，则使用刷新令牌。例如，我们有一个使用谷歌分析 api 的报告工具。我需要每 10 分钟对其运行一次查询，因此一旦用户对我们的应用程序进行身份验证，我就会使用刷新令牌，这样即使用户未登录，我的自动查询也可以运行。基本上，刷新令牌用于保持会话处于活动状态无需用户交互。我希望这是有道理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-10T12:03:37.467

访问令牌在 3600 秒或一小时后过期。但是您可以使用刷新令牌来获取新的访问令牌，而无需用户重新进行身份验证。

有关如何使用 php 获取刷新令牌的详细信息，请查看这篇文章中接受的答案： [Automatically refresh token using google drive api with php script](https://stackoverflow.com/questions/15905104/automatically-refresh-token-using-google-drive-api-with-php-script)

如果您使用 REST API 而不是 PHP SDK，它基本上会将您的刷新令牌、client_id、秘密发送到[https://accounts.google.com/o/oauth2/token](https://developers.google.com/accounts/docs/OAuth2WebServer) [，](https://accounts.google.com/o/oauth2/token)如页面底部所述

除非用户撤销或您以编程方式撤销它，否则刷新令牌不会过期。

# python - 对缺少标签的 HTML 表格使用 Beautiful Soup

> ID：12011100
> 
> 赞同：5
> 
> 时间：2012-08-17T18:16:05.827
> 
> 标签：python, html, beautifulsoup

我正在努力使用 Beautiful Soup 将一些易碎的 HTML 表格解析为列表。有问题的表缺少 </td> 标记。

使用以下代码（不是我正在解析的真实表，但功能相似）：

```
import bs4
test = "<table> <tr><td>1<td>2<td>3</tr> <tr><td>1<td>2<td>3</tr> </table>"
def walk_table2(text):
    "Take an HTML table and spit out a list of lists (of entries in a row)."
    soup = bs4.BeautifulSoup(text)
    return [[x for x in row.findAll('td')] for row in soup.findAll('tr')]

print walk_table2(test) 
```

给我：

```
[[<td>1<td>2<td>3</td></td></td>, <td>2<td>3</td></td>, <td>3</td>], [<td>4<td>5<td>6</td></td></td>, <td>5<td>6</td></td>, <td>6</td>]] 
```

而不是预期的：

```
[[<td>1</td>, <td>2</td>, <td>3</td>], [<td>1</td>, <td>2</td>, <td>3</td>]] 
```

Beautiful Soup 使用的 lxml 解析器似乎决定在 </tr> 的下一个实例之前添加 </td> 标记，而不是在 <td> 的下一个实例之前添加。

在这一点上，我想知道是否有一个好的选项可以让解析器将结束 td 标记放置在正确的位置，或者在将字符串扔到 BeautifulSoup 之前使用正则表达式手动放置它们是否会更容易。 。 有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T19:45:29.073

您会看到 Python 的内置 HTML 解析器做出的决定。如果你不喜欢 parser 做事的方式，你可以[告诉 Beautiful Soup 使用不同的 parser](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser)。html5lib 解析器和 lxml 解析器都给出了你想要的结果：

```
>>> soup = bs4.BeautifulSoup(test, "lxml")
>>> [[x for x in row.findAll('td')] for row in soup.findAll('tr')]
[[<td>1</td>, <td>2</td>, <td>3</td>], [<td>1</td>, <td>2</td>, <td>3</td>]]

>>> soup = bs4.BeautifulSoup(test, "html5lib")
>>> [[x for x in row.findAll('td')] for row in soup.findAll('tr')]
[[<td>1</td>, <td>2</td>, <td>3</td>], [<td>1</td>, <td>2</td>, <td>3</td>]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:28:14.810

对我来说，这听起来像是一个 BeautifulSoup 错误。我发现[此页面](http://www.crummy.com/software/BeautifulSoup/bs3/3.1-problems.html)详细说明了为什么 BS 3.1 从 3.0.8 出现回归（包括“'bad end tag' 错误”），这表明，为了解析错误的 HTML，一种选择是跳回几个版本。也就是说，该页面说它已被取代，现在仅用于历史参考。然而，目前尚不清楚 BS4 究竟在多大程度上解决了 BS 3.1 中引入的问题——至少，尝试旧版本并没有什么坏处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:47:14.857

一个不完整的修复让你度过这个特殊的困境：

用正则表达式按摩传入的数据（这非常脆弱，我知道 stackoverflow 对正则表达式和 html 的感觉，但是 C'MON，就这一次......）

```
import re
r1 = re.compile('(?<!\<tr\>)\<td', re.IGNORECASE)
r2 = re.compile('\<\/tr>', re.IGNORECASE)
test = "<table> <tr><td>1<td>2<td>3</tr> <tr><td>1<td>2<td>3</tr> </table>"
test = r1.sub('</td><td', test)
test = r2.sub('</td></tr>', test)
print test 
```

哦，`test`然后：

```
<table> <tr><td>1</td><td>2</td><td>3</td></tr> <tr><td>1</td><td>2</td><td>3</td></tr> </table> 
```

# windows - 选择时级联中的窗口未升到顶部

> ID：12011104
> 
> 赞同：0
> 
> 时间：2012-08-17T18:16:37.733
> 
> 标签：windows, wxwidgets

我有一个应用程序，它创建了一系列以“级联”形式显示的无模式对话框窗口。用户应该能够单击任何窗口以将其带到顶部并与之交互。

这是一个屏幕截图，显示了它按预期工作。用户点击了底部第三个窗口，成功地将其带到顶部。

![在此处输入图像描述](../Images/48537b95d80939a3ca35da1d35a31cf6.png)

用户报告说，当他运行此程序并单击其中一个被遮挡的窗口时，该窗口*不会升到顶部*。

[这是](http://www.screencast.com/t/2M4QyTSMpBY)显示问题发生的视频。它显示了笔记本窗口的正常级联，其行为符合预期。然后出现我的应用程序窗口的级联，但用户无法将任何选定的窗口置于顶部。所选窗口的外观发生变化，表明它已被选中，但仍处于隐藏状态。（视频最后展示了一个相关问题，我们现在可能可以忽略它）

用户报告此问题发生在他尝试过的其他 PC 上。我无法重现该问题。

我完全被难住了，甚至无法猜测可能是什么原因造成的。

（我的一个理论是应用程序已冻结并且不再响应绘制消息。但是，视频显示用户将被遮挡的窗口拖出级联，然后窗口被绘制得很好。看起来很明显选择窗口时，应用程序没有收到或忽略它的绘制消息）

该应用程序使用 C++ 和 wxWidgets 2.9.4 编写并在 windows 7 下运行

这似乎是 wxWidgets 2.9 的问题。当使用 v2.8.12 库构建时，用户报告它工作正常。

这是创建窗口的代码。请注意，父项为 NULL。（这允许在不最小化级联窗口的情况下最小化主应用程序窗口 - 这是一项必需的功能。）

```
cNewDataPopup::cNewDataPopup(  cPatDataset& data )
    : wxDialog(NULL,-1,L"New data",wxPoint(200,200),wxSize(570,242),
        wxDEFAULT_DIALOG_STYLE|wxSTAY_ON_TOP )
    , myData( data )
{ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:49:43.553

经过一些实验，我发现将 wxDIALOG_NO_PARENT 添加到 wxSTAY_ON_TOP 可以“修复”问题。

（下面的解释是由于VZ。）

显然，将窗口的父级指定为 NULL 不足以让 wxWidgets 相信您不需要父级。无论如何，它都会继续分配父母，或多或少是随机的。这就是为什么观察到奇怪的、意外的和不可重现的行为的原因。分配父级的算法在 v2.9.x 中发生了变化，这就是我升级 wxWidgets 时奇怪和意外行为发生变化的原因。为了让 wxWidgets 相信，是的，真的，我不想要窗口的父级，我必须同时指定 NULL 父级和 wxDIALOG_NO_PARENT 样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:11:12.400

使用`wxSTAY_ON_TOP`几乎可以肯定是罪魁祸首。如果您只需要窗口保持在父窗口的顶部，请不要使用这种样式，或者通过在父框架中覆盖来使用`wxFRAME_TOOL_WINDOW`或覆盖`WM_SIZE`处理。`MSWWindowProc()`

# math - 如何找到由线 x=2、y=3 和 3x+2y=6 在该点形成的三角形的垂心？

> ID：12011114
> 
> 赞同：0
> 
> 时间：2012-08-17T18:18:01.117
> 
> 标签：math, geometry, coordinates

当给出三角形的 3 个顶点的坐标时，我知道如何找到正交中心。但是这个问题中三角形的三个顶点的坐标是多少？x=2 和 y=3 是什么意思？这是否意味着 A(2,0) 和 B(0,3) ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:22:39.197

x=2 是平行于 y 轴的直线，恒定值 x=2（垂直于 x 轴），同样 y=3 是垂直于 y 轴的直线，恒定 y 坐标 = 3 并平行于 x 轴。

您的答案 ：

看，基本上你得到的是一个直角三角形。其垂心在 2,3，即三角形的直角顶点。如果你试着画出给定的三条线，你会得到它。希望能帮助到你。

# objective-c - 特定的事件监听器objective-c

> ID：12011119
> 
> 赞同：0
> 
> 时间：2012-08-17T18:18:19.837
> 
> 标签：objective-c, event-listener

我正在开发一个 iPhone 应用程序（在 Objective-C 中），并且我正在尝试使它有某种*“动作侦听*器”不断检查当前日期和时间是否与第一个对象的日期和时间匹配一个`NSMutableArray`充满事件对象（从用户日历中检索）。

**我的问题**是我无法弄清楚如何这样做，而我的其余代码继续运行，因为现在我有一个`for`循环运行来不断检查，这会停止我的代码，并阻止应用程序继续运行。如果有人知道任何类型的教程或有解释，我将不胜感激。

***谢谢！***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:32:10.330

设置一个 NSTimer 在所需日期触发。这里的 NSTimer 类别对此很有用：[https ://github.com/adamjernst/NSTimer-AbsoluteFireDate](https://github.com/adamjernst/NSTimer-AbsoluteFireDate)

您还可以尝试创建和安排[UILocalNotification](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)以在特定日期获得通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:35:33.253

获取当前时间和事件时间之间的时间，使用dispatch_after

```
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, timeDifference * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    //Your code
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:24:03.033

您可以使用`NSTimer`EDIT：查看 phix23 的答案以获得更可靠的用于 iOS 的“fireDate”代码。

苹果文档：[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)

# npm - NPM 依赖没有创建 git 子模块

> ID：12011120
> 
> 赞同：3
> 
> 时间：2012-08-17T18:18:37.837
> 
> 标签：npm, git-submodules, jshint

我正在运行 grunt.js。它的依赖项之一是 node-jshint，它将实际的 jshint 文件添加为子模块。（我正在使用我自己的 node-jshint 分支，以便我可以对 jshint 源代码进行一些修改）。

如果你在 grunt 中 npm install，它会安装 node-jshint 并且还会构建 jshint 子模块。

但是，我的 package.json 文件指向我的 node-jshint fork 的 url，而不是 npm 版本，并且 jshint 子模块永远不会被创建。

似乎当 npm 正常获取依赖项时，它在内部运行 git submodule update，但是当它通过 URL 获取依赖项时，它从不运行该命令。

无论如何，在安装依赖项时是否强制 npm 运行 git submodule update，比如通过 package.json？

# web-services - 带有 symfony2 的肥皂网络服务

> ID：12011122
> 
> 赞同：1
> 
> 时间：2012-08-17T18:18:49.103
> 
> 标签：web-services, soap, symfony, soapserver

我需要使用 symfony2 创建一个 Web 服务，我阅读了官方文章[http://symfony.com/doc/current/cookbook/web_services/php_soap_extension.html](http://symfony.com/doc/current/cookbook/web_services/php_soap_extension.html) 在示例中它创建了一个带有参数路由 .wsdl 文件的 SoapServer 实例，这是什么文件？我没有在 symfony 中找到太多关于肥皂的文档。请帮忙？

```
public function indexAction()
{
    $server = new \SoapServer('/path/to/hello.wsdl');
    $server->setObject($this->get('hello_service'));

    $response = new Response();
    $response->headers->set('Content-Type', 'text/xml; charset=ISO-8859-1');

    ob_start();
    $server->handle();
    $response->setContent(ob_get_clean());

    return $response;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T17:28:35.813

我不确定你是否找到了答案。仅针对可能遇到此类问题的其他任何人：

WSDL 是定义和描述 Web 服务的语言。它基本上是一个 XML 文件，其中包含服务器提供的每个函数的输入/输出参数。它还包含有关提供服务的服务器本身的一些信息。

为了能够创建 web 服务，您需要使用您提供的代码，这实际上会准备 Symfony 为“/path/to/hello.wsdl”上的客户端提供服务（在我的示例中，此路径是 / YourDesiredPathFor/services.wsdl)，并且您需要提供一个有效的 WSDL 文档，其中包含正确 WSDL 格式的上述信息。问题是 Symfony（甚至是 PHP 本身）无法自动创建文件。

要解决这个问题，您需要使用外部 WSDL 生成器。我建议使用[PHP-WSDL-Creator](http://code.google.com/p/php-wsdl-creator/)。它使用写在 php 文件中的注释来创建 WSDL 文件并运行 SoapServer。这意味着您甚至不需要您提供的代码。它还具有适当的接口和插件，可为您提供不同协议和语言的客户端。

你需要稍微调整一下！如果您希望它符合 symfony 标准，我认为您需要重写它的某些部分；但如果您想将它用作外部库，它也可以工作！我这样做的方法是将提取的文件复制到 ./vendor/php_wsdl/lib/php_wsdl/src （很长，不是吗？也许更简单的路径也可以！）；然后在 ./vender/php_wsdl/lib/php_wsdl 中定义了一个 php_wsdl.php：

```
<?php

require_once __DIR__. '/src/class.phpwsdl.php';

class WSDL_PhpWsdl extends PhpWsdl{
} 
```

接下来，在“./app/autoload.php”中，我添加了以下行以使 Symfony 能够使用创建的扩展：

```
require_once __DIR__. '/../vendor/php_wsdl/lib/php_wsdl/php_wsdl.php'; 
```

就一件事！扩展需要一个“缓存”文件夹来缓存创建的 wsdl 文件和所有文件。不幸的是，因为我需要快速完成项目，所以我没有足够的时间来管理缓存文件夹。肯定有比我更好的方法，我真的很高兴知道它们。

无论如何，现在您需要使用扩展的功能！为此，我为我正在使用的包创建了一个“ServerController”：

```
<?php
namespace Tara\PageControllerBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;

class ServiceController extends Controller
{
    function wsdlAction(){

        \PhpWsdlServers::$EnableRest = false;

        $soap= \WSDL_PhpWsdl::CreateInstance(
            null,                               // PhpWsdl will determine a good namespace
            $this->generateUrl('service_wsdl', array(), true),  // Change this to your SOAP endpoint URI (or keep it NULL and PhpWsdl will determine it)
            __DIR__. '/cache',                  // Change this to a folder with write access
            Array(                              // All files with WSDL definitions in comments
                dirname(__FILE__). '/../Services/MyService.php'
            ),
            null,                               // The name of the class that serves the webservice will be determined by PhpWsdl
            null,                               // This demo contains all method definitions in comments
            null,                               // This demo contains all complex types in comments
            false,                              // Don't send WSDL right now
            false                               // Don't start the SOAP server right now
        );

        if($soap->IsWsdlRequested())            // WSDL requested by the client?
            $soap->Optimize=false;              // Don't optimize WSDL to send it human readable to the browser

        $soap->RunServer();
    }
} 
```

如您所见，缓存文件夹的路径位于本地目录中，这意味着必须在 ./src/Tara/PageControllerBundle/Controller 中手动创建它（显然在我的情况下；您需要更改路径） . 我确信有更好的方法来管理缓存文件夹。那里有一条线：

```
dirname(__FILE__). '/../Services/MyService.php 
```

这一行告诉扩展在哪里寻找注释以创建 WSDL 页面。您还需要定义到“service_wsdl”的路由：

```
service_wsdl:
    pattern: /YourDesiredPathFor/services.wsdl
    defaults: {_controller: TaraPageControllerBundle:Service:wsdl} 
```

如您所见，控制器是ServiceController，负责它的函数是wsdlAction；定义的确切功能！

举个例子，我会提供我自己的 MyService.php：

```
<?php

namespace Tara\PageControllerBundle\Services;

use Tara\PageControllerBundle\Model\...

/**
 * @service Tara\PageControllerBundle\Services\MyService
 */

class MyService
{
    /**
     * Function Create
     *
     * @param string $link
     * @param string $title
     * @param string $image
     * @param string $description
     * @return boolean Status of the creation
     * @pw_rest POST /YourDesiredPathForAction/create Create The Object
     *
     */

    public function Create($link, $title, $image, $description)
    {

        // your code that handles the data goes here. this is not a part of the annotations!
        return (bool)$result;
    }
} 
```

现在，您可以使用 SoapClient 连接到您的 Web 服务

> http://your-server.something/YourDesiredPathFor/services.wsdl?wsdl

并调用 Create 函数！你也可以通过打开上面写的地址来检查扩展的输出。该扩展还提供了一个“人类可读”的版本

> http://your-server.something/YourDesiredPathFor/services.wsdl。

我很高兴知道这是否对任何人有帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:32:44.633

SOAP 是一个更一般的概念，Symfony 假设您熟悉它。您链接到的页面底部有一个示例 WSDL。查看有关 SOAP 和 WSDL 的教程，然后尝试重新创建它们在 Symfony 页面中所做的事情。

[SOAP 教程](http://www.w3schools.com/soap/soap_intro.asp)

[WSDL 教程](http://www.w3schools.com/wsdl/wsdl_intro.asp)

# linux - Bash，Linux，需要根据来自另一个文件的匹配内容从一个文件中删除行

> ID：12011126
> 
> 赞同：0
> 
> 时间：2012-08-17T18:19:02.600
> 
> 标签：linux, bash, grep

当同一行存在于另一个文件中时，有很多关于如何删除一个文件中的行的示例。我已经通读了它们，如果整行匹配，它们都会被删除。例如：`grep -vxF -f file1 file2`

我所拥有的略有不同。我有一个来自我的网站和我的客户网站的 URL 列表。当域与另一个文件中的域匹配时，我想从该文件中删除行。

所以第一个文件可能看起来像：

```
http://www.site1.com/some/path
http://www.site2.com/some/path
http://www.site3.com/some/path
http://www.site4.com/some/path 
```

第二个文件可能是：

```
site2.com
www.site4.com 
```

我希望输出为：

```
http://www.site1.com/some/path
http://www.site3.com/some/path 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:22:47.247

`grep`你的旗帜太多了。具体来说：`-x`将使您无法获得想要的结果。

假设*file1*具有模式，而*file2*具有 URL，只需使用：

```
grep -v -f file1 file2 
```

该`-x`标志将使您无法获得您想要的结果：使用`-x`意味着：仅与整行匹配，即仅在该行完全匹配时才匹配该行，例如*site2.com*。

来自`man grep`：

> -x, --line-正则表达式
> 
> 仅选择与整行完全匹配的匹配项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:22:57.153

可能有一些极端情况无法处理，但您可以简单地使用`-v`和`-f`选项`grep`：

```
grep -f file2.txt -v file1.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:27:26.450

以下应该有效（未经测试）：

```
#!/usr/bin/perl

use strict;

open my $fh, "<$ARGV[1]" || die $!;

my $filter=join "|", <$fh>;

close $fh;

open $fh, "<$ARGV[0]" || die $!;

print grep !m{^http://[^/]*($filter)/}x, <$fh>;

close $fh; 
```

# iphone - Facebook SDK 和 iOS 应用程序 (authButtonAction) 的问题

> ID：12011135
> 
> 赞同：1
> 
> 时间：2012-08-17T18:19:50.330
> 
> 标签：iphone, objective-c, ios, facebook, cocoa-touch

我不完全确定出了什么问题。我实现了developers.Facebook.com 指定的所有内容，以在我的iOS 应用程序中验证Facebook 登录。以下是我认为与问题相关的内容：

我正在制作的应用程序是一个**带有导航控制器的选项卡式应用程序**。

我收到以下代码的警告（由 Facebook 开发人员页面提供）：

```
- (IBAction)authButtonAction:(id)sender {
    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    // The user has initiated a login, so call the openSession method
    // and show the login UX if necessary.
    [appDelegate openSessionWithAllowLoginUI:YES];
} 
```

警告是： **使用不兼容类型“id< UIApplicationDelegate>”的表达式初始化“AppDelegate *”**

当我单击 authButton 时，iPhone 上的 Facebook 应用程序会打开，并向用户显示有关授予我的应用程序访问发布状态更新的适当消息。但是...控制流永远不会返回给我的应用程序，并且 Facebook 应用程序保持打开状态。我相信这与上述警告有关。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T18:39:53.320

试试这个：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

# php - mysql In 子句避免循环

> ID：12011136
> 
> 赞同：-4
> 
> 时间：2012-08-17T18:19:51.077
> 
> 标签：php, mysql

我必须检索用户的历史记录，并且我有 4 个数据相互依赖的表。我可以使用循环检索数据，但我使用了“where IN ()”子句，并且将前一个查询的输出内爆.但是，如果我提供给“where IN()”的列表为空，则会返回错误。IN() 不能为空吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:21:39.867

您可以在开头添加一个空值，例如`IN (0,your values here)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:23:31.403

在为 IN 子句内爆数组时，我会做两件事之一

1：检查您是否甚至需要运行查询

```
if(!empty($some_array)) {
    //run mysql query
}
else {
   // if you need to do something if the array is empty, such as error or set some defaults, do it here
} 
```

2：数组初始化程序中的一个值，它永远不会在数据库中（例如，如果我根据自动增量 id 进行选择，我使用零作为默认数组值来停止任何与空数据集有关的问题，因为零永远不会在我的 id 列中）。

```
$some_array = array(0); 
```

# jquery - jQuery ajax 仅加载某个元素的文本

> ID：12011143
> 
> 赞同：3
> 
> 时间：2012-08-17T18:20:41.663
> 
> 标签：jquery, ajax

我正在尝试`$.load()`从其他页面（`foo.html`）获取一些数据。假设我希望我的 current`<title>Current</title>`与 foo 的标题相同，`<title>Foo</title>`. 我正在做的是： `$("title").load("foo.html title");`

`<title>`问题是我得到了带有标签 的 foo 的标题：`<title><title>Foo</title></title>` 它显然不起作用。我怎样才能只得到 foo 的标题文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:21:24.697

这感觉就像一个黑客，但它的工作原理。

```
$("<div>").load("foo.html title", function(){
  $('title').text($(this).text());
}); 
```

尽管这是一个 hack，但我制作了一个您可以使用的小插件。

```
$.fn.loadText = function(path, selector){
  var node = this[0].nodeName.toLowerCase();
  $("<div>").load(path + " " + selector, function(){
    $(node).text($(this).text());
  });
} 
```

像这样使用它：

```
$('title').loadText("some path", 'title'); 
```

如果您想加载到`title`，另一个标签的文本...

```
$('title').loadText("some path", 'div#foo'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:37:10.250

我会`$.get(url, data, success)`按照 jquery 的建议使用 global 代替。这有效（经过测试）：

```
$.get('foo.html', function(responseText, textStatus, XMLHttpRequest) {
    $('title').text($(XMLHttpRequest.responseXML).find('title').text());  
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-17T18:25:57.737

试试这个...

```
$("title").load("foo.html").find("title").text() 
```

# c# - 将字符串转换为日期时间问题

> ID：12011144
> 
> 赞同：0
> 
> 时间：2012-08-17T18:20:52.333
> 
> 标签：c#

我一直在网上寻找一个可以解决字符串转换为日期时间问题的示例。

我想将 en-us (mm/dd/yyyy) 转换为荷兰比利时 (dd/mm/yyyy) 日期时间。你能给我一个工作的例子吗？

为了您的信息，我尝试了 Convert.ToDateTime、Parse、TryParse、ParseExact 等，但没有一个有效。我真的很喜欢一个可以进行这种转换的例子，没有无效的链接。

* * *

更新

我得到的错误是：字符串未被识别为有效的日期时间。我试过的：

```
----------------
string str = "02/20/2012";
DateTime dt = Convert.ToDateTime(str);
---------------------
IFormatProvider theCultureInfo = new System.Globalization.CultureInfo("nl-BE", true);
DateTime theDateTime = DateTime.ParseExact(deliveryDate, "dd/mm/yyyy", theCultureInfo);
Console.WriteLine(dt);
----------------------
var parsed = DateTime.ParseExact("02/20/2012","dd/mm/yyyy", null);
---------------

dateValue = DateTime.Parse(dateString, new CultureInfo("nl-BE", false)); 
```

以及其他一些我现在不记得的例子。但所有的领导无处可去。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T18:28:23.657

使用这些方法重载：

*   [`DateTime.Parse(string, IFormatProvider)`](http://msdn.microsoft.com/en-us/library/kc8s65zs.aspx)
*   [`DateTime.ToString(IFormatProvider)`](http://msdn.microsoft.com/en-us/library/ht77y576.aspx)

并将 a 传递[`CultureInfo.DateTimeFormat`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.datetimeformat.aspx)给他们：

```
string enUsDateString = "12/31/2012";
IFormatProvider enUsDateFormat = new CultureInfo("en-US").DateTimeFormat;

DateTime date = DateTime.Parse(enUsDateString, enUsDateFormat);

IFormatProvider nlBeDateFormat = new CultureInfo("nl-BE").DateTimeFormat;
string nlBeDateString = date.ToString(nlBeDateFormat); 
```

但是，这也将包括输出中的时间分量。如果您不希望这样，请尝试例如：

```
IFormatProvider nlBeDateFormat = new CultureInfo(…).DateTimeFormat.ShortDatePattern;
//                                                                ^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-02T00:10:06.017

这对我来说很好：

```
DateTime date = 
DateTime.ParseExact("20122018", "dd/MM/yyyy", 
                   CultureInfo.CurrentCulture); 
```

# pyqt - 如何创建一个 3 色渐变百分表（显示绿-黄-红的那个）

> ID：12011147
> 
> 赞同：4
> 
> 时间：2012-08-17T18:21:11.020
> 
> 标签：pyqt

![带静态梯度指示器的表盘](../Images/a49149fab89d1e1e6f7dc7c949c6425b.png)

所以我有这个用于 PyQt 小部件的表盘图像。现在，如您所见，渐变指示器，绿-黄-红弧是静态的，是图像的一部分。

我想动态创建它，以便根据某些范围确定颜色。例如，不是等量的绿色和红色，我可能希望大约 60 度的值是红色，其余部分是绿色和黄色。为此，我将指定一些范围（例如，0-90 度应该是绿色等）。

关于如何绘制这种 CURVED 颜色渐变的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T20:36:07.387

要做到这一点，一种方法是创建一个小部件并执行一个自定义的paintEvent。您将使用几个元素构建此结果：

1.  绘制仪表背景的静态像素图
2.  绘制带有渐变的饼形
3.  用原始图像重新填充中心以再次将其剪掉

您将需要在 init 中缓存一次像素图，这样您就不会继续从磁盘创建它。然后你可以给小部件一个方法来设置值`0.0 - 1.0`。

```
class GaugeWidget(QtGui.QWidget):

    def __init__(self, initialValue=0, *args, **kwargs):
        super(GaugeWidget, self).__init__(*args, **kwargs)
        self._bg = QtGui.QPixmap("bg.png")
        self.setValue(initialValue)

    def setValue(self, val):
        val = float(min(max(val, 0), 1))
        self._value = -270 * val
        self.update()

    def paintEvent(self, event):
        painter = QtGui.QPainter(self)
        painter.setRenderHint(painter.Antialiasing)
        rect = event.rect()

        gauge_rect = QtCore.QRect(rect)
        size = gauge_rect.size()
        pos = gauge_rect.center()
        gauge_rect.moveCenter( QtCore.QPoint(pos.x()-size.width(), pos.y()-size.height()) )
        gauge_rect.setSize(size*.9)
        gauge_rect.moveCenter(pos)

        refill_rect = QtCore.QRect(gauge_rect)
        size = refill_rect.size()
        pos = refill_rect.center()
        refill_rect.moveCenter( QtCore.QPoint(pos.x()-size.width(), pos.y()-size.height()) )
        # smaller than .9 == thicker gauge
        refill_rect.setSize(size*.9)
        refill_rect.moveCenter(pos)

        painter.setPen(QtCore.Qt.NoPen)

        painter.drawPixmap(rect, self._bg)

        painter.save()
        grad = QtGui.QConicalGradient(QtCore.QPointF(gauge_rect.center()), 270.0)
        grad.setColorAt(.75, QtCore.Qt.green)
        grad.setColorAt(.5, QtCore.Qt.yellow)
        grad.setColorAt(.25, QtCore.Qt.red)
        painter.setBrush(grad)
        painter.drawPie(gauge_rect, 225.0*16, self._value*16)
        painter.restore()

        painter.setBrush(QtGui.QBrush(self._bg.scaled(rect.size())))
        painter.drawEllipse(refill_rect)

        super(GaugeWidget,self).paintEvent(event) 
```

![季度值](../Images/2e20682c97016751fbe1eff39fa9e47b.png)

![半价](../Images/02bfcd347a481c4bcb46d6edb8c2e15f.png)

![全值](../Images/2e0ab32010f03dcdc3fb46a07a4c1c3f.png)

您可以通过公开一种设置颜色的方法甚至更改开始和结束范围来进一步扩展此小部件。它们将是 paintEvent 将引用的属性，就像它现在使用的 value 属性一样。

您还可以调整色标值以更改范围的平衡。

确保让paintEvent 进行尽可能少的处理。

# hyperlink - 如何筛选抓取并放置将转到该链接的有效 href 链接

> ID：12011148
> 
> 赞同：0
> 
> 时间：2012-08-17T18:21:16.773
> 
> 标签：hyperlink, screen-scraping, href

我已经抓取了一个网页，但我希望该链接具有有效链接，并在单击时跳转到该链接页面。

前抓取的数据：第 1 天 - 转到我的页面 - 状态

我希望转到我的页面跳转到其 href 中的任何链接。

前任。我得到的实际 html

```
<td><a href="javascript:jsFormAuth('summary.php?meetingid=40456&plusday=0');">Go to my Page</a></td> 
```

我需要它是这样的：

```
<td><a href="http://somewebsite.com/tab/form/summary.php?meetingid=40456&plusday=0');">Go to my Page</a></td> 
```

这是我的抓取代码：

```
public string ScreenScrape()
        {
            string url = "http://somewebsite.com/tab/form/index.php";
            string strResult = "";

            WebResponse objResponse;
            WebRequest objRequest = System.Net.HttpWebRequest.Create(url);

            objResponse = objRequest.GetResponse();

            using (StreamReader sr = new StreamReader(objResponse.GetResponseStream()))
            {
                strResult = sr.ReadToEnd();
                // Close and clean up the StreamReader
                sr.Close();
            }
            var webGet = new HtmlAgilityPack.HtmlWeb();
            var doc = webGet.Load(url);

            foreach (HtmlNode link in doc.DocumentNode.SelectNodes("//a[@href]"))
            {
                HtmlAttribute att = link.Attributes["href"];
                att.Value = "http://somewebsite.com/tab/form/"+att.Value;
            }

            return strResult;
        } 
```

这是我尝试更改链接并删除 javascript 字符串，但无法弄清楚如何找到正确的 index 。另外，一旦我能够改变它，如何将 strResult(above) 中的每个 href 替换为新的 href？

```
 foreach (HtmlNode link in doc.DocumentNode.SelectNodes("//a[@href]"))
    {
        HtmlAttribute att = link.Attributes["href"];
        att.Value = "http://somewebsite.com/tab/form/" + ....
    } 
```

谁能帮帮我？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T04:09:20.237

没关系我明白了，但我知道 html url 解析不是最好的方法（如果你有关于如何更好地解析它的建议，请这样做）。现在，唯一的目标是更改 href 链接，这样就可以了。

```
 public string ScreenScrape()
        {
            string url = "http://somewebsite.com/tab/form/index.php";
            string strResult = "";

            WebResponse objResponse;
            WebRequest objRequest = System.Net.HttpWebRequest.Create(url);

            objResponse = objRequest.GetResponse();

            using (StreamReader sr = new StreamReader(objResponse.GetResponseStream()))
            {
                strResult = sr.ReadToEnd();
                // Close and clean up the StreamReader
                sr.Close();
            }
            var webGet = new HtmlAgilityPack.HtmlWeb();
            var doc = webGet.Load(url);

            foreach (HtmlNode link in doc.DocumentNode.SelectNodes("//a[@href]"))
            {

                string removeString ="javascript:jsFormAuth('";
                string removeEnd = "');";
                HtmlAttribute att = link.Attributes["href"];
                String strUrl = HttpContext.Current.Request.Url.AbsoluteUri.Replace(att.XPath, "(");
                string sub1 = att.Value.Replace(removeString,"");
                string sub2 = sub1.Replace(removeEnd,"");
                att.Value = "http://somewebsite.com/tab/form/" + sub2;

            }

            return doc.DocumentNode.InnerHtml;

        } 
```

# asp.net-mvc-3 - 如何将我的自定义 DisplayTemplate 与非文本字段一起使用，使其不会覆盖现有值？

> ID：12011149
> 
> 赞同：0
> 
> 时间：2012-08-17T18:21:18.163
> 
> 标签：asp.net-mvc-3, templates, attributes, editor

我一直在按照[本指南](http://www.dotnetcurry.com/ShowArticle.aspx?ID=687)创建自定义显示属性（特别是额外的 html 属性）以应用于我的 ViewModel 中的属性。我已经覆盖了 EditorTemplates 文件夹中的 String 和 Boolean。编辑器模板检查是否已设置值/是否已使用显示属性 - 并添加额外的 html 属性。

不过，在执行编辑操作时，我卡在了布尔覆盖上。无论我是否将属性应用到字符串，ViewModel 总是映射到正确的现有数据。这不适用于任何其他表单输入类型，因为模板是通过更改 TextBoxFor 中的 type 属性来编写的。

我一直在写这篇文章，主要是因为我一直在研究淘汰赛，并且想要一种简单的方法将 data-bind 属性应用于强类型视图 - 如果有更好的方法，请告诉我！

**属性代码：**

```
 public class Knockout : Attribute 
{
    public string DataBind { get; set; }
    public string InputType { get; set; }

    /*
    Example:
    Knockout("checked: showUploader", "checkbox")      
    Adds the HTML attributes data-bind="checked: showUploader" type="checkbox"
    */
    public Knockout(string dataBind, string inputType)
    {
        this.DataBind = dataBind;
        this.InputType = inputType;
    }
    public Dictionary<string, object> OptionalAttributes()
    {
        var options = new Dictionary<string, object>();

        if(!string.IsNullOrWhiteSpace(DataBind))
        {
            options.Add("data-bind", DataBind);
        }

        if (!string.IsNullOrWhiteSpace(InputType))
        {
            options.Add("type", InputType);
        }
        return options;
    }
} 
```

**模板代码**

```
@using CumbriaMD.Infrastructure.ViewModels.DisplayAttributes
@{
   var key = "Knockout";
}

@if (ViewData.ModelMetadata.AdditionalValues.ContainsKey(key))
{
   var knockout = ViewData.ModelMetadata.AdditionalValues[key] as Knockout;
   @Html.TextBoxFor(model => model, knockout.OptionalAttributes())
}
else
{

/*
When the attribute is not present, the default action is the following - which seems to
be overriding the data mapped from the database:
*/
    @Html.TextBoxFor(model => model, new { type="checkbox" })
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:11:02.420

[在这个美丽的问题](https://stackoverflow.com/questions/7302434/mvc-3-knockoutjs-adding-the-data-bind-attribute-when-using-editorfor-for-a-bo)中找到了答案！

我的布尔值工作模板现在看起来像：

```
@using CumbriaMD.Infrastructure.ViewModels.DisplayAttributes
@{
   var key = "Knockout";
   bool? value = null;
   if(ViewData.Model != null)
   {
      value = Convert.ToBoolean(ViewData.Model, System.Globalization.CultureInfo.InvariantCulture);
   }
}

@if (ViewData.ModelMetadata.AdditionalValues.ContainsKey(key))
{
   var knockout = ViewData.ModelMetadata.AdditionalValues[key] as Knockout;
   @Html.CheckBox("", value ?? false, knockout.OptionalAttributes())
}
else
{
   @Html.CheckBox("", value ?? false, new { @class = "check-box" })
} 
```

# visual-studio-2010 - Visual Studio 2010 中缺少服务器资源管理器右键单击菜单选项

> ID：12011150
> 
> 赞同：1
> 
> 时间：2012-08-17T18:21:20.400
> 
> 标签：visual-studio-2010, right-click, server-explorer

我已经到处寻找这个问题的答案，但什么也找不到。我在运行 MS XP Pro 的虚拟机上安装了 VS 2010 专业版。连接到我的数据库后，我可以在列表中看到所有的表、存储过程和函数。但是，当我在其中任何一个上单击时，缺少创建新/编辑/运行其中任何一个的选项。

这不是我第一次设置 VS 2010。我有一台新笔记本电脑，所以重新安装了所有东西。我第一次设置时没有更改任何设置，这次没有更改。我每次都以相同的方式设置与数据库的连接，甚至在设置此安装时查看了我的旧连接设置。旧的安装有所有的右键单击选项，但这个没有。`Tools -> Import and Export Settings -> Reset all settings`我已尝试将`General Development Settings`,`Visual C# Development Settings`和`Web Development`作为默认设置集合。这些都不起作用。

我查看了设置，没有发现右键菜单。似乎数据库连接以“只读”模式打开，但似乎没有设置，所以我认为情况并非如此。如果有人知道让这些选项出现的任何方法，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:57:49.900

在我安装 Visual Studio 2010 (Ultimate) 之后，我不小心卸载了与 VS 一起安装的 SQL Server Data Tools，并且在重新安装它们（通过修复 VS 安装）之后，丢失的上下文菜单选项又回来了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:40:46.060

急于解决这个问题，我更多地使用了连接。我最初选择`Microsoft SQL Server`作为数据源，并`.NET Framework Data Provider for OLE DB`作为数据提供者。显然，数据提供者错了。选择后`.NET Framework Data Provider for SQL Server`，它起作用了，我可以看到我所有的右键菜单选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T19:31:40.653

我有 VS 2013 Ultimate 安装。在这个版本中，我安装了 SSTD BI。一切都很完美，直到我遇到同样的问题。右键单击表或其他文件夹仅显示三个选项：复制、刷新、属性。棘手的是，无法在控制面板中卸载 SSTD BI 或在先前安装的基础上安装 SSTD BI。帮助我的是修复VS2013的安装。启动安装文件并选择修复而不是安装。几个小时，它又开始工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-13T12:33:52.200

我从这里下载了 SSTD，它修复了我丢失的上下文菜单

[https://msdn.microsoft.com/en-us/mt186501](https://msdn.microsoft.com/en-us/mt186501)

# android - 带边框的样式化gridview android

> ID：12011153
> 
> 赞同：0
> 
> 时间：2012-08-17T18:21:36.443
> 
> 标签：android, gridview, styles

我正在创建一个画廊类型的应用程序。我已经启动并运行了所有图片从手机加载并显示在网格视图中的基础知识。我希望 gridview 中的每个图像都有一个边框，可能是白色的，以便它们从黑色背景中脱颖而出。我想实现新 Instagram 使用的类似 gridview 的东西，但可能没有那么先进，周围有阴影。我已经搜索了网络，但我没有找到任何东西。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:27:48.943

在drawable文件夹中创建一个名为stroke.xml的xml文件，

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
   <solid android:color="#ffffff" />
   <stroke android:width="1dip" android:color="#4fa5d5"/>
</shape> 
```

并将您在 GridView 中使用的 ImageView 的背景设置为该 xml 文件。

**编辑**：如果您想在单击 GridView 项目时看到橙色或蓝色，则必须指定 ImageView 的属性，如下所示。

```
<ImageView
        android:id="@+id/ivHighThumbnail"
        android:layout_width="80dip"
        android:layout_height="80dip"
        android:background="@drawable/stroke" 
        android:scaleType="fitXY"
        android:layout_margin="10dip" /> 
```

这里请注意属性

```
android:scaleType="fitXY"
android:layout_margin="10dip" 
```

这就是让您的项目感觉像是被点击并突出显示的原因。

还将此 xml 部分包含在 stroke.xml 文件中

```
<padding
        android:bottom="2dp"
        android:left="2dp"
        android:right="2dp"
        android:top="2dp" /> 
```

为了更好看的结果...

# automated-tests - minicom 脚本立即退出

> ID：12011165
> 
> 赞同：1
> 
> 时间：2012-08-17T18:22:30.377
> 
> 标签：automated-tests, serial-port, modem, run-script, minicom

我编写了以下 minicom 脚本：

```
sleep 20
send "\n"
expect {
    "#" break
}
send "\n"
send "uname -a"
expect {
   "Linux:" break
} 
```

用于运行脚本的命令是：

```
sudo minicom -S v.runscript -C minicom.log 
```

但是当我运行这个命令时，一旦我输入了 sudo 的密码，它就会立即退出。即使在开始时睡觉也不起作用。“minicom.log”文件也是空的。

我在用于运行脚本的脚本或命令中可能缺少什么？

### 关于脚本的注意事项：

当我手动使用 'sudo minicom' 时，大约需要 10 秒才能给出提示。所以我在一开始就包括了“sleep 20”。

如果之前的会话在用户仍然登录的情况下退出，我也不会被提示输入登录名和密码。所以我也不希望在使用运行脚本时出现登录名/密码提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-26T02:22:49.760

你应该写：

```
send "\n"
expect {
    "#" break
    timeout 20
}
send "\n"
send "uname -a"
expect {
    "Linux:" break
} 
```

# jquery - jQuery Animate：自动调整页面高度

> ID：12011167
> 
> 赞同：1
> 
> 时间：2012-08-17T18:22:42.013
> 
> 标签：jquery

我有一个小型 ajax 应用程序，它发送一个表单并返回与表单值匹配的数据。当请求完成时，表单淡出，结果淡入。问题是页面丢失了大约 200px 的高度，页面只是粗略地删除了额外的空白。我希望它平滑地为多余的空白设置动画，或者只是让页面保持原样，如果无法平滑地为它设置动画。这是代码：

```
$(function() {
    $(".eivk").click(function() {
        $("#verkkokauppainfo").hide();
    }); 
    $(".vk").click(function() {
        $("#verkkokauppainfo").show();
    }); 
        $(".back").click(function() {
        $("#service-test").show();
        $("#resultcontainer").hide();
    }); 
}); 
$(function() {
    $("#submit").click(function() {

  if ($('input[name="julkaisu"]:checked').length == 0) {
       $('.error').show();
         return false;
   }

      var dataString = $('#service-test').serialize();
      //alert (dataString);return false;
     $.ajax({
    type: "POST",
    url: "http://www.kotisivut.name/quizs.php",
    data: dataString,
    dataType: "text",
    error: function(){ alert ('Nyt jotakin meni kyllÃ¤ pahemman kerran pieleen. YritÃ¤ uudelleen?');
 },
    success: 
    function(data) {
 $("#resultcontainer").html(data);
 $("#service-test").fadeOut(1400);
$("#resultcontainer").fadeIn(1500);
 $("#page").animate({
    height: "auto"
  }, 1500 );

   }

  });
  return false;

    });
  });    
$(function() {
    $(".eivk").click(function() {
        $("#verkkokauppainfo").hide();
    }); 
    $(".vk").click(function() {
        $("#verkkokauppainfo").show();
    }); 
        $(".back").click(function() {
        $("#service-test").show();
        $("#resultcontainer").hide();
    }); 
}); 
$(function() {
    $("#submit").click(function() {

  if ($('input[name="julkaisu"]:checked').length == 0) {
       $('.error').show();
         return false;
   }

      var dataString = $('#service-test').serialize();
      //alert (dataString);return false;
     $.ajax({
    type: "POST",
    url: "http://www.kotisivut.name/quiz.php",
    data: dataString,
    dataType: "text",
    error: function(){ alert ('Nyt jotakin meni kyllÃ¤ pahemman kerran pieleen. YritÃ¤ uudelleen?');
 },
    success: 
    function(data) {
 $("#resultcontainer").html(data);
 $("#service-test").fadeOut(1400);
$("#resultcontainer").fadeIn(1500);
 $("#page").animate({
    height: "???"
  }, 1500 );

   }

  });
  return false;

    });
  }); 
```

我试过在代码中使用 height:auto ，但不，它不会做任何事情。所以我认为我必须从页面上检索高度，并用它来为高度设置动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:30:41.890

好的，所以在你淡出之前，使用 .height() 获取 service-test 和结果容器的父元素的 dom 高度，并使用 css({ 'height':'blah' }) 设置它，这样元素就不会调整大小。然后在淡入完成后将父元素设置为 -=200px。

# forms - 根据字段值将表单提交按钮发送到电子邮件

> ID：12011170
> 
> 赞同：0
> 
> 时间：2012-08-17T18:22:51.037
> 
> 标签：forms, email, conditional-statements

我正在创建一个带有提交按钮的 PDF 表单。我希望表单根据字段中另一个表单的值通过电子邮件发送。我假设我需要执行“IF...ELSE”语句，但不断收到我无法弄清楚的语法错误。我完全是java文盲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:10:07.820

这可以使用多种解决方案来完成，但您确实需要在 PDF 中编写 Javascript。您可以使用 if-else 单击电子邮件按钮。您可以在此处检查在 PDF 表单中输入的值：

```
if (this.getValue("somefield") == "left") { emailvalue = "toA@domain.com" } else { emailvalue = "toB@domain.com" } 
```

但是您也可以设置某个字段的值`onBlur`或。`onFocus`与单选按钮一样，`onBlur`它很有用，因为您知道用户单击或关注该字段，因此将变量设置`emailvalue`为某个值。

# jboss - JBoss AS 7.1.1 的 Persistence.xml

> ID：12011174
> 
> 赞同：2
> 
> 时间：2012-08-17T18:23:04.430
> 
> 标签：jboss, ejb, ejb-3.0, jboss7.x

我有一个与 JBoss AS 7.1.1 一起运行的客户端和服务器设置，我对我的 persistence.xml 有疑问。目前它看起来像这样：

```
<persistence>
    <persistence-unit name="GrahamsProj">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:jboss/datasources/WorkCenterDS</jta-data-source>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
            <property name="hibernate.connection.driver_class" value="oracle.jdbc.OracleDriver"/>
        </properties>
    </persistence-unit>
</persistence> 
```

我的服务器的 META-INF 文件夹中有 persistence.xml。我必须缺少一些属性，因为当我尝试查询我连接到的数据库时出现此错误。

```
11:35:07,840 ERROR [org.jboss.ejb3.invocation] (EJB default - 1) JBAS014134: 
EJB Invocation failed on component GrahamsProjBean for method public abstract 
void grahamsprojserver.session.interfaces.GrahamsProjBeanRemote.test(): javax.ejb.EJB
Exception: java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: 
Schemas is not mapped [FROM Schemas s] 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T14:40:21.043

您需要在 persistence.xml 中包含所有模型类。例子：

```
<persistence>
    <persistence-unit name="GrahamsProj">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:jboss/datasources/WorkCenterDS</jta-data-source>
        <class>your.class.model.Example</class>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
            <property name="hibernate.connection.driver_class" value="oracle.jdbc.OracleDriver"/>
        </properties>
    </persistence-unit>
</persistence> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T15:58:13.637

您可能还需要更新 hibernate.dialect 属性。在您的示例中，您使用“org.hibernate.dialect.HSQLDialect”并且您使用 Oracle 驱动程序，例如“oracle.jdbc.OracleDriver”。如果您使用的是Oracle 数据库，则需要更新hibernate 方言，例如“org.hibernate.dialect.Oracle10gDialect”。

这是您更新的代码：

```
<persistence>
    <persistence-unit name="GrahamsProj">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:jboss/datasources/WorkCenterDS</jta-data-source>
        <class>your.class.model.Example</class>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
            <property name="hibernate.connection.driver_class" value="oracle.jdbc.OracleDriver"/>
        </properties>
    </persistence-unit>
</persistence> 
```

# javascript - 使用原型对对象进行排序

> ID：12011176
> 
> 赞同：0
> 
> 时间：2012-08-17T18:23:17.350
> 
> 标签：javascript, prototypejs

我有一个名为 Persons 的对象数组，想按其中一个成员进行排序，我是 javascript prorotype 的新手，不知道该怎么做。该对象如下所示：

```
[ Object { EntityId=0, Name="Edibert", Number="1234", Value=""}]

[ Object { EntityId=0, Name="Jairo", Number="1234", Value=""}] 
```

因此，对于该对象 Persons 数组，它还有一些项目。我知道我可以通过执行类似的操作来访问该名称`this.Persons[0].Name`。但是我如何按名称对其进行排序？

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:30:10.100

你可以在没有原型的情况下做到这一点：

```
Persons.sort(function(a,b) {
    if(a.Name < b.Name) { return -1; }
    if(a.Name > b.Name) { return 1; }
    return 0;
}); 
```

在函数中使用您想要的对象的任何属性，`sort`只要您返回以下值之一：

*   (-1) 如果 a 在最终数组中出现在 b 之前
*   (1) 如果 a 出现在 b 之后
*   (0) 如果被排序的两个项目相同

实际上，任何负数或正数都可以作为返回值，但`-1`都是`1`常规的。

# java - Java Swing - 在运行时动态切换语言环境

> ID：12011180
> 
> 赞同：5
> 
> 时间：2012-08-17T18:24:00.187
> 
> 标签：java, swing, internationalization

我了解如何将 java 程序国际化，但我有一个问题。我的程序中的语言可以随时切换，但我的程序可以存在多种状态，这意味着它可能有也可能没有几个 JLabels、JPanels、JFrames 等打开。是否有将当前 GUI 更新为切换语言的类或方法，还是必须手动完成？

如果没有其他方法，我只需要用户重新启动程序来切换语言，但运行时更改会很好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:33:51.763

通常使用的解决方案是在中央管理器类中有一个面向用户的字符串哈希。每当您想用数据填充字段时，您都可以调用该类：

```
JLabel label = new JLabel();
label.setText(LocalizationManager.get("MY_LABEL_TEXT")); 
```

在里面`LocalizationManager`你必须获取程序的当前语言，然后在适当的语言中查找适当的字符串`MY_LABEL_TEXT`。然后，管理器返回现在“本地化”的字符串，或者如果语言或字符串不可用，则返回一些默认值。

将 manager 想象成一个稍微复杂一点的 Map；它从一个键（即“MY_LABEL_TEXT”）映射到您想要显示的内容（“Good day！”或“Bienvenido！”），具体取决于您使用的语言。有很多方法可以实现这一点，但您出于内存/性能原因，希望管理器是静态的或单例（加载一次）。

例如： (1)

```
public class LocalizationManager {
  private SupportedLanguage currentLanguage = SupportedLanguage.ENGLISH;//defaults to english
  private Map<SupportedLanguage, Map<String, String>> translations;

  public LocalizationManager() {
    //Initialize the strings. 
    //This is NOT a good way; don't hardcode it. But it shows how they're set up.

    Map<String, String> english = new HashMap<String, String>();
    Map<String, String> french = new HashMap<String, String>();

    english.set("MY_LABEL_TEXT", "Good day!");
    french.set("MY_LABEL_TEXT", "Beinvenido!");//is that actually french?

    translations.set(SupportedLanguage.ENGLISH, english);
    translations.set(SupportedLanguage.FRENCH, french);
  }

  public get(String key) {
    return this.translations.get(this.currentLanguage).get(key);
  }

  public setLanguage(SupportedLanguage language) {
    this.currentLanguage = language;
  }

  public enum SupportedLanguage {
    ENGLISH, CHINESE, FRENCH, KLINGON, RUSSIAN; 
  }
} 
```

(1) 我没有对此进行测试，也不是单例，但这是一个即兴的例子。

# java - 使用Java（使用JNA）在Windows平台上更改墙纸并拉伸它

> ID：12011182
> 
> 赞同：1
> 
> 时间：2012-08-17T18:24:04.767
> 
> 标签：java, jna

我正在寻找一种使用 Java 中的“拉伸”方法更改 Windows 7 上的墙纸的方法。我发现了这个： [我可以在 Java/Groovy 中以编程方式更改我的 Windows 桌面壁纸吗？](https://stackoverflow.com/questions/4750372/can-i-change-my-windows-desktop-wallpaper-programmatically-in-java-groovy) 这种方法有效，但使用“居中”方法。我还尝试将 Jawc 项目导入 Eclipse，但出现无法解决的运行时错误（Stacktrace：[http](http://pastebin.com/Dqmsgqtv) ://pastebin.com/Dqmsgqtv ）。

# ios - 如何在 ios 上编译和运行 speex 编解码器

> ID：12011188
> 
> 赞同：0
> 
> 时间：2012-08-17T18:24:53.010
> 
> 标签：ios, arm, cross-compiling

我想为我的 ios 应用程序创建 libspeex 库，我使用 ./configure、make 和 make install 命令创建了该库，但是当我将此库添加到 Xcode 时，我遇到了一些错误，例如架构 armv6 的未定义符号：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:04:30.050

如果您看到与 SSE 相关的错误，则需要通过阻止`_USE_SSE`定义来禁用 SSE：

```
/* Enable SSE support */
/* #define _USE_SSE */ 
```

大约在 152 号线`config.h`。这是为 iOS 编译 libspeex 时最常见的问题。如果这不是您遇到的情况，请发布其他错误消息。

# .net - .NET 4.0：执行网络程序集

> ID：12011190
> 
> 赞同：1
> 
> 时间：2012-08-17T18:24:59.570
> 
> 标签：.net, .net-4.0, caspol

今天，我们将应用程序升级到 .NET Framework 4.0。当它调用驻留在网络共享上的程序集时，对于以前的版本，我们需要以下命令：

```
 caspol.exe -m -chggroup 1.3 -zone "Intranet" FullTrust 
```

对于 .NET 4，我们阅读了“NetFx40_LegacySecurityPolicy”并将其包含在 App.config 文件之外。

```
<runtime>
    <NetFx40_LegacySecurityPolicy enabled="true"/>
    <loadFromRemoteSources enabled="true"/>
</runtime> 
```

不幸的是，这不起作用：一旦我们的应用程序启动，我们就会收到一个异常，指出我们无法访问环境变量（缺少 System.Security.Permissions.EnvironmentPermission）。

我们使用 CasPol.exe，但无法弄清楚我们必须做什么才能让我们的应用程序访问环境变量。删除 Environment.GetEnvironmentVariable 调用仍然不能解决问题 - 似乎很多其他操作也不起作用。

移除 NetFx40_LegacySecurityPolicy 开关（或将其设置为 false）允许我们再次读取环境，但（当然）会阻止在网络共享上执行程序集。

这是我们完整的 App.config 文件：

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <section name="Launcher.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
        </sectionGroup>
    </configSections>
    <applicationSettings>
        <Launcher.Properties.Settings>
            <setting name="Executable" serializeAs="String">
                <value>\\office\client\client-8919\Client.exe</value>
            </setting>
        </Launcher.Properties.Settings>
    </applicationSettings>
    <startup>
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
    </startup>
    <runtime>
        <NetFx40_LegacySecurityPolicy enabled="true"/>
        <loadFromRemoteSources enabled="true"/>
    </runtime>
</configuration> 
```

编辑：

这是我们用于启动驻留在网络共享上的程序集的代码：

```
 public void ExecuteFile(string version, string[] args)
    {
        try
        {
            String appPath = GetExecutablePath();
            if (!Directory.Exists(appPath))
                throw new Exception("cache does not contain expected executable directory: " + appPath);

            String executable = appPath + "\\Client.exe";
            if (!File.Exists(executable))
                throw new Exception("cache does not contain expected executable: " + executable);

            if (Program.DEBUG_MODE)
                MessageBox.Show("App Path: " + appPath + "\r\nExecutable: " + executable);

            AppDomainSetup domainInfo = new AppDomainSetup();
            domainInfo.ApplicationBase = appPath;
            AppDomain subDomain = AppDomain.CreateDomain("Name", AppDomain.CurrentDomain.Evidence, domainInfo);

            subDomain.ExecuteAssembly(executable, subDomain.Evidence, args);
        }
        catch (Exception e)
        {
            MessageBox.Show("Fehler beim Ausführen der Version im lokalen Cache!\r\n" + e.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:57:57.420

不完全是一个“好”的答案，对不起。但是我们成功地将`null`作为证据传递给`CreateDomain`调用并使用`ExecuteAssembly`不需要`evidence`参数的重载。给定您通过的证据值，结果应该是相同的。

# c# - 如何从索引器中获取值数组？

> ID：12011195
> 
> 赞同：0
> 
> 时间：2012-08-17T18:25:19.087
> 
> 标签：c#, arrays, indexing

我正在使用一个定义了索引器的类，并希望从中获取数据并放入一个简单的数组中。有没有比遍历索引器更好的方法？

索引器：

```
public class MyIndexer
{
    public int Foo { get; }
    public int GetSize{ get; }  //size of data vector
    public float this[int idx] { get; set; }
} 
```

像这样的东西会很好：

```
float[] data = indexer.GetData(); 
```

请注意，我无法更改`MyIndexer`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:36:00.870

由于可以获得元素的数量，因此可以创建一个扩展方法：

```
public static float[] GetData(this MyIndexer indexer)
{
    return Enumerable.Range(0, indexer.GetSize).Select(i => indexer[i]).ToArray();
} 
```

您也可以只使用 for 循环：

```
public float[] GetData(this MyIndexer indexer)
{
    float[] data = new float[indexer.GetSize];
    for(int i = 0; i < data.Length; i++)
    {
        data[i] = indexer[i];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:47:39.697

不，除了循环遍历索引之外别无他法。有很多方法可以进行循环，但没有办法绕过它。

此外，仅当索引器实际上可以返回您期望的索引的值时，循环遍历索引才有效。仅仅因为类有一个索引器并不意味着它必须被实现来处理任何特定的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:08:37.303

从你那里，循环将是唯一的方法。

不过，我会对课程的开发人员感到非常恼火。.NET 中有一些由众所周知的接口支持的约定；`ICollection`, `ICollection<T>`, `IList`,`IList<T>`特别贴切。

虽然数组和`string`的使用`Length`几乎是例外，但我能想到调用`GetSize`“GetSize”（或者实际上，以“GetXXX”形式调用属性）的唯一原因是如果我知道会正在使用课程，我真的不喜欢他们。不实施`ICollection<float>`更有可能是合理的，但它仍然是有充分理由的，而不是仅仅不打扰。

由于这种性质的大多数类都会实现`ICollection<float>`，因此在大多数情况下，您可以这样做：

```
float[] arr = new float[indexer.Count];
indexer.CopyTo(arr, 0); 
```

但最奇怪的仍然是它甚至没有实现`IEnumerable<float>`. 这真的，真的很奇怪。它是 .NET 做事方式的核心部分，除非有充分的理由，否则它几乎是一个遗漏错误。如果有，那么您就可以完成`index.ToArray()`。

如果我不得不经常使用这个对象，我可能会编写一个包装类或至少一组扩展方法来填补空白。

# sql - 如何将多个视图合并到一个视图中

> ID：12011196
> 
> 赞同：1
> 
> 时间：2012-08-17T18:25:20.607
> 
> 标签：sql, join, view, insert-into

我有一个查询，它有多个选择语句来生成几组不同的结果。它基本上是一组 4 个单独的查询。不过，我*需要*做的是让这些单独的结果可以连接到第四个查询中。

据我所知，我需要将单独的查询放入单独的视图中，以便它们都存在于单个查询中，但我不确定如何执行此操作。

我正在使用 Microsoft SQL Server Management Studio 2010

查询 1 创建具有以下列的结果：

```
 AgencyID | Agency | Address | City 
```

查询 2 使用以下列创建结果：

```
 AgentID | AgencyID | Name | Address 
```

查询 3 使用以下列创建结果：

```
 InsuredID | PolicyID | Name | Company 
```

查询 4 ​​使用以下列创建结果：

```
 PolicyID | AgencyID | AgentID | InsuredID 
```

每个查询都有一整套`SELECT`、`FROM`和`WHERE`/语句`ORDER BY`。`GROUP BY`我需要将第一个三个查询（视图？）的结果加入到第四个查询基于那里的列创建的视图中。

一旦我有了能够被引用和加入的视图，我就知道如何设置连接。但是，我不知道该怎么做，就是让它们变成一种可能发生这种情况的格式。

我想将所有这些放在一个表格视图中，以便每一行都显示保单信息以及相应的代理数据、保险数据和代理数据。这是一种有效的甚至可能的方法吗？

```
INSERT INTO @Agency (AgencyID, Agency, Address, City)
SELECT
FROM
WHERE

INSERT INTO @Agent (AgentID, AgencyID, Name, Address)
SELECT
FROM
WHERE

INSERT INTO @Insured (InsuredID, PolicyID, Name, Company)
SELECT
FROM
WHERE

INSERT INTO @Policy (PolicyID, AgencyID, AgentID, InsuredID)
SELECT
FROM
WHERE

SELECT *
FROM @Policy p
JOIN @Agency ay ON ay.AgencyID = p.AgencyID
JOIN @Agent at ON at.AgentID = p.AgentID
JOIN @Insured i ON i.InsuredID = p.InsuredID 
```

有没有更好的方法来做到这一点，或者这似乎是一条可行的路线？我省略了选择、位置和其他内容的详细信息，因为它们与这个特定问题无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:30:43.533

有几种不同的方法可以做到这一点。

*   你可以按照你安排的方式来做。
*   您可以使用公用表表达式将所有四个前置查询拉入最终查询。
*   您可以将前导查询封装在内联表值函数中，然后将它们连接起来。
*   您可以将前导查询封装到视图中，然后加入它们。

根据您选择的方法，查询效率可能存在细微差异；这在一定程度上取决于您在前导查询中所做的具体操作。

# c# - 如果在 using 块中调用 return，那么幕后的操作顺序是什么？

> ID：12011198
> 
> 赞同：2
> 
> 时间：2012-08-17T18:25:23.687
> 
> 标签：c#, return, using

如果在其中调用`using`a ，是否会命中块的末尾？`return`例如，

```
using( var ur = new UnmanagedResource() )
{
  if( SomeCondition == true ){
   return SomeReturnValue;
  }
} 
```

`SomeCondition`什么时候`true`，会在调用`UnmanagedResource`之前从 using 块的末尾处理吗？`return`在这种情况下将发生的幕后操作顺序是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:27:32.460

我不知道“在调用返回之前”是什么意思。“被调用”是函数发生的事情，没有称为“返回”的函数。当该`return`语句出现在您的程序中时，它会导致发生几件事：

1.  返回值表达式被计算和存储。
2.  执行返回给调用者。

展开`using`和`finally`阻塞发生在第 1 步和第 2 步之间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:27:03.973

`finally`块在控件离开 using 块之前运行。

所以实际上这是实际编译的代码：

```
var ur = new UnmanagedResource()

try
{        
    if( SomeCondition == true ){
        return SomeReturnValue;
    }
}
finally
{
   ur.Dispose();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:27:11.007

当您离开阻止时，它将被处置。如果您不在 } 处离开街区，但在返回时它将被丢弃在那里（所以我的老师告诉我:)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T18:27:28.853

> 如果在其中调用 return，使用块的末尾是否会受到影响？

是的。

`using`被翻译成`try/finally`序列，无论有没有异常，`finally`都**保证执行（在正常情况下）。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T18:31:11.287

该对象在控制流返回到方法的调用者之前被处理。

这在 C# 语言规范第 8.9 节中有详细说明：

> 由于存在中间的 try 语句，跳转语句的执行变得复杂。在没有此类 try 语句的情况下，跳转语句无条件地将控制从跳转语句转移到其目标。在存在这样的中间 try 语句的情况下，执行更加复杂。如果跳转语句退出一个或多个带有相关 finally 块的 try 块，则控制最初转移到最里面的 try 语句的 finally 块。当控制到达 finally 块的终点时，控制将转移到下一个封闭 try 语句的 finally 块。重复此过程，直到所有介入的 try 语句的 finally 块都已执行。

...

> finally 与两个 try 语句关联的块在控制转移到跳转语句的目标之前执行。

由于 using 语句被转换为 try/finally（在 8.13 中有详细说明），这意味着`Dispose`调用保证“在返回之前”发生（而是在控制流跳转到此方法的调用者之前），因为 return 是一个“跳跃声明”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-17T18:33:57.800

您似乎正在寻找的操作顺序是：

1.  `return`声明达成。
2.  计算要返回的值并将其存储在堆栈中，以便在控件从函数中弹出时使用。
3.  控件准备离开`using`块，从而执行调用相关的块`finally`内的隐式。`using``.Dispose()`
4.  控制离开函数，调用函数访问堆栈上的值。

请注意，有时这会产生意想不到的结果。例如，假设您执行以下操作：

```
using (var db = new SomeLinqDataContext())
    return db.Somethings; 
```

在这种情况下，返回值不是实际值，而是某种指向资源的延迟执行“指针”（我确信有我不熟悉的官方术语）。但是该资源是在执行发生之前被处置的。（它在`return`到达之后但在调用函数评估返回的结果之前被释放。）因此，您最终会在尝试访问已释放的资源时出错。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-17T18:35:39.013

[来自 Brendan Enrick 的博客：-](http://aspadvice.com/blogs/name/archive/2008/05/22/Return-Within-a-C_2300_-Using-Statement.aspx)

> 在今天早些时候编写一些代码时，我需要从 using 语句中返回。做这些事情总是让我欣赏 using 语句以及它的美妙之处，所以我决定在这里写下它。许多人都知道，C# 中的 using 语句是管理将访问非托管资源的类型的好工具。其中一些示例是 SqlConnections、FileReaders 和许多其他类似类型。这些的关键是它们都实现了 IDisposable 接口。这意味着它们都需要在使用后仔细清理。
> 
> using 语句很棒，因为它保证无论执行如何完成，声明的对象都会被释放。无论你到达标记 using 语句结束的大括号、抛出和异常，还是从函数返回，using 语句都会调用 dispose 方法并清理对象。
> 
> 这在我的代码中很重要，因为我能够直接从 using 语句中返回，而不必担心 eh dispose 方法是否会触发。每当我使用访问非托管资源的对象时，我总是总是将它放在 using 语句中。
> 
> 使用 using 语句非常重要，因为它可以保证对象将被正确处理。对象的范围将是 using 语句的范围，并且在对象的范围内，如果在 using 语句中定义，它将是只读的。这也很好，因为它会阻止这个管理非托管对象的重要对象被修改或重新分配。
> 
> 这样做是安全的，因为 using 语句非常棒。无论我们点击哪个返回，我们都知道 XmlReader 将被正确处理。

```
using (XmlReader reader = XmlReader.Create(xmlPath))
{
    // ... Do some work...
    if (someCase)
        return 0;
    // ... Do some work...
    if (someOtherCase)
        return 1;
}
return -1; 
```

[他的另一个博客展示了一个活生生的例子](http://brendan.enrick.com/post/Returning-From-Inside-a-Using-Statement.aspx)

# events - FileSystemWatcher 在集成测试中没有引发事件？

> ID：12011201
> 
> 赞同：1
> 
> 时间：2012-08-17T18:25:46.927
> 
> 标签：events, integration-testing, mstest, filesystemwatcher

我正在尝试对我的班级进行集成测试，以确保引发我希望引发的事件：

```
 'integration test not unit test
<TestMethod()>
Public Sub Change_Network_File_Causes_Event_To_Be_Raised()
    Dim EventCalled As Boolean
    Dim deployChk = New TRSDeploymentCheck("foo")
    deployChk._localFile = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "TestFiles\SameLocalGUIDFile.txt")
    AddHandler deployChk.DeploymentNeeded, Sub() EventCalled = True
    deployChk.NetworkFileLocation = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "TestFiles\SameNetGUIDFile.txt")
    ChangeNetworkFile(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "TestFiles\SameNetGUIDFile.txt"))
    Assert.IsTrue(EventCalled)

End Sub 
```

这是我在课堂上设置 FileSystemWatcher 对象的方法：

```
 Friend Property NetworkFileLocation As String
    Set(value As String)
        _netFileLoc = value
        If File.Exists(value) Then
            _watcher = New FileSystemWatcher(value.Replace(Path.GetFileName(value), String.Empty))
            _watcher.EnableRaisingEvents = True
            AddHandler _watcher.Changed, AddressOf OnNetworkFileChanged
        End If
    End Set
    Get
        Return _netFileLoc
    End Get
End Property  

Private Sub OnNetworkFileChanged(source As Object, e As FileSystemEventArgs)
    If IsDeploymentNeeded() Then RaiseEvent DeploymentNeeded()
End Sub 
```

*我在OneNetworkFileChange*子中放置了一个断点。断点永远不会被击中。我已经验证了文件实际上在*ChangeNetworkFile*中被更改了我什至复制了代码（除了硬编码路径）并将其复制到我在单元测试期间运行的 Windows 应用程序中。它在我的 Windows 应用程序中工作。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:42:48.840

经过一番测试终于弄明白了。好吧，上面的 EventCalled 从来都不是真的原因是因为测试的“windows 消息泵”被阻止了。该事件将被触发，但仅在测试完成后（当然这很晚）。那么如何解决呢？它有点乱，我不喜欢它，但我引用了 System.Windows.Forms.dll 并调用了`Application.DoEvents()`

```
 'integration test not unit test
<TestMethod()>
Public Sub Change_Network_File_Causes_Event_To_Be_Raised()
    Dim EventCalled As Boolean
    Dim deployChk = New TRSDeploymentCheck("foo")
    deployChk._localFile = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "TestFiles\SameLocalGUIDFile.txt")
    AddHandler deployChk.DeploymentNeeded, Sub() EventCalled = True
    deployChk.NetworkFileLocation = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "TestFiles\SameNetGUIDFile.txt")
    ChangeNetworkFile(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "TestFiles\SameNetGUIDFile.txt"))
    Application.DoEvents()
    Assert.IsTrue(EventCalled)

End Sub 
```

直到有人告诉我更好的方法，这似乎是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:25:16.077

可能它的过滤器（string.Empty）显然只查看没有扩展名的文件（这是一个假设）。

尝试`"*.*"`或类似的东西：

```
_watcher = New FileSystemWatcher(value.Replace(Path.GetFileName(value), string.Concat("*.", Path.GetExtension(value)))) 
```

# struts2 - 重置 Struts2 令牌？

> ID：12011202
> 
> 赞同：0
> 
> 时间：2012-08-17T18:25:53.567
> 
> 标签：struts2, token, interceptor

我有一个令牌拦截器来阻止双重提交一个效果很好的表单，但我希望在某些情况下重置令牌。

基本上我在页面中得到的是一个标准列表和一个提交按钮。当用户单击提交按钮时，标准将作为新行存储在数据库的特定表中。ajax 调用使用成功或失败消息更新表单下方的 div。该令牌的工作原理是我不希望用户尝试添加重复的行。但是，如果您的用户更改了条件（通过在下拉菜单中选择不同的选项或编辑 s:textfield 中的文本），我希望它重置令牌以允许再次提交表单。目前，用户必须返回并填写新表格，这有点不方便。

我在 .jsp 中使用标准 s:token，在 struts.xml 中使用拦截器行。我一直在寻找一些东西来重置令牌，但我没有找到任何东西。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:14:11.353

令牌是会话中的一个值，`"struts.token"`其形式为`"struts.token.name"`。

由于您在下面发出 Ajax 请求，最简单的方法可能是将会话令牌设置为表单中已有的任何内容，或者创建您自己的令牌拦截器（它很短，尽管它使用静态 TokenHelper 类，这是不幸的–注意并记录为要做的事情）更改“多次”提交的定义。（形式 vals 的哈希？不确定，从来没有考虑过这么多。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:35:23.667

我在谷歌上找不到任何答案，我似乎没有在这里得到任何答案，所以我所做的是创建一个名为“清除表单”的新按钮，它调用一些 javascript 来刷新页面，因此重置令牌和形式。不是最优雅的，但它有效。

# objective-c - 如何将包括毫秒和时区信息在内的日期时间转换为 NSDate

> ID：12011205
> 
> 赞同：1
> 
> 时间：2012-08-17T18:25:59.447
> 
> 标签：objective-c, datetime-format

我正在尝试将字符串转换为 NSDate，但格式始终为**nil**

我要转换的日期是：

```
2012-08-16T16:20:52.619000+00:00 
```

我正在尝试的日期格式是：

```
@"yyyy-MM-dd'T'HH:mm:ss.SSSSSSZZZZ" 
```

如果我将日期更改为：

```
@"2012-08-16T16:20:52.619000+0000" // removing the : from +00:00 
```

这是一种享受，但我会

（我也试过

```
@"yyyy-MM-dd'T'HH:mm:ss.SSSSSSZZ:ZZ" 
@"yyyy-MM-dd'T'HH:mm:ss.SSSSSSZZ':'ZZ" 
```

但这也不起作用）。

甚至可以在不进行字符串操作并删除最后的“：”的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:37:14.443

我对此进行了最终搜索，发现您必须使用

```
getObjectValue 
```

而不是

```
dateFromString 
```

万一其他人遇到这个问题，我发布了将此类字符串转换为 NSDate 的方法

```
+ (NSDate *)dateFromString:(NSString *)dateString {
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSSSSSZ"];

    NSDate *theDate = nil;
    NSError *error = nil;
    [dateFormat getObjectValue:&theDate forString:dateString range:nil error:&error];
    [dateFormat release];
    return theDate;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:46:30.083

看起来您正在使用 ISO 8601 格式的日期。如果您从 Web 服务获取这些，则格式会根据格式而变化。看一下这个：

[http://boredzo.org/iso8601parser/](http://boredzo.org/iso8601parser/)

这将根据格式转换日期，即使格式略有变化。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T18:39:37.293

像这样的东西怎么样

```
[formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"]; 
```

Z 必须用单引号括起来。

# core-data - [NSFetchedResultsController 部分] 到底是什么？

> ID：12011207
> 
> 赞同：0
> 
> 时间：2012-08-17T18:26:26.047
> 
> 标签：core-data

我真的很困惑。

我看到使用 [[NSFetchedResultsController section] count] 的情况。然后就是这些情况，[[self.fetchedResultsController fetchedObjects] count]。

现在我明白后者在做什么了。这对我来说很有意义。但我不明白关于这些部分的第一个。

该文档没有定义部分。它实际上通过使用术语“部分”及其定义来定义它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:56:56.507

如果您`sectionNameKeyPath:`在`initWithFetchRequest:...`调用中设置 a ，则获取的结果控制器会将结果分组为部分，对应于表视图的部分。

`[[NSFetchedResultsController sections] count]`部分的数量也是如此`[[self.fetchedResultsController fetchedObjects] count]`，所有获取的对象的总数也是如此。

# c# - 从内存中的文件在新选项卡或窗口中查看 pdf 文件...MVC3

> ID：12011210
> 
> 赞同：0
> 
> 时间：2012-08-17T18:26:36.217
> 
> 标签：c#, asp.net-mvc-3

我有一个 MVC3 应用程序，它允许用户将文件下载到他们的硬盘驱动器或在浏览器中查看它。该文件存储在 Internet 无法访问的文件服务器上。所以文件的字节数组存储在内存中，然后像这样发送到浏览器：

```
 /// <summary>
    /// overrides actionresult method so document can be viewed in browser window
    /// </summary>
    /// <param name="context"></param>
    public override void ExecuteResult(ControllerContext context)
    {
        // get current context and set values
        var response = context.HttpContext.Response;
        response.Clear();
        response.BufferOutput = false;   // to prevent buffering 
        response.Cache.SetCacheability(HttpCacheability.NoCache);
        response.ContentType = ContentType;
        response.AddHeader("Content-Length", Length.ToString());

        var ext = Path.GetExtension(FileName);

        if (!Show)
        response.AddHeader("content-disposition", "attachment; filename=\"" + FileName+ "\"");

        response.ContentEncoding = System.Text.Encoding.UTF8;

        var stream = new MemoryStream(ContentBytes);
        stream.WriteTo(response.OutputStream);
        stream.Dispose();

    } 
```

由于某种原因，我无法查看 pdf。我可以下载它们但不能查看它们。我在这里附加了一个示例项目[showinbrowser.zip](http://troy-compton.com/files/showinbrowser.zip)。它的VS2010 sp1。有人可以告诉我如何在存储在内存中的新浏览器窗口/选项卡中显示 PDF 文件吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:35:45.653

为什么不使用`Controller.File`为您处理此问题的方法？

```
public ActionResult _ShowDocument(string id)
{
  byte[] fileData=GetByteArrayFilefromId(id);
  return File(fileData,"application/pdf","somefile.pdf");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:33:02.997

嗨，将您的内容类型设置为 pdf

```
//Set the appropriate ContentType.
     Response.ContentType = "Application/pdf"; 
```

# python - 附加 Django HTTP 代理 URL

> ID：12011211
> 
> 赞同：1
> 
> 时间：2012-08-17T18:26:40.493
> 
> 标签：python, django, proxy, url-pattern

我正在使用这个 django 应用程序：http: [//httpproxy.yvandermeer.net/](http://httpproxy.yvandermeer.net/)

我正在使用它向外部 api 发出请求，并且工作正常，但是我想修改 URL 模式，但没有取得太大成功。

在 urls.py 我有：

```
urlpatterns = patterns('',
    (r'^api/(?P<url>.*)$', 'httpproxy.views.proxy'),
) 
```

我正在发出这样的 AJAX 请求：

```
$.ajax({
type: "GET",
url: "http://siteaddress.com/api/search/?query1={{ model.field1 }}&key=123456789",
.... 
```

如您所见，我的 API 密钥通过我的 ajax 调用在前端公开显示。我想将它附加到 urls.py 中的 url 模式，但它不起作用。

我试过了：

```
(r'^api/(?P<url>.*)$&key=123456789', 'httpproxy.views.proxy'),
(r'^api/(?P<url>.*)&key=123456789$', 'httpproxy.views.proxy'),
(r'^api/(?P<url>.*.&key=123456789)$', 'httpproxy.views.proxy'),
(r'^api/(?P<url>.*)$.&key=123456789', 'httpproxy.views.proxy'), 
```

但这些似乎都不起作用。我可以将密钥附加到此 url 模式的末尾还是不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:11:00.347

来自 Django 文档：

> URLconf 搜索请求的 URL，作为一个普通的 Python 字符串。这不包括 GET 或 POST 参数或域名。

您不能将 GET 参数放在 url 正则表达式中。

# android - 解析 Xml 时出现 Android 错误 - android.os.NetworkOnMainThreadException

> ID：12011214
> 
> 赞同：0
> 
> 时间：2012-08-17T18:26:52.147
> 
> 标签：android, android-xml, android-internet

我收到以下错误......

```
08-18 00:02:19.230: D/CLIPBOARD(17993): Hide Clipboard dialog at Starting input: finished by someone else... !
08-18 00:02:21.515: E/Connectivity(17993): true
08-18 00:02:21.535: D/AndroidRuntime(17993): Shutting down VM
08-18 00:02:21.535: W/dalvikvm(17993): threadid=1: thread exiting with uncaught exception (group=0x40c3c1f8)
08-18 00:02:21.545: E/AndroidRuntime(17993): FATAL EXCEPTION: main
08-18 00:02:21.545: E/AndroidRuntime(17993): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.yipl.rssfeed/org.yipl.rssfeed.News}: android.os.NetworkOnMainThreadException
08-18 00:02:21.545: E/AndroidRuntime(17993):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at android.os.Looper.loop(Looper.java:137)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at android.app.ActivityThread.main(ActivityThread.java:4507)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at java.lang.reflect.Method.invokeNative(Native Method)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at java.lang.reflect.Method.invoke(Method.java:511)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at dalvik.system.NativeStart.main(Native Method)
08-18 00:02:21.545: E/AndroidRuntime(17993): Caused by: android.os.NetworkOnMainThreadException
08-18 00:02:21.545: E/AndroidRuntime(17993):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at org.yipl.rssfeed.XMLParser.getXmlFromUrl(XMLParser.java:46)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at org.yipl.rssfeed.News.onCreate(News.java:50)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at android.app.Activity.performCreate(Activity.java:4465)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
08-18 00:02:21.545: E/AndroidRuntime(17993):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
08-18 00:02:21.545: E/AndroidRuntime(17993):    ... 11 more 
```

我尝试使用 logcat 跟踪错误并在以下代码中发现错误：

```
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);//I Found  error here in this line...

        HttpEntity httpEntity = httpResponse.getEntity();

        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    Log.e("ErrorPositionTestiong", xml);
    return xml;
} 
```

我的这个程序是 XML 解析功能的一部分。我不明白那个错误是什么意思。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:28:02.723

这是一个严格模式违规。简而言之，您不应该在主线程上执行任何网络或数据库操作。使用 AsyncTask 获取 XML。

# java - 将 Swing GUI 组件的属性绑定到自定义类方法（属性）

> ID：12011217
> 
> 赞同：1
> 
> 时间：2012-08-17T18:27:13.780
> 
> 标签：java, swing, netbeans, binding, propertychangelistener

我正在做我的聊天项目。我已经编写了无需 GUI 即可工作的服务器和客户端，只需控制台 UI。现在，在处理客户端 GUI 时（使用 Netbeans 提供的工具，而不是我自己编写的代码），我一直遇到绑定问题。

在`ClientGui`课堂内我有`Client`对象。在我的 GUI 中，我想禁用输入文本字段，直到客户端未连接到聊天服务器。我试图绑定（通过Netbeans GUI）我的输入文本字段的属性启用到该客户端对象的方法`isConnected()`（返回`boolean`）。`isConnected`不仅仅是返回某个变量的值，它是组合的布尔表达式。因此，当用户单击连接时，它会成功，但输入文本字段不会将其状态更改为启用。

所以当我得到它时，我必须与事件和侦听器一起工作并在我的`Client`课堂上通知？但是绑定的意义何在，因为我可以在我的`Client`和我的输入字段上触发事件来监听客户端连接的事件？

所以我提供了我的代码块。

**该类`Client`：（**您可能会看到一些带有动作侦听器和事件的行，我没有删除它们，只是进行了实验）

```
public class Client {
    private ClientListener listener;
    private ClientSender sender;
    private Socket connection;

    private boolean finnish = false;
    private PropertyChangeEvent connected;

    public Client(String hostname, int port) throws UnknownHostException, IOException {
        connection = new Socket(hostname, port);
    }

    public void start() {
        try {
            connected = new PropertyChangeEvent(this, "connected", null, connection);

            sender = new ClientSender(new ObjectOutputStream(connection.getOutputStream()));
            Thread senderThread = new Thread(sender);
            senderThread.start();
            Logger.getLogger(Client.class.getName()).log(Level.INFO, "Sender thread has started");

            listener = new ClientListener(new ObjectInputStream(connection.getInputStream()));
            Thread listenerThread = new Thread(listener);
            listenerThread.start();
            Logger.getLogger(Client.class.getName()).log(Level.INFO, "Listener thread has started");

        } catch (IOException ex) {
            Logger.getLogger(Client.class.getName()).log(Level.SEVERE, "IO problems", ex);
        }
    }

    public ClientSender getSender() {
        return sender;
    }

    public void stop() {
        sender.stop();
        listener.stop();
    }

    public boolean isConnected() {
        return connection != null && !connection.isClosed();
    }
} 
```

**图形用户界面类`Client`：**

```
public class ClientGui extends javax.swing.JFrame {
    private Client client;

    public boolean getConnected() {
        System.out.println( client != null && client.isConnected());
        return client != null && client.isConnected();
    }

    /**
    * Creates new form ClientGui
    */
    public ClientGui() {
        initComponents();
    }

    // GENERATED CODE

private void tfUserInputKeyPressed(java.awt.event.KeyEvent evt) {
    if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
        Message message = new Message("user", tfUserInput.getText());
        client.getSender().add(message);

        tfUserInput.setText("");
    }
}

private void btnConnectActionPerformed(java.awt.event.ActionEvent evt) {
    try {
        client = new Client(tfHostname.getText(), Integer.parseInt(tfPort.getText()));
        client.start();

    } catch (UnknownHostException ex) {
        Logger.getLogger(ClientGui.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex) {
        Logger.getLogger(ClientGui.class.getName()).log(Level.SEVERE, null, ex);
    }

}

// and somewhere GUI generated code of my binding (also tried with custom code, but no success)
 org.jdesktop.beansbinding.Binding binding =
 org.jdesktop.beansbinding.Bindings.createAutoBinding 
(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ, this,  
 org.jdesktop.beansbinding.ELProperty.create("${connected}"), listConversation,  
 org.jdesktop.beansbinding.BeanProperty.create("enabled"), "listConversationBinding");

 bindingGroup.addBinding(binding); 
```

事实上，它是一个`JList`，但没关系，因为我想要对少数组件进行这样的绑定。在这里，我尝试在 GUI 表单中使用假方法，该方法调用连接的客户端（这样做是因为不知道如何添加`Client`为组件）。

我在论坛上读过，到处都在谈论豆类等等。我希望我的`Client`班级尽可能少地使用 GUI、接口实现和触发事件调用等所需的代码。

**更新**

很好！谢谢你。为什么我不能绑定，所以我不必使用`setEnabled(value)`方法（使启用的属性跟踪布尔表达式“property”（`connection != null && !connection.isClosed()`）。另外，由于这个技巧我必须做`setConnected(value)`，即使这在运行时解决取决于在连接上，我什至不知道旧值（当然，我可以做私人 void`setConnected(booleanvalue)`并根据这些地方发生的情况用真或假来调用它。似乎我使用属性的想法是错误的，最好这样做与动作或事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:45:26.573

您应该添加`PropertyChangeSupport`到`Client`.

```
 final PropertyChangeSupport pcs = new PropertyChangeSupport(this);

    public void addPropertyChangeListener(PropertyChangeListener listener) {
             this.pcs.addPropertyChangeListener(listener);
    }

      boolean connected;

 public boolean isConnected() {
     return connected;
 }

 public void setConnected(boolean connected) {
     boolean oldValue = this.connected;
     this.value = connected;
     this.pcs.firePropertyChange("connected", oldValue, newValue);
 }

 .....

     public Client(String hostname, int port) throws UnknownHostException, IOException    {
    connection = new Socket(hostname, port);
    setConnected(connection != null && !connection.isClosed());
} 
```

在图形用户界面中

```
 public class ClientGui extends javax.swing.JFrame implements PropertyChangeListener
    .....
    propertyChanged(..){
      tfUserInput.setEnabled(true);
    }

     private void btnConnectActionPerformed(java.awt.event.ActionEvent evt) {
        try {
            client = new Client(tfHostname.getText(), Integer.parseInt(tfPort.getText()));
            client.addPropertyChangeListener(this);
            client.start();
        ..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-01T02:34:45.123

Melasse 框架减轻了在模型/视图（ui 组件）之间进行这种绑定的痛苦，在大多数情况下，甚至无需编写额外的匿名类： [https ://github.com/cchantep/melasse](https://github.com/cchantep/melasse)

# android - 如果接受免责声明但不是在此之前启动广播

> ID：12011218
> 
> 赞同：0
> 
> 时间：2012-08-17T18:27:23.763
> 
> 标签：android, broadcastreceiver

我有一个应用程序，它将使用一个广播接收器，它会在手机打开时启动。

但是，当用户第一次安装并运行应用程序时，我希望他们必须接受免责声明，然后广播才能执行其设计的任务。

谁能指出我正确的方向？

斯蒂芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:49:49.257

您可以为此使用[SharedPreferences 。](http://developer.android.com/reference/android/content/SharedPreferences.html)

每次收到 BOOT_COMPLETED 时，您都可以检查此首选项。只有当它是真的然后继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:46:15.257

你在用sql吗？如果是这样，您可以有一个用户偏好表并有一个“disclaimeraccepted”字段并将值设置为 0..当您的广播接收器收到消息时检查 sql 表

# assembly - 从 meta-pc 程序集获取函数参数类型和返回类型

> ID：12011223
> 
> 赞同：0
> 
> 时间：2012-08-17T18:27:33.207
> 
> 标签：assembly, types, parameters, x86

我是 meta-pc 汇编程序的新手，我需要帮助来反转某些功能。这是我需要保留的功能：

```
 public function

var_80      = byte ptr -80h
arg_0      = dword   ptr  8
arg_4      = dword   ptr  0Ch

    push   ebp
    mov   ebp, esp
    and   esp, 0FFFFFFF8h
    sub   esp, 80h
    mov   eax, [ebp+arg_4]
    cmp   eax, 80h
    push   esi
    push   edi
    jl   short loc_100032DD
    mov   eax, 7Fh

loc_100032DD:            ; CODE XREF: c4atoi+16j
    mov   esi, [ebp+arg_0]
    mov   ecx, eax
    mov   edx, ecx
    shr   ecx, 2
    lea   edi, [esp+88h+var_80]
    rep movsd
    mov   ecx, edx
    and   ecx, 3
    rep movsb
    mov   [esp+eax+88h+var_80], 0
    lea   eax, [esp+88h+var_80]
    push   eax      ; char *
    call   j__atol
    add   esp, 4
    pop   edi
    pop   esi
    mov   esp, ebp
    pop   ebp
    retn   8
function      endp 
```

所以，我需要获取函数参数的数量和类型以及返回的类型。我怎么能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:49:01.220

`j__atol`该函数是基于对函数调用和函数的引用将字符串转换为整数的代码`atol`。功能详情：

调用约定：
`stdcall`

第一个参数 ( `arg_0`)：
空终止字符串的地址。

第二个参数（`arg_4`）：
指定字符串的长度。仅处理前 127 个字符。

返回值：
EAX 寄存器。

# meteor - 如何从 Meteor 集合中创建反应数组？

> ID：12011224
> 
> 赞同：9
> 
> 时间：2012-08-17T18:27:35.827
> 
> 标签：meteor

我想将集合中的项目名称列表作为一个简单的数组用于自动完成用户输入和检查重复项等操作。我希望此列表具有反应性，以便数据的更改将反映在数组中。我根据 Meteor 文档尝试了以下方法：

```
 setReactiveArray = (objName, Collection, field) ->
        update = ->
          context = new Meteor.deps.Context()
          context.on_invalidate update
          context.run -> 
            list = Collection.find({},{field: 1}).fetch()
            myapp[objName] = _(list).pluck field
        update()

    Meteor.startup ->
        if not app.items?
            setReactiveArray('items', Items, 'name')

    #set autocomplete using the array
    Template.myForm.set_typeahead =  ->
       Meteor.defer ->
        $('[name="item"]').typeahead {source: app.items} 
```

此代码似乎有效，但它会缩短我的应用程序的加载时间（在 dev/localhost 上加载需要 5-10 秒，而没有此代码则需要约 1 秒）。难道我做错了什么？有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T08:18:30.403

您应该能够使用`Items.find({},{name: 1}).fetch()`，它将返回一个项目数组并且是反应式的，因此只要在反应式上下文中调用它，只要查询结果发生变化，它就会重新运行其封闭函数。

对于`Template.myForm.set_typeahead`助手，您可能希望在助手本身内部调用该查询，将结果存储在局部变量中，然后`Meteor.defer`使用引用该变量的函数进行调用。否则，我不确定查询在被调用时是否位于反应式上下文中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T20:16:31.867

**编辑**：我已经更新了下面的代码，因为它很脆弱，并且把它放在上下文中以便更容易测试。我还添加了一个警告——在大多数情况下，您会想要使用@zorlak 或@englandpost 的方法（见下文）。

* * *

首先，感谢@zorlak 挖掘了我没有人回答的老问题。[此后，我通过从@David Wihl 收集](https://stackoverflow.com/a/13635726/406226)的一些见解解决了这个问题，并将发布我自己的解决方案。我会推迟选择正确的答案，直到其他人有机会参与进来。

@zorlak 的答案解决了单个字段的自动完成问题，但正如问题中所述，我正在寻找**一个可以反应性更新的数组**，而自动完成只是它的用途的一个例子。拥有这个数组的优点是它可以在任何地方使用（不仅仅是在模板助手中），并且它可以在代码中多次使用而无需重新执行查询（并且将`_.pluck()`查询减少到一个数组） . 就我而言，这个数组最终出现在多个自动完成字段以及验证和其他地方。我提出的优势可能在大多数 Meteor 应用程序中并不显着（请留下评论），但这对我来说似乎是一个优势。

要使数组具有反应性，只需在`Meteor.autorun()`回调中构建它 - 它会在目标集合更改时重新执行（但只有这样，避免重复查询）。这是我一直在寻找的关键见解。此外，与我在问题中使用`Template.rendered()`的模板帮助程序相比，使用回调更简洁，更少黑客攻击。`set_typeahead`下面的代码使用[underscore.js`_.pluck()`](http://underscorejs.org/#pluck)从集合中提取数组，并使用[Twitter 引导程序`$.typeahead()`](http://twitter.github.com/bootstrap/javascript.html#typeahead)创建自动完成。

*更新代码*：我已经编辑了代码，因此您可以使用 stock `meteor create`d 测试环境进行尝试。您的 html 将需要`<input id="typeahead" />`在“hello”模板中添加一行。`@Items`有在控制台上作为全局可用的`@`标志（ [Meteor 0.6.0 添加了文件级变量范围](http://www.meteor.com/blog/2013/04/04/meteor-060-brand-new-distribution-system-app-packages-npm-integration)）。这样您就可以在控制台中输入新项目，例如，但这并不是代码工作所必需的。独立使用的另一个必要更改是 typeahead 函数现在将源设置为函数 ( )，以便在激活时查询而不是在渲染时设置，这允许它利用对.`Items``Items.insert({name: "joe"})``@``->``items``items`

```
@Items = new Meteor.Collection("items")
items = {}

if Meteor.isClient
  Meteor.startup ->
    Meteor.autorun ->
      items = _(Items.find().fetch()).pluck "name"
      console.log items  #first result will be empty - see caution below

  Template.hello.rendered = ->
    $('#typeahead').typeahead {source: -> _(Items.find().fetch()).pluck "name"} 
```

**警告！我们创建的数组*本身*并不是一个反应式数据源。**`source:`需要将 typeahead 设置为返回的*函数* 的原因是，当 Meteor 首次启动时，代码在 Minimongo 从服务器获取数据之前运行，并且设置为空数组。Minimongo 然后接收它的数据，并更新如果你在控制台打开的情况下运行上面的代码，你可以看到这个过程：如果你有任何数据存储，将记录两次。 `->``items``items``items``console.log items`

`Template.x.rendered()`调用不会设置反应性上下文，因此不会由于反应性元素的变化而重新触发（要检查这一点，请在调试器中暂停您的代码并检查`Deps.currentComputation`- 如果是`null`，则您不在反应性上下文中并更改到反应元素将被忽略）。但是您可能会惊讶地发现您的模板和帮助程序也不会对更改做出反应——用于迭代`items`的模板将呈现为空并且永远不会重新呈现。你可以让它充当一个反应源（最简单的方法是用 存储结果，或者[你可以自己做](http://www.eventedmind.com/posts/meteor-build-a-reactive-data-source)`#each``items``Session.set()`)，但除非您正在执行一个非常昂贵的计算并且应该尽可能少地运行，否则您最好使用@zorlak 或@englandpost 的方法。让您的应用程序重复查询数据库似乎很昂贵，但 Minimongo 将数据缓存在本地，避开网络，因此速度会非常快。因此，在大多数情况下，最好只使用

```
 Template.hello.rendered = ->
    $('#typeahead').typeahead {source: -> _(Items.find().fetch()).pluck "name"} 
```

除非你发现你的应用程序真的陷入了困境。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T22:30:26.523

[这](http://takidashi.com/ajax-like-autocomplete-for-meteor-bootstrap.html)是我的 bootstrap typeahead 快速解决方案

在客户端：

```
Template.items.rendered = ->
  $("input#item").typeahead
    source: (query, process) ->
      subscription = Meteor.subscribe "autocompleteItems", query, ->
        process _(Items.find().fetch()).pluck("name")
      subscription.stop() # here may be a bit different logic,
      # such as keeping all opened subsriptions until autocomplete
      # will be successfully completed and so on
      items: 5 
```

在服务器端：

```
Meteor.publish "autocompleteItems", (query) ->
  Items.find
    name: new RegExp(query, "i"),
      fields: { name: 1 },
      limit: 5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-22T22:10:11.923

实际上，我最终以完全不同的方式处理自动完成问题，使用客户端代码而不是查询服务器。我认为这是优越的，因为 Meteor 的数据模型允许使用自定义渲染列表进行快速多规则搜索。

> [https://github.com/mizzao/meteor-autocomplete](https://github.com/mizzao/meteor-autocomplete)

使用 自动完成用户`@`，其中在线用户显示为绿色：

![在此处输入图像描述](../Images/d10f3cf6c30a271ddb6dc725cb9d193b.png)

在同一行中，使用元数据和引导图标自动完成其他内容：

![在此处输入图像描述](../Images/3e43d2b25fca9b11a1a92407916b2ee5.png)

请分叉、拉动和改进！

# c# - 如何从字符串中提取子字符串？

> ID：12011226
> 
> 赞同：1
> 
> 时间：2012-08-17T18:27:46.010
> 
> 标签：c#, string

我有一个包含数字和加号的表达式：

```
string expression = 235+356+345+24+5+2+4355+456+365+356.....+34+5542;
List<string>  numbersList = new List<string>(); 
```

我应该如何从该表达式中提取每个数字子字符串（235、356、345、24 ....）并将它们收集到字符串列表中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:30:00.970

你可以做类似的事情

```
List<string> parts = expression.Split('+').ToList(); 
```

[http://msdn.microsoft.com/en-us/library/system.string.split.aspx](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

如果 + 号周围有任何可能的空白，你可以做一些更花哨的东西：

```
List<string> parts = (from t in expression.Split('+') select t.Trim()).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T18:31:52.067

就像是：

```
string expression = "235+356+345+24+5+2+4355+456+365+356";
List<string> list = new List<string>(expression.Split('+')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:32:24.443

试试这段代码

```
string expression = "235+356+345+24+5+2+4355+456+365+356";
string[] numbers = expression.Split('+');
List<string> numbersList = numbers.ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T19:36:59.743

或者这个，对数字序列的肯定检查：

```
private static Regex rxNumber = new Regex( "\d+" ) ;
public IEnumerable<string> ParseIntegersFromString( string s )
{
    Match m = rxNumber.Match(s) ;
    for ( m = rxNumber.Match(s) ; m.Success ) ; m = m.NextMatch() )
    {
        yield return m.Value ;
    }
} 
```

# ios - 如何在加载时为 UITableView 中的行设置动画？

> ID：12011229
> 
> 赞同：1
> 
> 时间：2012-08-17T18:27:59.027
> 
> 标签：ios, animation, uitableview, uiviewanimation

我想将 UITableViewRowAnimation 与 :reloadData 一起使用。

在我使用该示例进行表加载之前（我在一些 ios 开发指南中发现）：

```
for (NSDictionary *entry in [dl reverseObjectEnumerator]) {
        int insertIdx = 0;

        [_allEntries insertObject:entry atIndex:insertIdx];
        [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:insertIdx inSection:0]]
                              withRowAnimation:UITableViewRowAnimationRight];

    } 
```

但是这种方式在大数据上似乎真的很慢，那么如何快速加载带有动画的表格视图呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:31:12.833

你应该看看`beginUpdates`and `endUpdates`。在这两个命令中，您可以更新/删除/插入行并为您设置动画。它也比使用`reloadData`.

有关此主题的更多信息：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

快速摘录：

> *   (void)beginUpdates
> 
> 如果您希望后续的插入、删除和选择操作（例如，cellForRowAtIndexPath: 和 indexPathsForVisibleRows）同时进行动画处理，请调用此方法。这组方法必须以调用 endUpdates 结束。这些方法对可以嵌套。如果您不在此块内进行插入、删除和选择调用，则行数等表属性可能会变得无效。你不应该在组内调用 reloadData；如果您在组内调用此方法，您将需要自己执行任何动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:15:47.520

Wasabii 是对的，但在您的情况下，您可以在数组中累积所有索引，然后使用一个插入命令更新表：

```
NSMutableArray *indexes = [NSMutableArray arrayWithCapacity:5];

for (NSDictionary *entry in [dl reverseObjectEnumerator])
{
    int insertIdx = 0;

    [_allEntries insertObject:entry atIndex:insertIdx];
    [indexes addObject:[NSIndexPath indexPathForRow:insertIdx inSection:0]];
}

// insert rows into table
[self.tableView insertRowsAtIndexPaths:indexes withRowAnimation:UITableViewRowAnimationRight]; 
```

# r - 在 R 中查看和几何变换

> ID：12011230
> 
> 赞同：1
> 
> 时间：2012-08-17T18:28:02.330
> 
> 标签：r

我是一名尝试使用 R 图形的 GKS 时代的图形程序员。我有两个与 R 中的转换有关的问题：

1.  我想知道是否有在 R 中构建查看管道的等价物，可以将世界坐标 [wc] 中的窗口映射到设备坐标 [dc] 中的视口。例如，我可以指定一个转换 t，它将 (wcxmin, wcxmax, wcymin, wcymax) 的窗口映射到 (vpxmin, vpxmax, vpymin, vpymax) 其中 wc 是 (1000, -50, 40, 90) 并且 vp 是 (0 , 800, 0, 600)。目标是所有图形计算都在 wc 中完成，但图形引擎在 dc 中呈现它。在这种情况下，它将适当地缩放坐标，并将 x 轴翻转为 wcxmin > wcxmax。

2.  是否存在等效的图形段，然后可以通过变换矩阵进行变换 [sclae、shift、rotate 和可能的剪切]。

我确信我在 R 图形中遗漏了一些非常基本的东西。我可以在 SVG 中成功构建这样的转换，没有任何问题。我一直在研究 grid、lattice、ggplot2 等软件包，但没有取得太大进展。

谢谢。

这是我正在尝试做的一些示例代码：

```
distn<-rnorm(100)
distw<-rweibull(100, shape=2)
dret<-stack(list(norm=distn, weib=distw))
n<-0
for (idx in levels(dret$ind)) {
        pct<-dret[dret$ind == idx,c('values')]
        # scale and shift the data
        pct<-(pct-min(pct))/(max(pct) - min(pct))
        if (n == 0) {
                # top left
                par(fig=c(0,0.5,0.5,1))
                limx<-c(0,1)
        } else  {
                # bottom right
                par(fig=c(0.5,1,0,0.5), new=TRUE)
                limx<-c(1,0)
        }
        fp<-density(pct)
        sfx<-fp$x
        sfy<-(fp$y-min(fp$y))/(max(fp$y)-min(fp$y))
        sortpct<-sort(pct)
        ecdfpct<-(1:length(sortpct))/length(sortpct)
        plot(sortpct, ecdfpct, xlim=limx, type="l", col="green")
        lines(sfx, sfy, xlim=limx, type="l", col="red")
        n<-n+1
} 
```

我想将右下象限的图形旋转-90度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:36:14.023

'grid' 包一直都是这样做的。视口在 X 和 Y 方向（有时是 Z）和函数上都表示为 [0, 1]，`convertX`并被`convertY`调用以从用户坐标移动到网格坐标。输入`help(grid)`设施的完整列表。使用线框或水平图时也表示第三个维度。通过齐次坐标的变换是通过 4 x 4 矩阵完成的，该矩阵存储为以`current.transform( current.viewport())`. 您可以通过查看`trans3d`. 我看到@nograpes 已经为您指出了`grid::pushViewport`函数中的高级轮换工具。

# algorithm - 图中的路径是否连通

> ID：12011232
> 
> 赞同：-1
> 
> 时间：2012-08-17T18:28:08.870
> 
> 标签：algorithm, graph, path

我对图中的路径有疑问。我们有一个图，例如：
5 个顶点和 4 个边
1 2 第一个连接到第二个，等等
2 3
3 4
5 1

现在我想回答问题（例如）：如果顶点 1 连接到顶点 3。答案是肯定的 - 因为我们有路径“1 -> 2 -> 3。

你有什么建议？

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:30:58.543

这将需要您进行一些研究。这个想法是使用像[深度优先](http://en.wikipedia.org/wiki/Depth-first_search)或[广度优先](http://en.wikipedia.org/wiki/Breadth-first_search)这样的图遍历算法。从一个顶点（如示例中的 1）开始并继续遍历图形，直到您到达目标节点（示例中为 3）或找不到更多可遵循的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:31:31.087

DFS 或 BFS（我更喜欢 DFS，因为它会导致更少的回溯）从起始节点开始，如果算法完成但没有找到无法访问的节点。

# rally - Rally 应用 sdk 1 和标准报告

> ID：12011237
> 
> 赞同：1
> 
> 时间：2012-08-17T18:28:29.467
> 
> 标签：rally

我是新手。有没有办法在一个 html 页面上显示多个标准报告？我为每个图表创建了发布淹没组件，并将这些图表显示在带有 html 表格单元格的 div 元素中。我希望能够将这些图表显示为集会之外的一页。图表单独工作，但是当我将它们组合成一个 html 页面时，只有 1 个工作。

允许用户输入一个版本，并且该版本的 objectid 被传递给图表显示函数。请参阅下面的代码片段：

```
function releaseSelected2(dropdown,eventArgs) {
     var selectedItem=eventArgs.item;  
     var selectedValue = eventArgs.value;
     var releaseObjids2 =  new Array();
     releaseObjids2[1]=selectedItem.ObjectID;         
     displayChart2(releaseObjids2[1]);
} //end event listener for chart1
var ddown2=document.getElementById("ddown2");
var config2 = { label: "Select a release   "   };
var releaseDropdown = new rally.sdk.ui.ReleaseDropdown(config2,rallyDataSource);
releaseDropdown.display(ddown2,releaseSelected2);

 function releaseSelected(dropdown,eventArgs) {
 var selectedItem=eventArgs.item;
 var selectedValue = eventArgs.value;
 var releaseObjids =  new Array();
 releaseObjids[1]=selectedItem.ObjectID;          
 displayChart1(releaseObjids[1]);
}
var ddown1=document.getElementById("ddown1");
var config = { label: "Select a release " };
var releaseDropdown = new rally.sdk.ui.ReleaseDropdown(config,rallyDataSource);
releaseDropdown.display(ddown1,releaseSelected);

function displayChart1(release) { 
  var config = {
  report: rally.sdk.ui.StandardReport.ReleaseDefectTrend,
  title: 'Blacklight: Release defect trend',
  subtitle: 'subtitle placeholder',
   width : 550,
   height: 500,
   releases: release
};

 var report = new rally.sdk.ui.StandardReport(config);
 var div1=document.getElementById("div1");
 report.display(div1);  

  }
 function displayChart2(release2) {
var config2 = {
report: rally.sdk.ui.StandardReport.ReleaseBurnup,
 title: 'Blacklight: Release burnup',
 subtitle: 'subtitle placeholder',
 width : 550,
 height:500,
 release: release2
};                              
var report2 = new rally.sdk.ui.StandardReport(config2);
var div2=document.getElementById("div2");
report2.display(div2); 
}

//html
.
.
<table border="1">
<tr>
   <th>  </th>
   <th>  </th>
 </tr>
<tr>
<th id="ddown1">  </th>
<th id="ddown2"> </th>
</tr>
<tr>
 <td>
   <div id="div1"></div>
 </td>
<td> 
  <div id="div2"></div>
 </td>
</tr>

</table>
.
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:43:24.413

我重新排列了您给我的代码片段，现在我可以查看这两个图表。您的代码似乎对我来说通常工作得很好，所以我想知道问题是否与您最初拥有的表格布局有关......它对您有用吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- Copyright (c) 2011  Rally Software Development Corp.  All rights reserved -->
<html>
<head>
<script type="text/javascript" src="/apps/1.32/sdk.js?debug=true"></script>

<script type="text/javascript">
    function onLoad() {
        var rallyDataSource = new  rally.sdk.data.RallyDataSource("__WORKSPACE_OID__",
             "__PROJECT_OID__",
             "__PROJECT_SCOPING_UP__",
             "__PROJECT_SCOPING_DOWN__");
        var ddown1=document.getElementById("ddown1");
        var config = { label: "Select a release " };
        var releaseDropdown = new rally.sdk.ui.ReleaseDropdown(config,rallyDataSource);
        releaseDropdown.display(ddown1,releaseSelected);

        var ddown2=document.getElementById("ddown2");
        var config2 = { label: "Select a release   "   };
        var releaseDropdown = new                 rally.sdk.ui.ReleaseDropdown(config2,rallyDataSource);
        releaseDropdown.display(ddown2,releaseSelected2);
    }

    function releaseSelected2(dropdown,eventArgs) {
        var selectedItem=eventArgs.item;  
        var selectedValue = eventArgs.value;
        var releaseObjids2 =  new Array();
        releaseObjids2[1]=selectedItem.ObjectID;         
        displayChart2(releaseObjids2[1]);
    } //end event listener for chart1

    function releaseSelected(dropdown,eventArgs) {
        var selectedItem=eventArgs.item;
        var selectedValue = eventArgs.value;
        var releaseObjids =  new Array();
        releaseObjids[1]=selectedItem.ObjectID;          
        displayChart1(releaseObjids[1]);
    }

    function displayChart1(release) { 
        var config = {
            report: rally.sdk.ui.StandardReport.ReleaseDefectTrend,
            title: 'Blacklight: Release defect trend',
            subtitle: 'subtitle placeholder',
            width : 550,
            height: 500,
            releases: release
        };

        var report = new rally.sdk.ui.StandardReport(config);
        var div1=document.getElementById("div1");
        report.display(div1);  
   }

   function displayChart2(release2) {
       var config2 = {
           report: rally.sdk.ui.StandardReport.ReleaseBurnup,
           title: 'Blacklight: Release burnup',
           subtitle: 'subtitle placeholder',
           width : 550,
           height:500,
           releases: release2
       };                              

       var report2 = new rally.sdk.ui.StandardReport(config2);
       var div2=document.getElementById("div2");
       report2.display(div2); 
   }

    rally.addOnLoad(onLoad);
</script>
</head>
<body>
<table border="1">
<tr>
 <td align="center"><div id="ddown1"></div></td>
 <td align="center"><div id="ddown2"></div></td>
</tr>
<tr>
 <td><div id="div1"></div></td>
 <td><div id="div2"></div></td>
</tr>
</table>
</body> 
```

# java - 构建一个可以在验证客户端后存储客户端详细信息的 java 服务器

> ID：12011244
> 
> 赞同：0
> 
> 时间：2012-08-17T18:28:48.247
> 
> 标签：java

我是 java 编程新手，我想开发一个服务器，可以存储客户端的详细信息，以了解哪个客户端已经连接到它。请给我一些好的链接和示例，我可以在其中学习如何设计服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:32:38.623

以`ServerSocket`、`Socket`和开头`InetAddress`。这些应该让您开始并找出连接到您的服务器的所有客户端，然后比较 IP 地址以查看是否存在重复。您可能应该开始，然后发布一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:42:22.813

虽然 MartyE 关于服务器套接字的回答在正确的上下文中是完全可行的，但在当今时代更常见的模型是使用 Web 技术开发服务器。我建议从 Java Servlet 开始，如果您不需要 Web 界面，则可能是 Restlet/Jersey 等框架。

这些将使您相对轻松地开发 HTTP + XML 或 HTTP + JSON 服务器。

直接使用套接字开发服务器会给你更多的控制权，如果你做得很好，它可能会比基于 Web 的解决方案性能更高，但它需要更多的工作，并且有更多的方法可以让你自己陷入困境并发编程问题和套接字处理。如果您是编程新手，我不建议您这样做。

# javascript - 无法在 jquery 中选择不包含第 th 个元素的 tr

> ID：12011245
> 
> 赞同：3
> 
> 时间：2012-08-17T18:28:48.780
> 
> 标签：javascript, jquery, html

这个例子来自一本书。表格标题，奇数，偶数行有不同的颜色。它选择不包含 th 元素的 tr ，以防止表格标题和偶数行之间的样式重叠。但是在浏览器渲染之后，它就会出来`<tr class="table-heading even">`。所以偶数行的样式会覆盖表格标题行的样式。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Styling Alternate Rows</title>
    <style type="text/css">
      .table-heading{
          text-align:left;
          background-color:#6C6; /*green for table heading*/
      }     
      .odd{
          background-color:#ffc; /*pale yellow for odd row*/
      }
      .even{
          background-color:#cef; /*pale blue for even rows*/
      }
      .highlight{
          font-weight:bolid;
          color:#f00;
      }
    </style>
    <script src="../jquery-1.8.0.js" type="text/javascript"></script>
    <script type="text/javascript">
      $(document).ready(function (){
              //style table heading row
              $('th').parent().addClass('table-heading');             
              //style odd row
              $('tr:not([th]):odd').addClass('odd');
              //style even row
              $('tr:not([th]):even').addClass('even');
              //style next table cells of the cell containing the word "Henry"
              $('td:contains("Henry")').next().addClass('highlight');
          }
      );
    </script>
</head>

<body>
    <table>
        <tr>
            <th>Title</th>
            <th>Category</th>
        </tr>
        <tr>
            <td>As your like it</td>
            <td>Comedy</td>
        </tr>
        <tr>
            <td>All well</td>
            <td>Comedy</td>
        </tr>
        <tr>
            <td>Henry IV Part 1</td>
            <td>Tragely</td>
        </tr>
        <tr>
            <td>Henry V</td>
            <td>Tragely</td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T18:35:43.910

您可以使用`:has`选择器，试试这个：

```
$('tr:not(":has(th)"):odd').addClass('odd');
$('tr:not(":has(th)"):even').addClass('even'); 
```

或者：

```
var $tr = $('tr:not(":has(th)")');
$tr.filter(':odd').addClass('odd')
$tr.filter(':even').addClass('even') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:35:45.633

只需删除不需要的类[http://jsfiddle.net/8GHKd/](http://jsfiddle.net/8GHKd/)

```
$(document).ready(function (){
          //style odd row
          $('tr:not([th]):odd').addClass('odd');
          //style even row
          $('tr:not([th]):even').addClass('even');
          //style next table cells of the cell containing the word "Henry"
          $('td:contains("Henry")').next().addClass('highlight');
          //style table heading row
          $('th').parent().addClass('table-heading').removeClass('even');
      }
  );​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:36:49.977

在您的 CSS 中，将表格标题规则放在底部以覆盖 .even

```
 .odd{
      background-color:#ffc; /*pale yellow for odd row*/
  }
  .even{
      background-color:#cef; /*pale blue for even rows*/
  }
  .highlight{
      font-weight:bolid;
      color:#f00;
  }
  .table-heading{
      text-align:left;
      background-color:#6C6; /*green for table heading*/
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T18:38:39.017

使用 not() 过滤掉 tr

```
$(document).ready(function() {
    var $th = $('th');
    //style table heading row
    $th.parent().addClass('table-heading');
    //style odd row
    $('tr:odd').not($th.parent()).addClass('odd');
    //style even row
    $('tr:even').not($th.parent()).addClass('even');
    //style next table cells of the cell containing the word "Henry"
    $('td:contains("Henry")').next().addClass('highlight');
});​ 
```

[http://jsfiddle.net/wirey00/ELJpN/](http://jsfiddle.net/wirey00/ELJpN/)

甚至更短

```
$(document).ready(function() {
    var $thp = $('th').parent();
    $thp.addClass('table-heading');
    $('tr').not($thp).addClass(function(){
        return $(this).index() % 2 == 0 ? 'even':'odd';
    });    
});​ 
```

[http://jsfiddle.net/wirey00/GHGQB/](http://jsfiddle.net/wirey00/GHGQB/)

# node.js - 检测从缓冲区读取的部分或不完整字符

> ID：12011250
> 
> 赞同：3
> 
> 时间：2012-08-17T18:29:36.150
> 
> 标签：node.js, character-encoding, buffer

在一个循环中，我正在读取一个流，该流被编码为 UTF-8，每个循环中有 10 个字节（比如说）。由于首先将流传递到缓冲区，因此我必须在将其转换为 UTF-8 字符串之前以字节为单位指定其读取长度。我面临的问题是，有时它会读取部分、不完整的字符。我需要解决这个问题。

有没有办法检测字符串是否以不完整的字符结尾，或者我可以对字符串的最后一个字符执行一些检查来确定这一点？

最好是“非单一编码”解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:23:00.900

如果缓冲区以不完整的字符结尾，然后将其转换为字符串，然后从该字符串初始化新缓冲区，则新缓冲区的长度将不同（如果使用 utf8，则更长，如果使用 ucs2，则更短）比原来的。

就像是：

```
var b1=new Buffer(buf.toString('utf8'), 'utf8');
if (b2.length !== buf.length) {
   // buffer has an incomplete character
} else {
   // buffer is OK
} 
```

将您想要的编码替换为“utf8”。

请注意，这取决于当前的实现如何`Buffer#toString`处理不完整的字符，这没有记录在案，尽管它不太可能以导致等长缓冲区的方式进行更改（未来的实现可能会引发错误，所以您可能应该将代码包装在 try-catch 块中）。

# linkedin - 从linkedin获取我自己的更新并显示在我的网站上 - 匿名用户

> ID：12011264
> 
> 赞同：3
> 
> 时间：2012-08-17T18:30:16.030
> 
> 标签：linkedin

我在linkedin有一个公司简介。我在个人资料中有一些更新。现在我需要从链接中获取记录并显示在我的网站上。它也应该对匿名用户可见。

有没有人实现过这样的代码。仅使用 javascript 或 REST 服务。请建议一些链接。我已经搜索但没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:57:23.507

不幸的是，[LinkedIn API 服务条款](https://developer.linkedin.com/documents/linkedin-apis-terms-use)不允许您向未经身份验证的用户显示数据。您的选择是：

1.  使用他们的凭据对用户进行身份验证并提取您的个人资料数据，或者
2.  [使用会员资料插件](https://developer.linkedin.com/plugins/member-profile-plugin-generator)等预构建插件向未经身份验证的用户显示数据。

# javascript - 如何使此用户名建议在 javascript 中工作？

> ID：12011265
> 
> 赞同：0
> 
> 时间：2012-08-17T18:30:17.993
> 
> 标签：javascript

我有一个需要名字和姓氏的应用程序。当用户输入他们的名字和姓氏以建议用户名时，我需要让用户名字段自动填写。现在，它在一定程度上起作用。这是在名称字段的 keyup 上执行的函数。

```
suggestUsername: function() {
  var username = this.$('#user_login_field').val();
  var first = this.$('#user_first_name_field').val();
  var last = this.$('#user_last_name_field').val();
  if(first == '' && last == ''){
    this.$('#user_login_field').val('');
  } else {
    this.$('#user_login_field').val(first+'.'+last);
  }
}, 
```

除非用户手动将某些内容添加到用户名，然后返回到名称字段之一并输入其他内容，否则此方法有效。在这种情况下，用户手动添加的任何内容都会消失。不知道如何修复它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:39:36.043

将 jQuery 焦点处理程序添加到 #user_login_field 以解除按键事件与名字和姓氏字段的绑定。(http://api.jquery.com/focus/)

```
$('#user_login_field').focus(function (e) {
  // Unbind the keyup events
  $('#user_first_name_field').unbind('keypress');
  $('#user_last_name_field').unbind('keypress');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:40:06.800

你可以添加一个

```
$('#user_last_name_field').blur(function(){
     //do username suggestion
 }) 
```

# r - 通过 plyr 从嵌套的模型列表中提取系数

> ID：12011266
> 
> 赞同：0
> 
> 时间：2012-08-17T18:30:21.917
> 
> 标签：r, plyr

我有一个要从中提取系数的嵌套模型列表，然后创建一个数据框，其中每一行还包含存储该模型的列表元素的名称。我想知道是否有一个 plyr 函数已经处理了嵌套列表，或者只是一种更清洁的方式来完成任务。

例如：

```
### Create nested list of models

iris.models <- list()
for (species in unique(iris$Species)) {

iris.models[[species]]<- list()

for (m in c("Sepal.Length","Sepal.Width","Petal.Length")) {

    iris.formula <- formula(paste("Petal.Width ~ ", m))
    iris.models[[species]][[m]] <- lm(iris.formula
                                      , data=iris
                                      , subset=Species==species)

    } # for m

} # for species 

### Create data frame of variable coefficients (excluding intercept)

irisCoefs <- ldply(names(iris.models)
             , function(sp) {
              ldply(iris.models[[sp]]
                    , function(meas) data.frame(Species=sp, Coef=coef(meas)[-1])
            )})
colnames(irisCoefs)[colnames(irisCoefs)==".id"] <- "Measure"
irisCoefs 
```

此代码生成如下数据框：

```
 Measure      Species          Coef
1 Sepal.Length setosa     0.08314444
2 Sepal.Width  setosa     0.06470856
3 Petal.Length setosa     0.20124509
4 Sepal.Length versicolor 0.20935719
5 Sepal.Width  versicolor 0.41844560
6 Petal.Length versicolor 0.33105360
7 Sepal.Length virginica  0.12141646
8 Sepal.Width  virginica  0.45794906
9 Petal.Length virginica  0.16029696 
```

虽然我的代码有效，但我最终这样做的方式似乎有点不雅，我想知道我是否可以进一步简化它（或将其推广到其他情况）：

我的问题是：

使用嵌套列表似乎有点棘手。在外部 ldply 调用中，我必须使用列表项的名称，但在内部调用中，我得到了“免费”添加的 .id 列。我想不出一种更简单的方法来访问被调用函数中列表元素的名称。

我也无法在第二个 ldply 函数调用本身中更改“.id”中的列名。所以我最终在之后添加了 colnames 语句。

有没有办法让我的代码在 plyr 做事方式中更直接？

我不知道这是否有助于澄清我的意图，但我想象代码看起来像：

```
ldply(iris.models, .id.col="Species", function(sp) ldply(sp, .id.col="Measure", function(x) data.frame(coef(x)[-1]))) 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:17:22.593

不完全是所需的格式，但这适用于基本功能。

```
m=c("Sepal.Length","Sepal.Width","Petal.Length")
do.call(rbind,
    by(iris,iris$Species,
      function(x) sapply(m, 
        function(y) coef(lm(paste('Petal.Width ~',y),data=x))) [2,]
   ) 
)

           Sepal.Length Sepal.Width Petal.Length
setosa       0.08314444  0.06470856    0.2012451
versicolor   0.20935719  0.41844560    0.3310536
virginica    0.12141646  0.45794906    0.1602970 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:52:28.897

plyr 方法：

```
#Melt the predictor variables
iris_m <- melt(iris[, -4], id.vars = "Species")
#Insert the dependant variable
iris_m$Petal.Width <- rep(iris$Petal.Width, 3)

#Make the models divide by species and variable
models <- dlply(iris_m, .(Species, variable), 
                function(x) lm(Petal.Width ~ value, data = x))
#Get the coefficients as a nice data.frame
ldply(models, function(x) coef(x)[-1])

     Species     variable      value
1     setosa Sepal.Length 0.08314444
2     setosa  Sepal.Width 0.06470856
3     setosa Petal.Length 0.20124509
4 versicolor Sepal.Length 0.20935719
5 versicolor  Sepal.Width 0.41844560
6 versicolor Petal.Length 0.33105360
7  virginica Sepal.Length 0.12141646
8  virginica  Sepal.Width 0.45794906
9  virginica Petal.Length 0.16029696 
```

# ssh - 如何将 Coda 连接到 AWS EC2 实例？用户名或密码无效

> ID：12011270
> 
> 赞同：6
> 
> 时间：2012-08-17T18:30:33.030
> 
> 标签：ssh, amazon-ec2, amazon-web-services, coda

我已按照线程中的说明进行操作：[如何配置 Coda 以适用于我的 Amazon EC2 实例？](https://stackoverflow.com/questions/6224778/how-do-configure-coda-to-work-for-my-amazon-ec2-instance)

但是，我仍然遇到问题。我可以通过键入`ssh unbuntu@ip`和使用 Coda 中的终端 ssh 进入我的 EC2 实例。当我尝试添加站点并连接时，它说服务器不接受用户名或密码。

我确信我的权限在 .ssh 中的密钥对上是正确的 (400)，因为我可以 ssh 进入它。

我的尾声设置是：

```
Protocal: SFTP port 22
Server: <ip>
username: ubuntu
password: <blank>
Root URL: http://<ip>/sub 
```

此外，我的 .ssh 目录权限为 700，其中的所有文件都设置为 400。我的配置文件如下所示：

```
Host <ip>
User ubuntu
IdentityFile ~/.ssh/key.pem
HostName <ip> 
```

知道出了什么问题吗？我可以通过终端 ssh 并使用 Coda 终端；但是，我说

> “无法连接到服务器 xxxx：服务器不接受用户名或密码。”`

当我尝试使用 Coda 打开网站时。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-19T06:53:31.920

当使用 Coda 创建新站点以与我使用过的 EC2 实例一起使用时：

> 协议：SFTP
> 
> 端口：22
> 
> 服务器：ec2-xxx-xxx-xxx-xxx.eu-west-1.compute.amazonaws.com
> 
> 用户名：ec2-user
> 
> 密码：（按钥匙图标并选择您的密钥对）
> 
> 根网址：[http ://whatever.com](http://whatever.com)
> 
> 远程根目录：/var/www/html/whatever.com
> 
> 本地根目录：/Volumes/Macintosh HD/Users/Alex/Location/Location/Location

按 SAVE 就完成了。

您还可以创建一个`~/.ssh/config`文件：

```
# AWS Ec2 Ireland
Host *.eu-west-1.compute.amazonaws.com
IdentityFile /location/of/your/pem/file/dublin.pem
StrictHostKeyChecking no
UserKnownHostsFile /dev/null
IdentitiesOnly yes
ForwardAgent no 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T14:11:49.247

尝试使用空白密码将用户名设置为“ec2-user”。

# wpf - SelectionChanged 期间的动画

> ID：12011274
> 
> 赞同：5
> 
> 时间：2012-08-17T18:30:42.630
> 
> 标签：wpf, storyboard, tabcontrol, selectionchanged

我有一个`TabControl`where 每个`TabItem`都有一个单独的控件作为其`Content`元素。现在，我可以使用`UserControl.Loaded`EventTrigger 在切换到选项卡时轻松执行情节提要。但是，我还想在从一个选项卡切换到另一个选项卡时运行退出动画（即允许旧的内容控件动画离开，然后是新的内容控件的入口动画）。

是否可以使用标准 WPF 构造来做到这一点？

如果没有，我将如何开发处理此问题的自定义解决方案？

**编辑：** 我继续做了一个修改的 TabControl，它扩展了基本的 TabControl 并覆盖了它的`OnSelectionChanged`方法，如下所示：

```
protected override void OnSelectionChanged(SelectionChangedEventArgs e)
{
    if (e.AddedItems.Count == 1 && e.RemovedItems.Count == 1)
    {
        var oldTab = e.RemovedItems[0] as TabItem;

        if (oldTab != null)
        {
            var exitStoryboard = /** code to find the storyboard **/
            if (exitStoryboard != null)
            {
                exitStoryboard.Completed = (_, __) => base.OnSelectionChanged(e);
                exitStoryboard.Begin();
                return;
            }
        }
    }
    base.OnSelectionChanged(e);
} 
```

这有效，除非我在选项卡之间单击得太快，在这种情况下 base.OnSelectionChanged 永远不会被调用，大概是因为情节提要不再处于活动状态。提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:40:09.730

这里有2个标签的解决方案，大致思路是在选择改变后弹出最后一个标签的图像，然后淡入当前标签。

通过跟踪属性中 VisualBrush 的最后一个选项卡而不是此处使用的硬编码“其他”选项卡，只需稍加努力，您就可以将它泛化为任意数量的选项卡。

```
<Grid xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
   <TabControl>
      <TabItem x:Name="tab1" Header="Tab 1">
         <Border Background="Transparent">
            <Grid>
               <TextBlock FontSize="40" Foreground="Red" Text="Tab 1 Contents">
                  <TextBlock.Triggers>
                     <EventTrigger RoutedEvent="Loaded">
                        <BeginStoryboard>
                           <Storyboard>
                              <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity">
                                 <DiscreteDoubleKeyFrame KeyTime="0:0:0" Value="0.0"/>
                              </DoubleAnimationUsingKeyFrames>
                              <DoubleAnimation
                                 Duration="0:0:0.25"
                                 From="1"
                                 Storyboard.TargetName="tab2Shadow"
                                 Storyboard.TargetProperty="Opacity"
                                 To="0"/>
                              <DoubleAnimation
                                 BeginTime="0:0:0.25"
                                 Duration="0:0:0.25"
                                 From="0"
                                 Storyboard.TargetProperty="Opacity"
                                 To="1"/>
                           </Storyboard>
                        </BeginStoryboard>
                     </EventTrigger>
                  </TextBlock.Triggers>
               </TextBlock>
               <Rectangle x:Name="tab2Shadow">
                  <Rectangle.Fill>
                     <VisualBrush
                        AlignmentX="Left"
                        AlignmentY="Top"
                        AutoLayoutContent="False"
                        Stretch="None"
                        Visual="{Binding ElementName=tab2, Path=Content}"/>
                  </Rectangle.Fill>
               </Rectangle>
            </Grid>
         </Border>
      </TabItem>
      <TabItem x:Name="tab2" Header="Tab 2">
         <Border Background="Transparent">
            <Grid>
               <TextBlock FontSize="40" Foreground="Red" Text="Tab 2 Contents">
                  <TextBlock.Triggers>
                     <EventTrigger RoutedEvent="Loaded">
                        <BeginStoryboard>
                           <Storyboard>
                              <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity">
                                 <DiscreteDoubleKeyFrame KeyTime="0:0:0" Value="0.0"/>
                              </DoubleAnimationUsingKeyFrames>
                              <DoubleAnimation
                                 Duration="0:0:0.25"
                                 From="1"
                                 Storyboard.TargetName="tab1Shadow"
                                 Storyboard.TargetProperty="Opacity"
                                 To="0"/>
                              <DoubleAnimation
                                 BeginTime="0:0:0.25"
                                 Duration="0:0:0.25"
                                 From="0"
                                 Storyboard.TargetProperty="Opacity"
                                 To="1"/>
                           </Storyboard>
                        </BeginStoryboard>
                     </EventTrigger>
                  </TextBlock.Triggers>
               </TextBlock>
               <Rectangle x:Name="tab1Shadow">
                  <Rectangle.Fill>
                     <VisualBrush
                        AlignmentX="Left"
                        AlignmentY="Top"
                        AutoLayoutContent="False"
                        Stretch="None"
                        Visual="{Binding ElementName=tab1, Path=Content}"/>
                  </Rectangle.Fill>
               </Rectangle>
            </Grid>
         </Border>
      </TabItem>
   </TabControl>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:36:38.087

您可以使用 TabControl.SelectionChanged 事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:46:06.260

您可以为您的选项卡控件定义自定义样式并在 Selector.SelectionChanged RoutedEvent 上执行动画

```
 <Style x:Key="{x:Type TabControl}"
           TargetType="TabControl">
        <Setter Property="VerticalContentAlignment" Value="Stretch" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TabControl">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="40" />
                            <RowDefinition />
                        </Grid.RowDefinitions>

                        <UniformGrid Grid.Row="0"
                                     Rows="1"
                                     IsItemsHost="True" />
                        <ContentPresenter x:Name="TabContent"
                                          Grid.Row="2"
                                          Content="{TemplateBinding SelectedContent}">

                        </ContentPresenter>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <EventTrigger RoutedEvent="Selector.SelectionChanged">
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation From="0"
                                                     To="1"
                                                     Storyboard.TargetProperty="Opacity"
                                                     Storyboard.TargetName="TabContent"
                                                     Duration="0:0:0.5" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# webbrowser-control - 无法从 WinForms 应用程序设置 WinInet 代理

> ID：12011276
> 
> 赞同：0
> 
> 时间：2012-08-17T18:30:47.997
> 
> 标签：webbrowser-control, fiddler, wininet, http-proxy, internetsetoption

我正在运行 Windows 7 和 IE9。我正在编写一个在另一个线程上运行代理服务器（使用 TcpListener）的 winforms 应用程序（.net 4.0 和 c#）。

在我实例化主窗体之前，我使用 InternetSetOption 设置代理并启动代理服务器。

我的代理设置代码与此处的代码非常相似：[Set Proxy UserName and Password using Wininet in C#](https://stackoverflow.com/questions/9319906/set-proxy-username-and-password-using-wininet-in-c-sharp)

然后我浏览到 IE 中的一个站点，IE 没有连接到我的代理服务器。此外，IE 工具--> 互联网选项--> 连接--> 局域网设置--> 为您的局域网使用代理服务器复选框未被选中。但是当我运行提琴手时，这个复选框被选中。这意味着提琴手正在正确设置代理，但我没有。提琴手是怎么做到的？我已经浏览了无数博客，InternetSetOption 上的 MSDN 文章都是徒劳的。任何帮助表示赞赏。

我的代理服务器代码与此处的代码非常相似：[Simple Http proxy using Sockets: Questions](https://stackoverflow.com/questions/534512/simple-http-proxy-using-sockets-questions)

我知道我的代理服务器可以工作，因为当我转到 IE 工具 --> 互联网选项 --> 连接 --> 局域网设置并将代理服务器明确设置为 127.0.0.1:9898 （我运行代理服务器的地方）时， IE 和所有其他浏览器都连接到我的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:07:43.537

此代码下载中的 WinINET.cs 文件：[http](http://code.msdn.microsoft.com/CSWebBrowserWithProxy-c8535715) ://code.msdn.microsoft.com/CSWebBrowserWithProxy-c8535715具有设置 WinINET 代理的核心功能。它有一些小细节略有错误，但在大多数情况下都能正常工作。

# c# - 实施增量搜索来过滤 GridView 结果？

> ID：12011278
> 
> 赞同：0
> 
> 时间：2012-08-17T18:30:51.440
> 
> 标签：c#, windows-8, microsoft-metro

我正在编写一个带有 GridView 的 Windows 8 Metro 应用程序，其中包含几页的项目。我想为用户提供一种增量搜索的过滤功能。我认为一旦用户开始输入，它就会弹出一个文本字段。

我认为实现搜索合同可能是实现这一目标的方法，但它似乎没有我正在寻找的增量行为。

有人知道这样的例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:46:56.213

您可以从 SearchPane.getForCurrentView() 连接到 SuggestionsRequested 事件。当用户键入时，您可以处理每个击键并过滤您在网格中显示的数据。

话虽如此，过滤通常直接在 UI 中实现，而不是通过搜索合约。因此，我喜欢您使用文本字段并处理每次击键的想法。

# postgresql - Postgres 不使用“created_time / 60”的索引

> ID：12011279
> 
> 赞同：0
> 
> 时间：2012-08-17T18:30:53.207
> 
> 标签：postgresql, indexing, performance

我有一个系统可以保存网络中服务器的统计信息。稍后，用户可以使用所有数据并计划其增长。因此，将数据汇总成图表非常重要，即跨越一个小时、一天、一周、一年等。

我正在尝试做这样的事情：

```
select created_time / 60, count(*)
from pm_server_stat
group by (created_time / 60);

--with this index
CREATE INDEX pm_server_stat_created_time_60
  ON pm_server_stat
  USING btree
  ((created_time / 60)); 
```

这是我得到的解释

```
"GroupAggregate  (cost=189822.36..213951.06 rows=1206435 width=8)"
"  Output: ((created_time / 60)), count(*)"
"  ->  Sort  (cost=189822.36..192838.45 rows=1206435 width=8)"
"        Output: created_time, ((created_time / 60))"
"        Sort Key: ((pm_server_stat.created_time / 60))"
"        ->  Seq Scan on public.pm_server_stat  (cost=0.00..34967.44 rows=1206435 width=8)"
"              Output: created_time, (created_time / 60)" 
```

有谁知道为什么会这样？我怀疑类型可能不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:49:53.590

PostgreSQL 在 9.1 或更早版本中没有“覆盖”索引。这意味着无论如何它都必须访问这些行，在这种情况下它不妨扫描它们。它们将出现在 9.2 中（如果你想尝试的话，目前正在进行 beta 测试），但我不确定它们是否足够聪明。

一旦您想要“提供的总文件数”或“传输的总数据包数”，它就永远不会起作用。

通常，对于此类汇总任务，您将拥有一个或多个汇总表：stats_minute、stats_hour、stats_day、stats_week 等。您拥有多少取决于总数据大小/性能要求。使用简单的 cron-job 使摘要保持最新。如果数据将以“延迟”时间戳传入，您可能需要稍微滞后或允许重新计算。

然后，您可以将汇总表与自当前小时开始以来所有行的实际总和合并。要查询的数据要少得多，并且可以根据您的需要进行。

# ruby-on-rails - 2 路加密算法，适用于 Ruby 和 Node.JS，只加密字母和数字

> ID：12011289
> 
> 赞同：1
> 
> 时间：2012-08-17T18:31:13.380
> 
> 标签：ruby-on-rails, node.js, encryption, aes

我有一个 node.js 服务器，它将加密一个字符串并将其存储到数据库中。我还有一个 RoR（Ruby on Rails）服务器，它将从数据库中检索加密字符串并对其进行解密。我唯一的标准是加密只能将字符串加密成一串字母和数字（没有特殊字符）

有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:19:26.280

正如其他人所建议的那样，像 AES-CBC 或 AES-CTR 以及 Base-64 这样的强加密是一种解决方案。除了 62 个字母数字字符之外，Base-64 还使用 +、/ 和 =。Hex (Base-16) 是严格的字母数字，但占用更多存储空间。Base-32 只有填充字符 =，与 Base-64 类似。在紧要关头，可以省略填充，并重新计算以进行解码。

如果您愿意接受较低级别的安全性，那么另一种选择是使用[Vigenère 密码](http://en.wikipedia.org/wiki/Vigenere_cipher)，您可以在其中明确确定允许的输入和输出字符。

# google-apps-script - 为什么我的代码有时会在应用程序脚本中产生不同的结果？

> ID：12011291
> 
> 赞同：0
> 
> 时间：2012-08-17T18:31:20.447
> 
> 标签：google-apps-script, google-apps

我有一个非常奇怪的问题。我加载我的应用程序，切换到正确的选项卡，然后按下我需要按下的按钮。这会运行一个函数，当我第一次加载页面时，它可能只提供正确结果的一部分。但是，如果我等待几秒钟，它会产生完整的正确结果。任何想法为什么会发生这种情况？

**附加信息**

该按钮只是检查通过 ScriptDB 返回的对象列表。显示有效的对象，不显示无效的对象。如果对象再次出现，则更新文本以显示在列表中找到了多少（例如：标签将从“对象 A”更改为“对象 A (2)”）。

在我看来，它似乎没有列表的其余部分，因为它并不总是停在同一个对象上。这很奇怪，我以前没有经历过。无论我使用多快，我的应用程序使用 ScriptDB 的其他功能都可以完全正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-17T15:16:03.133

我现在想通了。我不知何故在返回空字段的数据库中有一些错误数据。我只能假设这是我上周从电子表格中导入的。

*这是从我的评论中复制的，以表明它已得到解决。*

# arrays - 合并两个数组以在 ruby 中创建一个二维数组

> ID：12011294
> 
> 赞同：11
> 
> 时间：2012-08-17T18:31:45.333
> 
> 标签：arrays, ruby

```
a = [1, 2, 3]
b = [4, 5, 6] 
```

我如何将两个数组组合成一个二维数组？：

```
[[1, 4], [2, 5], [3, 6]] 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-17T18:33:26.137

试试[数组#zip](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-zip)

```
a.zip(b)
=> [[1,4],[2,5],[3,6]] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-17T18:50:30.033

虽然`zip`显然是最直接的答案，但这也有效：

```
[a, b].transpose
=> [[1, 4], [2, 5], [3, 6]] 
```

# nginx - Nginx 不提供静态文件

> ID：12011296
> 
> 赞同：2
> 
> 时间：2012-08-17T18:31:59.083
> 
> 标签：nginx

我一直在忙于将站点从 Apache 迁移到 Nginx 的过程，我快要失去理智了。虚拟主机不想提供静态资源（css、js 等），我似乎不知道为什么。服务器块如下所示：

```
server {
  listen      443 default_server ssl;
  server_name dev.myproject.mydomain.net;
  root        /opt/dev/myproject;
  index       index.php;

  ssl_certificate      /etc/ssl/certs/server.crt;
  ssl_certificate_key  /etc/ssl/certs/server.pem;

  access_log /var/log/nginx/vh.project.dev.access.log;
  error_log  /var/log/nginx/vh.project.dev.error.log;

  location ~ ^/alias_name/(.*) {
    alias /opt/dev/myproject/www/$1;

    location ~ ^/alias_name/(.+\.php)$ {
      alias /opt/dev/myprojectp/www/$1;
      include /etc/nginx/conf/php;
    }
  }

  location ~ \.php$ {
    include /etc/nginx/conf/php;
  }

  # deny access to .htaccess files, if Apache's document root
  # concurs with nginx's one
  #
  location ~ /\.ht {
    deny all;
  }
} 
```

我错过了什么？我知道这是我对 Nginx 的缺乏经验，但此时任何建议都会非常感激。

谢谢。

**更新**

这似乎与我之前遇到问题的别名有关。如果我将我的文档根目录指向别名位置 ( `/opt/dev/myprojectp/www`)，并尝试在没有别名的情况下呈现静态内容，则它呈现得很好。只要我在 URL 中添加别名……就没有那么多了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:48:39.283

取自： http: [//kbeezie.com/view/nginx-configuration-examples/](http://kbeezie.com/view/nginx-configuration-examples/)

```
# This block will catch static file requests, such as images, css, js
# The ?: prefix is a 'non-capturing' mark, meaning we do not require
# the pattern to be captured into $1 which should help improve performance
location ~* \.(?:ico|css|js|gif|jpe?g|png)$ {
    # Some basic cache-control for static files to be sent to the browser
    expires max;
    add_header Pragma public;
    add_header Cache-Control "public, must-revalidate, proxy-revalidate";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:56:32.293

好的，所以我可能通过蛮力试错找到了自己的答案。这个虚拟主机服务器块似乎可以正确地提供 PHP*和*静态内容：

```
server {
  listen      443 default_server ssl;
  server_name dev.myproject.mydomain.net;
  root        /opt/dev/project-root;
  index       index.php;

  ssl_certificate      /etc/ssl/certs/server.crt;
  ssl_certificate_key  /etc/ssl/certs/server.pem;

  access_log /var/log/nginx/myproject.dev.access.log;
  error_log  /var/log/nginx/myproject.dev.error.log;

  location ~ ^/alias_name/(.+\.php)$ {
    alias /opt/dev/project-root/www/$1;
    include /etc/nginx/conf/php;
  }
  location ~ ^/alias_name/(.*) {
    alias /opt/dev/project-root/www/$1;
  }

  location ~ \.php$ {
    include /etc/nginx/conf/php;
  }
} 
```

我不知道我是否会遇到问题，也不能说我完全理解其中的区别，但简单地删除嵌套`location`块似乎就可以了。

# windows - Windows 与 Linux/UNIX 中的 Perl 的 waitpid() 和 IPC::Open2

> ID：12011300
> 
> 赞同：3
> 
> 时间：2012-08-17T18:32:18.643
> 
> 标签：windows, linux, perl, ipc

以下代码在 Linux 中完美运行，但是当我将它放在 Windows 机器上时，一切都乱套了：

```
$pid = open2($my_reader, $my_writer, "$JAVACALL $PARSER_CP $PARSER_CMD -");
$my_reader->autoflush(1);
$my_writer->autoflush(1);
print $my_writer "$line\n";
close($my_writer);
my $tree = <$my_reader>;
chomp($tree);
push @parse_trees, $tree;
close($my_reader);
waitpid($pid, 0); 
```

在 Windows 中，它只是挂起等待`waitpid($pid, 0)`。如果我们注释掉该行，一切都会正常完成，但是我们会留下许多孤立的进程。让我困惑的是 ActiveState（我们正在使用的 Perl）实际上[说](http://docs.activestate.com/activeperl/5.14/lib/IPC/Open2.html)要按照我们正在做的方式做事。

有谁知道 Windows 愉快的方式来做到这一点？即使我必须维护两个不同版本的代码，我也不会在意这一点。:)

（对于那些好奇的人，这段代码会打开[Stanford Parser](http://nlp.stanford.edu/software/lex-parser.shtml)，它接受一个文件作为输入（因此使用“-”（与 Linux 中的类似/相同`/dev/stdin`）），向它抛出一个句子，然后返回一个解析树。不重要，但我知道有人会问。:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:38:36.447

好吧，对于那些好奇的人，我让事情按照他们应该的方式工作，但我对修复的一部分并不太着迷。我添加了

```
use POSIX ":sys_wait_h"; 
```

并将`waitpid()`调用更改为

```
waitpid($pid, &WNOHANG); 
```

仅此一项并没有做到，所以在此之后我立即添加

```
kill(-9, ($pid)); 
```

杀死进程。不是很喜欢调用，`kill()`但它有效，奇怪的是，如果我不调用`waitpid()`. 同样，如果有人知道更优雅的解决方案，那就太好了，但现在必须这样做。:)

# sql-server - SQL 嵌套 IF 不起作用

> ID：12011310
> 
> 赞同：1
> 
> 时间：2012-08-17T18:32:49.500
> 
> 标签：sql-server, tsql, stored-procedures, nested-if

从外观上看，我已经将所有内容都包含在正确的 BEGIN...END 语句中，但是代码会遍历并执行几乎每一行代码。我也完成了打印语句，以确保两个 @rows 变量实际上确实包含大于 0 的值。有人能帮我指出正确的方向吗？

```
 IF @rows > '0'

        --This agent's Tax ID number has been found to exist in AgentIdentification table
        BEGIN 

            --Set UniqueAgentId according to mapped value from AgentIdentification table
            SELECT @uniqueAgentId = UniqueAgentId
            FROM AgentIdentification
            WHERE AgentTaxId = @ssn

            --Check to make sure this record exists in UniqueAgentIdToAgentId table
            SELECT @rows = COUNT(*)
            FROM UniqueAgentIdToAgentId
            WHERE UniqueAgentId = @uniqueAgentId and AgentId = @agentId

            PRINT @rows
            IF @rows > 0                
                --Record exists in UniqueAgentIdToAgentId table
                --Check to make sure correct UniqueAgentId is mapped to correct AgentId and vice versa
                BEGIN 
                    SELECT @agentIdRows = COUNT(AgentId)
                    FROM UniqueAgentIdToAgentId
                    WHERE UniqueAgentId = @uniqueAgentId and AgentId <> @agentId

                    SELECT @uniqueIdRows = COUNT(UniqueAgentId)
                    FROM UniqueAgentIdToAgentId
                    WHERE AgentId = @agentId and UniqueAgentId <> @uniqueAgentId

                    IF @uniqueIdRows = 0 AND @agentIdRows = 0
                        BEGIN           
                            SET @returnValue = 1
                        END
                    ELSE IF @agentIdRows = 0 AND @uniqueIdRows > 0
                        BEGIN           
                            SET @returnValue = 2
                        END
                    ELSE
                        BEGIN
                            SET @returnValue = 3
                        END
                END

            --Record does not exist in UniqueAgentIdToAgentId and will be added
            ELSE 
                BEGIN
                    INSERT INTO UniqueAgentIdToAgentId (UniqueAgentId, AgentId, CompanyCode, LastChangeOperator, LastChangeDate)
                    VALUES (@uniqueAgentId, @agentId, @companyCode, @lastChangeOperator, @LastChangeDate)
                    SET @returnValue = 4
                END
        END
    ELSE
        BEGIN TRANSACTION

            --This agent Tax ID number does not exist on AgentIdentification table
            --Add record into Agent and AgentIdentification table
            INSERT INTO Agent (EntityType, FirstName, LastName, NameSuffix, CorporateName, LastChangeOperator, LastChangeDate)
            VALUES (@entityType, @firstName, @lastname, '', @corporateName, @lastChangeOperator, @LastChangeDate)

            SELECT @uniqueAgentId = @@IDENTITY
            SELECT UniqueAgentId
            FROM Agent

            INSERT INTO AgentIdentification (UniqueAgentId, TaxIdType, AgentTaxId, LastChangeOperator, LastChangeDate)
            VALUES (@uniqueAgentId, @taxIdType, @ssn, @lastChangeOperator, @lastChangeDate)

            --Check to make sure this record exists in UniqueAgentIdToAgentId table
            SELECT @rows = COUNT(*)
            FROM UniqueAgentIdToAgentId
            WHERE UniqueAgentId = @uniqueAgentId and AgentId = @agentId

            IF @rows > 0
                --Record exists in UniqueAgentIdToAgentId table
                --Check to make sure correct UniqueAgentId is mapped to correct AgentId and vice versa
                BEGIN 
                    SELECT @agentIdRows = COUNT(AgentId)
                    FROM UniqueAgentIdToAgentId
                    WHERE UniqueAgentId = @uniqueAgentId and AgentId <> @agentId

                    SELECT @uniqueIdRows = COUNT(UniqueAgentId)
                    FROM UniqueAgentIdToAgentId
                    WHERE AgentId = @agentId and UniqueAgentId <> @uniqueAgentId

                    IF @uniqueIdRows = 0 AND @agentIdRows = 0
                        BEGIN   
                            SET @returnValue = 5                        
                        END
                    ELSE IF @agentIdRows = 0 AND @uniqueIdRows > 0
                        BEGIN
                            SET @returnValue = 6                        
                        END
                    ELSE
                        BEGIN
                            SET @returnValue = 7                        
                        END
                END

            --Record does not exist in UniqueAgentIdToAgentId and will be added
            ELSE 
                BEGIN
                    INSERT INTO UniqueAgentIdToAgentId (UniqueAgentId, AgentId, CompanyCode, LastChangeOperator, LastChangeDate)
                    VALUES (@uniqueAgentId, @agentId, @companyCode, @lastChangeOperator, @LastChangeDate)
                    SET @returnValue = 8                
                END
    COMMIT TRANSACTION 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:57:01.033

我认为这：

```
ELSE
    BEGIN TRANSACTION 
```

需要是这样的：

```
ELSE
    BEGIN
        BEGIN TRANSACTION 
```

和这个：

```
COMMIT TRANSACTION 
```

需要是这样的：

```
 COMMIT TRANSACTION
END 
```

# ubuntu - git-svn 恢复本地提交的删除

> ID：12011312
> 
> 赞同：1
> 
> 时间：2012-08-17T18:33:05.503
> 
> 标签：ubuntu, git-svn

git-svn 目前让我发疯。

我跑了：

```
git rm <file>
git commit 
```

该文件仍在 svn repo 中，但我不知道如何将其检出以使其处于修订控制之下。我想在 svn 中做同样的事情：

```
rm <file>
svn update 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:44:35.173

如果您没有使用 将提交推送到 Subversion 存储库`git svn dcommit`，您可以使用`git reset --hard HEAD^`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:06:04.727

With `git commit` you commit removal locally. You should run `git svn dcommit` then, it's an analog of `git push`.

# xquery - XQuery：“toString 方法”包括元素

> ID：12011313
> 
> 赞同：0
> 
> 时间：2012-08-17T18:33:05.980
> 
> 标签：xquery

以下 xQuery 产生以下结果：

```
for $i in db:open('foo')/bar
return $i/geo 
```

结果：

```
<geo type="null"/>
<geo type="null"/>
<geo type="object">
   <type>Point</type>
   <coordinates type="array">
      <value type="number">41.00502344</value>
      <value type="number">29.05639393</value>
   </coordinates>
</geo> 
```

我想将结果作为字符串并附加一些信息，例如

```
for $i in db:open('foo')/bar
return concat("some text ", $i/geo) 
```

“问题”是，concat 方法以及其他一些“toString”方法删除了标签，结果如下所示：

```
some text  some text  some text Point41.0050234429.05639393 
```

我想要一个看起来像这样的结果：

```
some text <geo type="null"/>  some text <geo type="null"/> some text <geo type="object"> <type>Point</type> <coordinates type="array"> <value type="number">41.00502344</value> <value type="number">29.05639393</value> </coordinates></geo> ... 
```

是否有任何 xquery 函数可以保留元素的标签和信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:05:27.727

通过返回包含一些文本和地理元素的序列来替换 concat 函数调用，即

```
for $i in db:open('foo')/bar
return ("some text ", $i/geo) 
```

# javascript - 在网页源中搜索 url？

> ID：12011317
> 
> 赞同：0
> 
> 时间：2012-08-17T18:33:27.323
> 
> 标签：javascript, jquery

我正在寻找一种方法来搜索网页源中所有 url 格式的字符串并将它们放入数组中。我可以使用 Firebug 的控制台或类似的东西在任何页面上执行的东西。我不知道该怎么做。我尝试的一切都返回NULL。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:39:13.627

就像是：

```
document.body.innerHTML.match(/https?:\/\/[^'">\s]+/g); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:41:56.123

尝试这个 ：

```
var anchor_tags = document.getElementsByTagName("a");

var urls = [];
for(var i=0;i<anchor_tags.length;i++){
 urls.push(anchor_tags[i].href); 
}
console.log(ursl); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:29:30.207

对于 html 中的所有 url：

```
(function(){
    var allURLs = document.head.innerHTML.match(/https?:\/\/[^'">\s]+/g).join() 
                + document.body.innerHTML.match(/https?:\/\/[^'">\s]+/g).join();
    console.log(allURLs);
})() 
```

# jquery - CSS jQuery 动态边框高度

> ID：12011323
> 
> 赞同：0
> 
> 时间：2012-08-17T18:33:57.873
> 
> 标签：jquery, css

再会，

这个问题类似于：

[jQuery：计算表中的行数](https://stackoverflow.com/questions/1149958/jquery-count-number-of-rows-in-a-table)

我正在通过 XSLT 和 XML 创建一个 HTML 文档。页面的主要区域将包含一个表格，其中包含 3 列中的字母数字数据

```
[Column 1]              [Column 2]      [Column 3] 
```

问题是该表可以包含少至 5 行但多至 40 行。我需要在 div (line-item-info) 周围放置一个细实线边框。我知道 jQuery 可用于在页面加载后设置 DIV 的高度。

我的问题是：

是否可以在运行时设置边框的高度？上述链接适用于表格，但 DIV 呢？

我的 XSLT 模板包含以下定义：

```
<div id="line-item-info">
    <div class="bold itemColumns" style="width: 75px;">&nbsp</div>
    <div class="bold itemColumns" style="width: 325px;">Description</div>
    <div class="bold itemColumns" style="width: 150px;">Qty</div><br />

            <!-- this is each row //-->
    <div class="itemColumns" style="width: 75px;">&nbsp</div>
    <div class="itemColumns" style="width: 325px;">Office Call</div>
    <div class="itemColumns" style="width: 150px;">11.00</div>
</div> 
```

我还没有在行中放入 xsl，但这是一个示例模型，展示了一行的外观。

TIA,

科森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:43:40.733

you can, with jQuery, set a class, or a specific style to what ever element you want.

see [http://api.jquery.com/addClass/](http://api.jquery.com/addClass/) see [http://api.jquery.com/css/](http://api.jquery.com/css/)

# python - 在 python 中使用 absolute_import 和处理相对模块名称冲突

> ID：12011327
> 
> 赞同：6
> 
> 时间：2012-08-17T18:34:18.773
> 
> 标签：python, python-2.7

我真的希望这是我错过了复杂的 Python2 导入机制的一个简单案例。我有以下设置：

```
$> ls -ltr pypackage1 
total 3
-rw-r--r-- 1 pelson pelson   0 Aug 17 19:20 io.py
-rw-r--r-- 1 pelson pelson   0 Aug 17 19:20 __init__.py
-rw-r--r-- 1 pelson pelson  57 Aug 17 19:22 code.py
$> cat pypackage1/code.py 
from __future__ import absolute_import

import zipfile 
```

即我只有一个带有空`__init__.py`and`io.py`和 2 行`code.py`文件的存根包。

我可以导入`pypackage1`：

```
$> python -c "import pypackage1.code" 
```

但我无法运行该`code.py`文件：

```
$> python pypackage1/code.py
Traceback (most recent call last):
  File "pypackage1/code.py", line 3, in <module>
    import zipfile
  File "python2.7/zipfile.py", line 462, in <module>
    class ZipExtFile(io.BufferedIOBase):
AttributeError: 'module' object has no attribute 'BufferedIOBase' 
```

显然，问题与`zipfile`模块在内置模块上拾取我的相关 io 模块有关`io`，但我认为我`from __future__ import absolute_import`会解决这个问题。

提前感谢您的帮助，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T21:28:40.387

这是正确的行为。如果您想修复错误，请不要从包内部运行。

当您运行包内的脚本时，python 不会将该目录解释为包，从而将工作目录添加到`PYTHONPATH`. 这就是`io`模块导入的`zipfile`模块是您的`io`模块而不是标准库中的模块的原因。

我建议在您的包外（或在`bin/scripts`文件夹中）创建一个简单的启动器脚本，然后启动它。该脚本可以简单地包含以下内容：

```
from pypackage1 import code

code.main() 
```

* * *

另一种方法是告诉 python 解释器你要执行的文件是模块的一部分。您可以使用`-m`命令行选项执行此操作。在您的情况下，您必须这样做：

```
python -m pypackage1.code 
```

请注意，参数`-m`应该是*模块名*，而不是文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T20:47:14.800

一种解决方案是放入`from __future__ import absolute_import`模块`zipfile.py`。尽管*您的*模块使用绝对导入，但*zipfile*模块不是。

另一种选择是不从您的包目录运行。您可能不应该从包目录中运行解释器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T11:04:57.510

文件结构：

```
test.py
mylib/__init__.py
mylib/__collections.py
mylib/collections.py
mylib/mymod.py 
```

该解决方案允许：

*   test.py 调用 __builtin__.collections 和 mylib.collections
*   *mymod.py 调用上述内容，*无论是作为库的一部分运行还是独立运行（例如，用于测试代码）

在 test.py 中：

```
from collections import deque
from mylib.collections import mydict 
```

在 mylib/__init__.py 中：

```
from __future__ import absolute_import
from . import collections
from . import mymod 
```

在 mylib/__collections.py 中：

```
class MyDict (dict):
    pass 
```

在 mylib/collections.py 中：

```
from __collections import * 
```

在 mylib/mymod.py 中：

```
from __future__ import absolute_import
from collections import deque
try:
    # Module running as part of mylib
    from .collections import MyDict
except ValueError:
    # Module running independently
    from __collections import MyDict 
```

以上适用于 Python >=2.5。Python 3 不需要'from __future__ import absolute_import' 行。

# spring - Java EE 最佳设计方法。业务逻辑层？

> ID：12011330
> 
> 赞同：2
> 
> 时间：2012-08-17T18:34:35.167
> 
> 标签：spring, hibernate, jakarta-ee

我正在使用的项目使用 JSF + Spring + Hibernate。

这是我经常困惑的一个设计问题。

我目前继承了一个包含 dao -> 服务 -> 视图 -> 控制器“分层”方法的项目。

“控制器”层/层？目前拥有与前端交互的所有逻辑**和对象。**有人告诉我，最好**将**其分为两层/层，其中“控制器”层/层仅包含与前端交互的方法/对象，第二层（bm？）包含所有业务逻辑**由**控制器使用。

1st.) 以这种方式划分控制器的目的是什么？

2nd.) 让它保持现在的样子有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T05:20:24.660

`1st.) What would the purpose be of dividing up the controller in such a way?`

您必须处理`Service Layer`. 将业务实体从以下方面分离的好处`Controller/UI Layer`：

1.  您可以将业务实体与其他客户端部分重用。示例：如果您正在开发基于 Web 的应用程序作为 UI，那么稍后您还开发了桌面 UI。`Business Layer`在这种情况下，您可以使用多个 UI重用您的操作。您还可以将业务层用作 Web 服务。
2.  解耦的业务操作更易于管理。如果开发团队中的某个人不知道 UI 代码是如何工作的，并且只想更正一些业务逻辑，他可以做到。

`2nd.) Is there anything wrong with leaving it the way it currently is?`

如果您不熟悉分层架构，则需要一些时间来理解和实现所需的层。这取决于时间框架和应用程序要求。如果您打算在应用程序中使用上述几点，请使用分层架构，否则请使用当前实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T22:30:48.563

如果您问为什么拥有视图使用的服务层是个好主意，那么答案是您通常希望从与特定视图不同的应用程序部分访问服务。

例如，假设您有验证订单的逻辑，该订单最初主要用于某些 /order.xhtml 页面。将服务和相应的对象（比如订单）放在视图中不会损害该页面。

但是随后需要从批处理作业中进行订单验证。如果用于验证的代码与您的视图紧密耦合，这将是不可能的或非常困难的，并且很可能非常尴尬（我见过有人嘲笑 JSP `PageContext`，因为某些业务逻辑碰巧需要它）。

还有很多其他情况会出现这种情况，例如通过 JAX-RS 的外部 API、完全不同的视图（另一个用户的页面，或者可能是移动目标 UI）等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T11:40:27.190

业务逻辑层不应在服务层上实现。

DAO/服务层 -> 业务逻辑层 -> UI 控制器

-rico

# java - 如果用户线程已经完成工作，是否有任何技术可以强制守护线程完成某些任务？

> ID：12011331
> 
> 赞同：1
> 
> 时间：2012-08-17T18:34:35.720
> 
> 标签：java, multithreading

在我的主程序中，我正在运行 1 个用户线程，它的所有子线程都是守护线程。因此，当用户线程完成其工作时，所有守护线程也会终止。我正在守护线程中执行一些代码块，这些代码块必须在线程终止之前完成。

如果用户线程完成工作，是否可以在守护线程中等待特定的块执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:45:27.190

你可以用不同的方式实现这个

1.  使用 Thread.join();
2.  使用 Observer-Observable 模式
3.  使用 CountDownLatch

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:37:22.440

首先，如果一个线程确实需要某个代码块来完成执行，那么该线程并不是真正的守护线程。

[但是，要完成您的要求，您可以让主线程通过Thread#join()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)等待守护线程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T19:01:01.500

我认为这取决于您实际想要做什么：

1.  您希望避免恶魔线程在关键部分内被关闭。解决方案：恶魔线程在本节中获取读锁，而用户线程必须在死亡前获取写锁。
2.  您有一个相当独立的代码块要在关闭之前执行。解决方法：关闭钩子

    Runtime.getRuntime().addShutdownHook(new Thread() { public void run() { database.close(); } });

3.  你想优雅地关闭你的线程。解决方案：使用用户线程。打断他们以阻止他们。使用指定的解决方案之一等待。

项目符号 1 更详细：

它基于[ReadWriteLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html)。

```
// Demon
Lock l = readWriteLock.getReadLock(); 
l.lock(); // Will wait here if WriteLock is requested
try {
    // access the resource protected by this lock
} finally {
    l.unlock();
}

// User
Lock l = readWriteLock.getWriteLock(); 
l.lock(); // Will wait here until all readLock are unlocked
// no need to unlock. Dys anyway 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T18:39:13.347

您看过 CountDownLatch 或 Cyclic Barrier 吗？

[http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)

# c# - 使用 SQL Server 数据库进行搜索

> ID：12011338
> 
> 赞同：0
> 
> 时间：2012-08-17T18:35:19.773
> 
> 标签：c#, asp.net, web

我目前正在做一个网站项目，我几乎完成了，除了我需要让我的搜索工作。

我希望它像这样工作：在我的母版页上有一个`asp:textbox`和一个`asp:button`. 当我输入搜索词并单击我的按钮时，我希望它重定向到 search.aspx 页面 - 问题是，我不知道该怎么做。我只得到了方法，它看起来像这样

```
public DataTable Search(string Keyword)
{
    return db.GetData(
                 "SELECT fldTitle, fldLang, fldCode from tblSnipets LIKE @1", 
                 "%" + Keyword + "%");
} 
```

从那里我不知道该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:28:58.763

使用没有任何模式的经典 ASP.NET 和 PostBack 事件，它将如下所示：

1 - 将事件处理程序添加到按钮单击事件。

```
<asp:Button id="Button1" Text="Search" OnClick="SearchBtn_Click" runat="server"/> 
```

2 - 将 SearchBtn_Click 处理程序添加到页面的代码隐藏文件并重定向到您的搜索页面。它看起来像这样：

```
void SearchBtn_Click(Object sender, EventArgs e)
{

} 
```

3 - 在此事件处理程序中编写代码，使用搜索条件的参数重定向到 Search.aspx：

```
Response.Redirect("~/Search.aspx?criteria=" + Server.HtmlEncode(myTextBox.Text)); 
```

或接近此声明（查看 MSDN）

4 - 在 Page_Load 处理程序的 Search.aspx 代码后面的页面上，捕获参数并调用您的方法以获取数据。

这不是最好的解决方案，但它应该有效。

# html - 如何在 django 管理页面上创建锚点以自动从 url 向下滚动到内联或字段

> ID：12011339
> 
> 赞同：3
> 
> 时间：2012-08-17T18:35:20.153
> 
> 标签：html, django, django-admin, django-admin-tools

我有一个相当大的模型，在该模型的管理页面上，我有一些内联显示在底部。我希望能够链接到模型实例的管理页面，并自动向下滚动到内联，例如 /admin/myapp/modelname/pk/#inlinename

我什至不确定从哪里开始？如果有人能指出我正确的方向，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:47:44.817

每个内联都有一个 id 的形式`[related_name]-group`。如果您没有`related_name`在关系上指定 a ，那么默认的相关名称将采用`[lowercase model name]_set`.

因此，假设您与模型 有关系，`Foo`但没有`related_name`指定。内联的 id 将是`#foo_set-group`，您可以将其链接为锚点。

# jsf-2 - 复选框的条件渲染在 JSF 中不起作用

> ID：12011340
> 
> 赞同：0
> 
> 时间：2012-08-17T18:35:31.790
> 
> 标签：jsf-2

目前我有条件地在 outputPanel 中渲染复选框，但是当我选择它时，它的值没有在支持 bean 中更新。请帮助我如何解决这个问题。

请在下面找到代码：

```
<p:outputPanel rendered="#{dataBean.dataCleanModel.checkThresholdValueForStdDev(o)}">
<td><h:selectBooleanCheckbox value="#{o.checkBoxToAcceptTheRow}"/></td>
</p:outputPanel>

<p:outputPanel  rendered="#{!dataBean.dataCleanModel.checkThresholdValueForStdDev(o)}">
<td><h:selectBooleanCheckbox value="#{o.checkBoxToAcceptTheRow}" /></td>
</p:outputPanel> 
```

如图所示，更改复选框值对应的 setter 方法未被调用/更改的值未在 bean 中设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:48:13.947

`<f:ajax/>`如果您希望复选框立即将值设置为服务器，请使用

```
<h:form>
<p:outputPanel rendered="#{dataBean.dataCleanModel.checkThresholdValueForStdDev(o)}">
<td>
    <h:selectBooleanCheckbox value="#{o.checkBoxToAcceptTheRow}">
        <f:ajax/>
    </h:selectBooleanCheckbox>
</td>
</p:outputPanel>

<p:outputPanel  rendered="#{!dataBean.dataCleanModel.checkThresholdValueForStdDev(o)}">
<td>
    <h:selectBooleanCheckbox value="#{o.checkBoxToAcceptTheRow}">
        <f:ajax/>
    </h:selectBooleanCheckbox>
</td>
</p:outputPanel>
</h:form> 
```

# java - 如何在休眠中启用批量插入？

> ID：12011343
> 
> 赞同：14
> 
> 时间：2012-08-17T18:35:34.530
> 
> 标签：java, database, performance, hibernate, batch-processing

使用休眠，当我尝试启用批量插入时

```
 <property name="jdbc.batch_size">50</property> 
```

我得到以下输出：

```
 [...] cfg.SettingsFactory INFO  - JDBC batch updates for versioned data: disabled
 [...] cfg.SettingsFactory INFO  - Order SQL inserts for batching: disabled 
```

然后这个：

```
 [...] jdbc.AbstractBatcher DEBUG - Executing batch size: 1 
```

`batch size: 1`基本上从来没有。

我错过了一个设置吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-03-19T13:25:17.860

要为 INSERT 和 UPDATE 语句启用批处理，您需要设置以下所有 Hibernate 属性：

```
spring.jpa.properties.hibernate.jdbc.batch_size=30
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true 
```

如果您可以使用 a `SEQUENCE`，那么您不应该使用`IDENTITY`实体标识符生成器，​​因为它会禁用批量获取。

如果您不能使用`SEQUENCE`（例如 MySQL），那么请尝试使用单独的机制来启用批量插入（例如 JDBC），而不是使用`TABLE`无法扩展且具有高性能损失的生成器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T18:35:34.530

原来在这种情况下缺少的是：

```
<property name="order_inserts">true</property> 
```

参考：[https://forum.hibernate.org/viewtopic.php?p=2374413](https://forum.hibernate.org/viewtopic.php?p=2374413)，[https://stackoverflow.com/a/5240930/32453](https://stackoverflow.com/a/5240930/32453) 或者可能是 hibernate.order_inserts。

现在我明白了

```
 [...] cfg.SettingsFactory INFO  - Order SQL inserts for batching: enabled
 ...
 [...] Executing batch size: 2 
```

更频繁（任何大于 1 基本上意味着它成功地进行批量插入）。

hibernate.jdbc.batch_versioned_data 也可能有用。

jdbc:mysql://localhost:3306/batch?rewriteBatchedStatements=true 类型的连接字符串也可能以某种方式相关。

[https://forum.hibernate.org/viewtopic.php?p=2374413](https://forum.hibernate.org/viewtopic.php?p=2374413)并查看 [Hibernate 批量大小混淆](https://stackoverflow.com/questions/6687422/hibernate-batch-size-confusion)

# web-services - 使用多值 Web 服务，vb.net

> ID：12011346
> 
> 赞同：0
> 
> 时间：2012-08-17T18:35:42.333
> 
> 标签：web-services

我是使用asp 和webservice 技术的新手。我正在尝试读取 Web 服务并处理返回的数据。

我的 Web 服务返回许多字段，因此我正在寻找使用这些返回数据的最佳方式。

我的 Web 服务返回的 XML 如下所示：

```
<DataSet xmlns="http://tempuri.org/wsexportaproducto/Productos">
<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="NewDataSet">
<xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
<xs:complexType>
<xs:choice minOccurs="0" maxOccurs="unbounded">
<xs:element name="Exportacion">
<xs:complexType>
<xs:sequence>
<xs:element name="gtin" type="xs:string" minOccurs="0"/>
<xs:element name="gtinreemplazado" type="xs:string" minOccurs="0"/>
<xs:element name="refidcateglobal" type="xs:string" minOccurs="0"/>
<xs:element name="refidcatelocal" type="xs:decimal" minOccurs="0"/>
<xs:element name="gln" type="xs:string" minOccurs="0"/>
<xs:element name="glnfabricante" type="xs:string" minOccurs="0"/>
<xs:element name="nombrefabricante" type="xs:string" minOccurs="0"/>
<xs:element name="refpaismercado" type="xs:string" minOccurs="0"/>
<xs:element name="iniciovigenciadn" type="xs:dateTime" minOccurs="0"/>
<xs:element name="finvigenciadn" type="xs:dateTime" minOccurs="0"/>
<xs:element name="vida" type="xs:decimal" minOccurs="0"/>
<xs:element name="nomproducto" type="xs:string" minOccurs="0"/>
<xs:element name="marca" type="xs:string" minOccurs="0"/>
<xs:element name="descproducto" type="xs:string" minOccurs="0"/>
<xs:element name="descripcioncorta" type="xs:string" minOccurs="0"/>
<xs:element name="profundo" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidprofundo" type="xs:string" minOccurs="0"/>
<xs:element name="alto" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidalto" type="xs:string" minOccurs="0"/>
<xs:element name="ancho" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidancho" type="xs:string" minOccurs="0"/>
<xs:element name="pesobruto" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidpesobruto" type="xs:string" minOccurs="0"/>
<xs:element name="pesoempaque" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidpesoempaque" type="xs:string" minOccurs="0"/>
<xs:element name="contenidoneto" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidcontenidoneto" type="xs:string" minOccurs="0"/>
<xs:element name="escontenidovariable" type="xs:boolean" minOccurs="0"/>
<xs:element name="refembalaje" type="xs:string" minOccurs="0"/>
<xs:element name="esretornable" type="xs:boolean" minOccurs="0"/>
<xs:element name="factorestiba" type="xs:decimal" minOccurs="0"/>
<xs:element name="esunidadminima" type="xs:boolean" minOccurs="0"/>
<xs:element name="contenidos" type="xs:string" minOccurs="0"/>
<xs:element name="refpaisorigen" type="xs:string" minOccurs="0"/>
<xs:element name="variedadcolorcodigo" type="xs:string" minOccurs="0"/>
<xs:element name="variedadcoloragencia" type="xs:string" minOccurs="0"/>
<xs:element name="variedadcolor" type="xs:string" minOccurs="0"/>
<xs:element name="variedadtalleagencia" type="xs:string" minOccurs="0"/>
<xs:element name="variedadtallecodigo" type="xs:string" minOccurs="0"/>
<xs:element name="variedadtalle" type="xs:string" minOccurs="0"/>
<xs:element name="esunidadordenable" type="xs:boolean" minOccurs="0"/>
<xs:element name="cantminimapedir" type="xs:decimal" minOccurs="0"/>
<xs:element name="multiplopedir" type="xs:decimal" minOccurs="0"/>
<xs:element name="esfacturable" type="xs:boolean" minOccurs="0"/>
<xs:element name="esunidadembarque" type="xs:boolean" minOccurs="0"/>
<xs:element name="nrocapasartcomercial" type="xs:decimal" minOccurs="0"/>
<xs:element name="nroartcomercialesporcapa" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidadesporpallet" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidporcapa" type="xs:decimal" minOccurs="0"/>
<xs:element name="nrodecapas" type="xs:decimal" minOccurs="0"/>
<xs:element name="submarca" type="xs:string" minOccurs="0"/>
<xs:element name="variedadtipo" type="xs:string" minOccurs="0"/>
<xs:element name="oferta" type="xs:boolean" minOccurs="0"/>
<xs:element name="dscompania" type="xs:string" minOccurs="0"/>
<xs:element name="nombregen" type="xs:string" minOccurs="0"/>
<xs:element name="variedadsabor" type="xs:string" minOccurs="0"/>
<xs:element name="continentes" type="xs:string" minOccurs="0"/>
<xs:element name="reftiponivel" type="xs:string" minOccurs="0"/>
<xs:element name="esunidadconsumo" type="xs:boolean" minOccurs="0"/>
<xs:element name="pesoneto" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidpesoneto" type="xs:string" minOccurs="0"/>
<xs:element name="cantidadtotalcontenida" type="xs:decimal" minOccurs="0"/>
<xs:element name="reftipogtin" type="xs:string" minOccurs="0"/>
<xs:element name="esprivado" type="xs:boolean" minOccurs="0"/>
<xs:element name="statussecodat" type="xs:string" minOccurs="0"/>
<xs:element name="accion" type="xs:int" minOccurs="0"/>
<xs:element name="fechaaccion" type="xs:int" minOccurs="0"/>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:choice>
</xs:complexType>
</xs:element>
</xs:schema>
<diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
<NewDataSet xmlns="">
<Exportacion diffgr:id="Exportacion1" msdata:rowOrder="0">
<gtin>07500112045058</gtin>
<refidcateglobal>10005730</refidcateglobal>
<gln>7505000010064</gln>
<refpaismercado>484</refpaismercado>
<iniciovigenciadn>2012-08-09T00:00:00-05:00</iniciovigenciadn>
<finvigenciadn>4999-12-31T23:59:59-06:00</finvigenciadn>
<marca>PINTACOLOR</marca>
<descproducto>PINTACOLOR BLANCO</descproducto>
<descripcioncorta>PINTURA PINTACOLOR 18 L</descripcioncorta>
<profundo>40.000000000000000</profundo>
<unidprofundo>CM</unidprofundo>
<alto>60.000000000000000</alto>
<unidalto>CM</unidalto>
<ancho>40.000000000000000</ancho>
<unidancho>CM</unidancho>
<pesobruto>26.200000000000000</pesobruto>
<unidpesobruto>KG</unidpesobruto>
<unidpesoempaque>KG</unidpesoempaque>
<escontenidovariable>false</escontenidovariable>
<esretornable>false</esretornable>
<esunidadminima>true</esunidadminima>
<contenidos/>
<esunidadordenable>false</esunidadordenable>
<esfacturable>true</esfacturable>
<esunidadembarque>false</esunidadembarque>
<oferta>false</oferta>
<dscompania>DISTRIBUIDOR</dscompania>
<nombregen>PINTURA</nombregen>
<continentes/>
<reftiponivel>EA</reftiponivel>
<esunidadconsumo>false</esunidadconsumo>
<esprivado>false</esprivado>
<statussecodat>2</statussecodat>
</Exportacion>
</NewDataSet>
</diffgr:diffgram>
</DataSet> 
```

到目前为止，我已经能够阅读网络服务，这里是代码：

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Button1.Click
    Try
        Dim SerSyncfonia As Syncfonia.Productos
        SerSyncfonia = New Syncfonia.Productos()

        Dim v1 = "7505000010064"
        Dim v2 = "DISTRIBU"
        Dim v3 = "DISTRIBU"
        Dim v4 = ""
        Dim v5 = "7500112045058"

        Label1.Text = SerSyncfonia.ObtieneProducto(v1, v2, v3, v4, v5).ToString
    Catch ex As Exception
        Label1.Text = ex.Message.ToString
    End Try

End Sub 
```

按下 Button1 后，Label1.Text 得到的结果是“System.Data.DataSet”

所以，在我阅读了 Web 服务之后，我如何才能将这些数据存储在某个地方以便能够处理数据。例如，获取**nombregen**元素或**gtin**元素的值并将它们存储在某处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:09:04.550

通常，在使用 Web 服务时传递`DataSet`类或任何其他特定于 .NET 的类型是个坏主意。这使得它们只能由兼容的 .NET 版本（例如，不是 Java）使用。

但是，在您的情况下，有一个更简单的问题：即使成功传递了 DataSet，您究竟希望该`ToString`方法做什么？即使没有 Web 服务，`DataSet.ToString()`也不会产生有用的输出。

# algorithm - 未排序数组中的前 5 个元素

> ID：12011350
> 
> 赞同：4
> 
> 时间：2012-08-17T18:35:49.007
> 
> 标签：algorithm, language-agnostic

给出了一个未排序的数组，我们需要以一种有效的方式找到前 5 个元素，我们无法对列表进行排序。

我的解决方案：

*   找到数组中的最大元素。在）

*   处理/使用后删除此最大元素。

*   重复步骤 1 和 2，k 次（在这种情况下为 5 次）。

时间复杂度：**O(kn)** / **O(n)**，空间复杂度：**O(1)**。

**我认为我们可以在O(logN)**中找到最大元素，因此可以将其改进为**O(klogN)**。如果我错了，请纠正我。

我们能做得比这更好吗？我猜使用 max-heap 效率会低吗？

PS - 这不是任何作业。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T18:45:32.180

如果您可以使用辅助堆（顶部带有减号元素的最小堆），您可以在其中执行此操作`O(nlogm)`，其中`n`是列表长度和`m`要跟踪的最大元素数。

由于辅助堆具有固定的最大大小（5），我认为可以考虑对该结构进行操作`O(1)`。在这种情况下，复杂度是`O(n)`。

伪代码：

```
foreach element in list:
    if aux_heap.size() < 5  
        aux_heap.add(element)
    else if element > aux_heap.top()
        aux_heap.remove_top()
        aux_head.add(element) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T18:47:49.433

使用[部分快速排序](http://en.wikipedia.org/wiki/Partial_sorting)我们可以实现 O(n)，这不需要任何辅助空间。与其他解决方案一样，使用最大堆需要 O(n log k) 时间。

# javascript - 在 Firefox 中更改警报选项卡/窗口焦点

> ID：12011352
> 
> 赞同：1
> 
> 时间：2012-08-17T18:35:51.703
> 
> 标签：javascript, firefox, alert

所以我有一个有趣的问题。我有一个页面，允许用户从外部资源中选择图像 url。有问题的页面不是用 jquery modals 或其他东西做这件事，而是创建一个子窗口。然后，该子窗口可以调用父窗口上的 JS 函数来插入所述 URL。

现在，如果我们的用户碰巧选择了一些非常具体的设置，并且星星正好对齐，父页面将显示一个警告框，告诉他们“因为您选择了选项 A、E 和 F，我们必须更改选项 B 略。”

这是问题所在：firefox 不显示 Chrome 或 IE 之类的警报（带有 ok 框的单独窗口）。使用最新的 Firefox，警报会隐藏在子窗口下：![在此处输入图像描述](../Images/064fb36c4d582c9e86d2af85d6e22dc3.png)

对于此处的屏幕截图，我移动了子窗口，以便您可以在孩子下方看到警报。如果窗口没有移动，用户将看不到该框，并将继续尝试单击“完成”按钮，该按钮会再次触发相同的呼叫，一次又一次，等等。

有没有办法在警报出现时给父窗口焦点（不弄乱about：config）？我无法更改父函数，因为代码非常旧，并且如果恶意更改它有破坏事物的趋势（我不知道还有什么叫做该函数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:19:34.317

既然您无论如何都在来回传递信息，那么将该消息发送到子窗口并在那里提醒它不是更谨慎吗？

这将使您不必担心转移焦点和可能丢失窗口。

# php - 匹配字符和数字的正则表达式

> ID：12011356
> 
> 赞同：1
> 
> 时间：2012-08-17T18:36:09.853
> 
> 标签：php, regex

我想编写一个正则表达式来测试以下内容，以 abc 或 def 开头，后跟 0 到 900 之间的数字，然后可以有任何介于两者之间的数字，直到最近的数字。我在网上找到了代码。我将如何根据我的情况进行更改：

```
/\b[Z][0-9]{3,5}/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:47:25.330

```
/^(abc|def)([1-9]|[1-9][0-9])?[0-9]$/ 
```

似乎为我解决了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:54:02.647

```
/(abc|def)(([0-9])|([0-9][0-9]{0,1})|([0-8][0-9]{0,2})|(900))($|[^0-9][^(abc|def)]*)/ 
```

获取任何 "abc" 或 "def" 后跟 0 到 900 之间的数字，后跟至少一个非数字，然后是直到下一个 "abc" 或 "def" 之前的任何内容。这是你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:44:55.293

```
\a\{1,3}\d\{1,3} 
```

请尝试一下。它匹配最多 3 个字母和最多三个数字

```
\(abc\)\|\(def\)\d\{1,3} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T18:58:01.447

```
^(abc|def)(900|0|[1-8]?[0-9]{0,2})$ 
```

# android - 在 Eclipse Mobile Juno 中安装“Android M2e”插件或基本上是“Android Configurator for M2E 0.4.2”

> ID：12011357
> 
> 赞同：1
> 
> 时间：2012-08-17T18:36:18.190
> 
> 标签：android, eclipse-plugin, maven-plugin, m2eclipse

尝试安装[http://rgladwell.github.com/m2e-android/](http://rgladwell.github.com/m2e-android/)上给出的 Android M2e 插件，但没有成功。我收到“Android Configurator for M2E 0.4.2”的例外情况

**无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Android Configurator for M2E 0.4.2 (me.gladwell.eclipse.m2e.android.feature.feature.group 0.4.2) 缺少要求：Android Configurator for M2E 0.4.2 (me.gladwell.eclipse.m2e. android.feature.feature.group 0.4.2) 需要 'org.eclipse.persistence.moxy 2.1.0' 但找不到**

我正在为移动开发人员使用 Eclipse Juno。我尝试使用“Java EE Developers 的 Eclipse IDE”，它也给了我同样的错误。

这是我的日食信息

> **面向移动开发人员的 Eclipse 版本：Juno Release Build id：20120614-1722**

我也直接去github上的插件网站[https://github.com/rgladwell/m2e-android/blob/master/me.gladwell.eclipse.m2e.android.feature/feature.xml](https://github.com/rgladwell/m2e-android/blob/master/me.gladwell.eclipse.m2e.android.feature/feature.xml)发现需要以下插件

```
<requires>
      <import plugin="org.eclipse.core.runtime"/>
      <import plugin="org.eclipse.jdt.core" version="3.5.1" match="greaterOrEqual"/>
      <import plugin="org.eclipse.core.resources" version="3.5.0" match="greaterOrEqual"/>
      <import plugin="org.eclipse.jdt.launching" version="3.5.0" match="greaterOrEqual"/>
      <import plugin="org.eclipse.core.filesystem" version="1.2.0" match="greaterOrEqual"/>
      <import plugin="org.eclipse.ui.console" version="3.4.0" match="greaterOrEqual"/>
      <import plugin="org.eclipse.persistence.moxy" version="2.1.0" match="greaterOrEqual"/>
      <import plugin="javax.xml.bind"/>
      <import plugin="org.eclipse.osgi"/>
      <import feature="org.eclipse.m2e.feature" version="1.0.200.20111228-1245"/>
      <import feature="com.android.ide.eclipse.adt" version="17.0.0.v201203161636-291853"/>
   </requires> 
```

有谁知道如何安装**org.eclipse.persistence.moxy**插件？我怀疑这必须与其他一些插件捆绑在一起。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T14:57:44.277

我有同样的问题。

当我在 Window > Preferences > Install/Update 中检查“可用软件站点”时，所有 Juno 软件站点都消失了！我不知道为什么会发生这种情况，但这就是 Eclipse 无法解决缺少的依赖项的原因。

最简单的解决方案是在“可用软件站点”中添加回 Juno 存储库：

*   名称：Eclipse Juno 存储库
*   位置：http: [//download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:43:24.250

试试这个[面向 Java EE 开发人员的 Eclipse IDE](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junorc3) 这个版本的 Eclipse 包含所有必需的 jar 和插件。

# c# - 线程化，让一个线程知道其他线程的进度

> ID：12011358
> 
> 赞同：0
> 
> 时间：2012-08-17T18:36:29.913
> 
> 标签：c#, multithreading, textbox

好的，我已经有一段时间了，我决定只使用线程。我正在制作一个语法荧光笔，但是对于通常使用的文件大小，我的性能一直很糟糕。所以我做了两个表格，第一个以纯文本形式显示文件，当你点击我开始一个新线程时，有一个按钮显示“openincolor”

```
 private void button1_Click(object sender, EventArgs e)
    {
        ColoringThread colorer = new ColoringThread(this.m_bruteView.Text);
        Thread theThread = new Thread(new ThreadStart(colorer.OpenColorWindow));
        theThread.Start();
    }

    public class ColoringThread
    {
        string text;
        public ColoringThread(string initText)
        {
            text = initText;
        }
        public void OpenColorWindow()
        {
            Form2 form2 = new Form2(text);
            form2.ShowDialog();
        }
    }; 
```

我希望此表单在每次完成说 x 行着色时发回一条消息。然后我会接受它并找出进度并将其显示给用户。

我该如何向我的第一个表单发送消息或事件（...？我可以这样做）以让它知道其他人的进度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:38:53.043

一种非常简单的方法是使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。它已经提供了[一个事件](http://msdn.microsoft.com/en-us/library/ka89zff4.aspx)来报告进度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:50:03.887

这样的事情怎么样？这会向调用类订阅的 ColoringThread 类添加一个事件。

```
private void button1_Click(object sender, EventArgs e) {
    ColoringThread colorer = new ColoringThread(this.m_bruteView.Text);
    colorer.HighlightProgressChanged += UpdateProgress;
    Thread theThread = new Thread(new ThreadStart(colorer.OpenColorWindow));
    theThread.Start();
}

private void UpdateProgress(int linesComplete) {
    // update progress bar here
}

public class ColoringThread
{
    string text;

    public delegate void HighlightEventHandler(int linesComplete);
    public event HighlightEventHandler HighlightProgressChanged;

    public ColoringThread(string initText) {
        text = initText;
    }

    public void OpenColorWindow() {
        Form2 form2 = new Form2(text);
        form2.ShowDialog();

        int linesColored = 0;
        foreach (String line in text.Split(Environment.NewLine)) {
            // colorize line here

            // raise event
            if (HighlightProgressChanged != null)
                HighlightProgressChanged(++linesColored);
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:40:13.160

您可以将对象作为参数传递给 Thread.Start 并在当前线程和启动线程之间共享您的数据。

* * *

这是一个很好的例子： [How to share data between different threads In C# using AOP?](https://stackoverflow.com/questions/1360533/how-to-share-data-between-different-threads-in-c-sharp-using-aop)

* * *

或者您可以使用具有 ReportProgress 的 BackgroundWorker

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T18:51:21.897

您需要的是 System.Windows.Threading.Dispatcher 的[BeginInvoke](http://msdn.microsoft.com/en-us/library/ms591206.aspx)方法。您不能直接从后台线程修改 WPF 对象，但是您可以调度委托来执行此操作。

在派生的 Window 类对象中，您有 Property Dispatcher，因此您可以按如下方式使用它：

```
Dispatcher.BeginInvoke(
  DispatcherPriority.Normal,
  (status) => { StatusTextBox.Text = status },
  thestatus
); 
```

很抱歉，我目前无法对其进行测试，而且我在这里没有项目，我在那里做的。但我相信它会起作用，祝你好运；）

更新：哎呀，你正在使用表单的......我写过关于 WPF 的文章，抱歉。

# jwplayer - 带有 vimeo 插件的 jwplayer

> ID：12011360
> 
> 赞同：1
> 
> 时间：2012-08-17T18:36:37.810
> 
> 标签：jwplayer, vimeo

我们使用旧版本的 JWPlayer 和没有问题的 vimeo 插件已经有一年左右的时间了，但它就停止了工作。所以，现在我正在尝试迁移到两者的最新版本......但我也无法让它们工作。

我一直在尝试让这个插件（https://sourceforge.net/projects/jwplayervimeo/）与最新的 JWPlayer（5.10）一起工作

这是我的测试，但它只是旋转并且从不播放视频

[http://encoded.skateboard.tv.s3.amazonaws.com/dogboarding.htm](http://encoded.skateboard.tv.s3.amazonaws.com/dogboarding.htm)

Vimeo 最近是否有什么变化导致了这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:33:57.940

不管出于什么原因，这个插件又开始工作了……一定是 Vimeo 的间歇性问题

# ruby-on-rails - 除了主文件夹，我无法从其他任何地方运行 rails

> ID：12011363
> 
> 赞同：0
> 
> 时间：2012-08-17T18:37:01.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem

我遇到了这个奇怪的问题

```
[user@host folder]$ rails -v
LoadError: no such file to load -- active_support/core_ext/object/inclusion
  require at org/jruby/RubyKernel.java:1033
(root) at /opt/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-        3.2.6/lib/rails/commands.rb:1
 require at org/jruby/RubyKernel.java:1033
 (root) at script/rails:6 
```

接着

```
[user@host ~]$ rails -v
Rails 3.2.8 
```

这几天一直很麻烦。我已经看到了 $PATH，我运行了“whichrails”，这两种情况都是一样的。当 iam 在“文件夹”目录中时，为什么我不能运行 atleast rails -v？另外，我无法启动服务器或运行 rails new blog，并且一直说这个 active_support 错误。

任何关于此的建议都会非常有帮助

# php - 显示损坏图像的imagepng的PHP问题

> ID：12011364
> 
> 赞同：1
> 
> 时间：2012-08-17T18:37:03.673
> 
> 标签：php, brokenimage

我正在尝试创建一个还缓存图像的动态图像生成器。

一切正常，除了出于某种原因，当我保存图像并尝试同时显示它时，它显示一个损坏的图像图标（如：[http](http://cl.ly/image/3K1f0R0n1R0U) ://cl.ly/image/3K1f0R0n1R0U ）。

代码示例：

```
// some string parsing junk happens up here, but removing that didn't change 
// what I've been having a problem with

header("Content-type: image/png;");

if(file_exists($fullFileName)){ // serve the file if it already exists
    ob_clean();
    flush();
    readfile($fullFileName);
    exit;
} else { // create the file if it doesn't exist
    $my_img = imagecreate(200, 80);
    $background = imagecolorallocatealpha($my_img, 0, 0, 0, 127);
    $line_colour = imagecolorallocatealpha($my_img, $color["r"], $color["g"], $color["b"], $color["a"]);

    imagesetthickness($my_img, 1);
    imageline($my_img, 30, 45, 165, 45, $line_colour);

    //////////////////////////////////////////
    // the line that's causing my troubles: //
    //////////////////////////////////////////
    imagepng($my_img, $fullFileName);

    imagecolordeallocate($line_color);
    imagecolordeallocate($background);
    imagedestroy($my_img);
} 
```

因此，图像创建得很好，保存得很好，并且在我刷新页面时完全按照我想要的方式显示（因为它会抓取保存的文件）。

如果我将上面那条该死的线切换为：

```
imagepng($my_img); 
```

然后图像显示得很好，但它没有保存（因为我没有告诉它）。

我以为这个话题：

[PHP 回显 jpeg 图像失败，但将相同的图像写入文件效果很好。为什么？](https://stackoverflow.com/questions/3854493/php-echoing-jpeg-image-fails-but-writing-same-image-to-file-works-great-why)

听起来很相似，但删除尾随空格仍然没有改变正在发生的事情。其他线程提到它可能是在标题之前发送其他内容的问题，但在这个文件中没有类似的东西。

关于可能出现问题的任何想法？没有记录错误，我没有想法。

谢谢！

-扎克

**编辑：**

有人解释说我正在破坏我的形象，我错过了。我最终使用了这个：

```
header("Content-type: image/png");

if(!file_exists($fullFileName)) {
    $my_img = imagecreate($dashWidth + $dashSpace, $height);
    $background = imagecolorallocatealpha($my_img, 0, 0, 0, 127);
    $line_colour = imagecolorallocatealpha($my_img, $color["r"], $color["g"], $color["b"], $color["a"]);

    imagesetthickness($my_img, 1);
    imageline($my_img, 0, $height-1, $dashWidth-1, $height-1, $line_colour);

    imagepng($my_img, $fullFileName);
    imagecolordeallocate($my_img, $line_color);
    imagecolordeallocate($my_img, $background);
}

ob_clean();
flush();
readfile($fullFileName);
exit; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T18:48:23.510

你的意思是

```
header("Content-type: image/png"); // without ; 
```

而且，你正在破坏你的形象，再次阅读文件

```
readfile($fullFileName); 
```

因为`imagepng($my_img, $fullFileName);`只保存它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T18:41:37.043

从说明书来看，`imagepng`

> 从给定图像输出*或*保存 PNG 图像

注意“或”。尝试两次调用`imagepng`. 一次调用将其保存到文件，一次调用不带文件名参数将图像输出到浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:45:49.387

尝试使用文本编辑器打开图像。关闭 error_reporting。给你看破碎的形象。

# jquery - 使用 Backbone 或为此编写一个 jQuery 插件......或两者兼而有之？

> ID：12011368
> 
> 赞同：0
> 
> 时间：2012-08-17T18:37:18.337
> 
> 标签：jquery, backbone.js

我确信这个功能已经作为一个 jQuery 插件存在。

假设我想创建一个“转移”控件，就像[这样](http://www.ajaxblender.com/wp-content/uploads/2009/09/easy-multi-select-transfer-with-jquery.jpg)。我有两个文本框，我想通过按钮在两者之间传输数据。

我在我的 Web 应用程序中大量使用 Backbone.js。

我可以通过 Backbone 视图 + 集合来做到这一点，或者我可以编写一个 jQuery 插件来处理这个问题。如果我编写一个 jQuery 插件，我可能会在 Backbone 视图中与它交互，以便将事物模块化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:47:12.877

这可以通过一个非常简单的 jQuery 函数来完成：

```
$('.transfer').on('click',function(){
    $($(this).data('from'))
        .find(':selected')
        .remove()
        .appendTo($(this).data('to'))
        .prop('selected',false);
}); 
```

假设以下 HTML：

```
<select id="one" multiple>
    <option>a</option>
    <option>b</option>
    <option>c</option>
    <option>d</option>
</select>
<select id="two" multiple></select>

<button class="transfer" data-from="#one" data-to="#two">&raquo;</button>
<button class="transfer" data-from="#two" data-to="#one">&laquo;</button> 
```

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/jackwanders/GsZ9N/)

你可以用它创建一个小的 jQuery 插件，给它两个`select`元素并让它创建传输按钮和功能，但它也可以作为一个函数使用。使用插件，您还可以添加更复杂的功能，例如在`option`元素来回移动时保持元素的原始顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:49:39.117

您可以使用 jQuery-UI droppable：http: [//jqueryui.com/demos/droppable/#propagation](http://jqueryui.com/demos/droppable/#propagation)

在 drop 事件中，您可能希望查看被删除的元素，并从以前的集合中执行 Backbone .remove 并在接收集合中执行 .add ：

```
// Store a unique id of each item on the corresponding DOM element.
// ex. <div data-id="4129"></div>

$( ".selector" ).bind( "drop", function(event, ui) {
  // Look at the id and do a Collection.where() call to retrieve a reference to it.
  // Perform the .remove and the .add with that reference.
}); 
```

# oracle - DbContext 存储过程 oracle 11g

> ID：12011373
> 
> 赞同：0
> 
> 时间：2012-08-17T18:38:20.703
> 
> 标签：oracle, entity-framework, stored-procedures, parameters, dbcontext

我正在尝试执行具有多个输入/输出参数的存储过程。这就是使用 SQLServer 执行此操作的预期方式。

```
using (Context)
        {
            const string xml = "<test><testc>testing</testc></test>";
            var userIdParam = new SqlParameter { ParameterName = "I_USER_ID", Value = user.ID };
            var dtsParam = new SqlParameter { ParameterName = "I_DTS", Value = DateTime.Now };
            var timeoutParam = new SqlParameter { ParameterName = "I_TIMEOUT", Value = DateTime.Now };
            var xmlParam = new SqlParameter { ParameterName = "I_XML", Value = xml };
            var sessionIdParam = new SqlParameter { ParameterName = "O_SESSION_ID", Value = "", Direction = ParameterDirection.Output };

            var result =
                Context.Database.SqlQuery<string>(
                    "DALLEN.SP_INSERT_SESSION I_USER_ID, I_DTS, I_TIMEOUT, I_XML, O_SESSION_ID out", 
                    userIdParam,
                    dtsParam, 
                    timeoutParam, 
                    xmlParam, 
                    sessionIdParam);
        } 
```

不幸的是，这不适用于 oracle。我知道可以使用 ref 游标代替 out 参数，但这不是我自己的问题。有没有使用 dbcontext.database.sqlquery 将参数传递给存储过程的好方法？

**编辑**

查询尝试执行时收到错误消息。它解释说它不接受 sqlParamters，所以我将它们更改为 OracleParamters，但这也不起作用。

*“无法将‘System.Data.SqlClient.SqlParameter’类型的对象转换为‘Oracle.DataAccess.Client.OracleParameter’类型。”*

程序：

```
CREATE OR REPLACE PROCEDURE DALLEN.SP_INSERT_SESSION (
  I_USER_ID                   IN       NUMBER,
  I_DTS                       IN       DATE,
  I_TIMEOUT                   IN       DATE,
  I_XML                       IN       VARCHAR2,
  O_SESSION_ID                OUT      NUMBER
)
AS
BEGIN
  SELECT S_SESSION.NEXTVAL
    INTO O_SESSION_ID
    FROM DUAL;

  INSERT INTO DALLEN.SYS_SESSION
              (ID, USER_ID, DTS, TIMEOUT, XML)
       VALUES (O_SESSION_ID, I_USER_ID, I_DTS, I_TIMEOUT, I_XML);
END; 
```

先感谢您！

# c# - 实施搜索合同 - 增量搜索行为可能吗？

> ID：12011374
> 
> 赞同：0
> 
> 时间：2012-08-17T18:38:22.940
> 
> 标签：c#, windows-8, microsoft-metro

我最近在我以前称为 Metro 应用程序中实现了搜索合同，我很惊讶在搜索窗格中输入并没有在我的应用程序的搜索结果页面中产生增量过滤行为。

有谁知道这是否可能？是否有一些我需要覆盖的方法，或者搜索不存在这种行为？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:03:31.947

是的。您可以挂钩[SuggestionRequeted 事件](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.applicationmodel.search.searchpane.suggestionsrequested.aspx)并在用户键入时提供搜索建议。[请参阅本快速入门](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868180%28v=win.10%29.aspx)中的“添加搜索建议” 。 [此示例](http://code.msdn.microsoft.com/windowsapps/Search-app-contract-sample-118a92f5)还显示了几种不同的提出建议的方式。

根据评论：在“搜索结果”页面 (SearchResults.xaml.cs) 上，将过滤代码添加到 Filter_SelectionChanged 事件处理程序，并将 DefaultViewModel 上的结果设置为您过滤的内容。一个例子在[这里](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/bc2932b7-78ce-4555-ab7c-b752d7422636)。

# c++ - KDevelop4 调试 {...} 无法展开

> ID：12011378
> 
> 赞同：3
> 
> 时间：2012-08-17T18:38:32.697
> 
> 标签：c++, linux, debugging, ide, kdevelop

我正在使用 KDevelop4 进行调试，它并不总是在其变量窗口中显示类型，而且它的显示`{...}`而不是展开数据。有什么办法展开吗？并查看所有变量的类型？

![](../Images/78a0bf3f843f47fae2bda6c99534b6f1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:44:10.773

KDevelop 支持[gdb 漂亮的打印机](http://sourceware.org/gdb/onlinedocs/gdb/Pretty-Printing.html)，以便更漂亮地显示可变内容。如果`matrix`是你自己的课，你可以自己写一个漂亮的打印机。如果你使用一些库，你可能会找到漂亮的打印机——或者自己也写一个。

请注意，在调试 gdb cli 时，gdb 漂亮的打印机也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T15:53:58.793

我刚刚在 gdb 中启用了漂亮的打印机，现在也遇到了这个问题。您可以通过禁用漂亮的打印机来解决此问题。检查`/etc/gdb/gdbinit/`和`~/.gdbinit`。然后您可以展开`_matrix`以查看`std::map`实现变量。尽管我怀疑它们会非常有用。

# google-apps-script - 使用脚本将工作表选项卡移动到最左侧

> ID：12011386
> 
> 赞同：5
> 
> 时间：2012-08-17T18:39:15.967
> 
> 标签：google-apps-script, google-sheets

是否可以有一个小脚本来重新排列工作表选项卡的顺序，将当前选定的工作表选项卡移动到 Google 电子表格中所有选项卡的最左侧（开头）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T19:34:48.527

是和否。它可以通过甜蜜的名字来完成，但不能通过您正在查看的当前工作表来完成。下面是我编写的一些代码，它每天都会将糖果移到第一个位置。

```
function tab() { 

  var reportDate = new Date();
  var tabName = Utilities.formatDate(reportDate, 'MST', 'yyyy-MM-dd').toString(); 
  var tab = SpreadsheetApp.getActiveSpreadsheet().getSheetByName(tabName);
  SpreadsheetApp.setActiveSheet(tab);
  SpreadsheetApp.getActiveSpreadsheet().moveActiveSheet(1);

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T19:59:47.613

```
function BacktotheFront() {
   SpreadsheetApp.getActiveSpreadsheet().moveActiveSheet(1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-19T15:26:50.513

这会在名为“移动选项卡”的菜单中添加两个菜单项，这会将当前选项卡移动到最左侧或最右侧。

```
function onOpen() {
  var ui = SpreadsheetApp.getUi();
  ui.createMenu('Move Tabs')
    .addItem('Move Current Sheet To Far Left', 'moveCurrentToFarLeft')
    .addItem('Move Current Sheet To Far Right', 'moveCurrentToFarRight')
    .addToUi();
}

function moveCurrentToFarRight() {
  var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  var sheets = spreadsheet.getSheets();
  spreadsheet.moveActiveSheet(sheets.length);
}

function moveCurrentToFarLeft() {
  var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  spreadsheet.moveActiveSheet(1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-30T21:17:18.793

对于正在寻找一种方法将工作表移动到最左边或最右边而不向工作表添加脚本的任何人。我为此构建了一个附加组件：[https ://workspace.google.com/marketplace/app/sheet_mover/797282136202](https://workspace.google.com/marketplace/app/sheet_mover/797282136202)

# javascript - 根据屏幕尺寸确定设备？

> ID：12011390
> 
> 赞同：0
> 
> 时间：2012-08-17T18:39:36.077
> 
> 标签：javascript, mobile

我想要一个主要的桌面网站，并能够重定向到移动和电视网站。我在网上找到了一些移动网站的代码，但我不知道如何为电视做。以下是手机版：

```
<script type="text/javascript">
if (screen.width <= 699) {
document.location = "index-mobile.html";
}
</script> 
```

我对电视的想法是`screen.width >= 1280`（720p 的标准宽屏宽度），但即使是最小的电脑屏幕也会包含在其中。有没有办法在不使用用户代理的情况下做到这一点，因为我想包括所有游戏机、机顶盒、智能电视等，而且我无法为每个用户代理。我想过这样做`screen.height == 720 or screen.height == 1080`，但这将包括一些显示器并排除一些国际电视。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:48:35.513

您可以使用以下方法来实现您的目标：

[http://modernizr.com/](http://modernizr.com/)

Modernizr 是一个特征检测库。与设备检测相比，实现特征检测通常是更好的做法。

由于有大量的可能性，我建议不要使用屏幕高度和宽度。如果您重新考虑基于特征进行区分的方法，您也许可以依靠 Modernizr 之类的层来为您处理复杂性。

**例子**

这是 Modernizr 使用媒体查询的示例：

```
if(Modernizr.mq("only handheld") === true){
  //Redirect to mobile site
}else if (Modernizr.mq("only tv") === true){
  //Redirect to TV
}else{
  //Anything else to the desktop
} 
```

这是一个媒体查询参考。我不确定对我使用的媒体查询的支持，但如果你看看下面的内容，你可能会为你完成这项工作。

[https://developer.mozilla.org/en-US/docs/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:19:13.273

我最近不得不处理与移动设备上的屏幕尺寸有关的类似问题。51Degrees.mobi 有一个可以处理屏幕大小检测的开源 Java 解决方案。API 很容易实现，他们在[这里](http://51degrees.mobi/Support/Documentation/Java.aspx?CATReferrer=1765)有一个指南。我基本上修改了他们指南中的代码来处理屏幕大小：

```
public static void main(String[] args) {
    Provider p = null;
    try {
        p = Reader.create();
    } catch (BinaryException e) {
        e.printStackTrace();
    }

    BaseDeviceInfo b = p.getDeviceInfo("ENTER USERAGENT HERE");
    String width = b.getFirstPropertyValue("ScreenPixelsWidth");
    String height = b.getFirstPropertyValue("ScreenPixelsHeight");
} 
```

这将为您提供 x 和 y 屏幕分辨率值，然后您可以使用它们。我相信他们的高级版本可以检测到电视/游戏机。希望这可以帮助。

# ruby-on-rails-3 - Rails 资产管道和咖啡脚本文件，如何将各种文件中的操作绑定到 ajax 调用？

> ID：12011393
> 
> 赞同：1
> 
> 时间：2012-08-17T18:39:42.587
> 
> 标签：ruby-on-rails-3, coffeescript, asset-pipeline

使用rails 3资产管道，我将javascript（通过使用coffeescript）构建到有关模型的文件中。例如，所有与评论编写相关的 javascript 都存储在 /app/assets/javascripts/comments.js.coffee 中，而用户覆盖相关（获取 a:href 并在其上触发 ajax）存储在 /app/assets/javascripts/users .js.咖啡。

但是，现在我使用越来越多的 AJAX 调用，其中 HTML 内容被动态拉到站点。问题是我需要在各种文件中执行 javascript，但由于咖啡脚本的范围是函数内部，我无法访问它们。

假设我有一个带有以下代码的 general.js.coffee 文件

```
$(document).ready ->
  # Parse all images with action
  $("img.clickableaction").click ->
    # Fetch some content
    $.ajax
      url: "something.php"
      dataType: "html"
      complete: (xhr, status) ->
        # We got the content, set it up to a container
        $("#somecontainer").html(receiveddata)

        # The tricky part:

        # run code in comments.js.coffee for #somecontainer (or for the whole dom)
        # run code in users.js.coffee for #somecontainer (or for the whole dom) 
```

例如，comments.js.coffee 包含以下内容：

```
$(document).ready ->
  commentDiv = $('div#commentsContainer')
  commentsFetch = $('a.commentsFetch')

  # Set commentid for comments fetch
  commentsFetch.bind 'ajax:beforeSend', (event, xhr, settings) ->
    # do stuff 
```

comments.js.coffee 代码适用于初始页面视图，例如当用户加载页面时收到的 HTML 代码。但现在，我需要解析从 ajax 调用返回的内容的 comments.js.coffee 代码。

我无法在 comments.js 中创建函数，因为它的范围很广，无法从 general.js 访问。这是咖啡脚本产生的：

```
(function() {

  $(document).ready(function() {
    var commentDiv, commentsFetch;
    commentDiv = $('div#commentsContainer');
    commentsFetch = $('a.commentsFetch');
  }
}) 
```

我*可以*为每个单独的文件创建一个全局函数，例如window.comments && window.users，但是我需要从许多需要ajax oncomplete 调用的地方调用window.comments。从长远来看，这将产生重复且难以维护的代码。

怎么可能做出这样的事情：

```
// comments.js
window.ajaxExecuteBlocks.push(function() { // comments related stuff });

// user.js
window.ajaxExecuteBlocks.push(function() { // user related stuff });

// general.js ajax on complete:
window.runExecuteBlocks() 
```

然后，runExecuteBlocks 将以某种方式运行已在各种特定于控制器的 javascript 文件中初始化的所有函数。

有人实施过类似的系统吗？

# c++ - 如何隐藏 SHLD 延迟？

> ID：12011394
> 
> 赞同：1
> 
> 时间：2012-08-17T18:39:44.907
> 
> 标签：c++, optimization, assembly, x86, micro-optimization

我有一个简单的位读取器，它使用`SHLD`指令（[__shiftleft128](http://msdn.microsoft.com/en-us/library/szzkhewe.aspx)）来读取位流。

这很好用。但是，我一直在做一些分析，我注意到指令之后的任何指令都`SHLD`需要很多时间。

```
 Assembly                    CPU Time    Instructions Retired
add r10b, r9b                   19.000ms    92,000,000
cmp r10b, 0x40                  58.000ms    180,000,000
jb 0x140016fa6 <Block 24>       
        Block 23:       
and r10b, 0x3f                  43.000ms    204,000,000
mov r15, r11                    30.000ms    52,000,000
mov qword ptr [rbp+0x20], r11       
add rbx, 0x8                    16.000ms    78,000,000
mov qword ptr [rbp+0x10], rbx       
mov r11, qword ptr [rbx]        6.000ms     44,000,000
bswap r11                       2.000ms 
mov qword ptr [rbp+0x28], r11   8.000ms     20,000,000
        Block 24:       
mov rdx, r15                    61.000ms    208,000,000
movzx ecx, r10b                 1.000ms     6,000,000
**shld** rdx, r11, cl           24.000ms    58,000,000
inc edi                       **127.000ms** 470,000,000 
```

`inc`正如您在指令上表中所见，该`shld`指令占用了大量时间（8% CPU 时间）。

我想更多地了解为什么会出现这种情况以及如何避免这种情况？是否有任何指令可以与 cpu 级别的 shld 并行运行？

我记得在一些 AMD 优化手册中读到过`shld`，但我再也找不到了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:08:31.410

很难说，但似乎延迟是一些异常处理例程的结果。

**行为**

但是，英特尔手册指定了`shld`调用未定义响应的几种情况：-

> 目的操作数可以是寄存器或内存位置；源操作数是一个寄存器。计数操作数是一个无符号整数，可以存储在立即字节或 CL 寄存器中。如果计数操作数是 CL，则移位计数是 CL 和计数掩码的逻辑与。在非 64 位模式和默认 64 位模式下；仅使用计数的 0 到 4 位。这会将计数屏蔽为 0 到 31 之间的值。**如果计数大于操作数大小，则结果为 undefined**。
> 
> 如果计数为 1 或更大，则 CF 标志用移出目标操作数的最后一位填充，并且根据结果的值设置 SF、ZF 和 PF 标志。对于 1 位移位，如果发生符号更改，则设置 OF 标志；否则，它被清除。对于大于 1 位的移位，OF 标志未定义。如果发生移位，则 AF 标志未定义。如果计数操作数为 0，则标志不受影响。**如果计数大于操作数大小，则标志为 undefined**。

**shld 例外**：-

```
In Protected Mode --> #GP(0),#SS(0),#PF(fault-code),#AC(0),#UD 
```

UPDATE:: Gotcha:-->
首先定义：-

> **Instructions Retired** — 事件选择 C0H，Umask 00H
> 此事件计算退出时的指令数。对于由多个微操作组成的指令，此事件计算指令的最后一个微操作的退出。带有 REP 前缀的指令算作一条指令（不是每次迭代）。多操作指令的最后一个微操作退出之前的故障不计算在内。
> 此事件在 VM 退出条件下不会增加。 **计数器在硬件中断、陷阱和内部中断处理程序期间继续计数**。

`inc edi **127.000ms**` **470,000,000**（指令退出）
从上面的定义中可以清楚地看出，要么这条指令进入了太多的微操作，要么同时运行了一些中断处理程序。

# javascript - 具有模块自治的 Javascript 单页架构

> ID：12011395
> 
> 赞同：1
> 
> 时间：2012-08-17T18:39:46.060
> 
> 标签：javascript, jquery

我刚刚开始了这个 HTML5 项目，我们决定通过利用 jQuery 的 $.load() 方法使其成为单页架构。不幸的是，一旦 JS 开始增长，我们很快就开始遇到加载到主仪表板中的模块不知道其父级的问题。

架构如下所示：

dashboard.html（主文件）
moduleA.html
moduleA.js
moduleB.html
moduleB.js
moduleC.html
moduleC.js

由于我们决定将 JS 保留为单独的文件，因此我们必须通过 dashboard.html 加载所有 JS 文件，以便在加载 modulex 时单独调用它们。

因此，当将 moduleA.html 加载到仪表板中时，我们必须调用其对应的 JS。为此，我们只需使用模块模式编写 JS，这样我们就可以通过函数调用轻松调用它，例如：

```
<脚本>

模块A

</脚本>

```

或者如果我们想访问该成员的特定属性，则为 this。

```
<脚本>

模块A.someMethod();

</脚本>

```

现在，我知道必须有更好的方法来做到这一点，对吧？我讨厌必须在 HTML 模块中有脚本标签才能加载其相应的 JS 文件。

另一个限制是我们不再可以单独处理模块，因为脚本和 CSS 调用发生在父级 (dashboard.html) 上，所以当 moduleA.html 直接加载时，它是纯 HTML，没有脚本或CSS。

我查看了其他问题，但没有看到任何人有同样的问题。

我查看了 AngularJS、EmberJS、KO.JS 和 BoilerPlateJS，但它们都没有解决我们想要完成的任务。唯一具有类似单页概念的是 jQuery Mobile，但我不知道您是否可以从 jQuery 切换到 jQuery Mobile，并且一切正常。

有没有人面临这个问题？是否有解决方案，或者我必须使用自定义解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:59:41.610

我可以和你争论 AngularJS。这正是您所需要的

`ng-view`dashboard.html 是附加了一些指令的布局，但如果你使用指令，则权力在于 AngularJs

这是示例：

**仪表板.js**

```
var app = angular.module("modularApp",[]);
app.config(['$routeProvider', "$locationProvider", function routes($routeProvider, $locationProvider) {
    $routeProvider.when('/dashboard', {
        controller:'HomeCtrl',
        templateUrl:'templates/home.html'
    });    
    $routeProvider.when('/moduleA', {
        controller:'ModuleACtrl',
        templateUrl:'templates/moduleA.html'
    });
    $routeProvider.when('/moduleB', {
        controller:'ModuleBCtrl',
        templateUrl:'templates/moduleB.html'
    });
    $routeProvider.otherwise({redirectTo: "/dashboard"});
}]); 
```

**模板/dashboard.html**

```
<html ng-app="modularApp">
<head>
  <!--.... include angular minified js file and what else you need...-->
  <script type="text/javascript" src="dashboard.js"></script>
  <script type="text/javascript" src="moduleACtrl.js"></script>
  <script type="text/javascript" src="moduleBCtrl.js"></script>
</head>
<body>
  <a ng-href="#/moduleA">Open Module A View</a>
  <a ng-href="#/moduleB">Open Module B View</a>
  <!-- Add widgets header menus .... -->
  <ng-view></ng-view>
</body>
</html> 
```

**模块ACtrl.js**

```
var app=angular.module("modularApp");
app.controller("ModuleACtrl",function($scope){
  $scope.scopeValue="Hellow from view";
}); 
```

**模块BCtrl.js**

```
var app=angular.module("modularApp");
app.controller("ModuleBCtrl",function($scope){
  $scope.scopeValue="Hellow from another view";
}); 
```

**模板/moduleA.html**

```
<div>{{scopeValue}} in module A</div> 
```

**模板/moduleB.html**

```
<div>{{scopeValue}} in module B</div> 
```

你可以用 Angular 做更复杂的事情，然后就是这个。一切都取决于您的需求。你有什么特殊要求吗：）

* * *

此外，您可以创建自己的指令，例如 ng-view 并使用您自己的 $route 服务和 $routeProvider，这样您就可以添加想要在某些规则匹配 url 时动态加载的 css 和 javascript。

所以不是上面的路由表，你可以有

```
app.config(['$myRouteProvider', "$locationProvider", function routes($routeProvider, $locationProvider) {
        $routeProvider.when('/dashboard', {
            javascript:'javascript/dashboard.js',
            templateUrl:'templates/dashboard.html',
            cssfile: 'css/dashboard.css'
        });    
        $routeProvider.when('/moduleA', {
            javascript:'javascript/moduleA.js',
            templateUrl:'templates/moduleA.html',
            cssfile: 'css/moduleA.css'
        });
        $routeProvider.when('/moduleB', {
            javascript:'javascript/moduleB.js',
            templateUrl:'templates/moduleB.html',
            cssfile: 'css/moduleB.css'

        });
        $routeProvider.otherwise({redirectTo: "/dashboard"});
    }]); 
```

但是，请原谅我的法语，笨蛋。我在 ruby​​ on rails 中尝试了几个库来实现类似的效果，但后端正在渲染内容，或者只是部分内容。但是我不确定您使用的是哪个后端，并且您是否有兴趣切换到 Rails。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:38:47.903

BoilerplateJS 中的 DomController 可以满足您的需求，而无需使用任何自定义 HTML 属性。您的dashboard.html 可以只包含您想要注入组件的占位符。我只是从 BoilerplateJS index.html 中提取一些 html 来展示它是如何工作的：

```
<body>
    <section id="page-content">
        <header>
            <section class="theme"></section>
            <section class="language"></section>
        </header>
        <aside>
            <section class="main-menu"></section>
        </aside>
    </section>
</body> 
```

上面的主题、语言和主菜单部分只是占位符，DomController 将在其中注入相关组件。DomController 现在可用于使用适当的选择器注册组件，如下所示：

```
 //scoped DomController that will be effective only on $('#page-content')
    var controller = new Boiler.DomController($('#page-content'));
    //add routes with DOM node selector queries and relavant components
    controller.addRoutes({
        ".main-menu" : new MainMenuRouteHandler(context),
        ".language" : new LanguageRouteHandler(context),
        ".theme" : new ThemeRouteHandler(context)
    });
    controller.start(); 
```

以上代码摘自“/boilerplatejs/src/modules/baseModule/module.js”

# java - 使用 SDL 将现有的 Lunar Lander 程序从 C 转换为 android 手机

> ID：12011398
> 
> 赞同：-1
> 
> 时间：2012-08-17T18:40:04.560
> 
> 标签：java, android, c, sdl, andengine

对于一个项目，我们必须使用 SDL 将现有的 Lunar Lander 程序从 C 转换为 android 手机......我什至不知道从哪里开始。老师并没有真正提供帮助，而且我的书中没有任何内容可以指导我使用 sdl...任何有用的提示或教程链接？

[http://penguin.ewu.edu/cscd439/android/Summer_12/cscd439_l5.html](http://penguin.ewu.edu/cscd439/android/Summer_12/cscd439_l5.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:31:17.000

由于 SDL 有一个 Android 端口，您需要做的就是为底层硬件（通常是 ARM）交叉编译您的游戏，并且可能提供一个简单的基于 Java 的启动器。

您可能想看看[ScummVM](http://scummvm.org/)人员为[他们自己的 Android 移植](http://wiki.scummvm.org/index.php/Android/Guide)[做](https://sites.google.com/site/scummvmandroid/)了什么。在最坏的情况下，您可以删除大部分 ScummVM 代码库并用您自己的游戏替换它，以快速移植到 Android。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:47:52.893

这可能会有所帮助：[http ://www.libsdl.org/tmp/SDL/README.android](http://www.libsdl.org/tmp/SDL/README.android)

# mysql - Mysql，根据另一个单元格的内容选择一个单元格的值

> ID：12011401
> 
> 赞同：1
> 
> 时间：2012-08-17T18:40:16.263
> 
> 标签：mysql

我当前的代码

```
SELECT post_id, ( 3959 * ACOS( COS( RADIANS( 34.09 ) ) * COS( RADIANS( lat ) ) * COS( RADIANS( lng ) - RADIANS( -117.55 ) ) + SIN( RADIANS( 34.09 ) ) * SIN( RADIANS( lat ) ) ) ) AS distance FROM wp_postmeta WHERE `meta_key` LIKE '%location_l%' HAVING distance < 2500 ORDER BY distance LIMIT 0 , 20 
```

以下是两个示例数据行（meta_key 并不总是 long 或 lat）：

```
post_id = 123  
meta_key = location_longitude  
meta_value = -119.890000  

post_id = 123  
meta_key = location_latitude   
meta_value = 42.170000 
```

如何修改我的查询以将原始查询中的“lat”和“lng”替换为上面列出的 meta_value 的内容？像这样的东西？

```
select meta_value where meta_key = location_latitude 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:48:04.503

如果你`GROUP BY post_id`，你应该能够使用`MAX()`聚合代替`lat,lng`, 周围的`CASE`语句来确定当前行是纬度还是经度。其他的将为 NULL，因此被聚合消除。

我认为这应该可行，因此您不需要任何子选择。

```
SELECT
   post_id, 
   ( 3959 * ACOS( COS( RADIANS( 34.09 ) ) * COS( RADIANS( MAX(CASE WHEN meta_key='location_latitude' THEN meta_value ELSE NULL END) ) ) * COS( RADIANS( MAX(CASE WHEN meta_key='location_longitude' THEN meta_value ELSE NULL END) ) - RADIANS( -117.55 ) ) + SIN( RADIANS( 34.09 ) ) * SIN( RADIANS( MAX(CASE WHEN meta_key='location_latitude' THEN meta_value ELSE NULL END) ) ) ) ) AS distance 
FROM wp_postmeta 
WHERE `meta_key` IN ('location_latitude','location_longitude')
GROUP BY post_id
HAVING distance < 2500 
ORDER BY distance 
LIMIT 0 , 20 
```

这里的活动部分是：

```
MAX(CASE WHEN meta_key='location_latitude' THEN meta_value ELSE NULL END) 
```

这翻译为：如果该行`meta_key`是`'location_latitude'`，则返回`meta_value`，否则返回 NULL。我们希望，由于`post_id`(lat,lng) 返回了两行，所以`MAX()`上面返回的值始终是非空值——来自 的正确纬度或经度值`meta_value`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:51:33.090

`FROM wp_postmeta`一种方法是用内联视图替换查询中对表（即）的引用，如下所示：

```
FROM
( SELECT plat.post_id
       , plat.meta_value AS lat
       , plng.meta_value AS lng
    FROM wp_postmeta plat
    JOIN wp_postmeta plng
      ON plat.post_id = plng.post_id
         AND plat.meta_key = 'location_latitude'
         AND plng.meta_ley = 'location_longitude'
) wpm 
```

（注意：这假设对于两个感兴趣的 meta_key 值中的每一个，每个 post_id 只有一行...）

这使用“内联视图”将每个 post_id 的纬度和经度值组合成一行。（您可以只运行对内联视图的查询，以确认它返回您期望的结果。）在更新的 MySQL 版本（版本 >= 5.0）中，我们可以使用内联视图代替表引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:51:45.117

您需要将表连接到自身（这在具有 EAV 结构的数据库中很常见）：

```
SELECT
    post_id,
    distance
FROM
  ( SELECT 
        lng.post_id, 
        ( 3959 * ACOS( COS( RADIANS( 34.09 ) ) 
                     * COS( RADIANS( lat.meta_value ) ) 
                     * COS( RADIANS( lng.meta_value ) 
                          - RADIANS( -117.55 ) ) 
                     + SIN( RADIANS( 34.09 ) ) 
                     * SIN( RADIANS( lat.meta_value ) ) 
                     ) 
        ) AS distance 
    FROM wp_postmeta AS lng
      JOIN wp_postmeta AS lat
        ON lat.post_id = lng.post_id
    WHERE lng.meta_key = 'location_longitude'
      AND lat.meta_key = 'location_latitude'
  ) AS tmp
WHERE distance < 2500 
ORDER BY distance 
  LIMIT 0 , 20 ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T18:49:28.163

```
SELECT a.post_id, 
  ( 3959 * ACOS( COS( RADIANS( 34.09 ) ) * COS( RADIANS( lat.meta_value  ) ) * COS( RADIANS( lng.meta_value  ) - RADIANS( -117.55 ) ) + SIN( RADIANS( 34.09 ) ) * SIN( RADIANS( lat.meta_value  ) ) ) ) AS distance 
FROM wp_postmeta lat, wp_postmeta lng
WHERE lat.post_id = lng.postID
AND lat.meta_key = 'location_latitude'
AND lng.meta_key = 'location_longitude'
HAVING distance < 2500 
ORDER BY distance LIMIT 0 , 20 
```

# javascript - Javascript 函数在 Sharepoint 的 HTML 编辑器中不起作用

> ID：12011402
> 
> 赞同：0
> 
> 时间：2012-08-17T18:40:17.293
> 
> 标签：javascript, html, function, sharepoint

没有jQuery。纯 JavaScript。我正在使用 Sharepoint html 内容编辑器。我已将图像和网址的来源标记为机密。我正在尝试获取它，以便当用户单击其中一张图像时，它会触发“打开（此）”功能，并将创建一个指向特定 URL 的弹出窗口（模态）。到目前为止，当用户单击两个图像中的一个时，它会弹出窗口，但始终会显示到confidential2 url。因此，当它应该与“open(this)”的 if 语句中的第一个 case 匹配时，它不会转到那个 url。是的，我已经检查以确保我有不同的网址。我也切换了网址，它总是转到机密 2 ！如果可以的话请帮忙。

```
<script type="text/javascript">
function opac(x) {
  x.style.opacity=.5;
}
function opac_back(x) {
  x.style.opacity=1;
}
</script> 

<script type="text/javascript">
var options = { 
url: theurl, 
        title: "Learning_Technology", 
        allowMaximize: true, 
        showClose: true, 
        width: 625, 
        height: 525, 
        dialogReturnValueCallback: silentCallback}; 
function open(x) {
        var theurl;
    if (x.id == "1") {
        theurl = "confidential1";
    } else if (x.id == "2") {
        theurl = "confidential2";
    } else {

    }
    SP.UI.ModalDialog.showModalDialog(options);
} 
function silentCallback(dialogResult, returnValue) { 
} 
function refreshCallback(dialogResult, returnValue) { 
    SP.UI.Notify.addNotification('Operation Successful!'); 
    SP.UI.ModalDialog.RefreshPage(SP.UI.DialogResult.OK); 
} </script>

<div style="background-color: rgb(237, 237, 237); width: auto; height: auto;">
<center><h2 style="color: green;">MyLearning Requests</h2></center>

<div style="height: auto; width: auto;">
<center><a href="javascript:open(this)"><img width="164" height="42" border="0" id="1" name="button22694Img" src="confidential" onmouseout="opac_back(this)" onmouseover="opac(this)" alt="" style="opacity: 1;"/></a> &#160;  

<a href="javascript:open(this)"><img width="164" height="42" border="0" id="2" name="button27129Img" src="confidential" onmouseout="opac_back(this)" onmouseover="opac(this)" alt="" style="cursor: pointer; opacity: 1;"/></a>

</center>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:48:48.773

您正在调用`open(this)`链接标签，因此`this`将是链接而不是图像。由于链接没有`id`属性，因此您正在`undefined`与“1”和“2”进行比较，这两者都会失败。您将不得不做一些小的 DOM 遍历来获取链接中的图像 :)

```
function open(x) {
        var theurl,
            img = x.firstChild;

    if (img.id == "1") {
        theurl = "confidential1";
    } else if (x.img == "2") {
        theurl = "confidential2";
    } else {

    }
    SP.UI.ModalDialog.showModalDialog(options);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:49:05.680

1.  您在 a 标签上没有任何 id 属性
2.  您正在更新 var theurl 但未更新 options.url

# c - 如何将结构成员分解为单个单词的字节

> ID：12011403
> 
> 赞同：2
> 
> 时间：2012-08-17T18:40:28.663
> 
> 标签：c, structure

假设我有一个 C 结构，例如：

```
typedef struct {
UINT8  nRow;
UINT8  nCol;
UINT16 nData; } tempStruct; 
```

有没有办法将结构的所有这 3 个成员放入一个 32 位字中，但仍然能够单独访问它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:42:45.280

在 s的帮助下的东西`union`？

```
typedef struct {
 UINT8  nRow;
 UINT8  nCol;
 UINT16 nData; 
} 
tempStruct;

typedef union {
 tempStruct myStruct;
 UINT32 myWord;
} stuff; 
```

甚至更好（没有“中间”结构）：

```
#include <stdlib.h>
#include <stdio.h>

typedef union {
    struct {
        int  nRow:8;
        int  nCol:8;
        int nData:16;
    }; 
    int myWord;
} stuff;

int main(int args, char** argv){
    stuff a;
    a.myWord=0;
    a.nCol=2;
    printf("%d\n", a.myWord);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:02:59.787

将其称为 UINT32 怎么样？这不像 C 是类型安全的。

```
tempStruct t;
t.nRow = 0x01;
t.nCol = 0x02;
t.nData = 0x04;

//put a reference to the struct as a pointer to a UINT32
UINT32* word = (UINT32 *) &t;

printf("%x", *word); 
```

然后，您可以通过取消引用指针来将结构的值作为 32 位字来获取。但是，您的系统的细节可能很重要……如果我在我的机器上运行它，则值为`word`0x00040201——也就是说，这些字段的顺序是相反的。如果您尝试将其序列化到另一个系统，我认为不一定会出现这种情况，因此它不可移植。

如果您想将其实际存储为 32 位整数，然后单独引用字段，为什么不

```
UINT32 word = 0x01020004; 
```

然后在别的地方...

```
UINT8* row(UINT32 word) {
    return (UINT8 *) &word + 3;
}

UINT8* col(UINT32 word) {
    return ((UINT8 *) &word) + 2;
}

UINT16* data(UINT32 word) {
    return ((UINT16 *) &word);
} 
```

宏将促进可移植的字节序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:44:28.213

```
typedef struct {
 int  nRow:8;
 int  nCol:8;
 int nData:16; } tempStruct; 
```

nRow 将只占用 8 位，nCol 将占用 8 位，nDate 将占用 16 位。

这对你有用。

我刚刚写了示例程序来查看它的大小

```
#include<stdio.h>
typedef struct {
     int  nRow:8;
     int  nCol:8;
     int nData:16; } tempStruct;

typedef struct {
     int  nRow;
     int  nCol;
     int nData; } tempStructZ;

int main(void) {
      printf("%d\n", sizeof(tempStruct));
      printf("%d\n", sizeof(tempStructZ));
      return 0;
} 
```

输出：4 16

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T18:42:51.357

是的，您可以使用C 中的[**位域**](http://en.wikipedia.org/wiki/Bit_field)来做到这一点。就像是：

```
typedef struct {
  unsigned nRow : 8;
  unsigned nCol : 8;
  unsigned nData : 16;
} tempStruct; 
```

如果您还想控制内存布局，您可能需要查看[`#pragma pack`](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx). 一些编译器为此提供了一个不可移植的选项。

# c# - NHibernate，为什么在删除后加载实体会导致陈旧状态异常？

> ID：12011405
> 
> 赞同：1
> 
> 时间：2012-08-17T18:40:45.060
> 
> 标签：c#, .net, nhibernate, staleobjectstate

我有一个正在批量处理的 Item 实体列表，如下所示：

```
foreach (var itemId in ItemIdList)
{
    var item = getById(itemId); //load line
    if(item != null)
    {
      //...do some processing 
      delete(item)
    }
} 
```

问题是，同一个 itemId 可能会在 ItemIdList 中列出多次，所以删除后，我再次尝试加载该项目，**加载行**失败并出现错误

```
Unexpected row count: 0; expected: 1  (stale state exception) 
```

我知道实体不再存在，但我希望我的 get 函数只返回 null。这是我的 getById 函数：

```
var item = (from i in UnitOfWork.CurrentSession.QueryOver<T>()
                        where i.Id == id
                        select i
                        ).SingleOrDefault(); 
```

为什么*SingleOrDefault*不只返回 null？

我的 Item 实体只有一个自动生成的键，哈希函数如下所示：

```
public override int GetHashCode()
    {
        int hashCode = 0;

        hashCode = hashCode ^ Id.GetHashCode();

        return hashCode;
    } 
```

编辑：

这是我的删除方法

```
 public void Delete(T t) //T would be Item in this case
    {
       UnitOfWork.CurrentSession.Delete(t);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:11:30.883

我还没有看到您的删除方法，但是由于您声明这些项目是“批量”完成的，我假设您等到所有内容都被删除后才刷新。

由于在您尝试删除所有项目之前不会发生刷新，因此它仍然存在于数据库中。因此，当您第二次检索该项目时，它认为它应该被“删除”，但看哪，它仍然存在。这就是 NHibernate 认为状态“陈旧”的原因。

解决此问题的一种简单方法是将 ItemIdList 设置为一个集合（如 HashSet）。这将防止出现重复的 ID，并且应该可以解决问题。

另一方面，如果您尝试删除 id 列表中的所有实体，则有比从数据库中一次读取每个实体然后删除它们更有效的方法。

# c# - 位图类参数无效

> ID：12011412
> 
> 赞同：0
> 
> 时间：2012-08-17T18:41:21.350
> 
> 标签：c#, parameters, bitmap

我将一个数组传递给一个方法，并使用一个 foreach 循环。由于某种原因，我传递给 new Bitmap() 的参数无效。我收到错误“参数无效”。该参数是一个字符串路径（应该是）。

谁能告诉我怎么了？

如果我突出显示参数名称，这就是它向我显示的内容，这似乎是正确的：

"C:\Reinstatement Image Transporter\Image Processing\NYH004402800_REINSMT_0e2837ae.jpg"

```
public static void CompressPictures(string[] processingFiles)
        {
            string originalFileName = "";

            foreach (string file in processingFiles)
            {
                //I'm getting the error right here:
                Bitmap pic = new Bitmap(file);

                ImageCodecInfo jgpEncoder = GetEncoder(ImageFormat.Jpeg);

                Encoder myEncoder = Encoder.Quality;

                EncoderParameters myEncoderParameters = new EncoderParameters(1);

                EncoderParameter myEncoderParameter = new EncoderParameter(myEncoder, 50L);

                myEncoderParameter = new EncoderParameter(myEncoder, 0L);
                myEncoderParameters.Param[0] = myEncoderParameter;

                originalFileName = Path.GetFileNameWithoutExtension(file.Remove(file.Length - 1, 1));

                pic.Save(AppVars.ProcessingPolicyImagesFolder + originalFileName, jgpEncoder, myEncoderParameters);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T05:51:04.230

（根据对上述问题的评论：这是一个简单的`FileNotFound`错误。）

# c++ - 减少for循环中的2个变量？

> ID：12011413
> 
> 赞同：0
> 
> 时间：2012-08-17T18:41:23.113
> 
> 标签：c++, visual-studio, mfc

我不确定是否有办法做到这一点。我的作业是这样说的，但我很确定没有这样的方法：

```
 CStringArray m_Last;
    int size = m_Last.GetCount();

    // In the .h file I have,

     #define IDM_LAST 90// these are to be used for contiguous Resource ID's
     const int MAXLAST = 5; // there are 5 Resource IDs

    for(int i = 0, j = IDM_LAST; i < size, j < IDM_LAST + MAXLASTUSEDDEST; ; i++, j++)
    {
        menuAPopup.AppendMenu(MF_STRING, j, m_Last.ElementAt(i));
    } 
```

这里有一种方法可以让 for 循环使用 1 个变量，`i`或者`j`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:44:12.363

问题在这里：

```
i < size, j < IDM_LAST + MAXLASTUSEDDEST 
```

您需要将`,`in 条件更改为`&&`.

* * *

简而言之，这是如何`for`工作的：

```
for (X; Y; Z)
{
    ...
} 
```

翻译为：

```
X;
while (Y)
{
    ...
    Z;
} 
```

除了 中定义的变量`X`将在`while`.

由于以下是有效的 C 代码：

```
int i = 0, j = IDM_LAST;
while (i < size && j < IDM_LAST + MAXLASTUSEDDEST)
{
    menuAPopup.AppendMenu(MF_STRING, j, m_Last.ElementAt(i));
    i++, j++;
} 
```

那么这`for`也是有效的：

```
for(int i = 0, j = IDM_LAST; i < size && j < IDM_LAST + MAXLASTUSEDDEST; i++, j++)
{
    menuAPopup.AppendMenu(MF_STRING, j, m_Last.ElementAt(i));
} 
```

* * *

您不一定需要减少变量的数量，但如果您坚持，这就是您的做法。

如果你仔细观察，你会发现`j`总是等于`i + IDM_LAST`。因此，您可以`for`用这个替换它：

```
for(int i = 0; i < size && i + IDM_LAST < IDM_LAST + MAXLASTUSEDDEST; i++)
{
    menuAPopup.AppendMenu(MF_STRING, i + IDM_LAST, m_Last.ElementAt(i));
} 
```

简化：

```
for(int i = 0; i < size && i < MAXLASTUSEDDEST; i++)
{
    menuAPopup.AppendMenu(MF_STRING, i + IDM_LAST, m_Last.ElementAt(i));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:44:21.057

您有 2 个终止条件：`i < size`和`j < IDM_LAST + MAXLASTUSEDDEST`. `i < size`现在：你将如何重写`j`？一旦你得到了它，你应该能够`i`在循环体中以类似的方式替换`j`.

请注意，在每次迭代中，两者都`i`始终`j`递增 1。由于您的初始化，这意味着在每次迭代中：`j == (i + IDM_LAST)`是真的。

现在对于给定的循环，它是不正确的：您在终止条件中使用逗号运算符，这不会做您想要的：结果`i < size`将被忽略！将循环更改为：

```
int i, j;
for (i = 0, j = IDM_LAST; (i < size) && (j < IDM_LAST + MAXLASTUSEDDEST); i++, j++) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T00:08:00.813

```
 CStringArray m_Last;
 int size = m_Last.GetCount();

 // In the .h file I have,

 // last of the contiguous Resource block ID's
 #define IDM_LAST 90
 // there are 5 Resource IDs only
 const int MAXLAST = 5;

 for (int i=0 ; (i<size)&&(i<MAXLAST) ; i++)
 {
    menuAPopup.AppendMenu(MF_STRING, (IDM_LAST - i), m_Last.ElementAt(i));
 } 
```

# asp.net-mvc - 让 RouteDebugger 在 404 页面上工作？

> ID：12011414
> 
> 赞同：8
> 
> 时间：2012-08-17T18:41:23.440
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, routedebugger

标题中有[一个非常相似的问题](https://stackoverflow.com/questions/5836583/getting-glimpse-routedebugger-to-work-on-cassini-404-pages)提到了 RouteDebugger，但实际上他们使用的是 Glimpse，而实际的标题问题从未得到回答。

所以这里又是特定于 RouteDebugger 的：

如果我在 MVC3 中得到 404，我该如何调试该路由和生成的 404？这些结果没有出现 RouteDebugger，虽然 MVC 源代码可用，但路由引擎的源代码似乎不可用，因此没有明显的方法可以进入代码并查看到底哪里出了问题。

有没有办法让 RouteDebugger 在 404 页面上工作，或者有办法从请求开始到 MVC 控制器响应进入代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T07:06:22.310

我知道这不是您问题的直接答案。但也许您可以使用 ELMAH 和 Miniprofiler 来查明您的错误。

[http://odetocode.com/blogs/scott/archive/2012/09/11/elmah-and-miniprofiler-in-asp-net-mvc-4.aspx](http://odetocode.com/blogs/scott/archive/2012/09/11/elmah-and-miniprofiler-in-asp-net-mvc-4.aspx)

问候

# asp.net - 我应该使用 Session/Cache 来存储 DataSet 还是应该每次都从数据库中获取新数据？

> ID：12011416
> 
> 赞同：0
> 
> 时间：2012-08-17T18:41:30.273
> 
> 标签：asp.net, .net, session, caching, dataset

用于制作 DataSet 的编码量通常很大。现在我不确定在处理来自多个 ASP.NET 页面的数据请求时的行业标准或最佳实践是什么。我应该使用缓存/会话在页面之间传递数据集，还是应该直接从数据库中获取每个页面？

这里最常见的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:53:11.567

以下是我的想法：

这取决于数据库和您尝试获取的数据类型，以及可能修改数据的内容。您是否有与您想要的数据同时运行的后端进程？此数据是否仅因当前页面而更新，还是根本没有更新？有多少人会使用该页面？

我个人几乎总是调用数据库，只是因为当涉及到这种事情时有很多假设。数据随时可能发生变化；它永远不会像人们想象的那样静止。我个人每天都会用正确的数据来交换性能。

但这只是我个人。这个问题是如此开放，以至于不可能考虑到每一件事，因为我不知道您的数据库结构，也不知道检索它的成本有多高，也不知道您使用它的目的。

抱歉，我真的无法提供更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:51:01.017

这取决于你的需要。如果数据量很大，就不要保存在 Session 或 Cahce 中，因为 Session 或 Cache 是存储在服务器内存中的。会话是特定于用户的，它将为服务器中的每个用户存储数据，因此请避免使用它。我认为您应该每次需要时直接获取数据，不要将其保存在会话中。如果数据非常小/有限，那么您可以将其保存在会话中（例如 UserName 或 UserId 等）。如果您使用网格视图来显示数据，则使用分页并在每个页面请求上从数据库中获取数据。

# php - foreach 多维数组

> ID：12011420
> 
> 赞同：1
> 
> 时间：2012-08-17T18:41:49.610
> 
> 标签：php, arrays, foreach, multidimensional-array

我如何使用 foreach 遍历以下数组，因此它会像这样打印：

```
Product1 date1 time1
product2 date2 time2
product3 date3 time3
product4 date4 time4 
```

我一直在挣扎和挣扎，我尝试过双重前奏等，但不知何故我无法让它发挥作用......

有人可以向我解释吗？

```
Array
(
    [product] => Array
        (
            [0] => product1
            [1] => product2
            [2] => product3
            [3] => product4
        )

    [date] => Array
        (
            [0] => date1
            [1] => date2
            [2] => date3
            [3] => date4
        )

    [time] => Array
        (
            [0] => time1
            [1] => time2
            [2] => time3
            [3] => time4
        )

) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:43:29.477

像这样的东西应该工作：

```
$count = count($data['product']);
for ($i = 0; $i < $count; $i ++) {
    echo $data['product'][$i] . ' ' . $data['date'][$i] . ' ' .$data['time'][$i] . '<br />';
} 
```

要为其添加数据验证/完整性（以停止`undefined index`错误），还要检查子数组中是否存在每个索引：

```
$count = count($data['product']);
for ($i = 0; $i < $count; $i++) {
    $date = isset($data['date'][$i]) ? ' ' . $data['date'][$i] : '';
    $time = isset($data['time '][$i]) ? ' ' . $data['time '][$i] : '';
    echo $data['product'][$i] . $date . $time . '<br />';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T18:44:05.677

简单的

```
<?php
    foreach($array['product'] as $num => $prod){
        echo $prod." ".$array['date'][$num]." ".$array['time'][$num];
    }
?> 
```

# jsf-2 - jsf 2会话不在集群上复制？

> ID：12011423
> 
> 赞同：3
> 
> 时间：2012-08-17T18:42:18.853
> 
> 标签：jsf-2, jboss, cluster-computing, seam3

几天前我在这里读到了一些问题，这让我明白了一个视图范围的 bean 正在会话中。这是正确的吗？

我之所以问，是因为我有一个 jsf 2 + seam 3 + cdi 应用程序，它在单个节点上与视图范围的 bean 完美配合，一旦它放在集群上，我得到一个请求工作，下一个是视图过期异常。

那么，我是否正确地假设我的会话没有正确复制？在我的 web.xml 上，我有可分发的标签。我正在使用 jboss 6.1。我应该在应用程序或 jboss 上做任何其他事情（除了使用所有上下文）以使其工作吗？

或者我不能在集群环境中使用视图范围的 bean？

# c++ - 如何在函数返回期间将移动语义与 std::string 一起使用？

> ID：12011426
> 
> 赞同：22
> 
> 时间：2012-08-17T18:42:25.833
> 
> 标签：c++, c++11, move-semantics

> **可能重复：**
> [C++11 右值和移动语义混淆](https://stackoverflow.com/questions/4986673/c11-rvalues-and-move-semantics-confusion)

我认为正确的是

```
std::string GetLine()
{
std::string str;
std::getline(std::cin, str);
return std::move(str);
} 
```

但是在这个链接[http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html](http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html) （检查标题部分 Returning an explicit rvalue-reference from a功能）

这是#1 google search hit for move semantics 显示了类似的函数签名

```
int&& GetInt()
{
int x = 0;
// code here
return std::move(x);
} 
```

从我在其他地方读到的 && 表示右值**引用**，因此在这种情况下，它返回对不存在的对象的引用。

那么它是哪一个？

（是的，我知道移动 int 没有真正的好处，但问题是是否在第一个函数中使用 std::string 或 std::string&& 的返回类型。如果这对所有类型都应该这样做。）

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-17T18:51:32.943

您绝对正确，该`int&& GetInt()`示例是错误的，并且正在返回对已销毁对象的引用。但是，除非我错过了，否则您发布的链接实际上并未显示任何返回对*局部*变量的引用的代码。相反，我看到一个对*全局*变量的引用被返回，这没关系。

以下是返回时如何使用移动语义：

```
std::string func()
{
    std::string rv;
    /* ... */
    return rv;
} 
```

`std::move()`返回对象时通常不应该使用。这样做的原因是，在 RVO 可能发生的任何时候都已经隐式允许移动，并且使用`std::move()`将抑制 RVO。所以使用`std::move()`永远不会比正常返回更好，而且通常会更糟。

* * *

同样，使用`std::move()`可能比简单地命名要返回的变量更糟糕，因为它抑制了返回值优化。返回值优化允许将对象返回给调用者，而无需复制该对象

> 在`return`具有类返回类型的函数的语句中，当表达式是具有与函数返回类型相同的 cv 非限定类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，可以通过将自动对象直接构造到函数的返回值中来省略复制/移动操作
> 
> *— [class.copy] 12.8/31*

但是 using`std::move()`可以防止返回表达式成为您要返回的对象*的名称。*相反，表达式更复杂，语言不再允许对其进行特殊处理。

仅仅命名对象并不比使用更糟糕的原因`std::move()`是因为有另一条规则说表达式已经可以被视为右值而不需要`std::move()`.

> 当满足或将满足复制操作的省略标准时，除了源对象是函数参数的事实，并且要复制的对象由左值指定时，选择复制的构造函数的重载决策是首先执行好像对象是由右值指定的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-17T18:43:43.457

回答这个问题，有点：返回一个`string`. 什么都不做`move`，而是使用（依赖）RVO：

```
std::string func()
{
    std::string rv;
    /* ... */
    return rv;
} 
```

通常应该这样做。您不能返回对临时的（r 值与否）引用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-17T18:53:27.683

无需说`return std::move(str);`是否`str`是局部变量：如果变量满足返回值优化的标准，则在`return`语句中该变量将绑定到右值引用。

另外，请注意，您可能不应该返回对局部变量的引用，无论是左值还是右值引用。

总而言之，你应该有：

```
int foo() { int x; /*...*/ return x; }

std::string bar() { std::string str; /*...*/ return str; } 
```

# java - 访问模型，xjc 编译器用于从模式生成 java 代码，而无需编写我自己的插件

> ID：12011427
> 
> 赞同：0
> 
> 时间：2012-08-17T18:42:26.823
> 
> 标签：java, xsd, jaxb2, xjc

只是一点背景：我有一个具有很多层次结构的 wsdl 和模式文件，这意味着模式中有很多导入/包含标签。我有一个 netbeans 项目并使用 wsimport 生成客户端代码。我已成功调用 Web 服务操作并获取数据。

我需要什么：我希望访问 xjc 编译器用来从模式生成 java 代码的模型。如果可能的话，我想在不编写自己的插件的情况下做到这一点。我想用这个模型用codemodel生成我自己的代码。

问题是：有没有办法在不编写 xjc 插件的情况下（最好从我上面描述的客户项目）访问模型或“大纲”？

我是 java 和 jaxb 的新手，因此非常感谢任何方向和详细说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:57:54.077

您可以使用[Ant](http://jaxb.java.net/nonav/2.0.2/docs/xjcTask.html)或[Maven](http://java.net/projects/maven-jaxb2-plugin/pages/Home)直接调用 xjc 编译器。只需将其指向引用的模式即可。如果您需要对生成的代码进行一些控制，可以查看 JAXB 中的[自定义绑定](http://docs.oracle.com/javaee/5/tutorial/doc/bnbbf.html#bnbcl)。

你到底想完成什么？

# java - 回车 Java

> ID：12011431
> 
> 赞同：2
> 
> 时间：2012-08-17T18:42:47.003
> 
> 标签：java, carriage-return

有没有办法在java中打印一行然后回到该行的开头，我尝试使用 \r 但是这只会打印一个新行并且不会返回到原始行。

所以基本上如果用户输入“你好，这是大声笑”

我想打印句子中的所有 a （无）、所有 b 等……例如）" e " 然后 "He " --> 但是，这必须与上面相同，并且您必须能够看到变化。

有没有办法在java中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:16:50.680

我在我的 Mac 上运行了这个，它是下面的 FreeBSD：

```
public static void main (String[] args) {
  System.out.println("Hello there\rWho's");
} 
```

打印出来了

```
Who's there 
```

如果您在 Windows 上运行它，那么我无法确定它们会做什么，但所有 *nixes 的行为都应该与发布的一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:48:05.440

这不是一个真正的 java 问题，而是更多地与您的终端/控制台的行为有关。

您正在发送正确的字符以返回到行 '\r' 的开头，但听起来您的控制台没有正确处理这个问题。

您还应该使用`print()`and not`println()` 函数（或在您用来编写的特定对象上调用任何方法）。该`println()`函数将添加一个 '\n' 字符，该字符将导致出现新行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:47:42.427

这取决于您所说的“打印一行”是什么意思。如果您在谈论操作系统窗口的命令行，那么您将需要输出终端控制字符来控制光标。

这在很大程度上取决于您使用的操作系统，但有一些库输出可以使其更简单。

您也许可以输出退格字符`\b`来擦除当前行，但它可能不起作用。

# iphone - 相邻视图消失时如何拉伸iOS视图？

> ID：12011433
> 
> 赞同：0
> 
> 时间：2012-08-17T18:42:52.503
> 
> 标签：iphone, ios

我有 3 个相邻的视图：一个在中心，两个在顶部和底部。有时我将顶部和底部视图设置为隐藏。发生这种情况时如何使中心视图拉伸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:05:54.803

创建`NSArray`3 个（或更多）中`UIView`的一个，并在隐藏任何视图时调用此方法。此方法将允许任何可见视图扩展以填充容器。

```
-(void)expandVisibleViews{

NSUInteger numVisible = 0;
NSFloat height;
NSUInteger count = 0;

for(UIView *view in viewArray){
  if(!view.hidden){
    numVisible++;
  }
}

height = container.frame.size.height / numVisible;

for(UIView *view in viewArray){
  if(!view.hidden){
    view.frame = CGRectMake(view.frame.origin.x, height*count, view.frame.size.width, height);
    count++;
  }
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:10:37.073

我决定在调用 set hidden 时对分配给视图框架的 CGRect 进行硬编码：

```
if (surroundingViewsHidden) {
    iphoneWebView.frame = CGRectMake(0, 0, 320, 460);
    ipadWebView.frame = CGRectMake(0, 0, 1024, 768);
}
else {
    iphoneWebView.frame = CGRectMake(0, 44, 320, 372);
    ipadWebView.frame = CGRectMake(0, 44, 916, 768);
} 
```

它完成了工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:54:48.520

隐藏其他视图后调用此函数

```
-(void) stretchView : (UIView *) view
{
    [view setFrame:self.view.frame];
} 
```

例如，[自我拉伸视图：viewForStretch]；

（您也可以在拉伸视图时应用动画）

# c - 在 AIX 7 上编译 C 代码时出错

> ID：12011438
> 
> 赞同：0
> 
> 时间：2012-08-17T18:43:03.750
> 
> 标签：c, makefile, aix, xlc

所以，我被要求在 AIX7（64 位）机器上编译一些遗留的 C 代码。

而且，我只是更改了生成文件以编辑使用的编译器（从 gcc 到 xlc_r），以及从（-DAIX3 到 -DAIX7）的标志。

但是，由于这个愚蠢的行为，我收到了一个抱怨的错误

```
 xlc_r -c -q64 -O -DAIX -DAIX7  log.c
  "log.c", line 128.7: 1506-343 (S) Redeclaration of log_write differs from previous declaration on line 140 of "lib.h".
  "log.c", line 128.7: 1506-378 (I) Prototype for function log_write cannot contain "..." when mixed with a nonprototype declaration.
  "log.c", line 165.7: 1506-343 (S) Redeclaration of log_errno differs from previous declaration on line 141 of "lib.h".
 "log.c", line 165.7: 1506-378 (I) Prototype for function log_errno cannot contain "..." when mixed with a nonprototype declaration.
 make: 1254-004 The error code from the last command is 1. 
```

方法是问题看起来像

```
 extern  void    log_write _PROTO(( int, char *, ... ));
  extern  void    log_errno _PROTO(( int, char *, ... )); 
```

我想知道 ... 是什么，它是否构成一个开放的参数列表？我如何让它在 AIX7 上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:30:33.360

函数声明或定义中的省略号 (...) 表示函数接受可变数量（零个或多个）的参数。

早在需要使用 pre-ANSI 和符合 ANSI 的编译器编译代码很常见的日子里，处理两种 C 语言之间函数声明差异的常用方法是有条件地定义一个宏，它可以允许通过更改宏定义来进行 ANSI 风格的声明或 K&R 风格的声明。我怀疑您的示例中使用的 _PROTO() 宏被定义为具有 K&R 样式的声明，而不是带有原型的 ANSI 样式的声明，修复此问题可能会解决这些编译问题

# powershell - 在邮件正文中使用 + 的有趣问题

> ID：12011442
> 
> 赞同：0
> 
> 时间：2012-08-17T18:43:29.407
> 
> 标签：powershell

*   项目清单

这是一个奇怪的。$body 与

添加 30 - 100 行的循环： $body += "+ $stuff `n"

问题是如果我在 $body 中使用加号 (+)，它会占用正文中的每一行并将其拆分为行大小的一半并在下一行继续：

例子，

该行实际上是：

*   月亮|今天好漂亮|现在买金子，很快就会变得富有

它被更改为（stackoverflow 将我的 (+) 更改为项目符号。请注意，在接下来的两行前面有一个加号）。

*   月亮|今天好漂亮|现在买黄金

*   月亮|很快就会真正富有

如果我将加号 (+) 更改为 Add 一词，我将进入电子邮件正文：

加月亮|今天发光真好|现在买金子，很快就会真正富有

我想使用加号 (+)，因为这与另一个程序在电子邮件正文中使用 +/- 行的格式相同。任何想法如何让这个工作？

```
 function mailalert($body) {
        $SMTPserver = "mailhost.domain.com"
        $from = "replies-disabled@domain.com"
        $to = "joe@domain.com"
        $subject = "Report for Stuff"
        $mailer = new-object Net.Mail.SMTPclient($SMTPserver)
        $msg = new-object Net.Mail.MailMessage($from, $to, $subject, $body)
        $mailer.send($msg) 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:16:54.743

好的，我放弃了 Net.Mail.SMTPclient 并决定使用 html 作为正文来解决这个问题：

```
 function mailalert($diff) {
        $SMTPserver = "mailhost.domain.com"
        $smtp = New-Object system.Net.Mail.SmtpClient($SMTPserver)
        $mail = New-Object System.Net.Mail.MailMessage
        $mail.From = "replies-disabled@domain.com"
        $mail.To.Add("joe@domain.com")
        $mail.Subject = "Report for stuff"
        $mail.Body = $diff
        $mail.IsBodyHtml = $true
        $smtp.Send($mail)
    } 
```

我将所有使用的 `n 更改为
和 tada 它可以工作。为什么另一种方式不起作用仍然有点令人困惑。我看到另一个问题，其中包含加号的电子邮件地址正在被解决，所以我想知道修复这个问题是否会破坏这个问题。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:51:12.360

尝试：

```
$body = "$body $stuff `n" 
```

在你的循环中。

使用“`”转义任何麻烦的字符。

```
$body = "$body `+ $stuff `n" 
```

# xml - 使用 powershell 在 XML 注释之间获取数据

> ID：12011445
> 
> 赞同：2
> 
> 时间：2012-08-17T18:43:47.680
> 
> 标签：xml, powershell

我希望能够在 XML 注释之间识别（和替换）XML 元素。例如：

```
<!-- between here -->
<add key="userdefined1" value="something1" />
<add key="userdefined2" value="something2" />
<add key="userdefined3" value="something3" />
<!-- between here --> 
```

我使用注释的原因是因为这是来自 .NET Web 项目的 web.config 文件。我不使用自定义配置部分的原因是该应用程序已有多年历史，并且有数千个对这些键的现有引用，因此更改它们的访问方式可能很麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-21T20:11:02.063

这可能不是最佳的，但它有效。这里有两个常量，字符串和文件名。

```
$comment = '<!-- between here -->'
$start = $false
ForEach ($l in (Get-Content .\testfile.config)) { 
        if (-not $start -and $l -notmatch $comment) {continue}
        if (-not $start -and $l -match $comment ) { $start = $True }
        elseif ($start -and  $l -notmatch $comment) { echo $l }
        elseif ($start -and  $l -match $comment) { break }
} 
```

作为备选：

```
$comment = '<!-- between here -->'
$file = '.\testfile.config'
Select-String -pattern $comment -path $file | % { if (-not $b) { $b=$_.LineNumber} else { $e=$_.LinenUmber-2}}
Get-Content $file | Select-Object -Index ($b..$e) 
```

# java - JCreator IDE：程序将编译但不运行，在命令提示符下工作

> ID：12011447
> 
> 赞同：1
> 
> 时间：2012-08-17T18:44:00.700
> 
> 标签：java, compiler-construction, compilation, javac, jcreator

最近购买了一台新电脑，试图继续开发 Java。我使用的 IDE 之一 JCreator 已经开始向我吐出错误。我在新机器上卸载并重新安装了几次 Java 以使一切正常。

我有一个语法正确的程序，编译得很好，但是每当我尝试从 IDE 中运行该程序时，它都会吐出一条错误消息。内容如下：

```
--------------------Configuration: <Default>--------------------
Usage: java [-options] class [args...]
       (to execute a class)
   or  java [-options] -jar jarfile [args...]
       (to execute a jar file)
where options include:
-d32      use a 32-bit data model if available
-d64      use a 64-bit data model if available
-server   to select the "server" VM
-hotspot      is a synonym for the "server" VM  [deprecated]
              The default VM is server.

-cp <class search path of directories and zip/jar files>
-classpath <class search path of directories and zip/jar files>
              A ; separated list of directories, JAR archives,
              and ZIP archives to search for class files.
-D<name>=<value>
              set a system property
-verbose[:class|gc|jni]
              enable verbose output
-version      print product version and exit
-version:<value>
              require the specified version to run
-showversion  print product version and continue
-jre-restrict-search | -no-jre-restrict-search
              include/exclude user private JREs in the version search
-? -help      print this help message
-X            print help on non-standard options
-ea[:<packagename>...|:<classname>]
-enableassertions[:<packagename>...|:<classname>]
              enable assertions with specified granularity
-da[:<packagename>...|:<classname>]
-disableassertions[:<packagename>...|:<classname>]
              disable assertions with specified granularity
-esa | -enablesystemassertions
              enable system assertions
-dsa | -disablesystemassertions
              disable system assertions
-agentlib:<libname>[=<options>]
              load native agent library <libname>, e.g. -agentlib:hprof
              see also, -agentlib:jdwp=help and -agentlib:hprof=help
-agentpath:<pathname>[=<options>]
              load native agent library by full pathname
-javaagent:<jarpath>[=<options>]
              load Java programming language agent, see java.lang.instrument
-splash:<imagepath>
              show splash screen with specified image
See http://www.oracle.com/technetwork/java/javase/documentation/index.html for more details.

Process completed. 
```

我假设这只是有关如何连接运行时环境的说明。

最重要的是，所有运行时设置都在：

配置 > 选项 > JDK 工具 > 运行应用程序

在我的旧机器上完全一样，它运行一切都很好。我知道这一定是 JCreator 的问题，因为我可以从命令行完美地编译所有内容，然后运行它。

javac 和 java 命令在命令行中工作，只是这一件事在 JCreator 中不起作用。

有关解决此问题的最佳方法的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T20:57:33.290

这是 JCreator 开发人员意识到的一个问题，并且正在努力寻找解决方案。 [JCreator 论坛上关于这个的讨论](http://www.jcreator.com/forums/index.php?showtopic=7905&st=0)

通过 Windows 资源管理器打开文件时存在问题。

为了不遇到这个问题：打开 JCreator。打开您的文件（*不要关闭 JCreator**起始页**选项卡*）。

只要“起始页”选项卡处于打开状态（并且位于第一个位置），运行文件就应该没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:17:34.953

The best thing for you to do is to copy all your source code, create a brand new project, past the source code, and then build it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-12T17:31:33.780

我有这个问题，我厌倦了，这是一个非常大的问题。

原因是你要知道Jcreator是在x86架构下工作的，所以必须安装32位Java版本，并且在Jcreator的配置中，必须选择32位版本Java的路径

> (C:\Program Files (x86)\Java\jdk1.8.0_66 )

任何时候您可能会收到此错误，请务必检查 Jcreator 配置中的 Java 路径。这解决了我的问题，希望它有效。

# objective-c - 降价到 uiview/nsview

> ID：12011452
> 
> 赞同：0
> 
> 时间：2012-08-17T18:44:21.837
> 
> 标签：objective-c, cocoa, markdown

我正在尝试处理一个降价字符串，以在 iOS 和 OSX 的 Objective-C/Cocoa 中的可滚动 UIView 或 NSView 中显示它。是否有可用的库来实现这一点？

我快速浏览了谷歌，似乎没有任何明显的库可供使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:37:41.917

我不确定是否有 Markdown 库，但如果我必须在我的应用程序中添加对它的支持，我会直接将其转换为 HTML 标记并在 web 视图中显示。当然，前提是它不必是可编辑的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:46:45.687

按照 Lvsti 的说法，如果您通过 Webview 使用众多 Javascript Markdown 解释器之一，您甚至不需要自己进行翻译；只需确保脚本已加载到您的 Webview 中并触发适当的 Javascript 选择器以输入标记。

# php - (?) HTML 中的标记。来自数据库内容的编码问题？

> ID：12011458
> 
> 赞同：0
> 
> 时间：2012-08-17T18:44:34.390
> 
> 标签：php, sql, sql-server, sql-server-2005

知道为什么会这样吗？

![在此处输入图像描述](../Images/874e5a7663e3d50e4fc8b34c4518aa1a.png)

它看起来主要是用撇号和连字符发生的。如果我能解决这个问题有什么想法吗？我从数据库中提取数据并将其打印到页面上，例如：

```
<div class="block">
              <?=$details['agenda'] ?>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:55:28.723

正如其他评论者可能提到的，这是一个字符编码问题。如果幸运的话，您可以强制您的 HTML 页面以 UTF-8 呈现，这将解决它。

不幸的是，如果您不走运，您会发现这些字符以错误的编码存储在数据库中。或者数据库可能会转换它们。或者，字符编码数据可能已经沿路径被破坏了！无法提前知道这些角色在哪里受损。

我知道解决此类问题的最佳方法是强制您的每一步都遵循 UTF-8 内容编码。例如，您可能会经历如下步骤：

1.  内容作者在 Microsoft Word 中编写包含“SmartQuotes”的文档
2.  内容作者复制并粘贴到内容管理系统的编辑框中。
3.  内容管理系统保存到数据库。
4.  数据库可能会或可能不会在内部以 Unicode 存储数据 - 请确保您使用`nvarchar`（或您的数据库支持的任何 unicode 类型）。
5.  从数据库中读取可能需要扫描字符。

但是，解决这个问题非常棘手！很久以前，我曾经有这样写“检测和修复”例程的习惯：

```
$smartquotes = array("”", "“");
str_replace($smartquotes, '"', $mytext); 
```

你当然知道问题出在哪里——我会不断发现我必须修复的新角色。Microsoft Word 喜欢处理大量不寻常的字符——版权、注册标记、撇号、连字符等等。我会不断地添加这个功能，一遍又一遍，直到我发疯。所以现在我只是通过我的整个内容交付路径并强制所有内容遵守 UTF-8 规则；在大多数情况下，这似乎可以解决它。

祝你好运！

# ruby-on-rails - Rails：如何呈现重复的表单块？

> ID：12011459
> 
> 赞同：0
> 
> 时间：2012-08-17T18:44:46.923
> 
> 标签：ruby-on-rails, forms, rendering, haml

为了不重复自己，我想创建一个以特定方式呈现表单块（文本字段或文本区域）的函数。我想要这样的结果（使用 Haml 和 twitter-bootstrap）：

```
.form-block.input-prepend
    %span.add-on>
        %i.icon.icon-home
    = f.text_field :name, :value => @store.name, :placeholder => 'Company Name' 
```

为此，我创建了一个文件`views/layouts/_form-block.html.haml`，在其中插入了以下代码：

```
.form-block.input-prepend
    %span.add-on>
        %i{ :class => "icon icon-#{icon}" }
    = yield 
```

我使用以下方法在我的视图中调用该块：

```
- render :template => 'layouts/_form-block', :locals => { :icon => 'home' } do
    = f.text_field :name, :value => @store.name, :placeholder => 'Company Name' 
```

但它不起作用。我有以下错误`'nil' is not an ActiveModel-compatible object that returns a valid partial path.`

你有什么主意吗？这是最好的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:13:58.457

如果要用于`= yield`传递块，则需要渲染为布局。使用`render :layout =>`而不是`render :template =>`.

# javascript - 检测嵌入的 Youtube 播放器字幕

> ID：12011463
> 
> 赞同：1
> 
> 时间：2012-08-17T18:45:16.043
> 
> 标签：javascript, youtube, youtube-api

是否可以检测嵌入式播放器中的 youtube 字幕是打开还是关闭？

如果用户选择显示字幕，目前无法抑制字幕。如果字幕打开，我想显示一条自定义消息。

据我所知，在[文档](https://developers.google.com/youtube/js_api_reference)中没有提到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-29T01:24:06.407

我在他们的 api 文档中没有找到这个，但是使用你的 youtube 播放器对象你应该能够做到：

```
player.getOptions("captions") || player.getOptions("cc")  //detects if captions were ever loaded at one point. 
```

也可以通过js开启：

```
player.loadModule("captions");  //Works for html5 ignored by AS3
player.loadModule("cc");  //Works for AS3 ignored by html5 
```

将其关闭：

```
player.unloadModule("captions");  //Works for html5 ignored by AS3
player.unloadModule("cc");  //Works for AS3 ignored by html5 
```

如果加载了模块，则更改哪种语言：

```
player.setOption("captions", "track", {"languageCode": "es"});  //Works for html5 ignored by AS3
player.setOption("cc", "track", {"languageCode": "es"});  //Works for AS3 ignored by html5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T16:10:56.993

像馅饼一样容易，你可以;）

```
<!DOCTYPE html>
<html>
<head>
<title>test</title>
</head>
<body>
<script src="//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
  <div id="ytapiplayer">
    You need Flash player 8+ and JavaScript enabled to view this video.
  </div>

  <script type="text/javascript">

    var params = { allowScriptAccess: "always" };
    var atts = { id: "myytplayer" };
    swfobject.embedSWF("http://www.youtube.com/v/QRS8MkLhQmM?enablejsapi=1&playerapiid=ytplayer&version=3",
                       "ytapiplayer", "640", "480", "8", null, null, params, atts);

    var stateChange = function(a) {
            if (ytplayer.getOptions().indexOf("cc") !== -1) {
        alert("closed captions are on");
      } else {
        alert("closed captions are off");
      }
    }
   function onYouTubePlayerReady(playerId) {
      ytplayer = document.getElementById("myytplayer");
      ytplayer.addEventListener("onStateChange","stateChange");
    }
  </script></body>
</html> 
```

顺便说一句：谷歌摇滚；）

这应该可以解决问题 - 请不要在生产模式下使用它 - 这只是一个快速总结。你需要倾听你想要的状态，我只是在任何事件中提醒;）

# javascript - JavaScript：访问继承的子模块中的“封闭”变量

> ID：12011468
> 
> 赞同：1
> 
> 时间：2012-08-17T18:45:27.330
> 
> 标签：javascript, design-patterns, inheritance, module

我有一个要克隆的模块对象，然后为其重写一个函数。

```
var Module1 = (function () {
 var hello = "hi there!";
  return {
   sayHello : function () {
     console.log(hello);
   }
  }
})();

 var Module2 = (function (old) {
  var my = {}, key;
   for (key in old) {
    if (old.hasOwnProperty(key)) {
      my[key] = old[key];
    }
  }

  my.sayHello = function () {
    console.log(old.hello + " again");
  }

  return my;
}(Module1)); 
```

有没有办法从子模块访问“私有”变量“hello”？调用`Module2.sayHello()`（在上面显示的代码上）打印`undefined again!`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:51:57.567

不，你不能。

你可以加

```
getHello : function () {
    return hello;
} 
```

进入 Module1 的返回块，在这种情况下，您公开一个公共函数，该函数返回 Module1 的私有变量 hello。

# python - python套接字+多处理

> ID：12011473
> 
> 赞同：0
> 
> 时间：2012-08-17T18:46:08.553
> 
> 标签：python, sockets, websocket, multiprocessing, epoll

我目前正在研究一个允许在同一个监听套接字上进行多处理的 websocket 实现。我能够在四核机器上通过 4 个进程实现惊人的性能。

当我上层时，比如 8 个进程，在 4 个请求之后，epoll.poll 不再触发任何事件。有趣的是，我尝试运行相同的程序，在 2 个不同的端口上有 2 个侦听器。每个侦听器有 4 个进程，它在每个套接字 2 个请求后阻塞。每个侦听器有 2 个进程，我都可以顺利通过它。

任何想法？

**主**.py（提取）

```
#create the WSServer
wsserver = WSServer(s.bind_ip, s.bind_port, s.max_connections)
# specify on how many process we'll run
wsserver.num_process = s.num_process
Process(target=wsserver.run,args=()).start() 
```

wsserver.py（提取）

```
def serve_forever_epoll(wsserver):
    log(current_process())
    epoll = select.epoll()
    epoll.register(wsserver.socket.fileno(), select.EPOLLIN)
    try:
        client_map = {}
        while wsserver.run:
            events = epoll.poll(1)
            for fileno, event in events:
                if fileno == wsserver.socket.fileno():
                    channel, details = wsserver.socket.accept()
                    channel.setsockopt(socket.SOL_SOCKET, socket.SO_KEEPALIVE, 1)
                    aclient = wsclient.WSClient(channel, wsserver, process_server.client_manager)
                    client_map[channel.fileno()] = aclient
                    epoll.register(channel.fileno(), select.EPOLLIN )
                    log('Accepting client on %s' % current_process())
                    aclient.do_handshake()

                elif event & select.EPOLLIN:
                        aclient = client_map[fileno]
                        threading.Thread(target=aclient.interact).start()

    except Exception, e:
        log(e)
    finally:
        epoll.unregister(wsserver.socket.fileno())
        epoll.close()
        wsserver.socket.close()

class WSServer():

    def __init__(self, address, port, connections):
        self.address = address
        self.port = port
        self.connections = connections
        self.onopen = onopen
        self.onclose = onclose
        log('server init')
        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.socket.setsockopt(socket.SOL_SOCKET, socket.SO_KEEPALIVE, 1)
        self.socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
        #self.socket.setblocking(0)
        self.socket.bind((self.address, int(self.port)))
        self.socket.listen(self.connections)

    def run(self, *args):
        multiprocessing.log_to_stderr(logging.DEBUG)
        log("Run server")
        try:

            log("Starting Server")
            self.run = True
            serve_forever = serve_forever_epoll
            for i in range(self.num_process-1):
                log('Starting Process')
                Process(target=serve_forever,args=(self,)).start()
            serve_forever(self)

        except Exception as e:
            log("Exception-- %s " % e)
            pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:19:19.587

好的，所以最后这个奇怪的案例是由我正在使用的另一个模块引起的。我使用 Pyro4 作为管理器来跟踪哪个进程拥有哪个客户端。这大大简化了 IPC，也允许我基于一些 user_data 进行一些客户端过滤。

问题是 Pyro4 守护进程在 MainProcess 上运行，但不在 Main Thread 上运行！...只要我的进程少于 4 个，一切都很好（不要问我为什么）。在主进程 + 线程事件循环中移动 Pyro，它工作得很好！所以现在，我能够为同一个监听端口实现 8、16 或 32 个进程，以及生成新配置来复制它或为 websocket 服务器公开一个新端点！

感谢您的贡献，对不起您的时间...

# ruby - 如何在 Middleman / Padrino 中创建视频的相对路径？

> ID：12011476
> 
> 赞同：0
> 
> 时间：2012-08-17T18:46:22.487
> 
> 标签：ruby, padrino, middleman

我正在使用`set :relative_links, true`我的中间人项目。这适用于`image_tag`and `link_to`，但是如何创建指向静态资产（如`/videos`目录中的视频）的相对链接？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:05:33.453

check this I think this is what you need

[https://github.com/middleman/middleman/issues/245](https://github.com/middleman/middleman/issues/245)

# ruby-on-rails - 如何根据父模型设置模型属性？

> ID：12011477
> 
> 赞同：0
> 
> 时间：2012-08-17T18:46:23.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想在子模型的父模型更改时为其设置一个属性

这是一个例子：

```
create_table "children", :force => true do |t|
  t.integer "parent_id"
  t.string  "parent_type"
  t.integer "foo_id"
end

create_table "fathers", :force => true do |t|
  t.integer "foo_id"
end

create_table "mothers", :force => true do |t|
  t.integer "foo_id"
end

create_table "foos", :force => true do |t|
end

class Foo < ActiveRecord::Base
end

class Child < ActiveRecord::Base
  belongs_to :parent, :polymorphic => true
  belongs_to :foo
end

class Father < ActiveRecord::Base
  belongs_to :foo
end

class Mother < ActiveRecord::Base
  belongs_to :foo
end 
```

现在，当我执行以下操作时，我希望从父级设置 child.foo_id：

```
foo = Foo.new {|foo| foo.id = 1}
parent = Father.new {|father| father.foo = foo}
child = Child.new
child.parent = parent 
```

我需要`foo_id`立即设置，而不是在`before_validation`回调或类似的情况下。

这是一个简化的例子，在实际情况下我有更多的多态类型。我知道这可以通过对父亲和母亲`after_add`的关联进行回调来完成`has_many`，但如果可能的话，我宁愿不必添加 has_many 关联，因为这需要我在更多地方添加代码。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:12:07.807

我不清楚你想要达到什么目的。

可能是这个

```
parent = Parent.new(foo_id=>123456)
child = Child.new(:parent=>parent,:foo_id=>parent.foo_id)

if parent.save
   child.save
end 
```

或者

```
parent = Parent.new(foo_id=>123456)

if parent.save
   Child.create(:parent=>parent,:foo_id=>parent.foo_id)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-11T15:33:27.573

不确定这是否可行，但也许您可以覆盖模型`parent`中的设置器`Child`

```
def parent=(p)
  self.foo_id = p.foo_id
  super(p)
end 
```

# c# - 向进程添加参数不起作用？

> ID：12011478
> 
> 赞同：0
> 
> 时间：2012-08-17T18:46:25.857
> 
> 标签：c#, process, arguments

我得到了这个用 C# WinForms 编写的程序。

我正在使用 system.diagnostic 创建一个 CMD 进程。使用那个 cmd 我想要一些参数，但它们不存在或不工作：S 不知道为什么？！

注意：我不确定如何使用超过 1 个参数，如果我错了，请纠正我：D 我正在尝试复制“copy /b %filename% lpt1”命令....

这是我的代码：

```
 public void OutputBtn_Process_Click(object sender, EventArgs e)
    {
        foreach (FileInfo fi in listBox1.Items)
        {
            Process process1 = new Process();
            process1.StartInfo.UseShellExecute = false;
            process1.StartInfo.Arguments = "copy /b myfile.txt test.txt";
            //process1.StartInfo.LoadUserProfile = true;
            process1.StartInfo.FileName = "cmd.exe";
            process1.StartInfo.WorkingDirectory = Path.GetDirectoryName(fi.FullName);
            process1.Start();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:50:59.057

```
string strCmdText;
strCmdText= "/C copy /b myfile.txt test.txt";
System.Diagnostics.Process.Start("CMD.exe",strCmdText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:51:22.160

尝试这个

```
 process1.StartInfo.Arguments = "/C \"copy /b myfile.txt LPT1:\""; 
```

[Windows 7 命令行工具 cmd.exe 上的文档](http://technet.microsoft.com/en-us/library/6ec588db-31a9-4a73-a970-65a2c6f4abbe)

# spring - ibatis交易泄露

> ID：12011479
> 
> 赞同：1
> 
> 时间：2012-08-17T18:46:27.073
> 
> 标签：spring, transactions, ibatis, apache-commons-dbcp

假设我有一个使用 ibatis 2 和 spring 1 的应用程序。我有一个调用 dao 方法的外部类。如果运行以下代码会发生什么：

```
// external class

public void doSomething() {
    try {
        daoLayer.startTransaction();
        daoLayer.firstOperation();
        daoLayer.secondOperation();
    } finally {
        daoLayer.endTransaction();
    }
}

// dao layer which extends from org.springframework.orm.ibatis.support.SqlMapClientDaoSupport.SqlMapClientDaoSupport

public void startTransaction() { sqlMap.startTransaction(); }
public void firstOperation() { sqlMap.update("someQuery"); }
public void secondOperation() { sqlMap.update("someOtherQuery"); }
public void endTransaction() { sqlMap.endTransaction(); } 
```

1.  这段代码会导致数据库连接泄露吗？
2.  结束事务是否会在执行 startTransaction、firstOperation 和 secondOperation 方法的同一事务/数据库连接上运行？或者 dbcp/ibatis 可能会从池中选择不同的连接？
3.  我可以做些什么来测试并确保所有操作都使用相同的连接并且事务正常工作？
4.  （通过编辑添加） - 如果我将所有逻辑移到 dao 中的单个方法中，会有什么变化吗？这样交易会更安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:21:32.523

`Will this code cause database connections to be leaked?`

不，但要提交数据，您需要`sqlMap.commitTransaction()`在`daoLayer.secondOperation()`.

`Will end transaction be run on the same transaction/db connection which executed the startTransaction, firstOperation, and secondOperation methods? Or might dbcp/ibatis pick a different connection out of the pool?`

是的..如果要打开一个事务，您需要关闭它，否则数据库服务器不会关闭事务，它将根据服务器设置过期。

`What could I do to test and make sure that the same connection is used for all the operations and that the transaction is working correctly?`

在 java 中：检查日志以获取连接 ID。您还可以检查数据库服务器以获取分配的连接 ID。

`Would anything change if I moved all my logic into a single method in the dao? Would that be more transaction safe?`

无论如何，如果您在单个事务中具有单个或多个 DAO 操作。

# r - R ifelse 条件与每小时数据：连续 NA 的频率

> ID：12011484
> 
> 赞同：2
> 
> 时间：2012-08-17T18:46:54.300
> 
> 标签：r

在 sebastian-c 的帮助下，我发现了日常数据的问题。请参阅：[R ifelse 条件：连续 NA 的频率](https://stackoverflow.com/questions/11697833/r-ifelse-condition-frequency-of-continuously-na)

现在我有一个包含每小时数据的数据集：

```
set.seed(1234)  
day <- c(rep(1:2, each=24))  
hr <- c(rep(0:23, 2))  
v <- c(rep(NA, 48))   
A <- data.frame(cbind(day, hr, v))  
A$v <- sample(c(NA, rnorm(100)), nrow(A), prob=c(0.5, rep(0.5/100, 100)), replace=TRUE) 
```

我需要做的是：如果有更多（> =）4个连续丢失的白天（7AM-7PM）或> = 3个连续丢失的夜间（7PM-7AM），我将从数据中删除一整天帧，否则只运行线性插值。因此，第二天应该从数据框中完全删除，因为在白天（上午 7 点到上午 10 点）有 4 个连续的 NA。结果最好是保留数据帧。请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:23:26.697

If I modify the `NA_run` function from the question you linked to take a variable named `v` instead of `value` and return the boolean rather than the data.frame:

```
NA_run <- function(x, maxlen){
  runs <- rle(is.na(x$v))
  any(runs$lengths[runs$values] >= maxlen)
} 
```

I can then write a wrapper function to call it twice for daytime and nighttime:

```
dropfun <- function(x) {
  dt <- x$hr > 7 & x$hr < 19
  daytime <- NA_run(x[dt,], 4)
  nighttime <- NA_run(x[!dt,], 3)

  any(daytime, nighttime)
} 
```

Which gives me a data.frame of days to drop.

```
> ddply(A, .(day), dropfun)
  day    V1
1   1  TRUE
2   2 FALSE
> 
```

We can alter the `dropfun` to return the dataframe instead though:

```
dropfun <- function(x) {
  dt <- x$hr > 7 & x$hr < 19
  daytime <- NA_run(x[dt,], 4)
  nighttime <- NA_run(x[!dt,], 3)

  if(any(daytime, nighttime)) NULL else x
}

> ddply(A, .(day), dropfun)
   day hr           v
1    2  0          NA
2    2  1          NA
3    2  2  2.54899107
4    2  3          NA
5    2  4 -0.03476039
6    2  5          NA
7    2  6  0.65658846
8    2  7  0.95949406
9    2  8          NA
10   2  9  1.08444118
11   2 10  0.95949406
12   2 11          NA
13   2 12 -1.80603126
14   2 13          NA
15   2 14          NA
16   2 15  0.97291675
17   2 16          NA
18   2 17          NA
19   2 18          NA
20   2 19 -0.29429386
21   2 20  0.87820363
22   2 21          NA
23   2 22  0.56305582
24   2 23 -0.11028549
> 
```

# scala - Scala Swing：更改 BorderPanel 中央组件新组件不可见

> ID：12011485
> 
> 赞同：2
> 
> 时间：2012-08-17T18:46:56.317
> 
> 标签：scala, scala-swing

我正在更改 Scala Swing 边框面板的中心区域。旧组件消失了，但新组件没有出现，直到我用鼠标手动调整窗口大小。我尝试过使用不同的组件并重新绘制，但除了用鼠标手动调整窗口大小外，没有什么能让新组件出现。

```
def splitDisp(mapCanv: VistaIn): Unit =
{
  val canv2 = newMapCanv         
  panel.layout(canv2) = BorderPanel.Position.Center
  canv2.repaint         
  thisScn.repaint //ref to the Frame instance
  panel.repaint 
  thisScn.repaint
  canv2.repaint
} 
```

我在 Windows 7 中使用 2.10.0M5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:07:26.237

尝试调用`revalidate()`然后`repaint()`。

# html - 更适合使用 a 或 a 列表？ 我有以下内容： 我已经通过列表实现了这一点。这需要大量的 CSS。我想添加标题（“操作系统”、“百分比”），这将需要更多的 CSS 技巧 使用表格可能更简单。 一般来说，首选方法是什么：表格还是 ul/list？

> ID：12011487
> 
> 赞同：-1
> 
> 时间：2012-08-17T18:47:12.100
> 
> 标签：html, css, layout

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:50:27.353

我会用桌子。当您拥有像您这样的表格数据格式时，没有理由回避表格。您将它们用于创建它们的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:56:24.007

答案实际上是意见/经验问题，而不是最终决定/事实（我知道我会因为这样说而被否决，但我认为这是真的）。`Tables`最初并不打算用于布局，即使使用它们可能会使事情变得更容易**。**按照标准来说，使用`ul`带有大量样式的 a 是“好的”。现在这取决于您的想法；

*   `tables`技术上的工作，即使这不是他们的目的，有些人会取笑您网站的 HTML。
*   好的 CSS（当它**非常**好并且不会破坏窗口调整大小时的所有定位时）很好，虽然更难使用/编写。

你做决定！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:50:13.827

这是一张桌子，因为 ul 没有列。

修复 ul 中的列可能有点棘手，而它是在表中自动完成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T18:51:00.990

首选始终是让 HTML 在语义上匹配内容。由于您拥有的是操作系统的“列表”，因此您应该使用无序列表 (UL/LI) 来实现它们。如果要呈现的内容是有意义的数据，例如在电子表格中，那么最好将其实现为表格。

# asp.net-mvc - MVC 4 安装失败

> ID：12011496
> 
> 赞同：12
> 
> 时间：2012-08-17T18:47:55.820
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在尝试将 MVC 4 安装到我的桌面。我是办公室里唯一遇到这个问题的人，尽管我们都有相同的机器和相同的软件。我不确定问题是什么。安装会打印一个日志文件，但我不知道它是什么意思。如果有人有答案，我将不胜感激。这是日志文件：

```
DownloadManager Information: 0 : Loading product xml from: https://go.microsoft.com/?linkid=9810537
DownloadManager Information: 0 : https://go.microsoft.com/?linkid=9810537 responded with 302
DownloadManager Information: 0 : Response headers:
HTTP/1.1 302 Found
Cache-Control: private
Content-Length: 175
Content-Type: text/html; charset=utf-8
Expires: Fri, 17 Aug 2012 17:13:22 GMT
Location: https://www.microsoft.com/web/webpi/4.0/webproductlist.xml
Server: Microsoft-IIS/7.5
X-AspNet-Version: 2.0.50727
Set-Cookie: MC1=GUID=c6f89ed006465f41bf8ce6e310c073fb&HASH=d09e&LV=20128&V=3;    domain=microsoft.com; expires=Sun, 03-Oct-2010 07:00:00 GMT; path=/
X-Powered-By: ASP.NET
Date: Fri, 17 Aug 2012 17:14:22 GMT

DownloadManager Information: 0 : https://www.microsoft.com/web/webpi/4.0/webproductlist.xml responded with 304
DownloadManager Information: 0 : Response headers:
HTTP/1.1 304 Not Modified
Cache-Control: max-age=900
Accept-Ranges: bytes
ETag: "d77eb3a9227bcd1:0"
Server: Microsoft-IIS/7.5
P3P: CP="ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD TAI TELo OUR SAMo CNT COM INT NAV ONL PHY PRE PUR UNI"
X-Powered-By: ASP.NET
X-Powered-By: ARR/2.5
X-Powered-By: ASP.NET
Date: Fri, 17 Aug 2012 17:14:21 GMT

DownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\Users\ppprog6202\AppData\Local\Microsoft\Web Platform Installer\-477760839.xml.temp
DownloadManager Warning: 0 : Could not resolve keyword ID Sharepoint
DownloadManager Warning: 0 : Could not resolve keyword ID Office
DownloadManager Warning: 0 : Could not resolve keyword ID Sharepoint
DownloadManager Warning: 0 : Could not resolve keyword ID Office
DownloadManager Warning: 0 : Could not resolve keyword ID SQL
DownloadManager Warning: 0 : Could not resolve keyword ID SQL
DownloadManager Warning: 0 : Could not resolve keyword ID WIF
DownloadManager Warning: 0 : Could not resolve keyword ID identity
DownloadManager Warning: 0 : Could not resolve keyword ID federation
DownloadManager Warning: 0 : Could not resolve keyword ID claims
DownloadManager Warning: 0 : Could not resolve keyword ID authentication
DownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 1, minorSP: 0, productType: 6, architecture: x64
DownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/4.0/webapplicationlist.xml
DownloadManager Information: 0 : https://www.microsoft.com/web/webpi/4.0/webapplicationlist.xml responded with 304
DownloadManager Information: 0 : Response headers:
HTTP/1.1 304 Not Modified
Cache-Control: max-age=900
Accept-Ranges: bytes
ETag: "43da3ca8137bcd1:0"
Server: Microsoft-IIS/7.5
P3P: CP="ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD TAI TELo OUR SAMo CNT COM INT NAV ONL PHY PRE PUR UNI"
X-Powered-By: ASP.NET
X-Powered-By: ARR/2.5
X-Powered-By: ASP.NET
Date: Fri, 17 Aug 2012 17:14:22 GMT

DownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\Users\ppprog6202\AppData\Local\Microsoft\Web Platform Installer\251486345.xml.temp
DownloadManager Warning: 0 : Could not resolve keyword ID Katalready
DownloadManager Warning: 0 : Could not resolve keyword ID Katalready
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID Katalready
DownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight
DownloadManager Warning: 0 : Could not resolve keyword ID Katalready
DownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 1, minorSP: 0, productType: 6, architecture: x64
DownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/4.0/mediaproductlist.xml
DownloadManager Information: 0 : https://www.microsoft.com/web/webpi/4.0/mediaproductlist.xml responded with 304
DownloadManager Information: 0 : Response headers:
HTTP/1.1 304 Not Modified
Date: Fri, 17 Aug 2012 17:14:22 GMT
Etag: "1b51c01e6f4ecd1:0"
Cache-Control: max-age=900

DownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\Users\ppprog6202\AppData\Local\Microsoft\Web Platform Installer\598799360.xml.temp
DownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 1, minorSP: 0, productType: 6, architecture: x64
DownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/4.0/toolsproductlist.xml
DownloadManager Information: 0 : https://www.microsoft.com/web/webpi/4.0/toolsproductlist.xml responded with 304
DownloadManager Information: 0 : Response headers:
HTTP/1.1 304 Not Modified
Date: Fri, 17 Aug 2012 17:14:22 GMT
Etag: "4e6536ff8276cd1:0"
Cache-Control: max-age=900

DownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\Users\ppprog6202\AppData\Local\Microsoft\Web Platform Installer\672503665.xml.temp
DownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 1, minorSP: 0, productType: 6, architecture: x64
DownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/4.0/enterpriseproductlist.xml
DownloadManager Information: 0 : https://www.microsoft.com/web/webpi/4.0/enterpriseproductlist.xml responded with 304
DownloadManager Information: 0 : Response headers:
HTTP/1.1 304 Not Modified
Date: Fri, 17 Aug 2012 17:14:22 GMT
Etag: "a68a64382f88cc1:0"
Cache-Control: max-age=900

DownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\Users\ppprog6202\AppData\Local\Microsoft\Web Platform Installer\1505006577.xml.temp
DownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 1, minorSP: 0, productType: 6, architecture: x64
DownloadManager Information: 0 : Getting ratings file from http://go.microsoft.com/?linkid=9752395
DownloadManager Information: 0 : http://go.microsoft.com/?linkid=9752395 responded with 302
DownloadManager Information: 0 : Response headers:
HTTP/1.1 302 Found
Cache-Control: private
Content-Length: 203
Content-Type: text/html; charset=utf-8
Expires: Fri, 17 Aug 2012 17:13:24 GMT
Location: http://www.microsoft.com/web/handlers /WebPI.ashx?command=getatomfeedwithavgratingquery
Server: Microsoft-IIS/7.5
X-AspNet-Version: 2.0.50727
Set-Cookie: MC1=GUID=5dcd22f7d0af19428d827c6bc0604293&HASH=f722&LV=20128&V=3; domain=microsoft.com; expires=Sun, 03-Oct-2010 07:00:00 GMT; path=/
X-Powered-By: ASP.NET
Date: Fri, 17 Aug 2012 17:14:24 GMT

DownloadManager Information: 0 : Contextual entry products: MVC4VS2010
DownloadManager Information: 0 : Adding product ASP.NET MVC 4 (VS 2010) (MVC4VS2010) to cart
DownloadManager Information: 0 : Contextual navigation to product 'MVC4VS2010'
DownloadManager Information: 0 : Ratings file loaded successfully
DownloadManager Information: 0 : Adding product 'MVC4VS2010'
DownloadManager Information: 0 : Adding dependency product 'MVC4VS2010_Only
DownloadManager Information: 0 : Setting current install to 1
DownloadManager Information: 0 : Starting install sequence
DownloadManager Information: 0 : Downloading file 'http://download.microsoft.com/download/2/F/6/2F63CCD8-9288-4CC8-B58C-81D109F8F5A3/AspNetMVC4Setup.exe' to: C:\Users\ppprog6202\AppData\Local\Temp\tmp6948.tmp
DownloadManager Information: 0 : Content-disposition header: attachment
DownloadManager Information: 0 : File 'C:\Users\ppprog6202\AppData\Local\Microsoft\Web Platform Installer\installers\MVC4VS2010_Only\F46B534A9D488ABEC38EFB67571F52B4A6FC43E3\AspNetMVC4Setup.exe' already exists, deleting old copy of the file
DownloadManager Information: 0 : Moving downloaded file 'C:\Users\ppprog6202\AppData\Local\Temp\tmp6948.tmp' to: C:\Users\ppprog6202\AppData\Local\Microsoft\Web Platform Installer\installers\MVC4VS2010_Only\F46B534A9D488ABEC38EFB67571F52B4A6FC43E3\AspNetMVC4Setup.exe
DownloadManager Information: 0 : Starting EXE command for product 'ASP.NET MVC 4 Installer (VS 2010)- Default Locale'. Commandline is: 'C:\Users\ppprog6202\AppData\Local\Microsoft\Web Platform Installer\installers\MVC4VS2010_Only\F46B534A9D488ABEC38EFB67571F52B4A6FC43E3\AspNetMVC4Setup.exe /q /log C:\Users\PPPROG~1\AppData\Local\Temp\MVC4VS2010_Only_install.htm'. Process Id: 3676
DownloadManager Information: 0 : Install exit code for product 'ASP.NET MVC 4  Installer (VS 2010)- Default Locale' is -2147023254
DownloadManager Error: 0 : Install return code for product 'ASP.NET MVC 4 Installer (VS 2010)- Default Locale' is Failure
DownloadManager Warning: 0 : Dependency failed for product 'ASP.NET MVC 4 (VS 2010)'. Skipping install
DownloadManager Information: 0 : Product ASP.NET MVC 4 Installer (VS 2010)- Default Locale done install completed
DownloadManager Information: 0 : Increasing current install to 2
DownloadManager Information: 0 : Product ASP.NET MVC 4 (VS 2010) had a dependency fail. Increasing install product to 3 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T18:52:25.577

WebPI 有时会很糟糕（对我来说总是如此）。

我建议您自己下载并安装 MSI：

*   [适用于 Visual Studio 2010 SP1 和 Visual Web Developer 2010 SP1 的 ASP.NET MVC 4](http://www.microsoft.com/download/details.aspx?id=30683)

不过，请确保您之前已经为 VS2010 安装了 SP1。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T11:59:11.283

在等待第 2 步完成 10 多分钟后，我决定进行谷歌搜索。对于“asp.net mvc 4 安装程序”，谷歌建议“asp.net mvc 4 安装程序挂起”。当我阅读这个线程时，安装程​​序继续执行第 3 步。所以我建议等待大约半小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:15:06.553

我有这个问题。

webpi 似乎卡住了，所以我取消了它。我尝试直接运行安装程序：http: [//download.microsoft.com/download/2/F/6/2F63CCD8-9288-4CC8-B58C-81D109F8F5A3/AspNetMVC4Setup.exe](http://download.microsoft.com/download/2/F/6/2F63CCD8-9288-4CC8-B58C-81D109F8F5A3/AspNetMVC4Setup.exe)

我收到一个错误：

```
Install completed (Failure): 'ASP.NET MVC 4 Installer (VS 2010)- Default Locale'
MVC4VS2010_Only : Failed.

DependencyFailed: ASP.NET MVC 4 Language Packs Installer
DependencyFailed: ASP.NET MVC 4 with Language Packs (August 2012)

Verifying successful installation...
ASP.NET MVC 4 Installer (VS 2010)- Default Locale  False
ASP.NET MVC 4 Language Packs Installer             False
ASP.NET MVC 4 with Language Packs (August 2012)    False
Install of Products: FAILURE 
```

所以我决定手动运行安装程序：

[http://www.microsoft.com/en-us/download/details.aspx?id=3556](http://www.microsoft.com/en-us/download/details.aspx?id=3556)

并得到这个错误：

```
0x80070652 - Another installation is already in progress. Complete that installation before proceeding with this install. 
```

虽然有一个指向日志文件的链接，但我无法打开它。

查看进程资源管理器（sysinternals），我可以看到正在安装此更新：http: [//www.microsoft.com/en-us/download/details.aspx?id=3556](http://www.microsoft.com/en-us/download/details.aspx?id=3556)

所以我希望安装它后我将能够再次运行安装程序。会让大家知道。

# spotify - libspotify：如何确定曲目 uri 是否正确且可播放？

> ID：12011497
> 
> 赞同：3
> 
> 时间：2012-08-17T18:47:55.680
> 
> 标签：spotify

这个问题听起来很简单，但我找不到检查轨道 uri 是否正确的方法。

例如，通过给定的有效曲目 uri **spotify:track:5Z7ygHQo02SUrFmcgpwsKW**播放曲目的正常过程是：

1) 通过 sp_link_create_from_string(const char *$track_uri) 获取 sp_link*

2) 通过 sp_link_as_track(sp_link*) 获取 sp_track*

3) sp_track_add_ref(sp_track*)

4) 如果 sp_track_error() 返回 SP_ERROR_OK 或 SP_ERROR_IS_LOADING 但 metadata_updated 和 SP_ERROR_OK 则 sp_session_player_load 和 sp_session_player_play 加载和播放曲目。

5) sp_track_release() 和 sp_session_player_unload() 当它是轨道结束时。

现在，如果用户在 spotify track uri 上打错字并尝试播放**spotify:track:5Z7ygHQo02SUrFmcgpwsKQ**（最后一个字符**Q**是错字，应该是**W**）。过程中所有可能的错误检查都不会返回任何错误：

步骤 1) sp_link 不为 NULL

步骤 2) sp_track* 不为 NULL

步骤 3) 返回 SP_ERROR_OK

步骤 4) sp_track_error() 返回 SP_ERROR_IS_LOADING，metadata_updated 永远不会被调用，当然程序会挂起。

加载轨道之前的检查无法找出轨道 uri 的无效性。API **sp_track_availability**听起来像是一种方式，但是如果没有加载轨道，它总是会返回 NOT AVAILABLE，但如果轨道 uri 不正确，则永远不会加载轨道。

我是否遗漏了什么或误解了 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:44:13.650

您可以通过检查以下链接类型来检查 uri 是否有效：

```
enum    sp_linktype { 
  SP_LINKTYPE_INVALID = 0, 
  SP_LINKTYPE_TRACK = 1, 
  SP_LINKTYPE_ALBUM = 2, 
  SP_LINKTYPE_ARTIST = 3, 
  SP_LINKTYPE_SEARCH = 4, 
  SP_LINKTYPE_PLAYLIST = 5, 
  SP_LINKTYPE_PROFILE = 6, 
  SP_LINKTYPE_STARRED = 7, 
  SP_LINKTYPE_LOCALTRACK = 8, 
  SP_LINKTYPE_IMAGE = 9 
} 
```

这使我们有可能像这样执行链接检查：

1.  检查 sp_link_type(link) == SP_LINKTYPE_TRACK
2.  从 sp_link_as_track(link) 或 sp_track_get_playable(sp_link*, sp_session*) 创建 sp_track* 轨道
3.  等待它被加载，然后检查可用性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:27:22.803

将曲目uri spotify:track:5Z7ygHQo02SUrFmcgpwsKW复制到浏览器地址栏，回车，会自动切换到spotify应用并定位到该专辑。

# browser - 如何使用特定电子邮件启动 gmail 客户端

> ID：12011504
> 
> 赞同：0
> 
> 时间：2012-08-17T18:48:12.487
> 
> 标签：browser, gmail, imap, launch

我有一个使用 IMAP 检索收件箱中的 gmail 项目的浏览器应用程序。我有电子邮件的“seqno”和 Message-ID，可以获取内容。我已经使用该电子邮件作为链接创建并呈现了 HTML。我想做的是启动另一个浏览器，该电子邮件显示在 gmail 客户端中。

我注意到 Gmail 的 URL 与 Message-ID 或“seqno”之间没有关联。如何将我的 ID 转换为可以启动正确电子邮件的 URL？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:04:31.170

我不确定你能不能。但是请检查[Gmail 的 IMAP Extensions](https://developers.google.com/google-apps/gmail/imap_extensions)，特别是查看 X-GM-MSGID 是否与 URL 相关。

# javascript - 如何判断页面是否处于打印视图中？

> ID：12011506
> 
> 赞同：2
> 
> 时间：2012-08-17T18:48:15.917
> 
> 标签：javascript, printing

我在 FAQ 页面中使用了一个简单的 CSS`display`属性切换开关。但是，我希望页面在打印时显示所有内容。现在发生的情况是，如果您转到页面并进入打印模式，它将打开所有关闭的项目，因为我将此代码添加到我的 print.css 样式表中......`none``block`

```
.faq
{
    display:block;
} 
```

但是，如果您打开一个项目，再次将其关闭，然后进入打印模式，该项目将保持关闭状态。

我的 JS 代码看起来像这样......

` var divNum = 新数组（“faq1”、“faq2”、“faq3”、“faq4”、“faq5”、“faq6”、“faq7”、“faq8”、“faq9”、“faq10”、“faq11” ，“常见问题12”，“常见问题13”）；

```
function openClose(theID) {
    for (var i = 0; i < divNum.length; i++) {
        if (divNum[i] == theID) {
            if (document.getElementById(divNum[i]).style.display == "block") { document.getElementById(divNum[i]).style.display = "none" }
            else { document.getElementById(divNum[i]).style.display = "block" }
        }
    }
}` 
```

HTML看起来像这样

```
<a class="faq" onClick="openClose('faq1')">Question?</a><br />
<p id="faq1" class="faq">Answer</p> 
```

当我进入打印模式时，我能做些什么来确保所有东西都打开了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:56:10.473

我不会直接使用您的 JS 代码操作元素的显示状态，而是在 CSS 中定义类，然后使用 JS 简单地切换类。

如果您的类仅针对@media 屏幕定义，那么您不必担心任何常见问题解答条目的当前显示状态。

编辑：例如，在您的 CSS 文件中：

```
@media screen .faq.open {
display: block;
}

@media screen .faq {
display: none;
} 
```

然后你的 JS 看起来像：

```
function openClose(theID) {
    for (var i = 0; i < divNum.length; i++) {
        if (divNum[i] == theID) {
            if (document.getElementById(divNum[i]).className.match(new RegExp('(\\s|^)open(\\s|$)'))) { document.getElementById(divNum[i]).className = ele.className.replace(new RegExp('(\\s|^)open(\\s|$)'), ' '); }
            else { document.getElementById(divNum[i]).className += " open" }
        }
    }
} 
```

请注意，我没有对此进行测试，因此可能存在一些语法错误。此外，我的大多数项目已经包含 jQuery，所以我通常使用的方法是更简洁的代码。我在这里没有使用 jQuery，因为您没有在代码示例中使用它。

# matlab - 将下一行保存到 .mat

> ID：12011508
> 
> 赞同：0
> 
> 时间：2012-08-17T18:48:32.207
> 
> 标签：matlab

我需要将一些数据保存到现有表中。所以我有列名和一行有数据。现在我得到第二组信息，我需要把它放在第二行，依此类推。你能指出我在哪里可以找到这个吗？到目前为止，我已经这样做了。用 save( -struct) 玩过，但似乎不起作用。

```
if exist('table.mat','file')
...
...
else
    dataCell = [name,trez,score];
    colNames = {'Name','R','G','B','Shape'};
    uisave({'colNames','dataCell'},'table');
end 
```

所以我检查是否有`table.mat`，如果没有，它会用一些传递的值创建它。现在`table.mat`存在我需要放置第二个值而不删除其他值。

**更新**

好的，我编写了这样的代码：

```
if exist('table.mat','file')
        dataCell = [name,num2cell(trez),num2cell(score)];
        save('table.mat', '-append','dataCell');
    else
        dataCell=[name,num2cell(trez),num2cell(score)];
        colNames={'Name','R','G','B','Shape'};
        uisave({'colNames','dataCell'},'table');
    end 
```

但是当我使用以下方法保存数据时：

```
 dataCell = [name,num2cell(trez),num2cell(score)];
   save('table.mat', '-append','dataCell'); 
```

它删除旧条目。可以说在我的表格信息中如下：

姓名 | 右 | 克| 乙| 形状 |

橙色 | 239 | 135 | 2 | 0.87

然后，如果我尝试保存另一个条目，例如：

苹果 | 100 |31 |56 | 0.79

它删除了橙色。那么我需要添加一些东西或使用其他方法来保存这种信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:02:04.040

该`save`命令可以带一个`-append`标志，它允许您将数据添加到现有文件而不覆盖旧数据。但是对于 .mat 文件，`-append`只允许您添加新变量。如果您指定 .mat 文件中已经存在的变量名称，它将被覆盖。

但是，如果您要保存到 ASCII 文件，则只需将数据附加到文件末尾即可。

这为您提供了两个选项。

1.  使用 .mat 文件保存，但对于要保存的每个变量，您需要从 .mat 文件加载任何具有相同名称的变量，将旧变量与新变量组合，然后将其重新保存到文件中。
2.  使用 ASCII 格式保存矩阵，然后在加载文件时从 ASCII 转换。

**更新**：重新阅读您的原始问题后，我不得不问为什么不在单个操作中保存而不是逐行保存？

# c++ - 在 struct dirent 文件名中可以 有非标准字符吗？

> ID：12011510
> 
> 赞同：0
> 
> 时间：2012-08-17T18:48:35.870
> 
> 标签：c++, character-encoding

在`struct dirent`成员中可以`d_name`有 unicode 但不是 ascii 的字符吗？我测试过，它适用于“é”，但我不确定这是否是因为“é”在 ascii 中。什么类型`d_name`，如果是，`char`那么我被箍住了，但如果是`wchar_t`我就得救了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:15:50.250

开放组基本规范规定`struct dirent`应具有以下未指定大小的成员：

```
char d_name[]; 
```

在符合规范的实现中，它是类型`char[]`，但这并不一定意味着它不能存储 Unicode 字符；该规范不需要支持多个字符集（或可移植字符集之外的字符），但它也没有禁止它（`'é'`顺便说一句，不是 ASCII）。

实际上，支持的字符集取决于您的语言环境。在 C 语言中，字符串 in`d_name`存储为“多字节”字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:51:02.863

这取决于您的平台和文件系统。例如，HFS+ 文件系统使用 UTF-16 在内部存储文件名并将它们公开为 UTF-8，因此我认为`char`dirent 中的数组应该包含 UTF-8 字符串（无论您的语言环境如何）。

NTFS 也以 UTF-16 存储文件名，但它们的公开方式取决于平台。Windows 在系统区域设置和 UTF-16 之间进行转换。另一个平台可能会在 UTF-16 和 UTF-8 之间进行转换。另一个平台可以在 UTF-16 和直接环境的语言环境之间进行转换。

其他文件系统只是将文件名存储和公开为字节数组，因此 dirent 将包含最初存储的任何数据。这通常是语言环境编码中的字符串，但不能保证。

# vb.net - 搜索注册表项是否存在

> ID：12011514
> 
> 赞同：0
> 
> 时间：2012-08-17T18:48:45.433
> 
> 标签：vb.net, .net

是否有人知道任何可以搜索特定注册表项是否存在的脚本，如果不存在，则创建它？

请在 vb.NET 中编写此代码......对不起我的英语不好。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:56:11.107

从 MSDN 文档中尝试使用 Microsoft.Win32.RegistryKey 的这段代码来帮助您入门。[http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx#Y3876](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx#Y3876)

您应该能够修改它以执行一个简单的循环以通过 equals 或 contains 或任何方式进行搜索，然后创建键和必要的子键。

# c# - 通过 Javascript 设置 C# 属性值

> ID：12011515
> 
> 赞同：0
> 
> 时间：2012-08-17T18:48:46.650
> 
> 标签：c#, javascript, asp.net, properties

我有一个 C# 属性**CategoryID**，我想在 Javascript 中设置它的值。

我正在尝试设置值**CategoryID**，如下所示：

```
var sPath = window.location.pathname;
var catId = null;

var sPage = sPath.substring(sPath.lastIndexOf('/') + 1);
if (sPage == 'xyz.aspx')
{
    <%=CommonUtility.CategoryID=4%>;
}
else if(sPage == 'zxy.aspx')
{
    <%=CommonUtility.CategoryID=5%>;
} 
```

但是通过这种方法，我总是得到**CategoryID** = 5(which is in else block) 的值。

请建议我如何根据条件获取属性值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:50:49.387

您不能从客户端 (js) 设置 C# 属性。您可以使用 ajax 做一些工作，但您根本无法操作服务器端代码。

**编辑：**

如果您仍然想知道如何获得价值，请参阅 Mike 对这一事实的解释。但真相依然存在。你不能。不可能。如果您想了解更长的解释，请查看 asp.net 的实际工作原理，它的生命周期等。简单的说法是这样的：

用户使用他的浏览器向服务器发送请求。服务器接收它，创建一个请求的页面并实例化所需的类等。然后它被解析并作为 html 发送到客户端（当然还有其他资源，如图像、css ......）。实例化的页面类以后不能被客户端访问和修改，因为它已经被服务器刷新了。每个请求都会创建一个新实例。无论如何，没有办法将 js 与 c# 交互。如果您可以使用一些 js 在远程服务器上修改 C#，您能想象会是什么样子吗？这根本没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:54:46.507

您不能以这种方式使用客户端脚本在代码隐藏中设置属性。这样做的唯一方法是使用 AJAX 将数据发送到您的服务器，尽管我很确定这不适合您的情况。

当您调用`<%=CommonUtility.CategoryID = 4%>`时，服务器在解析页面时实际上会执行该语句，然后再将其发送给客户端。属性值为 5 的原因是这两个语句都会被执行，而不管 Javascript`if`块中的逻辑如何。在服务器已经解析了这两个标签之前，浏览器实际上不会执行您的客户端代码，此时无论如何完成您想要的东西都为时已晚。

是否有任何理由您不能在页面加载时的代码隐藏中完成所有这些操作？有什么理由让你觉得这必须在 JS 中处理吗？

**编辑：**

如果您无法访问代码隐藏文件（.aspx.vb 或 .aspx.cs），则只需使用 .aspx 页面顶部的服务器脚本块

```
<% 
    If (Request.Path.ToLower().Contains("xyz.aspx")) Then
        CommonUtility.CategoryId = 4
    ElseIf (Request.Path.ToLower().Contains("zxy.aspx")) Then
        CommonUtility.CategoryId = 5
    End If
%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:57:23.750

您不能从客户端脚本设置 C# 变量，因为所有服务器代码首先运行，然后页面被发送到浏览器。

客户端代码最终将如下所示：

```
var sPath = window.location.pathname;
  var catId = null;

  var sPage = sPath.substring(sPath.lastIndexOf('/') + 1);
  if (sPage == 'xyz.aspx')
  {
    4;
  }
  else if(sPage == 'zxy.aspx')
  {
    5;
  }
} 
```

# jquery - jquery 将不透明度设置为 1.0 文本突然恢复到原始状态

> ID：12011517
> 
> 赞同：1
> 
> 时间：2012-08-17T18:48:50.567
> 
> 标签：jquery

我在这里做了一个例子：http: [//jsfiddle.net/6P6Rq/](http://jsfiddle.net/6P6Rq/)

我正在使用最新版本的 chrome。因此，基本上当文本逐渐变回完全不透明时，它会切换回其原始文本外观。我尝试使用 0.999 的不透明度而不是 1，但它的外观与 1 的文本不同。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:02:14.883

我相信问题源于 chrome 如何选择渲染它的字体不透明度变化。FF 和 IE 似乎没有同样的问题，但我确实注意到突然跳过，因为它在淡入淡出动画结束时填充了字体的宽度。

我尝试使用：

```
a { opacity: 1; -webkit-transition: 0.5s;  }
a:hover{ opacity: 0.3; -webkit-transition: 0.5s; } 
```

但它最后仍然呈现相同的“捕捉”。这真的很不幸。

将淡入淡出的速度更改得更快一点会使突然的变化看起来不那么突然，但这就是我所能想到的，因为所有其他方法似乎都会产生相同的最终结果。

# ravendb - 过滤 RavenDB 搜索结果

> ID：12011519
> 
> 赞同：1
> 
> 时间：2012-08-17T18:49:04.293
> 
> 标签：ravendb

我有一个使用 IRavenQueryable.Search 方法返回有效搜索结果的查询。但是，我想通过 .Where 方法调用进一步过滤这些结果，以便随后过滤搜索结果以仅包括那些具有匹配 ProjectId 的结果。

我的对象结构是一组项目实体，每个实体都包含一组问题实体。

我的索引创建问题搜索结果的投影，如下所示：

{Id、Key、Summary、Description、ProjectId、ProjectKey、Query}

Query 属性是关键字搜索使用的 object[]。

当我运行关键字搜索时：

var results = session.Query().AsProjection().Search(x => x.Query, "some key word");

我得到了正确的结果。但是当我尝试也应用 Where 方法时：

结果 = results.Where(i => i.ProjectId == SelectedProject.Id);

它不会过滤结果，而是包含具有匹配项目 ID 的所有其他结果。

在这种情况下，强制 Linq 或 RavenDB 的 IRavenQueryable 应用 AND 而不是 OR 的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:58:18.347

发布此问题后，我设法在 stackoverflow 的其他地方找到了答案。

这是解决方案：

[ravendb 将 Search 与 Where 相结合](https://stackoverflow.com/questions/11946417/ravendb-combining-search-with-where)

简而言之，Search 方法提供了一个额外的可选参数 [options] 以允许您指定搜索如何与查询中的其他 where 子句组合。它默认为 SearchOptions.Or，因此您需要将其显式设置为选项：SearchOptions.And。

# .htaccess - 将 www.example.com 重定向到 example.com

> ID：12011521
> 
> 赞同：1
> 
> 时间：2012-08-17T18:49:14.120
> 
> 标签：.htaccess

我在安装了 iLister CMS 的 bluehost 上托管了一个域，我面临的问题是[http://www.advett.com/admin](http://www.advett.com/admin)没有响应，因为我在 site_url 字段中注册了 advett.com/admin iLister 许可证。如何将 www.advett.com 和 www.advett.com/admin 的所有请求分别重定向到 advett.com 和 advett.com/admin？我知道它可以用 .htaccess 来完成，但直到现在我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:53:02.180

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.advett\.com [NC]
RewriteRule ^(.*)$ http://advett.com/$1 [L,R=301] 
```

# jquery - 外部 jquery 脚本不起作用

> ID：12011522
> 
> 赞同：0
> 
> 时间：2012-08-17T18:49:14.903
> 
> 标签：jquery, external

我已阅读有关此主题的所有相关文章，但没有一个解决方案适用于我。

如标题所示，我有一个不工作的外部 jquery 脚本。我最初在 php 文档中开发了脚本，它运行良好，但在我将它移到外部文件后，它完全停止工作。其他类似问题中涉及的建议解决方案均不适用。

1.  jquery 库源代码在我的脚本之前。
2.  提供给脚本的路径是正确的。
3.  脚本绑定到 $(document).ready 事件

一个奇怪的事实可能提供了一个线索，但我不知道如何解释它：在 Chrome 开发者工具的资源选项卡中，外部脚本显示为空白。没有 404 错误，因此脚本已被服务器找到并返回，但它显示为完全空白（除非您双击以在单独的选项卡中打开脚本。）

这是脚本：

```
$(document).ready(function() {
    $("#menuBrowser li").click(function() {

        if ($(this).children().is(':visible')) {
            $(this).children().hide('slow');
        } else if ($(this).children().is(':hidden')) {
            $(this).children().show('slow');
        }    
    })
})​ 
```

**更新：**我刚刚将外部脚本的内容复制回主文件，但它不起作用。我使用内联脚本恢复到较早的保存状态并且它有效。然后，我将该工作脚本复制并粘贴回一个外部文件中，它就可以工作了。当我第一次将脚本复制并粘贴到外部文件时，一定发生了一些事情，但如果我知道它是什么，那就见鬼了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:07:39.277

好吧，只是为了笑，我通过 jshint.com 运行了这个，当然打开了 JQuery 选项，它说：

```
Line 2: $("#menuBrowser li").click(function(){

Missing "use strict" statement.

Line 10: })

Missing semicolon.

Line 12: })

Missing semicolon. 
```

我希望这有帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:39:19.437

您是从 jsFiddle 或类似网站复制的吗？如果是这样，您很可能在其中有一些不可见的字符。

为了删除那些不可见的字符，手动重新输入整个脚本（不要复制粘贴），字符应该被删除。

检查控制台是否有问题。Firefox 和 WebKit 浏览器（Google Chrome、Safari）都有相当不错的 JavaScript 错误记录程序。

为什么不尝试清空缓存？也可以随时提供帮助。

如果涉及服务器端脚本，白页通常意味着服务器错误。

除非您提供更多信息，否则我现在无法为您提供任何帮助。

干杯! :)

# php - 我应该如何在 php auth 类中抛出异常？

> ID：12011525
> 
> 赞同：1
> 
> 时间：2012-08-17T18:49:29.833
> 
> 标签：php, exception

在以下 auth 类示例中抛出异常时，建议针对要处理的每种情况抛出不同的异常，例如：

```
addUser(...) {

    // normal database code here...

    switch(TRUE) {
        case ($username_exists):
            throw new UserExists('Cannot create new account. Account username ' . $un . ' already exists.');
        case ($email_exists):
            throw new EmailExists('Cannot create new account. Account email ' . $email . ' already exists.');
    }
}

   //to be called externally by...

try {
    $auth->adduser(...);
} catch (UserExists) {
    $output = 'That username is already taken.';
} catch (EmailExists) {
    $output = 'That email is already being used.';
} catch (AuthException $e) {
    $output = $e->getMessage();
}

echo $output;
} 
```

还是建议使用唯一的异常代码抛出一般“类型”的异常？例如...

```
addUser(...) {

    // normal database code here...

    switch(TRUE) {
        case ($username_exists):
            throw new AuthException('Cannot create new account. Account username ' . $un . ' already exists.', 10);
        case ($email_exists):
            throw new AuthException('Cannot create new account. Account email ' . $email . ' already exists.', 20);
    }
}

   //to be called externally by...

try {
    $auth->adduser(...);
} catch (AuthException $e) {
    switch($e->getCode()) {
        case 10:
            $output = 'That username is already taken.';
            break;
        case 20:
            $output = 'That email is already being used.';
            break;
        default:
            $output = $e->getMessage();
    }
echo $output;
} 
```

我问是因为我对例外不熟悉，而且两种解决方案似乎都同样可行。也许完全有其他解决方案？

**有趣的旁注：**直到收到一些答案后，我才意识到我在问“你的偏好是什么”的问题。我期待一个单一的推荐方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:06:05.857

一般来说，我认为最好的做法是异常应该包含一个异常条件。以 SPL 异常为例。你会抛出`InvalidUserArgumentException`and`InvalidEmailArgumentException`吗？没有。您将抛出 SPL`InvalidArgumentException`并根据详细信息（例如“无效用户”或“无效电子邮件”）更改异常消息。也就是说，恕我直言，您应该使用一个`AuthException`并且只是改变消息（就像您在第二个示例中所做的那样），而不是使用代码和开关，直接输出异常消息：

```
try {
    $auth->adduser(...);
} catch (AuthException $e) {
    $output = $e->getMessage();
}

echo $output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:18:11.157

我不会说一种方式是对的，一种方式是错误的——如果这个问题在一大群人中触及正确的神经，那么问一个“推荐这种方式还是这种方式”很容易激起一个大锅。

具体来说，关于您的问题，两者都是引发不同类型异常的有效且可接受的方法 - 我经常看到这两种方法。

然而，在几乎所有语言的大规模应用程序中，我经常看到底部方法 - 这也是我自己的个人风格/偏好。我认为抛出一个单一的“类型”异常`AuthException`，并指定一个异常代码是非常清晰和简洁的。

如果您希望它更具描述性（从编程的角度来看），您可以`enum`对代码使用伪 * 设置以提供用户友好的描述：

```
class AuthExceptionCode {
    const USER_EXISTS = 0;
    const EMAIL_EXISTS= 1;
    // ....
} 
```

用代码抛出异常：

```
throw new AuthException('error message', AuthExceptionCode::USER_EXISTS); 
```

如果您有一个实际的自定义`Exception`类，即您`extend Exception`，您可以将代码方向放在类本身中：

```
class AuthException extends Exception {
    const MISC = -1;
    const USER_EXISTS = 0;
    const EMAIL_EXISTS= 1;

    public function __construct($message, $code = self::MISC) {
        switch ($code) {
            case self::USER_EXISTS:
                // example on how to access the codes from within the class
                // ... 
```

*`Enumerations`不是 PHP 原生的，所以使用`const`是最简单的方法（不使用 3rd-party 类/插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:54:23.250

我更喜欢对可能发生的每个异常都有一个单独的 catch 语句的最佳方式，但这取决于.. 如果你发现自己有很长的异常类名称，很难理解它们的含义，那么我会将它们分组一点.

# sql - 用于删除表中最近的条目的存储过程的问题

> ID：12011529
> 
> 赞同：1
> 
> 时间：2012-08-17T18:49:51.960
> 
> 标签：sql, sql-server, tsql, stored-procedures

我写的查询是：

```
delete from featured where featuredID IN(
select top(@removeAmnt) * from featured 
order by featured.createdon asc) 
```

这似乎不起作用。我得到的错误是，“当 EXISTS 没有引入子查询时，选择列表中只能指定一个表达式。”。我不熟悉 sql 查询。我基本上试图通过他们的 createdon 字段来订购这些默认值是日期函数。同样， sp 允许传入一个值 removeAmnt，这是将从顶部选择的要删除的表条目的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:54:11.097

您很可能需要删除`*`：

```
delete from featured where featuredID IN(
select top(@removeAmnt) featuredID  from featured 
order by featured.createdon asc) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:53:47.673

你没有提到你得到了什么结果，但你在 in 子句中的选择不应该是 * 而是 featuresID。

```
delete from featured 
where featuredID IN(
                    select top(@removeAmnt) featured.featuredid from featured 
                    order by featured.createdon as
                    ) 
```

# java - 可运行的 Jar 文件不显示任何内容

> ID：12011532
> 
> 赞同：0
> 
> 时间：2012-08-17T18:50:10.733
> 
> 标签：java, image, runnable

我有一个问题，当我创建一个可运行的 jar 文件时，屏幕上没有加载任何内容。经过一些研究，我认为问题与我如何加载图像有关，但我不确定解决该问题的解决方案。

下面的代码只是我如何加载图像的一个片段。

谢谢~

```
public class Screen extends JPanel implements Runnable {
public Thread thread = new Thread(this); 

public static Image[] tileset_ground = new Image[100]; 
public static Image[] tileset_air = new Image[100]; 
public static Image[] tileset_res = new Image[100];
public static Image[] tileset_mob = new Image[100]; 
public static Image[] tileset_characters = new Image[10];

public static int myWidth, myHeight; 
public static int coinage, health;
public static int randomMob = 0;
public static int level = 1, maxLevel = 5;
public static int killed = 0;
public static int killsToWin = 0; 
public static int winTime = 4000, winFrame = 0;
public int mobsCreated = 0; 

public static boolean isFirst = true;
public static boolean isDebug = false;
public static boolean isWin = false;
public static boolean isMainMenu = true;
public static boolean exit = false;

public static boolean clicked = false;

public static Point mse = new Point(0,0); 

public static Room room; 
public static Save save;
public static Store store; 
public static MainMenu mainMenu;

public static Mob[] mobs = new Mob[100]; 

public Screen(Frame frame) {
    frame.addMouseListener(new KeyHandle());
    frame.addMouseMotionListener(new KeyHandle());
    thread.start(); 
}

public void hasWon(){
    if(killsToWin == killed){
        isWin = true;
        killed = 0;
        coinage = 10;
    }
}

public void define() {
    room = new Room(); 
    save = new Save(); 
    store = new Store(); 
    coinage = Values.coinage;
    health = Values.health;

    for(int i =0; i<tileset_ground.length; i++) {
        tileset_ground[i] = new ImageIcon("res/tileset_ground.png").getImage(); 
        tileset_ground[i] = createImage(new FilteredImageSource(tileset_ground[i].getSource(), new CropImageFilter(0,26*i,26,26)));
    }

    for(int i =0; i<tileset_air.length; i++) {
        tileset_air[i] = new ImageIcon("res/tileset_air.png").getImage(); 
        tileset_air[i] = createImage(new FilteredImageSource(tileset_air[i].getSource(), new CropImageFilter(0,26*i,26,26)));
    }

    tileset_res[0] = new ImageIcon("res/cell.png").getImage();
    tileset_res[1] = new ImageIcon("res/coin.png").getImage();
    tileset_res[2] = new ImageIcon("res/heart.png").getImage(); 
    tileset_res[3] = new ImageIcon("res/startbutton.png").getImage();
    tileset_res[4] = new ImageIcon("res/quitbutton.png").getImage();
    tileset_res[5] = new ImageIcon("res/cellchar.png").getImage();
    tileset_res[6] = new ImageIcon("res/mainmenu.png").getImage();

    tileset_mob[0] = new ImageIcon("res/pixelcody.png").getImage(); 
    tileset_mob[1] = new ImageIcon("res/floatingmob1.png").getImage();
    tileset_mob[10] = new ImageIcon("res/pixelraghev.png").getImage();

    tileset_characters[1] = new ImageIcon("res/pixelcody.png").getImage();
    tileset_characters[2] = new ImageIcon("res/pixelraghev.png").getImage();
    tileset_characters[4] = new ImageIcon("res/pixelbio.png").getImage();
    tileset_characters[3] = new ImageIcon("res/pixelpeter.png").getImage();
    tileset_characters[5] = new ImageIcon("res/pixelkat.png").getImage();
    tileset_characters[7] = new ImageIcon("res/pixelvicky.png").getImage();
    tileset_characters[6] = new ImageIcon("res/pixelkyle.png").getImage(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:53:30.890

这可能是由于启动时引发了异常。

为了从 .jar 加载，您必须稍微修改您的代码。对于您的 ImageIcon 构造函数，您需要更改它们。

```
ImageIcon whatever = new ImageIcon(ImageIO.read(getClass().getResource("path to image"))); 
```

一定要导入ImageIO：import javax.imageio.ImageIO；

但是，由于您使用的是图像数组，我建议您简单地使用 ImageIO.read() 而不要使用 ImageIcons。另外，根据我的经验，我总是必须在图像路径前加上一个“/”。

这应该有效。

我尝试查看是否出现问题的一种方法是在整个程序中尝试...捕获并捕获异常。然后我将堆栈跟踪打印到文件中。

```
try {
...
}catch(Exception e){
PrintWriter writer = new PrintWriter("trace.txt");
e.printStackTrace(writer);
writer.close();} 
```

# iphone - 在 cocos2d 的应用商店提交应用时

> ID：12011534
> 
> 赞同：0
> 
> 时间：2012-08-17T18:50:16.360
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

当您提交您的应用程序时，您是否必须将图片放在项目文件夹中，或者您可以将图片放在桌面上并使用构建阶段来保存它们。我提交了我的应用程序，但我的项目文件夹中没有图片，我想知道它现在是否会被拒绝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:58:09.837

如果您指的是应用程序中使用的图像，那么它们都将在您提交给应用程序商店的 .ipa 文件中。因此，在您的视图的所有类文件所在的左侧边栏中，您也有您的图片文件。当您选择“构建”选项提交到应用商店时，所有这些文件都包含在最终版本中，即您提交的单个 .ipa 文件。您需要单独提交的唯一内容是应用商店页面上使用的图片，因此基本上是您应用的屏幕截图。这些是通过 iTunes Connect 添加的。

简而言之，在模拟器上运行它。所有的图片都在吗？好的。你很高兴去:)

# api - 解析 Rightmove api

> ID：12011539
> 
> 赞同：2
> 
> 时间：2012-08-17T18:50:32.077
> 
> 标签：api

我有一个客户将他的财产上传到一家名为“房地产”的公司创建的第三方软件中，然后该公司将该文件作为 .blm 发送给处理该文件的 rightmove。

该客户希望我们获取该 .blm 文件并将数据输出到我们正在设计的新站点中。有谁知道这样做或使用 .blm 文件的方法或经验？据我所知，这是一个静态文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-17T11:46:35.103

我认为这不再对您有帮助，但是如果其他人正在寻找处理 rightmove BLM 文件的方法：

[你可以在这里](https://github.com/search?o=desc&q=rightmove&s=stars&type=Repositories&utf8=%E2%9C%93)找到几个解决方案 使用这个[repo](https://github.com/stilliard/blmreader)，例如，你可以：

```
$blm = new \BLM\Reader(dirname(__FILE__)  . '/test.blm')
var_dump($blm->toArray()); 
```

我见过的大多数解决方案都是用 PHP 实现的，而且似乎已经很老了。

如果网站是 wordpress，似乎也有几个 puglins （[示例](https://wordpress.org/plugins/wp-property-blm-export-add-on/)）。

我不太确定 Rightmove 是否仍会在其[最新版本的 api](http://www.rightmove.co.uk/adf.html)上输出 BLM 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:40:38.593

这是一个非常简单的过程。我们目前正在以另一种方式工作。即我们的系统管理房地产经纪人的房产清单并将其发送到rightmove 进行上市。

可以在[www.rightmove.co.uk/adf.html找到 rightmove API 定义](http://www.rightmove.co.uk/adf.html)

该文件包含每个 blm 中的定义和数据文件，这应该使其管理起来非常简单

# javascript - 将数据从 JSON 发送到 Django 时解析错误

> ID：12011540
> 
> 赞同：2
> 
> 时间：2012-08-17T18:50:32.440
> 
> 标签：javascript, django, json

所以我试图将一些基本的 JSON 数据从 javascript 传递到 django 视图。

这是我现在的代码：

```
 var Data = { 
        Meds: [] 
   };

   for(var x = 0; x < pt.meds_arr.length; x++)
   {
       MedList.Meds.push({"Med": MedData[x]});
   };

   $.ajax({
            url: "django/path",
            dataType: "application/json",
            data: Data,
            success: function(result){
                    alert(result);
            },
            error: function(err1, err2) {
                alert(err1 + err2);
            }

   }); 
```

好的，所以萤火虫告诉我这是正在发送的数据：

```
Meds[0][Med]    Med1

Meds[1][Med]    Med2 
```

这对我来说似乎是正确的。

django 视图是：

```
def query(request):
data = request.GET;

if(data is None):
    return HttpResponseBadRequest()

return HttpResponse(data, mimetype='application/json'); 
```

问题是，Django 显然没有正确处理数据。我收到解析错误。在萤火虫中，我得到的回应是：

```
Meds[1][Med]Meds[0][Med] 
```

有人知道会发生什么吗？看起来数据在某种程度上没有被视为 JSON？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:52:47.363

试试这个视图：

```
def query(request):
    data = request.GET;

    if(data is None):
        return HttpResponseBadRequest()
    #use json.dumps()
    return HttpResponse(json.dumps(data), mimetype='application/json'); 
```

# image - R：如何在使用 image{Matrix} 生成的稀疏矩阵图像上自定义轴

> ID：12011541
> 
> 赞同：0
> 
> 时间：2012-08-17T18:50:35.320
> 
> 标签：image, r, sparse-matrix

我想修改函数 Matrix::image 生成的稀疏矩阵图像的 x 和 y 轴上的名称。当我运行下面的代码时

```
library(Matrix)
image(CAex, axes = FALSE)
axis(side = 2,at = 1:80, labels = 1:80, las = 1,add = TRUE) 
```

我收到以下错误消息。

```
Error in axis(side = 2, at = 1:80, labels = 1:80, las = 1, add = TRUE) : 
  plot.new has not been called yet 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:14:54.603

原因是`Matrix::image`使用包的`levelplot`功能`lattice`来绘制绘图，而不是`image`标准`graphics`包的功能。坐标轴属性以不同的方式为晶格图指定，请参见 的`scales`参数`?xyplot`。

以下将是您`axis`上面的命令的晶格等价物：

```
image(CAex, scales=list(y=list(at=1:80))) 
```

![矩阵::图像](../Images/e063c61cb7dcbb92323b298b1cb0f2c5.png)

顺便说一句，你不需要`add=TRUE`轴，这就是它的行为方式。

# java - 如何修改第三方代码

> ID：12011542
> 
> 赞同：4
> 
> 时间：2012-08-17T18:50:43.590
> 
> 标签：java

一个简单的建筑/设计问题：

我们的 Java 应用程序依赖于第三方代码。但是，这个第三方代码做了一些我不喜欢的事情（将时区设置为 GMT；我想根据应用程序的 TimeZoneID 设置不同的时区）。我有哪些选择？

1-我不能简单地扩展第三方类并覆盖不受欢迎的行为，因为在我们的应用程序中到处都有对第 3 方类的调用者（这是我们开始继承应用程序的方式）。

2-也许过于侵入性的解决方案是编写我们自己的等效第三方代码并依赖它。但是，这可能太多了，太具有侵略性了。

3-我看了一点Spring AOP（和aspectJ）的东西来做加载时间编织。我没有深入研究它，但在我看来，因为第三方代码调用 java.util.Timezone.setDefault(GMTTimeZone); （而不是调用我们自己编写/管理的类）这不是那么容易做到的。我在这里可能是错的，也许我仍然可以在 java.util.Timezone.setDefault() 周围编织。请让我知道这是否属实，这几乎是我的（唯一）解决方案。

4-我错过了什么，或者这几乎是所有可用的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:55:57.633

首先，您可以联系第三方并要求他们更改代码。它并不像你想象的那么长。它惹恼了你，可能还有他们的其他客户。

此外，您只能将子类用作代码的代理。您项目中的其他人不一定必须使用您的子类。您可以清理不受欢迎的行为并从代码中抽象出更改。当要求他们改变行为时，您也可以将此代码发送给供应商！

最后，最简单的解决方案是只获取返回值并在线修复它。这是现在完成它的最快方法，但它不是一个好的模式，因为您引入的代码仅用于解决其他人的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:05:18.517

从您的类扩展该类并在您的子类中覆盖该方法（根据您的要求填充代码），但该类和方法不应在该第三方代码中声明为 final。

```
ThirdPartyClassName obj=new YourSubClassName();

    obj.yourOverridenMethod() 
```

这将调用您的子类的重写方法，所有其他调用将调用第三方类的原始方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:56:34.490

您可能非常受限于您发布的内容。正如 smcg 所说，最好分叉代码（如果可能）并简单地更改代码然后重新编译它。在 AOP 上，如果您可以修补代码，那么您可以替换在时区调用 setDefault() 的方法。

# php - 如何将whois结果存储到MySQL

> ID：12011546
> 
> 赞同：-7
> 
> 时间：2012-08-17T18:50:54.613
> 
> 标签：php, mysql

我确实有一个用于搜索任何域的 whois 信息的 PHP 脚本。我想将该信息存储到 MySQL 表中以供以后使用。我该怎么做？

下面是我需要存储在 MySQL 表中的结果，引擎是 MyISAM 我尝试了文本方法但没有成功......

```
Registrant:
        Dns Admin
        Google Inc.
        Please contact contact-admin@google.com 1600 Amphitheatre Parkway
         Mountain View CA 94043
        US
        dns-admin@google.com +1.6502530000 Fax: +1.6506188571

    Domain Name: google.com

        Registrar Name: Markmonitor.com
        Registrar Whois: whois.markmonitor.com
        Registrar Homepage: http://www.markmonitor.com

    Administrative Contact:
        DNS Admin
        Google Inc.
        1600 Amphitheatre Parkway
         Mountain View CA 94043
        US
        dns-admin@google.com +1.6506234000 Fax: +1.6506188571
    Technical Contact, Zone Contact:
        DNS Admin
        Google Inc.
        2400 E. Bayshore Pkwy
         Mountain View CA 94043
        US
        dns-admin@google.com +1.6503300100 Fax: +1.6506181499

    Created on..............: 1997-09-15.
    Expires on..............: 2020-09-13.
    Record last updated on..: 2012-01-29.

    Domain servers in listed order:

    ns4.google.com
    ns1.google.com
    ns2.google.com
    ns3.google.com

MarkMonitor is the Global Leader in Online Brand Protection.

Domain Management
MarkMonitor Brand Protection™
MarkMonitor AntiPiracy™
MarkMonitor AntiFraud™
Professional and Managed Services

Visit MarkMonitor at www.markmonitor.com
Contact us at 1 (800) 745-9229
In Europe, at +44 (0) 203 206 2220 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-17T19:00:59.140

根据我的理解，如果你想保存信息，那么将 db 结构作为：

```
whois_table
{
id (num)(pk)
ip (varchar)
info(long text)
} 
```

假设您有如下信息：http: [//www.whois.net/whois/facebook.com](http://www.whois.net/whois/facebook.com)

$ip = IP 谁是要插入的 whois 信息 $info = ip 的 whois 信息

```
INSERT INTO whois_table (ip, info ) values ($ip, $info); 
```

# html - CSS条件效果？

> ID：12011551
> 
> 赞同：2
> 
> 时间：2012-08-17T18:51:00.760
> 
> 标签：html, css, css-selectors

模板中设置了以下代码，以在每次插入新的侧边栏小部件时显示。（它显示在每个新小部件周围）

```
<div class="sidebox-top"></div>
<div class="sidebox">
   <div class="widgets">
      <div class="textwidget">
      [WIDGET CONTENT]
      </div>
   </div>
</div> 
```

上面显示了以下 CSS：

```
.sidebox-top {
    background-image: url("/images/top-border-side.gif");
    background-position: center top;
    background-repeat: no-repeat;
    height: 4px;
}
.sidebox {
    border-bottom: 1px solid #D9D9D9;
    border-left: 1px solid #D9D9D9;
    border-right: 1px solid #D9D9D9;
    margin-bottom: 14px;
    padding: 10px 18px 5px;
} 
```

结果是这样的：

![CSS/HTML 结果](../Images/21aa872a10427e08da2d6eb8e20a77cb.png)

这适用于大多数使用的所有小部件。但是，我希望上面的图像显示在侧边栏中，而没有侧边栏顶部的蓝线或边框。我知道有一种方法可以使用某些 CSS 符号在使用 > 符号之前或之后进行识别，我只是不确定如何在这里使用它，或者它是否会起作用。

任何帮助总是受到赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-24T12:10:40.767

## 复制问题

好的，我已尝试在[此 JSFiddle 演示](http://jsfiddle.net/JamesD/qRKYA/)中复制您的图像。如果 JSFiddle 出现故障，如下所示：

![复制的示例图像](../Images/037ee01c4d88315d121b37cef654ce8a.png)

为此，我没有使用 a`background-image`和 4px `height`on ，而是简单地使用了 4px 。虽然不是完全相同的复制，但它实现了相同的基本效果。`.sidebox-top``border-top`

## 隐藏`.sidebox-top`元素

### 步骤1

首先，我们需要定位`.textwidget`分隔线中包含的第一个孩子，前提*是*它是一个`img`. 之后我们不想将此样式应用于任何其他元素，如果不是容器中的第一个元素`img`，我们也不想应用该样式。`img`为此，我们可以使用：

```
.textwidget img:first-child { ... } 
```

### 第2步

下一步是让我们的图像顶部填充和负顶部边距等于顶部填充`.sidebox`和高度之和`.sidebox-top`。然后我们想给我们的图像一个背景，它与你的小部件的背景颜色相同：*

```
.textwidget img:first-child {
    background: #fff;
    padding-top:14px;
    margin-top: -14px;
} 
```

***** *注意：这假设您的小部件的背景与您的小部件容器的背景相同，并且背景是纯色。如果不是，您需要尝试`background-position`将您的图案背景与小部件的背景对齐。*

由此，我们最终使我们的图像与顶部边框重叠，同时保持在它开始时的相同位置：

![步骤 2 图](../Images/20b1c4d2a85b080778e69060bc9cfd54.png)

### 第 3 步

第三步是全覆盖`.sidebox-top`。要做到这一点，我们需要给我们选择的`img`左右填充和负左右边距等于左右填充的总和`.sidebox`及其边框宽度：

```
.textwidget img:first-child {
    ... /* Styling from Step 2 */

    padding-left: 18px;
    padding-right: 18px;
    margin-left: -19px;
    margin-right: -19px;
} 
```

![步骤 3 图](../Images/9d494b9bd02c156fadb4d945a556907e.png)

### 第4步

第 3 步当然覆盖了整个`.sidebox-top`，但也覆盖了 的边界`.sidebox`。为此，我们需要为我们的选择添加相同的边框`img`并减少我们的左右填充`img`以允许这样做：

```
.textwidget img:first-child {
    ... /* Styling from Step 2 */

    padding-left: 17px;
    padding-right: 17px;

    ... /* Margins from Step 3 */

    border-left: 1px solid #D9D9D9;
    border-right: 1px solid #D9D9D9;
} 
```

![步骤 4 图](../Images/2803024a14bc2c47a99936365b5be7d5.png)

### 最后一步

最后一步是给我们添加一个上边框来`img`完成小部件的边框。与第 4 步一样，为此我们需要减小顶部填充的大小以允许此边框：

```
.textwidget img:first-child {
    ... /* Styling from previous steps */

    padding-top: 13px;
    border-top: 1px solid #D9D9D9;
} 
```

![最后结果](../Images/4e302dc616bb5803d607fc1569d0d610.png)

[**最终的 JSFiddle 演示**](http://jsfiddle.net/JamesD/qRKYA/1/)。

# sql - 实体框架代码优先文本存储为 SQL 中的图像

> ID：12011555
> 
> 赞同：0
> 
> 时间：2012-08-17T18:51:08.670
> 
> 标签：sql, entity-framework, ef-code-first, binary-data

我有一个旧的 SQL 数据库，它有一个链接表来存储订单行的规范。应用程序设计人员使用 SQL 中的图像字段将文本存储为二进制数据。我在下面模拟了一个例子：

```
public class OrderLine
{
    public int ID { get; set; }
    public int OrderID { get; set; }
    public int LineNo { get; set; }
    public string Product { get; set; }
    public decimal Quantity { get; set; }
    public decimal UnitPrice { get; set; }
    public string Status { get; set; }
}

public class OrderLineSpecifications
{
    public int ID { get; set; }
    public int OrderID { get; set; }
    public int OrderLineNo { get; set; }
    public Image Bits { get; set; }   // <--- This Line
    public int Bit_Length { get; set; }
} 
```

SQL 表定义

```
 [ID] [int] IDENTITY(1,1) NOT NULL,
    [OrderID] [varchar](15) NOT NULL,
    [OrderLineNo] [smallint] NOT NULL,
    [Bits] [image] NULL,
    [Bit_Length] [int] NOT NULL 
```

目前我必须使用 SQL

```
cast(cast(Bits as varbinary(max)) as varchar(max)) 
```

提取文本，然后执行反向以将其返回到数据库。是否可以在 EF 中完成转换？也许在属性级别 { get; 放;} ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:43:37.843

解决方案比我想象的要容易。我将在 SQL 中标识为图像的内容更改为字节数组 (byte[])，并创建了一个处理 BITS 值的属性 (Specs)。Entity Framework 很高兴，它可以双向工作。出乎意料的容易。

```
public virtual byte[] BITS { get; set; }
public virtual int BITS_LENGTH { get; set; }
[NotMapped]
public virtual string Specs
{
    get
    {
        UTF8Encoding enc = new UTF8Encoding();
        string str = enc.GetString(BITS);
        return str;
    }
    set
    {
        UTF8Encoding encoding = new UTF8Encoding();
        BITS = encoding.GetBytes(value);
     }

} 
```

# javascript - data-win-bind 问题：转换器只运行一次，无法绑定元素的 id

> ID：12011559
> 
> 赞同：1
> 
> 时间：2012-08-17T18:51:28.383
> 
> 标签：javascript, microsoft-metro, winjs

我有以下 html 绑定到包含 id 和状态的对象。我想将状态值转换为特定的颜色（因此转换函数 convertStatus）。我可以看到转换器在第一个绑定上工作，但是如果我更改绑定列表中的状态，我看不到任何 UI 更新，也看不到随后调用 convertStatus。我的另一个问题是尝试绑定第一个跨度的 id 属性似乎没有按预期工作（也许无法通过绑定设置此值......）

HTML：

```
<span data-win-bind="id: id">person</span>
<span data-win-bind="textContent: status converter.convertStatus"></span> 
```

Javascript（我尝试使用修改状态值）：

> // people === WinJS.Binding.List
> // updateStatus 是一个函数，由于系统中的状态变化而被调用

```
function updateStatus(data) {
    persons.forEach(function(value, index, array) {
        if(value.id === data.id) {
            value.status = data.status;
            persons.notifyMutated(index);
        }
    }, this);
} 
```

我已经看到 notifyMutated(index) 对不使用转换器的值起作用。

**使用 github 项目更新**

[示例的公共存储库（不工作）](https://github.com/ShelbyZ/winjs-data-binding) - 这是一个非常基本的应用程序，它有一个带有一组默认数据的列表视图和一个在单击项目时执行的函数。该函数尝试随机化项目的绑定字段之一并在列表上调用 notifyMutated(...) 以触发视觉更新。即使定义了 WinJS.Binding.List({ binding: true }); 除非我通过 notifyReload() 强制更新，否则我看不到更新，这会在 listview 元素上产生重新加载闪烁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:49:54.920

回答你的两个问题：

1）为什么我不能通过绑定设置id？

这是故意阻止的。WinJS 绑定系统使用 ID 来跟踪它所绑定的元素（以避免通过悬空绑定泄漏 DOM 元素）。因此，它必须能够控制绑定模板的 id。

2) 为什么转换器不会多次触发？

Binding.List 将告诉列表视图有关列表内容的更改（添加、删除或移动的项目），但各个项目有责任通知列表视图其内容的更改。

您需要有一个可绑定的数据对象。有几个选项：

*   `WinJS.Binding.as`在将元素添加到集合时调用它们
*   在 Binding.List 上打开绑定模式

后者可能更容易。基本上，当您创建 Binding.List 时，请执行以下操作：

```
var list = new WinJS.Binding.List({binding: true}); 
```

这样，List 将对列表中的所有内容调用 binding.as，并且内容应该开始更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T14:57:10.780

我发现如果执行以下操作，我将看到 UI 绑定后的更新：

```
var list = new WinJS.Binding.List({binding: true});
var item = WinJS.Binding.as({
    firstName: "Billy",
    lastName: "Bob"
});
list.push(item); 
```

稍后在应用程序中，您可以更改一些值，如下所示：

```
item.firstName = "Bobby";
item.lastName = "Joe"; 
```

...您将看到 UI 中的变化

这是 MSDN 上的链接以获取更多信息： [MSDN - WinJS.Binding.as](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/br229801.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T14:14:56.103

关于设置id的值。我发现我能够为 <button> 设置 name 属性的值。我一直在尝试设置 id，但这不起作用。高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-12T13:27:39.030

optimizeBindingReferences 属性

确定绑定是否应自动设置元素的 ID。在使用 Windows Library for JavaScript (WinJS) 绑定的应用程序中，此属性应设置为 true。

```
WinJS.Binding.optimizeBindingReferences = true; 
```

来源：http: [//msdn.microsoft.com/en-us/library/windows/apps/jj215606.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj215606.aspx)

# ios - 如何在 iOS 中创建 Ad-hoc wifi

> ID：12011565
> 
> 赞同：-1
> 
> 时间：2012-08-17T18:51:55.273
> 
> 标签：ios, cocoa-touch, wifi, adhoc

我期待在 ipod touch 上的应用程序中创建临时 wifi 连接。有没有可用的框架以简单的方式做到这一点？我必须在没有 wi-fi 或互联网连接可用但不同设备必须通过 tcp/ip 通信的环境中使用我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:04:39.683

你正在尝试做的事情目前在 iOS 上是不可能的。使用 SDK 构建的应用程序无法对 Wi-Fi 硬件进行足够低级别的访问以加入或创建网络，并且操作系统也不允许用户创建 ad-hoc 网络。您也许可以在这里将蓝牙变成有用的东西，但我不会打赌。

# css - 使用双嵌套类选择的 CSS 未选择正确的元素

> ID：12011568
> 
> 赞同：0
> 
> 时间：2012-08-17T18:52:03.950
> 
> 标签：css

我正在尝试选择具有“尝试访问此元素”的 div

```
<div id="main" class="wrapper clearfix 3-column">
   <div id="col1" class="floatleft">
      <div><img src="img/main.jpg" /></div>
      <div class="col1-grid2">
         Trying to access this element
      </div>
    </div>
</div> 
```

执行 .col1-grid2 或 #main .col1-grid2 按预期工作。但是，为什么 .3-column .col1-grid2 不针对该元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:01:34.450

问题不在于选择器，而在于类的名称。`3-column`不是有效的类名。它必须以`-`、`_`或字母（az 或 AZ）开头。*编辑：更新说不只是小写字母*

# sql - 规范化数组下标，使其从 1 开始

> ID：12011569
> 
> 赞同：7
> 
> 时间：2012-08-17T18:52:13.230
> 
> 标签：sql, arrays, postgresql, performance

PostgreSQL 可以使用[从任何位置开始的数组下标](https://www.postgresql.org/docs/current/arrays.html#ARRAYS-IO)。
考虑这个例子，它创建了一个包含 3 个元素的数组，下标从 5 到 7：

```
SELECT '[5:7]={1,2,3}'::int[]; 
```

回报：

```
[5:7]={1,2,3} 
```

我们得到下标的第一个元素`5`：

```
SELECT ('[5:7]={1,2,3}'::int[])[5]; 
```

我想**标准化一维数组以从数组下标 1 开始**。
我能想到的最好的：

```
SELECT ('[5:7]={1,2,3}'::int[])[array_lower('[5:7]={1,2,3}'::int[], 1):array_upper('[5:7]={1,2,3}'::int[], 1)] 
```

同样，更容易阅读：

```
WITH   cte(a) AS (SELECT '[5:7]={1,2,3}'::int[])
SELECT a[array_lower(a, 1):array_upper(a, 1)]
FROM   cte; 
```

您知道更简单/更快或至少更优雅的方式吗？

##### 在 Postgres 9.5 上使用旧解决方案进行基准测试

*db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=postgres_9.5&fiddle=7fd89900a926d4f5e77ab496c69c576a)*

##### 基准包括 Postgres 14 上的新解决方案

*db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=postgres_14&fiddle=210d46c26f0a8b6c3914887c70775613)*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T19:49:36.313

有一个更简单的方法是丑陋的，但我相信在技术上是正确的：从数组中提取最大可能的切片，而不是具有计算边界的精确切片。它避免了两个函数调用。

例子：

```
select ('[5:7]={1,2,3}'::int[])[-2147483648:2147483647]; 
```

结果是：

```
  整数4   
---------
 {1,2,3}

```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-06-09T02:12:19.640

最终，Postgres **9.6**[出现了一些更优雅的东西](https://stackoverflow.com/questions/12011569/normalize-array-subscripts-for-1-dimensional-array-so-they-start-with-1#comment16114487_12012285)。[手册：](https://www.postgresql.org/docs/current/arrays.html#ARRAYS-ACCESSING)

 **> 可以省略切片说明符的***`lower-bound`***和/或 ***`upper-bound`***；缺少的界限被数组下标的下限或上限替换。例如：

所以现在很简单：

```
SELECT my_arr**[:]**;
```

使用我的示例数组文字，您需要用括号括起来以使语法明确::

```
SELECT **(**'[5:7]={1,2,3}'::int[]**)[:]**;
```

[与使用硬编码最大数组下标的 Daniel 解决方案的](https://stackoverflow.com/a/12012285/939860)性能大致相同——这仍然是 Postgres 9.5 或更早版本的方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T21:57:35.810

不确定这是否已经涵盖，但是：

```
SELECT array_agg(v) FROM unnest('[5:7]={1,2,3}'::int[]) AS a(v); 
```

为了测试性能，我必须`id`在测试表上添加列。减缓。**

# jsf - 流式传输动态资源时出错。将 p:graphicImage 与 Primefaces 一起使用

> ID：12011573
> 
> 赞同：7
> 
> 时间：2012-08-17T18:52:29.197
> 
> 标签：jsf, primefaces

我正在尝试使用 p:graphicImage 标签在 primefaces 中动态显示图像，如下所示：

```
<p:graphicImage value="#{submissionBean.contestImage}">
    <f:param name="imageName"
        value="#{contestBean.createContest.submissions[0].fileName}" />
</p:graphicImage>` 
```

托管bean如下：

```
@ManagedProperty("#{param.imageName}")
private String imageName;

public String getImageName()
{
    return imageName;
}

public void setImageName(String imageName)
{
    this.imageName = imageName;
}

private StreamedContent contestImage;

public StreamedContent getContestImage()
{
    FacesContext context = FacesContext.getCurrentInstance();
    if (imageName == null)
        imageName = Constants.SUBMISSION_FILE_DIR + "/" + "sacxzx_asdsdaas_icon.png";
    if (context.getRenderResponse())
    {
        // So, we're rendering the view. Return a stub StreamedContent so
        // that it will generate right URL.
        return new DefaultStreamedContent();
    }
    else
    {

        return new DefaultStreamedContent(this.getClass().getResourceAsStream(Constants.SUBMISSION_FILE_DIR + "/" + imageName));
    }
} 
```

我总是收到“严重：流式动态资源错误”的错误。

检查图像的 URL 似乎很好：

```
http://localhost:8080/mashup/javax.faces.resource/dynamiccontent.xhtml?ln=primefaces&pfdrid=pfdrid_4290aa0c-8eef-45ea-a281-638e460e33bf&imageName=sacxzx_asdsdaas_icon.png 
```

知道这是为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T08:39:13.893

应该是`SessionScoped`。由于`getContestImage()`在页面处理过程中多次调用方法，因此最好只创建一次流。

# c# - 全局低级键盘钩子 - 竞争条件

> ID：12011579
> 
> 赞同：3
> 
> 时间：2012-08-17T18:52:54.337
> 
> 标签：c#, .net, winapi, keyboard-hook

我编写了 ac# 应用程序，其中包含一个 WinAPI 低级键盘钩子，我用它来防止除字母数字键之外的所有键。

问题是 - 其他程序（那些在登录时启动的程序）也有键盘挂钩（用于启动计算器、浏览器等应用程序）。这些程序在我的钩子回调到达之前已经打开了这些应用程序，因此，我无法停止操作。

有什么方法可以确保我的钩子在任何其他人之前被调用？

* * *

**编辑**

消除混淆 - 我的应用程序是一个没有安装程序的单个可执行文件。它按需运行。

我需要能够接管其他钩子——或者只是强制我的钩子回调首先被调用——即使其他人已经调用了该`SetWindowsHookEx`方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:43:03.037

虽然它没有回答如何以编程方式进行，但如果我们从不同的角度来解决您的具体问题，可能会有一个可接受的解决方案......

去二手店，买一个便宜的 USB 键盘，然后剪断你不想让你儿子使用的键的连接怎么办？然后，您可以将 USB 连接到现有键盘的 USB 端口，并在您儿子演奏时将键盘推开。

当他完成后，断开您儿子的键盘并将您的键盘移回原位。

否则，我认为您可能需要安装[WH_DEBUG](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644978%28v=vs.85%29.aspx)钩子以获取键盘消息，然后再将其传递给任何其他钩子。

> **DebugProc 函数**
> 
> 系统在调用与任何类型的钩子相关的钩子过程之前调用这个函数。系统将有关要调用的钩子的信息传递给 DebugProc 钩子过程，后者检查信息并确定是否允许调用钩子。

DebugProc 将传递 wParam 中调用的钩子类型（在您的情况下为 WH_KEYBOARD_LL），以及 lParam 中的[DEBUGHOOKINFO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644965%28v=vs.85%29.aspx)结构，其中包含将传递给钩子链的实际 WH_KEYBOARD_LL 钩子信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:07:46.883

你不能用你的安装程序来编辑

[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run]

注册表值？我从来没有明确地试图做你想做的事情......我不确定你是否可以从安装程序中重新排序这些键值，但这应该足够早地抓住它......

或其中之一：[HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run] [HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\RunOnce] [HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\RunServices] [HKEY_LOCAL_MACHINE\Software\Microsoft \Windows\CurrentVersion\RunServicesOnce] [HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Winlogon\Userinit]

# jquery - tablesorter - 具有相同文本的行的排序逻辑

> ID：12011580
> 
> 赞同：0
> 
> 时间：2012-08-17T18:52:54.697
> 
> 标签：jquery, jquery-plugins, tablesorter

我有一个问题，如果该列的两行具有相同的文本，tablesorter 将如何对指定的列进行排序。

假设我的桌子就像

```
 Fruit     User

 Apple     james
 Banana    scot
 Apple     peter 
```

如果我根据第 1 列排序，那么它会变成

```
 Fruit     User

 Apple     james
 Apple     peter
 Banana    scot 
```

或者

```
 Fruit     User

 Apple     peter
 Apple     james 
 Banana    scot 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:03:14.870

第一个，这里有一个小提琴给你看，点击标题

[http://jsfiddle.net/YKeaS/](http://jsfiddle.net/YKeaS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:03:29.130

您可以使用该参数`sortForce`来设置二级排序。

> 用于添加将附加到用户动态选择的附加强制排序。例如，可用于在某些其他用户选择的排序后按字母顺序对人员进行排序，从而导致具有相同值的行，如日期或到期金额。它可以帮助防止数据看起来好像具有随机的二级排序。

查看[文档](http://tablesorter.com/docs/)以获取更多详细信息

# spring - 在没有 try-catch 的情况下检查 Spring 代理 bean 的状态有效性

> ID：12011582
> 
> 赞同：1
> 
> 时间：2012-08-17T18:53:04.850
> 
> 标签：spring, spring-mvc, proxy-classes

我有一个由具有以下类的服务创建的 bean：

```
@Configuration
public class AccessManager {

    @Bean(name="access", destroyMethod="destroy")
    @Scope(value="session", proxyMode=ScopedProxyMode.TARGET_CLASS)
    @Autowired
    public Access create(HttpServletRequest request) {
        System.out.println(request.getRemoteAddr());
        return new Access();
    }

} 
```

一切都按预期工作，除了在应用程序启动时调用此方法，可能是因为我有一些其他使用该 bean 的单例`Access`bean。在启动时没有请求绑定到线程，并且`java.lang.IllegalStateException`在尝试访问`request`参数的任何属性时预计会得到一个。

没问题。**问题是**，是否可以在调用引发异常的属性之前检查**`HttpServletRequest`**代理**`request`**的底层是否存在？**`null`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T02:25:12.090

您可能想看看[RequestContextHolder#getRequestAttributes()](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/request/RequestContextHolder.html#getRequestAttributes%28%29)。`null`如果您当前不在可以使用请求范围的上下文中，那将返回。

```
@Configuration
public class AccessManager {

    @Bean(name="access", destroyMethod="destroy")
    @Scope(value="session", proxyMode=ScopedProxyMode.TARGET_CLASS)
    @Autowired
    public Access create(HttpServletRequest request) {
        if (RequestContextHolder.getRequestAttributes() != null) {
            System.out.println(request.getRemoteAddr());
        }
        return new Access();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:27:16.343

我认为这里的问题是关注点分离。通常你的服务层不应该对 servlet 类有任何依赖。这在很大程度上是一个控制器/UI 问题。

应该为您的服务类提供完成其工作所需的属性。在这种情况下是一个字符串。此服务方法应从注入 servlet 请求的控制器方法中调用。

类似于以下内容：

```
@Controller
public class MyController {

  @Autowired
  private AccessManager accessManager;

  @RequestMapping
  public void handleRequest(HttpServletRequest request) {
    accessManager.create(request.getRemoteAddr());
  }
} 
```

然后您的服务将如下所示：

```
@Service
public class AccessManager {

  public Access create(String remoteAddress) {
    return new Access();
  }
} 
```

总而言之，任何注释为 @Service 的东西都不应访问请求。

# cocos2d-iphone - 在 cocos2d 中恢复游戏循环

> ID：12011583
> 
> 赞同：0
> 
> 时间：2012-08-17T18:53:09.753
> 
> 标签：cocos2d-iphone, resume

我有一个动画游戏。在游戏场景中，我使用下面的方法来暂停我的游戏（效果很好，因为当用户点击 iOS 设备的任意一点时，游戏就会暂停）：

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch=[touches anyObject];
    CGPoint locationOfTouch=[self convertTouchToNodeSpace: touch];

    CGRect rectOfScreen=CGRectMake(0, 0, screenSize.width, screenSize.height);

if (CGRectContainsPoint(rectOfScreen, locationOfTouch)) 
{
    [[CCDirector sharedDirector] replaceScene:[PauseScene scene]];
    [self unschedule:@selector(spawnEnemies:)];
    [self unschedule:@selector(checkCollisionOfEnemyWithBullet:)];
    [self unschedule:@selector(update:)];
    [self unschedule:@selector(isJoystickActivated:)];
    [self unschedule:@selector(checkHasGameEnded:)];

    [[CCDirector sharedDirector] pause];
} 
```

}

为了实现恢复动作，我创建了 PauseLayer:CCLayer，在这里我实现了以下方法来恢复游戏：

```
-(void) continueGame:(id)sender
{
[[CCDirector sharedDirector] resume];
[[CCDirector sharedDirector] replaceScene:[GameSceneLayer scene]];
//[self resumeSchedulerAndActions];
} 
```

这是代码，我如何调用上面的方法：

```
 CCMenuItemFont* continue_game=[CCMenuItemFont itemWithString:@"continue game" target:self selector:@selector(continueGame:)]; 
```

但是，当我选择继续游戏时，游戏从空白点开始：每个游戏状态，每个游戏角色都是新的。如何从用户暂停的初始点恢复我的游戏？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:15:14.363

您可以使用这两个 cocos2D 函数来暂停和恢复：

```
[self pauseSchedulerAndActions]; //pause
[self resumeSchedulerAndActions];//resume 
```

还要维护一个布尔变量，并在需要时检查。

```
 bool mISGamePaused; 
```

# asp.net-mvc-3 - .net mvc partial 用于显示不同模型中存在的子元素

> ID：12011585
> 
> 赞同：1
> 
> 时间：2012-08-17T18:53:16.697
> 
> 标签：asp.net-mvc-3, partial-views, models

我有一个包含产品的应用程序。每个产品都属于一个品牌和一个类别。

我有我的模型结构，所以当我获得一个类别或品牌时，其中的所有产品都作为 IEnumberable 返回。

无论当前型号是什么，我如何在我的主要品牌或类别视图中使用将显示产品的局部视图？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:55:50.160

拥有一个强类型为 List of 的视图，`Product`并将其保存在共享位置下。（`~/Views/Shared`有名字的文件夹`ProductList.cshtml`）

```
@IList<Product>
@{
   Layout=null;  //assuming this is for ajax (Popups).so no layout needed.
 }
@foeach(var prod in Model)
{
  <p>@prod.Name</p>
  <p>@prod.Price</p>
} 
```

您可以使用此视图显示产品列表，无论它属于品牌/类别/什么

```
public ActionResult ShowProductsForBrand(int brandId)
{
    List<product> products=GetProductsForBrand(brandId);
    return View("~/Views/Shared/ProductList.cshtml",products)
}

public ActionResult ShowProductsForCategory(int catId)
{
    List<product> products=GetProductsForCategory(catId);
    return View("~/Views/Shared/ProductList.cshtml",products)
} 
```

# java - 为什么与不同包相关的类可以访问另一个包的类？

> ID：12011587
> 
> 赞同：-1
> 
> 时间：2012-08-17T18:53:26.933
> 
> 标签：java, package

**爪哇**

```
package a;
class A {

    void f1()
    {
        System.out.println("hi");
    }
} 
```

* * *

**B.java**

在与 A.java 相同的文件夹中，并且在同一文件夹中生成类文件。

```
package b;
class B
{
    new A().f1();
} 
```

我是包装概念的新手。我的问题是，即使它们不在同一个包中，B 如何创建 A 的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:07:18.523

如果您使用公共类声明，它会转到`public access level`. `import a.A;`通过使用或提供完整的类名，不同的包可以访问公共类`new a.A().f1()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:55:37.247

如果B必须使用它，它将从其他包中[导入（或可以使用完全限定名称）](http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html)类 A。导入使其他包中的类可以看到来自不同包的类。但这可以通过使用[scoping](http://mindprod.com/jgloss/scope.html)来进一步调整。

如果两者都在同一个文件夹中并且没有明确使用任何包，那么它们都在**默认**包中。**如果它们在同一个包中，您无需在使用它们时显式导入这些类。**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T19:02:17.720

你应该知道java中的访问修饰符。如果您的课程是公开的，则只需导入即可在任何地方访问它。

请通过以下链接更好地理解

[http://javapapers.com/core-java/access-modifiers-in-java-explain/](http://javapapers.com/core-java/access-modifiers-in-java-explain/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-02T07:47:33.283

在 Java 中有一种叫做 import 的东西，你可以将它导入当前包并访问方法或成员，只要它们是公共的（跨包可见）或受保护的（对子类可见）

# objective-c - 在新的 Facebook 3.0 中过滤 FBFriendPickerViewController 返回的好友

> ID：12011590
> 
> 赞同：0
> 
> 时间：2012-08-17T18:53:35.033
> 
> 标签：objective-c, ios, facebook

我在[http://developer.facebook.com](http://developer.facebook.com)上有一个类型为“Native iOS”的 Facebook 应用程序，它使用新的 Facebook iOS SDK 3.0 连接到实际的 iOS 应用程序。

我怎么知道是否有多个人已经安装了该应用程序并授权了 Facebook 应用程序，以便我可以将它们放在某个列表中，但这不是我的问题，因为我知道有一个名为“已安装”的字段会`true`在用户安装应用程序。

因此，如果我想`FBFriendPickerViewController`根据用户是否使用应用程序来过滤返回的朋友，那么我如何使用该`installed`字段或其他东西来过滤朋友。

注意：我知道在哪里过滤朋友 (*) 我需要的只是我需要检查以确保用户安装我的应用程序的字段或属性。

*`- (BOOL)friendPickerViewController:(FBFriendPickerViewController *)friendPicker shouldIncludeUser:(id<FBGraphUser>)user`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:36:40.493

我找到了一种方法：

我创建了一个向我需要的人发送 FQL 的方法（例如我的朋友，他们是男性）

然后`FBFriendPickerViewController`使用以下方法将此请求返回的内容与已存在的内容进行比较：

`- (BOOL)friendPickerViewController:(FBFriendPickerViewController *)friendPicker shouldIncludeUser:(id<FBGraphUser>)user`

对于请求：

```
NSDictionary *queryParam = [NSDictionary dictionaryWithObjectsAndKeys:@"query", @"q", nil];
[FBRequestConnection startWithGraphPath:@"/fql" parameters:queryParam HTTPMethod:@"GET" 
completionHandler:^(FBRequestConnection *connection,  id result, NSError *error) {
             if (error)
             {
                 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Oops" message:@"Some thing go wrong !, Try again" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];

                 [alert show];
             }
             else
             {
                 NSArray *friendInfo = (NSArray *) [result objectForKey:@"data"];

                 for(int i = 0; i < [friendInfo count]; i++)
                 {
                     [self.friendsNames addObject:[[friendInfo objectAtIndex:i] objectForKey:@"name"]];
                 }
             }     
 }]; 
```

如您所见，我有一个`NSArray`存储过滤后的朋友，下一步是在上面的委托方法中比较它们。

希望你觉得它有用。

# xml - Shopify - xml 不显示属性的值

> ID：12011591
> 
> 赞同：1
> 
> 时间：2012-08-17T18:53:38.307
> 
> 标签：xml, shopify

我有一个使用 Shopify API 来显示挂单的屏幕。我添加了一个购物车属性来显示他们订单的首选取货时间。直到几周前，这一切都很好。现在我用来显示属性的 xml 没有在我的屏幕上显示属性的值（尽管它仍然被发送到管理区域）。

我用来回显该属性的代码是： < ?php=$xml->{'note-attributes'}->{'note-attribute'}->value ? >

在过去的几周里，Shopify API 是否发生了一些变化？如果是这样，我现在应该将此代码更改为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T19:54:32.503

我也遇到了这个。我不确定这是否是故意的，但 XML 看起来像这样进入我的 webhook：

```
<note-attributes type="array">
<note_attribute> 
```

请注意，它是 note_attribute，带有下划线。我假设该数组的各个成员也将具有注释属性，但显然它们不是。我不知道这是否是设计使然...

我希望这有帮助，

马特

# vb.net - 将文本添加到 Word 文档 VB.Net 中的现有文本框

> ID：12011592
> 
> 赞同：0
> 
> 时间：2012-08-17T18:53:38.897
> 
> 标签：vb.net, ms-word

我的公司为每位新员工创建了一个欢迎包。在这个数据包中，我们的工作是列出他们的姓名、职位等。我们为此使用了一个模板；只是word文档中的一个页面，每个字段都有文本框。

是否可以向那些现有的文本框添加信息？如果没有，如何使用新文本框在文档中重新创建页面？这是第3页。

我不知道这是否可能，但如果是，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:58:08.177

假设您的文本框被称为`Textbox1`. 要向其中添加文本，只需编写：

`TextBox1.text = Textbox1.text & "String here"`

或者，如果您想完全清除它，请选择

`Textbox1.text = "String here"`

希望这可以帮助！

# ios - 在 iOS 上，是否需要执行 CGContextRelease？

> ID：12011593
> 
> 赞同：1
> 
> 时间：2012-08-17T18:53:39.820
> 
> 标签：ios, core-animation, core-graphics, automatic-ref-counting, cgcontextref

***因为如果运行 Instruments 并选择了活动监视器，则在 iPhone 4S 上运行的应用程序在释放上下文时使用 4.88MB，如果未***释放上下文，也是 4.88MB 。那么这是否意味着释放上下文是可选的？（我认为实际上是必需的）。上下文由`CGContextRef`变量引用。（正在使用 ARC）。

上下文是`CGBitmapContext`为 Retina 显示器创建的，因此大约为 640 x 640，并且有 4 个这样的上下文，它们都是在 中创建的`viewDidAppear`，我认为如果 1 个像素是 4 个字节，那么每个上下文已经是 1.6MB。难道`viewDidAppear`是做完之后，上下文就自动释放了？基本上，我`CGImage`从这些位图上下文生成对象并将 CGImage 对象设置为由对象指向`CALayer`（使用`layer.contents = (__bridge id) cgImage;`），因此不再需要位图上下文。它使用 Xcode 4.3 和 ARC 编译，面向 iOS 4.3。（但我认为`CGContextRef`不是 ARC 的一部分）。

**更新：**更正：它应该是“从那些 CGBitmapContext 生成 CGImage 对象，并将那些 CGImage 对象设置为 CALayer”（编辑原始问题以反映这一点）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T19:05:36.043

释放 CGContextRef 不是可选的，但您应该知道是否需要释放它。它遵循标准的手动内存管理规则。如果您取得所有权（alloc、create、retain 和其他一些），您必须释放所有权（release）。如果您在没有所有权的情况下发布，那就是过度发布。

您可能看到的是，即使您释放了该对象，其他人仍在保留它。它可能在您的视图层次结构中。在您释放所有权后未释放的对象通常不是问题。

# java - 如何在窗口关闭或应用程序重新运行时删除 servlet 中的 cookie

> ID：12011599
> 
> 赞同：2
> 
> 时间：2012-08-17T18:54:14.557
> 
> 标签：java, gwt, jakarta-ee, servlets, cookies

正如标题所说，我想在关闭窗口时删除 cookie。我知道 cookie 的方法，例如`Cookies.removeCookie(Constants.XXX);`And 也知道`cookie.setMaxAge(0);` 删除 cookie 的方法。但这是在单击注销时完成的。

我想在窗口关闭或应用程序停止运行时删除 cookie。因为每当我在调试应用程序时，每当我重新运行应用程序时，我都会看到 cookie 仍然存在，即使我没有登录，并且会话还没有为用户启动。所以有一个冲突，cookie 已经设置，即使用户还没有登录！

它是一个 GWT 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:24:51.060

首先，区分客户端的 cookie 和服务器端的会话很重要（我想你已经知道了）。

通常，为了彻底注销，您需要`session.invalidate()`在服务器端和`Cookies.removeCookie(...)`客户端调用。

但并非每个“注销”都是干净的：

*   注销请求可能无法到达服务器
*   浏览器可能在您调用 removeCookie 之前崩溃 - 因此任何在关闭窗口时删除 cookie 的尝试都是不可靠的

在服务器端，您可以使用超时（请参阅@thinksteep 提供的链接：[我们如何在浏览器关闭事件中调用 logout servlet](https://stackoverflow.com/questions/3986430/how-we-call-logout-servlet-on-browser-close-event)）。

对于客户端 cookie，您可以设置 expiryDate/maxAge。或者您可以使用“会话 cookie”：这些是您根本不设置到期或 maxAge 的 cookie。大多数浏览器会在浏览器重新启动时自动删除“会话 cookie” - 但请参阅[Firefox 会话 cookie](https://stackoverflow.com/questions/777767/firefox-session-cookies)。

所有这一切可能意味着，cookie 可能不是最适合您的用例的技术：通常，cookie 在*设计*上适用于所有浏览器选项卡，并且浏览器会话的概念甚至并不总是结束，当浏览器/window 关闭（这在智能手机上意味着什么？）。这对于许多当前的网站来说是可取的（用户不必每次都显式登录），并且许多用户已经开始期待这种行为。

对于需要“一个选项卡 = 一个会话”策略的站点，最好将令牌存储在例如 Javascript（或 GWT）对象中，并随每个请求一起发送。这样，您可以从多个浏览器选项卡单独登录（即使作为不同的用户），一旦选项卡关闭，令牌就消失了。请注意，在会话恢复时，浏览器可能仍会恢复选项卡。（我总是将这种技术与 httponly cookie 结合起来，以避免[某些类型的攻击](http://www.codinghorror.com/blog/2008/08/protecting-your-cookies-httponly.html)。）

# django - 在视图中使用资源来引导应用程序的数据

> ID：12011600
> 
> 赞同：0
> 
> 时间：2012-08-17T18:54:18.630
> 
> 标签：django, tastypie

我想使用我的资源来引导应用程序的数据。我在食谱中看到了一种方法：http: [//django-tastypie.readthedocs.org/en/latest/cookbook.html#using-your-resource-in-regular-views](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#using-your-resource-in-regular-views)

但是，我想知道是否有更直接的方法可以做到这一点？此外，与示例不同，我想返回几个对象，所以我使用了 obj_get_list()[0:20] 但捆绑包正在寻找“pk”，所以我不能那样使用它。这没用。你会怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:53:11.513

如何使用`get_object_list()`或只是`_meta.queryset()`？但是，如果您没有从您的视图中执行 GET 请求（这实际上会使用您的 API），那么我想知道这样做是否更好`Model.objects.all()`。

# ruby-on-rails-3 - 为什么“通知”这个词会导致 i18n 中断？

> ID：12011607
> 
> 赞同：2
> 
> 时间：2012-08-17T18:54:52.960
> 
> 标签：ruby-on-rails-3, internationalization

我在当前的 Rails 项目中遇到了一个非常奇怪的 i18n 问题。每当我尝试使用 key 时，我都会收到翻译缺失消息`notifications`。例如：

```
#en-US.yml
en-US:
  notifications:
    index:
      title: 'notification page'

#/notifications/index.html.erb
<%= content_for :title, t('.title') -%> 
```

这将失败并告诉我翻译丢失

```
#en-US.yml
en-US:
  notifications:
    index:
      title: 'notification page'

#/notifications/index.html.erb
<%= content_for :title, t('notifications.index.title') -%> 
```

这也会失败。

```
#en-US.yml
en-US:
  notification:
    index:
      title: 'notification page'

#/notifications/index.html.erb
<%= content_for :title, t('notification.index.title') -%> 
```

奇怪的是，这将起作用，删除`s`将允许它找到翻译。

```
#en-US.yml
en-US:
  notifications1:
    index:
      title: 'notification page'

#/notifications/index.html.erb
<%= content_for :title, t('notifications1.index.title') -%> 
```

这也将起作用，`1`在通知的末尾添加一个。

Rails 似乎不喜欢通知这个词。这是一个问题，因为我不想为此重命名整个模型，而且我想使用 i18n.t 视图快捷方式来保持一致性。是`notifications`保留字吗？是否有任何原因无法找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:20:35.067

虽然不是一个确切的答案，但我发现 I18n 中有几个词不能用作键。我假设 I18n 代码在其他地方使用它们。

其他包括“否”、“是”、“开”等。

只需使用同义词或执行“notifications_”之类的操作即可使其与众不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:05:06.910

我不确定为什么在您的情况下它会失败，但我自己试了一下，这不是保留字，我的语言环境文件：

```
en:
  notifications:
    foo: bar 
```

结果：

```
1.8.7 :001 > I18n.t('notifications.foo')
 => "bar" 
```

该测试是使用 Rails 3.1.5 和 Ruby 1.8.7 完成的。

在你的情况下，你得到以下？

```
1.8.7 :001 > I18n.t('notifications')
 => "translation missing: en.notifications" 
```

# wpf - WPF 仅更改组合框的 PART_EditableTextBox 上的属性

> ID：12011610
> 
> 赞同：6
> 
> 时间：2012-08-17T18:55:07.000
> 
> 标签：wpf, controltemplate

我想对默认 wpf 组合框的 PART_EditableTextBox 进行更改（例如更改背景）。

我尝试添加这样的样式：

```
<Style TargetType="{x:Type ComboBox}" BasedOn="{StaticResource {x:Type ComboBox}}">
  <Setter Property="Control.Template">
    <Setter.Value>
      <ControlTemplate TargetType="ComboBox">
        <TextBox x:Name="PART_EditableTextBox" Background="AntiqueWhite"/>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

但这会导致默认模板的其余部分被忽略。

有没有办法可以覆盖 PART_EditableTextBox 的特定属性，或者我必须复制整个控件模板并在那里进行更改？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T23:40:05.653

改变控件外观的一些不同方法...

## 复制控件模板、编辑它并在样式中使用它

复制和修改控件的模板时...您必须记住一件事...主题。

控件可能具有完全不同的模板设计，具体取决于主题（即不同的 chrome）...所以您的问题是...您选择复制、修改哪个模板，然后在您的控件上使用。

无论如何，您选择哪一个...您有问题...当有人在与您从中复制模板的主题不同的主题中运行 Windows 时...该控件将看起来错误/不正确地方。

要查看不同模板在不同主题中的外观...使用 ShowMeTheTemplate：

*   [http://www.sellsbrothers.com/posts/details/2091](http://www.sellsbrothers.com/posts/details/2091)

因此，要正确执行此操作，您必须复制和修改每个主题（Classic、Luna、Aero、Royale 等）的模板，并执行必要的步骤以在主题更改时加载不同的主题模板......以便您的控件具有“主题意识”。

*   [覆盖 WPF 模板时，我是否必须分别覆盖每个主题的模板？](https://stackoverflow.com/questions/2515468/when-overriding-wpf-templates-do-i-have-to-override-each-themes-template-separa)

*   [http://windowsclient.net/blogs/nidonocu/archive/2008/02/16/wpf-themes-and-control-libraries.aspx](http://windowsclient.net/blogs/nidonocu/archive/2008/02/16/wpf-themes-and-control-libraries.aspx)

*   [http://blogs.windowsclient.net/nidonocu/archive/2008/03/03/wpf-themes-and-control-libraries-part-2.aspx](http://blogs.windowsclient.net/nidonocu/archive/2008/03/03/wpf-themes-and-control-libraries-part-2.aspx)

* * *

## 在运行时应用模板后修改可视化树

如果您是控件的作者或者您创建了控件的派生版本...那么您可以等到应用模板然后在`OnApplyTemplate`...然后您可以在可视化树中寻找“零件”，并且然后在运行时修改可视化树/更改属性（即您可以更改 PART_EditableTextBox 的背景）。

但是，如果您依赖隐式样式（就像您一样），或者不想或不能用 XAML 中的派生版本替换所有控件，这将不起作用。

* * *

## 在运行时获取 ControlTemplate 的副本，并修改“Part”

还有另一种可能性....在运行时获取控件的 ControlTemplate ...（将用于当时设置的当前主题）...修改它，然后将其设置到控件上。

这样做的好处是，如果系统中有新主题，您事先不知道它们的名称（因此没有为其设计模板），那么您的控制模板不是从通用主题中获取的（因此不合适）......你有更好的机会让外观更好地适应新主题。但这有点骇人听闻。

*   [https://siderite.dev/blog/cloning-wpf-controltemplate.html](https://siderite.dev/blog/cloning-wpf-controltemplate.html)

*   [在运行时定义 WPF ControlTemplate](https://stackoverflow.com/questions/732736/define-a-wpf-controltemplate-at-runtime)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T19:13:54.257

使用“BasedOn”只会覆盖您在新样式中指定的属性。

但是，在您的情况下，您要覆盖的属性是模板。这是组合框的**整个**模板，因为这是您尝试在样式中修改的属性。

要仅覆盖其中的一部分，您必须复制整个控件模板并在那里进行更改；就像你想的那样。

如果您没有 Expression Blend 来检索整个控件模板，您可以在[MSDN](http://msdn.microsoft.com/en-us/library/aa970773.aspx)上找到它们。

# java - Java - 位插入

> ID：12011611
> 
> 赞同：1
> 
> 时间：2012-08-17T18:55:14.707
> 
> 标签：java

我有一个很长的号码，例如：

```
long l = Long.parseLong("10*000001111110" , 2) ; 
```

现在，我想在一个位置（比如第二个位置，标记为 *）中添加两个位到长数字中。

喜欢，

```
long l = Long.parseLong("10*11*000001111110" , 2) ; (given between *) 
```

有人可以帮我怎么做吗？请注意，我举一个例子来说明我想要什么。实际上，我只有`long l`而且我必须努力。

编辑：

1）位置不是恒定的可能是 0, 1 , 2 .. 不管。

2) 和 msb 可以为 0。意味着，

```
long l = Long.parseLong("00000010*000001111110" , 2) ;

long l = Long.parseLong("00000010*11*000001111110" , 2) ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:07:49.257

听起来您想要像 bitStuffing 这样的东西，其中掩蔽（`&`、`~`、`^`和`|`）和移位（`>>`和`<<`）是您选择的工具。

```
long insertBit(long p_orignal, long p_new_bits, int p_starting_position_from_right, int p_ending_position_from_right)
{
     long returnValue = p_original;
     long onlyNewBits = 0;

     // Set the bit to zero
     long mask = (0xFFFFFFFFFFFFFFFFl);
     for (int i=p_starting_position_from_right; i<=p_ending_position_from_right; i++)
     {
          mask ^ (1l << i);
     }
     returnValue = returnValue & mask; 
     mask = ~mask;
     onlyNewBits = ~(p_new_bits & mask);
     returnValue |= onlyNewBits;

     return returnValue;
} 
```

免责声明：我没有可用的 Java 编译器来编译它，但它应该是这样的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T19:16:40.507

我的第一个想法如下：

提取需要保持在其位置的前 x 位（在您的示例中：10）-> 您可以通过运行创建适当位掩码的循环来执行此操作：

```
long bitmask = 1;
for(long bit = 1; bit < index; bit++) {
    bitmask = (bitmask << 1) | 1;
} 
```

现在您可以创建插入的长数字 -> 只需将该数字索引位置移动到左侧。

之后，您可以轻松构建新号码：

```
long number = (((oldNumber >> index) << index) << insertionLength) | (insertion << index) | (oldNumber && bitmask); 
```

注意：`((oldNumber >> index) << index)`清除数字的右侧部分（这部分使用 bistmask 附加在末尾）。那么你只需要通过插入的长度来移动这个结果（为它腾出空间）和/或它与插入（这需要通过要插入的索引向左移动：`(insertion << index)`。最后，或最后一部分这个结果的数字（通过位掩码提取：）`oldNumber && bitmask`，你就完成了。

注意：我没有测试过这段代码。但是，通常它应该可以工作，但您可能需要检查我的班次（它是索引还是索引 - 1 左右）！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T19:15:26.130

好吧，如果你想在一个数字中设置一个特定的位：

打开它：

```
number |=  (1 << pos) 
  if pos = 4:   (1<<pos) =   00000000 00000000 00000000 00010000 
```

要关闭它：

```
number &= ~(1 << pos) 
  if pos = 4:   ~(1<<pos) =  11111111 11111111 11111111 11101111 
```

其中 pos 是位的位置（0 是低位，64 是高位）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T19:07:44.770

如果您只有该`Long`值，则`123`需要先将其转换为二进制字符串。像这样：

```
String binaryValue = Long.toBinaryString("123L"); 
```

然后我们采用字符串表示并执行特定字符的操作，如下所示：

```
char[] characters = binaryValue.toCharArray();  
  char desiredCharacter = characters[index];  
  if(desiredCharacter == '1')  
  {    
       if(newValue == '1')  
       {
           desiredCharacter = '0';  
       }
  }else{
            if(newValue == '1')  
            {
                 desiredCharacter ='1';  
            }  
       } 
```

最后我们将修改后的字符转换回字符串，如下所示：

```
String rebuiltString = new String(characters); 
```

我相信有更有效的方法可以做到这一点。

# xml - 在 Go 中解析 xml

> ID：12011622
> 
> 赞同：4
> 
> 时间：2012-08-17T18:56:01.543
> 
> 标签：xml, parsing, encoding, struct, go

我想解析一些类似于示例中的 XML 结构。我一直遇到空值。这是我正在使用的简化版本，只是为了说明问题。

```
package main

import (
        "encoding/xml"
        "fmt"
)

type Entry struct {
        VulnCveId   string  `xml:"entry>vuln:cve-id"`
}

func main() {
        v := Entry{}
        err := xml.Unmarshal([]byte(data), &v)
        if err != nil {
                fmt.Printf("error: %v", err)
                return
        }

        fmt.Println(v.VulnCveId)
}

const data = `
  <entry id="CVE-2005-4895">
    <vuln:vulnerable-configuration id="http://nvd.nist.gov/">
      <cpe-lang:logical-test negate="false" operator="OR">
        <cpe-lang:fact-ref name="cpe:/a:csilvers:gperftools:0.3" />
        <cpe-lang:fact-ref name="cpe:/a:csilvers:gperftools:0.2" />
        <cpe-lang:fact-ref name="cpe:/a:csilvers:gperftools:0.1" />
      </cpe-lang:logical-test>
    </vuln:vulnerable-configuration>
    <vuln:vulnerable-software-list>
      <vuln:product>cpe:/a:csilvers:gperftools:0.3</vuln:product>
      <vuln:product>cpe:/a:csilvers:gperftools:0.1</vuln:product>
      <vuln:product>cpe:/a:csilvers:gperftools:0.2</vuln:product>
    </vuln:vulnerable-software-list>
    <vuln:cve-id>CVE-2005-4895</vuln:cve-id>
    <vuln:published-datetime>2012-07-25T15:55:01.273-04:00</vuln:published-datetime>
    <vuln:last-modified-datetime>2012-08-09T00:00:00.000-04:00</vuln:last-modified-datetime>
    <vuln:cvss>
      <cvss:base_metrics>
        <cvss:score>5.0</cvss:score>
        <cvss:access-vector>NETWORK</cvss:access-vector>
        <cvss:access-complexity>LOW</cvss:access-complexity>
        <cvss:authentication>NONE</cvss:authentication>
        <cvss:confidentiality-impact>NONE</cvss:confidentiality-impact>
        <cvss:integrity-impact>NONE</cvss:integrity-impact>
        <cvss:availability-impact>PARTIAL</cvss:availability-impact>
        <cvss:source>http://nvd.nist.gov</cvss:source>
        <cvss:generated-on-datetime>2012-07-26T08:38:00.000-04:00</cvss:generated-on-datetime>
      </cvss:base_metrics>
    </vuln:cvss>
    <vuln:cwe id="CWE-189" />
    <vuln:references xml:lang="en" reference_type="UNKNOWN">
      <vuln:source>MISC</vuln:source>
      <vuln:reference href="http://kqueue.org/blog/2012/03/05/memory-allocator-security-revisited/" xml:lang="en">http://kqueue.org/blog/2012/03/05/memory-allocator-security-revisited/</vuln:reference>
    </vuln:references>
    <vuln:references xml:lang="en" reference_type="UNKNOWN">
      <vuln:source>CONFIRM</vuln:source>
      <vuln:reference href="http://code.google.com/p/gperftools/source/browse/tags/perftools-0.4/ChangeLog" xml:lang="en">http://code.google.com/p/gperftools/source/browse/tags/perftools-0.4/ChangeLog</vuln:reference>
    </vuln:references>
    <vuln:summary>Multiple integer overflows in TCMalloc (tcmalloc.cc) in gperftools before 0.4 make it easier for context-dependent attackers to perform memory-related attacks such as buffer overflows via a large size value, which causes less memory to be allocated than expected.</vuln:summary>
  </entry>
` 
```

在此实例中 v.VulnCveId 为空。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-26T22:34:36.797

问题是您没有命名空间。您有一个前缀“vuln”，但它没有在任何地方声明。它实际上甚至不是有效的 XML。

将第一行设为：

```
<entry xmlns:vuln="http://my-namespace.com" id="CVE-2005-4895"> 
```

然后让你的结构标签这个

```
`xml:"entry>http://my-namespace.com cve-id"` 
```

你应该很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:02:19.997

VulnCveId 字符串 `xml:"vuln cve-id"`，这也可以使用命名空间使用空间而不是冒号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T21:29:43.323

注意：没有命名空间的相同查询：[http ://play.golang.org/p/Gh5WltGzw3](http://play.golang.org/p/Gh5WltGzw3)

```
VulnCveId   string  `xml:"cve-id"` 
```

这将返回一个非空的`v.VulnCveId`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T20:35:25.787

这对我来说几乎是一个错误。

*   [http://play.golang.org/p/ym8zshlUC6](http://play.golang.org/p/ym8zshlUC6)如果我删除标签的 entry> 部分，则工作简化。根据文档，这不是必需的。
*   [http://play.golang.org/p/3zt09n5fYa](http://play.golang.org/p/3zt09n5fYa)但是对你的代码做同样的事情是行不通的，所以这肯定闻起来很腥。

# javascript - 需要从随机大小的字符串中提取字符串

> ID：12011629
> 
> 赞同：1
> 
> 时间：2012-08-17T18:56:26.113
> 
> 标签：javascript, selenium-ide

字符串有问题。我有一个像这样的长字符串：

```
"Other title of some text here name of file Date: 01/01/2011 Picture ID: UYT-2011-01 Company My company" 
```

我需要做的是仅提取图片 id`UYT-2011-01`部分。之前和之后的文本没有固定大小，可以是整个段落，之后的文本可以是任意长度，实际上图片 ID 本身的长度可以是 15-20 个字符。

出于我的目的，我想提取字符串中`Picture ID:`.

我正在使用 Selenium IDE，因此它需要是 javascript 或 regexp 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:03:03.017

假设您的图片 ID 中没有空格，并且后面总是有空格，那么这个正则表达式解决方案应该可以在 JavaScript 中使用：

```
var longString = "Other title of some text here name of file Date: 01/01/2011 Picture ID: UYT-2011-01 Company My company";

longString.match(/Picture ID: ([^ ]*)/);

// Returns ["Picture ID: UYT-2011-01", "UYT-2011-01"]

longString.match(/Picture ID: ([^ ]*)/)[1];

// Returns "UYT-2011-01" 
```

像这样匹配意味着图片ID可以是任意长度，只要用空格字符分隔即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:03:31.697

应该让你去。

```
var str = "Other title of some text here name of file Date: 01/01/2011 Picture ID: UYT-2011-01 Company My company";

var searchStart = "Picture ID:";
var start = str.indexOf(searchStart);
var end = str.indexOf("Company");
var part = str.substring(start, end);

//also part.replace(searchStart, "");

console.log(part); 
```

# android - Android MediaController 搜索栏不刷新

> ID：12011631
> 
> 赞同：1
> 
> 时间：2012-08-17T18:56:38.927
> 
> 标签：android, refresh, progress, seekbar, mediacontroller

我正在使用`MediaController`and`MediaPlayer`一起在 Android 中创建一个简单的音频播放器，取自我在此站点上找到的示例。

但是，经过大量搜索后，我找不到解决问题的方法：播放音乐时进度/搜索栏不会刷新。它只是在按下某些东西时自我更新`MediaController`（播放/暂停、前进等）。

我没有得到任何简单的解决方法？

注意： My`MediaController`是在 中声明的`XML`，我的`MediaController.MediaPlayerControl`方法只是使用`MediaPlayer`该类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:05:09.923

`Mediaplayer` provides a method `getCurrentPosition()` you can put this in a thread to continously update the progressbar.

```
 public int getCurrentPositionInt(){
        if (player != null)
            return player.getCurrentPosition();
        else
            return 0;
    } 
```

Create a [Thread](http://developer.android.com/reference/java/lang/Thread.html) or [CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html) to continuously update the seekbar :

```
seekBar.setMax((getCurrentPositionInt() / 1000)); 
```

OR

```
MediaController.MediaPlayerControl mp;
mp.seekTo((getCurrentPositionInt() / 1000)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-01T02:41:36.893

对不起我的英语！

您在音乐播放器准备好之前显示控制器。准备好后，您需要从控制器通知您的活动。

```
public void onPrepared(MediaPlayer mp) {
                    mp.start();
                    Intent onPreparedIntent = new Intent("MP_READY");
                    LocalBroadcastManager.getInstance(activity).sendBroadcast(onPreparedIntent);
                } 
```

然后您需要在您的活动中创建一个 BroadcastReceiver 并覆盖他的 onReceive 方法以显示控制器。

```
private BroadcastReceiver mpReadyReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context c, Intent i) {            
        controller.show(0);
    }
}; 
```

您还需要在活动的 onResume() 中注册接收者。

```
protected void onResume() {
    super.onResume();
    LocalBroadcastManager.getInstance(this).registerReceiver(mpReadyReceiver,
            new IntentFilter("MP_READY"));
} 
```

现在尝试仅在必要时调用 controller.show。

注意不要创建多个控制器实例

# javascript - 使用 CSS 或 javascript/jQuery，我将使用哪种方法使我的网站的导航栏看起来更 3d-ish？

> ID：12011633
> 
> 赞同：0
> 
> 时间：2012-08-17T18:56:55.867
> 
> 标签：javascript, html, css, web

我看到很多公司顶部的灰色条看起来有点“圆”而不是扁平。我猜它不仅仅是`background: grey`在css中？我怎样才能让它看起来像弹出一点点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:59:46.400

为现代浏览器使用 CSS Gradients。您可以在这样的网站上生成代码：http: [//gradients.glrzad.com/](http://gradients.glrzad.com/)

```
background-image: linear-gradient(bottom, rgb(84,72,179) 38%, rgb(100,199,217) 78%);
background-image: -o-linear-gradient(bottom, rgb(84,72,179) 38%, rgb(100,199,217) 78%);
background-image: -moz-linear-gradient(bottom, rgb(84,72,179) 38%, rgb(100,199,217) 78%);
background-image: -webkit-linear-gradient(bottom, rgb(84,72,179) 38%, rgb(100,199,217) 78%);
background-image: -ms-linear-gradient(bottom, rgb(84,72,179) 38%, rgb(100,199,217) 78%);

background-image: -webkit-gradient(
    linear,
    left bottom,
    left top,
    color-stop(0.38, rgb(84,72,179)),
    color-stop(0.78, rgb(100,199,217))
); 
```

您还可以查看圆形边缘的 CSS 边框半径代码。这个网站会给你代码[http://border-radius.com/](http://border-radius.com/)

对于不支持 CSS Gradients 的旧浏览器，您需要查看背景图像或其他内容。

**更新**

正如**handsofaten**所指出的，css3pie.com 可用于在使用现代 css 时为旧版浏览器提供支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:18:49.417

我肯定会选择 css3，现在大多数人都使用足够现代的浏览器来充分利用 css3 属性。box-shadows、text-shadows、透明度、边框和更多的好东西，用 css3 构建真正时尚的网站。查看[www.css3.info](http://www.css3.info)中的一些示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:53:55.767

我会选择框阴影和圆形边框（边框半径）的组合。添加渐变也是获得清新外观的好方法。

# visual-studio-2010 - 如果文件已本地化，Visual Studio 2010 不会生成资源 (Resx) 设计器代码

> ID：12011635
> 
> 赞同：12
> 
> 时间：2012-08-17T18:57:11.750
> 
> 标签：visual-studio-2010, resx

我刚刚在使用 Resx 资源文件时遇到了 Visual Studio 2010 中最奇怪的行为，但我无法理解它。

问题如下：Visual Studio 不会`designer.cs`为具有本地化名称（例如`resource.fr.resx`）的资源文件生成文件，但对于具有简单名称（例如`resource.resx`）的其他文件，它可以正常工作。

这是我的视觉工作室项目设置的快照：

![在此处输入图像描述](../Images/8dbf3aa5f2f45be82b0c009ae7034af4.png)

如您所见，我刚刚用 3 个资源文件做了一个简单的测试：

*   测试.resx
*   test2.resx
*   test.fr.resx

和的`designer.cs`文件生成得很好。然而，无论我做什么，它都是创建的，但总是空白的。`test.resx``test2.resx``test.fr.designer.cs`

**我进行了双重和三重检查：**为本地化文件正确设置了自定义工具属性。所有文件的所有属性都完全相同（我正在使用`PublicResxFileCodeGenerator`，但如果我将访问修饰符设置为 internal 和 use ，我会得到相同的行为`ResxFileCodeGenerator`）。

注意：我注意到在创建资源文件时，Visual Studio 通常默认访问修饰符为“内部”。但是，在创建本地化资源文件 ( `resource.fr.resx`) 时，它默认为“无代码生成”。刚刚发现这很有趣，因为它证明了 Visual Studio 出于某种原因对本地化文件进行了不同的处理。

--> 这里有什么我遗漏的吗？如果有人对此主题有一些见解，我将不胜感激，这让我发疯。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-17T20:29:16.270

虽然我没有研究过这个特定的问题，但我遇到了许多与“.resx”文件有关的其他问题。Visual Studio 有时有问题（处理“.resx”文件等），我已经正式向 MSFT 报告了其中的一些（因为它影响了我自己的商业本地化程序）。无论如何，您通常不应该这样命名事物。它实际上违反了 MSFT 的本地化规则。默认语言文件通常不应该有嵌入的语言代码，因此它可能会阻塞它。我需要调查，但你应该做的是创建“Test.resx”，它有一个“Designer.cs”文件，然后是“Test.fr.resx”，它没有。然后将所有默认语言字符串放在“Test.resx”中 以及“Test.fr.resx”中对应的法语字符串。然后在代码中访问“Test.Designer.cs”中的强类型名称，返回的字符串将是默认语言字符串，除非您将“System.Threading.Thread.CurrentThread.CurrentUICulture”设置为“fr” . 然后，您将从“Test.fr.resx”取回该字符串的法语版本，除非在那里找不到（没有翻译），在这种情况下，您将从“Test.resx”取回备用字符串（即，默认语言字符串）。这就是轮辐模型的基本工作原理。

# spring - 让 MongoDB + Spring MVC 说 UTF8

> ID：12011639
> 
> 赞同：-1
> 
> 时间：2012-08-17T18:57:28.020
> 
> 标签：spring, mongodb, spring-mvc, utf-8

我有一个基于 mongodb + spring 和 RESTful 接口（通过 Spring MVC）的应用程序。

当我们向服务器发送更新请求（例如用户字段），并且该字段具有非 ascii 字符（例如西里尔文/俄语）时，它被保存到 mongo 但是当我们通过接口读取它时，我们得到了乱码字符。

关于如何解决这个问题的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:44:47.573

我们发现问题在于 JSoup 如何处理非 ascii 字符。现在它起作用了。

# sql-server - 选择语句以返回附加行

> ID：12011640
> 
> 赞同：0
> 
> 时间：2012-08-17T18:57:28.987
> 
> 标签：sql-server

我正在使用数据集在 SSIS 中创建报告，并且具有以下 SQL 要求：

sql返回三行：

```
a
b
c 
```

无论如何我可以让 SQL 返回一个附加行而不向表中添加数据吗？

在此先感谢，布鲁斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:01:11.253

```
select MyCol from MyTable
union all
select 'something' as MyCol 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:01:36.213

您可以使用 a`UNION ALL`来包含新行。

```
SELECT *
FROM yourTable
UNION ALL
SELECT 'newRow' 
```

顶部查询和底部查询之间的列数需要相同。因此，如果您的第一个查询有一列，那么第二个查询也需要一列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:51:00.450

如果您需要添加多个值，则可以使用一种奇怪的语法：

```
declare @Footy as VarChar(16) = 'soccer'
select 'a' as Thing, 42 as Thingosity -- Your original SELECT goes here.
  union all
  select *
    from ( values ( 'b', 2 ), ( 'c', 3 ), ( @Footy, Len( @Footy ) ) ) as Placeholder ( Thing, Thingosity ) 
```

# sql-server-2008 - SQL 多插入

> ID：12011642
> 
> 赞同：0
> 
> 时间：2012-08-17T18:57:34.530
> 
> 标签：sql-server-2008

我正在尝试在我的表中进行多重插入，但出现错误。

我的查询是：

```
insert into tbl_temp(e_id, t_id, status, type)
select id from tbl_basicinfo where emp_id = 91 and employee_id <> 7119, 289, 1, 2 
```

它给出了错误：

消息 102，级别 15，状态 1，第 2 行 ',' 附近的语法不正确。

问题是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T18:59:38.657

```
insert into tbl_temp(e_id, t_id, status, type)
select id, 289, 1, 2 from tbl_basicinfo where emp_id = 91 and employee_id <> 7119 
```

# php - 贝宝选择捐赠并重定向到文件

> ID：12011643
> 
> 赞同：0
> 
> 时间：2012-08-17T18:57:35.467
> 
> 标签：php, jquery, paypal

我有以下代码，允许该人选择捐赠金额并下载文件。目前，这允许该人输入 0 并下载。我想做最小的 0.99。我怎么能强制捐款，否则不要下载。我感谢您的帮助。

```
 <?php

echo "<p>Donate fixed amount to CharityName</p>
<form method='POST' action=''>
<select name='currency_code'>
<option value='EUR'>EUR</option>
<option value='GBP'>GBP</option>
<option value='USD'>USD</option>
<input type='text' name='donate_amount' value='0'>
<input type='submit' name='submit' value='Donate'></form>";

if(!empty($_POST['submit'])) {
// Form has been submitted
  if($_POST['donate_amount'] > 0) {
// Redirect to PayPal
header('Location: https://www.paypal.com/cgi-bin/webscr?cmd=_donations&item_name=Donation for XXX&amount='.$_POST['donate_amount'].'&currency_code='.$_POST['currency_code'].'&business=mypaypalemail@here.tld&cbt=Download the file&return=http://link-to-the-file&cancel_return=http://back-to-my-website');
}
else {
// No donation amount entered - proceed to file directly
header('Location: http://link-to-the-file/');
}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:41:15.013

查看示例：

```
if(!empty($_POST['submit'])) {
    if($_POST['donate_amount'] >= 0.99) {
        // Redirect to PayPal
    } else {
        exit('Please donate at least $.99');
    }
} 
```

对于谷歌分析，我无法回答你，抱歉。

# report-viewer2010 - 我在哪里可以找到关于 ReportViewer 图表的好文档？

> ID：12011644
> 
> 赞同：1
> 
> 时间：2012-08-17T18:57:35.543
> 
> 标签：report-viewer2010

我正在尝试在 ReportViewer 图表上设置自定义颜色，但找不到任何文档。有没有人有关于如何自定义 ReportViewer 图表颜色的体面文档的链接？

# php - drupal_add_html_head() 剥离类型属性

> ID：12011649
> 
> 赞同：1
> 
> 时间：2012-08-17T18:57:59.423
> 
> 标签：php, drupal

我正在尝试使用[drupal_add_html_head()](http://api.drupal.org/api/drupal/includes%21common.inc/function/drupal_add_html_head/7)函数在我的网站头部创建一个标签。它正在从标签中剥离类型属性。它不应该这样做。有谁知道如何防止这种情况发生？

我在主题的 template.php 文件中执行此操作。这是我的代码：

```
function exampletheme_preprocess_html(&$variables) {
  $rss = array(
    '#type' => 'html_tag',
    '#tag' => 'link',
    '#attributes' => array(
      'rel' => 'alternate', 
      'type' => 'application/rss+xml', 
      'href' => 'http://feeds.feedburner.com/examplefeed', 
      'title' => 'RSS Feed'
    )  
  );  
  drupal_add_html_head($rss, 'rss'); 
} 
```

这导致：

```
<link rel="alternate" href="http://feeds.feedburner.com/examplefeed" title="RSS Feed" /> 
```

如果我使用[drupal_add_html_head_link()](http://api.drupal.org/api/drupal/includes%21common.inc/function/drupal_add_html_head_link/7)函数，我会得到相同的结果。如果我拼错了“类型”这个词，那么该属性就会出现。但我在函数中看不到任何会从 html 属性中剥离“类型”的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:07:29.970

尝试使用标记

```
$script = '<link type="application/rss+xml" rel="alternate" href="http://feeds.feedburner.com/examplefeed" title="RSS Feed" />';

$rss = array(
      '#type' => 'markup',
      '#markup' => $script,
    );

drupal_add_html_head($rss, 'rss'); 
```

# powershell - PowerShell - 在继续之前检查用户是否在组中（Active Directory）

> ID：12011651
> 
> 赞同：1
> 
> 时间：2012-08-17T18:58:04.287
> 
> 标签：powershell, active-directory

我正在编写一个脚本，该脚本会在发送请求时自动按组提供用户。我正在检查它是否在列表中的特定组中或包含诸如 HDS 之类的短语。我目前无法让“包含”命令非常适合我。这是我得到的：

```
$memberof = get-QADMemberOf -Identity tpatry
if($memberof -contains "HDS" -eq $true){
Write-Host "User is already a member of one of the Job Roles"} 
```

当我运行这个：

```
$memberof = get-QADMemberOf tpatry
Write-Host $memberof 
```

我得到了我所属的这些团体。这是 $memberof 返回的内容：

```
USERS\Domain Users USERS\CCNet-HDS-ADMIN USERS\HDS-CP-STUDENT-ACL USERS\ME-513 USERS\HDS-IT-FTE-ACL USERS\MNE-STUDENTS-O USERS\HDS-ADMIN 
```

当我运行这个时，只是给我一个新的提示来运行另一个提示来输入我的下一个命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:55:27.910

我将不得不查找有关**-contains**的文档。好像我以前见过它，但我总是忽略或忘记那个。

不知道主要问题是否与**get-QADMemberOf**返回的内容有关？我没有该功能可用，[在线](http://ss64.com/ps/get-qadmemberof.html)检查看起来它可能会返回对象的集合/列表，而不是字符串？如果它不是字符串，您可能需要在测试中遍历集合中的每个项目以获取您要查找的值。

```
$groups = get-QADMemberOf -identity tpatry
foreach($group in $groups)
{

  # pipe one of them to gm (e.g. $group | gm) to get a list of properties

  if ($group.Name -like "*HDS*" -eq $true) 
  { 
       write-host "found" 
  }
} 
```

如果返回值**是**一个字符串，你可以试试 -like 操作符：

```
$str = "this is a test"
if ( $str -like "*test*" -eq $true )
{
   write-host "found"
} 
```

我们也可以根据需要降到 C#：

```
$str = "this is a test"
if ($str.Contains("test") -eq $true )
{
    write-host "found"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:23:07.487

您可以使用带有通配符的 Name 属性来仅返回您所追求的组：

```
$memberOf = Get-QADMemberOf -Identity tpatry -Name *HDS*

if($memberOf)
{
    Write-Host "User is already a member of one of the Job Roles"
}
else
{
    Write-Host "User is not a member of any of the Job Roles"
} 
```

# c# - 在 .NET 框架中获取程序集信息

> ID：12011652
> 
> 赞同：-1
> 
> 时间：2012-08-17T18:58:10.987
> 
> 标签：c#, asp.net, .net, reflection, .net-assembly

我在 32 位操作系统和 64 位操作系统中安装了水晶报表，

```
in 32-bit it installs in SOFTWARE location under HKEY_LOCALMACHINE.

in 64-bit it installs in SOFTWARE\WOw6432Node location under HKEY_LOCALMACHINE 
```

如何在不指定路径的情况下加载程序集？

IE。我不想这样做

```
System.Reflection.Assembly assemblyInfo = System.Reflection.Assembly.LoadFile("C:\\Program Files (x86)\\Engine.dll"); 
```

Engine.dll 可以位于程序文件之外的任何位置。

> 当我单独提供 .dll 名称时，.NET 框架中是否有一些东西可以用来制作框架来加载程序集信息？（内部框架可以搜索它并加载程序集信息）。

我认为 GetTypeFromProgID 可能没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:02:41.860

在 gac 中设置

```
gacutil.exe -I <assembly name> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:00:32.197

要使程序集命名空间可全局访问，您需要将程序集放入 GAC。

[如何：将程序集安装到全局程序集缓存中](http://msdn.microsoft.com/en-us/library/dkkx7f79.aspx)

# mootools - 跟踪 Web 应用页面关闭，AJAX 请求取消

> ID：12011655
> 
> 赞同：0
> 
> 时间：2012-08-17T18:58:19.313
> 
> 标签：mootools, analytics, onbeforeunload, mixpanel

我有一些网络应用程序。它是基于桌面的。我有一个问题，在我保存数据之前操作被取消。我在 javascript 中使用 unload 事件将一些数据发送到 mixpanel（只是一些 ajax 调用）。问题是我相信这个请求有时会被“取消”。

有没有办法防止页面在我收到回调之前发生变化？我觉得答案是否定的，除非我能够使呼叫同步。我不认为我有 mixpanel 的能力。

我目前正在使用 mootools 中的卸载事件。我可能应该使用 beforeunload？有没有办法告诉卸载我完成了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T03:34:29.247

最简洁的答案是不。同步 ajax 似乎是这里唯一可靠的选择。

如果您正在控制客户端代码，则很容易使其同步。只需添加`async: false`大量`Request`选项。服务器不会在意的。

对于我们这些习惯于编写异步 ajax 的人来说，一个潜在的问题是：在处理程序完成`Request.send()`之前，调用之后的任何内容都不会被执行`onComplete`。这意味着诸如显示“请稍候...”之类的细节必须首先出现在代码中。对于异步请求，顺序显然无关紧要，通常先发送请求。

至于`beforeunload`，它在这里可能没有用。的值`beforeunload`是允许用户取消即将加载的页面。如果您不需要此功能，请使用`unload`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-22T22:57:16.483

有一种更新的方法使用`navigator.sendBeacon`. 下面设置了一个混合面板事件，用于离开页面。

```
var props = {};
document.addEventListener('visibilitychange', function() {
    if (document.visibilityState === 'hidden') {
        mixpanel.track('Page closed', props, {transport: 'sendBeacon'});
    }
}); 
```

`{transport: 'sendBeacon'}`是 2020 年 1 月之前 mixpanel js 中可用的东西，正如[这个 github 问题中所讨论的那样](https://github.com/mixpanel/mixpanel-js/issues/184#issuecomment-571782319)。该讨论中有（建议的，在实施之前）片段，但我认为它应该说“beforeunload”而不是“unload”。但后来我发现...

navigator.sendbeacon 上的[developer.mozilla.org 文档包含一个非常相关的部分](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon#sending_analytics_at_the_end_of_a_session)，建议使用“visibilitychange”而不是“unload”或“beforeunload”进行跟踪。即使用户切换到不同的选项卡也会触发此事件（不完全“关闭”页面。可能不是预期的），但如果移动浏览器用户打开不同的应用程序也会触发（可能*是*预期的，因为这几乎是在手机上“关闭”页面的主要方式）。

# jasper-reports - 如何在诗页之前打印首页

> ID：12011656
> 
> 赞同：1
> 
> 时间：2012-08-17T18:58:27.063
> 
> 标签：jasper-reports, ireport

我需要对*JasperReports* ( *iReport 3.7.2* ) 进行报告，其中首页出现在经文页面之前。（这是为了证书）。

我尝试做两个子报表，每个子报表都在一个详细信息带中，第一个子报表有 sql 从首页获取信息，第二个子报表到后页。

但是，我只能让它们显得穿插。

例子：

> 第1页-证书正面1
> 
> 第2页-证书背面1
> 
> 第 3 页-证书正面 2
> 
> 第4页-证书背面2

事实上我想

> 第1页-证书正面1
> 
> 第2页-证书正面2
> 
> 第3页-证书背面 1
> 
> 第4页-证书背面2

你知道我该怎么解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:42:42.357

我通过将首页与经文页面连接起来解决了我的问题，如以下链接所示：[如何在 JasperReports 中将两个 pdf 文档合并为一个报告？](https://stackoverflow.com/questions/2666001/how-to-merge-two-pdf-documents-into-a-single-report-in-jasperreports)

# web-services - 如何将图像作为 Web 服务处理？

> ID：12011664
> 
> 赞同：-4
> 
> 时间：2012-08-17T18:59:18.757
> 
> 标签：web-services, cgi

我想编写一个简单的 Web 服务（我并不特别关注语言实现），它在 Nearfreespeech.net 的 FreeBSD Web 服务器上运行，它接受一个指向 JPEG 图像的 URL，该 URL 带有一些附加参数，如下所示：

`http://www.myserver.com/script.cgi?url=http://www.destination.com/image.jpg&width=320`

并执行以下操作：

1.  如何解析 URL 的参数？（目标 URL 加上一些额外的参数进行处理）
2.  如何在参数中提供的 URL 中获取图像的内容？
3.  根据附加参数，对内容进行一些处理（超出本题范围）
4.  如何返回处理后的图像以正确识别为要在浏览器中显示的图像（而不是返回文本）？

我认为这对于像 Perl 这样的脚本语言来说并不难，但我不知道从哪里开始步骤 1、2 和 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:52:34.227

我最近一直在研究 PHP 爬虫，所以我对其中一些问题相当熟悉。

对于这些问题，我建议以下解决方案：

1.  您可以使用 $_GET 或 $_POST 轻松获取参数。如果需要获取 URL 的其他部分，可以使用 parse_url()

2.  虽然 file_get_contents() 可以工作，但 cURL 是一个更加复杂和强大的解决方案。

3.  cURL 可以返回一个文件句柄，其中包含已下载的任何文件，并且可以在此时对其进行处理。

4.  然后您可以使用 fwrite() 将文件内容写入本地文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:13:11.823

您提供的 url 无效，但您可以对查询字符串进行编码，例如： [http](http://www.myimageserver.com?url=http%3a%2f%2fwww.flickr.com%2fsomeimage.jpg%2f320%2f200) ://www.myimageserver.com?url=http%3a%2f%2fwww.flickr.com%2fsomeimage.jpg%2f320%2f200 （此处为flickr url 是 urlencoded，您可以在这里在线尝试 urlencoding：[http](http://www.opinionatedgeek.com/DotNet/Tools/UrlEncode/Encode.aspx) : //www.opinionatedgeek.com/DotNet/Tools/UrlEncode/Encode.aspx

1.  使用php，可以获取url的参数。要在 php 中访问“http://www.flickr.com/someimage.jpg/320/200”，您只需使用：

    $url = $_GET['url']; // 将 $url 设置为字符串：“http://www.flickr.com...”

    // ... 解析可以在这里完成

2.  要获取 url 的内容：

    $url_content = file_get_contents($url);

3.  现在您可以进行处理了。

4.  要返回输出，您可以使用 echo：

    回声 $processed_content;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:02:30.583

这是一个示例，仅适用于 jpeg 图像。

```
<?
$url = $_GET['url'];

$im = imagecreatefromjpeg($url);
header("Content-Type: image/jpeg");

for($i=0;$i<100;$i++)
{
    for($j=0;$j<100;$j++)
    {
        if(rand(0,1))
        {
            $rand = rand(0,4);
            imagesetpixel($im,$i,$j,imagecolorallocate($im, 255, 255, 255));
        }
    }
}

imagejpeg($im);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T19:04:35.400

我喜欢 python 来做这种事情。具体来说，位于 WSGI 服务器上的 Python WSGI 应用程序应该适合您的应用程序。

Python 带有一个“简单的服务器”，您可以在其上进行测试。对于部署，您可能希望找到第三方 WSGI 服务器，例如 CherryPy 的 WSGI 服务器或 Rocket（两者都完全在 python 中实现）。

如果可能的话，我会推荐 python 3.2，因为 GIL 更好，这对多线程 WSGI 服务器有影响，比如我提到的 CherryPy 和 Rocket。

阅读 WSGI 以获取更多信息。在 Python 站点 e，PEP 333 和 3333。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T02:50:05.233

下面是我在 Perl 中的做法：

```
#!/usr/bin/perl
use CGI qw(:standard);
use IO::Handle;
use LWP::Simple;
use File::Temp;
use File::Slurp;

$url = param('url');
$width = param('width');
$height = param('height');
$content = get($url);

$in = File::Temp->new( SUFFIX => '.jpg' );
print $in $content;

$out = File::Temp->new( SUFFIX => '.jpg' );
system("convert $in -resize $width" . "x" . "$height $out");

my $q = new CGI;
print $q->header( - type => "image/jpeg", -expires => "-1d" );

$content2 = read_file($out);
print $content2; 
```

# objective-c - Facebook SDK 3.0 在使用 iOS 4.2 的设备上崩溃

> ID：12011666
> 
> 赞同：0
> 
> 时间：2012-08-17T18:59:27.237
> 
> 标签：objective-c, facebook, ios4

我在运行 iOS 4.2.1 的 iPod Touch 上遇到了一个奇怪的问题，我的应用在尝试`FBProfilePictureView`使用 Facebook 3.0 SDK 显示时会崩溃。

我显示个人资料的方式与 Facebook 在其[Personalize](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/personalize/)教程中显示的方式相同。这适用于运行 5.1.1 和 5.1、5.0 和 4.3 模拟器的 iPhone 4S。

我遇到的问题是`EXC_BAD_ACCESS`由于`FBDataDiskCache`'`init`方法中的空指针调用时我得到一个： `dispatch_queue_t bgPriQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0); _fileQueue = dispatch_queue_create( "File Cache Queue", DISPATCH_QUEUE_SERIAL); dispatch_set_target_queue(_fileQueue, bgPriQueue);`。

`bgPrigQueue`是空的，我相信会导致问题。`FBDataDiskCache`代码在[这里](https://github.com/facebook/facebook-ios-sdk/blob/master/src/FBDataDiskCache.m)。第 61 行是问题所在。

当我尝试这样设置时，会调用这段代码`profileId`：`self.userProfileImage.profileID = user.id;`

我确实认为我正在做任何与众不同的事情，并且新的 SDK 支持 4.0。那么我该如何解决这个崩溃呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:37:42.427

所以它似乎`DISPATCH_QUEUE_PRIORITY_BACKGROUND`只在 iOS 5.0 及更高版本中可用。

[GCD 的并发队列？(iOS 4.2.1)](https://stackoverflow.com/questions/8420599/concurrent-queue-with-gcd-ios-4-2-1)

# xslt - 使用 xslt 将 CSV 转换为 XML - 如何增加列名

> ID：12011669
> 
> 赞同：2
> 
> 时间：2012-08-17T18:59:39.047
> 
> 标签：xslt

我有这个 xslt 将 csv 转换为 xml，工作正常，除了所有列的标签都相同。我需要它像这样增加

```
<row>
  <column1></column1>
  <column2></column2>
  <column3></column3>
</row> 
```

当我使用 position() 时，它将所有列重命名为 column1

```
<xsl:element name="{concat('column', position())}"> 
```

这是xslt：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" omit-xml-declaration="yes"/>
    <xsl:variable name="LF" select="'&#xA;'"/>
    <!-- template that matches the root node-->
    <xsl:template match="/">
        <root>
            <xsl:call-template name="texttorows">
                <xsl:with-param name="StringToTransform" select="/root"/>
            </xsl:call-template>
        </root>
    </xsl:template>
    <!-- template that actually does the conversion-->
    <xsl:template name="texttorows">
        <!-- import $StringToTransform-->
        <xsl:param name="StringToTransform" select="''"/>
        <xsl:choose>
            <!-- string contains linefeed-->
            <xsl:when test="contains($StringToTransform,$LF)">
                <!-- Get everything up to the first carriage return-->
                <row>
                    <xsl:call-template name="csvtoxml">
                        <xsl:with-param name="StringToTransform" select="substring-before($StringToTransform,$LF)"/>
                    </xsl:call-template>
                </row>
                <!-- repeat for the remainder of the original string-->
                <xsl:call-template name="texttorows">
                    <xsl:with-param name="StringToTransform">
                        <xsl:value-of select="substring-after($StringToTransform,$LF)"/>
                    </xsl:with-param>
                </xsl:call-template>
            </xsl:when>
            <!-- string does not contain newline, so just output it-->
            <xsl:otherwise>
                <row>
                    <xsl:call-template name="csvtoxml">
                        <xsl:with-param name="StringToTransform" select="$StringToTransform"/>
                    </xsl:call-template>
                </row>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    <xsl:template name="csvtoxml">
        <!-- import $StringToTransform-->
        <xsl:param name="StringToTransform" select="''"/>
        <xsl:choose>
            <!-- string contains linefeed-->
            <xsl:when test="contains($StringToTransform,',')">
                <!-- Get everything up to the first carriage return-->
                <xsl:element name="{concat('column', position())}">
                    <xsl:value-of select="substring-before($StringToTransform,',')"/>
                </xsl:element>
                <!-- repeat for the remainder of the original string-->
                <xsl:call-template name="csvtoxml">
                    <xsl:with-param name="StringToTransform">
                        <xsl:value-of select="substring-after($StringToTransform,',')"/>
                    </xsl:with-param>
                </xsl:call-template>
            </xsl:when>
            <!-- string does not contain newline, so just output it-->
            <xsl:otherwise>
                <column>
                    <xsl:value-of select="$StringToTransform"/>
                </column>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

这是一个示例 csv：

```
<root>
3779490,916705,CS,60,34.89,Sauce/Cholula
5918104,918958,CS,6,20.63,Pasta/Fresh/Cavatelli/6#/Frozen
5064774,920723,CS,10,45.5,Cheese/Oaxaca
3422752,925230,EA,8,69.6,Chipotle/Powder/Ground
5955640,BB171,CS,30,50.7,Butter/Unsalted
5295326,BC110005,CS,6000,54.95,Oil/Olive/Finishing
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:18:11.730

尽管 XSLT 能够处理非 XML 内容，但它似乎不打算用作通用文本转换工具。因此，您可以使用的大多数工具都是关于操作 XML 信息集结构（如元素和属性）的。对文本字符串有一点支持，但不多。所以`position()`是根据输入节点定义的。

[http://www.w3.org/TR/xpath/#section-Node-Set-Functions](http://www.w3.org/TR/xpath/#section-Node-Set-Functions)：

> position 函数从表达式求值上下文返回一个等于上下文位置的数字。

[http://www.w3.org/TR/xslt#section-Expressions](http://www.w3.org/TR/xslt#section-Expressions)：

> 上下文位置来自当前节点在当前节点列表中的位置；第一个位置是 1

由于您的输入只是一个文本字符串，因此您始终处于位置 1。我只能想到一种使用 XSLT 执行此操作的方法。变身两次。第一个转换为您提供了带有未编号列元素的基本结构。第二个转换为列元素编号。因为您第二次从 XML 文档中选择节点，所以`position()`应该具有您想要的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T22:19:05.067

看起来好像`csvtoxml`是用一个大字符串调用的，并且它递归地通过该字符串工作。`position()`在这种情况下不起作用，因为您没有使用一组节点。

相反，您可以使用计数参数来实现您所追求的目标：

```
<xsl:template name="csvtoxml">
    <!-- import $StringToTransform-->
    <xsl:param name="StringToTransform" select="''"/>
    <xsl:param name="ColumnNum" select="1"/>
    <xsl:choose>
        <!-- string contains linefeed-->
        <xsl:when test="contains($StringToTransform,',')">
            <!-- Get everything up to the first carriage return-->
            <xsl:element name="{concat('column', $ColumnNum)}">
                <xsl:value-of select="substring-before($StringToTransform,',')"/>
            </xsl:element>
            <!-- repeat for the remainder of the original string-->
            <xsl:call-template name="csvtoxml">
                <xsl:with-param name="StringToTransform" select="substring-after($StringToTransform,',')" />
                <xsl:with-param name="ColumnNum" select="$ColumnNum + 1" />
            </xsl:call-template>
        </xsl:when>
        <!-- string does not contain newline, so just output it-->
        <xsl:otherwise>
            <xsl:element name="{concat('column', $ColumnNum)}">
                <xsl:value-of select="$StringToTransform" />
            </xsl:element>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T10:31:37.787

尽管 OP 可能正在寻找 XSLT 1.0 解决方案，但这里感兴趣的是 XSLT 2.0 解决方案。此解决方案要求您[从此处下载我的 csv-to-xml 库样式表，](http://www.seanbdurkin.id.au/xslt/csv-to-xml.xslt)[此博客条目](http://seanbdurkin.id.au/pascaliburnus2/archives/117)中对此进行了讨论。

将此作为输入文档，在样式表中使用 uri 'gangt.csv' 引用（使用参数或根据需要进行调整）...

## gangt.csv

```
3779490,916705,CS,60,34.89,Sauce/Cholula
5918104,918958,CS,6,20.63,Pasta/Fresh/Cavatelli/6#/Frozen
5064774,920723,CS,10,45.5,Cheese/Oaxaca
3422752,925230,EA,8,69.6,Chipotle/Powder/Ground
5955640,BB171,CS,30,50.7,Butter/Unsalted
5295326,BC110005,CS,6000,54.95,Oil/Olive/Finishing 
```

## 样式表

...这个 XSLT 2.0 样式表...

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:clib="http://www.seanbdurkin.id.au/xslt/csv-to-xml.xslt" 
  xmlns:xcsv="http://www.seanbdurkin.id.au/xslt/xcsv.xsd"
  exclude-result-prefixes="xsl clib xcsv">
<xsl:import href="csv-to-xml.xslt" />
<xsl:output indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="/" >
 <data-set>
   <xsl:apply-templates select="clib:csv-to-xml('gangt.csv')/xcsv:row" />
 </data-set>
</xsl:template>

<xsl:template match="xcsv:row">
 <row>
   <xsl:apply-templates select="xcsv:value" />
 </row>
</xsl:template>

<xsl:template match="xcsv:value">
 <xsl:element name="column{position()}">
   <xsl:value-of select="." />
 </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

## 输出

...生成此输出文档...

```
<data-set>
   <row>
      <column1>3779490</column1>
      <column2>916705</column2>
      <column3>CS</column3>
      <column4>60</column4>
      <column5>34.89</column5>
      <column6>Sauce/Cholula</column6>
   </row>
   <row>
      <column1>5918104</column1>
      <column2>918958</column2>
      <column3>CS</column3>
      <column4>6</column4>
      <column5>20.63</column5>
      <column6>Pasta/Fresh/Cavatelli/6#/Frozen</column6>
   </row>
   <row>
      <column1>5064774</column1>
      <column2>920723</column2>
      <column3>CS</column3>
      <column4>10</column4>
      <column5>45.5</column5>
      <column6>Cheese/Oaxaca</column6>
   </row>
   <row>
      <column1>3422752</column1>
      <column2>925230</column2>
      <column3>EA</column3>
      <column4>8</column4>
      <column5>69.6</column5>
      <column6>Chipotle/Powder/Ground</column6>
   </row>
   <row>
      <column1>5955640</column1>
      <column2>BB171</column2>
      <column3>CS</column3>
      <column4>30</column4>
      <column5>50.7</column5>
      <column6>Butter/Unsalted</column6>
   </row>
   <row>
      <column1>5295326</column1>
      <column2>BC110005</column2>
      <column3>CS</column3>
      <column4>6000</column4>
      <column5>54.95</column5>
      <column6>Oil/Olive/Finishing</column6>
   </row>
</data-set> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T22:18:54.843

在这种情况下，我不确定您为什么选择 XSLT。它不是诸如此类的字符串处理操作的首选，尤其是因为您的源数据不是 XML，您只是将其包装在一个节点中以使其成为 XML。更明显的方法是通过 PHP 之类的东西处理 CSV。

无论如何，要回答这个问题，如果您可以访问 EXSLT（这通常可用于 XSLT 处理器，例如 PHP）：

[**此处可运行演示**](http://www.xmlplayground.com/OQ10Kw)（请参阅输出**源**）。

```
<!-- break into rows -->
<xsl:variable name='rows' select='str:split(root, "&#xA;")' />

<!-- root - kick things off -->
<xsl:template match='/'>
    <root>
        <xsl:apply-templates select='$rows' mode='row' />
    </root>
</xsl:template>

<!-- rows -->
<xsl:template match='token' mode='row'>
    <xsl:variable name='cols' select='str:split(., ",")' />
    <row>
        <xsl:apply-templates select='$cols' mode='col' />
    </row>
</xsl:template>

<!-- columns -->
<xsl:template match='token' mode='col'>
    <xsl:element name='col{position()}'>
        <xsl:value-of select='.' />
    </xsl:element>
</xsl:template> 
```

# c++ - C ++没有使用fstream将输出发送到文件

> ID：12011672
> 
> 赞同：0
> 
> 时间：2012-08-17T18:59:47.303
> 
> 标签：c++, gcc, fstream

我有这段代码，它使用 fstream 来读取和写入文件。fstream 对象作为对象的成员保存，并在构造函数中初始化，如下所示：

```
idmap.open(path, std::fstream::in | std::fstream::out | std::fstream::app); 
```

如果该文件尚不存在，则会正确创建该文件。然后它被写成这样：

```
idmap.seekp(0, std::fstream::end);
idmap << str.size() << ':' << str << '\n';
idmap.flush();
idmap.sync(); 
```

它应该是这样读取的，但我不知道它是否有效，因为文件一直是空的：

```
idmap.seekg(0);
while (!idmap.eof()) {
    idmap.getline(line, 1024);

    idtype id = getIDMapEntry(std::string(line));
    if (identifier.compare(nfile.getIdentifier()) == 0) {
        return nfile;
    }
} 
```

然后在程序退出时关闭：

```
idmap.close(); 
```

这可能是程序中的其他内容，但我想我会在这里问，以防我做了一些愚蠢的事情，并同时挖掘其他所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:42:52.687

为我工作。

这个程序，除了`.eof()`错误，完全按预期工作：

```
#include <fstream>
#include <iostream>

int main() {
  std::fstream idmap;
  const char path[] = "/tmp/foo.txt";
  idmap.open(path, std::fstream::in | std::fstream::out | std::fstream::app);

  std::string str("She's no fun, she fell right over.");
  idmap.seekp(0, std::fstream::end);
  idmap << str.size() << ':' << str << '\n';
  idmap.flush();
  idmap.sync();

  idmap.seekg(0);
#if 1
  // As the user presented, with .eof() bug
  char line[1024];
  while (!idmap.eof())
  {
    idmap.getline(line, 1024);

    std::cout << line << "\n";
  }
#else
  // With fix for presumably unrelated .eof() bug
  std::string line;
  while(std::getline(idmap, line)) {
    std::cout << line << "\n";
  }
#endif

} 
```

# wpf - 将复选框元素绑定到 contentpresenter 中的元素

> ID：12011676
> 
> 赞同：0
> 
> 时间：2012-08-17T19:00:05.760
> 
> 标签：wpf, xaml

我可以将复选框 ischecked 绑定到 xaml 中的另一个 elemtn，就像

```
<CheckBox IsChecked="{Binding ElementName=textEditor,Path=WordWrap}">
<TextEditor Grid.Row="1"
            Name="textEditor"
            FontFamily="Consolas"
            FontSize="10pt"
            SyntaxHighlighting="JavaScript">

    </TextEditor> 
```

它工作得很好，但出于某种原因，我想在 c# 代码中创建 texteditor 并将其放在 contentpresenter 中，但在此之后绑定无法按我预期的那样工作。

```
 <ContentPresenter Name="CpTextEditor" Grid.Row="1" Content="{Binding TextEditor}">

    </ContentPresenter>

TextEditor = new TextEditor()
                         {
                             Name = "TextEditor",
                             FontFamily = new FontFamily("Consolas"),
                             FontSize = 14,
                             ShowLineNumbers = true,
                             WordWrap = false,
                         }; 
```

有什么办法可以解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T03:17:38.570

我整理了一个在 ContentPresenter 上绑定内容的快速示例：

本质上，您需要确保为 ContentPresenter 正确设置了 DataContext，并且该控件作为 DataContext 的属性公开。

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <ContentPresenter Content="{Binding AControl}" />
</Grid>
</Window> 
```

这是我将用于 DataContext 的类，它实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/System.ComponentModel.INotifyPropertyChanged.aspx)以确保给定属性的绑定保持最新：

```
using System.ComponentModel;
using System.Windows.Controls;

namespace WpfApplication1
{
class Class1 : INotifyPropertyChanged
{
    private TextBox aControl;
    public TextBox AControl
    {
        get
        {
            return aControl;
        }
        set
        {
            aControl = value;
            OnPropertyChanged("AControl");
        }

    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged.Invoke(this, new PropertyChangedEventArgs(propName));
        }
    }
}
} 
```

最后，本示例中我的窗口背后的代码负责设置窗口的 DataContext（反过来为 ContentPresenter 提供上下文）：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        var myObject = new Class1();

        DataContext = myObject;
        myObject.AControl = new TextBox();
        myObject.AControl.Text = "abcd";
    }
} 
```

注意：我之前的答案不正确。此外，我无权访问或不知道您从哪里获取 TextEditor 控件（它不是标准的 wpf 控件），但希望以与我在这里使用 TextBox 相同的方式使用它。

# objective-c - 如何让 y 轴处于 CorePlot 中的特定 x 值？

> ID：12011677
> 
> 赞同：1
> 
> 时间：2012-08-17T19:00:08.583
> 
> 标签：objective-c, core-plot

我有以下条形图。我希望 y 轴出现在 x = 2005（x 范围 2006-2012），但是它似乎只想在我将 x 轴范围更改为 0 时出现：

![具有有效 x 范围的条形图没有 y 轴](../Images/dbfe2d2c7e7616f3ee6dcb4e19fb032a.png) ![x 范围错误的条形图有一个 y 轴](../Images/b5564ed2bf34fed65adf9c8fe745cb8f.png)

这是我配置绘图的代码：

```
//Create graph and set it as host view's graph
self.graph = [[CPTXYGraph alloc] initWithFrame:self.hostView.bounds];
[self.hostView setHostedGraph:self.graph];

//set graph padding and theme
self.graph.plotAreaFrame.paddingTop = 10.0f;
self.graph.plotAreaFrame.paddingRight = 10.0f;
self.graph.plotAreaFrame.paddingBottom = 60.0f;
self.graph.plotAreaFrame.paddingLeft = 60.0f;
[self.graph applyTheme:[CPTTheme themeNamed:kCPTDarkGradientTheme]];

//set axes ranges
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)self.graph.defaultPlotSpace;
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:
                    CPTDecimalFromFloat(2005) //min year minus 1
                                                length:CPTDecimalFromFloat((8))]; //year difference plus 2

plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:
                    CPTDecimalFromFloat(0)
                                                length:CPTDecimalFromFloat((700))]; // round up to next 50

CPTXYAxisSet *axisSet = (CPTXYAxisSet *)self.graph.axisSet;
//set axes' title, labels and their text styles
CPTMutableTextStyle *axisStyle = [CPTMutableTextStyle textStyle];
axisStyle.fontName = @"ArialRoundedMTBold";
axisStyle.fontSize = 20;
axisStyle.color = [CPTColor whiteColor];

//label text style
CPTMutableTextStyle *labelStyle = [CPTMutableTextStyle textStyle];
labelStyle.fontName = @"ArialRoundedMTBold";
labelStyle.fontSize = 16;
labelStyle.color = [CPTColor whiteColor];

axisSet.xAxis.title = @"Year";
axisSet.yAxis.title = @"Distance (mi)";
axisSet.xAxis.titleTextStyle = axisStyle;
axisSet.yAxis.titleTextStyle = axisStyle;
axisSet.xAxis.titleOffset = 30.0f;
axisSet.yAxis.titleOffset = 30.0f;
axisSet.xAxis.labelTextStyle = labelStyle;
axisSet.xAxis.labelOffset = 3.0f;
axisSet.yAxis.labelTextStyle = labelStyle;
axisSet.yAxis.labelOffset = 3.0f;
//set axes' line styles and interval ticks
CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];
lineStyle.lineColor = [CPTColor whiteColor];
lineStyle.lineWidth = 3.0f;
axisSet.xAxis.axisLineStyle = lineStyle;
axisSet.yAxis.axisLineStyle = lineStyle;
axisSet.xAxis.majorTickLineStyle = lineStyle;
axisSet.yAxis.majorTickLineStyle = lineStyle;
axisSet.xAxis.majorIntervalLength = CPTDecimalFromFloat(100.0f);
axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(50.0f);
axisSet.xAxis.majorTickLength = 5.0f;
axisSet.yAxis.majorTickLength = 5.0f;

// Create bar plot and add it to the graph
CPTBarPlot *plot = [[CPTBarPlot alloc] init] ;
plot.dataSource = self;
plot.delegate = self;
plot.barWidth = [[NSDecimalNumber decimalNumberWithString:@"0.75"]
                 decimalValue];
plot.barOffset = [[NSDecimalNumber decimalNumberWithString:@"0.0"]
                  decimalValue];
plot.barCornerRadius = 5.0;
// Remove bar outlines
CPTMutableLineStyle *borderLineStyle = [CPTMutableLineStyle lineStyle];
borderLineStyle.lineColor = [CPTColor clearColor];
plot.lineStyle = borderLineStyle;
// Identifiers are handy if you want multiple plots in one graph
plot.identifier = @"yearlymiles";
[self.graph addPlot:plot]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:09:51.577

有两种方法可以控制它：

1.  设置`orthogonalCoordinateDecimal`属性。例如，

    ```
    axisSet.yAxis.orthogonalCoordinateDecimal = CPTDecimalFromDouble(2005.0); 
    ```

2.  使用约束。例如，

    ```
    axisSet.yAxis.axisConstraints = [CPTConstraints constraintWithLowerOffset:0.0]; 
    ```

# php - 立即显示数据库中的少量条目的最佳选择？

> ID：12011683
> 
> 赞同：0
> 
> 时间：2012-08-17T19:00:53.990
> 
> 标签：php, mysql

基本上，如果我必须每天显示一个条目 5000 次，那么在不使用太多服务器 CPU 的情况下每天显示 5000 次的最佳选择是什么？

所以基本上，例如我们有一个包含数据的数据库（例如 3 个条目），每个条目每天必须显示 3000 次，最好的选择是什么？

是cronjobs还是其他？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:12:31.207

如果您希望缩短检索相同记录所需的时间，您可能会考虑做一些事情：-

1.  在数据库级别和应用程序级别启用缓存（如[memcached](http://memcached.org/)）
2.  找出最合适的索引，以便快速查询。

肯定有很多其他的方法，但这些都是我的想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T19:50:44.047

`update_script.php`每天使用 cronjob 运行一次，它执行以下两种可能的事情之一：

a）它创建一个`included.inc`包含在其他（以前存在的）文件中的文件`require_once 'included.inc'`（如@andrewsi 所建议的）以及来自数据库的数据或

`todaydata.htm`b）它使用数据库中的数据在您的公共空间上创建一个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T19:04:52.953

您可以通过在此处创建 mysql 作业检查来做到这一点

[http://www.sitepoint.com/how-to-create-mysql-events/](http://www.sitepoint.com/how-to-create-mysql-events/)

希望它做你想要的。

# php - PHP fsockopen() 工作一次，但在随后的尝试中失败

> ID：12011686
> 
> 赞同：1
> 
> 时间：2012-08-17T19:01:02.327
> 
> 标签：php, fsockopen

我正在尝试使用 PHP 套接字连接定期轮询服务器。但是，当我第一次运行脚本时，我得到了正确的行为，但第二次出现以下错误：

```
fsockopen(): php_network_getaddresses: getaddrinfo failed: Name or service not known 
```

当我第三次运行脚本时，出现以下错误：

```
fsockopen(): unable to connect to :0 (Failed to parse address "") 
```

随后的每次尝试都会重复该错误。但是，如果我等待大约一分钟并重试，那么一切正常。在我看来，当我尝试再次创建它时，我遇到了套接字连接没有关闭然后被拒绝的问题。

处理套接字通信的类是：

```
class FsSocket
{   
private $password = "XXXXXXXXXX";
private $port = "8030";
private $host = "hostname";

function event_socket_create( $host=null, $port=null, $password=null ) {
    if ( $host == null ) {
        $host = $this->host;
    }
    if ( $port == null ) {
        $port = $this->port;
    }
    if ( $password == null ) {
        $password = $this->password;
    }

    error_log( $host.":".$port );
    $fp = fsockopen($host, $port, $errno, $errdesc, 2) or die("Connection to $host failed");
    socket_set_blocking($fp,false);

    if ($fp) {
        while (!feof($fp)) {
            $buffer = fgets($fp, 1024);
            usleep(100); //allow time for reponse
            if (trim($buffer) == "Content-Type: auth/request") {
            fputs($fp, "auth $password\n\n");
            break;
            }
        }
        return $fp;
    }
    else {
        return false;
    }           
}

function event_socket_request($fp, $cmd) {

    if ($fp) {    
        fputs($fp, $cmd."\n\n");    
        usleep(100); //allow time for reponse

        $response = "";
        $i = 0;
        $contentlength = 0;
        while (!feof($fp)) {
            $buffer = fgets($fp, 4096);
            if ($contentlength > 0) {
            $response .= $buffer;
            }

            if ($contentlength == 0) { //if contentlenght is already don't process again
                if (strlen(trim($buffer)) > 0) { //run only if buffer has content
                    $temparray = explode(":", trim($buffer));
                    if ($temparray[0] == "Content-Length") {
                        $contentlength = trim($temparray[1]);
                    }
                }
            }

            usleep(100); //allow time for reponse

            //optional because of script timeout //don't let while loop become endless
            if ($i > 10000) { break; } 

            if ($contentlength > 0) { //is contentlength set
                //stop reading if all content has been read.
                if (strlen($response) >= $contentlength) {  
                break;
                }
            }
            $i++;
        }

        return $response;
    }
    else {
    echo "no handle";
    }
}
} 
```

调用socket类的代码如下：

```
$socket = new FsSocket();
$fp = $socket->event_socket_create();

$cmd = "sofia_contact $to->user@$to->domain";
$response = $socket->event_socket_request($fp, $cmd);

fclose($fp);
unset($socket); 
```

我还没有实现循环位。我正在尝试通过先手动刷新页面来使其正常工作。

# c++ - 在执行 DFS 时在 Boost::graph 中维护迭代器

> ID：12011697
> 
> 赞同：6
> 
> 时间：2012-08-17T19:02:05.753
> 
> 标签：c++, boost, graph, iterator, depth-first-search

Boost:graph 库的大多数示例通过调用 boost 的深度优先搜索实用程序来执行深度优先搜索。在创建顶点和边之后，在图上调用 DFS 以深度优先的方式遍历整个图，如果我们有与之关联的访问者方法，它将调用访问者方法来执行每个遍历的节点的操作。

我正在寻找的是一种在图上维护迭代器的方法，当客户端调用'next()'时，迭代器将移动到它将遍历到的下一个顶点，而不是一次性遍历图DFS 并在再次调用 next 时，迭代器将移动到 DFS 指示的下一个顶点。

有没有使用 boost:graph 执行上述操作的示例？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:23:04.870

不幸的是，boost::graph API 是基于访问者的，即回调。原则上，将其转换为迭代器的唯一方法是协程，C++ 没有标准。

# artificial-intelligence - 最新的（开源）聊天机器人/假人工智能？

> ID：12011699
> 
> 赞同：15
> 
> 时间：2012-08-17T19:02:14.553
> 
> 标签：artificial-intelligence, chatbot

开源聊天机器人/假人工智能“技术”的最新进展是什么？ELIZA/ALICE/MegaHAL 是否仍然“流行”，或者在过去十年中取得了任何进展？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-06-23T14:46:26.660

ChatScript 是我发现的用于开发会话代理的最佳开源工具（BSD 许可）：

[https://github.com/ChatScript/ChatScript](https://github.com/ChatScript/ChatScript)

我已经使用它好几年了，它对程序员非常友好（以适合程序员思考和使用工具的方式编写）。最重要的是，它是为解决解析自然语言句子的真正混乱问题而编写的，它具有强大的输入预处理器和用于匹配文本的灵活模式匹配样式规则引擎。

从 SourceForge 项目页面：

ChatScript 是下一代聊天机器人引擎，它与 Suzette 一起赢得了 2010 年 Loebner 奖，2011 年与 Rosette 一起赢得了 Loebner 奖，以及 2012 年与 Angela 一起赢得了 Loebner 奖（这是我在 Loebner 协议中引入的一个错误，而不是引擎）。Outfit7 的移动应用 Tom Loves Angela 和日本 SpeakGlobal 的 ESL 聊天机器人背后的技术。2012 年 Chatbot Battles 第三名并获得最佳 15 分钟对话奖。2013 年勒布纳第三名和 2014 年第一名。

还具有用于名词、动词、形容词、副词的有用本体文件。独立或服务器模式。LINUX（32 位和 64 位）和 Windows (Visual Studio 10) 和 Mac/iOS。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-19T19:04:57.733

关于最新的会话代理常见问题，请参阅我的元指南网页，[“Yahoo! Answers - Best Answers”](http://www.meta-guide.com/home/about/yahoo-answers-best-answers)和[“Quora Answers”](http://www.meta-guide.com/home/about/quora-answers)。在非模式匹配、统计对话系统方面，我建议看看[USC Virtual Human Toolkit NPCEditor](http://vhtoolkit.ict.usc.edu/index.php/NPCEditor)和[IBM Watson 前身 QA 系统，](http://www.ephyra.info)来自 CMU 的 OpenEphyra。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-29T16:38:47.293

我为自己创建了一个工具，因为我想构建简单的聊天机器人并轻松管理整个生命周期：创建、测试、部署和分析。它获得了一些人气，所以我把它变成了一家初创公司：[https ://www.hubtype.com/products/chatbots.html](https://www.hubtype.com/products/chatbots.html)

使用消息应用程序提供的丰富交互元素（如快速回复、轮播等）让聊天机器人快速启动和运行非常有用，这使得交互非常容易，无需花哨的人工智能。但是，如果您需要更复杂的文本交互，您还可以集成最先进的自然语言理解服务，例如 IBM Watson 或 api.ai。

# list - 如何隐藏 [] （或一般 [] ）的 Monad 实例？

> ID：12011705
> 
> 赞同：6
> 
> 时间：2012-08-17T19:02:46.040
> 
> 标签：list, haskell, import, monads

我正在尝试完成[Typeclassopedia](http://www.haskell.org/haskellwiki/Typeclassopedia)中的一些练习，但我无法定义自己的 Monad 实例`[]`，因为我似乎无法隐藏它。我能够`Maybe`有效地隐藏，但是当我尝试隐藏时`[]`，出现此错误：`parse error on input '['`

我正在使用这行代码来导入：

```
import Prelude hiding (Maybe, Just, Nothing, []) 
```

更改`[]`为`([])`也不能解决此问题。

我不知道该怎么做。任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T19:09:42.303

您可以尝试`-XNoImplicitPrelude`，但最简单的方法可能是定义您自己的`List`类型，其语义等同`[]`于该类型并实现您的实例。

隐藏实例是不可能的，甚至`import Prelude ()`导入实例也是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T22:40:28.563

本质上，列表语法是神奇的并且是内置的。在创建 Haskell 时，列表被认为是如此通用且非常有用，以至于它们需要特殊的方括号语法以使它们更加方便使用。因此，您无法使用与内置 相同的语法定义自己的列表类型`[a]`，同样您无法隐藏`[]`语法，就像您无法隐藏关键字一样`if`or `where`。这不会阻止您定义自己的列表类型，定义与内置列表类型之间的转换函数。正如其他人所指出的，为自己定义列表函数既不是很困难，也很有教育意义。

当然，您也可以`Monad`使用相同的签名定义自己的类，然后使用它。

# cuda - fmad=false 提供良好的性能

> ID：12011708
> 
> 赞同：5
> 
> 时间：2012-08-17T19:03:00.533
> 
> 标签：cuda, nvidia, fma

来自 Nvidia 发行说明：

```
 The nvcc compiler switch, --fmad (short name: -fmad), to control the contraction of    
 floating-point multiplies and add/subtracts into floating-point multiply-add   
 operations (FMAD, FFMA, or DFMA) has been added: 
 --fmad=true and --fmad=false enables and disables the contraction respectively. 
 This switch is supported only when the --gpu-architecture option is set with     
 compute_20, sm_20, or higher. For other architecture classes, the contraction is     
  always enabled. 
 The --use_fast_math option implies --fmad=true, and enables the contraction. 
```

我有两个内核 - 一个是纯粹的计算绑定，有很多乘法，而另一个是内存绑定。当我这样做时，我注意到我的计算密集型内核的性能持续提高（大约 5%）`-fmad=false`......当我为我的内存绑定内核关闭它时，性能下降的百分比大致相同。因此，FMA 对我的内存绑定内核工作得更好，但是我的计算绑定内核可以通过关闭它来压缩一点性能。可能是什么原因？我的设备是 M2090，我使用的是 CUDA 4.2。

完整的编译选项：（ `-arch,sm_20,-ftz=true,-prec-div=false,-prec-sqrt=false,-use_fast_math,-fmad=false`或者我只是删除`fmad=false`，因为这是默认设置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T16:41:47.623

使用 FMA 可能会稍微增加寄存器压力，因为三个源操作数必须同时可用。因此打开/关闭 FMA 生成会导致指令调度和寄存器分配的微小差异，进而导致性能差异很小。对于具有许多乘加习语的计算密集型内核，-fmad=true 应该会产生显着的性能差异，但是正如您所说，您的内核由乘法控制，因此从使用 FMA 中受益甚少，任何收益都可能是寄存器压力/指令调度方面的偏移

# java - 消息驱动的 bean 可以从大型机队列中提取消息吗？

> ID：12011710
> 
> 赞同：0
> 
> 时间：2012-08-17T19:03:01.160
> 
> 标签：java, jakarta-ee, mainframe, websphere-6.1

在我们的 Java EE 应用程序中，我们使用了中间件队列。从该队列中，我们将获取一条消息并进行处理。

现在，我们的客户端将在大型机队列中放入一条消息。是否可以从该大型机队列中获取消息？我们是否需要从我们这边的代码中配置任何东西来获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:54:15.893

这取决于他们如何设置队列。如果您使用 MQ，如果消息使用单独的队列管理器，则需要将消息转发到您的队列。

假设它已正确完成，您不需要做太多事情。最多订阅另一个队列。

# citrix - wcfrun32.exe 和 wfica32.exe 的区别

> ID：12011713
> 
> 赞同：0
> 
> 时间：2012-08-17T19:03:20.060
> 
> 标签：citrix, xenapp

wcfrun32.exe 和 wfica32.exe 有什么区别

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:13:55.987

Wcfrun32 是始终在后台运行的代理。它在通知区域的屏幕右下角显示接收器图标，并管理更新、设置等。 wfica32 仅在您与 Citrix 服务器建立远程 HDX 连接时启动 - 它向用户显示远程 Citrix 会话.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-04T22:12:46.477

据我了解，**wfcrun32.exe**是管理所有 ICA 连接的连接管理器。

**wfica32.exe**代表每个连接。每个虚拟通道都有一个与之关联的 wfica32.exe 进程，其中包含管理连接和从 ICA 流中解复用虚拟通道数据的驱动程序。

# wordpress - 自定义帖子类型页面显示404错误

> ID：12011720
> 
> 赞同：1
> 
> 时间：2012-08-17T19:03:45.973
> 
> 标签：wordpress

您好我正在尝试创建一个自定义帖子类型显示页面，但由于某种原因该页面无法正常工作，我被发送到 404.php。这是我的代码：

```
add_action('init' , 'business_manager_register');

function  business_manager_register(){
    //add custom post type
    $args = array(
        'label' => 'Business Managers',
        'singular_label' => 'Business',
        'public' => true,
        'shouw_ui' => true,
        'capability_type' => 'post',
        'hierarchical' => true,
        'has_archive' => true,
        'supports' => array('title','editor','thumbnail'),
        'rewrite' => array('slug' => 'businesses' , 'with_front' => false)
    );

    register_post_type('businesses' , $args);
} 
```

现在为了显示它，我创建了文件 archive-businesses.php.Accoding 到我添加的 slug 链接应该是这样的：

```
link/businesses 
```

但是当我尝试链接到它时，我得到了 404 错误，同样的事情发生在 single-businesses.php 上。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T08:38:35.067

我遇到了几乎同样的问题，在我的情况下，虽然存档工作但后来不知何故被破坏了。好吧，刷新永久链接有帮助。我从这里使用了第一种方式：[http ://wp-bytes.com/function/2013/02/flushing-permalinks/](http://wp-bytes.com/function/2013/02/flushing-permalinks/)

在这样做的同时，我看到我的永久链接结构设置为“自定义”。我把它改成了“帖子标题”或者用英文怎么称呼它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T07:50:14.107

转到设置->永久链接并使用帖子名称，以便您可以查看您的帖子

# java - 看不见的窗口是贪婪的

> ID：12011722
> 
> 赞同：2
> 
> 时间：2012-08-17T19:04:01.853
> 
> 标签：java, invisible

我使用 Java 的[半透明形状窗口](http://java.sun.com/developer/technicalArticles/GUI/translucent_shaped_windows/)来创建类似于 Growl 的通知系统。基本上，屏幕右侧潜伏着一个不可见的始终在顶部的窗口，当通知进入时会添加到该窗口中。它可以按需要工作。

但是，如果我尝试单击位于此不可见窗口（最大 400 像素宽）范围内的另一个应用程序中的按钮，则单击事件会转到我的应用程序，这很奇怪，因为它是不可见的并且不做任何事情。这真的让我很困惑；我以为另一个应用程序已冻结。

有没有办法让其他应用程序“点击”我的应用程序？

我觉得这里不需要完整的 SSCCE，但这里有一段可能相关的代码：

```
// Set up frame: no border, etc. (undecorated); transparent.
frame.setUndecorated(true);
frame.setAlwaysOnTop(true);
frame.setResizable(false); // on Mac and maybe other platforms, even
                            // undecorated windows can be
                            // resized
AWTUtilities.setWindowOpaque(frame, false);

// Determine and set size and position.
// Height: maximized; width: maximized up to 400px.
Toolkit toolkit = Toolkit.getDefaultToolkit();
Insets insets = toolkit.getScreenInsets(frame
        .getGraphicsConfiguration());
Dimension screenSize = toolkit.getScreenSize();

Dimension availableSpace = new Dimension(screenSize.width - insets.left
        - insets.right, screenSize.height - insets.bottom - insets.top);

frame.setSize(new Dimension(
        400 > availableSpace.width ? availableSpace.width : 400,
        availableSpace.height));
frame.setLocation(screenSize.width - insets.right
        - frame.getSize().width, insets.top);

// Set the content of the frame to the datum holder.
frame.setContentPane(client.createPanel()); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:55:49.633

请注意，此问题是在 Java7 - 适用于 Mac 的 Oracle 发行版中引入的。对于 Java6，它在 Mac 上运行良好。它也适用于所有 Windows 平台/java 版本。

也许他们有机会在以后的版本中解决这个问题？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T19:43:08.700

仅仅因为您的窗口不透明/半透明并不意味着它不存在，因此，它仍在其范围内接收点击事件。

为什么不将您的窗口设置为在您不使用它时不可见，并且设置为在发布新通知时可见是通过使用：

```
window_instance.setVisible(false);//hides window
window_instance.setVisible(true);//shows window 
```

您可能希望您的窗口在每个新通知发布到它后在短时间内保持可见，只需使用`Timer`and`TimerTask`并具有足够的 s 方法，如果它还没有，`delay`则在`TimerTask`s`run()`方法中将窗口实例设置为不可见。

另请参阅此处以获取有关`Timer`'s 的帮助：[使用 Timer 和 TimerTask 类](http://enos.itcollege.ee/~jpoial/docs/tutorial/essential/threads/timer.html)

# c++ - 压缩和解压缩文件 C++

> ID：12011723
> 
> 赞同：12
> 
> 时间：2012-08-17T19:04:02.813
> 
> 标签：c++, linux, zip, unzip

我想编写将文件夹压缩到 .zip 文件或将 .zip 文件解压缩到文件夹中的代码。我相信我需要一些支持它的库，对吗？如果是这样，是否有我应该使用的特定库？我想在 Linux 机器（Ubuntu）上用 C++ 编写代码。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T19:07:56.640

如果您想要更高级别的方式来执行此操作，您可以使用（或其他进程启动机制）直接从 C++调用`zip`and命令。这些实用程序在 Ubuntu 中默认可用。`unzip``system()`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-17T19:06:58.407

我建议[zlib](http://www.zlib.net/)，它是用 C 语言编写的，但经过大量测试，使用了多年，并且几乎可以在您可以想象的每个平台上移植。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-17T19:46:11.633

我会推荐[LZMA/7 Zip](http://sourceforge.net/projects/sevenzip/)库。它支持多种压缩格式，可用于几乎任何类型的 (OS) 环境。库 API 在 C 中，您可以轻松地选择您需要的内容（只是解压缩、压缩或两者兼而有之）。它还附带一个开源许可证，可以轻松用于任何类型的项目（商业或操作系统）。

我们在许多嵌入式项目中成功地使用了这个库。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-15T21:05:54.090

看看[Rich Geldreich 的 miniz](https://code.google.com/p/miniz/)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-17T19:13:36.467

尝试[libzip](http://www.nih.at/libzip/)。我没有使用过它，但它看起来提供了一个与 stdio API 非常相似的 API，用于访问 ZIP 档案中的压缩文件。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-17T19:11:18.803

编写自己的解压缩逻辑（使用 zlib 进行解压缩）并不难。（我已经这样做了。）编写 zip 会有点困难，但可行。

zip 规范[在此处](http://www.pkware.com/documents/casestudies/APPNOTE.TXT)在线。

# ios - iOS - 未调用 Google Analytics 委托方法且未跟踪页面浏览量

> ID：12011724
> 
> 赞同：2
> 
> 时间：2012-08-17T19:04:05.027
> 
> 标签：ios, google-analytics

我正在尝试为 iOS 创建一个可以使用 Google Analytics 的示例应用程序。我在 Google Analytics 上创建了一个免费帐户，获得了 Tracking ID 并在 Google 的示例“BasicExample”中使用了它（仅用于测试目的）。

我运行了应用程序（在模拟器和设备中）并且没有错误，但是，我的 Google Analytics 帐户没有注册任何活动（即使在两天之后），所以我尝试打开调试并实现 GANTrackerDelegate 方法。

调度跟踪器时，不会调用委托方法，控制台中会记录或多或少类似的内容：

```
2012-08-17 09:25:53.835 BasicExample[402:707] dispatch called
2012-08-17 09:25:53.839 BasicExample[402:707] dispatching 5 hits
2012-08-17 09:25:53.853 BasicExample[402:707] GET /__utm.gif?utmwv=4.8mi&utmn=20613118&utmcs=UTF-8&utmsr=320x480&utmsc=24-bit&utmul=pt-br&utmp=%2FSUPAPAGE&utmac=UA-34104824-1&utmcc=__utma%3D1.1516748783.1345205912.1345205912.1345205912.1%3B&utmht=1345205912658&utmqt=441194 HTTP/1.1

Host: www.google-analytics.com

User-Agent: GoogleAnalytics/1.4 (iPod touch; U; CPU iPhone OS 5.0.1 like Mac OS X; pt-br) 
```

在此之后，每次再次调度跟踪器时，都会在控制台中记录消息“...调度程序很忙”。而且我的 Google Analytics（分析）帐户没有更新。

这是我的 AppDelegate 代码：

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {
    [[GANTracker sharedTracker] setDebug:YES];
    [[GANTracker sharedTracker] startTrackerWithAccountID:@"UA-XXXXXXXX-1" dispatchPeriod:5 delegate:self];

    NSError* error = nil;

    if (![[GANTracker sharedTracker] trackPageview:@"/app_entry_point" withError:&error]) {
        NSLog(@"error in trackPageview");
    }

    [window_ makeKeyAndVisible];
}

- (void)dealloc {
    [[GANTracker sharedTracker] stopTracker];
    [window_ release];
    [super dealloc];
}

- (void)hitDispatched:(NSString *)hitString
{
    NSLog(@"foo");
}

- (void)trackerDispatchDidComplete:(GANTracker *)tracker eventsDispatched:(NSUInteger)hitsDispatched eventsFailedDispatch:(NSUInteger)hitsFailedDispatch
{
    NSLog(@"bar");
} 
```

我的本地网络上有一个代理。

有人知道为什么委托方法永远不会被调用并且那件事会记录在控制台中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:14:59.303

当您在跟踪某些内容后调用 dispatch 方法时它是否有效？你可以这样做：

```
[[GANTracker sharedTracker] dispatch]; // Manual dispatch 
```

仅当您没有在很短的时间间隔内拨打 2 次电话时，此方法才有用。否则它将不再调度（“...调度员很忙”问题）。

如果你想清除命中堆栈（如果你想让谷歌分析再次工作，你必须这样做），你必须从模拟器中删除应用程序

# .net-4.0 - 报告查看器错误框架 4 .0

> ID：12011725
> 
> 赞同：1
> 
> 时间：2012-08-17T19:04:05.143
> 
> 标签：.net-4.0, reporting-services, ssrs-2008, reportviewer

我在具有框架 4 的项目中使用 Report Viewer 的 Web 组件。当我更改参数下拉列表中的选定值时，应用程序被阻止，并且只保留加载消息。我不知道我是否需要配置脚本管理器或其他东西。

由于组件被渲染，这些错误出现：

> 代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；WOW64；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0 ; .NET4.0C; .NET4.0E)
> Fecha：2012 年 8 月 15 日星期三 22:19:26 UTC
> 
> Mensaje：Sys.InvalidOperationException：类型 Microsoft.Reporting.WebFormsClient._HoverImage 已注册。该类型可能被定义多次，或者定义它的脚本文件可能已经被加载。一个可能的原因是在部分更新期间更改了设置。
> Línea: 785
> Carácter: 42
> Código: 0
> URI:`https://Server/nmxeservices/eservices/RepVentas/ScriptResource.axd?d=c1VzySeHl4YwO9dCq2lZXLdX-YgogXSsDhgzTW2fIP1PFYczn4peaWb3wfmvzWT-vn1mU0mbAZnyTbfMZeAJByiIdijmVcbstfQBkHxSnns1&t=16ab2387`
> 
> Mensaje：Sys.InvalidOperationException：脚本“Timer.js”已被多次引用。如果显式引用 Microsoft AJAX 脚本，请将 ScriptManager 的 MicrosoftAjaxMode 属性设置为显式。
> Línea: 984
> Carácter: 9
> Código: 0
> URI:`https://Server/nmxeservices/eservices/RepVentas/ScriptResource.axd?d=c1VzySeHl4YwO9dCq2lZXLdX-YgogXSsDhgzTW2fIP1PFYczn4peaWb3wfmvzWT-vn1mU0mbAZnyTbfMZeAJByiIdijmVcbstfQBkHxSnns1&t=16ab2387`

网页错误详情：

> 代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；WOW64；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0 ; .NET4.0C; .NET4.0E)
> Fecha：2012 年 8 月 15 日星期三 22:19:33 UTC
> 
> Mensaje：Sys.InvalidOperationException：类型 Microsoft.Reporting.WebFormsClient._HoverImage 已注册。该类型可能被定义多次，或者定义它的脚本文件可能已经被加载。一个可能的原因是在部分更新期间更改了设置。
> Línea: 785
> Carácter: 42
> Código: 0
> URI:`https://Server/nmxeservices/eservices/RepVentas/ScriptResource.axd?d=c1VzySeHl4YwO9dCq2lZXLdX-YgogXSsDhgzTW2fIP1PFYczn4peaWb3wfmvzWT-vn1mU0mbAZnyTbfMZeAJByiIdijmVcbstfQBkHxSnns1&t=16ab2387`
> 
> Mensaje：Sys.InvalidOperationException：脚本“Timer.js”已被多次引用。如果显式引用 Microsoft AJAX 脚本，请将 ScriptManager 的 MicrosoftAjaxMode 属性设置为显式。
> Línea: 984
> Carácter: 9
> Código: 0
> URI:`https://Server/nmxeservices/eservices/RepVentas/ScriptResource.axd?d=c1VzySeHl4YwO9dCq2lZXLdX-YgogXSsDhgzTW2fIP1PFYczn4peaWb3wfmvzWT-vn1mU0mbAZnyTbfMZeAJByiIdijmVcbstfQBkHxSnns1&t=16ab2387`

# java - 使用 javax.smartcardio 从 mifare classic 读取块

> ID：12011726
> 
> 赞同：4
> 
> 时间：2012-08-17T19:04:06.683
> 
> 标签：java, mifare

我想使用 Java 的 javax.smartcardio 阅读有关 Mifare 经典的特定块。这是我的代码：

```
public byte[] getCardUID() throws CardException {
    CardTerminals terminals = TerminalFactory.getDefault().terminals();
    terminal = terminals.list().get(0);
    Card card = terminal.connect("*");
    CardChannel channel = card.getBasicChannel();
    CommandAPDU command = new CommandAPDU( new byte[] { (byte) 0xFF, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x04, (byte) 0xD4, (byte) 0x4A, (byte) 0x01, (byte) 0x00 });
    ResponseAPDU response = channel.transmit(command);
    card.disconnect(true);
    if (response.getSW1() == 0x90) {
        byte[] data = response.getData();
        data = Arrays.copyOfRange(data, 0x08, data.length);
        return data;
    }
    return new byte[] {};
} 
```

这个方法（网上找到的示例）成功读取了卡的UID，但是当我尝试构建自己的命令时，总是出现错误SW1 = 63。

在这个网站 (http://www.acs.com.hk/drivers/eng/API_ACR122U_v2.00.pdf) 我找到了一些关于 APDU 的信息，但没有任何效果，我不知道为什么。我尝试了以下命令但没有成功（总是错误 63）：FF B0 00 04 10（B0 - 读取二进制块，04 - 扇区数，10 - 读取 16 个字节）。我也试过只读取一个字节，读取值块（INS B1）但也没有成功。

FF 00 00 00 ...（来自我的示例）应该是直接传输，但我不知道遵循读取块的说明。

谁能帮我？非常感谢。（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-31T15:54:34.610

在 Mifare Classic 1K 标签中有 16 个扇区，每个扇区包含 4 个块，每个块包含 16 个字节。从页面读取或写入之前您必须使用密钥 A 或密钥 B 验证扇区。验证完成后，您可以读取或写入。这是使用该密钥作为密钥 A (60) 来验证扇区 0 的身份验证命令：

```
FF 86 0000 05 01 0000 60 00 
```

或者使用该密钥作为密钥 B(61) 验证扇区 0：

```
FF 86 0000 05 01 0000 61 00 
```

或者使用这个命令你也可以验证扇区 0

```
byte[] authenticationByte = new byte[10];
authenticationByte = new byte[] { (byte) 0xFF, (byte) 0x86, (byte) 0x00,
 (byte) 0x00, (byte) 0x05, (byte) 0x00,(byte) 0x00, (byte) 0x04, 
                                    (byte) 0x60,(byte) 0x00 }; 
```

当身份验证成功时，您将获得 90 00。那是成功消息。否则响应为 63 00 ，表示身份验证失败。身份验证完成后，您可以读取块 (0,1,2,3)，因为扇区 0 包含 4 个块，它们是块 (0,1,2,3)。

使用此命令您可以从扇区 0 块 1 读取数据

```
byte[] readFromPage = new byte[10];
readFromPage = new byte[] { (byte) 0xFF, (byte) 0x00, (byte) 0x00,
 (byte) 0x00, (byte) 0x05, (byte) 0xD4, (byte) 0x40,
 (byte) 0x00, (byte) 0x30, (byte) 0x01 }; 
```

这里最后一个（字节）0x01 是您要读取的块。 [在这个答案中](https://stackoverflow.com/a/26052363/3073945)，您可以找到完整的代码。只需使用此替换字节值。谢谢。

# jquery - 通过单击按钮从 jQuery 的 data-dom-cache 清除缓存

> ID：12011727
> 
> 赞同：1
> 
> 时间：2012-08-17T19:04:07.860
> 
> 标签：jquery, asp.net-mvc

我有一个搜索页面，页面中有数据域缓存。因此，如果用户碰巧返回搜索页面，他/她的结果将被保存。但是，用户在完成整个过程后，可以选择按下“重新搜索”按钮重新开始。这次页面需要重置到默认阶段并且没有保存的结果。

有什么办法可以在 jQuery 中做到这一点？我也在使用 MVC 4 RC，所以如果有任何方法可以在控制器中修复它，我会很高兴听到它。我尝试使用

```
HttpResponse.RemoveOutputCacheItem("/Views/Booking/Index.cshtml"); 
```

但我无法让它工作。谢谢你的帮助。

# ruby-on-rails - Rails MVC：组合来自两个模型的数据

> ID：12011729
> 
> 赞同：1
> 
> 时间：2012-08-17T19:04:13.810
> 
> 标签：ruby-on-rails, model-view-controller

我正在查看有关“汽车”和“卡车”的统计数据。我有一个模型用于整理原始数据并以通用格式返回。

然后在视图中，我有一个“车辆”图表，它整合了来自两个来源的数据。

这种集成应该在我的应用程序的哪个位置进行？

*   在车辆控制器中？
*   在某种不受数据库表支持的只读车辆模型中？
*   在库中？
*   ...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:21:15.977

您可以通过几种不同的方式执行此操作。您可以拥有一个`Vehicle`汽车和卡车继承自的类`Cars << Vehicle` `Trucks << Vehicle`

您只能有一个 Vehicle 表，并有一个`VehicleType`包含不同类型的汽车和卡车的列

您可以在控制器/视图中执行此操作，如果数据格式相同，则在控制器中您可以将所有汽车和卡车放入一个`@vehicle`传递给视图的变量中。

如果汽车和卡车本质上是相同的，我会在同一个表中使用 VehicleType 列。如果您需要它们具有相同的方法，但这些方法的实现方式不同，我将使用 Vehicle 基类并让汽车和卡车继承自该基类。

# c++ - 为什么这种链接方法不起作用？

> ID：12011730
> 
> 赞同：5
> 
> 时间：2012-08-17T19:04:15.310
> 
> 标签：c++

这是一个简单的计数器。默认情况下，调用该方法`add`以将私有变量`count`增加 1。我`Counter`从函数中返回类，以便它可以被链接，但是当我查看输出时，它给了我 1，而我期望它是 3，因为我调用`add`了 3 次。

```
#include <iostream>
#include <vector>

using std::cout;

class Counter {
    public:
        Counter() : count(0) {}

        Counter add() {
            ++count; return *this;
        }

        int getCount() {
            return count;
        }
    private:
        int count;
};

int main() {

    Counter counter;

    counter.add().add().add();

    cout << counter.getCount();

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T19:05:44.597

链接习语的整个想法是基于在每个链接调用中访问*相同*的*原始对象。*这通常通过从每个修改方法返回对原始对象的*引用来实现。*这就是你`add`应该被宣布的方式

```
 Counter &add() { // <- note the `&`
        ++count; return *this;
    } 
```

这样，`add`链式表达式中的每个应用程序都会修改*相同*的*原始*对象。

在您的原始代码中，*您*从`add`. 因此，`add`（在第一个之后）的每个附加应用程序都对临时副本起作用，修改该副本并生成另一个临时副本。所有这些临时副本在完整表达结束时消失得无影无踪。`add`出于这个原因，除了第一个电话之外，您永远不会看到任何电话的效果。

# java - 为什么 Hibernate TableSequence 会递减？

> ID：12011736
> 
> 赞同：0
> 
> 时间：2012-08-17T19:04:39.787
> 
> 标签：java, hibernate

我有以下内容：

```
@Entity
@Table(name = "FooTbl")
public Foo{

  @Id
  @TableGenerator(name="TABLE_GEN", table="MY_SEQUENCE_TABLE", pkColumnName="SEQ_NAME", 
        valueColumnName="SEQ_COUNT", 
        pkColumnValue="MY_SEQ", 
        allocationSize=100000, 
        initialValue=100)
  @GeneratedValue(strategy=GenerationType.TABLE, generator="TABLE_GEN")
  @Column(name = "PK")
  private Long pk;
} 
```

每当我存储这些对象的无状态集合时，它们就会被插入到表中，但是每个对象的主键都比之前插入的主键低。如果我有足够的数量，我将开始在数据库的 pk 列中看到负数。

如果我删除了 allocationSize 属性，一切正常（默认为 50）。但是，由于要存储的对象数量，我需要一个很高的数字。

理想情况下，最好将其视为 Hibernate 中的内置功能，您可以将 allocationSize 传递给现有的生成器。我想没有人知道我没有遇到过的一个吗？

我不能使用序列，必须使用 TableGenerator。有没有人有解决方法？

更新：

我也尝试过以下非 JPA 用法。

```
 @Id
  @GenericGenerator(name = "TABLE_GEN", strategy = 
  "org.hibernate.id.enhanced.TableGenerator",
  parameters = {
      @Parameter(name = "TABLE_PARAM", value = "MY_SEQUENCE_TABLE"),
      @Parameter(name = "VALUE_COLUMN_PARAM", value = "SEQ_COUNT"),
      @Parameter(name = "SEGMENT_COLUMN_PARAM", value = "SEQ_NAME"),
      @Parameter(name = "SEGMENT_VALUE_PARAM", value = "MY_SEQ"),
      @Parameter(name = "INITIAL_PARAM", value = "100"),
      @Parameter(name = "INCREMENT_PARAM", value = "100000")
  })
  @Column(name = "PK")
  private Long pk; 
```

如果我添加以下行，我会得到一个不同的错误，因为它正在寻找默认的休眠表。

```
 @GeneratedValue(generator="TABLE_GEN") 
```

添加该行时的错误是：

```
 Hibernate: select tbl.next_val from hibernate_sequences tbl where tbl.sequence_name=? for update
 ERROR org.hibernate.id.enhanced.TableGenerator  - HHH000351: Could not read or init a hi value
 java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist 
```

hibernate 配置文件当前有以下设置：

```
 <prop key="hibernate.jdbc.batch_size">250</prop>
            <prop key="hibernate.order_inserts">true</prop>
            <prop key="hibernate.order_updates">true</prop>
            <prop key="hibernate.cache.use_query_cache">false</prop>
            <prop key="hibernate.cache.use_second_level_cache">false</prop>
            <prop key="hibernate.jdbc.batch_versioned_data">true</prop>
            <prop key="hibernate.connection.autocommit">true</prop>
            <prop key="hibernate.id.new_generator_mappings">true</prop>
            <prop key="hibernate.jdbc.use_get_generated_keys">true</prop> 
```

最终更新：

似乎设置的休眠属性是导致不稳定问题的原因。当我注释掉 hibernate.jdbc.batch_versioned_data、hibernate.id.new_generator_mappings 和 hibernate.jdbc.use_get_generated_keys 条目时，看起来它们正在工作（使用原始的 JPA TableGenerator 代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:05:47.957

这听起来真的很奇怪。[根据代码](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/id/enhanced/TableGenerator.java#L305)，如果您将增量设置为高于 1 的值，则会获得不同的优化器。我会尝试覆盖 @TableGenerator 注释上的“优化器”选项，将其设置为 NoopOptimizer 。它应该将行为“重置”为与优化器设置为 1 相同的行为，但增量本身除外。如果这可行，我会尝试联系开发人员，以了解这是否是一个错误。

注意：您没有指定您使用的是哪个版本的 Hibernate，因此，我在 Hibernate 的 github 上查看了最新的代码。

# cordova - Cordova FileTransfer.upload() 在 iOS 上失败

> ID：12011738
> 
> 赞同：0
> 
> 时间：2012-08-17T19:04:54.160
> 
> 标签：cordova, https, upload, file-transfer

我正在尝试[`FileTransfer.upload()`](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#FileTransfer)使用 Cordova 1.8.1 测试具有自签名证书的测试服务器

以下代码在 Android 上运行良好，但在 iOS 上运行不正常。

```
var debug = true;
var uploadurl = "https://my.host.com/upload/file/here";
ft.upload(nImageURI, uploadurl, win2, fail, options, debug); 
```

`debug=true`上传方法中的一个未记录的[调试功能](https://groups.google.com/d/msg/phonegap/AdH6A21nRV8/W3I42mfV9qkJ)。

我仅在 iOS 上收到以下错误。安卓运行良好。

```
FileTransferError {
code = 3;
"http_status" = 0;
source = "https://my.host.com/upload/file/here";
target = "file:///var/mobile/Applications/1124016F-4FEE-400E-9AF1-2E2195EED1AF/myApp.app/www/index.html";
}
File Transfer Error: The certificate for this server is invalid. You might be connecting to a server that is pretending to be ‚Äúhttps://my.host.com/upload/file/hereÄù which could put your confidential information 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:45:51.020

也许您需要将白名单添加到 phonegap.plist (cordova.plist)。按照[此链接](http://docs.phonegap.com/en/2.0.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)中的说明进行操作。

# firefox-addon - 'cfx' 未被识别为内部或外部命令

> ID：12011743
> 
> 赞同：3
> 
> 时间：2012-08-17T19:05:37.993
> 
> 标签：firefox-addon, firefox-addon-sdk

我实际上是在使用 Add-on Builder 开发一个插件，但现在我想更改为 SDK，因为有更多的可能性。
我已经像这样安装了 sdk 和 Python：C:\Users\bla\Add-ons\addon-sdk-1.8.1
（在 addon-sdk-1.8.1 内我添加了 tar Python-2.6.8）
现在在我输入的cmd：

```
cd C:\Users\bla\Add-ons\addon-sdk-1.8.1  
mkdir my-addon  
cd my-addon  
cfx init 
```

效果很好-> my-addon 文件夹已创建，其中包含整个目录。
然后我删除了文件夹 my-addon 并再次尝试了相同的命令并得到：

```
'cfx' is not recognized as internal or external command, 
operable program or batch file. 
```

`mddir my-addon`创建文件夹 my-addon。但是`cfx init`产生了错误。

这是我第一次使用 cmd 命令，我不知道我现在要做什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T21:40:49.043

需要先激活sdk的环境，请看安装文档：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/installation.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/installation.html)

本质上，您需要运行命令

垃圾箱/激活

...来自 SDK 的根目录。如果您想让环境在您的 shell 中始终可用，上述链接上还有其他文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T14:47:31.300

windows用户运行：

> 源箱/激活

它应该在欢迎信息的末尾添加 (addon-sdk-1.XX)。

# algorithm - 有没有办法区分自动电子邮件 ID 和真实电子邮件 ID

> ID：12011747
> 
> 赞同：1
> 
> 时间：2012-08-17T19:05:56.170
> 
> 标签：algorithm, parsing, email

你应该知道我不是在谈论垃圾邮件。我也明白这不是一个容易解决的问题。

**我的目标：**我正在编写简单的算法来对给我发邮件的用户进行排名。可能我可以根据他们给我发邮件的频率来打分，无论我是否回复他们的邮件。很快..

但我对 Facebook 通知、退订、邮递员、谷歌警报等自动化系统有疑问，他们经常给我发电子邮件。而且我不想将他们视为朋友，也不想给他们排名。

**问题：**有什么方法可以根据某些标准标头参数判断电子邮件是否来自自动 emailid，或者查找流行的关键字（这不是完整的证据，我理解）

编辑：考虑到我无法访问已发送的电子邮件..

建议请...

# php - 将数组转换为 JSON - PHP

> ID：12011748
> 
> 赞同：0
> 
> 时间：2012-08-17T19:05:58.980
> 
> 标签：php, arrays, json

我将从这样的数据库中获取结果。

```
 array(
         [0] => array( 
                       [type]   => orange,
                       [number] => 10,
                       [size]   => 10c,
                       [weight] => 1l
                     ) 
         [1] => array( 
                       [type]   => mango,
                       [number] => 10,
                       [size]   => 10c,
                       [weight] => 1l
                     ) 
         [1] => array( 
                       [type]   => apple,
                       [number] => 10,
                       [size]   => 10c,
                       [weight] => 1l
                     ) 
         [3] => array( 
                       [type]   => mango,
                       [number] => 10,
                       [size]   => 10c,
                       [weight] => 1l
                     ) 

     ) 
```

基本上，我需要将其转换为以下 JSON 格式：

```
 "mango" : [{ 
                       "number" : "10",
                       "size"   : "10c",
                       "weight" : "1l"
                     },
                     { 
                       "number" : "12",
                       "size"   : "14c",
                       "weight" : "12"
                     }
                   ],
         "orange" : [{ 
                       "number" : "12",
                       "size"   : "10c",
                       "weight" : "1l"
                     },
                     { 
                       "number" : "12",
                       "size"   : "14c",
                       "weight" : "11"
                     }
                   ],
         "apple" : [{ 
                       "number" : "10",
                       "size"   : "10c",
                       "weight" : "1l"
                     },
                     { 
                   ] 
```

忽略数量、大小和重量。这些只是随机数。但是数组中的第一个元素包含 JSON 标记。这应该从数组中删除，但作为 JSON 中对象数组的标记（您可以看到）。

我知道我们可以使用循环、条件等进行编写。是否有一种智能且快速的方法可以使用现有的内置 php 函数来执行此操作，而循环和条件更少？

我想，这些是步骤：

1.  根据类型过滤数组的个性。大概，3次来这里得到3个水果。哪个功能在这里有帮助？根据值过滤。或者理想的键值对。
2.  你得到 3 个数组，每个数组对应一种水果。分别弹出所有数组中的类型元素。
3.  循环遍历类型，并将数组放入每种类型中，以类型值作为索引。

还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T19:13:24.110

像这样将旧数组重组为新数组：

```
$new = array();
foreach($old as $vec){
    $new[$vec['type']] = array(
        'number' => $vec['number'],
        'size' => $vec['size'],
        'weight' => $vec['weight']      
    );
}
echo json_encode($new); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:11:43.387

首先根据需要更改数组结构，然后使用[json_encode()](http://php.net/json_encode)。

# ruby-on-rails - Rails - 如何自定义 URL 而不是显示 SEO 的 ID

> ID：12011750
> 
> 赞同：2
> 
> 时间：2012-08-17T19:06:10.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3, seo, search-engine

我正在使用带有文章资源的 Rails 应用程序。目前，这些页面由谷歌索引，例如[http://domain.com/article/id](http://domain.com/article/id)。但我知道这对于 SEO 目的来说不是很有描述性，我想知道我是否可以在其中包含文章的标题。

我不确定格式。我可以像[http://domain.com/article/id/title-of-article](http://domain.com/article/id/title-of-article)那样做吗？不确定执行此操作的标准方法。任何想法都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:08:48.100

你可以使用[Friendly ID](https://github.com/norman/friendly_id)，教程在[这里](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)。非常简单而且非常好的东西。

它允许您在 url 中使用名称或标题而不是 id。

# iphone - 离开视图后保留/保留变量

> ID：12011751
> 
> 赞同：2
> 
> 时间：2012-08-17T19:06:18.060
> 
> 标签：iphone, objective-c, xcode, variables, retain

每当我离开视图时，我都很难保持/保留我当前的变量。因为我在 Xcode 4.3 上构建应用程序，所以 ARC 程序就位，我无法保留我的变量（并且关闭 ARC 导致的问题多于其价值）。即使在您离开视图后，有人知道如何保留变量吗？

知道我要保留的变量是对象变量可能会有所帮助。

编辑：这是我的代码。

```
@synthesize dataController = _dataController;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:UITableViewStyleGrouped];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

 //   self.navigationItem.leftBarButtonItem = self.editButtonItem;

    SoundDataController *aDataController = [[SoundDataController alloc] init];
    self.dataController = aDataController;

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)addSoundViewControllerDidCancel:(AddSoundViewController *)controller {
    [self dismissViewControllerAnimated:YES completion:NULL];
}

- (void)addSoundViewControllerDidFinish:(AddSoundViewController *)controller name:(NSString *)name image:(UIImage *)image {
    if ([name length]) {
        [self.dataController addSoundWithName:name image:image];
        [[self tableView] reloadData];
    }
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [self.dataController countOfList];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"SoundCell";

    UITableViewCell *cell = [tableView
                             dequeueReusableCellWithIdentifier:CellIdentifier];
    Sound *soundAtIndex = [self.dataController
                           objectInListAtIndex:indexPath.row];
    [[cell textLabel] setText:soundAtIndex.name];

    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

-(IBAction)toggleEditingMode:(id)sender
{
    // If we are currently in editing mode...
    if ([self isEditing]) {
        // Change text of button to inform user of state
        [sender setTitle:@"Edit" forState:UIControlStateNormal];
        // Turn off editing mode
        [self setEditing:NO animated:YES];
    } else {
        // Change text of button to inform user of state
        [sender setTitle:@"Done" forState:UIControlStateNormal];
        // Enter editing mode
        [self setEditing:YES animated:YES];
    } 
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    // If the table view is asking to commit a delete command...
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        Sound *soundAtIndex = [self.dataController objectInListAtIndex:indexPath.row];
        [self.dataController removeSound:soundAtIndex];

        // We also remove that row from the table view with an animation
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:UITableViewRowAnimationFade];
    }
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        //       [[self.dataController] in
    }

}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ShowSoundDetails"]) {
        SoundDetailViewController *detailViewController = [segue
                                                           destinationViewController];
        detailViewController.sound = [self.dataController
                                      objectInListAtIndex:[self.tableView indexPathForSelectedRow].row];
    }
    else if ([[segue identifier] isEqualToString:@"ShowAddSoundView"]) {
        AddSoundViewController *addController =
        (AddSoundViewController *)[[[segue destinationViewController]
                                    viewControllers] objectAtIndex:0];
        addController.delegate = self;
    }
    //  [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:17:26.867

无论您尝试做什么，答案都不是在被忽略的视图中保留变量。

您应该将这些变量传递回您需要它们的位置。

您可以使用委托模式来做到这一点。

[https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)

或者只是在即将被关闭的视图控制器上引用另一个视图控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T20:13:20.487

另一种适用于某些情况的方法：将变量存储在其他地方——也许你的变量是游戏状态的一个组成部分，或者它属于一个模型。该变量可能不属于视图中的值，而是属于模型或游戏的状态——将其存储在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:15:33.563

如果您通过 segue 离开视图，则可以将要保留的变量传递给destinationViewController。您还可以实现一个委托，该委托传递您从 viewWillDisappear 调用的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T19:15:20.087

您需要在当前视图中包含指向该变量/属性的强指针。

# perl - perl 进程文件句柄

> ID：12011753
> 
> 赞同：2
> 
> 时间：2012-08-17T19:06:56.010
> 
> 标签：perl, process, filehandle

我正在尝试学习如何使用文件句柄从进程中读取。我试图编写一个程序，从“日期”命令打开一个文件句柄，并使用以下程序按要求引用它：

```
 #!/usr/bin/perl
 use warnings;
 use diagnostics;
 use strict;

 open DATE, 'date|' or die "Cannot pipe from date: $!";
 my $now;

 while (1) {
  print "Press any key: ";
  chomp( my $result=<STDIN> );

  $now = <DATE>;

  print "\$now is: $now\n";

 } 
```

这工作一次，或最初工作，但随后通过 while (1) 进行“循环”，第二次我收到关于“$ now 的未初始化值”的错误。更奇怪的是，错误在第二次循环后消失了，但来自“日期”的数据从未填充到 $now 变量中。

我认为这可能表明文件句柄在第一次运行后被关闭，但我不知道是否是这种情况。我刚刚学习 perl，我确信这很容易，而且我对这门语言没有足够的经验。

任何人都可以在这方面为我提供指导吗？我不应该期望 DATE 文件句柄在初始运行循环后保持打开状态吗？

这是此时程序的输出：

```
 $ perl ./test.perl
 Press any key:
 $now is: Fri Aug 17 15:00:27 EDT 2012

 Press any key:
 Use of uninitialized value $now in concatenation (.) or string at ./test.perl
         line 16, <DATE> line 1 (#1)
     (W uninitialized) An undefined value was used as if it were already
     defined.  It was interpreted as a "" or a 0, but maybe it was a mistake.
     To suppress this warning assign a defined value to your variables.

     To help you figure out what was undefined, perl will try to tell you the
     name of the variable (if any) that was undefined. In some cases it cannot
     do this, so it also tells you what operation you used the undefined value
     in.  Note, however, that perl optimizes your program and the operation
     displayed in the warning may not necessarily appear literally in your
     program.  For example, "that $foo" is usually optimized into "that "
     . $foo, and the warning will refer to the concatenation (.) operator,
     even though there is no . in your program.

 $now is:
 Press any key:
 $now is:
 Press any key:
 $now is:
 Press any key:
 $now is:
 Press any key: ^C 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T19:15:11.303

你是对的，`date`只产生一个输出，一旦你读到它，缓冲区中就没有任何东西了。你可以这样做：

```
while (1) {
  # ...
  open DATE, 'date|' or die "Cannot pipe from date: $!";
  $now = <DATE>;
  close DATE;
  # ...
  print "\$now is: $now\n";

} 
```

另一种方法是使用背部抽动：

```
while (1) {
  print "Press any key: ";
  chomp( my $result=<STDIN> );
  print "now is: ".`date`."\n";
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:19:57.857

您的程序按说明工作。date 命令返回单行，您正在尝试读取*pass the end of file*。

*正确*的方法是：

```
#! /usr/bin/env perl
use warnings;
use diagnostics;
use strict;
use autodie;
use feature qw(say);

open my $date, "|-", "date";

while (my $now = <$date>) {
   print "Press any key: ";
   chomp( my $result=<STDIN> );

   say "\$now is: $now";
} 
```

程序将执行一个循环。

一些东西：

*   `use feature qw(say);`允许您使用`say`类似的命令，`print`除非您不必一直放在`\n`最后。
*   `use autodie;`自动允许`open`语句终止而无需对其进行测试。如果你`open`无论如何都要死，为什么不让 Perl 为你做这件事。
*   三参数`open`命令更可取。并且，还可以将标量用于文件句柄。

你可能想要的是这样的：

```
#! /usr/bin/env perl
use warnings;
use diagnostics;
use strict;
use autodie;
use feature qw(say);

for(;;) {
    print "Press Return to continue...";
    <STDIN>;
    chomp ( my $date = qx(date) );
    say qq(\$date = "$date");
} 
```

*   `qx(...)`表示*引号执行*优于反引号。
*   这`qq(...)`是双引号字符串的另一种方法。这允许您使用引号而不用反斜杠引用它们。

# php - PHP / CentOS - 无法打开流：打开的文件太多

> ID：12011755
> 
> 赞同：0
> 
> 时间：2012-08-17T19:06:58.253
> 
> 标签：php, apache, filesystems, centos

不清楚这是 PHP/Apache 问题还是文件系统问题。我正在编写一个脚本来检查我们的 LDAP 服务器的引用完整性，因此我正在提取大量数据。我正在使用 PHP 5.3.8、Apache 2.2.3 和 CentOS 5.7（我认为这是正确的版本）

当我运行脚本时，我收到一个 PHP 警告，上面写着：

> 警告：include（“fileName”）：无法打开流：第 50 行的“fileName”中打开的文件太多警告：include()：无法打开“fileName”以包含（include_path='.:/usr/local /zend/share/ZendFramework/library:/usr/local/zend/share/pear') 在第 50 行的“文件名”中

我已经删减了很多代码以包含更少的文件，但这似乎并没有什么不同。我认为这可能是因为我提取了多少数据（可能是由于抖动）所以我限制了它并输出了 7.5 MB 的峰值内存使用量（在我限制了返回结果之后），这是一个不错的块但不是足以杀死脚本。

在这一切中，我搜索了这个问题，发现它可能是由文件系统打开文件限制引起的，该限制可以通过一个名为 ulimit 的命令进行更改。默认值为 1024。我为所有用户将我的设置为 40000。仍然没有帮助。剥离后，我的 PHP 脚本总共使用了 11 个文件。我只是不明白为什么会这样。

有任何想法吗？

提前致谢，

约旦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:29:22.970

您是否修改了该用户的软限制和硬限制？此外，如果这是在用户说“apache_user”下运行的 Apache 进程，您将需要停止 Apache，注销，重新登录（确保软/硬限制都到位）并启动 Apache 进程。

# android - AndEngine 背景显示为三角形

> ID：12011756
> 
> 赞同：3
> 
> 时间：2012-08-17T19:07:14.680
> 
> 标签：android, andengine

我是 AndEngine 的新手，我正在尝试按照[本教程](http://www.raywenderlich.com/12065/how-to-create-a-simple-android-game)实现 hanoi 游戏。将背景图像插入 gfx 文件夹并设置所有 onCreateResources 代码和 onCreateScene 代码后，我尝试运行该应用程序，我所看到的只是一个代表我的背景图像的三角形，正如您在[这张图片](http://i50.tinypic.com/1gji14.png)中看到的那样。

![在此处输入图像描述](../Images/b5ccace763b4ff782648251bf8bfb7e4.png)

这是我的代码：

```
 final int CAMERA_WIDTH = 480;
    final int CAMERA_HEIGHT = 800;

    public EngineOptions onCreateEngineOptions() {
        myCamera = new Camera(800, 480, CAMERA_WIDTH, CAMERA_HEIGHT);

        return new EngineOptions(false, ScreenOrientation.PORTRAIT_SENSOR,
                new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT),
                myCamera);
    }
    public ITextureRegion texture;

    public void onCreateResources(
            OnCreateResourcesCallback pOnCreateResourcesCallback)

        throws Exception {
            try {

                // 1 - Set up bitmap textures
                ITexture backgroundTexture = new BitmapTexture(
                        this.getTextureManager(), new IInputStreamOpener() {
                            public InputStream open() throws IOException {
                                return getAssets().open("gfx/background.png");
                            }
                        });
     // 2 - Load bitmap textures into VRAM
                backgroundTexture.load();
    // 3 - Set up texture regions
                this.mBackgroundTextureRegion = TextureRegionFactory
                        .extractFromTexture(backgroundTexture);

         }

public void onCreateScene(OnCreateSceneCallback pOnCreateSceneCallback)
            throws Exception {

        // 1 - Create new scene
        final Scene scene = new Scene();
        Sprite backgroundSprite = new Sprite(0, 0, this.mBackgroundTextureRegion, getVertexBufferObjectManager());
        scene.attachChild(backgroundSprite);
    } 
```

由于我尝试自己解决此错误，因此我已经尝试过：

1.  设置相机 FillResolutionPolicy()，对结果没有影响。
2.  将背景创建为 BitmapTextureAtlas，BitmapTextureAtlasTextureRegionFactory.createFromAsset
3.  调用 mEngine.getScene().setBackground 而不是 attachChild
4.  使用其他 API 级别重新创建 Android 虚拟设备（尝试 16、15）

此外，AndEngine 论坛中有一个帖子，我在这个帖子[中](http://www.andengine.org/forums/tutorials/need-help-with-sprites-t8812.html)找不到我的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T05:49:42.520

试试这个

```
myCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT); 
```

反而

```
myCamera = new Camera(800, 480, CAMERA_WIDTH, CAMERA_HEIGHT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:17:23.057

对我来说，这看起来像是一些 OpenGL 问题。看看 RenderOptions，你可以通过调用来获得它们，`engineOptions.getRenderOptions();`在那里你可以调整各种渲染选项。

无论如何，你的 Camera 构造函数很奇怪，你想通过它来完成什么？常用参数如driver613所说。此外，您似乎交换了 CAMERA_WIDTH 和 CAMERA_HEIGHT 的值。如果我没记错的话，Android 会处理设备方向，以便宽度真正对应于设备当前方向的宽度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:23:13.620

部分问题可能在这里

```
public void onCreateResources(
        OnCreateResourcesCallback pOnCreateResourcesCallback) 
```

你永远不会调用`pOnCreateResourcesCallback`- 你应该在你的`OnCreateResources`方法结束时这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T06:05:24.250

您的代码中有一些错误

1) 在 `myCamera = new Camera(800, 480, CAMERA_WIDTH, CAMERA_HEIGHT);` 第一个和第二个参数中是针对位置 x 和 y。所以你应该这样做

> myCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

2) 在 CameraOptions 中使用

> new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), myCamera);

3) 要加载您应该使用的 BitmapTexture`BitmapTextureAtlasTextureRegionFactory`

例如。

```
BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");
BitmapTextureAtlas bitmapTextureAtlas = new BitmapTextureAtlas(
        getTextureManager(), width_of_image, height_of_image,
        TextureOptions.BILINEAR //Or any TextureOpion you want.
);
ITextureRegion texture = BitmapTextureAtlasTextureRegionFactory
    .createFromAsset( bitmapTextureAtlas, this, "file_name.png", x_position, y_position);

bitmapTextureAtlas.load(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-16T20:06:05.187

当/如果您的 textureAtlas 太小而无法容纳所有纹理时，也会发生这种情况。检查是否所有纹理都在其中找到了位置。例如，如果您有一排 10 个 10x10 像素的纹理，而您的图集只有 90（或小于 100 像素）宽或小于 10 像素高。如果您有疑问，只需尝试足够大的尺寸，看看会发生什么:)

# html - 单击容器的部分会使页面跳转

> ID：12011759
> 
> 赞同：1
> 
> 时间：2012-08-17T19:07:24.910
> 
> 标签：html, scroll, page-jump

我有一个在左侧有链接的个人资料页面容器，您可以单击以打开已列出的部分。但是，当我单击所述链接时，整个页面会强制滚动（跳转）到该部分内容的顶部，因此会切断页面上它们上方的任何内容并且非常烦人。

不确定是填充还是边距还是什么，我真的不想从头开始。

我有详细信息的主要 HTML：

```
<div align="center">
    <style>
        .container {
            width: 650px; height: 250px;
            overflow: auto; overflow-y: hidden;
            border: 3px double #999999; background: black;
         }
       .section { height: 250px; overflow: auto;}
    </style>
    <table width="700px">
        <tr>
            <td>
                <div style="overflow: auto; width: 200px; height: 250px; border: 3px inset #999999;">
                    <br /><font color="#520000" size="5" face="Times"> Greetings. </font>
                    <br /><br /><a href="#profile"><font face="Courier" size="4">[ Introduction ]</font></a>
                    <br /><a href="#likes"><font face="Courier" size="4">[ Aye ]</font></a>
                    <br /><a href="#loathes"><font face="Courier" size="4">[ Nay ]</font></a>
                    <br /><a href="#media"><font face="Courier" size="4">[ Media ]</font></a>
                    <br /><a href="#music"><font face="Courier" size="4">[ Music ]</font></a>
                </div>
            </td>
            <td>
                <div class="container">
                    <a name="profile"></a>
                    <div class="section" align="right">
                        <br /> About me text here
                        <br />
                    </div> 
```

# database - 搜索数据库对象

> ID：12011764
> 
> 赞同：0
> 
> 时间：2012-08-17T19:07:41.177
> 
> 标签：database, search, object

如何搜索 SQL Server 数据库以查找任何对象名称中的字符串？当测试人员说这个并且那个不起作用并且我无法通过它的名称找到它时，我遇到了一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:19:45.150

如果您正在寻找对象，那么您可以使用：

```
select *
from sys.objects so
where so.name like '%whatever%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:09:39.103

Redgate 提供了一个工具，使您能够做到这一点：[SQL 搜索](http://www.red-gate.com/products/sql-development/sql-search/?utm_source=google&utm_medium=cpc&utm_content=brand_aware&utm_campaign=sqlsearch&gclid=CIfu5Kiu77ECFQY5nAodXGoAGw)。

# java - 根据键类型中字段的相等性从 Java HashMap 中提取条目

> ID：12011771
> 
> 赞同：1
> 
> 时间：2012-08-17T19:07:57.837
> 
> 标签：java, hashmap

我有一个 Java HashMap 类型`<MyType,Double>`。该类`MyType`有两个字段`foo`（String 类型）和`bar`（Double 类型）。equals 和 hashcode 方法仅供`MyType`使用`foo`。现在给定一个`A`类型的对象，`MyType`我需要从 Hashmap 中获取匹配的条目。这意味着什么

```
MyType A = new MyType();
A.foo = "foo";
A.bar = 0.0;

MyType B = new MyType();
B.foo = "foo";
B.bar = 1.0;

Map<MyType,Double> myMap = new HashMap<MyType,Double>();
myMap.put(B,5.0) 
```

我需要根据它与（因为它们的值相同）的相等性（即形式的函数）从中提取键`B`（最终是它的 bar 值）`myMap``A``foo`

```
Double getBar(MyType type,  Map<MyType,Double> map) 
```

这样

```
getBar(A,myMap) returns 1.0 
```

最好的方法是什么？我不太确定这个东西最初是如何设计的，但我正在寻找一种有效的方法来做到这一点，因为`myMap`预计它会非常庞大​​。

更新：这里有一个稍微大一点的上下文。我有一组 MyType 对象（比如 S）。一个外部函数在它上面工作并创建一个名为 myMap 的 HashMap，它计算 Double 类型的数量并将其与集合中的每个对象相关联。它还更新集合中每个对象的 bar 字段。我得到的是myMap。现在我需要更新原始集合 S 中的每个元素，以便将每个元素的 bar 值替换为返回的 myMap 中相应条目的 bar 值。所以对于SI中的每一个A都需要读取myMap中对应的B，得到它的bar，然后设置A的bar和B的bar相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:27:07.587

`Whatever`如果你需要通过它来查找a `Foo`，你*必须*使用a `Map<Foo, Whatever>`。其他任何事情充其量都是试图将不是 a 的东西推`Map`入`Map`.

但关键是，该`Map`界面并非旨在按照您尝试使用它的方式使用。它的目的是仅根据您输入的*键*来查找*值*。您可能可以强制它以这种方式工作，但充其量您最终会得到一个无法维护、笨拙的 hack，这可能比正确地做事情更困难首先。

 *看起来您应该将 a`Map<String, MyTypeAndDouble>`用于一些同时包含 a`MyType`和 a 的自定义类`Double`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:25:01.877

如果您执行`hashCode`and`equals`基于`foo`（这是您指示您正在执行的操作），那么在您的示例中`A`，`B`最终将位于哈希图中的同一个存储桶中。
结果`getBar(A,myMap);`会返回`5.0`，因为那是您在地图中放置的内容 - `B`。
我的意思是您可以搜索`B`using`A`但随后每个都`put`将替换前一个，我不确定您的 OP 中您的实际要求是什么

更新：

```
Double getBar(MyType type,  Map<MyType,Double> map){  
    if(map.containsKey(type)){   
         for(MyType k:map.keySet()){  
              if(k.equals(type)){  
                 return k.bar;  
              }
         }
    }
    return -1.0;
} 
```

**更新 2：**
您似乎需要一种`Map`直接访问您的密钥的方法。您可以使用执行以下操作：
定义：

```
class Holder{  
    MyType type;  
    Double value;  
} 
```

`HashMap<MyType,Holder>`而是拥有。因此，在您进行计算的方法中，您更新地图以将结果添加到`Holder`您还存储`type`. 即代替`myMap.put(B,5.0);`你做：`myMap.put(B,new Holder(B,5.0));`

所以你将拥有：

```
Double getBar(MyType type,  Map<MyType,Holder> map){   
     return map.get(type).type.bar;    
} 
```

您还需要额外的空间来存储`type`地图值的一部分，但是您将摆脱循环以实际找到`type`现在的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:11:58.230

好吧，这并不漂亮，需要遍历 Map ，但它应该让你在你描述的场景中得到 bar 的值。（这假设您的 equals() 方法与您描述的一样，仅查看 foo 的值来确定对象相等性）。

```
public Double getBar(MyType type,  Map<MyType,Double> map) {
  for (MyType entry : map.keySet()) {  
    if (entry.equals(type)) {
      return entry.getBar(); // or whatever your accessor is for bar
    } 
  }
  return null;  // or whatever value you want to return if it doesn't find a key
} 
```*

# php - PHP/MySQL 查询错误

> ID：12011772
> 
> 赞同：0
> 
> 时间：2012-08-17T19:08:26.103
> 
> 标签：php, mysql

我创建了一个名为“store”的 SQL 表。我有 29 个字段。表中很少有字段依赖于表中其他字段的值。一个例子如下：

我有一个名为 sell_rap_back 的字段和另一个名为 rap_back 的字段。rap_back 字段值是独立的并输入到数据库中，但我的 sell_rap_back 依赖于 rap_back 并计算为 rap_back + 5

```
 Given : 'rap_back'
 Calculate : 'sell_rap_back'

 where 
      **sell_rap_back = rap_back+5** 
```

我在 php/mysql 中实现它。实现如下：

```
//calculate the value  
$qry1 = mysql_query("SELECT rap_back + 5 from store") or die(mysql_error());

//retrieve the value of qry1 and store it in a variable
$sell_rap_back = mysql_fetch_array($qry1); 

// now I need to insert the value into the table and update it..
mysql_query("INSERT INTO store(sell_rap_back) VALUES('$sell_rap_back')"); 
```

表在这里没有更新..

现在，我不知道如何处理我的 'sell_rap_back' 字段并将其存储在数据库中，只要 'rap_back' 被更新并且在我的下一个交易发生之前。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:11:09.617

不要使用固定字符串作为“失败”消息。它们对调试毫无用处。如果查询有问题，MySQL 会告诉你出了什么问题：

```
$qry1 = mysql_select("SELECT ...") or die(mysql_error());
                                          ^^^^^^^^^^^^^ 
```

在你尝试这个之前，你的问题是无法回答的。从表面上看，查询看起来不错——没有语法错误，没有保留字。

# ruby-on-rails - 如何访问数据库中的单个属性和数组 - 使用 Ruby on Rails

> ID：12011777
> 
> 赞同：0
> 
> 时间：2012-08-17T19:08:41.513
> 
> 标签：ruby-on-rails, arrays, while-loop

我试图从名为“itemType”的数组中获取“标题”。“itemType”是我的模型“Item”中的一个属性。

*即：**项目{属性：{名称，id，itemType：{标题，图标}}***

我已经能够得到我想要的东西，但仅限于一件物品。我不能以任何方式遍历项目以一次访问整个数据库并获取每个单独项目的标题。Ruby对我大喊：

```
undefined method `[]' for nil:NilClass 
```

到目前为止，我有::

```
<% i = 0 %>
<% len = Item.all.length %>
<% while i < len do %>
    <% items = Item.include_object(:itemType)[i] %>
    <div class="iso_holder">
       <%= item.attributes['itemType']['title']%>
    </div>
    <% i += 1 %>
<% end %> 
```

任何帮助，将不胜感激 ：）

**更新：**

商品型号：

```
class Item < ParseResource::Base
  fields :objectId, :itemType, :user, :createdAt, :updatedAt, :ACL
  validates_presence_of :user

  belongs_to :user
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:28:19.030

您的代码似乎没有使用电源或红宝石

这应该会有所帮助。

```
<% Item.all.each do |item| %>
    <div class="iso_holder">
       <%= item.itemType.title unless item.itemType.nil? %>
    </div>
<% end %> 
```

我可能的猜测是你得到`itemType`了`nil`一些记录

还可以简要了解[ruby​​ 中的循环](http://ruby.about.com/od/rubyfeatures/a/loops.htm)

我个人认为，如果您以与其他语言相同的方式编写代码，则不值得使用 ruby​​ :)

# c# - StreamWriter 和 IFormatProvider

> ID：12011789
> 
> 赞同：19
> 
> 时间：2012-08-17T19:09:25.823
> 
> 标签：c#, filestream, cultureinfo, streamwriter, iformatprovider

如何将 IFormatProvider 传递给 StreamWriter？

具体来说，我想创建一个
`new StreamWriter("myfile.txt", CultureInfo.InvariantCulture);`

TextWriter 和 StringWriter 在构造函数中有一个参数，但 StreamWriter 没有。
属性 stringWriter.FormatProvider 是只读的。

我可以想到三种看似糟糕的解决方案的解决方法：

*   更改 Thread.CurrentCulture：这将在一个库中，所以我宁愿不更改任何全局设置，即使是暂时的。
*   sw.WriteLine(InvariantCulture, , )：有很多 sw.WriteLine() 超过几个函数。我真的很想避免与他们所有人搞混。
*   首先使用 StringWriter 然后将字符串写入文件：由于流可能会变得非常大，这将产生巨大的开销。

有没有办法为 StreamWriter 指定一个 FormatProvider？基于 TextWriter 的继承，如果我可以设置属性，StreamWriter 必须具有处理此问题的方法。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-17T19:16:28.090

由于该`FormatProvider`属性是虚拟的，因此您可以创建自己的子类，该子类采用`IFormatProvider`：

```
public class FormattingStreamWriter : StreamWriter
{
    private readonly IFormatProvider formatProvider;

    public FormattingStreamWriter(string path, IFormatProvider formatProvider)
        : base(path)
    {
        this.formatProvider = formatProvider;
    }
    public override IFormatProvider FormatProvider
    {
        get
        {
            return this.formatProvider;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T19:16:03.953

您可以创建一个继承自 StreamWriter 的新类并覆盖虚拟 FormatProvider 属性。

# regex - 匹配信用卡的 3 或 4 位 cvv 的正则表达式

> ID：12011792
> 
> 赞同：36
> 
> 时间：2012-08-17T19:09:48.147
> 
> 标签：regex

我真的不知道正则表达式，但迟早我会阅读和学习。但现在我需要一个匹配信用卡的 3 或 4 位 cvv 的正则表达式，这样我就可以验证 javascript 和 PHP 中的输入。据我所知，cvv 应该是 3 或 4 位数字。

我在我的 javascript 代码中尝试了这个，但我不确定它是否正确。

```
if (/[0-9]{3}+/.test(value))
return false; 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-08-17T19:10:59.833

要匹配 3 位或 4 位数字，请使用以下正则表达式：

```
/^[0-9]{3,4}$/ 
```

解释：

*   `^`: 字符串锚的开始
*   `[0-9]`: 0 到 9 之间的数字（你也可以`\d`在这里使用）
*   `{3,4}`: 一个量词，意思是 3 到 4 之间。
*   `$`: 字符串锚的结束

# android - Android OS 中的 ImageView 内存分配

> ID：12011796
> 
> 赞同：0
> 
> 时间：2012-08-17T19:09:53.930
> 
> 标签：android, memory-management, android-imageview

您在 ImageView (android) 中加载图像，如何为其分配内存？

分配的内存是一维数组还是二维数组？（也许就像素而言）

哪个是更好的 BufferedImage 或 Bitmap 用于图像处理？

PS - 它不是这个的副本[。](https://stackoverflow.com/questions/8762647/how-does-android-memory-allocation-work-with-imageview)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:46:08.280

An`ImageView`不会为它显示的图像分配内存，图像会这样做。很可能是一个`Bitmap`。并且那些在本机上下文（一些`malloc`）中分配内存，因此 Java 的垃圾收集器无法清理分配的内存，如果您不小心，它会经常失败。

分配的内存是一维内存块，可能逐像素逐行存储（2D 访问是一个简单的计算）。图像未压缩存储，因此 100kb .jpg 文件可能使用数 MB 的数据。每个像素最多占用 4 个字节（_8888 模式下的 R、G、B、A）

的实际实现（分配）`Bitmap`应该在[skia - SkBitmap](https://github.com/android/platform_external_skia/blob/master/src/core/SkBitmap.cpp)的某个地方。

我不知道 a`BufferedImage`是什么，但是关于使用图像的好读物是：

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# vba - 如何在VBA上将变量连接成数组字符串

> ID：12011801
> 
> 赞同：1
> 
> 时间：2012-08-17T19:10:36.200
> 
> 标签：vba, ms-access, syntax, excel, concatenation

我想在这样的数组中使用一个变量

```
path = "C:\test\folder\"

Array("ODBC;DSN=MS Access Database;DBQ=path;") 
```

但我无法将变量正确连接到这个数组中。

你对如何做到这一点有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T19:15:50.470

您可以使用运算符直接将字符串添加`&`到命令中，例如：

```
Array("ODBC;DSN=MS Access Database;DBQ=" & path & ";") 
```

# java - 计算值太大而无法取幂的马尔可夫链概率

> ID：12011803
> 
> 赞同：2
> 
> 时间：2012-08-17T19:10:40.047
> 
> 标签：java, estimation, double-precision, markov-chains, exp

我使用公式 exp(X) 作为马尔可夫链的速率。所以选择一个链接相对于另一个链接的比率是 exp(X1)/exp(X2)。我的问题是有时 X 非常大，所以 exp(X) 会超出 的范围`double`。

或者：给定一个 X[i] 数组，其中一些 X[i] 大到 exp(X[i]) 溢出 的范围`double`，计算每个 i 的 exp(X[i]) / S，其中 S是所有 exp(X[i]) 的总和。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:14:37.647

这个伪代码应该可以工作：

```
Let M = the largest X[i].

For each i:
    Subtract M from X[i].

Let S = the sum of exp(X[i]) for all i.

For each i:
    The probability for this i is exp(X[i]) / S. 
```

如果 M 很大，那么在减法步骤之后，一些 X[i] 将非常小（具有很大的负值），以至于它们的 exp(X[i]) 将以双精度计算为零。但是，这些项目的实际概率非常小，以至于它们的实际概率与零之间没有实际差异，因此 exp(X[i]) 下溢为零是可以的。

除了下溢和舍入误差之外，减法转换后的概率应该相同，因为：

*   exp(xM) = exp(x)/exp(M)。
*   这种除法以相同的方式影响概率的分子和分母，因此比率保持不变。

# asp.net-mvc-3 - 如何为下拉列表使用数据注释？

> ID：12011804
> 
> 赞同：7
> 
> 时间：2012-08-17T19:10:48.213
> 
> 标签：asp.net-mvc-3, user-interface, razor

在 MVC3 中，数据注释可用于加速 UI 开发和验证；IE。

```
 [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "New password")]
    public string NewPassword { get; set; } 
```

但是，如果对于移动应用程序，没有字段标签，只有从数据库填充的下拉列表。我将如何以这种方式定义它？

```
 [Required]
    [DataType(DataType.[SOME LIST TYPE???])]
    [Display(Name = "")]
    public string Continent { get; set; } 
```

最好不要使用这种方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T19:22:09.520

像这样更改您的 ViewModel

```
public class RegisterViewModel
{
   //Other Properties

   [Required]
   [Display(Name = "Continent")]
   public string SelectedContinent { set; get; }
   public IEnumerable<SelectListItem> Continents{ set; get; }

} 
```

并在您的`GET`Action 方法中，设置从您的数据库中获取数据并设置您的 ViewModel 的 Continents Collection 属性

```
public ActionResult DoThatStep()
{
  var vm=new RegisterViewModel();
  //The below code is hardcoded for demo. you may replace with DB data.
  vm.Continents= new[]
  {
    new SelectListItem { Value = "1", Text = "Prodcer A" },
    new SelectListItem { Value = "2", Text = "Prodcer B" },
    new SelectListItem { Value = "3", Text = "Prodcer C" }
  }; 
  return View(vm);
} 
```

并在您的`View`( `DoThatStep.cshtml`) 中使用此

```
@model RegisterViewModel
@using(Html.BeginForm())
{
  @Html.ValidationSummary()

  @Html.DropDownListFor(m => m.SelectedContinent, 
               new SelectList(Model.Continents, "Value", "Text"), "Select")

   <input type="submit" />
} 
```

现在这将使您的 DropDown 必填字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T19:22:13.810

如果要强制选择 DropDown 中的元素，请使用`[Required]`要绑定到的字段上的属性：

```
public class MyViewModel
{
    [Required]
    [Display(Name = "")]
    public string Continent { get; set; }

    public IEnumerable<SelectListItem> Continents { get; set; }
} 
```

在您看来：

```
@Html.DropDownListFor(
    x => x.Continent, 
    Model.Continents, 
    "-- Select a continent --"
)
@Html.ValidationMessageFor(x => x.Continent) 
```

# formatting - 带有限制标签的 iReport 饼图不会格式化其他切片

> ID：12011807
> 
> 赞同：1
> 
> 时间：2012-08-17T19:10:59.033
> 
> 标签：formatting, label, ireport, pie-chart

我正在研究 iReport。我有一个饼图，我限制为 5 个切片。然后我需要格式化结果，所以我创建了一个变量：new java.text.DecimalFormat("#,##0").format($F{Service})。问题是“其他”切片，它是剩余数字的总和。如果我格式化标签，另一个切片不会显示。如果我将此格式公式添加到 ChartDetails/OtherSectionValue/OtherLabelExpression 中，我会得到一个格式化数字，它仅代表总数中的一个数字 - 而不是总数。如果我不格式化标签，所有数字都会显示。有没有办法我可以获得格式但仍然允许其他切片正确添加。

谢谢你的帮助。

雪莉酒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:00:31.540

我能够弄明白，我当然让它变得更加困难，这是必要的。只需将其转换为整数并在标签格式中使用 ${1}。

# c# - 根据数字对组合框内容进行排序

> ID：12011810
> 
> 赞同：1
> 
> 时间：2012-08-17T19:11:07.957
> 
> 标签：c#

我有一个组合框，我用 1 到 40 的数字填充它，但它显示它们为 1 比 10-19 比 2 比 20-29 等等，即使我试图通过代码插入数据

```
for(int i=0;i<41;i++)
Combobox.Items.Inert(i,(i+1).ToString()) 
```

也尝试了上面的代码而不转换为字符串，但它再次显示相同的结果，我认为它将它们按升序排列，但这不是我想要的请告诉我如何做到这一点，以便它按 1-40 的顺序显示数字谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:17:52.843

我相信[这个问题就是你要找的](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/cefb6bb1-0fb5-44e7-b9d6-2add9beac11d)。您将不得不自己进行排序并关闭似乎的自定义。

从文章中，这是组合框排序的反射器代码（即私有）：

```
public int Compare(object item1, object item2)  
{  
    if (item1 == null)  
    {  
        if (item2 == null)  
        {  
            return 0;  
        }  
        return -1;  
    }  
    if (item2 == null)  
    {  
        return 1;  
    }  
    string itemText = this.comboBox.GetItemText(item1);  
    string str2 = this.comboBox.GetItemText(item2);  
    return Application.CurrentCulture.CompareInfo.Compare(itemText, str2, CompareOptions.StringSort);  
} 
```

因此，它将所有内容都转换为字符串，因此关闭排序是您的最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:18:39.727

ComboBox 的排序总是[按字母顺序和升序](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.sorted.aspx)进行。

`Sorted`如果你不想要这种行为，那么你可以简单地通过将属性设置为来关闭它`false`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:56:22.387

你总是可以封装它。

```
public class Item : IComparer
{
public Item(int value) { this.Value = value; }

   public int Value { get; set; }

       public int CompareTo(Item item)
  {
                 int ret = -1;
        if (Value < item.Value)
            ret = -1;
        else if (Value > item.Value)
            ret = 1;
        else if (Value == item.Value)
            ret = 0;
        return ret;
      }

} 
```

那么简单...

```
for(int i = 0; i < 40; i++)
  comboBox.Items.Add(new Item(i)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T19:39:40.353

ComboBox always adds and sorts objects you add by their "To String" function.

What you could always do is add an empty string prior to the numbers

```
if(i < 10){ (Combo.Items.Add(i.ToString(StringFormat(" i",i)))); }
else { Combo.Items.Add(i); } 
```

Then when you retrieve it parse it as an integer. (Not as stable as it should be, but a good start).

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-17T19:23:08.443

Try this :

```
for(int i=0;i<41;i++)
Combobox.Items.Add(i); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-17T19:17:36.073

尝试：-

```
for(int i=0;i<40;i++)
combobox.Items.Add((i+1).ToString("D2")); 
```

# jquery - 如果类找到条件

> ID：12011814
> 
> 赞同：0
> 
> 时间：2012-08-17T19:11:18.273
> 
> 标签：jquery

我需要检查输入字段是否没有值，然后我会附加一个通知。但是，如果已经附加了这样的通知但另一个脚本我不需要做任何事情。

我的通知和可以由另一个脚本添加的通知之间的唯一区别是我将在其中添加一个额外的类。

```
// notice set by script
<div class="noticeMessage"></div>

// my Notice format
<div class="noticeMessage myNotice"></div> 
```

那么，我如何检查是否已设置其他通知而不是我的通知？

```
if ($('#myField').val() == '' && $('.noticeMessage').length == 0) {
   // add my notice      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:12:49.767

您可以使用 hasClass()

```
if ( $('element').hasClass('className') ) {
    //do something
} 
```

好吧，如果您想要相反的效果，那么您只需使用！

```
if ( !($('element').hasClass('className')) ) {
    //do something if class does not exist
} 
```

顺便说一句，如果 $(this).val() 为空，则返回 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:14:56.903

尝试使用下面来检查您`.myNotice`是否与`noticeMessage`..

```
$('.noticeMessage.myNotice').length 
```

但我不知道为什么你不能只使用`$('.myNotice').length`

# php - 在此网络爬虫中检测多个 url

> ID：12011816
> 
> 赞同：0
> 
> 时间：2012-08-17T19:11:19.890
> 
> 标签：php, web-crawler

我用 PHP 编写了一个网络爬虫，我给它 eBay 来爬取。它抓取给定网页中的所有链接，但有时可以提供同一链接的多个 url。它在我的数据库中给我压力，我不知道如何调整代码。

```
 <?php

 session_start();

 $domain = "www.ebay.com";

  if(empty($_SESSION['page']))
  {
  $original_file = file_get_contents("http://" . $domain . "/");

 $_SESSION['i'] = 0;

  $connect = mysql_connect("xxxxxx", "xxxxxxxxxx", "xxxxxxxxxxxx");

  if (!$connect)
  {
  die("MySQL could not connect!");
  }

 $DB = mysql_select_db('xxxxxxxxxxxxx');

 if(!$DB)
 {
 die("MySQL could not select Database!");
 }
 }
 if(isset($_SESSION['page']))
 {

 $connect = mysql_connect("xxxxxxxxxxxxx", "xxxxxxxxxxxxx", "xxxxxxxxxxxx");

 if (!$connect)
 { 
 die("MySQL could not connect!");
 }

 $DB = mysql_select_db('xxxxxxxx');

  if(!$DB)
  {
  die("MySQL could not select Database!");
  }
  $PAGE = $_SESSION['page'];
  $original_file = file_get_contents("$PAGE");
   }

  $stripped_file = strip_tags($original_file, "<a>");
  preg_match_all("/<a(?:[^>]*)href=\"([^\"]*)\"(?:[^>]*)>(?:[^<]*)<\/a>/is",   $stripped_file, $matches);

  foreach($matches[1] as $key => $value)
   {

  if(strpos($value,"http://") != 'FALSE' && strpos($value,"https://") != 'FALSE')
  {
  $New_URL = "http://" . $domain . $value;
  }
  else
  {
  $New_URL = $value;
   } 
  $New_URL = addslashes($New_URL);
  $Check = mysql_query("SELECT * FROM pages WHERE url='$New_URL'");
  $Num = mysql_num_rows($Check);

  if($Num == 0)
  {
  mysql_query("INSERT INTO pages (url)
  VALUES ('$New_URL')");

  $_SESSION['i']++;

  echo $_SESSION['i'] . "";
  }
  echo mysql_error();
  }

  $RandQuery = mysql_query("SELECT DISTINCT * FROM pages ORDER BY RAND() LIMIT 0,1");
  $RandReturn = mysql_num_rows($RandQuery);
  while($row1 = mysql_fetch_assoc($RandQuery))
  {
  $_SESSION['page'] = $row1['url'];
  }
  echo $RandReturn;
  echo $_SESSION['page'];
  mysql_close();

   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:23:54.300

首先，您的链接刮刀有一个小问题：

您正在使用，

```
 if(strpos($value,"http://") != 'FALSE' && strpos($value,"https://") != 'FALSE')
            {
                $New_URL = "http://" . $domain . $value;
            }
            else
            {
                $New_URL = $value;
            } 
```

剥离所有标签后。

问题是，如果链接 HREF 是这样的：

```
<a href='#' ...> or <a href='javascript:func()'> or <a href='img...'> etc... 
```

它会为您准备一个您不需要的无效 URL，您应该为这种特殊情况（和其他一些情况）使用 strpos() 或 reg_match() 来转义它们。

您还需要考虑转义链接到文件的 URL，例如：jpg、png、avi、wmv、zip 等...

现在回答你的问题：

您需要首先将目标页面的所有 URL 保存在一个数组中，然后，您需要转储此数组中的所有重复值 - 这将最大限度地减少 SQL 查询将消耗的时间......

使用 www.ebay.com 的快速测试：

```
before cleaning duplicate URL's: 196.
after cleaning: 120. 
```

现在使用：

```
SELECT EXISTS(SELECT 1 FROM table1 WHERE ...) 
```

要检查 URL 是否已经存在于您的数据库中……它更快、更可靠。

通过我的更改观察您的代码：

```
 $stripped_file = strip_tags($original_file, "<a>");
preg_match_all("/<a(?:[^>]*)href=\"([^\"]*)\"(?:[^>]*)>(?:[^<]*)<\/a>/is",  $stripped_file, $matches);
$file_arr = array('#\.jpg$#i', '#\.png$#i', '#\.mpeg$#i', '#\.bmp$#i', '#\.gif$#i', '#\.wmv$#i', '#\.mp3$#i', '#\.avi$#i'); //add files to avoid them.
$avoid = 0; //check if it is a url that links to a file. [0-no, 1-yes]
foreach($matches[1] as $key => $value)
    {
        $value = preg_replace('/\#.*/i', '', $value); //removes pages position.
        if(strpos($value,"http://") != 'FALSE' && 
           strpos($value,"https://") != 'FALSE' && 
           strpos($value,"javascript") != 'FALSE' &&
           strpos($value,"javascript:func") != 'FALSE' &&
           $value != '')
            {
                foreach($file_arr as $val_reg) { preg_match($val_reg, $value, $res); if (isset($res[0])) { $avoid=1;  break 1; }  } //check all the file conditions
                $value = preg_replace('#\/$#i', '', $value) //force '/' at the end of the URL's
                if ($avoid==0) { $New_URL[$key] = "http://" . $domain . $value . "/"; }
            }
            else
            {
             if(strpos($value,"javascript") != 'FALSE' &&
                strpos($value,"javascript:func") != 'FALSE' &&
                $value != '')
                {
                foreach($file_arr as $val_reg) { preg_match($val_reg, $value, $res); if (isset($res[0])) { $avoid=1;  break 1; }  }//check all the file conditions
                $value = preg_replace('#\/$#i', '', $value) //force '/' at the end of the URL's
                if ($avoid==0) { $New_URL[$key] = $value . "/"; }
                }
            }
    }

    //check for duplicate before storing the URL:
    foreach($New_URL as $check)
    {
      $check = mysql_real_escape_string($check);
      $Check_ex = "SELECT EXISTS (SELECT 1 FROM pages WHERE url='$check' LIMIT 1)"; // EXISTS will RETURN 1 if exists ...
        if (@mysql_num_rows(mysql_query($Check_ex))!=1) {
                                                            //Insert your query here......
                                                        } 
                                                        else 
                                                        {
                                                            //Dont store your query......
                                                        }
    } 
```

不是最干净的代码，但它应该可以工作......

# clojure - 在 Clojure 中，Clojure 核心中其他最重要的功能是什么必须掌握才能高效？

> ID：12011821
> 
> 赞同：11
> 
> 时间：2012-08-17T19:11:38.503
> 
> 标签：clojure, functional-programming

除了 map、filter、reduce 之外，clojure 核心中的许多其他功能，还有哪些是我必须学习才能提高生产力的下一组最有用/常用的功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T19:57:21.843

如果您转到[4clojure 问题](http://www.4clojure.com/problems)页面并搜索“核心功能”，您会发现 4clojure 团队认为有用的一堆。仅举几例：

*   通过...分组
*   清楚的
*   减少
*   频率
*   分割
*   合并
*   交错
*   介入

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T20:38:46.500

备忘单很有用：[http](http://clojure.org/cheatsheet) ://clojure.org/cheatsheet ，阅读时间不会很长。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-17T19:59:11.830

序列处理库对我来说是 Clojure Clojurish 的主要组成部分。这个想法是**在单一数据类型上拥有多个函数，而不是在几个类型上拥有几个函数**。所以我想说学习所有的序列操作函数会有很大的好处。

ps: 为`for`, `reductions`, 和`iterate`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-17T19:44:21.030

您的 map、filter 和 reduce 列表涵盖了一些重要内容，因此添加到该列表可能会重复您已经知道的内容。

Clojure 的优势之一是同步。我将开始编写示例代码来学习如何使用这些同步结构、引用、代理和原子。许多 Clo​​jure 书籍都涵盖了它。我知道[Clojure in Action](http://www.manning.com/rathore/)很好地涵盖了这些内容。

我会使用地图，虽然我不是专门指一个函数，而是为什么地图一般以及多方法都很好。

最后，我会解释为什么你有时确实需要使用 loop .. recur。我在过去 1 年多的时间里得到的建议非常中肯。绝对必要时使用它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-18T01:54:48.940

没有一些我会很难生活的东西：

*   `inc`/ `dec`- for 循环、递归、非一修复等。
*   `assoc`- 用于更新地图
*   `comp`- 用于组合高阶函数
*   `partial`- 使用参数子集构建高阶函数
*   `apply`- 用于将参数向量传递给函数
*   `conj`- 用于添加到集合（任何类型）
*   `first`/ `next`- 用于从头端操作序列
*   `seq`- 用于创建序列，或测试空序列`(if (seq x) ...)`

还有一些特殊的形式/宏，它们不是严格意义上的函数，但您也会发现非常重要 - 例如`fn`, `loop/recur`, `cond`, `and/or`, `for`,`doseq`等`let`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-18T05:32:01.200

reduce、cons、first、rest、loop/recur、fn 和 [de structuring] 是我最常用的形式。编辑：哦，分区-天哪，这是一个有用的功能！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-25T15:47:51.843

做

我认为当您第一次使用 Clojure 时，您将一直使用“do”，这样您就可以完成工作，因为它可以让您以命令式的方式进行编程。随着您对 Clojure 的了解增加，您会发现您对“do”的使用减少了

# innerhtml - 文本字段中的 getElementByID.innerhtml

> ID：12011823
> 
> 赞同：-1
> 
> 时间：2012-08-17T19:11:45.290
> 
> 标签：innerhtml, getelementbyid

有人可以告诉我如何将 getelementid.innerHTML 值放入文本字​​段吗？

在这里查看页面：http: [//studiodms.com/qoresneaker/ma.php](http://studiodms.com/qoresneaker/ma.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:13:28.643

通常，您可以设置文本字段 `document.getElementById("yourId").value = newValue` 的值，也可以通过这种方式获取值。

# macos - 替换 mac osx 上正在运行的可执行文件

> ID：12011824
> 
> 赞同：1
> 
> 时间：2012-08-17T19:11:48.923
> 
> 标签：macos, executable

我正在 Mac 上制作应用程序，我希望能够替换正在运行的可执行文件。因此，当可执行文件运行时，我希望能够用更好的版本替换它。据我所知，在 Linux 上你可以这样做，所以下次应用程序启动时它将启动新的可执行文件，但在 Windows 上你不能这样做。

那么关于 Mac 上这件事的任何信息或任何建议如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:43:43.777

假设您正在实施更新功能，请查看[Sparkle](http://sparkle.andymatuschak.org/)框架，
它可以满足您的需求，甚至更多。

如果您只需要替换正在运行的应用程序，请浏览[GitHub 上](https://github.com/andymatuschak/Sparkle)
的 Sparkle 项目以了解它是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:48:37.133

Foundation 框架的`NSFileManager`API 具有类似于 Windows 的专用语义，因此您将很难使用这些函数来执行此操作。但是，您也在 Linux 上使用的 POSIX 文件系统函数没有这些限制，您当然可以替换正在运行的可执行文件。

# asp.net-mvc-3 - 在一个应用程序中拥有多个 EF 模型是否很好

> ID：12011827
> 
> 赞同：0
> 
> 时间：2012-08-17T19:12:22.100
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4.1, asp.net-mvc-3-areas

我们在我们的应用程序中使用 MVC3 和 EF。我们遵循数据库优先的方法。

我们正处于或项目的初始阶段。到目前为止，我们正在考虑在我们的应用程序中使用多个 EF 模型（从 DB 生成）。

就像每个模块一样，我们正在考虑使用相关表生成模型并在该模块中使用该表。

可能在某些模型中，我们可能有一些常见的表格，如参考数据（示例国家列表）。

这样做会对性能产生任何影响吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:22:41.097

Actually it is better to have multiple smaller EF models in an application as opposed to one larger model. You can run into performance problems if the model is very inter connected.

See this article for more information: [http://www.codeproject.com/Articles/38922/Performance-and-the-Entity-Framework](http://www.codeproject.com/Articles/38922/Performance-and-the-Entity-Framework)

# php - 如何在 PhP 中获取浏览器？

> ID：12011829
> 
> 赞同：-7
> 
> 时间：2012-08-17T19:12:32.987
> 
> 标签：php, browser

> **可能重复：**
> [PHP 浏览器检测和重定向](https://stackoverflow.com/questions/2470965/php-browser-detection-and-redirection)

我只需要浏览器名称（IE、Chrome、firefox 等），没有别的（所以用户代理不起作用）。执行此操作的 PhP 代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:14:47.100

使用 get_browser。

[http://php.net/manual/en/function.get-browser.php](http://php.net/manual/en/function.get-browser.php)

# java - 用嵌套的 for 循环填充多维数组

> ID：12011832
> 
> 赞同：1
> 
> 时间：2012-08-17T19:12:48.267
> 
> 标签：java, for-loop, multidimensional-array, control-flow

我有四个数组，每个数组有 3 个（但可以更多）元素。我正在尝试用每个元素的所有可能组合填充一个 4 x aa.length*bb.length*cc.length*dd.length 数组。我试图用嵌套的 for 循环来做到这一点，但我的逻辑是错误的。我不确定最有效的方法是什么。到目前为止，这就是我缺乏咖啡因的大脑想出的。

```
String[] AA={DDDD, HHHH, ZZZZ};
String[] BB={DDDD, HHHH, ZZZZ};
String[] CC={DDDD, HHHH, ZZZZ};
String[] DD={DDDD, HHHH, ZZZZ};

String[][] 2Darray = new String[4][AA.length*BB.length*CC.length*DD.length];

for (int i = 0; i <AA.length; i++){

  for (int j = 0; j < BB.length; j++){

    for (int k = 0; k < CC.length; k++){

      for (int L = 0; L < DD.length; L++){

        2Darray[3][i+j+k+L] = DD[L]; 
        2Darray[2][i+j+k] = CC[k];
        2Darray[1][i+j] = BB[j];
        2Darray[0][i] = AA[i];

      }
    }
  }
} 
```

这个的打印输出看起来像：

```
DDDD DDDD DDDD DDDD
HHHH DDDD DDDD DDDD
ZZZZ DDDD DDDD DDDD
null HHHH DDDD DDDD
null ZZZZ DDDD DDDD
null null HHHH DDDD
null null ZZZZ DDDD
null null null HHHH
null null null ZZZZ
null null null null
null null null null
null null null null
...etc 
```

有什么更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:56:35.317

试试这个

```
 String[] AA = {"DDDD", "HHHH", "ZZZZ"};
    String[] BB = {"DDDD", "HHHH", "ZZZZ"};
    String[] CC = {"DDDD", "HHHH", "ZZZZ"};
    String[] DD = {"DDDD", "HHHH", "ZZZZ"};

    String[][] result = new String[4][AA.length * BB.length * CC.length * DD.length];

    int row = 0;
    for (int i = 0; i < AA.length; i++) {

        for (int j = 0; j < BB.length; j++) {

            for (int k = 0; k < CC.length; k++) {

                for (int L = 0; L < DD.length; L++) {

                    result[3][row] = DD[L];
                    result[2][row] = CC[k];
                    result[1][row] = BB[j];
                    result[0][row] = AA[i];
                    System.out.println(result[0][row] + " " +result[1][row] + " " +result[2][row] + " " +result[3][row]);
                    row++;
                }
            }
        }
    } 
```

并输出

```
DDDD DDDD DDDD DDDD
DDDD DDDD DDDD HHHH
DDDD DDDD DDDD ZZZZ
DDDD DDDD HHHH DDDD
DDDD DDDD HHHH HHHH
DDDD DDDD HHHH ZZZZ
DDDD DDDD ZZZZ DDDD
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:25:18.077

```
public class Demo {
    public static void main(String[] args) {
        String[] AA={"1", "2", "3"};
        String[] BB={"4", "5", "6"};
        String[] CC={"7", "8", "9"};
        String[] DD={"10", "11", "12"};

        String[][] combinations = new String[AA.length*BB.length*CC.length*DD.length][4];

        // STORING INTO 2-DIMENSIONAL ARRAY
        int currentRow = 0;
        for (int i = 0; i <AA.length; i++){
            for (int j = 0; j < BB.length; j++){
                for (int k = 0; k < CC.length; k++){
                    for (int l = 0; l < DD.length; l++){
                        combinations[currentRow][0] = AA[i];
                        combinations[currentRow][1] = BB[j];
                        combinations[currentRow][2] = CC[k];
                        combinations[currentRow][3] = DD[l];
                        currentRow++;
                    }
                }
            }
        }

        // PRINTING THE 2-DIMENSIONAL ARRAY

                for (int i = 0; i < AA.length*BB.length*CC.length*DD.length; i++){
                    System.out.println();
                    for (int j = 0; j < 4; j++){
                        System.out.print(combinations[i][j]+ " ");
                    }
                }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T19:19:20.033

我相信这就是你想要做的。请记住，多维数组元素只是数组（初始化为 null）。此外，您还获得了维度的顺序。

编辑：您还必须将 2Darray 更改为其他内容，因为标识符不能以数字开头。（在这种情况下，我将其更改为 x2Darray）。

```
public class multidim{
    public static void main(String[] args)
    {
        String[] AA={"DDDD", "HHHH", "ZZZZ"};
        String[] BB={"DDDD", "HHHH", "ZZZZ"};
        String[] CC={"DDDD", "HHHH", "ZZZZ"};
        String[] DD={"DDDD", "HHHH", "ZZZZ"};

        String[][] x2Darray = new String[AA.length*BB.length*CC.length*DD.length][4];

        for (int i = 0; i <AA.length; i++){
          for (int j = 0; j < BB.length; j++){
            for (int k = 0; k < CC.length; k++){
              for (int L = 0; L < DD.length; L++){
                String[] temp = {AA[i], BB[j], CC[k], DD[L]};
                x2Darray[((i*BB.length + j)*CC.length + k)*DD.length + L] = temp;
              }
            }
          }
        }

        StringBuilder s = new StringBuilder();
        for(String[] row: x2Darray){
            for(String x: row){ s.append(x); s.append(' '); }
            s.append("\n");             
        }

        System.out.println(s);
    }
} 
```

# c++ - avcodec_open/close 周围的线程锁定

> ID：12011834
> 
> 赞同：5
> 
> 时间：2012-08-17T19:12:50.003
> 
> 标签：c++, opencv, c++-cli

我有一个 c++-cli 代码，它使用捕获从 opencv 中的文件夹捕获视频，然后使用 cvquery 帧检索帧。然后我处理帧，一旦处理完所有帧，我就会释放捕获。它工作正常，但是当我尝试多线程时，它给了我一个警告，并且无法捕获文件夹中的一些视频，并发出警告“avcodec_open/close() 周围的线程锁定不足”。

```
//for each video in folder do
{
    capture=cvCreateFileCapture(filename);

    while(1)
    {
        img=cvqueryframe(capture) 

        if !img break;
        ///process img
    }

    cvreleasecapture(&capture);
} 
```

有没有办法解决多线程问题？我正在考虑使用

```
while(!capture) 
    capture=cvCreateFileCapture(filename); 
```

但应该有更有效的方法，也许使用锁定 Monitor::Enter(obj) 或 lock(obj)？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T07:19:54.907

avcodec 中的`open`and`close`函数不是线程安全的。为了防止多线程应用程序中出现问题，他们有一个简单的机制，可以检测两个线程何时同时在这些函数中，并在发生这种情况时写入“线程锁定不足”消息。

防止此消息的方法是锁定对`cvCreateFileCapture`and的调用`cvreleasecapture`（依次调用`avcodec_open`and `avcodec_close`）以确保这些调用始终是序列化的。例如，如果您有一个名为 Mutex 的互斥类，您可以执行以下操作：

```
extern Mutex m; // application-wide mutex

//for each video in folder do
{
    m.lock();
    capture=cvCreateFileCapture(filename);
    m.unlock();

    while(1)
    {
        img=cvqueryframe(capture) 

        if !img break;
        ///process img
    }

    m.lock();
    cvreleasecapture(&capture);
    m.unlock();
} 
```

有许多 Mutex 实现。在 Linux 或 OS X 上，您可以使用[pthread mutexes](http://www.xgc.com/manuals/xgclib/x5257.html)。在 Windows 上，您可以使用[Win32 mutexes](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686927(v=vs.85).aspx)。

# rally - Rally Apps sdk 1：发布仪表板

> ID：12011836
> 
> 赞同：2
> 
> 时间：2012-08-17T19:13:02.737
> 
> 标签：rally

新手。在 Rally 应用程序目录中有一个发布仪表板报告，我想在 Rally 之外显示。我想将该报告/仪表板与 html 页面中的其他两个标准报告结合起来。即，我想使用 Rally Sdk 创建仪表板类型的报告。可能吗？

如何使用 sdk 创建自己的图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:42:54.257

这个有可能。请联系 Rally 支持以获取对 loginKey 功能的访问权限以启用在外部（在 wiki、sharepoint 门户等中）运行报告。

# postgresql - Debian 挤压反向移植与 PostgreSQL 9.1

> ID：12011837
> 
> 赞同：2
> 
> 时间：2012-08-17T19:13:03.290
> 
> 标签：postgresql, debian

我正在尝试在 Debian 6.0.5 系统上安装 PostgreSQL 9.1，通过 Synpatic、apt-get、dpkg 或任何可以实际工作的方式。我一直在 Backports 存储库中似乎是元数据错误或工具中的错误中遇到障碍。

添加后

```
# Backports for squeeze
deb http://backports.debian.org/debian-backports squeeze-backports main 
```

到 /etc/apt/sources.list 并运行 apt-get update，我可以看到 Synaptic 中的大多数 postgresql-9.1 包，但它不会显示 9.1 中的两个 libpq 包。我分别下载了它们并使用 dpkg -i 安装它们，现在当我尝试通过 Synaptic 或 apt-get 安装任何 9.1 软件包时，我得到：

```
The following packages have unmet dependencies:
 postgresql-client-9.1 : Depends: postgresql-client-common (>= 115~) but 113 is to be installed
E: Broken packages 
```

那么，如果其他包已经依赖于不存在的更新版本，为什么还没有更新 -common 包呢？这太令人困惑了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T10:26:17.757

您没有提供命令行，但鉴于错误消息，缺少该选项是`apt-get`很合理的。`-t`

尝试为 apt-get 添加此选项，以优先考虑来自 backports 版本的软件包：

```
apt-get -t squeeze-backports install postgresql-9.1 
```

如果它不起作用，请使用以下结果更新您的问题

```
 COLUMNS=200 dpkg -l 'postgres*' 'libpq*' 
```

这将有助于了解 9.1 安装何时停止以及是否存在某些软件包的旧版本。

# c# - 使用 C# 在 MySQL 上执行带有参数的存储过程？

> ID：12011838
> 
> 赞同：0
> 
> 时间：2012-08-17T19:13:04.397
> 
> 标签：c#, .net, mysql

我正在使用 VS 2010 Net Framework 3.5 和 MySQL 5.1，使用 C#

基本上我有一些不同类型的参数（int、string、boolean 等），我需要将它们作为输入变量发送到 MySQL 参数。

我的应用程序的最后一层是这样做的：

```
 public Boolean ExecuteProcedure(string ProcedureName, List<SqlParameter> ParameterCollection) {

                Command.CommandType = CommandType.StoredProcedure;
                Command.CommandText = ProcedureName;
                Command.Parameters.AddRange(ParameterCollection.ToArray<SqlParameter>());
                Command.ExecuteNonQuery();
(... etc etc) 
```

所以基本上我需要在以前的图层上将我的所有数据转换为 SQL 参数列表。

我的问题是：

*   这是一个好主意？也许我向 ExecuteProcedure 函数发送了另一种对象？
*   将我的不同类型的变量转换为 SQLParameter 的更好方法是什么？
*   这种编程的使用限制有哪些？

**更新：**

我的问题与层之间的通信有关。例如，上一层可以是...

```
 List<SqlParameter> INParameters = new List<SqlParameter>();
            INParameters.Add(new SqlParameter("error_code",error_code));
            INParameters.Add(new SqlParameter("error_description",error_description));
            SysDB.ExecuteProcedure("sys_log_insert_error", INParameters); 
```

这是一个好方法吗？

谢谢和亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:32:12.267

看到这篇文章你只能指定 in 和 out 但不能输入 [http://www.codeproject.com/Articles/36484/Working-C-code-for-MySql-Stored-Procedures-IN-OUT](http://www.codeproject.com/Articles/36484/Working-C-code-for-MySql-Stored-Procedures-IN-OUT)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:41:44.713

如果您不希望顶层了解有关 SQL 或 SQLParameters 的任何信息，则可以传递更通用的内容，例如`KeyValuePair`( [http://msdn.microsoft.com/en-us/library/5tbh8a42.aspx](http://msdn.microsoft.com/en-us/library/5tbh8a42.aspx) )

我会改成`ExecuteProcedure`这样的>>

`public Boolean ExecuteProcedure(string ProcedureName, params KeyValuePair<String, Object>[] ParameterCollection) { ... }`

您可能还有一些辅助方法，它接收`KeyValuePair`您调用的 s`ExecuteProcedure`以将它们转换为`SQLParameter`您可以在查询中使用的对象。

我认为你说对了..

# jquery - 为什么我必须调用一次警报才能使 javascript 工作？

> ID：12011842
> 
> 赞同：0
> 
> 时间：2012-08-17T19:13:23.687
> 
> 标签：jquery

这个问题真的很奇怪。我想要做的是将复选框值添加到隐藏字段，如果未选中则从隐藏字段中删除该值。我使用javascript来实现这一点，但是，我发现只有我调用一次警报，代码才有效，否则不会。谁能告诉我为什么？

```
var cpo={
    AddCheckList:function(){
    alert('aaaaaaaaaa'); //If I comment this line, the following code won't work.
    $(".BillChecked").change(function() {
            if ($(this).is(':checked')) {
                var idList = $('#CPO_BillList').val() + $(this).attr('value') + ",";
                $('#CPO_BillList').val(idList);
            } else {
                var temp = $('#CPO_BillList').val().replace($(this).attr('value') + ',', '');
                $('#CPO_BillList').val(temp);
            }
            alert($('#CPO_BillList').val());
    });
} 
```

我打电话给 cpo.AddCheckList(); 在页面的底部。

上面是 $(document).ready() 函数。仅在调用一次警报方法时才有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:23:49.520

The alert dialog blocks the execution of the rest of your javascript. One of the following will work:

put the code in

```
$(document).ready(function{
    /*code here*/
}); 
```

or place the script-block at the bottom of your `<body>` tag.

Also you should store `$(".BillChecked")` in a variable because every jQuery-call with a Selector inside is pretty costly.

```
var $billChecked = $(".BillChecked"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:22:02.667

试试这种方式，检查代码并避免循环。

```
$(document).ready(function(){

    var billChecked = $(".BillChecked");
    var cpoBill = $('#CPO_BillList');

    var cpo = {AddCheckList:function(){

        billChecked.change(function(){

            var checked = $(this).is(':checked');
            var billVal = $(this).val();

            checked ? v = cpoBill.val() + billVal : v = cpoBill.val().replace(billVal + ',', '');
            cpoBill.val(v);
        });
    };

}); 
```

# python - xpath没有提取所有字段

> ID：12011847
> 
> 赞同：0
> 
> 时间：2012-08-17T19:13:50.157
> 
> 标签：python, xpath, lxml

我尝试使用以下代码从 html 输出中检索所有数据：

```
proxy_auth = "http://"+proxyUser+":"+proxyPass+"@"+proxyHost
proxy_handler = urllib2.ProxyHandler({"http": proxy_auth})
opener = urllib2.build_opener(proxy_handler)
opener = urllib2.build_opener()
urllib2.install_opener(opener)

request = urllib2.Request("http://"+iserver+"/invoke/pub.art/listRegisteredAdapters")
base64string = base64.encodestring('%s:%s' % (login, password)).replace('\n', '')
request.add_header("Authorization", "Basic %s" % base64string)
response = urllib2.urlopen(request)
html = response.read()

doc = LH.fromstring(html)
tds = (td.text_content() for td in doc.xpath("//td"))

print html

for td, val in zip(*[tds]*2):
    if td == "adapterTypeName" :

        adapterTypeName=val
        print adapterTypeName 
```

这是原始的html输出，

```
<BODY bgcolor=#dddddd>
<TABLE bgcolor=#dddddd border=1>
<TR>
<TD valign="top"><B>registeredAdapterList</B></TD>
<TD>
<TABLE>
<TR>
<TD><TABLE bgcolor=#dddddd border=1>
<TR>
<TD valign="top"><B>adapterTypeName</B></TD>
<TD>SAPAdapter</TD>
</TR>
</TABLE>
</TD>
</TR>
<TR>
<TD><TABLE bgcolor=#dddddd border=1>
<TR>
<TD valign="top"><B>adapterTypeName</B></TD>
<TD>SMSCAdapter</TD>
</TR>
</TABLE>
</TD>
</TR>
<TR>
<TD><TABLE bgcolor=#dddddd border=1>
<TR>
<TD valign="top"><B>adapterTypeName</B></TD>
<TD>PRTServerAdapter</TD>
</TR>
</TABLE>
</TD>
</TR>
<TR>
<TD><TABLE bgcolor=#dddddd border=1>
<TR>
<TD valign="top"><B>adapterTypeName</B></TD>
<TD>com.vf.bdp.BDPAdapter</TD>
</TR>
</TABLE>
</TD>
</TR>
<TR>
<TD><TABLE bgcolor=#dddddd border=1>
<TR>
<TD valign="top"><B>adapterTypeName</B></TD>
<TD>SiebelAdapter</TD>
</TR>
</TABLE>
</TD>
</TR>
<TR>
<TD><TABLE bgcolor=#dddddd border=1>
<TR>
<TD valign="top"><B>adapterTypeName</B></TD>
<TD>JDBCAdapter</TD>
</TR>
</TABLE>
</TD>
</TR>
</TABLE>
</TD>
</TR>
</TABLE>
</BODY> 
```

我期待的是检索以下字段：

```
SAPAdapter
SMSCAdapter
PRTServerAdapter
com.vf.bdp.BDPAdapter
SiebelAdapter
JDBCAdapter 
```

相反，我只收到：

```
SMSCAdapter
com.vf.bdp.BDPAdapter
JDBCAdapter 
```

由于我是 Python 新手，我不知道这里可能有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:59:14.400

您的问题出在 xpath 表达式上，该表达式过于宽松。
它正在寻找您实际上不想找到的元素。
尝试打印结果以查看我在说什么。

在我看来，您想查找所有不包含子元素的 td 元素的文本。
一个简单的方法是：

```
doc = LH.fromstring(html)
for td in doc.xpath('//td[not(*)]/text()'):
    print td 
```

# jquery - 单击一次打开/关闭后，单击事件不会触发

> ID：12011850
> 
> 赞同：0
> 
> 时间：2012-08-17T19:14:00.147
> 
> 标签：jquery, dialog, show-hide

我在使用按钮时遇到问题，单击该按钮会激活弹出菜单。弹出菜单时，如果再次单击该按钮，则弹出菜单消失。但是，如果您重新单击该按钮，则菜单不会显示，直到我单击该按钮之外的某个位置。我认为问题在于单击事件以及将事件绑定到的选择器是“html”。有任何想法吗？

```
GetDropDownButton: function (option, thisId) {
        var menu = $('#' + option);
        // shows the popup
        menu.show();

        setTimeout(function () {
            // idea is to click anywhere to allow popup to close
            $('html').one('click', function () {
                // hides the popup
                menu.hide();
            });
        }, 100);
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:55:27.050

我认为您遇到了 javascript 事件的冒泡效果问题。当你点击一个按钮时，他的点击事件首先被触发，然后是它的父级，一直到 DOM 到文档根目录。我认为您的解决方案可能是应用 jQuery 的 stopPropagation 函数。我在这里设置了一个小例子：http: [//jsfiddle.net/FF73h/](http://jsfiddle.net/FF73h/)

因为它的代码太少了，所以我也将在此处通过它：HTML

```
<div class="popup">
    popup!
</div>
<button class="btn-toggle">on/off</button>​ 
```

JS

```
// make the button show/hide the popup
$('.btn-toggle').click(function(e) {
    $('.popup').toggle(); 
    // prevent the handler for the document to be called as well, wich would hide again
    e.stopPropagation();  
});
// make the popup close when clicked anywhere in the document
$(document).click(function() {
    $('.popup').hide();
});
// optional: prevent the popup from closing when clicked inside it, stops the ducoment event from beeing called
$('.popup').click(function(e) {
    e.stopPropagation();            
}); 
```

我认为代码应该自我解释。如果没有，请随时告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:15:17.367

您是否尝试过使用`body`而不是`html`？

```
 $('body').one('click', function () {
    // hides the popup
    menu.hide();
 }); 
```

# jquery - Jquery 上传图片插件 ex。上传

> ID：12011852
> 
> 赞同：0
> 
> 时间：2012-08-17T19:14:11.287
> 
> 标签：jquery, mysql, uploadify

我一直在尝试查找有关图像上传工具的最近教程，最好使用 Jquery，它允许您使用 Mysql 上传/检索 imgs。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:54:50.247

这个网址可能会对您有所帮助。

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

# javascript - Richfaces 捆绑的 jQuery 包含在 webapp 捆绑的 JavaScript 文件之后

> ID：12011853
> 
> 赞同：0
> 
> 时间：2012-08-17T19:14:19.343
> 
> 标签：javascript, jsf, richfaces, facelets

我最近将我的 Richfaces 库升级到**4.2.2.Final**，我注意到**与 Richfaces 捆绑的 jquery 库现在位于我的自定义脚本下方，使它们无法使用**。

这是生成的html：

```
<head><title lang="fr">Massaï, bronze, 2008 / Jean-Baptiste Martin Sculptures</title>
                <meta name="description" content="Sculpture en bronze d'une femme massai. 2008." lang="fr" />
        <meta name="keywords" content="Jean-Baptiste Martin, sculpture, sculpteur, oeuvre, bronze, portrait, statue, tête, visage, plâtre, moule, moulage, fonte, modèle, modelage, nu" lang="fr" />
        <link rel="icon" type="image/png" href="/images/favicon-32x32.png" />
        <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen" />
        <link rel="stylesheet" href="/css/layout.css" type="text/css" media="screen" />
        <link rel="stylesheet" href="/css/carousel.css" type="text/css" media="screen" />
                <script language="javascript" type="text/javascript" src="/js/jquery.mousewheel.js"></script>
                <script language="javascript" type="text/javascript" src="/js/jcarousellite_1.0.1.js"></script>
                <script language="javascript" type="text/javascript" src="/js/init-sculpture.js"></script>
                <script language="javascript" type="text/javascript" src="/js/jquery.formulaire-inscription.js"></script><script type="text/javascript" src="/javax.faces.resource/jsf.js.jsf?ln=javax.faces"></script><script type="text/javascript" src="/javax.faces.resource/jquery.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/richfaces.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/richfaces-queue.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/richfaces-base-component.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/richfaces-event.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/component-control.js.jsf?ln=org.richfaces"></script><script type="text/javascript" src="/javax.faces.resource/popupPanel.js.jsf?ln=org.richfaces"></script><script type="text/javascript" src="/javax.faces.resource/popupPanelBorders.js.jsf?ln=org.richfaces"></script><script type="text/javascript" src="/javax.faces.resource/popupPanelSizer.js.jsf?ln=org.richfaces"></script><link type="text/css" rel="stylesheet" href="/rfRes/popupPanel.ecss.jsf?db=eAG7mShzEgAFjAIg&amp;ln=org.richfaces" /><script type="text/javascript" src="/javax.faces.resource/status.js.jsf?ln=org.richfaces"></script>
</head> 
```

这是相应的facelets：

```
 <h:head>
        <ui:insert name="title-bar-title" />
        <ui:insert name="meta-description"/>
        <meta name="keywords" content="#{msg['meta.mots.clefs']}" lang="#{view.locale.language}"/>
        <link rel="icon" type="image/png" href="#{facesContext.externalContext.requestContextPath}/images/favicon-32x32.png" />
        <link rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/screen.css" type="text/css" media="screen" />
        <link rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/layout.css" type="text/css" media="screen" />
        <link rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/carousel.css" type="text/css" media="screen" />
        <ui:insert name="javascript"/>
    </h:head> 
```

谁能帮我解决这个问题？

编辑：这是相应的js：

```
 <ui:define name="javascript">
        <script language="javascript" type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery.mousewheel.js"/>
        <script language="javascript" type="text/javascript"  src="#{facesContext.externalContext.requestContextPath}/js/jcarousellite_1.0.1.js"/>
        <script language="javascript" type="text/javascript"  src="#{facesContext.externalContext.requestContextPath}/js/init-sculpture.js"/>
        <script language="javascript" type="text/javascript"  src="#{facesContext.externalContext.requestContextPath}/js/jquery.formulaire-inscription.js"/>
    </ui:define> 
```

编辑：按照建议修改后：

```
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" /><link type="text/css" rel="stylesheet" href="/javax.faces.resource/css/screen.css.jsf" /><link type="text/css" rel="stylesheet" href="/javax.faces.resource/css/layout.css.jsf" /><link type="text/css" rel="stylesheet" href="/javax.faces.resource/css/carousel.css.jsf" /><script type="text/javascript" src="/javax.faces.resource/js/jquery.mousewheel.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/js/jcarousellite_1.0.1.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/js/init-sculpture.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/js/jquery.formulaire-inscription.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/jsf.js.jsf?ln=javax.faces"></script><script type="text/javascript" src="/javax.faces.resource/jquery.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/richfaces.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/richfaces-queue.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/richfaces-base-component.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/richfaces-event.js.jsf"></script><script type="text/javascript" src="/javax.faces.resource/component-control.js.jsf?ln=org.richfaces"></script><script type="text/javascript" src="/javax.faces.resource/popupPanel.js.jsf?ln=org.richfaces"></script><script type="text/javascript" src="/javax.faces.resource/popupPanelBorders.js.jsf?ln=org.richfaces"></script><script type="text/javascript" src="/javax.faces.resource/popupPanelSizer.js.jsf?ln=org.richfaces"></script><link type="text/css" rel="stylesheet" href="/rfRes/popupPanel.ecss.jsf?db=eAG7mShzEgAFjAIg&amp;ln=org.richfaces" /><script type="text/javascript" src="/javax.faces.resource/status.js.jsf?ln=org.richfaces"></script> 
```

编辑：修改后的 facelet：

```
<h:head>
    <ui:insert name="title-bar-title" />
    <ui:insert name="meta-description" />
    <meta name="keywords" content="#{msg['meta.mots.clefs']}" lang="#{view.locale.language}" />
    <link rel="icon" type="image/png" href="#{facesContext.externalContext.requestContextPath}/images/favicon-32x32.png" />
    <h:outputStylesheet name="css/screen.css"/>
    <h:outputStylesheet name="css/layout.css"/>
    <h:outputStylesheet name="css/carousel.css"/>
    <h:outputScript name="js/jquery.mousewheel.js" target="head"/>
    <h:outputScript name="js/jcarousellite_1.0.1.js" target="head"/>
    <h:outputScript name="js/init-sculpture.js" target="head"/>
    <h:outputScript name="js/jquery.formulaire-inscription.js" target="head"/>
</h:head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:24:04.893

You're not using the JSF resource management the right way.

**Remove** the

```
<ui:insert name="javascript"/> 
```

And **replace** the clumsy

```
<ui:define name="javascript">
    <script language="javascript" type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery.mousewheel.js"/>
    <script language="javascript" type="text/javascript"  src="#{facesContext.externalContext.requestContextPath}/js/jcarousellite_1.0.1.js"/>
    <script language="javascript" type="text/javascript"  src="#{facesContext.externalContext.requestContextPath}/js/init-sculpture.js"/>
    <script language="javascript" type="text/javascript"  src="#{facesContext.externalContext.requestContextPath}/js/jquery.formulaire-inscription.js"/>
</ui:define> 
```

by the simpler (just put in template that way so that it end up in `<h:body>`)

```
<h:outputScript name="js/jquery.mousewheel.js" target="head" />
<h:outputScript name="js/jcarousellite_1.0.1.js" target="head" />
<h:outputScript name="js/init-sculpture.js" target="head" />
<h:outputScript name="js/jquery.formulaire-inscription.js" target="head" /> 
```

*after* you've moved the `/js` folder into the `/resources` folder of the public webcontent.

```
WebContent
 |-- resources
 |    `-- js
 |         |-- jquery.mousewheel.js
 |         |-- jcarousellite_1.0.1.js
 |         |-- init-sculpture.js
 |         `-- jquery.formulaire-inscription.js
 : 
```

# winforms - Visual C++ - MIDI 播放器

> ID：12011854
> 
> 赞同：1
> 
> 时间：2012-08-17T19:14:30.023
> 
> 标签：winforms, visual-studio-2010, visual-c++, midi

我正在创建一个需要播放 MIDI 文件的应用程序。我试过这段代码：

```
SoundPlayer^ player = gcnew SoundPlayer();
player->SoundLocation = path2+"\\aw.mid";
player->Load();
player->PlaySync(); 
```

它告诉我它只能播放波形文件。我可以让它以某种方式播放midi文件吗？或者我可以使用其他代码吗？
E: 现在我有了 NAudio 库，但是我找不到可以播放我的 midi 的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:36:49.283

据我所知，.net 框架中没有任何东西可以让您播放 MIDI 文件。尝试改用[NAudio 库](http://naudio.codeplex.com/)，它是开源的。从他们的主页：

> NAudio 是一个开源 .NET 音频和 MIDI 库，包含数十个有用的音频相关类，旨在加速 .NET 中音频相关实用程序的开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-04T00:02:51.507

NAudio 可能是一个很好的解决方案，但我发现根据我的经验，代码有点像意大利面条，不能很好地解释自己。这是来自 OpenMidiProject 的 midi 播放器的一些代码示例，您需要下载他们的源文件（头文件、库和 dll），但我一直喜欢使用他们的东西。基本上，这个库所做的是它会自动解析和播放 midi 事件。

如果您对使用此代码有任何疑问，请随时提出。它*确实可以*编译，所以如果你在编译它时遇到任何问题，它必须在你的最后。

```
#include <stdio.h>
#include <windows.h>
#include "..\\MIDIIO\\MIDIIO.h"
#include "..\\MIDIData\\MIDIData.h"
#include "..\\MIDIClock\\MIDIClock.h"
/* Don't forget to add MIDIIO(d).lib to your project */
/* Don't forget to add MIDIData(d).lib to your project */
/* Don't forget to add MIDIClock(d).lib to your project */

int main () {
  long lTimeMode = 0;
  long lTimeResolution = 0;
  long lTempo = 60000000 / 120; /* [microsec/quarter note] */
  long lEndTime = 0;
  long lOldTime = 0;
  long lCurTime = 0;
  MIDIOut* pMIDIOut = NULL;
  MIDIData* pMIDIData = NULL;
  MIDITrack* pMIDITrack = NULL;
  MIDIEvent* pMIDIEvent = NULL;
  MIDIClock* pMIDIClock = NULL;

  pMIDIOut = MIDIOut_Open ("Microsoft GS Wavetable Synth");
  if (pMIDIOut == NULL) {
    printf ("MIDIOut Open failed.\n");
    return 0;
  }

  pMIDIData = MIDIData_LoadFromSMF ("test.mid");
  if (pMIDIData == NULL) {
    printf ("MIDIData Load failed.\n");
    return 0;
  }

  lTimeMode = MIDIData_GetTimeMode (pMIDIData);
  lTimeResolution = MIDIData_GetTimeResolution (pMIDIData);
  lEndTime = MIDIData_GetEndTime (pMIDIData);

  pMIDIClock = MIDIClock_Create (lTimeMode, lTimeResolution, lTempo);
  if (pMIDIClock == NULL) {
    printf ("MIDIClock_Create failed.\n");
    return 0;
  }

  printf ("Now playing...\n");
  MIDIClock_Start (pMIDIClock);

  while (lCurTime <= lEndTime) {
    lCurTime = MIDIClock_GetTickCount (pMIDIClock);
    forEachTrack (pMIDIData, pMIDITrack) {
      forEachEvent (pMIDITrack, pMIDIEvent) {
        long lTime = MIDIEvent_GetTime (pMIDIEvent);
        if (lOldTime <= lTime && lTime < lCurTime) {
          if (MIDIEvent_IsTempo (pMIDIEvent)) {
            long lTempo = MIDIEvent_GetTempo (pMIDIEvent);
            MIDIClock_SetTempo (pMIDIClock, lTempo);
          }
          if (MIDIEvent_IsMIDIEvent (pMIDIEvent) ||
            MIDIEvent_IsSysExEvent (pMIDIEvent)) {
            unsigned char byMessage[256];
            long lLen = MIDIEvent_GetLen (pMIDIEvent);
            MIDIEvent_GetData (pMIDIEvent, byMessage, 256);
            MIDIOut_PutMIDIMessage (pMIDIOut, byMessage, lLen);
          }
        }
      }
    }
    lOldTime = lCurTime;
    Sleep (5);
  }
  MIDIClock_Stop (pMIDIClock);
  printf ("Now end.\n");

  MIDIClock_Delete (pMIDIClock);
  MIDIData_Delete (pMIDIData);
  MIDIOut_Close (pMIDIOut);
  return 1;
} 
```

# magento - Magento Paypal Express 和代码中的标准差异 - 空篮子

> ID：12011859
> 
> 赞同：1
> 
> 时间：2012-08-17T19:14:52.257
> 
> 标签：magento

在 magento 上使用 paypal 时，有两个明确的选择，标准和快递。

实际上它们之间的差异非常令人困惑，但主要差异之一是贝宝标准在重定向到贝宝时立即完成订单，而快递没有。

这实质上意味着用户购物篮在转移到贝宝时使用贝宝标准清除，如果他们点击返回，他们将没有购物篮。

这发生在代码中的哪个确切点？

我可以在 magento 中看到两种付款方式：

```
app\code\core\Mage\Paypal\Model\Express.php 
```

和

```
app\code\core\Mage\Paypal\Model\Standard.php 
```

但我看不到magento允许快递在哪里保持订单

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T12:06:34.520

Express和Standard之间的实际流程不同......

**贝宝快递**

选择付款方式后（显然是在订单完成之前），用户会被直接重定向到 PayPal。在授权使用 PayPal 付款后，他们返回网站完成订单。

**贝宝标准**

用户完成整个结帐过程并在现场完成订单。然后他们被重定向到 PayPal 以进行付款。他们不需要返回站点来完成订单，因为它在重定向到 PayPal 之前已经完成。这就是为什么无论您是否在 PayPal 付款，如果您返回网站，您都会看到空篮子 -**报价已转换为订单。**

所以从这个意义上说，PayPal express 本质上是一种结账方式，而 PayPal 标准是一种支付方式。

* * *

关于这一切发生在代码中的确切位置......

**贝宝快递**

使用在 Mage_Checkout_OnepageController的 savePayment() 操作中调用的 getCheckoutRedirectUrl() 方法[-](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Checkout/controllers/OnepageController.php#L426)[因此](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Paypal/Model/Express.php#L428)您在订单完成之前被重定向，如上所述。

**贝宝标准**

使用在 Mage_Checkout_Model_Type_Onepage 的[saveOrder() 方法中](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Checkout/Model/Type/Onepage.php#L797)调用的[getOrderPlaceRedirectUrl()](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Paypal/Model/Standard.php#L108)

*请查看链接以获取所有发生的确切代码点。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T20:39:08.213

基于快速检查代码的部分答案，也许这至少会为您指明正确的方向。让我知道你发现了什么，我会尝试做一些额外的挖掘并提供更多细节。

```
// Mage_Paypal_StandardController
public function redirectAction()
{
    $session = Mage::getSingleton('checkout/session');
    $session->setPaypalStandardQuoteId($session->getQuoteId());
    $this->getResponse()->setBody($this->getLayout()->createBlock('paypal/standard_redirect')->toHtml());
    $session->unsQuoteId();
    $session->unsRedirectUrl();
} 
```

请注意，在结帐/会话中未设置 quote_id。那可能会做到。

在 Express 控制器中，我看不到任何未`quote_id`设置的地方：

```
// Mage_Paypal_Controller_Express_Abstract
public function placeOrderAction()
{
    ...
} 
```

# grammar - RFC 2068 允许评论嵌套在评论中吗？

> ID：12011862
> 
> 赞同：0
> 
> 时间：2012-08-17T19:15:09.537
> 
> 标签：grammar, rfc, ragel

根据：[RFC 2068](http://www.ietf.org/rfc/rfc2068.txt)：

> 通过用括号将注释文本括起来，可以将注释包含在某些 HTTP 标头字段中。仅允许在包含“comment”作为其字段值定义的一部分的字段中使用注释。在所有其他字段中，括号被视为字段值的一部分。

这些是相关的规则：

```
comment        = "(" *( ctext | comment ) ")"
ctext          = <any TEXT excluding "(" and ")"> 
```

评论里面的评论？这似乎很愚蠢。我的主张是：（1）评论中不需要嵌套评论。(2) 如果是这样，评论规则最好表述为：

```
comment        = "(" *( ctext ) ")" 
```

我的主张正确吗？如果没有，嵌套注释何时实际使用？其他图书馆在乎吗？你知道这方面的历史/评论吗？（尝试使用“RFC 2068 嵌套注释”进行 Web 搜索并不是很有帮助。）

（动机：我很在意，因为我正在为 RFC 2068 编写一个词法分析器（使用 Ragel）。如果评论真的需要可嵌套，那就意味着递归规则，据我所知，这不是 Ragel 的最佳选择。我读过一些迹象表明 Ragel 在某些情况下可以处理递归规则，但我不太清楚。另外，我也在查看 Unicorn Ragel 代码，这很有帮助。）

PS 为简单起见，我现在有意不深入研究另一条规则的细节`quoted-string`。

**2012-08-20 更新**：下面的一个答案有用地引用了 RFC 2068 的较新版本。这有助于澄清解析规则。但是，它没有解决我的其他观点：

1.  我没有看到任何令人信服的理由让规范在评论中包含评论。这似乎是不必要的——也许是过度设计的，也许是被忽视的。这既烦人又重要，因为递归规则使格式成为非常规语言。这是规范编写者通常应该注意的事情，对吧？

2.  我还没有（还没有？）看到在评论中使用评论的例子。如果是这样的话，世界已经含蓄地说“嵌套评论无关紧要”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:27:09.420

查看 RFC2616：

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html)

```
Comments can be included in some HTTP header fields by surrounding the comment
text with parentheses. Comments are only allowed in fields containing "comment" 
as part of their field value definition. In all other fields, parentheses are 
considered part of the field value.

       comment        = "(" *( ctext | quoted-pair | comment ) ")"
       ctext          = <any TEXT excluding "(" and ")"> 
```

所以是的，嵌套注释是明确允许的:)

# javascript - getelementbyid 和标记名和类名

> ID：12011867
> 
> 赞同：7
> 
> 时间：2012-08-17T19:15:17.320
> 
> 标签：javascript

我想知道如何使用纯 javascript 获取元素。

我的代码如下：

```
 <html>
             <body>
                 <div id="abc" class="xy"> 123 </div>
                <p id="abc" class="xyz"> 123 </p>
              <span id="foo" class="foo2"> foo3 </span>
             </body>
           </html> 
```

在这里我想找到组合元素：

1.  查找元素具有 id abc 和标记名 p
2.  查找元素具有 id abc 和类名 xy
3.  查找元素具有类名 foo2 和标记名 span
4.  查找元素具有 id abc 和类名 xy 和标记名 div

我知道我们每页不能使用多个 id。但在更糟糕的情况下，不同的标签可以有相同的 ID 吗？在 HTML 中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T19:17:06.743

您可以使用`querySelectorAll`. 对于您的三个示例：

1.  `document.querySelectorAll("p#abc")`
2.  `document.querySelectorAll(".xy#abc")`
3.  `document.querySelectorAll("span.foo2")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T19:19:49.880

如果 HTML 中的 ID 不是唯一的，则无法保证使用它们的任何 Javascript 都能正常工作，无论您在多少个浏览器中测试它。

因此，您要查找的前两件事将使用 getElementById，因为您的 ID 应该是唯一的。

第二种，使用 getElementsByTagName，并循环遍历结果以检查每个是否具有所需的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T19:22:28.200

You can do like this :

**document.getElementByXXX** --> you can put Tag,Name,Calss,ID instead of **XXX**

element = document.getElementById(id);

example if you want to change bg color:

```
 window.onload = function(){
 document.getElementById("your_id").style.background ="red";
} 
```

here are some good examples: [http://xahlee.info/js/js_get_elements.html](http://xahlee.info/js/js_get_elements.html)

**@Raj Mehta** its working:

```
 <html>
  <head>
   <script>
    function load(){

var myObj1 = document.getElementById("root").getElementsByClassName("xyz");
var myObj2 = document.getElementById("root").getElementsByClassName("xy");
var myObj3= document.getElementById("root").getElementsByClassName("foo2");
var myObj4= document.getElementById("root").getElementsByTagName("p");
var myObj5= document.getElementById("root").getElementsByTagName("div");

myObj1[0].style.color="red";
myObj2[0].style.color="green";
myObj3[0].style.color="skyblue";
myObj4[1].style.color="purple";
myObj5[1].style.color="blue";
}
</script>
</head>
       <body onload="load()" >  
         <div id="root">
                 <div id="abc" class="xy"> 123 <div> here you combine using array[0],[1],[2]... depends on you structure</div>  </div>
                 <p id="abc" class="xyz"> 123 </p>
                <span name="span" id="foo" class="foo2"> foo3 </span>
                <p id="new" name="name"> one more lvl</p>
          </div>
         </body>
       </html> 
```

There is no other way either this or use jquery.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T19:27:08.390

由于您可以接受他们具有唯一的 id（如果他们有 id，这在 HTML 中是必需的），请将您的 HTML 考虑在内：

```
<html>
    <body>
        <div id="abc1" class="xy"> 123 </div>
        <p id="abc2" class="xyz"> 123 </p>
        <span id="foo" class="foo2"> foo3 </span>
    </body>
</html> 
```

然后为您的三个不同的选择：

1.  `document.getElementById("abc1")`得到你的`<div>`id `abc1`。

2.  `document.getElementById("abc2")`得到你的`<p>`id `abc2`。

3.  `document.getElementById("foo")`得到你的`<span>`id `foo`。

# wso2 - wso2身份是什么

> ID：12011870
> 
> 赞同：0
> 
> 时间：2012-08-17T19:15:26.433
> 
> 标签：wso2, identity, wso2is

有人可以解释一下，什么是 wso2 身份和使用？

我在网上没有找到解释，

只要：

WSO2 Identity Server 使企业架构师和开发人员能够通过减少身份配置时间、保证安全的在线交互和提供减少的单点登录环境来改善客户体验。WSO2 身份服务器通过包括角色基础访问控制 (RBAC) 约定、基于细粒度策略的访问控制和 SSO 桥接来减少身份管理和权利管理管理负担。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:54:29.720

WSO2 Identity Server 是一个开源的身份和权利服务器。它支持以下标准。

*   开放ID
*   OAuth 1.0a/2.0
*   XACML 2.0/3.0
*   SAML2
*   WS-Trust/STS
*   SCIM
*   XKMS
*   用户管理
*   AD/LDAP 的连接器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-06T12:50:14.757

什么是 WSO2 是：

实施 WSO2 身份服务器以解决身份问题；WSO2 Identity Server 是完全开源的。每个新版本都会不断改进和增强，以应对新的业务挑战和客户期望。WSO2 IS 的主要重点是需要在各种应用程序和设备上验证个人身份；这应该以一种安全的方式进行，以确保安全以及访问速度和易用性。

使用 WSO2 是：

WSO2 IS 为企业 Web 应用程序、服务和 API 提供安全的身份管理。WSO2 IS 保证安全的在线交互，减少身份管理和权利管理。Identity Server 使您能够跨多个系统（包括云应用程序）创建、维护和终止用户帐户以及用户身份。当有多个应用程序需要身份验证时，用户应该能够在一个地方登录，并且仍然可以无缝访问所有其他应用程序。此外，它具有改进的联合方法。（有一个中心化身份，称为服务提供者，是“n 对 n”关系。从联盟伙伴到消费者服务是“1 对 n”关系，从消费者服务到联盟伙伴是“1 对 n”关系；它导致更高的效率。） WSO2 IS 为最终用户提供“Jaggery”用户界面。WSO2 IS 还具有最终用户视图以管理配置文件以恢复帐户和处理授权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-15T16:05:45.733

它是一个身份管理服务器，wso2 身份的一个简单示例是 oAuth 身份系统

# eclipse - Eclipse、Egit 和符号链接或符号链接 - 是否可以制作一个肮脏的 Eclipse 插件来解决这个问题？

> ID：12011873
> 
> 赞同：5
> 
> 时间：2012-08-17T19:15:35.937
> 
> 标签：eclipse, eclipse-plugin, egit

多年来，问题一直存在，因为 eclipse 或 java 没有一种可移植的方式来检测符号链接。

现在符号链接非常非常有用，因此无论出于何种不可移植的原因，**是否可以通过 eclipse 插件解决此问题，并且 Egit 不会将符号链接及其下的所有内容视为新文件？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T21:00:51.190

我们计划使用 Java 7 在 JGit 中实现（虽然还没有具体的时间表，欢迎贡献），参见 [1]，还有一个基于 JNI 的原生实现的草案 [2]。

[1] [https://bugs.eclipse.org/bugs/show_bug.cgi?id=354367](https://bugs.eclipse.org/bugs/show_bug.cgi?id=354367) [2] [https://git.eclipse.org/r/#/c/2125/](https://git.eclipse.org/r/#/c/2125/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:18:12.933

看起来这不会很快发生，因为这个问题显然已经存在了很长时间。不幸的是，这对使用 egit 的我来说是个大事。:-( 是的，我知道，在开源项目中没有什么可抱怨的。我想我应该贡献自己...

# configuration - Visual Studio 2012 Web 部署发布忽略了转换和构建的选定配置

> ID：12011878
> 
> 赞同：9
> 
> 时间：2012-08-17T19:16:01.107
> 
> 标签：configuration, visual-studio-2012, msdeploy, webdeploy

当我创建发布配置文件时，我可以选择我希望发布用于此配置文件的配置。这些选项类似于 Debug、Release 或任何自定义的选项，例如 Staging。问题是，如果我选择 Release 或 Debug 以外的任何配置，比如 Staging，Visual Studio 将完全忽略我的选择并使用 Web.Release.config 进行转换和构建。我做错了什么还是设计使然？似乎 Publish 仅将 Release 和 Debug 识别为可接受的配置。对这个问题有什么想法吗？

我正在使用 Visual Studio 2012 RTM。

**更新 1 :: "NightlyLive - Any CPU" 配置选择：**

这里我选择我自己的自定义配置“NightlyLive”：

![在此处输入图像描述](../Images/4d3f634c3473f1a78862fc5ddffb0b0c.png)

这是我发布时发生的情况：

```
6>------ Build started: Project: UI.Next, Configuration: Release Any CPU ------
7>------ Publish started: Project: UI.Next, Configuration: Release Any CPU ------
7>Transformed Web.config using [...]\UI.Next\Web.Release.config into obj\Release\TransformWebConfig\transformed\Web.config. 
```

如您所见，它使用 Release Any CPU（而不是 NightlyLive - Any CPU）构建项目，并且使用 Web.Release.config（而不是 Web.NightlyLive.config）转换 Web.config。

**更新 2 :: 配置文件名称重命名为“NightlyLive”：**

在这里，我将配置文件名称从“test”重命名为“NightlyLive”。

![在此处输入图像描述](../Images/e06a081f1d7c4e019a1f23966e7224c7.png)

这是控制台输出：

```
6>------ Build started: Project: UI.Next, Configuration: Release Any CPU ------
7>------ Publish started: Project: UI.Next, Configuration: Release Any CPU ------
7>Transformed Web.config using [...]\UI.Next\Web.Release.config into obj\Release\TransformWebConfig\transformed\Web.config.
7>[...]\UI.Next\Web.NightlyLive.config(23,18): Warning : Argument 'debug' did not match any attributes
7>[...]\UI.Next\obj\Release\TransformWebConfig\transformed\Web.config(78,6): Warning : No attributes found to remove
7>Transformed obj\Release\TransformWebConfig\transformed\Web.config using [...]\UI.Next\\Web.NightlyLive.config into obj\Release\ProfileTransformWebConfig\transformed\Web.config. 
```

所以在这里，它仍然是使用 Release Any CPU 构建的。

但是对于 Web.config，它首先使用 Web.Release.config 进行转换，然后使用 Web.NightlyLive.config 在前一个转换的基础上进行第二次转换。

我认为双重转变是有意为之的，而且是有道理的。但是，您必须将配置文件名称重命名为配置名称以强制使用您的自定义转换文件，这一事实看起来并不正确。

**更新 3 :: 添加了 TestSolution**

[您可以从这里](http://sdrv.ms/OSJNcS)下载精简的解决方案。

首先，我创建了一个全新的 vs2012 解决方案，一切正常。所以我决定剥离我当前的解决方案并作为测试用例上传。

*请注意，我的解决方案最初是我在 vs2012 中打开的 vs2010 解决方案，vs2012 对解决方案进行了必要的修改。*

**更新 4 :: 判决**

我想我的解决方案配置都搞砸了。所以基本上为了解决这个问题，我删除了所有自定义的解决方案和项目配置，并与 web.config 转换文件一起再次创建它们。

**问题解决了。**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-23T18:38:08.303

我经历了完全相同的行为。

对我来说，问题是自定义解决方案配置没有正确引用我尝试部署的 Web 项目中的自定义配置。

尝试以下操作：

1.  右键单击解决方案并输入属性
2.  从左上角的下拉列表中选择您的自定义配置
3.  展开配置属性并选择配置
4.  确保您的 Web 项目在表中选择了正确的自定义配置。

完成此操作后，使用自定义配置的 Web 部署工作正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-27T19:09:33.550

我还将 VS2010 解决方案转换为 VS2012 并且遇到了同样的问题。借助其中一些答案为我提供了重点关注的线索，我能够将罪魁祸首确定为我的发布者配置文件和配置管理器的组合。

在我的配置管理器中，我有三个“活动解决方案平台”用于我的暂存配置：任何 CPU、混合平台和 x86。我的登台配置管理器的默认视图是混合平台，它全部设置为登台配置。当我去创建我的发布者配置文件时，我选择了“Staging - Any CPU”，它最初对我来说是不知情的，正在使用发布配置。一旦我开始在配置管理器中更改平台，问题就很明显了，我能够为解决方案中的每个配置/平台组合正确设置配置。

因此，长话短说，请确保检查要发布的配置中的每个活动解决方案平台（通过下拉列表更改），并验证每个项目是否使用配置管理器中的正确配置。此外，请确保您的发布者资料使用正确的配置/平台组合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T19:01:22.043

在 Web 发布对话框中，我们现在允许您在“设置”选项卡上指定构建配置。它默认为发布。

![在此处输入图像描述](../Images/a7f2acaad870d75a079adc443166fc53.png)

在您的情况下，您能否确保在那里选择了 Staging。仅供参考，如果您没有将暂存视为菜单选项，那么这是因为您创建了**解决方案**构建配置而不是**项目**配置。下拉列表是由项目构建配置值驱动的，而不是解决方案构建配置。您可以使用配置管理器编辑解决方案/项目构建配置。

![在此处输入图像描述](../Images/3c240129ed9fd6197cd42f9685d310fe.png)

# php - 在 n 秒内重定向并传递值

> ID：12011881
> 
> 赞同：0
> 
> 时间：2012-08-17T19:16:11.240
> 
> 标签：php, javascript

我有页面 A 和 B。一旦页面 A 加载，我将从用户那里获得输入。60 秒后，页面将自动重定向到页面 B。我使用以下代码执行了此操作，但未传递值。

```
<html>
<head>
  <script type="text/javascript">
     function printVal()
     {
       printVal.counter--;
       document.getElementById("timer").innerHTML = printVal.counter;
       if(printVal.counter==0){
         window.location="next.php";
       }
     }

     function callfun()
     {
       setInterval(printVal,1000);
     }

     printVal.counter=61;
  </script>
</head>
<body>
  <input type="submit" value="Click Me" onclick="callfun()">
  <p id="timer"></p>
  <form method='post' action='next.php'>
     <input type='text' name='val'>
  </form>
</body>
</html> 
```

我必须创建一个列表。一旦用户在文本框中输入内容并按下回车键，它就应该将其添加到列表框中。60 秒后，我希望将列表框中的值传递给 next.php。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:22:24.620

Changing `window.location` won't submit the values in your form to the new location. You'll have to submit the form instead.

```
if(printVal.counter==0)
    document.getElementsByTagName("form")[0].submit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:25:36.890

这是一个相当广泛的问题，可以尝试并有效地回答。

让我们从你的列表框开始：你问：`once user types something in text box and press enter it should go and add in a list box. and after 60 seconds i want the values in the list box to be passed to next.php`

如果用户不会对列表框（其中的数据）做任何事情，为什么要将数据放在列表框中？所以我猜你的想法是使用一个列表框来保存单独的值，然后你可以发布到你的 next.php。

划定价值的你说？成交。*让我们忽略 json、ajax 等，用一些简单*的普通 javascript来“教你如何钓鱼” 。我将把模块化留给你！

作为 html 输入元素的名称属性，我们还可以像这样指定一个*数组*`<input "name=itm[]">`：（在制作“列表框”时也可以这样做`<select name="var[]" multiple="yes">`）。让我们在列表中很好地显示它们。因此，每当您在 textarea/inputfield 中按回车键时，都会将包含输入字段的列表项添加到表单中。

当计时器达到零时，您需要使用提交表单`form.submit()`（正如 Andreas 还指出的那样）。

这里有一个*简化*但完全有效的示例：

```
<!DOCTYPE html><html><head><title>demo</title>

<script type="text/javascript">
window.onload=function(){
   itmLi=document.createElement('li');
   itmInp=itmLi.appendChild(document.createElement('input'));
   itmInp.type='text';
   itmInp.name='val[]';

   theItms=document.getElementById('theItems');

   fetchItem=function(el,evt){
      var itmAct, keyCode=(evt.which) ? evt.which : event.keyCode;
      if (keyCode == 13){
         itmAct=theItms.appendChild(itmLi.cloneNode(true));
         itmAct.firstChild.value=el.value;
         el.value='';
         return false;
      }
   };

   theTmr=document.getElementById('tmrOut');
   myTimer=function(){
      var t=Number(theTmr.innerHTML);
      if(t){
         theTmr.innerHTML=t-1;
         window.setTimeout(myTimer,1000);
      } else {
         theItms.parentNode.submit();
      }
   };
   window.setTimeout(myTimer,1000);

   document.getElementById('inpTxt').focus(); //sigh.. firefox does not work AGAIN.
};
</script>

</head><body>

<p>Time left: <span id="tmrOut">60</span></p>

<textarea id="inpTxt" onkeyup="return fetchItem(this,event);"></textarea>

<form id="theForm" method="post" action="next.php">
<ul id="theItems"></ul>
</form>

</body></html> 
```

当然，您可以[在这个 fiddle 中找到一个工作演示](http://jsfiddle.net/yYF8c/)（请注意，这个演示运行 10 秒而不是 60 秒）。

现在您的 php-script`next.php`将收到*一个*变量：`val`正如您已经命名的那样），但这个变量实际上是一个包含所有输入项的数组（由 enter 键分隔）。
多田！

由于您只询问如何将变量传递给 php，因此我的回答就停在这里。如果您在接收 php 方面需要帮助，我建议您[先RTM](http://www.php.net/manual/en/faq.html.php)。

祝你好运！！

# debugging - 注释掉用于测试的代码部分

> ID：12011887
> 
> 赞同：1
> 
> 时间：2012-08-17T19:16:44.903
> 
> 标签：debugging, comments, sas

我想注释掉所有内容，比如说，在 SAS 程序的第 26 行之后，出于调试目的。`endsas`终止包括 SAS 程序在内的所有内容，但我希望程序保留并检查结果。请告知步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T22:06:15.517

继@RosaryGuy 的好回答之后：

`* anything between an asterisk and semicolon will be commented out;`

`/* anything between a slash-asterisk and asterisk-slash will be commented out */`

```
%宏忽略；

这整个部分，在 '%macro ignore;' 之间 和 '%mend;',
包括任何类型的任何评论，任何其他宏调用，
并且任何语法不正确的代码等都将被编译
在执行时但从不运行。你应该用这个来
“注释掉”可能已经有的大部分代码
在他们的评论。

％修补;
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T20:09:25.507

```
A couple of thoughts:

1) Hold down 'control key and forward slash to comment out line by line.
2) Put code between %macro somename and %Mend

Do not use endsas unless you want to instantly shut down your session.

I hope this helps. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T02:09:46.897

对这个略有不同的问题（[在 SAS 中，什么是捕捉语法错误的好技术/选项？](https://stackoverflow.com/questions/836157/in-sas-what-are-good-techniques-options-for-catching-syntax-errors/836306#836306) ）的公认答案（由 cmjohns 提供）包含几乎所有可以想象的注释代码的方式。

这包括通过以下方式进行：

*   `Comments`- 两种
*   `%include`陈述
*   `%macro`陈述
*   `noexec`和`cancel`声明
*   `options obs=0 noreplace;`- 这不在链接的 PDF 中，但在问题中

它还包含上述每种方法的便捷提示和快捷方式。

详细信息在[此 PDF的链接中](http://www2.sas.com/proceedings/sugi31/063-31.pdf)

# c# - 在 C# 中复制制表符

> ID：12011891
> 
> 赞同：0
> 
> 时间：2012-08-17T19:16:57.773
> 
> 标签：c#, char, replicate

在网上搜索并阅读 MSDN 上的文档后，我找不到任何关于如何在 C# 中复制制表符的*示例。*当我终于弄清楚时，我打算在这里发布一个问题...

我敢肯定这对那些精通 C# 的人来说是显而易见的，但是在各种论坛中有很多类似的问题，我认为一个*示例*值得发布（对于那些像我一样还在学习 C# 的人）。关键点：

1.  使用“双引号”表示`string`
2.  使用“单引号”表示`char`
3.  `\t`在字符串中转换为制表符：`"John\tSmith"`
4.  `'\t'`本身就像一个 tab *const*

下面是一些代码，用于将*制表符*添加到 HTML 行的前面，并以*换行符结束*：

```
public static string FormatHTMLLine(int Indent, string Value)
{
  return new string('\t', Indent) + Value + "\n";
} 
```

您还可以使用：

```
string s = new string('\t', Indent); 
```

这是在 C# 中复制选项卡的最有效方法吗？由于我还没有“流利”，我将不胜感激任何指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:23:04.160

是的，我认为这是最好的方法。

[您正在使用](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)的字符串构造函数构造一个字符串，该字符串包含您指定为第一个参数重复`count`次数的字符，其中`count`是第二个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:23:57.687

1) 你应该缓存和重用调用 new string('\t', Indent) 的结果。2) 尽量不要从 FormatHTMLLine 生成新字符串。例如，您可以考虑将它们写入输出流。

```
void IndentWrite(int indent, string value)
{
    if (indent > 0)
    {
       if (s_TabArray == null)
       {
         s_TabArray = new char[MaxIndent];

         for (int i=0; i<MaxIndent; i++) s_TabArray[i]='\t';
       }

       m_writer.Write(s_TabArray, 0, indent);
    }

    m_writer.Write(value);
    m_writer.Write('\n');
} 
```

# c# - C# 将 CPU 保持在/接近指定百分比使用率以进行测试

> ID：12011892
> 
> 赞同：5
> 
> 时间：2012-08-17T19:16:58.633
> 
> 标签：c#, testing, cpu, throttling

我目前正在开发一个小型内部测试应用程序，以在计算机上创建多种类型的负载，以便我们可以看到我们的软件在负载下是如何工作的。我被一个请求挂断了，因为我在用户运行程序之前做了某种方式来指定 CPU 的使用百分比（比如 40%），这将有望将 cpu 保持在一个范围内 +-他们投入的 10%。有人告诉我，他们以前见过这样的程序，但我见过的每一个声称这样做的程序都不起作用。我正在尝试读取平均使用情况并让正在运行的线程休眠，以降低 CPU 使用率，但我发现这并不准确。它也将用于多台服务器，每台服务器都有不同的 CPU，所以我不能做太多的硬编码，因为它需要在每台服务器上工作。

编辑：我试图使用较低优先级的线程，并且还被告知这对他们没有用（尽管在我要求这样做之前，我已经创建了仅用于测试目的的选项）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:27:25.750

前段时间我们做了一些类似的调整应用服务器。我们发现，当 CPU 大约为 70% 时，我们的整体吞吐量最好。我们的解决方案是启动额外的线程，每个线程之间有一个延迟，直到达到所需的负载。如果 CPU 超过 80%，我们会减少运行线程的数量（通知线程完成其当前工作，然后终止）。如果 CPU 低于 60%，我们启动一个新线程。

您可以应用类似的逻辑来创建可以调整到目标 CPU 利用率的人工负载。您的线程需要平衡 CPU 和非 CPU（IO，或只是睡眠），以便进行微调。如果您的线程是 CPU 密集型的，则每个线程将消耗 1 个 CPU 核心至大约 100%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T19:39:07.933

从 Windows 8 开始，您可以[使用 Windows Jobs 使操作系统调度程序限制 CPU 使用率](http://msdn.microsoft.com/en-us/library/windows/desktop/hh448384%28v=vs.85%29.aspx)。

# c# - 为什么我的 TableLayoutPanel 在除以百分比时没有使用其所有大小？

> ID：12011893
> 
> 赞同：0
> 
> 时间：2012-08-17T19:16:58.807
> 
> 标签：c#, winforms, dynamic, tablelayoutpanel

我正在向 TableLayoutPanel 动态添加控件。

它有 12 行和 32 列。

我已经划分了列的宽度，这样带有标签的宽度是带有文本框的宽度的两倍，并且百分比加起来为 100：

```
labels = 5%
textBoxes = 2.5% 
```

由于每行有 24 个文本框，每行有 8 个标签，这等于 100%（40% 标签，60% 文本框）。

但是，最后一列是太空猪，如下所示：

[http://warbler.posterous.com/the-32-column-is-wider-than-the-rest](http://warbler.posterous.com/the-32-column-is-wider-than-the-rest)

而且我需要标签的空间来展示它们的整个自我：它们实际上是五个字符宽（“00:00”...“23:45”），而不是显示的四个字符。

根据经验证据（以前的反复试验），我可以减小 TLP 的宽度以缩小最后一列，但这并不能解决我的标签单元太窄的问题。

这就是我在 TLP 上打控件的方式（我在设计时通过 Columns 集合的属性页面设置了列宽百分比）

```
private void AddPlatypusScheduleControlsToTableLayoutPanel()
{
    try
    {
        this.SuspendLayout();
        tableLayoutPanelPlatypusSchedule.ColumnCount = PLATYPUS_SCHEDULE_COL_COUNT;
        int ColNum = 0;
        int RowNum = 0;
        int LoopCounter = 1;
        var dt = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day, 0, 0, 0);

        while (LoopCounter <= QUARTER_HOUR_COUNT)
        {
            string lblName = string.Format("labelPS{0}", LoopCounter);
            var lbl = new Label
                {
                    Name = lblName,
                    Dock = DockStyle.Fill,
                    Margin = new Padding(),
                    Font = new Font("Microsoft Sans Serif", 7),
                    TextAlign = ContentAlignment.MiddleCenter,
                    Text = dt.ToString("HH:mm")
                };
            tableLayoutPanelPlatypusSchedule.Controls.Add(lbl, ColNum, RowNum);

            string txtbxName1 = string.Format("textBoxLSA{0}", LoopCounter);
            var txtbxa = new TextBox { Name = txtbxName1, Dock = DockStyle.Fill, Margin = new Padding() };
            string txtbxName2 = string.Format("textBoxLSB{0}", LoopCounter);
            var txtbxb = new TextBox { Name = txtbxName2, Dock = DockStyle.Fill, Margin = new Padding() };
            string txtbxName3 = string.Format("textBoxLSC{0}", LoopCounter);
            var txtbxc = new TextBox { Name = txtbxName3, Dock = DockStyle.Fill, Margin = new Padding() };
            tableLayoutPanelPlatypusSchedule.Controls.Add(txtbxa, ColNum + 1, RowNum);
            tableLayoutPanelPlatypusSchedule.Controls.Add(txtbxb, ColNum + 2, RowNum);
            tableLayoutPanelPlatypusSchedule.Controls.Add(txtbxc, ColNum + 3, RowNum);

            dt = dt.AddMinutes(15);
            RowNum++;
            LoopCounter++;
            if (RowNum == 12)
            {
                ColNum = ColNum + 4;
                RowNum = 0;
            }
        }
    }
    finally {
        this.ResumeLayout();
    }
} 
```

## 更新

我想问题可能是 TLP 的宽度不能被 32 整除（它是 619）；所以我把它扩大到640，但同样的问题仍然存在。

## 更新 2

为了让它工作，我不得不对列使用绝对大小而不是百分比*，并将标签保持列的宽度增加到 35（在 TLP 宽度为 640 时，只有 15 个用于保持文本框的列） .

*   WPF 有时可能是一只熊（更像是 Kodiak 而不是 Winnie），但它确实满足了这种情况的需求，我担心绝对尺寸会在不同的分辨率/屏幕尺寸等下全部转移到达拉斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:24:22.140

所以这可能是由于浮点数学和整数宽度。

控件的`ClientSize.Width`是整数。表格布局，无论您是否指定浮点值，最终都需要将其转换为整数。

我整理了一个与您类似的示例。当我运行示例时，我获取了控件的`ClientWidth`值，我的窗口大小为 284。

单元格边框会有一定的宽度，我猜我说它们是 1。所以，让我们假设 284 减去边框的 33，所以剩下的 251 需要分成 32 列。

对于那些窄列，值为 0.025：

```
0.025 * 251 = 6.275, truncated to 6 
```

所以每个窄列都有一个额外的 0.275。

对于那些较宽的列，该值为 0.05：

```
0.05 * 251 = 12.55, truncated to 12 
```

所以每个宽列有一个额外的 0.55。

24 * 6 = 24 窄列的 144 宽度

8 * 12 = 8 宽列的 96 宽

总计 240 个。

剩下 11 个，所以额外的到最后一列，它最终是人们认为的 (6) + 额外的 (11)，它最终是你期望的 3 倍宽，由于到浮点数学。

无论如何，这就是我对它为什么看起来那样的猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:56:17.237

如果布局面板的总宽度不能完全被布局面板中的列数整除（使用相对百分比宽度时），则始终填充最后一列的宽度以填充剩余空间。

假设每个文本框只需要包含一个字符，使用以下列宽设置的 600x240 布局面板大小显示得非常好。

```
labels = 6.5%
textBoxes = 2.0% 
```

# node.js - Heroku node.js redis部署错误

> ID：12011894
> 
> 赞同：3
> 
> 时间：2012-08-17T19:17:05.130
> 
> 标签：node.js, heroku, redis

我正在尝试将我的 node.js 应用程序推送到 Heroku 并收到以下错误：

> ```
>  make: *** [all] Error 1
>    sh: gmake: not found
>    npm ERR! hiredis@0.1.14 preinstall: `make || gmake`
>    npm ERR! `sh "-c" "make || gmake"` failed with 127
>    npm ERR! 
>    npm ERR! Failed at the hiredis@0.1.14 preinstall script.
>    npm ERR! This is most likely a problem with the hiredis package,
>    npm ERR! not with npm itself.
>    npm ERR! Tell the author that this fails on your system:
>    npm ERR!     make || gmake
>    npm ERR! You can get their info via:
>    npm ERR!     npm owner ls hiredis
>    npm ERR! There is likely additional logging output above. 
> ```

```
 npm ERR! System Linux 2.6.32-343-ec2
   npm ERR! command "/tmp/node-node-v052/bin/node" "/tmp/node-npm-8OVn/cli.js" "rebuild"
   npm ERR! cwd /tmp/build_z7yxzlw3xyyk
   npm ERR! node -v v0.8.7
   npm ERR! npm -v 1.1.49
   npm ERR! code ELIFECYCLE
   npm ERR! 
   npm ERR! Additional logging details can be found in:
   npm ERR!     /tmp/build_z7yxzlw3xyyk/npm-debug.log
   npm ERR! not ok code 0
   !     Failed to rebuild dependencies with npm
   !     Heroku push rejected, failed to compile Node.js app 
```

这是我的 package.json：

```
{
    "name": "myapp"
  , "version": "0.0.1"
  , "private": true
  ,"engines": {
        "node": "0.8.x",
        "npm":  "1.1.x"
  }
  , "dependencies": {
      "express": "2.5.8"
    , "jade": ">= 0.0.1"
    ,"ejs" : ">=0.7.1"
    ,"pg": ">=0.8.2"
    ,"moment" : ">=1.7.0"
    ,"async": ">=0.1.22"
    ,"request": ">=2.10.0"
    , "connect-redis": ">= 0.0.1"
    , "redis": ">= 0.0.1"
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T19:32:06.370

添加`node_modules`到 .gitignore 并运行`git rm -r --cached .`解决了这个问题。

# .net - 为 ms access 2010 创建自定义控件

> ID：12011901
> 
> 赞同：1
> 
> 时间：2012-08-17T19:17:44.320
> 
> 标签：.net, ms-access, controls

有没有办法在 .Net 语言中创建自定义控件以在 MS Access 2010 中使用？我有一个程序正在使用子表单来尝试模拟控件，但它确实不能很好地工作。如果我能够用 C# 或 VB.Net 或其他任何东西创建自定义控件并将其导入 Access，我的生活会容易得多。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T19:36:51.177

虽然理论上可以在 .NET 中创建一个可以在 MS Access 中使用的控件，但这也是非常不切实际的，因为有很多东西不起作用。

这是我在尝试时遇到的一些问题：

*   我从来没有得到约束工作。换句话说，我无法以使其在 MS Access 中可用的方式公开 .NET 的本机绑定。
*   我无法让控件调整大小。当您从 Access 中更改控件的大小时，您只需更改放置控件的“设计图面”的大小。它对控件的大小没有影响。
*   .NET ActiveX 控件将打包在 .DLL 文件中，而不是 .OCX 文件中。您必须使用 RegAsm 工具来注册 .DLL 文件。
*   您必须下载并安装 Microsoft 的 Interop Form 的 Toolkit 2.1 才能创建 COM 互操作控件。
*   向 COM 接口公开 .Net 控件属性、方法和事件是一个相当手动且费力的过程。例如，组合框作为“值”属性，但它不会自动映射到 ActiveX 控件的 .value 属性。事实上，我找不到任何方法来映射这两者，所以我必须实际创建一个具有不同名称的单独值属性，这对于使用控件的程序员来说远非直观。典型的手动“绑定”最终看起来像这样：Me!MyFieldName = Me.ActiveXControl.MyValue
*   在 .Net 中使用 COM 可调用包装器编写是否是 ActiveX 控件有点愚蠢。您必须知道如何编写您的 .NET 代码，以便在 VBA 中使用 Intellisense 正确显示属性、方法和事件。这涉及编写一个公共接口，使用委托，我什至不记得是什么。可以说它很复杂。

在这一切结束时，我开始怀疑我是否真的在努力做一些不可能的事情。并且想知道将 .NET 用于所有内容并完全转储 Access 会不会更好。不幸的是，今天我仍在使用 Access 进行开发，但我们正在认真考虑在不久的将来迁移到 .NET。

您可以在这里看到我贡献的另一个相关问题：http: [//social.msdn.microsoft.com/Forums/en-US/accessdev/thread/06867384-9e1f-486d-982a-6bbb0f40848d/#5b27805f-3a95- 4bbd-a50e-3de06e199490](http://social.msdn.microsoft.com/Forums/en-US/accessdev/thread/06867384-9e1f-486d-982a-6bbb0f40848d/#5b27805f-3a95-4bbd-a50e-3de06e199490)

# android - 为什么我需要在视图底部有一个空白布局？

> ID：12011902
> 
> 赞同：0
> 
> 时间：2012-08-17T19:17:50.997
> 
> 标签：android, android-layout

我有一个相当激烈的视图布局。它使用@drawable/shape.xml 文件和样式。

所有元素都正确匹配

但是，除非我在底部有一个空白布局，否则它不会编译 - 编译器只会说“解析 XML 时出错”

我添加了这个并且它有效：

```
<LinearLayout android:layout_width="wrap_content"
android:layout_height="match_parent" android:orientation="vertical" />
</LinearLayout> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:21:08.780

您在发布的代码中关闭了两个 LinearLayouts。

1.  此 LinearLayout 以以下方式结束`/>`：

    ```
    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="match_parent" 
        android:orientation="vertical" 
        /> 
    ```

2.  而这个终止了之前的 LinearLayout：

    ```
    <LinearLayout> <!-- Somewhere above in your code -->
        ...
    </LinearLayout> 
    ```

`<LinearLayout ... />`如果保留结束`</LinearLayout>`标记，则可以安全地删除空布局。如果这不是答案，您需要发布整个 XML，以便我们可以看到正在发生的事情。

# asp.net - 使用 NameValueCollection 在 ASP.NET 中获取 POST 值

> ID：12011905
> 
> 赞同：0
> 
> 时间：2012-08-17T19:18:06.487
> 
> 标签：asp.net, forms, post, submit, namevaluecollection

所以我有2页。它们都具有相同的母版页，并且是相同 Web 应用程序的一部分。我正在尝试将一个页面提交给另一个页面。在提交页面上，我有一些元素，例如

```
<ajaxToolkit:ComboBox ID="cmboOptions" AutoCompleteMode="SuggestAppend"
CaseSensitive="false" ItemInsertLocation="Append" runat="server" DropDownStyle="DropDownList">
    <asp:ListItem></asp:ListItem>
    <asp:ListItem Text="Option 1" Value="opt1"></asp:ListItem>
    <asp:ListItem Text="Option 2" Value="opt2"></asp:ListItem>
</ajaxToolkit:ComboBox> 
```

我在用

```
<asp:Button ID="btnSubmit" runat="server" Text="Submit" 
PostBackUrl="~/Results.aspx" /> 
```

提交页面。

在页面加载后面代码的结果页面上，我有

```
NameValueCollection nvc = Request.Form;
string selectedOption = nvc["cmboOptions"]; 
```

如果我在调试时查看 NVC，我可以看到

```
ctl00$MainContent$cmboOptions$TextBox 
```

值为“选项 1”，但我的字符串仍包含 null 值。我什至不想通过硬编码混淆的 ID 来获取值，而且我无法在 ASP.net 元素上设置名称属性。

有谁知道更好/正确的方法来完成我正在做的事情？我想坚持使用 ajaxControlToolkit 组合框，因为它们对用户很好，尽管我希望我坚持使用 jQuery 而不是听我的朋友的话，现在切换为时已晚。

我看这里没有任何运气

[在 C#/ASP.NET 中获取 POST 数据](https://stackoverflow.com/questions/976613/get-post-data-in-c-asp-net)

和这里

[读取提交到 ASP.Net 表单的 Post 数据](https://stackoverflow.com/questions/564289/read-post-data-submitted-to-asp-net-form)

和这里

[http://msdn.microsoft.com/en-us/library/6c3yckfw.aspx](http://msdn.microsoft.com/en-us/library/6c3yckfw.aspx)

我尝试了 PreviousPage.FindControl ，但我总是得到空值。

谢谢你的时间！

**编辑：**

避免使用 AjaxControlToolKit。如果您想偷懒并拖放甜蜜的 UI 元素，这很好，但让简单的事情正常工作只是一件令人头疼的事情！使用 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:38:20.907

我认为您必须使用[Page.PreviousPage](http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage.aspx#Y0)属性您可以将下拉值设置为

```
if (Page.PreviousPage != null)
{
   DropDownList ddl= (DropDownList)Page.PreviousPage.FindControl("cmboOptions$cmboOptions_TextBox");
   // You have an AjaxToolkit Combo Box, so you must cast it as
   AjaxToolKit.ComboBox ddl= (AjaxToolKit.ComboBox )Page.PreviousPage.FindControl("cmboOptions"); 
   if (ddl != null)
   {
      // do your work
   }
} 
```

在 msdn 上阅读有关[在 Asp.net 中跨页发布的更多信息](http://msdn.microsoft.com/en-us/library/ms178139.aspx#Y400)

**更新的答案：** 为了检查史蒂夫代码，我创建了一个带有下拉列表和一个按钮来回发的页面（目前我没有 ajaxtoolkit，所以我使用的是下拉列表）

```
<asp:DropDownList ID="ddl" runat="server"  >
    <asp:ListItem></asp:ListItem>
      <asp:ListItem Text="Option 1" Value="opt1"  > </asp:ListItem>
      <asp:ListItem Text="Option 2" Value="opt2"  ></asp:ListItem>
</asp:DropDownList>
<asp:Button ID="btnSubmit" runat="server" Text="Submit" 
    PostBackUrl="~/Default4.aspx" />
 // This code was written on Default5.aspx

 // Default4.aspx code behind
protected void Page_Load(object sender, EventArgs e)
{
    NameValueCollection nvc = Request.Form;
    string val = Request.Form["ddl"];
    string val2 = nvc["ddl"];
    // Both above statement returns the required result
} 
```

所以，我认为问题出在 Ajax 组合框上。（如果你没有犯任何错误）

**更新答案：** 问题是我们发布页面时更改了Ajax Combo box控件的ID。在下一页中，我们可以获得 ajax 组合框的 ID 为

**对于没有母版页的页面：** 如果您使用的是没有母版页的 aspx 页面，那么您可以获得 ajax 组合框的 ID 为

```
 //Ajax Combo Box ID format
     ComboBoxID + "$TextBox" 
     // so If I have a combo box with ID ComboBox1 it becomes
     ComboBox1$TextBox
     so we will get the value as
     string comboBoxvalue = Request.Form["ComboBox1$TextBox"];
                   or
     NameValueCollection nvc = Request.Form;
     string cmbvalue = nvc["ComboBox1$TextBox"]; 
```

**对于使用 MasterPages 的页面：**

```
 //Ajax Combo Box ID format
    "ctl00$" + ContentPlaceHolderID +"$" + ComboBoxID + "$TextBox"
    //I have a combox Box with ID ComboBox1 and ContentPlaceHolderID ContentPlaceHolder1
    so AjaxComboBox ID becomes ctl00$ContentPlaceHolder1$ComboBox1$TextBox

    string cmbvalue = nvc["ctl00$ContentPlaceHolder1$ComboBox1$TextBox"];

    // In your case
   // ComboxBox ID is cmboOptions  and ContentPlaceHolderID is MainContent
    // so your ID becomes
    ctl00$MainContent$cmboOptions$TextBox
    // so you will get the data as
     string cmbvalue = nvc[" ctl00$MainContent$cmboOptions$TextBox"]; 
```

# android - 如何在 android 中使用位图功能制作幻灯片

> ID：12011908
> 
> 赞同：1
> 
> 时间：2012-08-17T19:18:24.623
> 
> 标签：android, image, bitmap, slideshow

大家好，我已经厌倦了使用位图功能，我可以获取图像，但我只能在网格视图中显示它们。我想用幻灯片在图像视图中显示它们。请让我知道我是否可以用位图做到这一点。这是我的应用程序的代码，它位于`ScrollView`.

```
package com.example.sdcardimagessync;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.BitmapDrawable;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.Display;
import android.view.View;
import android.view.ViewGroup;
import android.view.Window;
import android.view.WindowManager;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.AdapterView.OnItemClickListener;

public class MainActivity extends Activity implements OnItemClickListener {

    /**
     * Grid view holding the images.
     */
    private GridView sdcardImages;
    /**
     * Image adapter for the grid view.
     */
    private ImageAdapter imageAdapter;
    /**
     * Display used for getting the width of the screen.
     */
    private Display display;

    /**
     * Creates the content view, sets up the grid, the adapter, and the click
     * listener.
     * 
     * @see android.app.Activity#onCreate(android.os.Bundle)
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Request progress bar
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setContentView(R.layout.activity_main);

        display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE))
                .getDefaultDisplay();

        setupViews();
        setProgressBarIndeterminateVisibility(true);
        loadImages();
    }

    /**
     * Free up bitmap related resources.
     */
    protected void onDestroy() {
        super.onDestroy();
        final GridView grid = sdcardImages;
        final int count = grid.getChildCount();
        ImageView v = null;
        for (int i = 0; i < count; i++) {
            v = (ImageView) grid.getChildAt(i);
            ((BitmapDrawable) v.getDrawable()).setCallback(null);
        }
    }

    /**
     * Setup the grid view.
     */
    private void setupViews() {
        sdcardImages = (GridView) findViewById(R.id.GridView1);
        sdcardImages.setNumColumns(display.getWidth() / 1000);
        sdcardImages.setClipToPadding(false);
        sdcardImages.setOnItemClickListener(MainActivity.this);
        imageAdapter = new ImageAdapter(getApplicationContext());
        sdcardImages.setAdapter(imageAdapter);
    }

    /**
     * Load images.
     */
    private void loadImages() {
        final Object data = getLastNonConfigurationInstance();
        if (data == null) {
            new LoadImagesFromSDCard().execute();
        } else {
            final LoadedImage[] photos = (LoadedImage[]) data;
            if (photos.length == 0) {
                new LoadImagesFromSDCard().execute();
            }
            for (LoadedImage photo : photos) {
                addImage(photo);
            }
        }
    }

    /**
     * Add image(s) to the grid view adapter.
     * 
     * @param value
     *            Array of LoadedImages references
     */
    private void addImage(LoadedImage... value) {
        for (LoadedImage image : value) {
            imageAdapter.addPhoto(image);
            imageAdapter.notifyDataSetChanged();
        }
    }

    /**
     * Save bitmap images into a list and return that list.
     * 
     * @see android.app.Activity#onRetainNonConfigurationInstance()
     */
    @Override
    public Object onRetainNonConfigurationInstance() {
        final GridView grid = sdcardImages;
        final int count = grid.getChildCount();
        final LoadedImage[] list = new LoadedImage[count];

        for (int i = 0; i < count; i++) {
            final ImageView v = (ImageView) grid.getChildAt(i);
            list[i] = new LoadedImage(
                    ((BitmapDrawable) v.getDrawable()).getBitmap());
        }

        return list;
    }

    /**
     * Async task for loading the images from the SD card.
     * 
     * @author Mihai Fonoage
     * 
     */
    class LoadImagesFromSDCard extends AsyncTask<Object, LoadedImage, Object> {

        /**
         * Load images from SD Card in the background, and display each image on
         * the screen.
         * 
         * @see android.os.AsyncTask#doInBackground(Params[])
         */
        @Override
        protected Object doInBackground(Object... params) {
            // setProgressBarIndeterminateVisibility(true);
            Bitmap bitmap = null;
            Bitmap newBitmap = null;
            Uri uri = null;

            // Set up an array of the Thumbnail Image ID column we want
            String[] projection = { MediaStore.Images.Thumbnails._ID };
            // Create the cursor pointing to the SDCard
            Cursor cursor = managedQuery(
                    MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
                    projection, // Which columns to return
                    null, // Return all rows
                    null, null);
            int columnIndex = cursor
                    .getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID);
            int size = cursor.getCount();
            // If size is 0, there are no images on the SD Card.
            if (size == 0) {
                // No Images available, post some message to the user
            }
            int imageID = 0;
            for (int i = 0; i < size; i++) {
                cursor.moveToPosition(i);
                imageID = cursor.getInt(columnIndex);
                uri = Uri.withAppendedPath(
                        MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, ""
                                + imageID);
                try {
                    bitmap = BitmapFactory.decodeStream(getContentResolver()
                            .openInputStream(uri));
                    if (bitmap != null) {
                        newBitmap = Bitmap.createScaledBitmap(bitmap, 500, 500,
                                true);
                        bitmap.recycle();
                        if (newBitmap != null) {
                            publishProgress(new LoadedImage(newBitmap));
                        }
                    }
                } catch (IOException e) {
                    // Error fetching image, try to recover
                }
            }
            cursor.close();
            return null;
        }

        /**
         * Add a new LoadedImage in the images grid.
         * 
         * @param value
         *            The image.
         */
        @Override
        public void onProgressUpdate(LoadedImage... value) {
            addImage(value);
        }

        /**
         * Set the visibility of the progress bar to false.
         * 
         * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
         */
        @Override
        protected void onPostExecute(Object result) {
            setProgressBarIndeterminateVisibility(false);
        }
    }

    /**
     * Adapter for our image files.
     * 
     * @author Mihai Fonoage
     * 
     */
    class ImageAdapter extends BaseAdapter {

        private Context mContext;
        private ArrayList<LoadedImage> photos = new ArrayList<LoadedImage>();

        public ImageAdapter(Context context) {
            mContext = context;
        }

        public void addPhoto(LoadedImage photo) {
            photos.add(photo);
        }

        public int getCount() {
            return photos.size();
        }

        public Object getItem(int position) {
            return photos.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            final ImageView imageView;
            if (convertView == null) {
                imageView = new ImageView(mContext);
            } else {
                imageView = (ImageView) convertView;
            }
            imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);
            imageView.setPadding(8, 8, 8, 8);
            imageView.setImageBitmap(photos.get(position).getBitmap());
            return imageView;
        }
    }

    /**
     * A LoadedImage contains the Bitmap loaded for the image.
     */
    private static class LoadedImage {
        Bitmap mBitmap;

        LoadedImage(Bitmap bitmap) {
            mBitmap = bitmap;
        }

        public Bitmap getBitmap() {
            return mBitmap;
        }
    }

    /**
     * When an image is clicked, load that image as a puzzle.
     */
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        int columnIndex = 0;
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(
                MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, projection,
                null, null, null);
        if (cursor != null) {
            columnIndex = cursor
                    .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToPosition(position);
            String imagePath = cursor.getString(columnIndex);

            FileInputStream is = null;
            BufferedInputStream bis = null;
            try {
                is = new FileInputStream(new File(imagePath));
                bis = new BufferedInputStream(is);
                Bitmap bitmap = BitmapFactory.decodeStream(bis);
                Bitmap useThisBitmap = Bitmap.createScaledBitmap(bitmap,
                        parent.getWidth(), parent.getHeight(), true);
                bitmap.recycle();
                // Display bitmap (useThisBitmap)
            } catch (Exception e) {
                // Try to recover
            } finally {
                try {
                    if (bis != null) {
                        bis.close();
                    }
                    if (is != null) {
                        is.close();
                    }
                    cursor.close();
                    projection = null;
                } catch (Exception e) {
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:25:10.563

您可以使用[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)。用 ImageViews 填充它并根据需要设置动画。

[编辑]

我不保证这会在没有一些调整的情况下工作，但沿着这些思路做的事情应该做你想要的。

所以，首先，将视图翻转器添加到 xml 布局中：

```
<ViewFlipper 
    android:id="@+id/image_flipper"
    android:layout_width="match_parent"
android:layout_height="match_parent" >
</ViewFlipper> 
```

获取对视图翻转器的引用

```
ViewFlipper imageFlipper = (ViewFlipper)findViewById( R.id.image_flipper ); 
```

将图像视图添加到鳍状肢

```
for (LoadedImage photo : photos) {//or something like this
    ImageView image = new ImageView ( getApplicationContext() );
    image.setImageBitmap( photo.getBitmap() );
    imageFlipper.addView( image );
} 
```

设置鳍状肢属性并开始

```
imageFlipper.setFlipInterval( 5000 ); //5s intervals
imageFlipper.startFlipping(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:47:57.977

您可以将此[Customizable SlideShow 组件用于 Android 平台](http://code.google.com/p/android-slideshow/)。转到源代码并从那里获取下载源代码，它将对您的工作有很大帮助。

# android - ListView.addFooterView(v) 不显示

> ID：12011909
> 
> 赞同：4
> 
> 时间：2012-08-17T19:18:33.247
> 
> 标签：android, android-layout

我在布局内声明了一个 ListView。当我 addFooterView(v) 它不显示。可能的原因是什么？ListView 或我的适配器中是否有一些设置可以立即显示？它最终会显示，但只有在重新初始化视图、适配器和所有之后才会显示。

更新：似乎重置适配器最终使它出现......显然不是我每次调用 addFooterView(v) 时都应该做的事情。

包含 ListView 的视图位于由 PageViewer 维护的视图内，因此不确定这是否会影响这一点。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-17T19:30:25.760

在设置适配器之前添加页脚视图是我们无法看到您的代码时唯一可以复制的内容。

# visual-studio-2012 - 从 VS 2012 发布时出现奇怪的访问被拒绝错误

> ID：12011912
> 
> 赞同：0
> 
> 时间：2012-08-17T19:19:02.327
> 
> 标签：visual-studio-2012

Visual Studio 2012 FTP 发布错误

VS2010 一切正常，但从 VS2012 开始，使用完全相同的 FTP 发布配置，我得到每个正在发布的文件的访问被拒绝（550）。

无法弄清楚.. 使用 FTP 发布，我提供了用户名/密码 .. 和 FTP 站点... 我有完全访问权限，并且该过程连接正常，但随后给了我每个文件的错误。如果我设置“删除现有文件”，它会给我一个错误，服务器上的每个文件都拒绝访问。所以我知道它至少可以看到服务器（并看到每个文件）。

奇怪的是，使用相同的用户名/密码和与 VS2010 完全相同的 FTP 发布配置，它工作正常......

有什么建议么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:47:14.920

我有同样的问题....尚未解决，唯一的解决方案是将文件发布到您的桌面，然后使用一个 ftp 程序上传到您的站点....我不知道为什么 Visual Studio 上的 FTP 还不能正常工作！

# android - 无法在网络共享接口上捕获数据包

> ID：12011913
> 
> 赞同：2
> 
> 时间：2012-08-17T19:19:09.327
> 
> 标签：android, networking, wireshark, tethering

我正在使用 android 手机 USB 网络共享功能从我的 Windows 7 PC 浏览互联网。我运行 wireshark 工具以通过系留接口捕获数据包。我使用菜单捕获 -> 选项 -> 调用接口上的捕获选择了所有接口选项当我执行 ipconfig /all 时，我看到带有 ipv4 地址的 rndis 接口。

但问题是我无法在wireshark 中看到任何数据包。或者，我还下载了 tcpdump for window 并且命令 tcpdump -i any is not working 抛出消息“错误打开适配器”

我需要捕获通过 PC 中的系留接口发送和接收的数据包的方法。谢谢

# c++ - Doxygen 没有显示文档中的成员函数（包括构造函数）是如何从其他类中调用的。？

> ID：12011916
> 
> 赞同：5
> 
> 时间：2012-08-17T19:19:19.007
> 
> 标签：c++, uml, doxygen

Doxygen 没有显示文档中的成员函数（包括构造函数）是如何从其他类中调用的。?

我使用 EXTRACT_ALL 选项设置“自动文档”。我设置了 CALL_GRAPH 选项来获取调用引用。此外，我确实启用了 graphviz/dot（输出）选项。

这是我的选择日志：

```
#--------------------------------------------------------------------------- 
# Project related configuration options 
#--------------------------------------------------------------------------- 
DOXYFILE_ENCODING = UTF-8 
PROJECT_NAME = XXXXX 
PROJECT_NUMBER = 
PROJECT_BRIEF = 
PROJECT_LOGO = 
OUTPUT_DIRECTORY = C:/Projects/doxygen 
CREATE_SUBDIRS = NO 
OUTPUT_LANGUAGE = English 
BRIEF_MEMBER_DESC = YES 
REPEAT_BRIEF = YES 
ABBREVIATE_BRIEF = "The $name class" \ 
"The $name widget" \ 
"The $name file" \ 
is \ 
provides \ 
specifies \ 
contains \ 
represents \ 
a \ 
an \ 
the 
ALWAYS_DETAILED_SEC = NO 
INLINE_INHERITED_MEMB = NO 
FULL_PATH_NAMES = YES 
STRIP_FROM_PATH = 
STRIP_FROM_INC_PATH = 
SHORT_NAMES = NO 
JAVADOC_AUTOBRIEF = NO 
QT_AUTOBRIEF = NO 
MULTILINE_CPP_IS_BRIEF = NO 
INHERIT_DOCS = YES 
SEPARATE_MEMBER_PAGES = NO 
TAB_SIZE = 4 
ALIASES = 
TCL_SUBST = 
OPTIMIZE_OUTPUT_FOR_C = NO 
OPTIMIZE_OUTPUT_JAVA = NO 
OPTIMIZE_FOR_FORTRAN = NO 
OPTIMIZE_OUTPUT_VHDL = NO 
EXTENSION_MAPPING = 
MARKDOWN_SUPPORT = YES 
AUTOLINK_SUPPORT = YES 
BUILTIN_STL_SUPPORT = NO 
CPP_CLI_SUPPORT = NO 
SIP_SUPPORT = NO 
IDL_PROPERTY_SUPPORT = YES 
DISTRIBUTE_GROUP_DOC = NO 
SUBGROUPING = YES 
INLINE_GROUPED_CLASSES = NO 
INLINE_SIMPLE_STRUCTS = NO 
TYPEDEF_HIDES_STRUCT = NO 
SYMBOL_CACHE_SIZE = 0 
LOOKUP_CACHE_SIZE = 0 

#--------------------------------------------------------------------------- 
# Build related configuration options 
#--------------------------------------------------------------------------- 
EXTRACT_ALL = YES 
EXTRACT_PRIVATE = NO 
EXTRACT_PACKAGE = NO 
EXTRACT_STATIC = NO 
EXTRACT_LOCAL_CLASSES = YES 
EXTRACT_LOCAL_METHODS = NO 
EXTRACT_ANON_NSPACES = NO 
HIDE_UNDOC_MEMBERS = NO 
HIDE_UNDOC_CLASSES = NO 
HIDE_FRIEND_COMPOUNDS = NO 
HIDE_IN_BODY_DOCS = NO 
INTERNAL_DOCS = NO 
CASE_SENSE_NAMES = NO 
HIDE_SCOPE_NAMES = NO 
SHOW_INCLUDE_FILES = YES 
FORCE_LOCAL_INCLUDES = NO 
INLINE_INFO = YES 
SORT_MEMBER_DOCS = YES 
SORT_BRIEF_DOCS = NO 
SORT_MEMBERS_CTORS_1ST = NO 
SORT_GROUP_NAMES = NO 
SORT_BY_SCOPE_NAME = NO 
STRICT_PROTO_MATCHING = NO 
GENERATE_TODOLIST = YES 
GENERATE_TESTLIST = YES 
GENERATE_BUGLIST = YES 
GENERATE_DEPRECATEDLIST= YES 
ENABLED_SECTIONS = 
MAX_INITIALIZER_LINES = 28 
SHOW_USED_FILES = YES 
SHOW_FILES = YES 
SHOW_NAMESPACES = YES 
FILE_VERSION_FILTER = 
LAYOUT_FILE = 
CITE_BIB_FILES = 

#--------------------------------------------------------------------------- 
# configuration options related to warning and progress messages 
#--------------------------------------------------------------------------- 
QUIET = NO 
WARNINGS = YES 
WARN_IF_UNDOCUMENTED = YES 
WARN_IF_DOC_ERROR = YES 
WARN_NO_PARAMDOC = NO 
WARN_FORMAT = "$file:$line: $text" 
WARN_LOGFILE = 

#--------------------------------------------------------------------------- 
# configuration options related to the input files 
#--------------------------------------------------------------------------- 
INPUT = C:/Projects/XXXXX 
INPUT_ENCODING = UTF-8 
FILE_PATTERNS = *.c \ 
*.cc \ 
*.cxx \ 
*.cpp \ 
*.c++ \ 
*.d \ 
*.java \ 
*.ii \ 
*.ixx \ 
*.ipp \ 
*.i++ \ 
*.inl \ 
*.h \ 
*.hh \ 
*.hxx \ 
*.hpp \ 
*.h++ \ 
*.idl \ 
*.odl \ 
*.cs \ 
*.php \ 
*.php3 \ 
*.inc \ 
*.m \ 
*.markdown \ 
*.md \ 
*.mm \ 
*.dox \ 
*.py \ 
*.f90 \ 
*.f \ 
*.for \ 
*.vhd \ 
*.vhdl 
RECURSIVE = YES 
EXCLUDE = 
EXCLUDE_SYMLINKS = NO 
EXCLUDE_PATTERNS = 
EXCLUDE_SYMBOLS = 
EXAMPLE_PATH = 
EXAMPLE_PATTERNS = * 
EXAMPLE_RECURSIVE = NO 
IMAGE_PATH = 
INPUT_FILTER = 
FILTER_PATTERNS = 
FILTER_SOURCE_FILES = NO 
FILTER_SOURCE_PATTERNS = 

#--------------------------------------------------------------------------- 
# configuration options related to source browsing 
#--------------------------------------------------------------------------- 
SOURCE_BROWSER = NO 
INLINE_SOURCES = NO 
STRIP_CODE_COMMENTS = YES 
REFERENCED_BY_RELATION = NO 
REFERENCES_RELATION = NO 
REFERENCES_LINK_SOURCE = YES 
USE_HTAGS = NO 
VERBATIM_HEADERS = YES 

#--------------------------------------------------------------------------- 
# configuration options related to the alphabetical class index 
#--------------------------------------------------------------------------- 
ALPHABETICAL_INDEX = YES 
COLS_IN_ALPHA_INDEX = 5 
IGNORE_PREFIX = 

#--------------------------------------------------------------------------- 
# configuration options related to the HTML output 
#--------------------------------------------------------------------------- 
GENERATE_HTML = YES 
HTML_OUTPUT = html 
HTML_FILE_EXTENSION = .html 
HTML_HEADER = 
HTML_FOOTER = 
HTML_STYLESHEET = 
HTML_EXTRA_STYLESHEET = 
HTML_EXTRA_FILES = 
HTML_COLORSTYLE_HUE = 220 
HTML_COLORSTYLE_SAT = 100 
HTML_COLORSTYLE_GAMMA = 85 
HTML_TIMESTAMP = YES 
HTML_DYNAMIC_SECTIONS = NO 
HTML_INDEX_NUM_ENTRIES = 100 
GENERATE_DOCSET = NO 
DOCSET_FEEDNAME = "Doxygen generated docs" 
DOCSET_BUNDLE_ID = org.doxygen.Project 
DOCSET_PUBLISHER_ID = org.doxygen.Publisher 
DOCSET_PUBLISHER_NAME = Publisher 
GENERATE_HTMLHELP = NO 
CHM_FILE = 
HHC_LOCATION = 
GENERATE_CHI = NO 
CHM_INDEX_ENCODING = 
BINARY_TOC = NO 
TOC_EXPAND = NO 
GENERATE_QHP = NO 
QCH_FILE = 
QHP_NAMESPACE = org.doxygen.Project 
QHP_VIRTUAL_FOLDER = doc 
QHP_CUST_FILTER_NAME = 
QHP_CUST_FILTER_ATTRS = 
QHP_SECT_FILTER_ATTRS = 
QHG_LOCATION = 
GENERATE_ECLIPSEHELP = NO 
ECLIPSE_DOC_ID = org.doxygen.Project 
DISABLE_INDEX = NO 
GENERATE_TREEVIEW = NO 
ENUM_VALUES_PER_LINE = 0 
TREEVIEW_WIDTH = 250 
EXT_LINKS_IN_WINDOW = NO 
FORMULA_FONTSIZE = 10 
FORMULA_TRANSPARENT = YES 
USE_MATHJAX = NO 
MATHJAX_RELPATH = cdn.mathjax.org/mathjax/… 
MATHJAX_EXTENSIONS = 
SEARCHENGINE = YES 
SERVER_BASED_SEARCH = NO 

#--------------------------------------------------------------------------- 
# configuration options related to the LaTeX output 
#--------------------------------------------------------------------------- 
GENERATE_LATEX = YES 
LATEX_OUTPUT = latex 
LATEX_CMD_NAME = latex 
MAKEINDEX_CMD_NAME = makeindex 
COMPACT_LATEX = NO 
PAPER_TYPE = a4 
EXTRA_PACKAGES = 
LATEX_HEADER = 
LATEX_FOOTER = 
PDF_HYPERLINKS = YES 
USE_PDFLATEX = YES 
LATEX_BATCHMODE = NO 
LATEX_HIDE_INDICES = NO 
LATEX_SOURCE_CODE = NO 
LATEX_BIB_STYLE = plain 

#--------------------------------------------------------------------------- 
# configuration options related to the RTF output 
#--------------------------------------------------------------------------- 
GENERATE_RTF = NO 
RTF_OUTPUT = rtf 
COMPACT_RTF = NO 
RTF_HYPERLINKS = NO 
RTF_STYLESHEET_FILE = 
RTF_EXTENSIONS_FILE = 

#--------------------------------------------------------------------------- 
# configuration options related to the man page output 
#--------------------------------------------------------------------------- 
GENERATE_MAN = NO 
MAN_OUTPUT = man 
MAN_EXTENSION = .3 
MAN_LINKS = NO 

#--------------------------------------------------------------------------- 
# configuration options related to the XML output 
#--------------------------------------------------------------------------- 
GENERATE_XML = NO 
XML_OUTPUT = xml 
XML_SCHEMA = 
XML_DTD = 
XML_PROGRAMLISTING = YES 

#--------------------------------------------------------------------------- 
# configuration options for the AutoGen Definitions output 
#--------------------------------------------------------------------------- 
GENERATE_AUTOGEN_DEF = NO 

#--------------------------------------------------------------------------- 
# configuration options related to the Perl module output 
#--------------------------------------------------------------------------- 
GENERATE_PERLMOD = NO 
PERLMOD_LATEX = NO 
PERLMOD_PRETTY = YES 
PERLMOD_MAKEVAR_PREFIX = 

#--------------------------------------------------------------------------- 
# Configuration options related to the preprocessor 
#--------------------------------------------------------------------------- 
ENABLE_PREPROCESSING = YES 
MACRO_EXPANSION = NO 
EXPAND_ONLY_PREDEF = NO 
SEARCH_INCLUDES = YES 
INCLUDE_PATH = 
INCLUDE_FILE_PATTERNS = 
PREDEFINED = 
EXPAND_AS_DEFINED = 
SKIP_FUNCTION_MACROS = YES 

#--------------------------------------------------------------------------- 
# Configuration::additions related to external references 
#--------------------------------------------------------------------------- 
TAGFILES = 
GENERATE_TAGFILE = 
ALLEXTERNALS = NO 
EXTERNAL_GROUPS = YES 
PERL_PATH = /usr/bin/perl 

#--------------------------------------------------------------------------- 
# Configuration options related to the dot tool 
#--------------------------------------------------------------------------- 
CLASS_DIAGRAMS = YES 
MSCGEN_PATH = 
HIDE_UNDOC_RELATIONS = YES 
HAVE_DOT = YES 
DOT_NUM_THREADS = 0 
DOT_FONTNAME = Helvetica 
DOT_FONTSIZE = 10 
DOT_FONTPATH = 
CLASS_GRAPH = YES 
COLLABORATION_GRAPH = YES 
GROUP_GRAPHS = YES 
UML_LOOK = NO 
UML_LIMIT_NUM_FIELDS = 10 
TEMPLATE_RELATIONS = NO 
INCLUDE_GRAPH = YES 
INCLUDED_BY_GRAPH = YES 
CALL_GRAPH = YES 
CALLER_GRAPH = YES 
GRAPHICAL_HIERARCHY = YES 
DIRECTORY_GRAPH = YES 
DOT_IMAGE_FORMAT = png 
INTERACTIVE_SVG = NO 
DOT_PATH = 
DOTFILE_DIRS = 
MSCFILE_DIRS = 
DOT_GRAPH_MAX_NODES = 50 
MAX_DOT_GRAPH_DEPTH = 0 
DOT_TRANSPARENT = NO 
DOT_MULTI_TARGETS = NO 
GENERATE_LEGEND = YES 
DOT_CLEANUP = YES 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T21:42:59.123

改变

```
SOURCE_BROWSER = NO 
INLINE_SOURCES = NO 
STRIP_CODE_COMMENTS = YES 
REFERENCED_BY_RELATION = NO 
REFERENCES_RELATION = NO 
REFERENCES_LINK_SOURCE = YES 
USE_HTAGS = NO 
VERBATIM_HEADERS = YES 
```

到

```
SOURCE_BROWSER = YES
INLINE_SOURCES = YES
STRIP_CODE_COMMENTS = YES 
REFERENCED_BY_RELATION = YES
REFERENCES_RELATION = YES
REFERENCES_LINK_SOURCE = YES 
USE_HTAGS = NO 
VERBATIM_HEADERS = YES 
```

* * *

但是，您真正需要更改的主要是 REFERENCED_BY_RELATION 和 REFERENCES_RELATION。

这是关于这两个选项的文档：

**REFERENCED_BY_RELATION** 如果 REFERENCED_BY_RELATION 标签设置为 YES，那么对于每个文档化函数，所有引用它的文档化函数都将被列出。

**REFERENCES_RELATION** If the REFERENCES_RELATION tag is set to YES then for each documented function all documented entities called/used by that function will be listed.

# xsd - XML 中基于输入的标签

> ID：12011917
> 
> 赞同：0
> 
> 时间：2012-08-17T19:19:29.130
> 
> 标签：xsd

谁能帮帮我吗 ！！有什么方法可以在 XSD 中定义基于输入的标签来生成 XML？

例如：

```
<Element1>Hi</Element1>
<Element2>Hello</Element2> 
```

如果元素 1 中有 Hi，则元素 2 标记是必需的，否则它是可选的。

我知道这有很多线程，但我无法正确理解。

~阿迪亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:23:34.377

There is no way to support this in XSD 1.0\. You can however use the [http://www.schematron.com/](http://www.schematron.com/) for enforcing these kind of rules.

If you can use XSD 1.1 then look at [co-occurence constraints](http://www.ibm.com/developerworks/library/x-xml11pt2/)

# jquery - 使用 jQuery 设置选择值不起作用

> ID：12011919
> 
> 赞同：0
> 
> 时间：2012-08-17T19:19:48.567
> 
> 标签：jquery

所有，我有一个选择框的以下 HTML 代码：

```
<select name="display_dj_entries" id="display_dj_entries">
<option value="original">Select a DJ</option>
<option value="1">1</option>
</select> 
```

当我的页面上的另一个选择框被更改时，我试图将此值设置回原始值。我有以下 jQuery 来执行此操作：

```
jQuery(document).on('change','#display_gear_entries',function(event){
    var selected_value = jQuery(this).val();
    jQuery("#display_dj_entries option[value='original']").attr("selected", "selected");
}); 
```

它没有将值设置回原始值，而是将其设置为 1。我在这方面做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:21:25.777

试试这个：

```
jQuery("#display_dj_entries").prop("selectedIndex", 0); 
```

**[演示](http://jsfiddle.net/8QFPp/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:43:34.540

甚至更短：

> $('#display_dj_entries').val('original');

这假定未选择选项的 value 属性是“original”。

# javascript - jQuery 1.8 中的 pipe() 和 then() 文档与现实

> ID：12011925
> 
> 赞同：30
> 
> 时间：2012-08-17T19:20:28.630
> 
> 标签：javascript, jquery, jquery-deferred

## 更新：这个问题现在已经过时了，因为文档是准确的并且是最新的。

我一直在探索 jQuery Deferred/Promise API，但我对 jQuery 文档`pipe()`和`then()`哲学文档之间的差异感到非常困惑。我发现 pipe() 只是 jQuery 1.8 的 then() 的别名。

来自 jQuery 源代码：

```
// Keep pipe for back-compat
promise.pipe = promise.then; 
```

然而，文档是完全不同的`pipe()`，`then()`因为它们被认为具有完全不同的用途。

说明`then()`：

> 描述：添加在解析或拒绝 Deferred 对象时要调用的处理程序。

说明`pipe()`：

> 描述：过滤和/或链接延迟的实用方法。

我知道从历史上看，它们的行为略有不同，但是在[pipe 的整个文档](http://api.jquery.com/deferred.pipe/)或[then 的文档中](http://api.jquery.com/deferred.then/)，甚至没有说这两个函数现在做的事情完全相同。

所以，这是我的两部分问题：

1.  为什么 jQuery 1.8 之间的文档`pipe()`有所`then()`不同？
2.  为什么`then()`返回一个**新**的延迟对象？这种行为完全没有记录（[文档只是说它返回一个 Deferred，而不是它是一个新的](http://api.jquery.com/deferred.then/)）。我知道这样做是有用的（即实现`pipe()`'s 的所有功能），但从哲学上讲，为什么会这样呢？`then()`鉴于（附加处理程序）的描述，这是不必要的。

**更新**

我什至会说这些`then()`文档具有误导性和不准确：

> 由于 deferred.then**返回延迟对象**，延迟对象的其他方法可以链接到这个，包括附加的 .then() 方法。

也许它只是含糊不清，但它意味着它返回您调用`then()`链接的延迟对象，而实际上它返回一个全新的对象......

**再次更新**

似乎文档只是错误/过时！所以这回答了为什么文档没有提到它们是同一件事。但是，我的第二个问题仍然存在。原因是简单地`then()`返回一个**新**的延迟，以便它`pipe()`可以等效吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-17T19:25:09.720

jQuery 1.8 的文档更新尚未上线。

根据[最近的这篇博文](http://blog.jquery.com/2012/08/16/jquery-1-8-box-sizing-width-csswidth-and-outerwidth/)：

> 我们正在为 1.8 的所有更改更新 API 文档，但现在您可以参考 [jQuery 1.8 公告](http://blog.jquery.com/2012/08/09/jquery-1-8-released/)中的更改日志以查看更改的内容。

*更新：*是的，`then()`返回一个 new`Deferred`因为[它等同于`pipe()`now](http://bugs.jquery.com/ticket/11010)。我非常有信心文档更新将很快澄清这一点。

*进一步更新完整性：*文档最近更新，现在说[pipe()](http://api.jquery.com/deferred.pipe/)：

> **弃用通知：**从 jQuery 1.8 开始，该`deferred.pipe()`方法已弃用。`deferred.then()`应该使用替代它的方法。

对于[then()](http://api.jquery.com/deferred.then/)：

> **在 jQuery 1.8 之前**，参数可以是函数或函数数组。
> 
> [...]
> 
> **从 jQuery 1.8 开始**，该`deferred.then()`方法返回一个新的 Promise，它可以通过函数过滤 deferred 的状态和值，替换现在已弃用的`deferred.pipe()`方法。`doneFilter`and`failFilter`函数过滤原始 deferred 的已解决/已拒绝状态和值。 该`progressFilter`函数过滤对原始延迟`notify`或`notifyWith` 方法的任何调用。这些过滤器函数可以返回一个新值以传递给Promise`.done()`或`.fail()`回调，或者它们可以返回另一个可观察对象（Deferred、Promise 等），它将其已解决/拒绝状态和值传递给 Promise 的回调。如果使用的过滤器功能是`null`, 或未指定，promise 将被解析或拒绝，并使用与原始值相同的值。

# perl - Perl 类使用其父类的方法

> ID：12011926
> 
> 赞同：0
> 
> 时间：2012-08-17T19:20:40.407
> 
> 标签：perl, class, inheritance

我有这个 perl 脚本

```
#!/usr/bin/perl

use lib "/home/gdanko/test/perl";
use Main;

Plugins::Plug1::devices; 
```

模块 Main 看起来像这样

```
package Main;

use lib "/home/gdanko/test/perl";
use Plugins::Plug1;
use DBI;

@ISA = ('Exporter');
@EXPORT = qw();
@EXPORT_OK = qw($dbh &load_devices);

our $dbh = DBI->connect("dbi:SQLite:dbname=/home/gdanko/test/mydb.db", "", "");

sub load_devices {
    my $sth = $dbh->prepare("SELECT * FROM devices");
    $sth->execute;
    my $devices = $dbh->selectall_hashref($sth, "id");
    return $devices;
}
1; 
```

模块 Plug1 看起来像这样

```
package Plug1;

use lib "/home/gdanko/test/perl";
use Data::Dumper;
use Main qw(&load_devices);

@ISA = ('Exporter');
@EXPORT = ();
@EXPORT_OK = qw(&devices);

sub devices {
    print "module plug1\n";
    my $devices = Main::load_devices;
    print Dumper(\$devices->{maguro});
}
1; 
```

当我从主脚本执行 Plugins::Plug::devices 时，我得到以下回报： gdanko@apollo:~/test$ ./script.pl module plug1 $VAR1 = \undef;

如何使 Main 中的方法和变量可用于 Plug1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:27:01.140

您将模块描述为`Plugins::Plug1`、`Plugins::Plug`和。您必须清楚它是什么，并且模块必须位于以语句开头的文件中`Plug1``plug1``Plugins::Plug1``Plugins/Plug1.pm``package Plugins::Plug1`

从您的问题中不清楚出了什么问题。应该发生的是 Perl 会告诉你`Plugins::Plug1::devices`不存在，因为你的`package`陈述不匹配。但看起来你说的`Main::load_devices`是返回`undef`而不是哈希引用。

看起来可能正在调用子例程，您需要调试它们。在您的代码中添加一些`print`语句以查看被调用的内容，但最重要的是您必须在每个文件`use strict`的`use warnings`顶部放置。这将揭示许多简单的错误。

另请注意，`Exporter`将模块中的符号导出到调用包中，如果您打算始终使用其完全限定名称调用子例程，则没有必要这样做。如果您使用`Exporter`，您可以在调用中省略包名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:33:21.613

`Plugins::Plug1`必须声明它“是一个” `Main`（提示：就像他们都声明他们与 . 有一个“是一个”关系`Exporter`）。然后这些方法将立即可用。但是，如果您询问如何使变量对子类“可见” ，则应阅读有关对象的 perldoc（以[perlobj 开头）。](http://perldoc.perl.org/perlobj.html)你不能也不*应该*。

我认为您正在考虑标准 OO，并且包中的变量代表对象的成员。最常见的实现是祝福散列，其中成员是散列中的命名值。

# r - ggplot2 - 有没有办法在重用几何图层的同时覆盖全局美学映射

> ID：12011927
> 
> 赞同：10
> 
> 时间：2012-08-17T19:20:42.297
> 
> 标签：r, ggplot2

通过将 ggplot() 对象分配给变量，可以轻松地重用该对象并制作具有几何图层变化的绘图的多个版本，而无需为每个绘图编写冗余代码。但是，我想知道是否有办法在交换全局美学映射的同时重用几何图层。

一个用例是我想制作几个具有相同几何表示的图，但想换出映射到其中一个维度的变量。另一个用例是我想制作两个图，其中数据来自两个不同的数据框。

解决此问题的直观方法是 1) 将几何图层的组合保存到变量而不分配 ggplot() 对象或 2) 通过添加另一个变量来覆盖变量中现有 ggplot() 对象的数据和美学ggplot() 对象。做这些事情中的任何一个都会导致错误（对于 1-“二元运算符的非数字参数，对于 2-“不知道如何将 o 添加到绘图中”）。

例如，假设在下面的图中，我想重新使用 gg 变量，但将 x 变量重新映射到数据框中的其他内容：

```
 dsamp <- diamonds[sample(nrow(diamonds), 1000), ]
  gg <- 
    (ggplot(data = dsamp, aes(x = carat, y = price, color = clarity))
     + geom_point()
     + facet_wrap(~ cut))
  print(gg) 
```

在实践中，绘图定义的长度可能远远超过 3 行，这就是为什么这开始成为代码维护的烦恼。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-17T21:02:54.307

交换与美学相关的变量和与绘图相关的数据都很简单。使用`gg`您在问题中定义的，单独使用`aes`来改变美学：

```
gg + aes(x=table, y=depth) 
```

要更改用于绘图的数据，请使用`%+%`运算符。

```
dsamp2 <- head(diamonds, 100)
gg %+% dsamp2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T19:56:04.413

就像joran提到的那样，我猜......但是：

您可以做两件事之一，编辑 ggplot2 对象（坏主意）或将绘图包装在一个函数中。

让我们使用以下数据和绘图调用：

```
dat <- data.frame(x=1:10, y=10:1, z=1, a=letters[1:2], b=letters[3:4])

# p <- ggplot(dat, aes_string(x=xvar, y=yvar, color=colorvar)) + geom_point() 
```

请注意，我使用`aes_string`了所以我可以传递变量而不是列名。

```
xvar <- 'y'
yvar <- 'z'
colorvar <- 'a'

p <- ggplot(dat, aes_string(x=xvar, y=yvar, color=colorvar)) + geom_point() 
```

的结构`p`如下，我将把它留给你来整理编辑它。相反，将 ggplot 包装在一个函数中：

```
plotfun <- function(DF, xvar, yvar, colorvar) {
  ggplot(DF, aes_string(x=xvar, y=yvar, color=colorvar)) + geom_point()
}

p <- plotfun(dat, 'z', 'x', 'a')
p 
```

* * *

```
str(p)

 List of 8
     $ data       :'data.frame':    10 obs. of  5 variables:
      ..$ x: int [1:10] 1 2 3 4 5 6 7 8 9 10
      ..$ y: int [1:10] 10 9 8 7 6 5 4 3 2 1
      ..$ z: num [1:10] 1 1 1 1 1 1 1 1 1 1
      ..$ a: chr [1:10] "a" "b" "a" "b" ...
      ..$ b: chr [1:10] "c" "d" "c" "d" ...
     $ layers     :List of 1
      ..$ :Classes 'proto', 'environment' <environment: 0x34d5628> 
     $ scales     :Reference class 'Scales' [package "ggplot2"] with 1 fields
      ..$ scales: list()
      ..and 20 methods, of which 9 are possibly relevant:
      ..  add, clone, find, get_scales, has_scale, initialize, input, n, non_position_scales
     $ mapping    :List of 3
      ..$ x     : symbol y
      ..$ y     : symbol x
      ..$ colour: symbol a
     $ options    :List of 1
      ..$ labels:List of 3
      .. ..$ x     : chr "z"
      .. ..$ y     : chr "x"
      .. ..$ colour: chr "a"
     $ coordinates:List of 1
      ..$ limits:List of 2
      .. ..$ x: NULL
      .. ..$ y: NULL
      ..- attr(*, "class")= chr [1:2] "cartesian" "coord"
     $ facet      :List of 1
      ..$ shrink: logi TRUE
      ..- attr(*, "class")= chr [1:2] "null" "facet"
     $ plot_env   :<environment: R_GlobalEnv> 
     - attr(*, "class")= chr "ggplot" 
```

# batch-file - 批处理程序复制到另一个文件夹并从复制的文件中创建一个文本文件

> ID：12011931
> 
> 赞同：0
> 
> 时间：2012-08-17T19:21:13.890
> 
> 标签：batch-file, cmd

我需要制作一个批处理程序，该程序将复制我在程序中告诉它的文件夹目标中的所有文件，并在文本文件中列出该文件夹中的所有文件，以便我正在构建的程序可以读取文本文件。我有批处理程序已经将所有文件复制到我需要的文件夹中，剩下的就是让它制作文本文件。

这是我现在拥有的

```
@echo off
setlocal
set source=c:\My Folder 
set dest=C:\Copied folder
pushd "%source%"
for /f "tokens=*" %%a in ('dir /b /a-d /s 2^>NUL') do copy "%%a" "%dest%
popd 
```

出于隐私原因，我更改了源和目标位置。我只需要知道我需要在该行中放入什么以及在哪里将告诉它读取它复制的所有文件并将它们放入一个文本文件中。

先谢谢了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:57:35.413

这是一个例子。该`list`变量存储复制文件列表的文件路径。

```
@echo off
setlocal
set source=c:\My Folder 
set dest=C:\Copied folder
set list=c:\copied files.txt
pushd "%source%"
echo>nul 2>"%list%"
for /f "tokens=*" %%a in ('dir /b /a-d /s 2^>NUL') do (
  echo %%~dpa%%~nxa >>"%list%"
  copy "%%a" "%dest%"
)
popd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:27:59.527

只需添加...

```
DIR /b /a-d "%dest%" > copied_files.txt 
```

...在原始脚本的末尾。

**编辑：**`pushd`我对/命令有点困惑`popd`，我以前见过这些，但我从未使用过它们。现在在[ss64](http://ss64.com/nt/pushd.html)上阅读有关它的信息，我建议您删除这些并将路径放入`FOR`'`DIR`命令中。所以它像这样组合在一起：

```
@echo off
setlocal
set source=c:\My Folder
set dest=C:\Copied folder
for /f "tokens=*" %%a in ('dir /b /a-d /s "%source%" 2^>NUL') do copy "%%a" "%dest%
dir /b /a-d "%dest%" > copied_files.txt 
```

# php - 在 MVC 的视图中最小化 PHP 逻辑

> ID：12011933
> 
> 赞同：1
> 
> 时间：2012-08-17T19:21:20.523
> 
> 标签：php, html, model-view-controller

我有一些 html 代码，其中包含一些 php 变量，它描述了我的搜索结果中单个条目的内容（例如图片、姓名、共同朋友的数量等）——在下面的代码中这被称为 search_results_v.php。我有一个数组，其中包含来自数据库的多条记录，并且对于每一条记录，我都会创建一个搜索结果条目。我构建程序的方式是 MVC，所以 html 代码是视图，我有一个 php 控制器。

但是，我有一个网站模板，并希望在此模板中包含我的搜索结果。这可以通过在此网页的适当部分调用我的控制器轻松解决，但我想让我的应用程序让控制器控制一切！在我刚才提到的情况下，视图正在调用控制器，但我想要一个像下面这样的设置，我只是在我的控制器中“包含”网页。

**如何在网页中呈现我的搜索结果，同时最大限度地减少其中的 php 逻辑量？我正在考虑这样做的一种方法是将所有搜索结果的所有 html 代码存储在一个 php 字符串变量中，然后在我的网页中引用这个变量。如何将 html 代码存储在该变量中？**

```
// Generates my search result box - Fill in the profile picture, the name and the number of mutual friends

    foreach ($resultsInfo as $entry) {
        $uid      = $entry['uid'];
        $pic_link = $entry['pic_square'];
        $name     = $entry['name'];
        $mfCount  = $entry['mutual_friend_count'];
        include('searchresults_v.php');
    } 
```

编辑：好的，也许我想要的并不是一个 MVC。我试图尽可能多地将实际的后端编码从界面中分离出来，以便更熟练的人可以进来设计界面。我基本上想生成所有动态数据，并在我的 html 文件中添加一些占位符，以便内容可以直接插入。我不希望其中有任何逻辑来混淆可能只有网页设计经验的人.

让我知道我应该将标题更改为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T19:31:33.570

在 MVC 中，视图总是可以包含循环和条件语句。基本思想是不在视图中实现查询/业务逻辑，这应该由模型完成

在你的情况下，你应该架构的东西，恕我直言，是这样的：

1.  控制器调用一个模型，该模型生成所有必需的信息并将其格式化为数组、json 字符串或类对象，然后将其传递回控制器。

2.  控制器将这些数据连接到视图中。视图循环遍历 array/json/object 并以页面需要显示的任何格式显示内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:47:21.027

如果您想在没有 CodeIgniter、CakePHP、Symfony 等框架的情况下继续前进，您可以查看 Smarty。它非常易于使用，并使模板非常易读。你可以最小化逻辑，但如果你需要它，它会给你足够的空间来放置逻辑。

[http://www.smarty.net/](http://www.smarty.net/)

[http://www.smarty.net/syntax_comparison](http://www.smarty.net/syntax_comparison)

使用 smarty，您可以将生成模板的文件视为您的控制器/视图。执行所有逻辑，收集所有数据等，然后将其传递给 smarty 模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:28:36.123

您可以在模板中包含您的视图吗？您可以将视图的文件名传递给模板，并将其包含在模板中间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T08:50:45.040

海

您可以创建一个没有任何逻辑的 HTML 页面。对于包含用户的表，您只创建用户的一个示例行。请参见下面的示例：

```
<table>
     <tr>
        <td>Firstname</td>
        <td>Lastname</td>
        <td>Age</td>
     </tr>
     <tr class='user'>
        <td class='firstname'></td>
        <td class='lastname'><td>
        <td class='age'><td>
     </tr>
</table> 
```

之后，您使用 PHP（Lib ex. Simple HTML Dom Parser）将 HTML 文件解析为对象。

此时，您可以使用 PHP 生成视图，例如克隆、删除、重命名、填充视图中的元素，并选择 jQuery 执行的“find(.firstname)”等元素。编辑视图后，您从对象生成 HTML。

我更喜欢这种方法，因为 Webdesigner 只需要使用 HTML 和 CSS 创建视图，并且不应该学习模板是如何工作的（例如 PHPTal）

希望这有帮助

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-17T19:52:48.867

我会使用 jquery（或任何其他 Js 框架）以 JSON 格式获取我的数据并添加 php 无法提供的所有客户端副作用

# ruby-on-rails - 遍历多维哈希

> ID：12011934
> 
> 赞同：-1
> 
> 时间：2012-08-17T19:21:21.953
> 
> 标签：ruby-on-rails, hash, loops

我之前发布了一个问题，我不清楚我的意图。所以在这里我会再试一次。

我遇到的问题是我需要分别提取亚马逊和厨师的价值。现在它们在我的迭代中都保存在 b 值中。我试图在 value.each 中创建另一个循环，但出现错误。如何有效地分别有效地提取价值？

任何帮助将不胜感激。

我以这种方式从 yaml 文件中获取哈希值

```
require 'yaml'
path = File.join(Rails.root, 'config', 'stage-aws-opscode.yml')
SAO = YAML.load_file(path) 
```

stage-aws-opscode.yml 包含以下数据

```
sandbox: &defaults
  amazon: aws-green
  chef: mdsol

validation:
  <<: *defaults

cruise:
  <<: *defaults

hendricks:
  <<: *defaults

distro:
  <<: *defaults

performance:
  <<: *defaults

innovate:
  amazon: aws-red
  chef: mdsol-production

production:
  amazon: aws-red
  chef: mdsol-production 
```

这是我的迭代。

```
<%
 SAO.each do |key, value| 
 parent = "#{key}" 
  value.each do |a, b| 
   "#{a}"  "#{b}"
  end 
end
    %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:00:41.237

你想要这个：

```
SAO.each do |k,v|
 puts "env: #{k}; amazon: #{v[:amazon]}; chef: #{v[:chef]}; "
end 
```

如果你在 2 个列表之后，那么你需要 2 个独立的循环。

# ios - CoreData 在第一次获取时无限期地阻塞？

> ID：12011936
> 
> 赞同：0
> 
> 时间：2012-08-17T19:21:25.850
> 
> 标签：ios, core-data, nsfetchrequest

所以我有一个奇怪的情况。

当我重新安装我的应用程序的开发版本时，我创建了一个 CoreData 数据库。在我的应用程序启动序列的其他地方，我尝试了一个简单的`NSPredicate`过滤获取请求。

通常（不是每次），第一次获取都会无限期地阻塞，并且应用程序需要重新启动才能正常继续。

我似乎无法弄清楚如何处理这个问题，而且由于我无法可靠地重现这个问题，所以每次我做一些我认为可行的事情时，后来发现它没有任何帮助。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:02:41.907

在 iOS 中使用 Core Data 的一个好方法是将创建和所有访问放在调度队列后面。因此，您在初始化例程中创建一个串行调度队列，然后通过向该队列调度块来创建和填充它。由于队列是串行的，因此您显然可以异步执行所有操作。也以这种方式进行获取，然后当它成功时，您可以将一些消息发布到主队列，并且您的应用程序委托该应用程序已准备好运行。

当您的应用程序启动并需要设置核心数据时，设置一些标志，然后阻止 UI，抛出一个微调器，播放音乐（无论如何），直到您取回该数据。

# c++ - 将 BST 转换为已排序的双向链表

> ID：12011938
> 
> 赞同：-1
> 
> 时间：2012-08-17T19:21:54.573
> 
> 标签：c++, linked-list, binary-search-tree

以下是我实现的将 BST 转换为排序双向链表的代码。但是对于以下输入，我缺少最左最右的子分支

例如。用于输入 4 1 2 3 6 5 7（输入到 BST）

我缺少数据 2 和 3 的节点。请告诉我代码有什么问题？

```
#include<iostream>
 using namespace std;
struct node
{
int data;
node* left;
node* right;
};
node* tree=NULL;
int count=1;
void inorder(node *tree)
{
if(tree!=NULL)
{
     inorder(tree->left);
    cout<<tree->data<<" ";
    inorder(tree->right);
}
}
node * insert(node *tree,int n)
{
if(tree==NULL)
{
    tree=new node;
    tree->left=tree->right=NULL;
    tree->data=n;
}
else if(tree->data>n)
tree->left=insert(tree->left,n);
else
tree->right=insert(tree->right,n);
return(tree);

}
node *start=NULL;
node *prev=NULL;
node * head=NULL;
void func(node *root)
{
if(root!=NULL)
{
    func(root->left);
    if(start==NULL)
    {
        start=root;
        start->left=NULL;
        start->right=NULL;
        prev=start;
        head=start;
        //cout<<start->data<<"  ";
    }
    else
    {
        start->right=root;
        start=start->right;
        start->left=prev;
        prev=start;
       // cout<<start->left->data<<"  ";
    }
    func(root->right);
}
}
int main()
{
int n;

cout<<"Enter the number of nodes\n";
cin>>n;
int k=n;
int value;
while(n--)
{
   cin>>value; 
   tree=insert(tree,value);
}
inorder(tree);
cout<<endl;
func(tree);
cout<<endl;
while(head!=NULL)
{
    cout<<head->data<<"  ";
    head=head->right;
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:37:05.217

您正在修改`func`. 例如，对于第一次调用`func`, `start->right = NULL`and `func(root->right);`together 没有什么意义。您可以使用节点分配内存并将其复制到列表中，而不是做`start = root`（和类似的事情） 。`new`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:20:18.693

问题在于`func` 对于 data = 1 的节点，您将正确的子树覆盖为 NULL。然后松开它

# jquery - 按类名定义 Raphael 容器

> ID：12011940
> 
> 赞同：0
> 
> 时间：2012-08-17T19:22:03.207
> 
> 标签：jquery, class, raphael

有谁知道是否可以通过类名而不是 id 来设置 Raphael 容器？

例如，这有效：

```
Raphael("holder", 100, 100)); 
```

这有效：

```
var container = document.getElementById('holder');
Raphael(container, 100, 100)); 
```

但这不起作用：

```
var container = $('#holder');
Raphael(container, 100, 100)); 
```

这不起作用：

```
var container = document.getElementsByClassName('holder');
Raphael(container, 100, 100)); 
```

这绝对行不通：

```
Raphael($('.holder:last'), 100, 100)); 
```

除了这种情况，Raphael 在我的代码的所有其他部分都很好地使用了 jQuery。我需要完成类似于最后一个示例的操作。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:31:30.217

```
 //i've tried this one and it works with [0] to select first of array
    var container = $('#holder');
    Raphael(container[0], 100, 100));

    //so i think theses should work too
    var container = document.getElementsByClassName('holder');
    Raphael(container[0], 100, 100));

    Raphael($('.holder:last')[0], 100, 100)); 
```

# ruby-on-rails - Rails 嵌套委托属性未更新

> ID：12011941
> 
> 赞同：1
> 
> 时间：2012-08-17T19:22:04.223
> 
> 标签：ruby-on-rails, ruby, activerecord, rspec

**楷模**

```
class User < ActiveRecord::Base
  has_one :meta, class_name: SeoMetum, as: :metumable, dependent: :destroy
  delegate :browser_title, :browser_title=, :meta_description, :meta_description=, to: :meta

  has_one :collection
  accepts_nested_attributes_for :collection

  after_save :save_meta_tags!

  def save_meta_tags!
    meta.save
  end
end

class Collection < ActiveRecord::Base
  has_one :meta, class_name: SeoMetum, as: :metumable, dependent: :destroy
  delegate :browser_title, :browser_title=, :meta_description, :meta_description=, to: :meta

    belongs_to :user

  after_save :save_meta_tags!

  def save_meta_tags!
    meta.save
  end
end

class SeoMetum < ActiveRecord::Base
  attr_accessible :metumable, :browser_title, :meta_description, :meta_keywords, :meta_author
  belongs_to :metumable, polymorphic: true
end 
```

**这是有效的：**

```
 it 'meta_description' do
    user.meta_description = 'This is my description of the user for search results.'
    user.meta_description.should == 'This is my description of the user for search results.'
  end

  it 'meta_description' do
    the_collection = user.collection
    the_collection.meta_description = 'This is my description of the user for search results.'
    the_collection.meta_description.should == 'This is my description of the user for search results.'
  end 
```

**这是行不通的**

```
 it 'meta_description' do
    user.collection.meta_description = 'This is my description of the user for search results.'
    user.collection.meta_description.should == 'This is my description of the user for search results.'
  end
  # => nil 
```

我的问题是为什么委派属性不会在嵌套属性中更新。我应该从哪里开始解决这个问题？谢谢。

# javascript - Call ajaxform with function button

> ID：12011949
> 
> 赞同：0
> 
> 时间：2012-08-17T19:22:57.117
> 
> 标签：javascript, ajax

Are there a way to call a ajaxform from malsup with a function?

like this:

```
function callAjaxForm(id){

    $('#' + id).ajaxForm({
    ....
    });
 } 
```

When I do such thing nothing happen...

*edited:* I already try with a function like this:

```
function callAjaxForm(id){
    (function() {

        $('#' + id).ajaxForm({
        ....
        });
     })();
 } 
```

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:38:27.403

> 有没有办法用函数从 malsup 调用 ajaxform？

没有理由你不应该

> 像这样：

[文档](http://jquery.malsup.com/form/)显示该方法将函数作为参数，而不是普通对象。

# iphone - 如何在 iPhone 上播放 youtube 视频，而不是全屏

> ID：12011950
> 
> 赞同：4
> 
> 时间：2012-08-17T19:23:02.077
> 
> 标签：iphone, webview, youtube

我想在我的 iPhone 应用程序中的视图或网络视图中播放 YouTube 视频。我知道可以在 iPad 上播放内嵌视频，但我无法在 iPhone 上播放。视频一开始播放，电影播放器​​就会全屏显示，所以我的 UI 不可见。

有谁知道如何克服这个限制？应用商店中是否有其他应用可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:27:29.740

使用此代码将您的管添加到您的应用程序中。

为此，您需要在视图中设置 web 视图。然后使用包含 YouTube 嵌入式播放器代码片段和一些支持 HTML 的精心构建的 HTML 调用实例`loadHTMLString:baseURL:`上的方法，`UIWebView`以确保视频缩略图正确显示。将基本 URL 设置为您网站的 URL（它在这里不做任何事情——通常`UIWebView`使用它来正确处理相对 URL 链接）。

```
NSString *youTube = @"<html><head>
<meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 212\"/></head>
<body style=\"background:#F00;margin-top:0px;margin-left:0px\">
<div><object width=\"212\" height=\"172\">
<param name=\"movie\" value=\"http://www.youtube.com/v/oHg5SJYRHA0&f=gdata_videos&c=ytapi-my-clientID&d=nGF83uyVrg8eD4rfEkk22mDOl3qUImVMV6ramM\"></param>
<param name=\"wmode\" value=\"transparent\"></param>
<embed src=\"http://www.youtube.com/v/oHg5SJYRHA0&f=gdata_videos&c=ytapi-my-clientID&d=nGF83uyVrg8eD4rfEkk22mDOl3qUImVMV6ramM\"
type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"212\" height=\"172\"></embed>
</object></div></body></html>";

[webView loadHTMLString:youTube baseURL:[NSURL URLWithString:@"http://www.your-url.com"]]; 
```

进一步参考：[YouTube](http://apiblog.youtube.com/2009/02/youtube-apis-iphone-cool-mobile-apps.html)

# google-app-engine - Google App Engine：使用 JPA 但收到 JDO 错误

> ID：12011956
> 
> 赞同：0
> 
> 时间：2012-08-17T19:23:20.057
> 
> 标签：google-app-engine, datanucleus

我在我的项目中使用 JPA，但收到与 JDO 类相关的异常，我在其他场合也看到了这一点。

我不想知道 JDOStateManagerImpl 类中的这个特定异常，我想知道在使用 JPA 时收到与 JDO 相关的异常是否正常，或者我搞乱了配置。

我知道 DataNucleus 是两者的提供者，所以我认为即使使用 JPA，JDO 也会在幕后完成工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:50:02.820

当发生 JPA 规范所说的抛出异常的事情时，接收异常是正常的。**嵌套**异常可以是 JDO 异常（或 DataNucleus 异常或低级异常），因为使用了*JDO 字节码增强合同*（这是 JDO 的唯一部分，并且因为它是标准化的字节码增强合同，所以非常明智）使用的东西，而不是发明新的合同）。

# google-analytics - Google Analytics advanced segments - excluding by user interest

> ID：12011958
> 
> 赞同：1
> 
> 时间：2012-08-17T19:23:27.743
> 
> 标签：google-analytics, segment

initialization: company website with product pages and separate ‘careers’ section.

I’m trying to create advanced segment with Google Analytics that would exclude visits that were more focused on careers section.

career URLs are simply:

*   /careers
*   /careers/job1
*   /careers/job2

I tried to use (two statements with AND operator):

```
‘Exclude’ ‘Page’ ‘Begins with’ ‘/careers’ 
AND
‘Exclude’ ‘Pageviews’ ‘Greater than’ ‘1’ 
```

Is this approach correct? Or do I get more reliable results if I use TimeOnPage instead of Pageviews? Example TimeOneSite greater than 15 sec.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:48:03.837

你可以试试这个：`'Exclude' 'Page' 'Matching RegExp' '/careers.+$'`

它应该排除主要职业页面之外的职业部分内的任何访问。

# php - 将 SQL 服务器日期时间转换为 mysql 日期时间

> ID：12011960
> 
> 赞同：0
> 
> 时间：2012-08-17T19:23:35.190
> 
> 标签：php, mysql, sql-server, datetime

> **可能重复：**
> [如何将 DateTime 转换为 VarChar](https://stackoverflow.com/questions/74385/how-to-convert-datetime-to-varchar)

例子

如何将 SQL 日期时间（例如`08/14/2012 1:05:18 PM`）转换为 mysql 方式（即 Ymd H:i:s ）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T19:26:49.960

取决于您要转换它的位置。

要直接在 SQL 中转换：

```
convert(varchar(23), getdate(), 121) 
```

PHP 使用[date](http://us3.php.net/manual/en/function.date.php)和[strtotime](http://us3.php.net/manual/en/function.strtotime.php)函数：

```
date("Y-m-d H:i:s ", strtotime("08/14/2012 1:05:18 PM")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T19:26:36.823

更改 PHP 中日期的格式，如下所示：

```
<?
$date = date("Y-m-d H:i:s ", strtotime("08/14/2012 1:05:18 PM"));
echo $date;
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T19:28:35.110

```
$var = "08/14/2012 1:05:18 PM";
echo date('Y-m-d H:i:s', strtotime($var)); 
```

# nhibernate - 何时调用 NHibernate 回滚？

> ID：12011966
> 
> 赞同：1
> 
> 时间：2012-08-17T19:24:00.337
> 
> 标签：nhibernate

我正在使用 NHibernate 将一些数据插入表 A。如果表 A 事务失败，我想更新表 B 中的状态。如何检查它是否失败？

以下是我当前的代码：

```
// Add userId to Receiver
Receiver receiver = new Receiver();
receiver.User = User.GetById(Convert.ToInt32(listItem.Value));
receiver.Notification = Notification.GetById(notification.NotificationId);
receiver.Save(); 
```

我在哪里调用 NHibernate 事务？如果失败，我在哪里调用 NHibernate Rollback 并更新表 B 状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T19:45:40.663

查看有关异常处理的官方 NHibernate 文档：http: [//nhibernate.info/doc/nh/en/index.html#manipulatingdata-exceptions](http://nhibernate.info/doc/nh/en/index.html#manipulatingdata-exceptions)

```
using ( ISession session = sessionFactory.OpenSession() )
{
    using ( ITransaction transaction = session.BeginTransaction() )
    {
        try
        {
            // Do your save/update here for Table A

            transaction.Commit();
        }
        catch( Exception e )
        {
            // Your save or update failed so this is where you
            // could capture that info and update your Table B

            transaction.Rollback();
        }
    }
} 
```

据我记得，您实际上不必调用 tx.Rollback() 因为当您的代码离开 using 块时，它会自动执行此操作，但我记不清了。试一试，如果它的行为与我刚才描述的不同，您可以手动回滚捕获。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T20:18:57.763

```
using (ISession session = factory.OpenSession())
using (ITransaction tx = session.BeginTransaction())
{
    // do some work
    tx.Commit();
} 
```

或手动

```
ISession session = factory.openSession();
try
{
   // do some work
   session.Flush();
   currentTransaction.Commit();
}
catch (Exception e)
{
   currentTransaction.Rollback();
   throw;
}
finally
{
   session.Close();
} 
```

查看[NHibernate 事务](http://nhibernate.info/blog/2009/09/08/part-9-nhibernate-transactions.html)以获取更多详细信息

# jquery - 如何使用 jquery 跳转到页面上的过滤结果？

> ID：12011968
> 
> 赞同：0
> 
> 时间：2012-08-17T19:24:07.040
> 
> 标签：jquery, html, hash, filter, href

我使用可点击的地图和菜单按参数（区域和配置文件）显示实验室的地址（这里是网站： http: [//ptgc-med.pl/index.php/dla-specjalisty/poradnie-genetyczne](http://ptgc-med.pl/index.php/dla-specjalisty/poradnie-genetyczne)）

问题是如何使当我单击一个区域时，它会跳转到带有过滤结果的段落开头，因为现在 mwhen 结果显示您仍然可以看到地图。我用jquery过滤了这些实验室，html看起来是这样的（是短版）：

```
<div id="filters">
<ul>
    <li><a href="#" id="tagA">Diagnostyka prenatalna</a>
    </li>
    <li><a href="#" id="tagB">Zespoły wad rozwojowych</a>
    </li>
    <li><a href="#" id="tagC">Niepełnosprawność intelektualna</a>
    </li>
</ul> 
```

```
<div id="map-polska">
<ul class="polska">
    <li class="pl1"><a href="#dolnoslaskie">Dolnośląskie</a>
    </li>
    <li class="pl2"><a href="#kujawsko-pomorskie">Kujawsko-pomorskie</a>
    </li>
    <li class="pl3"><a href="#lubelskie">Lubelskie</a>
    </li>

</ul> 
```

```
<div id="addresses">
ul>
<li id="podlaskie" class="tagA tagB"Podlaskie Centrum </li>
<li id="mazowieckie" class="tagA tagB tagC">Poradnia Genetyczna </li>
<li id="mazowieckie" class="tagG">Poradnia Genetyczna Instytutu Fizjologii</li>
</div> 
```

我的 jquery 代码如下所示：

```
$(document).ready(function(){  

$('#filters a').click(function(e){

    e.preventDefault();  

    var filter = $(this).attr('id');  

    $('#addresses ul li').show();   
    $('#addresses ul li:not(.' + filter + ')').hide();  

}); 
```

});

可能这是个愚蠢的问题，但我刚刚迷路了......我会非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:36:35.663

在点击事件中添加

```
$(document.body).animate({'scrollTop':$('div#addresses').position().top},1000); 
```

如果您只想要一个简单的解决方案，您将可以平滑滚动到`#addresses`div
只需编写

```
location.href = "#addresses" 
```

# c# - Unable to save data in sql server 2005 through c#.NET coding

> ID：12011970
> 
> 赞同：-2
> 
> 时间：2012-08-17T19:24:26.553
> 
> 标签：c#, sql, ado.net

I have a very unusual problem. I made a project in C#.net in vs 2008 and SQL server 2005. I have two DB to use. Now, the problem is whenrunning the project on my PC it works fine, but when i install on users PC, through setup, im getting a exception handler error , when im trying to save any data in either of the DBs. However i tried to insert data through INSERT INTO coomand in sql it works fine. And i have no problem in retrieving data. So any one can help please do.

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:27:56.173

您如何指定与数据库的连接？如果您正在执行 Windows 身份验证，则很可能您的用户帐户没有数据库权限。也可能是他们无法从他们在网络上的位置看到数据库。

我首先从用户的机器上 ping 数据库服务器，以确保他们甚至可以访问服务器。

# php - Authorize.Net-XML - 添加行项目

> ID：12011971
> 
> 赞同：0
> 
> 时间：2012-08-17T19:24:28.840
> 
> 标签：php, authorize.net

首先感谢你写[这门课](https://github.com/stymiee/Authorize.Net-XML)。它使我在构建应用程序时的生活变得更加轻松。

我已经设置了 CIM，添加用户、处理付款等都没有问题。但是我一直在添加订单项。github 上的示例使用用于创建 XML 请求 EX 的数组的静态填充：

```
'lineItems' => array(
    'itemId' => 'ITEM00001',
    'name' => 'name of item sold',
    'description' => 'Description of item sold',
    'quantity' => '1',
    'unitPrice' => '6.95',
    'taxable' => 'true'
 ),
 'lineItems' => array(
     'itemId' => 'ITEM00002',
     'name' => 'other name of item sold',
     'description' => 'Description of other item sold',
     'quantity' => '1',
     'unitPrice' => '1.00',
     'taxable' => 'true'
 ), 
```

如果您手动创建内容，这非常有用，但我会根据用户输入动态创建这些订单项。不幸的是，由于键（'lineItems'）被覆盖并且我最终得到一个行项目，我无法将多个行项目添加到数组中。

我尝试创建一个 lineItems 数组，然后将其合并但没有成功。希望我只是错过了一个简单的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:43:10.020

感谢您回复约翰！再一次，在这门课上的出色工作让我的生活变得更加轻松。

为了简单起见，这就是我最终所做的。我相信如果有必要可以对此进行阐述，但对我来说这很完美。我没有在数组的同一级别上传递多个行项，而是将行项创建为它们自己的数组，然后修改 setParamaters() 以遍历该数组。

```
private function setParameters($xml, $array)
{
    if (is_array($array))
    {
        foreach ($array as $key => $value)
        {
            if (is_array($value))
            {
                if($key == 'lineItems'){
                    foreach($value as $lineitems){
                        $line_item = $xml->addChild('lineItems');
                        foreach($lineitems as $itemkey => $itemvalue) {
                            $line_item->addChild($itemkey, $itemvalue);
                        }
                    }
                }
                else
                {
                    $xml->addChild($key);
                    $this->setParameters($xml->$key, $value);
                }
            }
            else
            {
                $xml->$key = $value;
            }
        }
    }
} 
```

这完全符合我的需求，并且做到了，因此除了嵌套 lineItems 数组外，我无需在前端进行任何更改。所以我发送的数组看起来更像这样：

```
["lineItems"]=>
  array(2) {
    [0]=>
    array(6) {
      ["itemId"]=>
      string(9) "ITEM00010"
      ["name"]=>
      string(21) "Blah Blah"
      ["description"]=>
      string(21) "Blah Blah Description"
      ["quantity"]=>
      string(1) "1"
      ["unitPrice"]=>
      string(4) "100"
      ["taxable"]=>
      string(5) "false"
    }
    [1]=>
    array(6) {
      ["itemId"]=>
      string(9) "ITEM00011"
      ["name"]=>
      string(25) "Thing Thing"
      ["description"]=>
      string(25) "Thing Thing Description"
      ["quantity"]=>
      string(1) "2"
      ["unitPrice"]=>
      string(3) "50"
      ["taxable"]=>
      string(5) "false"
    }
  } 
```

此外，对于那些希望为订单项构建数组的人，我这样做了：

```
foreach ($services as $key => $service){
    $line_items["lineItems"][] = array(
        'itemId'        => 'ITEM000'.$key,
        'name'          => $service->name,
        'description'   => $service->name,
        'quantity'      => $service_count[$key],
        'unitPrice'     => $service->price,
        'taxable'       => 'false'
    );
} 
```

然后将它添加到我传递给 AuthnetXML 实例的 transaction_array 中。

再次感谢！

乔尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:28:08.890

我是该课程的作者。AuthnetXML 类当前有一个错误，导致您看到的结果。您需要对核心类进行更改才能解决此问题。

我收到了一封来自用户的电子邮件，他提供了一个我还没有机会查看的解决方案。我会给你他们给我的相同信息，希望它可以帮助你：

```
The problem is that you can't have duplicate keys at the same level in an array. If you do the last one entered wins and the rest are overwritten.

So you need a way to represent repeating items from XML in and array. I decide to use the JSON methods to keep it simple. A quick wat to convert Simple XML to and array is to pass it through JSON.

$array = json_decode( json_encode( $simpleXML), true);

That will convert XML like this:

<transactionSettings>
  <setting>
    <settingName>allowPartialAuth</settingName>
    <settingValue>false</settingValue>
  </setting>
  <setting>
    <settingName>duplicateWindow</settingName>
    <settingValue>0</settingValue>
  </setting>
  <setting>
    <settingName>emailCustomer</settingName>
    <settingValue>false</settingValue>
  </setting>
  <setting>
    <settingName>recurringBilling</settingName>
    <settingValue>false</settingValue>
  </setting>
  <setting>
    <settingName>testRequest</settingName>
    <settingValue>false</settingValue>
  </setting>
</transactionSettings>

To an array like this:

array(
'transactionSettings' => array(  
  'setting' => array(
    0 => array('settingName' =>'allowPartialAuth' ,  'settingValue' => 'false',),
    1 => array('settingName' => 'duplicateWindow', 'settingValue' => '0', ),
    2 => array('settingName' => 'emailCustomer', 'settingValue' => 'false', ),
    3 => array('settingName' => 'recurringBilling', 'settingValue' => 'false',),
    4 => array( 'settingName' => 'testRequest', false, ),
  )
);

So you need to modify AuthNetXML.class to recognize this format. Just replace your setParameters() method with:

  private function setParameters($xml, $array)
  {
    if (is_array($array))
    {
      $first = true;

      foreach ($array as $key => $value)
      {
        if (is_array($value)) {

          if( is_numeric($key) )  {
            if($first){
              $xmlx = $xml;
              $first = false;
            } else {
              $parent = $xml->xpath('parent::*');
              $xmlx = $parent[0]->addChild($xml->getName());
            }

          } else {

            $xmlx = $xml->addChild($key);

          }

          $this->setParameters($xmlx, $value);
        }
        else
        {
          $xml->$key = $value;
        }
      }
    }
  } 
```

**更新 2012-08-21**

此错误已修复。示例代码已更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:58:02.090

编辑：我已经解决了这个问题。`lineItems`密钥必须像这样传递：

```
'lineItems' => array(
    'itemId'      => '13',
    'name'        => 'hello',
    'description' => 'hello description',
    'quantity'    => '1',
    'unitPrice'   => '55.00'
), 
```

[请注意，这与Authorize.net-XML](https://github.com/stymiee/Authorize.Net-XML/blob/master/examples/cim/createCustomerProfileTransactionRequest_authCapture.php)存储库中提供的示例不同。我现在要去那里提交修复。

原始问题：我遇到了涉及 Authorize.net-XML 类的类似问题；执行该`createCustomerProfileTransactionRequest()`方法时，我收到以下错误：

```
The element 'lineItems' in namespace 'AnetApi/xml/v1/schema/AnetApiSchema.xsd' has 
invalid child element 'lineItem' in namespace 
'AnetApi/xml/v1/schema/AnetApiSchema.xsd'. 
List of possible elements expected: 'itemId' in namespace 
'AnetApi/xml/v1/schema/AnetApiSchema.xsd'.' (length=272) 
```

我什至粘贴了[此处](https://github.com/stymiee/Authorize.Net-XML/blob/master/examples/cim/createCustomerProfileTransactionRequest_authCapture.php)提供的示例输入，但收到相同的错误？这门课在其他方面工作得很好；我使用`createTransactionRequest()`和`createCustomerProfileRequest()`方法来处理 AIM 事务并毫无问题地创建 CIM 配置文件。

重申一下，我什至尝试使用与[GitHub 上](https://github.com/stymiee/Authorize.Net-XML/blob/master/examples/cim/createCustomerProfileTransactionRequest_authCapture.php)相同的示例输入。

有任何想法吗？

非常感谢！杰森

# python - Python：在html标签上嵌入用于循环输出的函数

> ID：12011973
> 
> 赞同：0
> 
> 时间：2012-08-17T19:24:36.297
> 
> 标签：python, html, function, loops, cgi

我有一个 Python 函数，它输出这样的列表，

```
def get_items(argument):    
    for item in items:
        print item 
```

在终端上，当我将参数传递给我的函数并打印时，例如“get_items(test)”，我得到：

```
item1
item2
item3 
```

现在，我需要通过存储字段在帖子上获取它（我已经让这部分工作，但我只能打印具有静态内容的变量，而函数内的列表内容将返回“无”）。我需要的看起来像这样，

```
item1
item2
item3 
```

在查看源代码时，它看起来像这样，

```
<p>
item1<br/>
item2<br/>
item3<br/>
</p> 
```

我不知道如何打印它，这在 php 中将是一种简单的方法，例如将 php 嵌入到 html 内容中。但是，每当我尝试任何事情时，Python 都会抛出 500 错误......请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:50:02.520

如果您将脚本作为 CGI 执行 - 您的脚本必须回显一个 Content-type 后跟 2 个返回，然后再执行其他任何操作：

```
print "Content-Type: text/html\n"

def get_items(item):    
    for item in items:
        print item+'<br />'

print "<p>"
get_items(foo)
print "</p>" 
```

# powershell - Launching .exe from PowerShell window SOMETIMES causes it to be run in separate window, so I can't see output or get $lastexitcode

> ID：12011974
> 
> 赞同：4
> 
> 时间：2012-08-17T19:24:58.287
> 
> 标签：powershell

I am by no means a PowerShell expert; I have spent a good while googling this, but haven't found an answer.

The basic idea of my script is to run a Microsoft tool called appcert.exe with command-line arguments. appcert.exe returns 0, 1, or -1; I am checking it with `$lastexitcode`.

appcert.exe only runs on Windows 7 and Windows 8, so I have run my script on both.

Everything works fine on Windows 7x64 (PS version = 2.0). I can manually run all the same steps. I see the output of appcert.exe in the same PS window.

Different story on Windows 8x64 (RTM), where PS version = 3.0, CLRVersion = 4.0.30319.17929\.

Sometimes, appcert.exe runs "inline" (like it did in Win7); other times, a command window is launched, the appcert.exe output flies by, and command window closes. The PS window that called it can't check `$lastexitcode` (which, by the way, is not set at all).

I tried all PS versions on machine, and results are as follows:

1.  appcert.exe is launched in separate window in these instances:

    *   In PowerGUI 3.2.0.2237 (uses PS 2.0)
    *   In regular PowerShell (non-admin)
    *   In Windows PowerShell ISE (non-admin)
2.  appcert.exe is launched inline in these instances:

    *   Ran Powershell as administrator
    *   Ran ISE as administrator

Behavior above is obtained whether I:

1.  Launch script, which calls the appcert command like this: `& $CertToolPath`
2.  cd to the home direcotry of the tool and type .\appcert.exe
3.  Run this: `Cmd /c appcert.exe`
4.  Run this: `Invoke-expression –command appcert.exe`
5.  Run this: `[system.diagnostics.process]::start("appcert.exe")`

My colleagues are equally stumped by this.

My machine is in a test domain, not a workgroup. I log into the machine as an admin of the test domain, so theoretically, I'm already an admin.

I install the MS tool as that admin, too. In fact, I never do anything as the machine's local admin. Any ideas? :)

Many thanks in advance, Tania

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:40:33.797

你能用任何其他exe重现这个吗？您是否禁用了 UAC 提示？

appcert.exe 是否可能需要以管理员身份运行，如果没有，它会自动以管理员身份重新启动（这应该会导致 UAC 提示，但如果您将它们关闭，它似乎只是产生一个新实例自动）？

# mysql - 插入方法有什么区别，为什么一个更快？

> ID：12011985
> 
> 赞同：2
> 
> 时间：2012-08-17T19:25:29.350
> 
> 标签：mysql, database

我在 MySQL 上插入了 14.485 行，如下所示：

```
INSERT INTO `bairros` (`id`,`cidade_id`,`descricao`) VALUES (1,8891,'VILA PELICIARI');
INSERT INTO `bairros` (`id`,`cidade_id`,`descricao`) VALUES (2,8891,'VILA MARIANA');
... 
```

花了大约5分钟。

我必须在另一个表中插入 16.021 行，相同的数据库，所以为了测试我这样做了：

```
INSERT INTO `bairros` (`id`,`cidade_id`,`descricao`) VALUES (1,8891,'VILA PELICIARI'),(2,8891,'VILA MARIANA');
... 
```

只花了几秒钟。

对于数据库，脚本之间有什么区别？为什么一个比另一个快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:28:39.963

不同之处在于第一个脚本包含 14,485 个单独的查询，每个查询都必须提交。

第二个是单个查询。

# ios - UISearchBarDelegate 和 textFieldShouldClear 替代

> ID：12011986
> 
> 赞同：3
> 
> 时间：2012-08-17T19:25:41.507
> 
> 标签：ios, uisearchbar

UITextFieldDelegate 有一个方法，当用户单击该小图标`- (BOOL)textFieldShouldClear:(UITextField *)textField`时会调用该方法。`x`

我找不到类似的东西`UISearchBar`or `UISearchBarDelegate`。是否有另一种方法来确定该按钮/图标是否已在内部单击`UISearchBar`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:52:44.900

您可以使用：

```
searchBar:textDidChange: 
```

根据[参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISearchBarDelegate_Protocol/Reference/Reference.html)，当按下 X 清除字段时也会调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:55:57.740

这个怎么样（并注意讨论语句）：

```
searchBar:textDidChange:
Tells the delegate that the user changed the search text.

- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
Parameters
searchBar
The search bar that is being edited.
searchText
The current text in the search text field.
Discussion
This method is also invoked when text is cleared from the search text field.

Availability
Available in iOS 2.0 and later.
Declared In
UISearchBar.h 
```

# ios - Problems running app on iOS 5.1.1 with Xcode 4.3.2

> ID：12011987
> 
> 赞同：0
> 
> 时间：2012-08-17T19:25:42.063
> 
> 标签：ios, xcode

When I try to run the app on my iPad 2, I get the following message:

"No provisioned iOS devices are available with a compatible iOS version. Connect an iOS device with a recent enough version of iOS to run your application or choose an iOS simulator as the destination."

First, I checked my provisioning portal to make sure my device was properly provisioned and it shows a development certificate, a device id and an app ID. My profile shows that all of those were successfully generated and that the status is "Active".Since my device contains the most recent version of iOS, I can't figure out why the message is telling me the version isn't recent enough. Do I need a different version of Xcode to get around this problem?

thnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:35:36.713

在管理器中，选择左上角的配置文件，单击右下角的刷新按钮。应该会提示您输入一些凭据。您应该会在列表中看到为您的产品创建的配置文件。

完成该步骤后，在设备列表中选择您的 iPad，并确保已选择“用于开发”。

（另外，当你说“最新”时，你的意思是 5.1.1 对吗？）

# php - 网站登录系统

> ID：12011989
> 
> 赞同：3
> 
> 时间：2012-08-17T19:25:53.730
> 
> 标签：php, ajax, login, bcrypt

我在一个网站上工作，我想让用户能够登录到该网站。我是一名自学成才的开发人员，所以我不确定最佳实践是什么。我之前在我的 java 应用程序中使用过 bcrypt，并在下面的密码 php 文件中实现了它（只有真正重要的行在类的末尾）。

到目前为止，我现在对登录系统唯一关心的是，我使用的 ajax 是可见的，并显示了正在运行什么脚本来检查密码。这仍然安全吗？如果不是应该怎么做。

最后在我的 Password.php 脚本中，我假设我应该制作一个 cookie 以允许网站知道哪个帐户已成功登录，但如何使这个 cookie 安全？

我的代码在下面只是想知道这是否是一种危险的做事方式以及如何确保 cookie 的安全谢谢您的任何回答

**阿贾克斯检查器**

```
<script type="text/javascript" src="jquery-1.7.1.min.js"/></script>
<script type="text/javascript">
function passWord(){
    var user = document.login.user.value;
    var pass = document.login.pass.value;
    $.ajax({
        url: "Password.php",
        type: "POST",
        data: {'user':user, 'pass':pass},
        success: function (response) {
            if(response!=1){
                //Wrong Password
                $('#divResults').html("The password or username you entered is incorrect.");
            }
        }
    });
    return false;
}
</script> 
```

**HTML 表单**

```
<form name="login" onsubmit="return passWord()" method="get">
<font color="black"><br>Username or e-mail address:
<br><input type="text" size="40%" name="user" />
<br>You may login with either your assigned username or your e-mail address.
<br><br>Password:<br><input type="password" size="40%" name="pass" />
<br>The password field is case sensitive.<br><br></font>
<input type="submit" value="Log In" />
</form> 
```

**密码检查器**

```
<?PHP
  class Bcrypt {
  private $rounds;
  public function __construct($rounds = 12) {
    if(CRYPT_BLOWFISH != 1) {
      throw new Exception("bcrypt not supported in this installation. See http://php.net/crypt");
    }

    $this->rounds = $rounds;
  }

  public function hash($input) {
    $hash = crypt($input, $this->getSalt());

    if(strlen($hash) > 13)
      return $hash;

    return false;
  }

  public function verify($input, $existingHash) {
    $hash = crypt($input, $existingHash);

    return $hash === $existingHash;
  }

  private function getSalt() {
    $salt = sprintf('$2a$%02d$', $this->rounds);

    $bytes = $this->getRandomBytes(16);

    $salt .= $this->encodeBytes($bytes);

    return $salt;
  }

  private $randomState;
  private function getRandomBytes($count) {
    $bytes = '';

    if(function_exists('openssl_random_pseudo_bytes') &&
        (strtoupper(substr(PHP_OS, 0, 3)) !== 'WIN')) { // OpenSSL slow on Win
      $bytes = openssl_random_pseudo_bytes($count);
    }

    if($bytes === '' && is_readable('/dev/urandom') &&
       ($hRand = @fopen('/dev/urandom', 'rb')) !== FALSE) {
      $bytes = fread($hRand, $count);
      fclose($hRand);
    }

    if(strlen($bytes) < $count) {
      $bytes = '';

      if($this->randomState === null) {
        $this->randomState = microtime();
        if(function_exists('getmypid')) {
          $this->randomState .= getmypid();
        }
      }

      for($i = 0; $i < $count; $i += 16) {
        $this->randomState = md5(microtime() . $this->randomState);

        if (PHP_VERSION >= '5') {
          $bytes .= md5($this->randomState, true);
        } else {
          $bytes .= pack('H*', md5($this->randomState));
        }
      }

      $bytes = substr($bytes, 0, $count);
    }

    return $bytes;
  }

  private function encodeBytes($input) {
    // The following is code from the PHP Password Hashing Framework
    $itoa64 = './ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

    $output = '';
    $i = 0;
    do {
      $c1 = ord($input[$i++]);
      $output .= $itoa64[$c1 >> 2];
      $c1 = ($c1 & 0x03) << 4;
      if ($i >= 16) {
        $output .= $itoa64[$c1];
        break;
      }

      $c2 = ord($input[$i++]);
      $c1 |= $c2 >> 4;
      $output .= $itoa64[$c1];
      $c1 = ($c2 & 0x0f) << 2;

      $c2 = ord($input[$i++]);
      $c1 |= $c2 >> 6;
      $output .= $itoa64[$c1];
      $output .= $itoa64[$c2 & 0x3f];
    } while (1);

    return $output;
  }
}

$user = $_REQUEST['user'];
$pass = $_REQUEST['pass'];
$link = mysql_connect('localhost', 'root', 'root');
mysql_select_db("Colleges");
$result = mysql_query("SELECT `Password` FROM `Users` WHERE `Username`=UPPER('" . $user . "')");
$resultV = mysql_fetch_array($result);
$bcrypt = new Bcrypt(10);
$isGood = $bcrypt->verify($pass, $resultV['Password']);
die($isGood);

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T19:33:18.413

您的方法适用于密码检查，javascript 根本不会公开正确的密码或用户名。但不要使用 cookie，而是使用会话。然后在每个经过身份验证的用户的页面上，您只需包含一个脚本来检查会话以查看他们是否经过身份验证。这样，即使他们硬链接到受保护的页面或尝试使用 javascript 进行连接，会话也会捕获它们。如果用户在会话中未通过身份验证，您只需将他们退回到登录。

# firefox - 在 Firefox 和 Chrome 中查看来自 WCF 数据服务的原始 XML

> ID：12011990
> 
> 赞同：4
> 
> 时间：2012-08-17T19:26:25.633
> 
> 标签：firefox, google-chrome, wcf-data-services

我有一个从数据库公开数据的 WCF 数据服务。当我在 Internet Explorer 中访问此服务时，我得到原始 XML 作为响应（关闭提要阅读视图后）。当我在 Firefox 中访问此服务时，Firefox 将其显示为 RSS 提要。当我在 Chrome 中访问此服务时，它会提示我保存文件。

1.  有没有办法像在 Internet Explorer 中一样在 Firefox 中禁用提要阅读视图？

2.  我可以设置 Chrome 查看原始 XML 而不是尝试将其作为文件下载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T03:00:38.353

它出现在较新版本的 Chrome 中，这不再是问题。我最近没有测试过 Firefox。

# windows - Windows 8 metro style HTML5 development

> ID：12011993
> 
> 赞同：0
> 
> 时间：2012-08-17T19:26:34.000
> 
> 标签：windows, html

I want to know can i develop metro style windows 8 HTML5 application without windows8 OS installed ? I understand working on VS2012 , but Since it is web application i think it doesn't make sense to have the windows 8 OS installed. Please confirm if it is required, if not tell me how to make it work on windows7 and VS 2012

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T00:35:43.913

Visual Studio 2012 要求文档说您可以在 Windows 7 SP1 上使用它。但是，您将无法开发/调试使用它开发的 HTML5 应用程序，因为 Windows 8 HTML5 应用程序不是简单的 Web 应用程序，它们运行在 Windows 7 上不可用的 WinRT 运行时之上。因此，开发/为 Windows 8 调试 HTML5 应用程序，您需要在 Windows 8 机器上安装 VS2012。如果您正在考虑开发常规 HTML5 Web 应用程序（将在浏览器中使用而不是作为 Windows 8 应用程序，那么您应该能够使用 Windows 7 SP1 作为主机来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:17:26.333

请参阅让我们了解有关您的应用程序的更多信息。

在带有 HTML5/JavaScript 和 CSS3 的 W8 Metro Style Apps 中，您可以制作出色的应用程序，就像 Cut The Rope 一样。

使用 HTML 5 /JS/CSS3 制作网站不需要您选择 Windows Store App 选项，因为它仅用于创建稍后上传到 Windows 商店的应用程序，而网站将上传到服务器上

# jquery - 使用JQuery根据子div背景颜色隐藏父li

> ID：12011994
> 
> 赞同：2
> 
> 时间：2012-08-17T19:26:34.270
> 
> 标签：jquery

我正在使用不允许更改 html 的 cms。

它在侧边栏上创建即将发生的事件，并在每种类型的事件之前添加一个彩色 div 来对它们进行分类。我想使用 JQuery 仅在某些页面上显示其中一个类别。

这是他们生成的代码：

```
<ul class="upcomingEvents">
    <li>
        <a href="#">
    <div style="display:inline;width:3px;height:1em;background-color:#f8546f;">&nbsp;</div>&nbsp;First</a>
        <br>
        <i>&nbsp;&nbsp;Sunday</i>
    </li>
    <li>
        <a href="#"><div style="display:inline;width:3px;height:1em;background-color: #000;">&nbsp;</div>&nbsp;Second</a>
        <br>
        <i>&nbsp;&nbsp;Friday</i>
    </li>
    <li>
        <a href="#"><div style="display:inline;width:3px;height:1em;background-color: #F16FCC;">&nbsp;</div>&nbsp;Third</a>
        <br>
        <i>&nbsp;&nbsp;Wednesday</i>
    </li>
    <li>
        <a href="#"><div style="display:inline;width:3px;height:1em;background-color: #F16FCC;">&nbsp;</div>&nbsp;Fourth</a>
        <br>
        <i>&nbsp;&nbsp;Monday</i>
    </li>
</ul> 
```

我只想显示此代码中的“第三个”和“第四个”事件，但我没有提供类或 ID。我的想法是通过这些 li 中子 div 的背景颜色来识别该类别。在页面加载时隐藏所有 li。然后告诉 jquery 只显示所需的 li。

我希望生成的代码如下所示：

```
<ul class="upcomingEvents">
    <li style="display: none; ">
        <a href="#"><div style="display:inline;width:3px;height:1em;background-color:#f8546f;">&nbsp;</div>&nbsp;First</a>
        <br>
        <i>&nbsp;&nbsp;Sunday</i>
    </li>
    <li style="display: none; ">
        <a href="#"><div style="display:inline;width:3px;height:1em;background-color: #000;">&nbsp;</div>&nbsp;Second</a>
        <br>
        <i>&nbsp;&nbsp;Friday</i>
    </li>
    <li>
        <a href="#"><div style="display:inline;width:3px;height:1em;background-color: #F16FCC;">&nbsp;</div>&nbsp;Third</a>
        <br>
        <i>&nbsp;&nbsp;Wednesday</i>
    </li>
    <li>
        <a href="#"><div style="display:inline;width:3px;height:1em;background-color: #F16FCC;">&nbsp;</div>&nbsp;Fourth</a>
        <br>
        <i>&nbsp;&nbsp;Monday</i>
    </li>
</ul> 
```

我尝试使用此代码但没有成功。

```
$(document).ready(function() {
    $(".upcomingEvents li").hide();
    if ($(".upcomingEvents div").css("backgroundColor") == "rgb(241, 111, 204)") $(this).show();
});​ 
```

我究竟做错了什么？

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:36:21.660

你可以试试这个`eq()`方法：

```
$(document).ready(function() {
    var $li = $(".upcomingEvents li")
    $li.hide();
    $li.eq(2).show() // the third 'li' element
    $li.eq(3).show() 
});​ 
```

使用您当前的解决方案，您可以使用以下`each`方法：

```
$(document).ready(function() {
    $(".upcomingEvents li").hide();
    $(".upcomingEvents li div").each(function(){
        if ( $(this).css("background-color") == "rgb(241, 111, 204)" ) {
           $(this).closest('li').show()
        }
    })
}); 
```

**[小提琴](http://jsfiddle.net/E7wFK/212/)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T19:32:38.113

我会调试并查看`$(".upcomingEvents div").css("backgroundColor")`存储的内容。我怀疑它会是`"rgb(241, 111, 204)"`。

它可能是等效的颜色，但在这个`format: #ffffff`

# c# - 在 WinForm 中启动线程的正确方法

> ID：12011997
> 
> 赞同：0
> 
> 时间：2012-08-17T19:26:42.453
> 
> 标签：c#, winforms, multithreading

我有一个窗体 (Form1)，当单击它时，我想在线程中打开另一个窗体 (form2)。

我想在一个线程中打开它，因为当它启动时，我会读取它并为 10k+ 行长文件的语法着色，这大约需要 5 或 6 分钟。

我的问题是我不知道“正确”的方法。我已经找到了如何做到这一点并且它工作正常，但我希望能够有一个进度条告诉我 Form2 的处理进度。（可能带有后台工作对象）

这是我的布局

Form1 有一个 RichTextBoxes 和一个按钮，单击该按钮，它会在另一个线程中打开一个表单，为 form1 的 rtb 中的文本着色。

Form2 也有一个 Rtb，这个 rtb 有一个 ProcessAllLines 方法，它处理行并完成我想在另一个线程中完成的工作。

这就是为什么我认为我遇到了困难。当表单等待加载时，文本框正在完成工作。

这是我打开 Form2 的方法：

```
 private void button1_Click(object sender, EventArgs e)
    {
        ColoringThread colorer = new ColoringThread(this.m_bruteView.Text);
        Thread theThread = new Thread(new ThreadStart(colorer.OpenColorWindow));
        theThread.Start();
    }

    public class ColoringThread
    {
        string text;
        public ColoringThread(string initText)
        {
            text = initText;
        }
        public void OpenColorWindow()
        {
            Form2 form2 = new Form2(text);
            form2.ShowDialog();
        }
    }; 
```

以下是 form2 的工作方式：

```
 string initText;
    public Form2(string initTextInput)
    {
        initText = initTextInput;
        InitializeComponent();
    }

private void InitializeComponent()
    {
        this.m_ComplexSyntaxer = new ComplexSyntaxer.ComplexSyntaxer();
        this.SuspendLayout();
        // 
        // m_ComplexSyntaxer
        // 
        this.m_ComplexSyntaxer.Dock = System.Windows.Forms.DockStyle.Fill;
        this.m_ComplexSyntaxer.Location = new System.Drawing.Point(0, 0);
        this.m_ComplexSyntaxer.Name = "m_ComplexSyntaxer";
        this.m_ComplexSyntaxer.Size = new System.Drawing.Size(292, 273);
        this.m_ComplexSyntaxer.TabIndex = 0;
        this.m_ComplexSyntaxer.Text = initText;
        this.m_ComplexSyntaxer.WordWrap = false;

        // THIS LINE DOES THE WORK
        this.m_ComplexSyntaxer.ProcessAllLines();
        // 
        // Form2
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(292, 273);
        this.Controls.Add(this.m_ComplexSyntaxer);
        this.Name = "Form2";
        this.Text = "Form2";
        this.ResumeLayout(false);
    } 
```

这是完成工作的地方：

```
 public void ProcessAllLines()
    {
        int nStartPos = 0;
        int i = 0;
        int nOriginalPos = SelectionStart;
        while (i < Lines.Length)
        {
            m_strLine = Lines[i];
            m_nLineStart = nStartPos;
            m_nLineEnd = m_nLineStart + m_strLine.Length;
            m_nLineLength = m_nLineEnd - m_nLineStart;

            ProcessLine(); // This colors the current line!
            i++;

            nStartPos += m_strLine.Length + 1;
        }
        SelectionStart = nOriginalPos;
    } 
```

Sooo，打开这个form2并让它向Form1报告进度以显示给用户的“正确”方式是什么？（我问是因为我被告知这不是正确的做法，我显然会受到“跨线程”违规？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:28:15.990

> 我想在一个线程中打开它，因为当它启动时，我会读取它并为 10k+ 行长文件的语法着色，这大约需要 5 或 6 分钟。

为什么不在单独的线程中*读取数据，然后将 UI 本身与第一个表单保持在同一个线程上？*

根据我的经验，如果您只使用一个线程进行 UI 操作，它会使生活变得更加简单。

至于你应该如何启动一个新线程来读取数据，有多种选择：

*   你可以使用[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx); 这可能会使进度报告更简单。有关详细信息，请参阅[MSDN 文章](http://msdn.microsoft.com/en-us/library/hybbz6ke.aspx)。
*   直接新建`Thread`并启动
*   使用线程池线程`ThreadPool.QueueUserWorkItem`
*   如果您使用的是 .NET 4，请使用`Task.Factory.StartNew`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:28:29.797

在我看来，另一种形式不需要在另一个显式线程中运行。

当然，您希望在另一个线程（或后台工作人员）中完成长时间的工作，但您只想调用另一个表单，而另一个表单将在另一个线程（或后台工作人员）中执行任务。