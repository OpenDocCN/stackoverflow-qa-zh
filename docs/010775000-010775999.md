# StackOverflow 问答 10775000-10775999

# jsp - 如何使 JSP 网站可以在 LAN / INTRANET 中访问

> ID：10775002
> 
> 赞同：0
> 
> 时间：2012-05-27T15:14:59.280
> 
> 标签：jsp, web, lan, intranet

有谁知道如何真正使 JSP 网站项目在 LAN 中可访问。

我正在使用 Netbeans 和内置的 Glassfish 服务器来测试我的项目。我运行 XAMPP Apache 来运行 DBMS 的接口和数据库本身的 MySql。

非常感谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T15:27:26.277

没有 Apache / Xampp 的局域网 JSP 应用程序应该没问题。原因是 Apache 针对静态文件进行了高度优化，您的 GlassFish 服务器不应承担此负担。

您可以在服务器配置中更改容器 HTTP 端口（查看 Glassfish 的文档），或者在某些情况下，您可能需要启用它。

将端口从 8080 更改为 80 并确保防火墙设置正常。

你应该很高兴。

如果您需要使用 Apache，请使用 Tomcat 并使用 Mod_JK 来制作 Apache - Tomcat 桥。

# class-diagram - 类图是否从封闭源程序中揭示了太多信息？

> ID：10775003
> 
> 赞同：0
> 
> 时间：2012-05-27T15:15:10.673
> 
> 标签：class-diagram

我想知道我是否可以部署一个封闭源程序的类图。

封闭源标准（如果有）是否禁止此类行为？
它是否揭示了有关程序的太多信息/是否可以重新创建程序的某些部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:30:20.697

如果类图解释了数据结构，算法几乎是显而易见的。

如果你想解释软件结构，你应该很清楚你签了什么样的合同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T15:30:32.787

那要看。有时答案是否定的，尤其是在那些情况下，当您无论如何都需要向用户公开类结构（域模型）时。在其他时候，答案可能是肯定的，例如当您对 NSA 人口数据库计划执行此操作时 :)。在某些情况下，领域模型是软件最重要的创造性贡献，而其他一切都只是工艺，所以就像你说的，用适当的相对愚蠢的努力重新创建程序是可能的。但是，在实践中，您通常可以成功地争辩说类图并没有透露太多。俗话说，不要向精灵征求意见，因为他们会说是也不是。

# python - gettattr，python 中的“属性必须是字符串”错误

> ID：10775004
> 
> 赞同：2
> 
> 时间：2012-05-27T15:15:15.727
> 
> 标签：python, typeerror, getattr

我正在尝试`getattr`使用生成器在我的代码中使用函数

```
li=[]
m=[method for method in dir(li) if callable(getattr(li,method))]
print getattr(li,(str(i) for i in m)) 
```

**错误**：

```
TypeError: getattr(): attribute name must be string 
```

如果我在 i 上使用字符串强制，那么为什么会出现此错误？

另外，如果我使用代码

```
li=[]
m=[method for method in dir(li) if callable(getattr(li,method))]
for i in range(10):
    print getattr(li,str(m[i])) 
```

然后没有错误

我是python新手，如果我犯了非常基本的错误，请原谅我，请有人详细说明错误。谢谢

**编辑**：同样的原则适用于这段代码（这是一个来自 Dive into python 的例子）。在这里，做了同样的事情，为什么没有错误？

```
def info(object, spacing=10, collapse=1):
    """Print methods and doc strings.

    Takes module, class, list, dictionary, or string."""
    methodList = [e for e in dir(object) if callable(getattr(object, e))]
    processFunc = collapse and (lambda s: " ".join(s.split())) or (lambda s: s)
    print "\n".join(["%s %s" %
                     (method.ljust(spacing),
                      processFunc(str(getattr(object, method).__doc__)))
                     for method in methodList]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T15:16:01.590

好的，鉴于您的编辑，我已经更改了答案。您似乎期望生成器做一些与他们所做的不同的事情。

您不会将生成器传递给函数并让函数对生成器生成的每个项目起作用，而是循环生成器，然后在循环内执行所需的函数。

但是，在这里您不需要生成器表达式 - 只需遍历您的列表 - 例如：

```
for method in m:
    print(getattr(li, method)) 
```

如果您确实想使用生成器表达式，那么您可以在这里使用它而不是首先构造列表：

```
for method in (method for method in dir(li) if callable(getattr(li, method))):
    print(getattr(li, method)) 
```

尽管请注意，对于您在这里尝试做的事情，[该`inspect`模块](http://docs.python.org/library/inspect.html)可以帮助您避免很多您正在做的事情。

# html - 为什么 Firefox 以红色突出显示 HTML 过渡文档类型？

> ID：10775005
> 
> 赞同：8
> 
> 时间：2012-05-27T15:15:16.083
> 
> 标签：html, firefox, doctype

看起来 Firefox 将其视为错误。这是什么意思？

![在此处输入图像描述](../Images/435bbfeaec145fd1d2b179f92642567b.png)

如果我将其更改为，Firefox 会正常处理它：

```
<!DOCTYPE html>
<html> 
```

顺便说一句，我使用的是 Firefox 12.0

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T15:23:10.293

# android - 如何使用 Python 执行 adb 命令？

> ID：10775007
> 
> 赞同：5
> 
> 时间：2012-05-27T15:15:34.477
> 
> 标签：android, python

我想创建一个可用于执行 Android adb 命令的 python 脚本。我查看了[https://github.com/rbrady/python-adb](https://github.com/rbrady/python-adb)但似乎无法使其完美运行。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:32:40.250

这个工具应该可以完成工作。 [https://pypi.python.org/pypi/pyadb/0.1.1](https://pypi.python.org/pypi/pyadb/0.1.1)

我不得不修改一些函数以使其在 Python 2.7 上运行并改用 subprocess。这是我版本中修改后的代码：

```
def __build_command__(self,cmd):
    if self.__devices is not None and len(self.__devices) > 1 and self.__target is None:
        self.__error = "Must set target device first"
        return None

    if type(cmd) is tuple:
        a = list(cmd)
    elif type(cmd) is list:
        a = cmd
    else:
        a = [cmd]
    a.insert(0, self.__adb_path)
    if self.__target is not None:
        a.insert(1, ['-s', self.__target])

    return a

def run_cmd(self, cmd):
    """
    Run a command against adb tool ($ adb <cmd>)
    """
    self.__clean__()

    if self.__adb_path is None:
        self.__error = "ADB path not set"
        return

    try:
        args = self.__build_command__(cmd)
        if args is None:
            return
        # print 'args>', args
        cmdp = subprocess.Popen(args, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        self.__output, self.__error = cmdp.communicate()
        retcode = cmdp.wait()
        # print 'stdout>', self.__output
        # print 'stderr>', self.__error
        if retcode < 0:
            print >>sys.stderr, "Child was terminated by signal", -retcode
        else:
            return
    except OSError, e:
        self.__error = str(e)

    return 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T15:21:55.390

为此使用`monkeyrunner`工具。从它的[文档](https://developer.android.com/studio/test/monkeyrunner/index.html)：

> 除了使用 monkeyrunner API 本身，您还可以使用标准的 Python 操作系统和子进程模块来调用 Android 工具，例如 Android Debug Bridge。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-02T01:32:05.087

[python-adb](https://github.com/google/python-adb)项目实现了 USB 通信层及更高版本，甚至提供了一个类似于 Android adb 的 API 以便于转换。

# android - 在应用计费中：找不到项目

> ID：10775008
> 
> 赞同：13
> 
> 时间：2012-05-27T15:15:36.893
> 
> 标签：android, in-app-billing

我已按照应用内计费的步骤进行操作：

1.  已安装的演示应用
2.  发布了应用内商品
3.  未发布应用程序本身

虽然我**可以**购买该物品，但有一个奇怪的警告“找不到物品”，我必须先将其关闭，然后才能进入购买屏幕。

和这个日志错误：

```
E/Volley(1384): [157] BasicNetwork.performRequest: Unexpected response code 500 for https://android.clients.google.com/fdfe/details?doc=subs:com.testorooney.testo:sword_001 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-07T03:03:12.627

这不是服务器端错误。该错误出现在示例应用程序的 Dungeons 类中的“购买”按钮的 onClick 中。

提供的方法在 if {} else if {} 语句中有一个错误，当所选项目不是订阅项目 (mManagedType != Managed.SUBSCRIPTION) 时，它会导致 mBillingService.requestPurchase 被调用两次。因此，同一项目将被请求两次，一次是项目类型为“inapp”（这是有效请求），然后是项目类型为“subs”（这是不正确的，它显示“未找到项目”） .

这是错误的代码：

```
if (mManagedType != Managed.SUBSCRIPTION &&
                    !mBillingService.requestPurchase(mSku, Consts.ITEM_TYPE_INAPP, mPayloadContents)) {
                showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
            } else if (!mBillingService.requestPurchase(mSku, Consts.ITEM_TYPE_SUBSCRIPTION, mPayloadContents)) {
                // Note: mManagedType == Managed.SUBSCRIPTION
                showDialog(DIALOG_SUBSCRIPTIONS_NOT_SUPPORTED_ID);
            } 
```

要解决此问题，请将 mManagedType == Managed.SUBSCRIPTION 添加到 else if 上面。

以下是函数的外观：

```
@Override
    public void onClick(View v) {
        if (v == mBuyButton) {
            if (Consts.DEBUG) {
                Log.d(TAG, "buying: " + mItemName + " sku: " + mSku);
            }

            if (mManagedType != Managed.SUBSCRIPTION &&
                    !mBillingService.requestPurchase(mSku, Consts.ITEM_TYPE_INAPP, mPayloadContents)) {
                showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
            } else if (mManagedType == Managed.SUBSCRIPTION && !mBillingService.requestPurchase(mSku, Consts.ITEM_TYPE_SUBSCRIPTION, mPayloadContents)) {
                // Note: mManagedType == Managed.SUBSCRIPTION
                showDialog(DIALOG_SUBSCRIPTIONS_NOT_SUPPORTED_ID);
            }
        } else if (v == mEditPayloadButton) {
            showPayloadEditDialog();
        } else if (v == mEditSubscriptionsButton) {
            editSubscriptions();
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T01:28:03.410

在安装地牢示例以及将代码示例应用于我的项目时，我也遇到了同样的错误。我注意到，如果我去 makerequestbundle 并将 API_VERSION 更改为 1，那么我可以在没有此错误的情况下进行应用内管理购买。

我注意到的另一件事是，如果保留在 API_VERSION 2 上，订阅执行时不会出现此错误。

我想知道这是否是服务器端错误，因为我查看了代码并找不到问题。我的产品 ID 都匹配等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:11:18.877

我经历了同样的行为。我读过的许多帖子都说这只是一个服务器端错误，您对此无能为力。

但是，我决定`InApp Billing sample code`从我的一个朋友那里得到一个旧版本，现在我不再体验`item not found error`显示购买屏幕之前的体验。

这使我相信在更新的`InApp Billing sample code`.

我还没有机会分析旧示例代码和新示例代码之间的差异。

但我能告诉你的是，如果你能获得示例代码的旧副本，那么你将不再遇到你遇到的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:33:43.520

当您的产品 id（在 apk 文件中）与产品 id（写在市场帐户的产品列表中）不匹配时，会发生错误。

如果您使用的是“android.test.purchased”，那么您无需上传您的 apk。

最重要的一件事是，您必须在代码中添加“公钥”。此步骤必须使用您的 Android 示例或您自己的应用程序代码。

请参阅此链接以获取公钥：http:
[//developer.android.com/guide/market/billing/billing_integrate.html](http://developer.android.com/guide/market/billing/billing_integrate.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T13:03:48.540

不幸的是，看起来如果您将 API 更改为 1，订阅将被禁用。因此，这实际上消除了“未找到项目”错误，但使订阅不起作用（它们必须仅在 API 2 中可用）。

所以，回到绘图板。我将重构代码以返回 API 1（用于非订阅请求）和 API 2 用于所有其他请求。似乎是一个有点不优雅的解决方案。

# tsql - 通过选择插入表变量中的语法不正确

> ID：10775010
> 
> 赞同：0
> 
> 时间：2012-05-27T15:15:42.510
> 
> 标签：tsql

我不知道这到底在抱怨什么，对我来说看起来不错：

```
DECLARE @newidentity int 
SET @newidentity = scope_identity()
select @newidentity

Insert into @Companies (select @newidentity, Name from Company where Name = 'Parker') 
```

我得到以下插入行：

> 关键字“select”附近的语法不正确。
> ')' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T15:18:14.270

尝试不带括号并指定公司领域，请：

```
INSERT INTO @Companies 
            (field1, 
             field2) 
SELECT @newidentity, 
       Name 
FROM   Company 
WHERE  Name = 'Parker' 
```

是什么`@Companies`？

# wordpress - wordpress - 检查附件是否存在

> ID：10775011
> 
> 赞同：1
> 
> 时间：2012-05-27T15:15:59.080
> 
> 标签：wordpress, attachment

我有一个在 wordpress 中创建附件（zip 文件）的功能。

相关代码如下：

我的问题是：有没有办法在创建新附件之前检查相同的附件名称（或 ID 或文件类型）是否已经存在？（意思是在将附件插入数据库之前..）

在我目前的状态下，每次运行此函数时都会创建附件。这意味着它可以每隔一段时间创建一个新附件的数据库记录——即使真正的文件只有一个文件。

```
$attachment = array(
     'guid' => $wp_upload_dir['baseurl'] . _wp_relative_upload_path( $path  ), 
     'post_mime_type' => $wp_filetype['type'],
     'post_title' => preg_replace('/\.[^.]+$/', '', basename($path )),
     'post_content' => '',
     'post_status' => 'inherit'
  );

$attach_id = wp_insert_attachment( $attachment, $path , $post_id); // perform the magic

  require_once(ABSPATH . 'wp-admin/includes/image.php');

  wp_update_attachment_metadata( $attach_id, $attach_data ); // perform the magic II 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T23:59:30.897

有关您的代码发生位置的更多上下文会很有用......

尝试这样的事情来检查附件是否存在：

```
global $wpdb;
$title_exists = $wpdb->get_results( 
    $wpdb->prepare( 
        "SELECT ID FROM $wpdb->posts 
        WHERE post_title = '$post->post_title' 
        AND post_type = 'attachment'"
    ) 
); 
```

更改`post_title = '$post->post_title'`您需要的任何检查。

参考：[WordPress StackExchange - 不允许相同的帖子标题](https://wordpress.stackexchange.com/q/54258/12615)

# android - 读取给定行中特定字段的问题

> ID：10775013
> 
> 赞同：0
> 
> 时间：2012-05-27T15:16:14.183
> 
> 标签：android, sqlite, cursor

我试图使用下面的代码获取给定 ID 的相应标题

```
public String get_Title(int id){
        Cursor c = db.query(true, DATABASE_TABLE, new String[] {
                APP_TITLE,
                },
                KEY_ROWID + "="  + id,
                null,
                null,
                null,
                null,
                null);

                String Final = c.getString(0);

                return Final;

        } 
```

我不断收到由索引超出范围引起的异常。IM 对光标不好，所以如果有人可以在这里帮助我。:S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T15:20:29.810

你必须在`String Final = c.getString(0)`打电话之前`c.moveToFirst()`或`c.moveToNext()`然后它应该工作。因为`Cursor`隐式定位**到第一行之前的**位置，所以您必须首先移动`Cursor`到第一行，然后才能从中获取数据。

**编辑：**

* * *

**所以它应该是这样的：**

```
if (c.getCount()) { // if there is some data
   c.moveToFirst();
   String Final = c.getString(0);
}
else {
   Toast.makeText(YourActivityName.this, "No data found", Toast.LENGTH_SHORT).show();
} 
```

所以你写了你不擅长工作，`Cursor`几乎没有介绍：

> 如果执行任何语句，总是会返回 Cursor 类的实例。它是数据库游标的版本，在许多数据库系统中使用。

```
Class Cursor have following few basic methods: 
```

*   getCount() - 获取实际游标中有多少行
*   moveToFirst()、moveToNext() 等 - 用于在行之间移动
*   getColumnNames() - 获取列名
*   getColumnIndex() - 获取给定列名的从零开始的索引...
*   getString()、getInt() 等 - 获取请求列索引的数据
*   requery() - 再次执行游标
*   close() - 释放游标资源。
*   接下来...

有关使用光标的更多信息，您可以[在此处找到](http://developer.android.com/reference/android/database/Cursor.html)

问候

# node.js - node.js websocket 服务器到 html

> ID：10775016
> 
> 赞同：0
> 
> 时间：2012-05-27T15:16:24.337
> 
> 标签：node.js, websocket

我想知道你是否可以帮助我解决一个难题。我是 node.js 的新手，希望能得到一些帮助。

我有一个使用 jquery 和 socket.io.js 外部服务器的简单 html（客户端）页面。客户端将事件发送到用作 websocket 服务器的 node.js 应用程序，这运行良好且符合预期。

但是，我对如何将传入事件写入比 node.js 应用程序中的 console.log 更有用的东西一无所知。

目前，它再简单不过了。

```
var io = require('socket.io').listen(8000);

io.set('log level',1);

io.sockets.on('connection', function (socket) {  
    socket.on('clientevent', function (message) {
        console.log(message);
    });
    socket.on('disconnect', function () {
        console.log('disconnected');
    });
}); 
```

我希望能够将来自 client.html 的事件写入来自 node.js 应用程序的一些 html (DOM)。我想用 jquery 的 $('#event').append(message) 之类的东西来做到这一点，并且还能够通过 $('#someid').click 之类的东西与 node.js 服务器对话...

还是我完全错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:27:13.543

基本的例子是完美的。[使用 Jquery 和 DOM 操作的 Socket.io 示例](https://gist.github.com/2814934)为您提供了使用 Jquery 和 DOM 操作的更详细的示例。您必须将 client.html 上传到 Web 服务器，从节点运行 app.js，然后访问 client.html。

Socket.io 侦听端口 8000，并且客户端已经配置为在该端口访问它。具体参考使用 Jquery进行[DOM 操作的代码。](https://gist.github.com/2814934#L44)

希望这可以帮助。

# r - 根据 2 个条件从采样创建向量

> ID：10775017
> 
> 赞同：4
> 
> 时间：2012-05-27T15:16:27.347
> 
> 标签：r, conditional, simulation, sampling

我想从一个向量中采样值`s<-0:1440`来创建一个向量`u`，以便`sum(u)=x`同时`length(u)<k`，对于给定的 `k` 和`x`。显然`k*max(s)>sum(u)`。

有没有办法蛮力模拟许多这样的`u`向量？我想避免弄乱概率分布（用于采样），我不在乎是否`u`会丢弃某些向量。

**编辑：**关于 P Lapointe 对`length(u)`. 重要的是`length(u)`不应该是固定的 ( `length(u)<k`) 以便向量`u`是可变长度的。另一种方法是修复`length(u)=k`，但算法应该能够在 u 向量中随机插入（模拟）零。这将导致通过添加零，`sum(u)`保持不变但`length(u)`增加一（直到`length(u)=k`）。零点随机出现很重要（不仅仅是在模拟向量的末尾，只是为了满足`length(u)=k`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T02:16:20.587

好的，这是一个回答你问题的算法。基本上，我们正在做两个随机样本。第一个找到满足`length(u)<k`约束的 ak。使用该 k，然后我们使用另一个样本来查找`k-1`数字。这在算法中被调用`initial`。当我们找到一个`k-1`低于`x`所需总和的样本时，我们添加 的差`x-sum(initial)`来完成系列。

```
#Inputs
x <-2500 # desired sum
s1<-0:min(1440,x) #universe
max.k <-10

k <-sample(3:(max.k-1),1) #length(u)<k, starts at 3 because low k can be problematic 
                          #with current inputs
initial <-x+1 #deliberately above limit to initialize the while
u <-s1+1      #deliberately above limit to initialize the while

while (sum(initial)>x | max(u)>max(s1)) {
initial <-sample(s1,k-1,replace=TRUE) #Find k-1 samples
u <-c(initial,x-sum(initial)) #add number that makes sum == x
}
 #example 
 > k
[1] 4
> x
[1] 2500
> u
[1]  282 1337  876    5
> sum(u)
[1] 2500 
```

此外，如果您有一个很大`max.k`的 ，添加一个概率向量可能是一件好事，该向量可以为样本中的低数字提供更多概率。否则，在当前示例中，如果您有多个超过 1000 的数字，则很难得到 sum==2500。

```
prob1 <-1/((s1+1)*max.k ) #gives more probality to low numbers

while (sum(initial)>x | max(u)>max(s1)) {
initial <-sample(s1,k-1,replace=TRUE,prob=prob1) #Find k-1 samples
u <-c(initial,x-sum(initial)) #add number that makes sum == x
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:14:01.060

`length(u)<k`我不认为你可以在没有 MIP的情况下强行强制约束。但是，如果您将其固定为一个数字，则可以使用`sample`.

在这个例子中，前五行是样本，总和被添加到矩阵的最后一行。`replicate`如果找不到匹配项，您可以增加（当前为 20000）的大小。您还应该检查`range(all[k+1,])`您希望的总和 ( `x`) 是否在采样总和内。

```
set.seed(1)
s<-0:1440 #universe
k <-5 #fixed number of items in sample
x <-2500 # desired sum
all <-replicate(20000, sample(s,k,replace=TRUE))
all <-rbind(all,colSums(all))
all[,all[k+1,]==x,drop=FALSE] #gives two possible samples

      [,1] [,2]
[1,]  410  241
[2,]  189  687
[3,]  988  401
[4,]  897  983
[5,]   16  188
[6,] 2500 2500 
```

# c - 将字符串中的 strstr 搜索复制到字符串本身

> ID：10775022
> 
> 赞同：1
> 
> 时间：2012-05-27T15:17:03.087
> 
> 标签：c, string, strstr

我正在尝试解析网页并使用 C （受虐狂，我知道）从中提取天气信息。

该页面中的其他内容包括以下几行：

```
 <dt>Chance of <span class='wx-firstletter'>rain</span>:</dt>

                    <dt>Wind:</dt>

        <dt>Humidity:</dt>

        <dt>UV Index:</dt>

<dt>Snowfall:</dt>

        <dt>Sunrise:</dt>

        <dt>Moonrise:</dt>

        <dt>Moonphase:</dt>

                    <dt>Past 24-hr Precip:</dt>

        <dt>Past 24-hr Snow:</dt>

           <dt>Chance of <span class='wx-firstletter'>rain</span>:</dt>

                    <dt>Wind:</dt>

        <dt>Humidity:</dt>

        <dt>UV Index:</dt>

<dt>Snowfall:</dt>

        <dt>Sunset:</dt>

        <dt>Moonset:</dt>

        <dt>Moonphase:</dt>

                    <dt>Past 24-hr Precip:</dt>

        <dt>Past 24-hr Snow:</dt> 
```

下载页面后，将其保存在文件中并使用 fread 在数组中读取它，我使用循环逐行读取数组，将其保存到临时数组 (tmp) 中。处理包含字符串 < dt > 的行的部分如下。

```
 } else if (strstr(tmp,"<dt>")) {
       strcpy(tmp,strstr(tmp,"<dt>")+4);
       strcpy(strstr(tmp,"</dt>")," \0");
       if (strstr(tmp,"Chance of"))
               strcpy(tmp,"Chance of precipitation: ");
       fwrite(tmp,1,strlen(tmp),file_tod);
   } else if .... 
```

除了月相和过去的 24 小时雪线外，一切都很顺利。

```
Chance of precipitation: 
Wind: 
Humidity: 
UV Index: 
Snowfall: 
Sunrise: 
Moonrise: 
Mo>
phase: 
Past 24-hr Precip: 
Paw: 24-hr Snow: 
Chance of precipitation: 
Wind: 
Humidity: 
UV Index: 
Snowfall: 
Sunset: 
Moonset: 
Mo>
phase: 
Past 24-hr Precip: 
Paw: 24-hr Snow: 
```

我没有得到 Moonphase:，而是得到 Mo>\nphase:，而不是得到 Past 24h-Snow:，而是得到 Paw:24-hr Snow:。奇怪的是，只有这些特定的字符串才会发生这种情况。我不能将字符串上 strstr 的结果复制到字符串本身吗？

strcpy(tmp,strstr(tmp,"")+4);

这是违规行吗？我在其余代码中使用相同的方法没有问题。如果我使用中间变量（buff）来存储 strstr 搜索的结果

```
} else if (strstr(tmp,"<dt>")) {
    strcpy(buff,strstr(tmp,"<dt>")+4);
    strcpy(strstr(buff,"</dt>")," \0");
    if (strstr(buff,"Chance of"))
            strcpy(buff,"Chance of precipitation: ");
    fwrite(tmp,1,strlen(buff),file_tod);
} else if .... 
```

一切都好。

感谢您的任何回答，如果很明显，请抱歉。

编辑：想出了这个

```
 } else if (strstr(tmp,"<dt>")) {
       memmove(tmp,strstr(tmp,"<dt>")+4,strlen(tmp)-(strlen(strstr(tmp,"<dt>")+4)));
       *(strstr(tmp,":")+1)=' ';
       *(strstr(tmp,":")+2)='\0';
       if (strstr(tmp,"Chance of"))
               strcpy(tmp,"Chance of precipitation: ");
       fwrite(tmp,1,strlen(tmp),file_tod); 
```

合法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T15:27:29.480

`strcpy()`未定义源字符串和目标字符串重叠时等函数的行为。

如果您必须在原地移动内存（字符串），请确保您知道字符串的长度并使用`memmove()`; 当字符串重叠时，这可以保证工作。

# iphone - 文本长度等于检查

> ID：10775023
> 
> 赞同：0
> 
> 时间：2012-05-27T15:17:11.497
> 
> 标签：iphone, objective-c, ios, xcode

有一个简单的问题。我得到了一个文本字段，该字段得到更新并填充了我想在它们有长度时执行操作的字符。例如，当长度为 12（12 个字符）时，我希望它做某事，当长度为 24 时，等等。

我可以这样做：

```
if (textfield.text.length == 12){
//do something
} 
```

希望有人可以帮助我:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T15:22:06.060

设置一个`UITextFieldDelegate`并实现该`textField:shouldChangeCharactersInRange:replacementString:`方法。计算应用后文本字段将包含的`replacementString`内容，如果它与您要查找的内容匹配，请执行您需要的操作。

请注意，删除和粘贴事件也会调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T15:24:26.720

你应该使用委托

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

并使用如果您在其中创建了自己，就像

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    if (textfield.text.length == 12){
    //do something
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T19:46:50.350

写下这段代码：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
{
    if (textfield.text.length == 12)
       {
           condition......
       }
    else if (textfield.text.length == 24)
       {
           condition......
       }
    else
       {
           condition......
       }
} 
```

# vb.net - 将 1.5 转换为 3/2 VB 2008

> ID：10775024
> 
> 赞同：0
> 
> 时间：2012-05-27T15:17:13.277
> 
> 标签：vb.net

我正在创建一个计算器，我需要在其中提供一个选项，就像 CASIO 计算器一样，我的意思是我想将“1.5”转换为“3/2”或“2.5”转换为“5/2”

解释：

```
Textbox1.Text = 50

Textbox2.Text = 4

Dividing Textbo1.Text and Textbox2.Text
Calculate...........

Textbox3.text = 12.5 (Normaly) 
```

但我不需要“12.5”我想将其转换为“25/2”

请朋友帮帮我。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T15:51:54.863

你想做的很奇怪，但它是可以实现的。这可能不是最好的解决方案，但它可以帮助您 - 将其转换为函数，以便您以后使用

为了方便起见，限制为 (n) 个小数位，例如 1 dp 对于上面给出的示例，50/4 = 12.5

要达到 25/2，那么你需要这个计算得到整数部分 = 12 得到十进制部分 = 0.5

得到值 after(.) = 5 for 1 dp, divider = 10, for 2 dp divider=100，所以我们将使用 10，所以我们有 5/10。您必须检查 10 是否可被 5 整除，直到 [No more?] = 1/2 然后您有 Your (12 x (bottom) + top) / bottom = (12x2+1)/2 = 25/2

此步骤可能还有其他替代方法...

# css - 将 div 放置在具有流畅布局的 html 画布上

> ID：10775027
> 
> 赞同：0
> 
> 时间：2012-05-27T15:17:38.767
> 
> 标签：css, html5-canvas, fluid-layout

我正在玩我的第一个流畅布局，我有一个 html 画布，我可以使用绝对定位将项目放置在顶部，但是一旦我这样做，它就会失去根据查看页面的浏览器而改变的流畅能力。是否可以在不失去使用流畅布局方面的能力的情况下放置在画布上。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T01:14:46.460

我无法打开您列出的 URL，但如果我正确理解您的问题，您可以通过设置左右坐标来获得一个绝对定位的框来调整视口的宽度。例子：

```
#box {
  position:absolute;
  top:0;
  left:20px;
  right:20px;
} 
```

# python - 查找字符串之间的差异

> ID：10775029
> 
> 赞同：6
> 
> 时间：2012-05-27T15:17:43.337
> 
> 标签：python, string

我有以下函数，它获取源和修改后的字符串，并将其中的更改后的单词加粗。

```
def appendBoldChanges(s1, s2):
    "Adds <b></b> tags to words that are changed"
    l1 = s1.split(' ')
    l2 = s2.split(' ')
    for i, val in enumerate(l1):
        if l1[i].lower() != l2[i].lower():
            s2 = s2.replace(l2[i], "<b>%s</b>" % l2[i])

    return s2
print appendBoldChanges("britney spirs", "britney spears") # returns britney <b>spears</b> 
```

它适用于具有相同字数的字符串，但对于不同的字数（如`sora iro days`和`sorairo days`.

如何考虑间距？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-27T15:58:18.540

您可以使用[difflib](http://docs.python.org/library/difflib.html)，并这样做：

```
from difflib import Differ

def appendBoldChanges(s1, s2):
    "Adds <b></b> tags to words that are changed"
    l1 = s1.split(' ')
    l2 = s2.split(' ')
    dif = list(Differ().compare(l1, l2))
    return " ".join(['<b>'+i[2:]+'</b>' if i[:1] == '+' else i[2:] for i in dif 
                                                           if not i[:1] in '-?'])

print appendBoldChanges("britney spirs", "britney sprears")
print appendBoldChanges("sora iro days", "sorairo days")
#Output:
britney <b>sprears</b>
<b>sorairo</b> days 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T15:49:15.597

查看[`difflib`](http://docs.python.org/library/difflib)模块，您可以使用 a[`SequenceMatcher`](http://docs.python.org/library/difflib#sequencematcher-objects)来查找文本中更改的区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-21T20:54:14.817

一个小的升级 tp @fraxel 答案，它返回 2 个输出 - 原始版本和带有标记更改的新版本。在我看来，我还将单行代码更改为更具可读性的版本

```
def show_diff(text, n_text):
    seqm = difflib.SequenceMatcher(None, text, n_text)
    output_orig = []
    output_new = []
    for opcode, a0, a1, b0, b1 in seqm.get_opcodes():
        orig_seq = seqm.a[a0:a1]
        new_seq = seqm.b[b0:b1]
        if opcode == 'equal':
            output_orig.append(orig_seq)
            output_new.append(orig_seq)
        elif opcode == 'insert':
            output_new.append("<font color=green>{}</font>".format(new_seq))
        elif opcode == 'delete':
            output_orig.append("<font color=red>{}</font>".format(orig_seq))
        elif opcode == 'replace':
            output_new.append("<font color=blue>{}</font>".format(new_seq))
            output_orig.append("<font color=blue>{}</font>".format(orig_seq))
        else:
            print('Error')
    return ''.join(output_orig), ''.join(output_new) 
```

# mysql - MySQL 查询 WHERE `Field_x` - `Field_y` 小于等于

> ID：10775032
> 
> 赞同：0
> 
> 时间：2012-05-27T15:17:55.633
> 
> 标签：mysql

我不知道如何执行查询以选择 field_x (minus) field_y 低于 equal 的位置？

样本 ： `SELECT * FROM $tableName WHERE Field_X - Fiel_Y < 50`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T15:27:39.130

你的意思是低于或等于某个常数？

```
SELECT * FROM $tableName WHERE Field_X - Field_Y <= 50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T15:27:11.987

根据你的问题，应该是这样

```
SELECT * FROM tableName WHERE Field_X - Field_Y <= 50 
```

# php - BINARY 数据未插入从 BINARY(20) 列中提取的 mysql？

> ID：10775035
> 
> 赞同：0
> 
> 时间：2012-05-27T15:18:02.540
> 
> 标签：php, mysql, binary

我有一些数据要插入到一个表中，该表是从 mysql 中另一个具有数据类型的表中检索的`BINARY(20)`。

提取的数据在变量中`$binary['hash'];`

**/l÷^8Ô]¿\µK<þeû**

当我尝试使用如下所示插入另一个表`PDO`时，（列哈希`BINARY(20)`也是）

```
$q = $dbc -> prepare("INSERT INTO table VALUES (hash) VALUES (?)");
$q -> execute(array($binary['hash'])); 
```

我收到这样的错误，

**您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'VALUES ('\0/l÷^8Ô]¿\µK<þeû')' 附近使用正确的语法**

我注意到 的值`$binary['hash']`不同并且它没有插入！

我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:23:09.547

正确的sql语句应该是：

```
INSERT INTO table (hash) VALUES (?) 
```

没有第一个`VALUES`关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T15:34:11.240

您的 SQL 语句中有`values`两次，这就是错误

INSERT INTO table **VALUES (hash) VALUES (?)**

应该是

```
INSERT INTO table (hash) VALUES (?) 
```

# javascript - 在一段文本中查找单词

> ID：10775038
> 
> 赞同：1
> 
> 时间：2012-05-27T15:18:08.733
> 
> 标签：javascript, jquery

我有一个`<p>`标签，标签内有一段文字。

```
<p>"Hello Lorem ipsum Hello dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex Hello ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecatHello  cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum Hello.</p> 
```

在`<p>`标签内，有一大段文字。在正文中，有几个“*你好*”。我想遍历`<p>`标签内的整个文本块，找到**所有**的“ *Hello* ”字符串，并将那些用 html 标签找到的“ *Hello* ”字符串包装起来。

有没有一种方法，通过 jQuery 的选择器，我可以遍历`<p>`标签中的所有文本，找到所有完全是“你好”的词，用`<strong class="test">`标签包装这个词？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T15:28:10.743

它将包含文本中的所有*单词*“Hello”：

```
$("p").html(function(index, value) {
    return value.replace(/\b(Hello)\b/g, '<strong class="test">$1</strong>');
});​ 
```

如果您需要包装*文本*“Hello” ，请在方法`\b`的正则表达式中使用相同的`replace`方法，而不使用两者。

**演示：http:** [//jsfiddle.net/EGtBy/](http://jsfiddle.net/EGtBy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T15:29:22.303

您可以使用 jquery 对象的[text()](http://api.jquery.com/text/)函数将段落作为字符串获取。您可以根据需要修改该字符串，然后使用[html()](http://api.jquery.com/html/)函数替换该段落。

# java - 如何使用 jxl 阅读和编辑受密码保护的工作簿

> ID：10775044
> 
> 赞同：-3
> 
> 时间：2012-05-27T15:18:34.550
> 
> 标签：java, excel, jxl

如何以编程方式检查 Excel 文件的工作簿是否受密码保护？如果受保护，我如何使用 jxl 读取和编辑它？

对于背景，我想让文件密码受保护，但找不到使用 jxl 的方法，所以我使用了`com.jexcel.util.ExcelAdapter`. 在excel文件上设置了密码，但我找不到解除文件保护以供阅读和编辑的方法。

如果我在工作表上设置密码，则使用 jxl 可以阅读它，但我不知道如何在工作簿上设置密码以及如何解锁密码。有一种方法`isProtected()`只是告诉它受到保护，但我不确定如何解锁和打开它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-28T00:57:19.503

使用 jexcelapi_2_6_12，工作簿只能通过使用来保护

workbook.setProtected(true);

它可以在不受保护的情况下被阅读和编辑。我们无法在工作簿上设置密码。如果工作簿已经受密码保护，则可以通过捕获“PasswordException”通知用户删除密码。

# java - 如何更改默认目录以创建新文件

> ID：10775045
> 
> 赞同：1
> 
> 时间：2012-05-27T15:18:46.130
> 
> 标签：java, file, web-applications, netbeans

我在我的 java web 应用程序中使用了以下 c'tor

```
public File(String pathname) 
```

例如：
File =new File("1.txt");
然后我在路径中得到以下文件：

```
C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.22\bin\1.txt 
```

我的问题：为什么这是使用上述 c'tor 时的默认文件夹，以及是否有任何选项可以默认更改项目文件夹，例如。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:23:52.723

由于您在创建文件时没有给出路径，因此默认情况下它正在创建 .Java 文件所在的文件。为了防止这种情况，您可以使用，

```
File file = new File ( "C:\\1.txt" ); 
```

现在它将在 C: 驱动器中创建 1.txt。

您可以查看[文件文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html)。没有办法设置默认路径，而是在`File()`它自己的构造函数中指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T16:08:24.140

> 并且如果有任何选项可以默认更改项目文件夹，例如。

在 servlet 中，您可以使用

```
File f = new File(getServletContext().getRealPath("/1.txt")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T15:25:43.333

相对路径的文件使用`System.getProperty("user.dir")`应用程序启动目录（这几乎总是一个坏主意）。在 Web 应用程序中，您希望使用与`getRealPath("/1.txt")`Web 应用程序目录相关的 Servlet。注意不是`\\`但是`/`。

# android - 从其他方法更新微调器

> ID：10775047
> 
> 赞同：0
> 
> 时间：2012-05-27T15:19:14.953
> 
> 标签：android

我在 OnCreate 方法中有一个以下 Spinner：

```
 spinnerArrayAdapter = new ArrayAdapter<String>(this,   android.R.layout.simple_spinner_item, accounts);
        spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); // The drop down view
        spinner.setAdapter(spinnerArrayAdapter); 
        spinner.setOnItemSelectedListener(this); 
```

我想在其他方法中向 Spinner 添加一些条目，如下所示：

```
spinnerArrayAdapter.add(value.toString());
spinner.setAdapter(spinnerArrayAdapter); 
```

但应用程序崩溃。我能做些什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:30:19.640

你有两种可能性：

任何一个：

在您即将向适配器添加新记录的地方： `spinnerArrayAdapter.add("Your new item");` `spinnerArrayAdapter.notifyDataSetChanged();`

或者：

在初始化适配器时的 onCreate 中添加`spinnerArrayAdapter.setNotifyOnChange(true);` 当您想稍后将记录添加到适配器时只需调用`spinnerArrayAdapter.add("Your new item");`. 无需调用`notifyDataSetChanged()`，因为它已被`add`内部调用。

在这两种情况下，您都不必将适配器重新分配给微调器。

如果您使用数组初始化适配器，则 add 方法将引发异常，因为适配器内部存储的内容`(List<T>) Arrays.asList(objects)`是`objects`您在构造函数中提供的数组。`asList`返回数组上的 List 接口包装器实现，因此它不支持添加操作。为了能够使用适配器的添加方法，您必须将支持数据作为列表提供，并带有支持的添加/删除方法 - 我建议使用 ArrayList。

所以在你的情况下，它是这样初始化的：

```
spinnerArrayAdapter = new ArrayAdapter<String>(
        this, android.R.layout.simple_spinner_item, 
        new ArrayList<String>(Arrays.asList(accounts))); 
```

或更长但更有效（例如，您不会创建稍后放弃的开销列表对象）

```
final int length = accounts.length;
ArrayList<String> backingData = new ArrayList<String>(length);
for(int i=0; i<length; i++) {
    backingData.add(i, accounts[i]);
}
spinnerArrayAdapter = new ArrayAdapter<String>(
        this, android.R.layout.simple_spinner_item, backingData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T15:46:04.443

这可能有效...

```
ArrayList<String> accounts = new ArrayList<String>(Arrays.asList("Item A", "Item B"));
ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this, R.layout.list_item, accounts);

spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinnerArrayAdapter.add("Item C");
spinnerArrayAdapter.setNotifyOnChange(true);

spinner.setOnItemSelectedListener(this);
spinner.setAdapter(spinnerArrayAdapter); 
```

# windows-phone-7 - 在 WP7 中创建用于背景渲染的 GraphicDevice

> ID：10775052
> 
> 赞同：0
> 
> 时间：2012-05-27T15:19:45.337
> 
> 标签：windows-phone-7, xna

是否可以创建一个单独的 GraphicDevice 用于 WP7 中的背景渲染？

我正在尝试做的是偶尔使用 XNA 渲染图像并将其用于 silverlight 应用程序。目前，我可以使用 SharedGraphicsDeviceManager 来实现这一点，它为当前的 GraphicDevice 提供了访问权限。缺点是我不得不为每个图像打开和关闭共享模式（SetSharingMode）——这确实需要一些时间（100-200 毫秒）。我宁愿为此使用单独的设备。

另一种选择是对整个页面使用纯 XNA 渲染模式，但这会给手机带来不必要的压力，因为它每秒会渲染 30 次大部分是静态的图像。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:33:41.627

将图像绑定到页面背景怎么样？

```
<Grid x:Name="LayoutRoot" Background="{Binding BackgroundImage}">
    <!-- other content for the page -->
</Grid> 
```

然后，您可以随时在 ViewModel 的代码隐藏中更改图像

```
public class ViewModel
{
    private ImageBrush _backgroundImage;

    public ImageBrush BackgroundImage
    {
        get { return _backgroundImage; }
        set
        {
            _backgroundImage = value;
            OnPropertyChanged("BackgroundImage");
        }
    }

    // pass the uri of the newly saved image. Even if it's the same location
    // firing the PropertyChanged event will make the page get the new image
    public void ChangeImage(Uri newImageLocation)
    {
        BitmapImage source = new BitmapImage(newImageLocation);
        BackgroundImage = new ImageBrush { ImageSource = source}; 
    }
} 
```

# ruby - RVM 不响应任何操作

> ID：10775053
> 
> 赞同：0
> 
> 时间：2012-05-27T15:19:53.710
> 
> 标签：ruby, macos, rvm

希望在这里得到一些帮助，因为我很坚持这个。

我今天遇到了 RVM 停止响应操作的问题。我的操作系统是 Lion，我的 RVM 安装已经运行了好几个月。我想不出任何最近的系统更改可能会破坏我的 RVM 安装。

发行`rvm`返回的正是您所期望的：[http ://cl.ly/3V0M3k1k13453Z0B0M1j](http://cl.ly/3V0M3k1k13453Z0B0M1j)

但是，如果我使用任何 RVM 操作，它就会永远挂在那里。

示例：`rvm list` 示例：`rvm install 1.9.3` [http ://cl.ly/3R2b3H3u223I2E1v101j](http://cl.ly/3R2b3H3u223I2E1v101j)

`Ctrl`唯一的方法是通过点击+来中断命令`C`。

到目前为止，我已经手动卸载了 RVM 并成功重新安装。结果是一样的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:50:20.283

要检查的事项是：

1.  您的 env PATH 条目使用`echo $PATH`. 这对您的环境来说是否合理？RVM 的条目应该是链中的第一个或第二个。
2.  显示什么`which rvm`？这对您的环境和您所做的 RVM 安装类型有意义吗？标准 RVM 将位于`~/.rvm`.
3.  说什么`rvm info`，这对您的环境来说是否合理？

有了这些信息，我们可以为您提供更好的答案，您可以查看[RVM 安装页面](https://rvm.io/rvm/install/)上的诊断信息，并将您的输出与您应该看到的内容进行比较。

* * *

这是在我的机器上全新安装 RVM 和 Ruby 1.9.3 的输出：

```
红宝石-1.9.3-p194：

  系统：
    uname：“Darwin Greg.local 10.8.0 Darwin Kernel Version 10.8.0：Tue Jun 7 16:33:36 PDT 2011；root:xnu-1504.15.3~1/RELEASE_I386 i386”
    bash: "/bin/bash => GNU bash，版本 3.2.48(1)-release (x86_64-apple-darwin10.0)"
    zsh: "/bin/zsh => zsh 4.3.9 (i386-apple-darwin10.0)"

  转速：
    版本：“Wayne E. Seguin，Michal Papis [https://rvm.io/] 的 rvm 1.13.8（稳定版）”
    更新：“12 分 39 秒前”

  红宝石：
    翻译：“红宝石”
    版本：“1.9.3p194”
    日期：“2012-04-20”
    平台：“x86_64-darwin10.8.0”
    补丁级别：“2012-04-20 修订版 35410”
    full_version：“ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin10.8.0]”

  家园：
    宝石：“/Users/greg/.rvm/gems/ruby-1.9.3-p194”
    红宝石：“/Users/greg/.rvm/rubies/ruby-1.9.3-p194”

  二进制文件：
    红宝石：“/Users/greg/.rvm/rubies/ruby-1.9.3-p194/bin/ruby”
    irb：“/Users/greg/.rvm/rubies/ruby-1.9.3-p194/bin/irb”
    宝石：“/Users/greg/.rvm/rubies/ruby-1.9.3-p194/bin/gem”
    耙子：“/Users/greg/.rvm/gems/ruby-1.9.3-p194@global/bin/rake”

  环境：
    路径：“/Users/greg/.rvm/gems/ruby-1.9.3-p194/bin:/Users/greg/.rvm/gems/ruby-1.9.3-p194@global/bin:/Users/greg/ .rvm/rubies/ruby-1.9.3-p194/bin:/Users/greg/.rvm/bin:/Users/greg/.pythonbrew/bin:/Users/greg/.pythonbrew/pythons/Python-2.7.3 /bin:/Users/greg/bin:/usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/库/PostgreSQL/9.0/bin:/usr/local/git/bin"
    GEM_HOME：“/Users/greg/.rvm/gems/ruby-1.9.3-p194”
    GEM_PATH: "/Users/greg/.rvm/gems/ruby-1.9.3-p194:/Users/greg/.rvm/gems/ruby-1.9.3-p194@global"
    MY_RUBY_HOME：“/Users/greg/.rvm/rubies/ruby-1.9.3-p194”
    IRBRC：“/Users/greg/.rvm/rubies/ruby-1.9.3-p194/.irbrc”
    红宝石：“”
    宝石：“”

```

# c++ - 在 C++ 中为特定方法调用关闭静态类型检查

> ID：10775056
> 
> 赞同：1
> 
> 时间：2012-05-27T15:20:29.293
> 
> 标签：c++

我正在使用类模板。我有一个方法可以检查它的参数类型是基本类型（如“int”）还是对象的实例（使用 typeid）。如果它是一个对象，我想在该实例上调用一个方法。我的问题是当类型变量绑定到“int”时编译器会抱怨。

有没有办法强制在运行时执行检查？

我在 OS X Lion 上使用 g++。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T15:23:13.203

您需要使用模板专业化来实现这一点，而不是`typeid`. 我相信 SFINAE 可以帮助您更快地为所有基本类型编写一个。

# c++ - 在堆中创建数组并使用/不使用 shared_ptr 将其删除时崩溃

> ID：10775059
> 
> 赞同：2
> 
> 时间：2012-05-27T15:20:46.610
> 
> 标签：c++, new-operator, shared-ptr, delete-operator

我完全知道，如果我想创建一个指向数组的智能指针，最好的方法是使用

```
 boost::shared_array<T>( new T[20] ); 
```

我不明白的是当这种类型的共享指针超出范围时我遇到的崩溃。

```
 boost::shared_ptr<T>( new T[20] ); 
```

我一直认为上面的代码会造成泄漏，因为它在数组的第一个元素上调用 delete 并保持其他元素不变，但事实并非如此，我有一个分段错误。

你能帮我理解为什么吗？如果我不使用共享指针而是使用普通的香草指针，我的行为最糟糕

```
 CMyClass *p = new CMyCLass[10];
       ///....do stuff
       delete p;

       *** glibc detected *** ./test: munmap_chunk(): invalid pointer: 0x088eb00c *** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T15:24:02.827

> **你能帮我理解为什么吗？如果我不使用共享指针而是使用普通的香草指针，我的行为最糟糕**

因为您的代码具有**Undefined Behavior**。

```
CMyClass *p = new CMyCLass[10];
///....do stuff
delete []p;
      ^^^^ <-------------that is Missing! 
```

你需要使用`delete []`.

1.  如果您分配使用，则`new`必须使用`delete`.
2.  如果您分配使用，则`new []`必须使用`delete []`

否则会导致**未定义的行为**。还有一个是未定义的行为，那么你的程序可能会显示任何行为。它可能会崩溃或工作或其他任何东西（字面意思），所以所有安全的赌注都被取消了。

> **如何使用自定义解除分配`shared_ptr`？**

因为`shared_ptr`您应该使用自己的自定义删除函数来适当地释放。如果使用 进行数组分配`new []`，则需要使用`delete []`. 就像是：

```
template
class CustomDeleter
{
public:
    void operator () (T* d) const
    {
        delete [] d;
    }
};

int main ()
{
    std::shared_ptr array(new Myclass[256], CustomDeleter());
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T15:24:13.407

如果它`new`编辑了一个元素，它需要是`delete`d。如果它是`new[]`ed，它需要是`delete[]`d。

我怀疑当 shared_ptr 尝试`delete`代替`delete[]`元素时会出现您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T15:26:36.603

如果您使用分配数组`new T[N]()`，则必须调用`delete []`以释放它，但您的`shared_ptr`调用`delete`会导致错误。最简单的方法是使用`boost::shared_array<T>`将数组存储在 ref 计数指针中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T16:26:06.597

为什么不使用智能指针数组？

# oracle - 从开始日期获取结束日期

> ID：10775070
> 
> 赞同：3
> 
> 时间：2012-05-27T15:22:27.060
> 
> 标签：oracle

我的数据库中有一个 EMP 表，其中包含以下字段：

```
id,name,post,joining_date. 
```

每当任何员工名称发生变化时，都会插入一个带有新名称的新行。意味着如果员工获得任何晋升，他会有多行。现在我想为每个员工明智地指定结束日期。就像我的日期是这样的：

```
id        name          start_date     post
1          x             24-JAN-05      Software Engineer
2          y             23-JAN-08      Associate Software Engineer
3          x             26-Aug-05      Senior Sofware Engineer
4          y             20-FEB-09      Sofware Engineer 
```

我想要以下格式的数据：

```
id        name          start_date     end_date        post
1          x             24-JAN-05      26-Aug-05      Software Engineer
2          x             26-Aug-05      null           Senior Software Engineer
3          y             23-JAN-08      20-FEB-09       Associate Software Engineer
4          y             20-FEB-09       null           Software Engineer 
```

因此，我想获取每个员工每个职位的结束日期的数据。我不想使用 PL/SQL。我只想使用查询。我希望它有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T15:56:09.687

开始了：

```
select id, name, start_date, lead(start_date) over (partition by name
order by start_date) as end_date, post from emp; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T15:57:08.140

您可以`LEAD`为此使用分析功能

```
SELECT id,
       name,
       start_date,
       LEAD(start_date) over (partition by name
                                  order by start_date) end_date,
       post
  FROM emp 
```

不过，据推测，在您的真实表中，您可以使用某种形式，`EMPLOYEE_ID`而不是使用`NAME`来确定哪些行放在一起。否则，一旦您有两名名为“John Smith”的员工，就会出现问题。

# ios - iOS 5 应用程序终止时间戳？

> ID：10775073
> 
> 赞同：0
> 
> 时间：2012-05-27T15:22:49.637
> 
> 标签：ios, cocoa-touch

我需要知道应用程序何时终止。我知道您不能依赖 applicationWillTerminate: 从后台/挂起状态调用。我确实注意到当我的应用程序终止时，Snapshots 目录（Library/Caches/Snapshots）确实被触及。然后在随后的应用程序启动时，我可以询问它的修改时间。

您可能想知道为什么我不只标记 applicationDidEnterBackground: 或 applicationWillResignActive: 方法触发的时间。我不想计算应用程序在后台花费的时间。

这是有效的，但我想知道我是否可以依靠这个或者是否有更好的方法（请让有更好的方法）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:05:34.227

我会尝试在退出之前收听发送到您的应用程序的 SIGTERM 信号。不幸的是，您的信号处理程序可以做什么有严格的限制。我不记得您是否可以创建文件，但我会先调查一下，因为您可以在下次启动时检查创建日期。

# c++ - 什么事情（或在什么情况下）可以使 C++ 比 C 慢？

> ID：10775087
> 
> 赞同：16
> 
> 时间：2012-05-27T15:24:51.307
> 
> 标签：c++, c, exception, polymorphism, virtual

这是一个面试问题，面试已经完成。

什么东西可以使 C++ 比 C 慢？

面试官问的很深，每次我说什么的时候总是问“还有别的吗？”。

我的想法：

C 中不可用的 C++ 功能可能需要一些成本。

例如，如果我们在构造函数中使用赋值来初始化类的成员，而不是通过初始化列表，则成员的默认构造函数可能会在构造函数的主体之前调用一次，然后该值被赋值清除。

虚函数需要通过查找虚函数指针来调用。这是一个开销。

有更好的主意吗？

任何帮助将不胜感激。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-27T18:26:47.470

C++ 与 C 相比没有什么*本质上*慢，但是，惯用的 C++ 代码往往比执行相同任务的惯用 C 代码慢得多，也更重。惯用语是这里的关键；如果您编写 C 代码来执行任务的方式与在 C++ 中执行该任务的方式完全相同，那么它会同样慢。另一方面，如果您知道隐藏成本在 C++ 中通常在哪里蔓延，您可以努力将其保持在最低限度，并在不增加成本的情况下获得 C++ 的好处。

首先是动态内存分配。在 C 中，您会看到您所做的每一点动态内存分配，因为它都是显式的（以调用的形式）`malloc`或调用返回分配对象的第三方库函数）。在 C++ 中，许多对象的存储持续时间是自动的类对象仍然会因为其构造函数中发生隐藏分配而导致动态内存分配。一个好的 C++ STL（或第三方库）实现可以通过在对象本身中包含小缓冲区来避免大量此类成本，并且仅在需要大缓冲区时执行动态分配，但实际上很少这样做。（如果我没记错的话，llvm 的 libc++ 会，但 GCC 的 libstdc++ 不会。）由于这是一个实施质量问题，通常不在您自己的代码的控制范围内，您可以在这里做的主要事情是尽量减少影响是意识到自动对象分配动态内存的可能性，并避免创建超出您需要的内容（例如，尽可能使用指针或引用）。这对您的代码也有其他好处。

另一个大领域是字符串处理。在惯用的 C 语言中，弦乐是一举用`snprintf`或类似的方式构建的。在 C++ 和许多其他具有更强大的字符串类/类型的语言中，字符串的连接（逐段构造）是惯用的。这是非常低效的，导致多个分配/解除分配步骤、副本等，更不用说由此产生的内存碎片。我不确定 C++ 的最佳实践会涉及哪些（我不精通 C++），但应该有办法将这种影响降到最低。

当然，最普遍的是隐藏代码。这是一个包罗万象的东西。在 C++ 中编写代码很容易，许多你从未见过的额外代码被执行。构造函数/析构函数、重载的运算符和模板是最明显的原因。同样，如果您想在 C 中*以相同的方式*做事，成本将是相同的，但不同之处在于，在 C 中，您会立即*看到*成本，因为您必须自己编写它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-27T15:27:52.893

没有。事实上，C++ 比 C 更快。曾经`std::sort`与`qsort`?

人们说虚函数需要时间来调用。他们是这样。但是 C 中的等效于在 vtable 中查找也是如此。如果你用两种语言编写等效的逻辑，C++ 版本将更易于维护、更简洁和更快。

编辑：哦，是的，如果需要，您可以`printf`从 C++ 调用，或者如果需要，可以完全重新执行流实现。

我有没有提到由于放错 NULL 终止符而崩溃的程序的性能是相当无关紧要的？

宏和内联函数将“膨胀”一个 C 可执行文件，就像 C++ 中的模板一样。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-27T21:04:21.377

哇...答案中对 C++ 的热爱，所以我会咆哮一下作为魔鬼的拥护者。

在原子语言范围内，我同意在 C++ 中执行很少或没有本质上显着“慢”。在更高的层次上，它变得复杂。C++ 是一个有用的工具，但经常被不[恰当](http://en.wikipedia.org/wiki/Panache)地宣传为所有问题的解决方案。当我们使用最简单的语言来描述问题时会更好，有时是 C++ 其他时候......汇编、操作码、解释语言。

C++在更大程度上依赖编译器来“解释”意图，通过多次迭代爬过模板、类、宏等的许多层。通过翻译的每个循环都有可能遇到[意外后果的规律](http://en.wikipedia.org/wiki/Unintended_consequences)。据我所知，处理器没有本地处理 C++ 结构的寄存器或操作码，因此每个都必须分解为简化的部分。在这方面，编译器和代码标准是王道。在某些情况下，这在哲学上相当于拥有数学博士学位的老师（编译器）教三年级学生（处理器）。

我喜欢 C++ 并保守地使用它，但多年来我很少看到它写得很好。我想强迫一些人查看最终由构建反刍的程序集或机器代码，直到他们了解它是多么复杂。糟糕的 C 是一回事，糟糕的 C++ 可能会成倍恶化。

面试的更好答案......“你的团队什么时候会认为 C++ 不是问题的答案？”

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-27T15:30:10.317

C++ 中的大多数功能都是解决 C 中（潜在）问题的解决方案（例如：构造函数以确保创建的数据包的有效性（`struct`在 C 中）

这意味着要在 C 中编写一个正确的程序以试图避免存在 C++ 功能的问题，您将必须执行与 C++ 在幕后执行的类似操作。这导致两种情况下的性能相似。

当然，您总是可以编写“更快”的草率程序，但并非在所有情况下都能正常工作

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-27T15:44:58.533

> 有更好的主意吗？任何帮助将不胜感激。

C++ 中的 STL 很少比 C 中专门编码的等价物慢。但是，STL 的*便利*性有时会导致编写较慢的代码。例如，假设有一组固定的 100 个项目，其中有 10 个或 15 个可变选择。假设一个程序的时间关键循环多次询问项目是否`i`已被选中。支持这种时间关键循环的快速数据结构将是 100 个布尔值的数组（或向量等）。但是，`std::set<size_t>`在 C++ 中填充 a 可能比填充数组更容易。出于这个原因，C++ 程序员可能更喜欢集合而不是数组。

当然，较慢的代码是否是问题取决于时间关键循环将看到多少服务。如果对数组技术进行编程需要额外的半小时，并且程序生命周期内的总执行时间节省为 0.5 秒，那么 set 技术可能更可取。另一方面，如果总的执行时间节省为 30 天，那么阵列技术可能更可取。

可能会给出许多类似的答案。祝你面试顺利。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-27T15:31:28.277

C 有`restrict`，C++ 没有，尽管大多数编译器都将它作为扩展。

还有 C++ 没有的可变长度数组。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-27T18:05:50.697

先验不是性能问题，但 LLVM 代码库既不使用 RTTI 也不使用异常，因为它们[在代码大小方面被认为成本太高](http://llvm.org/docs/CodingStandards.html#ci_rtti_exceptions)。

# facebook - Facebook 不会保存我的私人保单 URL

> ID：10775089
> 
> 赞同：1
> 
> 时间：2012-05-27T15:25:35.997
> 
> 标签：facebook, url, private, policy

我正在为 Facebook 制作应用程序。当我在块中输入我的隐私政策和条款地址并点击保存时，页面就变成空白了。我已经看过我知道的所有地方，但仍然找不到答案。我正在使用[http://www.quatrodesigns.hostzi.com/privacy.html/](http://www.quatrodesigns.hostzi.com/privacy.html/)当我在浏览器中输入它时它工作正常。我不明白为什么它不会接受它。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:59:17.037

该 URL`hostzi.com`因垃圾邮件或不安全而被阻止。如果您拥有或管理此域，请访问[https://www.facebook.com/help/contact/?id=244560538958131](https://www.facebook.com/help/contact/?id=244560538958131)对屏蔽提出申诉。

请注意，我通过尝试在我的墙上分享 URL 发现了这一点，而 Facebook 的垃圾邮件拦截工具阻止了这一点。

# java - 用于 Coref 分辨率的 Hobbs 算法

> ID：10775097
> 
> 赞同：4
> 
> 时间：2012-05-27T15:26:40.740
> 
> 标签：java, language-agnostic, nlp

我已经实现了 Hobbs 的回指解析算法以及替代方案的 Lappin & Leass 排名。

让我烦恼的是算法的描述是完全非正式的，并且由于我的实现没有正确解决某些句子，我不确定限制是在我的实现上还是在实际算法上。

这是我使用过的版本，在 Jurafsky&Martin 中找到：

> 1.  从直接支配代词的名词短语 (NP) 节点开始。
> 2.  上树到遇到的第一个 NP 或句子 (S) 节点。将此节点称为 X，并将用于到达它的路径称为 p。
> 3.  以从左到右、广度优先的方式遍历节点 X 下的所有分支到路径 p 的左侧。建议将遇到的任何 NP 节点作为前件，并且在它和 X 之间有一个 NP 或 S 节点。
> 4.  如果节点 X 是句子中最高的 S 节点，则按新近度顺序遍历文本中先前句子的表面解析树，最近的在前；每棵树都以从左到右、广度优先的方式遍历，当遇到一个 NP 节点时，将其作为前件提出。如果 X 不是句子中最高的 S 节点，则继续步骤 5。
> 5.  从节点 X 向上爬到遇到的第一个 NP 或 S 节点。调用这个新节点 X，并调用经过的路径到达它 p。
> 6.  如果 X 是一个 NP 节点并且如果到 X 的路径 p 没有经过 X 立即支配的 Nominal 节点，则建议 X 作为前件。
> 7.  以从左到右、广度优先的方式遍历节点 X 下的所有分支到路径 p 的左侧。提出任何遇到的 NP 节点作为前件。
> 8.  如果 X 是 S 节点，则以从左到右、广度优先的方式遍历节点 X 的所有分支到路径 p 的右侧，但不要低于遇到的任何 NP 或 S 节点。提出任何遇到的 NP 节点作为前件。
> 9.  转到第 4 步

查看第 3 步：“路径 p 的左侧”。我解释它的方式是从左到右遍历子树，直到找到包含代词的分支（因此是从代词到 X 的路径的一部分）。在 Java 中：

```
for (Tree relative : X.children()) {
            for (Tree candidate : relative) {
                if (candidate.contains(pronoun)) break; // I am looking to all the nodes to the LEFT (i.e. coming before) the path leading to X. contain <-> in the path
... 
```

但是，这样做不会处理像“房子是亚瑟王本人的房子”这样的句子。这是因为“亚瑟王”包含“他自己”，因此不予考虑。

这是霍布斯算法的限制还是我在这里弄错了什么？

作为参考，Java 中的完整代码（使用斯坦福解析器）在这里：

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.io.Reader;
import java.io.StringReader;
import java.io.StringWriter;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
import java.util.Set;
import java.util.StringTokenizer;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.apache.commons.lang3.ArrayUtils;
import org.apache.commons.lang3.StringUtils;
import org.apache.commons.lang3.StringEscapeUtils;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NamedNodeMap;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

import edu.stanford.nlp.ling.HasWord;
import edu.stanford.nlp.ling.Word;
import edu.stanford.nlp.ling.Sentence;
import edu.stanford.nlp.process.DocumentPreprocessor;
import edu.stanford.nlp.process.Tokenizer;
import edu.stanford.nlp.trees.*;
import edu.stanford.nlp.parser.lexparser.LexicalizedParser;

class ParseAllXMLDocuments {
    /** 
     * @throws ParserConfigurationException 
     * @throws SAXException 
     * @throws TransformerException 
     * @throws ModifyException 
     * @throws NavException 
     * @throws TranscodeException 
     * @throws ParseException 
     * @throws EntityException 
     * @throws EOFException 
     * @throws EncodingException */
    static final int MAXPREVSENTENCES = 4;
    public static void main(String[] args) throws IOException, SAXException, ParserConfigurationException, TransformerException  {
        //      File dataFolder = new File("DataToPort");
        //      File[] documents;
        String grammar = "grammar/englishPCFG.ser.gz";
        String[] options = { "-maxLength", "100", "-retainTmpSubcategories" };
        LexicalizedParser lp = 
                new LexicalizedParser(grammar, options);
        //
        //      if (dataFolder.isDirectory()) {
        //          documents = dataFolder.listFiles();
        //      } else {
        //          documents = new File[] {dataFolder};
        //      }
        //      int currfile = 0;
        //      int totfiles = documents.length;
        //      for (File paper : documents) {
        //          currfile++;
        //          if (paper.getName().equals(".DS_Store")||paper.getName().equals(".xml")) {
        //              currfile--;
        //              totfiles--;
        //              continue;
        //          }
        //          System.out.println("Working on "+paper.getName()+" (file "+currfile+" out of "+totfiles+").");
        //
        //          DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance(); // This is for XML
        //          DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
        //          Document doc = docBuilder.parse(paper.getAbsolutePath());
        //
        //          NodeList textlist = doc.getElementsByTagName("text");
        //          for(int i=0; i < textlist.getLength(); i++) {
        //              Node currentnode = textlist.item(i);
        //              String wholetext = textlist.item(i).getTextContent();
        String wholetext = "The house of King Arthur himself. You live in it all the day.";
        //System.out.println(wholetext);
        //Iterable<List<? extends HasWord>> sentences;
        System.out.println(wholetext);
        ArrayList<Tree> parseTrees = new ArrayList<Tree>();
        String asd = "";
        int j = 0;
        StringReader stringreader = new StringReader(wholetext);
        DocumentPreprocessor dp = new DocumentPreprocessor(stringreader);
        @SuppressWarnings("rawtypes")
        ArrayList<List> sentences = preprocess(dp);
        for (List sentence : sentences) {
            parseTrees.add( lp.apply(sentence) ); // Parsing a new sentence and adding it to the parsed tree
            ArrayList<Tree> PronounsList = findPronouns(parseTrees.get(j)); // Locating all pronouns to resolve in the sentence
            Tree corefedTree;
            for (Tree pronounTree : PronounsList) { 
                parseTrees.set(parseTrees.size()-1, HobbsResolve(pronounTree, parseTrees)); // Resolving the coref and modifying the tree for each pronoun
            }
            StringWriter strwr = new StringWriter();
            PrintWriter prwr = new PrintWriter(strwr);
            TreePrint tp = new TreePrint("penn");
            tp.printTree(parseTrees.get(j), prwr);
            prwr.flush();   
            asd += strwr.toString();
            j++;
        }
        String armando = "";
        for (Tree sentence : parseTrees) {
            for (Tree leaf : Trees.leaves(sentence))
                armando += leaf + " ";
        }
        System.out.println(armando);
        System.out.println("All done.");
        //              currentnode.setTextContent(asd);
        //          }
        //          TransformerFactory transformerFactory = TransformerFactory.newInstance();
        //          Transformer transformer = transformerFactory.newTransformer();
        //          DOMSource source = new DOMSource(doc);
        //          StreamResult result = new StreamResult(paper);
        //          transformer.transform(source, result);
        //
        //          System.out.println("Done");
        //      }
    }

    public static Tree HobbsResolve(Tree pronoun, ArrayList<Tree> forest) {
        Tree wholetree = forest.get(forest.size()-1); // The last one is the one I am going to start from
        ArrayList<Tree> candidates = new ArrayList<Tree>();
        List<Tree> path = wholetree.pathNodeToNode(wholetree, pronoun);
        System.out.println(path);
        // Step 1
        Tree ancestor = pronoun.parent(wholetree); // This one locates the NP the pronoun is in, therefore we need one more "parenting" !
        // Step 2
        ancestor = ancestor.parent(wholetree);
        //System.out.println("LABEL: "+pronoun.label().value() + "\n\tVALUE: "+pronoun.firstChild());
        while ( !ancestor.label().value().equals("NP") && !ancestor.label().value().equals("S") )
            ancestor = ancestor.parent(wholetree);
        Tree X = ancestor;
        path = X.pathNodeToNode(wholetree, pronoun);
        System.out.println(path);
        // Step 3
        for (Tree relative : X.children()) {
            for (Tree candidate : relative) {
                if (candidate.contains(pronoun)) break; // I am looking to all the nodes to the LEFT (i.e. coming before) the path leading to X. contain <-> in the path
                //System.out.println("LABEL: "+relative.label().value() + "\n\tVALUE: "+relative.firstChild());
                if ( (candidate.parent(wholetree) != X) && (candidate.parent(wholetree).label().value().equals("NP") || candidate.parent(wholetree).label().value().equals("S")) )
                    if (candidate.label().value().equals("NP")) // "Propose as the antecedent any NP node that is encountered which has an NP or S node between it and X"
                        candidates.add(candidate);
            }
        }
        // Step 9 is a GOTO step 4, hence I will envelope steps 4 to 8 inside a while statement.
        while (true) { // It is NOT an infinite loop. 
            // Step 4
            if (X.parent(wholetree) == wholetree) {
                for (int q=1 ; q < MAXPREVSENTENCES; ++q) {// I am looking for the prev sentence (hence we start with 1)
                    if (forest.size()-1 < q) break; // If I don't have it, break
                    Tree prevTree = forest.get(forest.size()-1-q); // go to previous tree
                    // Now we look for each S subtree, in order of recency (hence right-to-left, hence opposite order of that of .children() ).
                    ArrayList<Tree> backlist = new ArrayList<Tree>();
                    for (Tree child : prevTree.children()) {
                        for (Tree subtree : child) {
                            if (subtree.label().value().equals("S")) {
                                backlist.add(child);
                                break;
                            }
                        }
                    }
                    for (int i = backlist.size()-1 ; i >=0 ; --i) {
                        Tree Treetovisit = backlist.get(i);
                        for (Tree relative : Treetovisit.children()) {
                            for (Tree candidate : relative) {
                                if (candidate.contains(pronoun)) continue; // I am looking to all the nodes to the LEFT (i.e. coming before) the path leading to X. contain <-> in the path
                                //System.out.println("LABEL: "+relative.label().value() + "\n\tVALUE: "+relative.firstChild());
                                if (candidate.label().value().equals("NP")) { // "Propose as the antecedent any NP node that you find"
                                    if (!candidates.contains(candidate)) candidates.add(candidate);
                                }
                            }
                        }
                    }
                }
                break; // It will always come here eventually
            }
            // Step 5
            ancestor = X.parent(wholetree);
            //System.out.println("LABEL: "+pronoun.label().value() + "\n\tVALUE: "+pronoun.firstChild());
            while ( !ancestor.label().value().equals("NP") && !ancestor.label().value().equals("S") )
                ancestor = ancestor.parent(wholetree);
            X = ancestor;
            // Step 6
            if (X.label().value().equals("NP")) { // If X is an NP
                for (Tree child : X.children()) { // Find the nominal nodes that X directly dominates
                    if (child.label().value().equals("NN") || child.label().value().equals("NNS") || child.label().value().equals("NNP") || child.label().value().equals("NNPS") )
                        if (! child.contains(pronoun)) candidates.add(X); // If one of them is not in the path between X and the pronoun, add X to the antecedents
                }
            }
            // Step SETTE
            for (Tree relative : X.children()) {
                for (Tree candidate : relative) {
                    if (candidate.contains(pronoun)) continue; // I am looking to all the nodes to the LEFT (i.e. coming before) the path leading to X. contain <-> in the path
                    //System.out.println("LABEL: "+relative.label().value() + "\n\tVALUE: "+relative.firstChild());
                    if (candidate.label().value().equals("NP")) { // "Propose as the antecedent any NP node that you find"
                        boolean contains = false;
                        for (Tree oldercandidate : candidates) {
                            if (oldercandidate.contains(candidate)) { 
                                contains=true;
                                break;
                            }
                        }
                        if (!contains) candidates.add(candidate);
                    }
                }
            }
            // Step 8
            if (X.label().value().equals("S")) {
                boolean right = false;
                // Now we want all branches to the RIGHT of the path pronoun -> X.
                for (Tree relative : X.children()) {
                    if (relative.contains(pronoun)) {
                        right = true;
                        continue;
                    }
                    if (!right) continue;
                    for (Tree child : relative) { // Go in but do not go below any NP or S node. Go below the rest
                        if (child.label().value().equals("NP")) {
                            candidates.add(child);
                            break; // not sure if this means avoid going below NP but continuing with the rest of non-NP children. Should be since its DFS.
                        }
                        if (child.label().value().equals("S")) break; // Same
                    }
                }
            }
        }

        // Step 9 is a GOTO, so we use a while.

        System.out.println(pronoun + ": CHAIN IS " + candidates.toString());
        ArrayList<Integer> scores = new ArrayList<Integer>();

        for (int j=0; j < candidates.size(); ++j) {
            Tree candidate = candidates.get(j);
            Tree parent = null;
            int parent_index = 0;
            for (Tree tree : forest) {
                if (tree.contains(candidate)) { 
                    parent = tree;
                    break;
                }
                ++parent_index;
            }
            scores.add(0);
            if (parent_index == 0) 
                scores.set(j, scores.get(j)+100); // If in the last sentence, +100 points
            scores.set(j, scores.get(j) + syntacticScore(candidate, parent));

            if (existentialEmphasis(candidate)) // Example: "There was a dog standing outside"
                scores.set(j, scores.get(j)+70);
            if (!adverbialEmphasis(candidate, parent))
                scores.set(j, scores.get(j)+50);
            if (headNounEmphasis(candidate, parent))
                scores.set(j, scores.get(j)+80);

            int sz = forest.size()-1;
//          System.out.println("pronoun in sentence " + sz + "(sz). Candidate in sentence "+parent_index+" (parent_index)");
            int dividend = 1;
            for (int u=0; u < sz - parent_index; ++u)
                dividend *= 2;
            //System.out.println("\t"+dividend);
            scores.set(j, scores.get(j)/dividend);
            System.out.println(candidate + " -> " + scores.get(j) );
        }
        int max = -1;
        int max_index = -1;
        for (int i=0; i < scores.size(); ++i) {
            if (scores.get(i) > max) {
                max_index = i;
                max = scores.get(i);
            }
        }
        Tree final_candidate = candidates.get(max_index);
        System.out.println("My decision for " + pronoun + " is: " + final_candidate);
        // Decide what candidate, with both gender resolution and Lappin and Leass ranking.

        Tree pronounparent = pronoun.parent(wholetree).parent(wholetree); // 1 parent gives me the NP of the pronoun
        int pos = 0;
        for (Tree sibling : pronounparent.children()) {
            System.out.println("Sibling "+pos+": " + sibling);
            if (sibling.contains(pronoun)) break;
            ++pos;
        }
        System.out.println("Before setchild: " + pronounparent);
        @SuppressWarnings("unused")
        Tree returnval = pronounparent.setChild(pos, final_candidate);
        System.out.println("After setchild: " + pronounparent);

        return wholetree; // wholetree is already modified, since it contains pronounparent
    }

    private static int syntacticScore(Tree candidate, Tree root) {
        // We will check whether the NP is inside an S (hence it would be a subject)
        // a VP (direct object)
        // a PP inside a VP (an indirect obj)
        Tree parent = candidate;
        while (! parent.label().value().equals("S")) {
            if (parent.label().value().equals("VP")) return 50; // direct obj
            if (parent.label().value().equals("PP")) {
                Tree grandparent = parent.parent(root);
                while (! grandparent.label().value().equals("S")) {
                    if (parent.label().value().equals("VP")) // indirect obj is a PP inside a VP
                        return 40;
                    parent = grandparent;
                    grandparent = grandparent.parent(root);
                } 
            }
            parent = parent.parent(root);
        }
        return 80; // If nothing remains, it must be the subject
    }

    private static boolean existentialEmphasis(Tree candidate) {
        // We want to check whether our NP's Dets are "a" or "an".
        for (Tree child : candidate) {
            if (child.label().value().equals("DT")) {
                for (Tree leaf : child) {
                    if (leaf.value().equals("a")||leaf.value().equals("an")
                            ||leaf.value().equals("A")||leaf.value().equals("An") ) {
                        //System.out.println("Existential emphasis!");
                        return true;
                    }
                }
            }
        }
        return false;
    }

    private static boolean headNounEmphasis(Tree candidate, Tree root) {
        Tree parent = candidate.parent(root);
        while (! parent.label().value().equals("S")) { // If it is the head NP, it is not contained in another NP (that's exactly how the original algorithm does it)
            if (parent.label().value().equals("NP")) return false;
            parent = parent.parent(root);
        }
        return true;
    }

    private static boolean adverbialEmphasis(Tree candidate, Tree root) { // Like in "Inside the castle, King Arthur was invincible". "Castle" has the adv emph.
        Tree parent = candidate;
        while (! parent.label().value().equals("S")) {
            if (parent.label().value().equals("PP")) {
                for (Tree sibling : parent.siblings(root)) {
                    if ( (sibling.label().value().equals(","))) {
                        //System.out.println("adv Emph!");
                        return true;
                    }
                }
            }
            parent = parent.parent(root);
        }
        return false;
    }

    public static ArrayList<Tree> findPronouns(Tree t) {
        ArrayList<Tree> pronouns = new ArrayList<Tree>();
        if (t.label().value().equals("PRP") && !t.children()[0].label().value().equals("I") && !t.children()[0].label().value().equals("you") && !t.children()[0].label().value().equals("You")) {
            pronouns.add(t);
        }
        else
            for (Tree child : t.children())
                pronouns.addAll(findPronouns(child));
                    return pronouns;
    }

    @SuppressWarnings("rawtypes")
    public static ArrayList<List> preprocess(DocumentPreprocessor strarray) {
        ArrayList<List> Result = new ArrayList<List>();
        for (List<HasWord> sentence : strarray) {
            if (!StringUtils.isAsciiPrintable(sentence.toString())) {
                continue; // Removing non ASCII printable sentences
            }
            //string = StringEscapeUtils.escapeJava(string);
            //string = string.replaceAll("([^A-Za-z0-9])", "\\s$1");
            int nonwords_chars = 0;
            int words_chars = 0;
            for (HasWord hasword : sentence ) {
                String next = hasword.toString();
                if ((next.length() > 30)||(next.matches("[^A-Za-z]"))) nonwords_chars += next.length(); // Words too long or non alphabetical will be junk
                else words_chars += next.length();
            }
            if ( (nonwords_chars / (nonwords_chars+words_chars)) > 0.5) // If more than 50% of the string is non-alphabetical, it is going to be junk
                continue;   // Working on a character-basis because some sentences may contain a single, very long word
            if (sentence.size() > 100) {
                System.out.println("\tString longer than 100 words!\t" + sentence.toString());
                continue;
            }
            Result.add(sentence);
        }
        return Result;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T00:42:25.907

如果您想按照原作者的意图准确理解该算法，您应该查阅[他的论文](http://www.isi.edu/~hobbs/pronoun-papers.html)。但是你误解了一些相当基本的东西。该算法旨在用于常规代词，而不是用于像“他自己”这样的反身代词，这些代词通常非常局部地绑定。实际上，该算法的步骤旨在说明常规代词如何不能非常局部地绑定。例如，步骤 3 旨在将其捕获在：

> 约翰给他的画像

'him' 不能与 'John' 共指，而与 'himself' 共指则很好（实际上，通常是必需的）：

> 约翰的自画像

如果存在步骤 3 的条件中指定的干预 NP 节点，则可能：

> 约翰父亲给他的画像

# php - 使用 jquery 将字段数组发布到 php

> ID：10775107
> 
> 赞同：0
> 
> 时间：2012-05-27T15:28:03.373
> 
> 标签：php, jquery, html

我有文本框数组

```
<input type="text" name="txt[]" id"txt[]" value="test 1" />
<input type="text" name="txt[]" id"txt[]" value="test 2" />
<input type="text" name="txt[]" id"txt[]" value="test 3" /> 
```

并想使用 jquery 将此数组发布到 php 文件：

```
$('#submit').click(function() {

        $.ajax({
            type : 'POST',
            url : '<?php echo site_url('projects/create'); ?>',
            data: {
               txt: $('#txt').val()
            },
            success:function (data) {
                $("#log_msg").html(data);
            }          
        });
    }); 
```

但它返回`undefined`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:11:25.340

写吧

```
 <input type="text" name="pro_video[]" id="pro_video" />

$('#submit').click(function() {

var videos = $('input[name^=pro_video]');
        var postData = {
            vdo: [], // the videos is an array
        };
        $.each(videos, function(index, el) {
            // push the value in the vdo array
            postData.vdo.push($(el).val());
        });

        $.ajax({
            type : 'POST',
            url : '<?php echo site_url('projects/create'); ?>',
            data: {
               pro_video : postData
            },
            success:function (data) {
                $("#log_msg").html(data);
            }          
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T15:31:17.247

您可以使用 jQuery serialzie() 从 html 表单中获取表单值。

例如 ：

```
<form id="testForm" method="post">
    <input type="text" name="txt[]" id"txt[]" value="test 1" />
    <input type="text" name="txt[]" id"txt[]" value="test 2" />
    <input type="text" name="txt[]" id"txt[]" value="test 3" />
</form 
```

并使用 jQuery 从表单中获取值。

```
$('#testForm').serialize(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T15:41:16.040

jQuery $(form).serialize() 函数将在这里为您提供帮助！

```
$('#submit').click(function() {

        $.ajax({
            type : 'POST',
            url : '<?php echo site_url('projects/create'); ?>',
            data: $('#testForm').serialize(),
            success:function (data) {
                $("#log_msg").html(data);
            },
            error: function(x,t,e){
                $("#log_msg").html('An error occured: '+e);
            }
        });
    }); 
```

您将在文件中获得一个 $_POST 漂亮而干净的数组（无论 site_url('projects/create') 指向何处）。警告认为，如果您向该表单添加输入提交，则 serialize() 还将发布提交值，因此如果您打算将数组直接插入数据库，则必须将其从 POST 数组中删除。反正。;)

玩得开心 ！PS： id"txt[]" 对我来说似乎不是正确的标记......！id="txt_1"。您的文档中只能有一个参考 ID，我认为您不能在标记 iding 上使用括号。（如果我错了，有人纠正我..）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T15:55:41.387

要将数组从 JavaScript 传递到 PHP，您可以使用 JQuery 中的[序列化函数](http://api.jquery.com/serialize/)。您可以将其传递给整个表单或某些选定的表单元素。对于您提供的示例，它将如下所示：

的HTML：

```
<input type="text" name="txt[]" class="txt" value="test 1" />
<input type="text" name="txt[]" class="txt" value="test 2" />
<input type="text" name="txt[]" class="txt" value="test 3" /> 
```

和 Javascript：

```
$('#submit').click(function() {

    $.ajax({
        type : 'POST',
        url : '<?php echo site_url('projects/create'); ?>',
        data: {
           txt: $('.txt').serialize()
        },
        success:function (data) {
            $("#log_msg").html(data);
        }          
    });
}); 
```

这将为您的 php 提供字符串“txt%5B%5D=test+1&txt%5B%5D=test+2&txt%5B%5D=test+3”，它可以将其解释为这些值的数组。

请注意，我使用了 class 而不是 id，因为每个元素的 id 应该是唯一的。

# c# - 如何从gridview中的隐藏列中获取价值？

> ID：10775110
> 
> 赞同：0
> 
> 时间：2012-05-27T15:28:15.640
> 
> 标签：c#, asp.net

我有一个gridview 和sqldatasource。

当我将 gridview 绑定到 sqldatasource 时，我已经从 sql 数据库中选择了所有列。在此之后，我已经从 gridview 中删除了我自己的一些列。

现在，我想从已删除的列中获取值，而不将该列添加到 gridview。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:57:09.900

您可以将列添加回网格视图并将其可见属性设置为 false，这样它们就不会在页面上呈现，但您可以在后面的代码中访问它们。

# javascript - 需要为对象设置动画并使其返回

> ID：10775111
> 
> 赞同：3
> 
> 时间：2012-05-27T15:28:22.723
> 
> 标签：javascript, jquery, html

我需要我的飞机飞上跑道（这是地图）然后点击回来。到目前为止，它只会上涨。任何与 java script/html/jquery 相关的东西。请简单的建议。ty ^^ 这是我当前的代码::

```
<div class="Map"><div id="MovingPlane1"></div></div> 
```

JS：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#MovingPlane1").click(function(){
            $("#MovingPlane1").animate({bottom:"250px"},"slow");
        });
    });
<script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:42:46.867

## *[jsBin 演示](http://jsbin.com/aqigiy/edit#javascript,html,live)*

给你的两架飞机一个班级`.plane`并使用这个代码：

```
$(".plane").click(function(){

   $(this).animate({bottom:250},800,function(){
       $(this).animate({bottom:0},800);
   });

}); 
```

在动画回调中，您*重做*初始位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T15:32:21.927

尝试：

```
$(this).animate({bottom:"250px"},"slow",function(){
   $(this).animate({bottom:"0px"},"slow");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T15:55:57.963

如果您需要飞机在第二次单击时返回，请使用以下命令：

```
var plane1up = false;
$(document).ready(function(){
    $("#MovingPlane1").click(function(){
        $("#MovingPlane1").animate({bottom:(plane1up==true ? "0px" : "250px")},"slow");
    });
}); 
```

# php - 如何判断 PDF 是否被标记

> ID：10775114
> 
> 赞同：5
> 
> 时间：2012-05-27T15:29:19.727
> 
> 标签：php, pdf, accessibility, tcpdf, fpdf

是否可以以编程方式确定 PDF 是否被“标记”（为了便于访问）？我正在使用 PHP，并且希望（如果可能）简单地读取 PDF 文件，如果标记则返回 true，否则返回 false。

我看过[FPDF](http://www.fpdf.org/en/home.php)和[TCPDF](http://www.tcpdf.org/index.php)，但我不清楚是否可以提取这些信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T16:42:51.800

在官方 ISO PDF-1.7 规范中（在 Adob​​e 网站上免费提供的副本中），我在第 574 页读到：

> *“标记的 PDF 文档还应包含标记信息字典（参见表 321），标记条目的值为**true**。**”***

 **对我来说这意味着...

1.  ...您必须解析 PDF 结构和
2.  ...查找*文档目录*
3.  ...应该有一个*MarkInfo*条目的地方
4.  ...指定*标记信息字典*
5.  ...它应该包含一个名为*Marked*的键，对于标记的 PDF ，其布尔值为*true 。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T16:43:53.663

也许您可以更进一步（检查所有[PDF_get_xx](http://php.net/manual/en/ref.pdf.php)**函数**）。您还需要[此](http://www.pdflib.com/fileadmin/pdflib/pdf/manuals/PDFlib-8.0.4-API-reference.pdf)作为参考。

基于此：

```
Characteristics of a properly tagged PDF:

    - The PDF file includes a logical reading order for its content
    - Images are given correct alternate descriptions
    - Tables are correctly tagged to represent the table structure
    - Form-fields are authored to promote their utility to screen-readers
    - Represents text as Unicode to clear up composition irregularities such as soft
      and hard hyphens 
```

你可能会走得更远。**

# ios - NSOrderedSet 的核心数据生成访问器是什么样的？

> ID：10775116
> 
> 赞同：1
> 
> 时间：2012-05-27T15:29:34.907
> 
> 标签：ios, core-data, nsmanagedobject, accessor, nsorderedset

我有一个`NSManagedObject`子类（父类），它与另一个子类（子类）有一个有序的多对多关系`NSManagedObject`。我要求 Parent 使用 KVO 来观察其`NSOrderedSet`. 这意味着当从集合中添加或删除子项时，我需要手动添加和删除父项作为观察者。这意味着我需要为`NSOrderedSet`.

我在哪里可以看到这些访问器的外观？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:31:16.840

否。将集合作为一个整体进行观察，并允许操作系统处理对每个孩子的观察。从父节点的有利位置观察属性的关键路径。换句话说，父级将通过一个通过子级的键路径来观察自己。

```
[self addObserver: self forKeyPath: @"childs.observedProperty" options: ... context: ...]; 
```

# c# - 如何在团队环境中设置 .net

> ID：10775119
> 
> 赞同：-1
> 
> 时间：2012-05-27T15:30:28.590
> 
> 标签：c#, winforms, svn

到目前为止，我正在将应用程序开发为独立的单一系统。现在我需要集中我的工作区域并将其作为一个团队进行开发......关于如何为 Visual Studio 2008 和 sql server 2005 设置团队环境的任何重要提示。我对 TFS 不感兴趣。提前致谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T15:33:03.597

VisualSVN 是一个非常好的选择。它适用于 Windows，非常可靠，您可以设置具有不同存储库甚至文件夹权限的用户。它可以与 Visual Studio 无缝协作。

[http://www.visualsvn.com/](http://www.visualsvn.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T15:46:00.993

您是否暗示您在自己工作时没有使用源代码控制？我建议反对。即使您是项目中唯一的开发人员，*也要始终*使用源代码管理。

除此之外，我赞同@IanNorton 的建议，即使用[Git](http://git-scm.com/)进行源代码控制。 [Mercurial](https://www.mercurial-scm.org/)是另一个不错的选择，尽管不太受欢迎。 [颠覆](http://www.visualsvn.com/)也是一个不错的选择。所有这些都具有非常相似[的外壳集成](http://code.google.com/p/tortoisegit/) [Windows](http://tortoisehg.bitbucket.io/) [客户端](http://tortoisesvn.net/)。

我还推荐像[TeamCity](http://www.jetbrains.com/teamcity/)这样的东西来进行持续集成构建。理想情况下，您希望在每次签入时自动构建和测试运行程序，以便您立即知道代码是否存在问题，以及夜间构建和部署到共享环境（包括拆除和重新-构建测试数据）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-27T16:23:53.257

> 我对 TFS 不感兴趣。

愚蠢 - 特别是因为您清楚地表明为什么使用 TFS 对您有好处。

让我们直截了当 - TFS 做了两件对你很重要的事情：

*   源代码控制。
*   工作项目跟踪，包括计划（很快 2011 将全面支持 SCRUM）
*   持续整合。如果你变大，添加第 4 项：
*   测试。并非所有事情都可以连续完成，并且 TFS 非常支持 Visual Studio 进行手动测试计划等。

大多数说“我不喜欢 TFS”的人都对 TFS 真正带来了什么一无所知。并不是说一切都是完美的，但我刚刚完成了一个 18 个月的项目，其中不使用 TFS 是我们做出的最愚蠢的决定；）

您需要对它们进行适当的保护——一个好的方法（不，抱歉，只是一个源代码控制系统并不能解决它）、持续的集成和一个计划项目和分配任务的系统。

数据库变得复杂 - 我强烈建议升级到 SQL 2012，新的 localdb 模式对于持续集成来说是无价的。

顺便说一句，在我的上一个项目中，我们因解决 SVN 问题而损失了数周（主要是在某些时候，愚蠢的服务器提供了错误的当前版本 - 我们进行了一场真正的斗争，以使坏的服务器解开；）

环境将是：

*   许多服务器都需要启动虚拟机。开发人员可能需要其中的几个。
*   记住构建服务器 LOVE SSD - 性能 ;)

# php - 如何在 php 中获取数据库的 sql 查询？

> ID：10775121
> 
> 赞同：1
> 
> 时间：2012-05-27T15:30:33.080
> 
> 标签：php, mysql, sql

如何在 PHP 中查询整个 MySQL 数据库的转储？我打算然后将其转储到 .sql 文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T15:33:30.257

没有单一的“查询”（除非数据库结构简单）。您要求的是使用专用实用程序完成的维护操作[`mysqldump`](http://dev.mysql.com/doc/refman/5.5/en/using-mysqldump.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T15:35:13.317

我不认为你可以像 mysql_query("BACKUP NOW"); 而是看这里：

[http://davidwalsh.name/backup-mysql-database-php](http://davidwalsh.name/backup-mysql-database-php)

[http://www.noupe.com/how-tos/10-ways-to-automatically-manually-backup-mysql-database.html](http://www.noupe.com/how-tos/10-ways-to-automatically-manually-backup-mysql-database.html)

# ruby-on-rails - 在 rails 中设置枚举

> ID：10775122
> 
> 赞同：0
> 
> 时间：2012-05-27T15:30:39.910
> 
> 标签：ruby-on-rails, enums

我试图在 Rails 测试中模仿类似枚举的效果。但是，我似乎无法让它工作。

例子。

我有一个名为 Days 的模块：

```
module Days    
   SUNDAY = 0;
   MONDAY = 1;
   TUESDAY = 2;
   WEDNESDAY = 3;
   THURSDAY = 4;
   FRIDAY = 5;
   SATURDAY = 6;
end 
```

在同一目录中，我有一个 scheduler_spec.rb

```
require 'spec_helper'
describe Scheduler do
  include Days
  ... 
```

但是，Ruby 会抛出以下错误：

```
in `block in <top (required)>': uninitialized constant Days (NameError)
    from /Users/krg07/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.9.0/lib/rspec/core/example_group.rb:201:in `module_eval'
    from /Users/krg07/.rvm/gems/ruby-1.9.3-p125/gems/rspec-core-2.9.0/lib/rspec/core/example_group.rb:201:in `subclass' ... 
```

知道我怎样才能完成这项工作吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:09:13.903

您的模块不得包含在 Rails 自动加载路径中或不遵循自动加载约定。您可能只需在包含文件之前要求该文件即可解决此问题：

```
require 'spec_helper'
require './days'
describe Scheduler do
  include Days 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T17:39:15.170

Rails 4.1 有枚举。我刚刚升级并开始使用它。奇迹般有效！

[http://edgeapi.rubyonrails.org/classes/ActiveRecord/Enum.html](http://edgeapi.rubyonrails.org/classes/ActiveRecord/Enum.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T15:36:55.243

ruby 没有枚举，但您可以在链接 [http://www.rubyfleebie.com/enumerations-and-ruby/中执行类似的操作](http://www.rubyfleebie.com/enumerations-and-ruby/)

# mongodb - 实现查询 MongoDB 数据库的 DBSCAN 算法的最佳编程语言？

> ID：10775133
> 
> 赞同：0
> 
> 时间：2012-05-27T15:32:17.697
> 
> 标签：mongodb, cluster-analysis, dbscan

我必须实现 DBSCAN 算法。假设从这个伪代码开始

```
DBSCAN(D, eps, MinPts)
   C = 0
   for each unvisited point P in dataset D
      mark P as visited
      NeighborPts = regionQuery(P, eps)
      if sizeof(NeighborPts) < MinPts
         mark P as NOISE
      else
         C = next cluster
         expandCluster(P, NeighborPts, C, eps, MinPts)

expandCluster(P, NeighborPts, C, eps, MinPts)
   add P to cluster C
   for each point P' in NeighborPts 
      if P' is not visited
         mark P' as visited
         NeighborPts' = regionQuery(P', eps)
         if sizeof(NeighborPts') >= MinPts
            NeighborPts = NeighborPts joined with NeighborPts'
      if P' is not yet member of any cluster
         add P' to cluster C

regionQuery(P, eps)
   return all points within P's eps-neighborhood 
```

我的代码必须在带有 Ubuntu Linux 64 位的**Amazon EC2实例上运行。**

函数**regionQuery**查询**MongoDB**数据库以获取 P 的 eps-neighborhood 内的所有点。

那么，根据您的说法，实现它以提高性能的最佳编程语言是什么？**C**，**PHP**，**Java**（我不认为）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T15:58:25.140

我假设您有很多积分并且需要快速获得结果 - 否则您几乎可以使用任何东西。

对我来说，这似乎是 map-reduce 的工作

地图部分将是“针对每个未访问点”的循环，并且应该发出包含邻居、候选集群和其他任何内容的数据构造。如果点被归类为噪声，它不应该发出任何声音。

集群扩展将进入 reduce 并可能完成部分 - 语言选择也将是 javascript，一切都将在 mongo 内部发生

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T09:55:27.743

谷歌搜索“parallel DBSCAN”，你会发现很多文章讨论了如何并行化这个算法。通常，它会相当大地改变算法，例如它需要合并集群。

Canopy 预聚类也可能是 DBSCAN 的一个很好的预处理步骤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:16:59.353

我忘了回答我自己的问题。我终于实现了 DBSCAN 算法的 MapReduce 版本。你可以在[**这里**](https://github.com/MarcoSero/Event-Detection)找到它（Hadoop）。

这是它如何工作的伪代码：

```
function map(P, eps, MinPts)
    if P is unvisited then
        mark P as visited
        NeighborPts = regionQuery(P, eps)
        if sizeof(NeighborPts) < MinPts then
            do nothing
        else
            mark P as clusterized
            prepare the key
            create new cluster C
            C.neighborPoints = NeighborPts
            C.points = P
            emit(key, C)

function reduce(key, clusters, eps, MinPts)
    finalC is the final cluster
    for all C in clusters do
        finalC.points = finalC.points ∪ C.points
        for all P in C.neighborPoints do
            if P′ is not visited then
                mark P′ as visited
                NeighborPts′ = regionQuery(P′,eps)
                if sizeof(NeighborPts′) ≥ MinPts then
                    NeighborPts = NeighborPts ∪ NeighborPts′
                end if
            end if
            if P′ is not yet member of any cluster then
                add P′ to cluster C
            end if 
```

# c# - 使用 C# 的 ASP .NET MVC 3 自定义 Html 5 数据属性

> ID：10775137
> 
> 赞同：2
> 
> 时间：2012-05-27T15:33:01.207
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, html, data-annotations

我有以下问题。

我有 Html 元素，我想将 Data- 属性和特定类附加到 Like so ：

```
<element id="" class="custom_class" data-attribute="value" data-attr-two="value2"></element> 
```

但我想在模型级别定义这些属性，如下所示：

```
public class ModelName 
{
  [DataAnnotation({attribute = "value", attr_2 = "value2"})]
  [Class= "custom_class"]
  public type PropertyName { get; set;}
} 
```

我知道自定义验证属性，但它们的问题是元素看起来像这样：

```
<element id="" class="custom_class" data-val-attribute="value"/></element> 
```

而不是这个：

```
<element id="" class="custom_class" data-attribute="value"/></element> 
```

如果有另一种方法可以做到这一点，也许向 Html 助手添加另一个字典像这样：

```
@Html.TextBoxFor(model => Model, new { DataAnnotation : DataAnnotationObjectModel.Create({Message =        "something", Name = "something" }) ) 
```

DataAnnotationObject 将是一个类，其中包含所有类型的数据属性 id 正在使用，并且一些方法创建默认对象，这些对象预先枚举了重复数据。

我知道我可以做到这一点：

```
@Html.TextBoxFor(model => Model, new { data_attr = @item.Value }  ) 
```

但是我必须为每个模型中的每个属性添加 5 个或更多属性，并且我必须为每个属性添加至少 3 次。

有没有办法做到这一点？

如果您在理解这个问题时遇到问题，请随时对您的问题发表评论，我会尽力解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:12:05.207

作为一个快速的解决方案，您可以尝试像这样定义一个 HTML Helper；

```
public static MvcHtmlString AttributedTextBoxFor<TModel, TProperty>(this HtmlHelper _helper, Expression<Func<TModel, TProperty>> expression) 
```

在代码中，您应该能够检索从表达式中引用的属性（按照这个 StackOverflow[问题](https://stackoverflow.com/questions/671968/retrieving-property-name-from-lambda-expression)），并且通过使用反射，您应该再次能够获取该属性的属性（PropertyInfo.Attributes）。一旦你有了这些，你应该能够生成一个定义了所有“data-”属性的匿名对象，并从上面定义的帮助器中返回标准的 TextBoxFor 并传入这个对象：

```
return _helper.TextBoxFor(expression, myHtmlAttributes); 
```

没有太多时间来编写完整的解决方案，但它应该只是几行样板代码。

# opera - Opera浏览器扩展扩展-通过函数重新加载

> ID：10775139
> 
> 赞同：1
> 
> 时间：2012-05-27T15:33:03.980
> 
> 标签：opera, reload, browser-extension, opera-extension

我正在为 Opera 浏览器开发一个扩展，并且我正在寻找能够重新加载 Opera 扩展的功能或解决我的问题的替代方法。我希望用户能够在旧版本的扩展（列表视图或“新菜单”）和新版本（普通视图或“旧菜单”）之间切换。

执行此操作的代码如下：

```
<a id="switch" href="javascript: void(0)" onClick="widget.preferences.version = 'newmenu'; document.getElementById('switch').innerHTML = 'Please reload the extension';">[Switch to Normal View]</a> 
```

这个**oldmenu.html**文件中的**widget.preferences.version = 'newmenu'**设置用户偏好以使用新菜单和位于**menu.html中的****widget.preferences.version = 'oldmenu'** （此处未显示） , 设置用户偏好以使用旧菜单。

 ******然后，在**index.html**文件中，扩展程序检查它是否必须显示旧菜单或新菜单。

```
if (widget.preferences.version == "oldmenu") {
   var ToolbarUIItemProperties = {title: "4chan Boards", icon: "icons/icon_64x64.png", popup: {href: "oldmenu.html", width: 220, height: 620}}
} else {
   var ToolbarUIItemProperties = {title: "4chan Boards", icon: "icons/icon_64x64.png", popup: {href: "menu.html", width: 250, height: 350}}
} 
```

现在，问题是要执行这段代码，用户必须手动重新加载扩展，这非常难看。

好吧，由于目前无法访问 Opera 开发论坛（网关不好，加载时间长），我想这是问我问题的最佳场所。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T00:34:11.783

好吧，这条线解决了部分问题。该行位于**index.html**中。

```
theButton.onclick = function(){if (widget.preferences.version =="oldmenu") {theButton.popup.href = "oldmenu.html";}; if (widget.preferences.version == "newmenu"){theButton.popup.href = "menu.html";};}; 
```

此外，只需稍微更改这些行并添加一个 href，就可以在菜单之间快速切换。这在以前不是一个选项，因为它只会切换一次，然后在您重新打开按钮时自动切换回来。

```
<a href="oldmenu.html" onClick="widget.preferences.version = 'oldmenu';">List view</a>
<a href="menu.html" onClick="widget.preferences.version = 'newmenu';">[Switch to Normal View]</a> 
```

但是，我没有设法以这种方式更改弹出窗口的高度和宽度。所以，我只是在两个菜单之间做出了妥协；）******

# c++ - 向量中的第一个元素是什么？

> ID：10775146
> 
> 赞同：0
> 
> 时间：2012-05-27T15:34:16.940
> 
> 标签：c++

我有一个向量，我正在使用 push_back 添加元素。

在调试时，我向向量添加了一个元素，但向量包含 [0] 和 [1] 的元素。[1] 是我推动的元素，但 [0] 看起来像是某种可为空的对象。

向量大小也是 2 - 即使我只插入了一次。

稍后在我的代码中，我将使用`vector_name[i]`. 最初我会从 开始`i=0`，这是否意味着您应该使用 1 （或某种迭代器）的向量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T15:41:01.157

第一个元素应该是`vector[0]`.

例如：

```
int anumber = 300;
std::vector<int> intvector;
intvector.push_back(anumber);

std::cout << intvector[0]; 
```

将打印`300`。

# facebook-graph-api - Graph API 搜索所有瑞典公司

> ID：10775148
> 
> 赞同：-1
> 
> 时间：2012-05-27T15:34:28.413
> 
> 标签：facebook-graph-api

是否有可能以某种方式使用 Graph 来搜索所有拥有 facebook 页面的瑞典公司？我通过搜索带有查询“瑞典”的页面进行了一些尝试，但我只得到包含字符串“瑞典”的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:33:47.220

这是我在斯德哥尔摩附近摆弄图形 API 后得到的最接近的地方，不太确定`distance`参数使用的单位。您可以自己在“本地企业”类别中过滤结果。

```
https://graph.facebook.com/search?q=place&type=place&center=59.3,18.0&distance=1000 
```

也应该有一个`access_token`参数，但我认为如果您使用登录到 Facebook 的浏览器浏览到 URL，Facebook 会添加该参数。

此外，您似乎需要使用分页 URL 来获取所有结果。

# c++ - 从 Qt 应用程序获取原始数据包数据

> ID：10775154
> 
> 赞同：4
> 
> 时间：2012-05-27T15:35:12.473
> 
> 标签：c++, qt, packet

我正在寻找一种方法来访问和篡改 Qt 应用程序发送和接收的原始数据包数据，但找不到任何东西。有什么方法吗？或者如果不是应用程序，至少有一种方法可以从 QWebView 访问数据包数据。

有没有什么方法可以实现以上两种？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:57:48.080

在网络连接中篡改发送/接收到服务器的数据的正确方法是使用`QNetworkAccessManager`.

此类允许您向服务器发送请求（可能带有标头）并获得响应（也带有标头）。

`QNetworkReply`您可以访问在相应对象上接收到的数据。还有响应的标题：

```
{
  ...
  QNetworkAccessManager *qnam = new QNetworkAccessManager(this);
  connect(qnam, SIGNAL(finished(QNetworkReply*)),
          this, SLOT(replyFinished(QNetworkReply*)));

  QNetworkRequest request;
  request.setUrl(QUrl("http://stackoverflow.com"));
  request.setRawHeader("User-Agent", "Foo browser");
  qnam->get(QNetworkRequest(request));
  ...
} 
```

然后定义槽：

```
void MyWidget::replyFinished(QNetworkReply *reply)
{
  QByteArray response = reply->readAll();
  QString mime = reply->header(QNetworkRequest::ContentTypeHeader).toString();
  ...
} 
```

看看[这里](http://qt-project.org/doc/qt-4.8/QNetworkAccessManager.html)和[这里](http://qt-project.org/doc/qt-4.8/qnetworkreply.html)的文档。

事实上，a`QWebView`有一个`QNetworkAccessManager`对象来执行请求和管理回复。您可以通过该`QWebPage::networkAccessManager()`方法获取该对象。您可以通过 获取`QWebPage`来自 a`QWebView`的`QWebView::page()`。

* * *

**编辑**

要操作显示的网页`QWebView`，可以通过 直接设置新的 HTML 内容`webView->setHtml(QString html)`。

您还可以通过`QWebFrame`类的方法直接访问 HTML。

要获得此类对象，您必须执行以下操作：

```
QWebFrame *wb = webView->page()->currentFrame(); 
```

方法是：

*   `void QWebFrame::setContent ( const QByteArray & data, const QString & mimeType = QString(), const QUrl & baseUrl = QUrl() )`用于在字节数组中设置新文档。

*   `void QWebFrame::setHtml ( const QString & html, const QUrl & baseUrl = QUrl() )`做同样的事情，但考虑到 HTML 文档的内容。

*   `QString QWebFrame::toHtml () const`以 HTML 文档的形式获取内容。

*   `QString QWebFrame::toPlainText () const`同上，纯文本。

查看这些功能的文档。

* * *

**编辑2：**

最后，如果您想访问或过滤`QWebView`自己发出的请求，我只能看到一种方法：派生一个类`QNetworkAccessManager`并覆盖用于发出请求和接收答案的方法。

然后，将该类的一个实例设置为 QWebView 使用的 QNetworkAccessManager。

让我用骨架澄清一下：

```
class MyNAM : public QNetworkAccessManager
{
  // ...

  MyNAM(QObject *parent = 0) : QNetworkAccessManager(parent) { }

  // ...

  virtual QNetworkReply * createRequest(Operation op, const QNetworkRequest & req, QIODevice * outgoingData = 0) {

    // e.g. logging of the request

    // e.g. decide if the request must be made
    if (some_bool_deciding) {
      QNetworkAccessManager::createRequest(op, req, outgoingData);
    }
    else {
      // or faked...
    }
    // etc.
  }

  // ...
}; 
```

在您的主应用程序中，您必须：

```
// ...
MyNAM *nam = new MyNAM();
webview->page()->setNetworkAccessManager(nam);
// ... 
```

从现在开始，所有请求都将使用该对象进行。

此方法允许完全控制导航器发出的请求：过滤和访问请求数据（标头、获取和发布值等）。您可以记录请求、分析请求及其 POST/GET 字段等。

希望最终有所帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T21:41:14.430

对不起，山姆，我不能让它工作。我一直在尝试我能想象到的一切，但一切都没有如我所愿。

让我们列出一个简短的选项列表以及可以做什么和不可以做什么：

*   `QWebFrame`您可以通过获取with`webView->page()->currentFrame()`然后访问诸如 、 或 之类的方法`setContents()`来访问`setHtml()`检索到的网页。您可以通过这些功能动态更改小部件中显示的网页。`toHtml()``toPlainText()`

*   `reply->readAll()`您可以通过`replyFinished()`槽中的方法访问为每个请求接收的原始响应（作为字节数组） 。

*   通过覆盖`QNetworkAccessManager::createRequest()`您自己的网络访问管理器中的方法，可以拦截请求。在那里，您可以访问请求中发送的 URL 和标头并更改它们或取消请求。

但是......您想要访问请求并为**每个**请求回复数据。

`createRequest()`访问请求很容易，在 custom中对方法的覆盖已经解释了这一点`QNetworkAccessManager`。但是让我们谈谈另一部分：

*   对于我所看到的，从请求中获得的回复**是只读的**并且**它不能被更改**，因为它在源代码中是硬编码的`QNetworkReply`。

*   您**不能使用**的`writeData()`功能`QNetworkReply`，因为它是硬编码的`return -1`！

*   您可以尝试继承`QNetworkReply`您自己的 a 并在`createRequest()`custom 的方法中返回它`QNetworkAccessManager`。您必须覆盖函数`readAll()`、`bytesAvailable()`和`abort()`。奇怪的是，**此方法仅在向非 HTTP 目的地发出请求时才有效**。我认为内部`QNetworkAccessManager`调用`QNetworkReply`取决于所使用的协议（HTTP，FTP，...）的不同实现。所以这在某种意义上是有效的，但不是我们想要的方式。例如，此方法可用于在某些条件下返回预定义的网页。

*   考虑到`QNetworkAccessManager::createRequest()`必须返回一个`QNetworkReply`对象的事实，我看不到任何允许篡改回复字节数组的子类组合。它受到了很好的保护，您必须重新实现这些类的所有内容才能实现您的目标。几乎复制粘贴所有部分的源类`QtNetwork`并制作自己的实现。

所以我认为答案是：“*不，似乎不能完全按照你的要求完成；只是部分地*”。

对不起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:52:44.157

看起来你想要 Wireshark [http://www.wireshark.org/](http://www.wireshark.org/)或 Fiddler [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)，甚至可能是 Charles [http://www.charlesproxy.com/](http://www.charlesproxy.com/)。

这些工具与 Qt 没有任何关系，可用于检查和拦截各种程序的 Web 流量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:58:10.227

...代理服务器呢？睡个好觉让我想到了这种可能性。

您可以按照[环回示例](http://doc.qt.nokia.com/4.7-snapshot/network-loopback.html)和[洪流客户端示例](http://doc.qt.nokia.com/4.7-snapshot/network-torrent.html)等进行制作。因此，您可以捕获和篡改请求**和**回复。 

您可以`QWebView`使用`webView->page()->networkAccessManager()->setProxy()`. 

这涉及到侦听所需端口（例如 8080）并侦听本地主机上的连接的进程的构建。 

您必须通过以下方式实现代理协议：

1.  分析 GET 和 POST 操作，
2.  以二进制传输的形式接收整个请求，
3.  篡改请求，
4.  将连接中获取的请求发送到目的IP，
5.  然后你可以捕获回复，
6.  篡改收到的回复，并且
7.  将结果响应发送到客户端 webView。

在这里我没有经验，但路径似乎很清楚。这将是很多编码，但我认为如果不是*唯一*的选择，这确实是*一个不错*的选择。 

 *更重要的是：**可以做到**！*

# c# - 如何从 ItemsCollection 中删除标签所在的项目？

> ID：10775156
> 
> 赞同：3
> 
> 时间：2012-05-27T15:35:22.623
> 
> 标签：c#, wpf, linq

我想删除所有`Tag`设置为 string 的项目`Dynamic`：

```
foreach (MenuItem item in Items.Cast<object>().Where(mi => mi is MenuItem && ((MenuItem) mi).Tag == "Dynamic"))
{
    Items.Remove(item);
} 
```

不幸的是，它不允许我在迭代集合时删除项目。

有没有一种简单的方法可以删除所有满足特定条件的项目，在这种情况下`Tag`设置为字符串`Dynamic`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T15:40:03.857

由于在迭代时无法更改集合，因此您必须存储结果项并在第二步中将其删除。

```
IList<MenuItem> itemsToRemove = Items.Cast<object>().Where(mi => mi is MenuItem && ((MenuItem) mi).Tag == "Dynamic").ToList();
foreach (MenuItem item in itemsToRemove)
{
    Items.Remove(item);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T15:39:49.503

您可以改用该方法[`List<T>.RemoveAll(Predicate<T> match)`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)，如下所示：

```
Items.Cast<object>()
    .RemoveAll(mi => mi is MenuItem && ((MenuItem) mi).Tag == "Dynamic"); 
```

# php - 将复杂数组转换/保存为 XML

> ID：10775164
> 
> 赞同：0
> 
> 时间：2012-05-27T15:36:36.710
> 
> 标签：php, arrays, xmldom

我想将下面的数组（“名称：$array”）保存在使用 XMLDOM 的 xml 文件中。我只尝试了一个城市，效果很好。但是当将代码集成到多个数组时。它失败。

这

数组 ( [0] => 数组 ( [city] => 数组 ( [0] => Reduit [1] => Curepipe )

```
 [distance] =>40
    )

[1] => Array
    (
        [city] => Array
            (
                [0] => Array
                    (
                        [0] => Reduit
                        [1] => Ebe
                    )

                [1] => Bees Village
                [2] => Phoen Trunk Rd
                [3] => Riv,Phoenix
                [4] => St l Rd
                [5] => Geoes Guibert St
                [6] => Curepipe
            )

        [distance] => 20        )

[2] => Array
    (
        [city] => Array
            (
                [0] => Array
                    (
                        [0] => Reduit
                        [1] => Riv,Phoenix
                    )

                [1] => St l Rd
                [2] => Geoes Guibert St
                [3] => Curepipe
            )

        [distance] =>155
    )

[3] => Array
    (
        [city] => Array
            (
                [0] => Array
                    (
                        [0] => Reduit
                        [1] => Ebene
                    )

                [1] => Belles Village
                [2] => Phoenix Trunk Rd
                [3] => Riverside,Phoenix
                [4] => St Paul Rd
                [5] => Georges Guibert St
                [6] => Curepipe
            )

        [distance] => 79
    ) 
```

)

这里是我的工作

```
function saveToXml($flatArray,$flat){

   #create a domdocument

   $domDocument = new DOMDocument('1.0','utf-8');

   $domDocument->formatOutput = true;

   $domDocument->load('result.xml');

   $xpath = new DOMXPath($domDocument);   

   $results = $xpath->query('/mauritius/pair');

   $newItem = $results->item(0);

   #get length of city in file

   $lengthCity =  $domDocument->getElementsByTagName('city')->length;

   for($i=0;$i<$lengthCity;$i++){

  #check if city exist

  if ($lengthCity >0 ){

         #delete all city

         echo $lengthCity;

         foreach ($results as $result){

            $city=$result->getElementsByTagName('city')->item(0);

            $result->removeChild($city);

         }
  }
}

#loop through all values

for ($row=0; $row<$flatArray;$row++){

#addElement

$new_node = $domDocument->createElement('city');

$text_node = $domDocument->createTextNode($flat[$row]);

$new_node->appendChild($text_node);

$newItem->appendChild($new_node);

}

echo $domDocument->save('result.xml');

} 
```

是否可以将数组转换为 xml ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T15:39:13.560

[我认为，此处](https://stackoverflow.com/questions/1397036/how-to-convert-array-to-simplexml)给出了一个类似的答案，其中包括一个将数组转换为 XML 的函数，并且可以很容易地适应你想要做的事情。

# java - Javax.swing：如何正确显示组件的更新？

> ID：10775165
> 
> 赞同：3
> 
> 时间：2012-05-27T15:36:47.737
> 
> 标签：java, swing

我正在编写一个带有图形显示的简单 Knight's Tour 程序。我已经将它编写为与控制台一起使用，现在我正在尝试传输该代码以便它与摇摆一起使用。我有一个按钮，其动作侦听器启动并操作该过程。这是代码：

```
askButton.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {

            int[][] tour = getBoard(); // generates a matrix representing a successful knight's tour
            int count = 0;

            while (count < 64) {
                count++;
                Location loc = searchFor(count, tour); //gets the location of the int "count" inside the matrix "tour"
                board.setVisible(false); //board contains a matrix of JPanels called "grid".
                grid[loc.row()][loc.column()].add(new JLabel("" + count)); //adds JLabel to JPanel with the proper number
                board.setVisible(true); //reset to visible to show changes
                delay(1000); //wait 1000 milliseconds - one second - to allow user to view changes
            }
        }
    }); 
```

这就是代码。我希望每个数字以一秒的间隔单独显示，但就目前而言，框架会暂时变为空白，并在完成后突然显示所有数字的结果。有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T16:27:40.730

把所有答案放在一起

1.不要调用`sleep(int)`，`wait(int)`在从[AWT / Swing Listener](http://docs.oracle.com/javase/tutorial/uiswing/events/handling.html)执行的代码期间，使用

*   [摇摆计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)，

或者

*   Swing GUI 的所有输出都必须包含[在 invokeLater](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)的代码中

2.after `add`//`remove`已经`modify`可见的容器需要调用

*   `revalidate()`和`repaint()`,然后`setVisible()`

3.`setVisible`必须`invokeLater`在代码里面包裹你的本性

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T15:41:36.883

您的`delay`方法阻止了事件调度线程，避免了这些组件的重绘。查看[Swing 并发教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)以获取有关 Swing 和线程的更多信息。

您的问题的可能解决方案是使用[Swing`Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)而不是`delay`方法

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-27T15:44:07.307

当你在那个while循环中时，`repaint()`永远不会被调用。这就是为什么在方法结束之前您什么都看不到的原因。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-27T15:49:51.013

首先，在对 GUI 进行一些更改后尝试调用 revalidate() 和 repaint()。其次，我还有一个与您的类似的 GUI 项目作为我的 CSE 帮助。

在此过程中，我发现 GUI 没有按照我的意愿同时更新。我尝试了很多方法来解决它。最终的解决方案是放弃使用在板子上添加 JLabels 或 JPanels（JFrame），而是使用 setIcon 或 setText 与框架进行更好的通信。嗯，这只是我个人的经验。希望对您的项目有所帮助。

# mongodb - 如何创建一个 4 字节的时间戳

> ID：10775167
> 
> 赞同：1
> 
> 时间：2012-05-27T15:37:22.363
> 
> 标签：mongodb, timestamp, unix-timestamp

[MongoDB](http://www.mongodb.org/display/DOCS/Object+IDs "MongoDB")在其 objectID 的一部分中使用 4 字节时间戳。我会将时间戳转换为 4 个字节吗？

我认为缺少的部分是“BSON ObjectIds can be any 12 byte **binary** ”。所以，我想我正在寻找将时间戳转换为前 4 个二进制片段：

![在此处输入图像描述](../Images/ba005b196b85103005c9c6e92db93778.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:33:48.550

作为 API 的一部分，有一个辅助函数可以提取时间戳。

```
//OID ObjID; 
time_t ts = ObjID.asTimeT() 
```

[http://api.mongodb.org/cplusplus/current/classmongo_1_1_o_i_d.html](http://api.mongodb.org/cplusplus/current/classmongo_1_1_o_i_d.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T16:26:07.473

时间戳*是*一个 4 字节整数——它表示自 1970 年 1 月 1 日以来的秒数。

你使用什么语言，你想做什么？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-27T15:41:50.543

将 4 个字节解析为基数为 16 的小数，然后乘以 1000。

# git - 合并分支以掌握所有更改？

> ID：10775168
> 
> 赞同：3
> 
> 时间：2012-05-27T15:38:16.313
> 
> 标签：git, merge

有时我发现我正在处理一个分支，我想将分支中的所有更改合并到我的 master 分支中，以便 master 是我刚刚使用的分支的克隆必不可少的。是否有一种简单的方法来更新 master，以便分支中的所有更改都合并到 master 中。我正在寻找的行为是 master 将成为分支的精确克隆。我通常一次将单个冲突合并到 master 中，但是有没有更简单的方法来做到这一点？谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:48:02.280

如果要保留历史记录，请使用`ours`合并策略：

```
git checkout branch
git merge -s ours master 
```

如果您不关心主分支的历史记录，请将其重置：

```
git checkout master
git reset --hard branch 
```

（这将丢弃您*所有*的本地更改，并使 master 的提交无法访问！）

如果您的 master 中没有任何不在您的分支中的提交，您可以将 master 快速转发到您的分支：

```
git checkout branch
git merge master
# or `git merge --ff-only master` to only allow fast-forward 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T15:42:41.857

`git reset --hard`使用您想成为新主管的提交的 ID 应该是您的解决方案。

[http://git-scm.com/2011/07/11/reset.html](http://git-scm.com/2011/07/11/reset.html)

编辑：我会在重复时标记它： [如何从另一个分支完全替换 git 中的主分支？](https://stackoverflow.com/questions/2862590/how-to-replace-master-branch-in-git-entirely-from-another-branch)

查看我提到的副本中的解决方案。但根据所需的结果，我建议的重置可能是解决方案。

# fitnesse - SLIM 查询表比较中的浮点值

> ID：10775173
> 
> 赞同：1
> 
> 时间：2012-05-27T15:39:36.127
> 
> 标签：fitnesse, fitnesse-slim, fit-framework

我对 Fitnesse 还很陌生。我正在使用子集查询表。它工作正常，除非我必须比较一个浮点值。有什么方法可以将这些值与一定的准确度进行比较？

例如，当我比较 4.12 和 4.1234 时，测试应该通过。但是现在，它看起来像是在进行字符串比较并且失败了。无论如何我可以覆盖验证部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:26:30.687

您可以使用波浪字符来表示“大约等于”，例如 ~=4.12

有关详细信息，请参阅[http://fitnesse.org/FitNesse.UserGuide.SliM.ValueComparisons 。](http://fitnesse.org/FitNesse.UserGuide.SliM.ValueComparisons)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-21T15:50:20.270

为了实现 Double 和 Float 值的近似比较，我重写了夹具类，如下所示：

```
public class ApproxColumnFixture extends ColumnFixture {

    @Override
    public void check(Parse cell, TypeAdapter a) {
        if (a.type == Double.class) {
            super.check(cell, new ApproxDoubleAdapter(a));
        } else if (a.type == Float.class) {
            super.check(cell, new ApproxFloatAdapter(a));
        } else {
            super.check(cell, a);
        }
    }
} 
```

两个 TypeAdapter 类同时使用相对值**epsilon**和绝对值**精度**进行比较。从预期输入中检测精度，因此 23.099 的精度为 0.001。他们还期望特殊值，例如 NaN 的“nan”和 +/-Infinitive 的“inf”。这是一个例子：

```
public class ApproxDoubleAdapter extends TypeAdapter {
    public final Double ZERO = new Double(0.0);

    private final double epsilon;
    private int precisions = -1;

    public ApproxDoubleAdapter(final TypeAdapter classDoubleAdapter, double epsilon) {
        this.target = classDoubleAdapter.target;
        this.fixture = classDoubleAdapter.fixture;
        this.field = classDoubleAdapter.field;
        this.method = classDoubleAdapter.method;
        this.type = classDoubleAdapter.type;
        this.isRegex = classDoubleAdapter.isRegex;

        this.epsilon = epsilon;
    }
    public ApproxDoubleAdapter(final TypeAdapter adapt) {
        this(adapt, 0.0001);
    }

    public Object parse(String s) throws Exception {
        if ((s == null) || s.equals("null")) {
            return null;
        }
        if (s.equals("0")) {
            return ZERO;
        }
        if (s.equals("nan")) {
            return Double.NaN;
        }
        if (s.equals("inf")) {
            return Double.POSITIVE_INFINITY;
        }
        precisions = s.indexOf(".");
        if (precisions >= 0) {
            precisions = s.length() - 1 - precisions;
        }
        return new Double( Double.parseDouble(s) );
    }

    public boolean equals(Object a, Object b) {
        if (a == null) {
            return (b == null);
        }
        if (b == null) {
            return (a == null);
        }
        if ((a.getClass() != Double.class) || (b.getClass() != Double.class)) {
            return false;
        }
        double aV = (Double) a;
        double bV = (Double) b;
        if (Double.isNaN(aV)) {
            return Double.isNaN(bV);
        }
        if (Double.isNaN(bV)) {
            return Double.isNaN(aV);
        }
        if (Double.isNaN(aV)) {
            return Double.isNaN(bV);
        }
        if (Double.isInfinite(aV)) {
            return Double.isInfinite(bV);
        }
        if (Double.isInfinite(bV)) {
            return Double.isInfinite(aV);
        }
        final double diff = Math.abs(aV - bV);
        if (diff <= Math.abs(aV + bV) * epsilon) {
            return true;
        }
        if (precisions > 0) {
            return diff <= Math.pow(10, precisions);
        } else if (aV == 0.0) {
            return diff < epsilon;
        } else {
            return false;
        }
    }
} 
```

# c# - Xna 和服务器作为控制台应用程序 - GameTime

> ID：10775178
> 
> 赞同：0
> 
> 时间：2012-05-27T15:39:55.577
> 
> 标签：c#, xna

嗨，我正在 xna 中编写小游戏，我完成了客户端，现在正在做服务器。但是服务器是一个控制台，而客户端 xna 应用程序。我使用基于经理的相同模型。

现在我需要在服务器端更新我的经理，而我的经理将作为参数 gateTime，我该怎么做才能在服务器控制台应用程序中循环传递 gateTime？手动计算自上次循环以来经过了多少时间？在控制台中，我什至看不到 GameTime 将其打包并传递给模型管理器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:44:49.430

您可以使用类似于 XNA 创建的结构，忽略`Draw()`ing 部分。代码已经在那里，只需删除您不会使用的内容，并且`gameTime`将在那里。

您可以而且应该重用所有可以重用的代码，如果它不会破坏您的程序或使其更难处理和维护。

# facebook - asp.net mvc3中的Facebook身份验证

> ID：10775180
> 
> 赞同：-1
> 
> 时间：2012-05-27T15:40:13.880
> 
> 标签：facebook, asp.net-mvc-3, facebook-javascript-sdk

我正在使用 facebook javascript sdk 进行身份验证及其工作，但我想问我如何才能让我的网站的某些部分只有在用户登录时才能访问，例如：如果用户类型：[http ://www.example.com /Products](http://www.example.com/Products)如果他/她未登录，则必须将他/她重定向到登录页面。在使用 fb javascript sdk 时如何执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:55:05.223

使用 FacebookAuthorize 属性

```
[FacebookAuthorize(LoginUrl = "/Account/Login")]
public ActionResult Products() {} 
```

查看[ASP.NET MVC 3 网站入门（使用 Javascript SDK）](http://facebooksdk.codeplex.com/wikipage?title=Getting%20Started%20with%20an%20ASP.NET%20MVC%203%20Website%20%28With%20Javascript%20SDK%29&referringTitle=Getting%20Started)了解更多详细信息

# algorithm - 对树的基本操作感到困惑

> ID：10775183
> 
> 赞同：1
> 
> 时间：2012-05-27T15:40:54.933
> 
> 标签：algorithm, data-structures, tree, binary-tree

我们如何在二叉树（**不是**BST）中插入一个*键？* 我的意思是二叉树没有像 BST 这样的节点的某些属性，所以似乎键的插入可以在树中的*任何位置。* 然而，通过将密钥放在任何地方，二叉树可能会将其退化为失去其属性的“列表”。 我已经看到使用合并方案创建二叉树（示例应用程序是 a ），但似乎没有遇到二叉树的插入方法。 我相信这个问题扩展到多路树，因为二叉树将是多路树（2个子节点）的特定示例，对吧？ ***`O(logN)`
`Huffman Tree`

我错了吗？是否有向二叉树添加新键的特定方法，或者二叉树的应用程序是否如此具体以至于合并操作就足够了并且不需要插入方法？也许我完全错过了BT的使用应用或概念？***

 *****注意：**我问的是二叉树。与二叉***搜索*****树**无关。

* * *

**更新：**
如果插入可以在任何地方，术语的含义是什么：`Full Binary Tree`？
这意味着无法通过在任何地方插入来实现的日志属性。“Full BT”是否也是一个没有意义的定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T15:48:49.043

二叉树是一种特定类型的树，满足每个节点恰好有 0、1 或 2 个子节点的条件。任何满足这个条件的树都被标记为二叉树。

因此，没有“正确”的方式将元素插入二叉树。只要之前是二叉树，之后是二叉树，插入就有效。

术语**二叉树**比任何东西都更适合分类。在其纯粹的“抽象”形式中，它作为数据结构并不是非常有用。但是，在表征其他更具体类型的树（如您提到的[霍夫曼树）时，它会很有帮助。](http://en.wikipedia.org/wiki/Huffman_coding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:18:26.500

最简单的方案可能是如下维护一个完整的树。调用第一个插入的节点 1，第二个 2，第三个 3，依此类推。当您插入节点 i 时，如果 i 是偶数，则使其成为 i/2 的节点的左子节点，如果 i 是奇数，则使其成为 (i-1)/2 的右子节点。例如，您将插入的第五个节点插入第二个节点的右子节点。您插入的第六个节点创建到第三个节点的左子节点中。如果您需要删除一个节点，请先将其与编号最高的节点交换，以便您始终从最后删除。

这棵树可以通过从位置 1 开始在数组中布局节点来表示，这对于二叉堆来说很常见。节点 i 的子节点始终是 2i 和 2i+1，除非这些数字大于节点的总数，在这种情况下，您位于树的底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:44:46.140

这就是这一切的意思。在 BST 中，插入由元素的属性（大于、小于等）引导。在一般的 BT中*，您*将不得不处理插入过程。

假设您想使用 BT 来实现无序收集。只需用两个附加值标记每个节点，除了它携带的数据元素：左侧的节点数量和右侧的数量。然后让你的插入由这两个引导，达到近乎完美的平衡。对于叶子，最初使用没有子节点的节点，任何新元素在到达时都可以作为子节点插入其中。

现在你有一个完美的自动平衡 BT 实现了一个无序的东西集合，它可以在 O(log(n)) 时间内插入，并且可以不按特定顺序列出。这只是一个例子。***

# java - 初始化基元数组

> ID：10775185
> 
> 赞同：24
> 
> 时间：2012-05-27T15:41:05.930
> 
> 标签：java, arrays, primitive

我想知道，

这两种初始化基元数组的方法之间到底有什么区别：

```
int[] arr1 = new int[]{3,2,5,4,1};

int[] arr2 = {3,2,5,4,1}; 
```

哪个是首选？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-27T15:43:34.433

没有，它们产生完全相同的字节码。我认为可能是旧版本的 Java 不支持第二种形式，但那已经有一段时间了。

既然如此，它就变成了风格问题，这是个人喜好的问题。既然你特别问，***我***更喜欢第二种，但同样，这是个人品味的问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-27T16:05:12.903

正如其他人所提到的，它们是等效的，并且第二个选项不那么冗长。不幸的是，编译器并不总是能够理解第二个选项：

```
public int[] getNumbers() {
   return {1, 2, 3}; //illegal start of expression
} 
```

在这种情况下，您必须使用完整的语法：

```
public int[] getNumbers() {
   return new int[]{1, 2, 3};
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-27T15:44:05.603

两种说法没有区别。个人比较喜欢第二种。因为您拥有大括号中指定的所有元素。编译器将帮助您计算数组的大小。

所以不需要`int[]`在赋值运算符之后添加。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-10T21:17:51.103

在您的情况下，这两种样式最终会产生相同的效果，两者都是正确的，而第二种更简洁。但实际上这两种风格是不同的。

记住java中的数组是固定长度的数据结构。创建数组后，您必须指定长度。

没有初始化，第一种情况是

```
int[] arr1 = new int[5]; 
```

第二种情况是

```
int[] arr2 = {0,0,0,0,0}; 
```

你看出区别了吗？在这种情况下，首选第一种样式，因为您不必手动键入所有这些默认初始值。

对我来说，这两种样式之间唯一的大区别是在创建没有显式初始化的数组时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T15:45:58.257

在这种情况下，第二个，因为它更漂亮，更简洁:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-27T17:37:14.207

在这种情况下有用

```
void foo(int[] array) {

} 
```

用文字调用

```
// works
foo(new int[]{5, 7})

//illegal
foo({5, 7}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-06T15:46:08.683

添加到@Paul Bellora 的答案，如果您尝试使用三元运算符初始化原始数组，则只有第二个选项有效

```
int[] arr1 = false ? {} : {1,2}; // doesn't work
int[] arr2 = false ? new int[]{} : new int[]{1,2}; // works 
```

# php - mysql_fetch_array

> ID：10775187
> 
> 赞同：1
> 
> 时间：2012-05-27T15:41:20.153
> 
> 标签：php, mysql

我有一个数据库，其中包含指向其中每一集的链接的行。我正在尝试使用下面的代码来获取一种类型的节目的所有链接，并且我成功地做到了。我似乎想不通的是如何只显示其中的一行，而不是让它们全部显示在一行文本中，这样我就可以在构建页面时使用它们。

```
$query = "SELECT direct_link FROM episode_link WHERE anime_id = '$animeid'";
$result = mysql_query($query) or die(mysql_error());    
while($row = mysql_fetch_array($result)) 
{
    $dlink = $row['direct_link'];
    echo $dlink;
} 
```

目前它正在像这样显示它们。

```
link1link2link3link4link5link6 
```

我希望能够一次显示一个或为它们分配变量，以便我可以将它们放在我网站上的 href 标记中。我以为我可以通过使用 $row[1] 来做到这一点，但这并没有显示任何内容。

抱歉，如果我让我难以理解，是 php 新手，所以我还在学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T15:48:12.397

我建议你多看看一些基本的教程网站

```
$dlink = array();
while($row = mysql_fetch_array($result)){
        $dlink[] = $row['direct_link'];
} 
```

那么当你想回显时：

```
foreach($dlink as $link){
echo '<a href="'.$link.'">'.$link.'</a><br />'.PHP_EOL;
} 
```

* * *

**另外：**由于您可能想要链接的标题而不是文字链接，因此您也应该从数据库中获取标题，如果您已将其存储为：

`SELECT direct_link,title FROM episode_link...`

```
$dlink = array();
$i=0;
while($row = mysql_fetch_array($result)){
        $dlink[$i]['title'] = $row['title'];
        $dlink[$i]['link']  = $row['direct_link'];
$i++;
} 
```

然后在回显时：

```
foreach($dlink as $link){
echo '<a href="'.$link['link'].'">'.$link['title'].'</a><br />'.PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T15:48:43.380

您可以使用类似的方法将结果返回到可用数组中。

```
// Returns the rows as an array of rows 
// Providing a key_column gives you access to specific rows (e.g. if (isset($result_array[$user_id])) ...) 
function db_result_array($result, $key_column = null) { 
   for ($array = array(); $row = mysql_fetch_assoc($result); isset($row[$key_column]) ?     $array[$row[$key_column]] = $row : $array[] = $row); 
   return $array; 
} 
```

利用：

```
$results = db_result_array(mysql_fetch_array($result),null) 
```

或者，您可以遍历 mysql_fetch_array($result) 并将对象添加到数组中，这基本上就是上述函数的作用。

```
$stored = array();
while($row = mysql_fetch_array($result)) 
{
    array_push($stored,$row['direct_link']);
}

print_r($stored); //Now $stored is an array of your direct_link values. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T15:52:03.350

我不确定是否能很好地理解你的问题，但这里有一些东西可以给你灵感：

```
$links = array();
while($row = mysql_fetch_array($result)) {
  $links[] = $row;
} 
```

然后稍后您通过执行以下操作访问每个：

```
$links[1]['direct_link'];  // Or $links[2] ... 3 ... 4 depending on result count. 
```

或者你可以这样做：

```
foreach ($links as $link) {
  echo '<a href="'.$link['direct_link'].'">Link</a>';
} 
```

希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T15:45:47.113

```
while($row = mysql_fetch_array($result)) 
    {
        $dlink[] = $row['direct_link'];
    }

$count = $dlink;

echo $count;
echo $dlink[1]
echo $dlink[2]

and so on. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T15:46:00.780

```
$dlink = array();
while($row = mysql_fetch_array($result)) 
    {
        $dlink[] = $row['direct_link'];
    } 
```

展示它`echo $dlink[0];`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-27T15:46:05.403

```
$dlink = array();

while ($row = mysql_fetch_assoc($result))
    $dlink[] = $row['direct_link']; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-11T05:19:17.347

您可以使用数组 [] 将其添加到数组中。

```
$dlink = array();
while($row = mysql_fetch_array($result)) 
{
    $dlink[] = $row['direct_link'];
}

To print this

foreach($dlink as $arrays){
   echo $arrays; // This will print value on loop
} 
```

# css - 首字母 - CSS：两行的首字母

> ID：10775189
> 
> 赞同：10
> 
> 时间：2012-05-27T15:41:25.673
> 
> 标签：css, firefox, pseudo-element

我正在尝试在 < p > 元素中创建大的首字母，这些首字母应该从第二行开始并覆盖两行，但在 Firefox 中，第一个字母的位置不符合我的预期（在其他任何地方都可以使用，即使在 IE 中，也只有 FF 会出现问题...... )

[http://jsfiddle.net/6SfHG/1/](http://jsfiddle.net/6SfHG/1/)

![首字母问题](../Images/a0769cbd35df82b2f0ea66d3ec0faad8.png)

任何想法如何使它在同一水平上开始？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T15:53:42.150

这对我有用，虽然它不是很优雅：

> `:first-letter`因此，要使用垂直对齐的伪元素获得跨浏览器首字下沉效果，您需要应用`float: left`，然后找到字体大写高度的高度，将 line-height 减小到该值，调整 margin-top 使其在 Firefox 中正确对齐在 Opera 或 WebKit 浏览器中，然后对仅 IE 样式表使用条件注释删除 margin-top 并更改 line-height 以正确垂直对齐类型。

```
p::first-letter {
  float: left;
  font-family: Georgia, serif;
  font-size: 75px;
  line-height: 60px;
  padding: 3px;
} 
```

[http://nickcowie.com/2009/drop-caps-first-letter-and-firefox/](https://web.archive.org/web/20090311004922/http://nickcowie.com/2009/drop-caps-first-letter-and-firefox/)

# hadoop - 工作流中中间作业的 Hadoop SequenceFile 输入/输出

> ID：10775191
> 
> 赞同：1
> 
> 时间：2012-05-27T15:41:33.483
> 
> 标签：hadoop, format, mapreduce, transformation

我有一个多阶段/作业 mapreduce 程序。我的第一个输入必须是 TextInputFormat，最后一个输出必须是 TextOutputFormat。我想要实现的是在第一个 Job 中将格式从 Text 转换为 SequenceFile。像这样：

```
TextInputFormat
Job1.execute()
SequenceFileOutputFormat

SequenceFileInputFormat
Job2.execute()
SequenceFileOutputFormat

...

SequenceFileInputFormat
JobLast.execute()
TextOutputFormat 
```

在所有示例中，我发现这是通过创建一个额外的作业来实现的，该作业只是将输入写入为 SequenceFile，另一个读取 SequenceFile 并将其以不同的格式存储。这可以在不使用额外工作的情况下完成吗？我可以做这样的事情：

```
conf.setInputFormat(TextInputFormat.class);
conf.setOutputFormat(SequenceFileOutputFormat.class); 
```

虽然作业实际上正在执行其计算。我如何在不创建两个额外的作业（写入和读取）的情况下实现这一点。

问题解决了，我的代码错误，对此感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:04:02.020

您当然可以以任何您想要的形式存储输出。你真的不需要单独的工作。`SequenceFileOutputFormat`可以存储任何类型的键值，所以简单地说明`conf.setOutputFormat(SequenceFileOutputFormat.class);`就可以了。你试过了吗？它没有工作吗？但请确保您的下一个映射作业的输入键和值类与您用于最后一个 reducer 的输出键/值类兼容。

# c++ - 虚函数调用始终比普通函数调用快。为什么？

> ID：10775197
> 
> 赞同：4
> 
> 时间：2012-05-27T15:42:05.573
> 
> 标签：c++, performance, virtual-functions

我编写了以下程序来测试我的机器上虚拟功能的成本：

```
#include <iostream>
#include <ctime>
#define NUM_ITER 10000000000
//   5 seconds = 1000000000

static volatile int global_a;

void spin()
{
    int a = global_a;
    int b = a*a;
    int c = a+5;
    int d = a^b^c;
    global_a = b*d;
}

struct A {
    virtual void a() = 0;
};

struct B : A {
    virtual void a() { spin(); }
};

struct C : A {
    virtual void a() { spin(); }
};

void run_A1(A* a)
{
    a->a();
}

void run_A(A* a)
{
    for (long long i = 0; i < NUM_ITER; i++) {
        run_A1(a);
    }
}

void run()
{
    for (long long i = 0; i < NUM_ITER; i++) {
        spin();
    }
}

int main()
{
    global_a = 2;

    A* a1 = new B;
    A* a2 = new C;

    std::clock_t c_begin, c_end;

    c_begin = std::clock();
    run_A(a1);
    c_end = std::clock();

    std::cout << "Virtual | CPU time used: "
              << 1000.0 * (c_end-c_begin) / CLOCKS_PER_SEC
              << " ms\n";

    c_begin = std::clock();
    run_A(a2);
    c_end = std::clock();

    std::cout << "Virtual | CPU time used: "
              << 1000.0 * (c_end-c_begin) / CLOCKS_PER_SEC
              << " ms\n";

    c_begin = std::clock();
    run();
    c_end = std::clock();

    std::cout << "Normal  | CPU time used: "
              << 1000.0 * (c_end-c_begin) / CLOCKS_PER_SEC
              << " ms\n";

    delete a1;
    delete a2;
} 
```

结果与我预期的相反：虚函数*始终*更快。例如，这是我得到的输出之一`NUM_ITER = 10000000000`：

```
Virtual | CPU time used: 49600 ms
Virtual | CPU time used: 50270 ms
Normal  | CPU time used: 52890 ms 
```

通过对生成的汇编文件的分析，我可以确认编译器没有优化任何重要的东西。我使用 GCC-4.7 和以下选项：

```
g++ -O3 -std=c++11 -save-temps -masm=intel -g0 -fno-exceptions -fno-inline test.cc -o test 
```

为什么虚函数调用更快？或者为什么非虚函数调用更慢？分支预测器变得这么好了吗？或者也许它只是我的机器。也许有人也可以测试并发布他的时间安排？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T16:02:33.463

`global_a`在每次调用之前尝试重置`run()`：

```
void run()
{
    global_a = 2;

    ...
}

void run_A(A *a)
{    
    global_a = 2;

    ...
} 
```

不确定这是否有任何影响，但并非所有数学运算都需要相同的时间！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T16:11:59.847

编译器可能足够聪明，可以看到虚拟函数调用全局函数`spin()`并将它们去虚拟化。这些调用也可能被内联。

检查[这个](https://stackoverflow.com/questions/7046739/lto-devirtualization-and-virtual-tables)。

# ios - 归档 NSMutableArray

> ID：10775200
> 
> 赞同：1
> 
> 时间：2012-05-27T15:42:27.700
> 
> 标签：ios, objective-c

我正在阅读许多 plist 并将它们显示在 UITableview 中。问题是，应用程序本身非常慢，我确实阅读了一些关于归档或序列化的内容，归档是否会使应用程序更快，或者如果我想使用大量数据，我会尝试使用 sqlite 吗？

如果有人能帮我告诉我如何归档我的数据或如何序列化数据以优化 plist，那就太好了。

这就是我所拥有的：（我在“数据”中收集所有数组）

```
- (void) makeData {
    data = [[NSMutableArray alloc] init];
    sectionArray = [[NSMutableArray alloc] init];

    //here we connect each array built with the remote plist on the server - different plists for each
    amenajariArray = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://..../amenajari.plist"]];
    apicultoriArray = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://..../apicultori.plist"]];
    asigurariArray = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://..../asigurari.plist"]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:45:48.977

您正在发出看起来是三个同步 Web 请求来获取数据。您应该至少使这些异步和并行。您还可以采用在后台同步或更新数据并使用默认数据集开箱即用的方法。查看[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)中的 dispatch_async 块或操作队列。您还可以查看[ASIHttpRequest](http://allseeing-i.com/ASIHTTPRequest/)中的异步方法。您必须找到一种方法来不阻塞 UI 线程以连续阻塞 http 请求。另一个关于 GCD 异步 UI 的 SO 帖子： [performSelectorOnMainThread with multiple parameter](https://stackoverflow.com/questions/7693203/performselectoronmainthread-with-multiple-parameter/7693262#7693262)

此外，如果您要保留许多数据列表并且开始遇到性能问题，您可能需要查看[sqlite](http://www.sqlite.org/)或[核心数据](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coredata/cdprogrammingguide.html)（由 sqlite 支持）。

请记住，如果您要保留列表，则修改一项/属性将写入整个列表。此外，如果您要存储许多列表（特别是如果数据之间存在关系），则数据库可能更合适。它还可以提供更快、更优化的查询模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T16:06:18.040

在上述情况下，您的数组已经以 plist (xml) 格式序列化。即使您序列化为二进制格式，也不会随心所欲地提高性能。

为了提高性能，您可以使用延迟加载概念来填充表视图数据源的数组。或者显示前 25 行，然后显示下 25 行的按钮。这些东西需要 sqlite 或核心数据。

# android - Android：开发类似 Facebook 的登录屏幕

> ID：10775203
> 
> 赞同：3
> 
> 时间：2012-05-27T15:42:56.390
> 
> 标签：android, facebook, layout

我正在尝试在我的 android 应用程序上开发一个屏幕，例如 facebook 登录（应用程序 iPhone/Android） [应用程序 Facebook 屏幕截图](http://www.google.com.br/imgres?um=1&hl=pt-BR&authuser=0&biw=1280&bih=633&tbm=isch&tbnid=_Y0fQpHOLzVdNM%3a&imgrefurl=http://www.macpost.net/1597/facebook-ipad-app-launch-set-for-october-4-at-apples-iphone-5-event/&docid=2ft66Oo_RXYNWM&imgurl=http://www.macpost.net/wp-content/uploads/2011/09/facebook-ipad-app-login-screen.png&w=768&h=1024&ei=FkfCT-aKL4uo8ATu2LC4Cw&zoom=1&iact=hc&vpx=119&vpy=116&dur=1461&hovh=259&hovw=194&tx=149&ty=159&sig=115270935923857306579&page=1&tbnh=132&tbnw=112&start=0&ndsp=19&ved=1t:429,r:0,s:0,i:68)

如何在这两个编辑文本之间绘制分隔线：电子邮件和密码？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T16:31:01.480

要制作这样的效果，您只需制作自己的 9-patch 可绘制。我已经在我的应用程序上做过这样的事情看到[这个](https://stackoverflow.com/questions/10424654/make-a-relativelayout-and-its-child-im-my-case-an-imageview-act-like-one-button)

布局顶部可绘制未按下
![布局顶部可绘制未按下](../Images/59f8bd8cec258bc4ca326746557c7e56.png)

布局顶部可绘制按下

![布局顶部可绘制按下](../Images/9f610f45819ce46d9a84c456ccc67081.png)

布局底部可绘制未按下

![布局底部可绘制未按下](../Images/6650b59928fb3134632e55c7b83cbb16.png)

按下布局底部可绘制对象

![按下布局底部可绘制对象](../Images/1b428d44c767ffc2c5092e13bf8c4a5b.png)

剩下的唯一一件事是为顶部编辑文本构建两个选择器，另一个为底部编辑文本构建选择器，并将它们设置为您的编辑文本的背景：

selector_top_editText.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/layout_top_pressed" android:state_pressed="true"/>
    <item android:drawable="@drawable/layout_top_normal"/>

</selector> 
```

selector_bottom_editText.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/layout_bottom_pressed" android:state_pressed="true"/>
    <item android:drawable="@drawable/layout_bottom_normal"/>

</selector> 
```

对于您的登录页面，您可以使用此布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:ems="10"
            android:inputType="textPersonName"
            android:background="@drawable/layout_top_selector" />

        <EditText
            android:id="@+id/editText2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:ems="10"
            android:inputType="textPassword" 
            android:background="@drawable/layout_bottom_selector"
            android:layout_below="@id/editText1"/>

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="46dp"
            android:text="Login" />

</RelativeLayout> 
```

检查一下，如果发现问题，请与我联系

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T15:47:59.937

如果您想在视图之间画一条线，这将有所帮助

```
<View
         android:layout_width="fill_parent"
         android:layout_height="2dip"
         android:background="#FF909090" /> 
```

如果您正在寻找自定义 EditText，这些链接[在这里](https://stackoverflow.com/questions/4844681/android-custom-edittext-ui)和[这里](http://www.androidworks.com/changing-the-android-edittext-ui-widget)可能会对您有所帮助。

# c++ - 在一个请求中下载正文之前 C++ libcurl 检查标头

> ID：10775205
> 
> 赞同：1
> 
> 时间：2012-05-27T15:42:57.460
> 
> 标签：c++, curl, libcurl

在 C++ 中，我想使用 libcurl 检查 URL 是否为 text/html，如果是，则下载正文，否则停止。

我希望**一步**完成，而不是先发送 HEAD，如果 HEAD 没问题，再次请求页面下载。

如果 libcurl 无法做到这一点，它是否会提供其他支持 C++ 的库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T16:04:37.927

要发送 HTTP HEAD 请求，您需要设置此选项：

```
 curl_easy_setopt(ctx,CURLOPT_NOBODY ,1 ); 
```

你也可以看看这个问题：[help required on libcurl programming in send HTTP HEAD Request](https://stackoverflow.com/questions/2955695/help-needed-on-libcurl-programming-in-sending-http-head-request)

将标题与正文分开（不知道是否真的需要），您可以查看：

[http://curl.haxx.se/libcurl/c/sepheaders.html](http://curl.haxx.se/libcurl/c/sepheaders.html)

要下载许多不同的 URL libcurl-multi，你应该看看：

[http://curl.haxx.se/libcurl/c/libcurl-multi.html](http://curl.haxx.se/libcurl/c/libcurl-multi.html)

[对http://curl.haxx.se/libcurl/c/sendrecv.html](http://curl.haxx.se/libcurl/c/sendrecv.html)稍作修改：

```
#include <stdio.h>
#include <string.h>
#include <curl/curl.h>

/* Auxiliary function that waits on the socket. */
static int wait_on_socket(curl_socket_t sockfd, int for_recv, long timeout_ms)
{
  struct timeval tv;
  fd_set infd, outfd, errfd;
  int res;

  tv.tv_sec = timeout_ms / 1000;
  tv.tv_usec= (timeout_ms % 1000) * 1000;

  FD_ZERO(&infd);
  FD_ZERO(&outfd);
  FD_ZERO(&errfd);

  FD_SET(sockfd, &errfd); /* always check for error */

  if(for_recv)
  {
    FD_SET(sockfd, &infd);
  }
  else
  {
    FD_SET(sockfd, &outfd);
  }

  /* select() returns the number of signalled sockets or -1 */
  res = select(sockfd + 1, &infd, &outfd, &errfd, &tv);
  return res;
}

int main(void)
{
  CURL *curl;
  CURLcode res;
  /* Minimalistic http request */
  const char *request = "GET / HTTP/1.0\r\nHost: m0g.net\r\n\r\n";
  curl_socket_t sockfd; /* socket */
  long sockextr;
  size_t iolen;
  curl_off_t nread;

  curl = curl_easy_init();
  if(curl) {
    curl_easy_setopt(curl, CURLOPT_URL, "http://m0g.net");
    /* Do not do the transfer - only connect to host */
    curl_easy_setopt(curl, CURLOPT_CONNECT_ONLY, 1L);
    res = curl_easy_perform(curl);

    if(CURLE_OK != res)
    {
      printf("Error: %s\n", strerror(res));
      return 1;
    }

    /* Extract the socket from the curl handle - we'll need it for waiting.
     * Note that this API takes a pointer to a 'long' while we use
     * curl_socket_t for sockets otherwise.
     */
    res = curl_easy_getinfo(curl, CURLINFO_LASTSOCKET, &sockextr);

    if(CURLE_OK != res)
    {
      printf("Error: %s\n", curl_easy_strerror(res));
      return 1;
    }

    sockfd = sockextr;

    /* wait for the socket to become ready for sending */
    if(!wait_on_socket(sockfd, 0, 60000L))
    {
      printf("Error: timeout.\n");
      return 1;
    }

    puts("Sending request.");
    /* Send the request. Real applications should check the iolen
     * to see if all the request has been sent */
    res = curl_easy_send(curl, request, strlen(request), &iolen);

    if(CURLE_OK != res)
    {
      printf("Error: %s\n", curl_easy_strerror(res));
      return 1;
    }
    puts("Reading response.");
    char data[2048];
    int idxread=0;

    /* read the response */
    for(;;)
    {
      char buf[1024];

      wait_on_socket(sockfd, 1, 60000L);
      res = curl_easy_recv(curl, buf, 32, &iolen);

      if(CURLE_OK != res)
        break;

      if (nread+idxread > 2048)
          break;

      strncpy(data+idxread,buf,nread);
      idxread+=nread;

      if (strstr(data,"\r\n\r\n") != NULL) {
        if (strstr(data,"Content-Type: text/html") == NULL) {
            printf("not an html document.");
            return 2;
        }
      }

      nread = (curl_off_t)iolen;

      printf("Received %" CURL_FORMAT_CURL_OFF_T " bytes.\n", nread);
    }
    printf("'''%s'''\n", data);

    /* always cleanup */
    curl_easy_cleanup(curl);
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-30T01:00:29.560

这已经晚了几年，但这是 cURL 的原作者 Linus Nielsen Feltzing 提出的另一种方法。

```
#include <curl/curl.h> 
int main(int argc, char *argv[]) 
{ 
   CURLcode ret; 
   CURL *hnd = curl_easy_init(); 
   curl_easy_setopt(hnd, CURLOPT_URL, "http://www.haxx.se"); 
   curl_easy_setopt(hnd, CURLOPT_HEADER, 1); 
   curl_easy_setopt(hnd, CURLOPT_NOBODY, 1); 
   ret = curl_easy_perform(hnd); 
   curl_easy_cleanup(hnd); 
} 
```

Linus 在[2007](https://curl.haxx.se/mail/lib-2007-10/0025.html)年的`curl-library`邮件列表中提出了这个建议。

# mysql - 了解 GROUP BY 语句的行为

> ID：10775206
> 
> 赞同：7
> 
> 时间：2012-05-27T15:42:58.443
> 
> 标签：mysql, sql, group-by, having-clause

问题是这个。。

表是这样的。。

```
+--------------------------+---------+------+-----+---------+----------------+
| Field                    | Type    | Null | Key | Default | Extra          |
+--------------------------+---------+------+-----+---------+----------------+
| facility_map_id          | int(10) | NO   | PRI | NULL    | auto_increment |
| facility_map_facility_id | int(10) | NO   | MUL | NULL    |                |
| facility_map_listing_id  | int(10) | NO   |     | NULL    |                |
+--------------------------+---------+------+-----+---------+----------------+ 
```

数据是这样的。。

```
+-----------------+--------------------------+-------------------------+
| facility_map_id | facility_map_facility_id | facility_map_listing_id |
+-----------------+--------------------------+-------------------------+
|             248 |                        1 |                      18 |
|             259 |                        1 |                      19 |
|             206 |                        1 |                      20 |
|             244 |                        1 |                      21 |
|             249 |                        2 |                      18 |
|             207 |                        2 |                      20 |
|             208 |                        3 |                      20 |
|             245 |                        3 |                      21 |
|             260 |                        4 |                      19 |
|             261 |                        5 |                      19 |
|             246 |                        6 |                      21 |
|             250 |                        7 |                      18 |
|             247 |                        8 |                      21 |
+-----------------+--------------------------+-------------------------+ 
```

我运行这个查询：

```
SELECT facility_map_listing_id 
FROM facility_map 
WHERE facility_map_facility_id IN(1, 2) 
GROUP BY facility_map_listing_id 
HAVING count(DISTINCT facility_map_facility_id) >= 2 
```

得到这个..

```
+-------------------------+
| facility_map_listing_id |
+-------------------------+
|                      18 |
|                      20 |
+-------------------------+
2 rows in set (0.00 sec) 
```

哪个是对的！- 但谁能解释一下，为什么 GROUP BY 需要在语句中？

如果它不是并且我运行相同的查询而忽略了我得到的 GROUP BY..

```
+-------------------------+
| facility_map_listing_id |
+-------------------------+
|                      18 |
+-------------------------+
1 row in set (0.00 sec) 
```

谁能给我解释一下？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T15:48:19.280

没有 a `group by`，聚合就像`count`在整个集合上工作。所以这个查询返回零或一行：

```
SELECT facility_map_listing_id 
FROM facility_map 
WHERE facility_map_facility_id IN(1, 2)
HAVING count(DISTINCT facility_map_facility_id) >= 2 
```

`having`如果满足条件，它将返回一行，否则返回一个空集。

现在，使用 group by，它评估 的`having`每个值的条件`facility_map_listing_id`。最多可以返回与 的不同值一样多的行`facility_map_listing_id`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-27T15:48:48.357

我认为[这](http://manuals.sybase.com/onlinebooks/group-as/asg1250e/sqlug/@Generic__BookTextView/9481;pt=9316)应该解释一些事情：

> 如果省略 group by，则 where 子句未排除的所有行将作为单个组返回。

所以，基本上，你仍然在使用一个分组……只是整个集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T15:54:58.763

**我们可以**在没有子句的情况下使用 HAVING 子句，`GROUP BY`但`SELECT`列和`HAVING`列应该与聚合函数一起使用：

*   AVG() - 返回平均值
*   COUNT() - 返回行数
*   FIRST() - 返回第一个值
*   LAST() - 返回最后一个值
*   MAX() - 返回最大值
*   MIN() - 返回最小值
*   SUM() - 返回总和

**HAVING**一般与`GROUP BY`子句配合使用，主要用于通过聚合函数对数据进行操作和过滤。*当不使用 GROUP BY 时，HAVING 的行为类似于 WHERE 子句。*

**HAVING** 为子句设置条件`group by`，类似于 where 为 select 子句设置条件的方式。

[看到这个](http://blog.sqlauthority.com/2007/07/04/sql-server-definition-comparison-and-difference-between-having-and-where-clause/) 和[这个](http://www.allinterview.com/showanswers/94544.html)

# objective-c - uibutton，把“目标”和“动作”

> ID：10775208
> 
> 赞同：1
> 
> 时间：2012-05-27T15:43:57.283
> 
> 标签：objective-c, ios

我有以下代码在 UIToolbar (postoInfo) 上添加 UIBarButtonItem 类型的按钮：

```
UIImage *faceImage = [UIImage imageNamed:@"informazioni.png"];
UIButton *face = [UIButton buttonWithType:UIButtonTypeCustom];

[face addTarget:self action:@selector(press:) forControlEvents:UIControlEventTouchUpInside];

face.bounds = CGRectMake( 0, 0, 30, 30 );
[face setImage:faceImage forState:UIControlStateNormal];

buttonOne = [[UIBarButtonItem alloc] initWithCustomView:face];

NSArray *buttons = [NSArray arrayWithObjects: buttonOne, nil];

[postoInfo setItems: buttons animated:YES]; 
```

我会在按下按钮时调用一个方法，我添加了以下行，但不起作用：

```
[face addTarget:self action:@selector(press:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T15:50:17.590

您应该为 UIButton 提供正确的 frame 属性，现在它具有 CGRectZero：

```
face.frame = CGRectMake( 0, 0, 30, 30 ); 
```

[Cocoa：frame 和 bounds 有什么区别？](https://stackoverflow.com/q/1210047/194544)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T16:07:45.920

我首先想到的是您正在为 UIButton 设置操作，但您正在使用 UIButton 的视图初始化 UIBarButtonItem。该操作未保存在视图中。您尝试为 UIBarButtonItem 设置操作。

# objective-c - 亚马逊和facebook之间的Xcode框架冲突

> ID：10775209
> 
> 赞同：1
> 
> 时间：2012-05-27T15:44:01.217
> 
> 标签：objective-c, xcode, facebook, amazon-s3

我与 Facebook sdk 和 amazon sdk 中的重复 sbjson 文件发生冲突。我还在使用 aviary sdk，它要求我将链接器标志设置为 -ObjC -all_load。

亚马逊框架很大，我只需要 s3 上传器类。

解决这些问题的最佳方法是什么？

# php - PHP 定义和回显结果

> ID：10775214
> 
> 赞同：0
> 
> 时间：2012-05-27T15:44:38.850
> 
> 标签：php, mysql

如果我在数据库表中有这个结果，如何定义数据库中的数据`s,d,r,t`？

这是表格中的屏幕

[http://i.imgur.com/9dK7T.png](http://i.imgur.com/9dK7T.png)

如果我只有**s**在数据库中，我可以这样做

```
if($func->data =='s') {echo "This is S";} 
```

我需要定义表中的每个字母并回显结果，但是如何？如果我有不止一封信，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T15:51:02.230

这似乎是你想要的：

```
$letters = explode(',', strtolower($func->data));

if (in_array('s', $letters)) echo 'This is S';
if (in_array('d', $letters)) echo 'This is D';
if (in_array('r', $letters)) echo 'This is R';
if (in_array('t', $letters)) echo 'This is T';
if (in_array('e', $letters)) echo 'This is E'; 
```

# jquery-mobile - 使用 JQuery Mobile 的 PhoneGap 示例

> ID：10775218
> 
> 赞同：1
> 
> 时间：2012-05-27T15:45:03.963
> 
> 标签：jquery-mobile, cordova

我正在尝试查找通过 PhoneGap 托管的 JQuery Mobile 应用程序的示例应用程序。具体来说，我正在寻找一个查询 Twitter 的示例。我以为互联网上会有 500 个这样的。不幸的是，我找不到一个。

我正在寻找一个的原因是因为我在与跨域 Web 服务交互时遇到问题。这似乎是最简单的例子。有人可以帮我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:48:36.367

[这个](https://github.com/rsepulveda2/Twitter-Mobile)怎么样？

当您将应用程序作为 PhoneGap 的一部分运行时，您将不再有任何 x 域问题。该限制不适用于移动应用程序。

来自[PhoneGap 常见问题解答](http://wiki.phonegap.com/w/page/16494770/FAQ)：

> 跨域安全策略不影响PhoneGap 应用程序。由于 html 文件由 webkit 使用 file:// 协议调用，因此安全策略不适用。（在 Android 中，您可以通过编辑 AndroidManifest.xml 将 android.permission.INTERNET 授予您的应用程序）

# c# - 调试和发布构建中的静态字段初始化

> ID：10775219
> 
> 赞同：14
> 
> 时间：2012-05-27T15:45:05.197
> 
> 标签：c#

我发现静态字段初始化可以表现不同。对于以下代码，

```
public class Class1
{
  public static void Main()
  {
    Console.WriteLine("Main");
    Test();
    Console.ReadLine();
  }

  public static void Test(){
    Console.WriteLine("Test");
    Singleton.Instance.DoSomething();
  }
}

public class Singleton
{
  private static Singleton sInstance = new Singleton();

  protected Singleton()
  {
    Console.WriteLine("Singleton Constructor");
  }

  public static Singleton Instance
  {
    get
    {
      return sInstance;
    }
  }

  public void DoSomething(){}
} 
```

在调试版本中，它将打印

```
Main
Test
Singleton Constructor 
```

在发布版本中，它将打印

```
Main
Singleton Constructor
Test 
```

我检查了这两个版本生成的 IL 代码，几乎相同。

我想知道这是怎么发生的？如果是发布构建中的一种 JIT 优化，动机是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T15:58:36.873

**它完全取决于静态初始化程序何时执行的实现**。所以顺序可能不同。但是如果你提供一个静态构造函数，那些静态初始化器总是会更早执行。因此，输出将是一致的。

来自[MSDN](http://msdn.microsoft.com/en-us/library/aa645758.aspx)

> 类的静态字段变量初始化器对应于一系列赋值，它们按照它们在类声明中出现的文本顺序执行。如果类中存在静态构造函数（第 10.11 节），则在执行该静态构造函数之前立即执行静态字段初始值设定项。否则，静态字段初始化器在第一次使用该类的静态字段之前的依赖于实现的时间执行。

在类中添加[静态构造函数](http://msdn.microsoft.com/en-us/library/k9x6w0hc.aspx)`Singleton`

```
static Singleton() { } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T16:18:16.850

我在发布版本中重现了 x86 抖动。这是设计使然，不能保证静态类构造函数运行的确切时刻，唯一的要求是它发生*在*类中的任何其他方法运行之前。因此，如果这样可以产生更高效的代码，则允许优化器重新排列代码。确实如此，它将 cctor 调用一直移回 Main() 方法。优点是它现在有更多机会优化剩余代码。

通常，您希望避免在具有可观察到的副作用的初始化表达式中编写代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-22T01:50:23.140

在[另一个答案](/a/47934827/147511)中，我提供了一个测试程序并讨论了**{ Debug, Release }**、**{ x86, x64 }**和**.NET**主要版本之间的比较。总结结果如下；有关完整详细信息，请查看[链接](/a/47934827/147511)：

> **.NET 2.0/3.5**
> 
> `2.0.50727.8825 x86 Debug`
> `2.0.50727.8825 x86 Debug TouchMe fieldinit`
> `2.0.50727.8825 x86 Release fieldinit`
> `2.0.50727.8825 x86 Release TouchMe fieldinit`
> `2.0.50727.8825 x64 Debug`
> `2.0.50727.8825 x64 Debug TouchMe fieldinit`
> `2.0.50727.8825 x64 Release`
> `2.0.50727.8825 x64 Release TouchMe fieldinit`
> 
> **.NET 4.7.1**
> 
> `4.7.2556.0 x86 Debug`
> `4.7.2556.0 x86 Debug TouchMe fieldinit`
> `4.7.2556.0 x86 Release`
> `4.7.2556.0 x86 Release TouchMe`
> `4.7.2556.0 x64 Debug`
> `4.7.2556.0 x64 Debug TouchMe fieldinit`
> `4.7.2556.0 x64 Release`
> `4.7.2556.0 x64 Release TouchMe`

# mysql - 复杂的mysql注入

> ID：10775220
> 
> 赞同：2
> 
> 时间：2012-05-27T15:45:09.723
> 
> 标签：mysql, sql-injection

我试图向我的客户证明系统对 mysql 注入不安全。我想要一些证据，要么向我显示完整的用户列表（从..中选择 *），要么在系统中注入新的用户/管理员，以便我之后能够登录。

这是我如何构建系统的简化：

PHP登录网站：

```
$user = $_POST["user"];
$pwd = $_POST["pwd"];

$query1 = "INSERT INTO user_log (username, password,ip) VALUES ('$user','$pwd','127.1.1.1')";

$result1 = mysql_query($query1) or die("Query failed: "  . mysql_error());

$query2 = "select * from login where name = '$user' and pass = '$pwd' limit 1";

$result2 = mysql_query($query2) or die("Query failed: "  . mysql_error()); 
```

mysql表是这样的：

```
CREATE TABLE `user_log` (
  `idadmin` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(45) DEFAULT NULL,
  `password` varchar(45) DEFAULT NULL,
  `ip` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`idadmin`)
)

CREATE TABLE `login` (
  `idlogin` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) DEFAULT NULL,
  `pass` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`idlogin`)
) 
```

尽管我可以看到它完全不安全，但我发现它很难注入。

1.  我尝试的第一件事是注入 INSERT 查询，但除了向 user_log 表发送垃圾邮件之外，很难从中获得一些不错的结果。
2.  我尝试创建一个通过第一个 query1 并在 query2 处注入的查询。但由于引用，这非常复杂。

在这种特定情况下进行注入的任何想法或其他类型的技术？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T15:56:52.833

您无需证明您可以查看所有用户记录以证明系统不安全。

如果代码在 下运行`magic_quotes_gpc`，它应该是相当安全的，尽管会`magic_quotes_gpc`引入各种其他问题。

~~如果您没有在 下运行，则无论提供什么密码`magic_quotes_gpc`，您都应该能够使用用户名登录。`' or true; --`~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T16:47:34.740

忘记 SQL 注入。该系统可以被认为是不安全的，仅基于它在登录表和日志表中存储非散列/非加盐密码这一事实。

如果有人要入侵您的数据库，或发现转储部分或全部数据所需的适当 SQL 注入，则黑客将有权访问任何用户曾尝试用于登录网站的所有密码。

想想安全隐患。如果您随机浏览该网站，忘记了您使用的密码，然后尝试*了所有常见的密码变体*，该数据库将保留每一个密码。

发冷。想到有这样的代码就让我不寒而栗。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T16:02:32.110

如果客户使用的是旧版本的 PHP，低于 5.4.0 版，并且启用了 mysql_quotes_gpc，那么这是安全的。

如果您可以通过用户输入运行任何类型的 SQL，那是**不安全**且丑陋的！这不是你是否能弄清楚有效的攻击类型的问题，黑客可以通过许多创造性的方式获得他们想要的东西。

[可以在插入查询上运行基于时间的 SQL 注入](http://technet.microsoft.com/en-us/library/cc512676.aspx)，无论选择查询是否通过都没有关系。

如果 mysql 用户具有权限，SQL 注入可以允许攻击者创建文件。SELECT load_file('/etc/passwd') INTO OUTFILE '/some/path/to/web/root/here.php'

# java - Android初学者：空编辑文本

> ID：10775222
> 
> 赞同：1
> 
> 时间：2012-05-27T15:45:37.417
> 
> 标签：java, android, eclipse, android-layout, android-intent

我正在创建一个将一个数字除以另一个数字的应用程序。当编辑文本为空时，我尝试添加代码以显示对话框，但应用程序强制关闭。这是我的代码。

```
public class KdCalculator extends Activity implements OnClickListener{

    EditText kills;
    EditText deaths;
    TextView text;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.kd_activity);

        Button calculate = (Button)findViewById(R.id.ButtonCalculate);
            calculate.setOnClickListener(this);

        kills = (EditText)findViewById(R.id.EditTextKills);
        deaths = (EditText)findViewById(R.id.EditTextDeaths);

    }

    public void onClick(View paramView)
      { 
          boolean invalid = false;

          String str1 = kills.getText().toString();
          String str2 = deaths.getText().toString();

          if (str1.equals("") || str2.equals(""))
          {
              new AlertDialog.Builder(this)
                .setTitle("No Number")
                .setMessage("Please enter a number for both kills and deaths!")
                .setNeutralButton("Ok", null)
                .show();
              invalid = true;
          }

          double d1 = Double.parseDouble(str2);
          double d2 = Double.parseDouble(str1);

          if ((d1 == 0.0D) || (d2 == 0.0D))
          {
              new AlertDialog.Builder(this)
            .setTitle("Invalid Number")
            .setMessage("Please enter a number different than 0 for both kills and deaths!")
            .setNeutralButton("Ok", null)
            .show();
              invalid = true;
          }
          double d3 = d2 / d1;
          DecimalFormat localDecimalFormat = new DecimalFormat("#.###");
          String str3 = "Your K/D Ratio is : " + localDecimalFormat.format(d3);

          if(!invalid){
          new AlertDialog.Builder(this)
            .setTitle("K/D Ratio")
            .setMessage(str3)
            .setNeutralButton("Ok", null)
            .show();
          }
          invalid = false;
        }

} 
```

logcat 错误是：

```
05-27 11:43:53.327: W/dalvikvm(6090): threadid=1: thread exiting with uncaught exception (group=0x40020b80)
05-27 11:43:53.357: E/AndroidRuntime(6090): FATAL EXCEPTION: main
05-27 11:43:53.357: E/AndroidRuntime(6090): java.lang.NumberFormatException: 
05-27 11:43:53.357: E/AndroidRuntime(6090):     at org.apache.harmony.luni.util.FloatingPointParser.parseDouble(FloatingPointParser.java:267)
05-27 11:43:53.357: E/AndroidRuntime(6090):     at java.lang.Double.parseDouble(Double.java:287)
05-27 11:43:53.357: E/AndroidRuntime(6090):     at com.blackops2.KdCalculator.onClick(KdCalculator.java:53)
05-27 11:43:53.357: E/AndroidRuntime(6090):     at android.view.View.performClick(View.java:2411)
05-27 11:43:53.357: E/AndroidRuntime(6090):     at android.view.View$PerformClick.run(View.java:8819)
05-27 11:43:53.357: E/AndroidRuntime(6090):     at android.os.Handler.handleCallback(Handler.java:587)
05-27 11:43:53.357: E/AndroidRuntime(6090):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-27 11:43:53.357: E/AndroidRuntime(6090):     at android.os.Looper.loop(Looper.java:123)
05-27 11:43:53.357: E/AndroidRuntime(6090):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-27 11:43:53.357: E/AndroidRuntime(6090):     at java.lang.reflect.Method.invokeNative(Native Method)
05-27 11:43:53.357: E/AndroidRuntime(6090):     at java.lang.reflect.Method.invoke(Method.java:521)
05-27 11:43:53.357: E/AndroidRuntime(6090):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-27 11:43:53.357: E/AndroidRuntime(6090):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-27 11:43:53.357: E/AndroidRuntime(6090):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T15:53:45.250

在调用之前尝试记录`str1`&的值；你可以用它来做到这一点。`str2``Double.parseDouble(String)``Log.d(String, String)`

根据堆栈跟踪，其中一个值不能转换为数字。

我通常会做的是将任何数字格式调用放入一个`try...catch`块中 - 这种类型的操作可能会出现许多错误。这可能是避免此代码进一步崩溃的最成功方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T15:56:13.070

即使你`EditText`是空的，你仍然会`Strings`从那些中解析空，`EditText`因为你的代码在你显示之后继续执行`AlertDialog`，而不是你应该从`onClick`方法返回以停止任何计算（当它们`EditText`为空或未填充时）：

```
public void onClick(View paramView) { 
          String str1 = kills.getText().toString();
          String str2 = deaths.getText().toString();

          if (str1.equals("") || str2.equals("")) {
              new AlertDialog.Builder(this)
                .setTitle("No Number")
                .setMessage("Please enter a number for both kills and deaths!")
                .setNeutralButton("Ok", null)
                .show();
                return;   
          }
          double d1 = Double.parseDouble(str2);
          double d2 = Double.parseDouble(str1);
          if ((d1 == 0.0D) || (d2 == 0.0D)) {
              new AlertDialog.Builder(this)
            .setTitle("Invalid Number")
            .setMessage("Please enter a number different than 0 for both kills and deaths!")
            .setNeutralButton("Ok", null)
            .show();
            return;
          }
          double d3 = d2 / d1;
          DecimalFormat localDecimalFormat = new DecimalFormat("#.###");
          String str3 = "Your K/D Ratio is : " + localDecimalFormat.format(d3);

          new AlertDialog.Builder(this)
            .setTitle("K/D Ratio")
            .setMessage(str3)
            .setNeutralButton("Ok", null)
            .show();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T15:56:54.800

尝试这个...

```
DecimalFormat localDecimalFormat = new DecimalFormat("0.000"); 
```

只是提到尝试检查字符串 str1 和 str2，并要小心.. Double 不要给除以零错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T16:00:52.390

我不确定，但试试这个...

```
public class KdCalculator extends Activity implements OnClickListener
{    
    double d1 = 0.0;
    double d2 = 0.0;    
    EditText kills;
    EditText deaths;
    TextView text;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.kd_activity);

        Button calculate = (Button)findViewById(R.id.ButtonCalculate);
            calculate.setOnClickListener(this);

        kills = (EditText)findViewById(R.id.EditTextKills);
        deaths = (EditText)findViewById(R.id.EditTextDeaths);

    }

    public void onClick(View paramView)
      { 
          boolean invalid = false;

          String str1 = kills.getText().toString();
          String str2 = deaths.getText().toString();

          if (str1.equals("") || str2.equals(""))
          {
              new AlertDialog.Builder(this)
                .setTitle("No Number")
                .setMessage("Please enter a number for both kills and deaths!")
                .setNeutralButton("Ok", null)
                .show();
              invalid = true;
          }

          d1 = Double.parseDouble(str2);
          d2 = Double.parseDouble(str1);

          if ((d1 == 0.0D) || (d2 == 0.0D))
          {
              new AlertDialog.Builder(this)
            .setTitle("Invalid Number")
            .setMessage("Please enter a number different than 0 for both kills and eaths!")
            .setNeutralButton("Ok", null)
            .show();
              invalid = true;
          }
          double d3 = d2 / d1;
          DecimalFormat localDecimalFormat = new DecimalFormat("#.###");
          String str3 = "Your K/D Ratio is : " + localDecimalFormat.format(d3);

          if(!invalid){
          new AlertDialog.Builder(this)
            .setTitle("K/D Ratio")
            .setMessage(str3)
            .setNeutralButton("Ok", null)
            .show();
          }
          invalid = false;
        }
} 
```

并确保您在计算器中的输入有类似 2.0 或 2.2 等（双格式）的内容，不要使用逗号...

# c# - 如何获取我当前插入访问数据库的东西的 ID

> ID：10775233
> 
> 赞同：2
> 
> 时间：2012-05-27T15:46:26.790
> 
> 标签：c#, sql, ms-access

我为其他数据库找到了这个问题的许多答案，但没有找到 Microsoft 访问的任何答案。

我有一个包含以下列的表：ID ABC ID 是自动编号，我如何获取我刚刚插入的行的 ID。

顺便说一句：我正在使用 C#

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T15:51:10.043

请参阅此处的[MSDN 文章](http://msdn.microsoft.com/en-us/library/ks9f57t0.aspx)。在 MS Access 中，您需要`SELECT @@IDENTITY`在插入记录的语句范围内。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T15:56:25.707

您可以使用 oldes 方法获得它。插入您的记录并选择最后插入的 id：

```
INSERT INTO table(column1, column2, ...) VALUES(value1, value2)

SELECT TOP 1 id FROM table ORDER BY id DESC 
```

当然，它不是最好的，但它确实有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-07T04:54:50.740

```
//C#
string query = "Insert Into Categories (CategoryName) Values (?)";
string query2 = "Select @@Identity";
int ID;
string connect = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|Northwind.mdb";
using (OleDbConnection conn = new OleDbConnection(connect))
{
  using (OleDbCommand cmd = new OleDbCommand(query, conn))
  {
    cmd.Parameters.AddWithValue("", Category.Text);
    conn.Open();
    cmd.ExecuteNonQuery();
    cmd.CommandText = query2;
    ID = (int)cmd.ExecuteScalar();
  }
} 
```

# excel - Excel-VBA：无法插入换行符

> ID：10775235
> 
> 赞同：4
> 
> 时间：2012-05-27T15:46:39.060
> 
> 标签：excel, vba, newline

我需要在单元格中插入行，但我无法插入换行符。

例如 ：

> 第1行
> 
> 线2
> 
> 第 3 行

使用 VBA 代码：

```
 Ws.Cells(i, 2) = line1 & line2 & line3 
```

我得到：

> 第1行 第2行 第3行

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-27T15:48:33.463

这是你正在尝试的吗？

```
Ws.Cells(i, 2).Value = "line1" & vbnewline & "line2" & vbnewline & "line3" 
```

或者

```
Ws.Cells(i, 2).Value = "line1" & vbCrLf & "line2" & vbCrLf & "line3" 
```

**编辑**：插入我的评论中提到的引号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T08:04:43.073

我已经测试了一些组合，结果如下：

```
cell(a,b) = line1 & vbCrLf & line2 
```

结果：
第 1 行**
第 2 行

```
cell(a,b) = line1 & vbCr & line2 
```

结果：
line1line2

```
cells(a,b) = line1 & vbLf & line2 
```

结果：
第1行第
2行

In the above results the * denotes a blank space (I don't know why), so the vbCrLf is not recommended when you want to center the cell content horizontally. My preference goes for vbLf.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T15:48:45.243

VBA 中的换行符是`vbCrLf`，您可以将它们与字符串连接起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T15:49:34.957

```
Ws.Cells(i, 2) = line1 & line2 & Chr(10) & line3 
```

[按照这个答案。](https://stackoverflow.com/questions/9900916/insert-line-break-in-wrapped-cell-through-vba-code)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-28T02:17:14.053

仅供参考，您可以通过使用更易于键入的变量名称来防止编码拼写错误。

```
bx = vbCrLf

textstring = "Hello everybody!" & bx & "This is my second line!" 
```

# jquery - 访问表单输入值的最佳方式

> ID：10775246
> 
> 赞同：3
> 
> 时间：2012-05-27T15:48:27.127
> 
> 标签：jquery

我有以下两个变量。我将数据变量发送到服务器，并在返回时想要访问各种原始值。

我可以对数据或原始变量执行某种 eq(1).val() 方法，但随后需要确保我以正确的顺序访问它们，这可能会导致未来的维护问题。或者我可以使用名称选择器从原始 DOM 中获取值，但似乎我做了两次工作。或者我可以在原始表单中添加 ID 和名称，但这似乎是一种浪费。

理想情况下，我可以将表单的名称/值转换为某种对象，但与 serializeArray 不同的是，它不会创建数组，而是将值定向到名称。例如，如果我的表单有`<input name="foo" value="bar">`，我将能够以 newObject.foo 的形式访问该值。

关于最好的方法有什么建议吗？

```
var raw=$("#form_id").find('input,select');
var data=raw.serializeArray(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:02:12.910

```
var formVals = [];
$('select, input').each(function(i, v){
   formVals[$(this).attr('name')] = $(this).val();
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T16:08:25.997

您可以通过直接访问表单来执行此操作：

```
var form = $("#form_id")[0];
console.log( form.foo.value ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T15:55:51.320

我认为 jQuery 允许您选择每个输入（甚至选择、单选和复选框，它们实际上并不是一次输入）来使用 serializeArray() 构建该数组：

```
var object = $(":input").serializeArray(); 
```

从这里的 jQuery 文档：[http](http://api.jquery.com/serializeArray/) ://api.jquery.com/serializeArray/ 当然，将 $(":inputs") 限制为 tragetted 表单，特别是如果您在文档中提供了多个表单。

这应该让你的对象看起来像：

[ {名称：“foo”，值：“bar”}，{ ... }]

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T15:59:56.267

如果我正确理解您的问题，我会序列化输入和表单字段：

```
var result = $('form').serializeArray(); 
```

然后获取单个对象：

```
result.ObjectName; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T16:15:22.610

```
var raw=$("#form_id").find('input,select'); 
```

这样更有效率。这已在[此处的 Jsperf 性能测试](http://jsperf.com/jquery-1-4-2-vs-1-6-2-comparisons)中得到证明， 它表明上述方法在几乎所有浏览器中都优于其他测试用例。尽管`var item = $(".buttonRef");`在某些情况下直接获取方法的表现要好。注意：虽然在大多数情况下不建议这样做，但 ID 的访问速度比类更快。当谈到访问表单输入值时的时间效率时，您可能会考虑 id。

[注释参考](http://www.slideshare.net/AddyOsmani/jquery-proven-performance-tips-tricks)

我不知道你的问题是否正确。

# c++ - 这是未定义的行为吗？

> ID：10775247
> 
> 赞同：0
> 
> 时间：2012-05-27T15:48:33.403
> 
> 标签：c++, standards

```
class A
{
public:
    int i;
    ~A()
    {   
        std::cout << "~A" << std::endl;
    }   
};

class B: public A
{
public:
    int k;
    ~B()
    {   
        std::cout << "~B" << std::endl;
    }   
};

int main(int argc, char* argv[])
{
    A* p = new B();
    delete p;
    return 0;
} 
```

尽管基本析构函数不是虚拟的，但上述内容不会导致内存泄漏，我知道原因。

但这是未定义的行为吗？

如果派生类不指向其他动态数据，即使基本析构函数是非虚拟的，也不会出现内存泄漏？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T15:49:31.983

**是的**。通过指向没有析构函数`class`的基类的指针删除派生对象是教科书 UB。`virtual`

**5.3.5/3：**

> 在第一种选择（删除对象）中，如果操作数的静态类型与其动态类型不同，则静态类型应为操作数动态类型的基类，并且静态类型应具有虚拟析构函数或行为未定义. 在第二种选择（删除数组）中，如果要删除的对象的动态类型与其静态类型不同，则行为未定义。73）

因为它是未定义的行为，所以猜测代码是否会泄漏并没有任何意义。只是尝试修复代码而不是预测结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T15:51:00.430

是的，因为静态类型（这里是`A`）不同于动态类型（`B`在你的例子中）并且没有`virtual`析构函数，它是一个 UB。

5.3.5/2（C++11 中的 5.3.5/3）：

> 在第一种选择（删除对象）中，如果操作数的静态类型与其动态类型不同，则静态类型应为操作数动态类型的基类，并且静态类型应具有虚拟析构函数或行为未定义.

# java - 如何使用 mockito 测试 REST 服务？

> ID：10775254
> 
> 赞同：26
> 
> 时间：2012-05-27T15:48:57.643
> 
> 标签：java, unit-testing, rest, mockito

我是 Java 单元测试的新手，听说 Mockito 框架非常适合测试。

我已经开发了一个 REST 服务器（CRUD 方法），现在我想测试它，但我不知道怎么做？

更我不知道这个测试程序应该如何开始。我的服务器应该在 localhost 上运行，然后在该 url 上进行调用（例如 localhost:8888）？

这是我到目前为止所尝试的，但我很确定这不是正确的方法。

```
 @Test
    public void testInitialize() {
        RESTfulGeneric rest = mock(RESTfulGeneric.class);

        ResponseBuilder builder = Response.status(Response.Status.OK);

        builder = Response.status(Response.Status.OK).entity(
                "Your schema was succesfully created!");

        when(rest.initialize(DatabaseSchema)).thenReturn(builder.build());

        String result = rest.initialize(DatabaseSchema).getEntity().toString();

        System.out.println("Here: " + result);

        assertEquals("Your schema was succesfully created!", result);

    } 
```

这是`initialize`方法的代码。

```
 @POST
    @Produces(MediaType.APPLICATION_JSON)
    @Path("/initialize")
    public Response initialize(String DatabaseSchema) {

        /** Set the LogLevel to Info, severe, warning and info will be written */
        LOGGER.setLevel(Level.INFO);

        ResponseBuilder builder = Response.status(Response.Status.OK);

        LOGGER.info("POST/initialize - Initialize the " + user.getUserEmail()
                + " namespace with a database schema.");

        /** Get a handle on the datastore itself */
        DatastoreService datastore = DatastoreServiceFactory
                .getDatastoreService();

        datastore.put(dbSchema);

        builder = Response.status(Response.Status.OK).entity(
                "Your schema was succesfully created!");
        /** Send response */
        return builder.build();
    } 
```

在这个测试用例中，我想将一个 Json 字符串发送到服务器（POST）。如果一切顺利，那么服务器应该回复“您的架构已成功创建！”。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-27T16:50:01.230

好的。因此，该方法的约定如下：将输入字符串解析为 JSON，`BAD_REQUEST`如果无效则返回。如果有效，则在 中创建一个`datastore`具有各种属性（你知道它们）的实体，然后发回`OK`.

并且您需要验证该合同是否由该方法履行。

Mockito 在这里有什么帮助？好吧，如果您在没有 Mockito 的情况下测试此方法，则需要一个 real `DataStoreService`，并且您需要验证该实体已在此 real 中正确创建`DataStoreService`。这就是你的测试不再是单元测试的地方，这也是测试太复杂、太长、太难运行的地方，因为它需要一个复杂的环境。

Mockito 可以通过模拟对 的依赖来提供帮助`DataStoreService`：您可以创建一个模拟，并在您在测试中`DataStoreService`调用方法时验证该模拟确实是使用适当的实体参数调用的。`initialize()`

为此，您需要能够将 注入`DataStoreService`到您的测试对象中。它可以像通过以下方式重构对象一样简单：

```
public class MyRestService {
    private DataStoreService dataStoreService;

    // constructor used on the server
    public MyRestService() {
        this.dataStoreService = DatastoreServiceFactory.getDatastoreService();
    }

    // constructor used by the unit tests
    public MyRestService(DataStoreService dataStoreService) {
        this.dataStoreService = dataStoreService;
    }

    public Response initialize(String DatabaseSchema) {
         ...
         // use this.dataStoreService instead of datastore
    }
} 
```

现在在您的测试方法中，您可以执行以下操作：

```
@Test
public void testInitializeWithGoodInput() {
    DataStoreService mockDataStoreService = mock(DataStoreService.class);
    MyRestService service = new MyRestService(mockDataStoreService);
    String goodInput = "...";
    Response response = service.initialize(goodInput);
    assertEquals(Response.Status.OK, response.getStatus());

    ArgumentCaptor<Entity> argument = ArgumentCaptor.forClass(Entity.class);
    verify(mock).put(argument.capture());
    assertEquals("the correct kind", argument.getValue().getKind());
    // ... other assertions
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T15:58:08.293

您所说的听起来更像是[集成测试](http://en.wikipedia.org/wiki/Integration_testing)和 Mockito（或任何其他模拟框架）对您没有多大用处。

如果您想对您编写的代码进行单元测试，Mockito 无疑是一个有用的工具。

我建议您阅读更多关于模拟/单元测试以及应该在哪些情况下使用它的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T16:03:44.930

Mockito（通常）用于测试*部分*代码；例如，如果您正在使用 REST 服务，但不想进行全栈测试，您可以模拟连接到 REST 服务的服务，从而允许您准确、一致地测试特定行为。

要在不访问数据库的情况下测试 REST 服务的内部部分（例如，特定的服务方法），您可以模拟 DB 子系统，只允许测试服务内部，而不涉及数据库。此测试属于 REST 服务模块，而不是客户端。

要测试 REST 服务本身，您将使用一个实际的客户端库，创建一个全栈集成测试。Mockito 可以在这里用来模拟与 REST 服务消费无关的客户端部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-01T10:45:55.007

最好的方法是使用wiremock 添加以下依赖项 com.github.tomakehurst wiremock 2.4.1 org.igniterealtime.smack smack-core 4.0.6

如下图定义和使用wiremock

```
@Rule
public WireMockRule wireMockRule = new WireMockRule(8089);

String response ="Hello world";
StubMapping responseValid = stubFor(get(urlEqualTo(url)).withHeader("Content-Type", equalTo("application/json"))
        .willReturn(aResponse().withStatus(200)
                .withHeader("Content-Type", "application/json").withBody(response))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T06:42:07.247

我同意这不是单元测试而是集成测试，无论如何你宁愿看看球衣和嵌入式灰熊服务器测试。总结一下，这段代码在 localhost:8888 启动了 grizzly 服务器（也可以启动数据库），然后设置客户端的 jersey 客户端并发送一个 POST 请求，该请求应该被测试。这是一个集成，因为您正在测试服务器和数据库，但是您可以使用 mockito 来模拟数据库，但这取决于您的服务器和数据库的绑定程度。

（使用 jersey 1.11 和 grizzly 2.2 进行测试）

```
 @BeforeClass
    public static void setUpClass() throws Exception {
        // starts grizzly
        Starter.start_grizzly(true);
        Thread.sleep(4000);
    }

    @Before
    public void setUp() throws Exception {
        client = new Client();
        webResource = client.resource("http://localhost:8888");
    }   

    @Test
    public void testPostSchemaDatabase() throws Exception {
        {
            String DatabaseSchema = "{ database_schema : {...}}";
            logger.info("REST client configured to send: "  + DatabaseSchema);
            ClientResponse response =  
                    webResource
                             .path("/initialize")
                             .type("application/json")
                             .post(ClientResponse.class, DatabaseSchema);
            //wait for the server to process
            Thread.sleep(2000);
            assertEquals(response.getStatus(), 204);    
            //test the response
        }       
    }

    @After
    public void after() throws JSONException
    {
            //probably you want to delete the schema at database and stop the server

} 
```

# ios - IOS：停止单元格在 UITableView 中被错误地重用

> ID：10775256
> 
> 赞同：2
> 
> 时间：2012-05-27T15:49:03.307
> 
> 标签：ios, uitableview, uibutton, switch-statement, cells

我有一个基本的 UITableView 有四个部分。我用一个 Switch 语句控制每个部分的内容。

我以编程方式创建了一个按钮，它应该出现在前三个部分的行中，但不应该出现在第四个部分中。但是，该按钮随机出现在第四部分的行中。

我认为这是因为正在重用一个单元格，但是当我使用 Switch 语句创建每个部分的行时，我看不到这是如何发生的。任何想法表示赞赏。

我正在使用这样配置的自定义单元格：`

```
static NSString *CustomCellIdentifier = @"DashboardCell";

DashboardCell *cell = (DashboardCell *)[tableView dequeueReusableCellWithIdentifier: CustomCellIdentifier];

if (cell == nil) { NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"DashboardCell"
                                                                owner:self options:nil];
    for (id oneObject in nib) if ([oneObject isKindOfClass:[DashboardCell class]])
        cell = (DashboardCell *)oneObject;
}

// Configure the cell.` 
```

创建此按钮的代码是：`

```
 button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(200, 11, 50, 50);        
        UIImage *iConnect = [UIImage imageNamed:@"connect.png"];
        [button setImage:iConnect forState:UIControlStateNormal];
        [button addTarget:self action:@selector(buttonSelected:) forControlEvents:UIControlEventTouchUpInside];
        [cell addSubview:button];` 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-27T17:12:49.570

您需要为每种类型的内容使用不同的重用标识符。所以在这里你有两种类型的内容——有 a 的`UIButton`单元格和没有的单元格。

使用方法`indexPath`的`tableView:cellForRowAtIndexPath:`选择@"CellWithButton" 或@"CellWithoutButton" 的重用标识符。

您的代码中实际发生的情况是，所有单元都被赋予了相同的重用标识符，这意味着它们都被放入同一个对象池中。这意味着当您使用它时`[tableView dequeueReusableCellWithIdentifier: CustomCellIdentifier];`，您正在从这个池中检索一个单元格（其中可能包含没有的`UIButton`单元格和有的单元格）。因此，dequeue 方法可以随机返回一个已经`UIButton`添加了一个单元格的单元格。如果您使用两个重用标识符，`UITableView`则将设置两个对象池，并从每个对象池中正确存放和检索适当的单元格。

或者，您可以使用一个重用池，并在`UIButton`每次使用 dequeue 方法检索一个时检查单元格。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-27T16:10:19.443

在您的 DashboardCell 中，创建一个属性`@property (nonatomic, assign) BOOL buttonEnabled`。然后在你的`awakeFromNib`，总是创建按钮并设置`button.hidden = YES`。覆盖你的属性的设置器

```
- (void)setButtonEnabled:(BOOL)enabled {
   buttonEnabled = enabled;
   button.hidden = !enabled;
} 
```

最后覆盖`prepareForReuse`

```
- (void)prepareForReuse {
   [super prepareForReuse];
   self.buttonEnabled = NO;
} 
```

现在您可以在方法 cellForRowAtIndexPath 的配置部分中启用/禁用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T15:59:18.523

您可以根据部分使用两种不同的单元格标识符。否则，您需要查看返回的单元格中是否存在按钮，`dequeueReusableCellWithIdentifier:`并在必要时添加或删除现有按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T17:43:46.323

如果您要重用这些单元格，并且在显示或隐藏每个单元格的按钮背后有一些简单的逻辑，我建议您在 Interface Builder 中创建按钮并将其作为插座连接到您的 UITableViewDelegate。

然后，我将为单元创建一个设置方法，您可以在任何时间运行任意次数而不会破坏它：

```
-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
{
    static NSString *CustomCellIdentifier = @"DashboardCell";

    DashboardCell *cell = (DashboardCell *)[tableView dequeueReusableCellWithIdentifier: CustomCellIdentifier];

    if (cell == nil) { NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"DashboardCell"
                                                                owner:self options:nil];
        for (id oneObject in nib) if ([oneObject isKindOfClass:[DashboardCell class]])
            cell = (DashboardCell *)oneObject;
    }

    // Configure the cell.
    [cell setupWithSomeConfigOptions:someConfigOptions]

    return cell;
} 
```

在您的单元子类中，您将拥有 method `-(void)setupWithSomeOptions:(SomeOptions)someOptions`，它类似于：

```
-(void)setupWithSomeOptions:(SomeOptions)someOptions
{
    // some setup code

    self.myButtonOutlet.hidden = someOptions.somePropertyToCheckIfButtonShouldBeHidden;

    // some more setup code
} 
```

# php - 根据最大日期过滤结果

> ID：10775258
> 
> 赞同：1
> 
> 时间：2012-05-27T15:49:26.053
> 
> 标签：php, mysql, sql

以下是我的 sql 查询，我在其中尝试根据日期（大于）差异过滤结果。SQL 函数“Date(FROM_UNIXTIME(i_last_updated))”成功返回日期，但以下查询未根据 where 子句检查过滤结果。请让我知道我的 sql 查询是否有问题，我该如何纠正。谢谢

注意：“我通过使用简单的 if/else 成功地做到了，但我想知道是否有任何可能的方法来使用 sql 查询来做到这一点”

```
$d= "2012-12-25"

$sql2 = "SELECT attendees FROM event_attendees where Date(FROM_UNIXTIME(i_last_updated)) > $d"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:55:05.970

你错过了`'`围绕日期变量：

```
$sql2 = "SELECT attendees FROM event_attendees where Date(FROM_UNIXTIME(i_last_updated)) > '$d'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T15:53:17.287

查找 MySQL`datediff`函数，该函数将允许您比较`FROM_UNIXTIME()`with的结果`$d`。测试结果的符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T16:02:32.237

您可以使用 MySQL 的[DATEDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)函数来查找两个日期之间的差异。

或者

然而，对我来说，似乎与其转换`i_last_updated`为每一行，不如转换`$d`为 unix 时间戳。你可以使用 MySQL 的[UNIX_TIMESTAMP](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)函数来做到这一点。

# c++ - QML 中 ListView 的问题

> ID：10775264
> 
> 赞同：2
> 
> 时间：2012-05-27T15:50:27.580
> 
> 标签：c++, qt, qml

我正在尝试使用 QML 创建条形图。我将 ListView 与用 C++ 编写的委托和模型一起使用。但是有这样的问题：QML 从模型中只显示 1 个项目。通常是第一个项目，没有别的。这是代码

模型：

```
#ifndef TREEMODEL_H
#define TREEMODEL_H

#include <QAbstractListModel>
#include <QDeclarativeContext>
#include <QDeclarativeView>
#include <QDeclarativeEngine>
#include <QDeclarativeComponent>
#include <QDebug>
#include <QDate>
#include <QStandardItemModel>
#include "../../Data/Entyties/transaction.h"
class GraphicsModelItem;
class GraphicsModel : public QAbstractListModel
{
    Q_OBJECT
public:
    explicit GraphicsModel(QDeclarativeView *view, QObject *parent=0);
    QVariant data(const QModelIndex &index, int role = Qt::DisplayRole) const;
    int rowCount(const QModelIndex &parent = QModelIndex()) const;

    QList<GraphicsModelItem *> items;
    int amount_length;
    int amount_max;
    int date_height;
    Account *current_acc;
    QMap<QDate,GraphicsModelItem*> *map;
    QDeclarativeView *view;
public slots:
    void ItemsFromTransactions(QList<Transaction*> *l, Account *acc);
private:
    Q_DISABLE_COPY(GraphicsModel)

    enum ListMenuItemRoles
    {
        IncomeRole = 10,
        OutcomeRole = 20,
        CountRole = 30,
        DateRole = 40,
        DayCountRole = 50
    };
};
#endif // TREEMODEL_H

#include "GraphicsModel.h"

class GraphicsModelItem
{
public:
    GraphicsModelItem(int income, int outcome, int number, QDate date)
    {
        this->income = income;
        this->outcome = outcome;
        this->count = number;
        this->date = date;
    }
    int income;
    int outcome;
    int count;
    QDate date;
};

GraphicsModel::GraphicsModel(QDeclarativeView *view, QObject *parent) :
    QAbstractListModel(parent)
{
    QHash<int, QByteArray> roles = roleNames();
    roles.insert(IncomeRole, QByteArray("income"));
    roles.insert(OutcomeRole, QByteArray("outcome"));
    roles.insert(CountRole, QByteArray("count"));
    roles.insert(DateRole, QByteArray("date"));
    roles.insert(DayCountRole, QByteArray("dayCount"));
    setRoleNames(roles);
    amount_max = 0;
    amount_length = 1;
    this->view = view;
    this->view->setSource(QUrl("qrc:/QML/GraphView"));
    this->view->rootContext()->setContextProperty("GraphModel",this);
    this->view->rootContext()->setContextProperty("amount_length", amount_length);
    this->view->rootContext()->setContextProperty("amount_max", amount_max);
    this->view->setResizeMode(QDeclarativeView::SizeRootObjectToView);
    /*this->view->setCacheMode(QGraphicsView::CacheBackground);
    this->view->setViewportUpdateMode(QGraphicsView::SmartViewportUpdate);
    this->view->setOptimizationFlags(QGraphicsView::DontSavePainterState|QGraphicsView::DontAdjustForAntialiasing);
*/}
void GraphicsModel::ItemsFromTransactions(QList<Transaction*> *l,Account *acc)
{
    this->current_acc = acc;
    amount_max = 0;
    QMap<QDate,GraphicsModelItem*> map;

    for (int i=0; i<l->size();i++)
    {
        Transaction* tr = l->at(i);
        if (map.contains(l->at(i)->created_at().date()))
        {
            GraphicsModelItem* item = map.value(tr->created_at().date()) ;
            if (tr->acc_from()==current_acc)
                item->outcome+=tr->amount_from();
            else
                item->income+=tr->amount_to();
        }else
        {
            GraphicsModelItem* item ;
            if (tr->acc_from()==current_acc)
                item = new GraphicsModelItem(0,tr->amount_from(),map.size(),tr->created_at().date());
            else
                item = new GraphicsModelItem(tr->amount_to(),0,map.size(),tr->created_at().date());
            map.insert(tr->created_at().date(),item);
        }
    }

    this->items.clear();
    QList<GraphicsModelItem*> ll = map.values();
    for (int i=0;i<ll.length();i++)
    {
        if (ll.at(i)->income>amount_max)
            amount_max = ll.at(i)->income;

        if (ll.at(i)->outcome>amount_max)
            amount_max = ll.at(i)->outcome;

        this->items.push_back(ll.at(i));
    }

    qDebug() <<"size of elements " << items.size();
    if (items.size()>0)
    {
        amount_length = QString().setNum(amount_max).length()+1;
        this->view->rootContext()->setContextProperty("GraphModel",this);
        this->view->rootContext()->setContextProperty("amount_length", amount_length);
        this->view->rootContext()->setContextProperty("amount_max", amount_max);
        this->reset();
    }
}

QVariant GraphicsModel::data(const QModelIndex &index, int role) const
{
    if (!index.isValid())
        return QVariant();
    if (index.row() > (items.size()-1) )
        return QVariant();
    GraphicsModelItem *item = items.at(index.row());
    qDebug()<< " items row = "<< index.row();
    switch (role)
    {
        case Qt::UserRole:
        {
            case IncomeRole:
                return QVariant::fromValue(item->income);
            case OutcomeRole:
                return QVariant::fromValue(item->outcome);
            case CountRole:
            qDebug()<< " items size = "<< items.size();
            qDebug()<< " item count = " <<item->count;
                return QVariant::fromValue(index.row());
            case DateRole:
                return QVariant::fromValue(item->date.toString("dd.MM"));
            case DayCountRole:
                return QVariant::fromValue(items.size());
        }
    }
    return QVariant();
}

int GraphicsModel::rowCount(const QModelIndex &parent) const
{
    Q_UNUSED(parent)
    return items.size();
} 
```

QML 的一部分，负责显示项目

```
ListView
        {
            id: graphicView
            delegate: dayActivity
            model: GraphModel

            Rectangle {
                id: yLine
                width: 1
                height: myGraphic.height-mainRect.adaptFontSize()*2
                x: mainRect.adaptFontSize()*amount_length/1.5
                color: "black"
            }
            Rectangle {
                id: xLine
                x: yLine.x
                height: 1
                width: myGraphic.width
                y: yLine.height;
                color: "black"
            }
}
            Component {
                    id: dayActivity
                    Item {

                        Item {
                            visible: false
                            id: levelMarginElement
                            x:0
                            y:0
                            height:1
                            width:10*count //count*((myGraphic.width-yLine.x)/100)+5 + yLine.x
                        }
                        Rectangle
                        {

                            id: incomeRect
                            radius: 10
                            height: (xLine.y-myGraphic.height*0.03)/amount_max * income
                            x:levelMarginElement.width
                            y:xLine.y-height+2
                            width:(myGraphic.width-yLine.x)*0.9/(dayCount*2)

                            color: "red"
                        }

                        Rectangle
                        {
                            id: outcomeRect
                            radius: 10
                            height: (xLine.y-myGraphic.height*0.03)/amount_max * outcome
                            x:levelMarginElement.width+incomeRect.width-1
                            y: xLine.y-height+2
                            width:(myGraphic.width-yLine.x)*0.9/(dayCount*2)

                            color: "blue"
                        }
                        Text
                        {
                            id:dateText
                            x:outcomeRect.x-mainRect.adaptFontSize()
                            y:xLine.y+2
                            text:date
                            font.pixelSize: mainRect.adaptFontSize()+1
                        }
                    }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:40:55.520

您尚未指定代表的身高。

# jquery-ui - 提交表单时如何操作要忽略的表单/输入

> ID：10775276
> 
> 赞同：6
> 
> 时间：2012-05-27T15:52:49.853
> 
> 标签：jquery-ui, jquery, jquery-selectors, expressionengine

我正在使用 ExpressionEngine 和 SafeCracker 以及 Ajax（插件：jquery.form.js - [http://jquery.malsup.com/form/](http://jquery.malsup.com/form/)）。

据我所知，SafeCracker 一次只允许更新一个条目。但是，UI / UX 需要显示一个列表。我已经通过按需输入表单证明了一个条目。也就是说，单击每个条目旁边的特定编辑链接，jquery 的片段会创建一个表单，同时显示一个提交按钮。单击提交，该单个条目将更新。在单击更新链接之前输入不存在

如果可能的话，我更愿意做的是在页面被重新渲染时创建每个条目的非表单和表单版本，并使用某种切换来显示一个或另一个。再次，可行。然后，当我单击编辑链接时，我将向输入添加必要的属性，以便读取条目的表单元素，但其他条目的其他（显示：无）元素将被忽略。我在想（大声），如果我添加 attr("name", some-value) 会起作用。也就是说，没有名称的输入将被忽略。

是的，我可以测试这个，我会的。但是，即使它有效，我也不确定这是否是最佳实践和/或是否有更理想的方式来实现我的目标。我在这里寻找验证和/或额外的专业知识和输入。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T16:05:56.960

只需将`disabled`属性设置为输入，它们将从***表单提交***中排除，无论输入字段是`hidden`或`visible`。不同的 jQuery 方法，喜欢`submit()`并`serialize()`遵循 HTML 4 规范，并排除表单的所有禁用控件。所以一种方法是设置

```
$('your_input').prop('disabled', true); 
```

或者 ，

```
$('your_input').attr('disabled', 'disabled'); 
```

**检查以下链接：**

[http://www.w3.org/TR/html401/interact/forms.html#successful-controls](http://www.w3.org/TR/html401/interact/forms.html#successful-controls)

此外，您可以使用 general`button`而不是 a `submit`，因此您可以在其上处理 click 事件，并且在该事件中您可以对值进行排除、验证、操作以及您喜欢的任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T16:02:35.793

您可以`disabled`在服务器端放置属性或通过 jQuery 设置属性：

```
$(".hidden input").prop("disabled", true); 
```

# mediawiki - 在 Mediawiki 中，我的更改实际存储在哪里

> ID：10775278
> 
> 赞同：0
> 
> 时间：2012-05-27T15:53:08.557
> 
> 标签：mediawiki

当我实际在 wiki 中写作时，更改实际存储在哪里？

我已经搜索了我实际编写的关键字的源代码，但我找不到它，这显然意味着它被存储在无法直接搜索的地方。

我已经对其进行了更改，即在其中写入，但 sourcetree 似乎没有识别它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T17:15:19.070

你是说网站的内容吗？它们存储在由代码读取和写入的数据库文件中。

将用户提交的数据与可执行代码混合在一起，即使不是完全危险，也是非常难以维护的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:55:30.527

它们存储在称为页面（或类似的东西）的数据库表中

# android - 使用反馈突出显示自定义 android 视图“可点击”

> ID：10775294
> 
> 赞同：0
> 
> 时间：2012-05-27T15:56:10.950
> 
> 标签：android, user-interface, views, highlight

我正在使用从水平滚动视图中的 XML 布局扩展的自定义视图作为一种水平图像列表，但我不确定如何让它们显示为可点击/可点击（即点击时突出显示）或如何捕获这些事件。我想我已经尝试过 setOnClickHandler 但它没有工作。我也试图让一个简单的 TextView 来做同样的事情。我也尝试过设置 android:clickable="true" 但这也没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:00:43.983

要处理视觉反馈，请使用[xml Selector](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)，并将其设置为视图的背景。

要处理点击事件，请使用

```
mView.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        //your code here
    }
}); 
```

# c++ - Xonix 游戏：检测正确的区域

> ID：10775297
> 
> 赞同：2
> 
> 时间：2012-05-27T15:56:32.103
> 
> 标签：c++, sfml

我正在使用 SFML（图形库）开发 Xonix 游戏（如 Volfiex）。问题是当您剪切特定区域时，屏幕会分成两个子区域。现在我需要检测 Boss 在哪里，并关闭 OTHER 区域。

我现在的解决方案是使用矩阵作为游戏板，并使用 FloodFill 确定区域。它正在工作，但我不喜欢玩家如何移动，因为它是一个矩阵，他不能在单元格之间停下来。

也许你有更好的主意？？（没有矩阵）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:39:21.630

看起来非常像[多边形](http://en.wikipedia.org/wiki/Point_in_polygon)问题中的点。我想即使您正在绘制曲线，您仍然可以将它们表示为多边形并测试射线段的交点。

# perl - Perl 搜索只显示最后一个结果

> ID：10775303
> 
> 赞同：1
> 
> 时间：2012-05-27T15:57:37.633
> 
> 标签：perl, search

我有两个数组，一个带有搜索词，另一个是从文件中获取的多行。我有一个嵌套的 foreach 语句并且正在搜索所有组合，但只有最后一个匹配显示，即使我知道还有很多其他匹配！我尝试了许多不同版本的代码，但这是我的最后一个：

```
open (MYFILE, 'searchTerms.txt');
open (MYFILE2, 'fileToSearchIn.xml');

@searchTerms = <MYFILE>;
@xml = <MYFILE2>;

close(MYFILE2);
close(MYFILE);
$results = "";

foreach $searchIn (@xml)
{
    foreach $searchFor (@searchTerms)
    {
        #print "searching for $searchFor in: $searchIn\n";
        if ($searchIn =~ m/$searchFor/)
        {
            $temp = "found in $searchIn \n while searching for: $searchFor ";
            $results = $results.$temp."\n";
            $temp = "";
        }
    }
}

print $results; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T16:13:55.103

`chomp`删除换行符的输入：

```
open (MYFILE, 'searchTerms.txt');
open (MYFILE2, 'fileToSearchIn.xml');

@searchTerms = <MYFILE>;
@xml = <MYFILE2>;

close(MYFILE2);
close(MYFILE);
$results = "";

foreach $searchIn (@xml)
{
    chomp($searchIn);
    foreach $searchFor (@searchTerms)
    {
        chomp($searchFor);
        #print "searching for $searchFor in: $searchIn\n";
        if ($searchIn =~ m/$searchFor/)
        {
            $temp = "found in $searchIn \n while searching for: $searchFor ";
            $results = $results.$temp."\n";
            $temp = "";
        }
    }
}

print $results; 
```

基本上，您认为您正在搜索“a”，但实际上它正在搜索“a\n”，因为除非您使用`chomp`. 仅当 'a' 是最后一个字符时才匹配，因为在这种情况下，它将被换行符取代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T16:57:24.940

您应该始终在程序开始时`use strict`使用. 这尤其适用于您寻求代码帮助时，因为此措施可以快速揭示许多简单的错误。`use warnings``my`

正如 Raze2dust 所说，重要的是要记住从文件中读取的行将有一个尾随换行符`"\n"`。如果您正在检查一对行之间的*精确*匹配，那么这无关紧要，但由于它不适合您，我假设字符串`searchTerms.txt`可以出现*在*`fileToSearchIn.xml`. 这意味着您需要使用来自;[`chomp`](http://perldoc.perl.org/functions/chomp.html)的字符串。`searchTerms.txt`其他文件中的行可以保持原样。

[`File::Slurp`](https://metacpan.org/module/File%3a%3aSlurp)通过使用该模块，这样的事情变得容易多了。它为您完成所有文件处理，如果您要求，它将从输入文本中剔除任何换行符。

我已更改您的程序以使用此模块，以便您了解它是如何工作的。

```
use strict;
use warnings;

use File::Slurp;

my @searchTerms = read_file('searchTerms.txt', chomp => 1);
my @xml = read_file('fileToSearchIn.xml');

my @results;

foreach my $searchIn (@xml) {
  foreach my $searchFor (@searchTerms) {
    if ($searchIn =~ m/$searchFor/) {
      push @results, qq/Found in "$searchIn"\n while searching for "$searchFor"/;
    }
  }
}

print "$_\n" for @results; 
```

# regex - 如何将公式中的变量与常规表达式匹配

> ID：10775306
> 
> 赞同：1
> 
> 时间：2012-05-27T15:57:59.853
> 
> 标签：regex

如果我有一个类似的公式：**a + b - c * (exp(a*b) ) / 3**

我只想匹配变量（a，b，c）。对我来说，**[a-zA-Z]+**完成了这项工作。但是我不想匹配**exp**函数。如何使用正则表达式实现这一点？我使用 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:14:46.540

```
([a-zA-Z]+)\b(?!\s*\() 
```

可接受的变量名称的更常见概念是

```
\b([a-zA-Z_]\w*)\b(?!\s*\() 
```

在函数名中带有点，它变成

```
(?:[^.]|^)\b([a-zA-Z]+)\b(?!(\.|\s*\()) 
```

（变量将在第一个捕获匹配中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T16:05:09.413

将其更改为**\b[Az]\b**将匹配不与其他字符相邻的单个 az 字母。

# javascript - 从组合框中获取值并向其添加一个数字

> ID：10775311
> 
> 赞同：0
> 
> 时间：2012-05-27T15:58:22.107
> 
> 标签：javascript

我正在尝试从组合框中获取“值”，然后简单地添加一个。我想我需要将它转换为整数，但也不能使解析工作。接下来我想把这个新号码放到一个文本框中。

```
<script type="text/javascript">
    function GetNextCategoryNum(sel)
    {
        var NextNumber; 
        var number = sel.options[sel.selectedIndex].value; 
        NextNumber = number ++1;
        alert("Last number used "  + number );
        textbox = NextNumber 
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:24:15.013

您的代码中的三个错误：
1\. value 将返回一个字符串。因此，您需要将其更改为整数。
2.“数字++1”很奇怪。你需要的是 ++number。如果您不想增加“数字”而是“NextNumber”，那么只需输入数字+1。
3\. 什么是“文本框”？如果它引用一个文本框对象，那么你需要声明它。

所以我的建议是：

```
<script type="text/javascript">
    function GetNextCategoryNum(sel)
    {
        var NextNumber; 
        var textbox = document.getElementById("textbox");
        var number = parseInt(sel.options[sel.selectedIndex].value); 
        NextNumber = number + 1;
        alert("Last number used "  + number );
        textbox.value = NextNumber;
    }
</script> 
```

# visual-studio-2010 - 错误 5 无法将文件“log.ldf”复制到“bin\log.ldf”。该进程无法访问该文件，因为它被其他进程使用

> ID：10775313
> 
> 赞同：1
> 
> 时间：2012-05-27T15:58:25.747
> 
> 标签：visual-studio-2010, sql-server-2012

我最近安装了 MS SQL Server 2012。我认为它会是一个很棒的数据库软件。但是经过2天的试用，我发现它并没有我想象的那么好。

如您所见，每次我从 VS 2010 运行我的项目时，VS 总是抱怨 .ldf 文件正在被另一个进程使用。（即 SQL Server 2012）然后我必须从计算机管理中的Service，这样程序就可以编译成功了。

但是当项目运行时，它需要运行 SQL Server 服务，因为一些代码需要访问数据库并修改数据。然后我必须启用 SQL 服务。

这真的很烦人。当我使用 SQL Server 2008 时，它并没有像这样执行。

那么有没有可能的解决方案？

我确实尝试在我的 web.config 文件中添加一个配置片段。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <hostingEnvironment shadowCopyBinAssemblies="false"/>
  </system.web>
</configuration> 
```

然后我清理整个解决方案并重建整个解决方案，错误仍然存​​在。

我非常期待尽快看到解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T07:28:42.823

您的解决方案可能包含对 LDF 文件的引用。
并且错误地将该`Copy to the Output`目录标记为`Copy always`or `Copy if Newer`。

当然，SQL Server 经常使用 LDF 文件（日志文件），因此在编译时会出现上述错误。

您不需要引用此文件，因此您可以从解决方案中删除 flag as `Copy Never`。

# django - 如何在 Django/Pinax 中设置电子邮件验证/确认？

> ID：10775317
> 
> 赞同：1
> 
> 时间：2012-05-27T15:58:51.357
> 
> 标签：django, pinax, email-confirmation

如何在 Pinax 中设置电子邮件确认？，我需要设置 SMTP 服务器或类似的东西吗？，我试图找到有关此的文档但失败了。任何人都可以将我重定向到解释此问题的文档或任何相关文章吗？ Pinax 使用电子邮件确认应用程序。我浏览了 emailconfirmation 的代码，但它不包含有关主机或服务器的任何设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:39:04.313

emailconfirmation 的集成非常简单。如果您有可用于发送邮件的现有邮件服务器，则无需设置任何邮件服务器。您只需在标准 Django 设置中填写用于发送邮件的数据，emailconfirmation 将使用该数据：

```
# e-mail settings
# XXXXXXXXXXXXXXXXXXXXXXX     THESE ARE NOT YET PRODUCTIONREADY!
EMAIL_HOST='mail.your_mailserver.com'
EMAIL_PORT=1025
EMAIL_HOST_USER='your_username'
EMAIL_HOST_PASSWORD='your_password' 
```

总结一下接下来要做什么：您必须创建一个用于输入电子邮件地址的表单（电子邮件配置不附带这种表单的原因有些晦涩）。这看起来像这样：

```
# email form using emailconfirmation
class AddEmailForm(forms.Form):

    def __init__(self, *args, **kwargs):
        try:
            self.user = kwargs.pop('user')
        except KeyError:
            pass
        super(AddEmailForm, self).__init__(*args, **kwargs)

    email = forms.EmailField(label="Email",required=True, widget=forms.TextInput())

    def clean_email(self):
        try:
            EmailAddress.objects.get(user=self.user, email=self.cleaned_data["email"])
        except EmailAddress.DoesNotExist:
            try:
                User.objects.get(email = self.cleaned_data['email'])
            except User.DoesNotExist:
                return self.cleaned_data["email"]
        raise forms.ValidationError(u"email address associated with another account.")

    def save(self):
        try:
            self.user.message_set.create(message="Confirmation email sent to %s" % self.cleaned_data["email"])
        except AttributeError:
            pass
        return EmailAddress.objects.add_email(self.user, self.cleaned_data["email"]) 
```

这将允许用户输入电子邮件地址，检查电子邮件地址是否已经存在并且正在被另一个帐户使用。之后，它会将电子邮件地址添加到未确认的电子邮件地址中，并向用户发送一封带有链接的电子邮件。然后，用户可以通过单击链接来确认电子邮件地址。

这里的所有都是它的。让我们希望 Pinax 的人很快就会对他们的文档进行质量攻势；）

# c# - Monotouch 设置属性不保留属性值

> ID：10775318
> 
> 赞同：1
> 
> 时间：2012-05-27T15:58:53.473
> 
> 标签：c#, iphone, uitableview, xamarin.ios, monodevelop

在我的 MonoDevelop 项目中，我有一个 iPhone 应用程序。我有两种不同的看法。每个视图都包含一个 UITable。对于视图 1，我将类 1 作为数据源 1 连接到 UITable。对于视图 2，我将类 2 作为数据源 2。两个类（即数据源）都为表提供数据。View 2 也有一个自定义单元格，因此加载是异步的。

我使用 linq to XML 从 2 个 XML 文件中获取数据。一切正常，数据加载良好。我需要知道的是根据视图 1 中的选择加载数据源 2 中的数据。为此，我需要将视图 1 中的 ID 传递给类（数据源）2。问题。

我已经尝试了我所知道的几乎所有东西，但我就是做不好。

根据我的正确解决方案：

我创建了另一个名为 SelectedRound 的类，它有两个属性。代码：

```
using System;

namespace xxxxx
{
    public class SelectedRound
    {
        public string RoundID { get; set; }
        public string Date { get; set; }
    }
} 
```

当我在类 1 中设置 RoundID 时，我可以在类 1 中访问它。但是，尝试在类 2 中访问它，不返回任何内容或返回 null。为什么会发生这种情况？可能是因为 Class(Datasource) 2 正在异步加载吗？我应该以某种全局方式实例化 SelectedRound 类吗？如果有怎么办？AppDelegate 也许？（我也在努力做到这一点）。

对我来说，设置和获取一个简单的字符串变量很困难，这似乎毫无意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:52:54.390

这感觉就像您如何将 SelectedRound 实例从第一个视图传递到第二个视图一样。

作为一个非常快速和肮脏的解决方案，您可以只使用单例，也可以只使用静态类：

```
public static class SelectedRound
{
    public static string RoundID {get;set;}
    public static string Date {get;set;}
} 
```

对于更复杂的模式，然后尝试覆盖两个视图控制器中的一个或两个的构造函数，以便向它们传递非静态类的共享实例。

视图控制器现在对你来说可能感觉很陌生——但它们只是 c# 类——所以请随意通过编写覆盖、新方法和属性来扩展它们。

# .net - TPL 中的错误 - TaskContinuationOptions.ExecuteSynchronously？

> ID：10775321
> 
> 赞同：8
> 
> 时间：2012-05-27T15:59:21.697
> 
> 标签：.net, task-parallel-library, task

我想我在 TPL 中发现了一个严重的错误。我不知道。我花了很多时间挠头，无法理解这种行为。任何人都可以帮忙吗？

我的情况是：

1.  我创建了一个做简单事情的任务。没有例外等等。
2.  我注册了一个 ExecuteSynchronously 设置的延续。它必须在同一个线程上。
3.  我在默认任务调度程序（线程池）上启动任务。开始线程继续并等待它。
4.  任务开始。通过。
5.  延续与任务在同一线程上开始（使先前的任务完成！）并进入无限循环。
6.  等待线程没有任何反应。不想走得更远。卡住等待。我检查了调试器，任务是 RunToCompletion。

这是我的代码。感谢任何帮助！

```
// note: using new Task() and then Start() to avoid race condition dangerous
// with TaskContinuationOptions.ExecuteSynchronously flag set on continuation.

var task = new Task(() => { /* just return */ });
task.ContinueWith(
   _task => { while (true) { } /* never return */ },
   TaskContinuationOptions.ExecuteSynchronously);

task.Start(TaskScheduler.Default);
task.Wait(); // a thread hangs here forever even when EnterEndlessLoop is already called. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T17:23:13.947

代表您提交了连接错误 - 希望没关系 :)

[https://connect.microsoft.com/VisualStudio/feedback/details/744326/tpl-wait-call-on-task-doesnt-return-until-all-continuations-scheduled-with-executesynchronously-also-complete](https://connect.microsoft.com/VisualStudio/feedback/details/744326/tpl-wait-call-on-task-doesnt-return-until-all-continuations-scheduled-with-executesynchronously-also-complete)

我同意这是一个错误，只是想发布一个显示问题的代码片段，而无需“无休止”的等待。错误是 ExecuteSynchronously 意味着对第一个任务的等待调用不会返回，直到 ExecuteSynchronously 延续也完成。

运行下面的代码片段显示它等待 17 秒（因此所有 3 个都必须完成，而不仅仅是第一个）。无论第三个任务是从第一个任务还是第二个任务安排，都是一样的（所以这个 ExecuteSynchronously 将继续通过这样安排的任务树）。

```
void Main()
{
    var task = new Task(() => Thread.Sleep(2 * 1000));
    var secondTask = task.ContinueWith(
        _ => Thread.Sleep(5 * 1000),
        TaskContinuationOptions.ExecuteSynchronously);
    var thirdTask = secondTask.ContinueWith(
        _ => Thread.Sleep(10 * 1000),
        TaskContinuationOptions.ExecuteSynchronously);

    var stopwatch = Stopwatch.StartNew();
    task.Start(TaskScheduler.Default);
    task.Wait();
    Console.WriteLine ("Wait returned after {0} seconds", stopwatch.ElapsedMilliseconds / 1000.0);
} 
```

唯一让我认为这*可能*是故意的（因此更多的是文档错误而不是代码错误）是[斯蒂芬在这篇博文中的评论](http://blogs.msdn.com/b/pfxteam/archive/2012/02/07/10265067.aspx)：

> ExecuteSynchronously 是对优化的请求，以在完成我们继续的前项任务的同一线程上运行延续任务，***实际上运行延续作为前项过渡到最终状态的一部分***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T13:48:56.897

[当您考虑任务内联](http://blogs.msdn.com/b/pfxteam/archive/2009/10/15/9907713.aspx)时，这种行为是有意义的。当您`Task.Wait`在任务开始执行之前调用时，调度程序将尝试内联它，即在调用的同一线程上运行它`Task.Wait`。这是有道理的——当您可以重用线程来执行任务时，为什么还要浪费线程等待任务呢？

现在，当`ExecuteSynchronously`指定时，调度程序被指示在与先前任务相同的线程上执行延续 - 这是内联情况下的原始调用线程。

请注意，当内联未发生时，您所期望的行为*确实发生了*。您所要做的就是禁止内联，这很容易 - 指定等待超时或传递取消令牌，例如

```
task.Wait(new CancellationTokenSource().Token); //This won't wait for the continuation 
```

最后请注意，不能保证内联。在我的机器上，它没有发生，因为任务在`Wait`调用之前已经开始，所以我的`Wait`调用没有阻塞。如果您想要一个可重现的块，请调用`Task.RunSynchronously`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T18:45:32.883

所以事实证明这确实是一个错误。我想每个人都同意。但是，如果打算这样做，那么 API 和文档似乎具有高度误导性。

我使用的解决方法只是使用 ManualResetEventSlim。

```
var eventSlim = new ManualResetEventSlim(false);
var task = new Task(() => { eventSlim.Set(); });
task.ContinueWith(
   _task => { while (true) { } /* never return */ },
   TaskContinuationOptions.ExecuteSynchronously);

task.Start(TaskScheduler.Default);
eventSlim.Wait(); 
```

谢谢大家看这个！对于所有评论。

问候。

# php - 没有服务器访问权限的 PHP 分析

> ID：10775323
> 
> 赞同：0
> 
> 时间：2012-05-27T15:59:41.773
> 
> 标签：php, codeigniter

> **可能重复：**
> [带有方法执行计数、时间等的 PHP Profiler，没有扩展](https://stackoverflow.com/questions/10315124/php-profiler-with-method-execution-count-times-etc-without-extensions)

所以，我不能使用 xDebug 或其他需要安装 PECL 扩展的东西，我只能访问 FTP，所以我需要对我使用的函数进行一些测试，这是 CodeIgniter 的一个操作。

所以我用检查器查看了 chrome，我发现该页面的响应时间仅为 22 秒，仅适用于后端（该操作中使用的 PHP 函数），没有 DOM 的东西。

有谁知道一个好工具吗？看看是什么导致负载如此巨大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:03:43.173

如果没有实际的调试工具，`echo`可能是您唯一的调试工具。您可以`$start_time = microtime(true)`在站点入口点的开头添加，并且可以`microtime(true) - $start_time`在代码中的不同位置打印或记录以跟踪执行时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T17:56:07.913

从文档

```
$this->benchmark->mark('code_start');

// Some code happens here

$this->benchmark->mark('code_end');

echo $this->benchmark->elapsed_time('code_start', 'code_end'); 
```

然而，这不会告诉您为什么您的模型/控制器加载缓慢，但您可以封装任何请求以缩小有问题的加载时间。IE：您对模型进行基准测试并意识到这是进行 4 次查询。

# gzip - Play Framework 2、Rest Services和gzip解压

> ID：10775326
> 
> 赞同：1
> 
> 时间：2012-05-27T16:00:14.083
> 
> 标签：gzip, playframework-2.0

从休息服务中解压缩 gzip 内容时，我面临着一个似乎是字符集问题的问题。当我尝试运行下面的代码片段时，会引发错误，提示“格式错误的 JSON。非法字符（（CTRL-CHAR，代码 31））”：

```
val url:String = "https://api.stackexchange.com/2.0/info?site=stackoverflow"
Async {
  WS.url(url)
    .withHeaders("Accept-Encoding" -> "gzip, deflate")
    .get()
    .map { response =>
    Ok("Response: " + (response.json \ "items"))
  }
} 
```

起初我认为这会是 StackExchange API 本身的问题，但我尝试了一个类似的服务，它也使用 gzip 压缩，并且发生了同样的错误。很难修复代码，因为我什至不知道“非法字符”在哪里。是否缺少某些东西或实际上是游戏中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:50:40.083

我可以提供的线索是 gzip 流的第一个字节是 31 (0x1f)。因此，您可能需要执行其他操作来解压缩 gzip 流。

顺便说一句，我建议你[不要接受 deflate encoding](https://stackoverflow.com/questions/9170338/)，只接受 gzip 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T09:42:02.983

这是使用 Play 2.3 完成的方法

```
// set Http compression: https://www.playframework.com/documentation/2.3.x/ScalaWS
val clientConfig = new DefaultWSClientConfig()
val secureDefaults: AsyncHttpClientConfig = new NingAsyncHttpClientConfigBuilder(clientConfig).build()
val builder = new AsyncHttpClientConfig.Builder(secureDefaults)
builder.setCompressionEnabled(true)
val secureDefaultsWithSpecificOptions: AsyncHttpClientConfig = builder.build()
implicit val implicitClient = new NingWSClient(secureDefaultsWithSpecificOptions)
val response = WS.clientUrl("http://host/endpoint/item").withHeaders(("Accepts-encoding", "gzip")).get() 
```

# c++ - 从 txt 文件读取和创建对象

> ID：10775332
> 
> 赞同：2
> 
> 时间：2012-05-27T16:01:30.413
> 
> 标签：c++

我有休闲功能，但我不明白为什么它不起作用。保存数据后保存正确，但在读取数据时，它不会读取 int 部分。

```
void StudentRepository::loadStudents(){
    ifstream fl;
    fl.open("studs.txt");
    Student st("",0,0);
    string str,s;
    stringstream ss;
    int i;
    int loc;
    if(fl.is_open()){
        while(!(fl.eof())){
            getline(fl,str);
            loc = str.find(",");
            ss << str.substr(0,loc);
            s = ss.str();
            st.setName(s);
            str.erase(0,loc);
            loc = str.find(",");
            ss << str.substr(0,loc);
            ss >> i;
            st.setId(i);
            str.erase(0,loc);
            ss >> i;
            st.setGroup(i);
            students.push_back(st);

        }
    }
    else{
        cout<<"~~~ File couldn't be open! ~~~"<<endl;
    }
    fl.close();
} 
```

编辑：

```
class Student {
private:
    string name;
    int ID;
    int group;

public:
Student(string name, int id, int gr ):name(name),ID(id),group(gr){}

void setId(int value)       {group = value;}
void setGroup(int value)    {ID = value;}
void setName(string value)  {name = value;}
int getGroup()              const{return group;}
int getID()              const{return ID;}
    string getName()            const{return name;}

    friend ostream& operator << (ostream& out, const Student& student)
    {
        out << student.name << " " << student.ID << " " << student.group <<endl;
        return out;
    }
}; 
```

文件：（在我在加载函数中初始化对象时，所有 int 都为 0）

```
maier tsdar,2,0
staedfsgu aldasn,0,3
pdasdp aasdela,323,23
marsdaciu baleen,234,4534
madsd,234,2345 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T16:08:39.610

当您调用`s = ss.str();`时，它不会消耗缓冲区，因此下次您尝试提取`int`时，提取失败，因为`ss`缓冲区仍然包含初始字符串（而不仅仅是您在末尾附加的数字的字符串表示形式） . 您可以为提取创建一个新的 stringstream 对象`int`或在尝试提取`int`s之前使用所有内容

# embedded - 如何在这个手臂上编程

> ID：10775334
> 
> 赞同：1
> 
> 时间：2012-05-27T16:01:39.420
> 
> 标签：embedded, arm, arduino

我在板上有这个三星芯片（samsung s3c2510a），我想通过某种方法对其进行编程。但是，我没有 jtag 阅读器，而且这块板有一个 USB 端口。有什么办法可以判断我是否可以通过这个 USB 端口对芯片进行编程？我从三星的彩色激光打印机上撕下电路板，电路板也有以太网连接。

此外，该板有 4 个引脚，称为“cn4 调试”。这会有用吗？

这是一张照片：http: [//imageshack.us/photo/my-images/262/img20120527120306.jpg/](http://imageshack.us/photo/my-images/262/img20120527120306.jpg/)

谢谢，罗希特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:37:19.837

我怀疑对这个板进行编程甚至是可能的。您可以检查是否有任何软件用于更新板（来自制造商）并尝试反转协议。您还需要弄清楚固件文件的格式。有很多关于破解路由器固件的好东西可能会有所帮助。您应该能够找到一些邮件列表来寻求帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:12:14.113

对于要通过 USB 编程的任何设备，或者实际上任何不属于片上编程/调试架构的端口，都需要支持该端口的软件/固件已经存在于芯片上。为此，一些微控制器包括基于 ROM 的主引导加载程序代码。S2C2510A 没有这样的引导加载程序。但是如果板上已经有软件，它的一部分可能确实是一个引导加载程序。但是，除非您能获得有关所使用协议的信息，否则您并没有太大希望。

董事会的图片并没有真正的帮助。您需要的是完整的数据表和/或原理图。您还需要芯片本身的数据表和用户参考手册。没有他们，你真的没有太多希望理解这个董事会。在我看来，该板不像开发板，因此可能无法获得特定于板的信息。

CN4 仅表示“4 号连接器”。只有四个引脚，它很可能只是连接到*控制台 UART* - S3C2510A 上的最小低速串行数据外设。

# c# - Visual Studio 在上网本 1.5Gz 和 2Gb RAM 上运行缓慢

> ID：10775339
> 
> 赞同：0
> 
> 时间：2012-05-27T16:02:33.690
> 
> 标签：c#, visual-studio-2010, performance, visual-studio, cpu-speed

我有一台带有以下参数的 HP 上网本： 型号：HP Mini 110-3500 处理器：Intel(R) Atom(TM) CPU N550 @ 1.50GHz 安装内存 (RAM)：2,0 Gb 系统类型：32 位操作系统系统：Windows 7 Starter

我还安装了带有 Resharper 6 的 Microsoft Visual Studio 2010 Ultimate。它运行非常慢。我的其他应用程序运行正常。大多数资源由 Google Chrome 和 Studio 消耗。我的任务是使用 C# 和 Windows 窗体进行本地应用程序开发。在我的工作地点，我有配备更快处理器和 8Gb RAM 的 PC。所以 Studio 可以正常高速运行。请您帮我解决以下问题：有什么方法可以在这台上网本上更快地运行 Visual Studio？）或者我应该调整 Studio 的一些设置吗？或者可能是其他产品，例如免费的 Express Studio 或 Professional 会运行得更快？我应该在此处发布一些其他信息，例如 Windows 任务管理器屏幕截图吗？Resharper 会影响 Studio 的速度吗？

* * *

感谢大家的回答。真正的原因不在于内存和处理器不足。我的 HP mini 完全符合这些要求。Mu 另一台大型笔记本电脑，HP 具有相同特性但不是 Mini（带大显示屏）运行 Studio 非常好。所以神秘的原因是在迷你）））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T16:06:50.703

我认为如果没有 Resharper，你可能会在这里过得更好。Resharper 的最低要求高于您的机器。

> 处理器：Intel Core 2 Duo 2GHz
> 内存：最少。2Gb，推荐 4Gb 或更高

[http://www.jetbrains.com/resharper/download/system_requirements.html](http://www.jetbrains.com/resharper/download/system_requirements.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T16:08:49.833

查看[此处的 Visual Studio 硬件要求，](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/ultimate/overview)您几乎达到了最低要求。我怀疑将 Resharper 添加到此配置中没有帮助。

以我的经验，多核（2 或 4）和 4 Gb 内存对于小型项目来说很好。对于更大的项目，磁盘也很重要（SSD 在启动和构建过程中会有很大帮助）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T16:09:04.947

您的机器低于 Visual Studio 2010 规格： http: [//www.microsoft.com/visualstudio/en-us/products/2010-editions/ultimate/system-requirements](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/ultimate/system-requirements)

Resharper 也将付出沉重的代价。您尤其低于 Resharper 的规格：http: [//www.jetbrains.com/resharper/download/system_requirements.html](http://www.jetbrains.com/resharper/download/system_requirements.html)

考虑关闭 Resharper 的 Intellisense 和 Code Inspector 功能，因为这些会极大地影响编辑器的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T16:15:31.470

您可以尝试压缩 Visual Studio 文件夹。有时它有帮助，有时没有，取决于 CPU/HDD 比率、压缩内容和任务。

# javascript - 带有两个处理程序的 jQuery 范围滑块。读取最小值和最大值

> ID：10775341
> 
> 赞同：0
> 
> 时间：2012-05-27T16:02:36.060
> 
> 标签：javascript, html, jquery-ui

我正在使用 jQuery UI 范围滑块，我有两个隐藏的输入来存储滑块的最小值和最大值，以便以后将它们用于 PHP 查询。但是发生的情况是我的最小值和最大值变量不存储实际值，而是存储它们之前的值。因此，相对于实际值会有 +-1 的变化。我想我必须找到一种在提交表单之前更新值的方法。我正在使用的代码是

```
<script>
$(function() {

    $("#slider-range").slider({
        range: true,
        min: 1,
        max: 10,
        values: [ 1, 10 ],
        slide: function( event, ui ) {
            $("#minvalue").val($("#slider-range").slider("values", 0));
            $("#maxvalue").val( $("#slider-range").slider("values", 1));
            $("#amount").val(ui.values[ 0 ] + " - " + ui.values[ 1 ]);          
        }
    });
    $("#amount").val( $("#slider-range").slider("values", 0) +
        " - " + $("#slider-range").slider("values", 1));    
});
</script>

    <input type="hidden" id="minvalue" name="minvalue" />
    <input type="hidden" id="maxvalue" name="maxvalue" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:05:41.593

在这里试试这个：

```
$(function() {

$("#slider-range").slider({
    range: true,
    min: 1,
    max: 10,
    values: [0, 11],
    slide: function(event, ui) {
        $("#minvalue").val(ui.values[0]);
        $("#maxvalue").val(ui.values[1]);
        $("#amount").val(ui.values[0] + " - " + ui.values[1]);
    }
});
$("#amount").val($("#slider-range").slider("values", 0) + " - " + $("#slider-range").slider("values", 1));

});​ 
```

# symfony - Doctrine 两次加载所有记录

> ID：10775346
> 
> 赞同：0
> 
> 时间：2012-05-27T16:03:41.410
> 
> 标签：symfony, doctrine-orm, lazy-loading, eager-loading

我有一个名为**Category**的实体，其中包含以下字段：

```
id: integer
name: string
slug: string
children: OneToMany(targetEntity="Category", mappedBy="parent")
parent: ManyToOne(targetEntity="Category", inversedBy="children") 
```

如您所见，每个类别都可以是另一个类别的子\父级。

我需要将所有类别映射到一个数组，所以我认为最好将它们全部加载在一起：

```
$categoryRepository->findAll(); 
```

稍后，在映射方法上，我想获取每个类别的孩子，所以我使用

```
$category->getChildren(); 
```

我假设由于我首先加载**了所有**类别，因此只会执行 1 个查询，但分析器显示不同！有1 个查询获取**所有**记录（分析器的输出）*：*

 **```
SELECT t0.id AS id1, t0.name AS name2, t0.slug AS slug3, t0.parent_id AS parent_id4
FROM acme_category t0 
```

然后对**每条**记录进行另一个查询：

```
SELECT t0.id AS id1, t0.name AS name2, t0.slug AS slug3, t0.parent_id AS parent_id4
FROM omnt_work_category t0 WHERE t0.parent_id = 1

SELECT t0.id AS id1, t0.name AS name2, t0.slug AS slug3, t0.parent_id AS parent_id4
FROM omnt_work_category t0 WHERE t0.parent_id = 1

etc.. 
```

这是为什么？我怎样才能让它从一开始就加载所有记录？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:34:47.603

您可以通过在关系注释上声明 fetch="EAGER" 来自动加载它。

但是，查看您的实现，您似乎试图通过维护子/父关系来创建数据层次结构。您最好为此实施嵌套集解决方案。Doctrine 2 有一些库可以为您处理这个问题。

我使用并推荐的一个是>> [https://github.com/blt04/doctrine2-nestedset](https://github.com/blt04/doctrine2-nestedset)

Doctrine 试图多次提取同一记录而不是搜索缓存，这当然很有趣。也许它处理关系项目的缓存略有不同。肯定值得研究。**

# ios - AppDelegate dealloc 在程序启动之前被调用

> ID：10775350
> 
> 赞同：2
> 
> 时间：2012-05-27T16:03:51.037
> 
> 标签：ios, dealloc

我遇到了一个非常奇怪的情况，在设备上运行时我的应用程序崩溃了。当我从 xcode 在 iphone 上运行我的应用程序时，我收到一条错误消息，提示我正在尝试访问已被释放的 AppDelegate 属性。所以我跟踪它并注意到每次我的应用程序启动时，它都会在获取 applicationDidFinishLaunchingWithOptions 之前直接进入 AppDelegate dealloc 方法。因此，它取消了我所有的财产。奇怪的是，即使 appDelegate 已被释放，所有界面看起来都很正常，只是稍后我从 AppDelegate 访问属性时出现问题。另一个奇怪的事情是，即使它在 iOS 模拟器上运行时做了同样的事情（首先调用 dealloc()），应用程序运行时没有任何错误。谁能帮我解释一下？谢谢。

PS：我怀疑的一件事是，最近我撤销并重新创建了我的证书，这导致我的项目中更改了代码唱歌身份。但是我做得正确并且能够在手机上运行它，所以不确定是否是问题所在。

# python - 结合 node.js 和 Python

> ID：10775351
> 
> 赞同：132
> 
> 时间：2012-05-27T16:03:52.190
> 
> 标签：python, node.js, ipc

Node.js 非常适合我们的 Web 项目，但是我们更喜欢 Python 的计算任务很少。我们也已经为他们准备了 Python 代码。我们非常关注速度，如何以异步非阻塞方式从 node.js 调用 Python“worker”最优雅的方式是什么？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-03-27T13:54:55.757

这听起来像是 zeroMQ 非常适合的场景。这是一个类似于使用 TCP 或 Unix 套接字的消息传递框架，但它更加健壮（[http://zguide.zeromq.org/py:all](http://zguide.zeromq.org/py:all)）

有一个库使用 zeroMQ 来提供运行良好的 RPC 框架。它被称为 zeroRPC ( [http://www.zerorpc.io/](http://www.zerorpc.io/) )。这里是你好世界。

Python“你好 x”服务器：

```
import zerorpc

class HelloRPC(object):
    '''pass the method a name, it replies "Hello name!"'''
    def hello(self, name):
        return "Hello, {0}!".format(name)

def main():
    s = zerorpc.Server(HelloRPC())
    s.bind("tcp://*:4242")
    s.run()

if __name__ == "__main__" : main() 
```

和 node.js 客户端：

```
var zerorpc = require("zerorpc");

var client = new zerorpc.Client();
client.connect("tcp://127.0.0.1:4242");
//calls the method on the python object
client.invoke("hello", "World", function(error, reply, streaming) {
    if(error){
        console.log("ERROR: ", error);
    }
    console.log(reply);
}); 
```

反之亦然，node.js 服务器：

```
var zerorpc = require("zerorpc");

var server = new zerorpc.Server({
    hello: function(name, reply) {
        reply(null, "Hello, " + name, false);
    }
});

server.bind("tcp://0.0.0.0:4242"); 
```

和python客户端

```
import zerorpc, sys

c = zerorpc.Client()
c.connect("tcp://127.0.0.1:4242")
name = sys.argv[1] if len(sys.argv) > 1 else "dude"
print c.hello(name) 
```

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2012-05-27T16:17:28.130

对于 node.js 和 Python 服务器之间的通信，如果两个进程在同一服务器上运行，我将使用 Unix 套接字，否则使用 TCP/IP 套接字。对于封送协议，我会采用 JSON 或[协议缓冲区](https://developers.google.com/protocol-buffers/docs/pythontutorial)。如果线程化 Python 成为瓶颈，请考虑使用[Twisted Python](http://twistedmatrix.com/trac/)，它提供与 node.js 相同的事件驱动并发。

如果您喜欢冒险，请学习[clojure](http://clojure.org/)（[clojurescript](https://github.com/clojure/clojurescript)、[clojure-py](https://github.com/halgari/clojure-py)），您将获得与 Java、JavaScript（包括 node.js）、CLR 和 Python 上的现有代码运行和互操作的相同语言。您只需使用 clojure 数据结构即可获得出色的编组协议。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-27T16:17:03.947

如果您安排将 Python 工作者放在一个单独的进程中（长时间运行的服务器类型进程或按需生成的子进程），那么您与它的通信将在 node.js 端是异步的。UNIX/TCP 套接字和标准输入/输出/错误通信在节点中本质上是异步的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-18T13:27:29.660

我使用[thoonk.js](https://github.com/andyet/thoonk.js)和[thoonk.py](https://github.com/andyet/thoonk.py)取得了很大的成功。Thoonk 利用 Redis（内存中键值存储）为您提供供稿（想想发布/订阅）、队列和作业模式以进行通信。

为什么这比 unix 套接字或直接 tcp 套接字更好？整体性能可能会有所降低，但是 Thoonk 提供了一个非常简单的 API，可以简化手动处理套接字的过程。Thoonk 还有助于使实现分布式计算模型变得非常简单，该模型允许您扩展您的 python worker 以提高性能，因为您只需启动 python worker 的新实例并将它们连接到同一个 redis 服务器。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-06T07:08:20.387

我也会考虑 Apache Thrift [http://thrift.apache.org/](http://thrift.apache.org/)

它可以在多种编程语言之间架起桥梁，效率很高，并且支持异步或同步调用。在此处查看完整功能[http://thrift.apache.org/docs/features/](http://thrift.apache.org/docs/features/)

多语言对未来的计划很有用，例如，如果您以后想用 C++ 完成部分计算任务，可以很容易地使用 Thrift 将其添加到混合中。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-27T16:19:50.467

我建议使用一些工作队列，例如优秀的[Gearman](http://gearman.org/)，它将为您提供一种调度后台作业的好方法，并在处理完它们后异步获取它们的结果。

在 Digg（以及许多其他公司）大量使用的这一优势在于，它提供了一种强大、可扩展和稳健的方式，使任何语言的工作人员都能以任何语言与客户交谈。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-20T16:57:06.320

**2019 年更新**

有几种方法可以实现这一点，这里是复杂度递增顺序的列表

1.  Python Shell，您将向 python 控制台写入流，它会回写给您
2.  Redis Pub Sub，当你的节点 js 发布者推送数据时，你可以在 Python 中监听一个频道
3.  Websocket 连接，其中 Node 充当客户端，Python 充当服务器，反之亦然
4.  与 Express/Flask/Tornado 等的 API 连接与公开的 API 端点单独工作以供对方查询

**方法一 Python Shell 最简单的方法**

**source.js 文件**

```
const ps = require('python-shell')
// very important to add -u option since our python script runs infinitely
var options = {
    pythonPath: '/Users/zup/.local/share/virtualenvs/python_shell_test-TJN5lQez/bin/python',
    pythonOptions: ['-u'], // get print results in real-time
    // make sure you use an absolute path for scriptPath
    scriptPath: "./subscriber/",
    // args: ['value1', 'value2', 'value3'],
    mode: 'json'
};

const shell = new ps.PythonShell("destination.py", options);

function generateArray() {
    const list = []
    for (let i = 0; i < 1000; i++) {
        list.push(Math.random() * 1000)
    }
    return list
}

setInterval(() => {
    shell.send(generateArray())
}, 1000);

shell.on("message", message => {
    console.log(message);
}) 
```

**目的地.py 文件**

```
import datetime
import sys
import time
import numpy
import talib
import timeit
import json
import logging
logging.basicConfig(format='%(asctime)s : %(levelname)s : %(message)s', level=logging.INFO)

size = 1000
p = 100
o = numpy.random.random(size)
h = numpy.random.random(size)
l = numpy.random.random(size)
c = numpy.random.random(size)
v = numpy.random.random(size)

def get_indicators(values):
    # Return the RSI of the values sent from node.js
    numpy_values = numpy.array(values, dtype=numpy.double) 
    return talib.func.RSI(numpy_values, 14)

for line in sys.stdin:
    l = json.loads(line)
    print(get_indicators(l))
    # Without this step the output may not be immediately available in node
    sys.stdout.flush() 
```

**注意**：创建一个名为subscriber 的文件夹，它与source.js 文件处于同一级别，并将destination.py 放入其中。不要忘记更改您的 virtualenv 环境

# ruby-on-rails - 创建操作重定向到错误的页面？

> ID：10775352
> 
> 赞同：0
> 
> 时间：2012-05-27T16:03:55.980
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当我检查我的错误消息是否正常工作时，我注意到我的重定向转到`/businesses`而不是`/businesses/new`在它 POST（`create`操作）之后。`/businesses/new`我正在使用常规的 RESTFUL 路由，但是当它们出现错误时，我需要它返回到POST。我怎样才能做到这一点？

* * *

这是我当前的代码：

```
def create
  @business = Business.new(params[:business])
   if @business.save
    redirect_to :back, :notice => "You have successfully added a new business."
   else
    render :action => 'new', :notice => "Please try again."
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:14:26.900

如果验证失败，您不应重定向。这是我应该做的以保持在同一页面上。

```
def create
  @business = Business.new(params[:business])
  if @business.save
    redirect_to businesses_path
  else
    render :new
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:52:40.577

它实际上不是重定向。如果您检查为您的表单生成的 html 代码，您将看到如下内容：

```
<form accept-charset="UTF-8" action="/business" 
      class="new_business" id="new_business" method="post"> 
```

这意味着要加载的请求页面不是“/business/create”，而是“/business”。这就是您在浏览器的地址栏中看到它的原因。这与您在创建操作中的重定向无关。在那里你只是呈现以前的形式。这不是一个错误，它实际上是有效的，可能有点令人困惑，但我认为这不是什么大问题。如果确实需要，您可以使用一些 javascript 进行更正。

# ruby-on-rails - Rails 嵌套的用户配置文件字段与设计不保留输入

> ID：10775354
> 
> 赞同：0
> 
> 时间：2012-05-27T16:04:10.440
> 
> 标签：ruby-on-rails, devise, nested-attributes

我正在尝试将表单字段添加到我的设计用户注册视图。这已经实现，并且在我提交表单时运行验证。但是，如果我收到任何表单错误，输入数据不会按照原始表单重新填充表单字段，尽管我可以在我添加到开发视图中的小调试器中看到正确的值。

这是我的看法：

```
<h2>Sign up</h2>

<% resource.build_profile %>
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
    <%= devise_error_messages! %>

    <div><%= f.label :email %><br />
    <%= f.email_field :email %></div>

    <div><%= f.label :username %> <i>(this cannot be changed so choose wisely)</i><br />
    <%= f.text_field :username %></div>

    <div><%= f.label :password %><br />
    <%= f.password_field :password %></div>

    <div><%= f.label :password_confirmation %><br />
    <%= f.password_field :password_confirmation %></div>

    <%= f.fields_for :profile do |profile_form| %>
        <div><%= profile_form.label :full_name %><br />
        <%= profile_form.text_field :full_name %></div>

        <div><%= profile_form.label :birth_date %><br />
        <%= profile_form.date_select :birth_date, start_year: Time.now.year, end_year: Time.now.year - 80, order: [:day, :month, :year], prompt: { day: 'Choose day', month: 'Choose month', year: 'Choose year' } %></div>

        <div><%= profile_form.label :gender %><br />
        <%= profile_form.select :gender, { "Male" => '0', "Female" => '1' } %></div>

        <div><%= profile_form.label :postcode %><br />
        <%= profile_form.text_field :postcode %></div>

        <div><%= profile_form.label :description, "About you" %><br />
        <%= profile_form.text_area :description %></div>
    <% end %>

    <div><%= f.submit "Sign up" %></div>
<% end %>

<%= render :partial => "devise/shared/links" %> 
```

我没有要显示的控制器代码，因为它使用了 Gem 中的设计代码。我在做什么错/不做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:26:05.160

您每次都使用 重建配置文件`build_profile`，这意味着当要重新显示表单时，它使用的是配置文件的新实例，而不是有错误的实例。只需更改该代码，使其仅在不存在配置文件时构建配置文件：

```
resource.build_profile unless resource.profile 
```

像这样的东西应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:02:21.770

卡洛斯的回答帮助我解决了这个确切的问题。

```
resource.build_profile unless resource.profile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T16:25:40.807

如果您的用户模型引用了配置文件模型，请尝试传递

```
<%= f.fields_for resource.profile do |profile_form| %> 
```

现在，您正在传递对模型的引用，但表单需要一个实例。

# javascript - 提供穷人的仪表板应用程序通信

> ID：10775358
> 
> 赞同：1
> 
> 时间：2012-05-27T16:04:33.563
> 
> 标签：javascript, extjs, rally

我意识到您正在想出一种让面板进行交流的方式。在那之前，我一直在想我可以通过偏好对象进行一些基本的交流。

但是，如何为应用程序所在的仪表板找到唯一 ID？

如果可能有比通过首选项对象共享信息更好的解决方案，让我描述一下我们想要解决的具体问题：我们项目结构中的某些项目代表我们想要显示“指标仪表板”的“程序”——该仪表板将由共享仪表板上的多个应用程序组成。但是，在拉力赛项目层次结构中，项目的级别并不一致，尽管我们有很多很多的拉力赛项目，但我们只有大约四个项目。

正因为如此，我希望这个代码指标仪表板成为 Rally 中的一个页面，它可以轻松地在我们拥有的各种程序之间切换。我不希望使用项目层次结构来执行此操作，因为我们有很多项目，而且查找和选择程序既耗时又棘手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:35:01.213

我破解了示例，创建了一个可以在两个面板之间传递事件的应用程序示例。目前这是非常不受支持的，我们保留在没有任何警告的情况下随时破坏它的权利。

话虽如此，您可以看到当前不受支持的获取应用程序 ID 的方式，如果您制作此应用程序的两个副本，您可以在控制台中看到应用程序在全局 Rally 消息总线上通信的结果。

你可以在[这里找到它的要点](https://gist.github.com/2845161)

```
<!DOCTYPE html>
<html>
<head>
    <title>My Custom App</title>

    <!--Include SDK-->
    <script type="text/javascript" src="/apps/2.0p/sdk.js"></script>

    <!--App code-->
    <script type="text/javascript">

        Rally.onReady(function() {

            Ext.define('CustomApp', {
                extend: 'Rally.app.App',
                componentCls: 'app',
                mixins:['Rally.Messageable'],
                launch: function() {
                    var brokenInTheFutureIdThatWillWorkForNow =   Ext.Object.fromQueryString(window.location.href);
                    window.parent.Rally.Messages.subscribe("test",function(){console.error(brokenInTheFutureIdThatWillWorkForNow.panelOid,arguments);});
                    window.parent.Rally.Messages.publish("test",brokenInTheFutureIdThatWillWorkForNow.panelOid);
                    //Write app code here
                }
            });

            Rally.launchApp('CustomApp', {
                name: 'My Custom App'
            });

        });

    </script>

    <!--App styles-->
    <style type="text/css">

        .app {
            /* Add app styles here */
        }

    </style>

</head>
<body class="myApp">
</body>
</html> 
```

# c++ - C++ 转换为更精确的类型并失去准确性？

> ID：10775361
> 
> 赞同：3
> 
> 时间：2012-05-27T16:04:59.257
> 
> 标签：c++, floating-point, precision

考虑两种计​​算方式：

1.  双精度数据
    -> 应用具有双精度临时函数的函数
    -> 返回结果
2.  双精度数据
    -> 转换为 long double
    -> 应用具有长双精度临时函数的函数
    -> 转换为 double
    -> 返回结果

与第一个解决方案相比，第二种解决方案能否给出不太准确的结果？如果是，在什么情况下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T00:06:47.583

是的。证明：令 c = 0x1p-53 + 0x1p-64。以双精度和长双精度计算 1+cc-1（常见的 Intel 格式，具有 64 位有效位）。在 double 中，结果为 0，这是数学上精确的答案。在 long double 中，结果是 -0x1p-64，这是错误的（并且在转换为 double 时仍然是错误的）。

在 double 中，1+c 将 1 的 ULP（最小精度单位）的一半添加到 1，因此它产生 1 加上一个 ULP。减去 c 会减去 ULP 的一半多一点，因此与结果最接近的可表示数字（双精度数）是 1，因此产生 1。然后减去 1 得到 0。

In long double, 1+c adds 0x1p-53 plus half an ULP of 1\. (In long double, the ULP of 1 is 0x1p-63.) Since the result is exactly the same distance from the two nearest representable numbers (in long double), the one with the low bit zero is returned, 1+0x1p-53\. Then the exact result of subtracting c is 1 - 0x1p-64\. This is exactly representable, so it is returned. Finally, subtracting 1 yields -0x1p-64.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T16:53:25.580

关于`long double`草案说：

> **3.9.1 基本类型**
> 
> **8**浮点类型共有三种：float、double 和 long double。double 类型提供的精度至少与 float 一样，long double 类型提供的精度至少与 double 一样。float 类型的值集是 double 类型的值集的子集；double 类型的值集是 long double 类型的值集的子集。浮点类型的值表示是实现定义的。整数和浮点类型统称为算术类型。标准模板 std::numeric_limits (18.3) 的特化应指定实现的每种算术类型的最大值和最小值。

至于下一个最有趣的*促销活动：*

> **4.6 浮点推广**
> 
> **1** float 类型的纯右值可以转换为 double 类型的纯右值。值不变。
> 
> **2**这种转换称为浮点提升。

请注意，没有什么要说`double`的`long double`。不过，我会冒这个险。

`long double`接下来关于转换，当您从到时，我们感兴趣的是`double`：

> **4.8 浮点数转换**
> 
> **1**浮点类型的纯右值可以转换为另一种浮点类型的纯右值。如果源值可以在目标类型中精确表示，则转换的结果就是该精确表示。如果源值介于两个相邻的目标值之间，则转换的结果是实现定义的选择这些值中的任何一个。否则，行为未定义。
> 
> **2**允许作为浮点提升的转换不包括在浮点转换集中。

现在，让我们看看*缩小*的效果：

> **6** . 缩小转换是隐式转换
> 
> [...]
> 
> *   从long double到double或者float，或者从double到float，除非源是常量表达式并且转换后的实际值在可以表示的值范围内（即使不能准确表示）

所有这些标准语都有两个要点：

*   将关于缩小的部分与关于实现定义的转换的部分结合起来，您的结果可能会在跨平台时发生变化。
*   如果您的中间结果（考虑到多个此类结果）在`long double`a `double`（高或低）无法准确表示的范围内，则这些结果可以累积以返回不同的最终结果，您希望将其作为`double`.

至于哪个*更准确*，我认为这完全取决于您的应用程序。

# debugging - 统一调试

> ID：10775363
> 
> 赞同：38
> 
> 时间：2012-05-27T16:05:12.560
> 
> 标签：debugging, monodevelop, unity3d

目前，我正在做的是打开`Unity`，双击我编写的脚本之一，然后`MonoDevelop`打开，现在我必须关闭统一，然后`MonoDevelop`我就这样做了*`Run >> Run with >> Unity Debugger`*。

打开这个 Unity 后，当我按下统一的播放按钮时，调试会话开始。但只有一次。如果我在其中一个中停止此会话，`Unity`或者`MonoDevelop`我必须重新重复整个过程，这非常乏味。我必须打开 Unity，关闭 Unity，（我必须关闭它，因为下一步*`Run >> Run with >> Unity Debugger`*将打开 Unity，如果 Unity 已经打开，我会收到错误消息，说一次只能打开一个 Unity 实例）。

我要问的是：
有没有更好的工作流程可以让我从这种乏味的 Unity 开关中解脱出来，每次我停止调试会话时，我都会正常启动而不做这些乏味的重复？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-10T22:00:19.163

在 MonoDevelop 的调试菜单中使用“附加”；您应该能够以这种方式附加到正在运行的 Unity 进程。（您可能需要确保在 Unity 的首选项中打开了相应的选项）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-08T22:31:05.460

另一种调试方法是使用：

```
Debug.LogError("foo"); 
```

或者

```
Debug.LogWarning("foo"); 
```

另一个注意事项是您实际上可以将对象绑定到日志。如果您正在迭代游戏对象列表，这将导致编辑器突出显示对象问题。IE：

```
Debug.LogWarning("this object broke", gameObject); 
```

如果您在控制台窗口中打开“错误暂停”，游戏将在遇到 LogError 时自动暂停。但请注意，只要抛出错误，它就会暂停。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-14T14:27:39.777

我一直将默认脚本编辑器（统一首选项 -> 外部工具 -> 外部脚本编辑器）更改为 Visual Studio。这使您可以使用断点和预处理器宏来简化调试。当您想开始调试时，请在 Visual Studio 中按 f5 将其连接到 unity，然后正常播放，如果遇到断点，则 Visual Studio 会接管。

您不必更改任何其他内容，也不必像现在这样不断地打开和关闭事物。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-07-30T22:57:13.460

UnityVS 现在正式成为 Microsoft 的一部分，可作为 vs 2010、12 和 13 的附加组件使用。这是 MSDN 博客文章链接到各个版本：http: [//blogs.msdn.com/b/visualstudio/archive/2014 /07/29/visual-studio-tools-for-unity-1-9.aspx](http://blogs.msdn.com/b/visualstudio/archive/2014/07/29/visual-studio-tools-for-unity-1-9.aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-14T16:30:46.273

最近，微软收购了 Visual Studio UnityVS 插件的创建者 SyntaxTree，所以它很快就会免费发布。UnityVS 是每个 Unity3D 开发人员必备的插件，因为它的生产力和在 Visual Studio 中调试 Unity3D 游戏的能力。

[http://unityvs.com/](http://unityvs.com/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-24T15:57:33.147

你知道 Unity 的“控制台”窗口吗？您应该可以从菜单/Windows/控制台打开它。它将充当调试器，在预编译和运行时为您提供错误和警告。如果我误解了这个问题，请告诉我。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-10-30T05:37:21.270

在 MonoDevelop 中，窗口顶部附近有一个按钮，上面写着“附加到统一”。如果在播放场景之前执行此操作，则在 MonoDevelop 中设置的任何断点都会在此处停止主线程。

如果您只是想检查值，Debug.log(message) 会将数据直接打印到统一控制台。

这两个都可以在常规播放模式下使用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-12-19T15:40:27.023

最简单的调试方法是使用 Debug.log(""); 但这确实会降低您的性能，那么您如何更轻松地调试呢？

好吧，这是答案：

要开始调试，请将鼠标按到编辑器的最左边缘（行号旁边），然后会出现一个红点，您刚刚创建了一个断点！ [![在此处输入图像描述](../Images/068ec9977779a40c60ce2c829fa601ba.png)](https://i.stack.imgur.com/1wDR1.png)

这暂时不会做任何事情，但是，如果您现在转到 Unity 并在您的编辑器窗口中按播放，将会发生一些很棒的事情......</p>

[![在此处输入图像描述](../Images/0cdc700bf6ced6cd33eaf5d005ba7306.png)](https://i.stack.imgur.com/Cv8IN.png)

在窗口的最底部，如果您打开了 locals 窗口（如果没有，请转到 View > Debug Windows > Locals），您将看到当前存在于本地实例中的所有变量及其在被击中的断点。

要继续执行应用程序，只需按 MonoDevelop 中的“播放”按钮。

您的脚本将继续执行（Unity 的编辑器将不再被冻结）。当然，在这种情况下，脚本将在下一帧再次命中断点。因此，只需左键单击 MonoDevelop 中的断点并再次单击 Play 按钮，它就不会再次执行断点。

**你可以用它做更多的事情，例如：**

使用断点，您可以使它们在满足某些条件时停止应用程序的运行。例如，假设您想检查 fSpeed 变量达到 10 时的值。为此，请按 MonoDevelop 中的 Stop 按钮，然后右键单击断点，然后按 Breakpoint Properties。

[![在此处输入图像描述](../Images/79d6bd304d04a495c6ab8af19960476f.png)](https://i.stack.imgur.com/Bfs1o.png)

将条件设置为“条件为真时中断”并将“条件表达式”设置为“fSpeed >= 10”，然后按 OK。

将编辑器重新附加到 Unity 并按下 Unity 中的“播放”按钮，当满足条件时，断点将触发并停止应用程序。

*关于使用条件断点的说明：它们会导致性能问题，因为它必须在每次运行时验证表达式。*

这通常应该比 debug.log(""); 至少如果这是你想要的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-02-28T09:40:23.200

我正在使用插件 UnityVS，它可以使用 Visual Studio 调试 Unity 项目。非常方便。

使用 UnityVS 进行谷歌搜索

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-10-04T20:42:02.750

`Debug.Log()`如果您的问题适合应用此方法，则在 Unity中进行调试的最佳方法。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-08-14T09:06:42.703

您可以使用 MS Visual Studio Community 查看并获得他们也在其网站上提供的 Unity 集成。我最近尝试过它，它很棒，您可以使用可用的最佳 IDE 之一获得几乎完整的调试功能。与 Unity 搭配使用，您可以获得一些不错的生产力提升，不仅在调试能力方面，而且在功能集方面。

如果您想查看它，这里是 IDE 社区版本的链接：[https ://www.visualstudio.com/en-us/products/visual-studio-community-vs.aspx](https://www.visualstudio.com/en-us/products/visual-studio-community-vs.aspx)

这里也是我提到的 Unity 集成的链接：[https ://www.visualstudio.com/features/unitytools-vs](https://www.visualstudio.com/features/unitytools-vs)

希望它有所帮助，一位开发人员将我从 Mono 转换过来，老实说，我对这种设置非常满意（除非某些 IDE 集成了“使其工作”按钮一劳永逸；））。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-02-16T14:57:26.683

借助`Unity 5.5`内置的 Visual Studio 工具，您只需单击一下即可附加 Unity 并开始调试

即之后`Edit > Preferences > External tools > External script editor > Visual studio`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-01-10T11:40:26.157

统一调试有两种方法，一种是通过日志，它基本上是 Unity 中的控制台，另一种是 Debugger，它是 VS 和 Mono 都支持。是的，您是对的，通过调试点检查 a 和 b 等的值是什么，这是非常糟糕的过程，所以我认为只使用最适合您的东西，我的意思是您不需要调试点，只需要知道a 和 b 的值只需记录它。当需要调试点时，您已经知道该方法。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-10T14:17:29.880

只需尝试使用要调试的 Visual Studio 打开 C# 脚本 使用 Visual Studio 2017 即可，只需使用调试器启动项目并在所需位置应用断点并运行项目。我认为它将解决您的问题并调试所需的代码

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-23T02:30:46.130

Unity 文档——[在 Unity 中调试 C# 代码](https://docs.unity3d.com/Manual/ManagedCodeDebugging.html)提供了在编辑器和播放器中调试 C# 代码的完整方法。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-01-15T19:17:26.823

我认为问题所在是一种启动“统一构建的游戏可执行文件”并将调试器附加到它的方法。
类似于...
使用 gcc 创建调试符号，启用 DEBUG 构建应用程序并使用 gdb 启动可执行程序以对其进行调试。这样您就可以在不使用 IDE 的情况下启动调试会话。但那是在 C 中使用 gcc ......在 C# 中，附加的调试器不需要调试符号来查看代码，它在虚拟机上运行。

这里有一个关于如何做到这一点的公开对话：
[https ://github.com/0xd4d/dnSpy/issues/393](https://github.com/0xd4d/dnSpy/issues/393<br)

一些不熟悉虚拟机语言的人的快速笔记。C# 在编译时会生成一种中间语言。与例如 C 语言相反，它产生机器代码，直接由 CPU 执行。在 C# 的情况下，这种中间语言称为公共语言（因为它对所有 .NET 语言如 VB.NET、C#.NET 和 C++.NET 都是通用的。这种中间语言不是由 CPU 直接执行，而是由虚拟机执行每个应用程序或进程实例化一次，称为CLR（Common Language Runtime）。这意味着大多数情况下，如果变量和方法没有被乱码替换（称为混淆），程序可以直接读取附加到可执行文件的调试器。

根据对话，unity 引擎不使用 .NET CLR，而是嵌入到引擎中的单独（可能修改的）CLR。他们确实描述了这样做的方法，但我认为使用 Unity 编辑器更安全、更容易。

无论如何，Unity 都是围绕编辑器构建的！例如，在编辑器上下文中，您可以在玩游戏时更改公共变量和引用，这不是“经典”编程方法。但它是一种经典的调试方法。

最后，像程序的线程这样的东西不是开源的，所以我怀疑任何外部工具都能够找到绕过代码的方法。即使它是纯公共语言，我也严重怀疑，因为如果它是纯 CL，则不需要在引擎中包含单独的（可能定制的）CLR。

在我看来，整个误解是由于 Unity 使用的语言不完全是 C#，而是一个看起来像 C# 的统一变体，它可能与 C# 兼容，但我不知道到什么程度。因此，您在 Unity 中编程的“CLR”实际上就是统一引擎本身。一个“CLR”专注于在许多平台上渲染游戏，而不是经典的 C# CLR。

关于其他答案：
- MonoDevelop 让您可以像使用任何其他 IDE 一样使用断点和预处理器宏。
- 至于使用日志的文本调试。当然这是可能的，但这是在“真正的调试”不可用时所做的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-03-24T18:16:49.297

你可以放一些 print() 或一些 idono

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-01-18T18:38:18.967

试过视觉工作室？在那里您可以将脚本附加到统一并调试它们。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-01-29T14:22:16.027

首先，您必须将 monodevelop 或 Visual Studio 中存在的 C# 代码附加到 Unity 调试器，然后在 IDE monodevelop 中按下播放按钮，然后再在 unity 上播放它。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-07-02T04:05:24.790

使用 debug.log("消息"); 用于调试

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-03-08T08:32:36.240

您可以使用运行按钮（看起来像左上角的播放按钮）连接到 Unity 编辑器进行调试，但如果您没有通过这种方式成功连接到 Unity，您可能需要检查是否启用了相应的插件在您的加载项管理器首选项中。

Windows：工具 > 插件管理器 > Unity > Mono Soft Debugger Support for Unity

OSX：Unity > Add-in Manager > Unity > Mono Soft Debugger Support for Unity

（选择并单击启用。）

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-08-04T16:13:13.900

我也喜欢在 Unity 编辑器中创建用于记录有用数据的快捷方式。例如记录我所有活跃成就的当前状态。

```
[MenuItem("My Game/Runtime debug/Achievement states")]
public static void LogAchievementStates ()
{
    foreach (AchievementState achievementState in Data.achievementStates)
    {
        Debug.Log ("Achievement " + achievementState.name + " is at " + achievementState.completion + "%");
    }
} 
```

在编辑器脚本中执行此操作将显示一个菜单按钮来运行某些操作。

# python - OpenCV - KMeans2 导致许多空簇

> ID：10775365
> 
> 赞同：0
> 
> 时间：2012-05-27T16:05:34.073
> 
> 标签：python, opencv, k-means

我正在使用 OpenCV 的（Python）kmeans2 函数对从一组图像中提取的一组 SURF 特征进行聚类。

```
cv.KMeans2(mat,CLUSTER_COUNT,labels,(cv.CV_TERMCRIT_ITER,100,1.0),centers = cent) 
```

我在一组大约 50,000 个功能上运行它，将我的 CLUSTER_COUNT 设置为 2000。但是我只得到 253 个非空集群。其余集群没有分配给它们的功能。

我不确定 OpenCV 的 K-Means 实现是什么样的，但我会认为当有一个空集群时，中心会被重新分配还是什么？

我调用它的方式有问题还是这是预期的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:14:22.760

也许改用[cv2.kmeans](http://docs.opencv.org/modules/core/doc/clustering.html?highlight=kmeans2#cv2.kmeans)更容易理解。如果问题仍然存在，请告诉我们。

# c# - 跨线程操作无效：控件“textBox1”从创建它的线程以外的线程访问

> ID：10775367
> 
> 赞同：210
> 
> 时间：2012-05-27T16:05:48.677
> 
> 标签：c#, multithreading, invoke, uart

我想使用 UART 将温度值从微控制器发送到 C# 接口并显示温度`Label.Content`。这是我的微控制器代码：

```
while(1) {
   key_scan(); // get value of temp
   if (Usart_Data_Ready())
   {
      while(temperature[i]!=0)
      {
         if(temperature[i]!=' ')
         {
            Usart_Write(temperature[i]);
            Delay_ms(1000);
         }
         i = i + 1;
      }
      i =0;
      Delay_ms(2000);
   }
} 
```

我的 C# 代码是：

```
private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
   txt += serialPort1.ReadExisting().ToString();
   textBox1.Text = txt.ToString();
} 
```

但出现异常“**跨线程操作无效：控制'textBox1'从创建它的线程以外的线程访问**”请告诉我如何从我的微控制器获取温度字符串并删除此错误！

* * *

## 回答 #1

> 赞同：348
> 
> 时间：2012-05-27T16:15:14.590

在您的`serialPort1_DataReceived`方法中接收到的数据来自另一个线程上下文而不是 UI 线程，这就是您看到此错误的原因。
要解决此问题，您必须使用 MSDN 文章中所述的调度程序：
[如何：对 Windows 窗体控件进行线程安全调用](https://docs.microsoft.com/dotnet/framework/winforms/controls/how-to-make-thread-safe-calls-to-windows-forms-controls)

因此，不要直接在`serialport1_DataReceived`方法中设置 text 属性，而是使用以下模式：

```
delegate void SetTextCallback(string text);

private void SetText(string text)
{
  // InvokeRequired required compares the thread ID of the
  // calling thread to the thread ID of the creating thread.
  // If these threads are different, it returns true.
  if (this.textBox1.InvokeRequired)
  { 
    SetTextCallback d = new SetTextCallback(SetText);
    this.Invoke(d, new object[] { text });
  }
  else
  {
    this.textBox1.Text = text;
  }
} 
```

所以在你的情况下：

```
private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
  txt += serialPort1.ReadExisting().ToString();
  SetText(txt.ToString());
} 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-04-05T10:12:49.183

我不知道这是否足够好，但我制作了一个静态 ThreadHelperClass 类并将其实现如下。现在我可以轻松设置各种控件的文本属性，而无需太多编码。

```
public static class ThreadHelperClass
{
    delegate void SetTextCallback(Form f, Control ctrl, string text);
    /// <summary>
    /// Set text property of various controls
    /// </summary>
    /// <param name="form">The calling form</param>
    /// <param name="ctrl"></param>
    /// <param name="text"></param>
    public static void SetText(Form form, Control ctrl, string text)
    {
        // InvokeRequired required compares the thread ID of the 
        // calling thread to the thread ID of the creating thread. 
        // If these threads are different, it returns true. 
        if (ctrl.InvokeRequired)
        {
            SetTextCallback d = new SetTextCallback(SetText);
            form.Invoke(d, new object[] { form, ctrl, text });
        }
        else
        {
            ctrl.Text = text;
        }
    }
} 
```

使用代码：

```
 private void btnTestThread_Click(object sender, EventArgs e)
 {
    Thread demoThread =
       new Thread(new ThreadStart(this.ThreadProcSafe));
            demoThread.Start();
 }

 // This method is executed on the worker thread and makes 
 // a thread-safe call on the TextBox control. 
 private void ThreadProcSafe()
 {
     ThreadHelperClass.SetText(this, textBox1, "This text was set safely.");
     ThreadHelperClass.SetText(this, textBox2, "another text was set safely.");
 } 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2012-11-26T19:27:42.770

你可以简单地做到这一点。

```
TextBox.CheckForIllegalCrossThreadCalls = false; 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2014-04-24T10:03:58.797

使用以下扩展并传递如下操作：

```
_frmx.PerformSafely(() => _frmx.Show());
_frmx.PerformSafely(() => _frmx.Location = new Point(x,y)); 
```

扩展类：

```
public static class CrossThreadExtensions
{
    public static void PerformSafely(this Control target, Action action)
    {
        if (target.InvokeRequired)
        {
            target.Invoke(action);
        }
        else
        {
            action();
        }
    }

    public static void PerformSafely<T1>(this Control target, Action<T1> action,T1 parameter)
    {
        if (target.InvokeRequired)
        {
            target.Invoke(action, parameter);
        }
        else
        {
            action(parameter);
        }
    }

    public static void PerformSafely<T1,T2>(this Control target, Action<T1,T2> action, T1 p1,T2 p2)
    {
        if (target.InvokeRequired)
        {
            target.Invoke(action, p1,p2);
        }
        else
        {
            action(p1,p2);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2014-10-22T11:28:09.073

与先前的答案相同，但添加了一个非常简短的内容，允许使用所有 Control 属性而不会出现跨线程调用异常。

**辅助方法**

```
 /// <summary>
    /// Helper method to determin if invoke required, if so will rerun method on correct thread.
    /// if not do nothing.
    /// </summary>
    /// <param name="c">Control that might require invoking</param>
    /// <param name="a">action to preform on control thread if so.</param>
    /// <returns>true if invoke required</returns>
    public bool ControlInvokeRequired(Control c,Action a)
    {
        if (c.InvokeRequired) c.Invoke(new MethodInvoker(delegate { a(); }));
        else return false;

        return true;
    } 
```

**示例使用**

```
 // usage on textbox
    public void UpdateTextBox1(String text)
    {
        //Check if invoke requied if so return - as i will be recalled in correct thread
        if (ControlInvokeRequired(textBox1, () => UpdateTextBox1(text))) return;
        textBox1.Text = ellapsed;
    }

    //Or any control
    public void UpdateControl(Color c,String s)
    {
        //Check if invoke requied if so return - as i will be recalled in correct thread
        if (ControlInvokeRequired(myControl, () => UpdateControl(c,s))) return;
        myControl.Text = s;
        myControl.BackColor = c;
    } 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-05-27T16:09:51.457

使用共享容器在线程之间传输数据。

# google-fusion-tables - 直接比较 Fusion Tables 地图显示中的两列值

> ID：10775376
> 
> 赞同：1
> 
> 时间：2012-05-27T16:07:16.140
> 
> 标签：google-fusion-tables

我有一个未列出的 Fusion Table，其中包含威斯康星县的选举数据样本和投票计数，我正在为选举之夜构建一个地图显示页面。我想根据哪个候选人的票数更高来有条件地设置县多边形的样式，但我似乎无法根据直接比较列值的 WHERE 子句进行任何样式设置。相反，默认样式生效，where 子句永远不会启动。

我对[FT“SQL-ish”语法](https://developers.google.com/fusiontables/docs/developers_reference#Select)的阅读使我认为它不允许直接比较两列的 WHERE 子句，所以也许这就是阻止我的原因……但是，伙计，我非常喜欢。有我缺少的技术吗？

候选人 1 的投票计数在“1_Vote_Count”中，候选人 2 在“2_Vote_Count”中。

```
 <script type="text/javascript">
     function initialize () {
        var map = new google.maps.Map(document.getElementById('map-canvas'), {
          center: new google.maps.LatLng(44.824708,-89.780273),
          zoom: 7,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          streetViewControl: false,
          mapTypeControl: false,
          zoomControl: true,
          zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
          },
          panControl: false,
        });

        var layer = new google.maps.FusionTablesLayer({
          query: {
            select: 'geometry',
            from: '173CovMDpzEwyBBtF2fwkxHB5nt6zETzBzG-3YLE',
            where: "Office_ID = 'G' AND FIPS_Code > 0"
          },
        styles: [{
            polygonOptions: {
              fillColor: "#00FF00",
              fillOpacity: 0.3,
              strokeWeight: 0.5
            }
          }, {
            where: "'1_Vote_Count' < '2_Vote_Count'",
            polygonOptions: {
              fillColor: "#DD0000"
            }
          }, {
            where: "'2_Vote_Count' < '1_Vote_Count'",
            polygonOptions: {
              fillColor: "#0000DD"
            }
          }]
        });

layer.setMap(map);

}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:15:28.150

没有您缺少的技术。正如 Eric 所说，我建议打开一个功能请求。

[http://code.google.com/p/fusion-tables/issues/list?q=Type%3DFeature_Request](http://code.google.com/p/fusion-tables/issues/list?q=Type%3DFeature_Request)

# cocos2d-iphone - Cocos2D字体渲染问题

> ID：10775378
> 
> 赞同：0
> 
> 时间：2012-05-27T16:07:48.240
> 
> 标签：cocos2d-iphone

观察到一个严重的 Cocos2D 字体相关问题

请看这张图片：

![在此处输入图像描述](../Images/002229207bb7a97abbfa598b17850eea.png)

在上图中，字体未正确呈现。我使用了 CCLabelBMFont。我该如何解决这个问题？

代码：

```
CCLabelBMFont *userName = [CCLabelBMFont labelWithString:PlayerNameStr  fntFile:@"MyFont.fnt"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:28:38.000

您需要在字形之间留出更多空间。您可以在位图字体编辑器中更改此设置，Glyph Designer 和 Hiero 都有。在 Glyph Designer 中，该设置称为 Spacing 并设置为 2。我猜您正在使用 Hiero，默认情况下此间距设置为 0。

# c# - PK Violation (of other entity) 添加插入新实体并设置对其他实体的引用时

> ID：10775389
> 
> 赞同：1
> 
> 时间：2012-05-27T16:09:50.457
> 
> 标签：c#, .net, entity-framework, exception-handling

我正在使用实体框架 4.3，并且我试图通过在创建新实体时设置导航属性来引用现有实体，但是当我调用 save EF 时抱怨我将导航属性设置为的表中存在 PK 冲突（即它正在创建一个新记录，而不是参考！）。

我如何附加到现有的 POCO 而不是引用它并让 EF 尝试创建新的数据库记录（但不仅仅是使用 ID，理想情况下我想引用来自另一个查询的实际实体）？

提前致谢，

克里斯

```
public class BusinessUnit
{
    public int BusinessUnitID { get; set; }
    public ExternalPlugin AccountsDataSourceModule { get; set; }
    public ExternalPlugin OptionalContactsDataSourceModule { get; set; }
}

public BusinessUnit NewBusinessUnit(string name, ExternalPlugin accountsModuleId = null, ExternalPlugin contactsModuleId = null)
{
    IUnitOfWork unitOfWork = UnitOfWorkFactory.CreateUnitOfWork();

    BusinessUnit unit = new BusinessUnit();
    unit.CompanyName = name;
    unit .AccountsDataSourceModule = accountsModuleId; // this causes a problem
    unit .OptionalContactsDataSourceModule = contactsModuleId; // as does this
    unitOfWork.BusinessUnitRepository.Insert(unit);

    unitOfWork.Save();
    return unit;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:47:11.973

您必须*将*现有实体附加到上下文：

```
BusinessUnit unit = new BusinessUnit();
unit.CompanyName = name;

unitOfWork.ExternalPluginRepository.Attach(accountsModuleId);
unitOfWork.ExternalPluginRepository.Attach(contactsModuleId);

unit.AccountsDataSourceModule = accountsModuleId;
unit.OptionalContactsDataSourceModule = contactsModuleId;
unitOfWork.BusinessUnitRepository.Insert(unit); 
```

...`unitOfWork.ExternalPluginRepository.Attach(ExternalPlugin plugin)`必须在哪里做：

```
context.ExternalPlugins.Attach(plugin); 
```

我希望所有存储库都使用相同的上下文实例。`Attach`告诉 EF 插件已经存在于数据库中，并避免插入这些实体。

**编辑**

如果您收到错误消息...

> 一个实体对象不能被多个 IEntityChangeTracker 实例引用。

...这意味着您有一个实体同时附加到多个上下文实例。在大多数情况下，您可以通过在不再需要上下文时始终处理上下文来避免这种情况。您的代码示例未遵循此良好做法。它应该看起来像这样：

```
public BusinessUnit NewBusinessUnit(string name,
    ExternalPlugin accountsModuleId = null,
    ExternalPlugin contactsModuleId = null)
{
    using (IUnitOfWork unitOfWork = UnitOfWorkFactory.CreateUnitOfWork())
    {
        BusinessUnit unit = new BusinessUnit();
        unit.CompanyName = name;

        unitOfWork.ExternalPluginRepository.Attach(accountsModuleId);
        unitOfWork.ExternalPluginRepository.Attach(contactsModuleId);

        unit.AccountsDataSourceModule = accountsModuleId;
        unit.OptionalContactsDataSourceModule = contactsModuleId;
        unitOfWork.BusinessUnitRepository.Insert(unit);

        unitOfWork.Save();

        return unit;
    }
} 
```

在`using`块的末尾，会自动调用的`Dispose`方法。`unitOfWork`要使其正常工作（以及编译），您需要`IUnitOfWork`从具体类派生接口`IDisposable`并在具体`UnitOfWork`类中实现它：

```
public interface IUnitOfWork : IDisposable
{
    // ...
}

public class ConcreteUnitOfWork : IUnitOfWork, IDisposable
{
    private MyDbContext _context;
    // I assume that you have a member for the DbContext in this class
    // ...

    // implementation of IDisposable
    public void Dispose()
    {
        if (_context != null)
            _context.Dispose();
    }
} 
```

# c++ - 保留向量值的副本，然后将其覆盖

> ID：10775398
> 
> 赞同：1
> 
> 时间：2012-05-27T16:11:00.840
> 
> 标签：c++

我有一些代码如下：

```
MyClass* a = new MyClass();
vector[0] = *a;

MyClass KeepCopy = vector[0];

//
//
vector gets changed
//
//

return KeepCopy 
```

现在向量然后去做很多事情并被覆盖。但是，我希望在函数结束时返回 KeepCopy 的值。但是，因为 vector[0] 没有指向其他东西，所以我认为我返回了错误的数据。

EDIT3：好的，这就是正在发生的事情。KeepCopy 被分配给向量 [0]，然后在代码中我对向量 [0] 进行处理。我在想 KeepCopy 仍然指向向量 [0] 的一个版本，但似乎 KeepCopy 仅包含在分配时值的副本。

稍后我将向量分配给另一个向量对象（我一次读取两行文本文件，向量包含一行，另一个向量对象包含第二行）。如何确保 KeepCopy 指向原始 vector[0] 元素（在我开始解析文本文件中的每一行，重新分配向量之前）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:15:22.093

为 MyClass 实现一个复制构造函数并复制该对象。不是指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T16:16:53.227

当您按值（而不是按指针/引用）存储对象时，更改`vector[0]`不会反映在 中，除非您在实例`KeepCopy`中共享指向同一包含对象的指针`MyClass`

如果是这种情况，您应该实现一个正确的复制构造函数，该构造函数对原始副本进行深度复制（而不是默认的浅拷贝，它只是盲目地复制指针的值）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T16:17:12.560

就像您所做的那样：`MyClass KeepCopy = vector[0];`将设置`KeepCopy`为原始对象的副本（通过其复制构造函数）。此副本与向量无关，因此不会受到修改向量的影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T16:52:55.300

如果我理解正确，您的函数中会发生以下步骤

1.  你用 vector[0] 做一些修改它的事情。
2.  您重新分配整个向量。

在第 1 步之后但在第 2 步之前的 vector[0] 的状态是您想要返回的东西。所以这就是你的代码中应该制作副本的地方。

```
MyClass foo()
{
    //
    // some stuff
    //

    MyClass* a = new MyClass();
    vector[0] = *a;

    //
    // vector[0] gets modified
    //

    // you want vector[0]'s value here, so this is where you should create the copy
    MyClass KeepCopy = vector[0];

    //
    // Whole vector gets reassigned
    //

    return KeepCopy
} 
```

# xml - xsl 中的分组

> ID：10775401
> 
> 赞同：1
> 
> 时间：2012-05-27T16:11:26.977
> 
> 标签：xml, xslt

我得到了这样的xml

```
<feature ufi="-1578440">
    <designation>PPLA</designation>  
    <administrative_division>06</administrative_division>
    <name_type>V</name_type>
    <full_name>Hobart Town</full_name>
    <sort_key>HOBARTTOWN</sort_key>
    <modified>2012-02-06</modified>
</feature>
<feature ufi="-1578440">
    <designation>PPLA</designation>
    <administrative_division>06</administrative_division>
    <name_type>N</name_type>
    <full_name>Hobart</full_name>
    <sort_key>HOBART</sort_key>
    <modified>2012-02-06</modified>
</feature> 
```

基本上，除了name_type之外，2个字段的信息是相似的。所以我想使用 xsl 分组生成类似这样的输出。

```
Hobart (also known as Hobart Town), PPLA, V, 2012-02-06 
```

任何人都可以建议我实现结果的简单方法。非常感谢

编辑：我想用 xsl 版本 1 来做，关键是 ufi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:02:50.857

不涉及分组，但这将完成工作（假设纯文本输出并忽略换行符，留作练习）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output method="text"/>

    <xsl:template match="feature[name_type='N']">
        <xsl:value-of select="full_name"/>
        <xsl:variable name="ufi" select="@ufi"/>
        (also known as <xsl:value-of select="../feature[name_type='V' and @ufi=$ufi]/full_name"/>)
        , <xsl:value-of select="designation"/>, <xsl:value-of select="name_type"/>, <xsl:value-of select="modified"/>
    </xsl:template>

    <xsl:template match="feature"/>
</xsl:stylesheet> 
```

不过，使用 xslt 2.0 会好得多..

# java - 如何存储来自 textFields 的信息？

> ID：10775402
> 
> 赞同：1
> 
> 时间：2012-05-27T16:11:50.253
> 
> 标签：java, applet, jtextfield

现在，我只是在测试以确保按钮工作......但这是我的小程序代码，它使用帕斯卡三角形扩展二项式！我有实际计算部分的方程式，我只需要知道如何存储来自`JTextFields`！谢谢！

```
import java.applet.Applet;     
import java.awt.*;     
import java.awt.event.*;     
import java.applet.*;     
import javax.swing.*;   
import java.text.DecimalFormat;  
import java.util.ArrayList;  
import javax.swing.Action; 

public class BinomialExpander extends JApplet implements ActionListener 
{   
  JLabel welcome;    
  JLabel directions;  
  JLabel example;    

  JLabel instructions;    
  JLabel startOfBinomial;    
  JLabel plusSign;    
  JLabel forExponent;    
  JLabel endOfBinomial;    

  JTextField txtFirst;    
  JTextField firstVar;    
  JTextField txtSecond;    
  JTextField secondVar;    
  JTextField exp;    

  JLabel lblExpanded;     
  JLabel outputExpanded;      
  double degreesFahrenheit;     
  FlowLayout layout;    
  Timer timer;    

  Button compute;    

  private int[] pascal1 = {1,1};    
  private int[] pascal2 = {1,2,1};    
  private int[] pascal3 = {1,3,3,1};    
  private int[] pascal4 = {1,4,6,4,1};    
  private int[] pascal5 = {1,5,10,10,5,1};    
  private int[] pascal6 = {1,6,15,20,15,6,1};    
  private int[] pascal7 = {1,7,21,35,35,21,7,1};    
  private int[] pascal8 = {1,8,28,56,70,56,28,8,1};    
  private int[] pascal9 = {1,9,36,84,126,84,36,9,1};    
  private int[] pascal10 = {1,10,45,120,210,120,45,10,1};    

  public void init()     
  {    
      Container c = getContentPane();     
      c.setBackground(Color.cyan);    

      layout = new FlowLayout();    
      layout.setAlignment(FlowLayout.LEFT);    
      c.setLayout(layout);    
      setSize(500,175);    

      welcome = new JLabel("Welcome to the Binomial Expander Applet!");    
      directions = new JLabel("Enter binomial in the form: '(number)(variable) + (number)(variable)^exponent'.");    
      example = new JLabel("Example: (4a + 2)^2.");    
      // instantiate JLabel object for Degrees Fahrenheit
      instructions = new JLabel("Enter the first number of your binomial(if there is a variable, add it into the second box):");
      // instantiate JTextField object for the degrees fahrenheit
      startOfBinomial = new JLabel(" (");
      txtFirst = new JTextField(4);
      // instantiate JLabel object for Degrees Celesius
      firstVar = new JTextField(4);
      plusSign = new JLabel(" + ");
      txtSecond = new JTextField(4);
      secondVar = new JTextField(4);
      endOfBinomial = new JLabel(")");
      forExponent = new JLabel("^");
      forExponent.setFont(new Font("Times New Roman", Font.BOLD, 9));
      exp = new JTextField(2);
      compute = new Button("Compute!");
      compute.addActionListener(this);
      lblExpanded = new JLabel("Your expanded binomial is: ");
      // JLabel to display the equivalent degrees Celsius
      outputExpanded = new JLabel("");
      c.add(welcome);
      c.add(directions);
      c.add(example);
      c.add(instructions);
      c.add(startOfBinomial);
      //CALL the addActionListener() method on the JTextField object 
      // for the degrees Fahrenheit
      txtFirst.addActionListener(this);
      // Add the textbox the celsius label and output label
      c.add(txtFirst);
      c.add(firstVar);
      c.add(plusSign);
      c.add(txtSecond);
      c.add(secondVar);
      c.add(endOfBinomial);
      c.add(forExponent);
      c.add(exp);
      c.add(compute);
      c.add(lblExpanded);
      c.add(outputExpanded);
     // timer = new Timer(1, this);
     // timer.start();
  }

  public void actionPerformed(ActionEvent event)     
  {    
      if (event.getSource() == compute)      
      {    
          outputExpanded.setText(expand());    
      }    
}
  public String expand()    
  {    
     String x = "callingComputing";    
     return x;    
  }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:12:48.117

你的文本字段。[getText()](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/JTextComponent.html#getText%28%29)返回一个字符串，您可以像使用任何其他字符串一样使用它，将它存储在一个数组中，教它唱歌、飞行和享受生活。相反，您可以使用 yourTextField.setText() 在您的 JLabel、文本字段等中显示内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T16:32:10.820

[`JTextField`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextField.html)extends [`JTextComponent`](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html)，它具有处理文本操作的 API。

正如其他答案所建议的，使用 setText 将当前文本替换为新文本。

另请阅读官方教程以了解[如何使用文本字段](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T17:10:00.523

```
JTextField txtName = new JTextField();
JButton btn = new JButton(); 
```

在执行的操作方法中添加这个

```
String name = txtname.getText(); 
```

此语句返回在您单击按钮之前在文本字段中输入的文本

您创建一个将存储数据的类，并在 Frame 类中创建一个对象，即为数据类提供 GUI 的类，然后在框架的提交按钮的动作侦听器中分配getText() 将字符串返回到对象的字段

例如：您想从文本字段中输入姓名和年龄，创建一个 Person 类

```
public class Person{
public String name;
public int age;
} 
```

现在创建一个 GUI 类

```
public PersonFrame extends JFrame{

public person;
public PersonFrame(){
person = new Person();
JTextField txtName = new JTextField();
JButton btn = new JButton();

btn.addActionListener(new ActionListener(){
public void actionPerformed(ActionEvent e){
  person.name = txtName.getText();
  person.age = Integer.parseInt(txtAge.getText()); //as the textfield returns a String always
}
});
} 
```

并避免使用

```
 if (event.getSource() == compute)      
      {    
          outputExpanded.setText(expand());    
      } 
```

如果你有 100 个按钮，那么编写嵌套的 if-else 语句来检查哪个按钮生成了事件是愚蠢的！

请记住，swing 是为提供用户界面而设计的，您需要一个类的对象来存储数据！对于 java 教程，请访问[这里](http://mytechbooks.blogspot.in)

# python - 将字符串添加到数据库 Python 后出现错误的字母

> ID：10775403
> 
> 赞同：2
> 
> 时间：2012-05-27T16:11:53.033
> 
> 标签：python, mysql, text

通过 Python 在我的 mySQL 数据库中添加大约 6k 行后，有些字母是错误的（波兰字母），例如 Å‚ 代表 ł 和 Å¼ 代表 ż 等。我该如何修复它？我的python代码是：

```
 # -*- coding: utf-8 -*-
import MySQLdb
import string
import codecs
file = codecs.open("----", 'r', 'utf-8')
db = MySQLdb.connect(host="-----", port=3306, user="-----", passwd="------", db="----")
cursor = db.cursor()
for line in file:
        lines = string.replace(line, "'", '"')
        cursor.execute("INSERT INTO Logs (Text) VALUE ('%s')"% lines.encode("utf-8"))
db.close()
print("done") 
```

运行此代码后，它可以正常工作，但是在 PhpMyAdmin 中，有错误的字母。数据库中的编码是 UTF-8，文件是 ANSI 为 UTF-8（来自记事本++）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:19:23.027

在 中指定字符集`MySQLdb.connect()`：

```
db = MySQLdb.connect(host="-----", port=3306, user="-----",
    passwd="------", db="----", charset='utf8') 
```

# android - 移动后找不到android资源

> ID：10775404
> 
> 赞同：0
> 
> 时间：2012-05-27T16:11:53.767
> 
> 标签：android, eclipse

我正在用 Eclipse 创建一个 Android 键盘。我想实现当你长按一个键时出现的弹出键盘。

因此我分配了

```
android:popupKeyboard="@xml/a_popup" 
```

属性键标签并在“res/xml/a_popup.xml”下创建了一个弹出键盘

这很好用，但是因为我想要很多不同的弹出式键盘并且我不希望它们都直接位于“res/xml/”中，所以我将“a_popup.xml”文件移动到“res/xml/popup_keyboards” /"

但是现在我不能再从我的 popupKeyboard-property 中引用 xml 文件了

```
android:popupKeyboard="@xml/popup_keyboards/a_popup" 
```

如果这样做，我会收到消息，即没有与给定名称匹配的资源。尽管我清理了项目，但 R.java 文件中也没有条目。

我还尝试通过 ID 引用弹出式键盘，但每次长按按钮时都会出现 ResourcesNotFound 异常。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T16:24:25.067

您不能在 Android 的资源中使用嵌套列表。“res/xml/popup_keyboards/” - 错了，你不能在 xml 目录下创建目录，只能创建文件。

# ruby-on-rails-3 - Rails 3 内联错误

> ID：10775407
> 
> 赞同：2
> 
> 时间：2012-05-27T16:12:11.440
> 
> 标签：ruby-on-rails-3

我是 rails 3 的新手。我正在使用引导程序，我想在无效字段旁边显示验证错误。

这是代码

```
<div class="control-group <%= @pet.errors.has_key?(:nick) ? "error": "" %>">
        <%= f.label :nick, :class => 'control-label' %>
        <div class="controls">
            <%= f.text_field :nick, :class => 'text_field' %>
            <% unless !@pet.errors.has_key?(:nick)%>
            <span class="help-inline"><%= @pet.errors[:nick]%></span>
            <%end%>
        </div>
    </div> 
```

我的问题是`<%= @pet.errors[:nick]%>`返回

```
["no puede estar en blanco"] 
```

并且必须是公正的

```
no puede estar en blanco 
```

在这里你有一张图片

[http://img848.imageshack.us/img848/8263/inlineerror.jpg](http://img848.imageshack.us/img848/8263/inlineerror.jpg)

有什么方法可以在没有方括号和引号的情况下获取错误消息？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T16:15:02.497

你可以试试：

```
<span class="help-inline"><%= @pet.errors[:nick].join(", ")%></span> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T06:37:36.863

字符串周围的方括号表示它是一个数组。你也可以通过写作去掉括号和引号

```
<%= @pet.errors[:nick][0]%> 
```

# javascript - 使用javascript更改输入值

> ID：10775408
> 
> 赞同：-2
> 
> 时间：2012-05-27T16:12:27.757
> 
> 标签：javascript, html

我正在为一个 uni 主题做作业，并且在使用 javascript 时遇到了一些问题。我希望能够根据另一个字段的值更改输入字段的值。简而言之，目的是在一个字段中输入一个产品的数量，并让其旁边的字段更改以显示购买该数量产品所需的总金额。

当我运行我的 html 时，输入的数量不会改变成本字段的值，我认为我的 javascript 一定有问题。

这是我的 javascript 函数的副本，以及在其中执行的相关 html。

脚本：

```
function calcRowWash(){ 
    var theForm = document.forms["orderform"];
    var x = theForm.getElementById("quantc").value;
    var quantity = 0;
    if(x.value!=""){
        quantity = parseInt(x.value);
    }
    var totalC = (quantity*0.30);
    document.getElementById("totc").value = totalC;
    return;
} 
```

HTML：

```
<td width = "90px" align ="left"><input type = "text" id ="quantc" name = "quantWash" size = "5" tabindex = "13" onblur="calcRowWash()"/></td>
<td width = "90px" align ="left"><input type = "hidden" id ="totc" name = "washtotal" size = "5" tabindex = "14" value=""/></td> 
```

谢谢您的帮助！。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-04T19:31:30.440

```
function calcRowWash(){ 
    var theForm = document.forms["orderform"];
    var x = theForm.getElementById("quantc").value;
    var quantity = 0;

    // Check if it is not empty
    if(x.value != ""){
        // Check if it is a valid number
        if(x / x == 1){
            quantity = parseInt(x.value);
        }
    }
    var totalC = (quantity * 0.30);
    document.getElementById("totc").value = totalC;
} 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T16:56:52.517

尝试使用此代码

```
 function calcRowWash() {
        var x = document.forms[0]['quantc'].value;
        var quantity = 0;
        if (x != "") {
            quantity = parseInt(x);
        }
        var totalC = (quantity * 0.30);
        document.forms[0]['totc'].value = totalC.toString();

    } 
```

Html 标记，我更改了文本框的隐藏类型，它对我有用。

```
 <td width = "90px" align ="left"><input type = "text" id ="quantc" tabindex = "13" onblur="calcRowWash()"/></td>
 <td width = "90px" align ="left"><input type = "text" id ="totc" tabindex = "13"/></td>  </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T16:16:46.770

```
var theForm = document.forms["orderform"]; 
var x = theForm.getElementById("quantc").value; 
```

这是多余的。ID 在整个文档中是唯一的，所以这就足够了：

```
var x = document.getElementById('quantc'); 
```

另请注意，我删除了`.value`- 这是问题所在，因为您随后尝试获取价值......的价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T16:24:17.340

这行得通。

```
calcRowWash = (function(){
    var x = document.getElementById("quantc");
    var quantity = 0;

    if (x.value!="") quantity = parseInt(x.value);

    var totalC = (quantity*0.30);
    document.getElementById("totc").value = totalC;

}); 
```

[JSF](http://jsfiddle.net/Rfsrj/1/)中。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-27T16:21:00.793

```
<form name="myForm" action="#" method="POST">
   <input type = "text" id="quantc" name = "quantWash" size = "5" tabindex = "13"   onblur="calcRowWash()"/>
   <input type = "hidden" id ="totc" name = "washtotal" size = "5" tabindex = "14" value=""/>
</form>

function calcRowWash(){ 
   var quantity = document.myForm.quantWash.value; 
   var price = 10.0;
   document.myForm.washtotal.value = quantity * price;
} 
```

该函数不包含解析内容。我只想展示如何读取和设置两个输入字段的值。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-27T16:17:30.550

您可以使用此 JavaScript 代码：

```
var inp = document.getElementById("inp"); // getting the Input ID
function change_value() {
    inp.value = 'Your Value'; // <-- value 
} 
```

您可以添加事件：

```
inp.onfocus = change_value;
inp.onblur = another function with another action; 
```

祝你好运利亚姆，祝你有美好的一天。

# iphone - 如何将 CoreImage 过滤器应用于视图？

> ID：10775409
> 
> 赞同：1
> 
> 时间：2012-05-27T16:12:38.537
> 
> 标签：iphone, ios, ipad, core-image

有没有一种简单的方法可以将 CoreImage 过滤器应用于视图的内容？例如使视图看起来模糊？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:40:16.323

您可以将 UIView 转换为 UIImage，然后在其上应用 CoreImage 过滤器。

您可以使用以下代码对其进行转换..

```
+ (UIImage *) imageWithView:(UIView *)view
{
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
    [view.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return img;
} 
```

[来源](https://stackoverflow.com/a/4334902/919545)

# ios - 如何在 iOS 中存储游戏内货币

> ID：10775410
> 
> 赞同：3
> 
> 时间：2012-05-27T16:12:42.487
> 
> 标签：ios, core-data, nsuserdefaults

我正在创建一个带有游戏内货币的 iOS 应用程序。存储游戏内货币的最佳方式是什么？我正在寻找越狱者无法访问/更改的东西、持久的东西和快速的东西。

我研究了 Core Data，也许还有 NSUserDefaults。有人可以建议最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:01:23.383

我的建议是遵循 iTukker 上面的建议并将它们存储在钥匙串中。

但我想添加一些额外的信息：

理论上，您在本地存储或计算的任何内容（即在设备中）都可能被篡改。没有任何解决方案可以为您提供服务器端计算和存储这些值的安全级别。即便如此，总有机会通过其他方式欺骗服务器，让您获得更多奖励。

我的意思是你必须寻找“足够好”而不是完全安全的东西。什么是“足够好”，取决于你。

# python - 使所有变量全局化

> ID：10775411
> 
> 赞同：6
> 
> 时间：2012-05-27T16:12:46.303
> 
> 标签：python, variables, global-variables

我的 Python 脚本中有一个函数，其中创建了多个变量，我想在其他函数中使用它们。我想用`global`这个，但我认为这样做是不正确的。

那么谁能告诉我在一个函数中为其他函数创建变量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T16:14:20.957

将变量组织成一个[类](http://docs.python.org/tutorial/classes.html)。在一个函数中实例化该类，然后将该实例传递到您需要的任何地方。

经验法则：如果在某些时候使某些东西全球化似乎是一个很好的解决方案，那就不要这样做。总有更好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T16:23:10.217

您可以创建一个“命名空间”对象——一个用作命名空间的对象，以保持您的全局命名空间清晰：

```
class namespace():
    pass

global_data=namespace()

def add_attributes(obj):
    obj.foo="bar"

add_attributes(global_data)
print (global_data.foo)  #prints "bar" 
```

但是，这仅比使用 global 关键字稍微好一点。正如保罗所说，你真的很想在这里上课。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T16:30:12.820

将变量声明为函数的属性。

```
def f1():
    f1.a=100
    f2.b=200

def f2():
    print(f1.a,f2.b)

f1()
f2() 
```

**输出：**

```
100 200 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T16:19:20.740

这可能是实现类的好地方。这有很多优点。 [请参阅教程中的类](http://docs.python.org/tutorial/classes.html)。

# c# - Windows Azure 上具有多个实例的会话变量

> ID：10775419
> 
> 赞同：2
> 
> 时间：2012-05-27T16:14:50.347
> 
> 标签：c#, .net, asp.net-mvc-3, azure, azure-sql-database

我正在开发一个 MVC3 项目和 SQL Azure 数据库。当我部署超过 1 个实例时，会话变量会出现一些问题。

更清楚地说，我将表的结果存储在会话变量中并将结果传递给模型，用户可以修改和操作数据，直到他单击“保存”按钮。

当用户单击“保存”时，我从模型中获取新值并将它们传递给 BLL 和 DAL 层以更新数据库。

我不知道这是否是正确的解决方案！但是客户端不会在每次数据更改时都访问数据库。

请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T16:46:21.637

您遇到的问题是由于会话数据本地存储在服务器上（这被 ASP.NET 称为 InProc）。当您使用多个实例时，这些数据不会在实例之间共享。为了实现这一点，您有几个选择：

*   将会话数据存储在 SQL Azure 数据库中。
*   将会话数据存储在 Azure 的表存储中。
*   将会话数据存储在 Azure 的缓存服务中（可能是最快的，但也是最昂贵的）。

这里有更多信息：[http ://acloudyplace.com/2012/02/managing-session-state-in-windows-azure-what-are-the-options/](http://acloudyplace.com/2012/02/managing-session-state-in-windows-azure-what-are-the-options/)

# javascript - 样式属性分配上的“分配中的左侧无效”

> ID：10775424
> 
> 赞同：4
> 
> 时间：2012-05-27T16:15:29.397
> 
> 标签：javascript, operator-precedence

评估此行时会出现错误：

```
color && el.style.color = color; 
```

这是怎么回事？DOM 2 级属性现在是“只读”的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T16:22:40.140

问题是[优先级](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)，你需要括号：

```
function log(msg, color) {
    var el = document.createElement('p');
    el.innerText = msg;
    document.getElementById('log').appendChild(el);
    color && (el.style.color = color);
} 
```

`&&`比没有括号的优先级更高`=`，因此您最终会尝试分配给表达式（例如，它有效地读取`(color && el.style.color) = color;`），这当然是您做不到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T16:20:17.660

我同意 Mark Linus 的观点，尽管您也可以将代码重写为

```
color && (el.style.color = color) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-13T21:04:54.023

如果您使用“ **?.** ”可选链运算符，则必须将其删除。

例子：

```
//wrong
el?.style?.color = color;

//ok
el.style.color = color; 
```

# c# - 查找 AR 标记角之间的距离

> ID：10775428
> 
> 赞同：0
> 
> 时间：2012-05-27T16:15:56.690
> 
> 标签：c#, math, xna, computer-vision

到目前为止，我的流程如下：

标记是已知大小的方形标记，示例如下：

![在此处输入图像描述](../Images/cd04076c9a813b8211dce00b5f653a15.png)

1.  检测标记
2.  [使用POSIT](http://www.cfar.umd.edu/~daniel/daniel_papersfordownload/CoplanarPts.pdf)获取标记相对于相机的平移 + 旋转- 结果是相机坐标空间中矩阵的变换矩阵。

现在我试图找到两个标记的相关角之间的距离（以毫米为单位）。下面是一个例子：

![在此处输入图像描述](../Images/588011ba59072c57e02ca38cdf8898a2.png)

距离我的意思是欧几里得距离（sqrt（x^2 + y^2 + z^2））。

我认为这应该是可能的，因为我有 mm 距离的参考（任何标记的边缘都是已知的 mm 距离），但我不确定如何从我拥有的两个变换矩阵中得到这个。

编辑：

到目前为止，我已经设法通过将第二个变换矩阵乘以第一个变换矩阵并查看结果的平移来获得标记中心之间的相对距离。

我想我可以通过获取法线和点来获取每个标记的平面。从那里我应该能够通过查看 2D 点如何与该平面相交来获得角的 3d 坐标，并且从那里其余的应该很容易。我不完全确定如何获得标记的法线以及如何计算出表示角的 2D 坐标与平面相交的点。

额外信息：

*   使用 XNA 和 C#
*   使用 AForge.net 进行视频输入和标记检测。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:44:22.420

为了计算简单，我假设标记在 XY 平面上。否则，您必须进行一些投影才能使相机位置进入标记平面。

给定平移矩阵，您应该能够定义相机位置。我们将尝试找到这些点坐标之间的绝对差

假设 pC(xc,yc) 是相机位置，pA(xa,ya) 是第一个标记位置，pB(xb,yb) 是第二个标记位置。

lAC A 到相机的绝对距离，已知

lBC B 到相机的绝对距离，已知

lAB B 和 A 之间的绝对距离

dAC(dcax,dcay) 相机与 A 之间的曼哈顿距离，

dBC(dcbx,dcby) 和 dAB(dabx,daby) 也是如此。

dcax = sqrt(lAC^2 - (xc-xa)^2)

dcay = sqrt(lAC^2 - (yc-ya)^2)

dcbx = sqrt(lBC^2 - (xc-xb)^2)

dcby = sqrt(lBC^2 - (yc-yb)^2)

dabx = abs(dcbx-dcax)

daby = abs(dcby-dcay)

LAB = sqrt(dabx^2 + daby^2)

![图片](../Images/5df163220023459420ca7c835a3d501e.png)

Ps：我已经很久没有这样做了，希望再次检查:)

# paypal - IPN 中的 PayPal 金额_x？

> ID：10775434
> 
> 赞同：1
> 
> 时间：2012-05-27T16:16:54.633
> 
> 标签：paypal, paypal-ipn

从 PayPals IPN 提交回来的**amount_x** （商品价格）的变量名称是什么？我到处搜索，但在 IPN 中找不到这个项目价格变量的名称？！

我可以得到它：

```
$_POST['mc_gross_'.$i] / $_POST['quantity'.$i] 
```

但我不确定，因为四舍五入等。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-27T16:25:10.570

$_POST['mc_gross'] 是支付的总金额。您想要单个商品的价格吗？

# node.js - 使用 npm 安装包的目录

> ID：10775453
> 
> 赞同：4
> 
> 时间：2012-05-27T16:19:49.070
> 
> 标签：node.js

我刚开始使用nodejs。我已经安装了 nodejs 和 npm。现在，我想安装一些包，比如 mongodb 和 express。由于我在 cmd 中的默认目录路径是`C:\>Users\administrator`，我是否需要将当前文件夹作为 nodejs 文件夹才能运行`npm install express/coffee-script`，或者我可以在上述默认目录路径下运行此命令？

顺便说一句，我总是看到别人提供的 npm install 命令以美元符号开头，但我只能使用没有美元符号的命令。那么美元符号代表什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T16:27:04.753

默认情况下，npm 将以本地模式运行，并将脚本安装到`./node_modules`. 如果您需要`require`脚本，这非常好，就像您将使用 Express 一样。

使用该选项调用它`-g`会全局安装它，无论节点安装在何处（通常在 Linux 上，在 /usr/local 中。这对于打算使用 shell 运行的包（例如，Supervisor）非常有用。

通常，如果您想在 下开发 node.js 应用程序`C:\foo\bar\myapp`，您`npm`将从那里运行。

仅供参考，该`$`符号是一般指示，表示以下命令旨在在命令行上运行。

# signalr - 如何向客户端发送带有信号器的消息？

> ID：10775457
> 
> 赞同：0
> 
> 时间：2012-05-27T16:20:26.990
> 
> 标签：signalr

我想为我的 clint 浏览器网站使用 signalR，以便在添加新订单时它可以从服务器接收消息。所以我希望它对任何浏览器都没有触发的服务器端事件做出反应。

网站上有多个用户。当在他的服务器上为他下新订单时，应该通知用户。我如何仅通知特定用户，并通过添加用户的方法执行此操作？

有没有类似的代码：

```
var chat=new Chat();
chat.Send("hihi"); 
```

放在 AddOrder 方法中，用

```
public class Chat : Hub
{
    public void Send(string message)
    {
        // Call the addMessage method on all clients     
        Clients.refresh(message);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:01:59.497

您可以覆盖默认客户端 ID（用于标识用户浏览器窗口）并替换为您自己的。您的客户 ID 将来自您的会员提供商。

创建一个新类并实现 IConnectionIdGenerator。

```
public class UserIdClientIdFactory : IConnectionIdGenerator
{
    public string GenerateConnectionId(IRequest request)
    {
        return Guid.NewGuid().ToString();
    }
} 
```

上面的方法只是创建了一个新的 Guid，但您会从您的会员提供商那里返回客户 ID。

然后您需要使用 SignalR dependencyresolver 注册这个新类，因此在 global.asax 文件的 Application_Start 方法中添加以下行

> GlobalHost.DependencyResolver.Register(typeof(IConnectionIdGenerator), () => new UserIdClientIdFactory());

下新订单后，您将获得特定客户并向他们广播消息，例如：

```
 //clientId matches the user id from you membership provider.

    var clients = GlobalHost.ConnectionManager.GetHubContext().Clients;
    clients[clientId].yourClientSideCallBackMethodGoesHere(someValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:00:23.810

您必须`Context.ConnectionId`为所有连接的用户存储，将其绑定到您的网站用户，然后使用`Clients[connectionId].addMessage(data);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:27:29.217

一种方法是保存一组用户（网站用户），每个用户都与一个连接 ID 配对。然后，您可以使用 SignalR 事件 OnConnected / OnDisconnected 将用户弹出和弹出此列表。

例如

```
public override Task OnConnected()
{
     // Add users here with Context.ConnectionId
}

public override Task OnDisconnected()
{
     // Remove users from collection here by identifying them with Context.ConnectionId
} 
```

# php - 找出最近的用户 MySQL

> ID：10775458
> 
> 赞同：5
> 
> 时间：2012-05-27T16:20:43.137
> 
> 标签：php, mysql, geolocation

我有一个用 和 列命名的数据库，`users`我想计算出距离 50 公里半径范围内的最近用户（表中的用户）到 . 提供的某个纬度和经度。`latitude``longitude``users``$_POST`

你能告诉我我该怎么做吗？是否有某个数学函数需要使用，或者 MySQL 中的某个函数之类的`latitude_compare()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:54:21.257

你可以这样做：

```
SELECT *,

(ACOS((SIN(RADIANS(ref_latitude))*SIN(RADIANS(latitude))) + 
(COS(RADIANS(ref_latitude))*COS(RADIANS( latitude ))*COS(RADIANS( longitude)
-RADIANS(ref_longitude)))) * 6371) AS distance

FROM table
ORDER BY distance ASC 
```

A点：ref_latitude ref_longitude

B点：纬度经度

我的纬度/经度值以度为单位，如下所示：

德累斯顿：13.721067614881400 / 51.060033646337900

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T07:09:37.683

这是我一直在使用的代码，以英里为单位。它选择给定半径内的所有纬度和经度。

```
$q = "SELECT * ( 3959 * acos( cos( radians($current_lat) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians($current_lng) ) + sin( radians($current_lat) ) * sin( radians( lat )))) AS distance FROM users HAVING distance < $radius"; 
```

# matlab - 在 MATLAB 中通过二进制训练数据训练决策树

> ID：10775460
> 
> 赞同：0
> 
> 时间：2012-05-27T16:21:12.987
> 
> 标签：matlab, machine-learning, classification, decision-tree

我想在 MATLAB 中为二进制数据训练决策树。这是我使用的数据示例。traindata <87*239> [包含 239 个特征的数据数组]

```
1 0 1 0 0 0 1 1 0 0 1 0 1 0 1 1 1 1 1 0 0 0 1 1 0 ... [till 239]
1 1 1 0 0 0 1 0 0 0 1 0 1 0 1 1 0 0 1 0 0 0 1 0 1 ... [till 239]
.... 
```

问题是该数据对应于一个只有是/否选项的表单。表格的结果也是二元的，意思是 patinet 是否患有某种医学疾病！我们使用了分类树，分类器向我们显示了双数。例如，它根据 x137 值是否大于 0.75 来分支第一个节点！由于我们的数据中没有 0.75，并且它没有是/否的含义，我们希望使用最适合我们工作的决策树。对我们来说最好的决策树是基于布尔变量而不是双变量训练的决策树。它还理解数据不是连续的，例如，而不是上面的表示，显示 x137 是是或否（1 或 0）。有人可以帮我弄这个吗？如果布尔决策树不适用，我也很欣赏将我们的数据映射到双变量和特征的解决方案。我目前在 matlab 中使用 classregtree，其中 <87*237> 作为训练，<87*1> 作为结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:37:00.987

`classregtree`有一个可选的输入参数`categorical`。使用此选项，您可以传入一个向量，指示哪些输入变量是分类变量（在您的情况下，此向量将为 1x239，全为 1）。然后，决策树应该包含是/否决策，而不是数字阈值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:57:43.370

在 classregtree 的帮助下：

*t = classregtree(X,y) 创建一个决策树 t，用于预测响应 y 作为 X 列中的预测变量的函数。X 是一个 n×m 的预测变量值矩阵。如果 y 是 n 个响应值的向量，则 classregtree 执行回归。如果 y 是分类变量、字符数组或字符串元胞数组，则 classregtree 执行分类。*

在您的情况下，y 的类型是什么？在您的情况下，classregtree 似乎正在做回归，但您想要分类。所以，y 应该是一个分类变量。

编辑：要使您的 y 分类，您可以尝试“名义（y）”。

# windows - 为 Windows 制作应用程序：使用什么开发平台？

> ID：10775465
> 
> 赞同：1
> 
> 时间：2012-05-27T16:22:55.583
> 
> 标签：windows, macos

我的任务是为 Windows 和 Mac 创建应用程序。不是一个复杂的应用程序 - 它必须使用简单的表单从用户那里收集数据，然后使用 XML 将数据保存到服务器/从服务器检索数据。

自 90 年代后期以来我一直专注于 Web 开发，所以我使用的最后一个 Windows 平台是 Delphi/Pascal 和一个可爱的可视化 UI 编辑器，所以现在我已经完全脱离了趋势。

问题是可以使用哪个平台（开源或免费）来创建具有 Windows 原生 UI 的应用程序？然后必须将该应用程序移植到 Mac。Ruby 可能是一种偏好，但使用或学习其他语言对我来说不是问题。

如果该应用程序具有最小的安装大小和最少的先决条件，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:31:10.010

我会建议Qt。 [http://qt.nokia.com/](http://qt.nokia.com/)

通过使用它，您的应用程序将可移植到所有平台（Win/Mac/Linux），您还将获得一个良好的 IDE + 调试环境。

库可用于：

```
Qt libraries 4.8.2 for Windows (minGW 4.4)
Qt libraries 4.8.2 for Windows (VS 2008)
Qt libraries 4.8.2 for Windows (VS 2010B)
Qt libraries 4.8.2 for Linux/X11 
Qt libraries 4.8.2 for Mac
Qt libraries 4.8.2 for embedded Linux 
Qt libraries 4.8.2 for Windows CE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T20:42:45.443

[`Delphi XE2`](http://www.embarcadero.com/products/delphi)支持 Windows、Mac 和 iOS 的原生开发，这个 IDE 不是免费的，但是你可以试试这个[`Delphi XE2 Starter`](http://www.embarcadero.com/products/delphi/product-editions)非常便宜的版本。对于免费的 IDE，您可以尝试使用[Free Pascal](http://www.freepascal.org/)编译器并支持 Linux、FreeBSD、Mac OS X/Darwin、Win32、Win64 等的[Lazarus 。](http://www.lazarus.freepascal.org/)

# iphone - 表视图崩溃

> ID：10775466
> 
> 赞同：0
> 
> 时间：2012-05-27T16:22:56.433
> 
> 标签：iphone, xcode, arrays

我正在将核心数据中的数据检索到 2 个数组中。

```
-(void)loadData{

AppDelegate *delegate = (AppDelegate*) [UIApplication sharedApplication].delegate;
NSManagedObjectContext *context = delegate.managedObjectContext;

   NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entityLocation = [NSEntityDescription entityForName:@"Devices" inManagedObjectContext:context];
fetchRequest.entity = entityLocation;

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"location = %@",actuallLocationName];
[fetchRequest setPredicate:predicate];

NSError *error;
NSArray *temp = [context executeFetchRequest:fetchRequest error:&error];
NSLog(@"matches in hostArray = %d",[temp count]);

hostArray = [temp valueForKey:@"hostname"];
deviceArray = [temp valueForKey:@"devicename"];

[myTable reloadData];
} 
```

在我的 UITableView 中，我有 2 个部分 --section 0 有 2 个不同的自定义单元，第 1 部分显示来自数组的数据

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
if (section == 0) {
    return 2;
}
       return [hostArray count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{
   static NSString *CustomCell = @"CustomCell";
   static NSString *CustomCell1 = @"CustomCell1";
   static NSString *CustomCell2 = @"CusrtomCell2";

UITableViewCell *cellA = [tableView dequeueReusableCellWithIdentifier:CustomCell1];
if (cellA == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"SettingCellHost" owner:self options:nil];
    cellA=hostNameCell;
    self.hostNameCell=nil;
}

UITableViewCell *cellB = [tableView dequeueReusableCellWithIdentifier:CustomCell2];
if (cellB == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"SettingCellDevice" owner:self options:nil];
    cellB=deviceNameCell;
    self.deviceNameCell=nil;
}

UITableViewCell *cellC = [tableView dequeueReusableCellWithIdentifier:CustomCell];
if (cellC == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"DefaultCell" owner:self options:nil];
    cellC=defaultCell;
    self.defaultCell=nil;
}
if ([hostArray count] != 0) {
    [defaultCellLabel setText:[hostArray objectAtIndex:indexPath.row]];
}

if (indexPath.section == 0) {
    if (indexPath.row == 0) {
        return cellA;
    }
}

if (indexPath.section == 0) {
    if (indexPath.row == 1) {
        return cellB;
    }
}

return cellC;
} 
```

启动应用程序崩溃后

```
Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI       objectAtIndex:]: index 1 beyond bounds [0 .. 0]' 
```

但数组不是空的

```
2012-05-27 18:10:39.010 TabWithCore[7249:fb03] Array 1 is (
1234567
) and Array 2 is (
Host
) 
```

奇怪的是，当我将第 0 部分的值 numberofrows 从 2 --> 更改为 1 时，一切正常......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T16:36:43.393

您的数组中只有一个对象......并且您正试图从中设置两个单元格。因此，当它尝试访问数组的第二个对象时，它会崩溃，因为第二个对象不存在......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:47:43.470

你的主要问题是你没有初始化`temp`数组。您刚刚通过名称声明了它并分配了值。`NSArray *temp = [context executeFetchRequest:fetchRequest error:&error];`

所以到那时，你的`temp`数组没有填满，结果你`hostArray`也没有填满。就我的观点而言，出于这个原因，您会收到此错误`Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]'`

所以试试这个`alloc init` `temp`数组的解决方案......希望它可以解决你的问题......:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T06:53:08.123

执行以下代码时不检查您所在的部分。因此，当部分为 0（2 行）且 indexPath.row 为 1 时，当它尝试访问 hostArray[1] 而它只有 1 个值时，会引发异常.

```
if ([hostArray count] != 0) {
    [defaultCellLabel setText:[hostArray objectAtIndex:indexPath.row]];
} 
```

要解决此问题，请在执行任何此代码之前检查该部分。像下面这样的东西会起作用。

```
if (indexPath.section == 1)    
{
    UITableViewCell *cellC = [tableView dequeueReusableCellWithIdentifier:CustomCell];
    if (cellC == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"DefaultCell" owner:self options:nil];
        cellC=defaultCell;
        self.defaultCell=nil;
    }
    if ([hostArray count] != 0) {
        [defaultCellLabel setText:[hostArray objectAtIndex:indexPath.row]];
    }
    return cellC;
} 
```

# email - PHP值传递以使用动态值发送某些文档

> ID：10775467
> 
> 赞同：-1
> 
> 时间：2012-05-27T16:23:08.153
> 
> 标签：email, include, file-get-contents, php

我希望根据他们以网站形式使用的选择发送动态电子邮件。目前我有：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $name = isset($_POST['name']) ? htmlentities($_POST['name']) : '';
    $more_info = isset($_POST['more_info']) ? htmlentities($_POST['more_info']) : '';

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: Hello <hello@example.com>' . "\r\n";
$to_email = 'Me <hello@me.com>';

$subject_email = 'Test Contact';

if ($more_info == "A") { $mail_content = file_get_contents('http://www.example.com/mail/a.php');}
if ($more_info == "B") { $mail_content = file_get_contents('http://www.example.com/mail/b.php');}
if ($more_info == "C") { $mail_content = file_get_contents('http://www.example.com/mail/c.php');}
if ($more_info == "D") { $mail_content = file_get_contents('http://www.example.com/mail/d.php');}
if ($more_info == "E") { $mail_content = include('/mail/e.php');}

mail($to_email, $subject_email, $mail_content, $headers); 
```

所以我需要传递 $name 和其他变量，以便在收集时发送正确的邮件功能。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T00:58:03.257

我想出了如何做到这一点正是我正在寻找的。

我继续做 file_get_contents，但后来我在 str_replace 使用了。我把我想找到的值放在数组中，比如：

```
$static_content = array('$a,$b,$c'); 
```

然后使用以下命令替换：

```
$dynamic_content = array("$a,$b,$c"); 
```

把整个事情放在一起：

```
$mail_content = str_replace($static_content,$dyanmic_content,$mail_content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T16:59:20.080

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
$name = isset($_POST['name']) ? htmlentities($_POST['name']) : '';
$more_info = isset($_POST['more_info']) ? htmlentities($_POST['more_info']) : '';

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: Hello <hello@example.com>' . "\r\n";
$to_email = 'Me <hello@me.com>';

$subject_email = 'Test Contact';

$mail_content = "Dear $name,\n\n";
$mail_content .= "$more_info";

if ($more_info == "A") { $mail_content .= file_get_contents('http://www.example.com/mail/a.php');}
if ($more_info == "B") { $mail_content .= file_get_contents('http://www.example.com/mail/b.php');}
if ($more_info == "C") { $mail_content .= file_get_contents('http://www.example.com/mail/c.php');}
if ($more_info == "D") { $mail_content .= file_get_contents('http://www.example.com/mail/d.php');}
if ($more_info == "E") { $mail_content .= include('/mail/e.php');}

mail($to_email, $subject_email, $mail_content, $headers); 
```

# php - 为什么使用 __get() 赋值时属性为 null？

> ID：10775470
> 
> 赞同：0
> 
> 时间：2012-05-27T16:23:22.110
> 
> 标签：php

我做了一个类：

```
class MyClass {
    function __get($name) {
        $this->{$name} = $_SESSION[$name];
    }

    public function isNull(){
        return $this->MyVar === null;
    }
} 
```

`var_dump($obj->isNull()) //$obj is instance of MyClass`总是输出设置与否`bool(true)`无关紧要`$_SESSION['MyVar']`。但是，如果我按预期添加`$this->MyVar;`之前`return $this->MyVar === null;`的作品。

好吧，它似乎`__get()`已执行（因为`$MyVar`未设置因此无法访问）但属性保持 NULL 直到第二次使用。

它发生是因为它根本没有设置吗？如何避免使用额外的行（`$this->MyVar;`）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T16:25:08.877

`__get()`必须返回值。将其更改为：

```
function __get($name) {
    return $_SESSION[$name];
} 
```

# mysql - MySQL插入但更新/忽略重复

> ID：10775471
> 
> 赞同：0
> 
> 时间：2012-05-27T16:23:33.177
> 
> 标签：mysql, insert, duplicates

这是我的表格，上面有一些示例数据

```
C ID | D ID    | Details |
--------------------------
 a   | b_data1 | d1      |
 a   | b_data2 | d2      |
 b   | b_data1 | d1      |
 b   | b_data2 | d2      |
 c   | b_data1 | d1      |
 c   | b_data2 | d2      | 
```

当我运行此查询时##

`INSERT IGNORE INTO table_name (C_ID, D_ID, Details) VALUES ('C', 'b_data3','d3') ('C', 'b_data2','d2')`

当它应该忽略第二个值对时，它会插入这两个行`('C', 'b_data2','d2')`

没有定义索引/主键。

我想确保没有重复的行，这意味着三列中的数据组合起来应该使行唯一。我不能让它独一无二。正如我在这里说明的那样，a 可以保持与 b 相同的内容，但 a 不应该有重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:26:51.760

`INSERT IGNORE`表示“忽略破坏唯一约束的行，而不是使查询失败”。您需要定义`UNIQUE`列以使其按预期工作 - 例如`CREATE TABLE tablename (col1 type, col2 type, col3 type, UNIQUE (col1, col2, col3))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T16:38:50.133

MySQL 使用 UNIQUE 索引强制执行唯一约束。如果您希望在不重新创建表的情况下添加索引，您可以：

```
CREATE UNIQUE INDEX index_name ON table (C_ID, D_ID, Details) 
```

除了 INSERT IGNORE 和已经提到的 REPLACE 之外，您还可以使用 INSERT...ON DUPLICATE KEY UPDATE 来更好地控制插入运行到重复唯一时发生的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T16:33:38.733

您应该按照@lanzz 的建议定义组合的 uniqe 索引。如果您希望在索引冲突的情况下新记录替换旧记录，请使用[替换](https://dev.mysql.com/doc/refman/5.0/en/replace.html)语句。

# ruby - Capybara + Cucumber + Selenium Driver 的 Authlogic 不工作

> ID：10775472
> 
> 赞同：3
> 
> 时间：2012-05-27T16:23:48.080
> 
> 标签：ruby, selenium, cucumber, capybara, authlogic

这是我使用 @javascript 和 authlogic 运行黄瓜测试时遇到的错误：

```
You must activate the Authlogic::Session::Base.controller with a controller object before creating objects 
```

这是我在 feature/support/authlogic.rb 中的 authlogic 支持代码：

```
require "authlogic"
require "authlogic/test_case"
World(Authlogic::TestCase)

ApplicationController.skip_before_filter :activate_authlogic

Before do
  activate_authlogic
end 
```

这就是我创建会话的方式：

```
def create_session 
  Session.create(:name => "test", :password => "test-33")
end 
```

没有@javascript，它不会给我关于 authlogic 没有被激活的错误，但是使用@javascript 它会。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T21:26:58.997

Selenium 和 capybara-webkit 在启动进程时使用单独的线程。当您运行 activate_authlogic 时，它会执行以下操作

```
Authlogic::Session::Base.controller = (@request && Authlogic::TestCase::RailsRequestAdapter.new(@request)) || controller 
```

这最终为 :authlogic_controller 设置了一个线程局部变量。问题是，当您在带有@javascript 标记的场景中开始使用新线程时，这会丢失。

对我来说，解决方法是像这样对 authlogic 代码进行monkeypatch

```
module Authlogic
  module Session
    module Activation
      module ClassMethods
        def controller
          if !Thread.current[:authlogic_controller]
            Thread.current[:authlogic_controller] = Authlogic::TestCase::MockController.new
          end
          Thread.current[:authlogic_controller]
        end
      end
    end
  end
end 
```

这复制了在 ativate_authlogic 中所做的事情。确保只修补您的测试环境。

# ruby-on-rails - 使用 order("RANDOM()") 的 Rails 3 的 Postgresql 错误

> ID：10775475
> 
> 赞同：1
> 
> 时间：2012-05-27T16:23:58.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, heroku

我试图在我的数据库中查询与当前查看的记录（基于标记）相似的记录，我正在工作，但我想随机化顺序。

我的开发环境是mysql所以我会做类似的事情：

```
@tattoos = Tattoo.tagged_with(tags, :any => true).order("RAND()").limit(6) 
```

哪个有效，但是我的生产环境是使用 postgresql 的 heroku，所以我尝试使用它：

```
@tattoos = Tattoo.tagged_with(tags, :any => true).order("RANDOM()").limit(6) 
```

但我收到以下错误：

ActionView::Template::Error (PGError: ERROR: for SELECT DISTINCT, ORDER BY 表达式必须出现在选择列表中

```
SELECT  DISTINCT tattoos.* FROM "tattoos" JOIN taggings 
tattoos_taggings_color_fantasy_newschool_nerdy_tv_477  ON 
tattoos_taggings_color_fantasy_newschool_nerdy_tv_477.taggable_id = tattoos.id AND 
tattoos_taggings_color_fantasy_newschool_nerdy_tv_477.taggable_type = 'Tattoo' WHERE 
(tattoos_taggings_color_fantasy_newschool_nerdy_tv_477.tag_id = 3 OR 
tattoos_taggings_color_fantasy_newschool_nerdy_tv_477.tag_id = 4 OR 
tattoos_taggings_color_fantasy_newschool_nerdy_tv_477.tag_id = 5 OR 
tattoos_taggings_color_fantasy_newschool_nerdy_tv_477.tag_id = 24 OR 
tattoos_taggings_color_fantasy_newschool_nerdy_tv_477.tag_id = 205) ORDER BY RANDOM() LIMIT 6): 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:56:35.450

在更仔细地分析了查询之后，我必须更正我的初稿。查询将需要一个`DISTINCT`或`GROUP BY`它的方式。

（可能）重复`tattoos.*`来自第一次加入（可能）表中的多行 `taggings`。`DISTINCT`然后，您的查询引擎尝试以语法上非法的方式使用 - 再次消除此类重复项。

[`DISTINCT`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-DISTINCT)基本上按从左到右的结果列对结果行进行排序，并为每组重复项选择第一个。这就是为什么最左边的`ORDER BY`列必须与`SELECT`列表匹配。

MySQL 比较宽松，允许非标准使用`DISTINCT`，但 PostgreSQL 会抛出错误。

ORM 经常会产生无效的 SQL 语句（毕竟它们只是拐杖）。但是，如果您使用适当的 PostgreSQL 库，则不应一开始就产生这样的非法语句。我不是 Ruby 专家，但这里有些可疑。

查询也很丑陋和**低效**。

有几种方法可以修复它。例如：

```
SELECT * 
FROM  (<query without ORDER BY and LIMIT>) x
ORDER  BY RANDOM()
LIMIT  6 
```

或者，更好的是，用这个**更快、更简洁的替代方法****重写**查询：

 **```
SELECT ta.*
FROM   tattoos ta
WHERE  EXISTS (
    SELECT 1
    FROM   taggings t
    WHERE  t.taggable_id = ta .id
    AND    t.taggable_type = 'Tattoo'
    AND    t.tag_id IN (3, 4, 5, 24, 205)
    )
ORDER  BY RANDOM()
LIMIT  6; 
```

您必须自己在 Ruby 中实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:05:34.217

不确定随机，因为它应该可以工作。但记下[http://railsforum.com/viewtopic.php?id=36581](http://railsforum.com/viewtopic.php?id=36581)

其中有可能适合您的代码

```
/lib/agnostic_random.rb
module AgnosticRandom
  def random
    case DB_ADAPTER
      when "mysql" then "RAND()"
      when "postgresql" then "RANDOM()"
    end
  end
end

/initializers/extend_ar.rb (name doesn't matter)
ActiveRecord::Base.extend AgnosticRandom 
```**

# php - 使用递归删除mysql表中的父子关系

> ID：10775486
> 
> 赞同：0
> 
> 时间：2012-05-27T16:24:43.727
> 
> 标签：php, mysql, logic

我无法使此功能正常工作。这是我的数据库设计

我正在一个应用程序中工作，其中当用户删除父类别时，所有子类别也将被删除，等等等等。例如：

当用户在我的应用程序中单击“Test1”类别时，“Test1.1”和“Test1.1.1”将被删除，因为它位于“Test1”类别下。

![在此处输入图像描述](../Images/ebcb83633b9ebca5352934322e192593.png)

这是我的数据库设计（上图）。

这是我写的代码：

```
function DeleteProjectPhotos( $cat_id ) {
        $sql = "SELECT * FROM project_category WHERE category_id = '$cat_id'"; 
        $query = mysql_query( $sql ) or die( mysql_error() );
        if( mysql_num_rows( $query ) > 0 ) {
            $sql = "SELECT * FROM project_category WHERE parent_id = '$cat_id'"; 
            $query = mysql_query( $sql ) or die( mysql_error() );
            if( mysql_num_rows( $query ) > 0 ) {
                while( $row = mysql_fetch_assoc( $query ) ) {
                    $this->DeleteProjectPhotos( $row['category_id'] );
                }
            } else {
                $sql = "DELETE FROM project_category WHERE category_id = '$cat_id'";
                $query = mysql_query( $sql ) or die( mysql_error() );
            }
        }
    } 
```

但我认为这里的整个逻辑是错误的，因为当我尝试删除 category_id 33 时，所有内容都不会被删除。请教我如何做这个。

您的帮助将不胜感激和奖励！

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:00:54.903

```
<?php

$catID = $_GET['catID']; 
deleteCategory($catID);

function connect(){

  $host = 'localhost';
  $dbName = 'sony';
  $userName = 'root';
  $password = '';

  $conn = new PDO("mysql:host=$host;dbname=$dbName",$userName,$password);
  $conn->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);

  return $conn;
  }

  $stmt = '';
 function deleteCategory($catID){

  $conn = connect();
  $tableName = 'childparent';

  $sql = "select catID from $tableName where parentID = :catID";

  global $stmt;
  $stmt = $conn->prepare($sql);

      $idsToDelete = getChilds($catID);
      $idsToDelete[] = $catID;
  //print_r($idsToDelete);

  $delExp = '';
  foreach($idsToDelete as $id)
     $delExp .= " catID=$id or";
  $delExp = preg_replace('/or$/','',$delExp);

  if($delExp != ''){

      $delSql = "delete from $tableName where $delExp";
      //echo $delSql;

       $delStmt = $conn->prepare($delSql);
       $delStmt->execute(); 

      }

  }

 $collectedIDs = array();

 function getChilds($catID){

 global $stmt,$collectedIDs;

 $stmt->bindValue(':catID',$catID);

 $stmt->execute();

 $childCatIDs = array();
 while($row = $stmt->fetch(pdo::FETCH_ASSOC)){

    $childCatIDs[] = $row['catID'];
    $collectedIDs[] = $row['catID'];    
 }

 //print_r($childCatIDs);
 //die();
 if(!empty($childCatIDs)){
        foreach($childCatIDs as $cid)
            getChilds($cid);

 }

 return $collectedIDs;

  }

?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T16:41:30.887

如果你不想要触发器，你可以在删除类别上尝试[http://php.net/manual/en/function.mysql-affected-rows.php](http://php.net/manual/en/function.mysql-affected-rows.php)你得到它的 id 并且有一个返回你尝试删除按类别或父母

# matlab - 如何在MATLAB中绘制两个图形

> ID：10775487
> 
> 赞同：6
> 
> 时间：2012-05-27T16:24:50.360
> 
> 标签：matlab, plot

我正在为`n`数据点实现聚类算法，我想`n`在聚类之前在一个图中绘制数据点，在聚类之后在另一个图中绘制数据点，这意味着同一文件中应该有两个具有相同数据点的图。

我的代码是这样的：

```
X = 500*rand([n,2]);
plot(X(:,1), X(:,2), 'r.')                   1

%Some coding section here 
```

后：

```
symbs = {'r+','g.','bv','m*','ko'};
hold on
for i = 1: length(I)
    plot(X(C==i,1), X(C==i,2), symbs{i})     2
end 
```

我只想在一个图中绘制（1），在另一个图中绘制（2）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-27T16:29:14.627

尝试[子图](http://www.mathworks.com/help/techdoc/ref/subplot.html)：

```
figure;
subplot(1,2,1)
plot(firstdata)
subplot(1,2,2)
plot(seconddata) 
```

这将在同一个图形窗口中创建两个轴区域......根据您的描述，这是我对您想要什么的最佳猜测。

编辑：从下面的评论中，这就是你在做什么

```
n=50;
X = 500*rand([n,2]);
subplot(1,2,1); #% <---- add 'subplot' here
plot(X(:,1),X(:,2),'r.')
symbs= {'r+','g.','bv','m*','ko'}; 
subplot(1,2,2); #% <---- add 'subplot' here (with different arguments)
hold on
for i = 1: length(I)
plot(X(C==i,1),X(C==i,2),symbs{i})
end 
```

如果您想要的只是第二个图形*窗口*，`subplot`那么您可以简单`figure`地在我第二次调用的地方说，`subplot`然后将创建一个新的图形窗口。

```
figure; #% <--- creates a figure window
n=50;
X = 500*rand([n,2]);
plot(X(:,1),X(:,2),'r.') #% <--- goes in first window

symbs= {'r+','g.','bv','m*','ko'}; 
figure; #% <---- creates another figure window
hold on
for i = 1: length(I)
plot(X(C==i,1),X(C==i,2),symbs{i}) #% <--- goes in second window
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-15T19:09:40.393

您只需要`figure`在每个图之前添加即可在两个单独的图中获得两个图

# javascript - 为什么 getElementsByTagName 返回未定义？

> ID：10775489
> 
> 赞同：6
> 
> 时间：2012-05-27T16:25:10.180
> 
> 标签：javascript, html, firefox, dom

我试图打电话`document.getElementsByTagName`，结果我回来`undefined`了，不管我传递什么参数。（即使我通过“*”。）

我尝试用谷歌搜索它，但所有搜索结果都是关于未定义的 getElementsByTagName 结果数组的元素。我得到的是`undefined`结果本身，它把我逼到了墙角。

有谁知道这会导致什么？（使用 Firefox 12.0。在 Chrome 中我得到了预期的结果。）

编辑：好的，这是示例代码：

```
function buttonClick(){
   var xhr = new XMLHttpRequest();
   var msg = document.getElementById('message');
   var buttons = document.getElementsByTagName("button");
   var button, i;
   for (i = 0; i < buttons.length; ++i){
      button = buttons[i];
      msg.removeChild(button);
   }

   xhr.onreadystatechange = function() {
        if(xhr.readyState == 4){
            handleResult(xhr.responseText, msg);
        }
   };
   xhr.open("POST", location.href, true);
   xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
   xhr.send("cmd=MyCommand");
} 
```

并且`getElementsByTagName`总是返回`undefined`，无论我是在 Firebug 的 Script 选项卡中跟踪它还是从 Console 选项卡中调用它。（也在 Firebug 中，因为这似乎让人们感到困惑。显然有太多的控制台漂浮在周围。）。

作为证明，这是我尝试使用 Firebug 控制台时得到的结果：

```
>>> document.getElementsByTagName("button");
undefined
>>> msg.getElementsByTagName("button");
undefined
>>> msg.getElementsByTagName
getElementsByTagName()
>>> msg.getElementsByTagName("BUTTON");
undefined
>>> msg.getElementsByTagName("*");
undefined
>>> document.getElementsByTagName("*");
undefined
>>> document.getElementsByTagName("body");
undefined 
```

标记是（或应该是）不相关的。这是一个有效的、格式良好的 HTML 页面，上面有一些按钮和其他元素。此 JS 函数附加到`onclick`其中一个按钮上。但它看起来像这样：

```
<html xmlns="http://www.w3.org/1999/xhtml"><head>
blah
</head>
<body>
<script type="text/javascript" src="/myJS.js"></script>
<div id="page-container">
   <div id="message"><button onclick="buttonClick();">Button 1</button><button onclick="ButtonClick2()">Button 2</button></div>

</div>

</body></html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T16:59:08.390

**编辑：**

这是 firebug 中的错误，已通过升级到[1.10.0a7 修复](https://groups.google.com/forum/?fromgroups#!topic/firebug/woLuJAkRmPY)

* * *

因为这个方法是不可能返回`undefined`的，所以有两种可能：

*   你的调试工具在骗你
*   `document.getElementsByTagName`没有引用原始主机对象。`function getElementsByTagName() {[native code]}`它应该在控制台中引用时打印 。

您应该能够可靠地查看它是否实际上是`undefined`（在 Firefox 中）：

```
delete window.alert;
window.alert(buttons); 
```

如果已经在引用原始主机对象，则它`delete`是一个 NOOP `window.alert`，否则它将恢复它。

如果它*发出警报* `undefined`，您应该可以这样做

```
delete document.getElementsByTagName 
```

恢复宿主对象引用。

这里所有的控制台引用都是指firefox默认自带的内置Web Console。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T16:49:40.387

REPL 不是一个独立的、独立于浏览器的 JavaScript 环境吗？虽然，在您的情况下，它恰好作为插件在您的浏览器中运行，但它应该模仿一个“洁净室”，说...

总结这个人的回答：[document.getElementById() 在使用 mozrepl 时返回 null （但不是在 firebug 中）](https://stackoverflow.com/questions/2485866/document-getelementbyid-returns-null-when-using-mozrepl-but-not-in-firebug)

默认情况下，您在**浏览器的**上下文中，而不是在文档的上下文中。

试试这个来切换到文档：

```
repl.enter(content) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T20:16:58.530

当我很难看到语法错误时，我遇到了问题。当我应该使用方括号**时，我使用了****括号**

错误的：

```
selectedItem._element.childNodes(0).getElementsByTagName('input').item(); 
```

对：

```
selectedItem._element.childNodes[0].getElementsByTagName('input').item(); 
```

看到不同？请注意，顶级语法适用于旧版本的 IE，如 IE8，但它不适用于 ie10、ie11、Edge 等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-20T17:16:09.407

你不能提醒`Array`，你应该做一个 for 循环来提醒它。例子：

```
var x = document.getElementsByTagName('a');
for (var i = 0, c = x.length ; i < c ; i++) {
    alert('Element n° ' + (i + 1) + ' : ' + x[i]);
} 
```

# algorithm - 图中的每个桥都是 DFS 搜索树中的边吗？

> ID：10775493
> 
> 赞同：5
> 
> 时间：2012-05-27T16:25:52.070
> 
> 标签：algorithm, graph, depth-first-search

Skiena 的算法书中的一个问题：

假设 G 是一个连通的无向图。一条边 e 的删除使图断开连接，称为桥。每个桥 e 都必须是 G 的深度优先搜索树中的一条边吗？

到目前为止我的解决方案（需要建议）：

我认为桥是一条边，其末端顶点是一个切割节点，因为切割节点的删除断开了图形，因此删除该边也会断开图形。DFS 搜索树中的边是树边和后边，只有树边可以被切割边（或桥），因为后边去除不会断开图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T16:34:42.600

基本上，是的。不过我有几点意见：

> 我认为桥是一条边，其末端顶点是一个切割节点，因为切割节点的删除断开了图形，因此删除该边也会断开图形。

这并不准确。特别是，如果您将其解读为（bridge => edge 有一个切割节点），那是真的。但被表述为“桥是其末端顶点......的边”，它暗示了相反的含义，这是不正确的。总而言之，这句话在很大程度上与其余的论点无关，我将省略它。

> ...只有树边可以被切割边（或桥），因为去除后边不会断开图形。

是的，就是这样。另外，您必须注意 DFS 探索连通图的所有顶点（或标记所有边）。

# xml - 与可变格式的纯字符串相比，使用 JSON/XML 有什么优势？

> ID：10775494
> 
> 赞同：2
> 
> 时间：2012-05-27T16:26:05.250
> 
> 标签：xml, json

与可变格式的纯字符串相比，使用 JSON/XML 有什么优势？

我们有一个 iPhone 应用程序，我们在其中接收一串变量作为对我们对 url 的帖子的响应，而不是使用来自服务器的 JSON/XML。

以 JSON/XML 格式传递数据对我们有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T16:28:23.147

JSON 支持结构化数据的传输，您不必解析客户端。

当您有一个使用这些数据来构建/填充界面的 html/js 客户端时，这很有用，因为数据会自动采用您在 js 代码中需要的格式。

服务器端，编码/解码也很容易，因为所有主要语言现在都有高效的库。

更喜欢 JSON 而不是 XML，因为它更易于阅读且更轻便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T16:29:55.593

结构、规律、标准化。也使解析/查询变得微不足道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T16:28:49.683

JSON/XML 具有标准格式，因此您可以轻松找到解析内容的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T18:57:08.540

优点是（a）您不必自己设计它，它已经完成了，并且（b）您不必自己编写解析器，它已经完成了。

# batch-file - 在批处理脚本中清除 RAM

> ID：10775504
> 
> 赞同：0
> 
> 时间：2012-05-27T16:27:43.970
> 
> 标签：batch-file

我一直想知道这一点并且永远找不到答案，但是可以从批处理文件中清除您的 RAM 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T04:03:13.433

```
@echo off
echo.
echo.
echo.
echo            ))) = Kill All Processes execpt for those needed by SYSTEM.
echo.
echo            ( process name ) = Kill only process specified.
echo  ---------------------------------------------------------------------------
echo    Ex.
echo.
echo    iexplore.exe
echo    winchat.exe
echo.
echo.
echo    Process Name: iexplore.exe
echo    SUCCESS: The process "iexplore.exe" with a PID of 1353 was terminated.
echo ----------------------------------------------------------------------------
pause >nul
set a=
echo.
tasklist
echo.
echo.
set /p a=Process Name:
if %a%==))) goto :ALL
taskkill /f %a%

:ALL

taskkill /f ( *.* ) & exit 
```

# .net - Vb.net中的CTYPE和DirectCast有什么区别

> ID：10775505
> 
> 赞同：1
> 
> 时间：2012-05-27T16:27:45.437
> 
> 标签：.net, vb.net, casting

> **可能重复：**
> [使用 DirectCast、CType、TryCast 强制转换数据类型](https://stackoverflow.com/questions/2703585/casting-datatypes-with-directcast-ctype-trycast)

我很难理解真正的区别以及何时应该使用哪个。有人可以告诉我区别，也许还有几个例子？谢谢？

# c# - 在 asp.net mvc 应用程序中发送电子邮件时出现异常

> ID：10775506
> 
> 赞同：1
> 
> 时间：2012-05-27T16:27:46.123
> 
> 标签：c#, asp.net-mvc, model-view-controller

我正在尝试测试在我的 asp.net mvc 应用程序中发送电子邮件，但我不断收到以下异常：

**“试图以访问权限 ipaddress:587 禁止的方式访问套接字”**

有什么想法吗？我已经关闭了 Windows 防火墙，但仍然出现异常。我已经包含了使用 System.Net.Mail；声明，我的代码如下：

```
MailMessage mail = new MailMessage();
SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com", 587);
SmtpServer.Credentials = new System.Net.NetworkCredential("info@mydomain.com", "mypassword");

mail.From = new MailAddress("info@mydomain.com");
mail.To.Add("myemail@gmail.com");
mail.Subject = "Testing application";
mail.Body = "Testing the application email";   
SmtpServer.Send(mail); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T16:35:15.453

这是一个有效的代码。有两个额外的设置与你的比较，也许这就是问题所在。

```
MailMessage msgMail = new MailMessage("a@gmail.com", "b@mail.me", "subject", "message body");
SmtpClient smtp = new SmtpClient("smtp.gmail.com", 587);
smtp.EnableSsl = true;
smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
smtp.Credentials = new System.Net.NetworkCredential("a@gmail.com", "a");
try
{
   smtp.Send(msgMail);
}
catch (Exception ex)
{
} 
```

# python - pypy 中 Julia 的 Python 性能示例

> ID：10775510
> 
> 赞同：23
> 
> 时间：2012-05-27T16:28:23.463
> 
> 标签：python, numpy, python-2.7, pypy, julia

[Julia](http://julialang.org/)是一种新的统计编程语言，声称其性能明显优于竞争语言。我正在尝试验证这一点。Julia 有一个用 Python 编写的性能测试： [https ://github.com/JuliaLang/julia/blob/master/test/perf/perf.py](https://github.com/JuliaLang/julia/blob/master/test/perf/perf.py)

我无法让它与 pypy 一起使用。也许这是由于 numpypy 与 numpy 不兼容，但我还没有走得足够远来确定这一点。我遵循了 ImportError 的建议`"...or just write 'import numpypy' first in your program..."`，但我得到了另一个 ImportError：`"No module named numpy.linalg"`

我对 Python 的使用经验几乎为零，我正在寻找一个可以运行的完整解决方案。让它工作的好处是我们可以进行苹果对苹果（jit lang-to-jit lang）的比较。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-02T16:21:09.010

![python和julia性能测试](../Images/c2c9c03af349baded8585fa2a9282976.png)

在纯 Python 中对 Julia git (perf.py) 进行了 4 次测试。在这里，我在同一台计算机上运行**perf.py**（仅纯 Python 测试）和**perf.pl**进行苹果对苹果的比较。我有点担心 Python/Pypy 的时机：/

还有……为什么

```
## fibonacci ##

def fib(n):
    if n<2:
        return n
    return fib(n-1)+fib(n-2) 
```

Pypy 比 Python 慢？

* * *

我在[https://bugs.pypy.org/issue1344](https://bugs.pypy.org/issue1344)中发布了这个问题[Pypy 的递归速度比 Python2.7、Python3.2 和 Julia 慢] 我得到了下一个答案：

> 这是一种预热时间非常重要的情况（它试图内联所有递归），但是一旦你预热它，它实际上非常快。

因此，我为**fib(n)使用不同数量的****n**来编写文本。确实，Pypy 比 Python 快，大于 30，但递归比 Julia 慢：

 **[用**粗体**表示更快的python实现]

![Pypy Python 和 Julia 中的递归](../Images/a2a23b379e69bcdcc1994319d328abda.png)

* * *

**因为是用递归实现的，所以快速排序和 fib 在 Pypy 中速度较慢。** **Julia 似乎比 PyPy 快。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T15:10:03.300

Linalg 目前尚未实施。我认为一个新的 ffi 并推出 1.9（这需要相当多的 numpy 修复，请参阅错误跟踪器）正在成为重中之重。我不认为*现在*有 linalg有那么有趣。我们希望首先运行更多的 numpy。不过，我愿意被说服。论据？**

# api - 地理编码服务

> ID：10775512
> 
> 赞同：3
> 
> 时间：2012-05-27T16:28:57.703
> 
> 标签：api, google-maps, geolocation, geocoding

我正在寻找地理编码服务，它每天可以提供 100 万次查询。

我已经阅读了有关 google/yahoo api 的信息，但不幸的是，它们都不能提供这个数量。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:37:18.540

Google、Yahoo、MapQuest（许可服务）或 Microsoft 将非常乐意允许您使用他们的 API 以这种数量和他们的高级计划。

如果您想要这个免费的，[MapQuest Open](http://developer.mapquest.com/web/products/open/nominatim)运行 Nominatim，一个免费的地理编码器，基于 OpenStreetMap 数据。截至今天，此服务不受速率限制。

或者，如果您想要更多控制权，为什么不基于[Nominatim](http://nominatim.openstreetmap.org/)设置自己的地理编码器？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T18:35:31.013

我在[SmartyStreets](http://smartystreets.com)工作，我们专注于地址验证和地理编码。虽然我不确定（请参阅我对您的问题的评论）如果您是按地址或 IP 进行地理编码，但我知道您可以调查一些场所。我将从一些一般原则开始，然后提供一两个建议。

有些*服务*可以对如此大的数量执行批量地理编码或*整体地理编码。*最终，要为单个用户每天处理超过一百万个请求，您确定使用的 API 应具有以下特征：

*   地理分布。延迟很容易使请求的时间翻倍，并且在一天内超过一百万次查询（大约 11 次查询/秒）会严重影响您的应用程序的性能。

*   可扩展。如果一台机器在处理 API 请求时不堪重负，系统将如何应对并为其他等待处理的机器提供服务？

*   保证正常运行时间的 SLA。特别是对于关键任务操作，地理编码不能妨碍您，并且对于如此大的数量，您希望确保可用性不会受到任意影响。

*   便携/轻便。换句话说，您需要能够以通用格式输出结果的东西。XML 很好，但通常难以使​​用并且有其局限性。我个人发现[JSON](http://json.org)是发送和接收数据的绝佳格式。

*   经济实惠。谷歌和雅虎 API 的高级计划通常是为企业实体设计的，成本很高。你的手段可能不允许这样做。

还要记住，Google、OpenStreetMap (Nominatim)、Yahoo 和其他公司实际上并没有验证他们地理编码的位置。换句话说，您可以给 Google 或 OSM 一个实际上并不存在的地址，它仍然会给您坐标——因为它们执行的是地址*近似*，而不是地址*验证*。他们的目的是帮助您搜索/查找东西，但如果您需要准确的坐标，您最好确保地址正确。

开始四处寻找这样的 API。我建议您从[LiveAddress](http://smartystreets.com/products/liveaddress-api)开始，看看它如何满足您的需求。我们每天处理数百万个请求，每秒可以轻松处理数千个请求，我们返回给您的数据只会真实存在：无需猜测地址。它带有 SLA，由美国各地的 3 个数据中心提供服务，并具有简单的 JSON 输出。响应时间通常约为 100 毫秒或更短（不包括我们无法控制的外部延迟）。

顺便说一句，它可以免费用于每月 250 个地址或查询，在您的情况下，这应该可以帮助您真正轻松地开始......

如果您还有其他问题，我很乐意亲自为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T16:37:11.020

免费？如果是这样，您将找不到 Google、Yahoo、Microsoft、MapQuest 等商业公司提供的此类服务。唯一的方法是支付更多的日常查询费用或使用 OpenStreetMap.org (OSM)。然而，OSM 的 API 每天只提供 2,5k 次查询，但您可以下载整个地图内容（或什至某些部分，例如特定城市或国家）并将其放在您自己的服务器上。请注意，OSM 不提供卫星或街景。

# iphone - `Paperclip::AdapterRegistry::NoHandlerError` 当我将图像从 iphone 应用程序发布到 rails 时

> ID：10775515
> 
> 赞同：5
> 
> 时间：2012-05-27T16:29:46.910
> 
> 标签：iphone, ruby-on-rails, paperclip

当我从 iphone 应用程序发布图像时，我的 rails 应用程序引发了异常：

> 回形针异常：回形针::AdapterRegistry::NoHandlerError]。

我的 iPhone 应用程序通过多部分发布图像。

当我从我的网站上传图像时，rails 应用程序不会引发此异常。

我在哪里可以查看为什么它不起作用？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:55:46.767

我已经在嵌套表单上遇到过这个错误，这是因为我忘记了将 multipart 设置为 true。

使用工具记录您的 iPhone 发送的请求，然后您可以看到该请求是否格式错误。

[查尔斯代理](http://www.charlesproxy.com)是完美的。

相关主题：[如何调试来自 iPhone 的网络请求？](https://stackoverflow.com/questions/3924633/how-can-i-debug-network-requests-from-my-iphone)

# jquery - jQuery：选择直接兄弟姐妹

> ID：10775519
> 
> 赞同：5
> 
> 时间：2012-05-27T16:30:24.970
> 
> 标签：jquery

假设我有这个 HTML：

```
<div id="Wrapper">

  <div class="MyClass">some text</div>
  <div class="MyClass">some text</div>

  <div class="MyBorder"></div>

  <div class="MyClass">some text</div>
  <div class="MyClass">some text</div>
  <div class="MyClass">some text</div>

  <div class="MyBorder"></div>

  <div class="MyClass">some text</div>
  <div class="MyClass">some text</div>

</div> 
```

我想按它们所在的顺序在单击的那个旁边获取 MyClass div 的文本。

这就是我所拥有的：

```
$('#Wrapper').find('.MyClass').each(function () {
  AddressString = AddressString + "+" + $(this).text();
}); 
```

我知道添加了所有 MyClass div；我只是想知道是否有一种快速的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T16:31:52.987

**使用[.text()](http://api.jquery.com/text)、[.prevUntil()](http://api.jquery.com/prevUntil)和.nextUntil( [)](http://api.jquery.com/nextUntil)**

`.MyClass`要从clicked 获取所有上一个和下一个元素的文本`.MyBorder`：

```
$('#Wrapper').on('click', '.MyBorder', function() {
  var AddressString = [];
  $(this).nextUntil('.MyBorder').text(function(index, text) {
       AddressString.push(text);
  });

  $(this).prevUntil('.MyBorder').text(function(index, text) {
       AddressString.push(text);
  });
  console.log(AddressString.join(', '));
}); 
```

`prevUntil()`,`nextUntil()`与**[兄弟姐妹()](http://api.jquery.com/siblings)**的组合

```
$('#Wrapper').on('click', '.MyClass' function() {
    var AddressString = [];
    $(this).siblings('.MyClass').prevUntil('.MyBorder').add($(this).prevUntil('.MyBorder')).text(function(index, text) {
        AddressString.push(text);
    });
    console.log(AddressString.join(', '));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T16:44:22.530

您可以使用[`.nextUntil()`](http://api.jquery.com/nextUntil/)和[`.prevUntil()`](http://api.jquery.com/prevUntil/)

```
$('#Wrapper').on('click','.MyClass', function(e){
    var self = $(this),
        previous = self.prevUntil('.MyBorder', '.MyClass'), // find the previous ones
        next = self.nextUntil('.MyBorder', '.MyClass'), // find the next ones
        all = $().add(previous).add(self).add(next); // combine them in order

    var AddressString = '';

    all.each(function(){
        AddressString += '+' + $(this).text();
    });

    alert(AddressString);

}); 
```

这将找到位于由元素分隔的同一组元素中的所有`.MyClass`元素（*按顺序*） 。`.MyClass``.MyBorder`

**演示在** [http://jsfiddle.net/gaby/kLzPs/1/](http://jsfiddle.net/gaby/kLzPs/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T16:50:32.293

如果您想获取边界内的所有兄弟姐妹，则以下工作：

```
$("#Wrapper").on("click", ".MyClass", function(){
    var strings = [];
    $(this)
        .add( $(this).prevUntil(".MyBorder") )
        .add( $(this).nextUntil(".MyBorder") )
        .text(function(i,t){
            strings.push( t );
        });
    alert( strings.join(', ') );
});​ 
```

小提琴：http: [//jsfiddle.net/Uw5uP/3/](http://jsfiddle.net/Uw5uP/3/)

# java - 原始 Servlet 与 Spring MVC

> ID：10775522
> 
> 赞同：34
> 
> 时间：2012-05-27T16:30:47.343
> 
> 标签：java, spring, web-applications, servlets

您应该使用原始 Java Servlet 或使用 Spring MVC（或任何其他框架）构建 Web 应用程序的原因是什么？

当您应该避免使用 Spring MVC 时是否有例外，使用 Raw Servlets 这样做有什么好处？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-27T16:34:39.510

如果您正在构建一个非常快速且肮脏的演示，并且以后不打算扩展，那么 spring 可能会导致许多额外的配置问题（如果您以前做过，则不是真的，但我总是最终与它抗争方式或其他方式），所以这可能是考虑使用普通旧 servlet 的时候了。一般来说，除了超级快速和肮脏的演示之外，使用某种形式的 MVC 框架将使未来的生活变得更加轻松，并且也符合最佳实践。Spring 让事情变得超级简单，只需要花一些时间在前端配置一切。

我应该注意，你可以用 java servlet 做任何你不能用 Spring 做的事情。最大的区别是设置时间。

**编辑：**值得注意的是，当我发布这个答案时，我没有意识到 Spring Boot 实际上很容易使用嵌入式 Web 服务器或更传统的 Web 容器来运行。这是一个快速启动示例的链接：[http ://projects.spring.io/spring-boot/#quick-start](http://projects.spring.io/spring-boot/#quick-start)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-01-07T03:31:08.033

*Servlet 技术*用于请求-响应范式的**更通用的服务器端扩展。**Spring 只是将它用于通过 HTTP 的 Web 应用程序。

还有一些来自这里的引述：[http ://www.reddit.com/r/java/comments/29f3ul/why_is_spring_mvc_better_than_servlets_jsp/](http://www.reddit.com/r/java/comments/29f3ul/why_is_spring_mvc_better_than_servlets_jsp/)

> Servlet 基于用于处理请求和响应的低级 API。像 Spring MVC 这样的 Web 框架旨在使构建处理 HTTP 请求和响应的 Web 应用程序更容易。大多数 Java Web 框架，包括 Spring MVC，都在幕后使用 servlet。
> 
> 您可以使用 servlet 编写 Web 应用程序，但您必须手动处理所有细节。在验证、REST、JSON 的请求/响应主体、表单绑定等典型 Web 内容方面，您将获得的帮助很少。您最终将编写大量实用程序代码来支持您的 Web 应用程序。
> 
> 另一方面，Web 框架旨在使所有这些东西变得简单。使用 Spring MVC，您不必为手动处理请求和响应而烦恼，即使您仍然可以在需要时访问它们。想要在 Spring MVC 中返回 JSON？只需添加一个 @ResponseBody 注释，Spring 就会附加它。想要 RESTful URL？简单的。输入验证？小菜一碟。想要将表单数据绑定到对象？简单的。使用 servlet，您必须手动完成所有这些工作。
> 
> **不过，使用原始 servlet 可能是一种很好的学习体验。它确实** **有助于阐明 Web 框架如何让您的生活变得轻松！**

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-03-13T05:21:22.573

我已经使用原始 servlet 和 Web 应用程序框架开发了项目。框架为您提供一切，您只需要设置和配置环境，编码更容易。结果是您对 Web 开发一无所知。但是，带有原始 api 和 servlet 的代码使您有机会获得经验并成为一名程序员。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-27T20:55:33.570

我不经常使用 Spring。但我不知道它会对性能产生什么影响。MVC 可以提供帮助，但它们会造成混乱、额外的工作和挫败感。对于由一名程序员实现的大多数项目，旧的好方法已经足够了。当有多个开发人员时，MVC 可能会有所帮助。

对于大多数项目，我会使用普通的 servlet/jsp。如果我需要可重复使用的组件，我会使用 wicket。Servlets 与 JSPs/freemarker/velocity 或其他模板引擎一起用于表示。

如果您遵循 Servlets/JSP 的命名模式，我认为您不需要 Spring MVC。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-10T10:44:40.157

我发现，随着 Spring 3+ 版本的添加，使用所有基础知识引导 Spring Web 应用程序变得更加容易。Spring MVC 的优势在于，一旦您启动了应用程序上下文和数据库连接，创建新控制器就变得异常容易，并且它遵循更多逻辑架构，新开发人员实际上可能会发现更容易熟悉它.

事实上，在我之前的工作地点，我们正在构建 Java Servlet Web 应用程序，但我们发现我们必须创建自己的架构或应用程序的主干，这实际上是更多的工作。Spring 可以处理这些，这意味着开发人员可以继续处理实际的应用程序逻辑，而不必过多地担心架构。

# ruby - 模块中的类 << 符号

> ID：10775523
> 
> 赞同：5
> 
> 时间：2012-05-27T16:30:50.400
> 
> 标签：ruby, module, metaprogramming, mixins

我正在尝试将一个模块混合到一个类中，并且我希望某些方法充当类方法，而其他方法则充当实例方法。

但是，我不想同时`include` *使用* `extend`模块。我宁愿只是`include`它。

当我用这种表示法包装我想成为类方法的方法时，它可以工作：

```
class <<
  # ...
end 
```

但是，当我使用此表示法时，它不起作用：

```
class << self
  # ...
end 
```

我怀疑`self`关键字是建立与模块的显式绑定，而不是它混入的类。但是我没有看到任何文档建议`self`在使用`class <<`符号时关闭关键字。

有谁知道这是怎么回事？

* * *

**更新：为了更清楚，这里有一些示例代码：**

```
module M
  class <<
    def class_method
      puts "From inside the class_method"
    end
  end

  def instance_method
    puts "From inside the instance_method"
  end
end

class Object
  include M
end

class C
end

C.class_method

obj = C.new
obj.instance_method 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T17:38:47.220

`class <<`必须始终跟一个对象。只是`class <<; end`语法错误。在您的情况下，由于以下原因，它看起来很有效：

```
class <<
  def class_method
    puts "From inside the class_method"
  end
end 
```

是相同的

```
class << def class_method
    puts "From inside the class_method"
  end
end 
```

这与

```
temp = def class_method
  puts "From inside the class_method"
end
class << temp
end 
```

这与

```
def class_method
  puts "From inside the class_method"
end
class << nil
end 
```

这与

```
def class_method
  puts "From inside the class_method"
end 
```

当然，这实际上并没有定义类方法。它定义了一个实例方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:03:17.883

是的，如果你想`self`在你的模块中得到一个真实的，你应该使用`included` [callback](http://apidock.com/ruby/Module/included)。像这样的事情指向正确的方向：

```
module Bar
  def self.included(base)
    class << base
      def class_method
        "class_method"
      end
    end
  end
end

class Foo
  include Bar
end

p Foo.class_method # => "class_method" 
```

# javascript - UIWebView 更改行距文本

> ID：10775527
> 
> 赞同：0
> 
> 时间：2012-05-27T16:31:13.957
> 
> 标签：javascript, xcode, ios5, uiwebview

我正在寻找一种 javascript 方法或一种更改 UIWebView 中文本行距的方法。

有任何想法吗？

编辑：

埃文已经回答了上述问题，但我在同一主题上还有另一个问题。

如何查询当前行距值的来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:47:20.123

`UIWebView`您需要通过调用将 javascript 注入到源代码中`stringByEvaluatingJavaScriptFromString:`。

Javascript：

```
var head = document.getElementsByTagName('head')[0],
    style = document.createElement('style'),
    rules = document.createTextNode('* { line-height: 20px !important; }');
style.type = 'text/css';
if(style.styleSheet)
    style.styleSheet.cssText = rules.nodeValue;
else style.appendChild(rules);
head.appendChild(style); 
```

Objective-C（可能在`webViewDidFinishLoading:`）：

```
NSString *js = /* The javascript above in a string */
[webView stringByEvaluatingJavaScriptFromString:js]; 
```

* * *

要检索页面`line-height`上第一个`h1`元素的值：

Javascript：

```
var element = document.getElementsByTagName('h1')[0],
    style = window.getComputedStyle(element),
    lh = style.getPropertyValue('line-height');
return lh; 
```

目标-C：

```
NSString *js = /* The javascript above in a string */
NSString *lineHeight = [webView stringByEvaluatingJavaScriptFromString:js]; 
```

# asp.net - 我需要什么类型的 facebook 身份验证/令牌？

> ID：10775533
> 
> 赞同：3
> 
> 时间：2012-05-27T16:32:29.043
> 
> 标签：asp.net, facebook-graph-api, facebook-access-token

我想构建一个自定义的 asp.net 控件来放置一个网页，该网页将允许人们从我的 facebook 帐户中查看需要身份验证的一条信息。为了简单起见，我们只想说我希望它显示我喜欢的最后一件事。我不希望我网站的访问者必须登录 facebook（他们也不必成为我在 fb 上的朋友）。我希望我的网站以某种方式存储我已授权的令牌，然后它将使用此令牌进行访问。我知道这最初可以完成，但我很困惑令牌过期时会发生什么。或者就此而言，如果我从 Facebook 注销。是否有某种类型的令牌或秘密或我可以请求的东西，可以由我的网站一次又一次地自动更新，而与我作为 fb 用户的任何登录状态无关？这是否需要我创建一个 fb 应用程序并将令牌与它相关联？

我现在没有任何代码，我正在寻找关于应该在这里使用的协议的更高级别的指导，从那里我可以希望从现有的示例、文档等中找出代码。这是我的与 facebook 的第一次代码交互，所以不要假设我在这一点上非常了解 :-)

编辑：我一直在阅读有关该主题的所有内容，但似乎找不到解决方案。过去有一个 RSS 提要，但现在似乎没有了。然后还有不再可用的offline_access 权限。这似乎是一个如此简单的任务，但我只是无法连接点。我已经能够获得带有阅读“喜欢”的权限的初始用户令牌，这很容易。现在我可以将它存储在我网站的数据库中，并在有人加载我的页面时使用它来请求该数据。但最终令牌将过期，我没有看到任何自动更新它的方法，它不会涉及用户“Larry”，他恰好正在浏览我的网站，被要求提供我的 Facebook 凭据。基本上，我似乎永远无法从 facebook 注销，否则我会冒着在我的网站上出现损坏的风险。fb auth 模型只是没有设置为允许 thist 吗？再次总结一下——用户 Bob 想要授予 acme.com 的权限，无论 Bob 是否登录到 fb，他都能够始终显示 Bob 最近的点赞。如果他撤销对在 acme.com 上运行的 WhatDoesBobLike 应用程序的授权，他只想让这个停止工作。可能的？如果他撤销对在 acme.com 上运行的 WhatDoesBobLike 应用程序的授权，他只想让这个停止工作。可能的？如果他撤销对在 acme.com 上运行的 WhatDoesBobLike 应用程序的授权，他只想让这个停止工作。可能的？

-JT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T00:01:51.793

您将需要一个扩展的访问令牌。它最多只能持续 60 天，从那时起您需要重新延期。

如果它是一个页面，您可以扩展用户访问令牌，然后获取永远不会过期的页面访问令牌。

阅读更多

[http://developers.facebook.com/roadmap/offline-access-removal/](http://developers.facebook.com/roadmap/offline-access-removal/)

# c# - 重构静态类以将其接口与实现分离

> ID：10775534
> 
> 赞同：8
> 
> 时间：2012-05-27T16:32:38.507
> 
> 标签：c#, .net, oop, refactoring

我正在开发一个基于 .NET 的应用程序，其中一些核心应用程序类仅使用*静态*方法设计。

示例用法：

```
// static access.
Parameters.GetValue("DefaultTimeout");

// static access.
Logger.Log("This is an important message!"); 
```

已经有使用这些静态方法的代码，所以这个“接口”不能改变。

这些类目前没有实现接口。我希望能够将这些类的实际实现与它们的接口分开。

此重构的原因是这些对象将跨 AppDomain 边界使用。我希望能够注入一个“代理”对象，该对象在非 main-appdomains 上将调用其他一些实现而不是默认实现。

总结一下，我的问题是：

1.  如何轻松地将仅静态访问的对象转换为基于接口的设计，以便在需要时可以替换它们的实现（但保持静态访问）。

2.  一旦重构，非默认实现的实际注入应该如何/何时发生？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T17:10:49.303

***免责声明：***以下建议基于不改变调用方的重要性。我不是说这是最好的选择，只是我认为它是合适的。

## 断开实施

没有办法在静态成员上拥有接口，因此如果您不想更改调用代码，则可能必须保留静态。也就是说，你可以简单地让你的静态类在里面***包装***一个接口，所以静态类本身没有任何实现——它将所有调用委托给接口。

这一切都意味着您可以保留静态类和任何调用它的代码。这就像将静态类视为接口（或契约），但在内部根据情况换出实现。

这也意味着您的接口可以具有与静态类不同的签名，因为接口不必符合调用代码的期望 - 基本上，它会将您的静态类变成一种[Bridge](http://www.dofactory.com/Patterns/PatternBridge.aspx)。

## 注入实现

简而言之：使用静态构造函数来解析此接口的给定实现。

静态通常是每个 AppDomain（除非用 装饰`ThreadStaticAttribute`，然后每个 AppDomain/线程），因此您可以根据当前 AppDomain 确定您在哪里以及您需要什么实现（只要在 AppDomain 中首次使用静态，就会调用静态构造函数） . 这意味着一旦构建，该特定静态类的包装实现将在 AppDomain 的持续时间内保留（尽管您可以实现方法来刷新实现）。

## 跨 AppDomain 调用

负责此操作的代码可以在静态类中，也可以将其中一个接口实现简单地设置为 AppDomain 类型的代理管理器。跨 AppDomain 调用的任何类型都需要继承`MarshalByRefObject`。

[http://msdn.microsoft.com/en-us/library/ms173139.aspx](http://msdn.microsoft.com/en-us/library/ms173139.aspx)

[在另一个 AppDomain 中创建类型的实例](https://stackoverflow.com/questions/2075746/createinstance-of-a-type-in-another-appdomain)

[进行跨应用程序域调用的最简单方法？](https://stackoverflow.com/questions/6242573/simplest-way-to-make-cross-appdomain-call)

**示例应用程序**

您应该能够将其复制并粘贴到新的控制台应用程序中。这样做是为默认 AppDomain 注册一个实现，并为用户创建的 AppDomain 注册一个实现。默认设置只是创建接口的远程实现（在另一个 AppDomain 中）。只是为了演示“静态每个 AppDomain”的想法，远程实现委托给非默认域的另一个实现。

您可以即时更改实现，您需要更改的只是静态类构造函数（以决定选择什么实现）。请注意，您不需要更改`Main`方法，在这种情况下是我们的调用代码。

```
using System;
using System.Reflection;

class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(AppDomain.CurrentDomain.FriendlyName);
        Console.WriteLine(Parameters.GetValue(""));
        Console.Read();
    }
}

static class Parameters
{
    private static IParameterProvider _provider;

    static Parameters()
    {
        if (AppDomain.CurrentDomain.IsDefaultAppDomain())
        {
            _provider = new ParameterProviderProxy(AppDomain.CreateDomain(Guid.NewGuid().ToString()));
        }
        else
        {
            // Breakpoint here to see the non-default AppDomain pick an implementation.
            _provider = new NonDefaultParameterProvider();
        }
    }

    public static object GetValue(string name)
    {
        return _provider.GetValue(name);
    }
}

interface IParameterProvider
{
    object GetValue(string name);
}

class CrossDomainParameterProvider : MarshalByRefObject, IParameterProvider
{
    public object GetValue(string name)
    {
        return Parameters.GetValue(name);
    }
}

class NonDefaultParameterProvider : IParameterProvider
{
    public object GetValue(string name)
    {
        return AppDomain.CurrentDomain.FriendlyName;
    }
}

class ParameterProviderProxy : IParameterProvider
{
    private IParameterProvider _remoteProvider;

    public ParameterProviderProxy(AppDomain containingDomain)
    {
        _remoteProvider = (CrossDomainParameterProvider)containingDomain.CreateInstanceAndUnwrap(
            Assembly.GetExecutingAssembly().FullName,
            typeof(CrossDomainParameterProvider).FullName);
    }

    public object GetValue(string name)
    {
        return _remoteProvider.GetValue(name);
    }
} 
```

**关于寿命的说明**

管理静态类重构的主要问题之一通常不是客户端代码的更改（因为许多重构工具都支持这一点，并且有一些技术可以安全地完成它），而是管理目的。实例对象依赖于活动引用（否则它们会被垃圾回收），这些通常可以通过将一个公共静态成员保存在某个地方来“轻松访问”，但通常这是您首先要通过重构来避免的。

您似乎不必担心这个问题，因为您将调用代码附加到静态类，因此生命周期将保持不变。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-27T17:01:51.603

对于每个静态方法，创建一个实例。添加一个静态单例变量，您可以将任何实现分配给该变量。使静态方法调用静态单例上的实例方法。

这将允许您在运行时交换实现，但您只能同时挂接一个实现。

现有代码不需要更改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T20:03:54.847

静态类可以转换为单例对象。

单例对象支持接口。

接口可用于不同的实现。

**(1) 问题的定义。**

假设您有一个具有静态成员的类。

--

字符串类.cs

--

```
namespace Libraries
{
  public static class StringsClass
  {

    public static string UppercaseCopy(string Value)
    {
      string Result = "";

      // code where "Value" is converted to uppercase,
      // and output stored in "Result"

    return Result;
    } // string UppercaseCopy(...)

    public static string LowercaseCopy(string Value)
    {
      string Result = "";

      // code where "Value" is converted to lowercase,
      // and output stored in "Result"

      return Result;
    } // string LowercaseCopy(...)

    public static string ReverseCopy(string Value)
    {
      string Result = "";

      // code where "Value" is reversed,
      // and output stored in "Result"

      return Result;
    } // string ReverseCopy(...)  

  } // class StringsClass

} // namespace Libraries 
```

--

并且，一些使用该类的静态元素的代码。

--

StringsLibraryUser.cs

--

```
using Libraries;

namespace MyApp
{
  public class AnyClass
  {
    public void AnyMethod()
    {
      string Example = "HELLO EARTH";
      string AnotherExample = StringsClass.LowercaseCopy(Example);
    } // void AnyMethod(...)  

  } // class AnyClass

} // namespace MyApp 
```

--

**(2) 首先将类转换为非静态类。**

--

字符串类.cs

--

```
namespace Libraries
{
  public class StringsClass
  {

    public string UppercaseCopy(string Value)
    {
      string Result = "";

      // code where "Value" is converted to uppercase,
      // and output stored in "Result"

    return Result;
    } // string UppercaseCopy(...)

    public string LowercaseCopy(string Value)
    {
      string Result = "";

      // code where "Value" is converted to lowercase,
      // and output stored in "Result"

      return Result;
    } // string LowercaseCopy(...)

    public string ReverseCopy(string Value)
    {
      string Result = "";

      // code where "Value" is reversed,
      // and output stored in "Result"

      return Result;
    } // string ReverseCopy(...)  

  } // class StringsClass

} // namespace Libraries 
```

--

**(3) 添加允许类处理单个对象的代码。**

--

字符串类.cs

--

```
namespace Libraries
{
  public class StringsClass
  {
    private static Singleton instance = null;

    private Singleton()
    {
      // ...
    }

    public static synchronized Singleton getInstance()
    {
        if (instance == null) {
            instance = new Singleton();
        }
        return instance;
    }

    public string UppercaseCopy(string Value)
    {
      string Result = "";

      // code where "Value" is converted to uppercase,
      // and output stored in "Result"

    return Result;
    } // string UppercaseCopy(...)

    public string LowercaseCopy(string Value)
    {
      string Result = "";

      // code where "Value" is converted to lowercase,
      // and output stored in "Result"

      return Result;
    } // string LowercaseCopy(...)

    public string ReverseCopy(string Value)
    {
      string Result = "";

      // code where "Value" is reversed,
      // and output stored in "Result"

      return Result;
    } // string ReverseCopy(...)  

  } // class StringsClass

} // namespace Libraries 
```

--

**(4) 调用类的代码，需要添加对单例的引用。**

--

StringsLibraryUser.cs

--

```
using Libraries;

namespace MyApp
{
  public class AnyClass
  {
    public void AnyMethod()
    {
      string Example = "HELLO EARTH";
      string AnotherExample = StringsClass.getInstance().LowercaseCopy(Example);
    } // void AnyMethod(...)  

  } // class AnyClass

} // namespace MyApp 
```

--

**(5) 定义一个接口，声明与前面的静态类类似，并允许单例实现该接口。在接口声明中省略单例成员**

--

字符串类.cs

--

```
namespace Libraries
{
  public interface StringsInterface
  {
    string UppercaseCopy(string Value);  
    string LowercaseCopy(string Value);  
    string ReverseCopy(string Value);   
  } // interface StringsInterface

  public class StringsClass: StringsInterface
  {
    private static Singleton instance = null;

    private Singleton()
    {
      // ...
    }

    public static synchronized Singleton getInstance()
    {
        if (instance == null) {
            instance = new Singleton();
        }
        return instance;
    }

    public string UppercaseCopy(string Value)
    {
      string Result = "";

      // code where "Value" is converted to uppercase,
      // and output stored in "Result"

    return Result;
    } // string UppercaseCopy(...)

    public string LowercaseCopy(string Value)
    {
      string Result = "";

      // code where "Value" is converted to lowercase,
      // and output stored in "Result"

      return Result;
    } // string LowercaseCopy(...)

    public string ReverseCopy(string Value)
    {
      string Result = "";

      // code where "Value" is reversed,
      // and output stored in "Result"

      return Result;
    } // string ReverseCopy(...)  

  } // class StringsClass

} // namespace Libraries 
```

--

**(6) 在代码中，您正在使用单例，即包含静态方法的前一个类，将单例替换为接口。**

--

StringsLibraryUser.cs

--

```
using Libraries;

namespace MyApp
{
  public class AnyClass
  {
    public StringsInterface StringsHelper = StringsClass.getInstance().LowercaseCopy(Example);

    public void AnyMethod()
    {
      string Example = "HELLO EARTH";
      string AnotherExample = StringsHelper;
    } // void AnyMethod(...)  

  } // class AnyClass

} // namespace MyApp 
```

--

现在，您可以添加其他支持相同声明但实现不同的类。

干杯。

--

# c# - 获取网站上的所有 RSS 链接

> ID：10775535
> 
> 赞同：0
> 
> 时间：2012-05-27T16:32:48.390
> 
> 标签：c#

我目前正在编写一个非常基本的程序，它将首先通过网站的 html 代码查找所有 RSS 链接，然后将 RSS 链接放入一个数组并将链接的每个内容解析为现有的 XML 文件。

但是，我仍在学习 C#，而且我对所有课程还不是很熟悉。我已经在 PHP 中通过使用 get_file_contents() 编写自己的类来完成所有这些工作，并且还使用 cURL 来完成这项工作。我也设法用 Java 解决了这个问题。无论如何，我试图通过使用 C# 来完成相同的结果，但我认为我在这里做错了。

TLDR；编写正则表达式以查找网站上所有 RSS 链接的最佳方法是什么？

到目前为止，我的代码如下所示：

```
 private List<string> getRSSLinks(string websiteUrl)
    {
        List<string> links = new List<string>();
        MatchCollection collection = Regex.Matches(websiteUrl, @"(<link.*?>.*?</link>)", RegexOptions.Singleline);

        foreach (Match singleMatch in collection)
        {
            string text = singleMatch.Groups[1].Value;
            Match matchRSSLink = Regex.Match(text, @"type=\""(application/rss+xml)\""", RegexOptions.Singleline);
            if (matchRSSLink.Success)
            {
                links.Add(text);
            }
        }

        return links;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:00:03.523

不要使用正则表达式来解析 html。改用 html 解析器查看[此链接](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)以获取解释

我更喜欢[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)来解析 html

```
using (var client = new WebClient())
{
    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    doc.LoadHtml(client.DownloadString("http://www.xul.fr/en-xml-rss.html"));

    var rssLinks = doc.DocumentNode.Descendants("link")
        .Where(n => n.Attributes["type"] != null && n.Attributes["type"].Value == "application/rss+xml")
        .Select(n => n.Attributes["href"].Value)
        .ToArray();
} 
```

# android - 设置 AlarmManager 和 NumberFormatException？

> ID：10775536
> 
> 赞同：0
> 
> 时间：2012-05-27T16:32:51.440
> 
> 标签：android, eclipse, android-alarms

这是我的 Receiver.java

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;

public class Receiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Toast.makeText(context, intent.getStringExtra("param"),Toast.LENGTH_SHORT).show();
    }

} 
```

这是我的 TaskActivity 类..

```
 private void fillData() {

        // Fields from the database (projection)
        // Must include the _id column for the adapter to work
        String[] from = new String[] { TaskTable.COLUMN_SUMMARY };
        // Fields on the UI to which we map
        int[] to = new int[] { R.id.label };

        getLoaderManager().initLoader(0, null, this);

        adapter = new SimpleCursorAdapter(this, R.layout.task_row, null, from,to, 0);

        setListAdapter(adapter);
        //String[] from = new String[] { TaskTable.COLUMN_SUMMARY };
        String[] diffTime = new String[]{TaskTable.COLUMN_DIFFERENCE};
        if(diffTime.length!=0)
        {
            AlarmManager alarms = (AlarmManager)this.getSystemService(Context.ALARM_SERVICE);

            Receiver receiver = new Receiver();
            IntentFilter filter = new IntentFilter("ALARM_ACTION");
            registerReceiver(receiver, filter);

            Intent intent = new Intent("ALARM_ACTION");
            for(int i=0;i<diffTime.length;i++)
            {
                intent.putExtra("param", "WARNING!!! WARNING!!! Task is due now!");
                PendingIntent operation = PendingIntent.getBroadcast(this, 0, intent, 0);

                //alarms.set(AlarmManager.RTC_WAKEUP, d.getTime(), operation);
                alarms.set(AlarmManager.RTC_WAKEUP, d.getTime()+(Long.parseLong(diffTime[i])), operation);
                //System.out.println("YEAHHHHHH "+from[i]+" YOOOHOOOO "+(Long.parseLong(diffTime[i])));
            }
        }

    } 
```

它在 logcat 中返回这样的错误

```
05-28 02:27:12.987: E/AndroidRuntime(525): FATAL EXCEPTION: main
05-28 02:27:12.987: E/AndroidRuntime(525): java.lang.RuntimeException: Unable to start activity ComponentInfo{mad.app/mad.app.TaskActivity}: java.lang.NumberFormatException: Invalid long: "difference"
05-28 02:27:12.987: E/AndroidRuntime(525):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-28 02:27:12.987: E/AndroidRuntime(525):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-28 02:27:12.987: E/AndroidRuntime(525):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-28 02:27:12.987: E/AndroidRuntime(525):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-28 02:27:12.987: E/AndroidRuntime(525):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-28 02:27:12.987: E/AndroidRuntime(525):  at android.os.Looper.loop(Looper.java:137)
05-28 02:27:12.987: E/AndroidRuntime(525):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-28 02:27:12.987: E/AndroidRuntime(525):  at java.lang.reflect.Method.invokeNative(Native Method)
05-28 02:27:12.987: E/AndroidRuntime(525):  at java.lang.reflect.Method.invoke(Method.java:511)
05-28 02:27:12.987: E/AndroidRuntime(525):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-28 02:27:12.987: E/AndroidRuntime(525):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-28 02:27:12.987: E/AndroidRuntime(525):  at dalvik.system.NativeStart.main(Native Method)
05-28 02:27:12.987: E/AndroidRuntime(525): Caused by: java.lang.NumberFormatException: Invalid long: "difference"
05-28 02:27:12.987: E/AndroidRuntime(525):  at java.lang.Long.invalidLong(Long.java:125)
05-28 02:27:12.987: E/AndroidRuntime(525):  at java.lang.Long.parse(Long.java:362)
05-28 02:27:12.987: E/AndroidRuntime(525):  at java.lang.Long.parseLong(Long.java:353)
05-28 02:27:12.987: E/AndroidRuntime(525):  at java.lang.Long.parseLong(Long.java:319)
05-28 02:27:12.987: E/AndroidRuntime(525):  at mad.app.TaskActivity.fillData(TaskActivity.java:141)
05-28 02:27:12.987: E/AndroidRuntime(525):  at mad.app.TaskActivity.onCreate(TaskActivity.java:48)
05-28 02:27:12.987: E/AndroidRuntime(525):  at android.app.Activity.performCreate(Activity.java:4465)
05-28 02:27:12.987: E/AndroidRuntime(525):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-28 02:27:12.987: E/AndroidRuntime(525):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-28 02:27:12.987: E/AndroidRuntime(525):  ... 11 more 
```

如果我没有使用“diffTime and for{}”，应用程序会在应用程序启动时通过发出警告消息顺利运行...任何想法...非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:03:54.947

你的错误：

```
String[] diffTime = new String[]{TaskTable.COLUMN_DIFFERENCE}; 
```

`TaskTable.COLUMN_DIFFERENCE`听起来..很像一个字符串，可以命名为“差异”。

然后你这样做：

```
Long.parseLong(diffTime[i]) 
```

这会导致您的异常。

您是否错过了从包含“任务表”的数据库中加载内容的步骤？

**编辑：**

```
// Here you allocate "diffTime" to, what I must presume is the value "difference". 
    String[] diffTime = new String[]{TaskTable.COLUMN_DIFFERENCE};
    if(diffTime.length!=0)
    {
        ...
        ...
        for(int i=0;i<diffTime.length;i++)
        {
            ...
            ...
            alarms.set(AlarmManager.RTC_WAKEUP, d.getTime()+(Long.parseLong(diffTime[i])), operation);
        }
    } 
```

正如您从代码中看到的那样，在分配“diffTime”之后，您实际上没有为它分配一个值，而不是`TaskTable.COLUMN_DIFFERENCE`- 即您试图`String`用值“ `difference`”解析 a - 如堆栈跟踪的原因所示：

```
Caused by: java.lang.NumberFormatException: Invalid long: "difference" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:19:58.103

还有另一种将String转换为Long的方法，请尝试以下方式，

```
Long.valueOf(diffTime[i]); 
```

您可以访问[Convert String to Long](http://www.java-examples.com/convert-java-string-long-example)的一个很好的例子。

# python - 需要帮助安装 PIL 以使用 Django ImageField

> ID：10775538
> 
> 赞同：-1
> 
> 时间：2012-05-27T16:32:53.723
> 
> 标签：python, django, python-imaging-library, macports, gcc-4.2

我是这些事情的新手。我一直在互联网上寻找解决此错误的方法：

```
unable to execute gcc-4.2: No such file or directory
error: command 'gcc-4.2' failed with exit status 1 
```

尝试安装 Python 图像库时，每次运行时都会出现此错误：

```
python setup.py install 
```

我已经尝试了本网站和网络上其他人提供的许多解决方案，但没有运气。

我尝试使用 Macports 安装 PIL，这似乎可以工作，但是当我`syncdb`在我的 Django 模型上运行时，它告诉我安装 PIL。

此刻有点失落。有没有人有一个经过测试的、万无一失的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:51:01.817

以我的经验，除非您使用[pip](http://pypi.python.org/pypi/pip "点子") ，否则 PIL 是构建和安装的噩梦。尝试创建一个[virtualenv](http://pypi.python.org/pypi/virtualenv "虚拟环境")，然后在其中安装 PIL：

```
pip install PIL 
```

我使用这种技术在 MacPorts 中使用 Python 2.7 在 Snow Leopard 上运行良好的 PIL。

如果您无法启动和运行 virtualenv，我建议您使用[virtualenv-burrito](https://github.com/brainsik/virtualenv-burrito "virtualenv-卷饼")，它会自动为您设置好一切。

# c# - 为什么活动需要代表？为什么我们甚至需要事件？

> ID：10775540
> 
> 赞同：5
> 
> 时间：2012-05-27T16:33:09.650
> 
> 标签：c#, wpf, winforms

在过去的几周里，我一直对事件感到困惑。我了解代表的工作方式，而不是详细的工作方式，但足以知道这 `delegate datatype`是一个单一的演员代表。 `delegate void`是一个多播委托 - 对方法的引用列表。

我知道委托类型编译为一个类，但不幸的是我仍然不确定如何引用该方法。例如

```
delegate void TestDelegate();
TestDelegate testDelegate = new TestDelegate(myObject.SomeMethod) ; 
```

问题1：我认为myObject 是目标，SomeMethod 是要引用的方法，但我只传递一个输入。那么 myObject.SomeMethod 是否编译为字符串，字符串是否按句点拆分？可笑我知道。

问题 2：当您添加到多播委托时

```
multicastdelegate+=newmethodtobereference
multicastdelegate() ; 
```

调用列表中的每个方法都被调用或通知？如果这是真的，为什么***我***需要事件或`event`关键字？只是简单的告诉开发者，嘿，这是在充当事件吗？因为我很困惑，我只想在这个阶段继续前进，哈哈。这是我今天写的一个示例代码来测试它是否需要事件关键字。

```
using System;
namespace LambdasETs
{
    public delegate void IsEvenNumberEventHandler(int numberThatIsEven);

    public class IsEvenNumberFound
    {
        public  IsEvenNumberEventHandler IsEvenNumberEvent;
        private int number;

        public void InputNumber(int n)
        {
            if(number %2 ==0)
            {
                if (IsEvenNumberEvent != null)
                {
                    IsEvenNumberEvent(n);
                }
            }
        }

        public static void Main()
        {
            IsEvenNumberFound isEvenNumberFound = new IsEvenNumberFound();

            isEvenNumberFound.IsEvenNumberEvent += IsEvenNumberAction;

             isEvenNumberFound.InputNumber(10);

            Console.ReadLine();

        }

        public static void IsEvenNumberAction(int number)
        {
            Console.WriteLine("{0} is an even number!", number);
        }
    }

} 
```

在字段中添加 event 关键字`public IsEvenNumberEventHandler IsEvenNumberEvent;`没有区别。请各位大侠解释一下，让菜鸟能看懂，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T16:43:01.220

事件是委托的访问器，就像属性是字段的访问器一样。具有大致相同的目标，它可以防止其他代码与委托对象混淆。就像当一堆您不知道的代码订阅了回调时将其设置为 null 一样。事件将访问限制为仅使用 += 和 -= 运算符添加和删除事件处理程序，外部代码根本无法访问私有委托对象。

[并使用添加和删除访问器](http://msdn.microsoft.com/en-us/magazine/cc163533.aspx)自定义订阅。您不经常这样做，因为您通常对编译器生成的默认访问器感到满意。包括一个存储委托的隐藏支持字段。但例如在框架代码中并不少见。与 System.Windows.Forms.Control 支持的许多事件的所有事件处理程序一样，它们都存储在单个 EventHandlerList 中。或 WPF 等效项 EventHandlersStore。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T16:42:12.683

> 但足以知道委托数据类型是单个强制转换委托。delegate void 是一个多播委托 - 对方法的引用列表。

不对。所有“普通”委托都是多播的，即使它们具有非 void 返回类型。

> 问题1：我认为myObject 是目标，SomeMethod 是要引用的方法，但我只传递一个输入。那么 myObject.SomeMethod 是否编译为字符串，字符串是否按句点拆分？可笑我知道。

不，`myObject.SomeMethod`是一个方法组。这种创建委托实例的方式涉及到一点编译器的魔力。

> 多播委托+=新方法作为参考

If`multicastdelegate`是一个普通的委托变量，这相当于`multicastdelegate = multicastdelegate + newmethodtobereference`ie 它创建一个调用多个方法的新委托，并将其分配给`multicastdelegate`.

* * *

现在谈谈你的主要问题：活动的目的是什么？

事件具有委托类型。它们的行为类似于属性。它们的目的是封装，特别是它们只允许消费者订阅（`+=`）和取消订阅（`-=`），但不能读取事件的值。

属性是两种方法的组合：`get`和`set`。

事件是两个公共方法`subscribe`和的组合`unsubscribe`，在类似字段的事件的情况下，也类似于私有 getter。

# python - 'str' 对象不可调用 TypeError

> ID：10775541
> 
> 赞同：2
> 
> 时间：2012-05-27T16:33:18.200
> 
> 标签：python, python-2.7

在我的代码中，我试图从文件中提取一些数据。当我尝试在**第 61 行**运行我的代码时出现此错误。我的代码在这里：

```
from datetime import date
from math import floor;
from adjset_builder import adjset_builder
def check_and_update(d,start,end,log):    
#    print start,end;
    if start in d:
        if end in d[start]:
            log.write("{0}-{1}\n".format(start, end))
            if d[start][end] == 1:
                print "one found"
            d[start][end] += 1

def build_dictionary(my_adjset,my_list,factor,outfile,log):
    log.write("building dictionary:\n");

    window_size = int(floor(len(my_list)*factor));
    if window_size<2:
        log.write("too small\n")
        return;   
    log.write('Total:{0},windowsize:{1}\n'.format(len(my_list),window_size));
    log.write("Window at place: 0,")
    for i in xrange(window_size):
        j = i+1;
        while j<window_size:
            check_and_update(my_adjset, my_list[i][1], my_list[j][1],log);
            j=j+1

    i=1;
    while i<=len(my_list)-window_size:
        log.write("{0},".format(i)) 
        j=i;
        k=i+window_size-1;
        while j<k:
            check_and_update(my_adjset, my_list[i][1], my_list[j][1],log);  
            j+=1
        i += 1  
    log.write("\nDictionary building done\n")        

def make_movie_list(infilename,factor):
    log=open('log.txt','w');
    outfile=open(infilename.split('.')[0]+"_plot_"+str(factor)+".txt",'w');
    f=open(infilename,'r');
    my_adjset=dict()
    adjset_builder('friends.txt', my_adjset);

    count =1
    while True:        
        string = f.readline();
        if string=='':
            break;        
        log.write("count:{0}\n".format(count))
        count += 1

        [movie,freunde] = string.split('=');
        freunde = freunde.split(';')
        mylist=[]
        for i in freunde:
            [user_id,date] = i.split(' ');
            [yy,mm,dd] = date.split('-');  
#            l=list((date(int(yy),int(mm),int(dd)),user_id))
            mylist.append([date(int(yy),int(mm),int(dd)),user_id]); ## line 61         
        log.write("list built");   
        print mylist         
        break;    
#        build_dictionary(my_adjset, mylist, factor,outfile,log) 
        del(mylist);   

    print 'Done'

    log.close();
    outfile.close();
    f.close();
    print count 

if __name__ == '__main__':    
    make_movie_list('grades_processed.txt',.5) 
```

但是，当我尝试在“控制台”中模拟相同的东西时，我没有收到任何错误：

```
dd='12'
mm='2'
yy='1991'
user_id='98807'  
from datetime import date
from datetime import date
l=list((date(int(yy),int(mm),int(dd)),user_id))
l [datetime.date(1991, 2, 12), '98807'] 
```

可能是非常愚蠢的事情，但我是初学者，所以似乎没有注意到错误。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T16:40:54.877

这产生`date`了一个功能：

```
from datetime import date 
```

这会产生`date`一个字符串：

```
 [user_id,date] = i.split(' '); 
```

你`TypeError`现在得到一个，因为`date`不再是一个函数：

```
mylist.append([date(int(yy),int(mm),int(dd)),user_id]); 
```

避免此错误的一种方法是[导入模块而不是函数](https://stackoverflow.com/questions/1744258/is-import-module-better-coding-style-than-from-module-import-function)：

```
import datetime as dt
mylist.append([dt.date(int(yy),int(mm),int(dd)),user_id]) 
```

或更简洁地说，

```
mylist.append([dt.date(*date.split('-')), user_id]) 
```

PS：删除所有不必要的分号！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-27T16:39:15.530

您有一个名为 date 的变量，将其重命名，使其不会影响 datetime 中的 date 函数。

# php - 管理网站/调用某些功能的首选方式

> ID：10775543
> 
> 赞同：-1
> 
> 时间：2012-05-27T16:33:45.330
> 
> 标签：php, security, administration

> **可能重复：**
> [保护网站管理部分的最佳做法是什么？](https://stackoverflow.com/questions/2848134/what-are-best-practices-for-securing-the-admin-section-of-a-website)

我想知道在您的网站上做管理工作的唯一方法，比如禁止用户、删除帖子和调用其他管理功能，是否是创建一个管理部分。唯一阻止用户在这里登录的是密码。难道没有其他选择，比如用户看不到的页面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:48:51.610

如果网站需要为常规活动和管理员（例如论坛）登录，我会使用使用相同用户数据库的**单独登录。**这确保了 XSRF 和会话窃取不会允许攻击者访问管理区域。

此外，如果 admin 部分位于单独的子目录中，则使用 Web 服务器的身份验证（例如 Apache 中的 .htaccess）保护该子目录可能是一个好主意 - 那么有人需要**该密码和用户密码**。

隐藏管理路径几乎不会带来安全收益——如果有人知道有效的登录数据，他很可能也能够找到管理工具的路径，因为他要么通过网络钓鱼或键盘记录你，要么通过社会工程获得它（这可能会揭示路径，也是）。但是即使没有模糊的路径，您也不需要指向它的链接；只需手动输入即可访问管理区域。

暴力保护，例如在 3 次登录失败后阻止用户的 IP 或在登录失败后要求验证码（不是第一次登录，因为这对合法用户来说非常烦人）也可能有用。

* * *

但总而言之，除非您的网站包含敏感信息等，否则在大多数情况下，安全密码和没有安全漏洞就足够了。

# jquery - 在我在同一个函数[JQuery]中清除它之后，重新启动一个间隔到一个.click（函数（））

> ID：10775547
> 
> 赞同：1
> 
> 时间：2012-05-27T16:34:33.457
> 
> 标签：jquery, slider, setinterval, clearinterval

我在 JQuery 中做一些滑块。

因此，我从调用转换的间隔开始，并在有人单击“下一步”按钮时将其清除。因为如果他在间隔结束之前点击它，他将没有时间阅读我的滑块......但我希望这个间隔在点击后重新初始化以继续我的幻灯片，如果他没有做任何其他事情。

我试图把它放在我的 .click 函数中的 translate 函数之后，但这会做一些奇怪的事情......点击后我的时间不对。这就像两个间隔同时运行或类似的东西。

任何人都可以对我说在点击转换后“重新启动”它的最优雅的方法？

这是现在的代码：（没有第二次启动间隔）

```
var jq=jQuery.noConflict();  

jq(document).ready(function() {
    jq('.highlight_container').css('x','0');
});

// Animation Loop

jq(document).ready(function() {
    var checkClick = setInterval(function(){
        if (jq('.highlight_container').css('x') === '-2100px'){
            jq('.highlight_container').transition({
            x: '0px',
            duration: '750',
            easing: 'in-out',
            });
        }
        else {
            jq('.highlight_container').transition({
            x: '-=700px',
            duration: '500',
            easing: 'out',          
            });
        }
    }, 5000);

// Next Button  

    jq('.highlight_next').click(function() {
        clearInterval(checkClick);
        if (jq('.highlight_container').css('x') === '-2100px') {
            jq('.highlight_container').transition({
                x: '+=2100px',
                duration: '750',
                easing: 'in-out',
            });
        }   
        else {
            jq('.highlight_container').transition({
                x: '-=700px',
                duration: '500',
                easing: 'out',
            }); 
        }
    });

// Prev Button      

    jq('.highlight_prev').click(function() {
        clearInterval(checkClick);      
        if (jq('.highlight_container').css('x') === '0px') {
            jq('.highlight_container').transition({
                x: '-=2100px',
                duration: '750',
                easing: 'in-out',
            });
        }   
        else {
            jq('.highlight_container').transition({
                x: '+=700px',
                duration: '500',
                easing: 'out',
            }); 
        }
    });
}); 
```

提前感谢任何遮阳篷：]

编辑：

只需在我的 clik 函数末尾添加 setinterval() 函数似乎就可以了。但这很丑陋。

```
var jq=jQuery.noConflict();  

jq(document).ready(function() {
    jq('.highlight_container').css('x','0');
});

// Animation Loop

jq(document).ready(function() {
    var checkClick = setInterval(function(){
        if (jq('.highlight_container').css('x') === '-2100px'){
            jq('.highlight_container').transition({
            x: '0px',
            duration: '750',
            easing: 'in-out',
            });
        }
        else {
            jq('.highlight_container').transition({
            x: '-=700px',
            duration: '500',
            easing: 'out',          
            });
        }
    }, 5000);

// Next Button  

    jq('.highlight_next').click(function() {
        clearInterval(checkClick);
        if (jq('.highlight_container').css('x') === '-2100px') {
            jq('.highlight_container').transition({
                x: '+=2100px',
                duration: '750',
                easing: 'in-out',
            });
        }   
        else {
            jq('.highlight_container').transition({
                x: '-=700px',
                duration: '500',
                easing: 'out',
            }); 
        }
        checkClick = setInterval(function(){
            if (jq('.highlight_container').css('x') === '-2100px'){
                jq('.highlight_container').transition({
                x: '0px',
                duration: '750',
                easing: 'in-out',
                });
            }
            else {
                jq('.highlight_container').transition({
                x: '-=700px',
                duration: '500',
                easing: 'out',          
                });
            }
        }, 5000);
    });

// Prev Button      

    jq('.highlight_prev').click(function() {
        clearInterval(checkClick);      
        if (jq('.highlight_container').css('x') === '0px') {
            jq('.highlight_container').transition({
                x: '-=2100px',
                duration: '750',
                easing: 'in-out',
            });
        }   
        else {
            jq('.highlight_container').transition({
                x: '+=700px',
                duration: '500',
                easing: 'out',
            }); 
        }
        checkClick = setInterval(function(){
            if (jq('.highlight_container').css('x') === '-2100px'){
                jq('.highlight_container').transition({
                x: '0px',
                duration: '750',
                easing: 'in-out',
                });
            }
            else {
                jq('.highlight_container').transition({
                x: '-=700px',
                duration: '500',
                easing: 'out',          
                });
            }
        }, 5000);
    });
}); 
```

有没有办法在没有 20 行代码的情况下再次调用相同的函数？

# java - 如何导入 com.mysql.jdbc.Driver

> ID：10775552
> 
> 赞同：1
> 
> 时间：2012-05-27T16:35:54.173
> 
> 标签：java, mysql-connector

我一直在尝试连接到我的数据库，现在我想我已经很接近了。
但`com.mysql.jdbc.Driver`拒绝加载。
这是我的代码：

```
import java.sql.*;
import com.apple.eawt.*;
import com.mysql.jdbc.Driver;

public class MySQL {
    public MySQL() {
        Connection conn = null;

        try
        {
            String userName = "my_username";
            String password = "*******";
            String url = "jdbc:mysql://korilu.nl/phpMyAdmin/";
            Class.forName ("com.mysql.jdbc.Driver").newInstance ();
            conn = DriverManager.getConnection (url, userName, password);
            System.out.println ("Database connection established");
        }
        catch (SQLException ex)
        {
            System.err.println ("Cannot connect to database server (SQLException)");
            System.out.println(ex.getMessage());
        }
        catch (ClassNotFoundException ex) {
            System.err.println ("Cannot connect to database server (ClassNotFoundException)");
            System.out.println(ex.getMessage());
        }
        catch (InstantiationException ex) {
            System.err.println ("Cannot connect to database server (InstantiationException)");
            System.out.println(ex.getMessage());
        }
        catch (IllegalAccessException ex) {
            System.err.println ("Cannot connect to database server (IllegalAccesException)");
            System.out.println(ex.getMessage());
        }
        finally
        {
            if (conn != null)
            {
                try
                {
                    conn.close ();
                    System.out.println ("Database connection terminated");
                }
                catch (Exception e) { /* ignore close errors */ }
            }
        }
    }

    public static void main(String args[]) {
        new MySQL();
    }

} 
```

目前它说：包`com.mysql.jdbc`不存在，尽管 XCode 自动完成`import`上面的行。
我想我搞砸了将包添加到我的项目中，因为我不知道如何。
我只是 ctrl+单击了我的目标并选择`Add to target...`并添加了带有我下载的 .java 文件的 com 文件夹。
我认为编译器不会将它识别为一个包，但我不知道如何将它变成一个包。

PS
我不太确定那个 URL，但这不是现在的问题（但我不介意有人告诉我对手存储他们的数据库的位置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:42:49.163

我不确定 Xcode 是如何处理这个问题的，因为我没有将它用于 Java 开发，但是这个错误的通常原因是 MySQL jdbc（连接器）jar 文件不在类路径上。你能告诉我们 Xcode 用来启动 jvm 的命令吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T16:46:38.863

如果您还没有，只需将此库文件添加到您的库中即可。

[mysql 连接器 5.1](http://www.4shared.com/file/FxoH5hv4/mysql-connector-java-5113-bin.html)

# java - 在浏览器中捕获当前正在播放的声音

> ID：10775553
> 
> 赞同：0
> 
> 时间：2012-05-27T16:36:03.690
> 
> 标签：java, javascript, silverlight, html, actionscript

**情况：**
我有一个网站正在运行，我想从用户的声卡中捕捉当前正在播放的声音，并用它做一些可视化。
我想可视化我的客户现在正在听什么。

**我想使用：**
Flash、HTML5 和 JavaScript。**没有 Java 或 Silverlight**，但如果你的情况只是这些，请写在这里，我想知道所有的可能性。

**问题：**
这甚至可能吗？如果是，如何？如果不是，请说明原因。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:25:25.233

你不能。您提到的浏览器技术都没有能力做到这一点。

Flash 可以捕获声音*输入*（例如，来自麦克风），但它无法收听系统声音输出。

# php - Yii 框架：showdialogbox (CJuiDialog)

> ID：10775554
> 
> 赞同：1
> 
> 时间：2012-05-27T16:36:35.963
> 
> 标签：php, widget, yii

我想打开一个对话框，但它应该是我菜单的一部分。我有一个这样的CMenu：

```
<?php $this->widget('zii.widgets.CMenu',array(
            'items'=>array(
                                array('label'=>'Login', 'url'=>"#", 'onclick'=>'$("#mydialog").dialog("open"); return false;'),

                array('label'=>'Logout ('.Yii::app()->user->name.')', 'url'=>array('/site/logout'), 'visible'=>!Yii::app()->user->isGuest),
                                array('label'=>'Home', 'url'=>array('/site/index')),
                                array('label'=>'About Me', 'url'=>array('/site/index'), 
                                    'items'=>array(
                                             array('label'=>'CV', 'url'=>array('/site/cv')),
                                             array('label'=>'Contact', 'url'=>array('/site/contact')))),
                array('label'=>'About', 'url'=>array('/site/page', 'view'=>'about')),

                                array('label'=>'Register', 'url'=>array('/tblUsers/create'))

            ),
        )); ?> 
```

如您所见，我已经尝试以某种方式将其添加到我的菜单中，但我不知道自己在做什么。我可以像这样在外面打开它：

```
echo CHtml::link('open dialog', '#', array(
   'onclick'=>'$("#mydialog").dialog("open"); return false;')); 
```

所以这就是我在上面的菜单中实际尝试实现的，但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T16:53:11.500

你应该使用`linkOptions`or`itemOptions`来达到这个目的：

```
<?php $this->widget('zii.widgets.CMenu',array(
  'items'=>array(
    array('label'=>'Login', 'url'=>"#", 'linkOptions' => array(
       'onclick'=>'$("#mydialog").dialog("open"); return false;'),
    )),
    /* other menu items */
  )
)); ?> 
```

[链接到 api 文档](http://www.yiiframework.com/doc/api/1.1/CMenu#items-detail)

# c# - 如何在二维数组中动态添加值？

> ID：10775565
> 
> 赞同：3
> 
> 时间：2012-05-27T16:38:06.683
> 
> 标签：c#, winforms

我正在使用二维数组。我想要的是在我的二维数组的特定列中动态添加元素，名为`symboltable2`. 我一直在这样做；

结果是另一个一维数组，其中有某些单词：

```
string[,] symboltable2 = new string[,];

if (result.Contains("int")) {
    for (int todynamic = 0; todynamic < result.GetLength(0); todynamic++) {
        symboltable2[todynamic, 6] = "int";
    }
    for (int sym2 = 0; i < symboltable1.GetLength(0); sym2++) {
        f4.listBox6.Items.Add(symboltable1[sym2, 5]); // To show if the values are added or not
    }
} 
```

但上面的代码没有给我任何结果......请帮助:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:57:00.140

您需要设置数组的大小。为了让它公开，我将使用一个属性并在类构造函数中初始化你的数组，如下所示：

```
public class MyClass
{
    public string[,] symboltable2 { get; set; } 

    public MyClass()
    {
        symboltable2 = new string[10,10];
    }

            // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T16:56:56.177

在实现数组时，您需要给出数组的维度，即

```
string[,] sa = new string[5,15]; 
```

或者

```
string[,] sa = new string[listString1.Count, listString2.Count] 
```

关于将元素添加/更改到二维数组..作为一个简单的字符串数组示例：

```
sa[0, 1] = "a";
sa[0, 2] = "b";
sa[1, 0] = "Istanbul / Turkey"; 
```

# ruby-on-rails-3 - 返回电子邮件地址的 OAuth 提供商

> ID：10775569
> 
> 赞同：2
> 
> 时间：2012-05-27T16:38:33.053
> 
> 标签：ruby-on-rails-3, devise, oauth-2.0

我刚刚开始使用[Devise](https://github.com/plataformatec/devise)在 Ruby on Rails 中设置 OAuth 身份验证，到目前为止已成功设置 Yahoo、Google 和 Facebook 登录。

我的目标是提供一键式注册，所以我需要提供商返回一个电子邮件地址，我很失望地得知 Twitter 和 LinkedIn 不返回一个电子邮件地址。我看过“完成注册过程”的教程，但对于我的网站来说，这会破坏一键注册的目的。

除了前面提到的可用于此目的的电子邮件地址之外，是否还有任何其他 OAuth 提供商返回电子邮件地址？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T07:43:39.343

如果您要求，LinkedIn 的 API 会提供电子邮件 ID。据我所知，只有 Twitter 不发送电子邮件 ID。是的，确实是脖子疼。我必须为 Twitter 用户首次登录我的应用程序创建一个单独的“检查点”流程并询问电子邮件 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:33:28.507

顺便说一句，如果您请求，Google 的 OAuth 2.0 身份验证端点会返回电子邮件地址，以及其他有用的数据，例如用户的照片、名字和姓氏、生日等......

文档在这里：[https ://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

# ruby-on-rails - 重写规则中的无限循环：如何防止 url 中的 www？

> ID：10775571
> 
> 赞同：1
> 
> 时间：2012-05-27T16:38:45.337
> 
> 标签：ruby-on-rails, apache, mod-rewrite, url-rewriting, rewrite

我希望我的网站只能通过以下两个网址访问：

```
http://domain.com
http://origin.domain.com 
```

但是下面的重写规则进入了一个无限循环：

```
RewriteCond %{HTTP_HOST} !^(origin)\.domain\.com [NC]
RewriteRule (.*) http://domain.com$1 [R=301,L] 
```

我究竟做错了什么？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:42:19.127

将第一行更改为

```
RewriteCond %{HTTP_HOST} !^(origin)?\.?domain\.com [NC] 
```

# python - 使用scrapy进行HXS过滤 - python

> ID：10775573
> 
> 赞同：3
> 
> 时间：2012-05-27T16:38:57.617
> 
> 标签：python, select, filter, scrapy

我是这个领域的新手，我需要更多信息。我在互联网上找不到任何信息。例如现在我使用这个功能`hxs.select('//div[@id="CategoryBreadcrumb"]//text()').extract()`。在这方面，除了一个之外，`div`我都有`ul`和`li`s 与`a`nchors `li`。我需要其中`li`没有`a`标签的文本。如果您也提供任何有关 hxs 过滤的教育链接，我将不胜感激。提前致谢！如果您无法想象我需要什么，这是一个示例。

```
<div id='CategoryBreadcrumb'>
<ul>
  <li><a href=#>I dont need</a></li>
  <li><a href=#>I dont need</a></li>
  <li><a href=#>I dont need</a></li>
  <li>Text that i need</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T16:58:39.483

尝试：

```
hxs.select('//div[@id = "CategoryBreadcrumb"]/ul/li/text()') 
```

要了解有关 XPath 的更多信息，请参阅[w3schools](http://www.w3schools.com/xpath/xpath_syntax.asp)了解基础知识和[w3.org](http://www.w3.org/TR/xpath/)了解完整规范。

* * *

PS：scrapy 使用 lxml。您可以使用如下代码测试您的 XPath：

```
import lxml.html as LH

text = '''
<div id='CategoryBreadcrumb'>
<ul>
  <li><a href=#>I dont need</a></li>
  <li><a href=#>I dont need</a></li>
  <li><a href=#>I dont need</a></li>
  <li>Text that i need</li>
</ul>
</div>
'''

doc = LH.fromstring(text)
print(doc.xpath('//div[@id = "CategoryBreadcrumb"]/ul/li/text()'))

# ['Text that i need'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T03:22:24.727

您还可以尝试使用以下命令来使用 scrapy shell 命令：
`scrapy shell "http://yourdomain.com"`
您将获得一个带有各种现成可用变量的 python shell，包括 hxs(HtmlXPathSelector)。
在那里测试你的xpath。

# clojure - Clojure - 自动更新列表框

> ID：10775578
> 
> 赞同：6
> 
> 时间：2012-05-27T16:39:33.750
> 
> 标签：clojure, listbox, seesaw

这就是我想做的：

我有一个代表项目列表的***ref 。***我想要一个显示此列表内容的***列表框（跷跷板？），自动更新（每当我更改参考时）。***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T17:35:15.313

您可以使用[add-watch](http://clojuredocs.org/clojure_core/clojure.core/add-watch)添加回调，每次修改 ref 时都会调用该回调。此回调应调用更新列表框的方法：

```
(def data (ref [1 2 3]))

(defn list-model 
  "Create list model based on collection"
  [items]
  (let [model (javax.swing.DefaultListModel.)]
    (doseq [item items] (.addElement model item))
    model))

(def listbox (seesaw.core/listbox :model [])) 

(add-watch data nil
  (fn [_ _ _ items] (.setModel listbox (list-model items)))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T09:18:26.237

另一种方法是使用 seesaw.bind 将 ref 的内容绑定到列表框的模型。

```
(require [seesaw core [bind :as b]])
(def lb (listbox))
(def r (ref []))
(b/bind r (b/property lb :model)) 
```

恕我直言，seesaw.bind 库非常值得探索。一旦你知道它是如何组合在一起的， [API就会有很好的文档记录；](http://daveray.github.com/seesaw/seesaw.bind-api.html)[这篇博文](http://blog.darevay.com/2011/07/seesaw-widget-binding/)是一个很好的介绍。

# javascript - 我可以在 JavaScript 中定义“后备”方法吗？

> ID：10775580
> 
> 赞同：4
> 
> 时间：2012-05-27T16:40:00.610
> 
> 标签：javascript

是否可以（以一种高效的方式）在 JavaScript 中定义“后备”方法？

例如

```
function MyObject () {
   /* what do i have to add here to have my defaultMethod? */
}

var obj = new MyObject ();
obj.doesntExistInMyObject (); // I want defaultMethod to be called
obj.doesntExistEither (); // I want defaultMethod to be called, too 
```

即：我想`defaultMethod`在我写`obj.calledMethod ();`and时被调用`obj.calledMethod == undefined`，但我不想`undefined`在调用代码中检查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T16:42:43.737

JavaScript 目前没有这个功能。不过，它可能会在下一个版本中通过[代理](http://wiki.ecmascript.org/doku.php?id=harmony%3aproxies)。所以在那之前，要做到这一点，你必须做一些相当丑陋的事情，比如：

```
MyObject.prototype.ex = function(fname) {
    var f    = this[fname],
        args = Array.prototype.slice.call(arguments, 1);
    if (typeof f === "function") {
        return f.apply(this, args);
    }
    return this.defaultMethod.apply(this, args);
}; 
```

...并像这样使用它：

```
var obj = new MyObject();
obj.ex("doesntExistInMyObject", "arg", "arg"); 
```

（`ex`对于“执行”，因为`call`太容易与 混淆[`Function#call`](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.4)。）

# python - 再次运行 Python 脚本

> ID：10775583
> 
> 赞同：3
> 
> 时间：2012-05-27T16:40:46.663
> 
> 标签：python, wxpython

假设我有这个示例代码：

```
import wx

app = wx.App(False)  # Create a new app, don't redirect stdout/stderr to a window.
frame = wx.Frame(None, wx.ID_ANY, "Hello World") # A Frame is a top-level window.
s=wx.Button(frame,-1,"New")
frame.Show(True)     # Show the frame.
app.MainLoop() 
```

就像在某些程序中一样，如果您按下新建按钮，它将在另一个窗口中再次打开该程序。我想知道，我怎么能在python中做到这一点？

我不能制作一个窗口对象然后复制它，因为在我的实际程序中，我使用的是全局变量，而这些全局变量仅用于一个窗口。

看来我唯一的选择是找到再次运行该程序的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T16:53:26.780

你可以试试这样的

```
import subprocess
import sys
new_process = subprocess.Popen([sys.executable]+sys.argv) 
```

它将使用最初运行的参数再次运行 python。或修改您的原始示例以使按下按钮再次运行脚本：-

```
import wx
import subprocess
import sys

def re_run(e):
    new_process = subprocess.Popen([sys.executable]+sys.argv)

app = wx.App(False)  # Create a new app, don't redirect stdout/stderr to a window.
frame = wx.Frame(None, wx.ID_ANY, "Hello World") # A Frame is a top-level window.
s=wx.Button(frame,-1,"New")
s.Bind(wx.EVT_BUTTON, re_run)
frame.Show(True)     # Show the frame.
app.MainLoop() 
```

# jquery - Joomla 2.5 上不显示 jQuery UI 自动完成功能

> ID：10775586
> 
> 赞同：0
> 
> 时间：2012-05-27T16:41:16.097
> 
> 标签：jquery, jquery-ui, jquery-autocomplete, joomla2.5

我实际上是在 Joomla 2.5.4 中编写自定义组件，并且添加了 JQuery（1.7.2 版）和 jQuery Ui（1.8.20 版）。实际上，我正在使用 jQuery Ui 选项卡没有任何问题，并且我正在尝试使用 jQuery Ui 自动完成和从 Joomla 中的模型加载的 JSON 字符串。如果我尝试在“输入框”中输入某些内容，则什么也没有发生（自动完成功能不起作用或显示任何建议），但这很奇怪，因为当我在输入中写入内容时，我的组件被调用（实际上我是使用 xDebugger 和 Eclipse PDT）。

它首先调用 Mootools，然后我添加了 jQuery js，并编写了 jQuery.noConflict，并且，正如我所说，Ui Tabs 可以正常工作。

这是我的 joomla 视图中的一个函数，它将 js 推送到模板中：

```
private function setTemplateAttributes($document){
        $app = JFactory::getApplication();
        $tp = $app->getUserState('product.Types');
        $products = addslashes(base64_decode($tp["types"]));
        $document->addStyleSheet(JURI::root(true)."/components/com_mercurio/assets/jQueryUi/css/smoothness/jquery-ui-1.8.20.custom.css");
        $document->addStyleSheet(JURI::root(true)."/components/com_mercurio/assets/jQueryUi/development-bundle/themes/smoothness/jquery.ui.autocomplete.css");
        JHTML::_("behavior.mootools");
        $document->addScript(JURI::root(true)."/components/com_mercurio/assets/jQueryUi/js/jquery-1.7.2.min.js");
        $document->addScriptDeclaration('$j = jQuery.noConflict();');
        $document->addScript(JURI::root(true)."/components/com_mercurio/assets/jQueryUi/js/jquery-ui-1.8.20.custom.min.js");
        $document->addScript(JURI::root(true)."/components/com_mercurio/assets/jQueryUi/development-bundle/ui/jquery.ui.core.js");
        $document->addScript(JURI::root(true)."/components/com_mercurio/assets/jQueryUi/development-bundle/ui/jquery.ui.widget.js");
        $document->addScript(JURI::root(true)."/components/com_mercurio/assets/jQueryUi/development-bundle/ui/jquery.ui.autocomplete.js");
        $document->addScript(JURI::root(true)."/components/com_mercurio/assets/jQueryUi/development-bundle/ui/jquery.ui.position.js");
        $document->addScriptDeclaration('onReadyDocument();');
        $document->addScriptDeclaration("loadProducts(\"$products\")");
        $document->addScript(JURI::root(true)."/components/com_mercurio/assets/js/jGui.js");

        return $document;
    } 
```

我正在使用的模板非常简单：

```
<label for="ptCode">Product Type</label>
<input id="ptCode" name="ptCode" type="text" size="6" maxlength="6"/>
<input id="dsProduct" name="dsProduct" type="text" size="25" maxlength="25"/> 
```

这就是我尝试使用 ui 自动完成的方式：

```
function loadProducts(jsonProducts){
            $j("#ptCode").autocomplete({
                source: jsonProducts,
                minLength: 2,
                select: function (event, ui){
                    $j("#ptCode").val(ui.item.data.productTypeCode);
                    $j("#dsProduct").val(ui.item.data.productTypeDesc);
                }
            });
} 
```

我正在使用模板中加载的 JSON，格式如下：

```
{\"productTypeCode\" : \"1\", \"productTypeDesc\" : \"2 ETIL HEXIL ACETATE\"},... 
```

我试图在 js 函数中放置一个警报，以查看它的代码是否正常工作，这很奇怪，因为这个警报显示仅在页面加载时显示，而不是在我输入时。

问题是：我做错了什么？

所有的答案都被欣然接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:17:00.507

确保`jsonProducts`是对象数组，而不是 json 字符串（`$.parseJSON`如果是字符串则使用）。

至于您的问题，jQuery ui`value.label || value.value || value`会在搜索匹配项目（项目在哪里`value`）时进行查找，这意味着您需要拥有`value: "xxx"`或`label: "yyy"`在您的产品项目中，例如：

```
[{
  productTypeCode: 1, 
  productTypeDesc: "2 ETIL HEXIL ACETATE", 
  value: "2 ETIL HEXIL ACETATE"
}, {
  ...
}] 
```

要转换您的数据，您可以执行以下操作：

```
$.each(jsonProducts, function(i, obj) {
    obj.value = obj.productTypeDesc
}); 
```

# build - Xcode 构建问题

> ID：10775589
> 
> 赞同：1
> 
> 时间：2012-05-27T16:42:13.433
> 
> 标签：build, clang, xcode4.3, symbols, invocation

当我尝试“构建”（失败）时，我收到了两个错误的反馈：（这个项目在我将 IOS 设备升级到 5.1 之前构建并运行良好——我什至不能使用模拟器)

第一个错误：“_OBJC_CLASS_$_CLLocationManager”，引用自：BTIclinometerViewController.o ld 中的 objc-class-ref：未找到架构 i386 的符号

第二个错误：clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我不明白的是： - Xcode 中的“符号”一词是什么意思；-- 我如何去识别并满足缺失的符号；-- 我如何“（使用 -v 查看调用）”

我使用的是 MAC OSX 10.7.3 和 Xcode 版本 4.3.2

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T16:49:09.580

确保在项目中包含核心位置框架。转到您的项目，构建阶段，将二进制文件与库链接。然后添加框架。

如果有，请确保在课堂上包含正确的标题。

# ruby-on-rails - 使用 simple_form 限制表单的长度？

> ID：10775591
> 
> 赞同：0
> 
> 时间：2012-05-27T16:42:30.457
> 
> 标签：ruby-on-rails, css, ruby-on-rails-3.2, simple-form

我在页面顶部的导航区域内为我的网站使用简单的表单作为基本登录表单。

目前，无论`display: inline`我应用多少属性，它都会将表单字段溢出两行。它仍然拒绝回到一条线上。我试图做的是限制表单中的字符数，以便字段适合一行。

这是我当前的表单代码..

```
<%= simple_form_for("user", :url => user_session_path, :html => {:id => "sign_in", :class => 'form-inline' }, :remote => true, :format => :json) do |f| %>
    <%= f.input :email %>
    <%= f.input :password %>
    <%= f.submit 'Login' %>
    <%= link_to "Forgot your password?", new_password_path('user') %>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:19:49.560

简单的方法是简单地使用 maxlength html 属性进行输入：

```
f.input :name, :input_html => { :maxlength => x } 
```

但这只会限制可以添加到单个输入中的字符数。如果您的问题与这些输入的宽度有关，只需使用 CSS 为每个输入指定自定义宽度，这样输入就不会溢出到第二行。

# c++ - 如何最好地将 C++/Cython 项目编译成可执行文件？

> ID：10775596
> 
> 赞同：10
> 
> 时间：2012-05-27T16:42:59.097
> 
> 标签：c++, python, compilation, cython

我有一个包含一堆 C++ 和 Python/Cython 文件的项目。到目前为止，我主要开发了 C++ 部分并使用 qmake 将其编译为静态库。一些方法通过 boost::python 公开，并从 .py 文件执行。

我现在想把整个东西编译成一个独立的可执行文件。

我现在的问题是：最好的方法是什么？我尝试切换到 Cython，编译 python 文件并链接库。但似乎 distutils/setup.py 没有直接的方法来编译可执行文件，只有共享库。

有没有办法一次轻松地**将 .cpp 和 .pyx**文件编译成**可执行文件**？

这样我就可以摆脱很多 boost::python 包装器的东西，得到一个整洁的 c++/python 组合，而不必导入共享库并用 pyinstaller 打包整个东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:53:39.350

你应该调查：

*   [pyinstaller](http://www.pyinstaller.org/) (或[py2exe](http://www.py2exe.org/) ) 用于 windows/linux
*   用于 osx 的[py2app](http://pypi.python.org/pypi/py2app/)

由于 python 是您的入口点，您将能够将独立的解释器、环境和资源位置捆绑到 app/exe/binary 中。它将您所有的库模块收集到其独立的站点包中

如果您不使用任何普通的纯 py 文件并且只有 cython 文件，那么也可以将解释器嵌入其中一个作为带有 --embed 标志的 cython 入口点： [http://wiki.cython .org/EmbeddingCython](http://wiki.cython.org/EmbeddingCython)
注意，这是与前面提到的打包选项类似的“冻结”方法，但不会花费额外的时间来构建一个自包含的环境

# jquery - jquery用插件加载外部html

> ID：10775598
> 
> 赞同：0
> 
> 时间：2012-05-27T16:43:33.167
> 
> 标签：jquery, html, ajax, external, flexslider

我正在使用 jquery 的 ajax 加载功能来加载外部 html。外部 html 使用 jquery 和一个名为 flexslider（一个图片库）的 jquery 插件。文档说要加载 flexslider：

```
<script type="text/javascript" charset="utf-8">
    $(window).load(function() {
        $('.flexslider').flexslider({
            slideshow: true, slideshowSpeed: 7000, animationDuration: 600, pauseOnAction: true, pauseOnHover: false});
    });
</script> 
```

当我调用它时，它不起作用。我尝试在父页面上执行此操作，但似乎也不起作用。我还确保在初始化 flexslider 之前加载外部 html。我应该在父页面上使用另一个事件而不是

```
$(window).load(function(){}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:21:48.977

不使用`$(window).load(function(){});`

利用`$(document).ready(function(){});`

或者

```
window.onload = mymethod();
function mymethod()
{
   alert('onload occured')
} 
```

​改为

[看演示](http://jsfiddle.net/nawazhi/Pgbg6/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:58:16.953

当您使用 ajax 加载 html 页面时，加载后您可以在 ajax 完成时绑定**flexslider**（如回调），而不是在 $(window).load() 或 $(window).ready() 中进行绑定。

```
.load( url [, data] [, complete(responseText, textStatus, XMLHttpRequest)] ) 
```

参考[http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:40:17.280

看看[http://wordpress.org/extend/plugins/advanced-ajax-page-loader/faq/](http://wordpress.org/extend/plugins/advanced-ajax-page-loader/faq/)。

基本上，问题归结为 jquery/javascript 用来将函数附加到事件的钩子。您希望使用的许多普通挂钩 - 例如 jQuery(document).ready(...) - 在 ajax 加载后不会触发。

因此，您必须采用在页面加载时触发的相同代码，并确保它在 ajax 加载*后也被触发。*

警告：我自己实际上从来没有这样做过，所以恐怕我不能给出代码示例。我只是在做一些自己可能需要这个功能的东西，所以我想我会分享我在探索中发现的东西。

# php - php准备好的语句

> ID：10775599
> 
> 赞同：0
> 
> 时间：2012-05-27T16:43:39.600
> 
> 标签：php

它不打印结果。不知道为什么。一切都整齐地评论

我没有错误显示，没有语法亵渎，它只是不打印任何结果。但是，我知道这些值是通过表单传递给这个处理 php 页面的，所以错误不在那里。在数据库中，我已经加密了除“公司”之外的所有字段-因此，我想通过尝试取回结果来查看这是否有效。

```
// 1\. Creating a new server connection

$db = new mysqli('localhost', 'root', '', 'developers');
if ($db->connect_errno) {
    printf("Connect failed: %s\n", $mysqli->connect_error);
    exit();
}
// 2, Creating statement object
$stmt = $db->stmt_init();

// 3, Creating a prepared statement
if($stmt->prepare("SELECT company FROM accesoweb WHERE username = AES_DECRYPT(?, 'salt')")) {

//4\. Binding the variable to replace the ?
    $stmt->bind_param('s', $username);

    printf("Error: %d.\n", $stmt->errno);

// 5\. Executing query
    $stmt->execute();

// 6\. Binding the result columns to variables
    $stmt->bind_result($company); 

// 7\. Fetching the result of the query
    while($stmt->fetch()) {
        echo $company; 
    }

// 8\. Closing the statement object
   $stmt->close();

// 9\. Closing the connection

 $mysqli->close(); 
```

# }

我刚刚包含在 MySQL 中的插入代码是：

```
INSERT INTO accesoweb (company, username,email,password)
VALUES
 ('hola',
AES_ENCRYPT('maria','salt'),
AES_ENCRYPT('sumail','salt'),
AES_ENCRYPT('password',' salt')

); 
```

所以，上面的那一行（实际上，“公司”是我试图通过 PHP 代码恢复的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T17:40:30.360

```
SELECT company FROM accesoweb WHERE username = AES_DECRYPT(?, 'salt') 
```

应该

```
SELECT company FROM accesoweb WHERE username = AES_ENCRYPT(?, 'salt') 
```

或者

```
SELECT company FROM accesoweb WHERE AES_DECRYPT(username, 'salt') = ? 
```

# c++ - 如何在 BlackBerry 10 Simulator 上模拟捏合？

> ID：10775600
> 
> 赞同：16
> 
> 时间：2012-05-27T16:43:44.403
> 
> 标签：c++, c, blackberry-simulator, blackberry-10, vmware-player

我正在使用适用于 BlackBerry 10 的 Native SDK 开发一个项目。我正在使用 BlackBerry 10 Dev Alpha Simulator 进行测试。我似乎无法模拟捏事件，并进行了一些搜索以发现这尚未在模拟器中实现。

所以基本上，我需要一种方法来以编程方式创建捏并在触发其他事件时运行它。最简单的方法是什么？

编辑：

我不是在寻找与语言无关的解决方案。我需要一个架构实现。如何继续使用`gesture_pinch_t`创建捏事件（即使使用硬编码参数）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T22:15:02.950

我更多地参与了 RIM 的 WebWorks 和 AIR 团队，但在我的脑海中，一个与语言无关的解决方案将类似于以下内容：

*   你有一些捏事件的处理程序，它能够处理事件传递的数据（gesture_pinch_t）
*   除了使用 pinch 事件来触发回调，您可以使用其他一些可获得的事件来模拟捏合（可能是双击或您打开的测试切换按钮，然后所有触摸事件都成为模拟捏合的开始）。
*   然后您将质心属性设为您的起始坐标，然后当您用手指（或者在本例中，使用模拟器中的光标）拖动时，您可以通过将当前坐标减去您制作质心的原点坐标来计算距离属性.

同样，我还没有专门深入研究 NDK，但这是我将采用 JavaScript 或 ActionScript 的方法，并且非常可行。我希望我能写一个代码片段，但希望这能帮助你朝着正确的方向前进。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T13:35:33.370

只是为了让您知道模拟器现在支持多个触摸手势。只需右键单击并拖动即可添加触摸事件，再次执行以模拟更多触摸事件，然后单击鼠标左键同时执行它们。

捏合手势示例：

![在此处输入图像描述](../Images/e2dede7f33e9f7ca004551327013adda.png)

# javascript - 如何使用 Jquery 获取 XML 文件并在每次加载时以随机顺序显示元素？

> ID：10775601
> 
> 赞同：2
> 
> 时间：2012-05-27T16:43:50.297
> 
> 标签：javascript, jquery

我一直在尝试使用 Ajax 构建一个问答应用程序。我需要帮助创建一个特定的功能。我创建了包含不同问题和答案的 XML 文件。基本思想是使用“get”函数（1）加载一个 XML 问题文件，（2）使用“display”和“math.random”函数显示一个随机的“question”元素（对应的“answer”元素将同时显示，但被 Javascript 隐藏。）这是我正在使用的 XML 文件的格式。这些节点由父节点 Words..

```
<WordQuestions>
    <Question>Question1</Question>
    <Answer>Answer1</Answer>
</WordQuestions>

<WordQuestions>
    <Question>Question2</Question>
    <Answer>Answer2</Answer>
</WordQuestions> 
```

我需要创建一个函数，该函数可以从 XML 文件中随机选择一个问答元素，将其显示给用户，但不会在用户后续点击时再次显示。因此，一旦向用户显示问题，就需要将其从问题列表中删除，以便在下次单击时向用户显示。有人知道怎么做这个吗？

我创建了一个类似魅力的功能，但它的局限性在于它过于随机 - 可能永远不会选择问题和答案元素来向用户显示，或者它可能被选择的次数不成比例。用户需要练习所有的问题。这是此功能的精简版。

```
<script language = "javascript">

  function getCategory()
  {
    var XMLHttpRequestObject = false; 

    if (window.XMLHttpRequest) {
      XMLHttpRequestObject = new XMLHttpRequest();
      XMLHttpRequestObject.overrideMimeType("text/xml");
    } else if (window.ActiveXObject) {
      XMLHttpRequestObject = new 
        ActiveXObject("Microsoft.XMLHTTP");
    }

    if(XMLHttpRequestObject) {

    var P = document.LoadCategory.Load.value;
    if (P == "Category1") {XMLHttpRequestObject.open("GET", "Catgory1.xml", true)}
    if (P == "Category2") {XMLHttpRequestObject.open("GET", "Category2.xml", true)} 
    if (P == "Category3") {XMLHttpRequestObject.open("GET", "Category3.xml", true)}

      XMLHttpRequestObject.onreadystatechange = function() 
      { 
        if (XMLHttpRequestObject.readyState == 4 && 
          XMLHttpRequestObject.status == 200) { 
        var xmlDocument = XMLHttpRequestObject.responseXML;
        displayCategory(xmlDocument);
        } 
      } 

      XMLHttpRequestObject.send(null); 
    }
  }

  function displayCategory (xmldoc)
  {

    Questionnodes = xmldoc.getElementsByTagName("Question");
    Answernodes = xmldoc.getElementsByTagName("Answer");
    var i = Math.floor((Math.random()*1000)%Questionnodes.length);
    var i = Math.floor((Math.random()*1000)%Answernodes.length);        

    var displayText1 =
      Questionnodes[i].firstChild.nodeValue;

    var target = document.getElementById("targetDiv1");
    target.innerHTML=displayText1;        

    var displayText2 =
      Answernodes[i].firstChild.nodeValue;

    var target = document.getElementById("targetDiv2");
    target.innerHTML=displayText2;

  }

</script> 
```

现在，我不知道我是否能够更改此代码以获得我想要的功能。我曾尝试将 XML 文件解析为 javascript 数组（然后随机选择并删除一个元素），但 atm 无处可去。如果有人有一些建议，我将不胜感激。再一次，我想要一个函数，它可以从 XML 文件中随机选择一个问答元素，但只向用户显示一次。干杯，伙计们。（对不起，这太啰嗦了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T16:51:13.443

用 var hasbeenshown、hasbeenanswered、useranswer、函数 getquestion、函数 getanswer 编写一个类。

实例化的类，在加载时填充您的 xml 文件中的值，您可以将其添加到数组中并使用您的随机数来选择一个随机问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:17:22.827

这是一个示例的链接，说明我将如何做你想做的事情：http: [//jsfiddle.net/dievardump/xL5mg/4/](http://jsfiddle.net/dievardump/xL5mg/4/)

我评论了代码的某些部分，并“模拟”了您的`getCategory`方法。

注意：从我的代码中，我认为没有做到的是“pickRandom”方法。我认为您几乎拥有完成其他部分所需的一切。

我在我的代码中做什么：

*   我有一个问答集
*   我有一个 QuestionAndAnswer 构造函数

当服务器结果出现时，我“解析”xml 文件并用 QuestionAndAnswer 对象填充集合。

HTML 中有一个“加载问题”按钮。当您单击它时，它会调用 displayQuestion 方法。

此方法从集合中选择（获取和删除）随机 QandA 对象，然后显示问题和一个按钮以查看相关答案。

就像我在评论中所说的那样，我决定一个接一个地添加问题，但是您可以通过只有一个问题和响应处理程序并修改其内容来改变它。

如果有一天 jsfiddle 决定不再工作，这是代码：

**Javascript**

```
(function() {   
// Question and Answer collection
var oQandACollection = {
    collection : [],
    length : 0,

    // get a QandA object
    get : function(i) {
        if (i < this.length) {
            return this.collection[i];
        }      
        return null;
    },

    // add a QandA object
    add : function(qanda) {
         this.collection.push(qanda);
         this.length++;
    },

    // remove a QandA object
    remove : function(i) {
        if (typeof this.collection[i] !== 'undefined') {
            this.collection.splice(i, 1);
            this.length--;
        }
    },

    // randomly pick an object from the collection
    pickRandom : function() {
        if (this.length === 0) return null; // return null if there is no object in the collection
        var i = Math.floor(Math.random() * this.length);
        var qanda = this.get(i);
        this.remove(i);
        return qanda;
    }

};

// Question and Answer Object
var QandA = function(xmlNode) {

    var question = xmlNode.getElementsByTagName('Question')[0] || null;
    var answer = xmlNode.getElementsByTagName('Answer')[0] || null;
    if (question && answer) {
        this.question = question.textContent;
        this.answer = answer.textContent;
    } else {
        return null;   
    }  
};

// function to use as ajax request handler
function fillQandA(xmlDoc) {
    // get all WordQuestions elements
    var wrappers = xmlDoc.getElementsByTagName('WordQuestions');
    for(var i = 0, l = wrappers.length, qanda = null; i < l; i++) {
        // create a new question from the current wrapper
        // we could have perfom the getElementsByTagName('Question') here
        // but since the code is really specific to your example i putted it in the constructor of QandA
        // You can change it
        qanda = new QandA(wrappers[i]);
        if (qanda) {
            oQandACollection.add(qanda);  
        }
    }
};

var eList = document.getElementById('qa-list'),
    eLoadQuestion = document.getElementById('load-qanda');

// functions to display a question
// i choosed to add question the one after the others,
// so i re-create html elements at every display
// but you also can modify it to have just one question at a time
// matter of choice
function displayQuestion() {
    var qanda = oQandACollection.pickRandom(); // get a question

    if (qanda) { // if there is a question

        // create elements
        var eQuestion = document.createElement('p'),
            eAnswer = document.createElement('p'),
            eBtn = document.createElement('button');

        eQuestion.textContent = qanda.question;
        eAnswer.textContent = qanda.answer;

        eQuestion.classNAme += ' question';
        eAnswer.className += ' answer';
        eBtn.textContent = 'Show Answer';

        // add click event listener to the button to show the answer
        eBtn.addEventListener('click', function() {
            eAnswer.style.display = 'block';
            eList.removeChild(eBtn);
        }, false);

        eList.appendChild(eQuestion);
        eList.appendChild(eAnswer);
        eList.appendChild(eBtn);
    }
};

// add click event handler on display
eLoadQuestion.addEventListener('click', displayQuestion, false);

// simulate xhr request
function getCategory() {
    // fill fake Q&A xml document
    var xmlDoc = document.createElement('root');
    for(var i = 0, wrapper = null, question = null, answer = null; i < 10; i++) {
        wrapper = document.createElement('WordQuestions');                   
        question = document.createElement('Question');
        question.textContent = 'Question ' + (i+1);                  
        answer = document.createElement('Answer');
        answer.textContent = 'Answer ' + (i+1);

        wrapper.appendChild(question);
        wrapper.appendChild(answer);

        xmlDoc.appendChild(wrapper);

    }   

    // us as xhr request handler like : fillQandA(XMLHttpRequestObject.responseXML);
    fillQandA(xmlDoc);        
}

getCategory();

// test function
function test() {
    for(var i = oQandACollection.length; i--; ) {
        displayQuestion();
    }
}

//test();
})(); 
```

**HTML**

```
<div class="wrapper">
<div id="qa-list">
</div>
<button id="load-qanda" value="Load new question">Load new question</button>

</div> 
```

**CSS**

```
 .wrapper {
    width : 500px;      
}

.wrapper > div {
    position : relative;
    width : 100%    
}

.answer {
    display : none;    
} 
```

# objective-c - 为什么我的 NSArray 变成了 NSSet？

> ID：10775604
> 
> 赞同：0
> 
> 时间：2012-05-27T16:44:14.707
> 
> 标签：objective-c, core-data, nsarray, nsset

在 Objective-C 中，使用核心数据，我正在获取实体并将它们作为 NSArrays 返回。我意识到我提取的频率太高了，我可以利用实体​​的返回值，例如：客户实体有很多 Invoices，Invoices 有很多 ItemSolds。这是我正在使用的一些代码：

```
NSError *error = nil;
// fetch all customers
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Customer"
                                           inManagedObjectContext:managedObjectContext];
[fetchRequest setEntity:entity];
self.fetchedCustomers = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
if (fetchedCustomers == nil) {
    NSLog(@"ERROR");
}
[fetchRequest release];
// end of customer fetch 
```

这是简单的获取请求，并且 fetchedCustomers 设置为 NSArray 属性。然后我使用它的功能：

`self.fetchedInvoices = [[customerToView valueForKey:@"invoices"] allObjects];`

这行得通，我可以在表格中正确显示发票编号和日期。但是我继续使用：

```
self.fetchedObjects = [[fetchedInvoices valueForKey:@"itemsSold"] allObjects]; 
```

后来，当我尝试添加总计时，我执行以下操作：

```
 double price = [[[fetchedObjects objectAtIndex:i] valueForKey:@"Price"] doubleValue]; 
```

我收到以下错误：

```
-[__NSCFSet doubleValue]: unrecognized selector sent to instance 0x10228f730 
```

为什么这里涉及到一个 NSSet？当我使用谓词获取发票和项目时，我没有任何问题，但它似乎真的效率低下。我宁愿弄清楚这里出了什么问题。任何帮助将不胜感激，谢谢。

额外信息：

兴趣范围：

```
@interface Invoice : NSManagedObject {
@private
}
@property (nonatomic, retain) NSSet *itemsSold;
@end

@interface Invoice (CoreDataGeneratedAccessors)

- (void)addItemsSoldObject:(ItemSold *)value;
- (void)removeItemsSoldObject:(ItemSold *)value;
- (void)addItemsSold:(NSSet *)values;
- (void)removeItemsSold:(NSSet *)values;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:03:59.980

尝试这样做：

```
NSString *className = NSStringFromClass([[[fetchedObjects objectAtIndex:i] valueForKey:@"Price"] class]);
NSLog(@"class name: %@", className); 
```

确定你得到什么类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:23:05.527

[fetchedObjects objectAtIndex:i] 在这里似乎是一个 NSSet。[[fetchedObjects objectAtIndex:i] valueForKey:@"Price"] 将获取所有具有键“Price”的对象，它是一个 NSSet。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T17:27:55.580

我意识到我的错误。我正在将 fetchedCustomers 分类为特定的“customerToView”。我没有对我的 fetchedInvoices 做同样的事情。所以我的解决方案是：

```
NSManagedObject *invoiceToView = [fetchedInvoices objectAtIndex:(int)[invoicesTable selectedRow]]; 
```

并使用 invoiceToView 代替 fetchedInvoices。

我的愚蠢错误！

# ruby-on-rails - 命名空间控制器不起作用，RoutingError：错误的常量名称

> ID：10775607
> 
> 赞同：1
> 
> 时间：2012-05-27T16:44:37.503
> 
> 标签：ruby-on-rails, ruby, routing

我正在尝试在我的 Rails 3.2.3 应用程序中设置一个子目录来服务 API 请求：`http://example.com/api`

我创建了一个目录，如：`app/controllers/api/`

我遵循实现命名空间控制器的标准约定：

```
module Api
  class GroupsController < ApplicationController
    # RESTful verbs implemented here
  end
end 
```

我已经设置了这样的命名空间路由：

```
namespace :api, defaults: {format: 'json'} do
  resources :groups
end 
```

但是请求`http://example.com/api/groups.json`导致以下异常：

```
ActionController::RoutingError (wrong constant name groups):
  app/controllers/api/groups_controller.rb:2:in `<module:Api>'
  app/controllers/api/groups_controller.rb:1:in `<top (required)>' 
```

如您所见，这里的名称“组”似乎无效，因为它是小写的。我不知道这是从哪里来的。

我在几个地方读到了 right-aws gem 的一个版本破坏了 String#camelize 方法并导致了类似的错误。但是我已经确认这个 gem 不存在于我的 Rails 应用程序的堆栈中。

一段时间以来，我一直在为此猛烈抨击。有没有其他人遇到过这个问题？

**编辑：**粘贴输出`$ rake routes`：

```
root                /                               welcome#index
api_groups GET      /api/groups(.:format)           api/groups#index {:format=>"json"}
POST                /api/groups(.:format)           api/groups#create {:format=>"json"}
new_api_group GET   /api/groups/new(.:format)       api/groups#new {:format=>"json"}
edit_api_group GET  /api/groups/:id/edit(.:format)  api/groups#edit {:format=>"json"}
api_group GET       /api/groups/:id(.:format)       api/groups#show {:format=>"json"}
PUT                 /api/groups/:id(.:format)       api/groups#update {:format=>"json"}
DELETE              /api/groups/:id(.:format)       api/groups#destroy {:format=>"json"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:44:46.647

所以造成这种情况的根本原因是来自内部 gem 的一些代码与 Rails 的路由/命名空间冲突。

但是，此 gem 中的代码是从旧版本的 Rails 复制/粘贴的，因此其他人可能会遇到同样的问题。

根本原因是 gem 覆盖了 Rails 在 String 类上扩展的 String#constantize 变形方法。这个 gem 复制的方法版本不能很好地与最新版本的 Rails 和最新版本的 Ruby 配合使用。

因此，结果是`"#{controller_name}".constantize`返回了一个驼峰式名称，但第一个字符是小写的。

解决方案是在 gem 中更新这个 String#constantize 方法以匹配 Rails 核心的最新版本，或者在 gem 的代码库中简单地删除/重命名该方法。

# android - 单击按钮冻结应用程序

> ID：10775608
> 
> 赞同：1
> 
> 时间：2012-05-27T16:44:37.837
> 
> 标签：android, freeze

当我单击按钮（此代码中的标签为 mbutton）时，我的应用程序似乎无缘无故地冻结了。logcat 没有提供有关此冻结原因的信息。下面是整个类的代码以及它下面的类的 XML

代码

```
public class WorkoutChoice extends Activity
{
 private TextView mDateDisplay,cDateDisplay;
 private Button mPickDate;
 private int mYear,mMonth,mDay;
 private int cYear,cMonth,cDay;
 static final int DATE_DIALOG_ID = 0;
 Button   mButton;
 EditText cweight,nweight;
 TextView t,c;
 String s,s2,cDate,mDate;
 int current,target;
 DataBaseHelper db = new DataBaseHelper(this);
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.choice);
    final Context context = getApplicationContext();
    final int duration = Toast.LENGTH_SHORT;

    mDateDisplay = (TextView) findViewById(R.id.dateDisplay);
    cDateDisplay = (TextView) findViewById(R.id.Current);
    mPickDate = (Button) findViewById(R.id.pickDate);
    mPickDate.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v) {
            showDialog(DATE_DIALOG_ID);
        }
    });
    final Calendar c = Calendar.getInstance();
    cYear = c.get(Calendar.YEAR);
    cMonth = c.get(Calendar.MONTH);
    cDay = c.get(Calendar.DAY_OF_MONTH);
    mYear = c.get(Calendar.YEAR);
    mMonth = c.get(Calendar.MONTH);
    mDay = c.get(Calendar.DAY_OF_MONTH);
    cDate = (cDay+"-"+cMonth+"-"+cYear);
    mDate = (mDay+"-"+mMonth+"-"+mYear); 
    Date past = new Date(112, cMonth, cDay); // current Date
    Date today = new Date(112, 11, 18); // date Choosen by the user
    final int days = Days.daysBetween(new DateTime(past), new DateTime(today)).getDays()+1;
     cDateDisplay.setText(cDate);

     //display the current date (this method is below)
     updateDisplay();

    mButton = (Button)findViewById(R.id.get);
    cweight   = (EditText)findViewById(R.id.cweight);
    nweight   = (EditText)findViewById(R.id.nweight);
    t = (TextView)findViewById(R.id.out);

    mButton.setOnClickListener(
        new View.OnClickListener()
        {
            public void onClick(View view)
            {
                db.open();
                while(cweight != null && nweight  != null);
                {
                    s = WorkoutChoice.this.cweight.getText().toString();
                    current =  Integer.parseInt(s);
                    s2 = WorkoutChoice.this.nweight.getText().toString();
                    target =  Integer.parseInt(s2);
                    db.deleteFirst();
                    db.insertTitle(mDate, current, target);
                    CharSequence text = "Goal Set\n"+"Target Date"+mDate+"\n"+"Current Weight "+current+"\n"+"Target Weight "+target;
                    Toast toast = Toast.makeText(context, text, duration);
                    toast.show();
                    /*Intent i = new Intent();
                    i.setClassName("com.b00348312.workout","com.b00348312.workout.WorkoutMenu");
                    startActivity(i);*/
                }
               db.close(); 
            }
        });

}
public void convert(View view) 
{
    Intent i = new Intent();
    i.setClassName("com.b00348312.workout","com.b00348312.workout.convert");
    startActivity(i); 
}
 private void updateDisplay() {
        mDateDisplay.setText(
            new StringBuilder()
                    // Month is 0 based so add 1
                    .append(mDay).append("-")
                    .append(mMonth + 1).append("-")
                    .append(mYear).append(" "));
        /*cDateDisplay.setText(
                new StringBuilder()
                        // Month is 0 based so add 1
                        .append(cDay).append("-")
                        .append(cMonth + 1).append("-")
                        .append(cYear).append(" "));*/
    } 
 private DatePickerDialog.OnDateSetListener mDateSetListener =
            new DatePickerDialog.OnDateSetListener() {

                public void onDateSet(DatePicker view, int year, 
                                      int monthOfYear, int dayOfMonth) {
                    mYear = year;
                    mMonth = monthOfYear;
                    mDay = dayOfMonth;
                    updateDisplay();
                }
            };
           @Override
           protected Dialog onCreateDialog(int id) {
                switch (id) {
                case DATE_DIALOG_ID:
                    return new DatePickerDialog(this,
                                mDateSetListener,
                                mYear, mMonth, mDay);
                }
                return null;
            }
}
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TextView
    android:id="@+id/Cdate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Current Date"
    android:textAppearance="?android:attr/textAppearanceSmall" android:textColor="#000000"/>

<TextView
    android:id="@+id/Current"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#000000"/>

<TextView
    android:id="@+id/blank"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Target"
    android:textColor="#000000" />
<TextView
    android:id="@+id/dateDisplay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#000000"/>
<Button
    android:id="@+id/pickDate"
    android:layout_width="324dp"
    android:layout_height="wrap_content"
    android:text="Change the date"/>
<TextView
     android:text="Enter Enter Current Weight (Kg)" 
     android:layout_height="wrap_content" 
     android:layout_width="wrap_content" 
     android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="#00000F">
</TextView>
<EditText
    android:id="@+id/cweight"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="numberDecimal" >
        <requestFocus></requestFocus>
</EditText>
<TextView android:text="Enter Desired Weight(kg)" 
    android:id="@+id/textView1" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" android:textStyle="bold" android:textColor="#00000F"></TextView>

<EditText
    android:id="@+id/nweight"
    android:layout_width="320dp"
    android:layout_height="wrap_content"
    android:inputType="numberDecimal" > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:54:36.483

您的代码处于无限循环中。

改变： `while(cweight != null && nweight != null);`

至： `if(cweight != null && nweight != null);`

另一件事：您确定要在此处检查 null 吗？在查询数据库之前，我会在这里检查这些值是否合适。我怀疑他们永远不会是空的。（会有其他错误）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T16:47:35.130

在非 UI 线程中执行 onclick 工作，例如使用 Asycn 任务或创建其他线程并使用处理程序，因为这里是数据库工作，可能很耗时......

# mysql - MySQL：类别和子类别的交叉表引用（主，主，名称）？

> ID：10775609
> 
> 赞同：0
> 
> 时间：2012-05-27T16:44:39.503
> 
> 标签：mysql

我正在创建一个标有类别的表，其中主类别（父列）包含 0，子类别包含父类别的 ID。我听说它叫做引用。我的问题：这张桌子的结构是否正确？或者有没有更好的方法，比如实现遍历树或类似的方法？

```
CREATE TABLE `categories` (
`primary_id` int(11) NOT NULL auto_increment,
`master_id` int(11) NOT NULL default '0',
`name` varchar(50) NOT NULL default '',
PRIMARY KEY (`c_id`)
)

INSERT INTO `categories` (`primary_id`, `master_id`, `name`) VALUES 
(1, '0', 'Games'),
(2, '0', 'Technology'),
(3, '0', 'Science'),
(4, '0', 'Pop Culture'),
(5, '0', 'Jobs/Services'),
(6, '0', 'Blogs'), 
(7, '1', 'Computer'),
(8, '1', 'Game Console'),
(9, '2', 'Cellphone'),
(10, '2', 'Audio/Video/Photos'),
(11, '2', 'Laptop'),
(12, '2', 'Others >'),
(13, '3', 'Human Body'),
(14, '3', 'Ocean Life'),
(15, '3', 'Plant Life'),
(16, '3', 'Animal Life'),
(17, '4', 'Artist'),
(18, '4', 'Upcoming'),
(19, '5', 'Jobs'),
(20, '5', 'Tutoring'),
(21, '5', 'Seminars'),
(22, '5', 'Haircuts'),
(23, '9', 'Iphone'),
(24, '9', 'Android'),
(25, '9', 'Windows Mobile'),
(26, '11', 'Toshiba'),
(27, '11', 'HP'),
(28, '11', 'Apple'), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:57:30.903

如果你使用 InnoDB 引擎，你可以为你的表强制执行引用完整性。这样，您可以确保永远不会插入没有匹配父 ID 的类别，删除父级时级联删除子类别等。将您的创建语句更改为：

```
CREATE TABLE `categories` (
`primary_id` int(11) NOT NULL auto_increment,
`master_id` int(11) NOT NULL default '0',
`name` varchar(50) NOT NULL default '',
PRIMARY KEY (`c_id`),
KEY `fk_master_id1` (`master_id`),
CONSTRAINT `fk_master_id1` FOREIGN KEY (`master_id`) REFERENCES `master` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

尽管此策略在大多数情况下都非常有效，但您可能还想查看其他用于实现树状结构的策略以及有效查询它们所带来的挑战。有关在 MySQL 中存储树状结构的替代设计的更多信息，请参阅SO 上的[这个答案。](https://stackoverflow.com/a/3800334/473637)

# php - 如何使用 PHP 替换 PDF 表单域中的文本

> ID：10775614
> 
> 赞同：6
> 
> 时间：2012-05-27T16:45:30.250
> 
> 标签：php, pdf

我搜索了大约 3 个小时来找到解决问题的方法。我已经浏览了有关我的问题的 stackoverflow 问题，但找不到解决方案。

我目前正在尝试做的是使用 PHP 替换 PDF 表单字段中的文本。PDF 文件有一个文本字段，其中包含 [placeholder] 之类的占位符文本。

我试图做的是：

```
$pdf_content = file_get_contents(source_pdf.pdf);
$put = str_replace('[placeholder]', 'NEW VALUE', $pdf_content);
file_put_contents('temp_pdf/test.pdf', $put); 
```

当我打开 PDF 时，占位符似乎没有被替换。但是，如果我点击文本字段，我的“新值”就会出现。如果我再次点击“[占位符]”再次分配。

因此，我认为这不是我的目的的正确尝试。

我现在的问题是：有没有一种简单有效的方法来实现这一点？我不想使用 FDF，而是替换源 PDF 中的文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T16:57:44.740

只要我知道这不会是简单的。最好的解决方案是将 PDF 文档作为 HTML 模板提供给您，您可以使用诸如 TCPDF ( [http://www.tcpdf.org/](http://www.tcpdf.org/) ) 之类的库轻松地将其转换为 PDF。

我搜索并发现了 2 个类似的问题，并且您可能想要查看一些回复。他们确实提供了一些工具，但肯定不在 PHP 中。

[以编程方式查找和替换 pdf 中的文本](https://stackoverflow.com/questions/3106787/programatically-find-and-replace-text-in-pdf)

[以编程方式替换 PDF 中的文本](https://stackoverflow.com/questions/6590144/programmatically-replace-text-in-pdf)

如果您有一组固定的模板并且每次您要使用新值更新它，HTML 模板到 PDF 的转换将是最佳选择。但是，如果您有不同的模板（表单）需要替换值，那么您应该要求供应商提供某种格式，如果可能的话，您可以轻松地以编程方式处理这些格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-17T10:10:18.150

这并不像你想的那么简单。如果您有 php 版本 7 或 5，这可以通过 pdftron 库实现。

要安装 pdftron 库，您必须安装 swig 和 cmake。

⚠️严格的 PHP 和 SWIG 版本兼容性

带有开发人员扩展和[SWIG](http://www.swig.org/) 3.0.12的 PHP7

带有开发人员扩展和[SWIG](http://www.swig.org/) 2.0.4 - 2.0.12的 PHP5

[CMake](https://cmake.org/download/)版本 ≥ 2.8

这是从 pdf 替换文本的示例。 [https://www.pdftron.com/documentation/samples/php/ContentReplacerTest](https://www.pdftron.com/documentation/samples/php/ContentReplacerTest)

正确安装，否则将无法正常工作

# mysql - 如何使用 Flash 记住用户数据？

> ID：10775615
> 
> 赞同：0
> 
> 时间：2012-05-27T16:45:40.117
> 
> 标签：mysql, flash

我正在制作一个 Flash 游戏，用于存储以前会话的用户统计信息。我也想维持某种排行榜。

发帖后，我意识到我问错了问题。我觉得共享对象是解决这个问题的正确方法，而不是使用数据库。欢迎任何有关实现共享对象的进一步反馈。感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:50:39.330

您不能直接从 Flash 游戏中查询 MySQL 数据库表，您必须有一些服务器端技术支持您的工作。

我建议使用一些 PHP 或 Ruby - 或者任何你可以轻松使用的东西来完成这项工作。

Flash 将在客户端浏览器（作为 swf）上呈现，并且不会与服务器联系，因为它将由 Web 浏览器作为静态资源提供。

我希望这个回复能帮助你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T18:21:43.217

正如 Dharmavir 所提到的，您不能通过 Flash (AS*) 处理 MySQL 查询。

也就是说，将 Flash 设置为与远程脚本通信非常容易，因为它能够通过请求 POST/GET 数据。

这方面有很多教程。

首先，编写一个简单的脚本将数据输入到数据库中。我推荐使用 PHP（我认为它是最容易学习的）。

如果这是您第一次使用 PHP 执行查询，我还建议使用 Prepared Statements 而不是`mysql_*`.

设置好脚本后，您可以继续处理从 Flash 应用程序到脚本的请求（这也很容易）。

我找到了一个关于使用 Flash 和 PHP 制作聊天应用程序的教程系列。本教程包括向 PHP 脚本发出请求并将数据输入到 SQL DB，因此它应该可以帮助您：

[http://www.youtube.com/watch?v=XeWKauwFUEQ](http://www.youtube.com/watch?v=XeWKauwFUEQ) < 本教程分为许多不同的视频。查看建议以找到其他建议。

# javascript - ajaxify + history.js 脚本加载问题

> ID：10775618
> 
> 赞同：2
> 
> 时间：2012-05-27T16:45:57.690
> 
> 标签：javascript, ajax, wordpress

我目前正在使用 ajax gist（在[此处](https://gist.github.com/854622)找到），这一切似乎都运行良好。但是，我随后注意到，每当它改变状态时，脚本都没有被加载。因此，使特色帖子滑块和音乐播放器（作为当前示例）无法正常工作。

您可以在 http://djbretthaley.j3d-design.com/ 找到该网站

我对 ajax 和 js 方面很陌生，所以如果我很慢，请原谅:)

谢谢，J3D

# c - 使用 OpenCL 处理的大型阵列的错误信息

> ID：10775621
> 
> 赞同：1
> 
> 时间：2012-05-27T16:46:33.243
> 
> 标签：c, opencl

我有一个内核执行问题，当我使用大型数组（1000 x 10000）时，它不会在正确的位置写入信息。但是对于小数组，没有问题，我检索到正确的结果。对于内核执行，我使用 ATI Mobility RADEON HD 4300 系列的 GPU。

C代码示例是：

```
#include <stdio.h>
#include <stdlib.h>

#ifdef __APPLE__
#include <OpenCL/opencl.h>
#else
#include <CL/cl.h>
#endif

#define MAX_SOURCE_SIZE (0x100000)
#define MAX_SIZE 108
#define NCOLS 1000
#define NROWS 10000

int main(void) {
    char* source_name = "mykernel.cl";
    char* source_code;
    size_t source_size;
    cl_platform_id platformId = NULL;
    cl_uint nbplatforms;
    cl_device_id deviceId = NULL;
    cl_uint nbdevices;
    cl_context context = NULL;
    cl_int errcode;
    cl_command_queue commandQueue = NULL;
    cl_program program;
    size_t global_work_size[2];
    size_t local_work_size[2];

    FILE* fh;

    //Retrieving platform information
    errcode = clGetPlatformIDs(1, &platformId, &nbplatforms);

    //Retrieving device (GPU) information
    errcode = clGetDeviceIDs(platformId, CL_DEVICE_TYPE_GPU, 1, &deviceId, &nbdevices);

    //Creation of a working context
    context = clCreateContext(NULL, 1, &deviceId, NULL, NULL, &errcode);

    commandQueue = clCreateCommandQueue(context, deviceId, 0, &errcode);

    //Opening and reading the kernel source file
    if((fh = fopen(source_name, "r")) == NULL){
        fprintf(stderr, "Failed to open the file containing the kernel source !\n");
        exit(EXIT_FAILURE);
    }
    source_code = (char*) malloc (MAX_SOURCE_SIZE * sizeof(char));
    source_size = fread(source_code, sizeof(char), MAX_SOURCE_SIZE, fh);
    fclose(fh);

    program = clCreateProgramWithSource(context, 1, (const char**) &source_code, (const size_t*) &source_size, &errcode);

    //Building kernel
    errcode = clBuildProgram(program, 1, &deviceId, NULL, NULL, NULL);

    //Creation of the kernel program
    cl_kernel kernel = clCreateKernel(program, "mykernel", &errcode);
    unsigned int *op1 = (unsigned int*) malloc (NCOLS * NROWS * sizeof(unsigned int));

    cl_mem op1buff = clCreateBuffer(context, CL_MEM_WRITE_ONLY, NCOLS * NROWS * sizeof(unsigned int), NULL, &errcode);

    clSetKernelArg(kernel, 0, sizeof(cl_mem), (void*) &op1buff);

    global_work_size[0] =  NCOLS;
    global_work_size[1] =  NROWS;
    local_work_size[0] = NCOLS;
    local_work_size[1] = 1;

    clEnqueueNDRangeKernel(commandQueue, kernel, 2, NULL, global_work_size, local_work_size, 0, NULL, NULL);

    errcode = clEnqueueReadBuffer(commandQueue, op1buff, CL_TRUE, 0, NCOLS * NROWS * sizeof(unsigned int), (void*)op1, 0, NULL, NULL);

    for(int i = 0; i < NROWS; i++){
        for(int j = 0; j < NCOLS; j++)
            printf("[index:%d - %u] ", i*NCOLS+j, op1[i*NCOLS+j]);
        printf("\n");
    }

    return EXIT_SUCCESS;
} 
```

内核源代码放在名为 mykernel.cl 的文件中，如下所示：

```
__kernel void mykernel(__global unsigned int* op1buf){
    unsigned int index = get_group_id(1) * get_global_size(0) + get_local_id(0);
    op1buf[index] = index;
} 
```

当我使用大型数组时，该程序的执行会返回从数组中读取的意外值。例如 ：

```
[index:0 - 16777215] [index:1 - 16777215] [index:2 - 16777215] [index:3 - 16777215] ...
[index:1000 - 3438339071] [index:1001 - 3941660159] [index:1002 - 1650092117] [index:1003 - 2529976771] ...
[index:1000 - 3438339071] [index:1001 - 3941660159] [index:1002 - 1650092117] [index:1003 - 2529976771] ...
[index:3000 - 16777215] [index:3001 - 16777215] [index:3002 - 16777215] [index:3003 - 16777215] ...
[index:4000 - 3438339071] [index:4001 - 3941660159] [index:4002 - 1650092117] [index:4003 - 2529976771] ...
.... 
```

我的代码可能有什么问题，或者我没有考虑到使用 GPU 的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:32:51.480

1000 显然对于您的设备来说太大了。使用 clGetDeviceInfo 和 CL_DEVICE_MAX_WORK_GROUP_SIZE 来确定可以使用的最大值。

# django - Excel中的Django csv输出

> ID：10775631
> 
> 赞同：1
> 
> 时间：2012-05-27T16:48:32.780
> 
> 标签：django, csv, utf-8

您好我有一个简单的视图，它返回一个查询集的 csv 文件，该文件是使用 utf-8 编码从 mysql db 生成的：

```
def export_csv(request):
    ...
    response = HttpResponse(mimetype='text/csv')
    response['Content-Disposition'] = 'attachment; filename=search_results.csv'
    writer = csv.writer(response, dialect=csv.excel)             
    for item in query_set:
        writer.writerow(smart_str(item))  
    return response 
    return render(request, 'search_results.html', context) 
```

这可以作为 CSV 文件正常工作，并且可以在文本编辑器、LibreOffice 等中毫无问题地打开。

但是，我需要提供一个可以在 Windows 的 MS Excel 中打开而不会出错的文件。如果我在查询集中有带有拉丁字符的字符串，例如“Española”，那么 Excel 中的输出是“EspaÃ±ola”。

我试过这篇[博文](http://crashcoursing.blogspot.com/)，但没有帮助。我也知道[xlwt 包](http://pypi.python.org/pypi/xlwt)，但我很好奇是否有一种方法可以使用我目前拥有的 CSV 方法来纠正输出。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:39:46.263

你可以试一试`python-unicodecsv`。它取代了`csv`不能优雅地处理 Unicode 的 python 模块。

1.  将 unicodecsv 文件夹放在可以导入或通过 setup.py 安装的位置
2.  将其导入您的视图文件，例如：

    ```
    import unicodecsv as csv 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:01:08.127

看起来所有版本的 Excel 都没有统一的解决方案。

1.  您最好的选择是使用[openpyxl](http://packages.python.org/openpyxl/)，但这相当复杂，并且需要单独处理 excel 用户的下载，这不是最佳选择。

2.  尝试在文件的开头（0xEF、0xBB、0xBF）添加字节顺序标记。请参阅[microsoft-excel-mangles-diacritics-in-csv-files](https://stackoverflow.com/questions/155097/microsoft-excel-mangles-diacritics-in-csv-files)

还有另一个[类似的帖子](https://stackoverflow.com/questions/6002256/is-it-possible-to-force-excel-recognize-utf-8-csv-files-automatically)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-01T06:40:04.573

我发现 Excel 需要做 3 件事才能正确打开 unicode csv 文件：

1.  使用 utf-16-le 字符集
2.  在导出文件的开头插入 utf-16 字节顺序标记
3.  在 csv 中使用制表符而不是逗号

所以，这应该使它在 Python 3.7 和 Django 2.2 中工作

```
import codecs
...

def export_csv(request):
    ...
    response = HttpResponse(content_type='text/csv', charset='utf-16-le')
    response['Content-Disposition'] = 'attachment; filename=search_results.csv'
    response.write(codecs.BOM_UTF16_LE)

    writer = csv.writer(response, dialect='excel-tab')
    for item in query_set:
        writer.writerow(smart_str(item))
    return response 
```

# scrum - Scrum：不同的产品负责人和项目经理

> ID：10775637
> 
> 赞同：1
> 
> 时间：2012-05-27T16:49:14.273
> 
> 标签：scrum

我创建了两个作者的简短文档：Ken Swchaber 和 Jeff Sutherland。在本文档中关于产品所有者的定义中：

> 产品负责人是唯一负责管理产品待办列表的人

我看到这`Product owner`很像`Project Manager`在正常的软件开发过程中。

那么，真正的区别是什么，或者只是一样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T10:36:36.610

产品负责人和项目经理是完全不同的。

在传统项目中，项目经理，顾名思义，负责管理项目。

然而，在 Scrum 项目中，开发团队管理他们自己的工作。

产品负责人在负责最大化产品价值和开发团队工作的同时，是唯一负责管理产品待办列表的人。

产品待办事项管理包括：

*   清楚地表达 Product Backlog 项目；
*   对产品待办列表中的项目进行排序，以最好地实现目标和使命；
*   确保开发团队所执行工作的价值；
*   确保产品待办列表对所有人都是可见、透明和清晰的，并显示 Scrum 团队接下来的工作；
*   确保开发团队将产品待办列表中的项目理解到所需的水平。

希望有帮助。本文中提供了[有关产品所有者需求的更多详细信息](https://turboscrum.com/scrum-product-owner-role-necessary/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T02:36:57.790

区别是微妙的，因为我们倾向于从“管理积压”这个短语中推断出很多东西。

虽然 PM 通常负责协调如何完成计划，但产品负责人负责了解产品展示的功能并与团队合作以确保这反映在项目列表中（通常在业务术语中描述为功能）称为产品待办列表。

在 Scrum 中，开发团队（由在迭代中产生完整增量所需的所有技能组成）负责确定如何完成在迭代中选择完成的项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T05:04:52.387

我想你问这个是因为你对敏捷不太了解。

项目经理：他决定一切，而测试人员、开发人员……经常不在一起说话，他们必须和项目经理谈谈，项目经理会把这个想法告诉其他人。例如：开发人员说：“我已添加此功能 A”。项目经理会对测试人员说：“嘿，你应该为特性 A 添加一个单元测试”，例如。

产品负责人：是的，项目经理可以是产品负责人，或者，您的客户也可以是产品负责人。意思是： 产品负责人：能控制软件的流程的人！更重要的是，产品负责人：他只是看你的工作方式并发表一些谈话来控制 FLOW，而不是控制你的活动。

# facebook - Omniauth Facebook 错误 - Faraday::Error::ConnectionFailed

> ID：10775640
> 
> 赞同：46
> 
> 时间：2012-05-27T16:49:43.040
> 
> 标签：facebook, omniauth, faraday-oauth

（仅供参考：我正在关注来自 railscast #241 的 Twitter Omniauth。我成功使用了 Twitter，现在进入 Facebook）

使用 Omniauth 登录 Facebook 后，我立即收到此错误：

```
Faraday::Error::ConnectionFailed
SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed 
```

这是什么意思？

这是我的代码

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, '<key from fb>', '<another key from fb>'
end 
```

我的代码中实际上没有什么内容，我所拥有的只是在我想使用 to_yaml 来查看 request.env 中的内容的 sessionController

```
class SessionsController < ApplicationController
    def create
        raise request.env["omniauth.auth"].to_yaml
    end
end 
```

如何解决法拉第错误？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-14T20:55:30.057

我已经用这个解决方案在 Mac OS X Lion 10.7.4 上解决了这个问题：

```
$ rvm remove 1.9.3 (or whatever version of ruby you are using)
$ rvm pkg install openssl
$ rvm install 1.9.3 --with-openssl-dir=$rvm_path/usr 
```

在此之后，您将需要下载丢失的 cacert.pem 文件：

```
$ cd $rvm_path/usr/ssl
$ sudo curl -O http://curl.haxx.se/ca/cacert.pem
$ sudo mv cacert.pem cert.pem 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-06-03T16:45:04.203

您收到此错误是因为 Ruby 找不到要信任的根证书。

修复 Windows：[https ://gist.github.com/867550](https://gist.github.com/867550)

修复 Apple/Linux：[http](http://martinottenwaelter.fr/2010/12/ruby19-and-the-ssl-error/) ://martinottenwaelter.fr/2010/12/ruby19-and-the-ssl-error/ <--该站点现已关闭。

**这是根据上述站点的 Apple/Linux 修复：**

解决方案是安装包含 Firefox 使用的相同根证书的 curl-ca-bundle 端口：

```
sudo port install curl-ca-bundle 
```

并告诉您的 https 对象使用它：

```
https.ca_file = '/opt/local/share/curl/curl-ca-bundle.crt' 
```

请注意，如果您希望代码在 Ubuntu 上运行，则需要设置 ca_path 属性，默认证书位置为 /etc/ssl/certs。

最后，这将适用于 Mac OS X 和 Ubuntu：

```
require 'net/https'
https = Net::HTTP.new('encrypted.google.com', 443)
https.use_ssl = true
https.verify_mode = OpenSSL::SSL::VERIFY_PEER
https.ca_path = '/etc/ssl/certs' if File.exists?('/etc/ssl/certs') # Ubuntu
https.ca_file = '/opt/local/share/curl/curl-ca-bundle.crt' if File.exists('/opt/local/share/curl/curl-ca-bundle.crt') # Mac OS X
https.request_get('/') 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-04-15T09:25:43.720

Andrei 的回答在 Mac OSX 10.8.3 上对我不起作用。前段时间我重新安装了openssl来安装ruby 2.0，从那以后总是出现这个错误。感谢 Andrei 的回答和[Rails 项目的指示，](http://railsapps.github.io/openssl-certificate-verify-failed.html)我修复了它。

我跑了：

```
$ rvm -v
$ rvm get head
# Installation of latest version of rvm...
$ rvm -v
# rvm 1.19.5 (master)
$ rvm osx-ssl-certs status all
# Certificates for /usr/local/etc/openssl/cert.pem: Old.
# Certificates for /Users/mpapis/.sm/pkg/versions/openssl/0.9.8x/ssl/cert.pem: Old.
$ sudo rvm osx-ssl-certs update all
# Updating certificates... 
```

`rvm osx-ssl-certs status all`然后我通过再次运行检查证书是否正确更新但`/usr/local/etc/openssl/cert.pem`仍未更新。我不知道这是否有必要，但我做了以下事情：

```
$ cd /usr/local/etc/openssl/
$ curl -O http://curl.haxx.se/ca/cacert.pem
$ mv cacert.pem cert.pem 
```

之后问题就解决了。希望能帮助遇到同样问题的其他人。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-07-30T10:53:58.073

这对我有用（在 Mac OS X 上）：

```
$ brew install curl-ca-bundle
$ export SSL_CERT_FILE=/usr/local/opt/curl-ca-bundle/share/ca-bundle.crt 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-12T15:50:59.867

**替代解决方案：**

[我是手动安装 Ruby 和 Ruby on Rails 的 Win7 用户]

我有同样的问题，但无法通过这个问题给出的答案来解决。顺便说一句，最后，我通过以下网址解决了问题

[ruby on rails 中的 Facebook 重定向 URL 打开 ssl 错误](https://stackoverflow.com/questions/9095755/facebook-redirect-url-in-ruby-on-rails-open-ssl-error) [https://github.com/technoweenie/faraday/wiki/Setting-up-SSL-certificates](https://github.com/technoweenie/faraday/wiki/Setting-up-SSL-certificates)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-09-10T01:44:16.220

RVM 网站建议运行`rvm osx-ssl-certs update all`

[RVM 网站：如何修复操作系统中损坏的证书。](https://rvm.io/support/fixing-broken-ssl-certificates)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-07T21:05:28.550

对于 Windows 7：Neil Hoff 的上述解决方案链接（Windows 修复：[https](https://gist.github.com/867550) ://gist.github.com/867550 ）对我不起作用。

这是有效的：

使用 cmd.exe：

```
curl -o c:\cacert.pem http://curl.haxx.se/ca/cacert.pem
set SSL_CERT_FILE=c:\cacert.pem 
```

使用 msysgit bash：

```
curl -o /c/cacert.pem http://curl.haxx.se/ca/cacert.pem
export SSL_CERT_FILE=/c/cacert.pem 
```

如果您的 Windows 7 命令行上没有 curl，请在此处获取：http: [//www.confusedbycode.com/curl/#downloads](http://www.confusedbycode.com/curl/#downloads)

原始解决方案来自这里 - 归功于： [https ://github.com/chef/chef-dk/issues/106](https://github.com/chef/chef-dk/issues/106)

邓恩。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-09T04:55:01.427

Andrei 的回答对我有用，但是在尝试重新安装 Ruby 1.9.3 时遇到了巨大的障碍。因为自安装 1.9.3 以来我已经安装了新版本的 Xcode，所以我无法重新安装，直到我打开 Xcode 首选项并从下载选项卡安装命令行工具。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-10T10:36:23.673

查看[经过认证](https://github.com/stevegraham/certified)的宝石。描述：

> 确保 net/https 使用 OpenSSL::SSL::VERIFY_PEER 来验证 SSL 证书并提供证书包以防 OpenSSL 找不到

# c# - c# 变量使用

> ID：10775641
> 
> 赞同：1
> 
> 时间：2012-05-27T16:49:49.517
> 
> 标签：c#, variables, declaration, variable-declaration

我使用 c# winforms 并想知道如何更好地编写以及为什么。

```
if(txtName.Text == "John")
    ; 
```

或者

```
String name = txtName.Text
if (name == "John")
    ; 
```

编辑：谢谢你们帮了我很多！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T16:51:03.717

第二个版本毫无意义——它更长，可读性更低，并且引入了一个额外的变量（尽管一个好的编译器会摆脱它，假设它没有在其他地方使用）。

在这两个选择中，这个更好：

```
if(txtName.Text == "John") 
```

虽然我会选择第三个：

```
if(txtName.Text.Equals("John", StringComparison.InvariantCultureIgnoreCase) 
```

您可能希望该[`StringComparison`](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)选项为不同的枚举值，具体取决于您希望如何进行比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T16:50:51.950

为简单起见，我会选择：

```
if(txtName.Text.Equals("John")) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T19:11:30.080

也许我错了，但其他人正在回答一些复杂的情况，而 OP 建议的情况并非如此。

什么更好？

事实上，它是一样的。有一个区别：第一种方法是将控件的文本存储在一个变量中，然后检查它是否等于 John。第二种方法做同样的事情，但它通过调用`Text`属性直接获取控件的文本访问其字符串值。

何时使用变量以及何时直接访问属性？这只是一个假设，因为这取决于每个特定的用例，但一般来说，*如果您访问它的对象（文本）只是为了在某个时间检查它，请直接**调用`Text`*属性，否则，您会想要在以下情况下将其存储在某个变量中：

*   如果您想在`Text`不影响 this 保存的文本的情况下`Text`与

*   您处于多线程环境中，并且希望进入`Text`其当前状态，因为它可以更改，因为用户界面可供用户使用，并且它可以在某些操作期间更改其值。

*   **你只是喜欢变量！**. 如果您发现使用变量可以更好地阐明您的代码并增加含义，为什么不呢？现在的电脑，甚至是手机，都有很多内存，一个、两个或三个变量不会改变任何东西（也许多 1KB？哇哦！）。

就这样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-27T16:55:43.883

阅读[在 .NET Framework 中使用字符串的最佳实践](http://msdn.microsoft.com/en-us/library/dd465121)。

```
if (String.Equals(txtName.Text, "John", StringComparison.OrdinalIgnoreCase)) {
   // ...Code.
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T16:52:20.857

```
if(txtName.Text == "John") 
```

这是您展示的这些更传统和更有效的方式。

```
String name = txtName.Text
if (name == "John")
    ; 
```

声明额外的变量“名称”将增加代码大小，除了增加程序内存之外还有其他好处。一旦我尝试并发现声明额外的变量并将文本分配给它，然后访问此变量而不是文本属性 txtName.Text 使其效率低于通过属性访问。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-27T16:52:33.863

对于字符串比较，我建议：

```
string.compare(strA, strB, stringComparisonMethod) 
```

对于访问文本无关紧要，第二种方式更友好，但两者都会做同样的事情

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-27T16:53:16.540

我认为后者更好，因为您将使用较少的变量，即`name`. 除了我没有看到任何区别（样式显然取决于你自己）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-27T16:53:41.647

如果您在代码的其他部分使用该值，我会定义一个变量。否则，请使用较短的版本。

在 C# 中，您不必使用 .Equals 来比较字符串（响应注释）。== 做同样的事情。

# css - 当类名只是一个整数时，如何编写 CSS 选择器？

> ID：10775643
> 
> 赞同：2
> 
> 时间：2012-05-27T16:50:06.430
> 
> 标签：css, css-selectors

假设我有

```
<span class="1">hello</span> 
```

我想声明：

```
span.1 { /* rules */ } 
```

这似乎不起作用（即没有应用 CSS 规则。）有没有办法让它起作用？我试着在 CSS 选择器中引用“1”，但似乎不是这样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T16:52:25.897

看到这个：[哪些字符在 CSS 类名/选择器中是有效的？](https://stackoverflow.com/questions/448981/what-characters-are-valid-in-css-class-names)

> （类）名称必须以下划线 (_)、破折号 (-) 或字母 (a–z) 开头

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T16:52:06.540

您应该始终牢记语义来命名您的类和 ID。一个数字给任何人带来什么意义？它算什么？

[为了避免这种情况，根据 W3](http://jigsaw.w3.org/css-validator/)将 ID 和类命名为整数不是有效的 CSS ，因此大多数浏览器不支持。始终验证您的 HTML 和 CSS。

解决方案是简单地给你的类一个更有意义的名字。你在数什么？是在博客上评论吗？如果是这样，您可以将类添加`comment`到每个类。如果您确实需要每个名称的唯一名称，则可以`comment5`改用，但作为一个类似乎没有多大意义，在这种情况下，您应该改用 ID。

[W3C 的 CSS 规范第 4.1.3 节 Characters and case](http://www.w3.org/TR/CSS21/syndata.html#characters)也描述了确切的命名要求：

> 在 CSS 中，*标识符*（包括选择器中的元素名称、类和 ID）只能包含字符 [a-zA-Z0-9] 和 ISO 10646 字符 U+00A0 及更高，加上连字符 (-) 和下划线 ( _); **它们不能以数字、两个连字符或一个连字符后跟一个数字开头**。标识符还可以包含转义字符和任何 ISO 10646 字符作为数字代码（请参阅下一项）。例如，标识符“B&W？” 可以写成“B\&W\?” 或“B\26 W\3F”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T16:55:39.890

所以你应该检查[CSS 语法](http://www.w3.org/TR/CSS21/grammar.html#scanner)

**所以名称必须以下划线 _ 、字母（a-z）开头，后跟任意数量的破折号、下划线、字母或数字。**

**编辑：** 我建议您阅读这篇文章[Valid chars in CSS class names](https://stackoverflow.com/questions/448981/what-characters-are-valid-in-css-class-names)。同事**@Triptych**给了我们很棒的答案。

# struts-1 - Struts - 在任何范围内都找不到 bean

> ID：10775647
> 
> 赞同：2
> 
> 时间：2012-05-27T16:50:57.973
> 
> 标签：struts-1, struts1

我正在使用 eclipse 来实现原生的 Struts 和 hybernate 支持应用程序在页面中显示一系列链接。我收到错误：

```
javax.servlet.jsp.JspException: Cannot find bean: "ListeActeur" in scope: "session" 
```

我检查了很多网站和论坛，似乎没有什么可以解决这个问题。

我的 struts 配置：

```
<struts-config>
<form-beans type="org.apache.struts.action.ActionFormBean">
  <form-bean name="ListeActeur" type="mesForms.strust.ListeActeur"/>
  <form-bean name="vérifCritère" type="mesForms.strust.vérifCritère"/>
</form-beans>
<action-mapping>
    </action>   
    <action path="/Liste" 
    parameter="/vue/Invitation.jsp"
    name="ListeActeur     scope="request       validate="false"
                     type="mesAction.struts.ListeActeurAction">  
    <forward name="s" path="/vue/NewFile.jsp" redirect="false" /> 
    </action>
</action-mappings>
</struts-config> 
```

ListeActeur动作：

```
 public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest req, HttpServletResponse res) throws Exception {
        System.out.println("Action");

        ListeActeur ListeActeur= (ListeActeur) form;
        String query = "select * from Acteur " ;

        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
         Iterator results = session.createSQLQuery(query).list().iterator();
         List <Acteur> lis = new ArrayList<Acteur>();
         while((results.hasNext()))
         {
             Acteur gg =new Acteur();
            Object[] row = (Object[]) results.next();
            gg.setActeurId((Integer)row[0]);
            gg.setNomActeur((String)row[2]);

             lis.add(gg);
         }
         req.getSession(true).setAttribute("lis", lis);
         session.getTransaction().commit();
         HibernateUtil.getSessionFactory().close();             
        ListeActeur.setLis( lis);
        req.setAttribute("formu", ListeActeur.getLis());

        return mapping.findForward("s");
        }
} 
```

ListeActeur：

```
public class ListeActeur extends ActionForm {

private  List <Acteur> lis=null;

public List <Acteur> getLis(){
    return lis;}
public void setLis(List <Acteur> lis){this.lis=lis;}
public void reset(ActionMapping mapping, HttpServletRequest request) { 

    lis = new ArrayList<Acteur>();  
} 
```

我真的不知道该怎么办。我是 Struts 的新手。在此先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T16:55:08.043

你有

```
<action path="/Liste" scope="request" .../> 
```

和

```
<logic:iterate ... scope="session" > 
```

难怪你得到这个例外。如果您将 Struts 配置为将表单 bean 存储在请求中，请不要尝试从 JSP 中的会话中获取它。

# javascript - Onclick 不能正常工作并且将按钮移动到下一行也不能正常工作

> ID：10775657
> 
> 赞同：0
> 
> 时间：2012-05-27T16:52:24.900
> 
> 标签：javascript, dom

我使用 jsfiddle 运行它，源代码是 [http://jsfiddle.net/eVyjC/12/](http://jsfiddle.net/eVyjC/12/)

我想添加一个按钮来开始和停止号码更改。我使用一个包含六个跨度的 div，每个跨度都有一个数字。

然后我使用 createElement 创建一个输入按钮并设置 onclick 以运行用户定义的函数 setInterval(keepMove) 但它不起作用并且没有任何错误出现？

然后我通过使用警报进行测试，令我惊讶的是它在加载页面而不单击按钮时运行？

我的问题是：

1.为什么onclick在加载时首先运行，如何按我的预期通过单击按钮让它运行？

2.我尝试在最后一个 span 中添加一个 br 以将按钮移动到下一行，但它不起作用。我做错了什么，我该如何解决？

感谢您阅读我的问题，我已经尝试了几天并尝试了很多方法但不起作用。（例如 document.write html 标签或 createElement 和 Childappend ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:59:25.117

1：代替：

```
buttonNode.onclick= alert('WhyIFirstRunQQ'); 
```

做：

```
buttonNode.onclick= function(){ alert('WhyIFirstRunQQ'); } 
```

这应该够了吧。

2：使用`document.write("<br>");`

我强烈建议使用 jQuery 之类的 javascript 库，而不是手动执行所有这些操作。

# android - 更新数据库列并用 false 填充

> ID：10775660
> 
> 赞同：1
> 
> 时间：2012-05-27T16:52:45.723
> 
> 标签：android, sql, database

我正在尝试更新我的数据库以拥有另一个名为 Visible 的列。我希望整个列都填充错误值。当我运行代码时，它会进入更新函数并抛出以下错误：

```
android.database.sqlite.SQLiteException: no such column: true: UPDATE Themes2 SET Visibility = true;

private static final String TABLE_THEMES_V2 = "Themes2";
public static final String KEY_VISIBLE = "Visibility";

if (oldVersion < 8) {

            db.execSQL("ALTER TABLE " + TABLE_THEMES_V2 + " ADD COLUMN " + KEY_VISIBLE + " text");
            db.execSQL("UPDATE " + TABLE_THEMES_V2 + " SET " + KEY_VISIBLE + " = true;");

            db.setTransactionSuccessful();
        } 
```

有谁知道出了什么问题？很久以前我使用相同的功能在列中输入“1”......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:59:00.000

您的 KEY_VISIBLE 列具有 Text 数据类型，因此您应该使用以下语法对其进行更新，

```
db.execSQL("UPDATE " + TABLE_THEMES_V2 + " SET " + KEY_VISIBLE + " = 'true';"); 
```

您只是缺少`'`字符串值中的单个倒置标记。

您可以尝试的替代方法如下，将 KEY_VISIBLE 列设置为整数类型

```
db.execSQL("ALTER TABLE " + TABLE_THEMES_V2 + " ADD COLUMN " + KEY_VISIBLE + " INTEGER");
db.execSQL("UPDATE " + TABLE_THEMES_V2 + " SET " + KEY_VISIBLE + " = 1;"); // for True
db.execSQL("UPDATE " + TABLE_THEMES_V2 + " SET " + KEY_VISIBLE + " = 0;"); // for False 
```

# javascript - jQuery计算BMI

> ID：10775663
> 
> 赞同：1
> 
> 时间：2012-05-27T16:53:14.643
> 
> 标签：javascript, jquery

我坚持这个问题。我想计算身体 BMI。

我的 HTML - 每一行`<tr>`都是由 PHP 动态创建的。

```
 <tbody>        
     <tr id="person_bmi">
        <td>Jack</td>
        <td><input name="weight" type="text" class="span1" id="weight" maxlength="5"></td>
        <td><input name="height" type="text" class="span1" id="height" maxlength="5"></td>
        <td><input name="bmi" type="text" class="span1" id="bmi" readonly></td>       
      </tr>

    <tr id="person_bmi">
        <td>Michael</td>
        <td><input name="weight" type="text" class="span1" id="weight" maxlength="5"></td>
        <td><input name="height" type="text" class="span1" id="height" maxlength="5"></td>
        <td><input name="bmi" type="text" class="span1" id="bmi" readonly></td>       
      </tr>

      //and so on...
</tbody> 
```

我试图实现的是每个人`Jack`，在计算出自己的值后`Michael`，`so on..`都会在文本字段中拥有自己的 BMI 值。我尝试创建自己的代码，但它没有意义..`#bmi``$weight/($height*100/$height*100)`

```
$("#weight, #height").keyup(function(){
    var $weight= $("#weight").val();
    var $height= $("#height").val();
    var $bmi = $weight/($height/100*$height/100);

    $("#bmi").val(parseInt($bmi));
}); 
```

有人能给我指路吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T16:59:09.903

删除重复的 ID 并使用,`class="weight"`代替。然后你可以使用下面的 jQuery 代码：`class="height"``class="bmi"`

```
$(".weight, .height").keyup(function() {
    var row = $(this).closest('tr');
    var weight = parseInt(row.find('.weight').val(), 10);
    var height = parseInt(row.find('.height').val(), 10);
    var bmi = weight / (height / 100 * height / 100);
    row.find('.bmi').val(isNaN(bmi) ? '' : bmi);
}); 
```

如果要允许输入值使用浮点数，请将包含`parseInt`以下内容的两行替换为：

```
var weight = parseFloat(row.find('.weight').val());
var height = parseFloat(row.find('.height').val()); 
```

演示：http: [//jsfiddle.net/KStjd/](http://jsfiddle.net/KStjd/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T16:59:11.790

问题很可能是`val`返回字符串和字符串不能相乘或相除。正如ThiefMaster所提到的，您也不能拥有多个具有相同ID的项目，因此请更改`<tr id="person_bmi">`为`<tr class="person_bmi">`

```
$(".person_bmi input").keyup(function() {
   var $parent = $(this).parent().parent();

   var weight = parseFloat($parent.find("[name='weight']").val());
   var height = parseFloat($parent.find("[name='height']").val());
   var bmi = weight/(height/100*height/100);

   $parent.find("[name='bmi']").val(bmi);
});​ 
```

这是一个完整的工作示例的小提琴：http: [//jsfiddle.net/uCAYF/1/](http://jsfiddle.net/uCAYF/1/)

您看到的正在使用的`.find`函数是“作用域”的，因为它只会查找从调用它的元素派生出来的节点。由于它是作用域的，它将安全地选择给定行上感兴趣的输入字段。

jQuery 允许您在搜索元素时使用 CSS 选择器，因此您可以做的不仅仅是通过 id 查找。例如，在上面的示例中，我通过名称找到您的输入元素。

以下是一些关于您可以使用的不同选择器以及它们如何工作的好资源：http: [//www.w3.org/TR/CSS2/selector.html](http://www.w3.org/TR/CSS2/selector.html)

[http://www.w3.org/TR/selectors/](http://www.w3.org/TR/selectors/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T16:58:44.400

请尝试添加唯一 ID：

```
var weight= parseFloat($("#person1_weight").val());
var height= parseFloat($("#person1_height").val());
var bmi = weight/(height/100*height/100);

$("#person1_bmi").val(bmi); // bmi is not an integer 
```

或者，无论无效的非唯一 id 是什么，以下内容都可能有效，因此您可以保留它们（不推荐）或关闭所有 id。它使用输入位置。

```
$("tr input:eq(0), tr input:eq(1)").keyup(function(){
    var weight= parseFloat($(this).closest('tr').find('input:eq(0)'));
    var height= parseFloat($(this).closest('tr').find('input:eq(1)'));
    var bmi = weight/(height/100*$height/100);

    $(this).closest('tr').find('input:eq(2)').val(bmi);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T17:10:26.820

```
$("input[name=weight], input[name=height").keyup(function() {
    var row = $(this).parent().parent(),
        weight = parseFloat($('input[name=weight]', row).val()),
        height = parseFloat($('input[name=height]', row).val());
    var bmi = weight / (height / 100 * height / 100);
    $('.bmi', row).val(isNaN(bmi) ? '' : bmi);
}); 
```

**[工作样本](http://jsfiddle.net/thecodeparadox/ESQsn/)**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-27T17:12:21.533

```
$(document).ready(function()
{
    $("PutYourButtonID_Here").click(function(event){
        var weight= parseFloat($("#person1_weight").val());
        var height= parseFloat($("#person1_height").val());
        var bmi = weight/(height/100*height/100);
        $("#person1_bmi").val(bmi);
    });
}); 
```

# java - 根据数据库中的表设置单选按钮

> ID：10775671
> 
> 赞同：0
> 
> 时间：2012-05-27T16:53:43.727
> 
> 标签：java, android, cursor, radio-button

我有 2 个活动，第一个是数据库助手，第二个是主要活动。

现在，我正在尝试根据 KEY_b_NAME 列中表 DATABASE_TABLE_SETTINGS 上的名称设置单选按钮。

我尝试在主要活动上设置以下代码并获得一个光标来检查是否！c.isAfterLast，如果这是真的，我希望它设置新的单选按钮，其 id 为 KEY_ROW_b_ID 和名称 KEY_b_NAME。

午餐后，我收到此错误：

```
05-27 19:33:44.055: E/AndroidRuntime(2189): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tamar.efrat/com.tamar.efrat.Tamar_appActivity}: java.lang.NullPointerException 
```

主要活动中的 for 循环是：

```
 DatBas dbc = new DatBas(Tamar_appActivity.this);
    dbc.open();
    SQLiteDatabase tdb = null;
    String[] columns = new String[] { DatBas.KEY_ROW_B_ID, DatBas.KEY_B_NAME };
    Cursor c = tdb.query(DatBas.DATABASE_TABLE_SETTINGS, columns, null, null, null, null,
            null);

    int iRawBId = c.getColumnIndex(DatBas.KEY_ROW_B_ID);
    int iBName = c.getColumnIndex(DatBas.KEY_B_NAME);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        RadioGroup radiogroup = (RadioGroup)    
                    findViewById(R.id.bNameSelectGroup);
        RadioButton rdbtn = new RadioButton(this);
        rdbtn.setId(iRawBId);
        rdbtn.setText(iBName);
        radiogroup.addView(rdbtn);  
    }
    dbc.close(); 
```

数据库助手的代码是：

```
public class DatBas {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_SHOURS = "start_hour";
    public static final String KEY_SMINUTE = "start_minute";
    public static final String KEY_SDATE = "start_date";
    public static final String KEY_AMOUNT = "amount";
    public static final String KEY_SIDE = "side";
    public static final String KEY_KIND = "kind";

    public static final String KEY_ROW_b_ID = "_id";
    public static final String KEY_b_IMAGE_PATH = "uri_b";
    public static final String KEY_b_NAME = "b_name";
    public static final String KEY_b_GENDER = "b_gender";
    public static final String KEY_b_BORN_DATE_YEAR = "b_age_year";
    public static final String KEY_b_BORN_DATE_MONTH = "b_age_month";
    public static final String KEY_b_BORN_DATE_DAY = "b_age_day";

    private static final String DATABASE_NAME = "TamatDB";
    private static final String DATABASE_TABLE = "stop_watch_records";
    private static final String DATABASE_TABLE_SETTINGS = "settings";

    private static final int DATABASE_VERSION = 3 ;

    private TamarDatabase thdb;
    private static Context tcontext;
    private SQLiteDatabase tdb;

    private static class TamarDatabase extends SQLiteOpenHelper {

        public TamarDatabase(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            String ctData = "CREATE TABLE  " + DATABASE_TABLE + " ( "
                    + KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                    + KEY_SHOURS + " TEXT, " + KEY_SMINUTE
                    + " TEXT, " + KEY_SDATE + " TEXT, "
                    + KEY_AMOUNT + " TEXT, " + KEY_SIDE
                    + " TEXT, " + KEY_KIND + " TEXT );";
            db.execSQL(ctData);

            String ctSettings = "CREATE TABLE " + DATABASE_TABLE_SETTINGS
                    + " ( " + KEY_ROW_b_ID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                    + KEY_b_IMAGE_PATH + " TEXT, " + KEY_b_NAME
                    + " TEXT, " + KEY_b_GENDER + " TEXT, "
                    + KEY_b_BORN_DATE_YEAR + " TEXT, "
                    + KEY_b_BORN_DATE_MONTH + " TEXT, "
                    + KEY_b_BORN_DATE_DAY + " TEXT);";
            db.execSQL(ctSettings);

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE_SETTINGS);
            onCreate(db);
        }
    }

    public DatBas(Context c) {
        tcontext = c;
    }

    public DatBas open() throws SQLiteException {
        thdb = new TamarDatabase(tcontext);
        tdb = thdb.getWritableDatabase();
        return this;
    }

    public SQLiteDatabase getReadableDatabase() throws SQLiteException {
        thdb = new TamarDatabase(tcontext);
        tdb = thdb.getReadableDatabase();
        return tdb;
    }

    public void close() {
        tdb.close();
    }

    public long createEntry(String sh, String sm, String sd, String at,
            String tside, String tkind) {
        ContentValues cv = new ContentValues();
        cv.put(KEY_SHOURS, sh);
        cv.put(KEY_SMINUTE, sm);
        cv.put(KEY_SDATE, sd);
        cv.put(KEY_AMOUNT, at);
        cv.put(KEY_SIDE, tside);
        cv.put(KEY_SIDE, tkind);

        return tdb.insert(DATABASE_TABLE, null, cv);
    }

    public long createEntrySettings(String pt, String bn, String bg,
            String bbdy, String bbdm, String bbdd) {
        ContentValues cv2 = new ContentValues();
        cv2.put(KEY_b_IMAGE_PATH, pt);
        cv2.put(KEY_b_NAME, bn);
        cv2.put(KEY_b_GENDER, bg);
        cv2.put(KEY_b_BORN_DATE_YEAR, bbdy);
        cv2.put(KEY_b_BORN_DATE_MONTH, bbdm);
        cv2.put(KEY_b_BORN_DATE_DAY, bbdd);

        return tdb.insert(DATABASE_TABLE_SETTINGS, null, cv2);
    }

    public String getData() {
        String[] columns = new String[] { KEY_ROWID, KEY_SHOURS, KEY_SMINUTE,
                KEY_SDATE, KEY_AMOUNT, KEY_SIDE, KEY_KIND };
        Cursor c = tdb.query(DATABASE_TABLE, columns, null, null, null, null,
                null);
        String results = "";

        int iRaw = c.getColumnIndex(KEY_ROWID);
        int iShours = c.getColumnIndex(KEY_SHOURS);
        int iSminute = c.getColumnIndex(KEY_SMINUTE);
        int iDate = c.getColumnIndex(KEY_SDATE);
        int iAmount = c.getColumnIndex(KEY_AMOUNT);
        int iSide = c.getColumnIndex(KEY_SIDE);
        int iKind = c.getColumnIndex(KEY_KIND);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            results = results + "the id is " + c.getString(iRaw)
                    + " the sart hour is " + " " + c.getString(iShours)
                    + " the start minute is " + " " + c.getString(iSminute)
                    + " the start date is " + " " + c.getString(iDate)
                    + " the amount is " + " " + c.getString(iAmount)
                    + " the side is " + " " + c.getString(iSide)
                    + " the kind is " + " " + c.getString(iKind) + "\n";
        }
        return results;
    }

    public String getDataSettings() {
        String[] columns = new String[] { KEY_ROW_b_ID, KEY_b_IMAGE_PATH,
                KEY_b_NAME, KEY_b_GENDER, KEY_b_BORN_DATE_YEAR,
                KEY_b_BORN_DATE_MONTH, KEY_b_BORN_DATE_DAY };
        Cursor c = tdb.query(DATABASE_TABLE_SETTINGS, columns, null, null,
                null, null, null);
        String results = "";

        int iRawbId = c.getColumnIndex(KEY_ROW_b_ID);
        int iBIPath = c.getColumnIndex(KEY_b_IMAGE_PATH);
        int iBName = c.getColumnIndex(KEY_b_NAME);
        int iGender = c.getColumnIndex(KEY_b_GENDER);
        int iBBDateYear = c.getColumnIndex(KEY_b_BORN_DATE_YEAR);
        int iBBDateMonth = c.getColumnIndex(KEY_b_BORN_DATE_MONTH);
        int iBBDateDay = c.getColumnIndex(KEY_b_BORN_DATE_DAY);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            results = results + " id " + " " + c.getString(iRawbId)
                    + " path " + " " + c.getString(iBIPath)
                    + " name " + " " + c.getString(iBName)
                    + " gender " + " " + c.getString(iGender)
                    + " year " + " " + c.getString(iBBDateYear)
                    + " month " + " " + c.getString(iBBDateMonth)
                    + " day " + " " + c.getString(iBBDateDay) + "\n";
        }
        return results;
    }

    public String getDataSettingsbName() {
        String[] columns = new String[] { KEY_ROW_b_ID, KEY_b_NAME };
        Cursor c = tdb.query(DATABASE_TABLE_SETTINGS, columns, null, null,
                null, null, null);
        String results = "";

        int iRawbId = c.getColumnIndex(KEY_ROW_b_ID);
        int iBName = c.getColumnIndex(KEY_b_NAME);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            results = c.getString(iRawbId)+ c.getString(iBName)+ "\n";
        }
        return results;
    }

    public DatBas delete() {
        tdb.delete(DATABASE_TABLE, null, null);
        tdb.delete(DATABASE_TABLE_SETTINGS, null, null);
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:03:00.277

您的`Sqlitedatabase`实例是`null`这样的，`NullPointerException`当您尝试对其进行查询时它会抛出一个：

```
SQLiteDatabase tdb = null; // this is null so when you query the database it will throw an exception
String[] columns = new String[] { DatBas.KEY_ROW_B_ID, DatBas.KEY_B_NAME };
Cursor c = tdb.query(DatBas.DATABASE_TABLE_SETTINGS, columns, null, null, null, null,
            null); 
```

而是获取对有效的引用`SQLiteDatabase`：

```
SQLiteDatabase tdb = dbc.getDatabase();
String[] columns = new String[] { DatBas.KEY_ROW_B_ID, DatBas.KEY_B_NAME };
Cursor c = tdb.query(DatBas.DATABASE_TABLE_SETTINGS, columns, null, null, null, null,
            null); 
```

你的类中的方法是这样的`getDatabase()`：`DatBas`

```
public SQliteDatabase getDatabase() {
   return tdb;
} 
```

另外，`getReadableDatabase()`从您的`DatBas`课程中删除该方法。

# php - 返回和换行符会破坏正则表达式结果

> ID：10775672
> 
> 赞同：2
> 
> 时间：2012-05-27T16:53:46.477
> 
> 标签：php, regex

我目前正在使用：

```
preg_match("/(.*)On\s+(Sun|Sat|Fri|Thu|Wed|Tue|Mon),\s+(January|February|March|April|May|June|July|August|September|October|November|December)\s+\d?\d,\s+\d{4}\s+at\s+\d?\d:\d\d\s+[AP]M,/i", $to, $end); 
```

它适用于：

```
$string = "I need to match this. On Sun, May 27, 2012 at 9:23 AM, Prov"; 
```

但不适用于：

```
$string = "I need to match this. 

On Sun, May 27, 2012 at 9:23 AM, Prov"; 
```

$string2 中的返回不允许匹配。我可以更改我的 preg_match 中的某些内容，以便返回不会破坏我的结果吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T16:55:20.360

添加`/s`修饰符以允许点 ( `.`) 也匹配换行符：

```
preg_match("/(.*)On\s+(Sun|Sat|Fri|Thu|Wed|Tue|Mon),\s+(January|February|March|April|May|June|July|August|September|October|November|December)\s+\d?\d,\s+\d{4}\s+at\s+\d?\d:\d\d\s+[AP]M,/si", $to, $end); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:00:02.437

点“。” 字符与换行符[不匹配。](http://www.regular-expressions.info/dot.html)

# c# - 在 WPF 中打开 ContextMenu 时保留 DataGrid IsSelectionActive？

> ID：10775675
> 
> 赞同：9
> 
> 时间：2012-05-27T16:54:20.073
> 
> 标签：c#, wpf, contextmenu, wpfdatagrid, css-selectors

我有`DataGrid`一个风格为`IsSelectionActive`; 但是，一旦`ContextMenu`打开，网格就会丢失`IsSelectionActive`，并且在用户看来，好像上下文菜单以某种方式接受了选择并且可能会使用户感到困惑。

有没有办法`IsSelectionActive`在上下文菜单打开时保留？

```
<ControlTemplate.Triggers>
    <MultiTrigger>
        <MultiTrigger.Conditions>
            <!--<Condition Property="Selector.IsFocused" Value="True" />-->
            <Condition Property="IsSelected" Value="True" />
        </MultiTrigger.Conditions>

        <Setter Property="Background" Value="Red" />
    </MultiTrigger>

    <MultiTrigger>
        <MultiTrigger.Conditions>
            <Condition Property="Selector.IsFocused" Value="False" />
            <Condition Property="IsSelected" Value="False" />
        </MultiTrigger.Conditions>

        <Setter Property="Background" Value="Green" />
    </MultiTrigger>

    <MultiTrigger>
        <MultiTrigger.Conditions>
            <Condition Property="Selector.IsFocused" Value="False" />
            <Condition Property="IsSelected" Value="True" />
        </MultiTrigger.Conditions>

        <Setter Property="Background" Value="Blue" />
    </MultiTrigger> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T21:54:26.613

这是我在测试应用程序中用于获得所需行为的整个 XAML：

```
<Window x:Class="DataGridSelectionActive.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:DataGridSelectionActive"
        Title="MainWindow" Height="350" Width="525">

    <!-- People is just an ObservableCollection derived class. -->
    <Window.DataContext>
        <local:People/>
    </Window.DataContext>

    <Window.Resources>

        <ContextMenu x:Key="dataGridContextMenu">
            <MenuItem Header="Some context menu item"/>
        </ContextMenu>

        <Style TargetType="{x:Type DataGridCell}">
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                    <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                </Trigger>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="True"/>
                        <Condition Binding="{Binding IsKeyboardFocusWithin, RelativeSource={RelativeSource AncestorType=DataGrid}}" Value="False"/>
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                    <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                </MultiDataTrigger>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="True"/>
                        <Condition Binding="{Binding ContextMenu.IsOpen, RelativeSource={RelativeSource AncestorType=DataGrid}}" Value="True"/>
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                    <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                </MultiDataTrigger>
            </Style.Triggers>
        </Style>

    </Window.Resources>

    <DockPanel>
        <!-- Added button for testing keyboard focus. -->
        <Button DockPanel.Dock="Top" Content="Click me"/>
        <DataGrid ItemsSource="{Binding}" ContextMenu="{StaticResource dataGridContextMenu}"/>
    </DockPanel>

</Window> 
```

启用此行为的关键是，如果多个具有冲突的触发器`Setters`同时处于活动状态，则最后一个获胜。

# perl - HTTP::Headers with say

> ID：10775679
> 
> 赞同：0
> 
> 时间：2012-05-27T16:54:57.120
> 
> 标签：perl

这是 Net::Server::HTTP 的简单脚本

```
#!/usr/bin/env perl

use strict;
use warnings;

use v5.12;

use HTTP::Headers;

use base qw(Net::Server::HTTP);
__PACKAGE__->run(port => 'localhost:8421');

sub process_http_request
{
  my ($self) = @_;
  my $header = HTTP::Headers->new();

  $header->content_type('text/html');

  print $header->as_string() . "\n"; # <- this works
  # say $header->as_string() . "\n"; # <- this doesn't work and I still have to add a newline

  say "<!doctype html>";
  say "<html>";
  say "<head>";
  say "  <title>Test</title>";
  say "</head>";
  say "<body>";
  say "<h1>Test</h1>";
  say "</body>";
  say "</html>";
} 
```

我假设通过使用`say`我可以绕过添加换行符，但是我必须添加它并且它会`HTTP::Header`通过向每个 HTTP 字段添加另一个换行符来破坏 ，这没有意义，因为`as_string`它暗示它是一个字符串。有人可以解释一下这里到底发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:26:35.887

该错误似乎是该软件未正确委托给[Net::Server::TiedHandle](http://kobesearch.cpan.org/htdocs/Net-Server/Net/Server.pm.html#package-Net%3a%3aServer%3a%3aTiedHandle-)的 SAY 方法，仅委托给 PRINT。我不知道如何修复这个。

我建议您将[Plack](http://p3rl.org/Plack)用于您的 Web 应用程序。

文件`app.psgi`：

```
my $html = <<'HTML';
<!doctype html>
<html>
<head>
<title>Test</title>
</head>
<body>
<h1>Test</h1>
</body>
</html>
HTML

my $app = sub {
    return [200, [Content_Type => 'text/html'], [$html]];
}; 
```

命令行：

```
plackup --port 8421 
```

# android - 如何强制暂停进程的内存进行交换？

> ID：10775687
> 
> 赞同：1
> 
> 时间：2012-05-27T16:55:41.390
> 
> 标签：android, memory-management, virtual-memory, android-lifecycle, swapfile

我正在寻找改进 UI 以防止内存为 256MB 的 Android 设备滞后的方法。内存非常有限，以至于大型前端应用程序会触发大量其他应用程序的交换。

这个想法是：如果一个后台应用程序（例如 Facebook 应用程序）不需要持续运行，不像*电话*，它必须保持不间断，只需暂停该应用程序的进程，并每隔几分钟继续运行一次以检索更新，仅当手机在口袋里闲置时，然后再次暂停该过程。

为了减少换出其他应用程序内存的延迟，我希望暂停的应用程序的内存可以*主动*交换到磁盘/闪存，以便可以立即释放 RAM，以满足前端应用程序的需求。（参考速度：class 10 SDHC：10MB/s 写入，所以如果网页需要占用 20MB RAM，浏览器会延迟 2 秒）

所以我的问题是：如何强制系统将暂停进程的私有内存交换到磁盘/闪存中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:32:31.497

如果需要 ram，则不活动的进程会自动进入交换，因为他的优先级较低（请参阅 android 上的优先级）。

从理论上讲，10 级卡是好的，只能在 2 秒内完成交换，但卡的内存控制器太长，您将有 5 或 6 秒。拥有更多的类 6 是没有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:36:13.983

Android 已经处理了暂停应用程序的内存，但与其将进程交换到一些可能很昂贵的虚拟内存，它可以在需要时将它们转储以释放内存。

来自[Android 开发者文档 - 管理 Activity 生命周期](http://developer.android.com/guide/components/activities.html#Lifecycle)：

> 如果一个活动被暂停或停止，系统可以通过要求它完成（调用它的 finish() 方法）或简单地终止它的进程来将它从内存中删除。当活动再次打开时（在完成或杀死之后），必须重新创建它。

Activity`onPause()`是保证运行的最后一个生命周期回调，允许它保存其状态，之后 Android 可能会在它认为合适的时候愉快地转储它。

从同一文件中[进一步：](http://developer.android.com/guide/components/activities.html#ImplementingLifecycleCallbacks)

> ...如果系统必须在紧急情况下恢复内存，则可能不会调用 onStop() 和 onDestroy()。因此，您应该使用 onPause() 将关键的持久数据（例如用户编辑）写入存储。但是，您应该选择在 onPause() 期间必须保留哪些信息，因为*此方法中的任何阻塞过程都会阻塞到下一个活动的转换并减慢用户体验*。

（*重点补充*）

因此，您可能遇到的瓶颈可能是应用程序本身，而不是操作系统，并且保存`Activity`状态仍然可能比尝试存储整个应用程序的内存内容要快得多。

# php - CodeIgniter 404 页面

> ID：10775688
> 
> 赞同：18
> 
> 时间：2012-05-27T16:55:43.413
> 
> 标签：php, codeigniter

当我在我的网站上输入一个不存在的 url 时，它会将我带到 routes.php 中指定的 404 页面：

```
$route['404_override'] = 'page/not_found'; 
```

所以页面的设计就像我在“页面”目录中的视图not_found.php中所做的那样。

但是，如果我使用此功能手动强制执行 404：

```
show_404(); 
```

它带我进入没有样式的默认 CodeIgniter 404 页面：

```
404 Page Not Found

The page you requested was not found. 
```

如何让它转到我在路由文件中指定的同一个 404 页面？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-04-12T05:57:38.190

这里的所有答案似乎都已经过时（至少从第 2 版开始）或非常过时。这是一种更简单且易于管理的方法，只涉及两个步骤：

1.  在**application/config/** routes.php修改字段**404_override**以指向某个控制器：

    ```
    // Specify some controller of your choosing
    $route['404_override'] = 'MyCustom404Ctrl'; 
    ```

2.  在您指定的控制器内`routes.php`，实现该`index()`方法，以便加载您的自定义错误 404 视图。您可能还想设置一些标头，以便浏览器知道您正在返回 404 错误：

    ```
    // Inside application/controllers/MyCustom404Ctrl.php
    class MyCustom404Ctrl extends CI_Controller  {
        public function __construct() {
            parent::__construct();
        }

        public function index(){
            $this->output->set_status_header('404');

            // Make sure you actually have some view file named 404.php
            $this->load->view('404');
        }
    } 
    ```

就像提到的代码内注释一样，请确保在**application/views/404.php**中有一个视图文件，您实际上拥有自定义 404 页面。

作为旁注，此页面中的一些答案建议您修改 /system 中的内容，这是一个坏主意，因为当您更新 CodeIgniter 版本时，您将覆盖您的更改。我建议的解决方案不会与核心文件混淆，这使您的应用程序更加便携和可维护，并且抗更新。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-22T09:36:27.583

使用[_remap()](http://ellislab.com/codeigniter/user-guide/general/controllers.html#remapping)函数。这使您可以做一些非常强大的事情，其中​​包含超出通常内置的 404 错误 - 例如

*   不同的 404 消息取决于用户是否登录！
*   额外记录 404 错误 - 您现在可以查看 404 的推荐人是什么，从而帮助追踪错误。这包括查看它是否是机器人（例如 Google 机器人） - 或者它是否是登录用户，哪个用户导致了 404（因此您可以联系他们以获取更多信息 - 或者如果他们试图猜测管理员路线，则禁止他们或者其他的东西）
*   忽略某些 404 错误（例如 iPhone 用户的 precomposed.png 错误）。
*   如果您有特定需要，允许某些控制器以不同的方式处理自己的 404 错误（例如，允许博客控制器重新路由到最新的博客）

让所有控制器扩展`MY_Controller`：

```
class MY_Controller extends CI_Controller
{
    // Remap the 404 error functions
    public function _remap($method, $params = array())
    {
        // Check if the requested route exists
        if (method_exists($this, $method))
        {
            // Method exists - so just continue as normal
            return call_user_func_array(array($this, $method), $params);
        }

        //*** If you reach here you have a 404 error - do whatever you want! ***//

        // Set status header to a 404 for SEO
        $this->output->set_status_header('404');

        // ignore 404 errors for -precomposed.png errors to save my logs and
        // stop baby jesus crying
        if ( ! (strpos($_SERVER['REQUEST_URI'], '-precomposed.png')))
        {
            // This custom 404 log error records as much information as possible
            // about the 404\. This gives us alot of information to help fix it in
            // the future. You can change this as required for your needs   
            log_message('error', '404:  ***METHOD: '.var_export($method, TRUE).'  ***PARAMS: '.var_export($params, TRUE).'  ***SERVER: '.var_export($_SERVER, TRUE).' ***SESSION: '.var_export($this->session->all_userdata(), TRUE));
        }

        // Check if user is logged in or not
        if ($this->ion_auth->logged_in())
        {
            // Show 404 page for logged in users
            $this->load->view('404_logged_in');
        }
        else
        {
            // Show 404 page for people not logged in
            $this->load->view('404_normal');
        }
   } 
```

然后`routes.php`将您的 404 设置为您的主控制器，设置为**不存在**的功能- 即

```
$route['404']             = "welcome/my_404";
$route['404_override']    = 'welcome/my_404'; 
```

但是没有**欢迎** `my_404()`功能-这意味着您的所有404都将通过该`_remap`功能-因此您可以实现DRY并将所有404逻辑集中在一个位置。

如果您使用`show_404()`或只是`redirect('my_404')`在您的逻辑中，这取决于您。如果您使用`show_404()`- 则只需修改 Exceptions 类以重定向

```
class MY_Exceptions extends CI_Exceptions
{
    function show_404($page = '', $log_error = TRUE)
    {
         redirect('my_404');
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-22T18:06:52.697

要更改行为，`show_404`您需要从 CI 核心 ( `system/Core/Common.php`) 修改文件，这对于功能更新不太实用。

取而代之的是，您可以：

1.  [将用户重定向](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)`controller/method`到$route['404_override'] 中指定的相同位置。

2.  您可以创建一个自定义库来处理自定义 404 并像使用它一样使用它`$libInstance->show_404();`

    ```
    public function show_404() {
        set_status_header(404);

        return "404 - not found";
    } 
    ```

3.  或使用视图：

    ```
    public function show_404($template) {
        set_status_header(404);

        if (ob_get_level() > $this->ob_level + 1)
        {
            ob_end_flush();
        }
        ob_start();

        include(APPPATH.'views/'.$template.'.php');
        $buffer = ob_get_contents();
        ob_end_clean();

        return $buffer;
    } 
    ```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-27T17:28:28.050

如果您尝试了 user_guide，您会看到显示如下：

> show_404('page' [, 'log_error']) 该函数期望传递给它的字符串是未找到页面的文件路径。请注意，如果找不到控制器，CodeIgniter 会自动显示 404 消息。

因此，您需要将控制器名称作为第一个参数传递。第二个是启用或禁用日志记录。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-19T10:47:23.327

CodeIgniter 带有一个默认的 404 错误页面但是通过使用 codeigniter 的路由选项，您可以轻松地向您的用户显示您的自定义 404 错误页面。

为此，只需转到您的 codeigniter 项目的路由文件并输入以下行

```
$route['404_override'] = 'error_404'; 
```

这里的**error_404**是一个控制器文件，用于在您的 codeigniter 项目中显示自定义 404 错误页面或任何其他类型的错误页面。

创建**error_404**文件并将此代码复制到此文件中

```
class Error_404 extends CI_controller
{

  public function index()
  {
    $this->output->set_status_header('404');
            // Make sure you actually have some view file named 404.php
            $this->load->view('Error_page');
  }
} 
```

在您的 CodeIgniter 视图文件夹中**创建 Error_page**视图文件，就是这样，输入任何错误的 url，现在您可以看到您的自定义 404 错误页面。

如果您有任何疑问，那么您可以按照本[教程](https://codesquery.com/create-custom-404-error-page-codeigniter/)逐步教程在 codeigniter 中创建自定义 404 错误页面

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-27T16:55:18.623

将文件更改`application/errors/error_404.php`为您要显示的页面。那`show_404()`是显示的文件...

```
*show_404('page' [, 'log_error']) 
```

此函数将使用以下错误模板显示提供给它的 404 错误消息：

```
application/errors/error_404.php 
```

该函数期望传递给它的字符串是未找到页面的文件路径。请注意，如果找不到控制器，CodeIgniter 会自动显示 404 消息。

CodeIgniter 会自动记录所有`show_404()`调用。将可选的第二个参数设置为`FALSE`将跳过日志记录。*

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-28T19:58:08.967

您需要在 application/config/routes.php 中设置以下代码

```
$route['404_override'] = 'page/not_found'; 
```

在名为“page.php”的应用程序/控制器中创建一个控制器后

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class page extends CI_Controller {

    public function __construct(){
        parent::__construct();
    }

    public function not_found() {   
        $this->load->view('not_found');
    }
} 
```

然后您可以在名为“not_found.php”的应用程序/视图中为 404 错误页面创建自己的设计

```
<html>
 <body>
  <section>
   <div>
    <div align="center" style="margin-top:50px; margin-bottom:50px;">
     <img src="<?php echo base_url();?>images/404.jpg" /> // will be your image path.
    </div>
   </div>
  </section>
 </body>
</html> 
```

或者

```
<html>
 <body>
  <section>
   <div>
    <div align="center" style="margin:0px auto;">
     <h1>OOPS!</h1>
     <h3>Sorry, an error has occured, Requested page not found!</h3>
     <h5 align="center"><a href="<?php echo base_url(); ?>">Back to Home</a></h5>
    </div>
   </div>
  </section>
 </body>
</html> 
```

# google-chrome - Twitter API：拒绝执行 javascript

> ID：10775691
> 
> 赞同：0
> 
> 时间：2012-05-27T16:56:10.730
> 
> 标签：google-chrome, twitter

> **可能重复：**
> [拒绝执行 JavaScript 脚本。在请求中找到的脚本源代码](https://stackoverflow.com/questions/1547884/refused-to-execute-a-javascript-script-source-code-of-script-found-within-reque)

我想在我的主页上显示我最新的推文。首先，我查看了 Twitter 小部件，但它们太大了，不适合我的设计。所以我决定使用 Twitter API。我尝试使用以下代码：

```
<div id="twitter_update_list"></div>
<script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/username.json?callback=twitterCallback2&count=1"></script> 
```

但是当我在 chrome 中检查控制台日志时，我看到了这个错误：

> 拒绝执行 JavaScript 脚本。在请求中找到的脚本源代码。

显然，现在没有推文显示:(有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:24:48.723

我通过使用本地 JavaScript 解析推文自己解决了这个问题。我下载了 blogger.js，稍作修改（删除了一些样式）并将其上传到我的服务器。现在它就像一个魅力。

# c# - api facebook, asp.net mvc3,c#

> ID：10775702
> 
> 赞同：-2
> 
> 时间：2012-05-27T16:57:37.690
> 
> 标签：c#, facebook, asp.net-mvc-3

我尝试安装`FBGraph`（api）

```
 install package fbgraph 
```

但它没有用。我该如何安装`FBGraph`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:19:00.700

您可能想改用这个库：

```
Install-Package Facebook 
```

并[在此处](http://csharpsdk.org/)了解更多信息。

顺便说一句，Nuget 上没有 FbGraph 库。

# javascript - Jquery根据拖动的边缘调整插件最小宽度

> ID：10775703
> 
> 赞同：0
> 
> 时间：2012-05-27T16:57:42.777
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jquery-resizable

> **可能重复：**
> [Jquery 可调整大小插件，根据拖动边缘设置 minWidth](https://stackoverflow.com/questions/10772843/jquery-resizable-plugin-set-minwidth-depending-on-the-dragging-edge)

如何根据拖动元素的哪个边缘设置 minWidth 和 height？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:45:01.237

有点奇怪的互动，但在这里（[jsfiddle](http://jsfiddle.net/mLw3Q/)）

```
$(function() {
    $( "#resizable" ).resizable({
        handles : 'e, n, s, w',
        resize : function(event, ui){
            switch($(this).data('resizable').axis)
            {
                case 'n':
                    $(this).resizable( "option", "minHeight", 75 );
                    break;
                case 's':
                    $(this).resizable( "option", "minHeight", 100 );
                    break;
                case 'e':
                    $(this).resizable( "option", "minWidth", 150 );
                    break;
                case 'w':
                    $(this).resizable( "option", "minWidth", 200 );
                    break;
            }
        }
    });
});​ 
```

# javascript - 滚动过去时使html元素保持原位

> ID：10775704
> 
> 赞同：1
> 
> 时间：2012-05-27T16:57:43.657
> 
> 标签：javascript, html, css

如何让一个 html 元素在滚动到它之前不会变得固定？因此，当用户滚动时，它将处于正常位置，但在用户滚动过去后它不会离开屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:58:50.120

将侦听器附加到`onscroll`事件，如果`scrollTop`大于元素的 Y 位置，则将其设置为`position: fixed`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:14:48.800

看看[jQuery Scrollfollow 插件](https://code.google.com/p/jquery-scroll-follow/)。我已经使用它来方便地实现该效果。

您只需在要保留在视图中的元素上调用它：

```
<script type="text/javascript">
        $( '#example' ).scrollFollow();
</script> 
```

可以配置缓动、位置和其他参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T16:59:40.167

我以前用过这段代码：

[http://www.webdeveloperjuice.com/2011/08/07/how-to-fix-element-position-after-some-scroll-using-jquery/](http://www.webdeveloperjuice.com/2011/08/07/how-to-fix-element-position-after-some-scroll-using-jquery/)

```
(function($){
        $.fn.scrollFixed = function(params){
        params = $.extend( {appearAfterDiv: 0, hideBeforeDiv: 0}, params);
        var element = $(this);

        if(params.appearAfterDiv)
            var distanceTop = element.offset().top + $(params.appearAfterDiv).outerHeight(true) + element.outerHeight(true);
        else
            var distanceTop = element.offset().top;

        if(params.hideBeforeDiv)
            var bottom = $(params.hideBeforeDiv).offset().top - element.outerHeight(true) - 10;
        else
            var bottom = 200000;                

            $(window).scroll(function(){    
                if( $(window).scrollTop() > distanceTop && $(window).scrollTop() < bottom )         
                    element.css({'position':'fixed', 'top':'5px'});
                else
                    element.css({'position':'static'});             
            });           
        };
    })(jQuery); 
```

然后只需调用元素：

```
$(document).ready( function(){
$("#scrollingDiv").scrollFixed({appearAfterDiv:'.sidebar p', hideBeforeDiv:'.footer'});
$("#scrollingDiv1").scrollFixed({hideBeforeDiv:'.footer'});
}); 
```

# ios - iOS 模型和 ViewController 之间的通信

> ID：10775707
> 
> 赞同：2
> 
> 时间：2012-05-27T16:58:00.587
> 
> 标签：ios, model-view-controller

我正在开发一个基于 Apple 提供的 Master-View 模板的应用程序（它包含两个 ViewController，MasterViewController 和 DetailViewController）。我添加了一个模型来与我的服务器通信。

但是，当我的 Model 收到来自服务器的消息时，它需要调用 MasterViewController 或 DetailViewController 类中的方法。我怎样才能做到这一点？

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T17:21:03.773

您可以从模型中触发通知，这些通知由 Master 和 Detail View 控制器处理。

**在模型中：**

```
- (void)receivedMessageFromServer {
    // Fire the notification
    [[NSNotificationCenter defaultCenter] postNotificationName:@"ReceivedData" 
                                                        object:nil];   
} 
```

**在视图控制器中处理“ReceivedData”通知：**

```
- (void)viewDidLoad {
    [NSNotificationCenter defaultCenter] addObserver:self 
                                            selector:@selector(receivedDataNotification:) 
                                                name:@"ReceivedData" 
                                              object:nil];
}

- (void)receivedDataNotification:(id)object {
    NSLog(@"Received Data!");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T17:26:40.920

实际上[，Apple 提出的 MVC 模式](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html)允许从模型到控制器的通知。

实现此目标的一个好方法是在您的数据更改时通过[NSNotificationCenter传递](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html)[NSNotification](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotification_Class/Reference/Reference.html)对象，并提供有关更改内容的信息，并让侦听器处理它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T18:44:38.330

您应该使用可选的协议委托方法。我有一个关于如何在此[PO](https://stackoverflow.com/questions/8606674/uimodaltransitionstylepartialcurl-doesnt-get-back-to-previous-state-not-dismi/8607949#8607949)中设置委托方法的示例的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-06T17:46:33.767

块是要走的路。

您需要在 ViewController 中引用您的模型。当您想要更新数据时，您向模型发送一条消息并将块作为参数传递给它，当从服务器接收到响应时，它将被调用。

例如：

**视图控制器**

```
[self.model fetchDataFromRemoteWithCompletionHandler:^(id responseObject, NSError *error)
{
    // responseObject is the Server Response
    // error - Any Network error
}]; 
```

**模型**

```
-(void)fetchDataFromRemoteWithCompletionHandler:(void(^)(id, NSError*))onComplete
{
    // Make Network Calls
    // Process Response
    // Return data back through block
    onComplete(foobarResponse, error);
} 
```

# java - java.io.StreamCorruptedException：无效类型代码：00

> ID：10775709
> 
> 赞同：13
> 
> 时间：2012-05-27T16:58:15.783
> 
> 标签：java, multithreading, sockets, objectoutputstream

所以基本上我在写一个客户端-服务器多人游戏。我有一个 SeverCommunicationThread，如果他收到 RequestForGame 创建一个游戏线程，它会创建一个游戏线程。当我发送 RequestForGame 时抛出异常 java.io.StreamCorruptedException: invalid type code: 00 我认为这是因为两个线程都试图读取相同的 ObjectInputStream，我对它的工作原理不太了解，我只知道如何使用它。您能帮我了解问题所在以及如何解决吗？谢谢 ：）

```
public class ServerCommunicationThread extends Thread{
private Socket connectionSocket;
private ObjectInputStream inFromClient;
private ObjectOutputStream outToClient;
private String nickname;
private ServerModelManager model;

public ServerCommunicationThread(Socket connectionSocket,
        ServerModelManager model) throws IOException {
    this.connectionSocket = connectionSocket;
    inFromClient = new ObjectInputStream(connectionSocket.getInputStream());
    outToClient = new ObjectOutputStream(connectionSocket.getOutputStream());
    this.model = model;
    start();

}

public void run() {
    try {
        String nickname = (String) inFromClient.readObject();
        if (model.exists(nickname)){
            System.out.println(nickname + " already exists");
            outToClient.writeObject(new MessageForClient("Please choose another nickname"));
        }
        else
        {
            System.out.println(nickname + " connected, adding to list");
            model.addClient(nickname, connectionSocket,outToClient,inFromClient);
            this.nickname=nickname;
        }
        while(true){
            Object o= inFromClient.readObject();//StreamCorruptedexception
            if(o instanceof RequestForGame)
            {
                RequestForGame r=(RequestForGame)o;
                String userToPlayWith=r.getUserToPlayWith();
                if(userToPlayWith.equals(nickname))
                {
                    String message="Playing with yourself makes your palms hairy, choose another opponent";
                    outToClient.writeObject(message);
                }
                else
                {
                System.out.println("received request to play with "+userToPlayWith+". starting game");
                ClientRepresentative client1=model.getClient(nickname);
                ClientRepresentative client2=model.getClient(userToPlayWith);
                ServerGameThread s=new ServerGameThread(client2,client1,client2.getInStream(),client1.getInStream(),client1.getOutStream(),client2.getOutStream());
                }
            }
            else if(o instanceof String)
            {
                String s=(String) o;
                if(s.equals("i want to quit"))
                {
                    model.deleteClient(nickname);
                    inFromClient.close();
                    String q="quit";
                    outToClient.writeObject(q);
                    connectionSocket.close();
                    System.out.println(nickname+"has quit without exc");
                }
            }
        }
    } catch (EOFException e) {
        System.out.println(nickname+" has quit");
    }
    catch (SocketException e)
    {
        System.out.println(nickname+" has quit");
    }

    catch (Exception e) {

        e.printStackTrace();
    }
}

}
 public class ServerGameThread extends Thread {

private ClientRepresentative client1,client2;
private ObjectInputStream inFromClient1,inFromClient2;
private ObjectOutputStream outToClient1,outToClient2;
private Field gameField; 
public ServerGameThread(ClientRepresentative client1, ClientRepresentative client2,ObjectInputStream inFromClient1,ObjectInputStream inFromClient2,ObjectOutputStream outToClient1,ObjectOutputStream outToClient2)
{
    System.out.println("startin game thred");
    this.client1=client1;//client 1 goes first
    this.client2=client2;//client 2 started game

        this.inFromClient1=inFromClient1;
        this.inFromClient2=inFromClient2;
        this.outToClient1=outToClient1;
        this.outToClient2=outToClient2;

        gameField=new Field();
        System.out.println("check");
        start();
}
public void run()
{
    System.out.println("Starting game. players: "+client1.getNickname()+";"+client2.getNickname());
    try {
        outToClient1.writeObject(gameField);
        outToClient2.writeObject(gameField);
        while(true)
        {
            try {
                System.out.println("listening to "+client1.getNickname());
                Object o1=inFromClient1.readObject();//read move from client 1.**//StreamCorruptedexception**

                while(!(o1 instanceof PlayerMove))
                {
                    o1=inFromClient1.readObject();//read move from client 1.
                }
                PlayerMove move1=(PlayerMove)o1;
                System.out.println("received move "+move1+" sending to "+client2.getNickname());
                outToClient2.writeObject(move1);
                System.out.println("listening to "+client2.getNickname());
                Object o2=inFromClient2.readObject();//read move from client 1.
                while(!(o2 instanceof PlayerMove))
                {   
                    o2=inFromClient2.readObject();//read move from client 1.
                }
                PlayerMove move2=(PlayerMove)o2;
                System.out.println("received move "+move2+" sending to "+client1.getNickname());
                outToClient1.writeObject(move2);
            }
                catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
} 
```

model.addClient 方法虽然我认为问题不在这里

```
 public void addClient(String nickname, Socket       clientSocket,ObjectOutputStream stream,ObjectInputStream inStream)
{
    clients.addClient(nickname, clientSocket,stream,inStream);//add to arraylist
//send client list to all clients
    String[] users=this.getAvailableClients();
    ObjectOutputStream[] streams=clients.getOutStreams();
    for(int i=0;i<streams.length;i++)
    {
        try {
            streams[i].writeObject(users);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

将对象发送到服务器的客户端代理，方法由 GUI 中的用户操作触发

```
 public class Proxy {
final int PORT = 1337;
String host;
String nickname;
private Socket clientSocket;
private ObjectOutputStream outToServer;
private ObjectInputStream inFromServer;
private ClientModelManager manager;
public Proxy(String nickname,String host,ClientModelManager manager)
{
    this.nickname=nickname;
    this.host=host;
    this.manager=manager;
    this.connect(nickname);
}
public void connect(String nick)
{
    Socket clientSocket;
    try {
        clientSocket = new Socket(host, PORT);
        System.out.println("client socket created");
        outToServer = new ObjectOutputStream(clientSocket.getOutputStream());
        inFromServer=new ObjectInputStream(clientSocket.getInputStream());
        outToServer.flush();
        outToServer.writeObject(nick);
        ClientReceiverThread t=new ClientReceiverThread(inFromServer,manager);
        t.start();
    } catch (Exception e) {
        e.printStackTrace();
    } 
}
public void makeRequest(String user)
{
    try
    {
    outToServer.writeObject(new RequestForGame(user));
    }
    catch(IOException e)
    {
        e.printStackTrace();
    }
}
public void quit()
{
    try {
        outToServer.writeObject(new String("i want to quit"));
        //clientSocket.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}
public void sendMove(PlayerMove move)
{
    try {
        outToServer.writeObject(move);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T23:20:00.563

如果您可能会发生此问题

*   构造一个新的`ObjectInputStream`或`ObjectOutputStream`在同一个套接字上，而不是在套接字的生命周期内使用相同的套接字；
*   在同一个套接字上使用另一种流；或者，
*   使用对象流来读取或写入不是对象的东西，你就会失去同步。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T04:14:53.750

如果读取序列化对象的 JVM 没有该对象的正确类/jar 文件，也会发生这种情况。这通常会导致 a `ClassNotFoundException`，但如果您有不同的 jar/class 版本并且`serialVersionUID`版本之间没有更改，`StreamCorruptedException`则会产生 a 。（如果存在类名冲突，也可能出现此异常。例如：一个 jar 包含具有相同完整类名的不同类，尽管它们可能也需要相同`serilVersionUID`）。

检查客户端是否有正确版本的 jar 和类文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-21T01:47:36.027

如果您通过添加此方法为类实现自定义反序列化例程，我遇到了另一种可能性：

```
private void readObject( ObjectInputStream objectInputStream ) throws IOException 
```

然后 objectInputStream.defaultReadObject() 必须在进一步读取输入流之前调用并调用以正确初始化对象。

我错过了这一点，尽管对象返回时没有抛出异常，但下一次读取对象流时会令人困惑地引发无效类型代码异常。

此链接提供有关该过程的更多信息：http: [//osdir.com/ml/java.sun.jini/2003-10/msg00204.html](http://osdir.com/ml/java.sun.jini/2003-10/msg00204.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-07T13:57:20.337

我也有这个例外。发生这种情况是因为我为 Server 类和 Client 类使用了两个线程。我使用一个线程来发送和接收对象。然后就没事了。如果您不熟悉，这是解决问题的简单方法`synchronized`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-10T12:04:53.657

如果`ObjectInputStream`只构造一次，然后只是将它的引用传递给另一个线程，然后只需将这个对象的访问权限封闭在`synchronized`块内，以确保一次只有一个线程可以访问这个对象。

每当您读取时，如果它在多个线程之间共享，则`ObjectInputStream`只需在块内访问它。`synchronized`

* * *

示例代码：（对所有出现的 执行此操作`readObject()`）

```
...
String nickname = null;
synchronized (inFromClient) {
    nickname = (String) inFromClient.readObject();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-15T02:27:57.110

> java.io.StreamCorruptedException：无效类型代码：00

我最近遇到了这个问题，但没有做 OP 所做的事情。做了一个快速的谷歌搜索，并没有找到任何太有帮助的东西，因为我认为我解决了它，所以我正在对我的解决方案发表评论。

TLDR：不要让多个线程同时写入同一个输出流（而是轮流）。当客户端尝试读取数据时会导致问题。解决方案是锁定写入输出。

我正在做与 OP 非常相似的事情，制作多人（客户端-服务器模型）游戏。我有一个像 OP 这样的线程正在监听流量。发生的事情是，在我的服务器端，服务器有多个线程同时写入客户端的流（不认为这是可能的，游戏是半回合制的）。正在读取传入流量的客户端线程正在引发此异常。为了解决这个问题，我基本上在写入客户端流（在服务器端）的部分上加了一个锁，这样服务器端的每个线程都必须在写入流之前获得锁。

# java - 自动生成的 WSDL 中缺少字段

> ID：10775724
> 
> 赞同：0
> 
> 时间：2012-05-27T16:59:57.130
> 
> 标签：java, web-services, wsdl

我在 Eclipse 中为 Java EE 开发人员编写了一个 java 类，并使用 web 服务向导将其作为 web 服务提供。

我正在尝试从 java 客户端调用其中的方法，因此我需要肥皂操作和命名空间，但找不到我的方法的 SOAP 操作。名称空间设置为默认名称空间。SOAP 操作 URL 应该是什么？如果我手动设置它们，Eclipse 中的客户端测试就会顺利进行。

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions targetNamespace="http://DefaultNamespace" xmlns:apachesoap="http://xml.apache.org/xml-soap" xmlns:impl="http://DefaultNamespace" xmlns:intf="http://DefaultNamespace" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<!--WSDL created by Apache Axis version: 1.4
Built on Apr 22, 2006 (06:55:48 PDT)-->
 <wsdl:types>
  <schema elementFormDefault="qualified" targetNamespace="http://DefaultNamespace" xmlns="http://www.w3.org/2001/XMLSchema">
   <element name="login">
    <complexType>
     <sequence>
      <element name="email" type="xsd:string"/>
      <element name="passwd" type="xsd:string"/>
     </sequence>
    </complexType>
   </element>
   <element name="loginResponse">
    <complexType>
     <sequence>
      <element name="loginReturn" type="xsd:string"/>
     </sequence>
    </complexType>
   </element>
   <element name="getCourses">
    <complexType/>
   </element>
   <element name="getCoursesResponse">
    <complexType>
     <sequence>
      <element name="getCoursesReturn" type="xsd:string"/>
     </sequence>
    </complexType>
   </element>
   <element name="getCourseMarks">
    <complexType>
     <sequence>
      <element name="courseID" type="xsd:int"/>
     </sequence>
    </complexType>
   </element>
   <element name="getCourseMarksResponse">
    <complexType>
     <sequence>
      <element name="getCourseMarksReturn" type="xsd:string"/>
     </sequence>
    </complexType>
   </element>
   <element name="getStudentMarks">
    <complexType>
     <sequence>
      <element name="id" type="xsd:int"/>
     </sequence>
    </complexType>
   </element>
   <element name="getStudentMarksResponse">
    <complexType>
     <sequence>
      <element name="getStudentMarksReturn" type="xsd:string"/>
     </sequence>
    </complexType>
   </element>
   <element name="listTopics">
    <complexType/>
   </element>
   <element name="listTopicsResponse">
    <complexType>
     <sequence>
      <element name="listTopicsReturn" type="xsd:string"/>
     </sequence>
    </complexType>
   </element>
   <element name="getTopicRegistrants">
    <complexType>
     <sequence>
      <element name="topicName" type="xsd:string"/>
     </sequence>
    </complexType>
   </element>
   <element name="getTopicRegistrantsResponse">
    <complexType>
     <sequence>
      <element name="getTopicRegistrantsReturn" type="xsd:string"/>
     </sequence>
    </complexType>
   </element>
  </schema>
 </wsdl:types>

   <wsdl:message name="getStudentMarksRequest">

      <wsdl:part element="impl:getStudentMarks" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="listTopicsResponse">

      <wsdl:part element="impl:listTopicsResponse" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="getCourseMarksRequest">

      <wsdl:part element="impl:getCourseMarks" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="getCourseMarksResponse">

      <wsdl:part element="impl:getCourseMarksResponse" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="getCoursesResponse">

      <wsdl:part element="impl:getCoursesResponse" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="getTopicRegistrantsResponse">

      <wsdl:part element="impl:getTopicRegistrantsResponse" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="getCoursesRequest">

      <wsdl:part element="impl:getCourses" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="getTopicRegistrantsRequest">

      <wsdl:part element="impl:getTopicRegistrants" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="listTopicsRequest">

      <wsdl:part element="impl:listTopics" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="getStudentMarksResponse">

      <wsdl:part element="impl:getStudentMarksResponse" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="loginRequest">

      <wsdl:part element="impl:login" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:message name="loginResponse">

      <wsdl:part element="impl:loginResponse" name="parameters">

      </wsdl:part>

   </wsdl:message>

   <wsdl:portType name="Services">

      <wsdl:operation name="login">

         <wsdl:input message="impl:loginRequest" name="loginRequest">

       </wsdl:input>

         <wsdl:output message="impl:loginResponse" name="loginResponse">

       </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="getCourses">

         <wsdl:input message="impl:getCoursesRequest" name="getCoursesRequest">

       </wsdl:input>

         <wsdl:output message="impl:getCoursesResponse" name="getCoursesResponse">

       </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="getCourseMarks">

         <wsdl:input message="impl:getCourseMarksRequest" name="getCourseMarksRequest">

       </wsdl:input>

         <wsdl:output message="impl:getCourseMarksResponse" name="getCourseMarksResponse">

       </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="getStudentMarks">

         <wsdl:input message="impl:getStudentMarksRequest" name="getStudentMarksRequest">

       </wsdl:input>

         <wsdl:output message="impl:getStudentMarksResponse" name="getStudentMarksResponse">

       </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="listTopics">

         <wsdl:input message="impl:listTopicsRequest" name="listTopicsRequest">

       </wsdl:input>

         <wsdl:output message="impl:listTopicsResponse" name="listTopicsResponse">

       </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="getTopicRegistrants">

         <wsdl:input message="impl:getTopicRegistrantsRequest" name="getTopicRegistrantsRequest">

       </wsdl:input>

         <wsdl:output message="impl:getTopicRegistrantsResponse" name="getTopicRegistrantsResponse">

       </wsdl:output>

      </wsdl:operation>

   </wsdl:portType>

   <wsdl:binding name="ServicesSoapBinding" type="impl:Services">

      <wsdlsoap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>

      <wsdl:operation name="login">

         <wsdlsoap:operation soapAction=""/>

         <wsdl:input name="loginRequest">

            <wsdlsoap:body use="literal"/>

         </wsdl:input>

         <wsdl:output name="loginResponse">

            <wsdlsoap:body use="literal"/>

         </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="getCourses">

         <wsdlsoap:operation soapAction=""/>

         <wsdl:input name="getCoursesRequest">

            <wsdlsoap:body use="literal"/>

         </wsdl:input>

         <wsdl:output name="getCoursesResponse">

            <wsdlsoap:body use="literal"/>

         </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="getCourseMarks">

         <wsdlsoap:operation soapAction=""/>

         <wsdl:input name="getCourseMarksRequest">

            <wsdlsoap:body use="literal"/>

         </wsdl:input>

         <wsdl:output name="getCourseMarksResponse">

            <wsdlsoap:body use="literal"/>

         </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="getStudentMarks">

         <wsdlsoap:operation soapAction=""/>

         <wsdl:input name="getStudentMarksRequest">

            <wsdlsoap:body use="literal"/>

         </wsdl:input>

         <wsdl:output name="getStudentMarksResponse">

            <wsdlsoap:body use="literal"/>

         </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="listTopics">

         <wsdlsoap:operation soapAction=""/>

         <wsdl:input name="listTopicsRequest">

            <wsdlsoap:body use="literal"/>

         </wsdl:input>

         <wsdl:output name="listTopicsResponse">

            <wsdlsoap:body use="literal"/>

         </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="getTopicRegistrants">

         <wsdlsoap:operation soapAction=""/>

         <wsdl:input name="getTopicRegistrantsRequest">

            <wsdlsoap:body use="literal"/>

         </wsdl:input>

         <wsdl:output name="getTopicRegistrantsResponse">

            <wsdlsoap:body use="literal"/>

         </wsdl:output>

      </wsdl:operation>

   </wsdl:binding>

   <wsdl:service name="ServicesService">

      <wsdl:port binding="impl:ServicesSoapBinding" name="Services">

         <wsdlsoap:address location="http://localhost:8080/semisterproject/services/Services"/>

      </wsdl:port>

   </wsdl:service>

</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:02:42.420

调用 Web 服务不一定需要soap 动作……它取决于操作选择算法的实现（例如，可以使用请求主体的构成）。但是，如果生成的 Eclipse 代码使用注释，您应该能够使用 @WebMethod 注释 'action' 属性为相关方法指定所需的肥皂动作，如 @WebMethod(action="MyAction")。您可以在此地址找到一些文档：[http ://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.wsfep.multiplatform.doc%2Finfo% 2Fae%2Fae%2Frwbs_jaxwsannotations.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.wsfep.multiplatform.doc%2Finfo%2Fae%2Fae%2Frwbs_jaxwsannotations.html) 如果这没有帮助，请发布相关代码以提供额外的上下文。

# php - mysql php安全

> ID：10775729
> 
> 赞同：1
> 
> 时间：2012-05-27T17:00:38.270
> 
> 标签：php, mysql, security

在我的 php 页面上，在顶部我像这样连接到数据库

```
$db = mysql_connect("mysql.site.com","thedb", "pass"); 
mysql_select_db("dbase",$db); 
```

这安全吗？有人可以以某种方式扫描并查看我的代码，从而访问数据库吗？

## 更新

我问的原因是因为用户能够访问我的数据库，而且我很确定这不是通过 sql 注入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T17:05:02.707

如果您将此片段移动到文档根目录之外的包含文件会更好——这将防止人们阅读它，以防您的网络服务器以某种方式被错误配置并开始以纯文本形式提供 PHP 文件。尽管就其本身而言，它已经足够安全了——不太可能有人故意像这样错误地配置您的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T17:06:35.043

如果有人确实可以访问您的代码，那么是的，他们将能够读出密码。

您对此无能为力，但确保此代码是您的 Web 根目录上的目录会有所帮助。

（即，如果您从文件夹中为您的站点提供服务，请将其`/usr/htdocs/mysite`更改为`/usr/htdocs/mysite/public`，然后将您的包含放在 mysite 中而不是 public 中。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T17:27:54.240

您应该[始终应用多层防御](http://en.wikipedia.org/wiki/Defense_in_depth_(computing))：

1.  从源代码中删除凭据并将它们放在 Web 服务器的文档根目录之外。
2.  限制[对数据库的访问](http://dev.mysql.com/doc/refman/5.6/en/user-account-management.html)，可能只能通过*localhost*或通过套接字。
3.  [将用户的权限](http://dev.mysql.com/doc/refman/5.6/en/privilege-system.html)限制在必要的范围内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T17:08:19.537

没关系，我可以说的重要一点是，转到您的数据库并授予该用户受限权限，我的意思是只选择、插入、更新和删除它需要的表。除此之外，使用该信息创建一个文件，然后包括当你需要它，这是我的建议。

如果有人通过您的代码将能够看到该信息，但尽量减少损害影响

# php - 在 PHP 脚本中将 perl 脚本作为外部程序调用

> ID：10775733
> 
> 赞同：1
> 
> 时间：2012-05-27T17:01:24.140
> 
> 标签：php, perl

我想在 PHP 脚本中调用 perl 脚本作为外部程序，一旦 PHP 脚本完成运行，它应该将输出发送回 html 页面。我尝试使用 exec 命令来调用 perl 脚本，但它不起作用。请帮助这个简单的 perl 脚本，以便我可以尝试使用相同的脚本！

Perl 脚本：

```
#!/usr/bin/perl -s

$var1 = 'high';

print $var1; 
```

提前谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:09:46.023

通过 exec 调用的命令的输出将存储在您提供的输出参数中（因此它被指定为引用）要么打印出该数组的内容，要么改用 passthru() 函数

参考资料： [http ://www.php.net/manual/en/function.exec.php](http://www.php.net/manual/en/function.exec.php)

[http://www.php.net/manual/en/function.passthru.php](http://www.php.net/manual/en/function.passthru.php)

所以就

```
passthru('/usr/bin/perl yourscript.pl'); 
```

代替

```
exec('/usr/bin/perl yourscript.pl'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:08:08.730

我建议尝试

```
exec ('path_to_your_script') 
```

这适用于任何 shell 可执行文件或命令调用，只要您想从 PHP 脚本执行它。

# ios - 图形上下文的概念是否与文件句柄非常相似？（在 iOS 和其他系统上）

> ID：10775738
> 
> 赞同：1
> 
> 时间：2012-05-27T17:03:07.713
> 
> 标签：ios, windows, macos, opengl-es, graphicscontext

有时图形上下文这个术语有点抽象。它们实际上是系统资源，但它们是来自显卡的资源，就像文件句柄是来自硬盘驱动器或任何永久存储设备的系统资源一样？

正如文件句柄有一些关于文件句柄是只读还是读/写的状态，以及下一次读取操作的当前位置——状态，图形上下文有关于当前笔画颜色、笔画宽度、或任何相关数据。（**更新：**在写入模式下，我们可以转到 200MB 文件中的任何点并更改数据，就像我们拥有 Graphics Context 的画布并在其上绘制东西一样）

所以图形上下文实际上是全局的、系统范围的资源。它们不是应用程序单例或任何东西的一部分，就像文件或文件句柄不是（必然）应用程序单例的一部分一样。

如果没有强大的图形卡（或者如果图形卡已经耗尽资源），那么操作系统可以使用位图的低级图形例程模拟图形上下文，而不是让图形卡处理它。

这就是图形上下文在 iOS 和大多数其他常见操作系统上的实际工作方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T18:29:01.667

我认为最好不要根据特定的系统资源来考虑图形上下文。据我所知，图形上下文不再对应于任何特定资源，而不是任何类“对象”，当然除了内存。实际上，Graphics 上下文旨在为核心图形功能提供“画布”以进行操作。事实是，Apple 并没有向我们提供图形上下文如何在内部工作的具体细节。但是我们确实知道一些事情：

1.  图形上下文基本上是一种“状态”，而不是其他任何东西。它为一组特定的绘图例程保存诸如描边/填充颜色、线宽等信息。

2.  它不在 GPU 上处理。相反，它在 CPU 上处理（完成所有绘制）并将生成的图像（某种形式的位图）“传递”到 GPU 以进行显示/动画处理（实际上它将图像直接渲染到 GPU 的缓冲区）。这就是为什么 'renderInContext' 方法在新 iPad 3 中不能很好地工作的原因。 `renderInContext`首先为您提供图像，这涉及渲染和复制图像。如果您希望随后显示它，则必须将其传递回 Core Graphics，然后由 Core Graphics 将图像写回。在 iPad 3 上，这涉及大量内存（取决于视图的大小）并且很容易溢出缓冲区。

3.  为 UIView 的“drawRect”方法提供的图形上下文旨在提供尽可能高效的上下文。这就是为什么你不能在上下文之外的视图中绘制任何东西，也不能为要绘制的视图创建自己的上下文。实际的绘制是在运行循环中处理的，这就是为什么我们使用这种方法来标记一个需要绘制的 UIView: `[view setNeedsDisplay]`.

4.  UIViews 的图形上下文在主线程上绘制，是的，再次在 CPU 上处理。这确实意味着过于复杂的绘图可能会占用您的主要应用程序，但现在使用多核处理器已经不是什么大问题了。

5.  你可以创建一个图形上下文，但只能绘制到一个图像上。这与 UIView 上下文的作用完全相同，只是它是供您使用的，而不是绘制到屏幕上或动画。从 iOS 4 开始，您可以在其他线程（除了主线程）中处理这些图像上下文。

    如果您正在寻找进行 GPU 绘图，我相信这样做的唯一方法是在使用 iOS 时使用 OpenGL。如果您使用的是 MacOS，我认为您实际上可以使用 QuartzGL 在 GPU 上启用 Quartz（核心图形......同样的东西）绘图。但这可能不值得努力，看这篇文章：[Mac QuartzGL（显卡上的2D绘图）性能](http://cocoawithlove.com/2011/03/mac-quartzgl-2d-drawing-on-graphics.html)

**更新**

正如您在下面的评论中看到的，Apple 目前对 Quartz 绘图的安排可能是最好的，特别是因为视图直接绘制到 GPU 缓冲区。人们很容易认为处理*任何*视觉效果都应该在 GPU 上完成，但事实是，GPU 并不是为矢量图而设计的。它们旨在处理大量变换、照明、纹理映射等。通过使用 CPU 处理矢量绘图并将其他所有内容留给 GPU，Apple 已经适当地拆分了图形处理。此外，由于 Quartz 直接绘制到 GPU 的缓冲区（这避免了繁重的 memcpy），因此您不会在 CPU 和 GPU 之间的数据传输中失去任何效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T18:30:38.377

> 有时图形上下文这个术语有点抽象。

是的，*故意*的。Quartz 是一种抽象的通用绘图系统。它可能会或可能不会在内部对图形硬件进行一些优化，但您对此没有太多了解。它所做的优化类型可能会随着时间和不同类型的图形硬件而改变。

> 它们实际上是系统资源，但它们是来自显卡的资源

不，绝对不是。Quartz 是一种软件渲染器——即使在没有图形硬件存在的情况下也能工作，并且可以绘制到图形硬件没有任何用处的 PDF 之类的东西上。

在内部，Quartz（及其与操作系统其余部分的接口）可能有一些“快速路径”，在某些情况下可以利用 GPU。但这绝不是常见的情况。

> 正如文件句柄有一些关于文件句柄是只读还是读/写的状态，以及下一次读取操作的当前位置——这些状态，图形上下文有关于当前笔画颜色、笔画宽度、或任何相关数据。

这是对的。

> 所以图形上下文实际上是全局的、系统范围的资源。

不，Quartz 只是一个在您的应用程序中运行代码的库。如果您创建一个新的 CGContext，那么只有您的应用程序会受到影响——就像您的代码创建了您自己的类之一的新实例一样。

> 如果没有强大的图形卡（或者如果图形卡已经耗尽资源），那么操作系统可以使用位图的低级图形例程模拟图形上下文，而不是让图形卡处理它。

你把这两个案子颠倒了。一般来说，Quartz 在软件中工作，带有位图。在少数情况下，它可能会使用 GPU 更快地将这些位图显示在屏幕上，前提是一切都完全正确。

# mikroc - mikroC中两个微控制器之间的spi接口

> ID：10775740
> 
> 赞同：1
> 
> 时间：2012-05-27T17:03:22.627
> 
> 标签：mikroc

我正在 mikroC 中的两个 pic18F452 微控制器之间进行 spi 接口，但我的程序没有提供任何输出。我从主机发送数据，从机必须在 LCD 上显示。

这是我的主从代码：

主码：

```
 unsigned char key='a';

    void main(void)
    {

    TRISC.F2=0; //output for Slave select

    TRISC.F3=0; //SCK output

    TRISC.F4=1; //SDI input

    TRISC.F5=0; //SDO output

    Spi_Init_Advanced(Master_OSC_div64, Data_SAMPLE_MIDDLE, CLK_Idle_HIGH, HIGH_2_LOW);

    SSPCON1.SSPEN=1; //Synchronus serial port enable

    SSPSTAT.SMP=0;  //sampled at middle of data output time

    while(1)

   {

   PORTC.F2=0;

   SSPBUF=key;

   while(!SSPSTAT.bf);

   spi_write(key);

   }

   } 
```

///////结尾//////

奴隶代码：

```
 #define LCD PORTB

   unsigned char key;

   void main(void)

   {

   TRISB=0; //LCD output

   TRISC.F4=1; //SDI input

   TRISC.F3=1; //SCK input from master

   TRISC.F5=0; //SDO output

   TRISA.F5=1; //Slave select input from master 

   SSPSTAT.SMP=0; //input data sampled at middle

   SSPSTAT.CKE=0; // transition from idle to active

   SSPCON1.=0x22;

   Spi_Init_Advanced(SLAVE_SS_ENABLE, DATA_SAMPLE_MIDDLE, CLK_IDLE_LOW, LOW_2_HIGH);

   Lcd_init(&PORTB);

   Lcd_cmd(Lcd_clear);

   Lcd_cmd(Lcd_cursor_off);

   while(1)
   {
   if(SSPSTAT.BF)
         {
            key=spi_read(SSPBUF);

            }

   }
   } 
```

////////结尾///////

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T05:29:53.247

我不确定这部分

*lcd_init(&PORTB);*

lcd_cmd(lcd_clear);

*Lcd_cmd(Lcd_cursor_off);*

尝试像这样声明您的 lcd 端口。我使用端口 d

```
 //lcd
sbit LCD_RS at RD0_bit;
sbit LCD_RW at RD1_bit;
sbit LCD_EN at RD2_bit;
sbit LCD_D7 at RD7_bit;
sbit LCD_D6 at RD6_bit;
sbit LCD_D5 at RD5_bit;
sbit LCD_D4 at RD4_bit;
// Pin direction
sbit LCD_RS_Direction at TRISD0_bit;
sbit LCD_RW_Direction at TRISD1_bit;
sbit LCD_EN_Direction at TRISD2_bit;
sbit LCD_D7_Direction at TRISD7_bit;
sbit LCD_D6_Direction at TRISD6_bit;
sbit LCD_D5_Direction at TRISD5_bit;
sbit LCD_D4_Direction at TRISD4_bit; 
```

并用于初始化和清除

```
LCD_Init(); // Initialize LCD
DELAY_MS(100);
Lcd_Cmd(_LCD_CLEAR);                      // Clear display 
```

延迟部分有时可能会派上用场。

# c# - 嵌入式 IronPython 安全性

> ID：10775746
> 
> 赞同：6
> 
> 时间：2012-05-27T17:04:18.893
> 
> 标签：c#, security, embed, ironpython

我将 IronPython 嵌入到我的游戏引擎中，您可以在其中将脚本附加到对象。我不希望脚本能够随时访问 CLR，因为那样他们几乎可以做任何事情。

拥有随机脚本，尤其是从互联网下载的脚本，能够打开互联网连接、访问用户硬盘或修改内部游戏状态是一件非常糟糕的事情。

通常人们只会建议“使用单独的 AppDomain”。但是，除非我严重错误，否则跨 AppDomains 很慢。非常慢。对于游戏引擎来说太慢了。所以我正在寻找替代品。

我考虑过编译一个自定义版本的 IronPython，它会阻止您导入 clr 或任何命名空间，从而将其限制为标准库。

我宁愿选择的选项如下：

```
__builtins__.__import__ = None #Stops imports working
reload = None #Stops reloading working (specifically stops them reloading builtins
          #giving back an unbroken __import___! 
```

我在另一个堆栈溢出帖子中读到了这个。假设不是设置 __builtins_ *。*_ import__ 为无，我改为将其设置为允许您加载标准 API 的自定义函数。

问题是，使用上面概述的方法，脚本是否有任何方法能够访问 clr 模块、.net BCL 或其他任何可能做坏事的东西？还是我应该修改源？第三种选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:10:12.550

保证它的唯一方法是使用 AppDomain。我不知道性能受到什么影响；这取决于您的用例，因此您应该首先测量它以确保它实际上太慢了。

如果您只需要一个尽力而为的系统，并且脚本不需要导入任何东西，并且您从主机提供了它们需要的所有对象，那么您的方案应该是可以接受的。您还可以避免发布 Python 标准库，这将节省一些空间。

您需要检查其余的内置程序是否有任何可能与外界对话的内容；`open`, `file`, `input`, `raw_input`, 和`execfile`浮现在脑海中，但可能还有其他人。`exec`也可能是一个问题，因为它是一个关键字，如果那里有空缺，关闭它可能会比较棘手。永远不要低估一个坚定的攻击者的能力！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T14:31:24.237

我之前在应用程序中嵌入了 Iron Python，并分享了类似的安全问题。我为帮助降低风险所做的工作是为脚本运行时创建特殊对象，这些对象本质上是围绕我的核心对象的包装器，仅公开“安全”功能。

仅为脚本创建对象的另一个好处是，您可以使用帮助函数优化它们以进行脚本编写，从而使您的脚本更加简洁和整洁。

Appdomain 与否，没有什么可以阻止某人在他们的脚本中加载外部 .py 模块......这是您为灵活性付出的代价。

# c++ - VC++ 2010 不创建 C++ 项目

> ID：10775748
> 
> 赞同：0
> 
> 时间：2012-05-27T17:04:37.897
> 
> 标签：c++, visual-studio-2010, visual-c++

我有一个非常大的问题。Visual Studio 2010 不再创建 C++ 项目。当我单击创建一个新的 C++ 项目（无论是控制台还是 Win32）时，它会显示下一个对话框，该对话框应该允许我选择项目设置，但我无法在此对话框中执行任何操作（当我单击取消或完成时没有任何反应，我可以关闭此窗口），此外，此对话框不会像以前那样显示所有设置。
正在成功创建非 C++ 项目。
我已经安装了一个 VC++ express，但它也有同样的问题。类创建窗口也有这个问题。

我试图重新安装VS，但它没有效果。
我尝试从 VS 控制台 devenv.exe /setup 和 devenv.exe /InstallVSTemplates 启动
我试过[这个](https://stackoverflow.com/questions/10074803/visual-studio-2010-ultimate-cant-create-vc-projects-anymore)

这是项目创建对话框的截图（标签为俄语，但您可以在 VS 中打开此窗口以查看差异）![窗纱](../Images/f61b33a408a30aa683e9c830b8d62aa6.png)

**UPD：**翻译窗口： ![在此处输入图像描述](../Images/b624ac3ad213de749612c8e873cc570e.png)

**UPD：** Skype 主窗口有问题 - 它不显示任何内容。看来，问题出在IE中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:44:13.570

是的，这些向导页面使用 HTML 和 javascript，并由嵌入式 Web 浏览器显示。

你的 IE 安装搞砸了。

# python - 使用 Emacs 错误配置 w3m

> ID：10775755
> 
> 赞同：1
> 
> 时间：2012-05-27T17:05:59.743
> 
> 标签：python, emacs, w3m

我正在尝试通过 emacs 23 配置和使用 w3m。我的系统上有 w3m，并且已经下载并制作/安装了 emacs-w3m 1.4.4。但是，当我将 (require 'w3m-load) 放入我的 .emacs 文件时，它会在 emacs 启动时引发错误：

```
File error: Cannot open load file, w3m-load 
```

我不确定我做错了什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:15:51.470

好吧，我以为我已经尝试了所有方法，但结果却是一个非常尴尬的解决方案。我没有在我的 .emacs 文件中添加加载路径，所以它不知道在哪里可以找到 w3m-load。

```
(add-to-list 'load-path "PATH TO w3m") 
```

# c# - beginInvoke 有效，但不向变量写入值

> ID：10775757
> 
> 赞同：0
> 
> 时间：2012-05-27T17:06:14.440
> 
> 标签：c#, silverlight

我有一个线程函数。在这个函数内部，我尝试使用`HtmlPage.Window.Invoke`方法，`BeginInvoke`因为我不能直接在线程函数中使用它。但变量`settings`始终是“”。它显示消息框，因此 BeginInvoke 工作正常。但为什么它不向变量写入任何内容？

```
Thread.Sleep(15000);
if (!this.Dispatcher.CheckAccess())
        this.Dispatcher.BeginInvoke(new Action(() => MessageBox.Show("Try to reload data!")));
string obpath = "C:\\program files\\windows sidebar\\Gadgets\\res.txt";
            string path1 = "C:\\program files\\windows sidebar\\Gadgets\\settings.txt";
string settings = "";
if (!this.Dispatcher.CheckAccess())
        this.Dispatcher.BeginInvoke(new Action(() => settings = HtmlPage.Window.Invoke("ReadFile", new object[] { path1 }) as string)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:47:24.720

BeginInvoke 异步执行，这意味着它将操作排队到调度程序中并立即返回。如果需要结果，可以使用`Dispatcher.Invoke`.

您应该注意，使用`Invoke`被认为是一种不好的做法 - 除非绝对必要。您在等待同步的线程上浪费了大量时间。考虑重构您的代码，这样就不会发生这种情况（例如，将所有这些代码放在传递给的单个 Action 中`BeginInvoke`。）

**编辑**

在 Silverlight 中，不可能等待 Dispatcher 操作完成，因此您必须重构代码以不依赖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T17:47:36.240

BeginInvoke 安排异步执行的操作。因此，在将值分配给设置时，当前功能可能已经退出并且设置不再可见。如果要等到它完成，则需要使用 BeginInvoke 的返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T04:07:20.090

欢迎来到异步编程的世界，它将理智的逻辑变成看起来疯狂的意大利面条代码。

而不是这样做：

```
string settings = "";
if (!this.Dispatcher.CheckAccess())
  this.Dispatcher.BeginInvoke(new Action(() => 
    settings = HtmlPage.Window.Invoke("ReadFile", new object[] { path1 }) as string));
// use settings here... 
```

做这个

```
string settings = "";
if (!this.Dispatcher.CheckAccess())
  this.Dispatcher.BeginInvoke(new Action(() => {
    settings = HtmlPage.Window.Invoke("ReadFile", new object[] { path1 }) as string)
    // use settings here ...
  }
) else {
    settings = HtmlPage.Window.Invoke("ReadFile", new object[] { path1 }) as string)
    // use settings here ...
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T20:48:38.707

```
if (!this.Dispatcher.CheckAccess())
    this.Dispatcher.BeginInvoke(new Action(() => settings = HtmlPage.Window.Invoke("ReadFile", new object[] { path1 }) as string)); 
```

如果检查访问返回 true 会发生什么？在那种情况下你不执行任何代码，就是这样，你的 IF 语句非常奇怪。

另外，方法开头的 thread.sleep(15sec) 的目的是什么？

如果您真的想将局部变量分配给`settings`该执行的结果，您可以创建一个 ManualResetEvent，将其与委托一起传递以进行调度程序调用，并在分配完成后对其进行设置。然后在调用 beginInvoke() 之后，您等待事件触发，一旦触发，您的设置将被分配。

尽管我相信这一切都需要大的重构。

# c++ - 在 C++ 中将 int 转换为 char *

> ID：10775759
> 
> 赞同：0
> 
> 时间：2012-05-27T17:06:40.117
> 
> 标签：c++, char, int

我想转换`int`为`char *`

```
char str[10]=;
int i=567;

str=itoa(i, str, 10) 
```

这在 str 第三行给出了一个错误

`str must have a modifiable lvalue`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T17:11:42.600

```
char str[10]; 
int i=567; 
itoa(i, str, 10); 
```

# java - 防止 GridBagLayout 调整列的大小

> ID：10775764
> 
> 赞同：0
> 
> 时间：2012-05-27T17:07:28.667
> 
> 标签：java, swing, gridbaglayout

挥杆的另一个问题。如果其中一个更改大小，如何阻止 GridBagLayout 重新调整组件的间距？例如，我有几列，其中有一个带有文本“文本”的 JLabel。当我将其更改为“texttext”时，布局管理器会调整整个列的大小。我不希望它那样做。有什么办法可以预防吗？

例子：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;

public class ResizeIssue {

 static int value = 99;

 public static void main(String[] args) {

    JFrame frame = new JFrame();
    final JLabel valueLabel = new JLabel(String.valueOf(value));
    JButton decButton = new JButton("-");
    decButton.addActionListener(new java.awt.event.ActionListener() {

        @Override
        public void actionPerformed(ActionEvent ae) {
            valueLabel.setText(String.valueOf(--value));
        }
    });

    JButton incButton = new JButton("+");
    incButton.addActionListener(new java.awt.event.ActionListener() {

        @Override
        public void actionPerformed(ActionEvent ae) {
            valueLabel.setText(String.valueOf(++value));
        }
    });

  JPanel panel = new JPanel();
  panel.setLayout(new GridBagLayout());
  GridBagConstraints c = new GridBagConstraints();
  c.weightx = 1;
  c.gridx = 0;
  c.gridy = 0;
  panel.add(decButton, c);
  c.gridx = 1;
  panel.add(valueLabel, c);
  c.gridx = 2;
  panel.add(incButton, c);

  frame.add(panel);
  frame.pack();
  frame.setVisible(true);
  }
 } 
```

它在 9 -> 10 或任何时候文本更改宽度时可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:16:45.650

GridBagLayout 忽略最大宽度/高度。设置 JLabel 的最大大小并不容易。

但是，我认为您真正想要的是当 JLabel 中的文本更改时布局不会发生变化。

这可以通过使 JLabel 足够宽以容纳它需要显示的最大值来完成。例如：

```
 jLabel1.setFont(new Font("monospace", Font.PLAIN, 12));
    FontMetrics fm = jLabel1.getFontMetrics(jLabel1.getFont());
    int w = fm.stringWidth("0000");
    int h = fm.getHeight();
    Dimension size = new Dimension(w, h);
    jLabel1.setMinimumSize(size);
    jLabel1.setPreferredSize(size); 
```

**更新：**

要使标签文本居中，只需添加：

```
 jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T19:39:31.153

这可能有效：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class ResizeIssue2 {
  static int value = 99;
  public static void main(String[] args) {
    JFrame frame = new JFrame();
    final JLabel valueLabel = new JLabel(String.valueOf(value));
    JButton decButton = new JButton("-");
    decButton.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            valueLabel.setText(String.valueOf(--value));
        }
    });

    JButton incButton = new JButton("+");
    incButton.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            valueLabel.setText(String.valueOf(++value));
        }
    });

    JPanel panel = new JPanel();
    panel.setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();
    c.weightx = 1;
    c.gridx = 0;
    c.gridy = 0;
    panel.add(decButton, c);
    c.gridx = 1;
    panel.add(valueLabel, c);
    c.gridx = 2;
    panel.add(incButton, c);

    //*
    c.gridy = 1; 
    int w = 32; //incButton.getPreferredSize().width;
    for(c.gridx=0;c.gridx<3;c.gridx++) {
      panel.add(Box.createHorizontalStrut(w), c);
    }
    // */

    frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    frame.add(panel);
    frame.pack();
    frame.setVisible(true);
  }
} 
```

# python - 存储for循环迭代数据

> ID：10775767
> 
> 赞同：0
> 
> 时间：2012-05-27T17:07:45.250
> 
> 标签：python, storage, iteration

我在玩cgi（上传文件形式），

我将文件作为存储对象接收，并将其存储在（输入）变量中。

这是简单的迭代。

```
for file in input:
  filepath = ....
  filename, fileext = os.path.splitext(filepath)
  file_real_name = ....
  file_size = ....
  file_type = ...
  file_url = ....
  file_short_name = ...
  file_show_link = ....

  # etc 
```

如果它只有一个文件会很容易，但如果我有多个文件怎么办？

我怎样才能拥有另一个包含所有迭代信息的值

就像`uploaded_files` 我可以在哪里访问每个上传的文件以及上述迭代的所有信息？

我试图阅读文档，但我还不能理解一些迭代概念，抱歉:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:58:29.377

您想使用数据结构来保存数据。根据复杂性，您可能只想使用字典列表：

```
files = []
for file in input:
    files.append({
        "path": get_path(file),
        "name": get_name(file),
        "size": get_size(file),
        ...
    }) 
```

或者，如果您发现需要对数据执行大量操作，您可能需要创建自己的类并创建对象列表：

```
class SomeFile:
    def __init__(self, path, name, size, ...):
        self.path = path
        ...

    def do_something_with_file(self):
        ...

files = []
for file in input:
    files.append(SomeFile(get_path(file), get_name(file), get_size(file), ...)) 
```

请注意，您在此处遵循通过迭代迭代器来构建列表的模式。您可以使用[列表推导](https://www.youtube.com/watch?v=t85uBptTDYY)有效地做到这一点，例如：

```
[{"path": get_path(file), "name": get_name(file), ...} for file in input] 
```

另请注意，`file`and`input`是非常糟糕的变量名，因为它们会掩盖内置函数[`file()`](http://docs.python.org/library/functions.html#file)和[`input()`](http://docs.python.org/library/functions.html#input).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:22:02.513

```
results = []
for i in range(5):
    file_data = {}
    file_data['a'] = i
    file_data['b'] = i**2
    results.append(file_data)
print results 
```

# ruby-on-rails-3 - 如何使用 pg_search multisearch 制作一个带有结果链接的搜索结果页面？

> ID：10775771
> 
> 赞同：5
> 
> 时间：2012-05-27T17:08:15.160
> 
> 标签：ruby-on-rails-3, full-text-search, multiple-tables, pg-search

我终于弄清楚了如何实现 pg_search 的多搜索功能。但我无法制作一个可用的搜索结果页面，该页面显示指向包含搜索词的各种文章和常见问题解答的链接。这是使用 Rails 3.2.3 的非常基本的设置：

**楷模：**

我有一个 Articles 和一个 Faqs 模型，两者都具有“Title”和“Content”属性，并且两个模型中的这段代码：

```
include PgSearch
multisearchable :against => [:title, :content] 
```

**搜索表单查看代码：**

搜索表单将所有内容传递给称为“结果”的控制器。

```
<%= form_tag result_index_path, method: :get do %>
  <%= text_field_tag :query, params[:query] %>
  <%= submit_tag "GO", name: nil %>
<% end %> 
```

**结果控制器：**

```
class ResultController < ApplicationController
  def index
     @pg_search_documents = PgSearch.multisearch(params[:query])
  end
end 
```

我想创建一个搜索结果页面，显示找到的每个结果的标题，并带有返回该项目的链接。我想出了如何从@pg_search_documents 中提取“类”属性。我的想法是在结果页面上做这样的事情：

```
<ul>
<% @pg_search_documents.each do |pg_search_document| %>
  <li><%= link_to pg_search_document.searchable.title, "../#{pg_search_document.searchable.class}/#{pg_search_document.searchable.id}" %></li>
<% end %>
</ul> 
```

此代码产生的示例链接是：`http://localhost/Article/3`. 如果我能弄清楚如何将“pg_search_document.searchable.class”小写和复数，我就可以回家了。我尝试在模型和控制器中编写各种方法，并尝试编写帮助程序。但这就是我的 Rails 技能让我失望的地方。

有什么建议么？有谁知道实现这一点的更优雅的方式？非常感谢任何想法/建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T19:27:10.707

我做了类似的事情，只是使用

```
<%= link_to pg_search_document.searchable.title, pg_search_document.searchable %> 
```

让 Rails 动态创建关联记录的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T01:11:17.953

好吧，离开这个问题一段时间的效果真是太棒了。那，以及在基本 Ruby 上更持久的谷歌搜索。这是我想出的解决方案：

```
<ul>
  <% @pg_search_documents.each do |pg_search_document| %>
    <li><%= link_to pg_search_document.searchable.title, "../#{(pg_search_document.searchable.class).to_s.downcase!.pluralize}/#{pg_search_document.searchable.id}" %></li>
  <% end %>
</ul> 
```

不过，这对我来说似乎很丑陋。我仍然很想看到更精简和智能的东西。

# java - 调用二进制搜索方法的正确方法是什么

> ID：10775773
> 
> 赞同：0
> 
> 时间：2012-05-27T17:08:27.653
> 
> 标签：java, search, recursion, binary

假设我有一个 10 个整数的数组，并且我正在使用二进制搜索来查找一个数字，让我们以数字为例

1 2 3 4 5 6 7 8 9 10

我正在使用这种方法

```
static void binarySearch(int n, int[] a, int low, int high)
    {
        int mid = (high + low) / 2;
        if(low > high)
            System.out.println(n+" was not found after "+counter+" comparisons");
        else if(a[mid] == n)
        {
            counter++;
            System.out.println(n+" was found at position "+mid+" after "+counter+" comparisons");
        }            
        else if(a[mid] < n)
        {
            counter++;
            binarySearch(n, a, mid+1, high);
        }            
        else
        {
            counter++;
            binarySearch(n, a, low, mid-1);
        }            
    } 
```

调用方法 binarySearch(5, a, 0, a.lenght) 或 binarySearch(5, a, 0, a.lenght-1) 的正确方法是什么

我知道他们都会找到这个数字，但他们会在不同的索引处找到它；从而进行更多的比较

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:11:57.607

正确的方法是避免这种方法，并使用标准的[Arrays.binarySearch()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#binarySearch%28int%5B%5D,%20int,%20int,%20int%29)方法，该方法具有被记录的巨大优势，以及*返回*结果而不是在 System.out 上打印结果的另一个巨大优势（这使得它无用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T17:12:51.373

好吧，让我们做一些测试好吗？

首先，让我们搜索数组中的每个数字。我们得到：

`binarySearch(i, array, 0, array.length);`

```
1 was found at position 0 after 3 comparisons
2 was found at position 1 after 4 comparisons
3 was found at position 2 after 2 comparisons
4 was found at position 3 after 3 comparisons
5 was found at position 4 after 4 comparisons
6 was found at position 5 after 1 comparisons
7 was found at position 6 after 3 comparisons
8 was found at position 7 after 4 comparisons
9 was found at position 8 after 2 comparisons
10 was found at position 9 after 3 comparisons
Average: 2.9 comparisons 
```

`binarySearch(i, array, 0, array.length - 1);`

```
1 was found at position 0 after 3 comparisons
2 was found at position 1 after 2 comparisons
3 was found at position 2 after 3 comparisons
4 was found at position 3 after 4 comparisons
5 was found at position 4 after 1 comparisons
6 was found at position 5 after 3 comparisons
7 was found at position 6 after 4 comparisons
8 was found at position 7 after 2 comparisons
9 was found at position 8 after 3 comparisons
10 was found at position 9 after 4 comparisons
Average: 2.9 comparisons 
```

如您所见，确实会出现差异，但平均值保持不变。现在让我们测试更大的数字：

```
100000 items
binarySearch(i, array, 0, array.length);
Average: 15.68946 comparisons
binarySearch(i, array, 0, array.length - 1);
Average: 15.68946 comparisons

200000 items
binarySearch(i, array, 0, array.length);
Average: 16.689375 comparisons
binarySearch(i, array, 0, array.length - 1);
Average: 16.689375 comparisons

500000 items
binarySearch(i, array, 0, array.length);
Average: 17.951464 comparisons
binarySearch(i, array, 0, array.length - 1);
Average: 17.951464 comparisons 
```

因此，平均而言，它不会走任何一条路。为了约定，我建议使用独占上限版本：`binarySearch(i, array, 0, array.length);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T17:28:52.527

问题可以表述为：边界是右包含的**[low, high]**还是右排除的**[low, high)**？右排他形式具有由 Dijkstra“创立”的悠久计算机科学传统。在我看来，它也更优雅一些（a.length 而不是 a.length-1）。

但是在您的函数中，它是 [low, high], a.length-1，因为您看到 low > high（不是 low >= high）和（low，mid-1）（不是（low，mid））。

# css - 溢出 - 隐藏和浮动的左侧元素

> ID：10775779
> 
> 赞同：0
> 
> 时间：2012-05-27T17:09:15.747
> 
> 标签：css

我有一系列 div 作为父 div 中的列，它设置为溢出隐藏，但是当到达容器的右侧而不是溢出时，这些列会换行。

这是代码的基本版本。

```
.column{
width:200px;
float:left;
}
<div style="overflow:hidden">
<div class="column"></div>
<div class="column"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:13:12.377

您应该使用 inline-bock 而不是 float:left;

[http://jsfiddle.net/RgJk9/1/](http://jsfiddle.net/RgJk9/1/)

```
.container { width: 300px; overflow: scroll; white-space: nowrap; }

.column{
  background-color: red;
  width:200px;
  height: 200px;
  display: inline-block;
}​ 
```

使用 HTML：

```
<div class="container">
  <div class="column"></div>
  <div class="column"></div>
</div>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T17:13:57.450

尝试

```
div.column {
    white-space: nowrap;
    overflow-x: hidden;
    width: 200px;
} 
```

这将隐藏任何溢出，并强制文本不换行，将其全部保留在一行上。

对于较新的浏览器，CSS 支持`ellipsis`属性 for`text-overflow`添加漂亮的触感。

# php - 如何检查有多少自定义字段有一个 Wordpress 帖子？

> ID：10775781
> 
> 赞同：1
> 
> 时间：2012-05-27T17:09:26.497
> 
> 标签：php, wordpress, custom-fields

如何检查有多少自定义字段有帖子，我不想检索任何值，但我需要找出有多少自定义字段有帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:21:07.567

```
<?php
    // get only the keys as you only need the number
    $cfields = get_post_custom_keys($post_id);
    // num_cfields will store the number of custom fields
    $num_cfields = count($cfields);
?> 
```

还有[get_post_custom](http://codex.wordpress.org/Function_Reference/get_post_custom)和[get_post_custom_values](http://codex.wordpress.org/Function_Reference/get_post_custom_values)

# iphone - 什么是标签栏项目的类别

> ID：10775783
> 
> 赞同：1
> 
> 时间：2012-05-27T17:09:49.097
> 
> 标签：iphone

当我将元素从 xib 连接到头文件时。它给了我

```
@property (strong, nonatomic) IBOutlet UITabBarItem *contract;
@property (strong, nonatomic) IBOutlet UITabBarItem *history; 
```

但是，当我尝试打印出我的 tabBar 的子视图（UITabBar 的类型）时，我得到了 2 个 UITabBarButton。

我的问题是标签栏项目的类别是什么。它是 UITabBarItem 还是 UITabBarButton

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:15:05.710

首先：不建议您这样做。您不应该依赖 Apple 视图的私有子视图，因为它们可以随时更改。

要真正回答所提出的问题，这是因为`UITabBarItem`它实际上不是一个视图，所以永远不会出现在您的视图层次结构中。`UITabBar`可能在代码中某处发生的情况是，`UITabBarItem`迭代 s，并且系统为每个 s 创建一个新的 class 视图`UITabBarButton`，它是 的私有子类`UIControl`。

您永远不会`UITabBarButton`直接访问 a 。正如 BoltClock 在评论中指出的那样，您应该重新考虑您的设计，以便您不需要这样做。

# javascript - 函数等待返回直到 $.getJSON 完成

> ID：10775787
> 
> 赞同：27
> 
> 时间：2012-05-27T17:10:38.930
> 
> 标签：javascript, jquery, function

我正在编写一个函数，该函数必须使用 embed.ly API 从给定视频中获取缩略图信息，但是目前该函数甚至在从 API 获得 JSON 结果之前就返回了一个值。

我正在使用以下代码：

```
function getThumbnail(vUrl) {
    var thumbnail   = '';
    var title       = '';
    var caption     = '';
    var content     = '';

    $.when( $.getJSON("http://api.embed.ly/1/oembed?key=:key&url="+vurl) ).then(function(data){
        var thumbnail = data.thumbnail_url;
            console.log(thumbnail);

        return {
            thumbnail:thumbnail,
            vurl:vurl
        }
    });
} 
```

但是，当使用 Chrome Javascript 控制台时，我可以看到：

1.  该函数被调用
2.  返回未定义
3.  XHR 请求完成
4.  可变缩略图内容显示在控制台中

这显然是错误的顺序。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-27T17:21:54.587

# 更新的答案

`getJSON`返回一个承诺（一个只读的延迟），所以你可以听它。但是由于您需要一些后处理，因此您需要链接 a`then`以允许您更改解析的值。

```
// Now using `then`
function getThumbnail(vUrl){
  return $.getJSON("http://api.embed.ly/1/oembed?key=:key&url="+vurl).then(function(data){
    return {
      thumbnail:data.thumbnail_url,
      vurl:vurl
    }
  });
}

//and in your call will listen for the custom deferred's done
getThumbnail('the_vurl_').then(function(returndata){
  //received data!
}); 
```

* * *

# 原始答案

您可以使用[延迟对象](http://api.jquery.com/category/deferred-object/)，并监听[`done()`](http://api.jquery.com/deferred.done/).

```
function getThumbnail(vUrl) {
    //create our deferred object
    var def = $.Deferred();

    //get our JSON and listen for done
    $.getJSON("http://api.embed.ly/1/oembed?key=:key&url="+vurl)
        .done(function(data){

            //resolve the deferred, passing it our custom data
            def.resolve({
                thumbnail:data.thumbnail_url,
                vurl:vurl
            });
        });

    //return the deferred for listening
    return def;
}

//and in your call will listen for the custom deferred's done
getThumbnail('the_vurl_')
    .done(function(returndata){
        //received data!
    }); 
```

您可以 return `$.getJSON`'deferred 来获取原始数据。但是由于“后处理”到对象中，因此需要自定义 deferred。您还可以将回调传递给`getThumbnail()`：

```
function getThumbnail(vUrl,callback) {
    $.getJSON("http://api.embed.ly/1/oembed?key=:key&url="+vurl,function(returndata){
        callback(returndata);
    });
}

getThumbnail('the_vurl_',function(returndata){
    //received data!
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T17:16:54.150

你可以像下面这样简单地使用`$.getJSON`回调：

```
function result(res) {
  console.log(res);
}

function getThumbnail(vUrl) {
   var thumbnail   = '';
   var title       = '';
   var caption     = '';
   var content     = '';

   $.getJSON("http://api.embed.ly/1/oembed?key=:key&url="+vurl, function(data) {
     var thumbnail = data.thumbnail_url;
     console.log(thumbnail);

     var result = {
        thumbnail:thumbnail,
        vurl:vurl
      };

     // passing the result to a function
     getResult(result);

   });
} 
```

**笔记：**

您会看到我正在调用一个函数来传递结果，`return`但您无法将`return`结果传递给调用者函数。因为，`$.getJSON`是异步的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-02T01:55:27.727

使用异步/等待

```
async function getThumbnail(vUrl) {
  const data = await $.getJSON("http://api.embed.ly/1/oembed?key=:key&url="+vUrl);
  return {
      thumbnail:data.thumbnail_url,
      vurl:vUrl
    }
}

async function someFunction() {
    let thumbNail = await getThumbnail('the_vurl_');
} 
```

# c++ - 函数 sqlite3_open_v2 文件路径

> ID：10775791
> 
> 赞同：5
> 
> 时间：2012-05-27T17:11:02.970
> 
> 标签：c++, sqlite, qt

我对 sqlite3_open_v2 函数有疑问。操作系统是 Windows，在 Qt Creator 中开发。

`sqlite3_open("database.db", &db); // works fine`

但

`sqlite3_open_v2("database.db", &db, SQLITE_OPEN_READWRITE, ""); // don't work`

我很确定这不是 utf-8 编码问题，因为第一个函数工作正常，我试图更改项目属性中的编码。也许问题出在第一个 arg 中的文件路径。绝对路径也不起作用。

有人对使用此功能有任何想法和示例吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T21:36:02.887

感谢您的回答。

问题出在最后一个参数上。它必须是 0 或 NULL 而不是 ""

就这些了，还是谢谢

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T11:50:39.163

这可能是因为该文件在工作目录中不存在。在确定调用 sqlite3_open_v2 之前，我会添加一些代码来打印当前工作目录的路径。

sqlite3_open 和带有 SQLITE_OPEN_READWRITE 的 sqlite3_open_v2 之间的一个区别是，第一个将在找不到文件时创建一个空数据库，而第二个则不会。

为了允许使用 sqlite3_open_v2 创建数据库，您应该使用：

```
sqlite3_open_v2("database.db", &db, SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE, NULL ); 
```

请务必查看文档以获取更多信息： [http ://www.sqlite.org/c3ref/open.html](http://www.sqlite.org/c3ref/open.html)

# mysql - 休眠查询中的错误

> ID：10775792
> 
> 赞同：0
> 
> 时间：2012-05-27T17:11:03.950
> 
> 标签：mysql, hibernate

我的 hibernate.cfg.xml 是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD   3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<session-factory>
<property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
<property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
<property name="hibernate.connection.url">jdbc:mysql://localhost:3306/****</property>
<property name="hibernate.connection.username">***</property>
<property name="hibernate.connection.password">*****</property>

<property name="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactor    y</property>
<property name="connection.pool_size">1</property>
<property name="dialect">org.hibernate.dialect.MySQLDialect</property>
<property name="show_sql">false</property>
<property name="hbm2ddl.auto">create</property>
<!-- Enable Hibernate's automatic session context management -->
    <property name="current_session_context_class">thread</property>
<!-- JDBC connection pool (use the built-in) -->
    <property name="connection.pool_size">1</property>

<mapping class="entities.MisurazioneOraria"/>
<mapping class=....
    ....>
<listener type="post-insert" class="MisurazioneOrariaInsertListener"/>

</session-factory>

</hibernate-configuration> 
```

我尝试从作为侦听器的这一行代码进行查询：

```
ArrayList<MisurazioneOraria> mis =  (ArrayList<MisurazioneOraria>)    session.createQuery("from (misurazione_oraria) where sensore_idsensore = :idsensore").setParameter("idsensore", m.getSensore().getIdSensore()).list(); 
```

错误是：

```
mag 27, 2012 6:30:33 PM org.hibernate.event.def.AbstractFlushingEventListener   performExecutions
Grave: Could not synchronize database state with session
org.hibernate.QueryException: in expected: misurazione_oraria [from (misurazione_oraria) where sensore_idsensore = :idsensore] 
```

我的 mysql 版本是 5.5.23。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:25:10.263

您的实体类被命名`MisurazioneOraria`，而不是`misurazione_oraria`。HQL 使用实体和字段/属性。它不使用表名和列名。

阅读[HQL 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql)。

此外，`Query.list()`返回一个 List，不一定是 ArrayList。您不应该将查询结果转换为 ArrayList。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:31:10.727

将其更改为

```
List<MisurazioneOraria> mis = session.createQuery("from MisurazioneOraria where idSensore = :idsensore").setParameter("idsensore", m.getSensore().getIdSensore()).list(); 
```

# xpath - 在 Erlang 中使用 xmerl_xpath 定位谓词

> ID：10775795
> 
> 赞同：1
> 
> 时间：2012-05-27T17:11:44.050
> 
> 标签：xpath, erlang

我正在尝试使用[xmerl_xpath](http://www.erlang.org/doc/man/xmerl_xpath.html)在 Erlang 中查询已解析的 XML 文档，但我无法使位置谓词起作用。我没有返回第 n 个子元素，而是得到了迄今为​​止选择的所有内容的第 n 个元素。

示例代码，我想在其中提取值 11 和 21（“第一列”）：

```
{XML,_} = xmerl_scan:string(
    "<table>" ++
        "<row><el>11</el><el>12</el></row>" ++
        "<row><el>21</el><el>22</el></row>" ++
    "</table>" ).

4 = length(xmerl_xpath:string( "//table/row/el", XML )). % OK
1 = length(xmerl_xpath:string( "(//table/row/el)[1]", XML )). % OK
1 = length(xmerl_xpath:string( "//table/row/el[1]", XML )). % Why not 2? 
```

最后一次查询的结果是预期的吗？在一般情况下，使用 xmerl_path 提取第 n 个孩子的正确方法是什么？

（我真正想做的是使用 mochiweb_html 解析 HTML 并使用 mochiweb_xpath 查询它[，](https://github.com/retnuh/mochiweb_xpath)但后者本质上是 xmerl_xpath 的包装器。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:20:22.430

我不知道 Erlang，但第三个 XPath 确实应该提取第一列 - 两个节点`<el>11</el>`和`<el>21</el>`- 我创建了一个简单的测试 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="/">
    <root>
      <xsl:for-each select="//table/row/el[1]">
        <xsl:copy-of select="."/>
      </xsl:for-each>
    </root>
  </xsl:template>
</xsl:stylesheet> 
```

适用于

```
<table>
  <row>
    <el>11</el>
    <el>12</el>
  </row>
  <row>
    <el>21</el>
    <el>22</el>
  </row>
</table> 
```

产生：

```
<root>
  <el>11</el>
  <el>21</el>
</root> 
```

如果这不是你得到的，我怀疑你使用的库有问题。

# simperium - 添加一个无法运行的应用程序

> ID：10775796
> 
> 赞同：1
> 
> 时间：2012-05-27T17:11:56.603
> 
> 标签：simperium

当我转到添加应用程序按钮时，输入我的 Gmail 地址，没有任何反应，并且我没有收到带有应用程序密钥的电子邮件。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:25:33.890

创建 Simperium 帐户并登录后，您应该会在左侧栏上看到“添加应用程序”按钮。单击它会要求您输入应用程序名称。您的 API 密钥将显示在您的应用摘要页面上。我不记得收到有关创建应用程序的电子邮件。

如果您已经创建了您的应用程序并想要它的 API 密钥，您可以在左侧栏中选择它。

# iphone - SBJSON 解析器在第二次尝试时不起作用

> ID：10775800
> 
> 赞同：1
> 
> 时间：2012-05-27T17:12:31.030
> 
> 标签：iphone, objective-c, ios, parsing, sbjson

当我第一次调用 SBJsonParser 时，它工作正常，但在第二次尝试时，结果始终为空。数据格式与第一种完全相同。

这是代码：

```
 -(void)connectionDidFinishLoading:(NSURLConnection *)connection {
  // the connection finished loading all data, process...
  // Store incoming data into a string
NSString *jsonString = [[NSString alloc] initWithData:self.jsonData encoding:NSUTF8StringEncoding];

  NSLog(@"%@",jsonString);

 if ( jsonString != nil ) {

    // Create SBJSON object to parse JSON
    SBJsonParser *parser = [[SBJsonParser alloc] init];

    NSDictionary *results =
    [parser objectWithString:jsonString error:nil];

    NSLog(@"results: %@", results);

    if ( [[results objectForKey:@"postalCodes"] count] > 0 ) {

        // Build an array from the dictionary for easy access to each entry
        NSArray *postalCodes_array = [results objectForKey:@"postalCodes"];

        int index = 0;
        // Loop through each entry in the dictionary...
        for (NSDictionary *dict_item in postalCodes_array)
        {
            if ( index == 0 ) {
                appDelegate.curZip = [dict_item objectForKey:@"postalCode"];
                NSLog(@"New Zip: %@", appDelegate.curZip);
                break;
            }
        }
        postalCodes_array = nil;
        parser = nil;
      }
      results = nil;
    }
    jsonString = nil;
  } 
```

这是上面 NSLog 行的打印输出：

第一次尝试：

```
 2012-05-27 12:19:13.322[16525:707] {"postalCodes":     [{"adminName2":"Union","adminCode2":"039","distance":"0","adminCode1":"NJ","postalCode":"07201","countryCode":"US","lng":-74.2099,"placeName":"Elizabeth","lat":40.661369,"adminName1":"New Jersey"},{"distance":"0.28183","adminCode1":"NJ","postalCode":"07216","countryCode":"US","lng":-74.210939,"placeName":"Elizabeth","lat":40.663778,"adminName1":"New Jersey"},{"distance":"0.28183","adminCode1":"NJ","postalCode":"07215","countryCode":"US","lng":-74.210939,"placeName":"Elizabeth","lat":40.663778,"adminName1":"New Jersey"},{"adminName2":"Union","adminCode2":"039","distance":"1.12041","adminCode1":"NJ","postalCode":"07202","countryCode":"US","lng":-74.221544,"placeName":"Elizabeth","lat":40.65652,"adminName1":"New Jersey"},{"adminName2":"Union","adminCode2":"039","distance":"1.72655","adminCode1":"NJ","postalCode":"07206","countryCode":"US","lng":-74.192487,"placeName":"Elizabeth","lat":40.653207,"adminName1":"New Jersey"}]} 
```

第二次尝试：

```
 2012-05-28 20:16:16.727 [17151:707] {"postalCodes":[{"adminName2":"Kings","adminCode2":"047","distance":"0","adminCode1":"NY","postalCode":"11230","countryCode":"US","lng":-73.956528,"placeName":"Brooklyn","lat":40.618122,"adminName1":"New York"},{"adminName2":"Kings","adminCode2":"047","distance":"1.38292","adminCode1":"NY","postalCode":"11210","countryCode":"US","lng":-73.946682,"placeName":"Brooklyn","lat":40.628064,"adminName1":"New York"},{"adminName2":"Kings","adminCode2":"047","distance":"2.04126","adminCode1":"NY","postalCode":"11229","countryCode":"US","lng":-73.94749,"placeName":"Brooklyn","lat":40.601094,"adminName1":"New York"},{"adminName2":"Kings","adminCode2":"047","distance":"2.45579","adminCode1":"NY","postalCode":"11204","countryCode":"US","lng":-73.985623,"placeName":"Brooklyn","lat":40.617871,"adminName1":"New York"},{"adminName2":"Kings","adminCode2":"047","distance":"2.70498","adminCode1":"NY","postalCode":"11223","countryCode":"US","lng":-73.974291,"placeName":"Brooklyn","lat":40.597874,"adminName1":"New York"}]}{"postalCodes":[{"adminName2":"Richmond","adminCode2":"085","distance":"0","adminCode1":"NY","postalCode":"10306","countryCode":"US","lng":-74.141922,"placeName":"Staten Island","lat":40.564416,"adminName1":"New York"},{"adminName2":"Richmond","adminCode2":"085","distance":"0.41508","adminCode1":"NY","postalCode":"10313","countryCode":"US","lng":-74.146836,"placeName":"Staten Island","lat":40.564393,"adminName1":"New York"},{"adminName2":"Richmond","adminCode2":"085","distance":"1.66907","adminCode1":"NY","postalCode":"10308","countryCode":"US","lng":-74.152649,"placeName":"Staten Island","lat":40.55181,"adminName1":"New York"},{"adminName2":"Richmond","adminCode2":"085","distance":"3.76947","adminCode1":"NY","postalCode":"10312","countryCode":"US","lng":-74.179165,"placeName":"Staten Island","lat":40.545745,"adminName1":"New York"},{"adminName2":"Richmond","adminCode2":"085","distance":"4.41459","adminCode1":"NY","postalCode":"10314","countryCode":"US","lng":-74.147218,"placeName":"Staten Island","lat":40.603915,"adminName1":"New York"}]}

  2012-05-28 20:16:16.760 [17151:707]  error: Error Domain=org.brautaset.SBJsonParser.ErrorDomain Code=0 "Token 'start of object' not expected after outer-most array or object" UserInfo=0x176560 {NSLocalizedDescription=Token 'start of object' not expected after outer-most array or object}

  2012-05-28 20:16:16.761 [17151:707] results: (null) 
```

如您所见，我每次都在进行初始化。不知道为什么它不起作用。任何建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:52:39.800

在您的第二次尝试中，**JSON 无效**。这就是为什么它没有被解析。你可以在这里查看：http: [//jsonlint.com/](http://jsonlint.com/)

在 JSON 字符串的末尾，似乎插入了一些垃圾。如果您格式化字符串，您会在第 51-53 行发现问题。用逗号替换以下内容：

```
]
 }{
 "postalCodes": 
```

仔细观察，您似乎只对`placeName`== "Elizabeth" 感兴趣。最后，您有一个条目，其中`placeName`== "Fanwood"。因此，您可能只想**删除第 51-62 行**。

顺便说一句，您可以使用错误参数来检测解析器的问题。

```
NSError *error = nil;
NSDictionary *results = [parser objectWithString:jsonString error:&error];

if (error) {
    // we have a problem
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:21:39.297

为什么在您的第二个 json 字符串中出现意外的数组大括号？

```
"placeName":"Elizabeth","lat":40.653207,"adminName1":"New Jersey"}]}{"postalCodes":{"adminName2":"Union","adminCode2":"039","distance":"3.97758","adminCode1":"NJ","postalCode":"07023","countryCode":"US","lng":-74.386762,"placeName":"Fanwood","lat":40.641856,"adminName1":"New Jersey"}]} . 
```

它不是 init 的问题。它在你得到的 jsonstring 中有一个错误。

# ruby-on-rails - has_one 与 validates_presence_of 和最新 factory_girl 的关系

> ID：10775801
> 
> 赞同：0
> 
> 时间：2012-05-27T17:12:34.823
> 
> 标签：ruby-on-rails, rspec, factory-bot

我面临与[这里](https://stackoverflow.com/questions/3648699/factory-girl-has-one-relation-with-validates-presence-of)的问题相同的问题。帖子已经过时了。我想知道如何做同样的事情。我的工厂是：

```
FactoryGirl.define do
  factory :user do
    sequence(:email) {|n| "email#{n}@factory.com" }
    password "foobar"
    password_confirmation { |u| u.password }
    profile
  end
end 
```

但`FactoryGirl.create(:user)`由于用户为空白的配置文件模型中的验证错误而失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:23:33.493

我要做的是使用`after_create`. 这确保它只在创建用户后创建配置文件。

```
factory :user do
    sequence(:email) {|n| "email#{n}@factory.com" }
    password "foobar"
    password_confirmation { |u| u.password }
    after_create do |user|
      FactoryGirl.create(:profile, :user => user)
    end
  end 
```

之后可以打电话`Factory(:user)`。

# scala - 是否可以在不修改返回类型的情况下在收集期间打印值？

> ID：10775808
> 
> 赞同：3
> 
> 时间：2012-05-27T17:13:26.200
> 
> 标签：scala, scala-collections, scala-2.9

我有一个类似这样的代码段：

```
def test() : Seq[Int] = 
  List("A", "B", "C") collect {
    case "A" => 1
    case "B" => 2
    //case _ => println(_)
  } 
```

现在我想在输出上打印特定值（仅用于调试），而不向结果集合添加任何元素。如果我取消注释注释行，Scala 将表达式的值推断为`Seq[Any]`，这是完全可以理解的。

有人有任何提示如何做到这一点吗？提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T17:51:02.857

```
def skipped: Nothing = throw new Exception("Oops, not skipped after all!")

List("A", "B", "C") collect {
  case "A" => 1
  case "B" => 2
  case x if { println(x); false } => skipped
} 
```

* * *

```
object PrintSkip {
  def unapply(a: Any): Option[Any] = {
    println(a)
    None
  }
}

List(Some("A"), None, Some("C")) collect {
  case Some("A") => 1
  case None => 2
  case Some(PrintSkip(_)) => skipped
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-27T17:19:38.667

# `flatMap`

```
List("A", "B", "C") flatMap {
    case "A" => List(1)
    case "B" => List(2)
    case x => println(x); Nil
} 
```

# `collect`/`flatten`

```
List("A", "B", "C").collect {
    case "A" => Some(1)
    case "B" => Some(2)
    case x => println(x); None
}.flatten 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T17:42:46.527

使用 collect，无需将内容包装在 Option 中。

```
List("A", "B", "C").collect(new PartialFunction[String, Int] {
  def apply(s:String):Int = s match {
    case "A" => 1
    case "B" => 2
  }

  def isDefinedAt(s:String) = {
    try {
      apply(s)
      true
    } catch {
      case e:MatchError => { println(s); false }
    }

  }
}) 
```

# c# - 如何检查mysql表是否为空？

> ID：10775810
> 
> 赞同：4
> 
> 时间：2012-05-27T17:13:46.590
> 
> 标签：c#, mysql, sql, database

如何从 C# 检查我的表是否为空？

我有类似的东西：

```
public MySqlConnection con;
public MySqlCommand cmd;

 con = new MySqlConnection(GetConnectionString());
 con.Open();
 cmd = new MySqlCommand("SELECT * FROM data;", con); 
```

或者我不需要调用 SELECT 语句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T17:14:37.260

您可以`COUNT(*)`不使用`WHERE`close 并查看结果中是否存在多少行。

或者你可以做一个`SELECT (id) FROM tablename`with no`WHERE`子句，如果没有返回行，那么表是空的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-06T13:39:58.293

我会给你一个C#的例子祝你好运

```
public bool checkEmptyTable(){
        try
        {
            MySql.Data.MySqlClient.MySqlCommand com = new MySql.Data.MySqlClient.MySqlCommand();
            conn = new MySql.Data.MySqlClient.MySqlConnection("YOUR CONNECTION");
            com.Connection = conn;
            com.CommandText = "SELECT COUNT(*) from data";

            int result = int.Parse(com.ExecuteScalar().ToString());

            return result == 0; // if result equals zero, then the table is empty
        }
        finally
        {
            conn.Close();
        }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-14T10:44:21.250

如果“数据”可能是一个大表，你会更好（其中 pkdata 是你的主键字段）

```
SELECT COUNT(*) FROM data WHERE pkdata = (SELECT pkdata FROM data LIMIT 1); 
```

无论您在“数据”中有 0 行还是数百万行，这都会非常快速地运行。使用没有 WHERE 或 ORDER BY 的 SELECT 意味着它只会拉出可用的第一行，LIMIT 1 会阻止它超过 1。如果你的程序在六个月前运行得非常快，但现在像狗一样运行，那么可能需要寻找一些东西糖浆！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-27T17:18:58.473

```
SELECT COUNT(*) 
FROM table 
WHERE `col_name` IS NOT NULL 
```

# php - 构建一个类似于 iOS 版 Siri 的 PHP 应用程序

> ID：10775814
> 
> 赞同：-1
> 
> 时间：2012-05-27T17:14:08.293
> 
> 标签：php

**是否可以使用 PHP 构建一个自动响应每个表单提交的应用程序？**

像这样：

![例子](../Images/4806012687aafcf6222bc974a8dcf8f7.png)

因此，例如，如果表单提交是`$_POST['q'] = "hi"`，则输出将是“Hello..”

就像使用一个`case`语句：

```
for case $_POST['q'] = "how do you do?"
echo "fine";

for case $_POST['q'] = "what's your name ? "
echo "ABC" 
```

等等等等

***谁能帮我在 PHP 中构建一个类似的函数？***

我在想的是：对于表单提交，应该有来自数组的打印/回显，就像 iOS 上的 Siri 的工作方式一样......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:46:45.953

实现siri。该任务非常复杂，包括标记化、句子分割、词性标记、命名实体提取、分块、解析、共指解析和更多编程。
这些链接可能会对您有所帮助。
[ai 类](https://www.ai-class.com/course/topic/2)
[http://opennlp.apache.org/](http://opennlp.apache.org/)
[http://nlp.stanford.edu/software/](http://nlp.stanford.edu/software/)

# javascript - 单击除一个div以外的任何位置时如何使用jquery隐藏div？

> ID：10775815
> 
> 赞同：11
> 
> 时间：2012-05-27T17:14:26.590
> 
> 标签：javascript, jquery

我正在对焦点进行搜索输入，它显示一个带有以下选项的 div：

```
$("#search").focus(function(){

$("#options").fadeIn("fast");

}); 
```

我用这个功能隐藏了 div

```
 $("#search").blur(function(){

$("#options").fadeOut("fast");

}); 
```

现在的问题是即使用户点击`#option`它隐藏的任何复选框。单击复选框时如何阻止它隐藏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T17:22:38.160

```
 $("#search").blur(function(e){
   e.stopPropagation()
   $("#options").fadeOut("fast");
}); 
```

# python - 绘制 3 个相同大小的列表，带有单独的标签

> ID：10775817
> 
> 赞同：0
> 
> 时间：2012-05-27T17:14:27.757
> 
> 标签：python, matplotlib

这可能很简单，我提前道歉，我找不到我要找的东西:)

我有 6 个整数列表，长度都相同。我想在同一张图上用不同的颜色将它们相互绘制，每个图例中都有自己的名字。

基本上，我有

`my_lists = [list1, list2, list3, list4, list5, list6]`

其中每个列表只是整数。然后我有

`legend_names = ["line 1", "line 2", "line 3", "line 4", "line 5", "line 6"]`

如何将这两条信息都包含到 matplotlib 图中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:18:38.290

```
import matplotlib.pyplot as plt
import math

my_lists = [[i*math.exp(-x/10.) for x in range(10) ] for i in range(1,7)]
legend_names = ["line 1", "line 2", "line 3", "line 4", "line 5", "line 6"]
for ydata, name in zip(my_lists, legend_names):
    plt.plot(ydata, label = name)
plt.legend(loc = 'best')
plt.show() 
```

产量

![在此处输入图像描述](../Images/ae801a52d6f9f168ba484bfda8e06359.png)

# html - 您是否总是需要 HTML5 Boilerplate 或 HTML5 Reset？

> ID：10775823
> 
> 赞同：0
> 
> 时间：2012-05-27T17:15:48.383
> 
> 标签：html

大多数 HTML5 教程都没有提到需要“重置”HTML5 以实现浏览器兼容性，它们基本上只是教授诸如此类的新元素`header` `footer`……然后是[http://html5boilerplate.com/](http://html5boilerplate.com/)和[http://html5reset 之类的东西。 org/](http://html5reset.org/)似乎提倡最大的浏览器兼容性。

我的问题是，如果我们计划制作 HTML5 网站，我们是否总是需要这些？这是一个先决条件还是没有它我们会很好？

我问是因为 HTML5 样板似乎添加了很多代码，包括几个`if`语句、modernizr、jquery，甚至 Google Analytics 等，作为默认包的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:17:22.923

> 是不是先决条件

不，不是。如果您不使用其中任何一个，互联网警察将不会追捕您。

但是，如果您开发的网站可以在多个浏览器和较旧的浏览器中启动，那么拥有这些是一个好主意。

# macos - 是否可以仅在 Cocoa 中的 mouseup（mouserelease）上调用操作？

> ID：10775828
> 
> 赞同：0
> 
> 时间：2012-05-27T17:16:25.310
> 
> 标签：macos, cocoa, mouseup

我有一个`NSButton`和一个`action`关联的`Button`。我想`action`只在 mouseup (mouserelease) 上调用该方法。这可能吗？如果有可能怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:57:59.817

单击是 mouseDown 后跟 mouseUp，因此在 mouseUp 之前不会调用正常的操作方法，所以我不知道您还想要什么其他行为。

# windows-phone-7 - 如何在没有返回的情况下退出 Windows Phone 应用程序

> ID：10775830
> 
> 赞同：0
> 
> 时间：2012-05-27T17:16:44.763
> 
> 标签：windows-phone-7, exit

> **可能重复：**
> [以编程方式关闭 WP7 应用程序？](https://stackoverflow.com/questions/4338589/close-a-wp7-application-programatically)

我想向我的用户展示他需要 Internet 连接才能使用 MessageBox 的应用程序。当他单击确定时，我喜欢在不使用 BackButton 的情况下退出应用程序 这是代码

```
try
        {
            response = (HttpWebResponse)request.EndGetResponse(asyncResult);
        }
        catch (Exception e)
        {

            System.Windows.Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                MessageBoxResult m = MessageBox.Show("Потребна е Интернет конекција");
               if (m == MessageBoxResult.OK)
               {
                   while (NavigationService.BackStack.Any())
                      NavigationService.RemoveBackEntry();
                    //base.OnBackKeyPress(new System.ComponentModel.CancelEventArgs());
                   NavigationService.GoBack();
                }

            });

        } 
```

但是，该应用程序没有退出它正在尝试连接到 Web 服务

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:18:12.700

正如@willmel 所提到的，您的用户体验与Windows Phone 不一致。[Microsoft 的 Peter Torr 有一篇很棒的博客文章](http://blogs.msdn.com/b/ptorr/archive/2010/08/01/exiting-a-windows-phone-application.aspx "Peter Torr：退出 Windows Phone 应用程序")，虽然有点老，但关于为什么这是一个坏主意（从用户体验的角度来看）以及如何设计你的界面以便不必以编程方式退出应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:09:46.800

应用程序不能以编程方式关闭，也不会通过认证。您需要重新考虑您的用户体验。

例如，您可以提示相同的消息，并禁用应用程序的所有控件，以便用户通过后退按钮自行离开应用程序。

此外，keep in `MessageBoxResult.None`，这是按下硬件后退按钮关闭对话框的结果。（看起来您并没有在代码中处理它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T20:23:05.937

我不建议您依靠捕获错误来执行您正在尝试执行的操作。你会有很多误报。手机有一个 API 来确定网络是否可用。在您的 MainPage.xaml.cs 中执行以下操作：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    base.OnNavigatedTo(e);

    if (DeviceNetworkInformation.IsNetworkAvailable == false)
    {
        MessageBox.Show("No network! Try again later.");
    }
    else
    {
        // Logic that would happen if they had connection, maybe you show controls 
        // here that might not be displayed w/o a connection
    }
} 
```

# php - 如何使用 PHP 自动为文本创建标签？

> ID：10775836
> 
> 赞同：0
> 
> 时间：2012-05-27T17:18:33.233
> 
> 标签：php, bots

我想自动为我的内容创建标签。会有一个常量标签列表，机器人应该创建关于它的标签。我怎样才能做到这一点？你知道这方面的课程吗？任何建议，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:14:09.750

你需要标签有多好？

您可以简单地**计算 n-gram 词频**。例如，通过一些调整，这可以创建完全有效的标签以用于博客文章。

如果您正在寻找更高级的东西，并且您有一个文档语料库，您可以使用**TF*IDF**（词频，逆文档频率）。这将显示 1 个文档中提到的有意义的关键字，基于它们出现在其他文档中的可能性。如果您的语料库足够大，它将为您提供良好的结果。

一种快捷的方法可能是**识别**内容的相关部分（标题？类别？来源？）并使用类似的东西。

此外， [**Yahoo 有一个术语提取 API**](http://developer.yahoo.com/search/content/V1/termExtraction.html)，您可能会觉得它很有趣。

# asp.net - 如何从另一台计算机（同一路由器）运行 ASP.NET 应用程序

> ID：10775839
> 
> 赞同：0
> 
> 时间：2012-05-27T17:18:48.270
> 
> 标签：asp.net

我有一个 asp.net Web 应用程序，我想从我的另一台计算机测试该站点（连接到与我相同的路由器）。我试图从 localhost:7927 （我的网络正在运行的端口）访问它，但无法连接。为了将我的网站与其他电脑连接起来，我需要做什么？让我知道是否有任何无法理解的地方。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:23:33.080

`localhost:7927`你从哪*台*电脑上试过？

如果应用程序在计算机 A 上运行，则计算机 A 可以使用`localhost:7927`. 那是因为它在本地主机上运行。

但是计算机 B 需要使用计算机 A 的访问权限。如果您尝试`localhost`在计算机 B 上使用，它会在计算机 B 上查找应用程序。

您需要确定计算机 A 的 IP 地址。例如，如果该地址是，`192.168.0.2`则计算机 B 将访问位于 的应用程序`192.168.0.2:7927`。

`localhost`是当前本地计算机 IP 地址的别名。它不适用于不同的计算机。一台计算机可以访问它自己的本地 IP 地址，但使用`localhost`别名通常更容易。

由于其他原因，计算机 B 也*可能*无法访问计算机 A 上的应用程序。例如，如果其中一个正在运行阻止访问的防火墙。如果是这种情况，您将不得不最终调查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:23:57.403

你需要写你的IP地址而不是localhost。

例子：

> http://192.168.1.100:7927

如果您不知道您的 IP 地址：在命令提示符下，输入 ipconfig，您将看到那里。

# cuda - cudaLaunch 在调试器中返回 0x9

> ID：10775842
> 
> 赞同：1
> 
> 时间：2012-05-27T17:19:26.163
> 
> 标签：cuda

我有一些非常简单的代码来近似均匀 3D 网格上的偏导数。我在科学 linux 上运行，当我使用 nvcc 编译时，我没有收到任何错误或警告。我检查`cudaSuccess`每个人的回报`cudaMalloc()`并`cudaMemcpy()`打电话，确实一切正常。

当我在没有调试器的情况下运行程序时，一切似乎都运行良好，只是内核似乎并没有真正执行。我为输出分配的数组（初始化为全零）在内核启动后仍然全为零，即使我做了一些愚蠢的事情，比如让每个线程将数组的索引设置为 5。

因此，当我尝试在此代码上使用 cuda-gdb 时，它说`cudaLaunch()`返回 0x9。我不确定错误 9 是什么，并且无法通过谷歌搜索快速找到它。那么在我写出代码之前，哪个错误是数字 9？是否有数字如何与某处的特定错误匹配的列表？

是否有错误编号如何映射到特定错误的在线列表？

我没有这台机器上的代码，但它是这样的：

```
dim3 dimGrid(1,1,1);
dim3 dimBlock(mx,my,mz);
x_derivative<<<dimGrid,dimBlock>>>(f_d,df_d); 
```

哪里（目前）`mx=my=mz=64`。

也许 64^3 的线程数太大了？显然，GPU 上的实际线程并不多（它是 Tesla C2050 fwiw），但我想我可以指定任意数量的线程？还值得注意的是，这是算法的“幼稚”版本，所以我不打算优化性能（还）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:33:33.777

每个块的最大线程数为 512 或 1024，具体取决于您的设备。所以是的，64^3 确实太大了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:40:30.873

仅供参考，如果您在发布后检查错误代码，您会节省很多时间。由于您在启动后没有同步，因此如果您检查内核启动的结果，它将只为您提供内核启动的结果，而不是完整的内核执行本身。

# iphone - 在 iOS 上，为什么我们必须使用现有的 Graphics Context 创建图层？

> ID：10775843
> 
> 赞同：0
> 
> 时间：2012-05-27T17:19:30.997
> 
> 标签：iphone, ios, ipad, cglayer, graphicscontext

> **可能重复：**
> [在 iOS 上，在我们从上下文创建层并获取层的上下文之后，这些上下文如何相互关联？](https://stackoverflow.com/questions/10672691/on-ios-after-we-create-a-layer-from-context-and-get-the-layers-context-how-do)

在 iOS 上，我们可以`CGLayerCreateWithContext`使用现有的 Graphics Context 来做 a ，我们会得到 a `CGLayer`，我们也可以使用`CGLayerGetContext`.

为什么我们必须`CGLayer`使用现有的图形上下文来创建它？我们不能在没有任何图形上下文的情况下创建它吗？而当我们拿到这一层的Graphics Context时，它和原来的Graphics Context有什么关系呢？它们不能只是两个独立的、独立的图形上下文吗？

# c++ - 像迭代器一样编写 STL

> ID：10775847
> 
> 赞同：4
> 
> 时间：2012-05-27T17:20:08.173
> 
> 标签：c++, data-structures, stl, iterator, operators

我试图学习编写类似迭代器的 stl，为此我编写了一个简单的循环数组并在其中添加了一个迭代器。请查看代码底部以查看问题。

```
template<typename T, int N>
class RingQueue{
    T * _marray;
    int _mbegin;
    int _msize;
public:
    RingQueue(){
        _marray = new T[N];
        _mbegin = 0;
        _msize= 0;
    }   
    void push_back(const T& val){
        if(_msize!=N){
            _marray[(_mbegin+_msize)%N] = val;
            _msize++;
        }
        else
            throw "Queue Full";
    }   
    T pop_front(){
        if(_msize!=0){
            T&val = _marray[_mbegin];
            _mbegin = (_mbegin+1)%N;
            _msize--;
            return val;
        }
        else
            throw "Queue Empty";
    }

    class iterator{
        RingQueue<T,N>* _container;
        int _idx;
        public:
        iterator(RingQueue<T,N>* container,int idx):_container(container){
            _idx = idx;
        }

        bool operator==(iterator &rhs){
            return (this->_container==rhs._container && this->_idx == rhs._idx);
        }
        bool operator!=(iterator &rhs){
            return !(*this==rhs);
        }   
        T operator*(){
            if(_container->_msize>0&&_idx<_container->_msize){
                return _container->_marray[(_container->_mbegin+_idx)%N];
            }
        }

        iterator& operator++(){
            if(_container->_msize ==0){
                *this = _container->end();
                return *this;
            }
            if(_idx==_container->_msize){   
                *this = _container->end();
                return *this;
            }
            _idx++;
            return *this;
        }
    };
    iterator begin(){
        return iterator(this,0);
    }
    iterator end(){
        return iterator(this,_msize);
    }
};
int current=0;
int gen(){
    return current++;
}

int curr_op=0;
int operation(){
    return 2*(curr_op++&1)-1;
}
int main(){
    RingQueue<int,10> ring;
    vector<int> v(9),op(9);
    generate(v.begin(),v.end(),gen);
    random_shuffle(v.begin(),v.end());
    copy(v.begin(),v.end(),ostream_iterator<int>(cout," "));    
    cout<<endl;

    generate(op.begin(),op.end(),operation);        
    random_shuffle(op.begin(),op.end());
    // copy(op.begin(),op.end(),ostream_iterator<int>(cout," "));   
    cout<<endl;

    for(vector<int>::iterator itv  = v.begin();itv!=v.end();itv++){
        try{
            ring.push_back(*itv);   
        }catch(const char * e){
            cout<<*itv<<e<<endl;
        }
    }
    //works
    RingQueue<int,10>::iterator ite = ring.end();
    for(RingQueue<int,10>::iterator it = ring.begin(); it!=ite; ++it){
        cout<<*it<<endl;
    }
    // doesn't work 
    for(RingQueue<int,10>::iterator it = ring.begin(); it!=ring.end(); ++it){
        cout<<*it<<endl;
    }
    return 0;
} 
```

当我编译不起作用的部分时，g++ 转储以下错误

```
ringqueue.cpp: In function ‘int main()’:
ringqueue.cpp:112: error: no match for ‘operator!=’ in ‘it != ring.RingQueue<T, N>::end [with T = int, int N = 10]()’
ringqueue.cpp:48: note: candidates are: bool RingQueue<T, N>::iterator::operator!=(RingQueue<T, N>::iterator&) [with T = int, int N = 10] 
```

作品部分无缝编译，当编译时不工作部分。有人可以解释我怎么了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T17:27:58.343

我认为问题在于这些方面：

```
 bool operator==(iterator &rhs){
        return (this->_container==rhs._container && this->_idx == rhs._idx);
    }
    bool operator!=(iterator &rhs){
        return !(*this==rhs);
    } 
```

这里的问题是这些函数接受对其参数的左值引用。这意味着如果您尝试将右值（例如，从函数返回的临时对象）传递给这些运算符，您将收到编译时错误，因为引用无法绑定到临时对象。要解决此问题，请将参数更改为 const 引用：

```
 bool operator==(const iterator &rhs){
        return (this->_container==rhs._container && this->_idx == rhs._idx);
    }
    bool operator!=(const iterator &rhs){
        return !(*this==rhs);
    } 
```

由于 const 引用可以绑定到临时对象，或者让它们按值获取参数：

```
 bool operator==(iterator rhs){
        return (this->_container==rhs._container && this->_idx == rhs._idx);
    }
    bool operator!=(iterator rhs){
        return !(*this==rhs);
    } 
```

无论您做出何种选择，您都应该标记这些函数`const`，因为它们不会改变接收者对象。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:37:22.907

```
#include <vector>
#include <iostream>
#include <sstream>
#include <iterator>
using namespace std;

template<typename T, int N>
class RingQueue{
    T * _marray;
    int _mbegin;
    int _msize;
public:
    RingQueue(){
        _marray = new T[N];
        _mbegin = 0;
        _msize= 0;
    }   
    void push_back(const T& val){
        if(_msize!=N){
            _marray[(_mbegin+_msize)%N] = val;
            _msize++;
        }
        else
            throw "Queue Full";
    }   
    T pop_front(){
        if(_msize!=0){
            T&val = _marray[_mbegin];
            _mbegin = (_mbegin+1)%N;
            _msize--;
            return val;
        }
        else
            throw "Queue Empty";
    }

    class iterator{
        RingQueue<T,N>* _container;
        int _idx;
        public:
        iterator(RingQueue<T,N>* container,int idx):_container(container){
            _idx = idx;
        }

        bool operator==(iterator rhs){ // XXX do not pass it as a reference
            return (this->_container==rhs._container && this->_idx == rhs._idx);
        }
        bool operator!=(iterator rhs){ // XXX do not pass it as a reference
            return !(*this==rhs);
        }   
        T operator*(){
            if(_container->_msize>0&&_idx<_container->_msize){
                return _container->_marray[(_container->_mbegin+_idx)%N];
            }
            throw "XXX"; // XXX missing return statement
        }

        iterator& operator++(){
            if(_container->_msize ==0){
                *this = _container->end();
                return *this;
            }
            if(_idx==_container->_msize){   
                *this = _container->end();
                return *this;
            }
            _idx++;
            return *this;
        }
    };
    iterator begin(){
        return iterator(this,0);
    }
    iterator end(){
        return iterator(this,_msize);
    }
};
int current=0;
int gen(){
    return current++;
}

int curr_op=0;
int operation(){
    return 2*(curr_op++&1)-1;
}
int main(){
    RingQueue<int,10> ring;
    vector<int> v(9),op(9);
    generate(v.begin(),v.end(),gen);
    random_shuffle(v.begin(),v.end());
    copy(v.begin(),v.end(),ostream_iterator<int>(cout," "));    
    cout<<endl;

    generate(op.begin(),op.end(),operation);        
    random_shuffle(op.begin(),op.end());
    // copy(op.begin(),op.end(),ostream_iterator<int>(cout," "));   
    cout<<endl;

    for(vector<int>::iterator itv  = v.begin();itv!=v.end();itv++){
        try{
            ring.push_back(*itv);   
        }catch(const char * e){
            cout<<*itv<<e<<endl;
        }
    }
    for(RingQueue<int,10>::iterator it = ring.begin(); it!=ring.end(); ++it){
        cout<<*it<<endl;
    }
    return 0;
} 
```

代码正在运行。寻找 XXX 标记 ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T18:07:06.423

在为自定义容器编写迭代器时，您可能会发现使用[boost::iterator_facade](http://www.boost.org/doc/libs/1_49_0/libs/iterator/doc/iterator_facade.html)很有帮助。它是一个库，允许您仅定义迭代器的基本操作（递增、取消引用和相等比较，以及，如果适用，递减和前进），并通过提供所有必需的运算符为您填补空白。下面是使用 boost::iterator_facade 的迭代器的外观：

```
class iterator : public boost::iterator_facade<iterator, T, boost::forward_traversal_tag>{
    RingQueue<T,N>* _container;
    int _idx;
public:
    iterator(RingQueue<T,N>* container,int idx):_container(container){
        _idx = idx;
    }

    bool equal(const iterator &rhs) const {
        return (this->_container==rhs._container && this->_idx == rhs._idx);
    }

    T dereference() const {
        if(_container->_msize>0&&_idx<_container->_msize){
            return _container->_marray[(_container->_mbegin+_idx)%N];
        }
    }

    void increment(){
        if(_container->_msize ==0)
            *this = _container->end();
        else if(_idx==_container->_msize)
            *this = _container->end();
        else
            _idx++;
    }
}; 
```

`boost::forward_traversal_tag`指定迭代器遍历 - 这意味着您只能使用迭代器向前遍历容器，并且一次只能步进一个元素。

# c - 线程缓冲区：如何防止客户端之间的竞争并让客户端和服务器同时在缓冲区上工作

> ID：10775848
> 
> 赞同：0
> 
> 时间：2012-05-27T17:20:08.410
> 
> 标签：c, pthreads, mutex, circular-buffer

我做了一个程序，它有几个线程客户端，可以将信息存储到循环缓冲区中；服务器可以从循环缓冲区中读取（和“删除”）消息。我遇到的问题是缓冲区已满；当前正在写入缓冲区的客户端必须释放互斥锁（服务器会从缓冲区中删除所有数据），但是当释放互斥锁时，客户端竞争和已经很忙的客户端不一定是第一个继续传输的客户端；所以他的信息被混淆了。有谁知道如何解决这个问题？或者你有更好的方法来做这件事的建议。最终，我想创建一个多线程 tcp 服务器，将消息存储在缓冲区中，然后由服务器重新传输给所有客户端，这样你就知道我要用它做什么了。

```
#include <stdio.h>
#include <malloc.h>
#include <string.h>
#include <pthread.h>
#include <unistd.h>

struct cBuf{
    int     size;   /* maximum number of slots */
    int     start;  /* index of oldest element (last element) */
    int     end;    /* index at which to write new element (first element) */
    char    *buf;  /* buffer array */
};

struct cBuf cb;

pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;

/* Initialize buffer*/
void buf_Init(struct cBuf *cb, int size) {
    cb->size  = size + 1; /* empty element */
    cb->start = 0;
    cb->end   = 0; 
    cb->buf = (char *)calloc(cb->size, sizeof(char)); //pointer to beginning of allocated memory
}
/* Clean up buffer*/
void buf_Free(struct cBuf *cb) {
    free(cb->buf);
}

/* Is the the buffer full? if it equals size meaning the buffer is full: end will point to zero (ex. 7%7 is 0) */ 
int buf_IsFull(struct cBuf *cb) {
    return (cb->end + 1) % cb->size == cb->start; 
}

/* Is the buffer empty? Yes if both start & end are zero (are equal) */
int cbIsEmpty(struct cBuf *cb) {
    return cb->end == cb->start; 
}

/* Write an element, overwriting oldest element if buffer is full. App can
   choose to avoid the overwrite by checking cbIsFull(). */
/* When inserting an element acces needs to be blocked (only 1 insert at a time =>mutexes 
 * When buffer is full it should return -1 so we can block the request*/
int buf_Insert(struct cBuf *cb, char *elem) {
    if (buf_IsFull(cb)){
        //buffer is full; cannot write into the buffer
        //sleep(2);
        return 0;
    } else {
        /* When writing to the buffer, the buffer has to be locked first (will block when already locked)*/
        pthread_mutex_lock(&mutex);
        cb->buf[cb->end] = *elem; //we put the new character in the last free slot
        /* we move the index for the next slot one further */
        cb->end = (cb->end + 1) % cb->size; 
        pthread_mutex_unlock(&mutex);
        return 1;
    }
}

/* Read oldest element. Ensure !cbIsEmpty() first. */
int buf_Read(struct cBuf *cb, char *out) {
    if (!cbIsEmpty(cb)){
        /* When reading from the buffer, the buffer has to be locked first (will block when already locked)*/
        pthread_mutex_lock(&mutex);
        *out = cb->buf[cb->start];
        cb->start = (cb->start + 1) % cb->size; //are news oldest character is now the next one
        pthread_mutex_unlock(&mutex);
        return 1;
    }
    //buffer is emtpy
    return 0;
}

void * client(void *cb){
    //sleep (2);
    #ifdef DEBUG
        printf("\nDEBUG (Thread ID:%lu) - Entering thread\t",(unsigned long)pthread_self());
    #endif

    /* main thread does not need to wait and this way all resources are released when terminating*/
    pthread_detach(pthread_self());

    struct cBuf *myData;
    myData = (struct cBuf*) cb;
    int i;

    /* client will post message in the buffer */
    char input[]="Hello World!";

    //printf("I:\t");
    for (i=0; i < sizeof(input); ++ i){ 
        if (buf_Insert(myData, &input[i]) ){
            //printf("[I]%c",input[i]);
        } else {
            //the buffer is full; wait until it has been emptied + go back a step because of lost character
            i--;    
            #ifdef DEBUG
            printf("\nDEBUG (Main Thread) - Full Buffer");  
            #endif
        }
    }
    return 0;
}

int main(void) {
    int bufferSize = 20; /* arbitrary size */
    char out;
    pthread_t thread;
    int j;

    buf_Init(&cb, bufferSize);

    //we make 1 client for starters
    for (j = 0; j<4; j++){
        if(pthread_create (&thread,NULL, client, (void *) &cb) !=0){
            #ifdef DEBUG
            printf("\nDEBUG (Main Thread) - Error while creating thread");
            #endif
        } else {
            #ifdef DEBUG
            printf("\nDEBUG (Main Thread) - Thread created");
            #endif
        }
    }

    while (1){
        /* Server will read (and thus remove) the message */
        if (cbIsEmpty(&cb)){
            //sleep(2);
            #ifdef DEBUG
            printf("\nDEBUG (Main Thread) - Buffer is empty");
            #endif
        } else {
            printf("\tO:\t");
            while (buf_Read(&cb,&out)){
                printf("%c", out);
            }
            #ifdef DEBUG        
            if (buf_Read(&cb, &out) == 0){
                printf("\nDEBUG (Main Thread) - Finished reading");
            }
            #endif
            printf("\n");   
        }
    }

    //empty the buffer; free the allocated memory
    buf_Free(&cb);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T17:40:53.243

您所描述的是一个典型的用例，除了有选择地发出信号（和检查）线程`pthread_cond_t`之外，您还可以使用它。`pthread_mutex_t`

# jquery - 使用 jquery 通过 ID 获取 tfoot th 值

> ID：10775851
> 
> 赞同：1
> 
> 时间：2012-05-27T17:20:30.393
> 
> 标签：jquery, html, html-table

请看以下内容：

```
<table border="0" id="npoGridView">
            <thead>
                <tr>
                    <th>Quantity Order</th>
                    <th>Cost P.U</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                   //TD .......      
            </tbody>
               <tfoot>
                  <tr>
                    <th>Quantity Order</th>
                    <th>Cost P.U</th>
                    <th id="15">Total</th>
                  </tr>
              </tfoot>
        </table> 
```

我已经在**tfoot中给了 id（即 id** **=** "15"），现在我想使用 jquery 获取 th 值**。**

 ****如何使用 jquery 获取特定的**值**表单页脚？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T17:23:12.103

```
$('#npoGridView tfoot').each(function() {
  console.log($('th', this).text());
}); 
```

获取任何特定`th`like的值`<th id="15">Total</th>`；

```
$('tfoot th#15').text(); 
```

你可以得到如下的值`th`：

```
$('tfoot th:eq(0)').text(); // output: Quantity Order

$('tfoot th:eq(1)').text(); // output: Cost P.U

$('tfoot th:eq(2)').text(); // output: Total 
```

您可以根据需要使用[.text()](http://api.jquery.com/text)或[.html()](http://api.jquery.com/html)。

要更新`th`然后使用的值：

```
$('tfoot th#15').html($grandTotal); 
```

或者

```
$('tfoot th#15').text($grandTotal); 
```

**注意**不要只使用数值作为`id`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T17:22:46.367

$(th_id).text() 这将给出该特定 dom 元素的文本值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T17:23:26.507

我会使用 .html() ...

```
$('th#15').html(); 
```

另外，请记住，ID 不应/以数字开头。****

# c# - 使用反射提取对象

> ID：10775853
> 
> 赞同：0
> 
> 时间：2012-05-27T17:21:02.923
> 
> 标签：c#, reflection, instance, information-extraction

使用反射时，无论是否可以提取对象或变量都是可能的`static`。例如

```
class MainApp
{
    static void Main()
    {            
        ConcretePrototype1 p1 = new ConcretePrototype1("I");
        ConcretePrototype1 c1 = (ConcretePrototype1)p1.Clone();
        Console.WriteLine("Cloned: {0}", c1.Id);
    }
} 
```

是否可以提取

1.  `p1`两者`c1`都这样我可以检查它的类型

2.  来自 p1.clone() 的方法调用

到目前为止，这就是我对包含 0 个元素的结果数组所做的事情

我正在从其他文件加载程序集

```
var name = System.Reflection.Assembly.LoadFile(open.FileName);
name.GetType("PrototypePattern.MainApp").GetFields(BindingFlags.GetField|BindingFlags.Instance) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:28:25.507

如果要提取所有字段（私有/公共/静态/非静态），请使用：

```
type.GetFields(BindingFlags.Static | BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic) 
```

**编辑**

您无法使用简单的反射在方法*内部获取变量和方法调用。*这需要实际读取方法的字节码并对其进行分析——这不是一件容易的事。

如果您仍然热衷于它，我建议您查看[Mono.Cecil](http://www.mono-project.com/Cecil)或[CCI](http://cciast.codeplex.com/)等库。

# javascript - 从 jQuery 的 `$.get` 中保存字符串

> ID：10775862
> 
> 赞同：1
> 
> 时间：2012-05-27T17:22:11.257
> 
> 标签：javascript, jquery

我想从 URL 加载一些内容，以便在我的代码中使用它。我试过闭包，这个：

```
function getStringFromURL(url) {
  var getter = function() {
    this.result = "undef";
    this.func = function(response) {
      this.result = response;
    };
  };
  var x = new getter();
  $.get(url, x.func);
  return x.result;  // the it returns "undef" and not the wanted response
} 
```

根本没有任何效果。我永远不会得到内容，但如果我用它来调用它- 但我想保存响应`alert`。我认为-method`$.get("http://localhost:9000/x", function(response) { alert(response) });`的范围存在问题。`$.get`

这有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T17:23:55.133

如果没有服务器给出的明确协议，您无法在标准 get 查询中分析从另一个域或端口获取的内容。

阅读：[https](https://developer.mozilla.org/en/http_access_control) ://developer.mozilla.org/en/http_access_control 您将看到如何为您的站点定义正确的标头，以便它告诉浏览器跨域请求很好。

你有一个关闭问题。如果您想在 getter 以外的其他上下文中调用 x.func ，请尝试此操作：

```
var getter = function() {
   var _this = this;
   this.result = "undef";
   this.func = function(response) {
      _this.result = response;
     };
 }; 
```

编辑：正如其他人所提到的，您不能立即返回 x.result from `getStringFromURL`。您必须在回调中使用该值。事实上，在 javascript 中围绕异步调用定义同步 getter 是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T17:43:35.037

$.get 是异步方法

您需要将回调函数作为参数传递给 getStringFromURL

```
function getStringFromURL(url, callback) {
            var getter = function () {
                this.result = "undef";
                this.func = function (response) {
                    this.result = response;
                    callback(response);
                };
            };
            var x = new getter();
            $.get(url, x.func);
        }

getStringFromURL("http://localhost:9000/x", function (res) { alert(res) }); 
```

如果你想返回结果是不可能的。

> 如果阻止脚本，则不能在 JavaScript 中混合同步和异步，即阻止浏览器。

在这里查看[JavaScript 中的异步循环](https://stackoverflow.com/questions/4288759/asynchronous-for-cycle-in-javascript)

# bash - 检查 iptables 用户链是否存在的最佳方法。

> ID：10775863
> 
> 赞同：8
> 
> 时间：2012-05-27T17:22:12.123
> 
> 标签：bash, shell, iptables

我正在尝试以编程方式创建用户链并在 iptables 中删除它们。我想知道检查用户链是否存在以及是否不创建它的最佳方法是什么。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-28T12:23:47.760

用于`iptables(8)`列出链，将 stdout/stderr 重定向到`/dev/null`，并检查退出代码。如果链存在，`iptables`将退出true。

这个 shell 函数来自我的 iptables 前端脚本：

```
chain_exists()
{
    [ $# -lt 1 -o $# -gt 2 ] && { 
        echo "Usage: chain_exists <chain_name> [table]" >&2
        return 1
    }
    local chain_name="$1" ; shift
    [ $# -eq 1 ] && local table="--table $1"
    iptables $table -n --list "$chain_name" >/dev/null 2>&1
} 
```

请注意，我使用该`-n`选项以便 iptables 不会尝试将 IP 地址解析为主机名。没有这个，你会发现这个函数会很慢。

然后，您可以使用此函数有条件地创建一个链：

```
chain_exists foo || create_chain foo ... 
```

`create_chain`创建链的另一个函数在哪里。您可以`iptables`直接调用，但上面的命名使发生的事情变得非常明显。

# c++ - 从文件读取不读取字符串流

> ID：10775864
> 
> 赞同：0
> 
> 时间：2012-05-27T17:22:18.410
> 
> 标签：c++, io

我正在尝试从以下形式的文本文件中读取：

```
mdasd tgfor,100,23
sfier sdfdor,2,3
mmmmmm,232,452 
```

使用此功能：我以我能想到的各种方式进行测试，但无法使其正常工作：

```
void StudentRepository::loadStudents(){
    ifstream fl;
    fl.open("studs.txt");
    Student st("",0,0);
    string str,s;
    stringstream ss;
    int i;
    int loc;
    if(fl.is_open()){
        while(getline(fl,str)){
            cout<<"string: "<<str<<endl;

            loc = str.find(",");
            ss << str.substr(0,loc);
            s = ss.str();

            cout<<"name: "<<s<<endl;

            st.setName(s);
            ss.str("");
            str.erase(0,loc+1);

            loc = str.find(",");
            ss << str.substr(0,loc);
            ss >> i;

            cout<<"id:"<<i<<endl;

            st.setId(i);
            ss.str("");
            str.erase(0,loc);
            ss >> i;
            st.setGroup(i);
            ss.str("");

            cout<<"gr:"<<i<<endl;
            students.push_back(st);

            cout<<endl;
        }
    }
    else{
        cout<<"~~~ File couldn't be open! ~~~"<<endl;
    }
    fl.close();
} 
```

但正如我可以在运行中向您展示的那样，它只读取第一行的名字，而不是所有内容都是空白的：

```
string: mqqeeqw tuwqer,23,32 /// ID AND GROUP are initializate with 0 thats 
name: mqqeeqw tuwqer         /// why they have that values... why does it not work?
id:0
gr:0

string: maier tudor,2,3
name: 
id:0
gr:0

string: maier tudor,0,0
name: 
id:0
gr:0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T17:42:22.560

您可以`getline()`在 a`std::stringstream`上使用自定义分隔符，如下所示：

```
if(fl.is_open()){
    while(getline(fl,str)){
        stringstream ss(str);
        string name, id, gr;
        while(ss) {
            getline(ss, name, ',');  // "," as delimiter
            getline(ss, id, ',');
            getline(ss, gr, ',');
        }

        cout << "name: " << name <<endl;
        cout << "id:" << id << endl;
        cout << "gr:" << gr << endl;
        cout << endl;
    }
} 
```

# html - 这是什么类型的 HTML？

> ID：10775872
> 
> 赞同：0
> 
> 时间：2012-05-27T17:23:09.127
> 
> 标签：html, w3c-validation, html-validation, dynamics-nav

我正在玩一个新的 Microsoft 应用程序的“网络客户端”。当我运行 W3C 验证检查时，我得到以下结果：

![在此处输入图像描述](../Images/9855ed6ca6f59c6ef611a5476233a3d0.png)

这里是 HTML 文件的头部：

```
<!DOCTYPE html >
<html>

<head>
    <title>Microsoft Dynamics NAV</title>
    <meta content="IE=8" http-equiv="X-UA-Compatible" value="IE=8" />
    <meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type" />
    <meta content="no-cache" http-equiv="pragma" />
    <link id="ctl00_main" href="/Resources/main.css?version=7.0.33451" rel="stylesheet" type="text/css" />
    <link id="ctl00_controls" href="/Resources/controls.css?version=7.0.33451" rel="stylesheet" type="text/css" />
    <link id="ctl00_webclient" href="/Resources/webclient.css?version=7.0.33451" rel="stylesheet" type="text/css" />
</head>

<body class="v4master" scroll="no"> 
```

这是什么类型的 HTML？真的是 HTML5 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T18:00:47.910

```
<!DOCTYPE html> 
```

这个文档类型是在 HTML5 中引入的。
这就是任何 html5 tut 的介绍。

这种非常简单的文档类型甚至会导致目前不支持 HTML5 的浏览器进入标准模式，这意味着他们将以 HTML5 兼容的方式解释 HTML 的长期建立部分，而忽略他们不支持的 HTML5 的新功能不支持。

[MDN 参考](https://developer.mozilla.org/en/HTML/HTML5/Introduction_to_HTML5)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T19:54:43.003

```
<!DOCTYPE html> 
```

上面是一个 HTML5 DOCTYPE 但这并不意味着该文档是好的或有效的 HTML5，只是有人把那行放在那里。

此外，您可能想尝试使用 CSE HTML Validator，因为它的设计目的是更实用。这里有一个在线版本： [http ://www.OnlineWebCheck.com/](http://www.OnlineWebCheck.com/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T20:19:18.860

是的，它具有 HTML5 文档类型。HTML 4.01 中有三种不同的`<!DOCTYPE>`声明。在 HTML5 中只有一个：`<!DOCTYPE html>`

注意：`<!DOCTYPE>`标签没有结束标签，`<!DOCTYPE>`声明不区分大小写。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-27T17:48:32.423

是的，它有 HTML5 文档类型……但是，也许它应该是 HTML4。如果将其更改为：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

# javascript - css文件中的浏览器高度

> ID：10775873
> 
> 赞同：-1
> 
> 时间：2012-05-27T17:23:10.573
> 
> 标签：javascript, jquery, css, browser, height

我不确定我应该如何使用 Javascript 或 jQuery 库来获取浏​​览器高度，然后将其传递给一个变量以在我的外部 CSS 文件中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:26:06.847

您可以使用`$(document).height()`来查找整个文档的高度。

您可以使用`$(window).height()`来查找视口的高度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T17:27:14.820

我不会使用 JavaScript，那么媒体查询呢？

```
media screen and (min-height:700px){
   /* Specific styles... */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T17:27:38.240

没有办法动态地将任何东西传递给 CSS。相反，您应该设计您的 CSS 以响应不同的文档高度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T17:36:21.197

要动态获取客户端的高度和宽度，请使用 javascript，然后动态设置对象的高度和宽度。您可以使用以下 javascript 示例来获取客户端的高度和宽度。这取决于您使用的浏览器。要获取客户端的高度和宽度，请尝试以下 javascript：

> 变量我的宽度；变量我的身高；
> 
> if( typeof( window.innerWidth ) == 'number' ) {
> 
> //非IE
> 
> myWidth = window.innerWidth; myHeight = window.innerHeight;
> 
> } 否则如果（document.documentElement &&
> 
> ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
> 
> //IE 6+ 在“标准兼容模式”
> 
> myWidth = document.documentElement.clientWidth; myHeight = document.documentElement.clientHeight;
> 
> } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
> 
> //IE 4兼容
> 
> myWidth = document.body.clientWidth; myHeight = document.body.clientHeight;
> 
> }

# forms - Play 2.0 Scala：默认选中/选中表单元素

> ID：10775879
> 
> 赞同：4
> 
> 时间：2012-05-27T17:23:41.053
> 
> 标签：forms, scala, playframework-2.0, default

在网上找不到任何东西 re: 这个问题。

我正在 github 上查看[select](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/select.scala.html)、 checkbox 和 friends 的代码，但我完全错过了关于如何获得默认选择/检查工作的船。这里有什么交易？

有问题的表单所基于的案例类具有问题字段的默认值，但这没有任何作用。我需要对 Form(mapping('foo-> boolean)) 条目应用默认值吗？如果是这样，怎么做？

无知不是幸福，如果你有它，放弃一些知识......

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T18:07:58.610

不理想，但请参阅[此线程](http://groups.google.com/group/play-framework/browse_thread/thread/eed437edcaf158de)以获得实现默认值的一种方法。

```
@inputRadioGroup(
  field = _form("payByCheck").copy(
    value=_form("payByCheck").value.map{Some(_)}.getOrElse(Some("false"))
  ), 
  options("false"-> "No", "true"-> "Yes"), 
  '_label-> "Pay By Check?"
) 
```

这里的问题是我们已经将模型与表单完全解耦了。更好的方法是让表单映射以某种方式包含来自这些 scala 2.9.x 不可穿透的黑盒（称为案例类）的默认值。

唉，似乎没有发生，否则很想听到。如果您有货，请加入，仅提供此答案，因为这是我在过去 2 个毫无意义的搜索、试验和错误小时中发现的唯一东西 ;-)

# php - COUNT() 正在选择表中的行数

> ID：10775883
> 
> 赞同：0
> 
> 时间：2012-05-27T17:24:39.597
> 
> 标签：php, mysql, count

我`COUNT(*)`在下面的查询中是选择表中行数的计数，`users`而不是`distance`小于 50 的行数。

请您告诉我为什么查询选择的是表中的行`users`数而不是距离小于 50 的行数？

提前致谢。

```
SELECT COUNT(*), ( 6371 * ACOS( COS( RADIANS( 51.61050836267012 ) ) * COS( RADIANS( latitude ) ) * COS( RADIANS( longitude ) - RADIANS( - 0.23701071739196777 ) ) + SIN( RADIANS( 51.61050836267012 ) ) * SIN( RADIANS( latitude ) ) ) ) 
AS distance
FROM  `users` 
AS `u`
HAVING distance <=50 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:30:31.553

`HAVING`应该和`GROUP BY`表达有关。要将行数限制为给定条件，请使用`WHERE distance <= 50`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:32:14.600

`HAVING`适用于聚合值（例如 sum(column)**具有**特定条件）您应该在您的情况下使用`WHERE`而不是`HAVING`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T17:34:46.157

have 子句不会像 where 子句对 count 函数那样过滤行。尝试改用子查询。

# emacs - 如何在 GNU Emacs 中关闭过度滚动？

> ID：10775891
> 
> 赞同：4
> 
> 时间：2012-05-27T17:26:17.397
> 
> 标签：emacs, scroll

当我在 GNU Emacs (24) 中打开的文件（缓冲区）的行数少于当前窗口（框架）中可以显示的行数时，我可以 - 默认情况下 - 使用滚动条向下滚动并让顶行消失（ “过度滚动”）。

我怎样才能关闭它，所以当整个缓冲区显示在框架中时我不能滚动？

我可以[在 Emacs 源代码中修补 gtkutil.c，](http://thread.gmane.org/gmane.emacs.devel/108985)但更优雅的解决方案会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T22:26:56.547

现在可以通过设置变量来修改滚动条的行为`scroll-bar-adjust-thumb-portion`（`nil`为了我的目的），这里是文档：

```
scroll-bar-adjust-thumb-portion is a variable defined in `C source code'.
Its value is nil
Original value was t

Documentation:
Adjust thumb for overscrolling for Gtk+ and MOTIF.
Non-nil means adjust the thumb in the scroll bar so it can be dragged downwards
even if the end of the buffer is shown (i.e. overscrolling).
Set to nil if you want the thumb to be at the bottom when the end of the buffer
is shown.  Also, the thumb fills the whole scroll bar when the entire buffer
is visible.  In this case you can not overscroll.

[...] version 24.4 of Emacs. 
```

随此提交引入：[r111506](http://bzr.savannah.gnu.org/lh/emacs/trunk/revision/111506)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:59:53.820

AFAIK，您目前无法做到这一点（当然，您也许可以将其拼凑起来）。正确地做这件事可能会耗费 CPU 时间，但更重要的是，实现这个“特性”似乎比让人们习惯它并发现它毕竟不是问题要付出更多的努力。所以还没有人费心为它写补丁。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-27T17:46:25.630

您需要添加

(setq next-line-add-newlines nil)

到你的初始化文件。

# c# - 从项目执行类和从类库执行类有什么区别吗？

> ID：10775893
> 
> 赞同：0
> 
> 时间：2012-05-27T17:26:46.123
> 
> 标签：c#

假设我的项目中有一些课程。现在我创建另一个“类库”并将这个类移到那里。所以现在要实例化这个类，需要加载额外的 dll（类库 dll）。

我知道现在我有一点另一个程序，因为现在.net 需要读取两个文件（原始 exe 文件 + 类库 dll 文件），而不仅仅是一个 exe 文件。但除此之外还有什么不同吗？加载程序后，这个类最初的位置（exe 或 dll）是否重要？**我会在内存中**拥有完全相同的程序吗？

如果我可以在运行时将我的类移动到类库时引入任何延迟，我特别感兴趣？

这个问题是我之前的问题[如何分离几个“有点连接”的项目的结果？](https://stackoverflow.com/questions/10725620/how-to-separate-several-a-little-bit-connected-projects)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T17:30:37.577

将 DLL 加载到进程的内存空间后，与将相同代码包含在 EXE 项目中相比，性能应该没有差异。

事实上，从长远来看，通过将公共代码放在专用位置，您可能会看到性能提升。如果您倾向于将通用代码放入您的主要项目中，那么您最终可能会出现大量代码重复，从而导致维护问题，并最终导致更复杂的应用程序占用更大的内存）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T17:33:17.297

过早的优化是万恶之源。- 不要认为你可以通过将所有代码放在一个程序集中来提高应用程序的性能。维护收益远比 CLR 将另一个文件加载到内存中的额外命中更重要。

# python - 将列表的字符串表示形式转换为实际的列表对象

> ID：10775894
> 
> 赞同：88
> 
> 时间：2012-05-27T17:26:46.423
> 
> 标签：python, string, list

我有一个看起来与列表相同的字符串，比方说：

```
fruits = "['apple', 'orange', 'banana']" 
```

将其转换为列表对象的方法是什么？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-05-27T17:28:53.987

```
>>> fruits = "['apple', 'orange', 'banana']"
>>> import ast
>>> fruits = ast.literal_eval(fruits)
>>> fruits
['apple', 'orange', 'banana']
>>> fruits[1]
'orange' 
```

正如评论中指出的那样[ast.literal_eval](http://docs.python.org/library/ast.html)是**安全**的。从文档：

> 安全地评估表达式节点或包含 Python 表达式的字符串。提供的字符串或节点只能由以下 Python 文字结构组成：字符串、数字、元组、列表、字典、布尔值和无。
> 
> 这可用于安全地评估来自不受信任来源的包含 Python 表达式的字符串，而无需自己解析值。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-05-27T17:31:05.180

一个简单的调用就[`eval()`](http://docs.python.org/library/functions.html#eval)可以了：

```
fruits = eval("['apple', 'orange', 'banana']")
fruits
> ['apple', 'orange', 'banana'] 
```

或者如[本文](http://lybniz2.sourceforge.net/safeeval.html)所述，同样可以更安全地完成（意思是：不会冒意外副作用或恶意代码注入的风险），如下所示：

```
fruits = eval("['apple', 'orange', 'banana']", {'__builtins__':None}, {}) 
```

该解决方案的优点是不依赖于附加模块。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T17:27:15.863

我认为这就是 ast.literal_eval 的用途。

（[http://docs.python.org/library/ast.html#ast.literal_eval](http://docs.python.org/library/ast.html#ast.literal_eval)）

# css - 更改方向时字体变粗

> ID：10775895
> 
> 赞同：12
> 
> 时间：2012-05-27T17:26:55.593
> 
> 标签：css, ios, mobile-safari

我在 html 中使用它：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;"> 
```

这在CSS中：

```
html { font-size: 100%; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }\ 
```

也试过这个：

```
html { -webkit-text-size-adjust: none; } 
```

然而由于某种原因，这种情况发生了：

![在此处输入图像描述](../Images/61949da54ece0eb45cfe8c8d021afc13.png) ![在此处输入图像描述](../Images/82f6a4997316315092ea588a0cf67e6d.png)

**更新**：我尝试删除所有样式以查看我的任何 CSS 是否导致此问题，结果很奇怪：当我不使用任何字体规则时，字体只会变大（它没有放大，因为缩放被锁定通过 HTML`viewport`属性）同样，只有小字体变大，标题保持不变。奇怪@#$%

**更新 2**：我玩了 html/css 并得出了这个结论 - 唯一没有发生文本放大的情况是文本包含在页面中唯一的元素内 - 例如，如果我的所有身体包含的是 p /span/div 带有文本，它不会被放大。如果我添加另一个带有文本的元素，页面上的所有文本都会在横向模式下放大。
我试着做一些研究，浏览了很多移动网站，结果都是一样的——它们都有这个效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T00:00:42.713

## 比真正的解决方案更多的信息

根据我对[this page](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/AdjustingtheTextSize/AdjustingtheTextSize.html)和[this page](https://developer.mozilla.org/en/CSS/text-size-adjust)的工作方式的理解，所有文本都将根据`-webkit-text-size-adjust: auto`（iOS 的默认设置）或您的设置在横向模式下重构`-webkit-text-size-adjust: 100%`。

我不相信该`100%`设置正在做你认为它正在做的事情（试图保持文本大小相同）。相反，它只会影响“如何应用文本膨胀算法”（根据[此页面](https://developer.mozilla.org/en/CSS/text-size-adjust)）。我无法准确找到这可能意味着什么；`100%`也就是说，对于通货膨胀算法意味着什么。我的猜测是，根据[这个页面的](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/AdjustingtheTextSize/AdjustingtheTextSize.html)报价......

> 第一次呈现网页时，iOS 上的 Safari 会获取块的宽度并确定适当的文本比例，以便文本清晰可见。

...由于该过程仅在“第一次呈现网页时”发生，一旦设备从纵向变为横向，膨胀算法将根据屏幕宽度的变化“增长”文本更宽，即使当设置在`100%`。

也许这是因为`100%`与纵向与横向的宽度差异有关。例如，[这个 iPhone 规格](http://www.apple.com/iphone/specs.html)是 960 x 640。这可能`100%`意味着通货膨胀使用了 960 x 640（比如 960/640 x 100%）的某种直接关系，计算结果为 1.5，然后导致“大胆"的横向文本。如果是这种情况，那么理论上`-webkit-text-size-adjust`可能需要将其设置为`66.67%`不受影响（将 1.5 因子恢复为 1）。***但我不相信它是如此直截了当。***

最终，我认为 Andrey Bukati 的回答`-webkit-text-size-adjust: none;`是唯一保证文本大小不会发生变化的唯一保证。但它可能有其他的，也许是不受欢迎的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:49:31.177

尝试添加以下...

-webkit-transform: translate3d(0,0,0);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T21:57:10.413

尝试用

```
html { -webkit-text-size-adjust: none; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T07:31:58.363

嗯，试试

```
body { -webkit-text-size-adjust: none; } 
```

代替

```
html { -webkit-text-size-adjust: none; } 
```

[在这个线程](http://www.sitepoint.com/forums/showthread.php?873058-iPhone-font-size-gets-bigger-on-orientation-chg)中找到它，它对线程中的人和我都有效。

# regex - 使用正则表达式一次替换多个字符？

> ID：10775902
> 
> 赞同：-1
> 
> 时间：2012-05-27T17:27:57.950
> 
> 标签：regex

我有很多包含以下字符的文件：

```
ª º ã þ Þ 
```

以随机顺序插入单词，我想将文本的编码从中欧更改为 UTF8，并将这些字符替换为相应的 UTF8 字符：

```
Ș ș ă ț Ț 
```

我想在 SublimeText2 中使用正则表达式一次性替换所有字符，不幸的是我不知道该怎么做。我唯一得到的是：

查找：(ª)

更换：1 美元

如果有人知道如何将所有字符 (ª º ã þ Þ) 合并到“查找”对话框中，请发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:38:40.027

您的意思是您有一组文件，目前以一种字符编码（例如，ISO 8859-2）正确编码，并且您想要转换这些文件以便它们以 UTF-8 编码？

如果那是你想要做的，查找/替换是完全错误的方法。只需使用类似`recode`or的程序`iconv`。

# jsf - 从 RequestContext.getCurrentInstance() 返回的 Primefaces JSF null

> ID：10775906
> 
> 赞同：2
> 
> 时间：2012-05-27T17:28:33.100
> 
> 标签：jsf, primefaces, nullpointerexception, requestcontext

我正在使用 Primefaces 标签库开发一个应用程序。

到目前为止，我已经从他们的官方网站上复制了一些示例，除了使用 RequestContext.getCurrentInstance() 方法的任何内容之外，所有示例似乎都有效。它要么每次都返回 null，导致 Tomcat 抛出 NullPointer 异常，要么永远挂起，从不返回任何内容。

这是我的代码（挂起的情况）：

GlobalCounterBean.java

```
package org.primefaces.examples.view;

import java.io.Serializable;
import org.primefaces.context.RequestContext;

public class GlobalCounterBean implements Serializable{

    private int count;

    public int getCount() {
    return count;
    }

    public void setCount(int count) {
    this.count = count;
    }

    public synchronized void increment() {
    count++;
    System.out.println("aaaa");
        RequestContext.getCurrentInstance().push("counter", count);
    }
} 
```

测试.xhtml：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui">
    <h:head>
    </h:head>   
    <h:body>    

        <p:spinner />   

        <h:form>
    <h:outputText value="#{globalCounter.count}" styleClass="ui-widget display" />

    <br />

    <p:commandButton value="Click" actionListener="#{globalCounter.increment}" />
</h:form>

<p:push onmessage="handleMessage" channel="counter" />

<script type="text/javascript">
    function handleMessage(evt, data) {
            $('.display').html(data);
    }
</script>

    </h:body>
</html> 
```

以下是它返回 null 时的代码（所有文件都在同一个项目中）：

聊天控制器.java：

```
 package org.primefaces.examples.view;

    import java.io.Serializable;
    import java.util.HashSet;
    import java.util.Set;

    import javax.faces.application.FacesMessage;
    import javax.faces.bean.ApplicationScoped;
    import javax.faces.bean.ManagedBean;
    import javax.faces.context.FacesContext;
    import javax.faces.event.ActionEvent;

    import org.primefaces.context.RequestContext;

    public class ChatController implements Serializable {

        private final static String CHANNEL = "chat";

        private String message;

        private String username;

        private boolean loggedIn;

        private Set<String> users = new HashSet<String>();

        public String getMessage() {
            return message;
        }
        public void setMessage(String message) {
            this.message = message;
        }

        public String getUsername() {
            return username;
        }
        public void setUsername(String username) {
            this.username = username;
        }

        public boolean isLoggedIn() {
            return loggedIn;
        }
        public void setLoggedIn(boolean loggedIn) {
            this.loggedIn = loggedIn;
        }

        public void send() {
            RequestContext.getCurrentInstance().push(CHANNEL, username + ": "+  message);

            message = null;
        }

        public void login() {

            RequestContext requestContext = RequestContext.getCurrentInstance();

            if(users.contains(username)) {
                loggedIn = false;
                FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Username taken", "Try with another username."));

                requestContext.addPartialUpdateTarget("growl");
            }
            else {
                users.add(username);
                loggedIn = true;

                requestContext.push(CHANNEL, username + " joined the channel.");
            }
        }

        public void disconnect() {
            RequestContext.getCurrentInstance().push(CHANNEL, username + " has left the channel.");
            loggedIn = false;
            username = null;
        }
    } 
```

聊天.xhtml

```
 <html xmlns="http://www.w3.org/1999/xhtml"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:p="http://primefaces.org/ui">

        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
        <title>Insert title here</title>
        </head>
        <body>
        <f:view>
        <p:growl id="growl" showDetail="true" />

        <h:form>

            <p:fieldset id="container" legend="PrimeChat">

                <h:panelGroup rendered="#{chatController.loggedIn}" >
                    <p:outputPanel layout="block" style="width:600px;height:200px;overflow:auto" 
                               styleClass="chatroom" />
                    <p:spinner />
                    <p:separator />

                    <p:inputText value="#{chatController.message}" styleClass="messageInput" />
                    <p:spacer width="5" />
                    <p:commandButton value="Send" actionListener="#{chatController.send}" global="false" oncomplete="$('.messageInput').val('').focus()"/>
                    <p:spacer width="5" />
                    <p:commandButton value="Disconnect" actionListener="#{chatController.disconnect}" global="false" 
                                        oncomplete="chatAgent.close()" update="container" />
                </h:panelGroup>

                <h:panelGroup rendered="#{not chatController.loggedIn}" >
                    Username: <p:inputText value="#{chatController.username}" />

                    <p:spacer width="5" />
                    <p:commandButton value="Login" actionListener="#{chatController.login}" update="container" 
                                     icon="ui-icon-person"/>
                </h:panelGroup>

            </p:fieldset>

        </h:form>

        <p:push onmessage="handleMessage" channel="chat" widgetVar="chatAgent" />

        <script type="text/javascript">
            function handleMessage(evt, data) {
                var chatContent = $('.chatContent');
                chatContent.append(data + '<br />');

                //keep scroll
                chatContent.scrollTop(chatContent.height());
            }
        </script>
        <script type="text/javascript">
        function handleComplete(xhr, status, args) {
            if(args.validationFailed) {
                PrimeFaces.debug("Validation Failed");
            } 
            else {
                PrimeFaces.debug("Save:" + args.saved);
                PrimeFaces.debug("FirstName: " + args.user.firstname + ", Lastname: " + args.user.lastname); 
            }
        }
        </script>

        </f:view>
        </body>
        </html> 
```

面孔-config.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xi="http://www.w3.org/2001/XInclude"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">
     <managed-bean eager="true">
      <managed-bean-name>chatController</managed-bean-name>
      <managed-bean-class>org.primefaces.examples.view.ChatController</managed-bean-class>
      <managed-bean-scope>request</managed-bean-scope>
     </managed-bean>
     <managed-bean>
      <managed-bean-name>globalCounter</managed-bean-name>
      <managed-bean-class>org.primefaces.examples.view.GlobalCounterBean</managed-bean-class>
      <managed-bean-scope>application</managed-bean-scope>
     </managed-bean>
     <!--
        No ManagedBean declarations here as we are using @ManagedBean Annotations.
        -->
    </faces-config> 
```

网页.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
        <web-app version="2.5"
            xmlns="http://java.sun.com/xml/ns/javaee"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" >

            <welcome-file-list>
                <welcome-file>index.jsp</welcome-file>
            </welcome-file-list>

            <servlet>
                <servlet-name>Faces Servlet</servlet-name>
                <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
                <load-on-startup>1</load-on-startup>
            </servlet>

            <servlet-mapping>
                <servlet-name>Faces Servlet</servlet-name>
                <url-pattern>*.xhtml</url-pattern>
            </servlet-mapping>

        </web-app> 
```

这是tomcat控制台中抛出的异常：

```
 2012-05-27 19:16:25 com.sun.faces.context.ExceptionHandlerImpl log
            SEVERE: JSF1073: javax.faces.event.AbortProcessingException caught during processing of INVOKE_APPLICATION 5 : UIComponent-ClientId=j_idt2:j_idt16, Message=java.lang.NullPointerException
            2012-05-27 19:16:25 com.sun.faces.context.ExceptionHandlerImpl log
            SEVERE: java.lang.NullPointerException
            javax.faces.event.AbortProcessingException: java.lang.NullPointerException
                at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:178)
                at javax.faces.event.ActionEvent.processListener(ActionEvent.java:84)
                at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:773)
                at javax.faces.component.UICommand.broadcast(UICommand.java:296)
                at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:781)
                at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1246)
                at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
                at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
                at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
                at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
                at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
                at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
                at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
                at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
                at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
                at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
                at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
                at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
                at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
                at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
                at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
                at java.lang.Thread.run(Thread.java:680)
            Caused by: java.lang.NullPointerException
                at org.primefaces.examples.view.ChatController.login(ChatController.java:69)
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
                at java.lang.reflect.Method.invoke(Method.java:597)
                at org.apache.el.parser.AstValue.invoke(AstValue.java:191)
                at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
                at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:149)
                ... 21 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:03:38.093

您`web.xml`缺少 PrimeFaces Push 设置的“URL 配置”部分。

正如我对您[上一个问题](https://stackoverflow.com/questions/10758147/a-two-user-tic-tac-toe-using-jsf)的回答中提到的，PrimeFaces Push 的安装详细信息在 PrimeFaces [User's Guide](http://www.primefaces.org/documentation.html)的第 6 章中进行了概述。这是您缺少的步骤的相关性摘录：

> # 6.1 设置
> 
> ### 推送服务器
> 
> PrimeFaces Push 使用 servlet 作为调度程序。此 servlet 应该与 JSF 应用程序位于不同的应用程序中，并且目前只能部署在 jetty 服务器上。
> 
> ```
> <servlet>
>     <servlet-name>Push Servlet</servlet-name>
>     <servlet-class>org.primefaces.push.PushServlet</servlet-class>
>     <load-on-startup>1</load-on-startup> 
>     <init-param>
>         <param-name>channels</param-name>
>         <param-value>chat,counter</param-value>
>     </init-param>
> </servlet>
> <servlet-mapping>
>     <servlet-name>Push Servlet</servlet-name>
>     <url-pattern>/prime-push/*</url-pattern>
> </servlet-mapping> 
> ```
> 
> 频道配置定义了推送服务器可以发布到的主题名称。
> 
> ### 网址配置
> 
> JSF 应用程序需要定义推送服务器 url 来发送消息。
> 
> ```
> <context-param>
>     <param-name>primefaces.PUSH_SERVER_URL</param-name>
>     <param-value>ws://url_to_push_server</param-value>
> </context-param> 
> ```

# java - if 和 else 语句 Java 试图停止语句 Homework

> ID：10775907
> 
> 赞同：1
> 
> 时间：2012-05-27T17:28:32.763
> 
> 标签：java, if-statement, clock, bluej

这是我的代码...

```
private void updateDisplay() {
    if(hours.getValue() == 0){
        hours.setValue(12);
        displayString = hours.getDisplayValue() + ":" + 
        minutes.getDisplayValue() + " am"; 
    }
    else if(hours.getValue() < 12){
        displayString = hours.getDisplayValue() + ":" + 
        minutes.getDisplayValue() + " am";
    }
    else if(hours.getValue() == 12){
        displayString = hours.getDisplayValue() + ":" + 
        minutes.getDisplayValue() + " pm";
    }
    else if(hours.getValue() < 24){ 
        displayString = hours.getValue() - 12 + ":" +  
        minutes.getDisplayValue() + " pm"; 
    }
} 
```

所以基本上这是一个我试图以 12 小时格式显示的时钟。当它从晚上 11:59 开始变化时

我让它说是上午 12:00，但是一旦我 timeTick() 因为我的 if hours.getValue == 0 到了下午 12:01，然后我们将它设为 12，但稍后在方法中它的 if hours.getValue() == 12 下午。我想避免这种情况。在维护相当简单的java的同时有什么想法吗？

已解决 谢谢。如果 hours.getValue() == 0 我只是添加了 12 而不是 setValue(12)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:33:17.823

为什么不只是在小时数等于 12 时做你所做的事情呢？

不要实际设置小时值，只需在打印时添加 12。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:48:39.067

假设`hours.getValue()`返回一个`int`，你可以这样做`hours.getValue()/13 == 0 ? hours.getValue() + ":" + minutes.getDisplayValue() + " AM": hours.getValue() - 12 + ":" + minutes.getDisplayValue() + " PM";`。该表达式称为三元运算符，int 数据类型修剪十进制结果。

我更新了它来做所有事情。我希望你喜欢 1 班轮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T17:34:04.223

内部使用 24 小时制，但使用“hours mod 12”显示其值

# php - 在 aws spot 实例上调用异步命令（PHP）

> ID：10775910
> 
> 赞同：1
> 
> 时间：2012-05-27T17:28:53.573
> 
> 标签：php, amazon-ec2, amazon-web-services

我一直在研究 AWS 现场实例的一些工作，但不是拥有一个从 SQS 工作并通过我的主服务器上的 cronjob（或排序）维护的静态集群，以确保服务器和正在完成的工作的数量等我希望让服务器根据我必须做的工作创建和拆除。

现在我了解了如何启动指定某个 AMI 的新 Spot 实例，并且我在这个 AMI 上有一个 PHP 脚本，位于 /home/ubuntu/ 中，名为 do_job.php，但它需要一些参数（就像它来自 SQS 消息一样） .

在我的服务器生成器中，有没有一种好方法可以在我验证新的 Spot 实例实际上正在运行且不会锁定我的生成器后调用异步命令？

也许我从错误的角度来看这个？我对aws集群有点菜鸟，所以我可能在这里吠错了树......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:53:09.363

我想我会跟进这个问题。

不，没有简单的方法可以做到这一点。目前最简单的方法是在您的服务器上安装一个基本的 Apache 或 lightttp 或任何网络服务器，获取它的内部公共 DNS 并通过异步 cURL 方法或其他方法从您生成的 EC2 实例中调用它。

做类似事情的更可接受的方法是使用像 SQS 这样的 MQ 并在作业服务器上创建可见性锁定。当您在工作服务器或您正在运行以处理信息的任何现场/按需实例上处理 MQ 时，您可以设置脚本运行时长的可见性。您可以使用简单的调度程序来执行此操作，该调度程序将信息处理转换为后台进程，而调度程序进入 while() 循环，每次检测到后台进程仍在运行时重置 Message 的可见性。这允许消息的单一服务器完整性。

为了让它工作，您必须根据 Amazon Cloudwatch 指标中 MessagesVisible 的大小和深度进行扩展，告诉您队列中有多少消息是可见的并且已经存在了一段时间。最好在此指标上有一个延迟期，以便：

*   每 60 秒检查一次指标
*   每 10 分钟，平均超过 10 条可见消息会扩展服务器。

这是扩展作业集群的一种更可接受的方式。

# java - jasper 在 jar 文件中不起作用

> ID：10775911
> 
> 赞同：0
> 
> 时间：2012-05-27T17:29:05.050
> 
> 标签：java, filesystems, jasper-reports

我在我的桌面应用程序中使用了 Jasper 报告，

作为

```
 void showResports(){
    try{
      // OriginalExportOriginalExport 
         String reportName ="";
        //ExportReport4.jasperExportReport4.jasper
        if(export.equalsIgnoreCase("1")){
  reportName = "OriginalExport.jrxml";
        }
        else if(export.equalsIgnoreCase("0")){
         reportName = "ExportReport4.jrxml";

        }

   InputStream in =getClass().getResourceAsStream(reportName);

  if(in==null|| connection==null) return ;

   JasperDesign jasperDesign = JRXmlLoader.load(in);
   JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);
   JasperPrint jp = JasperFillManager.fillReport(jasperReport, null, connection);
  System.out.println("Object of Jasper Print created");

              JRViewer jv = new JRViewer(jp);

     //Insert viewer to a JFrame to make it showable
            JFrame jf = new JFrame();
            jf.getContentPane().add(jv);
            jf.validate();
            jf.setVisible(true);
            jf.setSize(new Dimension(800,600));
            jf.setLocation(300,100);
            jf.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

  File f=new File(reportName);
  if(f.exists()) System.out.println("Yes Yes File is there");
  else 
  System.out.println("File is not there"+f.getAbsolutePath());

   }catch(Exception e){
    e.printStackTrace();}

    }// showReports

 } 
```

在控制台上检查时它说找不到文件，所以我很担心为什么会发生这个错误，尽管它在 netebeans 中运行良好？

现在我明白了

```
C:\Users\FFIS WIN03\dist\report32name_1338142442500_473143.java
        at net.sf.jasperreports.engine.design.JRJavacCompiler.compileClasses(JRJavacCompiler.java:89)
        at net.sf.jasperreports.engine.design.JRAbstractClassCompiler.compileUnits(JRAbstractClassCompiler.java:63)
        at net.sf.jasperreports.engine.design.JRAbstractCompiler.compileReport(JRAbstractCompiler.java:188)
        at net.sf.jasperreports.engine.JasperCompileManager.compileReport(JasperCompileManager.java:212)
        at pos.ViewAllPayments$Reporter.showResports(ViewAllPayments.java:1339)
        at pos.ViewAllPayments.importButtonActionPerformed(ViewAllPayments.java:1098)
        at pos.ViewAllPayments.access$2100(ViewAllPayments.java:39)
        at pos.ViewAllPayments$20.actionPerformed(ViewAllPayments.java:448)
        at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
        at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
        at java.awt.Component.processMouseEvent(Unknown Source)
        at javax.swing.JComponent.processMouseEvent(Unknown Source)
        at java.awt.Component.processEvent(Unknown Source)
        at java.awt.Container.processEvent(Unknown Source)
        at java.awt.Component.dispatchEventImpl(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Window.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$000(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.awt.EventQueue$4.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.io.IOException: Cannot run program "javac": CreateProcess error= 2, The system cannot find the file specified
        at java.lang.ProcessBuilder.start(Unknown Source)
        at java.lang.Runtime.exec(Unknown Source)
        at java.lang.Runtime.exec(Unknown Source)
        at net.sf.jasperreports.engine.design.JRJavacCompiler.compileClasses(JRJavacCompiler.java:58)
        ... 43 more
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
        at java.lang.ProcessImpl.create(Native Method)
        at java.lang.ProcessImpl.<init>(Unknown Source)
        at java.lang.ProcessImpl.start(Unknown Source)
        ... 47 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:33:59.130

需要注意的是，它从您的**classpath**`getResourceAsStream`中提取，但与您当前的目录相对。**`new File`**

 **如果您来自 Netbeans 的类资源包括：`${currentdir}/build/classes`，并且您的 jrxml 文件在那里，那么`getResourceAsStream`将成功，但`new File`由于 ${currentdir}/OriginalExport.jrxml 不存在而将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:11:47.997

您希望将 .jrxml 文件作为资源，因此您`getResourceAsStream`甚至可以从 jar 文件中读取它。但是你不应该像`File`在文件系统中那样使用它。事实上，使用的应用程序启动目录，甚至会有所不同。

检测存在：`getResource`当不存在时将返回一个空 URL。那可能应该在*之前* `getResourceAsStream`完成。

您使用的类的包`getResourceAsStream`将是相对路径的起始路径。您可以使用像“/org/jasperreports/samples/sample1.jrxml”这样的绝对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T17:32:12.257

该文件在类路径中不存在。通常，在许多情况下，从命令行获取文件的绝对路径会更好。否则，请确保您的类路径中有文件的位置。**

# c# - 关于 C# 连接到 EC2 的问题

> ID：10775913
> 
> 赞同：12
> 
> 时间：2012-05-27T17:29:21.693
> 
> 标签：c#, mysql, amazon-ec2

我目前正在使用 Amazon EC2 (AMI linux) + MySQL，现在我正在研究 C# 的东西。

我写了这样的代码：

```
 MySqlConnection DBConn = new MySqlConnection();
        DBConn.ConnectionString = "Server=ec2-**.compute-1.amazonaws.com;Database=****;uid=root;password=****;port=3306;charset=utf8";

        try
        {
            DBConn.Open();
        }
        catch (Exception ex)
        {
            MessageBox.Show("connecting fail");
        } 
```

但是由于某种原因，当我运行它时，它会生成一个“连接失败”错误。

我用谷歌搜索并发现我需要设置“授予所有权限 *.* 到 root@'localhost'”

所以，我做到了！

但它仍然不起作用。我想我遵循了所有的步骤。

*   我目前正在开发 Visual Studio 2008 和 Windows7。

*   我检查了错误，似乎是超时错误。我认为这是防火墙的事情，但不知道我应该做什么。我设置了我的安全组，以便 TCP 端口对所有人开放（包括 Mysql）。它仍然无法正常工作。这不是解决这个问题的方法吗？；（但是，我很好奇的是，在我设置安全组之前，我可以使用 MySQL 工作台访问数据库。

抱歉，我对 EC2 完全陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T00:17:04.910

1）您应该通过 aws 控制台打开服务器上的 MySQL 端口。您可以通过单击转到 RDS 部分的 DB Security Groups 来执行此操作，只需输入 CIDR:0.0.0.0/0 即可测试您是否已连接并且状态已授权。然后你可以重新排列规则来指定哪个ip可以连接。
2) 您应该使用 MySQL 连接器从 C# 连接 MySQL。
[Mysql 连接器链接](http://www.mysql.com/downloads/connector/net/)
3) 您的连接字符串应如下所示：

```
Server=yourdburl;
Database=yourdb; 
Uid=yourdbuser; 
Pwd=yourdbuserpassword;
charSet=utf8; 
```

第三个似乎是对的，你应该检查第一个和第二个案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-13T20:15:34.387

您应该在该 ENI 上打开[VPC 流日志](https://aws.amazon.com/blogs/aws/vpc-flow-logs-log-and-view-network-traffic-flows/)，以查看该连接是在该接口上被接受还是被拒绝。正如甘迪尔所说，您的安全组不正确的可能性很大。

# php - PHP：在 {} 中查找任何内容的正则表达式

> ID：10775914
> 
> 赞同：1
> 
> 时间：2012-05-27T17:29:25.470
> 
> 标签：php, regex

我使用带有以下字符的字符串：{ 和 } 示例：

> 使用 IP 地址 {ipAdress} 登录

或其他示例：

> 您的用户名是 {userName}

现在我需要一个正则表达式来查找任何字符串，我试过这个：

```
preg_match_all('/^{(.+)}/', $string, $matches) 
```

但这并没有发现……谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:30:59.887

```
preg_match_all('/\{(.+?)\}/', $string, $matches) 
```

`{`s 在正则表达式中是特殊的。你需要逃离他们。

此外，`^`锚定到行首。您的模式不在一行的开头。

最后，根据您在下面的评论，每行有多个这样的划分字符串，因此您想使用非贪婪版本的 search `.+?`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T23:27:06.627

`preg_match_all('/\{([^}]+)\}/', $string, $matches);`

`.`谨慎使用。在这种情况下`{[^}]+}`效率更高。

# java - 如何更改给定行和索引处单元格的背景颜色？

> ID：10775915
> 
> 赞同：0
> 
> 时间：2012-05-27T17:29:44.050
> 
> 标签：java, swing, jtable

我不敢相信我在谷歌搜索时找不到。我编写的每个 JTable 都会自动填充来自 DB 的数据，并且任何编辑都是通过侦听器完成的，但现在出于测试目的，我只有一个简单的 3x3 表，我不知道如何在代码中手动选择一个单元格（为了更改 bg用于测试目的的颜色），例如 table.cellAt(1,1).setBGcolor...

编辑：由于标题不是作为问题形成的，如何在我的代码中手动选择一个单元格？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T17:36:46.937

> 如何手动选择代码中的单元格？

`table.changeSelection(row, column, false, false)`，[例如](https://stackoverflow.com/a/6060678/714968)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T17:41:12.557

因此，您的问题是“如何更改给定行和索引处单元格的背景颜色？”。

单元格的背景颜色取决于与单元格关联的渲染器。但是您不能将渲染器与单元格相关联。你能做的是

*   创建一个 JTable 子类并覆盖`getCellRenderer(int row, int column)`以返回您自己的渲染器
*   调用 setDefaultRenderer(Class columnClass, TableCellRenderer renderer) 将渲染器关联到给定的数据类

因此，如果要更改给定单元格的背景颜色，则必须将表格配置为使用自定义渲染器，并且必须将此自定义渲染器配置为使用您的背景颜色而不是给定单元格的默认颜色（或更改此特定单元格中数据的值，以便您的自定义渲染器知道它必须使用背景颜色）。

# jquery - JQuery动画不适用于锚标记

> ID：10775926
> 
> 赞同：0
> 
> 时间：2012-05-27T17:31:24.360
> 
> 标签：jquery, jquery-plugins, anchor, jquery-easing

当用户用鼠标悬停时，我正在使用缓动插件来“摇动”我的锚标记。`<a>`如果我将它附加到标签以外的任何元素上，它就会起作用。我也尝试将行为附加到前面`<li>`，但它在那里也不起作用。我是 JQuery 的菜鸟；我认为它一定与锚标签有关，但我无法通过快速谷歌搜索找到任何东西。也许我忽略了什么？下面是我的代码：

```
 <section id="content">
              <nav>
                    <ul>
                        <li id="selected">Home</li>
                        <li style="margin-left:35px;"><a href="about_alabama_bunker.html" title="Learn about Alabama Bunker" class="shake">About</a></li>
                        <li style="margin-left:5px;"><a href="services_offered.html" title="Services offered by Alabama Bunker" class="shake">Services</a></li>
                        <li style="margin-left:5px;"><a href="security_bunker_products.html" title="Product catalog" class="shake">Products</a></li>
                        <li style="margin-left:25px;"><a href="contact_alabama_bunker.html" title="Get in touch with our sales staff for inquiries, comments or suggestions" class="shake">Contact</a></li>
                    </ul>
              </nav>

          </section> 
```

和我的jQuery：

```
<script type="text/javascript">
$(document).ready(function() {
$('a.shake').hover(function(event) {
    $(this)
        .css(
            {'color': 'ff0000' }, {
                duration: 'slow',
                easing: 'easeOutBounce'
            })
        .animate(
            { left: 25 }, {
                duration: 'fast',
                easing: 'easeOutBounce'
            })
        .animate(
            { left: 0 }, {
                duration: 'fast',
                easing: 'easeOutBounce'
            });
    });
});
</script> 
```

**更新**

我删除了颜色变化的第一个动画。我已经尝试将类分别移动到`<nav>`和`<ul>`元素中。我还确保对选择器的调用是 to`$(.shake)`而不是`$(a.shake)`. 在任何情况下都没有工作人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:57:09.657

在你的css中，你有属性`position: relative`还是`position: absolute`？

```
nav ul li a.shake {
    text-decoration: none;
    display: block;
    position: relative;
    }

<script type="text/javascript">
    $(document).ready(function() {
    $('a.shake').hover(function(event) {
        $(this)
            .animate(
                { left: 200 }, {
                    duration: 'slow',
                    easing: 'easeOutBounce'
                })
            .animate(
                { left: 0 }, {
                    duration: 'slow',
                    easing: 'easeOutBounce'
                });
    });
});
  </script> 
```

如果不添加`position`属性，它也不适用于`event.preventDefault()`.

我也希望你的`<head>`标签里有

```
<script src="yourPath/jquery.easing.1.3.js" type="text/javascript"></script> 
```

这是工作所必需的。

* * *

所以编辑你的代码是这样的：

```
<section id="content">
              <nav>
                    <ul>
                        <li><a style="position: relative; margin-left:35px;" href="about_alabama_bunker.html" title="Learn about Alabama Bunker" class="shake">About</a></li>
                        <li><a style="position: relative; margin-left:5px;" href="services_offered.html" title="Services offered by Alabama Bunker" class="shake">Services</a></li>
                        <li><a style="position: relative; margin-left:5px;" href="security_bunker_products.html" title="Product catalog" class="shake">Products</a></li>
                        <li><a style="position: relative; margin-left:25px;" href="contact_alabama_bunker.html" title="Get in touch with our sales staff for inquiries, comments or suggestions" class="shake">Contact</a></li>
                    </ul>
              </nav>
          </section> 
```

我测试了它并且它有效！

# java - 如何在 GWT 中替换 StringTokenzier(..., true)？

> ID：10775928
> 
> 赞同：2
> 
> 时间：2012-05-27T17:31:38.997
> 
> 标签：java, parsing, gwt, stringtokenizer

我正在寻找包含分隔符的 StringTokenzier 的 GWT 兼容替代品。该任务无法通过正则表达式解决，因为语法不是上下文无关的。

示例：提取泛型类型定义的第一级。所以对于`List<String>, Map<Integer, Map<Character, Boolean>>, Set<List<Double>>`，我想要一个包含三个项目的列表。`List<String>`并且`Map<Integer, Map<Character, Boolean>>`和`Set<List<Double>>`

精简示例代码：

```
private static List<String> extractFirstLevel(String type) {
    List<String> res = new LinkedList<String>();
    StringTokenizer st = new StringTokenizer(type, "<>,", true);
    int nesting = 0;        // we are only interested in nesting 0
    String lastToken = "";
    while (st.hasMoreTokens()) {
        String token = st.nextToken();
        if (token.equals("<")) {
            nesting++;  // ignore till matching >, but keep track of additional <
            lastToken = lastToken + "<";
        } else if (token.equals(">")) {
            nesting--;  // up one level
            lastToken = lastToken + ">";
        } else if (token.equals(",")) {
            if (nesting == 0) {  // we are interested in the top level
                res.add(lastToken);
                lastToken = "";
            } else { // this is a , inside a < >, so we are not interested
                lastToken = lastToken + ", ";
            }
        } else {
            lastToken = lastToken + token.trim();
        }
    }
    res.add(lastToken);
    return res;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T18:49:24.127

我最终迭代了字符串的字符：

```
private static List<String> extractFirstLevelNew(String type) {
    List<String> res = new LinkedList<String>();
    int start = 0;
    int nesting = 0;
    for (int i = 0; i < type.length(); i++) {
        char chr = type.charAt(i);
        if (chr == '<') {
            nesting++;
        } else if (chr == '>') {
            nesting--;
        } else if ((chr == ',') && (nesting == 0)) {
            res.add(type.substring(start, i).trim());
            start = i + 1;
        }
    }
    res.add(type.substring(start, type.length()).trim());
    return res;
} 
```

# ruby-on-rails - Capistrano 安全最佳实践

> ID：10775933
> 
> 赞同：2
> 
> 时间：2012-05-27T17:32:38.327
> 
> 标签：ruby-on-rails, security, deployment, capistrano

我工作的公司一直在使用 capistrano 进行 Rails 应用程序部署。我们为每个网络应用程序创建了应用程序用户（例如 foo_app），它们都属于一个没有密码 sudo 权限的网络应用程序组：

```
%webapp ALL=(ALL) NOPASSWD: ALL 
```

在我们的 cap deploy.rb 中，我们设置了一个 ssh 密钥对，以允许 capistrano 以应用程序用户的身份 ssh 到服务器并执行所有 cap 任务。

```
set :ssh_options, {:username=>'foo_app', :keys => File.join(ENV['HOME'],'.ssh', 'id_rsa_deploy')} 
```

它运行良好，但**让 nopasswd sudoer 运行我的应用程序进程让我感觉有点不舒服，如果应用程序进程受到威胁，攻击者可以轻松接管整个服务器。**

我的问题是，有没有办法让不同的用户运行我的应用程序，最好没有 sudo 许可？理想情况下，我希望有一个“部署”用户来执行所有 capistrano 远程任务：

```
set :ssh_options, {:username=>'deploy', :keys => File.join(ENV['HOME'],'.ssh', 'id_rsa_deploy')} 
```

但我想让 capistrano 使用特定于应用程序的用户来运行我的进程，如独角兽、延迟作业等。

我玩过**:admin_runner, :runner**变量，但它们没有按我预期的那样工作。在启动独角兽、延迟作业等进程时，我可以将一些第 3 方配方更改为 sudo as foo_app，但要让它们保持更新需要做很多工作。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T03:32:25.413

首先，您可能需要考虑稍微限制一下 nopasswd 规则。我不确定您的部署的具体细节，但我通常会创建一个专门用于部署的用户，并*仅*针对我在部署期间需要升级的命令为他提供 nopasswd 规则——这通常最终只是服务重启命令，可能是特定的chown 命令也是如此。如果您需要更多互动帮助，请`#capistrano`在美国太平洋白天加入，我很乐意为您提供帮助 - 我只是在这个周末想念您。

受限 nopasswd 规则的示例，以防您需要参考：

```
webapp ALL=(root) NOPASSWD:/usr/sbin/sv restart myservice 
```

结果规则集：

```
webapp@host:~$ sudo -ll
User torrancew may run the following commands on this host:

Sudoers entry:
    RunAsUsers: root
    Commands:
        NOPASSWD: /usr/bin/sv restart myservice 
```

-托伦斯

# java - 如何使用 ObjectOutputStream 和 ObjectInputStream

> ID：10775934
> 
> 赞同：1
> 
> 时间：2012-05-27T17:32:40.010
> 
> 标签：java, objectoutputstream

细节：

我的程序是一本包含 5 个班级的成绩册，这些班级全部汇总。GradeBook 有课程，Course 有 Categories，Category 有 Grades（所有 ArrayList）。我的程序还有一个 StateManager，它的唯一目的是因为深度聚合返回对对象的引用。在我的驱动程序中，我没有创建 GradeBook 的实例，而是创建了一个 statemanager，它有一个 GradeBook 的静态实例以及返回引用的方法。

我的目标是保存所有这些数据，以便在程序重新运行时重新打开。

问题：

当我编写文件时，我需要做的就是编写 StateManager 对象，对吗？我想我什至已经做到了这一点。我让程序创建一个“gradebook.data”文件。有没有办法在文本程序中打开 .data 文件并查看它是否正确写入？

在哪里使用输入流再次打开对象？在静态主方法中还是在初始化所有图形的方法的开头？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:09:39.313

序列化`StateManager`不会做任何事情，因为您`static`引用了`GradeBook`. 这本身就是一种代码异味，但在这里它具有没有被序列化的物理影响——只有*实例*字段被序列化。所以删除`static`限定符。您可以将其`StateManager`本身设为单例并`static`对其进行引用。

但是，我仍然怀疑您为什么不序列化`GradeBook`实例。那将是一种更合乎逻辑的方法。我们通常不会序列化服务对象，而是数据对象，并且您已经有了这种分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:46:28.837

在第一次使用之前，您需要在程序中“早期”的某个地方读取数据。在您的 StateManager 的初始化代码中可能是一个地方。

我不明白为什么“初始化所有图形的方法”会是一个合乎逻辑的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T17:46:52.947

不，没有文本编辑器会以正确的文本格式向您显示所有详细信息，因为您编写的是字节，并且您的文本编辑器希望您提供文本。

将对象从磁盘加载到内存 - 两种方法

1.  事先加载它们，从某种意义上说，在 main 方法中加载它们，如果你不使用它们，你从磁盘加载它们的努力是徒劳的，你使用了内存和 CPU，但没有进一步使用它。

2.  当您第一次访问它们时加载它们称为延迟加载，因此当您访问 StateManager 的静态方法时，如果您的对象为空，您将从磁盘加载它们。

题外话：

一篇[很好的文章](http://www.javaworld.com/community/node/2915)，详细解释了序列化。

# javascript - 有没有办法让代码块本身不阻塞

> ID：10775935
> 
> 赞同：2
> 
> 时间：2012-05-27T17:32:47.560
> 
> 标签：javascript, node.js

在大量使用 node 之后，我不得不习惯于以非阻塞方式编写代码，但是我可以做到这一点的主要方式是使用本身是异步的函数。例如：`stat(f,callback)`或者`forEach(array, callback)`他们会自动从我认为的主要执行高速公路中获取你给他们的任何回调，并在被调用后立即返回。

我想知道的是：**我怎样才能告诉 ECMA 引擎异步执行一个函数，不管它是什么？**

我的特殊用例涉及在 DOM childList 上迭代 for 循环以解析数千个元素；我的问题是所有其他元素都是我想跳过的文本节点。虽然我会使用`forEach()`这不是最好的，但我只看到`for(a,i=0;a=table[i];i=i+2){/*process 'a'*/}`能够纠正它，但代价是被阻塞。最好的行动方案是什么？

**额外的问题：** NodeJS 的编码实践在 JS 必须进行繁重工作的用例中是否在客户端应用程序中站稳脚跟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T17:47:07.873

注意：`Array.prototype.forEach`是同步的，不是异步的。JS 标准（[ECMAScript 第 5 版](http://es5.github.com/)）中定义的任何内容都不能是异步的，因为该标准没有定义异步语义（Node.js 和 DOM 有）。

您可以使用[`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout)（在浏览器和 Node.js 中工作）或[`process.nextTick`](http://nodejs.org/api/process.html#process_process_nexttick_callback)（特定于 Node.js）：

```
for (...) {
    doWorkAsync(...);
}

function doWorkAsync(...) {
    setTimeout(doWorkSync.bind(null, ...), 0);
}

function doWorkSync(...) {
    ...
} 
```

如果您选择利用闭包，则在使用自由变量时要小心，因为最终调用回调时变量可能会发生变化。

使用异步框架，例如[kriskowal 的 Q](https://github.com/kriskowal/q)（可跨 Node.js 和现代浏览器移植），您可以进行 mapreduce 风格的编程：

```
var Q = require('q');  // npm package 'q'

function getWorkloads() {
    var workloads = [ ];
    for (...) {
        workloads.push(Q.fcall(doWorkSync.bind(null, ...)));
    }
    return workloads;
}

Q.all(getWorkloads()).then(function (results) {
    // results array corresponds to
    // the array returned by getWorkloads.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:32:35.713

我在同一条船上。我有点喜欢 Node 的异步函数，所以我写了这个异步 For 和 ForEach 函数。它使用“setTimeout(Func,0);” 诡计。

这是图书馆：

```
 var WilkesAsyncBurn = function()
  {
    var Now = function() {return (new Date());};
    var CreateFutureDate = function(milliseconds)
    {
      var t = Now();
      t.setTime(t.getTime() + milliseconds);
      return t;
    };
    var For = function(start, end, eachCallback, finalCallback, msBurnTime)
    {
      var i = start;
      var Each = function()
      {
        if(i==-1) {return;} //always does one last each with nothing to do
        setTimeout(Each,0);
        var burnTimeout = CreateFutureDate(msBurnTime);
        while(Now() < burnTimeout)
        {
          if(i>=end) {i=-1; finalCallback(); return;}
          eachCallback(i);
          i++;
        }
      };
      Each();
    };
    var ForEach = function(array, eachCallback, finalCallback, msBurnTime)
    {
      var i = 0;
      var len = array.length;
      var Each = function()
      {
        if(i==-1) {return;}
        setTimeout(Each,0);
        var burnTimeout = CreateFutureDate(msBurnTime);
        while(Now() < burnTimeout)
        {
          if(i>=len) {i=-1; finalCallback(array); return;}
          eachCallback(i, array[i]);
          i++;
        }
      };
      Each();
    };

    var pub = {};
    pub.For = For;          //eachCallback(index); finalCallback();
    pub.ForEach = ForEach;  //eachCallback(index,value); finalCallback(array);
    WilkesAsyncBurn = pub;
  }; 
```

示例用法：

```
 WilkesAsyncBurn(); // Init the library
  console.log("start");
  var FuncEach = function(index)
  {
    if(index%10000==0)
    {
        console.log("index=" + index);
    }
  };
  var FuncFinal = function()
  {
    console.log("done"); 
  };
  WilkesAsyncBurn.For(0,2000000,FuncEach,FuncFinal,50); 
```

打印：索引=10000 索引=20000 索引=30000 等“完成”

如果有兴趣，请进行更多研究：

setTimeout 和 setInterval 的最小开销时间约为 2 到 10 毫秒，因此，触发数千或数百万个计时器将无缘无故地变慢。所以基本上，如果您需要在不锁定浏览器的情况下执行数千次或更多循环，您需要更像一个线程（喘气），并在设定的时间内“烧掉”一些代码，而不是设定的迭代次数。

# javascript - Phonegap：某些 Javascript 文件无法在设备上加载。应用程序在模拟器上运行

> ID：10775938
> 
> 赞同：1
> 
> 时间：2012-05-27T17:33:27.497
> 
> 标签：javascript, iphone, html, cordova

我已经追逐这个错误几个小时了。应用程序在模拟器中运行良好，但在设备上失败。我已经在这个应用程序上工作了几个星期，主要是使用模拟器进行调试。我等待设备就绪事件，然后运行以下命令：

```
function onDeviceReady() {
    setStylesheet();
    console.log("Device ready");
    try {
        startup();
    } catch (err) { console.log(err);}
} 
```

`startup`和`setStylesheet`函数分别通过以下脚本标签包含。

```
<script type="text/javascript" src="js/screens.js"></script>
<script type="text/javascript" src="js/stylesheets.js"></script> 
```

函数被`setStylesheet`触发，CSS 被应用到应用程序。启动功能不是。我在 XCode 控制台中收到以下消息：

```
2012-05-27 13:29:34.543 app[417:307] [INFO] {"message":
"Can't find variable: startup", "line":59, "sourceId":3807368, 
"sourceURL":"file:///var/mobile/Applications/hash/app.app/www/index.html",
"expressionBeginOffset":1141, "expressionCaretOffset":1148, "expressionEndOffset":1148} 
```

在模拟器中运行，一切正常。在 iPhone 上，会引发该错误。我检查了screens.js，只有警告。出现这种情况的可能原因是什么？

**编辑：**一位朋友建议这可能是一个竞争条件问题。我尝试动态添加 screen.js 脚本标签并使用`tag.onload`来调用该函数。但这似乎不是它，因为我仍然遇到同样的问题。`setStylesheet`也被转换为在 onload 被触发后调用，它仍然有效。

# mapping - biztalk xslt - 映射

> ID：10775940
> 
> 赞同：0
> 
> 时间：2012-05-27T17:33:43.647
> 
> 标签：mapping, biztalk

我是 bts 的新手 - 昨天刚开始，有一个“导师”给我一些概念 - 在使用 bts 工具进行第一次映射之后（在 Visual Studio 上提供）。现在正在辅导的人要求我手动执行此操作...我编写了自己的 xslt 文件。

因为我从来没有使用过 xslt，因为我有点迷路了。我有一个带有命名空间的“传入”xml，我想将其修改为具有不同命名空间的输出 xml。之后，我必须将值从一个 xml xml 直接传递到另一个 xml 和其他值，我必须求和或相乘。

传入 xml 命名空间 = [http://NWMessaging.CustomerOrder 传出](http://NWMessaging.CustomerOrder) xml 命名空间 = [http://FKMessaging.SupplierPO/](http://FKMessaging.SupplierPO/)

我不知道如何从第一个 xml 到第二个获取值。

有什么建议吗？

```
<?xml version="1.0" encoding="utf-8"?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T02:54:51.933

如果您在 Visual Studio 的 BizTalk Mapper 中创建映射，它可以为您生成 XSLT，这可能是开始了解 XSLT 如何工作的最佳方式。这使您可以查看名称空间将设置为什么，从输入到输出模式的链接节点是什么样的，等等。

在 Visual Studio 中：

*   转到*解决方案资源管理器*
*   右键单击您的地图文件 ([something].btm)
*   选择*验证地图*
*   VS 编译并运行验证后，“*输出*”窗格将显示“输出 XSLT”文件的位置

除非您要进行非常复杂的映射，否则您可能不需要非常了解 XSLT。如果您确实需要这样做，那么您可以随时[拿起一本书](https://stackoverflow.com/questions/4822075/best-book-to-learn-xslt)。

# android - Android SDK：获取原始预览相机图像而不显示它

> ID：10775942
> 
> 赞同：22
> 
> 时间：2012-05-27T17:33:53.647
> 
> 标签：android

我想用原始图像进行图像处理而不在屏幕上显示它，这显然会降低性能。

根据这个线程的答案，在[没有预览的情况下从相机拍照，](https://stackoverflow.com/questions/2386025/android-camera-without-preview)这在 Android 1.5 中是不可能的，但有人知道在 Android 4（API 级别 15）中是否可能吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-27T18:41:50.177

在 Android 4 中，接收原始图像数据而不将其显示在屏幕上的最简单方法是使用[Camera.setPreviewTexture()](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewTexture%28android.graphics.SurfaceTexture%29)调用将预览帧路由到 GPU。

您可以通过两种方式使用它：

1.  在 GPU 上进行实际处理：设置 OpenGL 上下文（[OpenGL ES 2 教程](http://developer.android.com/resources/tutorials/opengl/opengl-es20.html)），并在该上下文中创建[SurfaceTexture](http://developer.android.com/reference/android/graphics/SurfaceTexture.html)对象。然后将该对象传递给 setPreviewTexture，并开始预览。然后，在您的 OpenGL 代码中，您可以调用 SurfaceTexture.updateTexImage，与 SurfaceTexture 关联的纹理 ID 将更新为来自相机的最新预览帧。如果需要，您还可以使用 glReadPixels 将 RGB 纹理数据读回 CPU 进行进一步处理。
2.  在 CPU 上进行处理：您可以简单地创建一个虚拟 SurfaceTexture 对象，而无需设置任何 OpenGL 上下文。传递您想要的任何整数作为纹理 ID，并使用 setPreviewTexture 将 SurfaceTexture 连接到相机。只要您不调用 updateTexImage，SurfaceTexture 就会简单地丢弃相机传递给它的所有数据。[然后使用setPreviewCallback](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewCallback%28android.hardware.Camera.PreviewCallback%29)设置预览回调，并使用该数据（通常以 YUV 格式）进行 CPU 处理。这可能比 #1 效率低，但不需要了解 OpenGL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T15:15:59.457

因为我不允许评论。关于艾迪的回答。您需要在 NDK 中使用它，因为使用 Java 接口会抵消任何性能优势。从性能的角度来看，必须使用 PixelBuffer 绝对是疯狂的。您从 RGBA888 到 YUV 的转换也需要在 C 中完成。

不要尝试使用 TextureView 会更糟。在转换为 YUV 之前，您必须将像素复制到位图中，然后从位图复制到数组中。这本身就占据了全新 Nexus 7 2013 品牌近 30% 的 CPU 利用率。

最有效的方法是直接与 Camera.h 对话并绕过所有 Android API。您可以创建自己的缓冲区并在 YUV 数据进入其他任何地方之前对其进行拦截。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-20T20:04:04.460

在屏幕上显示预览不会对性能产生影响。在我遇到的所有设备上，相机输出都“连接”到不涉及 CPU 的表面或纹理，所有颜色转换和缩放都由专用硬件负责。

“隐藏”预览可能还有其他原因，但请记住，出于隐私和安全原因，API 最初的目的是确保最终用户看到从相机到达应用程序的任何内容。

# ios - 在 iPhone 应用程序中“捆绑”应用程序图像的最佳位置

> ID：10775944
> 
> 赞同：3
> 
> 时间：2012-05-27T17:34:20.853
> 
> 标签：ios, bundle, file-management

存储数十个，可能是数百个应该捆绑在 iPhone 应用程序中的 png 图像的最佳做法是在哪里？

是否有一种方法可以使用 UIImagePickerController 访问它们，还是我必须自己创建一些其他方法？

另外，捆绑它们的最佳做法是什么？应用内捆绑或让应用从服务器下载它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:31:29.673

如果您需要离线使用图像，我会将其放入您的应用程序包中。我会创建一个物理文件夹并将其拖到 Xcode 项目中，然后选择创建文件夹引用，它应该显示为蓝色文件夹图标。将所有 png 文件放在该文件夹中。

要获取该文件夹中所有文件的列表：

```
NSString *filesPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"pngfolder"];  // where pngfolder is the folder as described above.
NSArray *filesList = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:filesPath error:nil]; 
```

要读取索引 i 处的单个图像文件，例如在上面的 filesList 数组中：

```
NSString *sourcePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:[filesList objectAtIndex:i]];
UIImage *img = [[UIImage alloc]initWithContentsOfFile:sourcePath]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T17:41:17.730

所有大公司做的最好的方法是..将所有小图像作为一个大图像传输，然后在客户端渲染你想要的任何图像。

你可以找到很多很好的例子。我觉得这个很有趣[http://yuilibrary.com/yui/docs/dd/photo-browser.html#slider-and-stylesheet](http://yuilibrary.com/yui/docs/dd/photo-browser.html#slider-and-stylesheet) ..查看附带的 js 文件yui 包和所有图像捆绑为一个图像

# apache-flex - Flex 移动 TextInput 事件

> ID：10775946
> 
> 赞同：0
> 
> 时间：2012-05-27T17:34:25.210
> 
> 标签：apache-flex

我似乎无法从 Flex 移动应用程序中的 TextInput 控件触发任何事件。

```
<s:TextInput id="testInput" valueCommit="textInputHandler(event)" 
             touchEnd="textInputHandler(event)" 
             touchBegin="textInputHandler(event)"
             touchOut="textInputHandler(event)" 
             click="textInputHandler(event)"
             /> 
```

我最初只需要 ValueCommit 事件，但我无法让上面示例中列出的任何事件触发。

我在 Flash Builder 设备模拟器和实际的 Android 和 iPad 设备上进行了尝试，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:00:05.873

所以 TextInput.textDisplay 是用于移动设备的 StyleableStageText（与 RichEditableText 不同）。StyleableStageText 不会调度 ValueCommit 事件。我想您可以使用 RichEditableText 对其进行皮肤处理，但您会失去移动优化。

我最终使用了 FocusOut 事件来满足我的需要。

# box2d - AndEngine - 防止汽车碰撞，预见碰撞

> ID：10775948
> 
> 赞同：0
> 
> 时间：2012-05-27T17:34:32.707
> 
> 标签：box2d, collision-detection, andengine, collision

*   我正在构建一个汽车交通游戏，玩家将驾驶汽车避免碰撞，机器人汽车不应相互碰撞。
*   我为每辆以不同速度驾驶汽车的汽车都有一个更新处理程序，但我想不出一个代码可以在没有实际碰撞的情况下预测未来与同伴机器人汽车的碰撞..
*   我的代码应该做的是在当前汽车之前检查与汽车的碰撞，以便它可以改变车道以防止碰撞
    任何对 andengine 来说都是新的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:44:50.307

您可以在实际汽车前面使用传感器主体并检查其碰撞，然后当传感器主体发生碰撞时，汽车将防止碰撞。当然，之后您必须重置传感器，我相信一定有更优雅的解决方案。因此，我会将这个问题标记为移至 Stack Exchange 的游戏开发分支，那里的人对这类问题更有经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:25:51.057

这是一个 AI 问题，您实际上不需要预测碰撞。您只需要汽车遵循的一组规则，从而避免碰撞。试着弄清楚你是如何*避免*交通中的碰撞的。然后将这些规则应用于您的汽车。说起来容易做起来难。

例如，如果我的行驶速度比我前面的车快并且离得太近，我应该改变车道或减速。要对此进行编程，您可以检查 2 辆车之间的距离，确定后面的车是否比前面的车移动得更快。如果是这样，降低它的速度或尝试改变车道。

不要试图预测是否会发生碰撞。这很难，更难找出正确的反应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:42:35.533

最简单的方法是使用光线投射（或几个光线投射）来检测在特定方向上汽车的给定范围内是否有任何东西。

# c++ - 如何将 void* 放入 COM VARIANT 以便它被 COM-Interop 编组为 IntPtr 到 .NET？

> ID：10775953
> 
> 赞同：3
> 
> 时间：2012-05-27T17:35:01.913
> 
> 标签：c++, .net, com, marshalling, variant

如何将 void 指针（又名`void*`或句柄）放入 COM [`VARIANT`](http://msdn.microsoft.com/en-us/library/ms221627%28v=vs.85%29)-Type。包装类[`_variant_t`](http://msdn.microsoft.com/en-us/library/k74e1xsh%28v=vs.80%29.aspx)将其错误地转换为布尔值。但我需要将它作为指针放入，以便 .NET 的 COM-Marshaller 将其识别为[`IntPtr`](http://msdn.microsoft.com/en-us/library/system.intptr%28v=vs.80%29.aspx).

我读过的主题[之一是 MSDN Social](http://social.msdn.microsoft.com/Forums/en/clr/thread/3591cce9-e0f1-4c4e-8ad3-5952e9114ede)上的主题。他们提出了这样的解决方案：

```
VARIANTARG Arg; 
VariantInit(&Arg);
V_VT(&Arg) = VT_INT;
V_INT(&Arg) = (int)m_hWnd; 
```

这个解决方案的问题是，`V_INT`(member `intVal`) 是一个[32 位整数](http://msdn.microsoft.com/en-us/library/3b2e7499%28v=vs.80%29.aspx)并强制指针为 32 位指针。换句话说：*我不能传输 64 位指针。*有没有解决这个问题的办法？还有其他方法可以将其作为 64 位整数传输吗？

我已经通过一些代码对此进行了测试。因此，我使用一个 .NET 方法来接收任何内容`System.Object`并输出其值和类型。

```
public static void TakePtr(object ptr)
{
    Console.WriteLine("Received a " + ptr.GetType() + " with value " + ptr);
} 
```

My`VARIANT`填充了兼容性，`v.llVal = 0; v.byref = myPointer;`因此它应该始终正确编译关于 32/64 位指针。此外，我需要设置变体类型，以便 .NET 将其映射到`System.IntPtr` *不强制转换*。（因为对于真正的程序集，我无法更改代码，也不想包装它。这会增加主要的复杂性。）。

*   .NET`System.IntPtr`向后传输一个 as `VT_INT`，将映射前向`System.Int32`.
*   `VT_I8`映射到`System.Int64`但不是`System.IntPtr`。

那么什么`VARENUM`标志会指定一个`System.IntPtr`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T17:48:48.460

这是不可能的，VARIANT 是一种自动化类型。自动化不喜欢处理指向未知类型的指针，没有安全的方法来取消引用它们。唯一支持的指针类型是 IUnknown* 和 IDispatch*，接口指针。

充其量你可以将它存储为一个 VT_I8 编组为一个长。然后您可以将其转换为 IntPtr。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T14:07:55.920

目前我找到了解决全部问题的临时解决方案：为了在调用方法时显式定义参数类型，我将使用另一种调用机制。因此我使用以下方法，它几乎包装了类型调用方法的参数，但另外检查类型并相应地转换它们，以便 a`System.IntPtr`被识别为此类而不是`System.Int32`or `System.Int64`。

```
public static object InvokeMember(this Type type, object obj, String name, System.Reflection.BindingFlags invokeAttr, Type[] argTypes, object[] argValues)
{
    if (argTypes.Length != argValues.Length) throw new InvalidOperationException("Mismatching count of types an parameters.");
    for (int i = 0; i < argTypes.Length; i++) if (argTypes[i] == typeof(IntPtr)) argValues[i] = new IntPtr(Convert.ToInt64(argValues[i]));
    return type.InvokeMember(name, invokeAttr, null, obj, argValues);
} 
```

调用此方法可能如下所示：

```
typeof(ExampleLib.HelloNET).InvokeMember(
    null,
    "TakePtr",
    BindingFlags.Static | BindingFlags.Public | BindingFlags.InvokeMethod,
    new Type[] { typeof(IntPtr) },
    new object[] { 42 }); 
```

最后，必须从 COM 使用它来传递指针 VARIANT，如所述填充：`v.llVal = 0; v.byref = myPointer; v.vt = VT_INT;`

/解决了 ：-）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T18:51:03.520

变体的`PVOID byref;`成员看起来很有帮助。但我不确定应该设置什么类型来伴随它。

您可以`LONGLONG llVal`按照 Hans 的建议使用，因为即使是 32 位平台也有`IntPtr(Int64)`构造函数。应该可以工作，直到有人发明 128 位指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T19:06:28.217

我有一个类似的问题。当 64 位指针放入 PVOID 变体类型时，它会被截断/编组为 32 位指针！所以我然后使用了 VT_I8 变体类型并将指针放入它的 llVal 成员中，一切都很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T20:39:58.253

我使用 VT_VOID 和 byref 参数几乎没有任何问题。几乎是因为在某些情况下，.NET 会引发关于从本机到托管对象的错误转换的 MDA 错误（InvalidVariant 错误）

我还无法检查问题是否出在 byref 为 0 时，因为它并不总是出现。:)

# c++ - C++中的三维向量

> ID：10775955
> 
> 赞同：1
> 
> 时间：2012-05-27T17:35:29.663
> 
> 标签：c++

我的 C++ 代码中有：

```
 typedef vector<int> cards;
  typedef vector<cards> rows;
  typedef vector<rows> matriz; 
```

在我的 中`int main()`，我尝试用这条线启动一个名为“cartas”的矩阵；

```
 63  cin>>n>>m;
  66  cartas(n,rows(m, cards(0))); 
```

但是，使用 g++，可以解决这个错误：

```
flip.cpp: In function ‘int main()’:
flip.cpp:66: error: no match for call to ‘(matriz) (int&, rows)’ 
```

我想取一个矩阵`n*m`，其中每个位置都有整数向量。

谢谢，现在，我不明白它如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T17:42:18.203

您的代码是否类似于：

```
int n, m;
matriz cartas;
cin>>n>>m;
cartas(n,rows(m, cards(0))); 
```

?

那行不通，`matriz cartas;`已经是初始化了。`cartaz`要么在语句之后定义，要么在之后`cin`赋值。

最佳：

```
int n, m;
cin>>n>>m;
matriz cartas(n,rows(m, cards(0))); 
```

选择：

```
int n, m;
matriz cartas;
cin>>n>>m;
cartas = matriz(n,rows(m, cards(0))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T17:41:09.573

为什么不直接设置一个大小为 n*m vector[] 的数组。您可以将每一行作为索引 % n 并将列作为索引 % m。更简单，更清洁。

# objective-c - ObjectiveC 字符串字面量的权威描述？

> ID：10775956
> 
> 赞同：3
> 
> 时间：2012-05-27T17:35:30.333
> 
> 标签：objective-c, documentation, nsstring, standards

Apple [ObjectiveC 描述](http://developer.apple.com/documentation/cocoa/conceptual/objectivec/objc.pdf)通过显示示例暗示 NSStrings 存在，并且 NSString 文字被写为

```
 @ "<string content>" 
```

令人惊讶的是，这就是它所说的全部内容，而这些仅出现在示例中而没有任何讨论。该文件真的是唯一的参考文件吗？

翻来覆去，我发现[这个博客](http://blog.ablepear.com/2010/07/objective-c-tuesdays-string-literals.html)似乎有很多有用的信息。但这样做对吗？

是否有权威文档准确描述了一个人在 NSString 文字中可以说什么（语法），以及它的含义（语义）？例如，NSString 文字内容的语法是否与 C(99) 字符串文字内容的语法相同？ObjectiveC ++中的语法是否不同？我可以像其他类型的 C99/C++ 字符串一样为字符串文字内容添加宽度规范，还是只有一种 NSString 文字？什么是黑暗角落？

还是我唯一的选择是深入研究 GCC4 和 Clang 的实现以找出答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:07:58.080

考虑到文档和随机博客之间的选择，我倾向于相信文档。

写的不多，因为没什么可说的； `@".."`是一个静态字符串常量。它在编译时创建，写入二进制文件中以只读方式映射到内存中，甚至比`NSString`实例本身更不可变（例如，常量 NSString 根本不实现保留计数；没有分配）。

除了编译器对普通旧 C 字符串使用的正常语法外，没有与它们相关的真正语法。即你可以做大部分的各种stringification gunk，等等......

# c++ - 使用升压缓冲器进行操作

> ID：10775957
> 
> 赞同：0
> 
> 时间：2012-05-27T17:35:35.860
> 
> 标签：c++, boost, buffer, stdstring

我正在用流协议编写服务器，所以我需要做一些事情，比如找到标题的结尾，复制它，然后解析提升缓冲区中的其他东西。当我发现使用字符串进行操作（在其中查找字符串、使用迭代器复制/删除等）的最佳方法是 std::string。但我正在使用 char 数组缓冲区。所以我需要有两个缓冲区 - char 数组和 std::string - 每次我需要使用缓冲区进行操作时，我都需要将 char 数组转换为 std::string，做我的事情，然后将其转换回来使用 std::string.c_str() 转换为 char 数组。我发现的另一种方法是使用 streambuf（正如我在上一个问题中所问的那样），然后为其创建[istream](https://stackoverflow.com/questions/10764986/use-streambuf-as-buffer-for-boost-asio-read-and-write) /ostream 并将其中的内容填充到 std::string （如[文档](http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/reference/streambuf.html)中所示）。使用 streambuf 我需要：
streambuf
mutable_buffers_type
istream
ostream
和 std::string
但是使用 char 数组和 std::string 我只需要：
char array
std::string

所以我认为使用 streambuf 是浪费内存（我需要为每个连接创建缓冲区）。我可以使用 std::string 作为增强缓冲区吗？但是我认为可能有更好的方法来做到这一点。你能给我一个建议吗？

编辑：

我需要用我的缓冲区做这样的事情，但是 char 数组不提供像 std::string (erase, substr, ...) 这样的功能，所以我需要使用 std::string 作为缓冲区。将其用作 boost::buffer 的最佳方法是什么，或者像此代码那样解析的最佳方法是什么？

```
#include <iostream>

int main(int argc, char* argv[])
{

    //"header" is header
    //"end" is marking that this point is end of header
    //"data" is data after header
    //this all is sent in one packet which I receive to buffer
    //I need to fill "headerend" to std::string header and then remove "headerend" from begining of buffer
    //then continue parsing "data" which stay in buffer

    std::string buffer = "headerenddata"; //I receive something like this
    std::string header; //here I'll fill header (including mark of end of header)

    //find end of header and include also mark of end of header which is "end" (+3)
    int endOfHeader = int(buffer.find("end"))+3; 

    //fill header from buffer to string header
    header = buffer.substr(0, endOfHeader);

    //delete header from input buffer and keep data in it for next parsing
    buffer.erase(buffer.begin(), buffer.begin()+endOfHeader); 
    //will be just "data" becouse header and mark of header are removed
    std::cout << buffer << std::endl; 
    //will be "headerend" which is "header" and mark end of header which is "end"
    std::cout << header << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T18:14:20.037

您可以将`std::string`其用作参数来构造`boost::asio::buffer`. 不过，我通常使用 char 向量 ( `std::vector<char>`)。我认为处理它更容易，但这可能真的取决于其余代码的设计方式。

您也可以使用[C++11 数组](http://en.cppreference.com/w/cpp/container/array)。它的行为类似于向量，但它静态分配空间（即，一旦创建数组，底层缓冲区的大小就不能改变）。在某些情况下，这可能会给您带来一些性能优势。如果你不能使用 C++11，Boost 还包含一个非常相似的类。

`boost::asio::buffer`也接受普通的 char 数组 ( `char buf[SIZE]`)，但如果可能的话，使用前面提到的选项可能更方便。

作为参考，这里是[`boost::asio::buffer`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/buffer.html).

**更新：**为了避免从`char[]`to的转换`string`，您可以使用 a`vector`来接收和处理缓冲区（使用 a`string`来接收缓冲区也可能有效，但我从未尝试过）。

因此，对于接收，您可以执行以下操作：

```
vector<char> msg(N);
...
asio::read(socket, asio::buffer(msg), asio::transfer_at_least(N), ec); 
```

然后，为了处理数据包并拆分标头和数据，您可以使用迭代器，避免代码（`substr`和`erase`）中具有 O(n) 复杂性的操作。当然`find`（或`search`在我的示例中）无法避免：

```
string end_marker = "end";
auto it = search(msg.begin(), msg.end(), end_marker.begin(), end_marker.end());

process_header(msg.begin(), it + 2);
process_data(it + 3, msg.end()); 
```

# perl - 如何使用 WWW::Mechanize 检查复选框？

> ID：10775965
> 
> 赞同：3
> 
> 时间：2012-05-27T17:37:22.317
> 
> 标签：perl, checkbox, www-mechanize

我阅读了 Perl`WWW::Mechanize`模块，这是语法：

```
$mech->tick( $name, $value [, $set] ) 
```

但是，当我检查网页的页面源时，我发现这是：

```
<div class="key-name" title="GLOBAL_PROCESSING">GLOBAL_PROCESSING</div>
    <div class="col-50 col-left">
    <div class="string-controls">
    <a href="#" class="control-expand-toggle"></a>
    <a href="#" class="control-activity-toggle ">0</a>
    <input type="checkbox" class="control-select-string">
    </div> 
```

我没有看到复选框字段的 ID 和值。我该怎么做？

此外，复选框不是任何形式的一部分。如何在 Mechanize 中引用此复选框？

**HTML 代码**

```
<div id="edit-controls-leftside" class="clear-fix">
<div class="col-left">
<label>
<input id="select-all-visible" class="" type="checkbox">
&nbsp;Select all visible
</label>
<a id="expand-all" class="blue-on-dark-blue text-link arrow-leftside-down"     href="#">Show key names</a>
<a id="show-modify-nav" class="blue-on-dark-blue text-link arrow-leftside-right disabled" href="#">Modify selected...</a>
<nav id="modify-nav" style="display: none;">
<a id="show-order-translation" class="sub-nav-item" href="#">Order translations</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:37:01.503

```
$mech->tick( 'name' => undef ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:00:43.573

你为什么要这样做？

因为复选框没有名称或值，所以它不会成为任何提交的一部分，即使它是表单的一部分，但它不是。

您认为 JavaScript 使用复选框来切换其他复选框吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T18:03:36.600

以下是使用 perl 检查没有值的复选框的一些解决方法`Mechanize`。

来自机械化[手册。](http://search.cpan.org/~petdance/WWW-Mechanize-1.66/lib/WWW/Mechanize/FAQ.pod#How_do_I_check_a_checkbox_that_doesn%27t_have_a_value_defined?)

如何检查未定义值的复选框？

将其设置为“on”的值。

```
$mech->field( my_checkbox => 'on' ); 
```

在这里找到另一个选项[。](http://cpanforum.com/threads/2952)

```
$form->find_input('checkbox_id')->check(); 
```

唯一的问题是您的复选框也没有名称/ID。希望其他人可以加入如何使用名称/ID 以外的其他内容来获取复选框。我会继续寻找。

编辑：

您也许可以使用：

```
$mech->find_all_inputs( ... criteria ... ) 
```

按类型和/或类名定位复选框，因为它没有名称或 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T13:42:33.783

使用中的[方法`check`。`HTML::Form`](http://p3rl.org/HTML%3a%3aForm#input-check)文档引用：

> 一些输入类型表示可以打开/关闭的切换。这包括“复选框”和“选项”输入。调用此方法将打开此输入，而无需知道值名称。

适用于您的 HTML 的代码：

```
my $w = WWW::Mechanize->new;
$w->get('file:///tmp/10775965.html');
[$w->forms->[0]->inputs]->[0]->check; 
```

# less - 仅覆盖 Mixin 中的基本参数

> ID：10775967
> 
> 赞同：1
> 
> 时间：2012-05-27T17:37:25.923
> 
> 标签：less, less-mixins

简单的问题。我刚开始较少关注 CSS 构建，我偶然发现了这个困境：

```
.fontcase (@family:'helvetica',@size:1em,@fontweight:300,@color:#ffffff) {   
    font-family: @family Arial  sans-serif;   
    font-size:@size;   
    font-weight:@fontweight;   
    color:@color; 
}

#ex-topnav-items {
     .fontcase(@fontweight:700);

     margin:5px;   
     line-height: 1.5em;
     letter-spacing: 1px; 
} 
```

我只想覆盖 mixins 中的某个参数，但这似乎不是正确的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:51:07.773

该格式正确且受支持，但仅限于 less.js 的主分支（将包含在 1.3.0 之后的版本中）和 dotless（来自更早的版本 - dotless 是 ac# 端口）。

所以，等等，使用 less.js 的主分支或者使用 dotless..

# php - PHP-file_put_contents。如何抑制它的输出？

> ID：10775968
> 
> 赞同：0
> 
> 时间：2012-05-27T17:37:46.367
> 
> 标签：php

当我尝试使用 file_put_contents 创建文件时，它也会直接在浏览器中输出文件。

代码：

```
file_put_contents($file, utf8_encode($seite)); 
```

有没有办法抑制这个输出？文档似乎没有解决方案:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T17:40:09.447

它不会向客户端发送任何内容。如果您将文件内容输出到其他地方，请检查您的代码。也许`echo`你忘了删除？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T17:41:48.297

UTF-8 和 file_put_contents 不起作用，试试这个：

```
<?php
$f = fopen($file, 'w+');
fwrite($f, $seite);
fclose($f);
?> 
```

# google-apps-script - 使用 Google 电子表格访问 BigQuery

> ID：10775975
> 
> 赞同：6
> 
> 时间：2012-05-27T17:39:57.917
> 
> 标签：google-apps-script, google-bigquery

我在互联网上查看如何在 google 电子表格中导入 bigquery 数据。我找到了这个 appscript 示例，但它不起作用 API 不在同一级别，我没有找到如何在 appscript 中使用 API2 或 API@beta1 进行查询。

```
function runQuery() {
  var ss = SpreadsheetApp.getActive();
  var range = ss.getRangeByName('query');
  var query = range.getCell(1, 1).getValue();
  //var results = bigquery.query(query);

  var header = ss.getRangeByName('header');
  header.clearContent();
  var output = ss.getRangeByName('output');
  output.clearContent();
  for (var i = 0; i < results.fields.length; i++) {
    var field = results.fields[i];
    header.getCell(1, 1 + i).setValue(field.id);
  }
  for (var i = 0; i < results.rows.length; i++) {
    var row = results.rows[i].f;
    for (var j = 0; j < row.length; ++j) {
      output.getCell(1 + i, 1 + j).setValue(row[j].v);
    }
  }
} 
```

提前感谢您的想法，

GQ

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T23:27:54.330

**更新：我们刚刚添加了一个新的 BigQuery + Apps 脚本教程，它应该会引导您在此处完成此问题的答案：** [https ://developers.google.com/apps-script/articles/bigquery_tutorial](https://developers.google.com/apps-script/articles/bigquery_tutorial)

@GQuery：我们最近更新了 AppsScript 以访问最新的 BigQuery API 版本 (v2)。这是一个简单的入门示例，将在 AppScript 日志中显示结果。我们正在对 AppScript/BigQuery 文档进行更新。

```
function runQuery() {
  var projectId = 'YOUR PROJECT';
  var sql = 'select word, word_count from publicdata:samples.shakespeare limit 100';
  var queryResults;

  // Run the query
  try {
    queryResults = BigQuery.Jobs.query(projectId, sql);
  }
  catch (err) {
    Logger.log(err);
    return;
  }

  // Loop until successful job completion
  while (queryResults.getJobComplete() == false) {
    try {
      queryResults = BigQuery.Jobs.getQueryResults(projectId, queryResults.getJobReference().getJobId());
    }
    catch (err) {
      Logger.log(err);
      return;
    }
  }

  var tableRows = queryResults.getRows();
  for (var i = 0; i < tableRows.length; i++) {
    var rowString = '';
    var cols = tableRows[i].getF();
    for (var j = 0; j < cols.length; j++) {
      rowString += cols[j].getV() + '\t';
    }
    Logger.log(rowString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T16:12:30.697

我没有评论 hurricaneditka16 的声誉。因此，我发布了这个答案：这条线

```
queryResults = BigQuery.Jobs.query(projectId, sql); 
```

应该替换为

```
.query(
    resource,
    projectId); 
```

资源是对你之前使用的 sql 的轻微改造。试试这个转换，它会起作用。

```
function getResource(sql) {
  var resource = '{"query": "sql"}'
  resource = resource.replace('sql', sql);
  return resource
} 
```

# android - appwidget 横向缩放问题

> ID：10775991
> 
> 赞同：1
> 
> 时间：2012-05-27T17:42:59.547
> 
> 标签：android, widget

我正在不同的配置和设备下测试我的小部件。在我尝试过的所有设备（160dp，240dp ...等）中，它在纵向模式下看起来都不错

但是，在横向模式下我遇到了问题。最后一行文本被稍微剪掉了，所以我创建了 layout-land 并针对横向进行了自定义。

一切似乎都很好，直到我在 160dp 模拟器上测试：最后一行文字完全消失了！（对于文本大小，我使用的是倾角单位。）

你们是如何解决这个问题的？我的意思是，在 240dp 设备上它看起来不错，而在 160dp 上，最后一行被完全剪掉了。

谢谢你。

# android - 使用此类时应用程序关闭

> ID：10775995
> 
> 赞同：1
> 
> 时间：2012-05-27T17:43:59.833
> 
> 标签：android, sqlite, logcat

当我打开此类时，我的应用程序将关闭。logcat 说第 28 行有问题，但上面的代码是我从[这里](https://stackoverflow.com/questions/10768119/getting-data-from-sqlite-database-to-string-android)的一个问题中得到的，这个类的代码如下

```
public class WorkoutProgress extends ListActivity {
private DataBaseHelper datasource;
TextView goal; 
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.    FLAG_FULLSCREEN);
setContentView(R.layout.progress);
goal = (TextView)findViewById(R.id.goal);
datasource = new DataBaseHelper(this);
datasource.open();
Cursor c = datasource.getAllGoals();
startManagingCursor(c);
if(c.getCount() > 0)
{
String g = c.getString(1);
int g2= c.getInt(2);
int g3 = c.getInt(3);
String Goal = (g+g2+g3);
goal.setText(Goal);
}
fillData();
datasource.close();
}
private void fillData() {
// Get all of the notes from the database and create the item list
   Cursor c = datasource.getAllActs();
    startManagingCursor(c);
    String[] from = new String[] {DataBaseHelper.KEY_DATE,  
    DataBaseHelper.KEY_STEPS,DataBaseHelper.KEY_CALs };
    int[] to = { R.id.code, R.id.Days, R.id.BMI };
    SimpleCursorAdapter notes = new SimpleCursorAdapter (this, R.layout.notes_row, c,  from, to);
   setListAdapter(notes);               
 }

     /*public void add(View view)
     {
         //Do nothing
     }
     public void delete(View view)
     {
             datasource.open();
             datasource.deleteFirst();
             fillData();
             datasource.close();
     }*/
} 
```

logcat 是

```
05-27 17:39:08.531: E/AndroidRuntime(369): FATAL EXCEPTION: main
05-27 17:39:08.531: E/AndroidRuntime(369): java.lang.RuntimeException: Unable to start  activity ComponentInfo{com.b00348312.workout/com.b00348312.workout.WorkoutProgress}: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
05-27 17:39:08.531: E/AndroidRuntime(369):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-27 17:39:08.531: E/AndroidRuntime(369):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-27 17:39:08.531: E/AndroidRuntime(369):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-27 17:39:08.531: E/AndroidRuntime(369):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-27 17:39:08.531: E/AndroidRuntime(369):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-27 17:39:08.531: E/AndroidRuntime(369):  at android.os.Looper.loop(Looper.java:123)
05-27 17:39:08.531: E/AndroidRuntime(369):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-27 17:39:08.531: E/AndroidRuntime(369):  at java.lang.reflect.Method.invokeNative(Native Method)
05-27 17:39:08.531: E/AndroidRuntime(369):  at java.lang.reflect.Method.invoke(Method.java:521)
05-27 17:39:08.531: E/AndroidRuntime(369):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-27 17:39:08.531: E/AndroidRuntime(369):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-27 17:39:08.531: E/AndroidRuntime(369):  at dalvik.system.NativeStart.main(Native Method)
05-27 17:39:08.531: E/AndroidRuntime(369): Caused by: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
05-27 17:39:08.531: E/AndroidRuntime(369):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
05-27 17:39:08.531: E/AndroidRuntime(369):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
05-27 17:39:08.531: E/AndroidRuntime(369):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
05-27 17:39:08.531: E/AndroidRuntime(369):  at com.b00348312.workout.WorkoutProgress.onCreate(WorkoutProgress.java:28)
05-27 17:39:08.531: E/AndroidRuntime(369):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-27 17:39:08.531: E/AndroidRuntime(369):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-27 17:39:08.531: E/AndroidRuntime(369):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T18:00:40.887

`Index -1 requested, with a size of 1`- 这是因为光标指向第一个数据行的“之前”。你需要使用`c.moveToFirst()`...

```
if(c.getCount() > 0)
{
    c.moveToFirst()
    String g = c.getString(1);
    ...
} 
```

A`Cursor`最初将始终设置为指向第一个结果（索引 -1）的“之前”，因为并非所有查询都会返回任何数据。如果有结果，第一个结果（数据行）位于索引 0，这就是为什么`moveToFirst()`在尝试从`Cursor`

# rspec - RSpec 无法加载我的非 ActiveModel 模型类

> ID：10775996
> 
> 赞同：0
> 
> 时间：2012-05-27T17:44:14.390
> 
> 标签：rspec, rspec-rails

我是在 Rails 应用程序中使用 RSpec 的新手，我无法让 RSpec 看到我的模型 :(

我在我的`Gemfile`

```
group :development, :test do
  gem 'rspec-rails'
end 
```

并安装它

```
rails generate rspec::install 
```

然后我`facebook_page.rb`在目录中创建了一个文件`app/models/`，它**不是**ActiveModel

```
class FacebookPage
  class << self
    # define class variables
    attr_accessor :app_id
    attr_accessor :app_secret
  end
end 
```

现在我正在尝试测试它，所以我添加了一个`facebook_page_spec.rb`in`spec/models/`目录

```
describe FacebookPage do
  describe ".app_id" do
    it "should return the FB_APP_ID environment variable and thus not be null" do
      FacebookPage.app_id.should_not be_empty 
    end
  end
end 
```

但是当我跑步时

```
bundle exec rake spec 
```

我收到以下错误：

```
/home/geoffroy/.rvm/rubies/ruby-1.9.3-p194/bin/ruby -S rspec ./spec/models/facebook_page_spec.rb
/home/geoffroy/dev/mybandpage/spec/models/facebook_page_spec.rb:1:in `<top (required)>': uninitialized constant FacebookPage (NameError) 
```

RSpec 似乎没有加载我的模型文件。是因为它不是 ActiveRecord 的子类吗？我该如何解决？

非常感谢，最好的

杰弗里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T21:34:32.563

你有一个错字`rails generate rspec::install`（双冒号）尝试使用`rails generate rspec:install`。还尝试使用以下命令运行测试`bundle exec rspec spec`。

你`require "spec_helper"`参加考试了吗？

附言。这段代码是错误的：

```
class FacebookPage
  class << self
    # define class variables
    attr_accessor :app_id
    attr_accessor :app_secret
  end
end 
```

基本上在这个例子中，你在单例类上定义实例变量，尝试使用这种方法：[http ://apidock.com/rails/Class/cattr_accessor](http://apidock.com/rails/Class/cattr_accessor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-26T16:39:06.023

对我来说，它不包括`require 'rails_helper'`在规范的开头。

# vba - VBA 将 MS WORD 表从 11 列编辑到 6 列

> ID：10775997
> 
> 赞同：2
> 
> 时间：2012-05-27T17:44:18.700
> 
> 标签：vba, ms-word

我有许多需要编辑的带有 11 个列的 MS Word 表格。

每个文档将包含 1 个表格。

我想将表格从 11 列编辑到 6 列。

VBA 执行以下任务：

1.  将 col 2 标题从 Time 重命名为 Item
2.  将 col 3 标题从 Time Zone 重命名为 Comment
3.  将第 5 列标题从 Type 重命名为 E 或 A

4.  删除第 2、3 和 5 列中的所有文本（不是重命名的标题）

5.  删除第 6、7、9、10、11 列

我已经按照我认为最有效的方式列出了编辑表格的顺序，但这并不重要。

我不知道是否可以在不删除标题的情况下删除第 2、3、5 列中的文本。

最后，我想我可以在第 2、3、5 列中输入我想要的新标题，如果这些标题在这些列中的文本被删除时被删除。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-24T16:57:14.783

希望这可以帮助，

```
Option Explicit

Private Sub myTableMacro()
    Dim tmpTable As Word.Table, tmpRange As Word.Range
    With ActiveDocument
        If .Tables.Count > 0 Then
            For Each tmpTable In .Tables
                    'Rename col 2 heading from Time to Item
                tmpTable.Cell(1, 2).Range.Text = "Item"
                    'Rename col 3 heading from Time Zone to Comment
                tmpTable.Cell(1, 3).Range.Text = "Comment"
                    'Rename col 5 heading from Type to E or A
                tmpTable.Cell(1, 5).Range.Text = "E or A"
                    'Delete all text in cols 2, 3 (but not the headers)
                Set tmpRange = .Range(tmpTable.Cell(2, 2).Range.Start, tmpTable.Cell(tmpTable.Rows.Count, 3).Range.End)
                tmpRange.Select
                Selection.Delete Unit:=wdCharacter, Count:=1
                    'Delete all text in cols 5 (but not the headers)
                Set tmpRange = .Range(tmpTable.Cell(2, 5).Range.Start, tmpTable.Cell(tmpTable.Rows.Count, 5).Range.End)
                tmpRange.Select
                Selection.Delete Unit:=wdCharacter, Count:=1
                    'Delete cols 10, 11
                Set tmpRange = .Range(tmpTable.Cell(1, 9).Range.Start, tmpTable.Cell(1, 11).Range.End)
                tmpRange.Select
                Selection.Cells.Delete wdDeleteCellsEntireColumn
                    'Delete cols 6, 7, 9
                Set tmpRange = .Range(tmpTable.Cell(1, 6).Range.Start, tmpTable.Cell(1, 7).Range.End)
                tmpRange.Select
                Selection.Cells.Delete wdDeleteCellsEntireColumn
            Next 'tmpTable
        End If
    End With
    Set tmpRange = Nothing
    Set tmpTable = Nothing
End Sub 
```

我测试过，发现OK。

# java - java.net.SocketTimoutException FTP WLAN

> ID：10775999
> 
> 赞同：0
> 
> 时间：2012-05-27T17:44:28.317
> 
> 标签：java, android, ftp, wifi

我的 FTPClient 上有一个严重的问题，它在固定电话上运行良好，但是当我尝试在我的 Android 无线设备上使用相同的实现时，我的连接就卡住了。

我已经在 Android 应用程序上部署了我的代码，结果很糟糕。有时我可以下载我的文件，有时我只能下载到 40% 并且连接超时并出现 java.net.SocketTimoutException。我这里有一个例外：

```
05-27 19:37:49.390: DEBUG/SntpClient(1290): request time failed: java.net.SocketTimeoutException: Connection timed out

05-27 19:32:55.417: WARN/System.err(5129): java.net.SocketTimeoutException
05-27 19:32:55.467: WARN/System.err(5129):     at org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:564)
05-27 19:32:55.467: WARN/System.err(5129):     at org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:88)
05-27 19:32:55.467: WARN/System.err(5129):     at java.io.InputStreamReader.read(InputStreamReader.java:275)
05-27 19:32:55.467: WARN/System.err(5129):     at java.io.BufferedReader.fillBuf(BufferedReader.java:155)
05-27 19:32:55.467: WARN/System.err(5129):     at java.io.BufferedReader.read(BufferedReader.java:261)
05-27 19:32:55.467: WARN/System.err(5129):     at org.apache.commons.net.io.CRLFLineReader.readLine(CRLFLineReader.java:58)
05-27 19:32:55.467: WARN/System.err(5129):     at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:310)
05-27 19:32:55.467: WARN/System.err(5129):     at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:290)
05-27 19:32:55.467: WARN/System.err(5129):     at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:479)
05-27 19:32:55.467: WARN/System.err(5129):     at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:552)
05-27 19:32:55.467: WARN/System.err(5129):     at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:601)
05-27 19:32:55.475: WARN/System.err(5129):     at org.apache.commons.net.ftp.FTP.abor(FTP.java:754)
05-27 19:32:55.475: WARN/System.err(5129):     at org.apache.commons.net.ftp.FTPClient.abort(FTPClient.java:2432)
05-27 19:32:55.475: WARN/System.err(5129):     at src.app.asyncTasks.ftp.DownloadFTPFilesTask$2.onClick(DownloadFTPFilesTask.java:186)
05-27 19:32:55.475: WARN/System.err(5129):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
05-27 19:32:55.475: WARN/System.err(5129):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-27 19:32:55.475: WARN/System.err(5129):     at android.os.Looper.loop(Looper.java:143)
05-27 19:32:55.475: WARN/System.err(5129):     at android.app.ActivityThread.main(ActivityThread.java:4717)
05-27 19:32:55.483: WARN/System.err(5129):     at java.lang.reflect.Method.invokeNative(Native Method)
05-27 19:32:55.483: WARN/System.err(5129):     at java.lang.reflect.Method.invoke(Method.java:521)
05-27 19:32:55.491: WARN/System.err(5129):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
05-27 19:32:55.491: WARN/System.err(5129):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
05-27 19:32:55.491: WARN/System.err(5129):     at dalvik.system.NativeStart.main(Native Method)
05-27 19:32:55.522: WARN/InputManagerService(1290): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@45a93758 
```

我只是找不到原因。服务器似乎只是停止响应。有什么我可以设置的选项吗？我已经尝试过 SOTimeout，但我似乎更像是溢出之类的。文件下载在任何地方停止，但我没有完成。

编辑：

我正在使用 apache commons 连接到 Acitve FTP 服务器。也许 ServerSocket 崩溃或只是超时......？我正在考虑实现自己的服务器工厂，但不知道如何实现。我在 Motorola Milestone 上使用 Android 2.1。