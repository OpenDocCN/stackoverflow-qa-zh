# StackOverflow 问答 11457000-11457999

# c++ - VS2008 C++编译与VS6相比巨大的OBJ文件

> ID：11457001
> 
> 赞同：10
> 
> 时间：2012-07-12T17:09:00.293
> 
> 标签：c++, visual-studio-2008, object, size

我们有一个大型项目，大约 300 个 DLL 中有超过 100 万行代码。到目前为止，我们一直在使用 VS6。

我现在已经将所有内容都转换为 VS2008，所有编译、链接，更重要的是 - 运行！

==>但是...生成的编译后的 OBJ 文件要大 10 倍，并且链接非常慢，链接器经常会达到 >1GB 的内存。

部分含义是我需要用 /bigobj 编译某些项目。

结果是从桌面上的大约 1:45 到 3h 的构建。DLL 和 LIB 的大小与旧 VS6 版本中的大小大致相同。

我已经阅读了所有可以在这里找到的内容，但没有找到解决此问题的方法。如果它是额外的调试信息 - 我不想要它。我以前受够了。释放的大小增加了，但没有那么多......

有人有什么想法吗？还是我唯一的选择是将项目分解成更小的单元？重构是我唯一的希望吗？！当然，我错过了一个秘密标志......

* * *

**Edit1 (13/07/2012 12:20BST)** 我比较了 VS6 与 VS2008 创建的 Obj 的垃圾箱。2008 年的那个*看起来*好像是“静态链接”。在 VS6 中，它包含一些来自当前 DLL 的符号。在 VS2008 中，它包含来自（可能）它所依赖的所有库的符号。VS6 和 VS2008 的垃圾箱大小分别为 66kb 和 32,000kb。

* * *

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T18:17:41.137

检查您的调试选项。`/Z7`导致大的 .OBJ 文件，`/Zi`将相同的信息放在单独的 .PDB 文件中。

编译器选项`/Oi`可以通过内联内在函数来提供帮助，然后不再需要链接。`memset`无论如何，您可能不想调试。

关闭`/Gm`（增量重建），以便您可以打开`/MP`（并行构建）。也关闭`/Gy`- 虽然它可以生成更小的 EXE，但它会导致更大的 OBJ 文件和更慢的链接。

# git - 使用已更改的文件和原始副本使用 Git 跟踪更改

> ID：11457003
> 
> 赞同：1
> 
> 时间：2012-07-12T17:09:05.533
> 
> 标签：git

我得到了一个包含如下文件的项目：

```
MyProject/
  a.txt
  b.txt
  c.txt 
```

我在目录中初始化了一个 Git 存储库，但是（愚蠢地）一开始并没有将所有文件添加到存储库中。相反，在我意识到我需要更改它们之前，我将文件添加到了存储库中。

```
git add a.txt; git commit -m "Pristine A"
<awesome changes to a.txt>
git commit -am "Awesome Changes" 
```

不幸的是，在我疯狂编辑的热情中，我忘记了对某些文件执行此操作。（阅读：许多目录中的数十个文件，通过显式路径很难找到。）

```
<awesome changes to b.txt>
git status # Uh oh, new file b.txt 
```

我可以在我做出令人敬畏的更改之前获得项目的快照，以便 Git 可以告诉我从那时起哪些文件发生了更改。但是，我不想丢失我已经添加的数十个提交（带有描述）。

**如何获取“原始”快照，并让 Git 计算与我的工作目录相比哪些文件发生了更改，而不会丢失我现有的提交，也不会为那些确实更改但已记录在提交中的文件获得误报？**

*FWIW 我最初不添加整个目录的“理由”是因为有数千个与我的工作无关的文件，该目录仅在高延迟 SMB 上可用，我**认为**我知道哪些文件很重要。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:19:51.320

使用您的原始快照并使用它创建一个新的 git 存储库（添加所有文件并提交它们）。

在您当前的存储库中，执行

```
git remote add pristine /path/to/pristine/repository 
```

然后

```
git remote update pristine 
```

您现在可以在`git diff`

```
git diff pristine/master 
```

查看您的工作目录和原始提交之间的完整差异。如果您只需要变更集，`--summary`则应该是您正在寻找的选项。[git diff](http://linux.die.net/man/1/git-diff)手册页详细介绍了所有其他开关。

这应该会导致一个变更集，其中提到的已添加文件与已修改但未添加的文件不同。

之后如何处理取决于您，但是应该可以获取原始提交并使用 rebase，将其放在树的开头，添加每个文件，然后重播每个提交。

# python - 获取 TreeCtrl 上项目的路径

> ID：11457007
> 
> 赞同：0
> 
> 时间：2012-07-12T17:09:27.750
> 
> 标签：python, wxpython, wxwidgets

可以说我有这个treeCtrl：

```
Root

    Dogs
        Pug
        Lab

    Birds
        Parrot
        Eagle 
```

如何获得哈巴狗项目的路径？

EX：我应该得到类似的东西，

```
["root","Dogs","Pug"] 
```

（但使用 TreeCtrlIds）

有没有这样的功能，

`getTreePath(Item)`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:22:31.133

您可以迭代调用`GetItemParent(item)`以从项目获取根节点，如下所示（来源：[TreeCtrl api](http://wxpython.org/docs/api/wx.TreeCtrl-class.html)）：

```
root = myTree.GetRootItem()
pathList = [item]
done = False
while not done:
    path = myTree.GetItemParent(item)
    pathList.append(path)
    if path==root:
        done=True 
```

请注意，这将为您提供与您需要的顺序相反的项目，`pathList.reverse()`用于纠正此问题。

编辑：

1.  正如@gddc 指出的那样`pathList.append(path)`，您可以使用`pathList.insert(0, path)`来避免颠倒您的列表。
2.  如果您只对路径名感兴趣，请仅附加每个项目的文本 using`GetItemText()`而不是整个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:39:09.097

我也使用迭代方法，但从当前选定的项目开始。它看起来像这样：

```
pieces = []
item = self.tree.GetSelection()

while self.tree.GetItemParent(item):
  piece = self.tree.GetItemText(item)
  pieces.insert(0, piece)
  item = self.tree.GetItemParent(item) 
```

# python - BeautifulSoup Prettify 在版权符号上失败

> ID：11457009
> 
> 赞同：10
> 
> 时间：2012-07-12T17:09:36.270
> 
> 标签：python, unicode, beautifulsoup, prettify

我收到一个 Unicode 错误：`UnicodeEncodeError: 'charmap' codec can't encode character u'\xa9' in position 822: character maps to <undefined>`

这似乎是一个标准的版权符号，在 HTML 中是 ©。我一直无法找到解决办法。我什至尝试了一个自定义函数来用空格替换副本，但同样的错误也失败了。

```
import sys
import pprint
import mechanize
import cookielib
from bs4 import BeautifulSoup
import html2text
import lxml

def MakePretty():

def ChangeCopy(S):
    return S.replace(chr(169)," ")
br = mechanize.Browser()

# Cookie Jar
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

# Browser options
br.set_handle_equiv(True)
#br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)

# Follows refresh 0 but not hangs on refresh > 0
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

# User-Agent (this is cheating, ok?)
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]

# The site we will navigate into, handling its session
# Open the site
br.open('http://www.thesitewizard.com/faqs/copyright-symbol.shtml')
html = br.response().read()
soup = BeautifulSoup(html)
print soup.prettify()

if __name__ == '__main__':
    MakePretty() 
```

如何通过版权符号美化？我在网上搜索了一个无济于事的解决方案（或者我可能不明白，因为我对 Python 和抓取还很陌生）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-23T07:32:39.243

我有同样的问题。这可能对您有用：

`print soup.prettify().encode('UTF-8')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:53:31.600

The page [http://www.thesitewizard.com/faqs/copyright-symbol.shtml](http://www.thesitewizard.com/faqs/copyright-symbol.shtml) is sent without specifying character encoding. The page itself specifies the encoding as ISO-8859-1 in a `meta` tag, but only after the occurrence of the “©” character. So clients have to make a guess, and the guess may be wrong. If the client guesses UTF-8, then it will see the bit A9, which is a data error in UTF-8 data.

So it seems that you need to set the encoding (to ISO-8859-1, or more safely to windows-1252) when reading the data. This is of course an ad hoc solution only; it makes no sense to fix the encoding in general.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:57:40.007

您正在使用`chr()`，这里是错误的，因为它需要 ASCII 并且只能达到 127/0x7F（尽管流行的民间传说，ASCII 只是 7 位）。0xA9 / © 是 Unicode，所以你应该使用它`unichr(169)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T13:58:26.417

只是在格式化程序功能中更改为 unichr 不起作用。最终使用了 decode(formatter=blah) ，它确实返回了没有版权符号的未格式化的 html。保存该 html 并将其输入 prettify 以达到目的。

# sql - SQL Query Select first rank 1 row From Multiple rank/Group

> ID：11457013
> 
> 赞同：1
> 
> 时间：2012-07-12T17:09:58.387
> 
> 标签：sql, oracle, oracle10g, dense-rank

我有以下数据

表格1

```
id   col1    col2       col3
----------------------------------
1    abc   01/01/2012    -
1    abc   01/01/2012    A
2    abc   01/01/2012    -
2    abc   01/02/2012    -
3    abc   01/02/2012    -
3    xyz   01/01/2012    -
4    abc   01/02/2012    -
4    xyz   01/01/2012    -
4    xyz   01/02/2012    - 
```

以下是评估的顺序 -

```
if(col1 is false) then evaluate col2 if(col2 is false) then col3:

Col1 - xyz has first preference from all values in this column
col2 - min date
col3 - not '-' or min(col3) 
```

我只想为每个 id 返回一行，如果 col1 失败转到 col2，如果失败则转到 col3 条件。从上表结果应该是

```
 id   col1    col2       col3
----------------------------------
 1    abc     01/01/2012  A
 2    abc     01/01/2012  -
 3    xyz     01/01/2012  -
 4    xyz     01/01/2012  - 
```

我尝试使用密集等级，但没有帮助。我不确定如何使用任何可用的函数或 sql 逻辑来执行此逻辑。

```
for col1 - if more than one row for same code or xyz code then fail
for col2 - if more than one row with same min date then fail 
           [use this only if col1 condition fails] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T17:57:08.680

您可以在分析函数中指定许多要排序的条件

```
SELECT *
  FROM (SELECT id,
               col1,
               col2,
               col3,
               dense_rank() over (partition by id
                                      order by (case when col1 = 'xyz' 
                                                     then 1 
                                                     else 0 
                                                 end) desc,
                                               col2 asc,
                                               col3 asc) rnk
          FROM your_table)
 WHERE rnk = 1 
```

我假设您希望`dense_rank`使用该`dense_rank`标签。你没有谈论你想如何处理关系或者关系是否可能，所以从问题本身并不清楚你是否要使用`rank`、`dense_rank`或`row_number`分析函数。如果您只获取每个 的最高排名行`id`，`rank`并且`dense_rank`行为相同，并且如果第一名存在平局，则将返回多行。 `row_number`将始终通过任意打破平局返回单行。如果您想获取 per 第一行以外的行`id`，那么您需要考虑 tie 并且您会从`rank`and获得不同的行为`dense_rank`。如果两行并列第一，`dense_rank`将分配第三行`rnk`2 而`rank`将其分配`rnk`为 3。

这似乎适用于您发布的示例数据

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (
  2  select 1 id, 'abc' col1, to_date('01/01/2012', 'MM/DD/YYYY') col2, null col3 from dual union all
  3  select 1 id, 'abc' col1, to_date('01/01/2012', 'MM/DD/YYYY') col2, 'A' col3 from dual union all
  4  select 2 id, 'abc' col1, to_date('01/01/2012', 'MM/DD/YYYY') col2, null col3 from dual union all
  5  select 2 id, 'abc' col1, to_date('01/02/2012', 'MM/DD/YYYY') col2, null col3 from dual union all
  6  select 3 id, 'abc' col1, to_date('01/02/2012', 'MM/DD/YYYY') col2, null col3 from dual union all
  7  select 3 id, 'xyz' col1, to_date('01/01/2012', 'MM/DD/YYYY') col2, null col3 from dual union all
  8  select 4 id, 'abc' col1, to_date('01/02/2012', 'MM/DD/YYYY') col2, null col3 from dual union all
  9  select 4 id, 'xyz' col1, to_date('01/01/2012', 'MM/DD/YYYY') col2, null col3 from dual union all
 10  select 4 id, 'xyz' col1, to_date('01/02/2012', 'MM/DD/YYYY') col2, null col3 from dual
 11  )
 12  SELECT *
 13    FROM (SELECT id,
 14                 col1,
 15                 col2,
 16                 col3,
 17                 dense_rank() over (partition by id
 18                                        order by (case when col1 = 'xyz'
 19                                                       then 1
 20                                                       else 0
 21                                                   end) desc,
 22                                                 col2 asc,
 23                                                 col3 asc) rnk
 24            FROM x)
 25*  WHERE rnk = 1
SQL> /

        ID COL COL2      C        RNK
---------- --- --------- - ----------
         1 abc 01-JAN-12 A          1
         2 abc 01-JAN-12            1
         3 xyz 01-JAN-12            1
         4 xyz 01-JAN-12            1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:40:09.567

```
with tmp(id, col1, col2, col3, col1b, col3b) as
(select distinct id, col1, col2, col3,
        case when col1 = 'xyz' then '0' else '1' || col1 end,
        case when col3 = '-' then '1' else '0' || col3 end
from Table1)

select t1.id, t1.col1, t1.col2, t1.col3 
from tmp t1
left join tmp t2 on t1.id = t2.id
                and t1.col1b > t2.col1b
left join tmp t3 on t1.id = t3.id
                and t1.col1b = t3.col1b
                and t1.col2 > t3.col2
left join tmp t4 on t1.id = t4.id
                and t1.col1b = t4.col1b
                and t1.col2 = t4.col2
                and t1.col3b > t4.col3b
where t2.id is null
  and t3.id is null
  and t4.id is null 
```

# sql-server - 访问不同 Active Directory 服务器中的数据库

> ID：11457023
> 
> 赞同：5
> 
> 时间：2012-07-12T17:10:36.517
> 
> 标签：sql-server, vb6, active-directory

我目前登录到 Active Directory 域 A 上的用户计算机，我需要通过 VB6 访问位于域 B 中的 MSSQL 2000 中的数据库。用户在两个 Active Directory 服务器中都有帐户。Active Directory 域不相关或不链接。

目前我正在使用以下 MSSQL 连接字符串：

```
gcnnBD.ConnectionString = "Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=" & gsDataBase & ";Data Source=" & gsServidor & ";Connect Timeout=" & gsTimeOutconnection string. 
```

如果我登录到域 A，是否可以通过连接字符串连接到域 B？

连接字符串会是什么样子？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:15:39.590

是的，但是由于您使用的是集成身份验证，因此域 B 需要**信任**域 A。如果您不熟悉此术语，您的域管理员应该能够提供帮助。您可能还需要限定服务器名称，如 domain\server 或 server.domain。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T23:14:21.587

这个应用程序是否需要访问域 A 上的网络资源？

由于集成安全性，必须使用域凭据启动该过程。

假设没有信任关系，为此，您可以使用 RUNAS /NETONLY 让正在运行的程序使用另一个域凭据进行所有网络工作（这就是为什么我问您是否还会从该程序处理域 A） . [http://ss64.com/nt/runas.html](http://ss64.com/nt/runas.html)

事实上，我修改了我编写的一个程序，用等效的 Win32 API 调用重新启动它，以确保它在几年前问过这个问题后使用域凭据启动：[如何将 RUNAS /NETONLY 功能构建到 (C# /.NET/WinForms) 程序？](https://stackoverflow.com/questions/757857/how-to-build-runas-netonly-functionality-into-a-c-net-winforms-program)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T18:02:18.670

这是我使用的连接字符串示例，以便从不同域上的不同服务器数据库进行 SSIS 访问。数据源=[IP 地址]；用户 ID=[Windows 登录]；密码=[您的密码]；初始目录=[您的数据库名称]；提供程序=SQLNCLI10.1

希望这会有所帮助。

# android - 手机上的DialogFragment填充屏幕

> ID：11457027
> 
> 赞同：6
> 
> 时间：2012-07-12T17:10:42.270
> 
> 标签：android, fullscreen, fill, android-dialogfragment

我正在使用 DialogFragment 并想知道是否有一种简单的方法可以指定对话框以在普通/小尺寸设备（电话）上使用全屏。我想要实现的示例是在您选择安装应用程序后在 Google Play 上显示的确认/许可对话框。

![在此处输入图像描述](../Images/1e0c41eb68304d3444667cdca30cec28.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T19:50:43.627

如果您想用 DialogFragment 填充屏幕，您只需更改主题即可。用于全屏 android.R.style.Theme_Holo_Light 和非全屏对话框使用 android.R.style.Theme_Holo_Light_Dialog;

在调用中使用这些值：

setStyle(DialogFragment.STYLE_NO_TITLE, android.R.style.Theme_Holo_Dialog); // 举个例子

我在 onCreate() 结束时调用此方法。

希望这有助于贾斯珀

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:25:37.477

在平板电脑中，以正常方式显示对话框。

```
DialogFragment newFragment = MyDialogFragment.newInstance();
newFragment.show(getFragmentManager(), "dialog"); 
```

在 Phone 中，将 DialogFragment 作为 Activity 的 onCreate() 中的普通片段添加到布局中。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    if (savedInstanceState == null) {
        FragmentTransaction ft = getFragmentManager().beginTransaction();
        DialogFragment newFragment = MyDialogFragment.newInstance();
        ft.add(R.id.embedded, newFragment);
        ft.commit();
    } 
```

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/embedded"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

</FrameLayout> 
```

注意： <Fragment>Tag 嵌入的片段不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T22:18:18.507

有相同的问题（带有确切的图表！）和答案（由提出问题的人提出。）利用资源文件夹分类，答案也是有效的。[对话框片段嵌入取决于设备](https://stackoverflow.com/q/10996217/319058)

# ruby-on-rails - 基于 Mongoid 计算字段的查询

> ID：11457031
> 
> 赞同：0
> 
> 时间：2012-07-12T17:10:49.043
> 
> 标签：ruby-on-rails, mongodb, mongoid

我想`overdue`在模型中实现一个范围`Invoice`以返回所有超过日期的发票，直到必须付款。我有字段`invoice_date, :type => Date`和`days_for_payment, :type => Integer`.

在我之前基于 ActiveRecord 构建的版本中，我可以使用查询

```
Invoice.where("invoice_date + days_for_payment < ?", Date.today) 
```

该查询在数据库端进行了计算。

有没有办法用 Mongoid 完成同样的事情？或者有人知道一个好的解决方法（proc、lambda 等）吗？

我使用 mongoid '2.4.12'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:31:51.983

自己找到了答案。使用前缀`this.*`我可以引用这些字段。我可以使用 JavaScript 函数。MongoDB 变得越来越酷！

所以这是我的解决方案：

```
class Invoice
  include Mongoid::Document
  field :invoice_date, :type => Date
  field :days_for_payment, :type => Integer
  ...

  scope :overdue, where("(Math.round(this.invoice_date.getTime() / 1000) + (this.days_for_payment * 24 * 3600)) < #{Time.now.to_i}")

  ...
end 
```

在 js 中创建时间戳的工作方式不同。所以我不得不去掉最后三个数字并将它们四舍五入。如果有人知道更优雅的方式，请告诉我。

我剩下的唯一问题是，我无法将`Date`对象存储到 MongoDB。它总是告诉我必须使用`Time`. 我认为我最好将 mongoid 升级到 3.0.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:41:05.397

我不确定[mongoid](http://rdoc.info/github/mongoid/mongoid/Mongoid/Criteria#where-instance_method)，如果您直接查询 mongodb ，您可以使用[$where 运算符](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-JavascriptExpressionsand%7B%7B%24where%7D%7D)。不推荐，因为它不使用索引。如果您有另一个条件将记录过滤到一个小集合，那么您可以使用 $where 进一步过滤它。

# javascript - javascript 在哪里放置 var 语句

> ID：11457033
> 
> 赞同：0
> 
> 时间：2012-07-12T17:10:54.413
> 
> 标签：javascript

我有一个看起来像这样的函数：

```
function SomeFunction() {

  var SomeVar;

  if (SomeCondition) {
     SomeVar = 4;
  }
} 
```

这相当于：

```
function SomeFunction() {

  if (SomeCondition) {
     var SomeVar = 4;
  }
} 
```

仅当条件为真时才使用 var 语句是否会产生影响，是否有任何最佳实践或**性能影响**？

谢谢。

**编辑：是的，我知道没有块范围，只有函数范围。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:13:54.393

它们的功能完全相同，但是对于将其放置在何处有两种思想流派：

一组说你应该把它放在函数的顶部，因为这样可以避免你依赖（不存在的）块作用域的错误印象。

另一组说您应该将它放在适当的块中，因为这表明您打算将变量视为块作用域而不在其他任何地方使用它。

据我所知，我是第二组的唯一成员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T17:11:55.350

放置`var`语句的位置对您的代码没有影响。这纯粹是风格问题。

有些人觉得将 放在块`var`的开头会更清楚`function`。Javascript 中变量的生命周期与声明它的函数相关，而不是与作用域相关。许多其他花括号语言的做法恰恰相反，这对许多新用户来说是一个困惑的根源。因此人们相信在函数的开头声明会导致更清晰的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:15:13.567

在 JavaScript 中，像 C/C++ 中的变量没有块作用域。因此，即使您在`if () {}`块中声明了变量，该变量实际上也是在函数的开头立即创建的。这种“拉起声明”的效果通常被称为“提升”。

虽然两个代码都是正确的，但第一个代码在语义上可能更好，因为它强调了变量存在的事实，无论是否`SomeCondition`为真。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:12:00.450

这两者实际上是等价的。阅读[“提升”](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)和[“功能和块范围”](http://augustli.wordpress.com/2011/04/05/javascript-pitfalls-no-block-scope/)。

就速度而言，您最好使用第二种情况 - 将声明和赋值组合在同一条语句中。请参阅：http: [//jsperf.com/stackoverflow-frenchie](http://jsperf.com/stackoverflow-frenchie)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T17:15:31.963

把它放在函数的开头。无论如何，它总是在运行时移动到那里，但如果你把它放在真正执行的地方，它就会消除混乱/不真实的假设。

所以在你的情况下，第一个片段。

（另外，纯粹的风格，写除了类camelCase，而不是PascalCase之外的所有东西的标识符）

# android - 更新了 Android SDK，现在将 apk 安装到真实设备时出现问题

> ID：11457034
> 
> 赞同：3
> 
> 时间：2012-07-12T17:10:54.853
> 
> 标签：android

我正在为 Android 开发出租车订单应用程序。两天前，我遇到了一个无法在模拟器上使用 Internet 的问题——它拒绝工作。原因在于 Windows 的网络设置，但我后来才知道。那时我只是尝试重新安装 Android SDK，希望能够修复所有问题。在此之前，我使用的是修订版 16。现在我安装了修订版 20。我的 Eclipse ADT 插件自动更新以支持更新的 SDK 版本。

现在我在没有真实设备的情况下工作，并在 Android 模拟器上测试所有内容。今天我将我的应用程序的最新版本发送给我的主管，但我拒绝安装。SDK最低版本为8（2.2），大佬拥有Android 2.3设备。他试图将此应用程序安装到其他两台设备上。另一个 2.3 设备也拒绝了 apk，但一个 2.2 设备接受了它。有什么问题？请注意，我没有设置最大 SDK 版本。我还尝试在 2.3 模拟器上安装和运行我的应用程序，一切都很好。

PS 问题已解决，请参阅下面 Tim 的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:00:11.540

如果他安装了旧版本，让他先尝试卸载它。我的猜测是您有一个新的调试密钥，并且由于密钥不同而导致安装失败。

# stored-procedures - 使用 ADO 与存储过程进行创建和更新

> ID：11457037
> 
> 赞同：0
> 
> 时间：2012-07-12T17:11:00.433
> 
> 标签：stored-procedures, asp-classic, ado

使用 ADO 与存储过程进行创建和更新

我正在使用经典 ASP、SQL Server 2008 R2。我一直在使用这样的 ADO 来创建和更新：

```
sSQL = "select <column list> from <table>"

set rsMyTable = Server.CreateObject ("ADODB.Recordset")
rsMyTable.cursorType = 2 
sMyTable.LockType = 3 
rsMyTable.open sqlstr, objMyConnection     
rsMyTable.addnew

rsMyTable("Mycol1") = myValue1
rsMyTable("Mycol2") = myValue2
rsMyTable.update
rsMyTable.close
set rsMyTable = nothing 
```

我有几个需要更新的表，每次更新都会更新不同的列集。像这样使用 ADO 是不好的做法吗？我应该为每个更新创建存储过程并使用 ADO 将参数传递给存储过程，而不是使用 ADO，如下所示：

```
sqlstr = "myUpdateProcedure"
set objCmd = Server.CreateObject("ADODB.Command")
set objParam = Server.CreateObject("ADODB.Parameter")

set objCmd.ActiveConnection = objConnection
objCmd.commandText = sqlstr
objCmd.CommandType = 4   ''stored proc.

set objParam = objCmd.CreateParameter("param1", 19, 1, , value1)
objCmd.Parameters.Append objParam
set objParam = objCmd.CreateParameter("param2", 200, 1, <maxlength>, value2)
objCmd.Parameters.Append objParam
....
set rsTemp = Server.CreateObject("ADODB.Recordset")
rsTemp.CursorLocation = adUseClient
rsTemp.CursorType = adOpenKeyset
set rsTemp = objCmd.Execute()

....

''cleanup.
set objParam = Nothing
set objCmd = Nothing
Set rsTemp = Nothing 
```

我很感激任何建议。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:58:51.527

创建一个存储过程来执行所有更新。然后，您可以使用事务来确保执行或回滚所有更新。换句话说，将您当前在 VBScript 中拥有的逻辑移动到 T-SQL。

以这种方式使用 ADO 充其量是陈旧的并且性能很差。

如果您有很多参数要传递或多行要更新，请考虑使用 XML 作为存储过程的传输。

# mysql - JOIN 返回重复的结果，我应该担心吗？

> ID：11457038
> 
> 赞同：1
> 
> 时间：2012-07-12T17:11:00.607
> 
> 标签：mysql, sql, performance, select, join

我正在使用`JOIN`MySQL 来选择一篇文章以及与之相关的所有评论，但我意识到当我选择一篇文章并且有多个评论时，我会得到同一篇文章的评论数量重复。例如：
我有一个包含以下列的表格`articles`：
1\. `id`
2.以及带有以下列`article`
的表格： 1\. 2\. 3。`comments`
`c_id`
`body`
`a_id`

我尝试使用的 MySQL 查询：

```
SELECT  * FROM `articles`
JOIN`comments`
ON (`articles`.id = `comments`.a_id)
WHERE `articles`.id = 134 
```

这是最终的结果：

```
id  article   c_id  body        a_id
134 Article1    2   Comment1    134
134 Article1    3   Comment2    134
134 Article1    8   Comment3    134 
```

所以我的问题是：由于我`article`为每条评论获得相同列的值，这是否会减慢 MySQL 查询或我的 Web 应用程序的速度？因为我请求的数据比我真正需要的更多。
我可以将查询分成 2 个简单的`SELECT`查询，但这有点矫枉过正，对吧？

谢谢阅读。

**编辑：**
如果我`article`列的值更大，包含 1k+ 个字符，它会复制它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:17:56.313

> 由于我为每条评论获得相同的文章列的值，这是否会减慢 MySQL 查询或我的 Web 应用程序的速度？因为我请求的数据比我真正需要的更多。

由于数据库传输的字节数超过了它需要的字节数，因此会产生与此相关的性能成本，但它可能并不明显。

> 我可以将查询分成 2 个简单的 SELECT 查询，但这有点过分，对吧？

没有测量很难说。如果 article 的值是一个 Gigabyte 而不是几个字符，那么您可能想要进行两次选择而不是一次选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:18:14.410

您可以在一个查询中获取要显示的所有文章，然后对所有评论执行另一个 mysql 调用`WHERE comments.a_id IN (1,2,5,6,9,10)`，然后在您的应用程序中为您正在显示的文章提取相关评论。

我认为这将比在每篇文章的单独查询中获取评论更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:18:44.813

还行吧。拆分为两个查询将需要两次访问数据库，两次执行类似的查询等。在大多数设置中，这比获取更多数据更昂贵 - 希望客户端用于与数据库通信的协议会优化这一点。MySQL 确实可以选择[在客户端和服务器之间使用压缩](http://forge.mysql.com/wiki/MySQL_Internals_ClientServer_Protocol#Compression)- 这应该优化传输的数据。

如果这对您的应用程序至关重要，您应该进行基准测试并选择最适合您的应用程序。

如果不采用易于实现的方法 - 对整个应用程序进行性能/负载测试，找到瓶颈并修复它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T17:19:10.757

通常最好选择比您需要的更多信息，而不是在另一个查询中返回以从数据库中获取更多信息。

`article`在这种情况下，我无法想象你也通过抓取记录来拖慢你的系统。如果您担心它，请不要使用它，`select *`而是像这样显式调用列：

```
SELECT `comments`.c_id , `comments`.body, `comments`.a_id
FROM `articles`
    JOIN `comments` ON `articles`.id = `comments`.a_id
WHERE `articles`.id = 134 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T17:20:05.070

如果分别执行两个查询，肯定会更慢。如果在执行查询之前有“article.id”，则不需要使用 JOIN。

# actionscript-3 - 创建/设置所有自定义项目渲染器后的事件

> ID：11457039
> 
> 赞同：1
> 
> 时间：2012-07-12T17:11:03.550
> 
> 标签：actionscript-3, apache-flex, actionscript

我在我的数据网格中使用自定义项渲染器，并且需要根据渲染器中的任何值是否存在负值来使按钮可见或不可见。所以我想在第一个渲染器关闭时将标志设置为 false，如果有任何负值，将其设置为 true，最后检查标志的值。我知道每次在渲染器实例中更改数据时我都可以调度一个 dataChange 事件，但我想知道是否有任何方法可以知道它们何时完成？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:35:59.090

没有这样的事件。

与任何其他 Flex 组件一样，渲染器将`CREATION_COMPLETE`在创建后调度 a。 `ItemRenderers`通常被回收（同一个对象被分配新的数据来渲染），因此监听`CREATION_COMPLETE`是不够的，除非你禁用回收。

对于 Spark组件，您可以通过设置布局类`List`来禁用回收。`useVirtualLayout=false`我不确定 Spark`DataGrid`类是否支持这一点。MX DataGrid 可能有其他方法可以做到这一点。

但是，禁用回收可能会影响性能。我认为您对活动的想法`DATA_CHANGE`是最好的解决方案：

*   确定数据的初始状态（即：是否有任何负值）
*   在渲染器中，使用 DATA_CHANGE 事件（或者只是覆盖渲染器`data`属性的设置器）来了解数据何时发生变化
*   当数据发生变化时，调度一个会冒泡的自定义事件类。这个事件有一个属性告诉你值是否为负。
*   由于来自渲染器的自定义事件会冒泡到网格中，因此您可以在网格上添加一个侦听器来处理来自所有渲染器的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:44:50.760

你应该看看 RendererExistenceEvents。您应该能够根据列表中有多少项目或至少一次应该查看多少项目来判断它们何时全部创建。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/events/RendererExistenceEvent.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/events/RendererExistenceEvent.html)

# c# - .NET 中的“美国东部标准时间”与“东部标准时间”

> ID：11457040
> 
> 赞同：17
> 
> 时间：2012-07-12T17:11:10.883
> 
> 标签：c#, .net, timezone

在列出s 返回的所有`Id`属性时，出现了两个版本的 EST：美国东部标准时间和东部标准时间。有什么不同？`TimeZoneInfo``TimeZoneInfo.GetSystemTimeZones`

我也看到了美国山地标准时间和山地标准时间，但我很确定这是因为美国版本适用于不遵守 DST 的亚利桑那州。我假设常规山区标准时间适用于山区时区的美国其他州。我对么？

美国时区的有用链接：[http ://www.timetemperature.com/tzus/time_zone.shtml](http://www.timetemperature.com/tzus/time_zone.shtml)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-16T11:39:15.547

“美国东部标准时间”是指印第安纳州大部分地区的时区，该时区在 2007 年之前没有遵守夏令时。同样，“加拿大中部标准时间”用于萨斯喀彻温省，“美国山区标准时间”用于亚利桑那州，其中仍然不遵守夏令时。

时区 ID 的分配方式有点不合逻辑。例如，开曼群岛提到的“无 DST”版本称为“SA 太平洋标准时间”（SA = 南美洲，如果您查看时区地图，您会看到 -05:00 偏移适用于哥伦比亚、厄瓜多尔、和南美洲西海岸的秘鲁）

另一个时区 ID 示例“格林威治标准时间”指的是冰岛使用的时区，全年为 UTC+00:00，没有 DST，而“GMT 标准时间”指的是有 DST 的英国时区.

每个时区对应于您可以从时区控制面板中选择的菜单项之一。[此 MSDN 页面显示了菜单中的文本与实际时区 ID 之间的对应关系](http://msdn.microsoft.com/en-us/library/ms912391(v=winembedded.11).aspx)：

```
010  Mountain Standard Time         (GMT-07:00) Mountain Time (US and Canada)
013  Mexico Standard Time 2         (GMT-07:00) Chihuahua, La Paz, Mazatlan
015  U.S. Mountain Standard Time    (GMT-07:00) Arizona
020  Central Standard Time          (GMT-06:00) Central Time (US and Canada)
025  Canada Central Standard Time   (GMT-06:00) Saskatchewan
030  Mexico Standard Time           (GMT-06:00) Guadalajara, Mexico City, Monterrey
033  Central America Standard Time  (GMT-06:00) Central America
035  Eastern Standard Time          (GMT-05:00) Eastern Time (US and Canada)
040  U.S. Eastern Standard Time     (GMT-05:00) Indiana (East)
045  S.A. Pacific Standard Time     (GMT-05:00) Bogota, Lima, Quito
085  GMT Standard Time              (GMT) Greenwich Mean Time: Dublin, Edinburgh, Lisbon, London
090  Greenwich Standard Time        (GMT) Casablanca, Monrovia 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-07T17:59:54.337

这些时区的*显示名称*有助于解释混乱

| 时区名称 | 显示名称 | 遵守夏令时 | 夏季与 UTC 的偏移量 |
| --- | --- | --- | --- |
| 东部标准时间 | (UTC-05:00) 东部时间（美国和加拿大） | 是的 | -04:00 |
| 美国东部标准时间 | (UTC-05:00) 印第安纳州（东部） | 是的 | -04:00 |
| 东部标准时间（墨西哥） | (UTC-05:00) 切图马尔 | **不** | -05:00 |
| 山区标准时间 | (UTC-07:00) 山区时间（美国和加拿大） | 是的 | -06:00 |
| 美国山区标准时间 | (UTC-07:00) 亚利桑那州 | **不** | -07:00 |
| 山区标准时间（墨西哥） | (UTC-07:00) 吉娃娃、拉巴斯、马萨特兰 | 是的 | -06:00 |

*   *“美国东部标准时间”*仅适用于印第安纳州的（部分）地区（直到 2005 年能源政策法案，该法案于 2007 年更改了印第安纳州的时区）。今天它与“东部标准时间”相同
*   *“美国山区标准时间”*不遵守夏令时，而*“山区标准时间”*的其余部分则遵守。

# hibernate - Hibernate GenerationType.IDENTITY 和字符串序列

> ID：11457047
> 
> 赞同：0
> 
> 时间：2012-07-12T17:11:36.750
> 
> 标签：hibernate

由于在遗留数据库模式之上实现 Spring Security 存在一些问题，我们的用户 ID 需要由序列生成，但存储为 VARCHAR(9)。因此，我们将在数据库端进行转换，以使其对代码端（序列/触发器/等）不可见。

但是，据我所知，如果像这样通过 GenerationType.SEQUENCE 映射，这将爆炸：

```
@GeneratedValue(strategy=GenerationType.SEQUENCE,generator="MYGENERATOR") 
```

由于该字段将通过触发器填充，我可以使用 GenerationType.IDENTITY 进行映射吗？

```
@GeneratedValue(strategy=GenerationType.IDENTITY) 
```

谢谢，杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:35:08.427

这可能会奏效。您可以将标识符字段的类型设置为 String 并使用 GenerationType.IDENTITY 策略。

要确保的一件事是可以使用 JDBC api (PreparedStatement.getGeneratedKeys) 获取生成的 id。此[页面](http://www.rgagnon.com/javadetails/java-0656.html)包含有关使其工作所需的更多详细信息。

# jquery - 如果未禁用，则 Jquery 全选

> ID：11457050
> 
> 赞同：18
> 
> 时间：2012-07-12T17:11:45.910
> 
> 标签：jquery, select, checkbox

我正在使用以下脚本来选择具有给定类的所有复选框。

```
$(document).ready(function(){ // 1
    // 2
    $(':checkbox.selectall').on('click', function(){
        // 3
        $(':checkbox[class='+ $(this).data('checkbox-name') + ']').prop("checked", $(this).prop("checked"));
        $(':checkbox[class='+ $(this).data('checkbox-name') + ']').trigger("change");
    });

}); 
```

但是我遇到了一个问题，因为取消/选择所有复选框能够取消/选择禁用的复选框。

我试过这个

```
$(document).ready(function(){ // 1
    // 2
    $(':checkbox.selectall').on('click', function(){
        // 3
        $(':checkbox[class='+ $(this).data('checkbox-name') + !$(:disabled) + ']').prop("checked", $(this).prop("checked"));
        $(':checkbox[class='+ $(this).data('checkbox-name') + !$(:disabled) + ']').trigger("change");
    });

}); 
```

但它不起作用。我做了一个 jsfiddle 来展示这个问题[http://jsfiddle.net/e67Fv/](http://jsfiddle.net/e67Fv/)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-12T17:29:01.577

嗯...有趣的尝试，但是您不能在选择器中使用 jQuery 对象，因为选择器只是一个普通字符串。

用于排除禁用元素的选择器将是`:not(:disabled)`，因此您的代码应该是：

```
$(document).ready(function(){
  $(':checkbox.selectall').on('click', function(){
    $(':checkbox[class='+ $(this).data('checkbox-name') + ']:not(:disabled)').prop("checked", $(this).prop("checked"));
    $(':checkbox[class='+ $(this).data('checkbox-name') + ']:not(:disabled)').trigger("change");
  });
}); 
```

请注意，您可以链接调用，因此您不必选择两次：

```
$(document).ready(function(){
  $(':checkbox.selectall').on('click', function(){
    $(':checkbox[class='+ $(this).data('checkbox-name') + ']:not(:disabled)').prop("checked", $(this).prop("checked")).trigger("change");
  });
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-12T17:15:31.277

使用`.not()`函数和`:disabled`选择器的组合来排除这些。

```
$(':checkbox[class='+ $(this).data('checkbox-name') + ']').not(':disabled').prop("checked", $(this).prop("checked"));
$(':checkbox[class='+ $(this).data('checkbox-name') + ']').not(':disabled').trigger("change"); 
```

`.not()`也作为选择器存在，`:not()`可以按如下方式使用：

```
 $(':checkbox[class='+ $(this).data('checkbox-name') + ']:not(:disabled)').prop("checked", $(this).prop("checked"));
 $(':checkbox[class='+ $(this).data('checkbox-name') + ']:not(:disabled)').trigger("change"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-12T17:19:47.303

这是我通常做的：

```
$(function(){
    $(".selectall").live('change', function(){
        if($(this).is(":checked"))
        {
            $("input:checkbox:not(:disabled)." + $(this).data('checkbox-name')).prop("checked", "true");
        }
        else
        {
            $("input:checkbox:not(:disabled)." + $(this).data('checkbox-name')).prop("checked", "false");
        }
    });
}); 
```

我希望它有帮助:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T17:27:49.497

这与您的原始代码不同。它只会触发那些未更改的更改。我假设您希望在更改后触发所有更改

```
$(':checkbox.selectall').on('click', function(){
        $(':checkbox .'+ $(this).data('checkbox-name')).not(':disabled').prop("checked", $(this).prop("checked")).trigger("change");
    }); 
```

# authentication - 是否有具有完全 RESTful API 的自托管单点登录解决方案？

> ID：11457059
> 
> 赞同：2
> 
> 时间：2012-07-12T17:12:14.847
> 
> 标签：authentication, rest, authorization, single-sign-on, identity-management

是否有可在我的服务器上安装完全 RESTful API 的单点登录解决方案？我看过 OpenAM，它有一些通过 HTTP/JSON 可用的 API，但不是全部（而且看起来太重了，但如果它有所有的 API，我不在乎）。

您是否知道可用于单点登录的授权、身份验证和身份管理解决方案，并通过 HTTP(S)/JSON 提供所有（可能无需设置管理员密码和此类关键问题）其 API？

我不需要 Java API 等，用于设置的 HTTP(S)+CLI 只是我寻找的东西。也就是说，我并不真正关心解决方案是用什么实现的（不需要 Java EE 等），只要它完成它的工作并且它是安全的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:38:30.970

你见过 Mozilla基于[BrowserID的新](https://github.com/mozilla/browserid)[Persona](http://www.mozilla.org/persona/)解决方案吗？它做了很多，但如果没有更多关于您需要授权的集成程度的详细信息，很难知道它是否足以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T17:12:05.767

你可能想看看[Stormpath](https://stormpath.com/)。它们是最大的身份管理服务（面向开发人员）——它们都支持 REST + JSON API。

# sql - 如何查找没有唯一 ID 的两个查询之间的差异

> ID：11457060
> 
> 赞同：0
> 
> 时间：2012-07-12T17:12:15.437
> 
> 标签：sql, sql-server-2008

我正在使用以下查询来尝试查找两个数据库的查询结果之间的差异。我无法使用 AccountID 作为比较点，因为它们不在不同的数据库之间排列。cte 中的选择都返回 200105 行，但 cte 上的连接结果有 201779 行。这种情况下的数据应该能够匹配。我在正确的轨道上吗？如果是这样，我错过了什么，或者我应该寻找不同的方法。

```
 with cteDev3 (AccountID, SecurityID, UniqueAccountID, BuyPrice, BuyDate, Shares)as
      (select Al.AccountID, al.SecurityID,ad.UniqueAccountId, BuyPrice, BuyDate, Shares
        from dev3TMAd.dbo.AccountLot al
        join dev3TMAd.dbo.AccountDetails ad
        on al.AccountID = ad.AccountId
        where ad.EnterpriseId = 'HuberFinancial'),
    cteTest2 (AccountID, SecurityID, UniqueAccountID, BuyPrice, BuyDate, Shares)as
       (select Al.AccountID, al.SecurityID,ad.UniqueAccountId, BuyPrice, BuyDate, Shares
        from test2TMAd.dbo.AccountLot al
        join test2TMAd.dbo.AccountDetails ad
        on al.AccountID = ad.AccountId
        where ad.EnterpriseId = 'HuberFinancial')

select c3.UniqueAccountId as 'Dev3' , t2.UniqueAccountId as 'Test2'
from cteTest2 t2
join cteDev3 c3
    on c3.UniqueAccountId = t2.UniqueAccountId
    and c3.SecurityID = t2.SecurityID
    and c3.BuyDate = t2.BuyDate
    and c3.Shares = t2.Shares
    and c3.BuyPrice = t2.BuyPrice 
```

这是作为 ctes 一部分的子查询的结果集的样子：

```
AccountID | SecurityID | UniqueAccountId | BuyPrice | BuyDate | Shares
949662 | 17030 | 11284035 | 42.690021 | 2007-12-19 00:00:00 | 4.710000
949662 | 17030 | 11284035 | 42.690629 | 2007-12-19 00:00:00 | 13.521000
949662 | 17030 | 11284035 | 42.611940 | 2007-12-19 00:00:00 | 0.134000
949662 | 17030 | 11284035 | 39.323467 | 2008-03-10 00:00:00 | 0.946000
949662 | 17030 | 11284035 | 40.831884 | 2008-06-10 00:00:00 | 6.323000
949662 | 17030 | 11284035 | 30.730860 | 2008-09-09 00:00:00 | 6.335000
949662 | 17030 | 11284035 | 16.290063 | 2008-12-10 00:00:00 | 111.045000
950091 | 25885 | 11937183 | 14.629975 | 2012-03-23 00:00:00 | 12.337000
950091 | 25885 | 11937183 | 14.599671 | 2012-04-23 00:00:00 | 12.140000
950091 | 4325 | 11937183 | 11.082955 | 2012-01-27 00:00:00 | 6768.953000
950091 | 4325 | 11937183 | 11.119163 | 2012-01-31 00:00:00 | 1.242000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:10:44.403

我想你想做一个完整的外连接，以找到不匹配的：

```
select (case when c3.UniqueAccountId is not null and t2.UniqueAccountId is not null
             then 'MATCH'
             when c3.UniqueAccountId is not null then 'DEV-ONLY'
             when t2.UniqueAccountId is not null then 'TEST-ONLY'
             else 'Oops!'
        end) as MatchType,
       c3.UniqueAccountId as 'Dev3', t2.UniqueAccountId as 'Test2'
from cteTest2 t2 full outer join
     cteDev3 c3
     on c3.UniqueAccountId = t2.UniqueAccountId and
        c3.SecurityID = t2.SecurityID and
        c3.BuyDate = t2.BuyDate and
        c3.Shares = t2.Shares and
        c3.BuyPrice = t2.BuyPrice 
```

# android - ListView 项中的 MapView

> ID：11457062
> 
> 赞同：6
> 
> 时间：2012-07-12T17:12:19.670
> 
> 标签：android, listview, android-layout, android-mapview, mapactivity

我有一个带有 listView 的活动，单击时可以展开每个项目，显示一个 mapView。如果单击另一个项目，则打开的项目将关闭。该活动扩展了 MapActivity，并且只有一个 mapview 实例，我根据需要将其删除并添加到项目中，如下所示：

```
private MapView getMapView() {
    if (mMapView == null) {
        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        mMapView = (MapView) inflater.inflate(R.layout.club_map,null);
    }
    else
    {
        ((ViewGroup) mMapView.getParent()).removeView(mMapView);
    }
    return mMapView;
}

private void attachMap(View targetView,String siteID) {
    if (openInPrgrs) {
        return;
    }
    RelativeLayout relView = (RelativeLayout) targetView.findViewById(R.id.clubDetailsLayout);
    LinearLayout mapContainer = (LinearLayout) relView.findViewById(R.id.mapContainer);
    UtilFunctions.logIfDebug("MembershipsList","Attaching Map. siteID " + siteID + " childCount = " + mapContainer.getChildCount());
    if (mapContainer.getChildCount() > 0 ) {
        return;
    }
    MapView mapView = getMapView();
    mapContainer.addView(mapView);
} 
```

它在大多数情况下都可以正常工作，但是当屏幕关闭并重新打开时，或者打开的项目从屏幕上滚动出来并返回时，mapView 就会消失。我知道这是因为视图正在被 listView 回收。如果我尝试在 getView() 中附加地图（如果视图处于打开位置）：

```
public View getView(int position, View convertView,
                ViewGroup parent) {

            final View resultView = super.getView(position, convertView, parent);
            LayoutParams lp = resultView.getLayoutParams();
            if (curOpenPos == position) {

                LinearLayout mapContainer = (LinearLayout) resultView.findViewById(R.id.mapContainer);
                lp.height = item_height_open;
                attachMap(resultView, siteID);
            } 
```

} 当项目完全展开时，地图会消失，但当屏幕关闭并打开时，它会出现。

任何人都知道为什么会发生这种情况，或者我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:01:04.533

也许你可以实现一个 Holder 类。一个比将一个实例保存到您的 MapView 以便可以恢复它。

在最后一个示例中，[这里](http://android.amberfog.com/?p=296)展示了如何使用其他视图执行此操作。

# common-lisp - 在 Common Lisp 中定义 setf-expanders

> ID：11457071
> 
> 赞同：17
> 
> 时间：2012-07-12T17:13:05.237
> 
> 标签：common-lisp, setf

事情是这样的：我没有“得到” setf-expanders 并且想了解它们是如何工作的。

我需要了解它们是如何工作的，因为我遇到了一个问题，这似乎是你应该学习 setf-expanders 的典型示例，问题如下：

```
(defparameter some-array (make-array 10))

(defun arr-index (index-string)
  (aref some-array (parse-integer index-string))

(setf (arr-index "2") 7) ;; Error: undefined function (setf arr-index) 
```

如何为 ARR-INDEX 编写合适的 setf-expander？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-12T18:51:14.843

```
(defun (setf arr-index) (new-value index-string)
  (setf (aref some-array (parse-integer index-string))
        new-value)) 
```

在 Common Lisp 中，[函数名](http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_f.htm#function_name)不仅可以是一个符号，还可以是一个以`SETF`第一个符号为首的两个符号的列表。往上看。`DEFUN`因此可以定义`SETF`函数。该函数的名称是`(setf arr-index)`。

*setf 函数*可用于*place*形式：[CLHS：其他复合形式为 places](http://www.lispworks.com/documentation/HyperSpec/Body/05_abi.htm)。

新值是第一个参数。

```
CL-USER 15 > some-array
#(NIL NIL NIL NIL NIL NIL NIL NIL NIL NIL)

CL-USER 16 > (setf (arr-index "2") 7)
7

CL-USER 17 > some-array
#(NIL NIL 7 NIL NIL NIL NIL NIL NIL NIL) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-11T13:15:30.537

雷纳的回答是正确的。在 ANSI Common Lisp 之前，有必要使用`defsetf`为可以通过简单函数调用设置的简单位置定义扩展器。`setf`像 CLOS 这样的功能`(setf arr-index)`进入语言并简化了很多事情。特别是，`setf`函数可以是通用的。

# php - 使用变量从 php 发送 HTML 电子邮件

> ID：11457073
> 
> 赞同：0
> 
> 时间：2012-07-12T17:13:15.473
> 
> 标签：php, html, email

我不是很擅长 php，所以这对你们中的一个人来说应该（希望）很容易。

我正在尝试从 php 发送一封包含变量的 HTML 电子邮件。我可以发送带变量的无 html 电子邮件，或不带变量的 HTML 电子邮件，但我似乎无法同时发送这两种电子邮件。这是我的代码：

```
<?
$to = "me@something.co.uk";
$from = "m2@something.com";
$subject = "Hello! This is HTML email";
'
//begin of HTML message
$message = <<<EOF;

<html>
 <p>Opt out of contact by phone<br />
    '. $_POST["Opt_out_phone"] .'
 </p>
</html> EOF;

$headers  = "From: $from\r\n";
$headers .= "Content-type: text/html\r\n";

mail($to, $subject, $message, $headers);

echo "Message has been sent....!"; ?> 
```

我以前从未遇到过 <<< EOF，也不知道它在做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:17:12.563

您正在使用 HEREDOC 语法并尝试终止字符串并错误且不必要地附加变量。要使用变量声明字符串，请执行以下操作：

```
$message = <<<EOF;

<html>
 <p>Opt out of contact by phone<br />
     {$_POST["Opt_out_phone"]}
 </p>
</html> EOF; 
```

请注意，有关 heredoc 语法的 PHP 手动条目与[字符串文档的其余部分位于此处](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)。

# settings - Enterprise Architect 项目编程语言

> ID：11457076
> 
> 赞同：7
> 
> 时间：2012-07-12T17:13:19.793
> 
> 标签：settings, enterprise-architect

在Enterprise Architect中当我建模一个类并指定类的实现语言，然后在用例中使用该类的实例时，用例中实例的实现语言不是类的实现语言，而是默认值。有没有办法让 Enterprise Architect 使用该类的集合实现语言作为该类所有实例的实现语言？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-13T15:02:59.313

没有使实例遵循类语言的选项（但这是发送给 Sparx的好[建议），但您可以为所有新元素设置默认语言。](http://www.sparxsystems.com/support/feature_request.html)根据您的问题，我认为您已经知道如何操作，但我会为其他读者提供它。

工具 - 选项 - 源代码工程 - 代码生成的默认语言是您所追求的。这个选项的命名有些不正确；它实际上为创建的元素设置了默认语言。

只要您一次为一种实现语言建模，它就可以很好地工作。如果您正在为不同的语言建模并意识到您在模型的大部分内容中使用了错误的语言，您可以在项目浏览器中右键单击包并选择“代码工程 - 重置此包的选项”。

选择“语言在哪里” - 任意，然后“转换为”您想要的语言。确保勾选“处理子包”。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-08T10:15:37.217

在 Enterprise Architect 12.1 中，我在这里找到了它：

**PROJECT - 设置 - 项目选项 - 源代码工程 - 代码生成的默认语言**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-08T12:52:58.540

在 Enterprise Architect 13.0 中，我在这里找到了它：

**开始 - 窗口 - 显示工具栏 - 代码工程**

在工具栏中，它的第一个选项。其次是默认数据库。数据库选项也在：

**开始 - 工作区 - 首选项 - 源代码工程 - 代码编辑器**

但没有编程语言。

# javascript - 计时器 JavaScript

> ID：11457079
> 
> 赞同：2
> 
> 时间：2012-07-12T17:13:51.383
> 
> 标签：javascript

这在 IE 中不起作用。Forever - 00:00:00 适用于 Chrome、Firefox。为什么？我该如何解决？

```
function timer()
{
    var now = new Date();
    var enddate = new Date("07,12,2012,23:00:00");
    var totalRemains = (enddate.getTime()-now.getTime());
    if (totalRemains>1)
    {
        var RemainsSec=(parseInt(totalRemains/1000));
        var RemainsFullDays=(parseInt(RemainsSec/(24*60*60)));
        var secInLastDay=RemainsSec-RemainsFullDays*24*3600;
        var RemainsFullHours=(parseInt(secInLastDay/3600));
        if (RemainsFullHours<10){RemainsFullHours="0"+RemainsFullHours};
        var secInLastHour=secInLastDay-RemainsFullHours*3600;
        var RemainsMinutes=(parseInt(secInLastHour/60));
        if (RemainsMinutes<10){RemainsMinutes="0"+RemainsMinutes};
        var lastSec=secInLastHour-RemainsMinutes*60;
        if (lastSec<10){lastSec="0"+lastSec};
        var mcend = Date.parse("Jan 1, 2009, 00:00:00");
        var mcnow = now.getTime();
        var mc = ((mcend-mcnow)/10).toFixed(0).substr(8);
        document.getElementById('timer').innerHTML = '<p class="timeline">TIME LEFT: '+ RemainsFullHours+":"+RemainsMinutes+":"+lastSec+'</p>';
        setTimeout("timer()",10);
    } 
    else {document.getElementById("timer").innerHTML = '<p class="timeline">TIME LEFT: 00:00:00</p>';}
}

<body onload="timer();"> 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:19:23.013

问题出在这一行：

```
var enddate = new Date("07,12,2012,23:00:00"); 
```

这不是日期格式。Firefox 英勇地理解它，别指望 Internet Explorer 也能帮助你，IE 是无情的，他一个人走。

对象构造`Date`函数有几个参数：

> 新日期（）
> 新日期（毫秒）
> 新日期（日期字符串）
> 新日期（年，月，日[，小时，分钟，秒，毫秒]）

使用该`dateString`选项时，您的日期字符串必须符合[RFC 2822 规范](https://www.rfc-editor.org/rfc/rfc2822#page-14)；如果您使用受支持的格式，它会起作用：

```
var enddate = new Date("July 12, 2012 23:00:00"); 
```

并且，从不，从不，从不将字符串传递给`setTimeout`，而是将其传递给函数引用：

```
setTimeout(timer,10); 
```

在这里试试：http: [//jsfiddle.net/bVCMe ​​/](http://jsfiddle.net/bVCMe/)

**文档**

*   `window.setTimeout`在 MDN - [https://developer.mozilla.org/en/DOM/window.setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)
*   `Date`在 MDN - [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/)
*   RFC 2822 字符串日期格式规范 - [https://www.rfc-editor.org/rfc/rfc2822#page-14](https://www.rfc-editor.org/rfc/rfc2822#page-14)

# html - 使用 CSS 操作 html 输入表单？

> ID：11457088
> 
> 赞同：0
> 
> 时间：2012-07-12T17:14:32.877
> 
> 标签：html, css

所以目前我正在尝试编辑 html 输入表单的一般布局和外观。这是我的 html 输入表单的代码片段：

```
<p> <form action='register.php' method="POST"></p>
<p>First Name: <input type="text" name="firstName" />Last Name: <input type="text"     name="lastName"/></p>
<p>Address: <input type="text" name="address" /></p>
<p>City: <input type="text" name="city" /></p> 
```

编辑这个的css是：

```
#Address, #emailAddress, #password, #confirmPassword, #firstName, #lastName{
width:50%;
outline: double 1px #FFA500;  
height:16px; 
padding:10px;  
} 
```

问题是，这段代码没有任何改变。这不应该改变我的 html 输入表单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:23:18.837

以下是一些快速观察：

*   元素嵌套不当。例如，段落标签中打开的表单标签。此外，表单标签未关闭
*   使用“id”属性而不是“name”
*   确保 #Address 与输入 ID 匹配（目前不匹配）
*   城市输入 ID 未反映在 CSS 中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:16:22.003

尝试使用`id`属性而不是`name`html 上的属性。

```
<input type="text" id="firstName" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T17:18:28.343

`input`一次为所有元素定义样式会更好：

```
input { 
    width: 50%;
    outline: double 1px #FFA500;  
    height: 16px; 
    padding: 10px; } 
```

您应该阅读[CSS 选择器](http://reference.sitepoint.com/css/selectorref)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:18:22.240

您需要为输入分配一个 ID 或类。

记住，使用 CSS；

ID = #object
类 = .object

`<p>First Name: <input type="text" name="firstName" id="firstName" />`

# android - 与 Google Drive 集成的应用的最小 Android API

> ID：11457092
> 
> 赞同：3
> 
> 时间：2012-07-12T17:14:44.007
> 
> 标签：android, google-drive-api

我刚刚看了[这个 I/O 部分](http://www.youtube.com/watch?v=xRGyzqD-vRg&feature=plcp)，真是太棒了。我想知道是否可以在使用最低 API 7 (2.1) 的应用程序上实现类似 Google Drive 访问（例如出于备份原因）的功能。有人试过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:49:42.127

要集成 Google Drive，您将需要 Drive API。此 SDK的[开发人员指南](http://code.google.com/p/google-api-java-client/wiki/DeveloperGuide)指定了 3 个环境：

*   Java 5（或更高）标准（SE）和企业（EE）
*   Android 1.5（或更高版本）（[详情](http://code.google.com/p/google-api-java-client/wiki/Android)）
*   谷歌应用引擎

# jquery - 为什么显示 Jquery-ui 对话框时页面会滚动

> ID：11457095
> 
> 赞同：1
> 
> 时间：2012-07-12T17:14:47.057
> 
> 标签：jquery, jquery-ui

每当我显示 jquery-ui 模态对话框滚动条时，页面中就会出现。

这就是我显示对话框的方式

```
$("#Frmula").dialog({
    autoOpen: false,
    height: 250,
    width: 460,
    modal: true,
    buttons: {
        //'Create an account': function() { },
        Close: function() {
            $(this).dialog('close');
            //$('input:visible:enabled:first').focus();
        }
    },
    close: function() {
    }
}); 
```

任何想法为什么会发生？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T03:32:43.490

很抱歉迟到了。

我的页面太大，包含很多`divs`,`tables`和`iframes`. 这就是为什么我无法提供 a `jsfiddle`，因为代码在更简单的表单上运行良好。

我页面中的一些内容是左对齐的，而另一些是右对齐的。我知道其中之一是导致`jquery-ui`错误确定对话框尺寸的问题。

我尝试一一选择性地删除父元素`divs`和`table`元素，发现一个特定的 div`float:right`是罪魁祸首。

`div`a 内的容器`iframe`被设置为`float:right`。这导致出现滚动条。我`float:right`从它移到了`div`它的直接父级，问题就解决了。

认为它可能会帮助其他人。

编辑：还要注意`Align`设置为的属性`Right`

# javascript - jQuery：从事件中获取表单数据

> ID：11457096
> 
> 赞同：1
> 
> 时间：2012-07-12T17:14:47.150
> 
> 标签：javascript, jquery, javascript-events

我有一个事件处理程序列出了一个 jQuery-“提交”事件。

表格如下所示：

```
<form class="registration well">
    <fieldset>
        <legend>registration</legend>
        <div class="control-group">
            <label class="control-label" for="_user_username">username</label>
            <div class="controls">
                <input type="text" id="_user_username" name="username" placeholder="george78" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="_user_email">email:</label>
            <div class="controls">
                <input type="email" id="_user_email" name="email" placeholder="george@example.com" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="_user_password">password:</label>
            <div class="controls">
                <input type="text" id="_user_password" name="password" placeholder="my password" />
            </div>
        </div>
        <button type="submit" class="btn btn-primary">register</button>
    </fieldset>
</form> 
```

事件处理部分如下：

```
e.preventDefault();

console.log(e);

var user = {
    username: $(e.target[1]).val()
    , email: $(e.target[2]).val()
    , password: $(e.target[3]).val()
 }; 
```

到目前为止，这有效。我现在只需要一种通用的有效方法来 foreach 这个过程。难点在于事件目标数组中的第一个元素是字段集，最后一个元素是按钮。所以我必须以某种方式获得之间的元素。

有人知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-07-12T17:18:52.237

为什么不直接通过 id 获取它们：

```
var user = {
username: $('#_user_username').val()
//etc.
 }; 
```

# jquery - Jquery调整大小功能不起作用

> ID：11457099
> 
> 赞同：0
> 
> 时间：2012-07-12T17:14:52.877
> 
> 标签：jquery, resize

我正在尝试将左/右运动构建到视差滚动站点中。除了调整大小功能外，一切正常。resize 函数似乎正在调整整个宽度，而不仅仅是视口当前所在的 .item 。这会导致元素发生一些奇怪的移动，当你在元素中移动时会变得更糟。

这是JavaScript：

```
 function scrollToPosition(element) {
if (element !== undefined) {
    $(".cont").scrollTo(element, 800, {
        margin: true
    });
 }
}

$(document).ready(function() {

var posts = $('.item');
var position = 0; //Start Position
var next = $('#next');
var prev = $('#prev').hide();

next.click(function(evt) {
    //Scroll to next position
    prev.show();
    scrollToPosition(posts[position += 1]);
    if (position === posts.length - 1) {
        next.hide();
    }
});

prev.click(function(evt) {
    //Scroll to prev position    
    next.show();
    scrollToPosition(posts[position -= 1]);
    if (position === 0) {
        prev.hide();
    }
});

$(window).resize(function () {
    resizePanel();
});

});

function resizePanel() {

width = $(window).width();
height = $(window).height();

mask_width = width * $('.item').length;

$('#cont').css({width: width, height: height});
$('.item').css({width: width, height: height});
$('#mask').css({width: mask_width, height: height});

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:26:56.920

我认为您只需要在调整大小后调整滚动`resizePanel()`：

```
function resizePanel(currentElement) {
    //resize items
    scrollToPosition(currentElement);
} 
```

或者在没有超时的情况下做同样的效果：

```
function resizePanel(currentElement) {
    //resize items
    $('.cont').scrollTo(currentElement, 0, {margin: true});
} 
```

并更新`resize`回调中的代码：

```
$(window).resize(function(){
    resizePanel( posts[position] );
} 
```

# multithreading - 无线程窗口 Visual Studio 2010 Ultimate

> ID：11457100
> 
> 赞同：17
> 
> 时间：2012-07-12T17:15:02.070
> 
> 标签：multithreading, visual-studio-2010

有谁知道这里有什么问题？调试菜单中没有线程窗口。我正在使用完整的 VS2010 (Ultimate SP1)。

![在此处输入图像描述](../Images/ffc700086a8713122d4b93de56df23f9.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-12T17:17:57.947

线程窗口选项仅*在实际调试*进程时才可用。

选择“开始调试”，然后返回相同的菜单，*线程*（以及许多其他选项）将出现。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-12T17:17:52.973

您需要进行调试才能使该选项显示在菜单中：

![在此处输入图像描述](../Images/07dc72a29dfc531dadd153a426b4b6c2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-11T08:46:39.210

我将一个线程标记为该线程的副本，但作者也在寻找“任务”窗口。添加此答案以明确它位于较新版本的 Visual Studio 中的相同菜单选项下。

根据答案，您需要处于调试模式才能显示此选项。

[![在此处输入图像描述](../Images/5cee7cc1f467e403d77aebf781a62fcb.png)](https://i.stack.imgur.com/bHjF2.png)

# pyramid - webfaction 上的金字塔：提供静态文件的问题

> ID：11457104
> 
> 赞同：1
> 
> 时间：2012-07-12T17:15:15.143
> 
> 标签：pyramid, webfaction

所以我在 webfaction 上有一个运行金字塔的网站。除了一些静态文件没有服务外，一切正常。4 要具体，我不知道为什么。

[http://karantan.webfactional.com/static/images/bg2.jpg](http://karantan.webfactional.com/static/images/bg2.jpg)

这个链接给了我 404 但图像在那里！字体也一样。3个字体链接：

[http://karantan.webfactional.com/static/css/fonts/titilliumtext25l005-webfont.woff](http://karantan.webfactional.com/static/css/fonts/titilliumtext25l005-webfont.woff) http://karantan.webfactional.com/static/css/fonts/titilliumtext25l005-webfont.ttf [http://karantan.webfactional。 com/static/css/fonts/titilliumtext25l005-webfont.svg](http://karantan.webfactional.com/static/css/fonts/titilliumtext25l005-webfont.svg)

再次。所有文件都在那里！

据我所知，所有其他文件都正常。那么 any1 知道为什么会发生这种情况吗？以及如何解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T20:01:00.027

正如您在评论中提到的，WebFaction 也指出我使用 nginx 静态服务器来解决这个问题。我在包含 TinyMCE 库时遇到了同样的问题；javascript 可以正常运行，但一些静态 HTML 页面会引发 404 错误。我仍然不确定为什么它会这样工作......

# c++ - 提供第二个可选参数而不需要提供第一个可选参数？

> ID：11457110
> 
> 赞同：2
> 
> 时间：2012-07-12T17:15:40.200
> 
> 标签：c++, parameter-passing, optional-parameters

我有这样的功能：

```
 void foo(int optionalinteger=0, float optionalfloat=0.0f, cell *optionalarray=NULL)
 {
          return;
 } 
```

我试图访问一个可选参数，例如

```
 foo(.optionalfloat=5.5f); // from another programming language 
```

但这给出了一个错误。如何仅访问我选择的可选值而不需要提供其他可选值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:21:27.427

根据您的需要，您可以重载该`foo()`功能。

```
void foo(int optionalinteger=0, float optionalfloat=0.0f, cell *optionalarray=NULL)
{
    return;
}

void foo( float optionalfloat )
{
    foo( 0, optionalfloat, NULL );
} 
```

这个解决方案当然是有限的，因为它不会在所有情况下都有效。如果给出以下方法

```
void foo(int optlint=0, float optflt1=0.0f, float optflt2=0.0f, cell *optionalarray=NULL)
{
    return;
} 
```

不可能为两个`float`参数创建单独的重载函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T17:43:31.007

如果你真的想要，你可以使用类似于[命名参数 idiom](http://www.parashift.com/c++-faq-lite/named-parameter-idiom.html)的东西，例如：

```
struct cell;

void foo(int optionalinteger, float optionalfloat, cell *optionalarray) {}

struct foo_params {
  foo_params& integer(int v) { integer_ = v; return *this; }
  foo_params& fl(float v) { fl_ = v; return *this; }
  foo_params& array(cell *v) { array_ = v; return *this; }

  // C++11 defaults for laziness, easy to change though
  int integer_=0;
  float fl_=0.0f;
  cell *array_=nullptr;
};

void foo(foo_params params = foo_params()) {
  foo(params.integer_, params.fl_, params.array_);
}

int main() {
  foo(foo_params().integer(100)
                  .array(0));
} 
```

如果你真的不希望在你的代码库中看到类似的东西，那么对于一些非常简单和违反直觉的东西来说，这是相当多的工作。

或者，如果您愿意，也可以使用[boost 命名参数库。](http://www.boost.org/doc/libs/1_48_0/libs/parameter/doc/html/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T17:36:57.820

我个人会添加两个重载：

```
void foo(int optionalinteger=0, float optionalfloat=0.0f, cell *optionalarray=NULL);

// Note: afloat not optional
void foo(float afloat , cell *optionalarray=NULL) {foo(0, afloat, optionalarray);}

// Note: anarray not optional
void foo(cell *anarray)                           {foo(0, 0.0f, anarray);} 
```

这样您就可以使用任何一组参数进行调用。

# c# - 服务器控件 ASP.NET 中的服务器控件

> ID：11457111
> 
> 赞同：1
> 
> 时间：2012-07-12T17:15:43.627
> 
> 标签：c#, asp.net, custom-server-controls, servercontrols

我正在尝试学习如何为 asp.net 制作服务器控件。我使用的是第 3 方服务器控件的 DevExpress。我正在尝试将 DevExpress 按钮添加到我的服务器控件。

```
public class Class1 : CompositeControl
{
    private DevExpress.Web.ASPxEditors.ASPxButton btnTest;

    protected override void Render(HtmlTextWriter writer)
    {            
        btnTest.RenderControl(writer);
    }

    protected override void CreateChildControls()
    {
        btnTest = new DevExpress.Web.ASPxEditors.ASPxButton();
        btnTest.Text = "wazzzup"; 
        Controls.Add(btnTest);
    }
} 
```

由于某种原因，除非在与我的服务器控件相同的页面上有另一个 devexpress 控件，否则该按钮不会显示在设计视图中。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:48:36.967

由于您是从 CompositeControl 继承的，因此不应覆盖 Render。

# asp.net - 使用 ASP.NET 和多个项目保持 DRY

> ID：11457114
> 
> 赞同：0
> 
> 时间：2012-07-12T17:15:53.537
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, webforms

**使用 ASP.NET 和多个项目保持 DRY。**

在我工作的公司，我们正在为我们的大型 Intranet 站点从 Classic ASP 迁移到 ASP.NET。

目前有两个开发人员正在使用这个 Intranet 站点，我们目前不使用任何形式的源代码控制，除了相互交流我们目前正在处理的项目。我不确定我们是否会获得使用 Team Foundation Server 或任何其他源代码控制系统的批准。

我们的网站目前由单个静态内容页面和单个动态内容页面组成。

此外，大约有 50 种不同的 Web 应用程序都被整个公司的各个部门使用。这些都具有复杂性，从单页表单一直到非常复杂的多页应用程序，具有各种级别的报告生成功能。

所有这些网页共享一个共同的布局、基本的 javascript、css、页眉、页脚和侧边栏。我想尽可能遵循 DRY 原则，以帮助重新设计或更改共享页眉、页脚和侧边栏。

我的猜测是，我们最终会在同一个域名下的一台服务器上混合使用 HTML、Classic ASP、.NET Webforms 和 .NET MVC 应用程序。

**目标：**

1.  **Master Pages / _Layout.cshtml -**在各种 web 表单和/或 MVC 应用程序之间共享单个母版页和 MVC 布局页面。我不介意必须为 Webforms 维护一个母版页和为 MVC 维护一个布局页面。
2.  **页眉、页脚、侧边栏 -**如果我无法轻松共享 Master/_Layout 页面。我想在所有不同的页面之间至少共享页眉、页脚和侧边栏，以便可以轻松地在整个站点范围内更新它们。
3.  **发布单个应用程序的更改 -**我宁愿不必在每次对其中一个应用程序进行更改时都发布整个站点和所有各种应用程序。有没有办法保留此功能并仍然实现目标 1 和/或 2？

如果您可以请为几乎没有使用 ASP.NET Webforms、MVC 和 C# 经验的人定制您的答案。我已经完成了几个教程，但仍处于学习过程的初级阶段。

感谢您提供的任何帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:34:44.147

要满足所有三个要求，您必须将布局放在一个单独的项目中，该项目对于您的所有其他项目都是通用的。

看看这篇[文章](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)，它解释了如何将视图编译成 dll。完成此操作后，您将能够在其余应用程序之间共享此 dll 文件，从而共享布局页面，其中包含页眉、页脚和侧边栏。

将所有其他 MVC 应用程序也放在单独的项目中（您仍然可以将它们全部放在一个解决方案中），以便您可以单独构建和部署它们。

# sql - 为了性能而牺牲数据库大小，反之亦然？

> ID：11457116
> 
> 赞同：0
> 
> 时间：2012-07-12T17:15:59.147
> 
> 标签：sql, database-design, coding-style

假设我正在为在线商店建立一个网站并拥有一个产品数据库。所有这些产品都有自己的页面和各自的 URL。

如果 URL 始终可以从数据库中的其他数据派生（假设每个产品都可以在 http://example.com/[ PRODUCT.CATEGORY ]?prod=[ SHA1(PRODUCT.NAME) ] 找到），会将 URL 存储在表的另一个字段中是否明智？

一方面，它是重复数据（它可以很容易地从表中的其他现有字段导出）。另一方面，这些 URL 到处都在使用，每次需要它们时重新派生它们似乎很浪费。

这种情况是否有最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:19:08.463

您不应该在数据库中存储任何 url。

您应该在运行时根据您要查找的数据创建 url。

显示产品的页面可以忽略它不需要的任何字段。

您还应该使用 ID 字段而不是 product.name。除非您试图对用户隐藏某些产品，否则没有理由 sha1 密钥。

请记住，使用主键查找记录是获取该记录的最快方法。

# php - 打造独一无二的单曲 具有特定值的所有 MySQL php 结果的元素

> ID：11457126
> 
> 赞同：0
> 
> 时间：2012-07-12T17:16:28.920
> 
> 标签：php, mysql, for-loop, nested-loops

这是我的问题。我正在从 mysql 数据库返回结果并使用 for 循环来回显结果。虽然它变得有点复杂，因为我正在使用一些表数据嵌套在其他结果中。此代码在名为“Spain”的 div 中返回“Pablo Picasso”，很好，但如果西班牙也有“El Greco”，那么我会得到两个“Spain”div，而不仅仅是一个。

所以：我只想为表列中的每个唯一值返回一个结果，而不是每个值。

```
$results = array();
while ($row = mysql_fetch_assoc($result)) {
$results[] = $row;
}

foreach ($results as $row)
    {
    echo "<div class=\"".$row['country']."\">".$row['country'];
    echo "<div class=\"Box\">";
    $tempCountry = $row['country'];

    foreach ($results as $row)
    {
    if ($row['country']== $tempCountry) echo "<div>artists name</div>";
    }

    echo "</div>";echo "</div>";
} 
```

不知是嵌套循环的构造，还是别的什么，不知道！！！请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:40:26.027

我同意@Kalpesh，您需要按国家/地区订购结果。

现在你有多个嵌套循环，而你真正需要的只是一个。尝试只使用一个循环来遍历数据。在每次迭代中，检查 $tempCountry 值以查看它与当前行的国家/地区相比是否不同。如果是，您需要关闭当前的`<div>`，打开一个新的`<div>`并更新 $tempCountry 值。否则，呼应艺术家的名字。

**编辑：下面添加了伪代码**

*   从数据库中检索数据（查询应按国家/地区对数据进行排序）
*   将 $tempCountry 初始化为 null
*   循环遍历每一行

    *   如果 $tempCountry 等于该行所在的国家/地区

        2.  打印艺术家
    *   别的
        1.  设置 $tempCountry 等于该行的 Country
        2.  关闭 div 标签
        3.  打开一个新的 div 标签
        4.  打印艺术家

请注意，您不想在第一次通过循环时关闭 div 标记。此外，您需要在循环结束后关闭 div 标签。

```
foreach ($results as $row) {

    if ($tempCountry == $row['country']) {

    echo "<div class=\"Box\">";

        echo "<div>artist</div></div>";

    }

    else {

        $tempCountry == $row['country'];

        echo "</div><div class=\"".$row['country']."\">".$row['country'];

        echo "<div class=\"Box\">";

        echo "<div>artist</div></div>";

    }

    echo "</div>";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:35:22.373

在循环之外创建一个空数组。在输出时，将 $row 的值推送到循环内的数组中。然后仅在数组中不存在值时才输出。您可以为此使用[in_array 。](http://php.net/manual/en/function.in-array.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:05:01.613

我找到的解决方案是将一个 foreach 嵌套在另一个内部循环中，即带有 GROUP BY 的外部循环 SELECTS。在此示例中，我为每个国家/地区获取一个外部，然后在该内部，该国家（或具有该列值）的每个人（或项目）。真的很有用。

新代码：解决方案（使用 GROUP BY 构建外部容器）

```
// create array to build group div
$country = mysql_query("SELECT * FROM table GROUP BY `country`");
// create array for inner contents
$result = mysql_query("SELECT * FROM table ORDER BY name"); 

//array for group(countries in this instance)
$countrys = array();
while ($row = mysql_fetch_assoc($country)) {
$countrys[] = $row;
}
//array for inner contents
$results = array();
while ($row = mysql_fetch_assoc($result)) {
$results[] = $row;
}

$tempCountry="";
foreach ($countrys as $row)
    {   
    $tempCountry = $row['country'];

    echo "<div class=\"".$row['country']."\">";
    echo $row['country'];
    echo "<div class=\"Box\">";
    foreach ($results as $row) {
    if ($tempCountry == $row['country'])
    {
    echo"<div>inner contents of that group</div>";
    }
    }
    echo "</div>";
    echo "</div>";
    } 
```

# android - Android中的多个文件重命名

> ID：11457140
> 
> 赞同：4
> 
> 时间：2012-07-12T17:17:45.233
> 
> 标签：android, shell, scripting

我正在尝试使用 Android 的 shell 编写一个脚本来重命名给定扩展名的所有文件以添加 .bak 扩展名，另一个以删除它。

这适用于将 .bak 扩展名添加到目录中的所有 pdf 文件

```
ext=.bak
for f in *.pdf
do
  mv $f $f$ext
done 
```

但是使用 bash 字符串切片`${varname:index:length}`在 android shell 中不起作用，所以我不知道如何删除扩展。有没有人有任何想法？

编辑：澄清一下，我正在尝试找到一种方法来删除 android shell 中字符串的最后四个字符。我还没有考虑过其他可以解决我的特定问题的解决方案也受到欢迎。

更新：根据给定的答案，以下代码将从未修改的 Android shell 中当前目录中具有该扩展名的任何文件中删除文件扩展名（其中 .bak 可以替换为您选择的扩展名）

```
for f in *.bak
do
    mv $f ${f%.*}
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:35:45.143

您是否尝试过删除子字符串

```
fname="test.abc.bak"
mv $fname ${fname%.*} 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:40:41.037

我有一些代码，但它使用临时文件，只需尝试一下并检查您的用处

```
ls -l |awk '{print $9}' >/list
cat /list |while read line
do
echo $line >/tempfile
first=`cut -f1 -d'.' /tempfile`
echo $first >>/output.txt
mv $line $first
done 
```

# javascript - 如何将 Javascript 代码显示为页面内容？

> ID：11457142
> 
> 赞同：1
> 
> 时间：2012-07-12T17:17:50.840
> 
> 标签：javascript, html, ajax, solr

我制作了一个需要 javascript 的网页。更具体地说，如果有人听说过，我正在使用 Ajax-Solr API 为 Apache Solr/Lucene 搜索引擎制作良好的用户界面。对于出现的一些结果（即已被爬取的网页），javascript 嵌入在某些网页中，这弄乱了我后续的 html/javascript 的一部分。帮帮我。这是我的一些代码：

```
AjaxSolr.theme.prototype.snippet = function(doc) {
    var output = '' + doc.id;
    if (doc.text.length > 300) {
        output += doc.text.substring(0, 300);
        output += '<span style="display:none;">' + doc.text.substring(300);
        output += '</span> <br id="aftsnippet"/><a href="#" class="more"><button id = "expand' + doc.id + '">Expand/Contract</button></a>';
    } else {
        output += doc.text + '<br/>';
    }
    output+='<a id="goToSite"><button>Go to Site</button></a><a href="pages/sitedetails.html?id=' + doc.id + '" target="_blank"><button id = "sitedetailsbutton' + doc.id + '">Site Details</button></a>';
    return output;
}; 
```

我不知道这是否有帮助，但几乎发生的事情是 doc.text 可能包含来自在线 javascript 文件的一些随机 javascript，然后导致按钮来自

```
<button>Go to Site</button></a><a href="pages/sitedetails.html?id=' + doc.id + '" target="_blank"><button id = "sitedetailsbutton' + doc.id + '">Site Details</button></a>'; 
```

不出现。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:34:56.583

您需要对 JavaScript 进行 HTML 编码。您可以通过以下方式做到这一点。

```
function htmlEncode(s) {
    return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
} 
```

此外，您可以根据需要用 替换换行符`<br />`：

```
function htmlEncode(s) {
    return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\n/g,'<br />');
} 
```

# ruby-on-rails-3 - 在 Rails 中解析 XML

> ID：11457147
> 
> 赞同：1
> 
> 时间：2012-07-12T17:18:12.763
> 
> 标签：ruby-on-rails-3, xml-parsing

该变量`@photo`包含以下 XML：

```
<photo id="2733">
  <urls>
    <url type="photopage">http://www.flickr.com/photos/bees/2733/</url>
  </urls>
</photo> 
```

我需要获取它的网址，我试图这样做， `@photo.urls.url`但我做不到。如何访问http地址 `http://www.flickr.com/photos/bees/2733/`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:20:11.827

您可以使用 nokogiri 宝石。是用来操作 xml 文档的。

# iphone - Xcode 配置文件

> ID：11457154
> 
> 赞同：0
> 
> 时间：2012-07-12T17:18:28.827
> 
> 标签：iphone, xcode

有没有办法在代码中测试正在使用哪个证书？（开发配置文件或分发配置文件？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:29:23.437

打开终端并转到您存储 .app 文件的文件夹。然后写下面的命令。

$ codesign -d -vv YOUR_APP_NAME.app/YOUR_APP_NAME

它将打印如下信息。

```
Executable=/Users/craig/Projects/FrenzicTouch/build/Distribution-iphoneos/Frenzic.app/Frenzic
Identifier=com.iconfactory.Frenzic
Format=bundle with Mach-O thin (armv6)
...
Signature size=4331
*Authority=iPhone Distribution: The Iconfactory*
Authority=Apple Worldwide Developer Relations Certification Authority
Authority=Apple Root CA
Signed Time=Nov 12, 2008 1:46:07 PM
... 
```

检查权威。如果它有 iPhone 发行版，则它使用发行版配置文件签名，否则为开发人员。

# jquery - jquery检查字符串是否以开头然后提取它

> ID：11457156
> 
> 赞同：1
> 
> 时间：2012-07-12T17:18:32.537
> 
> 标签：jquery, split, dynamic-data

我似乎已经想出了如何做＃1，但是，不知道如何做第二部分......

我有各种 p 元素，每个元素都有一系列类：

```
<p class="note cxid-45 contextual-item">Example</p> 
```

我正在尝试确定是否：

（1）类列表包含一个以“cxid-”开头的类（2）如果有，我想存储完整的类名

所以，在上面的标记中，我想将“cxid-45”存储在一个变量中：c

我管理了这个：

```
var pcl = $(this).attr("class").split(" ");

if(pcl.indexOf('cxid-') >= 0) {
  alert('found');  
  //This works, but not sure how to get the full string into the variable
  var c = ???;
} else {
  alert('not found');
  var c = '';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:34:50.730

尝试这个

```
var el=$('p[class*="cxid-"]');
var c=el.length ? el.prop('class').match(/cxid-[^\s]+/g)[0] : 'Not Found!';
alert(c); // If found then it'll alert the class name, otherwise 'Not Found!' 
```

[**演示。**](http://jsfiddle.net/PNzJ7/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:22:37.857

你可以尝试这样的事情：

```
var c = $(this).attr("class").match(/cxid-[^\s]+/g); 
```

`c`将是一个`array`类，以`'cxid-'`

```
if( c.length > 0 ){
    alert("There is at least on class,which starts with 'cxid-'");
}else{
    alert("Nothing found");
} 
```

# email - Mac Mail“查看更多”搞乱了 html 格式

> ID：11457157
> 
> 赞同：1
> 
> 时间：2012-07-12T17:18:35.930
> 
> 标签：email, html-email, apple-mail

我有一封发送出去的 html 电子邮件。它是用表格格式化的，因为原始设计者说，对于邮件客户端来说，这些比 div 更可靠。所有样式都是内联的：

```
<td style="font-size: 12px..."> 
```

当收到一封电子邮件时，一切看起来都很棒。但是一旦mac mail形成一个线程，就会插入“查看更多”。

这完全弄乱了格式，使单元格不对齐。See More 消息似乎已正确插入 - 在单个单元格中，类似于

```
 ...
   <td>
   My Text
   See More
   My Text
   </td> 
```

但是有两条查看更多消息。一个朝上，一个朝下。诡异的？第一个实际上并没有隐藏任何文本 - 而是重复它！

```
Hi Kate
See More
Hi Kate 
```

就是它的样子。第二个确实隐藏了文本。有没有人遇到过这个问题？表格是错误的吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:12:46.740

我不确定这是否相关，但在 iPhone 或 iPad 上的 iOS 中，如果有人选择使用 POP，完整的消息将被截断。

解决方法是在您的`</head>`.

见：[http ://www.emailonacid.com/blog/details/C13/ensure_that_your_entire_email_is_rendered_by_default_in_the_iphone_ipad](http://www.emailonacid.com/blog/details/C13/ensure_that_your_entire_email_is_rendered_by_default_in_the_iphone_ipad)

# android - 使用标准 Android 按钮，但经过修改

> ID：11457164
> 
> 赞同：0
> 
> 时间：2012-07-12T17:19:03.380
> 
> 标签：android, button, drawable

我正在尝试在我的布局中使用标准的 android 按钮，但在未按下时使背景透明，或者使文本左对齐或右对齐，或者我想要的任何自定义修改。是否有一些我缺少从标准按钮继承但更改一些属性的简单方法？我查看了下面的两个帖子，但无法让它们工作，而且太新，无法在这些页面上发表评论，而且这两种解决方案都有问题：

[我已经尝试根据如何禁用 onClick 上的默认按钮颜色更改属性](https://stackoverflow.com/questions/5726567/android-how-to-disable-the-default-button-color-changing-property-on-onclick)复制 @android:drawable/btn_default 源，但是从那里链接到的所有资源都是私有的。我试图找到这些私人文件的来源，但即使我进入 android sdk 文件夹获取原始文件，我也找不到其中的一些文件。如果这是编辑标准按钮的方法，我在哪里可以找到这些文件？复制这些私人文件绝对不是理想的，如果标准选择/按下/任何按钮在另一个api中发生变化，在这种情况下我仍然会使用旧的并且按钮不一致......

此外，我还看到[了具有不同颜色的标准 Android 按钮，](https://stackoverflow.com/questions/1521640/standard-android-button-with-a-different-color)这通常适合制作自定义按钮，但我如何将它设置为与标准按钮完全一样？即颜色是什么，渐变是否正确，等等。同样，如果标准按钮发生变化，我仍然会使用旧值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:36:48.943

在按钮上使用样式：

```
<Button id= ... style="@style/myButton" /> 
```

值/样式.xml：

```
<style name="myButton" parent="@android:style/Widget.Button">
  <item name="android:background">@drawable/myBackground</item> 
</style> 
```

要处理各种按钮状态（例如按下等），您需要一个选择器可绘制资源，例如 drawable/myBackground.xml：

```
<?xml version="1.0" encoding="utf-8" ?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android">
 <!--  Non focused states 
  --> 
  <item android:state_focused="false" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/button_unfocused" /> 
  <item android:state_focused="false" android:state_selected="true" android:state_pressed="false" android:drawable="@drawable/button_unfocused" /> 
 <!--  Focused states 
  --> 
  <item android:state_focused="true" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/button_focus" /> 
  <item android:state_focused="true" android:state_selected="true" android:state_pressed="false" android:drawable="@drawable/button_focus" /> 
 <!--  Pressed 
  --> 
  <item android:state_pressed="true" android:drawable="@drawable/button_press" /> 
</selector> 
```

drawable/button_press.xml 可以根据需要指定渐变、形状、边框等。

一个做背景渐变、圆角和边框的 button_press.xml 示例：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
  <stroke android:width="1dp" android:color="#FF404040" /> 
  <corners android:radius="6dp" /> 
  <gradient android:startColor="#FF9B00" android:centerColor="#FFB300" android:endColor="#FFCA00" android:angle="90" /> 
</shape> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:00:56.457

CSmith 关于使用带有 parent="@android:style/Widget.Button" 的样式的答案的第一部分是更改按钮属性（如左对齐或右对齐文本）的最佳方法。然而，答案的其余部分描述了如何创建自己的选择器，所以我想我会添加我的解决方案以从默认按钮*继承*选择器，然后只覆盖你想要更改的特定选择器：

只需将 android:drawable="@android:drawable/btn_default" 用于您想要默认行为的那些选择器，然后您可以只为您想要更改的那些选择器指定自定义字段。在我尝试拥有一个继承所有选择器但通常具有透明背景而不是灰色背景的按钮的情况下，请执行以下操作（为了清楚起见，在此处复制 CSmith 答案的第一部分，感谢 CSmith！）：

使用自定义样式定义按钮：

```
<Button id= ... style="@style/myButton" /> 
```

res/values/styles.xml：

```
<style name="myButton" parent="@android:style/Widget.Button">
    <item name="android:background">@drawable/myBackground</item>
    ...other changes to default button... 
</style> 
```

然后，继承所有选择器并覆盖显示灰色的选择器：在 res/drawable/myBackground.xml 中：

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_window_focused="false" 
          android:drawable="@drawable/transparent_btn" />    
    <item android:state_pressed="true"
          android:drawable="@android:drawable/btn_default" />
    <item android:state_focused="true"
          android:drawable="@android:drawable/btn_default" />
    <item android:drawable="@drawable/transparent_btn" />
</selector> 
```

并且，在 res/drawable/transparent_btn.xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <solid android:color="@android:color/transparent" />
</shape> 
```

注意：这个例子不担心 state_enabled，如果你想要一个按钮是否启用的特定行为，也只是覆盖那些选择器。

# javascript - 有没有办法从 encodeURIComponent 中排除某些字符

> ID：11457165
> 
> 赞同：1
> 
> 时间：2012-07-12T17:19:05.967
> 
> 标签：javascript

我正在为我的 url 构建一个查询字符串，并且需要从编码中排除某些字符。

我想排除“&”和“=”，以便我可以这样声明：

first=blah&second=blah 以此类推....

我想最好的表达方式是如何阻止它们被编码？

一些代码：

```
 else if (array[i].nodeName == "SELECT") {
   if (array[i].id == "multiple") {
     var selected = $.map($('#multiple option:selected'),

     function (e) {
       return $(e).val();
     });
     $.each(selected, function (index, value) {
       name = array[i].name;
       values += app + "\&" + key + "=";
     });

   } else {
     name = arr[i].name;
     values = arr[i].value;
   }
 }

 key = encodeURIComponent(name);
 value = encodeURIComponent(values);
 queryString += name + "=" + values + "&"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:27:27.810

> 有没有办法排除某些字符`encodeURIComponent`？

不，这是一个只接受一个参数的内置函数。

* * *

`&`当它出现在键或值的中间时，您确实需要进行编码，因此最简单的解决方案是在组合它们之前对各个名称和值进行编码。定义

```
function emit(name, value) {
  queryString += (queryString.indexOf("?") >= 0 ? "&" : "?")
    + encodeURIComponent(name) + "=" + encodeURIComponent(value);
} 
```

然后在多个选择中为每个名称/值对调用该函数，或者为每个其他检查的输入调用一次。

```
else if (array[i].nodeName=="SELECT" ){
  if(array[i].id == "multiple"){
    var selected = $.map( $('#multiple option:selected'),
                          function(e){return $(e).val();});
    $.each(selected, function(index, value){
             emit(array[i].name, value);
           });
  } else {
    emit(arr[i].name, arr[i].value);
  }
} 
```

使用`encodeURI`或类似方法将无法正确编码`#`或`=`其他必要的代码点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:27:14.510

函数的名称应该表明它应该如何使用：在查询字符串的**片段**上调用它，而不是整个查询字符串。

*编辑*-我尝试根据您的代码创建一个示例，但我无法弄清楚它要做什么。就目前而言，它似乎有语法错误。

# java - JNI_CreateJavaVM 在 64 位 C 中失败

> ID：11457172
> 
> 赞同：5
> 
> 时间：2012-07-12T17:19:30.143
> 
> 标签：java, c, linker, java-native-interface, libraries

我遇到与[JNI_CreateJavaVM 退出代码 -1 类似的问题？](https://stackoverflow.com/questions/7989502/jni-createjavavm-exit-code-1)，除了我的代码在 32 位编译时运行，但在 64 位编译时失败。我正在使用 Windows SDK 7.1 平台为 Visual Studio Express 2010 中的每个配置更改我的 JDK 位置。我的包括：

```
C:\Program Files\Java\jdk1.6.0_29\include; (for jni.h)
C:\Program Files\Java\jdk1.6.0_29\include\win32; (for jni_md.h) 
```

我的其他库是：

```
C:\Program Files\Java\jdk1.6.0_29\lib; (for jvm.lib and jawt.lib) 
```

我的源代码只是简单地尝试在 C 中初始化 JVM，然后无限循环以确保命令提示符在 VSC++ 中保持打开状态。

```
#include "stdafx.h"
#include "jni.h"

JNIEnv* create_vm(JavaVM ** jvm);

int i;
JavaVM* jvm;
JNIEnv * env;

int _tmain(int argc, _TCHAR* argv[])
{
    printf("Hello World!");
    env = create_vm(&jvm);

    if (env == 0) { return 7; }

    i = 0;

    while (1) { i++; }

    return 0;
}

JNIEnv* create_vm(JavaVM ** jvm) {

    JavaVMInitArgs vm_args;
    int ret;
    JavaVMOption options;

    //Path to the java source code
    options.optionString = "-Djava.class.path=H:\\jarpath\\jarfile.jar";
    vm_args.version = JNI_VERSION_1_6; //JDK version. This indicates version 1.6
    vm_args.nOptions = 1;
    vm_args.options = &options;
    vm_args.ignoreUnrecognized = 0;

    ret = JNI_CreateJavaVM(jvm, (void**)&env, &vm_args);

    if(ret < 0)
        printf("\nUnable to Launch JVM\n");
    return env;
} 
```

同样，这适用于 32 位配置，唯一的区别是 JDK 根目录是 32 位文件夹（即 Program Files(x86)）。

打印后，

```
Error occurred during initialization of VM
Unable to load native library: Can't find dependent libraries 
```

代码在 VSC++ 控制台窗口中退出并出现以下错误：

```
The program '[5684] JNI_Test.exe: Native' has exited with code 1 (0x1). 
```

我在库或基本 C 编码方面有什么遗漏吗？我有一段时间没有用 C 编写代码了，而且我对整个库链接一开始也不是很熟悉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:44:51.097

试试这个代码（它不使用导出的 .lib 文件，它只需要 JNI 头文件和 JVM.dll）。我已经使用了命令

```
gcc -m64 -o test.exe small_test.cpp -I "C:\Program Files\Java\jdk1.6.0_25\include" -I "C:\Program Files\Java\jdk1.6.0_25\include\win32" -lstdc++ 
```

编译它（MinGW，但 VC++ 也应该工作。Mingw 使用较旧的 MSVCRT）

检查 GetLastError()。我怀疑 64 位 C 运行时有问题。

```
#include <windows.h>
#include <stdio.h>
#include <jni.h>
#include <string.h>

#define PATH_SEPARATOR ';' /* define it to be ':' on Solaris */
#define USER_CLASSPATH "." /* where Prog.class is */

typedef /*_JNI_IMPORT_OR_EXPORT_*/ jint (JNICALL *JNI_CreateJavaVM_func)(JavaVM **pvm, void **penv, void *args);

JNI_CreateJavaVM_func JNI_CreateJavaVM_ptr;

JNIEnv* create_vm(JavaVM ** jvm)
{
    JNIEnv *env;
    JavaVMInitArgs vm_args;
    JavaVMOption options;
    HMODULE jvm_dll;
    int ret;

    options.optionString = "-Djava.class.path=D:\\monotest\\src_CJNIJava\\bin"; //Path to the java source code
    vm_args.version = JNI_VERSION_1_6; //JDK version. This indicates version 1.6
    vm_args.nOptions = 1;
    vm_args.options = &options;
    vm_args.ignoreUnrecognized = 0;

    jvm_dll = LoadLibrary("C:\\Program Files\\Java\\jre6\\bin\\server\\jvm.dll");

    /// You might check the GetLastError() here after the LoadLibrary()
    if(jvm_dll == NULL) { printf("can't load dll\n"); exit(1); }

    JNI_CreateJavaVM_ptr = (JNI_CreateJavaVM_func)GetProcAddress(jvm_dll, "JNI_CreateJavaVM");

    /// You might check the GetLastError() here
    if(JNI_CreateJavaVM_ptr == NULL) { printf("can't load function\n"); exit(1); }

    ret = JNI_CreateJavaVM_ptr(jvm, (void**)&env, &vm_args);
    if(ret < 0) { printf("\nUnable to Launch JVM\n"); }
    return env;
}

int main(int argc, char* argv[])
{
    JNIEnv *env;
    JavaVM * jvm;
    env = create_vm(&jvm);

    if (env == NULL) { return 1; }

    int n = jvm->DestroyJavaVM();
    return 0;
} 
```

# java - 查找运行 Main 的子类的名称

> ID：11457177
> 
> 赞同：0
> 
> 时间：2012-07-12T17:19:48.780
> 
> 标签：java, reflection, subclass, main

我想创建一个方便的超类，它将创建一个[运行它](https://stackoverflow.com/questions/2243920/can-we-call-main-method-of-the-parent-from-a-subclass-in-java)的任何子类的实例，而不必对子类的名称进行硬编码。最快的方法是什么？

我们可以假设子类的构造函数将具有相同的签名，例如没有参数。

```
class Main {
    public static void main (String [] args) {
        Main m = new NAME-OF-SUBCLASS();
    }
} 

class MainSub1 extends Main { /*...*/ } 
class MainSub2 extends Main { /*...*/ } 
```

因此，当从 MainSub1 （`$ java MainSub1`从命令行）调用 main 时，会创建一个 MainSub1 对象，等等。

当我写这篇文章时，我发现[这个](https://stackoverflow.com/questions/11313271/create-subclass-from-superclass-static-main)线程接受的答案说它不能完成，但它当然可以，不知何故，通过反射或其他东西，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:28:50.377

并不是说我真的会推荐它，但它有一个肮脏的把戏：

```
class Main {
    static Main m;
    public static void main (String [] args) {
        // use m
    }
} 

class MainSub1 extends Main { static { m = new MainSub1(); } } 
class MainSub2 extends Main { static { m = new MainSub2(); } } 
```

一个严肃的答案是为每个子类编写一个单独`main`的，但让它调用一个接受适当实例的公共继承方法。

# php - 带空格的十六进制正则表达式

> ID：11457182
> 
> 赞同：0
> 
> 时间：2012-07-12T17:20:00.040
> 
> 标签：php, regex, hex

我试图弄清楚为什么这个正则表达式与这条线不匹配，但我没有更多的想法。

```
(?:([a-zA-Z0-9]{2})\s\s)+
53  65  72  76  65  72  3a  20  41  70  61  63  68  65  00  45 
```

但这并没有捕捉到所有的十六进制字节......

**UPD：**我需要抓住每一口 preg_match $results

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:23:04.403

你怎么知道那是两个空格而不是一个制表符？试试这个正则表达式：

```
/^(?:([a-f0-9]{2})\s*)+$/i 
```

请注意，我已将其范围缩小为仅匹配十六进制，而不是 base-36。此外，您的正则表达式可能不匹配，因为它正在寻找字符串末尾的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:30:58.973

该正则表达式**确实**与该行匹配，假设您粘贴到问题中的行正是您要匹配的行：

```
<?php
$hex = "53  65  72  76  65  72  3a  20  41  70  61  63  68  65  00  45  ";

preg_match('/(?:([a-zA-Z0-9]{2})\s\s)+/', $hex, $matches);
var_dump($matches); 
```

输出：

```
array(2) {
  [0]=>
  string(64) "53  65  72  76  65  72  3a  20  41  70  61  63  68  65  00  45  "
  [1]=>
  string(2) "45"
} 
```

但是，您最有可能尝试做的是获取单个十六进制字节的数组，因此，如果您在该正则表达式中使用与上述类似的代码，那么您做错了。它应该是这样的，而不是：

```
preg_match_all('/([a-zA-Z0-9]{2})\s{2}/', $hex, $matches);
// $matches[1] will be your array of hex bytes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:38:08.350

只有几个原因，为什么这不符合您的输入。请检查该行是否以两个空格结尾，以及每个数字之间是否真的有两个空格字符。还要检查您的输入是否包含字符代码 160（牢不可破的空格），因为据我所知 PCRE 不会将其识别为 \s。

# iphone - 在 xCode 中加载自定义 UIFonts

> ID：11457189
> 
> 赞同：3
> 
> 时间：2012-07-12T17:20:23.393
> 
> 标签：iphone, objective-c, ios, xcode

所以我实际上有几个问题。第一个是我想在 iOS 应用程序中使用“Font Suitcase”文件作为自定义字体，但无法让它工作。不仅如此，我也无法正确使用 .ttf 文件。以下是我为尝试使其工作而采取的步骤：

1.  将文件导入我在 xCode 中的支持文件中。
2.  在 Info.plist 文件中添加文件名，例如“badaboom.TTF”
3.  调用 UIFont *myFont = [UIFont fontWithName:@"Badaboom" size:20.0];

我还使用[此处](http://ajnaware.wordpress.com/2008/10/24/list-of-fonts-available-on-the-iphone/)找到的代码来查看字体是否正在加载并且它也没有出现。这适用于 ttf 和字体手提箱文件。

知道我做错了什么吗？

谢谢，皮特

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T17:58:44.477

您必须将字体添加为资源。

因此，请执行以下步骤：

*   转到您的**项目设置**
*   选择你的**目标**
*   转到**构建阶段**
*   将自定义字体添加到**Copy Bundle Resources**

有了这个和您发布的代码，您现在应该能够加载自定义字体

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:48:10.820

在 Finder 中双击 TTF 文件。看标题栏。预览中的名称必须与报价中的名称完全相同 [UIFont fontWithName:@"" size:20.0];

它区分大小写。

# ruby - 我可以在 Ruby 中删除方法别名吗？

> ID：11457190
> 
> 赞同：6
> 
> 时间：2012-07-12T17:20:33.627
> 
> 标签：ruby, metaprogramming, alias-method

假设我有一段 Ruby 代码，我想在其中给一个方法起别名（我不知道为什么；假设我有一个很好的理由）。

```
class String
    alias_method :contains?, :include?
end 
```

在本节之后，我是否可以*删除*此别名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T17:41:24.503

`remove_method`在大多数情况下应该可以工作。但是，如果您`alias_method`覆盖了现有方法，则可能需要通过单独的`alias_method`调用保存原始方法。

```
# assuming :contains? is already a method 
alias_method :original_contains?, :contains?
alias_method :contains?, :include? 
```

然后恢复原始状态：

```
alias_method :contains?, :original_contains?
remove_method :original_contains?  # optional 
```

另请注意，修改在多个线程中使用的类很容易出现竞争条件。如果您试图禁止库使用别名，那么如果您在别名存在时调用这些库的方法，则无法阻止这种情况。我们可能会在 ruby​​ 2.0 中看到一种方法：http: [//yehudakatz.com/2010/11/30/ruby-2-0-refinements-in-practice/](http://yehudakatz.com/2010/11/30/ruby-2-0-refinements-in-practice/)

如果您能说出为什么要删除别名，那将会很有帮助。如果该方法名称之前不存在，则其他库不应受到猴子补丁的影响。此外，您应该考虑子类化`String`（或委托给字符串实例）而不是修补`String`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T17:26:34.113

```
def hello
   puts "Hello World"
end
alias :hi :hello

hi #=> "Hello World"
undef hi
hi #=> NameError
hello #=> "Hello World" 
```

编辑：请注意，这仅适用于在`main`对象上创建的方法。为了在课堂上执行此操作，您需要执行类似的操作，`Hello.class_eval("undef hi")`

但是，从元编程的角度来看，在处理类时，我喜欢使用 ，`remove_method :hi`因为它会导致方法查找失败并从父类中获取方法。

```
class Nums < Array
   def include?
      puts "Just Kidding"
   end
end

n = Nums.new
n << 4 #=> [4]
n.include? #=> "Just kidding"
Nums.class_eval("remove_method :include?")
n.include? 4 #=> true
Number.class_eval("undef include?")
n.include? 4 #=> NoMethodError 
```

`remove_method`对元数据更友好。

# jquery - jQuery延迟悬停事件从初始化

> ID：11457192
> 
> 赞同：0
> 
> 时间：2012-07-12T17:20:38.820
> 
> 标签：jquery, animation, hover, delay

我有一个页眉需要在页面加载时延迟一段时间，然后淡出。[可以在这里测试](http://[http://jsfiddle.net/yurcj/][1])。我还添加了代码：

**html**

```
<header id="main-header">
    <div id="inner"></div>
</header> 
```

**css**

```
#main-header {height: 70px;}
#inner {height: 70px; background: red;} 
```

**javascript**

```
$(function() {
    $('#inner').stop().delay(2300).animate({"opacity": "0"}, 1500);
    $('#main-header').hover(
    function() {$('#inner').stop().animate({"opacity": "1"}, 1000);},
    function() {$('#inner').stop().animate({"opacity": "0"}, 1500);}
);
}); 
```

当光标悬停在该区域上时，它将淡入。

如果用户等到初始延迟/淡出完成，一切都会完美无缺，但是当光标在初始延迟/淡出完成之前悬停在标题上时我遇到了问题。请参阅上面的链接。

我想我需要以某种方式延迟悬停初始化，在这种情况下为 2300 毫秒。但如果有人有更好的解决方案，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:27:29.127

这应该可以解决问题，因为它可以防止用户在开始时移过标题时触发初始淡出：

```
$(function() {

    var tictac      = setTimeout( function() { $('#inner').animate({"opacity": "0"}, 1500); }, 2300 )

    $('#main-header').hover(
        function() {
            clearTimeout(tictac);   
            $('#inner').stop().animate({"opacity": "1"}, 1000);
        },
        function() { $('#inner').stop().animate({"opacity": "0"}, 1500);}
    );

}); 
```

请注意：初始演示在 IE < 9 中无法运行，因为它使用的是 HTML5 标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:47:30.867

您正在使用`<header>`IE9 之前的 IE 中不可用的标签。这是您的脚本在 IE9 之前无法正常工作的原因。据我所知，它在当前状态下非常适用于 Chrome、Firefox 和 IE9。

**HTML**：

```
<div id="main-header">
    <div id="inner"></div>
</div> 
```

**JS**：

```
$(function() {
    $('#inner').stop().delay(2300).animate({"opacity": "0"}, 1500);
    $('#main-header').hover(
        function() {$('#inner').stop().animate({"opacity": "1"}, 1000);},
        function() {$('#inner').stop().animate({"opacity": "0"}, 1500);}
    );
}); 
```

[现场演示](http://jsfiddle.net/yurcj/2/)

# vala - 使用 Val 和 GTK3 在屏幕更新之间插入延迟

> ID：11457194
> 
> 赞同：3
> 
> 时间：2012-07-12T17:20:52.767
> 
> 标签：vala, gtk3

我正在 Linux (Ubuntu 12.04) 环境中学习 Vala 和 GTK3。为此，我编写了一个 Game of Life 模拟。到目前为止，一切都很好。我想做的是在每次屏幕更新之间插入一个延迟（比如 2 秒）。我已经研究了 Glib.TimeoutSource 函数，它似乎对我的需求过于详尽。还有其他选择吗？如果 TimeoutSource 确实是要走的路，您是否可以推荐任何示例。谢谢你。

麦克风

更新：事实证明这非常容易......

```
public void onRunButtonClicked(Button source)
{
  Timeout.add_seconds(3, updateDraw);
}

private bool updateDraw()
{
  game.determineBirthsAndDeaths();
  game.applyBirthsAndDeaths();
  queue_draw();
  iterationsLabel.set_text("Iteration: %5d".printf(game.getIterationCount()));      
  return true;
} 
```

第一种方法设置定时器。第二个每三秒执行一次（在本例中）。现在我必须添加一个停止按钮并让我的 updateDraw 方法在按下停止按钮时返回 false。更多要学习...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T18:54:12.343

```
public void onRunButtonClicked(Button source)
{
  Timeout.add_seconds(3, updateDraw);
}

private bool updateDraw()
{
  game.determineBirthsAndDeaths();
  game.applyBirthsAndDeaths();
  queue_draw();
  iterationsLabel.set_text("Iteration: %5d".printf(game.getIterationCount()));      
  return true;
} 
```

# vb.net - 无法从 Delphi 2007 DLL 获取 pchar 到 Visual Basisc 应用程序（有垃圾）

> ID：11457197
> 
> 赞同：2
> 
> 时间：2012-07-12T17:21:03.227
> 
> 标签：vb.net, delphi, dll, pinvoke

**VB代码**

我的 VB 应用程序代码中有 DLL 函数声明：

```
Declare Function TstCharReturn Lib "myLib" Alias "TstCharReturn" (ByVal c As System.Text.StringBuilder) As Boolean 
```

这是调用该函数的代码

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim s As String
    Dim builder As New System.Text.StringBuilder

    r = TstCharReturn(builder)
    LogIt(s)
    LogIt(r)
End Sub 
```

我建议使用`StringBuilder`而不是字符串，因为`String`它是不可变的，但两者的工作方式相同。

**德尔福DLL代码：**

```
Function TstCharReturn  (var c: pchar) : Boolean; stdcall;
var
 BuffSize: Integer;
 sOut: string;
begin

  sOut:='abcdefghijklmnoprst';
  BuffSize:=SizeOf(Char)*(Length(sOut)+1);
  getmem(c, BuffSize);
  FillChar(c^,BuffSize,0);
  Result := Length(sOut)>0;

  if Result then
  begin
    Move(sOut[1], PChar(c)^, BuffSize);
  end;

end; 
```

我在 VB 输出中有垃圾。什么是问题？还有一个问题。如果我使用`GetMem`，我必须在某处释放内存还是 VB 会这样做？VB6 和 VB2010 之间有什么区别，因为我需要我的 dll 来处理两者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:45:50.537

你的delphi程序是错误的。您不能为返回的字符串分配新内存，您已经有一个指向它的指针传入`c`，并且您必须从该指针开始填充。您将需要引入另一个参数来传递该缓冲区的大小。

所以你将拥有：

```
Declare Function TstCharReturn Lib "myLib" Alias "TstCharReturn" _
     (ByVal c As System.Text.StringBuilder, _
      ByVal cchSize As Integer) As Boolean 
```

和：

```
Dim sb As New System.Text.StringBuilder(50) 'Buffer capacity: 50
TstCharReturn(sb, sb.Capacity) 
```

不要认为 StringBuilder 会被神奇地传递给非托管代码，因为它可以接受任意数量的数据。您需要确保初始容量，即过程可用的大小。

# windows-runtime - Windows 8 WinRT 后台任务时间分辨率

> ID：11457198
> 
> 赞同：2
> 
> 时间：2012-07-12T17:21:19.557
> 
> 标签：windows-runtime

由 15 分钟定期计时器触发的 WinRT 后台任务是否可以启动它自己的线程，然后每隔 30 秒休眠和唤醒一次？即，如果您需要一个后台任务来比最小分辨率更频繁地做一些事情，那么这个 hack 会起作用吗？如果电池寿命不是问题......即使不使用交流电也会如此吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T17:28:39.953

后台任务可以产生一个线程；但它每 15 分钟最多只能使用 2 个 CPU 秒。换句话说，您没有获得许可来运行您想要的任何线程工作，您需要保持在约束范围内。详细信息在MS 发布的[“后台任务简介”文档中进行了说明：](http://www.microsoft.com/en-us/download/details.aspx?id=27411)

> 锁定屏幕上的应用程序会定期为其后台任务接收一定量的 CPU 时间。如果应用程序使用了所有可用的 CPU 时间，则其后台任务将暂停，直到应用程序的 CPU 配额在下一代补充以进行 CPU 配额更新。

# python - 如何使函数返回所有可能的值

> ID：11457199
> 
> 赞同：3
> 
> 时间：2012-07-12T17:21:26.247
> 
> 标签：python, return, lxml

所以我正在使用编写这个方法，它在查找数字方面工作正常，但它只返回最后一个值。有没有办法让它在每次运行后返回所有值。这是我的代码：

```
def searchPFAM():

    fileAddress = '/Volumes/interpro/data/Q14591.txt'
    start = None
    end = None
    with open(fileAddress,'rb') as f:
        root = etree.parse(f)
        for lcn in root.xpath("/protein/match[@dbname='PFAM']/lcn"):#find dbname =PFAM
            start = int(lcn.get("start"))#if it is PFAM then look for start value
            end = int(lcn.get("end"))#if it is PFAM then also look for end value
            print start, end
        return start, end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T17:24:39.733

你的意思是类似的吗？

```
def do_something(fname):
    with open(fname,'rb') as f:
        root = etree.parse(f)
        for lcn in root.xpath("/protein/match[@dbname='PFAM']/lcn"):#find dbname =PFAM
            # Make slightly more robust
            try:
                start = int(lcn.get("start"))#if it is PFAM then look for start value
                end = int(lcn.get("end"))#if it is PFAM then also look for end value
                yield start, end
            except (TypeError , ValueError) as e:
                pass # start/end aren't usable as numbers decide what to do here...

for start, end in do_something():
    do_something_else(start, end) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:24:45.870

您可以创建一个包含 start 和 end 的元组列表，并在函数末尾返回该列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:30:46.040

只需修改您的函数以创建并返回开始、结束元组的列表：

```
def searchPFAM():
    fileAddress = '/Volumes/interpro/data/Q14591.txt'
    start = None
    end = None
    result = []
    with open(fileAddress,'rb') as f:
        root = etree.parse(f)
        for lcn in root.xpath("/protein/match[@dbname='PFAM']/lcn"):#find dbname =PFAM
            start = int(lcn.get("start"))#if it is PFAM then look for start value
            end = int(lcn.get("end"))#if it is PFAM then also look for end value
            print start, end
        result.append((start, end))
    return result 
```

可读性稍差，但更紧凑和更有效的编写方式是使用所谓的“列表理解”，如下所示：

```
def searchPFAM():
    fileAddress = '/Volumes/interpro/data/Q14591.txt'
    start = None
    end = None
    with open(fileAddress,'rb') as f:
        root = etree.parse(f)
        result = [(int(lcn.get("start")), int(lcn.get("end"))) 
                     for lcn in root.xpath("/protein/match[@dbname='PFAM']/lcn")]
    return result 
```

之后您可以像这样处理返回的列表：

```
for start,end in result:
   ... # do something with pair of int values 
```

或者

```
for i in xrange(len(result)):
   start,end = result[i][0],result[i][1]
   ... # do something with pair of int values 
```

# shell - shell脚本中的for循环 - 冒号和井号？

> ID：11457201
> 
> 赞同：1
> 
> 时间：2012-07-12T17:21:27.867
> 
> 标签：shell, loops, sh

我正在尝试制作 shell 脚本的正面或反面。有人可以解释一下这条线吗？

$FILEDIR 是一个包含文件的目录。F 是从此命令返回的文件数组中的标记： files=$( find $FILEDIR -type f | grep -v .rpmsave\$ | grep -v .swp\$ )

令人困惑的行在 for 循环中。

```
for f in $files; do
target=${f:${#FILEDIR}}
<<do some more stuff>>
done 
```

我从未在 shell 脚本 for 循环中见过冒号和散列。我还没有找到关于它们的任何文档......有人可以尝试启发我吗？我会很感激的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:49:17.760

这里不涉及数组。POSIX sh 没有数组（假设您没有使用基于标签的另一个 shell）。

冒号表示 Bash/Ksh[子字符串扩展](http://mywiki.wooledge.org/BashFAQ/073)。这些也不是 POSIX。前缀扩展为参数中的`#`字符数。我想他们打算砍掉目录部分并将其分配给`target`.

为了解释其余部分：首先[find](http://mywiki.wooledge.org/UsingFind)运行并有趣地通过管道传输到两个 grep 中，这两个 grep 可以单独使用 find 完成（除了中断可能包含换行符的文件名），并将输出保存到`files`. 如果仅限于 POSIX 工具，这也是无法真正正确完成的事情，但有更好的方法。

接下来，shell 以更[荒谬的](http://mywiki.wooledge.org/WordSplitting)[方式](http://mywiki.wooledge.org/glob)`files`扩展了[未引用](http://mywiki.wooledge.org/Quotes)和变异，以便循环遍历无意义的结果。如果脚本的其余部分如此糟糕，则可能将其丢弃并重新开始。没有办法做到预期的事情。 `for`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:40:52.453

冒号可以作为子字符串。所以：

```
A=abcdefg
echo ${A:4} 
```

将打印输出：

```
efg 
```

我不确定他们为什么会使用文件目录作为第二个参数...

如果您在理解 for 循环部分时遇到问题，请尝试[http://www.dreamsyssoft.com/unix-shell-scripting/loop-tutorial.php](http://www.dreamsyssoft.com/unix-shell-scripting/loop-tutorial.php)

# html - 将内联样式分成多行会影响什么吗？

> ID：11457203
> 
> 赞同：12
> 
> 时间：2012-07-12T17:21:48.237
> 
> 标签：html, css, inline-styles

假设我有很长的内联样式，例如：

```
<input type="radio" style="visibility: hidden; position: absolute; foo: bar; baz: foo; etcetera: etc; and: more;"> 
```

然后我决定使它更具可读性，如下所示：

```
<input type="radio" style="visibility: hidden; position: absolute;
    foo: bar; baz: foo; etcetera: etc; and: more;"> 
```

这会影响功能还是可以像这样将其分成多行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T17:22:29.337

没关系。空白不影响浏览器对该 CSS 的解释或该元素的呈现。

# ember.js - emberjs 如何禁用 Ember.Select？

> ID：11457206
> 
> 赞同：2
> 
> 时间：2012-07-12T17:21:59.177
> 
> 标签：ember.js

我对这个问题有类似的问题

[Emberjs - 禁用和启用文本字段](https://stackoverflow.com/questions/10523780/emberjs-disable-and-enable-textfield)

所以对于文本字段它是 disabledBinding。

Ember.Select（下拉字段）呢？我试过 disabledBinding 但它不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T18:12:45.503

它不起作用，因为`disabled`未在 中定义`attributeBindings`，请参阅[代码](https://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/controls/select.js#L100)。

一种解决方案是扩展`Ember.Select`并添加`disabled`到串联属性* `attributeBindings`，请参阅[http://jsfiddle.net/pangratz666/wTXfH/](http://jsfiddle.net/pangratz666/wTXfH/)：

**车把**：

```
<script type="text/x-handlebars" >
    {{view App.Select disabled="true"}}
</script>​ 
```

**JavaScript**：

```
App.Select = Ember.Select.extend({
    attributeBindings: ['disabled']
});​ 
```

* * *

*concatenated 属性意味着，在子类中覆盖 this 属性不会覆盖值，而是从超类扩展现有的值。

# iphone - 如果选择 UIButton1 Sender，如何检查 UIButton2 方法

> ID：11457219
> 
> 赞同：0
> 
> 时间：2012-07-12T17:22:55.067
> 
> 标签：iphone

我想在 UIButton2 方法中编写代码来检查是否选择了 UIButton1 发件人

```
 else if (UIButton1sender.selected == YES) {
    [UIButton2sender setImage:[UIImage imageNamed:@"52.png"] forState:UIControlStateNormal];
    [audioPlayer play];
    [self resumeTimer];
    [self resumeLayer:self.view.layer]; 
```

那么我该如何编写这个 UIButton1sender.selected。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:56:34.743

您需要在 viewController 中创建两个 UIButton 引用，将其初始化为`viewDidLoad`，分配`IBAction`s 和所有样式。然后在 button2`IBAction`代码中，您将能够像这样访问 button1 变量：

```
button1->selected 
```

或者如果您以这种方式合成了它的属性：

```
button1.isSelected 
```

请记住，还有一个[突出显示](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/instp/UIControl/highlighted)的属性，您可能想要使用它。

# html - 这有什么问题菜单 所以我有一个，毫无疑问，简单的问题，但它让我相当难倒问题是什么。我正在使用 jQuery 函数将*   附加到

    <select>菜单没有显示任何选项。它只显示第一个 <option>并且从不给我任何其他选项。我觉得它很简单，但我似乎无法找到问题所在。有任何想法吗？在此先感谢您的帮助。$('#courses').append('< ID：11457220 赞同：0 时间：2012-07-12T17:22:57.170 标签：html, tags 回答 #1 赞同：1 时间：2012-07-12T17:27:38.543 width:20px从选择的样式中删除或增加它。 jsFiddle 示例</option></select>

# jsf - jsf - el 转义点

> ID：11457222
> 
> 赞同：1
> 
> 时间：2012-07-12T17:22:58.477
> 
> 标签：jsf, escaping, el

我的标记中有以下音频标签：

```
<audio id="audio" preload="auto" hidden="true">
    <source src="#{resource['sounds:filename.mp3']}" type="audio/mpeg" />
    <source src="#{resource['sounds:filename.ogg']}" type="audio/ogg" />
    <embed src="#{resource['sounds:filename.mp3']}" hidden="true"/>
</audio> 
```

我想将它包装在一个自定义复合组件中，该组件将文件名作为属性。

```
<source src="#{resource['sounds:cc.attrs.filename.mp3']}" type="audio/mpeg" /> 
```

这显然不起作用，因为 .mp3 现在似乎是文件名的子级。我如何逃避这个点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T02:51:35.983

参数化它使用`<ui:param>`.

```
<ui:param name="resourceIdentifier" value="sounds:#{cc.attrs.filename}.mp3" />
<source src="#{resource[resourceIdentifier]}" type="audio/mpeg" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T22:05:21.237

您想要使用的是 Facelets 的串联功能。

或者[按照这里的描述创建一个](https://stackoverflow.com/questions/2192759/concatenate-strings-in-jsf-jsp-el-and-javascript)，或者在你的项目中设置[OmniFaces](http://omnifaces.org)，这样你就可以使用它漂亮的[字符串操作函数](http://showcase.omnifaces.org/functions/Strings)，像这样：

```
<source src="#{resource[of:concat('sounds:', cc.attrs.filename)]}"
    type="audio/mpeg" /> 
```

# objective-c - 您可以在一个选择器中存储多个方法吗？

> ID：11457224
> 
> 赞同：5
> 
> 时间：2012-07-12T17:22:59.653
> 
> 标签：objective-c, ios, xcode

我有一个类似拼图的程序，您可以按照正确的顺序将积木拼凑在一起，尝试完成拼图。当你完成后，你可以点击播放按钮，然后程序会让一个小人在你的积木所在的地方穿过你的积木。因此，如果您将上移一格、右移一格、下移一格，然后点击播放，程序将调用然后调用方法上移、右移、下移。

当我的程序运行并试图找出要调用的方法和顺序时，我需要在程序找到它们时按顺序存储这些方法，基本上，我不能让程序在计算时立即调用这些方法找出要调用的方法，否则在块上移动的人会快速移动，我想将方法​​存储在某种方法数组中（我认为这就像某种选择器），这样我就可以调用每个方法在我的程序弄清楚它要做什么之后的某个时间间隔内。

我现在的正常程序看起来像这样

```
if(random requirements)
[self moveUp]

else if(random requirements)
[self moveDown]

else if (random requirements)
[self moveRight]

else if(random requirements)
[self moveLeft] 
```

好吧，我宁愿这看起来像这样

```
if(random requirements)
SEL selector addMethod:[self moveUp]

else if(random requirements)
SEL selector addMethod:[self moveDown]

else if (random requirements)
SEL selector addMethod:[self moveRight]

else if(random requirements)
SEL selector addMethod:[self moveLeft] 
```

显然这不是真正的语法，但你能理解我在找什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T17:35:01.947

您不能在一个选择器中存储多个选择器，但是创建一个选择器数组是一件非常有效的事情。最简单的方法是将选择器的字符串表示形式存储在 中`NSMutableArray`，并从遍历数组的代码中的字符串创建选择器。

```
NSMutableArray *selectorNames = [NSMutableArray array];
if(random requirements)
    [selectorNames addObject:NSStringFromSelector(@selector(moveUp))];
if(random requirements)
    [selectorNames addObject:NSStringFromSelector(@selector(moveDown))];
...
for (NSString *selectorName in selectorNames) {
    SEL nextSelector = NSSelectorFromString (selectorName);
    // Now you can invoke your selector
} 
```

除了选择器之外的另一个选项是[使用 blocks](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html#//apple_ref/doc/uid/TP40007502-CH7-SW1)。块也非常擅长封装动作，您不需要单独存储它们的目标。

# ruby - 使用 Ruby 和 Nokogiri 迭代访问子 XML 元素

> ID：11457229
> 
> 赞同：1
> 
> 时间：2012-07-12T17:23:13.267
> 
> 标签：ruby, nokogiri

我有一个与此类似的 XML 文件：

```
<Companies type="Container">
<Company type="Category">
    <Name type="Property">Company 123</Name>
    <Location type="Property">New York</Location>
    <Employees type="Container">
        <Employee type="Reference">
            <Name type="Property">John Smith</Name>
            <Email type="Property">john@company.123</Email>
        </Employee>
        <Employee type="Reference">
            <Name type="Property">Jane Doe</Name>
            <Email type="Property">jane@company.123</Email>
        </Employee>
</Company>
<Company type="Category">
    <Name type="Property">Company ABC</Name>
    <Location type="Property">Minneapolis</Location>
    <Employees type="Container">
        <Employee type="Reference">
            <Name type="Property">John Doe</Name>
            <Email type="Property">doe@company.abc</Email>
        </Employee>
        <Employee type="Reference">
            <Name type="Property">Jane Smith</Name>
            <Email type="Property">smith@company.abc</Email>
        </Employee>
</Company> 
```

我必须浏览此文件并获取所有信息，以便我可以使用它。我可以使用 Nokogiri 循环访问每个“公司”并获得“名称”和“位置”属性就好了。但是，我不知道该怎么做是访问每个“公司”的“员工”信息。

我确定我遗漏了一些简单的东西，但我一直在 pry 中挖掘，我似乎无法揭开它的神秘面纱。帮助将*不胜*感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T18:17:32.300

注意：我强烈建议`(raw_xml_string, nil, nil, Nokogiri::XML::ParseOptions::STRICT)`在开发时传递 args，以捕获格式错误的 xml。

```
xdoc = Nokogiri.XML(raw_xml_string)

( xdoc/'/Companies/Company' ).each {|com|
  puts "company:"
  p [(com/'./Name').text, (com/'./Location').text]

  puts "employees:"
  # you need another loop to grab the employees.
  (com/'Employees/Employee').each {|emp|
    p [(emp/'./Name').text, (emp/'./Email').text]
  }
} 
```

`/`使用or方法时要注意的一件事`%`是，它们将选择任何后代，而不仅仅是直接孩子。这就是为什么我使用`'./Name'`而不是仅仅使用`'Name'`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T19:21:58.207

您的 XML 格式不正确。

Nokogiri 可以使用该方法帮助您找出问题所在`errors()`。解析 XML 并检查`errors()`：

```
doc = Nokogiri::XML(xml)
puts doc.errors 
```

输出：

```
Unescaped '<' not allowed in attributes values
attributes construct error
Couldn't find end of Start Tag Name line 4
Opening and ending tag mismatch: Company line 3 and Name
Opening and ending tag mismatch: Employees line 6 and Company
Unescaped '<' not allowed in attributes values
attributes construct error
Couldn't find end of Start Tag Name line 17
Opening and ending tag mismatch: Company line 16 and Name
Opening and ending tag mismatch: Employees line 19 and Company 
```

Nokogiri 将尝试修复 XML，但它无法正确执行某些操作。修复丢失的引号是其中之一：

```
<Name type="Property>Company 123</Name>
<Name type="Property>Company ABC</Name> 
```

错了。他们应该是：

```
<Name type="Property">Company 123</Name>
<Name type="Property">Company ABC</Name> 
```

此外，在这两种情况下都缺少结束标签，`</Employees>`但 Nokogiri 会解决这些问题。

# windows-phone-7 - BackgroundWorker UI 不更新 Windows Phone 7 中的进度

> ID：11457234
> 
> 赞同：0
> 
> 时间：2012-07-12T17:23:22.860
> 
> 标签：windows-phone-7, backgroundworker

在 Windows Phone 7 中，我试图显示一些 LINQ 查询的状态。我正在使用BackgroundWorker。我在调试窗口中看到了进度更新，但在 UI (TextBlock4.Text) 中没有看到。似乎所有查询结束后进度都会更新。运行查询时 UI 也没有响应。如何避免 UI 冻结？如何在 UI 中显示进度？还有另一种显示查询进度的方法吗？

```
Partial Public Class pagInvoicesReport
Inherits PhoneApplicationPage

Private WithEvents mWorker As New BackgroundWorker()

Private nJan As Nullable(Of Decimal) = 0
Private nFeb As Nullable(Of Decimal) = 0
Private nMar As Nullable(Of Decimal) = 0
Private nApr As Nullable(Of Decimal) = 0
Private nMay As Nullable(Of Decimal) = 0
Private nJun As Nullable(Of Decimal) = 0
Private nJul As Nullable(Of Decimal) = 0
Private nAug As Nullable(Of Decimal) = 0
Private nSept As Nullable(Of Decimal) = 0
Private nOct As Nullable(Of Decimal) = 0
Private nNov As Nullable(Of Decimal) = 0
Private nDec As Nullable(Of Decimal) = 0

Public Sub New()
    InitializeComponent()
    mWorker.WorkerReportsProgress = True
End Sub

Private Sub startButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles startButton.Click
    mWorker.RunWorkerAsync()
End Sub

Private Sub mWorker_ProgressChanged(ByVal sender As Object, ByVal e As ProgressChangedEventArgs) Handles mWorker_ProgressChanged
    TextBlock4.Text = e.ProgressPercentage.ToString() & "%"
    System.Diagnostics.Debug.WriteLine(e.ProgressPercentage.ToString() & "%")
End Sub

Private Sub GetGraphValues() Handles mWorker.DoWork
    System.Windows.Deployment.Current.Dispatcher.BeginInvoke( _
            Sub()
                Using theDB As New appContext("Data Source=isostore:/theDB.sdf")
                    Try
                        If (Aggregate r In theDB.InvoicesRecords Where r.InvoiceDateTime.Month = 1 And r.InvoiceDateTime.Year = 2012 And r.MainID = 1 Into Sum(CType(r.Cost, Decimal?))) IsNot Nothing Then
                            nJan = (Aggregate r In theDB.InvoicesRecords Where r.InvoiceDateTime.Month = 1 And r.InvoiceDateTime.Year = 2012 And r.MainID = 1 Into Sum(CType(r.Cost, Decimal?)))
                        Else
                            nJan = 0
                        End If
                    Catch ex As Exception
                        MessageBox.Show("There was an error!" & vbCrLf & ex.Message, "Error!", MessageBoxButton.OK)
                    End Try
                End Using
            End Sub)

    mWorker.ReportProgress(8)

    System.Windows.Deployment.Current.Dispatcher.BeginInvoke( _
        Sub()
            Using theDB As New appContext("Data Source=isostore:/theDB.sdf")
                Try
                    If (Aggregate r In theDB.InvoicesRecords Where r.InvoiceDateTime.Month = 2 And r.InvoiceDateTime.Year = 2012 And r.MainID = 1 Into Sum(CType(r.Cost, Decimal?))) IsNot Nothing Then
                        nFeb = (Aggregate r In theDB.InvoicesRecords Where r.InvoiceDateTime.Month = 2 And r.InvoiceDateTime.Year = 2012 And r.MainID = 1 Into Sum(CType(r.Cost, Decimal?)))
                    Else
                        nFeb = 0
                    End If
                Catch ex As Exception
                    MessageBox.Show("There was an error!" & vbCrLf & ex.Message, "Error!", MessageBoxButton.OK)
                End Try
            End Using
        End Sub)

    mWorker.ReportProgress(17)

    System.Windows.Deployment.Current.Dispatcher.BeginInvoke( _
        Sub()
            Using theDB As New appContext("Data Source=isostore:/theDB.sdf")
                Try
                    If (Aggregate r In theDB.InvoicesRecords Where r.InvoiceDateTime.Month = 12 And r.InvoiceDateTime.Year = 2012 And r.MainID = 1 Into Sum(CType(r.Cost, Decimal?))) IsNot Nothing Then
                        nDec = (Aggregate r In theDB.InvoicesRecords Where r.InvoiceDateTime.Month = 12 And r.InvoiceDateTime.Year = 2012 And r.MainID = 1 Into Sum(CType(r.Cost, Decimal?)))
                    Else
                        nDec = 0
                    End If
                Catch ex As Exception
                    MessageBox.Show("There was an error!" & vbCrLf & ex.Message, "Error!", MessageBoxButton.OK)
                End Try
            End Using
        End Sub)
    mWorker.ReportProgress(100)
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:37:43.053

看起来您正在发布要在 UI 线程上完成的工作。你的 DoWork 方法不应该调用 Dispatcher。这会将所有工作放在 UI 线程上，而不是 BackgroundWorker 线程上。

**更新：**刚刚注意到您正在访问成员变量。不建议这样做，你的后台工作人员应该返回它计算的结果，这里是一个简单的例子，显示了在列表中返回的结果（我不是 VB 专家，所以请多多包涵）。工人完成后，获取结果并替换您的属性

尝试将您的 DoWork 处理程序更改为：

```
Private Sub GetGraphValues(args as DoWorkEventArgs) Handles mWorker.DoWork
    Dim list as List<Decimal>();
    Dim jan as Decimal
    Dim feb as Decimal
    Dim dec as Dicimal
    Using theDB As New appContext("Data Source=isostore:/theDB.sdf")
        Try
            If (Aggregate r In theDB.InvoicesRecords Where r.InvoiceDateTime.Month = 1 And r.InvoiceDateTime.Year = 2012 And r.MainID = 1 Into Sum(CType(r.Cost, Decimal?))) IsNot Nothing Then
                jan = (Aggregate r In theDB.InvoicesRecords Where r.InvoiceDateTime.Month = 1 And r.InvoiceDateTime.Year = 2012 And r.MainID = 1 Into Sum(CType(r.Cost, Decimal?)))
            Else
                jan = 0
            End If
        Catch ex As Exception
            ' Showing messageBox SHOULD be shown on UI thread
            System.Windows.Deployment.Current.Dispatcher.BeginInvoke( _
            Sub()
                MessageBox.Show("There was an error!" & vbCrLf & ex.Message, "Error!", MessageBoxButton.OK)
            End Sub)
        End Try
    End Using
    list.Add(jan);

    mWorker.ReportProgress(8)

    Using theDB As New appContext("Data Source=isostore:/theDB.sdf")
        Try
            If (Aggregate r In theDB.InvoicesRecords Where r.InvoiceDateTime.Month = 2 And r.InvoiceDateTime.Year = 2012 And r.MainID = 1 Into Sum(CType(r.Cost, Decimal?))) IsNot Nothing Then
                feb = (Aggregate r In theDB.InvoicesRecords Where r.InvoiceDateTime.Month = 2 And r.InvoiceDateTime.Year = 2012 And r.MainID = 1 Into Sum(CType(r.Cost, Decimal?)))
            Else
                feb = 0
            End If
        Catch ex As Exception
            ' Showing messageBox SHOULD be shown on UI thread
            System.Windows.Deployment.Current.Dispatcher.BeginInvoke( _
            Sub()
                MessageBox.Show("There was an error!" & vbCrLf & ex.Message, "Error!", MessageBoxButton.OK)
            End Sub)
        End Try
    End Using
    list.Add(feb)

    mWorker.ReportProgress(17)

    Using theDB As New appContext("Data Source=isostore:/theDB.sdf")
        Try
            If (Aggregate r In theDB.InvoicesRecords Where r.InvoiceDateTime.Month = 12 And r.InvoiceDateTime.Year = 2012 And r.MainID = 1 Into Sum(CType(r.Cost, Decimal?))) IsNot Nothing Then
                dec = (Aggregate r In theDB.InvoicesRecords Where r.InvoiceDateTime.Month = 12 And r.InvoiceDateTime.Year = 2012 And r.MainID = 1 Into Sum(CType(r.Cost, Decimal?)))
            Else
                dec = 0
            End If
        Catch ex As Exception
            ' Showing messageBox SHOULD be shown on UI thread
            System.Windows.Deployment.Current.Dispatcher.BeginInvoke( _
            Sub()
                MessageBox.Show("There was an error!" & vbCrLf & ex.Message, "Error!", MessageBoxButton.OK)
            End Sub)
        End Try
    End Using
    list.Add(dec)

    mWorker.ReportProgress(100)
    args.Result = list
End Sub 
```

# google-drive-api - Google Drive API Files.List 查询字符串

> ID：11457235
> 
> 赞同：8
> 
> 时间：2012-07-12T17:23:24.030
> 
> 标签：google-drive-api

我想知道为 google drive api list.setQ 方法制定查询字符串的关键字和参数。

这是我的代码：

```
FileList files = drive.files().list()
            .setQ("trashed=true")
            .setMaxResults(100)
            .execute(); 
```

到目前为止，我发现“TRASHED”是有效的参数，我可以用它来列出我的谷歌驱动器中的所有垃圾文件。拥有完整的参数列表会很好。该列表可用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T19:32:05.560

Google Drive SDK 文档列出了您可以在查询中使用的所有字段和运算符：

[https://developers.google.com/drive/search-parameters](https://developers.google.com/drive/search-parameters)

# java - String.split 在使用点时返回 null

> ID：11457236
> 
> 赞同：26
> 
> 时间：2012-07-12T17:23:25.607
> 
> 标签：java, arrays, string, nullpointerexception

我得到了这个简单的代码：

```
String ip = "1.2.3.4";
String[] ipArray = ip.split(".");
System.out.println(ipArray[1]); 
```

并且`ipArray`在它命中时为空`System.out.println`（抛出空指针异常）。

我的问题是为什么即使我将 ipArray 设置为在每个 ip 的 .s 上拆分，ipArray 仍保持为空？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-12T17:24:38.163

使用`ip.split("\\.");`，您的问题将迎刃而解。问题是[String#split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)接收正则表达式，点 (.) 符号是正则表达式中的特殊字符，因此您需要将其转义以将其解释为普通点，也因为反斜杠是转义字符在 Java 中，你也必须逃避它。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-07-12T17:25:58.197

`.`是正则表达式中的特殊字符，用于分割字符串。

要解决这个问题，您需要逃避`.`. 这导致我们`\.`不幸的是，`\`也是 java 字符串中的一个特殊字符，所以也必须转义，以使`\\.`

我们的“最终”结果是`ip.split("\\.");`

在一个相关的问题上，整个过程可以完全避免。做标准库已经为我们做的事情是没有意义的。

考虑以下

```
byte[] ipOctets = InetAddress.getByName(ip).getAddress(); 
```

这里唯一的问题是要记住，如果你想要 int 值，你必须用`&`like提取它`int octet = ipOctets[0] & 0xFF;`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-06T18:13:22.617

[Pattern.quote(String)](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)也可以用来引用整个字符串。这将返回一个将按字面解释的模式，特殊字符没有特殊含义。在这种情况下，这可能有点矫枉过正，但有时它可能很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-27T11:14:11.080

我们也可以使用 split ("[.]")

```
String s = "abcd.jpg";
String[] strarry = s.split ("[.]"); 
```

星[0]=abcd，星[1]=jpg

# c# - 异步 FileStream 读取的正确结构

> ID：11457238
> 
> 赞同：4
> 
> 时间：2012-07-12T17:23:37.893
> 
> 标签：c#, asynchronous, locking, filestream

我有一个自定义列表控件，它显示带有图像缩略图的项目。每个列表项都给出了文件的完整路径，并使用 FileStream.BeginRead 异步读取，当文件读取完成时需要使列表控件失效。

也可以随时清除列表中的项目并重新填充不同的项目。这会在需要优雅处理文件流处理的每个项目上调用 Dispose（它可能仍处于异步读取的中间）。

我将展示我正在使用的代码。我不确定在这种情况下调用和锁定对象的正确用法，在这种情况下，异步加载新文件的请求可能会在另一个文件处于异步加载过程中时出现。

```
public string FileName { get; set; }
public Image Image { get; set; }
public Control Parent { get; set; }

private FileStream currentFileStream;
private byte[] buffer;
private object locker = new object();
private bool loading;
private bool disposed;

public void LoadImage(string fileName)
{
    FileName = fileName;

    lock (locker)
    {           
        currentFileStream = new FileStream(FileName, FileMode.Open, FileAccess.Read, FileShare.Read);
        buffer = new byte[currentFileStream.Length];
        currentFileStream.BeginRead(buffer, 0, buffer.Length, FileReadComplete, currentFileStream);

        loading = true;
    }
}

private void FileReadComplete(IAsyncResult ar)
{
    FileStream fileStreamComplete = (FileStream)ar.AsyncState;

    lock (locker)
    {
        fileStreamComplete.EndRead(ar);

        // If the finished FileStream is the more recent one requested
        // And this item has not been disposed
        if (fileStreamComplete == currentFileStream && !disposed)
        {
            try
            {
                loading = false;

                Image = new Bitmap(currentFileStream);

                currentFileStream.Close();
                currentFileStream.Dispose();

                Parent.Invalidate();
            }
            catch (Exception e)
            {
            }
            finally
            {
                currentFileStream = null;
            }
        }
        else
        {
            fileStreamComplete.Close();
            fileStreamComplete.Dispose();
        }
    }
}

protected override void Dispose(bool disposing)
{
    lock (locker)
    {
        base.Dispose(disposing);

        if (!disposed)
        {
            if (disposing)
            {
                if (Image != null)
                    Image.Dispose();
            }

            disposed = true;
        }
    }
} 
```

**编辑**：从 Dispose() 方法中删除了 currentFileStream 的处理。

**编辑#2**：从 LoadImage() 函数中删除了 currentFileStream 的处理。它可能不应该存在，因为文件读取可能正在进行中并且在操作期间无法关闭。无论何时调用 FileReadComplete 回调，它都会被释放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:14:36.740

我不确定我是否遵循了您的代码，但这是我推荐的。

1.  如果您打算将其用于异步只读，请使用不同的 FileStream 构造函数。虽然它可能与您的问题无关，但只是一种更好的方法

    ```
     currentFileStream = new FileStream(FileName, FileMode.Open, FileAccess.Read, FileShare.Read, 1024 * 8, true); 
    ```

2.  您不想提供位图构造函数（或 Image.FromFile）的路径并让它加载文件的任何原因？请记住，当将大量文件加载到内存中时，顺序加载它们可能会更快（如果文件驻留在像硬盘这样的顺序访问技术上）

假设您仍然想异步加载它，我会简单地将该功能封装在一个类中以实现“整洁”

您似乎正在从已读入缓冲区的同一流中加载图像。我确信这是一个问题。以下是我对您的代码的改编。主要变化是

1.  我找不到 currentFileStream 变量的用途
2.  dispose 变量是可变的，因为它可以从多个线程访问
3.  在 FileStream.Close 之后对 FileStream.Dispose 的调用是多余的，因此将它们删除

我还没有尝试过代码，所以你必须告诉我它是否有效

```
class ImageLoader : IDisposable {
    public string FileName { get; set; }
    public Image Image { get; set; }
    public Control Parent { get; set; }

    private FileStream currentFileStream;
    private byte[] buffer;
    private object locker = new object();
    Control parent;

    private volatile bool dispose = false;

    public ImageLoader(Control parent, string fileName) {
        Parent = parent;
        FileName = fileName;
        Image = null;

        currentFileStream = new FileStream(FileName, FileMode.Open, FileAccess.Read, FileShare.Read, 1024 * 8, true);
        buffer = new byte[currentFileStream.Length];
        currentFileStream.BeginRead(buffer, 0, buffer.Length, new AsyncCallback(FileReadComplete), null);
    }

    private void FileReadComplete(IAsyncResult ar) {
        lock (locker) {
            try { currentFileStream.EndRead(ar); } catch (ObjectDisposedException) { }

            if (!dispose) {
                using (MemoryStream ms = new MemoryStream(buffer))
                    Image = new Bitmap(ms);
                Parent.Invalidate();
            }

            try { currentFileStream.Close(); } catch(IOException) { }
        }
    }

    public void Dispose() {
        lock (locker) {
            if (dispose)
                return;
            dispose = true;
            try { currentFileStream.Close(); } catch(IOException) { }
            if (Image != null)
                Image.Dispose();
        }
    }
} 
```

EDIT1：根据您的评论，我在此处添加回复，因为系统不允许我在此处添加更多文本

1.  将这样的功能封装到一个类（一组函数）或一个函数中具有良好的一致性，并且很多时候这种良好做法都会导致性能下降。您应该根据自己的情况使用它。
2.  我不认为这是流的工作方式，但是对于小文件，我可以看到情况如何。为了解释这一点，如果您指示文件缓冲区大小为 8K，则无法将大于 8K 的文件缓存在内存中。因此，如果不进行真正的 I/O，流就无法读取整个文件（忘记 Windows 为此在屏幕后面做了什么）。此外，位图构造函数可能会执行同步 I/O，并且在您以异步模式打开它时可能会出现问题。MSDN 明确指出，在流对象的整个生命周期中，流只能以一种模式（同步或异步）使用。我坚信您应该关闭流并从您已经创建的自己的缓冲区中读取。我想说的是，它现在对你有用并不意味着它会在不同的场景中工作；你可能只是“
3.  我同意 volatile 关键字，我只是这样练习，因为有时在更改代码时（比如我要一起摆脱锁）它可以让我避免犯错

# asp.net-mvc-3 - MVC3 CustomRoleProvider 依赖注入问题

> ID：11457239
> 
> 赞同：1
> 
> 时间：2012-07-12T17:23:42.673
> 
> 标签：asp.net-mvc-3, ninject

我正在尝试在我的 MVC3 项目中创建一个自定义 RoleProvider。我的 RoleProvider 定义如下：

```
public class MyRoleProvider : System.Web.Security.RoleProvider
{
    private IAccountService _accountService;

    public MyRoleProvider()
    {
        _accountService = DependencyResolver.Current.GetService<IAccountService>();
    }

    //...
} 
```

如您所见，我正在尝试使用 DependencyResolver 来获取我的绑定服务。我的绑定是在我的 App_Start 中完成的：

```
private static IKernel CreateKernel()
{
    var kernel = new StandardKernel();
    kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
    kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

    RegisterServices(kernel);
    return kernel;
}

private static void RegisterServices(IKernel kernel)
{
    // Add data and infrastructure modules
    var modules = new List<INinjectModule>
    {
        new ConfigModule(),
        new LoggingModule(),
        new RepositoryModule(),
        new ServiceModule()
    };
    kernel.Load(modules);
} 
```

ServiceModule 是我进行实际绑定的地方：

```
public class ServiceModule : NinjectModule
{
    public override void Load()
    {
        Kernel.Bind<ICoreService>().To<CoreService>();
        Kernel.Bind<IAccountService>().To<AccountService>();
    }
} 
```

我的问题是，当我调试网站时，出现配置错误：

配置错误

说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：调用目标已引发异常。

源错误：

```
Line 45:     <roleManager>
Line 46:       <providers>
Line 47:         <clear />
Line 48:         <add name="MyRoleProvider" type="Project.Web.Ui.Helpers.MyRoleProvider, Project.Web.Ui" connectionStringName="MyConnection" />
Line 49:       </providers>
Line 50:     </roleManager> 
```

如果我在我的角色提供者构造函数上放置一个断点：

> _accountService = DependencyResolver.Current.GetService();

我在我的 App_Start Dependency Injector 上放置了一个断点：

> var kernel = new StandardKernel();

_accountService 断点首先命中，但如果我尝试跨步或介入，它就会爆炸。关于我可能做错了什么的任何想法或关于找出更深入挖掘的方法的任何想法？

编辑：我假设原因是因为我的 Dependency Injector 没有将我的服务绑定到接口并且 DependencyResolver 不知道绑定。

# eclipse - Android SDK 示例在 Eclipse 中包含许多错误

> ID：11457240
> 
> 赞同：2
> 
> 时间：2012-07-12T17:23:45.720
> 
> 标签：eclipse, sdk, sample

我刚刚安装了最新的 Android SDK (Android 4.1 API16) 和最新的 Eclipse (Juno Release)。

当我打开示例 Android 项目时（通过文件 > 新建 > 项目 > Android > Android 示例项目），我在许多示例的代码中遇到了一堆错误。

其中大多数是“方法******必须覆盖超类方法”。

还有很多“不推荐使用构造函数****** ”。

我怎样才能让这些错误消失，以便我可以运行应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:49:50.710

而不是走这条路。通过 --> File --> New --> Other --> Android Sample Project --> Select Build target --> Select project 看看它是否有效。至少它对我有用，因为在最后一步之后它显示了 Eclipse 窗口本身中列出的 Android 项目。

![在此处输入图像描述](../Images/ea32b0f74b6dfdf884fc4a91200a8305.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T23:34:01.543

您可能需要安装正确版本的 API。

打开 SDK 管理器并安装缺少的所需 API 版本。

然后清理项目，如果需要重建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T08:44:12.647

你应该更新你的 adt 包和 Window->AndroidSdkManager->Download all api level，然后再试一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T17:39:32.617

检查java编译器版本。您可以在项目属性 >> Java 编译器部分中更改它。版本应该是 1.6 而不是 1.5。

# android - 位置：GPS/网络权限：如果可用，需要

> ID：11457241
> 
> 赞同：10
> 
> 时间：2012-07-12T17:23:46.097
> 
> 标签：android, android-permissions

我希望我的应用程序能够访问 GPS/网络位置（如果它们可用）。我不希望 Google Play 过滤掉没有 GPS/网络定位器的设备。

我该怎么做？

目前我的清单上有这个：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-feature android:name="android.hardware.telephony" android:required="false" />
<uses-feature android:name="android.hardware.location" android:required="false" /> 
```

但是，我不确定这是否足够，因为[http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions-features](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions-features)指出：

-permission *ACCESS_COARSE_LOCATION*暗示`android.hardware.location.network`和 `android.hardware.location`特征要求

-permission *ACCESS_FINE_LOCATION 意味着`android.hardware.location.gps`和 `android.hardware.location`

我还必须添加 `<uses-feature android:name="android.hardware.location.network" android:required="false" />` and `<uses-feature android:name="android.hardware.location.gps" android:required="false" />`吗？

为什么？

应该`<uses-feature android:name="android.hardware.location" android:required="false" />`不够吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:34:55.630

是的，由于权限存储在 API 中的方式，您必须将它们全部包含在内。它们作为字符串存储在[PackageManager 类](http://developer.android.com/reference/android/content/pm/PackageManager.html)中。以您关心的[android.hardware.location](http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_LOCATION)为例。看看字符串与您在清单中键入的内容完全相同。Google Play 在过滤时会查找这些完全匹配的内容。所以`android.hardware.location.gps`实际上不是 的孩子`android.hardware.location`，只是为了组织而这样表示。

# matlab - 如何显示坐标和使用ginput

> ID：11457242
> 
> 赞同：6
> 
> 时间：2012-07-12T17:24:07.113
> 
> 标签：matlab, user-interface, mousemove, matlab-figure, cursor-position

我似乎无法让我的图像显示鼠标光标的坐标，同时也无法使用 ginput 来存储点。

我目前正在尝试以下操作：

```
MriHotrod = imread('Image.bmp');
Fig = figure('Name','BobDole'),...
    imshow(Image, 'InitialMagnification', 250)

axis on
impixelinfo

Image_1 = ginput(4)

close BobDole 
```

ginput 仍然有效，但 impixelinfo 保持不变

```
Pixel Info = (X, Y) Pixel Value 
```

我知道一些解决此问题的方法，但它们涉及功能。这似乎是一个相当简单的问题，可以避免使用函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T18:55:48.500

如果你输入`edit ginput`并滚动到第 238 行，你会看到

```
% Adding this to enable automatic updating of currentpoint on the figure 
set(fig,'WindowButtonMotionFcn',@(o,e) dummy()); 
```

换句话说，在图中`ginput`设置a `WindowButtonMotionFcn`。我的猜测是它也`impixelinfo`使用了这个函数，所以一旦`ginput`被调用它就会被禁用。

实际上，在`impixelinfoval`（由 使用的函数`impixelinfo`）中，我们在第 83 行附近找到：

```
callbackID = iptaddcallback(hFig,'WindowButtonMotionFcn', @displayPixelInfo); 
```

奇怪的是：单击 4 点后如何重置？

这个魔法是由第 222 行完成的`ginput`：

```
initialState.uisuspendState = uisuspend(fig); 
```

显然，`uisuspend`这是一个未记录的函数，用于暂停任何预先存在的`WindowButton*`函数，以便稍后重置它们。所以，如果你注释掉这一行

```
%initialState.uisuspendState = uisuspend(fig); 
```

并保存`ginput`，然后重新做整个事情，你会看到你想要的行为。

您还将看到为什么这些功能首先会被暂停——由于我不太明白的原因，当启用两个这样的功能时，一切都会变得异常缓慢。

# java - 将环境变量从文本文件中获取到 Java 中，bash 样式

> ID：11457246
> 
> 赞同：3
> 
> 时间：2012-07-12T17:24:14.430
> 
> 标签：java, bash, environment-variables, environment

我有一个 bash 文件（我们称之为 bash_file），其中包含许多环境变量分配（例如`TOOLS_DIR="/opt/tools"`）以及 bash 代码，它获取另一个文件（例如`source /opt/other_file`）并从来自 other_file 的环境变量构造环境变量（例如`NEW_ENV_VAR=$FILEPATH/$FILENAME`FILEPATH 和FILENAME 在 other_file 中分配）。

我有一个 Java 应用程序，它需要这些环境变量的可见性，但是使用标准`System.getenv()`并没有获取这些环境变量，因为 bash 文件还没有在 Java 的 shell 中获取。如果我使用 Java 的`Runtime.exec("source bash_file")`，那么环境变量只存在于 Java 的子 shell 中，即使使用了 bash 的`export`命令。

如果我在纯 bash 中，我只需执行我的`source bash_file`并且我可以访问在 bash_file 中分配的所有环境变量，但在 Java 中并不是那么简单。

我已经想到了几个选项，但没有一个看起来特别优雅：

1.  在使用该`source bash_file`命令的同一进程中，将当前添加`env`到 .bashprofile，以便它可用于所有未来的运行时 exec 调用，例如 System.getenv()。

    **问题：**我不能 100% 确定 getenv 是否会在运行时接收到添加到 bashprofile 的 env var，并且将所有这些变量全局导出一点都不好。

2.  再次在与 相同的过程中`source_bash_file`，将当前保存`env`到文本文件，并使用 Java 手动解析。

    **问题：**这可以完成工作，但远不如`System.getenv()`. 用 Java 编写解析器似乎也很棘手。

3.  找出 Java 的 bash 环境在哪里实例化（可能在 java.System.lang 中）并修改以在初始化 Java 环境`source bash_file` *之前*执行，因此我的 Java 应用程序继承了这些变量。

    **问题：**这似乎是我所有选项中最混乱的一个，我不知道从哪里开始寻找 Java 的 shell 环境的初始化。

有什么方法可以`source`从 Java 执行类似 bash 的操作，或者，获取该功能的最简单实现是什么？在评估可能的行动方案时，我也表达了一些不确定性，如果有人能向我补充这些不确定性，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:13:01.723

不，没有在 Java 中运行 bash 代码的通用方法。但是通过 shell 脚本调用 Java 程序是很常见的；你确定你的还没有那样工作吗？如果是这样，那是在执行程序之前获取其他 bash 文件的最直接的地方。

如果由于某种原因这不是一个选项，那么#2 是最好的解决方案。#1 和 #3 不好；您不希望仅仅为了能够运行该程序而更改系统范围或帐户范围的设置 - 特别是如果您计划让其他人使用它。

#2 选项的解析不需要很复杂。只需使用内置函数或类似方法输出环境变量`set`，然后在您的 Java 解析器中一次读取一行并`=`在每行的第一个符号处拆分。如果变量包含换行符，bash 应该将它转义在一个美元引号字符串中，这可能会混淆您的解析，但您可能不需要担心嵌入的换行符，因此将结果视为垃圾。您可能还想取消引用 or 中包含的值`''`，`""`甚至可能在第二种情况下处理反斜杠转义，但在大多数情况下，不需要反斜杠解析。

# silverlight-4.0 - 更改 Silverlight Datagrid 列显示索引总是会引发参数超出范围异常

> ID：11457250
> 
> 赞同：1
> 
> 时间：2012-07-12T17:24:33.857
> 
> 标签：silverlight-4.0, datagrid

我在视图中有一个数据网格，它的项目源绑定到我的视图模型中的可观察集合。这工作正常。我已经在视图 xaml 中定义了数据网格的列和绑定。所有列都有一个与它们所代表的数据库列名称相匹配的唯一名称。

我创建了一个用户控件，其中包含数据网格的所有过滤器。用户控件有一个命令，视图模型绑定到该命令为视图模型提供调用 ria 服务所需的所有参数，并填充绑定到数据网格项目源的可观察集合。这工作正常。

我有一个服务，它引用了数据网格并订阅了过滤器用户控件的事件之一。当事件触发服务更改列标题，然后使用列显示索引对列重新排序时，它会折叠不再相关的列。

除了更改显示索引外，所有这些都有效。每次更改显示索引值之一时，都会出现超出范围的异常。我在离开方法之前查看了索引，它们是有效的。我试过等到数据绑定发生之后，它没有任何区别。任何见解将不胜感激。这是堆栈跟踪：

> 在 MS.Internal.XcpImports.MethodEx(IntPtr ptr, String name, CValue[] cvData) 在 MS.Internal.XcpImports.MethodEx(DependencyObject obj, String name) 在 System.Windows.UIElement.UpdateLayout()

# excel - 水晶报表7导出到excel Max

> ID：11457251
> 
> 赞同：0
> 
> 时间：2012-07-12T17:24:35.123
> 
> 标签：excel, crystal-reports, export-to-excel

我使用的水晶报表有excel 5.0，它有16384行的限制，当导出的信息超过这个数字时我该怎么办。问题是一旦达到限制，其他数据就会被切断，这并不酷

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:23:28.597

您可以在报告标题中放置警告，以便交互式用户收到截止警告。另一种可能性是提示用户输入节号并过滤块中的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T05:14:13.400

尝试以下步骤

1）首先从累计或从报表数据源数据表端找到总记录。

2）当导出数据超过限制时，从水晶报表导出数据后创建另一个excel文件并将剩余数据放在该文件中，您必须在代码中执行此操作。

3) 向用户发送一条消息，指出导出的数据创建了两个文件。

# java - 正确高效的编程风格

> ID：11457257
> 
> 赞同：1
> 
> 时间：2012-07-12T17:24:46.933
> 
> 标签：java, exception, coding-style, refactoring

有一个类 X。X 类`method()`中的一个方法 throws `SomeException`。

我想知道哪种处理异常的方法更好——更有效。如果它是围绕try-block方法抛出异常和所有依赖关系或将依赖关系保持在try-block之外，但在失败后从方法返回。

1.

```
public void test() {
     X x = new X();

     try {
          T temp = tx.method();
          temp.doWhatever();
     }

     catch(SomeException e) { handleException(e); }
} 
```

**或者**

2.

```
public void test() {
     X x = new X();
     T temp = null;
     try {
          temp = tx.method();
     }

     catch(SomeException e) { 
          handleException(e);
          return;
     }

     temp.doWhatever();
} 
```

* * *

**编辑：（在您的注释之后）**

更重要的是，我这样理解我的代码：

1. `tx.method()`会抛出一个异常，所以接下来要执行的是`catch`- 阻塞。`temp`仍然没有关系，`null`因为程序跳过了`temp.doWhatever();`行并且不会有`NullPointerException`.

2.这里我使用`return`指令是因为我不想执行`temp.doWhatever()`因为`temp`是`null`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:31:54.113

只有第一个是可能的，因为 temp 是在内部声明的。

我个人选择第一个，否则需要在尝试之前声明：T temp = null。

* * *

***问题更正后：***

**专业优先**

第一个代码的跳转指令较少，变量`temp`更局部，并且没有空初始化。

此外，编码风格更紧凑，没有空初始化，可能是错误点。

此外，应将例外情况排除在外；更容易阅读第一个版本。异常不应中断线性编码和读取过程。

**临二**

更清楚异常可能源于何处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:34:16.230

异常工作方式的关键点之一是您可以使用您的风格编号 1：让代码块安心地执行，无论它在哪里中断，流程都会被中断并处理错误。所以我总是建议第一种风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:32:01.353

第二种情况甚至不会编译（甚至没有意义），因为在块`temp`之外是不可见的。`try`无论如何，我会这样做：

```
public void test() {
     X x = new X();

     try {
          T temp = tx.method();
          temp.doWhatever();
     }

     catch(SomeException e) { handleException(e); }
} 
```

由于如果初始化失败，则不应执行`temp`其余操作。`temp`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:42:52.320

在一个方法中有多个返回是不好的。但这只是为了有可理解的代码。您可以使用布尔值和 if 来避免返回。

我认为没有效率问题。如果第一个语句发生异常，则不执行第二个语句。如果没有例外，那么......嗯......我认为第二种方法应该没有开销。您可以通过 try catch 告诉您“汇编程序”代码的外观：D

在我看来，编写无法理解的代码更为重要。现在的编译器非常好，并且优化了大多数东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T18:33:09.303

出于可扩展性的原因，选项二不好。假设后来有人决定 test() 应该在 test.doWhatever() 之后做某事，即使遇到异常情况也是如此。届时他们将不得不将代码重构为选项一。由于从一开始就使用选项一是没有成本的，因此他们没有理由必须这样做。

Further, the design principle of the try/catch block is violated by returning from the catch block, even though the compiler will still accept it. For the catch to be a return point, it should be throwing an exception, since the action is invoked because of an exceptional case.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-12T17:29:43.680

我看不出这两种方法有什么区别。

# ms-access - Access 数据库中的更改仅出现在新记录中

> ID：11457258
> 
> 赞同：1
> 
> 时间：2012-07-12T17:24:50.093
> 
> 标签：ms-access, vba

我有一个包含一系列问题的访问表格。每个问题都有一个带有三个单选按钮的框架，每个单选按钮指定一个不同的选择（方便 1、2、3）。我已在此表单中添加了一个问题，并希望通过某种方式指定更改之前的所有记录免于此字段。我想我可以将之前记录中该字段的值设置为 -1 以表示它们是豁免的。但是现在我不知道如何在以前的记录中基本上禁用这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:40:06.107

不确定我对您的描述的理解程度，根据我的直觉，表单的当前事件可能在这里有用。

```
Private Sub Form_Current()
    Me.ControlName.Enabled = Not Me.indicator_field = -1
End Sub 
```

如果`ControlName`应该`Enabled`用于新记录，可以使用 Nz`()`函数来处理初始 Null。

```
Me.ControlName.Enabled = Not Nz(Me.indicator_field, 0) = -1 
```

您还可以管理`ControlName`' 的`Locked`财产，而不是`Enabled`. 这些组合以不同的方式改变控件的外观。看你喜欢哪个。

我可能忽略了其他细节，但希望这能给你一个有用的起点。

如果您的表单包含按顺序排列的文本框，例如 Text1、Text2、... Textn，您可以使用`For`循环对它们中的每一个执行某些操作...启用/禁用或其他...我将使用`Debug.Print`它，因为它很简单为了我。

```
Dim i As Long
Dim strCtl As String
For i = 1 To 10
    strCtl = "Text" & CStr(i)
    Debug.Print Me.Controls(strCtl).Name
Next i 
```

关键是您可以使用字符串变量来引用表单`Controls`集合的特定成员。然后用它做你需要的，而不是打印它的`.Name`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:27:27.753

您可以参考 NewRecord 属性：

```
Private Sub Form_Current()
     If Me.NewRecord = True
        Then Me.MyControl.Enabled = True
     Else
        Then Me.MyControl.Enabled = False
     End If
End Sub 
```

或者使用你的新领域，你可以说：

```
If Me.MyField = -1
    Then Me.MyControl.Enabled = False
 Else
    Then Me.MyControl.Enabled = True
 End If 
```

在 MS Access 表中包含创建日期时间几乎总是一个好主意。

# html - CSS背景不重复，但有空格

> ID：11457262
> 
> 赞同：0
> 
> 时间：2012-07-12T17:24:58.817
> 
> 标签：html, background, css

我的网站有问题。

有一个 CSS 代码可以将渐变显示为我的网页的背景。

使用选项：“background-repeat:no-repeat;”，如果渲染的网页比浏览器可以显示的空间小，页面底部会有一个空白区域。

如果我删除这个选项，背景会重复，但渐变会重新开始，所以结果很糟糕。喜欢：

```
Blue
<Content of the rendered page>
Red
Blue
Red 
```

我发现的唯一解决方案是使渐变为白色，并禁用重复。所以白色空间似乎是渐变的尽头。

但我需要这些颜色，有什么建议吗？我可以用颜色改变白点吗？

谢谢你。

更新：我用建议的链接更改了我网站的颜色，但渐变像以往一样重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:28:45.447

用它来构建渐变的东西，

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

当后台重复工作时看这里

[http://www.w3schools.com/cssref/playit.asp?filename=playcss_background-repeat&preval=no-repeat](http://www.w3schools.com/cssref/playit.asp?filename=playcss_background-repeat&preval=no-repeat)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:28:52.043

也许这会有所帮助？

```
background-attachment:fixed; 
```

# c# - C# 中的数据表选择

> ID：11457263
> 
> 赞同：0
> 
> 时间：2012-07-12T17:25:11.097
> 
> 标签：c#, silverlight

我正在调试 Silverlight 应用程序，并遇到数组索引超出范围的问题。我对 DataTable.Select 语句的语法不够熟悉，并且该应用程序的开发人员接下来的 10 天都在外地。线

**searchParamsTable.Select(string.Format("TABLE = {0} AND FIELD = '{1}'", tableNumbers[i], fieldName[i]))[0]["VALUE"] = wildcardedSearchString;**

从下面的代码中可以看出，“索引越界”发生在“i”的第二次迭代中，当 i=1 时。我不确定 [0][“VALUE”] 在这种情况下代表什么.如果有人能解释这个字符串中代表什么，我将不胜感激！

```
if (i < 2 || country != -1)
{
    if (!string.IsNullOrEmpty(wildcardedSearchString))
    {
        searchParamsTable.Select(string.Format("TABLE = {0} AND FIELD = '{1}'", tableNumbers[i], fieldName[i]))[0]["VALUE"] = wildcardedSearchString;

        MarkRequiredParametersForSearch(searchParamsTable);

        returnList = GetSearchResults(contactType, session, searchParamsTable, returnList,
            (int)searchParamsTable.Select(string.Format("TABLE = {0} AND FIELD = '{1}'", tableNumbers[i], fieldName[i]))[0]["FIELDNO"]);

        // Filter by authority type if necessary.
        if (authorityType != AuthorityType.Unknown)
        {
            var results = from EntitySearchResult result in returnList
                          where result.SubType == (int)authorityType
                          select result;
            if (results != null)
            {
                returnList = results.ToList();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:31:16.163

`DataTable.Search()`返回 a `DataRow[]`，因此`[0]["VALUE"]`从 返回的第一行获取“VALUE”列的值`Search`。

它可以重写为：

```
DataRow[] foundRows searchParamsTable.Select(string.Format("TABLE = {0} AND FIELD = '{1}'", tableNumbers[i], fieldName[i]));
DataRow firstRow = foundRows[0];
firstRow["VALUE"] = wildcardedSearchString; 
```

从您的代码示例看来，您有几个地方的索引超出范围异常：

1.  tableNumbers 只有一个元素
2.  fieldName 只有一个元素
3.  `Search`返回零行。

# c# - 从 ajax 调用填充多个下拉列表

> ID：11457264
> 
> 赞同：1
> 
> 时间：2012-07-12T17:25:11.773
> 
> 标签：c#, javascript, jquery, sql, vb.net

我有一个带有 +- 50 行的 html 表（从数据库生成），每行将有三个唯一的下拉列表（每个下拉选项都来自数据库中的不同表）

我该如何用ajax填充它们。我知道如何填充和构建一个，但你能就许多的概念提出建议吗？

我是否使用一个 ajax 调用帖子到一个 handler.ashx，它使用一个 sql 语句来检索所有三个表数据，然后将其放入一个 json 对象中 - 然后 jquery 从那里构建它？

还是我使用三个单独的 ajax 调用和三个 sql 语句？但我认为这是不可能的，因为在循环中，ajax 不会等待数据被获取？

您能否就最佳解决方案或教程或想法/概念提出建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:15:52.750

我同意markpsmith，您可能应该*尝试*在服务器端填充下拉列表，但如果您真的想在客户端填充它们，这里有一个如何使用AJAX 完成的示例。请记住，该示例并未注册事件以进行验证。这是一个完全不同的问题，你将不得不解决......

**页面代码**

```
<%-- 
c2012 Shawn Eary cc-wiki - Load DropDowns via AJAX Demo 

Shows how to use client script to load ASP AJAX DropDownLists using
AJAX and jQuery.  This ASP.NET file does not use any server side
code other than the code that is contained in the GetDropDownData
webservice.  All population is done on the client side. 

References (Places I Got Help From) - 
[1] - Unknown. 
Options to List Box in Client Side JavaScript." 
plus2net. 2010\. 
http://www.plus2net.com/javascript_tutorial/list-adding.php 
(accessed AUG 31, 2012).

[2] - Ward, David. 
"Using jQuery to Directly Call ASP.NET AJAX Page Methods." 
Encosia. MAR 10, 2012\. 
http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/ 
(accessed AUG 31, 2012).
--%>
<%@ Page Language="C#" AutoEventWireup="true" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
   <title>
   c2012 Shawn Eary cc-wiki - Load DropDowns via AJAX Demo
   </title>
   <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.8.0.js" type="text/javascript"></script> 
</head>
<body>  
   <form id="form1" runat="server">    
      <%-- A table with three columns and several rows of non
           populated DropDownLists --%>
      <table>
         <tr>
            <td><asp:DropDownList CssClass="Drop1" runat="server"></asp:DropDownList></td>
            <td><asp:DropDownList CssClass="Drop2" runat="server"></asp:DropDownList></td>
            <td><asp:DropDownList CssClass="Drop3" runat="server"></asp:DropDownList></td>
         </tr>                  
         <tr>
            <td><asp:DropDownList CssClass="Drop1" runat="server"></asp:DropDownList></td>
            <td><asp:DropDownList CssClass="Drop2" runat="server"></asp:DropDownList></td>
            <td><asp:DropDownList CssClass="Drop3" runat="server"></asp:DropDownList></td>
         </tr>                  
         <tr>
            <td><asp:DropDownList CssClass="Drop1" runat="server"></asp:DropDownList></td>
            <td><asp:DropDownList CssClass="Drop2" runat="server"></asp:DropDownList></td>
            <td><asp:DropDownList CssClass="Drop3" runat="server"></asp:DropDownList></td>
         </tr>                  
         <tr>
            <td><asp:DropDownList CssClass="Drop1" runat="server"></asp:DropDownList></td>
            <td><asp:DropDownList CssClass="Drop2" runat="server"></asp:DropDownList></td>
            <td><asp:DropDownList CssClass="Drop3" runat="server"></asp:DropDownList></td>
         </tr>                  
      </table>    
   </form>

   <script type="text/ecmascript">
      function setColumnDropDownData(dataSource, columnNum) {
         for (var i = 0; i < dataSource.length; i++) {
            var curItem = dataSource[i];
            var text = curItem.text;
            var value = curItem.value;
            var theDropDowns = $('.Drop' + columnNum);
            for (var j = 0; j < theDropDowns.length; j++) {
               var curDropDown = theDropDowns[j]; 

               // Populate the DropDown as in [1]
               var someOption = document.createElement("OPTION");
               someOption.text = text; 
               someOption.value = value;
               curDropDown.options.add(someOption);               
            }            
         }
      }

      <%-- Mr. Ward shows how to call a WebMethod without using 
           AJAX ScriptManager in [2] --%>
      $.ajax({
         type: "POST",
         url: "testServices.asmx/GetDropDownData",
         data: "{tableName: 'color'}",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (msg) {            
            setColumnDropDownData(msg.d, 1);
         }
      });

      $.ajax({
         type: "POST",
         url: "testServices.asmx/GetDropDownData",
         data: "{tableName: 'shape'}",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (msg) {
            setColumnDropDownData(msg.d, 2);
         }
      });

      $.ajax({
         type: "POST",
         url: "testServices.asmx/GetDropDownData",
         data: "{tableName: 'size'}",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (msg) {
            setColumnDropDownData(msg.d, 3);
         }
      });      
   </script>
</body>
</html> 
```

**服务代码**

```
// c2012 Shawn Eary cc-wiki - Load DropDowns via AJAX Demo 
// 
// Shows how to use a WebMethod to selectively push possible 
// DropDownList population data back to the client 
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

/// <summary>
/// Container for the data items that will be pushed back to the 
/// client via JSON
/// </summary>
public class selectOption
{
   public selectOption(int iValue, string iText)
   {
      value = iValue; 
      text = iText; 
   }
   public int value; 
   public string text; 
}

/// <summary>
/// Summary description for testServices
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService]
public class testServices : System.Web.Services.WebService {

   // Send Data back to the client based upon the table of 
   // information she/he wants.  In real life, each of the different
   // if branches could be replaced with calls to the SQL database
   // to get the data but putting these calls here doesn't 
   // significantly enhance the purpose of this example
   [WebMethod]
   public List<selectOption> GetDropDownData(string tableName) {                  
      List<selectOption> returnVal = new List<selectOption>();

      if (tableName == "color") { 
         // Normally you would use Entity Framework to get information
         // from your T-SQL database here, but it isn't necessary
         // for me to show the database calls for this illustration
         returnVal.Add(new selectOption(1, "blue"));
         returnVal.Add(new selectOption(2, "yellow"));
         returnVal.Add(new selectOption(3, "green"));
      }
      else if (tableName == "shape")
      {
         // Normally you would use Entity Framework to get information
         // from your T-SQL database here, but it isn't necessary
         // for me to show the database calls for this illustration
         returnVal.Add(new selectOption(1, "square"));
         returnVal.Add(new selectOption(2, "triangle"));
         returnVal.Add(new selectOption(3, "oval"));
         returnVal.Add(new selectOption(4, "circle"));
      }
      else if (tableName == "size")
      {
         // Normally you would use Entity Framework to get information
         // from your T-SQL database here, but it isn't necessary
         // for me to show the database calls for this illustration
         returnVal.Add(new selectOption(1, "big"));
         returnVal.Add(new selectOption(2, "small"));         
      }

      return returnVal;
   }    
} 
```

**结果截图**

![在此处输入图像描述](../Images/1e2de4a69df203ac13e879f100740029.png)

# asp.net - ashx 调用中的 cookie 持久性

> ID：11457267
> 
> 赞同：0
> 
> 时间：2012-07-12T17:25:19.370
> 
> 标签：asp.net, c#-4.0, cookies, ashx

siteA.com 调用 sitecookie.com/cookies.ashx 并为 sitecookie.com 域设置一个 cookie“cookiename”。相同的浏览器、相同的窗口、新选项卡、siteB.com 调用 sitecookie.com/cookies.ashx 并尝试获取相同的 cookie“cookiename”（再次用于 sitecookie.com 域）**但为空。**

cookies.ashx 实现 IHttpHandler、IReadOnlySessionState 和 conformsTo [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]

所以问题是，为什么它是空的，我们可以检索它吗？

这就是我从siteA和siteB发出请求的方式：

```
 WebClient fs = new WebClient();
            var data = fs.DownloadData("http://sitecookie.com/cookies.ashx");
            var tostring = System.Text.Encoding.ASCII.GetString(data);
            return tostring; 
```

这就是我在 cookies.ashx 中读取 cookie 的方式，返回值是一个字符串。

```
 var cookie = context.Request.Cookies["cookiename"];
            if (cookie != null) return cookie.Value;
            return "false"; 
```

这就是我在 cookies.ashx 中编写 cookie 的方式

```
HttpCookie cookie = new HttpCookie("sso");
            cookie.Value = context.Request.QueryString["token"];
            cookie.Expires = DateTime.Now.AddDays(1);
            context.Response.AppendCookie(cookie);
            return "true"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:06:14.637

事实证明这是不可能的，因为对[http://sitecookie.com/cookies.ashx](http://sitecookie.com/cookies.ashx)的每次调用都被视为一个新请求，asp.net 将启动一个新的 sessionId。持久化的唯一方法是存储 sessionid 并将其传递给每个后续请求。对我来说，该解决方案不起作用，因为我有许多客户调用该服务，并且我将无法在这些客户之间传递 sessionid。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T08:39:10.183

您的回答是正确的，但可以在后续的 .ashx 调用之间检索 cookie。您需要 .ashx 文件在 .ashx 文件代码的开头从文件或数据库记录中“检索”cookie（我通过命名管道与数据库通信以实现此目的），并将它们“存储”到.ashx 文件代码末尾的同一文件或同一数据库记录中。

不要忘记记录 cookie 的这些基本组件：名称、值、域、HttpOnly、安全和路径，并在正确设置这些组件的情况下重新生成 cookie，否则将无济于事！但是 - 如果你做得正确，你可以“欺骗”你的远程服务器 - 它可能首先创建 cookie - 当你与它通信（使用 Http？）并传递它时，你的 .ashx 文件代码调用没有区别在 cookie 容器中来回拥有自己的 cookie。祝你好运 ..

# ruby-on-rails - Rails 嵌套表单插入空值

> ID：11457274
> 
> 赞同：0
> 
> 时间：2012-07-12T17:26:23.030
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在 Rails 3.2.6

我们有一个嵌套表单直到最近才起作用（不完全确定错误何时开始发生）。现在查询传入空值。

示例输出：

```
Started POST "/articles" for 127.0.0.1 at 2012-07-12 11:04:16 -0600
Processing by ArticlesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"thing=", "article"=>{"asset_attributes"=>{"name"=>"asdf", "short_desc"=>"asdfasdfsadg", "publish_date"=>"2012-07-12 11:4", "content_section_attributes"=>{"section_id"=>"1", "primary_section"=>"1"}, "section_ids"=>[""], "author_id"=>"", "display_authorbiography"=>"1", "last_modified_by"=>"1", "by_line"=>"", "content_image_attributes"=>{"image_id"=>""}, "keywords_string"=>"", "public_keywords_string"=>"", "meta_public_keywords"=>"", "meta_page_title"=>"", "meta_description"=>"", "meta_url_name"=>"", "guid"=>"", "canonical"=>"", "partner_id"=>"", "tagline"=>"", "series_id"=>"", "display_adsense"=>"1", "sweepstakes"=>""}, "content"=>"<p>asdfasgasg</p>"}, "img_size"=>"i01", "show_cap"=>"1", "img_pos"=>"left", "commit"=>"Create"}
  User Load (0.2ms)  SELECT `people`.* FROM `people` WHERE `people`.`type` IN ('User') AND `people`.`id` = 1 LIMIT 1 /*application:TmnCoreCms,controller:articles,action:create*/
  Section Load (0.1ms)  SELECT `sections`.* FROM `sections` /*application:TmnCoreCms,controller:articles,action:create*/
  Site Load (0.1ms)  SELECT `sites`.* FROM `sites` WHERE `sites`.`id` IN (1) /*application:TmnCoreCms,controller:articles,action:create*/
  Site Load (0.1ms)  SELECT `sites`.* FROM `sites` /*application:TmnCoreCms,controller:articles,action:create*/
  Section Load (0.1ms)  SELECT `sections`.* FROM `sections` WHERE `sections`.`site_id` IN (1) /*application:TmnCoreCms,controller:articles,action:create*/
  Role Load (0.1ms)  SELECT `roles`.* FROM `roles` INNER JOIN `user_roles` ON `roles`.`id` = `user_roles`.`role_id` WHERE `user_roles`.`user_id` = 1 /*application:TmnCoreCms,controller:articles,action:create*/
   (0.1ms)  BEGIN /*application:TmnCoreCms,controller:articles,action:create*/
   (0.1ms)  COMMIT /*application:TmnCoreCms,controller:articles,action:create*/
   (0.1ms)  BEGIN /*application:TmnCoreCms,controller:articles,action:create*/
   (0.1ms)  COMMIT /*application:TmnCoreCms,controller:articles,action:create*/
   (0.1ms)  BEGIN /*application:TmnCoreCms,controller:articles,action:create*/
  SQL (0.2ms)  INSERT INTO `articles` (`content`, `created_at`, `static_url`, `updated_at`) VALUES ('<p>asdfasgasg</p>', '2012-07-12 17:04:16', NULL, '2012-07-12 17:04:16') /*application:TmnCoreCms,controller:articles,action:create*/
  Article Load (0.3ms)  SELECT `articles`.* FROM `articles` WHERE `articles`.`id` = 25 LIMIT 1 /*application:TmnCoreCms,controller:articles,action:create*/
{}
  SQL (0.0ms)  INSERT INTO `assets` (`aasm_state`, `author_id`, `by_line`, `canonical`, `content_id`, `content_type`, `created_at`, `creator_id`, `display_adsense`, `display_authorbiography`, `guid`, `last_modified_by`, `legacyid`, `live_date`, `meta_description`, `meta_page_title`, `meta_public_keywords`, `meta_url_name`, `migration_guid`, `name`, `partner_id`, `publish_date`, `publish_version`, `series_id`, `short_desc`, `sweepstakes`, `tagline`, `updated_at`, `url_name`) VALUES ('new', NULL, NULL, NULL, 25, 'Article', '2012-07-12 17:04:16', NULL, 1, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2012-07-12 17:04:16', NULL) /*application:TmnCoreCms,controller:articles,action:create*/
  SQL (0.2ms)  INSERT INTO `content_sections` (`content_id`, `content_type`, `created_at`, `primary_section`, `section_id`, `updated_at`) VALUES (53, 'Asset', '2012-07-12 17:04:16', 1, NULL, '2012-07-12 17:04:16') /*application:TmnCoreCms,controller:articles,action:create*/
   (33.6ms)  COMMIT /*application:TmnCoreCms,controller:articles,action:create*/
Redirected to http://localhost:3000/articles/53-
Completed 302 Found in 63ms (ActiveRecord: 35.3ms) 
```

如您所见，正在发送属性。我们的控制器看起来像这样。

```
def new
    @article = Article.new
    @asset = @article.build_asset
  end

  def create
    @article = Article.new(params[:article])
    if @article.save
      flash[:notice] = 'Article was successfully created.'
      redirect_to @article
    else
      render :action => "new"
    end
  end 
```

相关型号信息：

```
class ContentType < ActiveRecord::Base
  self.abstract_class = true
  validates_presence_of :asset, :message => "Must have an asset"
  has_one :asset, :as => :content, :dependent => :destroy
  delegate :name, :url_name, :author, :creator, :publish_date, :short_desc,
           :aasm_state, :live_date, :keywords,
           :to => :asset, :allow_nil => true
  delegate :keywords_string, :public_keywords_string,
           :to => :asset,
           :allow_nil => true

  def initialize(*args)
    super(*args)
  end

  def to_param
    "#{asset.id}-#{url_name}"
  end
end

class Asset < ActiveRecord::Base
  include AASM
  include Keywordable
  attr_accessible :author_id,
                  :by_line,
                  :canonical,
                  :content_image_attributes,
                  :content_section_attributes,
                  :creator_id,
                  :display_adsense,
                  :display_authorbiography,
                  :guid,
                  :keywords,
                  :keywords_string,
                  :last_modified_by,
                  :meta_description,
                  :meta_page_title,
                  :meta_public_keywords,
                  :meta_url_name,
                  :name,
                  :partner_id,
                  :public_keywords_string,
                  :publish_date,
                  :related_content_attributes,
                  :section_ids,
                  :series_id,
                  :short_desc,
                  :sweepstakes,
                  :syndication_partner_ids,
                  :tagline,
                  :url_name

  belongs_to :author,  :class_name => 'Person'
  belongs_to :content, :polymorphic => true
  has_many :content_sections, :as => :content,  :conditions => {:primary_section => nil},  :dependent => :destroy

class Article < ContentType
  attr_accessible :images_attributes,
                  :content_images_attributes,
                  :content_text,
                  :content,
                  :asset_attributes,
                  :content_attributes 
```

我真的不喜欢这个协会的成立，但它就是这样。发生的事情是嵌套形式

```
<%= f.fields_for :asset do |asset| %>
    <fieldset class="span8">
        <legend>Asset Description</legend>
        <div id='a_title'>
            <%= asset.label :name, "Title <span class='req'>*</span>".html_safe %>
            <%= asset.text_field :name, :class => 'asset_textarea counter', "data-max" => 255 %>
            <br/><span></span>
        </div>
        <div id='a_desc'>
            <%= asset.label :short_desc, "Teaser<span class='req'>*</span>".html_safe %>
                    <%= asset.text_area :short_desc, :class => "span7 asset_textarea counter", "data-max" => 255, :rows => 7 %>
                    <br/><span></span>
        </div>
    </fieldset>
<% end %> 
```

以某种方式传递字段，Rails 正在输入空值。我没有 attr_accessible 警告。如果我对文章进行更新，它将保存资产数据。所以我认为初始化出现了问题，但我不确定是什么。

**尽管 attr_accessible 具有嵌套属性，但TLDR** Rails 并未将值传递到 sql 查询中。

**编辑**

contentTypesController 有一些之前我认为是问题的过滤器（它们仍然可能是我仍在弄清楚它们是如何被使用的）

```
class ContentTypesController < ApplicationController

  before_filter :clean_syndication_partners, :only => [:update]
  before_filter :setup_existing_content_instance_variable, :except => [:index, :new, :create, :sort, :update_json, :vid_search, :search_library]
  #before_filter :setup_new_content_instance_variable, :only => [:new, :create]
  before_filter :get_sections
  before_filter :get_sites
  def clean_syndication_partners
    @asset = Asset.find(params[:id], :include => :content)
    @asset.syndication_partners = []
  end

  def get_sites
    @sites_all = Site.all(:include => :sections)
  end
  def get_sections
    @sections = Section.all(:include => :site)
  end

  def setup_existing_content_instance_variable
    @asset = Asset.find(params[:id], :include => :content) if @asset.nil?
    instance_variable_set("@#{@asset.content.class.name.underscore}", @asset.content)
  end

  # def setup_new_content_instance_variable
  #   pub_keyword = false
  #   current_class = self.controller_name.singularize
  #   @content_type = current_class.downcase
  #   if params[current_class]
  #     cur_content= current_class.camelize.constantize.new(params[current_class])
  #     #cur_content.asset = Asset.update_attributes(params[current_class][:asset_attributes])
  #   else
  #     cur_content= current_class.camelize.constantize.new
  #     #cur_content.asset=Asset.new
  #   end
  #   #cur_content.asset.creator=current_user
  #   #instance_variable_set(:@asset, cur_content.asset)
  #   instance_variable_set("@#{current_class}", cur_content)
  # end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:40:06.790

您忘记将其添加到您的文章模型中：

```
accepts_nested_attributes_for :asset, allow_destroy: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:53:04.547

该问题最终成为从 3.2.5 到 3.2.6 的 Rails 更新。我认为这是由于我们使用类继承来共享资产关系的唯一目的。我们回滚了它，我们将在未来重新检查这种关系。

# python - 防止 wx.StaticBitmap 调整大小

> ID：11457276
> 
> 赞同：0
> 
> 时间：2012-07-12T17:26:31.393
> 
> 标签：python, bitmap, wxpython, autoresize, wxwidgets

这与 wxPython 有关。

我经常将 new `wx.Bitmap`s 设置为`wx.StaticBitmap`控件。每次我这样做时，都会调整控件的大小以适合图像大小。

`wx.StaticBitmap`设置新控件时有没有办法保持控件的大小`wx.Bitmap`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:49:29.620

你可以做我在[简单的图像查看器](http://www.blog.pythonlibrary.org/2010/03/26/creating-a-simple-photo-viewer-with-wxpython/)中所做的事情，即缩小图像。

```
# scale the image, preserving the aspect ratio
self.PhotoMaxSize = 240
img = wx.Image(filepath, wx.BITMAP_TYPE_ANY)
W = img.GetWidth()
H = img.GetHeight()
if W > H:
    NewW = self.PhotoMaxSize
    NewH = self.PhotoMaxSize * H / W
else:
    NewH = self.PhotoMaxSize
    NewW = self.PhotoMaxSize * W / H
img = img.Scale(NewW,NewH)
self.imageCtrl.SetBitmap(wx.BitmapFromImage(img)) 
```

我认为这在 imageCtrl 是 wx.StaticBitmap 的情况下非常有效

# jquery - 多个可选择项，在做出任何选择后重置所有其他项

> ID：11457278
> 
> 赞同：0
> 
> 时间：2012-07-12T17:26:33.043
> 
> 标签：jquery, accordion, jquery-ui-selectable

我在网页中使用了多个 jquery-ui-selectable。我希望选定的文本值显示在文本字段中。基本上我设计了一个类别结构，其中我使用手风琴作为头部并可选择作为子类别。

我可以在文本字段中显示它，但问题是当我想从另一个手风琴中选择项目时，前一个手风琴的项目的值会附加在文本字段中。这只是因为先前手风琴中的项目仍处于选中状态。一旦单击下一个手风琴中的项目，我想从上一个手风琴中取消选择它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:56:24.107

如果我的问题是正确的，那么您只需要实现一个更改处理程序。

示例代码可能如下所示：

```
$(".selectable").selectable({

    // change handler
    stop: function() {

        // reset all selected values in other selectables
        $('.selectable').not(this).find('li').removeClass('ui-selected');

        // print currently selected value(s)
        $('#result').val(
            $(".ui-selected").map(function() {
                return $(this).text();
            }).get().join(";")
        );
    }

});​ 
```

在这个[FIDDLE](http://jsfiddle.net/LCdaz/1/)中看到它。

# java - 为什么通配符导入语句使用类路径 jar 类而不是 jdk 类？

> ID：11457280
> 
> 赞同：1
> 
> 时间：2012-07-12T17:26:53.700
> 
> 标签：java, java-io

最初我在类路径的 jar 中有一个 java.io.File 类，它没有 separatorChar 属性。所以我遇到了以下代码块运行的问题：

```
import java.io.File;

public class HelloWorld {

    public static void main(String[] args) { 
        System.out.println("separatorChar= " + File.separatorChar); 
    } 
} 
```

但我将导入语句更改如下：

```
import java.io.*; 
```

然后我收到一个错误，基本上说明找不到 File.separatorChar。

我认为正在发生的是 import java.io.* 正在使用类路径中 jar 中的类，而 import java.io.File 专门使用 Java 附带的 File 类。

这里的问题是为什么 import java.io.File 起作用而 java.io.* 不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:35:09.737

在一个空的项目中，代码仍然用 编译`import java.io.*`，所以似乎使用了另一个类。如果您使用 Eclipse，您可以检查工具提示`File`以查看它是哪个类。

或者，您可以使用

```
System.out.println(File.class.toString()) 
```

这将在运行时打印出类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T21:35:10.557

正如 EJP 对原始问题的评论，

> 那是对的。Import java.io.* 为编译器提供了另一个位置来查找不在当前包中的类。Import java.io.File 告诉编译器使用哪个 File。道德：不要重用 JDK 类名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:33:16.053

你一定在某个地方搞砸了别的东西。

当我编译

```
import java.io.*;

public class HelloWorld {

    public static void main(String[] args) { 
        System.out.println("separatorChar= " + File.separatorChar); 
    } 
} 
```

我明白了

```
c:\files\j>javac HelloWorld.java

c:\files\j>java HelloWorld
separatorChar= \ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T17:32:21.483

当你使用 java.io.* 时；你所看到的只是文件，因此到达 separatorChar 的路径不是 File.seperatorChar，而是 io.file.separaterChar。它处理起点在哪里。这就像一个文件系统......如果你在 /users/matt 并且你输入 /documents/mytext.txt 完整路径是 C:/users/matt/documents/mytext.txt 如果我回到用户文件，然后相同的命令 (/documents/mytext.txt) 将查找不存在的 C:/users/documents/mytext.txt。希望有帮助。

# php - 按字母顺序打印出一个数组

> ID：11457284
> 
> 赞同：0
> 
> 时间：2012-07-12T17:27:09.220
> 
> 标签：php

嗨，我有来自模板的以下代码。

```
<ul class="sub-categories">
    <?php

        foreach ($category->getChildren() as $child) {
            if (!$child->totalItemCount()) continue;
            $link = $this->app->route->category($child);
            $item_count = ($this->params->get('template.show_sub_categories_item_count')) ? ' <span>('.$child->totalItemCount().')</span>' : '';
            echo '<li><a href="'.$link.'" title="'.$child->name.'">'.$child->name.'</a>'.$item_count.'</li>';
        }

    ?>
</ul> 
```

我想对子类别项目（在代码中进一步按州细分的城市）进行排序。

我以为我可以对以下数组进行排序 $category->getChildren() 但它不起作用。所以我对它做了一个回声，它说数组，所以我在那个数组上做了 var_dump 并得到了一个 bool(true) 。当我尝试其他输出方式（print_r）时，它使页面崩溃。

我不太了解数组，所以有人可以解释这个不是数组的数组是什么吗？我如何对城市列表进行排序？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:20:26.360

我真的不明白尝试打印数组的问题是什么，但我认为用[`usort()`](http://php.net/usort)这样的方式定义自定义排序将是您正在寻找的：

```
<?php

function compareChildren ($a, $b) {
    return strcmp($a->name, $b->name);
}

$children = $category->getChildren();
usort($children, 'compareChildren');

foreach ($children as $child) {
    // ...
} 
```

这是 codepad 上的一个[工作示例](http://codepad.org/fyMh3LDH)。

# mysql - 在 Restful Web 服务中使用 Hibernate 的 SQL 查询

> ID：11457292
> 
> 赞同：2
> 
> 时间：2012-07-12T17:27:31.187
> 
> 标签：mysql, hibernate, jersey, jax-rs

> **可能重复：**
> [使用 MySQL 的 SQL 查询](https://stackoverflow.com/questions/11441313/sql-query-with-mysql)

我使用 Java 中的 Jersey 实现了一个 Rest Web 服务（JAX-RS）。我使用休眠从 MySQL 数据库中获取数据。使用此查询：

```
(Select distinct deliverable.id from Task as t where t.project.id= :id And t.user.username = :name order by t.id desc")
                    .setMaxResults(3)
                    .setLong("id", projectId)
                    .setString("name", username)
                    .list(); 
```

我有一个正确的结果是：[275,51,286]。这是为数据库中每个 id 提供的键：

```
 id       key
---------------------
    275      2.0
    51       cm
    286      19.87 
```

现在我使用这个查询（除了deliverable.key而不是deliverable.id，一切都是一样的）：

```
(Select distinct deliverable.key from Task as t where t.project.id= :id And t.user.username = :name order by t.id desc")
                    .setMaxResults(3)
                    .setLong("id", projectId)
                    .setString("name", username)
                    .list(); 
```

结果是：["2.0","19.88","19.99"]。第一个是对的，但是第二个和第三个是完全不同的键。

也许它可以通过“别名”或任何其他方式来解决。你的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:44:31.310

我找到了答案：

```
("select d.key from Deliverable as d, Task as t
                where t.deliverable.id = d.id and
                t.id = (select max(t1.id) from Task t1 where t1.deliverable.id = d.id)
                and d.project.id= :id
                and t.user.username = :name
                order by t.id desc")
        .setMaxResults(3)
        .setLong("id", projectId)
        .setString("name", username)
        .list(); 
```

# cakephp - 如何将输入数据保存到不同命名的数据库列？

> ID：11457297
> 
> 赞同：0
> 
> 时间：2012-07-12T17:27:54.143
> 
> 标签：cakephp, cakephp-2.0

基本上，我有一些代码可以验证我的输入（这是其中的一部分）：

```
 'r_email' => array(
        'exist' => array(
            'rule' => 'checkEmailExist',
            'message' => 'That email has already been used.'
        ),
        'required' => array(
            'rule' => array('notEmpty'),
            'message' => 'The email field must not be blank.'
        ),
        'valid' => array(
            'rule' => 'email',
            'message' => 'You must enter a valid email address'
        ),
    ), 
```

所以我有我的验证规则，当我这样做时它们会起作用：

```
if ($this->User->save($this->request->data)) { 
```

我的输入表单是这样的（用于上述验证）：

```
echo $this->Form->input('r_email', array(
    'type' => 'text',
    'label' => 'Email Address',
    'div' => false
)); 
```

但是我数据库中的列与表单输入的名称不同，因此我假设数据不会保存，因为它没有链接。我不确定如何解决这个问题并将数据保存到我的列中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:58:37.853

您可以通过将特定的键/值对添加到数组中来指定您的`name`属性`input``options``FormHelper::input`

```
echo $this->Form->input('r_email', array(
    'type' => 'text',
    'label' => 'Email Address',
    'div' => false,
    'name' => 'data[User][field_in_database]'
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:19:24.603

您可以使用 $this->YourModelName->expectedfield=$this->data[ModelName][r_email]

此处 YourModelName 将表示您将在哪个表中插入此 r_email，expectedFirled 表示您将在哪个字段中插入 r_email。

如果你不能得到答案，你可以回复以获取更多信息。

# json - 两个如何将 2 个 json 对象合并为一个

> ID：11457298
> 
> 赞同：0
> 
> 时间：2012-07-12T17:28:03.443
> 
> 标签：json, knockout.js

我有一个用于编辑提供者记录的表格。提供者记录与多个地址有关系，因此提供者可以有家庭、办公室、假期等地址类型。

来自服务器的 json 地址对象只带来了提供者拥有的地址，所以如果提供者只有一个“假期”类型的地址，那么这是唯一的记录，但在编辑表单中我必须拥有所有地址类型以编辑现有的或添加新的。

我不知道我的方法是否合适，但我的表单中有一个“jsonBaseAddresses”，其中包含所有可能的地址类型，并且该对象使用 Knockout 绑定到表单（这实际上有效），所以我想合并“jsonRemoteAddress " 与 "jsonBaseAddresses" 以使 "jsonBaseAddresses" 但与远程 json 对象中的数据合并。

同样，我不知道这是否是正确的方法。感谢任何帮助。这是我想做的一个 jsFiddle 示例。

[http://jsfiddle.net/HJrGf/4/](http://jsfiddle.net/HJrGf/4/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:04:31.600

为什么不遍历远程地址并将它们推送到视图模型中的地址，例如？

```
var vm = new App(jsonBaseAddresses );
for ( var i = 0; i < jsonRemoteAddresses.length; i++){
vm.addresses.push(new Address(jsonRemoteAddresses[i]);
} 
```

等等 ...

要合并地址，您可以使用以下解决方案：

1.  您可以将属性引入地址，如 Equals，并比较标识唯一地址的字段

2.  选择这篇文章中的任何实现[如何确定两个 JavaScript 对象的相等性？](https://stackoverflow.com/questions/201183/how-do-you-determine-equality-for-two-javascript-objects) 获取地址哈希码并在上面的循环中比较要合并的地址的哈希码。我在我的一个项目中使用了这个解决方案。并且还要检查这个[http://documentcloud.github.com/underscore/#isEqual](http://documentcloud.github.com/underscore/#isEqual)

# javascript - 本地 Javascript 范围问题

> ID：11457299
> 
> 赞同：8
> 
> 时间：2012-07-12T17:28:04.760
> 
> 标签：javascript, scope

如果我这样做：

```
var a = 0;

(function () {
    var a = a; //want to make local a = global a
    ++a;
    console.log("fn",a);
})();

console.log(a);​ 
```

输出是：

```
fn NaN
0 
```

为什么`a`内部自执行功能变成了`NaN`？

我知道如果我这样做会很好：

```
(function () {
    var b = a;
    ++b;
    console.log("fn",b); // fn 1
})(); 
```

但是如果我走第一个版本的方式，它就有`NaN`问题了。

为什么会这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T17:35:24.837

`var a = a;`实际上是`var a; a = a;`由于可变提升。这意味着在分配时，旧`a`的已经被新的（即`undefined`）遮蔽了。

避免此类问题的最简单方法是将值作为参数传递：

```
(function (a) {
    ++a;
    console.log("fn",a);
})(a); 
```

如果`a`是全局变量，您也可以`var a = window.a;`像[woz 建议](https://stackoverflow.com/a/11457501/298479)的那样使用- 但由于拥有全局变量通常是一个坏主意，最好保留参数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T17:36:27.253

`a`函数表达式中的变量会*隐藏*`a`在外部作用域上声明的变量。

它变成`NaN`，因为在作业中：

```
var a = a; 
```

`a`它实际上指的`a`是本地范围内的右侧。

变量声明是在函数实际开始执行之前完成的，这通常称为“提升”。

由于它是同一个变量，因此它保存该`undefined`值，并且当您尝试将任何数字添加到该值时，它变为`NaN`：

```
console.log(undefined + 0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T17:38:06.647

在 JavaScript 中，当前[*执行上下文*](https://stackoverflow.com/a/9384894/201952)（包括变量范围之类的内容）是在您的代码开始执行*之前建立的。*

这对您意味着首先分配您的局部变量名称。由于*提升，**函数中任何地方的*`var`语句的标签在当前执行上下文中被初始化为*未定义。*（*函数语句*也在这一步初始化。）

 ***接下来，您的代码实际上开始执行。该`a`标签已在当前执行上下文中保留，因此`var a = a;`只需将本地`a`（*未定义*）分配给它自己。

`var a = window.a`之所以有效，是因为您通过直接访问全局范围来回避范围问题。但是，这在非浏览器环境（如 Node）中不起作用，因为没有`window`; Node 中的全局对象是`global`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:35:43.427

javascript中有一个变量提升，所以你在执行过程中的代码如下所示：

```
(function () {
    var a;
    a = a; //want to make local a = global a
    ++a;
    console.log("fn",a);
})(); 
```

所以首先你有局部变量 a 未定义，然后你将 undefined 分配给变量 a***

# .net - CheckBox 中的值未到达控制器

> ID：11457300
> 
> 赞同：0
> 
> 时间：2012-07-12T17:28:09.517
> 
> 标签：.net, asp.net-mvc-3

我在页面上有一个复选框列表，但是，它们的值没有到达控制器。

`ListViewModel`是我在这个视图中需要的所有模型。`Techniques`是`Technique`来自数据库的列表。`Technique`具有`TechiqueID`和`Type`作为属性。 `tech`是一个具有相同大小的技术类型的布尔数组

```
@model ListViewModel
 @foreach (var item in Model.Techniques ){
                <div>
                    @Html.CheckBoxFor(m => m.tech[item.TechniqueID]) 
                    @item.Type 
                </div>
            } 
```

知道为什么`tech[]`控制器中为 null 吗？它应该在控制器上`tech[0] = false`，`tech[1] = false`依此类推。

输出：

```
<div>
   <input data-val="true" data-val-required="The Boolean field is required." id="tech_1_" name="tech[1]" type="checkbox" value="true" /><input name="tech[1]" type="hidden" value="false" /> 
   Slippers, Distracting Tasks
</div>
<div>
   <input data-val="true" data-val-required="The Boolean field is required." id="tech_2_" name="tech[2]" type="checkbox" value="true" /><input name="tech[2]" type="hidden" value="false" /> 
   Hallway Placement
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:40:37.587

您的问题是控件列表需要基于 0 并且是连续的。您的第一项基于 1。

如果您需要保留它，那么您将需要为此编写一个自定义模型绑定器。一个更简单的解决方案可能是简单地从 TechniqueID 中减去一个，然后在您使用它时将其添加回来。

另一种选择是添加一个名为 tech[0] 的隐藏字段，并忽略帖子列表中的第一项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:43:25.267

您没有正确构建您的 html。模型绑定器无法像这样绑定输入名称。请参考这篇[文章](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)，它解释了如何将模型绑定到列表。来自文章：

您正在寻找的 Html 输出：

```
<form method="post" action="/Home/Create">

    <input type="text" name="[0].Title" value="Curious George" />
    <input type="text" name="[0].Author" value="H.A. Rey" />
    <input type="text" name="[0].DatePublished" value="2/23/1973" />

    <input type="text" name="[1].Title" value="Code Complete" />
    <input type="text" name="[1].Author" value="Steve McConnell" />
    <input type="text" name="[1].DatePublished" value="6/9/2004" />

    <input type="text" name="[2].Title" value="The Two Towers" />
    <input type="text" name="[2].Author" value="JRR Tolkien" />
    <input type="text" name="[2].DatePublished" value="6/1/2005" />

    <input type="submit" />
</form> 
```

实现此输出的示例代码：

```
<% for (int i = 0; i < 3; i++) { %>

  <%: Html.TextBoxFor(m => m[i].Title) %>
  <%: Html.TextBoxFor(m => m[i].Author) %>
  <%: Html.TextBoxFor(m => m[i].DatePublished) %> 

<% } %> 
```

# wordpress - 自定义帖子类型的 Wordpress 模板

> ID：11457301
> 
> 赞同：0
> 
> 时间：2012-07-12T17:28:10.260
> 
> 标签：wordpress, templates

> ^(*编者注：本题原题——《Wordpress Template Changes Based on Template Code》*)

我有一个从 url 读取变量（单个字母）的页面。然后该页面显示分配给该字母的自定义帖子（该字母是自定义字段）。

问题是分配给页面的模板没有做页面的最终渲染。
它包含以下代码：

```
<?php 
    $letter = $_GET['letter'];

    /*If there is no value returned then the loop defaults to searching for items beginning with 'A'*/ 
    if ( $letter=="" ) 
        $letter = 'A';

    /* The following <h1> needs to be outside of the loop */
?>
    <h1>Glossary Items Listed Under Letter "<?php echo $letter ?>"</h1> 

<?php 
    $loop = new WP_Query( 
                    array( 
                        'post_type' => 'glossary', 
                        'meta_key'=> 'first-letter', 
                        'meta_value' => $letter, 
                        'posts_per_page' => 10 ) 
                    ); 
?>

<?php while ( $loop->have_posts() ) : $loop->the_post(); ?>
    <div class="glossarybody"> 
        <h2><a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></h2>
    </div>
<?php endwhile; ?> 
```

当该代码在页面上时，页面显示正确的结果（标题列表），但使用插件*Reveal Templates*我看到页面正在呈现`page.php`。
正确的模板应该是`glossary-terms.php`（我尝试使用文件名 terms.php 以防词汇表这个词，所涉及的自定义帖子类型的名称导致问题）。

如果我删除上面的代码并留下一个或多或少的静态页面，其中包含一些 html、页眉、页脚和侧边栏，那么页面将使用正确的模板呈现。
这表明 Wordpress 操作中的某些内容导致模板在初始模板的执行中发生变化。

对于我的设置可能有什么问题以及如何获取正确的模板来呈现页面，我将不胜感激。

更新：我发现如果我更改调用链接，我可以获得正确的模板来呈现页面。例如，如果调用链接以“.../terms?letter=A”结尾并且我将其更改为“..../terms?letter=A/”，那么页面将使用正确的模板呈现。

更新：关于之前的评论。如果我将字段的内容和调用链接更改为指定字母以外的内容，例如 xya，那么整个过程将正常工作。因此，与此自定义字段相关的某些内容似乎导致设计的模板被忽略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:07:46.287

Wordpress 的功能没有问题。

出现问题是因为我使用插件来显示正在使用的模板，并且插件似乎出现故障。查看页面源代码中的 body 标记表明正确的模板正在呈现页面。

# c# - 返回 xml 字符串的方法的返回类型应该是什么？

> ID：11457302
> 
> 赞同：1
> 
> 时间：2012-07-12T17:28:18.160
> 
> 标签：c#, xml

我有从数据库中检索 xml 并返回业务层的数据访问方法。返回类型应该是什么？我应该简单地将它们作为字符串返回吗？将 xml 从一层返回到另一层时的最佳实践是什么？

我会将该 xml 返回给客户端，或者可能会根据客户端请求将它们转换为 json。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:49:38.430

我认为这个决定取决于哪些用例应该涵盖您的方法。

当我返回一个字符串时：

*   调用您的方法的代码不会将结果作为 XML 进行操作，*那么为什么要浪费 CPU 和内存来加载像 XmlDocument 或 XDocument 之类的复杂对象呢？只返回一个字符串！*

*   返回的 XML 是一个序列化的对象。您将要将此 XML 字符串解析为实际的 .NET 对象。

当我返回一个像`XDocument`or的 XML 对象时`XmlDocument`：

*   调用您的方法的代码会将结果作为 XML 进行操作。这包括添加新节点、属性，或者只是读取 XML 中的一些元素或属性。

*   调用您的方法的代码使用一些需要 XML 对象作为参数的 .NET 基类库或第三方库。

**更新**

我忘了根据客户请求提及“JSON 或 XML”的部分。

*显然*，如果您的客户端需要 XML，只需将您的数据返回为 XML，如果您的客户端需要 JSON，只需将您的数据返回为 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:30:04.277

我会以字符串的形式从数据库中获取它，然后使用 XElement.Parse(XML_STING); 解析为 XML；. 如果您需要解析为 JSON，您可以使用 JSON 解析器而不更改它从数据库获取它的方式。

# jquery - twitter-bootstrap JQuery 错误

> ID：11457306
> 
> 赞同：0
> 
> 时间：2012-07-12T17:28:32.230
> 
> 标签：jquery, highcharts, twitter-bootstrap-rails

我在 jQuery 1.7 中使用 twitter bootstrap rails 当我加载我的项目时，它工作正常，除了 jQuery 文件中的错误。我假设这正在影响我的 highcharts 并且不显示图表。

但是有人可以帮我解决这个问题：这是来自 jquery.extend() 函数内的第 633 行：632\. var name, i = 0, 633.length = object.length, 634.isObj = length === undefined || jQuery.isFunction(对象);

这是错误：TypeError：'undefined'不是对象（评估'undefined.length'）

有人可以帮忙吗？

最好的，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:57:27.680

想通了问题。这是我的 JS 处理中的一个小错误。我没有检查前端是否存在由 div 创建的数组。

将代码从

$.each($myArr, function(key,value){ . . . });

至

if($myArr){ $.each($myArr, function(key,value){ . . . }); }

这是一个加载到多个视图的常见 JS 文件。改变这个工作！:)

# c++ - 将二进制字符串写入二进制文件

> ID：11457307
> 
> 赞同：-4
> 
> 时间：2012-07-12T17:28:34.150
> 
> 标签：c++, file-io, binary

这是我的问题。我打开了一个 .jpg 图像并将其每个字节写入一个用逗号分隔的 .txt 文件中。这是成功的。现在我想使用那个 txt 文件来重建图像。img.txt 看起来像 255,216,255,224,0,16,74,70,73,70,0,1,1.......以下代码创建了 image.jpg，其大小为原始图像，但图像不可见。我期待某人的帮助...

```
#include<iostream>
#include<string>
#include<fstream>
#include<sstream>
#include<cstdlib>
using namespace std;

int main(){

    char *s;
    long x;
    ifstream is("D:\\test\\img.txt");
    is.seekg(0,ios::end);
    x=is.tellg();
    is.seekg(0,ios::beg);

    s=new char[x];
    is.read(s,x);
    is.close();

    stringstream str;
    char a[4];
    int y = 0;
    for(int i=0; i<=x; i++) {
        if (s[i] != ',') {
            a[y] = s[i];
            y = y + 1;
        }
        if (s[i] == ',') {
            str << (unsigned char)atoi(a);
            a[0] = '\0';
            a[1] = '\0';
            a[2] = '\0';
            a[3] = '\0';
            y = 0;
        }
    }

    const char *ss=(str.str()).c_str();
    ofstream ex("D:\\test\\test.txt");
    ex << ss;

    ofstream fileo("D:\\test\\image.jpg",ios::binary);
    fileo.write(ss,(str.str()).length());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:52:22.643

您编写的代码适用于 Visual Studio 10 SP1。但是，取决于您的 STL 实现（和运气），存在一个微妙的错误：

你的代码：

```
const char *ss=(str.str()).c_str(); 
```

正在使用超出范围的临时对象。在此行执行后，`ss`指向的内容很可能立即（或将来的任何时间）成为垃圾。原因是`std::stringstream::str()`返回字符串的副本，调用`std::string::c_str()`此副本是安全的，但是一旦原始（临时）超出范围，该指针将无效。

要解决此问题，请确保将字符串从`stringstream`对象中复制出来，以便知道生命周期，如下所示：

```
std::string contents = str.str();
ofstream ex("D:\\Profile2.jpg.txt");
ex<<contents;

ofstream fileo("D:\\Profile2.jpg",ios::binary);
fileo.write(contents.c_str(), contents.length()); 
```

重申一下，这两个版本都对我有用，但我提出的版本实际上是按设计工作的，而不是运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:53:59.150

此类问题的调试过程是这样的：

*   您创建尽可能小的输入（其中包含字母“a”并保存为“test01.jpg”的文本文件）并运行您的转换算法
*   您使用您的领域知识确定预期结果是什么
*   您检查输出并确定它是否是预期结果
*   如果是，那么您继续并测试“txt 到 jpg”转换
*   否则你要么改变你的“jpg to txt”算法或你的领域知识
*   假设 txt 输出是预期的结果，然后运行“txt to jpg”
*   如果结果与原始文件匹配（请记住，'jpg' 只是一个扩展名，您仍然可以在记事本中打开文件 - 或者更好的是，使用十六进制编辑器）然后您更改输入并再次测试
*   否则，你改变你的算法

这个想法是有一个小的输入，这样您就可以按照调试器中的各个步骤进行操作，并检查每条指令的行为方式是否符合您认为的行为方式。

由于输出与输入不匹配，显然某些事情无法按您的预期工作。能够解决自己的问题比获得针对某一特定问题的帮助重要得多。

我还要`delete`我的缓冲区（`s`在上面的代码中），即使内存在程序退出时被操作系统回收，这是一个好习惯。

# .net - .NET UI 测试（单元和集成）

> ID：11457309
> 
> 赞同：0
> 
> 时间：2012-07-12T17:28:37.647
> 
> 标签：.net, unit-testing, user-interface, integration-testing

我的任务是提出一种解决方案，以在 UI 级别进行有效的单元测试和集成测试。不幸的是，我们在 Windows 窗体中有很多代码隐藏。我们还有一个棕地项目，我们正在慢慢迁移到 WPF（新功能在 WPF 中，并且在需要进行重大更改时将旧功能迁移到 WPF）。

WPF 中的所有内容都经过单元测试（数据库除外）。我使用的是 MVVM 方法，所以几乎所有的代码都在那里。

但是，部署前的测试需要花费大量时间，我们需要一种方法来自动化其中的大部分。

也就是说，我所指的这个测试需要在 UI 上进行。

Windows 窗体部分必须进行集成测试，因为部分逻辑在代码隐藏中完成，部分在数据库中完成。

WPF 窗口应该在 UI 级别是可单元测试的，但也应该是集成测试的。

我知道对于一个问题来说这是一个很大的问题，但是有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T08:24:12.373

（这个答案是关于如何集成测试你的代码：WinForms 和 WPF。）

我没有给你专利的解决方案，只有投入大量时间和精力使测试易于维护的建议。

**确保您可以在 Visual Studio 中修改和运行测试。**

必须为测试启动一个不同的工具的额外负担可能足以让开发人员不这样做（我已经看到它发生了）。所以尝试找到一个允许这样做的[UI 测试工具。](http://en.wikipedia.org/wiki/List_of_GUI_testing_tools)

**不要记录测试。**

虽然很舒服，但记录的测试代码很难阅读和理解，并且很可能包含许多无关紧要的细节。如果您需要对测试进行更改，您可能必须重新记录它们。测试将更多地是系统工作方式的文档，而不是您希望它如何工作的规范。

**为您的测试创建共享基础架构。**

在代表窗口行为的对象中为窗口/窗体创建抽象。通过这种方式，您可以隐藏这些对象中的实现细节，使实际测试紧凑且易于阅读。一旦你有了这个基础设施，就很容易添加新的测试。此外，如果实现细节发生变化，您只有一个地方可以对测试进行更改：在基础设施中。

在 Web 测试世界中，这称为[页面对象模式](http://code.google.com/p/selenium/wiki/PageObjects)。

C# 中的测试示例：

```
ApplicationFake application = new ApplicationFake();

// ApplicationFake.Start() starts the application resulting in that main form opens.
// Start() returns an object that represents the actions that the user can perform on
// the main form.
// The Start() method might contain an assert that the main form was actually opened.
MainFormFake mainForm = application.Start();

// Performing an action that opens a new form returns a representation of the new form,
// in this case the object SomeFormFake.
SomeFormFake someForm = mainForm.ClickOpenSomeFormButton();

// The form fakes exposes properties that returns the forms' observable state.
Assert.That(someForm.Title, Is.EqualTo("Some Form's Title")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:35:09.833

我完全同意 Torbjorn 的回答，但想补充几点：

**从小处着手**

页面对象模式是简化测试的好方法，但您会发现需要很长时间才能正确进行抽象。首先抽象出你需要的东西，然后随着时间的推移慢慢添加。

**增加价值**

不要过分尝试编写端到端回归测试。相反，专注于编写增加价值的测试。例如，证明应用程序启动时没有错误的单个测试非常有用，并且可以为您的构建过程提供早期反馈。从那里干出来。

**平衡“深”与“浅”**

测试用户界面有几种不同的理念。在它们之间建立一个组合。

显而易见的方法是使用类似生产的设置来测试应用程序，以证明应用程序“从前端”工作。这些是“深度”集成测试，可以运行代码的所有部分并且很有用。它们也可能非常缓慢，因为它们通常依赖于外部服务等。通常，为了可靠，应用程序必须在测试运行之间重新启动以确保有效的环境。

对该方法稍作修改是使用已删除的服务（假产品目录、假身份验证提供程序等）测试应用程序。这些是“浅层”测试，证明用户界面在集成在一起时可以正常工作。它们通常运行*得更快一些，*因为它们不会有相同的物理限制，例如要考虑的网络延迟。您可以更多地关注演示细节和其他边缘案例。

进一步的修改是隔离部分用户界面并在测试工具中运行它们。这些测试将比以前的方法运行得更快，因为它们不会有启动整个应用程序的相同开销。使用这些测试来断言颜色和高度专业化的表示问题。

**稳定时迭代**

如果您打算编写功能测试来代替手动回归测试，您可能会发现最好等到开发稳定该功能后再为其编写自动化。如果您在开发过程中开始编写自动化，您将不断地重写测试。如果您想在开发过程中实现自动化，请记住：从小处着手。

**获得早期反馈**

UI 的自动化测试（也称为功能测试）很有用，但它可能非常非常慢。（我见过运行需要几个小时才能完成。）如果您每天运行一次整个测试套件，您会发现反馈循环太长，这会导致误报、维护问题等。

如果可能，尝试将功能测试集成到构建过程中。如果测试套件花费的时间太长，请找到一种方法来集成*一些测试*，以便您的构建管道可以将***重要的测试***作为构建的一部分进行验证。

# sql - SQL 创建新行作为多行的总和

> ID：11457310
> 
> 赞同：1
> 
> 时间：2012-07-12T17:28:39.630
> 
> 标签：sql, oracle

假设我有以下行：

```
VARIABLENAME   YYYYMM   XXXXYY   DATAOBS
variable_1   | 201101 | 111100 | 20
variable_2   | 201101 | 111100 | 20
variable_1   | 201102 | 111100 | 30
variable_2   | 201102 | 111100 | 30
variable_1   | 201101 | 222211 | 20
variable_2   | 201101 | 222211 | 20
variable_1   | 201102 | 222211 | 30
variable_2   | 201102 | 222211 | 30 
```

我想知道如何得到结果：

```
VARIABLENAME      YYYYMM    XXXXYY   DATAOBS
variables_1and2 | 201101  | 111100 | 40
variables_1and2 | 201102  | 111100 | 60
variables_1and2 | 201101  | 222211 | 40
variables_1and2 | 201102  | 222211 | 60 
```

其中在每个相应**XXXXYY**内的每个相应**YYYYMM**内包含**variable_1**和**variable_2的行中的所有****DATAOBS**都被添加并放置在新行**variables_1and2**中，仍在它们各自的**YYYYMM**和相应**XXXXYY 内**。

 ******如果有必要知道，我正在处理的实际数据中有数百个不同的 YYYYMM 和 XXXXYY。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T17:30:39.610

听起来你只是想要

```
SELECT 'variables_1and2' variablename,
       yyyymm,
       xxxxyy,
       sum(dataobs) dataobs
  FROM your_table
 WHERE variablename in ('variable_1', 'variable_2' )
 GROUP BY yyyymm, xxxxyy 
```

如果打算将这些行重新插入到您的表中，您需要一个`INSERT`

```
INSERT INTO your_table( variablename, yyyymm, xxxxyy, dataobs )
  SELECT 'variables_1and2' variablename,
         yyyymm,
         xxxxyy,
         sum(dataobs) dataobs
    FROM your_table
   WHERE variablename in ('variable_1', 'variable_2' )
   GROUP BY yyyymm, xxxxyy 
```

当然，将详细数据和聚合数据存储在同一个表中是非常不寻常的。这通常是一个糟糕的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:46:15.687

您使用的是什么版本的 Oracle？你可以做（​​10g）：

```
select wm_concat(variablename),yyyymm,xxxxyy, sum(dataobs) dataobs
from table
group by yyyymm,xxxxyy 
```

如果你有 11g 第 2 版，你可以使用`list_agg(variablename,',')`******

# iphone - UIView坚持手指？

> ID：11457312
> 
> 赞同：-4
> 
> 时间：2012-07-12T17:28:44.950
> 
> 标签：iphone, objective-c, ipad

我的问题是这个。用户可以按住网格上的特定图像，一旦用户按住图像 2 秒钟，另一个视图会在其上方弹出。现在我需要程序工作，因为用户的手指仍然在屏幕上，新创建的视图将随着手指移动。现在它的工作原理是用户必须移开手指并将其放回屏幕上才能使视图随之移动。任何想法的人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:36:18.190

如果您用于`UILongPressGestureRecognizer`检测初始按下，您还可以使用它来跟踪移动，因为它会一直调用您的手势操作方法，直到用户抬起手指。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:41:35.723

你可能有很多不同的方法可以做到这一点。想到的一个是通过视图控制器本身管理触摸事件。这将需要您实施`-canBecomeFirstResponder`，当然还有`touches[Began|Moved|Ended|Cancelled]:withEvent:`方法。

另一种方式，如果您使用 an`UIImageView`来管理和显示单个图像，您可以将其子类化并通过它处理触摸事件。在这种情况下，您实际上不会创建一个新`UIView`的来跟踪拖动，您可以只使用`NSAffineTransform`它来赋予它“弹出”的外观并继续使用相同的视图对象跟踪位置。触摸结束后，应用识别变换以恢复其正常大小。变换是可动画的。

**编辑**

在您的视图控制器实现中，除了实现上述触摸方法外，请执行以下操作以在控制器中实际接收触摸事件：

```
@implementation MyViewController

...

- (BOOL)canBecomeFirstResponder
{
    return YES;  // Default for UIResponder is NO
}

...

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    ...
    [self becomeFirstResponder];  // ensures view controller receives touch events
}

...

@end 
```

# macos - 在 mac 上，在特定监视器中打开 Emacs 框架？

> ID：11457317
> 
> 赞同：8
> 
> 时间：2012-07-12T17:28:55.507
> 
> 标签：macos, emacs, multiple-monitors

背景：我使用带有双显示器的mac。当我启动 Emacs 时，它总是在“主”监视器（我的 macbook pro 上的那个）中打开，这不是我想要查看的。是否有任何 elisp 功能可以在特定监视器中打开一个新框架，以便在 emacs 启动后我可以在两个监视器中都有框架？

或者，有什么方法可以让 Emacs 在外接显示器中启动（如果存在的话）？

顺便说一句，我的 Emacs 是来自 emacsforosx.com 的 24.1.1。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T20:51:05.870

显示器上的可见区域具有连续的坐标空间。主显示屏（上面有菜单栏的那个）的左上角是 (0, 0)。因此，在特定显示器上打开框架只是在特定位置打开框架的一种特殊情况。

首先将框架移动到您想要的位置，然后用于`(frame-parameters)`获取顶部/左侧值。通常，结果`(frame-parameters)`是一个 alist（对列表），如下所示：

```
(... (top . 54) (left . 107) ...) 
```

但是，如果您在主显示器的上方或左侧有显示器，则该显示器上窗口的顶部/左侧值将为负数。Emacs 的 GUI 支持，最初来自 X11，没有任何负坐标的概念。如果您尝试使用负值，Emacs 会将它们解释为相对于主显示屏的底部/右侧——可能不是您想要的。

框架参数 alist 中有一个 hack 来处理这种情况：当存储负的顶部/左侧值时，相应的列表项是三个项目的列表。例如：

```
(... (top + -51) (left + -1674) ...) 
```

通常您可以将这些项目直接提供给`make-frame`，但它不理解这个 hack。相反，您可以通过修改其参数来制作框架并立即移动它。例如，我的左侧有一个 1680x1050 显示器，略高于我的主显示器，所以这可以在该显示器上显示一个新框架：

```
(modify-frame-parameters (make-frame) '((top + -51) (left + -1674))) 
```

我个人只使用[Moom](http://manytricks.com/moom/)，因为它更易于使用且更灵活。我在 Emacs 中创建了一个新框架，`C-x 5 2`然后使用 Moom 键盘快捷键将其移动到另一个显示器，或者我想要的任何其他地方。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-13T01:33:38.037

当我尝试这种`(frame-parameters)`方法时，它产生了一个奇怪的东西：主显示器上有一个窗口，辅助显示器上有一个窗口。但是，它们是“相同”的窗口，因为当我 Cx 抄送一个时，另一个也会被杀死。

这对我有用。我放入了我的 .emacs 文件。不确定是否必须设置宽度和高度，但这当然也是一种方便的方法：

```
(setq default-frame-alist
  '((top + -550) (left + -1800) (width . 108) (height . 60))) 
```

# python - 如何使用 python-mock 库

> ID：11457318
> 
> 赞同：2
> 
> 时间：2012-07-12T17:28:57.707
> 
> 标签：python, mocking

我在理解 python 中的模拟库时遇到问题。这是示例：A 有两个文件 test.py 和 another.py

**测试.py**

```
#!
from mock import patch
from another import C

class A(object):
    def method(self):
        return 2

@patch('another.C')
@patch('test.A')
class TestB(object):

    def test1(self, mA, mC):
        print mA, A
        print mC, C 
```

**另一个.py**

```
class C(object):

    def a(self):
        return 3 
```

所以，问题是“为什么 A 有输出：

```
<MagicMock name='A' id='13985040'> <MagicMock name='A' id='13985040'>
<MagicMock name='C' id='13993936'> <class 'another.C'> 
```

为什么无法修补另一个.py 中的类？就我而言，我有大量的功能需要测试，它从其他文件中导入类。所以我不明白如何正确地对待他们。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:24:18.647

使用 Python 模拟库，您始终可以在实际使用它的位置修补（模拟）函数或类。

由于您将“C”导入“测试”并在那里使用它，因此您可以像这样修补它：

```
@patch('test.C')
@patch('test.A')
class TestB(object):

    def test1(self, mA, mC):
        print mA, A
        print mC, C 
```

这会给你这样的输出：

```
<MagicMock name='A' id='3070076204'> <MagicMock name='A' id='3070076204'>
<MagicMock name='C' id='3070084940'> <MagicMock name='C' id='3070084940'> 
```

你可以模拟任何你想要的类、方法或函数。但是您需要在实际使用它的位置模拟对象。

# c# - 无法将 List`1[MyClass]' 转换为 List`1[MyClass_Accessor]'？

> ID：11457321
> 
> 赞同：2
> 
> 时间：2012-07-12T17:29:22.913
> 
> 标签：c#, unit-testing, mstest

运行测试代码时出现以下错误。如何解决该问题？我正在使用 Visual Studio 2010 Premium 的内置 MStest。

```
测试方法 TestProgram.myProgramTest.GetTypeListTest 抛出异常：
System.InvalidCastException：无法将“System.Collections.Generic.List`1[MyProgram.MyClass]”类型的对象转换为“System.Collections.Generic.List`1[MyProgram.MyClass_Accessor]”。

```

待测方法：

```
public class MyProjectClass {
    private List<MyClass> GetTypeList()
    { .... 
    }
}

class MyClass {....} // A POCO class 
```

测试代码（大部分代码由Visual Studio自动生成）：

```
[TestMethod()]
[DeploymentItem("myProgram.exe")]
public void GetTypeListTest()
{
    MyProjFile_Accessor target = new MyProjFile_Accessor ();
    var actual = target.GetTypeList();
    Assert.IsTrue(actual.Count > 2);
} 
```

**我真的不知道为什么这个问题两次被否决，所有其他代码要么与问题无关，要么由 Visual Studio 自动生成。**
这是非常直接的类定义。并且测试夹具是使用 VS 2010 向导创建的。刚刚返回的方法`MyClass`可以通过测试。问题是返回类型为`List<MyClass>`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T01:41:08.660

类`MyClass`没有访问修饰符，C#`internal`默认使用访问修饰符。

内部意味着该类只能在其程序集中访问。

单元测试通常在单独的程序集中实现，不能使用`MyClass`.

MS 测试生成`MyClass_Accessor`的类本质上是一个包装器，它使用反射来提供对类本身及其方法的访问。

将声明更改为`public class MyClass {....}`并重新生成单元测试（这是告诉 MS Test`_Accessor`不需要该类的必要条件）。

# javascript - 用jquery获取数组的值

> ID：11457327
> 
> 赞同：1
> 
> 时间：2012-07-12T17:29:50.280
> 
> 标签：javascript, jquery, arrays, forms

假设我有这种形式：

```
 <form method="post" name="b" >
<table>
    <tr>
        <td>Field A</td>
        <td><input type='text' name='field[0][a]' id='field[0][a]'></td>
        <td>Field B</td>
        <td><textarea name='field[0][b]' id='field[0][b]'></textarea></td>
        <td><button>remove</button></td>
    </tr>
</table>
</div>
<div id="container"></div>
<button id="mybutton">add form</button>

<div align="center">
<p><button onClick="dadosFormulario()" value="Registar" name="registar">Registo</button></p>
</div>
</form> 
```

我有一个 jquery 函数，当我单击“添加表单”按钮时，它会复制我的输入。因此，关于这一点，我正在尝试使用 jquery 的 .val() 方法保存输入的值。

所以，如果我有这样的输入：

```
<input type='text' name='teste' id='teste'> 
```

我知道这样：

```
var v = $('#teste').val(); 
```

我可以收到她的价值。但是，如果我有一个输入数组，这就是我的情况，因为我可以复制表单的字段，我如何从以下输入中获取多个值？

```
<input type='text' name='field[0][a]' id='field[0][a]'>
<input type='text' name='field[0][b]' id='field[0][b]'> 
```

var v = $('#field[iterator][a]').val(); 不起作用，它会导致“未定义”。

jquery 函数，我无法使用 val() 从输入中获取值；给出未定义的：

```
$countForms = 1;

    (function($){

          $.fn.addForms = function(idform){

                        var myform = "<table>"+
                         "  <tr>"+
                         "     <td>Field A ("+$countForms+"):</td>"+
                         "     <td><input type='text' name='field\\["+$countForms+"\\]\\[a\\]'></td>"+
                         "     <td>Field B ("+$countForms+"):</td>"+
                         "     <td><textarea name='field["+$countForms+"]['b']'></textarea></td>"+
                         "     <td><button>remove</button></td>"+
                         "  </tr>"+
                         "</table>";

                        if(idform=='mybutton'){

                            myform = $(myform);
                            $("button", $(myform)).click(function(){ $(this).parent().parent().remove(); });
                            $(this).append(myform);
                            $countForms++;
                        }

          };
    })(jQuery);

    $(function(){
        $("#mybutton").bind("click", function(e){
        e.preventDefault();
        var idform=this.id;

            if($countForms<3){
                $("#container").addForms(idform);
            }       
        });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:32:36.413

jQuery选择器中使用了方括号，我们应该使用转义字符将方括号包含在控件的id中；

**[现场演示](http://jsfiddle.net/2DTX7/1/)**

```
iterator = 0;
$('#field\\['+iterator +'\\]\\[a\\]').val();​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:32:32.170

向输入添加一个类并执行此操作

```
jQuery(document).ready(function($){
  $('.inputs').each(function(index, object){
    console.log($(object).val());
  });
}); 
```

在您的代码上，您需要在此处更改：

```
var v = $('#field[iterator][a]').val(); 
```

到：

```
var v = $('#field\\['+iterator+'\\]\\[a\\]').val(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:42:52.007

字符“[”在 jquery 选择器中不是中性的：

`$('#field[0][a]')`意思是：“选择id为“field”的项目，还有一个名为'0'的属性和另一个名为'a'的属性“

你可以 ：

*   要么改变你的方式来为你的字段提供一个 id，比如 : `id="field_0_a"`，因此可以`$('#field_0_a')`正常工作，
*   或按名称选择您的项目：`$('[name="field[0][a]"]')`
*   或者像阿迪尔说的那样做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:40:01.353

问题是您必须转义如下特殊字符：

`$('[id="field[' + iterator + '][b]"]').val();`
或
`$('#field\\[' + iterator + '\\]\\[b\\]').val();`
[**演示**](http://jsfiddle.net/ricardolohmann/x2LFD/)

# c++ - C++ 中的 _In_ 是什么？

> ID：11457328
> 
> 赞同：33
> 
> 时间：2012-07-12T17:29:53.307
> 
> 标签：c++, c, microsoft-metro, c++-cx

我对此进行了很多搜索，但没有找到有用的结果。

我目前正在尝试为 Windows 8 Metro 编写简单的 DirextX 游戏，并且遇到`_In_`了很多。我只是想知道它是什么。

另外，我看到了很多`^`用作指针的用法`*`，我觉得很奇怪。最重要的是，一些类有一个接口`ref class MyClass`，我相信这是为了 C# 的易读性。

无论如何，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-12T17:34:47.203

它是一个[SAL 注释](http://msdn.microsoft.com/en-us/library/hh916383(v=vs.110).aspx)，用于代码分析。注释本身被定义为宏，在正常构建中，这些宏扩展为空。

`^`和`ref class`是[C++/CX](http://msdn.microsoft.com/en-us/library/windows/apps/hh699871(v=vs.110).aspx)的功能，这是一组语言扩展，旨在更轻松地使用 C++ 构建适用于 Windows 8 的 Metro 风格应用程序。两者都不是标准 C++ 的一部分。文档（先前链接）包含指向描述语言扩展的教程和参考资料的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:33:56.290

我认为（来自一个快速的谷歌）`_in_`那里表明参数是`_out_`函数/方法的输入还是输出（）。

是`^`托管指针（垃圾收集指针，与 C++/CLI 相关）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-09T13:55:49.183

**在*sal.h*文件中找到了这个定义**

```
// Input parameters --------------------------

//   _In_ - Annotations for parameters where data is passed into the function, but not modified.
//          _In_ by itself can be used with non-pointer types (although it is redundant).

// e.g. void SetPoint( _In_ const POINT* pPT );
#define _In_                            _SAL2_Source_(_In_, (), _Pre1_impl_(__notnull_impl_notref) _Pre_valid_impl_ _Deref_pre1_impl_(__readaccess_impl_notref))
#define _In_opt_                        _SAL2_Source_(_In_opt_, (), _Pre1_impl_(__maybenull_impl_notref) _Pre_valid_impl_ _Deref_pre_readonly_) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T11:43:42.007

`_Out_`表示作为参考传递的参数。`_In_`意思相反。`(_Out_ x)`并且`(&x)`是相似的。

# sql-server - 如何获取与当前日期和时间差异较小的条目

> ID：11457334
> 
> 赞同：-1
> 
> 时间：2012-07-12T17:30:17.690
> 
> 标签：sql-server, sql-server-2008

我在表中有字段 data_clockin。我只想找到 data_chkin 中与当前数据的差异最小的最后一个条目。例如今天，我有四个条目，但我只想要一个时间最短的条目，如果它们是 4 个条目在不同的日期。我只想要一个与当前日期相差最小或相同的条目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:38:59.537

```
SELECT TOP (1) cols
FROM dbo.unspecified_table_name
ORDER BY date_clockin DESC; 
```

如果您需要对多行执行此操作（例如每组一行），那么可能：

```
;WITH x AS 
(
  SELECT cols, rn = ROW_NUMBER() OVER (PARTITION BY some_grouping_key_column
    ORDER BY date_clockin DESC)
  FROM dbo.unspecified_table_name
)
SELECT cols FROM x WHERE rn = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:35:03.577

```
SELECT *
FROM Table
WHERE data_clockin = ( SELECT MAX(data_clockin) FROM Table ) 
```

根据`data_clockin`值，此查询可能返回**一行或多行**。

# servlets - 使用 RequestDispatcher 将数据从 servlet 传递到另一个 servlet

> ID：11457336
> 
> 赞同：6
> 
> 时间：2012-07-12T17:30:19.477
> 
> 标签：servlets, requestdispatcher

我正在尝试使用 RequestDispatcher 将数据从一个 servlet 传递到另一个。这是我的调度程序代码。

```
String address;

address = "/Java Resources/src/coreservlets/MapOut.java";

RequestDispatcher dispatcher =
  request.getRequestDispatcher(address);
dispatcher.forward(request, response); 
```

当我尝试运行它时，它给了我一个错误，说路径不可用。我是否必须包含一些内容以供调度程序发送到另一个 servlet？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T04:48:23.527

你只需要`servlet-mapping`在`url-pattern`.`getRequestDispatcher`

假设您的 servlet 映射是 .中的“MapOut”Servlet 的“myMap” `web.xml`。那么它应该是

```
RequestDispatcher dispatcher = request.getRequestDispatcher("/myMap");
dispatcher.forward(request,response); 
```

`doGet()`转发的 Servlet 将被调用。

示例：web.xml

```
 <servlet>
        <description></description>
        <servlet-name>MapOut</servlet-name>
        <servlet-class>coreservlets.MapOut</servlet-class>
      </servlet>
      <servlet-mapping>
        <servlet-name>MapOut</servlet-name>
        <url-pattern>/myMap</url-pattern> <!-- You can change this-->
      </servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T10:53:30.690

您可以直接在其中写入您的servlet 名称，`request.getRequestDispatcher("your servlet name");`它将根据web.xml 配置获取路径。

```
RequestDispatcher rd= request.getRequestDispatcher("MyServletName");
rd.forward(request,response); 
```

# c# - 如何在 C# 中使用 Switch Case 获取十进制值

> ID：11457337
> 
> 赞同：0
> 
> 时间：2012-07-12T17:30:22.667
> 
> 标签：c#, vb.net

我正在将代码从 VB.net 转换为 C#。由于是 C# 的新手，我被困在**Decimals的****Switch()**语句上。我发现我不能在 switch 语句中使用十进制值。

 **VB switch 语句如下所示：

changeAmt 是十进制

> 选择案例更改量
> 
> ```
> Case Is > 0 
> ```
> 
> > ```
> >  expressions 
> > ```
> 
> ```
> Case Is < 0 
> ```
> 
> > ```
> >  expressions 
> > ```

如何将其转换为 C#？

我是否必须使用 if-else 语句。我想使用 switch 因为它会使代码更容易编写和理解

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:33:03.153

您必须为此使用`if`语句。您可以将值转换为不同的类型，但您仍然不能在`case`.

所以：

```
if (changeAmt > 0) {
  ...
} else if (changeAmt < 0) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:50:53.203

您仍然可以做的是单级间接。它使您想要表达的内容更加清晰，并随心所欲地保留结构。而且，您可以在任何想要使用十进制开关的地方使用此转换。很简单，不是吗？

这是一些简单的代码来显示我想告诉的内容：

```
 public enum EnumChangeAmt
    {
        Undetermined,
        Negative,
        Positive,
        ExactlyNull,
    }

    public class EnumSwitchSample
    {
        public void EnumSwitch()
        {
            var changeAmt = 0;

            var changeAmtType = GetChangeAmt(changeAmt);

            switch (changeAmtType)
            {
                case EnumChangeAmt.Negative:
                {
                    break;
                }
                case EnumChangeAmt.Positive:
                {
                    break;
                }
                case EnumChangeAmt.ExactlyNull:
                {
                    break;
                }
                case EnumChangeAmt.Undetermined:
                default:
                {
                    // do something about it
                    break;
                }
            }
        }

        public EnumChangeAmt GetChangeAmt(int changeAmt)
        {
            if (changeAmt < 0)
            {
                return EnumChangeAmt.Negative;
            }

            if (changeAmt > 0)
            {
                return EnumChangeAmt.Positive;
            }

            if (changeAmt == 0)
            {
                return EnumChangeAmt.ExactlyNull;
            }

            return EnumChangeAmt.Undetermined;
        }
    } 
```

正如 Andre Calil 所说，枚举在这里非常有用！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:32:28.490

你必须使用`if-else`. 在 C# 中，switch 语句仅用于常量值的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T17:32:41.870

VB.Net 中的语句支持比C# 中的语句`Select Case`更广泛的表达式。`switch`AC#`switch`本质上仅限于数字和字符串常量，同时`Select Case`可以支持任意表达式。当移植`Select Case`不适合 C# 范围的内容时，`switch`您应该使用`if / else`语句

```
if (changeAmt > 0) { 
  // expressions 
} else if (changeAmt < 0) {
  // expressions
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T17:33:23.587

您只能在 C# 中切换特定值，因此在您的特定情况下，您需要使用 if else if：

```
if(changeAmt < 0){
} else if (changeAmt > 0)
{
} else 
{
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T17:32:53.913

> switch 语句仅支持整数类型（枚举未列出，但可以与 switch 语句一起使用，因为它们由整数类型支持）（如 Changeling 所指出的，还支持字符串 - 请参阅注释以供参考）以及与常量值的相等比较. 因此，您必须使用一些 if 语句。

if else 可以用吗？

如果（是 > 0）

```
 expressions 
```

否则如果（是 < 0）

```
 expressions 
```

[在 C# 中是否不可能在开关中使用小数范围？](https://stackoverflow.com/questions/2937154/is-using-decimal-ranges-in-a-switch-impossible-in-c)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T17:33:05.150

最容易阅读的解决方案是使用 if-else 块。

```
if (changeAmt > 0)
{
    // blablabla
}
else if (changeAmt < 0)
{
    // blablabla
} 
```

不知道为什么它是 VB 中的 switch case，似乎没有必要。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-12T17:33:14.010

For`decimals`你可以使用`if`and`if-else`语句。

喜欢

```
if(condition)
{

}
else if(condition)
{

} 
```**

# javascript - 从可移动标记获取新位置

> ID：11457338
> 
> 赞同：1
> 
> 时间：2012-07-12T17:30:25.423
> 
> 标签：javascript, google-maps, popup

我创建了一个带有静态地图的页面，并带有标记。

我在下面放了一个链接，然后做一个带有更大地图的弹出页面 - 相同的标记，但可拖动。

我正在努力解决的是；

a) 拖动可移动标记后获取新坐标。我有以下事件监听器代码：

```
google.maps.event.addListener(marker, 'dragend', function() {

   updateMarkerStatus('Drag ended'); 

   geocodePosition(marker.getPosition());   
document.write("I'm HERE");
}); 
```

..并且得到“我在这里” - 但我如何获得新坐标？

和

b）一旦我有了这些值 - 我如何将它们传递回调用 POPUP 的页面。

（我的 JS 技能有限，大部分网站都是 php 和 HTML 的。

非常感谢任何帮助。

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:01:18.920

```
var newPosition = marker.getPosition(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:05:16.693

```
marker.getPosition() 
```

应该返回标记的当前坐标。所以...

```
marker.getPosition().lat() 
```

应该给你当前的纬度和

```
marker.getPosition().lng() 
```

应该给你当前的经度。geocodePosition() 有什么作用？需要更多上下文来回答您的第二个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T08:57:21.773

对混乱的评论感到抱歉 - 试图粘贴代码并且字符用完了。

基本上是说谢谢你到目前为止的帮助，我已经设法获得了新的标记位置。

问题的第二部分实际上是一个 JS 查询。

我在主页上有一个链接，在静态地图下，如下所示；

```
<a href='adjustmap.php?lat=$retLat&long=$retLong' onClick='return popup(this, \"adjustmap\")'>Click Here to Fine Tune Location</a> 
```

onclick 会创建一个弹出窗口，其中包含一个更大的地图，其中包含可拖动的标记。我现在在该弹出窗口中有新的坐标 - 我如何让它们回到主窗体？

菲尔

# php - 如何让 Apache 支持连接到 Sybase ASE 15.7 的 PHP 5.3.6？

> ID：11457342
> 
> 赞同：1
> 
> 时间：2012-07-12T17:30:46.140
> 
> 标签：php, apache, debian, sap-ase

参考下面我之前的问题，我可以让 PHP 与 SYBASE ASE 15.7 对话：

[为什么需要密码加密时与 ASE 的连接会失败？](https://stackoverflow.com/questions/11144100/php-why-connection-to-ase-fails-when-password-encryption-required)

正如我所提到的，我们遇到了一个小障碍，所以我在这里发布另一个问题，意思是在努力尽快解决它的同时，任何有专业知识的人，请分享。当然，一旦我们能够弄清楚，也会在这里分享答案。

我要做的类似于下面的这些帖子：

[http://tldp.org/HOWTO/Sybase-PHP-Apache/index.html](http://tldp.org/HOWTO/Sybase-PHP-Apache/index.html)

[http://sybase-addict.com/2010/01/16/sybase-ase-v15-apache-and-php-compilation/](http://sybase-addict.com/2010/01/16/sybase-ase-v15-apache-and-php-compilation/)

但是使用最新的 apache 版本 PHP 5.3.6，并连接到 Sybase ASE 15.7。此外，我们正在运行 Debian 挤压稳定版。可能来自 Sybase 的人可能是回答这个问题的最佳选择。所以请酌情提供帮助。

- 我们在 PHP 5.3.6 与 Sybase ASE 的对话上取得了成功。- 我们在 PHP 与 Apache 的对话方面取得了成功

但不是两者兼而有之。

我猜想成功的关键组件是知道要使用哪些 ./configure PHP 选项以及 Sybase 的特定库链接。上面的链接与我们正在寻找的类似，但每次，我都尝试使用默认 ./configure 之外的任何其他选项进行编译，我会在下面收到错误：

PHP 警告：PHP 启动：无法加载动态库 '/opt/sybase/OCS-15_0/php/php536_64/lib/sybaseasephp.so' - /opt/sybase/OCS-15_0/php/php536_64/lib/sybaseasephp.so : undefined symbol: executor_globals in Unknown on line 0

任何 PHP/SYBASE 专家都知道这个问题的答案，请分享。

最好的，

包

# php - 在 PHP 数组中显示多行

> ID：11457343
> 
> 赞同：3
> 
> 时间：2012-07-12T17:30:48.353
> 
> 标签：php, mysql, json

我编写了一个脚本，用于从数据库中返回案例记录。当实际上有两条记录时，我为我的 mysql 查询返回一条记录。这就是我要返回的内容：

```
{ "cases": [ {"name":"Test Case for App","number":"3846"}] } 
```

我应该看到：

```
{ "cases": [ {"name":"Test Case for App","number": "2903"}, {"name":"Test Case 2","number": "2856"} ] } 
```

这是我的来源：

```
$sql = "select * from cases as c join contacts_cases as conc on c.id = conc.case_id where conc.contact_id = '1b360507'";
$query = mysql_query($sql);  

// If we find a match, create an array of data, json_encode it and echo it out  
if (mysql_num_rows($query) > 0)  
{  
    $row = mysql_fetch_assoc($query);  
    $response = array(  
        'name' => $row['name'],  
        'number' => $row['case_number']
    );  

    echo '{ "cases": [ ',  json_encode($response), "] }"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T17:32:53.073

如果您期待多个结果，您应该尝试

```
if (mysql_num_rows($query) > 0)  
{  
    $responses = array();
    while($row = mysql_fetch_assoc($query)) {
        $responses[] = array(  
            'name' => $row['name'],  
            'number' => $row['case_number']
        );  
    }
    echo '{"cases": ' . json_encode($responses) . '}';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:42:13.867

你需要遍历所有行，你只是得到一个。

另外，不要尝试自己构建 JSON。按照您的意愿制作阵列，然后`json_encode`是整个事情。

```
$cases = array();
while ($row = mysql_fetch_assoc($query)) {
    $cases[] = array(  
        'name'   => $row['name'],  
        'number' => $row['case_number']
    );
}

echo json_encode(array('cases' => $cases)); 
```

# javascript - 在线数学编辑器和评估引擎

> ID：11457345
> 
> 赞同：2
> 
> 时间：2012-07-12T17:30:51.913
> 
> 标签：javascript, math, web-applications, editor, evaluation

我正在尝试建立一个网站，帮助我的学生评估他们的数学知识。

该主题涉及简单的代数`5a-(2a+(2b-3a))= ?`和简单的分数。

我有两个问题：

1.  学生必须能够轻松输入数学。他们没有像 TeX 这样的代码的经验。我不能指望他们输入像 \frac{a}{b} 这样的东西。您会推荐哪个易于使用的数学编辑器库？
2.  我如何评估他们的答案。我如何评估输入，例如`5a+2ab = 2ab+5a`. 我已经尝试了一些东西，但学生后来说他们输入`5 a`了`5*a`而不是，`5a`系统说它是错误的......

是否有任何（javascript）库可以帮助我完成此任务？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:38:10.500

WolframAlpha 有一个[API](http://products.wolframalpha.com/api/)。它可以相当容易地处理此类请求：[Demo](http://www.wolframalpha.com/input/?i=5a%2B2ab%3D2ab%2B5%2aa)

它有一个非常全面的解析引擎，可以理解最正确格式的数学表达式。虽然我必须承认这可能有点矫枉过正......

# ruby - 在 cli gem 中使用 raad 和 eventmachine

> ID：11457346
> 
> 赞同：1
> 
> 时间：2012-07-12T17:30:52.840
> 
> 标签：ruby, gem, command-line-interface, eventmachine

我按照[本教程](http://robdodson.me/blog/2012/06/14/how-to-write-a-command-line-ruby-gem/)创建了一个简单的命令行 gem，现在我想用[raad](https://github.com/colinsurprenant/raad)扩展功能。目前，我按照教程进行了以下更改：

**垃圾箱/zerp：**

```
#!/usr/bin/env ruby

require 'zerp'

class Zerp    
  def start
    Raad::Logger.debug 'zerp started'

    EventMachine.run do
      EventMachine.add_periodic_timer(1) do
        Raad::Logger.info 'zerp is running'
      end
    end
  end

  def stop
    EventMachine.stop
    Raad::Logger.debug 'zerp stopped'
  end
end 
```

**库/zerp.rb：**

```
require 'zerp/version'

require 'eventmachine'
require 'raad'

module Zerp
end 
```

当我从命令行运行客户端时，出现以下错误。

```
user@zenbook:~/git/zerp :) zerp
/home/user/.local/lib/ry/rubies/1.9.3-p194/lib/ruby/gems/1.9.1/gems/zerp-0.0.1/bin/zerp:5:in `<top (required)>': Zerp is not a class (TypeError)
    from /home/user/.local/lib/ry/current/bin/zerp:23:in `load'
    from /home/user/.local/lib/ry/current/bin/zerp:23:in `<main>'
user@zenbook:~/git/zerp :( 
```

什么是让这个工作的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:40:58.457

这是我在制作 Raad 时并没有真正考虑过的用例，只需稍加修改即可使其更好地集成到“可执行”gem 上下文中。同时，您可以使用此解决方法：

**垃圾箱/zerp**

```
#!/usr/bin/env ruby

begin
  require 'zerp'
rescue LoadError
  $:.unshift 'zerp/lib'
  require 'zerp'
end

# raad must be required after the Zerp class definition
require 'raad' 
```

**zerp/lib/zerp.rb**

```
require "zerp/version"
require "zerp/service" 
```

**zerp/lib/service.rb**

```
require 'eventmachine'

class Zerp    
  def start
    Raad::Logger.debug 'zerp started'

    EventMachine.run do
      EventMachine.add_periodic_timer(1) do
        Raad::Logger.info 'zerp is running'
      end
    end
  end

  def stop
    EventMachine.stop
    Raad::Logger.debug 'zerp stopped'
  end
end 
```

**zerp/lib/版本**

```
module ZerpModule
  VERSION = "0.0.1"
end 
```

Raad 现在的工作方式是，由于需要 raad gem 的文件是“zerp”，因此 Raad 尝试使用“Zerp”类进行引导。为避免冲突，您应该使用“Zerp”以外的其他模块名称——我刚刚选择了“ZerpModule”。

我将尽快修复以使 Raad 在 gem 上下文中更好地集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T18:04:45.863

在`zerp.rb`中，您声明`Zerp`为模块，但在 中`bin/zerp`，您将其声明为类。因为它已经是一个模块，所以你不能做你想做的事情。

我只会删除这些`module Zerp`东西。我也会将`class Zerp`等放入`zerp.rb`.

最后，`bin/zerp`你需要实际调用一些方法。像这样的东西：

```
zerp = Zerp.new
Process.signal('SIGINT') do 
  zerp.stop
end

zerp.start 
```

不知道你想做什么，这只是一个猜测......</p>

# javascript - 传单使用的平铺格式是什么？

> ID：11457351
> 
> 赞同：2
> 
> 时间：2012-07-12T17:31:06.840
> 
> 标签：javascript, image-processing, geocoding, geospatial, leaflet

我正在计划一个网站，它将使用巨大的示意图，即不是照片的光栅图像。如果它们是照片并且我有兴趣将它们显示出来，我会使用[zoomify](http://www.zoomify.com/html5.htm)、[IIPImage](http://iipimage.sourceforge.net/demo/)或[PanoJS](http://www.dimin.net/software/panojs/)。尽管所有这些解决方案都提供 HTML5 支持，但它们对我的目的并不完全令人满意，因为它们针对 JPEG 进行了优化，使用了晦涩的 JavaScript 或具有不平滑的过渡。

所以，我在想也许我可以使用带有自定义瓷砖的[传单。](http://leaflet.cloudmade.com/index.html)也就是说，不是将 javascript 连接到地图服务器，我可以将其连接到我自己的带有示意图的 tile-provider。我的理由是传单提供了平滑的渲染，使用的瓷砖看起来是 png，我什至可以使用标记和矢量图层。但我遇到了一个绊脚石：

什么样的瓷砖传单期望？这方面的信息在哪里？地图投影或我不知道的其他地理特定方面是否会成为问题？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:49:09.960

找到了！

[http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames](http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames)

# actionscript-3 - Flash 安全策略：是否有允许被阻止的 IP 127.0.0.2 的解决方法？

> ID：11457355
> 
> 赞同：0
> 
> 时间：2012-07-12T17:31:20.700
> 
> 标签：actionscript-3, flash, azure

对于 Flash 游戏的本地开发，我们需要在 127.0.0.1 和 127.0.0.2 运行服务器。Adobe 安全策略对 127.0.0.1 没有问题，但它明确阻止了 127.0.0.2。

我们使用 Windows Azure 作为我们的托管平台，最近对 Windows Azure Compute Emulator 的更改要求我们同时使用这两个 IP 地址。

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:43:58.163

我认为[Flash Player 全局安全设置面板](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)可能允许您解决此问题。

将提供 SWF 的本地目录（或添加 127.0.0.2？）添加到标有“始终信任这些位置的文件”的框中。

# java - 在java中关闭数据库连接

> ID：11457356
> 
> 赞同：1
> 
> 时间：2012-07-12T17:31:21.997
> 
> 标签：java, sql, connection, try-catch

我已经编写了以下java代码来连接Oracle Express Edition数据库......我已经阅读了很多关于关闭连接、语句和结果的信息，但是关于这个问题有一些问题......

1-我通常会多次测试我的代码，所以如果我不关闭连接等，我会遇到任何问题吗？！！（因为连接是在我的代码中的同一个变量或对象上建立的！！！！）

2-我怎么知道现在有多少个连接？（经过多次测试代码）

3-我应该将 CLOSE 方法放在 finally 块中并使用新的 TRY CATCH 块还是在 main 方法之后添加 THROWS SQLException？！！！！这些与实施有什么区别？！！！

```
package mainAssignment;

import java.sql.*;
import java.text.MessageFormat;
import java.math.*;
import java.util.*;
//import java.text.MessageFormat;

public class Conn {

/**
 * @param args
 */
public static void main(String[] args)throws SQLException{
    // TODO Auto-generated method stub

    String jdbcURL = "jdbc:oracle:thin:@localhost:1521:xe";
    Connection conn = null;
    Statement stmt = null;
    ResultSet rs = null;
    String user = "hr";
    String passwd = "hr";
    Scanner input = new Scanner(System.in);
    try {

        Class.forName("oracle.jdbc.driver.OracleDriver");
        conn = DriverManager.getConnection(jdbcURL, user, passwd);
        System.out.println("ok");
        System.out.println("Please enter the desired employee ID: ");
        Object[] arg={new String(input.nextLine())};
        String query = MessageFormat.format(
            "select * from EMPLOYEES where employee_id={0}", arg);
        //System.out.println(query);
        stmt = conn.createStatement();
        stmt.executeQuery(query);
        rs = stmt.getResultSet();
        while (rs.next()) {
                BigDecimal empid = rs.getBigDecimal(1);
                String firstname = rs.getString("FIRST_NAME");
                System.out.println("employee ID " + empid
                        + "  first name is " + firstname);
            }

    } catch (SQLException e) {
        e.printStackTrace();
        // TODO
    } catch (ClassNotFoundException e) {
        // TODO
        e.printStackTrace();
    } finally {
        conn.close();
        rs.close();
    if (conn.isClosed())
        System.out.println("no connection any more");
    else
        System.out.println("connection exists");
    }
   }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:36:09.903

1）完成执行后，您将留下许多空闲（挂起）的连接。为了防止这种情况检查连接是否为空。如果是 - 建立一个新的，如果它不为空 - 使用现有的。

2）你可以在sql server上查看。ms sql server 示例：[如何确定 ms sql server 2005 中打开/活动连接的总数](https://stackoverflow.com/questions/216007/how-to-determine-total-number-of-open-active-connections-in-ms-sql-server-2005)

3）将 close 方法放在 finally 块中是一个好习惯。不要改变那个。有时 finally 块也需要它自己的内部 try-catch-finally 块。

旁注：如果您创建抛出异常的方法，您将无法解决任何问题。它只是将需要维护异常的需求推给将使用您的方法的人。有时这是一个好方法，但更多时候不是。

在现实生活中的应用程序中，您还应该检查数据库是否可用，连接是否建立以及查询结果是否为空。

附录一：oracle express中如何查看活动连接数：

[如何在 Oracle 中列出活动/打开的连接？](https://stackoverflow.com/questions/1043096/how-to-list-active-open-connections-in-oracle)

[http://dbalink.wordpress.com/2008/06/08/find-active-sessions-in-oracle-database/](http://dbalink.wordpress.com/2008/06/08/find-active-sessions-in-oracle-database/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:06:09.463

您可能想要使用连接池。看看 C3P0 或 DBCP。您仍然需要关闭结果集和语句，但是当您在连接上调用 close 时，它​​只会将其返回到池中。更新：几年来我们一直在使用[Hikari](https://github.com/brettwooldridge/HikariCP)进行连接池，并且对此非常满意。

# jquery - 如何制作输入自动增长的表单？

> ID：11457361
> 
> 赞同：0
> 
> 时间：2012-07-12T17:31:59.710
> 
> 标签：jquery, html, ajax

例如，我有一个表格，允许人们输入他们所有的兄弟姐妹。这可能是 0 或 100（取决于他们的父母有多“忙”）。我该怎么做才能让输入字段自动增长？我现在有一个表单，用户单击“添加更多兄弟姐妹”并添加了一个输入字段，但该按钮让我很烦，所以我试图想办法让一个新的空白字段在它们开始绑定后立即出现. 因此，只要您输入您的兄弟姐妹姓名，下方就会出现一个新字段，因此当您完成该兄弟姐妹信息后，您可以继续下一个（当您在该字段上键入时，下方会出现一个新输入）。

此外，如果它有帮助，我的长期目标是还对正在输入的项目提供一些“分析”，以便当他们输入兄弟姐妹信息时，它将显示平均年龄，验证没有兄弟姐妹比父母大（并警告可能的错误）等，然后再发送到服务器。

我对 Web 开发非常陌生，并且一直在学习 jquery，但我不确定 jquery 是否可以做我想做的事情，并且想知道是否有人可以告诉我我需要学习什么技术来实现这一点（我认为 ajax但如果可能的话，找不到太多东西）。我当前（新手）的方法是拥有 50 个字段并将它们全部隐藏，当用户单击“添加更多兄弟姐妹”时，它只会取消隐藏下一个字段。有没有更好的方法来做到这一点，或者如果我目前的方法很好，有没有办法修改它以消除对“添加更多兄弟姐妹”按钮的需要？一个例子会很棒，但实际上我只想对我需要做什么进行高级解释，这样我就知道要寻找什么（并自己学习）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:56:12.670

我不难。观察输入中的键事件，当当前输入是最后一个输入时，添加一个新输入（例如使用`$.after()`）

演示：http: [**//jsfiddle.net/doktormolle/WaL84/**](http://jsfiddle.net/doktormolle/WaL84/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:55:01.663

应该可以用jQuery来做。我建议在[jsfiddle](http://jsfiddle.net/krishollenbeck/jyQTN/)中进行试验 并提供一个可行的示例。或者一些可能有助于更好地理解你想要达到的目标的东西。

我在这里开始了一些事情[http://jsfiddle.net/krishollenbeck/jyQTN/](http://jsfiddle.net/krishollenbeck/jyQTN/)

让我知道这是否是您所指的。或者，如果我完全离开了。

```
<input type="text" class="input"/>​

$('.input').focus(function(){
    $('<input type="text" />').insertAfter('.input')
});​ 
```

我相信您正在寻找的内容更详尽。但这是你想要达到的最基本的形式吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:06:56.567

我创建了一个非常基本的小提琴。它没有样式，但它达到了我认为的预期结果。

小提琴 - [http://jsfiddle.net/ZqQ7Y/4/](http://jsfiddle.net/ZqQ7Y/4/)

# php - 从php中的目录中获取所有文件名

> ID：11457363
> 
> 赞同：1
> 
> 时间：2012-07-12T17:32:03.543
> 
> 标签：php

（好吧，我在stackoverflow和其他网站上浏览了很多帖子。我需要一个简单的任务，）

我想为我的用户提供从他的帐户单击上传文件的功能，然后选择一个目录并获取该目录中所有文件名的列表。

根据这里的帖子，我得到的是我必须预先定义目录名称，这是我想避免的。

有没有一种简单的方法可以单击目录并在 PHP 中获取数组中的所有文件名？提前谢谢了！

```
 $dir = isset($_POST['uploadFile']) ? _SERVER['DOCUMENT_ROOT'].'/'.$_POST['uploadFile'] : null;
  if ($_POST['uploadFile'] == true) 
    {
     foreach (glob($dir."/*.mp3") as $filename) {
     echo $filename;
    }
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T17:37:46.337

我将继续发布我目前正在使用的代码示例，并进行一些更改，尽管我通常会告诉您在 google 上查找并先尝试。

```
if ($handle = opendir($dir)) {
    while (false !== ($file = readdir($handle))) {
        echo $file;
    }
    closedir($handle);
} 
```

这将显示目录的全部内容...包括：“.”、“..”、任何子目录和任何隐藏文件。我相信如果不需要的话，你可以想办法隐藏它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T18:08:26.320

```
<?php
$files=glob("somefolder/*.*");
print_r($files);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:36:08.033

看看`Directory`课程（[这里](http://us2.php.net/manual/en/class.directory.php)）和[`readdir()`](http://us2.php.net/manual/en/function.readdir.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T17:41:12.197

我很困惑你想要什么，所有文件还是只有一些文件？但是，如果您想要文件夹和文件的数组，请执行此操作

```
$folders = array();
$files = array();
$dir = opendir("path");
for($i=0;false !== ($file = readdir($dir));$i++){
  if($file != "." and $file != ".."){
    if(is_file($file)
      $files[] = $file;
    else
      $folders[] = $file;
   }
} 
```

如果只有一些你想要的文件夹，以后你可以从数组中删除它们

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-01-26T06:20:24.197

**我总是使用这个惊人的代码来获取文件列表：**

```
$THE_PATTERN=$_SERVER["DOCUMENT_ROOT"]."/foldername/*.jpg";

$TheFilesList = @glob($THE_PATTERN);
$TheFilesTotal = @count($TheFilesList);
$TheFilesTotal = $TheFilesTotal - 1;
$TheFileTemp = "";

for ($TheFilex=0; $TheFilex<=$TheFilesTotal; $TheFilex++)
  {
    $TheFileTemp = $TheFilesList[$TheFilex];
    echo $TheFileTemp . "<br>"; // here you can get full address of files (one by one)
  } 
```

# java - Java While 循环

> ID：11457372
> 
> 赞同：3
> 
> 时间：2012-07-12T17:32:42.873
> 
> 标签：java, while-loop

是否可以在 while 循环中，返回到循环的开头？

像这样的东西

```
 while(this is true)
 {
      do stuff...
      if(this is true)
        {
            restart while loop;
        }
  } 
```

增加清晰度：我的意思不是像重置变量那样重新启动，我的意思是在停止执行并继续下一次迭代的意义上重新启动。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T17:33:50.853

`continue`关键字会这样做

```
while(this is true)
 {
      do stuff...
      if(this is true)
        {
            continue;
        }
  } 
```

基本上，`continue`当场停止循环的执行，然后继续循环的下一次迭代。您也可以使用其他循环（例如`for`循环）来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:52:54.567

是的，有可能。Java 为循环或语句块提供标签，并且它必须位于语句之前。语法是`identifier:`

```
START: while(this is true)
 {
      do stuff...
      if(this is true)
        {
            continue START;
        }
  } 
```

还有很多方法可以做到这一点，但我认为这是最简单的方法。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-12T17:37:19.717

[编辑] 误解了这个问题！如果您想重新启动循环，这将有效。

有很多方法可以做到这一点。您可以在函数中使用 while 循环并调用该函数。如：

```
public static void loop(){
       while(this is true)  {
              do stuff...
              if(this is true) {
                   loop();
                   break; <-- dont forget this!
              }
       } 
} 
```

# php - 带 php 的动态 xml

> ID：11457376
> 
> 赞同：0
> 
> 时间：2012-07-12T17:32:56.197
> 
> 标签：php, xml, directorysearcher

尝试编写一个填充了从目录列表中获取的信息的 XML 文件，但我不知道如何让 createElement 方法与动态内容一起使用。

我很想像动态表一样在标签中进行硬编码，然后只获取整个输出并将其发布到 xml 文件中，但我也不知道如何将预格式化的标签放入 xml 中。

我的 XML 需要这样格式化

```
<CONTENT>
    <GALLERY name="**HARDCODED DATA**">
        <CATEGORY name="**HARDCODED DATA BASED FROM DIRECTORY SEARCH 1**" desc="**HARDCODED DATA BASED FROM DIRECTORY SEARCH 1**" thumb="**HARDCODED DATA BASED FROM DIRECTORY SEARCH 1**">
            <ITEM>
                <file_path>**dynamic content from directory search**</file_path>
                <file_width>**HARDCODED**</file_width>
                <file_height>**HARDCODED**</file_height>
                <file_title>**dynamic content from directory search**</file_title>
                <file_desc>**Loaded from a seperate txt file, index to match with the index of the dir file**</file_desc>
                <file_image>**Loaded from a seperate txt file, index to match with the index of the dir file**</file_image>
                <featured_image>**Loaded from a seperate txt file, index to match with the index of the dir file**</featured_image>
                <featured_or_not>**Loaded from a seperate txt file, index to match with the index of the dir file**</featured_or_not>
            </ITEM>
****loop through for next ITEM****
        </CATEGORY>
****start next category from secody directory search content****
    </GALLERY>
****start gallery 2 and 3 here, same format at gallery 1****
</CONTENT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:03:22.347

您可以使用 urlencode() 函数来不分解 XML

```
echo urlencode("<table><tr><td>Encoded data</td></tr></table>"); 
```

你会得到

```
%3Ctable%3E%3Ctr%3E%3Ctd%3EEncoded+data%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftable%3E 
```

尝试用 urldecode() 解码，你会得到

```
<table>
 <tbody>
  <tr>
   <td>Encoded data</td>
  </tr> 
 </tbody>
</table> 
```

*编辑*我想我发现了你的问题，在“生成列表”标签
表
tr
td
ar 被认为是 HTML 标记标签，而从第 191 行到第 200 行项目
file_path
file_width
file_height
file_title
file_desc
file_image
features_image
features_or_not
被认为是 XML 标记，应该对其进行解析，而不是将 XML 转储到 HTML 正文中。如果您希望网站的访问者能够访问 XML 并按照他/她的意愿进行解析，您应该做什么 XML 只是将 XML 标记转储到文件中，但没有 HTML 标签，而是使用自定义标签，例如 and 和用户应该解析XML 如果他想从中生成一个 HTML 表格，或者包含“GenerateList”的编码输出并打印，但是我上面提到的 XML 标记不会给你 HTML 表格的预期结果，而是用 TD 替换它们表示 HTML 表格中的一个单元格。希望它有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:36:23.463

发现需要使用 loadXML 而不是 apendchild 的问题

# mysql - Mysql 最大用户连接数错误

> ID：11457389
> 
> 赞同：0
> 
> 时间：2012-07-12T17:33:25.060
> 
> 标签：mysql

我面临着一个非常奇怪的问题。

我正在尝试将用户连接到我的 mysql 5.5 实例，但它一直对我说用户已经超过了 max_user_connections

```
ERROR 1226 (42000): User 'xpto' has exceeded the 'max_user_connections' resource (current value: 100) 
```

但，

```
show processlist 
```

不显示该用户使用的任何连接。我很确定用户根本没有使用任何连接。例如，如果我将当前值增加到 110，我可以连接。然后，如果我降低我无法连接。

**编辑：**全球连接使用量为 500，只有少数（10/20）被使用。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:38:28.517

服务器已经有太多打开的连接。MySQL 服务器在拒绝允许更多连接之前只能处理特定数量的打开连接，并且该限制在服务器的所有用户之间共享。它通常设置得相当高，尽管某人很容易通过建立大量连接来有效地对 MySQL 服务器进行 DoS。

如果您收到错误消息（代码 1226）表明整个 MySQL 服务器已用完连接槽 - 这是 DoS 场景。

> 1.  您的数据库必须有一个用户“A”，您使用该用户配置了您的 wordpress 博客。
> 2.  现在的问题是用户'A'已经超出了`maximum_questions`资源（当前值：40）
> 3.  `wp-config.php`通过您的域控制面板在您的数据库中创建一个新用户“B”，并更新您在 wordpress 安装目录中归档的相同用户名。
> 4.  现在您可以在几分钟内解决问题。它不会干扰数据库或您在 wordpress 或 phpbb 中的帖子。

复制自[神经网络博客](http://blogs.neuronring.com/blogs/computer/troubleshooting/mysql-error-1226-user-has-exceeded-max_questions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:39:45.007

你在 MySQL 5 上，并且你设置了用户的 MAX_USER_CONNECTIONS，并且用户最近断开了连接？

来自 MySQL[文档](http://dev.mysql.com/doc/refman/5.0/en/user-resources.html)：

> 对于 MAX_USER_CONNECTIONS 限制，如果帐户当前已打开允许的最大连接数，则可能会发生边缘情况：如果服务器未完全处理连接，则快速断开连接可能会导致错误（ER_TOO_MANY_USER_CONNECTIONS 或 ER_USER_LIMIT_REACHED）在连接发生时断开连接。当服务器完成断开连接处理时，将再次允许另一个连接。

# java - Error in classpath generation from default-template ant

> ID：11457392
> 
> 赞同：0
> 
> 时间：2012-07-12T17:33:39.060
> 
> 标签：java, ant, ivy

I am trying to use the default-template in my Java project to generate the launch script, based on the ivy dependencies specified in my project. The issue I am facing is that the ivy dependencies are getting picked up and put in the classpath but the main project jar is not getting included in the classpath.(Which gives a class not found exception while trying to run the script) On further investigation and comparison with other scripts I found that there is a line as.

```
export RUNTIME_CLASSPATH="" 
```

in my generated script. This should have the path to my projects jar but is not getting populated (ex: `export RUNTIME_CLASSPATH="$(dirname $0)/../lib/myproject.jar:"`)

Where exactly do we specify the project referring itself(calling project) in the script?? I have looked into all other files including the build properties, ivy, ivy settings to no avail. It would be great If someone could help me find what I am missing.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:56:59.590

ANT doesn't have any standard functionality for generating OS specific launch scripts. What you can do is generate an [executable jar](http://www.ibm.com/developerworks/library/j-jar/) which can be launched by running java as follows:

```
java -jar demo.jar 
```

The key feature of an executable jar is it's manifest that specifies both the main class and classpath:

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.3
Created-By: 1.6.0_20-b20 (Sun Microsystems Inc.)
Main-Class: org.demo.App
Class-Path: lib/slf4j-api-1.6.4.jar lib/slf4j-simple-1.6.4.jar 
```

The following ANT project demonstrates how ivy can assist in the creation of executable jars

# Example

```
|-- build.xml
|-- ivy.xml
`-- src
    |-- main
    |   `-- java
    |       `-- org
    |           `-- demo
    |               `-- App.java
    `-- test
        `-- java
            `-- org
                `-- demo
                    `-- AppTest.java 
```

Run the build

```
ant clean build 
```

Execute the program

```
java -jar build/dist/demo.jar 
```

jar is packaged to use dependencies located in a relative "lib" subdirectory

```
build/dist/demo.jar
build/dist/lib/slf4j-api-1.6.4.jar
build/dist/lib/slf4j-simple-1.6.4.jar 
```

## ivy.xml

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations>
        <conf name="compile" description="Required to compile application"/>
        <conf name="runtime" description="Additional run-time dependencies" extends="compile"/>
        <conf name="test"    description="Required for test only" extends="runtime"/>
    </configurations>

    <dependencies>
        <!-- compile dependencies -->
        <dependency org="org.slf4j" name="slf4j-api" rev="1.6.4" conf="compile->default"/>

        <!-- runtime dependencies -->
        <dependency org="org.slf4j" name="slf4j-simple" rev="1.6.4" conf="runtime->default"/>

        <!-- test dependencies -->
        <dependency org="junit" name="junit" rev="4.10" conf="test->default"/>
    </dependencies>

</ivy-module> 
```

## build.xml

```
<project name="demo" default="build" xmlns:ivy="antlib:org.apache.ivy.ant">

    <!--
    ================
    Build properties
    ================
    -->
    <property name="src.dir"          location="src/main/java"/>
    <property name="test.src.dir"     location="src/test/java"/>
    <property name="build.dir"        location="build"/>
    <property name="classes.dir"      location="${build.dir}/classes"/>
    <property name="test.classes.dir" location="${build.dir}/test-classes"/>
    <property name="ivy.reports.dir"  location="${build.dir}/ivy-reports"/>
    <property name="test.reports.dir" location="${build.dir}/test-reports"/>
    <property name="dist.dir"         location="${build.dir}/dist"/>

    <property name="jar.main.class" value="org.demo.App"/>
    <property name="jar.file"       value="${dist.dir}/${ant.project.name}.jar"/>

    <!--
    ===========
    Build setup
    ===========
    -->
    <target name="init">
        <ivy:resolve/>

        <ivy:report todir='${ivy.reports.dir}' graph='false' xml='false'/>

        <ivy:cachepath pathid="compile.path" conf="compile"/>
        <ivy:cachepath pathid="runtime.path" conf="runtime"/>
        <ivy:cachepath pathid="test.path"    conf="test"/>
    </target>

    <!--
    ===============
    Compile targets
    ===============
    -->
    <target name="compile" depends="init">
        <mkdir dir="${classes.dir}"/>
        <javac srcdir="${src.dir}" destdir="${classes.dir}" includeantruntime="false" debug="true" classpathref="compile.path"/>
    </target>

    <target name="compile-tests" depends="compile">
        <mkdir dir="${test.classes.dir}"/>
        <javac srcdir="${test.src.dir}" destdir="${test.classes.dir}" includeantruntime="false" debug="true">
            <classpath>
                <path refid="test.path"/>
                <pathelement path="${classes.dir}"/>
            </classpath>
        </javac>
    </target>

    <!--
    ============
    Test targets
    ============
    -->
    <target name="test" depends="compile-tests">
        <mkdir dir="${test.reports.dir}"/>
        <junit printsummary="yes" haltonfailure="yes">
            <classpath>
                <path refid="test.path"/>
                <pathelement path="${classes.dir}"/>
                <pathelement path="${test.classes.dir}"/>
            </classpath>
            <formatter type="xml"/>
            <batchtest fork="yes" todir="${test.reports.dir}">
                <fileset dir="${test.src.dir}">
                    <include name="**/*Test*.java"/>
                    <exclude name="**/AllTests.java"/>
                </fileset>
            </batchtest>
        </junit>
    </target>

    <!--
    =====================
    Build and run targets
    =====================
    -->
    <target name="build" depends="test">
        <ivy:retrieve pattern="${dist.dir}/lib/[artifact]-[revision](-[classifier]).[ext]" conf="runtime"/>

        <manifestclasspath property="jar.classpath" jarfile="${jar.file}">
            <classpath>
                <fileset dir="${dist.dir}/lib" includes="*.jar"/>
            </classpath>
        </manifestclasspath>

        <jar destfile="${jar.file}" basedir="${classes.dir}">
            <manifest>
                <attribute name="Main-Class" value="${jar.main.class}" />
                <attribute name="Class-Path" value="${jar.classpath}" />
            </manifest>
        </jar>
    </target>

    <target name="run" depends="build">
        <java jar="${jar.file}" fork="true"/>
    </target>

    <!--
    =============
    Clean targets
    =============
    -->
    <target name="clean">
        <delete dir="${build.dir}"/>
    </target>

    <target name="clean-all" depends="clean">
        <ivy:cleancache/>
    </target>

</project> 
```

# php - 更改 Facebook Like Code 中的 URL

> ID：11457393
> 
> 赞同：1
> 
> 时间：2012-07-12T17:33:39.640
> 
> 标签：php, javascript, html, ajax, facebook

我正在构建的网站上的所有内容都是使用 ajax 动态加载的，因此 URL 永远不会改变。现在客户想添加一个 facebook 的“like”按钮。为了做到这一点，我计划使用`$_GET`请求来确保在另一个用户点击喜欢的链接时加载正确的内容。但是，我不知道如何手动将这些 url 添加到 facebook like 按钮。点赞按钮只是抓取当前的 URL，它永远不会改变。

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

点赞按钮代码：

```
<div class="fb-like" data-send="false" data-layout="button_count" data-width="100" data-show-faces="true" data-font="arial"></div> 
```

我对 JS 有点陌生，但似乎必须有一种非常简单的方法来更改发送到 facebook 的 url。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T17:35:49.543

添加`data-href`到按钮：

```
<div class="fb-like" data-href="http://www.example.com" data-send="false" data-width="450" data-show-faces="true"></div> 
```

# ios - 用于渲染精灵的纹理采样坐标

> ID：11457394
> 
> 赞同：12
> 
> 时间：2012-07-12T17:33:41.093
> 
> 标签：ios, ios5, opengl-es, sprite, textures

假设我们有一个纹理（在本例中为 8x8 像素），我们想将其用作精灵表。其中一个子图像（精灵）是纹理内部 4x3 的子区域，如下图所示：

![在此处输入图像描述](../Images/b49a376684df7073f4c590162ccb59dd.png)

（显示了四个角的归一化纹理坐标）

现在，基本上有两种方法可以将纹理坐标分配给 4px x 3px 大小的四边形，以便它有效地成为我们正在寻找的精灵；第一个也是最直接的方法是在子区域的角落对纹理进行采样：

![在此处输入图像描述](../Images/176bebb0406efb3dd52c1adb3e900293.png)

```
// Texture coordinates

GLfloat sMin = (xIndex0                  ) / imageWidth;
GLfloat sMax = (xIndex0 + subregionWidth ) / imageWidth;
GLfloat tMin = (yIndex0                  ) / imageHeight;
GLfloat tMax = (yIndex0 + subregionHeight) / imageHeight; 
```

虽然当第一次实现这个方法时，ca。2010 年，我意识到精灵看起来有点“扭曲”。经过一番搜索，我在 cocos2d 论坛上看到了一篇文章，解释了在渲染精灵时采样纹理的“正确方法”是这样的：

![在此处输入图像描述](../Images/cc96db1326de5655ad35d5cf34cab849.png)

```
// Texture coordinates

GLfloat sMin = (xIndex0                   + 0.5) / imageWidth;
GLfloat sMax = (xIndex0 + subregionWidth  - 0.5) / imageWidth;
GLfloat tMin = (yIndex0                   + 0.5) / imageHeight;
GLfloat tMax = (yIndex0 + subregionHeight - 0.5) / imageHeight; 
```

...在修复了我的代码之后，我高兴了一阵子。但在此过程中的某个地方，我相信是在 iOS 5 推出前后，我开始觉得我的精灵看起来不太好。经过一些测试，我切换回“蓝色”方法（第二张图片），现在它们看起来不错，但*并非总是如此*。

我是疯了，还是与 GL ES 纹理映射相关的 iOS 5 发生了一些变化？也许我做错了什么？（例如，顶点位置坐标略微偏离？错误的纹理设置参数？）但是我的代码库没有改变，所以也许我从一开始就做错了什么......？

我的意思是，至少在我的代码中，*感觉*好像“红色”方法过去是正确的，但现在“蓝色”方法给出了更好的结果。

现在，我的游戏看起来不错，但我觉得我迟早必须修复一些错误的东西......

有什么想法/经验/意见吗？

**附录**

为了渲染上面的精灵，我会在正交投影中绘制一个 4x3 的四边形，每个顶点都分配了前面提到的代码中隐含的纹理坐标，如下所示：

```
// Top-Left Vertex
{ sMin, tMin };

// Bottom-Left Vertex
{ sMin, tMax };

// Top-Right Vertex
{ sMax, tMin };

// Bottom-right Vertex
{ sMax, tMax }; 
```

原始四边形是从 (-0.5, -0.5) 到 (+0.5, +0.5) 创建的；即它是屏幕中心的一个单位正方形，然后缩放到子区域的大小（在本例中为 4x3），其中心位于整数 (x,y) 坐标处。我闻到这也有关系，尤其是当宽度、高度或两者都不均匀时？

**附录 2**

我也找到了这篇文章，但我仍在尝试将它放在一起（这里是凌晨 4:00） [http://www.mindcontrol.org/~hplus/graphics/opengl-pixel-perfect.html](http://www.mindcontrol.org/~hplus/graphics/opengl-pixel-perfect.html)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T18:14:44.383

这张图片的内容比肉眼看到的要多一些，纹理坐标并不是纹理被采样的唯一因素。在你的情况下，我相信蓝色可能是你想要的。

您最终想要的是在中心对每个纹素进行采样。您不希望在两个纹素之间的边界上采样，因为这要么将它们与*线性*采样相结合，要么任意选择一个或另一个与*最近的*，这取决于浮点计算的循环方式。

话虽如此，您可能会认为您不想让您的纹理坐标位于 (0,0)、(1,1) 和其他角，因为它们位于纹理边界上。然而需要注意的重要一点是，opengl 在片段中心对纹理进行采样。

举一个超级简单的例子，考虑一个 2 x 2 像素的监视器，具有 2 x 2 像素的纹理。

如果从 (0,0) 到 (2,2) 绘制一个四边形，这将覆盖 4 个像素。如果您对该四边形进行纹理映射，则需要从纹理中获取 4 个样本。

如果您的纹理坐标从 0 变为 1，则 opengl 将对其进行插值并从每个像素的中心采样，左下 texcoord 从左下像素的左下角开始。这最终将生成 (0.25, 0.25)、(0.75,0.75)、(0.25, 0.75) 和 (0.75, 0.25) 的 texcoord 对。这将样本放在每个纹素的中间，这就是你想要的。

如果您像红色示例中那样将纹理坐标偏移半个像素，那么它将错误地插值，并且您最终会从纹理像素的中心对纹理进行采样。

长话短说，您要确保您的像素与您的纹素正确对齐（不要在非整数像素位置绘制精灵），并且不要以任意数量缩放精灵。

如果蓝色方块给你的结果不好，你能举个例子，或者描述一下你是怎么画的吗？

图片说1000字：

[![图像](../Images/39c6cf088463f58346816781be4ba615.png)](https://i.stack.imgur.com/mv1f3.png)

# .net - 标准时区名称/ID

> ID：11457398
> 
> 赞同：1
> 
> 时间：2012-07-12T17:33:45.590
> 
> 标签：.net, objective-c, timezone, standards

是否有不同操作系统和/或平台可识别的标准化时区名称？例如，Objective C 中返回的字符串看起来与.NET 中`[NSTimeZone knownTimeZones]`返回的 ID 不匹配。`TimeZoneInfo.GetSystemTimeZones()`如果我想识别系统之间的时区，我是否必须编写转换表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:36:56.100

不了解其他系统，但在 .NET 中，您可以获得 GetUtcOffset 以获得与 UTC 的数字偏移量。

# sitecore - 在 Sitecore 5.3 中重置管理员密码？

> ID：11457401
> 
> 赞同：2
> 
> 时间：2012-07-12T17:34:00.373
> 
> 标签：sitecore

我需要在 Sitecore 5.3 安装中重置管理员密码 - 有什么想法可以做到这一点吗？目前我无法访问后端，因为密码已更改，但没有人记得什么。

安全数据库中没有无法覆盖的信息，因此任何选项都是打开的。我可以直接访问数据库 (SQL)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:30:31.707

重置“管理员”密码并将其更改为“b”。非常简单，只需在核心数据库上执行提供的 SQL 脚本即可：

```
UPDATE [aspnet_Membership] SET Password='qOvF8m8F2IcWMvfOBjJYHmfLABc=' 
WHERE UserId IN (SELECT UserId FROM [aspnet_Users] WHERE UserName = 'sitecore\Admin') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:30:49.753

我没有运行 5.3 的实例，所以我不知道这是否完全适用于 5.3，但这是我的建议。

您可以尝试的一件事是为您知道密码的用户复制**Core数据库中****aspnet_Membership**表的**Passowrd**和**PasswordSalt**字段的值，并将这些值粘贴到**管理员**用户的相应字段中。

 ******aspnet_Membership表**只**存储管理员用户的 ID。要获取管理员用户的 ID，您需要查询**aspnet_Users**表中的用户名**admin**。在 aspnet_Users 表中获取管理员用户的 ID，然后在 aspnet_Membership 表中查询该 ID，使用您知道密码的另一个用户的值更新 Password 和 PasswordSalt 字段，然后尝试使用该用户的密码再次登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T09:40:25.987

警告（Sitecore 6.x）！

执行以下脚本后（感谢 Harsh Baid）

```
UPDATE [aspnet_Membership] SET Password='qOvF8m8F2IcWMvfOBjJYHmfLABc=' 
WHERE UserId IN (SELECT UserId FROM [aspnet_Users] WHERE UserName = 'sitecore\Admin') 
```

不要忘记为 salt 执行类似的脚本：

```
UPDATE [aspnet_Membership] SET PasswordSalt='OM5gu45RQuJ76itRvkSPFw==' 
WHERE UserId IN (SELECT UserId FROM [aspnet_Users] WHERE UserName = 'sitecore\Admin') 
```

并为用户批准

```
UPDATE [aspnet_Membership] SET IsApproved=1 
WHERE UserId IN (SELECT UserId FROM [aspnet_Users] WHERE UserName = 'sitecore\Admin') 
```******

# java - Powermockito：模拟静态方法

> ID：11457403
> 
> 赞同：1
> 
> 时间：2012-07-12T17:34:08.203
> 
> 标签：java, mockito, powermock

我正在模拟一个静态方法，如下所示：

```
class A{
    static String methodA(HashMap<String,Boolean> h){
        ...  
        Set<String> keys=h.entrySet();  
    }
} 
```

Powermockito 代码：

```
Powermockito.mockstatic(A.class);  
when(A.methodA(any(HashMap.class)).thenReturn("Hey"); 
```

现在，当我不期望调用methodA进入函数定义时，而是直接返回“嘿”。然而，这并没有发生。尽管进行了模拟，但对 methodA() 的调用进入了它，并且由于我正在传递`any(HashMap.class)`，因此传递了一个空值。我得到一个`NullPointerException`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:18:34.927

您需要在课堂上具备以下条件：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({ A.class})
 class ATest {
 ....
} 
```

注释@RunWith，表明PowerMockRunner 将用于执行测试用例。任何需要模拟静态或私有方法的类都进入@PrepareForTest，在本例中为：class A。

# java - 获取我的操作以查看我的其他对象

> ID：11457404
> 
> 赞同：0
> 
> 时间：2012-07-12T17:34:08.910
> 
> 标签：java, swing, jlabel, key-bindings, imageicon

我有一个 JLabel，上面有键绑定操作。我已经为一些动作定义了一些代码，但是，唉，还有其他 JLabels、JPanel 和方法中的其他东西（这是在 main() 中）我希望我的动作愚弄。

我试图将动作更改为带参数，但没有成功，我怎样才能让我的动作带参数进行操作？有什么办法吗？我已经看过了，但这非常具体，我看不到几个很好的例子。

这是我的代码的一个很好的板块：

```
 /*Bunch of stuff I want my actions to interact with above - another JLabel, a JPanel*/
    ImageIcon cursor = new ImageIcon("cursor.gif");
    JLabel cursorlbl = new JLabel("", cursor, JLabel.CENTER);
    Action goRight = new AbstractAction() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            System.out.println("lol");

        }
    };

    Action goLeft = new AbstractAction() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            System.out.println("lol2");
        }
    };

    Action goUp = new AbstractAction() {

        @Override
        public void actionPerformed(ActionEvent arg0) {

        }
    };

    Action goDown = new AbstractAction() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            System.out.println("lol2");

        }
    };

    cursorlbl.setFocusable(true);
    cursorlbl.getInputMap().put(KeyStroke.getKeyStroke("RIGHT"),
            "pressed right");
    cursorlbl.getInputMap().put(KeyStroke.getKeyStroke("LEFT"),
            "pressed left");
    cursorlbl.getActionMap().put("pressed right", goRight);
    cursorlbl.getActionMap().put("pressed left", goLeft); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:50:44.400

您可以将每个操作声明为子类（这无论如何都会开始分离 MVC），并且您要操作父类中的字段的每个项目。例子：

```
// Parent Class
public class ParentClass{
//Field you want to mess with in your action
   JLabel cursorlbl = new JLabel("");

    // Action that does things
    public class MoveAction extends AbstractAction{
        char direction;

        //Constructor for action
        public MoveAction(char direction){
            this.direction = direction;
        }

        @Override
        public void actionPerformed(ActionEvent arg0) {
            int change = 0;

            // Figure out how you'll be changing the variable
            if(direction == 'u' || direction == 'r'){
                change = 1;
            } else{
                change = -1;
            }

            // Apply the change to the correct variable
            if(direction == 'u' || direction =='d'){
                cursy += change;
            } else{
                cursx += change;
            }

            //Example how you can access the parent class's fields
            cursorlbl.setLocation(cursx, cursy);
        }       
    }
} 
```

然后要设置您的操作，您只需创建子类的实例：

```
 contentArea.getActionMap().put("pressed right", new MoveAction('r'));
    contentArea.getActionMap().put("pressed left", new MoveAction('l')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:35:56.227

将您希望在您的操作中看到的其他组件声明为`final`. 这将使行动看到他们。

更多信息[在这里](http://www.coderanch.com/t/543455/java/java/annonymous-classes-final-keyword)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:36:32.653

您应该能够像这样传递它们：

```
// note that the JLabel is now final
final JLabel cursorlbl = new JLabel("", cursor, JLabel.CENTER);
Action goRight = new AbstractAction() {

    @Override
    public void actionPerformed(ActionEvent arg0) {
        System.out.println(cursorlbl.getText()); // has access to JLabel because it's scoped to the method/class

    }
}; 
```

请注意，这样做可能会导致一些维护问题，您应该尝试记录未来开发人员可能不清楚的事情（以及两周后的您自己！）

# active-directory - 列出组的成员

> ID：11457409
> 
> 赞同：0
> 
> 时间：2012-07-12T17:34:50.403
> 
> 标签：active-directory, active-directory-group

我看到这个问题已经被问过很多次了，但我认为我对这个问题采取了不同的方法。我有一个正在工作的 LDAP 连接字符串 - 它连接到一个组。类似于以下内容：

```
var myGrp = new DirectoryEntry("LDAP://server.domain.com:389/CN=GroupName,OU=RAM,OU=Groups,DC=region,DC=company,DC=com");
            myGrp.Username = "username";
            myGrp.Password = "password"; 
```

现在，我可以毫无问题地打印 myGrp.Name。我现在想列出这个组的所有成员，但我不知道从哪里开始。任何指针都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:42:43.567

我试过了，效果很好：

```
foreach (object dn in myGrp.Properties["member"])
            {
                Console.WriteLine(dn);
            } 
```

# java - 为什么Java MousePressed 一次鼠标按下会调用两次？

> ID：11457425
> 
> 赞同：1
> 
> 时间：2012-07-12T17:35:27.840
> 
> 标签：java, mouseevent

我正在使用以下代码在 Mac OSX 上使用 Eclipse 测试一个简单的 java 图形程序：

```
public void mousePressed(MouseEvent e) {
    System.out.print("Mouse is pressed \n\n");
} 
```

但是，每当我按下鼠标时，该方法似乎被调用了两次，因为它打印了两次该行。知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-29T13:22:08.507

我有同样的问题，我通过像这样删除 MouseListener 来解决它：

```
component.removeMouseListener(component); 
```

之后我的代码运行良好。

# ruby-on-rails - Rails - 如何仅在一个方向上关联模型

> ID：11457430
> 
> 赞同：0
> 
> 时间：2012-07-12T17:35:54.847
> 
> 标签：ruby-on-rails, associations, models

伙计们，

我是 Rails 的新手，我觉得我在这里肯定遗漏了一些重要的东西，因为这似乎应该是一个很容易解决的问题。

我已经建立了一个`Page`模型和一个`Coord`模型（在入门教程的帮助下），并且`Coord`成功地`belongs_to` `Page`. 我正在尝试应用类似的逻辑来制作另一个模型，`Comment`属于`Coord`，并且只属于`Page`via `Coord`。

我是否使用`:through`（我认为）只需要在一个方向链接的关联？如 Page < Coord < Comment? 目前我有：

```
class Page < ActiveRecord::Base
  attr_accessible :description, :name
  has_many :coords
  has_many :comments, :through => :coords
end 
```

坐标模型：

```
class Coord < ActiveRecord::Base
  belongs_to :page
  has_many :comments
  attr_accessible :coordinates, :x, :y
  validates :x, :presence => true
  validates :y, :presence => true
end 
```

然后是评论模型：

```
class Comment < ActiveRecord::Base
  belongs_to :coord
  belongs_to :page
  attr_accessible :body
end 
```

我仍然不断收到有关`comments`未定义方法或未定义关联的错误。抱歉，如果这是一个常见问题，我个人不认识任何了解 Rails 的人，并且文档中的示例与我的距离太远（据我所知）。谢谢

**编辑：添加数据库架构**

```
ActiveRecord::Schema.define(:version => 20120712170243) do

  create_table "comments", :force => true do |t|
    t.text     "body"
    t.integer  "coord_id"
    t.integer  "page_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  add_index "comments", ["coord_id"], :name => "index_comments_on_coord_id"
  add_index "comments", ["page_id"], :name => "index_comments_on_page_id"

  create_table "coords", :force => true do |t|
    t.string   "coordinates"
    t.integer  "x"
    t.integer  "y"
    t.integer  "page_id"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end

  add_index "coords", ["page_id"], :name => "index_coords_on_page_id"

  create_table "pages", :force => true do |t|
    t.string   "name"
    t.string   "description"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:17:52.187

**页**

```
class Page < ActiveRecord::Base
  has_many :coords
  has_many :comments, :through => :coords
end 
```

**坐标**

```
class Coord < ActiveRecord::Base
  belongs_to :page
  has_many :comments
end 
```

**评论**

```
class Comment < ActiveRecord::Base
  belongs_to :coord
  has_one :page, :through => :coord
end 
```

使用上面的，你不需要`page_id`在`comments`表中。

**参考：** [*Active Record 关联指南*](http://guides.rubyonrails.org/association_basics.html)

# wcf - 如何让 wsdl 输入和输出名称出现

> ID：11457431
> 
> 赞同：3
> 
> 时间：2012-07-12T17:35:56.260
> 
> 标签：wcf, soap, wsdl

我有一个 WCF Web 服务项目（VB.NET 3.5），它生成的 WSDL 没有输入和输出名称，如下所示：

```
<wsdl:operation name="getListing">
  <soap:operation soapAction="getListing" style="document" /> 
  <wsdl:input>
    <soap:body use="literal" /> 
  </wsdl:input>
  <wsdl:output>
    <soap:body use="literal" /> 
  </wsdl:output>
</wsdl:operation> 
```

我需要在 WSDL 中定义输入和输出名称，如下所示：

```
<wsdl:operation name="getListing">
    <wsdlsoap:operation soapAction="getListing"/>
    <wsdl:input name="getListingRequest">
        <wsdlsoap:body use="literal"/>
    </wsdl:input>
    <wsdl:output name="getListingResponse">
        <wsdlsoap:body use="literal"/>
    </wsdl:output>
</wsdl:operation> 
```

这是相关方法的定义：

```
<OperationContract(Action:="getListing")> _
    <WebMethod(Description:="Retrieve Base64 binary.", EnableSession:=True)> _
    Public Overloads Overrides Function getListing(<System.Xml.Serialization.XmlElementAttribute([Namespace]:="http://namespacehere.com")> ByVal getListingRequest As ListingRequest) As ListingResponse 
```

我觉得我错过了一些愚蠢的东西，有人知道它是什么吗？有很多选项和参数，我找不到合适的选项和参数来确定这一点。

# joomla - 带有 sql 咨询的按钮

> ID：11457435
> 
> 赞同：0
> 
> 时间：2012-07-12T17:35:59.293
> 
> 标签：joomla, joomla2.5

我的网站上有一个按钮，我想在单击它时返回一个 Sql 咨询，我必须为此创建一个组件吗？

在joomla中如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:46:42.660

从技术上讲，是的，但是有一个使用[Joomla 平台](http://api.joomla.org/)的“Joomla 认可”快捷方式。我只是为[另一个问题](https://stackoverflow.com/questions/11454226/joomla-component-development-with-ajax-queries)回答了这个问题，但它也适用于您的情况，因此您可以参考它以获取详细信息。

简而言之，这些是您需要遵循的步骤

1.  创建一个 joomla 平台文件以包含在您的脚本中（其他答案中的详细信息）。
2.  创建一个包含该文件的 PHP 脚本。
3.  创建一个指向您的 PHP 文件的链接，该文件现在为您的函数（包括 SQL 执行）提供了 Joomla 环境。

# c# - 缺少一些自动生成的控件

> ID：11457437
> 
> 赞同：2
> 
> 时间：2012-07-12T17:36:08.747
> 
> 标签：c#, asp.net, webforms

我的应用今天开始抛出以下错误：

```
The name 'Control' does not exist in the current context 
```

它只发生在页面中的 2 个控件中，即使我重命名它们。如果我自己在`.designer.cs`文件中添加控制声明，它可以工作，但是在重建时它会再次引发错误。

有什么想法可能是错的吗？我可以粘贴所有代码，但我觉得粘贴太多了，但如果你想让我发布一些代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:52:12.360

aspx 的设计器文件有时无法正确编写控件代码。因此在这种情况下，删除设计器文件，然后右键单击您的 .aspx 文件并单击“转换为 Web 应用程序”此操作会再次正确地重新生成设计器文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:40:19.813

您应该检查文件名背后的代码并继承 @Page 指令上的属性，并确保它们都匹配......

您还应该确保排除引用文件后面相同代码的其他页面...

# python - 请提供 ENGINE 值 Django 数据库配置

> ID：11457441
> 
> 赞同：6
> 
> 时间：2012-07-12T17:36:10.887
> 
> 标签：python, database, django, settings

伙计们，我很困惑，我已经安装了 Django，并且运行服务器正常，但是当尝试配置数据库并运行 db sync 命令时，它崩溃，返回我的 ENGINE 参数不正常，但设置文件正常。按照设置文件：

```
 DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'mysite',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

和错误：

```
 Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/commands/syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/dummy/base.py", line 15, in complain
    raise ImproperlyConfigured("settings.DATABASES is improperly configured. "
django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details. 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-12T12:03:05.360

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'mysite',
        'USER': 'mysite',
        'PASSWORD': '',
        'HOST': 'localhost',
        'PORT': '3306',
     }
} 
```

使用上述设置请检查 mysql 用户的授予权限并指定主机和端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-27T01:48:42.583

我知道这篇文章很古老，但我刚刚遇到了同样的错误。对我来说，问题在于 USER 和 PASSWORD 不匹配。我最终只是进入数据库并手动重置密码，然后将新密码放入脚本中。这解决了我的问题。

# uiwebview - 由 UIWebView 的 javascript 调用的自定义 UIAlertView

> ID：11457443
> 
> 赞同：0
> 
> 时间：2012-07-12T17:36:15.567
> 
> 标签：uiwebview, uialertview

我有一个自定义的 alertvew，当在 uiwebview 中按下按钮时调用 javascript：

function doSomething(event) { alert("简单测试"); 返回假；我想要那个“警报”打开我的自定义 uialert。可能吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:09:36.050

发现对我有用的代码：

```
@interface UIWebView (JavaScriptAlert) 

- (void)webView:(UIWebView *)sender runJavaScriptAlertPanelWithMessage:(NSString *)message initiatedByFrame:(WebFrame *)frame;

@end

@implementation UIWebView (JavaScriptAlert)

- (void)webView:(UIWebView *)sender runJavaScriptAlertPanelWithMessage:(NSString *)message initiatedByFrame:(WebFrame *)frame {
    UIAlertView* dialogue = [[UIAlertView alloc] initWithTitle:nil message:message delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:nil];

    UIImage *theImage = [UIImage imageNamed:@"MdC_Base_PopUp.png"];
    theImage = [theImage stretchableImageWithLeftCapWidth:16 topCapHeight:16];
    CGSize theSize = [dialogue frame].size;

    UIGraphicsBeginImageContext(theSize);
    [theImage drawInRect:CGRectMake(0, 0, dialogue.frame.size.width, dialogue.frame.size.height)];
    theImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    dialogue.layer.contents = (id)[theImage CGImage];

    [dialogue show];
    [dialogue autorelease];
}

@end 
```

# javascript - 何时使用 which - 多个方法、多个参数或一个选项参数

> ID：11457449
> 
> 赞同：7
> 
> 时间：2012-07-12T17:36:37.657
> 
> 标签：javascript, function, methods, coding-style

这个问题来自 javascript 的角度，但它当然可以适用于其他语言。

我最近越来越多地遇到这个问题，并且想知道是否有最佳实践，或者至少是良好的设计标准，用于何时构建您的方法。

我看到的明显选项如下，每个选项都有一个简单的例子

*   多种方法：

    ```
    this.makeGetRequest = function(controller){...}
    this.makeSynchronousGetRequest = function(controller){...}
    this.makePostRequest = function(controller, data){...} 
    ```

*   一种方法，具有更多参数：

    ```
    //data would be an optional parameter
    //  this.makeRequest("friends", "GET", true);
    //  this.makeRequest("friends", "POST", false, newFriend);
    this.makeRequest = function(controller, type, isSynchronous, data){...} 
    ```

*   一种方法，带有选项参数：

    ```
    this.makeRequest = function(controller, type, options);
    this.makeRequest("friends", "POST", {data:newFriend, isSync:false}); 
    ```

*HTTP 请求示例只是激发了这个问题，但这适用于具有不同数量的自定义/变量的任何面向公众的功能。*

这三个显然都具有同样的功能。但是什么是好的做法？是否有倾向于遵循的标准或指导方针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:47:16.377

该`options`参数的优点是它允许在不牺牲清晰度的情况下进行无限的选择。当有人指定`data:`或`isSync:`很明显正在填写哪些设置时。记住将函数中的第 13 个参数设置`false`为会造成混淆。

因此，在最后两个选项之间，我只在以下情况下使用多个参数：(1) 总共少于四个参数，(2) 顺序合乎逻辑且易于记忆（URL，然后是类型，然后是数据），以及（ 3）不超过一个（最后一个）是可选的。无论如何，这是经验法则。

多种方法与参数化如何？仅当您有少量可能性（GET 与 POST、UseDefaults 与 DontUseDefaults 或其他）时，才可以选择多种方法。考虑一下，我可能只在以下情况下设置单独的方法：

1.  区别非常重要（同步请求的行为与异步请求根本不同，我希望开发人员有意识地选择要应用的请求。（相比之下，GET 与 POST 只是您请求的另一个属性——它不是全部，如果你做错了，就会做出破坏交易的决定。）

2.  无论如何，您不需要设置其他选项。如果我首先必须记住是调用 foo.get() 还是 foo.post()***然后记住******无论如何***都要填写一个`options`对象，那我只是强迫你在两个不同的地方做出决定。我宁愿将所有设置集中在一个地方。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:45:11.720

显然，对于*多种方法*，您需要调用某种抽象的超方法，否则您会重复自己，这被认为是不好的，但是有时使用别名或速记之类的方法会很好（参见 ie jQuery`$.getJSON()`用于修改后的`$.ajax()`-Call）

*如果您有很多特殊情况或可选参数，则具有更多参数*的一种方法并不是很灵活，因为您将使用第三个示例中提到的选项对象。

它实际上归结为用例和所需的灵活性/可重用性。就我个人而言，我总是使用*One 方法，使用选项参数*方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:48:00.167

如何拥有一个带有 json 选项的“超级方法”以获得最大的灵活性，然后可能是一些具有更严格定义的参数的包装器方法，以便轻松访问最常用的功能。*

# android - 应用程序未显示在 Google Play 搜索 4.x 设备

> ID：11457451
> 
> 赞同：1
> 
> 时间：2012-07-12T17:36:44.573
> 
> 标签：android

我最近发布了关于 Play 商店不允许我在没有 minSdkVersion 的情况下发布我的应用程序的帖子，但是每当我将其设置为高于“1”的任何值时，我的应用程序都无法正常工作（[minSdkVersion 破坏程序](https://stackoverflow.com/questions/11441701/minsdkversion-breaking-program)）。

所以这个人建议将我的 minSdkVersion 设置为 1，这很有效。但是现在当我提交我的应用程序时，即使开发者网站说：

```
API level: 1-16+
Supported screens: normal-xlarge
OpenGL textures: all 
```

但[该应用程序](https://play.google.com/store/apps/details?id=com.unparalleledsoftware.applist&feature=more_from_developer#?t=W251bGwsMSwxLDEwMiwiY29tLnVucGFyYWxsZWxlZHNvZnR3YXJlLmFwcGxpc3QiXQ)仅显示它支持 4.x 下的 Android，我在我的 4.0.4 设备上开发它。我试着四处搜索，发现有些人的服务会弄乱它支持的手机，所以我删除了我所有的服务，因为我真的不需要提交这个版本的应用程序。它仍然没有工作。所以我不知道还能做什么，如果有帮助，这是我的 AndroidManifest.xml ......非常感谢！

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.unparalleledsoftware.applist"
     android:versionCode="4"
     android:versionName="2.01" >

    <uses-sdk android:minSdkVersion="1"/>

 <application 
     android:icon="@drawable/icon"
     android:label="@string/app_name" 
     android:theme="@android:style/Theme.Holo.Light">

    <activity android:name="com.unparalleledsoftware.applist.applist"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver  android:process=":remote" android:name="com.unparalleledsoftware.applist.AlarmReceiver"></receiver>
 </application>

</manifest> 
```

# php - MySQL Select From Two Table per Rows of First Query

> ID：11457453
> 
> 赞同：0
> 
> 时间：2012-07-12T17:36:51.740
> 
> 标签：php, mysql

I have two tables with like below codes:

**Table: Accounts**

```
id |    username    |   email   |   registered  
1   |   player1     | 123@asd.ad|   2012-05-03  
2   |   goodman     | 1345@bs.ad|   2012-06-03  
3 | goodbat | asdh@asd.d| 2012-06-05 
```

**table:characters**

```
guid    |   account |   name    |   rank  
213     |   1       |   fres    |   2  
214     |   2       |   sdg2    |   3  
215     |   1       |   fgax    |   4  
216     |   3       |   zFvx |  8  
217     |   3       |   zsvx    |   2 
... 
```

**I want to show accounts with their highest rank character with just one Query .**

**output** (Show Accounts with their Highest rank character)

```
username : player1 | 123@asd.ad | char: fgax(4)  
username : goodman | 1345@bs.ad | char: sdg2(3)  
username : goodbat | 134s@bs.ad | char: zFvx(8)  
... 
```

**My Query:**

```
SELECT username,email,id FROM accounts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:39:36.167

```
SELECT a.username, a.email, a.id, c.name
FROM accounts a 
JOIN chars c ON a.id = c.account 
ORDER BY a.rank DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:43:48.553

Try this::

```
SELECT 
a.username as userName, 
a.email as email, 
a.id as id, 
c.name as name

FROM accounts a 
INNER JOIN chars c ON (a.id = c.accoun)t 
ORDER BY a.rank DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:58:51.507

What you need is a table join. What table joins do is that they query 2 tables, in your case **Table1** and **table2**. Here is the query and it will be followed by the explanation.

```
SELECT `t1`.`username`, `t1`.`email`, `t2`.account 
FROM `Table1` `t1`, `table2` `t2` 
WHERE `t1`.`id` = `t2`.`account` ORDER BY `rank` DESC
LIMIT 0,3 
```

LINE 1: SELECT... `t1`.`username` means username column from `t1`., and so on...and the `t1`, `t2` notation comes from...

LINE 2: FROM... `Table1` `t1` means I am querying from **Table1**, and assigned it an alias or pointer `t1`. This is the same for how we assign **table2** to `t2`.

LINE 3: WHERE... This means that you join the tables based on a common column. In this case, both **Table1** and **table2** share the same set of values - id for **Table1** and account for **table2**. Hence, you used the above line.

ORDER BY... This means you want to arrange the records based on a certain criteria, in this case rank. There are 2 directions - ASC which means Ascending (smallest top) or DESC which means Descending.

LINE 4: LIMIT 0,3 This means I want to get the first row (0) and only 3 records. Hence, LIMIT 0,3

This is the most comprehensive explanation I could give.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:11:16.387

Try this.

```
SELECT 
t1.username as userName, 
t1.email as email, 
concat(t2.name, '(', t2.rank, ')') as name
FROM table1 t1 
INNER JOIN table2 t2 ON t1.id = t2.account 
ORDER BY t2.rank DESC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T18:18:44.787

You can try this:

```
SELECT a.username, a.email, c.name
FROM Accounts a, characters c
WHERE a.id=c.account
ORDER BY MAX(c.rank) DESC 
```

# ruby-on-rails - Active Record 模型上的实例变量

> ID：11457464
> 
> 赞同：0
> 
> 时间：2012-07-12T17:37:54.720
> 
> 标签：ruby-on-rails, activerecord, instance-variables

我在 ActiveRecord 模型上创建了一个实例变量，我想在每个实例中保存一些计算量大的数据......这是我的代码：

```
class Account < ActiveRecord::Base

  after_initialize :init
  attr_accessor :market_value

  def init
    self.market_value ||= my_lengthy_function
  end
end 
```

当我初始化模型实例时，我将在其中运行该实例数据（market_value）。

这行得通 - 我可以看到我不必重新计算我的 market_value 属性。

我的问题是，当我通过另一个上下文访问该对象时，rails 并没有像我预期的那样利用该数据。

例如：

假设我创建了一个帐户实例 (a = Account.find_by_id(2))。该 market_value 将在该对象上计算一次。

如果我与该帐户对象上称为“控股”（不在我的示例代码中）的东西有嵌套的 has_many 关系，我将希望每个持有对象（控股）能够使用它的父帐户对象。

但是，在我的代码中，我从它的嵌套持有对象 (my_holding.account.market_value) 访问该帐户 - 我重新实例化了该帐户对象的一个​​实例，并产生了昂贵的计算，即使它已经被计算过。

我怎样才能更好地利用该帐户的 market_value 属性，使其不会不断重新计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:43:26.317

我会在类级别上建立一个简单的缓存，以模型 id 作为键：

```
class Account < ActiveRecord::Base
  def market_value
    @@market_value     ||= {}
    @@market_value[id] ||= my_lengthy_function
  end
end 
```

没有测试这是否可行，尤其是在开发中重新加载类时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T05:37:48.530

我不会将计算逻辑放在 ActiveRecord 模型中。也许是这样的：

```
class MarketValueCalculator

  def initialize()
    @market_values = {}
  end

  def calculate_for_account(account)
    @market_values[account.id] ||= heavy_lifting
  end

  def heavy_lifting
    ###
  end

end

@calculator = MarketValueCalculator.new

@market_value = @calculator.calculate_for_account(account)

@market_value = @calculator.calculate_for_account(my_holding.account) 
```

# delphi - xsl 文件访问被拒绝，除了在主机上

> ID：11457470
> 
> 赞同：0
> 
> 时间：2012-07-12T17:38:12.010
> 
> 标签：delphi, xslt, delphi-2009

下面是我们构建的 XML 文件的开始示例，注意是为样式表访问“CCD.xsl”。

```
'<?xml version="1.0"?>'
'<?xml-stylesheet type="text/xsl" href="' + 'C:\CDA\Schemas\CCD.xsl"?>'
'<ClinicalDocument xmlns="urn:hl7-org:v3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"' 
```

每当此 xml 从访问服务器的远程用户加载到 TWebBrowser 时，他们都会收到以下错误

“访问被拒绝。错误处理资源'file:///C:/CDA/Schemas/CCD.xsl'。”

```
WebBrowser1.Navigate(TempFileName);  //TempFileName = C:\data\CCR_Record_3336557.xml 
```

关于如何解决这个问题的任何想法？

如果您需要更多信息，请告诉我..

谢谢，感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:53:51.957

您有两个问题，都源于 XSL 引用指向 C 驱动器上的本地文件这一事实。

问题 #1（给您的错误）是您的浏览器阻止了从远程下载的 XML 文件访问本地文件系统资源的尝试。因此，浏览器在尝试呈现该 XML 文件时会引发安全错误。这就是您看到的直接错误。由于问题 #2，调整安全设置或更改浏览器不会解决您的问题。

问题 #2 是您的客户可能在其本地硬盘驱动器上没有 XSL 文件`C:\CDA\Schemas\CCD.xsl`。它在远程服务器的 C 盘上。由于问题 #1，您不能只是将它放在网络共享上，因此您需要通过与提供 XML 文件相同的机制来提供它。然后将 XSL 文件的 URI 更改为`http://myserver/schemas/ccd.xsl`.

# c# - IComparer 按不同标准排序

> ID：11457473
> 
> 赞同：0
> 
> 时间：2012-07-12T17:38:27.830
> 
> 标签：c#, .net, listview, sorting, icomparer

我有一个`ListView`，我正在尝试对它们进行排序，`BackColor`首先是带有红色的项目，然后是带有`ForeColor`红色的项目，最后是其余的项目，但所有这些都应该在他们的组中按名称排序。

我写了这段代码，但我仍然把大块相同的项目分开：

```
public int Compare (object x, object y)
{
    int CompareResult;
    ListViewItem a = (ListViewItem) x;
    ListViewItem b = (ListViewItem) y;

    if (a.BackColor == Color.FromArgb (200, 0, 0))
    {
        if (b.BackColor == Color.FromArgb(200, 0, 0))
        {
            return a.Text.CompareTo(b.Text);
        }
        else
        {
            return -1;
        }
    }
    else
    {
        if (a.ForeColor == Color.FromArgb(200, 0, 0))
        {
            if (b.ForeColor == Color.FromArgb(200, 0, 0))
            {
                return a.Text.CompareTo(b.Text);
            }
            else
            {
                return -1;
            }
        }
        else
        {
            return 1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:09:32.540

如果您首先确定项目所在的“组”，则可以使这更简单，更易于阅读：

```
class Comparer : IComparer<ListViewItem> 
{       
    public int Compare (ListViewItem left, ListViewItem right)
    {
        var leftGroup = DetermineGroup(left);
        var rightGroup = DetermineGroup(right);

        if(leftGroup == rightGroup) 
        { 
           return left.Text.CompareTo(right.Text);
        }

        return leftGroup.CompareTo(rightGroup);
    }

    enum Grouping 
    {
        RedBack,
        RedFront,
        Neither
    }

    Grouping DetermineGroup(ListViewItem x) 
    {
        if(x.BackColor == Color.Red) return Grouping.RedBack;
        if(x.ForeColor == Color.Red) return Grouping.RedFront;

        return Grouping.Neither;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:47:18.487

问题是你错过了几个案例：

*   如果`a`是非红色的，你最终每次都返回 1，而你真的想检查是否`b`有红色的前景或背景。如果是，则需要返回 1。如果不是，则需要比较文本。
*   如果`a`有红色前景，但`b`没有，你总是返回 -1，而你首先需要检查是否`b`有红色背景。如果是，则需要返回 1。

这些是我可以立即看到的两个，但要正确解决这个问题，您需要确保每对可能的输入（两个输入中的每一个的红色前、红色和非红色）都会导致发生正确的比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:47:27.723

你似乎错过了一些案例。我会确保所有9个案件都得到处理。（有些可能是多余的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T18:07:50.683

稍微重构一下：

没有运行，但似乎正确 -

```
public int Compare(object x, object y)
        {
            ListViewItem a = (ListViewItem)x;
            ListViewItem b = (ListViewItem)y;

            Color red = Color.FromArgb(200, 0, 0);

            int textCompare = a.Text.CompareTo(b.Text);
            bool bothRed = a.BackColor == red && b.BackColor == red;
            bool bothOtherColor = a.BackColor != red && b.BackColor != red;

            return bothRed || bothOtherColor ? textCompare : b.BackColor == red ? 1 : -1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T17:57:54.373

好的，这有效：

```
public int Compare ( object x, object y )
{
    int CompareResult;
    ListViewItem a = ( ListViewItem ) x;
    ListViewItem b = ( ListViewItem ) y;

    Color red = Color.FromArgb(200, 0, 0);

    if (a.BackColor == red)
    {
        if (b.BackColor == red)
        {
            return a.Text.CompareTo(b.Text);
        }
        else
        {
            return -1;
        }
    }
    else
    {
        if (b.BackColor == red)
        {
            return 1;
        }
        else
        {
            if (a.ForeColor == red)
            {
                if (b.ForeColor == red)
                {
                    return a.Text.CompareTo(b.Text);
                }
                else
                {
                    return -1;
                }
            }
            else
            {
                if (b.ForeColor == red)
                {
                    return 1;
                }
                else
                {
                    return a.Text.CompareTo(b.Text);
                }
            }
        }
    }
} 
```

# objective-c - 删除索引 NSMutableArray 处的对象

> ID：11457476
> 
> 赞同：2
> 
> 时间：2012-07-12T17:38:33.537
> 
> 标签：objective-c, xcode

> **可能重复：**
> [Objective-C NSMutableArray 在枚举时发生突变？](https://stackoverflow.com/questions/8834031/objective-c-nsmutablearray-mutated-while-being-enumerated)

我使用此代码删除索引处的对象：

```
-(IBAction)deleteMessage:(id)sender{

UIButton *button = (UIButton*) sender;

for (UIImageView *imageView in imageArray) 
{

    if ([imageView isKindOfClass:[UIImageView class]] && imageView.tag == button.tag)
    {

        if (imageView.frame.size.height == 60) {
            x = 60;
        }

        if (imageView.frame.size.height == 200) {
            x = 200;
        }

        for (UITextView *text in messagetext) 
        {

            for (UITextView *name in messagename) 
            {

                if ([text isKindOfClass:[UITextView class]] && text.tag == button.tag && text.tag== name.tag)
                {

        [imageView removeFromSuperview];

                    [messagename removeObjectAtIndex:button.tag - 1];
                    [messagetext removeObjectAtIndex:button.tag - 1];

                 }
         }

 } 
```

错误是：

```
*** Terminating app due to uncaught exception 'NSGenericException', reason: '*** Collection <__NSArrayM: 0x704bdb0> was mutated while being enumerated.' 
```

我注意到，如果我首先删除数组中的最后一个对象，然后按从最后一个到第一个的顺序，它就可以工作。但是，如果我尝试删除不是最后一个索引处的对象，应用程序崩溃并给出错误：(1,2,3,4..I delete object2... crash...if I delete object 4 no碰撞）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T17:58:46.590

一种方法是使用要删除的索引创建一个数组，然后执行循环，添加索引并随后删除对象。像这样的东西：

```
NSMutableIndexSet *indexes = [[NSMutableIndexSet alloc] init];

// Inside your loop
[indexes addIndex:(button.tag - 1)];

//..

// After your loop
[messagename removeObjectsAtIndexes:indexes];
[messagetext removeObjectsAtIndexes:indexes]; 
```

现在，如果您想要两个数组的不同索引，只需创建另一个`NSMutableIndexSet`并添加第二组索引即可。`indexes`如果你不使用 ARC，也不要忘记释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:44:16.073

如果您打算对数组进行变异（即删除元素），则不能在数组上使用“for each”样式迭代，因为它会干扰迭代。如果您真的想在迭代时从数组中删除一个元素，则需要使用“旧样式”迭代。[此处](https://stackoverflow.com/questions/992901/how-do-i-iterate-over-an-nsarray)的另一个 Stack Overflow 帖子很好地展示了如何使用允许您对数组进行变异的旧样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:50:27.080

如果从中插入或删除对象，则不能对数组使用“for x in y”迭代。您必须使用一个好的老式数组，或者您可以保留对要删除的对象的引用，然后再将其删除：

```
NSObject *messageNameToRemove;
NSObject *messageTextToRemove; 
for (UITextView *text in messagetext) 
        {
        for (UITextView *name in messagename) 
        {

            if ([text isKindOfClass:[UITextView class]] && text.tag == button.tag && text.tag== name.tag)
            {

               [imageView removeFromSuperview];
               messageNameToRemove = [messagename objectAtIndex:button.tag -1];
               messageTextToRemove = [messagetext objectAtIndex:button.tag -1];
            }
         }

[messagename removeObject:messageNameToRemove];
[messagetext removeObject:messageTextToRemove]; 
```

# google-sheets - 总结谷歌表格中的每一秒单元格

> ID：11457477
> 
> 赞同：1
> 
> 时间：2012-07-12T17:38:37.037
> 
> 标签：google-sheets, google-sheets-formula

这是我在 Google 电子表格中遇到的情况：

![电子表格](../Images/dc81fbc4bd9862b4f16b74dc86a951fa.png)

我需要总结黄线中的每个第二个单元格（看图片），不包括`FALSE`红线语句下方的那些。如果这些语句对解决这个问题有任何重要性，那么它们将被写在两个合并的单元格中。在这个例子中，正确的数字应该是：`4.00`, `4.00`,作为最终答案。`8.00``16.00`

我在各种 Excel 论坛中进行了一些研究，发现这一行应该可以用来总结以单元格开头的单个列中的每个第二个单元`B3`格：

```
= SUM(IF(MOD(ROW($B$3:$B$22) - ROW($B$3) + 1, 2) = 0, $B$3:B$22, 0)) 
```

我根据自己的情况对此进行了调整（暂时忽略了关于 TRUE-FALSE 检查的事实）：

```
= SUM(IF(MOD(COLUMN($E$6:$N$6) - COLUMN($E$6) + 1, 2)=0, $E$6:N$6, 0)) 
```

不幸的是，它在 Google 电子表格中对我不起作用。最后，我想出了为此目的正确工作的公式：

```
 = SUM(IF($E$2 = "TRUE", $F6, 0), IF($G$2 = "TRUE", $H6, 0), IF($I$2 = "TRUE", $J6, 0), IF($K$2 = "TRUE", $L6, 0), IF($M$2 = "TRUE", $N6, 0)) 
```

问题是，以这种方式构造公式会使其变得非常长并且太不方便（因为将在左侧添加数百列）

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:47:32.610

如果您使用列进行逻辑突破，这将很容易解决。

例如，在第 7 列中输入以下两个公式：

E7：

```
=if(E2="TRUE",E6,0) 
```

F7：

```
=if(E2"TRUE",E7,0) 
```

然后你可以对这行测试求和。

不幸的是，Google Doc 的公式并不总是像 Excel 那样先进，因此有时您必须采取变通方法才能使事情成为可能。

话虽这么说......如果你真的想要谷歌文档的多合一公式解决方案......试试这个：

```
=SUMIF(E2:N2,"TRUE",E6:N6)+SUMIF(E2:N2,"TRUE",F6:N6) 
```

魔术发生在第二个 SUMIF 中，注意它以 F6 开头，因此将 sum-array 偏移 1。要实现只需将公式中的字母“N”更改为表格中的最后一列。

# php - 简单的 php 程序显示没有输出或错误消息

> ID：11457485
> 
> 赞同：0
> 
> 时间：2012-07-12T17:39:34.360
> 
> 标签：php

这是我在 oop php 中的第一个程序。它非常简单，我想将数值添加到变量中。并且程序必须输出 2。

```
 <?php
    class MyClass  
    {  
        public $a = 1;  

        public function abc()  
        {  
            if ($a=1){
                $a+1;   
            }  
        }   
    }  

    $obj = new MyClass;  

    echo $obj->abc;  
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:41:29.927

除了gview的回答：

```
if ($a=1){
    $a+1;   
} 
```

应该：

```
if ($a == 1){
    $a = $a + 1;   
} 
```

`=`运算符用于赋值，而不是用于比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:40:54.957

abc() 函数不返回任何内容。因此你没有输出。如果添加：

```
return $a; 
```

你会在回声中得到一些东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:41:38.823

你没有返回你的结果

```
public function abc()  
{  
   if ($a==1){
      $a++;   
   }  

   return $a;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:42:27.813

我想你忘了从 abc() 返回值

```
 public function abc()  
        {  
            if ($a=1){
                $a+1;   
            }  
            return $a;
        } 
```

# java - Java 如何解决这个无类型的泛型方法？

> ID：11457488
> 
> 赞同：4
> 
> 时间：2012-07-12T17:39:47.093
> 
> 标签：java, generics, casting, weak-linking

今天我遇到了一个让我非常想知道的函数。因此，让我们假设这个简单的结构以进行澄清。

```
public class Animal{

  public String getName(){ return null; }

}

public class Dog extends Animal{

  @Override
  public String getName(){
    //I'm aware that not any Dog's name is 'Pluto', but its just a Sample ;)
    return "Pluto"
  }

}

public class Cat extends Animal{

  protected final String mName;  

  public Cat(String name){
    mName = name;
  }

  @Override
  public String getName(){
     //cats have different names, because the internet loves cats
    return mName;
  }

  public void miao(){
    //just a dummy
  }
} 
```

现在将 a 分配`Dog`给一个`Animal`指针是绝对有效的，但像这样将一个分配`Animal`给一个`Dog`指针是无效的：

```
Animal animal = new Dog(); //valid, any Dog is at least an Animal
Dog dog = new Animal();  // invalid, of course not any Animal is a Dog! 
```

让我们假设一个 AnimalCage 类，其中“魔术”发生：

```
public class AnimalCage{

  private ArrayList<Animal> mCage = new ArrayList<Animal>();

  public addAnimal(Animal animal){
    mCage.add(animal);
  }

  // HERE is where the "Magic" happens:
  public <A extends Animal> A getAnimalByName(String name){
    //try catch block not mandatory
    try{
      for (Animal a: mCage){
        if (name.equals(a.getName()) return (A)a; 
      }
    } catch(ClassCastException cce){}
    return null;
  }
} 
```

使用`AnimalCage`可以做到这一点：

```
//all valid
AnimalCage cage = new AnimalCage();
Dog dog = new Dog();
Cat cat = new Cat("Mauzi");
Cat cat2 = new Cat("Garfield");
cage.add(dog);
cage.add(cat);
cage.add(cat2);
// and later get it back
//will return dog
Dog pluto = cage.getAnimalByName("Pluto"); 
//will find nothing and return null
Dog snoopy = cage.getAnimalByName("Snoopy);
//will raise ClassCastException and return null 
snoopy = cage.getAnimalByName("Mauzi"); 
//will return Mauzi
Animal mauzi = cage.getAnimalByName("Mauzi"); 
```

所以我可以在不显式转换的情况下做任何事情。这使我得出这样的假设，即`Erasures`在运行时不会被删除，尽管我知道得更好。在我认为我必须至少给出一个关于像这个函数一样投射什么的指标之前：

```
public <A extends Animal> A getAnimalByName(String name, Class<A> animalClass){
  try{
    for (Animal a: mCage){
      if (name.equals(a.getName()) return (A)a;          }
  } catch(ClassCastException cce){}
  return null;
}

//use
Dog dog = cage.getAnimalByName("Pluto", Dog.class); 
```

我真的很想知道 Java 如何让我在猫/狗上分配动物，以及它必须投射的动物的专业化

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T17:59:15.273

我不太明白你的问题，但也许我可以澄清一些观点：

*   诸如此类的特征`<A extends Animal> A getAnimalByName(String name)`涉及一种称为*类型推断*的技术——即从赋值的左侧推断出`A`特定调用的实际类型。`getAnimalByName()`

    请注意，这是一个纯粹的编译时功能 - 代码如

    ```
    <A extends Animal> A getAnimalByName(String name) { ... }
    ...
    Dog dog = getAnimalByName("foo"); 
    ```

    编译时变成以下代码（由于类型擦除）：

    ```
    Animal getAnimalByName(String name) { ... }
    ...
    Dog dog = (Dog) getAnimalByName("foo"); 
    ```

*   如您所见，您的代码破坏了类型安全保证——当您进行强制转换时会发生这种情况`return (A) a`，并且编译器会发出警告。这是泛型的基本保证 - 如果您的代码在没有警告的情况下编译，它不会破坏类型安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:54:45.517

我不能 100% 确定这一点，但我怀疑它与[多态性](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)有关，并且编译器将首先寻找“本地”（在对象的直接类环境中）方法进行实现，然后再向上执行找到实现。

即使您可能将 Cat 视为 Animal，底层代码仍然会在使用 Animal 实现之前首先尝试找到 Cat 实现，因为当您实例化对象时，编译器知道该类。

因为 getName() 是为 Animal 定义的，所以假设它至少能够找到那个实现（即使 Cat 改变了它）。狗也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:09:45.193

在下面的代码中你永远不会遇到 ClassCastException，它表明泛型类型被擦除了，

```
public <A extends Animal> A getAnimalByName(String name, Class<A> animalClass){
    try {
        for (Animal a: mCage){
            if (name.equals(a.getName()) return (A)a;          
        }
    } catch(ClassCastException cce){}
    return null;
} 
```

如果你想让它写做一些事情：

```
public <A extends Animal> A getAnimalByName(String name, Class<A> animalClass){
    try {
        for (Animal a: mCage){
            if (name.equals(a.getName()) 
                return animalClass.cast(a);          
        }
    } catch(ClassCastException cce){}
    return null;
} 
```

# javascript - 加载 HTML 后在最后执行 JavaScript 代码

> ID：11457491
> 
> 赞同：0
> 
> 时间：2012-07-12T17:39:54.567
> 
> 标签：javascript, jquery, onload

我想在加载 HTML 后最后执行一个函数。我试过`onload`没有成功。我也试过了`ready`，但它仍然不起作用。这是我的代码。这再次放置在标题中：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#infowindow_content').html('test');
    });
</script> 
```

div 也由外部 JavaScript 文件设置。内容：

```
window.onload = initialize;

function initialize() {
    document.getElementById('infowindow_content').innerHTML = 'testa';
} 
```

它以以下方式包含在结束*正文*标记之前：

```
<script type="text/javascript" src="../lib/functions.js"></script> 
```

我试图将上面的代码放在结束*body*标记之前，但目前我不知道为什么这不起作用（我的 JavaScript 代码没有更改内容）。如果我之后在控制台上执行它一切正常。

**解决方案：**

我在 HTML 文件中设置了一个配置参数（语言）。在 JavaScript 文件中，我要求提供此值，并根据该值定义另一个内容。有时候可能就这么简单...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T17:41:35.537

尝试这个：

```
setTimeout(function() {
 $(document).ready(function() { 
     $('#infowindow_content').html('test');
 });
}, 20); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:53:37.170

I don't know the jQuery equivalent but try the native JS.

Since the `<body>` has the most HTML & loads after `<head>`...

```
document.body.onload=function(){
    yourFunction(args)
}
<body onload="yourFunction(args)">...</body> 
```

Or maybe the `window` object, since it's the root of every webpage DOM...

```
window.onload=function(){
    yourFunction(args)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:42:20.253

始终将 DOM 操作代码直接放在`</body>`标签之前。标头中的 JavaScript 只能调用到库，例如 jQuery。

# jquery - 是否可以通过 AJAX 请求加载 asp:controls 并使用 web 服务处理？

> ID：11457495
> 
> 赞同：0
> 
> 时间：2012-07-12T17:40:15.097
> 
> 标签：jquery, asp.net, ajax, web-services, user-controls

我想在我做之前确保它是可能的。我要做的是构建一个 treeView，它将通过 ajax 调用传递给客户端机器。客户端将能够通过树视图进行排序，这将发出服务器请求。服务器请求将通过“OnClick ping a webserver with some parameters”在客户端处理

我认为这是可行的，我不确定谁真正尝试过这个，如果有的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:42:30.697

您的 AJAX 调用将重新呈现 UpdatePanel。您可以对 UpdatePanel 的内容做任何您想做的事情，包括向其中添加树视图或修改现有树视图。简而言之，是的。

# jquery - 单击/激活 jQuery UI 选项卡时触发函数？

> ID：11457498
> 
> 赞同：5
> 
> 时间：2012-07-12T17:40:23.797
> 
> 标签：jquery, ajax, jquery-ui, post, jquery-ui-tabs

我正在使用 jQuery 选项卡，其中一个选项卡中的内容是通过 AJAX 调用检索的。但是我不想在单击选项卡（激活）之前触发呼叫，因为用户可能不一定会单击它。最好的方法是什么？

jQuery UI提供`select`和`show`选项卡的事件，但选择或显示*任何*选项卡时这些火灾，而不仅仅是一个特定的选项卡（据我所知）。

我还尝试将`click`事件分配给特定选项卡的 ID：

```
$("#my-tab").click(function(){
...
     $.post(URL, function(data){
          ...
     });
...
} 
```

但这似乎没有任何效果，并且永远不会触发呼叫。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-04-01T05:05:21.137

勾选的解决方案不再起作用，因为[jquery-ui 已更改](https://api.jqueryui.com/1.9/tabs/)。您还需要在整个选项卡集上调用选项卡功能，而不仅仅是一个选项卡。ui.index 需要更换。如果第二个面板的 id 为“tab2”，那么您可以使用：

```
$("#tabs").tabs({
    activate: function(event, ui) {
       if (ui.newPanel.selector == "#tab2") {
            alert("tab 2 selected");
       }
    }
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-12T17:47:33.237

Ui-tabs 提供了一个功能，当您选择一个选项卡时会触发该功能。

```
$( ".yourTab" ).tabs({
   select: function(event, ui) {
        if(ui.index == myTabIndex) {
            $.post(URL, function(data){
              ...
            });
        }
   }
}); 
```

**注意**用于`activate`新版本。

[参考](http://api.jqueryui.com/tabs/#event-activate)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T17:46:34.003

你可以尝试这样的事情：

```
/*tab placeholder*/.tabs({
    select: function(event, ui) {
       if(ui.item.id === "my-tab"){
           //explicitly trigger mouse click on tab
           $(ui.item).trigger('click');
       }
    }
});
//------------------
$("#my-tab").click(function(){
    alert('something')
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T17:47:35.560

该`select`事件有一个`ui`参数，您可以在其中检查`index`所选选项卡的 。这个 SO 问题有很多例子： [jQuery UI Tabs Get Current Selected Tab Index](https://stackoverflow.com/questions/300078/jquery-ui-tabs-get-currently-selected-tab-index)

然后，您可以在检查`index`选项卡后进行 ajax 调用。

编辑：您在此处的官方 Jquery UI 文档中也有许多示例：http: [//docs.jquery.com/UI/Tabs](http://docs.jquery.com/UI/Tabs)

# android - 如何更新安卓时间

> ID：11457502
> 
> 赞同：0
> 
> 时间：2012-07-12T17:40:31.970
> 
> 标签：android, time

我正在使用 android TAB 进行一些应用程序开发。在我的应用程序中，我从另一个应用程序（其他设备通过 TCP 套接字向我的应用程序提供）获取 UTC 时间。一旦我收到这个，我需要用接收时间更新时间。是否有任何api可以更改系统时间..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:54:05.683

```
public static boolean setCurrentTimeMillis (long millis) 
```

Sets the current wall time, in milliseconds. **Requires the calling process to have appropriate permissions.** [although Only system process can change the time]

**User apps cannot set the time. Only the system processes can. This is for security, but also because I think it won't have much effect-- the time does reset from the radio via network time.**

[reference link](http://groups.google.com/group/android-developers/browse_thread/thread/855ae4fe695d3e70?pli=1)

# entity-framework - 从数据库加载时映射属性的顺序

> ID：11457513
> 
> 赞同：2
> 
> 时间：2012-07-12T17:41:24.357
> 
> 标签：entity-framework, c#-4.0, mapping, instantiation, setter

假设我有这个代码：

```
public bool Important { get; set; }

private bool _dependsOnImportant;

public bool DependsOnImportant
{
    get;
    set 
    {
        if (value && !Important)
            throw new InvalidOperationException();
        _dependsOnImportant = value;

    }
} 
```

我想保护将 DependsOnImportant 设置为 true，这样只有在 Important 为 true 时才有可能。这是 POCO 课程。根据：[Entity Framework 4.1 - Code first。EF 不会覆盖我的虚拟成员吗？](https://stackoverflow.com/questions/7007045/entity-framework-4-1-code-first-doesnt-ef-override-my-virtual-members)从数据库加载对象时，EF 将使用我的 setter。当调用 DependsOnImportant 设置器时，如何确定已使用数据库中的数据设置了重要信息？EF 是否足够聪明，可以检测到一个 setter 正在使用另一个 setter 并首先加载该数据？我不这么认为。我认为使用默认构造函数创建一个新对象（将所有字段设置为默认值），然后调用 setter 来填充对象。

所以我的问题是：我们能否确定调用 setter 的顺序？但最重要的是：我们想拥有这些知识吗？

# jquery - 加载 div 中的所有图像后执行函数

> ID：11457520
> 
> 赞同：7
> 
> 时间：2012-07-12T17:41:30.180
> 
> 标签：jquery, load

我想用 jQuery 获取 div 的高度，在这个 div 中，有一些图像在加载时会改变这个 div 的大小：

但使用下面的代码，它在加载图像之前给了我 div 的高度

```
$(document).ready(function() {
        $(".link_module").each(
            function () {
                maxheight = Math.max(maxheight,$(this).height());
            }
        ).height(maxheight);
}); 
```

我已将代码更改为此，但没有任何变化：

```
$(document).ready(function() {
    $(".link_module img").load(
        function (){
            $(".link_module").each(
                function () {
                    maxheight = Math.max(maxheight,$(this).height());
                }
            ).height(maxheight);
        }
    )
}); 
```

谁能帮我更改代码以达到我的目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T17:51:14.237

您可以使用[`$(window).load()`](https://developer.mozilla.org/en/DOM/window.onload)which 在文档及其资产完全加载时触发，包括所有对象和图像：

> load 事件在文档加载过程结束时触发。至此，文档中的所有对象都在 DOM 中，所有图片和子帧都加载完毕。

```
$(window).on('load', function() {
    $(".link_module").each(
         function () {
            maxheight = Math.max(maxheight,$(this).height());
         }
    ).height(maxheight);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T17:50:20.663

试试这个

```
$(document).ready(function() {
   var $this = $(this);
   $(".link_module img").load(
      function (){
          $(".link_module").each(function () {
            maxheight = Math.max(maxheight,$this.height());
          }).height(maxheight);
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:49:13.347

试试这个。让我知道它是否有效。

```
var childW=0
$(".link_module").children().each(function(){    
    $("img").load(function() { 
     childW+=$(this).outerWidth();
     });
}); 
```

# ios - 没有 IVAR，AVAudioPlayer 无法播放

> ID：11457527
> 
> 赞同：1
> 
> 时间：2012-07-12T17:42:02.133
> 
> 标签：ios, avfoundation

在了解类别之前，我在生成的 NSManagedObject 子类中为我的实体声明了一个方法：

```
// UserRecording.h

#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>
#import <AVFoundation/AVFoundation.h>

@interface UserRecording : NSManagedObject {
    AVAudioPlayer *audioPlayer;
}

@property (nonatomic, retain) NSDate * dateCreated;
@property (nonatomic, retain) NSData * audioData;
@property (nonatomic, retain) NSString * name;

-(void) URplay;

@end 
```

这是实现：

```
// UserRecording.m

#import "UserRecording.h"

@implementation UserRecording

@dynamic dateCreated;
@dynamic audioData;
@dynamic name;

-(void) URplay {
    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithData:self.audioData error:&error];
   [audioPlayer play];
}

@end 
```

当我了解类别时（通过斯坦福 iTunes U 视频），我将代码移到了一个类别中。但是声音停止了播放。唯一的区别是没有声明的实例变量（IVAR）。事实上，我在我的旧代码中对其进行了测试。上面的代码播放音频，但这段代码没有（在模拟器中）：

```
// UserRecording.h

#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface UserRecording : NSManagedObject

@property (nonatomic, retain) NSDate * dateCreated;
@property (nonatomic, retain) NSData * audioData;
@property (nonatomic, retain) NSString * name;

-(void) URplay;

@end 
```

和实施：

```
// UserRecording.m

#import "UserRecording.h"
#import <AVFoundation/AVFoundation.h>

@implementation UserRecording

@dynamic dateCreated;
@dynamic audioData;
@dynamic name;

-(void) URplay {
    NSError *error;
    AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithData:self.audioData error:&error];
   [audioPlayer play];
}

@end 
```

也许它与ARC有关？但无论如何，我能做什么？您不能在类别中声明实例变量，这样就不行了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:48:37.593

它与ARC有关，因为您的 AVAudioPlayer 在您实例化它后立即被释放，因为当您离开范围时，ARC 局部变量被释放，尝试为它声明一个属性，您不需要 ivar 本身：

在实现中的头文件或接口声明中：

```
@property (strong, nonatomic) AVAudioPlayer *audioPlayer; 
```

在实施中：

```
@synthesize audioPlayer = _audioPlayer; 
```

最后一部分隐式地`_audioPlayer`为您的属性创建了一个 ivar。您可以直接访问它，但我建议仍然扔 setter `self.audioPlayer =`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:48:18.030

我在解释我在 Apple 开发者论坛[上学到的东西：](https://devforums.apple.com/message/695729)

由于 ARC，局部变量在离开作用域时将被释放。所以在方法中声明的 AVAudioPlayer 将在它有机会播放之前消失。虽然在某些情况下可以添加 IVAR，但这里不是。原因是您无法将 IVAR 添加到类别中。详细地说，上面的 NSManagedObject 子类是由 XCode 生成的——如果我向实体添加了 IVAR，当我更改实体并重新生成时，它会被 XCode 覆盖。

因此，解决方案是重新考虑我的持久性 AVAudioPlayer 应该去哪里。我可能会添加一个持久的 AVAudioPlayer* 作为该类别方法的参数，并在调用该方法时将其传递。

# java - 如何正确停止使用这么多 CPU 的命令队列循环？

> ID：11457529
> 
> 赞同：0
> 
> 时间：2012-07-12T17:42:13.547
> 
> 标签：java, multithreading, arraylist

我有一个while循环来检查包含程序要执行的命令的arraylist是否为空。显然，如果不是空的，它会做一些事情，但如果是现在，我只有一个 Thread.sleep(1000) 用于其他。这使得与之交互的任何东西都相当缓慢。有没有办法让它运行的线程阻塞，直到添加新命令？（它在自己的线程中运行，所以这对我来说似乎是最好的解决方案）或者有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T17:44:59.103

您可以使用`wait()`and让向列表中*添加*`notify()`某些内容的线程通知消费者线程有要读取的内容。但是，这需要适当的同步等。

 *但是解决问题的更好方法是使用 a`BlockingQueue`代替。根据定义，它们是同步类，出队将适当地阻塞并在添加内容时唤醒。[`LinkedBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)如果您希望队列不受限制，这是一个很好的类。当[`ArrayBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)您希望将有限数量的项目存储在队列中（或`LinkedBlockingQueue`将整数传递给构造函数）时，可以使用 。如果`queue.add(...)`队列已满，则如果队列已满，则将阻塞。

```
BlockingQueue<Message> queue = new LinkedBlockingQueue<Messsage>();
...
// producer thread(s) add a message to the queue
queue.add(message);
...
// consumer(s) wait for a message to be added to the queue and then removes it
Message message = queue.take();
...
// you can also wait for certain amount of time, returns null on timeout
Message message = queue.poll(10, TimeUnit.MINUTES); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T17:45:32.363

将 a[`BlockingQueue<E>`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)用于您的命令。
在上面的链接中有一个很好的例子来说明如何使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T17:54:24.027

更好的解决方案是使用 ExecutorService。这结合了一个队列和一个线程池。

```
// or use a thread pool with multiple threads.
ExecutorService executor = Executors.newSingleThreadExecutor();

// call as often as you like.    
executor.submit(new Runnable() {
    @Override
    public void run() {
        process(string);
    }
});

// when finished
executor.shutdown(); 
```*

# python - 在 python winpaths 中添加一个额外的 \

> ID：11457532
> 
> 赞同：0
> 
> 时间：2012-07-12T17:42:17.247
> 
> 标签：python, windows

将python与windows一起使用我试图让我的程序查看是否`Dropbox.exe`存在，如果它不存在，则不会发生任何事情，然后程序将运行。我使用 print appdata 作为调试功能，这就是它打印的内容：`C:\Users\Me\AppData\Roaming` 我认为问题在于它需要打印`C:\\Users\\me\\AppData\\Roaming\\`，所以我可以将最后一部分添加为`\\Dropbox\\bin\\Dropbox.exe`

```
import winpaths
appdata = winpaths.get_appdata()
print appdata

try:
   with open('appdata\Dropbox\bin\Dropbox.exe') as f: pass
except IOError as e:
   print 'dropbox cant be found' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:43:40.487

首先，您应该对路径使用正斜杠，因为反斜杠用于转义特殊字符，并且正斜杠可以正常工作，即使在 Windows 下也是如此。或者，使用原始字符串 ( `r"C:\some\path"`)。有关为什么要这样做的示例：

```
>>> print("\path\to\random")
andom   o
>>> print("/path/to/random")
/path/to/random
>>> print(r"\path\to\random")
\path\to\random 
```

做你想做的事，看看[os.path.join()](http://docs.python.org/library/os.path.html#os.path.join)加入两个部分：

```
>>> import os
>>> os.path.join("/path/to", "some/file")
'/path/to/some/file' 
```

请注意，我使用的是 Linux，所以这会产生一个 linux 样式的路径，但是，在 Windows 下它会相应地调整。

所以在你的情况下：

```
with open(os.path.join(appdata, 'Dropbox/bin/Dropbox.exe')) as f:
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:44:29.393

由于反斜杠转义字符串中的字符，您可能会遇到错误。使用原始字符串来防止这种情况：

```
with open(r'appdata\Dropbox\bin\Dropbox.exe') as f: 
```

此外，要向路径名添加额外的位，请查看[`os.path`](http://docs.python.org/library/os.path.html)模块，尤其是[`os.path.join`](http://docs.python.org/library/os.path.html#os.path.join).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:46:49.320

您似乎没有在 open 中使用 appdata 变量：

```
with open(appdata + r'\Dropbox\bin\Dropbox.exe') as f: pa 
```

# c# - RavenDB 附件 - 功能怎么办？

> ID：11457533
> 
> 赞同：8
> 
> 时间：2012-07-12T17:42:20.310
> 
> 标签：c#, .net, nosql, ravendb

我有一个文件输入控件。

```
 <input type="file" name="file" id="SaveFileToDB"/> 
```

假设我浏览到**C:/Instruction.pdf**文档并单击提交。在提交时，我想将文档保存在 RavenDB 中，然后再检索它以供下载。我看到这个链接[http://ravendb.net/docs/client-api/attachments](http://ravendb.net/docs/client-api/attachments) 说.. 这样做..

```
Stream data = new MemoryStream(new byte[] { 1, 2, 3 }); 

documentStore.DatabaseCommands.PutAttachment("videos/2", null, data,
  new RavenJObject {{"Description", "Kids play in the garden"}}); 
```

我没有遵循 1,2,3 在这里的含义以及在命令中说视频/2 的含义...如何在我的情况下使用这两行来使用它.. 将 word/pdfs 保存在 ravendb 中。 .如果有人以前做过这样的事情，请指教。

我不清楚一件事..附件是如何存储的。如果我想存储附件本身（比如 pdf），它会独立存储在 ravendb 中。我只是将附件的密钥存储在与之关联的主文档中？如果是这样，那么 pdf 物理存储在 ravendb 的什么位置？我可以看吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T18:35:41.623

1,2,3 只是示例数据。它试图解决的是您创建一个任何您想要的内存流，然后在 PutAttachment 方法中使用该内存流。以下是临时的，未经测试，但应该可以工作：

```
 using (var mem = new MemoryStream(file.InputStream)
        {
            _documentStore.DatabaseCommands.PutAttachment("upload/" + YourUID, null, mem,
                                                          new RavenJObject
                                                              {
                                                                  { "OtherData", "Can Go here" }, 
                                                                  { "MoreData", "Here" }
                                                              });
        } 
```

**编辑其余问题**

1.  附件是如何存储的？我相信这是一个 json 文档，其中一个属性保存附件的字节数组
2.  “文档”是独立存储的吗？是的。附件是一个特殊的文档，它没有被索引，但它是数据库的一部分，因此复制之类的任务可以工作。
3.  “我应该”将附件的密钥存储在与之关联的主文档中吗？是的，您会引用密钥，并且任何时候您想获得它，您只需向 Raven 索要具有该 ID 的附件。
4.  pdf 是否物理存储在 ravendb 中？是的。
5.  你能看见它吗？不，它甚至出现在工作室里（至少据我所知）

**编辑更正和更新的示例**

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Upload(HttpPostedFileBase file)
    {
        byte[] bytes = ReadToEnd(file.InputStream);
        var id = "upload/" + DateTime.Now.Second.ToString(CultureInfo.InvariantCulture);
        using (var mem = new MemoryStream(bytes))
        {
            DocumentStore.DatabaseCommands.PutAttachment(id, null, mem,
                                                          new RavenJObject
                                                          {
                                                              {"OtherData", "Can Go here"},
                                                              {"MoreData", "Here"},
                                                              {"ContentType", file.ContentType}
                                                          });
        }

        return Content(id);
    }

    public FileContentResult GetFile(string id)
    {
        var attachment = DocumentStore.DatabaseCommands.GetAttachment("upload/" + id);
        return new FileContentResult(ReadFully(attachment.Data()), attachment.Metadata["ContentType"].ToString());
    }

    public static byte[] ReadToEnd(Stream stream)
    {
        long originalPosition = 0;

        if (stream.CanSeek)
        {
            originalPosition = stream.Position;
            stream.Position = 0;
        }

        try
        {
            var readBuffer = new byte[4096];

            int totalBytesRead = 0;
            int bytesRead;

            while ((bytesRead = stream.Read(readBuffer, totalBytesRead, readBuffer.Length - totalBytesRead)) > 0)
            {
                totalBytesRead += bytesRead;

                if (totalBytesRead == readBuffer.Length)
                {
                    int nextByte = stream.ReadByte();
                    if (nextByte != -1)
                    {
                        var temp = new byte[readBuffer.Length*2];
                        Buffer.BlockCopy(readBuffer, 0, temp, 0, readBuffer.Length);
                        Buffer.SetByte(temp, totalBytesRead, (byte) nextByte);
                        readBuffer = temp;
                        totalBytesRead++;
                    }
                }
            }

            byte[] buffer = readBuffer;
            if (readBuffer.Length != totalBytesRead)
            {
                buffer = new byte[totalBytesRead];
                Buffer.BlockCopy(readBuffer, 0, buffer, 0, totalBytesRead);
            }
            return buffer;
        }
        finally
        {
            if (stream.CanSeek)
            {
                stream.Position = originalPosition;
            }
        }
    }

    public static byte[] ReadFully(Stream input)
    {
        byte[] buffer = new byte[16 * 1024];
        using (MemoryStream ms = new MemoryStream())
        {
            int read;
            while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, read);
            }
            return ms.ToArray();
        }
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-13T08:18:57.807

*   附件是如何存储的？

它作为二进制数据存储在 RavenDB 中。它不存储为 json。

*   “文档”是独立存储的吗？

这里没有文档，您有一些与附件关联的元数据，它不是单独的文档。

*   “我应该”将附件的密钥存储在与之关联的主文档中吗？

是的，没有办法查询。

*   pdf 是否物理存储在 ravendb 中？

是的

*   你能看见它吗？

仅当您直接进入附件时，例如`http://localhost:8080/static/ATTACHMENT_KEY`

它不会显示在 UI 中

# eclipse - 如何在 Eclipse Juno 中恢复旧式窗口停靠？

> ID：11457539
> 
> 赞同：6
> 
> 时间：2012-07-12T17:42:35.800
> 
> 标签：eclipse, eclipse-cdt

我最近开始在 Fedora Linux 上使用 Eclipse Juno (4.2)。在之前的 Eclipse 版本中，我可以简单地单击源文件名并将其拖动到屏幕边缘，然后用鼠标拆分我的窗口。现在，当我单击+拖动 Eclipse 时，会出现一些绿色轮廓，如果不按键盘上的 Enter，我无法弄清楚如何接受更改。有谁知道是否有可能恢复鼠标可以做所有事情的先前行为？谢谢！

编辑：听起来 Eclipse 中可能存在错误，至少在使用 Fedora 17 64 位时是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:53:20.463

现在您有一个绿色矩形，表示释放鼠标按钮时将占用的区域，但是过程仍然相同，您必须将编辑器拖放到所需区域...

只需单击左键移动鼠标，您会注意到绿色矩形发生变化，当您有一个带双边框的矩形时，您可以释放鼠标按钮...

# javascript - 从javascript中的查询字符串获取数据

> ID：11457545
> 
> 赞同：0
> 
> 时间：2012-07-12T17:43:19.590
> 
> 标签：javascript, jquery, json

我对从一页到另一页获取数据非常陌生，我使用查询字符串来传递数据。看起来像这样：

```
?redesigndata={"jsondata": "{\"images\":[ {\"src\":\"images/bgset.jpg\"},{\"src\":\"images/ar019.png\"}]}","product_hardware": "silver","product_thread": "white","product_lining": "Blue","product_lining_loc": "images/lining/blue_80x32.jpg"} 
```

我如何`\`从中删除所有内容，然后使用 Javascript 或 jQuery 将其放入对象或任何类似的东西中：

```
redesigndata = {
    "jsondata": "{"images":[ {"src":"images/bgset.jpg"},{"src":"images/ar019.png"}]}",
    "product_hardware": "silver",
    "product_thread": "white",
    "product_lining": "Blue",
    "product_lining_loc": "images/lining/blue_80x32.jpg"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:45:09.137

为什么要删除那些反斜杠？没有它们，您的 JSON 将不再有效。现在您已经嵌套了 JSON，因此您可以像这样解析它（`str`作为`redesigndata`值）：

```
var redesigndata = JSON.parse(JSON.parse(str).jsondata); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:47:56.310

`location.search`将为您提供查询字符串（以 开头`?`）。剥去 ，`?`在 处分割它`=`，然后`JSON.parse`它。

```
var jsonStr = location.search.substring(1).split('=');
var obj = JSON.parse(unescape(jsonStr[1])); 
```

然后就可以解析了`jsondata`。

```
var jsondata = JSON.parse(obj.jsondata); 
```

# mysql - MySQL 总小时数（按费率）

> ID：11457550
> 
> 赞同：1
> 
> 时间：2012-07-12T17:43:31.803
> 
> 标签：mysql, sum

我有以下查询：

```
SELECT num_hours, rate, st.tech_code
FROM ost_hours ht
LEFT JOIN ost_staff st ON ht.tech_code = st.tech_code
LIMIT 0 , 30 
```

结果如下：

```
num_hours   rate            tech_code
20          overtime_rate   2
4           overtime_rate   1
10          normal_rate     1
1           overtime_rate   4
1           overtime_rate   4
2           normal_rate     4
3           normal_rate     4
1.5         normal_rate     6
1.5         normal_rate     6
2           normal_rate     4
1           normal_rate     4 
```

我希望它产生的是每个 tech_code 的每个费率的总和，例如，对于技术代码 4 和 6，它将如下所示：

```
total_hours rate            tech_code
8           normal_rate     4
2           overtime_rate   4
3           normal_rate     6 
```

我希望这很清楚，我所做的一切都导致了意外和不准确的数据。我认为我需要与 group by 有关，但每次我尝试某些东西时，结果都是完全奇怪的。

编辑：将令人困惑的“计数”更改为“总和”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:46:17.917

```
select sum(num_hours) as total_hours, 
    rate,
    st.tech_code
from ost_hours ht
left join ost_staff st on ht.tech_code = st.tech_code
group by rate,
    st.tech_code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:45:51.703

试试这个：：

```
SELECT SUM(num_hours) as num_hours, rate, st.tech_code
FROM ost_hours ht
LEFT JOIN ost_staff st ON ht.tech_code = st.tech_code 
group by rate 
```

# scala - 在 Scala 枚举中覆盖 toString 方法

> ID：11457559
> 
> 赞同：16
> 
> 时间：2012-07-12T17:44:24.427
> 
> 标签：scala, enums

如何覆盖“toString”以使此 Scala 代码的行为类似于以下 Java 代码。

Scala 中的代码

```
object BIT extends Enumeration {
     type BIT = Value
     val ZERO, ONE, ANY = Value

     override def toString() =
       this match {
       case ANY => "x "
       case ZERO=> "0 "
       case ONE => "1 "
     }
}

val b = ONE
println(ONE)  // returns ONE 
```

想要的 toString 行为应该产生与以下 Java 代码相同的输出。

```
public enum BIT {
    ZERO, ONE, ANY;

    /** print BIT as 0,1, and X */
    public String toString() {
        switch (this) {
        case ZERO:
            return "0 ";
        case ONE:
            return "1 ";
        default://ANY
            return "X ";
        }
    }
}

BIT b = ONE;
System.out.println(b); // returns 1 
```

我想我覆盖了错误的“toString”方法。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-12T17:49:02.207

首先，是的，您覆盖了错误的 toString 方法。您正在覆盖`BIT`对象本身的方法，这不是很有用。

其次，您只需简单地做这件事就容易多了

```
object BIT extends Enumeration {
  type BIT = Value
  val ZERO = Value("0")
  val ONE = Value("1")
  val ANY = Value("x")
} 
```

然后你可以做

```
println(BIT.ONE) //prints "1" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-09T17:59:45.790

如果要设置值和字符串，可以这样做：

```
scala> object BIT extends Enumeration {
     |   type BIT = Value
     |   val ZERO = Value(0, "0")
     |   val ONE = Value(1, "1")
     |   val ANY = Value("x")
     | }
defined module BIT

scala> BIT.ZERO.toString
res2: String = 0

scala> BIT.ZERO.id
res3: Int = 0

scala> BIT.ANY.id
res4: Int = 2

scala> BIT.ANY.toString
res5: String = x 
```

# sql-server - SCOM 可以监视 SQL 服务器堆栈转储吗？

> ID：11457561
> 
> 赞同：2
> 
> 时间：2012-07-12T17:44:30.527
> 
> 标签：sql-server, stack, system, dump

这是我第一次涉足 StackOverflow 的世界，所以希望我能在这里为您提供足够的信息。

我是我公司的实习生，老板给我分配了调查 System Center Operations Manager (SCOM) 是否可以监视 SQL Server 堆栈转储的任务。这可能吗？

我正在考虑使用查询在 Windows 应用程序日志中引发某种事件。然后我可以让 SCOM 监视 Windows 应用程序日志中的堆栈转储，然后发出警报。这是查询：

```
--To view SQL Server error logs in SQL Server 2005 / 2008 / 2008R2
DECLARE @HOURS INT
SET @HOURS = 24

CREATE TABLE #ErrorLog
(LogDate DateTime, ProcessInfo Varchar(50),
[Text] Varchar(4000))

INSERT INTO #ErrorLog
EXEC sp_readerrorlog

DELETE FROM #ErrorLog
WHERE LogDate < CAST(DATEADD(HH,-@HOURS,
GETDATE()) AS VARCHAR(23))

SELECT * FROM #ErrorLog 

DROP TABLE #ErrorLog 
```

我知道这个查询不会做我想做的事，但也许它是一个起点。

# c# - 如何删除 C# 中的“以管理员身份运行”要求

> ID：11457564
> 
> 赞同：7
> 
> 时间：2012-07-12T17:44:54.513
> 
> 标签：c#, admin

我有一个程序使用注册表来保存最近打开的 10 个文件。有一次我试图将它们保存在本地机器中，但决定将它们保存在当前用户中。在尝试让一切正常工作的过程中，我创建了一个清单来强制程序以管理员身份运行，我认为不再需要它了。我遇到的问题是我似乎无法删除该要求。

我有....将项目属性更改为“创建没有清单的应用程序”，添加了一个名为 app.manifest 的新项目，默认为 asInvoker 并更改了属性以使用该清单，重命名了任何包含单词 manifest 的文件文件名。

这些尝试都没有奏效。该程序仍以管理员身份运行。我一定错过了什么，但我不确定是什么。

这是 app.manifest 中的行

```
 <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
    <requestedExecutionLevel level="asInvoker" uiAccess="false" />
  </requestedPrivileges> 
```

谢谢您的帮助！！

加里

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T18:02:08.217

查看 Properties 文件夹中的 app.manifest 文件。删除以下行：

```
 <requestedExecutionLevel  level="requireAdministrator" uiAccess="false" /> 
```

添加以下行而不是此行：

```
 <requestedExecutionLevel  level="asInvoker" uiAccess="false" /> 
```

如果这没有帮助，首先确保您还从 bin\Debug 文件夹中删除了清单文件。简单地从解决方案中删除它并没有帮助，因为该文件可能仍然在输出文件夹中可用。

这就是为什么我认为您不应该从项目中删除清单文件，而是将其更改为按预期工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-19T05:13:26.200

虽然这个问题现在已经有一年多了，但我正在回答它，因为它可能会节省一天。

如果您已将应用程序配置为以管理员模式运行，而现在您想撤销这些权限，那么您需要执行以下步骤。

改变

```
<requestedExecutionLevel  level="requireAdministrator" uiAccess="false" /> 
```

到

```
<requestedExecutionLevel  level="asInvoker" uiAccess="false" /> 
```

右键单击您的**项目->清理您的解决方案->重建**您的解决方案，就是这样。

# c++ - 如何设置 std::vector 的初始大小？

> ID：11457571
> 
> 赞同：154
> 
> 时间：2012-07-12T17:45:30.353
> 
> 标签：c++, stl

我有一个`vector<CustomClass*>`，我在向量中放了很多项目，我需要快速访问，所以我不使用列表。如何设置向量的初始大小（例如设置为 20 000 个位置，以避免在插入新的时复制）？

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-07-12T17:49:04.033

```
std::vector<CustomClass *> whatever(20000); 
```

或者：

```
std::vector<CustomClass *> whatever;
whatever.reserve(20000); 
```

前者设置数组的实际大小——即，使其成为一个包含 20000 个指针的向量。后者将向量留空，但为 20000 个指针保留空间，因此您可以插入（最多）那么多指针，而无需重新分配。

至少根据我的经验，这两种方法中的任何一种都会在性能上产生巨大差异，这是相当不寻常的——但在某些情况下，任何一种都会影响正确性。特别是，只要不发生重新分配，向量中的迭代器就保证保持有效，并且一旦您设置了大小/保留空间，您就可以保证只要您不进行任何重新分配' t 增加超出此的大小。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-12T17:48:50.210

您需要使用 reserve 函数来设置初始分配的大小或在初始构造函数中进行。

```
vector<CustomClass *> content(20000); 
```

或者

```
vector<CustomClass *> content;
...
content.reserve(20000); 
```

当您使用`reserve()`元素时，`vector`将为（至少？）这么多元素分配足够的空间。元素中不存在`vector`，但内存已准备好使用。这可能会加快速度，`push_back()`因为内存已经分配。

# python - 在 Windows 上通过 SSH 获取桌面的屏幕截图

> ID：11457576
> 
> 赞同：0
> 
> 时间：2012-07-12T17:45:49.627
> 
> 标签：python, windows, pywin32

因此，我通过 WinSSHD（来自 Ubuntu）与 Windows XP 框建立了 SSH 会话。我编写了一个 Python 小程序，用 pywin32 截取屏幕截图。当我在正常的“桌面”会话中直接在 XP 机器上运行脚本时，一切正常，但如果我通过 SSH 进入并运行脚本，脚本将失败：

```
Traceback (most recent call last):                                                                                   
  File "ss.py", line 38, in <module>                                                                                 
    win32_ss()                                                                                                       
  File "ss.py", line 19, in win32_ss                                                                                 
    cDC.BitBlt((0, 0),(w, h) , dcObj, (0, 0), win32con.SRCCOPY)                                                      
win32ui.error: BitBlt failed 
```

我假设这是因为 SSH 会话与 XP 会话不同，并且无法访问“桌面”显示设备。我在 linux 中找到了有关如何执行此操作的参考（我认为这是我想要做的）：

```
DISPLAY=:0.0 import -window root /tmp/shot.png 
```

我想我正在寻找的是如何在 Windows 中执行此操作。同样，我使用的是 Python，可以安装任何需要的模块。我目前正在使用 pywin32，因为这比 PIL 快得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:44:25.863

我认为SSH是问题所在。我不确定 SSH 是否是最好的方法。最好的方法是在 Windows 端进行屏幕截图工作。我最近做了类似的事情。我想截取在 Internet Explorer 中打开的网页的屏幕截图，为此我使用 Selenium Webdriver 和 Python 绑定。

我所做的是我决定在 TCP 套接字的帮助下完成它。我刚刚编写了一个非常简单的 Python 脚本，它在 Windows 机器上打开一个 TCP 套接字并监听连接。一旦它收到连接，它就会执行截取屏幕截图的工作。因此，在您的情况下，它可以在那里截取屏幕截图并将其保存在本地，然后脚本可以通过 SSH 连接到您希望此文件所在的系统。

希望这可以帮助。

# android - Android inapp billing - BillingService 在 onServiceConnected 和 onServiceDisconnected 上出现编译错误

> ID：11457580
> 
> 赞同：6
> 
> 时间：2012-07-12T17:46:04.470
> 
> 标签：android, android-billing

我正在使用 Dungeons 应用程序示例，并且正在使用该示例中提供的 BillingService 类。

我正在使用 Java 6，@override 对我有用，但在 BillingService.java 中的这两个方法出现编译错误：

```
/**
 * This is called when we are connected to the MarketBillingService.
 * This runs in the main UI thread.
 */
@Override
public void onServiceConnected(ComponentName name, IBinder service) {
    if (Consts.DEBUG) {
        Log.d(TAG, "Billing service connected");
    }
    mService = IMarketBillingService.Stub.asInterface(service);
    runPendingRequests();
}

/**
 * This is called when we are disconnected from the MarketBillingService.
 */
@Override
public void onServiceDisconnected(ComponentName name) {
    Log.w(TAG, "Billing service disconnected");
    mService = null;
} 
```

有人能帮我理解为什么会这样吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T12:15:22.833

确保你的类实现了`ServiceConnection`接口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T08:04:07.670

应用内计费是一个开始的挑战。诀窍是让它在一个独立的项目中开始，然后做你所有的特定功能。相信我，勇敢地一起做这一切，不值得花时间开始。我希望谷歌在整体应用计费方面有所改进，使其易于实施、理解和调试。不久前我在博客上写过它，并创建了一个 helloworld 项目供人们下载并开始工作。我希望它也能帮助你。

[使用 Eclipse 调试 Android 应用内计费](https://stackoverflow.com/questions/11193754/debug-android-inapp-billing-using-eclipse/11196437#11196437)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-21T14:02:24.100

我认为您应该简单地从这两种方法中删除 @Override 装饰器。我正在使用 Google BillingService 类，这是我的方法：

```
public void onServiceConnected(ComponentName name, IBinder service)
{        
    mService = IMarketBillingService.Stub.asInterface(service);
    runPendingRequests();
} 
```

您正在实现一个接口，而不是使用抽象方法扩展一个类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T23:24:41.480

您可能会尝试使用默认编译选项。

右键单击（或按住 Control 单击）项目并选择“属性”

选择“Java 编译器”

取消选中“启用项目特定设置”

Eclipse 会提示重新编译，应该没问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-26T08:28:27.897

安装您的应用签名...所以转到 android 工具导出签名的应用程序...。现在它已签名，您可以取回查询。至少在物理设备上这是我的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-24T00:51:03.873

右键单击项目选择-> Android工具选择->修复项目属性

这为我修复了它（我相信这是一个 Java 编译器设置抛出它）。

# .net - 如何按特定顺序处理消息？

> ID：11457582
> 
> 赞同：0
> 
> 时间：2012-07-12T17:46:11.600
> 
> 标签：.net, architecture, queue, message-queue

我的应用程序必须按特定顺序处理来自客户端的消息。如果消息包含相同的标签，这些消息必须按顺序处理，它们不能在不同的线程中同时处理。具有相同标签的消息可能来自不同的客户端。标签不是预先指定的。如何实现这个要求？是否有开箱即用的解决方案，具有此功能的队列，以及其他...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:24:56.820

这看起来类似于“优先级队列”数据结构，但不是优先级，而是处理通过标签区分它们的消息。

不确定确切的需求是什么，但实现起来应该很简单：

```
class TagQueue  {
    Dictionary<Tag, Queue> _queues;
    void Enqueue(tag, payload) {
        _queues[tag].Enqueue(payload);
    }
    Payload Dequeue(tag) {
        return _queues[tag].Dequeue(); 
    }
    Ienumerable<Tag> Tags { get { return _queues.Keys } };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:27:28.563

我自己找到了答案。 [http://docs.masstransit-project.com/en/latest/overview/keyideas.html#sagas](http://docs.masstransit-project.com/en/latest/overview/keyideas.html#sagas)

# r - gWidgetsWWW2 错误

> ID：11457589
> 
> 赞同：0
> 
> 时间：2012-07-12T17:46:40.370
> 
> 标签：r, gwidgets, rserve

您好，我已经安装了 FastRWeb、Rserve 和 gWidgetsWWW2 软件包并按照说明进行操作。在我的 Linux (Ubuntu 10.04.3) 上使用 Apache Web 服务器的各个站点上。

我已经加载了 test.R 应用程序，当我转到 URL 时

//localhost/cgi-bin/R/app?app=test 如下 github 站点

[https://github.com/jverzani/gWidgetsWWW2/tree/master/inst/FastRWeb](https://github.com/jverzani/gWidgetsWWW2/tree/master/inst/FastRWeb)

我可以在我的浏览器中看到该应用程序。当我单击“单击查看消息”按钮时，没有任何反应。我可以检查我的浏览器上的元素，并在执行 runHandler.R 函数时看到错误。我看到的错误是：

rawToChar(request$body) 中的错误：找不到对象“请求”

当我查看标题时，我看到 POST 正在传递请求，但 R 没有将其视为对象？

```
Request URL:http://localhost/cgi-bin/R/gwappAJAX/runHandler
Request Method:POST
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:77
Content-Type:application/json
Host:localhost
Origin:http://localhost
Referer:http://localhost/cgi-bin/R/app?app=test
User-Agent:Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko)                     Chrome/myIP Safari/536.11
X-Requested-With:XMLHttpRequest
Request Payload
{"id":"ogWidget_ID3","signal":"click","value":null,"session_id":"0BJS1QKLM9"}
Response Headersview source
Connection:Keep-Alive
Content-Encoding:gzip
Content-Length:78
Content-Type:text/html; charset=utf-8
Date:Thu, 12 Jul 2012 17:17:50 GMT
Keep-Alive:timeout=15, max=96
Server:Apache/2.2.14 (Ubuntu)
Vary:Accept-Encoding 
```

在设置中错过了什么吗？为什么我的 R 会话没有看到请求对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:48:57.077

你最好在 Rook 下运行这样的脚本，FastRWeb 设置的响应性要差得多。我发现在本地端口（如 9000）上运行 Rook 并使用 apache 反向代理到该端口可以正常工作，尽管它不能像 FastRWeb 解决方案那样扩展。

话虽如此，它是否在 Rook through 本地运行`load_app`？如果是这样，那么可能是较新的 FastRWeb + RServe 无法正常工作。自从西蒙更新了他的工作后，我还没有测试过这个。我希望今年夏天能做到这一点。使用 websockets 与 R 通信的承诺应该绕过这个响应问题。

# c# - 发生未知错误 8004005

> ID：11457591
> 
> 赞同：2
> 
> 时间：2012-07-12T17:46:49.043
> 
> 标签：c#, visual-studio-2010

当我在 Visual Studio for Windows Phone 2010 中创建基本应用程序以链接到 Web 浏览器然后输入这个

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    string site = textBox1.Text;    

    webBrowser1.Navigate(new Uri(site, UriKind.Absolute));
} 
```

当我构建应用程序时，它显示为成功。但是，当我运行调试并且模拟器启动时。当我按下按钮导航到某个 URL 说 google.com 这是我在文本框 1 中提到的文本时，会发生错误

System.SystemException 发生未知错误。错误：80004005

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:56:24.767

`Uri`唯一具有完整 URL的工作以提到的方案开头，`http://www.msn.com` 我认为您应该使用`Uri.TryCreate()`

```
string site = textBox1.Text;
Uri uri;
if (Uri.TryCreate(site, UriKind.Absolute, out uri))
{
    webBrowser1.Navigate(uri);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:11:44.693

URI 需要方案类型（例如 http://）。没有它，你很可能会得到一个看起来像相对 URI 的东西。

使用[URI builder](http://msdn.microsoft.com/en-us/library/y868d5wh)，当未指定方案时默认为 http ：

```
UriBuilder builder = new UriBuilder(textBox1.Text);
webBrowser1.Navigate(builder.Uri); 
```

# security - 如何保护 SOA 风格的 Symfony2 应用程序

> ID：11457596
> 
> 赞同：4
> 
> 时间：2012-07-12T17:47:06.860
> 
> 标签：security, rest, symfony, soa

所以我们正在Symfony2 中开发一个Web 应用程序（简短的社论：Symfony2 太棒了），沿着SOA 的思路。所有数据都在我们的 jQuery 驱动的前端和格式化为 la JSON 的 Symfony2 后端之间来回传输，这就是问题所在。

Symfony2 提供了一个强大的安全系统，但它似乎取决于“安全层”拦截表单提交并使用表单编码的 POST 数据来处理身份验证尝试。这对我们的应用程序来说是有问题的，因为我们只使用 JSON。从我的立场来看，对*除*身份验证之外的每个请求和响应都使用 JSON 是......坦率地说，布尔表。难闻的气味，坏的juju，不管你怎么称呼它。

现在，Symfony2 允许创建事件侦听器，这些侦听器连接到与请求的生命周期和完整响应相关的一系列事件。我们使用其中一个钩子来解码每个 POST 请求附带的 JSON，以便相关控制器只需要担心直接使用 php 数组，而无需进行任何解码或反序列化或其他操作。

所以我们问题的症结在于“安全层”期望它从表单提交中获得表单编码的 POST 数据（通常在后端首先服务的页面上）。我们准备为它提供一个从 JSON 化数据创建的 PHP 数组。那怎么办？我们应该吗：

*   创建一个自定义身份验证服务，用于处理由 le JSON 制成的数组？
*   调整我们的请求挂钩以检查每个请求的目标 uri，然后将请求的 JSON 按摩成“安全层”期望的表单编码字符串？
*   调整“安全层”以便它可以使用 JSON 转换的 php 数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:18:06.317

创建自己的身份验证提供程序相当简单。您可以按照此[食谱文章](http://symfony.com/doc/master/cookbook/security/custom_authentication_provider.html)稍作修改以处理您的 JSON 请求，而不是该示例中使用的 WSSE。

# wpf - 从 Process.GetCurrentProcess().MainWindowHandle 设置 window.owner

> ID：11457603
> 
> 赞同：1
> 
> 时间：2012-07-12T17:47:29.960
> 
> 标签：wpf, winforms, mainwindow

我在一个 Win Form 应用程序中，在文档的某个地方我需要调用这个用 wpf 编写的对话框，并且我想设置 window.owner。我发现获得应用程序主窗口的唯一方法如下。

我想用 Process.GetCurrentProcess().MainWindowHandle 设置 Window.Owner，但不知道如何将窗口句柄转换为窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:49:35.373

WindowInteropHelper类允许您使用 HWND（作为 ）设置 WPF 窗口的[所有者](http://msdn.microsoft.com/en-us/library/system.windows.interop.windowinterophelper.aspx)`IntPtr`。

在你的情况下，它应该是：

```
WindowInteropHelper wih = new WindowInteropHelper(theWpfWindow);
wih.Owner = Process.GetCurrentProcess().MainWindowHandle;

theWpfWindow.ShowDialog(); 
```

# html - css 未在屏幕清除缓存、更改浏览器等上更新

> ID：11457613
> 
> 赞同：3
> 
> 时间：2012-07-12T17:47:47.153
> 
> 标签：html, css, margin, padding

我有一个奇怪的问题。无论我对样式的 css 做`.blurb`什么，屏幕上都没有任何变化。我已经清除了 3 个浏览器（FF、Chrome、Safari）中的缓存，但似乎没有对[实时站点](http://massagebybodyworx.com)进行任何更改。

我试图`.blurb`在容器内居中，这样无论文本说什么，它的右侧和左侧都会有相等的空间。

目前，我正在使用以下内容：

```
.blurb {
    padding-bottom: 100px;
    padding-top: 100px;
    margin: 0 auto;
}

.blurb p {
    font-family: alexandria;
    font-size: 193%;
    font-weight: normal;
    line-height: 1.5;
}

<div class="blurb">
    <p style="text-decoration:underline;color:#f20000;"><span style="color:#282828;">You look like you could use a massage.<br />BodywoRx is here to help.</span></p>
</div><!-- end blurb --> 
```

为了消除一些困惑，我有两个相关的问题。

**1.**无论我通过清除缓存、更改浏览器等方式做了什么，我都看不到对 CSS 的实时更改。

**2.**我需要看到的变化是 .blurb 在容器中居中，这样无论文本说什么，它的右边和让边都有相等的空间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:52:20.473

要使文本居中，您需要使用`text-align`：

```
.blurb {
    padding-bottom: 100px;
    padding-top: 100px;
    margin: 0 auto;
    text-align: center;
} 
```

如果您只是希望内容居中，则需要确保其父容器具有固定宽度或`blurb`具有固定宽度。现在，它占用了其父容器（可能是网页）的 100%，导致`margin:auto`在水平角度上无效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T17:56:25.937

`<p>`是块级元素。因此，它将占据容器的整个宽度，除非它的宽度是固定的。您可以`<span>`通过使父级具有`text-align: center`. 为了使`<span>`拥有`text-align: left`，使用`display: inline-block`。

```
<p class="blurb">
    <span>
        You look like you could use a massage.<br />BodywoRx is here to help.
    </span>
</p> 
```

CSS：

```
.blurb { text-align: center; }
.blurb > span { text-align: left; display: inline-block; } 
```

见：http: [//jsfiddle.net/Wexcode/h2njQ/](http://jsfiddle.net/Wexcode/h2njQ/)

# java - 不修改集合时抛出 Java ConcurrentModificationException

> ID：11457617
> 
> 赞同：1
> 
> 时间：2012-07-12T17:48:01.420
> 
> 标签：java, android

我在一个 ArrayList 上做了一个非常简单的“过滤器”，它偶尔会抛出一个 ConcurrentModifificationException，但是 AFAICT 没有发生任何修改......代码非常简单......

```
public ArrayList<JSONObject> getContributionsByInstallation(int installationID, ArrayList<JSONObject> list){
    ArrayList<JSONObject> filtered = new ArrayList<JSONObject>();
    for(JSONObject object : list) {
        try {
            int fk = object.getInt("exhibit_fk");
            if(fk == installationID){
                filtered.add(object);
            }
        } catch(JSONException e){

        }
    }
    return filtered;
} 
```

我错过了什么？

/编辑：添加堆栈跟踪

```
07-12 12:39:24.135: E/AndroidRuntime(2350): FATAL EXCEPTION: main
07-12 12:39:24.135: E/AndroidRuntime(2350): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.whatever.light/com.whatever.light.InstallationDetailActivity}: java.util.ConcurrentModificationException
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.os.Looper.loop(Looper.java:130)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.app.ActivityThread.main(ActivityThread.java:3691)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at java.lang.reflect.Method.invokeNative(Native Method)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at java.lang.reflect.Method.invoke(Method.java:507)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at dalvik.system.NativeStart.main(Native Method)
07-12 12:39:24.135: E/AndroidRuntime(2350): Caused by: java.util.ConcurrentModificationException
07-12 12:39:24.135: E/AndroidRuntime(2350):     at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:576)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at com.whatever.light.data.ContributionsData.getContrubtionsByInstallation(ContributionsData.java:81)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at com.whatever.light.data.ContributionsData.getRandomCommentContribution(ContributionsData.java:62)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at com.whatever.light.installations.ContributeCommentModuleFragment.showComment(ContributeCommentModuleFragment.java:102)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at com.whatever.light.installations.ContributeCommentModuleFragment.onCreateView(ContributeCommentModuleFragment.java:86)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:844)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1053)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1371)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:499)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.app.Activity.performStart(Activity.java:3817)
07-12 12:39:24.135: E/AndroidRuntime(2350):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1624)
07-12 12:39:24.135: E/AndroidRuntime(2350):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:40:03.223

几乎可以肯定，另一个线程正在修改所引用的对象`list`——这个方法不是。寻找可能发生这种情况的所有可能方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:05:25.447

您也可以使用 CopyOnWriteArrayList 来避免 concurrentModificationException.. 您可以参考这个链接，它说明了 arrayList 和 CopyOnWriteArrayList..

[http://techvivek.wordpress.com/2009/08/29/difference-between-arraylist-and-copyonwritearraylist/](http://techvivek.wordpress.com/2009/08/29/difference-between-arraylist-and-copyonwritearraylist/)

# shell - 将多个文件的最后一行复制到一个文件中

> ID：11457618
> 
> 赞同：2
> 
> 时间：2012-07-12T17:48:09.057
> 
> 标签：shell, unix, tail

我在一个目录中有许多文件。我想浏览目录，并将每个文件的最后一行放入一个新文件中。IE，这个新文件应该包含目录中每个文件的最后一行。我尝试使用

```
tail -n 1 | cat > newfile.txt 
```

但是在每一行之间插入了源文件名。我也尝试编写一个 shell 脚本，但它唯一成功的是创建目标文件，然后无限期地运行而无需添加数据。这样做的正确方法是什么？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:52:13.647

使用`find`：

```
find . -type f -exec tail -n1 {} >> newfile.txt \; 
```

或者，如果您不想遍历子目录：

```
find . -depth 1 -type f -exec tail -n1 {} >> newfile.txt \; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:55:25.467

至少`coreutils` `tail`有一个`-q`不输出标题的标志，所以很简单：

```
tail -q -n1 * > OUTFILE 
```

会工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T17:57:49.650

`find`有效，但如果您在 sh/bash/ksh/zsh 中，for 循环也有效。

```
for filename in *; do
    tail -n 1 "$filename" >> /path/to/newfile.txt
done 
```

请注意，如果`newfile.txt`与您在 for 循环上运行的目录位于同一目录中，您可能会得到奇怪的结果`*`。

# c++ - 为初学者阐明 C++ 中的类定义和实现的一些细节

> ID：11457631
> 
> 赞同：0
> 
> 时间：2012-07-12T17:49:12.987
> 
> 标签：c++, class, constructor, derived-class

我是 C++ 的初学者，正在尝试通过查看示例来学习它。这是一个我不完全理解其含义的类的示例定义：

```
class MyClass{
public:
  std::string name;
  void *data;

  MyClass(const std::string& t_name, void *t_data) : name(t_name), data(t_data) {}
}; 
```

这是我的理解： name 和 *data 是类的变量， MyClass(...) 是构造函数。: 的含义是左侧类派生自右侧类。但是，这部分代码的含义是什么：

```
MyClass(const std::string& t_name, void *t_data) : name(t_name), data(t_data) {} 
```

以下是问题：

1.  什么是“t_data”和“t_name”？它们是“数据”和“名称”的初始值吗？在这里使用 t_ 的原因是什么？
2.  上一行中的 : 是什么意思？
3.  该行末尾的 {} 是什么？

谢谢您的帮助。TJ

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T17:56:03.940

> 什么是“t_data”和“t_name”？它们是“数据”和“名称”的初始值吗？

它们是传递给构造函数的参数。如果一个对象被创建为

```
MyClass thing("Fred", some_pointer); 
```

然后，在构造函数中，`t_name`具有值`"Fred"`并且`t_data`具有 的值`some_pointer`。

> 在这里使用 t_ 的原因是什么？

有些人喜欢对参数进行标记，以便为类成员赋予不同的名称，但除非您愿意，否则无需这样做。

> 上一行中的 : 是什么意思？

这标志着*初始化程序列表*的开始，它初始化类成员变量。以下初始化`name(t_name), data(t_data)`程序使用构造函数的参数初始化这些成员。

> 该行末尾的 {} 是什么？

那是构造函数的主体，就像一个函数主体。他们中的任何代码都将在成员初始化后运行。在这种情况下，没有其他事情可做，所以身体是空的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T17:50:46.347

使用[初始化列表来初始化成员](http://www.parashift.com/c++-faq-lite/init-lists.html)是一个很好的 C++ 实践。

1.  t_name, t_data 是参数名称。

    *   “t_”前缀仅用于将其与名称相似的成员字段区分开来。
    *   成员正在使用类似于函数调用的语法进行初始化，但它是正确的初始化/构造，因此您应该这样考虑。
2.  冒号表示初始化列表的开始
3.  空大括号 {} 表示构造函数的主体（在成员初始化之后发生）为空。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T17:55:24.033

MyClass(const std::string& t_name, void *t_data) : name(t_name), data(t_data) {}

是您的类的构造函数，您应该使用字符串和 void* 参数初始化您的类，然后使用传递的参数初始化您的类字段（名称和数据）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:22:26.803

对于初学者来说，这是一个有点压缩的例子，但你问的问题很好。

1) t_data 和 t_name 是进入构造函数的参数。当您创建此类的实例时，您将执行以下操作：

```
MyClass * myNewClassInstance = new MyClass("My name", &myData); 
```

现在构造函数将“我的名字”（以 std::string 形式）作为 t_name 并将指向 myData 的指针作为 t_data。

2）*这里的冒号不是指派生类。* 这里它说要遵循一个“初始化列表”。查看 Prashant 的答案链接，或者对此进行一些挖掘。基本上，这是将成员变量设置`name`为`t_name`（这是我们在上面示例中传递给构造函数的 std::string）和`data`（`t_data`void 指针）。（见下面的附加说明）

3) {} 是构造函数的实际定义。它是空的——这里没有代码。所以构造函数要做的就是初始化成员变量（由初始化列表定义），仅此而已。

现在让我们以更适合初学者的格式查看**完全相同的课程：**

```
// The declaration of MyClass.  This would often show up in a header (.h) file
class MyClass {
public:
  // Member variables
  std::string name;
  void * data;

  // Declaration of constructor -- we haven't defined what actually does here, just
  // what parameters it takes in.
  MyClass(const std::string& t_name, void * t_data);
}

// We declared what the class "looks like" above, but we still have to define what
// the constructor does.  This would usually show up in a .cpp file

// This is the constructor definition.  We have to specify that it's part of the
// The extra "MyClass::" specifies that it's part of the MyClass namespace that we
// declared above.
MyClass::MyClass(const std::string& t_name, void * t_data)
{
  // Set our member variables to what was passed in.
  this.name = t_name;
  this.data = t_data;
} 
```

上面的版本做了完全相同的事情（初始化列表和构造函数中的传统初始化之间有一些细微的差异，你可能还不关心——再次，如果你好奇，请参阅其他参考资料）。

很明显，这会占用更多空间，这正是经常使用压缩程度更高的格式的原因。但是当你刚刚开始时，这样做会让事情变得更加清晰。当涉及到函数（即构造函数）时，了解声明和定义之间的区别很重要，因为您发布的示例通常在它们分开时同时进行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T18:24:11.630

> 我是 C++ 的初学者，正在尝试通过查看示例来学习它。

无论出于何种原因，这在 C++ 中比在 Perl、Python、Java 甚至 C 中更难做到。我不推荐这门课程；我不推荐这门课程。相反，您可能会投资一[本好书](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)。

> 这是我的理解：

让我们从那个开始。我认为您并没有像您声称的那样理解。

> name 和 *data 是类的变量

不`name`，并且`data`是类的变量。它们的类型分别是`std::string`和`void*`。

> MyClass(...) 是构造函数。

是的。

> : 的含义是左侧类派生自右侧类。

不，`:`在不同的情况下意味着不同的东西。在您的示例中使用它的上下文中，它表示后面有一个初始化列表。

> 但是，这部分代码的含义是什么：
> 
> 什么是“t_data”和“t_name”？

它们是构造函数中的局部变量。具体来说，它们是函数的传入参数。

> 它们是“数据”和“名称”的初始值吗？

这就是它们在本示例中的使用方式。具体来说，它们被传递给初始化器列表中的`data`和`name`初始化器。

> 在这里使用 t_ 的原因是什么？

这纯粹是这个特定作者的约定。我以前从未见过那个大会。

> 上一行中的 : 是什么意思？

它引入了一个初始化列表。此构造仅在构造函数成员函数中使用。每个命名成员都由列出的值初始化。（注意：值不需要来自参数——它们可以是任何合法的表达式，所以：`MyClass(int ii) : i(ii), j(cos(0) / 2), k(&global_variable) {}`可能是合法的构造函数。）

> 该行末尾的 {} 是什么？

构造函数成员函数的主体。由于构造函数的所有工作都在初始化列表中完成，因此函数的主体是空的。

# javascript - JS中的字符串修改问题

> ID：11457634
> 
> 赞同：3
> 
> 时间：2012-07-12T17:49:19.420
> 
> 标签：javascript, jquery

我有一个像“word_count”这样的字符串。如何使用 JavaScript 以优雅的方式将其转换为“WordCount”？我的决定对我来说似乎太复杂了。我会非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T17:57:37.387

```
function titleCase(str)
{
    return str.split("_")
        .map(function (s) { return s.charAt(0).toUpperCase() + s.slice(1); })
        .join("");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T17:51:31.150

看看[这个](http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/)。我不想在这里复制粘贴所有内容，但这似乎正是您要寻找的。

这是修改以适应您的要求的功能：

```
String.prototype.toCamel = function(){
    return this.replace(/((^|\_)[a-z])/g, function($1){
                return $1.toUpperCase().replace('_','');});
}; 
```

[在这里](http://jsfiddle.net/fp76Z/)，它正在发挥作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T17:59:37.213

您可以使用正则表达式匹配字符串开头的字母或下划线后的字母，并使用回调将字母转换为大写：

```
s = s.replace(/(?:^|_)([a-z])/g, function(m, g){
  return g.toUpperCase();
}); 
```

演示：http: [//jsfiddle.net/Guffa/ByU6P/](http://jsfiddle.net/Guffa/ByU6P/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T17:52:50.833

很简单，像这样：

```
var string = "word_count".split("_");
for(var i = 0; i<string.length;i++) {
    string[i] = string[i].charAt(0).toUpperCase() + string[i].substr(1);
}
var myNiceString = string.join(); 
```

如果要将其添加到 String 对象，可以这样做：

```
String.prototype.titleCase = function() {
    var split = this.split("_");
    for(var i = 0; i<split.length;i++) {
        split[i] = split[i].charAt(0).toUpperCase() + split[i].substr(1);
    }
    return split.join("");
} 
```

你会这样称呼它`"word_count".titleCase();`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T17:55:47.963

您可以使用如下函数：

```
var Pascalize = function(word) {
    var x = word;
    result = '';
    if(-1 != word.indexOf('_')) {
        x = word.split('_');
        for(var i=0;i<x.length;i++) {
            result += x[i].substr(0, 1).toUpperCase() + x[i].substr(1);
        }
    }
    if('' == result) { result = word; }
    return result;
};

var PascalCaseString = Pascalize("this_is_a_test");
// PascalCaseString value is now 'ThisIsATest' 
```

**[这是一个工作示例](http://jsfiddle.net/schawaska/GjuPK/)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T17:56:23.687

```
var str = "word_count";
var re = /\b(.)([^_]+)_(.)/;
var newWord = str.replace(re, function(m,f,t,l){ return f.toUpperCase() + t + l.toUpperCase();})
console.log(newWord); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T18:02:44.980

使用 jQuery，您可以执行以下操作：

```
var result = '';
$.each('word_count'.split('_'), function(idx,elem){
  result = result + elem.substr(0,1).toUpperCase() + elem.substr(1);
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-12T18:13:19.043

新版本（适用于任意数量`_`）：

```
function fixString(sString) {

    var aWords = sString.split("_"),
        sResults = "";

    for (var i in aWords)
        sResults += aWords[i].charAt(0).toUpperCase() + aWords[i].slice(1);

    return sResults;

} 
```

压缩形式：

```
function fixString(c){var d=c.split("_"),a="";for(var b in d){a+=d[b].charAt(0).toUpperCase()+d[b].slice(1)}return a}; 
```

老的：

```
function fixString(sString) {

    return sString.replace(/(.*)_(.*)/, function(sWhole, $1, $2, sWTF) {

        return ucfirst($1) + ucfirst($2);

    } )

    function ucfirst (str) {

        str += '';

        var f = str.charAt(0).toUpperCase();

        return f + str.substr(1);

    }

} 
```

...或压缩版本：

```
function fixString(b){return b.replace(/(.*)_(.*)/,function(e,c,f,d){return a(c)+a(f)});function a(d){d+="";var c=d.charAt(0).toUpperCase();return c+d.substr(1)}}; 
```

当然，这就像`fixString("word_count")`你想要的那样使用`WordCount`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-08T13:47:12.060

我已经查看了所有答案，但没有一个完全符合我的要求。我想要一个转换为 camelCase（不是 PascalCase）的*幂等*函数，并且我喜欢 String 原型扩展方法（尽管显然这并不总是最好的方法）。

无论如何，这就是我结束的地方：

```
String.prototype.camelize = function(){
    var pascalCase = this.replace(/((^|\_)[a-z])/g, function($1){
        return $1.toUpperCase().replace('_','');
    });
    return pascalCase.charAt(0).toLowerCase() + this.slice(1);
}; 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-07-12T17:54:07.090

```
var aStringLike = "word_count";

// magic follows

aStringLike = "WordCount"; 
```

# amazon-web-services - 基于 IP 地址的 Amazon S3 文件访问策略

> ID：11457635
> 
> 赞同：33
> 
> 时间：2012-07-12T17:49:30.653
> 
> 标签：amazon-web-services, security, amazon-s3, policy

有没有办法根据客户端 IP 地址限制对存储在 Amazon S3 中的文件的访问？

我有一个文件存储在那里，只能通过特定的 IP 地址访问。这个怎么做？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-12T17:58:50.673

是的，虽然我自己没有使用过这个。

S3 支持使用“访问策略语言”对存储桶和其中的对象进行精细控制。有特定的白名单和黑名单 IP 声明可用。但是，您必须编写 APL 语句并上传它们。

[http://docs.amazonwebservices.com/AmazonS3/latest/dev/AccessPolicyLanguage.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/AccessPolicyLanguage.html)

以下是 2 个条件部分示例：

白名单

```
"Condition" :  {
       "IpAddress" : {
          "aws:SourceIp" : ["192.168.176.0/24","192.168.143.0/24"]
      }
} 
```

黑名单

```
"Condition" :  {
       "NotIpAddress" : {
          "aws:SourceIp" : ["192.168.176.0/24","192.168.143.0/24"]
      }
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-07-10T00:46:16.570

Amazon 在其 S3 文档中的“存储桶策略示例”下的“[限制对特定 IP 地址的访问](https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html#example-bucket-policies-use-case-3)”中对此进行了描述：

> 此语句中的条件标识 54.240.143.* 允许的 IP 地址范围，但有一个例外：54.240.143.188。

```
{
  "Version": "2012-10-17",
  "Id": "S3PolicyId1",
  "Statement": [
    {
      "Sid": "IPAllow",
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:*",
      "Resource": "arn:aws:s3:::examplebucket/*",
      "Condition": {
         "IpAddress": {"aws:SourceIp": ["54.240.143.0/24", "1.2.3.4/32" ]},
         "NotIpAddress": {"aws:SourceIp": "54.240.143.188/32"} 
      } 
    } 
  ]
} 
```

您可以在 AWS S3 控制台中添加类似的内容。选择您的存储桶，单击属性选项卡，然后单击权限。单击“添加存储桶策略”并将其粘贴到弹出对话框的表单中。

我修改了 Amazon 的示例，以显示如何通过提供 JSON 数组而不是字符串来将多个 IP 范围包含在策略中。“1.2.3.4/32”的“aws:SourceIp”条目意味着单个 IP 地址 1.2.3.4 也被授予访问权限。

# performance - 哪些反向代理适用于 node.js socket.io 应用程序？

> ID：11457636
> 
> 赞同：0
> 
> 时间：2012-07-12T17:49:32.860
> 
> 标签：performance, node.js, reverse-proxy

我目前有几个在 Apache 反向代理后面运行的应用程序。我这样做是因为我有一个用于多台服务器的公共 IP 地址。我使用 VirtualHosts 将正确的应用程序代理到正确的服务。例如：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName nagios.myoffice.com

    ProxyPass /  http://nagios.myoffice.com/
    ProxyPassReverse / http://nagios.myoffice.com/
</VirtualHost> 
```

这适用于 PHP、Django 和 Rails 等应用程序，但我想开始尝试使用 Node.js。

我已经注意到 Apache 代理后面的应用程序无法处理像我直接访问它们时那样高的负载。很可能是因为 Apache 配置不理想（可能没有足够的同时连接）。

我想在 node.js 中试验的最酷的功能之一是 socket.io 功能，我担心它会真正暴露性能问题。特别是因为，据我了解，socket.io 将保持我宝贵的少数 Apache 连接之一不断打开。

你能推荐一个我可以在这种情况下使用的反向代理服务器，它可以让我使用多个虚拟主机，并且不会过多地扼杀 node.js 应用程序的性能或妨碍 socket.io 实验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:54:00.160

I recommend node-http-proxy. Very active community and proven in production.

FEATURES

*   Reverse proxies incoming http.ServerRequest streams
*   Can be used as a CommonJS module in node.js
*   Uses event buffering to support application latency in proxied requests
*   Reverse or Forward Proxy based on simple JSON-based configuration
*   **Supports [WebSockets](https://github.com/nodejitsu/node-http-proxy/)**
*   Supports [HTTPS](https://github.com/nodejitsu/node-http-proxy/)
*   Minimal request overhead and latency
*   Full suite of functional tests
*   Battled-hardened through **production usage** @ [nodejitsu.com][0]
*   Written entirely in Javascript
*   Easy to use API

Install using the following command

```
npm install http-proxy 
```

Here is the [Github](https://github.com/nodejitsu/node-http-proxy/) page and the [NPM page](http://search.npmjs.org/#/http-proxy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:59:49.513

虽然这引入了一项新技术，但我建议使用 nginx 作为前端。nginx 是一个用 c 语言编写的快速且坚固的服务器，非常擅长反向代理。像节点一样，它是事件驱动的和异步的。

您可以使用 nginx 将请求转发到您正在运行的各种 nodejs 服务器，可以是负载平衡，也可以取决于 url（因为它可以执行诸如重写之类的操作）。

# android - 在 Android 4.0.4（冰淇淋三明治）上以纵向模式拉伸的 Flash 全屏视频

> ID：11457642
> 
> 赞同：0
> 
> 时间：2012-07-12T17:49:48.963
> 
> 标签：android, actionscript-3, air, galaxy, samsung-mobile

我注意到，当我尝试在运行 Android 4.0.4 (ICS) 的 Galaxy Nexus S 上以全屏模式播放 Flash 视频时，如果我处于纵向模式，视频会出现垂直拉伸。

我尝试为视频设置特定的宽度和高度：

```
this.m_player.setActualSize(640, 360); 
```

奇怪的是，当播放器第一次在纵向模式下全屏时，它总是会显得拉伸，但如果我旋转到横向然后再次旋转回纵向模式，播放器将是我指定的大小。因此，当播放器首次加载时，播放器似乎忽略了我为其设置的任何特定大小。

以前有没有人在运行 Android 的三星 Galaxy Nexus S 手机上遇到过这种情况？这种行为有解决方法吗？

我更像是一个 Javascript 人，所以我对 Actionscript 并不太熟悉，但很高兴知道我不是唯一一个在 Android 上看到 Flash 视频这种行为的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:34:59.367

好的，事实证明，只需将以下内容添加到 Flash 嵌入代码中，就会使其仅在横向模式下呈现，从而防止它切换到纵向模式并出现“拉伸”。

由于某种原因，在 AS3 代码本身中设置 fullScreenAspectRatio 似乎不起作用，但这样做：

```
<param name="fullScreenAspectRatio" value="landscape"> 
```

# ruby-on-rails - 这两种设置 Selenium 驱动程序的方式有什么区别？

> ID：11457643
> 
> 赞同：0
> 
> 时间：2012-07-12T17:49:52.270
> 
> 标签：ruby-on-rails, ruby, selenium

在一个 Ruby on Rails 项目中，我发现了这个方法，其目标是根据环境检索 Selenium 驱动程序。（开发、测试或生产）

```
def driver
    @driver ||= begin
      if Rails.env.production?
        driver = Selenium::WebDriver.for :remote, url: 'http://localhost:4444/wd/hub'
      else
        driver = Selenium::WebDriver.for :firefox
      end
      driver.manage.timeouts.implicit_wait = 1
      driver
    end
  end 
```

当然，我阅读了官方文档，但仍然不是很清楚：

[http://code.google.com/p/selenium/wiki/RemoteWebDriver](http://code.google.com/p/selenium/wiki/RemoteWebDriver) - [http://code.google.com/p/selenium/wiki/FirefoxDriver](http://code.google.com/p/selenium/wiki/FirefoxDriver)

这两种方式（远程和Firefox）有什么区别？

特别是，对于删除的方式，为什么将指向的主机设置为 localhost...确实，如果选择了 localhost，为什么不选择 firefox 驱动程序呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T01:43:50.150

:remote 意味着您将使用在 :url 上运行 Selenium Server 的远程服务器。在这种情况下，硒服务器在本地主机上运行。因为没有识别浏览器，它将使用服务器设置的任何默认浏览器。

:firefox 意味着它将尝试在脚本运行的同一个盒子上使用 firefox。

您可以在 ruby​​bindings 的介绍页面上看到这两个示例。 [http://code.google.com/p/selenium/wiki/RubyBindings](http://code.google.com/p/selenium/wiki/RubyBindings)

对于更一般的文档资料，这可能是一个好地方... [http://selenium.googlecode.com/svn/trunk/docs/api/rb/index.html](http://selenium.googlecode.com/svn/trunk/docs/api/rb/index.html)

至于为什么有人会这样？也许在 prod 环境中，除了开发此代码的人之外，其他人根据它所在的平台（chrome，即 ff 等）控制 selenium 服务器（就像一些无法访问代码的 prod 人？）。我只是在这里猜测。

# image - 使用 express.js 和 node 上传文件，限制扩展

> ID：11457645
> 
> 赞同：5
> 
> 时间：2012-07-12T17:50:00.710
> 
> 标签：image, node.js, file-upload, express

我正在使用 express.js 和 node 处理文件上传，并让基本功能正常工作。我需要的是实施一些安全措施——即限制上传到某些格式（PNG、JPEG）。有没有一种简单的方法只允许某些格式？它会进入正文解析器吗？

```
app.use(express.bodyParser({
    uploadDir: __dirname + '/public/uploads',
    keepExtensions: true   }));

app.use(express.limit('4mb')); 
```

还有其他我应该考虑的安全措施吗？从图像中擦除 EXIF 数据通常是个好主意吗？

谢谢，

本

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T19:26:34.313

根据[connect's 的文档`bodyParser`](http://www.senchalabs.org/connect/bodyParser.html)，任何选项也会传递给[强大的](https://github.com/felixge/node-formidable)，它会执行实际的表单解析。

根据[强大的文档](https://github.com/felixge/node-formidable)，您可以传递自己的`onPart`处理程序：

> 传入Form.onPart（部分）
> 
> 如果您有兴趣直接访问多部分流，您可以覆盖此方法。这样做将禁用任何否则会发生的“字段”/“文件”事件处理，使您完全负责处理处理。
> 
> ```
> incomingForm.onPart = function(part) {
>   part.addListener('data', function() {
>     // ...
>   });
> } 
> ```
> 
> 如果您想使用强大的只为您处理某些部分，您可以这样做：
> 
> ```
> incomingForm.onPart = function(part) {
>   if (!part.filename) {
>     // let formidable handle all non-file parts
>     incomingForm.handlePart(part);
>   }
> } 
> ```

综上所述，您应该能够执行以下操作：

```
function onPart(part) {
    if(!part.filename || part.filename.match(/\.(jpg|jpeg|png)$/i)) {
        this.handlePart(part);
    }
}

app.use(express.bodyParser({onPart: onPart}); 
```

警告：我还没有测试过这些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:18:33.493

我找到了一个潜在的解决方案：

在您的中间件中，

```
 if (req.files[key].type != 'image/png' && req.files[key].type != 'image/jpeg'){
      res.send(403);
    } else {
      next(); 
    } 
```

更新：不过，这实际上并没有阻止文件上传。

# hibernate - Hibernate 4没有排序

> ID：11457647
> 
> 赞同：0
> 
> 时间：2012-07-12T17:50:21.820
> 
> 标签：hibernate, jpa, hibernate-4.x

我在实体中有一个 SortedSet。但是当我尝试获取它时，它并没有排序。我尝试使用hibernate或jpa，都不起作用。任何原因？（我的设置实体也实现了可比性）

```
 private SortedSet<News> news = new TreeSet<News>();

    public void setNews(SortedSet<News> news) {
    this.news = news;
}

    @OneToMany(fetch = FetchType.EAGER,  cascade = {CascadeType.PERSIST, CascadeType.MERGE })
    @JoinTable(name = "NEWSGROUP_NEWS", joinColumns = @JoinColumn(name = "NEWSGROUP_ID"), inverseJoinColumns = @JoinColumn(name = "NEWS_ID"))
    @OrderBy("title")
    @Sort(type=SortType.COMPARATOR, comparator=NewsComparator.class)
    public SortedSet<News> getNews() {
        return this.news;
    }

public static class NewsComparator implements Comparator<News>
    {

        @Override
        public int compare(News news1, News news2) {
            return news1.getTitle().compareTo(news2.getTitle());

        }

    } 
```

我的道

```
NewsGroup newsGroup = (NewsGroup)this.hibernateSessionFactory.getCurrentSession().get(NewsGroup.class, id); 
```

我还打印了 sql（打开了 show_sql），但它根本没有显示 order by。请指教。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:09:07.380

JMelnik 是对的，通过删除@Sort，它起作用了

# objective-c - forwardInvocation：返回值丢失

> ID：11457651
> 
> 赞同：5
> 
> 时间：2012-07-12T17:50:42.100
> 
> 标签：objective-c, ios, cocoa-touch, message-forwarding

我想在我的 SZNUnmanagedReference 类上使用消息转发。它具有以下属性：

```
@property (nonatomic, strong) NSSet *authors;
@property (nonatomic, strong) SZNReferenceDescriptor *referenceDescriptor; 
```

基本上，当 UnmanagedReference 的实例接收到消息`authorsString`时，它应该将其转发给`referenceDescriptor`具有名为 的方法`- (NSString *)authorsStringWithSet:(NSSet *)authors`。

所以，我写了这个`SZNUnmanagedReference.m`：

```
- (void)forwardInvocation:(NSInvocation *)anInvocation {

    SEL aSelector = anInvocation.selector;

    if ([NSStringFromSelector(aSelector) isEqualToString:NSStringFromSelector(@selector(authorsString))]) {
        NSMethodSignature *signature = [self.referenceDescriptor methodSignatureForSelector:@selector(authorsStringWithSet:)];
        NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];
        NSSet *authors = [NSSet setWithSet:self.authors];
        [invocation setSelector:@selector(authorsStringWithSet:)];
        [invocation setArgument:&authors atIndex:2];
        [invocation setTarget:self.referenceDescriptor];

        [invocation invoke];
    } else {
        [self doesNotRecognizeSelector:aSelector];
    }
}

- (BOOL)respondsToSelector:(SEL)aSelector {
    if ([super respondsToSelector:aSelector]) {
        return YES;
    } else if ([NSStringFromSelector(aSelector) isEqualToString:NSStringFromSelector(@selector(authorsString))] && [self.referenceDescriptor respondsToSelector:@selector(authorsStringWithSet:)]) {
        return YES;
    } else {
        return NO;
    }
}

- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector {
    NSMethodSignature *signature = [super methodSignatureForSelector:aSelector];
    if (!signature) {  
        signature = [self.referenceDescriptor methodSignatureForSelector:@selector(authorsStringWithSet:)];
    }
    return signature;
} 
```

这一切似乎都有效，`SZNReferenceDescriptor`类中的代码被执行。但是，我不知道如何`authorsString`返回。如果我正确理解了文档，我认为`referenceDescriptor`应该将结果发送回消息的原始发件人。但这似乎不起作用。在我的测试课中，`[unmanagedReference authorsString]`返回`nil`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T18:26:51.707

问题是您正在构建一个新`NSInvocation`对象，它的返回值在需要它的位置（消息调度“堆栈”的“顶部”）不可访问。运行时只知道它为您创建的那个（`forwardInvocation:`; 的参数就是它将使用其返回值的那个。那么，您所要做的就是设置*它的*返回值：

```
- (void)forwardInvocation:(NSInvocation *)anInvocation {

    if (anInvocation.selector == @selector(authorsString)) {
        id retVal = [self.referenceDescriptor authorsStringWithSet:self.authors];

        [anInvocation setReturnValue:&retVal];   // ARC may require some memory-qualification casting here; I'm compiling this by brain at the moment
    } else {
        [super forwardInvocation:anInvocation];
    }
} 
```

事实上，实际上没有必要创建新的调用；因为你只需要方法的返回值，你可以直接发送消息（如果你只是`authorsString`在 上实现，你也可以这样做`SZNUnmanagedReference`，而不是使用转发机制）。

另外，请注意，无需将选择器转换为字符串或从字符串转换来比较它们 -`SEL`可以使用相等运算符直接比较 s。

# javascript - 显示/隐藏和鼠标悬停 Javascript

> ID：11457653
> 
> 赞同：1
> 
> 时间：2012-07-12T17:50:47.353
> 
> 标签：javascript, html, css, mouseover, show-hide

我一直在研究 Show/Hide javascript，并通过鼠标悬停效果进一步推动它以实现我想要的。我已经设置了一个 Fiddle 以获得更好的可访问性。但是，我现在想通过最多 4 个不同的文本区域来推送它（“单击此处获取更多信息”），并且每个文本区域都会有更多的悬停文本，因为我试图在 HTML 代码本身中显示。我现在使用和编辑的 javascript 具有对应于“0”和“1”的“ID”，这不适用于我当前的 HTML 代码，因为它具有像“uu3308-10”（使用 Adob​​e Muse 制作）这样的时髦名称。**现在，我想知道我必须在 Javascript 中更改哪些变量才能使其正常运行**，有没有办法编译此代码，以便它与至少 11 个其他“单击此处获取更多信息”一起使用

注意：当前的 javascript 使 showMoreText2 出现在两个 showMoreText 区域下（希望一次只出现一个悬停文本）。

**单击此处获取小提琴->** [http://jsfiddle.net/TPLOR/vy6nS/](http://jsfiddle.net/TPLOR/vy6nS/)

谢谢，我希望这有足够的帮助。=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:08:08.920

有点hackish：（见[http://jsfiddle.net/vy6nS/30/](http://jsfiddle.net/vy6nS/30/)）

```
window.onload = function() {
    var elems1 = document.getElementsByClassName("expander");
    for (i = 0; i < elems1.length; i++) {
        elems2 = elems1[i].childNodes;
        for (x = 0; x < elems2.length; x++) {
            if (elems2[x].className == "toggle") elems2[x].onclick = function() {
                showMore(0, this);
            };
            else if (elems2[x].className == "showMoreText") {
                elems2[x].onmouseover = function() {
                    showChilds("block", this);
                };
                elems2[x].onmouseout = function() {
                    showChilds("none", this);
                };
            }
        }
    }
};

function get_nextsibling(n) {
    x = n.nextSibling;
    while (x.nodeType != 1) {
        x = x.nextSibling;
    }
    return x;
}

function showChilds(disp, elem) {
    get_nextsibling(elem).style.display = disp;
}

function showMore(disp, elem) {
    var children = elem.parentNode.childNodes;
    for (i = 0; i < children.length; i++) {
        if (disp == 0 && children[i].className == "showMoreText") {
            children[i].style.display = children[i].style.display == "none" ? "block" : "none";
        }
    }

}​ 
```

# linux - bash 找不到 HTK 命令

> ID：11457657
> 
> 赞同：0
> 
> 时间：2012-07-12T17:51:01.757
> 
> 标签：linux, bash, htk

我现在使用 HTK 已经有一段时间了，它曾经完美地工作过。迟到了（可能同时改变了一些环境变量，但不记得是哪些！），所有的 HTK 命令都是“找不到的”。例如，执行 HCompV 给出了一个

> bash: /usr/local/bin/HCompV: 没有这样的文件或目录

即使 HCompV 在 /usr/local/bin 中可见。重新编译和安装 HTK 是徒劳的。从已编译 HTK 的 bin 文件夹中运行 HCompV（或任何其他 HTK 命令）也给出了相同的错误。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:49:36.343

尝试

```
hash -d HCompV 
```

或者

```
hash -r 
```

[https://unix.stackexchange.com/questions/5609/how-do-i-clear-bashs-cache-of-paths-to-executables](https://unix.stackexchange.com/questions/5609/how-do-i-clear-bashs-cache-of-paths-to-executables)

重新编译的命令是什么？

```
make clean
./configure --prefix=/usr/local
make
sudo make install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T06:35:40.060

解决了！！我必须在我的 64 位 ubuntu 上重新安装 32 位库，尽管我之前已经安装了它。任何想法为什么这有帮助？

这就是我所做的：

> sudo apt-get install --reinstall ia32-libs
> 
> sudo apt-get install --reinstall libc6-i386

此[页面](https://superuser.com/questions/344533/no-such-file-or-directory-error-in-bash-but-the-file-exists)有更多详细信息。

谢谢你们的回复。你们真棒。

# java - 是否有任何 Java 组件采用 WSDL 并生成其描述的漂亮打印 HTML 页面？

> ID：11457658
> 
> 赞同：0
> 
> 时间：2012-07-12T17:51:10.897
> 
> 标签：java, soap, wsdl

是否有任何用 Java 编写的显示 HTML 页面的内容，其中展示了 SOAP API 的方法并允许您直接从页面测试方法？

像这样的东西：[http ://ws.cdyne.com/NotifyWS/PhoneNotify.asmx](http://ws.cdyne.com/NotifyWS/PhoneNotify.asmx)

在此先感谢，凯尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:12:17.967

面向 Java EE 开发人员的 Eclipse 就是这样做的。这是一个教程[http://wiki.eclipse.org/Using_Web_Service_Explorer_to_test_a_Web_service](http://wiki.eclipse.org/Using_Web_Service_Explorer_to_test_a_Web_service)

CXF 在生成端点时也会这样做，一旦它们被部署。

# c# - 无法让 SearchDialog 在 Mono for Android 应用程序中运行

> ID：11457660
> 
> 赞同：0
> 
> 时间：2012-07-12T17:51:15.107
> 
> 标签：c#, android, search, mono, xamarin.android

我花了太长时间试图让 SearchDialog 出现在我正在使用 Mono for Android 开发的 Android 应用程序中。我希望其他人可以看看并告诉我我做错了什么。

我一直在使用[Android 文档](http://developer.android.com/guide/topics/search/search-dialog.html#SearchableActivity)以及[另一个 StackOverflow 帖子](https://stackoverflow.com/questions/8525415/search-dialog-in-mono-android)来指导我，但没有运气。

模拟器上的搜索按钮似乎不起作用（鼠标悬停时甚至不会亮起），但我可以按 F5 并在 OnSearchRequested 方法中命中断点。我试图在运行时查看 SearchManager，但找不到任何提示。

我试图让我的启动器活动 (Activity1) 使用另一个活动 (SearchableActivity)。除了标准的 OnCreate 覆盖之外，SearchableActivity.cs 中没有实现。

一切都在命名空间“test1”中。

我生成的 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:versionCode="1" android:versionName="1.0" package="G.Clients">
  <uses-sdk android:minSdkVersion="14" />
  <application android:label="Our Clients" android:name="mono.android.app.Application" android:debuggable="true">
    <activity android:name="test1.SearchableActivity">
      <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
      </intent-filter>
      <meta-data android:name="android.app.searchable" android:resource="@xml/searchable" />
    </activity>
    <meta-data android:name="android.app.default_searchable" android:value="test1.SearchableActivity" />
    <activity android:label="Main" android:name="test1.Activity1">
      <meta-data android:name="android.app.default_searchable" android:value="test1.SearchableActivity" />
      <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
    </activity>
    <activity android:label="Clients" android:name="test1.ClientListActivity" />
    <provider android:name="mono.MonoRuntimeProvider" android:exported="false" android:initOrder="2147483647" android:authorities="G.Clients.__mono_init__" />
    <receiver android:name="mono.android.Seppuku">
      <intent-filter>
        <action android:name="mono.android.intent.action.SEPPUKU" />
        <category android:name="mono.android.intent.category.SEPPUKU.G.Clients" />
      </intent-filter>
    </receiver>
  </application>
  <uses-permission android:name="android.permission.INTERNET" />
</manifest> 
```

我的 searchable.xml（位于文件夹 Resources/xml）：

```
<?xml version="1.0" encoding=utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android" 
  android:label="search" android:hint="clients">
</searchable> 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:41:40.240

万一其他人偶然发现了这一点，我似乎错过了 xamarin.com 网站上的示例项目：[SearchableDictionary](http://samples.xamarin.com/Details/Android/5e197185-b5a5-4d37-9f47-67ce6526a5b9)

我能够根据这个工作示例对我自己的项目进行修改。

# visual-studio-2008 - Team Foundation Server (TFS) 和批量编辑

> ID：11457663
> 
> 赞同：0
> 
> 时间：2012-07-12T17:51:38.820
> 
> 标签：visual-studio-2008, tfs

在 Visual Studio 2008 中，我对 TFS 控制下文件夹中的配置文件中的某些文本进行了查找和替换。查找和替换 75 个配置文件中的替换文本。

显示一个消息框，说明文件被写保护，并询问我是否要“另存为...”或“覆盖”。我在所有这些上都选择了覆盖。

我看到所有文件都已更改，但没有从 TFS 中签出。通常，当我开始编辑文件时，它会自动检出并显示为待处理。但是，除了我目前使用的解决方案中的那个之外，没有一个待处理。

我怎样才能用一个描述批量签入所有其他 74 个文件，而不必一次一个地检查每个文件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:15:19.983

此解决方案使用 Visual Studio Team System 2008 Team Foundation Server Power Tools，可在此处找到：

[Visual Studio Team System 2008 Team Foundation Server 电源工具](http://www.microsoft.com/en-us/download/details.aspx?id=15836)

1) 更改您的文件。

2) 打开文件所在的命令提示符。

3) 运行以下命令：

```
"C:\Program Files (x86)\Microsoft Team Foundation Server 2008 Power Tools\TFPT.exe" online /diff 
```

4) 在打开排序的窗口中，您可以看到已编辑的文件。

5）选择已更改的文件并取消选择其他所有内容。

6) 将状态更改为待处理。

7) 转到 Visual Studio 并签入待处理文件。

# php - 如何禁止用户从多台计算机登录？

> ID：11457667
> 
> 赞同：1
> 
> 时间：2012-07-12T17:52:10.523
> 
> 标签：php, security, session

我有一个具有登录/注销功能的网站。我怎样才能确保，100%，同样在一种稳定的技术中，用户将无法从两台不同的计算机登录到同一个帐户？

Javascript 不能用于此，因为它很容易禁用它。

例如，.NET 有一个 Session_End 函数，该函数在用户中止与服务器的连接时执行。如何用 PHP 做到这一点？

谢了，兄弟们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:00:40.197

***注意：**此技术将在第二台登录时有效地注销第一台计算机上的帐户。*

当用户登录时，将用户的会话 ID 记录到数据库或等效项中。在每个页面请求上，确保用户的会话 ID 与存储在其帐户的存储中的会话 ID 匹配。来自具有不匹配会话 ID 的登录帐户的请求应该被拒绝并且用户应该被注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:01:44.877

这取决于你想走多深。最常见的：

*   在登录时创建一个唯一的会话 id cookie 并将其保存在数据库中
*   所有网页都会检查会话 cookie 以确保其有效
    *   如果会话无效，则将用户重定向到登录页面
*   当另一个用户尝试登录时，它会覆盖上一个会话
    *   这基本上踢出了第一个用户

大公司也会将 IP 地址存储在数据库中（因此会话 cookie 不会被窃取）

# c++ - C++标准库的头文件在哪里

> ID：11457670
> 
> 赞同：37
> 
> 时间：2012-07-12T17:52:17.123
> 
> 标签：c++, linux, stl, header-files, c++-standard-library

我想知道在我的文件系统上哪里可以找到 C++ 标准库的头文件。特别是我正在寻找向量模板的定义。我在 /usr/include/ 和各种子目录中进行了搜索。我还尝试了“locate vector.h”，它提出了许多向量的实现，但不是标准的。我错过了什么？（发行版是Gentoo）

背景：我正在分析一个库，该库大部分时间都在迭代向量，而 gprof 表明大部分时间都花在了

```
std::vector<int, std::allocator<int> >::_M_insert_aux(
  __gnu_cxx::__normal_iterator<int*, std::vector<
      int, std::allocator<int> > >, int const&) 
```

这可能是 std::vector::push_back 内部发生的情况，但我不确定。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-12T18:00:17.153

GCC 通常将标准 C++ 头文件安装在`/usr/include/c++/<version>/`. 您可以运行`gcc -v`以找出您安装的版本。

至少在我的版本中，没有`vector.h`; 公共标头只是`vector`（没有扩展名），大部分实现都在`bits/stl_vector.h`.

我的 Ubuntu 发行版就是这种情况；您的分布可能会有所不同。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-12T18:02:23.353

运行`g++ -v -v -v`输出很多东西，包括搜索到的所有包含目录。`vector`是其中之一。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T17:56:03.940

在我的 Debian Stable 系统`vector`上：

```
/usr/include/c++/4.4/vector 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-23T14:18:54.827

在“普通”ubuntu 安装中，您必须安装

`libstdc++-`*版本*`-dev`

获取头文件。

然后检查已安装的文件，您将获得路径！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T17:54:48.107

在许多 IDE（例如 NetBeans）中，您可以使用`Ctrl+Click`className 去定义

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-13T08:02:29.523

文件位置实际上取决于编译器。

您可以使用 bash 工具“定位”来搜索您知道库中的任何文件。例如。“定位stl_multimap.h”对我来说产生：

```
/usr/include/c++/5/bits/stl_multimap.h
/usr/include/c++/6/bits/stl_multimap.h
/usr/include/c++/7/bits/stl_multimap.h
/usr/include/c++/8/bits/stl_multimap.h
/usr/lib/gcc-snapshot/include/c++/9/bits/stl_multimap.h 
```

查看目录后，其他所有内容都应该非常明显。

在每个位置，我都会找到文件的不同编译器版本。对于我的计算机，所有 gcc 7.* 文件都在我的`/usr/include/c++/7`目录中。

如果由于某些可怕的原因您使用 Windows，我相信您将能够找到与 Powershell 等效的命令。

# php - PHP，将参数传递给对象方法或使用实例变量

> ID：11457675
> 
> 赞同：3
> 
> 时间：2012-07-12T17:52:28.447
> 
> 标签：php, oop, methods, parameters, instance

这是我从未完全确定或从未找到可靠答案的事情。

假设我有一个 User 类，其中有一个 register() 方法，但我不确定哪种方法最适合实现此方法。

在我的 register.php 页面中我应该有

```
$user->register($_POST['firstName'], $_POST['lastName'], $_POST['username'], etc..); 
```

然后在 register() 方法中不要费心设置对象属性，只需使用方法签名中提供的变量，或者我应该这样做

```
$user->register(); 
```

然后在注册函数中做类似的事情

```
$this->firstName = $_POST['firstName'];
$this->lastName = $_POST['lastName'];
etc... 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:00:11.253

如果 register 方法绑定到对象（实例，而不是类），我会让它使用必须提前设置的内部属性。因此，您实例化一个用户，设置属性，然后调用 $user->register()。

```
$user = new User();
$user->firstName = 'name'; //$user->setFirstName('name') could also work
$user->lastName = 'last name'; // for this to work, the properties have to be public
$user->register(); 
```

用户 A 应该只能注册自己，不能注册其他任何东西。

如果你使用带参数的方法，你基本上可以注册任何东西（不仅仅是用户）。

此外，如果注册意味着将参数写入数据库，则仅使用用户对象内部的方法更加健壮。如果您决定更改注册机制（如果您需要来自用户对象的其他信息），则只需修改用户类。

编辑：

现在我已经考虑了更多，我想我会创建另一个类来注册用户，它将获取整个用户对象并添加一个角色或其他任何内容并将其保存到数据库中。这样，用户对象就简单了一点，不需要知道它是如何注册或注销的，如果注册机制发生变化，用户可以保持不变。

编辑2：

从不是真正的 setter 的方法设置对象属性时要小心（就像在 register($fname, $lname, ...) 中那样）。当“某事”无缘无故地改变我的对象时，同样的方法让我很头疼，而且我在代码中的任何地方都找不到设置器或直接调用该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:06:27.673

实施完全取决于您。你可以做任何一种方式。这是一个例子：

```
class User{

    protected $_firstName = null;

    protected $_lastName = null;

    public function register( array $params = array() ){
        if(!empty($params) ){
           $this->setParams($params);
        }
        // Do more processing here...
    }

    public function setParams($params){
       // Set each of the users attributes.
    }

    public function setFirstName($name = null){
       if($name !== null){
          $this->_firstName = $name;
          return true;
       }
       return false;
    }

    public function getFirstName(){
       return $this->_firstName;
    }

    // Same getter and setter methods for other attributes...

} 
```

通过这种方式，您可以将一组 User 属性传递给 ，`$_POST`或者您可以通过调用 、 等来单独`$user->setFirstName()`完成`$user->setLastName()`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:57:53.217

考虑到`$_POST`在全局范围内定义，使用后一种方法会更有意义（不传入参数并从函数中设置它）。但是请注意，这仅适用于`$_POST`在全局范围内声明的情况（在这种情况下），并且当您从外部 PHP 模块传入类时，您将失去灵活性。

# linux - Python socket.error: [Errno 13] 权限被拒绝

> ID：11457676
> 
> 赞同：18
> 
> 时间：2012-07-12T17:52:28.757
> 
> 标签：linux, python-3.x, udp, datagram

使用 Linux 和 Python，我想通过广播发送一些数据：

```
d = b'109u433279423423423'    

import socket

s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

s.sendto(d, 0, ('192.168.0.255', 9)) 
```

我在根目录下启动此脚本并收到此错误：

```
s.sendto(d, 0, ('192.168.0.255', 9)) socket.error: [Errno 13]
Permission denied 
```

怎么了？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-12T19:46:37.110

您正在尝试发送到广播地址。这是不允许的，请参见 sendto(2) 的联机帮助页：

> **EACCES**（对于 UDP 套接字）尝试发送到网络/广播地址，就好像它是单播地址一样。

如果您实际上是要发送到广播地址，请设置 SO_BROADCAST 选项：

```
s.setsockopt(socket.SOL_SOCKET, socket.SO_BROADCAST, 1) 
```

# web-services - @WebServlet Annotation and servlet-mapping differences

> ID：11457677
> 
> 赞同：2
> 
> 时间：2012-07-12T17:52:30.040
> 
> 标签：web-services, servlets, web.xml, url-pattern

In my servlet class, I have annotated the class with:

```
@WebServlet("/OnlinePostListener/testFromAnnotation")
public class OnlinePostListener extends HttpServlet {
   ...
} 
```

My web.xml contains the following:

```
<servlet>
    <description>
    </description>
    <display-name>OnlinePostListener</display-name>
    <servlet-name>OnlinePostListener</servlet-name>
    <servlet-class>com.me.forwardingProxy.OnlinePostListener</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>OnlinePostListener</servlet-name>
    <url-pattern>/testFromWebXML</url-pattern>
</servlet-mapping> 
```

My servlet only responds when I access the URL:

```
http://localhost:8080/forwardingProxy/OnlinePostListener/testFromAnnotation 
```

but not:

```
http://localhost:8080/forwardingProxy/OnlinePostListener/testFromWebXML 
```

What is the difference between the @WebServlet's annotation and servlet-mapping? Why is the servlet-mapping not working for this URL-pattern?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-05T12:35:56.183

这是因为您在后一种情况下使用错误的 url 来获取 servlet。

使用正确的网址：

```
http://localhost:8080/forwardingProxy/testFromWebXML 
```

错误：您在后一种情况下使用了额外的 /OnlinePostListener。

在第一种情况下，您为指定 servlet 映射的 URL`"/OnlinePostListener/testFromAnnotation"`因此您已使用此字符串作为附加 URL，`http://localhost:8080/forwardingProxy`但在后一种情况下，您已将 servlet 映射到`/testFromWebXML`（ AND NOT `/OnlinePostListener/testFromWebXML`）。

但是，如果您坚持使用 URL`http://localhost:8080/forwardingProxy/OnlinePostListener/testFromWebXML`来利用 web.xml，您应该进行以下更改：

```
<servlet-mapping>
    <servlet-name>OnlinePostListener</servlet-name>
    <url-pattern>/OnlinePostListener/testFromWebXML</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T18:38:45.980

因为 Servlet 规范要求 web.xml 中定义的映射覆盖而不是添加到注释中定义的映射。原因是没有这个，就无法禁用注释中定义的映射。

# c# - Extract sub image from an Image using c#

> ID：11457679
> 
> 赞同：9
> 
> 时间：2012-07-12T17:52:40.207
> 
> 标签：c#, image

I have a Bitmap object from this I need to extract a sub image and keep it as a Bitmap object by passing Rectangle object which contains sub image co-ordinates?

Is there a c# library which is able to do this or is Aforge able to extract sub image.

Thanks

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-12T17:56:43.140

Bitmap 类有一个直接接受目标矩形的[Clone方法。](http://msdn.microsoft.com/en-us/library/ms141944.aspx)

由于您已经在使用 a ，因此使用您的矩形和期望（可能是）`Bitmap`调用应该可以满足您的需求，而无需其他依赖项。`Clone``PixelFormat``originalBitmap.PixelFormat`

```
Bitmap croppedImage = originalBitmap.Clone(theRect, originalBitmap.PixelFormat); 
```

# multithreading - Error Cross-thread operation not valid: Control 'CameraViewVS' accessed from a thread other than the thread it was created on. parallel.for

> ID：11457685
> 
> 赞同：0
> 
> 时间：2012-07-12T17:52:56.653
> 
> 标签：multithreading, c#-4.0

I have a timer to verify one condition every time and show pop up form only once if the condition is verified. I want to verify in parallel all instances, so i used parallel.for, but i have this error "Cross-thread operation not valid: Control 'CameraViewVS' accessed from a thread other than the thread it was created on." in line " frm.WindowState = FormWindowState.Normal;"

this is my code:

```
public void timer1_Tick(object source, EventArgs e)               
{
    Parallel.For(0, nbre, l =>
        {
            cameraInstanceList[l].Start();
            if (cameraInstanceList[l].MoveDetection == true)
            {
                //show the the form S once 
                foreach (Form S in Application.OpenForms)
                {
                    var frm = S as Formes.CameraViewVS;
                    if (frm != null && frm.IP == cameraInstanceList[l].adresse)
                    {
                        cameraInstanceList[l].MoveDetection = false;
                        frm.WindowState = FormWindowState.Normal;
                        frm.Activate();
                        return;
                    }
                }

                f1 = new Formes.CameraViewVS(cameraInstanceList[l],
                adresseIPArray[l]);
                f1.Show(this);

            }

        }               
        ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T21:18:38.113

托马斯非常接近正确的答案，因为每个控件都在不同的线程中运行。您应该只编写一个代码用于控件线程正在使用的资源的上下文切换..不要担心您有很多工具可以做到这一点在 c 中。只需使用 BeginInvoke 和 Invoke，我希望你能够解决你的问题。用这个代替你的旧代码块..

```
 var action = new Action(() =>
                            {
                                if (frm.IP == cameraInstance.adresse) 
                                { 
                                    cameraInstance.MoveDetection = false; 
                                    frm.WindowState = FormWindowState.Normal; 
                                    frm.Activate(); 
                                }
                            };

                        if (frm.InvokeRequired)
                            frm.BeginInvoke(action);  
                        else
                            frm.Invoke(action); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:17:21.423

WinForm 对象实例上的大多数属性都需要从创建它们的线程中访问。您可以使用 Control.InvokeRequired 属性来确定是否需要使用控件（或表单）的 Invoke 方法来执行 UI 线程上的代码。

在主 UI 线程上而不是在任何线程池线程上创建大多数 WinForm 控件也是一个好习惯。在 WinForms 应用程序中，您可以使用`SynchronizationContext`确保在 UI 线程上调用某些代码，例如创建表单。

**编辑：**更改，以便在检测到移动后该方法不会返回。

```
public void timer1_Tick(object source, EventArgs e)                         
{          
    // assume this is being called on the UI thread, and save the thread synchronization context
    var uiContext = SynchronizationContext.Current;

    Parallel.For(0, nbre, l =>          
        {          
            while (true)
            {
                Thread.Sleep(250);  // <--- sleep for 250 ms to avoid "busy" wait

                cameraInstanceList[l].Start();          
                if (cameraInstanceList[l].MoveDetection == true)          
                {       
                    // capture instances used in closures below
                    var cameraInstance = cameraInstanceList[l];
                    var ipAdresse = adresseIPArray[l];

                    //show the the form S once                             
                    foreach (Form S in Application.OpenForms)                            
                    {
                        var frm = S as Formes.CameraViewVS; 
                        if (frm != null)
                        {
                            // create delegate to be invoked on form's UI thread.
                            var action = new Action(() =>
                                {
                                    if (frm.IP == cameraInstance.adresse) 
                                    { 
                                        cameraInstance.MoveDetection = false; 
                                        frm.WindowState = FormWindowState.Normal; 
                                        frm.Activate(); 
                                    }
                                };

                            if (frm.InvokeRequired)
                                frm.Invoke(action);  
                            else
                                action();

                            continue; // <--- go back to the top of the while loop
                                      //      and wait for next detection
                        }
                    }

                    // create delegate to create new form on UI thread.
                    var createNewFormCallback = new SendOrPostCallback((o) =>
                        {
                            f1 = new Formes.CameraViewVS(cameraInstance, ipAdresse); 
                            f1.Show(this);  
                        };    

                    // and invoke the delegate on the ui thread
                    uiContext.Send(createNewFormCallback, null); 
                }            
            } 
        }
        );
} 
```

# haskell - Composable atomic-like operations

> ID：11457687
> 
> 赞同：5
> 
> 时间：2012-07-12T17:53:16.043
> 
> 标签：haskell, transactions, atomic

I want to compose operations that may fail, but there is a way to roll back.

For example - an external call to book a hotel room, and an external call to charge a credit card. Both of those calls may fail such as no rooms left, invalid credit card. Both have ways to roll back - cancel hotel room, cancel credit charge.

1.  Is there a name for this type of (not real) atomic. Whenever i search for haskell transaction, I get `STM`.
2.  Is there an abstraction, a way to compose them, or a library in haskell or any other language?

I feel you could write a monad `Atomic T` which will track these operations and roll them back if there is an exception.

Edit:

These operations may be `IO` operations. If the operations were only memory operations, as the two answers suggest, STM would suffice.

For example booking hotels would via HTTP requests. Database operations such as inserting records via socket communication.

In the real world, for irreversible operations there is a grace period before the operation will be done - e.g. credit cards payments and hotel bookings may be settled at the end of the day, and therefore it is fine to cancel before then.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T18:38:19.537

这正是STM的目的。操作是组合在一起的，因此它们会自动一起成功或失败。

与您的酒店房间问题非常相似的是 Simon Peyton-Jones 在“美丽代码”一章中的银行交易示例：[http://research.microsoft.com/en-us/um/people/simonpj/papers/stm/beautiful。 pdf](http://research.microsoft.com/en-us/um/people/simonpj/papers/stm/beautiful.pdf)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T22:39:00.390

If you need to resort to making your own monad, it will look something like this:

```
import Control.Exception (onException, throwIO)

newtype Rollbackable a = Rollbackable (IO (IO (), a))

runRollbackable :: Rollbackable a -> IO a
runRollbackable (Rollbackable m) = fmap snd m
    -- you might want this to catch exceptions and return IO (Either SomeException a) instead

instance Monad Rollbackable where
    return x = Rollbackable $ return (return (), x)
    Rollbackable m >>= f
       = do (rollback, x) <- m
            Rollbackable (f x `onException` rollback) 
```

(You will probably want `Functor` and `Applicative` instances also, but they're trivial.)

You would define your rollbackable primitive actions in this way:

```
rollbackableChargeCreditCard :: CardNumber -> CurrencyAmount -> Rollbackable CCTransactionRef
rollbackableChargeCreditCard ccno amount = Rollbackable
   $ do ref <- ioChargeCreditCard ccno amount
        return (ioUnchargeCreditCard ref, ref)

ioChargeCreditCard :: CardNumber -> CurrencyAmount -> IO CCTransactionRef
-- use throwIO on failure
ioUnchargeCreditCard :: CCTransactionRef -> IO ()
-- these both just do ordinary i/o 
```

Then run them like so:

```
runRollbackable
   $ do price <- rollbackableReserveRoom roomRequirements when
        paymentRef <- rollbackableChargeCreditCard ccno price
        -- etc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:37:14.437

如果你的计算只能用`TVar`类似的东西来完成，那就`STM`完美了。

如果您需要副作用（例如“收取 Bob 100 美元”）并且如果稍后出现错误发出撤回（例如“退还 Bob 100 美元”），那么您需要鼓点：[Control.Exceptions.bracketOnError](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Exception.html#v%3abracketOnError)

```
bracketOnError
        :: IO a         -- ^ computation to run first (\"acquire resource\")
        -> (a -> IO b)  -- ^ computation to run last (\"release resource\")
        -> (a -> IO c)  -- ^ computation to run in-between
        -> IO c         -- returns the value from the in-between computation 
```

> Like `Control.Exception.bracket`，但仅在中间计算引发异常时才执行最终操作。

因此我可以想象这样使用：

```
let safe'charge'Bob = bracketOnError (charge'Bob) (\a -> refund'Bob)

safe'charge'Bob $ \a -> do
   rest'of'transaction
   which'may'throw'error 
```

`Control.Exception.mask`如果您在多线程程序中并尝试这样的事情，请确保您了解在哪里使用该操作。

我要强调的是，您可以并且应该阅读[Control.Exception](http://www.haskell.org/ghc/docs/latest/html/libraries/base/src/Control-Exception.html)和[Control.Exception.Base](http://www.haskell.org/ghc/docs/latest/html/libraries/base/src/Control-Exception-Base.html)的源代码，以了解在 GHC 中是如何完成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T23:17:16.417

你真的可以通过 STM 的巧妙应用来做到这一点。关键是分离出IO部分。我认为问题在于事务最初可能看起来成功，但后来才失败。（如果您能立即或很快识别出失败，事情就简单多了）：

```
main = do
   r   <- reserveHotel
   c   <- chargeCreditCard

   let room         = newTVar r
       card         = newTVar c
       transFailure = newEmptyTMVar

   rollback <- forkIO $ do 
       a <- atomically $ takeTMVar transFailure --blocks until we put something here
       case a of
         Left  "No Room"       -> allFullRollback
         Right "Card declined" -> badCardRollback

  failure <- listenForFailure -- A hypothetical IO action that blocks, waiting for
                              -- a failure message or an "all clear"
  case failures of
      "No Room"       -> atomically $ putTMVar (Left "No Room")
      "Card Declined" -> atomically $ putTMVar (Right "Card declined")
      _               -> return () 
```

现在，这里没有什么是 MVars 无法处理的：我们所做的就是派生一个线程来等待，看看我们是否需要修复问题。但是你可能会用你的卡费和酒店预订做一些其他的事情......

# java - How to set name to the thread?

> ID：11457690
> 
> 赞同：24
> 
> 时间：2012-07-12T17:53:26.640
> 
> 标签：java, android, multithreading, debugging

Is there a way to set a friendly name to a thread in code?

For example, I want the thread with name Thread-11 on the image was named something like 'MyImportThread'.

[![example-threads](../Images/596c9226f93754a32a58e00d8a3d836d.png)](https://i.stack.imgur.com/hcZVa.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-12T17:58:33.667

**您可以轻松地在 Its Constructor**中传递线程名称，例如：

`Thread foo = new Thread("Foo");`

...或通过调用`Thread#setName`：

> public final void setName (String threadName)

设置线程的名称。

作为`thread.setName("Thread-11");`或喜欢`Thread.currentThread().setName("Thread-11");`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-12T17:56:23.050

检查[`Thread`构造函数](http://developer.android.com/reference/java/lang/Thread.html#pubctors)，有几个带`String name`参数的。或者您可以调用`setName(String)`现有线程。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-12T17:56:23.097

你尝试过这样的事情吗？

```
Thread.currentThread().setName("MyThread"); 
```

还[`Threads reference`](http://developer.android.com/reference/java/lang/Thread.html)特别关注构造函数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-12T17:56:07.430

类[Thread](http://developer.android.com/reference/java/lang/Thread.html#setName%28java.lang.String%29)有一个方法：

```
public final void setName (String threadName)

Since: API Level 1
Sets the name of the Thread. 
```

你试过了吗？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-12T17:59:22.080

尝试这个：

```
Thread thread = new Thread("MyImportThread") {
      public void run(){    
        // code
      }
   };
   thread.start();
   System.out.println(thread.getName()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-12T17:58:52.470

是的，您可以使用以下方法为线程设置名称：

```
Thread.getCurrentThread().setName(threadName); 
```

# javascript - document.getElementById(" ").src not working?

> ID：11457693
> 
> 赞同：2
> 
> 时间：2012-07-12T17:53:37.840
> 
> 标签：javascript

I want to be able to choose the Battery 9 inside the dropdownlist.
I want the image of Battery 9 to show in the img tag.
Am I doing something wrong?

```
HEAD
function checkBatteryLife(){
if(document.getElementById('batterylifes').value == 'batterylife9'){
    document.getElementsByTagName('batteryID').src = 'battery9.png';
}
BODY
<img alt="" src="" name="batteryID" onclick="checkBatteryLife()">
</br>
<select id="batterylifes" onchange="checkBatteryLife()">
<option name="batteryIMG" value="batterylife9">Battery 9</option>
</select> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T17:57:07.760

[getElementsByTagName](https://developer.mozilla.org/en/DOM/document.getElementsByTagName)方法将按名称返回标签集合，例如`IMG`or `SELECT`。传入`name`标签的属性不会产生任何结果。

您可能应该使用[getElementById](https://developer.mozilla.org/en/DOM/document.getElementById)并传入`id`元素的：

```
function checkBatteryLife() {
   if(document.getElementById('batterylifes').value == 'batterylife9')
   {
      document.getElementsById('batteryID').src = 'battery9.png';
   }
} 
```

..

```
<img alt="" src="" id="batteryID" onclick="checkBatteryLife()" />
<br />
<select id="batterylifes" onchange="checkBatteryLife()">
   <option name="batteryIMG" value="batterylife9">Battery 9</option>
</select> 
```

您还可以使用[getElementsByName](https://developer.mozilla.org/en/DOM/document.getElementsByName)，它将返回具有指定`name`属性的 DOM 元素集合，然后遍历它以找到正确的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T17:56:06.513

您需要[**.getElementsByName()**](https://developer.mozilla.org/en/DOM/document.getElementsByName)函数而不是`.getElementByTagName()`：

```
document.getElementsByName('batteryID')[0].src = 'battery9.png'; 
```

由于`.getElementsByName()`函数返回列表，而不是单个元素，因此要访问列表的元素，您需要使用`[]`方括号。特别是您需要第一个匹配的元素`name="batteryID"`，这就是您应该使用`[0]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:03:29.887

首先，`option`通过简单地读取`select`. 相反，首先检测选定`option`然后读取 ITS 值。

```
var sel = document.getElementById('batterylifes');
if (sel.options[sel.options.selectedIndex].value == 'batterylife9') {
    //your code here...
} 
```

其次，正如许多人指出的那样，您错误地使用`getElementsByTagName`其名称来引用单个元素。您需要`getElementsByName()`，尽管这也不是跨浏览器兼容的。其他选项：

*   使用 jQuery 或其他一些库
*   如果您不关心旧浏览器，请使用新`document.querySelector()`方法通过 CSS 语法选择元素
*   给图像一个 ID 并使用`getElementById()`

# hadoop - Hadoop: Help needed while implementing a custom FileInputFormat-class

> ID：11457700
> 
> 赞同：4
> 
> 时间：2012-07-12T17:54:16.750
> 
> 标签：hadoop

i'm trying to implement some Map/Reduce job with hadoop for a college assignment. but at the moment i'm totally stuck while implementing a custom FileInputFormat class to get the whole content from a file into my mapper.

i took the example out of "hadoop: the definitive guide" without no changes. i can compile my source code but if i run it it will throw this exception (at the moment i use hadoop 1.0.2 on a debian 5.0)

```
Exception in thread "main" java.lang.RuntimeException: java.lang.NoSuchMethodException: org.myorg.ExampleFileInputFormat$WholeFileInputFormat.<init>()
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:115)
    at org.apache.hadoop.mapred.JobConf.getInputFormat(JobConf.java:575)
    at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:989)
    at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:981)
    at org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:174)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:897)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:824)
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1261)
    at org.myorg.ExampleFileInputFormat.run(ExampleFileInputFormat.java:163)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at org.myorg.ExampleFileInputFormat.main(ExampleFileInputFormat.java:172)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.lang.NoSuchMethodException: org.myorg.ExampleFileInputFormat$WholeFileInputFormat.<init>()
    at java.lang.Class.getConstructor0(Class.java:2706)
    at java.lang.Class.getDeclaredConstructor(Class.java:1985)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:109)
    ... 21 more 
```

i'm kind of frustrated because i don't understand what happens and i don't find anything using web search. Maybe some of you could take a look on my source. it's kind of stripped down at the moment for the purpose of debugging.

* * *

```
package org.myorg;
/*
 * 
 * 
 */
import java.io.IOException;
import java.util.*;
import java.io.*;
import java.util.regex.Pattern;
import java.util.regex.Matcher;

import org.apache.hadoop.fs.*;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.mapred.TextInputFormat;
import org.apache.hadoop.mapred.FileInputFormat;
import org.apache.hadoop.util.*;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;
import org.apache.hadoop.conf.Configured;

public class ExampleFileInputFormat extends Configured implements Tool {

     /*
      *  <generics>
      */
    public class WholeFileInputFormat extends FileInputFormat<NullWritable, BytesWritable> {

        @Override
        protected boolean isSplitable(FileSystem fs, Path filename) {
            return false;
        }

        @Override
        public RecordReader<NullWritable, BytesWritable> getRecordReader(InputSplit split, JobConf job, Reporter reporter) throws IOException {
            return new WholeFileRecordReader((FileSplit) split, job);   
        }
    }

    public class WholeFileRecordReader implements RecordReader<NullWritable, BytesWritable> {

        private FileSplit fileSplit;
        private Configuration conf;
        private boolean processed = false;

        public WholeFileRecordReader(FileSplit fileSplit, Configuration conf) throws IOException {
            this.fileSplit = fileSplit;
            this.conf = conf;
        }

        @Override
        public NullWritable createKey() {
            return NullWritable.get();
        }

        @Override
        public BytesWritable createValue() {
            return new BytesWritable();
        }

        @Override
        public long getPos() throws IOException {
            return processed ? fileSplit.getLength() : 0;
        }

        @Override
        public float getProgress() throws IOException {
            return processed ? 1.0f : 0.0f;
        }

        @Override
        public boolean next(NullWritable key, BytesWritable value) throws IOException {
            if (!processed) {
                  byte[] contents = new byte[(int) fileSplit.getLength()];
                  Path file = fileSplit.getPath();
                  FileSystem fs = file.getFileSystem(conf);
                  FSDataInputStream in = null;
                  try {
                    in = fs.open(file);
                    IOUtils.readFully(in, contents, 0, contents.length);
                    value.set(contents, 0, contents.length);
                  } finally {
                    IOUtils.closeStream(in);
                  }
                  processed = true;
                  return true;
            }
            return false;
        }

        @Override
        public void close() throws IOException {
            // do nothing
        }
    }
      /* </generics> */

    /* 
     * <Task1>: 
     * */
    public static class ExampleMap extends MapReduceBase implements Mapper<NullWritable, BytesWritable, Text, IntWritable> {
     private final static IntWritable one = new IntWritable(1);
      private Text word = new Text();
      public void map(NullWritable key, BytesWritable value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
          output.collect(new Text("test"), one);
        }
      }
    public static class ExampleReduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, IntWritable> {
      public void reduce(Text key, Iterator<IntWritable> values, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
        int sum = 0;
        while (values.hasNext()) {
          sum += values.next().get();
        }
        output.collect(key, new IntWritable(sum));
      }
    }
    /* </Task1> */
    /*
     * <run>
     **/
    public int run(String[] args) throws Exception {

        if (args.length != 3) {
            printUsage();
            return 1;
        }

        String useCase = args[0];
        String inputPath = args[1];
        String outputPath = args[2];

        deleteOldOutput(outputPath);        

        JobConf conf = new JobConf(ExampleFileInputFormat.class);
        FileOutputFormat.setOutputPath(conf, new Path(outputPath));      
        FileInputFormat.setInputPaths(conf, new Path(inputPath));

        /* conf: Task1 */
        if (useCase.equals("cc_p")) {
            conf.setJobName("WordCount");
            /* Output: Key:Text -> Value:Integer */
            conf.setOutputKeyClass(Text.class);
            conf.setOutputValueClass(IntWritable.class);
            conf.setOutputFormat(TextOutputFormat.class);
            /* Input: Key.Text -> Value:Text */
            conf.setInputFormat(WholeFileInputFormat.class);
            conf.setMapperClass(ExampleMap.class);
            conf.setReducerClass(ExampleReduce.class);
        }
        /* default-option: Exit */
        else {
            printUsage();
            return 1;
        }

        JobClient.runJob(conf);
        return 0;
    }
    /* </run> */

    /*
     * <Main>
     */
    public static void main(String[] args) throws Exception {
        int res = ToolRunner.run(new ExampleFileInputFormat(), args);
        System.exit(res);
    }
    /* </Main> */

    /* 
    * <Helper>
    */
    private void printUsage() {
        System.out.println("usage: [usecase] [input-path] [output-path]");
        return;
    }

    private void deleteOldOutput(String outputPath) throws IOException {
        // Delete the output directory if it exists already
        Path outputDir = new Path(outputPath);
        FileSystem.get(getConf()).delete(outputDir, true);
    }
    /* </Helper->   */
} 
```

* * *

Can anyone help me out?

Greetings from Germany, Alex

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:13:24.503

您需要使内部类静态：

```
public static class WholeFileInputFormat extends FileInputFormat<NullWritable, BytesWritable> { 
```

否则，Javac 会生成一个构造函数，该构造函数期望传入一个父 ExampleFileInputFormat 类实例。

# java - 递归蛮力迷宫求解器Java

> ID：11457704
> 
> 赞同：0
> 
> 时间：2012-07-12T17:54:25.920
> 
> 标签：java, recursion, brute-force, maze

为了尝试编写一个蛮力迷宫解决 C 程序，我首先编写了这个 java 程序来测试一个想法。我对 C 非常陌生，并打算在 Java 中正确完成后对其进行转换。因此，我试图远离数组列表、花哨的库等，以便更容易地转换为 C。该程序需要生成一个最短步长的单一宽度路径来解决迷宫问题。我认为我的问题可能在于分割通过每个递归传递的路径存储数组。谢谢你看这个。-乔

```
maze:

1 3 3 3 3 
3 3 3 3 3 
3 0 0 0 3 
3 0 3 3 3 
0 3 3 3 2 

Same maze solved by this program:
4 4 4 4 4 
4 4 4 4 4 
4 0 0 0 4 
3 0 3 3 4 
0 3 3 3 2 
```

数字符号在代码中解释

```
 public class javamaze {

static storage[] best_path;
static int best_count;
static storage[] path;

//the maze - 1 = start; 2 = finish; 3 = open path
static int maze[][] = {{1, 3, 3, 3, 3}, 
    {3, 3, 3, 3, 3},
    {0, 0, 0, 0, 3},
    {0, 0, 3, 3, 3},
    {3, 3, 3, 3, 2}};

public static void main(String[] args) {

    int count1;
    int count2;

    //declares variables used in the solve method
    best_count = 0;
    storage[] path = new storage[10000];
    best_path = new storage[10000];
    int path_count = 0;

    System.out.println("Here is the maze:");
    for(count1 = 0; count1 < 5; count1++) {
        for(count2 = 0; count2 < 5; count2++) {
            System.out.print(maze[count1][count2] + " ");   
        }                       
        System.out.println("");         
    }                       

    //solves the maze
    solve(findStart()/5, findStart()%5, path, path_count);  

    //assigns an int 4 path to the maze to visually represent the shortest path
    for(int count = 0; count <= best_path.length - 1; count++)
        if (best_path[count] != null)
            maze[best_path[count].getx()][best_path[count].gety()] = 4;

    System.out.print("Here is the solved maze\n");

    //prints the solved maze
    for(count1 = 0; count1 < 5; count1++) {
        for(count2 = 0; count2 < 5; count2++){
            System.out.print(maze[count1][count2] + " ");
        }
        System.out.print("\n");
    }
}

//finds maze start marked by int 1 - this works perfectly and isn't related to the problem
public static int findStart() {
    int count1, count2;
    for(count1 = 0; count1 < 5; count1++) {
        for(count2 = 0; count2 < 5; count2++) {
            if (maze[count1][count2] == 1)
                return (count1 * 5 + count2);
        }
    }
    return -1;
}

//saves path coordinate values into a new array
public static void save_storage(storage[] old_storage) {
    int count;
    for(count = 0; count < old_storage.length; count++) {
        best_path[count] = old_storage[count];
    }
}

//solves the maze
public static Boolean solve(int x, int y, storage[] path, int path_count) {

    //checks to see if grid squares are valid (3 = open path; 0 = wall
    if (x < 0 || x > 4) { //array grid is a 5 by 5
        //System.out.println("found row end returning false");
        return false;
    }
    if (y < 0 || y > 4) {
        //System.out.println("Found col end returning false");
        return false;
    }

    //when finding finish - records the number of moves in static int best_count
    if (maze[x][y] == 2) {
        if (best_count == 0 || best_count > path_count) {
            System.out.println("Found end with this many moves: " + path_count);
            best_count = path_count;
            save_storage(path); //copies path counting array into a new static array
        }
    }
    //returns false if it hits a wall
    if (maze[x][y] == 0)
        return false;

    //checks with previously crossed paths to prevent an unnecessary repeat in steps
    for(storage i: path) 
        if (i != null)
            if (i.getx() == x && i.gety() == y) 
                return false;

    //saves current recursive x, y (row, col) coordinates into a storage object which is then added to an array.
    //this array is supposed to fragment per each recursion which doesn't seem to - this may be the issue
    storage storespoints = new storage(x, y);
    path[path_count] = storespoints;

    //recurses up, down, right, left
    if (solve((x-1), y, path, path_count++) == true || solve((x+1), y, path, path_count++) == true ||
            solve(x, (y+1), path, path_count++) == true || solve(x, (y-1), path, path_count++) == true) {
        return true;
    }

    return false;
}
} 

//stores (x, y) aka row, col coordinate points
class storage {

private int x;
private int y;

public storage(int x, int y) {
    this.x = x;
    this.y = y;
}
public int getx() {
    return x;
}
public int gety() {
    return y;
}
public String toString() {
    return ("storage coordinate: " + x + ", " + y + "-------");
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:47:51.773

这原本不是一个答案，但它逐渐演变成一个答案。老实说，我认为从 Java 开始并转向 C 是一个坏主意，因为这两种语言真的没有什么相似之处，而且你不会对自己有任何好处，因为如果你依赖 java 的任何特性，移植它会遇到严重的问题有那个 C 没有（即大多数）

也就是说，我将勾勒出一些算法 C 的东西。

**支撑结构**

```
typedef
struct Node
{
    int x, y;
    // x and y are array indices
}
Node;

typedef
struct Path
{
    int maxlen, head;
    Node * path;
    // maxlen is size of path, head is the index of the current node
    // path is the pointer to the node array
}
Path;

int    node_compare(Node * n1, Node * n2); // returns true if nodes are equal, else false

void   path_setup(Path * p, Node * n); // allocates Path.path and sets first node
void   path_embiggen(Path * p);        // use realloc to make path bigger in case it fills up
int    path_toosmall(Path * p);        // returns true if the path needs to be reallocated to add more nodes
Node * path_head(Path * p);            // returns the head node of the path
void   path_push(Path * p, Node * n);  // pushes a new head node onto the path
void   path_pop(Path * p);             // pops a node from path 
```

您可能会将迷宫格式更改为邻接列表之类的东西。您可以将每个节点存储为一个掩码，详细说明您可以从该节点前往哪些节点。

**迷宫格式**

```
const int // these constants indicate which directions of travel are possible from a node
N = (1 << 0),       // travel NORTH from node is possible
S = (1 << 1),       // travel SOUTH from node is possible
E = (1 << 2),       // travel EAST  from node is possible
W = (1 << 3),       // travel WEST  from node is possible
NUM_DIRECTIONS = 4; // number of directions (might not be 4\.  no reason it has to be)

const int
START  = (1 << 4),  // starting  node
FINISH = (1 << 5);  // finishing node

const int
MAZE_X = 4,         // maze dimensions
MAZE_Y = 4;

int maze[MAZE_X][MAZE_Y] = 
{
    {E,        S|E|W,    S|E|W,    S|W       },
    {S|FINISH, N|S,      N|START,  N|S       },
    {N|S,      N|E,      S|E|W,    N|S|W     },
    {N|E,      E|W,      N|W,      N         }
};

Node start  = {1, 2}; // position of start node
Node finish = {1, 0}; // position of end node 
```

我的迷宫与你的不同：这两种格式并没有完全以 1:1 的比例相互映射。例如，您的格式允许更精细的移动，但我的格式允许单向路径。

请注意，您的格式明确定位墙壁。使用我的格式，墙在概念上位于不可能有路径的任何地方。我创建的迷宫有3个水平的墙和5个垂直的（并且也是封闭的，即整个迷宫周围有一堵连续的墙）

对于您的蛮力遍历，我会使用深度优先搜索。您可以通过多种方式将标志映射到方向，如下所示。由于您无论如何都要遍历每个，因此访问时间无关紧要，因此数组而不是某种更快的关联容器就足够了。

**偏移映射的数据格式**

```
// map directions to array offsets
// format is [flag], [x offset], [y offset]
int mappings[][] =
{
    {N, -1,  0},
    {S,  1,  0},
    {E,  0,  1},
    {W,  0, -1}
} 
```

最后，您的搜索。您可以迭代或递归地实现它。我的示例使用递归。

**搜索算法伪代码**

```
int search_for_path(int ** maze, char ** visited, Path * path)
{
    Node * head = path_head(path);
    Node temp;
    int i;

    if (node_compare(head, &finish)) return 1; // found finish
    if (visited[head->x][head->y])   return 0; // don't traverse again, that's pointless

    visited[head->x][head->y] = 1;
    if (path_toosmall(path)) path_embiggen(path);

    for (i = 0; i < NUM_DIRECTIONS; ++i)
    {
        if (maze[head->x][head->y] & mappings[i][0]) // path in this direction
        {
            temp = {head->x + mappings[i][1], head->y + mappings[i][2]};
            path_push(path, &temp);
            if (search_for_path(maze, visited, path)) return 1; // something found end
            path_pop(path);
        }
    }
    return 0; // unable to find path from any unvisited neighbor
} 
```

要调用此函数，您应该像这样设置所有内容：

**调用求解器**

```
// we already have the maze
// int maze[MAZE_X][MAZE_Y] = {...};

// make a visited list, set to all 0 (unvisited)
int visited[MAZE_X][MAZE_Y] = 
{
    {0,0,0,0},
    {0,0,0,0},
    {0,0,0,0},
    {0,0,0,0}
};

// setup the path
Path p;
path_setup(&p, &start);

if (search_for_path(maze, visited, &path))
{
    // succeeded, path contains the list of nodes containing coordinates from start to end
}
else
{
    // maze was impossible
} 
```

值得注意的是，因为我在编辑框中写了这一切，我没有测试任何它。它可能不会在第一次尝试时起作用，并且可能需要一些摆弄。例如，除非全局声明 start 和 finish，否则会有一些问题。最好将目标节点传递给搜索函数，而不是使用全局变量。

# c# - 在 C# 中修改除日期以外的文件属性

> ID：11457716
> 
> 赞同：0
> 
> 时间：2012-07-12T17:54:55.953
> 
> 标签：c#

我在 .NET 3.5、Visual Studio 2010 中工作。我正在开发一个 Outlook 加载项，它将一些电子邮件保存到一个文件夹中。我已经使用该`Microsoft.Office.Interop.Outlook.MailItem.SaveAs`功能使其工作。但是，文件属性只有当前时间（通过加载项导出文件的时间）作为其修改日期/创建日期等，而其他属性如 To、From、CC、BCC 不存在。

如果您在 Windows 资源管理器中打开一个文件夹（我使用的是 Windows 7），转到顶部显示名称、修改日期、类型等的位置，您可以单击更多，然后查看其他可能相关的列，例如“专辑艺术家”、“收件人”、“发件人”等。

C# 有一个非常简单的方法来修改时间，`File.SetCreationTime(filename, DateTime object);`. 但是，没有 .SetTo 或 .SetAlbumArtist 或类似的东西。我将如何修改这些属性？

**更新1：**通过研究，我发现了这个链接：[Read/Write 'Extended' file properties (C#)](https://stackoverflow.com/questions/220097/read-write-extended-file-properties-c)，所以它可能包含答案......但我不知道怎么做。接受的答案提到使用 .dll 在 shell 上运行方法。第二个答案包含 C# 代码，然后评论者基本上问我想知道什么（如何修改特定文件的属性），下一个评论者回答“你不能设置这些”......所以我仍然在 1 号广场。

**更新 2：**我还尝试了以下方法：

```
foreach (Object selectedObject in explorer.Selection)
{
     Outlook.MailItem email = (selectedObject as Outlook.MailItem);
     //Modify the information about the email
     email.To = "I filled in To";
     email.SaveAs(filename, OlSaveAsType.olMSG);
} 
```

此代码成功抓取选定的电子邮件并将它们保存在文件名下。但是，当您打开 .msg 时，email.To = "I packed in To" 会更改信息，但不会更改文件属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:09:10.747

这无法更改，因为它实际上不是文件系统方面的任何文件属性（如文件创建或修改日期时间）。

您所说的 Windows 资源管理器中的列是“虚拟的”，它们“只是”Windows 资源管理器的功能。它“理解”某些文件类型的内容，并且可以处理这样的显示和排序列。

如果您想更改收件人、发件人等，您必须更改正在保存的文件的内容，即更改消息中的收件人或发件人。

为此，如果您有一个 Microsoft.Office.Interop.Outlook.MailItem 对象（您只是保存），请在将其保存到文件之前在该对象上设置所需的属性，即：

```
MailItem mail = ...;
mail.To = "some new to";
mail.Subject = "new subject";
mail.SaveAs(fileToSave, OlSaveAsType.OlMSG); 
```

我不知道它是否还会更改存储在 Outlook 中的电子邮件，如果是，请在更改属性之前创建电子邮件的副本

```
MailItem copyOfMailToSave = (MailItem)mail.Copy(); 
```

# c# - 创建一个 SMTP 服务器 c#

> ID：11457722
> 
> 赞同：19
> 
> 时间：2012-07-12T17:55:25.470
> 
> 标签：c#, smtp

我目前正在使用电子邮件服务器，当它收到电子邮件时，会将其添加到队列中，如果无法发送，则可以重试，并且还可以根据收到的内容发送自动回复消息。

我正在寻找能够做的是电子邮件服务器也可以是 smtp 服务器，因此用户可以配置，比如说 php 或其他电子邮件客户端使用我的电子邮件服务器 smtp，它可以接收消息然后处理它。

这是可能的吗？我该如何开始，在谷歌上没有找到太多帮助，它需要与单声道（linux）和普通的.net（windows）一起使用。

感谢您的任何帮助，您可以提供

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-12T18:02:03.240

以下是 C# 中 SMTP 服务器实现的示例：
[Create a simple SMTP server in C#](http://www.codeproject.com/Tips/286952/create-a-simple-smtp-server-in-csharp)
[SMTP and POP3 Mail Server](http://www.codeproject.com/Articles/3991/SMTP-and-POP3-Mail-Server)

# python - 正则表达式用“=”分隔字符串解析字符串？

> ID：11457724
> 
> 赞同：1
> 
> 时间：2012-07-12T17:55:28.053
> 
> 标签：python, regex

我正在尝试在 python 中编写正则表达式。假设我有一个字符串

```
string = "alpha=23; beta=34; gamma=43" 
```

我想读取这个字符串并将 和 的值存储在`alpha`数据库中。我怎样才能编写一个可以做到这一点的正则表达式。`beta``gamma`

我的猜测是我必须寻找检查单词后跟`=`符号的正则表达式。我写了这个：

```
matchObj = re.search( r'\w+(?==)', string, re.I) 
```

这输出`alpha`并停止？

1.  这个对吗？
2.  我如何读取所有值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:59:12.563

1 是的，它是正确的，搜索在第一次匹配后停止。

2尝试`findall`而不是`search`

它返回一个列表。

```
re.findall( r'(\w+)=([^;]+)', string, re.I) 
```

如果要使用拆分：

```
[re.split('=',s) for s in re.split(';',string)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:01:04.583

像这样简单的东西：

```
s = "alpha=23; beta=34; gamma=43"
re.findall(r'([a-z]+)=(\d+)', s, re.I) or # (\w+) instead I guess
# [('alpha', '23'), ('beta', '34'), ('gamma', '43')] 
```

**或没有正则表达式（可能更有用）**

```
dict(i.split('=') for i in s.split(';'))
# {'alpha': '23', ' beta': '34', ' gamma': '43'} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:01:16.277

您可以为您的字符串硬编码它：

```
alpha=(\d+); beta=(\d+); gamma=(\d+) 
```

然后使用`re.search`得到 a `MatchObject`，您可以从中分别使用组 1-3 的 和`alpha`的`beta`值`gamma`。

另一种选择是使用`findall`with

```
(\w+)=(\d+) 
```

您可以在其中使用第 1 组和第 2 组来获取标识符 ( `alpha`, ...) 和值。

# objective-c - 确定 UITextView 何时开始新行

> ID：11457725
> 
> 赞同：1
> 
> 时间：2012-07-12T17:55:33.750
> 
> 标签：objective-c, ios, xcode, uitextview, row

无论如何要确定 UITextview 何时开始新行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:05:30.867

您可以测量其中的文本并与 UITextView 的宽度进行比较

```
[textView.text textView.font textView.bounds.width lineBreakMode:UILineBreakModeWordWrap].width 
```

# java - 两个日历日期之间的 Java 日历天数不一致

> ID：11457756
> 
> 赞同：0
> 
> 时间：2012-07-12T17:56:53.200
> 
> 标签：java, calendar

```
import java.util.GregorianCalendar;

public class FullYear {

    public static void main(String[] args) {

        GregorianCalendar cal1 = new GregorianCalendar(2011,2,9); 
        GregorianCalendar cal2 = new GregorianCalendar(2011,2,12); 
        long ms1 = cal1.getTime().getTime(); 
        long ms2 = cal2.getTime().getTime(); 
        long difMs = ms2-ms1; 
        long msPerDay = 1000*60*60*24; 

        System.out.println(difMs);
        System.out.println(msPerDay);

        double days = difMs / msPerDay;

        System.out.println(days);

        GregorianCalendar cal11 = new GregorianCalendar(2011,2,9); 
        GregorianCalendar cal22 = new GregorianCalendar(2011,2,19); 
        long ms11 = cal11.getTime().getTime(); 
        long ms22 = cal22.getTime().getTime(); 
        long difMs1 = ms22-ms11; 
        long msPerDay1 = 1000*60*60*24; 

        System.out.println(difMs1);
        System.out.println(msPerDay1);

        double days2 = difMs1 / msPerDay1;

        System.out.println(days2);

    }

} 
```

这会输出 3.0 和 9.0（我希望是 10！！）。这会进行整数除法，因此 9.0 实际上是 9.95。然而，我的问题是……

*   2 月 9 日和 2 月 19 日之间的差异是 860400000 毫秒，即 239 小时。
*   2 月 9 日和 2 月 12 日之间的差异是 259200000 毫秒，即 72 小时。

第一个差异不应该是 240 小时吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T18:01:35.753

您正在计算[3 月](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#MARCH)的差异，而不是 2 月，并且您已经吞噬了夏令时的开始。

# mysql - 选择列作为其他列

> ID：11457757
> 
> 赞同：0
> 
> 时间：2012-07-12T17:57:00.313
> 
> 标签：mysql

我有下表命名`attributes`：

```
| identifier | attribute | value      |
|------------|-----------|------------|
| 23         | myKey     | myValue    |
| 24         | hisKey    | hisValue   |
| 25         | herKey    | herValue   |
| 23         | otherKey  | otherValue | 
```

我想进行 SQL 选择查询，它选择上述行，按它们的标识符对它们进行分组，并使用`attribute`作为键和`value`作为键的值。

这意味着看起来像上面的表应该变成以下 PHP 数组：

```
Array
(
    [0] => Array
        (
            [identifier] => 23
            [myKey] => myValue
            [otherKey] => otherValue
        )

    [1] => Array
        (
            [identifier] => 24
            [hisKey] => hisValue
        )

    [2] => Array
        (
            [identifier] => 25
            [herKey] => herValue
        )

) 
```

我尝试了以下 SQL 查询：

`SELECT attributes.value as atttributes.attribute FROM attributes GROUP BY identifier`

这将给出以下错误：

> 未捕获的异常“PDOException”，带有消息“SQLSTATE [42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“.attribute FROM attributes GROUP BY identifier”附近使用正确的语法

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:06:48.423

您的错误来自拼写错误。不要在别名中指定表。

> SELECT attributes.value as atttributes.attribute FROM attributes GROUP BY identifier

这是更正：

```
SELECT attributes.value as attribute FROM attributes GROUP BY identifier 
```

然而，它不会得到你想要的。MySQL 将始终返回每行中具有相同列数的结果。

您需要使用循环在代码中实现这一点。使用 ORDER BY 代替 GROUP BY，并且每当标识符更改时，启动另一个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:20:33.597

答案是您不能以合理的方式使用 SQL 执行此操作。

# php - 如何在mysql中将二进制数据解释为整数

> ID：11457759
> 
> 赞同：1
> 
> 时间：2012-07-12T17:57:05.713
> 
> 标签：php, mysql, character-encoding

我将 ip 地址保存为字符串，使用 php`inet_pton`作为四字节字符串。要使用 mysql 创建人类可读的表示，我想使用[`inet_ntoa`^(*MySQL*)](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_inet-ntoa)，但是，它似乎只接受整数值。

那么，我如何将一个字符串`!"#`（对应于 ip `32.33.34.35`，还要注意空格）读取为整数（对应`539042339`于本例中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:37:14.130

您可以使用某些东西`Hex()`将字符串转换为十六进制，然后`Conv()`将其转换为基数 10。

`SELECT inet_ntoa(conv(hex(' !"#'), 16, 10))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:03:47.413

使用 MySQL < 5.6.3，您可以使用 和 的组合来做到这`SUBSTR()`一点`ORD()`：

```
SELECT INET_NTOA(
    ORD(SUBSTR(' !"#', 1, 1)) * 16777216 +
    ORD(SUBSTR(' !"#', 2, 1)) * 65536 +
    ORD(SUBSTR(' !"#', 3, 1)) * 256 +
    ORD(SUBSTR(' !"#', 4, 1))) 
```

结果是：

```
32.33.34.35 
```

此外，由于您实际上已经在那里，您可以自己创建字符串`CONCAT()`：

```
SELECT CONCAT(
    ORD(SUBSTR(' !"#', 1, 1)), '.',
    ORD(SUBSTR(' !"#', 2, 1)), '.',
    ORD(SUBSTR(' !"#', 3, 1)), '.',
    ORD(SUBSTR(' !"#', 4, 1))) 
```

我希望您在 MySQL 5+ 或二进制列中使用 VARCHAR（而不是 CHAR），这样您就不会丢失尾随空格。

要支持 IPv6，您需要先使用`IF`语句检查长度，然后进行稍微不同的连接。

在 MySQL 5.6.3 中，新`INET6_NTOA()`功能直接支持这一点。它接受二进制字符串并同时支持 IPv4 和 IPv6：

```
SELECT INET6_NTOA(' !"#') 
```

# jquery - 等效于 jQuery 中的 .parent().parent().siblings()

> ID：11457761
> 
> 赞同：4
> 
> 时间：2012-07-12T17:57:08.227
> 
> 标签：jquery

我一直很难找到正确的选择器，而且我刚刚通过 do 让它工作`.parent().parent().siblings()`，但我知道必须有更好的方法来获得它，而不需要太多链接。

div 是动态添加的，这是我发现选择它的唯一可靠方法：

```
var current = $(".filename:contains('" + file.name + "')").parent().parent().siblings();
current.find("input[name=title]").val(obj.file_name); 
```

这是 jsFiddle 链接：http: [//jsfiddle.net/Msnf9/8/](http://jsfiddle.net/Msnf9/8/)

这是 HTML：

```
<div id="uploadifive-fileupload-queue" class="uploadifive-queue">
    <div class="uploadifive-queue-item" id="uploadifive-fileupload-file-0">
        <div class="span12 well">
            <div class="row-fluid">
                <div class="alert">
                    <div class="filename">file-name-1.jpg</div>
                    <div class="fileinfo"> - Completed</div>
                </div>
                <div class="progress">
                    <div class="bar"></div>
                </div>
            </div>

            <div class="row-fluid inputs">
                <div class="span3">
                <ul class="thumbnails">
                    <li class="span12">
                      <a href="#" class="thumbnail">
                        <img src="http://placehold.it/260x180" alt="">
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="span9">
                    <form class="form-horizontal">
                        <fieldset>
                            <div class="control-group">
                                <label class="control-label" for="file-name">File Name</label>
                                <div class="controls">
                                    <span class="input-xlarge uneditable-input file-name" /></span>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label" for="file-dimensions">File Dimensions</label>
                                <div class="controls">
                                    <span class="input-xlarge uneditable-input file-dimensions" /></span>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label" for="file-url">File URL</label>
                                <div class="controls">
                                    <span class="input-xlarge uneditable-input file-url" /></span>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label" for="alt-text">Alt Text</label>
                                <div class="controls">
                                    <input type="text" class="input-xlarge" placeholder="Alt text" name="alt-text" id="alt-text" />
                                </div>
                            </div>
                            <input type="hidden" name="image_id" />
                            <div class="form-actions">
                                <button id="save" type="button" class="btn btn-primary"><i class="icon-ok icon-white"></i> Save</button>
                                <button id="delete" type="button" class="btn btn-inverse"><i class="icon-trash icon-white"></i> Delete</button>
                         </fieldset>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T18:02:30.413

您可以使用[`closest()`](http://api.jquery.com/closest/)方法：

> 获取与选择器匹配的第一个元素，从当前元素开始，向上遍历 DOM 树。

```
var current = $(".filename:contains('" + file.name + "')").closest('.row-fluid').siblings(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:04:52.297

使用最接近（）方法，它为您提供 DOM 中元素的最近祖先。当您`row-fluid`与所需的父母上课时，该课程用于到达所需的父母。

**[现场演示](http://jsfiddle.net/Msnf9/9/)**

```
var current = $(".filename:contains('file-name-1.jpg')").closest('.row-fluid').siblings(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:01:18.130

我喜欢最亲近的，然后是孩子。

```
var current = $(".filename:contains('" + file.name + "')").closest('.row-fluid').siblings() 
```

# ms-word - Word文档到mathml？

> ID：11457764
> 
> 赞同：0
> 
> 时间：2012-07-12T17:57:15.297
> 
> 标签：ms-word, mathml

我有很多 word 文档，其中包含数学方程式、一些表格和一些用上标和下标编写的表达式。除了 MathType 是否有一个很好的工具可以将我的方程转换为 mathml？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:20:29.647

如果表达式在 Word 2007 或更高版本的内置数学格式化程序中作为数学区域输入，则 Word 包含对内置 MathML 的转换，您可以选择（通过功能区中的选项）如果您剪切并粘贴任何数学表达式，则它们是 MathML版本将被放置在剪贴板上。如果您想批量转换文档中的所有表达式而不是手动剪切和粘贴，我有一个关于该主题的旧博客

[http://dpcarlisle.blogspot.co.uk/2007/04/xhtml-and-mathml-from-office-20007.html](http://dpcarlisle.blogspot.co.uk/2007/04/xhtml-and-mathml-from-office-20007.html)

# jsf - JSF 和 Facelets 有什么区别？

> ID：11457765
> 
> 赞同：19
> 
> 时间：2012-07-12T17:57:27.857
> 
> 标签：jsf, facelets

我正在关注 Java EE6 教程，但我不明白 JSF 和 Facelets 之间的区别。第 4 章有一个“开发简单的 JavaServerFaces 应用程序”部分，第 5 章有一个“开发一个简单的 Facelets”应用程序部分，据我所知，这两个示例使用完全相同的过程 - 用于标记的 .xhmtl 页面，一个支持 bean 来保存一些数据，然后是一个将 url 映射到“FaceletsServlet”的 web.xml 文件。

从我可以收集到的 Facelets 是带有标签的 .xhtml 页面，例如用于标记网页的 <h:head> 和 <h:inputText>。

但是什么是JSF？我读过 JSP 或 Facelets 都可以与 JSF 一起使用，那么这是否意味着 JSF 的作用是提供 JSP 或 Facelets 使用的标记库？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-12T19:13:30.283

*   JSF - Java Server Faces 是首要的应用程序开发框架。它包含许多方面，其中之一是视图处理程序。[JSF（维基百科）](http://en.wikipedia.org/wiki/JavaServer_Faces)，[JSF（堆栈溢出）](https://stackoverflow.com/tags/jsf/info)。

*   Facelets 是 JSF 的视图处理程序。在 JSF 2.0 之前，JSP 是默认的视图处理程序，但问题是 JSP 不能很好地与 JSF 的基于组件的框架一起工作。Facelets 的设计初衷就是为了与 JSF 很好地协同工作。[Facelets（维基百科）](http://en.wikipedia.org/wiki/Facelets)，[Facelets（堆栈溢出）](https://stackoverflow.com/tags/facelets/info)

标记库是 JSF 规范的不同部分。它们是 UI 组件的集合。Facelets 不是标签库，许多标签库都可以与 Facelets 一起使用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-12T18:24:44.700

JSF 就像您可能已经收集了一个基于组件的系统一样。这些组件被组织在库中。

JSF 是基础标准，定义了标准 taglibs 核心和 html。其中包括输入字段、按钮、标签和链接等基本元素的标签。Facelets 是 facelets 标签库，它最初是单独分发的，但现在它包含在 JSF 标准中。Facelets 包含可用于模板的标签，如 ui:composition、ui:insert 和 ui:define。还有许多其他标记库可以与 JSF 一起使用，例如 primefaces、richfaces、tomahawk 和 trinidad。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T10:25:18.357

在我们使用 jsp 之前，JSF 与 Facelets 一起使用。Facelet 是一种基于 xml 的视图技术。

Facelets 最初是作为 JSF 1.1 和 JSF 1.2 的一种单独的替代视图声明语言创建的，它们都使用 JSP 作为默认视图声明语言。从 JSF 2.0 开始，JSF 专家组将 Facelets 推广为默认的视图声明语言。JSP 已被弃用。

facelets 提供的重要功能是模板、复合组件、内容重用。

[http://www.ibm.com/developerworks/library/j-facelets/](http://www.ibm.com/developerworks/library/j-facelets/)

# vba - 在VBA中暂停执行并等待按键的简单方法？

> ID：11457768
> 
> 赞同：2
> 
> 时间：2012-07-12T17:57:34.807
> 
> 标签：vba

我想让一个 VBA 宏暂停它的执行并等待用户在继续之前按下一个键。有没有一种快速的方法可以做到这一点，或者我最好使用弹出窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:14:48.750

警告：根据我的经验，除非您的 VBA 明确包含 DoEvents 语句，否则 Office 应用程序在 VBA 运行时无响应。

如果您只想在用户准备好之前暂时中断进程，那么使用弹出窗口是迄今为止最简单的方法。

添加类似以下内容将产生所需的结果：

```
Msgbox "Click to go on", , "Example" 
```

用户将单击以继续，或者可以按回车键或空格键。

如果您想要更具体的弹出窗口，从代码加载模式用户表单（在 Excel 中）或模式表单（在 Access 中）将暂停调用代码，直到表单关闭。

老实说，除非绝对必要，否则我会拒绝暂停。任何不必要的干扰都是对效率的烦恼和阻碍。如果您只是想通知用户正在发生的事情，您可以更新屏幕以解释代码在执行操作时正在做什么。

# svn - Ant SVN 结帐或更新

> ID：11457769
> 
> 赞同：0
> 
> 时间：2012-07-12T17:57:36.087
> 
> 标签：svn, ant, svn-checkout

我正在编写从 svn repo 更新的 ant 脚本。但是，如果我首先没有从 repo 手动完成结帐，则更新不起作用。

我希望 svnant 执行以下操作：如果 svn checkout 完成，则更新，否则执行 svn checkout 并更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:14:53.697

这里有两种方法 - 方法 1、方法 2（使用 bash 中的 if 语句来缩短然后笨拙的 ant 属性）。如果有 .svn 文件，两者都有相同的想法，那么这意味着我们正在结帐并且我们只更新，如果 .svn 丢失，我们确实需要进行结帐。

```
<?xml version="1.0"?>
<project>
  <target name="check-svn">
    <available file=".svn" property="svn.present"/>
  </target>
  <target name="method1">
    <antcall target="svnup"/>
    <antcall target="svnco"/>
  </target>
  <target name="svnup" depends="check-svn" if="svn.present">
    <exec executable="echo">
      <arg value="svn update"/>
    </exec>
  </target>
  <target name="svnco" depends="check-svn" unless="svn.present">
    <exec executable="echo">
      <arg value="svn checkout"/>
    </exec>
  </target>
  <target name="method2">
    <exec executable="bash">
      <arg value="-c"/>
      <arg value="if [ -e .svn ];then echo svn update; else echo svn checkout; fi"/>
    </exec>
  </target>
</project> 
```

重击方式：

```
([ -e .svn ] && echo svn update) || echo svn checkout 
```

# magento - 根据会话条件进行结帐会话免税

> ID：11457778
> 
> 赞同：1
> 
> 时间：2012-07-12T17:57:55.797
> 
> 标签：magento

我希望能够检查我在用户会话中设置的变量，并在此基础上使用户购物车免税。我怎样才能做到这一点？

我认为搞乱客户类型太复杂了。是否有另一种方法来改变适用的税收？或离开以即时更改客户群。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:36:31.153

我做了一些与此非常相似的事情，我将 app/code/core/Mage/Tax/Model/Calculation.php 覆盖为 app/code/local/Mage/Tax/Model/Calculation.php 并添加了显示的语句在评论下方，根据会话值将税率设置为 0。这是在结帐时即时计算的。

```
public function getRate($request)
{
    if (!$request->getCountryId() || !$request->getCustomerClassId() || !$request->getProductClassId()) {
        return 0;
    }

    $cacheKey = "{$request->getProductClassId()}|{$request->getCustomerClassId()}|{$request->getCountryId()}|{$request->getRegionId()}|{$request->getPostcode()}";
    if (!isset($this->_rateCache[$cacheKey])) {
        $this->unsRateValue();
        $this->unsCalculationProcess();
        $this->unsEventModuleId();
        Mage::dispatchEvent('tax_rate_data_fetch', array('request'=>$this));
        if (!$this->hasRateValue()) {
            $this->setCalculationProcess($this->_getResource()->getCalculationProcess($request));
            $this->setRateValue($this->_getResource()->getRate($request));
        } else {
            $this->setCalculationProcess($this->_formCalculationProcess());
        }
        $this->_rateCache[$cacheKey] = $this->getRateValue();
        $this->_rateCalculationProcess[$cacheKey] = $this->getCalculationProcess();
    }
//this is the bit you're looking for down here
    if (Mage::getStoreConfig('tax/calculation/calc_rate_zero')) {
        $_taxvat = Mage::getSingleton('checkout/session')->getQuote()->getCustomerTaxvat();
        if ( $_taxvat != null && $_taxvat != ' ') {
            $this->setRateValue( 0 );
            $this->_rateCache[$cacheKey] = $this->getrateValue();
            $this->_rateCalculationProcess[$cacheKey]= $this->getCalculationProcess();
        }
    }

    return $this->_rateCache[$cacheKey];
} 
```

# c# - WPF Gridview 上下文菜单

> ID：11457779
> 
> 赞同：3
> 
> 时间：2012-07-12T17:58:04.700
> 
> 标签：c#, wpf, xaml, gridview, contextmenu

有人知道如何将 ContextMenu 添加到 GridView 中的每一行吗？以下示例有效，但将上下文菜单添加到整个控件，也在空白区域、滚动条、标题等上。感谢您的帮助。

```
<GridView  ContextMenu="{StaticResource DisplayedContextMenu}" ItemsSource="{Binding Data}" >
   <GridView.View>
      <GridView>
         <GridViewColumn Header="Position" Width="0" DisplayMemberBinding="{Binding Position}" />
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:18:35.010

```
 <DataGrid Name="grid">
            <DataGrid.Resources>
                <Style TargetType="DataGridRow">
                    <Setter Property="ContextMenu">
                        <Setter.Value>
                            <ContextMenu>
                                <MenuItem Header="Copy Row" />
                                <MenuItem Header="Paste Row" />
                            </ContextMenu>
                        </Setter.Value>
                    </Setter>
                </Style>
            </DataGrid.Resources>
            <DataGrid.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Copy Grid" />
                    <MenuItem Header="Paste Grid" />
                </ContextMenu>
            </DataGrid.ContextMenu>
        </DataGrid> 
```

在 ListView 的情况下，您应该覆盖 ListViewItem 等的样式。

# java - VLCJ：随着视频的进行更新进度条

> ID：11457780
> 
> 赞同：0
> 
> 时间：2012-07-12T17:58:05.383
> 
> 标签：java, multithreading, swing, vlcj

请看下面的代码

```
import com.sun.jna.Native;
import uk.co.caprica.vlcj.binding.LibVlc;
import uk.co.caprica.vlcj.component.EmbeddedMediaPlayerComponent;
import uk.co.caprica.vlcj.runtime.RuntimeUtil;

import com.sun.jna.NativeLibrary;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import javax.media.bean.playerbean.MediaPlayer;
import uk.co.caprica.vlcj.player.MediaPlayerEventAdapter;
import uk.co.caprica.vlcj.player.MediaPlayerEventListener;

public class PlayMedia extends JFrame
{
    private EmbeddedMediaPlayerComponent m;
    private JProgressBar bar;

    public PlayMedia()
    {

        NativeLibrary.addSearchPath(
      RuntimeUtil.getLibVlcLibraryName(), "c:\\program files\\videolan\\vlc"
    );
    Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class);

        m = new EmbeddedMediaPlayerComponent();
        m.getMediaPlayer().addMediaPlayerEventListener(new UpdateBar());

        bar = new JProgressBar(0,100);
        bar.setStringPainted(true);

        getContentPane().add(m);
        getContentPane().add(bar,"South");

        this.setSize(500,500);
        this.validate();
        this.setLocationRelativeTo(null);

        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

         m.getMediaPlayer().playMedia("C:\\Users\\Yohan\\Desktop\\video.avi");   

    }

    private class UpdateBar extends MediaPlayerEventAdapter
    {
        public void positionChanged(MediaPlayer mp, float pos)
        {
            int value = Math.min(100, Math.round(pos * 100.0f));
            bar.setValue(value);
        }
    }

    public static void main(String[]args)
    {

            SwingUtilities.invokeLater(new Runnable() 
            {
            @Override
                public void run() 
                {
                    new PlayMedia();
                }
            });

    }
} 
```

在这里，视频播放正常，但进度条没有更新。如何在视频播放时更新进度条？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:07:43.657

我没有在 Swing 中使用 ProgressBars，但我在 Silverlight 中使用过它们，所以我认为大部分原理都是相同的。在此处查看我的问题的答案： [如何根据 Silverlight 进度条的值进行更新？](https://stackoverflow.com/questions/11245735/how-do-i-make-a-silverlight-progressbar-update-according-to-its-value)它可能无法准确地向您展示如何在 Swing 中执行此操作，但您似乎没有在代码中使用线程，这就是我的问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T23:24:06.017

由于某些未知原因，在视频期间未调用 positionChanged()。尝试使用 timeChanged() 代替，它对我有用！

```
public void positionChanged (MediaPlayer mediaPlayer , long time) { ... } 
```

# jsp - 如何在我的 webapp 中指定文件路径？

> ID：11457781
> 
> 赞同：0
> 
> 时间：2012-07-12T17:58:07.247
> 
> 标签：jsp, xml-parsing, relative-path

我有一个带有名为 msc 的子目录的 webapp。我在 msc 的一个名为 _etc/xml 的子目录中保存了一个 xml 文件。

我本地机器上的绝对路径是`c:/myproject/tomcat/webapps/javawork/msc/_etc/xml/msc_approval_managers.xml`

我希望 msc 目录中的 jsp 文件能够获取 xml 文件并通过它解析以获取要在 jsp 页面的 HTML 中使用的文本。我知道将 java scriptlet 代码放在 jsp 文件中可能不是最佳编程实践，但这是我必须做的，所以请不要让我为此感到悲伤。我无法控制那部分。最终我的代码将被放到生产服务器上，所以我需要使用相对路径来获取 xml 文件。在 ColdFusion 中，它非常简单（我必须将 CF 站点翻译成 Java），并且分三行完成，如下所示：

```
<!--- Set path to msc_approval_managers.xml ---> 
<cfset pathToXml = ExpandPath("/msc/_etc/xml/msc_approval_managers.xml")>

<!--- Read xml file into string variable ---> 
<cffile action="read" file="#pathToXml#" variable="xmlDoc"> 

<!--- Parse xml into an xml object ---> 
<cfset XMLDoc = XmlParse(xmlDoc)> 
```

然后我可以循环遍历`XMLDoc`. 显然，Java 没有那么简单。我有代码来解析 xml 并循环它。我只需要找到一种使用相对路径获取文件本身的方法，这样代码就可以上传到生产服务器并知道文件的位置（在该服务器上）而无需绝对路径。这可以在Java中完成，特别是在jsp页面中吗？

任何建议都将不胜感激，同样，请不要质疑为什么它必须在 jsp 页面中，这只是我手头任务必须处理的要求。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:12:55.777

这对 jsp 来说真的很奇怪……但是你可以得到真实的路径，然后用你的代码加载和解析文件。

```
<%
String path = request.getServletContext().getRealPath("/msc/_etc/xml/msc_approval_managers.xml");
out.write(path);
%> 
```

或者获取输入流：

```
<%
java.io.InputStream stream = request.getServletContext().getResourceAsStream("/msc/_etc/xml/msc_approval_managers.xml");
if (stream != null) out.write("Got input stream ..." );
%> 
```

# objective-c - 设置视图边界

> ID：11457782
> 
> 赞同：0
> 
> 时间：2012-07-12T17:58:13.517
> 
> 标签：objective-c, uiview, uiscrollview, uiimageview

我有一个带有图像作为子视图的滚动视图。我想将滚动视图的边界设置为图像视图的大小，这样您就看不到任何背景。

![在此处输入图像描述](../Images/a06ffc23ce730fa449be3a43fb0a2f26.png)

我不想再发生这种事了。

奇怪的是，在您放大或缩小图像后，边界似乎会自行固定，您无法再将图像移开并看到背景。

这就是我想要的代码：

```
-(UIView *) viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    // return which subview we want to zoom
    return self.imageView;
}

-(void)viewDidLoad{

    [super viewDidLoad];

    [self sendLogMessage:@"Second View Controller Loaded"];

    //sets the initial view to scale to fit the screen
    self.imageView.frame = CGRectMake(0, 0, CGRectGetWidth(self.view.bounds), CGRectGetHeight(self.view.bounds));

    //sets the content size to be the size our our whole frame
    self.scrollView.contentSize = self.imageView.image.size;

    //setes the scrollview's delegate to itself
    self.scrollView.delegate = self;

    //sets the maximum zoom to 2.0, meaning that the picture can only become a maximum of twice as big
    [self.scrollView setMaximumZoomScale : 2.5];

    //sets the minimum zoom to 1.0 so that the scrollview can never be smaller than the image (no matter how far in/out we're zoomed)
    [self.scrollView setMinimumZoomScale : 1.0];

    [imageView addSubview:button];

} 
```

我以为这条线会解决我的问题

```
//sets the content size to be the size our our whole frame
self.scrollView.contentSize = self.imageView.image.size; 
```

但就像我说的，它只有在我放大或缩小后才有效。

* * *

编辑：当我切换

`self.scrollView.contentSize = self.imageView.image.size;`

到

```
self.scrollView.frame = self.imageView.frame; 
```

它就像我想要的那样工作（你看不到背景），除了顶部的工具栏被图像覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:25:27.450

imageView.image.size 不一定是 imageView 本身的框架，尝试设置 `scrollview.frame = imageView.frame`

进而

`scrollView.contentSize = imageView.image.size`

然后你将看不到任何边框。如果您希望图像是开始时的最大尺寸，请执行

`imageView.frame = image.size;`

`[imageView setImage:image];`

`scrollView.frame = self.view.frame; //or desired size`

`[scrollView addSubView:imageView];`

`[scrollView setContentSize:image.size]; //or imageView.frame.size`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:57:14.380

为了解决这个问题，我最终声明了一个新的`CGRect`，将其原点设置为我的滚动视图的原点，将其大小设置为我的视图边界，然后将此 CGRect 分配回我的滚动视图框架

```
CGRect scrollFrame;
scrollFrame.origin = self.scrollView.frame.origin;
scrollFrame.size = CGSizeMake(CGRectGetWidth(self.view.bounds), CGRectGetHeight(self.view.bounds));
self.scrollView.frame = scrollFrame; 
```

# ruby - 如何拯救某个命名空间下的所有异常？

> ID：11457795
> 
> 赞同：23
> 
> 时间：2012-07-12T17:59:03.823
> 
> 标签：ruby, exception-handling

有没有办法拯救某个命名空间下的所有异常？

例如，我想挽救所有 Errno::* 异常（Errno::ECONNRESET、Errno::ETIMEDOUT）。我可以继续在我的例外行中列出它们，但我想知道我是否可以做类似的事情。

```
begin
  # my code
rescue Errno
  # handle exception
end 
```

上面的想法似乎不起作用，因此有类似的东西可以起作用吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-12T18:30:07.413

所有[`Errno`异常子类`SystemCallError`](http://ruby-doc.org/core/Errno.html)：

> 动态创建模块`Errno`以将这些操作系统错误映射到 Ruby 类，每个错误号生成自己的`SystemCallError`. 由于子类是在模块中创建的`Errno`，它的名称将开始`Errno::`。

所以你可以陷阱`SystemCallError`然后做一个简单的名字检查：

```
rescue SystemCallError => e
  raise e if(e.class.name.start_with?('Errno::'))
  # do your thing...
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-11T19:29:55.343

这是另一个有趣的[选择](http://ablogaboutcode.com/2011/09/21/dynamic-rescue-clause-in-ruby/)。可以适应你想要的。

粘贴最有趣的部分：

```
def match_message(regexp)
  lambda{ |error| regexp === error.message }
end

begin
  raise StandardError, "Error message about a socket."
rescue match_message(/socket/) => error
  puts "Error #{error} matches /socket/; ignored."
end 
```

请参阅 ruby​​ 1.8.7 解决方案的原始站点。

事实证明 lambda 不接受我最近的 ruby​​ 版本。似乎选项是使用 1.8.7 中的工作，但 IM 较慢（在所有比较中创建一个新类。所以我不建议使用它，甚至没有尝试过：

```
def exceptions_matching(&block)
  Class.new do
    def self.===(other)
      @block.call(other)
    end
  end.tap do |c|
    c.instance_variable_set(:@block, block)
  end
end

begin
  raise "FOOBAR: We're all doomed!"
rescue exceptions_matching { |e| e.message =~ /^FOOBAR/ }
  puts "rescued!"
end 
```

如果有人知道 ruby​​ 何时删除了 lambda 支持，`rescue`请发表评论。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T18:25:47.977

Errno 下的所有类都是 SystemCallError 的子类。SystemCallError 的所有子类都是 Errno 下的类。2 套是相同的，所以只需救援 SystemCallError。这假设您没有使用添加到一个而不是另一个的外部库。

验证 2 个集合的身份（使用 active_support）：

```
Errno.constants.map {|name|
  Errno.const_get(name)
}.select{|const|
  Class === const
}.uniq.map(&:to_s).sort ==
    SystemCallError.subclasses.map(&:to_s).sort 
```

这对我来说是回报`true`。

因此，应用于您的示例：

```
begin
  # my code
rescue SystemCallError
  # handle exception
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T18:43:58.007

这是一个更通用的解决方案，如果您想拯救一些 Errno 类型而不是其他类型。

创建一个自定义模块以包含在我们要救援的所有错误类中

```
module MyErrnoModule; end 
```

根据您的喜好自定义此数组，直至“每个”调用。

```
Errno.constants.map {|name|
  Errno.const_get(name)
}.select{|const|
  Class === const
}.uniq.each {|klass|
  klass.class_eval {
    include MyErrnoModule
  }
} 
```

测试：

```
begin
  raise Errno::EPERM
rescue MyErrnoModule
  p "rescued #{$!.inspect}"
end 
```

测试结果：

```
"rescued #<Errno::EPERM: Operation not permitted>" 
```

我猜这比需要检查异常名称的解决方案性能略好。

# perl - 在 perl 中存储与唯一键对应的值

> ID：11457796
> 
> 赞同：1
> 
> 时间：2012-07-12T17:59:09.670
> 
> 标签：perl

我是 perl 的新手。我想以下列方式存储与键对应的值。请参阅下面的示例输入数据。有人可以帮我在perl中做到这一点。

输出：

```
key  value
1  (11, 20)
2  (17, 15)
3  (10, 11) 
```

输入数据：

```
key value
2    17
3    10
1    11 
1   20
2    15
3    11 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:13:37.130

您可以将数据存储在数组哈希结构 ( [perldoc perldsc](http://perldoc.perl.org/perldsc.html) ) 中：

```
use warnings;
use strict;
use Data::Dumper;
$Data::Dumper::Sortkeys = 1;

my %data;
while (<DATA>) {
    my ($k, $v) = split;
    push @{ $data{$k} } , $v;
}

print Dumper(\%data);

=for output

$VAR1 = {
          '1' => [
                   '11',
                   '20'
                 ],
          '2' => [
                   '17',
                   '15'
                 ],
          '3' => [
                   '10',
                   '11'
                 ]
        };

=cut

__DATA__
2    17
3    10
1    11 
1    20
2    15
3    11 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:10:04.833

假设输入数据中的每一行都在一个字符串中，请使用根据定义具有唯一键的散列。

如果散列中存在键，则将值推送到 arrayref。如果它不存在，则为具有该值的键分配一个数组引用。下次出现该键时，您会将值推送到 arrayref。

```
my $hash = {};

foreach my $line ( @lines ) {
     my ($key, $val) = split(/\s/, $line);

     if( $hash->{$key} ) {
         push( @{ $hash->{ $key } }, $val );
     }
     else {
         $hash->{$key} = [ $val ];
     }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T22:11:14.150

使用单线：

```
$ echo "key value
2    17
3    10
1    11 
1   20
2    15
3    11" | perl -anE'next if 1..1;push@{$h{$F[0]}},$F[1]}{say"key  value";$"=", ";say"$_  (@{$h{$_}})"for sort{$a<=>$b}keys%h'
key  value
1  (11, 20)
2  (17, 15)
3  (10, 11) 
```

# ruby - Watir-webdriver忽略错误如何

> ID：11457797
> 
> 赞同：2
> 
> 时间：2012-07-12T17:59:10.320
> 
> 标签：ruby, watir-webdriver, selenium-chromedriver

我正在使用 ruby​​+watir-webdriver 从网站下载每日文件。有些日子没有可供下载的数据。如果数据可用，则页面上会显示下载链接，如果没有数据，则不会显示下载链接。如果找不到链接，如何使脚本不出错并停止？我希望脚本继续忽略错误。

想做类似“if then else”之类的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:12:56.070

您可以使用以下方法检查链接是否存在：

```
browser.link(:id, 'your_link_id').exists? 
```

如果链接存在，您可以单击它（否则跳过单击它）：

```
if browser.link(:id, 'your_link_id').exists?
  browser.link(:id, 'your_link_id').click
else
  #Do nothing. Note that you do not actually need this else statement.
end 
```

# jquery - 重新调整日期以正确显示

> ID：11457802
> 
> 赞同：0
> 
> 时间：2012-07-12T17:59:19.760
> 
> 标签：jquery, ruby, datetime, date

现在我的应用程序正在吐出：

`Now Showing: 2012-01-07 – 2012-06-07`

它是从以相同方式输出格式的 jQuery 日期选择器中提取的。我希望它显示为“2012 年 7 月 1 日 - 2012 年 7 月 6 日”

我试过使用 .strftime("%b %d %y") 方法，但这并没有帮助解决这个问题。

在我的应用程序中，用户从主页中选择一个日期范围，然后将该日期推送到模型`report[params][:start_date]`中`report[params][:end_date]`

这些日期被推送到一个 mySQL 查询中，该查询在`reports/id`页面上的 Javascript Highchart 中呈现。

这是一个标准的 Rails 应用程序，没有任何花哨的东西。我的目标是让日期显示为月、日、年，并且这个 jQuery 日期选择器将其格式化为年-日-月。不确定我是否应该更改文件中的日期格式`application.js`或我应该做些什么来解决这个问题。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:06:10.980

您使用的格式错误`.strftime`。它应该是

```
your_date_object.strftime("%B %d, %Y") 
```

jQuery UI 的 Datepicker 有一个[`dateFormat`](http://jqueryui.com/demos/datepicker/#option-dateFormat)选项。

```
$('your_selector').datepicker({
  // your options
  dateFormat: "MM d, yy"
}); 
```

还有一个[`$.datepicker.formatDate( format, date, settings )`](http://docs.jquery.com/UI/Datepicker/formatDate)功能可以帮助格式化日期*（如果您也选择在通过 jQuery 加载页面时重新格式化输入值）*。

# cocoa - Lion Cocoa 应用程序默认禁用工具栏按钮

> ID：11457804
> 
> 赞同：0
> 
> 时间：2012-07-12T17:59:26.023
> 
> 标签：cocoa, xcode4, nstoolbar, nstoolbaritem

我创建了一个接口 nib/xib 文件。该应用程序基本上可以运行，这很酷。标准的工具栏按钮看起来很糟糕，它们有光泽且凸起，而 Lion 中的大多数应用程序都具有扁平的内斜面外观。所以我创建了一些图像工具栏按钮并将它们放在工具栏中，它们看起来很棒，但默认情况下它们都是禁用的。

有没有办法在 InterfaceBuilder 中给这些正确的状态，或者我必须使用代码给它们正确的状态。

Cocoa 和 Objective C 非常陌生，所以如果我知道要搜索什么会对我有所帮助。我的大部分搜索都为我带来了为 iOS 创建自定义按钮的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:29:57.630

我想通了，这就是你要做的：

在 nib/xib 文件中，双击菜单栏以显示“允许的工具栏项”表。从这里，选择您创建的按钮。在我的例子中，我将选择一个我想连接到 webview 控件的后退按钮。Ctrl 单击并从按钮拖动到要连接的位置，然后进行适当的连接。就我而言，我从 WebView 中选择 goBack。

一旦它有一个连接，它现在就会变得活跃。

# php - 如何使用 PHP 通过 URL 加载 XML 文件

> ID：11457810
> 
> 赞同：0
> 
> 时间：2012-07-12T18:00:05.510
> 
> 标签：php, xml

我想使用 PHP 从“HTTP://127.0.0.1/19/1”之类的 URL 加载 XML，我该怎么做？我尝试了几种方法，但都失败了..所以在这里寻求帮助..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:04:49.283

```
<?php
$x=simplexml_load_file("HTTP://127.0.0.1/19/1");
?> 
```

# delphi - 用于 msctf.h 头文件的 Delphi 单元（来自 Platform SDK）？

> ID：11457811
> 
> 赞同：0
> 
> 时间：2012-07-12T18:00:09.353
> 
> 标签：delphi, header-files, platform-sdk

平台 SDK中是否有任何可用的 Delphi 单元对应**的 msctf.h**头文件？

我检查了 Delphi 2010 源文件夹，但似乎 Delphi 没有附带它。

在此先感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:09:03.050

您可以使用 Visual Studio 的[MIDL](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367300%28v=vs.85%29.aspx)从 .idl 文件生成类型库 (.tlb)，然后使用 Delphi 的 tlibimp.exe 生成 Delphi 接口单元。

原始 .idl 的问题在于它不包含[库](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367069%28v=vs.85%29.aspx)语句，因此我手动添加了它（否则 MIDL 不会生成 .tlb）。

看看[结果是否对](http://pastebin.com/PBcJeuKV)您有帮助（您可能仍需要手动修复某些部件）。

# c# - ASP.Net xml Web 服务属性返回空值

> ID：11457812
> 
> 赞同：0
> 
> 时间：2012-07-12T18:00:09.890
> 
> 标签：c#, asp.net, web-services, cryptography

我的 Web 服务器上有一个传统的 Xml Web 服务。它有一个服务调用 Main Service。下面给出了类的概述。

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
    // [System.Web.Script.Services.ScriptService]
public class MainService : System.Web.Services.WebService
{

    private byte[] symmetricKey;
    private byte[] symmetricIv;

    public byte[] SymmetricKey
    {

        get { return symmetricKey; }
        set { symmetricKey = value; }
    }
    public byte[] SymmetricIv
    {
        get { return symmetricIv; }
        set { symmetricIv = value; }
    }

    //Constructor

    public MainService()
    {
        this.GetDatabaseInstance();
    }

//Some Web Methods Heare to create the Symmetric Key
} 
```

在我的客户中，我有一种方法，我有以下绳索

```
MainService mainService=new MainsService();

//Calling to Some web method to create symmetric keys and assign those properties

//Now trying to access those properties

var key=mainService.SymmetricKey; 
```

当我访问它时，变量“key”正在获取空值。但我调试了 Web 服务类。私有变量正在获取值。为什么值没有出现在客户端代码上？可能是属性在没有设置值的情况下设置了引用？因为我可以通过 web 方法返回一个 OUT 变量来访问变量值？任何人都可以解释答案吗？

以下方法是创建密钥的网络方法

```
 [WebMethod]
    //create a symmetric key and encript it using clients public key and return values
    public bool CreateKeys(byte[] exponent, byte[] modulus)
    {
        try
        {
            //Create a new instance of the RSACryptoServiceProvider class.
            var rsaCryptoServiceProvider = new RSACryptoServiceProvider();

            //Create a new instance of the RSAParameters structure.
            RSAParameters rsaKeyInfo = new RSAParameters();

            //Set RSAKeyInfo to the public key values. 
            rsaKeyInfo.Modulus = modulus;
            rsaKeyInfo.Exponent = exponent;

            //Import key parameters into RSA.
            rsaCryptoServiceProvider.ImportParameters(rsaKeyInfo);

            //Create a new instance of the RijndaelManaged class.
            var rijndaelManaged = new RijndaelManaged();
            rijndaelManaged.GenerateKey();
            rijndaelManaged.GenerateIV();

            //save  the symmetric key and IV
            SymmetricKey = rijndaelManaged.Key;
            SymmetricIv = rijndaelManaged.IV;

            //Encrypt the symmetric key and IV.
            encryptedSymmetricKey = rsaCryptoServiceProvider.Encrypt(rijndaelManaged.Key, false);
            encryptedSymmetricIv = rsaCryptoServiceProvider.Encrypt(rijndaelManaged.IV, false);

            return true;
        }
        catch (Exception)
        {
            throw;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:04:45.787

在您正在使用的客户端代码中`var key=mainService.symmetricKey;`

但是 symmetricKey 是私有的`byte[]`，不能在其 contianing 类型之外访问。所以你将不得不使用`public property SymmetricKey`这样的

```
var key=mainService.SymmetricKey; 
```

更新 ：

我怀疑导致问题的线路一定是这个

```
 SymmetricKey = rijndaelManaged.Key; 
```

CreateKeys 方法中的 catch 块也通过 throw 冒泡异常；

# iphone - 如何区分没有 Twitter 访问权限的应用程序和没有帐户设置的 Twitter？

> ID：11457818
> 
> 赞同：3
> 
> 时间：2012-07-12T18:00:19.130
> 
> 标签：iphone, authentication, ios5, twitter, acaccount

我了解如何使用以下方式请求访问 Twitter：

`requestAccessToAccountsWithType:withCompletionHandler`：

但是，如果应用程序未经授权，则会弹出一个对话框。如何静默检查**应用程序是否已授权**？

我可以使用以下方法检查帐户数量：

```
 NSArray *twitterAccounts = [store accountsWithAccountType:twitterAccountType]; 
```

但是，如果我的应用程序未经授权并且没有可用的帐户，我将得到一个空数组。我看不出有一种方法可以找出其中的哪一个。

为了澄清，我需要区分以下情况：

1.  用户未授予应用程序使用 Twitter 的权限。
2.  用户已授予权限但尚未设置任何 Twitter 帐户。

`TWTweetComposeViewController canSendTweet`如果应用程序被授权并且至少有一个帐户设置，则还有一个返回 true 。但是，如果它返回 false，这再次使我无法分辨这两种情况之间的区别。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T22:33:54.490

看起来每个帐户类型都有一个 accessGranted 属性，您可以检查您是否已被授权使用它：http: [//developer.apple.com/library/ios/#DOCUMENTATION/Accounts/Reference/ACAccountTypeClassRef/Reference /Reference.html#//apple_ref/doc/uid/TP40011022](http://developer.apple.com/library/ios/#DOCUMENTATION/Accounts/Reference/ACAccountTypeClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40011022)

所以我会先检查一下你是否已经获得授权，如果是，*然后*拉出 twitter 帐户列表，看看数组中是否有任何内容。

# javascript - 向元素添加第二个背景图像

> ID：11457820
> 
> 赞同：0
> 
> 时间：2012-07-12T18:00:26.107
> 
> 标签：javascript, jquery, css

我想知道是否可以通过 CSS3 或 jQuery/js 将第二个背景图像分配给元素。

为了清楚起见，我知道我可以这样做：

```
 .someElement { background-image: url(sheep.png), url(betweengrassandsky.png); } 
```

问题是我需要这样做：

```
 .someElement             { background-image: url(sheep.png); }
 .someElement.secondClass { background-image: url(betweengrassandsky.png); } 
```

问题是这只会覆盖第一个背景图像而不是组合它们。有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:02:47.880

您必须重复第一行 CSS 中显示的第一个背景图像。

如果你愿意，你可以检查`.someElement`它是否有第二个类，并使用 jQuery 应用它：

```
$('.someElement').each(function() {
    if ($(this).hasClass('secondClass')) {
        var background = $(this).css('background-image');
        $(this).css('background-image', background + ', url(betweengrassandsky.png)');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:04:45.267

怎么样：

```
 .someElement             { background-image: url(sheep.png); }
 .someElement.secondClass { background-image: url(sheep.png), url(betweengrassandsky.png); } 
```

# c++ - 如何标准化一维 FFT 输出

> ID：11457821
> 
> 赞同：2
> 
> 时间：2012-07-12T18:00:26.680
> 
> 标签：c++, fft, fftw

我正在使用 FFTW 分析高程数据，但我只是通过查看一个简单的 1D fft 来确保一切正常。除了标准化（比例）因素外，它似乎有效，我无法从文档中弄清楚，主要是因为我的数字大得离谱。例如，当我试图只取一个余弦波的 fft

```
1 6.12323e-017 -1 -1.83697e-016 1 3.06162e-016 -1 -4.28626e-016 1 5.51091e-016 -1      -2.44991e-015 etc... 
```

我得到了转变

```
4.33743e-013 1.06036e+267 3.25205e+265 1.05963e+267 6.49675e+265 1.05743e+267 9.72679e+265 1.05379e+267 1.29349e+266    1.04869e+267 1.61138e+266 1.04216e+267 etc... 
```

例如，可笑的巨大数字。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T18:07:16.913

您正在对复数进行 FFT，但您将数组初始化为普通（没有虚部）数组。

我继续站在他们一边，发现有一些新功能可以提供双重到复杂和复杂到双重 fft-ing。整洁-o！

这里：[http ://www.fftw.org/doc/New_002darray-Execute-Functions.html](http://www.fftw.org/doc/New_002darray-Execute-Functions.html)

# jquery - 每次单击按钮时如何存储 id localstorage

> ID：11457823
> 
> 赞同：0
> 
> 时间：2012-07-12T18:00:35.657
> 
> 标签：jquery, mobile, local-storage

我有以下问题，我正在使用 jquery mobile 构建一个 webapp。在 webapp (index.html) 的启动页面上，我显示了一个事件列表。当用户点击一个事件时，(eventsDetail.html) 被加载。在此页面上，用户可以选择通过“单击 joinContest 按钮”来参加比赛。

**问题：** 当我多次单击 joinContest 按钮并导航回 index.html 并单击 .btn-showContests 按钮时，只存储了一个 id（这是我上次单击的比赛的 id）如何存储所有的 id我点击的比赛，所以当我导航回 index.html 并点击 .btn-showContests 时，它会得到我点击的所有 id 吗？

文件：**eventdetails.js**

```
$('.btn-joinContest').live('click', function(e){
    if (Modernizr.localstorage) {
        var id = getUrlVars()["id"];

        localStorage.setItem("contestId", id);
    } else {
        console.log('browser doesnt support localstorage')
    }   
}); 
```

文件：**eventlist.js**

注意：当我单击按钮 .btn-showContests 时，它会执行此功能。

```
function showContests(){
    var contests = localStorage.getItem("contestId");
    if(contests == null) {
        console.log('Nothing in store');
    }
    else if (contests.length === 0) {
        console.log('Store contains empty value');
    }          
    console.log(contests.length);       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:32:23.437

我认为每次单击按钮时，都会覆盖“contestId”，如果要保留单击项目的列表，则可能需要这样做

```
var currentlist = localStorage.getItem("contestId");
currentlist = currentlist +" "+ id;
localStorage.setItem("contestId", currentlist); 
```

或者更好的风格..将它存储在一个数组中。

希望这会有所帮助~

# ios - Instagram 上的水平进度 HUD 指示器

> ID：11457825
> 
> 赞同：-1
> 
> 时间：2012-07-12T18:00:36.183
> 
> 标签：ios, user-interface

是否有可用的开源库为 iOS 提供水平进度条？我知道`MBProgressHUD`做一个圆形的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:09:03.007

嗯，我不知道 Instagram HUD 的外观如何，但我知道您正在寻找这样的东西：

![原子HUD](../Images/28842c0794c6d7f2ba2afb7bc3dfacab.png)

[在此处](https://github.com/atomton/ATMHud)查看源代码页面及其演示。

# backbone.js - 使用 fabric.Image.fromURL 加载 base64 图像

> ID：11457828
> 
> 赞同：6
> 
> 时间：2012-07-12T18:00:53.647
> 
> 标签：backbone.js, base64, fabricjs

我正在使用`fabric.js`inside `backbone.js`，并试图弄清楚如何使用`fabric`'s 命令加载 Base64 图像：

```
fabric.Image.fromURL( 'url', function(img).... 
```

当我插入静态 url 时它工作正常，例如：

```
fabric.Image.fromURL('http://www.domain.com/image.jpg', function(img) {
    img.set({ left: ui.offset.left, top: ui.offset.top});
    canvas.add(img);       
}); 
```

但我无法成功加载 Base64 图像。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:14:21.560

试试：`data:image/jpeg;base64,"+url`。如果这不起作用，那么`base64`您可能已经坏了，或者您可能需要调整[此处](https://stackoverflow.com/a/5100158/1309352)`base64`提供的`unit8`转换技术并将图像[数据](http://www.w3schools.com/html5/canvas_imagedata_data.asp)添加到放置在画布内的图像对象中。

[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-15T13:41:59.300

确保您的数据 url 符合以下格式：

> 数据：[<媒体类型>][;base64]，<数据>

[MDN](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs)

`<data>`上面应该是一个有效的*base64*字符串。

如果你想测试是不是织物没有渲染 url 或者 url 不正确，尝试在浏览器中打开整个数据 url，如果它是正确的数据 url，浏览器将渲染图像。

Fabric 应该适用于*base64*数据 url，因为它适用于*http*图像地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-01T21:00:37.540

以上所有答案都是正确的。但是没有例子，答案并不明显。

```
fabric.Image.fromURL('data:image/png;base64,iVBORw0KGgo....', function(img) {
    img.set({ left: ui.offset.left, top: ui.offset.top});
    canvas.add(img);       
}); 
```

# eclipse - osgi + maven + maven-pax-plugin 的 Eclipse 错误

> ID：11457829
> 
> 赞同：6
> 
> 时间：2012-07-12T18:01:00.390
> 
> 标签：eclipse, maven, osgi, m2e

我正在尝试创建一个 OSGi 包并将其集成到 Eclipse 中。我正在使用 maven-pax-plugin 创建捆绑包。这些是我遵循的步骤

我使用 pax 创建了一个 osgi 项目

```
mvn org.ops4j:maven-pax-plugin:create-project -DgroupId=org.sonatype.mcookbook -DartifactId=osgi-project -Dversion=1.0-SNAPSHOT 
```

然后创建一个包

```
mvn pax:create-bundle -Dpackage=org.sonatype.mcookbook -Dname=osgi-bundle -Dversion=1.0-SNAPSHOT 
```

然后尝试将maven项目导入eclipse（文件/导入/现有maven项目）第二步创建的bundle项目总是给我这个错误

```
maven-pax-plugin:1.5:compile (1 error)
   Execution default-compile, in org.sonatype.mcookbook/pom.xml
maven-pax-plugin:1.5:testCompile (1 error)
   Execution default-testCompile, in org.sonatype.mcookbook/pom.xml 
```

当我选择描述中的一个错误时

```
No marketplace entries found to handle Execution default-compile, in org.sonatype.mcookbook/pom.xml in Eclipse.  Please see Help for more information. 
```

如果我忽略错误并导入项目，这就是 eclipse 抱怨的

```
Plugin execution not covered by lifecycle configuration: org.ops4j:maven-pax-plugin:1.5:compile (execution: default-compile, phase: compile) 
```

有人见过这个吗？任何想法如何解决它？我正在关注[本教程](http://www.sonatype.com/books/mcookbook/reference/sect-osgi-generate-project.html)，但添加了与 eclipse 的集成。但是请注意，如果我使用 maven 构建它并且根本不使用 eclipse，那么一切正常，问题出在 eclipse/m2e

我正在使用 Eclipse Indigo SR2 和 m2e 1.0.200

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T09:33:42.113

我通过遵循生成的 POM 中的注释来解决这个问题，并将其移至`<extensions>true</extensions>`下面的 maven-bundle-plugin 给出：

```
 ...
  <plugins>
    <plugin>
      <groupId>org.ops4j</groupId>
      <artifactId>maven-pax-plugin</artifactId>
      <version>1.4</version>
      <!--
         | enable improved OSGi compilation support for the bundle life-cycle.
         | to switch back to the standard bundle life-cycle, move this setting
         | down to the maven-bundle-plugin section
        -->
      <!-- WAS HERE -->
    </plugin>
    <plugin>
      <groupId>org.apache.felix</groupId>
      <artifactId>maven-bundle-plugin</artifactId>
      <version>1.4.3</version>
      <!--
       | the following instructions build a simple set of public/private
       | classes into an OSGi bundle
      -->
      <extensions>true</extensions> <!-- MOVED HERE :-) -->
      <configuration>
    ... 
```

然后更新项目（在Project Explorer中右键项目名称：Maven -> Update Project...），等待构建完成，错误消失。

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T10:16:15.257

新的 m2eclipse 版本要求使用 m2eclipse 插件支持每个影响构建的插件。所以 maven-pax-plugin 还不支持。因为这基本上发生在大多数 maven 插件上，所以我仍然使用旧的 m2eclipse 版本。不幸的是，最近似乎已删除旧版本 0.12 下载。因此，您可能必须等到支持 maven-pax-plugin。

# build - 列出 Play 框架中的依赖项和存储库

> ID：11457838
> 
> 赞同：4
> 
> 时间：2012-07-12T18:01:51.303
> 
> 标签：build, playframework, dependencies, playframework-2.0, sbt

我有一个带有依赖项的 play 2.0 项目。我想知道每个依赖项来自哪个存储库。

我可以使用`play`命令或 SBT 列出依赖项及其各自的存储库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T21:06:36.780

到目前为止，似乎没有办法列出依赖项来自的存储库。我已向 Play Google Group 发送了一个问题，正在等待审核。如果我学到新东西，我会更新答案。

# python - 在 PyQt 中使用文件属性填充表

> ID：11457839
> 
> 赞同：0
> 
> 时间：2012-07-12T18:01:55.667
> 
> 标签：python, pyqt, qtablewidget

我正在尝试使用在脚本中其他地方打开的文件的属性填充 QTableWidget。我已经使用以下代码成功设置了从文件中读取的文件属性：

```
class FileHeader(object):

fileheader_fields=(
    "filetype","fileversion","numframes",
    "framerate","resolution","numbeams",
    "samplerate","samplesperchannel","receivergain",
    "windowstart","winlengthsindex","reverse",
    "serialnumber","date","idstring","ID1","ID2",
    "ID3","ID4","framestart","frameend","timelapse",
    "recordInterval","radioseconds","frameinterval","userassigned")

fileheader_formats=(
    'S3','B','i4','i4','i4','i4','f','i4','i4','i4',
    'i4','i4','i4','S32','S256','i4','i4','i4','i4',
    'i4','i4','i4','i4','i4','i4','S136')

IMAGE_HEADER_BYTES = 256
IMAGES_DATA_BYTES = 49152

def __init__(self,filename=''):
    self.filename = filename

    if filename:
        self.setFile(filename)
    else:
        # initialize our attributes to None
        for field in self.fileheader_fields:
            setattr(self,field,None) 
    def setFile(self, f):
    self.infile=open(f, 'rb')
    dtype=dict(names=self.fileheader_fields, formats=self.fileheader_formats)
    self.fileheader=np.fromfile(self.infile, dtype=dtype, count=1)
    self.fileheader_length=self.infile.tell()

    for field in self.fileheader_fields:
        setattr(self,field,self.fileheader[field]) 
```

我已使用此代码填充表，但我不断收到“FileHeader has no attribute fileheader”错误。

```
from fileheader import FileHeader, Frame
from echogram import QEchogram
from PyQt4.QtGui import *
from PyQt4.QtCore import *
import os, sys

class MainWindow(QWidget):

    def __init__(self, parent=None):
        self.fileheader_fields=FileHeader.fileheader_fields
        self.fileheader_values=FileHeader.fileheader[field]
        self.fileheader={field: "value of" + field
                         for field in self.fileheader_fields}
        super(MainWindow, self).__init__(parent)
        self.fileheader_table=QTableWidget()
        layout=QVBoxLayout()
        layout.addWidget(self.fileheader_table)
        self.setLayout(layout)
        self.populate

    def populate(self):
        self.fileheader_table.setRowCount(len(self.fileheader_fields))
        self.fileheader_table.sestColumnCount(2)
        self.fileheader_table.setHorizontalHeaderLabels(['name','value'])
        for i,field in enumerate(self.fileheader_fields):
            name=QTableWidgetItem(field)
            value=QTableWidgetItem(self.fileheader[field])
            self.fileheader_table.setItem(i,0,name)
            self.fileheader_table.setItem(i,1,value)

    if __name__=="__main__":
        app=QApplication(sys.argv)
        filename=str(QFileDialog.getOpenFileName(None,"open  file","C:/vprice/DIDSON/DIDSON  Data","*.ddf"))
        wnd=MainWindow()
        wnd.resize(640,480)
        wnd.show()
        #echoGram=QEchogram()
        #echoGram.initFromFile(filename)
        #fileName="test.png"
        #echoGram.processEchogram()
        #dataH=echoGram.data
        #print "Horizontal data", dataH 
```

请耐心等待——我大约一个月前才开始接触所有 Python 的东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:59:45.213

见`populate`方法。[文档](http://qt-project.org/doc/qt-4.8/qtablewidget.html#details)中也有一些示例

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
import sys
from PyQt4 import QtCore, QtGui

class MainWindow(QtGui.QWidget):

    def __init__(self, parent=None):

        self.fileheader_fields=(
            "filetype","fileversion","numframes",
            "framerate","resolution","numbeams",
            "samplerate","samplesperchannel","receivergain",
            "windowstart","winlengthsindex","reverse",
            "serialnumber","date","idstring","ID1","ID2",
            "ID3","ID4","framestart","frameend","timelapse",
            "recordInterval","radioseconds","frameinterval","userassigned"
        )
        # just for test
        self.fileheader = {field: 'value of ' + field 
                           for field in self.fileheader_fields}
        super(MainWindow, self).__init__(parent)
        self.table_widget = QtGui.QTableWidget()
        layout = QtGui.QVBoxLayout()
        layout.addWidget(self.table_widget)
        self.setLayout(layout)
        self.populate()

    def populate(self):
        self.table_widget.setRowCount(len(self.fileheader_fields))
        self.table_widget.setColumnCount(2)
        self.table_widget.setHorizontalHeaderLabels(['name', 'value'])
        for i, field in enumerate(self.fileheader_fields):
            name = QtGui.QTableWidgetItem(field)
            value = QtGui.QTableWidgetItem(self.fileheader[field])
            self.table_widget.setItem(i, 0, name)
            self.table_widget.setItem(i, 1, value)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    wnd = MainWindow()
    wnd.resize(640, 480)
    wnd.show()
    sys.exit(app.exec_()) 
```

**UPD**

您的具体案例的代码：

```
from fileheader import FileHeader, Frame
from echogram import QEchogram
from PyQt4.QtGui import *
from PyQt4.QtCore import *
import os, sys

class MainWindow(QWidget):

    def __init__(self, filename, parent=None):
        super(MainWindow, self).__init__(parent)
        # here we are loading file
        # now self.fileheader contains attributes
        self.fileheader = FileHeader(filename)
        self.fileheader_table = QTableWidget()
        layout = QVBoxLayout()
        layout.addWidget(self.fileheader_table)
        self.setLayout(layout)
        self.populate()

    def populate(self):
        self.fileheader_table.setRowCount(len(self.fileheader.fileheader_fields))
        self.fileheader_table.sestColumnCount(2)
        self.fileheader_table.setHorizontalHeaderLabels(['name','value'])
        for i,field in enumerate(self.fileheader.fileheader_fields):
            name=QTableWidgetItem(field)
            value=QTableWidgetItem(getattr(self.fileheader, field))
            self.fileheader_table.setItem(i,0,name)
            self.fileheader_table.setItem(i,1,value)

    if __name__=="__main__":
        app=QApplication(sys.argv)
        filename=str(QFileDialog.getOpenFileName(None,"open  file","C:/vprice/DIDSON/DIDSON  Data","*.ddf"))
        wnd=MainWindow(filename)
        wnd.resize(640,480)
        wnd.show()
        #echoGram=QEchogram()
        #echoGram.initFromFile(filename)
        #fileName="test.png"
        #echoGram.processEchogram()
        #dataH=echoGram.data
        #print "Horizontal data", dataH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:53:11.117

好的，您必须将 QTableWidget 添加到您的自定义 QtGui.QMainWindow 中，我将使用 0 行和适量的列创建我，如下所示：

```
self.tableArea=QtGui.QTableWidget(0,self.fileheader_length,self)
self.setHorizontalHeaderLabels(['nameOne','nameTwo'])#will name your top header

self.verticalHeader().setVisible(False)#will hide your left header if you don't need them 
```

并一一添加您的行 self.tableArea.insertRow(row)#它将在行位置添加一行

之后你必须为每个单元格创建一个 QTableWidgetItem

```
 itemTo=QtGui.QTableWidgetItem('text')#replace text by your value 
```

并将您的项目放在您想要的单元格中

```
 self.tableArea.setItem(row, column, itemTo) 
```

# python - 简单的函数分配错误python

> ID：11457845
> 
> 赞同：1
> 
> 时间：2012-07-12T18:02:15.460
> 
> 标签：python, sage

我有一个关于 Sage/Python 的问题，但我确信这是一个非常普遍的 CS 问题。我有一个包含 N 个变量的 N 个非线性方程的大型系统。在将其传递给数值求解器之前，我尝试让 Sage 使用 solve 简化方程。在处理一个简单的示例时，我有以下内容：'eqa' 是要在变量 x0、x1、w0、w1 等中求解的方程列表。以下在命令行中可以正常工作：

```
 j(x0,x1,w0,w1,y0,y1,z0,z1) = solve(eqa, var('x0 x1 w0 w1 y0 y1 z0 z1')) 
```

（我试图将方程列表定义为“可调用的符号表达式”（Sage），因为我使用的数值优化对这些而不是普通的 def python 函数更有效。）

无论如何，当我将它包含在脚本中并尝试加载它时，我会收到错误消息：

```
 j(x0,x1,w0,w1,y0,y1,z0,z1) = solve(eqa, var('x0 x1 w0 w1 y0 y1 z0 z1'))
SyntaxError: can't assign to function call 
```

我知道我一定在命令行做错了什么，它只是靠运气。或者在脚本中定义这些可调用的符号表达式时是否需要特别小心？感谢您提供的任何见解。这是有关这些类型“功能”之间区别的链接

[http://www.sagemath.org/doc/tutorial/tour_functions.html](http://www.sagemath.org/doc/tutorial/tour_functions.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:11:01.200

这种定义函数的方式是 Sage 特有的，并且被标准 Python 语法所禁止。我的猜测是（1）您正在尝试使用 Python 运行您的脚本，或者（2）您正在使用 Sage，但您的文件名以 Sage 结尾，`.py`因此 Sage 将其解释为 Python 文件。

例如：

```
~/coding$ cat test.sage 
f(x, y) = 3*x+y
print f(3,4)

~/coding$ sage test.sage 
13
~/coding$ cp test.sage test.py
~/coding$ sage test.py
  File "test.py", line 1
    f(x, y) = 3*x+y
SyntaxError: can't assign to function call
~/coding$ python test.py
  File "test.py", line 1
    f(x, y) = 3*x+y
SyntaxError: can't assign to function call 
```

# python - 如何在方法调用中的关键字 arg 之后使用非关键字 arg？

> ID：11457850
> 
> 赞同：2
> 
> 时间：2012-07-12T18:02:26.910
> 
> 标签：python, function, arguments, keyword

所以我有一个这样定义的函数：

```
def getDistnace(self, strings, parentD, nodeName, nodeDistance): 
```

我用它来称呼它：

```
Node.getDistnace(newNode, strings, parentD, nodeName=None, nodeDistance=None) 
```

和

```
Node.getDistnace(node, strings=None, parentD=None, nodeName, nodeDistance) 
```

它们都来自其他两个不同的功能。但我的问题是我收到一条错误消息，指出存在`non-keyword arg after keyword arg`.

有没有办法解决这个错误？第一个`Node.getDistnace`添加`strings`and`parentD`到`getDistance`，第二个`Node.getDistnace`添加`nodeName`and`nodeDistance`到函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T18:04:00.273

你所有的参数都是位置的，你根本不需要使用关键字：

```
Node.getDistnace(newNode, strings, parentD, None, None)

Node.getDistnace(node, None, None, nodeName, nodeDistance) 
```

我认为您混淆了局部变量（传递给函数的内容）和函数的参数名称。它们恰好在您的代码中匹配，但不要求它们确实匹配。

以下代码与您的第一个示例具有相同的效果：

```
arg1, arg2, arg3 = newNode, strings, parentD
Node.getDistnace(arg1, arg2, arg3, None, None) 
```

如果您*确实*想使用关键字参数，那很好，但它们后面不能跟位置参数。然后你可以改变顺序，python 仍然会匹配它们：

```
Node.getDistnace(node, nodeDistance=nodeDistance, strings=None, parentD=None, nodeName=nodeName) 
```

这里我移到`nodeDistance`了关键字参数的前面，但是 Python 仍然会将它匹配到`getDistnace`方法的最后一个参数。

# ios - 如何调试 wait_fences 错误

> ID：11457853
> 
> 赞同：0
> 
> 时间：2012-07-12T18:02:34.237
> 
> 标签：ios, multithreading, wait-fences

wait_fences：未能收到回复：10004003

我继续收到此错误。它发生在我的应用程序启动时。我将如何调试这个问题。有什么方法可以让我观察 wait_fences，看看那里发生了什么。有什么方法可以查看哪些线程阻塞了什么？

感觉这个错误只不过是一个没有工具或信息进入或离开虚空的黑洞。

任何有调试此错误提示的人将不胜感激。

**新的**

我现在改变了我的线程，所有线程调用都通过这个方法集来完成所有的调度

**注意：**我也希望你们不要仅仅因为看到另一个关于这个问题的问题就投票结束我的问题。没有关于此错误的真实信息。我需要知道是什么导致了这个错误和/或如何调试它。不是常见的“将超级调用添加到您的 viewDidAppear 等。如果这些有帮助，我不会问这个问题。

```
+ (void) ensureDispatchOfBlock:(dispatch_block_t) block onQueue:(dispatch_queue_t) queue  async:(BOOL) async{
    if (dispatch_get_current_queue() == queue){
        block();
    }
    else {
        if (async){
            dispatch_async(queue, block);
        }
        else {
            dispatch_sync(queue, block);
        }
    }
}

+ (void) ensureDispatchOnMainThread:(dispatch_block_t) block async:(BOOL) async{
    [self ensureDispatchOfBlock:block onQueue:dispatch_get_main_queue() async:async];
}

+ (BOOL) addBlock:(dispatch_block_t) block toQueue:(dispatch_queue_t) queue async:(BOOL) async {
    if (!async && dispatch_get_current_queue() == queue){
        return NO;
    }
    if (async){
        dispatch_async(queue, block);
    }
    else {
        dispatch_sync(queue, block);
    }
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:15:11.780

该错误通常是由于尝试为屏幕上不可见的内容设置动画而出现的。如果它发生在启动时，我猜你正试图在 viewDidLoad 中启动动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:55:52.663

我会寻找对超级视图（Did/Will）出现的缺失调用。如果省略这些，您将看到“等待围栏”，无论这意味着什么。

# ios - 警报视图活动指示器显示时间

> ID：11457860
> 
> 赞同：2
> 
> 时间：2012-07-12T18:03:25.000
> 
> 标签：ios, xcode, uialertview

我使用警报视图显示活动指示器：

```
 UIAlertView *Alert= [[UIAlertView alloc] initWithTitle:@"Loading"
                                               message:@"\n"
                                              delegate:self
                                     cancelButtonTitle:nil
                                     otherButtonTitles:nil];

UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];   
spinner.center = CGPointMake(139.5, 75.5); 
[Alert addSubview:spinner];
[spinner startAnimating];
[Alert show];    

[Alert dismissWithClickedButtonIndex:0 animated:YES]; 
```

唯一的事情是它很快就会从屏幕上消失，我想指定警报在屏幕上停留的时间，比如两秒钟，而不是现在显示的纳秒。我不确定如何进行/实现这一点，我会使用某种 NSTimer，如果是的话，我将非常感谢一些如何实现这一点的建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:35:24.047

这是我将如何使用`NSTimer`and解决问题的示例`NSInvocation`。我没有测试它，所以可能会遇到一些问题。

```
UIAlertView *Alert= [[UIAlertView alloc] initWithTitle:@"Loading"
                                               message:@"\n"
                                              delegate:self
                                     cancelButtonTitle:nil
                                     otherButtonTitles:nil];
UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];   
spinner.center = CGPointMake(139.5, 75.5); 
[Alert addSubview:spinner];
[spinner startAnimating];
[Alert show];  
NSMethodSignature *mySignature = [UIAlertView instanceMethodSignatureForSelector:@selector(dismissWithClickedButtonIndex:animated:)];
NSInvocation *myInvocation = [NSInvocation invocationWithMethodSignature:mySignature];
[myInvocation setSelector:@selector(dismissWithClickedButtonIndex:animated:)];
[myInvocation setTarget:Alert];
int buttonIndex = 0;
bool isAnimated = YES;
[myInvocation setArgument:&buttonClicked 
                  atIndex:2];
[myInvocation setArgument:&isAnimated 
                  atIndex:3];
NSTimer *t = [NSTimer scheduledTimerWithTimeInterval:2 
                                          invocation:myInvocation 
                                             repeats:NO]; 
```

我仍然认为这不是问题的最佳答案。在大多数情况下，您应该使用指标直到要完成的工作完成，而不是基于时间，尤其不是可以改变或依赖于其他因素的时间。

所以正确的答案是等到工作完成，然后关闭`UIAlertView`.

# jquery - Jquery将文件名和文件路径从输入对话框传递给控制器 MVC 3

> ID：11457863
> 
> 赞同：0
> 
> 时间：2012-07-12T18:03:31.483
> 
> 标签：jquery, asp.net-mvc-3

如何使用 jquery / json 将输入对话框文件名和文件路径传递给使用 MVC 3 的控制器？

我正在使用 ado.net。

任何帮助或在任何地方寻找这个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:37:12.733

将发布有关如何在 MVC3 中上传文件的答案

在您的控制器中，您需要一个方法

```
[HttpPost]
public ActionResult FileUpload( HttpPostedFileBase file )
{
    byte[] buffer = new byte[file.InputStream.Length];
    file.InputStream.Read( buffer, 0, (int)file.InputStream.Length );
    // You need to have some method of saving the bytes of this file, or use the 
    // file.SaveAs() method to save this to a targeted directory your web server
    // has access to
    YourCode.SaveFile( buffer, file.FileName );
    return View( );
} 
```

和这样设置的视图：

```
@using ( Html.BeginForm("FileUpload","YourControllerName",FormMethod.Post,new { enctype="multipart/form-data"}))
{
    <input type="file" id="file" name="file" />
    <input type="submit" />
} 
```

这将上传文件

# java - 如何将过滤器列表设置为“”

> ID：11457864
> 
> 赞同：1
> 
> 时间：2012-07-12T18:03:34.113
> 
> 标签：java, blackberry

我想知道是否有办法清除过滤器列表字段。我的应用程序中有一个清除按钮，我希望它删除过滤列表字段中的所有值。那可能吗？

谢谢你。

# c# - 如何锁定网络上的文件（在 Windows 中）？

> ID：11457867
> 
> 赞同：3
> 
> 时间：2012-07-12T18:03:36.257
> 
> 标签：c#, windows, file-io, filesystems, multiprocessing

我有一个在多台计算机上运行并共享同一个文件的服务（C# 服务）（在网络存储上，比如 NAS）。我想确保在执行写操作时，我应该能够获得文件的锁，写入然后解锁它。

写入文件时如何锁定网络上的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:09:14.647

看一眼

[FileStream.Lock 方法](http://msdn.microsoft.com/en-us/library/system.io.filestream.lock)和[FileStream.Unlock 方法](http://msdn.microsoft.com/en-us/library/system.io.filestream.unlock)

# php - 如何在eclipse中附加php文档

> ID：11457873
> 
> 赞同：2
> 
> 时间：2012-07-12T18:04:03.917
> 
> 标签：php, eclipse

有没有办法在 Eclipse 中附加 PHP 文档，这样如果我将鼠标悬停在任何函数上，我可以获得所有详细信息和相关描述。

与javadocs类似的东西。

使用：

1.  日食：太阳神
2.  php5.
3.  操作系统：Ubuntu 12.04

![PHP手动添加窗口](../Images/93f755698ff0211ca0fe04e9067e250c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T07:11:15.953

这是将 PhpDoc 配置到 eclipse 中的步骤：

**1.**打开eclipse IDE
**2.**然后选择**Window Menu** & Select **Preferences**

![在此处输入图像描述](../Images/a881eecfb5437b6c2141ca7ab572944f.png)

**3.**然后通过 php menual 导航

![在此处输入图像描述](../Images/e25e52a5ca966358c71d5b178f8cc9a5.png)

**4.**单击**新建**后，您将看到此窗口：
在此处指定最新的**.chm 文件**名并按确定。

![在此处输入图像描述](../Images/a07916926fffeffbb662dfcf883ad4d3.png)

**5.**将其设置为默认并按确定[它将以粗体显示]

![在此处输入图像描述](../Images/9165761495818a658773692e802bd938.png)

**6.**将其设置为默认值后，您的本地帮助将以粗体字母突出显示

![在此处输入图像描述](../Images/e74e669514a71658f64eb27ea278fc44.png)

**7.**当您想查看 php 函数的文档时，请按`Shift`+`F2`

![在此处输入图像描述](../Images/8a2d0a9585d32dffc7c440f90af80342.png) **注意：**您还可以从 Window -> Preferences 更改帮助选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:31:43.653

你可以试试：

1.  创建一个新的 PHP 项目（文件->新建->PHP 项目）
2.  切换到 PHP 透视图（Window->Open Perspective->PHP）
3.  创建一个 PHP 文件

如果你现在写类似

```
<?php phpinfo(); ?> 
```

并将鼠标悬停在“phpinfo”上，您应该会看到一个包含信息的弹出窗口。按住 CTRL 可以直接跳进去。

如果要记录自己的代码，请使用以下内容：

```
/**
 * Some text here
 * @param string $str input
 * @param array $arr data
 * @return boolean
 */ 
```

希望对您有所帮助。

干杯

# javascript - 传递给 JavaScript replace() 函数的是什么？

> ID：11457876
> 
> 赞同：0
> 
> 时间：2012-07-12T18:04:11.060
> 
> 标签：javascript, regex, replace

我已经看到`str.replace(..., ...)`为它的第二个参数传递了一个函数。传递给函数的是什么？它是这样的：

```
"string_test".replace(/(.*)_(.*)/, function(a, b) { return a + b; } ) 
```

你如何让它将匹配的组传递给函数？什么是`a`，`b`在这种情况下，如果有的话？我一直在得到`undefined`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:05:10.640

第一个参数是匹配的整体，其余的代表匹配的组。基本上它就像从`.match()`.

如果正则表达式具有“g”修饰符，那么显然该函数会被一遍又一遍地调用。

例子：

```
var s = "hello out there";

s.replace(/(\w*) *out (\w*)/, function(complete, first, second) {
  alert(complete + " - " + first + " - " + second);
  // hello out there - hello - there
}); 
```

*编辑*——在函数中，如果你想要匹配的组作为一个数组，你可以这样做：

```
s.replace(/(\w*) *out (\w*)/, function(complete, first, second) {
  var matches = [].slice.call(arguments, 0);
  alert(matches[0] + " - " + matches[1] + " - " + matches[2]);
  // hello out there - hello - there
}); 
```

当然，正如我在上面所写的，这也是您从该`.match()`方法中得到的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T18:07:13.087

我真的不想复制 MDN 文档及其解释：[将函数指定为参数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)

# objective-c - Objective-c在init方法中使用父属性

> ID：11457877
> 
> 赞同：4
> 
> 时间：2012-07-12T18:04:12.673
> 
> 标签：objective-c, inheritance, properties

我读到在`init`方法中使用属性被认为是不好的做法。但是我应该使用父类属性吗？

例如

```
-(id) init
{
    if (self = [super init])
    {
        self.parentProp = someVal; // (1)
        parentProp = someVal; // (2)
    }

    return self;
} 
```

什么是首选（1 或 2），为什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:12:19.130

在你调用了 super 的 init 方法并且它返回之后，你的对象的超类部分被初始化并准备好使用。在那之后您使用它的属性访问器是正常的，并且期望您使用它。例如。如果您创建了 的子类，那么在您的 init 方法中`UIViewController`设置您的（继承的）title 属性或修改您的 , 是正常的。`navigationItem`

也就是说，你可以打破这种行为。如果您重写了超类的方法之一（包括它的访问器方法之一），然后在 init 方法中调用该方法，则由您来确保在您的对象完全初始化之前您的重写方法将正常运行。

更微妙的是，也许你重写了一个超类方法，然后你调用了一个你*没有*重写的不同的超类方法。那么，如果你调用的方法转过来调用你*已经*覆盖的方法呢？您也需要意识到这种可能性。

综上所述，我重申，在通过调用其 init 方法之一对其进行初始化后，使用超类的属性访问器对其进行自定义是完全正常的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:07:35.323

回答你的问题 - 他们都没有。

1.  (2) 不是属性访问，而是直接实例变量访问。这取决于类层次结构设计，但总的来说，我强烈反对在非私有接口中使用 ivars - 有关详细信息，请参阅[相关问题的答案](https://stackoverflow.com/questions/5031230/ios-must-every-ivar-really-be-property/11457858#11457858)
2.  通常，您不应该在类初始化程序（以及在 dealloc 中）中使用**任何类公共方法（包括属性访问） - 如果您的类层次结构不明确禁止子类化。**因为如果你这样做 - 覆盖这些方法（或属性访问器）的子类将在处于无效状态（尚未初始化或已解除分配）时调用它们。

虽然我遇到了很多由 pt.2 引起的问题，但忽略它似乎是一种常见的做法（即在初始化程序中使用自身/父类属性）。所以我会说这取决于你。要么为你的类初始化器之外的显式设置编写更多代码，并且确信你永远不会遇到这个问题。或者可能有更简单/更短的初始化和更容易使用你的类，但要注意这个问题。

# mysql - mysql过滤json数据取值范围

> ID：11457879
> 
> 赞同：2
> 
> 时间：2012-07-12T18:04:20.663
> 
> 标签：mysql, json, range

这个比mysql中的简单范围有点复杂，我的字段数据是`{"id":"15","value":"1200"}` ，我可以找到它，

```
SELECT * 
FROM  `my_table` 
WHERE  `my_field` 
REGEXP  '{"id":"15","value":"1200"}' 
```

但我需要的是值的范围

所以我需要寻找 1000 > 2000 之间的范围，并且 json 值 1200 的字段应该匹配。我不能用 php 重做输出，因为它会占用资源，所以请如果在 Mysql 中可能没有我在返回时通过 php 处理数据

任何帮助表示赞赏！

**任何人的解决方案！**

**LC**给了我们非常好的解决方案

```
REGEXP '{"id":"15","value":"(1[0-9][0-9][0-9]|2000)"}' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T18:10:48.030

我的下意识反应是说“停止在单个列中存储多个值”，但是如果您*必须*这样做并且您有正则表达式功能，请使用它（未经测试）：

```
SELECT * 
FROM `my_table` 
WHERE `my_field` REGEXP '{"id":"15","value":"(1[0-9][0-9][0-9]|2000)"}' 
```

请记住，无法使用索引来优化此查询，因此您只能检查`my_table`.

# bash - 来自脚本失败的源 bashrc

> ID：11457880
> 
> 赞同：3
> 
> 时间：2012-07-12T18:04:23.897
> 
> 标签：bash, shell

我编写了一个简单的 bash 脚本，它自动为我的 .bashrc 添加一个别名，当它完成时，我希望它获取 .bashrc

到目前为止，它工作正常，例如

```
./addalias.sh ls 'ls -l' 
```

正确地将 'alias ls='ls -l' 附加到 .bashrc，但不来源它。

代码如下：

```
#!/bin/bash
FIRST=$1

SECOND=${2:-cd `pwd`}

echo alias $FIRST="'$SECOND'" >> /home/oscar/.bashrc
echo alias $FIRST="'$SECOND'"

source /home/oscar/.bashrc 
```

这不起作用，也不会运行别名（“sourcebash”）来获取 bash 而不是最后一行。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:28:51.913

运行 'addalias.sh' 的 shell 确实获取了该`.bashrc`文件；然后它退出。它不会也不会影响父 shell 的环境。

您必须将命令调用为：

```
source ./addalias.sh ls 'ls --color=auto' 
```

或者：

```
. ./addalias.sh ls 'ls --color=auto' 
```

（*现在已修复：*而且我不相信，即使在一个问题中，玩弄`sudo rm -fr /*`是遥不可及的。白痴复制而没有意识到的风险太大了。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:09:43.243

也许您可以将其设为函数或别名，而不是 bash 脚本。这样做可能会导致更改发生在同一个 shell 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:18:00.107

我会创建一个别名来调用这个“addalias”脚本，然后获取新修改的文​​件。

就像是

```
alias really_add_alias="addalias.sh; . .bashrc" 
```

# python - python索引（）不起作用

> ID：11457882
> 
> 赞同：2
> 
> 时间：2012-07-12T18:04:36.520
> 
> 标签：python, indexing

我正在尝试`xyz.0.html`在控制台中打印文件名“”。它吐出一个错误`"substring not found"`

目录下的文件：

```
xyz.0.html
xyz.1.html
xyz.2.html 
```

Python

```
for name in glob.glob('*html'):
  if name.index('.0.html'):
    print name 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T18:06:21.183

为什么不使用[`str.endswith()`](http://docs.python.org/library/stdtypes.html#string-methods)？

```
>>> "xyz.0.html".endswith(".0.html")
True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:06:12.433

尝试

```
if ".0.html" in name: 
   print name 
```

或者

```
if name.endswith(".0.html"):
      print name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T18:06:17.533

你可能想要

```
if '.0.html' in name: 
```

或者，

```
if name.endswith('.0.html'): 
```

`False`如果子字符串不在字符串中，则您的版本会引发错误（如果子字符串位于字符串的开头，它将评估），因为该`index`方法返回找到子字符串的字符串中的索引（或引发异常如果未找到子字符串）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T18:06:50.000

错误就是它所说的。当您调用`name.index('0.html')`name`"xyz.1.html"`时，找不到该字符串。 `index`在这种情况下会引发错误。如果您不想要这个，您可以使用该`find`方法（如果未找到子字符串，则返回 -1），或者您可以捕获异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T18:13:56.607

你可以使用python的生成器

```
print [name for name in glob.glob('*html') if name.endswith(".0.html")] 
```

# windows - PowerShell：查询 2008 服务器的页面文件信息

> ID：11457883
> 
> 赞同：1
> 
> 时间：2012-07-12T18:04:41.233
> 
> 标签：windows, powershell, wmi, windows-server-2008-r2, pagefile

我正在使用 PowerShell 编写检查页面文件状态的脚本。在 Windows 2000/2003 机器上，用户可以通过 windows*虚拟内存*对话框在 3 个页面文件选项之间进行选择：

*   自定义大小
*   系统管理大小
*   没有分页文件

我可以通过执行以下操作成功确定选择了哪些选项：

```
$PageFileInfo = Get-WmiObject Win32_PageFileSetting  -ComputerName . 
```

*   自定义大小 - 返回`$PageFileInfo.MaximumSize`非零
*   系统管理大小 - 返回`$PageFileInfo.MaximumSize`为零
*   无分页文件 - 返回 null`$PageFileInfo`

我的问题是在 Windows 2008 服务器上，有第四个选项：

*   自动管理所有驱动器的页面文件大小

不幸的是，在这种情况下`$PageFileInfo`返回`null`，就像*没有选择分页文件*一样。

I've attempted utilizing the following, all which return `null`on my test 2008 server when *Automatically manage paging file size for all drives* is selected:

*   `Get-WmiObject Win32_PageFileSetting -ComputerName .`
*   `Get-WmiObject Win32_PageFile -ComputerName .`
*   `Get-WmiObject -Query 'SELECT * FROM meta_class WHERE __this ISA "Win32_PageFileSetting"'`

如何确定何时`Automatically manage paging file size for all drives`选择？我会以理智的方式解决这个问题吗？

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T07:10:56.257

`Win32_ComputerSystem`通过类达到自动管理的页面文件设置。该`Win32_PageFileUsage`课程也有有趣的数据。一篇博客文章有[更多信息](http://eaglebcr.wordpress.com/2011/09/29/collect-page-file-server-configurations/ "收集页面文件服务器配置")和一个简洁的例子。

# java - java存储过程vs sql存储过程

> ID：11457896
> 
> 赞同：1
> 
> 时间：2012-07-12T18:05:28.203
> 
> 标签：java, sql, stored-procedures

现在java存储过程顾名思义是用java编写的，因此它们存在于客户端。SQL 存储过程存在于服务器上。我知道拥有 sql 存储过程的优点：- 我能想到的一个是减少网络开销，因为您只需发送参数而不是整个 sql 语句。

但我想不出任何使用 java 存储过程而不是 sql 存储过程。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:11:20.940

仅使用 Java 代码的一大优势是它更易于发布和版本化。如果您使用存储过程，则升级和回滚版本或同时运行多个版本并不容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:09:44.240

它是用 Java 编写的，有些人更喜欢使用 Java。这只是整合项目中使用的语言的另一种方式。

# solr - Ajax-Solr 安装

> ID：11457901
> 
> 赞同：2
> 
> 时间：2012-07-12T18:05:50.450
> 
> 标签：solr

我无法在我的系统上设置 Ajax-Solr。我对 Ajax-Solr 进行了一些研发。

我了解它尝试使用[https://github.com/evolvingweb/ajax-solr/](https://github.com/evolvingweb/ajax-solr/)提供的教程做什么，但不幸的是，我无法在我的系统上进行设置。

我不知道如何将它与 Solr 集成。Ajax-Solr 进入 Solr 实例的哪个目录？（我知道 Ajax-Solr 文件夹保存在哪里并不重要，但仍然只是为了确定）

我在 reuters.js 文件中将我的 solrURL 更改为“http://localhost:8080/solr/”。但是当我浏览到“http://localhost:8080/solr/”时，它仍然显示相同的后端 Solr UI . （这可能听起来有点笨）

你能建议我如何获得 Ajax-Solr 前端 UI 吗？

请提出一些建议。
谢谢
问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:40:41.587

ajax-solr 只是 HTML、CSS 和 JS。您可以在浏览器中从硬盘中打开演示 index.html，它会工作（即没有网络服务器！）。部署时，您可以使用 Apache、Nginx、Tomcat 等。如果你可以让你的网络服务器显示一个 HTML 文件，你可以让它显示包含 ajax-solr JS 文件的 HTML 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:37:25.490

您必须在码头或某些 Web 服务器或应用服务器上部署 Ajax-solr Web 应用程序。

如果你想在 jetty 中部署它，你必须创建一个 WAR 文件。S 路透社样本。

如果您的机器上有 Apache，您可以将其复制到 htdocs 文件夹，例如。

# javascript - 根据类查找所有href

> ID：11457905
> 
> 赞同：0
> 
> 时间：2012-07-12T18:05:57.653
> 
> 标签：javascript

我正在尝试查找`<a>`具有 a_tv 类的所有标签，并基于此获取它们的 href 属性值。我有以下代码，但它返回未定义。我究竟做错了什么？

```
var hrefs, randomHref;

hrefs = Array.prototype.filter.call(document.getElementsByTagName("a"), function(node) { 
    return node.class.indexOf("a_tv") === 0;
}).map(function(node) {
    return node.href;
});

randomHref = hrefs[Math.floor(Math.random() * hrefs.length)];
console.log(randomHref); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:08:31.353

它`className`不是`class`

```
hrefs = Array.prototype.filter.call(document.getElementsByTagName("a"), function(node) { 
    return node.className.indexOf("a_tv") === 0;
}).map(function(node) {
    return node.href;
}); 
```

# c++ - 各种操作系统的区域设置格式

> ID：11457907
> 
> 赞同：2
> 
> 时间：2012-07-12T18:06:04.567
> 
> 标签：c++, c, locale

```
char *currentLocale = setlocale(LC_ALL,""); 
```

在 Windows 中 setlocale 返回“English_United States”，但在 linux 中返回“en_US”。有没有一种通用的方法来识别英语语言环境？或者我必须检查所有可用的语言环境值？（“English_United States” || “en_US” || 等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:18:49.317

您可能需要检查：

[http://en.wikipedia.org/wiki/Locale](http://en.wikipedia.org/wiki/Locale)

[http://en.wikipedia.org/wiki/ISO_639](http://en.wikipedia.org/wiki/ISO_639)

理论上，Windows、Linux、MAc等操作系统可能有支持“语言下划线国家”格式的函数库，即使它们有自己的内部标准：

[http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:18:00.537

在这种情况下，Windows 似乎是唯一的异常值 - 大多数操作系统使用（更明智的）“en_US”格式。您可以使用 #ifdef 之类的东西向 Windows 编译器提供自定义代码：

```
#ifdef __unix__
setlocale(LC_ALL, "en_US");
#elif defined _WIN32
setlocale(LC_ALL, "English");
#else
#error "Can't figure out how to set locale to English. Stop.";
#endif 
```

它不是很漂亮，但它应该可以工作。

# c++ - 使用 sockaddr_storage 时 Visual Studio 损坏内存

> ID：11457910
> 
> 赞同：0
> 
> 时间：2012-07-12T18:06:08.260
> 
> 标签：c++, visual-studio-2010

是否有人在 Microsoft Visual Studio 2010 中使用 sockaddr_storage 时遇到内存损坏？这是我遇到问题的那种代码：

```
class Base 
{
 public:
    Base(){a=1};
    int a;
    sockaddr_storage addr;
    int b;
};

class Derived1 : public Base
{
 public:
    Derived1() {a=2};
    int c;
}

class Derived2 : public Derived1 
{
 public:
    Derived2() {a=3;};
    int d;
} 
```

在 Derived2 构造函数中，对象中“a”的偏移量为 4 个字节，将“a”设置为 3 会破坏内存。

问候，杜桑·穆德里克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:15:18.707

使用以下代码示例，我无法重现您的问题。

```
#include <iostream>
#include <WinSock2.h>

class Base 
{
public:
    Base(){a=1;}
    int a;
    sockaddr_storage addr;
    int b;
};

class Derived1 : public Base
{
public:
    Derived1() {a=2;};
    int c;
};

class Derived2 : public Derived1 
{
public:
    Derived2() {a=3;};
    int d;
};

int main( int argc, char **argv )
{
    Derived2 d;
    std::cout << d.a << std::endl;
    return 0;
} 
```

如果您发布重现问题的完整代码示例，那么我们可能会提供更多帮助。

# java - Spring MVC：使用 @Autowire 获取对不同 spring bean 实例的引用

> ID：11457914
> 
> 赞同：0
> 
> 时间：2012-07-12T18:06:16.537
> 
> 标签：java, spring, jakarta-ee, spring-mvc, spring-security

我在我的 Spring 应用程序上下文文件中定义了一个 UserCredetniasDatSourceAdapter。我还通过 DelegatingFilterProxy 向 Spring 添加了一个自定义过滤器。

该过滤器使用@Autowire 来获取对DataSource Bean 的引用。我还在我的 DAO 中 @Autowire 数据源。当我调试时，我看到过滤器和 DAO 实例中数据源的不同实例 ID。为什么默认情况下有 2 个实例是单例？

我还启动了 jvisualvm 并查看了堆，我的应用程序上下文中的所有 bean 都有 2 个实例？感谢您提供任何见解，也许 bean 前/后处理与它有关，或者我不应该在过滤器中使用 @Autowire。任何帮助都是值得的。谢谢！

**编辑**

```
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/config-context.xml</param-value>
 </context-param>

 <servlet>
    <servlet-name>springmvc</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
 </servlet>

<servlet-mapping>
    <servlet-name>springmvc</servlet-name>
    <url-pattern>*.html</url-pattern>
 </servlet-mapping>

 <init-param>
<param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/web-context.xml,/WEB-INF/config-context.xml</param-value>
 </init-param> 
```

有趣的是，我想我知道它发生了什么。因为有 2 个上下文，所以有 2 个实例。我假设一个用于应用程序，一个用于每个请求（线程）？有没有办法指定使用哪个上下文？也许过滤器不是答案，我需要使用 AOP。如果可能的话，需要研究如何在@Aspect 中注入 bean。

谢谢！！

-乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:39:22.530

您正在将您的`/WEB-INF/config-context.xml`作为根应用程序上下文（由 加载的一个`ContextLoaderListener`）以及 Web 上下文（由 加载`DispatcherServlet`）的一部分导入。您可能可以将其从 for 中删除`DispatcherServlet`。

# javascript - 如何在脚本标签内设置变量

> ID：11457918
> 
> 赞同：5
> 
> 时间：2012-07-12T18:06:30.467
> 
> 标签：javascript, html

我有一个页面名称 index.php。我在页面顶部有一个脚本变量，如下所示：

```
<script>
    var search_quarry = "some_test";
</script> 
```

在同一页面的底部，我想将此变量添加到`src`脚本标记的属性中：

```
<script src=NEED_TO_ADD_HERE></script> 
```

这不起作用：

```
<script src=search_quarry> </script> 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T18:10:14.207

您需要处理 DOM 操作：

```
var search_query = 'some_test';
s = document.createElement('script');
s.src = search_query;
document.getElementsByTagName('head')[0].appendChild(s); 
```

或者，作为替代方案，尽管我不确定这是否可行：

```
<script id="fixme"></script>
<script type="text/javascript">
    var search_query = 'some_test';
    document.getElementById('fixme').src = search_query;
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:12:07.670

你为什么要这样做？似乎是在不修复后端的情况下使服务器代码工作的技巧

选项 1 与 document.write

```
<script>
    document.write("<script src='" + search_quarry + "'></scr" + "ipt>");
</script> 
```

选项 2 是使用 createElement 和 appendChild

```
<script>
    var scr = document.createElement("script");
    scr.src = search_quarry;
    document.getElementsByTagName("head")[0].appendChild(scr);  //or use body with document onready
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:10:05.077

这是不可能的。您不能在 javascript 的声明标记中使用 javascript 变量。这就是标签的重点：其中的所有内容都被解析为 javascript；他们之外的一切都不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:13:16.660

这是一个简单的方法来做你想做的事

```
window.onload=function(){
    var script=document.createElement("script");
    script.type="text/javascript";
    script.src=search_quarry;
    document.appendChild(script)
} 
```

尽管您想更改`window.onload`为其他内容，或者只是将代码放在顶层，或者如果使用 jQuery：

```
$(document).ready(function(){
    $(document).append("<script type='text/javascript' src='"+search_quarry+"'/>");
}); 
```

# javascript - markerClusterer：更新集群图标

> ID：11457919
> 
> 赞同：0
> 
> 时间：2012-07-12T18:06:33.220
> 
> 标签：javascript, google-maps, markerclusterer

我正在使用 markerClusterer：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/docs/reference.html)

我的问题是这样的：

用户在地图上可以编辑标记的图标。

所以，我想改变一个标记的图标，集群父级必须重新计算集群图标。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:40:38.330

解决。

每次放大和缩小地图时都会调用 .CALCULATOR() 函数，因此会自动解决。

# codenameone - 通过Codename One中的代码显示android的命令

> ID：11457921
> 
> 赞同：1
> 
> 时间：2012-07-12T18:06:48.487
> 
> 标签：codenameone

我有一个[代号为 1的 android 版本](http://www.codenameone.com)

我可以通过代号一中的代码显示命令菜单以用于 android 构建吗？

现在，我需要单击菜单选项来访问命令。是否有任何代码片段可以使命令出现在屏幕上（调用菜单）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:08:05.313

目前不支持，因为我们不支持显示本机命令菜单，并且命令菜单可能不存在（想想 Android 3.x 和更新版本上的 ActionBar）。

但是，显示“轻量级”菜单可能适用于某些情况。请注意，这是不受官方支持的，这绝不是建议这样做！

您可以调用`Form.getMenuBar().showMenu()`，这在模拟器中也很有效，但在实际设备上，您的设备外观/感觉可能会有所不同。

# android - Android 和 IOUtils.toByteArray

> ID：11457925
> 
> 赞同：2
> 
> 时间：2012-07-12T18:06:50.420
> 
> 标签：android, http

我在 android 上编写应用程序，它将 xml 文件发送到 PHP 服务器。这是我的代码：

```
InputStream is = new FileInputStream(file);
HttpClient httpClient = new DefaultHttpClient();
HttpPost postReq = new HttpPost("http://majkelsoftgames.cba.pl/ser/server.php");

byte[] data = IOUtils.toByteArray(is);
InputStreamBody isb= new InputStreamBody(new ByteArrayInputStream(data), "file");

MultipartEntity multipartContent = new MultipartEntity();
multipartContent.addPart("file", isb);

postReq.setEntity(multipartContent);
HttpResponse response = httpClient.execute(postReq); 
```

我的问题是，当

```
byte[] data = IOUtils.toByteArray(is); 
```

正在执行我得到：

```
java.lang.NoClassDefFoundError: org.apache.commons.io.IOUtils 
```

[我从http://commons.apache.org/io/](http://commons.apache.org/io/)下载了外部 commons-io.jar并将这个 jar 添加到 android 项目的 java 构建路径中。我真的不知道我做错了什么。你知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T18:11:24.733

您将其添加到构建路径中，但您是否将其放在项目的 /libs 目录中？这是将其添加到您的 apk 的唯一方法。

# c# - 主机禁用信任级别的共享服务器上的 FileIOPermission 异常

> ID：11457926
> 
> 赞同：1
> 
> 时间：2012-07-12T18:06:50.873
> 
> 标签：c#, asp.net, file-permissions, membership-provider

我有一个托管共享服务器的 .Net 4 站点。它工作正常，直到我通过尝试登录访问会员提供程序，其中我收到以下错误：

> 异常详细信息：System.Security.SecurityException：请求“System.Security.Permissions.FileIOPermission，mscorlib，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”类型的权限失败。

它给了我提示，这可能是因为 web.config 中的信任级别设置：

> 说明：应用程序试图执行安全策略不允许的操作。要授予此应用程序所需的权限，请联系您的系统管理员或在配置文件中更改应用程序的信任级别。

不幸的是，我无法更改信任级别，因为主机禁用了它。但我不确定我是否真的需要 FileIOPermission 访问权限，因为我认为我不需要写入文件系统。

我的 Membership Provider 是对默认 MembershipProvider 的覆盖，没有任何异常可以写入我知道的文件。所做的更改只是向用户表添加了一些参数。

那么有没有办法禁用对 FileIOPermission 的需求？

堆栈跟踪：

```
[SecurityException: Request for the permission of type
'System.Security.Permissions.FileIOPermission, mscorlib,
Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'
failed.]
       System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet) +0
       System.Security.CodeAccessSecurityEngine.Check(CodeAccessPermission
cap, StackCrawlMark& stackMark) +31
       System.Security.CodeAccessPermission.Demand() +46
       System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share,
Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs,
String msgPath, Boolean bFromProxy, Boolean useLongPath) +597
       System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share) +83
       System.Configuration.Internal.InternalConfigHost.StaticOpenStreamForRead(String
streamName) +79
       System.Configuration.Internal.InternalConfigHost.System.Configuration.Internal.IInternalConfigHost.OpenStreamForRead(String
streamName, Boolean assertPermissions) +124
       System.Configuration.Internal.InternalConfigHost.System.Configuration.Internal.IInternalConfigHost.OpenStreamForRead(String
streamName) +10
       System.Configuration.Internal.DelegatingConfigHost.OpenStreamForRead(String
streamName) +13
       System.Configuration.UpdateConfigHost.OpenStreamForRead(String
streamName) +38
       System.Configuration.BaseConfigurationRecord.InitConfigFromFile()
+450 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:19:41.797

你是从你的代码中访问 Web.Config 吗？请参阅此答案：[https](https://stackoverflow.com/a/2488591/69742) ://stackoverflow.com/a/2488591/69742 ，了解如何在不抛出 FileIOPermissionException 的情况下访问它

# grails - 如何使用抽象父 bean 在 resources.groovy 中创建 bean？

> ID：11457927
> 
> 赞同：2
> 
> 时间：2012-07-12T18:06:51.790
> 
> 标签：grails

尝试在 resources.groovy 中创建一个等同于 XML 中的 bean：

```
<bean id="txProxyTemplate" abstract="true"
    class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
    <property name="transactionManager" ref="transactionManager" />
    <property name="target" ref="genericHibernateDAO" />
    <property name="transactionAttributes">
        <props>
            <prop key="save*">PROPAGATION_REQUIRED</prop>
            <!--prop key="analyze">PROPAGATION_REQUIRED</prop -->
            <prop key="validate">PROPAGATION_REQUIRED</prop>
            <prop key="remove*">PROPAGATION_REQUIRED</prop>
            <prop key="create*">PROPAGATION_REQUIRED</prop>
            <prop key="delete*">PROPAGATION_REQUIRED</prop>
            <prop key="add*">PROPAGATION_REQUIRED</prop>
            <prop key="clear*">PROPAGATION_REQUIRED</prop>
            <prop key="set*">PROPAGATION_REQUIRED</prop>
            <prop key="reinitialize">PROPAGATION_REQUIRED</prop>
            <prop key="zap*">PROPAGATION_REQUIRED</prop>
            <prop key="turn*">PROPAGATION_REQUIRED</prop>
            <prop key="*">PROPAGATION_REQUIRED</prop>
        </props>
    </property>
</bean> 
```

然后是第二个 bean，它使用这个抽象 bean 作为它的父级：

```
<bean id="myCoolService" parent="txProxyTemplate">
    <property name="target">
        <bean
            class="com.fourgablesguy.myapp.MyCoolService">
        </bean>
    </property>
</bean> 
```

到目前为止，这就是我在 resources.groovy 中的内容：

```
import org.springframework.transaction.interceptor.TransactionProxyFactoryBean
import com.fourgablesguy.myapp.MyCoolService

beans = {
    txProxyTemplate(TransactionProxyFactoryBean) {
        transactionManager = ref('transactionManager')
        target = ref ('genericHibernateDAO')
        transactionAttributes = [
            "save*":"PROPAGATION_REQUIRED",
            "validate":"PROPAGATION_REQUIRED",
            "remove*":"PROPAGATION_REQUIRED",
            "create*":"PROPAGATION_REQUIRED",
            "delete*":"PROPAGATION_REQUIRED",
            "add*":"PROPAGATION_REQUIRED",
            "clear*":"PROPAGATION_REQUIRED",
            "set*":"PROPAGATION_REQUIRED",
            "reinitialize":"PROPAGATION_REQUIRED",
            "zap*":"PROPAGATION_REQUIRED",
            "turn*":"PROPAGATION_REQUIRED",
            "*":"PROPAGATION_REQUIRED"
        ]
    }

    myCoolService(MyCoolService) {

    }
} 
```

只是不确定如何将 txProxyTemplate bean 设置为抽象的，将 myCoolService bean 设置为将 txProxyTemplate bean 作为父级，将 myCoolService bean 作为目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:31:58.490

这在文档中有部分描述，请参阅[http://grails.org/doc/latest/guide/spring.html](http://grails.org/doc/latest/guide/spring.html)

通常，您通过省略其类来创建 bean 抽象，但在这种情况下，由于您想指定类但仅将其用作父 bean，因此您需要`abstract`显式设置属性。要使其他 bean 将其用作其父级，请设置`parent`属性：

```
import org.springframework.transaction.interceptor.TransactionProxyFactoryBean
import com.fourgablesguy.myapp.MyCoolService

beans = {

   txProxyTemplate(TransactionProxyFactoryBean) { bean ->
      bean.abstract = true

      transactionManager = ref('transactionManager')
      target = ref('genericHibernateDAO')
      transactionAttributes = [
         "save*":"PROPAGATION_REQUIRED",
         "validate":"PROPAGATION_REQUIRED",
         "remove*":"PROPAGATION_REQUIRED",
         "create*":"PROPAGATION_REQUIRED",
         "delete*":"PROPAGATION_REQUIRED",
         "add*":"PROPAGATION_REQUIRED",
         "clear*":"PROPAGATION_REQUIRED",
         "set*":"PROPAGATION_REQUIRED",
         "reinitialize":"PROPAGATION_REQUIRED",
         "zap*":"PROPAGATION_REQUIRED",
         "turn*":"PROPAGATION_REQUIRED",
         "*":"PROPAGATION_REQUIRED"
      ]
   }

   myCoolService(MyCoolService) { bean ->
      bean.parent = ref('txProxyTemplate')
   }
} 
```

编辑：重新阅读您的 bean defs 后，看起来这是您真正需要的：

```
myCoolService { bean ->
   bean.parent = ref('txProxyTemplate')
   target = { MyCoolService s ->
      // props for the inner bean
   }
} 
```

# asp.net - 我可以使用构造函数动态创建用户控件吗？

> ID：11457929
> 
> 赞同：5
> 
> 时间：2012-07-12T18:07:02.837
> 
> 标签：asp.net, dynamic, .net-3.5, user-controls

我有一个用户控件，它将根据用户的喜好动态地向其中添加其他用户控件。我在使用重载的 LoadControl 方法添加控件时遇到问题。

我试过这样做：

```
ddControl = typeof(DropDownControl), new object[] { testData, FilterModel.Models[i] }); 
```

但是，ddControl 中的任何控件都没有被初始化，当我尝试将数据源设置为它包含的组合框时，它爆炸了。我将模型和数据源传递给设置属性、默认值等的构造函数。在创建控件后，我是否必须创建一个 LoadModel() 方法来加载模型值

```
(DropDownControl)LoadControl("~/WebUserControls/DropDownControl.ascx") 
```

或者我可以在动态声明它的同时以某种方式通过构造函数完成这一切吗？

如果不清楚，请告诉我如何做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T02:54:28.213

您可以使用`PlaceHolder`动态添加这些用户控件并通过公开方法来执行其他操作，这样您就可以更好地控制所有内容，而不会干扰控件的生命周期。

不要使用构造函数，而是使用属性和方法。

# python - 在 Python 中运行交互式命令

> ID：11457931
> 
> 赞同：20
> 
> 时间：2012-07-12T18:07:13.393
> 
> 标签：python, subprocess, stdout, stdin, interactive

我有一个要在 Python (2.6.5) 中运行的脚本，它遵循以下逻辑：

*   提示用户输入密码。它看起来像（“输入密码：”）（*注意：输入不会回显到屏幕）
*   输出无关信息
*   提示用户响应（“Blah Blah filename.txt blah blah (Y/N)?:”）

最后一个提示行包含我需要解析的文本（filename.txt）。提供的响应无关紧要（只要我可以解析该行，程序实际上可以在不提供响应的情况下退出这里）。

我的要求*有点*类似于*[Wrapping an interactive command line application in a Python script](https://stackoverflow.com/questions/1567371/wrapping-an-interactive-command-line-application-in-a-python-script)*，但那里的响应似乎有点令人困惑，即使 OP 提到它不适合他，我的仍然挂起。

通过环顾四周，我得出的结论`subprocess`是最好的方法是这样做，但我遇到了一些问题。这是我的 Popen 行：

```
p = subprocess.Popen("cmd", shell=True, stdout=subprocess.PIPE,
stderr=subprocess.STDOUT, stdin=subprocess.PIPE) 
```

*   当我调用 a`read()`或`readline()`on`stdout`时，提示是屏幕上的打印机并且它挂起。

*   如果我调用`write("password\n")`for `stdin`，则提示将写入屏幕并挂起。中的文本`write()`未写入（我没有将光标移动到新行）。

*   如果我打电话`p.communicate("password\n")`，与 write() 相同的行为

我在这里寻找一些关于最佳输入方式的想法，`stdin`如果你觉得慷慨的话，可能如何解析输出中的最后一行，尽管我最终可能会弄清楚。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-19T16:51:57.740

如果您正在与子进程生成的程序进行通信，您应该查看*[Python 中 subprocess.PIPE 上的非阻塞读取](https://stackoverflow.com/questions/375427/a-non-blocking-read-on-a-subprocess-pipe-in-python)*。我的应用程序遇到了类似的问题，发现使用*队列*是与子进程进行持续通信的最佳方式。

至于从用户那里获取值，您始终可以使用 raw_input() 内置函数来获取响应，对于密码，请尝试使用该[`getpass`](http://docs.python.org/2/library/getpass.html)模块从用户那里获取非回显密码。然后，您可以解析这些响应并将它们写入您的子进程的标准输入。

我最终做了类似于以下的事情：

```
import sys
import subprocess
from threading import Thread

try:
    from Queue import Queue, Empty
except ImportError:
    from queue import Queue, Empty  # Python 3.x

def enqueue_output(out, queue):
    for line in iter(out.readline, b''):
        queue.put(line)
    out.close()

def getOutput(outQueue):
    outStr = ''
    try:
        while True: # Adds output from the Queue until it is empty
            outStr+=outQueue.get_nowait()

    except Empty:
        return outStr

p = subprocess.Popen("cmd", stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=False, universal_newlines=True)

outQueue = Queue()
errQueue = Queue()

outThread = Thread(target=enqueue_output, args=(p.stdout, outQueue))
errThread = Thread(target=enqueue_output, args=(p.stderr, errQueue))

outThread.daemon = True
errThread.daemon = True

outThread.start()
errThread.start()

try:
    someInput = raw_input("Input: ")
except NameError:
    someInput = input("Input: ")

p.stdin.write(someInput)
errors = getOutput(errQueue)
output = getOutput(outQueue) 
```

一旦创建了队列并启动了线程，就可以循环获取用户的输入、进程的错误和输出，以及处理并将它们显示给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-06T20:41:16.173

对于简单的任务，使用线程可能有点过分。相反，可以使用 os.spawnvpe。它将作为进程生成脚本外壳。您将能够与脚本进行交互通信。在此示例中，我将密码作为参数传递，显然这不是一个好主意。

```
import os
import sys
from getpass import unix_getpass

def cmd(cmd):
    cmd = cmd.split()
    code = os.spawnvpe(os.P_WAIT, cmd[0], cmd, os.environ)
    if code == 127:
        sys.stderr.write('{0}: command not found\n'.format(cmd[0]))
    return code

password = unix_getpass('Password: ')
cmd_run = './run.sh --password {0}'.format(password)
cmd(cmd_run)

pattern = raw_input('Pattern: ')
lines = []
with open('filename.txt', 'r') as fd:
    for line in fd:
        if pattern in line:
            lines.append(line)

# manipulate lines 
```

# c - malloc 上已释放对象的校验和不正确

> ID：11457932
> 
> 赞同：10
> 
> 时间：2012-07-12T18:07:14.453
> 
> 标签：c, memory-leaks, malloc

我得到一个

```
malloc: *** error for object 0x1001012f8: incorrect checksum for freed object
        - object was probably modified after being freed.
        *** set a breakpoint in malloc_error_break to debug 
```

以下函数中的错误：

```
char* substr(const char* source, const char* start, const char* end) {
    char *path_start, *path_end, *path;

    int path_len, needle_len = strlen(start);

    path_start = strcasestr(source, start);
    if (path_start != NULL) {
        path_start += needle_len;
        path_end = strcasestr(path_start, end);
        path_len = path_end - path_start;
        path = malloc(path_len + 1);
        strncpy(path, path_start, path_len);
        path[path_len] = '\0';
    } else {
        path = NULL;
    }

    return path;
} 
```

我怎样才能使这项工作？当我重写函数来分配内存时，`path[path_len + 1]`它工作得很好。

现在，我不明白的部分是，我什至从不调用`free`我的应用程序的任何点，因为程序需要每个分配的内存，直到它存在（这，AFAIK 无论如何都会使每个分配的内存无效？！）

那么，如果我从不释放一个被释放的对象，它怎么会被破坏呢？

该函数在此调用：

```
char *read_response(int sock) {
    int bytes_read;
    char *buf = (char*)malloc(BUF_SIZE);
    char *cur_position = buf;

    while ((bytes_read = read(sock, cur_position, BUF_SIZE)) > 0) {
        cur_position += bytes_read;
        buf = realloc(buf, sizeof(buf) + BUF_SIZE);
    }

    int status = atoi(substr(buf, "HTTP/1.0 ", " ")); 
```

有`realloc`，我用错了吗？我想读取完整的服务器响应，所以我必须在每次迭代后重新分配，不是吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T18:59:07.740

在`read_response`中，您可能正在覆盖 指向的缓冲区的末尾`buf`。

问题是 buf 是一个指针，所以`sizeof(buf)`会返回一个指针的大小（可能是 4 或 8，具体取决于您的 CPU）。您使用`sizeof`的好像`buf`是一个数组，这与 C 中的指针实际上并不相同，尽管它们在某些情况下似乎可以互换。

而不是使用`sizeof`，您需要跟踪为 分配的最后大小，并在每次扩大缓冲区时`buf`添加到该大小。`BUF_SIZE`

您还应该考虑到该`read`操作返回的字符可能比`BUF_SIZE`每次调用返回的字符少得多，因此在每次迭代中执行`realloc`on`buf`可能是矫枉过正。不过，就正确性而言，这可能不会对您造成任何问题；它只会使用比它需要的更多的内存。

我会做一些更像下面的代码的事情。

```
#define MIN_BUF_SPACE_THRESHOLD (BUF_SIZE / 2)

char *read_response(int sock) {
    int bytes_read;
    char *buf = (char*)malloc(BUF_SIZE);
    int cur_position = 0;
    int space_left = BUF_SIZE;

    if (buf == NULL) {
        exit(1); /* or try to cope with out-of-memory situation */
    }

    while ((bytes_read = read(sock, buf + cur_position, space_left)) > 0) {
        cur_position += bytes_read;
        space_left -= bytes_read;
        if (space_left < MIN_BUF_SPACE_THRESHOLD) {
            buf = realloc(buf, cur_position + space_left + BUF_SIZE);
            if (buf == NULL) {
                exit(1); /* or try to cope with out-of-memory situation */
            }
            space_left += BUF_SIZE;
        }
    } 
```

`read`这个版本的优点是，如果调用只返回几个字节的数据，则不会尝试分配更多空间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T18:53:50.807

这条线

```
buf = realloc(buf, sizeof(buf) + BUF_SIZE); 
```

是错的。所有重新分配都具有相同的大小，`BUF_SIZE + sizeof(char*)`. 然后，当您从套接字读取时，您正在写入未分配的内存，覆盖以前`free`d 的内存 a `realloc`。

您必须跟踪分配的大小，

```
size_t current_buf_size = BUF_SIZE;
/* ... */
    char *temp = realloc(buf, current_buf_size + BUF_SIZE);
    if (temp == NULL) {
        /* die or repair */
    }
    buf = temp; 
```

# c# - 全球跨站脚本操作

> ID：11457935
> 
> 赞同：0
> 
> 时间：2012-07-12T18:07:22.580
> 
> 标签：c#, asp.net, cross-site

在我们的应用程序中，我们有一个称为`GlobalPage.cs`此页面的类，它继承自`Page`我们的页面加载覆盖和其他。提醒我们注意，我们需要为包含文本框的页面添加一些安全性（一些是 asp 文本框，另一些是 html 输入）。我们想要做的是能够从一个地方全局检查所有这些字段，而不是在每个页面上单独进行。我们如何才能实现这一点，可能使用`GlobalPage.cs`?

我将不胜感激任何关于可以做什么的意见或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:19:04.613

已经有一些针对恶意输入的内置保护。确保您没有将其关闭。

```
<pages validateRequest="true"...> 
```

传入的值本身对 XSS 来说不是问题。渲染非转义值会导致问题。因此，尽管清理输入有些用处，但无法替代正确的输出编码。

考虑阅读 ASP.Net 中有关 XSS 保护的现有信息，例如[How To: Protect From Injection Attacks in ASP.NET （2.0，请注意 4.0 -](http://msdn.microsoft.com/en-us/library/ff647397.aspx) [ASP.NET Request Validation](http://www.asp.net/whitepapers/aspnet4/breaking-changes#0.1__Toc256770147)中有更改）。

# mongodb - MongoDB，查找附近的用户但删除被阻止的用户而不影响限制

> ID：11457936
> 
> 赞同：1
> 
> 时间：2012-07-12T18:07:31.310
> 
> 标签：mongodb, mongodb-query

我想获取附近的 100 个用户，但我想删除当前被阻止的用户，这样如果有 10 个被阻止的用户，则返回的用户不会是 90，而是 100...

我写了这个查询（使用 mongojs 作为节点）：

```
db.users.find({location: {$near: [lng, lat]}, _id:{$ne: ObjectId('4ffeff845d46eaf1aa000002')}}, function(err, docs) {
    if(!err) {
        res.json(users);
    };

}).limit(100); 
```

这有效，但仅适用于一个被阻止的用户，我在用户文档中有一个字段，以便用户可以阻止多个用户：

```
{
    ...
    blockedUsers: ['4ffeff845d46eaf1aa000002', '4ffeff845d46eaf1aa000012',....]
} 
```

我已经厌倦了在 $ne 之后添加一个 ObjectId 的数组，但它什么也没做，我也厌倦了使用 || 拆分所有 ObjectId 的变量 这也没有奏效。

我的问题是我将如何查询 mongodb 以查找最近限制为 100 的用户，删除被阻止的用户，因此如果我在查询后要删除它们，它实际上返回 100 而不是减去被阻止的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:17:29.860

你检查过 $nin 运算符吗？ [http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24nin](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24nin)

# python - 将所有嵌套列表中的元素相加

> ID：11457942
> 
> 赞同：2
> 
> 时间：2012-07-12T18:08:02.790
> 
> 标签：python, nested-lists

我正在添加所有嵌套列表中的元素，到目前为止我所拥有的是

```
for i in range(len(b)) :
    for j in range(len(b[i])):
        total = total + b[i][j] 
```

但是当嵌套列表中存在整数值时，这将不起作用，例如，

```
b = [[1,2], [3,4], [5,6], 1] 
```

在这种情况下，我收到一条错误消息，指出“int”类型的对象没有 len()。在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T18:10:01.120

首先，您向 Python 程序员展示了一个常见的反模式，不要循环遍历索引，循环遍历对象本身。例如：

```
for item in b:
    do_something(item) 
```

而不是：

```
for i in range(len(b)):
    do_something(b[i]) 
```

它更清晰、更简单、更快捷。

也就是说，您遇到的主要问题是其中一项不是列表，因此它没有长度。

这里更好的选择是使用生成器表达式 和 展平列表[`itertools.chain.from_iterable()`](http://docs.python.org/library/itertools.html#itertools.chain.from_iterable)，然后使用[内置`sum()`函数](http://docs.python.org/library/functions.html#sum)对元素求和。

```
>>> import collections
>>> import itertools
>>> b = [[1,2], [3,4], [5,6], 1]
>>> list(itertools.chain.from_iterable(item if isinstance(item, collections.Iterable) else [item] for item in b))
[1, 2, 3, 4, 5, 6, 1]
>>> sum(itertools.chain.from_iterable(item if isinstance(item, collections.Iterable) else [item] for item in b))
22 
```

我们需要生成器表达式，因为它`itertools.chain()`不会处理不可迭代的项目，因此我们将 any 放入列表中以解决此问题。

另一种方法是制作自己的生成器：

```
def chain_mixed(iterable):
    for item in iterable:
        try:
            for subitem in item:
                yield subitem
        except TypeError:
            yield item 
```

然后你可以简单地做：

```
sum(chain_mixed(b)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:23:56.510

基于生成器的解决方案

```
>>> b = [[1,2], [3,4], [5,6], 1]
>>> def sum_up(x):
...     for i in x:
...             if isinstance(i, int):
...                     yield i
...             else:
...                     for j in sum_up(i):
...                             yield j
... 
>>> sum(sum_up(b))
22
>>> b = [[1,2], [3,4], [5,6,[3,[6,7]]], 1]
>>> sum(sum_up(b))
38 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:10:44.600

尝试这样的事情，`sum()`仅当元素是`list`or时`tuple`使用，否则简单使用数字。

```
>>> b = [[1,2], [3,4], [5,6], 1]
>>> sum(sum(x) if isinstance(x,(list,tuple)) else x for x in b)
22 
```

改进您的解决方案：

```
total=0
b = [[1,2], [3,4], [5,6], 1]
for i in range(len(b)) :
    if isinstance(b[i],(list,tuple)):
        for j in range(len(b[i])):
            total += b[i][j]
    else:
        total +=b[i]
print total  #prints 22 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:10:53.553

一种方法是

```
def calc_sum(the_list):
    sum = 0
    for item in the_list:
        if isinstance(item,(list,tuple)):
           sum += calc_sum(item)
        else:
           sum += item
    return sum 
```

不是那种pythonic ...但它应该可以工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-30T13:34:39.677

## 另一种方法来做到这一点

如果列表包含嵌套列表和整数/浮点数，这将起作用这里我使用 python 内置函数“sum”来添加列表的所有元素

```
def add(nested_list):
    temp=[]
    for i in nested_list:
        if isinstance(i,list):
            temp.append(sum(i))
        else:
            temp.append(i)
    print sum(temp) 
```

# php - 嵌套对象的 PHP 对象相等性

> ID：11457944
> 
> 赞同：2
> 
> 时间：2012-07-12T18:08:11.463
> 
> 标签：php, oop, reflection, identity, equality

是否有任何独立代码或独立框架中的库可用于比较包含其他对象引用的 PHP 对象？

[相等](http://php.net/manual/en/language.oop5.object-comparison.php)运算符可用于测试对象**身份**。我正在寻找可以让我做这样的事情的代码

```
$a = new Foo;
$b = new Foo;

if(objectsAreEqual($a,b)
{
} 
```

我知道我可以使用这样的东西

```
get_object_vars($a) == get_object_vars($b) 
```

或其他形式的反射来比较属性，但如果对象包含嵌套对象，我们又回到了身份问题。

所以，在我尝试实现自己之前，我想知道这是在任何地方都已解决的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:34:38.787

我认为没有递归就没有办法做到这一点：

```
function objectsAreEqual($a, $b) {
    $aProps = get_object_vars($a);
    $bProps = get_object_vars($b);

    foreach($aProps as $k => $v) {
        // check if key exists in b
        if(!isset($bProps[$k]) { 
            return false; 
        }

        // check if they're equal (if not an object or array)
        if($v != $bProps[$k]) {
            return false;
        }

        // if $v is an object or array
        if(is_object($v) || is_array($v)) {
            return objectsAreEqual($v, $bProps[$k]);
        }  

    }   

    return true;
} 
```

请务必对此进行测试，但我认为它应该可以工作。如果您需要在它工作之前对其进行修复，请也在这里编辑代码。

# c++ - const_cast VS 可变的？有什么区别吗？

> ID：11457953
> 
> 赞同：9
> 
> 时间：2012-07-12T18:09:10.070
> 
> 标签：c++, constants, mutable

据我了解，`mutable`取消`constness`了变量的

```
Class A {
  void foo() const {
  m_a = 5;
}
mutable int m_a;
}; 
```

但也`const_cast`：

```
void print (char * str)
{
  cout << str << endl;
}

int main () {
  const char * c = "this is a line";
  print ( const_cast<char *> (c) );
  return 0;
} 
```

那么，有什么不同呢？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-12T18:17:14.680

`const_cast`不能取消对象的常量。`const_cast`只能从对象的*访问路径*中删除常量。访问路径是对对象的指针或引用。从访问路径中删除常量对对象本身绝对没有影响。即使您使用`const_cast`删除访问路径的常量，那仍然不一定授予您修改对象的权限。能不能做到还是要看对象本身。如果它是 const，则不允许修改它，并且任何尝试这样做都将导致未定义的行为。

例如，这说明了预期用途`const_cast`

```
 int i = 5; // non-constant object
  const int *p = &i; // `p` is a const access path to `i`

  // Since we know that `i` is not a const, we can remove constness...
  int *q = const_cast<int *>(p);
  // ... and legally modify `i`
  *q = 10;
  // Now `i` is 10 
```

上述合法和有效的唯一原因是它实际上`i`是一个*非常量*对象，我们知道这一点。

如果原始对象确实是常量，那么上面的代码将产生未定义的行为：

```
 const int j = 5; // constant object
  const int *p = &j; // `p` is a const access path to `j`

  int *q = const_cast<int *>(p); // `q` is a non-const access path to `j`
  *q = 10; // UNDEFINED BEHAVIOR !!! 
```

C++ 语言不允许你修改常量对象，`const_cast`在这里完全无能为力，无论你如何使用它。

`mutable`是完全不同的事情。`mutable`创建一个即使声明了包含对象也可以合法修改的数据文件`const`。从这个意义上说，`mutable`确实允许您修改常量对象的[某些指定部分]。`const_cast`，另一方面，不能做这样的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T18:16:26.843

不同的是`const_cast`不能作弊，而是`mutable`规则的例外。

在第一个片段`m_a`上是`mutable`，因此您不能修改`const`成员函数上的数据成员的规则是一个例外。

在第二个片段上，`const_cast`试图作弊，但实际上不能：虽然*类型*已更改，*但不允许实际修改*：字符串是 true `const`。尝试修改它会导致程序表现出未定义的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T18:15:58.293

区别在于语义——即相同的生成代码，相同的运行时结果（`const`ness 无论如何都是纯粹的编译时构造），但两种构造传达的含义略有不同。

这个想法是您使用`mutable`类中的变量，但不构成对象的状态。经典示例是 blob 对象中的当前位置。在 blob 中导航并不算作以重要的方式“修改” blob。通过使用`mutable`，您是在说“这个变量可能会改变，但对象仍然是相同的”。您是说对于这个特定的类，`const`-ness 并不意味着“所有变量都被冻结”。

`const_cast`，另一方面，意味着您违反了现有的 const 正确性并希望摆脱它。可能是因为您正在使用不尊重的第 3 方 API `const`（例如基于 C 的老式 API）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:28:26.150

简而言之，将成员变量声明为`mutable`可以从该类的任何常量方法中对其进行写访问，而无需任何其他特殊语法。`const_cast`另一方面，只要您想对其他常量变量进行写访问，就必须执行该变量，并且该变量甚至不必是类成员。

除非您想明确允许对成员变量的写访问，否则`const_cast`最好在每种违反 const 正确性的情况下使用，如果只是为了清楚地说明您的意图。

附带说明一下， const_cast 也可用于添加或删除`volatile`修饰符。

# jqgrid - Ajax 数据结果到 jqgrid 显示

> ID：11457955
> 
> 赞同：0
> 
> 时间：2012-07-12T18:09:12.300
> 
> 标签：jqgrid, jqgrid-php

我从 AJAX 调用得到这个结果，我想将它传递给 jqgrid。格式与正常的 jqgrid 调用完全相同。我不知道为什么它不起作用，非常感谢任何帮助。

> {"page":null,"total":2,"records":"16","rows":[{"id":"9910003","cell":["9910003","DEMO3","Test3 ","Sat,Sun","08:00:00","17:00:00","17","0"]},{"id":"9910004","cell":["9910004 ","DEMO4","Test4","Sat,Sun","08:00:00","17:00:00","19","0"]},{"id":"9910005" ,"cell":["9910005","DEMO5","Test5","Sat,Sun","08:00:00","17:00:00","17","0"]}, {"id":"9910006","cell":["9910006","DEMO6","Test6","Sat,Sun","08:00:00","17:00:00","17","0"]},{"id":"9910007","cell":["9910007","DEMO7","Test7","Sat,Sun", "08:00:00","17:00:00","14","0"]},{"id":"9910008","cell":["9910008","DEMO8","Test8 ","Sat,Sun","21:00:00","06:00:00","19","0"]},{"id":"9910009","cell":["9910009 ","DEMO9","Test9","Sat,Sun","21:00:00","06:00:00","14","0"]},{"id":"9910010" ,"单元格":["9910010","DEMO10","Test10","周六,周日","21:00:00","06:00:00","14","0"]},{"id":"9910011","cell":["9910011","DEMO11","Test11","Sat,Sun","21:00:00","06:00: 00","14","0"]},{"id":"9910012","cell":["9910012","DEMO12","Test12","Sat,Sun","21:00: 00","06:00:00","17","0"]},{"id":"9910013","cell":["9910013","DEMO13","Test13","Sat,太阳","21:00:00","06:00:00","16","0"]},{"id":"9910014","cell":["9910014","DEMO14" ,"Test14","Sat,Sun","21:00:00","06:00:00","14","0"]},{"id":"9910015","cell":["9910015","DEMO15","Test15","Sat,Sun","21:00:00","06:00:00","14","0"] },{"id":"9910016","cell":["9910016","DEMO16","Test16","Sat,Sun","21:00:00","06:00:00", "14","0"]}]}

以下是我的完整代码：

```
function report_grid() {
$.ajax({
    type: "POST",
    url: "filter_option.php?action=filter",
    data: $('#form1').serialize(),
    success: function(rdata) {

jQuery("#report-grid").jqGrid({
    data: rdata,
    datatype: "local",
    colNames:['Emp ID','firstName', 'surName', 'restDay','shift_In','shift_Out','late','undertime'],
    colModel:[
        {name:'emp_id',index:'emp_id', width:55},
        {name:'firstname',index:'firstname', width:90},
        {name:'surname',index:'surname', width:100},
        {name:'restday',index:'restday', width:80, align:"right"},
        {name:'shift_in',index:'shift_in', width:80, align:"right"},
        {name:'shift_out',index:'shift_out', width:80,align:"right"},
        {name:'late',index:'late', width:150, sortable:false},
        {name:'ut',index:'ut', width:150, sortable:false},
    ],
    height: 'auto',
    width: 'auto',
    rowNum:10,
    rowList:[10,15,20,30,50],
    pager: '#report-pager',
    sortname: 'emp_id',
    viewrecords: true,
    sortorder: "desc",
    caption:"Timesheet Summary"
});
jQuery("#report-grid").jqGrid('navGrid','#report-pager',{edit:false,add:false,del:false});

        }
    })
} 
```

我在下面尝试但没有成功，我想我错过了一些东西

```
data:rdata.rows
datatype:"local" // shows only the id but with correct number of records

data:rdata.rows
datatype: "json" // shows nothing at all. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:35:07.097

现在明白了，我的json格式不正确，我应该参考演示页面中的数据数组。

# objective-c - 静态库中的委托在 Xcode 中不起作用

> ID：11457958
> 
> 赞同：0
> 
> 时间：2012-07-12T18:09:17.837
> 
> 标签：objective-c, ios, delegates, static-libraries

我创建了一个使用委托模式的类，并将其放入静态库中。然后，我创建了一个演示应用程序来测试该库。该演示只有一个视图控制器，在 .h 文件中，我有这个：

```
@interface ViewController : UIViewController <AuthenticationDelegate>

@property (nonatomic, retain) IBOutlet UITextField *usernameTextField;
@property (nonatomic, retain) IBOutlet UITextField *passwordTextField;

@end 
```

当我编译时，我在文件的第一行得到一个错误，上面写着：

> 找不到“AuthenticationDelegate”的协议声明。

但是，在同一个视图控制器的 .m 文件中，我有：

```
#import "Authentication.h"
#import "ViewController.h" 
```

文件“Authentication.h”是我的静态库中唯一的头文件，它确实声明了委托类：

```
@class AuthenticationProvider;
@protocol AuthenticationDelegate <NSObject>

@optional

- (void)provider:(AuthenticationProvider *)provider didReplyWithResponse:(AuthenticationProviderResponse)response;

@end 
```

我哪里错了？

**更新：**

如果我放入`#import "Authentication.h`ViewController.h，我会得到：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_AuthenticationProvider", referenced from:
      objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

当我`#import "Authentication.h`从 ViewController.m 中删除时，我也明白了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:14:33.110

试试`#import "Authentication.h"`你的类 .h 文件，而不是你的 .m 文件

# java - RubyNoMethodError - 从 Java 调用 ruby 方法

> ID：11457960
> 
> 赞同：1
> 
> 时间：2012-07-12T18:09:22.570
> 
> 标签：java, ruby, jruby

我有这个红宝石课程：

```
require 'stringio'
require 'hirb'

class Engine
  def initialize()
    @binding = Kernel.binding
  end
  def run(code)
    # run something
    stdout_id = $stdout.to_i
    $stdout = StringIO.new
    cmd = <<-EOF
    $SAFE = 3
    $stdout = StringIO.new
    begin
      #{code}
    end
    EOF
    begin
      result = Thread.new { Kernel.eval(cmd, @binding) }.value
    rescue SecurityError
      return "illegal"
    rescue Exception => e
      return e
    ensure
      output = get_stdout
      $stdout = IO.new(stdout_id)
    end

    return output
  end

   private
   def get_stdout
     raise TypeError, "$stdout is a #{$stdout.class}" unless $stdout.is_a? StringIO
     $stdout.rewind
     $stdout.read
   end
end 
```

“运行”方法应该调用 IRB 的函数并捕获输出（字符串格式）。我想从 Java 类调用此函数，但它找不到 IRB 方法，即使它们已加载（需要“hirb”）。我的 java 类看起来像这样：

```
public class MyClass {
  private final static String jrubyhome = "/usr/lib/jruby/";
  private String rubySources;
  private String hirbSource;
  private String myEngine;
  private boolean loaded = false;

  private void loadPaths() {
    String userDir;

    userDir = System.getProperty("user.dir");
    rubySources = userDir + "/../ruby";
    hirbSource = userDir + "/hirb.rb";
    myEngine = rubySources + "/engine.rb";

    System.setProperty("jruby.home", jrubyhome);
    System.setProperty("org.jruby.embed.class.path", rubySources+":"+hirbSource);
    System.setProperty("hbase.ruby.sources", rubySources+":"+hirbSource);
  }

  private String commandResponse(String command) 
     throws FileNotFoundException
  { 
    String response;

    loadPaths();

    ScriptEngineManager manager = new ScriptEngineManager();
    ScriptEngine engine = manager.getEngineByName("jruby");
    ScriptingContainer container = new ScriptingContainer();

    Reader reader = new FileReader(myEngine);

    try {
      Object receiver = engine.eval(reader);
      String method = "run";
      Object ob  = container.callMethod(receiver,method,command);
      response = ob.getClass().toString();

      return response;
    } catch (ScriptException e) {
      System.out.println("exception");
    } 

    return "FAILED";
  }

  public static void main(String args[]) 
    throws IOException {
     MyClass my = new MyClass();
     System.out.println(my.commandResponse(args[0]));
  }  
} 
```

你知道可能是什么问题吗？

[编辑]**在我扩展内核模块并添加它工作的命令之后。**

# asp.net-mvc-3 - MVC 3 asp.net 500 内部服务器错误

> ID：11457961
> 
> 赞同：1
> 
> 时间：2012-07-12T18:09:27.067
> 
> 标签：asp.net-mvc-3

嗨，对不起，我对 mvc3 javascript jquery 等真的很陌生。我有一个内部服务器错误 500

这是控制器：

```
 [HttpGet]
    public JsonResult GetEmail(string title, string notes) 
    {
        byte[] pdf = null;
        byte[] excel = null;
        string userEmail = "";
        try
        {
            pdf = GetFileForMail("PDF", "ServiceArea_" + System.DateTime.Now.ToString("yyyyMMdd_HHmmss") + ".pdf", title, notes);
            excel = GetFileForMail("EXCEL", "ServiceArea_" + System.DateTime.Now.ToString("yyyyMMdd_HHmmss") + ".xls", title, notes);

            MembershipUser mu = Membership.GetUser(this.MembershipData.Principal.Identity.Name);
            userEmail = mu.Email.ToString();

            System.Net.Mail.MailMessage mailMsg = new System.Net.Mail.MailMessage(userEmail,
                                                                        "mailexample@mail.com",
                                                                        title,
                                                                        notes);
            mailMsg.To.Add("no-replay@valuelab.it");
            mailMsg.IsBodyHtml = true;

            string mese = "";
            string giorno = "";
            string ore = "";

            if (DateTime.Now.Month < 10)
                mese = "0" + DateTime.Now.Month;
            else
                mese = "" + DateTime.Now.Month;

            if (DateTime.Now.Day < 10)
                giorno = "0" + DateTime.Now.Day;
            else
                giorno = "" + DateTime.Now.Day;

            if(DateTime.Now.Hour < 10)
                ore = "0" + DateTime.Now.Hour;
            else
                ore = "" + DateTime.Now.Hour;

            System.Net.Mail.Attachment att = new System.Net.Mail.Attachment(new MemoryStream(pdf), DateTime.Now.Year + mese  + giorno + "_" + ore + DateTime.Now.Minute + " Report.pdf", System.Net.Mime.MediaTypeNames.Application.Pdf);

            System.Net.Mail.Attachment att2 = new System.Net.Mail.Attachment(new MemoryStream(excel), DateTime.Now.Year + mese + giorno + "_" + ore + DateTime.Now.Minute + " Report.xls", "application/vnd.ms-excel");

            mailMsg.Attachments.Add(att);
            mailMsg.Attachments.Add(att2);
            System.Net.Mail.SmtpClient sc = new System.Net.Mail.SmtpClient();
            sc.Host = "192.168.99.1";
            sc.Send(mailMsg);
            return Json(new { text = "Everything is fine " + userEmail, risultato = true });
        }
        catch (Exception e) {
            return Json(new { text = "Unexpected error" + userEmail , risultato = false});
        }

    } 
```

这就是我调用控制器的方式：

```
 jQuery.ajax({
                type: "GET",
                url: options.EmailUrl,
                dataType: "json",
                data:
                {
                    title: viewModel.saReportTitle(),
                    notes: viewModel.saReportNotes()
                },
                success: function (data, textStatus, jqXHR) {
                    jQuery("#sa-dialog-alert").dialog('open');
                    jQuery("#sa-dialog-alert").dialog('option', 'title', 'Invio Mail Eseguito');
                    jQuery("#sa-dialog-alert").text(data.text);
                }
                ,
                error: function (data, textStatus, errorThrown) {
                    jQuery("#sa-dialog-alert").dialog('open');
                    jQuery("#sa-dialog-alert").dialog('option', 'title', 'Errore');
                    jQuery("#sa-dialog-alert").text("Errore nell'invio mail: " + errorThrown);
                }
            }); 
```

如果您阅读了代码，控制器只需发送一封电子邮件，它就可以正常工作，没有例外，那么为什么 ajax 会说存在 500 内部服务器错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:18:31.373

默认情况下`GET`不允许请求，`JsonResult`因此您需要通过设置`JsonRequestBehavior`属性来明确允许它们：

```
return Json(
    new { text = "Everything is fine " + userEmail, risultato = true },
    JsonRequestBehavior.AllowGet
); 
```

或者在您的 AJAX 调用中使用 POST 作为您的请求方法。

# javascript - 为什么 DataTables 不能在我的 rails 部分工作？

> ID：11457971
> 
> 赞同：0
> 
> 时间：2012-07-12T18:10:08.827
> 
> 标签：javascript, ruby-on-rails, datatables, partial

我的 Rails 应用程序中有一个部分表格，我想使用 DataTables 使它看起来不错。我正在使用`jquery-datatables-rails`宝石。

我的部分：

```
 <script type="text/javascript">
    $(document).ready(function() {
    $('#businesses').dataTable();
    } );
    </script>

<table id="businesses">
            <thead>
                <tr>
                            Bunch of headers here...

                </tr>
                </thead>

                <tbody>
                <tr>
                Lots and lots of code here...
                </tr>
            </tbody>
        </table> 
```

应用程序.js：

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require dataTables/jquery.dataTables
//= require_tree . 
```

应用程序.css：

```
*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require_self
 *= require dataTables/jquery.dataTables
 *= require_tree .
 */ 
```

DataTables 文件也被正确`application.js`引用`application.css`。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-01T21:57:58.290

您应该将 js 代码移动到 application.js 文件中。

因此，您的 html.erb 中没有脚本标签，要执行 javascript 部分，您应该有一个这样的 application.js：

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require dataTables/jquery.dataTables
//= require_tree .

$('#businesses').dataTable();
    } ); 
```

# c# - 如何通过 String.Format 格式化字符串

> ID：11457978
> 
> 赞同：1
> 
> 时间：2012-07-12T18:10:39.867
> 
> 标签：c#, asp.net, string.format

数字

```
 string a = String.Format("{0:#/#}",12) 
```

输出：1/2

但是如何将其转换为字符串假设

```
 String b=String.Format("{0:###-#}","test") 
```

输出：测试

预期输出：test-t

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T18:11:56.393

您无法格式化字符串`string.Format`，因为它*已经*是一个字符串。

如果要操作字符串，请使用`string`类上定义的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:09:12.190

我认为您可以将字符串拆分为其字符，然后使用格式

```
string testString = "test";
string formattedString = string.Format("{0}{1}{2}-{3}", testString.Select(c => c.ToString()).ToArray()); 
```

# ruby-on-rails - 如何以 ruby 的方式在嵌套哈希中添加值

> ID：11457984
> 
> 赞同：3
> 
> 时间：2012-07-12T18:10:52.777
> 
> 标签：ruby-on-rails, ruby

这是一个嵌套哈希。我们想以 ruby​​ 的方式将“小计”的所有值相加。请注意，执行加法时，“0”和“1342119042142”的键可以是任何其他未知字符串（键的个数至少为1，也可以多于1）。

```
{"0"=>{"lease_item_id"=>"3",
 "subtotal"=>"100"},
 "1342119042142"=>{"lease_item_id"=>"1",
 "subtotal"=>"100",
 "_destroy"=>"false"}}} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:21:04.683

像这样：

设置哈希：

```
s = {"0"=>{"lease_item_id"=>"3", "subtotal"=>"100"},
     "1342119042142"=>{"lease_item_id"=>"1", "subtotal"=>"100","_destroy"=>"false"}} 
```

计算总数：

```
total = s.inject(0) { |i, j| i + j.last["subtotal"].to_i} 
```

说明：[在此处](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)查找文档。基本上`inject`给定一个初始值（在上面的代码中它是 0）并将给定的值传递给给定的块，在那里它被设置为每次迭代中从块返回的值。所以在上面的代码中，最初它是 0，在第一次迭代中它被设置为`0 + 100`现在等于 100，在第二次 [也是最后一次] 迭代中它被设置为`100 + 100`200。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T18:21:54.160

假设 h 是您的哈希，并且小计可以是十进制值：

```
h.values.sum{|x| x['subtotal'].to_f} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:13:27.287

```
hash = {"0"=>{"lease_item_id"=>"3", "subtotal"=>"100"}, "1342119042142"=>{"lease_item_id"=>"1", "subtotal"=>"100", "_destroy"=>"false"}} 

sum = hash.values.reduce(0){|sum,inner| sum + inner["subtotal"].to_i } 
```

# css - 打印用 CSS 格式化的 Html 文档

> ID：11457987
> 
> 赞同：1
> 
> 时间：2012-07-12T18:10:54.420
> 
> 标签：css, html, printing

我有一个 asp.net mvc 应用程序，我的视图是 HTML5。我需要将视图打印为报告。此视图显示了一些带有`<table/>`标签的数据，并使用 css 样式格式化为`font-family`、`font-size`、`text-align`属性等。当我尝试用 Chrome 打印它（导出为 PDF）时，我的 css 不起作用，我的意思是，打印结果显示没有格式化。

我能做些什么来解决这个问题？不管我是使用 css 来应用样式还是使用 html 标签来格式化页面，但我希望它会留下格式化的印象。

PS：我想保留html有效文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:17:55.850

您需要通过以下设置将css拆分为屏幕并单独打印

```
<link href="css/main.css" media="screen" rel="stylesheet" type="text/css" />
<link href="css/print.css" media="print" rel="stylesheet" type="text/css" /> 
```

然后无需更改您的 html 代码只需更改 css 或复制旧 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:22:37.640

您可以尝试使用`@media print`规则定义 css 语义，然后在考虑到这一点的情况下对样式表进行样式化。也许这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:38:54.663

您可以在样式表中为屏幕和打印媒体使用不同的样式，即

```
@media screen
{
    table.test {
        font-family:"Times New Roman",Georgia;
        font-size:10px;
        // more
    }
}

@media print
{
    table.test {
        font-family:Verdana, Arial;
        font-size:10px;
        // more
    }
} 
```

当您打印表格时，只会应用打印媒体中定义的样式。

[**检查此以获取更多信息**](http://www.w3.org/TR/CSS2/media.html)。

# html - 如何针对不同浏览器调整导航设计？

> ID：11457990
> 
> 赞同：0
> 
> 时间：2012-07-12T18:11:10.823
> 
> 标签：html, css, navigation

在网页设计方面，我是菜鸟。我下载了一个模板来创建一个站点，但我的导航栏在 Chrome 中看起来很棒，但在 FireFox 中没有正确定位，并且其中一部分在 IE 中没有正确定位。下面是我的代码。我不确定这个模板是在开始时还是在我开始调整之后是这样的。当我第一次开始时，我只使用 chrome 进行预览。

HTML

```
<nav>
            <ul id="menu">
                <li class="alpha" id="menu_active"><a href="index.html"><span><span>Home</span></span></a></li>
                <li><a href="Whatisllf.html"><span><span>What is LLF?</span></span> </a></li>
                <li><a href="TeamManagement.html"><span><span>Team Management</span></span></a></li>
                <li><a href="PlayerData.html"><span><span>Player Data</span></span></a></li>
                <li><a href="PostSeason.html"><span><span>Post Season</span></span></a></li>
                <li><a href="Forums.html"><span><span>Forums</span></span></a></li>
                <li class="omega"><a href="PrivacyPolicy.html"><span><span>Privacy Policy</span></span></a></li>
            </ul>
        </nav> 
```

CSS

```
#menu {width:100%;overflow:hidden;margin-top:3px}
#menu li {float: left;}
#menu a {display:block;font-size:16px;font-weight:400;color:#000;background:url(../images/menu.gif) top repeat-x;line-height:55px;text-decoration:none}
#menu li span {display:block;background:url(../images/menu_left.gif) top left no-repeat}
#menu .alpha span {background:url(../images/left_menu.gif) top left no-repeat}
#menu .alpha a:hover span,#menu .alpha#menu_active a span {background:url(../images/left_menu_active.gif) top left no-repeat}
#menu .omega span span {background:url(../images/right_menu.gif) top right no-repeat}
#menu .omega a:hover span span,#menu .omega#menu_active a span span {background:url(../images/right_menu_active.gif) top right no-repeat}
#menu li span span,#menu .alpha span span {background:url(../images/menu_right.gif) top right no-repeat;padding:0 24px}
#menu a:hover,#menu #menu_active a {color:#fff;background:url(../images/menu_active.gif) top repeat-x}
#menu a:hover span,#menu #menu_active a span {background:url(../images/menu_left_active.gif) top left no-repeat}
#menu a:hover span span,#menu #menu_active a span span,#menu .alpha#menu_active a span span,#menu .alpha a:hover span span {background:url(../images/menu_right_active.gif) tp right no-repeat} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:44:57.097

您需要使用[Conditional CSS](http://www.quirksmode.org/css/condcom.html)。

# php - PDO 和安全

> ID：11457992
> 
> 赞同：1
> 
> 时间：2012-07-12T18:11:18.530
> 
> 标签：php, pdo

我今天早上遭到攻击，并在我的网站中注入了一些 JS。我正试图找到这个洞并修补它。我的印象是下面的 PDO 是安全的，有人可以确认或否认这一点吗？

```
 //Adding the lead to the local database
        $leads = array($firstName, $lastName, $company, $state, $country, $phone, $email, $industry, $uniqueId, $comments );

        $qry = $dbh->prepare(
            'INSERT INTO leads (FirstName, LastName, Company, State, Country, Phone, Email, Industry, Solution, Comments) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)');

        if(!($qry->execute($leads))) {
            print_r($dbh->errorInfo());
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:14:34.180

PDO 不能保护您免受 JavaScript 注入。它可以保护您免受 SQL 注入。它将危险的 JS 毫无问题地放入您的数据库中，因为 PDO 不关心什么是危险的 JS，什么不是危险的 JS。那不是它的工作。您需要寻找其他方法来防止恶意 JS 显示给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:15:02.760

这对于 SQLI 来说显然是安全的，但对于 XSS 或受污染的输入来说却不是。这只是意味着攻击者可能无法污染您的 SQL 查询。但是输出部分可能会被污染。检查您的输出转义/清理方法！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T18:15:16.097

从某种意义上说，这是安全的，因为有人无法注入 SQL 查询——但这不会阻止他们将 HTML 放入您的任何字段中。您可能希望考虑使用类似[strip_tags](http://ca.php.net/strip_tags)的东西来防止 HTML 被存储，或者在将其显示给用户之前进行一些额外的清理。

# ibm-mq - 强制结束和删除队列管理器

> ID：11457993
> 
> 赞同：4
> 
> 时间：2012-07-12T18:11:19.277
> 
> 标签：ibm-mq

目前我有一个队列管理器，无论我做什么都无法消失。我正在尝试结束它并删除它。这是我们的开发服务器之一。不知道发生了什么，我们的服务器经历了主机名更改。目前，当我做*dspmq*时，我得到：

```
QMNAME(QM_MIT)                                            STATUS(Status not available) 
```

*endmqm*说：

```
AMQ8146: WebSphere MQ queue manager not available. 
```

*dltmqm*说：

```
AMQ8041: The queue manager cannot be restarted or deleted because processes,
that were previously connected, are still running.
AMQ7018: The queue manager operation cannot be completed. 
```

我用谷歌搜索，发现需要杀死听众，我做到了。我在 Linux 上运行 WebSphere MQ v7.1。

我还可以做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T18:29:11.127

执行 a`ps-ef | grep qmgrname`以查找作为 QMgr 的一部分运行或附加到 QMgr 的任何剩余进程。

接下来，做一个`/opt/mqm/bin/amqiclen -x -F -m qmgrname`摆脱任何共享内存段。如果您不提供完全限定的路径名​​并尝试从您`$PATH`的路径或相对路径运行它，该命令将失败。

有关更多详细信息，请参阅[WebSphere MQ 实用程序 amqiclen 用法和描述](http://www-01.ibm.com/support/docview.wss?uid=swg21195096)。