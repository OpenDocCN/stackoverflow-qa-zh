# StackOverflow 问答 11549000-11549999

# unix - gnuplot 绘制来自两个文件的数据：一个 x 坐标，另一个 y

> ID：11549004
> 
> 赞同：17
> 
> 时间：2012-07-18T19:38:40.017
> 
> 标签：unix, plot, gnuplot, concat

我有两个文件：一个带有 x 坐标，另一个带有 y。

有没有办法使用 gnuplot 在一个图中绘制这两个文件？或者有没有办法逐行连接这两个文件？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-18T19:56:19.130

没有办法在 gnuplot 中绘制一个文件的 x 坐标和另一个文件的 y 坐标。

如果你使用类似 bash 的 shell，你可以使用命令

```
paste x_data.dat y_data.dat > xy_data.dat 
```

逐行合并文件。如果你想把这个命令放到一个 gnuplot 脚本中，你可以这样做：

```
plot "<paste x_data.dat y_data.dat" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-25T14:44:15.750

有一种更简单的方法可以直接从 gnuplot 中完成您的要求。尝试：

```
plot "< join file1.dat file2.dat" using 1:2 with lines 
```

如果两个文件都只包含一列，那么上面的命令将把它们一一打印出来。

该`join`命令对于执行涉及来自不同文件的列的算术运算也很有用；例如，如果两个文件都有两列，那么

```
plot "< join file1.dat file2.dat" using 1:($2+$4) with lines 
```

将绘制第一个文件的第一列与第一个和第二个文件的第二列之间的总和。

该`join`命令是[GNU 核心实用程序](http://www.gnu.org/software/coreutils/coreutils.html)的一部分。我的 Mac 默认安装了它们；我想这是大多数 Linux 系统的情况。如果您使用 Windows，请查看[GnuWin](http://gnuwin32.sourceforge.net/)。

**来源**：gnuplot 邮件列表（[http://gnuplot.10905.n7.nabble.com/combining-data-from-different-input-files-td3528.html](http://gnuplot.10905.n7.nabble.com/combining-data-from-different-input-files-td3528.html)）。

# c++ - 从向量中获取通用双向迭代器

> ID：11549013
> 
> 赞同：5
> 
> 时间：2012-07-18T19:39:32.363
> 
> 标签：c++, stl, iterator

在编写一个采用通用双向迭代器的函数之前，我想测试一下它对整数向量的工作方式。

```
vector<int> a(10,1);
iterator<bidirectional_iterator_tag, int> i = a.begin();
for (; i != a.end(); ++i) cout << *i; 
```

此代码无法编译。g++ 抱怨您无法将 begin() 的返回类型转换为`iterator<bidirectional_iterator_tag, int>`运算符`++`，`*`并且未在其上定义。显然我做错了什么，希望得到帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T19:43:58.483

尽管`std::iterator`它是一个简化新迭代器实现的基类，但并非所有迭代器都使用 this 实现，也不是所有迭代器都转换为 this。迭代器类的唯一要求是它提供一组给定的操作。这并不暗示类层次结构，并且大多数容器都提供自己的迭代器类。所以在这种情况下，你应该使用`vector<int>::iterator`作为你的迭代器的类型。或者，如果您使用的是最新的 C++11 标准，您可以使用`auto`让编译器推断类型。

# exists - 查找索引数据库中是否已存在值

> ID：11549014
> 
> 赞同：0
> 
> 时间：2012-07-18T19:39:31.790
> 
> 标签：exists, indexeddb

我在 IndexedDB 工作。我能够在我的 jquery 移动应用程序中创建、填充和删除值。

现在，当我第一次来到一个页面时，我应该检查该值是否在我的数据库中可用。如果是这样，如果不存在，我需要显示“存在”或“不存在”。我写了下面的代码。我已经在 document.ready 上调用了这个函数。

```
myapp.indexedDB.existsInFavourites = function(value){
    var db = myapp.indexedDB.db;
    var request = db.transaction(["todo"]).objectStore("todo").get(typeid);
    request.onerror = function(event) {
      // Handle errors!
    };
    request.onsuccess = function(event) {
      // Do something with the request.result!

    };
  } 
```

这导致我出现以下错误

```
Uncaught TypeError : Cannot call method 'transaction' of null 
```

任何建议都会有很大帮助。提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:26:29.600

The problem looks like it is related to the line:

```
var db = myapp.indexedDB.db; 
```

You need to connect to the database and then do the work in the callback. Briefly, something like:

```
// var typeid = ...;

// Request a connection
var openRequest = indexedDB.open(name,version);
var openRequest.onsuccess = function(event) {
    var db = event.target.result;
    // event.target === this and event.target === openRequest
    // so use whatever you prefer

    // Now use the 'db' variable to do the work
    // Note: removed unnecessary brackets around todo
    var getRequest = db.transaction("todo").objectStore("todo").get(typeid);
    getRequest.onsuccess = function(event) {
        var myResult = event.target.value;
        // event.target === this, and event.target === getRequest

        console.log('Got %s !', myResult);
    }
} 
```

# iphone - iOS：安装应用程序时的通知（但尚未运行）

> ID：11549016
> 
> 赞同：6
> 
> 时间：2012-07-18T19:39:43.067
> 
> 标签：iphone, ios, notifications, app-store

当应用程序安装但尚未运行时，是否有任何方法可以通知或以其他方式在应用程序中运行某些代码？我想在安装应用程序时向我们的服务器发送通知。请注意，我不想在第一次运行应用程序时执行某些操作，而是在安装后立即执行。

我猜这归结为想要在安装后以某种方式自动启动应用程序，这似乎是苹果不允许的。希望我错了。

**编辑：**让我试着让这个问题听起来不那么愚蠢/不可能。我不想在不运行代码的情况下运行代码。我想知道是否有办法获取下载应用程序的时间戳，而不是用户首次启动它的时间。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T19:43:00.090

我怀疑这在技术上是否可行。你想如何在没有运行代码的情况下运行代码？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:18:44.740

我可以看到这项工作的唯一方法是在第一次启动时运行一些代码来更新计数器或服务器端的东西，然后从你的总下载量中减去它？通过这种方式，您可以查看用户是否正在下载但未运行该应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T19:42:08.183

你无能为力。在第一次运行之前，您的应用程序无法执行任何操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T19:58:50.900

"run some code in an app, when the app is installed, but hasn't yet run" ???

What you are asking for is impossible (almost)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T20:45:22.680

正如其他人指出的那样，这是不可能的。我最终要做的是在用户第一次运行该应用程序时进行记录，并通过 Google Analytics 进行跟踪。我总是可以求助于 iTunes Connect 来获取我的应用程序的确切安装次数。

此外，如果您想跟踪重新安装的次数，您可以在用户的​​钥匙串中存储一个值（即使您的应用程序被删除，钥匙串中的信息仍然存在），并在首次启动时查询它，如果存在，则重新安装。

# ios - 您可以在 iOS 应用程序发布之前对其进行更新吗？

> ID：11549020
> 
> 赞同：1
> 
> 时间：2012-07-18T19:40:22.070
> 
> 标签：ios, app-store

假设我的发布日期是 9 月 1 日。这是一个艰难的日期，届时该应用程序必须在应用程序商店中。因此，为了安全起见，我现在提交应用程序。它获得批准，但我想添加更多功能。即使应用程序尚未发布，我也可以进行更新吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:59:08.747

我的理解一直是你一次只能有一个应用程序的待处理版本——如果你的应用程序获得批准但你决定在发布批准的版本之前更新它，你必须先拒绝批准的版本然后提交更新以供审查。使您的应用程序可用后，您可以提交另一个版本。

不过，请不要相信我的话——从[iTunesConnect 开发人员指南](https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf)中的更新部分获取您可以获取的信息，并在需要时联系 Apple 进行澄清。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T19:44:58.857

是的，你可以，但这意味着有办法管理你的代码（通过 git 或任何代码跟踪系统），以便跟踪每个更新代码（如果你想回到第一个版本检查代码然后跳转回到“更新”来修复代码）。

我的第一个项目没有跟踪代码。我必须使用代码更改创建不同的文件夹。它变成了一团糟。

如果您想制作二进制文件并通过 iTunes 测试它们（这就是“更新”的工作方式）或将最终作品发送给苹果，请记住更改信息 plist 中的版本。

# perl - Perl：YAML 在数组中迭代？

> ID：11549021
> 
> 赞同：3
> 
> 时间：2012-07-18T19:40:26.183
> 
> 标签：perl, yaml

我正在关注这个示例[在 Perl 脚本中使用 YAML 配置文件中的数据的简单示例](https://stackoverflow.com/questions/3453573/simple-example-of-using-data-from-a-yaml-configuration-file-in-a-perl-script)

vihtorr@w00w /var/www $ cat test.yaml

```
IPs: [500, 600, 200, 100] 
```

vihtorr@w00w /var/www $ cat yam2.pl

```
 use strict;
 use warnings;
 use YAML::XS qw(LoadFile); 

 my $settings = LoadFile('test.yaml');
 print "The IPs are ", $settings->{IPs}; 
```

我想知道在数组中迭代谁？

当我执行我得到的代码时

```
perl yam2.pl 
The IPs are ARRAY(0x166e5e0) 
```

感谢您帮助菜鸟

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T19:48:13.500

```
$settings->{IPs} 
```

持有对数组的引用。数组被取消引用使用

```
@{ $ref }       # The whole thing
${ $ref }[$i]   # One element
$ref->[$i]      # One element
@{ $ref }[@i]   # Array slice 
```

所以你可以使用访问数组

```
@{ $settings->{IPs} } 
```

你得到：

```
print "The IPs are ", join(', ', @{ $settings->{IPs} }), "\n"; 
```

您可能还对

```
for my $ip (@{ $settings->{IPs} }) {
   ... do something with $ip ...
} 
```

参考：

*   [迷你教程：取消引用语法](http://www.perlmonks.org/?node_id=977408)
*   [参考快速参考](http://www.perlmonks.org/?node_id=69927)
*   [perlreftut](http://perldoc.perl.org/perlreftut.html)
*   [perlref](http://perldoc.perl.org/perlref.html)
*   [perldsc](http://perldoc.perl.org/perldsc.html)
*   [佩洛尔](http://perldoc.perl.org/perllol.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:47:24.203

ARRAY(0x166e5e0) 输出显示 $settings->{IPs} 是一个数组引用。您必须取消引用它才能进行迭代：

```
for my $ip (@{$settings->{IPs}}) {
   print $ip . "\n";
} 
```

如果您只需要打印，您可以使用 join()：

```
print join("\n", @{$settings->{IPs}}); 
```

# java - 反复写入 ObjectInputStream

> ID：11549023
> 
> 赞同：0
> 
> 时间：2012-07-18T19:40:38.043
> 
> 标签：java, sockets, serialization, objectinputstream

我有多个客户端和一台服务器。服务器在一个线程中处理每个客户端。客户端必须向主服务器发送一个自定义对象。我检查了[this](https://stackoverflow.com/questions/1194656/appending-to-an-objectoutputstream/1195078#1195078)和[this](https://stackoverflow.com/questions/3182240/java-io-streamcorruptedexception-invalid-type-code-ac)，它们谈到了`java.io.StreamCorruptedException: invalid type code: AC`我所遇到的错误。

但我不理解建议的解决方案。他继承了 ObjectOutputStream 并且在必须发送对象的第二次及以后的时间中不写入标头。这对我不起作用。

是否有另一种通过 TCP 套接字发送自定义对象的解决方案？我的客户每 10 秒收集一次数据并重新创建发送的对象。

如果我重复，我很抱歉，我正在阅读很多类似的问题，但找不到我的场景的答案。

提前致谢

**编辑**

发送方法（在客户端）

```
 public void TCPEchoClientSend(MonitoredData _mData) throws IOException {
        if (_mData == null)
            throw new IllegalArgumentException("Parameter: <Monitored Data> empty.");           
        ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream());

        // Send the encoded object to the server
        oos.writeObject(_mData);

        oos.close();

        System.out.println("Client sent the monitored data package.");

    } 
```

收到

```
public static void handleEchoClient(Socket client, Logger logger) {
        try {
            MonitoredData mdata;
            // Get the input and output I/O streams from socket
            ObjectInputStream ois = new ObjectInputStream(client
                    .getInputStream());
            ObjectOutputStream oos = new ObjectOutputStream(client
                    .getOutputStream());

            // Receive until client closes connection, indicated by -1;
            while ((mdata = (MonitoredData) ois.readObject()) != null) {

                System.out.println("Got received data. Ready to save.");

                hdb.saveOrUpdate(mdata);

                System.out.println("Monitored Data arrived at home.");

            }

            // logger.info("Client " + _clntSock.getRemoteSocketAddress()+
            // ", echoed " + totalBytesEchoed + " bytes.");

        } catch (IOException ex) {
            logger.log(Level.WARNING, "Exception in echo protocol", ex);
        } catch (ClassNotFoundException e) {
            logger.log(Level.WARNING, "Exception in echo protocol", e);
        } finally {
            try {
                client.close();
            } catch (IOException e) {
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:29:06.917

在两端使用相同的`ObjectOutputStream`和用于套接字的生命周期，并查找和 writeUnshared() 方法。`ObjectInputStream``ObjectOutputStream reset()`

请参阅[此答案](https://stackoverflow.com/questions/2393179/streamcorruptedexception-invalid-type-code-ac/2395269#2395269)以进行讨论。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T20:06:23.693

ObjectInputStream 和 ObjectOutputStream 是有状态的。所以你需要匹配它们的生命周期。您是否在每次发送对象网络时（即每 10 秒）在每个客户端中实例化一个新的输出流？是这样，您最好在服务器中实例化相应的输入流。请注意，这是最安全和最干净的选项，但它通过网络发送更多数据。

另一方面，如果您要保留流，那么您需要担心几件事。首先，您是否只发送不可变对象？否则，您可能无法传达所需的内容（序列化只将每个对象写入一次，然后将引用写入之前序列化的对象）。

# c++ - 在 CUDA 中编写内核函数的正确方法？

> ID：11549036
> 
> 赞同：7
> 
> 时间：2012-07-18T19:41:51.340
> 
> 标签：c++, c, cuda, labview

我即将着手将我编写的程序转换为 CUDA，以希望提高处理速度。

现在显然我的旧程序一个接一个地执行了许多函数，我在主程序中将这些函数分开并按顺序调用每个函数。

```
void main ()
{
  *initialization of variables*
  function1()
  function2()
  function3()
  print result;
} 
```

这些函数本质上是串行的，因为函数 2 取决于函数 1 的结果。

好的，所以现在我想将这些函数转换为内核，并并行运行函数中的任务。

是否像以并行方式重写每个函数一样简单，然后在我的主程序中，一个接一个地调用每个内核？这比它需要的慢吗？例如，我可以让我的 GPU 直接执行下一个并行操作，而无需返回 CPU 来初始化下一个内核吗？

显然，我会将所有运行时变量保留在 GPU 内存上以限制正在进行的数据传输量，所以我是否应该担心内核调用之间的时间？

我希望这个问题很清楚，如果没有，请让我详细说明。谢谢。

这是一个额外的问题，以便我可以检查我的理智。最终这个程序的输入是一个视频文件，通过不同的函数，每一帧都会产生一个结果。我的计划是一次抓取多个帧（比如 8 个唯一帧），然后将我拥有的块总数除以这 8 个帧，然后块中的多个线程将对图像数据执行更多并行操作，例如向量加法，傅里叶变换等。
这是解决问题的正确方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T21:07:50.093

在某些情况下，您可以让程序在 GPU 上以全部潜在速度运行，而从普通 CPU 版本进行的移植工作很少，这可能就是其中之一。

如果您有可能拥有这样的功能：

```
void process_single_video_frame(void* part_of_frame)
{
  // initialize variables
  ...
  intermediate_result_1 = function1(part_of_frame);
  intermediate_result_2 = function2(intermediate_result_1);
  intermediate_result_3 = function3(intermediate_result_2);
  store_results(intermediate_result_3);
} 
```

**并且**您可以同时处理许多 part_of_frames。说，几千，

**和** `function1()`,`function2()`并`function3()`通过几乎相同的代码路径（也就是说，程序流并不严重依赖于帧的内容），

然后，本地内存可能会为您完成所有工作。本地内存是一种存储在全局内存中的内存。它以一种微妙而深刻的方式不同于全局内存......内存只是以这样一种方式交错，相邻线程将访问相邻的 32 位字，如果线程全部从它们的本地内存阵列的相同位置。

您的程序流程将是您从复制`part_of_frame`到本地数组开始并为中间结果准备其他本地数组。然后，您可以在代码中的各个函数之间传递指向本地数组的指针。

一些伪代码：

```
const int size_of_one_frame_part = 1000;

__global__ void my_kernel(int* all_parts_of_frames) {
    int i = blockIdx.x * blockDim.x + threadIdx.x;
    int my_local_array[size_of_one_frame_part];
    memcpy(my_local_array, all_parts_of_frames + i * size_of_one_frame_part);
    int local_intermediate_1[100];
    function1(local_intermediate_1, my_local_array);
    ...
}

__device__ void function1(int* dst, int* src) {
   ...
} 
```

总而言之，这种方法可以让您使用几乎不变的 CPU 函数，因为并行性不是来自创建函数的并行版本，而是通过并行运行整个函数链。这又是通过硬件支持在本地数组中交错内存来实现的。

笔记：

*   从全局内存到本地内存的初始副本`part_of_frame`没有合并，但希望您有足够的计算来隐藏它。

*   `part_of_frame`在计算能力 <= 1.3 的设备上，每个线程只有 16KiB 可用的本地内存，这对于您和其他中间数据可能不够用。但是在计算能力 >= 2.0 时，这已经扩展到 512KiB，这应该足够了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T20:16:45.577

回答你的一些问题：

调用内核并没有那么昂贵，所以不要害怕程序流从 GPU 返回到 CPU。只要将结果保存在 GPU 内存中，就不会产生太多开销。如果您愿意，您可以制作一个简单地按顺序调用其他设备函数的内核。AFAIK 这将更难调试和分析，我不确定是否可以分析内核调用的函数。

关于并行化：

我认为任何允许您在多个数据流上运行计算的想法都是好的。您的代码越像着色器越好（这意味着它将具有在 gpu 上快速运行所需的特性）。多帧的想法很好。关于它的一些提示：尽可能减少同步，尽可能少访问内存，尝试增加计算时间与 IO 请求时间的比率，利用 gpu 寄存器/共享内存，更喜欢 many-read-from-one一对多的设计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:41:11.990

如果 GPU 资源足以在单个内核中处理 3 个函数，那么您可以将您的函数放入一个大内核中，或者您可以串行启动 3 个内核以分别运行这些函数。在性能方面几乎没有什么不同，因为内核启动的硬件开销可以忽略不计，软件开销也很低。

但是，如果 GPU 资源不够，将 3 个函数放在一个内核中可能会牺牲性能。在这种情况下，最好将每个函数放入单独的内核中。

# javascript - CKEditor 3.6.3 启用浏览器拼写检查并禁用上下文菜单

> ID：11549038
> 
> 赞同：4
> 
> 时间：2012-07-18T19:42:00.483
> 
> 标签：javascript, ckeditor, contextmenu, spell-checking

我正在尝试对`CKEditor`. 我已经禁用了所有的工具栏和插件，所以我们只剩下一个创建基本 HTML 的简单文本框。

是否可以重新启用浏览器/操作系统拼写检查？

`CKEditor`上下文菜单也没什么用。如果可能的话，我也不介意摆脱它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T15:11:29.370

如果浏览器提供了内置拼写检查器，则有一个配置设置会禁用内置拼写检查器。默认设置为true，尝试将其设置为false。

```
config.disableNativeSpellChecker = false; 
```

* * *

您可以尝试禁用 contextmenu 插件：

```
config.removePlugins = 'contextmenu'; 
```

# css - 带有顶部和底部填充的 css 拉伸背景图像

> ID：11549041
> 
> 赞同：2
> 
> 时间：2012-07-18T19:42:07.960
> 
> 标签：css, background-image, margin, padding

我希望页面的背景图像拉伸到完整的宽度和高度。这里的挑战是它应该在顶部和底部留下一个 48 px 的区域（这些是页眉和页脚区域，我们不希望此图像隐藏在其后面）。另外，我正在尝试仅使用 css（没有 javascript 或客户端代码）。CSS3 没问题。

这是我到目前为止的位置。我已经能够获得最高利润：

```
 background-image: url('images/image1.png')
background-repeat: no-repeat;
background-attachment:fixed;
background-position:  center 48px;  
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:49:39.833

我不会使用背景大小，而是制作一个内部包含图像的 div，并将其绝对定位到窗口，然后将您想要的所有内容相对放置在它的顶部，并具有更高的 z-index。早期版本的 IE 不支持 background-size css 属性，只有 IE9+。这是一个小例子：

```
<body>
    <div class="bg-image">
        <img src="images/image-1.png" />
    </div>
    <div class="content">
        <p>this is your content</p>
    </div>
</body> 
```

然后对于 CSS：

```
.bg-image {
    position: absolute;
    width: 100%;
    height: auto; /*or 100%*/
    z-index: 1;
    padding: 48px 0px;
}

.bg-image img {
    width: 100%;
    height: 100%;
}

.container {
    position: relative;
    z-index: 2;
    top: 0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:56:42.497

我会以稍微不同的方式处理这个问题——我会将三个`<div>`s 堆叠在一起，中间的一个会像你想要的那样应用背景图像。这样，您可以将第一个和第三个`<div>`s 设置为 48px 高，或者您想要的任何高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:14:15.757

您可以将页眉和页脚都包装在一个包装器 div 上，该包装器具有：

```
.wrapper{
  width:100%;
  height:48px;
  background:(use solid color to cover your body background )
} 
```

它看起来像这样：

```
<div class="wrapper">
 <header>
..
..
 </header>
</div 
```

与页脚相同。

然后确保页眉和页脚都设置如下：

```
margin: 0 auto;
width:980px ( whichever is your width ) 
```

瞧。

# ios - 如何从包含空格的字符串创建 NSURL？

> ID：11549047
> 
> 赞同：3
> 
> 时间：2012-07-18T19:42:17.667
> 
> 标签：ios

此代码的结果是 url 为空

```
NSString* home = [NSHomeDirectory() stringByAppendingPathComponent:@"/Library/Application Support/"];
NSURL *url = [NSURL URLWithString:home]; 
```

这是这样的：

```
NSString* home = [NSHomeDirectory() stringByAppendingPathComponent:@"/Library/Application Support/"];
home = [home stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *url = [NSURL URLWithString:home]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T19:52:29.807

您的问题不是关于从包含空格的**字符串**创建 URL ，而是从包含空格的**路径字符串**创建 URL 。

对于路径，您不应使用`URLWithString`. Mac OS X 和 iOS 包含用于为文件路径构建 NSURL 的便利功能，这些功能会自动为您处理这些以及更多。请改用其中之一。

苹果的文档`[NSURL fileURLWithPath: path]`说：

> 如果路径以斜杠结尾，则此方法假定*路径*是目录。如果*路径*不以斜线结尾，则该方法检查文件系统以确定*路径*是文件还是目录。如果*路径*存在于文件系统中并且是一个目录，则该方法会附加一个尾部斜杠。如果文件系统中不存在*路径*，则该方法假定它表示文件并且不附加尾部斜杠。
> 
> 作为替代方案，请考虑使用`fileURLWithPath:isDirectory:`，它允许您明确指定返回的`NSURL`对象是代表文件还是目录。

此外，您应该使用它`NSSearchPathForDirectoriesInDomains`来查找应用程序支持目录。

把这一切放在一起，你最终会得到这样的东西：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(
                     NSApplicationSupportDirectory, NSUserDomainMask, YES);
NSString *applicationSupportDirectory = [paths objectAtIndex:0];
NSURL *url = [NSURL fileURLWithPath: applicationSupportDirectory isDirectory: YES]; 
```

来源：

*   [iOS 开发者库：NSURL 类参考](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html%23//apple_ref/doc/uid/20000301-BAJBGFBJ)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T19:45:30.630

您实际上需要*添加*百分比转义，而不是删除它们：

```
NSString* home = [NSHomeDirectory() stringByAppendingPathComponent:@"/Library/Application Support/"];
    NSURL *url = [NSURL URLWithString:[home stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSLog(@"%@", url); 
```

打印：

```
2012-07-18 13:44:54.738 Test[1456:907] /var/mobile/Applications/FF6E6881-1D1B-4B74-88DF-06A2B62CCFE6/Library/Application%20Support 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-10T03:04:30.283

**斯威夫特 2.0 版本：**

```
let encodedPath = path?.stringByAddingPercentEncodingWithAllowedCharacters(NSCharacterSet.URLQueryAllowedCharacterSet())! 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T20:08:46.823

首先，如果您实际上是在尝试获取应用程序的应用程序支持目录，请使用适当的方法（在本例中为 on `NSFileManager`）并直接处理 URL：

```
NSURL* appSupport = [[NSFileManager defaultManager] URLForDirectory: NSApplicationSupportDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:YES error:NULL]; 
```

如果你真的想建立一个路径，那么使用适当的初始化程序，在这种情况下，告诉 URL 它是一个文件路径 URL，这样它就会自然地处理空格，你可能可以建立 URL 路径（这个例子更多就像你上面的代码）：

```
NSString* home = [NSHomeDirectory() stringByAppendingPathComponent:@"/Library/Application Support/"];
// Here, use the appropriate initializer for NSURL
NSURL *url = [NSURL fileURLWithPath:home]; 
```

现在，URL 将被正确地进行百分比编码，您不会有任何问题（返回时它不会为 nil）。

# javascript - 检测按下哪个键 - 这是一个好方法吗？

> ID：11549051
> 
> 赞同：2
> 
> 时间：2012-07-18T19:42:25.607
> 
> 标签：javascript, html, keystroke

不久前我在互联网上找到了一个简单的代码......找不到它的特定站点，但代码是在 2005 年制作的。所以，我想知道这是否是一个好方法：

这是在 HTML 中：

```
<body onload="document.body.focus();" onkeyup="return keypressed(event)"> 
```

当键向上时，它会在 JavaScript 中调用此函数：

```
function keypressed(e) {
    var intKey = (window.Event) ? e.which : e.keyCode;
    if (intKey == 13) { // 13 = enter key
        //something happens if the key is clicked
    }
        // here, you can add as many if sentences for key strokes as you want! (same as first)

return true;
} 
```

我的意思是代码已经有 7 年的历史了（也许更多！），我认为它可能有点过时或非常过时！

我的问题：

1.  有没有更好的方法来做到这一点，或者这仍然是一个好方法？（我不想在这段代码中使用 jQuery，因为我不想只将它用于一个功能）

2.  我真的需要这个代码：`onload="document.body.focus();"`？（我没有编写这个代码，所以我不知道。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:55:42.403

您不需要`load`处理程序，页面在加载后已经聚焦，和/或如果有人在页面上的任何位置按下*输入*，它也将聚焦。

如果你需要`keyup`处理程序取决于你想用它做什么。您显示的代码是一个输入处理程序。如果您希望文本输入字段对输入进行操作*，*则将处理程序添加到该字段会更有效。

此外，最好在您的脚本中执行此操作（不[引人注意的 javascript](http://dev.opera.com/articles/view/unobtrusive-javascript/)使用的一部分）。处理程序`keypress`就足够了，否则*输入*值将成为输入值的一部分。就像是：

```
[someTextInput].onkeypress = function(e){
  e = e || event;
  if ( (e.which || e.keyCode) === 13 ){
     // do things
  }
} 
```

或者你可以使用`addEventListener/attachEvent`（[见这里](http://www.quirksmode.org/js/events_advanced.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:02:54.457

```
function displayunicode(e){
        var unicode = e.keyCode ? e.keyCode : e.charCode
        alert(unicode)
} 
```

做同样事情的另一种方法。

# jquery - 循环通过子 DIV 并获取 ID

> ID：11549055
> 
> 赞同：1
> 
> 时间：2012-07-18T19:42:37.060
> 
> 标签：jquery

我的 HTML 设置如下（例如，ID 是编造的）：

```
<div id="selected-area">
    <div id="01" class="folder-ready"> </div>
    <div id="02" class="folder-ready"> </div>
    <div id="03" class="folder-ready"> </div>
    <div id="04" class="folder-ready"> </div>
    <div id="05" class="folder-ready"> </div>
</div> 
```

遍历所有子 DIV`selected-area`并将它们的每个 ID 放入数组中的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:45:14.643

```
var array = new Array();

$('div','#selected-area').each(function(){
    array.push($(this).attr('id')); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:44:56.513

试试这样：

```
var idArray = $('#selected-area > div').map(function(){
    return this.id;
}).get(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T19:47:22.080

你可以这样做： -

```
$('#selected-area div').each(function() {
    alert(this.id);
});​​​​​ 
```

使用数组：

```
var tempArray = new Array();
$('#selected-area div').each(function() {
    tempArray.push(this.id);
});
alert(tempArray); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/RkFaU/1/)**

## 更新：

另一种表示方式：-

```
var tempArray = $('#selected-area div').map(function() {
    return this.id;
}).toArray();
alert(tempArray); 
```

参考**[现场演示 2](http://jsfiddle.net/SivaCharan/RkFaU/2/)**

# ios - ios: 仪器中的 Malloc

> ID：11549060
> 
> 赞同：1
> 
> 时间：2012-07-18T19:43:03.427
> 
> 标签：ios

当我使用 Leaks 仪器进行分析时，对于 iOS 5 项目。我没有看到任何泄漏，但看到了各种 Malloc 1.00KB Malloc 10 kb 等。与这些相对应，我可以看到不同数量的活动字节。Malloc 代表对象分配吗？如果我看到实时字节，那么这是否意味着相应分配的内存没有返回给 iOS？我们如何减少这些[如果可能的话]。当我查看与这些 Malloc 对应的详细信息时，我看到的主要是与系统相关的条目，例如 ft_mem_alloc。

谢谢阿尼

# c# - 如何在图像地图上为asp热点着色？

> ID：11549065
> 
> 赞同：5
> 
> 时间：2012-07-18T19:43:28.203
> 
> 标签：c#, javascript, asp.net, imagemap

我有一个图像（图像是建筑物的平面图），图像包含可以打开或保留的各种房间。我使用了 Imagemap 和热点来绘制房间的坐标，并且我正在处理 onclick 事件以完成我需要它们完成的事情。问题是，预订房间后如何为热点的坐标着色？我在我的数据库中跟踪保留的房间，所以知道哪个房间被保留不是问题，但问题是热点没有颜色属性。解决这个问题的最佳方法是什么？Javascript？

我知道我可以通过点击交换图像等等，但是有数百个房间，对于预订/未预订房间的每一种可能性都有这么多图像是浪费时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:11:01.340

您不会说 jQuery，但它肯定比从头开始更容易。jQuery插件来做到这一点：

[http://www.outsharked.com/imagemapster/](http://www.outsharked.com/imagemapster/)

您的数据库访问问题有点像红鲱鱼。加载页面时，服务器没有理由不能将所需的数据作为标记的一部分传递，例如

```
<script type="application/json" id="map-data">
  [1,2,10,33]
</script> 
```

.. 或任何对您有用的格式/结构/数据类型。你不必使用一个`script`块 - 你可以把它放在一个 hidden`div`中，这真的没关系。您也不必使用 JSON，这很方便。然后，您可以将该数据用作 ImageMapster 之类的输入，以突出显示所需区域。只需隐藏图像，直到您完成配置，就最终用户所见，这就是它从服务器加载的方式。

从标记中获取一些数据并使用 ImageMapster 在图像地图上设置热点的示例：

[http://jsfiddle.net/jamietre/hD6bM/](http://jsfiddle.net/jamietre/hD6bM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:53:59.110

HTML5 通过[画布进行程序绘图](http://www.w3schools.com/html5/html5_canvas.asp)

# javascript - 单击时如何在表格行内切换div

> ID：11549068
> 
> 赞同：1
> 
> 时间：2012-07-18T19:43:40.553
> 
> 标签：javascript, jquery, html

只是在解决这个 jquery 问题时遇到了一点问题。我有一个表格，每行显示一些数字。我希望它这样当我单击作为 href 链接的数字时，它会切换最初隐藏的名为“test”的 div。目前，当我单击带有数字的一行时，我的代码会切换所有行，因为它们共享相同的类名。如何解决此问题，以便仅切换被单击的行？

表格和内容的一些附加信息是动态生成的。

我的 HTML

```
<table>
 <tr>
  <td>
    <a class="showinfo" href="#"><b>ID:12</b>Click me<b></a>
    <div class="test">Test</div>
  </td>
 </tr>
 <tr>
  <td>
    <a class="showinfo" href="#"><b>ID:46</b>Click me<b></a>
    <div class="test">Test</div>
  </td>
 </tr>
</table> 
```

我的JS如下

```
$('.test').hide();
$('.showinfo').click(function(){
    $('.test').toggle();    
}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:50:30.770

尝试这个

```
$('.showinfo').click(function(e){
    e.preventDefault();
    $(this).closest('td').find(".test").toggle();
}); 
```

[**演示。**](http://jsfiddle.net/heera/4Lk5H/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:46:22.050

这是js需要的

```
$('.test').hide();
$('.showinfo').click(function(){
    $('.test',$(this).parent()).toggle();    
});​ 
```

你可以在[这里看到演示](http://jsfiddle.net/XrZEr/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T19:46:38.807

[接下来](http://api.jquery.com/next/)使用 jQuery

```
$('.showinfo').click(function(){
  $(this).next('.test').toggle();    
}); 
```

它将找到与选择器匹配的下一个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T19:53:05.933

首先你需要关闭你的元素，这个：

```
<a class="showinfo" href="#"><b>ID:12</b>Click me<b></a> 
```

应该只是

```
<a class="showinfo" href="#"><b>ID:12</b>Click me</a> 
```

否则会有一个打开的`<b>`元素，你不能`<a>`在另一个打开的元素内关闭元素等。

然后只需定位兄弟元素并按类过滤：

```
$('.showinfo').on('click', function(e){
  e.preventDefault();
  $(this).siblings('.test').toggle();    
}); 
```

您还应该阻止`<a>`元素的默认操作以避免滚动到顶部。

如果代码像示例中那样工作，并且隐藏了两个元素，则无需委托事件，但在绑定处理程序时不存在的动态元素上，您需要将事件委托给最近的非动态元素，我以文档为例：

```
$(document).on('click', '.showinfo', function(e){...}); 
```

[小提琴](http://jsfiddle.net/XWpXN/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T19:55:43.180

jsFiddle：http: [//jsfiddle.net/3Wdp2/18/](http://jsfiddle.net/3Wdp2/18/)

您的以下行无效：

```
<a class="showinfo" href="#"><b>ID:12</b>Click me<b></a> 
```

删除多余的`<b>`标签。

```
$(".showinfo").click( function()
{
    // The TD above the link
    var parent = $(this).parent();

    // The TD child that is a div
    $(parent).children("div").toggle();
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T19:46:53.660

用这个：

```
$('.showinfo').click(function(){
 $(this).find(".test").toggle();
}); 
```

还将 .test 设置为 display:none; 从CSS。

# ruby - 从数据库中获取 SASS（编译传递的数据而不是从文件中读取）

> ID：11549069
> 
> 赞同：0
> 
> 时间：2012-07-18T19:43:42.673
> 
> 标签：ruby, sql-server, sass

有没有办法让 SASS 编译从数据库传递的数据？我可以使用 DBI + ODBC 从 MSSQL Server 2008 获取数据，但是如何让 SASS 编译传递的数据而不是文件？

没有发现任何有用的东西，并且更改 sass 核心文件听起来不是一个好主意……尤其是考虑到零 Ruby 知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:10:30.480

我最终使用了这段代码。完全不优雅，但我希望它能帮助有变态需求的人。

sass gem 目录中的 sql.rb：

```
require 'dbi'
require 'sass'
require config with database credentials

if File.exist?(config)
    require config

    SQL_OPTIONS = {
        :style => :nested,
        :load_paths => ['.'],
        :cache => true,
        :cache_location => './.sass-cache',
        :syntax => :scss,
        :filesystem_importer => Sass::Importers::Filesystem,
        :css_location => "./public/stylesheets",
        :always_update => true,
        :template_location => [["scss", "css"]]
    }.freeze

    db = DBI.connect('dbi:ODBC:driver={SQL Server};server=' + $db_host, $db_user, $db_pass)

    db.select_all('SELECT name, scope, content FROM ' + $db_name + '.dbo.scss') do | row |
        File.open(Dir.pwd + '/css/' + row['name'] + '.css', 'w') do |css|  
            css.puts Sass::Engine.new(row['content'], SQL_OPTIONS).render
            puts '  overwrite css/' + row['name'] + '.css [db]'
        end
    end
else
    puts 'ignore database stylesheets, config_ruby doesn\'t exist'
end 
```

在 lib/sass/engine.rb 我最后包含了这个文件：

```
require File.expand_path(File.dirname(__FILE__) + '../../../sql') 
```

它需要额外`dbi`的和`dbd-odbc`gems 并影响 sass --update 和 --watch。

希望这可以帮助某人。

# c# - 使用比较函数对插入进行排序

> ID：11549071
> 
> 赞同：6
> 
> 时间：2012-07-18T19:43:46.293
> 
> 标签：c#, sorting, insert, comparison

我正在尝试通过 T 的两个属性对容器中类型 T 的数据进行排序。它可能有很多数据，所以我更希望在插入时进行排序。我已经研究了`List`和`SortedList`，但两者都没有提供我需要的功能。

C# 是否提供了一个容器，该容器允许对插入进行排序和对我的比较函数进行排序？我想避免插入后排序`List.Sort`，并避免使用数据作为键和值的开销`SortedList`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T19:46:14.513

如果您使用的是 .NET 4，则可以使用[`SortedSet`](http://msdn.microsoft.com/en-us/library/dd412070.aspx)自定义的`IComparer<T>`. 缺点是它不允许你有多个相等的元素。你需要那个吗？

我不清楚你*为什么*要对插入进行排序只是因为你有很多数据。在完成插入之前是否需要对其进行排序？如果不是，我希望最后的单一排序（通过`List.Sort`）与即时排序一样有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T19:58:27.030

If you want to keep the same sorting order all the time, you can use `SortedList<K,V>` or `SortedDictionary<K,V>` and pass a `IComparer<K>` to the constructor.

If you need different sorting orders on the same container, you can use a `List<T>` and pass a `IComparer<T>` to the `Sort` method.

Since you are probably storing reference types, I would not worry too much about using the items as key as well as values. You are just storing the references.

Another option would be to implement your own binary-tree structure.

# c++ - minizip 附加到文件

> ID：11549078
> 
> 赞同：3
> 
> 时间：2012-07-18T19:44:18.413
> 
> 标签：c++, append, zlib, zipfile

我正在使用 Zlib 的 Minizip 程序。我正在尝试将文件添加到当前的 zip 文件中。我发现我可以使用以下函数附加 zip 文件：

extern zipFile ZEXPORT zipOpen64 OF((const void *pathname, int append));

将追加设置为 2。但是，这不会覆盖 zip 中的文件，而是只会将文件添加到 zip 的末尾，无论它们是否已经存在。有没有什么办法解决这一问题？我希望可以选择仅替换旧文件和/或覆盖所有文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:30:54.237

minizip 库目前不支持除了将文件添加到 zip 存档之外的任何内容。它也不支持删除或更新存档中的文件。

[minizip](http://www.winimage.com/zLibDll/minizip.html)网站上的这句话可能会对您有所帮助：

> Ivan A. Krestinin 写了一个[小例子](http://www.winimage.com/zLibDll/del.cpp)，说明如何从 zip 存档中删除文件......

您可以将删除操作与添加操作相结合，以实现归档内文件替换。上面示例代码的缺点是它需要在磁盘上创建一个临时 zip 文件。

# git - cvs2git 迁移不同于 git 和 cvs 的二进制文件（用 -kb 标记）

> ID：11549082
> 
> 赞同：0
> 
> 时间：2012-07-18T19:44:30.247
> 
> 标签：git, cvs, cvs2svn, git-cvs

我在超过 2 GB 的 CVS 存储库上运行了 cvs2git 迁移。我写了一个脚本遍历新的 git 存储库和 CVS 模块来验证对象是否相同。我发现文本文件迁移得很好并且具有相同的 sha1sum；然而，所有的二进制文件都有不同的 sha1sum，它们在 CVS (-kb) 中都被标记为二进制。我读过的关于 cvs2git 和二进制文件的所有其他主题通常都将问题归咎于没有被标记为二进制文件 (-kb) 的二进制文件，但这里的情况并非如此。还有什么问题？

我执行迁移的脚本如下：

```
./Python-2.7.3/python ./cvs2svn-trunk/cvs2git \
--blobfile=/path/to/git-blob.dat \
--dumpfile=/path/to/git-dump.dat \
--username=cvs2git \
/cvsroot/database

cd /gitroot; mkdir database; cd database; git init

cat /path/to/git-{blob,dump}.dat | git fast-import 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:58:56.617

这些二进制文件是否包含一些形式的字符串`$Id ...$`？这对我来说是前段时间的问题（它用`$Id$`二进制文件替换它），但它应该在最新版本中得到修复，请参阅[这个提交](https://github.com/mhagger/cvs2svn/commit/6aeb180a44dcdf54151cd8912491ce3b76d691ea)。

无论如何，我建议使用十六进制编辑器来找出实际的差异。

我还注意到您不使用选项文件。我不确定 cvs2git 使用什么默认值，但值得尝试使用自定义版本的`cvs2git-example.options`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:37:42.713

如果您的存储库是 CVSNT 存储库，而不是标准 CVS 存储库，则可以解释您的问题。CVS*为所有修订记录一次，*文件是否为二进制文件，而 CVSNT*按修订记录文件类型修订*。cvs2svn/cvs2git 只读取文件范围的二进制属性，而不是 CVSNT 的逐个修订属性。因此，它不知道文件已在 CVSNT 中标记为二进制。

[这是 cvs2svn/cvs2git官方不支持从 CVSNT 存储库转换](http://cvs2svn.tigris.org/cvs2svn.html#reqs)的主要原因。

# javascript - Bash脚本和Javascript的标准哈希算法？

> ID：11549084
> 
> 赞同：1
> 
> 时间：2012-07-18T19:44:36.123
> 
> 标签：javascript, bash, node.js, encryption, cryptography

我的 mac 中有一个目录，其中包含具有以下名称的文件 -

```
Directory images -
1.jpg
2.jpg
3.jpg
4.jpg 
```

我想编写一个bash脚本来重命名这个文件夹中的所有文件，通过使用一些标准的散列算法，所以目录现在看起来像这样 -

让我们假设散列键是 common_key = "mykey123"

```
Directory images -
U2FsdGVk.jpg
X1O9Z6e.jpg
ECdjybF.jpg
U2FsdGVajpg 
```

我怎样才能做到这一点？

此外，我正在用Nodejs（基本上是javascript）编写一些代码，我希望从这四个中选择一个随机图像并显示它，所以我正在使用 -

```
var random_image_number = Math.floor((Math.random()*4)+1); // Picking a random number out of 4 
```

假设 random_image 是 3。现在我需要显示图像编号 3。如果我没有对图像名称进行哈希处理，我通常会这样做 -

```
<img src="/images/" + random_image_number + ".jpg" /> 
```

但是现在我需要对我生成的随机数再次使用标准加密算法，才能显示图像。（我一直强调“标准”，因为相同的哈希算法必须在 JS 端以及 bash 脚本中工作并生成相同的结果）

所以我需要这样的东西

```
var random_image_number = Math.floor((Math.random()*4)+1); // Picking a random number out of 4
var random_image_number_hashed = some_hashing_function(common_key, random_image_number)
<img src="/images/" + random_image_number_hashed + ".jpg" /> 
```

请告诉我我可以使用什么算法。它不需要太复杂，但必须在 bash 脚本和 javascript 端给出相同的结果。

此外，我不确定如何编写 bash 脚本来使用散列算法重命名所有文件，因此任何有关此的代码都将非常有用。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:18:54.703

使用在 javascript 端`openssl`重命名文件和[crypto.js](http://code.google.com/p/crypto-js/)，您应该能够使用 SHA1 对文件名进行哈希处理。

以下 bash 循环将进行重命名。请注意，它假定文件名中没有空格字符。

```
for file in `/bin/ls *.jpg`; do
    hashedFileName=`echo -n ${file%.*} | openssl dgst -sha1 -hmac "myKey123"`;
    mv $file $hashedFileName.jpg;
done 
```

每个图像名称的 Javascript 端将如下所示：

```
// hash filename "1.jpg":
var hashedFileName = CryptoJS.HmacSHA1("1", "myKey123") + ".jpg"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:06:11.427

您可能希望将其`aes256`视为您的算法。

在命令行上，您可以使用该`openssl`实用程序来加密您的文件名：

```
echo 'filename_to_encrypt' | openssl aes-256-cbc -a 
```

然后在`node`你可以使用`crypto`模块解密：

```
var crypto = require('crypto');

var algorithm = 'aes256'; // or any other algorithm supported by OpenSSL
var key = 'password';
var text = 'encrypted_filename';

var decipher = crypto.createDecipher(algorithm, key);
var decrypted = decipher.update(text, 'hex', 'utf8') + decipher.final('utf8'); 
```

如果你只想做散列，那么你可以使用`bcrypt`. `bcrypt`是一个在 bash 中工作的实用程序，它也有`node.js`模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:14:01.227

尽管我接受了上述答案，但我最终还是使用了称为 crypto 的 node.js 模块进行散列。此外，我不得不稍微调整一下 bash 脚本以使其工作。

所以这就是我最终使用的 -

Bash 脚本（在图像文件夹中运行） -

```
for file in `/bin/ls *.jpg`; do
    hashedFileName=`echo -n ${file%.*} | openssl dgst -sha1 -hmac "myKey123"`;
    mv $file ${hashedFileName##* }.jpg;
done 
```

NodeJs -

```
var crypto = require('crypto');
...
random_image_number_hashed = crypto.createHmac('sha1', 'myKey123').update(random_image_number).digest('hex'); 
```

# jakarta-ee - 何时开始 Java EE 服务器集群

> ID：11549086
> 
> 赞同：-2
> 
> 时间：2012-07-18T19:44:40.757
> 
> 标签：jakarta-ee, load-balancing, jboss7.x

我正在使用 Java EE 6、EJB 3.1、CDI、JSF 2 和 Hibernate 在 JBoss 7.1.1 上运行应用程序。

我如何知道一个 Java EE AS 的独立实例是否足以处理所有请求，或者是否需要一个 AS 的多个实例？

JBoss 7.1.1 每秒应该能够处理多少个请求（在一般情况下）？

一年中有一次请求数量显着增加，而服务器（当时是 JBoss 4.2.3）出现故障。而且我不能说这是由于应用程序的设计不佳还是仅仅由于大量的请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-05T12:24:44.813

尝试找出是否有任何特定请求主要在一年中的那个时候执行。

然后，您可以在您的 jboss 实例中附加**jvisualvm**的同时，为特定请求运行一些**jmeter**测试（模拟每秒对应用程序的多个请求） 。

 ***您可以使用许多不同的 jvm 内存设置（例如-Xmx512m -XX:MaxPermSize=512m* ）尝试这些测试，如果可能的话，使用不同数量的处理器（如果您在虚拟化环境中更容易）

假设你的应用程序可以同时处理很多请求，*standalone-ha.xml的***urn:jboss:domain:web:1.1**子系统中有一个设置 可以增加 jboss 可以处理的最大并发连接数：

 *```
<connector name="http" protocol="HTTP/1.1" max-connections="10000" scheme="http" socket-binding="http"/> 
```

*在urn:jboss:domain:datasources:1.0*部分中为您的数据源找到最佳的 max-pool-size / blocking-timeout-millis 值也可以防止 jboss 在您的请求增加时失败。

结合您从上述测试中获得的结果，您可以决定在单独的节点中运行额外的 jboss 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:15:18.770

没有简单的常数（42 不是所有的答案）。它取决于很多因素。与数据库的请求连接很长。在后台处理。

你应该阅读负载压力测试（http://en.wikipedia.org/wiki/Load_testing）。您可以使用 JMeter (http://jmeter.apache.org/) 或其他工具创建负载测试，并模拟查看时间和平均时间。尝试模拟您的请求，就像您可以模拟生产请求一样。***

# java - 如何从 Eclipse 内部将 jsp 页面中的数据插入 mysql 数据库并在该表上运行查询？

> ID：11549087
> 
> 赞同：1
> 
> 时间：2012-07-18T19:44:48.060
> 
> 标签：java, mysql, jsp, servlets, phpmyadmin

我与 mysql 数据库有以下`JDBC`连接：

```
import java.sql.*;

public class Main
{
    public static void main (String[] args) throws ClassNotFoundException, SQLException
    {

        Class.forName("com.mysql.jdbc.Driver");

        String string = "jdbc:mysql://localhost:3306/testdb";

        Connection con = DriverManager.getConnection(string , "root2" , "root");
        PreparedStatement statement = con.prepareStatement("select * from names"); // SELECT * FROM `names`
        ResultSet result = statement.executeQuery();
        while (result.next())
        {
            System.out.println(result.getString(1) + " " + result.getString(2));
        }

    }
} 
```

当我进入`http://localhost/phpmyadmin`并创建一个数据库时，我可以在我在那里创建的数据库上成功运行查询，但是我怎样才能从内部`Eclipse`（例如 java）做到这一点？

更清楚地说，用户在`jsp`页面中输入数据，我从那里提取数据。之后，我想从 Eclipse 内部创建一个数据库，而不是直接进入`http://localhost/phpmyadmin`。我怎样才能做到这一点 ？

**编辑：**

我有所需的 servlet，我现在想要的是从 servlet 创建数据库并从 servlet 运行查询。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:57:08.133

您的问题的完整答案将需要大量的写作和很少的澄清。

您可以使用很好的教程： [使用 Eclipse 创建数据库 Web 应用程序](http://www.eclipse.org/articles/article.php?file=Article-EclipseDbWebapps/index.html)

您将使用 MySQL 而不是 Derby DB。

# java - netbeans wsdl 客户端代码生成

> ID：11549097
> 
> 赞同：1
> 
> 时间：2012-07-18T19:45:10.133
> 
> 标签：java, web-services, netbeans-7

我正在尝试使用 netbeans 构建 Web 服务客户端。远程 WSDL 具有到服务和 schemaLocation 的相对路径。复制了 wsdl localy，替换了相关链接并尝试使用它来生成客户端。

```
Error: Unknown Host: localhost
URL Resource 
Retrieving Location:      locallink/Service.svc?xsd=xsd4 
    Found in document: remote url link Service.svc?xsd=xsd2 
```

所有架构位置都会重复该错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:58:21.930

我会试试这个......将所有文件放在同一个目录中。删除路径信息，因此如果您将其`localhost/Service.svc?xsd=xsd4`替换为`xsd4.xml`. 它应该足够聪明，可以在当前目录中查找链接文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:27:58.883

创建新的 Web 服务客户端时，不要选择“本地文件”，而是选择“WSDL URL”选项。这将自动将 WSDL 文件放置在需要的位置。

# mysql - MySQL 上的多源复制

> ID：11549104
> 
> 赞同：2
> 
> 时间：2012-07-18T19:45:38.307
> 
> 标签：mysql, replication, sync, failover

我希望跨多个 MySQL 服务器（两个以上）使多个表中的数据保持同步。目前使用的 MySQL 版本是 5.5，使用的操作系统是 Windows 7。

我已经使用额外的插件（例如 tungsten 复制器和 galera 集群）探索了几个选项，但如果我没记错的话，这两个选项都需要安装 cygwin 或 mingw 以及其他不需要的东西，比如 ruby​​，因为这将是生产环境。

此外，我查看了联合表，但如果 mysql 服务器脱机，我需要能够将自身重新同步到其他表，而联合表不会发生这种情况。

有没有办法在 MySQL 中使用故障转移功能在多个服务器上同步多个表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:15:00.987

由于 mysql 是开源的，因此不支持自动故障转移，因此您在设置中的选项也有限。我强烈推荐钨复制器。红宝石，你需要但绝对不是cygwin。

[http://code.google.com/p/tungsten-replicator/wiki/TRCBasicInstallation](http://code.google.com/p/tungsten-replicator/wiki/TRCBasicInstallation)

和数据魅力者的博客：

[http://datacharmer.blogspot.co.il/](http://datacharmer.blogspot.co.il/)

是一个很好的起点。如果您立即需要帮助，可以使用钨复制器的 IRC 室。唯一的缺点是您必须为商业版本和咨询（优质服务）付费。完成基本设置后，将进行扇入和扇出复制。您可以根据您的具体需求自定义设置，甚至创建自定义的复杂设置。

我不认为安装是个问题，我已经在几种情况下安装、卸载、设置和撤消了 tungsten 复制。如果您的预算紧张，钱将是唯一的问题，但如果您想要开源选项，您应该能够找到自己的方式。

# actionscript - Actionscript - 移动、旋转和缩放图像并将其放置在给定点的中心

> ID：11549105
> 
> 赞同：0
> 
> 时间：2012-07-18T19:45:38.793
> 
> 标签：actionscript, rotation, pivot, center, move

我有一个`spark.components.Image`，它是一个矩形，我想将它旋转一个随机角度，移动它，使其中心是给定点（100,200），并缩放它。

到目前为止，我已经尝试过这个

```
var rotate:Rotate = new Rotate(rect);
rotate.angleBy = Math.random()*100;

var move:Move = new Move(rect);
move.xTo = 100;
move.yTo = 200;

var scale:Scale = new Scale(rect);
scale.scaleXTo = 0.44;
scale.scaleYTo = 0.44;

move.play();
scale.play();
rotate.play(); 
```

但问题是左上角似乎在点（100,200）。任何想法如何居中？

我一直在阅读有关枢轴点和注册点的信息，但我仍然无法弄清楚。

谢谢！

# sql - 前 10 名和底部 float_value 的平均值，带日期，按日期分组

> ID：11549111
> 
> 赞同：0
> 
> 时间：2012-07-18T19:46:05.323
> 
> 标签：sql, sql-server-2005, average, common-table-expression

我有一张这样的桌子：

```
| prodID  | date     |  perm
---------------------------------   
|200      |8/7/2011  | 81.742 
|200      |8/7/2011  | 81.644
|200      |8/7/2011  | 81.302
|200      |8/7/2011  | 81.057
|201      |8/7/2011  | 80.932
|201      |8/7/2011  | 80.839
|201      |8/7/2011  | 80.622
|201      |8/7/2011  | 80.557
|201      |8/7/2011  | 80.541 
```

（除了更大一点）发生的情况细分：我想取前 10 个值（和后 10 个值）的平均值，其中 prodid = somevalue 在这种情况下为 200。

代码：

```
declare @myid int
set @myid = 200

;with high as  --top ten average
(
 select prodid, CONVERT(CHAR(10),  DATEADD(DAY, AVG(DATEDIFF(DAY, 0, CONVERT    
(SMALLDATETIME, [date]))), 0),     101) as date, max(perm)as max_perm, avg(perm) 
as   
high_perm from   
( select prodid, date, perm, 
 row_number() over(partition by date order by perm desc) as nt    
 from live_pilot_plant
 where prodid = @myid) as T 
 where nt <= 10
 group by prodid
),
low as   -- bottom ten average
(
select prodid, CONVERT(CHAR(10),  DATEADD(DAY, AVG(DATEDIFF(DAY, 0, CONVERT    
(SMALLDATETIME, [date]))), 0),101) as date, min(perm) as min_perm, avg(perm) 
as low_perm  from   
( select prodid, date, perm,  
  row_number() over(partition by date order by perm asc) as nt    
  from live_pilot_plant
  where prodid = @myid) as T 
  where nt <= 10
  group by prodid
)

select l.prodid, l.date, l.low_perm as low_avg, m.high_perm as high_avg,
(m.high_perm -    l.low_perm) as delta
from low l
left outer join high m
on l.prodid = m.prodid 
```

这会产生这样的东西：

```
|  prodID  |   date     |  low_avg   |  high_avg  |  delta   |
|   200    | 08/07/2011 |   68.752   |  79.1976   |  10.444  | 
```

这些数字不准确——

这一切都很好而且花花公子 - 除了不是很通用。我的意思是有很多 prodID，而根据 prodID 来做一个太慢了。如何根据日期获取 low_avg 和 high_avg（按 prodID 分组）

像这样的东西：

```
| date       | prodID  | low_avg  | high_avg  |  delta  |
| 08/07/2011 | 200     |  60      |  80       |  20     |
| 08/07/2011 | 201     |  70      |  100      | 100     | 
```

注意：您可能已经注意到日期前的疯狂转换。原因是某些 prodID 重叠日期，即。在 2011 年 8 月 7 日和 2011 年 8 月 8 日为 200，我需要平均日期（这是一个 varchar）。因此，如果有 100 行是 8/7/2011，然后是 9 行是 8/8/2011，最终查询将产生日期为 /8/7/2011

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:52:16.153

以下查询一次对所有产品执行此操作：

```
select lpp.prod_id, lpp.date,
       AVG(case when seqnum_asc <= 10 then perm end) as avg_bottom10,
       AVG(case when seqnum_desc <= 10 then perm end) as avg_top10,
       (AVG(case when seqnum_desc <= 10 then perm end) - AVG(case when seqnum_asc <= 10 then perm end)) as delta
from (select lpp.*,
             ROW_NUMBER() over (partition by prodid, date order by perm) as seqnum_asc,
             ROW_NUMBER() over (partition by prodid, date order by perm desc) as seqnum_desc
      from live_pilot_plan lpp
     ) lpp
group by lpp.prod_id, lpp.ate 
```

# mysql - SQL 连接表并按相乘值对它们进行排序

> ID：11549113
> 
> 赞同：0
> 
> 时间：2012-07-18T19:46:07.733
> 
> 标签：mysql, sql

所以，简短解释：我想从表 games_records 中获取所有记录，按最高 furni 值 (pricelist_furnis_tradevalue.value) 乘以记录数量 (= games_records.amount) 排序。furni 值在 pricelist_furnis_tradevalue 中。现在... pricelist_furnis_tradevalue 有一些家具的多个条目。我只想获得最新的条目，因此它应该按 pricelist_furnis_tradevalue.time 排序。但是下面的这个查询返回 pricelist_furnis_tradevalue 中每个 furni/record 的所有条目。

```
SELECT *
FROM games_records 
JOIN pricelist_furnis_tradevalue 
    ON games_records.furni = pricelist_furnis_tradevalue.furni
ORDER BY (pricelist_furnis_tradevalue.value*games_records.amount) DESC 
```

这是2个所需表的结构

游戏记录

```
id      user        furni       amount      time
1       2           4           40          1338052926
2       4           30          90          1338054046 
```

pricelist_furnis_tradevalue

```
id      furni       value       time
1       2           20          1334065379
2       2           50          1334067445
3       2           100         1334092057
4       4           50          1334065375
4       4           20          1334067436 
```

我会很感激任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:55:19.607

```
SELECT * FROM 
    (SELECT *, pricelist_furnis_tradevalue.value*games_records.amount AS 'mult' FROM games_records 
    JOIN pricelist_furnis_tradevalue 
    ON games_records.furni = pricelist_furnis_tradevalue.furni) a
ORDER BY a.mult DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:56:25.090

您需要获取最长时间的记录。

这是一种方法：

```
SELECT *
FROM games_records join
     (select furni, max(time) as maxtime
      from pricelist_furnis_tradevalue
      group by furni
     ) as maxf
     on games_records.furni = maxf.furni JOIN
     pricelist_furnis_tradevalue 
     ON games_records.furni = pricelist_furnis_tradevalue.furni and
        pricelist_furnis_tradevalue.time = maxf.maxtime
ORDER BY (pricelist_furnis_tradevalue.value*games_records.amount) DESC 
```

# oracle - 是否可以在 Oracle SQL*plus 脚本中以编程方式构造替换变量的名称？

> ID：11549114
> 
> 赞同：1
> 
> 时间：2012-07-18T19:46:11.753
> 
> 标签：oracle, plsql, sqlplus

我正在尝试编写一个运行单个任意过程的 sql*plus 脚本。棘手的部分是我希望能够运行该过程，而不管该过程需要多少参数。

为了确定该过程的正确参数数量，我正在执行以下操作：

```
 SELECT COUNT(*) INTO v_in
  FROM all_arguments
  WHERE LOWER(owner) = LOWER(v_schema) 
    AND LOWER(package_name) = LOWER(v_package)
    AND LOWER(object_name) = LOWER(v_proc)
    AND in_out = 'IN'; 
```

当需要构建立即执行字符串时，我想使用某种循环来做到这一点。所有传入的参数都只是编号，&1 到 &n。

```
 FOR i IN 1..v_in
  LOOP
    v_block := v_block || '''' || &i || '''';
  IF i != v_in THEN
    v_block := v_block || ',';
  END IF;
  END LOOP; 
```

然而，这不起作用。它看到 &i 并且当然认为它是一个名为 i 的参数，并且由于调度应用程序（Appworx ... ugh）没有运行定义 i=something，因此失败得很惨。

有没有办法在这方面做间接，这样我就可以迭代，但是对于给定的过程有很多碰巧是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:52:12.583

你想做动态sql，不知道会涉及多少参数。[Asktom 对此有权威的回答](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:1288401763279)。不要为“新”方法而烦恼。它对你不起作用，因为你不知道会有多少参数。

基本上，您将通过连接创建动态 sql，但参数将存储在 a 中`sys_context`，以便查询具有绑定。这有助于将 SQL 注入之类的事情作为奖励。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:20:26.460

您可以使用 new_value 和默认 SQL*Plus 参数来欺骗它。

创建一个这样的脚本，例如 test.sql：

```
-- hide output
set termout off

-- define parameter variables to be set with new_value
col par1 new_value 1 noprint
col par2 new_value 2 noprint
col par3 new_value 3 noprint

-- initialize parameter variables
select 1 par1, 2 par2, 3 par3 from dual where 1=2;

-- append comma to parameter variables, not needed for first parameter
select nullif(','||'&2',',') par2, nullif(','||'&3',',') par3 from dual;

-- show output
set termout on

-- you actual script starts here
prompt calling procedure my_proc(&1 &2 &3)

-- for next run
undef 1
undef 2
undef 3 
```

现在打电话`@test 3 4`

输出：

```
calling procedure my_proc(3 ,4 ) 
```

或致电`@test 1 2 3`

输出：

```
calling procedure my_proc(1 ,2 ,3 ) 
```

现在您需要将此扩展到您的参数的最大预期数量。

（请注意，您必须先登录才能进行此操作，否则`select from dual`会静默失败。）

# php - Magento Success.phtml Html 编码一切

> ID：11549121
> 
> 赞同：0
> 
> 时间：2012-07-18T19:46:43.377
> 
> 标签：php, html, magento

使用 magento 在我的 success.phtml 页面上放置分析代码时遇到问题。出于某种原因，每当我回显任何带有“&”的字符串时，Magento 都会对其进行编码并打印出“&”，即使它是 IMG 的 src url 的一部分。例如，这段代码：

```
<?php 
    echo '<img src="zmam=775xxxxx&zmas=1&zmaq=N&quantity=' . $item->getQtyOrdered() . '&pcode=' . $catalog_number . '&zman=' . $lastOrderId . '&zmat=' . $_subtotal . '" width=0 height=0 border=0>';
?> 
```

在收据页上打印出来：

```
<img src="zmam=775xxxxx&amp;zmas=1&amp;zmaq=N&amp;quantity=1.0000&amp;pcode=&amp;zman=Z77436&amp;zmat=8.9500" width="0" height="0" border="0"> 
```

对于页面上的每个回声都是如此。我目前无法通过许多不同的分析提供商跟踪任何内容。我已经用谷歌搜索了一段时间，找不到任何关于这个主题的东西——所以任何输入都将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:13:32.517

您必须在 HTML、链接和图像 URL 中对 & 进行编码。所以如果你问我，没有问题。我不知道，这是从哪里来的——magento 没有这样做，但它是正确的。

`<img src="http://example.com/file.php?param=123&amp;param2=123">`是插入链接的正确方法。

您确定网址正确吗？看起来，缺少一个文件。

而且之前有回声？不是 htmlEscape？我知道这是愚蠢的问题，但我不知道这应该来自哪里。

您可能知道 HTML 验证器的这个错误？

> 您可能忘记“转义”与号 (&) 字符，从而导致验证器认为您创建了一个以“&”开头的新的未定义实体。如果您希望在文本或 URL 中出现“&”，请使用“ `&amp;`”对其进行转义。

# opengl - 屏幕捕获行为

> ID：11549127
> 
> 赞同：0
> 
> 时间：2012-07-18T19:46:53.983
> 
> 标签：opengl, windows-7, gdi, screen-capture

我使用此代码来捕获桌面：

```
Frame::Frame()
{
    source_win=GetDesktopWindow();
    RECT r;
    GetWindowRect(source_win,&r);
    width=r.right;
    height=r.bottom;

    source_context=GetDC(source_win);
    sink_context=CreateCompatibleDC(source_context);
    sink_bitmap=CreateCompatibleBitmap(source_context,width,height);
    old_obj=SelectObject(sink_context,sink_bitmap);

    memset(&info_out,0,sizeof(info_out));
    info_out.bmiHeader.biSize=sizeof(info_out.bmiHeader);
    GetDIBits(source_context,sink_bitmap,0,0,NULL,&info_out,DIB_RGB_COLORS);
    info_out.bmiHeader.biBitCount=24;
    info_out.bmiHeader.biCompression=BI_RGB;
    bitmapdata=malloc(getScanlineSize(info_out.bmiHeader.biWidth
        ,info_out.bmiHeader.biBitCount)
        *info_out.bmiHeader.biHeight);
    p_rows=(void**)malloc(sizeof(void*)*info_out.bmiHeader.biHeight);
    for(int k=0;k<info_out.bmiHeader.biHeight;k++)
    {
        p_rows[info_out.bmiHeader.biHeight-k-1]=(char*)bitmapdata +     k*getScanlineSize(info_out.bmiHeader.biWidth,info_out.bmiHeader.biBitCount);
    }
}

void Frame::capture()
{
    BitBlt(sink_context,0,0,width,height,source_context,0,0,SRCCOPY|CAPTUREBLT);
    GetDIBits(sink_context,sink_bitmap,0,info_out.bmiHeader.biHeight
            ,bitmapdata,&info_out,DIB_RGB_COLORS);
}

Frame::~Frame()
{
    free(p_rows);
    free(bitmapdata);
    SelectObject(sink_context,old_obj);
    DeleteObject(sink_bitmap);
    DeleteDC(sink_context);
    ReleaseDC(source_win,source_context);
} 
```

如果至少有一个双缓冲应用程序正在运行，这在 Windows XP 上可以很好地捕获全屏 OpenGL 应用程序。但是，在 Windows 7 中，它只会产生黑框。如何修改代码以使其再次工作？

如果重要的话，我正在运行 64 位版本。由于许可证不兼容，不能选择绕道。

编辑：该代码非常适用于非全屏应用程序。问题是在全屏应用程序运行时桌面窗口是黑色的。

# c++ - StackWalk64 如何处理内联函数？

> ID：11549128
> 
> 赞同：0
> 
> 时间：2012-07-18T19:46:54.123
> 
> 标签：c++, windows, winapi, callstack

我正在尝试使用 dbghelp.dll 函数捕获调用堆栈。我正在使用 StackWalk64 来捕获调用堆栈中函数的地址。StackWalk64 与内联函数的行为对我来说似乎是不确定的。有时，它会跳过内联函数。有时我可以为它们取回地址，但 stackwalk64 对调用堆栈中的下一个函数失败。在这两种情况下，我都会得到不完整的调用堆栈。

任何人对此以及如何处理调用堆栈中的内联函数都有更多的见解。

谢谢

# c# - 从 Web 服务中检索 10,000 行并插入到 OWC11 电子表格中

> ID：11549130
> 
> 赞同：2
> 
> 时间：2012-07-18T19:47:07.307
> 
> 标签：c#, javascript, jquery, asp.net, .net

我目前对 Web 服务的调用需要很长时间才能返回。ASP.NET 页面大约需要一分钟或更长时间才能开始加载。我正在使用 C# Response.Write() 将必要的数据写入 Javascript，因此 Javascript 会将其插入 OWC11 电子表格。我想分块做，但我不知道怎么做。

感谢您的帮助和/或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:54:16.250

我假设它们在您的 web 服务方法及其背后的 sql 查询中没有瓶颈

因此，为了加快获取 10,000 行的过程，我的建议是让您调用具有例如 2000 行的获取记录的 web 服务，这样您将进行 5 次调用

一旦有来自 web 服务的 10,000 行将其写入您的 OWC11 电子表格

否则，如果可能返回 5 个 OWC11 电子表格，每个电子表格显示 2000 行 persheet

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T06:00:58.430

我认为在服务器中您应该创建一个线程来接收来自 Web 服务的响应，在客户端您应该使用 AJAX 在例如 5 或 10 秒后检查进程，您使用的是单线程，所以这是一个瓶颈。当您上传您的包时，您可以在 Windows Azure 门户中查看该示例。希望这有帮助。

# iphone - iPhone xcode RSA 从文件中解密

> ID：11549132
> 
> 赞同：0
> 
> 时间：2012-07-18T19:47:19.270
> 
> 标签：iphone, xcode, file, encryption, rsa

使用苹果内置的安全框架和通用加密库，我不想随机生成 RSA 密钥，但我想将包含我的特殊私钥的文件硬编码到以下函数中：

在这里找到了下面的代码，但我想修改它以完成上述操作：[Iphone - 如何使用公钥加密 NSData 并使用私钥解密？](https://stackoverflow.com/questions/10072124/iphone-how-to-encrypt-nsdata-with-private-key-and-decrypt-with-public-key/10072378#10072378)

```
- (void)decryptWithPrivateKey:(uint8_t *)cipherBuffer plainBuffer:(uint8_t *)plainBuffer 
{ 
    OSStatus status = noErr; 

size_t cipherBufferSize = strlen((char *)cipherBuffer); 

NSLog(@"decryptWithPrivateKey: length of buffer: %lu", BUFFER_SIZE); 
NSLog(@"decryptWithPrivateKey: length of input: %lu", cipherBufferSize); 

// DECRYPTION 
size_t plainBufferSize = BUFFER_SIZE; 

//  Error handling 
status = SecKeyDecrypt([self getPrivateKeyRef], 
                       PADDING, 
                       &cipherBuffer[0], 
                       cipherBufferSize, 
                       &plainBuffer[0], 
                       &plainBufferSize 
                       ); 
NSLog(@"decryption result code: %ld (size: %lu)", status, plainBufferSize); 
NSLog(@"FINAL decrypted text: %s", plainBuffer); 

} 
```

是否可以使用此功能来做到这一点，或者我是否必须重写整个功能以适应我自己的私钥使用？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:29:01.720

我想出了如何通过输入文件路径并将文件导入项目来从文件中读取它。

# python - UnicodeEncodeError：“ascii”编解码器无法对位置 1-4 中的字符进行编码：序数不在范围内（128）

> ID：11549136
> 
> 赞同：5
> 
> 时间：2012-07-18T19:47:25.057
> 
> 标签：python, django

我看到大量与此相关的问题，但我无法找出解决方案。

这是在 Django 1.4 和 Python 2.7 上。

`data`是一个包含 UTF8 字符的字典。看到这一行：

`render_to_response('application/app.html', data, context_instance=RequestContext(request))`

模板被渲染，从那个输出值`data`。

为什么它会爆炸，我该怎么做才能解决这个问题？

**编辑**：四处挖掘后，其中一部分`data`包含`lxml.objectify.ObjectifiedElement`. 基本上是一个可以像普通字典一样查询的 XML 元素。它产生的值似乎是正确的 unicode 字符串，如下所示：`u'\xae\u2020\xa5\xa8\u02c6\xf8'`

这是完整的堆栈跟踪：

```
File "/web/mysite/env/lib/python2.7/site-packages/django/core/handlers/base.py", line 111, in get_response
  response = callback(request, *callback_args, **callback_kwargs)

File "/web/mysite/current/api/views.py", line 163, in invoice
  return render_to_response('application/app.html', data, context_instance=RequestContext(request))

File "/web/mysite/env/lib/python2.7/site-packages/django/shortcuts/__init__.py", line 20, in render_to_response
  return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/loader.py", line 176, in render_to_string
  return t.render(context_instance)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/base.py", line 140, in render
  return self._render(context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/base.py", line 134, in _render
  return self.nodelist.render(context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/base.py", line 823, in render
  bit = self.render_node(node, context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/base.py", line 837, in render_node
  return node.render(context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/loader_tags.py", line 123, in render
  return compiled_parent._render(context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/base.py", line 134, in _render
  return self.nodelist.render(context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/base.py", line 823, in render
  bit = self.render_node(node, context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/base.py", line 837, in render_node
  return node.render(context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/loader_tags.py", line 62, in render
  result = block.nodelist.render(context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/base.py", line 823, in render
  bit = self.render_node(node, context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/base.py", line 837, in render_node
  return node.render(context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/defaulttags.py", line 281, in render
  return nodelist.render(context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/base.py", line 823, in render
  bit = self.render_node(node, context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/base.py", line 837, in render_node
  return node.render(context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/base.py", line 880, in render
  return _render_value_in_context(output, context)

File "/web/mysite/env/lib/python2.7/site-packages/django/template/base.py", line 858, in _render_value_in_context
  value = force_unicode(value)

File "/web/mysite/env/lib/python2.7/site-packages/django/utils/encoding.py", line 74, in force_unicode
  s = unicode(str(s), encoding, errors)

UnicodeEncodeError: 'ascii' codec can't encode characters in position 1-4: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T19:59:54.290

它不应*包含*UTF-8 字符；它应该包含[`unicode`](http://farmdev.com/talks/unicode/)s。

```
{'foo': u'bar'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T15:55:41.627

lxml.objectify.ObjectifiedElement 中的值并不是真正的 unicode。您可以在 ObjectifiedElement 对象周围使用以下包装器：

```
from lxml.objectify import ObjectifiedElement, StringElement

class LxmlUnicodeWrapper(object):
    """Avoids UnicodeEncodeError when using ObjectifiedElement in templates."""
    def __init__(self, xml):
        self.xml = xml

    def __getattribute__(self, name):
        item = getattr(object.__getattribute__(self, "xml"), name)
        if type(item) == ObjectifiedElement:
            return LxmlUnicodeWrapper(item)
        elif type(item) == StringElement:
            return unicode(item)
        else:
            return item 
```

然后

```
def some_view(request):
    return render_to_response(
        "some_template.html",
        {
            "xml_data": LxmlUnicodeWrapper(your_xml_object)
        },
    ) 
```

# php - mysql Prepared语句，db中既没有错误也没有数据

> ID：11549137
> 
> 赞同：0
> 
> 时间：2012-07-18T19:47:24.860
> 
> 标签：php, mysql, prepared-statement

我正在尝试使用准备好的语句设置我的数据库处理，但我有点卡住了。我没有收到任何错误消息，并且数据没有放入数据库中。我有点担心这只是一个愚蠢的错误，但如果你能帮助我，我将不胜感激。

我正在使用 php 和 mysql 数据库。

您可以在下面看到创建人的功能。getConnection() 将打开到变量 $link 的数据库连接，如果没有发生错误，则返回 true。

```
public function createUser($userName, $password)
{
    if($this->getConnection() === true) {
        $stmt = mysqli_prepare($this->link, 'INSERT INTO users (Username, Login, Password) VALUES (?, ?, ?)');
        mysqli_stmt_bind_param($stmt, 'sss', $userName, $userName, $password);
        mysqli_stmt_execute($stmt);
        mysqli_stmt_close($stmt);
    }
    $this->link->close();   
} 
```

如果你有什么想法，我会很高兴。我愿意接受建议。

提前致谢

/Pyracell

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T01:25:42.090

如果 MySQL 查询失败，MySQLi 不会总是抛出错误，所以如果事情不工作，你必须在每一步检查哪里出了问题。为此[`mysqli_error()`](http://www.php.net/manual/en/mysqli.error.php)，[`mysqli_stmt_error()`](http://www.php.net/manual/en/mysqli-stmt.error.php)是你的朋友。

作为错误检查的一个矫枉过正的例子（出于调试目的，一旦工作正常，它就可以缩减），例如：

```
public function createUser($userName, $password)
{
    if($this->getConnection() === true) {
        $stmt = mysqli_prepare($this->link, 'INSERT INTO users (Username, Login, Password) VALUES (?, ?, ?)');
        if ($stmt != FALSE) {
            $bind = mysqli_stmt_bind_param($stmt, 'sss', $userName, $userName, $password);
            if ($bind == FALSE) {
                echo 'Bind failed: '.mysqli_stmt_error($stmt);              
            } else {
                $exec = mysqli_stmt_execute($stmt);
                if ($exec == FALSE) {
                    echo 'Execute failed: '.mysqli_stmt_error($stmt);
                }
            }
            mysqli_stmt_close($stmt);
        } else {
            echo 'Prepare failed: '.mysqli_error($this->link);
        }
    } else {
        echo 'Failed connecting to database: '.mysqli_connect_error();
    }
    $this->link->close();   
} 
```

# c# - 将 .XLSX 输出到响应时出现 EPPlus 错误

> ID：11549139
> 
> 赞同：16
> 
> 时间：2012-07-18T19:47:27.247
> 
> 标签：c#, asp.net, excel, epplus

我在这里使用 EPPlus 创建一些 .XLSX 文件时遇到了一个奇怪的问题。我正在创建一个包，然后将其输出到响应中。

我创建了一个包，如下所示：

```
var file = new FileInfo(@"C:\Test.xlsx");
ExcelPackage package = new ExcelPackage(file);
//...code to output data...//
package.Save(); 
```

这会将文件正确保存到我的本地 C: 驱动器，当我打开它时效果很好。没有错误或任何东西，格式正确等。

但是，我现在希望将此文件输出到响应流，因此我修改了必须如下所示的代码：

```
ExcelPackage package = new ExcelPackage();
//...code to output data...//
MemoryStream result = new MemoryStream();
package.SaveAs(result);
context.Response.Clear();
context.Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";                                                       
context.Response.AddHeader("Content-Disposition", "attachment;filename=MissionDetails.xlsx");
result.WriteTo(context.Response.OutputStream);
context.Response.End(); 
```

但是当我运行此代码时，我在尝试打开 Excel 文件时收到以下提示：

> Excel 在 filename.xlsx 中发现不可读的内容。是否要恢复此工作簿的内容？如果您信任此工作簿的来源，请单击是

单击是，然后显示以下提示：

> 无法使用 Microsoft Excel 打开此文件。是否要在 Microsoft Office Online 网站上搜索可以打开文件的转换器？

我选择`No`此处，然后它会打开 Excel 文件并显示此错误：

> Excel 完成了文件级别的验证和修复。本工作簿的某些部分可能已被修复或丢弃。

*但是*文件然后加载正常，并且似乎格式化正确和一切。但是每次我尝试打开文件时，它都会给出相同的提示和错误消息。

> **注意：**输出数据的代码对于这些场景中的任何一个都不会改变。

有没有人见过这样的事情？或者知道什么会导致*仅*在输出到响应时才错误地保存文件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-19T15:29:47.823

我找到了解决这个问题的方法！正如预期的那样，它确实与响应有关，因为我能够在本地保存文件时打开文件，但不能通过响应。

这里的问题是我的代码被包装在一个**try..catch**块中，在该块中记录和显示了异常。

我注意到，当您调用**Response.End()**时，会引发**System.Threading.ThreadAbortException**。当这被提出时，似乎错误的输出被附加到我的文件的末尾。

当我摆脱该特定异常的错误日志记录时，它工作得很好！

请参阅这篇文章了解更多信息[http://epplus.codeplex.com/discussions/223843?ProjectName=epplus](http://epplus.codeplex.com/discussions/223843?ProjectName=epplus)

```
//...output code...//
catch(Exception ex){
    if (!(ex is System.Threading.ThreadAbortException))
    {
        //Log other errors here
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-21T19:48:07.943

谢谢joob，您的链接解决了我调用“GetAsByteArray（）”的问题。制作如下所列以及您提供的链接，我认为不会附加异常。通过一些majic。

你得票了！

```
mrxrsd
Editor

Aug 17, 2010 at 12:30 PM

Call response.clear before send stream back to client.

                    Response.Clear();
                     Response.AddHeader("content-disposition", "attachment;  filename=file.xlsx");
                     Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";                   
                     Response.BinaryWrite(pck.GetAsByteArray());
                     Response.End(); 
```

[http://epplus.codeplex.com/discussions/223843?ProjectName=epplus](http://epplus.codeplex.com/discussions/223843?ProjectName=epplus)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:19:32.597

代替`WriteTo`方法，试试这个：

```
context.Response.BinaryWrite(package.GetAsByteArray()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T09:12:19.977

**当按钮单击导出到 Excel 时的 page.aspx.cs 代码**

```
string templateFileName = Server.MapPath("~/ReportingTemplate/test.xlsx");
                System.IO.FileInfo templateFile = new System.IO.FileInfo(templateFileName);

                String message = ExcelPackagePlusLibrary.EPPlus.ExportToExcel(templateFile, dt, false, exportFileName, Response, "Data", "Summary", "Please type the client name here");
                if (String.IsNullOrEmpty(message) == false)
                {
                    /* Exception occur. */
                }
                dt.Clear();
///////////////////////////////////////////////////////////////////////////////////////

    /// <summary>
            /// ExportToExcel is a method used for Export To Excel with template file.
            ///
            /// </summary>
            /// <param name="templateFile">The fully qualified name of the new file, or the relative file name. Do not end the path with the directory separator character.</param>
            /// <param name="dt">Datatable for export.</param>
            /// <param name="printHeaders">Datatable's header used or not, when Export it. </param>
            /// <param name="exportFileName">provide fileName only not path. </param>
            /// <param name="Response">System.Web.HttpResponse. </param>
            /// <param name="sheetNames">arg[0] means provide sheet name where you want to load data. \n (Optional Parameter) arg[1] means provide sheet name where you want to edit. (Optional Parameter) arg[2] means if your intention is to Edit sheet so provide searchText.</param>
            /// 
            public static string ExportToExcel(FileInfo templateFile, DataTable dt, bool printHeaders, string exportFileName, System.Web.HttpResponse Response, params String[] sheetNames)
            {
                try
                {
                    using (ExcelPackage p = new ExcelPackage(templateFile, false))
                    {
                        EPPlus.AddSheetWithTemplate(p, dt, sheetNames[0], printHeaders);

                        String[] clientName = exportFileName.Split(new char[] { '_' }, 2);

                        if (sheetNames.Count() > 2)
                        {
                            ExcelPackagePlusLibrary.EPPlus.EditSheet(p, sheetNames[1], sheetNames[2], clientName[0] ?? exportFileName);
                        }

                        Byte[] fileBytes = p.GetAsByteArray(); //Read the Excel file in a byte array

                        //Clear the response
                        Response.ClearHeaders();
                        Response.ClearContent();
                        Response.Clear();

                        //Response.Cookies.Clear();

                        //Add the header & other information
                        //Response.Cache.SetCacheability(System.Web.HttpCacheability.Private);
                        //Response.CacheControl = "private";
                        //Response.Charset = System.Text.UTF8Encoding.UTF8.WebName;
                        //Response.ContentEncoding = System.Text.UTF8Encoding.UTF8;
                        //Response.AppendHeader("Content-Length", fileBytes.Length.ToString());
                        //Response.AppendHeader("Pragma", "cache");
                        //Response.AppendHeader("Expires", "60");
                        Response.AddHeader("Content-Disposition",
                        "attachment; " +
                        "filename=" + exportFileName + "; " +
                        "size=" + fileBytes.Length.ToString() + "; " +
                        "creation-date=" + DateTime.Now.ToString("R").Replace(",", "") + "; " +
                        "modification-date=" + DateTime.Now.ToString("R").Replace(",", "") + "; " +
                        "read-date=" + DateTime.Now.ToString("R").Replace(",", ""));

                        //Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
                        Response.ContentType = "application/x-msexcel";

                        //Write it back to the client
                        Response.BinaryWrite(fileBytes);
                        Response.Flush();
                        Response.Close();

                        /* Download to Client Side. */
                        //DirectoryInfo dir = new DirectoryInfo(Server.MapPath("~/Testing/Downloaded/" + DateTime.Now.ToString("MM-dd-yyyy")));
                        //if (!dir.Exists)
                        //{
                        //    dir.Create();
                        //}
                        //File.WriteAllBytes(dir.FullName + "\\" + fileName, fileBytes);

                        return String.Empty;
                    }
                }
                catch (Exception ex)
                {
                    _ErrorMessage = ex.Message.ToString();
                    return _ErrorMessage;
                }
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-21T05:02:25.750

我无法让 EPPlus 从 IE 打开，它保存得很好并且打开时没有错误。（铬在保存和打开时都可以正常工作）。这里的建议对我不起作用——可能是因为我使用的是 aspx 文件，而不是最终对我有用的 ashx 文件。

经过数小时的搜索后，我最终根据[此 stackoverflow 帖子](https://stackoverflow.com/questions/2519026/how-do-you-stream-an-excel-2007-or-word-2007-file-using-asp-net-and-c-sharp)使用了 ashx 文件，并且我现在可以在所有浏览器中使用它，而不会使用 EPPlus 发出警告/损坏的文件消息。

**可以帮助他人的其他资源：**

*   [http://epplus.codeplex.com/discussions/223843?ProjectName=epplus](http://epplus.codeplex.com/discussions/223843?ProjectName=epplus)
*   [将 .XLSX 输出到响应时出现 EPPlus 错误](https://stackoverflow.com/questions/11549139/epplus-error-when-outputting-xlsx-to-response)

我希望这可以节省其他人一些时间。

# ios - 使用 Cocoa-Touch 播放从 Documents 目录下载的视频

> ID：11549143
> 
> 赞同：5
> 
> 时间：2012-07-18T19:47:46.027
> 
> 标签：ios, cocoa-touch, mpmovieplayercontroller, nsdocumentdirectory

我正在尝试让我的应用播放已下载到文档目录的视频文件。我知道文件正在下载，但我似乎无法播放文件，这是我的代码：

```
-(IBAction)play{

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"%@/piggy.m4v"];

NSURL *movieURL = [NSURL fileURLWithPath:path];

_player = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
[self.view addSubview:_player.view];

_player.controlStyle = MPMovieControlStyleDefault;
_player.shouldAutoplay = YES;

[_player setFullscreen:YES animated:YES];

[_player play];

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T13:25:36.877

这看起来像是某种错误，但您必须像这样设置路径：

```
 NSString *vidPath = [[NSBundle mainBundle] pathForResource:@"promo" ofType:@"mp4"];
 NSURL *url = [NSURL fileURLWithPath:vidPath isDirectory:NO]; //THIS IS THE KEY TO GET THIS RUN :) 
 [introPlayer setContentURL:url]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:54:10.040

问题将出在这一行：`NSString *path = [documentsDirectory stringByAppendingPathComponent:@"%@/piggy.m4v"];`

将其更改为`NSString *path = [documentsDirectory stringByAppendingPathComponent:@"piggy.m4v"];`

# asp.net - ASP.NET 项目：重新编译后自动更新 DLL 上的引用

> ID：11549147
> 
> 赞同：0
> 
> 时间：2012-07-18T19:48:10.490
> 
> 标签：asp.net

我的 ASP.NET 项目引用了另一个项目的 DLL。

每次重新编译 DLL 时，我都必须执行“更新参考”。没什么大不了的，但这能以某种方式自动化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:50:00.437

您可以将两个项目添加到同一个解决方案中，并创建项目引用而不是 DLL 引用。然后，当您重新编译站点时，如果 DLL 项目发生更改，它将自动重新编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:50:20.147

“另一个项目”实际上是另一个解决方案吗？如果它们在同一个解决方案中，如果您添加了对项目的引用而不是 .dll 文件，它应该会自动工作。

# list - 在 SSRS 中，一个参数是否可以有 2 个值？- 从 SharePoint 中提取，因此我无法编辑存储过程以使用“in”

> ID：11549150
> 
> 赞同：0
> 
> 时间：2012-07-18T19:48:16.870
> 
> 标签：list, sharepoint, reporting-services

我有一个 SSRS 报告，它从 SharePoint 列表中提取信息。一切都很好，直到 SharePoint 列表的结构发生更改。更具体地说，我们将特定列设置为下拉列表，现在它已更改为复选框。SSRS 报告有一个基于此特定值的参数，现在是一个复选框。

基础查询返回的一些值在文本值之前和之后都有**;#**，尽管不是全部。我们可以运行 SSRS 报告，选择 All 作为参数，一切都正确返回。但是，如果我们选择特定名称，则仅返回未格式化为复选框的行。

编辑报告参数时，是否可以有 1 个标签，但有 2 个值？例如“价值”和“;#value;#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:23:49.333

我发现如果我过滤数据集，我可以替换从数据库中提取的值。 `Replace(valueFromDatabase, ";#", "")`.

这与对一个参数使用 2 个值相反...

# sql - 用于分层包含/排除的 MDX 查询

> ID：11549151
> 
> 赞同：1
> 
> 时间：2012-07-18T19:48:19.943
> 
> 标签：sql, ssas, mdx

我正在尝试制作一个 MDX 查询来回答以下形式的问题：

显示 2008 年的所有记录，除了 11 月的记录，除非它们发生在 11 月 17 日。

查询必须概括为使用三个以上的子句，并且不应该是特定日期的。（我要求使用日期作为示例，因为它很容易理解 - 我有兴趣将我的 MDX 推广到不同的层次结构。

这是迄今为止我得到的最接近的：

```
SELECT 
NON EMPTY {     [Measures].[Session Count] } ON COLUMNS, 
NON EMPTY {     ([SessionIDs].[Session ID].Children) } ON ROWS 
FROM (
      SELECT 
            Union(
                  Descendants([Start Date].[Date].Year.[2008], , LEAVES), 
                  Descendants([Start Date].[Date].[Date].&[20081117], , LEAVES)
            )
            -
            Descendants([Start Date].[Date].[Month].&[2008]&[11], , LEAVES)
             ON COLUMNS
      FROM [ADM]  
) ; 
```

问题是次要包含（2008 年 11 月 17 日）被排除消除了。我尝试在第一个联合中维护重复项，但是排除（减号运算符）会消除所有匹配的成员副本。

编辑：

这是另一个示例，可帮助您理解我要求“可概括”解决方案时的意思。

考虑一个地图应用程序，用户可以在其中选择查看他们选择的地理区域中的数据。他们通过放大和缩小地图以及选择/取消选择四键来选择这些[区域](http://msdn.microsoft.com/en-us/library/bb259689.aspx)。Quadkeys 巧妙地映射到一个层次结构，该层次结构通常在 18 到 23 层之间。

一个有效的用例将是：

*   选择QK0
*   取消选择 QK002
*   选择QK0021230
*   取消选择 QK002123033201 和 QK002123033202

用文字（并完全虚构映射到这些四键的地名），这将类似于：显示北美的所有数据，但不显示美国的数据，除非该数据是针对纽约州的，而不是在奥尔巴尼或格伦斯瀑布。

因此，上面适用于日期的相同查询结构必须适用于映射或任何其他分层集。还值得注意的是，我正在动态构建此 MDX 以响应用户操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:29:26.723

在[子选择](http://msdn.microsoft.com/en-us/library/ff487138.aspx)中，您只需将其放在列上：

```
{Except([Start Date].[Date].Month.Members, {[Start Date].[Date].[Month].&[2008]&[11]}), [Start Date].[Date].[Date].&[20081117]} 
```

我假设你有一个月的水平。表达式的第一部分将返回除 2008 年 11 月之外的所有月份，然后添加 2008 年 11 月 17 日。

编辑：

对于您的第二个示例，您可以编写如下内容：

```
Except(all the cities in north america, 
        Except(all the cities in USA, 
                Except(all the cities in New York state,
                        {Albany , Glens Falls}))) 
```

`Descendants`您可以使用功能和`LEAVES`标志检索北美、美国和纽约州的城市。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:47:14.427

不确定“使用不只是三个子句......任何层次结构”是什么意思，但这是您要求的集合：

```
select 

  Hierarchize (
    Union(
      Except(     
        Descendants( [Start Date].[Date].[Year].[2008]       , [Start Date].[Date].[Month], SELF ),
        Descendants( [Start Date].[Date].[Month].&[2008]&[11], [Start Date].[Date].[Month], SELF )    
      ),
      [Start Date].[Date].[Date].&[20081117]
    )
  )

  on 0 from [ADM] 
```

# javascript - eventListner 在另一个文本框获得焦点时添加一个文本框（vanilla js）

> ID：11549152
> 
> 赞同：0
> 
> 时间：2012-07-18T19:48:33.890
> 
> 标签：javascript, focus, addeventlistener

我正在尝试将 eventListner 添加到所有文本框中。当一个盒子获得焦点时 - 应该创建一个新盒子。

如果你能帮我调试这段代码，我将不胜感激，因为它不起作用......

```
var inputs = document.querySelectorAll("input[type=text]");
for (var i=0; i<inputs.length; i++) {
    inputs[i].addEventListener("focus",addTextBox,true);
}

function addTextBox(){  
    var newInput = document.createElement("input");
    newInput.setAttribute("type","text");
    this.appendChild(newInput);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:22:51.953

我也这么认为，您的代码可以正常工作 - 如果您检查 DOM，您会看到新的输入字段已创建并作为子项附加到原始输入字段。但正如我之前的演讲者所提到的，您不能将输入字段设置为输入字段的子字段。你真正想要达到什么目的？

# extjs - Ext JS 授权浏览器离线缓存

> ID：11549154
> 
> 赞同：0
> 
> 时间：2012-07-18T19:48:36.553
> 
> 标签：extjs

我们正在开发一款 SaaS 模型和浏览器离线缓存大部分时间的产品。

并且喜欢使用Ext Js。我们是否需要为所有用户购买多个许可证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:03:28.703

Sencha 使用 Developer 许可模型，您可以部署尽可能多的用户和许多应用程序。

购买许可证只需要多少开发者使用 ExtJS。

# shell - 提取 .tar 文件不起作用

> ID：11549162
> 
> 赞同：10
> 
> 时间：2012-07-18T19:49:09.443
> 
> 标签：shell, maven, extract, tar

提前感谢您的所有帮助！作为初学者，我非常感谢您的帮助！

* * *

**我的机器/操作系统：** Mac OSX 10.5.8，32 位

* * *

**我正在尝试做的事情：从**[网站](http://maven.apache.org/download.html)中 提取并安装 Apache Maven 。

* * *

**我所做** 的：从网站下载二进制*.tar.gz*文件，并使用 shell，将下载的文件移动到适当的目录，然后使用 .tar.gz 将 .tar 从 .tar.gz 中提取出来*，*得到*一个*`gunzip -v filename.tar.gz`.tar文件*。 tar*文件。现在我正在尝试使用 .tar 文件提取*.tar*文件`tar -xv filename.tar`。

* * *

**我的问题** 提取似乎不起作用！在我输入`tar -xv filename.tar`命令并按回车后，shell 没有返回任何输出，并且似乎没有完成提取。它无限期地停留在按回车后返回的空行。

* * *

**我的尝试** 从另一个 Shell 窗口检查目录，无论`tar`是在运行时还是在进程运行时退出 shell 后，都不会显示包含的文件中的任何更改；即存在的唯一文件/目录是原始的*.tar.gz*文件。我还尝试删除该文件以及包含它的目录，重新创建目录，将文件重新复制到目录中，然后重新尝试该`tar -xv filename.tar`命令。结果是一样的

* * *

谢谢大家！谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-18T19:55:20.320

尝试以下命令：

```
tar -xzvf filename.tar.gz 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-21T00:25:28.977

`sudo tar -xvf filename.tar`

这解决了上面的两个问题`tar -xv filename.tar`。

第 1 期：需要为*tar包含**-f*修饰符。根据 [lowfatlinux][2]，- *f*是*tar*的命令，它说：

 ***“存档文件名在命令行上给出（每当 tar 输出到文件时都需要）”

因此，包含*-f*修饰符会告诉*tar*程序参数中提供的文件名是要从中提取的文件。

第二个问题：需要将*sudo*附加到命令的开头，以授予 shell 创建目录的权限

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-19T07:45:32.997

尝试以下命令：

```
gunzip -c filename.tar.gz | tar xopf - 
```

尝试 gunzip 后，在该文件上使用 tar xopf

```
tar xopf filename.tar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T20:02:21.827

您的下载很可能已损坏，请注意网站上的内容：

> 注意以下链接将为您列出各种可用的镜像。不要直接使用这些链接。

这个镜像在 Debian 上对我有用：

> wget [http://www.us.apache.org/dist/maven/binaries/apache-maven-3.0.4-bin.tar.gz](http://www.us.apache.org/dist/maven/binaries/apache-maven-3.0.4-bin.tar.gz)
> tar -xvzf apache-maven-3.0.4-bin.tar.gz***

# c# - 在 Bing 地图 WPF 上居中和缩放

> ID：11549166
> 
> 赞同：4
> 
> 时间：2012-07-18T19:49:21.830
> 
> 标签：c#, wpf, bing-maps

我创建了一个 Bing Maps WPF 对话框，并希望以编程方式设置中心和缩放级别。我试过使用`SetValue()`，但我没有找到合适的属性来传递给它。

这是我的 Bing 地图对话框的 XAML：

```
<Window 
        x:Class="RAPMkI.BingMapsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:m="clr-namespace:Microsoft.Maps.MapControl.WPF;assembly=Microsoft.Maps.MapControl.WPF"
        Title="BingMapsDialog" Height="378" Width="467">
    <Grid>
        <m:Map CredentialsProvider="Haha, nice try."/>
        <Button Content="Locate" Margin="0,0,0,0" Name="button1" HorizontalAlignment="Right" Width="Auto" Height="Auto" VerticalAlignment="Top" />
    </Grid>
</Window> 
```

代码隐藏如下所示：

```
namespace RAPMkI
{
    /// <summary>
    /// Interaction logic for BingMapsDialog.xaml
    /// </summary>
    public partial class BingMapsDialog : Window
    {
        public BingMapsDialog(Location center, int zoom)
        {
            InitializeComponent();
        }
    }
} 
```

有没有办法在初始化时设置我的对话框的中心和缩放级别，使用`Location`我通过它的和缩放？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-03T22:21:09.690

我意识到这是一个较老的问题，但接受的答案不再正确，如果曾经是的话，所以我希望这对其他人有帮助。

`Center`属性不是方法，因此尝试设置它是行不通的。我也在墙上撞了一会儿，然后一直在非洲西海岸（纬度：0，经度：0）结束。

你正在寻找的是`SetView(Location location, Double Zoom)`

这是参考：
[https ://msdn.microsoft.com/en-us/library/hh709343.aspx](https://msdn.microsoft.com/en-us/library/hh709343.aspx)

重写上面的例子：

```
public BingMapsDialog(Location center, double zoom)
{
    InitializeComponent();
    theMap.SetView(center, zoom);
} 
```

应该是所有需要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T01:01:07.470

您首先需要为您的地图命名，以便您可以通过编程方式访问它。例如：

```
<m:Map Name="theMap" CredentialsProvider="Haha, nice try."/> 
```

然后在您希望更改的位置设置`Center`和属性。`ZoomLevel`例如：

```
public BingMapsDialog(Location center, int zoom)
{
    InitializeComponent();
    theMap.Center = center;
    theMap.ZoomLevel = zoom;
} 
```

如果这不起作用，您可能需要在事件处理程序中设置`Center`和。`ZoomLevel``Loaded`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-11T00:20:39.317

Map 有两个可绑定的属性： ZoomLevel 和 Center 。您可以做的是将视图绑定到一个视图模型，该模型具有两个属性，分别代表 ZoomLevel 和 Center。

ZoomLevel 是双倍的，因此可以通过添加一个滑块来做一件好事，该滑块的值也绑定到 viewmodel 中代表缩放级别的内容。这样，您可以使用滑块更改缩放。

*请注意，您需要将绑定模式设置为“TwoWays”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-09T07:49:44.013

您可以在 XAML 文件中定义初始位置，例如：

```
<m:Map x:Name="mMap" 
               CredentialsProvider= "xxxxxxxxxx" 
               Center="40.13618,-0.45822" 
               ZoomLevel="15">
</m:Map> 
```

然后以编程方式，您可以同时设置中心和缩放级别，例如：

```
mMap.SetView(mylocation, myzoomlevel) 'mylocation -> Location, myzoomlevel -> Double 
```

或单独：

```
mMap.Center = mylocation
mMap.ZoomLevel = myzoomlevel 
```

# ruby-on-rails-3 - Rails 3.1.3 生产样式表与开发编译不一致

> ID：11549167
> 
> 赞同：1
> 
> 时间：2012-07-18T19:49:21.707
> 
> 标签：ruby-on-rails-3, stylesheet, spree

我有一个 Rails 应用程序，可以在开发中正确编译我的样式表。然而，在生产中，它没有。

我试图通过设置使我的生产配置的配置值相同

```
config.assets.compress = false

config.assets.compile = false

config.assets.digest = true

config.assets.debug = true 
```

这几乎可以做所有事情，它不会像在开发中那样显示关于 css 是从哪里编译的注释，而且我还没有弄清楚如何启用它。我的第一个问题是如何在生产环境中启用它以进行调试？

接下来 - 特别是使用 Spree 0.70.2，并且在开发中会编译来自 gem 的样式表。在生产中，它们被忽略了。这可能是什么原因？

有没有办法跟踪正在编译的内容，跟踪它的方法（运行 rake 时的跟踪不会给你太多相关信息）

谢谢

# scala - 试图了解在 REPL 上声明的类是如何在内部处理的

> ID：11549174
> 
> 赞同：3
> 
> 时间：2012-07-18T19:49:56.840
> 
> 标签：scala, read-eval-print-loop

我试图了解范围在 REPL 中的工作原理。我尝试深入遵循 Joshua Suereth 的书 Scala 的第 5.1.1 节。这是在 Windows XP、Java 7 和 Scala 2.9.1 上。`Dinner`我在 REPL 中声明了一个类。绑定`Dinner`存在于本地范围内。然后我实例化，因为它是本地绑定的。

```
scala> class Dinner {
 | val veggie="broccoli"
 | def announceDinner(veggie: String){
 | println("Dinner happens to be tasteless " + veggie + " soup")
 | }
 | }
defined class Dinner

scala> new Dinner
res1: Dinner = Dinner@27fb77 
```

到现在为止还挺好。该名称`Dinner`是本地绑定的，我们还可以构造一个 `val x`可以包含对`new Dinner`.

据我目前所知，REPL 将在内部将上述代码包装在对象中。好的，我对 Scala 的了解还不是很深，我正在尝试了解 REPL 如何在内部包装 Class。

是否有 REPL 命令可以帮助我评估这些对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T00:24:07.370

这是一个非常快速和肮脏的方式来了解 REPL 中发生的事情。

使用 scala -Xprint:typer 调用 REPL

```
scala> class Dinner {
     |   val veggie="broccoli"
     |   def announceDinner(veggie: String){
     |   println("Dinner happens to be tasteless " + veggie + " soup")
     |   }
     |  }
[[syntax trees at end of typer]]// Scala source: <console>
package $line1 {
  final object $read extends java.lang.Object with ScalaObject {
    def this(): object $line1.$read = {
      $read.super.this();
      ()
    };
    final object $iw extends java.lang.Object with ScalaObject {
      def this(): object $line1.$read.$iw = {
        $iw.super.this();
        ()
      };
      final object $iw extends java.lang.Object with ScalaObject {
        def this(): object $line1.$read.$iw.$iw = {
          $iw.super.this();
          ()
        };
        class Dinner extends java.lang.Object with ScalaObject {
          def this(): $line1.$read.$iw.$iw.Dinner = {
            Dinner.super.this();
            ()
          };
          private[this] val veggie: java.lang.String = "broccoli";
          <stable> <accessor> def veggie: java.lang.String = Dinner.this.veggie;
          def announceDinner(veggie: String): Unit = scala.this.Predef.println("Dinner happens to be tasteless ".+(veggie).+(" soup"))
        }
      }
    }
  }
}

[[syntax trees at end of typer]]// Scala source: <console>
package $line1 {
  final object $eval extends java.lang.Object with ScalaObject {
    def this(): object $line1.$eval = {
      $eval.super.this();
      ()
    };
    private[this] val $print: String = {
      $read.$iw.$iw;
      "defined class Dinner\012"
    };
    <stable> <accessor> def $print: String = $eval.this.$print
  }
}

defined class Dinner 
```

如您所见，上面的内容`Dinner`最终被包裹在`$line1.$read.$iw.$iw`. 现在让我们看看接下来会发生什么：

```
[[syntax trees at end of typer]]// Scala source: <console>
package $line2 {
  final object $read extends java.lang.Object with ScalaObject {
    def this(): object $line2.$read = {
      $read.super.this();
      ()
    };
    final object $iw extends java.lang.Object with ScalaObject {
      def this(): object $line2.$read.$iw = {
        $iw.super.this();
        ()
      };
      import $line1.$read.$iw.$iw.Dinner;
      final object $iw extends java.lang.Object with ScalaObject {
        def this(): object $line2.$read.$iw.$iw = {
          $iw.super.this();
          ()
        };
        private[this] val res0: $line1.$read.$iw.$iw.Dinner = new $line1.$read.$iw.$iw.Dinner();
        <stable> <accessor> def res0: $line1.$read.$iw.$iw.Dinner = $iw.this.res0
      }
    }
  }
}

[[syntax trees at end of typer]]// Scala source: <console>
package $line2 {
  final object $eval extends java.lang.Object with ScalaObject {
    def this(): object $line2.$eval = {
      $eval.super.this();
      ()
    };
    lazy private[this] var $result: $line1.$read.$iw.$iw.Dinner = {
      $eval.this.$print;
      $line2.$read.$iw.$iw.res0
    };
    private[this] val $print: String = {
      $read.$iw.$iw;
      "res0: $line1.$read.$iw.$iw.Dinner = ".+(scala.runtime.ScalaRunTime.replStringOf($line2.$read.$iw.$iw.res0, 1000))
    };
    <stable> <accessor> def $print: String = $eval.this.$print
  }
} 
```

基本上与以前相同，但使用`$line2`而不是`$line1`. 注意`import $line1.$read.$iw.$iw.Dinner`前面的权利`$line2.$read.$iw.$iw`。

这样我们就可以看到为什么在两个不同的行中定义伴随对象不起作用，它们最终被包装到不同的对象中，并且需要在同一个作用域/源文件中定义伴随对象。

# php - 将 POST 数据从另一个 PHP 文件发送到 PHP 文件的方法？

> ID：11549176
> 
> 赞同：1
> 
> 时间：2012-07-18T19:50:03.673
> 
> 标签：php, post

好的，所以我查看了很多问题，但我只找到了 1 个与我正在尝试做的事情相似的问题。这是它的链接：[Passing POST data from one web page to another with PHP](https://stackoverflow.com/questions/679701/passing-post-data-from-one-web-page-to-another-with-php)

我想将数据从一个 PHP 文件（我们称之为 editData.php）传递到另一个 PHP 文件（我们称之为 submitData.php）。这两个文件都没有任何 HTML 元素（我的意思是纯 PHP 代码）。第一个文件（editData.php）接收 $_POST 数据，对其进行编辑，并需要将其发送到第二个文件。第二个文件（submitData.php）需要能够使用 $_POST 读取数据。恐怕不能使用***会话或cookies 。***

在上面的链接问题中，接受的答案是在表单中创建隐藏字段并从那里发布数据。这对 OP 有效，因为他在他的“editData.php”上有用户交互，所以当用户想去“submitData.php”时，他会发布数据。

我不能使用这个解决方案（至少，我认为我不能），因为我正在从 javascript AJAX 调用访问（并将 $_POST 数据发送到）editData.php，并且此页面上不会有用户交互. 我需要通过代码或其他一些“自动”传输的方式（或“幕后”或任何你想称之为的方式）发布修改后的数据。submitData.php 将在 editData.php 之后立即调用。

我不知道我是否可以重写 submitData.php 以接受 GET 数据，所以也将其排除在外（这是能够访问文件的问题）。我真的不想将内容回显到我原来的 JavaScript 函数（然后又是 AJAX）。我正在对editData.php 中的信息进行加密，并且（虽然说起来很傻）我不想让某人轻松为我的加密开发密码。如果您问我，在加密后返回值（可使用 Inspect Element 查看）会使破译变得太容易。

我觉得这个问题可能会出现很多，所以我希望我缺少一些明显的东西。如果是这样，请告诉我。

tl;博士？**如何在仅使用另一个 PHP 文件中的代码的同时通过 POST 方法将数据发送到 PHP 文件？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T19:56:09.620

那么您可能会考虑简化您的方法并在 editData 文件的末尾包含 submitData 逻辑。但是假设由于某种原因这是不可能的（文件存在于不同的系统上，或者其他），您最好的选择可能是使用 cURL 功能将数据发布到第二个脚本。

如果文件在同一台服务器上，但我强烈建议不要将数据发布到第二个脚本，因为这基本上只会使您的 Web 服务器需要处理的与此脚本相关的请求数量翻倍。

# javascript - 在样式标签上插入变量

> ID：11549181
> 
> 赞同：2
> 
> 时间：2012-07-18T19:50:23.437
> 
> 标签：javascript, html

我需要根据下拉列表选择更改文本的颜色。

```
<select id="room2">
    <option>#0808cf</option>
    <option>#0E9E26</option>
</select>
<input type="text" id="txtColor">
   John: <p style="color:#0808cf" > test </p> 
```

jQuery

```
$('#colors').change(function(){
   $('#txtColor').val($("#colors").val());
   var fontColor =  $('#txtColor').val();

}); 
```

我不希望更改出现在 css 中，因为选择 id 不会是恒定的。我希望它被插入到 p 样式标签中。而且我还需要文本是约翰：测试在一行中。我试过这个但没有工作。谢谢你。

```
<p style="color:"+fontColor+" > test </p> 
```

演示：http: [//jsfiddle.net/kX3EN/](http://jsfiddle.net/kX3EN/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T19:53:15.397

试试 - [http://jsfiddle.net/kX3EN/7/](http://jsfiddle.net/kX3EN/7/)

```
$('#colors').change(function(){
    $('p').css( 'color', $(this).val() );
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T19:56:39.347

如果您希望您的“John: test”在同一行，您需要：

*   `p`将(block-level)更改为`span`(inline)*或*
*   强制`p`与 css ( `display: inline`) 内联。

使用 jQuery，您需要使用该`css()`函数来更改元素的样式属性。像这样：

```
$('selector for element you want to change').css('color', $("#your-select-element").val()); 
```

您可能会将其放在您的事件处理程序中`select`：

```
$("select#colors").change(function() {
    $("span.changemycolor").css('color', $(this).val());
    // 'this', in this case, is your select element
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T17:36:21.883

通过将标签放在我的 html 代码过滤器之后让它工作。因此，每次我附加一条消息时，都会将其存储为变量，并在将 var 发送到 websocket 发送方法时读取为 JS。谢谢

# android - 动态单选按钮布局不起作用

> ID：11549183
> 
> 赞同：0
> 
> 时间：2012-07-18T19:50:30.443
> 
> 标签：android, layout

我正在尝试为线性布局制作一个动态单选按钮。我有两个从列表调用并添加到线性布局的单选按钮。一切都很好，直到我看不好我的单选按钮并被这个布局卡住了。我的问题是为什么我的单选按钮布局根本不起作用？
这是我的代码：

```
TextView label;
RadioButton[] rb;
RadioGroup radiogroup;
LinearLayout ll;
String title;

public MyBtn(Context context,String labelText,String options) {
   super(context);

   ll = new LinearLayout(context);
   ll.setOrientation(LinearLayout.VERTICAL);

   LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
       LayoutParams.FILL_PARENT,
       LayoutParams.WRAP_CONTENT);

   ll.setLayoutParams(params);

   label = new TextView(context);
   label.setText(labelText);
   label.setTextColor(getResources().getColor(R.color.label_color));

   radiogroup = new RadioGroup(context);
   radiogroup.setOrientation(RadioGroup.HORIZONTAL);

   radiogroup.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

   LinearLayout.LayoutParams [] rbLayout = new RadioGroup.LayoutParams[2]; 

   LinearLayout.LayoutParams  rbParam = new RadioGroup.LayoutParams(
         RadioGroup.LayoutParams.WRAP_CONTENT, RadioGroup.LayoutParams.WRAP_CONTENT);
   rbParam.weight = 1f;
   rbParam.gravity = Gravity.CENTER | Gravity.LEFT;

   LinearLayout.LayoutParams  rbParam2 = new RadioGroup.LayoutParams(
         RadioGroup.LayoutParams.WRAP_CONTENT, RadioGroup.LayoutParams.WRAP_CONTENT);
   rbParam2.gravity = Gravity.CENTER | Gravity.RIGHT;
   rbParam2.weight = 1f;

   rbLayout[0] = new RadioGroup.LayoutParams(rbParam);                  
   rbLayout[1] = new RadioGroup.LayoutParams(rbParam2);

   List<String> list = Arrays.asList(options.split("\\|"));
   String[] opts = new String[list.size()];
   list.toArray(opts);

   rb = new RadioButton[list.size()];

   for (int i = 0; i < list.size(); i++) {
      rb[i] = new RadioButton(context);
      rb[i].setText(opts[i]);
      rb[i].setId(i);
      radiogroup.addView(rb[i],rbLayout[i]);         
   }

   title = label.getText().toString();

   radiogroup.check(0);

   ll.addView(label);
   ll.addView(radiogroup);

   //int resID = getResources().getIdentifier(buttonID, "id", context.getPackageName());  

   this.addView(ll); 
} 
```

谢谢你。

我的单选按钮：
[图片链接](http://i.stack.imgur.com/GvAGf.jpg)

它应该：
[图片链接](http://i.stack.imgur.com/UmjnM.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:55:50.647

改变这个：

```
LinearLayout.LayoutParams [] rbLayout = new RadioGroup.LayoutParams[2];
LinearLayout.LayoutParams  rbParam2 = new RadioGroup.LayoutParams(
     RadioGroup.LayoutParams.WRAP_CONTENT, RadioGroup.LayoutParams.WRAP_CONTENT); 
```

对此：

```
RadioGroup.LayoutParams [] rbLayout = new RadioGroup.LayoutParams[2];
RadioGroup.LayoutParams  rbParam2 = new RadioGroup.LayoutParams(
     RadioGroup.LayoutParams.WRAP_CONTENT, RadioGroup.LayoutParams.WRAP_CONTENT); 
```

您的代码中有许多相同的错误。找出它们并纠正让我知道结果

* * *

```
LinearLayout.LayoutParams  rbParam = new RadioGroup.LayoutParams(
     RadioGroup.LayoutParams.FILL_PARENT, RadioGroup.LayoutParams.WRAP_CONTENT,1f); 
```

那一定行得通。让我知道

# c# - 为标签抓取 HTML，然后在单独的 DIV 标记中取值

> ID：11549184
> 
> 赞同：3
> 
> 时间：2012-07-18T19:50:41.490
> 
> 标签：c#, html, html-parsing

我正在抓取产品数据库，并且能够获取所有 HTML 并检索大多数值，因为它们具有一些独特的项目。但是我被困在一些有共同标签的领域。

例子：

```
<div class="label">Name:</div><div class="value">John</div>
<div class="label">Age:</div><div class="value">24</div> 
```

关于如何获得这些标签和相关值的任何想法？

如果其中有一些可能有帮助的东西，我将使用 HTMLAgilityPack。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:34:23.530

请使用 xpath 获取以类为标签和类为值的 div

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(yourHtml);

Dictionary<string, string> dict = new Dictionary<string, string>();

//This will get all div's with class as label & class value in dictionary

int cnt = 1;
foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//div[@class='label']"))
{
    var val = doc.DocumentNode.SelectSingleNode("//div[@class='value'][" +  cnt + "]").InnerText;

    if(!dict.ContainsKey(node.InnerText))//dictionary takes unique keys only
    {
        dict.Add(node.InnerText, val);
        cnt++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:57:13.187

你可以试试这个：

```
Int32 endingIndex;
var Name1 = GetTextBetween(yourHtml, "<div class=\"label\">", "</div><div class=\"value\">", out endingIndex);
var Value1 = GetTextBetween(yourHtml.SubString(endingIndex), "<div class=\"value\">", "</div>", out endingIndex);
var Name2 = GetTextBetween(yourHtml.SubString(endingIndex), "<div class=\"label\">", "</div><div class=\"value\">", out endingIndex);
var Value2 = GetTextBetween(yourHtml.SubString(endingIndex), "<div class=\"value\">", "</div>", out endingIndex);

public static String GetTextBetween(String allDataToParse, String startText, String endText, out Int32 indexOfEndText)
{
    var indexOfStartText = allDataToParse.IndexOf(startText);
    indexOfEndText = allDataToParse.IndexOf(endText);

    return allDataToParse.Substring(indexOfStartText, indexOfEndText - indexOfStartText).Replace(startText, String.Empty) ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:33:01.553

尽管 XPath 听起来总是一个好主意，但是当您抓取数据时，您不能依赖 HTML 格式良好。许多网页会定期破坏其 HTML 以增加抓取难度。尽管 Mark 的代码看起来很笨拙，但在某些情况下它实际上更加健壮。

听起来很可悲，只有当提供者在很长一段时间内被证明是可靠的时，您才能依赖目标文档的一致性。理想情况下，我会使用正则表达式来搜索我特别想要的标签。这是一个很好的起点：

[提取标签属性的正则表达式](https://stackoverflow.com/questions/317053/regular-expression-for-extracting-tag-attributes)

不幸的是，只有您知道您正在处理的文档的确切怪癖。如果您正在查看的页面是可靠的，那么一个简单的解决方案（如 Mark 提出的解决方案）可能会奏效。坦率地说，它不太可能变得脆弱和意外崩溃。

如果您使用 HatSoft 建议的 HTML 文档解析代码，您的程序可能在大多数文档上运行良好，但根据我的经验，网站会随机抛出错误，意外更改其布局，或者有时您的网络代码只会收到部分字符串。也许这没问题，但我建议您尝试这两种方法，看看哪种方法对您更可靠。

# c# - 使用 Bing 地图的自定义可缩放图像

> ID：11549186
> 
> 赞同：2
> 
> 时间：2012-07-18T19:50:49.320
> 
> 标签：c#, wpf, api, bing-maps

我想使用 Bing 地图 WPF 控件，我想知道是否可以设置我们自己的“图像源”。基本上我想使用控件为我的应用程序加载的各种图像提供深度缩放功能。

我知道谷歌地图是可能的（如下所示：http: [//blog.mikecouturier.com/2011/07/create-zoomable-images-using-google.html#maps_code_tilesgen](http://blog.mikecouturier.com/2011/07/create-zoomable-images-using-google.html#maps_code_tilesgen)）但我想知道我们可以做类似的事情与 Bing 地图？

PS：我更喜欢使用 Bing，因为 Microsoft 提供了原生 WPF 控件，而 Google 没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T22:08:20.803

为了添加自定义地图（或图像）切片提供程序，您必须实现[TileSource](http://msdn.microsoft.com/en-us/library/hh750702)并覆盖其[GetUri](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.wpf.tilesource.geturi)方法以提供图像切片的 URI。

有关详细信息，请参阅[向地图添加瓦片叠加层](http://msdn.microsoft.com/en-us/library/hh868033)。那里的代码示例不是很好，因为他们在代码中所做的某些事情可以在 XAML 中更好地完成，但这是一个起点。

但请注意，即使您不使用 Bing Maps 内容，使用 WPF 控件也会强制您使用[Bing Maps API Key](http://msdn.microsoft.com/en-us/library/hh709042)。该控件在 Bing 地图服务提供商处验证您的密钥，这将需要 Internet 连接。因此，您的图像显示应用程序不会在离线环境中运行，或者更准确地说，它会运行但在控制区域的中心显示一条丑陋的错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T22:59:29.227

你当然可以，而且在 Bing 地图中非常容易做到。Microsoft 开发了一个名为[MapCruncher](http://research.microsoft.com/en-us/um/redmond/projects/mapcruncher/)的工具，可以将提供的图像切割成具有 Bing 地图预期结构的图块。这一点非常重要，因为尽管 Bing 地图和 Google 共享相同的图块结构，但 Bing 地图使用称为四键的东西来定义每个图块（即图块的 zxy）。

注意：也可以在 Bing 地图中加载为 Google 地图制作的图块。您只需要调整平铺源。

无论如何，比说的更好。

这是 Microsoft Research 团队关于使用 MapCruncher 的非常详细的教程：

[http://research.microsoft.com/en-us/um/redmond/projects/mapcruncher/tutorial/version3.0docs/index.htm](http://research.microsoft.com/en-us/um/redmond/projects/mapcruncher/tutorial/version3.0docs/index.htm)

# iphone - cocos2d：CCsprite setVisible 方法不起作用

> ID：11549187
> 
> 赞同：0
> 
> 时间：2012-07-18T19:50:52.720
> 
> 标签：iphone, ios, cocos2d-iphone

在一个 cocos 2d 游戏中，我使用 3 个心形精灵来更新英雄的生命。如果英雄失去了一个生命..应该隐藏一颗心。

我使用下面的代码，但它不能正常工作。请帮助我。

```
- (void)updateLives {
    int i = _lives;
    [self livess:(int)i];
}

- (void)livess:(int)ii { 

    CGSize winSize = [CCDirector sharedDirector].winSize;
    heart1=[CCSprite spriteWithFile:@"heart.png"];
    heart2=[CCSprite spriteWithFile:@"heart.png"];
    heart3=[CCSprite spriteWithFile:@"heart.png"];
    [heart1 setPosition:ccp(winSize.width/2*1.3, winSize.height * 0.9)];
    [self addChild:heart1 z:0];
    [heart2 setPosition:ccp(winSize.width/2*1.1, winSize.height * 0.9)];
    [self addChild:heart2 z:0];
    [heart3 setPosition:ccp(winSize.width/2*0.9, winSize.height * 0.9)];
    [self addChild:heart3 z:0];

    if (ii==3) {

        NSLog(@"%d",ii);
    }
    else if (ii==2)
    {
        NSLog(@"%d",ii);

        [heart3 setVisible:NO];

    } else if (ii==1)
    {

        NSLog(@"%d",ii);

        [heart3 setVisible:NO];
        [heart2 setVisible:NO];
    }
    else
    {

    }         
} 
```

注意：在上面的代码中..nslog 正在打印正确的值..例如 1,2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:05:26.690

它应该从您的代码中正确隐藏。然而，如果这个 updateLives 在游戏循环中被调用，可能你看到它没有像你预期的那样被隐藏的原因是前一帧的心脏。尝试

1) 一次创建heart1、heart2、heart3

2）在更新中，不要创建精灵。即仅当...保留您的代码的其他部分。

希望能帮助到你。

# objective-c - Apple Mach-O 链接器 (id) 错误 - 架构 i386 的未定义符号

> ID：11549188
> 
> 赞同：12
> 
> 时间：2012-07-18T19:50:52.657
> 
> 标签：objective-c, linker, ios4, asihttprequest, mach-o

我知道这种类型的错误以前曾多次提出过，但我还没有找到解决我的错误的方法。我正在使用 xcode 4.0。我下载了 ASIHTTPRequest zip 并复制了 classes 文件夹以及两个“Reachability”文件。编译后，它给了我奇怪的错误，我无法弄清楚。下面我为架构 i386 复制了未定义符号的错误文本。

```
Ld /Users/svp/Library/Developer/Xcode/DerivedData/Manual_BeforePres2-fahkeiivemkgpubswgvzglvndszw/Build/Products/Debug-iphonesimulator/Manual.app/Manual normal i386
cd "/Users/svp/Desktop/Manual nav before pres 2"
setenv MACOSX_DEPLOYMENT_TARGET 10.6
setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-gcc-4.2 -arch i386 -isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk -L/Users/svp/Library/Developer/Xcode/DerivedData/Manual_BeforePres2-fahkeiivemkgpubswgvzglvndszw/Build/Products/Debug-iphonesimulator -F/Users/svp/Library/Developer/Xcode/DerivedData/Manual_BeforePres2-fahkeiivemkgpubswgvzglvndszw/Build/Products/Debug-iphonesimulator -filelist /Users/svp/Library/Developer/Xcode/DerivedData/Manual_BeforePres2-fahkeiivemkgpubswgvzglvndszw/Build/Intermediates/Manual_BeforePres2.build/Debug-iphonesimulator/Manual.build/Objects-normal/i386/Manual.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -lz -framework SystemConfiguration -framework CFNetwork -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/svp/Library/Developer/Xcode/DerivedData/Manual_BeforePres2-fahkeiivemkgpubswgvzglvndszw/Build/Products/Debug-iphonesimulator/Manual.app/Manual

 Undefined symbols for architecture i386:
"_UTTypeCreatePreferredIdentifierForTag", referenced from:
  +[ASIHTTPRequest mimeTypeForFileAtPath:] in ASIHTTPRequest.o
"_UTTypeCopyPreferredTagWithClass", referenced from:
  +[ASIHTTPRequest mimeTypeForFileAtPath:] in ASIHTTPRequest.o
"_kUTTagClassFilenameExtension", referenced from:
  +[ASIHTTPRequest mimeTypeForFileAtPath:] in ASIHTTPRequest.o
"_kUTTagClassMIMEType", referenced from:
  +[ASIHTTPRequest mimeTypeForFileAtPath:] in ASIHTTPRequest.o
ld: symbol(s) not found for architecture i386

collect2: ld returned 1 exit status 
```

它还在**ASIAuthenticationDialog.m**文件中给我一个警告：

```
ASIAuthenticationDialog may not respond to _presentingViewController 
```

请任何人告诉我这些错误和警告是什么？我究竟做错了什么？我为此浪费了很多时间:(

**编辑：**

文件中的警告代码`ASIAuthenticationDialog.m`：

```
#import "ASIAuthenticationDialog.h"
#import "ASIHTTPRequest.h"

#pragma mark show / dismiss

+ (void)dismiss
{
if ([sharedDialog respondsToSelector:@selector(presentingViewController)])
    [[sharedDialog presentingViewController] dismissModalViewControllerAnimated:YES];
else 
    [[sharedDialog parentViewController] dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-18T20:58:45.213

如果您要在文档中查找缺少的符号，您会发现它们与它们所在的框架一起列出。例如，`UTTypeCreatePreferredIdentifierForTag`说它位于 MobileCoreServices.framework 中。（其他的也可能在那里；我没有寻找所有这些。）将必要的框架添加到目标构建阶段的链接库步骤中，并且应该解析符号。

至于警告，请显示它发生的代码。

# android - 即使更改了 targetSDK，阻止 xlargescreens 也不起作用

> ID：11549190
> 
> 赞同：0
> 
> 时间：2012-07-18T19:51:10.583
> 
> 标签：android, android-market-filtering

我正在为手机开发一个应用程序。我想阻止 xlargeScreens，但这仅适用于 SDK 9 级或更高级别，我正在为 7 级开发。我尝试用这个解决这个问题：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="9"/>
<supports-screens android:xlargeScreens="false"/> 
```

但我仍然得到相同的错误，它没有找到资源。我怎样才能解决这个问题？（我已经阅读了所有类似的问题，但没有运气。请不要发送链接。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:16:29.447

> 我想阻止 xlargeScreens

你不能，使用`<supports-screens>`. 您只能阻止`-xlarge`使用`<compatible-screens>`.

# objective-c - 我如何表达“如果对象与'此数组中的任何对象'相交则......”

> ID：11549192
> 
> 赞同：0
> 
> 时间：2012-07-18T19:51:19.400
> 
> 标签：objective-c, cocoa, nsmutablearray

在学习 Xcode 和 Objective-C 的同时尝试开发一个简单的游戏。

我试图让一个从屏幕顶部落下的物体降落在平台上。有多个平台都是 UIImageViews。

我想为对象可以登陆的平台使用一个数组，而不是为每个平台输入 if 语句。我环顾了其他人的问题，并根据他们的想法尝试了想法。到目前为止，这是我的游戏循环中的内容：

```
CGRect platformFrame = [(UIView *)[platformArray objectAtIndex:i] frame];
if (CGRectIntersectsRect(object.frame, platformFrame)) {
    objectVelocity.y += gravity.y;
    objectVelocity.x = 0;
} 
```

这就是我在“viewDidLoad”中将对象添加到数组中的内容：

```
platformArray = [[NSMutableArray alloc] init];
[platformArray addObject:platform1];  
[platformArray addObject:platform2];
[platformArray addObject:platform3]; 
```

目前这会返回一个错误：“线程 1：程序接收到的信号：“SIGARBT”。”

我读过这是使用 NSMutableArray 的结果。

由于错误，目前我无法判断我的代码是否有效。所以我想知道是否有更好的方法，或者解决 SIGARBT 错误的方法。

任何帮助将不胜感激。

**更新：**感谢您的快速回复！希望这会奏效，但不幸的是我仍然收到 SIGARBT 错误，所以我看不到结果。

至于有关此错误的更多详细信息，它会在我尝试运行该应用程序时出现，尽管在此之前它声明“没有问题”。

错误出现在 main.m 中：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

错误出现在以“return”开头的行上

我读到使用 NSMutableArray 会导致这种情况。

“从 NSUserDefaults 返回的值是不可变的，即使您将可变对象设置为值。”

所以我不确定如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:00:08.923

If you want to do that check with every object in your `platformArray` array, you can just use the code you have now inside a `for` loop with some minor modification:

```
for(UIView * platform in platformArray) {
    if(CGRectIntersectsRect(object.frame, platform.frame)) {
        // Collision
        objectVelocity.y += gravity.y;
        objectVelocity.x = 0;
        break;
    }
} 
```

If you can be more specific about the `SIGABRT` you receive (are there any other messages?), we can be more helpful.

# c - 正确的 C 预处理器宏无操作

> ID：11549193
> 
> 赞同：11
> 
> 时间：2012-07-18T19:51:26.133
> 
> 标签：c, macros, c-preprocessor

对于调试日志，我经常看到并使用类似的东西

```
#ifdef DEBUG
    #define DLOG(fmt, args...) printf("%s:%d "fmt,__FILE__,__LINE__,args)
#else
    #define DLOG(fmt, args...)
#endif 
```

但在很多地方，我看到第二个`#define`被替换为

```
#define DLOG(fmt, args...) do {} while (0) 
```

特别是，有[这个答案](https://stackoverflow.com/a/1306690/291280)，并且对同一问题的[另一个答案](https://stackoverflow.com/a/1306683/291280)的评论表明问题将出现在类似的情况下

```
if (condition)
    DLOG("foo"); 
```

尽管我的快速测试表明，在该行上生成的分号本身将用作条件内的无操作语句。

是*一无所有*还是`do {} while (0)`更好？如果是这样，为什么？还有什么更好的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T19:57:19.260

分号本身有两个缺点：

*   您的宏的用户可以不用分号来编写它，编译器不会抱怨，并且
*   一些编译器可能会发出关于可能杂散分号的警告。

该`do {} while (0)`技巧解决了这两个问题：

```
DLOG("foo") // No semicolon 
```

将触发错误，编译器不会警告您有关“杂散”分号的信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T19:56:28.980

请参阅[用于调试打印的 C#define 宏，以](https://stackoverflow.com/questions/1644868/c-define-macro-for-debug-printing/1644898#1644898)了解为什么需要不同形式的无操作。即使您不使用它，您也希望编译器解析调试打印代码，这样错误就不会蔓延。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:55:46.227

`if`快速的答案是 do/while 方法可以让您进行多语句替换，并且在您遇到的问题中仍将其用作单个语句。对于单个表达式替换，我认为没有任何区别。

# performance - 涉及外键的 WHERE 子句的某些值很慢

> ID：11549198
> 
> 赞同：1
> 
> 时间：2012-07-18T19:51:46.293
> 
> 标签：performance, sql-server-2008, indexing, foreign-keys, rebuild

此查询有效：

```
SELECT [ID]
  ,[PROJECT_ID]
  ,[NAME]
  ,[LOCATION]
  ,[COMMENT]
FROM table1
WHERE PROJECT_ID = 4479 
```

但是这个没有：

```
SELECT [ID]
  ,[PROJECT_ID]
  ,[NAME]
  ,[LOCATION]
  ,[COMMENT]
FROM table1
WHERE PROJECT_ID = 3560 
```

它无限地旋转和旋转。唯一的区别是使用的值。

“PROJECT_ID”是一个外键，并且有一个用它定义的索引作为唯一的列（通常使用 FK）。

并行：此表的 FK 索引上存在高碎片。

这些是否可能相关，即，如果我重建索引，我应该期望问题会得到解决吗？

我现在无法重建它们，因为它是一个生产系统，我的理解是我只能在可以获得锁时重建索引......比如今晚晚些时候。

任何关于如何“强制重建数据库中所有表中的所有索引，即使它断开用户连接”的任何指导也值得赞赏。

谢谢， - 杰西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:53:29.427

这些查询是否封装在存储过程中？如果是这样，您可能会受到参数嗅探的影响。

您还可以检查您的统计数据；如果它们非常过时，您可能会得到一个非常糟糕的执行计划，其中包含某些参数而不是其他参数。

# mysql - Mysql删除存储的转义字符

> ID：11549204
> 
> 赞同：0
> 
> 时间：2012-07-18T19:52:45.027
> 
> 标签：mysql, mysql-real-escape-string

由于先前开发人员的编码错误，我发现我们有一个 mysql 表，其中包含一些具有额外转义字符的数据。

```
update mytable SET title = TRIM(TRAILING '\' FROM title) 
```

我已经尝试过上述方法，但它显然会引发错误，并且我尝试过'\\'。如何让 mysql 自行处理反斜杠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:56:01.563

尝试以下操作：

```
update mytable SET title = TRIM(TRAILING '\\' FROM title) 
```

# visual-studio-2010 - Oracle 表字段和实体框架之间的转换失败

> ID：11549207
> 
> 赞同：1
> 
> 时间：2012-07-18T19:53:05.407
> 
> 标签：visual-studio-2010, wcf, entity-framework-4, casting, oracle11g

在 WCF Web 服务中，我对 ORACLE 11g 数据库进行查询，并使用实体框架作为模型。目标字段是 Numeric 类型，而在实体框架中是 Int64。

当我尝试更新该字段时，出现以下异常：**从具体化的“System.Decimal”类型到“System.Int64”类型的指定转换无效。** 产生错误的方法如下，特别是 else 语句中的行：**result = _context.ExecuteStoreQuery(query).FirstOrDefault();**

```
public string GetDatabaseTimestamp(Type timestampFieldType, string query)
{
    object result;

    if (timestampFieldType == typeof(string))
    {
        result = _context.ExecuteStoreQuery<string>(query).FirstOrDefault();
    }
    else
    {
        result = _context.ExecuteStoreQuery<long>(query).FirstOrDefault();
    }

    return result.ToString();
} 
```

是否可以在 EF 级别定义转换器或类似的东西？更改数据库的选项不可行，因此我必须编辑代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:41:36.650

在 EF 中，我已经将类型更改为十进制。问题是查询是直接在 Oracle 数据库上执行的，这会产生异常。

我通过使用目标实体的属性解决了这个问题，并将方法更改为：

```
public string GetDatabaseTimestamp(Type timestampFieldType, string query) 
{ 
 object result; 

if (timestampFieldType == typeof(string)) 
{ 
  result = _context.ExecuteStoreQuery<string>(query).FirstOrDefault(); 
} 
else if (timestampFieldType == typeof(decimal)) 
{ 
  result = _context.ExecuteStoreQuery<decimal>(query).FirstOrDefault(); 
} 
else 
{  
  result = _context.ExecuteStoreQuery<long>(query).FirstOrDefault(); 
} 

return result.ToString(); 
} 
```

这样，传递的 timestampFieldType 是十进制类型，并且选择了正确的强制转换。此问题是由于 Oracle DB（遗留数据库）中的类似字段（例如更新字段）使用了不同的数据类型。

# objective-c - NSParagraphStyle hypenationFactor 不起作用

> ID：11549210
> 
> 赞同：1
> 
> 时间：2012-07-18T19:53:09.037
> 
> 标签：objective-c, ios, nsattributedstring

我正在尝试完全证明并允许在 NSAttributedString 中使用连字符。现在我使用代码设置段落样式：

```
NSMutableParagraphStyle *paragraph = [[NSMutableParagraphStyle alloc] init];
paragraph.alignment = NSTextAlignmentJustified;
paragraph.hyphenationFactor = 0.5;
paragraph.lineBreakMode = NSLineBreakByWordWrapping; 
```

这不会连字符，它只是根据单词的适合程度来拆分单词。我也尝试过 NSLineBreakByCharWrapping ，结果更糟。有任何想法吗？我正在使用 iOS 6 库。

谢谢，皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T14:19:13.173

最近发现了这个：

库中有一个错误，即 0.0 和 1.0 之间的任何值都不起作用。话虽如此，值 0.0 和 1.0 确实有效。因此，要获得断字，从 iOS6 开始将断字因子设置为 1.0。

# instance - 一台主机上可以同时运行多少个 Vertica 数据库？

> ID：11549211
> 
> 赞同：3
> 
> 时间：2012-07-18T19:53:11.370
> 
> 标签：instance, database-schema, vertica

我知道在 Oracle 中我可以在同一主机上运行多个家庭？
这可以在 Vertica 中完成吗？
我正在运行 Vertica 的 CE 版本，看来我不能这样做！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:11:06.613

它们不允许单个 vertica 实例中的多个数据库处于活动状态；有意义的是，他们不允许多个 vertica 实例，从而导致多个数据库同时处于活动状态。

编辑：我说这是有道理的原因：Vertica 可能是资源密集型的。它旨在处理大量数据。让多个“Verticas”争夺磁盘、cpu、带宽将对所有它们的性能产生负面影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T23:43:39.580

还要记住，Vertica 是一个与 Oracle 不同的分布式数据库。因此，您在每个集群节点中都有一个实例，并且集群可以访问更大的磁盘存储。如果各种应用程序的数据保持在单个集群中，则最好使用分布式数据库，因为每个实例都占用大量 CPU 用于数据压缩、读/写优化存储和提供性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T18:39:13.737

您不能在 Vertica 集群中运行多个数据库。也就是说，您可以在单个数据库中运行的模式数量没有设定限制。考虑到单个 Vertica 集群（带有一个数据库）可以处理多少用户和多少数据，我需要一个非常有说服力的理由说明为什么需要多个数据库。这就像抱怨一个房子没有三个厨房，早餐午餐和晚餐各一个。

# php - 有没有办法使用 php/zend 从共享站点下载文件？

> ID：11549215
> 
> 赞同：1
> 
> 时间：2012-07-18T19:53:22.140
> 
> 标签：php, zend-framework

> **可能重复：**
> [Linux 上的无头、可编写脚本的 Firefox/Webkit？](https://stackoverflow.com/questions/2073481/headless-scriptable-firefox-webkit-on-linux)

我整个下午都在研究一种从共享站点下载文件的方法，比如

*   媒体火，
*   4共享，
*   等等

我想不出办法，即使对于那些没有验证码确认的人也是如此。

> 关键字：验证码

是否有任何链接可以找到更多信息，如果有人可以帮助我。

> 现在我失败了：mediafire

现在，当我尝试从 mediafire 页面获取下载链接时遇到错误，因为在链接显示之前，有如下文字：“授权下载”，并且在页面加载后不久，链接被刷新，当我尝试使用 DOMDocument 获取链接时，我做不到。

对不起，如果我说的太多，我只是想简要介绍一下我的问题，以避免无用的讨论。这是我现在使用的 curl 代码：

```
function download($url) {
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt');
    curl_setopt($ch, CURLOPT_COOKIEFILE, 'cookie.txt');
    curl_setopt($ch, CURLOPT_MAXREDIRS, 10);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
    curl_setopt($ch, CURLOPT_TIMEOUT, 20000);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.8.1.9) Gecko/20071025 Firefox/2.0.0.9');
    return curl_exec($ch);
} 
```

编辑 1：如果您想知道为什么我用 Zend 标签标记了这篇文章，那是因为我正在使用 zend 框架，实际上我现在正在研究`Zend_Http_Client`......看看它是否可以解决我的问题。

# xml - 调试布局 xml 文件 - 文件未加载到系统中

> ID：11549220
> 
> 赞同：1
> 
> 时间：2012-07-18T19:53:59.443
> 
> 标签：xml, magento

我无法将我的布局 xml 文件加载到系统中。我需要在 adminhtml 中为我正在构建的模块加载它，所以这是配置中重要的部分：

```
<adminhtml>
<layout>
    <updates>
        <coupsmart_coupon>
            <file>coupsmart_coupon.xml</file>
        </coupsmart_coupon>
    </updates>
</layout>
</adminhtml> 
```

现在，名为 coupsmart_coupon.xml 的实际布局文件如下：

```
<layout>
    <coupsmart_coupon_adminhtml_coup_index>
        <update handle="coupsmart_coupon"/>
        <reference name="content">
            <block type="coupsmart_coupon/adminhtml_forms" name="myform"/>
        </reference>
    </coupsmart_coupon_adminhtml_coup_index>
</layout> 
```

现在，为了调试它，我在布局 xml 文件中添加了一个错误，例如省略了右括号 (>)，并且没有任何异常。因此，我检查了`$this->getLayout()->getUpdate()->getHandles()`控制器中使用的句柄，然后`coupsmart_coupon_adminhtml_coup_index`作为其中一个句柄返回，这正是我在布局 xml 文件中命名的句柄。为什么这不会加载？

注意：我已清除缓存并再次尝试。还是行不通。我也有登录和异常，所以我的日志中应该显示异常。如果需要任何其他代码，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:46:39.793

想通了，因为`adminhtml.xml`没有添加到 DOM，并且 xml 文件实际上位于`etc/adminhtml.xml`而不是`config.xml`. 当我将布局更新移动到配置时，它看起来如下：

```
<config>
    <adminhtml>
        <layout>
            <updates>
                <coupsmart_coupon>
                    <file>coupsmart_coupon.xml</file>
                </coupsmart_coupon>
            </updates>
        </layout>
    </adminhtml>
</config> 
```

现在它可以工作了。感谢大家的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:05:53.733

你的 config.xml 是：`<config><adminhtml>...</adminhtml></config>`对吗？

我们在谈论 Magento 1.7？您是否尝试将 layout.xml 放入

`design/frontend/base/default/layout`?

您确定您的 config.xml 已被读取吗？

我知道，不好的问题，但是：您是否真的清除了正确 magento 实例的缓存？:-)

config.xml 似乎是正确的，所以我认为错误是之前的。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T03:22:49.047

仅供参考，该文件*可能*应该在 app/design/default/layout/ 中，请确认或告知是否有自定义 adminhtml 设计包。

此外，您可能需要在 index.php 中调用 Mage::setIsDeveloperMode(true)，这可以通过添加来完成

```
SetEnv MAGE_IS_DEVELOPER_MODE 
```

到您的 .htaccess 文件（请参阅 index.php 以评估此内容）。破坏您的布局 XML，刷新缓存后端，您应该会看到一个错误。

# c# - 在单击 RadioButton 时使 DropdownList 可见

> ID：11549222
> 
> 赞同：1
> 
> 时间：2012-07-18T19:54:13.840
> 
> 标签：c#, asp.net

当我执行 a`radiobuttonclick`时，我想将 a 设置`dropdownlist`为可见。`radiobutton`和`dropdownlist`都在同一个范围内`datagrid`。我不知道该怎么做。

```
<asp:UpdatePanel ID="updatepanel" UpdateMode="conditional" runat="server">
    <ContentTemplate>
        <asp:DataGrid ID="DataGrid" AutoGenerateColumns = "false" CssClass="objectSubTitle" ItemStyle-Wrap="true" runat="server" OnItemCommand="handler" ><Columns>
            <asp:TemplateColumn>
                <ItemTemplate>
                   <asp:RadioButton ID ="RadioButton1" Text="Yes" GroupName="creatingNewCard" OnCheckedChanged="RadioButtonYes" AutoPostBack="True" runat="server" />
                  <asp:DropDownList ID="DropDownList1"  Visible="false" runat="server"/>
                </ItemTemplate>
            </asp:TemplateColumn> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:04:55.673

假设它们在`ItemTemplate`a 中`TemplateField`，并且您想在服务器端切换生存能力：

```
protected void RbCheckedChanged(Object sender, EventArgs e)
{
    var radioButton1 = (RadioButton)sender;
    var row = (GridViewRow)radioButton1.NamingContainer;
    var dropDownList1 = (DropDownList)row.FindControl("DropDownList1");
    dropDownList1.Visible = radioButton1.Checked;
} 
```

示例网格视图：

```
<asp:GridView ID="GridView1" AutoGenerateColumns="false" OnRowDataBound="Grid_RowDataBound"
    runat="server">
    <Columns>
    <asp:TemplateField>
        <ItemTemplate>
            <asp:DropDownList ID="DropDownList1" runat="server"></asp:DropDownList>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField>
        <ItemTemplate>
            <asp:RadioButton  ID="RadioButton1" runat="server" OnCheckedChanged="RbCheckedChanged" AutoPostBack="true"></asp:RadioButton>
        </ItemTemplate>
    </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

**编辑**：当您编辑问题以表明您确实使用 a`DataGrid`而不是 a`GridView`时，代码类似：

```
protected void RbCheckedChanged(Object sender, EventArgs e)
{
    var radioButton1 = (RadioButton)sender;
    var item = (DataGridItem)radioButton1.NamingContainer;
    var dropDownList1 = (DropDownList)item.FindControl("DropDownList1");
    dropDownList1.Visible = radioButton1.Checked;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:20:55.273

您可以像这样在单选按钮检查更改事件中调用 DropdwonList 的 Visible 属性

```
protected void RadioButton1_CheckedChanged(Object sender, EventArgs e)
{
    var radioButton1= (RadioButton)sender;
    var item = (DataGridItem)radioButton1.NamingContainer;
    var dropDownList1 = (DropDownList)item.FindControl("DropDownList1");

    dropDownList1.Visible = radioButton1.Checked ? true : false;
} 
```

# ruby-on-rails-3 - 动作邮件程序 Rails 3

> ID：11549223
> 
> 赞同：0
> 
> 时间：2012-07-18T19:54:15.467
> 
> 标签：ruby-on-rails-3, actionmailer

我在我的网站上添加了一个联系表格，但遇到了一个问题，当我发送消息时，我收到了我的 Flash 消息，“成功发送”，但是电子邮件从未到达我的收件箱。我目前处于开发模式，我的应用程序/配置文件看起来像这样

```
 class Application < Rails::Application

   ActionMailer::Base.delivery_method = :smtp
   ActionMailer::Base.perform_deliveries = true
   ActionMailer::Base.raise_delivery_errors = true
   config.action_mailer.smtp_settings = {
    :address => "smtp.gmail.com",
    :port    => 587,
    :domain  => "gmail.com",
    :user_name  => "myemail@gmail.com",
    :password   => "example",
    :authentication => :plain,
    :enable_starttls_auto => true
      }

     config.action_mailer.default_url_options = {
     :host => "gmail.com"
      } 
```

我的联系人控制器是这样的

```
 def new
       @message = Message.new
      end

     def create
     @message = Message.new(params[:message])
      if @message.valid?
      NotificationsMailer.new_message(@message).deliver
      redirect_to(root_path, :notice => "Message was successfully sent.")
     else
     flash.now.alert = "Please fill all fields."
     render :new
     end
    end 

     end 
```

最后是我的通知邮件程序

```
 class NotificationsMailer < ActionMailer::Base
      default :from => "myemail@gmail.com"
      default :to => "myemail@gmail.com"

     def new_message(message)
     @message = message
     if message.file
      attachment_name = message.file.original_filename
      attachments[attachment_name] = message.file.read
     end
     mail(:subject => "[myemail@gmail.com] #{message.subject}")
    end
     end 
```

我是否在这里遗漏了任何明显的东西，因为我已经在另一个运行良好的站点中实现了这个，只是无法弄清楚发生了什么

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:01:06.753

I know you set it in your app/config.rb, but I would ensure `config.action_mailer.perform_deliveries` isn't being overridden in your config/environments/development.rb

# jquery - 使用jquery中断并停止div滚动

> ID：11549226
> 
> 赞同：0
> 
> 时间：2012-07-18T19:54:26.417
> 
> 标签：jquery, html, scroll

在我的网络应用程序中，我为 webkit 浏览器启用了 div 的惯性滚动。问题是，当我单击执行 jquery 函数的按钮时，如果 div 当前仍在滚动，则该函数在完全停止之前不会运行。有没有办法在当前位置中断和停止 div 滚动，就像 div 滚动然后用户触摸屏幕时一样？我假设有，但找不到有关如何执行此操作的确切代码示例。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:08:33.957

问题解决了。浏览器似乎会忽略点击功能，直到 div 停止滚动，所以如果您使用“jQuery tap”或 jquery mobile（或任何其他启用点击功能的插件）并使用“.tap”而不是“.click”它可以工作美好的。它不会阻止 div 滚动，但无论如何它都会运行该函数。

# regex - 用单个 Regex.Replace() 替换多个字符串 Replace()

> ID：11549232
> 
> 赞同：2
> 
> 时间：2012-07-18T19:54:53.030
> 
> 标签：regex, c#-4.0

如果我正在做这样的事情：

```
someString.Replace("abc","").Replace("def","").Replace(@"c:\Windows","") 
```

我该如何替换它

```
Regex.Replace(someString," \\here I don't know what the pattern should be") 
```

我试过这个：

```
Regex.Replace(someString, @"(?:abc|def|c:\Windows)") 
```

但它没有用

更新...

问题是当我通过这样的路径时

```
Regex.Replace(someString, @"(?:abc|def|"+aPath+")") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T20:04:45.357

```
`But it didnt work` doesn't say much helpfull! 
```

试试这个：

```
someString = Regex.Replace(someString, @"(?:abc|def|ghi|c:\\Windows)", "") 
```

当我尝试它时它确实有效。我认为您的代码不起作用的原因是因为您忘记了替换字符串，并且您必须转义路径中的反斜杠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T20:12:58.617

我假设“不起作用”的东西是您的 C:\windows 替代品。你需要

```
someString = Regex.Replace(someString, @"(?:abc|def|C:\\windows)",""); 
```

问题是您需要转义反斜杠。未转义的反斜杠在正则表达式中有意义。特别是，在这种情况下，\W 实际上匹配任何非字母数字字符。

**编辑**以转义任意字符串，您可以使用`Regex.Escape(yourString);`

# c# - 设置文件夹的图标

> ID：11549233
> 
> 赞同：0
> 
> 时间：2012-07-18T19:54:57.480
> 
> 标签：c#, icons, directory

基本上我想做的是让一个文件夹从我的电脑上消失（而不是简单地隐藏它）。但是我找不到一种正常的方式（少于 100 行）来将任何图标分配给任何文件夹。有办法吗？

PS：我可以提取空白图标并将其复制到我的安装文件夹中，这不是问题=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:47:57.620

为了详细说明我的评论，我认为渲染空白图标实际上不会帮助您使文件夹“消失”。

即使您编写了一个[外壳图标处理程序](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144122.aspx)，它为您的文件夹返回一个空白图标，它也不会阻止与该文件夹进行交互。它仍然可以在资源管理器中选择，并且它的名称将可见。当然，命令行界面将完全忽略该图标。

如果您想对最终用户隐藏该文件夹，您应该给它适当的权限，或者简单地将其标记为在文件系统中隐藏。在这两种情况下，这意味着接受高级用户和系统管理员可以看到它。

# joomla - JQuery Accordion 破坏了其他页面锚功能

> ID：11549234
> 
> 赞同：0
> 
> 时间：2012-07-18T19:55:05.870
> 
> 标签：joomla, anchor, jquery-ui-accordion

不幸的是，我在 localhost 上使用 Joomla，无法提供网页链接。

我有一个网页，它通过使用平滑滚动来导航到锚链接。

菜单固定在左侧，使用简单

```
<a href="#wrapper">top</a>
<a href="#section1">section1</a>
<a href="#section2">section2</a>
<a href="#section3">section3</a> 
```

当我将任何 jQuery 手风琴扩展激活到任何部分时，就会出现我的问题。（我已经下载并尝试了所有）

如果我将手风琴放在第 1 节中，则除第 2 节和第 3 节之外的所有页面跳转都不起作用。

如果我将手风琴放在第 2 节中，第 3 节的页面锚将不起作用。

我尝试删除 return false；无济于事：

```
jQuery(document).ready( function () {
//Set default open/close settings
    jQuery('.xac-container').hide(); //Hide/close all containers
    jQuery('.xac-trigger:first').addClass('active').next().show(); //Add "active" class to first trigger, then show/open the immediate next container

    //On Click
    jQuery('.xac-trigger').click(function(){
        if( jQuery(this).next().is(':hidden') ) { //If immediate next container is closed...
            jQuery('.xac-trigger').removeClass('active').next().slideUp(); //Remove all "active" state and slide up the immediate next container
            jQuery(this).toggleClass('active').next().slideDown(); //Add "active" state to clicked trigger and slide down the immediate next container
        }
        else{
            jQuery('.xac-trigger').removeClass('active');
            jQuery(this).next().slideUp();
        }
      //  return false; //Prevent the browser jump to the link anchor
    });

}); 
```

我看到了一些 CSS 教程来制作手风琴，但它为每个被点击的手风琴项目创建页面跳转，并且不必要地添加到浏览器历史记录中。

我希望我说得足够清楚。这似乎是一个普遍的问题，但我漫长的搜索没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:30:01.313

洛德评论的正确答案。

我已经加载了多个 jQuery 库。

小心复制粘贴随机代码。

# batch-file - 批量嵌套 IF ( IF ( ... ) ELSE( .. ) ) 语句

> ID：11549235
> 
> 赞同：20
> 
> 时间：2012-07-18T19:55:07.693
> 
> 标签：batch-file

我正在尝试编写一个`IF ELSE`嵌套在另一个语句中的`IF`语句。这是我所拥有的：

```
IF %dirdive%==1 ( 
    IF DEFINED log (
        ECHO %DATE%, %TIME% >> %log%
        FOR /R %root1% %%G IN (.) DO (
            SET _G=%%G
            CALL :TESTEVERYTHING !_G:~0,-1! %root1% %root2% %log%
        )
        GOTO :end
    ) ELSE ( 
        ECHO %DATE%, %TIME%
        FOR /R %root1% %%G IN (.) DO (
            SET _G=%%G
            CALL :TESTEVERYTHINGnolog !_G:~0,-1! %root1% %root2%
        )
        GOTO :end
    )
) 
```

当`log`未定义时，我得到：

```
The syntax of the command is incorrect.
ECHO Wed 07/18/2012, 15:50:12.34 >> 
```

Aaaand 我不知所措。我试过玩括号。我已将最后一个 ) 移到与之前的同一行上，但它不起作用。问题是，它在*定义**时工作正常* 。它似乎在 或 at 之后立即中断，因为它不会在之后立即插入 echo 命令。`log` *`IF %dirdive%==1`*

 ** * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-18T20:41:31.597

您的问题的根源是，即使 IF 语句的分支没有执行，它仍然必须具有有效的语法。

`log`未定义时，则为以下行

```
ECHO %DATE%, %TIME% >> %log% 
```

`log`未定义时扩展为以下

```
ECHO someDate, someTime >> 
```

重定向后没有文件名，导致语法错误。

只要您的`log`变量尚未使用封闭引号定义（当它被定义时），那么只需按如下方式更改该行即可修复它：

```
ECHO %DATE%, %TIME% >> "%log%" 
```

当`log`未定义时，该行扩展为以下内容

```
ECHO someDate, someTime >> "" 
```

这是有效的语法。如果执行，它将失败并出现“系统找不到指定的路径”错误，但它不会执行，因为日志未定义:-)

**编辑**

也许更好的解决方案是定义一个新变量，当且仅当定义时，该变量在值中包含重定向运算符`log`。然后你甚至不需要你的大 IF 语句，代码更容易维护。

```
SET "redirect="
IF DEFINED log SET "redirect=>>!log!"
IF %dirdive%==1 (
  ECHO %DATE%, %TIME% %redirect%
  FOR /R %root1% %%G IN (.) DO (
    SET _G=%%G
    CALL :TESTEVERYTHING !_G:~0,-1! %root1% %root2% %log%
  )
  GOTO :end
) 
```

请注意，`%redirect%`在 ECHO 语句中必须使用正常扩展。延迟扩展`!redirect!`将不起作用，因为命令解析器的重定向阶段发生在延迟扩展之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T18:19:44.993

另一种解决方案是使用 GOTO。也许不是那么优雅，但很容易理解。

```
IF %dirdive%==1 ( 
    IF DEFINED log GOTO logdefined ELSE GOTO nolog
)

:logdefined
ECHO %DATE%, %TIME% >> %log%
FOR /R %root1% %%G IN (.) DO (
    SET _G=%%G
    CALL :TESTEVERYTHING !_G:~0,-1! %root1% %root2% %log%
)
GOTO :end

:nolog
ECHO %DATE%, %TIME%
FOR /R %root1% %%G IN (.) DO (
    SET _G=%%G
    CALL :TESTEVERYTHINGnolog !_G:~0,-1! %root1% %root2%
)
GOTO :end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:04:26.113

更改`IF DEFINED log`为：`IF EXIST log`。以下对我有用：

```
echo off
set log=log.txt
set /p dirdive= Enter a directory:
IF %dirdive%==1 ( 
    IF EXIST %log% (
        ECHO "in IF" %DATE%, %TIME% >> %log%
        FOR /R %root1% %%G IN (.) DO (
            SET _G=%%G
            CALL :TESTEVERYTHING !_G:~0,-1! %root1% %root2% %log%
        )
        GOTO :end
    ) ELSE ( 
        ECHO "in ELSE" %DATE%, %TIME%
        FOR /R %root1% %%G IN (.) DO (
            SET _G=%%G
            CALL :TESTEVERYTHINGnolog !_G:~0,-1! %root1% %root2%
        )
        GOTO :end
    )
)
:end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-20T21:09:41.817

```
****@SETLOCAL ENABLEEXTENSIONS ENABLEDELAYEDEXPANSION****
IF %dirdive%==1 ( 
    IF DEFINED log (
        ECHO %DATE%, %TIME% >> ****!log!****
        FOR /R %root1% %%G IN (.) DO (
            SET _G=%%G
            CALL :TESTEVERYTHING !_G:~0,-1! %root1% %root2% ****!log!****
        )
        GOTO :end
    ) ELSE ( 
        ECHO %DATE%, %TIME%
        FOR /R %root1% %%G IN (.) DO (
            SET _G=%%G
            CALL :TESTEVERYTHINGnolog !_G:~0,-1! %root1% %root2%
        )
        GOTO :end
    )
)
****@ENDLOCAL**** 
```

若昂·麦克-考密克

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-12-26T01:47:45.300

```
@if not "%1" == "max" (start /MAX cmd /Q /C %0 max&X)ELSE title %random%&set C=1&set D=2&wmic process where name="cmd.exe" CALL setpriority "REALTIME">NUL&CLS
:Y
color %D%&ECHO %random%%C%%random%%random%%random%%random%6%random%9%random%%random%%random%%random%%random%%random%%random%%random%%random%
IF %C% EQU 46 (TIMEOUT /T 1 /NOBREAK>nul&set C=1&CLS&IF %D% EQU 9 (set D=1)ELSE set /A D=%D%+1)ELSE set /A C=%C%+1
goto Y 
```

`*

# javascript - 客户端脚本生成无效的 HTML 来验证

> ID：11549242
> 
> 赞同：0
> 
> 时间：2012-07-18T19:55:45.730
> 
> 标签：javascript, html, validation, client-side

我注意到使用 JavaScript 我可以生成带有不匹配标签的 HTML，这些标签仍然通过[w3 验证器](http://validator.w3.org/check)。例如

```
<script type="text/javascript>
document.write("<h4>This is large text<h2></h4> This is small text")
</script> 
```

未嵌套`</h4>`且未关闭`<h2>`，但文档仍以 HTML 5（或其他）的形式传递。这可能是关于浏览器兼容性的问题吗？为什么没有检测到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:56:56.560

w3 验证器不执行 Javascript，也不应该执行。它只检查您明确提供给它的代码。

# css - 无法让表格在中间垂直对齐

> ID：11549251
> 
> 赞同：1
> 
> 时间：2012-07-18T19:56:22.923
> 
> 标签：css

我有以下代码，我的表格（表格包含图像旁边的两个文本行）只是不想在 div 的中间垂直对齐。该怎么办？请注意，我为我的两个文本行使用了一个表格（层粘连蛋白美感并且完美地放在一起），因为它们具有不同的样式并且我希望它们是合理的，所以我将 align= center 放在他们的 td 标签上......（仅证明文本属性当文本在同一个标​​签中时工作......）。我的网站： http: [//lamininbeauty.co.za/index2.html](http://lamininbeauty.co.za/index2.html)

HTML：

```
 <div id="header">
            <img class="massage" src="images/massage.png" border="none" alt="face massage" />
            <div class="headerDiv">
                <table margin="0" padding="0">
                <tr><td align="center" class="headerText1">Laminin Beauty</td></tr>
                <tr><td align="center" class="headerText2">"Perfectly put together"</td></tr>
                </table>
            </div>
        </div> 
```

CSS：

```
#header{
    width: 100%;
    height: 100px;
    background: #000000;
}

#header img{
    margin-left: 50px;
    vertical-align: middle;
    display: inline-block;
    float: left;
}

#header div.headerDiv{
    display: table-cell;
    margin-left: 80px;
    vertical-align: middle;
}

.headerText1{
    color: #fff;
    font-family: impact;
    font-size: 32px;
    text-decoration: underline;
}

.headerText2{
    color: #ee00ee;
    font-family: century gothic;
    font-size: 24px;
} 
```

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:10:29.840

使包含表格的 div 具有 100px 的固定高度，因为这是 Wrapper div 的高度。然后，将桌子的高度设为 100%。这是它为我所做的截图，不完全确定这是否是你想要的：[http ://screencast.com/t/cbwcBbAoM3cZ](http://screencast.com/t/cbwcBbAoM3cZ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:07:13.477

如果主标题 div 始终为 100px 高，请从元素中删除该`display`属性并添加.`headerDiv``margin-top: 12px;`

此外，它应该`display: inline-block`添加并且可能会减少左边距以进行补偿。显示属性更改将使它推开图像，而不是文档的左侧，因为它应该。

此外，如果您希望这两条文本在左侧对齐，请添加`text-align: left`到 table 标记。

# python - 测量 200 个同时用户的数据传输率

> ID：11549253
> 
> 赞同：2
> 
> 时间：2012-07-18T19:56:27.447
> 
> 标签：python, linux, networking, performance-testing

我有 linux (Ubuntu) 机器作为客户端。我想测量 200 个用户同时尝试从我的服务器下载文件时的数据传输率。

有没有一些python或linux工具可以做到这一点？或者你能推荐一种方法吗？

我看到了[这个 speedcheck 代码](https://stackoverflow.com/questions/9163408/python-speedtest-net-or-equivalent)，我可以将它包装在线程中，但我不明白为什么那里的代码如此“复杂”并且块大小一直在变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:56:21.110

我最近使用[Mult-Mechanize来运行一些性能测试。](http://testutils.org/multi-mechanize/)这相当容易并且工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:41:21.233

不确定您是否在谈论实际的专用服务器。对于交通图等，我更喜欢使用[Munin](http://munin-monitoring.org/)。这是一个非常完整的监控应用程序，它使用 rrdtool 为您构建漂亮的图表。示例链接在 munin 网站上：[完整设置](http://munin.ping.uio.no/)、[eth0 流量图](http://munin.ping.uio.no/ping.uio.no/bimbo.ping.uio.no/if_eth0.html)。

新的[munin 2](http://demo.munin-monitoring.org/munin-monitoring.org/demo.munin-monitoring.org/index.html#network)更加华丽，但我还没有使用它，因为它不在我的存储库中，而且我不喜欢弄乱 perl 应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T23:05:51.800

也许来自 apache 的“ab”？

```
ab -n 1000 -c 200 [http[s]://]hostname[:port]/path
-n Number of requests to perform
-c Number of multiple requests to make at a time 
```

它有很多选项，[http://httpd.apache.org/docs/2.2/programs/ab.html](http://httpd.apache.org/docs/2.2/programs/ab.html) 或 man ab

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T08:35:42.153

```
import threading
import time
import urllib2

block_sz = 8192
num_threads = 1
url = "http://192.168.1.1/bigfile2"
secDownload = 30

class DownloadFileThread(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)

        self.u = urllib2.urlopen(url)
        self.file_size_dl = 0

    def run(self):
        while True:
            buffer = self.u.read(block_sz)
            if not buffer:
                raise 'There is nothing to read. You should have bigger file or smaller time'

            self.file_size_dl += len(buffer)

if __name__ == "__main__":
    print 'Download from url ' + url + ' use in ' + str(num_threads)  + ' to download. test time ' + str(secDownload)  
        threads = []
        for i in range(num_threads):
            downloadThread = DownloadFileThread()
            downloadThread.daemon = True
            threads.append(downloadThread)
        for i in range(num_threads):
            threads[i].start()
        time.sleep(secDownload)

        sumBytes=0
        for i in range(num_threads):
            sumBytes = sumBytes +  threads[i].file_size_dl
        print sumBytes
        print str(sumBytes/(secDownload *1000000)) + 'MBps' 
```

# javascript - 如何使用 Ajax 在 Lightbox 中提交 Drupal 表单

> ID：11549254
> 
> 赞同：1
> 
> 时间：2012-07-18T19:56:27.493
> 
> 标签：javascript, jquery, ajax, drupal-7, lightbox

我有一个已成功加载到灯箱中的表单。灯箱出现时没有任何 css 或 javascript。日期弹出窗口等模块在灯箱中不起作用。

我添加到提交按钮的 ajax 处理程序在灯箱中也不起作用。相反，表单会正常提交，将用户从他们的初始页面带到我为灯箱分配的 URL ( $items['entry/lightbox'] )。表单验证也无法仅保留在灯箱内。我可能需要调查一个 javascript 解决方案。

但是，如果在灯箱外调用表单，则 ajax 处理程序可以在提交按钮上正常工作。我感觉所有这些问题都联系在一起，因为 js/css 没有被加载到灯箱中。

我的问题：Ajax 提交按钮无法在灯箱中执行并阻止用户离开页面。

我的问题：假设缺少的 JS（添加 CSS）与问题相关，我如何在灯箱中加载表单所需的 JS 和 CSS？

我的目标：从他们的主页（例如工作/####/home），使用户能够打开表单、插入值、验证和提交值到灯箱内的数据库，而无需离开他们的页面。

理想情况下，在不关闭的情况下，我希望 drupal 消息（例如表单验证错误）出现在灯箱中，让用户有机会使用输入的值更正错误。我更喜欢 php 验证，但我仍然对 jQuery 持开放态度。

我的代码：

```
$items['work/%/home'] = array(
    'title' => 'Admin Home',
    'page callback' => 'fsa_work_page',//Callback not shown below
    'page arguments' => array(0),
    'access callback' => TRUE,
    'type' => MENU_CALLBACK,
);
$items['entry/lightbox'] = array( 
    'title' => 'Lightbox Overlay',
    'page callback' => 'fsa_lightbox',
    'page arguments' => array(0),
    'access callback' => TRUE,
    'type' => MENU_CALLBACK,
);
function fsa_lightbox(){
    $output = '';       
    $output .= drupal_render(drupal_get_form('fsa_daycare_roster_form'));
    print $output;
}
function fsa_daycare_roster_form(/*args*/){
$form['wrapper'] = array(
    '#markup' => '<div id="fsa_daycare_roster_form">Wrapper Div</div>'
);//I read this could somehow be used to capture drupal msg within the lightbox?
$form['fname'] = array(
    '#type' => 'textfield',
    '#title' => t('First Name'),
    '#prefix' => '<div id="form-left">'
);
$form['dob'] = array(
    '#type' => 'date_popup',
    '#title' => t('Date of Birth'),
    '#date_format' => $format,
    '#date_label_position' => 'none',
    '#date_year_range' => '-25:+0',
    '#required' => TRUE,
    '#suffix' => '</div>',
);
$form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Save Entry'),
    '#ajax' => array(
        'callback' => 'fsa_daycare_roster_form_submit',
        'wrapper' => 'fsa_daycare_roster_form',
        'method' => 'replace',
        'effect' => 'fade',
  ),
);
return $form;

function fsa_daycare_roster_form_validate($form_id, &$form_data){
    $fname = $form_data['values']['fname'];

    if(!is_string($fname) || empty($fname)){
    form_set_error('fname', t("Please Enter a valid First Name"));  
    }
        /*more*/
}
}//end form func

function fsa_daycare_roster_form_submit($form_id, &$form_data){
     $insertDaycare = db_insert($dcc_table)
    ->fields(array(
        'child_fname' => $form_data['values']['fname'],
        'dob' => $form_data['values']['child_dob'],
          /*more*/
    ))
    ->execute();
} 
```

任何智慧之言和示例代码将不胜感激。如果根据您的经验，您认为我的方法有些无效或效率低下，请告诉我并提供替代方案。我会欢迎它。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T21:09:32.780

我建议使用对话框 API 而不是灯箱，假设灯箱您的意思是“模态”。

这是我朋友罗杰[的一篇好文章](http://zroger.com/2009/12/ajax-modal-windows.html)

例如，查看[示例模块](http://drupal.org/project/examples/)。

有一个使用 ajax 的具体示例。

对于一个真实世界的示例，我[修改了 Drupal Commerce 的添加到购物车按钮](https://github.com/fmitchell/musicinst/blob/master/modules/custom/mic_commerce/mic_commerce.module)，您可以在我的 github 中查看该对话框

# css - 简单的 CSS 样式 - 定位 div

> ID：11549265
> 
> 赞同：1
> 
> 时间：2012-07-18T19:57:10.773
> 
> 标签：css, positioning

![想要的风格](../Images/53cfbc53c98d88a8c69c852e67bcee83.png)

这是一个关于 CSS 的非常简单的问题。我想得到图片中描绘的风格，我尝试了这段代码：

```
#parent {
    overflow: hidden;
text-align:center;
}
.navbar {
position:absolute;
top:0px;
right:3px;  
}
.logo {
float:left;
}
.table {
float:left;
} 
```

但这对我不起作用，我明白了：![不是这个！](../Images/f0d41399ba2aee14c1db7bb1dd8b2eeb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:59:45.367

尝试：

```
#parent {
overflow: hidden;
text-align:center;
margin:auto;
width:80%;
}
.navbar {
position:absolute;
top:0px;
right:3px;  
}
.logo {
float:left;
}
.table {
float:left;
} 
```

为了完成您想要的，您需要`margin:auto`使用`width:80%`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:03:55.863

我会给你的父元素一个明确的宽度，然后从那里定位：

```
#parent {
  width: 960px;
  margin: 0 auto;
  position: relative;
}

.navbar {
  position: absolute;
  top: 0;
  right: 3px;
}

.logo {
  margin-bottom: 20px;
  display: inline-block;
}

.table {
   width: 100%;
 } 
```

我不知道您在页面上还有哪些其他内容，但是您的 .logo 元素*应该*使用默认 HTML 流出现在您想要的位置。如果表是 100%，它将清除。您应该能够在没有浮动的情况下完成此操作。

# javascript - 使用 javascript 变量更改对象高度

> ID：11549266
> 
> 赞同：1
> 
> 时间：2012-07-18T19:57:11.390
> 
> 标签：javascript, variables

我的目标是根据观众屏幕的比例改变对象高度

我有javascript代码：

```
var rat = ((screen.availWidth / screen.availHeight)*100);
document.getElementById('myP').innerHTML=rat; 
```

并希望将其应用于 HTML 代码：

```
object classid="clsid27CDB6E-AE6D-11cf-96B8-444553540000" width="100% height="id='myP'" id="myFlashContent" align="middle" allowFullScreen = "true" 
```

但我不确定如何将变量写入代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:03:04.280

尝试 ：

```
var rat = ((screen.availWidth / screen.availHeight)*100);
    d = document.getElementById('myP');
    d.style.height=rat+"%"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:59:10.530

The way you are doing it is incorrect.

**1.** Assign an id to your object.

```
 <object id="obj" classid="..." ....> 
```

**2.** Change your javascript to

```
var rat = ((screen.availWidth / screen.availHeight)*100);
document.getElementById('obj').setAttribute("height", rat); 
```

# java - RESTeasy中基于HTTP头的拦截

> ID：11549268
> 
> 赞同：10
> 
> 时间：2012-07-18T19:57:17.243
> 
> 标签：java, rest, jax-rs, resteasy

我正在开发两种类型的 REST 服务。

*   在登录之前，不会将会话令牌传递给 HTTP 标头。
*   登录后会话令牌将在每个请求中传递。

我不想在每个 REST 方法中都包含 @HeaderParam。我想先拦截它，并在此基础上检查会话的有效性。请告诉我

1.  我如何根据 RESTEasy 中的标头进行拦截
2.  如何避免拦截少数方法

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T10:03:59.097

我使用 PreProcessInterceptor 解决了这个问题

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface Securable {
  String header() default "session-token";
}

@Provider
@ServerInterceptor
public class ValidationInterceptor implements PreProcessInterceptor, AcceptedByMethod {

  @Context
  private HttpServletRequest servletRequest;

  @Override
  public boolean accept(Class clazz, Method method) {
    return method.isAnnotationPresent(Securable.class);
  }

  @Override
  public ServerResponse preProcess(HttpRequest httpRequest, ResourceMethod resourceMethod) throws Failure,
      WebApplicationException {

    Securable securable =  resourceMethod.getMethod().getAnnotation(Securable.class);
    String headerValue = servletRequest.getHeader(securable.header());

    if (headerValue == null){
      return (ServerResponse)Response.status(Status.BAD_REQUEST).entity("Invalid Session").build();
    }else{
      // Validatation logic goes here
    }

    return null;
  }
} 
```

注释 @Securable 将用于需要验证的 REST 服务。

```
@Securable
@PUT
public Response updateUser(User user) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T21:06:44.517

有两种方法

1.  使用[JAX-RS 拦截器](http://docs.jboss.org/resteasy/docs/1.1.GA/userguide/html/Interceptors.html)- 您可以访问拦截器中的请求对象，因此您可以读取标头

2.  使用好的旧 JavaServlet 过滤器 - 使用 JAX-RS 不是问题，您也可以过滤 REST 请求。与拦截器类似，过滤器可以访问具有标头信息的请求对象

在这两种情况下，您都可以检查 HttpSession 是否存在（`request.getSession()`方法）并且它具有必需的属性。

查看请求路径，您可以包含/排除在配置中过滤或在 Java 代码中以编程方式过滤的请求。

# cron - 非常简单的 cron 作业线

> ID：11549269
> 
> 赞同：0
> 
> 时间：2012-07-18T19:57:18.117
> 
> 标签：cron, cron-task

我以前从未写过 cron 作业 cmd，我想在我的网站上运行它之前确保它是正确的，这样就不会出现任何问题。

我的脚本 autopost.php 抓取了一个 json 提要并添加到我的数据库中。通常我只是将我的浏览器指向该文件，以便它运行并更新数据库，但我听说 cronjobs 可以为我自动执行此操作。这是正确的吗？

```
wget -O http://www.domain.com/autopost.php 
```

编辑：

好的，在你的帮助下，我得到了它的工作。但是，它仅在我在 wget -O 之后添加 /dev/null 时才有效，这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:00:38.260

-sure it can !!

follow this link and you will be able to program you job every time you want : [www.aodba.com](http://www.aodba.com/tut_output_mysql.php?tut=17&page=linux)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:01:19.920

You're missing the run schedule part of the cron command. you need something like this:

```
* * * * * wget -O http://www.domain.com/autopost.php 
```

That says "do a wget every minute. For the syntax, see: [http://www.adminschoice.com/crontab-quick-reference](http://www.adminschoice.com/crontab-quick-reference)

# regular-language - 乔姆斯基 3 型和乔姆斯基 2 型语法的区别

> ID：11549271
> 
> 赞同：17
> 
> 时间：2012-07-18T19:57:28.607
> 
> 标签：regular-language, context-free-language, chomsky-hierarchy

我很难阐明 Chomsky 类型 2（上下文无关语言）和 Chomsky 类型 3（常规语言）之间的区别。

有人可以用简单的英语给我答案吗？我无法理解整个层次结构。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-08T03:18:56.423

**II 型文法是带有堆栈的 III 型文法**

II 型语法基本上是带有嵌套的 III 型语法。

**III型语法（常规）：**

用例 - CSV（逗号分隔值）

特征：

*   可以使用 FSM（有限状态机）读取
*   不需要中间存储
*   可以用正则表达式读取
*   通常使用一维或二维数据结构表示
*   是扁平的，意味着没有嵌套或递归属性

前任：

```
this,is,,"an "" example",\r\n
"of, a",type,"III\n",grammar\r\n 
```

只要您能弄清楚上述文本的所有规则和边缘情况，您就可以解析 CSV。

**II型语法（上下文无关）：**

用例 - HTML（超文本标记语言）或一般的 SGML

特征：

*   可以使用 DPDA（确定性下推自动机）读取
*   将需要一个堆栈用于中间存储
*   可以表示为 AST（抽象语法树）
*   可能包含嵌套和/或递归属性

HTML 可以表示为常规语法：

```
<h1>Useless Example</h1>
<p>Some stuff written here</p>
<p>Isn't this fun</p> 
```

但它尝试使用 FSM 解析它：

```
<body>
  <div id=titlebar>
    <h1>XHTML 1.0</h1>
    <h2>W3C's failed attempt to enforce HTML as a context-free language</h2>
  </div>
  <p>Back when the web was still pretty boring, the W3C attempted to standardize away the quirkiness of HTML by introducing a strict specification</p
  <p>Unfortunately, everybody ignored it.</p>
</body> 
```

看到不同？想象一下，您正在编写一个解析器，您可以从一个打开标签开始并在一个结束标签上结束，但是当您在到达结束标签之前遇到第二个开始标签时会发生什么？

很简单，您将第一个开始标签压入堆栈并开始解析第二个标签。对存在的尽可能多的嵌套级别重复此过程，如果语法结构良好，则可以在构建堆栈的相反级别一次展开堆栈

由于“纯”上下文无关语言的严格性质，它们相对较少，除非它们是由程序生成的。JSON，就是一个典型的例子。

上下文无关语言的好处是，虽然表达能力很强，但解析起来仍然相对简单。

* * *

但是等等，我不是说 HTML 是上下文无关的。是的，如果它是格式良好的（即 XHTML）。

虽然 XHTML 可能被认为是上下文无关的，但定义更宽松的 HTML 实际上会被认为是类型 I（即上下文敏感）。原因是，当解析器遇到结构不佳的代码时，它实际上会根据周围的上下文决定如何解释代码。例如，如果一个元素缺少结束标签，则需要先确定该元素在层次结构中的位置，然后才能决定应该放置结束标签的位置。

可以使上下文无关语言上下文敏感的其他功能包括模板、导入、预处理器、宏等。

简而言之，上下文相关语言看起来很像上下文无关语言，但上下文相关语言的元素可能会根据程序状态以不同的方式解释。

*免责声明：我没有接受过 CompSci 的正式培训，因此此答案可能包含错误或假设。如果你问我终端和非终端之间的区别，你会得到一个空白的凝视。通过实际构建一个类型 III（常规）解析器并广泛阅读其余内容，我学到了很多东西。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T20:15:49.430

维基[百科页面](http://en.wikipedia.org/wiki/Chomsky_hierarchy)有一个很好的图片和要点。

粗略地说，可以描述常规语言的底层机器不需要内存。它在输入上作为状态机 (DFA/NFA) 运行。正则语言也可以用正则表达式来表达。

一种具有“下一个”复杂程度的语言是一种上下文无关语言。描述这种语言的底层机器需要一些内存才能表示上下文无关且不规则的语言。请注意，向您的机器添加内存会使其功能更强大，因此它仍然可以表达开始时不需要内存的语言（例如常规语言）。底层机器通常是一个[下推自动机](http://en.wikipedia.org/wiki/Pushdown_automaton)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-18T20:27:11.843

类型 3 语法由一系列状态组成。他们无法表达嵌入。例如，类型 3 语法不能要求匹配括号，因为它无法显示括号应该“包裹”其内容。这是因为，正如 Derek 指出的那样，Type 3 语法不会“记住”任何关于它通过到达当前状态的先前状态的任何内容。

类型 2 语法由一组“产生式”（您可以将它们视为模式）组成，其中可以嵌入其他产生式。因此，它们是递归定义的。一个产品只能根据它包含的内容来定义，而不能“看到”它之外的东西；这就是使语法与上下文无关的原因。

# c++ - 使用共享库公开类型安全的动态 API

> ID：11549272
> 
> 赞同：5
> 
> 时间：2012-07-18T19:57:37.757
> 
> 标签：c++, gcc, c++11, shared-libraries

我正在为应用程序编写插件 API 接口。插件在运行时作为共享库加载。他们可以通过接口访问应用程序 API，例如：

```
class IPluginAPI
{
public:
 virtual bool IsPluginsLoaded(void) = 0;
 virtual bool IsHookingEnabled(void) = 0;
 // And about 50 more methods
}; 
```

插件可以请求“监听”某些事件（例如`MouseClick`等`MouseScroll`）。这些功能总共构成了超过 300 个不同的事件。通常我会做这样的事情：

```
extern "C" void SetEventHooks(APITable& table)
{
 table.MouseClick = &PluginMouseClickEvent;
 table.MouseMove = &PluginMouseMoveEvent;
} 
```

而`SetEventHooks`函数驻留在插件库中并从应用程序调用，插件可以通过指向它们的函数来监听感兴趣的函数。这不是我想使用的方法，但我想提供某种抽象。这就是我的想法：

```
// Interface IPluginAPI supplies a 'SetEventHook` method such as
void SetEventHook(HookID id, void * callback); 
```

在这种情况下`HookID`，是一个包含所有函数 ID 的强类型枚举：

```
enum class HookID
{
 MouseClick,
 MouseMove,
 // ...
}; 
```

所以插件会使用这个函数来监听事件：

```
pluginAPI->SetEventHook(ID::MouseClick, &myCallback); 
```

这种方法的问题是它不是类型安全的，我不能直接使用模板（因为这是在运行时作为库完成的）。我不想为每个事件（例如`SetHookMouseMove(void (*)(int, int))`等等）公开 300 个不同的函数。我的最后一个想法是，插件有一个实用模板函数，它使这种类型安全，但我不确定如何以简单的方式实现它（并且没有样板代码）：

```
template <typename T>
SetEventHook(HookID id, T callback)
{
 if(typeof(T) == decltype(/* function type of the ID */))
  gPluginAPI->SetEventHook(id, callback);
 else static_assert("INVALID FUNCTION TYPE");
} 
```

所以说简单点；如何让我的插件以动态类型安全的方式连接到某些事件，而不为每个事件公开完整的函数表和/或 >300 个方法？

注意：我使用函数指针进行简化，但我想使用`std::function`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:55:48.477

正如 Kerrek 所建议的，您可以使用特征策略来解决您的问题。基本上，作为公共 API 的一部分，您必须包含为每个钩子 ID 定义回调类型的结构。

```
// The default traits. If you don't want to have default traits comment body
// of this type out (including curly braces).
template <HookID id>
struct CallbackTraits
{
   typedef void (*CallbackType)();
};

// Traits for MouseClick
template <>
struct CallbackTraits<HookID::MouseClick>
{
    typedef void (*CallbackType)(int);
};

// Traits for MouseDoubleClick are the same
template <>
struct CallbackTraits<HookID::MouseDoubleClick> : CallbackTraits<HookID::MouseClick> {};

// Traits for MouseMove
template <>
struct CallbackTraits<HookID::MouseMove> 
{
    typedef void (*CallbackType)(int, int);
};

// actual hooking function
template <HookID id>
void SetEventHook(typename CallbackTraits<id>::CallbackType callback)
{
    // do something with id and the callback
} 
```

现在您可以通过以下方式使用此 API：

```
// handlers prototypes
void MouseClicked(int button);
void MouseMoved(int x, int y);
void SomeEvent();

int main()
{
    // compiles ok
    SetEventHook<HookID::MouseClick>(MouseClicked);
    SetEventHook<HookID::MouseMove>(MouseMoved);

    // won't compile - function signature incompatible
    SetEventHook<HookID::MouseDoubleClick>(MouseMoved);

    // will compile if you left default traits body uncommented
    SetEventHook<HookID::HookWithNoTraitsDefined>(SomeEvent);
    return 0;
} 
```

我在[这里](http://ideone.com/clone/CgRzy)上传了一个工作样本。

# machine-learning - 图形作为分类器的输出

> ID：11549274
> 
> 赞同：1
> 
> 时间：2012-07-18T19:57:49.267
> 
> 标签：machine-learning, classification

似乎我有一个非常常见的任务，但是我缺少一些可以帮助我查找信息的关键字。所以我陈述我的任务。

有人。关于每个人的一组变量是已知的。一对人 P1 和 P2 可以处于以下关系之一（它们是类）：

1.  亲子
2.  兄弟姐妹
3.  合作伙伴（重要的）
4.  其他（一些间接亲属或非家庭成员）

通过选择具有已知关系的对（Pi，Pk）的一些变量，我可以训练一个朴素贝叶斯分类器来预测类。这很好。

现在。我有一组人 P1、P2、... Pm，我需要构建代表家谱的最可能图。我可以成对使用我的贝叶斯分类器，但在这种情况下，我不会使用存储在图形/多个节点组合中的大量信息。

例如，给出了节点 P1、P2、P3 和 P4。我的贝叶斯分类器认为 P2 是 P1 的父级，P4 是 P3 的父级的概率为 0.9。至于 P1 和 P3 之间的关系，它返回兄弟姐妹的 p=0.31 和伙伴的 p=0.34，所以结果是相当不可靠的。现在，如果 P2 和 P4 之间关系的分类产生“伙伴”的概率为 0.7，我可以更确定 P1 和 P3 实际上是兄弟姐妹。另一方面，如果 P2 和 P4 是概率为 0.8 的“其他”，那么我可以更安全地得出结论 P1 和 P3 是合作伙伴。

我可以手动编写这个逻辑，但我认为有更多的案例和逻辑依赖关系，特别是如果我们想为大约 10 或 20 人构建关系图。因此，我想使用某种分类器或分类器系统。

但是这个分类器系统的输出将不是一个二进制或标量值，而是一个整图。我可以使用什么或从哪里开始寻找？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:47:45.877

你想要一些做某种[结构学习](http://en.wikipedia.org/wiki/Structured_learning)。就像图比比特复杂得多一样，结构学习也比分类复杂得多。

您可能希望找到最大后验 (MAP) 家谱，以了解您对个人关系的概率知识。考虑到你所有的知识，MAP 是最有可能的任务。找出概率相关项目之间关系的一般问题称为[概率推理](http://jmlr.csail.mit.edu/papers/volume1/heckerman00a/html/node4.html)，或者有时只是推理。

我不知道您是否可以在最近完成的[概率图形模型](https://www.coursera.org/course/pgm)课程中访问课程资料，但这将是很好的学习。

# javascript - jQuery each() 在 null 上中断

> ID：11549281
> 
> 赞同：2
> 
> 时间：2012-07-18T19:58:40.790
> 
> 标签：javascript, jquery, json

我有一个 JSON 对象，我用 each() 循环将表行添加到表中。我无法确保 JSON 数组中呈现的数据的完整性，并且偶尔会遇到一些 NULL。

例如：

```
// A GOOD ARRAY 
{
id: "193",
location: {
city: "Atlanta",
state: "GA"
},
name: "John"
},
// NOW WE STUMBLE UPON A BAD ARRAY WITH A NULL
{
id: "194",
location: {
city: "Boise",
state: null
},
name: "Frank"
},
{...} 
```

现在，当我处理没有 NULL 值的 JSON 对象时，each() 循环没有问题。一旦我在数组中的任何地方遇到一个为 NULL 的成员，循环就会中断。

这就是我循环的方式：

```
$.getJSON("/getstuff/jsonprovider.php", function (data) {

        var results = data.parentnode;

        var tableThing = $(".myTable tbody");
            var i = 0;

        $.each(results, function () {
                tableThing.append('<tr><td></td><td>' + results[i].id + '</td><td>' + results[i].name + '</td><td>' + results[i].location.city + ', ' + results[i].location.state + '</td></tr>');
        i++;
        });

        }); 
```

我应该在这里调查 each() 以外的东西，还是应该使用完全不同的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:20:40.547

正确的做法`$.each`是这样的：

```
var myObj = {...};
$.each(myObj, function(k, v){ 
    //..
}); 
```

您需要上面的两个参数：

*   k 保存索引或键
*   v 保存该索引或键处的值

如果您要使用计数器变量`i`，不妨使用 JavaScript`for in`循环：

```
for(var i in myObj){
   //..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:23:40.737

由于您的数据可能包含空值，因此您需要在尝试使用数据之前确保数据存在。只使用`.append`一次也更有效率。下面我使用默认的空对象和 $.extend 深拷贝来确保我们从中提取数据的对象始终定义了所有数据值，即使该值不在 json 中。我仍然不确定此时将如何处理空值。

```
var emptyObj = {
    id: "",
    name: "",
    location: {
        city: "",
        state: ""
    }
},htmlToAppend = "";

$.each(results, function (i,obj) {
    var newObj = $.extend(true,{},emptyObj,obj);
    htmlToAppend += '<tr><td></td><td>' + newObj.id + '</td><td>' + newObj.name + '</td><td>' + newObj.location.city + ', ' + newObj.location.state + '</td></tr>';
});
tableThing.append(htmlToAppend); 
```

# eclipse - Remove "Quick Access" entry in Eclipse Juno

> ID：11549283
> 
> 赞同：93
> 
> 时间：2012-07-18T19:58:54.383
> 
> 标签：eclipse, eclipse-cdt

How do I remove the "Quick Access" text entry from Juno's CDT toolbar? I never use it and it consumes valuable space on my laptop screen.

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-18T20:31:19.250

此错误[使“快速访问”成为可选和默认隐藏](https://bugs.eclipse.org/bugs/show_bug.cgi?id=362420)覆盖它。看起来目前不可能，我建议您将您的兴趣添加到该错误中。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-10-04T09:25:11.123

我正在寻找这个问题的答案，因为快速访问在工具栏中占据了一整行。我没有删除它（根据我的口味，这需要太多的黑客攻击），我只是删除了一些我无论如何都没有使用的工具栏按钮，并且快速访问在其余按钮中向上移动，只占用了可接受的空间。

对于任何一个视角，真的不需要那么多按钮。除非您的屏幕很小，否则它们应该适合。在**Window -> Customize Prespective 中自定义它...**

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-07-15T02:48:17.650

这是一个不需要安装任何插件的快速技巧，您只需在当前布局的 CSS 文件中添加几行即可。在 v4.2.2 中非常适合我

导航`<ECLIPSE_HOME>/plugins/org.eclipse.platform_<VERSION>/css`然后打开您正在使用的任何布局的 CSS 文件，例如我的是`e4_default.css`. 现在将以下代码段附加到文件中：

```
#SearchField {
   visibility:hidden;
} 
```

现在只需重新启动 Eclipse，该框就消失了。

`*Edit`

无论您当前的布局如何，布局文件似乎`e4_basestyle.css`都是通用的。因此，您应该能够将上述代码段添加到该文件中，并且即使您更改布局，此修复也将是持久的。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-07-08T05:19:35.577

在 Luna 中，此问题已得到修复。

您只需右键单击快速访问工具栏，然后单击隐藏即可隐藏它。[请参阅https://bugs.eclipse.org/bugs/show_bug.cgi?id=362420](https://bugs.eclipse.org/bugs/show_bug.cgi?id=362420)中的最后几条评论

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-07-13T22:01:57.660

Check out this plugin: [https://github.com/atlanto/eclipse-4.x-filler#hide-quick-access-plug-in](https://github.com/atlanto/eclipse-4.x-filler#hide-quick-access-plug-in)

Works with Eclipse Kepler release.

> This plug-in adds a functionality to hide/show Quick Access textbox in the main toolbar.
> 
> Window ☞ Hide Quick Access

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-09-14T14:05:43.857

一个解决方案的灵感来自： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=319991](https://bugs.eclipse.org/bugs/show_bug.cgi?id=319991)

（使用 Eclipse Juno 4.2）只需将这段代码添加到您的`ApplicationWorkbenchWindowAdvisor`类中并从`preWindowOpen()`.

```
private void hideQuickAccess() { 
        UIJob job = new UIJob("hide quick access") {
            @Override
            public IStatus runInUIThread(IProgressMonitor monitor) {
                IWorkbenchWindow window = PlatformUI.getWorkbench()
                        .getActiveWorkbenchWindow();
                if (window instanceof WorkbenchWindow) {
                    MTrimBar topTrim = ((WorkbenchWindow) window).getTopTrim();
                for (MTrimElement element : topTrim.getChildren()) {
                    if ("SearchField".equals(element.getElementId())) {                     
                        ((Control) element.getWidget()).dispose();
                        break;
                    }
                }
            }
            return Status.OK_STATUS;
        }
    };
    job.schedule(); 
```

除非更改`org.eclipse.e4.ui.model.workbench.source_0.10.1.v20120523-1955.jar`. 要更改此选项，请转到 Java 构建路径菜单，找到 jar，展开它，该选项将出现。

注意：我不确定最后一次更改的含义，它可能“不干净”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-20T11:56:06.553

版本解决方案：氧气释放（4.7.0）：

1.  通过将它们从“工具栏”（例如左/右/下方）拖到编辑器中来保存您经常使用的图标。
2.  然后切换：窗口>外观>隐藏/显示工具栏完成。:)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-09-27T20:48:59.373

在快速访问窗口中输入“切换工具栏”（是的，这正是让我们烦恼的东西），它就会消失。[比照](https://stackoverflow.com/questions/11454949/how-to-hide-toolbar-in-eclipse-4-2)

# mysql - CMS数据库视频存储表设计

> ID：11549289
> 
> 赞同：0
> 
> 时间：2012-07-18T19:59:17.210
> 
> 标签：mysql, sql

我目前正在为我正在研究的 CMS 设计视频表，但我对如何设置它感到有些困惑。我需要该表来存储以下信息：

*   content_id：引用主内容表的 FK
*   6 个版本的文件位置：240p、480p 和 1080p，每个版本在 2 个编解码器中
*   每个视频质量的可用性
*   每个视频质量的状态（是否已完成转码）

到目前为止，我所拥有的看起来像这样：

```
CREATE TABLE tbl_content_video (
    con_id INT NOT NULL AUTO_INCREMENT,
    vid_length INT NOT NULL,
    flv_1080_file_loc VARCHAR(255) DEFAULT NULL,
    flv_480_file_loc VARCHAR(255) DEFAULT NULL,
    flv_240_file_loc VARCHAR(255) NOT NULL,
    vp8_1080_file_loc VARCHAR(255) DEFAULT NULL,
    vp8_480_file_loc VARCHAR(255) DEFAULT NULL,
    vp8_240_file_loc VARCHAR(255) NOT NULL,

FOREIGN KEY (con_id) REFERENCES tbl_content (con_id)
); 
```

我仍然不确定存储可用质量及其可用性状态的最佳解决方案，非常感谢任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:03:11.253

没有理由存储单个文件位置。其中大部分将是高度重复的路径数据。相反，将路径保存在单独的表中或硬编码到配置文件中，然后简单地使用这些路径加上视​​频的 id ( `con_it`?) 来构建指向适当版本视频的路径。

至于状态内容，请为您支持的每种视频类型保留一个字段，并找出一些要放入其中的值。0 - 不可用，1 - 转码，2- 错误，3- 可以使用，等等...

# javascript - Simply traversing through an array

> ID：11549290
> 
> 赞同：0
> 
> 时间：2012-07-18T19:59:32.847
> 
> 标签：javascript, arrays

Why is name_Scenario[i] iterating each individual char instead of each string in the array?

```
var num_Scenarios;
var num_Features;
var name_Scenario = ["Login", "Users", "Yo", "Whatsup", "Diablo 3", "Junglr", "Microsoft", "Another", "Hi", "Anyone", "O", "Happy", "Stuff", "Sleep", "Account"];
var desc_Scenario;

function normalGrid() {
    $("#tile-bank").remove();
    $("#content").append("<div id=\"tile-bank\"></div>");
    //Code where your data is received and you run addScenario() per interation
    //filler global vars that your data will replace
    num_Scenarios = 15;
    num_Features = 20;
    name_Scenario = "Login";
    desc_Scenario = "This is a description.";
    var add_to = $("#tile-bank");
    for (var i = 0; i < num_Scenarios; i++) {
        addScenario(add_to, num_Features, name_Scenario[i], desc_Scenario);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:05:45.277

在`name_Scenario = "Login";`line 之后，`name_Scenario`是一个字符串，或者换句话说，是一个`char`s 数组，并且您正在迭代该`char`s。只需删除该行。

```
for (var i = 0; i < name_Scenario.length; i++) {
//changed 'num' to 'name'--^       ^---added '.length' here
    addScenario(add_to, num_Features, name_Scenario[i], desc_Scenario);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:09:50.590

您正在重新定义`name_Scenario`. 它曾经是一个数组，但是当你用 调用它的索引时`[i]`，它就变成了一个字符串。

此外，您不需要`num_Scenarios`. 您可以只使用`nameScenario.length`（当然，它仍然是一个数组！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:10:08.193

您正在过度使用 var var name_Scenario;

在第 3 行你做 = ["Login", "Users", "Yo", "Whatsup", "Diablo 3", "Junglr", "Microsoft", "Another", "Hi", "Anyone", " O”、“快乐”、“东西”、“睡眠”、“账户”]；

然后在循环之前执行 name_Scenario = "Login";

# reporting-services - Reporting services: Cover page header

> ID：11549291
> 
> 赞同：0
> 
> 时间：2012-07-18T19:59:38.333
> 
> 标签：reporting-services

I have a report that already has an existing header. I need to add some info to just the cover page header.

So I added everything in a rectangle. Then hid the rectangle on everything but the first page.

```
=Globals.PageNumber <> 1 
```

That works... but now I have a giant white space in place of the rectangle. The rectangle contains images and some textboxes.

Any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T22:17:34.373

我最终将矩形移动到第一页，然后仅将标题隐藏在第一页上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:27:05.087

第一页有实际数据吗？如果不需要，请尝试将“额外”项目矩形放在报告正文中，然后添加分页符。然后，这个矩形基本上就是报告的封面。

# c# - Properly completing execution of a Workflow in WF 4 and MVC3

> ID：11549295
> 
> 赞同：0
> 
> 时间：2012-07-18T20:00:04.830
> 
> 标签：c#, multithreading, asp.net-mvc-3, workflow-foundation-4

I have a workflow that runs (hosted by WorkflowApplication), sends an email, then persists using a bookmark. The email has a link that allows the workflow to resume at that bookmark, which it does properly. However, after the workflow finishes, the webpage never loads.

It's like the page is waiting for the workflow to finish but it never does. I am very new to workflow and even newer to multithreading, so my question is:

Is there anything special I need to do to exit the workflow completely so control is given back to the main thread? Like a delegate method I'm missing?

Cheers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:16:05.460

所以我在发帖后就想通了，所以我很抱歉。不过，这里是：

因为工作流在一个单独的线程上，所以它一旦完成就不会与主线程同步。所以我需要在 Completed 委托中添加一个方法，以确保它在完成后与主线程同步。我只是忘记了。希望这可以帮助某人。

首先，您需要设置和自动重置事件和一个 WorkflowApplication 对象

```
 private static AutoResetEvent _syncEvent = new AutoResetEvent(false);
 private static WorkflowApplcation _wfApp = new WorkflowApplication(new MyActivity()); 
```

然后在 wfApp 的委托方法中，确保调用：

```
 _syncEvent.Set(); 
```

所以：

```
wfApp.Completed = (e) =>
              {
                Debug.WriteLine("Workflow completed: {0}", e.Outputs["Message"]);
                _syncEvent.Set();
              }; 
```

最后一部分是我所缺少的

# matlab - 3d patches from a 3d matrix

> ID：11549297
> 
> 赞同：4
> 
> 时间：2012-07-18T20:00:08.453
> 
> 标签：matlab, matrix, patch

I have a 3d matrix `(3x3x3)`, and I need to extract 3d patches `(2x2x2)` and transform them in vectors.

In 2d, simply:

`I=randi(5,3,3);`

`2d_patches=im2col(I,[2 2],'sliding');`

What about 3d?

`I=randi(5,3,3,3);`

`3d_patches= ???`

im2col just works in 2d. In 3d I should recombine the vectors `1` and `7`, `2` and `8`, ... Is there any fast function for this task?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:38:31.333

我不相信有任何内置的方法可以做到这一点。如果您需要它快速，用 c 编写自己的 mex 函数并从 Matlab 调用它应该相当简单。

这是我的（快速而肮脏的）解决方案：

## im3col.c:

```
#include <mex.h>

void mexFunction( int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[] )
{
  const mxArray *I = prhs[0];
  double *indata = mxGetPr(I);
  double *patchSize = mxGetPr(prhs[1]);
  const int *size = mxGetDimensions(I);
  int J = (int)patchSize[0], K = (int)patchSize[1], H = (int)patchSize[2];
  int M = size[0],           N = size[1],           P = size[2];

  int numPatches = (M - J + 1)*(N - K + 1)*(P - H + 1);
  int out_rows = J*K*H, out_cols = numPatches;
  mxArray *out = mxCreateDoubleMatrix( out_rows, out_cols, mxREAL );
  double *outdata = mxGetPr(out);

  int patch = 0;
  for( int h_offset = 0; h_offset < P-H+1; h_offset++ ){
    for( int k_offset = 0; k_offset < N-K+1; k_offset++ ){
      for( int j_offset = 0; j_offset < M-J+1; j_offset++ ){
        int row = 0;
        for( int h = 0; h < H; h++ ){
          for( int k = 0; k < K; k++ ){
            for( int j = 0; j < J; j++ ){
              outdata[patch*out_rows + row] = 
                indata[ (j_offset+j) + (k_offset+k)*M + (h_offset+h)*M*N ];
              ++row;
            }}}
      ++patch;
      }}}
  plhs[0] = out;
} 
```

## 编译：

```
>> mex -O CFLAGS="\$CFLAGS -std=c99 -Wall" im3col.c 
```

## 测试：

```
>> A(:,:,1) = [1,4,7;2,5,8;3,6,9]; A(:,:,2) = [10,13,16;11,14,17;12,15,18];
>> B = im3col(A, [2,2,1])

B =

     1     2     4     5    10    11    13    14
     2     3     5     6    11    12    14    15
     4     5     7     8    13    14    16    17
     5     6     8     9    14    15    17    18

>> A(:,:,1),A(:,:,2)

ans =

     1     4     7
     2     5     8
     3     6     9

ans =

    10    13    16
    11    14    17
    12    15    18 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-08T16:49:00.907

这是另一个方向：（它很慢，肯定有更快的方法）

```
function [img] = patch2im_2d_time(patch, size_img, size_patch, size_skip, border)
Nx = size_img(1);
Ny = size_img(2);
Nt = size_img(5);

psz1 = size_patch(1);
psz2 = size_patch(2);
psz3 = size_patch(3);

%Extract blocks. One could save a lot here.
patches  = reshape(patch, [psz1 psz2 psz3 size(patch,2)]);
c = 1;
img2 = zeros(squeeze(size_img));
%Count for each pixel how many times we added smth to it.
add_count = zeros(size_img);

%The first three loops, loop through all the pixels in the image
for d=1:Nt-psz3+1
    for j=1:Nx-psz2+1
        for i=1:Ny-psz1+1
            %Here we get the next patch. The next patch is always
            %the patch that has the pixel at i,j,d at its top front corner.
            current_patch = patches(:,:,:,c);
            %counter for the next patch
            c = c + 1;
            %In this loop we add the patch values of each pixel in the
            %patch to the image. i,j,d is the base. We add the offset
            %ii jj and dd to it. This iteration takes psz^3 many
            %iterations.
            for dd=1:psz3
                for ii=1:psz2
                    for jj=1:psz1
                        img2(i+ii-1,j+jj-1,d+dd-1) = img2(i+ii-1,j+jj-1,d+dd-1) + current_patch(ii,jj,dd);
                        add_count(i+ii-1,j+jj-1,d+dd-1) = add_count(i+ii-1,j+jj-1,d+dd-1) + 1;
                    end
                end
            end

        end
    end
end
    img = flipud(rot90(img2 ./ add_count,1));
end 
```

请记住，MATLAB 使用 col major。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T12:31:25.390

大家好，这个解决方案怎么样。要获得 3x3x3 的 ROI，我建议：

```
blkSize=3; % should be a odd value like 3,5,7,etc
r=floor(blkSize/2);
k=1;

for sliceNo=(r+1):(size(I,3)-r)

   img= I(:,:,sliceNo-r:sliceNo+r);

   noPix=(size(img,1)-2*r)*(size(img,2)-2*r);
   neiblk=zeros(blkSize^3,noPix);

   for blk=1:blkSize
       neiblk(blkSize^2*(blk-1)+1:blkSize^2*blk,:)=im2col(img(:,:,blk),...
             [blkSize,blkSize],'sliding');            
   end

   ROIs(:,noPix*(k-1)+1:noPix*k)=neiblk;
   k=k+1;
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T07:30:50.140

```
%One possible way to use matlab to call im2col and reshape twice
%N = [row, col, num_frames]

[x_height, ~, num_frames] = size(N);
patchSize = 16;
patchTemporal = 10;

N = reshape(N, x_height, []);

N = im2col(N, [patchSize, patchSize], 'distinct');

N = reshape(N, [], num_frames);

N = im2col(N, [patchSize^2, patchTemporal], 'distinct');
% N = [patchSize^2 *patchTemporal x numPatches] 
```

# xcode - xcode 4.3.3 gdb 或 lldb 调试器跳转

> ID：11549303
> 
> 赞同：0
> 
> 时间：2012-07-18T20:01:04.410
> 
> 标签：xcode, debugging, xcode4, gdb, lldb

在发布模式下在手机上运行调试器时，我们的调试器出现了一个奇怪的错误。无论我们是在 xcode 4.3.3 中使用 gdb 还是 lldb，即使代码的 PC 并未真正指向该点，代码也会落在断点上。

假代码示例：

```
if (true) {
    // set breakpoint-A here
} else {
    // set breakpoint-B here
} 
```

// 在此处设置另一个断点-C。

它将降落在断点-B，然后跳转到断点-A。

是因为我们处于“发布”模式并且正在优化吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T01:53:07.390

是的，这里发生了三件事： 当您在发布模式下构建时，编译器正在优化代码生成。编译器可能会更改源代码行编译到程序中的顺序（只要不改变代码的含义），不同源代码行之间的指令可能会混合或重新排列，最后可能会出现行问题编译器发出的表。

想象一下两个源代码行，每个代码行都变成 8 条汇编语言指令。编译器可能会重新排列这 16 条指令（只要不改变它们的结果）以保持 CPU 最有效地运行。但是在这种情况下，编译器应该说什么指令相当于第 1 行？编译器应该说什么指令相当于第 2 行？

通过优化的代码调试，如果您在源代码级别进行调试，您必须接受这样一个现实，即“当前执行的源代码行”在您逐步执行程序时会反弹很多。似乎在范围内的变量会在不明显的时间出现和消失。编译器的方法很棘手且难以理解。您需要使用您面前的汇编语言代码（或源代码 + 汇编显示）进行调试，以真正了解正在发生的事情。

编译器和调试器可以进行一些改进来改进优化的代码源级调试，但可能总是有点难以遵循。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:04:00.003

Xcode 也倾向于从方法中的任何 return 语句跳转到该方法中的第一个 return 语句。（Xcode 4.3.3 仍然可以。我还不确定 4.5。）

只需忽略最后突出显示的“返回”声明。

# python - python单元测试：assertEqual在抛出AssertionError的相同对象上

> ID：11549309
> 
> 赞同：6
> 
> 时间：2012-07-18T20:01:34.740
> 
> 标签：python, django, unit-testing, django-unittest

我有一堂课

```
class PlaylistManager(models.Manager):
    def add_playlist(self, name):
        playlist = Playlist(name=name)
        playlist.save()
        return playlist

    def get_playlist_with_id(self, id):
        return super(PlaylistManager, self).get_query_set().filter(pk=id)

class Playlist(models.Model):
    name = models.CharField(max_length=30)
    date_created = models.DateTimeField(auto_now_add=True)
    date_modified = models.DateTimeField(auto_now=True)
    deleted = models.BooleanField(default=False)
    objects = PlaylistManager() # is a customer manager

    def __repr__(self):
        return '<Playlist name:%s, date_created:%s, date_modified:%s, deleted:%s>' % \
                (self.name, self.date_created, self.date_modified, self.deleted)

    class Meta:
        db_table = 'playlists' 
```

我`test`作为

```
def test_get_playlist(self):
    playlist = Utility.add_playlist()
    self.assertEqual(Playlist.objects.get_playlist_with_id(playlist.id), playlist)

class Utility():
    @staticmethod
    def add_playlist(playlist_name=PLAYLIST):
        return Playlist.objects.add_playlist(playlist_name) 
```

当我运行测试时，我看到错误为

```
AssertionError: [<Playlist name:playlist, date_created:2012-07-18 19:54:12.265909+00:00, date_modified:2012-07-18 19:54:12.265955+00:00, deleted:False>] != <Playlist name:playlist, date_created:2012-07-18 19:54:12.265909+00:00, date_modified:2012-07-18 19:54:12.265955+00:00, deleted:False> 
```

即使两个对象相同。

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-18T20:04:41.423

`assertEqual()`使用`==`运算符来比较类。`==`用户定义类的默认运算符按对象身份比较实例。*这意味着两个实例仅在它们是相同*实例时才被视为相等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T20:06:12.330

比较模型id或pk就可以了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T20:22:49.037

`AssertionError`是正确的。你`get_playlist_with_id`返回一个`Queryset`不是`Playlist`实例。如果要`get_playlist_with_id`返回单个实例，则应使用`get`not `filter`。

# java - Wicket - 进度/多个标签更新

> ID：11549314
> 
> 赞同：1
> 
> 时间：2012-07-18T20:02:01.450
> 
> 标签：java, ajax, label, wicket, target

我不确定这是否可能。当您单击“提交”按钮时，似乎有一种方法可以做到这一点。

```
private Button getButton(String id) 
{
    return new AjaxButton(id)
    {
            private static final long serialVersionUID = 1L;
            {
                setEnabled(true);
            }

            @Override
            protected void onSubmit(AjaxRequestTarget target, Form<?> form) 
            {
                debug = "Beginning a process....";
                target.addComponent(debugLabel);

                //Perform the first process

                debug = "Beginning second process....";
                target.addComponent(debugLabel);

                //Perform the second process

                debug = "Finishing....";
                target.addComponent(debugLabel);

                //Perform the third process

                debug = "Done.";
                target.addComponent(debugLabel);
            }
            @Override
            protected void onError(AjaxRequestTarget target, Form form)
            {
                //NO-OP
            }
        };
    }
} 
```

如果不可能，是否有替代多个实时更新的方法？我想要它，所以底部有一个状态标签，它会更新并告诉您在该方法中完成了多少进展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:16:27.113

您必须在另一个线程中启动您希望收到通知的进程。然后，您可以使用有关状态的信息更新用户会话，这些信息将由绑定到标签的一些 ajax 行为定期检查。

在检票口 6 你也可以使用`WebSocketBehavior`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:26:59.470

只需使用 AjaxTimerBehavior，它就会每 1-2 秒更新一次您的标签。

代码：

```
add(new AbstractAjaxTimerBehavior(Duration.seconds(1))
        {
            @Override
            protected void onTimer(AjaxRequestTarget target)
            {
                target.add(label);
            }
        }); 
```

显然，该解决方案使用了哑 AJAX 轮询，因此只建议在 Intranet 或其他低流量站点上使用它。

# java - 为什么自定义饼图不显示？

> ID：11549315
> 
> 赞同：1
> 
> 时间：2012-07-18T20:02:01.813
> 
> 标签：java, swing

输入文字，按下按钮，为什么饼图不显示？

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import javax.swing.*;
import javax.swing.border.TitledBorder;

public class PieChart extends JFrame {

    private JTextField jtfParticipation = new JTextField();
    private JTextField jtfProjects = new JTextField();
    private JTextField jtfQuizzes = new JTextField();
    private JTextField jtfFinalExam = new JTextField();
    private JButton jbtCreatePieChart = new JButton("Create Pie Chart");

    public PieChart() {

        // Text panel

        JPanel panel1 = new JPanel(new GridLayout(8, 0));

        panel1.setBorder(new TitledBorder("Input percentages:"));

        // A font to change from the default Plain font to Arial font

        Font arialFont = new Font("Arial", Font.PLAIN, 12);

        JLabel jlblParticipation = new JLabel("Participation %");

        JLabel jlblProjects = new JLabel("Projects %");

        JLabel jlblQuizzes = new JLabel("Quizzes %");

        JLabel jlblFinalExam = new JLabel("Final Exam %");

        // The labels use the new font

        jlblParticipation.setFont(arialFont);

        jlblProjects.setFont(arialFont);

        jlblQuizzes.setFont(arialFont);

        jlblFinalExam.setFont(arialFont);

        // Adds the objects to the panel

        panel1.add(jlblParticipation);

        panel1.add(jtfParticipation);

        panel1.add(jlblProjects);

        panel1.add(jtfProjects);

        panel1.add(jlblQuizzes);

        panel1.add(jtfQuizzes);

        panel1.add(jlblFinalExam);

        panel1.add(jtfFinalExam);

        // Assigns the text panel and the button to one panel

        JPanel panel2 = new JPanel(new BorderLayout());

        panel2.add(panel1, BorderLayout.CENTER);

        panel2.add(jbtCreatePieChart, BorderLayout.SOUTH);

        add(panel2, BorderLayout.WEST);

        jbtCreatePieChart.addActionListener(new ButtonListener());

    }

    class ButtonListener implements ActionListener {

        @Override

        public void actionPerformed(ActionEvent e) {

            // Set the size and trigger a repaint

            final PieChartGraphic pie = new PieChartGraphic();

            add(pie, BorderLayout.CENTER);

            pie.setPreferredSize(new Dimension());

            pie.repaint();

        }

    }

    class PieChartGraphic extends JPanel {

        @Override
        protected void paintComponent(Graphics slice) {

            super.paintComponent(slice);

            int xCenter = getWidth() / 2;

            int yCenter = getHeight() / 2;

            int radius = (int) (Math.min(getWidth(), getHeight()) * 0.4);

            int x = xCenter - radius;
            int y = yCenter - radius;

            double inputIsDouble;

            int inputIsInt;

            int availablePercentage = 100;

            int currentAngle = 0;

            ArrayList<JTextField> jtfs = new ArrayList<>();

            jtfs.add(jtfProjects);

            jtfs.add(jtfParticipation);

            jtfs.add(jtfQuizzes);

            jtfs.add(jtfFinalExam);

            ArrayList<Color> color = new ArrayList<>();

            color.add(Color.RED);

            color.add(Color.GREEN);

            color.add(Color.BLUE);

            color.add(Color.WHITE);

            for (int i = 0; i < jtfs.size(); i++) {

                inputIsDouble = userInput(jtfs.get(i).getText(), availablePercentage);

                inputIsInt = (int) (inputIsDouble * 3.6);

                // Sets the color of the filled

                slice.setColor(color.get(i));

                // Sets the start point and size of the angle

                slice.fillArc(x, y, 2 * radius, 2 * radius, currentAngle, inputIsInt);

                currentAngle += inputIsInt;

                availablePercentage -= inputIsDouble;

            }

            // Places the text strings

            slice.setColor(Color.BLACK);

            slice.drawString("Participation - " +

                "\jtfParticipation.getText() + "%", 1 / 4 * x, 1 / 4 * y);

            slice.drawString("Projects - " + jtfProjects.getText() + "%", 3 / 4 * x, 1 / 4 * y);

            slice.drawString("Quizzes -- " + jtfQuizzes.getText() + "%", 1 / 4 * x, 3 / 4 * y);

            slice.drawString("Final - " + jtfFinalExam.getText() + "%", 3 / 4 * x, 3 / 4 * y);

        }

    }

    public static double userInput(String inputIsString, int availablePercentage) {

        return new Double(inputIsString).doubleValue();

    }

    public static void main(String[] args) {

        PieChart frame = new PieChart();

        frame.setTitle("CMIS Pie Chart");

        frame.setSize(334, 215);

        frame.setLocationRelativeTo(null);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.setResizable(false);

        frame.setVisible(true);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:16:26.137

这里有几点需要考虑：

创建 panel3 后，组件大小永远不会设置：

```
panel3.setSize(200, 200);
PieChartGraphic pieChartGraphic = new PieChartGraphic();
pieChartGraphic.setSize(200, 200);
panel3.add(pieChartGraphic); 
```

添加jpanel3后，你应该调用

```
jpanel3.repaint(); 
```

绘制添加组件的图形。

在paintComponent 调用的中途会发生用户输入和验证。这应该在您进行任何绘画等之前**立即完成。**

我用过：

```
public static double userInput(String inputIsString, int availablePercentage) {
    return new Double(inputIsString).doubleValue();
} 
```

并且可以看到饼图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:31:31.553

我认为你在这里有几个问题。

首先是@Reimeus 指出的尺寸/重绘问题。您需要设置饼图的大小，然后重新绘制它。

接下来，在每次单击按钮时添加新的 PieChartPanel 的方式似乎是一种奇怪的做事方式。每次用户按下按钮时，您最终都会创建新的面板，这些面板只是堆叠在一起。为什么不永久添加饼图面板，并根据状态更新其上显示​​的内容？

我更改了以下代码。首先，我更改了动作侦听器以删除额外的面板并在面板上设置大小。我还添加了重绘，尽管这似乎无关紧要：

```
class ButtonListener implements ActionListener {
  @Override
  public void actionPerformed(ActionEvent e) {
      // Set the size and trigger a repaint
      final PieChartGraphic pie = new PieChartGraphic();
      add(pie, BorderLayout.EAST);
      pie.setPreferredSize( new Dimension( 300, 300 ) );
      pie.repaint();
  }
} 
```

然后我简化了 paintComponent 方法以删除所有代码：

```
 protected void paintComponent(Graphics slice) {
        super.paintComponent(slice);

        slice.setColor( Color.RED );
        slice.fillRect( 0, 0, getWidth(), getHeight() );
    } 
```

最后，我将 JFrame 更改为可调整大小。这是在测试期间触发重绘的一种简单方法。通过这些更改，当我单击按钮时，我什么也看不到，但如果我调整窗口大小，我会看到红色框。

# vim - 如何在vim中打开一个新文件，但不是同一个文件

> ID：11549320
> 
> 赞同：2
> 
> 时间：2012-07-18T20:02:26.573
> 
> 标签：vim

例如，我如何打开一个我将用作文件模板的文件，但可能将它作为未保存的缓冲区打开？我不知道应该使用什么方法，但我希望能够在之后将其保存为应有的文件。

我的情况是一个 jekyll 博客，我有一个基本的帖子模板，并想从命令行在 vim 中打开它，这样我就可以开始帖子，然后`:w *filename.md*`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:32:37.233

使用`saveas`命令。假设您有一个名为`template.md`, open的帖子模板`template.md`，请进行一些编辑，然后不要使用`:w`, do `:sav newPost.md`。

无需切换缓冲区：现在您的缓冲区将包含文件`newPost.md`，并且`template.md`在文件系统上保持不变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T22:00:28.193

一种方法是使用`:read`命令或`:r`简称。例如`:r template.md`，将 的内容读`template.md`入当前缓冲区。

优点：

*   可以读取多个模板
*   可以使用任何缓冲区，包括未保存的缓冲区甚至暂存缓冲区
*   不必担心`template.md`意外保存文件
*   可以与`:!`读取 shell 命令输出的方法结合使用。例如`:r!ls`
*   使用范围 with`:r`在缓冲区中的特定点读取模板。例如`:10r template.md`将在第 10 行之后读入`template.md`。

缺点：

*   可能有一个额外的空行。这可以通过`:0d_`或任何您喜欢的删除行的方法轻松删除。

示例工作流程：

1.  创建缓冲区并在模板中读取

    ```
    :new
    :r template.md|0d_ 
    ```

2.  编辑缓冲区

3.  保存缓冲区

    ```
    :w a-great-new-file.md 
    ```

如需更多帮助，请参阅：

```
:h :r
:h :r!
:h :range 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T20:31:46.057

```
$ vim template.md
(edit)
:saveas filename.md 
```

或者

```
$ cp template.md filename.md && vim filename.md 
```

或者……我不确定我是否理解你的问题。

正常的工作流程是打开一个模板并“另存为...”。在 Vim 和其他所有编辑器中。那有什么问题？

或者您正在寻找[模板](http://www.vim.org/scripts/script_search_results.php?keywords=template&script_type=&order_by=rating&direction=descending&search=search)或[片段扩展](http://www.vim.org/scripts/script_search_results.php?keywords=snippet&script_type=&order_by=rating&direction=descending&search=search)插件？

# java - 将日期转换为毫秒

> ID：11549325
> 
> 赞同：0
> 
> 时间：2012-07-18T20:02:47.253
> 
> 标签：java

我有一个数据库，其中保存了我需要运行某些进程的时间 我做了一个查询，它给出了当前时间和我应该运行该进程的时间之间的差异 例如，我可能会得到这个数字 23 :49:44.835 这意味着我需要在大约 23 小时内运行该过程。我想在毫秒内完成这个过程，所以我做了这个

```
Date Date = (java.util.Date) (InMsgTstable[index][0]);
long Value3 = Date.getTime(); 
```

我得到的日期值是正确的，尽管它删除了存储在我的数据库中的毫秒值。我想以毫秒为单位获得这个小时数/分钟数等，所以我可以将该数字作为调度程序中的毫秒延迟。但是，这给了我以毫秒为单位的错误值。有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:10:14.567

如果您可以控制数据库表，我会将列类型更改为整数类型，并将时间戳以毫秒为单位存储为整数值。

这将允许您将该值视为时间戳`Date`并`Calendar`在本机使用，而无需处理数据库在日期和时间列上执行的转换。

**编辑**

从您上面的评论中，我看到您获得的值看起来像是自当天开始以来的毫秒数（根据定义为本地时间，因此请注意数据库中的时区值。）

您使用此时间戳创建的日期位于 1970 年 1 月 1 日，这不是您想要的。

您可以做的是创建一个默认为“现在”的日历对象，备份到一天的开始并获取该时间戳以添加到您从数据库中获得的值中，例如（未经测试）：

```
Calendar cal = Calendar.getInstance();

cal.set(Calendar.HOUR_OF_DAY, 0);
cal.set(Calendar.MINUTE, 0);
cal.set(Calendar.SECOND, 0);
cal.set(Calendar.MILLISECOND, 0);

long stamp = cal.getTime().getTime() + msgTableValue;

Date dat = new Date(stamp); 
```

这应该给你一个`Date`代表`msgTableValue`当天毫秒数的对象。

# java - 如何在 Android 运行时加载资源和类？

> ID：11549329
> 
> 赞同：0
> 
> 时间：2012-07-18T20:02:53.540
> 
> 标签：java, android, android-2.2-froyo

我正在开发一个 Android 应用程序，可以根据用户请求下载其他内容。这包括**图像**、**声音**和**类**。我需要的是**在运行时****加载**这些资源和类并**使用**它们。有没有办法我可以做到这一点？

 ****编辑：我需要为 Android 2.2 或更高版本执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:06:23.733

看看 AsyncTask 和 Loaders API。这将为您提供在后台线程中下载图像、资源的工具。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

[http://developer.android.com/guide/components/loaders.html](http://developer.android.com/guide/components/loaders.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:19:42.923

我会使用`AsyncTask`它们并将它们缓存到本地内存、SD 卡或硬盘驱动器。您可以`AsyncTask`在加载时启动，将数据缓存到内存，然后在需要时调用它。这里有几个链接可以帮助你：

`AsyncTask`：

[http://www.peachpit.com/articles/article.aspx?p=1823692&seqNum=3](http://www.peachpit.com/articles/article.aspx?p=1823692&seqNum=3)

缓存：

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

希望这可以帮助！****

# c# - 如何提高方法的性能

> ID：11549332
> 
> 赞同：2
> 
> 时间：2012-07-18T20:03:02.323
> 
> 标签：c#, wcf, c#-4.0, entity-framework-4

我有一个相当大的方法。我有一些 c# 计算，而且我正在调用 3/4 存储过程。构造 3/4 个对象，最后添加一个列表并返回该列表。

我的目标是提高这种方法的性能，以减少执行时间。

我的问题是，有什么方法可以让我检查方法的每个部分并找出哪个部分需要时间来执行？可能是一些 looging 什么的！

我正在使用 LINQ to EF。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:08:35.427

投资一个性能分析器，比如[Redgate 的 Ants](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)。一些更好的 Visual Studio 版本也附带一个。

至少，您可以尝试使用[System.Diagnostics.Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

来自 msdn：

```
static void Main(string[] args)
{
    Stopwatch stopWatch = new Stopwatch();
    stopWatch.Start();
    Thread.Sleep(10000);
    stopWatch.Stop();
    TimeSpan ts = stopWatch.Elapsed;

    string elapsedTime = String.Format("{0:00}:{1:00}:{2:00}.{3:00}",
        ts.Hours, ts.Minutes, ts.Seconds,
        ts.Milliseconds / 10);

    Console.WriteLine("RunTime " + elapsedTime);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T20:19:53.880

如果可能，您可以尝试并行执行存储过程。我已经看到这大大提高了性能，特别是如果您的存储过程只进行读取而不写入。

它可能看起来像这样：

```
ConcurrentBag<Result> results = new ConcurrentBag<Result>();

Parallel.Invoke(
                () => {
                    var db = new DatabaseEntities();  
                    Result result1 = db.StoredProcudure1();
                    results.Add(result1);
                }
                () => {
                    var db = new DatabaseEntities();  
                    Result result2 = db.StoredProcudure2();
                    results.Add(result2);
                }
                () => {
                    var db = new DatabaseEntities();  
                    Result result3 = db.StoredProcudure3();
                    results.Add(result3);
                }
);

return results; 
```

我在`ConcurrentBag`这里使用 a 而不是 a`List`因为它是线程安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:08:38.593

您正在寻找的是探查器 - 探查器运行您的程序并告诉您执行每行代码所花费的时间，以及执行时间占总执行时间的百分比。

[ANTS .Net Profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)是一个很棒的 C# 分析器，它相当昂贵，但它有 14 天的免费试用期 - 我认为这将非常适合您的需求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T20:09:13.533

你有几个选择。我发现自己使用秒表来测试这种东西。但是，在您做任何事情之前，您确定代码的性能还不够好。如果它没有损坏，请不要修复它通常是最好的建议。如果你仍然感兴趣，你可以做这样的事情：

```
Stopwatch sw = Stopwatch.StartNew();

// do some code stuff here

sw.Stop();

Console.WriteLine(sw.ElapsedTicks); 
```

sw 变量中还有秒、毫秒和其他测量值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T20:09:36.033

我的建议是让您使用[JetBrains dottrace](http://www.jetbrains.com/profiler/)它有一些非常有用的功能，可以指出热点并告诉您哪段代码花费了多长时间

PS：它救了我几次脖子

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T20:13:32.337

数据库访问通常比您可能进行的任何计算慢几个数量级（除非您尝试预测明天的天气）。因此，LINQ-to-EF 部分很可能是时间丢失的地方。

您可以使用分析器来分析程序。SQL-Server 有一个分析器，允许您监视查询。如果你想分析代码，谷歌搜索 .NET profilers，你会发现很多有免费许可证的。或者买一个，如果你觉得有用的话。[EQATEC 分析器](http://eqatec.com/Profiler/)对我来说非常有用。

如果你有一个大方法，你的代码结构很糟糕。制作一个大方法并不比将其拆分成更小的逻辑部分更快。较小的部分将更易于维护，并且代码分析器将产生更多有用的信息，因为它们通常只返回方法调用总数并且不显示单行代码的时间。

# php - 这是什么日期格式？（PHP Codeigniter 文件助手）

> ID：11549337
> 
> 赞同：0
> 
> 时间：2012-07-18T20:03:11.527
> 
> 标签：php, codeigniter

我正在尝试找出这个日期的格式！

```
 'date' => int 1342640973 
```

今天的日期是 18.07.2012

我从 CI File Helper 中的 get_file_info 函数中得到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:04:34.923

这是一个 unix 时间戳，它是自 1970 年 1 月 1 日午夜协调世界时 (UTC) 以来经过的秒数，不包括闰秒。

要在 PHP 中获取当前时间戳，您可以使用[time](http://php.net/time)并将时间戳转换为可以使用[date](http://php.net/date)的人类可读格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:12:16.987

### 这是一个*[unix时间戳](http://en.wikipedia.org/wiki/Unix_time)*！

您拥有的值表示自 1970 年 1 月 1 日（UTC）以来的日期/时间（以秒为单位），由于它的来源，它通常被称为“unix 时间戳”。

处理这种时间表示很容易在 PHP 中完成，有本地函数可以转换回格式。

* * *

[`time ()`](http://www.php.net/manual/en/function.time.php)将以指定的格式（*unix timestamp*）返回当前时间，将其转换为可以[`date`](http://www.php.net/manual/en/function.date.php)与适当格式字符串一起使用的可读字符串，如下例所示：

```
$unix_timestamp = 1342640973;
$now_utimestamp = time (); 

print_r (
  array (
    date ("Y-m-d G:i:s", $unix_timestamp),
    date ("Y-m-d G:i:s", $now_utimestamp)
  )
); 
```

^(我的系统上的输出：)

```
Array
(
    [0] => 2012-07-18 21:49:33
    [1] => 2012-07-18 22:18:43
) 
```

* * *

除非您告诉 PHP 它当前所在的时区（使用 php.ini 或等效项），否则您需要使用 function 指定[`date_default_timezone_set()`](http://se.php.net/manual/en/function.date-default-timezone-set.php)它，传递给它的 value [`date_default_timezone_get()`](http://se.php.net/manual/en/function.date-default-timezone-get.php)将尝试根据您的系统偏好设置它。

如果无法找到正确的匹配，则默认使用*UTC 。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:12:08.357

在代码点火器中使用

```
unix_to_human(TIMESTAMP) 
```

要获得人类可读的日期，需要包含日期助手

# javascript - JQuery 验证仅适用于提交的表单中的第一个元素。[打算验证所有]

> ID：11549338
> 
> 赞同：11
> 
> 时间：2012-07-18T20:03:12.340
> 
> 标签：javascript, jquery, validation, input

> JQuery 验证仅适用于提交的表单中的第一个元素，验证不会检查第二个元素。需要找出缺少的东西。交换 text1 和 date2 的输入，验证仍然适用于第一个。

```
<!DOCTYPE HTML>
<html lang="en-US">
<head><title>
</title>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.5.1.min.js'></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.js"></script>
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.5.5/jquery.validate.min.js"></script> 
<script type="text/javascript" src="http://jquery-multifile-plugin.googlecode.com/svn-history/r16/trunk/jquery.MetaData.js"></script> 
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/themes/base/jquery-ui.css"/>

<script type="text/javascript">
    $(document).ready(function () {
        $("#form1").validate();

        $(".date").datepicker({
            changeYear: true,
            dateFormat: 'dd/mm/yy',
            minDate: new Date('1990/01/01'),
            maxDate: '30Y'
        });
    });
    function test() {
        alert(document.getElementById("datetext").getAttribute("must"));
    }        
</script>
</head>
<body>
        <form method="post" action="WebForm1.aspx" id="form1">
           Text:<font color="red">* </font><input id="Text1" class="lvl {required:true,messages:{required:'blank not allowed.'}}"  /><br />
            Select Date2:<font color="red">* </font><input id="date2"  class="date {required:true,messages:{required:'Required:Need to enter 2 date.'}}" readonly="true" /><br />
            <input type="submit" value="Submit"/>
        </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-25T17:48:45.390

确保在`name`您的输入中包含一个属性。我相信它使用该`name`属性来构建其验证字段列表，并且由于您没有指定`name`属性，jquery 验证认为第二个字段与第一个字段同名。

例如，`<input id="Text1" name="Text1" />`

# c++ - 强名称 dll - 如何排除故障？

> ID：11549339
> 
> 赞同：0
> 
> 时间：2012-07-18T20:03:14.663
> 
> 标签：c++, visual-studio-2010, strongname

我已按照其他帖子和[http://msdn.microsoft.com/en-us/library/xwb8f617.aspx](http://msdn.microsoft.com/en-us/library/xwb8f617.aspx)的说明为我的 dll 命名，这是一个本地（非托管）C++ dll。但是，当我尝试验证时它仍然不是强命名时：

```
>sn.exe -v myStuff.dll
=> myStuff.dll does not represent a strongly named assembly 
```

我将我的 .snk 文件添加到项目中，并将该文件添加到 Properties->Linker->Advanced->KeyFile。

我应该如何排除故障？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T23:54:15.850

I thought I just read a question like this a moment ago. Someone had (rightly) stated that strong names are not applicable to native dlls.

I do hope you solve your issue, but in attempting to strongly name your native dll, you're barking up the wrong tree.

# objective-c - 从 UIImagePickerController 过渡到第二个 UIViewController

> ID：11549341
> 
> 赞同：1
> 
> 时间：2012-07-18T20:03:21.450
> 
> 标签：objective-c, ios, cocoa-touch

在 Objective-C 中仍然感觉很绿——构建我的第一个“真正的”项目并在早期遇到了架构障碍..

我想在一个完全“自定义”的环境中展示我的视图和导航——例如，我隐藏了所有内置的 UI 控件（例如 UINavigationController 或 UITabBar）。一个具体的例子（如标题所示）：从“主”视图直接移动到 UIImagePickerController，然后从 UIImagePickerController 直接移动到新的第三个视图。

以下是我正在使用的三个主要视图控制器：

*   **MainViewController**（UIViewController 的自定义子类，包含我的主导航，通常是我的主要或“父”控制器）
*   **ImageEditViewController**（UIViewController 的自定义子类，其中我将一些控件覆盖在存储的图像之上）
*   **UIImagePickerController**（苹果内置类）

有几种方法我可以想象（但我不知道如何做任何一种）：

1.  **使用 UINavigationController 或 UITabBar 实现**，但以某种方式隐藏系统 UI 控件并实现我自己的。我被阻止使用这种方法是因为 - 简单地说 -*我不知道如何隐藏系统 UI 控件*。
2.  **在代码中的特定点**手动调用控制器到控制器或视图到视图的转换。**我有点喜欢这种方法，但我无法找出在我的控制器之间实例化、管理和转换的最佳“方法”。我不知道的事情的例子：我如何从我的主视图控制器调用第二个视图控制器？如何直接从第二个视图控制器调用第三个视图控制器？（或者至少直接过渡到第三个！）**

 **我认为这里有一个简单的解决方案；只是关于在 Apple 的帮助类之外管理视图和视图控制器的知识我还没有学到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:07:49.627

您在说什么系统 UI 控件？导航栏？

你可以这样做`myNavigationController.navigationBarHidden = YES`；对于一个`UINavigationCOntroller`。

文档[在这里](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)。

至于您应该拥有的导航类型，这实际上取决于您的用例。您是否正在尝试实现层次结构或工作流程？那么也许导航控制器就是您想要的。每个视图控制器是否都是一个独立的部分，不一定遵循工作流程？然后标签栏控制器可以工作。

对于标签栏，您应该能够执行以下操作：

```
myTabBarController.tabBar.hidden = YES;
[[myTabBarController.view.subviews objectAtIndex:0] setFrame:CGRectMake(0, 0, 320, 480)]; // or whatever your screen dimensions are 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:10:01.613

1.隐藏导航栏，很简单：

```
self.navigationController.navigationBarHidden = YES; 
```

隐藏 TabBar 使用这个：

```
- (void) hideTabBar:(UITabBarController *) tabbarcontroller {

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];
for(UIView *view in tabbarcontroller.view.subviews)
{
if([view isKindOfClass:[UITabBar class]])
{
    [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
} 
else 
{
    [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
}

}

[UIView commitAnimations];

}

- (void) showTabBar:(UITabBarController *) tabbarcontroller {

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];
for(UIView *view in tabbarcontroller.view.subviews)
{

if([view isKindOfClass:[UITabBar class]])
{
    [view setFrame:CGRectMake(view.frame.origin.x, 431, view.frame.size.width, view.frame.size.height)];

} 
else 
{
    [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 431)];
}

}

[UIView commitAnimations]; 
 } 
```

2.

如果您想轻松地向后导航，您应该使用导航控制器，它允许您在完成后弹出视图控制器。或者你可以做这样的事情（在导航控制器之外）：

```
CustomViewController *controller = [[CustomViewController alloc] init];

[self presentModalViewController:controller animated:YES]; 
```**

# serialization - 如何简化我的反序列化框架？

> ID：11549342
> 
> 赞同：1
> 
> 时间：2012-07-18T20:03:22.563
> 
> 标签：serialization, d

我有一个序列化接口，旨在为我的应用程序封装 XML/JSON/二进制序列化之间的差异。它看起来像这样：

```
interface Serialization {
    bool isObject();
    int opApply(int delegate(string member, Serialization value) del); //iterate object
    ...
    int toInt();   //this part is ugly, but without template member overloading, I
    long toLong(); //figure out any way to apply generics here, so all basic types
    ...            //have a toType primitive
    string toString();
}
class JSONSerialization : Serialization {
    private JSON json;
    ...
    long toLong() {
        enforce(json.type == JSON_TYPE.NUMBER, SerializationException.IncorrectType);
        return cast(long)json.toNumber();
    }
    ...
} 
```

因此，我随后设置的是一组用于注册类型反序列化器并调用它们的模板：

```
...
registerTypeDeserializer!Vec3(delegate Vec3(Serialization s) {
    return Vec3(s[0].toFloat, s[1].toFloat, s[2].toFloat);
});
...
auto v = parseJSON("some file").deserialize!Vec3;
...
registerTypeDeserializer!Light(delegate Light(Serialization s) {
    return new Light(s["intensity"].toFloat, s["position"].deserialize!Vec3);
}); 
```

这适用于结构和简单类，并且使用新的参数标识符元组和参数默认值元组，我什至应该能够添加自动反序列化器生成。但是，我不太喜欢基本类型和用户定义类型之间的不一致，更重要的是，复杂类型必须依赖全局状态来获取引用：

```
static MaterialLibrary materials;
registerTypeDeserializer!Model(delegate Model(Serialization s) {
    return new Model(materials.borrow(s["material"].toString), ...);
}); 
```

那是它真正崩溃的地方。因为我不能（没有寄存器反序列化器函数的扩散）将其他参数传递给反序列化器，所以我很难避免丑陋的全局工厂。我考虑过消除反序列化模板，并为每个用户定义的类型要求一个反序列化函数（它可以接受多个参数），但这对于例如 POD 结构来说似乎需要做很多工作。

那么，我怎样才能简化这个设计，并希望避免大量的样板反序列化器，同时仍然允许我适当地注入对象工厂，而不是全局分配它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:35:44.040

可以使用`readf`\读取基本类型`formattedRead`，因此您可以创建一个使用`formattedRead`它的包装函数，否则它使用来自所需类型的静态函数来读取值。像这样的东西：

```
auto _readFrom(T)(string s){
    static if(__traits(compiles,(readf("",cast(T*)(null))))){
        T result;
        formattedRead(s,"%s",&result);
        return result;
    }else{
        return T.readFrom(s);
    }
} 
```

# php - 正则表达式匹配到值之间的字符

> ID：11549344
> 
> 赞同：-1
> 
> 时间：2012-07-18T20:03:31.690
> 
> 标签：php, regex

我正在尝试匹配某个字符串，该字符串将是一个名称

```
preg_match("/^[a-zA-Z]{1, 10}/", "stackoverflow"); 
```

但这给了我一个错误，如果字符串大于值 a 且小于值 b，我将如何匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:05:02.883

太多的空格。

```
/^[a-zA-Z]{1,10}/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:11:37.207

***两个问题：***

1.  内部不允许有空格`{x,y}`
2.  `preg_replace`你不应该使用`preg_match`

***您的代码应该是：***

```
$input = "Frank";
$output = preg_replace("/^[a-zA-Z]{1,10}/", "stackoverflow", $input);   
print $output; 
```

# ruby-on-rails - 使用 Capybara 检查复选框

> ID：11549345
> 
> 赞同：4
> 
> 时间：2012-07-18T20:03:37.097
> 
> 标签：ruby-on-rails, rspec, capybara

使用 Capybara，我无法在我的表单上选择一个复选框。

在我的请求规范中，我尝试过：

```
check("First Name")
page.check("First Name")
page.check("pickem_option_ids_10")
find(:css, "#pickem_option_ids_11[value='11']").set(true)
find(:css, "#pickem_option_ids_11").set(true) 
```

我的表格中的片段：

```
<div class="control-group check_boxes optional">
   <label class="check_boxes optional control-label">Options:</label>
   <div class="controls">
    <label class="checkbox">
     <input class="check_boxes optional" id="pickem_option_ids_10" name="pickem[option_ids][]" type="checkbox" value="10" />First Name
    </label>
    <label class="checkbox">
     <input class="check_boxes optional" id="pickem_option_ids_11" name="pickem[option_ids][]" type="checkbox" value="11" />Middle Name
    </label>
   </div>
</div> 
```

我从[这个 SO 线程](https://stackoverflow.com/questions/8297624/how-to-check-a-checkbox-in-capybara)中得到了一些 find() 的想法。

我在其他规范中取得了一些成功，其中我有一个带有 Active 标签的复选框，我只是说`check("Active")`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T03:12:14.633

今天遇到了同样的问题，我环顾四周，这似乎有效：

```
find(:xpath, "//input[@value='10']").set(true) 
```

当然，你可以用你想要的任何东西替换“10”——只需检查你的 HTML 并使用你的值。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:25:55.930

Capybara 找不到复选框`"First Name"`，因为您的 html 错误。你的 html 应该看起来像

```
<label class="checkbox" for="pickem_option_ids_10">First Name</label>
 <input class="check_boxes optional" id="pickem_option_ids_10" name="pickem[option_ids][]" type="checkbox" value="10" /> 
```

在您的视图代码中

```
= label_tag "pickem_option_ids_10", "First Name"
= check_box_tag "pickem_option_ids_10", 10 
```

然后`check("First Name")`应该工作。

否则你可以`find("#pickem_option_ids_10").check`

# symfony1 - 由于需要 sfGuardAuth 身份验证，Facebook 无法与 Symfony 应用程序通信

> ID：11549348
> 
> 赞同：1
> 
> 时间：2012-07-18T20:03:46.667
> 
> 标签：symfony1, doctrine, facebook-like, symfony-1.4, sfguard

我正在 Symfony 1.4 和 Doctrine 1.2 上建立一个音乐网站。我正在尝试在我的页面上集成 facebook 插件（例如，发送、发布消息按钮）。例如，我希望用户能够在我的歌曲模块中的歌曲页面上点赞一首歌曲。但问题是，我使用 sfDoctrineGuard 来保护我的应用程序上除登录页面之外的所有模块。因此，如果用户登录并使用 facebook 的点赞按钮在歌曲页面上点赞歌曲，因为该歌曲模块受 sfGuardAuth 保护，facebook API 无法与之对话并被转发到登录页面。这意味着我的应用程序上的所有喜欢都会发布在 Facebook 活动源上，就好像用户喜欢我的登录页面一样。

有没有办法在 sfGuard 中构建一个异常，以便来自 facebook 域的任何流量都可以访问该页面？有解决方法吗？我希望能够在 facebook 墙上显示我的安全页面中的所有 facebook 元数据，无论喜欢哪一首歌。如果我禁用所有 sfGuard 安全性，它工作正常。

任何帮助都会很棒，因为我很困惑并且没有找到其他人遇到这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:16:02.007

好吧，如果您想允许来自 Facebook 的请求能够绕过您的 sfGuard 安全性，这可能是一个巨大的安全漏洞。如果有人在 Facebook 上单击该链接，它也可以访问您的网站，而无需登录。

您可能会通过调整抓取您页面的 Facebook 机器人来找到解决方法。爬虫的用户代理是：`"facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)"`. 因此，通过查看用户代理可以很容易地允许访问其请求。**但是**，今天任何人都可以轻松地欺骗用户代理。

也许你必须找到其他方法。我想有一种简单的页面，每个人都可以访问，并且在其中显示最少的信息（比如只有艺术家和歌曲名称而无法播放。但只是为了确保，如果有人没有登录尝试查看页面，它不会重定向到登录页面，而是重定向到这个轻页面。你明白了吗？

然后，您可以放置​​一个巨大的按钮，让新人注册以查看完整页面。

无论如何，无论如何你会发现，你应该使用过滤器（in `filters.yml`）来实现它。过滤器在任何操作之前执行。因此，它是进行此类检查的理想场所。

您将找到有关过滤器的信息：

*   在[官方](http://www.symfony-project.org/reference/1_4/en/12-Filters) [网站上](http://www.symfony-project.org/gentle-introduction/1_4/en/06-Inside-the-Controller-Layer#chapter_06_filters)（它们是 2 个链接）
*   [这里](http://webcache.googleusercontent.com/search?q=cache%3auQ-PsYIlwhQJ%3ablog.tigregroup.com/programming/creating-an-ssl-redirect-filter-in-symfony/&hl=fr&gl=fr&prmd=imvns&strip=1)是 ssl 要求的实现（抱歉是 googlecache 页面）
*   [这里](http://www.finalconcept.com.au/article/view/symfony-execution-filters)是一个基本的实现

**编辑：**

我会那样做。首先，创建一个名为“facebook bot”的用户，并将其 id 放在`/apps/frontend/config/app.yml`：

```
all:
   facebook_bot_id: 56 // sf_guard_user_id 
```

然后创建一个简单的过滤器`lib/filter/facebookBotFilter.php`

```
<?php

class facebookBotFilter extends sfFilter
{
  public function execute ($filterChain)
  {
    $context    = $this->getContext();
    $controller = $context->getController();
    $request    = $context->getRequest();
    $user       = $context->getUser();

    // get the user agent
    $pathArray = $request->getPathInfoArray();
    $useragent = isset($pathArray['HTTP_USER_AGENT']) ? $pathArray['HTTP_USER_AGENT'] : '';

    if (preg_math('/facebookexternalhit', $useragent))
    {
      $member = Doctrine_Core::getTable('sfGuardUser')->find(sfConfig::get('app_facebook_bot_id'));
      // logged in the facebook bot
      $user->signIn($member);
    }

    // execute next filter
    $filterChain->execute();
  }
} 
```

不要忘记启用过滤器`apps/frontend/config/filters.yml`：

```
rendering: ~

facebookBotFilter:
  class: facebookBotFilter

security:  ~ 
```

# audio - CKeditor 的非 Flash 音频插件

> ID：11549352
> 
> 赞同：2
> 
> 时间：2012-07-18T20:03:53.897
> 
> 标签：audio, plugins, mp3, ckeditor, ckfinder

我正在寻找用于 ckeditor 的非基于 Flash 的音频插件。我尝试制作自己的自定义插件，但没有成功。我更愿意找到一个预制插件。

理想情况下，我想上传一个 mp3 并能够使用基于非 Flash 的播放器（js、jquery 等）放置在页面上。

我试图尽可能远离闪存以获得最佳的移动兼容性。

当前设置 = ckeditor + ckeditor

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-10T12:08:14.493

[http://ckeditor.com/addon/Audio](http://ckeditor.com/addon/Audio) 如果您仍然需要它，请检查一下

# git - 如何防止在 git 中推送大型二进制 blob？

> ID：11549357
> 
> 赞同：6
> 
> 时间：2012-07-18T20:04:03.670
> 
> 标签：git, binaryfiles, githooks

我有一个中央 git 存储库，我自己和几个合作者会定期从中推送和拉取。过去我不小心提交了一个大的二进制 blob，这需要 rebase 才能完全删除，这对每个人来说都是一种痛苦，所以我想防止将来发生这种情况。是否可以在远程存储库中设置一个钩子来检查被推送文件的文件大小（无论是添加新文件还是更新现有文件）并拒绝文件超过阈值大小的推送，比如 2MB？

重要的是，我希望能够容忍已经大于 2MB 且未被触及的现有文件（因此，如果 2MB 文件已经在存储库中，则不应拒绝推送，仅当推送添加 2MB 文件或将现有文件增加到 2MB 时）。另外，我希望钩子在远程端执行，所以我不必担心客户端不必设置钩子。

编辑：由于一个推送可以包含多个提交，即使是一个带有大文件的提交也会将其卡在存储库中，我想防止包含 /any commit/ 的推送增长或添加 >=2MB 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T20:09:07.093

听起来[预接收挂钩](https://www.kernel.org/pub/software/scm/git/docs/githooks.html)将是此检查的正确位置。这个钩子在推送的服务器端执行，并且可以访问足够的信息来实现文件大小检查。

> *这个钩子由远程存储库上的git-receive-pack*调用，当在本地存储库上完成*git push时会发生这种情况。*就在开始更新远程存储库上的 refs 之前，调用了 pre-receive 钩子。它的退出状态决定了更新的成功或失败。

# javascript - 自定义信息窗口

> ID：11549359
> 
> 赞同：-1
> 
> 时间：2012-07-18T20:04:22.260
> 
> 标签：javascript, google-maps-api-3, infowindow

是否可以更改 InfoWindow 的边框颜色、对齐方式、填充和其他属性？我已经找了一个星期了，但我总是在[这里](http://gmaps-samples-v3.googlecode.com/svn/trunk/infowindow_custom/infowindow-custom.html)。而且它不提供代码。

这是我的代码。

```
 //Declare an infoWindow variable - shows when a marker is tapped/clicked
        var infoWindow = new google.maps.InfoWindow;

        // Change this depending on the name of your PHP file
        downloadUrl("outputXML.php", function(data)
        {
            var xml = data.responseXML;
            var markers = xml.documentElement.getElementsByTagName("marker");
            for (var i = 0; i < markers.length; i++) {
            var name = markers[i].getAttribute("name");
            var address = markers[i].getAttribute("address");
            var type = markers[i].getAttribute("type");
            var point = new google.maps.LatLng(
                    parseFloat(markers[i].getAttribute("lat")),
                    parseFloat(markers[i].getAttribute("lng")));
            var html = "<b>" + name + "</b> <br/>" + address;
            var icon = customIcons[type] || {};
            var marker = new google.maps.Marker({
                map: map,
                position: point,
                icon: icon.icon,
                title:name
                });
            bindInfoWindow(marker, map, infoWindow, html);
            }
       });               

        function bindInfoWindow(marker, map, infoWindow, html) {
            google.maps.event.addListener(marker, 'click', function() {
              infoWindow.setContent(html);
              infoWindow.open(map, marker);
            });
          }

          function downloadUrl(url, callback) {
            var request = window.ActiveXObject ?
                new ActiveXObject('Microsoft.XMLHTTP') :
                new XMLHttpRequest;

            request.onreadystatechange = function() {
              if (request.readyState == 4) {
                request.onreadystatechange = doNothing;
                callback(request, request.status);
              }
            };

            request.open('GET', url, true);
            request.send(null);
          }//END FUNCTION BINDINFOWINDOW

            function doNothing() {} //For request.onreadystatechange 
```

顺便说一句，我正在从在线数据库中获取这些值，我们不必介意，它们都工作正常，唯一的问题是如何自定义 infoWindow。

请帮我。谢谢。

ADD：我忘了说我会把它插入到一个android应用程序中。我正在使用网络视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:13:18.343

您传递给 an 的内容`InfoWindow`可能是：文本、HTML 或 DOM 元素。默认情况下，`InfoWindow`它的大小适合您传递的任何内容，因此以您描述的方式控制内容的最佳方法是创建一个`div`，为 分配一个 CSS 类`div`，然后您将完全控制您的`InfoWindow`内容的外观。

此外，如果您想更好地控制窗口结构本身的实际外观，您可能需要考虑使用[InfoBubble 实用程序库](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#InfoBubble)作为标准`InfoWindow`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:57:13.087

[查看此url](http://gmaps-samples-v3.googlecode.com/svn/trunk/infowindow_custom/infowindow-custom.html)的示例代码，

在此代码中，InfoBox 从 Google Maps API 扩展 GOverlay 类，并动态创建 div 并绘制到地图中。

另一个[示例页面](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html)

```
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps JavaScript API v3 Example: Info Window Custom</title>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

/* An InfoBox is like an info window, but it displays
 * under the marker, opens quicker, and has flexible styling.
 * @param {GLatLng} latlng Point to place bar at
 * @param {Map} map The map on which to display this InfoBox.
 * @param {Object} opts Passes configuration options - content,
 *   offsetVertical, offsetHorizontal, className, height, width
 */
function InfoBox(opts) {
  google.maps.OverlayView.call(this);
  this.latlng_ = opts.latlng;
  this.map_ = opts.map;
  this.offsetVertical_ = -195;
  this.offsetHorizontal_ = 0;
  this.height_ = 165;
  this.width_ = 266;

  var me = this;
  this.boundsChangedListener_ =
    google.maps.event.addListener(this.map_, "bounds_changed", function() {
      return me.panMap.apply(me);
    });

  // Once the properties of this OverlayView are initialized, set its map so
  // that we can display it.  This will trigger calls to panes_changed and
  // draw.
  this.setMap(this.map_);
}

/* InfoBox extends GOverlay class from the Google Maps API
 */
InfoBox.prototype = new google.maps.OverlayView();

/* Creates the DIV representing this InfoBox
 */
InfoBox.prototype.remove = function() {
  if (this.div_) {
    this.div_.parentNode.removeChild(this.div_);
    this.div_ = null;
  }
};

/* Redraw the Bar based on the current projection and zoom level
 */
InfoBox.prototype.draw = function() {
  // Creates the element if it doesn't exist already.
  this.createElement();
  if (!this.div_) return;

  // Calculate the DIV coordinates of two opposite corners of our bounds to
  // get the size and position of our Bar
  var pixPosition = this.getProjection().fromLatLngToDivPixel(this.latlng_);
  if (!pixPosition) return;

  // Now position our DIV based on the DIV coordinates of our bounds
  this.div_.style.width = this.width_ + "px";
  this.div_.style.left = (pixPosition.x + this.offsetHorizontal_) + "px";
  this.div_.style.height = this.height_ + "px";
  this.div_.style.top = (pixPosition.y + this.offsetVertical_) + "px";
  this.div_.style.display = 'block';
};

/* Creates the DIV representing this InfoBox in the floatPane.  If the panes
 * object, retrieved by calling getPanes, is null, remove the element from the
 * DOM.  If the div exists, but its parent is not the floatPane, move the div
 * to the new pane.
 * Called from within draw.  Alternatively, this can be called specifically on
 * a panes_changed event.
 */
InfoBox.prototype.createElement = function() {
  var panes = this.getPanes();
  var div = this.div_;
  if (!div) {
    // This does not handle changing panes.  You can set the map to be null and
    // then reset the map to move the div.
    div = this.div_ = document.createElement("div");
    div.style.border = "0px none";
    div.style.position = "absolute";
    div.style.background = "url('http://gmaps-samples.googlecode.com/svn/trunk/images/blueinfowindow.gif')";
    div.style.width = this.width_ + "px";
    div.style.height = this.height_ + "px";
    var contentDiv = document.createElement("div");
    contentDiv.style.padding = "30px"
    contentDiv.innerHTML = "<b>Hello World! </b>";

    var topDiv = document.createElement("div");
    topDiv.style.textAlign = "right";
    var closeImg = document.createElement("img");
    closeImg.style.width = "32px";
    closeImg.style.height = "32px";
    closeImg.style.cursor = "pointer";
    closeImg.src = "http://gmaps-samples.googlecode.com/svn/trunk/images/closebigger.gif";
    topDiv.appendChild(closeImg);

    function removeInfoBox(ib) {
      return function() {
        ib.setMap(null);
      };
    }

    google.maps.event.addDomListener(closeImg, 'click', removeInfoBox(this));

    div.appendChild(topDiv);
    div.appendChild(contentDiv);
    div.style.display = 'none';
    panes.floatPane.appendChild(div);
    this.panMap();
  } else if (div.parentNode != panes.floatPane) {
    // The panes have changed.  Move the div.
    div.parentNode.removeChild(div);
    panes.floatPane.appendChild(div);
  } else {
    // The panes have not changed, so no need to create or move the div.
  }
}

/* Pan the map to fit the InfoBox.
 */
InfoBox.prototype.panMap = function() {
  // if we go beyond map, pan map
  var map = this.map_;
  var bounds = map.getBounds();
  if (!bounds) return;

  // The position of the infowindow
  var position = this.latlng_;

  // The dimension of the infowindow
  var iwWidth = this.width_;
  var iwHeight = this.height_;

  // The offset position of the infowindow
  var iwOffsetX = this.offsetHorizontal_;
  var iwOffsetY = this.offsetVertical_;

  // Padding on the infowindow
  var padX = 40;
  var padY = 40;

  // The degrees per pixel
  var mapDiv = map.getDiv();
  var mapWidth = mapDiv.offsetWidth;
  var mapHeight = mapDiv.offsetHeight;
  var boundsSpan = bounds.toSpan();
  var longSpan = boundsSpan.lng();
  var latSpan = boundsSpan.lat();
  var degPixelX = longSpan / mapWidth;
  var degPixelY = latSpan / mapHeight;

  // The bounds of the map
  var mapWestLng = bounds.getSouthWest().lng();
  var mapEastLng = bounds.getNorthEast().lng();
  var mapNorthLat = bounds.getNorthEast().lat();
  var mapSouthLat = bounds.getSouthWest().lat();

  // The bounds of the infowindow
  var iwWestLng = position.lng() + (iwOffsetX - padX) * degPixelX;
  var iwEastLng = position.lng() + (iwOffsetX + iwWidth + padX) * degPixelX;
  var iwNorthLat = position.lat() - (iwOffsetY - padY) * degPixelY;
  var iwSouthLat = position.lat() - (iwOffsetY + iwHeight + padY) * degPixelY;

  // calculate center shift
  var shiftLng =
      (iwWestLng < mapWestLng ? mapWestLng - iwWestLng : 0) +
      (iwEastLng > mapEastLng ? mapEastLng - iwEastLng : 0);
  var shiftLat =
      (iwNorthLat > mapNorthLat ? mapNorthLat - iwNorthLat : 0) +
      (iwSouthLat < mapSouthLat ? mapSouthLat - iwSouthLat : 0);

  // The center of the map
  var center = map.getCenter();

  // The new map center
  var centerX = center.lng() - shiftLng;
  var centerY = center.lat() - shiftLat;

  // center the map to the new shifted center
  map.setCenter(new google.maps.LatLng(centerY, centerX));

  // Remove the listener after panning is complete.
  google.maps.event.removeListener(this.boundsChangedListener_);
  this.boundsChangedListener_ = null;
};

function initialize() {
    var myOptions = {
      zoom: 8,
      center: new google.maps.LatLng(-33.397, 150.644),
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      sensor: 'true'
    }
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(-34, 150),
        map: map
    });
    google.maps.event.addListener(marker, "click", function(e) {
      var infoBox = new InfoBox({latlng: marker.getPosition(), map: map});
    });
    google.maps.event.trigger(marker, "click");
  }
</script>
</head>
<body style="margin:0px; padding:0px;" onload="initialize()">
  <div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html> 
```

# bash - bash 有自己的 echo、printf、[ 函数吗？

> ID：11549364
> 
> 赞同：1
> 
> 时间：2012-07-18T20:04:39.947
> 
> 标签：bash, shell

当我使用 strace 跟踪 nice.sh 脚本的输出时，我看到了大量的子进程。

```
strace -ff -o nice.o ./nice.sh 
```

不错的.sh

```
#!/bin/bash

while /usr/bin/[ 1 ]
do
    echo ..;
done; 
```

另一方面，如果我运行下面的脚本，我看不到任何分叉的子进程：

```
#!/bin/bash

while [ 1 ]
do
    echo ..;
done; 
```

echo、/bin/echo 和 printf、/usr/bin/printf 也是如此。这是否意味着某些命令嵌入到了 bash 中？如果是，其他命令是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:05:51.267

是的，bash 和其他 shell 每个都有许多内置函数。

[这是](http://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html)bash 的列表以及每个内置的随附文档。

# android - 在日志中打印当前返回堆栈

> ID：11549366
> 
> 赞同：14
> 
> 时间：2012-07-18T20:04:44.147
> 
> 标签：android, user-interface, back-stack

有没有办法在 Android 应用程序中打印当前任务的当前返回堆栈？特别是，我想了解在调用 onDestroy() 后某个活动何时从堆栈中弹出。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-08-23T19:54:37.977

要改进 Paul 的答案并查看与您的应用相关的数据，您只能执行以下操作：

```
adb shell dumpsys activity package <your.package.name> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-09-09T08:39:51.623

使用下面的命令可以显示tasks和activity backstack

```
adb shell dumpsys activity activities | sed -En -e '/Running activities/,/Run #0/p' 
```

结果如下所示：

```
Running activities (most recent first):
  TaskRecord{29b17859 #1134 A=com.google.android.dialer U=0 sz=1}
    Run #0: ActivityRecord{180fd6be u0 com.google.android.dialer/.extensions.GoogleDialtactsActivity t1134}
Running activities (most recent first):
  TaskRecord{7764a61 #1054 A=com.google.android.googlequicksearchbox U=0 sz=1}
    Run #1: ActivityRecord{2900994b u0 com.google.android.googlequicksearchbox/com.google.android.launcher.GEL t1054}
  TaskRecord{4aa804c #1129 A=com.android.systemui U=0 sz=1}
    Run #0: ActivityRecord{1816140b u0 com.android.systemui/.recents.RecentsActivity t1129} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-17T12:22:16.430

如果只想查看 Activity backstack，请使用以下设置命令

> 亚行外壳
> 
> dumpsys 活动 | grep -i 运行

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-18T20:06:37.010

您可以为此使用 adb：

```
adb shell dumpsys activity 
```

# c++ - 确保输入唯一的输入并将其存储在数组中

> ID：11549368
> 
> 赞同：0
> 
> 时间：2012-07-18T20:04:50.447
> 
> 标签：c++

这个程序可以吗，还是可以改进（但很简单）？如何确保没有输入重复数字？

```
int n;
int array[9];

cout<<"Enter Number Between 9-0 Only"<<endl;
for(int i = 0; i<=10; i++){
    cout<<"Enter Number" <<(i+1)<<endl;
    cin >> n;
    if((n >= 0) && (n <=9)){
       array[i]=n;
     }
        else{
        cout<<"Numbers from 0-9 only\n"<<endl;

        break;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:24:32.640

（编辑）完成，编译代码

要检查这些数字是否用于更高的性能，请尝试以下操作（使用 Jack Radcliffe 的工作代码）：

```
#include <iostream>
using namespace std;

int main()
{
  int n = 0;
  int array[9] = {0};

  bool isUsed[10] = {0};

  for(int i = 0; i < 9; i++) 
  {
    cout << "Enter Number " << (i + 1) << endl;
    cin >> n;

    if((n >= 0) && (n <= 9))
    {
      if (isUsed[n] == false)
      {
        array[i] = n;
        isUsed[n] = true;
      }

      else
      {
        cout << "Number has already been used." << endl;
        i--;
      }
    }

    else 
    {
      cout << "Numbers from 0-9 only." << endl;
      i--;
    }
  }

  return 0;
} 
```

使用这种简单的代码，优化并不是完全必要的，但这似乎是一种练习，那么为什么不练习优化代码呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:13:14.373

大部分都很好，尽管有两个问题很突出。

首先，您有一个大小为 9 的数组，但您正在接收 11 个数字，因为您从 0 开始 for 循环并一直到 10。

其次，既然你有它，所以如果输入的数字不在 0 和 9 之间，包括 0 和 9，for 循环就会中断。这意味着如果输入了无效数字，则将少于 9 个数字放入数组中。更改整个循环以阅读此内容，您应该会很好：

```
for(int i = 0; i < 9; i++) {
    cout << "Enter Number " << (i + 1) << endl;
    cin >> n;
    if((n >= 0) && (n <= 9))
       array[i] = n;
    else {
        cout << "Numbers from 0-9 only\n" << endl;
        i--;
    }
} 
```

整个火部分是正确的，但我删除了 else 语句中的中断并添加了 i--。我补充说，当提示用户重新输入号码时，输入号码将位于正确的索引处。

我希望这可以帮到你。

# selenium - Selenium 不会将文本驱动到 VM 上的文本框中

> ID：11549379
> 
> 赞同：0
> 
> 时间：2012-07-18T20:05:25.193
> 
> 标签：selenium, webdriver, automated-tests

在 c# 的 Visual Studio 中编写 selenium webdriver 代码。设置网格集线器和虚拟机。

所以我的代码将作业发送到我的一个 VMS 并加载浏览器和网页就好了。在本地运行测试时，我的“Username.Sendkey”命令运行良好。由于某种原因，它无法在我的虚拟机上运行。

我觉得 webdriver 在页面完全加载之前完成了它的运行，并且有机会输入用户名和密码。

有没有办法让 webdriver 运行，然后**等待**页面完全加载，以便它可以正确捕获 sendkey commads？

# java - 调用同步方法时线程调用非同步实例方法

> ID：11549383
> 
> 赞同：0
> 
> 时间：2012-07-18T20:05:43.753
> 
> 标签：java, multithreading, synchronization, thread-safety

```
public class Common {      
    public synchronized void synchronizedMethod1() {
        System.out.println("synchronizedMethod1 called");
        try {
            Thread.sleep(1000);
            } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println("synchronizedMethod1 done");
    }
    public void method1() {
        System.out.println("Method 1 called");
        try {
            Thread.sleep(1000);
            } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println("Method 1 done");
    }
}

public class MyThread extends Thread {
    private int id = 0;
    private Common common;

    public MyThread(String name, int no, Common object) {
        super(name);
        common = object;
        id = no;
    }

    public void run() {
        System.out.println("Running Thread" + this.getName());
        try {
            if (id == 0) {
                common.synchronizedMethod1();
                } else {
                common.method1();
            }
            } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        Common c = new Common();
        MyThread t1 = new MyThread("MyThread-1", 0, c);
        MyThread t2 = new MyThread("MyThread-2", 1, c);
        t1.start();
        t2.start();
    }
} 
```

输出：

```
Running ThreadMyThread-1  
synchronizedMethod1 called  
Running ThreadMyThread-2  
Method 1 called  
synchronizedMethod1 done  
Method 1 done 
```

当我调用 synchronizedMethod1 时，我想找到一种方法来阻止 method1() 运行。除非我弄错了，所有方法都被调用，Java 在运行时和运行前编译它们，不管它是否同步。

我应该改用 Lock 对象和/或不也使 method1() 成为同步方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:10:14.997

> 当我调用 synchronizedMethod1 时，我想找到一种方法来阻止 method1() 运行

最简单的方法是 make `method1()`also be `synchronized`。这将意味着这两种方法都将导致对`Common`它们正在调用的实例的锁定。只有一个线程可以调用`synchronizedMethod1()`或调用`method1()`.

> 除非我弄错了，所有方法都被调用，Java 在运行时和运行前编译它们，不管它是否同步。

我不明白这个问题。您真的不必担心 JVM 的编译或优化阶段。

> 我应该改用 Lock 对象吗？

通常制作方法`synchronized`被认为不如使用`private final`锁对象好。锁定对象只是让你的锁更细粒度。例如，使用方法锁定，日志消息和其他不需要保护的语句也会如此`synchronized`。但是如果目标是锁定整个方法，那么同步方法就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:25:09.800

如果你想要`method1`并且`synchronizedMethod1`是互斥的，那么你需要用相同的锁来保护它们。无论是使用 a`Lock`还是简单地调用`synchronize`同一个 Object 实例，结果都大致相同。

如果您希望允许执行多个线程`method1`但不希望在`synchronizedMethod1`被调用时执行，则需要 a`ReadWriteLock`来完成此操作。

```
public class Common {     
    ReadWriteLock rwLock = new ReentrantReadWriteLock();

    public void synchronizedMethod1() {
        rwLock.writeLock().lock();
        try {
            System.out.println("synchronizedMethod1 called");
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            System.out.println("synchronizedMethod1 done");
        } finally {
            rwLock.writeLock().unlock();
        }
    }
    public void method1() {
        rwLock.readLock().lock();
        try {
            System.out.println("Method 1 called");
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            System.out.println("Method 1 done");
        } finally {
            rwLock.readLock().unlock();
        }
    }
} 
```

# charts - 我如何在报告中下载按钮？

> ID：11549385
> 
> 赞同：1
> 
> 时间：2012-07-18T20:05:45.323
> 
> 标签：charts, cognos, cognos-8, cognos-bi, cognos-tm1

我想在 cognos 中做一个报告。我把图表放在我的报告中。当我运行报告时，如果我右键单击图表，我会看到下载图表选项。我想在我的报告中使用此选项（下载图表）。我的意思是我不想右键单击图表。我想看到一个按钮，当我点击它时，我会下载图表。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:08:09.103

报告工作室中没有为此的内置按钮。您需要在 html 项目中插入一个按钮，如果您的消费者正在运行 IE，您可以使用

```
 document.execCommand('SaveAs','true','http://chartsfilename.jpg') 
```

作为它运行的javascript。您还需要一种动态派生图表 url 的方法。我想你需要一些 javascript 来做这个，目前没有一个可以测试的环境我会指向你[http://www.ironsidegroup.com/2011/09/27/ibm-cognos-and-javascript-% E2%80%93-part-ii/](http://www.ironsidegroup.com/2011/09/27/ibm-cognos-and-javascript-%E2%80%93-part-ii/)

# xpages - 在 xpages 中拖放数据源字段会导致设计器 8.5.3 崩溃

> ID：11549388
> 
> 赞同：0
> 
> 时间：2012-07-18T20:05:54.217
> 
> 标签：xpages

当我尝试将字段从数据面板拖放到自定义控件或 XPage 时，Designer 8.5.3 崩溃。偶尔滴落会起作用，但没有明显的原因或一致性。大多数时候（98%）设计师会崩溃。

我目前在企业映像笔记本电脑上使用 Windows XP。对于我尝试使用的数据库，我遇到了类似于下面列出的错误。

由于“无法在该位置创建资源：jnsf:/Local/databasetest.nsf/bin”，该项目未经过验证。修复问题，然后尝试刷新这个项目并验证它，因为它可能是不一致的 databasetest.nsf 未知的 JavaScript 问题

我已阅读相关帖子并尝试了这些建议，但它们似乎不起作用。任何帮助或指出正确的方向将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:43:06.937

您是否已经与 IBM 建立了 PMR？如果没有，请向他们提供崩溃日志、转储、...

# java - 此 Java 代码如何转换 IP 地址？

> ID：11549390
> 
> 赞同：3
> 
> 时间：2012-07-18T20:06:01.387
> 
> 标签：java

在下面的示例代码中，有人可以更详细地解释下面的行实际上在做什么，就像您向初学者解释它一样。

```
for (byte octet : octets) {
        result <<= 8;
        result |= octet & 0xff;
    }

public class Example {
public static long ipToLong(InetAddress ip) {
    byte[] octets = ip.getAddress();
    long result = 0;
    for (byte octet : octets) {
        result <<= 8;
        result |= octet & 0xff;
    }
    return result;
}

public static void main(String[] args) throws UnknownHostException {
    long ipLo = ipToLong(InetAddress.getByName("192.200.0.0"));
    long ipHi = ipToLong(InetAddress.getByName("192.255.0.0"));
    long ipToTest = ipToLong(InetAddress.getByName("192.200.3.0"));

    System.out.println(ipToTest >= ipLo && ipToTest <= ipHi);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:13:51.763

*   `byte[] octets = ip.getAddress();`-> 将整个 IP 地址存储为字节数组

*   `for (byte octet : octets) {}`-> 将字节数组拆分为八位字节并对其进行迭代

*   `result <<= 8 (shorthand for result = result<<8)`->**左移 8 位**将二进制结果移动 8 位，并添加 8 个尾随零。（将结果的值乘以 2^8）

*   `result |= octet & 0xff; (same as result|=octet which is shorthand for result = result | or octect`->**按位 ORing**`result` ，与本例中的加法相同，因为在上一步之后，我们在 的末尾有 8 个零。

**编辑**（感谢@jtahlborn）->当字节转换为int时，需要使用0xFF进行按位与运算以避免符号扩展。

**例子**

`192.200.3.0`是有问题的 IP 地址。最终值为This是通过以下方式生成的

```
192*(2^24) + 200*(2^16) + 3*(2^8) + 0*(2^0)
3221225472 + 13107200 + 768 = 3234333440 
```

现在您的代码执行相同的操作，但在二进制中使用按位移位 192 是`11000000`. 首先，它被添加到 result = 0; 结果是现在`11000000`。然后将其左移 8 位（有效地将其乘以 2^8）结果是`11000000 00000000`

现在，将二进制值 200`11001000`相加，生成结果`11000000 11001000` 继续这个过程，直到得到以下 32 位数字， `11000000 11001000 00000011 00000000`转换为相同的 3234333440

# java - Java：如何限制对特定类的方法的访问？

> ID：11549394
> 
> 赞同：10
> 
> 时间：2012-07-18T20:06:17.860
> 
> 标签：java, class

这是一个例子：

```
class A 
{
   List l = new List ();
   list.insert("x");
}

class List
{
   ...
   public void insert ()
   {
      /*insertion occurs*/
   }
   ...
} 
```

是否有可能将 insert() 方法保持为公共状态，但仅限制对类 A 的访问，以便只有在从 A 调用时，其他类才能访问它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T12:20:35.547

我会将调用该方法的对象作为参数传递，即

```
list.insert("x", this); 
```

然后检查传递的Object是否是A类的Instance

```
 public void insert (String x, Object o)
   {
      if(o instanceof ClassA){
         /*insertion occurs*/
      }
   } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T20:11:02.510

如果方法是公开的，那么每个人都可以访问它。像您这样访问控制的技巧是通过接口公开一组公共操作，将辅助操作添加到实现接口的私有类，并使您的用户编程到接口，而不是类。

这是一个例子：

```
public interface MyList {
    Object elementAt(int i);
}
public class A {
    private static class MyListImpl implements MyList {
        public Object elementAt(int i) {
            ...
        }
        public void insert(Object element) {
            ...
        }
    }
    private final MyListImpl list = new MyListImpl();
    public MyList getList() { return list; }
    public void insert(Object o) { list.insert(o); }
} 
```

使用场景：

```
A a = new A();
a.insert(123);
a.insert("quick brown fox");
MyList lst = a.getList();
System.out.println(lst.elementAt(0));
System.out.println(lst.elementAt(1)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-02T07:53:51.597

是的，您可以将调用对象作为参数传递，并在实际代码之前检查 insert() 方法。

```
 public void insert(Object obj){
    if(obj instanceof A){
      //your code block
    }
  } 
```

请注意，这将允许所有扩展 A 的类也可以调用 insert。如果您只想限制 A 类，请添加附加检查。

```
 public void insert(Object obj){
    if((obj instanceof A) && obj.getClass().getSimpleName().equals("A")){
      //your code block
    }
  } 
```

我们也可以仅使用条件“obj.getClass().getSimpleName().equals(“A”)”来实现第二种情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T20:10:24.783

使用访问修饰符可以做的最好的事情是使方法包私有（删除`public`关键字）并仅将这两个类保留在同一个包中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T19:01:55.397

```
package problems;

public class Problem1 {
    public static void main(String[] args) {
        B b = new B();
        b.methodInB();
        C c = new C();
        c.methodNotInB();
    }
}

class A {
    public void onlyB() {
        StackTraceElement[] stackTraceElements = Thread.currentThread()
                .getStackTrace();
        if (!problems.B.class.getCanonicalName().equals(
                stackTraceElements[stackTraceElements.length - 2]
                        .getClassName())) {
            System.err.println("You are not authorized to call me!!");
            return;
        }
        System.out.println("You are authorized to call me!!");
    }
}

class B {
    public void methodInB() {
        A a = new A();
        a.onlyB();
    }
}

class C {
    public void methodNotInB() {
        A a = new A();
        a.onlyB();
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-18T20:31:00.327

如果前面的答案中的所有“内部类”内容都让您感到困惑，那么还有另一种可能更直观的方法（假设您已经了解了`extends`关键字和继承）。您可以简单地制作`insert()`方法`protected`而不是`public`制作`class A`扩展`List`。例如：

```
public class List {
   ...
   protected void insert() {
      //insertion occurs
   }
   ...
}

public class A extends List {
   ...
} 
```

只要没有其他类扩展 List，只有类型的对象`A`才能`List`使用该`insert()`方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-18T20:17:26.277

把它作为内部类放在 A 中，或者你可以做另一件事......让 insert 接受一个类型为 Object 的参数，并在它的开头检查参数的类型是否为 A .... 当你调用它时发送调用对象......也许这不是一个好主意，但它会做你想做的事

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-18T22:52:37.363

将其放入允许的类并使其私有。

# asp.net - 在 asp.net/Azure 中创建虚拟路径

> ID：11549404
> 
> 赞同：1
> 
> 时间：2012-07-18T20:06:59.340
> 
> 标签：asp.net, azure, path, virtual

我们正在将 Web 应用程序迁移到 MS Azure 环境中，并且不得不更改照片的存储位置。Azure 使用我们通过映射的云驱动器访问的 blob 环境。我们在应用程序启动时动态设置驱动器号。所有这些工作正常，图片保存正确。

我们需要为这些图片设置一个 URL 路径，以便用户可以查看它们。在旧应用程序中，这很好，因为它们存储在应用程序环境中，但现在它们在外部。如何为[http://myapp.com/photos/abc.jpg](http://myapp.com/photos/abc.jpg)之类的东西设置映射将指向 h:\abc.jpg？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:09:46.343

听起来您需要做的就是在 IIS 中在应用程序的根目录中创建一个虚拟目录，该目录`photos`映射到`h:\`.

为此，请打开 IIS 管理器，右键单击您的站点，然后选择*添加虚拟目录*...。将别名设置为`photos`并将物理路径设置为`h:\`。

# android - 总是在调用 onPause() 时调用 onStop()

> ID：11549406
> 
> 赞同：3
> 
> 时间：2012-07-18T20:07:16.283
> 
> 标签：android

是否有可能调用 onPause()，然后立即调用 onResume()？换句话说，在调用它的 onPause() 之后，Activity 是否总是必须经过 onStop()、onStart() 和 onResume()？

活动生命周期文档说这是可能的，但是触发它的用户操作是什么？任何人都可以创建一个活动 JUnit 测试来证明这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T20:11:03.397

如果`Activity`没有被另一个人完全遮挡，`Activity`则`onStop`不会被调用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T20:13:33.917

是的，通常会发生`onPause()`-> `onResume()`-> `onPause()`->`onResume()`循环。

请参阅[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)文档。

如果一个`Activity`完全被遮挡（`Activity`例如被另一个遮挡），它可能会被停止，但如果它只是被另一部分遮挡`Activity`（例如，设置为对话框主题），那么它将简单地暂停，然后在“弹出”时恢复`Activity`已经关了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:11:12.563

[这里](http://developer.android.com/reference/android/app/Activity.html)的图片很好地讲述了每一件事

`onResume`Activity之后可以直接去`onPause`。

# parsing - Powershell：解析结构化文本文件并保存为 .CSV

> ID：11549411
> 
> 赞同：1
> 
> 时间：2012-07-18T20:07:30.403
> 
> 标签：parsing, powershell, text, csv

我对 Powershell 很陌生。只使用了大约 2 周。

我有一个结构如下的文件：

```
服务名称：WSDL
服务号：14234321885
服务解析路径：/gman/wsdlUpdte
服务端点：
-------------------------------------------------- ------------------------------
服务名称：数据服务
服务编号：419434324305
服务解析路径：/widgetDate_serv/WidgetDateServ
服务端点：  
http://servername.company.com:1012/widgetDate_serv/WidgetDateServ
-------------------------------------------------- ------------------------------
服务名称：搜索服务
服务编号：393234543546
服务解析路径：/ProxyServices/SearchService
服务端点：  
http://servername.company.com:13010/Services/SearchService_5_0
http://servername2.company.com:13010/Services/SearchService_5_0
-------------------------------------------------- ------------------------------
服务名称：工人
服务号：14187898547
服务解析路径：/ProxyServices/Worker
服务端点：  
http://servername.company.com:131009/Services/Worker/v9
-------------------------------------------------- ------------------------------

```

我想解析文件并在单个列 (CSV) 中包含服务名称、服务 ID、服务解析路径和服务端点（有时包含多个或不包含值）。

除了使用 Get-Content 和遍历文件之外，我什至不知道从哪里开始。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-13T14:31:26.800

使用 PowerShell 5，您可以使用绝妙的命令“convertfrom-string”

```
$template=@'
Service name: {ServiceName*:SearchService} 
Service ID: {serviceID:393234543546} 
Service resolution path: {ServicePath:/ProxyServices/SearchService} 
Serivce endpoints:
http://{ServiceEP*:servername.company.com:13010/Services/SearchService_5_0}
http://{ServiceEP*:servername2.tcompany.tcom:13011/testServices/SearchService_45_0}
--------------------------------------------------------------------------------
Service name: {ServiceName*:Worker} 
Service ID: {serviceID:14187898547} 
Service resolution path: {ServicePath:/ProxyServices/Worker} 
Serivce endpoints:
http://{ServiceEP*:servername3.company.com:13010/Services/SearchService}
--------------------------------------------------------------------------------
Service name: {ServiceName*:WSDL} 
Service ID: {serviceID:14234321885} 
Service resolution path: {ServicePath:/gman/wsdlUpdte} 
Serivce endpoints:
http://{ServiceEP*:servername4.company.com:13010/Services/SearchService_5_0}
--------------------------------------------------------------------------------
'@

#explode file with template
$listexploded=Get-Content -Path "c:\temp\file1.txt" | ConvertFrom-String -TemplateContent $template

#export csv 
$listexploded |select *, @{N="ServiceEP";E={$_.ServiceEP.Value -join ","}} -ExcludeProperty ServiceEP | Export-Csv -Path "C:\temp\res.csv" -NoTypeInformation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:20:57.717

试试这个：

1.  将文件内容读取为一个字符串
2.  将其拆分为 81 个连字符
3.  在冒号字符上拆分每个拆分项目并取最后一个数组项目
4.  为每个项目创建新对象

    ```
    $pattern = '-'*81  
    $content = Get-Content D:\Scripts\Temp\p.txt | Out-String
    $content.Split($pattern,[System.StringSplitOptions]::RemoveEmptyEntries) | Where-Object {$_ -match '\S'} | ForEach-Object {

    $item = $_ -split "\s+`n" | Where-Object {$_}

        New-Object PSobject -Property @{
            Name=$item[0].Split(':')[-1].Trim()
            Id = $item[1].Split(':')[-1].Trim()
            ResolutionPath=$item[2].Split(':')[-1].Trim()
            Endpoints=$item[4..($item.Count)]
        } | Select-Object Name,Id,ResolutionPath,Endpoints
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T21:41:36.750

尝试这个：

```
Get-Content | ? { $_ -match ': ' } | % { $_ -split ': ' } | Export-Csv Test.csv; 
```

基本上可以归结为：

1.  将所有文本内容作为数组获取
2.  过滤包含“：”的行
3.  对于剩下的每一行，将其拆分为'：'
4.  将对象数组导出到名为*test.csv的 CSV 文件*

希望这能为您指明正确的方向。

注意：代码未经测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T04:03:04.663

这是用记录和记录（等等）解析文件的一般方法，它使用`switch`带有正则表达式和 begin()、Process()、end() 函数模板的强大 PowerShell 指令。

加载它，调试它，纠正它......

```
function Parse-Text
{
  [CmdletBinding()]
  Param
  (
    [Parameter(mandatory=$true,ValueFromPipeline=$true)]
    [string]$ficIn,
    [Parameter(mandatory=$true,ValueFromPipeline=$false)]
    [string]$ficOut
  )

  begin
  {
    $svcNumber = 0
    $urlnum = 0
    $Service = @()
    $Service += @{}
  } 

  Process 
  {
    switch -regex -file $ficIn
    {
      # End of a service
      "^-+"
      {
        $svcNumber +=1
        $urlnum = 0
        $Service += @{}
      }
      # URL, n ones can exist
      "(http://.+)" 
      {
        $urlnum += 1
        $url = $matches[1]
        $Service[$svcNumber]["Url$urlnum"] = $url
      }
      # Fields
      "(.+) (.+): (.+)" 
      {
        $name,$value = $matches[2,3]
        $Service[$svcNumber][$name] = $value
      }
    }
  }

  end 
  {
    #$service[3..0] | % {New-Object -Property $_ -TypeName psobject} | Export-Csv c:\Temp\ws.csv
    # Get all the services except the last one (empty -> the file2Parse is teerminated by ----...----)
    $tmp = $service[0..($service.count-2)] | Sort-Object @{Expression={$_.keys.count };Descending=$true}
    $tmp | % {New-Object -Property $_ -TypeName psobject} | Export-Csv $ficOut
  }
}

Clear-Host
Parse-Text -ficIn "c:\Développements\Pgdvlp_Powershell\Apprentissage\data\Text2Parse.txt" -ficOut "c:\Temp\ws.csc"
cat "c:\Temp\ws.csv" 
```

# php - fputcsv 不会在 CSV 文件中写入任何数据

> ID：11549414
> 
> 赞同：3
> 
> 时间：2012-07-18T20:07:42.180
> 
> 标签：php, csv, fputcsv

在我的网站中，我正在从 mysql 数据创建一个表，然后现在我想在表中添加一个导出按钮按钮，以便用户能够将数据下载为 CSV 文件。

为此，我编写了虚拟表单：

```
<form action="<?=$_SERVER['PHP_SELF'];?>" method="post">
    <input type="submit" name="submit" value="Click Me">
</form> 
```

在 php 文件的顶部，我有：

```
if(isset($_POST['submit'])) {
    export();
} 
```

在我的导出函数中，我有一些 mysql 的东西，我正在创建一个数组并将数据推入其中，然后：

```
$header = array('name', 'date', 'total', 'success', 'opens', 'clicks', 'success_rate', 'open_rate', 'CTO', 'CTR')
$fp = fopen('exportme2.csv', 'w');
fputcsv($fp, $header);

foreach ($data as $lines) {
        fputcsv($fp, $lines);
}
fclose($fp); 
```

单击导出按钮后，我将拥有 exportme2.csv 文件，但它是空的！数据可能是错误的，所以不会有任何东西，但至少我应该有标题名称。

你能帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:15:55.170

首先，改变

```
$fp = fopen('exportme2.csv', 'w'); 
```

到

```
$fp = fopen('exportme2.csv', 'a'); 
```

as`'w'` *截断*文件，其中`'a'`创建或*附加*文件。

然后您应该使用`flock()`以确保两个不同的用户（线程）不要尝试同时写入文件：

```
if (!flock($fp, LOCK_EX)) {
    error_log('Cannot get lock!');
} else {
    fputcsv($fp, $header);

    foreach ($data as $lines) {
        fputcsv($fp, $lines);
    }
} 
```

如果这不能解决问题，那么您的代码中有一个对我来说并不明显的错字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:15:59.193

这对我来说很好：

```
$header = array('name', 'date', 'total', 'success', 'opens', 'clicks', 'success_rate', 'open_rate', 'CTO', 'CTR');
$fp = fopen('exportme2.csv', 'w');
fputcsv($fp, $header);

/*foreach ($data as $lines) {
    fputcsv($fp, $lines);
}*/
fclose($fp); 
```

您的上述脚本在 fclose 之前停止，因此它对您的文件进行了窃听……您应该在启用 E_ALL E_STRICT 的情况下进行开发！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:22:51.093

它没有发布任何内容，因为它提交了页面，因此当页面刷新时，我的所有数组都变为空。

# javascript - 如何使用从json读取的表嵌套表

> ID：11549416
> 
> 赞同：0
> 
> 时间：2012-07-18T20:07:43.117
> 
> 标签：javascript, jquery, jquery-selectors

我得到了这个 json 对象，它的结构类似于：

```
vendor have name, phone, fax, contacts
contacts have firstName, lastName, title, phone, email 
```

我已经在表格中创建了第一级，但我没有如何创建第二个嵌套级别

```
function getData(vType) {
                $.getJSON('/LocalApp/VendorController', {
                    vendorType : vType,
                    time : "2pm"
                }, function(vendorsJson) {
                    $('#vendors').find("tr:gt(0)").remove();

                    var vendorTable = $('#vendors');

                    $.each(vendorsJson, function(index, vendor) {
                        $('<tr>').appendTo(vendorTable).append(
                                $('<td>').text(vendor.name)).append(
                                $('<td>').text(vendor.phone)).append(
                                $('<td>').text(vendor.fax)).append(
                                '<table class="contactTable"><tr><th>First Name</th><th>Last Name</th><th>Title</th><th>Phone</th><th>E-Mail</th></tr></table>');

                    });
                });
            } 
```

那么如何在 jQuery 代码中将 vendor.contacts 添加为嵌套表？我知道我的代码不干净，与 Java 相比，jquery 让我感到困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:49:55.523

除非您对可以随页面发送的数量非常有限（也就是说，每一个 K 数据都对您不利），否则我认为 jQuery 不适合这种事情。

我认为 JSON + something => HTML 作为模板，所以我通常使用像[Handlebars](http://handlebarsjs.com/)这样的 JavaScript 模板工具来做那种事情。这是更自然的合身。此外，您现在可以尝试使用[Try Handlebars.js](http://tryhandlebarsjs.com/)之类的网站，以交互方式制作一个模板，该模板采用您的一些示例 JSON 并输出您想要的 HTML。

很可能，一个带有另一个 {{#each}} 的 {{#each}} 可以处理嵌套 JSON 到您所追求的任何 HTML 的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:21:09.910

不确定您是否想要供应商的单元格中的表格，但尝试这样的事情......

```
var contactTableHtml = '<table class="contactTable"><tr><th>First Name</th><th>Last Name</th><th>Title</th><th>Phone</th><th>E-Mail</th></tr></table>';

var vendorTableContent = $.map(vendorsJson,function (index, vendor) {

    var contactTableContentHtml = $.map(vendor.contacts,function (index, contact) {
        return "<tr><td>" + contact.firstName + "</td><td>" + contact.lastName + "</td><td>" + contact.title + "</td><td>" + contact.phone + "</td><td>" + contact.email + "</td></tr>";
    }).join("");

    return '<tr>' +
        '<td>' + vendor.name + '</td>' +
        '<td>' + vendor.phone + '</td>' +
        '<td>' + vendor.fax + '</td>' +
        '<td>' + contactTableHtml + contactTableContentHtml + '</td>' +
        '</tr>';

}).join("");

vendorTable.append(vendorTableContent); 
```

首先，我将子表创建为字符串，然后将其添加到主表中。我还建议创建一个大的 html 字符串并将其添加到 DOM 一次。这比每次调用 $('...') 要快得多。

**PS。**无法测试它，但如果您遇到错误，请告诉我。

# node.js - 咖啡脚本的连接中间件？

> ID：11549419
> 
> 赞同：6
> 
> 时间：2012-07-18T20:07:46.927
> 
> 标签：node.js, coffeescript, express, connect

是的，我知道`connect-assets`。但我希望`coffeescript`可以根据要求编译这些文件。就像在`stylus`中间件中一样。

```
app.use(stylus.middleware(
  src: __dirname + "/assets",
  dest: __dirname + "/public"
)) 
```

那么......有什么可以这样工作的吗？

**编辑**：我也知道`connect.compiler`。但它已在最新版本的`connect`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T12:30:04.943

我刚刚发布了一个新模块[npm install connect-coffee-script](https://github.com/wdavidw/node-connect-coffee-script)，它就是这样做的。提供了文档和样本以及[介绍文章](http://www.adaltas.com/blog/2012/07/24/coffee-script-connect-middleware/)。

这是自述文件中的一个示例：

```
 var coffeescript = require('connect-coffee-script');
    var connect = require('connect');

    var app = connect();

    app.use(coffeescript({
        src: __dirname,
        dest: __dirname + '/public',
        bare: true
    }));

    app.use(connect.static(__dirname + '/public'));

    app.listen(3000) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:16:03.667

```
app.use(express.compiler({
  src: __dirname + "/assets",
  dest: __dirname + "/public",
  enable: ['coffeescript']
})); 
```

如果您同时使用两者，还可以将手写笔添加到启用数组！

我使用快递 2.5.9

# ruby-on-rails - Rails 控制台中的统一常量错误与使用 Mechanize 包装器的 irb

> ID：11549425
> 
> 赞同：0
> 
> 时间：2012-07-18T20:08:32.050
> 
> 标签：ruby-on-rails, gem, gemfile, rails-console

基础层面的第一个问题 - Ruby 中未初始化的常量错误是什么意思？我来自 Objective-c 背景，如果这有助于提供一些上下文。

其次，我在 Rails 中运行一个 rake 任务，它抛出了上述错误。具体来说，当我使用“tor-privoxy”gem 时会发生错误，这是一个 Mechanize 包装器，允许通过 tor 代理进行自动浏览。

我正在使用 github 上提供的以下示例代码：[https ://github.com/pirj/tor-privoxy](https://github.com/pirj/tor-privoxy)

```
agent ||= TorPrivoxy::Agent.new '127.0.0.1', '', {8118 => 9050} do |agent|
    sleep 10
    puts "New IP is #{agent.ip}"
    page = agent.get('https://www.example.com/')
end
>> New IP is 72.141.125.115
>> NameError: uninitialized constant Net::HTTP::Persistent::SSLReuse::HTTPResponse
    from /Library/Ruby/Gems/1.8/gems/net-http-persistent-2.3.3/lib/net/http/persistent/ssl_reuse.rb:115:in `connect'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/net/http.rb:553:in `do_start'
    from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/net/http.rb:548:in `start'
    from /Library/Ruby/Gems/1.8/gems/net-http-persistent-2.3.3/lib/net/http/persistent.rb:405:in `connection_for'
    from /Library/Ruby/Gems/1.8/gems/net-http-persistent-2.3.3/lib/net/http/persistent.rb:616:in `request'
    from /Library/Ruby/Gems/1.8/gems/mechanize-2.1/lib/mechanize/http/agent.rb:264:in `fetch'
    from /Library/Ruby/Gems/1.8/gems/mechanize-2.1/lib/mechanize.rb:319:in `get'
    from /Library/Ruby/Gems/1.8/gems/tor-privoxy-0.1.1/lib/tor-privoxy/agent.rb:16:in `send'
    from /Library/Ruby/Gems/1.8/gems/tor-privoxy-0.1.1/lib/tor-privoxy/agent.rb:16:in `method_missing'
    from (irb):4
    from /Library/Ruby/Gems/1.8/gems/tor-privoxy-0.1.1/lib/tor-privoxy/agent.rb:11:in `call'
    from /Library/Ruby/Gems/1.8/gems/tor-privoxy-0.1.1/lib/tor-privoxy/agent.rb:11:in `initialize'
    from (irb):1:in `new'
    from (irb):1 
```

另一方面，如果我在 irb 中运行相同的代码，它不会抛出未初始化的常量错误。我确保我的 gemfile 包含“tor-privoxy”并运行了“bundle install”命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:51:05.697

如果您想在 Mac 上使用 ruby​​，我建议您使用 rvm 或 rbenv 之类的工具来管理您的 ruby​​ 安装。

您遇到的错误似乎是已知的。看看这个 github 问题：[https ://github.com/thrillcall/net-http-persistent/commit/9f770b4660f1c9c433c1f3b50ba24dd4f1f71cf8](https://github.com/thrillcall/net-http-persistent/commit/9f770b4660f1c9c433c1f3b50ba24dd4f1f71cf8)

# javascript - 由标签触发的 div 转换

> ID：11549428
> 
> 赞同：0
> 
> 时间：2012-07-18T20:08:36.377
> 
> 标签：javascript, jquery, html, css

我正在玩这个我发现的小提琴，它非常接近我想要做的事情：

[http://jsfiddle.net/5N3YK/20/](http://jsfiddle.net/5N3YK/20/)

唯一的事情是，当我尝试将标签更改为`section`标签时，`div`它会中断，而且我希望 div**淡出而不是 slide**。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:15:01.167

**更新小提琴：http:** [//jsfiddle.net/UDt7q/22/](http://jsfiddle.net/UDt7q/22/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:21:18.867

试试 - [http://jsfiddle.net/UDt7q/21/](http://jsfiddle.net/UDt7q/21/)

```
(function($) {
    $.fn.Fader = function() {
        this.each(function() {
            $('a').bind('click', function(e) {
                e.preventDefault();
                $( "#hello div" ).fadeOut();
                $( "#hello div" + $(this).attr('href') ).fadeIn();
            })
        });
    }
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:24:19.427

这应该适合你：http: [//jsfiddle.net/5N3YK/23/](http://jsfiddle.net/5N3YK/23/)

我更改了代码的功能以隐藏`div`s 而不是将它们推离页面，但想法是一样的。

`section`s 现在`div`是 s，它们会褪色而不是滑动。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T20:16:14.033

要使某些东西“出现”，您可以使用

```
$('.selector').fadeIn(); 
```

来自 Jquery。类似地，你可以 show()、hide()、fadeOut()

# javascript - 从 Windows 8 JS 应用程序获取仅 HTTP cookie

> ID：11549432
> 
> 赞同：1
> 
> 时间：2012-07-18T20:09:05.643
> 
> 标签：javascript, cookies, windows-8, microsoft-metro, windows-runtime

我正在制作一个 Javascript Windows 8 应用程序，用户在该应用程序中连接到我的服务器并登录。目前，我正在尝试使用 XmlHttpRequest 对象来执行此操作（特别是 WinJS.xhr），但是当我得到 getAllResponseHeaders() 的输出时， Set-Cookie 标头不存在（因为它是一个 Http-only cookie）。

有没有办法从 JS Windows 8 应用程序中获取仅限 http 的 cookie？

非常感谢所有帮助，我总是接受答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:57:06.350

事实证明，Windows 8 应用程序已经能够通过响应标头中的 XMLHttpRequest 获取仅限 HTTP 的 cookie。但是，系统会以与 iOS 相同的方式自动处理 cookie。这似乎很合乎逻辑，因为编码器不应该负责 cookie 处理，底层框架会这样做。

# java - 速度 - #springFormInput 和自定义 ID

> ID：11549438
> 
> 赞同：3
> 
> 时间：2012-07-18T20:09:16.190
> 
> 标签：java, spring, velocity

每当我使用`#springFormInput`喜欢：

```
#springFormInput("command.name") 
```

我得到 ID 设置为的标记`name`：

```
<input type="text" id="name" ... /> 
```

在许多情况下，我想要像“类别”或“名称”这样的短名称，而且我不喜欢在 ID 中包含它们（这应该是唯一的）。如何指示 Spring 为元素使用不同的 ID？

我试过类似的东西：

```
#springFormInput("command.name" 'id="myid" data-zaza="test"') 
```

...但我的 ID 仍然被覆盖：

```
<input type="text" id="name" data-zaza="test" ... /> 
```

我希望它改为发射`id="myid"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T23:29:26.373

你不能。看一下宏的代码：

```
#**
 * springFormInput
 *
 * Display a form input field of type 'text' and bind it to an attribute
 * of a command or bean.
 *
 * @param path the name of the field to bind to
 * @param attributes any additional attributes for the element (such as class
 *    or CSS styles or size
 *
 *#
#macro( springFormInput $path $attributes )
    #springBind($path)
    <input type="text" id="${status.expression}" name="${status.expression}"
                            value="$!status.value" ${attributes}#springCloseTag()
#end 
```

因此，如您所见，使用`#springFormInput("command.name" 'id="myid" data-zaza="test"')`实际生成：

```
<input type="text" id="name" id="myid" data-zaza="test" /> 
```

但是velocity会清除重复的ID，只留下第一个（`id="name"`）。

当您进行测试时，这种“消除”行为变得清晰。例如，手动声明：

```
<input type="text" id="testA" id="testB" id="testC" name="myTest" value="test!"> 
```

生成的 HTML 中的内容是：

```
<input type="text" id="testA" name="myTest" value="test!"> 
```

作为替代方案，您可以显式使用宏代码，生成您需要的内容：

```
#springBind("command.name")
<input type="text" id="myid" name="${status.expression}"
                         value="$!status.value" data-zaza="test"#springCloseTag() 
```

`${status.expression}`并`$!status.value`设置在`#springBind`宏中，不用担心它们。

# tsql - 在 TSQL 中查询 @bitmap binary(1)？

> ID：11549439
> 
> 赞同：0
> 
> 时间：2012-07-18T20:09:16.567
> 
> 标签：tsql

在 TSQL 的一个存储过程中，我遇到了代码

```
Alter procedure Name
@parameter1 ,
@parameter2 ,
..........

if (substring(@bitmap,1,1) & 1 = 1) or  //what does this mean?
 (substring(@bitmap,1,1) & 2 = 2) or
 (substring(@bitmap,1,1) & 4 = 4) or
 (substring(@bitmap,1,1) & 128 = 128) or
 (substring(@bitmap,2,1) & 1 = 1)

[Column1] = case substring(@bitmap,1,1) & 1 when 1 then @parameter1 else [Column1] end,
[Column2] = case substring(@bitmap,1,1) & 2 when 2 then @parameter2 else [Column2] end,
[Column3] = case substring(@bitmap,1,1) & 4 when 4 then @parameter3 else [Column3] end,
[Column4] = case substring(@bitmap,1,1) & 8 when 8 then @parameter4 else [Column4] end,
[Column5] = case substring(@bitmap,1,1) & 16 when 16 then @parameter5 else [Column5] end,
[Column6] = case substring(@bitmap,1,1) & 32 when 32 then @parameter6 else [Column6] end,
[Column7] = case substring(@bitmap,1,1) & 64 when 64 then @parameter7 else [Column7]end,
[Column8] = case substring(@bitmap,1,1) & 128 when 128 then @parameter8 else [Column8] end,
[Column9] = case substring(@bitmap,2,1) & 1 when 1 then @parameter9 else [Column9] end,
[Column10] = case substring(@bitmap,2,1) & 2 when 2 then @parameter10 else [Column10] end 
```

谷歌搜索我发现它有助于动态构建过程。但我仍然有几个疑问。

```
(substring(@bitmap,1,1) & 1 = 1) or  //what does this mean?
substring(@bitmap,2,1) & 1 when 1 then @parameter9 else [Column9] end,//what does this mean

case SUBSTRING(@bitmap,1,1) & 256 when 256 or
case SUBSTRING(@bitmap,1,1) & 512 when 512 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:18:56.717

@bitmap 是一个位掩码，它定义了哪些 @parameterN 值用于覆盖 ColumnN 值的（现有？）值。

该表达式`(value & x) when x`检查是否在 @bitmap 中设置了给定位，因为 x 是 2 的幂。

该表达式`CASE expression WHEN value THEN x ELSE y END`等效于 IF ELSE 语句（或 C# 中的 if/switch 等）。

# asp.net-mvc-routing - 如何处理asp.net web api中的查询字符串参数

> ID：11549447
> 
> 赞同：0
> 
> 时间：2012-07-18T20:10:13.273
> 
> 标签：asp.net-mvc-routing, asp.net-web-api

这是我如何进行路由设置。

```
 routes.MapHttpRoute(
                        name: "Authors",
                        routeTemplate: "api/authors",
                        defaults: new { controller = "authors" }
                    ); 
```

控制器动作方法

```
// GET /api/authors/
    public string GetAuthors(string author_ids)
    {
        return data;
    } 
```

网址[http://site.com/api/authors?author_ids=1](http://site.com/api/authors?author_ids=1)实际上调用了控制器动作，但是当我不传递查询字符串参数时，它说找不到控制器动作匹配。

定义路由时如何处理可选的查询字符串参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T10:43:42.787

您可以具体如下：

```
routes.MapHttpRoute(
    name: "Authors",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

和 Action 可以是：

```
// GET /api/authors/?XXXX
public IEnumerable<string> GetAuthors( [FromUri] String author_ids)
{
    return data;
} 
```

这将只匹配*查询字符串*。**[FromUri]**允许从查询字符串中获取参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:20:06.287

```
// GET /api/authors/
    public IEnumerable<string> GetAuthors()
    {
        return data;
    } 
```

您将需要定义一个不带参数的操作。

但是，最好将 id 作为可选添加到您的路由中：

```
routes.MapHttpRoute(
                        name: "Authors",
                        routeTemplate: "api/{controller}/{id}",
                        defaults: new { id = RouteParameter.Optional }
                    ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T10:59:29.553

您可能会特别喜欢：

```
routes.MapHttpRoute(
    name: "Authors",
    routeTemplate: "api/{controller}/{author_ids}",
    defaults: new { author_ids = RouteParameter.Optional }
); 
```

# sql - sql server 2005 查看结果

> ID：11549450
> 
> 赞同：-1
> 
> 时间：2012-07-18T20:10:16.547
> 
> 标签：sql, sql-server, sql-server-2005

我在 sql server 代理中创建一个作业。我想查看结果。不仅仅是它是否有效，而是发生了什么。

例如，如果我的步骤命令是从 table1 中选择 *。我想查看表格的每一行和每一列。它存储在哪里或如何查看结果？

谢谢。

鲍勃·阿瓦隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:50:17.323

我想到了。

在步骤下，编辑步骤，高级，输出文件；创建一个输出文件。

感谢您的回复。

鲍勃

# sql-server-2005 - 使用 SQLXMLBulkLoad，由于列不接受 NULL 值而出现异常

> ID：11549454
> 
> 赞同：0
> 
> 时间：2012-07-18T20:10:29.137
> 
> 标签：sql-server-2005, exception, vb.net-2010, sqlxml, bulk-load

我正在尝试使用 Visual Studio 2010 在 VB.NET 中使用 SQLXMLBulkLoad 对象模型将 XML 数据批量插入 SQL Server 2005 Express。

当加载器访问我的 .xml 文件中不包含值的元素时，它会引发错误，因为 SQL Server 中的相应表列设置为不包含空值。这是设计使然，而不是插入 NULL 我需要加载程序插入一个空格。我不知道该怎么做，因为这是我第一次使用 BulkLoad。有什么建议么？

error.xml 文件文本：

```
 <?xml version="1.0" ?> 
    <Result State="FAILED">
     <Error>
       <HResult>0x80004005</HResult> 
       <Description> <![CDATA[ No data was provided for column 'blah' on table 'blah', and this column cannot contain NULL values.]]></Description>
       <Source>General operational error</Source> 
       <Type>FATAL</Type> 
     </Error>
   </Result> 
```

编辑： [http ://social.msdn.microsoft.com/Forums/en-US/sqlxml/thread/bfa31c49-6ae5-4a5d-bcde-cd520e0cdf70/](http://social.msdn.microsoft.com/Forums/en-US/sqlxml/thread/bfa31c49-6ae5-4a5d-bcde-cd520e0cdf70/)

这家伙和我有完全相同的问题，并且能够通过使用 objBl.Transaction = True 来解决它。但是，当我尝试这样做时，我收到“无法批量加载，因为文件“这是一个本地临时文件”无法打开”的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:36:36.267

我正在为具有相同情况的未来用户回答这个问题。尽管不合逻辑，但如果您将 SQL 表中的列设置为接受 NULL 值并设置默认值 = ('')，那么 XML 文件中的空白值将变为空白而不是 NULL 值，您将不再收到此错误. 我无法使用 objBl.Transaction = True，因为我的服务器与运行应用程序以执行 BulkLoad() 的计算机不同。这可以通过设置共享文件夹来解决，但在我的情况下这不是一个选项。因此，下一个最佳选择是执行上述操作。

# android - Android中奇怪的HttpResponse

> ID：11549455
> 
> 赞同：0
> 
> 时间：2012-07-18T20:10:35.113
> 
> 标签：android, http, httpresponse

关于 android 应用程序中的以下代码，我遇到了一个不寻常的问题。

```
public InputStream retrieveStream(String url) {

    HttpGet request = new HttpGet(url);

    HttpParams httpParams = new BasicHttpParams();
    int some_reasonable_timeout = (int) (10 * DateUtils.SECOND_IN_MILLIS);
    HttpConnectionParams.setConnectionTimeout(httpParams, some_reasonable_timeout);
    HttpConnectionParams.setSoTimeout(httpParams, some_reasonable_timeout);
    HttpClient client = new DefaultHttpClient(httpParams);

    try
    {
      HttpResponse response = client.execute(request);

      final int statusCode = response.getStatusLine().getStatusCode();
      if (statusCode == HttpStatus.SC_OK){

        HttpEntity getResponseEntity = response.getEntity();
           return getResponseEntity.getContent();
      }
      else
      {
          Log.w(getClass().getSimpleName(), 
                  "Error " + statusCode + " for URL " + url); 
              return null;
      }
    }
    catch (ClientProtocolException e)
    {
      Log.e("Methods", "HTTP Error", e);
      return null;

    }
    catch (IOException e)
    {
      Log.e("Methods", "Connection Error", e);
      return null;

    }   
 } 
```

在应用程序中，我尝试连接到本地主机。（在 AsyncTask 中）

```
InputStream source = retrieveStream("http://10.0.2.2:27080/testdb/_hello") 
```

在模拟器上运行时，此代码工作正常，如果 localhost 关闭，“source”按预期返回为 null。同样，在移动设备（HTC Nexus One，Android 版本 2.2）上运行代码时，代码按预期将“源”报告为 null。但是，当在另一台移动设备（Samsung Galaxy S2，Android 版本 4.0.3，三星版本）上运行相同的 APK 时，返回的状态代码为 HttpStatus.SC_OK，即使它不可能连接到 localhost。有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:15:20.673

Android > 3.0 不允许在`Main UI Thread`. 您需要使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来发出 Web 请求。在安卓 > 3.0

# ruby-on-rails - 没有路线匹配 [POST]

> ID：11549456
> 
> 赞同：1
> 
> 时间：2012-07-18T20:10:36.610
> 
> 标签：ruby-on-rails, routing, controller, uninitialized-constant

在我的应用程序上我有这个我正在尝试创建以前注册用户的汽车但我收到错误（标题帖子）这是我的汽车控制器

```
class CarController < ApplicationController
def new
     @car = Car.new
end

def create
         @user = User.find(params[:user_id])
         @car = @user.car.create(params[:car])
         redirect_to user_path(@user)
    end
end 
```

这是我的路线.rb

```
Estaciones::Application.routes.draw do
devise_for :users

root :to => "user#index"
resources :user do
   resources :cars
end

get "user/new"
post "user/create"
get "user/:id" => "User#show"
get "user/:user_id/car/new" 
```

这是我的 html.erb 的一部分

```
<div class="container">

  <h1>new user registered</h1>

  <p>
    <strong>name:</strong>
    <%= @user.name %>
  </p>

  <p>
    <strong>email:</strong>
    <%= @user.email %>
  </p>

  <h2>new car registration</h2>

  <%= form_for([@user, @user.car.build]) do |f| %>
    <p>
      <%= f.label :brand %><br />
      <%= f.text_field :brand %>
    </p>
    <p>
      <%= f.label :color %><br />
      <%= f.text_field :color %>
    </p>
    <p>
      <%= f.label :model %><br />
      <%= f.text_field :model %>
    </p>
    <p>
      <%= f.label :year %><br />
      <%= f.text_field :year %>
    </p>
    <p>
      <%= f.submit "Create new car"%>
     </p>
  <% end %>
</div> 
```

当我提交新车的创建时，我得到了下一个错误

```
No route matches [POST] "/user/1/cars" 
```

任何想法？？

还有我的路线：

```
new_user_session GET    /users/sign_in(.:format)               devise/sessions#new
        user_session POST   /users/sign_in(.:format)               devise/sessions#create
destroy_user_session DELETE /users/sign_out(.:format)              devise/sessions#destroy
       user_password POST   /users/password(.:format)              devise/passwords#create
   new_user_password GET    /users/password/new(.:format)          devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format)         devise/passwords#edit
                     PUT    /users/password(.:format)              devise/passwords#update
   cancel_user_registration GET    /users/cancel(.:format)                devise/registrations#cancel
   user_registration POST   /users(.:format)                       devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)               devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                  devise/registrations#edit
                     PUT    /users(.:format)                       devise/registrations#update
                     DELETE /users(.:format)                       devise/registrations#destroy
                root        /                                      user#index
           user_cars GET    /user/:user_id/cars(.:format)          cars#index
                     POST   /user/:user_id/cars(.:format)          cars#create
        new_user_car GET    /user/:user_id/cars/new(.:format)      cars#new
       edit_user_car GET    /user/:user_id/cars/:id/edit(.:format) cars#edit
            user_car GET    /user/:user_id/cars/:id(.:format)      cars#show
                     PUT    /user/:user_id/cars/:id(.:format)      cars#update
                     DELETE /user/:user_id/cars/:id(.:format)      cars#destroy
          user_index GET    /user(.:format)                        user#index
                     POST   /user(.:format)                        user#create
            new_user GET    /user/new(.:format)                    user#new
           edit_user GET    /user/:id/edit(.:format)               user#edit
                user GET    /user/:id(.:format)                    user#show
                     PUT    /user/:id(.:format)                    user#update
                     DELETE /user/:id(.:format)                    user#destroy
            user_new GET    /user/new(.:format)                    user#new
         user_create POST   /user/create(.:format)                 user#create
                     GET    /user/:id(.:format)                    User#show
                     GET    /user/:user_id/cars/new(.:format)      car#new 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:12:23.280

你`CarsController`不需要`CarController`

# ilog - ILOG 上下文 IBM

> ID：11549457
> 
> 赞同：0
> 
> 时间：2012-07-18T20:10:43.113
> 
> 标签：ilog

我是 ILOG 的新手，我想知道，这句话是什么意思：

```
IlrContext() from ?context; 
```

在我的工作空间的示例项目中，我没有看到将“上下文”定义为变量。这是在 ILOG 中定义的隐式变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T08:09:08.373

`IlrContext`是所有执行上下文的基类。规则只能在执行上下文中执行。

实例`IlrContext`向引擎提供所有上下文数据（`rulesets`,`variables`等`parameters`）

[IlrContext 类](http://pic.dhe.ibm.com/infocenter/brjrules/v7r0m2/index.jsp?topic=/com.ibm.websphere.ilog.jrules.doc/html/api/html/ilog/rules/engine/IlrContext.html)

# c# - llblgen 目录名称切换的例子？

> ID：11549461
> 
> 赞同：1
> 
> 时间：2012-07-18T20:10:49.277
> 
> 标签：c#, web-config, llblgenpro

每个人都吹捧 llblgen 的神奇之处，但我在 c# 中的使用示例中发现的很少。llblgen 的文档解释了您可以做多少，但几乎没有提供示例，而是在实际代码对编码人员说得更清楚时更愿意提供复杂的文本解释。

我是 llblgen 用法的新手，并尝试执行查询两个不同服务器上的两个数据库以匹配用户登录凭据的简单任务。我到底如何告诉 llblgen a) 在一次 GetMulti() 调用中尝试两个目录，或者 b) 尝试一个，然后我手动切换目录名称，然后尝试另一个？

请帮忙！

# ios - 如何从 iOS 应用程序确定正在使用哪个苹果推送通知服务器 (APNS)

> ID：11549469
> 
> 赞同：1
> 
> 时间：2012-07-18T20:11:07.103
> 
> 标签：ios, push-notification, apple-push-notifications, server-push

我希望在我的服务器注册消息中包含一个关于正在使用哪个 APNS 服务器的标志。沙箱或生产。我希望这样做，以便我的代码可以简单地从设备表中查找设备令牌和通知服务器，以便继续开发可以与实时设备共存。

该应用程序确实在开发中正确注册，将我们系统中的客户 ID 链接到手机中的令牌字符串。

但是，这不允许我从我们的服务器以编程方式确定要使用哪个推送通知服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:21:19.403

我不确定我的问题是否正确，但根据 Apple 的文档[Local and Push Notification Programming Guide: The Notification Payload](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW1)

> 提供者可以在 Apple 保留的 aps 命名空间之外指定自定义有效负载值。

因此，您需要做的就是制作您的自定义有效负载以指示通知是从哪个服务器推送的，并在它到达应用程序时读取它。

# linux - linux托管权限共享服务器

> ID：11549470
> 
> 赞同：0
> 
> 时间：2012-07-18T20:11:10.287
> 
> 标签：linux, permissions, hosting, shared-hosting

*共享 linux 服务器上的可执行权限和读取权限之间的实际*区别是什么，这意味着，这与 Web 访问者可以做什么（例如 php 文件）究竟有什么关系？使用 Godaddy 共享主机，例如，在基本权限下，如果 web 用户不可读，但可执行，则与可读但不可执行的情况相同 - 执行 php 文件。此外，在共享的 linux 服务器上，使文件对 web 用户可写究竟是什么——一个无权访问服务器登录但通过浏览器访问页面的人呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:24:51.953

基本答案是：没有。网站的访问者不会直接访问任何文件，PHP 或其他文件。他们向计算机（例如：Apache）上的服务器服务（哇，这是可怕的措辞）发送一个 HTTP 请求，然后加载页面，执行 PHP 等。所以当您更改权限时，相关的权限要更改是 Apache 帐户（取决于发行版，可以是`nobody`或`www-data`）对这些文件的权限。至于权限的实际作用，[这个维基百科页面](http://en.wikipedia.org/wiki/Filesystem_permissions#Permissions)描述得很好。

如果你有一个 Linux 机器，你可以自己测试一下。获取一个包含文件的目录和`sudo chmod -R 744`它。然后，尝试`ls -l`进入它。您将能够看到文件名，但看不到有关文件的任何其他信息（包括内容 -`nano`该目录中的任何文件都将导致创建一个新文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:25:32.360

您必须记住，所有这些都取决于 Web 服务器想要做什么，因为一切都必须通过 Web 服务器。这不像从磁盘读取文件。因此，当您请求“index.php”或“index.cgi”时，您并没有读取文件的内容。Web 服务器将看到您请求的文件是一个程序，它将运行该程序。它不会输出文件的内容，而是输出程序输出的任何内容。这只是一个设置，与权限无关。此外，如果您使用的是共享主机帐户，则无法更改此设置。

> 在共享的 linux 服务器上，使文件可写 [...] 到底是做什么的？

您不能使用 HTTP 使文件“可写”。同样，这不像访问本地驱动器上的文件系统。您可以制作一个可以处理文件上传的服务器端程序，但同样，这与权限无关。

我希望这就是你的意思。让我知道你是否还有别的意思。

# hadoop - 任何人都知道如何在 Hadoop 中克服这个 Kerberos 配置警告？

> ID：11549471
> 
> 赞同：0
> 
> 时间：2012-07-18T20:11:10.013
> 
> 标签：hadoop, mapreduce, kerberos

我正在尝试以独立模式在 Hadoop-2.0.0 上运行一个简单的排序作业，但每次尝试时，都会收到以下警告：

```
 WARN util.KerberosName: Kerberos krb5 configuration not found, setting default realm to empty 
```

如何设置必要的配置？我在 Apache 网站上找不到有关此问题的任何信息。有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:06:19.417

在 RHEL 上，默认安装 Kerberos 客户端。检查您是否正确配置了 /etc/krb5.conf。您还在使用启用了 Kerberos 的 Hadoop 吗？你在你的环境中需要它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T18:46:19.597

您可以使用 KRB5_CONFIG 环境变量指向您自己的 krb5.conf 文件。

例如

```
KRB5_CONFIG=/var/tmp/krb5.conf 
```

# c++ - C++/CLI 前向声明问题

> ID：11549474
> 
> 赞同：2
> 
> 时间：2012-07-18T20:11:21.340
> 
> 标签：c++, winforms, c++-cli, forward-declaration

我一直在尝试进行前向声明以允许类之间的访问。我在这里读到：

*   在 bh 中转发声明 A 时，我不能包含“ah”文件

在前向声明期间，我无法找到很多关于命名空间的信息。而且我相当肯定我把它搞砸了（我只是不知道把它们放在哪里）。我得到的错误是在相关代码片段之后。

这就是我所做的：

*   我已将我的类定义从 .h 中的所有内容拆分为 .cpp 和 .h

*   我的 .h 文件中有 #ifndef 保护

这些是我的文件：

**Form1.cpp**

```
#include "stdafx.h"
#include "OpenGL.h"
#include "Form1.h"
#include "serialcom.h"
#include "calculations.h"

using namespace GUI_1;

GUI_1::Form1::Form1(void)
    {....
    }
void GUI_1::Form1::chlabel2(float num)
    {....
    }
int GUI_1::Form1::updateHand(int source){....}
void GUI_1::Form1::resetHand(){....} 
```

**Form1.cpp**的错误每个定义都是一样的

```
error C2872: 'GUI_1' : ambiguous symbol
could be 'GUI_1'
or       OpenGLForm::GUI_1' 
```

**表格1.h**

```
#ifndef form1
#define form1

using namespace OpenGLForm; 
//error C2871: 'OpenGLForm' : a namespace with this name does not exist
ref class COpenGL;

namespace GUI_1 {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    /// <summary>
    /// Summary for Form1
    /// </summary>

    public ref class Form1 : public System::Windows::Forms::Form
    {
    public:
        OpenGLForm::COpenGL^ o_gl;
            // error C2653: 'OpenGLForm' : is not a class or namespace name
        Form1(void);
        void chlabel2(float num);

    protected:
        ...
...};} 
```

**OpenGL.h**

```
#ifndef opengl
#define opengl

#pragma comment(lib, "opengl32.lib")
#pragma comment(lib, "glu32.lib")

#include <windows.h>
#include <GL/gl.h>
#include <GL/glu.h>
#include <GL/glut.h>
#include <math.h>

// Declare globals

....

namespace OpenGLForm 
{
    using namespace System::Windows::Forms;
    using namespace GUI_1;
    // error C2871: 'GUI_1' : a namespace with this name does not exist

    ref class GUI_1::Form1;
    // error C2653: 'GUI_1' : is not a class or namespace name
    // 'Form1' uses undefined class 'OpenGLForm::GUI_1'

    public ref class COpenGL: public System::Windows::Forms::NativeWindow
    {
    public:

        Form1^ form1;
            // error C2059: syntax error : ';'
            // error C2238: unexpected token(s) preceding ';'
            // error C2143: syntax error : missing ';' before '^'

        ...
};
}
#endif 
```

**OpenGL.cpp - 这里没有错误**

```
#include "stdafx.h"
#include "OpenGL.h"
#include "Form1.h"

OpenGLForm::COpenGL::COpenGL(){};
... other functions that go the same way 
```

**GUI_1.cpp - 主要功能**

```
#include <vcclr.h>
#include <stdio.h>
#include <stdlib.h>
#include "Form1.h"
#include "calculations.h"
#include "serialcom.h"
#include "OpenGL.h"

using namespace GUI_1;
using namespace OpenGLForm;

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
    // Enabling Windows XP visual effects before any controls are created
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 

    GUI_1::Form1 ^form1 = gcnew GUI_1::Form1();
    // error C2059: syntax error : '='
    OpenGLForm::COpenGL ^open_gl = gcnew OpenGLForm::COpenGL();

    form1->o_gl = open_gl;
    // error C2143: syntax error : missing ';' before '->'

    open_gl->form1 = form1;
    // error C2059: syntax error : '='

    return 0;
} 
```

我将继续尝试解密这些消息，但同时我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T20:32:28.673

*   在 OpenGL.h 中，您需要在正确的命名空间中前向声明 Form1：

    命名空间 GUI_1 { 参考类 Form1; }

*   并以相同的方式在 Form1.h 中前向声明 COpenGL：

    命名空间 OpenGLForm { 参考类 COpenGL; }

重要提示：确保这些声明位于其他命名空间块之外，并从类内部删除现有的前向声明。

*   在 Form1.cpp 中，在命名空间块中定义成员函数会更清晰：

    命名空间 GUI_1 { Form1::Form1(void) ... }

*   这两个 .cpp 文件包括不同顺序的 Form1.h 和 OpenGL.h。最好只包含 Form1.h，而让 Form1.h 包含 OpenGL.h。

# android - Android浏览器渲染边框半径不正确，边框较大

> ID：11549475
> 
> 赞同：0
> 
> 时间：2012-07-18T20:11:21.633
> 
> 标签：android, html, css, android-browser

我在 Android Webkit 浏览器上遇到了问题。这发生在 Android 4.0.3 及更早版本上。该设计要求 div 内有 15 像素的顶部边框，然后是圆角。我正在使用border-radius来完成这个，这在所有现代浏览器中都可以正常工作，但在Android上它看起来像这样：

![http://i.stack.imgur.com/5oEuD.png](../Images/ac58e3bbccdc8bc97844e8bf1581cace.png)

HTML 如下所示：

```
<section class=" sub_nav" id="quick_access_section">
 <header>
    <h1>Headline</h1>
    </header>
    <div class="wrapper cw_humans">
        ....
        <div class="text">Nam condimentum viverra nulla sed pulvinar nisl posu</div>
        ....
        </div>
    </div>
</section> 
```

CSS 看起来像这样：

```
section {
  background: #f2f4f7;
  border-top: 15px solid #1a293a;
  border-radius: 6px;
  -webkit-box-shadow: 0px 5px 10px #bfc4ca;
  -moz-box-shadow: 0px 5px 10px #bfc4ca;
  box-shadow: 0px 5px 10px #bfc4ca;
  margin: 0 auto;
  width: 80%;
} 
```

在 Mac OS 上的 Chrome、Apple 的 Webkit 和 Androi Chrome 上，它看起来像这样：

![http://i.stack.imgur.com/2PoiZ.png](../Images/17afd7363916f91936b37bf961575d45.png)

我很好奇是否有其他人以前看过这个。正如我所料，我使用了没有效果的 webkit 前缀。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:06:55.577

android 的 px 可能会因为显示不同而不同，因此使用与设备无关的测量值将有助于保持一切不变。Em 是一种保持事物不变的简单方法，因为它们相对于默认字体大小（通常为 16 像素）。可以使用 css 修改默认字体大小，为所有浏览器提供相同的起点。

# c# - Sql Server CLR 项目 - TFS

> ID：11549476
> 
> 赞同：2
> 
> 时间：2012-07-18T20:11:25.800
> 
> 标签：c#, sql-server, sqlclr

我们在 VS 2010 中的 SQL CLR 项目遇到问题。我签入了对 TFS 的所有更改，但是当其他人更新时，构建已损坏。

这是我所做的：

1.  `GT.Json`在 C# 中创建了类库（

2.  在 #1 中构建项目，并在 SQL Server 级别注册所有必要的程序集（包括第 3 方库）

3.  `GT.Json`现在在 SQL Server 上添加了对程序集的引用

`GT.Json`当其他人获得最新版本时，正是这种引用破坏了构建。

知道我是如何设置它的，这样我就不会破坏构建吗？

[编辑]
当其他人获得最新消息时，对的引用`GT.Json`被破坏。唯一的解决方案是删除引用并重新添加它。我可以在一个普通项目中处理这个问题，但这是我对我们的一个 CLR 项目的第一次编辑。在我的机器上，我添加的引用自动指向项目中的 /obj/sqlclr 文件夹，但该文件夹不是 TFS 的一部分。

# python - 使用 Gtk 3 在 Python 中加载并显示来自网络的图像？

> ID：11549480
> 
> 赞同：8
> 
> 时间：2012-07-18T20:11:45.347
> 
> 标签：python, image, gtk, gtk3, pixbuf

我正在使用 Python 和 GTK 3 在 Ubuntu 12.04 上编写应用程序。我遇到的问题是，我不知道应该如何在我的应用程序中使用来自网络的图像文件显示 Gtk.Image。

据我所知，这是：

```
from gi.repository import Gtk
from gi.repository.GdkPixbuf import Pixbuf
import urllib2

url = 'http://lolcat.com/images/lolcats/1338.jpg'
response = urllib2.urlopen(url)
image = Gtk.Image()
image.set_from_pixbuf(Pixbuf.new_from_stream(response)) 
```

我认为除了最后一行之外一切都是正确的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-03T14:44:49.900

这将起作用；

```
from gi.repository import Gtk
from gi.repository.GdkPixbuf import Pixbuf
from gi.repository import Gio
import urllib

url = 'http://lolcat.com/images/lolcats/1338.jpg'
response = urllib.request.urlopen(url)
input_stream = Gio.MemoryInputStream.new_from_data(response.read(), None)
pixbuf = Pixbuf.new_from_stream(input_stream, None)
image = Gtk.Image()
image.set_from_pixbuf(pixbuf) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T22:04:25.040

我还没有找到任何关于 PixBuf 的文档。因此，我无法回答`new_from_stream`需要哪些论据。作为记录，我收到的错误信息是

> TypeError: new_from_stream() 正好需要 2 个参数（1 个给定）

但我可以给你一个简单的解决方案，甚至可以改进你的应用程序。将图像保存到临时文件包括缓存。

```
from gi.repository import Gtk
from gi.repository.GdkPixbuf import Pixbuf
import urllib2

url = 'http://lolcat.com/images/lolcats/1338.jpg'
response = urllib2.urlopen(url)
fname = url.split("/")[-1]
f = open(fname, "wb")
f.write(response.read())
f.close()
response.close()
image = Gtk.Image()
image.set_from_pixbuf(Pixbuf.new_from_file(fname)) 
```

我知道这不是最干净的代码（URL 可能格式错误，资源打开可能失败，......）但它背后的想法应该是显而易见的。

# excel - 摘要页的 Excel 公式

> ID：11549484
> 
> 赞同：1
> 
> 时间：2012-07-18T20:12:02.890
> 
> 标签：excel, excel-formula

我想做一个总结表。

我创建了一个名称下拉列表：Bob、Jack、Beth 和一个包含两个选项的下拉列表：已完成或更正待定。

在任务旁边的 Sheet2 上，您将选择名称，然后选择两个选项之一。

在摘要表上，我需要创建一个公式来检查具有名称的整个范围，以查看 Bob 有多少任务“已完成”或“更正待定”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:16:48.740

你可以这样做：

```
=COUNTIFS(A1:A10, "Bob", B1:B10, "Completed") 
```

假设所有名称都在单元格 A1:A10 中，并且所有任务都在单元格 B1:B10 中。对“未决的更正”执行相同的操作。

# python - 线性回归（）返回列表中的列表（sklearn）

> ID：11549486
> 
> 赞同：5
> 
> 时间：2012-07-18T20:12:05.720
> 
> 标签：python, list, regression

我在 Python ( [sklearn](http://scikit-learn.org/stable/modules/linear_model.html#ordinary-least-squares) ) 中进行多元线性回归，但由于某种原因，系数没有正确返回为列表。相反，会返回一个 IN A LIST 列表：

```
from sklearn import linear_model
clf = linear_model.LinearRegression()
# clf.fit ([[0, 0, 0], [1, 1, 1], [2, 2, 2]], [0, 1, 2])
clf.fit([[394, 3878, 13, 4, 0, 0],[384, 10175, 14, 4, 0, 0]],[3,9])
print 'coef array',clf.coef_
print 'length', len(clf.coef_)
print 'getting value 0:', clf.coef_[0]
print 'getting value 1:', clf.coef_[1] 
```

这将返回列表 [[]] 而不是列表 [] 的列表中的值。知道为什么会这样吗？输出：

```
coef array [[  1.03428648e-03   9.54477167e-04   1.45135995e-07   0.00000000e+00
0.00000000e+00   0.00000000e+00]]
length 1
getting value 0: [  1.03428648e-03   9.54477167e-04   1.45135995e-07   0.0000000
0e+00 0.00000000e+00   0.00000000e+00]
getting value 1:
Traceback (most recent call last):
  File "regress.py", line 8, in <module>
    print 'getting value 1:', clf.coef_[1]
IndexError: index out of bounds 
```

但这有效：

```
from sklearn import linear_model
clf = linear_model.LinearRegression()
clf.fit ([[0, 0, 0], [1, 1, 1], [2, 2, 2]], [0, 1, 2])
# clf.fit([[394, 3878, 13, 4, 0, 0],[384, 10175, 14, 4, 0, 0]],[3,9])
print 'coef array',clf.coef_
print 'length', len(clf.coef_)
print 'getting value 0:', clf.coef_[0]
print 'getting value 1:', clf.coef_[1] 
```

输出：

```
coef array [ 0.33333333  0.33333333  0.33333333]
length 3
getting value 0: 0.333333333333
getting value 1: 0.333333333333 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T21:31:47.220

这可以通过更新 SciKit-Learn 文件夹中的两个文件来解决。

代码在这里： [https ://github.com/scikit-learn/scikit-learn/commit/d0b20f0a21ba42b85375b1fbc7202dc3962ae54f](https://github.com/scikit-learn/scikit-learn/commit/d0b20f0a21ba42b85375b1fbc7202dc3962ae54f)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:27:50.080

我从未使用过您所指的多元线性回归模块，所以我不知道它为什么会发生。但是如果你只是想解决你的问题，你可以展平列表：

```
flat_list = clf.coef_[0] 
```

~~如果列表可能有多个子列表（并且您想将它们全部组合成一个平面列表），那么您可以使用更通用的方法来展开它：~~

 ~~```
flat_list = [item for sublist in clf.coef_ for item in sublist] 
```~~  ~~**编辑：**在等待软件包开发人员的真正解释/解决方案时，您可以依靠这样的解决方案：

```
if isinstance(clf.coef_[0], list):
    clf.coef_ = clf.coef_[0] 
```

仅当其中有子列表时，才会使列表变平。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T22:46:46.560

似乎是 scipy.linalg 的问题。如果您跟踪调用链，它首先进入[https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/linear_model/base.py#L218](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/linear_model/base.py#L218)，然后到达[https://的 if 语句/github.com/scipy/scipy/blob/master/scipy/linalg/basic.py#L468](https://github.com/scipy/scipy/blob/master/scipy/linalg/basic.py#L468)。这`if`区分了您的两个测试用例。在第一种情况下`m,n=2,6`，在第二种情况下，你有`m,n=3,3`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T20:26:40.643

这确实不是关于 Python 语言的有效问题。这应该是 sklearn 开发人员的问题。但是......如果您知道这是您的数据返回的格式，您可以：

```
print 'getting value 0:', clf.coef_[0][0]
print 'getting value 1:', clf.coef_[0][1]
                                   ^^^ 
```~~

# scala - 在 scala 中使用 scrooge 和客户端在 python 或 ruby 中编写一个节俭服务器

> ID：11549490
> 
> 赞同：4
> 
> 时间：2012-07-18T20:12:16.883
> 
> 标签：scala, thrift, finagle, scrooge

我想在 Scala 中编写一个节俭服务实现（使用 Scrooge），但不使用 Finagle，因为我无法为 Finagle 服务器编写一个 ruby​​/python 客户端。问题是使用 scrooge 服务似乎没有实现“处理器”类。

假设我有一个这样的节俭定义：

```
service TestService {
   void testFunction(1: string message);
} 
```

当我尝试使用 thrift for scala 的标准实现来运行服务器时，我使用 scrooge 生成了 scala 文件：

```
val st = new TServerSocket(9999)
val processor = new TestService.Processor(new TestServiceImpl)
val arg = new TThreadPoolServer.Args(st)
arg.processor(processor) 
val server = new TThreadPoolServer(arg)
server.serve() 
```

生成的 TestService 对象似乎没有 Processor 内部类。知道如何在没有 Finagle 的情况下做到这一点吗？或者作为另一种解决方案，如何编写一个 python 或 ruby​​ 客户端来finagle thrift 服务器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T21:29:19.120

您必须将 finagle thrift 实现与 Scrooge 一起使用。请注意，它是所有有线和 IDL 兼容的，因此您可以使用任何您想要的实现，只要您共享 IDL。

您可以为 finagle thrift 服务编写 Ruby 或 Python 客户端：它使用相同的协议。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T13:38:51.520

根据您[链接](https://github.com/AhmedSoliman/thiftest)到的项目，您似乎在客户端和服务器之间存在传输不匹配。

您的 python 客户端正在使用缓冲传输：

```
transport = TTransport.TBufferedTransport(transport) 
```

但是您的 scala 服务器正在使用框架传输：

```
.codec(ThriftServerFramedCodec()) 
```

如果您将 python 客户端更改为使用框架传输，您的问题应该会消失：

```
transport = TTransport.TFramedTransport(transport) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T13:38:53.003

我的问题已经通过在 python 和 scala 中使用相同的传输来解决。

在我的 python 客户端中。

```
transport = TTransport.TFramedTransport(transport) 
```

您可以找到示例工作[链接](https://github.com/AhmedSoliman/thriftest)

# cnc - G41和G42有什么区别？

> ID：11549493
> 
> 赞同：0
> 
> 时间：2012-07-18T20:12:36.483
> 
> 标签：cnc

我正在学习数控编程，我被 G41 和 G42 之间的区别所困扰。讲师没有解释清楚，所以我正在寻找可以更清楚地解释差异的人。我知道它们都是刀具补偿，但是我怎么知道什么时候用G41，什么时候用G42呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T20:17:07.903

确定G41和G42之间的区别实际上非常简单。但如果你弄错了，这可能是一个代价高昂的错误。G41 向左补偿刀具，G42 向右补偿刀具。

您可以在此处阅读更多信息： [刀具补偿 G40 G41 G42](http://cnc-programming-by-gord.blogspot.com/2012/07/cutter-compensation-g40-g41-g42.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T19:27:12.247

我在电火花加工中使用了 G42 和 G41。使用 G42 作为工件补偿，通常是 008“线补偿（意味着它距离切割路径的中心线为 .008”），以在尺寸上略过 ID 键槽。G41 用于外径键槽和样条线。所以这里有一个编码应用程序的真实示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T09:44:13.443

我用简单的方式解释你 G41 代码用于将 cnc 控制工具向反方向移动。G42代码与G41相反。可用于逆向移动数控刀具。

# r - 如何使用 ddply 获得凸包？

> ID：11549495
> 
> 赞同：3
> 
> 时间：2012-07-18T20:12:41.487
> 
> 标签：r, plyr

我正在按照此[示例](https://stats.stackexchange.com/questions/11919/convex-hull-in-r)创建要绘制的多边形，`ggplot`如果我的数据被子集化，我可以按照该示例创建单独的凸包；但是，当我尝试申请时`ddply`，因为我有一个分组变量，我无法申请。这是示例中的代码，其中添加了分组变量：

```
library(grDevices) # load grDevices package
df <- data.frame(X = c(-62,  -40,   9,  13,  26,  27,  27),
             Y = c( 7, -14,  10,   9,  -8, -16,  12), id = c(1, 1, 1, 2, 2, 3, 3))
con.hull.pos <- ddply(df, .(id), summarize, hullpos = chull(X, Y)) # get convex hull positions by each ID 
```

现在，要为每个 ID 获取完整的多边形，我们需要按照给出的每个 ID 获取所有行，`con.hull.pos`但我们还需要添加每个组的第一行。

```
df[ddply(con.hull.pos, .(id), function(x) x[1, ])$hullpos, ] # first row of position
df[con.hull.pos$hullpos  ,]  ## all rows of position
rbind(df[con.hull.pos$hullpos  ,] , df[ddply(con.hull.pos, .(id), function(x) x[1, ])$hullpos, ]) 
```

在这里我的代码失败，因为使用 ddply 的第一行与 ID 的凸包的第一行不同。因此，多边形是不完整的。任何人都可以通过按变量分组来帮助我应用给定的[示例。](https://stats.stackexchange.com/questions/11919/convex-hull-in-r)

手动设置子集时，此代码会创建三个单独的多边形，覆盖三个 id 区域

```
id1_df <- subset(df, id==1)
id1_con.hull.pos <- chull(id1_df$X, id1_df$Y)   

id2_df <- subset(df, id==2)
id2_con.hull.pos <- chull(id2_df$X, id2_df$Y)

id3_df <- subset(df, id==3)
id3_con.hull.pos <- chull(id3_df$X, id3_df$Y)

id1_con.hull <- rbind(id1_df[id1_con.hull.pos,], id1_df [id1_con.hull.pos[1],])
id2_con.hull <- rbind(id2_df [id2_con.hull.pos ,], id2_df  [id2_con.hull.pos [1],])
id3_con.hull <- rbind(id3_df [id3_con.hull.pos,], id3_df [id3_con.hull.pos[1],])             

poly_borders <- rbind(id1_con.hull, id2_con.hull, id3_con.hull)     

plot(Y ~ X, data = df) # plot data
lines(poly_borders) # add lines for convex hull 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:34:51.687

两个提示：

1.  使用`chull`基数 R 中的函数来计算凸包。
2.  用于`dlply`将结果存储`chull`在列表中，而不是数据框中

然后你的代码变成：

```
x <- dlply(df, .(id), function(piece)piece[chull(piece$X, piece$Y), -3])

plot(Y~X, df)
lapply(x, polygon) 
```

这产生了这个情节：

![在此处输入图像描述](../Images/bf2f1ef66d351b3af65b78531b7c2135.png)

* * *

如果您想在其中绘制`ggplot`它甚至更容易，但使用`ddply`：

```
x <- ddply(df, .(id), function(piece)piece[chull(piece$X, piece$Y), ])
ggplot(x, aes(X, Y, group=id)) + geom_polygon(fill="cyan", colour="blue") + geom_line() 
```

![在此处输入图像描述](../Images/092a252267534aaac7ef17460ca92891.png)

# c# - 在 C# 中动态创建和公开 SOAP 服务及其 WSDL（使用自定义 TCP 侦听器！）

> ID：11549498
> 
> 赞同：10
> 
> 时间：2012-07-18T20:13:07.273
> 
> 标签：c#, .net, parsing, dynamic, soap

我有一个用 C# 构建的自定义 HTTP 服务器，它接受对 REST 服务的请求并以 XML 或 JSON 响应（取决于客户端需要什么）。REST 服务是在运行时从基于数据库的配置中定义的，输入参数和输出类型差异很大，并且在生产环境中运行良好。

但是，我想添加对相同服务的 SOAP 访问，以及适当的 WSDL。由于可用服务不是硬编码的，这意味着：

*   发布运行时从数据库中的方法定义生成的 WSDL
*   解析传入的 SOAP 请求，将它们映射到这些定义，并在处理它们之前确保请求符合方法签名
*   处理响应后，创建符合 WDSL 的 SOAP 响应以返回结果

MS 文档（和 Google）文档使用 Visual Studio 在设计时生成 Web 服务（和 WSDL），使用 WebMethods、ASP.NET MVC 等公开内容。这不是我想要的，因为*没有*方法在设计时从中生成绑定的定义。

有没有人有任何想法（例如用于原始 SOAP 解析的工具包），以及关于从动态创建的方法签名等生成 WSDL 的想法？知道如果没有的话，如何去建造这样的东西吗？如果可能的话，我希望避免重新发明轮子。

PS：很明显，.NET 框架中有标准化的东西，因为 Visual Studio 为你做了 - 任何想法如何在运行时在较低级别访问它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T21:10:38.373

要动态创建 wsdl，您可以使用`ServiceDescriptionReflector`

例如：对于类

```
public class TestWebService
{
    [WebMethod]
    public string Hello(string namex)
    {
        return "Hello " + namex;
    }
} 
```

你可以使用这个代码

```
StringWriter wr = new StringWriter();
var r = new System.Web.Services.Description.ServiceDescriptionReflector();
r.Reflect(typeof(TestWebService), "http://somewhere.com");
r.ServiceDescriptions[0].Write(wr);
var wsdl = wr.ToString(); 
```

但是既然你说了

> 发布运行时从数据库中的方法定义生成的 WSDL

你必须`Type`在运行时创建

```
var asm = AppDomain.CurrentDomain.DefineDynamicAssembly(new AssemblyName("MyAsm"), AssemblyBuilderAccess.Run);
var mod = asm.DefineDynamicModule("MyModule");

TypeBuilder typeBuilder = mod.DefineType("TestWebService");

MethodBuilder mb = typeBuilder.DefineMethod("Hello", MethodAttributes.Public, CallingConventions.Standard, typeof(string), new Type[] { typeof(string) });
var cab = new CustomAttributeBuilder( typeof(WebMethodAttribute).GetConstructor(new Type[]{}), new object[]{} );
mb.SetCustomAttribute(cab);
mb.DefineParameter(1, ParameterAttributes.In, "namex");
mb.GetILGenerator().Emit(OpCodes.Ret);

Type type = typeBuilder.CreateType(); 
```

现在您可以使用`type`创建 wsdl

```
StringWriter wr = new StringWriter();
var r = new System.Web.Services.Description.ServiceDescriptionReflector();
r.Reflect(type, "http://somewhere.com");
r.ServiceDescriptions[0].Write(wr);
var wsdl = wr.ToString(); 
```

对于读取请求和形成响应，您可以使用 Linq2Xml。 [Fiddler](http://www.fiddler2.com/fiddler2/)可以让您了解客户端和服务器之间发送的 SOAP(xml) 格式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:26:00.693

SOAP“只是”一种基于 XML 的信息交换协议。从头开始实现对它的支持会很乏味，但原则上并不复杂，我不认为。

官方 SOAP 规范可以在[这里](http://www.w3.org/TR/soap/)找到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T09:56:25.183

不要解析 SOAP，除非您真的需要，让 WCF 为您完成繁重的工作，根据您的定义**在 C# 代码中生成服务和数据契约并****在运行时编译**。生成一个服务实现，通过众所周知的接口连接到您的“静态”代码。

为新的服务合同/数据合同动态创建具有正确绑定的端点。如果绑定不动态更改，则可以在您的 app.config 中定义，否则也可以在运行时设置。

添加一个 Mex 端点以发布 wsdl。

对于“检查”传入流量，请使用[MessageInspector](http://msdn.microsoft.com/en-us/library/aa717047.aspx)

[使用 ServiceHost -> Self Hosting WCF](http://msdn.microsoft.com/en-us/library/ms730158.aspx)在 HTTP 服务器中自行托管 WCF/SOAP 服务

只是关于另一种方法的一些想法。

# html - 如何在 UIWebView 中使用 HTML 模仿 UINavigationController 的行为？

> ID：11549499
> 
> 赞同：0
> 
> 时间：2012-07-18T20:13:11.920
> 
> 标签：html, ios, uiwebview

在我的 iPhone 应用程序中，我有一个“帮助”屏幕。目前，我使用几乎全屏的 UIWebView 并显示一个带有帮助文本的 RTF。但随着应用程序在功能方面的增长，在线手册也在增长。我只需要将其拆分并细分为几个“页面”。

现在我想知道是否可以在不对应用程序代码进行任何（或很少）更改的情况下这样做，即是否可以在现有 UIWebView 中使用 HTML来模仿[UINavigationController的行为。](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)结果应该大致类似于[iPhone 用户手册](http://help.apple.com/iphone/4/interface/)（将 UserAgent 切换到“Safari iOS 4.3.3”以查看它）。然而，HTML 源代码应该存储在设备上的本地文件中。

这可能吗？如果是这样，它是否比直接在 Objective-C 中编写相同的东西需要更多或更少的努力？

理想情况下，我想要一个骨架，我只需要填写我的帮助文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:23:54.293

你看过[jQuery Mobile](http://jquerymobile.com/)吗？它可以为您提供 HTML 5 的导航控制器外观。它适用于 safari 应用程序，但我认为它也应该在 UIWebView 中工作。

# encryption - 带有短消息的 AES CTR 模式

> ID：11549504
> 
> 赞同：1
> 
> 时间：2012-07-18T20:13:30.697
> 
> 标签：encryption, cryptography, aes, block-cipher

加密短消息（小于块大小）时使用 CTR 模式的 AES 是否安全？一个例子是加密 SSN 或信用卡号码。我看到了关于此的相互矛盾的信息，所以我想澄清一下。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:53:26.590

消息的长度是否泄漏信息？如果您知道消息是“是”或“否”，那么未填充的密文的长度会泄露大量信息。如果它类似于 SSN，则未填充的密文不会泄漏任何信息，除非底层明文可能是 SSN。

使用 AES（一种块密码），即使您不使用所有密钥流，您也将始终生成至少一个块的密钥流。将短消息填充到一个块几乎没有处理开销。当然，存储开销会更大，因此您需要根据您的具体要求做出决定。

简而言之，未填充的 CTR 模式对于 SSN 来说是安全的，因为它们都是九位数长，所以密文长度不会泄露任何有用的信息。

# database - Rails 3 - 将大量数据从旧数据库模式移动到新数据库模式

> ID：11549513
> 
> 赞同：4
> 
> 时间：2012-07-18T20:14:12.053
> 
> 标签：database, ruby-on-rails-3, migration

直到几个月前，我还在开发一个应用程序。之后，决定对该应用程序进行大修。这涉及更改大量数据库模式。为了实现这个目标，我们选择在另一个分支上工作。当我们不得不进行迁移时，我们没有麻烦自己包含处理数据库中可用的当前数据的代码，以便它与新的数据库模式兼容。这种发展持续了几个月。现在，我们需要从旧数据库模式中获取所有数据并将其迁移到新的数据库模式中。

这样的任务似乎很复杂，可以征求意见。有什么宝石可以帮助解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:09:15.907

首先，我假设您使用的是像 MySql 这样的关系数据库，并且您有一些可管理的表数量。

这是一个涉及离散步骤的简单方法：

对于每张桌子，

1.  为要导入的每个表编写一个 SQL 查询。一次或批量运行每个表导入。
2.  在 Rails 控制台中，通过尝试实例化模型来验证数据。

但是，使用此方法，您可能会遇到数据验证错误。

第二种方法可以使用 CSV。在这里，我假设您在 Ruby 1.9.3 中使用 CSV。您可以将其切换为使用 FasterCSV 来处理旧的 Ruby。

1.  将您的数据库导出为 CSV。
2.  在 rake 任务中，您可以尝试手动映射一些数据：

    ```
    # Put this in lib/tasks/import.rb
    require 'csv'

    namespace :import do
      desc 'import some data!'
      task :from_csv do
        CSV.foreach('path/to/file.csv') do |row|
          model = YourNewModel.new(field_xyz: row[xyz], ...)
          # ... maybe do some other stuff here if you need to process anything
          model.save if model.valid? # maybe check if it's valid
        end
      end
    end 
    ```

    当然，您必须将模型字段正确映射到 CSV 行。[在此处查看 1.9.3 CSV 文档。](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)

    现在像这样运行 rake 任务：

    ```
    $ cd /path/to/your/app && rake import:from_csv 
    ```

# c# - DataReader：不存在数据时尝试读取无效

> ID：11549515
> 
> 赞同：0
> 
> 时间：2012-07-18T20:14:22.520
> 
> 标签：c#, asp.net, sql-server, database

我遇到了一些有趣的情况。我有以下代码来填充数据库（ASP.net）中的字段值：

```
SqlConnection connect =
            new SqlConnection(
                @"conn-string"); 
SqlCommand toDo = new SqlCommand(InfoQuery, connect);
        toDo.CommandTimeout = 6000;
        connect.Open();
        using (SqlDataReader reader = toDo.ExecuteReader())
        {
            if (reader.HasRows)
            {
                while (reader.Read())
                {
                    ///......retrieving some fields in the same way as below
                    foo = reader.SafeGetString(7);
                    int temp = reader.SafeGetInt32(8);
                    ///......retrieving again
                }
        }
        connect.close() 
```

连接建立，所有参数都正确。在 SQL Server Management Studio 中，与`toDo`命令关联的查询非常完美。在程序中，当运行每个字段的`temp`值（不包括 temp）时，将被检索和设置。但是在读取温度值时，我得到以下异常：

> 不存在数据时尝试读取无效。

这是我的扩展方法：

```
public static class ExtentionMethods
{
    public static string SafeGetString(this SqlDataReader reader, int colIndex)
    {
        if (!reader.IsDBNull(colIndex))
            return reader.GetString(colIndex);
        return "NULL VALUE";
    }

    public static int SafeGetInt32(this SqlDataReader reader, int colIndex)
    {
        if (!reader.IsDBNull(colIndex))
            return reader.GetInt32(colIndex);
        return -1;
    }

    public static DateTime SafeGetDateTime(this SqlDataReader reader, int colIndex)
    {
        if (!reader.IsDBNull(colIndex))
        {
            try
            {
            }
            catch
            {
                return new DateTime(1800, 1, 1);
            }
        }
        return new DateTime(1800, 1, 1);
    }
} 
```

询问：

```
SELECT TOP 1000 [ID0]
        ,[Id1]
        ,[Id2]
        ,Id1+Id2+'0' AS BC
        ,[Id3]
        ,[Id4]
        ,[Id5]
        ,CAST([Date] AS nvarchar(max))
        ,[int]
        ,[Id7]
        ,[Id8]
        ,IsNull(foo,'dsf')+' '+IsNull(bar,'dsf')+', '
        +IsNull(fgm,'fggf')+', fgfggf '+IsNull(gfgf,'gfgf')+
        ','+dfsdfsdsf+', '+dsffddf AS dsadsa
        ,[fg]
        ,[fds]
        FROM tbl
        inner join tbl1 on tbl1.ID=ID1
        inner join tbl2 on tbl2.ID=ID2
        WHERE Id4=12 
```

问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:15:24.953

我认为您不需要所有这些扩展方法，您应该按名称访问列：

```
while (reader.Read())
{
    int intCol = reader["MyIntColumn"] as int? ?? -1;
    string stringCol = reader["MyStringColumn"] as string ?? "NULL VALUE";
    DateTime dateCol = reader["MyDateColumn"] as DateTime? ?? new DateTime(1800, 1, 1);
} 
```

`int?`or`DateTime?`将允许空值，`??`如果该列为空，则会影响默认值。

# php - 使用php查找子节点是否存在

> ID：11549516
> 
> 赞同：1
> 
> 时间：2012-07-18T20:14:22.750
> 
> 标签：php, xml, xml-parsing

我已经研究了一段时间，似乎无法找到我的代码的问题。我正在尝试获取商品的价格，如果有价格，这很好用，但如果缺少价格，则会引发错误。
这是代码：

```
 /* Amazon Offers ALGORITHM */
$parsed_xml = amazon_xml($isbn);

$current = $parsed_xml->ListMatchingProductsResult->Products->Product;
$asin = $current->Identifiers->MarketplaceASIN->ASIN;

// get information based on the items ASIN
$price_xml = amazonPrice_xml($asin);
    if($price_xml) {
    while(count($lowestPrices) < 2)
    {

        // check to see if there are values
        if(xml_child_exists($parsed_xml, $current->AttributeSets->children('ns2', true)->ItemAttributes->ListPrice->Amount))
           { 
            $listPrice = $current->AttributeSets->children('ns2', true)->ItemAttributes->ListPrice->Amount;
          } else {
            $listPrice = 0;
          }
        $currentPrice = $price_xml ->GetLowestOfferListingsForASINResult->Product->LowestOfferListings->LowestOfferListing;
        print_r($listPrice); 
```

我检查子节点的功能是：

```
 function xml_child_exists($xml, $childpath)
{
$result = $parsed_xml->xpath($childpath);
if (count($result)) {
    return true;
} else {
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:16:48.757

使用[property_exists()](http://php.net/manual/en/function.property-exists.php) 我使用它来检查重复的孩子，同时使用 SimpleXML 将新孩子添加到 xml 中。它应该适合你。如果您只传入子名称及其父名称。

```
function xml_child_exists($xml, $child)
{
 return property_exists($xml, $child);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:16:58.073

试试这个检查子节点是否存在

```
function xml_child_exists($xml, $childpath)
 {
  //$result = $parsed_xml->xpath($childpath); $parsed_xml variable?
    $result = $xml->xpath($childpath);
   if (isset($result)) { // changed from count to isset
    return TRUE;
   } else {
    return FALSE;
   }
} 
```

# magento - Magento 仪表板生成 SQL 错误

> ID：11549517
> 
> 赞同：0
> 
> 时间：2012-07-18T20:14:24.813
> 
> 标签：magento

我在管理部分的仪表板有问题，没有显示任何数据。我收到此错误：SQLSTATE [42000]：语法错误或访问冲突：1140 GROUP 列混合（MIN（），MAX（ ),COUNT(),...) 如果没有 GROUP BY 子句，则没有 GROUP 列是非法的

我不知道是什么引起了这个问题，这是追踪：

```
0 /var/www/store/public_html/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 /var/www/store/public_html/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 /var/www/store/public_html/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 /var/www/store/public_html/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT `main_ta...', Array)
#4 /var/www/store/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(389): Zend_Db_Adapter_Pdo_Abstract->query('SELECT `main_ta...', Array)
#5 /var/www/store/public_html/lib/Zend/Db/Adapter/Abstract.php(734): Varien_Db_Adapter_Pdo_Mysql->query('SELECT `main_ta...', Array)
#6 /var/www/store/public_html/lib/Varien/Data/Collection/Db.php(687): Zend_Db_Adapter_Abstract->fetchAll('SELECT `main_ta...', Array)
#7 /var/www/store/public_html/app/code/core/Mage/Core/Model/Resource/Db/Collection/Abstract.php(520): Varien_Data_Collection_Db->_fetchAll('SELECT `main_ta...', Array)
#8 /var/www/store/public_html/lib/Varien/Data/Collection/Db.php(521): Mage_Core_Model_Resource_Db_Collection_Abstract->getData()
#9 /var/www/store/public_html/lib/Varien/Data/Collection.php(268): Varien_Data_Collection_Db->load()
#10 /var/www/store/public_html/app/code/local/Ezapps/Zoom/Model/Mysql4/Page/Collection.php(28): Varien_Data_Collection->getFirstItem()
#11 /var/www/store/public_html/app/code/local/Ezapps/Zoom/Block/Adminhtml/Dashboard/Tab/Zoom.php(38): Ezapps_Zoom_Model_Mysql4_Page_Collection->getStats()
#12 /var/www/store/public_html/app/code/core/Mage/Adminhtml/Block/Dashboard/Abstract.php(77): Ezapps_Zoom_Block_Adminhtml_Dashboard_Tab_Zoom->_prepareData()
#13 /var/www/store/public_html/app/code/core/Mage/Core/Block/Abstract.php(238): Mage_Adminhtml_Block_Dashboard_Abstract->_prepareLayout()
#14 /var/www/store/public_html/app/code/core/Mage/Core/Model/Layout.php(430): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#15 /var/www/store/public_html/app/code/local/Ezapps/Tools/Block/Adminhtml/Dashboard/Diagrams.php(42): Mage_Core_Model_Layout->createBlock('ezzoom/adminhtm...')
#16 /var/www/store/public_html/app/code/core/Mage/Core/Block/Abstract.php(238): Ezapps_Tools_Block_Adminhtml_Dashboard_Diagrams->_prepareLayout()
#17 /var/www/store/public_html/app/code/core/Mage/Core/Model/Layout.php(430): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#18 /var/www/store/public_html/app/code/core/Mage/Adminhtml/Block/Dashboard.php(66): Mage_Core_Model_Layout->createBlock('adminhtml/dashb...')
#19 /var/www/store/public_html/app/code/core/Mage/Core/Block/Abstract.php(238): Mage_Adminhtml_Block_Dashboard->_prepareLayout()
#20 /var/www/store/public_html/app/code/core/Mage/Core/Model/Layout.php(430): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#21 /var/www/store/public_html/app/code/core/Mage/Core/Model/Layout.php(446): Mage_Core_Model_Layout->createBlock('adminhtml/dashb...', 'dashboard')
#22 /var/www/store/public_html/app/code/core/Mage/Core/Model/Layout.php(238): Mage_Core_Model_Layout->addBlock('adminhtml/dashb...', 'dashboard')
#23 /var/www/store/public_html/app/code/core/Mage/Core/Model/Layout.php(204): Mage_Core_Model_Layout->_generateBlock(Object(Mage_Core_Model_Layout_Element), Object(Mage_Core_Model_Layout_Element))
#24 /var/www/store/public_html/app/code/core/Mage/Core/Model/Layout.php(209): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element))
#25 /var/www/store/public_html/app/code/local/Mage/Core/Controller/Varien/Action.php(345): Mage_Core_Model_Layout->generateBlocks()
#26 /var/www/store/public_html/app/code/local/Mage/Core/Controller/Varien/Action.php(270): Mage_Core_Controller_Varien_Action->generateLayoutBlocks()
#27 /var/www/store/public_html/app/code/core/Mage/Adminhtml/Controller/Action.php(263): Mage_Core_Controller_Varien_Action->loadLayout(NULL, true, true)
#28 /var/www/store/public_html/app/code/core/Mage/Adminhtml/controllers/DashboardController.php(40): Mage_Adminhtml_Controller_Action->loadLayout()
#29 /var/www/store/public_html/app/code/local/Mage/Core/Controller/Varien/Action.php(420): Mage_Adminhtml_DashboardController->indexAction()
#30 /var/www/store/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#31 /var/www/store/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#32 /var/www/store/public_html/app/code/local/Mage/Core/Model/App.php(348): Mage_Core_Controller_Varien_Front->dispatch()
#33 /var/www/store/public_html/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#34 /var/www/store/public_html/index.php(82): Mage::run('', 'store')
#35 {main} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:22:02.473

正如您在堆栈跟踪中看到的那样，问题是由 Ezapps 的自定义模块引起的......

尝试禁用模块（app/etc/modules/Ezapps_*.xml - 将 active 设置为 false）并检查需要执行哪些其他操作才能禁用模块...

在该模块的代码中，形成 sql 查询时出现问题......

# mysql - Mysql中的USING关键字

> ID：11549525
> 
> 赞同：11
> 
> 时间：2012-07-18T20:14:50.367
> 
> 标签：mysql

我在 MySQL 中有一个具有以下定义的表 A

```
----------------------------------
id    c_id     t_id
------------------------------- 
```

其中 c_id 引用另一个表 B 上的 cid 具有以下定义

```
================================================
id cid cname
================================================= 
```

所以我发出以下查询

```
select group_concat(cname) as list
from A join B using (cid)
where t_id="something"; 
```

但我收到以下错误

```
Unknown column "cid" in from clause 
```

我尝试将其更改为“c_id”，但这似乎也不起作用..

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-18T20:16:50.723

`USING`在 MySQL 中只是标准`ON`子句的缩写形式，并且仅在两个表中的列名相同时才有效。

从[手册](http://dev.mysql.com/doc/refman/5.0/en/join.html)：

> USING(column_list) 子句命名必须存在于两个表中的列列表。

相反，请执行以下操作：

```
select group_concat(B.cname) as list 
from A 
inner join B on A.c_id = B.cid 
where A.t_id = 'something'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:17:35.030

两列需要相同的名称：c_id 或 cid 然后 using 子句将起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T11:49:28.650

您可以使用

```
select group_concat(cname) as list
from A join B using (c_id)
where t_id="something"; 
```

但是`c_id`这两个表都很常见。

# java - 将 Java 应用程序放入文件管理器的上下文菜单

> ID：11549529
> 
> 赞同：1
> 
> 时间：2012-07-18T20:15:03.603
> 
> 标签：java, linux, contextmenu, file-manager, nautilus

我在 Ubuntu 上使用 Eclipse IDE。我的应用程序提供加密服务，我想将其集成到客户端操作系统中。我的问题是：有没有办法以编程方式将我的应用程序放入文件管理器的上下文菜单（右键单击选项）中，而不管人们使用的文件管理器是什么？我还想知道是否有任何方法可以在 Windows 资源管理器上执行此操作。但我的猜测是它涉及向注册表添加值并且可以轻松实现。

那么，是否有在 linux 文件管理器上添加上下文菜单支持的通用解决方案，如果我在 windows 系统中这样做有误，请纠正我。

如果问题不清楚，请通知我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:31:15.687

如果你的目标是 vanilla ubuntu，你可以假设文件管理器是 Gnome Nautilus。您可以为 nautilus 编写一个扩展（可能在 Vala/C/python 中）：

[http://developer.gnome.org/libnautilus-extension/stable/](http://developer.gnome.org/libnautilus-extension/stable/)

或者您可以重新使用现有的扩展，例如 nautilus-action 或 nautilus-script，它们允许您将脚本绑定到上下文菜单条目。

如果你想支持所有的文件管理器，你必须看看 dolphin（用于 KDE）、thunar（用于 xcfe），也许还有 pcmanfm ......

编辑：如果你想用java编写你的插件，你可能想看看Gobject Introspection。不知道它是否还有效。

# jquery - 更新 JQuery 版本后 JQuery val() 不起作用

> ID：11549533
> 
> 赞同：0
> 
> 时间：2012-07-18T20:15:28.940
> 
> 标签：jquery

升级到 jquery 1.7.2 后，我注意到调用 val() 操作不再为我工作。

以下代码行将始终适用于应用程序使用的旧版 jquery (1.4.4)，而在 jquery 1.7.2 上则不起作用

```
var someVal = $("input:hidden[name=Some value withspaces_val]").val(); 
```

关于是什么导致此失败的任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:20:47.483

你试过 $("input:hidden[name='Some value withspaces_val']")

# javascript - 动态隐藏列表中的元素，隐藏元素不占用页面空白空间

> ID：11549535
> 
> 赞同：1
> 
> 时间：2012-07-18T20:15:31.230
> 
> 标签：javascript, html, css, dom

我需要根据用户的操作隐藏元素。如果他按“a only”，我可以说类似

```
for(i=0;i<document.getElementsByClassName("b").length;i++){
      document.getElementsByClassName("b")[i].style.visibility="hidden";
 } 
```

但这会在列表中的元素之间留下空白空间（不可见的元素仍然占据空间），看起来很糟糕，有没有更好的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:17:10.820

试试 style.display="none"

使用 visibilty="hidden"，元素仍将占用页面上的计算空间。

你也可以考虑使用jQuery。它使这些任务变得异常简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:18:14.190

是的。您将`visibility`CSS 属性设置为`hidden`. 这会阻止元素显示，但它仍会占用空间。

您想将`display`属性设置为`none`. 这会将其从显示中移除，*并*停止它占用空间 - 有效地将其从文档中移除，至少就显示它而言。

```
for(i=0;i<document.getElementsByClassName("b").length;i++){
    document.getElementsByClassName("b")[i].style.display = "none";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:18:13.393

使用`display: none`而不是`visiblity: hidden`. 该`visibility`属性只隐藏元素；该`display`属性实际上从布局中删除了元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T02:43:59.713

对于visibility:hidden，javascript解析器将解析元素css属性并隐藏，它实际上存在于dom上，但用户看不到。对于 display: none，当 javascript 解析器找到具有显示的元素时，它只是忽略该元素并继续前进。所以你必须用户 display: none;

# php - 如何将变量作为 POST 从 Cocoa-Touch 应用程序发送到我的 php 站点？

> ID：11549537
> 
> 赞同：0
> 
> 时间：2012-07-18T20:15:45.140
> 
> 标签：php, ios, cocoa-touch, post, nsmutableurlrequest

我有一个 iPhone 应用程序，我想将一些表单数据发送到我的网站（用 PHP 编写）。

```
 //This problem has now been solved. Typo in url.. :(
NSString *urlString = "http://www.mywebsite.com/test.php";
NSUrl *url = [NSURLWithString:urlString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
NSString *variableToSend = [NSString stringWithFormat:@"name=John"];
//I have assumed that where I write "name=John" that "name" is in Php equal
//to $_POST['name']?, and that "John" is the value of it?

[request setHTTPMethod:@"POST"];

//I don't quite understand these..
[request setValue:[NSString stringWithFormat:@"%d", [variableToSend length]] forHTTPHeaderField:@"Content-length"];
[request setHTTPBody:[variableToSend dataUsingEncoding:NSUTF8StringEncoding]];

(void)[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

我的 php 文件只是 $name = $_POST['name']; 并将 $name 写入数据库。我创建了一个带有 method="post"、action="" 的 <form>，并带有一个名为“name”的 textField，并且成功了。该值已发送到数据库。

我在很多答案中都看到过这个代码示例，但它确实对我有用。一些我不明白的代码行，所以我相信我如何设置 php 与如何设置代码有问题正在发送变量..有人知道我哪里出错了吗？

（这里的代码现在是手工写的，所以可能有错别字，但一切都在 xcode 中编译，如果我 NSLog(@"%@", request)，我得到 "< NSURLConnection: 0x1d342c24>" 什么的.. Don不知道这是否正确..)

编辑

我的 test.php

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
</head>
<body>

<?php

$connection = mysql_connect("host","un","pw");
if (!$connection){
 die('Error: ' . mysql_error());
}
if(isset($_POST['name']))
{

$name = $_POST['name'];
mysql_select_db("db", $connection);

mysql_query("INSERT INTO tablename(Name)
VALUES ('$name')");

mysql_close($connection);
}
?>
</body>
</html> 
```

性病

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:45:17.620

我已经意识到你的问题：你的 NSURLConnection 实例永远不会启动（我敢打赌你的 NSURLConnectionDelegate 方法都不会被调用）。

要么使用：

```
NSURLConnection* connection =     [[NSURLConnection alloc] initWithRequest:request delegate:self];
[connection start]; 
```

要不就：

```
[[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES]; 
```

而不是您现在使用的代码。

资源：

[http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)

**编辑**不要忘记在失败和成功时释放 NSURLConnection 对象（恰好其中一个被调用一次），否则它会泄漏。如果您使用 ARC，请将其保存在 ivar 中，否则可以在启动后立即释放（需要对此进行确认）

# linux - 根据 Linux 内核中的 CONFIG 条目更改代码块

> ID：11549541
> 
> 赞同：0
> 
> 时间：2012-07-18T20:15:49.713
> 
> 标签：linux, linux-kernel, configuration-files, linux-device-driver, embedded-linux

我有一个关于使用 Linux 内核中使用的 .config 文件的 CONFIG 条目的问题。我想根据某个 CONFIG 条目是否为 y 来跳过文件中函数中的某些部分代码。最好的方法是什么？我想知道是否可以以任何方式使用“if 语句”。我尝试的一种解决方法是维护几乎相同文件的两个副本、重命名和更改基于 CONFIG 的 makefile 条目，但这种方法涉及相当多的代码重复。想知道是否有一种聪明的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:25:08.317

您可以在 CONFIG 变量上使用 #ifdef - 建议您将 #ifdef 放在 .h 文件中，然后您可以使用它来更改要引用的函数的标志。

见：[http ://www.linuxjournal.com/article/6568](http://www.linuxjournal.com/article/6568)

# json - 将 JSON 数据拉入 R

> ID：11549542
> 
> 赞同：2
> 
> 时间：2012-07-18T20:15:51.227
> 
> 标签：json, r

我正在尝试使用以下代码行将此 JSON 数据解析为 R：为什么这不返回任何 JSON？

**我得到的错误**

fromJSON(file = "http://dcaps-staging.media.mit.edu:8080/api/reality_analysis/get_funf_sensor_data?bearer_token=05abc49652&probe=edu.mit.media.funf.probe.builtin.LocationProbe") 中的错误：意外字符'<'

**获取/解析 JSON 的代码**

```
library(RJSONIO)

json=fromJSON(file='http://dcaps-staging.media.mit.edu:8080/api/reality_analysis/get_funf_sensor_data?bearer_token=05abc49652&probe=edu.mit.media.funf.probe.builtin.LocationProbe')
json$result 
```

**JSON DATA 托管在其他地方**

```
{"result": [{"TIMESTAMP": 1341888374, "_id": {"$oid": "4ffbc272f679267b6e000002"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.36119137, "mResults": [0.0, 0.0], "mTime": 1341888374725, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 32.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.08727085000001}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341888374, "_id": {"$oid": "4ffbe4faf679261a4a000002"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.36119137, "mResults": [0.0, 0.0], "mTime": 1341888374725, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 32.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.08727085000001}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341908197, "_id": {"$oid": "4ffc00f7f6792624be000003"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.36118479999999, "mResults": [0.0, 0.0], "mTime": 1341908197819, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087435429999999}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341907968, "_id": {"$oid": "4ffc00f8f6792624ba000003"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361219770000005, "mResults": [0.0, 0.0], "mTime": 1341907968890, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087460910000004}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341907518, "_id": {"$oid": "4ffc0105f6792624bb000003"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361184690000002, "mResults": [0.0, 0.0], "mTime": 1341907518554, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087443710000002}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341907563, "_id": {"$oid": "4ffc0107f6792625bc000002"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361189530000004, "mResults": [0.0, 0.0], "mTime": 1341907563782, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087443869999987}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341907609, "_id": {"$oid": "4ffc0107f6792625bc000007"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361184690000002, "mResults": [0.0, 0.0], "mTime": 1341907609009, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087443710000002}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341907657, "_id": {"$oid": "4ffc0107f6792625bc00000a"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361184690000002, "mResults": [0.0, 0.0], "mTime": 1341907657426, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087443710000002}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341908149, "_id": {"$oid": "4ffc015bf6792624ba00000f"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.36118479999999, "mResults": [0.0, 0.0], "mTime": 1341908149220, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087435429999999}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341907792, "_id": {"$oid": "4ffc015ef6792625bb00000c"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361222089999998, "mResults": [0.0, 0.0], "mTime": 1341907792521, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087374009999991}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341907834, "_id": {"$oid": "4ffc015ef6792625bb00000f"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361197509999997, "mResults": [0.0, 0.0], "mTime": 1341907834072, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087434249999987}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341907879, "_id": {"$oid": "4ffc015ef6792625bb000014"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361229649999999, "mResults": [0.0, 0.0], "mTime": 1341907879514, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087405360000005}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341907927, "_id": {"$oid": "4ffc015ef6792625bb00001a"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361229649999999, "mResults": [0.0, 0.0], "mTime": 1341907927603, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087405360000005}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341888374, "_id": {"$oid": "4ffc016ff679263192000002"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.36119137, "mResults": [0.0, 0.0], "mTime": 1341888374725, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 32.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.08727085000001}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341908013, "_id": {"$oid": "4ffc0175f67926256c000022"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361192669999994, "mResults": [0.0, 0.0], "mTime": 1341908013936, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087434090000002}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341908058, "_id": {"$oid": "4ffc0175f67926256c000025"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361204739999991, "mResults": [0.0, 0.0], "mTime": 1341908058976, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087433469999993}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341908104, "_id": {"$oid": "4ffc0175f67926256c00002a"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361204739999991, "mResults": [0.0, 0.0], "mTime": 1341908104005, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087433469999993}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341907026, "_id": {"$oid": "4ffc017bf6792624bc000007"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361204739999991, "mResults": [0.0, 0.0], "mTime": 1341907026801, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087433469999993}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341907068, "_id": {"$oid": "4ffc017bf6792624bc00000b"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361182479999997, "mResults": [0.0, 0.0], "mTime": 1341907068261, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087406810000004}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341906978, "_id": {"$oid": "4ffc017bf67926312c00000b"}, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mProvider": "network", "mLatitude": 42.361204739999991, "mResults": [0.0, 0.0], "mTime": 1341906978288, "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mLon1": 0.0, "mAccuracy": 50.0, "mBearing": 0.0, "mInitialBearing": 0.0, "mHasSpeed": false, "mLon2": 0.0, "mHasBearing": false, "mLongitude": -71.087433469999993}, "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}, {"TIMESTAMP": 1341888328.0, "_id": {"$oid": "5004377f114952a0f6d415c1"}, "SCAN_RESULTS": [{"TIMESTAMP": 1316035121.0, "LOCATION": {"mHasAccuracy": true, "mHasAltitude": false, "mLon2": 0.0, "mLatitude": 42.361263270000009, "mResults": [0.0, 0.0], "mLat1": 0.0, "mDistance": 0.0, "mAltitude": 0.0, "mLat2": 0.0, "mExtras": {"networkLocationType": "wifi", "networkLocationSource": "cached"}, "mSpeed": 0.0, "mInitialBearing": 0.0, "mAccuracy": 52.0, "mBearing": 0.0, "mTime": 1316035121482.0, "mLon1": 0.0, "mHasSpeed": false, "mProvider": "network", "mHasBearing": false, "mLongitude": -71.087640010000001}}], "PROBE": "edu.mit.media.funf.probe.builtin.LocationProbe"}]} 
```

**注意** 我认为这个问题是由 JSON 引起的。我可以使用上面“获取/解析 JSON 的代码”下列出的相同方法查询其他 JSON 文件，但是当我尝试查询这个特定文件时，我得到了上面的错误......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T21:11:17.223

```
> readLines('http://dcaps-staging.media.mit.edu:8080/api/reality_analysis/get_funf_sensor_data?bearer_token=05abc49652&probe=edu.mit.media.funf.probe.builtin.LocationProbe')
[1] "<p>Test</p>" 
```

将此与您通过浏览器调用获得的结果进行比较。所以你没有被返回任何 JSON 因此错误。

以下对我来说很好：

```
library(RCurl)
library(RJSONIO)

data<-getURL('http://dcaps-staging.media.mit.edu:8080/api/reality_analysis/get_funf_sensor_data?bearer_token=05abc49652&probe=edu.mit.media.funf.probe.builtin.LocationProbe')
jdata<-fromJSON(data)

> jdata[[1]][[1]]
$TIMESTAMP
[1] 1341888374

$`_id`
                      $oid 
"4ffbc272f679267b6e000002" 

$LOCATION
$LOCATION$mHasAccuracy
[1] TRUE

etc... 
```

其原因可能是提供 JSON 的非标准端口 (8080)。如果你在浏览器[中调用 80 端口](http://dcaps-staging.media.mit.edu/api/reality_analysis/get_funf_sensor_data?bearer_token=05abc49652&probe=edu.mit.media.funf.probe.builtin.LocationProbe)，你会得到同样的结果`<p>Test</p>` `readLines`。所以可能默认的 R 方法无法处理端口更改。解决方法是使用似乎可以很好地处理它的 RCurl。

# javascript - 如何创建优雅的手风琴菜单？

> ID：11549543
> 
> 赞同：2
> 
> 时间：2012-07-18T20:15:50.660
> 
> 标签：javascript, jquery, menu

我正在尝试创建一个展开和折叠菜单以在iOS 等**移动设备**上工作，这样当您单击每个项目时，它会展开包含菜单（如果存在）。

如果您再次单击该项目，它将关闭相关的随附菜单。

但是我还想创建一个手风琴动画，这样如果您在打开其他嵌套菜单（*在菜单树的当前部分内*）时单击另一个项目，它将关闭所有其他打开的菜单并打开新菜单.

我已经设法使用各种教程创建了一个粗略的实现，但是我正在努力以一种**非常优雅**的方式来创建它，并且可以正常工作。我见过一些人为这种事情写的JS，我永远无法理解。

请在这个 jsFiddle 中查看我的尝试：http: [//jsfiddle.net/W59P9/5/](http://jsfiddle.net/W59P9/5/)

它***有点***工作，但它非常有问题，有时会导致双重动画，或者根本不起作用。当您从树上下来几次然后尝试关闭该树内或从树顶关闭项目时，这尤其容易出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:27:08.550

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css"
rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">        </script>

<script type="text/javascript" language="javascript">
$(document).ready(function () {
    $("#accordion").accordion({ active: false,
        collapsible: true
    });
});
</script>
<div id="accordion">
<h3>
    <a href="#" style="background-color: Blue; height: 25px; color: White; text-decoration: none;">
        Start Service</a></h3>
<div style="height: 40px;">
    <span>Start or Stop Servcice </span>
    <asp:Panel ID="Panel1" runat="server" BorderStyle="Solid" BorderWidth="1px">
        <p>
            some text
        </p>
    </asp:Panel>
</div>
<h3>
    <a href="#" style="background-color: Blue; height: 25px; color: White; text-decoration: none;">
        Customer Service</a></h3>
<div>
    <b>Contact Us</b>
    <asp:Panel ID="pnlSrvc" runat="server" BorderStyle="Solid" BorderWidth="1px">
        <p>some text<p>
    </asp:Panel>
</div>
<h3>
    <a href="#" style="background-color: Blue; height: 25px; color: White; text-decoration: none;">
       some text</a></h3>
<div style="height: 40px;">
    <span>some text </span>
    <asp:Panel ID="Panel2" runat="server" BorderStyle="Solid" BorderWidth="1px">
        <p>
            some text
        </p>
    </asp:Panel>

</div>
<h3>
    some text
</h3> 
```

这是我在我的移动网站上使用的东西，它运行良好..它有我的一些项目代码，但我希望你能弄清楚你想要什么......

# c# - c#：事件驱动代码中的操作顺序与流程不匹配

> ID：11549545
> 
> 赞同：0
> 
> 时间：2012-07-18T20:15:58.210
> 
> 标签：c#, list, event-handling

代码流不符合我的逻辑，我的列表没有得到所需的输出。

```
public static List<String> genericList;
public static List<String> List1; 
```

在 frmLoadCurrentForm() 中：

```
List1 = new List<String>();
genericList = new List<String>(); 
```

然后，在各个地方（？按钮）

```
1 private void btn1_Click(object sender, EventArgs e)
2 {
3     genericList = List1.ToList();
4     call(); 
5     List1 = genericList.ToList();
6 }
private void call()
{
    frmForm form = new frmForm();            
    for (int i = 0; i < genericList.Count(); i++)
        form.lst.Items.Add(genericList.ElementAt(i));
    form.Show();
    //form updates genericList on exit with lst contents, tested
} 
```

在单步执行我的代码时，我在第 5 行放置了一个断点，然后代码转到第 5 行，然后是第 4 行（进入表单），然后不会返回到第 5 行 - 所以我的 List1 没有更新里面发生的事情调用（）。

我不明白这个逻辑，也不明白该怎么做。

我正在使用多个列表和一个 genericList，以便我可以在多种情况下使用复杂的接口，理论上我的逻辑似乎是有效的......

在表单的出口处，genericList 有正确的信息，而 List1 没有。为什么 ？

编辑：添加列表声明

编辑：当我逐步完成时，表单将开始呈现，但直到调用创建表单的方法的按钮末尾的代码被执行后才会完成。更奇怪的是，因为表单实例是在一个方法中创建的，所以它应该在方法结束时关闭并处理掉......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:56:18.813

尽管我对您对上述代码的操作感到困惑，但您应该知道 Form.Show() 仅在打开的表单已关闭时才返回-也许这是您感到困惑的根源。

此外，我不知道您想对 ToList() 方法的调用做什么，因为此方法的目的是从 IEnumerable 对象生成列表对象，但您似乎从不对我有意义。

我没有测试你的代码，但我认为你的代码应该像上面写的那样执行，没有任何问题，这意味着当你单击具有事件处理方法 btn1_Click 的按钮时，执行应该如下：

1.  第 3 行的执行
2.  控制进入 call() 块中的代码并按顺序进行，直到 Form.Show() 调用。这个调用让表单显示出来，执行再次分支到内部表单代码。
3.  当表单关闭时，执行返回到 Form.Show() 调用之后的第一行，这是该方法的右大括号。
4.  下一条要执行的语句是事件处理方法的第 5 行。

当您在 btn1_Click 方法的声明行放置断点并逐步执行代码时，您应该会体验到这种行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T00:43:48.670

这绝对是线程问题。

为了以最简单的方式解决它（而不是创建单独的线程），我替换`form.Show()`为`form.ShowDialog();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:25:39.723

好吧，通过在第 5 行设置断点，您将不会运行第 5 行；但是第 4 行的调用仍然会通过，程序会正常进行。第 4 行，您调用了一个函数，该函数有效地运行，然后在返回时停止。

仅当程序执行该特定行时才会触发断点。C# 不能线性执行代码，它可以，但它不遵守该规则。

看看[http://www.ndepend.com/](http://www.ndepend.com/)这是一个地图软件，它可能会给你一个更好的想法，视觉上。

如果我的回答有误，请告知我，因此我不会传播错误信息。谢谢！

# jquery - .delay 防止fadeIn执行

> ID：11549552
> 
> 赞同：0
> 
> 时间：2012-07-18T20:16:26.873
> 
> 标签：jquery, delay, fadein

我似乎无法弄清楚为什么这段脚本会按预期工作，当“.delay（800）”被删除时......但随着它的加入，“.delay（800）”后面的fadeIn永远不会执行。知道为什么吗？

**CSS**

```
#stepone, #steptwo, #stepthree, #stepfour, #stepfive, #finish  {
display:none;
} 
```

**jQuery 脚本**

```
$(document).ready(function(){
    $("#startbutton").click(function() {
        $("#stepone, #steptwo, #stepthree, #stepfour, #stepfive, #finish").fadeOut(800);
        $("#start").delay(800).fadeIn(800);
    });
    $("#steponebutton").click(function() {
        $("#start, #steptwo, #stepthree, #stepfour, #stepfive, #finish").fadeOut(800);
        $("#stepone").delay(800).fadeIn(800);
    });
}); 
```

# c++ - 计算渔脸最佳距离阈值的方法。提供的源代码

> ID：11549554
> 
> 赞同：2
> 
> 时间：2012-07-18T20:16:39.183
> 
> 标签：c++, image-processing, opencv, face-recognition

我一直在研究基于 bytefish 提供的 fisherfaces 实现（pre opencv 2.4 版本）的人脸识别器。实际的 fisherfaces 算法是相同的，不同之处主要是方便的：

- 图像/存储压缩。

- 按字符串分类，而不是整数。

- 包容性预测（按百分比排序的多个结果）。

注意：百分比的计算公式为： percent = 1.0 - (lowdist/distthreshold) 其中 lowdist 是 src 矩阵（测试人脸图像）和投影集中的矩阵（训练人脸图像）之间的最小欧几里德距离，distthreshold 是允许的最大距离。

包容性预测是我遇到麻烦的地方。我还没有找到一种体面的方法来计算要使用的最佳阈值。目前我只是选择 2200.0 作为随机值进行测试。这当然会产生很多不稳定的结果，尤其是当面部图像来自具有不同照明和分辨率的随机源时。

所以我的问题是：有没有办法计算与渔脸一起使用的最佳距离阈值？

我已将源代码提供给下面的识别器。

忽略方法“FBaseLDARecognizer::calculateOptimalThreshold”，它还没有完成。目标是将一组人脸添加到识别器中，然后针对一组已知分类的未知人脸进行测试，并获得最大和最小正确距离。据我所知，我还没有想到一种有用的方法来使用这些数据。所以目前它总是返回 0.0。

注意：这还没有完成，我还没有清理一些性能问题。此外，此代码未注释。如果需要进一步解释，请告诉我，我可以评论并重新上传文件。

源文件：

[标题](http://pastebin.com/GuSd2gRz)

[资源](http://pastebin.com/unxd6FYM)

# database - 如何使用 Vertica Database Designer 创建查询特定的投影？

> ID：11549555
> 
> 赞同：1
> 
> 时间：2012-07-18T20:16:43.207
> 
> 标签：database, vertica

当我想创建特定于查询的投影时，应该如何将脚本提供给 Vertica 的数据库设计器？
我可以`SELECT`在文件中编写一个以上的语句作为数据库设计器的输入吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:13:30.827

使用要优化的查询创建一个文本文件。在 DBD 过程中出现提示时，将其指向该文件。

当我使用 Vertica Database Designer 处理/讨论优化时，文件中查询的建议上限似乎是 100。

如果您想更重地衡量查询，请多次输入。

# php - 是否可以让 PHPStorm 自动包含必要的文件？

> ID：11549556
> 
> 赞同：1
> 
> 时间：2012-07-18T20:16:44.580
> 
> 标签：php, phpstorm

我有一个包含很多文件的项目。通常每个文件都包含一个类定义。目前，当我需要一个对象实例时，我使用加载器，其中包含必要的文件并实例化它。这种方法虽然不允许 IntelliSense 正常工作。而且我更喜欢`new MyObject()`比`$loader->load("MyObject")`. 我使用 PHPStorm IDE。`require_once("some_file.php")`当我使用适当的类类型时，是否可以将其配置为添加必要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:28:55.083

解决方案1：切换到使用PHP（5+）的自动加载功能，然后使用`new MyObject()`： [http ://www.php.net/manual/en/function.spl-autoload-register.php](http://www.php.net/manual/en/function.spl-autoload-register.php)

解决方案 2：使用这样定义的实时模板：

```
/** @var $CLASSNAME$ $VARNAME$ **/
$VARNAME$ = $loader->load("$CLASSNAME$"); 
```

然后，您可以在每次使用 livetemplate 时选择类名和变量名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:54:12.860

自动添加`use`语句的功能将在 PhpStorm 5.0[中可用。](http://youtrack.jetbrains.com/issue/WI-1362)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:48:32.460

如果它是一个特定的项目，你总是可以创建一个模板，其中包括你所有的垃圾！十当你做 file-new 时，它会给你一个基于该模板的文件。

# asp.net - 如何在“属性”窗口中公开服务器控件的公共属性？

> ID：11549561
> 
> 赞同：0
> 
> 时间：2012-07-18T20:16:54.313
> 
> 标签：asp.net, visual-studio-2010, custom-server-controls

我有一个带有一些公共属性的 ASP.NET 服务器控件。

如果我将服务器控件放到表单上，我可以从代码隐藏中访问这些属性。但我想在表单设计器的“属性”窗口中设置它们。

属性只是字符串和布尔值，而不是复杂类型。我正在使用 Visual Studio 2010 和 .NET 4.0。

如何在设计模式下向“属性”窗口公开服务器控件属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:20:26.957

这是一个老歌，但一个好人。看起来像你在找什么。 [向 ASP.NET 控件添加设计时支持](http://msdn.microsoft.com/en-us/library/aa478960.aspx)

这是一篇更新的文章：[组件的设计时属性](http://msdn.microsoft.com/en-us/library/tk67c2t8.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:25:02.063

使用[Browsable](http://msdn.microsoft.com/en-us/library/system.componentmodel.browsableattribute.aspx)属性装饰器

```
//C#
[Browsable(true)]
 public string MyProperty {
    get {

    }
    set {

    }
 }

 'VB
<Browsable(True)> _
Public Property MyProperty() As String
    Get

    End Get
    Set

    End Set 
End Property 
```

# ios - 如何在 WebView ( iOS 5 ) 中使用 pull 刷新？

> ID：11549563
> 
> 赞同：0
> 
> 时间：2012-07-18T20:17:03.623
> 
> 标签：ios, uiscrollview

如何在 iOS 5 中为 UIWebView 制作“拉动刷新”？我找不到教程。

我在标签栏应用程序中有一个 WebView，我想用 Twitter 之类的“拉动刷新”来刷新 WebView。

我在哪里可以找到完整的教程？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:10:36.873

我无法提供教程，也许我会写一个，但我认为它很简单，我做了这个稍微修改了 SPPullView。

[在这里您可以获取文件（SPPullView.m 和 SPPullView.h）。](http://herotyc.untergrund.net/upload/SPPullView.zip)

主 UIViewController 中的相关代码类似于：

```
- (void)viewDidLoad
{   
    [super viewDidLoad];
    self.pullView = [[SPPullView alloc] initWithScrollView:self.webView.scrollView];
    [self.pullView setDelegate:self];
    [self.webView.scrollView addSubview:self.pullView];    
    [self.webView.scrollView setDelegate:self];
    for (UIView *subview in [self.webView.scrollView subviews] ) {
       subview.userInteractionEnabled = NO; // used to disable copy/paste, etc inside the webview
    }
    //[self doYourStuff];
}

//Called when the user pulls to refresh (this is when you should update your data)
- (void) pullViewShouldRefresh: (SPPullView *) view {
    [self updateYourStuff];
} 
```

您还可以添加一些逻辑或属性来防止用户缩放，或者在缩放时暂时停用拉取视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:21:31.817

这很好用：http: [//blog.gomiso.com/2012/03/22/yet-another-pull-to-refresh-library/](http://blog.gomiso.com/2012/03/22/yet-another-pull-to-refresh-library/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-31T10:58:57.757

我写了这段代码，它工作正常。这可能会对您有所帮助。

```
- (void)viewDidLoad
{
   [super viewDidLoad];

   NSString *fullURL = URL you want to hit;
   NSURL *url = [NSURL URLWithString:fullURL];
   NSURLRequest *requestObject = [NSURLRequest requestWithURL:url];
   webView.delegate = (id)self;
   [webView loadRequest:requestObject];

   UIRefreshControl *refreshControlOnPull = [[UIRefreshControl alloc] init];
   [refreshControlOnPull addTarget:self action:@selector(handleRefresh:) forControlEvents:UIControlEventValueChanged];
   [webView.scrollView refreshControlOnPull]; //<- this is point to use. Add "scrollView" property.
}

-(void)handleRefresh:(UIRefreshControl *)refresh {
   // Reload my data
   NSString *fullURL = The Url you want to hit;
   NSURL *url = [NSURL URLWithString:fullURL];
   NSURLRequest *requestObject = [NSURLRequest requestWithURL:url];
   [webView loadRequest:requestObject];
   [refresh endRefreshing];
} 
```

# mysql - 带游标的mysql程序太慢了..为什么？

> ID：11549567
> 
> 赞同：3
> 
> 时间：2012-07-18T20:17:12.877
> 
> 标签：mysql, performance, cursor, procedure

我使用游标创建了一个 Mysql 过程，但它运行得太慢了......它每秒在 40 到 60 行之间......见：

```
DELIMITER $$
CREATE PROCEDURE sp_create(IN v_idsorteio INT,OUT afetados INT)
  BEGIN
        DECLARE done INT default 0;
        DECLARE vc_idsocio INT;
        DECLARE z INT;
        DECLARE cur1 CURSOR FOR select IdSocio from socios where Sorteio=1  and Finalizado='S' and CodClientes IS NOT NULL;
        DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET done=1;
        SET z=1;
        OPEN cur1;
        FETCH cur1 INTO vc_idsocio;
        WHILE done=0 DO
            -- SELECT register as t; 
            insert INTO socios_numeros_sorteio (IdSocio,IdSorteio,NumerodeSorteio) VALUES (vc_idsocio,v_idsorteio,z);
            FETCH cur1 INTO vc_idsocio;
            SET z = z+1;
        END WHILE;
        CLOSE cur1;
        Select z-1 as total INTO afetados;
  END$$
DELIMITER ; 
```

我该如何改善呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T20:16:02.083

This is slow because you are looping through a resultset, row by row, and performing individual insert statements for each row returned. That's why it's gonna be slow.

Let's briefly summarize what you are doing. First, you are running a query:

```
select IdSocio
  from socios
 where Sorteio=1
   and Finalizado='S'
   and CodClientes IS NOT NULL; 
```

(Apparently the order these rows are returned in is not important.)

Then for each row returned from that query, you want to insert a row into another table.

```
insert INTO socios_numeros_sorteio
(IdSocio
,IdSorteio
,NumerodeSorteio
) VALUES
(vc_idsocio
,v_idsorteio
,z); 
```

The value for the first column is coming from a value returned by the query. The value for the second column is being assigned a value passed as an argument to the procedure. And the value for the third column is from a counter that starts at 1 and is being incremented by 1 for each row.

MySQL is optimized to perform an operation like this. But it's NOT optimized to do this using a stored procedure that loops through a cursor row by row.

If you are looking to get some reasonable performance, you need to SIGNIFICANTLY REDUCE the number of individual INSERT statements you run, and instead think in terms of processing data in "sets" rather than individual rows. One approach is batch the rows up into "extended insert" statements, which can insert multiple rows at a time. (The number rows you can insert in one statement is effectively limited by max_allowed_packet.)

That approach will significantly improve performance, but it doesn't avoid the overhead of the cursor, fetching each row into procedure variables.

Something like this (in the body of your procedure) is likely to perform much, much better, because it takes the result set from your select and inserts all of the rows into the destination table in one fell swoop, without bothering to mess with updating the values of variables in the procedure.

```
BEGIN

SET @idsorteio = v_idsorteio;

INSERT INTO socios_numeros_sorteio
( IdSocio
, IdSorteio
, NumerodeSorteio
)
SELECT s.IdSocio   AS IdSocio
     , @idsorteio  AS IdSorteio
     , @z := @z+1  AS NumerodeSorteio
  FROM socios s
  JOIN (SELECT @z := 0) z
 WHERE s.Sorteio=1
   AND s.Finalizado='S'
   AND s.CodClientes IS NOT NULL;

SELECT ROW_NUMBER() INTO afetados;

END$$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-07T10:56:40.140

另一个简单的解决方案是仅通过运行以下查询将表的引擎更改为 MyISAM，

```
ALTER TABLE `socios_numeros_sorteio`
ENGINE=MyISAM; 
```

然后再次调用该过程。注意：MyISAM 使插入过程非常快

# magento - 如何更新产品属性？

> ID：11549570
> 
> 赞同：0
> 
> 时间：2012-07-18T20:17:37.510
> 
> 标签：magento, magento-1.7

我有数千种产品，它们具有一些常见的默认值：

> 页面布局：无布局更新；可见性：单独不可见；
> 类别：空的，

现在我想改变这三个属性，如下所示：

> 页面布局：1列；可见性：目录、搜索 (4)；类别：1，

我试图用下面的代码完成它，但它不起作用。

```
$collection = Mage::getResourceModel('catalog/product_collection')->load();

foreach($collection as $items)
{  
    $product = Mage::getModel('catalog/product')->load($items->getId());  
    $product->setVisibility(4);  
    $product->save();
    echo $product->getId().'<br>';        
} 
```

谁能告诉我我的代码有什么问题？

我也尝试在数据库中完成。但是我不知道哪个表可以控制可见性，哪个表可以控制布局或类别。（使用 Magento 1.7）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:19:33.350

您可以直接从管理区域执行此操作：

目录 -> 管理产品

检查您要编辑的文章，然后从“操作”下拉菜单中选择“更改属性”。

您现在可以大量更改产品的属性

干杯

# php - JQuery Ajax 调用失败但服务被命中

> ID：11549574
> 
> 赞同：0
> 
> 时间：2012-07-18T20:17:58.150
> 
> 标签：php, jquery, wcf, cross-domain

我不确定如何最好地解释这一点，所以请耐心等待。

我在一些 javascript 中有以下内容（使用 jQuery）

```
$(document).ready(function(){
    $("#myForm").submit(function(){

       var request = $.ajax({
          url: "myPage.php", //sits on localhost
          crossDomain: true,
          type: "POST",
          data: {
             var1 : "foo",
             var2 : "bar"
          }
        });

     request.done(function(res){
           alert("DONE");
     });

    request.fail(function(jqXHR , textStatus){
           alert(textStatus);
    });      
} 
```

MyPage.php 使用 SoapClient 调用服务。然后返回一些数据。

我可以直接从 webBrowser 调用 MyPage.php 并得到结果（因为没有 POST 数据而失败）。

如果我尝试从 AJAX 调用 MyPage.php 并在我的服务中放置一个断点，我会看到该服务被调用并返回一个值。

但是 request.Fail 总是调用。看起来它只是在服务完成之前直接跳转到那个失败。

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:20:32.410

我可能是错的，但你没有错过数据和数据映射之间的冒号吗？然后你应该`key : value`不在`key = value`地图内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:21:48.727

您的语法错误，应该是：

```
data: {
         var1: "foo",
         var2: "bar"
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:29:00.180

我不知道为什么，但显然从 $("#myForm").submit(function(){

并将其移至函数 SubmitForm(){...}

然后从

修复了整个事情。感谢您的建议....

# ruby-on-rails - Capybara 不执行 Backbone 模型的 fetch()

> ID：11549575
> 
> 赞同：0
> 
> 时间：2012-07-18T20:18:02.293
> 
> 标签：ruby-on-rails, ruby, backbone.js, capybara, capybara-webkit

我正在尝试为我用 Backbone 和 Rails 3.2 编写的单页应用程序编写集成测试当使用实际浏览器（Chrome）时，事情似乎在客户端工作但是，当使用 Capybara 使用客户端代码进行测试时（使用Cucumber)，模型的 fetch() 方法没有完成。我这样做： $.active jQuery 调用，并且数字不会变为 0 .. 有什么想法可能是错误的吗？

```
page.execute_script("$.active") # -> 0
page.execute_script("App.backboneModel.fetch()")
page.execute_script("$.active") # -> 1
# ... long time later...
page.execute_script("$.active") # -> 1 
```

我使用 capybara-webkit 作为无头浏览器，我也尝试使用 Selenium/firefox。上面的代码完全可以在启动了 rails 实例的实际浏览器上运行，但是在测试期间它不起作用！由于某种原因，ajax 调用没有完成......我完全被难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:51:25.047

试试这个帮手

```
def wait_for_ajax(timeout = Capybara.default_wait_time)
  page.wait_until(timeout) do
    page.evaluate_script 'jQuery.active == 0'
  end
end 
```

来源/更多信息： [http ://artsy.github.com/blog/2012/02/03/reliably-testing-asynchronous-ui-w-slash-rspec-and-capybara/](http://artsy.github.com/blog/2012/02/03/reliably-testing-asynchronous-ui-w-slash-rspec-and-capybara/)

# c# - 从 SortedDictionary 中查找具有最大值的键？

> ID：11549580
> 
> 赞同：8
> 
> 时间：2012-07-18T20:18:34.603
> 
> 标签：c#, max, sorteddictionary

我有一个`SortedDictionary`如何找到与最大值关联的键？我是否必须遍历每个 KeyValuePair？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:48:20.657

如果`dict`是 your `SortedDictionary<,>`（或 any `IDictionary<,>`）并且您想要与最大值对应的*所有*`dict`键，请首先检查它不为 null 或为空（您至少需要一个元素）。那么也许这有效：

```
var max = dict.Values.Max();
var relevantKeys = dict.Where(pair => max.Equals(pair.Value))
    .Select(pair => pair.Key); 
```

也许它可以更有效地完成？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:24:27.560

使用`Enumerable.OrderByDescending()`然后访问返回的`Key`属性，`First()`如下所示：

```
 var dict = new SortedDictionary<string, string>
                       {
                           {"key1", "value3"},
                           {"key2", "value1"},
                           {"key3", "value2"},
                       };

        var max = dict.OrderByDescending(d => d.Value).First();
        var key = max.Key; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:26:18.800

获取与最大值关联的键，意味着您实际上并未使用 SortedDictionary 的默认排序。这是因为 SortedDictionar 按 Key 排序，而不是按 Value。所以要做你想做的事，你会用老式的 LINQ 方式来做：

```
sortedDict.OrderByDescending(kvp => kvp.Value).First().Key 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T20:36:17.860

您可以使用 MoreLinq 中的[MaxBy](http://code.google.com/p/morelinq/)[方法](http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs?spec=svn2da75c30d5bda7959e5113b702b4bb204a0e4a2c&r=2da75c30d5bda7959e5113b702b4bb204a0e4a2c)来有效地运行此查询。

```
var result =  dictionary.MaxBy(pair => pair.Value).Key; 
```

这只需要迭代一次数据，而不是对值进行排序并获取第一个结果（将是`O(n * log(n))`）。

由于只对键而不是值进行排序，因此如果不至少循环每个键对一次，就无法执行此查询。

另一种选择是拥有两个 SortedDictionaries。一个是你已经拥有的，另一个是反向字典。对于当前字典中的每个值，您可以将其作为键添加到第二个字典，第二个字典的值将是第一个字典中的键（如果它是一对多关系而不是一对一的值反向查找需要是项目列表）。虽然创建第二个字典会以编程方式“昂贵”（在内存中比在时间上更多，但仍然是两者中的一些），但一旦您这样做，您将能够基于值而不是键有效地查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T20:41:48.477

要获得所有保留您感兴趣的最大值的键，必须进行一些数据处理。实际上这在 C# 中很舒服。

可以通过一些 Linq 的组合来完成

```
// first of all, group your dictionary by the value you want to have
var groups = dict.GroupBy(d => d.Value);

// then, order those groups by the value
var orderedGroups = groups.OrderBy(g => g.Key);

// after that, you have all the KeyValuePairs that hold the MaxValue here:
var maxKeys = orderedGroups.Last().ToList(); 
```

玩得开心！

# ruby-on-rails - 通过电子邮件发送一个已经存在的页面

> ID：11549583
> 
> 赞同：0
> 
> 时间：2012-07-18T20:18:46.487
> 
> 标签：ruby-on-rails, email

我正在查看本教程[http://guides.rubyonrails.org/action_mailer_basics.html](http://guides.rubyonrails.org/action_mailer_basics.html)，我明白为什么它会发送视图中的 html 页面。但是，如何发送在创建邮件程序之前已经存在的页面？我不想复制 html 和 ruby​​ 代码，因为我不想维护该代码的另一个副本。

我要发送电子邮件的页面是公告页面，并且公告页面已经有另一个视图，因为它可以从站点的其他部分访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:29:50.530

您可以将 :template_path 和 :template_name 哈希键传递给邮件程序中的特定方法，如下所示：

```
mail(:to => user.email,
         :subject => "Subject",
         :template_path => 'announcements',
         :template_name => 'index') 
```

在这种情况下，它将在 app/views/announcements 中查找具有名称索引的模板。

# sql - 在表行中链接 sql 表

> ID：11549588
> 
> 赞同：0
> 
> 时间：2012-07-18T20:19:09.163
> 
> 标签：sql, sqlite

我不确定如何问这个问题，但我会尽力而为。目前，我有一些表将索引保存到其他表中以获取信息。例如，我有一个name_id为1的行，这表明我应该查看'name'表并转到索引1。有没有直接链接一行中的一行？还有比这更好的设计选择吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:20:57.360

您想使用所谓的外键，[这](http://www.sqlite.org/foreignkeys.html)是 Sqlite 中对它们的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:23:03.887

这是数据库设计的首选方法

您编写一个使用 JOIN 来获取链接行的 sql 语句。

# .net - 如何使用正则表达式匹配 URL？

> ID：11549590
> 
> 赞同：1
> 
> 时间：2012-07-18T20:19:21.143
> 
> 标签：.net, regex, vb.net

我有字符串：

```
http://example.com/a b.html https://example.net/a+b+c http://example.org/one two three 
```

每个链接都以 http 或 https 开头，并且每个链接都包含空格
结尾的字符，是另一个链接的开头。我怎样才能得到

```
http://example.com/a b.html
https://example.net/a+b+c
http://example.org/one two three.html 
```

使用正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:24:49.627

这个正则表达式应该找到你需要的：

```
https?.+?(?=http|$) 
```

# hibernate - Ehcache 存储但不检索（Ehcache + Hibernate）

> ID：11549591
> 
> 赞同：3
> 
> 时间：2012-07-18T20:19:22.940
> 
> 标签：hibernate, jakarta-ee, ehcache

我正在使用 ehcache 来缓存使用休眠的实体。

查看 ehcache 监视器，一切似乎都工作正常（将缓存计数刷新为零，然后重新加载将计数恢复为一），但如果我直接在 db 上更改某些值并重新加载，则会显示更新的值而不是缓存的值. 我不知道这是否是预期的行为，但作为缓存这样做会很奇怪。

我已经尝试了所有找到的解决方案来解决这个问题，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:06:24.043

这是预期的行为。数据库是所有正确数据的来源，缓存的存在是为了加快对数据库中数据的访问。如果数据不同，则缓存根据定义是错误的。

**因此，如果您重新加载缓存，则会从数据库中重新加载。**

如果通过 Hibernate 保存数据，则数据将写入缓存和数据库。当您有多个线程/进程读取或写入时，这里可能会出现问题。有关如何管理它，请参阅[Hibernate 文档中的缓存策略](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch06.html#caching-strategies-list)

一般来说，更新数据库会直接导致缓存没有正确数据的问题，除非通知它必须使其拥有的数据无效和/或从数据库重新加载。

# java - CDI - bean 实例可重用性

> ID：11549592
> 
> 赞同：1
> 
> 时间：2012-07-18T20:19:24.930
> 
> 标签：java, jakarta-ee, cdi

在我看来，以下结果应该是两个字段都指向同一个实例，

```
class BeanToInject {
    // something
}

class TargetBean {

    @Inject
    private BeanToInject first;

    @Inject
    private BeanToInject second;

} 
```

但这似乎不是真的，因为我得到了第一个和第二个 sysouting

```
first: BeanToInject@2f51cd27
second: BeanToInject@1e92abdf 
```

是不是应该在给定的上下文中重用bean的引用？我在这里错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:23:42.547

您没有指定 的范围`BeanToInject`，CDI 的默认范围是[依赖伪范围](http://docs.jboss.org/weld/reference/1.0.0/en-US/html/scopescontexts.html#d0e1816)，其中每个注入点都接收一个新的 bean 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:22:25.247

您必须将`BeanToInject`类注释为[@Singleton](http://docs.oracle.com/javaee/6/api/javax/inject/Singleton.html)才能在两个注入点中使用相同的实例。

# c++ - 在游戏引擎中为自定义内存分配重载“新”和“删除”有什么好处？

> ID：11549597
> 
> 赞同：1
> 
> 时间：2012-07-18T20:19:41.093
> 
> 标签：c++, memory-management, game-engine

我正在将我的游戏引擎从 Java 移植到 C++。我一直在对自定义内存分配器进行大量研究，因为我现在需要担心内存管理。我读过的关于该主题的每篇文章都说您应该重载`new`and`delete`运算符。但是，这些重载的运算符通常只是委托并调用处理内存分配的自定义函数。此外，通常使用宏，例如：

```
#define New(className, size, description) customNew(className, size, description, __FILE__, __LINE__) 
```

它甚至从不使用重载`new`运算符，而只是调用自定义方法。我了解宏如何有用，因为您可以很好地获取文件名和行号，但是为什么要重载`new`以及`delete`如果在代码中您只是要使用宏`New`而不是运算符。

`new`此外，当我们的自定义分配器可能想知道附加信息（例如描述、文件名和行号）时，覆盖（而不是重载）默认值似乎毫无意义。我们不可能知道关于标准调用的信息`new`，也不能以有意义的方式将其委托给我们`customNew`。

我没有看到重载和覆盖这些运算符的巨大好处。

在我看来，调用：

```
customNew(className, size, desc, file, line); 
```

比调用重载更直观`new`：

```
new (size, desc, file, line) className(); 
```

最后，如果我要覆盖和超载，最好的地方是哪里？每堂课都这样做是令人讨厌的乏味。可以通过命名空间来完成吗？我计划为每个子系统设置单独的项目，以便它们可以独立维护。我将如何促进跨项目以及游戏项目内的覆盖和重载？请原谅我的 C++ n00bishness。有一阵子了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:50:15.613

> 我没有看到重载和覆盖这些运算符的巨大好处。

有一点很明显：你无法逃脱它（不是没有工作）。

如果您希望您的所有内存分配都通过一个位置，那么有人搞砸它所需要的就是：

```
new Foo(); 
```

但是，如果您全局覆盖运算符`new`and `delete`，它们必须做更多的工作：

```
void * ptr = malloc(sizeof(Foo));
new(ptr) Foo; 
```

还有一点是，*绝大多数*C++ 程序员都习惯`new`和`delete`，他们将默认使用 。如果您要求他们使用某个功能，那您就必须教他们，他们必须学习。如果他们犯了错误并使用标准方式，请参见上文。

哦，然后是语法：

```
customNew(className, size, desc, file, line); 
```

那是行不通的。这可能会分配内存，但*不会*构造类型。它与 没有什么不同`malloc`。所以名字本身就是谎言；这不是“新”的东西。这只是分配。

您需要使用 C++11 可变参数模板和就地构造来正确执行操作：

```
template<typename T, typename ...Args>
T *customNew<T>(const char *className, const char *desc, size_t file, size_t line, Args&&... args)
{
  void* ptr = allocate_memory(className, sizeof(T), desc, file, line);
  return new(ptr) T(std::forward<Args>(args)...);
} 
```

就个人而言，我会说`new(...) T(...)`语法比`customNew<T>(...)`版本干净得多。很清楚哪些参数进入分配器，哪些参数进入类型本身。它当然更*标准*。

> 但是我在哪里覆盖全局 new 并删除

*在全球范围内*。就像在全局命名空间中一样。您将重载粘贴在标题中的某个地方并将其包含在任何地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:45:21.990

您可能有一个通用分配器，它被垃圾收集、对齐并具有最大大小限制，这可能是您的规范的限制。如果您使用使用 new/delete 的外部代码，您可以将请求重定向到此分配器作为某种低级/系统内存空间。

此外，我阅读的文章通常以[全局运算符](http://www.swedishcoding.com/2008/08/31/are-we-out-of-memory/)作为开始。这是关于该主题的一个很好的[stackoverflow帖子](https://stackoverflow.com/questions/1152511/any-reason-to-overload-global-new-and-delete)。

# jsp - 双引号内的 JSTL 标记

> ID：11549599
> 
> 赞同：0
> 
> 时间：2012-07-18T20:19:44.863
> 
> 标签：jsp, jstl

我正在使用 JSTL，我有这样一行

```
<cues:tr id="<c:out value="${key.id}"/>"> 
```

其中 key 是一个 bean。

但我得到这个编译错误

org.apache.struts.taglib.tiles.InsertTag$InsertHandler.doEndTag(InsertTag.java:923) 处未终止的 <cues:tr 标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:41:54.790

你的标签`cues:tr`

```
<cues:tr id="<c:out value="${key.id}"/>"> 
```

被嵌入式 c:out 标记中的双引号终止

```
<c:out value="${key.id}"/> 
```

就在 ${key.id ...

尝试将您的标签更改为

```
 <cues:tr id="${key.id}"> 
```

那么你的标记应该被正确解释

**更新：**在您的评论中，您询问*“${key.id}”是如何被解释的？*

请参阅[表达式语言](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)教程的[使用表达式](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html#wp71322)部分，了解它在标签内的工作方式。

# asp.net - 如何使 .aspx 文件中的 .ascx 属性可设置

> ID：11549602
> 
> 赞同：0
> 
> 时间：2012-07-18T20:19:47.620
> 
> 标签：asp.net, user-controls

我有一个用户控件，它具有在代码隐藏 (.ascx.cs) 中定义的公共属性。有没有办法直接在使用控件的 .aspx 文件的标记内设置此属性？我已经可以在 .aspx 文件的代码隐藏中访问该属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:24:37.540

除非我遗漏了一些明显的东西，否则很容易......

```
<uc1:MyCtrl runat="server" MyVal="this value" /> 
```

# asp.net-mvc - dot net mvc 4，针对 LDAP 的用户身份验证

> ID：11549603
> 
> 赞同：1
> 
> 时间：2012-07-18T20:19:49.730
> 
> 标签：asp.net-mvc, ldap

我是 dot net 的新手，我尝试了很多选项，但仍然无法针对 LDAP 对用户进行身份验证。我有一个网络表单，用户应该在其中输入他的登录名和密码。我的 ldap 服务器是 LDAPS://aaa.bbb.CCC.com DN 是 OU=People, O=CCC

有人可以提供我应该添加到 webconfig 以使 ldap 身份验证工作的内容吗？

# html - 在悬停时更改多个图像和文本并单击

> ID：11549604
> 
> 赞同：1
> 
> 时间：2012-07-18T20:19:50.067
> 
> 标签：html, css, hover

我只是有一个关于如何在悬停和单击时更改图像和文本的问题。它们并排放置，现在我知道如何同时交换它们。现在我的后续问题是：如何使这些图像和文本中的几个相互交换？

只能用css吗？还是我需要添加一些脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:27:21.953

如果您要问的是是否可以在给定的时间间隔内自动交换它们，那么答案是**肯定**的，可以使用 CSS，使用[**关键帧动画**](https://developer.mozilla.org/en/CSS/CSS_animations)- 您可以为`opacity`属性设置动画。

**更新**：[**使用关键帧动画的图片库**](http://dabblet.com/gist/3139170)

* * *

当您有某种缩略图或导航按钮时，您也可以这样做，在这种情况下，这与我在[回答](https://stackoverflow.com/a/11549483/1397351)您之前的问题时使用的技术基本相同 - 一个非常基本的（咳咳，非常基本的意思是我在几周前几分钟，然后我懒得回来美化）这种*画廊使用缩略图导航*的例子，你可以在这里看到[http://dabblet.com/gist/3102051](http://dabblet.com/gist/3102051)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:23:32.203

您可以使用 CSS :hover 伪类在悬停事件上更改背景图像（或使用 CSS sprites 更改背景位置），但对于单击事件并没有纯 CSS 的方法。您可能需要为此查看 javascript

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:31:01.127

是的，只能使用 CSS。查看此博客文章了解详细信息： [http](http://sixrevisions.com/css/css-only-tooltips/) ://sixrevisions.com/css/css-only-tooltips/ 。您能否提供一些示例代码来帮助理解它是如何完成的。尽管如此，我上面提到的链接必须能够帮助您。

# java - 代码执行行的顺序

> ID：11549607
> 
> 赞同：0
> 
> 时间：2012-07-18T20:20:03.097
> 
> 标签：java, android, sleep, execution, routines

我不明白：

在 ShakeListener 类中，我在包含类中执行一个例程。

例程是：

```
 public void showWord(){
        myShakeListener.stop();     

        flipper.showNext();

        v.vibrate(countdown5, -1);

        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        myShakeListener.start();
    } 
```

奇怪的事情（对我来说，仍然是初学者）是线程在显示下一个视图之前休眠。这是为什么？

我想要完成的是：用户摇动手机-> viewflipper 翻转到下一个-> 手机对摇动 5 秒没有响应-> 用户摇动手机-> viewflipper 翻转到下一个...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:26:51.780

问题是 viewflipper 可能是另一个线程。你遇到了比赛条件。更好的选择是生成一个 5 秒的线程，该线程在启动时将称为“noshake”之类的布尔值设置为 true，并在完成时将其设置为 false。在允许另一次摇动之前检查 noshake == false。

这有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:28:30.893

这是因为您的代码阻塞了 UI 线程。你应该这样做：

```
Handler mHandler = new Handler();
public void showWord(){
    myShakeListener.stop();     

    flipper.showNext();

    v.vibrate(countdown5, -1);

    mHandler.postAtTime(new Runnable() {
        @Override
        public void run() {
            myShakeListener.start();
        }
    }, 5000);
} 
```

# c++ - 访问实例外部的函数指针

> ID：11549610
> 
> 赞同：3
> 
> 时间：2012-07-18T20:20:14.373
> 
> 标签：c++, function-pointers

我有一堂课，如下所述：

```
class InputReader 
{  
public:
  typedef void (*handler)(std::string, int);
  static void errorHandler(std::string error, int severity); //Supplies a default error handler
  static void warningHandler(std::string error, int severity); //Supplies a default warning handler
  handler errorH;
  handler warningH;

  InputReader(std::string pwd = "", handler eHandler = errorHandler, handler wHandler = warningHandler);

  bool readFile(std::string filename);
  std::vector<first> mesh;
  //other irrelevant objects that need to be read into
}; 
```

`first`是一个结构：

```
struct first
{
  std::string filename;
  double scale;
}; 
```

在[Mooing Duck](https://stackoverflow.com/users/845092/mooing-duck)的帮助下，我有：

```
std::istream& operator>>(std::istream& file, first& obj) 
{
  std::string symbol;
  while(file >> symbol) 
  {
    if (symbol[0] == '#') 
    {
      std::getline(file, symbol);
    } 
    else if (symbol == FIRSTTAGEND) 
    {
      break;
    }
    else if (symbol == FILEPATH) 
    {
      if (!(file >> '=' >> obj.filename))
        std::cerr << symbol << " is incorrectly formatted"; //This needs to use errorH
    } 
    else if (symbol == SCALE) 
    {
      if (! (file >> '=' >> obj.scale) )
        std::cerr << symbol << " is incorrectly formatted"; //This needs to use errorH
    } 
    else 
    { //not a member: failure
      std::cerr << symbol << " is not a member of first";
      file.setstate(file.rdstate() | std::ios::badbit);
      break;
    }
  }
  return file;
}

std::istream& operator>>(std::istream& file, InputReader& obj) 
{
  std::string symbol;
  while(file >> symbol) 
  {
    if (symbol[0] == '#') 
    {
      std::getline(file, symbol);
    } 
    else if (symbol == FIRSTTAGBEG) 
    {
      first t;
      if (file >> t)
        obj.mesh.push_back(t);
    } 
    else 
    {
      obj.errorH(symbol + " is not a member of the input reader.", 1);
      file.setstate(file.rdstate() | std::ios::badbit);
    }
  }
  return file;
}

bool InputReader::readFile(std::string filename)
{
  std::ifstream infile;
  infile.open(filename.c_str());
  infile >> *this;
  return true;
} 
```

`errorH`在构造 InputReader 对象时设置。它可以由该类的用户提供，否则，它使用我提供的默认值。`errorH`唯一的问题是当`first`被读入时我无法访问。我该如何解决这个问题？

问题限制：不允许使用外部库。不允许使用 C++11/C++OX。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:32:36.083

你自然有几个选择：

1.  不要使用`>>`运算符并创建一个功能相同但接受三个参数的函数 - 输入流、`first`对象和输入读取器对象。
2.  定义`>>`接受`first`和`InputReader`作为第二个参数（即一对指针）的元组的运算符。例如：`std::istream& operator>>(std::istream& file, std::pair<first *, InputReader *> & obj)`。

只要您有良好的想象力，您可以无限期地扩展此列表。

希望能帮助到你。

***更新：***

这里有一些简单的例子：

```
#include <string>
#include <vector>
#include <fstream>
#include <iostream>

struct first {
    std::string filename;
    double scale;
};

class InputReader {
  public:
    typedef void (*handler)(const std::string &, int);

    InputReader(const std::string & pwd = std::string(),
                handler eHandler = errorHandler,
                handler wHandler = warningHandler);

    bool readFile(const std::string & filename);

    static void errorHandler(const std::string & error, int severity);
    static void warningHandler(const std::string & error, int severity);

    handler errorH;
    handler warningH;
    first firstobj;
    std::vector<first> mesh;
};

std::istream & operator >> (std::istream & file,
                            std::pair<first, InputReader *> & obj)
{
    std::string symbol;
    while (file >> symbol) {
        if (symbol[0] == '#') {
            std::getline(file, symbol);
        } else if (symbol == "FIRSTTAGEND") {
            break;
        } else if (symbol == "FILEPATH") {
            if (!(file >> obj.first.filename))
                obj.second->errorHandler(symbol + " is incorrectly formatted",
                                         1);
        } else if (symbol == "SCALE") {
            if (!(file >> obj.first.scale))
                obj.second->errorHandler(symbol + " is incorrectly formatted",
                                         1);
        } else { //not a member: failure
            std::cerr << symbol << " is not a member of first";
            file.setstate(file.rdstate() | std::ios::badbit);
            break;
        }
    }
    return file;
}

std::istream & operator>>(std::istream & file, InputReader & obj)
{
    std::string symbol;

    while (file >> symbol) {
        if (symbol[0] == '#') {
            std::getline(file, symbol);
        } else if (symbol == "FIRSTTAGBEG") {
            std::pair<first, InputReader *> t(first(), &obj);
            if (file >> t)
                obj.mesh.push_back(t.first);
        } else {
            obj.errorH(symbol + " is not a member of the input reader.", 1);
            file.setstate(file.rdstate() | std::ios::badbit);
        }
    }
    return file;
}

bool InputReader::readFile(const std::string & filename)
{
    std::ifstream infile;
    infile.open(filename.c_str());
    infile >> *this;
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T15:49:20.770

Vlad 提出了一个有趣的想法，但我不喜欢使用`std::pair<first, InputReader *>`，因为那不是我想要阅读的类型。我会稍微改变你目前的设计。将流读取函数移动到一个单独的函数，该函数接受流引用以及您需要的任何其他变量，并让流操作符调用该成员。当您希望操作员可以访问可选的附加参数时，通常会使用此想法

```
std::istream& loadObjectFromFile(std::istream& file, 
              first& obj,
              handler errorH=InputReader::errorHandler, 
              handler warningH=InputReader::warningHandler); //new
std::istream& operator>>(std::istream& file, first& obj)
{return loadObjectFromFile(file, obj);} 
```

然后实现阅读器功能，是直接复制粘贴，除了现在你还有错误处理程序

```
std::istream& loadObjectFromFile(std::istream& file, first& obj
                                    handler errorH, handler warningH) {
  ...
    else if (symbol == FILEPATH) 
    {
      if (!(file >> '=' >> obj.filename))
        errorH(symbol + " is incorrectly formatted.", 1); //new
    } 
    else if (symbol == SCALE) 
    {
      if (! (file >> '=' >> obj.scale) )
        errorH(symbol + " is incorrectly formatted.", 1); //new
    } 
    else 
    { //not a member: failure
      errorH(symbol + " is not a member of first.", 1); //new
      file.setstate(file.rdstate() | std::ios::badbit);
      break;
    }
  }
  return file;
} 
```

然后，InputReader的istream函数相应变化

```
std::istream& operator>>(std::istream& file, InputReader& obj) 
{
    ...
    else if (symbol == FIRSTTAGBEG) 
    {
      first t;
      if (loadObjectFromFile(file, obj))
        mesh.push_back(t);
    } 
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T21:03:07.143

替换`std::istream& operator>>(std::istream& file, first& obj)`为`std::istream &InputReader::readObj(std::istream &file, first &obj)`。

此外，为了保持一致性，请替换`std::istream& operator>>(std::istream& file, InputReader& obj)`为`std::istream &InputReader::readFileStream(std::istream& file)`.

然后在`readFileStream`你可以写`if (readObj(file, t))`，在`readObj`你可以写 `errorH("oops", -1)`。

# svn - UNIX：计算行号和字符串之间的字符

> ID：11549611
> 
> 赞同：0
> 
> 时间：2012-07-18T20:20:18.337
> 
> 标签：svn, unix

我目前正在将一个 SVN 服务器的内容迁移到另一个。长话短说，我尝试使用`dos2unix`它来转换一些行尾，但它最终弄乱了大部分修订日志而没有修复任何东西。`svnadmin`现在由于格式错误的文件错误，我无法使用创建完整的转储文件。这些文件的结构如下：

```
K (# of chars in following line)
svn:author
V (# of chars in following line)
(author)
K ##
svn:date
V ## 
(date)
K ##
svn:log
V (# of chars in following lines)
revision
commit
text
END 
```

错误源于最后一个数字`V`不正确。到目前为止，我一直在手动更改数字，包括复制文本、计算某处的字符、更改数字、保存，然后运行`svnadmin dump DIR > dumpfile.dmp`以查找下一个。我一般不会介意，但是运行`svnadmin dump`命令需要一点时间，而且我会经常运行它。

我的问题是：有没有办法编写一个脚本来计算从第 12 行到“END”之前的行尾的字符数，然后替换第 11 行中的数字？我对 unix 比较陌生，并且研究了 awk、sed 等，但还没有发现任何足够的东西。我意识到这些是相当独特的参数，所以任何有帮助的东西都是受欢迎的。有没有办法列出字符数和数字不匹配的文件？这将大大加快我的工作。

谢谢。

e: 拼写

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:46:09.230

以下脚本应该会有所帮助：

```
#!/bin/bash

# Print from line 12 to the end of the file
#   sed -n '12,$p' < $1 
#
# Then count the number of chars in those lines with 
#   wc -c 
#
# Later we take the number of chars in $NUM_CHARS and substract 4 from it 
# (the char count in the "END\n" token, assuming if has a line-end char, if not
# change 4 by 3) with
#   xargs -i expr {} - 4
NUM_CHARS=$(sed -n '12,$p' < $1 | wc -c | xargs -i expr {} - 4)

# Modify the line 11 in file 
sed "11 c\ $NUM_CHARS" $1 
```

将此代码保存到文件“script.sh”，赋予它执行权限并运行它：

```
./script.sh input_file 
```

要将新生成的文件的内容保存到另一个文件中，只需将上述脚本运行为：

```
./script.sh input_file > new_file 
```

在原始文件中进行任何替换之前检查是否是您想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:25:34.810

这是另一个版本：

```
file='path/to/file'
sed -i'' -e"11 s/\d+/$(expr $(tail -n+12 $file | wc -m) - 3)/" $file 
```

或者

```
sed -i'' -e"11 s/\d+/$(expr $(tail -n+12 /path/file | wc -m) - 3)/" /path/file 
```

您需要先声明`$file`或将其替换为文件的路径运行这两行，它应该可以工作。

# android - 如何在线性布局中一起滚动 2 个 GridView？

> ID：11549613
> 
> 赞同：2
> 
> 时间：2012-07-18T20:20:25.810
> 
> 标签：android, android-layout, gridview, scroll

我在线性布局中有两个网格视图。这是我的 XML 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:gravity="center"
    android:orientation="horizontal" >

   <GridView
    android:id="@+id/leftGrid2"
    android:layout_width="416dp"
    android:layout_height="1078dp"
    android:columnWidth="70dp"
    android:horizontalSpacing="5dp"
    android:numColumns="2"
    android:paddingRight="20dp"
    android:stretchMode="columnWidth"
    android:verticalSpacing="5dp" >

  </GridView>

   <GridView
    android:id="@+id/rightGrid2"
    android:layout_width="400dp"
    android:layout_height="match_parent"
    android:columnWidth="70dp"
    android:horizontalSpacing="5dp"
    android:numColumns="2"
    android:stretchMode="columnWidth"
    android:verticalSpacing="5dp" >

    </GridView>
  </LinearLayout> 
```

如何让这两个网格视图一起滚动或同步？当我运行我的应用程序时，它们有两个单独的滚动条。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:07:21.017

GridView通过其 AbsLisView 父级提供了[smoothScrollToPosition(int)方法。](http://developer.android.com/reference/android/widget/AbsListView.html#smoothScrollToPosition%28int%29)这将滚动到您想要的位置。[现在，您使用OnScrollListener](http://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html)监听 ScrollEvent 。现在只需将它们绑在一起：

```
GridView other;
@Override public void onScroll(AbsListView view, int firstItem, int visItems, int total) {
    other.smoothScrollToPosition(firstItem);
} 
```

现在，这**不会！**如果您的两种观点不可比，即按预期工作。相同的内容量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:21:38.413

我以前必须用画廊做一次。你应该能够`GridView`很容易地把它应用到：

```
public class DualGallery extends Gallery {

/**
 * Second {@link Gallery}
 */
public DualGallery b;

/**
 * Current {@link Context}
 */
Context mContext;

/**
 * Constructor that takes the {@link Context} and second {@link DualGallery}
 * 
 * @param context
 * @param b
 */
public DualGallery(Context context, DualGallery b) {
    super(context);

    this.mContext = context;

    this.b = b;

}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    // Scrolls this and the second Gallery avoiding an endless loop
    return super.onFling(e1, e2, velocityX, velocityY)
            && b.onFling2(e1, e2, velocityX, velocityY);
}

@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
    // Scrolls this and the second Gallery avoiding an endless loop
    return super.onScroll(e1, e2, distanceX, distanceY)
            && b.onScroll2(e1, e2, distanceX, distanceY);
}

@Override
public void setOnClickListener(OnClickListener l) {
    super.setOnClickListener(l);
}

@Override
public void setAdapter(SpinnerAdapter adapter) {
    super.setAdapter(adapter);
}

/**
 * Special function to redirect to just
 * {@link Gallery#onFling(MotionEvent, MotionEvent, float, float)}
 * 
 * @param e1
 * @param e2
 * @param velocityX
 * @param velocityY
 * @return
 */
public boolean onFling2(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    return super.onFling(e1, e2, velocityX, velocityY);
}

/**
 * Special function to redirect to just
 * {@link Gallery#onScroll(MotionEvent, MotionEvent, float, float)}
 * 
 * @param e1
 * @param e2
 * @param distanceX
 * @param distanceY
 * @return
 */
public boolean onScroll2(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
    return super.onScroll(e1, e2, distanceX, distanceY);
} 
```

}

# ios - 为什么 reloadRowsAtIndexPaths 不适用于 iOS 5.0？

> ID：11549620
> 
> 赞同：2
> 
> 时间：2012-07-18T20:20:36.973
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, ios5

已解决：请参阅下面的答案（和可能的解释）。

我正在制作一个适用于 iOS 5.1 设备的应用程序，但不适用于 iOS 5.0 设备。这是适用于 5.1 但不适用于 5.0 的故障代码：

```
- (void) expandIndexPath: (NSIndexPath *) indexPath afterDelay: (BOOL) delay
{
    NSIndexPath *oldSelectedIndexPath = [NSIndexPath indexPathForRow:self.mySelectedIndex inSection:0];
    self.mySelectedIndex= indexPath.row; 
//  [self.myTableView beginUpdates];
    [self.myTableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:[NSIndexPath indexPathForRow:self.mySelectedIndex inSection:0], oldSelectedIndexPath,nil] withRowAnimation:UITableViewRowAnimationNone]; 
//  [self.myTableView endUpdates];
} 
```

更奇怪的是，如果我`reloadRowsAtIndexPaths`用`[self.myTableView reloadData];`. 为什么是这样？5.0 是否有关于 reloadRowsAtIndexPaths 行的错误？我已经在 5.0 上尝试过，有无`begin/endUpdates`线条，但都不起作用。

编辑：更具体地说，当我在 iOS 5 上运行应用程序时，它会崩溃并出现以下错误：

> ***中的断言失败`-[_UITableViewUpdateSupport _computeRowUpdates]`，`/SourceCache/UIKit/UIKit-1912.3/UITableViewSupport.m:386` [切换到进程 7171 线程 0x1c03]
> 
> 由于未捕获的异常“ `NSInternalInconsistencyException`”而终止应用程序，原因：“无效的表视图更新。应用程序已请求更新与数据源提供的状态不一致的表视图。

编辑：这是我的 UITableViewDataSource 方法。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    //I am positive that this will ALWAYS return the number (it never changes)
    return self.myCellControllers.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //I cache my table view cells, thus each time this method gets called it will 
    // return the exact same cell. Yes, I know that most of the time I should be dequeing
    // and reusing cells; just trust me that this time, it's best for me to cache them
    // (There are very few cells so it doesn't really matter)
    CellController *controller = [self.myCellControllers objectAtIndex:indexPath.row];
    return controller.myCell;
}

- numberOfSectionsInTableView: always returns 1; 
```

唯一有趣的方法是

```
- (CGFloat)tableView:(UITableView *)aTableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(indexPath.row == self.mySelectedIndex)
    {
        return DEFAULT_CELL_HEIGHT + self.expandSize;
    }
    else
    {
        return DEFAULT_CELL_HEIGHT;
    }
} 
```

就像快速概述这部分程序的工作原理一样，当用户点击一个单元格时，该单元格会滚动到屏幕顶部。在它位于屏幕顶部之后，它的索引被设置为`self.mySelectedIndex`并扩展（变得更高）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:32:39.943

我找到了一个可行的解决方案。如果我将`expandIndexPath`方法更改为此它可以工作：

```
- (void) expandIndexPath: (NSIndexPath *) indexPath afterDelay: (BOOL) delay {
    [self.myTableView beginUpdates];
    NSIndexPath *oldSelectedIndexPath = [NSIndexPath indexPathForRow:self.mySelectedIndex inSection:0];
    self.mySelectedIndex= indexPath.row;
    if(oldSelectedIndexPath.row >= 0)
    {
        [self.myTableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:[NSIndexPath indexPathForRow:self.mySelectedIndex inSection:0],oldSelectedIndexPath, nil] withRowAnimation:UITableViewRowAnimationNone]; 
    }
    else 
    {
        [self.myTableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:[NSIndexPath indexPathForRow:self.mySelectedIndex inSection:0],nil] withRowAnimation:UITableViewRowAnimationNone]; 
    }
    [self.myTableView endUpdates]; 
} 
```

据我所知，问题在于`oldSelectedIndexPath`有时设置为负行值。因此，当我尝试重新加载带有负数行的 indexPath 时，它在 iOS 5.0 中崩溃了。iOS 5.1 似乎修复了这个问题并进行了更多的错误检查。

# c# - 锚定 - 使两个组件各占面板的一半

> ID：11549621
> 
> 赞同：17
> 
> 时间：2012-07-18T20:20:39.427
> 
> 标签：c#, winforms, user-interface, .net-4.0, anchor

**是）我有的：**

我有一个面板（空白区域）和两个由绿色和蓝色方块表示的 DataGridView。面板固定在我屏幕的大部分中心，并随着窗口大小而增大/缩小。

**我需要的：**

我希望绿色方块始终保持在屏幕中间的右边框并占据屏幕的左半部分。同样，我希望蓝色方块的左边框位于中间并占据屏幕的右半部分。

**基本上，我只是希望它始终看起来像这个图像。**

我需要以编程方式执行此操作吗？我似乎找不到可以实现这种情况的锚定或对接组合，并且添加更多面板作为容器最终会产生相同的问题。

![面板布局中的 DataGridViews](../Images/fcd5c62f691a6d8696f52d3d5a93675d.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-18T20:36:16.510

不确定这是否是您想要的：

1.  在屏幕上创建一个 SplitContainer。

    ```
    Anchor = Top, Bottom, Left, Right
    IsSplitterFixed = True (Trick) 
    ```

2.  创建另外两个数据网格视图，每个视图在 SplitterContainer 内

    ```
    Dock = Fill 
    ```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-18T20:31:49.380

我通常使用 a[`TableLayoutPanel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)来完成此操作。它非常易于使用（简单的介绍可以在[这里](http://blogs.msdn.com/b/jpricket/archive/2006/04/05/winforms-autolayout-basics-tablelayoutpanel.aspx)找到）。

您在第一行中创建单元格并将其设置为每个单元格的 50% 宽度。在每个单元格中放置一个`DataGrid`，然后将它们`Dock`的 'ing 设置为`Fill`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-10T15:46:01.437

我尝试了使用 TableLayoutPanel 的解决方案，效果很好。

但是，如果您想使用不同的定位，TableLayoutPanel 内部的布局有点不方便且受到限制。

我找到了另一个解决方案，它只需一点编程工作即可完成：

*   对于左侧项目，定义锚定到左侧
*   对于正确的项目，定义没有左/右锚定

这会导致在调整表单大小时左侧项目保留在其位置，而右侧则在中间位置移动。

我在表单中添加了一个 OnSizeChanged 处理程序，它实现了以下几行：

```
int widthForItem = Item2.Left - Item1.Left; // you can subtract a distance here
Item1.Width = widthForEachItem;
Item2.Width = widthForEachItem 
```

# ios - 文件访问临时异常 com.apple.security.temporary-exception.files.absolute-path.read-write 也是 OS X 或 iOS 特有的

> ID：11549623
> 
> 赞同：0
> 
> 时间：2012-07-18T20:20:41.583
> 
> 标签：ios, ipad

尝试查看是否可以将“文件访问临时异常”添加到我的 iOS 应用程序 entitlement.plist

我在这里阅读一些东西 [https://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/EntitlementKeyReference/AppSandboxTemporaryExceptionEntitlements/AppSandboxTemporaryExceptionEntitlements.html](https://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/EntitlementKeyReference/AppSandboxTemporaryExceptionEntitlements/AppSandboxTemporaryExceptionEntitlements.html)

这是苹果需要在配置文件中允许的吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-08-26T02:59:14.070

根据此文档，它仅在 OS X 中可用

> [https://developer.apple.com/library/ios/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AppSandboxTemporaryExceptionEntitlements.html#//apple_ref/doc/uid/TP40011195-CH5-SW1](https://developer.apple.com/library/ios/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AppSandboxTemporaryExceptionEntitlements.html#//apple_ref/doc/uid/TP40011195-CH5-SW1)

# excel - 没有重复和不固定数据的随机excel函数

> ID：11549637
> 
> 赞同：2
> 
> 时间：2012-07-18T20:21:37.600
> 
> 标签：excel, random, duplicates, rank

我需要翻译一个在 AS/400 上工作的旧程序，该程序随机挑选学生为我的城市工作。我可以使用任何程序，只要它有效。为了简单快捷，我选择了excel。

但是，我遇到了一个小问题。我不需要重复，因为同一个学生不能在一个夏天做两份工作。另外，我需要这个灵活，因为每年都会增加新学生，并且会删除一些学生。

这个函数几乎和我想要的一样工作： **=INDEX($A:$A,RANDBETWEEN(1,COUNTA($A:$A)),1)**

索引 $A:$A 获取列 A 中的所有行。因此，即使我添加 20 个名称，它也会将它们考虑在内。然后它在第 1 行和 $A 列中的总行数 (COUNTA) 之间随机选择一个值（名称）。这种方法的问题是它允许重复。

我发现的另一个功能是创建一个充满 =ALEA() 的列，然后按数字对它们进行排名。这不是很漂亮，但至少没有重复。问题来自我的公式，这是静态的，我不能灵活：

**=INDEX($A$2:$A$74,排名(B2,$B$2:$B$74))**

我的名字在列 $A 中，我的随机值在列 $B 中。我要说的是，对列 B 中的 B2（然后是 B3，然后是 B4 等）中的值进行排名。

我想要的是将 COUNTA 集成到第二个函数中，并且（如果可能）采用 RANDBETWEEN 而不是 rank 函数，这样我就没有难看的数字了。

我愿意使用带有某种重复检查的第一个功能。只要秘书不用做很多操作，应该没问题。

非常感谢您的帮助 xox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:00:46.927

我在 VBA 中创建了一些我认为你想要的东西。现在请记住，我对 VBA 很陌生，所以它可能不是最漂亮的东西。为了清楚起见，我在 A 列中从第 1 行到第 10 行有 10 个名称，然后简单地运行这个子例程，它在 F 列中生成了一个唯一名称列表。这是我的代码：

```
Sub getRandom()
    Do While Application.WorksheetFunction.CountA(Range("A:A")) > 0
        Dim count As Integer
        count = Application.WorksheetFunction.CountA(Range("A:A"))
        Dim name As String
        name = Application.WorksheetFunction.Index(Range("A:A"), Application.WorksheetFunction.RandBetween(1, count))
        Dim row As Integer
        row = Application.WorksheetFunction.Match(name, Range("A:A"), 0)
        Range("F11").Select
        Selection = name
        Rows(row).EntireRow.Delete
    Loop
End Sub 
```

如果您想一次获取一个名称，只需删除循环即可。它的工作原理是它完全按照您对 INDEX 和 RANDBETWEEN 函数所做的操作，使用生成的数字获取列 A 中的名称，然后完全删除该行，因此不会生成唯一名称。

我任意选择了列 F 和单元格 F11，因为删除行时该单元格不会受到影响。

我希望这会有所帮助，如果这不是您想要的，我会看看是否可以对其进行一些改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:46:16.410

在 VBA（谷歌 Excel Random Unique）中有很多可用于执行此操作的示例，其中最好的一个来自[CPearson.Com](http://www.cpearson.com/excel/RandomNumbers.aspx)，其中包括（除其他外）：

> **来自工作表单元格范围的随机元素**
> 您还可以创建一个函数，该函数以随机顺序返回多个元素，并且在工作表单元格范围内没有重复元素。下面的函数就是这样做的。
> 您可以使用像=RandsFromRange(A1:A10,5)这样的公式调用数组公式，
> 其中 A1:A10 是从中提取值的元素列表，5 是要返回的值的数量。在包含指定要返回的单元格的区域中输入公式，然后按 CTRL SHIFT ENTER 而不是仅按 ENTER。

如果您不想使用 VBA，那么可以通过几个简单的步骤来完成：

1.  在您的学生姓名旁边插入一列，其中包含公式`=RAND()`
2.  对数字上的名称和随机数列表进行排序
3.  从列表顶部选择尽可能多的学生
4.  每次排序时，您都会得到一个新的随机排序

# uml - 在交互图之间复制带有消息的对象

> ID：11549644
> 
> 赞同：0
> 
> 时间：2012-07-18T20:22:09.590
> 
> 标签：uml, enterprise-architect

我的项目中有 2 个交互图。如何将对象从一个图表移动或复制到另一个 BUT，包括所选对象之间的消息？我正在使用 EA 9.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:38:08.763

一定是我的错。我可以从一个图表中复制（ctrl-c）对象，并在另一个图表上“粘贴为新”，所有消息都被保留。

# android - API 是否为 ListView 提供滚动按钮

> ID：11549645
> 
> 赞同：0
> 
> 时间：2012-07-18T20:22:14.607
> 
> 标签：android

我有一个客户想要在他们的应用程序中使用 ListViews 的常规滚动条。原因是因为此应用程序将专门与他们的设备一起使用，这些设备恰好具有电阻屏。如果没有触控笔，屏幕就不能很好地跟踪手势，并且用户不会总是可以使用触控笔。因此，传统的滚动条作为后备 UI 控件。快速滚动拇指不会是解决此问题的有用方法。

我在 API 中发现的一些有用的是 xml 属性，它们允许我近似跟踪和拇指的行为，例如：

```
android:scrollbarAlwaysDrawVerticalTrack="true"
android:scrollbarStyle="insideInset"
android:fadeScrollbars="false" 
```

但是我在 API 中没有找到任何可以处理在轨道顶部和底部包含滚动按钮的内容。

我得出的结论是 API 不提供此功能是否正确？如果是这样，我唯一的选择是使用几个按钮来更改列表位置。这当然是一个可行的解决方案，但我想确保我没有重新发明另一个轮子。

我必须支持早至 2.2。

滚动条示例：

![滚动条示例](../Images/be5d096152f99f3f1086e51f70b52381.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:33:49.173

> 我得出的结论是 API 不提供此功能是否正确？

是的，你是。API 不支持`ListView`滚动按钮。您必须自己实现此功能。

**编辑**：基于以下评论的快速示例，扩展`ListView`为支持添加按钮。

```
private void init() { // Call this after the ListView is in your existing layout, perhaps in onLayout?
    // The following two lines create a new LinearLayout. If you want to design the layout in XML, you'll have to use LayoutInflater.
    LinearLayout newLayout = new LinearLayout(getContext());
    newLayout.setOrientation(LinearLayout.HORIZONTAL);
    newLayout.setLayoutParams(getLayoutParams());

    ViewGroup parent = (ViewGroup) getParent();
    int index = parent.indexOfChild(this);
    parent.removeView(this);
    newLayout.addView(this);
    parent.addView(newLayout, index);

    // Now, you can customize your LinearLayout.
    newLayout.addView(...); // Maybe add a vertical LinearLayout to contain your two buttons stacked upon each other?
} 
```

这只是一个粗略的概念，但它应该能让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:07:55.253

保罗的答案是正确的答案有一种叫做快速滚动的东西，它可以做你想做的事。

您可以通过 XML 启用它：

android:fastScrollEnabled="true" 或者在代码中：

getListView().setFastScrollEnabled(true); 它尽可能接近您想要的（不使用自定义视图）。

编辑：

我忘了提到，这只有在列表中有足够的元素时才有效。它必须是当前屏幕上可见长度的 4 倍左右。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T20:40:20.313

埃里克是对的……几乎。

有一种叫做 Fast Scroll 的东西可以做你想做的事。

您可以通过 XML 启用它：

```
android:fastScrollEnabled="true" 
```

或在代码中：

```
getListView().setFastScrollEnabled(true); 
```

它尽可能接近您想要的（不使用自定义视图）。

编辑：

我忘了提到，这只有在列表中有足够的元素时才有效。它必须是当前屏幕上可见长度的 4 倍左右。

# java - 使用 Selenium WebDriver 获取当前页面的 URL

> ID：11549647
> 
> 赞同：58
> 
> 时间：2012-07-18T20:22:22.703
> 
> 标签：java, selenium, webdriver

我正在尝试获取当前打开页面的 URL。我正在使用 Selenium WebDriver 和 Java。

我正在通过以下方式访问当前 URL：

```
WebDriver driver = new WebDriver();
String url = driver.getCurrentUrl(); 
```

但是，该 URL 似乎并没有真正反映我目前的位置。

我当前的测试案例涉及访问 NYT 网站，然后单击“技术”链接。但是，无论地址栏中显示的 URL 是什么，它`url`似乎总是。`http://www.nytimes.com/`

如何实际访问地址栏中 URL 的值，以便知道我实际在哪个页面上？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-18T20:33:17.973

放睡觉。它会起作用的。我努力了。原因是页面尚未加载。检查此问题以了解如何等待加载 -[在 Selenium 中等待页面加载](https://stackoverflow.com/questions/5868439/wait-for-page-load-in-selenium)

# objective-c - Objective C 垂直遍历图像中的像素

> ID：11549654
> 
> 赞同：3
> 
> 时间：2012-07-18T20:23:15.810
> 
> 标签：objective-c, cocoa

我现在有点困惑，第一次在这里发布堆栈溢出的海报。我是 Objective C 的新手，但从我的同事那里学到了很多东西。我想要做的是在每个垂直循环之后遍历一个 bmContext 垂直移动 1 个像素。继承人一些代码：

```
NSUInteger width = image.size.width;
NSUInteger height = image.size.height;
NSUInteger bytesPerPixel = 4;
NSUInteger bytesPerRow = width * bytesPerPixel;
NSUInteger bytesPerColumn = height * bytesPerPixel;

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef bmContext = CGBitmapContextCreate(NULL, width, height, 8, bytesPerRow,     colorSpace, kCGBitmapByteOrderDefault | kCGImageAlphaPremultipliedFirst);
CGColorSpaceRelease(colorSpace);
CGContextDrawImage(bmContext, (CGRect){.origin.x = 0.0f, .origin.y = 0.0f, .size.width = width, .size.height = height}, image.CGImage);

UInt8* data = (UInt8*)CGBitmapContextGetData(bmContext);

const size_t bitmapByteCount = bytesPerRow * height;

struct Color {
    UInt8 r;
    UInt8 g;
    UInt8 b;
};

for (size_t i = 0; i < bytesPerRow; i += 4) //shift 1 pixel
{
    for (size_t j = 0; j < bitmapByteCount; j += bytesPerRow) //check every pixel in column
    {
        struct Color thisColor = {data[j + i + 1], data[j + i + 2], data[j + i + 3]};
    }
} 
```

在 java 中它看起来像这样，但我对 java 版本不感兴趣，这只是为了强调我的真实问题。我只关心目标 c 代码。

```
for (int x = 0; x = image.getWidth(); x++)
{
    for (int y = 0; y = image.getHeight(); y++)
    {
        int rgb = image.getRGB(x, y);
        //do something with pixel
    }
} 
```

我真的水平移动一个单位然后检查所有垂直像素然后再次水平移动吗？我以为我是，但我的结果似乎有点偏离。在 java 和 c# 中实现任务相当简单，如果有人知道在 Objective C 中执行此任务的更简单方法，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:27:50.950

您获取像素的方式似乎已关闭。

如果我理解正确，您只想逐列遍历图像中的每个像素。对？这应该有效：

```
for (size_t i = 0; i < CGBitmapContextGetWidth(bmContext); i++)
{
    for (size_t j = 0; j < CGBitmapContextGetHeight(bmContext); j++)
    {
        int pixel = j * CGBitmapContextGetWidth(bmContext) + i;
        struct Color thisColor = {data[pixel + 1], data[pixel + 2], data[pixel + 3]};
    }
} 
```

# history.js - 用于 HTML5 的 History.js - 黑客需要不破坏 IE7

> ID：11549661
> 
> 赞同：2
> 
> 时间：2012-07-18T20:23:35.090
> 
> 标签：history.js

我的目标是仅支持 HTML5 浏览器的 AJAX 历史记录。但是，我希望我的网站可以使用 HTML4 浏览器，但没有 AJAX 历史记录。

许多 History.js 示例在执行任何操作之前都包含以下检查：

```
if (!History.enabled) {
    // History.js is disabled for this browser.
    // This is because we can optionally choose to support HTML4 browsers or not.
    return false;
} 
```

除了 IE7 等较旧的浏览器不支持原生 JSON 并且 History.js 插件需要`JSON.parse`和`JSON.stringify`.

建议的解决方案是包含 json2.js（[链接](https://github.com/balupton/history.js/issues/105)）。这对我来说似乎有点奇怪，因为支持`pushState()`并且`popState()`应该也支持原生 JSON 的 HTML5 浏览器。此外，我不想包含另一个我并不真正需要的库。我的解决方案是有条件地包含 History.js，如下所示：

```
var nativeJSON = (typeof JSON === 'object') && (typeof JSON.parse === 'function') && (typeof JSON.stringify === 'function');
if (nativeJSON) {
    /// Include contents of: balupton-history.js-e84ad00\scripts\bundled\html5\jquery.history.js
} else {
    window.History = { enabled: false };
} 
```

这似乎有效，但感觉就像一个黑客。有一个更好的方法吗？

**编辑：2012 年 7 月 31 日**

如果我不包含 history.html4.js，它仍然会给我在 IE7 上的错误。目前看来，包含 json2.js 只是这个插件的一个要求。可以进行改进以静默检查 JSON 支持并禁用插件（如果没有），但现在我有一个解决方法。这是 History.js 的一个片段：

```
/**
 * History.js Core
 * @author Benjamin Arthur Lupton <contact@balupton.com>
 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */

(function(window,undefined){
    "use strict";

    // ========================================================================
    // Initialise

    // Localise Globals
    var
        console = window.console||undefined, // Prevent a JSLint complain
        document = window.document, // Make sure we are using the correct document
        navigator = window.navigator, // Make sure we are using the correct navigator
        sessionStorage = window.sessionStorage||false, // sessionStorage
        setTimeout = window.setTimeout,
        clearTimeout = window.clearTimeout,
        setInterval = window.setInterval,
        clearInterval = window.clearInterval,
        JSON = window.JSON,
        alert = window.alert,
        History = window.History = window.History||{}, // Public History Object
        history = window.history; // Old History Object

    // MooTools Compatibility
    JSON.stringify = JSON.stringify||JSON.encode;
    JSON.parse = JSON.parse||JSON.decode; 
```

如果 window.JSON 未定义，引用 window.JSON.stringify 只会导致错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T23:39:00.713

以下在 IE7 中对我有用，没有错误：

```
<html>
<head>
    <title>Testing</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
        // Tell us whether History is enabled
        var alertHistory = function() {
            alert(History.enabled ? 'enabled' : 'disabled');
        }

        var nativeJSON = (typeof JSON === 'object') && (typeof JSON.parse === 'function') && (typeof JSON.stringify === 'function');
        if (nativeJSON) {
            // Native JSON is present, add History.js
            var historyJs = document.createElement('script');
            historyJs.type = 'text/javascript';
            historyJs.src = 'https://raw.github.com/browserstate/history.js/master/scripts/bundled/html5/jquery.history.js';
            historyJs.onload = alertHistory;
            document.getElementsByTagName("head")[0].appendChild(historyJs);
        } else {
            window.History = { enabled: false };
            alertHistory();
        }
    </script>
</head>
<body>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:25:09.450

这是我为我的情况解决的方法。我想尽可能使用公共 CDN，并将我网站的所有其他 JS 代码合并到一个包含文件中。这是代码的样子。

**页面.html**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Page Title</title>

    <!-- JS Files Hosted on CDN(s) -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

    <!-- Combined Custom JS File -->
    <script type="text/javascript" src="js/site.js"></script>

</head>
<body>

</body>
</html> 
```

单个 JS 包含文件结合了所有需要的插件和运行站点所需的任何自定义代码。

**网站.js**

```
// History.js plugin
var nativeJSON = (typeof JSON === 'object') && (typeof JSON.parse === 'function') && (typeof JSON.stringify === 'function');
if (nativeJSON) {
    // contents of browserstate-history.js-e84ad00\scripts\bundled\html5\jquery.history.js
} else {
    window.History = { enabled: false };
}

/*
Watermark v3.1.3 (March 22, 2011) plugin for jQuery
http://jquery-watermark.googlecode.com/
Copyright (c) 2009-2011 Todd Northrop
http://www.speednet.biz/
Dual licensed under the MIT or GPL Version 2 licenses.
*/
// contents of jquery.watermark.min.js

// INCLUDE more plugins here

// Custom JS Code here 
```

我可能希望至少发送一些自定义 JS 代码，这样我就可以将它们全部发送到 1 个有效负载中。据我了解，[合并资源文件](http://developer.yahoo.com/performance/rules.html)是一种很好的做法。

**编辑：2013-06-25**

在随后的项目中，我只是简单地将 的缩小版本包含`json2.js`在我的组合 JS 文件中。使用 Google 的[Closure Compiler](http://closure-compiler.appspot.com/home)，您可以将其降低到大约 3K（HTTP 压缩之前），这似乎是可以接受的。

# php - 无法在 php mail() 中使用变量 $_SERVER['HTTP_HOST']

> ID：11549663
> 
> 赞同：2
> 
> 时间：2012-07-18T20:23:35.980
> 
> 标签：php, email

我测试了这个：

```
<?php
 $to = "recipient@example.com";
 $subject = "Hi!";
 $server = $_SERVER['HTTP_HOST'];
 $body = "From: ". $server. "<br>";
 $body .= "Hi,\n\nHow are you?";
 if (mail($to, $subject, $body)) {
   echo("<p>Message successfully sent!</p>");
  } else {
   echo("<p>Message delivery failed...</p>");
  }
 ?> 
```

尽管显示“成功”反馈，但这永远不会向我发送电子邮件。该代码将起作用（实际发送的电子邮件）但是如果我删除了包含

```
$server = $_SERVER['HTTP_HOST']; 
```

在电子邮件正文中。

## 很奇怪，没有意义？

这只是一个 PHP 页面。我从浏览器调用此页面！请试试 ...

更新！！好的，我没有使用 $_SERVER['HTTP_HOST']，而是直接使用字符串“user.server.com”。而且，它没有用！但是，当我稍微修改一个字符串时，比如“user.server.com.us”，它就可以了！！所以基本上，邮件服务器填充它自己对它的域的引用，不知道它为什么这样做......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:24:36.680

对于正文中的 url，一些垃圾邮件服务器将您的邮件分级为“垃圾邮件”。`mail()`不幸的是，除非您有权访问发件人和收件人的邮件服务器日志，否则您将很难找到更具体的错误消息。提供 SwiftMailer 或其他 PHP 邮件库以获得更好的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:38:20.963

使用 mail() 函数时，您需要指定“发件人”标头。请参阅此文档页面，查找“additional_headers”参数的注释部分。

所以你的 mail() 调用将如下所示：

`mail($to, $subject, $body, 'From: some.guy@example.com');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-10T01:02:18.053

当然，您不会收到它，因为现在所有主要的网络邮件都使用反垃圾邮件过滤器，并且您的邮件可能被检测为垃圾邮件。解决方案是为 $from 变量准确指定您的电子邮件，如果您没有指定您的真实电子邮件，您的邮件将被检测为垃圾邮件。

# asp.net-mvc-3 - DropDownList 结果未返回

> ID：11549667
> 
> 赞同：3
> 
> 时间：2012-07-18T20:23:49.147
> 
> 标签：asp.net-mvc-3, c#-4.0, entity-framework-4.1

我正在尝试创建一个 ItemType 来自另一个表的项目。我无法从 Create 页面取回实际的 Type 对象。这是我尝试过的代码：

楷模：

```
public class ItemType {
    public int Id { get; set; }
    [Required]
    public string Name { get; set; }
    public virtual ICollection<Item> Item{ get; set; }
}

public class Item {
    public int Id { get; set; }
    [Required]
    public string Name { get; set; }       
    public virtual ItemType ItemType { get; set; }
} 
```

在 ItemController 中，这是我的创建代码：

```
 public ActionResult Create() {
        var itemTypeRepo = new ItemTypeRepository(context);
        ViewBag.ItemTypes = new SelectList(itemTypeRepo.GetAll(), "ID", "Name");
        return View();
    }

    [HttpPost]
    public ActionResult Create(Item item) {            
        if (ModelState.IsValid) {
            context.Items.Add(item);
            context.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(item);
    } 
```

在我的 Create.cshtml 视图中，我尝试过：

```
<div class="editor-field">
    @Html.DropDownList("ItemType", String.Empty)
    @Html.ValidationMessageFor(model => model.ItemType) 
</div> 
```

这根本不返回任何值并引发错误“值'X'无效。” 其中 X 是我选择的 ItemType 的 ID。和

```
<div class="editor-field">
    @Html.DropDownListFor(x => x.ItemType.Id, (SelectList)ViewBag.ItemType)
    @Html.ValidationMessageFor(model => model.ItemType) 
</div> 
```

这将创建一个具有正确 ID 的存根 ItemType 对象，但由于该对象未完全加载，因此不会将其插入数据库。如果我查看 ModelState 对象，我会发现 ItemType 对象中缺少 Name 字段的错误。

我还尝试使用第二个 .cshtml 代码并添加以下代码来解决问题：

```
public ActionResult Create(Item item) { 
    item.ItemType = context.ItemTypes.Find(item.ItemType.Id);
    if (ModelState.IsValid) 
```

这不会将 ModelState.IsValid 的值从 false 更改，即使它应该。

我需要做什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:44:11.603

您应该将属性 ItemTypeId 添加到您的 Item 实体，以便它充当外键。

```
public class Item
{
    public int Id { get; set; }
    [Required]
    public string Name { get; set; }
    public int ItemTypeId { get; set; }

    [ForeignKey("ItemTypeId")]
    public virtual ItemType ItemType { get; set; }
} 
```

然后，您可以将该属性用于下拉列表：

```
<div class="editor-field">
    @Html.DropDownListFor(x => x.ItemTypeId, (SelectList)ViewBag.ItemType)
    @Html.ValidationMessageFor(model => model.ItemType) 
</div> 
```

# gnuplot - Gnuplot：自动放置 x2 tic 标签

> ID：11549668
> 
> 赞同：2
> 
> 时间：2012-07-18T20:23:52.187
> 
> 标签：gnuplot

我有想要在 gnuplot 中绘制的数据，看起来像这样：

```
1.08 1 4.8
1.53 2 5.9
2.11 3 5.1
2.60 4 6.0 
```

并不是说它非常重要，第一列是遗传算法的运行时间，第二列是世代数，第三列是平均适应度。

如果我用它绘制它`plot datafile.dat using 1:3 with lines`看起来很好，抽动间隔适当。但是，虽然我希望 x-tics 用时间标记，但我希望 x2-tics 用代号标记。这很容易做到`plot datafile.dat using 1:3:x2ticlabels(2) with lines`，但对于 x2 轴，它会为数据文件中的每一行添加一个刻度，而不是自动选择适当数量的 tic。

我的完整数据文件有数千个条目，这会导致图表顶部出现抽动间隔的黑色实线，以及放置标签的更大的黑色实线。即使我尝试手动告诉 gnuplot 在图表上放置抽动的频率，使用`set x2tics 100`它仍然会为每个条目显示它们。有没有办法来解决这个问题？显然，我更喜欢显示自动选择哪些抽动，但如果我必须手动进行，那很好。完整的 gnuplot 配置文件非常基本，只是：

```
set logscale y 10
set x2tics
plot datafile.dat using 1:3:x2ticlabels(2) with lines 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:42:43.753

这是一个解决方案，它只会为数据文件中的每一行添加一个标签。

```
plot 'test.dat' u 1:3:x2ticlabels(int($0)%2==0?stringcolumn(2):'') 
```

有点有趣的一件事是抽动与分数不完全一致。我还没弄清楚为什么。有数千个点，您可能不太可能注意到，但对于您的示例数据文件有 4 个点，这很明显。

不幸的是，它仍然在数据文件中的每一行的轴上绘制一个 tic。 `set x2tics scale 0`会让那些抽动完全消失。

# c# - 普通类可以只包含方法签名（如接口）吗？

> ID：11549670
> 
> 赞同：0
> 
> 时间：2012-07-18T20:23:56.417
> 
> 标签：c#

我现在正在看一些代码，我有点困惑。这个类不是接口，但是为什么没有定义那些方法呢？此外，床头方法签名，还有一个常规属性。很混乱！

```
public class MyClass
{
   public string Foo(string str1);
   public string Bar(string str, int i);

   public string myProperty { get; set; }
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T20:25:20.003

不，如图所示，这是无效的，您可以通过尝试编译它来证明这一点。对于包含未实现方法的类，它必须声明为`abstract`，并且同样适用于每个未实现的方法。

`abstract`类在概念上类似于接口，但它们也可能包含实现。这使得它们对于某些方法可能在继承层次结构中共享一个公共实现但其他方法仅在由后代类型实现时才有意义的场景很有用。

标记为`extern`or`partial`的方法也可以缺少主体，但`extern`方法通常是互操作的（因此它在本机代码中实现），并且`partial`方法将在另一个`.cs`文件中实现（并且只能在标记为的类中声明`partial`）。

顺便说一句，该属性很好，因为它是自动的（语法糖，这意味着将为您创建支持字段，而 get/set 方法只是返回/设置该字段，仅此而已）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:24:54.603

您可以将方法标记为`abstract`，然后您将拥有一个`abstract`类

但你为什么要这样做？如果您在基类中没有任何代码，只需使用接口

# symfony - Symfony 功能测试 - 自定义标头未通过

> ID：11549672
> 
> 赞同：39
> 
> 时间：2012-07-18T20:24:16.060
> 
> 标签：symfony, phpunit

由于某种原因，当我发送一个新的 $client->request 时，我指定的标头会丢失：

```
public function testGetClientsAction()
{
    $client = static::createClient();

    $cookie = new Cookie('locale2', 'en', time() + 3600 * 24 * 7, '/', null, false, false);
    $client->getCookieJar()->set($cookie);

    // Visit user login page and login
    $crawler = $client->request('GET', '/login');
    $form = $crawler->selectButton('login')->form();
    $crawler = $client->submit($form, array('_username' => 'greg', '_password' => 'greg'));

    $client->request(
       'GET', 
       '/clients', 
        array(), 
        array(), 
        array('X-Requested-With' => 'XMLHttpRequest', 'accept' => 'application/json')
    );

    print_r($client->getResponse());
    die(); 
```

}

在正在测试的方法中，我在第一行有这个：

```
print_r($request->headers->all()); 
```

响应如下：

```
Array
(
    [host] => Array
        (
            [0] => localhost
        )

    [user-agent] => Array
        (
            [0] => Symfony2 BrowserKit
        )

    [accept] => Array
        (
            [0] => text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
        )

    [accept-language] => Array
        (
            [0] => en-us,en;q=0.5
        )

    [accept-charset] => Array
        (
            [0] => ISO-8859-1,utf-8;q=0.7,*;q=0.7
        )

    [referer] => Array
        (
            [0] => http://localhost/login_check
        )

    [x-php-ob-level] => Array
        (
            [0] => 1
        )

) 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-27T04:25:06.770

我有同样的问题，经过一番挖掘后，我认为这是 BrowserKit 目前不支持的功能。

我已经为它记录了一个问题： [https ://github.com/symfony/symfony/issues/5074](https://github.com/symfony/symfony/issues/5074)

更新：这不是问题 - 请参阅下面的评论

### 示例代码

样品要求：

```
$client->request(
    'GET',
    $url,
    array(),
    array(),
    array(
        'HTTP_X_CUSTOM_VAR' => $var
    )
); 
```

获取数据：

```
$request->headers->get('x-custom-var'); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-01-31T12:46:39.657

如果您检查 Client.php 中的定义，在方法请求中，您将在 docblock 中看到非常有用的信息：

*   @param array $server 服务器参数（HTTP 标头与 PHP 一样使用 HTTP_ 前缀引用）

这意味着您应该在要发送的标头中添加**HTTP_**前缀。例如，如果您想传递标头 X-HTTP-Method-Override ，您可以像这样指定它：

```
 $client->request(
        Request::METHOD_POST,
        '/api/v1/something',
        $body,
        [],
        ['HTTP_X-HTTP-Method-Override' => Request::METHOD_GET]
    ); 
```

# c# - 换行时如何调整自定义按钮高度

> ID：11549675
> 
> 赞同：1
> 
> 时间：2012-07-18T20:24:26.167
> 
> 标签：c#, windows-phone-7, xaml

我在我的应用程序中使用了一个自定义按钮控件，并且每个人的文本换行都设置为换行以用于翻译目的。测试时，我发现一些不同语言的字符串按照我的规范换行，尽管按钮高度保持不变，因此第二行文本被截断了。现在我从 ResourceDictionary 中的自定义按钮样式设置 xaml 中的每个按钮样式，但我无法弄清楚如何从 ResourceDictionary 相应地调整按钮高度（在这种情况下，我只需更改一次按钮样式，而不是手动更改在我能做的每一个按钮上）。我将如何通过资源字典中的自定义按钮样式进行更新，以便高度根据文本的换行时间自动调整？按钮实现示例如下：

主页.xaml

```
<Button x:Name="btnUseEmailAddress" Style="{StaticResource GlassButton}" Click="btnUseEmailAddress_Click" Margin="0,10">
                        <Button.Content>
                            <TextBlock TextWrapping="Wrap" Text="{Binding Path=LocalizedResources.MainPage_Contacts_UseContactsEmailAddress, Source={StaticResource LocalizedStrings}}"/>
                        </Button.Content>
 </Button> 
```

资源字典.xaml

```
<Style x:Key="GlassButton" TargetType="Button">
    <Setter Property="FontSize" Value="25.33" />
    <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}" />
    <Setter Property="Height" Value="60"/>
    <Setter Property="Padding" Value="10,3,10,5"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border x:Name="ButtonBorder" 
              CornerRadius="30" 
              BorderThickness="4,4,4,4" 
              Background="#AA000000"  
              BorderBrush="#99FFFFFF"
              RenderTransformOrigin="0.5,0.5">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="1.7*"/>
                        </Grid.RowDefinitions>
                        <Border Grid.Row="0" CornerRadius="23,23,0,0">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                    <GradientStop Color="#08FFFFFF" Offset="0"/>
                                    <GradientStop Color="#88FFFFFF" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>
                        <ContentPresenter x:Name="ButtonContentPresenter"
                            VerticalAlignment="Center"  
                            Grid.RowSpan="2" 
                            HorizontalAlignment="Center"/>
                    </Grid>
                </Border>
                <!--<ControlTemplate.Triggers>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter Property="RenderTransform" TargetName="ButtonBorder">
                            <Setter.Value>
                                <TransformGroup>
                                    <ScaleTransform ScaleX="0.9" ScaleY="0.9"/>
                                </TransformGroup>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </ControlTemplate.Triggers>-->
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

需要注意的是，Glass 按钮样式目前看起来很棒并且正是我想要的，除了文本被换行时。我可以在 MainPage.xaml 中使用将按钮高度调整为自动，`<Button x:Name="btnUseEmailAddress" Height="Auto"...`但我必须为每个按钮执行此操作（这很多！）。那么有什么方法可以在玻璃按钮样式中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:57:01.530

我建议将 Height 属性更改为 MinHeight。在大多数情况下，这会将高度设置为 60，但如果文本确实需要换行，高度将会增加。

改变：

```
<Setter Property="Height" Value="60"/> 
```

至：

```
<Setter Property="MinHeight" Value="60"/> 
```

# python - 如何将str转换为int？

> ID：11549680
> 
> 赞同：-3
> 
> 时间：2012-07-18T20:24:32.700
> 
> 标签：python, integer

我正在尝试使此代码将 prodname 变量转换为 int 值：

```
def prod_check(dirname):
    prodname_to_prodnum = {}
    fid2 = open('sample.txt','r')
    line = fid2.readline()
    line = line.strip()
    pline = line.split(',')
    prodname = (pline[0])[1:-1]
    prodnum = prodname
    prodname_to_prodnum[prodname] = prodnum
    line = fid2.readline()
    fid2.close() 
```

但是当我使用“int（prodname）”时出现错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:46:26.857

Python 中的列表是从 0 开始的，而不是从 1 开始的。您已经用 将线分成了字段`split`，因此您应该使用`prodnum = int(pline[0])`来获取第一个字段。

编辑：我希望人们会使用复制/粘贴将他们的代码放入问题中，错别字会有所不同。

我不知道您为什么要从数字字段中删除第一个和最后一个字符，也许是因为您需要从中删除空格？如果是这样，请尝试使用`prodnum = int(pline[0].strip())`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:31:01.557

试试这个而不是`prodnum = prodname`：

```
try:
  prodnum = int(prodname)
except ValueError:
  prodnum = None
  print('prodname = ',prodname) 
```

# spring-webflow - 制作一个 Hello World Spring Web 流......我错过了什么

> ID：11549683
> 
> 赞同：1
> 
> 时间：2012-07-18T20:24:39.113
> 
> 标签：spring-webflow

我正在制作一个 Hello World Spring Web Flow……我错过了什么……我找不到任何好的示例，所以我开始制作一个。有人可以告诉我我缺少什么来使我的 Hello World Flow 工作。

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>MyFlow</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>
</web-app> 
```

spring-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="org.uftwf.controller" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />

        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>
</beans> 
```

helloworld-flow.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE flow PUBLIC "-//SPRING//DTD WEBFLOW 1.0//EN" "http://www.springframework.org/dtd/spring-webflow-1.0.dtd">

<flow start-state="helloworld">
    <view-state id="helloworld" view="helloworld">
    </view-state>
</flow> 
```

索引.jsp

```
<html>
<head>
    <title>Spring 3.0 MVC Series</title>
</head>
<body>
    <a href="hello.html">Say Hello (Spring MVC)</a><p>
    <a href="hello.html">Say Hello (Spring-Web-Flow)</a>
</body>
</html> 
```

那么我必须改变什么才能让我的流程正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:02:34.157

您缺少 springmvc-servlet.xml 上的流解析器

```
<!-- define controller mappings for webflow -->
<bean id="webflowHandlerMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="order" value="5"/>
    <property name="mappings">
        <props>
            <prop key="**/hello">flowController</prop>
        </props>
    </property>
</bean>

<!-- webflow configuration -->
<import resource="spring-webflow.xml"/> 
```

在您的流文件中使用：

```
<!-- setup webflow -->
<bean id="mvcViewFactoryCreator" class="org.springframework.webflow.mvc.builder.MvcViewFactoryCreator">
<property name="viewResolvers" ref="tilesViewResolver"/>
</bean>

<flow:flow-builder-services id="flowBuilderServices" view-factory-creator="mvcViewFactoryCreator"/>

<flow:flow-registry id="flowRegistry" base-path="/WEB-INF/flows" flow-builder-services="flowBuilderServices">
    <flow:flow-location-pattern value="/**/*-flow.xml"/>
</flow:flow-registry>

<flow:flow-executor id="flowExecutor" flow-registry="flowRegistry"/> 
```

可能还有更多，但请按照@rrkwells 建议的链接获取更完整的示例。

# java - Java SwingX 设置和使用 JXCollapsiblePanel

> ID：11549693
> 
> 赞同：2
> 
> 时间：2012-07-18T20:25:13.327
> 
> 标签：java, swing, user-interface, swingx

我正在尝试创建一个面板，该面板在我的 GUI 其余部分的左侧打开。我在 Eclipse 中工作。我添加`swingx-core-1.6.2.jar`到我的构建路径中。我可以导入 `org.jdesktop.swingx.JXCollapsiblePane`然后新建一个`JXCollapsiblePane`，但为了设置窗格的方向，我需要执行以下操作：

```
JXCollapsiblePane myCollapsingPane = new JXCollapsiblePane();
mycollapsingPane.setOrientation(JXCollapsiblePane.Orientation.HORIZONTAL); 
```

但是，这不能说明方向无法解决。所以，我尝试了 importing `org.jdesktop.swingx.JXCollapsiblePane.Orientation`，但也失败了，说它无法解决。我可能在这里遗漏了一些愚蠢的东西；如何将面板设置为向侧面打开而不是垂直打开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:54:23.020

`JXCollapsiblePanel`在 1.6.2 没有`setOrientation`方法。此外，还有`JXCollapsiblePane.Orientation`枚举。它可能被丢弃了。

但是，there is `JXCollapsiblePane.Direction`and there `JXCollapsiblePanel.setDirection()`，它可能是一个替代品。

这是一个关于这个的[线程。](http://www.java.net/node/676517)

# c# - 任务栏按钮右键单击：Windows 窗体中的自定义菜单

> ID：11549696
> 
> 赞同：0
> 
> 时间：2012-07-18T20:25:22.763
> 
> 标签：c#, windows, winforms

当右键单击任务栏按钮时弹出的菜单中单击“关闭窗口”选项时，我不希望表单退出。相反，我希望将应用程序最小化到系统托盘。如何更改“关闭窗口”的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:29:35.730

添加覆盖`OnFormClosing`并查看`CloseReason`事件参数参数。也许是这样的：

```
protected override OnFormClosing(FormClosingEventArgs e)
{
    if (e.CloseReason == CloseReason.UserClosing)
    {
        e.Cancel = true;
        this.Hide();
    }
    else
    {
        this.Close();
    }
} 
```

这样，用户无法关闭您的表单（仅隐藏它），但 Windows 仍然可以出于其他原因（例如关闭）。

# asp.net - 通过网页获得文件夹权限？

> ID：11549699
> 
> 赞同：0
> 
> 时间：2012-07-18T20:25:30.143
> 
> 标签：asp.net, vb.net, permissions

我想要一个站点上的文件夹，登录的活动目录用户可以在其中创建子文件夹并在根目录下的“/Uploads”文件夹下上传图像。我可以使用 System.DirectoryServices 检索用户名。

有没有办法：

1.  根据用户名限制从 DirectoryInfo().GetDirectories 返回的内容

2.  将 /Uploads 的子文件夹（通过网页）设置为读/写权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:38:36.683

您可能想查看这篇关于[如何在运行时动态创建文件夹的帖子](http://forums.asp.net/t/1360137.aspx/1)

[来自 stackoverflow 的这篇文章](https://stackoverflow.com/questions/2266934/how-to-set-folder-permissions-with-net)展示了许多分配文件夹权限的方法。看看哪一个适用

祝你好运！

# node.js - 提供组合的 JavaScript 文件

> ID：11549702
> 
> 赞同：1
> 
> 时间：2012-07-18T20:25:37.013
> 
> 标签：node.js

在 html 中：

```
<script type="text/javascript" src="/layout/load_scripts?jquery.validate.min.js,jquery-1.5.1.min.js,jquery-ui-1.8.11.min.js,jquery.unobtrusive-ajax.min.js,jquery.validate.unobtrusive.min.js"></script> 
```

在服务器上：

```
load_scripts: function (context) {
    var combined_script = '';
    var script_names = context.parameters.split(',');
    for (var i = 0; i < script_names.length; i++) {
        combined_script += fs.readFileSync('./content/scripts/global/' + script_names[i]);
    }

    context.response.writeHead(200, { 'Content-Type': 'application/javascript' });
    context.response.end(combined_script);
} 
```

但是脚本没有加载。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:09:53.363

你为什么要使用 readFileSync 来做类似的事情？您可以同时读取所有文件。我可能会用异步库解决这个问题，并有一个更实用的方法。

```
async.map(['file1','file2','file3'], fs.readFile, function(err, results){
   results.join(''); // This is your string.
}); 
```

[有关异步 GitHub 页面](https://github.com/caolan/async/)的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:30:26.073

乍一看，我会这样调试：

1.  写一些静态文本并尝试打印。
2.  确认这`fs.readFileSync()`实际上是在读取文件...（打印到控制台应该可以）

而且，看起来您并没有在任何地方返回您的组合脚本。

# c++ - 模板参数互斥

> ID：11549703
> 
> 赞同：2
> 
> 时间：2012-07-18T20:25:36.897
> 
> 标签：c++, templates

我有一个带有多个模板参数的模板。

```
 template<typename Appl, typename StoredData>
    class Box {
    }; 
```

参数的值是互斥的：即对于Appl 的每个值，StoredData 只允许特定的一组类型。

例如：Appl 是 List，StoredData - double，char Appl 是 Tree，StoredData - int

有没有办法在编译时强制执行这个限制？所以，

```
 Box<List, double> - compiles
     Box<List, int> - fails
     Box<Tree, int> - compiles 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:29:31.283

就在这里：

```
template<typename Appl, typename StoredData>
    class Box {
        static_assert(
            std::is_same<Appl, List>::value && std::is_same<StoredData, double>::value ||
            std::is_same<Appl, Tree>::value && std::is_same<StoredData, int>::value,
            "Bad parameters"
        );
    }; 
```

这是一个工作示例[http://ideone.com/enECW](http://ideone.com/enECW)，尝试更改一些类型，它将无法编译。

# java - 可能的设计模式而不是instanceof？

> ID：11549706
> 
> 赞同：3
> 
> 时间：2012-07-18T20:25:41.250
> 
> 标签：java, design-patterns

我正在编写一个对象转换类，用于将域层对象转换为 UI 对象，反之亦然。问题是我的 UI 对象被组织成一个层次结构，因此我的对象转换类包含“instanceof”语句。这里有一种明确的代码气味，但我不确定解决方案是什么。

所以我的 UI 层次结构包含一个 RuleDTO，如下所示：

```
public class RuleDTO {
    protected long ruleID;
    protected long rowID;   
    protected AttributeDTO leftCondition;
    protected AttributeDTO rightCondition;
    protected OperationTypeDTO operationType; 
    protected boolean isActive;     
    // etc...
} 
```

然后，我的 RuleDTO 可以由 AssignmentRuleDTO 子类化，如下所示：

```
public class AssignmentRuleDTO extends RuleDTO {
    protected String assignedToTeam;
    protected String assignmentOperator;        
    // etc...
} 
```

RuleDTO 也可以由 EvaluationRuleDTO 子类化：

```
public class EvaluationRuleDTO extends RuleDTO {
    protected String successAction;
    protected String failureAction;
    // etc...
} 
```

然后在我的 ObjectConversionHelper 类中遇到了问题，该类包含以下类型的逻辑：

```
{
    // Perform logic common to RuleDTO such as setting ruleID, isActive etc
    if(ruleDTO instanceof AssignmentRuleDTO) {
        // Set assignedToTeam and assignmentOperator etc
    }
    else if (ruleDTO instanceOf EvaluationRuleDTO) {
        // Set successAction and failureAction etc  
    }
} 
```

相反，这里有什么好的解决方案？我已经阅读了访问者模式，但不确定它如何应用在这里。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:28:35.790

你的`RuleDTO`类应该有一个被调用的方法`setStuff()`或类似的东西。

然后你覆盖它`AssignmentRuleDTO`并`EvaluationRuleDTO`设置相关字段。

这样你`ObjectConversionHelper`就可以打电话

```
ruleDTO.setStuff(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T20:55:37.977

我认为在这里使用访问者模式是一种合理的方法。所以你会有访客界面

```
interface RuleDTO {
    void visit(RuleDTO theRule);
    void visit(EvaluationRuleDTO theEval);
    void visit(AssignmentRuleDTO theAssign);
    ... and so on ...
} 
```

你会为这些具体的类添加一个方法来处理双重调度

```
public void accept(RuleDTOVisitor theVisitor) {
    theVisitor.visit(this);
} 
```

最后，您将创建一些实现访问者的类，例如 SettingPropertiesVisitor，并且对于每个方法，您可以执行实现，其中每个对象的适当字段都根据您的应用程序要求设置。

那么使用它

```
aRuleDTO.accept(new SettingPropertiesVisitor()); 
```

这样，将为每种类型调用适当的访问者方法，然后在 SettingPropertiesVisitor 的方法中，您可以进行适当的分配。这将绕过 instanceof 检查，并将 setter 逻辑与对象分离。

当然，如果这是您创建的唯一访问者，这可能是矫枉过正，在这种情况下，instanceof 不像杀死小猫。但这里明显的缺点是每次扩展 API 时，都需要修改访问者界面，然后可能所有的具体访问者都支持新方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T23:28:38.440

恕我直言，访客在这里看起来有点矫枉过正。

对象图没有迭代。
不需要双重派送。

记住 KISS 和 YAGNI。只需添加一个抽象方法或保持原样。
您以后总是可以重构 - 假设您已经进行了测试；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T20:29:30.000

在您的情况下，可以通过在 RuleDTO 中编写 convertToOtherClass 方法来应用访问者模式，然后由其子类覆盖该方法。然后，在您的对象转换类中，您将拥有一个类似于 convertRuleDTO 的方法（在 RuleDTO 的 convertToOtherClass 方法中调用），该方法执行相关代码，确保它在没有子类的 RuleDTO 实例上运行，因为否则子类将覆盖 convertToOtherClass 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T20:28:13.577

去掉“其他”……有什么问题？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T20:51:11.097

有几种可行的方法。我会考虑的两个是使用所有类都实现的接口或使用与不同类对应的枚举。

如果你有一个接口（让我们称之为它`public interface DTO`，你可以在其中调用一个方法签名`setFields()`或类似的东西，每个实现类都*必须*实现。然后，通过多态的魔力，你现在可以将所有对象视为`DTO`使用类型转换并调用`setFields()`它们而不用担心实际的对象是什么。`setFields()`每个单独的类中的方法会为你处理它。

或者，您可以创建一个本质上是每个类的 ID 的枚举，并使每个类具有该类型的全局变量（包含 getter 和 setter）以识别它。这是一个有点“hacky”的解决方法，但仍然是可行的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-20T08:49:03.357

为每个 DTO 类创建一个 ObjectConversionHelper 类怎么样？它们中的每一个都可以不同地实现一个通用的转换接口，调用继承的成员等。然后你可以利用一些对象创建工厂来为 DTO 创建相关的 Helper，反之亦然（即使用反射机制）。

# php - 显示没有索引键的数组

> ID：11549707
> 
> 赞同：7
> 
> 时间：2012-07-18T20:25:44.607
> 
> 标签：php, arrays

```
print_r($arraydata); 
```

我得到了输出

数组（ [0] => vikas [1] => 衬衫 [2] => 布料 1 [3] => 测试 [4] => 衬衫 [5] => 布料 2 [6] => avi）

我需要显示这样的数组

$arr = array("vikas","shirt","cloth1","test","shirt","cloth2","avi");

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T20:29:36.243

用这个 ：

```
echo '$arr = array("'.implode('", "', $arraydata).'");'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:31:21.360

如果需要逗号分隔：

```
echo '$arr = array(';
foreach ($array as $key => $value) {
  if ($key > 0) echo ',';
  echo '"'.$value.'"';
}
echo ');'; 
```

# java - 如何找出我的平板电脑支持的采样率？

> ID：11549709
> 
> 赞同：3
> 
> 时间：2012-07-18T20:25:58.690
> 
> 标签：java, android, audio-recording

我有一个应用程序可以在一堆设备（Xoom、Xyboard 等）上完美运行，但在 Galaxy 10.1 的这条线上却失败了

```
mrec.setAudioSamplingRate(44100); 
```

当我评论这条线时，一切都会顺利进行。（我不确定它默认使用的速率）。

我的猜测是该设备不支持这个特定的采样率，但我在文档中没有看到任何关于我可以查看什么对象的方法，以找出支持的采样率是多少。

所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-19T04:18:25.680

是的，Android 没有提供明确的方法来检查它，但是有一个使用 AudioRecord 类的[getMinBufferSize](http://developer.android.com/reference/android/media/AudioRecord.html#getMinBufferSize%28int,%20int,%20int%29)函数的解决方法。

```
public void getValidSampleRates() {
    for (int rate : new int[] {8000, 11025, 16000, 22050, 44100}) {  // add the rates you wish to check against
        int bufferSize = AudioRecord.getMinBufferSize(rate, AudioFormat.CHANNEL_CONFIGURATION_DEFAULT, AudioFormat.ENCODING_PCM_16BIT);
        if (bufferSize > 0) {
            // buffer size is valid, Sample rate supported

        }
    }
} 
```

如果您检查了函数描述，如果输入的参数之一不受支持，它将返回负值。假设您输入所有其他有效输入，如果不支持采样率，我们期望它返回负缓冲区大小。

但是，有些人报告说即使不支持采样率，它也会返回正值，因此可以通过尝试初始化[AudioRecord 对象](http://developer.android.com/reference/android/media/AudioRecord.html#AudioRecord%28int,%20int,%20int,%20int,%20int%29)来进行额外检查，如果它认为无法处理该采样率，则会抛出 IllegalArgumentException。

最后，它们都没有提供有保证的检查，但同时使用两者都会增加您获得支持检查的机会。

大多数时候，44100 和 48000 对我有用，但当然，它因设备而异。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-11T05:51:43.237

Android 具有`AudioManager.getProperty()`获取最小缓冲区大小并获得音频记录和播放的首选采样率的功能。但是，当然，**`AudioManager.getProperty()`在 API 级别 < 17 上不可用**。这是有关如何使用此 API 的示例代码示例。

```
// To get preferred buffer size and sampling rate.
AudioManager audioManager = (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);
String rate = audioManager.getProperty(AudioManager.PROPERTY_OUTPUT_SAMPLE_RATE);
String size = audioManager.getProperty(AudioManager.PROPERTY_OUTPUT_FRAMES_PER_BUFFER);
Log.d("Buffer Size and sample rate", "Size :" + size + " & Rate: " + rate); 
```

虽然这是一个迟到的答案，但我认为这可能很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-17T15:28:02.747

这不使用缓冲区大小作为测试，因为它不是绝对的。我在自己的 ASUS MemoPad 上测试了上述解决方案，缓冲区大小测试将始终返回一个正整数，给出误报。

第一种方法将测试通过的采样率，并根据设备是否支持采样率返回真或假。第二种方法将遍历给定的列表并返回最大有效采样率（列表中的第一个有效采样率） - 可以轻松更改其他启发式方法。

```
boolean validSampleRate(int sample_rate) {      
    AudioRecord recorder = null;
    try {
        int bufferSize = AudioRecord.getMinBufferSize(sample_rate, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT);
        recorder = new AudioRecord(MediaRecorder.AudioSource.MIC, sample_rate, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSize);
    } catch(IllegalArgumentException e) {
        return false; // cannot sample at this rate
    } finally {
        if(recorder != null)
            recorder.release(); // release resources to prevent a memory leak
    }
    return true; // if nothing has been returned yet, then we must be able to sample at this rate!
}

int maxValidSampleRate() {
    int[] sample_rates = new int[]{44100, 16000}; // pad list with other samples rates you want to test for
    for(int sample_rate : sample_rates) {
        if(validSampleRate(sample_rate))
            return sample_rate; // this rate is supported, so return it!
    }
    return -1; // no valid sample rate
} 
```

# android - 如何在 android 中创建气泡游戏 UI

> ID：11549713
> 
> 赞同：0
> 
> 时间：2012-07-18T20:26:01.003
> 
> 标签：android, android-animation, android-ui

我想在 android 中创建一个类似游戏的气泡，但我不知道如何绘制图形。我应该使用画布吗？每个气泡都应该是位图或图像视图？

另一件事，我希望能够旋转/缩放气泡。我尝试过使用位图和画布，但无法旋转气泡。每个气泡的图像视图对我来说都是一团糟。

感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:30:09.577

如果您想制作游戏，我建议您使用 Canvas，并将 Canvas 放在您的大部分或全部布局上。使用常规 UI 结构创建除最基本游戏之外的任何东西都将是一场噩梦。

听起来您已经到了可以加载气泡图像并将它们绘制到画布上的地步，这很好。至于旋转气泡，使用这个：

```
Matrix rotator = new Matrix();
rotator.postRotate(90);
canvas.drawBitmap(bitmap, rotator, paint); 
```

那是对[这个 SO question](https://stackoverflow.com/a/9601500/805819)的回答，更具体地说，是关于在画布上旋转位图。

有关在 Android 中制作游戏的更多信息，[这本书](http://www.apress.com/9781430230427)对我很有帮助。

希望有帮助！

# jquery - 算法对角淡入淡出jQuery

> ID：11549714
> 
> 赞同：0
> 
> 时间：2012-07-18T20:26:08.630
> 
> 标签：jquery, html, css, fade, slide

我正在尝试使用此图像上的内容创建对角渐变效果：

![网格](../Images/b5be25b3019c1d22318ee8c891c74414.png)

所以这个想法是让第一次褪色，然后延迟其他褪色。（我猜是使用 Javascript / jQuery）

我对使用的方法没有偏好，如果它是一个列表，div，whatever.A library 做它什么的。

希望您能够帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:48:07.553

我会使用 jquery 和 javascript 来完成这个。分成几行并将每一行标记为同一类“一”、“二”、“三”。然后淡入其中的每一个。这是一个粗略的例子，但如果你调整它就会起作用。

```
<script>
$(document).(ready(function(){
 $(".one").each(function(){
   $(this).fadeIn();
 });

 $(".two").each(function(){
   $(this).fadeIn();
 });

 $(".three").each(function(){
   $(this).fadeIn();
 });
});
</script>

<div class="wrapper">
<div class="row-one-wrapper">
  <div class="one">1</div>
  <div class="two">2</div>
  <div class="three">4</div>
  <div class="four">7</div>
  <div class="five">9</div>
  <div class="six">11</div>
</div>

<div class="row-two-wrapper">
  <div class="two">3</div>
  <div class="three">5</div>
  <div class="four">8</div>
  <div class="five">12</div>
  <div class="six">17</div>
</div>
</div> 
```

# javascript - 如何使用 jQuery 从 HTML 字符串中的锚点中删除所有 ClientEvents

> ID：11549717
> 
> 赞同：0
> 
> 时间：2012-07-18T20:26:23.293
> 
> 标签：javascript, jquery, html

几个小时以来，我一直在努力解决一个看似简单的问题。我已经编写了一个有效的 REGEX 表达式，但是我希望有一种更优雅的方法来处理 HTML。字符串将被传递给函数，而不是直接在页面中处理内容。看了很多例子后，我觉得我一定做错了什么。我试图在将它保存到我们的数据库之前获取一个字符串并清除它的客户端事件，我认为 jQuery 非常适合这个。

我想要：

```
Some random text <a href="http://stackoverflow.com" onclick="return evilScripts();">click here</a> and a link with any event type
//to become:
Some random text <a href="http://stackoverflow.com">click here</a> and a link with any event type 
```

这是我的代码

```
function RemoveEvilScripts(){
    var myDiv = $('<div>').html('testing this <a href="#Foo" onclick="return runMyFunction();">Do it!</a> out');
    //remove all the different types of events
    $(myDiv).find('a').unbind();            
    return $(myDiv).html();
} 
```

我的结果是，onClick 保留在锚标记中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:31:38.927

这是一个纯 Javascript 解决方案，它从任何以“on”开头的 DOM 元素（及其子元素）中删除任何属性：

```
function cleanHandlers(el) {

    // only do DOM elements
    if (!('tagName' in el)) return;

    // attributes is a live node map, so don't increment
    // the counter when removing the current node
    var a = el.attributes;
    for (var i = 0; i < a.length; ) {
        if (a[i].name.match(/^on/i)) {
            el.removeAttribute(a[i].name);
        } else {
            ++i;
        }
    }

    // recursively test the children
    var child = el.firstChild;
    while (child) {
        cleanHandlers(child);
        child = child.nextSibling;
    }
}

cleanHandlers(document.body);​ 
```

[在http://jsfiddle.net/alnitak/dqV5k/](http://jsfiddle.net/alnitak/dqV5k/)工作演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:07:02.387

[unbind()](http://api.jquery.com/unbind/)不起作用，因为您使用的是内联 onclick 事件处理程序。如果您使用 jquery/javascript 绑定单击事件，则可以使用 unbind() 取消绑定事件。要删除任何内联事件，您只需使用[removeAttr('onclick')](http://api.jquery.com/removeAttr/)

```
$('a').click(function(){ //<-- bound using script
    alert('clicked');
    $('a').unbind(); //<-- will unbind all events that aren't inline on all anchors once one link is clicked
}); 
```

[http://jsfiddle.net/LZgjF/1/](http://jsfiddle.net/LZgjF/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T13:07:41.363

我最终得到了这个解决方案，它删除了任何项目上的所有事件。

```
function RemoveEvilScripts(){
    var myDiv = $('<div>').html('testing this <a href="#Foo" onclick="return runMyFunction();">Do it!</a> out');
    //remove all the different types of events
     $(myDiv)
        .find('*')
        .removeAttr('onload')
        .removeAttr('onunload')
        .removeAttr('onblur')
        .removeAttr('onchange')
        .removeAttr('onfocus')
        .removeAttr('onreset')
        .removeAttr('onselect')
        .removeAttr('onsubmit')
        .removeAttr('onabort')
        .removeAttr('onkeydown')
        .removeAttr('onkeypress')
        .removeAttr('onkeyup')
        .removeAttr('onclick')
        .removeAttr('ondblclick')
        .removeAttr('onmousedown')
        .removeAttr('onmousemove')
        .removeAttr('onmouseout')
        .removeAttr('onmouseover')
        .removeAttr('onmouseup');
    return $(myDiv).html();
} 
```

# javascript - 使用 JS/Jquery 从 URL 中提取 GET 数据

> ID：11549719
> 
> 赞同：0
> 
> 时间：2012-07-18T20:26:31.047
> 
> 标签：javascript, jquery, html

我试图提取链接中包含的单个 $_GET 变量的值。

所以html看起来像：

```
<div class="news_item"><a href="http://example.com/?p=51">Title</a></div> 
```

我正在尝试使用 JS 从这个 url 中提取“51”：

```
<script>
        function GetURLParameter(sParam, URL) {
            var sURLVariables = URL.split('&');
            for (var i = 0; i < sURLVariables.length; i++) 
            {
                var sParameterName = sURLVariables[i].split('=');
                if (sParameterName[0] == sParam) 
                {
                    return sParameterName[1];
                }
            }
         };

        $('.news_item a').click(function(e) {
            e.preventDefault();
            var URL = $(this).val('href');
            var sParam = 'p';
            var ID = GetURLParameter(sParam, URL);
            alert(ID);
        });

    </script> 
```

当我单击链接时，我收到以下错误：`Uncaught TypeError: Object [object Object] has no method 'split'` 任何想法发生了什么？我无法弄清楚我做错了什么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:32:01.463

我认为`$(this).attr('href')`会解决您的问题，但请考虑以下事项：

```
 var params = [];
 $(this).attr('href').replace(/[?&]+([^=&]+)=([^&]*)/gi, function(match, key, value) {
    params[key] = value;
 });

 if (params.Something) {
     // ... it's set.
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:32:17.640

试试 - [http://jsfiddle.net/6W4Rw/](http://jsfiddle.net/6W4Rw/)

```
$("a").on("click", function(e) {
    e.preventDefault();
    alert( $(this).attr("href").split("=")[1] );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:39:55.807

你能用PHP吗？如果是这样，它就像

```
<script>
 var val = "<?php print $_GET['p']; ?>
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T20:47:02.363

很多答案告诉您使用 attr 而不是 val - 返回值仍然未定义，因为您没有充分拆分字符串以仅包含查询参数。您最终会检查“p”是否===“http://example.com/?p”。

Don't forget to split off the non-query portion of the url.

# c++ - C++中的数组指针

> ID：11549727
> 
> 赞同：0
> 
> 时间：2012-07-18T20:26:58.037
> 
> 标签：c++

```
int n;
int *array[8]
cout<<"Enter Number Between 0-9 Only"<<endl;
for(int i = 0; i< 9; i++){
    cout << "Enter Number " << (i + 1) << endl;
    cin >> n;
    if((n >= 0) && (n <= 9))
        array[i] = &n;
    else {
        cout << "Numbers from 0-9 only\n" << endl;
        i--;
    }

}
cout << *array[0] << endl;
} 
```

我试图将 9 个输入的数字存储在一个指针数组中，但它不起作用，为什么？你能向我解释为什么以及如何解决或改进它。我只是一个初学者，它不是我正在测试我读过的东西的家庭作业。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:32:42.180

线

```
array[i] = &n; 
```

将在数组中的每个条目中存储相同的地址。这只是指向`n`所以将始终指向该值。

将数组定义为整数数组

IE`int array[9];`

然后将值放入该数组

IE`array[i] = n;`

**或者**

从堆中分配一些内存

IE

```
int *array[9];
...
array[i] = new int;
*array[i] = n; 
```

但是您随后必须释放此内存`delete`以避免内存泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:34:52.980

这里有几个问题。

1.  您无处可存储这些值。您有一个由 8 个指针组成的数组，它们都设置为指向同一个变量 n，该变量位于堆栈上，因此超出了范围。
2.  该数组有 8 个元素，因此循环在末尾结束
3.  这是 C++，所以除非你有正当理由，否则最好不要使用 C 数组。

我会有更像 *NB 的东西没有编译和运行）

```
{
...
std::vector<int> array;

cout<<"Enter Number Between 0-9 Only"<<endl;
for(int i = 0; i< 8; i++){
    int n;
    cout << "Enter Number " << (i + 1) << endl;
    cin >> n;
    if((n >= 0) && (n <= 9))
        array.push_back(n);
    else {
        cout << "Numbers from 0-9 only\n" << endl;
        i--;
    }

}

cout << array[0] << endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:29:30.060

您在数组中保存了指向 n 的指针，但您不断更改 n 的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T20:32:19.703

你真的不需要在这里弄乱指针。改变你的数组定义，你如何填充它，以及你如何显示，你应该有更好的运气。

```
int array[9];
...
array[i] = n;
...
cout << array[0] << endl; 
```

# ios - 取消 HTTP/1.1 分块响应并保持持久连接

> ID：11549730
> 
> 赞同：1
> 
> 时间：2012-07-18T20:27:10.780
> 
> 标签：ios, http, persistent-connection, chunked

这个问题主要是一个 HTTP 问题，我正在开发一个 iOS 应用程序，尽管这个问题并不特定于 iOS。

我想使用持久连接，并且这样做没有问题，直到 HTTP 响应使用分块传输类型，而不是显式发送 Content-Length。响应本身正常工作，如果我不需要取消响应，它就会工作。这个响应可能需要一段时间来发送响应（它可能需要几分钟并且永远不会发送最后的 0 块），而且我经常想取消这个请求（和响应）并在同一个连接上发送一个新请求。

使用 HTTP/1.1，如何在**不**关闭连接的情况下取消分块响应响应？

我目前的解决方法是不使用持久连接，但是我失去了使用持久连接的所有好处，这使得启动这些请求的速度要慢得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T22:55:40.227

你不能取消它。HTTP 协议中没有任何内容允许您中断 HTTP 响应。您要么需要读取并丢弃整个响应，要么关闭连接。但是，您可以在服务器仍在发送响应时在同一连接上发出另一个 HTTP 请求，但您仍然必须处理对原始请求的整个响应。

# ldap - 是否可以通过 telnet 发送 LDAP“请求”？

> ID：11549731
> 
> 赞同：13
> 
> 时间：2012-07-18T20:27:11.193
> 
> 标签：ldap, network-protocols, telnet

我想知道是否可以通过 telnet（或其他程序）建立与 LDAP 服务器的连接，并开始发出请求和接收响应，就像我通常使用 HTTP 所做的那样。其实这个问题比较笼统，和我对网络连接和通信协议的误解有关。让我告诉你我对这个话题的想法：

所有应用程序协议都定义了通信协议（即服务器将要理解并在其传递时采取行动的消息）。如果我知道应用程序协议是如何工作的，我可以建立与服务器的连接（控制该协议服务器端的守护程序）并开始与服务器通信。例如，使用 HTTP，我可以通过 telnet 建立与 HTTP SERVER 的连接，并开始与他交谈，例如：

```
GET /users/pepito HTTP/1.1
Host: stackoverflow
Content-Type: text/html 
```

**我希望这个程序适用于任何应用程序协议。这个概念对吗？？**

我浏览了[LDAP 协议规范 RFC](https://www.rfc-editor.org/rfc/rfc4511)，但我不了解消息的格式。我的意思是，我期待阅读诸如 HTTP 协议规范之类的内容；但这太笼统了。你能给我一个如何进行 LDAP 搜索的例子吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-18T20:37:53.703

LDAP RFC 指定 LDAP 消息采用 ASN1 编码。这意味着消息是特殊格式的二进制数据，而不是遵循特殊格式的文本。这使得使用 telnet 手动编写 ladap 查询变得非常困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-03T21:08:48.690

在某种程度上，您可以在一些命令行朋友的帮助下 :-)

这是一个简单 LDAP 查询的 hexdump——它相当于`ldapsearch -x -b "" -s base objectclass=top`：

```
30 0c 02 01 01 60 07 02 01 03 04 00 80 00
30 2c 02 01 02 63 27 04 00 0a 01 00 0a 01 00 02 01 00 02 01 1e 01 01 00 a3 12 04 0b 6f 62 6a 65 63 74 63 6c 61 73 73 04 03 74 6f 70 30 00 
```

将它保存到一个名为 ldap.hexdump 的文件中，然后就可以使用 nc：

```
xxd -r -p ldap.hexdump | nc ldapserver 389 
```

如果要查看解析后的输出，可以使用 unber：

```
xxd -r -p ldap.hexdump | nc ldapserver 389 | unber -m - 
```

如果您由于某种原因不能使用 ldapsearch 并且想要使用 nc 或 openssl 来测试 LDAP 服务器是否正确响应，这可能会派上用场。它假定服务器接受匿名绑定来查询空的基本 DN（根 DSE）。

# azure - 多个 SSL 证书的 Azure 云服务配置

> ID：11549741
> 
> 赞同：4
> 
> 时间：2012-07-18T20:27:50.830
> 
> 标签：azure, ssl, azure-cloud-services

我创建了一个 MVC3 项目并附加了一个 Azure 云服务以部署到一个 Azure Web 角色。我为 PRODUCTION 和 TEST 创建了两个 .cscfg 文件。这两个服务具有不同的 SSL 证书和不同的指纹 - 这些证书在相应的 .cscfg 文件中设置。在我的角色中，我设置了一个 https 端点并为 SSL 证书名称选择了正确的配置设置。

问题 - Visual Studio 不会发布到 Azure 上的 Web 角色，除非所有 .cscfg 文件都包含完全相同的 SSL 指纹。如果我在 .cscfg 文件（用于生产和测试）中有不同的证书指纹，它拒绝发布说：

> 错误：证书：带有指纹的“SSLCert”：角色：XXXXX 尚未上传到云服务：XXXXX

如何设置配置以允许单独的 SSL 证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T19:14:53.560

我想说这是 Windows Azure SDK 的一个已知问题，目前正在处理中。我没有关于修复可用性的任何具体细节，也无法对此发表评论。

上面你已经有了一些手动发布包的解决方法，但是如果你仍然想在工具集中解决你的问题，你可以在构建步骤中转换 CSDEF/CSCFG 配置文件，如下所述：

[http://blogs.msdn.com/b/philliphoff/archive/2012/07/02/transform-windows-azure-service-model-files-during-packaging.aspx](http://blogs.msdn.com/b/philliphoff/archive/2012/07/02/transform-windows-azure-service-model-files-during-packaging.aspx)

转换配置文件后，您仍然可以使用相同的构建/发布步骤，并且不需要手动发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T21:40:41.470

我刚刚使用 Igorek 对[我的问题](https://stackoverflow.com/questions/11170755/azure-is-there-any-way-to-deploy-different-instance-sizes-for-test-production)的回答实现了这一点。不如 msbuild 转换强大，但更易于实现。

解决方案是创建一个与每个服务配置对应的 .csdef 文件。然后，在 Azure 项目的预构建步骤中，将正确的 .csdef 文件复制到主 .csdef 文件上。这些自定义 .csdef 文件可以添加到您的解决方案中，但您必须使用文本编辑器手动完成。

我的每个特定于配置的 .csdef 文件都包含我的测试和生产 SSL 证书，但端点定义设置为使用正确的配置文件。这是必需的，因为 Visual Studio 会抱怨 .cscfg 文件中引用的证书在 .csdef 文件中丢失。这意味着您必须将 SSL 证书上传到 Azure 门户上的测试和生产服务，但在部署完成后将使用正确的证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:50:30.737

我使用的简单解决方案是在我的解决方案中创建两个单独的云项目。我把它们放在一个名为“手动部署”的文件夹中

当我想使用生产证书发布到生产环境时，我会发布在配置文件中具有正确设置的云项目。QA 也一样。我什至为本地开发测试做了一个单独的云项目。云项目很容易制作，您只需将实际的 webrole 项目与每个云项目相关联，您就可以开展业务了。

# php - PHP检查时间戳是否小于30分钟

> ID：11549742
> 
> 赞同：19
> 
> 时间：2012-07-18T20:27:57.040
> 
> 标签：php, timestamp

我从我的数据库中获取了一个项目列表，每个项目都有一个 CURRENT_TIMESTAMP 在[timeago](http://timeago.yarp.com/)的帮助下我已将其更改为“x 分钟前” 。所以这很好。但问题是我还想在不到 30 分钟的物品上贴上“新”横幅。我如何获取生成的时间戳（例如：2012-07-18 21:11:12）并说它是否距离当前时间不到 30 分钟，然后在该项目上回显“新”横幅。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-18T20:30:28.850

使用[strtotime](http://php.net/manual/en/function.strtotime.php)（“-30 分钟”），然后查看您的行的时间戳是否大于该值。

例子：

```
<?php
    if(strtotime($mysql_timestamp) > strtotime("-30 minutes")) {
        $this_is_new = true;
    }
?> 
```

我在这里两次使用 strtotime() 来获取 mysql 日期的 unix 时间戳，然后再次获取 30 分钟前的时间戳。如果 30 分钟前的时间戳大于 mysql 记录的时间戳，那么它一定是在 30 分钟前创建的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T20:32:16.400

尝试这样的事情，使用 PHP 的[DateTime](http://us2.php.net/manual/en/datetime.diff.php)对象：

```
$now = new DateTime();
$then = DateTime($timestamp); // "2012-07-18 21:11:12" for example
$diff = $now->diff($then);
$minutes = ($diff->format('%a') * 1440) + // total days converted to minutes
           ($diff->format('%h') * 60) +   // hours converted to minutes
            $diff->format('%i');          // minutes
if ($minutes <= 30) {
    echo "NEW";
} 
```

*编辑：*迈克是对的，无论出于何种原因，我都忘记了，`%a`实际上只返回其类型的总数（在这种情况下为天）。所有其他用于显示时间格式。我已将上述内容扩展到实际工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-21T08:02:27.207

你也可以这样做——

```
$currentTime=time(); 
```

检查上次更新时间是否超过 30 分钟

```
last_updated_at <  $currentTime - (60*30) 
```

# iphone - UIScrollView scrollToTop 没有被 iPhone 调用

> ID：11549743
> 
> 赞同：1
> 
> 时间：2012-07-18T20:27:58.910
> 
> 标签：iphone, objective-c, ios, ipad

我有一个通用的应用程序，代码是一样的。我有一个 UIScrollView，其中的 scrollToTop 可以在 iPad 上工作，但不能在 iPhone 上工作。我对此感到非常沮丧。

[我知道这里](https://stackoverflow.com/questions/8542122/scrolltotop-is-not-working-on-iphone-but-it-is-working-on-ipad)有一个类似的帖子，但事实并非如此。在此之前，我曾经在 iPad 和 iPhone 上滚动工作。知道要寻找什么吗？

代码的结构是这样的。我有一个名为 A 的 mainVC。然后我有一个名为 B 的 VC。还有另一个名为 C 的 VC，它有一个 UIScrollView。我将 C 添加为 B 的子视图控制器。然后 B 作为 A 的子 VC。现在 C 上的滚动视图没有 scrollToTop 工作。

委托 scrollViewShouldScrollToTop 也仅在 iPad 中调用，而不在 iPhone 中调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:43:19.183

看看[我](https://stackoverflow.com/questions/8542122/scrolltotop-is-not-working-on-iphone-but-it-is-working-on-ipad/11549980#11549980)对你所说的问题的回答。我刚刚添加了它。

***编辑***

我没有我制作的原始代码，但它应该是这样的：

```
-(void)cleanUp:(UIScrollView*)view{
    if([view isKindOfClass:[UIScrollView class]]){
        view.scrollsToTop = NO;
    }else{
        for(UIScrollView* subview in view.subviews){
            if([subview isKindOfClass:[UIView class]]){
                [self cleanUp:subview];
            }
        }
    }
} 
```

你可以这样称呼它：

```
[self cleanUp:self.view]; 
```

您可能还需要该例程的更严格的变体（有时您可能在 scrollView 内有一个 tableView 或类似的东西）：

```
-(void)cleanUp:(UIScrollView*)view{
    if([view isKindOfClass:[UIScrollView class]]){
        view.scrollsToTop = NO;
    }
    for(UIScrollView* subview in view.subviews){
        if([subview isKindOfClass:[UIView class]]){
            [self cleanUp:subview];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:05:21.683

我刚刚采用了@Ariel 的解决方案，做了一些改进，想和大家分享一下：

```
+ (void)globalDisableScrollToTop:(UIView *)_view;
{
    // Check whether we got a scroll view
    if ([_view isKindOfClass:[UIScrollView class]])
    {
        // Disable scroll to top
        ((UIScrollView *)_view).scrollsToTop = NO;
    }

    // Iterate all subviews
    for (UIView *view in _view.subviews)
    {
        // Recursive call of this method
        [self globalDisableScrollToTop:view];
    }
} 
```

或者没有评论：

```
+ (void)globalDisableScrollToTop:(UIView *)_view;
{
    if ([_view isKindOfClass:[UIScrollView class]])
        ((UIScrollView *)_view).scrollsToTop = NO;

    for (UIView *view in _view.subviews)
        [self globalDisableScrollToTop:view];
} 
```

它现在修复了所有子视图，并且可以实现为静态方法（您的根滚动视图类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:10:22.230

如果可能，请在此处粘贴添加子视图代码。看起来问题是存在滚动视图的视图隐藏在其他视图后面。尝试更改添加子视图的顺序。或者您也可以尝试将滚动视图设置在顶部的 BringSubviewtoFront 属性。

让我知道它是否有帮助。

# javascript - 来自实时 jQuery 调用的灯箱功能

> ID：11549747
> 
> 赞同：0
> 
> 时间：2012-07-18T20:28:23.860
> 
> 标签：javascript, jquery, lightbox

我有一个使用 jQuery 动态调用新图像的图像库，如果单击它们，我想对这些图像进行灯箱化。

问题是元素似乎没有被 jQuery 调用，因为它们需要实时调用。

我最初尝试的是这样的：

```
$(function(){
    $('a.ad-image').lightBox();
}); 
```

而我之后尝试过的仍然无法正常工作的是：

```
$(function(){
    $('body').on('click','a.ad-image',function(e){
        e.preventDefault();
        $(this).lightBox();
    });
}); 
```

有任何想法吗？

灯箱： http: [//leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)

# objective-c - 使用 Obj-C NSString 引用与复制

> ID：11549750
> 
> 赞同：0
> 
> 时间：2012-07-18T20:28:38.240
> 
> 标签：objective-c, memory, reference

我确实找到了一些关于这个话题的讨论，但这超出了我目前的理解水平。我正在阅读 Kochan 的“Objective-C 中的编程，4e”，并且正在阅读关于 NSString 对象的部分。首先，我正在玩的代码，所以我可以问我的问题：

```
NSString *strA = @"StringA";
NSString *strB = @"StringB";
NSLog(@"Value of strA: %@",strA);
NSLog(@"Value of strB: %@",strB);

strB = strA; // strB should point to strA's memory location
NSLog(@"New value of strB: %@",strB); //correctly logs as "StringA"
strA = @"StringA has been changed.";
NSLog(@"New value of strB: %@",strB); //logs as "StringA" still
NSLog(@"New value of strA: %@",strA); //correctly logs as "StringA has been changed" 
```

我的理解是说 strB = strA 意味着 strB 指向 strA 的内存位置，因此对 strA 的任何更改也会转到 strB。但是，这不会发生。Kochan 说它应该这样做，并且为了绕过它建议使用

```
strB = [NSString stringWithString: strA]; 
```

据我所知，这两种方法都有效。我可以说 strB = strA，然后更改 strA，但 strB 仍然保留它收到的值（更改之前 strA 的值）。

我认为这可能来自 NSString 是不可变的，但如果是这样的话，为什么我实际上可以在初始化后更改 str1 和 str2 的值？我在这里想念什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:01:41.910

好像你已经没有足够的答案了......

我认为一到三个图表将帮助您了解代码示例中发生的事情。

首先，您的代码执行此操作：

```
NSString *strA = @"StringA";
NSString *strB = @"StringB"; 
```

这使您的应用程序的内存看起来像这样：

![内存图1](../Images/aecbcb5c1dcca2ef5e863edc180c8cfc.png)

左边是你的局部变量，`strA`和`strB`. 它们只是指向内存中对象的指针。

中间是字符串对象。这些是由编译器在您的应用程序中预先创建的，因为它们出现在您的源代码中。

右边是字符串对象的实际字符。这些也是编译器在您的应用程序中预先创建的。

接下来，您的代码执行此操作：

```
strB = strA; 
```

现在您的应用程序的内存如下所示：

![内存图2](../Images/da41bec1975812ee605204c64df5592b.png)

请注意，您的局部变量`strB`已更改，但对象和字符没有更改。

最后，您的代码执行此操作：

```
strA = @"StringA has been changed."; 
```

这使您的应用程序的内存看起来像这样：

![内存图3](../Images/08f6dfc4eed9af21dac560cac9dc03ef.png)

您的局部变量`strA`已更改，但对象和字符仍未更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:35:37.917

> 我的理解是说 strB = strA 意味着 strB 指向 strA 的内存位置，因此对 strA 的任何更改也会转到 strB。

是的，尽管这样说可能更清楚，`strB`并且`strA`都指向同一个对象。

> 我可以说 strB = strA，然后更改 strA，但 strB 仍然保留它收到的值（更改之前 strA 的值）。

如果你改变`strA`，那么你必然`strA`指向不同的字符串。NSStrings 是不可变的，所以你*不能*改变它们——你只能替换它们。所以，如果你说这样的话：

```
strA = [strA stringByAppendingString:@"foo"]; 
```

然后`strA`不再指向原始字符串。`strB`当然，仍然指向原始对象，并且该对象保持不变，因此指向的字符串`strA`和指向的字符串`strB`是不同的对象。

> 我在这里想念什么？

我认为您认为在执行 assignment 时会创建新对象`strB = strA;`，但实际上在该语句之后两个指针都指向同一个对象。当您“更改”时`strA`，就会创建一个新对象。

现在，如果您谈论的是*可变*字符串，情况会有所不同，您当然可以更改。那么你会遇到这样的情况：

```
NSMutableString *mstrA = [@"foo" mutableCopy];
NSMutableString *mstrB = mstrA;     // now mstrB points to the same object as mstrA
[mstrA appendString:@"bar"];
NSLog(@"%@", mstrB);                // will log @"foobar" because the string actually changed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:34:16.023

> 我的理解是说 strB = strA 意味着 strB 指向 strA 的内存位置，因此对 strA 的任何更改也会转到 strB。

更改 strA 的内存位置——是的。更改为指向同一位置的完全不相关的指针，该指针现在指向其他位置——不。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T20:42:09.963

有两种方法可以考虑这里发生的事情。一个稍微低级的是，您正在处理一个称为*指针*的构造。`int`指针保存内存地址，与变量保存整数值的方式完全相同。如果将 an 分配`int`给 another `int`，则更改第一个，第二个不会更改：

```
int i1 = 10;
int i2 = i1;
i1 = 600;    // i2 still 10 
```

指针也是如此。

另一种（可能更高效）的思考方式是，`strA`实际上`strB`是对象的名称。如果您通过一个名称将一个对象分配给另一个名称，则两个名称都包含同一个对象。抛开内存管理和对象生存期问题不谈，您可以将一个名称重新分配给不同的对象，而另一个名称将继续指向原始对象。

# .net - 在 Windows 登录上从 USB 启动程序

> ID：11549751
> 
> 赞同：0
> 
> 时间：2012-07-18T20:28:39.410
> 
> 标签：.net, winapi

我想检查当我在 Windows 登录屏幕时是否插入了 USB，我想让程序在启动时禁用 Windows 登录，当插入 USB 时，它会发送一个 ID，如果那个 ID是正确的，它将启用 Windows 登录。

首先，我想知道这是否可能，尽管我想在编程中一切皆有可能...... :D ，如果是这样，任何资源、帮助或教程将不胜感激。

至于语言，我在考虑 C++ 或 C，或者可能是汇编（虽然我对汇编不是那么精通），或者这可以使用 C#、Perl、Python 或 Java 来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:53:19.953

我相信您需要将 winlogon.exe 替换为从 USB 驱动器读取数据并运行实际 winlogon 的程序（如果一切正确）（不过，我不确定这是否适用于 XP 之后的任何东西）。此外，您需要设置 BIOS 密码并锁定电脑机箱。

# ruby-on-rails - 为什么我的 rspec 测试因 ActionController::RoutingError: 而失败？

> ID：11549753
> 
> 赞同：0
> 
> 时间：2012-07-18T20:28:45.120
> 
> 标签：ruby-on-rails, rspec, capybara

基本上我很难理解为什么这个特定的测试失败了。当我进入并手动测试它时，该页面工作正常，但测试一直失败。首先，这是错误。

```
 2) Setlist Pages Edit page adding a song 
     Failure/Error: click_button submit
     ActionController::RoutingError:
       No route matches {:action=>"edit", :controller=>"setlists", :id=>nil}
     # ./app/controllers/allocations_controller.rb:15:in `create'
     # (eval):2:in `click_button'
     # ./spec/requests/setlist_pages_spec.rb:79:in `block (4 levels) in <top (required)>' 
```

我意识到 id 设置为 nil 但我知道当测试最初访问它呈现的页面时，因为内容测试通过了。我不确定为什么在我测试编辑操作时它也指向创建控制器？测试如下图所示：

```
before do
   @setlist = Setlist.create(date: Date.today, morning: true)
end 
```

...

```
describe "Edit page" do

        let(:admin) { FactoryGirl.create(:admin) }
        let(:submit){ "Add Song" }

        before do
           @secondSong = FactoryGirl.create(:song)
           sign_in admin
           visit edit_setlist_path(@setlist)
        end

        it{ should have_content("Edit a Setlist")}

        describe "adding a song" do
            before do
                select("#{@secondSong.title} by #{@secondSong.artist}", from: 'Songs')
                click_button submit

            end

            it{ should have_selector('div.alert.alert-success')}

            it "should create a new allocation" do
                expect{click_button submit}.to change(Allocation, :count).by(1)
            end

        end # end adding a song
    end # end edit test 
```

根据要求的控制器代码：

```
def create
    @setlist = Setlist.new(params[:setlist])
    if @setlist.save
        #success!
        flash[:success] = "Setlist saved"
      #@setlist.allocations.build produce invalid allocation with nil id
        redirect_to setlist_path(@setlist)
    else
        #FAIL!
        render 'new'
    end
  end
  def edit
    @songs= Song.search(params[:search])
    #@songs = Song.all(order: 'title')
    @setlist = Setlist.find(params[:id])
    @allocations = @setlist.allocations
    @allocation = Allocation.new
    @selections = Song.all.collect {|s| [ [s.title, s.artist].join(" by "), s.id ]}
  end

  def update

    @setlist = Setlist.find(params[:id])
    @selections = Song.all.collect {|s| [ [s.title, s.artist].join(" by "), s.id] }
    @allocations = @setlist.allocations
    @allocation = Allocation.new

    #Allocation parameters
    @allocation.song_id = params[:allocation][:song_id]
    @allocation.setlist_id = @setlist.id
    @allocation.songPosition = @setlist.songs.count + 1

    if @setlist.update_attributes(params[:setlist])
      if @allocation.save
        flash[:success] = "SETLIST SAVED!"
        redirect_to edit_setlist_path(@setlist)
      else
        flash[:fail] = "Sorry there was an error adding songs to the setlist"
        render 'edit'
      end
    else
      flash[:fail] = "Invalid Set"
      render 'edit'
    end
  end 
```

任何指针将不胜感激！

# c# - 托管 C++ 和 C#

> ID：11549755
> 
> 赞同：2
> 
> 时间：2012-07-18T20:28:55.963
> 
> 标签：c#, c++-cli, clr, managed

我在托管 C++ 中有一个类，它的所有成员变量都在构造函数中初始化。感兴趣的成员是一个数组。我从 C# 项目的 .cs 文件中调用它，将两个项目与第一个项目的 dll 链接起来。但是，该函数表示一个或多个参数不正确，因此无法成功使用。

类声明和函数声明如下。两者都在 .h 文件中。

现在，我想调用 .cs 文件中的函数，如下所示：

```
var Driver = new Driver();
long status = Driver.Config2("CAN0", 8, Driver.AttrIdList, Driver.AttrValueList);
Console.WriteLine(status); 
```

如果函数 Config 正确执行，它应该输出一个 0。但是，我得到一个负数，并且在使用供应商提供的表进行查找时，它表明一个或多个参数设置不正确。我不知道如何克服这一点，因为我是托管 C++ 的新手。所有帮助将不胜感激。谢谢。

代码声明如下：

```
public ref class Driver
    {
    public:

        NCTYPE_STATUS Status;
        NCTYPE_OBJH TxHandle;
        MY_NCTYPE_CAN_FRAME Transmit;
        array<NCTYPE_UINT32>^ AttrIdList;
        array<NCTYPE_UINT32>^ AttrValueList;
        array<char>^ Data;
        NCTYPE_UINT32 Baudrate;

    public:
        Driver()
        {
            Baudrate = 1000000;
            TxHandle = 0;
            AttrIdList =    gcnew array<NCTYPE_UINT32>(8);
            AttrValueList = gcnew array<NCTYPE_UINT32>(8);
            AttrIdList[0] =         NC_ATTR_BAUD_RATE;   
            AttrValueList[0] =      Baudrate;
            AttrIdList[1] =         NC_ATTR_START_ON_OPEN;
            AttrValueList[1] =      NC_TRUE;
            AttrIdList[2] =         NC_ATTR_READ_Q_LEN;
            AttrValueList[2] =      0;
            AttrIdList[3] =         NC_ATTR_WRITE_Q_LEN;
            AttrValueList[3] =      1;
            AttrIdList[4] =         NC_ATTR_CAN_COMP_STD;
            AttrValueList[4] =      0;
            AttrIdList[5] =         NC_ATTR_CAN_MASK_STD;
            AttrValueList[5] =      NC_CAN_MASK_STD_DONTCARE;
            AttrIdList[6] =         NC_ATTR_CAN_COMP_XTD;
            AttrValueList[6] =      0;
            AttrIdList[7] =         NC_ATTR_CAN_MASK_XTD;
            AttrValueList[7] =      NC_CAN_MASK_XTD_DONTCARE;

            interior_ptr<NCTYPE_UINT32> pstart (&AttrIdList[0]);
            interior_ptr<NCTYPE_UINT32> pend (&AttrIdList[7]);

            Data = gcnew array<char>(8);
            for (int i=0; i<8;i++)
                Data[i]=i*2;

        } 
```

我在 Config 函数下面还有另一个方法，声明如下：

```
NCTYPE_STATUS Config2 (String^ objName, int numAttrs, array<unsigned long>^ AttrIdList, array<unsigned long>^ AttrValueList )
    {
      msclr::interop::marshal_context^ context = gcnew msclr::interop::marshal_context();
      const char* name = context->marshal_as<const char*>(objName);

      char* name_unconst = const_cast<char*>(name);

      return ncConfig (name_unconst, 8, nullptr, nullptr);
      delete context;

    } 
```

程序编译和构建，这是一个运行时错误。我猜它与函数 Config2 中传递的两个 nullptr 有关，但如果我用参数 AttrIdList 和 AttrValueList 替换它们，编译器会给出错误：无法将参数 3 从 'cli::array^' 转换为 ' NCTYPE_ATTRID_P'

顺便说一句：NCTYPE_STATUS 是 unsigned long，而 NCTYPE_ATTRID_P 是 unsigned long*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:53:43.040

> 无法将参数 3 从 'cli::array^' 转换为 'NCTYPE_ATTRID_P'
> NCTYPE_ATTRID_P 是无符号长 *

您不能将托管数组传递给纯本机 C++ 函数，您首先需要将其“转换”为固定的无符号 long* 指针。

这是一种方法：

```
unsigned long* ManagedArrayToFixedPtr(array<unsigned long>^input)
{
    pin_ptr<unsigned long> pinned = &input[0];
    unsigned long* bufferPtr = pinned;

    unsigned long* output = new unsigned long[input->Length];
    memcpy_s(output, input->Length, bufferPtr,  input->Length);

    return output;
} 
```

测试功能：

```
array<unsigned long>^ larray = gcnew array<unsigned long> {2,4,6,8,10,12,14,16};
unsigned long* lptr = ManagedArrayToFixedPtr(larray); //returns pointer to 2 
```

**编辑：**
记得`#include "windows.h"`要能够使用 memcpy_s 功能！

# opacity - 文字阴影不透明度

> ID：11549757
> 
> 赞同：40
> 
> 时间：2012-07-18T20:29:20.390
> 
> 标签：opacity, css

是否可以仅调整文本阴影的不透明度，而不是文本本身？

例如，我有带有蓝色阴影的紫色文本。我想让蓝色阴影不透明，而不会在紫色上丢失任何东西。

```
h1.blue {text-shadow: 3px 3px 0px #3f6ba9;} 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-07-18T20:33:26.210

可以，但在 rgba 模式下指定颜色以添加 alpha 透明度。

```
h1.blue {text-shadow: 3px 3px 0px rgba(63,107,169, 0.5)} //half of transparency 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-07-06T18:49:45.913

要为希望使用 HEX 代码而不是 RGB 的任何人添加答案：

```
h1.blue {text-shadow: 3px 3px 0px #3f6ba980;} 
```

上述 HEX 代码中的最后 2 个字符的不透明度设置为 50%。对于其他不透明度值，请参阅[此处](https://davidwalsh.name/hex-opacity)链接的不透明度十六进制图表。或者，如果您使用的是 VScode，您将能够使用其内置的颜色选择器来调整不透明度。

# sql - SQL 查询以显示当前月份之前的所有结果

> ID：11549758
> 
> 赞同：0
> 
> 时间：2012-07-18T20:29:21.097
> 
> 标签：sql, oracle

我在 Oracle 中有一个包含列的表：[DATEID date, COUNT_OF_PHOTOS int] 这个表基本上代表了每天上传的照片数量。

我有一个查询，总结了每月上传的照片数量：

```
select extract(year from dateid) as year, extract(month from dateid) as month, count(1) as Photos
from picture_table
group by extract(year from dateid), extract(month from dateid)
order by 1, 2 
```

这就是我想要的，但我想在每个月初运行这个查询，比如说 07-02-2012，并且所有数据都不包括当月。如何添加一个忽略所有日期等于当前年+月的条目的 WHERE 子句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:08:36.007

要保留您可能拥有的任何索引策略`dateid`：

```
select extract(year from dateid) as year, extract(month from dateid) as month, count(1) as Photos
from picture_table
WHERE (dateid < TRUNC(SYSDATE,'MM') OR dateid >= ADD_MONTHS(TRUNC(SYSDATE,'MM'),1))
group by extract(year from dateid), extract(month from dateid)
order by 1, 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:33:29.347

这是一种方法：

```
where to_char(dateid, 'YYYY-MM') <> to_char(sysdate, 'YYYY-MM') 
```

# class - JSP 内部的 JSP EL 私有静态类

> ID：11549771
> 
> 赞同：3
> 
> 时间：2012-07-18T20:29:49.533
> 
> 标签：class, jsp, static, el, private

我有以下jsp：

```
<%@ page import="java.util.Arrays" %>
<%@ page import="java.util.List" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html><body>
<%! 
private static class Test {
    private String val2;
    private String val1;

    public Test(String v1, String v2) {
        val1 = v1;
        val2 = v2;
    }

    public String getVal1() {
        return val1;
    }

    public String getVal2() {
        return val2;
    }
};

private static List<Test> ITEMS = Arrays.asList(new Test("1","1"),new Test("2","2"));

%>

<%
    pageContext.setAttribute("ITEMS",ITEMS);
%>

<c:forEach var="item" items="${ITEMS}">
    ${item.val1},${item.val2}
</c:forEach>
</body></html> 
```

当 TOMCAT 执行它时 - 我们看到异常

```
javax.el.PropertyNotFoundException: Property 'val1' not readable on type java.lang.String 
```

所以 EL 遍历集合，但由于某种原因，forEach 内部的 ${item} 变成了一个字符串。

但是，当您简单地更改`private static class`为`public static class`- 时，一切正常。

我不明白这不是问题，因为我们有解决方案。但我只是不明白为什么在这种情况下它需要公开。JSP 被翻译成 servlet，所以在翻译后的 java 代码中它无论如何都能看到。EL 不只是获取对象属性的反射材料吗（在我们的例子中，属性是`public`，所以 EL 应该可以在没有反射修饰符的情况下获取它）。

如果有人知道 - 请回复。我将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:38:06.343

[JSP](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/HttpJspPage.html)由 JSP 引擎翻译成[servlet](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html)。EL 表达式在运行时由[EL 引擎](http://docs.oracle.com/javaee/6/api/javax/el/package-summary.html)求值。

当向 JSP`Test`声明`private`时，它的方法（默认情况下）通过对表达式语言引擎的自省是不可见的。

`forEach`以下是WebSphere Application Server 翻译的您的片段：

```
 do {
      out.write(_jsp_string4);
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl
         .proprietaryEvaluate("${item.val1}", java.lang.String.class,
                              (PageContext)pageContext, _jspx_fnmap, false));
      out.write(_jsp_string5);
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl
         .proprietaryEvaluate("${item.val2}", java.lang.String.class,
                              (PageContext)pageContext, _jspx_fnmap, false));
      out.write(_jsp_string1);
      int evalDoAfterBody = _jspx_th_c_forEach_0.doAfterBody();
      if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
         break;
    } while (true); 
```

EL 是为与 JavaBeans 一起使用而设计的；bean 要求使用无参数构造函数的公共类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:01:57.407

JSP 使用 ELResolver 的链解析 EL 变量。以下是 EL Resolver 链层次结构：

*   CompositeELResolver
    *   隐式对象ELREsolver
    *   CompositeELResolver
        *   插件ELResolver
    *   MapELResolver
    *   ResourceBundleELResolver
    *   ListELResolver
    *   ArrayEL解析器
    *   BeanEL解析器
    *   ScopedAttributeELResolver

在此层次结构中，您`item`将使用 BeanELResolver 进行解析。BeanELResolver 要求对象遵循某些规则才能将其称为`Bean`. 一个这样的属性是，每个属性都应该有 setter 和 getter。

您看到的异常是因为**您没有为 bean 中的属性定义 setter**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T02:11:08.457

我没有所有的答案，但我可以帮助你一点。Tomcat 使用 BeanELResolver 来定义使用 JavaBeans 组件架构的对象的属性解析行为。由于您没有遵守 JavaBean 约定，因此未定义行为。如果您使用，您可以获得更明智的错误消息

```
 private static class Test implements java.io.Serializable { 
```

这将导致

```
javax.el.PropertyNotFoundException: Property 'var1' not found on type org.apache.jsp.test_jsp$Test 
```

看看
[http://docs.oracle.com/cd/E17802_01/products/products/jsp/2.1/docs/jsp-2_1-pfd2/javax/el/BeanELResolver.html](http://docs.oracle.com/cd/E17802_01/products/products/jsp/2.1/docs/jsp-2_1-pfd2/javax/el/BeanELResolver.html)
[http://en.wikipedia.org/wiki /JavaBeans](http://en.wikipedia.org/wiki/JavaBeans)

# python - python 的 ssl.get_server_certificate 安全吗？

> ID：11549781
> 
> 赞同：0
> 
> 时间：2012-07-18T20:30:20.297
> 
> 标签：python, ssl, ssl-certificate

更具体地说，如果我运行以下代码：

```
import ssl

cert = """-----BEGIN CERTIFICATE-----
MIIF0zCCBTygAwIBAgIKQ8cwCQAAAABhvzANBgkqhkiG9w0BAQUFADBGMQswCQYD
VQQGEwJVUzETMBEGA1UEChMKR29vZ2xlIEluYzEiMCAGA1UEAxMZR29vZ2xlIElu
dGVybmV0IEF1dGhvcml0eTAeFw0xMjA2MjcxMzU4MzBaFw0xMzA2MDcxOTQzMjda
MGYxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1N
b3VudGFpbiBWaWV3MRMwEQYDVQQKEwpHb29nbGUgSW5jMRUwEwYDVQQDFAwqLmdv
b2dsZS5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBALDYfDe83LlAxJ3T
+IwJLyXBmT2WcSTY2asm3q8Yl9EaUGmu0enmWkwUyiL7HybwTAZXFccanuEvI3+B
e5SMvv8Nj1/HHH2XvsP6wNnPuN9R9aaFLTdFrUVtPqbIXyaJVkUKEnxeBbOKgliD
I11FQL3Xj3Ktd09atKZJVpPT61QLAgMBAAGjggOmMIIDojAdBgNVHSUEFjAUBggr
BgEFBQcDAQYIKwYBBQUHAwIwHQYDVR0OBBYEFOJAaGs7fvzmsw8gpn/NASXlHJLR
MB8GA1UdIwQYMBaAFL/AMOv1QxE+Z7qekfv8atrjaxIkMFsGA1UdHwRUMFIwUKBO
oEyGSmh0dHA6Ly93d3cuZ3N0YXRpYy5jb20vR29vZ2xlSW50ZXJuZXRBdXRob3Jp
dHkvR29vZ2xlSW50ZXJuZXRBdXRob3JpdHkuY3JsMGYGCCsGAQUFBwEBBFowWDBW
BggrBgEFBQcwAoZKaHR0cDovL3d3dy5nc3RhdGljLmNvbS9Hb29nbGVJbnRlcm5l
dEF1dGhvcml0eS9Hb29nbGVJbnRlcm5ldEF1dGhvcml0eS5jcnQwDAYDVR0TAQH/
BAIwADCCAmwGA1UdEQSCAmMwggJfggwqLmdvb2dsZS5jb22CCmdvb2dsZS5jb22C
DSoueW91dHViZS5jb22CC3lvdXR1YmUuY29tghYqLnlvdXR1YmUtbm9jb29raWUu
Y29tggh5b3V0dS5iZYILKi55dGltZy5jb22CDyouZ29vZ2xlLmNvbS5icoIOKi5n
b29nbGUuY28uaW6CCyouZ29vZ2xlLmVzgg4qLmdvb2dsZS5jby51a4ILKi5nb29n
bGUuY2GCCyouZ29vZ2xlLmZyggsqLmdvb2dsZS5wdIILKi5nb29nbGUuaXSCCyou
Z29vZ2xlLmRlggsqLmdvb2dsZS5jbIILKi5nb29nbGUucGyCCyouZ29vZ2xlLm5s
gg8qLmdvb2dsZS5jb20uYXWCDiouZ29vZ2xlLmNvLmpwggsqLmdvb2dsZS5odYIP
Ki5nb29nbGUuY29tLm14gg8qLmdvb2dsZS5jb20uYXKCDyouZ29vZ2xlLmNvbS5j
b4IPKi5nb29nbGUuY29tLnZugg8qLmdvb2dsZS5jb20udHKCDSouYW5kcm9pZC5j
b22CC2FuZHJvaWQuY29tghQqLmdvb2dsZWNvbW1lcmNlLmNvbYISZ29vZ2xlY29t
bWVyY2UuY29tghAqLnVybC5nb29nbGUuY29tggwqLnVyY2hpbi5jb22CCnVyY2hp
bi5jb22CFiouZ29vZ2xlLWFuYWx5dGljcy5jb22CFGdvb2dsZS1hbmFseXRpY3Mu
Y29tghIqLmNsb3VkLmdvb2dsZS5jb22CBmdvby5nbIIEZy5jb4INKi5nc3RhdGlj
LmNvbTANBgkqhkiG9w0BAQUFAAOBgQB9KkvLwBX4q9xjOt6T3xDYiiI3TrFI73us
xE/ZbvW4v8Bd+rcWMrmt25th1KHZd9Lobxt+nAK8+5J32ViEWl00p6E2tgNNUvpI
HfNRecBebuU9B2wmCDYWavqkifCiH8EkCu3roXZjoSvKIvq1NW10YF0CaDSEtd/Z
RdMdo5TaEA==
-----END CERTIFICATE-----
"""

if cert == ssl.get_server_certificate(('google.com',443)):
    print "Valid"
else:
    print "Invalid" 
```

其中 cert 是之前运行获得的文本`ssl.get_server_certificate(('google.com',443))`。

我想知道是否可以安全地假设此代码将验证我正在使用与以前相同的证书连接到服务器。

还是可以伪造该证书？

请注意，我不关心证书上的通用名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:23:31.373

考虑到我从[文档](http://docs.python.org/library/ssl.html)中读到的内容，我可以看到这可能并不完全安全。`ca_certs`您需要使用作为参数来指定根证书列表。然后，该`ssl`模块将为您处理验证过程。

您的方法的一些问题可能是：

1.  每个证书都有`notBefore`字段`notAfter`。我们应该经常检查以确保当前日期在这两个值之间。您的代码不进行不推荐的验证。
2.  比如说，Web 服务器开始使用另一个 CA 作为其证书。然后，您的代码将导致误报，在这种情况下您将失去功能。
3.  如果任何 CA 被撤销，您的代码将无法处理此问题。

所以，我认为最好让`ssl`模块处理验证过程，而不是我们干预它。

# android - Google+ 样式视图/片段动画？

> ID：11549782
> 
> 赞同：1
> 
> 时间：2012-07-18T20:30:22.983
> 
> 标签：android, animation, layout, google-plus

我一直在寻找有关如何为左右两个视图（或片段）设置动画的示例，就像在[Android Google+ 应用程序](https://play.google.com/store/apps/details?id=com.google.android.apps.plus)中所做的那样。我没有成功。

我希望能够按照命令滑入 - 从左到右 - 一个片段在另一个片段上，并作为对用户滑动屏幕的反应。动画应该跟随用户的手指穿过屏幕，允许他们在动画中间暂停等。

有谁知道从哪里开始这种布局动画？关于 Google+ 的提示？我想要我们可以挖掘的任何信息！我一直很失败=\

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:36:58.300

这是关于侧边菜单的最佳资源，没有代码，但对如何实现它有清晰的说明：

[飞入式应用程序菜单](http://android.cyrilmottier.com/?p=658)

这是一篇关于如何为与侧边菜单相关的操作栏设置动画的帖子：

[滑动操作栏](https://stackoverflow.com/questions/11234375/how-did-google-manage-to-do-this-slide-actionbar-in-android-application)

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:26:20.307

这是 Simon 基于 Cyril Mottier 的 Fly-in 应用菜单的效果实现。-[菜单抽屉](https://github.com/SimonVT/android-menudrawer)

# python - 来自 python 的 Linux 命令不会完成

> ID：11549785
> 
> 赞同：0
> 
> 时间：2012-07-18T20:30:34.497
> 
> 标签：python, os.system

如果我`adduser testuser`从终端运行，该命令会询问我一些问题，例如输入密码。但是这段代码：

```
import os
a = os.system('useradd testuser') 
```

存在错误代码 0（那里没有问题）。但它不问任何问题。这是为什么？我该如何解决它。我也尝试了做同样事情的子进程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T20:32:12.560

这是因为[`adduser`](http://linux.die.net/man/8/adduser)和[`useradd`](http://linux.die.net/man/8/useradd)是两个不同的程序。前者提出交互式问题，后者不提出。如果您想要交互式提示，请调用`adduser`并使用`subprocess.call()`来执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T20:34:31.527

你的意思是它没有完成，或者你没有看到预期的结果。

另外，您是否注意到您在问题文本中说“adduser”，但在 python 代码中说“useradd”？你可能混淆了这两个相似的命令！

# php - PHP Late Static Binding -- 解析错误：语法错误，意外的 T_STRING，期待 T_VARIABLE

> ID：11549787
> 
> 赞同：1
> 
> 时间：2012-07-18T20:30:37.023
> 
> 标签：php, static, late-binding

测试一些后期静态绑定并在第 5 行得到这个错误：

`Parse error: syntax error, unexpected T_STRING, expecting T_VARIABLE`

第 5 行：

`protected static test = 'A TEST';`

这是来源：

```
class A {

    protected static test = 'A TEST';

    public static function test() {
        echo $this->test;
    }
}

Class B extends A {
    public static test = "B TEST";
    public function static_test() {
        echo static::$test;
    }
}

$a = new A;
$b = new B;

echo '$a->test()<br />';
echo $a->test();
echo '<br /> <br />';
echo '$b->test()<br />';
echo $b->test();
echo '<br /> <br />';
echo '$b->static_test()<br />';
echo $b->static_test(); 
```

可以肯定地说我被难住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T20:33:27.420

```
protected static $test = 'A TEST';
                 ^--- !!! 
```

它不是一个常数 - 所以它应该以`$`符号开头

# macos - PHP 和 AMQP RabbitMQ 消费者

> ID：11549788
> 
> 赞同：3
> 
> 时间：2012-07-18T20:30:38.767
> 
> 标签：macos, rabbitmq, amqp, php

我有一个有效的 PHP 脚本，它向 RabbitMQ 发布消息，它从制表符分隔的文本文件中解析出来。我从字面上将工作代码从该文件复制/粘贴到另一个文件，并希望建立一个消费者来检索发布到交换的消息，将它们 json_decode 并将它们插入数据库。

每次尝试，甚至从 PHP.net 站点复制/粘贴示例代码，甚至 SO 中的示例，都会失败并显示空白屏幕且没有错误消息，然后它甚至会杀死 php-fpm 进程。

**知道为什么队列不会绑定以及这里出了什么问题吗？**

*   Nginx -> php-fpm
*   PHP 5.3.x
*   Macbook Pro (OSX Lion)
*   RabbitMQ（已安装 librabbitmq 和 pecl amqp）

这是我尝试过的一个示例，但我在 AMQP 文档上尝试了 PHP.net 和 SO 示例，但没有任何工作。我可以很好地发布，但是当我尝试绑定队列时它会失败并最终 php-fpm 锁定。

```
<?php
// Report all PHP errors
error_reporting(E_ALL);

/*****************************************
 * MQ settings
 ****************************************/
$mq = array(
           'host' => 'localhost',
           'port' => 5672,
           'login' => 'guest',
           'password' => 'guest',
           'exchange' => 'gbus.user',
           'routing_key' => 'gbus.test.mike',
           );

/*****************************************
 * Connect to queue
 ****************************************/

$conn_args = array('host' => $mq['host'], 'port' => $mq['port'], 'login' => $mq['login'], 'password' => $mq['password']);
$conn = new AMQPConnection($conn_args);
$conn->connect();

$ch = new AMQPChannel($conn);

// Create a new queue
$q = new AMQPQueue($ch);
$q->declare('test-queue');
$q->bind($mq['exchange'],$mq['routing_key']);

?>
<br>
<font color="blue" face="arial" size="4">File Contents</font>
<hr>
<?php 
while(true){
    $msg=$q->get();
    if ($msg['count']>-1){
        echo "\n--------\n";
        print_r($msg['msg']);
        echo "\n--------\n";
    }
    sleep(1);   
}
if (!$conn->disconnect()) {
    throw new Exception('Could not disconnect');
}
?> 
```

* * *

这是我过去发布到队列的示例，每次运行时，我都会在 RabbitMQ 控制面板中查看 20 条新消息。我限制为 20 个进行测试，但文件有数万行。

**工作发布代码：**

```
<?php
/*****************************************
 * MQ settings
 ****************************************/
$mq = array(
           'host' => 'localhost',
           'port' => 5672,
           'login' => 'guest',
           'password' => 'guest',
           'exchange' => 'gbus.user',
           'routing_key' => 'gbus.test.mike',
           );

/*****************************************
 * Connect to queue
 ****************************************/

$conn_args = array('host' => $mq['host'], 'port' => $mq['port'], 'login' => $mq['login'], 'password' => $mq['password']);
$conn = new AMQPConnection($conn_args);
$conn->connect();

$ch = new AMQPChannel($conn);

$ex = new AMQPExchange($ch);
$ex->setName($mq['exchange']);

/*****************************************
 * Parse the file
 ****************************************/
$filename = "/tmp/Users.txt";
$board = "test";

$fd = fopen ($filename, "r");
$contents = fread ($fd,filesize ($filename));

fclose ($fd);
$delimiter = "\r\n";
$rows = explode($delimiter, $contents);
$counter = 0;
?>
<br>
<font color="blue" face="arial" size="4">File Rows (first 20)</font>
<hr>
<?php 
foreach ( $rows as $row )
{
    $counter++;
    echo "<b>Row $counter: </b> $row<br>";

    // build list columns
    list($login_name, $pwd, $account_type, $access_level, $status, $first_name, $last_name, $agent_code) = explode("\t", $row);

    // build assoc array for json
    $user = array("domain"=>$board, "username"=>$login_name, "user_id"=>$agent_code, "password"=>$pwd, "first_name"=>$first_name, "last_name"=>$last_name);

    // Publish a message to the exchange with a routing key
    $ex->publish(json_encode($user), $mq['routing_key'], AMQP_NOPARAM, array("content_type"=>"application/data"));

    if($counter == 20) {
        break;
    }
}

$ch->close();
$conn->close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:04:03.117

您是否尝试过此处找到的示例：[https](https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/php) ://github.com/rabbitmq/rabbitmq-tutorials/tree/master/php ？

您要查看的两个是：emit_log.php receive_logs.php

使用的库与 PECL/内置库不同，我相信内置库不支持消费。

# c# - 没有数组访问的 IndexOutOfRangeException

> ID：11549793
> 
> 赞同：0
> 
> 时间：2012-07-18T20:30:59.033
> 
> 标签：c#, stack-trace

我有一个客户报告，`IndexOutOfRangeException`但报告的行号没有阵列访问权限！该行的形式为：

```
using (XyzConnection conn = new XyzConnection(anObject.aProperty.anotherProperty)) 
```

`XyzConnection`, `anObject`, 等由替换名称组成，但结构基本相同。

以上本身可以抛出`IndexOutOfRangeException`吗？

数组访问（和异常）是否可能在从上面一行调用的某些代码中，即构造函数或属性获取器之一？如何识别正确的位置？

我应该提到，该问题无法在开发环境中重现，我无法在客户的机器上安装 Visual Studio。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:13:55.197

> 以上本身可以抛出IndexOutOfRangeException吗？

该行本身不能引发异常。

构造函数方法中的某些代码`XyzConnection`可能正在执行此操作，或者，属性 getter`anObject.aProperty`可能正在抛出它，或者属性 getter`aProperty.anotherProperty`也可能正在抛出。我敢打赌，它是财产获取者之一。

它们可能被 JIT 编译器内联，因此无论您拥有什么 PDB，您都不会在堆栈跟踪中看到它们。这实际上很常见，因为属性获取器通常小而简单，这使得它们成为内联的理想候选者。

我建议对这两个属性获取器进行可靠的代码审查，然后是`XyzConnection`构造函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:44:53.930

首先想到的是 PDB 与正在使用的 DLL 版本不匹配。这行代码没有任何提示索引超出范围异常。在没有看到围绕该调用的代码和构造函数声明本身的情况下，我怀疑人们可以提供多少帮助。

要检查误导行号的另一件事是，如果代码使用 try/catch 块，请确保重新引发异常的 catch 块使用“throw”；不是“扔前”；（其中 ex 是捕获的异常。）这会导致重新生成异常跟踪堆栈。（既耗时，又覆盖潜在有用的信息。）

# c++ - 均值标签如何影响提升方差累加器？

> ID：11549801
> 
> 赞同：4
> 
> 时间：2012-07-18T20:31:23.077
> 
> 标签：c++, boost, statistics, variance, boost-accumulators

包括均值标签会返回不正确的方差。我已经尝试过加权方差和直线方差，结果相似。我在下面包含了我的代码。难道我做错了什么？

### 样本输出：

```
./stats 1 2 3 4 5 6
Variances:
        Var: 2.91667
    VarKurt: 2.91667
    VarMean: 7.46389
VarMeanKurt: 7.46389 
```

### 代码：

```
#include <iostream>
#include <stdlib.h>
#include <boost/accumulators/accumulators.hpp>
#include <boost/accumulators/statistics/stats.hpp>
#include <boost/accumulators/statistics/mean.hpp>
#include <boost/accumulators/statistics/variance.hpp>
#include <boost/accumulators/statistics/kurtosis.hpp>

using namespace boost::accumulators;

// set up the various accumulators
typedef accumulator_set<int, stats<tag::variance> > Var;
typedef accumulator_set<int, stats<tag::variance, tag::kurtosis> > VarKurt;
typedef accumulator_set<int, stats<tag::variance, tag::mean> > VarMean;
typedef accumulator_set<int, stats<tag::variance, tag::mean, tag::kurtosis> > VarMeanKurt;

Var accumulate_Var(int *v, int n) {
    Var acc;
  for(unsigned int i=0; i<n; i++) {
   acc(v[i]);
  }
  return acc;
}

VarKurt accumulate_VarKurt(int *v, int n) {
  VarKurt acc;
  for(unsigned int i=0; i<n; i++) {
       acc(v[i]);
  }
  return acc;
}

VarMean accumulate_VarMean(int *v, int n) {
  VarMean acc;
  for(unsigned int i=0; i<n; i++) {
       acc(v[i]);
  }
  return acc;
}

VarMeanKurt accumulate_VarMeanKurt(int *v, int n) {
  VarMeanKurt acc;
  for(unsigned int i=0; i<n; i++) {
      acc(v[i]);
  }
  return acc;
}

int main(int argc, char *argv[]) {
   int n=argc-1;
   int x[n];
   for (int i=1; i<=n; i++) {
     x[i-1] = atoi(argv[i]);
   }

   std::cout << std::endl << " Variances: " << std::endl;
   std::cout << "        Var: " << variance(accumulate_Var(x, n)) << std::endl;
   std::cout << "    VarKurt: " << variance(accumulate_VarKurt(x, n)) << std::endl;
   std::cout << "    VarMean: " << variance(accumulate_VarMean(x, n)) << std::endl;
   std::cout << "VarMeanKurt: " << variance(accumulate_VarMeanKurt(x, n)) << std::endl;

   return 0;
} 
```

# python - 期待语法问题

> ID：11549803
> 
> 赞同：0
> 
> 时间：2012-07-18T20:31:25.820
> 
> 标签：期望, python, python, expect

我正在编写一个脚本来自动安装 phoronix 测试套件。实际安装顺利，但程序需要 php.ini 文件。它将在 RHEL 或 SUSE 上运行，这意味着我必须为每个案例准备一个案例（一个用于 yum，另一个用于 zypper）。我的问题来自于使用[期望](/questions/tagged/expect "显示标记为“期望”的问题")- 我无法让它与相应的安装程序正确交互。有没有人指出我做错了什么，语法或其他？非常感激。

旁注——如果有办法用[python](/questions/tagged/python "显示标记为“python”的问题")做到这一点，那将是惊人的。

```
spawn ./wgetphoronix.py
expect {"Phoronix install finished. RHEL OS." {spawn yum install php \
                                        expect "Nothing to do." {break}\
                                                "Is this ok \\\[y/N\\\]: " {interact}}\
                                        {spawn yum install php-dom \
                                        expect "Nothing to do." {break}\
                                                "Is this ok \\\[y/N\\\]: " {interact}}}
        "Phoronix install finished. RHEL OS." {spawn zypper install php \
                                        expect "Nothing to do." {break}\
                                                "Is this ok \\\[y/N\\\]: " {interact}}\
                                        {spawn zypper install php-dom \
                                        expect "Nothing to do." {break}\
                                                "Is this ok \\\[y/N\\\]: " {interact}}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:34:14.387

[PExpect 很不错](http://www.noah.org/wiki/pexpect)，你应该去看看。

另外，如果您需要在期望中执行此操作，请查看 autoexpect。

# sql - SQLite：使用另一个查询的结果更新字段

> ID：11549807
> 
> 赞同：0
> 
> 时间：2012-07-18T20:31:33.747
> 
> 标签：sql, sqlite

我有一个带有一张表的数据库，比如说'tablename'。现在，我想用它包含的文本更新该表的第一列，命名为“文本”，再加上一些新文本，这些文本是通过“表名2”执行的另一个查询的结果。所以，我想要这样的东西：

```
UPDATE tablename SET text="current text" + (SELECT * FROM tablename2 where ID=12); 
```

如果'text'值为' `Result not available`'我想*追加*' ` here`'，使字段值为' `Result not available here`'

这怎么可能？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:34:08.547

尝试连接运算符 (||)：

```
UPDATE tablename SET text='current text'||(SELECT * FROM tablename2 where ID=12); 
```

我不确定，但你应该使用 ' 而不是 " 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T23:12:23.607

我可能误解了你的问题，但让我们试试：

[http://sqlfiddle.com/#!5/959e5/2](http://sqlfiddle.com/#!5/959e5/2)

```
UPDATE Table1
SET text = text || 
    CASE
      WHEN text = 'Result not available' THEN ' here'
      ELSE (SELECT text FROM Table2 where id = 12)
    END; 
```

# javascript - Javascript函数innerHTML样式不正确

> ID：11549809
> 
> 赞同：0
> 
> 时间：2012-07-18T20:31:41.213
> 
> 标签：javascript, html, jquery-mobile

我正在尝试在使用 JQuery 移动的 web 应用程序中使用 javascript 更新一些 HTML。由于某种原因，我不能使用该`innerHTML`属性来创建 JQuery Mobile 按钮。例如：

```
document.getElementById('someDiv').innerHTML = document.getElementById('someDiv').innerHTML + '<p><em>' + var1 + '</em>:<br />' + var2+'</p>'; 
```

可以正常工作并正确设置样式，但是：

```
document.getElementById('someDiv').innerHTML = document.getElementById('someDiv').innerHTML + '<a href="#" onclick="appendButton()" data-role="button">' + var1 + '</a>'; 
```

才不是。我应该说 the`someDiv`包含在 a`<div data-role="controlgroup">`中，如果这会有所作为。此外，页面上还有其他可以正常工作的按钮。

为什么这不起作用，我怎样才能使它起作用？

编辑：如果这有什么不同，我正在使用 PhoneGap 将其编译为本机应用程序......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:35:33.133

您需要触发 pageCreate 事件，以便 jQuery Mobile 知道重新设置您刚刚添加的元素的样式。

```
$("#someDiv").trigger("create") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:36:42.713

添加具有特殊功能的元素时，重新运行所述功能的初始化非常重要。

为此，我喜欢定义一个`dom_mods()`完全可以做到这一点的函数。因此，每当我向页面添加内容时，我只需调用`dom_mods()`并运行或更新我的所有特殊功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:42:57.910

看起来您正在尝试将元素附加到`div`.

```
var div = document.getElementById('someDiv'),
    anchor = document.createElement('a');
anchor.setAttribute('href', '#');
anchor.addEventListener('click', appendButton, false);
anchor.setAttribute('data-role', 'button');
anchor.innerHTML = var1;
div.appendChild(anchor); 
```

如果您有任何问题，请告诉我。

# javascript - 创建一个带有搜索框的 CSS 下拉菜单，从搜索图标中弹出

> ID：11549813
> 
> 赞同：1
> 
> 时间：2012-07-18T20:31:53.747
> 
> 标签：javascript, html, css

我正在创建一个 CSS 悬停下拉菜单。我有一个悬停在其上的搜索图标。当您将鼠标悬停在图标上时，它会下拉一个搜索输入。但是，当鼠标移出该区域时，搜索框就会消失。只要光标在输入字段内，或者输入被聚焦，就希望将框保留在那里。

如果您需要我发布我刚刚让我知道的内容，但基本上只是使用标准的纯 CSS 悬停下拉菜单，这是基本的 HTML 设置：

```
<li class="search">
    <ul class="search">
        <li><input placeholder="enter search" action=""></li> 
```

所以它可以工作，但正如我在你离开时所说的那样，即使光标闪烁它也会再次隐藏。我假设我需要某种 JavaScript 来完成这项工作，但不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:46:18.447

您可以在`li`使用 JavaScript 时添加和删除一个类。下面的代码`jQuery`虽然在。

```
 $( ".search" ).onmouseenter( function() {
            $( "input" ).addClass( "seeMe" ).focus();
        });

        $( "input" ).blur( function() {
            $( this ).removeClass( "seeMe" );
        }); 
```

这使输入可见并在您悬停搜索时为其提供焦点，`li`并在输入失去焦点时隐藏。

[在我的jsFiddle](http://jsfiddle.net/wh1t3w0lf21/dXgzn/)上查看修改后的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-11T04:48:19.933

# 纯 CSS 解决方案

JavaScript 不需要这样做。使用纯 CSS。我将`O`用作搜索图标。我还为可视化它们的碰撞框添加了边框元素。

查看此答案底部的**进一步阅读部分以获得更多说明。**

## 解决方案

```
.search {
  list-style: none;
  padding: 0;
  width: fit-content;
  border: 1px solid black;
  /*border added to visualise collision box*/
}

.search-bar {
  display: none;
}

.search-icon {
  width: fit-content;
  border: 1px solid red;
  /*border added to visualise collision box*/
}

.search-icon:hover+.search-bar {
  display: block;
}

.search-bar:hover {
  display: block;
}
```

```
<ul class="search">
  <li class="search-icon">O</li>
  <li class="search-bar"><input placeholder="enter search" action=""></li>
</ul>
```

## 动画解决方案

```
.search {
  list-style: none;
  padding: 0;
  width: fit-content;
  border: 1px solid black;
  /*border added to visualise collision box*/
}

.search-bar {
  opacity: 0;
  width: 0;
  overflow: hidden;
  transition: all 200ms ease-in;
}

.search-icon {
  width: fit-content;
  border: 1px solid red;
  /*border added to visualise collision box*/
}

.search-icon:hover+.search-bar {
  opacity: 1;
  width: 100px;
}

.search-bar:hover {
  opacity: 1;
  width: 100px;
}
```

```
<ul class="search">
  <li class="search-icon">O</li>
  <li class="search-bar">
    <input placeholder="enter search" action="">
  </li>
</ul>
```

# 延伸阅读

*   查看[CSS 选择器 - 组合器](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors#Combinators)，
*   [儿童组合器](https://developer.mozilla.org/en-US/docs/Web/CSS/Child_combinator)&
*   MDN 上的[相邻兄弟组合器](https://developer.mozilla.org/en-US/docs/Web/CSS/Adjacent_sibling_combinator)

# mysql - 将mongodb迁移到mysql？

> ID：11549831
> 
> 赞同：4
> 
> 时间：2012-07-18T20:32:45.570
> 
> 标签：mysql, mongodb

因为谷歌在这里并不是很有帮助：

将 mongodb 数据库迁移到 mysql 数据库的最佳方法是什么？任何最佳实践示例？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T23:54:31.200

在您完成了 Scarpacci 的练习并了解了映射之后，我会查看[mongoexport](http://www.mongodb.org/display/DOCS/mongoexport) - 您应该注意类型保真度，然后您还必须以理智的方式将 CSV/TSV 导入 MySQL。

另一种选择，特别是如果您遇到打字问题，是简单地使用您选择的语言和驱动程序以编程方式提取所有数据并将其直接插入 MySQL，再次使用您最喜欢的驱动程序 - 这提供了最大的控制，但也是最多的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T20:34:57.217

这可能有点不切实际，因为人们通常在 Mongo 或其他 NoSQL 数据库中实现事物，以便进行无模式设计。这与关系数据库的概念截然相反。

如果不查看您在 Mongo 中拥有的那种数据结构，这将无法回答。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T23:26:54.453

@Tronic 我将首先利用 MongoDB 在其网站上提供的映射：

[映射指南](http://www.mongodb.org/display/DOCS/SQL+to+Mongo+Mapping+Chart)

然后，我会尝试将您的文档放入您的每个集合中，并尝试将它们分解为适当的数据库实体（表）。基于 Mongo 的无模式设计，实体/属性可能难以设计（正如@Mike Brant 所指出的）

希望这可以帮助。

--S

# c# - C# 新方法破坏了现有方法

> ID：11549834
> 
> 赞同：0
> 
> 时间：2012-07-18T20:32:52.760
> 
> 标签：c#, insert, load, crud

我正在编写一个用于将对象保存和检索到数据库中的类。我的课程有问题，因为我添加了一个从数据库加载值的方法，这突然破坏了我的保存方法。

我的保存方法在添加加载方法之前运行良好，但在添加加载方法后停止更新现有条目。它仍然可以很好地将新条目插入数据库，但它不再更新。如果我删除加载方法，它会继续更新并插入正常，但是一旦我添加回加载方法，我就会开始遇到问题。

代码示例位于：[http ://forums.asp.net/p/1825368/5072214.aspx/1?New+method+breaks+existing+one](http://forums.asp.net/p/1825368/5072214.aspx/1?New+method+breaks+existing+one)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:38:37.267

您不会在 Load() 方法中关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:38:14.957

看起来您永远不会关闭 load 方法中使用的初始连接，而是在另一种方法中创建一个新连接。也许这就是原因？没有异常文本很难分辨。你能发布例外吗？

看起来您没有`CitizenSave`在代码中的任何地方调用。

# python - 在 Google App Engine 中对 Django 模板进行单元测试会引发 TemplateDoesNotExist(name)

> ID：11549835
> 
> 赞同：0
> 
> 时间：2012-07-18T20:33:03.443
> 
> 标签：python, django, unit-testing, google-app-engine, webapp2

我正在尝试使用 python unittest 框架在 Google App Engine 中设置一系列 Django 模板的单元测试。

该应用程序使用 python 2.7、webapp2、Django 1.2，并且已经使用 unittest 来测试非 Django 功能。Django 模板在开发和实时环境中通过服务器提供服务没有问题。

通过 unittest 框架执行页面调用时，会引发以下错误：

```
 File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_2/django/template/loader.py", line 138, in find_template
  raise TemplateDoesNotExist(name)
  TemplateDoesNotExist: site/index.html 
```

设置.py：

```
import os

PROJECT_ROOT = os.path.dirname(__file__)

TEMPLATE_DIRS = (
    os.path.join(PROJECT_ROOT, "templates"),
) 
```

单元测试调用：

```
import webapp2
import unittest
import os

os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'

from google.appengine.dist import use_library
use_library('django', '1.2')

import main

class test_main(unittest.TestCase):

    def test_default_page(self):

        request = webapp2.Request.blank('/')

        response = request.get_response(main.app)

        self.assertEqual(response.status_int, 200) 
```

我发现有必要在测试文件中指定 DJANGO_SETTINGS_MODULE 和 Django 版本，即使这些通常是通过 app.yaml 指定的

页面处理程序：

```
from django.template.loaders.filesystem import Loader
from django.template.loader import render_to_string

class default(webapp2.RequestHandler):

    def get(self):

        self.response.out.write(render_to_string('site/index.html')) 
```

我尝试从 index.html 中删除所有内容，但仍然出现相同的错误。

我试过为 TEMPLATE_DIRS 使用显式路径，但没有改变。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:32:21.777

检查这是否设置在您的 django 配置中的任何位置：

```
TEMPLATE_LOADERS=('django.template.loaders.filesystem.load_template_source',) 
```

# c# - 输出/日志 Console.Read & Console.Write 从控制台应用程序到 TXT/XML 文件 C#

> ID：11549836
> 
> 赞同：0
> 
> 时间：2012-07-18T20:33:09.027
> 
> 标签：c#, xml, console

我有一个与用户交互的控制台应用程序 (C#)，每一步都通过 Console.Writeline 显示。

现在我想将这些事件写入 XML 或 TXT，我唯一的猜测是创建一个列表并将所有 Console.Writelines 添加到其中，但后来我注意到记录 Console.Readline 是强制性的，这就是我的原因我问这个问题。

如何将 Console.Reads/Console.Writes 记录到 TXT/XML？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:36:42.160

完成此操作的最简单方法是使用[File.AppendAllText](http://msdn.microsoft.com/en-us/library/ms143356)

> 打开文件，将指定的字符串附加到文件，然后关闭文件。如果文件不存在，此方法创建一个文件，将指定的字符串写入文件，然后关闭文件。

像这样的东西

```
string line = Console.ReadLine();
Console.WriteLine(line); // I gather you want to write it out again?
File.AppendAllText(@"C:\SomePath\MyFile.txt", line); 
```

如果您希望先收集所有文本，然后在程序退出时将其全部写出，您可以执行以下操作：

```
List<string> inputLines = new List<string>();

// Loop here getting lines
string line = Console.ReadLine();
inputLines.Add(line);

// When done:
File.WriteAllLines(@"C:\SomePath\MyFile.txt", inputLines.ToArray()); 
```

看

[http://msdn.microsoft.com/en-us/library/92e05ft3](http://msdn.microsoft.com/en-us/library/92e05ft3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:38:58.307

我建议您使用[log4net](http://www.codeproject.com/Articles/14819/How-to-use-log4net)，它是 .net 的免费日志记录工具

# php - 如何将 PHP 表下载到 CSV 文件中

> ID：11549841
> 
> 赞同：1
> 
> 时间：2012-07-18T20:33:20.410
> 
> 标签：php, mysql, sql, export-to-csv

> **可能重复：**
> [在 PHP 中为用户创建 CSV 文件](https://stackoverflow.com/questions/217424/create-a-csv-file-for-a-user-in-php)

尽管标题看起来很简单，但我的问题有点不同。我需要将我的 php 表的数据导出到 CSV 文件中。

我的页面有简单的表单，允许用户选择日期、其他一些变量，一旦用户提交表单，我就会创建表格。我的表单的操作是在同一页面上。

现在我想添加一个按钮，将数据表导出到 CSV 文件中。我创建了一个 PHP 函数来使用当前变量导出数据。

如果不使用表单，我找不到任何可以调用 php 函数的东西。但是当我使用表单时，我丢失了所有计算，因此我需要再次发布所有内容并一次又一次地进行查询。

还有其他更好的方法来下载表格数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:42:56.163

当您希望人们从您的站点下载文件时，您需要将正确的 http 标头和应用程序文件扩展名发送到浏览器，以便它有一点机会下载它。然后你可以逐行回显mysql表。这样您就可以下载千兆字节的数据库。最好的方法是使用 ajax 请求来做到这一点。绝对不需要创建临时文件和下载链接。

这是一个类似问题的链接：[Create a CSV File for a user in PHP](https://stackoverflow.com/questions/217424/create-a-csv-file-for-a-user-in-php)

如果您不喜欢 echo，您可以打开一个 php 文件处理程序并将 fputcsv 与 header 命令一起使用。请参阅 Xenocross 的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:17:58.613

```
header ( "Content-Type: application/vnd.ms-excel" );
        header ( "Content-disposition: attachment; filename=Export.csv" );
        header ( "Content-Type: application/force-download" );
        header ( "Content-Transfer-Encoding: binary" );
        header ( "Pragma: no-cache" );
        header ( "Expires: 0" );

        echo ('"data1","data2" \n "data1","data2" '); 
```

# xslt - 如何防止 XSLT 中的单词被截断

> ID：11549842
> 
> 赞同：3
> 
> 时间：2012-07-18T20:33:21.597
> 
> 标签：xslt

我有一个巨大的字符串进入 XSLT(1.0)，我必须将这个字符串分成一定数量的字符串(这是一个静态数字)，具有一定的长度(这也是一个静态数字)，但我不应该允许单词被隔断。例如：我有以下字符串

这是为了测试在打印应用程序 PDF 时提供的分词。

长度为 35 的 String1 应该是：这是为了测试单词 cut

带 35 的 String2 应该是：在打印时提供

String3 其余全部：应用程序 PDF。

还请建议如何在 XSLT2.0 中进行操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:04:32.733

**这是一个简单的解决方案，使用[FXSL 库](http://fxsl.sf.net)`str-split-to-lines`中的模板**：

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:f="http://fxsl.sf.net/"
xmlns:ext="http://exslt.org/common"
xmlns:str-split2lines-func="f:str-split2lines-func"
exclude-result-prefixes="xsl f ext str-split2lines-func"
>

   <xsl:import href="dvc-str-foldl.xsl"/>

   <!-- to be applied on text.xml -->

   <str-split2lines-func:str-split2lines-func/>

   <xsl:output indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="/">
      <xsl:call-template name="str-split-to-lines">
        <xsl:with-param name="pStr" select="/*"/>
        <xsl:with-param name="pLineLength" select="64"/>
        <xsl:with-param name="pDelimiters" select="' &#9;&#10;&#13;'"/>
      </xsl:call-template>
    </xsl:template>

    <xsl:template name="str-split-to-lines">
      <xsl:param name="pStr"/>
      <xsl:param name="pLineLength" select="60"/>
      <xsl:param name="pDelimiters" select="' &#9;&#10;&#13;'"/>

      <xsl:variable name="vsplit2linesFun"
                    select="document('')/*/str-split2lines-func:*[1]"/>

      <xsl:variable name="vrtfParams">
       <delimiters><xsl:value-of select="$pDelimiters"/></delimiters>
       <lineLength><xsl:copy-of select="$pLineLength"/></lineLength>
      </xsl:variable>

      <xsl:variable name="vResult">
          <xsl:call-template name="dvc-str-foldl">
            <xsl:with-param name="pFunc" select="$vsplit2linesFun"/>
            <xsl:with-param name="pStr" select="$pStr"/>
            <xsl:with-param name="pA0" select="ext:node-set($vrtfParams)"/>
          </xsl:call-template>
      </xsl:variable>

      <xsl:for-each select="ext:node-set($vResult)/line">
        <xsl:for-each select="word">
          <xsl:value-of select="concat(., ' ')"/>
        </xsl:for-each>
        <xsl:value-of select="'&#xA;'"/>
      </xsl:for-each>
    </xsl:template>

    <xsl:template match="str-split2lines-func:*" mode="f:FXSL">
      <xsl:param name="arg1" select="/.."/>
      <xsl:param name="arg2"/>

      <xsl:copy-of select="$arg1/*[position() &lt; 3]"/>
      <xsl:copy-of select="$arg1/line[position() != last()]"/>

      <xsl:choose>
        <xsl:when test="contains($arg1/*[1], $arg2)">
          <xsl:if test="string($arg1/word)">
             <xsl:call-template name="fillLine">
               <xsl:with-param name="pLine" select="$arg1/line[last()]"/>
               <xsl:with-param name="pWord" select="$arg1/word"/>
               <xsl:with-param name="pLineLength" select="$arg1/*[2]"/>
             </xsl:call-template>
          </xsl:if>
        </xsl:when>
        <xsl:otherwise>
          <xsl:copy-of select="$arg1/line[last()]"/>
          <word><xsl:value-of select="concat($arg1/word, $arg2)"/></word>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:template>

      <!-- Test if the new word fits into the last line -->
    <xsl:template name="fillLine">
      <xsl:param name="pLine" select="/.."/>
      <xsl:param name="pWord" select="/.."/>
      <xsl:param name="pLineLength" />

      <xsl:variable name="vnWordsInLine" select="count($pLine/word)"/>
      <xsl:variable name="vLineLength" 
       select="string-length($pLine) + $vnWordsInLine"/>
      <xsl:choose>
        <xsl:when test="not($vLineLength + string-length($pWord) 
                           > 
                            $pLineLength)">
          <line>
            <xsl:copy-of select="$pLine/*"/>
            <xsl:copy-of select="$pWord"/>
          </line>
        </xsl:when>
        <xsl:otherwise>
          <xsl:copy-of select="$pLine"/>
          <line>
            <xsl:copy-of select="$pWord"/>
          </line>
          <word/>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**：

```
<text>
Dec. 13 — As always for a presidential inaugural, security and surveillance were
extremely tight in Washington, DC, last January. But as George W. Bush prepared to
take the oath of office, security planners installed an extra layer of protection: a
prototype software system to detect a biological attack. The U.S. Department of
Defense, together with regional health and emergency-planning agencies, distributed
a special patient-query sheet to military clinics, civilian hospitals and even aid
stations along the parade route and at the inaugural balls. Software quickly
analyzed complaints of seven key symptoms — from rashes to sore throats — for
patterns that might indicate the early stages of a bio-attack. There was a brief
scare: the system noticed a surge in flulike symptoms at military clinics.
Thankfully, tests confirmed it was just that — the flu.
</text> 
```

**产生了想要的正确结果（文本被分成不超过 64 个字符的行，并且两行之间没有单词被分割）**：

```
Dec. 13 — As always for a presidential inaugural, security and 
surveillance were extremely tight in Washington, DC, last 
January. But as George W. Bush prepared to take the oath of 
office, security planners installed an extra layer of 
protection: a prototype software system to detect a biological 
attack. The U.S. Department of Defense, together with regional 
health and emergency-planning agencies, distributed a special 
patient-query sheet to military clinics, civilian hospitals and 
even aid stations along the parade route and at the inaugural 
balls. Software quickly analyzed complaints of seven key 
symptoms — from rashes to sore throats — for patterns that might 
indicate the early stages of a bio-attack. There was a brief 
scare: the system noticed a surge in flulike symptoms at 
military clinics. Thankfully, tests confirmed it was just that — 
the flu. 
```

**请注意**：

转换通常会导入包含 的 xslt 文件`str-split-to-lines`，因此代码会短得多。

**为了完整起见，这里是唯一导入的 XSLT 样式表**：

```
<xsl:stylesheet version="1.0" 
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:f="http://fxsl.sf.net/"
 xmlns:ext="http://exslt.org/common" 
>
    <xsl:template name="dvc-str-foldl">
      <xsl:param name="pFunc" select="/.."/>
      <xsl:param name="pA0"/>
      <xsl:param name="pStr"/>

      <xsl:choose>
         <xsl:when test="not($pStr)">
            <xsl:copy-of select="$pA0"/>
         </xsl:when>
         <xsl:otherwise>
            <xsl:variable name="vcntList" select="string-length($pStr)"/>
            <xsl:choose>
              <xsl:when test="$vcntList = 1">
                  <xsl:apply-templates select="$pFunc[1]" mode="f:FXSL">
                    <xsl:with-param name="arg0" 
                                        select="$pFunc[position() > 1]"/>
                    <xsl:with-param name="arg1" select="$pA0"/>
                    <xsl:with-param name="arg2" 
                                          select="substring($pStr,1,1)"/>
                  </xsl:apply-templates>
              </xsl:when>
              <xsl:otherwise>
                <xsl:variable name="vHalfLen"
                              select="floor($vcntList div 2)"/>
                <xsl:variable name="vFunResult1">
                  <xsl:call-template name="dvc-str-foldl">
                    <xsl:with-param name="pFunc" select="$pFunc"/>
                    <xsl:with-param name="pA0" select="$pA0"/>
                    <xsl:with-param name="pStr" 
                    select="substring($pStr,
                                      1,
                                      $vHalfLen
                                       )"/>
                  </xsl:call-template>
                </xsl:variable>

                <xsl:call-template name="dvc-str-foldl">
                      <xsl:with-param name="pFunc" select="$pFunc"/>
                      <xsl:with-param name="pStr"
                                    select="substring($pStr,$vHalfLen+1)"
                                    />
                      <xsl:with-param name="pA0" 
                                select="ext:node-set($vFunResult1)"/>

                </xsl:call-template>
              </xsl:otherwise>
            </xsl:choose>
         </xsl:otherwise>
      </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

# extjs - extjs 4 没有滚动条的滚动

> ID：11549846
> 
> 赞同：0
> 
> 时间：2012-07-18T20:33:28.440
> 
> 标签：extjs

我有这个狭窄的面板，它基本上是一个缩略图列表，我需要能够使用按钮滚动它们。我们有一个面板（锚布局），里面有容器，每个容器都包含图像。

没有滚动条的空间，无论如何我们不想要一个。

我认为这就像在我的按钮调用 panel.getEL().scroll('b',20) 的侦听器中一样简单，但这不起作用，因为 scrollHeight === ClientHeight 所以滚动什么都不做。

有没有我遗漏的技术或应该工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:26:16.917

所以你正在使用一个按钮来滚动图像？让按钮的侦听器删除/隐藏面板前面的容器/图像以允许其他人使用空间怎么样？

# asp.net - SQL ASP.NET INSERT 问题（第 2 部分）

> ID：11549849
> 
> 赞同：0
> 
> 时间：2012-07-18T20:33:33.713
> 
> 标签：asp.net, sql, oledb

**我又回来了。** 我之前问过一个类似的问题，但即使在上一个答案的帮助下并用问号尝试它，或者我尝试过 AddWithValue 而不是 AddWithValue 我没有任何运气。

我试图将 txt_Naam 更改为 txt_Naam.Text，没有。

还把 [] 放在列名周围，没有运气。它不断给我这个“INSERT INTO 语句中的语法错误。”。

这次我用下面的代码一无所获。可能是小东西，但我无法弄清楚。（再次...）

```
 protected void btn_final_Click(object sender, EventArgs e)
    {

        string fact_adres = txt_Naam.Text + "," + txt_Anaam.Text + "," + txt_Adres.Text + "," + txt_Toevoeg.Text + "," + txt_Pcode.Text + "," + txt_Plaats.Text + "," + txt_Email.Text ;
        string fact_adres1 = txt_Naam1.Text + "," + txt_Anaam1.Text + "," + txt_Adres1.Text + "," + txt_Toevoeg1.Text + "," + txt_Pcode1.Text + "," + txt_Plaats1.Text + "," + txt_Email1.Text;

        string a = "1";

        OleDbConnection conn = new OleDbConnection();
        conn.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0; "
            + "Data Source=|DataDirectory|webwinkel.accdb";

        OleDbCommand cmd = new OleDbCommand();
        cmd.Connection = conn;
        cmd.CommandText = "INSERT INTO Order (factuur_adres_id, verzend_adres_id, totaalprijs) VALUES (?, ?, ?);";

        cmd.Parameters.Add("@factuur_adres", OleDbType.VarChar, 125).Value = fact_adres;
        cmd.Parameters.Add("@verzend_adres", OleDbType.VarChar, 125).Value = fact_adres1;
        cmd.Parameters.Add("@totaal_prijs", OleDbType.VarChar, 7).Value = a;

        try
        {
            conn.Open();
            OleDbDataReader reader = cmd.ExecuteReader();
            reader.Close();
        }

        catch (Exception exc)
        {
            Label1.Text = exc.Message;
        }

        finally
        {
            conn.Close();
            Session["Winkelwagen"] = null;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:43:58.947

你的命令文本应该是

```
cmd.CommandText = "INSERT INTO Order (factuur_adres_id, verzend_adres_id, totaalprijs)   VALUES (@factuur_adres,@verzend_adres, @totaal_prijs)"; 
```

更新答案：使用设置参数运行代码，直接传递值并检查它是否有效

```
 cmd.CommandText = "INSERT INTO Order (factuur_adres_id, verzend_adres_id, totaalprijs)   VALUES ('abc','def','adf')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T21:12:57.890

当你插入时，你不必使用

cmd.ExecuteNonQuery()

而不是 cmd.ExecuteReader() ??

# sockets - 如何使用 WebWorks 在 Blackberry OS 上创建 UDP 广播侦听器套接字

> ID：11549852
> 
> 赞同：1
> 
> 时间：2012-07-18T20:33:49.623
> 
> 标签：sockets, blackberry, udp, blackberry-webworks

我正在尝试使用**WebWorks SDK开发一个****BlackBerry**应用程序。此应用程序将有一个 UDP 广播套接字，它将在端口 8001 处侦听传入的 UDP 广播数据包。

 **这可能吗？是否有可用的 Javascript 框架来执行此操作？

我发现 node.js 可以创建 UDP 广播套接字，但我认为它仅在 Blackberry 10 上可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:22:21.700

不幸的是，我想说这在 WebWorks 中是不可能的，因为使用本机 Java 开发是不可能的*。***

# pdf - 从 2008 年更新到 SSRS 2008R2 导致报告分页混乱

> ID：11549855
> 
> 赞同：1
> 
> 时间：2012-07-18T20:33:55.050
> 
> 标签：pdf, reporting-services, pagination, ssrs-2008, ssrs-2008-r2

我们有一个应用程序可以生成 PDF 格式的多类别报告。运行 SSRS 2008，报告按设计工作。将SSRS升级到2008R2后，分页好像变了。

第一页按设计显示，但当类别超过一页时，分页符出现在行标题的中间。更重要的是页面的页眉/页脚只会出现在多页类别的第一页上。

我在研究中发现，SSRS 2008 中的分页与早期版本相比有很多变化。但是从 2008 年到 2008R2，我几乎没有发现关于分页符或分页的问题。

是什么导致了这些问题？我该怎么做才能使报告按设计工作？（每页都有页眉/页脚，并且在行页眉之后出现分页符）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:24:19.120

经过几个星期试图解决 .rdl 文件中的问题后，我们向 Microsoft 开了一张票。

事实证明，这是 SSRS 2008 R2 中某些报告的已知问题，可**通过应用 Service Pack 2 解决。**

# javascript - IE9 在窗口打开时触发 onbeforeunload 事件

> ID：11549856
> 
> 赞同：1
> 
> 时间：2012-07-18T20:33:55.680
> 
> 标签：javascript, jquery, internet-explorer-9, onbeforeunload

我正在使用[JFileUpload](http://www.jfileupload.com)小程序构建一个站点，并希望以某种方式处理页面的关闭。取消小程序时调用 JSTransferCancelled。以下代码是我用来处理这些事件的代码，它适用于除 IE 之外的所有浏览器。

```
 function JSTransferCancelled(){
            bCancel=false;
            $.post("cancel.php");
            self.close();
        }

    $(window).load(function(){

        $(window).bind('beforeunload',function(){
            document.uploader.setEnabled(false);
            if(bCancel){ document.uploader.cancel();} 
        }); 
    }); 
```

我在主站点的新选项卡中打开带有上传器的页面，并希望在他们取消上传时关闭它。但是，当我在 IE 中打开选项卡时，我会立即收到警告消息，`The webpage you are viewing is trying to close this tab. Do you want to close this tab? [OK] [Cancel]`并且我的上传器由于通话而无法访问，`setEnabled(false)`并且由于通话而被取消`cancel()`。

我正在寻找的是相同的功能，只是在 IE 中。我知道 IE 中有很多*很多*问题，例如 onbeforeunload 之类的事件会触发以响应不同的事情，但是我已经在我的站点中检查了所有这些问题，但没有发现任何问题。我没有在网上遇到任何可以解决我遇到的问题的东西。

我尝试将 onbeforeunload 函数包装在不同的东西中，例如上面的 load 函数以及`$(document).ready()`，但它们要么给我同样的问题，要么创建新的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T20:52:04.760

检查[Microsoft 的荒谬文档](http://msdn.microsoft.com/en-us/library/ie/ms536907(v=vs.85).aspx)然后确保您使用的代码都没有执行他们列出的任何事情作为调用的触发器`beforeunload`，其中包括一些实际上不会卸载页面的事情（去微软！）

# actionscript-3 - 从 bytearray 读取 int 的问题

> ID：11549859
> 
> 赞同：0
> 
> 时间：2012-07-18T20:34:06.027
> 
> 标签：actionscript-3, bytearray

这是我的第一个问题，所以不要严格判断。我有一个从 php 服务器到 as3(flash) 客户端的对象。该对象是 AMF 编码的，所以我将服务器响应写入 ByteArray：

```
var ba:ByteArray = new ByteArray();
ba.writeUTFBytes( rawData ); 
```

而不是我从 ByteArray 读取对象：

```
ba.position = 0;
var response:Object = ba.readObject(); 
```

部分对象包含这样的数据：

```
{
 'money' : 900
} 
```

当从 ByteArray 读取对象时，我得到一个七位数的数字 ~ 1824344 而不是 900。但是当我得到表单服务器 String '900' 或 int 值等于 100 - 数据读取正确。

有人遇到过这样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:03:25.990

您必须以与您写作相同的方式阅读。如果你用 写东西`writeUTFBytes()`，你必须用 读它`readUTFBytes()`。

在这种情况下，您应该使用`writeObject()`and，`readObject()`因为您正在编写纯 Object 而不是 String。

# oracle - 在表上创建复杂触发器

> ID：11549865
> 
> 赞同：1
> 
> 时间：2012-07-18T20:34:16.320
> 
> 标签：oracle, triggers, plsql, oracle11g

我有一个表格参与者，其结构如下所示：

```
Pid    number        
name   varchar2(20)    
version  number 
```

每当我在表中插入任何记录时`participants`，版本 =`1`都会被填充。

例如，如果我插入 pid=1 ,name='Gaurav' 然后记录`version =1`get 填充 in `participants table`。

现在我`issue`的`update`在`participants`桌子上，

1.  假设我正在为参与者表中的 pid=1 更新 name ='Niharika' ，那么需要在同一张表上创建一个 pid=1 、name='Niharika' 和版本 =2 的新记录。
2.  我再次为参与者表中的 pid='1' 更新 name='Rohan' ，需要创建 pid=1 、name='Rohan' 和 version=3 的新记录。

我怎样才能做到这一点，显然我需要为将要更新的 pid 获取 max(version)+1 。

我可以使用视图来实现这一点，并使用而不是触发器插入视图，但我对我的解决方案不满意。

我还创建了复合触发器，即使这对我不起作用，因为在触发器内部我需要对该表使用插入语句，这会给我递归错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:51:47.563

你真的应该有两张桌子。使用您描述为“日志记录”表的结构制作一个。它将保留所有记录的历史记录。有另一个被认为是“当前”的表，它是相同的但没有`version`列。然后，当在“当前”表的记录上发生插入/更新时，有一种机制（例如触发`SELECT FOR UPDATE`）日志表中的 max(version)，添加一个，然后插入到日志表中。这样，您就不会遇到变异表错误或任何类似的奇怪问题。这种方式有一些序列化，但它最接近你想要做的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T02:33:47.723

通常不推荐，但无论如何您都可以在没有其他额外日志记录表的情况下执行此操作-

```
CREATE or REPLACE
TRIGGER part_upd
 AFTER UPDATE of name
 ON participants
 FOR EACH ROW
DECLARE
  retval BOOLEAN;
BEGIN

   retval := insert_row(:old.pid,:new.name);

END part_upd; 
```

功能-

```
CREATE or REPLACE 
FUNCTION insert_row (pid1 number, name1 varchar2)
RETURN boolean
IS
    PRAGMA autonomous_transaction;
BEGIN
     INSERT INTO participants
     SELECT pid1, name1, max(vers)+1
       FROM participants
      WHERE pid = pid1;         

     COMMIT; 

     RETURN true;
END; 
```

您必须通过添加日志记录和异常处理来正确调整触发器和函数。阅读有关[自主](http://docs.oracle.com/cd/B14117_01/appdev.101/b10807/13_elems002.htm)事务的更多信息。

# perl - Perl:YAML:Hash 如何选择一个条目？

> ID：11549866
> 
> 赞同：3
> 
> 时间：2012-07-18T20:34:18.007
> 
> 标签：perl, yaml

问候 Perl 专家

基于下面的 YAML 文件，这个例子[Perl:YAML 在数组中迭代？](https://stackoverflow.com/questions/11549021/perlyaml-iterate-in-the-array) 有人可以给我看一个perl示例，我可以在其中选择国家并打印出我去过的城市吗？

```
USA:
    BeenThere: [Miami, Denver, Las Vegas, Chicago]
    ToVisit:   [Los Angeles, Boston]
Europe:
    BeenThere: [Paris, Amsterdam, Dublin, Bulgaria, Madrid]
    ToVisit:   [Budapest, Belgrad]
Latam:
     BeenThere: [Venezuela, Bogota]
     ToVisit:   [Argentina, San Paulo] 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:27:01.487

您想获取每个国家/地区的信息，还是仅获取特定国家/地区的信息？

具体一：

```
my $country_name = '...';
my $country = $data->{$country_name};
my $visited = $country->{BeenThere};
for my $city_name (@$visited) {
   say $city_name;
} 
```

全部：

```
for my $country_name (keys %$data) {
   my $country = $data->{$country_name};
   my $visited = $country->{BeenThere};
   for my $city_name (@$visited) {
      say "$city_name, $country_name";
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:27:30.267

取决于您如何定义“选择”，这可能会有所帮助：

```
use strict;
use warnings;
use YAML::XS qw(LoadFile);

my $data = LoadFile('test.yaml');

for my $city (@{$data->{USA}{BeenThere}}) {
  print("$city ");
} 
```

每个国家都是一个哈希引用，城市是数组引用（像您传递的链接一样处理）。

# google-apps-script - 将处理程序动态添加到动态创建的菜单

> ID：11549869
> 
> 赞同：1
> 
> 时间：2012-07-18T20:34:26.897
> 
> 标签：google-apps-script

此代码通过取自工作表 (GApps) 的数组创建菜单/子菜单

```
 // get globals
    var arrayMenu = globals.mpMenuItems;
    var arraySubMenu = globals.mpSubMenuItems;

    // create menu
    var menuBar = app.createMenuBar();
    var handler = app.createServerHandler();

    // add structure to menu
    for(var k=0; k<arrayMenu.length; k++) {
      menuBar.addItem(arrayMenu[k], this[arrayMenu[k][k]] = app.createMenuBar(true));
      for(var j=0; j<arraySubMenu[k].length; j++) {
        this[arrayMenu[k][k]].addItem(arraySubMenu[k][j], **handler**)
          .addSeparator(app.createMenuItemSeparator());
      }
      menuBar.addSeparator(app.createMenuItemSeparator());
    } 
    return menuBar; 
```

你们中的任何人都可以告诉我如何动态添加**处理程序吗？**我使用 GWT 代码示例作为指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:47:04.637

您可以使用 UiInstance 的[createServerHandler](https://developers.google.com/apps-script/class_uiinstance#createServerHandler) () 和[createClientHandler](https://developers.google.com/apps-script/class_uiinstance#createClientHandler) () 方法创建处理程序。

# django - 在 django 中禁止访问其他用户对象的最佳方法；

> ID：11549870
> 
> 赞同：0
> 
> 时间：2012-07-18T20:34:27.390
> 
> 标签：django

是否有禁止访问 django 中其他用户对象的最佳做法？假设我可以通过路径中的 PK (some/path/to/object/ **PK** /edit) 访问对象。禁止通过路径中的 pk 访问 User1 到 User2 对象的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:50:40.710

我通常创建一个`@owner_required`装饰器来包装具有此类要求的元素，逻辑如何工作取决于用例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:38:18.810

您应该在您的用户模型中有一个关联，然后在您的控制器中，您应该通过您的用户模型关联进行所有对象访问，因此每个用户只能访问每个自己的孩子。这是一篇相关文章[如何创建带有关联的新（未保存的）Django 模型？](https://stackoverflow.com/questions/5199130/how-to-create-new-unsaved-django-model-with-associations)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:20:15.193

如果您需要比 Django 开箱即用提供的更精细的安全性，那么您可能需要研究其中一种 ACL 产品。从 Django 1.2 开始，可以使用第三方插件添加对象/行级别的权限。有几种可供选择。有关建议，请参阅此 SO 问题：

[Django 1.2 对象级权限 - 第三方解决方案？](https://stackoverflow.com/questions/2821997/django-1-2-object-level-permissions-third-party-solutions)

# c# - 尝试写入 CSV 文件，“无法访问已关闭的文件”。

> ID：11549875
> 
> 赞同：1
> 
> 时间：2012-07-18T20:34:45.000
> 
> 标签：c#, asp.net-mvc-3, csv

我正在尝试使用 NuGet CsvHelper 包编写 CSV 文件。当我运行控制器操作时，我看到“无法访问已关闭的文件”。

```
 SurveyResponseModel person = surveyResponseRepository.Get().Include(s => s.PersonModel).FirstOrDefault();

    using (var csv = new CsvWriter(new StreamWriter("file.csv")))
    {
        csv.Configuration.HasHeaderRecord = false;
        csv.Configuration.Delimiter = ',';
        csv.WriteRecord(person);
    } 
```

我不确定是什么原因造成的。有谁知道我怎样才能让它写一个 .CSV 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:38:21.387

试着打电话

```
csv.Open() 
```

首先在你尝试写作之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:40:41.040

需要我们 csv.Writer.WriteRecord(person) 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:40:51.570

他们的基本示例不使用`using`围绕`CsvWriter`. 尝试删除它。有没有可能它试图`CsvWriter`在它应该之前处理掉？

[https://github.com/JoshClose/CsvHelper/wiki/Basics](https://github.com/JoshClose/CsvHelper/wiki/Basics)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T21:06:15.503

我必须声明一个特定的路径，例如：

```
 using (var csv = new CsvWriter(new StreamWriter(@"c:\file.csv"))) 
```

# asp.net-mvc-3 - MVC3 不显眼的验证器未写入部分页面

> ID：11549876
> 
> 赞同：0
> 
> 时间：2012-07-18T20:34:45.583
> 
> 标签：asp.net-mvc-3, partial-views, unobtrusive-validation

当通过 ajax 调用检索以下代码时，不会将验证器写入视图。可以将任意数量的这些部分视图添加到页面中，并且文本框会获得一个日期选择器，这就是生成唯一 ID 的原因。我当然感谢任何帮助.vie

```
@using Nautilus.Core.Model.Enumeration
@using Nautilus.Web.Models
@using Nautilus.Web.Views.Tools
@model IntensityHistoryModel

<tr>
    <td class='removeIntensityScore' title='Click to remove this item.'></td>
    <td>
        <span></span>
    </td>
    <td>
        @Html.ValidationMessageFor(m => m.IntensityDateGUID)
        @Html.TextBoxFor(m => m.IntensityDate, new { id = Model.IntensityDateGUID, @class = "intensityScoreDate", style = "width:120px" })
    </td>
    <td>
        @Html.DropDownList("IntensityScore", ViewHelper.GetSelectListWithDescriptionFromEnum<IntensityScore.Values>("", new[] { "0" }), " -- Select -- ", new { style = "width:150px;margin:0" })
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:49:39.450

当您进行 ajax 调用时，您必须在回调函数中再次调用验证。

类似的东西

```
$("#myDiv").load($("#myA").attr("href"), function () {
        $.validator.unobtrusive.parse("#myFormPartial");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:53:13.873

它不包括验证数据属性，因为元素不在表单中。`FormContext`解决方法是为您的局部视图初始化 a ：

```
@{
    ViewContext.FormContext = new FormContext();
}

<tr><!-- your partial content --></tr> 
```

# silverlight-4.0 - StringFormat 在 Silverlight 控件中不起作用

> ID：11549878
> 
> 赞同：0
> 
> 时间：2012-07-18T20:34:50.063
> 
> 标签：silverlight-4.0

我有一段代码用于 XAML 文件中的文本框。文本框将输入数值作为输入。下面是一段代码：-

```
 <TextBox Text="{Binding Path=Revenue, StringFormat=c0, Mode=TwoWay, Converter={StaticResource NullableConverter}, NotifyOnValidationError=True, ValidatesOnDataErrors=True, ValidatesOnExceptions=True}" Grid.Column="3" Grid.Row="2"/> 
```

但是，如果我输入 5 并制表符，则输入不会变为 5 $。但是，在页面中保存数据并加载页面时，格式是完整的。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:09:39.767

请卸下转换器并尝试一下，你应该得到它。转换器应该有问题。

这就是我为 Nullable Converter 尝试的方法。

```
 public class NullableConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null)
            return 0;
        else
            return value;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return value;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T10:57:52.203

如果您使用的是 SL5，我认为这是一个错误，更新绑定时不会触发 StringFormat。有关更多详细信息，请参阅 [MS 连接问题](http://connect.microsoft.com/VisualStudio/feedback/details/714760/silverlight-forum-stringformat-or-convertor-is-not-triggered-when-binding-is-updated-in-silverlight-5)。您可以检查解决方法，它可能会帮助您解决问题。

# java - 为 Java UI 应用程序创建服务的 Java 服务包装器

> ID：11549881
> 
> 赞同：0
> 
> 时间：2012-07-18T20:34:53.320
> 
> 标签：java, swing, windows-services

我创建了一个需要作为服务运行的 Java 应用程序。对于服务包装器，我尝试使用 tanuki 和其他包装器软件。现在，我的应用程序确实作为服务运行 - 但是，它在 SYSTEM 下作为服务运行，而不是在当前登录的用户下运行。

我的应用程序有一个 UI，它不显示应用程序何时作为服务运行。我怀疑这是否已经发生，因为该服务在 SYSTEM 下运行，而不是在当前登录的用户下运行。当我运行应用程序（没有将其作为服务安装）时，UI 确实出现了，我可以看到 java 进程在当前用户的 id 下运行，而在作为服务安装时它在 SYSTEM 下运行。

现在，如果没有 UI，我的应用程序就什么都没有了。当系统启动并且 UI 也需要显示时，我需要应用程序作为服务运行。

有没有人试图做我在这里做的事情并且遇到过类似的问题。如果是这样，您是如何解决的？有没有我可以使用的不同的包装服务并且没有这个问题。

Tanuki 的文档确实解释了将 java 应用程序设置为服务，但没有讨论带有 UI 的 java 应用程序并在当前登录的用户下运行它。

**更新**

只是为了让这里的人们对我想要完成的工作有更多的了解——*我试图在我的应用程序中实现的行为类似于 Dropbox 或 Yahoo Messenger 或任何其他软件的行为Windows 启动并继续在后台运行，允许用户使用系统托盘图标与其交互*. 所以基本上所有这些都是用 Java/Swing 构建的。现在，当涉及到应用程序的部署时——我可以独立运行它，但运行 jar 文件或为其创建和运行可执行包装器。但是，我希望该软件从 Windows 启动开始并继续作为服务在后台运行，同时允许用户进行更改并通过它设置的系统托盘图标调出 UI 与它进行交互。截至目前，它确实作为服务成功运行。它执行理想情况下应该执行的所有操作 - 只是没有系统托盘图标来调出 UI 并对其配置进行更改。

**更新 - 2**

好的..我尝试了高级安装程序，它确实为我打包了所有内容，以便为 Windows 生成一个 exe 安装程序。现在我只需要自动启动软件。谁能帮我这个？我在高级安装程序中没有看到自动让程序自动添加到自动启动中的选项。

链接到 tanuki 的文档 [http://wrapper.tanukisoftware.com/doc/english/faq.html](http://wrapper.tanukisoftware.com/doc/english/faq.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:34:28.717

我想评论你的问题，但我没有足够的声誉来做这件事。所以我现在误用了答案功能。

我有一个类似的问题。我在 Windows XP 机器上使用了一段时间的 tanuki 包装器，所有登录的用户都看到了 Swing GUI。

现在我迁移到 Windows 2008 Server 并配置了当前版本的 tanuki 包装器，如下所示：

```
wrapper.ntservice.interactive=true
wrapper.ntservice.hide_console=true 
```

（请参阅[此处](http://wrapper.tanukisoftware.com/doc/german/prop-ntservice-hide-console.html)和[此处的](http://wrapper.tanukisoftware.com/doc/german/prop-ntservice-interactive.html)文档）

Windows 服务在 LOCAL SYSTEM 帐户下运行。

但是仍然没有显示 GUI。你找到解决问题的方法了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:12:35.400

罗汉，请看以下页面：

[http://wrapper.tanukisoftware.com/doc/english/prop-ntservice-interactive.html](http://wrapper.tanukisoftware.com/doc/english/prop-ntservice-interactive.html)

您需要将服务标记为交互式，然后以 SYSTEM 用户身份运行，以使您的 GUI 显示在第一个登录的桌面上。

问题是微软改变了从 Windows 2008 和 Vista 开始允许执行的服务。这意味着从这些版本开始，GUI 将始终显示在用户需要切换到的沙盒桌面上。

如果您想在所有桌面上显示 GUI，在所有版本的 Windows 中，您将需要在桌面内运行 JVM。

干杯，莱夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:13:29.953

不要认为你应该有一个带有服务的 UI。把它放在启动组中吗？
UI 和应用程序有什么作用？

# dynamic - 动态表 SQL ColdFusion

> ID：11549884
> 
> 赞同：0
> 
> 时间：2012-07-18T20:35:14.773
> 
> 标签：dynamic, html-table, coldfusion

我有一个关于使用 SQL 和 HTML 在 ColdFusion 中创建表的问题。

我正在从外部表格接收数据并尝试在网页上显示此数据。

该表由一种层次结构中的 5 列表示。

我正在看的是前两个。在第二列中，我试图将第 3 - 5 列中的所有数据组合在一起。但是，在收到数据之前，组的数量是未知的，我认为我已经涵盖了这部分。

我遇到的问题是尝试将这些组放在第二列中，然后将它们再次分组到第一列中。在我知道第一列中的每组有多少行之前，我必须知道第二列中占用了多少行，这一事实真正让我感到困惑。

任何提示都会非常有帮助。以下是相关代码：

```
 <table border = "1" align = "center">
<tr>
    <td><b>SubType</b></td>
    <td><b>Service Item</b></td>
    <td><b>Team Number</b></td>
    <td><b>Time</b></td>
    <td><b>Count</b></td>
</tr>
<cfset subcounter = 1>
<cfset counter = 1> 
<cfoutput query = "SubTypes" Group = "ServiceSubType">
    <cfoutput Group = "ServiceSubTypeItem">
        <cfset subcounter = 1>
        <cfset counter = 1>
        <cfoutput Group = "Team_Name">
            <cfquery name = "ServiceRowSpan" dbtype = "query">
                select count(*) as SubTypeCounter
                from SubTypes
                where 
                    ServiceSubType = '#ServiceSubType#' and
                    ServiceSubTypeItem = '#ServiceSubTypeItem#'
            </cfquery>  

            <cfquery name = "ServiceItemRowSpan" dbtype = "query">
                select count(*) as ItemCounter
                from SubTypes
                where 
                    ServiceSubType = '#ServiceSubType#' and
                    ServiceSubTypeItem = '#ServiceSubTypeItem#'
            </cfquery>  
    <tr>
        <cfif subcounter is 1>
            <td rowspan = #ServiceRowSpan.SubTypeCounter#>#ServiceSubType#</td>
            <cfset subcounter = subcounter + 1>
        </cfif>
        <cfif counter is 1>
            <td rowspan = #ServiceItemRowSpan.ItemCounter#>#ServiceSubTypeItem#</td>
            <cfset counter = counter + 1>
        </cfif>
        <td>#Team_Name#</td>
        <td>#Hours#</td>
        <td>#Total#</td>
    </tr>
        </cfoutput>
    </cfoutput>
</cfoutput> 
```

这是我第一次使用 Stack Overflow，如果信息不足，请见谅。

# azure - TFS 构建中的 PowerShell 脚本未上传到 Azure

> ID：11549886
> 
> 赞同：0
> 
> 时间：2012-07-18T20:35:23.277
> 
> 标签：azure, build

在谷歌上搜索后，我设法根据[这个网站](http://www.windowsazure.com/en-us/develop/net/common-tasks/continuous-delivery/#step4)整理了一个 powershell 脚本来上传我的天蓝色项目。当我尝试使用同一站点上的步骤将其添加到 TFS 构建过程时，我得到以下输出：

![在此处输入图像描述](../Images/c711b52a0847e4494e9e77c61f4678af.png) 我的版本说它已经运行了 7 个小时，如果我登录到 windows azure，就没有提到这个包。从那以后，我已经多次运行它，但时间不长，即使在 10 分钟后，它仍然没有改变 Azure 仪表板上的任何内容。

如果我从构建服务器上的命令提示符运行相同的命令，那么它会运行并上传登台环境，大约需要 8-10 分钟才能完成。为了让它从 TFS Build 运行，我需要做些什么特别的事情，还是有什么方法可以让我获得更有意义的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:08:03.593

终于找到了。default.publishsettings 没有权限让构建服务读取它。添加了对该服务的完全权限，它现在可以工作了。

# asp.net-mvc-3 - 在 MVC3 中使用 UIhint 的动态视图

> ID：11549888
> 
> 赞同：1
> 
> 时间：2012-07-18T20:35:28.987
> 
> 标签：asp.net-mvc-3

我想在 MVC3 框架中创建一个视图，该视图将根据数据动态运行。我正在采取一种方法来为模型创建一个接口，并且视图正在根据实现该接口的类来显示模型。例如，假设我有一个接口 IData，它只有一个属性 Data。现在我正在创建两个模型 Dog 和 Cow，它们是从 IData 派生的。我正在使用 Dog 和 Cow 类的 UIHint 属性来使用一些显示模板来呈现这些类中的数据。我正在采用这种方法来使用相同的视图类来渲染两个模型。View 的模型数据是 IData，而不是牛或狗。但是我注意到，当我使用 @Html.DisplayFor(m=>Model.Data) 时，它没有使用适当的模板来呈现数据。后来我意识到，lambda 表达式将模型类型作为 IData 传递，不是狗或牛，因此，MVC 框架无法找到合适的模板。有没有其他方法可以实现相同的目标？谢谢，

# objective-c - 谷歌 GData YouTube API，搜索？

> ID：11549889
> 
> 赞同：0
> 
> 时间：2012-07-18T20:35:30.047
> 
> 标签：objective-c, ios, macos, gdata

我一直在用谷歌 GData YouTube API 做所有我能做的事情，它只会伤害我的大脑，谷歌没有明确表示要学习，而且网上似乎很少有关于它的内容（Objective-C iOS、Mac ）。

我只想完成最简单的任务之一，搜索 YouTube，获取搜索结果的缩略图、描述、标题等。如果您能对此提供帮助，我将不胜感激。我不确定从哪里开始。

或者，如果您可以推荐一些学习 API 的好资源，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:50:12.450

[YouTubeSample 应用程序](https://code.google.com/p/gdata-objectivec-client/source/browse/trunk/Examples/YouTubeSample/YouTubeSampleWindowController.m)将是最直接的示例。您需要先阅读并理解[API 库文档](http://code.google.com/p/gdata-objectivec-client/wiki/GDataObjCIntroduction)。

# applescript - AppleScript 使用邮件中的规则将邮件移动到邮箱

> ID：11549891
> 
> 赞同：0
> 
> 时间：2012-07-18T20:35:34.413
> 
> 标签：applescript, apple-mail

我看了又看，但找不到这个看似简单的问题的答案（我也是 AppleScript 的新手）。基本上，我只想要一个脚本来设置规则并将邮件移动到邮箱“Foo”（我的 IMAP 帐户中的邮箱）。这是我所拥有的：

```
tell application "Mail"
set newRule to make new rule at end of rules with properties {name:"Foo Internal",   enabled:true}
tell newRule
    make new rule condition at end of rule conditions with properties {rule type:any recipient, expression:"internal_foo@foo.com", qualifier:does contain value}
    set move message to mailbox "Foo"
end tell
end tell 
```

我试过这条线的各种组合......

```
set move message to mailbox "Foo" 
```

...包括指定 IMAP 帐户、将其设置为变量等。我不是程序员，但我真的想编写这些规则的脚本，因为我在工作中一直在设置规则。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:22:08.787

您的脚本因两件事而失败：

1.  它忽略了`should move message`将规则的属性设置为 true，这是一个`move message`动作真正“坚持”所必需的；
2.  它没有正确定义目标邮箱的对象层次结构：您将需要 the`account`和`application`context，因为您位于`tell`针对规则的块内，而不是 Mail。

以下代码：

```
tell application "Mail"
    set newRule to make new rule at end of rules with properties {name:"Foo Internal", enabled:true, should move message:true}
    tell newRule
        make new rule condition at end of rule conditions with properties {rule type:any recipient, expression:"internal_foo@foo.com", qualifier:does contain value}
        set move message to (mailbox "Foo" of account "Bar" of application "Mail")
    end tell
end tell 
```

将在 Mail 5.2 中工作（OS X 10.7.4 的库存）。

# ruby-on-rails - 访问控制器功能时自动调用 sql

> ID：11549892
> 
> 赞同：1
> 
> 时间：2012-07-18T20:35:34.740
> 
> 标签：ruby-on-rails, ruby, model-view-controller

因此，我正在尝试填充一个下拉菜单，该菜单根据在另一个下拉列表中选择的客户来显示某些客户项目。我正在使用 javascript 执行此操作，在项目控制器中调用函数“byProjectId”。

```
$("#customer_id").bind( "change", function(){
  $("#task_project_id").empty();
    $.ajax({
      type: 'GET',
      url: '/projects/byCustomerId/' + $(this).val(),
      dataType: 'script'
    })
}); 
```

我的 byCustomerId 函数如下：

```
def byCustomerId
  logger.debug "DEBUGGING HERE"
  if params[:id].present?
    @projects = Customer.find(params[:id]).projects.order(:name)
  else
    @projects = []
  end

  respond_to do |format|
    format.js
  end
end 
```

所以我所做的就是根据传递的客户 ID 值检索项目列表。但是，当我实际运行它时，会在实际执行此方法中的代码之前进行一些额外的数据库调用。这是运行 rails 服务器的控制台的输出：

```
Started GET "/projects/byCustomerId/5?_=1342642985360" for 127.0.0.1 at 2012-07-
18 15:23:05 -0500
Processing by ProjectsController#byCustomerId as JS
Parameters: {"_"=>"1342642985360", "id"=>"5"}
←[1m←[36mMember Load (1.0ms)←[0m  ←[1mSELECT "members".* FROM "members" WHERE
"members"."id" = 7 LIMIT 1←[0m
←[1m←[35mProject Load (0.0ms)←[0m  SELECT "projects".* FROM "projects" WHERE "
projects"."id" = 5 LIMIT 1
Completed   in 69ms

ActiveRecord::RecordNotFound (Couldn't find Project with ID=5): 
```

这表明它正在尝试请求 ID 为 5 的所有 PROJECTS，即使 5 是它应该请求的客户 ID。当我使用另一个恰好是有效 ProjectID 的 CustomerID 时，它会在此之后立即运行正确的调用，但不会发生 RecordNotFound 异常：

```
DEBUGGING HERE
←[1m←[36mCustomer Load (0.0ms)←[0m  ←[1mSELECT "customers".* FROM "customers"
WHERE "customers"."id" = 1 LIMIT 1←[0m
←[1m←[35mProject Load (1.0ms)←[0m  SELECT "projects".* FROM "projects" WHERE (
"projects".customer_id = 1) ORDER BY name 
```

“在这里调试”是我意识到这些调用是在我的 byCustomerId 函数中的代码之前进行的唯一方法。如果我传递的客户 ID 作为项目 ID 也是有效的，它会返回正确的数据并正确填充，只需对来自不正确 sql 调用的数据执行任何操作，但是当客户 ID 与项目 ID 不匹配时，这些对数据库的额外调用得到异常并且没有填充任何内容，即使以后的查询仍然可以。我无法弄清楚这些对数据库的额外调用来自哪里？我是否只是通过将任何数据发送到项目控制器或其他方式来调用它们？

# regex - 如何让 jquery validate 插件只允许文本、空格、句点和连字符？

> ID：11549897
> 
> 赞同：0
> 
> 时间：2012-07-18T20:36:14.393
> 
> 标签：regex, jquery-plugins, jquery-validate

我正在使用[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)来验证我的表单。不幸的是，没有纯文本方法。所以我试着写我自己的：

```
$(document).ready(function(){
$("#staffedit").validate(
    {
        rules: {
        editDisplayName: {
            textonly: true,
            required: true
        }
    }}
    );
jQuery.validator.addMethod(
"textonly", 
function(value, element)
{console.log('textonly called.');
 console.log(/[-.\w\s]/.test(value));
    return this.optional(element) || /[-.\w\s]/.test(value); 
}, 
jQuery.format("Please only enter letters, spaces, periods, or hyphens.")
);
    }); 
```

该方法被调用，因为我的 console.log 函数会在适当的时间输出到控制台。我不明白的是，为什么我仍然可以在输入字段中输入 $ 或 *。我可以把任何东西放在那里，它仍然被评估为有效。

我使用[http://regexpal.com/](http://regexpal.com/)来测试正则表达式，它在那里工作正常。

那么，如何让插件只允许文本、空格、句点和连字符呢？

附带说明一下，我还希望允许带有重音符号的字符，例如 à、É、ā 或 ô...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:24:46.577

问题在于 test() 函数的工作方式。如果匹配，则返回 true。这就是让我如此困惑的原因。我使用的正则表达式实际上正在做我认为他们应该做的事情。见[http://www.w3schools.com/jsref/jsref_regexp_test.asp](http://www.w3schools.com/jsref/jsref_regexp_test.asp)

```
/[^-\.a-zA-Z\s]/.test("David"); //Returns false
/[^-\.a-zA-Z\s]/.test("Davi$ *d"); //Returns true
//without the ^
/[-\.a-zA-Z\s]/.test("Davi$ *d"); //Returns true
/[-\.a-zA-Z\s]/.test("David"); //Returns true 
```

如您所见，这不是很有帮助。所以我所做的就是将测试从返回语句中拉出来。像这样：

```
$(document).ready(function(){
$("#staffedit").validate(
    {
        rules: {
        editDisplayName: {
            textonly: true,
            required: true
        }
    }}
    );
jQuery.validator.addMethod(
"textonly", 
function(value, element)
{
    valid = false;
    check = /[^-\.a-zA-Z\s\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AE]/.test(value);
    if(check==false)
        valid = true;
    return this.optional(element) || valid;
}, 
jQuery.format("Please only enter letters, spaces, periods, or hyphens.")
);
}); 
```

所以我检查是否有任何我不想要的字符存在，如果它们不 test() 返回 false，那么它是有效的。

我还弄清楚了 unicode 的东西。[\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AE] 匹配一堆东西，我用[http://en.wikipedia.org/wiki/List_of_Unicode_characters](http://en.wikipedia.org/wiki/List_of_Unicode_characters)来弄清楚要输入什么。我想我明白了我想要的一切。感谢 Kyle Schmidt 发布了[Javascript + Unicode 正则表达式](https://stackoverflow.com/questions/280712/javascript-unicode)的链接，帮助我弄清楚了 \u 语法。我可能应该更彻底地检查 unicode，但现在应该足够了。

问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:42:31.343

如果你得到额外的方法 js 那里有一个字母验证器

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/additional-methods.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/additional-methods.js)

我相信你想要带有基本标记的字母

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:57:56.493

将 ^ 放在字符类中将否定字符类中的内容。我会选择 [-.\w\s]

# socketserver - 编写 TCP Echo 程序？

> ID：11549899
> 
> 赞同：1
> 
> 时间：2012-07-18T20:36:14.737
> 
> 标签：socketserver, tcpsocket

我正在尝试编写一个 TCP Echo 程序，它应该打开一个 TCP 服务器套接字，接受至少 1 个连接，并回显接收到的任何数据。至少，该程序应在指定端口（exe：端口 4444" 上启动并运行。理想情况下，它会询问端口号（来自命令行、命令行参数或配置文件），尝试在该端口上打开，并报告是否发生错误。

该程序应该使用 windows 或 Linux 中的 telnet 命令或任何操作系统中的任何终端仿真器进行测试。用户使用 Telnet 或超级终端连接到正在运行的程序。输入的任何内容都应立即回显。

到目前为止，我有以下内容：

```
#include <stdio.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <netinet/in.h>
#include <errno.h>

#define MAXCONNECTING 1000    //Max connection requests
#define BUFFERSIZE 128       //limits data sent per loop
#define ECHOPORT 4444

//Error checking function
//Will be called multiple times to check for errors throughout the code

void ERR(char *ERROR) {
    perror(ERROR);
    exit(1);
}

/****************************************************************************
 * Handles the connection. Receive/Send data from/to client
 ****************************************************************************/
void ClientHandle(int sock) {
    char buffer[BUFFERSIZE];
    int received = -1;

    //receive the data
    if ((received = recv(sock, buffer, BUFFERSIZE, 0)) < 0) {
        ERR("Failed to receive message from client");
    }

    //send data and check for more incoming data
    while (received > 0) {
        if (send(sock, buffer, received, 0) != received) {
            ERR("Failed to send data to client");
        }
        if ((received = recv(sock, buffer, BUFFERSIZE, 0)) < 0) {
            ERR("Failed to receive additional data from client");
        }
    }
    close(sock);
}

int main(int argc, char *argv[]) {
    /****************************************************************************
     * Get port number from command line and set to default port
     ****************************************************************************/
    char *endptr;
    short int port;

    if (argc == 2) {
        port = strtol(argv[1], &endptr, 0);
        if (*endptr) {
            fprintf(stderr, "EchoServer: Invalid Port Number.\n");
            exit(EXIT_FAILURE);
        }
    } else if (argc < 2) {
        port = ECHOPORT; //port 4444
    } else {
        fprintf(stderr, "EchoServer: Invalid arguments.\n");
        exit(EXIT_FAILURE);
    }

    /****************************************************************************
     * Server Configuration. Creating the socket
     ****************************************************************************/

    int serversock, clientsock;
    struct sockaddr_in echoserver, echoclient;

    if (argc != 2) {
        fprintf(stderr, "USING: echoserver Port: 4444\n");
        exit(1);
    }
    //Creating the TCP socket
    if ((serversock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) < 0) {
        ERR("Failed to create socket");
    }
    //Constructing the server sockaddr_in structure
    memset(&echoserver, 0, sizeof(echoserver)); //clear struct
    echoserver.sin_family = AF_INET;             //internet ip
    echoserver.sin_addr.s_addr = htonl(INADDR_ANY); //listen to any ip address
    echoserver.sin_port = htons(atoi(argv[1])); //server port

    /*****************************************************************************
     * Bind and Listen
     *****************************************************************************/
    if (bind(serversock, (struct sockaddr *) &echoserver, sizeof (echoserver)) < 0) {
        ERR("Failed to bind the server socket");
    }
    if (listen(serversock, MAXCONNECTING) < 0) {
        ERR("Failed to listen on server socket");
    }

    /*****************************************************************************
     * Accepting the transmission
     *****************************************************************************/
    while (1) {
        unsigned int clientleng = sizeof (echoclient);

        if ((clientsock = accept(serversock, (struct sockaddr *) &echoclient, &clientleng)) < 0) {
            ERR("Failed to accept connection from client");
        }
        fprintf(stdout, "Client connected: %s\n", inet_ntoa(echoclient.sin_addr));
        ClientHandle(clientsock);
    }
    return (0);
}

/*****************************************************************************************/ 
```

谁能看到我哪里出错了？我可以使用以下命令在终端中找到程序：g++ EchoServer.cpp -0 EchoServer，然后是：./EchoServer

输出只给我： USING: echoserver Port: 4444

我正在尝试远程登录它，但我对这些东西很陌生。请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-29T17:01:26.847

假设您在当前目录中名为 EchoServer.cpp 的文件中有上述文本框的内容，您可以运行以下代码来演示它的工作原理：

```
g++ EchoServer.cpp -o EchoServer 
```

编译后，您将在同一目录中拥有一个名为 EchoServer 的可执行文件。

如果您只是调用它，您将收到下面的神秘消息，这意味着要使用可执行文件，您必须告诉它使用哪个端口号。

```
USING: echoserver Port 4444 
```

为了证明它有效，我们将把这个过程放在后台。为此，我们使用与号 (&) 将其转换为作业。

```
EchoServer 4444 & 
```

这应该返回一个作业编号和一个进程标识符（你的会不同），因此：

```
[1] 53912 
```

您可以使用作业命令看到它正在运行：

```
[1]+  Running                 ./EchoServer 4444 & 
```

您现在可以通过 telnet 访问它以查看它是否正常工作：

```
telnet localhost 4444 
```

你应该看到：

```
Trying 127.0.0.1...
Client connected: 127.0.0.1
Connected to localhost.
Escape character is '^]'. 
```

在此之后键入的任何内容都将在您按 Enter 或 Return 时发回给您。尝试输入 Hello 并按回车键。

完成后，您可以按住控制键，然后按住右方括号键（之后您可能必须按回车键）。这将带您进入 telnet 提示符，您应该键入`quit`离开。

要关闭 EchoServer 可执行文件，您可以将作业带回前台并使用 Control-C 键停止它。假设您的作业是 1（您可以`jobs`再次运行以检查数字），您可以运行以下命令将其带回前台：

```
fg 1 
```

您现在有效地处于 EchoServer 进程中，按 Control-C 将结束它。

而已！你完成了。你已经成功地证明了程序的工作。

# ruby-on-rails - Spree：关闭 SSL 将 /admin 重定向回站点

> ID：11549901
> 
> 赞同：2
> 
> 时间：2012-07-18T20:36:18.353
> 
> 标签：ruby-on-rails, ssl, spree

我已经设置了一个新的 rails 应用程序，安装了 spree gem (1.1.2)，并且能够成功启动并运行 Spree，但是我没有 SSL 证书，我只是想在购买之前弄乱 Spree cert 等。我可以成功显示将显示产品等的狂欢页面，但是当我转到 /admin 时，它会重定向回该站点的主页。这是日志显示的内容：

```
Started GET "/admin" for 76.122.36.219 at Wed Jul 18 15:25:42 -0500 2012
Processing by Spree::Admin::OverviewController#index as HTML
Redirected to http://**************.com/
Completed 302 Found in 139ms (ActiveRecord: 5.1ms) 
```

我已经更新了 config/initializers/spree.rb 以包含

```
config.allow_ssl_in_production = false 
```

这样它就不会使用 SSL。

这是我的耙子

```
About your applications environment
Ruby version              1.8.7 (x86_64-linux)
RubyGems version          1.6.2
Rack version              1.4
Rails version             3.2.6
JavaScript Runtime        therubyracer (V8)
Active Record version     3.2.6
Action Pack version       3.2.6
Active Resource version   3.2.6
Action Mailer version     3.2.6
Active Support version    3.2.6
Middleware                ActionDispatch::Static, Rack::Lock, #<ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x70d884a28a50>, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, Rails::Rack::Logger, ActionDispatch::ShowExceptions, ActionDispatch::DebugExceptions, ActionDispatch::RemoteIp, ActionDispatch::Reloader, ActionDispatch::Callbacks, ActiveRecord::ConnectionAdapters::ConnectionManagement, ActiveRecord::QueryCache, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ParamsParser, ActionDispatch::Head, Rack::ConditionalGet, Rack::ETag, ActionDispatch::BestStandardsSupport
Application root          /home/********/**************
Environment               development
Database adapter          mysql2
Database schema version   20120718173536 
```

我试过搜索无济于事；我发现的大部分内容都讨论了打开/关闭 SSL 以进行登台。如果有帮助，我的服务器使用 Phusion Passenger 进行部署（Site5）..

任何帮助或方向将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T19:24:53.210

[在搜索了更多之后，我在这里](https://groups.google.com/forum/?fromgroups#!searchin/spree-user/ssl%2420redirects/spree-user/CWQBdHdBeF0/vA8GQwfbjgEJ)找到了问题的答案。

本质上，您只需要安装另一个名为[spree_auth_devise](https://github.com/spree/spree_auth_devise)的 Gem 。

# c# - 如何设置 C# winforms 应用程序来托管 SignalR Hub？

> ID：11549902
> 
> 赞同：4
> 
> 时间：2012-07-18T20:36:22.017
> 
> 标签：c#, winforms, signalr

我已经阅读了 SignalR 文档并观看了一些视频，但是我无法让 SignalR 在 winforms 应用程序中托管。

我尝试使用 SignalR wiki 上的源代码：[https ://github.com/SignalR/SignalR/wiki/Self-host](https://github.com/SignalR/SignalR/wiki/Self-host)

如果您查看“完整示例 - 集线器”，“服务器”变量是什么？我不明白这是如何工作的或如何将其转换为 C#。根据 wiki “默认的 SelfHost 实现建立在 HttpListener 之上，可以托管在任何类型的应用程序（控制台、Windows 服务等）中。”

我想在 C# 中托管 SignalR 并在 asp.net 中使用它。任何人都可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:05:06.800

Wiki 中的示例工作正常。

请`SignalR.Hosting.Self`使用 NuGet（包管理器控制台）安装包

> 安装包 SignalR.Hosting.Self

生活`Server`在`SignalR.Hosting.Self`命名空间中。

### 样本

### 控制台应用程序

```
using System;

namespace MyConsoleApplication
{
    static class Program
    {
        static void Main(string[] args)
        {
            string url = "http://localhost:8081/";
            var server = new SignalR.Hosting.Self.Server(url);

            // Map the default hub url (/signalr)
            server.MapHubs();

            // Start the server
            server.Start();

            Console.WriteLine("Server running on {0}", url);

            // Keep going until somebody hits 'x'
            while (true)
            {
                ConsoleKeyInfo ki = Console.ReadKey(true);
                if (ki.Key == ConsoleKey.X)
                {
                    break;
                }
            }
        }

        public class MyHub : SignalR.Hubs.Hub
        {
            public void Send(string message)
            {
                Clients.addMessage(message);
            }
        }
    }
} 
```

### ASP.NET / Javascript

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.js"></script>
<script src="/Scripts/jquery.signalR.js" type="text/javascript"></script>
<script src="http://localhost:8081/signalr"></script>

<script type="text/javascript">
    $(function () {
       // create signalr hub connection
       myHub= $.connection.myHub;

       // start hub connection and call the send method
       $.connection.hub.start(function () {
           myHub.Send('Hello');
       });
    });
</script> 
```

**如果您有其他答案，请发表评论**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T17:59:23.383

为了使它适用于 C# 和 ASP.NET，我不得不使用“跨域”。

在我使用的 JavaScript 中：

```
<script type="text/javascript" src='http://localhost:8081/signalr/hubs'></script> 
```

并补充说：

```
$.connection.hub.url = 'http://localhost:8081/signalr' 
```

# java - 构造多个线程以将单词输出到地图

> ID：11549907
> 
> 赞同：0
> 
> 时间：2012-07-18T20:36:42.463
> 
> 标签：java, multithreading

我有一个`wordCount(CharacterReader charReader)`函数，它接受一个字符流，将它们转换为单词。

我还有一个`Collection<CharacterReader> characerReaders`, 包含多个字符流。集合中的读者数量可能会有所不同，我想从所有流中读取并计算所有单词。

我对线程有点困惑，找不到任何与此类似的示例。我本质上想要多个线程将他们的单词输出到一个 SortedMap 中，这样我就可以获得实时的总字数。

我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:48:18.563

1.  如果要让多个线程写入地图，则需要使用 a `ConcurrentSkipListMap`，它既是 a`SortedMap`又是 a `ConcurrentMap`。
2.  您可以为`CharacterReader`集合中的每个创建一个`Runnable`调用`wordCount`函数（访问前面描述的映射）的 a。
3.  创建`Runnable`s 后，您可以创建一个`ExecutorService`（例如使用`Executors.newCacheThreadPool()`），将所有`Runnable`s 传递给它并等待它们完成（参见class的[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)`ExecutorService`中的示例）。

您也可以在将`Runnable`s 发送到`ExecutorService`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:30:20.280

vainolo 和 JB 的答案都很好。

我将添加一件事，即描述如何制作一个高度并发的数据结构来存储您的字数。

正如 vainolo 所说，[ConcurrentSkipListMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html)是您想要的基本数据结构，因为它既是排序的又是并发的。为了充分利用它，您要避免进行任何锁定。这意味着您必须避免涉及锁定-读取-写入-解锁周期的模式。这有两个后果：首先，在地图中放入一个新单词不应该涉及锁，并且增加现有单词的计数不应该涉及锁。

您可以使用 ConcurrentMap 的[putIfAbsent](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentMap.html#putIfAbsent%28K,%20V%29)方法安全地向地图添加新事物。但是，仅此还不够，因为您每次使用它时都必须提供潜在价值，这可能很昂贵。最简单的做法是使用一种双重检查锁定模式，您首先简单地尝试获取现有值，然后如果发现没有，则使用 putIfAbsent 添加一个新值（您不能简单地调用 put，因为两个线程同时 put 之间可能存在竞争）。

通过不在映射中存储整数，而是在本身包含整数的对象中存储整数，可以很容易地完成不加锁的递增。这样，您就不必在地图中放置一个递增的值，您只需递增已经存在的对象。[AtomicInteger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)似乎是一个很好的候选人。

把它们放在一起，你会得到：

```
public class WordCounts {
    private final ConcurrentMap<String, AtomicInteger> counts
         = new ConcurrentSkipListMap<String, AtomicInteger>();

    public void count(String word) {
        AtomicInteger count = getCount(word);
        count.incrementAndGet();
    }

    private AtomicInteger getCount(String word) {
        AtomicInteger count = counts.get(word);
        if (count == null) {
            AtomicInteger newCount = new AtomicInteger();
            count = counts.putIfAbsent(word, newCount);
            if (count == null) count = newCount;
        }
        return count;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:46:30.333

创建一个`WordMap`封装排序地图的类，并确保对地图的所有访问都正确同步。或者使用已经是线程安全的并发映射。

创建此类的一个实例。使用[Executors](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html)类创建具有`ExecutorService`您想要的特征的对象。

然后遍历集合，并为每个阅读器创建一个`Callable`或一个`Runnable`用在此阅读器中找到的单词填充 WordMap 实例，并将此`Callable`或提交`Runnable`给`ExecutorService`.

# ruby-on-rails - 没有路线匹配 [POST] "/user/1/cars"

> ID：11549914
> 
> 赞同：0
> 
> 时间：2012-07-18T20:37:14.337
> 
> 标签：ruby-on-rails, routing, controller

在我的应用程序上我有这个我正在尝试创建以前注册用户的汽车但我收到错误（标题帖子）这是我的汽车控制器

```
class CarController < ApplicationController
    def new
      @car = Car.new
    end

    def create
      @user = User.find(params[:user_id])
      @car = @user.car.create(params[:car])
      redirect_to user_path(@user)
    end
end 
```

这是我的路线.rb

```
Estaciones::Application.routes.draw do
devise_for :users

root :to => "user#index"
resources :user do
   resources :cars
end

get "user/new"
post "user/create"
get "user/:id" => "User#show"
get "user/:user_id/car/new" 
```

这是我的 html.erb 的一部分

```
<div class="container">

  <h1>new user registered</h1>

  <p>
    <strong>name:</strong>
    <%= @user.name %>
  </p>

  <p>
    <strong>email:</strong>
    <%= @user.email %>
  </p>

  <h2>new car registration</h2>

  <%= form_for([@user, @user.car.build]) do |f| %>
    <p>
      <%= f.label :brand %><br />
      <%= f.text_field :brand %>
    </p>
    <p>
      <%= f.label :color %><br />
      <%= f.text_field :color %>
    </p>
    <p>
      <%= f.label :model %><br />
      <%= f.text_field :model %>
    </p>
    <p>
      <%= f.label :year %><br />
      <%= f.text_field :year %>
    </p>
    <p>
      <%= f.submit "Create new car"%>
     </p>
  <% end %>
</div> 
```

当我提交新车的创建时，我得到了下一个错误

```
No route matches [POST] "/user/1/cars" 
```

任何想法？？

还有我的路线：

```
new_user_session GET    /users/sign_in(.:format)               devise/sessions#new
        user_session POST   /users/sign_in(.:format)               devise/sessions#create
destroy_user_session DELETE /users/sign_out(.:format)              devise/sessions#destroy
       user_password POST   /users/password(.:format)              devise/passwords#create
   new_user_password GET    /users/password/new(.:format)          devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format)         devise/passwords#edit
                     PUT    /users/password(.:format)              devise/passwords#update
   cancel_user_registration GET    /users/cancel(.:format)                devise/registrations#cancel
   user_registration POST   /users(.:format)                       devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)               devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                  devise/registrations#edit
                     PUT    /users(.:format)                       devise/registrations#update
                     DELETE /users(.:format)                       devise/registrations#destroy
                root        /                                      user#index
           user_cars GET    /user/:user_id/cars(.:format)          cars#index
                     POST   /user/:user_id/cars(.:format)          cars#create
        new_user_car GET    /user/:user_id/cars/new(.:format)      cars#new
       edit_user_car GET    /user/:user_id/cars/:id/edit(.:format) cars#edit
            user_car GET    /user/:user_id/cars/:id(.:format)      cars#show
                     PUT    /user/:user_id/cars/:id(.:format)      cars#update
                     DELETE /user/:user_id/cars/:id(.:format)      cars#destroy
          user_index GET    /user(.:format)                        user#index
                     POST   /user(.:format)                        user#create
            new_user GET    /user/new(.:format)                    user#new
           edit_user GET    /user/:id/edit(.:format)               user#edit
                user GET    /user/:id(.:format)                    user#show
                     PUT    /user/:id(.:format)                    user#update
                     DELETE /user/:id(.:format)                    user#destroy
            user_new GET    /user/new(.:format)                    user#new
         user_create POST   /user/create(.:format)                 user#create
                     GET    /user/:id(.:format)                    User#show
                     GET    /user/:user_id/cars/new(.:format)      car#new 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:42:28.540

我不是 Ruby on Rails 人。但是....您的帖子网址与您在文件`/users/1/cars`中提到的任何路线都不匹配。`route.rb`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:20:50.300

尝试这样做：

```
root :to => "user#index"
resources :users do
  resources :cars
end 
```

取而代之的是：

```
root :to => "user#index"
resources :user do
  resources :cars
end 
```

（添加到用户）。并尝试去这里：/users/1/cars

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T22:26:39.040

问题是因为`resources :user`是单数，但路线需要复数。路线应该是：

```
resources :users do
  resources :cars
end 
```

# android - 以编程方式在 ListView 中显示数据

> ID：11549916
> 
> 赞同：0
> 
> 时间：2012-07-18T20:37:27.423
> 
> 标签：android

我正在开发一个 Android 应用程序，我需要在可滚动的 Listview 中显示一些数据。我将从我现在存储在链表中的对象中提取一些字符串（直到我想出更好的解决方案）。

我想显示一个看起来几乎像联系人应用程序的视图。一个列表，左边有一张小图片，右边有一个较大的文字，较小的文字表示较大的文字。当我单击其中一个项目时，它应该打开一个新活动。

如何创建视图？如果我在链接列表中添加一个对象，它应该出现在列表中。

我检查了一些示例代码，但它们都使用 Arrayadapter，我不明白我应该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:41:13.767

查看这篇关于适配器的文章：[http](http://www.vogella.com/articles/AndroidListView/article.html) ://www.vogella.com/articles/AndroidListView/article.html 如果您想在 ListVew 中添加新对象，请使用：

```
adapter.notifyDataSetChenged(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:10:35.067

检查这个问题中的库，你有你需要的东西：

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)

# jquery - v.1.4.1 和 1.7.2 之间的 jQuery 更改影响 tr 点击事件

> ID：11549917
> 
> 赞同：0
> 
> 时间：2012-07-18T20:37:38.440
> 
> 标签：jquery, html-table, click, row

在我的项目中，我将使用的 jQuery 版本从 1.4.2 更新到了 1.7.2。现在我在处理`<tr>`元素的单击事件处理程序时观察到一些意外行为。

多个站点包含第一列中带有单选按钮的表格。所以 HTML 看起来像这样

```
<table>
  <tbody>
    <tr onclick="selectOnClick(this)">
      <td><input type="radio" .... /></td>
      ......
    </tr>
... 
```

在一个单独的 js 文件中有 JS 函数的定义

```
function selectOnClick(row) {
  $(row).children('td').children('input :first').click();
  $(row).children('td').children('input :first').click();
  $(row).children('td').children('input :first').click();
} 
```

因此，每当单击表格行内的元素时，都会单击第一个输入元素。我不知道为什么需要在函数中调用相同的语句 3 次，但这是有原因的。

我的问题是，在 jQuery 更新 (v.1.4.2 --> 1.7.2) 之后，鼠标单击该行会产生数百个事件而不是一个事件。浏览器忙于处理它们，以至于它看起来根本没有反应。如果我将函数修改为`click()`仅在它不改变时调用。

有人可以告诉我造成这种影响的原因是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:51:14.467

每次您在其中一个子元素上触发单击事件时，它都会冒泡回到 tr 导致无限循环。尝试触发处理程序而不是事件。

```
function selectOnClick(row) {
    $(row).children('td').children('input :first').triggerHandler("click");
} 
```

但是请注意，这只会触发 jQuery 绑定事件。

# opengl - libGDX：如何更改纹理区域中的调色板？

> ID：11549918
> 
> 赞同：2
> 
> 时间：2012-07-18T20:37:39.860
> 
> 标签：opengl, libgdx

我正在尝试模拟复古街机游戏，我遇到的第一个问题是如何模拟调色板，以便拥有索引纹理和颜色循环，并且调色板有限。

使用着色器的一些要点（在运行时更改颜色），但问题是它似乎有很高的补偿成本（我试图在安卓手机中使用它）。

无论如何，我一直在看到一些似乎可以解决这个问题的街机模拟器。

知道他们是怎么做的吗？, 或者任何不同于具有不同颜色纹理的替代方案？

# java - 活动生命周期

> ID：11549920
> 
> 赞同：3
> 
> 时间：2012-07-18T20:38:00.920
> 
> 标签：java, android

奥利利书说：

> Android 编程在概念上不同于其他一些环境的编程。在 Android 中，您会发现自己更多地响应应用程序状态的某些变化，而不是自己推动这些变化。
> 
> 它是一个托管的、基于容器的环境，类似于 Java 小程序或 servlet 的编程。
> 
> [...]
> 
> 因此，当涉及到活动生命周期时，您无法说出活动处于什么状态，但您有很多机会来说明从状态到状态的转换会发生什么。

两个问题：

1.  它们是什么意思，您会发现自己更多地响应应用程序状态的某些变化，而不是自己驱动这些变化”请举个例子。

2.  为什么你不说活动是什么，但要说从状态到状态的转换会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:42:14.237

这个措辞有点令人困惑，但这是我要对你的问题说的话：

1.  关于“响应”的部分是指许多 Android 编程的基于事件的性质。例如，每个 Activity 都有标准方法，例如`onCreate(..)`和`onResume(...)`在应用程序生命周期的某些阶段自动调用。正确响应这些生命周期变化是您的工作。

2.  我不确定您所说的“不要说活动是什么”是什么意思，但我会猜测一下。基本上，活动不仅仅是您在代码块中定义的某个屏幕或操作，然后通过一次调用显示在屏幕上。您可以简单地管理 Activity 的状态并在每个点执行不同的操作。例如，当 Activity 启动并被`onCreate`调用时，您可能应该加载视图并设置 Activity 的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:47:40.143

他们的意思基本上是您实际上只在事件队列的一侧工作。这些事件都是与应用程序的不同状态一起预定义的。您只需添加侦听器并决定如何做出反应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:01:49.810

嗯，在移动平台上开发应用程序在一定程度上限制了开发人员。它不像一个完整的操作系统，在移动设备上一次运行多个应用程序是昂贵的。因此，正在运行的应用程序会发生什么很大程度上取决于用户在做什么。如果用户返回主屏幕并“关闭”您的应用程序，您将无法再控制它会发生什么。您可以控制的是您的应用程序在用户与其交互时执行的操作，并且您可以响应不同的事件，例如前景丢失。您实际上只能根据用户的操作来控制应用程序的操作。

# python - 计算数组偏移量的 Pythonic 方法

> ID：11549928
> 
> 赞同：6
> 
> 时间：2012-07-18T20:38:21.253
> 
> 标签：python, arrays, numpy

我正在尝试计算可变大小数组的原点和偏移量并将它们存储在字典中。这是我实现这一目标的可能的非pythonic方式。我不确定是否应该使用 map、lambda 函数或列表推导来使代码更 Pythonic。

本质上，我需要根据总大小切割数组的块并将 xstart、ystart、x_number_of_rows_to_read、y_number_of_columns_to_read 存储在字典中。总大小是可变的。我无法将整个数组加载到内存中并使用 numpy 索引，或者我肯定会。原点和偏移量用于将数组转换为 numpy。

```
intervalx = xsize / xsegment #Get the size of the chunks
intervaly = ysize / ysegment #Get the size of the chunks

#Setup to segment the image storing the start values and key into a dictionary.
xstart = 0
ystart = 0
key = 0

d = defaultdict(list)

for y in xrange(0, ysize, intervaly):
    if y + (intervaly * 2) < ysize:
        numberofrows = intervaly
    else:
        numberofrows = ysize - y

    for x in xrange(0, xsize, intervalx):
        if x + (intervalx * 2) < xsize:
            numberofcolumns = intervalx

        else:
            numberofcolumns = xsize - x
        l = [x,y,numberofcolumns, numberofrows]
        d[key].append(l)
        key += 1
return d 
```

我意识到 xrange 对于端口 3 来说并不理想。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T20:46:34.760

除了您使用`defaultdict`. 列表似乎是一种更好的数据结构，因为：

*   您的键是顺序的
*   您正在存储一个列表，其唯一元素是您的字典中的另一个列表。

你可以做的一件事：

*   使用三元运算符（我不确定这是否会有所改进，但代码行会更少）

这是您的代码的修改版本，其中包含我的一些建议。

```
intervalx = xsize / xsegment #Get the size of the chunks
intervaly = ysize / ysegment #Get the size of the chunks

#Setup to segment the image storing the start values and key into a dictionary.
xstart = 0
ystart = 0

output = []

for y in xrange(0, ysize, intervaly):
    numberofrows = intervaly if y + (intervaly * 2) < ysize else ysize -y
    for x in xrange(0, xsize, intervalx):
        numberofcolumns = intervalx if x + (intervalx * 2) < xsize else xsize -x
        lst = [x, y, numberofcolumns, numberofrows]
        output.append(lst)

        #If it doesn't make any difference to your program, the above 2 lines could read:
        #tple = (x, y, numberofcolumns, numberofrows)
        #output.append(tple)

        #This will be slightly more efficient 
        #(tuple creation is faster than list creation)
        #and less memory hungry.  In other words, if it doesn't need to be a list due
        #to other constraints (e.g. you append to it later), you should make it a tuple. 
```

现在要获取您的数据，您可以这样`offset_list=output[5]`做`offset_list=d[5][0]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:52:51.913

您是否考虑过使用`np.memmap`动态加载片段？然后，您只需要即时确定所需的偏移量，而不是对存储偏移量的数组进行分块。

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.memmap.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.memmap.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:51:02.130

尽管它不会改变您的算法，但编写 if/else 语句的更 Pythonic 方式是：

```
numberofrows = intervaly if y + intervaly * 2 < ysize else ysize - y 
```

而不是这个：

```
if y + (intervaly * 2) < ysize:
    numberofrows = intervaly
else:
    numberofrows = ysize - y 
```

（对于其他 if/else 语句也是如此）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T21:03:21.030

这是一个很长的班轮：

```
d = [(x,y,min(x+xinterval,xsize)-x,min(y+yinterval,ysize)-y) for x in 
xrange(0,xsize,xinterval) for y in xrange(0,ysize,yinterval)] 
```

# .htaccess - .htaccess url 搜索并将一个字符串替换为另一个

> ID：11549934
> 
> 赞同：2
> 
> 时间：2012-07-18T20:38:42.703
> 
> 标签：.htaccess, mod-rewrite, joomla

我需要将一种模式的所有 URL 更改为另一种模式：

[http://www.example.com/index.php?option=com_fireboard](http://www.example.com/index.php?option=com_fireboard) 到 [http://www.example.com/index.php?option=com_kunena](http://www.example.com/index.php?option=com_kunena)

我怎么会这样代替？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:45:28.847

尝试在文档根目录中的 htaccess 文件中的适当位置添加此内容（如果有的话，可能在您的 joomla 规则之前）

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.*)option=com_fireboard(.*)$
RewriteRule ^/?index\.php$ /index.php?%1option=com_kunena%2 [L] 
```

# actionscript-3 - 是否可以使用 SecureSWF 并仍然使用反射？

> ID：11549942
> 
> 赞同：0
> 
> 时间：2012-07-18T20:39:16.737
> 
> 标签：actionscript-3, actionscript, robotlegs

我刚刚继承了一个使用 SecureSWF 的项目。我正在尝试利用 RobotLegs（它使用 SwiftSuspender 进行反射来实现依赖注入）并且刚刚发现 SecureSWF 破坏了构建。有没有人遇到过类似的问题？有解决方法吗？是否有可能完全掩盖使用 RobotLegs 构建的 SWF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T23:57:17.000

实际上，这很简单。您需要 NAMES 进行反射。它们是任何类型的混淆和修改的主要目标。由于我们绝对不能滥用 flash player VM 中的验证机制（这该死的好），我们无法绕过它。

我也在使用secureSWF，我有一个缝合皮肤和控制器的机制以及descrybeType() 和大量的类型和成员检查。我从保护工作流程中排除了我对混淆类的敏感。无论如何，它们对黑客毫无用处。

# .net - IBM Data Server Client v9.7fp5 的日期时间字段溢出

> ID：11549943
> 
> 赞同：2
> 
> 时间：2012-07-18T20:39:17.977
> 
> 标签：.net, datetime, odbc, db2

使用 EntityFramework v4.1 和 IBM Data Server Client `v9.7fp5`，DB 首先基于具有 DATE 列的预定义 DB2 表生成代码。DB2 DATE 列在代码生成期间映射到 .NET DateTime 数据类型。

尝试`INSERT`一行时，收到以下错误

> 错误 [22008] [IBM] CLI0114E 日期时间字段溢出。SQLSTATE=22008

这是有道理的，因为 .NET 没有 DATE 数据类型，只有 DATETIME 并且该属性将包含比 DB2 DATE 列所期望的更多的数据。

问题是

1.  为什么 .NET 基本代码不使用 ToShortDateString() 自动转换并为 DB2 提供它所期望的？

2.  在 .NET 将 SQL 事务提交给 DB2 之前，可以使用哪些方法来覆盖 .NET 基本逻辑并转换应用程序代码中的值？

任何帮助或反馈将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:45:08.203

读取[日期时间数据类型转换 (ODBC)](http://msdn.microsoft.com/en-us/library/bb677233.aspx)。它定义了各种规则`datatype conversions`。下面列出了一个 - SQLSTATE 22008。

> 如果在从 C 转换到 SQL 时发生秒数或小数秒的截断，则会生成带有 SQLSTATE 22008 的诊断记录和消息“日期时间字段溢出”。

这里的关键是确保`truncation`在秒/小数秒内没有发生

**日期数据类型**

如果 DB2 数据库列是`DATE`数据类型，请创建如下所列的变量：

```
new DateTime(2012,3,4); //No time part 
```

**TIMESTAMP 数据类型**

如果 DB2 数据库列是`TIMESTAMP`数据类型，则删除毫秒的小数部分：

```
dateTime = new DateTime(dateTime.Ticks - (dateTime.Ticks % TimeSpan.TicksPerSecond),dateTime.Kind); 
```

**参考**：

1.  [如何从 .NET DateTime 中截断毫秒](https://stackoverflow.com/questions/1004698/how-to-truncate-milliseconds-off-of-a-net-datetime)
2.  [为什么 SQL Server 会丢失一毫秒？](https://stackoverflow.com/questions/715432/why-is-sql-server-losing-a-millisecond)

* * *

**DATE 和 TIMESTAMP 的 DB2 INSERT**

如果您在 DB2 中使用直接 SQL 语句插入，

> 对于时间戳使用格式，如“2012-12-17-16.53.57.285754”

和

> 对于 DATE 使用格式，如 CAST ('2012-12-10' AS DATE)

# python - Python 在同一个 GUI 窗口中绘制和显示多个对象

> ID：11549944
> 
> 赞同：5
> 
> 时间：2012-07-18T20:39:26.997
> 
> 标签：python, user-interface, plot, tkinter

我有一个两部分的问题：

在 Python 中绘制数据的最佳方法是什么？我只需要在 2d 中绘制数据。

我有一个使用 Tkinter 的画布功能构建的画布 GUI。它绘制了一个 8x8 的矩形网格，并且还有一些代码可以让您滚动窗口。（我附上了一张图片）。

是否可以在与此画布对象相同的窗口中包含绘图？我需要能够显示绘制的数据，并希望在我的 GUI 中添加按钮，这将允许我在 GUI 运行期间更新绘图。

提前致谢！

![在此处输入图像描述](../Images/75ef79623440b2178c48e869125f9e5d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:47:36.577

[Matplotlib](http://matplotlib.sourceforge.net/)是使用 Python 绘制数据的事实上的方式。真是太棒了。它也可以[嵌入](http://matplotlib.sourceforge.net/examples/user_interfaces/embedding_in_tk.html)到 Tk 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T19:20:55.500

[https://bitbucket.org/piotrlaczkowski/data-inspector-advanced/overview](https://bitbucket.org/piotrlaczkowski/data-inspector-advanced/overview) 我为快速实验室测量报告和分析编写了它。

玩得开心

# xslt - 无法从 XRTreeFrag 转换为 XNodeSet

> ID：11549947
> 
> 赞同：1
> 
> 时间：2012-07-18T20:39:51.987
> 
> 标签：xslt, param, node-set

我有以下测试代码...我正在尝试将节点集作为参数传递。几个小时后，我终于能够将它传递给我的模板。

我如何将节点集传递给模板：

```
<xsl:call-template name="listing">
    <xsl:with-param name="customData">
        <xsl:apply-templates select="exslt:node-set($data)"/>
    </xsl:with-param>
</xsl:call-template> 
```

我的模板如何接收它：

```
<xsl:template name="listing">
    <xsl:param name="customData" select="/.."/>
    <xsl:variable name="data">
        <xsl:choose>
            <xsl:when test="not($customData)">
                <xsl:value-of select="/data"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$customData"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <textarea><xsl:copy-of select="$data"></xsl:copy-of></textarea>
</xsl:call-template> 
```

如果我用一个衬里设置参数，那么它不会抱怨......例如：

```
<xsl:variable name="data" select="$customData"/> 
```

但是，一旦我尝试像这样设置它，它就会中断：

```
<xsl:variable name="data">
   <xsl:value-of select="$customData"/>
</xsl:variable> 
```

收到此错误消息： **org.apache.xpath.objects.XRTreeFrag 无法转换为 org.apache.xpath.objects.XNodeSet**

我只能找到另一个可以追溯到 2000 年的线程，谈论这个类似的问题......我需要使用类似 node-set($customData)/* 的东西重新设置它，但我试过了，它是不行。

**编辑：** 好的，我可以确认我已成功通过模板中的节点集。但我仍然无法将它复制到我的变量中......它一直说它仍然是一个 RTF。

```
<xsl:template name="listing">
<xsl:param name="customData" as="node-set"/>
<!--<xsl:variable name="data" select="/data"/>-->

<xsl:variable name="data">
    <xsl:choose>
        <xsl:when test="count($customData) != 0">
            <xsl:copy-of select="$customData"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="/data"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:variable>

    <textarea><xsl:value-of select="$customData/record[1]"/></textarea>
    <textarea><xsl:value-of select="/data/record[1]"/></textarea>
    <textarea><xsl:value-of select="$data/record[1]"/></textarea>
</xsl:template> 
```

上面的测试表明我可以毫无问题地访问 $customData 和原始 /data ，它们都显示了记录......但是 $data 搞砸了。所以这意味着从 $customData 到 $data 的副本不起作用......

我尝试了以下方法，它们都不起作用：

```
<xsl:copy-of select="$customData"/>
<xsl:value-of select="$customData"/>
<xsl:apply-templates select="exslt:node-set($customData)"/>
<xsl:apply-templates select="exslt:node-set($customData)/data"/> 
```

任何的想法...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T23:07:49.957

此错误消息来自 Xalan，它是一个 XSLT 1.0 处理器。如果您正在使用 Xalan，那么您可能正在使用 Java，这意味着完全没有理由不迁移到 Saxon 形式的 XSLT 2.0。您会发现 XSLT 2.0 消除了 XSLT 1.0 的许多限制，这是最令人讨厌的限制之一。

如果有充分的理由说明您不能继续使用 XSLT 2.0（而且很难想出一个），那么可以使用 exslt:node-set() 函数形式的变通方法，它可以转换结果树片段 (即，使用子指令定义的变量）到文档节点中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:22:52.470

让它工作，基本上而不是使用应用模板，我需要将 RTF 作为参数传递给模板。这是我让它工作的唯一方法。

```
<xsl:with-param name="data" select="exslt:node-set($customData)"/> 
```

使用这种方法，我能够在 XSL 级别**修改**数据。这真的很酷，我基本上操作我想要的数据，然后我重建根 /，然后我将我的 customData 传递给我的模板函数。

因此，我不是从根目录读取数据，而是读取自己修改过的数据（在 XSL 中构建）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T07:25:53.260

使用**exslt:node-set**确实会抑制错误消息**org.apache.xpath.objects.XRTreeFrag cannot be cast to org.apache.xpath.objects.XNodeSet**

但是，由于某种原因创建的节点集不能在后续的 XPath 表达式中使用；至少它似乎不适用于 Xalan 2.6.0 / XSLT 1.0，这是许多人出于某种原因被迫使用的版本。

有一个简单的解决方案：不要将变量设置为节点集，而是将其设置为 XPath 表达式。然后，您可以使用 dyn:evaluate EXSLT 函数来计算变量持有的 XPath 表达式。

您的代码将如下所示：

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:dyn="http://exslt.org/dynamic"
                extension-element-prefixes="dyn"
                exclude-result-prefixes="dyn"> 
```

..

```
 <xsl:variable name="data">
        <xsl:choose>
            <xsl:when test="count(.) != 0">
                <xsl:text>.</xsl:text>
            </xsl:when>
            <xsl:otherwise>
                <xsl:text>/data</xsl:text>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <textarea>
         <xsl:value-of select="dyn:evaluate($data)/record[1]"/>
    </textarea> 
```

# symfony - 用户使用 FOSUserBundle 更新配置文件时忽略密码

> ID：11549951
> 
> 赞同：4
> 
> 时间：2012-07-18T20:39:59.030
> 
> 标签：symfony, doctrine-orm, fosuserbundle

我正在使用 FOSUserBundle，并且正在尝试创建一个允许用户更新其用户配置文件的页面。我面临的问题是，如果用户不想更改/更新密码，我的表单不需要用户重新输入密码。因此，当用户使用空密码提交表单时，数据库将使用空字符串更新，并且用户将无法登录。

如果未设置密码字段，如何让我的表单忽略更新密码字段？下面是我正在使用的代码。

```
$user = $this->get('security.context')->getToken()->getUser();

//user form has email and repeating password fields    
$userForm = $this->createForm(new UserFormType(), $user);

if ($request->getMethod() == 'POST') {
   $userForm->bindRequest($request);

   if($userForm->isValid()){
      //this will be be empty string in the database if the user does not enter a password
      $user->setPlainPassword($userForm->getData()->getPassword());
      $em->flush();
   }
} 
```

我已经尝试了以下一些方法，但这仍然是空的，因为 bindRequest 将空密码设置为用户

```
if($userForm->getData()->getPassword())
   $user->setPlainPassword($userForm->getData()->getPassword()); 
```

我也尝试过，但这会导致类似的情况并导致不需要的查询

```
if($userForm->getData()->getPassword())
   $user->setPlainPassword($userForm->getData()->getPassword());
else
   $user->setPlainPassword($user->getPlainPassword()); 
```

有什么优雅的方法来处理这个用例吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T08:18:11.410

问题是您在控制密码之前将表单绑定到用户对象。让我们分析您的代码片段。

请执行下列操作

```
$user = $this->get('security.context')->getToken()->getUser(); 
```

将现有用户加载到用户对象中。
现在您使用该数据“构建”一个表单，如果收到一个帖子，您会将发布的数据放入前一个对象中

```
$userForm = $this->createForm(new UserFormType(), $user);

if ($request->getMethod() == 'POST') {
   $userForm->bindRequest($request); 
```

因此，如果将其留空，`bindRequest`您已经将先前的密码丢失**到对象中（显然还没有丢失到数据库中）。**从现在开始的每一个控制都是无用的。

`$request`在这种情况下，一种解决方案是在将表单字段的值绑定到底层对象之前，将其直接手动验证到对象中。
你可以用这个简单的代码片段来做到这一点

```
$postedValues = $request->request->get('formName'); 
```

现在您必须验证密码值是否已填写

```
if($postedValues['plainPassword']) { ... } 
```

我想是`plainPassword`我们感兴趣的领域的名称。

如果您发现该字段包含一个值（其他分支），您无需执行任何操作。
~~否则，您必须从用户对象中检索原始密码并将其设置为`$request`相应的值。~~
(**更新**) 否则，您可以从用户对象中检索密码，但由于该密码以 hased 值存储，因此您不能将其放入`$request`对象中，因为它会再次受到散列的影响。
你可以做的——我想——是一个[array_pop](http://php.net/manual/en/function.array-pop.php)直接放入`$request`对象中，并把把所有事情搞砸的字段（plainPassword） 既然你已经完成了这些事情，你可以将发布的数据绑定到底层对象。

另一种解决方案（可能更好，因为您将一些业务逻辑从控制器中移开）是使用`prePersist`钩子，但在概念上更先进。如果您想探索该解决方案，您可以阅读有关[表单事件的信息](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:52:49.633

我认为你应该重新考虑这是否真的是一个很好的用例。用户应该能够编辑其他用户的密码吗？在我们的机构，我们甚至不允许最高级别的管理员执行此任务。

如果用户需要更改密码，我们让他们自己处理。如果他们忘记了密码，我们允许他们通过电子邮件找回密码。如果他们在调整电子邮件方面需要帮助，我们允许我们的管理员在那时为用户提供帮助。但是所有密码更新和创建都是由用户单独完成的。

我认为 FOSUserBundle 让它很难做到这一点很棒，但如果你必须这样做，DonCallisto 似乎有一个很好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:49:35.533

```
<?php

class User
{
    public function setPassword($password)
    {
        if (false == empty($password)) {
            $this->password = $password;
        }
    }
} 
```

如果密码不为空，这只会更新用户的密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-23T22:36:21.320

我找到了一个简单的技巧来摆脱“输入密码”表单错误。在用户实体中手动设置一个虚拟的 plainPassword。在表单验证之后，只需在刷新实体之前将其重置。

```
<?php

    public function updateAction(Request $request, $id)
    {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('AppBundle:User')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Customer entity.');
        }

        $deleteForm = $this->createDeleteForm($id);
        $editForm = $this->createEditForm($entity);

        $postedValues = $request->request->get('appbundle_user');

/* HERE */ $entity->setPlainPassword('dummy'); // hack to avoid the "enter password" error
        $editForm->handleRequest($request);

        if ($editForm->isValid()) {
/* AND HERE */ $entity->setPlainPassword(''); // hack to avoid the "enter password" error
            $em->flush();

            return $this->redirect($this->generateUrl('customer_edit', array('id' => $id)));
        }

        return array(
            'entity'      => $entity,
            'edit_form'   => $editForm->createView(),
            'delete_form' => $deleteForm->createView(),
        );
    }
```

# .net - String.GetHashCode() 的复杂性

> ID：11549954
> 
> 赞同：2
> 
> 时间：2012-07-18T20:40:09.683
> 
> 标签：.net, string, hash

> **可能重复：**
> [为什么 System.String 对象不缓存其哈希码？](https://stackoverflow.com/questions/3053726/why-might-a-system-string-object-not-cache-its-hash-code)

我一直认为，鉴于 .Net 字符串是不可变的，`String.GetHashCode()`不必每次调用时都计算哈希值——如果字符不会改变，那么对于给定的 System.String 实例，哈希值是恒定的，我天真地想法; `String.GetHashCode()`可能有 O(1) 复杂度。

[逆向工程](https://stackoverflow.com/questions/8349575/reverse-engineering-string-gethashcode)打破了这个假设。

当然，哈希码并不意味着是恒定[的等等](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)，但是什么可以阻止 String 实现具有已经从构建时间计算的哈希码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:44:05.673

好问题！

[不久前我问过同样的事情。](https://stackoverflow.com/q/3053726/105570)

基本上，这是速度/内存的权衡。缓存字符串哈希码的好处可以说被每个需要分配另外 32 位内存的单个字符串对象的开销所抵消。当您考虑程序中可能存在的大量字符串与您关心的哈希码的数量（可能是因为您将它们用作键）时，这是有道理的。

后一个数字在某些程序中可能很大，但也可能很小。在很多情况下，它甚至可能为零。

如果在某些情况下性能是您**非常关心**的问题，您*可能会*考虑编写自己的包装器来缓存其哈希码：

```
public class StringKey
{
    string value;
    int hashCode;

    public StringKey(string value)
    {
        this.value = value;
        this.hashCode = value.GetHashCode();
    }

    public override int GetHashCode()
    {
        return this.hashCode;
    }

    public override string ToString()
    {
        return this.value;
    }

    // Plus all the other stuff you'd want to include here,
    // e.g., Equals, CompareTo, etc.
} 
```

当然，要从中获得任何好处，您仍然需要非常小心地`StringKey`在整个程序中到处重用这些对象。在绝大多数情况下，这不值得付出努力。如果您碰巧是个例外情况，我仅将这个想法作为考虑的事项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:44:53.783

仅当您假设（几乎）每次创建字符串时都使用哈希码时，这才有意义。如果你不使用哈希码，你仍然会付出计算的代价。我同意你的实习字符串，这实际上可能是值得的，只要它可以作为实习的一部分来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:45:41.507

我认为问题是在哪里存储哈希码。对字符串存储进行了如此多的优化，因为添加更多存储需求将过于复杂。

# objective-c - 将 Objective-C 与 C 和代码组织相结合

> ID：11549955
> 
> 赞同：1
> 
> 时间：2012-07-18T20:40:15.623
> 
> 标签：objective-c, c, callback

我正在开发一个使用 fileevent api 监视文件夹的桌面应用程序，所以基本上这是我的代码：

```
#import "PNAppDelegate.h"

void callback(
              ConstFSEventStreamRef streamRef,
              void *clientCallBackInfo,
              size_t numEvents,
              void *eventPaths,
              const FSEventStreamEventFlags eventFlags[],
              const FSEventStreamEventId eventIds[]) 
{
    [(__bridge PNAppDelegate *)clientCallBackInfo reloadStatus];

};

@implementation PNAppDelegate

@synthesize window = _window;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSArray *pathsToWatch = [NSArray arrayWithObject: @"/Users/romainpouclet/Projects/foo"];

    void *appPointer = (__bridge void *)self;
    FSEventStreamContext context = {0, appPointer, NULL, NULL, NULL};

    FSEventStreamRef stream;
    CFAbsoluteTime latency = 3.0;

    stream = FSEventStreamCreate(NULL, 
                                 &callback, 
                                 &context, 
                                 (__bridge CFArrayRef) pathsToWatch, 
                                 kFSEventStreamEventIdSinceNow, 
                                 latency, 
                                 kFSEventStreamCreateFlagNone);

    NSLog(@"Schedule with run loop");
    FSEventStreamScheduleWithRunLoop(stream, CFRunLoopGetMain(), kCFRunLoopDefaultMode);
    FSEventStreamStart(stream);
    [self reloadStatus];
}

-(void)reloadStatus
{

}

@end 
```

没问题，它对于像这个这样简单的 POC 来说效果很好，但是感觉有点难看（而且可能是，我不太习惯混合 Objective-C 和 C）。所以这是我的问题：

*   我应该在哪里声明我的回调？将它放在我的文件顶部感觉很奇怪，只是因为它在那里工作。
*   是否有可能有某种基于@selector 的方法而不是回调？（我觉得他们让人放心：D）

谢谢你的时间 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:48:37.290

为什么不将回调声明放在 PNAppDelegate.h 或它自己的头文件中（如果你不想在你的应用程序中传播它）。这样你就可以只包含头文件并将函数定义放在你想要的任何地方。这样做是标准的 C 功能。

```
// Header file callback.h
void callback(
              ConstFSEventStreamRef streamRef,
              void *clientCallBackInfo,
              size_t numEvents,
              void *eventPaths,
              const FSEventStreamEventFlags eventFlags[],
              const FSEventStreamEventId eventIds[]);

// PNAppDelegate.m
#import "PNAppDelegate.h"
#import "callback.h"

@implementation PNAppDelegate

...

@end

void callback(
              ConstFSEventStreamRef streamRef,
              void *clientCallBackInfo,
              size_t numEvents,
              void *eventPaths,
              const FSEventStreamEventFlags eventFlags[],
              const FSEventStreamEventId eventIds[]) 
{
    [(__bridge PNAppDelegate *)clientCallBackInfo reloadStatus];

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:01:03.180

你是对的，那个代码很丑。但是，桥接 C 和 Obj-C 并[非易事](https://stackoverflow.com/questions/10289890/how-to-write-ios-app-purely-in-c/10290255#10290255)，因此您实际上只有几个选择：

1.  围绕基于 C 的 API 创建一个 Objective-C 包装器。这将是我推荐的方法，尤其是在 API 不太复杂的情况下。它为您提供了使用委托或块而不是函数的优势。

2.  通过获取内部函数指针，使用块进行回调：

    ```
    // internal structure of a block
    struct blockPtr {
        void *__isa;
        int __flags;
        int __reserved;
        void *__FuncPtr;
        void *__descriptor;
    };

    int main()
    {
        @autoreleasepool {
            __block int b = 0;        

            void (^blockReference)(void *) = ^(void *arg) {
                NSLog(@"<%s>: %i", arg, b++);
            };

            void *blockFunc = ((__bridge struct blockPtr *) blockReference)->__FuncPtr;
            void (*castedFunction)(void *, void *) = blockFunc;

            // the first argument to any block funciton is the block 
            // reference itself, similar to how the first argument to
            // any objc function is 'self', however, in most cases you
            // don't need the block reference (unless reading __block variables), it's just difficult to
            // get that first argument from inside the block
            castedFunction((__bridge void *) blockReference, "one");
            castedFunction((__bridge void *) blockReference, "two");
        }
    } 
    ```

    我真的不认为这在大多数情况下是实用的，但如果你能找到一种方法让它发挥作用，你就会更有力量。

3.  坚持你目前的做法。这很糟糕，但这就是 C 的工作方式。

# c++ - C++ baseClass::method 重写虚函数

> ID：11549957
> 
> 赞同：1
> 
> 时间：2012-07-18T20:40:26.237
> 
> 标签：c++, oop

如果我有以下虚拟事件的覆盖：

```
void derivedClass::method(event)
{

   // my stuff

   baseClass::method(event); // <--

} 
```

// <--- 行是做什么的？它叫什么？我不认为它调用基类的方法，因为它是虚拟的（所以没有主体）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:42:43.613

正如您所建议的，它调用基类的方法。它是虚拟的这一事实仅意味着它可以被覆盖并且仍然可以从对基类的指针/引用访问派生类的方法。

通过一个例子可以很容易地看出这样做的原因：

```
class Base {
public:
    virtual void foo() {
        /* do some generic stuff */
    }
};

class Derived : public Base {
public:
    void foo() {
        /* do some specific stuff */

        /* if you also want to do the generic stuff,
           you can call the same method from the base class. */
        Base::foo();
    }
} 
```

可能是您不想为`Derived`类做通用的东西。然后，您只需删除对`Base::foo()`.

在这里，您对[虚拟方法](http://www.parashift.com/c++-faq/virtual-functions.html)有很好的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:43:05.703

它确实调用了基类方法。是的，派生方法被称为“多态”，但它可以使用`Base::method`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:49:21.610

当在类方法调用中使用*限定*名 ( `<class name>::<method name>`) 时，该方法被直接调用，*非虚拟*地调用。在您的示例中，`baseClass::method`称为。由于使用了限定名称，因此该方法是虚拟的这一事实绝对没有任何意义，也没有任何区别。

# c++ - 使用模板别名、继承模板和使用“模板父级”类型时编译错误

> ID：11549958
> 
> 赞同：3
> 
> 时间：2012-07-18T20:40:31.800
> 
> 标签：c++, templates, c++11, gcc4.7, template-aliases

我有一个具有以下要求的数据容器：

*   要快：因此是模板而不是正常的继承
*   使用不同的实现
*   能够使用更多方法扩展这些实现
*   数据是通过模板参数指定的，并且需要能够保存指向数据容器项的指针

我想出的解决方案如下：

```
 template<typename T, template<typename> class container_t>
class data_c
{
public:
    typedef data_c<T, container_t> value_type;
    typedef typename container_t<value_type>::ref container_ref;

    container_ref link;
    T c;
};

template<typename T>
class storage_container_impl
{
public:
    typedef T value_type;
    typedef storage_container_impl<T>* ref;
    T data;
};

template<typename _impl>
class storage_container : public _impl
{
public:
    typedef typename _impl::value_type value_type;
    typedef typename _impl::ref ref;
};

template<typename T>
using impl_storage_container = storage_container<storage_container_impl<T> >;

typedef impl_storage_container<data_c<int, impl_storage_container> > c_storage_container;

int main()
{
    c_storage_container tmp;
    tmp.data.c=5;
    tmp.data.link=&tmp;
    return tmp.data.c;
} 
```

这导致以下错误（gcc 4.7）：

```
test1.cpp:6:48: error: no type named 'ref' in 'impl_storage_container<data_c<int, impl_storage_container> > {aka class storage_container<storage_container_impl<data_c<int, impl_storage_container> > >}' 
```

如果我使用`T *data`而不是`T data`（但我不想要那种间接），或者如果我不使用`storage_container_impl`并且`T data`直接在`storage_container`. 使用`storage_container_impl`mixin-style 也不能解决问题。作为`container_ref`一个指针，也不应该有它不工作的原因，例如因为模板声明中有一个循环。这是问题的最小化版本。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:42:53.883

我知道这不是一个完美的解决方案，但你可以尝试更换

```
typedef impl_storage_container<data_c<int, impl_storage_container> > c_storage_container; 
```

和

```
typedef impl_storage_container<data_c<int, storage_container_impl> > c_storage_container; 
```

它编译并工作。否则你会得到无尽的类型递归。

# c# - 添加到在实体框架投影中创建的集合

> ID：11549960
> 
> 赞同：1
> 
> 时间：2012-07-18T20:40:37.587
> 
> 标签：c#, linq-to-sql, entity-framework-4

我想在使用 EF 检索数据的其他实例的数据库中添加一个新实体。我希望使用如下代码：

```
using (var db = new FundResearchContext(null))
{
    var query = from a in db.As select new 
                {
                    a = a,
                    bs = (from b in db.Bs where b.AnId == a.AnotherId select b)
                };

    var listOfAsAndRelatedBs = query.ToList();
    listOfAsAndRelatedBs[0].bs.Add(new B());
    db.SaveChanges();
} 
```

虽然`bs`跟踪集合中的对象并保存对它们的更改，但我无法将新项目添加到集合中，因为它的类型是`IQueryable`. 我意识到在这样一个简单的情况下，我可以将属性放在 A 和 B 上，以表明它们是通过外键链接的，但这种方法在我的现​​实生活场景中是不可能的。那么是否有另一种语法可以使`bs`自己成为一个被跟踪的对象，我可以向其中添加新`B`对象并使它们持久化？还是我必须手动使用`db.Bs.Add(new B())`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:58:55.013

如果你的`A`班级有一个`Bs`收藏，你可以说：

```
var query = from a in db.As select new 
            {
                a = a,
                bs = a.Bs
            }; 
```

这有一个很好的急切加载效果，因为当这个查询实现时`B`，每个的所有 s 都`A`被加载并附加。并且您应该能够将对象添加到结果之一的`bs`属性或属性中。`a.Bs`

如果您没有在 Entity 类之间建立这种关系，您将无法做到这一点，并且您将无法`db.Bs`直接添加。当然，您可以创建一种快捷方式对象来促进这一点：

```
public class DTO {public A a{get;set;} public IObjectSet<B> allBs {get;set;} }

var list = (from a in db.As 
            select new DTO
            {
                a = a,
            }).ToList();
foreach(var a in list)
{
    a.allBs = db.Bs;
} 
```

这样，您不必直接访问上下文即可将项目添加到`Bs`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:43:39.807

如果您`ToList()`在设置`bs`匿名对象时调用，那么`bs`应该是类型`List<B>`

```
using (var db = new FundResearchContext(null))
{
    var query = from a in db.As select new 
                {
                    // ...
                    bs = (from b in db.Bs 
                          where b.AnId == a.AnotherId 
                          select b)
                         .ToList()
                };
    // ...
} 
```

# c - C - 计算两个矩形之间的面积

> ID：11549966
> 
> 赞同：-2
> 
> 时间：2012-07-18T20:40:53.397
> 
> 标签：c, graphics

我一直在寻找我的问题的解决方案，但没有找到任何我能完全理解的东西，请随时链接到解决方案。

我想计算一个矩形的 x,y 坐标，该矩形是另外两个 2D 普通矩形的交集：

```
 (x0,y0)      
    +------------+
    |            |
    |    (x4,y4) |
    |       +----------+
    |       |    |     |
    +-------|----+     |
            |  (x2,y2) |
            |          |
            +----------+
                     (x5,y5) 
```

基本上我只需要相交矩形的坐标。我将在 C 中实现这一点，但答案可以是伪代码。

谢谢

**编辑：**我正在寻找的是一种算法来找到任何两个二维正常矩形之间的相交矩形，而不是仅针对上面示例的解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:44:42.317

左上角的坐标由下式给出：`(max(x4, x0), max(y4, y0))`。

右下角的坐标由下式给出：`(min(x2, x5), min(y2, y5))`。

如果`max(x4, x0) > min(x2, x5)`或`max(y4,y0) > min(y2, y5)`则没有交集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:46:53.837

觉得这太长了发表评论：你试过用谷歌吗？有很多可用的链接（很多来自stackoverflow）：

[如何获得重叠的矩形坐标](https://stackoverflow.com/questions/3173013/how-to-get-overlapping-rectangle-coordinates)

[什么是找到重叠矩形区域的有效算法](https://stackoverflow.com/questions/244452/what-is-an-efficient-algorithm-to-find-area-of-overlapping-rectangles)

[计算 x/y 网格上两个矩形之间的重叠？](https://stackoverflow.com/questions/2127419/calculate-overlap-between-two-rectangles-on-x-y-grid)

[http://www.leetcode.com/2011/05/determine-if-two-rectangles-overlap.html](http://www.leetcode.com/2011/05/determine-if-two-rectangles-overlap.html)

如果你的 google-fu 很差：

[http://www.google.com/search?q=find+coordinates+for+overlapping+rectangle](http://www.google.com/search?q=find+coordinates+for+overlapping+rectangle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:48:32.630

两个坐标是已知的，因为它们属于每个相交的三角形。

其他两个可以通过两侧的交集算法找到。首先找到相交边的直线方程，然后用它们找到两条直线的交点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-28T11:30:39.193

这是一个相同的Java程序。这里一个矩形由任意两个角点（p1 和 p2）构成。

您可以验证矩形您可以检查它们是否有公共区域矩形

# 您可以获得相交矩形及其区域（Java）。

包 com.prb.problemSolvingSkill；

导入 java.util.Arrays；

公共类矩形{

```
public class Point {
    /*
     * This is a 2D point with coordinate (x,y)
     */
    double x;
    double y;

    Point() {
        this.x = 0;
        this.y = 0;
    }

    Point(double x, double y) {
        this.x = x;
        this.y = y;
    }

    public String show() {
        return "( " + x + " , " + y + " )";
    }

    public boolean isEqual(Point p) {
        return this.x == p.x && this.y == p.y;
    }

}

/**
 * Rectangle is constructed by any two corner points p1 and p2
 */
Point p1, p2;

public Rectangle() {
    this.p1 = new Point();
    this.p2 = new Point();
}

public Rectangle(double x1, double y1, double x2, double y2) {
    this.p1 = new Point(x1, y1);
    this.p2 = new Point(x2, y2);

}

public Rectangle(Point p1, Point p2) {
    this.p1 = p1;
    this.p2 = p2;
}

public void show() {

    System.out.println("---------- " + this + " ------------");
    System.out.println("Point  p1 is : " + p1.show());
    System.out.println("Point  p2 is : " + p2.show());

}

public boolean validate() {

    if (this.p1.x != this.p2.x && this.p1.y != this.p2.y)
        return true;
    else
        return false;
}

public double getArea() {

    double height = Math.abs(p1.y - p2.y);
    double width = Math.abs(p1.x - p2.x);

    return height * width;
}

/**
 * This is like a utility method
 * 
 * @param rect1
 * @param rect2
 * @return
 */
public static Rectangle getIntersectedRectangle(Rectangle rect1,
        Rectangle rect2) {

    if (!hasCommonArea(rect1, rect2))
        return null;

    /*
     * If Common area exists then find Rectangle
     * 
     * Two x-coordinate of intersected rectangle will be middle two
     * x-coordinate of four x-coordinates
     */
    double[] dXArr = new double[] { rect1.p1.x, rect1.p2.x, rect2.p1.x,
            rect2.p2.x };
    double[] dYArr = new double[] { rect1.p1.y, rect1.p2.y, rect2.p1.y,
            rect2.p2.y };

    Arrays.sort(dXArr);
    Arrays.sort(dYArr);

    Rectangle inRect = new Rectangle(dXArr[1], dYArr[1], dXArr[2], dYArr[2]);

    inRect.show();
    return inRect;
}

/**
 * This is like a utility method
 * 
 * @param rect1
 * @param rect2
 * @return
 */
public static boolean hasCommonArea(Rectangle rect1, Rectangle rect2) {

    boolean flag1 = true, flag2 = true;
    if ((Math.min(rect1.p1.x, rect1.p2.x) >= Math.max(rect2.p1.x,
            rect2.p2.x))
            || (Math.max(rect1.p2.x, rect1.p2.x) <= Math.min(rect2.p1.x,
                    rect2.p2.x))) {

        flag1 = false;
    }

    if ((Math.min(rect1.p1.y, rect1.p2.y) >= Math.max(rect2.p1.y,
            rect2.p2.y))
            || (Math.max(rect1.p2.y, rect1.p2.y) <= Math.min(rect2.p1.y,
                    rect2.p2.y))) {

        flag2 = false;
    }

    if (!(flag1 && flag2))
        System.out.println("Common Area doesnot exist");

    // System.out.println("flag1 :x " + flag1 + "  flag2 :y " + flag2);

    return flag1 && flag2;
}

public static void main(String[] args) {
    // TODO Auto-generated method stub

    Rectangle rect1 = new Rectangle(1, 1, 6, 6);
    Rectangle rect2 = new Rectangle(1, 16, 6, 20);

    if (null != getIntersectedRectangle(rect1, rect2))
        System.out.println("Area is : "
                + getIntersectedRectangle(rect1, rect2).getArea()
                + " sq unit");

} 
```

}

# .net - 是否有类似 Ninject 提供程序的 Autofac 提供程序？

> ID：11549967
> 
> 赞同：4
> 
> 时间：2012-07-18T20:40:56.977
> 
> 标签：.net, dependency-injection, ninject, autofac

我有一个问题，Autofac 的提供者是否像 Ninject 的提供者一样？我的意思是，我可以在 Autofac 中使用类似的东西吗？

```
Bind <ISessionFactory> ().ToProvider(new IntegrationTestSessionFactoryProvider()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T18:22:12.653

我正在查看 Ninject 的[Providers 和 Activation Context](http://ninject.codeplex.com/wikipage?title=Providers%20and%20the%20Activation%20Context)，看起来 Providers 是一个接口，用于处理 Autofac 只能使用 lambda 处理的场景。在 Ninject 的例子中，他们有：

```
Bind<IWeapon>().ToProvider(new SwordProvider());

abstract class SimpleProvider<T> {
// Simple implementations of the junk that you don't care about...

    public object Create(IContext context) {
        return CreateInstance(context);
    }

    protected abstract T CreateInstance(IContext context);
}

class SwordProvider : SimpleProvider<Sword> {
    protected override Sword CreateInstance(IContext context) {
        Sword sword = new Sword();
        // Do some complex initialization here.
        return sword;
    }
} 
```

与 Autofac 的委托语法相比，所有这些似乎都是疯狂的矫枉过正：

```
builder.Register(context =>
                      {
                           Sword sword = new Sword();
                           // Do some complex initialization here.
                           return sword;
                      }).As<IWeapon>(); 
```

编辑：如果你的 init 足够复杂以保证它自己的类，你仍然可以这样做：

```
builder.RegisterType<SwordFactory>();
builder.Register(c => c.Resolve<SwordFactory>().Create()).As<IWeapon>();

// this class can be part of your model
public class SwordFactory
{
    public Sword Create()
    {
        Sword sword = new Sword();
        // Do some complex initialization here.
        return sword;
    }
} 
```

这样做的好处是您仍然与您的 DI 框架分离。

# c - 为什么我的代码不输出到文本文件

> ID：11549969
> 
> 赞同：1
> 
> 时间：2012-07-18T20:41:05.813
> 
> 标签：c

我编写了以下程序，当您从 IDE 运行它时运行良好。但是，当我想通过从`inp.txt`文件中获取输入并输出到`out.txt`文件来测试它时，它不会这样做。

* * *

```
#include <stdio.h>
#include <stdlib.h>

struct node
{
  int data;
  struct node *next;
}*start;

void insertatend(int d)
{
  struct node *n;
  n=(struct node *)malloc(sizeof(struct node));
  n->data=d;
  n->next=NULL;

  if(start==NULL)
  {
    start=n;
  }

  else
  {
    struct node *tmp;
    for(tmp=start;tmp->next!=NULL;tmp=tmp->next);
    tmp->next=n;
  }
}

int max(int  a,int b)
{
  int c=(a>b)?a:b;
  return c;
}

int maxCoins(int n)
{
  int arr[n+1],i;
  arr[0]=0;
  arr[1]=1;
  arr[2]=2;
  arr[3]=3;

  if(n>2)
  {

    for(i=3;i<=n;i++)
    {
      int k= arr[(int)(i/2)]+arr[(int)(i/3)]+arr[(int)(i/4)];
      arr[i]=max(i,k);
    }
  }

  return arr[n];
}

int main(void)
{
  int coins,i;
  start=NULL;
  struct node*p;

  while(scanf("%d",&coins)>0)
  {
    insertatend(coins);
  }

  for(p=start;p!=NULL;p=p->next)
  {
    printf("%d\n",maxCoins(p->data));
  }

  getchar();

  return 0;
} 
```

* * *

我尝试在命令提示符下执行以下操作`ByteTest.exe<inp.txt>out.txt`，但未对文件进行任何更改`out.txt`。

我通过输入来终止程序的输入`CTRL+Z`。这和这个有关系吗？

* * *

例如，`inp.txt and out.txt`可能包含

* * *

```
inp.txt      out.txt

12             13
24             27
26             27 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:08:10.280

你的问题可能是：

```
while(scanf("%d",&coins)>0) 
```

这将返回字符数。您在这里检查的不是硬币的价值，而是输入字符串的长度。

# websphere - IBM Websphere Commerce 管理中心：有谁知道为什么产品会随机改变可见性状态以及如何防止它？

> ID：11549972
> 
> 赞同：0
> 
> 时间：2012-07-18T20:41:14.803
> 
> 标签：websphere, visibility, commerce, websphere-commerce

我注意到随机项目往往会在不应该出现在网站上时出现。未检查可见性框，但由于某种原因，它会随机更改其状态。有谁知道这个问题可能是什么原因以及如何防止它发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:39:31.723

也许您的产品有“公告日期”。

您可以检查：

> *   编辑产品
> *   转到“管理产品”选项卡。
> *   部署“发布”菜单
> *   检查“公告日期”的日期。

如果日期是明天，您的产品应该在明天发布。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:48:34.973

我会向 IBM 软件支持提交 PMR。他们会要求您启用目录日志，它会告诉您原因。我认为@Dekx 做对了，但也有一些营销规则可能会改变物品的位置。

# .htaccess - 如果引用者不是当前域名，则重定向 url

> ID：11549973
> 
> 赞同：1
> 
> 时间：2012-07-18T20:41:16.867
> 
> 标签：.htaccess, redirect, referrer

如果任何用户尝试通过 url 访问成员区域，我正在尝试重定向到另一个页面。

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_REFERER} ^http(s)?://(www\.)?(?!test\.jason\.ca) [NC]
Rewriterule ^ http://test\.jason\.ca [R,L] 
```

因此，如果他们尝试访问任何 url 而没有引用者是域名，我希望它能够将他们踢到主页。我知道我做错了，但我还不知道是什么。有任何想法吗？

编辑：所以它显然与我在上面发布的内容不完全一样。我忘了包括这部分，但这正是我的 .htaccess 中的内容：

```
php_value upload_max_filesize 1024M
php_value post_max_size 20M
php_value max_execution_time 200
php_value max_input_time 200
AddType text/x-component .htc

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
RewriteCond %{HTTP_REFERER} ^http(s)?://(www\.)?(?!test\.jason\.ca) [NC]
Rewriterule ^ http://test\.jason\.ca [R,L] 
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:32:59.087

您需要将引用规则放在 wordpress 规则之上：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_REFERER} ^http(s)?://(www\.)?(?!test\.jason\.ca) [NC]
Rewriterule ^ http://test\.jason\.ca [R,L] 

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

# drupal - 如何根据用户角色创建程序化内容（Drupal）

> ID：11549982
> 
> 赞同：0
> 
> 时间：2012-07-18T20:41:53.123
> 
> 标签：drupal

因此，我希望根据该用户的其他用户角色，在用户角色的欢迎页面上出现一个特定链接（由规则引导）。每个用户可能有多个这样的链接。

例如：

假设用户 Bob 具有经理、植物学培训师和驯狮师的用户角色。他的经理用户角色会将他引导到经理欢迎页面（已经完成），但是，根据他的用户角色，经理欢迎页面还将包含指向植物学培训页面和驯狮页面的链接。

我该怎么做呢？我也会为此使用规则模块吗？

这是在 Drupal 6 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:37:31.460

一些想法供您开始。如果您使用 Panels/Ctools 模块，您可以使用访问规则仅向特定角色显示特定内容。这不需要任何 php 代码，所以我认为这是最好的方法，即使您知道如何在 php 中执行此操作。

当前用户的数据可用作全局变量 $user。

```
<?php
global $user;
if(in_array('manager', $user->roles)) {
     print 'my stuff' // print the module you want to display. Usually module_invoke() or some function call.
} elseif(in_array('trainer', $user->roles)) {
     print ''// stuff for users with the trainer role.  
}
?> 
```

此外，通过核心功能，您可以按角色向特定用户显示块。转到配置块的链接并设置可见性。请注意，如果您使用 php 打印块，则不会运行检查。所以全php或全UI。

如果块是视图，您可以在视图 UI 中设置访问权限。

[user_access()](http://api.drupal.org/api/drupal/modules!user!user.module/function/user_access/6)函数是我个人最喜欢在这种情况下显示块的方法。它使您可以放置​​几乎独立于角色的块。如果用户有权限，显示它。无需假设特定角色具有此权限。

此外，除非您被模块覆盖，否则如果用户无权访问该页面，则不会出现块。例如，在没有访问限制的 node/*/edit 页面上显示节点编辑指令块是安全的（在这种情况下使用块是非常愚蠢的，因为您可以输入提交指令 - 仅用于示例）。必须允许用户访问该页面才能显示块。

# java - 在距离为 10 的圆内画一个圆

> ID：11549984
> 
> 赞同：0
> 
> 时间：2012-07-18T20:42:06.543
> 
> 标签：java, android, android-canvas

我最近开始使用 Android，我需要在 Circle 内绘制一个 Circle，就像下图一样，距离 10不需要照片上当前存在的任何图标。只是具有两个直径的圆内的圆。

![在此处输入图像描述](../Images/0620488e0dc8372bbd3f4709082e5f05.png)

我只想画圆圈和两个直径，而不是圆圈上的图标。任何建议将不胜感激。

**更新：-**

我写了下面的代码，但它只画了一个圆圈。我需要像上图那样画——

```
public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(demoview);
        }

        private class DemoView extends View{
            public DemoView(Context context){
                super(context);
            }

            @Override
            protected void onDraw(Canvas canvas) {
                super.onDraw(canvas);
                Paint p = new Paint();
                p.setColor(Color.RED);
                DashPathEffect dashPath = new DashPathEffect(new float[]{5,5}, (float)1.0);

                p.setPathEffect(dashPath);
                p.setStyle(Style.STROKE);
                canvas.drawCircle(100, 100, 50, p);

                invalidate();
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:47:35.193

尝试：

```
protected void onDraw(Canvas canvas) {
            super.onDraw(canvas);
            Paint p = new Paint();
            p.setColor(Color.RED);
            DashPathEffect dashPath = new DashPathEffect(new float[]{5,5}, (float)1.0);

            p.setPathEffect(dashPath);
            p.setStyle(Style.STROKE);

            for (int i = 0; i < 7; i ++) {
                canvas.drawCircle(100, 100, 50+(i*10), p);
            }

            invalidate();
        } 
```

# javascript - 创建我自己的滑块

> ID：11549992
> 
> 赞同：0
> 
> 时间：2012-07-18T20:42:31.473
> 
> 标签：javascript, jquery, slider

这更像是为我自己和我自己做的功课。

它会很有用，我需要练习，所以我想知道如何使用 javascript（主要是 jquery）创建一个有效的滑块

jsFiddle：http: [//jsfiddle.net/htArE/](http://jsfiddle.net/htArE/)

我有 3 个 div，我试图一次只放一个带红色边框的：

这是我到目前为止所得到的：

```
<div id="slidez0" class="active">slider 1</div>
<div id="slidez1" class="inactive">slide 2</div>
<div id="slidez2" class="inactive">slide 3</div>​

setInterval(slider(), 2000);

function slider(){
    for (i=0; i<3; i++){
        if($('#slidez'+i).hasClass('1')){
               $('#slidez'+i).css('border','solid 1px red');
               $('#slidez1').css('border','solid 1px white');
               $('#slidez2').css('border','solid 1px white');
        }else if($('#slidez'+i).hasClass('2')){
               $('#slidez'+i).css('border','solid 1px red');
               $('#slidez0').css('border','solid 1px white');
               $('#slidez2').css('border','solid 1px white');
        }else if($('#slidez'+i).hasClass('3')){
               $('#slidez'+i).css('border','solid 1px red');
               $('#slidez0').css('border','solid 1px white');
               $('#slidez1').css('border','solid 1px white');
        }
        break;
    }
} 
```

jsFiddle：http: [//jsfiddle.net/htArE/](http://jsfiddle.net/htArE/)

实际上，我不知道在功能滑块中做什么，我有三个滑块，所以它们会像这样交替类（1 表示活动，0 表示非活动）：

```
1 0 0  - first slider active;
0 1 0  - after setInterval, second slider active, first inactive;
0 0 1  - after another setInterval, third slider active, first and second inactive;

1 0 0  - Restart slider, first slider active, other inactive; 
```

​如果您对我的问题有不明白的地方，请在下方评论，以便我进行编辑。

非常感谢你！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:48:19.113

如果您使用 jQuery，则应将其设置为 jQuery 插件。遵循[本教程](http://net.tutsplus.com/articles/news/how-to-build-a-simple-content-slider-jquery-plugin/)，他们遵循良好的做法。

[http://net.tutsplus.com/articles/news/how-to-build-a-simple-content-slider-jquery-plugin/](http://net.tutsplus.com/articles/news/how-to-build-a-simple-content-slider-jquery-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:24:55.763

您可以在以下位置看到解决方案：http: [//jsfiddle.net/htArE/4/](http://jsfiddle.net/htArE/4/)

javascript...

```
var slide = $('.slide'),
    count = 0,
    max_count = slide.length - 1,

    slideIt = function slideIt() {
        slide.removeClass('selected').eq(count).addClass('selected');
        count = ++count > max_count ? 0 : count;
        setTimeout(slideIt, 2000);
    };

    slideIt(); 
```

...对于html ...

```
<div class="slide selected">slide 1</div>
<div class="slide">slide 2</div>
<div class="slide">slide 3</div> 
```

...和CSS ...

```
.slide {
    float: left;
    width: 50px;
    height: 20px;
    border: 1px solid transparent;
}

.selected {
    border: 1px solid red;
} 
```

**在旁边**

由于一些奇怪的原因，我花了太长时间来编写代码的解释，所以我放弃了。我将在下面发布它的简化版本，希望你能这样理解。

# android - 在 Android 中解析 Google Places JSON 数据？

> ID：11549993
> 
> 赞同：1
> 
> 时间：2012-07-18T20:42:36.267
> 
> 标签：android, json, google-places-api

我正在尝试在 Android 中解析 Google Places JSON 数据。我知道我传递的 URL 有效（但我从下面的代码中取出了我的密钥）。我可以让 JSON 数据显示在 TextView 中，但现在我想解析它并获取（此时）要显示的第一个项目的名称。我修改了一个解析 twitter 提要的教程，该 tittwr 教程正确显示，但我修改后的代码什么也没显示。它不会崩溃，我也没有收到任何错误，所以我不知道出了什么问题。所以这是我的代码：

```
 public class GetPort extends Activity {

TextView showJSdata;
HttpClient client;
JSONObject json;

final static String pURL = "https://maps.googleapis.com/maps/api/place/search/json? location=30.487263,-97.970799&radius=25000&types=airport&sensor=false&key=MY_KEY";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mn_test3);
    showJSdata = (TextView)findViewById(R.id.http_tv);
    client = new DefaultHttpClient();
    new ReadURL().execute("name");
}

public JSONObject showPorts() 
throws ClientProtocolException, IOException, JSONException{

    StringBuilder portURL = new StringBuilder(pURL);        
    HttpGet get = new HttpGet(portURL.toString());
    HttpResponse r = client.execute(get);
    int status = r.getStatusLine().getStatusCode();
    if(status == 200){
        HttpEntity e = r.getEntity();
        String data = EntityUtils.toString(e);
        JSONArray timeline = new JSONArray(data);
        JSONObject lastport = timeline.getJSONObject(0);
        return lastport;
    }else{
        Toast.makeText(GetPort.this, "oops", Toast.LENGTH_SHORT);
        return null;
    }

}

public class ReadURL extends AsyncTask<String, Integer, String>{

    @Override
    protected void onPostExecute(String result) {
        showJSdata.setText(result);
    }

    @Override
    protected String doInBackground(String... params) {
        try {
            json = showPorts();
            return json.getString(params[0]);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

}

} 
```

谁能看到代码失败的地方，或者我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:10:02.747

好吧，我稍微更改了您的代码并得到以下结果：

```
Cedar Park Regional Medical Center 
```

如果这是它应该给出的，代码是这样的：

```
if(status == 200){
    HttpEntity e = r.getEntity();
    String data = EntityUtils.toString(e);
    JSONObject jsonObject = new JSONObject(data);
    JSONArray timeline = jsonObject.getJSONArray("results");
    JSONObject lastport = timeline.getJSONObject(0);
    return lastport;
} 
```

您可以通过将其粘贴到浏览器的地址行来查看整个输出。`json?`另请注意，您在 url 部分之后有一个空格。您需要首先从数据中创建一个对象，然后对其进行解析。将数组名称作为`results` 然后获取其中的任何对象，并获取其字符串。

此外，当我运行您的代码（使用我的 API 密钥）时，我确实收到了错误，不是导致您的应用程序崩溃的致命错误，而是解析 JSON 时出现的错误（在 logcat 中显示为橙色）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T21:01:06.880

我很惊讶你没有收到任何错误。

从这个[文档](https://developers.google.com/places/documentation/#horzTab)来看，JSON 响应应该是一个对象，而不是一个数组。您不能只使用解析 twitter 响应的代码并将其应用于不同的格式。

我手头没有 google api 密钥，你能提供一个你得到的数据的例子吗？如果它与文档匹配，那么您需要这样的东西：

```
JSONObject responseOb = new JSONObject(data);
JSONArray results = responseOb.getJSONArray("results");
String firstAddress = results.getJSONObject(0).getString("formatted_address"); 
```

# asp.net-mvc-3 - 从自定义数据源填充 ContentHandler 中的 ContentPart

> ID：11549998
> 
> 赞同：1
> 
> 时间：2012-07-18T20:42:58.160
> 
> 标签：asp.net-mvc-3, content-management-system, orchardcms

我们有一个使用 RavenDB 的现有应用程序，并希望创建一个自定义 Orchard 管理模块，该模块可以将数据读取和写入 Raven，以便我们可以管理数据。理想情况下，该实现将允许我们使用 ContentParts，以便我们可以创建可重用的“模块”。

有几个关于通过在 ContentHandler 中加载数据来从 Web 服务访问数据的参考资料，但我还没有想出一个实现。我已经能够使用控制器/视图读取/写入数据，但这似乎更具限制性。

[使用 RavenDB 作为 Orchard CMS 模块的数据库](https://stackoverflow.com/questions/8867704/use-ravendb-as-the-database-for-an-orchard-cms-module)

[如何更改果园记录库](https://stackoverflow.com/questions/4727843/how-to-change-orchard-record-repository/5086069#5086069)

此外，我们需要管理的属性之一是图像。我们想利用媒体选择器字段在我们的管理界面中选择图像。只要我们可以通过浏览器访问图像，Orchard 存储物理图像就可以了。

谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:28:26.723

如果您正在使用 Orchard 内容项目，则`Id`它已经存在 - 无需存储新的。您需要使用一些标识符来绑定 Orchard 和后端存储，否则您必须重新实现整个 Orchard 数据层（这是一种矫枉过正）。

你只需要：

*   创建一个派生自`ContentPart`（不是`ContentPart<T>`，因为您不希望它存储在 Orchard 数据库中）的部分。然后，
*   为您的部分添加一个处理程序，连接到适当的生命周期事件（如`OnLoading`）并从后端为给定的内容项 id 和部分类型组合加载数据。
*   为您添加一个驱动程序（像往常一样）并将您的数据存储逻辑放入`Editor`方法中。

这样，您将拥有一个没有任何数据存储在 Orchard 数据库中的零件，完全从外部源加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T11:51:20.747

*如果*您希望能够使用 Orchard 部件（评论、评级等）丰富外部数据，您应该构建一个部件，就像 Piotr 解释的那样。这意味着以某种方式为所有远程对象创建内容项，这将带来其自身的挑战（这意味着同步不同的数据源，这永远不会有趣）。

如果您不需要这样做，那么您应该构建控制器操作（可能还有小部件）来显示该数据。即使您这样做，您仍然可以从 Orchard 的许多事情中受益，例如主题化。