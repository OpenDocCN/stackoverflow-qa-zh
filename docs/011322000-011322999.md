# StackOverflow 问答 11322000-11322999

# sql-server - Visual Studio 报表设计器：如何在报表的每一页上打印一些内容？

> ID：11322001
> 
> 赞同：4
> 
> 时间：2012-07-04T03:17:52.510
> 
> 标签：sql-server, reporting-services, report-designer

我在 Visual Studio 报表设计器中有一个打印合同的报表。我希望它在每一页的背面都有某些条款和条件。我怎样才能在每一页上打印一些东西（然后我会双面打印）？我试过把它放在页眉\页脚中（它只是被切断了），我试过用页码控制它在报告正文中的可见性（但你不能使用全局页码报告正文中的变量）。我怎样才能让报告做我想做的事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:08:02.207

唉，正如您已经提到的：您[无法访问报告正文中的页码](http://connect.microsoft.com/SQLServer/feedback/details/425893/global-page-number-value-to-be-accessed-from-body-section-in-ssrs-2008)。我认为您的要求无法满足，我知道没有真正的解决方法。到目前为止，我可以看到的唯一替代方案（您可能已经考虑过），从坏到逐渐变坏：

*   将注释完全打印在页眉或页脚中
*   在每一页上打印
*   对呈现的报告（PDF？）进行后处理，然后添加
*   做两次报告。每页上一次有通知，一次没有。进行自己的“双面打印”：从文档中打印奇数页，然后将纸张放回打印机中，然后打印偶数页。

（就像我说的，变通办法从上到下越来越差：D）

在极端情况下，您确切地知道什么内容最终出现在哪个页码上，您可以将可见性表达式链接到该内容。

# .htaccess - 我已经尝试了几天来获得正确的 htaccess 移动重定向编码

> ID：11322002
> 
> 赞同：1
> 
> 时间：2012-07-04T03:17:53.463
> 
> 标签：.htaccess, redirect, mobile

我已经测试了数百种不同的代码，它们要么工作，要么搞砸了别的东西，要么根本不工作。这听起来很懒，但我真的尝试了数百种组合。

我有我想要重定向到我的“移动”子域（检测移动代理）的主域，以及我拥有的 .html 页面文件夹。两个目录都匹配文件名。

对我有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:31:45.400

这是一个网站，其中包含有关如何根据浏览器的用户代理字符串进行重定向的信息：

[http://www.howtoforge.com/apache2-how-to-redirect-users-to-mobile-or-normal-web-site-based-on-device-using-mod_rewrite](http://www.howtoforge.com/apache2-how-to-redirect-users-to-mobile-or-normal-web-site-based-on-device-using-mod_rewrite)

您的 .htaccess 应该如下所示：

```
RewriteEngine On

# Check if this is the noredirect query string
RewriteCond %{QUERY_STRING} (^|&)noredirect=true(&|$)
# Set a cookie, and skip the next rule
RewriteRule ^ - [CO=mredir:0:%{HTTP_HOST},S]

# Check if this looks like a mobile device
# (You could add another [OR] to the second one and add in what you
#  had to check, but I believe most mobile devices should send at
#  least one of these headers)
RewriteCond %{HTTP:x-wap-profile} !^$ [OR]
RewriteCond %{HTTP:Profile}       !^$
# Check if we're not already on the mobile site
RewriteCond %{HTTP_HOST}          !^mobile\.
# Check to make sure we haven't set the cookie before
RewriteCond %{HTTP:Cookie}        !\smredir=0(;|$)
# Now redirect to the mobile site
RewriteRule ^ http://mobile.jguffphotography.com/%{REQUEST_URI} [R,L] 
```

**确保更新到上面的最新代码。**

我已经更新了上面的所有代码以反映应该是什么样子。

# case - 如何在计算中使用 case 语句的结果

> ID：11322004
> 
> 赞同：1
> 
> 时间：2012-07-04T03:18:25.687
> 
> 标签：case

我有一个返回日期的案例语句；

```
case when (ma.first_active_date is not null or ma.first_deemed_date is not null)
             then (least(nvl(ma.first_active_date,sysdate),nvl(ma.first_deemed_date,sysdate)))
             else (ma.status_date) end djf 
```

然后我如何计算返回日期和 sysdate 之间的年数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:23:07.920

当然，您应该能够简单地将 case 语句插入到表达式中，而无需`djf`别名：

```
((case when (ma.first_active_date is not null or ma.first_deemed_date is not null)
             then (least(nvl(ma.first_active_date,sysdate),nvl(ma.first_deemed_date,sysdate)))
             else (ma.status_date) end) - sysdate) diff_from_sysdate 
```

# c# - 在加载其他部分后加载页面的部分部分

> ID：11322017
> 
> 赞同：0
> 
> 时间：2012-07-04T03:20:10.200
> 
> 标签：c#, asp.net, ajax

我有一个`Asp.Net`页面。

```
<html>
<body>
 <div>
    <!-- Main body -->
 </div>
 <div>
    <!-- Right panel -->
 </div>
</body>
</html> 
```

上面的页面是`html`页面。

但它实际上在`Asp.Net`

对于主页面，后面会有代码填充正常内容并加载页面的内容。

但是对于右侧面板，逻辑相当复杂，需要一些时间才能得到显示内容的结果。

所以，我想只在主页完成加载后加载页面的那一部分。

我已经尝试过`Asp.Net AJAX`使用`update panel`，但我还没有找到完成这项工作的正确行为。

所以，我正在考虑使用正常`ajax`，但我不知道从哪里开始。

所以，我问有什么办法可以做到这一点，并且..任何可用的示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:46:47.283

您可以尝试任何 javascript 框架。

如果你使用 jQuery，你可以尝试：

Set an id on your div:

```
<div id="right-panel"> 
```

Then use this jQuery to load the data for the panel:

```
$().ready(function() { $('#right-panel').load('http://path/to/your/script') } ); 
```

See the jQuery docs for more info.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:29:33.073

嗯……“普通的 AJAX”？Microsoft AJAX 是“普通 AJAX”。更新面板执行异步回发，这与使用 WebMethod 非常不同 - 这可能是您想要的。您仍然可以使用 Microsoft AJAX 调用 WebMethod。事实上，Microsoft AJAX 控件工具包有一个扩展器，可让您插入 WebMethod 调用。它被称为[DynamicPopulateExtender](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/DynamicPopulate/DynamicPopulate.aspx)。

> DynamicPopulate 是一个简单的扩展器，它用 Web 服务或页面方法调用的结果替换控件的内容。该方法调用返回一个 HTML 字符串，该字符串作为目标元素的子元素插入。

```
<ajaxToolkit:DynamicPopulateExtender ID="dp" runat="server"
    TargetControlID="Panel1" 
    ClearContentsDuringUpdate="true" 
    PopulateTriggerControlID="Label1" 
    ServiceMethod="GetHtml" 
    UpdatingCssClass="dynamicPopulate_Updating" /> 
```

要使其在“页面加载”上运行，只需在 ScriptManager 标记之后添加此脚本：

```
<script type="text/javascript"> 
    var prm = Sys.WebForms.PageRequestManager.getInstance(); 
    prm.add_pageLoaded(PageLoadedHandler); 

    function PageLoadedHandler(sender, args) { 
        var behavior = $find('dp'); // or whatever you named it
        if (behavior) { 
            behavior.populate(''); // or pass in whatever key you want
        } 
     } 
</script> 
```

# java - Java源代码依赖图

> ID：11322018
> 
> 赞同：1
> 
> 时间：2012-07-04T03:20:13.913
> 
> 标签：java, programming-languages, module, dependencies

好吧，首先，这可能是愚蠢和疯狂的。

我正在尝试构建（或使用，如果已经存在的话）一个框架，它接收许多 Java 源文件并输出这些文件交互的方式；例如，file1.java 可以*导入*file2.java；file2.java 可以从 file3.java 调用*静态*方法。如果可以在不编译或运行文件集的情况下完成此操作，那将是理想的选择。我知道反射 API 允许我探索类的各个部分，但那是我正在寻找的吗？

此外，这很难扩展到其他语言，例如 Python 或 Lisp（在此处添加任何其他语言）？

我不太确定如何构建问题标题，所以如果以前有人问过这样的问题，如果你能将我链接到那个问题，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:35:19.117

我目前正在做一个项目，主要功能与您提到的非常相似，我使用javaparser：[http ://code.google.com/p/javaparser/](http://code.google.com/p/javaparser/)

javaparser 非常强大，它可以在源代码分析中帮助我们很多，但是即使我使用 javaparser 也很难获得完整的依赖关系和类交互。

例如：如果你想获取一个类的所有依赖，最直接的方法是获取源代码的“导入”区域——这很容易使用javaparser。

但是只有“导入”是不够的，如果你当前正在分析的类-ClassA-称为类-ClassB-与ClassA在同一个包中，那么ClassB就不会出现在导入区。

所以在这种情况下，我们无法获得 ClassB 依赖。

而对于类的交互，如果你不能100%得到一个类的正确依赖，那么你就不能100%知道类之间的正确交互。

但无论如何，到目前为止，javaparser 是我能找到的最强大和最有用的 java 源代码分析工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T04:45:07.943

你问了两个问题，我将尝试解决第一个问题。我相信您正在对 java 文件进行某种源代码分析，以了解它们如何相互交互（至少这是我所理解的）所以基本上要做到这一点，您必须有点像 Eclipse IDE 的行为。扫描每个.java文件中的源代码，构建java保留字和构造的数据结构。分析完每个 .java 文件后，您就可以继续发现它们之间的链接。

前任。

1.  存储类的包名及其名称和作用域
2.  存储所有已声明变量、它们的值和范围的 HashMap
3.  发现源文件中的方法并存储它们的名称、in + out 参数和范围

您还可以做更多事情，要检测这些结构，您必须编写自己的（或在网上找到一些东西）解析器并使用正则表达式来检测这些。您将它们存储在您的程序中，然后一旦分析了所有源文件，您就可以开始查看交互。

前任。

源文件 1 在包 xy 中，有 3 个公共方法和 2 个包范围方法。源文件 2 在包 z 中，有 1 个公共方法和 3 个私有方法。

因此，您可以得出结论，文件 1 可以通过调用该 1 公共方法与文件 2 进行交互。您可以对所有文件进行相同的分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T17:04:24.583

我知道您说过您宁愿不进行编译，但是查看类文件会容易得多。在字节码和常量池之间，你可以得到你需要的一切，而无需基本上重写 javac。使用 Apache BCEL，您基本上就在那里。显然，没有任何工具能够找到通过反射访问的依赖项；为此，您需要使用自定义类加载器或其他东西进行运行时分析。

[https://en.wikipedia.org/wiki/Java_class_file](https://en.wikipedia.org/wiki/Java_class_file) [http://commons.apache.org/proper/commons-bcel/](http://commons.apache.org/proper/commons-bcel/)

# sqlite - SQLite 部署失败无法找到 system.data.sqlite.dll vb.net

> ID：11322019
> 
> 赞同：0
> 
> 时间：2012-07-04T03:20:30.047
> 
> 标签：sqlite, vb.net-2010

希望我能正确地做到这一点。

我有上述问题。我的开发机器是win7 64。我正在开发x86应用程序，（x86在编译选项中设置）。我已经下载了 sqlite-netFx40-setup-bundle-x86-2010-1.0.81.0，因为我的应用程序将在 .net4 上。我已经引用了上面的dll，将其设置为复制本地。可以确认其在已部署的目录中。作为调试和完全安装的应用程序在开发机器上测试正常。当我将应用程序放在单独的 win 7 64bit 上时，由于 Dll，它不会运行。它可以安装到 ProgramFiles(x86) 中并运行直到需要数据库。当安装在另一台 PC 上时，该 dll 位于安装目录中。（新的胜利安装）。

我正在使用 InstalShield，它还告诉我一个错误“-6248：找不到依赖文件 system.data.sqlite.dll，或其组件的依赖项之一”，但它编译正常。

我正在研究程序中的 Dll，在参考资料中，智能获取 SQLite 名称并且所有代码都是正确的。我已经通过浏览引用，然后找到了 dll。

我到底做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T21:15:18.987

这有很多意见，我决定回答这个以帮助其他人。一旦您知道问题是什么，问题就不是什么大问题了，尽管错误消息几乎会将您发送到错误的方向。问题不是 DLL，而是它的依赖项之一。基本上你必须在客户端机器上安装 C++ 可分发文件，即使你使用的是 VB.net。我不能把这个发现归功于它，它来自这里[http://justanothersoftwareengineer.blogspot.com.au/2011/08/how-to-make-systemdatasqlitedll-work-on.html](http://justanothersoftwareengineer.blogspot.com.au/2011/08/how-to-make-systemdatasqlitedll-work-on.html)。

# c - 如何检查已完成的 gzip 文件？

> ID：11322024
> 
> 赞同：4
> 
> 时间：2012-07-04T03:21:14.567
> 
> 标签：c, linux, gzip

我正在用 C 语言编写一个获取 .tar.gz 数据传输的函数，当我得到数据时，我应该检查传输是否完成以及数据是否有效，所以关于检查 gzip 数据完整性的任何提示?

问候

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T03:49:39.613

`gunzip -t`检查压缩文件的完整性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:27:22.630

如果您只是下载一个 tarball，那么您可以在另一端对其进行 md5sum 然后检查。

# ios - iOS - CoreImage - 为部分图像添加效果

> ID：11322027
> 
> 赞同：5
> 
> 时间：2012-07-04T03:22:20.257
> 
> 标签：ios, image-processing, core-graphics, avfoundation, core-image

我只是在 iOS 5 上查看了 CoreImage 框架，发现为整个图像添加效果很容易。我想知道是否可以在图像的特殊部分（矩形）上添加效果。例如在部分图像上添加灰度效果/

我期待着你的帮助。

谢谢，胡伊

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T12:01:30.097

观看 WWDC 2012 视频中的会话 510。他们展示了一种如何将遮罩应用到`CIImage`. 您需要学习如何将过滤器链接在一起。特别看一下：

*   `CICrop`, `CILinearGradient`, `CIRadialGradient`（可用于创建蒙版）
*   `CISourceOverCompositing`（将蒙版图像放在一起）
*   `CIBlendWithMask`（创建最终图像）

![示例：像素化面](../Images/421492df4b4a443638659b85103b363c.png)

过滤器记录在这里：

[https://developer.apple.com/library/archive/documentation/GraphicsImaging/Reference/CoreImageFilterReference/index.html](https://developer.apple.com/library/archive/documentation/GraphicsImaging/Reference/CoreImageFilterReference/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:28:38.270

你最好的选择是复制 CIImage（所以你现在有两个），将复制的 CIImage 裁剪为你想要效果的矩形，在裁剪后的版本上执行效果，然后使用覆盖效果创建一个新的 CIImage 基于两个较旧的 CIImage。

这似乎需要付出很多努力，但是当您了解所有这些都被设置为一堆 GPU 着色器时，它就更有意义了。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-04T04:12:00.667

```
 typedef enum {
   ALPHA = 0,
   BLUE = 1,
   GREEN = 2,
  RED = 3 
```

} 像素;

```
- (UIImage *)convertToGrayscale:(UIImage *) originalImage inRect: (CGRect) rect{
       CGSize size = [originalImage size];
   int width = size.width;
  int height = size.height;

// the pixels will be painted to this array
uint32_t *pixels = (uint32_t *) malloc(width * height * sizeof(uint32_t));

// clear the pixels so any transparency is preserved
memset(pixels, 0, width * height * sizeof(uint32_t));

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

// create a context with RGBA pixels
CGContextRef context = CGBitmapContextCreate(pixels, width, height, 8, width * sizeof(uint32_t), colorSpace, 
                                             kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedLast);

// paint the bitmap to our context which will fill in the pixels array
CGContextDrawImage(context, CGRectMake(0, 0, width, height), [originalImage CGImage]);

for(int y = 0; y < height; y++) {
    for(int x = 0; x < width; x++) {
        uint8_t *rgbaPixel = (uint8_t *) &pixels[y * width + x];

        if(x > rect.origin.x && y > rect.origin.y && x < rect.origin.x + rect.size.width && y < rect.origin.y + rect.size.height) {

            // convert to grayscale using recommended method: http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale

            uint32_t gray = 0.3 * rgbaPixel[RED] + 0.59 * rgbaPixel[GREEN] + 0.11 * rgbaPixel[BLUE];

            // set the pixels to gray in your rect

            rgbaPixel[RED] = gray;
            rgbaPixel[GREEN] = gray;
            rgbaPixel[BLUE] = gray;
          }
    }
}

// create a new CGImageRef from our context with the modified pixels
CGImageRef image = CGBitmapContextCreateImage(context);

// we're done with the context, color space, and pixels
CGContextRelease(context);
CGColorSpaceRelease(colorSpace);
free(pixels);

// make a new UIImage to return
UIImage *resultUIImage = [UIImage imageWithCGImage:image];

// we're done with image now too
CGImageRelease(image);

return resultUIImage; 
```

}

您可以在 UIImageView 中对其进行测试：

```
 imageview.image = [self convertToGrayscale:imageview.image inRect:CGRectMake(50, 50, 100, 100)]; 
```

# cordova - android意图调用而不询问

> ID：11322028
> 
> 赞同：0
> 
> 时间：2012-07-04T03:22:34.200
> 
> 标签：cordova, android-intent, zxing, barcode-scanner

我的 phonegap 应用程序使用 zxing 条码扫描器。我还从 zxing 安装了一个演示应用程序（barcodescanner）。现在，在我的 phonegap 应用程序中，当我调用条形码扫描仪时，android 会询问我选择哪个应用程序来执行此操作（我的应用程序和 zxing 条形码扫描仪）。如何避免这种情况？我不希望 android 像这样询问我的用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:45:54.270

您可以调用您发送`setPackage()`的`Intent`内容以将其定向到仅一个可能的应用程序。在这里，您将设置为`"com.google.zxing.client.android"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:41:50.007

如果您没有更改任何代码，默认情况下 Zxing 会按照以下意图进行注册。

```
<action android:name="com.phonegap.plugins.barcodescanner.SCAN" /> 
```

您可以通过执行以下更改来更改它以使其更具体到您的应用程序。

```
// in BarcodeScanner.java plugin file

public void scan() {
    // changed to custom intent
    Intent intentScan = new Intent("com.dhaval.phonegap.plugins.barcodescanner.SCAN");
    intentScan.addCategory(Intent.CATEGORY_DEFAULT);

    this.ctx.startActivityForResult((Plugin) this, intentScan, REQUEST_CODE);
}

public void encode(String type, String data) {
    // changed to custom intent
    Intent intentEncode = new Intent("com.dhaval.phonegap.plugins.barcodescanner.ENCODE");
    intentEncode.putExtra("ENCODE_TYPE", type);
    intentEncode.putExtra("ENCODE_DATA", data);

    this.ctx.startActivity(intentEncode);
} 
```

在您的应用程序 AndroidManifest.xml 文件中，将意图过滤器字符串更改为您在上面的 BarcodeScanner.java 文件中使用的自定义字符串

```
<activity android:name="com.google.zxing.client.android.CaptureActivity"
            android:screenOrientation="landscape" android:configChanges="orientation|keyboardHidden"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
            android:windowSoftInputMode="stateAlwaysHidden">
            <intent-filter>
                <action android:name="com.dhaval.phonegap.plugins.barcodescanner.SCAN" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:name="com.google.zxing.client.android.encode.EncodeActivity"
            android:label="@string/share_name">
            <intent-filter>
                <action android:name="com.dhaval.phonegap.plugins.barcodescanner.ENCODE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

# postgresql - 如何在大事务下获得高性能（postgresql）

> ID：11322029
> 
> 赞同：4
> 
> 时间：2012-07-04T03:22:43.953
> 
> 标签：postgresql, transactions

我有 200 万条数据需要插入到 postgresql 中。但它发挥了低效。我可以通过将大事务拆分为较小的事务来实现高性能插入器（实际上，我不想这样做）？或者，还有其他明智的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T07:52:06.590

不，让它更快的主要想法是在一个事务中完成所有插入。多个事务，或不使用事务，要慢得多。

并尝试使用副本，它甚至更快：[http ://www.postgresql.org/docs/9.1/static/sql-copy.html](http://www.postgresql.org/docs/9.1/static/sql-copy.html)

如果您确实必须使用插入，您也可以尝试删除该表上的所有索引，并在加载数据后创建它们。

这也很有趣：[http ://www.postgresql.org/docs/9.1/static/populate.html](http://www.postgresql.org/docs/9.1/static/populate.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-18T06:24:32.837

提高性能的可能方法：

1.  使用`COPY`命令。
2.  `isolation level`如果您的数据可以处理后果，请尝试减少交易。
3.  调整 PostgreSQL 服务器配置。默认内存限制*非常低*，即使服务器具有千兆字节的可用内存，也会导致磁盘损坏。
4.  关闭磁盘屏障（例如文件系统`nobarrier`的标志`ext4`）和/或`fsync`在 PostgreSQL 服务器上。**警告：**这通常是不安全的，但会大大提高您的性能。
5.  在插入数据之前删除表中的所有索引。在添加行时，一些索引需要大量工作才能保持最新。PostgreSQL 最终可能能够更快地创建索引，而不是与插入过程并行地不断更新索引。不幸的是，没有简单的方法可以“保存”当前索引，然后再次恢复/创建相同的索引。

仅当由于并行事务的数据依赖性问题而必须重试事务时，将插入作业拆分为一系列较小的事务才会有所帮助。如果事务在第一次尝试时成功，将其拆分为几个按顺序运行的较小事务只会降低您的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-18T13:01:57.973

根据我的经验，您可以通过将大型事务拆分为较小的事务来改进 INSERT 完成时间，但前提是您要插入的表没有应用索引或约束，并且没有必须争夺共享的默认字段值多个并发事务下的资源。在这种情况下，将插入拆分为几个不同的部分，并将每个部分作为单独的进程同时提交，将在更短的时间内完成工作。

# java - java基于文本的世界移动元素

> ID：11322032
> 
> 赞同：1
> 
> 时间：2012-07-04T03:22:49.133
> 
> 标签：java, arrays, text

我有一个项目，我一生都无法弄清楚移动模式，某个对象是否与另一个对象在同一个地方，或者如何与每个项目进行交互，这是第一类：

```
public class AnimalKingdom {

public static final int WORLD_ROWS = 4; 
public static final int WORLD_COLUMNS = 4;

public static final int ROUNDS = 10;

public static void main(String[] args) {
    Animal[] animals = new Animal[10];
    animals[0] = new Worm(WORLD_ROWS, WORLD_COLUMNS);        
    animals[1] = new Worm(WORLD_ROWS, WORLD_COLUMNS);
    animals[2] = new Worm(WORLD_ROWS, WORLD_COLUMNS);        
    animals[3] = new Worm(WORLD_ROWS, WORLD_COLUMNS);        
    animals[4] = new Bird(WORLD_ROWS, WORLD_COLUMNS);        
    animals[5] = new Bird(WORLD_ROWS, WORLD_COLUMNS);
    animals[6] = new Bird(WORLD_ROWS, WORLD_COLUMNS);
    animals[7] = new Bird(WORLD_ROWS, WORLD_COLUMNS);                    
    animals[8] = new Wolf(WORLD_ROWS, WORLD_COLUMNS);
    animals[9] = new Wolf(WORLD_ROWS, WORLD_COLUMNS);   

    for (int i = 1; i < ROUNDS; i++) {
        showWorld(animals);
        doEating(animals);
        doMoving(animals);
    }
} 

public static void showWorld(Animal[] animals) {
    System.out.println();
    System.out.println("The World");
      /*  The world is made of rows and columns.
          Each location must be big enough to list all the animals
            (in case they all show up at that spot at once).  So we print
            the single character string for each animal, then later add in enough
            blanks to ensure that the lines between locations are neatly 
            drawn. */
    for (int r = 0; r < WORLD_ROWS; r++) {
        for (int c = 0; c < WORLD_COLUMNS; c++) {

            int localAnimals = 0;
            for (int a = 0; a < animals.length; a++) {
                if (animals[a] != null) {  // as animals die, nulls will be left in the array
                    int ar = animals[a].getRow();
                    int ac = animals[a].getCol();
                    if (r == ar && c == ac) {  // this animal is local to this location
                        localAnimals++;
                        System.out.print(animals[a]);  // draw the animal
                    }
                }
            }  
                 // create enough blanks to fill out the location
            for (int i = 0; i < animals.length-localAnimals; i++) {
                System.out.print(" ");
            }
            System.out.print("|");
        }
        System.out.println();        
    }
    System.out.println();
}

public static void doEating(Animal[] animals) {
    // This needs to be filled in    
}  

public static void doMoving(Animal[] animals) {    
    // This needs to be filled in
}     

} 
```

这是我编码的第二部分：

```
import java.util.Random;

public class Animal {

private Random rand = new Random();
private int worldWidth;
private int worldHeight;
private int row;
private int col;

public Animal(int worldHeight, int worldWidth) {
    this.worldHeight = worldHeight;    
    this.worldWidth = worldWidth;  
    row = rand.nextInt(worldHeight);   
    col = rand.nextInt(worldWidth);            
}

public boolean willEat(Animal anim) {
    return false;
}

public void move() {
}

public int getRow() {
    return row;
}

public int getCol() {
    return col;
}

public void setRow(int r) {
    row = r;
}

public void setCol(int c) {
    col = c;
}        

public String toString() {
    return "";
}

public int getWorldWidth(){
    return worldWidth;
}

public int getWorldHeight(){
    return worldHeight;
}  

public boolean isInSamePlaceAs(Animal other) {
    return false;   // code needs to be replaced
 }

} 
```

每个子类被命名为 Worm、Bird 和 Wolf。每个子类 toString 都以一个字符的形式表示。'B' 代表鸟，'。代表蠕虫，而“W”代表狼。蠕虫可以左右移动，记住它们前进的方向，如果它们撞到墙壁或阵列的结束/开始，就会反转。小鸟在世界上沿对角线移动。狼可以向任何方向移动。

我只需要帮助开始在 doMoving() 中进行动作，帮助识别 isInSamePlaceAs() 并帮助 doEating()。鸟吃虫，狼吃鸟，虫什么都不做。

# javascript - Chrome 扩展程序未访问目标页面 DOM

> ID：11322035
> 
> 赞同：0
> 
> 时间：2012-07-04T03:23:15.653
> 
> 标签：javascript, google-chrome, google-chrome-extension

在查看建议的回复后，我无法解决以下问题：

我的 javascript 没有访问页面 DOM，但它正在运行。

清单.json

```
{
  "name": "Clicky",
  "version": "1.0",
  "background": { "scripts": ["jquery.js", "clickclickboom.js"] },
  "permissions": [
    "tabs", "http://*/*"
  ],
  "browser_action": {
  "name": "Find all links",
  "icons": ["icon.jpg"]
  },
  "manifest_version": 2
} 
```

clickclickboom.js

```
alert("script runs");
function clicky() {
    alert ("clicky got called");
    jQuery(".testClass").find("a");
}
chrome.browserAction.onClicked.addListener(function(tab) {
chrome.tabs.executeScript(
    null, {code: clicky()});
}); 
```

两个警报都会弹出，但是当我调试时，我看到扩展访问 background.html DOM，但没有看到目标页面的 DOM。

任何帮助将不胜感激，在此先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:14:35.297

在您的`chrome.tabs.executeScript()`中，`code`属性必须是包含代码的字符串。

您的代码当前发生的情况是：`clicky()`被执行，它返回`undefined`，这基本上使您的 executeScript 成为无操作调用...

你可以做的一件事是使用`clicky.toString()`虽然我个人不推荐它！在这种情况下，`alert ("clicky got called")`可能会起作用（如果幸运的话）。下一行将不起作用，因为 jQuery 未在内容脚本中定义。您包含的 jquery 仅限于背景页面。

从您的代码来看，您似乎并不真正熟悉 chrome 扩展的架构，所以我建议您从[http://code.google.com/chrome/extensions/getstarted.html开始](http://code.google.com/chrome/extensions/getstarted.html)

# android - 无法将 Facebook SDK 加载到 Eclipse。构建路径错误

> ID：11322037
> 
> 赞同：1
> 
> 时间：2012-07-04T03:23:16.943
> 
> 标签：android, facebook, buildpath

所以我什至无法开始为我想要构建的应用程序编码，我很难为我设置 SDK 以基于它进行编码。

这是我所做的：

1.  下载的 Eclipse
2.  在 Eclipse 上下载了 JDK、Android SDK 和 ADT。
3.  创建了一个名为“Facebook”的目录，我在其中克隆了：https://github.com/facebook/facebook-android-sdk .git（**分开以避免垃圾邮件机制：P**）
4.  从现有源创建一个新项目；请注意，在教程中它读取“**从现有源创建项目”作为“****新 Android 项目**”工作流程中的一个选项，但我的 Eclipse 只有“**来自现有代码的 Android 项目**”（参见：[http ://db.tt/ gOmutx08](http://db.tt/gOmutx08)这就是我**使用**的）作为单独的工作流程。此外，这里没有“新 Android 项目”，只有一个新的“ **Android 应用程序项目**”，这不会提示我选择现有项目作为源（参见：[http](http://db.tt/usuzcTxS) ://db.tt/usuzcTxS ）。不确定这是否是问题所在。
5.  创建了一个新项目，并将我们之前创建的 SDK 项目添加为参考库。

问题肯定出在第 4 步，因为我在 Eclipse 问题记录器上收到以下错误：

a) 描述资源路径位置类型容器“Android Dependencies”引用不存在的库“F:\Users\Desktop_1\Android\Facebook SDK\facebook-android-sdk\facebook\bin\facebook.jar”测试-Facebook 构建路径构建路径问题

b) 描述资源路径位置类型 new View.OnClickListener(){} 类型的方法 onClick(View) 必须覆盖超类方法 FbDialog.java /facebook/src/com/facebook/android 第 101 行 Java 问题

c) 描述资源路径位置类型 Facebook.TokenRefreshServiceConnection 类型的方法 onServiceConnected(ComponentName, IBinder) 必须覆盖超类方法 Facebook.java /facebook/src/com/facebook/android 第 575 行 Java 问题

d) 描述资源路径位置类型 Facebook.TokenRefreshServiceConnection 类型的方法 onServiceDisconnected(ComponentName) 必须覆盖超类方法 Facebook.java /facebook/src/com/facebook/android 第 581 行 Java 问题

e) 描述资源路径位置类型在解决构建路径错误之前无法构建项目Test-Facebook Unknown Java Problem

主要问题是**a**和**e**，因为如果构建路径存在问题，则无法构建项目。通过从所有三行中删除“@override”注释可以轻松解决问题 b 到 d；但是，我不确定这是否是实际修复，因为 SDK 首先应该**没有**问题，并且删除注释最终可能无法使其正常工作。

关于我可以尝试什么的任何想法？我已经删除了整个 SDK 下载，并多次重新克隆了存储库，即使在不同的文件夹中也是如此。不知道了，我不确定为什么教程中的屏幕截图看起来与我的 Eclipse 不同。我的猜测是该教程有点过时了，因为它仍然使用 Froyo 作为目标：P

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T04:11:11.397

我遇到了你面临的大多数问题。我已经解决了。Eclipse 出于某种原因选择保留 facebook 项目是 Java 1.5，尽管我的 Eclipse 偏好设置使用 Java 编译器 1.6。

所以，去facebook项目中的项目属性并选择java编译器为1.6。这解决了我的问题。希望它也能解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T06:59:02.883

我重复了您的步骤并发现了以下内容：

似乎你的 facebook 项目不是图书馆之一。请确保在 facebook 项目下选中 Android 属性“Is Library”（这应该会删除**a**和**e**错误）； ![在此处输入图像描述](../Images/f3025d025621a6f13b83b541852a9531.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:12:35.320

```
Create project from existing source == Android Project From Existing Code 
```

我想你已经下载了更新版本的 Android SDK - API Level 16 - Jelly Bean..

在 API 级别 16 之前，我们有一个从现有源创建项目的选项，现在它已更改。

因此，如果您想使用特定位置的项目，您可以使用**现有代码中的 Android 项目**..

同样在创建项目后将 facebook 源作为库项目......

# asp.net-mvc-3 - 在 MVC3 Razor 视图引擎中使用硬代码

> ID：11322039
> 
> 赞同：0
> 
> 时间：2012-07-04T03:23:32.667
> 
> 标签：asp.net-mvc-3

我有以下剃刀代码：

```
<td>
    <div class="editor-label">
         @Html.LabelFor(model => model.AccountCode)
    </div>
</td>
<td>
    <div class="editor-field">
         @Html.EditorFor(model => model.AccountCode)            
    </div>
</td> 
```

我想将该值硬编码`1001`为输入字段的默认值。我试过 `[model.accountcode ="1001"]`哪个不起作用。

请用示例代码解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T03:47:18.863

如果你想在模型中设置一个值，那应该在控制器中完成......

```
public ActionResult MyAction()
{
    var myModel = new ModelClass();
    myModel.AccountCode = 1001;
    return View("MyViewName", myModel);
} 
```

然后使用 Razor 中的正常语法：

```
@Html.TextBoxFor(m => m.AccountCode) 
```

或者，如果您只想要一个隐藏参数：

```
@Html.HiddenFor(m => m.AccountCode) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:28:52.473

如果您想直接在文本框中显示一些值，那么您应该尝试

```
@Html.TextBox("AccountCode", "1001") 
```

# http - 最大客户端套接字

> ID：11322040
> 
> 赞同：0
> 
> 时间：2012-07-04T03:23:38.663
> 
> 标签：http, networking, tcp

我正在阅读 tod lammales CCNA 学习指南第 6 版并偶然发现了这一点，

> 要记住的一件事是，如果多个主机使用 HTTP 与服务器通信，它们都必须使用不同的源端口号。这就是 Web 服务器在传输层保持数据分离的方式。 *第 337 页*

这是真的吗？因为我一直认为 Ip 和端口号在 TCP 层是唯一的端点，但根据这一点，即使对于来自不同源 IP 的传入连接，源端口也必须不同！欣赏你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:45:24.453

不，这不是真的。但你说的也不是真的。TCP 连接由元组 {local address, local port, remote address, remote port} 标识，而不是由其中任何一个或两个标识。您所引用的内容（如果准确）将是（a）完全胡说八道和（b）完全无法实现。所有这些客户端如何相互协调以始终使用不同的源端口？

# java - 从 java 方法返回两个值

> ID：11322044
> 
> 赞同：3
> 
> 时间：2012-07-04T03:25:00.473
> 
> 标签：java, oop, coding-style

假设我在 java 中有一个方法，它在数据库中查找用户并返回他们的地址和他们所在的团队。

我想从方法中返回两个值，并且不想将方法一分为二，因为它涉及数据库调用，而拆分涉及调用次数的两倍。

考虑到中型到大型软件项目中的典型问题，最佳选择是什么？

```
whatGoesHere getUserInfo(String name) {
  // query the DB
} 
```

我知道这个问题与现有问题有重复的味道，但是每个其他问题都有一些元素使它与这个例子有足够的不同，我认为值得再问一次。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T03:28:17.667

你有一些选择。最 OOP 将是创建一个类来封装这两个属性，就像这样

```
private class UserInfo {
  private Address address;
  private Team team;
} 
```

或者，如果您想要一个简单的解决方案，您可以返回一个对象数组：

```
Object[] getUserInfo(String name) {
  // query the DB
  return new Object[]{address,team};
} 
```

或者，如果您想将此方法公开给某个库，您可以使用一些接口来使用这些属性，如下所示：

```
class APIClass{
  interface UserInfo{
    public Address getAddress();
    public Team getTeam();
  }

  UserInfo getUserInfo(String name) {
    // query the DB
    return new UserInfo(){
         public Address getAddress(){ return address; }
         public Team getTeam(){ return team; }
    };
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:27:47.673

无法地图帮助，MultivalueMap。其中键是用户名，两个值是地址和团队名称。我假设您的地址和团队都是字符串变量，您可以在此处了解有关多值映射的更多信息

[http://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/MultiValueMap.html](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/MultiValueMap.html)

[http://apachecommonstipsandtricks.blogspot.in/2009/01/multi-value-map-values-are-list.html](http://apachecommonstipsandtricks.blogspot.in/2009/01/multi-value-map-values-are-list.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T03:34:40.920

首先对您的抽象、关系和多重性进行建模（参见下面的示例）。然后，您可以相应地对表进行建模。执行完这两个步骤后，您可以利用可配置为加载对象图的[JPA](http://www.objectdb.com/java/jpa/getting/started)，或者编写 JDBC 代码并通过使用适当的 SQL JOIN 运行 SQL 查询来自己创建图。

*   用户有一个地址
*   一个团队可以有 1 个或多个用户（一个用户可以为更多团队效力吗？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T03:38:56.770

您可以返回一个字符串数组，其中包含用户名和组名。该方法如下所示：

```
public String[] getUserInfo(String name) {
    String[] result = new String[2];
    // query the DB
    ...
    result[0] = userName;
    result[1] = groupName;

    return result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T14:14:18.963

此类问题的常见解决方案是创建一个自定义对象，该对象具有与您要返回的值一样多的属性。如果你不能为此创建一个新类，你可以使用 a `Map<String, Object>`，但这种方法不是类型安全的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T00:06:11.210

我以为[Guava](http://code.google.com/p/guava-libraries/)已经有一个通用[`Pair`](http://www.cplusplus.com/reference/std/utility/pair/)类，但我找不到它。如果您使用的是 Java 1.5+，则可以使用泛型构建自己的。

```
public class Pair<X,Y>
{
    public final X first;
    public final Y second;

    public Pair(X first, Y second) {
        this.first = first;
        this.second = second;
    }
} 
```

随意将字段设为私有并添加 getter。:) 使用它很容易：

```
return new Pair<Address,Team>(address, team); 
```

**更新**

[Apache Commons Lang](http://commons.apache.org/lang/)拥有[`Pair`](http://commons.apache.org/lang/api-3.1/index.html). 有关更多选项，请参阅[此 SO question](https://stackoverflow.com/questions/156275/what-is-the-equivalent-of-the-c-pairl-r-in-java)。

# java-me - 如何使用 j2me 连接到蓝牙蜂设备？

> ID：11322046
> 
> 赞同：1
> 
> 时间：2012-07-04T03:25:24.663
> 
> 标签：java-me, bluetooth, midp, jsr82

我在 j2me 中开发了一个简单的蓝牙连接应用程序。

我在模拟器上试了一下，服务器和客户端都可以找到对方，但是当我将应用程序部署到黑莓手机并连接到蓝牙蜂设备时，它说`service search no records`。

有什么可能是错的？是j2me在bluetoothbee中找不到服务吗？

j2me自己成功找到了bluetoothbee设备，但是为什么找不到服务呢？

我的代码如下。我不明白的是UUID？如何为未知来源设置 UUID？因为我不知道蓝牙设备的 UUID。

```
class SearchingDevice extends Canvas implements Runnable,CommandListener,DiscoveryListener{

//......

public SearchingDevice(MenuUtama midlet, Display display){
    this.display = display;
    this.midlet = midlet;
    t = new Thread(this);
    t.start();

    timer = new Timer();
    task = new TestTimerTask();

    /*--------------------Device List------------------------------*/
        select = new Command("Pilih",Command.OK,0);
        back = new Command("Kembali",Command.BACK,0);
        btDevice = new List("Pilih Device",Choice.IMPLICIT);
        btDevice.addCommand(select);
        btDevice.addCommand(back);
        btDevice.setCommandListener(this);

    /*------------------Input Form---------------------------------*/

        formInput = new Form("Form Input");
        nama = new TextField("Nama","",50,TextField.ANY);
        umur = new TextField("Umur","",50,TextField.ANY);
        measure = new Command("Ukur",Command.SCREEN,0);
        gender = new ChoiceGroup("Jenis Kelamin",Choice.EXCLUSIVE);
        formInput.addCommand(back);
        formInput.addCommand(measure);
        gender.append("Pria", null);
        gender.append("Wanita", null);
        formInput.append(nama);
        formInput.append(umur);
        formInput.append(gender);

        formInput.setCommandListener(this);
     /*---------------------------------------------------------------*/

        findDevice();
}

/*----------------Gambar screen searching device---------------------------------*/
protected void paint(Graphics g) {

        g.setColor(0,0,0);
        g.fillRect(0, 0, getWidth(), getHeight());
        g.setColor(255,255,255);
        g.drawString("Mencari Device", 20, 20, Graphics.TOP|Graphics.LEFT);

    if(this.counter == 1){
        g.setColor(255,115,200);
        g.fillRect(20, 100, 20, 20);
    }
    if(this.counter == 2){
        g.setColor(255,115,200);
        g.fillRect(20, 100, 20, 20);
        g.setColor(100,255,255);
        g.fillRect(60, 80, 20, 40);
    }
    if(this.counter == 3){
        g.setColor(255,115,200);
        g.fillRect(20, 100, 20, 20);
        g.setColor(100,255,255);
        g.fillRect(60, 80, 20, 40);
        g.setColor(255,115,200);
        g.fillRect(100, 60, 20, 60);
    }
    if(this.counter == 4){
        g.setColor(255,115,200);
        g.fillRect(20, 100, 20, 20);
        g.setColor(100,255,255);
        g.fillRect(60, 80, 20, 40);
        g.setColor(255,115,200);
        g.fillRect(100, 60, 20, 60);
        g.setColor(100,255,255);
        g.fillRect(140, 40, 20, 80);
        //display.callSerially(this);
    }

}
/*--------- Running Searching Screen ----------------------------------------------*/
public void run() {
    while(run){

       this.counter++;
       if(counter > 4){
           this.counter = 1;
       }
        try {
            Thread.sleep(1000);
        } catch (InterruptedException ex) {
            System.out.println("interrupt"+ex.getMessage());
        }
         repaint();
    }
}

/*-----------------------------cari device bluetooth yang -------------------*/
public void findDevice(){
    try {
        devices = new java.util.Vector();
        local = LocalDevice.getLocalDevice();
        agent = local.getDiscoveryAgent();
        local.setDiscoverable(DiscoveryAgent.GIAC);
        agent.startInquiry(DiscoveryAgent.GIAC, this);
    } catch (BluetoothStateException ex) {
        System.out.println("find device"+ex.getMessage());
    }
}
/*-----------------------------jika device ditemukan--------------------------*/
public void deviceDiscovered(RemoteDevice rd, DeviceClass dc) {
    devices.addElement(rd);
}
/*--------------Selesai tes koneksi ke bluetooth server--------------------------*/
public void inquiryCompleted(int param) {
    switch(param){
        case DiscoveryListener.INQUIRY_COMPLETED: //inquiry completed normally
            if(devices.size()>0){ //at least one device has been found
                services = new java.util.Vector();
                this.findServices((RemoteDevice)devices.elementAt(0));
                this.run = false;
                do_alert("Inquiry completed",4000);
            }else{
                do_alert("No device found in range",4000);
            }
            break;
        case DiscoveryListener.INQUIRY_ERROR:
            do_alert("Inquiry error",4000);
            break;
        case DiscoveryListener.INQUIRY_TERMINATED:
            do_alert("Inquiry canceled",4000);
            break;
    }
}
/*-------------------------------Cari service bluetooth server----------------------------*/
public void findServices(RemoteDevice device){
     try {
        // int[] attributes = {0x100,0x101,0x102};
        UUID[] uuids = new UUID[1];
        //alamat server
       uuids[0] = new UUID("F0E0D0C0B0A000908070605040302010",false);
        //uuids[0] = new UUID("8841",true);
        //menyiapkan device lokal
        local = LocalDevice.getLocalDevice();
        agent = local.getDiscoveryAgent();
        //mencari service dari server

        agent.searchServices(null, uuids, device, this);
        //server = (StreamConnectionNotifies)Connector.open(url.toString());

    } catch (BluetoothStateException ex) {
       // ex.printStackTrace();
        System.out.println("Errorx"+ex.getMessage());
    }
}
/*---------------------------Pencarian service selesai------------------------*/
public void serviceSearchCompleted(int transID, int respCode) {
    switch(respCode){
       case DiscoveryListener.SERVICE_SEARCH_COMPLETED:
           if(currentDevice == devices.size() - 1){
               if(services.size() > 0){
                   this.run = false;
                   display.setCurrent(btDevice);
                   do_alert("Service found",4000);
               }else{
                   do_alert("The service was not found",4000);
               }
           }else{
               currentDevice++;
               this.findServices((RemoteDevice)devices.elementAt(currentDevice));
           }
           break;
       case DiscoveryListener.SERVICE_SEARCH_DEVICE_NOT_REACHABLE:
           do_alert("Device not Reachable",4000);
           break;
       case DiscoveryListener.SERVICE_SEARCH_ERROR:
           do_alert("Service search error",4000);
           break;
       case DiscoveryListener.SERVICE_SEARCH_NO_RECORDS:
           do_alert("No records return",4000);
           break;
       case DiscoveryListener.SERVICE_SEARCH_TERMINATED:
           do_alert("Inquiry canceled",4000);
           break;
   }    }

public void servicesDiscovered(int i, ServiceRecord[] srs) {
    for(int x=0; x<srs.length;x++)
         services.addElement(srs[x]);
    try {
            btDevice.append(((RemoteDevice)devices.elementAt(currentDevice)).getFriendlyName(false),null);
    } catch (IOException ex) {
        System.out.println("service discover"+ex.getMessage());
    }
}
    public void do_alert(String msg, int time_out){
    if(display.getCurrent() instanceof Alert){
        ((Alert)display.getCurrent()).setString(msg);
        ((Alert)display.getCurrent()).setTimeout(time_out);
    }else{
        Alert alert = new Alert("Bluetooth");
        alert.setString(msg);
        alert.setTimeout(time_out);
        display.setCurrent(alert);
    }
    }

private String getData(){
    System.out.println("getData");
    String cmd="";

     try {
            ServiceRecord service = (ServiceRecord)services.elementAt(btDevice.getSelectedIndex());
            String url = service.getConnectionURL(ServiceRecord.NOAUTHENTICATE_NOENCRYPT, false);
            conn = (StreamConnection)Connector.open(url);
            DataInputStream in = conn.openDataInputStream();
            int i=0;

            timer.schedule(task, 15000);
            char c1;
               while(time){

                 //while(((c1 = in.readChar())>0) && (c1 != '\n')){
                //while(((c1 = in.readChar())>0) ){
                    c1 = in.readChar();
                cmd = cmd + c1;
                //System.out.println(c1);
               // }
               }
                 System.out.print("cmd"+cmd);

                if(time == false){
                in.close();
                conn.close();
                }

        } catch (IOException ex) {
            System.err.println("Cant read data"+ex);
        }
     return cmd;
}

//timer task fungsinya ketika telah mencapai waktu yg dijadwalkan putus koneksi
private static class TestTimerTask extends TimerTask{

    public TestTimerTask() {
    }
    public void run() {

        time = false;
    }
}   
} 
```

# objective-c - 用于 gnustep 的目标 c 分析器

> ID：11322048
> 
> 赞同：0
> 
> 时间：2012-07-04T03:25:28.623
> 
> 标签：objective-c, performance, gnustep

是否有用于在 linux 上运行的 Objective-C 分析器。
我正在使用 GNUstep 环境。
我在GNUstep的网站上搜索，没有关于profiler的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:55:27.143

对于 Objective-C 应用程序，您不需要特殊的分析器。任何适用于 Linux 的分析器（例如 gprof）都应该可以正常工作。

# python - 如何使用 Python 将字符串转换为类子属性

> ID：11322049
> 
> 赞同：5
> 
> 时间：2012-07-04T03:25:30.437
> 
> 标签：python, class, attributes

我知道我可以使用这样的字符串获取类的属性：

```
object.attribute = 'foo'
x = 'attribute'
getattr(object, x)
>>> 'foo' 
```

有没有办法用字符串“深入”到对象的属性？换句话说，如果我的对象包含另一个对象，我怎样才能用字符串获取子对象的属性？例如：

```
object.object.attribute 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T03:44:05.380

该`operator.attrgetter`函数执行此操作：

```
class Foo: pass
f = Foo()
f.bar = Foo()
f.bar.baz = Foo()
f.bar.baz.quux = "Found me!"

import operator
print operator.attrgetter("bar.baz.quux")(f)     # prints "Found me!" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T03:39:47.220

我喜欢这个[链接](http://mousebender.wordpress.com/2006/11/10/recursive-getattrsetattr/)中给出的食谱（实际上评论更好）

从克劳迪乌的回答中借用的例子（这也很棒）：

```
class Foo: pass
f = Foo()
f.bar = Foo()
f.bar.baz = Foo()
f.bar.baz.quux = "Found me!" 
```

跟随点的递归 getattr：

```
>>> rgetattr = lambda o,a: reduce(getattr, a.split('.'), o)
>>> rgetattr(f, 'bar.baz.quux')
'Found me!' 
```

非 lambda 版本是：

```
def rgetattr(obj, attr):
    return reduce(getattr, attr.split('.'), obj) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-04T03:26:22.907

```
>>> class Foo: pass

>>> f = Foo()
>>> f.bar = Foo()
>>> f.bar.baz = Foo()
>>> f.bar.baz.quux = "Found me!"
>>> getattr(f, 'bar')
<__main__.Foo instance at 0x01EC5918>
>>> getattr(getattr(f, 'bar'), 'baz')
<__main__.Foo instance at 0x01EC5A30>
>>> getattr(getattr(getattr(f, 'bar'), 'baz'), 'quux')
'Found me!' 
```

编辑：作为一个简单的方法完成：

```
>>> def dynamic_lookup(obj, dot_attrs):
    attr_list = dot_attrs.split(".")
    while attr_list:
        obj = getattr(obj, attr_list.pop(0))
    return obj

>>> f
<__main__.Foo instance at 0x01EC50A8>
>>> dynamic_lookup(f, 'bar.baz.quux')
'Found me!' 
```

很容易适应获取字符串列表（`attr_list`直接获取而不是`dot_attrs`），但我认为`.`作为字符串的符号看起来更酷......

# android - 解析 Android 语音识别结果

> ID：11322050
> 
> 赞同：0
> 
> 时间：2012-07-04T03:25:34.623
> 
> 标签：android, voice-recognition

到目前为止，这是我的代码：

```
ArrayList<String> matches = data
                .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);

        String playString = "play";

        if( matches.get(0).toString() == playString)
        {

            // do something
        } 
```

语音识别提示拉起来就好了，我已经测试过了，实际上我说的是“玩”这个词。但是，在 if 语句中进行比较时，每次都会失败 - 有或没有`toString()`. 我不明白什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T05:56:46.050

回答你的***WHY***。
运算符 == 测试两个对象引用变量是否引用了完全相同的对象实例。

方法 .equals() 测试两个被比较的对象是否相等——但它们不必是同一对象的完全相同的实例。

示例 #1：

```
Integer i = new Integer(10);
Integer j = i; 
```

在上面的代码中。i == j 为真，因为 i 和 j 都指向同一个对象。

示例 #2：

```
Integer i = new Integer(10);
Integer j = new Integer(10); 
```

在上面的代码中，i == j 是假的，因为尽管它们的值都是 10，但它们是两个不同的对象。

此外，在上面的代码中，i.equals(j) 是正确的，因为尽管它们是两个不同的对象，但它们是等价的，因为它们代表相同的数字 10。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T03:42:57.627

而不是使用`==`类似：`if( matches.get(0).toString() == playString)`

像这样使用`.equals()`：`if( matches.get(0).toString().equals(playString)`

# javascript - 页面内容被另一个 ajax 脚本更改后，AJAX 脚本不起作用

> ID：11322052
> 
> 赞同：0
> 
> 时间：2012-07-04T03:25:44.780
> 
> 标签：javascript, jquery, ajax

我正在尝试运行两个脚本：一个用于使用 ajax 加载页面内容，另一个使用 ajax 提交联系表单。

加载页面内容：

```
<script>
$('#top_links a').click(function (e) {
    e.preventDefault();
    var link = $(this).attr('href');
    $('#content').empty();

    $.get(link, { }, 
        function(data) {
            $('#content').replaceWith($(data).find("#content"));

        }
    )
});
</script> 
```

提交表格：

```
<script type="text/javascript">

$('#submit').click(function(event){

    event.preventDefault();
    var name = $('#name').val();
    var email = $('#email').val();
    var message = $('#message').val();
    $.post("<?php echo bloginfo( 'template_directory' ) . '/inc/mailit.php';?>", 
        {
        name: name,
        email: email,
        message: message
        },
        function(data) {
            var n = data.indexOf('<span class="success_message">');

            if (n !== 0) {
            $('#message_box_1').empty().append(data);
            } else {
            $('#contact_form').empty().append(data);

            }
        }
    );
});

</script> 
```

这两个脚本都在页脚中，不包含在动态加载的内容中。当我直接访问联系页面而不使用 ajax 加载其内容时，表单代码可以完美运行。但是当我使用 ajax 加载表单时，提交脚本停止工作。

[这实际上是我之前发布的](https://stackoverflow.com/questions/11320545/script-loaded-through-load-fails)问题的后续问题。经过一番思考，我不能 100% 确定我之前收到的答案是准确的。答案依赖于表单提交代码是加载内容的一部分的假设，但事实并非如此，因为我将所有代码放在不受内容更改影响的页脚中。由于我无法取消选中答案，因此我需要重新发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:34:27.950

加载表单*后*，您需要运行提交表单脚本。

尝试将您的提交表单脚本包装在一个函数中，例如 applySubmitFormEvents() {...} 或类似的东西。

然后在您的回调函数中，您需要调用 applySubmitFormEvents()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:38:14.933

如果提交按钮在动态加载的内容中，则必须使用**$.live()**函数。

```
$("#submit").live("click", function(e){}) 
```

# python - pyqt4 python中的MRO错误

> ID：11322053
> 
> 赞同：3
> 
> 时间：2012-07-04T03:25:52.680
> 
> 标签：python, pyqt4

我想继承 widget1 以使用它的方法，但我得到：

```
"TypeError: Error when calling the metaclass bases Cannot create a 
consistent method resolution order (MRO) for bases widget1, QWidget" 
```

当我运行程序时。你能向我解释为什么会这样吗？

感谢。

```
from PyQt4.QtGui import *
from PyQt4.QtCore import *
from PyQt4 import QtCore, QtGui
import sys

class widget1(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)

class widget2(QtGui.QWidget, widget1):
    def __init__(self):
        QtGui.QWidget.__init__(self)

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    test = widget1()
    test.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T03:59:00.697

[PyQt4 中的多重继承](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/gotchas.html#multiple-inheritance)

> 不可能定义一个新的 Python 类，它是多个 Qt 类的子类。

您可以使用多种替代设计决策，这使得多个 QObject 继承变得不必要。

### 简单继承单父类

```
class widget1(QtGui.QWidget):
    def __init__(self):
        super(widget1, self).__init__()

    def foo(self): pass
    def bar(self): pass

class widget2(widget1):
    def __init__(self):
        super(widget2, self).__init__()

    def foo(self): print "foo"
    def baz(self): pass 
```

### 作品

```
class widget2(QtGui.QWidget):
    def __init__(self):
        super(widget2, self).__init__()
        self.widget1 = widget1() 
```

### 将其中一个类设为 mixin 类，而不是 QObject：

```
class widget1(QtGui.QWidget):
    def __init__(self):
        super(widget1, self).__init__()

    def foo(self): print "foo"
    def bar(self): pass

class MixinClass(object):
    def someMethod(self):
        print "FOO"

class widget2(widget1, MixinClass):
    def __init__(self):
        super(widget2, self).__init__()

    def bar(self): self.foo()
    def baz(self): self.someMethod() 
```

# javascript - 如何继承css动画？

> ID：11322056
> 
> 赞同：1
> 
> 时间：2012-07-04T03:26:22.813
> 
> 标签：javascript, jquery, css, animation, html

我有2个div。div a 和 div b。我使用 jquery .append() 到父 div b 到 div a。如何让 div b 继承 div a 的所有 css 动画？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T03:45:31.790

用这个：

```
$('div').css($(this).parent().css()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:27:14.480

将动画分配给 CSS 类名，并为两个对象中的每一个赋予相同的类名。然后，它们甚至不必是父/子关系来继承完全相同的 CSS 动画。

# jquery - 一页上的Jquery多人搜索为什么不会填充结果？

> ID：11322062
> 
> 赞同：0
> 
> 时间：2012-07-04T03:27:29.573
> 
> 标签：jquery

我有这个页面，上面有三个人搜索。基本上它是一个文本框和按钮。当您单击按钮时，它会获取相关文本框中的文本，并应使用列表数据填充相关结果。

```
 <div class="personcontainer">
        <div class="peoplesearchdiv" >

        <input type="text" class="searchpersontxtbox" />
        <input type="button" value="Find" class="findpersonbtn" />
        <div class="peopleresultsdiv"></div>
    </div>
    <input type="hidden" class="personguid" />

<div class="personcontainer">
        <div class="peoplesearchdiv" >

        <input type="text" class="searchpersontxtbox" />
        <input type="button" value="Find" class="findpersonbtn" />
        <div class="peopleresultsdiv"></div>
    </div>
    <input type="hidden" class="personguid" />

<div class="personcontainer">
        <div class="peoplesearchdiv" >

        <input type="text" class="searchpersontxtbox" />
        <input type="button" value="Find" class="findpersonbtn" />
        <div class="peopleresultsdiv"></div>
    </div>
    <input type="hidden" class="personguid" /> 
```

好的，所以试图让它工作的 jquery 是：

```
$(document).ready(function () {

    $('.findpersonbtn').click(function () {

    var query = $(this).closest('.personcontainer').find('.searchpersontxtbox').val();

    $.get('/People/GetPeople/', { 'query': query }, function (data) {         

        $(this).closest('.peoplesearchdiv').find('.peopleresultsdiv').html(data);

    });

}); 
```

从 GetPeople 返回的是基本列表数据，例如。

```
<ul>
  <li>Cat</li>
  <li>Dog</li>
</ul> 
```

所以我想要发生的是将html填充到同一个personscontainer中的peopleresultsdiv的列表数据。

虽然不起作用。

为了消除它是 GetPeople 方法，我将 jquery 更改为：

```
$(document).ready(function () {

        $('.findpersonbtn').click(function () {

        var query = $(this).closest('.personcontainer').find('.searchpersontxtbox').val();

        $.get('/People/GetPeople/', { 'query': query }, function (data) {         

            $(this).closest('.peoplesearchdiv').find('.peopleresultsdiv').html("<ul><li>Cat</li><li>Dog</li></ul>");

        });

    }); 
```

还是不行。

所以我尝试了：

```
$(document).ready(function () {
    $('.findpersonbtn').click(function () {

        var query = $(this).closest('.personcontainer').find('.searchpersontxtbox').val();

        $(this).closest('.peoplesearchdiv').find('.peopleresultsdiv').html("<ul><li>Cat</li><li>Dog</li></ul>");

        $.get('/People/GetPeople/', { 'query': query }, function (data) {

        });

    }); 
```

嗯嗯嗯。现在列表出现了。显然不是我想要的，因为我没有从该方法中填充。

所以看起来最近的发现在get中不起作用？

有谁知道为什么要修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:35:46.817

在 $.get 中拥有 $(this) 不会返回 peopleresultsdiv。

因此，您可以在 $.get 之外获取所需的 div 并将其放在变量中，然后在 $.get 中使用它

# html - 在 iframe 顶部重叠 div

> ID：11322063
> 
> 赞同：0
> 
> 时间：2012-07-04T03:27:30.647
> 
> 标签：html, css, css-float

具有类的重叠 div：

```
.eStore-product {
  height:180px;
  padding:5px;
  clear:both;
} 
```

我想通过添加`clear:both;`这可以解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T03:53:10.060

首先，你的 iframe 不应该放在 ap 标签内；iframe 应该自己去。其次，您`.eStore-product`的高度为 180 像素，这导致了问题。增加那个高度或增加一个`margin-bottom: 100px;`都可以解决问题。

不幸的是，这个解决方案更像是一种黑客攻击。 [我觉得你有一个比这行更大的问题](http://validator.w3.org/check?uri=http://performancecarclub.org/portfolio/beaver-run-bachelor-gulch-715-716/&charset=%28detect%20automatically%29&doctype=Inline&group=0)。尝试修复页面上的 8 个错误，您会发现自己不必修复这些奇怪的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:57:18.127

嗯奇怪的行为，我会尝试将地图框包含在 div 中，并应用填充顶部：

```
<div style="padding-top:110px"> 
```

这在第 226 行和 div clousure，当前关闭的 div 在 228

```
</div></div></div> 
```

它提供了足够的空间。当前的 div 范围似乎是正确的。我对 div 进行了快速检查，似乎是正确的，但也许更深入的修改可能会带来清晰的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T03:40:34.793

我尝试将margin放在p标签内，结果不重叠希望对您有用

# python - 如何确定列表的维度？

> ID：11322067
> 
> 赞同：2
> 
> 时间：2012-07-04T03:27:46.963
> 
> 标签：python, list, multidimensional-array

如何以编程方式确定列表的维度？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T03:28:48.240

对于一个简单的列表，您可以通过以下方式获取其长度`len`：

```
>>> l = [1, 2, 3, 4, 5]
>>> len(l)
5 
```

对于最容易表示为嵌套列表的矩阵，您可以获得第一个子列表的长度，例如：

```
>>> matrix = [
    [1, 2],
    [3, 4],
    [5, 6],
    [7, 8],
    [9, 10]]
>>> len(matrix)
5
>>> len(matrix[0])
2 
```

考虑到 JBernardo 的评论，定义一个简单的`iterable`助手：

```
>>> def iterable(x):
    if isinstance(x, basestring): return False
    try:
        iter(x)
    except TypeError:
        return False
    return True

>>> iterable(4)
False
>>> iterable([1, 2, 3])
True 
```

然后我们可以递归地定义`dimensionality`函数：

```
>>> def dimensionality(l):
    if not iterable(l): return 0
    return 1 + dimensionality(l[0])

>>> dimensionality(0)
0
>>> dimensionality([1, 2, 3])
1
>>> dimensionality([[1,2], [2,3], [3,4]])
2
>>> dimensionality([[[1,2],[2,3]], [[2,3],[3,4]], [[3,4],[4,5]]])
3 
```

而不是`iterable`你可以做`isinstance(x, list)`或你想要的任何其他检查。编辑排除字符串以避免`dimensionality('lol')`无限循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T03:32:47.323

假设均匀性：

```
dims = []
while isinstance(matrix, list) and matrix is not None:
    dims.append(len(matrix))
    matrix = matrix[0]
number_of_dimensions = len(dims) 
```

希望有帮助

# vb6 - 如何判断一个菜单是否在 VB6 中打开？

> ID：11322069
> 
> 赞同：0
> 
> 时间：2012-07-04T03:27:59.147
> 
> 标签：vb6, menu, tooltip

我设置了一个计时器来检测鼠标是否在我的表单上的某个区域上，您可以想象它是一个从 50,50（像素）开始到 1000,500 结束的矩形。如果鼠标在该矩形内，则会弹出第二个窗口，其作用有点像工具提示，跟随鼠标。问题是顶部的菜单覆盖在这个矩形上，如果您尝试使用菜单，一旦您向下移动菜单，就会弹出第二个窗口（计时器将其可见属性设置为 true），最终关闭菜单（我猜是由于失去焦点或其他原因。）

如果我可以检测到其中一个菜单何时打开，我可以使用`if`语句禁用工具提示窗口的显示，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:53:01.533

我想我已经通过在 WIN32API.txt 中搜索“菜单”和一些谷歌搜索找到了如何做到这一点，但我不太确定。也许这个解决方案只适用于我的机器。

把这段代码...

```
Dim hMenu As Long
hMenu = GetMenu(Form1.hwnd)
MsgBox GetMenuState(hMenu, 0, MF_BYPOSITION) 
```

在间隔为 5000 的计时器上，您可以查看菜单的状态。在关闭状态下，数字看起来是随机的（1552、1296 等），但当菜单打开时，它会从该基值偏移 128。关闭时状态为 1552 的菜单打开时为 1680。

我不确定为什么它会偏移 128 或者这是否适用于所有机器（为了安全起见，我将对其进行编程以检查不平等，而不是偏移 128），但它似乎对我有用。

如果此解决方案有问题或有更好的方法，请回复另一个答案，我很乐意为您提供答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-04T13:54:39.230

由 SBEIH Iyad - 叙利亚 - 大马士革撰写。2021 年 4 月 1 日。

使用VB6.0，我们可以。我们检查所有的菜单窗口，如果一个被打开，这意味着：菜单被打开。我们对主菜单的 hWnd 使用 API“GetMenu”，然后使用 API“GetMenuState”检查菜单之一是否打开。

VB6.0代码：

```
Private Function GetBit_I(ByVal X As Long, ByVal i As Integer) As Integer
' Get the bit number i of X.
  GetBit_I = (X And (2 ^ i)) / (2 ^ i)
End Function

Private Function MainMenuIsOpened(FRM As Form) As Boolean
Const MF_BYPOSITION = 1024
Dim H As Long, i As Integer, L As Long, MCount As Long
  MainMenuIsOpened = False
  On Error GoTo MainMenuIsOpenedError
  H = GetMenu(FRM.HWnd)
  MCount = GetMenuItemCount(H)
  ' MCount is the number of main-menus.
  Do While (i < MCount)
     L = GetMenuState(H, i, MF_BYPOSITION)
     If ((L > -1) And (GetBit_I(L, 7) = 1)) Then
        MainMenuIsOpened = True
        Exit Do
     End If
     i = i + 1
  Loop
  Exit Function
MainMenuIsOpenedError:
  MainMenuIsOpened = False
End Function 
```

祝你好运。

# java - 将字节添加到字节数组

> ID：11322072
> 
> 赞同：3
> 
> 时间：2012-07-04T03:28:18.297
> 
> 标签：java

我需要在字节数组的开头添加字符串“00”或字节 0x00？我试图用 for 循环来做，但是当我将它转换为十六进制时，它不会出现在前面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T03:52:39.110

当转换为字节时，字符串“00”与数字 0x00 不同。您尝试添加到字节数组的数据类型是什么？假设它是字符串“00”的字节表示，请尝试以下操作：

```
bytes[] orig = <your byte array>;  
String prepend = "00";  
bytes[] prependBytes = prepend.getBytes();  
bytes[] output = new Bytes[prependBytes.length + orig.length];

for(i=0;i<prependBytes.length;i++){
    output[i] = prependBytes[i];
}

for(i=prependBytes.length;i<(orig.length+prepend.lenth);i++){
  output[i] = orig[i];
} 
```

或者您可以使用 Arrays.copy(...) 而不是前面提到的两个 for 循环来进行前置。请参阅[如何组合两个字节数组](https://stackoverflow.com/questions/5683486/how-to-combine-two-byte-arrays)

`prependBytes`或者，如果您尝试在字节数组中添加 0，请按以下方式进行decalare并使用相同的算法

```
byte[] prependBytes = new byte[]{0,0}; 
```

您还说您正在将字节数组转换为十六进制，这可能会截断前导零。要对此进行测试，请尝试在前面添加以下内容并转换为十六进制，看看是否有不同的输出：

```
byte[] prependBytes = new byte[]{1,1}; 
```

如果它正在删除您想要的前导零，您可能希望将您的十六进制数字转换为字符串并对其进行格式化。

# excel - 禁止用户查看 ActiveX 控件属性 Excel (VBA)

> ID：11322077
> 
> 赞同：1
> 
> 时间：2012-07-04T03:29:08.893
> 
> 标签：excel, activex, vba

我目前正在 Microsoft Excel 上构建基于 VBA 的应用程序。

我使用简单的 activeX 控件来获取用户 ID/密码。这样做的问题是用户可能能够通过查看 activeX 标签的“属性”来查看密码的值

有什么方法可以阻止用户激活“设计”模式并直接查看文本框的值？或者有没有更好的方法将凭据存储在系统上？我使用文本框的原因是因为它们更易于用户使用（您可以保存该值，因此您可以在将来使用该程序而无需再次重新输入用户名/密码）并且易于维护（不需要表格/弹出窗口）

感谢您的帮助。

这就是工作表上的 id/密码框的样子（使用 activeX 控件） ![](../Images/60268a1553542c7fc9153d54ceac9e25.png)

问题是如果用户打开设计模式 -> 属性，他们可以看到密码文本框的值 ![](../Images/400d3aaedd02cb851f654c7e906c786b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:58:38.370

我会创建一个用户表单来处理用户名/密码系统。通过在 VBA IDE 中将工作表的“Visible”属性设置为“xlSheetVeryHidden”，表单可以将用户名和密码保存到非常隐藏的工作表中。除非您进入 VBA IDE 并更改可见属性，否则无法取消隐藏工作表。

![工作表可见性属性](../Images/b03ab1812324bf192cd30cd498145765.png)

打开表单时，从该工作表上的两个范围加载数据。您可以将范围名称设置为对名称管理器隐藏，以防您担心用户计算范围名称并将值放入单元格中。

唯一知道单元格范围名称是什么以及在哪里访问它们的人将是那些可以访问 VBA 代码的人。所以用密码保护它，它会像你在 Excel 中一样安全，至少在我看来。

在任何情况下，安全都是相对的事情。某物需要有多安全取决于数据的重要性。如果只是为了防止人们弄乱他们不应该做的事情，那么简单的安全性就可以了。如果它是高度机密的数据，那么您无论如何都不应该允许用户保存密码。也许是用户名，但不是密码。

# android - 获取 ListView 值 getItem 中的类强制转换异常

> ID：11322081
> 
> 赞同：2
> 
> 时间：2012-07-04T03:29:43.827
> 
> 标签：android

Ahm 昨天我发布了关于使用 listfragment 在 listview 中查看数据的问题的代码。我得到了解决方案，它工作正常。但现在的问题是 getItem 函数返回一个错误说“java.lang.classcastexception：java.lang.string”。这是我的代码：

我的列表片段：

```
public class ListTest2 extends ListFragment {

      @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub

          ListAdapter listAdapter = getListAdapter();
          Log.i("here","here");
          ListSql cc = (ListSql) listAdapter.getItem(position);

          //Toast.makeText(getActivity(), "" + l.getSelectedItem() ,Toast.LENGTH_LONG).show();
          ArrayList<String> arr = new ArrayList<String>();
         Log.i("",cc.getName());

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);

        List<ListSql> results = new ArrayList<ListSql>();
        ArrayList<String> arr = new ArrayList<String>();
        HotorNot hon = new HotorNot(getActivity());
        hon.open();
        arr = hon.listme(arr);
        hon.close();
        Toast.makeText(getActivity(), arr.toString(), Toast.LENGTH_LONG).show();
        setListAdapter(new SqlParser(getActivity(),arr));
      } 
} 
```

我的 ListSql 类：

```
public class ListSql {

    private String Fname;
    private String Fpass;
    private ArrayList<String> arList;

    private Context myContext;
    private List<ListSql> items;
    private LayoutInflater  mInflater;
    private DBhelper myHelper;
    private SQLiteDatabase myDbase;

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "_persons_name";
    public static final String KEY_HOTNESS = "person_hotness";

    private static final String DATABASE_NAME = "HotOrNotdb";
    private static final String DATABASE_TABLE = "peopleTable";
    private static final int DATABASE_VERSION = 1;

    public static class DBhelper extends SQLiteOpenHelper{

        public DBhelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(
                    "Create Table " + DATABASE_TABLE + " (" + 
                    KEY_ROWID + " Integer PRIMARY KEY AUTOINCREMENT, " + 
                    KEY_NAME + " TEXT NOT NULL, " + 
                    KEY_HOTNESS + " TEXT NOT NULL);"
                    );

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXIST " + DATABASE_TABLE);
            onCreate(db);
        }

    }

    public String getName(){
        return Fname;
    }

    public String getPass(){

        return Fpass;
    }

    public ListSql open(){
        myHelper = new DBhelper(myContext);
        myDbase = myHelper.getWritableDatabase();
        Log.i("open","open");
        return this;
    }
    public void close(){
        myHelper.close();

    }

    public ArrayList<String> Listme(ArrayList<String> arr){
        String sql = "select * from " + DATABASE_TABLE;
        Cursor c = myDbase.rawQuery(sql, null);
        if(c !=null){
            if  (c.moveToFirst()) {
                do {
                    String firstName = c.getString(c.getColumnIndex(KEY_NAME));
                    String pass = c.getString(c.getColumnIndex(KEY_HOTNESS));
                    arr.add("username " + firstName + ",  Password: " + pass);

                }while (c.moveToNext());
            } 

            return arr;

        }

        return null;

    }

} 
```

和我的 Baseadapter：

```
public class SqlParser extends BaseAdapter {

    private Context myContext;
    private ArrayList<String> items;
    private LayoutInflater  mInflater;
    private DBhelper myHelper;
    private SQLiteDatabase myDbase;

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "_persons_name";
    public static final String KEY_HOTNESS = "person_hotness";

    private static final String DATABASE_NAME = "HotOrNotdb";
    private static final String DATABASE_TABLE = "peopleTable";
    private static final int DATABASE_VERSION = 1;

    public SqlParser(Context context ,ArrayList<String> arr){
        this.myContext = context;
        this.items = arr;
        mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    private class ViewHolder {
        public TextView textView;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return items.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return items.get(position);
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ArrayList<String> arr = new ArrayList<String>();
        View view = convertView;
        ViewHolder viewHolder;
        TextView namef ;
        ImageView prof;
        Bitmap bMap;
        if (view == null) {
            view = mInflater.inflate(R.layout.listinflate, parent, false);

            /**
            viewHolder = new ViewHolder();
            viewHolder.textView = (TextView) view.findViewById(R.id.textView1);
            view.setTag(viewHolder); **/

            /*** You can do this manualy without using holder ***/
             namef = (TextView)view.findViewById(R.id.textView1);

            /*** You can do this manualy on setting the tag to individual components rather than using holder  ***/ 
            view.setTag(namef);

        }else {
            viewHolder = (ViewHolder) view.getTag();
            namef = (TextView) view.getTag();

        }
        namef.setText(items.get(position));

        return view;
    }
} 
```

我不知道是什么导致了这个错误。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T03:59:54.777

`String`尝试将 a转换为 a时会引发异常`ListSql`：

```
ListSql cc = (ListSql) listAdapter.getItem(position); 
```

相反，它应该是这样的：

```
String cc = (String) listAdapter.getItem(position); 
```

因为您的自定义适配器`String`从`getItem`方法返回 a 。

# sql - 使用自定义 SQL 对 WordPress 网站上的帖子进行排序

> ID：11322082
> 
> 赞同：2
> 
> 时间：2012-07-04T03:30:08.637
> 
> 标签：sql, wordpress

我有一个 php 函数，它生成一个逗号分隔的帖子 ID 列表，指定这些帖子应该在我的 WordPress 网站上显示的顺序。

我正在寻找一个可以插入 SQL 查询的地方，例如：

```
SELECT * FROM wp_posts WHERE ID IN ('1', '2', '3') 
```

我应该修改哪个 .php 文件？我应该如何表达 SQL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:55:26.047

将您的 php 函数粘贴到文件（根 wordpress 文件夹）/wp-content/themes/（您的主题名称）/functions.php SQL 查询应该是这样的。

```
$sql=$wpdb->prepare("SELECT * FROM wp_posts WHERE ID IN ('1', '2', '3');");
$results=$wpdb->get_results($sql);          
echo ">>>>".$result[0]->something."<br />";//blah blah... 
```

哇，我没有提到 $wpdp 是全局的，我的系统上的代码仍然可以正常工作！无论如何，我建议您在函数中编写“global $wpdb”。

现在的主要问题是你应该从哪里调用这个函数；你必须从 theme/(your theme)/index.php 调用它

尝试弄清楚帖子是如何在您当前的主题中生成的，您可能会得到您需要做的事情！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T20:24:35.637

首先，您应该[`wp_query`](http://codex.wordpress.org/Class_Reference/WP_Query)为此使用。它旨在查询帖子。

```
<?php
$args = array(
    'post__in' => array ( 1,2,3) //the Ids
);
$query = new WP_Query($args);
if ($query->have_posts()){
    while ($query->have_posts()) {
        $query->the_post();
        echo get_the_ID().'<br/>';
    }

} else {
    echo 'no posts found';
} 
```

**关于放置**
，我建议在[自定义模板](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)中进行，使用上面的代码制作一个简单的模板，创建一个页面，为其分配该模板并将页面设为私有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T03:39:09.687

```
global $wpdb; $results = $wpdb->get_results("SELECT * FROM {$wpdb->posts} WHERE ID IN (1, 2, 3) ORDER BY ID"); 
```

您可以在主题的 functions.php 文件中使用它。

# java - 关于Java的Serializable，需要澄清

> ID：11322086
> 
> 赞同：1
> 
> 时间：2012-07-04T03:30:40.117
> 
> 标签：java, serialization

在实现`Serializable`接口时，在Java中，我们需要设置它的`serialVersionUID`长度。

**是否应该选择默认或自动生成的 long 有什么区别？**

**什么时候应该优先于另一个？**

如果选择了自动生成的长，如果更改，是否应该在事件类中更改？换句话说，分配给 serialVersionUID 的值.. 它与类的当前结构以及在那里声明的字段和方法有关吗？

```
private static final long   serialVersionUID    = 1L;
private static final long   serialVersionUID    = 6749067740891125834L; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:37:14.103

默认和自动生成的 long 之间的主要区别在于，自动生成的序列版本 UID 是基于对象的字段。如果您有没有版本 ID 的对象的持久化副本，那么使用生成的版本可以帮助确保与已持久化的对象的兼容性。因此，我倾向于使用生成的版本。无论哪种情况，如果进行了不兼容的更改，您都需要更新版本 ID。

[http://docs.oracle.com/javase/1.5.0/docs/guide/serialization/spec/version.html](http://docs.oracle.com/javase/1.5.0/docs/guide/serialization/spec/version.html) 5.6.1 和 5.6.2 节描述了哪些更改是兼容的以及哪些更改会破坏序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:36:42.463

序列号版本 UID 可以是任意数字，其值没有具体含义。

从 1 开始并在每次格式更改时递增它是有意义且方便的。

但是，如果您从一开始就考虑过，您只能这样做。如果您已经拥有需要继续读取的现有数据，则此数据将具有自动生成的 ID。在这种情况下，您别无选择，只能匹配该值。

# c# - Enumerable.Range 为什么要实现 IDisposable？

> ID：11322094
> 
> 赞同：11
> 
> 时间：2012-07-04T03:32:04.617
> 
> 标签：c#, .net, iterator, idisposable, resource-management

只是想知道为什么`Enumerable.Range`实现`IDisposable`.

我明白为什么`IEnumerator<T>`这样做，但`IEnumerable<T>`不需要它。

* * *

（我在玩我的 .Memoise() 实现时发现了这一点，它的声明如下

```
if (enumerable is IDisposable)
    ((IDisposable)enumerable).Dispose(); 
```

在它的“源代码完成”方法中，我出于好奇放置了一个断点，并由测试触发。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T03:49:21.197

`Enumerable.Range``yield return`在其方法体中使用。该`yield return`语句生成一个匿名类型，`IDisposable`在编译器的魔力下实现 ，如下所示：

```
static IEnumerable<int> GetNumbers()
{
    for (int i = 1; i < 10; i += 2)
    {
        yield return i;
    }
} 
```

编译后，有一个匿名嵌套类是这样的：

```
[CompilerGenerated]
private sealed class <GetNumbers>d__0 
   : IEnumerable<int>, IEnumerable, IEnumerator<int>, IEnumerator, IDisposable
{
    //the implementation
    //note the interface is implemented explicitly
    void IDisposable.Dispose() { }
} 
```

所以结果`is`a `IDisposable`。在此示例中，该`Dispose`方法留空。我认为原因是没有什么需要处理的。如果您`yield return`的类型包含非托管资源，您可能会得到不同的编译结果。（不确定）

# c++ - 如何在 C++11 (STL) 中创建一个压缩两个元组的函数？

> ID：11322095
> 
> 赞同：18
> 
> 时间：2012-07-04T03:32:16.273
> 
> 标签：c++, c++11, tuples, template-meta-programming

*我最近遇到了这个难题，终于能够找出一个骇人听闻的答案（使用索引数组），并想分享它（答案如下）。我确信有使用模板递归的答案和使用`boost`; 如果您有兴趣，请分享其他方法来做到这一点。我认为将这些全部放在一个地方可能会使其他人受益，并且对于学习一些很酷的 C++11 模板元编程技巧很有用。*

**问题：** 给定两个长度相等的元组：

```
auto tup1 = std::make_tuple(1, 'b', -10);
auto tup2 = std::make_tuple(2.5, 2, std::string("even strings?!")); 
```

您如何创建一个将两个元组“压缩”成对的异构元组的函数？

```
std::tuple<
    std::pair<int, double>,
    std::pair<char, int>,
    std::pair<int, std::string> > result =
    tuple_zip( tup1, tup2 ); 
```

在哪里

```
std::get<0>(result) == std::make_pair(1, 2.5);
std::get<1>(result) == std::make_pair('b', 2);
std::get<2>(result) == std::make_pair(-10, std::string("even strings?!")); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-04T03:32:17.350

**首先，快速浏览索引数组：**

```
template<std::size_t ...S>
struct seq { };

// And now an example of how index arrays are used to print a tuple:
template <typename ...T, std::size_t ...S>
void print_helper(std::tuple<T...> tup, seq<S...> s) {
  // this trick is exceptionally useful:
  // ((std::cout << std::get<S>(tup) << " "), 0) executes the cout
  // and returns 0.
  // { 0... } expands (because the expression has an S in it),
  // returning an array of length sizeof...(S) full of zeros.
  // The array isn't used, but it's a great hack to do one operation
  // for each std::size_t in S.
  int garbage[] = { ((std::cout << std::get<S>(tup) << " "), 0)... };
  std::cout << std::endl;
} 
```

现在使用我们的 print_helper 函数：

```
int main() {
  print_helper(std::make_tuple(10, 0.66, 'h'), seq<0,1,2>() );
  return 0;
} 
```

不过，打字`seq<0,1,2>`可能会有点痛苦。所以我们可以使用模板递归来创建一个类来生成`seq`s，这样`gens<3>::type`就和`seq<0,1,2>`：

```
template<std::size_t N, std::size_t ...S>
struct gens : gens<N-1, N-1, S...> { };

template<std::size_t ...S>
struct gens<0, S...> {
  typedef seq<S...> type;
};

int main() {
  print_helper(std::make_tuple(10, 0.66, 'h'), gens<3>::type() );
  return 0;
} 
```

由于`N`in`gens<N>::type`始终是元组中元素的数量，因此您可以换`print_helper`行以使其更容易：

```
template <typename ...T>
void print(std::tuple<T...> tup) {
  print_helper(tup, typename gens<sizeof...(T)>::type() );
}

int main() {
  print(std::make_tuple(10, 0.66, 'h'));
  return 0;
} 
```

请注意，模板参数可以自动推导出（输入所有这些会很痛苦，不是吗？）。

**现在，`tuple_zip`功能：**

和以前一样，从辅助函数开始：

```
template <template <typename ...> class Tup1,
    template <typename ...> class Tup2,
    typename ...A, typename ...B,
    std::size_t ...S>
auto tuple_zip_helper(Tup1<A...> t1, Tup2<B...> t2, seq<S...> s) ->
decltype(std::make_tuple(std::make_pair(std::get<S>(t1),std::get<S>(t2))...)) {
  return std::make_tuple( std::make_pair( std::get<S>(t1), std::get<S>(t2) )...);
} 
```

代码有点棘手，尤其是尾随返回类型（返回类型声明为`auto`并`->`在参数定义后提供）。这让我们避免了*定义*返回类型的问题，只需声明它返回函数体中使用的表达式（如果`x`和`y`是`int`s，`delctype(x+y)`在编译时解析为`int`）。

现在将它包装在一个提供适当`seq<0, 1...N>`using的函数中`gens<N>::type`：

```
template <template <typename ...> class Tup1,
  template <typename ...> class Tup2,
  typename ...A, typename ...B>
auto tuple_zip(Tup1<A...> t1, Tup2<B...> t2) ->
decltype(tuple_zip_helper(t1, t2, typename gens<sizeof...(A)>::type() )) {
  static_assert(sizeof...(A) == sizeof...(B), "The tuple sizes must be the same");
  return tuple_zip_helper( t1, t2, typename gens<sizeof...(A)>::type() );
} 
```

现在您可以按照问题中的说明使用它：

```
int main() {
  auto tup1 = std::make_tuple(1, 'b', -10);
  auto tup2 = std::make_tuple(2.5, 2, std::string("even strings?!"));
  std::tuple<
    std::pair<int, double>,
    std::pair<char, int>,
    std::pair<int, std::string> > x = tuple_zip( tup1, tup2 );

  // this is also equivalent:
  //  auto x = tuple_zip( tup1, tup2 );

  return 0;
} 
```

最后，如果你提供一个`<<`操作符，`std::pair`你可以使用我们上面定义的 print 函数来打印压缩后的结果：

```
template <typename A, typename B>
std::ostream & operator << (std::ostream & os, const std::pair<A, B> & pair) {
  os << "pair("<< pair.first << "," << pair.second << ")";
  return os;
}

int main() {
  auto tup1 = std::make_tuple(1, 'b', -10);
  auto tup2 = std::make_tuple(2.5, 2, std::string("even strings?!"));
  auto x = tuple_zip( tup1, tup2 );

  std::cout << "zipping: ";
  print(tup1);
  std::cout << "with   : ";
  print(tup2);

  std::cout << "yields : ";
  print(x);

  return 0;
} 
```

输出是：

> zipping: 1 b 10
> with : 2.5 2 even strings?!
> 产生：pair(1,2.5) pair(b,2) pair(10,even strings?!)

Like `std::array`,`std::tuple`是在编译时定义的，因此它可用于生成更可优化的代码（与 和 之类的容器相比，在编译时已知更多信息`std::vector`）`std::list`。因此，即使有时需要做一些工作，有时您也可以使用它来编写快速而聪明的代码。快乐黑客！

* * *

**编辑：**

根据要求，允许不同大小的元组和空指针填充：

```
template <typename T, std::size_t N, std::size_t ...S>
auto array_to_tuple_helper(const std::array<T, N> & arr, seq<S...> s) -> decltype(std::make_tuple(arr[S]...)) {
  return std::make_tuple(arr[S]...);
}

template <typename T, std::size_t N>
auto array_to_tuple(const std::array<T, N> & arr) -> decltype( array_to_tuple_helper(arr, typename gens<N>::type()) ) {
  return array_to_tuple_helper(arr, typename gens<N>::type());
}

template <std::size_t N, template <typename ...> class Tup, typename ...A>
auto pad(Tup<A...> tup) -> decltype(tuple_cat(tup, array_to_tuple(std::array<std::nullptr_t, N>()) )) {
  return tuple_cat(tup, array_to_tuple(std::array<std::nullptr_t, N>()) );
}

#define EXTENSION_TO_FIRST(first,second) ((first)>(second) ? (first)-(second) : 0)

template <template <typename ...> class Tup1, template <typename ...> class Tup2, typename ...A, typename ...B>
auto pad_first(Tup1<A...> t1, Tup2<B...> t2) -> decltype( pad<EXTENSION_TO_FIRST(sizeof...(B), sizeof...(A)), Tup1, A...>(t1) ) {
  return pad<EXTENSION_TO_FIRST(sizeof...(B), sizeof...(A)), Tup1, A...>(t1);
}

template <template <typename ...> class Tup1, template <typename ...> class Tup2, typename ...A, typename ...B>
auto diff_size_tuple_zip(Tup1<A...> t1, Tup2<B...> t2) ->
  decltype( tuple_zip( pad_first(t1, t2), pad_first(t2, t1) ) ) {
  return tuple_zip( pad_first(t1, t2), pad_first(t2, t1) );
} 
```

顺便说一句，你现在需要这个来使用我们方便的`print`功能：

```
std::ostream & operator << (std::ostream & os, std::nullptr_t) {
  os << "null_ptr";
  return os;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-05T21:51:55.330

对于任意数量的元组来说，这样做并不是非常困难。

一种方法是创建一个函数，将 N 个元组中特定索引处的所有元素收集到一个新元组中。然后有另一个函数将这些元组收集到原始元组中每个索引的新元组中。

所有这些都可以通过使用参数包扩展表达式来相对简单地完成，而无需任何递归函数。

```
#include <cstddef>
#include <tuple>

namespace detail {
    // Describe the type of a tuple with element I from each input tuple.
    // Needed to preserve the exact types from the input tuples.
    template<std::size_t I, typename... Tuples>
    using zip_tuple_at_index_t = std::tuple<std::tuple_element_t<I, std::decay_t<Tuples>>...>;

    // Collect all elements at index I from all input tuples as a new tuple.
    template<std::size_t I, typename... Tuples>
    zip_tuple_at_index_t<I, Tuples...> zip_tuple_at_index(Tuples && ...tuples) {
        return {std::get<I>(std::forward<Tuples>(tuples))...};
    }

    // Create a tuple with the result of zip_tuple_at_index for each index.
    // The explicit return type prevents flattening into a single tuple
    // when sizeof...(Tuples) == 1 or sizeof...(I) == 1 .
    template<typename... Tuples, std::size_t... I>
    std::tuple<zip_tuple_at_index_t<I, Tuples...>...> tuple_zip_impl(Tuples && ...tuples, std::index_sequence<I...>) {
        return {zip_tuple_at_index<I>(std::forward<Tuples>(tuples)...)...};
    }

}

// Zip a number of tuples together into a tuple of tuples.
// Take the first tuple separately so we can easily get its size.
template<typename Head, typename... Tail>
auto tuple_zip(Head && head, Tail && ...tail) {
    constexpr std::size_t size = std::tuple_size_v<std::decay_t<Head>>;

    static_assert(
        ((std::tuple_size_v<std::decay_t<Tail>> == size) && ...),
        "Tuple size mismatch, can not zip."
    );

    return detail::tuple_zip_impl<Head, Tail...>(
        std::forward<Head>(head),
        std::forward<Tail>(tail)...,
        std::make_index_sequence<size>()
    );
} 
```

在此处查看实际操作：[https ://wandbox.org/permlink/EQhvLPyRfDrtjDMw](https://wandbox.org/permlink/EQhvLPyRfDrtjDMw)

我使用了一些 C++14/17 特性，但没有什么必要的。最难替换的部分是用于检查元组大小的折叠表达式。那可能必须成为递归检查。

# php - 按 ISO 日期对 PHP 数组进行排序

> ID：11322098
> 
> 赞同：4
> 
> 时间：2012-07-04T03:32:25.593
> 
> 标签：php, arrays, citrix, iso8601

我正在尝试按 ISO 8601 格式的日期和时间对 PHP 中的数组进行排序。我仍在尝试掌握 PHP，并尝试了许多有关堆栈溢出的解决方案，但我无法确定正确的功能。希望这是一个简单的答案，对其他人有帮助。

仅供参考，此数组是由 Citrix API for GoToMeeting 生成的。我想在列表中最早的时间根据 startTime 对数组进行排序。

这是使用 var_export 的数组的样子，并显示了两个结果：

```
array (
 0 => stdClass::__set_state(
  array(
   'createTime' => '2012-07-03T19:36:58.+0000',
   'status' => 'INACTIVE',
   'subject' => 'Client 1',
   'startTime' => '2012-07-10T14:00:00.+0000',
   'conferenceCallInfo' => 'United States: xxxxx Access Code: xxxxx',
   'passwordRequired' => 'false',
   'meetingType' => 'Scheduled',
   'maxParticipants' => 26,
   'endTime' => '2012-07-10T15:00:00.+0000',
   'uniqueMeetingId' => 12345678,
   'meetingid' => 123456789,
  )
 ),
 1 => stdClass::__set_state(
  array(
   'createTime' => '2012-07-02T21:57:48.+0000',
   'status' => 'INACTIVE',
   'subject' => 'Client 2',
   'startTime' => '2012-07-06T19:00:00.+0000',
   'conferenceCallInfo' => 'United States: xxxxx Access Code: xxxxx',
   'passwordRequired' => 'false',
   'meetingType' => 'Scheduled',
   'maxParticipants' => 26,
   'endTime' => '2012-07-06T20:00:00.+0000',
   'uniqueMeetingId' => 12345678,
   'meetingid' => 123456789,
  )
 ),
) 
```

我的目标是然后使用 foreach 循环将数组输出到 html div 中，此代码是完整的并且运行良好，但我的排序已关闭 :-)

预先感谢您的任何帮助！

史蒂夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T03:39:29.657

如果将其包装在回调中并`usort()` [在此处使用文档，则可以实现任何可以想到的排序技术](http://php.net/manual/en/function.usort.php)

在您的回调中，您可以使用 strtotime 或类似的，并进行简单的 int 比较。

```
$myDateSort = function($obj1, $obj2) {
  $date1 = strtotime($obj1->startTime);
  $date2 = strtotime($obj2->startTime);
  return $date1 - $date2; // if date1 is earlier, this will be negative
}
usort($myArray, $myDateSort); 
```

# codeigniter - 重新排序 URI 中的参数和控制器

> ID：11322103
> 
> 赞同：0
> 
> 时间：2012-07-04T03:33:51.047
> 
> 标签：codeigniter, codeigniter-url

我希望我在 codeigniter 中的所有 URL 都以第一个 URI 段作为参数传递给控制器​​。

这是我的用例：

对于网址：[http ://www.example.com/site/page/1](http://www.example.com/site/page/1)

“站点”将是传递给控制器​​“页面”的参数，“1”也是一个参数（以及它之后的任何内容）。

Mod_Rewrite 会比 codeigniter 路由更合适吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:40:50.747

您可以将其写入特定页面的路线中，例如

```
 $route['site/page/(:num)'] = 'page/site/$1'; 
```

# .net - WCF 肥皂格式

> ID：11322104
> 
> 赞同：3
> 
> 时间：2012-07-04T03:34:27.100
> 
> 标签：.net, wcf

我正在开发一个将由政府机构使用的 WCF 服务。由于他们将访问由不同承包公司托管的相同服务，因此他们指定了消息的确切**外观**（因此，他们只会更改 URL 以访问每个公司的服务）。

所以，对于这个方法：

```
sbyte Execute(int Id1, short Id2, string Id3, string Id4, string Value) 
```

他们希望我们完全接受以下 SOAP 消息：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http:/
/www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/
XMLSchema">
    <SOAP-ENV:Body>
        <m:Execute xmlns:m="http://tempuri.org/">
            <m:Id1>1</m:Id1>
            <m:Id2>2</m:Id2>
            <m:Id3>3</m:Id3>
            <m:Id4>4</m:Id4>
            <m:Value></m:Value>
        </m:Execute>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我们的回应必须是：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
        <ExecuteResponse xmlns="http://tempuri.org/">
            <ExecuteResult>
                <res>0</res>
            </ExecuteResult>
        </ExecuteResponse>
    </soap:Body>
</soap:Envelope> 
```

现在，我当前服务的消息，使用 binding="basicHttpBinding" 并使用我的测试客户端（以及 WCF 测试客户端工具），如下所示：

要求：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://tempuri.org/ISomeService/Execute</Action>
  </s:Header>
  <s:Body>
    <Execute xmlns="http://tempuri.org/">
      <Id1>0</Id1>
      <Id2>0</Id2>
      <Id3>0</Id3>
      <Id4>0</Id4>
      <Value>0</Value>
    </Execute>
  </s:Body>
</s:Envelope> 
```

回复：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header />
  <s:Body>
    <ExecuteResponse xmlns="http://tempuri.org/">
      <ExecuteResult>1</ExecuteResult>
    </ExecuteResponse>
  </s:Body>
</s:Envelope> 
```

所以，**我的问题是**：我应该改变什么，让我的服务使用 SOAP 消息，如

“<SOAP-ENV:信封 xmlns:SOAP- ... > <SOAP-ENV:Body>”

而不是使用...

<s:信封 .... > <s:Header />

我尝试了几种绑定、自定义配置等，但我无法让它看起来一样。

这是我当前的配置，使用建议的 customBinding：

```
 <system.serviceModel>
    <services>
      <service name="Test.SomeService">
        <endpoint binding="customBinding" bindingConfiguration="Soap11Binding"
          contract="Test.ISomeService" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <bindings>
      <customBinding>
        <binding name="Soap11Binding">
          <textMessageEncoding messageVersion="Soap11" writeEncoding="utf-8">
            <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          </textMessageEncoding>
          <httpTransport allowCookies="true" />
        </binding>
      </customBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

任何线索任何人？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:34:34.840

您需要将 WCF 服务的绑定更改为`basicHttpBinding`, which uses `SOAP v1.1`, while `wsHttpBinding`uses `SOAP v1.2`。

见这里：[`SOAP 1.1`](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383490)vs[`SOAP 1.2`](http://www.w3.org/TR/2007/REC-soap12-part0-20070427/#L1165)

您还可以创建自定义绑定并明确指定您想要的`SOAP 1.1`：

```
<customBinding>  
    <binding name="Soap11Binding">  
        <textMessageEncoding messageVersion="Soap11" writeEncoding="utf-8">  
            <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"  
                maxBytesPerRead="4096" maxNameTableCharCount="16384" />  
        </textMessageEncoding>  
        <httpTransport allowCookies="true" />  
    </binding>  
</customBinding> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:44:27.167

您可以使用自定义消息编码器将消息格式化为您需要的方式。这是如何实现它的 URL：http: [//msdn.microsoft.com/en-us/library/ms751486.aspx](http://msdn.microsoft.com/en-us/library/ms751486.aspx)

在 WriteMessage 方法中，您可以对消息进行所需的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T13:10:22.783

要完全控制 wcf 中的响应，您需要使用 [MessageContract]。

[MessageContract] 是简单的类，进一步用作 SOAP 数据包进行传输。

通过考虑您的要求，您需要使用 MessageContract。

# python - 将所有 Row 值放入 CELLS Python

> ID：11322109
> 
> 赞同：-2
> 
> 时间：2012-07-04T03:36:43.823
> 
> 标签：python, rows, cells

如何将所有行值放入单元格

```
rows = db().select(i.INV_ITEMCODE, n.INV_NAME, orderby=i.INV_ITEMCODE, join=n.on(i.POS_TASKCODE == n.POS_TASKCODE))
for r in rows:
    code = str(r.db_i_item.INV_ITEMCODE)
    desc = str(r.db_i_name.INV_NAME)     
    row = [dict(rows=rows)]
    cell = [code, desc]
    row = [dict(cell=cell, id=str(+1))]
    records = []
    total = [] 
    result = None
    result = dict(records=str(total), total='1', row=row , page='1') #records should get the total cell
    return result 
```

结果仅返回一个单元格值dict：{'records'：'[]'，'total'：'1'，'page'：'1'，'row'：[{'cell'：['LUBS001'， '有。全合成 1L'], 'id': '1'}]}

但 ROWS 有以下查询：

```
Rows: db_i_item.INV_ITEMCODE,db_i_name.INV_NAME
LUBS001,Hav. Fully Synthetic 1L
LUBS002,Hav. Formula 1L
LUBS003,Hav. SF 1L
LUBS004,Hav. Plus 2T 200ML
LUBS005,Havoline Plus 2T 1L
LUBS006,Havoline Super 4T 1L
LUBS007,Havoline EZY 4T 1L
LUBS008,Delo Sports 1L
LUBS009,Delo Gold Multigrade 1L
LUBS010,Delo Gold Monograde 1L
LUBS011,Delo Silver 1L
LUBS012,Super Diesel 1L
LUBS013,Brake Fluid 250ML
LUBS014,Brake Fluid 500ML
LUBS015,Brake Fluid 1L
LUBS016,Texamatic ATF 1L
LUBS020,Coolant
LUBS21,Delo
PET001,DIESEL
PET002,SILVER
PET003,GOLD
PET004,REGULAR
PET005,KEROSENE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:56:59.480

明白了：D

'items = db(q1 & q2 & search).select(i.INV_ITEMCODE, n.INV_NAME, m.INV_KIND, p.INV_PRICE, m.INV_DRTABLE, p.INV_PRICECODE, p.INV_ITEMCODEX, orderby=o) ri = 0 行= []

```
 for ri, r in enumerate(items):
        if r.db_i_matrix.INV_KIND == 'W':
            kind = 'Wet'
        else:
            kind = 'Dry'
        cell = [ str(ri + 1), str(r.db_i_item.INV_ITEMCODE), str(r.db_i_name.INV_NAME), str(kind), str(r.db_i_price.INV_PRICE),
                 str(r.db_i_matrix.INV_DRTABLE), str(r.db_i_price.INV_PRICECODE), str(r.db_i_price.INV_ITEMCODEX)] 
        records = ri + 1
        rows += [dict(id=str(ri + 1), cell=cell)]
    ikind = dict(records=records, totals='1', rows=rows)' 
```

# c++ - C++ 未在 Scope 错误中声明

> ID：11322111
> 
> 赞同：-1
> 
> 时间：2012-07-04T03:37:18.867
> 
> 标签：c++, header, scope

嗨，我正在自学 C++，但我遇到了这个错误

```
'verifyDateInput' was not declared in this scope 
```

错误发生在下面对 verifyDateInput 的调用中。

```
 void setAll(std::string dateString) {

        if(verifyDateInput(dateString.c_str())) {

            std::vector<std::string> results = split(dateString, '/');
            month = results.at(0).;
            day = results.at(1);
            year = results.at(2);
        }
    } 
```

我确信这只是我没有得到的语言的一些细微差别。函数调用在头文件的结构声明中，在头文件中我有函数的声明。（不确定声明是否是正确的词.....我只是写函数签名的东西）

```
bool verifyDateInput(const char* input); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:53:37.457

> 函数调用在头文件的结构声明中

你的意思是你在结构定义中写了这样的声明？

```
struct SomeStruct
{
    // variables
    bool verifyDateInput(const char* input);
}; 
```

在这种情况下`verifyDateInput`是 的成员函数`SomeStruct`。您将需要在某处定义函数，例如：

```
bool SomeStruct::verifyDateInput( const char* input );
{
    // code
} 
```

并使用`SomeStruct`类似的对象调用它

```
SomeStruct somObj;
somObj.verifyDateInput( strVal ); 
```

如果您不是指成员函数，请尝试在结构定义之外编写它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:17:14.560

所以记住孩子们，总是在程序文件中声明你的函数高于它们的用法。问题是我的函数声明低于结构声明。

感谢 Naveen 和 chris 立即认识到这一点

# java - 覆盖对象而不是更新 appengine 存储有缺点吗？

> ID：11322112
> 
> 赞同：-2
> 
> 时间：2012-07-04T03:37:27.830
> 
> 标签：java, google-app-engine

我有一个像这样的课程：

```
class myclass{
    Long id;
    String a;
    Text b;
} 
```

在 appengine 文档中的示例中，要更新对象，我们必须从 DataStore 中恢复它，对其进行修改，然后关闭 PersistenceManager。如果我覆盖它而不从 DataStore 中恢复它会怎样？我缓存了那个对象，所以我有你的 id 和其他属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T03:41:00.433

您可以直接覆盖它，而无需先加载以前的值。（盲更新）

但是，如果您需要知道这些旧值，例如在仅对某些字段进行部分更新时，这将不起作用。

# redis - 如何找到分配给redis实例的内存？

> ID：11322114
> 
> 赞同：5
> 
> 时间：2012-07-04T03:37:51.777
> 
> 标签：redis

使用 Redis`info`命令，我可以获得 redis 服务器的所有统计信息。我还能够获得使用的内存指标。

如何获取分配给 Redis 实例的总内存，以便获取已使用内存的百分比？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T11:55:11.583

You could do something like:

```
$ ps aux -m | grep redis-server | head -n1 |  awk '{printf "VSZ: %dMB, RSS: %dMB\n", $5/1024, $6/1024}' 
```

This will display the rounded Virtual and Real memory sizes of the redis-server process in MB (to see actual numbers remove the `/1024` from both parameters).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T03:42:38.733

Redis 默认获取所有可用内存（根据需要和所有可用物理内存）。`maxmemory`不过，您可以使用文件中的参数来限制分配给 Redis 的内存量`redis.conf`。

这是该文件的摘录：

```
# Don't use more memory than the specified amount of bytes.
# When the memory limit is reached Redis will try to remove keys with an
# EXPIRE set. It will try to start freeing keys that are going to expire
# in little time and preserve keys with a longer time to live.
# Redis will also try to remove objects from free lists if possible.
#
# If all this fails, Redis will start to reply with errors to commands
# that will use more memory, like SET, LPUSH, and so on, and will continue
# to reply to most read-only commands like GET.
#
# WARNING: maxmemory can be a good idea mainly if you want to use Redis as a
# 'state' server or cache, not as a real DB. When Redis is used as a real
# database the memory usage will grow over the weeks, it will be obvious if
# it is going to use too much memory in the long run, and you'll have the time
# to upgrade. With maxmemory after the limit is reached you'll start to get
# errors for write operations, and this may even lead to DB inconsistency.
#
# maxmemory <bytes> 
```

# android - 应用程序在播放 res/raw 文件夹中的 wav 文件时意外停止

> ID：11322115
> 
> 赞同：0
> 
> 时间：2012-07-04T03:37:54.353
> 
> 标签：android

我的 res/raw 文件夹中有一个“comin.wav”。但是当我尝试像这样播放文件时，应用程序意外停止。代码中没有显示错误。仅当代码在模拟器上运行时才会出现错误

```
MediaPlayer mediaPlayer=MediaPlayer.create(MyActivity.this,R.raw.comin);
mediaPlayer.start(); 
```

我应该怎么办？？

# javascript - Javascript 在 Firefox 中有效，但在 Chrome 中无效

> ID：11322116
> 
> 赞同：0
> 
> 时间：2012-07-04T03:38:02.993
> 
> 标签：javascript, html, firefox, google-chrome, innerhtml

我的 JavaScript 代码在 Firefox 中运行良好，但在 chrome 中不行。在 Firefox 中，只要选择该选项，就会显示正确数量的表单（由 JavaScript 函数中的代码构建），而在 Chrome 中则没有任何反应。我不确定为什么。由于我主要使用 Linux 计算机，因此我有一段时间没有检查过，但我相信 IE9 也可以。

如果您能帮我找到解决方案，我将不胜感激。顺便说一句，我确实阅读了另一个类似标题的问题，但它似乎没有回答这个问题。

```
<script type="text/javascript">
  function showForms(numForms)
  {
      // build  the form
      var form = "";
      for(i = 1; i <= numForms; i++)
      {    
           // define one section of the form (give fields unique names).
           var formPart = '<fieldset><legend>Add User</legend><label>Full Name:</label><input name="fullname' + i + '"  type="text" required="required"" /><label>Email:</label><input name="email' + i + '" type="email" /><label>Phone:</label><input placeholder="1 (123)-123-1234" name="phone' + i + '" type="tel" /><label>Spreadsheet:</label><input name="spreadsheet' + i + '" type="file" /><label>Registration #:</label><textarea name="regnums' + i + '" placeholder="Aircraft registration number(s). Separate each number with a comma."></textarea></fieldset>';
           form = form + formPart;
      }
      // output the form to the page
      var output = document.getElementById("output");
      output.innerHTML = form + '<input name="numForms" value="' + numForms + '" type="hidden" />';
  }
</script> 
```

顺便说一句，这个函数被调用，`<option onclick="showForms(#)">#</option>`其中 # 是要显示的表单数。当然，这些选项位于`<select>`.

预先感谢您的帮助。

编辑：这是调用脚本，包含 HTML、PHP 和 JavaScript。

```
<?php
// include the javascript function to generate the form
include ('../private/Includes/Scripts/showforms.js');

// form handling code
if (isset($_POST['submit']))
{
    // make sure the input for the number of users is a number, and less than or
    // equal to 10
    if (is_numeric($_POST['numForms']) && $_POST['numForms'] <= 10)
    {
        $regCount = $_POST['numForms'];
    }

    // initialize array for form data
    $regData = array();
    // fill array with multi-dimentional form data
    for ($i = 1; $i <= $regCount; $i++)
    {
        // get form data and store in temporary variables
        $fullname = trim($_POST['fullname' . $i]);
        $email = trim($_POST['email' . $i]);
        $phone = trim($_POST['phone' . $i]);
        $spreadsheet = $_POST['spreadsheet' . $i];
        $regnums = trim($_POST['regnums' . $i]);
        // put data in array
        $regData[$i] = array(
            'username' => '',
            'fullname' => $fullname,
            'email' => $email,
            'phone' => $phone,
            'spreadsheet' => $spreadsheet,
            'regnums' => $regnums
        );
        // unset temporary variables
        unset($invalid, $username, $fullname, $email, $phone, $spreadsheet, $regnums);
    }
    $errors = registerUsers($regData);
    if ($errors[0] == "Some users were not registered due to missing usernames.")
    {
        $notes[] = "Some users were not registered due to missing usernames.";
        unset($errors[0]);
    }
    if (!isset($errors))
    {
        $success = true;
    }
}
?>
<h2 style="margin-top: -9px;">Register Users</h2>
<p>Use this form to register new users. Usernames and passwords are automatically generated and emailed to their owner's addresses.</p>
<form enctype="multipart/form-data" method="post">

    <fieldset>
        <legend>
            Form Setup &amp; Results
        </legend>
        <label>No. of User(s):</label>
        <select onchange="showForms(0)" name="select">
            <option selected="selected">- Please Select -</option>
            <option onclick="showForms(1)">1</option>
            <option onclick="showForms(2)">2</option>
            <option onclick="showForms(3)">3</option>
            <option onclick="showForms(4)">4</option>
            <option onclick="showForms(5)">5</option>
            <option onclick="showForms(6)">6</option>
            <option onclick="showForms(7)">7</option>
            <option onclick="showForms(8)">8</option>
            <option onclick="showForms(9)">9</option>
            <option onclick="showForms(10)">10</option>
        </select>
    </fieldset>
    <div id="output"></div>
    <input id="submit" name="submit" type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:54:03.690

语法错误 - HTML 字符串中未转义的 "。

```
... + '"  type="text" required="required"" /> 
```

使用一些 IDE 或智能编辑器，可以避免此类错误。

顺便说一句，为您提供一个技巧：将代码模板隐藏（显示：无）；然后，对于每个，将其复制到一个新节点并更改其 ID，并将其放在正确的位置。请参阅 DOM 操作，W3C 标准的一部分。

第二个提示：使用您的服务器端语言支持来支持 PHP 的 foo[] 等数组，而不是生成 ID。IMO 更好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T04:34:38.600

我猜你有多个 ID 为“输出”的元素，因为我刚刚在 Chrome 中的堆栈上的这个页面上附加了这样一个元素，执行了你的 func 定义，用 8 的参数触发它并得到了一堆表单。Stack 使用 JQuery 所以...

```
$('body').append('<div id="output"/>'); 
```

然后剪切并粘贴以在控制台中定义您的功能并...

```
showForms(8); 
```

您应该在 Stack 的页面底部看到一堆表单垃圾。另一种可能性是您没有 ID 为“输出”的元素

始终首先检查 HTML。总是。这需要很少的时间。如果您的站点上有 JQ，请在调用该函数之前执行此操作。

```
alert($('#output').size()); 
```

如果不是1，那是你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T12:40:48.117

我有一个类似的问题，最终是由于在使用之前没有定义我的数组。Firefox 似乎更能容忍未使用 var 语句显式定义的数组，但 Chrome 需要定义它们。

# php - PHP：在长度为 700 和 . （时期）

> ID：11322134
> 
> 赞同：0
> 
> 时间：2012-07-04T03:41:29.293
> 
> 标签：php

我似乎无法找到解决 PHP 问题的最佳方法。我想完成以下

1.  我得到一个字符串，即。长度为 1000 个字符
2.  我想将一个字符串分成2个。
3.  根据以下条件，第一个字符串需要为 600 个字符： a) 字符串仅应在句点后拆分
4.  字符串的第二部分可以是余数。

我知道如何检查字符串的长度，`strlen($string)`也知道如何使用 ie 将字符串分解为子字符串。`explode()`. 但是，我不确定如何将所有内容组合在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:46:49.843

1.  使用 substr() 从原始字符串中提取 600 个字符后的所有内容。
2.  对结果子字符串执行 strpos() 以找到第一个`.`
3.  使用 pos + 600 对原始字符串执行 substr 并将该位置用作分割点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:15:24.157

我用过，它的作品..你试试这个...

```
<?php
        $app_title="HIOX INDIA.COM, a leading business web hosting company, is

   currently involved in web services, software/application development, web content 

   development, web hosting, domain registration, internet solutions and web design.";

        echo "<br>Before :".$app_title;
        $length=100; 
        if(strlen($app_title) > $length) { 
        $app_title1 = substr($app_title, 0,strpos($app_title, ' ', $length));}
        $app_title2=split ( $app_title1 , $app_title);
        echo "<br><br>After1 :".$app_title1;
        echo "<br><br>After2 :".$app_title2[1];

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T03:47:42.290

使用[substr()](http://br.php.net/manual/pt_BR/function.substr.php)您可以获得定义初始位置和子字符串长度的字符串的一部分。例如：

获取前 600 个字符：

```
$first = substr ( $input , 0 , 600 ); 
```

获得剩余：

```
$second = substr ( $input , 600 ); 
```

# objective-c - 获取 NSTableView 中内容的高度

> ID：11322139
> 
> 赞同：6
> 
> 时间：2012-07-04T03:41:47.157
> 
> 标签：objective-c, macos, cocoa, nstableview, nsscrollview

有没有办法在`NSTableView`. 在 iOS 中，您可以`-contentSize`使用`UIScrollView`. 但是， 的`-contentSize`方法`NSScrollView`似乎只返回 的可见部分的高度`NSScrollView`，不包括屏幕外的任何内容。

那么，如何在 Mac 上做到这一点呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T03:55:23.073

`- (NSSize)contentSize`in`Appkit`返回 的大小`NSClipView`，而不是在表格视图中滚动的内容的高度。我不知道`UIScrollView`s 是如何工作的，但是在 OS X 上， an`NSScrollView`有一个“内容视图”（更恰当地命名`NSClipView`为剪辑视图的子视图），它是剪辑视图的子视图。

作为旁注，`NSScrollView`滚动通过设置文档视图的边界原点（据我所知）。

看起来您想要的是文档视图的高度，即实际内容的高度。为此，请尝试类似

```
scrollView.documentView.frame.size.height 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-05T17:26:57.633

您可以通过以下方式获取 NSTableView 的真实内容高度

*   Objective-C 版本： `tableView.intrinsicContentSize.height`

*   斯威夫特版本： `tableView.intrinsicContentSize.height`

# html - Angularjs：单个html中的多个部分？

> ID：11322144
> 
> 赞同：31
> 
> 时间：2012-07-04T03:43:09.933
> 
> 标签：html, partials, angularjs

是否可以在一个 html 中检索多个 html 部分？我有下一个情况：

```
Template: {header} {main} {footer}

/index: header:"Welcome" main:"welcome text" footer:""

/help: header:"Help title" main:"faq tips" footer"Back to home" 
```

使用**ng-include**我必须从服务器中检索 6 个 html。如果我将在一个 html 中检索多个部分，那么我将仅从服务器检索 2 个 html，一个用于 /index，一个用于 /help。

*   这种情况是真实情况的一个小例子。
*   **ng-template**类型的标记**脚本**对我不起作用，因为该脚本必须在**ng-include**之前包含。

 ****谢谢！

**2012 年 4 月 7 日更新：**

我试图一次更新多个 div，并使用独特的 html 检索。我不喜欢这样：

```
function IndexCtrl($scope) {
    $scope.mainPage = 'partials/index/index.html';
    $scope.headerTemplate = 'partials/index/header.html';
    $scope.footerTemplate = 'partials/index/footer.html';
} 
```

在模板中使用 ng-includes 后包含这些部分。我认为这不是正确的方法。还有其他方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-04T16:53:35.893

模板可以嵌入到主 html 中。例如，使用以下内容`index.html`：

```
<!DOCTYPE html>
<html ng-app=app>
<meta charset=utf-8>
<title>App</title>
<ng-view>Loading...</ng-view>
<script type=text/ng-template id=partial1.html>
 <p>foo = {{foo}}</p>
</script>
<script type=text/ng-template id=partial2.html>
 <p>Contents of partial2.html</p>
</script>
<script src=app.js></script> 
```

您可以使用以下内容`app.js`：

```
angular.module('app', [], ['$routeProvider', '$controllerProvider', function($routeProvider, $controllerProvider) {

  $routeProvider.when('/p1', { templateUrl: 'partial1.html', controller: 'Partial1' });

  $controllerProvider.register('Partial1', ['$scope', function($scope) {
    $scope.foo = 'bar';
  }]);
}]); 
```

[$templateCache 服务](http://docs.angularjs.org/api/ng/service/%24templateCache)的文档有更多详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T23:57:08.850

我所做的是使用模板而不是 templateUrl，并使用 requirejs 文本插件来加载模板。以这种方式进行开发，您的模板可以拥有数千个文件，但是一旦缩小，您就只有一个内联所有模板的 javascript 文件。

我创建了一个开源项目，它是为骨干设置的，但可以很容易地修改为 angular，它会为您进行缩小和 requirejs 文本插件接线：http: [//github.com/davidjnelson/agilejs](http://github.com/davidjnelson/agilejs)****

# c++ - 在 c++/cli 中将 printf 数据写入字符串变量

> ID：11322146
> 
> 赞同：0
> 
> 时间：2012-07-04T03:43:54.313
> 
> 标签：c++, string, c++-cli

我需要在我的 c++/cli 程序中将格式数据发送到 tcp ip 端口。我的代码没有成功

```
String^ data;
sprintf(data,"L,%02u%02u%02u%02u%02u%02u%03u,%lf %lf\n",rDateTime.uiYear, rDateTime.usiMonth, rDateTime.usiDay,
                rDateTime.usiHour, rDateTime.usiMinute, rDateTime.usiSec, 
                rDateTime.udiUSec / 1000,container[i].first,container[i].second); 
```

我收到错误 *error C2664: 'sprintf' : cannot convert parameter 1 from 'System::String ^' to char **

我想将其写入字符串变量**std::string**。

有人可以提供一些建议吗？至少我将其转换为**System::String^**。我可以使用此[C++/CLI Converting from System::String^ to std::string 将其转换为 std:string](https://stackoverflow.com/questions/946813/c-cli-converting-from-systemstring-to-stdstring)。但我不知道如何在 c++/cli 中将不同的数据类型写入字符串^ ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T06:31:16.500

您需要使用 type 声明一个临时变量`char*`。我在这里使用固定数组进行演示。由于您的字符串可能很长，因此建议您查看[_snprintf](http://msdn.microsoft.com/en-us/library/2ts7cx93%28VS.80%29.aspx)以避免缓冲区溢出错误。

在你得到你的字符串后`char*`，你可以创建一个托管`System::String`使用`gcnew`

```
char str[1024];

sprintf(str,"L,%02u%02u%02u%02u%02u%02u%03u,%lf %lf\n",rDateTime.uiYear, rDateTime.usiMonth, rDateTime.usiDay, 
            rDateTime.usiHour, rDateTime.usiMinute, rDateTime.usiSec,  
            rDateTime.udiUSec / 1000,container[i].first,container[i].second); 

System::String^ data = gcnew System::String(str); 
Console::WriteLine(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T06:23:24.927

[sprintf()](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)函数将 char 数组 ( )`char *`作为它的第一个参数。如果要这样使用，需要先写入char数组，再转成字符串。我不知道，但是您可以通过像这样的简单分配`System::String^`将 char 数组转换为 an ：`std::string`

```
char * data = new char[50];
sprintf(data, "Your text goes here");
std::string str = data; 
```

不要忘记为 char 数组分配内存！如果你忘记它并写下这样的东西：

```
char * data;
sprintf(data, "Your text goes here"); 
```

你会得到一个错误。另一方面，如果 std::string 适合您，则可以直接使用[格式化操纵器对其进行格式化](http://www.cplusplus.com/reference/iostream/manipulators/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T20:24:19.333

我意识到，如果您正在编写新的托管代码，这不是这样做的方法，但是如果您要移植与`printf`and一起使用的非托管遗留 C++ 代码，`const char*`则没有理由重写整个事情 Just To Be Right。

这对我有用，并且应该安全地适用于任何大小的字符串。我用它来包装一些调用 Trace(...) 的函数，以便灵活地让委托的 Action 处理日志消息。

```
void TraceBase1(const char* prefix, const char* format, va_list argp) {
  if (Logger::m_logDelegate != nullptr) {

    System::String^ message;

    int count = _vscprintf(format,argp) + 1;
    char* buffer = new char[count ];
    try {
        _vsnprintf(buffer,count,format,argp);
        message =  gcnew System::String(buffer);
        Logger::m_logDelegate(message);
    }
    finally {
        delete[] buffer;
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T03:46:09.907

您是否查看过[sprintf](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)在您的平台上的工作方式？

# java - java中返回对象的方法设计指南/我可以使用异常吗？

> ID：11322158
> 
> 赞同：0
> 
> 时间：2012-07-04T03:45:39.387
> 
> 标签：java

如果我有一个方法说`getNextWidget()`返回一个小部件，那么如果我需要检查制造小部件的工厂的大小并且仅在工厂中有小部件时才返回一个小部件，那么这种方法的正确设计是什么？有没有办法为不是的方法抛出异常`void`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:57:53.690

一个常见的模式是在`null`没有更多小部件时返回​​。如果该方法永远不会返回，这将非常有效`null`。

另一种常见的模式是抛出异常。但是你也应该有一个`hasMoreWidgets()`方法。在正常的操作流程中（例如检索所有小部件直到没有留下任何小部件），程序不应触发异常。

无论哪种方式，如果可能有更多小部件，但访问工厂时出现问题，因此您无法确定，您应该抛出异常（因为这将是一个真正的错误条件）。

# ocaml - OCaml 调用约定：这是一个准确的总结吗？

> ID：11322163
> 
> 赞同：21
> 
> 时间：2012-07-04T03:46:24.437
> 
> 标签：ocaml

我一直在尝试找到 OCaml 调用约定，以便我可以手动解释 gdb 无法解析的堆栈跟踪。不幸的是，除了一般性观察之外，似乎没有用英语写过任何东西。例如，人们会在博客上评论 OCaml 在寄存器中传递了许多参数。（如果某处有英文文档，将不胜感激。）

所以我一直试图从 ocamlopt 源中解开它。谁能证实这些猜测的准确性？

而且，如果我对在寄存器中传递的前十个参数是正确的，那么通常不可能将参数恢复到函数调用吗？在 C 语言中，只要我回到正确的帧，参数仍然会被推入堆栈的某个地方。在 OCaml 中，被调用者似乎可以自由地销毁调用者的参数。

* * *

*寄存器分配*（来自`/asmcomp/amd64/proc.ml`）

为了调用 OCaml 函数，

*   前 10 个整数和指针参数在寄存器 rax、rbx、rdi、rsi、rdx、rcx、r8、r9、r10 和 r11 中传递
*   前 10 个浮点参数在寄存器 xmm0 - xmm9 中传递
*   额外的参数被推入堆栈（**最左边先入？**），浮点数和整数以及混合的指针
*   陷阱指针（参见下面的异常）在 r14 中传递
*   在 r15 中传递分配指针（可能是本[博文中所述的次要堆）](http://rwmj.wordpress.com/2009/08/06/ocaml-internals-part-3-the-minor-heap/)
*   如果是整数或指针，返回值在 rax 中传回，如果是浮点数，返回值在 xmm0 中
*   **所有寄存器都是调用者保存的？**

为了调用 C 函数，使用标准 amd64 C 约定：

*   前六个整数和指针参数在 rdi、rsi、rdx、rcs、r8 和 r9 中传递
*   前八个浮点参数在 xmm0 - xmm7 中传递
*   额外的参数被压入堆栈
*   返回值在 rax 或 xmm0 中传回
*   寄存器 rbx、rbp 和 r12 - r15 是被调用者保存的

*退货地址*（来自`/asmcomp/amd64/emit.mlp`）

根据 amd64 C 约定，返回地址是压入调用帧的第一个指针。（我猜该`ret`指令假定这种布局。）

*例外*（来自`/asmcomp/linearize.ml`）

代码`try (...body...) with (...handler...); (...rest...)`像这样线性化：

```
Lsetuptrap .body
(...handler...)
Lbranch .join
Llabel .body
Lpushtrap
(...body...)
Lpoptrap
Llabel .join
(...rest...) 
```

然后像这样作为组件发出（右侧的目的地）：

```
call .body
(...handler...)
jmp .join
.body:
pushq %r14
movq %rsp, %r14
(...body...)
popq %r14
addq %rsp, 8
.join:
(...rest...) 
```

在身体的某个地方，有一个线性化的操作码`Lraise`，它作为这个精确的程序集发出：

```
movq %r14, %rsp
popq %r14
ret 
```

这真的很整洁！我们创建了一个虚拟帧，而不是这个 setjmp/longjmp 业务，它的返回地址是异常处理程序，其唯一的本地是前一个这样的虚拟帧。有一条注释将`/asmcomp/amd64/proc.ml`$r14 称为“陷阱指针”，因此我将此虚拟框架称为陷阱框架。当我们要引发异常时，我们将堆栈指针设置为最近的陷阱帧，将陷阱指针设置为之前的陷阱帧，然后“返回”到异常处理程序中。我敢打赌，如果异常处理程序不能处理这个异常，它只会重新引发它。

例外情况在 %eax 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T06:38:04.320

这更像是一个答案而不是一个问题！我对这个主题的了解是通过查看源代码了解到的，就像你一样，所以不要指望进一步的精确度比你的帖子更权威。

是的，我认为 OCaml 仅使用带有调用者保存寄存器的专门调用约定。这种选择的一个好处是它简化了尾调用：当您跳过尾调用时，您不必溢出或重新加载任何寄存器。

¹：对于非自我尾调用，这只适用于没有太多参数的情况，因此我们不需要溢出。如果需要堆栈分配，则调用将变为非尾调用。

请注意，调用约定仍然很大程度上取决于目标体系结构。例如，在 x86 上，当寄存器用尽时和溢出到堆栈上之前，使用少量全局变量来保留尾调用。

我也同意“最左先入”：参数按 in 顺序遍历，按in`calling_conventions`偏移`proc.ml`顺序存储；它们从右到左计算，但按顺序返回，在.`slot_offset``emit.mlp``selectgen.ml`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T15:34:59.767

是的，您无法从调用中恢复参数，因为 OCaml 会尝试尽可能多地重用寄存器，因此如果它在函数的其余部分不再有用，则会破坏它们的内容。调试器无法打印参数，它们只能在函数中的给定点打印仍然存在的变量，但为此，您需要修改 ocamlopt 以转储 DWARF 代码以恢复值。

# iphone - 如何创建指向 UINavigation Bar 的指针并添加 UILongGestureRecognizer？

> ID：11322169
> 
> 赞同：0
> 
> 时间：2012-07-04T03:47:03.163
> 
> 标签：iphone, objective-c, ios, ipad

我创建了一个视图控制器并寻找一种方法来创建指向导航栏的指针。在情节提要中，已经有一个 UINavigationBar 我在这里得到了手势部分：

```
UILongPressGestureRecognizer* someGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:theNavBar action:@selector(paintGesture:)];
adminGesture.minimumPressDuration = 1;  // recognize as soon as the touch goes down
//adminGesture.delegate = self;
[self.view addGestureRecognizer:adminGesture]; 
```

但不知道如何调用 theNavBar

```
UINavigationItem*theNavBarTitle = self.navigationItem; 
```

那是对的吗？我究竟做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:19:38.603

尝试：

```
self.navigationController.navigationBar 
```

# c# - 如何动态获取标签名称？

> ID：11322175
> 
> 赞同：0
> 
> 时间：2012-07-04T03:48:34.580
> 
> 标签：c#, wpf

```
<Grid x:Name="LayoutRoot">
    <TextBox x:Name="txt_diplay_1" HorizontalAlignment="Left" Height="42" Margin="155,78,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="103.5" GotFocus="txt_diplay_1_GotFocus" />
    <TextBox x:Name="txt_diplay_2" Height="42" Margin="297,78,239.5,0" TextWrapping="Wrap" VerticalAlignment="Top" GotFocus="txt_diplay_2_GotFocus" />
    <Button x:Name="btn_a" Content="A" HorizontalAlignment="Left" Height="40" Margin="155,147,0,0" VerticalAlignment="Top" Width="73" Click="btn_a_Click" />
    <Button x:Name="btn_b" Content="B" Height="40" Margin="237,147,0,0" VerticalAlignment="Top" Click="btn_b_Click" HorizontalAlignment="Left" Width="73" />
    <Button x:Name="btn_c"  Height="40" Margin="0,147,239.5,0" VerticalAlignment="Top" HorizontalAlignment="Right" Width="73" Click="btn_c_Click" >
        <Grid Height="30.833" Width="61.5">
            <Label x:Name="lbl_1" Content="1" Margin="22.498,6.5,19.501,2.166"/>
            <Label x:Name="lbl_2" Content="!" HorizontalAlignment="Right" Margin="0,-4.422,0,13.088" Width="19.501"/>
        </Grid>
    </Button>
</Grid> 
```

设计会是这样的

![结果](../Images/66a16e657da1ee44401af6747a56d5f8.png)

```
public partial class MainWindow : Window
{
    Control TexboxDetails = null;      
    Control ButtonDetails;             
    Button BehaveButton;     

    public MainWindow()
    {
        this.InitializeComponent();
    }

private void btn_a_Click(object sender, RoutedEventArgs e)
    {
        ButtonDetails = (Control)sender;
        all_in_one();
    }

    private void btn_b_Click(object sender, RoutedEventArgs e)
    {
        ButtonDetails = (Control)sender;

        all_in_one();
    }

    private void btn_c_Click(object sender, RoutedEventArgs e)
    {

    }

    private void txt_diplay_1_GotFocus(object sender, RoutedEventArgs e)
    {
        TexboxDetails = (Control)sender;
    }

    private void txt_diplay_2_GotFocus(object sender, RoutedEventArgs e)
    {
        TexboxDetails = (Control)sender;
    }

    public void all_in_one()
    {
        BehaveButton = ButtonDetails as Button;
        if (TexboxDetails != null)
        {
            TextBox BehaveTextbox = TexboxDetails as TextBox;
            var caret_index = BehaveTextbox.CaretIndex;
            BehaveTextbox.Text = BehaveTextbox.Text.Insert(caret_index, BehaveButton.Content.ToString());
            BehaveTextbox.Focus();
            BehaveTextbox.CaretIndex = caret_index + 1;
        }
    }
} 
```

使用上面的代码，我可以在单击该按钮时动态获取按钮名称。在上图中，一个按钮（btn_c）有两个标签。现在我想在单击按钮（btn_c）时动态地​​获取单独的标签名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T03:55:17.393

你可以像这样得到它们（在*btn_c*点击处理程序中）：

```
var btn_c = (Button)sender;
Grid grid = (Grid)btn_c.Content;
Label label1 = (Label)grid.Children[0];
string name1 = label1.Name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:55:43.990

你的整个设计真的需要一些返工。看一下这段代码：（注意事件处理程序的数量减少了；您需要修改 XAML 才能使用它们）

```
public partial class MainWindow : Window
{
    TextBox LastFocusedTextBox;
    public MainWindow()
    {
        this.InitializeComponent();
    }

    private void btn_Click(object sender, RoutedEventArgs e)
    {
        InsertButtonContent((Button)sender);
    }

    private void txt_diplay_GotFocus(object sender, RoutedEventArgs e)
    {
        LastFocusedTextBox = (TextBox)sender;
    }

    public void InsertButtonContent(Button button)
    {
        if (LastFocusedTextBox != null)
        {
            string buttonContentString = button.Content as string;
            if (string.IsNullOrEmpty(buttonContentString))
            {
                var grid = button.Content as Grid;
                if (grid != null)
                    buttonContentString = string.Join("", grid.Children.OfType<ContentControl>().Select(x => x.Content));
            }
            var caret_index = LastFocusedTextBox.CaretIndex;
            LastFocusedTextBox.Text = LastFocusedTextBox.Text.Insert(caret_index, buttonContentString);
            LastFocusedTextBox.Focus();
            LastFocusedTextBox.CaretIndex = caret_index + buttonContentString.Length;
        }
    }
} 
```

请注意如何将`Button`它们传递给方法而不是存储在字段中。`all_in_one()`此外，删除了类中和方法本地的不必要字段。要获取网格中标签的内容（例如`"1!"`- 我假设这是您所追求的，因为没有其他东西可以进入一个简单的字符串字段，并且也匹配您前两个按钮的一般模式），我们只需选择它们在检查内容是字符串还是网格之后，将它们连接成一个字符串。

# c++ - 如何获取我的应用程序的崩溃位置？

> ID：11322176
> 
> 赞同：0
> 
> 时间：2012-07-04T03:48:43.593
> 
> 标签：c++, mfc

我的操作系统是 x64 上的 Windows 7。

我正在尝试在我刚刚制作的 MFC 应用程序上使用地图文件，当我单击 CButton 时会崩溃。

此映射文件显示“首选加载地址为 00400000”，Visual Studio 调试器显示崩溃位置为**0x775015de**，这似乎太大了，非常错误。

这可能是因为我没有看到正确的崩溃位置。

如果我能弄清楚我错过了什么，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:01:46.347

切换断点并查看调用堆栈，如果可能的话，看看哪个函数导致程序崩溃。

# asp.net - 使用查询字符串加载用户控件

> ID：11322177
> 
> 赞同：0
> 
> 时间：2012-07-04T03:48:59.120
> 
> 标签：asp.net

我的要求就像我需要使用 asp Repeater 加载一些用户控件。

```
List<string> userControlList = new List<string>();
userControlList.Add("~/WebUserControl2.ascx");
userControlList.Add("~/WebUserControl.ascx");
Repeater1.DataSource = userControlList;
Repeater1.DataBind(); 
```

在 ItemDataBound 中，我正在使用 Page.LoadControl 加载用户控件。

```
string userControlLink = e.Item.DataItem.ToString();
e.Item.FindControl("ItemPanel").Controls.Add(Page.LoadControl(userControlLink)); 
```

在这里，我需要向某个用户控件发送参数，通过该控件将加载该控件。我无法使用属性，因为我无法在运行时进行类型转换。

有没有其他方法可以将一些参数发送给用户控件？我尝试使用查询字符串，但它导致运行时异常。

# backbone.js - Backbone model.save() 不调用错误或成功回调

> ID：11322182
> 
> 赞同：52
> 
> 时间：2012-07-04T03:49:34.700
> 
> 标签：backbone.js

我正在尝试更新数据库中的记录，因此我正在使用数据定义模型并调用 .save() 方法。触发 PUT 请求并更新数据库条目。问题是既没有调用成功回调，也没有调用错误回调。可能是什么原因？

```
sessionsModel.save({
    error: function() {
        alert('test');
    },
    success: function () {
        alert('test');
    }
}); 
```

编辑：请求返回 JSON 对象

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-07-04T04:03:19.093

刚刚发现问题已解决的类似问题。你必须把一些东西作为第一个参数（我把 null 因为我的模型已经明确地填充了数据）和带有回调的对象作为第二个参数。所以像;

```
sessionsModel.save(null, {success:function() {} }); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-25T08:45:06.880

在搜索这个时，我首先登陆了这个对我不起作用的[SO 线程，但似乎对其他人有用，后来我碰到了](https://stackoverflow.com/questions/5757555/how-do-i-trigger-the-success-callback-on-a-model-save/15063045#15063045)[这个链接](https://github.com/dhruvaray/backbone-associations/issues/1)，有人尝试过`null`而不是`{}`作为第一个参数。

```
this.model.save(null, {
    success: function (model, response) {
        console.log("success");
    },
    error: function (model, response) {
        console.log("error");
    }
}); 
```

所以，这对我有用。希望这对你也有帮助。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-03-04T15:27:39.743

您的服务器必须返回一个 JSON 对象。如果响应不是 JSON 对象，则不会触发回调。检查此解决方案[https://stackoverflow.com/a/22176044/1579718](https://stackoverflow.com/a/22176044/1579718)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-13T21:26:26.190

我遇到了这个问题 - 但因为我的服务器正在使用有效的 JSON 对象（模型）进行响应，并且我已经`null`在保存调用中使用了，所以我一直在苦苦挣扎。

正如我（最终）发现的那样，在触发成功回调之前，返回的模型通过 validate 方法传递。在我的情况下，我遇到了一个（当你在正确的地方寻找时很明显）问题，导致返回的模型被视为无效并随后阻止了成功回调。

虽然我很欣赏这对 OP 没有帮助，但我发布这个是希望它可以帮助遇到同样问题的其他人。

# grails - Grails Jasper 子报表

> ID：11322184
> 
> 赞同：1
> 
> 时间：2012-07-04T03:49:40.857
> 
> 标签：grails, jasper-reports, ireport

我正在使用 grails，并且我有这个 Jasper 报告，其中包含一个子报告。有这个简单的两个碧玉报告

> 注意：只有 .jrxml 是 /web-app/reports 中文件的文件扩展名

主报告 [main_report][子报告区域]

```
<subreport>
   <reportElement x="0" y="0" width="555" height="157"/>
   <subreportExpression>
      <![CDATA[$P{SUBREPORT_DIR} + "test_report.jasper"]]>
   </subreportExpression>
</subreport> 
```

测试报告 [test_report][title.band]

```
<staticText>
   <reportElement x="203" y="30" width="154" height="34"/>
   <textElement/>
   <text><![CDATA[Hello World]]></text>
</staticText> 
```

并查看视图或 gsp 文件我有这个命令

```
<g:jasperReport jasper="main_report"
                format="pdf, html"
                delimiter=" "/> 
```

当我想查看 HTML 格式的 PDF 报告时，报告会返回一个空白页。我是否缺少`main_report`使用子报告正确显示的内容`test_report`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:21:08.863

你需要：

1.  `.jasper`确保编译子报告（在 iReport 中执行此操作），即在报告目录中应该有一个用于子报告的文件。
2.  在生成报告之前设置 SUBREPORT_DIR 参数，例如

`params.SUBREPORT_DIR = servletContext.getRealPath('/reports') + "/"`

（假设编译好的子报表在`<app>/web-app/reports`目录下，和未编译的报表一样）。

# java - 如何获取文本文件中的句子并放入数组列表Java？

> ID：11322185
> 
> 赞同：1
> 
> 时间：2012-07-04T03:49:43.927
> 
> 标签：java, string, vector, arraylist

假设文本文件包含：

```
He is a boy .
She is sick .
Ali is playing .
We are eating .
The dog is barking .
He and his brother are running . 
```

如何将所有句子按格式放入数组列表中：

```
He is
is a 
a boy
boy .
She is
is sick
sick . 
```

等等。

我使用数组列表来避免继续阅读文本文件来执行某些任务是否可能？或者我需要使用矢量来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T03:59:59.933

这应该可以。我没有测试它。这只是一行代码，您需要一些东西来扫描您的输入并使用每一行；

```
String line = "He is a boy .";
String[] arr = line.split(" ");
ArrayList<String> newLines = ArrayList<String>();
for (int i = 1; i < arr.length; i++){
  newLines.add(arr[i-1]+" "+arr[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:39:17.907

除了 Arthur 所说的之外，您还可以例如使用 The **[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)**类从文件中读取输入：

```
Scanner fileScanner = null;
try {
    fileScanner = new Scanner(new File("yourtextfile.txt"));
} catch (FileNotFoundException e) {
    e.printStackTrace();  
}
while (fileScanner.hasNextLine()) {
    // Some additional code for storing the output to an array around here? :]
    System.out.println(fileScanner.nextLine());
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-03T14:23:40.053

同样，如果您不想从文件中读取，而是从用户输入中读取，则可以使用它

```
ArrayList<String> uInput = new ArrayList<String>(Arrays.asList(scan.nextLine().split("\\s+"))); 
```

# scala - 如何在远程参与者中添加路由器？

> ID：11322186
> 
> 赞同：0
> 
> 时间：2012-07-04T03:49:57.457
> 
> 标签：scala, sbt, akka

我已经将它包含在我的 application.conf 中，但它不起作用：

```
akka {
    actor {
        provider = "akka.remote.RemoteActorRefProvider"
            deployment {
                /messageSender {
                    router = "round-robin"
                    nr-of-instances = 10
                    target {
                        nodes = "akka://System@127.0.0.1:5555"
                    }
                }
            }
        }
        remote {
            transport = "akka.remote.netty.NettyRemoteTransport"
    }
} 
```

# jquery - 使用 fancybox 的动态内容视图

> ID：11322187
> 
> 赞同：3
> 
> 时间：2012-07-04T03:50:20.900
> 
> 标签：jquery, popup, fancybox, modal-dialog

我需要查看fancybox中的动态内容

我的代码看起来像

```
<a id="featureExpertPopup" href="#featureExpertPop">View Profile </a>
<a id="featureExpertPopup" href="#featureExpertPop">View Profile </a>
<a id="featureExpertPopup" href="#featureExpertPop">View Profile </a> 
```

和精美的盒子内容

```
<div style="display: none;">
    <div id="featureExpertPop" style="overflow:auto;">Dynamic Profile</div>
</div> 
```

花式电话

```
$("#featureExpertPopup").fancybox({
        'titlePosition'     : 'inside',
        'transitionIn'      : 'none',
        'transitionOut'     : 'none'

    }); 
```

现在的问题是仅针对第一个锚链接打开弹出窗口，我想根据配置文件 ID 为每个具有不同内容（来自数据库）的链接打开弹出窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T03:52:47.497

您不能对不同的元素使用相同的 ID。使用类而不是 ID

```
<a class="featureExpertPopup" href="#featureExpertPop">View Profile </a>
<a class="featureExpertPopup" href="#featureExpertPop">View Profile </a>
<a class="featureExpertPopup" href="#featureExpertPop">View Profile </a>

$(".featureExpertPopup").fancybox({
        'titlePosition'     : 'inside',
        'transitionIn'      : 'none',
        'transitionOut'     : 'none'

    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T03:53:14.570

你不应该`ID`对多个元素使用一个，`class`而是使用：

```
<a class="featureExpertPopup" id='one' href="#featureExpertPop">View Profile </a>
<a class="featureExpertPopup" id='two' href="#featureExpertPop">View Profile </a>
<a class="featureExpertPopup" id='three 'href="#featureExpertPop">View Profile </a>\

$(".featureExpertPopup").fancybox({ ... }) 
```

* * *

```
$('a').click(function(e){
    e.preventDefault();
    var href = $(this).attr('href') + $(this).attr('id');
}) 
```

# android - 从服务接收触摸事件（解决方案？）

> ID：11322188
> 
> 赞同：1
> 
> 时间：2012-07-04T03:50:42.413
> 
> 标签：android, service, touch-event

所以，早些时候我发布了一个关于从服务接收触摸事件的问题（显然没有人知道答案）。

在试图自己弄清楚几个小时后，我放弃了，决定给一个名为 RubberBigPepper 的开发人员发电子邮件。我问他他是如何在他的应用程序音量控制中做到这一点的，他立即回复“ **TYPE_SYSTEM_ALERT 窗口**”。

这是什么意思，如何在代码中实现？

编辑：

我使用了以下方法：

```
getWindow().addFlags(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT); 
```

并且窗口无法接收触摸事件。

我也给他发了电子邮件，他说：“使用 WindowService 添加你的窗口”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:13:08.570

我使用这样的代码。

```
int nFlags=WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL|WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;       
             m_cWM=(WindowManager)getSystemService(Context.WINDOW_SERVICE);
             WindowManager.LayoutParams lp = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_SYSTEM_ERROR,
                nFlags,
                PixelFormat.TRANSLUCENT);
m_cWM.addView(YourViewClass, lp); 
```

不要忘记使用权限

# zend-framework - cron 中的 Zend 方法/库

> ID：11322189
> 
> 赞同：0
> 
> 时间：2012-07-04T03:50:44.990
> 
> 标签：zend-framework, url, cron

是否可以在 zend 的 cron 选项卡脚本中创建 zend_view 的实例？我想要的是在由 cron 执行的脚本中获取基本 url、服务器 url？

我听说在 cron 选项卡中，zend_view 不知道基本和服务器 url。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:33:05.503

您可以在任何地方创建这样的 Cron.php 文件：

```
// address of zend library
set_include_path( '../library' . PATH_SEPARATOR . get_include_path() ); 

include_once('Zend/Http/Client.php');

$url = 'http://www.yoursite.com/index/cron';

$client = new Zend_Http_Client($url);

$response = $client->request('GET'); 
```

所以你在索引控制器中有 cronAction 和视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:32:12.527

创建一个控制器名称 CronController 添加任何操作让我们说

```
Class CronController extends Zend_Controller_Action
{
   public function workAction()
   {

         $view = $this->view ; //access for zend_view
   }
} 
```

在您的 crontab 中使用 wget 执行您的控制器操作

```
wget -q --spider http://www.mysite.com/public/cron/work 
```

# c# - 使用 ActiveReport 在客户端打印机上打印

> ID：11322192
> 
> 赞同：0
> 
> 时间：2012-07-04T03:51:38.260
> 
> 标签：c#, asp.net, activereports

现在我正在使用 asp.net 和 C#。
我在我的系统中使用 ActiveReports 进行报告。
我试图通过显示预览来打印我的报告（我的意思是我不使用 WebViewer 来预览报告，而是直接打印报告）。

```
MyAR1    rptMyreport = new MyAR1();    
DataTable dtMydata = new DataTable();    
//add some data in dtMydata    
rptMyreport .DataSource = dtMydata;
if (rptMyreport .Document.Printer.PrinterSettings.IsValid)
{
   try
   {
      rptMyreport .Run();
      rptMyreport .Document.Print(false, false, false);
   }
   catch (Exception)
   {
   // do something
   }    
}      
else  
{  
    //show Error Message  
} 
```

我的问题是...
当我打印此报告时，它可以在服务器站点打印机上工作，而不能在客户端站点打印机上工作。即（我在4楼工作，服务器在10楼。当我打印报告时。它是由10楼的服务器站点打印机打印的。）我该怎么做才能在客户端PC的打印机上打印报告连接的。

带着敬意，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:17:24.573

您在上面运行的 C# 代码实际上是在服务器上运行的，这就是为什么服务器的打印机是接收打印作业的打印机。但是，您希望客户端机器（带有 Web 浏览器的机器）接收打印作业。[为此，我们提供了几个选项，但最好的选项在帮助主题“在 WebViewer（专业版）中提供一键打印”](http://www.datadynamics.com/Help/ActiveReports6/ActiveReports6_start.html?arHOWProvideOneTouchPrintingInTheWebViewer.html)下的文档中逐步描述。这将导致从使用 Web 浏览器的机器而不是服务器进行打印。

您可以使用除 Flash 之外的其他查看器类型，但浏览器会施加限制以强制显示打印对话框（以防止网页未经同意随机打印）。有关可用选项和限制的更多信息，请参见帮助主题[Web 查看器打印选项](http://www.datadynamics.com/Help/ActiveReports6/ActiveReports6_start.html?arWebViewerPrinting.html)。

# forms - 在 Oracle 表单中的选项卡之间移动项目

> ID：11322193
> 
> 赞同：1
> 
> 时间：2012-07-04T03:51:53.113
> 
> 标签：forms, oracle, tabs, textinput

我在 6i 中有一个 Oracle 选项卡式表单，我在第一个选项卡上有一个文本项我想设置一个代码，当我更改选项卡时，项目应该移动到当前选项卡。我的意思是项目应该只移动或查看当前活动选项卡，如果项目在第一个选项卡上并且我选择第二个选项卡，那么第一个选项卡上的项目应该放在第二个选项卡上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T16:31:07.023

我认为，您不能在选项卡之间移动项目，但我需要这样的东西。实际上很高兴从标签标签中看到当前呈现的数据类型而不使用按钮或文本标签。如果您不想创建多个块，而只想更改 where 子句或更改其他属性，

1.  以您的项目为例 BLOCK_A.NAME（在 TAB1 上），将项目复制为 BLOCK_A.NAME_2
2.  在重复项目上使用*与项目属性同步并从列表中选择名称项目。*
3.  Set TAB 你想在上面显示重复的项目。

WHEN-TAB-PAGE-CHANGED 触发器可能如下所示：

```
declare
   curr_tab varchar2(30);
begin
    if :SYSTEM.CURRENT_BLOCK in ('BLOCK_A') then
        curr_tab := get_canvas_property('MYTABPAGE',topmost_tab_page); 
        if curr_tab = 'TAB1' then
            --Set WHERE 1, execute_query;
            go_item('BLOCK_A.NAME');--Navigate to TAB1
        else
            --Set WHERE 2, execute_query;
            go_item('BLOCK_A.NAME_2');--Navigate to TABX
        end if;
    end if;
end; 
```

这样我可以拥有多个具有相同数据源但属性不同的项目。对于直接导航，只需转到适当的项目以显示您想要的 TAB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:39:41.900

有一个触发器“WHEN-TAB-PAGE-CHANGED”可能会帮助你，但是......

...在我看来，这听起来像是您想要在另一个“基础”画布上放置一个选项卡式画布。如果您将此字段始终显示在基本画布上，它始终可见，您不必在选项卡之间移动数据。

# c++ - 无法使用 g++ 4.6.3 构建我的 c++ 代码

> ID：11322200
> 
> 赞同：0
> 
> 时间：2012-07-04T03:53:02.677
> 
> 标签：c++, ubuntu, linker, g++

我正在使用 g++ 4.6.3。这是 g++ -v 的输出。

```
g++ -v
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/lib/gcc/i686-linux-gnu/4.6/lto-wrapper
Target: i686-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu5' --with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-  languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --enable-targets=all --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=i686-linux-gnu --host=i686-linux-gnu --target=i686-linux-gnu
Thread model: posix
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
```

这是我的代码示例：

```
#include "Word.h"
#include <string>
using namespace std;

pthread_mutex_t Word::_lock = PTHREAD_MUTEX_INITIALIZER;

Word::Word():
_occurrences(1)
{
    memset(_buf, 0, 25);
}

Word::Word(char *str):
_occurrences(1)
{
    memset(_buf, 0, 25);
    if (str != NULL)
    {
        strncpy(_buf, str, strlen(str));
    }
} 
```

g++ -c -ansi 或 g++ -c -std=c++98 或 g++ -c -std=c++03，这些选项都不能正确构建代码。我收到以下编译错误：

```
mriganka@ubuntu:~/WordCount$ make
g++ -c -g -ansi Word.cpp -o Word.o
Word.cpp: In constructor ‘Word::Word()’:
Word.cpp:10:21: error: ‘memset’ was not declared in this scope
Word.cpp: In constructor ‘Word::Word(char*)’:
Word.cpp:16:21: error: ‘memset’ was not declared in this scope
Word.cpp:19:34: error: ‘strlen’ was not declared in this scope
Word.cpp:19:35: error: ‘strncpy’ was not declared in this scope
Word.cpp: In member function ‘void Word::operator=(const Word&)’:
Word.cpp:37:42: error: ‘strlen’ was not declared in this scope
Word.cpp:37:43: error: ‘strncpy’ was not declared in this scope
Word.cpp: In copy constructor ‘Word::Word(const Word&)’:
Word.cpp:44:21: error: ‘memset’ was not declared in this scope
Word.cpp:45:52: error: ‘strlen’ was not declared in this scope
Word.cpp:45:53: error: ‘strncpy’ was not declared in this scope 
```

所以基本上 Ubuntu 12.04 上的 g++ 4.6.3 无法识别标准的 c++ 头文件。我没有找到摆脱这种情况的方法。

第二个问题：

为了取得进展，我包含了 <string.h> 而不是 <string>。但现在我正面临与我的消息队列和 pthread 库函数的链接错误。

这是我得到的错误：

```
mriganka@ubuntu:~/WordCount$ make
g++ -c -g -ansi Word.cpp -o Word.o
g++ -lrt -I/usr/lib/i386-linux-gnu Word.o HashMap.o main.o -o word_count
main.o: In function `main':
/home/mriganka/WordCount/main.cpp:75: undefined reference to `pthread_create'
/home/mriganka/WordCount/main.cpp:90: undefined reference to `mq_open'
/home/mriganka/WordCount/main.cpp:93: undefined reference to `mq_getattr'
/home/mriganka/WordCount/main.cpp:113: undefined reference to `mq_send'
/home/mriganka/WordCount/main.cpp:123: undefined reference to `pthread_join'
/home/mriganka/WordCount/main.cpp:129: undefined reference to `mq_close'
/home/mriganka/WordCount/main.cpp:130: undefined reference to `mq_unlink'
main.o: In function `count_words(void*)':
/home/mriganka/WordCount/main.cpp:151: undefined reference to `mq_open'
/home/mriganka/WordCount/main.cpp:154: undefined reference to `mq_getattr'
/home/mriganka/WordCount/main.cpp:162: undefined reference to `mq_timedreceive'
collect2: ld returned 1 exit status 
```

这是我的生成文件：

```
CC=g++ 
CFLAGS=-c -g -ansi 
LDFLAGS=-lrt 
INC=-I/usr/lib/i386-linux-gnu 
SOURCES=Word.cpp HashMap.cpp main.cpp 
OBJECTS=$(SOURCES:.cpp=.o) EXECUTABLE=word_count

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS) $(CC) $(LDFLAGS) $(INC) -pthread $(OBJECTS) -o $@

.cpp.o: $(CC) $(CFLAGS) $< -o $@

clean: rm -f *.o word_count 
```

请帮我解决这两个问题。我不停地在网上搜索这些问题的任何解决方案，但似乎没有人遇到过这些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T04:02:38.367

这些项目在`<string.h>`（或`<cstring>`）中，而不是`<string>`。

对于您的第二个问题，您需要链接到相应的库。对于 pthread 添加`-pthread`到编译器命令行。对于消息队列库，您需要一个`-l`命名库的选项，并且可能需要一个`-L`让工具知道它在哪里的选项。

# android - libgdx setOrigin 和 setPosition 没有按预期工作？

> ID：11322201
> 
> 赞同：9
> 
> 时间：2012-07-04T03:53:02.800
> 
> 标签：android, libgdx

我创建了一个相机：

```
camera = new OrthographicCamera(5.0f, 5.0f * h/w); 
```

创建一个精灵：

```
ballTexture = new Texture(Gdx.files.internal("data/ball.png"));
ballTexture.setFilter(TextureFilter.Linear, TextureFilter.Linear);
TextureRegion region = new TextureRegion(ballTexture, 0, 0, ballTexture.getWidth(), ballTexture.getHeight());
ball = new Sprite(region); 
```

设置原点、大小和位置：

```
ball.setOrigin(ball.getWidth()/2,ball.getHeight()/2);
ball.setSize(0.5f, 0.5f * ball.getHeight()/ball.getWidth());
ball.setPosition(0.0f, 0.0f); 
```

然后渲染它：

```
batch.setProjectionMatrix(camera.combined);
batch.begin();
ball.draw(batch);
batch.end(); 
```

但是当我渲染它时，我的球精灵的左下角在 (0, 0)，而不是它的中心，正如我所期望的那样，因为我将原点设置为精灵的中心。我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T16:42:14.650

原点与旋转和缩放有关，如该方法的[JavaDocs](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/g2d/Sprite.html#setOrigin%28float,%20float%29 "JavaDoc")中所述。

# c++ - 初始化稀疏静态数组

> ID：11322202
> 
> 赞同：1
> 
> 时间：2012-07-04T03:53:06.030
> 
> 标签：c++, arrays, static, initialization

我需要初始化一个静态数组。并非所有值都是连续的。

像这样的东西适用于顺序数组：

```
class Foo {

  public:

  static const char * name[];

}

const char * Foo::name[] = { "Sun", "Moon" }; 
```

如何在数组中的任意位置分配值？我需要做这样的事情（伪代码）：

```
const char * Foo::name[] = { 67: "Sun", 68: "Moon" }; 
```

数组永远不会大于 255；索引来自字节值。

* * *

我发现[了一个线程的一部分，](http://cboard.cprogramming.com/c-programming/133372-static-arrays-ellipsis-2.html)其中有人给出了一个与我想要的类似的例子，但我无法让这样的事情起作用。

```
type array[SIZE] = {[SIZE-4]=1, 2, 3, 4}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T03:59:00.403

我建议你使用`std::map<int, std::string>`（或者`unordered_map`如果你有 C++11 支持）而不是数组。然后，您可以使用代码插入此地图：`m[67] = "Sun"`并使用检索项目`std::string s = m[67];`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T04:06:55.727

这是一种老式的方法：

```
class NameArray {
  public:
    NameArray()
    {
      array[67] = "Sun";
      array[68] = "Moon";
    }

    const char *operator[](size_t index) const
    {
      assert(index<256);
      return array[index];
    }

  private:
    const char * array[256];
};

class Foo {
  public:
    static NameArray name;
};

NameArray Foo::name; 
```

通过将数组包装在一个类中，您可以确保使用您想要的值构造它。您还可以进行边界检查。

# python - Python 类 + 数据包混淆

> ID：11322203
> 
> 赞同：0
> 
> 时间：2012-07-04T03:53:07.787
> 
> 标签：python, sockets, client, python-2.7, minecraft

我已经开始了一个项目来编写一个基于 python 的 minecraft 客户端/机器人来连接到标准的 minecraft 服务器。我正在使用一个名为[py-mine-client](http://code.google.com/p/py-mine-client/)的库来执行数据包处理。我一直无法使用库接收数据包 - 我不知道要调用哪些函数/可以访问接收到的数据的位置。主要问题是弄清楚如何接收握手响应。我以为我可以使用 client.recievePacket 函数访问它，但它似乎不起作用。

这是我的代码：

```
import sys
import string
from client import *

def main():
    client = Client("192.168.1.15")
    client.connect()
    client.handshake("MyUsername")
    handshake = string16("\x02")
    client.recieve_packet(handshake)
    client.login_request("MyUsername")
    client.listener.stop()

if __name__ == "__main__":
    sys.exit(main()) 
```

这是一个 wiki，其中包含有关协议如何工作的信息：
[http ://wiki.vg/Protocol](http://wiki.vg/Protocol)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:57:28.130

Looking at the library [source code](http://code.google.com/p/py-mine-client/source/browse/trunk/client.py), they have a `Listener` class collecting all packets in the separate thread automatically. The `receive_packet` method shouldn't be then called by the user (it's used by listener to report new incoming data). All packets are appended to `client.packets` array which you can access. Unfortunately, the library doesn't seem to be thread-safe (probably relies on the global lock) and they seem to have many socket-related bugs.

As the library seems to be very simple, you might like just to rewrite it.

# c# - 如何访问用户的谷歌日历提要

> ID：11322212
> 
> 赞同：0
> 
> 时间：2012-07-04T03:53:38.760
> 
> 标签：c#, .net, google-calendar-api

我想将某些项目插入到我用户的谷歌日历中。我一直在查看 GData 的这个客户端库：

[https://developers.google.com/gdata/client-cs](https://developers.google.com/gdata/client-cs)

但是，它需要我传递用户名（电子邮件）和密码。我不希望我的用户在我的应用程序中输入他们的电子邮件和密码，并将它们存储在我的数据库中。这是一项风险很大的业务。谷歌是否有任何其他方式可以向我提供令牌并将令牌存储在数据库中以供将来访问？就像 Facebook 所做的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:15:21.460

是的，使用 Google Calendar API v2 并阅读有关[使用 Google Calendar 服务](https://developers.google.com/google-apps/calendar/v2/developers_guide_protocol#Auth)进行身份验证的部分，了解要调用哪些端点以及如何调用它们。

# postgresql - 在 postgres 中对分区进行约束检查总是一个好主意吗？

> ID：11322214
> 
> 赞同：0
> 
> 时间：2012-07-04T03:54:15.500
> 
> 标签：postgresql

假设我在 postgres 中有一个按月分区的表，其中满足以下条件：

*   记录永远不会更新。
*   新记录仅添加当前时间，几分钟或几分钟。
*   触发器处理插入，因此记录仅进入本月或上个月的分区。

分区/子表的约束检查对我有帮助吗？由于触发器处理月末期间，它们似乎是多余的，因此无济于事，但我觉得我可能会遗漏一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T04:43:01.243

查询计划器需要约束，它使用约束来知道在哪里可以找到特定数据。请参阅[文档](http://www.postgresql.org/docs/current/static/ddl-partitioning.html)。

# android - 第二次显示 ImageView，然后用线程隐藏

> ID：11322215
> 
> 赞同：0
> 
> 时间：2012-07-04T03:54:27.610
> 
> 标签：android, multithreading, android-imageview

当我单击 menuInflater 时，我需要先显示 ImageView，然后使用 Thread 隐藏。

例如：

```
 public boolean onOptionsItemSelected(MenuItem item) {

    super.onOptionsItemSelected(item);

    switch (item.getItemId()){

    case R.id.txt1:
        handler = new Handler (this);
                    Worker w = new Worker (handler);
                   Thread t = new Thread (w);
                   t.start();
         return true; 
```

* * *

你的意思是这样吗？

```
 protected int [] imgIds = {
        R.id.img_1,R.id.img_2,R.id.img_3,R.id.img_4,R.id.img_5,R.id.img_6,
        R.id.img_7,R.id.img_8,R.id.img_9,R.id.img_10,R.id.img_11,R.id.img_12,
};

    public class Worker implements Runnable{

private Handler h;

public Worker (Handler h)
{
    this.h = h;
}

@Override
public void run() {

    for(int i=0; i<10; i++)
    {
        imgIds.setsetVisibility(View.INVISIBLE)

        try{
            Thread.sleep(1000);
        }catch (InterruptedException e){
            e.printStackTrace();
        }
    }
    h.postDelayed(Worker,1000);

} 
```

}

然后 ImageView 隐藏并启动游戏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:43:34.930

```
@Override
public void run() {

    for(int i=0; i<10; i++)
    {
        imgIds.setsetVisibility(View.INVISIBLE)

        try{
            Thread.sleep(1000);
        }catch (InterruptedException e){
            e.printStackTrace();
        }
    }
     Intent intent = new Intent();
     intent.setClass(sPlashScreen.this,Next.class);
     startActivity(intent);
     stop()
}   

} 
```

# asp.net-mvc - VS 2010 mvc 控制器的默认单元测试属性是原因测试无法运行，但为什么呢？

> ID：11322217
> 
> 赞同：2
> 
> 时间：2012-07-04T03:54:59.163
> 
> 标签：asp.net-mvc, visual-studio-2010, unit-testing, attributes

我在 Visual Studio 2010 中创建了一个默认的 MVC 4.0 Internet Web 应用程序。在自动生成的主控制器方法之一上，我右键单击并创建了一个单元测试。我选择了一个单独的/新项目。测试代码如下所示：

```
 /// <summary>
    ///A test for Index
    ///</summary>
    // TODO: Ensure that the UrlToTest attribute specifies a URL to an ASP.NET page (for example,
    // http://.../Default.aspx). This is necessary for the unit test to be executed on the web server,
    // whether you are testing a page, web service, or a WCF service.
    [TestMethod()]
    [HostType("ASP.NET")]
    [AspNetDevelopmentServerHost("E:\\Backup 20080915\\Projects\\Writing Projects\\Blogs\\31a\\QUnitMVC\\jQueryMvcWebApp\\jQueryMvcWebApp", "/")]
    [UrlToTest("http://localhost:61524/")]
    public void IndexTest()
    {
        HomeController target = new HomeController(); // TODO: Initialize to an appropriate value
        ActionResult expected = null; // TODO: Initialize to an appropriate value
        ActionResult actual;
        actual = target.Index();
        Assert.AreEqual(expected, actual);
        Assert.Inconclusive("Verify the correctness of this test method.");
    } 
```

如果我运行完全由 VS 编写的测试，它会失败并显示：

```
Failed  IndexTest   jQueryMvcWebApp.Test.HomeControllerTest.IndexTest   The Web request 'http://localhost:61524/' completed successfully without running the test. This can occur when configuring the Web application for testing fails (an ASP.NET server error occurs when processing the request), or when no ASP.NET page is executed (the URL may point to an HTML page, a Web service, or a directory listing). Running tests in ASP.NET requires the URL to resolve to an ASP.NET page and for the page to execute properly up to the Load event. The response from the request is stored in the file 'WebRequestResponse_IndexTest.html' with the test results; typically this file can be opened with a Web browser to view its contents. 
```

如果我注释掉以下 3 个属性，测试将按预期运行：

```
[HostType("ASP.NET")]
[AspNetDevelopmentServerHost("E:\\Backup 20080915\\Projects\\Writing Projects\\Blogs\\31a\\QUnitMVC\\jQueryMvcWebApp\\jQueryMvcWebApp", "/")]
[UrlToTest("http://localhost:61524/")] 
```

所以我的问题是，为什么它们是默认设置，我什么时候应该不注释它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T03:30:57.607

如果您仔细阅读错误消息，您就会明白原因。您实际上并未加载可以成功访问 Load 事件的 ASP.NET 页面。您正在运行 MVC，它实际上没有“页面”。我对我的每一个控制器/动作进行了全面的单元测试，而且我从未尝试过使用这些属性。可能是在 Visual Studio 测试中为任何 .net Web 应用程序默认这些属性 - 实际上它应该只用于 Web 表单应用程序。

# c# - 将组件拖放到页面时向类添加方法

> ID：11322224
> 
> 赞同：0
> 
> 时间：2012-07-04T03:55:38.493
> 
> 标签：c#, asp.net, visual-studio-2010

我正在创建一个依赖于页面类中的方法的服务器组件（C# ASP.NET 4.0）。

当组件从 Visual Studio 工具箱拖放到页面时，我喜欢自动添加一个方法到页面代码后面。

是否有可能做到这一点？

**编辑：**我想做的是通过建议（添加）他们可能需要操作我的组件的方法来使程序员的工作更轻松。我想要发生的事情就像程序员双击页面中的一个组件并将一个方法添加到后面的代码中并将其引用添加到页面中的组件但我希望它正确添加该组件放入页面的时间.

程序员可能会删除该方法或使用其他方法，甚至根本不使用它。

# ios - 有没有办法以编程方式在 IB 中设置约束？

> ID：11322226
> 
> 赞同：1
> 
> 时间：2012-07-04T03:55:49.047
> 
> 标签：ios, xcode, interface-builder

在`Interface Builder`中，您有约束告诉应用程序如何在设备旋转时重新绘制屏幕。

有没有办法以编程方式设置这些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T04:10:46.980

您需要设置`autoresizingMask`视图。

它指定视图如何自动调整大小。（这是您在 中设置的`Interface Builder`。）

```
enum {
   UIViewAutoresizingNone                 = 0,
   UIViewAutoresizingFlexibleLeftMargin   = 1 << 0,
   UIViewAutoresizingFlexibleWidth        = 1 << 1,
   UIViewAutoresizingFlexibleRightMargin  = 1 << 2,
   UIViewAutoresizingFlexibleTopMargin    = 1 << 3,
   UIViewAutoresizingFlexibleHeight       = 1 << 4,
   UIViewAutoresizingFlexibleBottomMargin = 1 << 5
};
typedef NSUInteger UIViewAutoresizing; 
```

# android - 图片按钮和按钮的区别

> ID：11322234
> 
> 赞同：6
> 
> 时间：2012-07-04T03:57:46.077
> 
> 标签：android, button, imagebutton

和有什么区别`Button`，`ImageButton`如果我们在按钮的背景中使用任何图像，它也可以像图像按钮一样工作。那么为什么我们使用图像按钮呢？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T04:08:21.837

Button 扩展了 TextView，允许您创建带有背景图像的可点击文本。 [http://developer.android.com/reference/android/widget/TextView.html](http://developer.android.com/reference/android/widget/TextView.html)

ImageButton 扩展了 Image 视图，它有更多与图像操作相关的方法。 [http://developer.android.com/reference/android/widget/ImageView.html](http://developer.android.com/reference/android/widget/ImageView.html)

# javascript - iframe 获取选定区域

> ID：11322248
> 
> 赞同：0
> 
> 时间：2012-07-04T04:00:23.130
> 
> 标签：javascript, iframe

我正在尝试从 iFrame 获取选定区域。这里有几个类似的帖子，但没有一个有效，所以我决定再试一次。

```
function getIframeSelectionArea() {
var frm = frames['iFrameTextBody'].document;
var win = frm.contentWindow;
alert(win.getSelection().toString());
} 
```

所以我试图实现的类似于在stackoverflow post textarea中实现的。现在我知道他们正在使用第 3 方所见即所得编辑器的变体。我试图纯粹出于教育目的重新启动轮子。

我的实现很简单。我想选择一个文本并通过单击粗体表示`<b></b>`标签出现在所选区域的任一侧。我知道我使用 execCommand('bold', false, null) 来做同样的事情。正如我之前所说，这是一个实验。

这个想法是，一旦返回所选区域，调用以下函数：

```
 function addhtmlTag(str){
    var frm = frames['iFrameTextBody'].document;
    var frmbody = frm.getElementsByTagName('body')[0];
    var bold_tag = frm.createElement('b');
    bold_tag.textContent = str;
    frmbody.appendChild(bold_tag);
} 
```

非常感谢任何见解！

干杯

杰伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:17:20.880

你的意思是这样的：

```
function getSelectionFrame() {
   var frame = document.getElementById(frameId);
   var frameWindow = frame.contentWindow;
   var frameDocument = frameWindow.document;
   if (frameDocument.getSelection) {
      return frameDocument.getSelection();
   } else {
      return frameDocument.selection.createRange().text;
   }
} 
```

# python - Biopython 类实例 - 来自 Entrez.read 的输出：我不知道如何操作输出

> ID：11322250
> 
> 赞同：6
> 
> 时间：2012-07-04T04:00:47.513
> 
> 标签：python, class, biopython

我正在尝试从 Pubmed 下载一些 xml - 没有问题，Biopython 很棒。问题是我真的不知道如何操作输出。我想将大部分解析的xml放入sql数据库，但我对输出不熟悉。对于某些事情，我可以将解析后的 xml 称为字典，但对于其他事情，这似乎并不那么简单。

```
from Bio import Entrez
Entrez.email="xxxxxxxxxxxxx@gmail.com"
import sqlite3 as lite
handle=Entrez.efetch(db='pubmed',id='22737229', retmode='xml')
record = Entrez.read(handle) 
```

如果我想找到标题，我可以这样做：

```
title=record[0]['MedlineCitation']['Article']['ArticleTitle'] 
```

但是解析出来的对象的类型是一个类：

```
>>> type(record)
<class 'Bio.Entrez.Parser.ListElement'>
>>>r=record[0]
>>>type(r)
<class 'Bio.Entrez.Parser.DictionaryElement'>
>>> r.keys()
[u'MedlineCitation', u'PubmedData'] 
```

这让我觉得一定有比将它用作字典更简单的方法。但是当我尝试时：

```
>>> r.MedlineCitation

Traceback (most recent call last):
  File "<pyshell#67>", line 1, in <module>
    r.MedlineCitation
AttributeError: 'DictionaryElement' object has no attribute 'MedlineCitation' 
```

它不起作用。我显然可以将它用作字典，但后来我遇到了问题。

真正的问题是在像字典一样使用记录时试图从记录中获取某些信息：

```
>>> record[0]['MedlineCitation']['PMID']
StringElement('22737229', attributes={u'Version': u'1'}) 
```

这意味着我不能只是扑通一声（这是一个技术术语；）它到我的 sql 数据库中，但需要转换它：

```
>>> t=record[0]['MedlineCitation']['PMID']
>>> t
StringElement('22737229', attributes={u'Version': u'1'})
>>> int(t)
22737229
>>> str(t)
'22737229' 
```

总而言之，我很高兴 Entrez.read() 提供的信息的深度，但我不确定如何在生成的类实例中轻松使用这些信息。通常你可以做类似的事情

```
record.MedlineCitation 
```

但它不起作用。

干杯

惠顿

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T16:46:45.137

该`Entrez.read()`方法将返回一个嵌套数据结构，由`ListElement`s 和`DictionaryElement`s 组成。有关更多信息，请查看[`read`biopython 源代码中的方法](https://github.com/biopython/biopython/blob/master/Bio/Entrez/Parser.py#L11)文档，我将在下面摘录和解释：

```
def read(handle, validate=True):

This function parses an XML file created by NCBI's Entrez Utilities,
returning a multilevel data structure of Python lists and dictionaries.
...
the[se] data structure[s] seem to consist of generic Python lists,
dictionaries, strings, and so on, [but] each of these is actually a class
derived from the base type. This allows us to store the attributes
(if any) of each element in a dictionary my_element.attributes, and
the tag name in my_element.tag. 
```

该包的作者[Michiel de Hoon](https://github.com/mdehoon)还花一些时间在`Parser.py`源文件的最顶部讨论他使用自定义[s 和](https://github.com/biopython/biopython/blob/master/Bio/Entrez/Parser.py#L11)[s](https://github.com/biopython/biopython/blob/master/Bio/Entrez/Parser.py#L11) in[表示 XML 文档的动机`ListElement``DictionaryElement`](https://github.com/biopython/biopython/blob/master/Bio/Entrez/Parser.py#L11)`Entrez`。

如果您非常好奇，您还可以阅读源代码中令人着迷的[`ListElement`](https://github.com/biopython/biopython/blob/master/Bio/Entrez/Parser.py#L74)、[`DictionaryElement`](https://github.com/biopython/biopython/blob/master/Bio/Entrez/Parser.py#L83)和[`StructureElement`](https://github.com/biopython/biopython/blob/master/Bio/Entrez/Parser.py#L95)类的声明。我会破坏这个惊喜，只是让你知道它们是对其基本 Python 数据类型的非常轻量级的包装器，并且其行为几乎与其底层基本数据类型完全相同，只是它们有一个新属性`attributes`，它捕获 XML 属性（键和值）用于正在解析的文档中的每个 XML 节点`read`。

因此，您的问题的基本答案是，没有“简单”的方法可以使用点运算符语法来处理 a 的键`DictionaryElement`。如果你有一个字典元素 d，那么：

```
>>> d
DictElement({'first_name': 'Russell', 'last_name': 'Jones'}, attributes={'occupation': 'entertainer'}) 
```

您可以阅读的唯一内置方法`first_name`是使用普通的 python 字典 API，例如：

```
>>> d['first_name']
'Russell'
>>> d.get('first_name')
'Russell'
>>> d.get('middle_name', 'No Middle Name')
'No Middle Name' 
```

Don't lose heart, this really isn't so bad. If you want to take certain nodes and insert them into rows of a sqlite database, you can just write small methods that take a DictElement as input, and return something sqlite can accept as output. If you're having trouble with this, feel free to post another question specifically about that.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T04:16:27.303

我不确定这是否正确，但我相信“记录”是字典列表。所以你需要使用循环来获取每个字典

就像是

```
for r in record:
    r['MedlineCitation'] 
```

# java - 用什么代替 PrintWriter？

> ID：11322255
> 
> 赞同：1
> 
> 时间：2012-07-04T04:01:53.940
> 
> 标签：java

这是我的代码，非常简单且重点：

```
public void sendMessage(String message)
{
    writer.println(message);
    writer.flush();
} 
```

我不太喜欢使用 PrintWriter 因为它往往会吞下 IOExceptions，这实际上是我使用它除了发送字节数组之外的唯一用途。我可以使用什么来代替不会消耗 IOExceptions 并且仍然会给我 PrintWriter 的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T04:33:13.137

我建议使用普通`Writer`的或`BufferedWriter`

```
public void writeMessage(BufferedWriter bw, String message) throws IOException {
    bw.write(message);
    bw.newline();
    bw.flush();
} 
```

或者

```
public void writeMessage(Writer writer, String message) throws IOException {
    writer.write(message);
    writer.write(System.lineSeparator());
    writer.flush();
} 
```

但显然这取决于`PrintWriter`你想要保留什么功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T04:21:06.220

如果您想保留 PrintWriter 并检查是否发生任何异常，您可以使用 PrintWriter 的 checkError() 方法来执行此操作。例如，使用您自己的代码：

```
public void sendMessage(String message)
{
    try{
        writer.println(message);
    }finally{
           //checkError flushes the stream if it's not closed and checks its error state.
        if(writer.checkError()){ 
            //Your error handling code here
        }
    }
} 
```

另一种方法是使用 BufferedReader，正如@Thilo 在他的评论中所建议的那样。这将再次取决于您想要保留的功能。

如果您使用 BufferedWriter 的实例，您将使用 write() 方法，它会抛出 IOException。[在此处的 javadocs 中阅读有关它们的更多信息](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedWriter.html)

# c - 如何检测 C 中的文件写入错误？

> ID：11322262
> 
> 赞同：4
> 
> 时间：2012-07-04T04:03:42.937
> 
> 标签：c, linux

我有一个嵌入式环境，用户可以在其中插入或移除 USB 闪存驱动器。我想知道驱动器是否已被移除，或者当我尝试写入驱动器时是否存在其他问题。但是，Linux 只是将信息保存在其缓冲区中并返回而没有指示错误。
我使用的计算机带有 2.4.26 内核和 libc 2.3.2。
我以这种方式安装驱动器：
`i = mount(MEMORY_DEV_PATH, MEMORY_MNT_PATH, "vfat", MS_SYNCHRONOUS, NULL);`
有效：
`50:/root # mount
/dev/scsi/host0/bus0/target0/lun0/part1 on /mem type vfat (rw,sync)
50:/root #`

后来，我尝试将文件复制到其中：

```
int ifile, ofile;
ifile = open("/tmp/tmpmidi.mid", O_RDONLY);
if (ifile < 0)
{
    perror("open in");
    break;
}
ofile = open(current_file_name.c_str(), O_WRONLY | O_SYNC);
if (ofile < 0)
{
    perror("open out");
    break;
}
#define BUFSZ 256
char buffer[BUFSZ];
while (1)
{
    i = read(ifile, buffer, BUFSZ);
    if (i < 0)
    {
        perror("read");
        break;
    }
    j = write(ofile, buffer, i);
    if (j < 0)
    {
        perror("write");
        break;
    }
    if (i != j)
    {
        perror("Sizes wrong");
        break;
    }
    if (i < BUFSZ)
    {
        printf("Copy is finished, I hope\n");
        close(ifile);
        close(ofile);
        break;
    }
} 
```

如果这段代码使用写保护的 USB 存储器执行，结果是

```
Copy is finished, I hope 
```

在来自控制台内核的一连串错误消息中。
我相信如果我只是移除 USB 驱动器（不卸载它），也会发生同样的事情。
我也摆弄过devfs。我想出了如何让它自动安装驱动器（使用 REGISTER 事件），但是当我拉出内存时它似乎永远不会触发 UNREGISTER。
如何在我的程序中确定我是否已成功创建文件？

7 月 4 日更新：我没有检查 close() 的结果是一个愚蠢的疏忽。不幸的是，该文件可以正确关闭。所以这没有帮助。fsync() 呢？这听起来是个好主意，但也没有发现错误。
如果我有这样的东西，/sys 中可能会有一些有趣的信息。我相信直到 2.6 才添加。？
关于我的闪存驱动器质量的评论可能是有道理的。这是较早的之一。事实上，写保护开关现在似乎极为罕见。
我想我必须使用 overkill 选项：创建一个文件，卸载并重新安装驱动器，然后检查文件是否存在。如果这不能解决我的问题，那么事情就真的搞砸了！提醒自己：确保您尝试创建的文件不存在！
顺便说一句，这确实是一个 C++ 程序。您可以通过 .c_str() 来判断，为了简单起见，我打算将其编辑掉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T04:52:47.963

如果您的应用程序想要将一个或多个文件保存到 U 盘，并让用户在小 LED 熄灭后立即拔出 U 盘，您需要

1.  `mount()`写入文件之前的 U 盘

    您不需要为此安装 SYNC，这有助于使用劣质 USB 记忆棒

2.  使用正确的代码保存文件

    您对 C 低级 I/O 的尝试是非常不正确的。特别是，任何`read()`or`write()`都允许返回一个*短计数*，即介于 1 和请求大小之间的任何正值（包括在内），而不表示任何类型的错误。

3.  `fsync()`U 盘上的文件

    验证它是否返回成功。如果是这样，那么您就知道数据已进入 USB 记忆棒。

4.  `fsync()`包含 U 盘上文件的目录

    验证它是否返回成功。如果是这样，那么您知道文件元数据已进入 USB 记忆棒，即使用户拔出 USB 记忆棒，该文件现在也应该可以访问。

5.  `umount()`U 盘

    这将一直阻塞，直到 USB 记忆棒准备好断开连接，因此您的应用程序应该看起来像是正在保存到文件中，直到`umount()`返回。

    如果您执行了`fsync()`上述操作，则`umount()`应该非常直接。根据文件系统的不同，内核可能希望做一些记账，但无论如何都不应该花很长时间。

其他任何事情都是不可靠的。您可以通过安装具有同步访问的 VFAT 分区来做出某些假设，但这基本上只是手动操作。

如果您不想以 root 权限运行您的应用程序，您始终可以编写一个简单的特权服务来管理挂载和卸载。如果您怀疑在某个时候可能需要多个应用程序，我会非常热情地建议您这样做，因为只有集中式安装程序/卸载程序才能判断媒体何时准备就绪。（如果另一个应用程序同时写入同一个 USB 媒体，它可能会延迟返回“未安装”消息。顺便说一下，当您不需要同步安装 USB 媒体时，这会很好。）我个人会使用 Unix 域数据报套接字`/var/run/`进行`/var/run/mounter.socket`进程间通信。

最后，如果您的 Linux 内核配置正确并且已`/sys/`挂载分区，您可以扫描所有`/sys/block/sd?/`目录以查找可移动媒体：

*   `/sys/block/sd?/removable`将包含一个非零十进制数字字符串
*   `/sys/block/sd?/size`包含以 512 字节为单位的设备大小，作为十进制数字字符串
*   `/sys/block/sd?/device/vendor`包含供应商名称作为字符串
*   `/sys/block/sd?/device/model`包含模型名称作为字符串

这些条目是硬件级别的，只要 USB 记忆棒连接并通电，就可以使用这些条目；安装与否都没有关系。如果/当用户拔出 U 盘时，整个设备目录树将立即消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T05:32:26.887

如果要检测所有写入错误，需要检查的不仅仅是返回码`write()`——还必须调用`fsync()`（并检查返回值），还要检查`close()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T05:13:40.133

简短的回答：问题出在操作系统和/或 USB 驱动器上。即使设置了写保护开关，Linux 也会（有时？）愉快地将 USB 驱动器挂载为可写。然而，当它实际尝试写入时，驱动器拒绝，这或多或少地被视为有缺陷的驱动器。（我不确定*为什么*会发生这种情况。我的猜测是闪存驱动器没有向操作系统报告其只读状态。这可能取决于您使用的闪存驱动器的品牌和型号。）

我可以在 3.2.0-26 内核（特别是 Ubuntu 12）上使用（非常旧的）USB 密钥获得相同的行为。我可以毫无问题地安装写保护的 USB 密钥读写，如果我将文件复制到它，'cp' 不会抱怨。该文件甚至可能出现在目录中（由于缓冲），但实际上没有写入任何内容。我确实在系统日志中收到了很多错误消息。

如果我是你，我会尝试实际写入闪存驱动器并确保它成功，然后再假设驱动器实际上是可写的。具体来说，我会：

1.  将驱动器安装为可写。

2.  在驱动器上创建一个具有唯一名称的新文件。

3.  卸载驱动器以清空缓冲区。

4.  重新安装驱动器。

5.  检查新文件是否仍然存在并包含您写入的数据。

6.  删除测试文件。

我对硬件和驱动程序状态的了解还不够，无法告诉您是否有办法从 API 检测不可写的驱动器——可能有，但我不知道。但即使有，这种情况下也会检测到运行不正常的 USB 驱动器。

**更新：**

我做了更多的研究，结果发现如果设置了写保护开关，对文件句柄执行的 fsync() 将失败。因此，我收回上述建议。相反，这是我的测试程序：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>

int
main(int argc, char *argv[]) {
    char *path;
    int f;
    size_t stat;
    const char *message = "Hello, world.\n";

    if (argc != 2) {
        printf("Need filename\n");
        exit(1);
    }

    path = argv[1];

    f = open(path, O_CREAT | O_WRONLY | O_SYNC, S_IRWXU);
    if (f < 0) {
        perror("open out");
        exit(1);
    }/* if */

    stat = write(f, message, strlen(message));
    if (stat < 0) {
        perror("write");
        exit(1);
    }/* if */

    stat = fsync(f);
    if (stat) {
        perror("fsync");
        exit(1);
    }

    stat = close(f);
    if (stat) {
        perror("close");
        exit(1);
    }/* if */

    printf("(Apparently) successfully wrote '%s'\n", path);
    return 0;
} 
```

如果设备不可写，这应该在 fsync() 调用中失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T04:12:59.350

这是 POSIX 做事的方式。如果返回值`write`是`-1`你肯定知道出了什么可怕的错误。但是，如果`write`返回`0`，也可能出现问题。检查`errno`变量以查看它是否与此处显示的预定义写入错误之一匹配：http: [//www.kernel.org/doc/man-pages/online/pages/man2/write.2.html](http://www.kernel.org/doc/man-pages/online/pages/man2/write.2.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T04:32:32.200

如果你找不到解决方案，你可以试试这个丑陋的 hack。在写入和关闭输出文件后，您可以简单地尝试以读取模式打开它并检查它的大小是否正确。如果您真的想确保它具有正确的内容，您可以验证它是否具有与您刚刚编写的文件相同的校验和。这假设操作系统将直接从 USB 驱动器读取文件，而不是某种缓存。

# ios - 从 App Store 更新后，应用程序失去了对本地通知的控制权

> ID：11322265
> 
> 赞同：18
> 
> 时间：2012-07-04T04:04:21.427
> 
> 标签：ios, uilocalnotification

我在 App Store 有一个带有本地通知的应用程序。

在我的应用程序的最后 4 个版本更新中，有些客户遇到了一些奇怪的事情 - 该应用程序失去了对以前通知的控制，他们一直在更新之前安排所有通知，即使他们应该被取消`[[UIApplication sharedApplication] cancelAllLocalNotifications]`！

在与这些客户沟通时，我告诉他们关闭提醒功能，`cancelAllLocalNotifications`但他们声称会不断收到提醒。

此外，重新安装应用程序并不能摆脱旧通知！就好像 iOS 认为这是一个不同的应用程序。

我的大多数客户不会发生这种情况，只有极少数客户会发生这种情况——但每次更新都会发生这种情况！

怎么会这样？

**更新**

3年后，它仍在发生。

每次更新，一些客户都会不断收到本地通知，但应用程序看不到这些通知，也无法控制它们。

任何人都可以解决这个问题或证明它是 iOS 的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:11:17.053

您是否检查了[UIApplication cancelAllLocalNotifications 在应用程序更新之间如何工作？](https://stackoverflow.com/questions/9538194/how-does-uiapplication-cancelalllocalnotifications-work-between-app-updates) 它没有明确的答案，但也许它会很有用。

试着找出体验过这种情况的客户有什么特别之处：

*   遇到这种行为的客户总是一样吗？
*   他们使用哪个 iOS 版本？
*   他们如何以不同的方式使用您的应用程序？有很多通知安排吗？
*   他们如何进行更新？（无线、同步等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-18T11:02:57.697

我在通知方面遇到了类似的问题。我实际删除的解决方案是设置一个特定的日期并且只通知一次。行 applicationIconBadgeNumber = 0 从通知列表中删除通知。徽章编号仅在用户进入应用程序时设置。对于用户还没有看到消息的情况，您可以在 applicationWillEnterForeground 中添加一个检查并显示一个与通知相同的消息的适当 UIAlertView，您可以使用 notificationArray 以类似的方式获取最后一个通知。当需要设置新的通知“isNotified”需要setValue:@"0"并进行同步。当我使用多个通知时，我会保存如下状态：

```
[userDefaults setValue:@"1" forKey:[NSString stringWithFormat:@"notification-%@", @"12"]];
NSInteger number = [[userDefaults objectForKey:[NSString stringWithFormat:@"notification-%@", @"12"]] integerValue]; 
```

在 MainViewController.m

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
NSInteger alreadyNotified = [[userDefaults objectForKey:@"isNotified"] integerValue];

if (alreadyNotified == 0) {

    NSInteger seconds = 60;
    NSString *message = @"Just testing!";

    UILocalNotification *notification = [[UILocalNotification alloc] init];

    UIUserNotificationSettings *currentSettings = [[UIApplication sharedApplication] currentUserNotificationSettings];
    BOOL allowNotif = (currentSettings.types != UIUserNotificationTypeNone);
    BOOL allowsSound = (currentSettings.types & UIUserNotificationTypeSound) != 0;
    BOOL allowsBadge = (currentSettings.types & UIUserNotificationTypeBadge) != 0;
    BOOL allowsAlert = (currentSettings.types & UIUserNotificationTypeAlert) != 0;

    if (notification)
    {
        if (allowNotif)
        {
            NSDate *now = [NSDate date];
            if (seconds > 0) {
                now = [now dateByAddingTimeInterval:seconds];
            }
            notification.fireDate = now;
            notification.timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
            notification.repeatInterval = 0;
            NSDictionary *userInfo = [NSDictionary dictionaryWithObjectsAndKeys:@"1", @"id", message, @"message", nil];
            notification.userInfo = userInfo;
        }
        if (allowsAlert)
        {
            notification.alertBody = message;
        }
        if (allowsBadge)
        {
            notification.applicationIconBadgeNumber = 1;
        }
        if (allowsSound)
        {
            notification.soundName = UILocalNotificationDefaultSoundName;
        }

        [[UIApplication sharedApplication] scheduleLocalNotification:notification];

        NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
        [userDefaults setValue:@"1" forKey:@"isNotified"];
        [userDefaults synchronize];
    }

} else {

    UIApplication *app = [UIApplication sharedApplication];
    NSArray *notificationArray = [app scheduledLocalNotifications];
    for (int i=0; i<[notificationArray count]; i++)
    {
        UILocalNotification *notification = [notificationArray objectAtIndex:i];
        [app cancelLocalNotification:notification];
    }
} 
```

在 AppDelegate.m

```
- (void)applicationWillEnterForeground:(UIApplication *)application {
   application.applicationIconBadgeNumber = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T08:35:18.663

将以下代码添加到您的应用程序：didFinishLaunchingWithOptions: 方法以清除所有通知。

```
 [[UIApplication sharedApplication] setApplicationIconBadgeNumber: 1];
 [[UIApplication sharedApplication] setApplicationIconBadgeNumber: 0];
 [[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

完成后，您可以添加新通知。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-14T17:27:25.780

嘿，这也是我的应用程序正在发生的事情。我的本地通知在以下场景中被触发：
1.用户已删除该应用程序

2.  在同一设备上使用相同的应用程序但使用不同的用户名，他们会收到上次登录用户的警报。

- 实际上它的`UILocalNotification`行为，我们必须取消它们，否则 IOS 在删除应用程序时将它们保留至少一段时间（不确定多长时间）并且它们是由应用程序在删除时安排的并且没有被取消。

因此，请始终确保您的应用安装发生时，检查并取消所有预定的通知。

喜欢

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

    if(//its a fresh install){

     [[UIApplication sharedApplication] cancelAllLocalNotifications];

    }

    } 
```

`cancelAllLocalNotifications`将取消所有现有通知。

希望它会有所帮助。

# android - 调用 'invalidate' 时，方法 'onDraw()' 将被调用两次

> ID：11322269
> 
> 赞同：4
> 
> 时间：2012-07-04T04:04:52.043
> 
> 标签：android, ondraw, invalidation

调用“ ”时，方法“ **onDraw()** ”将被调用两次**`invalidate`**。我想将视图向上移动`onDraw()`，这是我的代码

```
package com.blsm.sss.view;

public class MoveRelativeLayout extends RelativeLayout {

    private int mDelta = 0;

    public MoveRelativeLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MoveRelativeLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public void move(int delta) {

        mDelta = delta;     
        invalidate();       
        Logger.d("MoveRelativeLayout", "move() delta:" + mDelta);
    }

    @Override
    protected void onDraw(Canvas canvas) {
            Logger.d("MoveRelativeLayout", "onDraw() delta:" + mDelta);
            super.onDraw(canvas);
            canvas.translate(0, mDelta);
    }
} 
```

但是当我调用方法时' `move()`'`onDraw`将被调用两次。我不知道为什么，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:05:51.627

是否有可能从 UI 线程以外的线程调用 move() 方法？如果是这样，我会从使用 postInvalidate() 开始，看看你是否遇到同样的问题......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T04:19:35.813

我认为你不需要调用 super.onDraw();

# java - liferay c3p0 明显死机！在 HSQL 上

> ID：11322272
> 
> 赞同：1
> 
> 时间：2012-07-04T04:05:08.057
> 
> 标签：java, liferay-6, hsqldb, jboss5.x

编译liferay 6.0.6的源代码并部署到jboss 5.1.0 GA后，我启动jboss时出现以下错误。

```
2012-07-04 03:47:11,847 INFO  [com.liferay.portal.spring.hibernate.DialectDetector] (main) Using dialect org.hibernate.dialect.HSQLDialect
2012-07-04 03:48:31,054 WARN  [com.mchange.v2.async.ThreadPoolAsynchronousRunner] (Timer-1) com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@1aee7e -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks!
2012-07-04 03:48:31,093 WARN  [com.mchange.v2.async.ThreadPoolAsynchronousRunner] (Timer-1) com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@1aee7e -- APPARENT DEADLOCK!!! Complete Status: 
    Managed Threads: 3
    Active Threads: 3
    Active Tasks: 
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@1b2eecb (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0)
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@5b66d0 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2)
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@baf34f (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1)
    Pending Tasks: 
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@1bbd74c
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@133c07e
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@a2a139
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@106cc7d
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@15b47ff
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@1d3e63b
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@b035a8
Pool thread stack traces:
    Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0,5,jboss]
        org.hsqldb.jdbc.jdbcDatabaseMetaData.getTables(Unknown Source)
        com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnectionNoQuery(DefaultConnectionTester.java:185)
        com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnection(DefaultConnectionTester.java:62)
        com.mchange.v2.c3p0.AbstractConnectionTester.activeCheckConnection(AbstractConnectionTester.java:67)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.testPooledConnection(C3P0PooledConnectionPool.java:368)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.refurbishIdleResource(C3P0PooledConnectionPool.java:310)
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask.run(BasicResourcePool.java:1999)
        com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
    Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2,5,jboss]
        org.hsqldb.jdbc.jdbcDatabaseMetaData.getTables(Unknown Source)
        com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnectionNoQuery(DefaultConnectionTester.java:185)
        com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnection(DefaultConnectionTester.java:62)
        com.mchange.v2.c3p0.AbstractConnectionTester.activeCheckConnection(AbstractConnectionTester.java:67)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.testPooledConnection(C3P0PooledConnectionPool.java:368)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.refurbishIdleResource(C3P0PooledConnectionPool.java:310)
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask.run(BasicResourcePool.java:1999)
        com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
    Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1,5,jboss]
        org.hsqldb.jdbc.jdbcDatabaseMetaData.getTables(Unknown Source)
        com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnectionNoQuery(DefaultConnectionTester.java:185)
        com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnection(DefaultConnectionTester.java:62)
        com.mchange.v2.c3p0.AbstractConnectionTester.activeCheckConnection(AbstractConnectionTester.java:67)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.testPooledConnection(C3P0PooledConnectionPool.java:368)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.refurbishIdleResource(C3P0PooledConnectionPool.java:310)
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask.run(BasicResourcePool.java:1999)
        com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)

    2012-07-04 03:49:31,104 WARN  [com.mchange.v2.async.ThreadPoolAsynchronousRunner] (Timer-1) Task com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@1b2eecb (in deadlocked PoolThread) failed to complete in maximum time 60000ms. Trying interrupt().
    2012-07-04 03:49:31,104 WARN  [com.mchange.v2.async.ThreadPoolAsynchronousRunner] (Timer-1) Task com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@5b66d0 (in deadlocked PoolThread) failed to complete in maximum time 60000ms. Trying interrupt().
    2012-07-04 03:49:31,104 WARN  [com.mchange.v2.async.ThreadPoolAsynchronousRunner] (Timer-1) Task com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@baf34f (in deadlocked PoolThread) failed to complete in maximum time 60000ms. Trying interrupt(). 
```

我在网上搜索了一下，知道它与 c3p0 问题有关。看到[这个链接](https://forum.hibernate.org/viewtopic.php?p=2386237)和[这个](https://forum.hibernate.org/viewtopic.php?t=947246&start=0&postdays=0&postorder=asc&highlight=apparent%20deadlock%20c3p0&sid=)。我按照说明进行操作并尝试更改配置`$LIFERAY_HOME/portal-ext.properties`

```
hibernate.c3p0.max_statements=0 
```

或者

```
 jdbc.default.acquireIncrement=5
 jdbc.default.maxPoolSize=100
 jdbc.default.minPoolSize=10
 jdbc.default.numHelperThreads=10 
```

但它没有用。

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:13:18.623

你检查过这个 Liferay 问题吗？ [http://issues.liferay.com/browse/LPS-11779](http://issues.liferay.com/browse/LPS-11779)

无论如何，你可以检查[这个线程](https://www.liferay.com/community/forums/-/message_boards/message/5645944/maximized)

希望它会有所帮助。

# r - ggplot2 线和点，自动归零值

> ID：11322276
> 
> 赞同：2
> 
> 时间：2012-07-04T04:05:40.917
> 
> 标签：r, ggplot2

我希望使用**ggplot2**绘制一个线图，该线图由根据我的数据框中的特定列值分组的多条线组成。但是，存在 x 轴值没有点的情况，我想将 y 轴值分配给这种情况，这样每条线都有每个 x 轴值的点。

假设我有一个 data.frame，df

```
 number value      state
1      1     4 California
2      2     1    Arizona
3      3     5 California
4      4     5    Arizona
5      5     2     Alaska
6      6     3    Arizona 
```

其中列号是因子数据类型。

我想画一个线图x轴=数字，y轴=值，并按状态分组。对于这个例子，

```
number value      state
1          4 California
3          5 California 
```

加利福尼亚的线路只会在 1 和 3 之间连接，跳过 2 并且不会持续到 6。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T06:16:19.937

做这个：

```
ggplot(x, aes(number, value, colour=state)) + 
  geom_line(size=2) + geom_point(size=5) 
```

![在此处输入图像描述](../Images/257326e236b23b492571cd6ba92aad26.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-14T10:06:14.820

制作一个带零的数据框并合并

```
library(tidyverse)

df = data.frame("number"=c(1:6), value=c(4,1,5,5,2,3), state=c("California", "Arizona", "California", "Arizona", "Alaska", "Arizona")) %>% 
   tbl_df()

states = unique(df$state)
numbers = unique(df$number)

df2 = data.frame(state = sort(rep(states, length(numbers))),
                 number = rep(numbers, length(states)))

pd = df2 %>%
  merge(df, all=T) %>%
  mutate(value = ifelse(is.na(value),0,value))

plot1 = ggplot(pd, aes(number, value, colour=state)) + 
  geom_line(size=2)+
  geom_point(size=5)

plot(plot1)
ggsave(filename = "plot.png", plot = plot1) 
```

[![阴谋](../Images/ace1701ed6764c1a4bc8eb5c5787467d.png)](https://i.stack.imgur.com/koMp1.png)

# regex - 网络工程师的正则表达式 - 查找两个分隔符之间的字符串给出的上下文

> ID：11322277
> 
> 赞同：1
> 
> 时间：2012-07-04T04:05:43.053
> 
> 标签：regex, windows

我是一名编程技能有限的网络工程师，我使用基于 NET4.0 的名为 dnGREP 的工具在常见文本文件中搜索文本。作为我工作的一部分，我需要做的是找到适用于任何接口配置的命令。

我的想法是试图找到受两个项目限制的正确正则表达式。但是在尝试构建高效的 REGEX 时，我遇到了几个问题。

从 Cisco 设备的“显示运行配置”中获取以下字符串：

```
interface GigabitEthernet0/0/0/1.1982
 ipv4 address 10.111.193.125 255.255.255.252
 ipv4 unreachables disable
 load-interval 30
 dot1q vlan 1982
!
interface GigabitEthernet0/0/0/1.1983
 ipv4 address 10.113.193.125 255.255.255.252
 ipv4 unreachables disable
 load-interval 30
 dot1q vlan 1983
!
interface GigabitEthernet0/0/0/2.1982
 ipv4 address 10.111.193.129 255.255.255.252
 ipv4 unreachables disable
 load-interval 30
 find me
 dot1q vlan 1982
 ! 
```

可以看到，接口配置可以限制为2项。

起始项目：

```
 interface 
```

最终项目：

```
 ! 
```

**给定一个字符串，我想要一个匹配字符串以及接口上下文的正则表达式。**

条件：

*   REGEX 应该返回由“interface”分隔的接口上下文，直到“！”。
*   正则表达式应该打印所有的出现

到目前为止，这是我的正则表达式：

```
 ^interface([\s\S]*?)find me([\s\S]*?)! 
```

分解：

> ^interface--“当“interface”为行首时开始搜索。”
> 
> ([\s\S]*?----"搜索任何字符，包括换行"
> 
> 找到我----“找到我是我正在寻找的字符串/命令”
> 
> ([\s\S]*?!----"继续打印直到找到**!** "

当然，上面的 REGEX 并没有达到我的预期。它应该只返回这个：

```
interface GigabitEthernet0/0/0/2.1982
 ipv4 address 10.111.193.129 255.255.255.252
 ipv4 unreachables disable
 load-interval 30
 find me
 dot1q vlan 1982
 ! 
```

相反，它在找到第一个**接口**后返回所有东西，这不是我想要的。

我知道为什么会这样，但我不知道如何纠正它。

“当找到第一个**接口**时，正则表达式开始搜索**find me**但是如果在到达时找不到字符串**find me**，它应该**停止****！**声明不匹配**但是**它应该继续到文件末尾并打印包含的所有接口上下文字符串**找到我**“

 ******我希望我的解释清楚。非常感谢任何帮助=)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:15:13.413

尝试以下正则表达式：

```
interface\s*(?<text>[^!]+find me[^!]+)(?:!)? 
```

解释：

`interface\s*`- 单词“interface”后跟 0 个或多个空格；

`(?<text>[^!]+find me[^!]+)`-`text`包含除“！”之外的任何字符、1 个或多个重复和字符串“find me”的组；

`(?:!)?`- 匹配 ”！” 字符，但不要捕获它，0 或 1 次重复（以适应最后一段，如果字符丢失）。******

# unity3d - 将基类附加到 Unity3D 场景或项目

> ID：11322279
> 
> 赞同：2
> 
> 时间：2012-07-04T04:06:00.287
> 
> 标签：unity3d

对于 Unity3D 中的每个场景，我总是需要一些基类来实现接口和功能，例如通过`Application.LoadLevel()`.

通常我已经将这些脚本附加到相机上；但是，我不确定这是最佳实践，尤其是在存在多个摄像头的情况下。

如何指定场景的基类？

从项目中选择场景时，不能添加任何组件，也不能在检查器中使用任何选项。

![统一项目](../Images/3ee20d89df27287d3b856c3ec53935e5.png)

![统一检查员](../Images/acd42c6cef9aed228f6241a32772e2df.png)

我如何子类型或将基类直接附加到场景？

同样对于整个 Unity3D 项目，是否有任何方法可以基类或子类型来启用独立于场景的 Unity 应用程序的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:41:20.140

脚本必须始终附加到游戏对象。看到游戏对象可以作为父对象，您可以将您的相机分组到一个父对象下，并将您的脚本应用到该父对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:32:05.223

您可以使用[ScriptableObject.CreateInstance](http://docs.unity3d.com/Documentation/ScriptReference/ScriptableObject.CreateInstance.html)创建一个可以与场景一起存储但不必附加到游戏对象的类。但是，您需要对该实例的引用，使用 MonoBehaviour 实例进行序列化，并且在 Inspector 中可见，以便能够双击它并在 Inspector 中查看序列化的实例变量（如果您不需要ScriptableObject 的 Inspector，那么只要您有对它的引用，它将与场景数据一起保留）。这可能比仅仅将 ScriptableObject 设置为 MonoBehaviour 更有意义，也可能没有。ScriptableObject 实例也可以存储为资产，如预制件，如果您在多个场景中需要它，您应该这样做。

# java - 使用 findViewByID 时，使用 inflater 的 Android 应用程序为空

> ID：11322280
> 
> 赞同：0
> 
> 时间：2012-07-04T04:06:08.620
> 
> 标签：java, android, crash, nullpointerexception, viewpagerindicator

我正在开发我的第一个 Android 应用程序。当我在 OnCreate 和 onRestart 上添加保存和加载对象和设置的功能时，应用程序在启动时开始崩溃。

这是我为设置事物而编写的代码

```
public void setSettings() {
    SharedPreferences settings = getSharedPreferences("Prefs", 0);
    newGame = settings.getBoolean("newGame", true);
    autoDecide = settings.getBoolean("autoDecide", true);
    saved = settings.getBoolean("saved", false);

    if (saved) {
        player1 = readPlayer("Player 1");
        player2 = readPlayer("Player 2");
        if (player1 != null && player2 != null) {
            ((TextView) findViewById(R.id.Player1name)).setText("" + player1.name);
            ((TextView) findViewById(R.id.Player2name)).setText("" + player2.name);
            ((TextView) findViewById(R.id.player1wins)).setText("" + player1.totalWins);
            ((TextView) findViewById(R.id.player2wins)).setText("" + player2.totalWins);
            ((TextView) findViewById(R.id.Player1life)).setText("" + player1.life);
            ((TextView) findViewById(R.id.Player2life)).setText("" + player2.life);
        }

    } 
```

logCat 显示的 NullPointerException 指向第一个 findViewByID(R.id.Player1name)。我尝试只传入一个普通的字符串，但仍然得到一个 nullPointer，所以我知道它是 findViewById。

这是调用它的 OnCreate

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ViewPagerAdapter adapter= new ViewPagerAdapter();
    ViewPager pager = (ViewPager)findViewById(R.id.viewpager);
    TitlePageIndicator indicator = (TitlePageIndicator)findViewById(R.id.indicator);
    pager.setAdapter(adapter);
    indicator.setViewPager(pager);
    pager.setCurrentItem(1);
    setSettings();

} 
```

我的应用程序使用 ViewPagerIndicator，因此有人找不到它吗？

这是代码的主要部分使用 ViewPager 并切换视图。

```
public class ViewPagerAdapter extends PagerAdapter implements TitleProvider{
private static String[] titles = new String[]{"Settings", "2 Players"};

@Override
public int getCount() {
    return titles.length;
}
public Object instantiateItem(View collection, int position){
    LayoutInflater inflator = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    int resID = 0;
    switch (position){
    case 0:
        resID = R.layout.settings;
        break;
    case 1:
        resID = R.layout.two_player;
        break;
    }
    View view = inflator.inflate(resID, null);
    ((ViewPager)collection).addView(view, 0);
    return view;
} 
```

这是首次创建时应使用的布局。

```
### Layout XML ###
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<TextView
        android:id="@+id/Player1name"
        android:layout_width="125dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="34dp"
        android:layout_marginTop="35dp"
        android:text="@string/player1"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/Player2name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:layout_marginRight = "34dp"
        android:layout_marginTop="35dp"
        android:text="@string/player2"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/Player1life"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/Player1name"
        android:layout_below="@+id/Player1name"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="16dp"
        android:text="@string/player1life"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="28sp" />

    <TextView
        android:id="@+id/Player2life"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/player1add"
        android:layout_alignRight="@+id/Player2name"
        android:text="@string/player2life"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="28sp" />        

    <TableLayout
        android:id="@+id/player1add"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/Player1life"
        android:layout_marginLeft="15dp"
        android:layout_marginTop="16dp" >

        <TableRow
            android:id="@+id/p1add1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/player1add1000"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player1add1000"
                android:text="@string/add1000" />

            <Button
                android:id="@+id/player1add500"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player1add500"
                android:text="@string/add500" />
        </TableRow>

        <TableRow
            android:id="@+id/p1add2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/player1add100"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player1add100"
                android:text="@string/add100" />

            <Button
                android:id="@+id/player1add50"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player1add50"
                android:text="@string/add50" />
        </TableRow>
    </TableLayout>

    <TableLayout
        android:id="@+id/player2add"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/player1add"
        android:layout_alignParentRight = "true"
        android:layout_marginRight = "15dp" >

        <TableRow
            android:id="@+id/p2add1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/player2add1000"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player2add1000"
                android:text="@string/add1000" />

            <Button
                android:id="@+id/player2add500"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player2add500"
                android:text="@string/add500" />
        </TableRow>

        <TableRow
            android:id="@+id/p2add2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/player2add100"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player2add100"
                android:text="@string/add100" />

            <Button
                android:id="@+id/player2add50"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player2add50"
                android:text="@string/add50" />
        </TableRow>
    </TableLayout>

    <TableLayout
        android:id="@+id/player1sub"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignTop="@+id/player1add"
        android:layout_marginTop="133dp" 
        android:layout_marginLeft="16dp">

        <TableRow
            android:id="@+id/p1sub1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/player1sub1000"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player1sub1000"
                android:text="@string/sub1000" />

            <Button
                android:id="@+id/player1sub500"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player1sub500"
                android:text="@string/sub500" />
        </TableRow>

        <TableRow
            android:id="@+id/p1sub2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/player1sub100"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player1sub100"
                android:text="@string/sub100" />

            <Button
                android:id="@+id/player1sub50"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player1sub50"
                android:text="@string/sub50" />
        </TableRow>
    </TableLayout>

    <TableLayout
        android:id="@+id/player2sub"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/player1sub"
        android:layout_alignParentRight = "true"
        android:layout_marginRight =  "15dp">

        <TableRow
            android:id="@+id/p2sub1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/player2sub1000"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player2sub1000"
                android:text="@string/sub1000" />

            <Button
                android:id="@+id/player2sub500"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player2sub500"
                android:text="@string/sub500" />
        </TableRow>

        <TableRow
            android:id="@+id/p2sub2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/player2sub100"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player2sub100"
                android:text="@string/sub100" />

            <Button
                android:id="@+id/player2sub50"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Player2sub50"
                android:text="@string/sub50" />
        </TableRow>
    </TableLayout>

    <Button
        android:id="@+id/reset"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/player1sub"
        android:layout_marginTop="30dp"
        android:layout_centerInParent="true"
        android:onClick="reset"
        android:text="@string/reset" /> 
```

我检查了一下，但我确实设置了 setContentView 并尝试清理项目，所以我不知道可能出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:21:58.047

如下更新您的`onCreate(Bundle savedInstanceState)`方法，它可能会对您有所帮助

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ViewPagerAdapter adapter= new ViewPagerAdapter();
        ViewPager pager = (ViewPager)findViewById(R.id.viewpager);
        TitlePageIndicator indicator = (TitlePageIndicator)findViewById(R.id.indicator);
        pager.setAdapter(adapter);
        indicator.setViewPager(pager);
        pager.setCurrentItem(1);

        // added by subodh 
        TextView txtView1 = ((TextView) findViewById(R.id.Player1name));
        TextView txtView2 = ((TextView) findViewById(R.id.Player2name));
        TextView txtView3 = ((TextView) findViewById(R.id.player1wins));
        TextView txtView4 = ((TextView) findViewById(R.id.player2wins));
        TextView txtView5 = ((TextView) findViewById(R.id.Player1life));
        TextView txtView6 = ((TextView) findViewById(R.id.Player2life));

        setSettings(txtView1,txtView2,txtView3,txtView4,txtView5,txtView6);

    } 
```

**编辑您的第二种方法：**

```
public void setSettings(TextView txtView1,TextView txtView2,TextView txtView3,TextView txtView4,TextView txtView5,TextView txtView6) {
        SharedPreferences settings = getSharedPreferences("Prefs", 0);
        newGame = settings.getBoolean("newGame", true);
        autoDecide = settings.getBoolean("autoDecide", true);
        saved = settings.getBoolean("saved", false);

        if (saved) {
            player1 = readPlayer("Player 1");
            player2 = readPlayer("Player 2");
            if (player1 != null && player2 != null) 
            {
                txtView1.setText("" + player1.name);
                txtView2.setText("" + player2.name);
                txtView3.setText("" + player1.totalWins);
                txtView4.setText("" + player2.totalWins);
                txtView5.setText("" + player1.life);
                txtView6.setText("" + player2.life);

            }

        }

} 
```

# javascript - JavaScript：获取给定日期（月/年）的日期名称数组

> ID：11322281
> 
> 赞同：6
> 
> 时间：2012-07-04T04:06:19.720
> 
> 标签：javascript, date

如何在给定月份/年份的日期名称中获取整个月份？像 ：

```
var year = "2000";
var month = "7"

... some code here that makes an array with names of days of the given month... 
```

输出看起来像：

```
Array ("1\. Sunday", "2\. Monday", "3\. Tuesday", ... "29\. Thursday", "30\. Friday", "31\. Saturday"); 
```

最好的问候，克里斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T04:42:07.387

这应该按照您的要求进行。

```
function getDaysArray(year, month) {
    var numDaysInMonth, daysInWeek, daysIndex, index, i, l, daysArray;

    numDaysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    daysInWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    daysIndex = { 'Sun': 0, 'Mon': 1, 'Tue': 2, 'Wed': 3, 'Thu': 4, 'Fri': 5, 'Sat': 6 };
    index = daysIndex[(new Date(year, month - 1, 1)).toString().split(' ')[0]];
    daysArray = [];

    for (i = 0, l = numDaysInMonth[month - 1]; i < l; i++) {
        daysArray.push((i + 1) + '. ' + daysInWeek[index++]);
        if (index == 7) index = 0;
    }

    return daysArray;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T04:27:18.920

试试这个

```
<!DOCTYPE html>
<html>
<body>

<p id="demo">Click the button to display todays day of the week.</p>

<button onclick="myFunction()">Try it</button>

<script type="text/javascript">
function daysInMonth(month,year) {
    return new Date(year, month, 0).getDate();
}

function myFunction()
{var b=[],weekday = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],month=7,year=2000;
for(var i=1,l=daysInMonth(month,year);i<l;i++){
var d = new Date(year,month-1,i);
b.push(i+"."+weekday[d.getDay()]);
}
console.log(b);}//b is the desired array
</script>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T04:17:12.657

[DateJS](http://www.datejs.com/)具有实现逻辑所需的功能：

*   [`getDaysInMonth(year, month)`](http://code.google.com/p/datejs/wiki/APIDocumentation#getDaysInMonth)
*   [`date.toString("dddd")`](http://code.google.com/p/datejs/wiki/FormatSpecifiers)

正如@natlee75 所指出的，您可以从那里处理逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T04:27:25.917

您可以使用标准的 JavaScript Date 对象非常轻松地自己完成逻辑。这是一个将一个日期推送到您的数组中的示例。只需循环调用该方法的整个月。( [jsFiddle](http://jsfiddle.net/cL4E9/) )

```
var daysOfTheWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

function getDisplay(month, day, year) {
    var d = new Date(year, month-1, day);
    return day + '. ' + daysOfTheWeek[d.getDay()];
}

array_push($dates, getDisplay(7, 4, 2012)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T04:37:40.710

试试这个并在控制台中查看结果。

```
<script>
var weekday = ['Sunday', 'Monday', 'Tuesday', 'Wednesday',
               'Thursday', 'Friday', 'Saturday'];
var month = '7';
var year = '2012';
realMonth = parseInt(month,10)-1;
var monthObj = {};
for(var i=1;i<30;i++)
{
    var d = new Date(year,realMonth,i);              
    monthObj[i] = weekday[d.getDay()];
}
console.log(monthObj);
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-09T13:57:36.073

我知道这是一个老问题，但今天有一个与此相关的[问题](https://stackoverflow.com/q/59249724/5980430)，我想指出除了转换`day (0-6)`为`string (Sunday-Saturday)`

```
function getDays(year, month) { //month: 1-based, as normal person
    --month //change it to 0-based, as Date object
    let dayname = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
    let date = new Date(year, month)
    let result = []
    while(date.getMonth()==month){
      result.push(`${date.getDate()}. ${dayname[date.getDay()]}`)
      date.setDate(date.getDate()+1)
    }
    return result;
}

console.log(getDays(2019,12))
```

# c# - 光标如何放在文本末尾

> ID：11322282
> 
> 赞同：0
> 
> 时间：2012-07-04T04:06:21.433
> 
> 标签：c#, richtextbox

> **可能重复：**
> [如何更新光标位置？](https://stackoverflow.com/questions/11304542/how-can-i-update-cursor-position)

```
private void richTextBox1_TextChanged(object sender, EventArgs e)
{
   string text = richTextBox1.Text;
   text = text.Replace("a", "අ");
   text = text.Replace("අඅ", "ආ");
   text = text.Replace("i", "ඉ");
   richTextBox1.Text = text.ToString();
   this.richTextBox1.SelectionStart = text.Length;
} 
```

我使用了这个，但在替换文本光标到达最后一个字符的一半并且它与另一个字符绑定之后没有工作。我使用附加它也没有给出正确的结果。如果您知道另一种方法，请给出答案。

# sql - Oracle：用于分组子级别的 SQL

> ID：11322285
> 
> 赞同：-2
> 
> 时间：2012-07-04T04:06:52.017
> 
> 标签：sql, oracle

我有这张表，我如何查询这张表以获得下面的示例输出，其中传递的参数是 Item_Name 和 Spec_Name 谢谢。

```
Item_Name   Item_Value     Spec_Name   Spec_Value
---------   ----------     ---------   ----------
Circle      Zed Circle     Diameter    180
Circle      Charlo Circle  Diameter    330
Square      Ash Square     Side        120 
```

Item_Name=Circle 和 Spec_Name = Diameter 的示例输出：

```
 Circle             Zed Circle - Diameter
 -------------     ---------------------
 Zed Circle         180
 Charlo Circle      330 
```

我尝试使用 MAX() 函数，但它只给我 330。:(

这是整个查询：

```
 SELECT CASE
     WHEN (ITEM_NAME = 'Circle') THEN
      MAX(ITEM_VALUE)
   END AS "Circle",
   CASE
     WHEN (ITEM_NAME = 'Circle' AND SPEC_NAME = 'Diameter') THEN
      MAX(SPEC_VALUE)
   END AS "Circle - Diameter"
  from TBL_SHAPES 
```

已编辑用户已尝试此操作，请在评论中提及。

```
CASE WHEN (ITEM_NAME = 'Circle' AND SPEC_NAME= 'Diameter') 
THEN MAX(SPEC_VALUE) END 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:59:20.117

你试过使用`WHERE`吗？

```
SELECT item_value AS Circle, spec_value AS Diameter
FROM tbl_shapes
WHERE item_name = 'Circle' AND spec_name = 'Diameter'
ORDER BY spec_value 
```

# android - ANDROID - 打算将应用程序作为文件管理器启动

> ID：11322288
> 
> 赞同：2
> 
> 时间：2012-07-04T04:07:15.170
> 
> 标签：android, cordova, android-intent, file-manager

我正在使用`Phonegap`Build 构建一个应用程序。`HTML,CSS,JS`...

**当用户单击需要文件管理器的内容时​​，我希望该应用程序出现**。

我知道，我必须在 AndroidManifest 中添加一些内容，但我不知道是什么……有什么帮助吗？

另一个示例：假设我在主屏幕 (APEX) 上并且想要选择一个新图标。当我单击该图标时，会出现一个列表，其中包含我可以用来查找该图标的所有应用程序。这些应用程序包括 Astro、Box、SolidExplorer、Gallery 等等……我怎样才能让我的应用程序出现在该列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:02:26.073

您需要使用带有特定**[数据](http://developer.android.com/guide/topics/manifest/data-element.html)**元素**[的意图过滤器](http://developer.android.com/guide/topics/manifest/intent-filter-element.html)**`activity`声明您的**[清单](http://developer.android.com/guide/topics/manifest/manifest-intro.html)**文件。

例如：

```
 <intent-filter> 
    <action android:name="android.intent.action.VIEW" /> 
    <category android:name="android.intent.category.DEFAULT" /> 
    <data android:scheme="file" /> 
    <data android:host="*" /> 
    <data android:pathPattern=".*\\.pdf" /> 
  </intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:19:29.620

`Intent.ACTION_GET_CONTENT`可能会有所帮助。

这是使用图像类型文件启动文件选择器的示例。

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_GET_CONTENT);
intent.setType("image/*"); // choose any image
intent.addCategory(Intent.CATEGORY_OPENABLE);
Intent chooserIntent = Intent.createChooser(intent, "File chooser");
startActivityForResult(chooserIntent, REQUEST_CODE); 
```

# iphone - 如何显示 PhotoLibrary 中的特定图像？

> ID：11322289
> 
> 赞同：1
> 
> 时间：2012-07-04T04:07:30.083
> 
> 标签：iphone, objective-c, cocoa-touch, ios4

> **可能重复：**
> [从 iPhone 中的 ALAsset 检索的 URL 显示图像](https://stackoverflow.com/questions/3837115/display-image-from-url-retrieved-from-alasset-in-iphone)

在我的应用程序中，我需要从照片库中获取特定图像，

使用**didFinishPickingMediaWithInfo**我可以获得 Imagename 和 ImagePath。

我将 Imagename、ImagePath 存储在数据库中。

但是，如何使用 Photo Library 中的 Imageview 中的 Imagename 或 ImagePath 来显示该特定图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T05:13:18.283

请利用`ALAssetLibrary`. 为此，请添加`AssetsLibrary.framework`到您的项目并编写以下代码。

您的文件名应如下所示`assets-library://asset/asset.JPG?id=1000000194&ext=JPG`

```
NSString *fileName = @"assets-library://asset/asset.JPG?id=1000000194&ext=JPG";

typedef void (^ALAssetsLibraryAssetForURLResultBlock)(ALAsset *asset);
typedef void (^ALAssetsLibraryAccessFailureBlock)(NSError *error);    

ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
{
    ALAssetRepresentation *rep = [myasset defaultRepresentation];
    CGImageRef iref = [rep fullResolutionImage];
    UIImage *images = nil;

    if (iref)
    {
        images = [UIImage imageWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]];       

        //doing UI operation on the main thread
         dispatch_async(dispatch_get_main_queue(), ^{

         yourImageView.image = images;

     });    

    }   
};

ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
{
    NSLog(@"can't get image");
};    

NSURL *asseturl = [NSURL URLWithString:fileName];

ALAssetsLibrary* assetslibrary = [[[ALAssetsLibrary alloc] init] autorelease];
[assetslibrary assetForURL:asseturl 
               resultBlock:resultblock   
              failureBlock:failureblock]; 
```

**笔记：**

升级到 iOS 5 并进行代码重构以使用 ARC 后，您将收到错误消息

> 在其拥有的 ALAssetsLibrary 的生命周期之后访问 ALAssetPrivate 的无效尝试重构以使用 ARC

要解决此问题，请添加一个静态方法来检索`ALAssetLibrary`类的共享实例。

```
+ (ALAssetsLibrary *)defaultAssetsLibrary {
    static dispatch_once_t pred = 0;
    static ALAssetsLibrary *library = nil;
    dispatch_once(&pred, ^{
        library = [[ALAssetsLibrary alloc] init];
    });
    return library; 
} 
```

然后，使用它访问它`[MyClass defaultAssetsLibrary];`

```
[[MyClass defaultAssetsLibrary] assetForURL:asseturl 
                   resultBlock:resultblock   
                  failureBlock:failureblock]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:30:33.017

如果您有图像路径，则可以使用以下代码。让我们将 imagePath 作为 NSString 变量，其中包含图像路径，包括图像名称。

```
 NSData *thedata=[[NSData alloc]initWithContentsOfFile:imagePath];
     UIImageView *img=[[UIImageView alloc]initWithImage:[UIImage imageWithData:thedata]]; 
```

希望能帮助到你。

# android - android中的数据库位置

> ID：11322292
> 
> 赞同：1
> 
> 时间：2012-07-04T04:07:56.557
> 
> 标签：android, database

在我的应用程序中，我有一个数据库，我想查看该数据库，我按照以下步骤操作：

数据>数据>你的包名>（在此之后它显示两个文件夹，我看不到数据库的任何选项）数据库>你的数据库文件。

但我看不到数据库文件。它在我的包中显示了两个文件夹。任何人请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:25:15.013

然后按照此路径，您应该会看到两个没有扩展名的文件。但你看不到数据库的内容。

如果您想查看它，您应该推送然后导入其他 SQLite 管理器（例如 Firefox 插件）。也许你不能创建数据库，如果你看不到它。

* * *

**更新：**对于模拟器中的插入、删除或获取数据库，您应该安装`Android DDMS`（在 Eclips 帮助菜单->安装软件中）并按顺序选择*Push*、*Delete*和*Pull*图标。

![在此处输入图像描述](../Images/27415d2070757cbd560531f9dce9e7fb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T04:32:56.207

除非您已将手机植根（这是一项安全预防措施），否则您无法访问设备上数据目录中的文件。

你有几个选择：

1) 在模拟器中运行您的应用程序并使用 DDMS 将数据库表单拉到那里

2) 根你的手机

3）在您的应用程序中放置一个方法，将您的数据库复制到您可以在应用程序之外访问的位置（例如您的SD卡）。

复制到 SD 卡的简单代码：

```
public void backup() {
    try {
        File sdcard = Environment.getExternalStorageDirectory();
        File outputFile = new File(sdcard,
                "yourdb.sqlite");

        if (!outputFile.exists()) 
             outputFile.createNewFile(); 

        File data = Environment.getDataDirectory();
        File inputFile = new File(data,
                "data/your.package.name/databases/yourdb.sqlite");
        InputStream input = new FileInputStream(inputFile);
        OutputStream output = new FileOutputStream(outputFile);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = input.read(buffer)) > 0) {
            output.write(buffer, 0, length);
        }
        output.flush();
        output.close();
        input.close();
    } catch (IOException e) {
        e.printStackTrace();
        throw new Error("Copying Failed");
    }
} 
```

# function - 如何在 MATLAB 中将匿名函数转换为符号函数？

> ID：11322295
> 
> 赞同：8
> 
> 时间：2012-07-04T04:08:34.410
> 
> 标签：function, matlab, anonymous-function, symbolic-math

假设我有一个匿名函数`f = @(x) x^2`，我想将其转换为符号函数。有内置命令吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T07:36:54.240

您可以将其传递给 SYM：

```
f = @(x) x^2;
g = sym(f) 
```

但是大多数符号函数在接收到函数句柄时会自动执行此操作（`subs`,`int`等...）

# html - 如何在 html 中使用 ruby 输出？

> ID：11322297
> 
> 赞同：4
> 
> 时间：2012-07-04T04:09:13.200
> 
> 标签：html, ruby

我有一个 ruby​​ 程序从 api 获取 json 并从中分离值并显示它。我需要做的是以 html 形式呈现输出。我如何从 ruby​​ 中获取值并将其传递给 html，以便我可以使用该值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:41:38.793

您可以使用[倾斜](https://github.com/rtomayko/tilt)宝石

例如，模板`foo.html.haml`：

```
!!! 5
%html
  %head
    %title Rotten Potatoes!

  %body
    %h1.title Rotten Potatoes!

      Hey = yield! 
```

然后将名称传递给模板：

```
template = Tilt::ERBTemplate.new('foo.html.haml')
output = template.render { 'Joe' } # => html code with phrase 'Hey Joe!' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:14:01.587

也许只需添加另一行代码即可使用参数重定向到另一个页面。因此，您可以接收参数并将其呈现为 html。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-04T04:26:08.163

有一个很棒的教程：[http ://railscasts.com/episodes/324-passing-data-to-javascript?view=asciicast](http://railscasts.com/episodes/324-passing-data-to-javascript?view=asciicast)

# c# - 在 C# 中列出程序 exe 名称？

> ID：11322298
> 
> 赞同：0
> 
> 时间：2012-07-04T04:09:43.900
> 
> 标签：c#, string

好的，我正在使用此代码来获取用户机器上所有已安装的程序。

```
string uninstallKey = @"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall";
        using (RegistryKey rk = Registry.LocalMachine.OpenSubKey(uninstallKey))
        {
            foreach (string skName in rk.GetSubKeyNames())
            {
                using (RegistryKey sk = rk.OpenSubKey(skName))
                {
                    try
                    {
                        listBox1.Items.Add(sk.GetValue("DisplayName"));
                    }
                    catch
                    {
                        MessageBox.Show("Error", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                    }
                }
            }
        } 
```

所有程序都列在一个列表框中。我如何获得该程序的“programName”.exe。像计算器一样是 calc.exe（我想要 calc，但不是 .exe）我该怎么做？

我正在这样做，所以我可以说：

```
System.Diagnostics.Process.Start(exeName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:11:23.710

你可以使用 TrimEnd

```
listBox1.Items.Add(sk.GetValue("DisplayName").ToString().TrimEnd(".exe".ToCharArray())); 
```

编辑：

要从 启动程序`System.Diagnostic.Process.Start`，您不需要修剪“.exe”，您可以保留它，它会执行

# css - 列表菜单上的 CSS 固定 div

> ID：11322300
> 
> 赞同：0
> 
> 时间：2012-07-04T04:09:49.080
> 
> 标签：css, overlap, css-position

我有一个列表菜单，例如：

```
<div id="my_menu">
    <ul class="my_horizontal_menu">
        <li class="nav_1">
            <a>my nav1</a>
        </li>
        <li class="nav_2">
            <a>my nav2</a>
        </li>
    </ul>
</div> 
```

我有其他 div 后显示内容，根据点击菜单：

```
<div id="my_container_1">
    some data
</div>
<div id="my_container_2">
    some data
</div> 
```

我使用一些简单的 JQuery 代码来显示正确的菜单和容器。一切正常。现在，我有一个固定的 div 到一个容器中：

```
<div id="my_container_2">
    <table>...some data...</table>
    <div id="my_fixed_div">
    </div>
</div> 
```

固定的 div`my_fixed_div`在页面滚动时使用一些 CSS 进行修复并且它可以工作。问题是当用户滚动时，这个固定的 div 与菜单重叠： ![固定 DIV 与菜单重叠](../Images/528ed968e874242539e8adf273c596db.png)

你知道如何解决这个问题吗？始终在所有页面内容上显示固定 div？我试过了，`z-index:1000`但我不工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:16:46.353

给它一个较低的 z-index 值，让它呈现在其他元素后面

# linux - 反引号 - ` - 在命令行调用中专门针对 Git 命令有什么作用？

> ID：11322302
> 
> 赞同：1
> 
> 时间：2012-07-04T04:10:01.743
> 
> 标签：linux, bash, command-line, backticks

无论如何，我都不是“命令行”的人。我的整个职业生涯都是前端开发人员，几乎没有与命令行交互，而是尽可能多地使用应用程序 GUI，所以这对你们中的许多人来说可能是一个相当初级的问题。

我在尝试使用 Git 提交时遇到了一个小问题。我包含了`-m`消息标志并尝试了类似于“示例添加功能”的消息，其中“添加”一词被`反引号符号包围（无法在此处显示，因为这样做会将单词显示为代码，我不知道如何在这个编辑器中转义它）。

我得到了错误：`-bash: add: command not found`

过去，我在 Git 中多次使用反引号将函数名括起来，没有任何问题。我假设这里有某种保留关键字，特别是 Git，或者一般来说只是 Linux 中的命令行，但我想知道具体情况是什么，这样我就可以了解将来如何避免它。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T04:12:44.430

Bash 获取反引号的内容并使用它作为命令运行另一个 bash 进程。另一种（首选）方式是`$( ... )`.

要包含反引号，请在字符串中使用单引号，而不是 "，而是 '。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:15:44.183

此外，这种语法替代了另一个进程的标准输出，而不仅仅是运行它。

# c# - 如何将下拉列表绑定到 C# 中的类型化数据集？

> ID：11322307
> 
> 赞同：1
> 
> 时间：2012-07-04T04:11:23.097
> 
> 标签：c#

我在我的 Web 应用程序中添加了一个数据集（xsd）并将其配置到 SQL 数据库中，并编写了一个选择查询并将其命名为 Getdata（）。如果我打开 xsd 文件，它在 TableAdapters 下有 Getdata() 方法。Dataset(xsd) TableAdapter 有 Getdata() 方法来获取详细信息。如何在 C# 中调用 xsd 的 TableAdapter 的此方法并将数据绑定到 dropdownlist。请建议我完成此操作的完整 C# 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:20:40.433

你可以这样做。

```
YourTableAdapter  yourTableAdapter = new YourTableAdapter();
YourTypedDataSetClass.YourTableDataTable yourTable = yourTableAdapter .GetData();
dropdownlist1.DataTextField = "TextFieldInYourTable";
dropdownlist1.DataValueField = "ValueFieldInYourTable";
dropdownlist1.DataSource = yourTable;
dropdownlist1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T07:12:45.133

您可以尝试使用此代码

```
TypedDataSet typedDataSet  = ....;
dropdownlist1.DataTextField = typedDataSet.YourTable.YourColumn1;
dropdownlist1.DataValueField = typedDataSet.YourTable.YourColumn2;
dropdownlist1.DataSource = typedDataSet;
dropdownlist1.DataBind(); 
```

# python - 奇怪的 os.chmod 行为

> ID：11322313
> 
> 赞同：1
> 
> 时间：2012-07-04T04:12:14.950
> 
> 标签：python, shell, scripting, python-3.x

我有一个共享的 git 存储库创建脚本，我一直在用 Python 3.2.3 编写，虽然绝大多数脚本都在工作，并且几乎可以生产（还有一些安全工作要做），但我一直在遇到一个尴尬的错误，对于我的生活，我无法弄清楚。

在我的迭代更改模式部分：

```
try:
  if (args.debug):
    print('Recursively changing the access mode of target directory ' + full_path +
          ' to ' oct(stat.S_IRWXU | stat.S_IRWXG | stat.S_IROTH) + '.')
  if (args.debug):
    print('setting ' + full_path +
          ' to stat.S_IRWXU | stat.S_IRWXG | stat.S_IROTH ')
  os.chmod(full_path, stat.S_IRWXU | stat.S_IRWXG | stat.S_IROTH)
  for root, dirs, files in os.walk(full_path):
    for spam in dirs:
      if (args.debug):
        print('spam in dirs: ' + spam +
              '; stat.S_IRWXU | stat.S_IRWXG | stat.S_IROTH: ')
      os.chmod(os.path.join(root, spam), stat.S_IRWXU | stat.S_IRWXG | stat.S_IROTH)
    for eggs in files:
      if (args.debug):
        print('eggs in files: ' + eggs +
              '; stat.S_IRWXU | stat.S_IRWXG | stat.S_IROTH: ')
      os.chmod(os.path.join(root, eggs), stat.S_IRWXU | stat.S_IRWXG | stat.S_IROTH)
except OSError as e:
  if (args.debug):
    print('OSError raised during recursive chmod ' +
          oct(stat.S_IRWXU | stat.S_IRWXG | stat.S_IROTH) + ' setting. ' +
          'Removing the partially created repository.')
  shutil.rmtree(full_path) 
```

我遇到了一个问题——它没有正确设置我的目录权限。事实上，它一直在做完全相反的事情。它一直在剥夺我所有的目录权限。运行脚本后目录树如下所示：

```
d-----S--- 7 mat users 4096 Jul  3 23:10 test
ls: cannot open directory /home/mat/git/test: Permission denied 
```

（setgid 位是在稍后的工作循环中设置的）显然，我遗漏了一些东西，但我不能确切地说出是什么，因为我正在使用 stat 模块的常量。并按位或将它们组合在一起以获得我正在寻找的 0o744 值。

在有人建议我使用八进制文字而不是 stat 模块的常量之前，我已经尝试过，结果相同。

任何帮助都会很重要。〜米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:28:14.060

（根据评论，将其发布为完整性的答案，因为这是问题所在。）

由于您的其余代码看起来不错，因此您的`setgid`循环似乎正在清除您之前的权限。

# javascript - 在 html 中显示具有两个不同页面的数据的问题

> ID：11322314
> 
> 赞同：0
> 
> 时间：2012-07-04T04:12:26.203
> 
> 标签：javascript, html, html-lists, web-sql

嘿伙计们，我有在不同页面中使用 html 显示数据的问题，这意味着当我在第一页从 web sql 获取数据时，然后我单击要编辑的数据并将我链接到另一个页面，所以我该怎么做那？我之前测试过，但它只是重定向到该页面并且没有显示选定的数据，所以我想怎么做，有人有解决方案吗？非常感谢。

下面的链接是我的一页显示数据的html页面，希望大家能帮帮我，万分感谢。[这是我的工作（显示数据）](http://jsfiddle.net/Gf9gp/)

```
function showRecords(){
    results.innerHTML='';
    db.transaction(function(tx)
    {
        tx.executeSql(selectAll,[],function(tx,result)
        {
            dataset = result.rows;
            for(var i=0,item=null;i<dataset.length;i++)
            {
                item = dataset.item(i);
                results.innerHTML+=
                '<li>' + item['fname'] + ' <a href="#" onclick="loadRecord('+i+')">view</a>'+'<a href="#" onclick="deletetab('+item['id']+')">delete</a>'+'</li>';
            }
        });
    });
} 
```

这是显示记录的代码，但我想显示所选记录的不同页面并编辑，然后更新，这意味着我单击查看链接然后将我重定向到另一个页面并显示所选数据的所有信息，所以最好的方法是什么？我不知道，因为我是新手

```
function loadRecord(i){
    var item=dataset.item(i);
    fname.value = item['fname'];
    id.value = item['id'];
} 
```

这是我的 loadRecord，我想我需要编辑它，以便当我重定向到另一个 html 时它可以显示数据，这可能吗？请告诉我，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:37:43.440

首先你的问题不清楚。
如果您的意思是当单击编辑按钮时您想转到另一个可以编辑的页面，那么如果您使用任何 Web 开发语言（如 php、jsp 等）就可以完成。

如果您使用的是 php 或 mysql，您将有 2 个页面让我们说主页和编辑。

**主页**

在这里，您将展示详细信息。为此，您必须从数据库中选择它，它将是这样的：

```
$r=mysql_query("select * from table details);
$var=mysql_fetch_array($r); 
```

然后像这样放置编辑链接：

```
<a href="edit.php?var=$var['id']"> 
```

`var['id']`将从表的特定字段中获取值

**编辑页面**

在这个页面中制作html部分进行编辑，然后在php部分中这样写

```
 mysql_query("select * from table where id=.'"$_GET['var']"'."); 
```

现在将根据 id 的值选择 table 中的值。

如果您想要更详细地输入您的代码并更具体

# perl - lighttpd url 重定向和安全性

> ID：11322318
> 
> 赞同：1
> 
> 时间：2012-07-04T04:12:44.977
> 
> 标签：perl, security, .htaccess, video-streaming, lighttpd

交叉发布[http://perlmonks.org/?node_id=979815](http://perlmonks.org/?node_id=979815)

在我的服务器中，我们使用 lighttpd 流式传输视频。现在，拥有视频链接的每个人都可以流式传输视频并观看。我想确保视频的安全性，以便不是每个人都可以观看视频。我正在考虑创建一个特定于用户和特定于视频的 md5sum，它可以与 url 一起发送，以便只有该特定 url 请求的视频流。

例如

让我们假设现在每个人都可以在以下链接中看到视频

http://xyz.com/musiv-video/video.mp4

根据我的逻辑，以下网址应仅流式传输视频

http://xyz.com/musiv-video/video.mp4?md5=202cb962ac59075b964b07152d234b70&id=62485

我需要获取请求的 URL，以便我可以验证请求的 URL 具有正确的 md5sum，从而使用户观看视频。如果它没有正确的参数，那么我不应该允许视频流式传输。

有什么建议么。提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:07:10.120

也许您可以创建用户/视频特定文件夹并创建指向这些文件夹中视频文件的符号链接以获取 http://example.com/musiv-video/[md5sum]/video.mp4。然后您可以提供整个 musiv-video 文件夹。请注意，任何可以看到 http 请求的人仍然可以看到任何视频，因此这并不是真正的安全措施，只是让访问变得更加复杂。并确保 Google 搜索未找到这些网址。

如果您想真正限制访问，则需要创建一些更好的身份验证方案。

# shell - Unix：创建一个与工作目录同名的目录

> ID：11322319
> 
> 赞同：0
> 
> 时间：2012-07-04T04:12:45.350
> 
> 标签：shell, unix, mkdir

假设我在`/var/www/foo`其中并且想创建`/tmp/foo`. 有没有办法我可以通过编程方式做到这一点并最终得到类似的命令`mkdir /tmp/[insert something here]`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T04:17:07.797

```
mkdir /tmp/`basename $(pwd)` 
```

（请注意，它们是反引号，而不是正引号。）

这是有效的，因为反引号做命令替换。它基本上运行反引号中的内容，并用命令运行中的标准替换它。在这种情况下，该`basename`命令具有当前工作路径。并且`$(…)`与反引号完全相同。

命令“`basename`从文件名中去除目录和后缀”。（见[http://unixhelp.ed.ac.uk/CGI/man-cgi?basename](http://unixhelp.ed.ac.uk/CGI/man-cgi?basename)）

你也可以使用（如果你不想有反引号）：

```
mkdir /tmp/$(basename $(pwd)) 
```

请注意，如果当前目录的路径包含空格或其他特殊字符，则需要将命令替换放在双引号中：

```
mkdir "/tmp/$(basename "$(pwd)")" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:57:13.863

`$PWD`始终包含当前目录的完整路径。因此`${PWD##*/}`（`$PWD`直到最后的部分除外`/`）是当前目录的名称。

```
mkdir "/tmp/${PWD##*/}" 
```

如果您知道当前目录的名称不包含任何空格或任何字符，则可以省略双引号`*?\[`。

在 zsh 中，有一种更简单的方法可以提取路径的最后一个组件：

```
mkdir -- /tmp/$PWD:t 
```

# asp.net - ASP.NET：如何将页面的访问权限限制为只有一个用户？

> ID：11322325
> 
> 赞同：3
> 
> 时间：2012-07-04T04:13:58.710
> 
> 标签：asp.net

如何通过一次仅访问一个用户来限制页面。使用 asp.net 我可以使用 global.asax，是否有任何其他方式来限制，如果一个用户访问该页面，另一个用户无法访问该页面。我们必须给出一个用户正在访问该页面的消息。可能吗。你能帮助我或提供一些参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:47:29.673

虽然可能有很多更好的方法来处理这类问题，但我会假设你确实需要这个。

我会做什么：

使您的应用程序在页面被加载时（当它没有被“锁定”时），它会记录到页面被加载的数据库并“锁定”它。在实际页面中，我会使用某种 AJAX 来每隔 5-15 秒不断地轮询 Web 服务器，以告诉您的应用程序用户仍在页面上。然后使页面在最后一次 AJAX 调用保存到数据库的时间后 5-15 秒后解锁。

同样，我真的怀疑有更好的方法来解决这样的问题，但这是对您问题的直接回答

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T04:31:59.230

基于此：

> 是的，jupaol，这取决于帐户，在我的网络应用程序中，一份报告必须只批准一个用户，但批准权限有两个用户。如果他们俩都访问同一个页面并一次批准，那将是一团糟。这里我没有使用数据库。

问题与并发有关，有几种方法可以解决这样的问题，例如最简单的一种是使用[乐观并发](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)。即使您没有为此使用数据库，您也可以模拟它。

**您应该将批准者的结果存储在某处，以便将报告标记为已批准**，考虑到这一点，您应该能够执行以下操作：

1.  在渲染页面之前获取最新的报告状态
2.  如果报告没有被批准，正常渲染
3.  如果报告在几秒钟前获得批准，则以只读模式报告批准它的人（或类似方法）
4.  *向ChangeStatus*方法添加验证，在此方法中执行以下操作：
    1.  获取当前报告的最新状态
    2.  如果报告仍未验证，则阻止线程（您可以使用 a`Mutex`或类似的）并将报告标记为验证它
    3.  如果报告已经验证它，引发域异常并在您的页面中正确处理它（可能以只读模式呈现页面，说明报告已经验证它）

如果您想要一个响应速度更快的应用程序 (RIA)，您可能需要考虑以下方法：

*   也许这将是最糟糕的方法，但它仍然是一种选择，您可以在用户请求您的页面时保持日志跟踪，然后在后续请求中检查日志是否仍然有效，如果不是，则重定向到另一个页面，指示*页面正在使用中*，否则允许访问该页面。我相信这是一种容易出错的方法，因为您将依赖这种简单的验证来防止系统出现不一致，此外您还会遇到以下方法中描述的*轮询问题*

*   使用 AJAX 轮询来自服务的数据，检查报告是否已被批准。也许这是完成此任务的最简单方法，但不推荐这样做，因为您会不断轮询服务器，最终会遇到可伸缩性问题

*   当服务器事件发生时，您可以使用[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)向浏览器（客户端）通知，在这种情况下，当您的报告已被批准时。这种方法的问题是您必须与服务器保持打开的连接才能获得通知。

*   最后一种方法也是目前最推荐的方法是使用[Web Sockets](http://en.wikipedia.org/wiki/WebSocket)，这是 StackOverflow 中用于实时获取通知的技术。

# c# - 通过打开打印对话框打印报告

> ID：11322328
> 
> 赞同：1
> 
> 时间：2012-07-04T04:14:57.890
> 
> 标签：c#, activereports

如果我也可以通过打开打印对话框而不使用任何 Webviewer 在客户端打印报告，那很好。

如何在客户端打开打印对话框？

* * *

**编辑评论中添加的代码：**

```
rpt.Run();
rpt.Document.Print(false, false, false); 
```

我使用了这段代码。但是这段代码是服务器端打印机而不是客户端打印机。现在我想直接在客户端使用打印对话框进行打印

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:28:15.793

你可以使用[`PrintPreviewControl`](http://msdn.microsoft.com/en-us/library/system.windows.forms.printpreviewcontrol.aspx)， [`PrintDocument`](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.printdocument%28v=vs.90%29)

用于印刷

```
PrintDocument printDoc = new PrintDocument();
printDoc.PrintPage += new PrintPageEventHandler(this.printDoc_PrintPage);
printDoc.Print() 
```

用于打印预览

```
PrintPreviewDialog dlgPrint = new PrintPreviewDialog();
dlgPrint.Document = printDoc;
dlgPrint.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:18:20.203

请在[https://stackoverflow.com/a/11419422/51061](https://stackoverflow.com/a/11419422/51061)查看答案。我认为这将完全回答您的问题。

# php - 匹配前面有空格或没有的特定字符正则表达式

> ID：11322329
> 
> 赞同：0
> 
> 时间：2012-07-04T04:14:59.047
> 
> 标签：php, regex

在这篇[文章](https://stackoverflow.com/questions/9297251/regex-to-only-match-specific-characters-preceded-by-a-space-or-nothing-start-of)之后，我正在尝试相同的任务，但是下面给出的正则表达式给了我相互矛盾的结果：

```
$text = "Jiaaah.. RT @mizter_popo";

$pattern = "/(^|[ ])(\RT(?=\s))/";

if(preg_match($pattern, $text)) {
    echo "correct";
} else {
    echo "wrong";
} 
```

我预计这会给出“正确的”。在我的本地服务器上的 PHP 脚本中运行它，[这里](http://writecodeonline.com/php/)返回“错误”。[在这里](http://www.ruig.com/laboratorium/regex-tester)运行相同的逻辑返回“正确”？任何人都可以帮助解释发生了什么吗？或者也许我期望“正确”得到回应是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:41:17.947

对我来说，在这个特定的例子中删除`\`之前的`RT`工作：

```
$pattern = "/(^|[ ])(RT(?=\s))/"; 
```

正则表达式测试器站点可能正在做一些严格的清理工作，以确保人们不会破坏他们的站点，这可能会扭曲哪些有效，哪些无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:43:42.507

我发现了一种使用断言而不是后视的模式。也有交替，但我敢打赌，与比我更有 REGEX 天赋的人的断言中可能会考虑到这一点......

```
$pattern = "/(^RT)|((?<=[ ])RT)/"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T04:44:53.820

**这段代码可以工作**

```
if (preg_match('/(?<=^|\s)RT(?=\s)/', $subject)) {
    # Successful match
} else {
    # Match attempt failed
} 
```

但你提到的网站无论如何都不支持这一点。

# javascript - 如何找到附加到按钮单击事件的方法

> ID：11322337
> 
> 赞同：3
> 
> 时间：2012-07-04T04:15:48.093
> 
> 标签：javascript, jquery, firebug

如何从 firebug 中找出哪些方法或哪些方法附加到按钮的单击事件处理程序？

这是按钮的代码

```
<button class="rsmg_button_save ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary ui-state-focus" type="button" role="button" aria-disabled="false" style="display: inline-block;"><span class="ui-button-icon-primary ui-icon ui-icon-disk"></span><span class="ui-button-text">Save</span></button> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T04:28:56.687

如果函数是使用 jQuery 附加的，您可以使用 firebug 来查看它。
jQuery 事件使用`data`方法存储，键为`events`.
因此`$("desiredSelector").data("events")`将显示附加到该特定元素的所有事件。
有关详细信息，请查看此[链接](http://www.bennadel.com/blog/1727-Viewing-jQuery-DOM-Event-Bindings-With-FireBug.htm)。
对于 Javascript 中定义的事件，您可以检查`onClick`属性或使用 jfriend00 建议的方法。

* * *

**编辑：**
有一个[jQuery 插件](http://firequery.binaryage.com/)可以让这更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T04:21:30.927

`onclick`Javascript 代码可以使用属性或使用`addEventListener()`或`attachEvent()`（取决于浏览器和浏览器版本）连接到按钮单击事件。

如果有处理事件的 javascript 代码并且在 HTML 中没有指定 onclick 处理程序，则 javascript 代码正在安装事件处理程序，方法是`onclick`稍后设置属性或使用`addEventListener()`or `attachEvent()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-01T11:33:44.193

我用上面的 $("desiredSelector").data("events") 和[GetEventListeners 进行](https://getfirebug.com/wiki/index.php/GetEventListeners)了艰苦的搜索，但是在 Firebug 2.x 中，有一种非常简单的新方法可以找到绑定的事件：如果你有一个绑定函数将在该行旁边找到一个“ev”：

[![在此处输入图像描述](../Images/4c3ef0f2ff3aa5f2f323565339a74d2c.png)](https://i.stack.imgur.com/gnaSH.jpg)

很酷的东西！

# caching - 重写重定向首先到缓存的内容

> ID：11322340
> 
> 赞同：-1
> 
> 时间：2012-07-04T04:16:17.563
> 
> 标签：caching, mod-rewrite

我尝试了很多组合，但没有一个有效。我试图编写重写规则：

1.  假设 URL 为[http://example.com/project/big_bunny](http://example.com/project/big_bunny)
2.  当用户访问站点重写首先尝试读取文件 /cache/project/big_bunny.html 但前提是没有任何获取或发布数据
3.  如果没有缓存重写过程标准路由规则：index.php?_rt=$1 [L,QSA]

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:31:49.093

Try this:

```
# Check if using POST method
RewriteCond %{THE_REQUEST} !^POST
# Check if already rewrote to cache
RewriteCond %{REQUEST_URI} !^/cache
# Check if cache exists
RewriteCond /cache%{REQUEST_URI}.html -f
# Check if contains any GET query string
RewriteCond %{QUERY_STRING} !.+
# Do the rewrite
RewriteRule ^/(.*) /cache/$1.html [L]

# Check if already rewrote to cache
RewriteCond %{REQUEST_URI} !^/cache
RewriteRule ^/(.*) index.php?_rt=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:20:14.257

尝试这个：

```
# Check the cache, and rewrite if file exists
RewriteCond %{THE_REQUEST} !^POST [NC]
RewriteCond %{QUERY_STRING} ^$
RewriteCond %{DOCUMENT_ROOT}/cache%{REQUEST_URI}.html -f
RewriteRule ^ /cache%{REQUEST_URI}.html [L]

# If URI doesn't start with /cache/, it wasn't cached so rewrite to index.php
RewriteCond %{REQUEST_URI} !^/cache/
RewriteRule ^(.*)$ index.php?_rt=$1 [L,QSA] 
```

# eclipse - Eclipse 3.8：下载站点在哪里？

> ID：11322349
> 
> 赞同：36
> 
> 时间：2012-07-04T04:17:17.823
> 
> 标签：eclipse, eclipse-plugin, eclipse-juno

我对 Eclipse 3.8 版有点困惑

对我来说有点像鬼：没有代号，没有下载站点？

所有的包都在哪里，比如“用于 RCP 和 RAP 开发人员的 Eclipse”？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-04T04:34:00.783

Eclipse 3.8 和 4.2 作为 Juno 版本的一部分同时发布，但各种开发人员类型的编译仅基于版本 4.2 可用。

要使用 Eclipse 3.8，您需要从 Eclipse Marketplace 或 Juno 存储库下载基本平台并安装所需的插件。

浏览到这里并下载标有 Eclipse SDK 的那个：

[http://download.eclipse.org/eclipse/downloads/drops/R-3.8.2-201301310800/](http://download.eclipse.org/eclipse/downloads/drops/R-3.8.2-201301310800/)

朱诺存储库：

[http://download.eclipse.org/releases/juno/](http://download.eclipse.org/releases/juno/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-14T10:35:19.263

**官方“Eclipse Project 3.x”流下载页面**

```
http://download.eclipse.org/eclipse/downloads/eclipse3x.html 
```

这有到 3.8.1 版本和 3.8 维护版本的链接。如果你想在任何地方链接到 3.8，这可能是最好的地方。

请注意，3.8 不是一个完整的“打包”版本——它只是核心。可以从 IDE 中添加功能和插件，以复制 Java EE/PHP/C++ 等打包发行版的功能。

由于该版本中存在严重的性能问题，那些*从 4.2 Juno 降级的*人（比如我自己）对 3.8 特别感兴趣。这些似乎会影响 XML 编辑器、PHP、切换、打开和关闭编辑器——将先前 Eclipse 版本的即时性能变成无休止的 3-5 秒等待。

Indigo 3.7 是最后一个可用的“打包”版本。3.8 可能会在修复几个 Indigo 错误和支持 Java 7 方面提供优势。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-04T04:47:09.630

最近发布的**3.8.2**的链接：http : [//archive.eclipse.org/eclipse/downloads/drops/R-3.8.2-201301310800/](http://archive.eclipse.org/eclipse/downloads/drops/R-3.8.2-201301310800/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-31T01:03:51.483

其他答案中的链接似乎都不起作用了，~~但是eclipse.org 上[的 Eclipse 项目更新站点](http://wiki.eclipse.org/Eclipse_Project_Update_Sites)页面说它是 [http://download.eclipse.org/eclipse/updates/3.8](http://download.eclipse.org/eclipse/updates/3.8)并且对我~~有用，现在 3.8移至档案馆。我不认为更新可用了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T14:39:06.800

要将 Java EE 安装到 3.8.1 下载中，这对我有用：[https](https://stackoverflow.com/a/5028910/503025) ://stackoverflow.com/a/5028910/503025 Java EE 在 Juno 升级站点中。

# .net - 如何将 .NET 程序集注册为 COM？

> ID：11322353
> 
> 赞同：39
> 
> 时间：2012-07-04T04:18:29.987
> 
> 标签：.net, .net-assembly, tridion

我已经为本地机器上的工作流创建了一个类库并构建它。我将完整的解决方案移至 Tridion 服务器，并尝试使用 regasm.exe 工具在服务器中注册程序集，如下所示：

```
C:\User\XYZ\Desktop\>RegAsm \codebase F:\Workflow\WorkflowHandler/bin/debug/WorkflowHandler.dll 
```

我收到以下错误：

> 无法加载“F:\Workflow\WorkflowHandler/bin/debug/WorkflowHandler.dll”，因为它不是有效的 .NET 程序集。

我的服务器详细信息：

已安装64 位、[Windows Server 2008 R2](https://en.wikipedia.org/wiki/Windows_Server_2008#Windows_Server_2008_R2) Enterprise 和 .NET Framework 4。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-04T04:51:02.013

你确定你`RegAsm`的路径是正确的，因为你只通过 exe 名称调用它而不指定完整路径？您必须调用正确版本的 RegAsm 才能使其工作，即 .NET 4 的 32 位或 64 位版本。

尝试指定完整路径：

```
c:\Windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe /codebase F:\Workflow\WorkflowHandler\bin\debug\WorkflowHandler.dll 
```

或者

```
c:\Windows\Microsoft.NET\Framework64\v4.0.30319\RegAsm.exe /codebase F:\Workflow\WorkflowHandler\bin\debug\WorkflowHandler.dll 
```

我还注意到，在您的程序集的路径中，您有一些`/`字符而不是`\`. 确保您输入正确的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-13T01:35:19.717

我将用我的解决方案扩展已接受的答案。

首先，我遇到了“AnyCPU”的问题（我必须与 COM 互操作，因此我这样做的原因），所以我将平台限制为 x86 和 x64。我希望它将组件注册为构建的一部分，所以我将其作为构建后事件进行：

```
if $(PlatformName) == x64 (
    set RegAsm=$(MSBuildFrameworkToolsPath64)regasm.exe
) else (
    set RegAsm=$(MSBuildFrameworkToolsPath)regasm.exe
)

echo Creating TypeLib
"%RegAsm%" /tlb "$(TargetPath)"
echo Registering Component
"%RegAsm%" "$(TargetPath)" 
```

注意：这可能不适用于 ia64。但是，如果您必须为其中之一做这项工作，那么您将遇到比这更大的问题。:-)

# ruby-on-rails - Rails3 - 控制器操作中的多个查询或单个查询

> ID：11322355
> 
> 赞同：1
> 
> 时间：2012-07-04T04:18:49.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3

希望是一个关于 Rails 最佳实践的简单问题。

让我们保持这个超级简单；假设我有一个具有 ID、描述和状态的任务模型。

**在我的控制器中，我有一个返回所有任务的索引操作**

```
def index
  @tasks = Task.all
end 
```

我的问题是，在我看来，假设我想根据任务的状态在**单独**的HTML 表格中显示任务。

**最佳做法是什么？**

a) 在索引动作中多次查询数据库，即

```
def index
  @draft_tasks = Task.where(status: "Draft")
  @approved_tasks = Task.where(status: "Approved")
  @closed_tasks = Task.where(status: "Closed")
end 
```

b) 查询数据库一次，在控制器动作中过滤

```
def index
  tasks = Task.all
  @draft_tasks = tasks.#somethinghere
  @approved_tasks = tasks.#somethinghere
  @closed_tasks = tasks.#somethinghere
end 
```

c) 在视图中过滤

```
<% @tasks.each do |k, v| %>
  <% some if statement searching for the status I want %>
    # Some code to output the table
  <%end%>
<%end%> 
```

或者

d) 别的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T04:48:11.610

这里普遍接受的最佳实践是使控制器方法保持精简并将逻辑置于视图之外。因此，考虑到这一点，一种可能的方法是：

```
# model
class Task
  scope :drafts, where(:status => "Draft")
  scope :approved, where(:status => "Approved")
  scope :closed, where(:status => "Closed")
end

# controller
def index
  @draft_tasks = Task.drafts
  @approved_tasks = Task.approved
  @closed_tasks = Task.closed
end 
```

这将对数据库进行 3 次查询，这可能会成为性能问题，但如果确实发生这种情况，您可以在模型级别对其进行优化（例如，通过定义类方法`drafts`,`approved`以及`closed`第一个调用预取所有内容的位置） . 虽然它不太优雅，所以不要过早优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T04:57:38.790

在我看来，这是一个没有任何最佳实践的问题。鉴于您所说的情况（为每个显示一个表格`status`），我将使用以下思考过程：

1.  当您只处理一种模型类型时，我通常会避免使用案例 A。我尽量限制数据库查询的数量
2.  如果视图需要根据`status`任务显示不同的标记，我可能会使用案例 B。
3.  如果每个的标记都相同，我通常会倾向于案例`status`C。您可以为此使用[group_by函数：](http://api.rubyonrails.org/classes/Enumerable.html#method-i-group_by)

当页面上的信息量开始变得更大和更复杂时，您可以开始考虑从控制器中提取一些逻辑并放入另一个对象（该对象的常用术语是 a`presenter`或`decorator`）。这可以通过将其与控制器分离并保持控制器“精简”来更轻松地测试您的一些表示逻辑。但是对于您给出的情况，我会坚持使用选项 b 或 c。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T23:22:47.813

在任务数量有限的简单情况下，我将只执行一次查询来检索它们，然后将它们分开如下：

```
tasks = Task.all
@draft_tasks    = tasks.select { |x| x.status == 'Draft' } 
@approved_tasks = tasks.select { |x| x.status == 'Approved' }
@closed_tasks   = tasks.select { |x| x.status == 'Closed' } 
```

此外，根据您的要求的可弯曲性，我什至会将它们呈现在单个表格中，并带有清晰的视觉标记状态是什么（例如背景颜色或图标）。然后甚至没有理由事先分离任务（但我可以想象这会完全破坏你的 UI）。

一旦任务数量变大，以上都无效，您将需要应用分页，并且您需要显示三个不同的表格（每个状态一个）。

在这种情况下，您将需要使用@Ben 回答的三个单独的查询。

现在在 UI 方面，我不确定如何一次对三组不同的数据进行分页。因此，我将使用一个显示所有状态的表格，并提供过滤状态的选项。在这种情况下，至少用户清楚分页意味着什么。

只是我的两分钱，希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T04:43:28.783

选项 a) 似乎更好，因为数据库可以为您和其他东西缓存查询，所以它应该更快。

# git - 如何在git的post-receive钩子中处理分支上的文件

> ID：11322356
> 
> 赞同：3
> 
> 时间：2012-07-04T04:18:51.317
> 
> 标签：git, githooks

我有一个远程服务器，我在其上创建了一个裸 git 存储库。

我想创建一个钩子，以便在任何给定分支上收到的最新代码上运行给定脚本。

我知道`post-receive`钩子可以用它。但是我想做以下事情：

1.  获取收到代码的分支。
2.  在临时位置签出代码并对其运行操作。

我该怎么做以上？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T05:41:01.833

*   对于 1)，您有一个读取分支名称的示例（通过标准输入）：
    “[无法从 Git 接收后挂钩检测分支](https://stackoverflow.com/questions/5973795/not-able-to-detect-branch-from-git-post-receive-hook)”
*   对于 2)，您需要适当地设置 GIT_WORK_TREE：
    “[使用 git + post-receive hook 管理网站：错误推送更改](https://stackoverflow.com/questions/10902551/managing-website-using-git-post-receive-hook-error-pushing-changes/10903184#10903184)”

[请参阅“ Git post-receive for multiple remote branches and work-trees](http://blog.ekynoxe.com/2011/10/22/git-post-receive-for-multiple-remote-branches-and-work-trees/) ”中结合的两种技术：

```
#!/bin/bash

while read oldrev newrev ref
do
  branch=`echo $ref | cut -d/ -f3`

  if [ "master" == "$branch" ]; then
    git --work-tree=/path/under/root/dir/live-site/ checkout -f $branch
    echo 'Changes pushed live.'
  fi

  if [ "dev" == "$branch" ]; then
    git --work-tree=/path/under/root/dir/dev-site/ checkout -f $branch
    echo 'Changes pushed to dev.'
  fi
done 
```

# javascript - 将视图中声明的变量传递给javascript

> ID：11322357
> 
> 赞同：0
> 
> 时间：2012-07-04T04:18:53.450
> 
> 标签：javascript, asp.net-mvc-3

我卡在这部分。

我已经声明了一个名为“count”的整数变量

```
@{
    int count = 6;
} 
```

我也有一个滑块。

```
<input name="sliderStatus"  id="sliderStatus" onchange="updateThumbnail(this, @count)" type="range" min="0" max="100" value="0" step="1"/> 
```

我有这样的脚本......

```
 <script type="text/javascript">
    function updateThumbnail(rangeInput, count) {
        var previousImage = document.getElementById('someImage' + rangeInput / (rangeInput.value / count));
        if (previousImage) {
            previousImage.style.display = 'none';
        }
        var nextImage = document.getElementById('someImage' + rangeInput / (rangeInput.value / count));
        nextImage.style.display = 'block';
    }
</script> 
```

脚本证明它无法识别脚本中的“计数”。它如何将变量从视图传递到脚本中？帮助表示赞赏。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T04:22:32.600

尝试

```
@{
    int count = 6;
}

<script type="text/javascript">

var $count = '@count';

</sxript> 
```

# linux - Nginx 因“内存不足”而被杀？

> ID：11322360
> 
> 赞同：0
> 
> 时间：2012-07-04T04:19:23.367
> 
> 标签：linux, memory, nginx

我的 nginx 有 8 个进程，每个进程占用大约**150M**内存。

有时，我的 nginx 会因此而被杀死（dmesg）</p>

> 21228 页总缓存页 50 页交换缓存交换缓存统计：添加 85，删除 35，找到 63/64 空闲交换 = 2031300kB 总交换 = 2031608kB 3407856 页 RAM 3180034 页 HighMem 290515 页保留 36448 页共享 491788 页非共享
> 
> **Out of memory:kill process 16373 (nginx) score 5013 or a child**

我用谷歌搜索，结果 **内存**不足，所以 oom-killer 开始做它的工作......

这是我的问题：

1.  我有**16GB**内存，但低内存只有**800M**（free -lm），我该如何使用其余的？谷歌告诉我我可以使用补丁**kernel-hugemem**，但它只适用于 centos4，我的是**centos5.2**，所以......

2.  一个 nginx 进程使用 150MB 内存是不是太多了？你们从来没有遇到过这样的问题吗？

3.  Low 内存让我很困惑，32 位系统在没有 PAE 的情况下可以使用超过 3GB 的内存，那么为什么要使用 Low/Hign ​​内存呢？是不是内核bug？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:13:36.607

我注意到您有很多免费交换，这应该会阻止 OOM 杀手激活，但由于某种原因没有。[来自 serverfault 的这个问题](https://serverfault.com/questions/56874/oom-killer-killing-processes-despite-having-plenty-of-free-swap)表明带有未使用交换的 OOM 意味着分配失败是在内核模式下，由需要大量内存的驱动程序引起。这也可以解释为什么免费的 HighMem 不足以满足请求（内核模式的东西可以从特定区域请求内存）。您应该在 dmesg 中往后看一点，看看是否有任何线索，例如回溯。

至于问题的第三部分，使用 PAE 时 HighMen 和 LowMem 之间存在区别，因为它将物理地址空间扩展到 36 位，而虚拟地址空间仍然是 32 位。访问全部潜在的 64G 物理地址不能像访问固定的 4G 子集那样快，因此内核将内存划分并尝试将最关键的性能保持在“低”区域。

# html - 如何从 example.html URL 转到 /example URL？

> ID：11322367
> 
> 赞同：0
> 
> 时间：2012-07-04T04:19:40.193
> 
> 标签：html, url, url-rewriting, web

如何从读取 example.com/text.html 的 URL 转到读取 example.com/text 的 URL？

编辑：对不起，我是新人。该网站以 HTML 编码并由 GoDaddy 托管在 Windows 服务器上。如果可能，我想编辑此服务器端，但如果不是，则在单个网页中（带有 html 片段）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:21:11.600

完全取决于你有什么 - Apache？然后 mod_rewrite：[http](http://httpd.apache.org/docs/current/mod/mod_rewrite.html) ://httpd.apache.org/docs/current/mod/mod_rewrite.html 例如[http://www.sitepoint.com/apache-mod_rewrite-examples/](http://www.sitepoint.com/apache-mod_rewrite-examples/)

如果你有一个 Java 服务器，那么每个框架都可以自由地独立完成它。

Ruby、Python、ASP也有自己的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:23:12.397

将下面的行添加到您的 .htaccess 文件中：

```
RewriteRule ^(.*)\.html$ $1 [R=301,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:08:58.597

您可以创建一个名为文件名的文件夹并将 index.html 放入其中。

样本：

如果您想将**test.html**`www.example.com/test.html`重`www.example.com/test`命名为**index.html**并将其放入文件夹**test**

 ******```
Root folder
|
|-->index.html "home page"
|
|
|-->sample page folder 1 "Page 2"
|   |
|   +-->index.html
|
|-->sample page folder 2 "Page 3"
|   |
|   +-->index.html
|
+-->sample page folder 3 "Page 4"
    |
    +-->index.html 
```******

# sql-server - 安装vs 2010专业版之前需要卸载vwd 2010 express吗？

> ID：11322368
> 
> 赞同：0
> 
> 时间：2012-07-04T04:20:00.057
> 
> 标签：sql-server, visual-studio-2010

我已经在我的电脑上安装了 vwd 2010 sp1。现在我要安装专业版。我现在想知道在安装vs 2010专业之前是否需要卸载vwd 2010 express？

事实上，当我检查我的控制面板时，我看到了太多与 Visual Studio 相关的程序。对于我想用 Sql Server 开发人员版本替换的 sql server express 2008R2 也是如此。

我是否应该尝试安装较新的版本，希望一切顺利。或者，我需要先卸载旧版本吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T06:19:53.070

我今天问了自己同样的问题，所以为了安全起见，我安装了 Visual Studio Professional，但没有删除任何快速版本。我正在运行 Win 7 家庭高级版，因此快速版本位于 Program Files (x86) 文件夹中，专业文件位于 Program Files 文件夹中。知道一切运行良好，稍后我可能会在卸载快速版本时寻求帮助！

# java - 如何在android中创建Web应用程序？

> ID：11322372
> 
> 赞同：0
> 
> 时间：2012-07-04T04:20:43.900
> 
> 标签：java, android

嗨，我是 android 新手，我想为现有网站创建 Web 应用程序......类似于 facebook 和 Flipkart 等应用程序，谁能帮助我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:23:01.617

有很多方法之一是在 WebView 中构建 Web 应用程序

请参阅[在 WebView 中构建 Web 应用程序](http://developer.android.com/guide/webapps/webview.html)

另请参阅[Web 应用程序概述](http://developer.android.com/guide/webapps/overview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T04:25:40.543

如果你有一个现有的网络应用程序，你最好的选择是使用像[Phonegap](http://phonegap.com/)这样的框架。它可以让您保留大部分 JS/HTML 代码。

# javascript - 任何与 WebSharper 类似的 Scala 工作

> ID：11322380
> 
> 赞同：2
> 
> 时间：2012-07-04T04:23:26.733
> 
> 标签：javascript, scala, f#, websharper

我正在从这里阅读一些文章：http: [//tomasp.net/blog/qcon-async-fsharp.aspx](http://tomasp.net/blog/qcon-async-fsharp.aspx)，关于在 F# 中拥有所有源代码，然后编译生成 javascript，因此它可以进行异步回调到服务器和服务器端代码，其优点是在生成任何内容之前所有内容都是强类型的，并且客户端始终与服务器端保持同步，因为两者是同时生成的。

还有这个博客，它提供了更多信息。

[http://blogs.msdn.com/b/dsyme/archive/2012/01/22/websharper-javascript-html5-mobile-etc.aspx](http://blogs.msdn.com/b/dsyme/archive/2012/01/22/websharper-javascript-html5-mobile-etc.aspx)

如果 F# 可以生成这个，我很好奇是否有人致力于让 Scala 也这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:08:23.667

*   或多或少的工作应该是：

scalagwt：[http](http://scalagwt.github.com/) ://scalagwt.github.com/ 但这通过 gwt 工具链。

*   更符合您的要求，但原型是：

play2.0 与 DSL scala 用于编译为 JS 的验证：

[http://www.infoq.com/interviews/amin-scala](http://www.infoq.com/interviews/amin-scala)

[https://github.com/namin/play-js-validation](https://github.com/namin/play-js-validation)

# c++ - 为什么不能在指针对象上调用函数？

> ID：11322381
> 
> 赞同：1
> 
> 时间：2012-07-04T04:23:27.660
> 
> 标签：c++, pointers, pass-by-reference, operator-precedence

编辑：对愚蠢的标题感到抱歉；“指针对象”我想我的意思是取消引用的对象指针（如果有任何澄清的话）。

我是 C++ 新手，我一直在努力适应它的特性（来自 Java）。

我知道这通常不是必需的，但我想尝试通过指针传递对象。当然，它有效，但我希望这也有效：

```
void test(Dog * d) {
*d.bark();
} 
```

但事实并非如此。为什么是这样？我发现我可以执行以下操作：

```
void test(Dog * d) {
Dog dawg = *d;
dawg.bark();
} 
```

它完美无瑕。这对我来说似乎是多余的。

任何澄清将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T04:25:17.667

海事组织。优先于取消引用 * ，因此：

```
(*d).bark(); 
```

或者，对于指针，如其他回复中所述 - 使用`->`

```
d->bark(); 
```

一定要检查 null :)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-04T04:31:54.577

只是为了澄清情况，您可以使用*，* `(*pointer).member()`或`pointer->member()`--`a->b`等效于`(*a).b`。

当然，这是假设您正在处理“真实”（内置）指针。有*可能*超载`operator->`做一些不同的事情。不过， overloads 受到了`operator->`一些限制，这通常可以防止人们对它们做*太*奇怪的事情。您可能遇到的一件事（例如，某些迭代器的*旧*实现）根本不支持`operator->`，因此尝试使用它会导致编译错误。尽管这样的实现（大部分？）早已不复存在，但您可能仍然会看到一些（通常是较旧的）代码使用`(*iterator).whatever`而不是`->`因为这个。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-04T04:25:29.863

全部在括号中：

```
(*d).bark(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-04T04:25:31.027

您必须`->`在指针上使用运算符。`.`运算符用于非指针对象。

在您的第一个代码段中，尝试`d->bark();`. 应该工作正常！

* * *

编辑：其他答案建议`(*d).bark();`。这也行得通；取消`(*d)`引用指针（即，将其转换为普通对象），这就是`.`操作员工作的原因。要使用原始指针，简单地说`d`，您必须使用`->`我描述的运算符。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-04T05:10:03.453

每个人都缺少一点要回答的问题：**Operator Precedence**。

的优先级`operator.`高于（一元）指针间接（`*`）操作符的优先级。这就是需要括号的原因。这就像在 + 周围加上括号以获得正确的平均值：

```
int nAverage = (n1+n2) / 2; 
```

对于指针间接的情况，你很幸运编译器给你错误！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-04T04:25:31.570

使用指针时需要使用`->`运算符，即代码应为`d->bark();`.

# iphone - 我想将雅虎集成到我的 iphone 应用程序中

> ID：11322383
> 
> 赞同：-1
> 
> 时间：2012-07-04T04:23:50.457
> 
> 标签：iphone

> **可能重复：**
> [Yahoo API 集成？](https://stackoverflow.com/questions/7361290/yahoo-api-integration)

我想将雅虎集成到我的 iphone 应用程序中，我如何将雅虎集成到 iphone 应用程序中并访问我的帐户以及发送和接收来自我朋友的消息。如何实现这一点。任何人都可以回答我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:27:10.837

yahoo 有一个适用于 iOS的[API ，](http://developer.yahoo.com/social/sdk/objectivec/)[示例项目](https://github.com/yahoo/yos-social-objc)可以为您提供帮助。

# iphone - 链接静态库时将无法识别的选择器发送到实例？

> ID：11322384
> 
> 赞同：2
> 
> 时间：2012-07-04T04:23:50.710
> 
> 标签：iphone, ios5, static-libraries, xcode4.3

我是这个 iPhone 开发的新手。现在我正在尝试开发一个静态库。我成功地创建了库。但是当我尝试访问一个函数时遇到了一个问题，它显示错误“无法识别的选择器发送到实例”。当我搜索时，他们中的大多数人告诉我将 -objc 放入其他链接器标志和 forceaall和所有负载。但没有任何效果。

我曾推荐这个网站来开发图书馆。 [http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/](http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:30:49.900

导致错误消息的常见原因是当您调用未在接口类 (.h) 中声明或根本不存在的方法时。

```
@interface YourClass
//other programmers forget to declare method in header
-(void)declaredMethod;
@end

@implementation YourClass
 -(void)declaredMethod
   { 
     //this is fine
   }
 -(void)undeclaredMethod
   {
    // declaration in header is missing
    // will throw exception
   }
@end 
```

# deployment - ActiveMQ 部署模型

> ID：11322387
> 
> 赞同：1
> 
> 时间：2012-07-04T04:24:14.357
> 
> 标签：deployment, activemq

我已经通过（不完全）ActiveMQ 并试图找出我的应用程序的部署模型。我对此有点困惑。我想使系统具有高可用性并决定使用以下内容。如果模型有任何错误或缺点，请纠正我。

**部署模式**：

1.  将分别在 M1 和 M2 中部署 Broker。
2.  使用硬件负载均衡器（F5 或 Zeus）根据负载连接任一代理（M1 或 M2）。
3.  想要使用负载均衡器 URL 发布消息。

我已经浏览了经纪人网络，我们需要保留一些拓扑结构。如果系统水平增长，我跌倒了，这会使系统更加复杂。所以最好有一个负载均衡器来分配负载。

*问题*

1.  上述模型是否会向任何一个 Broker 发送消息？
2.  Consumer 将部署在 Tomcat 中（我认为我需要使用嵌入式代理来配置 M1 或 M2）。是否可以使用 M1 或 M2 的负载均衡器 URL？
3.  是否可以让单个 Web 控制台管理员同时监控 M1 和 M2。
4.  我们使用 Spring 的特性来消费消息是否有任何性能问题。

不好意思问了这么多问题。请帮助我更正部署模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:55:32.570

那里有很多问题。

首先要做的是从简单的开始。如果您的应用程序的负载仅由一个代理处理，请考虑通过[主从设置](http://activemq.apache.org/masterslave.html)来设置高可用性。为此，**您不需要负载平衡器**- ActiveMQ 客户端库具有[故障转移机制](http://activemq.apache.org/failover-transport-reference.html)，您可以在其中定义客户端应尝试连接的一组代理的 URL。

如果您正在考虑设置一个代理无法处理消息负载的基础架构（您可以使用[性能模块](http://activemq.apache.org/activemq-performance-module-users-manual.html)测试代理的最大吞吐量），我建议您阅读[代理网络如何工作](http://www.jakubkorab.net/2011/11/understanding-activemq-broker-networks.html)。如果你真的走这条路，你真的需要了解 ActiveMQ。

在监控时，Web 控制台只能向您显示单个代理的内部结构。要了解围绕一组代理发生的情况，您需要一个监控工具，例如[FuseHQ](http://fusesource.com/products/fuse-hq/) /Hyperic，它能够从多个盒子聚合 JMX 信息。

只要[配置正确](http://activemq.apache.org/spring-support.html)，Spring 的性能就不是问题（参见 参考资料 部分`PooledConnectionFactory`）。

我看到您是新用户，所以如果这回答了您的问题，请打勾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:22:31.310

我认为使用一些 activemq 服务器获得负载平衡的最佳方法是拥有一个： [代理网络](http://activemq.apache.org/networks-of-brokers.html)和你的消费者/生产者（在你的 webapps 中）应该使用一些[故障转移](http://activemq.apache.org/failover-transport-reference.html)

因此，如果生产者 p1 在代理 1 上的队列上发送消息，则消费者 c1 可以读取代理 2 上的消息。

[编辑] 我从未尝试添加一些硬件平衡器而不是 activemq 协议故障转移。它应该有效：只需尝试并告诉我们。

3- 我认为不可能只有一个 Web 控制台来监控您的两个经纪人。

4-就我而言，我的 Spring 配置没有任何性能问题。

# javascript - 如何从特定的 JSON 对象值中计算数组？

> ID：11322388
> 
> 赞同：0
> 
> 时间：2012-07-04T04:24:17.970
> 
> 标签：javascript, arrays, json

这是我的javascript：

```
var json = '{"GetReportIdResult":[{"bulan":"4","total":"1728","type":"CHEESE1K","uang":"8796383"},{"bulan":"4","total":"572476","type":"ESL","uang":"5863408410"},{"bulan":"4","total":"33507","type":"WHP","uang":"235653242"},{"bulan":"5","total":"4761","type":"CHEESE1K","uang":"134877865"},{"bulan":"5","total":"245867","type":"UHT","uang":"1446787280"},{"bulan":"5","total":"47974","type":"WHP","uang":"631929807"},{"bulan":"6","total":"5762","type":"CHEESE1K","uang":"293393832"},{"bulan":"6","total":"236803","type":"UHT","uang":"2219506085"},{"bulan":"6","total":"24853","type":"WHP","uang":"386175022"}]}';
obj = JSON.parse(json);
var arrayobj = obj.GetReportIdResult.length;
alert (arrayobj); 
```

我想计算有多少`type`相同的`bulan`值，（例如有 3 `type`= `CHEESE1K`, `UHT`, and `ESL` in `bulan`= 4）

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:43:41.877

您的 JSON 中仍然存在拼写错误：前两个`"bulan":"6"`对象之间连续有两个逗号。但假设你解决了这个问题......

如果您询问如何计算特定`bulan`值的不同类型，您可以执行以下操作：

```
function countTypesForBulan(resultArray, bulanVal) {
   var i,
       types,
       count = 0;
   for (i=0, types = {}; i < resultArray.length; i++)
      if (resultArray[i].bulan === bulanVal && !types[resultArray[i].type]) {
         types[resultArray[i].type] = true;
         count++;
      }
   return count;
}

console.log( countTypesForBulan(obj.GetReportIdResult, "4") );  // logs 3 
```

上面循环遍历数组寻找一个特定的bulan值，当它找到一个时，它检查它是否已经看到了相关的类型——如果没有，它把它添加到`types`对象中并增加计数器。

演示：http: [//jsfiddle.net/pAWrT/](http://jsfiddle.net/pAWrT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T04:30:06.107

首先，将 JSON 放入一个字符串中，否则您的示例代码将无法工作。

var json = '{"GetReportIdResult":[{"bulan":"4","total":"1728","type":"CHEESE1K","uang":"8796383"},{"bulan":" 4","total":"572476","type":"ESL","uang":"5863408410"},{"bulan":"4","total":"33507","type":" WHP","uang":"235653242"},{"bulan":"5","total":"4761","type":"CHEESE1K","uang":"134877865"},{"bulan" :"5","total":"245867","type":"UHT","uang":"1446787280"},{"bulan":"5","total":"47974","type" :"WHP","uang":"631929807"},{"bulan":"6","total":"5762","type":"CHEESE1K","uang":"293393832"},,{"bulan ":"6","total":"236803","type":"UHT","uang":"2219506085"},{"bulan":"6","total":"2485​​3","type ":"WHP","uang":"386175022"}]}';6","total":"2485​​3","type":"WHP","uang":"386175022"}]}';6","total":"2485​​3","type":"WHP","uang":"386175022"}]}';

然后，迭代`for`并计算变量或哈希图。

由于`GetReportIdResult`是一个数组，您可以：

```
for( var i : obj.GetReportIdResult ){
    obj.GetReportIdResult[i] ... // Use at will. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T04:46:14.700

这将为您提供一个`map`包含每个`bulan`值的计数的对象。例如，`map['4'].count`将返回 3。

```
var i, row, arr = obj.GetReportIdResult, map = {};
for (i = 0; i < arr.length; i++) {
    row = arr[i];
    map[row.bulan] = map[row.bulan] || {count: 0};
    if (map[row.bulan][row.type] === undefined) {
        map[row.bulan][row.type] = row.type;
        map[row.bulan]['count'] += 1;
    }
}
console.log (JSON.stringify(map));​ 
```

JSFiddle[在这里](http://jsfiddle.net/amjibaly/mTuRU/)。

# c# - 判断一个句子是否包含一个特定的词

> ID：11322391
> 
> 赞同：6
> 
> 时间：2012-07-04T04:24:47.483
> 
> 标签：c#, string, parsing

我想知道如何在标签中引用句子中的单词。例如，我有：

```
label1.text = "books pencil pen ruler"; 
```

我想说：*“如果 label1.text 包含单词“pen”，那么做点什么”*：

```
if (label1.text CONTAINS THE WORD "pen")
{
    // do something
} 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T04:29:48.903

使用正则表达式单词边界：

```
if (Regex.IsMatch(label1.text, @"\bpen\b"))
    // do something 
```

比检查 IndexOf 或 Splitting 更强大。例如一个简单的`IndexOf("pen")`会匹配`"open"`。试图通过使它`IndexOf(" pen ")`不匹配来解决这个问题`"pen other words"`。或者如果你`Split(' ')`，它不会匹配在`"This sentence ends in pen."`。正则表达式的单词边界符合您所期望的所有这些。您可以拆分更多的单词边界字符，但是让 Regex 类的作者为您完成工作要比尝试自己理解单词边界要容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T04:27:32.297

您可以使用 string.Split() 将该文本分隔为标记，并使用 Array.Contains 检查该单词是否在列表中。

```
string sentence = "books pencil pen ruler";
string[] words = sentence.Split(' ');
bool hasFox = words.Contains("pen"); 
```

如果您想允许更多的分隔符而不仅仅是空格（例如制表符），您可以在使用拆分时添加额外的分隔符。如果您关心匹配的大小写敏感性，您可以使用包含 IEqualityComparer 的重载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:52:10.840

这应该有帮助

```
string data = label1.Text;
string word = "Pen";

if(!string.IsNullOrEmpty(data))
    if(data.Contains(word))
    {
         // do work here
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T04:27:50.103

如果笔字在字之间而不是在字符串的开头或结尾。

```
if(label1.text.IndexOf(" pen ") != -1 )
{
//do something
} 
```

**编辑**

作为讨论的结果，我发现**Regex 可能是更好的选择**。

```
if (Regex.IsMatch(label1.Text, @"\bpen\b"))
{
 //do something
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T04:28:48.013

尝试 -

```
if(label1.text.contains(" pen ")) 
     {
         //do something 
     } 
```

只需在 之前和之后添加空格`pen`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T04:30:15.233

```
string s1 = "books pencil pen ruler";
string s2 = "pen";
if(s1.Contains(s2) && s2 != "")
{
// do something
} 
```

# c# - C#用数组调用方法时有一个愚蠢的时刻

> ID：11322396
> 
> 赞同：0
> 
> 时间：2012-07-04T04:25:22.150
> 
> 标签：c#, arrays, loops, for-loop

我几乎按预期工作。它本身的程序可以运行，但输出有点古怪。它需要多次点击返回键才能显示在 for 循环中并由 output() 方法调用的数组的内容。

=( 看起来很简单，但我没有看到我的问题。

我的第二个问题是我调用 output(arr) ONCE 但输出根据数组的大小打印数组的多个实例....

```
class Program
{
    static void Main(string[] args)
    {
        int value;

        Console.Write("How big of an Array? ");
        int arraySize = int.Parse(Console.ReadLine());
        int[] arr = new int[arraySize];

        for (int i = 0; i <= arraySize - 1; i++)
        {
            Console.Write("First Value: ");
            value = int.Parse(Console.ReadLine());
            arr[i] = Convert.ToInt32(value);
        }

        output(arr);
        Console.ReadLine();
    }

    static void output(Array arr)
    {

        foreach (int i in arr)
        {
            for (int v = 0; v < arr.Length; v++)
            {
                string number = "Value: ";
                string arrayPoint = "Array Section: ";

                Console.WriteLine("{0}{1}\t{2}{3}", arrayPoint, v, number, i);

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:27:36.673

*在输出*方法中只需要一个循环。试试这样...

```
static void output(Array arr)
{
    for (int v = 0; v < arr.Length; v++)
    {
        string number = "Value: ";
        string arrayPoint = "Array Section: ";

        Console.WriteLine("{0}{1}\t{2}{3}", arrayPoint, v, number, arr.GetValue(v));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T04:36:12.880

您的代码中有几件事，

您的输出方法正在接收类型的参数`Array`，而不是应该接收`int[]`，并且您应该循环一次，而不是两次。

```
static void output(int[] arr)
        {
                for (int v = 0; v < arr.Length; v++)
                {
                    string number = "Value: ";
                    string arrayPoint = "Array Section: ";

                    Console.WriteLine("{0}{1}\t{2}{3}", arrayPoint, v, number, arr[v]);
                }
        } 
```

第二，在您的 Main 方法中，您使用提示 Enter First Value ，当用户假设输入第二个或更高元素的值时，这有点令人困惑，您可以将其更改为：

```
 for (int i = 0; i <= arraySize - 1; i++)
    {
        Console.Write(string.Format("Value for Element {0}: ",i));
        value = int.Parse(Console.ReadLine());
        //arr[i] = int.Parse(Console.ReadLine()); // or you can do
        arr[i] = value;
    } 
```

# javascript - JavaScript：从 iframe 检测源更改

> ID：11322397
> 
> 赞同：1
> 
> 时间：2012-07-04T04:25:27.357
> 
> 标签：javascript, jquery, html, css, iframe

这可能是一个很长的镜头，但我想知道是否有人知道是否有办法检测（使用 Javascript 或 JQuery）如果 iframe 源已更改 - 即：如果用户更改 iframe 中的页面。

我想写一些类似的东西：

```
if (iframesource == http://www.site.com/urlA){
do something
}

else if (iframesource == http://www.site.com/urlB){
do something different
} 
```

我已经知道 iframe 元素 ( `<iframe src="http://www.site.com">`) 的 src 属性如果页面在站点内发生更改，则不会更改，因此使用 JQuery 来检测该属性已失效。

有人知道这是否可能吗？任何建议将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T00:10:11.507

好的，基本上经过大量研究后，我发现这仅在 iframe 指向您现有站点或服务器中的 URL 时才有效。如果您指向另一个网站（例如 YouTube），它将无法正常工作。

将信息从一个站点传输到另一个站点的最佳方式仍然是使用 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:28:30.597

您将需要构建一个执行以下操作的 javascript 函数：

1.  负载。
2.  通过元素 id 获取 src 值。
3.  将此传递给 temp_object
4.  输入带有 set_timeout(100ms) 的递归函数。
5.  将 temp_object 与对象进行比较。
6.  如果为真，做点什么，temp_object = object。

## @EDIT -----> anti-sop anti-xss

```
<html>
    <head>
        <script type="text/javascript">
                function GetIFrameUrl()
                {
                        alert('url = ' + document.frames['frame1'].location.href);
                }
        </script>
    </head>
    <body>
        <a href="#" onclick="GetIFrameUrl();">Find the iFrame URL</a>
        <iframe name="frame1" src="http://www.google.com" width="100%" height="400"></iframe>
    </body>
</html> 
```

[使用 JQuery 获取 Iframe 的当前 src](https://stackoverflow.com/questions/748727/getting-the-current-src-of-an-iframe-using-jquery)

# ruby-on-rails - 如何使用带有 Rails 3.2 的 Remotipart 1.0 来保存文件上传

> ID：11322424
> 
> 赞同：2
> 
> 时间：2012-07-04T04:29:32.367
> 
> 标签：ruby-on-rails, ajax, jquery

我有这个表格

```
<%= form_for @post, :html => {:multipart => true , :class => 'form-horizontal' }, :remote => true do |f| %>
    <%= f.text_field :title%>
    <%= f.file_field :avatar%>
    <%= f.submit nil%>
<% end %> 
```

以及`create`动作

```
def create
        @post = Post.new(params[:post])
        respond_to do |format|
          if @post.save
            format.js
          end
        end
      end 
```

无论我写`create.js.erb`什么都不会运行，浏览器被重定向到白页！

```
$('body').html("<h1>Done!</h1>"); 
```

谁能告诉我这里有什么问题？请注意，我遵循了[github上的文档示例步骤](https://github.com/JangoSteve/remotipart)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:07:46.603

你应该确保

```
//= require jquery.remotipart 
```

已添加到您的 application.js 文件中。我遇到了同样的问题，这解决了它。

# oracle - 将数据从一张表复制到多张表的存储过程

> ID：11322426
> 
> 赞同：0
> 
> 时间：2012-07-04T04:29:46.367
> 
> 标签：oracle

在编写存储过程时需要帮助，用于将数据从一个表复制到多个表。这是场景示例：

1.  表 1 有 10 列 20 行数据。

2.  Table2（主键将是序列生成器），Table3

3.  将 Table1 中的 4 列值插入 Table2，将 4 列插入 Table3（检查下面的条件） 将数据插入 table3 时的条件：

- 每当将数据插入表 3（来自表 1）时，表 3 中都会有一个字段具有表 2 的主键值和表 1 中的一些值。

请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:43:02.203

尝试`INSERT INTO dest_table (COL1,COL2,...,COLn) SELECT COLa,COLb,...,COLz FROM source_table`

# objective-c - 将“CLLocationManager *”发送到不兼容类型“CLLocationCoordinate2D”的参数；

> ID：11322429
> 
> 赞同：0
> 
> 时间：2012-07-04T04:29:59.747
> 
> 标签：objective-c, cocoa-touch, core-location, mkreversegeocoder

我正在学习天气应用教程。我无法获取该位置的反向地理编码。它不断收到标题中的错误。我明白它告诉我的只是坚持如何解决它。

下面是代码片段：

```
if (1)
{
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [locationManager startUpdatingLocation];

    MKReverseGeocoder *geocoder = [[MKReverseGeocoder alloc] initWithCoordinate:locationManager];
    geocoder.delegate = self;
    [geocoder start];
}
else
{
    [self performSelectorInBackground:@selector(showWeatherFor:) withObject:@"95014"];
} 
```

就像我说的，我还在学习，所以解释一下你为什么做了你所做的事情会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:16:15.787

您必须在获取 gps 坐标的 CLLocation 的委托方法中调用 location getter。MKReverseGeocoder 的参数是 CLLocation 而不是 CLLocationManager

```
# pragma mark LocationGetter Delegate Methods

- (void)newPhysicalLocation:(CLLocation *)location {

    //Geocoder is started only if a valid location is found.
    self.reverseGeocoder = [[[MKReverseGeocoder alloc] initWithCoordinate:location] autorelease];
    reverseGeocoder.delegate = self;
    [reverseGeocoder start];

} 
```

# urllib - 如何发送 POST 请求？

> ID：11322430
> 
> 赞同：310
> 
> 时间：2012-07-04T04:30:02.550
> 
> 标签：urllib, python-2.x, httplib

我在网上找到了这个脚本：

```
import httplib, urllib
params = urllib.urlencode({'number': 12524, 'type': 'issue', 'action': 'show'})
headers = {"Content-type": "application/x-www-form-urlencoded",
            "Accept": "text/plain"}
conn = httplib.HTTPConnection("bugs.python.org")
conn.request("POST", "", params, headers)
response = conn.getresponse()
print response.status, response.reason
302 Found
data = response.read()
data
'Redirecting to <a href="http://bugs.python.org/issue12524">http://bugs.python.org/issue12524</a>'
conn.close() 
```

但我不明白如何将它与 PHP 一起使用，或者 params 变量中的所有内容是什么，或者如何使用它。我可以在尝试使其正常工作方面提供一些帮助吗？

* * *

## 回答 #1

> 赞同：462
> 
> 时间：2012-07-04T08:08:46.227

如果你真的想使用 Python 处理 HTTP，我强烈推荐[Requests: HTTP for Humans](https://requests.readthedocs.io/en/master/)。适合您的问题的 POST 快速入门是：

```
>>> import requests
>>> r = requests.post("http://bugs.python.org", data={'number': 12524, 'type': 'issue', 'action': 'show'})
>>> print(r.status_code, r.reason)
200 OK
>>> print(r.text[:300] + '...')

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>
Issue 12524: change httplib docs POST example - Python tracker

</title>
<link rel="shortcut i...
>>> 
```

* * *

## 回答 #2

> 赞同：176
> 
> 时间：2016-04-17T15:30:20.670

这是一个没有任何外部 pip 依赖项的解决方案，但仅适用于 Python 3+（Python 2 不起作用）：

```
from urllib.parse import urlencode
from urllib.request import Request, urlopen

url = 'https://httpbin.org/post' # Set destination URL here
post_fields = {'foo': 'bar'}     # Set POST fields here

request = Request(url, urlencode(post_fields).encode())
json = urlopen(request).read().decode()
print(json) 
```

样本输出：

```
{
  "args": {}, 
  "data": "", 
  "files": {}, 
  "form": {
    "foo": "bar"
  }, 
  "headers": {
    "Accept-Encoding": "identity", 
    "Content-Length": "7", 
    "Content-Type": "application/x-www-form-urlencoded", 
    "Host": "httpbin.org", 
    "User-Agent": "Python-urllib/3.3"
  }, 
  "json": null, 
  "origin": "127.0.0.1", 
  "url": "https://httpbin.org/post"
} 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2016-04-10T07:49:17.983

您无法使用`urllib`（仅适用于 GET）实现 POST 请求，而是尝试使用[`requests`](http://docs.python-requests.org/en/latest/user/quickstart/#more-complicated-post-requests)模块，例如：

示例 1.0：

```
import requests

base_url="www.server.com"
final_url="/{0}/friendly/{1}/url".format(base_url,any_value_here)

payload = {'number': 2, 'value': 1}
response = requests.post(final_url, data=payload)

print(response.text) #TEXT/HTML
print(response.status_code, response.reason) #HTTP 
```

* * *

示例 1.2：

```
>>> import requests

>>> payload = {'key1': 'value1', 'key2': 'value2'}

>>> r = requests.post("http://httpbin.org/post", data=payload)
>>> print(r.text)
{
  ...
  "form": {
    "key2": "value2",
    "key1": "value1"
  },
  ...
} 
```

示例 1.3：

```
>>> import json

>>> url = 'https://api.github.com/some/endpoint'
>>> payload = {'some': 'data'}

>>> r = requests.post(url, data=json.dumps(payload)) 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2018-12-05T08:38:38.450

通过点击 REST API 端点，使用`requests`库来 GET、POST、PUT 或 DELETE。将其余 api 端点 url 传入`url`，payload(dict) in`data`和 header/metadata in`headers`

```
import requests, json

url = "bugs.python.org"

payload = {"number": 12524, 
           "type": "issue", 
           "action": "show"}

header = {"Content-type": "application/x-www-form-urlencoded",
          "Accept": "text/plain"} 

response_decoded_json = requests.post(url, data=payload, headers=header)
response_json = response_decoded_json.json()

print(response_json) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-01-20T14:28:08.710

您的数据字典包含表单输入字段的名称，您只需保持正确的值即可查找结果。 [表单视图](https://i.stack.imgur.com/7Ueoy.png) 标题配置浏览器以检索您声明的数据类型。使用 requests 库很容易发送 POST：

```
import requests

url = "https://bugs.python.org"
data = {'@number': 12524, '@type': 'issue', '@action': 'show'}
headers = {"Content-type": "application/x-www-form-urlencoded", "Accept":"text/plain"}
response = requests.post(url, data=data, headers=headers)

print(response.text) 
```

有关请求对象的更多信息：[https ://requests.readthedocs.io/en/master/api/](https://requests.readthedocs.io/en/master/api/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-17T20:17:48.497

如果您不想使用必须安装的模块`requests`，并且您的用例非常基本，那么您可以使用`urllib2`

```
urllib2.urlopen(url, body) 
```

请参阅`urllib2`此处的文档：[https](https://docs.python.org/2/library/urllib2.html) ://docs.python.org/2/library/urllib2.html 。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-10T02:38:16.473

您可以使用请求库来发出发布请求。如果负载中有 JSON 字符串，则可以使用 json.dumps(payload) ，这是负载的预期形式。

```
 import requests, json
    url = "http://bugs.python.org/test"
    payload={
        "data1":1234,'data2':'test'
    }
    headers = {
        'Content-Type': 'application/json'
    }
    response = requests.post(url, headers=headers, data=json.dumps(payload))
    print(response.text , response.status_code) 
```

# objective-c - Objective-C (iOS)：prepareForSegue 不会将我的数据传递到目标 VC

> ID：11322431
> 
> 赞同：0
> 
> 时间：2012-07-04T04:30:02.857
> 
> 标签：objective-c, ios, xcode

VC1 = `NewGameViewController`
VC2 = `GameViewController`

`NewGameViewController.m`

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if( [segue.identifier isEqualToString:@"newGameSegue"]) {
    GameViewController *gameVC = (GameViewController *)segue.destinationViewController;

    NSArray *array = [self nameArrayForTextFieldArray:self.namePicker.textFieldArray withColon:YES];
    gameVC.nameArray = [[NSArray alloc] initWithArray:array];
} 
```

`-(NSArray *)nameArrayForTextFieldArray:(NSArray *)array withColon:(BOOL *)bool` 基本上返回一个 nsarray 字符串给定一个 nsarray 文本字段。withcolon 是一个布尔值，用于判断您是否希望字符串末尾附加一个冒号。

当我调试我的代码时，gameVC 中的 _nameArray ivar 在调用这里的每一行后仍然读取 nil ......有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T08:25:19.253

当从一个屏幕到另一个屏幕的转场即将执行时，UIKit 会调用 prepareForSegue 方法。它允许我们在新视图控制器显示之前将数据提供给它。通常你会通过设置它的属性来做到这一点。

新的视图控制器可以在 segue.destinationViewController 中找到。如果 GameViewController 嵌入了导航控制器，则新的视图控制器将不是 GameViewController 而是嵌入它的导航控制器。要获取 GameViewController 对象，我们可以查看导航控制器的 topViewController 属性。此属性指的是导航控制器中当前处于活动状态的屏幕。

要将对象发送到新的视图控制器，您可以使用以下解决方案`performSegueWithIdentifier`：

例如，如果我们想执行一个 segue 按 a`UIButton`我们可以这样做：

在`MyViewController.h`我们创建一个 IBAction（连接到 UIButton）中，将按钮从情节提要拖到代码中：

```
- (IBAction)sendData:(id)sender; 
```

在`MyViewController.m`我们实现方法中：

```
- (IBAction)sendData:(id)sender
{
    NSArray *array = [self nameArrayForTextFieldArray:self.namePicker.textFieldArray withColon:YES];
    [self performSegueWithIdentifier:@"newGameSegue" sender:array];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"newGameSegue"]) {
        UINavigationController *navigationController = segue.destinationViewController;
        GameViewController *controller = (GameViewController *)navigationController.topViewController;
        controller.nameArray = sender;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:54:39.143

GameViewController 是否嵌入在导航控制器中？在这种情况下，您的 destinationViewController 属性是 UINavigationController 类型，而不是 GameViewController。您可以通过调用来访问 GameViewController `[segue.destinationViewController.viewControllers lastObject]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:08:18.887

我假设您`array`在设置`gameVC.nameArray`. 你真的想确保它按照你认为的方式设置。令人惊讶的是，我花了多少次调试这样的东西才意识到问题出在我的等价于`nameArrayForTextFieldArray`. 或 segue 标识符名称中的拼写错误。或诸如此类的随机事情。

假设没问题，那么有几件事是可能的：

1.  您的`nameArray`财产是如何定义的`GameViewController`？如果它不是`strong`引用（或 a `copy`），那么当您`array`超出范围时，它将被释放。我认为这会略有不同，但值得确认。

2.  此外，我还看到过这样的情况，控制器`GameViewController`可能会在各种 ivars 和属性之间产生一些混淆（这就是为什么我*从不*为我的属性定义 ivars ......我让它`@synthesize`这样做）。

3.  我假设您没有为`nameArray`. 我只是想确定一下。但是，如果是这样，请也分享一下。

最重要的是，您能否向我们展示`nameArray`您`@interface`的 of`GameViewController`及其`@synthesize`声明中的所有引用？

# c++ - 如何为类继承层次结构的getter创建统一接口？

> ID：11322433
> 
> 赞同：3
> 
> 时间：2012-07-04T04:30:06.380
> 
> 标签：c++, templates, pointers, c-preprocessor

我认为没有代码的任何解释都会更加晦涩难懂。所以这是我试图让一切尽可能简单的代码。

```
#include <vector>
#include <iostream>

class WithParametersBase
{
public:
    WithParametersBase();

    double getX() const {return 0.0;}
    double getY() const {return 1.0;}

    //let's say I want to access these members using an unified interface:

    double getParameter(int index) const;

    // For example index == 0 means getX and index == 1 means getY.
    // I could implement it for example like this:

protected:

    void addGetter(double (WithParametersBase::* getter)()const)
    {
        getters_.push_back(getter);
    }

    std::vector<double (WithParametersBase::*)()const> getters_;
};

WithParametersBase::WithParametersBase()
{
    addGetter(&WithParametersBase::getX);
    addGetter(&WithParametersBase::getY);
}

double WithParametersBase::getParameter(int index) const
{
    return (this->*(getters_[index]))();
} 
```

确实有效。使用测试程序：

```
int main(int argc, char *argv[])
{
   WithParametersBase base;

   std::cout << base.getParameter(0)
             << base.getParameter(1) << std::endl;

   return 0;
} 
```

打印输出正确：

```
01 
```

但是如果我想扩展这个类：

```
class WithParametersDerived : public WithParametersBase
{
public:
    WithParametersDerived();
    double getZ() const  {return 2.0;} // A new getter
};

WithParametersDerived::WithParametersDerived()
{
    // I want to integrate the new getter into the previous interface
    addGetter(&WithParametersDerived::getZ); 
} 
```

所以如果我打电话：

```
WithParametersDerived derived;
std::cout << derived.getParameter(2) << std::endl; 
```

我想得到一个

```
2 
```

我无法编译程序。我收到一个错误：

```
error: no matching function for call to
'WithParametersDerived::addGetter
(double (WithParametersDerived::*)()const)' 
```

这是合理的，但我不知道如何实现它。

我希望派生类的创建者能够添加新的 getter。我知道，在运行时做这一切感觉有点不对劲，但我没有看到模板解决方案或预处理器解决方案。如果您有一些建议，请告诉我。任何事物！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T05:39:53.450

我会回避你*为什么*需要这样一个方案，并专注于*如何*.

您可以使用 a 代替成员函数指针，`std::function<double ()>`它是任何具有签名的可调用实体的通用包装器`double foo()`。要创建一个`std::function<double ()>`成员函数和一个对象实例，您可以使用`std::bind`如下：

```
std::function<double ()> callback =
    std::bind(&Class::memberFunction, objectInstancePointer); 
```

如果您不使用 C++11，[std::function](http://en.cppreference.com/w/cpp/utility/functional/function)和[std::bind](http://en.cppreference.com/w/cpp/utility/functional/bind)在 Boost 中也可以作为[boost::function](http://www.boost.org/doc/libs/release/doc/html/function.html)和[boost::bind](http://www.boost.org/doc/libs/release/libs/bind/bind.html)使用。这些的 Boost 文档大多（如果不是完全）适用于它们的 C++11 对应物。

代替 a `std::vector`，您可以使用 a`std::map`按名称索引 getter。这可能比维护参数 ID 号的中央列表更实用。

如果您的参数的类型可能与 不同`double`，那么您可能需要考虑使用[boost::any](http://www.boost.org/doc/libs/release/doc/html/any.html)或[boost::variant](http://www.boost.org/doc/libs/release/doc/html/variant.html)作为返回类型。

`std::function`这是一个使用、`std::bind`和的完整工作示例`std::map`：

```
#include <cassert>
#include <map>
#include <iostream>
#include <functional>

class WithParametersBase
{
public:
    WithParametersBase()
    {
        addGetter("X", std::bind(&WithParametersBase::getX, this));
        addGetter("Y", std::bind(&WithParametersBase::getY, this));
    }

    virtual double getX() const {return 0.0;}
    virtual double getY() const {return 1.0;}

    // Access parameter by name
    double getParameter(const std::string& name) const
    {
        auto getterIter = getters_.find(name);
        assert(getterIter != getters_.end());
        return getterIter->second();
    }

protected:
    typedef std::function<double ()> ParameterGetter;
    typedef std::map<std::string, ParameterGetter> GetterMap;

    void addGetter(const std::string& name, const ParameterGetter& getter)
    {
        getters_[name] = getter;
    }

    GetterMap getters_;
};

class WithParametersDerived : public WithParametersBase
{
public:
    WithParametersDerived()
    {
        addGetter("Z", std::bind(&WithParametersDerived::getZ, this));

        // Override base class getX
        addGetter("X", std::bind(&WithParametersDerived::getX, this));
    }

    double getX() const {return 3.0;} 
    double getZ() const {return 2.0;} // A new getter
};

int main(int argc, char *argv[])
{
    WithParametersBase base;
    WithParametersDerived derived;
    WithParametersBase& polymorphic = derived;

    std::cout << base.getParameter("X")
              << base.getParameter("Y")
              << polymorphic.getParameter("X")
              << polymorphic.getParameter("Y")
              << polymorphic.getParameter("Z") << std::endl;

    return 0;
} 
```

这种方法的缺点是`WithParametersBase`（或后代）的每个实例都将包含一个`GetterMap`. 如果您有大量此类对象，则所有这些对象的内存开销`GetterMaps`可能都是不可取的。

* * *

这是一个更有效的解决方案，它取消了`std::function`and `std::bind`。常规函数指针和静态成员函数用于 getter 回调。请求参数的对象实例作为参数传递给这些静态成员函数。在派生类型中，实例引用首先向下转换为派生类型，然后再调用执行实际获取的成员函数。

现在`GetterMap` *每个类*而不是每个对象只有一个。注意在方法中使用“construct on first use”`getters()`以避免[静态初始化顺序惨败](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.14)。

这种解决方案的缺点是每个派生自`WithParametersBase`. 使用模板可能会减少样板代码的数量（使用宏肯定是可能的）。

```
#include <cassert>
#include <map>
#include <iostream>

class WithParametersBase
{
public:
    virtual double getX() const {return 0.0;}
    virtual double getY() const {return 1.0;}

    // Access parameter by name
    double getParameter(const std::string& name) const
    {
        auto getterIter = getters().find(name);
        assert(getterIter != getters().end());
        return getterIter->second(*this);
    }

protected:
    typedef double (*ParameterGetter)(const WithParametersBase& instance);
    typedef std::map<std::string, ParameterGetter> GetterMap;

    static double xGetter(const WithParametersBase& instance)
    {
        return instance.getX();
    }

    static double yGetter(const WithParametersBase& instance)
    {
        return instance.getY();
    }

    static GetterMap makeGetterMap()
    {
        GetterMap map;
        map["X"] = &WithParametersBase::xGetter;
        map["Y"] = &WithParametersBase::yGetter;
        return map;
    }

    virtual const GetterMap& getters() const
    {
        // Not thread-safe. Use std::call_once to make thread-safe.
        static GetterMap map = makeGetterMap();
        return map;
    };
};

class WithParametersDerived : public WithParametersBase
{
public:
    double getX() const {return 3.0;} 
    double getZ() const {return 2.0;} // A new getter

protected:
    static double zGetter(const WithParametersBase& instance)
    {
        // It's reasonably safe to assume that 'instance' is of type
        // WithParametersDerived, since WithParametersDerived was the one
        // that associated "Z" with this callback function.
        const WithParametersDerived& derived =
            dynamic_cast<const WithParametersDerived&>(instance);
        return derived.getZ();
    }

    static GetterMap makeGetterMap()
    {
        // We "inherit" the getter map from the base class before extending it.
        GetterMap map = WithParametersBase::makeGetterMap();
        map["Z"] = &WithParametersDerived::zGetter;
        return map;
    }

    virtual const GetterMap& getters() const
    {
        // Not thread-safe. Use std::call_once to make thread-safe.
        static GetterMap map = makeGetterMap();
        return map;
    };
};

int main(int argc, char *argv[])
{
    WithParametersBase base;
    WithParametersDerived derived;
    WithParametersBase& polymorphic = derived;

    std::cout << base.getParameter("X")
              << base.getParameter("Y")
              << polymorphic.getParameter("X")
              << polymorphic.getParameter("Y")
              << polymorphic.getParameter("Z") << std::endl;

    return 0;
} 
```

# jquery - 如何在一两个 div 中选择表 ID？

> ID：11322454
> 
> 赞同：1
> 
> 时间：2012-07-04T04:33:56.373
> 
> 标签：jquery, html, html-table, tablesorter

我正在尝试选择以下表格 id - myTable - 它嵌套在几个 div 中。

这是来自 Chrome 的元素面板的屏幕截图：

![](../Images/1b8df13fdb4f08e066302eade025beb9.png)

我尝试使用以下方法无济于事：

```
    $('#myTable').tablesorter();
    $('table#myTable').tablesorter();

```

```
 <html lang="en">
      <head>
        <title>Beverly Bonus Dashboard</title>
        <script type="text/javascript" src="../js/jquery/js/jquery-min.js"></script>
        <script type="text/javascript" src="../js/jquery/js/jquery-ui.js"></script>
        <script type="text/javascript" src="../js/jquery/tablesorter/jquery.tablesorter.js"></script>
        <script type="text/javascript" src="../js/central.js"></script>
        <link type="text/css" href="../js/jquery/css/tpurple/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
      </head>
      <? if ($isDelegate == "true") { ?>
      <body>
        <div id="tabs">
          <ul>
            <li><a href="#tabs-1">Nunc tincidunt</a></li>
            <li><a href="#tabs-2">Proin dolor</a></li>
            <li><a href="#tabs-3">Administration</a></li>
          </ul>
          <div id="tabs-1">
            <p>Tab 1 content</p>
          </div>
          <div id="tabs-2">
            <p>Tab 2 content</p>
          </div>
          <div id="tabs-3">
            <button id="button_showUsers" value="<?=$centreID; ?>">Show Users</button>
            <button id="button_addUsers" value="<?=$centreID; ?>">Add Users</button>
            <button id="button_removeUsers">Remove Users</button>       
            <br>
            <div id="users"></div>               
          </div>
        </div>   
      </body>
      <? }//end if isDelegate 
      else {
        echo $fullName .", You do not have permission to view this page";
      }
      ?>  
    </html> 
```

文件：central.js

```
<pre>
    $(document).ready(function(){
      //Tabs
      $('#tabs').tabs({ spinner: 'Retrieving data...' });
      //Buttons
      $("button").button();     
      //Dialog Box 
      $('#dialog').dialog()
      //error messages
      var $error_1 = $('<div></div>')
        .html("You Do Not Have Permission To View This Site.")
        .dialog({autoOpen: false, title: 'Error'});  
       $('#myTable.tablesorter').tablesorter();

      //site stuff
      $("#button_showUsers").click(function(){
        //get the centre id
        var ID = $(this).val();
        //echo out the delegates based on the centre ID
        $.getJSON("../php/show_delegates.php", {  centreID: ID }, function(data) { 
          $("#users").html("");
          var tbl ="<table id='myTable' class='tablesorter'><thead><tr><td>AGS</td><td>Name</td><td>Centre ID</td><td>Start Date</td><td>End Date</td></tr></thead><tbody>";
          $.each(data.delegates, function(key, val) {
            tbl = tbl 
            +"<tr>"
            +"<td>"+val.ags+"</td>"
            +"<td>"+val.full_name+"</td>"
            +"<td>"+val.centre_id+"</td>" 
            +"<td>"+val.start_date+"</td>"
            +"<td>"+val.end_date+"</td>"
            +"</tr>";
          });//end each
          tbl = tbl
          +"</tbody></table>";   
        $("#users").append(tbl);
        })//end getJSON 
      }); //button_showUsers

      $("#button_addUsers").click(function(){
        //get the centre id
        var ID = $(this).val();  
        $("#users").html("");
        var tbl ="<table id='myTable' class='tablesorter'><thead><tr><td>AGS</td><td>Name</td><td>Centre ID</td><td>Start Date</td><td>End Date</td></tr></thead><tbody>"
        +"<tr>"
        +"<td><input type=text id='ags'maxlength='8'></input></td>"
        +"<td></td>"
        +"<td></td>"
        +"<td></td>"        
        +"<td></td>"    
        +"</tr></tbody></table>";   
        $("#users").append(tbl);
      }); //button_addUsers

      //log user out when window closes
      $(window).unload( function () { 
         $.get("../php/logout.php", function(data) { }); 
         alert("Bye now!");
      });//end unload

        //log user out when window closes
      $(window).load( function () { 
        $.get("../php/user_details.php", function(data) { }); 
         //alert("Bye now!");
      });//end unload

    }); //end (document).ready 
```

任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:47:22.260

它应该工作。

1.  可能是您在加载 html 之前发起了调用 $('#myTable') 。尝试在 document.ready() 中初始化 tablesorter

2.  您显示的 html 稍后会使用 ajax 调用加载到页面中。在这种情况下，您需要在 ajax 调用之后初始化 tablesorter。

3.  或者你在 html 之前的某个地方得到了一个具有相同 id 的元素，因此它失败了。在控制台中尝试 $('#myTable') 并检查它是否返回正确的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:42:34.287

尝试使用以下内容：

```
$('#myTable.tablesorter').tablesorter(); 
```

或者

```
$('#myTable .tablesorter').tablesorter(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:23:47.013

1）保持你的HTML原样。

2) 包括最新的 Jquery、Jquery UI 和 jquery.tablesorter.js java 脚本文件以及 Jquery UI 样式表。

3）替换以下Javascript / JQuery：

```
function appendUserTable() {
            $("#users").html("");
            var strdata = "[{'ags':25,'full_name':'User1','central_id':1,'start_date':'01-01-2001','end_date':'12-31-2005'},{'ags':20,'full_name':'User2','central_id':2,'start_date':'05-01-2002','end_date':'12-31-2007'},{'ags':22,'full_name':'User3','central_id':3,'start_date':'06-05-2003','end_date':'12-31-2010'}]";
            var tbl = "<table id='myTable' class='tablesorter'><thead><tr><th>AGS</th><th>Name</th><th>Centre ID</th><th>Start Date</th><th>End Date</th></tr></thead><tbody>";
            var dataObject = eval('(' + strdata + ')');
            for (i in dataObject) {
                tbl = tbl + "<tr>" + "<td>" + dataObject[i]["ags"] + "</td>" + "<td>" + dataObject[i]["full_name"] + "</td>" + "<td>" + dataObject[i]["central_id"] + "</td>" + "<td>" + dataObject[i]["start_date"] + "</td>" + "<td>" + dataObject[i]["end_date"] + "</td>" + "</tr>";
            }
            tbl = tbl + "</tbody></table>";
            $("#users").append(tbl);

            if ($("#users").find("#myTable").length > 0) {
                $("#myTable").tablesorter();
            }
        }

        $(document).ready(function() {
            $("#tabs").tabs();
            //if Show User Button Clicked
            $("#tabs-3 #button_showUsers").click(function() {
                //get the centre id
                // var ID = $(this).val();  
                //Append User Table Sorter
                appendUserTable();
            });
            //if Add User Button Clicked
            $("#tabs-3 #button_addUsers").click(function() {
                //get the centre id
                // var ID = $(this).val();  
                //Append User Table Sorter
                appendUserTable();
            });
            //Place other Login/Logout Script Here...
        }); //End of document ready 
```

4) 为可排序表添加以下 CSS

```
table.tablesorter {
  background-color: #CDCDCD;
  font-family: arial;
  font-size: 8pt;
  margin: 10px 0 15px;
  text-align: left;
  width: 100%;
}
table.tablesorter thead tr .header {
  background-image: url("http://tablesorter.com/themes/blue/bg.gif");
  background-position: right center;
  background-repeat: no-repeat;
  cursor: pointer;
}
table.tablesorter thead tr th, table.tablesorter tfoot tr th {
  background-color: #E6EEEE;
  border: 1px solid #FFFFFF;
  font-size: 8pt;
  padding: 4px;
}
table.tablesorter {
  font-family: arial;
  font-size: 8pt;
  text-align: left;
} 
```

也可以在代码箱上试试这个。[http://codebins.com/codes/home/4ldqpbr](http://codebins.com/codes/home/4ldqpbr)

# c# - 我必须使用 Autofac 显式绑定普通类吗？

> ID：11322458
> 
> 赞同：7
> 
> 时间：2012-07-04T04:34:05.697
> 
> 标签：c#, autofac

我似乎在我的代码中这样做了一点：

```
public class ActionsModule : Module
    {
        protected override void Load(ContainerBuilder builder)
        {
            base.Load(builder);
            builder.Register(c => LogManager.GetCurrentClassLogger()).As<ILog>().InstancePerDependency();

            // Autofac doesn't seem to be able to inject things without explicit binding 
            builder.RegisterType<ComboActions>().As<ComboActions>().InstancePerHttpRequest();
            builder.RegisterType<AppActions>().As<AppActions>().InstancePerHttpRequest();
        }
    }
} 
```

“动作”类是我需要注入到我的控制器中的类，并且具有各种其他子依赖项。

好像有点垃圾 为什么 autofac 不能解析该类具有已满足依赖关系的构造函数并自动制造实例？

我的意思是，如果 A 类需要注入 B 类，而 B 类需要 C、D、E 等。公平地说，我猜你不想遍历整个依赖链来查看是否可以在运行时创建一个类。...但是如果 A 类直接依赖于明确绑定的 C 和 D，那肯定是微不足道的情况吗？

我错过了什么吗？似乎看不到任何有关此的文档...

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-13T03:52:46.417

您不必注册每种类型。Autofac 提供了一个[AnyConcreteTypeNotAlreadyRegisteredSource](http://code.google.com/p/autofac/source/browse/src/Source/Autofac/Features/ResolveAnything/AnyConcreteTypeNotAlreadyRegisteredSource.cs?r=2372cbd66a907d77d98c8734002e01ec343fdb21)，如果您尚未提供注册，它将自动获取具体类型。

例如：

```
var builder = new ContainerBuilder();
builder.RegisterSource(new AnyConcreteTypeNotAlreadyRegisteredSource());
var container = builder.Build();
...
var myConcreteType = container.Resolve<MyConcreteType>(); 
```

源代码允许更复杂的事情，例如为接口和基于抽象类的依赖项[自动注入模拟对象。](https://stackoverflow.com/a/2462443/103842)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T12:24:03.197

AFAIK，Autofac 要求在容器中注册每种需要的类型，但这并不意味着您必须单独执行每个类型。我几乎 99% 的注册都是通过将这个属性添加到类型来处理的：

```
[AttributeUsage(AttributeTargets.Class)]
public class AutoRegisterAttribute : Attribute { } 
```

例如，你会有

```
[AutoRegister]
class ComboActions
{ 
```

然后我用这个注册它们：

```
public class AutoScanModule : Module
{
    private readonly Assembly[] _assembliesToScan;

    public AutoScanModule(params Assembly[] assembliesToScan)
    {
        _assembliesToScan = assembliesToScan;
    }

    protected override void Load(ContainerBuilder builder)
    {
        builder.RegisterAssemblyTypes(_assembliesToScan)
            .Where(t => t.GetCustomAttributes(typeof (AutoRegisterAttribute), false).Any())
            .AsSelf()
            .AsImplementedInterfaces()
            .InstancePerLifetimeScope();
    }
} 
```

就像我说的，这涵盖了我的大部分注册，然后我通常只需要担心诸如 3rd 方类型、开放泛型和装饰器之类的事情。

编辑：查看[Kaleb 的回复](https://stackoverflow.com/a/11463885/540663)，证明我错了。我从来不知道的酷功能！

# php - PDO 两个查询，一个用于找到的行，另一个用于结果？

> ID：11322462
> 
> 赞同：0
> 
> 时间：2012-07-04T04:34:30.543
> 
> 标签：php, mysql

我目前在使用准备好的语句时做了两个查询。一个用于获取结果，另一个用于获取找到的行数。我以前可以用一个查询来做到这一点`mysql_num_rows`。对于较大的查询，我不想复制和粘贴查询并使用 COUNT 每个查询。有没有办法在一个查询中做到这一点`mysql_num_rows`？

```
 $connectdb->prepare("SELECT * FROM users WHERE username=:username");
        $connectdb->prepare("SELECT COUNT(*) FROM users WHERE username=:username");
    $query = $connectdb->execute(array(':username'=>$username));                                    
            $numrows = $query->fetchColumn();

             if($numrows!=0) {
               while(false !==($row = $query->fetch()))
               { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:37:00.027

该语句已经有行数：[`PDOStatement::rowCount()`](http://php.net/manual/en/pdostatement.rowcount.php)

所以`$query->rowCount();`只使用你的第一个查询

PS：您的代码看起来甚至不起作用。正确的应该是：

```
$stmt = $connectdb->prepare("SELECT * FROM users WHERE username=:username");
$stmt->execute(array(':username'=>$username));                                    
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T04:39:30.257

```
$query=$connectdb->prepare("SELECT * FROM users WHERE username=:username");
    $query->execute(array(':username'=>$username));                                    
            $numrows = $query->rowCount(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T04:43:59.650

**PDO 中有 3 个可用选项：**

**1）**你目前拥有的，通过使用`COUNT()`：

```
$numrows = $query->fetchColumn(); 
```

**2）** `fetchColumn()`不执行查询本身：

```
$pdo->query("SELECT COUNT(*) from users")->fetchColumn(); 
```

**3）** `rowCount()` **注意**- 显然在 MySQL 中不起作用，我不推荐这样做：

```
PDOStatement::rowCount(); 
```

**编辑**-澄清-第3号，这是PDO Doc的参考：

> 对于大多数数据库，PDOStatement::rowCount() 不返回受 SELECT 语句影响的行数。相反，使用 PDO::query() 发出 SELECT COUNT(*) 语句，其谓词与预期的 SELECT 语句相同，然后使用 PDOStatement::fetchColumn() 检索将返回的行数。然后，您的应用程序可以执行正确的操作。

# c++ - 从缓冲区读取后获取字符串的长度

> ID：11322468
> 
> 赞同：0
> 
> 时间：2012-07-04T04:35:23.390
> 
> 标签：c++, string, stl

```
string str;
stringstream buffer;

buffer << is.rdbuf();

str = buffer.str();

cout << str.length();
size_t pos = str.find_first_not_of(".123456789"); 
```

有人可以向我解释为什么这段代码不起作用吗？

当我运行它时，它只是在我输入“12345”后就坐在那里

到底是怎么回事？！我对字符串流不太熟悉，但为什么这和其他看似平凡的操作不能按预期工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:37:51.110

我猜你需要关闭流，即 Ctrl+D 什么的。
请记住，对于流，换行符只是另一个（两个）字符。

因此，您可能需要使用可以处理行的不同输入流阅读器。我不太了解 STD 库，但我敢打赌它就在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:02:12.487

也许这就是你正在寻找的：

```
string str;
getline(is,str);
cout << str.length();
size_t pos = str.find_first_not_of(".123456789"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T06:23:28.693

我真的不明白你不阅读转义序列是什么意思？getline 将在您键入时读取所有内容。考虑以下示例（混合 C 和 C++ 结构时有点难看）：

```
#include <stdio.h>
#include <iostream>

int main() {
        std::string str;
        getline(std::cin,str);
        printf("string length: %ld\n",str.length());
        size_t pos = str.find_first_not_of(".123456789");
        printf("first nondigit: %ld\n",pos);
        printf("you typed: %s\n",str.c_str());
        return 0;
} 
```

如果我运行它并输入

```
12345\n\t a 
```

我得到以下输出：

```
string length: 11
first nondigit: 5
you typed: 12345\n\t a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:53:10.267

cin 等待输入分隔符。输入完字符串后按 Enter。

# iphone - 使用 UIImage imageWithData:NSData dataWithContentsOfFile 时不显示图像

> ID：11322470
> 
> 赞同：0
> 
> 时间：2012-07-04T04:35:36.787
> 
> 标签：iphone, ios, ios4, uiimageview

下面的代码没有显示从网上下载并写入我的应用程序文档目录的图像。我检查了iphone的模拟器文件目录里面，下载的文件是存在的。但图像不显示。

尝试使用 添加资源图像`UIImage *imgBack = [UIImage imageNamed:@"btn-back.png"];`时，uiimageview 显示 image.bu 从在线下载并存储在应用程序目录中的图像不显示图像。

请告诉我，谢谢

```
NSString *workSpacePath=[[self applicationDocumentsDirectory] stringByAppendingPathComponent:theFileName];
NSLog(@"%@ workSpacePath ",workSpacePath);
if ( workSpacePath ){

        //--------------
       UIImage *imgBack = [UIImage imageNamed:@"btn-back.png"];
       imageView1 = [[[UIImageView alloc] initWithFrame:CGRectMake(0,0,20,20)] autorelease];
       [imageView1 setBackgroundColor:[UIColor grayColor]];

       imageView1.image = [UIImage imageWithData:[NSData dataWithContentsOfFile:workSpacePath]];
       [cell addSubview:imageView1];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:41:40.980

而不是首先将文件转换为`NSData`，您可以使用

`[UIImage imageWithContentsOfFile:filePath]`

直接加载一个`image`给定的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:25:21.333

试试这个，这对我来说非常有用：

```
 - (void)viewDidLoad
{
     [super viewDidLoad];

     NSURL *url1 = [NSURL URLWithString:@"http://mobiledevelopertips.com/images/logo-iphone-dev-tips.png"];
    UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:url1]];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:@"savedImage.png"];

    NSData *imageData = UIImagePNGRepresentation(image);
    [imageData writeToFile:savedImagePath atomically:NO]; 

    NSArray *paths1 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory1 = [paths1 objectAtIndex:0];
    NSString *workSpacePath = [documentsDirectory1 stringByAppendingPathComponent:@"savedImage.png"]; 
    NSLog(@"%@ workSpacePath ",workSpacePath);

if ( workSpacePath )
     {
        imageView1 = [[UIImageView alloc] initWithFrame:CGRectMake(20,20,20,20)];
        [imageView1 setBackgroundColor:[UIColor grayColor]];

        imageView1.image = [UIImage imageWithData:[NSData dataWithContentsOfFile:workSpacePath]];
        [self.view addSubview:imageView1];

    }
} 
```

# ubuntu - 将蓝牙设备映射到 Linux 中的串行端口

> ID：11322472
> 
> 赞同：4
> 
> 时间：2012-07-04T04:35:54.773
> 
> 标签：ubuntu, bluetooth, serial-port, rfcomm, smslib

我已通过蓝牙将手机连接到笔记本电脑。现在我需要将该蓝牙连接映射到虚拟串行端口。这样做的目的是配置[SMSLib](http://smslib.org) Java 库以通过我的手机发送短信。Ubuntu 12.04 是我笔记本电脑上运行的操作系统。我已执行以下命令并将“/dev/rfcomm0”作为我的串行端口提供给 SMSLib 应用程序参数。

```
rfcomm bind /dev/rfcomm0 <bdaddr> <rfchan> 
```

但是它通过说端口无法识别给了我一个运行时错误。我如何克服这个问题？

祝你有美好的一天！

# asp.net - 如何在 Web 应用程序中验证回发数据

> ID：11322473
> 
> 赞同：1
> 
> 时间：2012-07-04T04:36:00.110
> 
> 标签：asp.net, security, authentication, web-applications, authorization

考虑一个假设的银行应用程序，其中我们有帐户和一些管理员组。每个管理员都对某些帐户具有修改权限。为了保存对帐户所做的修改，应用程序在编辑页面上发送帐户 ID。管理员可以使用 fiddler 等工具更改发布请求。如果他/她将帐户 ID 更改为他/她未授权的某个帐户 ID。那么检测它的最佳方法是什么。

我应该使用什么策略来重新验证每条数据以进行回发授权？我更关心的是设计，而不是代码。

换句话说，现实世界的应用程序如何确保即使用户从任何工具更改回发请求，应用程序也能够检测到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:53:29.200

> 我是否应该在回发时重新验证每条数据以进行授权？

对，那是正确的。您应该从“所有输入都是邪恶的”理念开始，然后通过验证每个数据点来证明该陈述不正确。如果您的整个数据没有通过您的验证，那么您的输入确实是邪恶的。

智能 Web 应用程序同时使用客户端和服务器端验证。客户端验证可快速提醒用户有什么问题/遗漏，而无需进行服务器往返和服务器端验证，以确保即使有人“摆弄”客户端验证代码，错误数据也不会漏掉（并覆盖它）。

不幸的是，在客户端加密数据将不起作用，因为您在客户端（在 JS 代码中）也有密钥。这不会阻止恶意用户加密恶意负载。对于恶意攻击者来说，隐藏字段等混淆也是低效的。仅供参考，您甚至不需要 fiddler 更改字段/发布参数等 - 您所需要的只是一个[firebug 扩展](http://getfirebug.com/)。

口头禅是“验证服务器端的每一件事”。时期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:36:18.623

对于银行等关键应用程序，我将建议遵循安全步骤

1) 发送加密帐户 ID 2) 将该帐户 ID 保存在隐藏字段中，当用户发布数据时从隐藏字段中获取帐户 ID，而不是形成文本框或标签。3）在回发时重新验证每条数据以进行授权。

# html - 三列层对齐

> ID：11322474
> 
> 赞同：1
> 
> 时间：2012-07-04T04:36:02.630
> 
> 标签：html, css, layout, sticky-footer

好的，我上周一直在尝试自己做这件事。我发誓我已经访问了每个可用的 Google 页面。

我最初的问题是我的三列图层是堆叠的。
在这个网站上遇到一个类似的问题后，我能够使用浮动技术让我的页脚分成三列。

但是，它有一个角度：
就像，第一列是我希望所有这些都出现的地方。
我将发布我的 CSS 和 HTML。

我对此很陌生，你们所有人可能都会对我的代码有多糟糕感到恶心。但是，这就是我来找你的原因。我需要帮助，因为我一个人做不到。

你可以在这里查看我正在开发的网站。[http://www.bbcardmore.com/](http://www.bbcardmore.com/)

```
.left{
text-align:left;
float:left;
}
.right{
float:right;
text-align:right;
}
.centered{
text-align:center;
}

<?php?>
<html>
<body>
<head>
</style>
   <head>
    <div id="footer">
     <div class="left">
     <h3><p style="padding-top: 10pt; " class="paragraph_style"><font size="5" color="red">About Us</font><br /></p></h3>
         <p class="paragraph_style_1"><a title="Our History" href="http://www.bbcardmore.com/bbc-history-3/">Our History</a>                 <br /></p>
         <p class="paragraph_style_1"><a title="Our Pastor" href="http://www.bbcardmore.com/our-pastor/">Our Pastor</a><br />  </p>
         <p class="paragraph_style_1"><a title="Statement Of Faith" href="http://www.bbcardmore.com/statement-of- faith/">Statement Of Faith</a><br /></p>
         <p class="paragraph_style_1"><a title="Calendar" href="http://www.bbcardmore.com/calendar/">Calendar</a><br /></p>
         <p style="padding-bottom: 0pt; " class="paragraph_style_1"><a title="Map"  href="http://www.bbcardmore.com/map/">Map</a></p>

     <div class="centered">
     <h3><p style="padding-top: 10pt; " class="paragraph_style"><a title="Service Times" href="http://www.bbcardmore.com/service-times/"><font size="5" color="red">Service Times</font><br /></p></h3>
         <p class="paragraph_style_1"><a title="Service Times" href="http://www.bbcardmore.com/service-times/"> Sunday School~ 10:00</a><br /></p>
         <p class="paragraph_style_1"><a title="Service Times" href="http://www.bbcardmore.com/service-times/"> Sunday Morning Service~ 11:00 AM</a><br /></p>
         <p class="paragraph_style_1"><a title="Service Times" href="http://www.bbcardmore.com/service-times/"> Sunday Evening Service~ 7:00 PM</a><br /></p>
         <p class="paragraph_style_1"><a title="Service Times" href="http://www.bbcardmore.com/service-times/"> Wednesday Evening Bible Study~ 7:00 PM</a><br /></p>
         <p class="paragraph_style_1"><a title="Service Times" href="http://www.bbcardmore.com/service-times/"> Transportation and child care available for all services.</a><br /></p>

       <div class="right">
    <h3><p style="padding-top: 10pt; " class="paragraph_style"><a title="Contact Us" href="http://www.bbcardmore.com/contact-us/"><font size="5" color="red">Contact Us:</font><br /></p></h3>
        <p class="paragraph_style_2"><a title="Map" href="http://www.bbcardmore.com/map/"><font size="3" color="red">Mailing Address:</font><br /></p>
        <p class="paragraph_style_1"><a title="Map" href="http://www.bbcardmore.com/map/">1515 Easley Drive<br /></p>
        <p class="paragraph_style_1"><a title="Map" href="http://www.bbcardmore.com/map/">Ardmore, OK 73401<br /></p>
        <p class="paragraph_style_3"><span class="style"><a title="" href="mailto:bbcardmore@aol.com"><font size="3" color="red">Email:</font></span> bbcardmore@aol.com<br /></p>
        <p class="paragraph_style_3"><span class="style"><a title="Contact Us" href="http://www.bbcardmore.com/contact-us/"><font size="3" color="red">Phone:</font></span> (580) 223-6629<br /></p>

      <div>
     </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:07:04.467

我认为您看起来像这个演示： -http: [//tinkerbin.com/N87sxG5i](http://tinkerbin.com/N87sxG5i)

实际上你并没有关闭你的子 div `left, Center, Right`，所以我关闭了这些子 div，然后我给`float:left;`了你`center div`而不是 text-align:center; 根据您的要求，该 div 及其现在可以正常工作....

**HTML**

```
<html>
<body>
<head>
</style>
   <head>
    <div id="footer">
     <div class="left">
     <h3><p style="padding-top: 10pt; " class="paragraph_style"><font size="5" color="red">About Us</font><br /></p></h3>
         <p class="paragraph_style_1"><a title="Our History" href="http://www.bbcardmore.com/bbc-history-3/">Our History</a>                 <br /></p>
         <p class="paragraph_style_1"><a title="Our Pastor" href="http://www.bbcardmore.com/our-pastor/">Our Pastor</a><br />  </p>
         <p class="paragraph_style_1"><a title="Statement Of Faith" href="http://www.bbcardmore.com/statement-of- faith/">Statement Of Faith</a><br /></p>
         <p class="paragraph_style_1"><a title="Calendar" href="http://www.bbcardmore.com/calendar/">Calendar</a><br /></p>
         <p style="padding-bottom: 0pt; " class="paragraph_style_1"><a title="Map"  href="http://www.bbcardmore.com/map/">Map</a></p>
            </div>  

     <div class="centered">
     <h3><p style="padding-top: 10pt; " class="paragraph_style"><a title="Service Times" href="http://www.bbcardmore.com/service-times/"><font size="5" color="red">Service Times</font><br /></p></h3>
         <p class="paragraph_style_1"><a title="Service Times" href="http://www.bbcardmore.com/service-times/"> Sunday School~ 10:00</a><br /></p>
         <p class="paragraph_style_1"><a title="Service Times" href="http://www.bbcardmore.com/service-times/"> Sunday Morning Service~ 11:00 AM</a><br /></p>
         <p class="paragraph_style_1"><a title="Service Times" href="http://www.bbcardmore.com/service-times/"> Sunday Evening Service~ 7:00 PM</a><br /></p>
         <p class="paragraph_style_1"><a title="Service Times" href="http://www.bbcardmore.com/service-times/"> Wednesday Evening Bible Study~ 7:00 PM</a><br /></p>
         <p class="paragraph_style_1"><a title="Service Times" href="http://www.bbcardmore.com/service-times/"> Transportation and child care available for all services.</a><br /></p>
                </div>

       <div class="right">
    <h3><p style="padding-top: 10pt; " class="paragraph_style"><a title="Contact Us" href="http://www.bbcardmore.com/contact-us/"><font size="5" color="red">Contact Us:</font><br /></p></h3>
        <p class="paragraph_style_2"><a title="Map" href="http://www.bbcardmore.com/map/"><font size="3" color="red">Mailing Address:</font><br /></p>
        <p class="paragraph_style_1"><a title="Map" href="http://www.bbcardmore.com/map/">1515 Easley Drive<br /></p>
        <p class="paragraph_style_1"><a title="Map" href="http://www.bbcardmore.com/map/">Ardmore, OK 73401<br /></p>
        <p class="paragraph_style_3"><span class="style"><a title="" href="mailto:bbcardmore@aol.com"><font size="3" color="red">Email:</font></span> bbcardmore@aol.com<br /></p>
        <p class="paragraph_style_3"><span class="style"><a title="Contact Us" href="http://www.bbcardmore.com/contact-us/"><font size="3" color="red">Phone:</font></span> (580) 223-6629<br /></p>
            </div>

      <div>
     </body>
    </html> 
```

**CSS**

```
.left{
text-align:left;
float:left;
}
.right{
float:right;
text-align:right;
}
.centered{
float:left;
margin-left:25px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:08:41.147

我不确定，但它可能会工作......试试这个代码..

```
.left{
float:left;
}
.right{
float:left;
}
.centered{
float:left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:01:37.353

您需要正确格式化标签，关闭所有打开的标签以避免嵌套错误。

浮动是一项棘手的工作，浮动元素需要放置在要围绕它们流动的元素之前。

您的标记应采用如下格式：

```
<div class="center">
    <div class="left">
        <p class="red-title">About Us</p>
        <p><a title="Our History" href="http://www.bbcardmore.com/bbc-history-3/">Our History</a></p>
        <p><a title="Our Pastor" href="http://www.bbcardmore.com/our-pastor/">Our Pastor</a></p>
        <p><a title="Statement Of Faith" href="http://www.bbcardmore.com/statement-of- faith/">Statement Of Faith</a></p>
        <p><a title="Calendar" href="http://www.bbcardmore.com/calendar/">Calendar</a></p>
        <p><a title="Map"  href="http://www.bbcardmore.com/map/">Map</a></p>
    </div>
    <div class="right">
        <p class="red-title"><a title="Contact Us" href="http://www.bbcardmore.com/contact-us/">Contact Us:</a></p>
        <p><a title="Map" href="http://www.bbcardmore.com/map/"><span class="red">Mailing Address:</span></a></p>
        <p><a title="Map" href="http://www.bbcardmore.com/map/">1515 Easley Drive</a></p>
        <p><a title="Map" href="http://www.bbcardmore.com/map/">Ardmore, OK 73401</a></p>
        <p><a title="Email" href="mailto:bbcardmore@aol.com"><span class="red">Email:</span> bbcardmore@aol.com</a></p>
        <p><a title="Contact Us" href="http://www.bbcardmore.com/contact-us/"><span class="red">Phone:</span> (580) 223-6629</a></p>
    </div>
    <p class="red-title"><a title="Service Times" href="http://www.bbcardmore.com/service-times/">Service Times</a></p>
    <p><a title="Service Times" href="http://www.bbcardmore.com/service-times/">Sunday School~ 10:00</a></p>
    <p><a title="Service Times" href="http://www.bbcardmore.com/service-times/">Sunday Morning Service~ 11:00 AM</a></p>
    <p><a title="Service Times" href="http://www.bbcardmore.com/service-times/">Sunday Evening Service~ 7:00 PM</a></p>
    <p><a title="Service Times" href="http://www.bbcardmore.com/service-times/">Wednesday Evening Bible Study~ 7:00 PM</a></p>
    <p><a title="Service Times" href="http://www.bbcardmore.com/service-times/">Transportation and child care available for all services.</a></p>
</div> 
```

这个 CSS 表会将此标记转换为您所追求的三列设计：

```
.left {
    float: left;
    text-align: left;
}
.right {
    float: right;
    text-align: right;
}
.center {
    text-align: center;
}
.red-title {
    color: #e00;
    font-size: 180%;
    font-family: sans-serif;
}
.red {
    color: #e00;
}
a {
    color: inherit;
    text-decoration: none;
}
a:hover {
    text-decoration: underline;
}
p {
    margin: 8px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T05:02:52.883

我想这就是你要找的

```
 <div style="background-color: Black; width: 100%; height: 680px;">
            <div style="width: 970px; margin: 0 auto;padding:0px">
                <div style="width: 25%; height: 675px; float: left; background-color: Blue;">
                 Left div
                </div>
                <div style="width: 75%; height: 675px; float: right; background-color: white">
                    <div style="width: 75%; height: 675px; float: left; background-color: red">
                    Center Div
                    </div>
                    <div style="width: 25%; height: 675px; float: right; background-color: Green">
                     Right Div
                    </div>
                </div>
            </div>
        </div> 
```

# python - 以“-xx:00”格式解析时区

> ID：11322475
> 
> 赞同：0
> 
> 时间：2012-07-04T04:36:06.890
> 
> 标签：python, timezone

我有一个 IP 地理定位服务，它以以下格式返回用户估计的时区`-08:00`

起初我试图将这个数字转储到 Pytz 中，但这不起作用。（我现在意识到这是一个愚蠢的想法。）

那么我如何将这个数字解析成一个 tzinfo 对象呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:03:42.367

偏移量不足以定义时区，例如，它忽略 DST 和对该区域时间的其他更改。

要获得有限的 tzinfo 对象，您可以使用`pytz.FixedOffset(-8*60)`.

# cassandra - cassandra中的范围查询

> ID：11322477
> 
> 赞同：2
> 
> 时间：2012-07-04T04:36:50.310
> 
> 标签：cassandra

以下按预期工作。但是我应该执行谁来执行范围查询，例如“年龄 > 40 和年龄 < 50”

```
create keyspace Keyspace1;
use Keyspace1;
create column family Users with comparator=UTF8Type and default_validation_class=UTF8Type and key_validation_class=UTF8Type;

set Users[jsmith][first] = 'John';
set Users[jsmith][last] = 'Smith';
set Users[jsmith][age] = long(42);

get Users[jsmith];
=> (column=age, value=42, timestamp=1341375850335000)
=> (column=first, value=John, timestamp=1341375827657000)
=> (column=last, value=Smith, timestamp=1341375838375000) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T04:36:02.753

在 Cassandra 中执行此操作的最佳方法取决于您的要求，但支持这些类型的范围查询的方法非常相似。

Basically, you will take advantage of the fact that columns within a row are sorted by their names. So, if you use an age as the column name (or part of the column name), the row will be sorted by ages.

You will find a lot of similarities between this and storing time-series data. I suggest you take a look at [Basic Time Series with Cassandra](http://rubyscale.com/blog/2011/03/06/basic-time-series-with-cassandra/) for the fundamentals, and the second half of an intro to the [latest CQL features](http://www.datastax.com/dev/blog/whats-new-in-cql-3-0) that gives an example of a somewhat more powerful approach.

The built-in secondary indexes are basically designed like a hash table, and don't work for range queries unless that range expression accompanies an equality expression on an indexed column. So, you could ask for `select * from users where name = 'Joe' and age > 54`, but not simply `select * from users where age > 54`, because that would require a full table scan. See Secondary Indexes [doc](http://wiki.apache.org/cassandra/SecondaryIndexes) for more details.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:25:46.300

您必须在列年龄上创建二级索引：

```
update column family Users with column_metadata=[{column_name: age, validation_class: LongType, index_type: KEYS}]; 
```

然后使用：

```
get Users where age > 40 and age < 50 
```

*注意：我认为：从 1.2 开始不支持独占运算符。*

Datastax 有一个很好的文档：[http](http://www.datastax.com/dev/blog/whats-new-cassandra-07-secondary-indexes) ://www.datastax.com/dev/blog/whats-new-cassandra-07-secondary-indexes或者您可以创建和维护自己的二级索引。这是一个很好的链接： [http ://www.anuff.com/2010/07/secondary-indexes-in-cassandra.html](http://www.anuff.com/2010/07/secondary-indexes-in-cassandra.html)

# c++ - 有谁知道在 C/C++ 中使用 libevent 实现 Web Sockets API 的任何尝试？

> ID：11322480
> 
> 赞同：2
> 
> 时间：2012-07-04T04:37:05.157
> 
> 标签：c++, websocket, asyncsocket

我需要在 C/C++ 中使用 libevent 的开源 Web Sockets API。请告诉我在哪里可以找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T08:59:59.657

您可以使用基于 libevent 的[evws](https://github.com/Aulos/evws)或[libwebsock 。](https://github.com/payden/libwebsock)我还没有为自己使用它，但它看起来很有希望。

如果它不符合您的要求，您可以自己构建一些东西（可能基于为 libevent 提供改进的 HTTP API 的[libevtp ）。](https://github.com/ellzey/libevhtp)有关协议规范，请参阅[RFC 6455](https://www.rfc-editor.org/rfc/rfc6455)。

# google-app-engine - TransientFailureException --> 从拉队列中租用任务时

> ID：11322481
> 
> 赞同：3
> 
> 时间：2012-07-04T04:37:34.377
> 
> 标签：google-app-engine

我们在我们的场景中使用带有后端的拉取队列，并且我们的后端尝试在一些固定的时间间隔后从我们的拉取队列中租用任务，如果没有任务，它不做任何事情，如果有任何任务，则处理这些任务。昨天我们在我们的系统中遇到了这个 TransientFailureException，这正是在我的 servlet 试图从拉队列中租用任务时发生的。并且异常不断出现，直到我们停止后端。

我们的代码片段——

```
{
    Boolean leasedTaskFromFastQueue = true;
    Queue fastQueue = QueueFactory.getQueue("FastQueue");
    Queue slowQueue = QueueFactory.getQueue("SlowQueue");

    List<TaskHandle> tasks = fastQueue.leaseTasks(
        3600, TimeUnit.SECONDS, 1);

    TaskHandle taskHandle = null;

    if(tasks.size() > 0) {

        taskHandle = tasks.get(0);

    }
} 
```

我们在从 fastQueue 租用任务的行上没有收到错误，这是一个拉队列

```
<queue>
  <name>FastQueue</name>
  <mode>pull</mode>

</queue> 
```

我还粘贴了我的错误跟踪，以防万一

```
com.google.appengine.api.taskqueue.TransientFailureException:
    at           com.google.appengine.api.taskqueue.QueueApiHelper.translateError(QueueApiHelper.java:79)
    at com.google.appengine.api.taskqueue.QueueApiHelper.translateError(QueueApiHelper.java:139)
    at com.google.appengine.api.taskqueue.QueueApiHelper.makeSyncCall(QueueApiHelper.java:53)
    at com.google.appengine.api.taskqueue.QueueImpl.leaseTasksInternal(QueueImpl.java:709)
    at com.google.appengine.api.taskqueue.QueueImpl.leaseTasks(QueueImpl.java:731)
    at com.implementhit.advancedsupport.server.queue.Backend.doGet(Backend.java:50)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.bitdual.appengine.tools.datastore.server.NamespaceFilter.doFilter(NamespaceFilter.java:96)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T06:54:02.057

它也发生在我们身上，TransientFailureException 是一个内部错误，据我们所知，它与我们的代码无关。如果连续发生 50 个错误，我们最终会自动重新启动后端。

# mysql - MySQL 子查询 - MySQL 3.23

> ID：11322484
> 
> 赞同：1
> 
> 时间：2012-07-04T04:37:41.497
> 
> 标签：mysql, subquery

我有 2 张桌子，emp_master 和 passport_details。

```
emp_master(emp_id,first_name,email_id,dob,doj,status.........)
passport_details(id, emp_id,passport_number,given_name,......). 
```

我正在尝试从没有输入 passport_details 的 emp_master 中获取 emp_id 和 first_name。

我尝试了不同的子查询组合，使用 NOT IN，NOT EXISTS。

```
SELECT emp_id,first_name
FROM emp_master
WHERE emp_id NOT IN(SELECT emp_id FROM passport_details WHERE status=1); 
```

我收到错误

```
You have an error in your SQL syntax near 'SELECT emp_id FROM passport_details WHERE status=1)' at line 3 
```

**我正在使用 MySQL 3.23。**

我的问题是

> 1.  MySQL 3.23 是否支持子查询？
> 2.  从没有输入 passport_details 的 emp_master 中获取 emp_id 和 first_name 的最佳查询可能是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T04:42:15.543

```
select em.emp_id, em.first_name
from emp_master em left join passport_details pd
    on pd.emp_id = em.emp_id and pd.status = 1
where pd.emp_id is null 
```

我没有要测试的 3.23 实例，但这应该可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T04:44:37.547

一个快速的谷歌建议在 MySql 4.1 中引入了子查询。所以它们在 3.23 中不受支持。

你的东西是这样的：

```
SELECT emp_id,first_name
FROM emp_master
JOIN passport_details ON emp_id
WHERE status = 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T04:47:01.293

> 1.) MySQL 4.1 [SubQuery in MySQL添加了子查询](http://dev.mysql.com/doc/refman/4.1/en/subqueries.html)

您可以将查询重写为`JOIN`这样的语句。

```
SELECT a.emp_id,
       a.first_name
FROM emp_master a 
        LEFT JOIN passport_details b
           on a.emp_id = b.emp_id
WHERE a.`Status` = 1 AND
      b.emp_id IS NULL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T04:45:00.203

不，直到 4.1 才支持子查询：http: [//dev.mysql.com/doc/refman/4.1/en/mysql-nutshell.html](http://dev.mysql.com/doc/refman/4.1/en/mysql-nutshell.html)

# c++ - 如何确保 `waitpid(-1, &stat, WNOHANG)` 收集所有子进程

> ID：11322488
> 
> 赞同：3
> 
> 时间：2012-07-04T04:38:25.610
> 
> 标签：c++, process, network-programming, posix

*摘自 Unix Network Programming Vol1 第三版第 5.10 节 wait 和 waitpid 函数*

```
#include    "unp.h"    
void
sig_chld(int signo)
{
    pid_t   pid;
    int     stat;    
    while ( (pid = waitpid(-1, &stat, WNOHANG)) > 0) {
        printf("child %d terminated\n", pid);
    }
    return;
}

...
// in server code
Signal(SIGCHLD, sig_chld); // used to prevent any zombies from being left around
...

..
// in client code
The client establishes five connection with the server and then immediately exit
... 
```

参考[waitpid](http://linux.die.net/man/2/waitpid)：

> 返回值
> 
> waitpid()：成功时，返回状态发生变化的子进程ID；如果指定了 WNOHANG 并且存在一个或多个由 pid 指定的子（ren），但尚未更改状态，则返回 0。出错时，返回 -1。

根据上述文档，如果此时没有子进程终止，`waitpid`将返回。`0`如果我理解正确，这将导致语句中的函数`sig_chld`中断。`while`

问题> 那么我们如何保证这个信号处理程序可以确保收集所有终止的子进程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T04:59:16.160

```
while ( (pid = waitpid(-1, &stat, WNOHANG)) > 0) {
        printf("child %d terminated\n", pid); 
```

如果您没有要处理的孩子，您将不会在信号处理程序中。该循环是因为当您在处理程序本身中时，第二个或第三个孩子可能已更改或终止发送不会排队的 SIGCHLD。因此，循环实际上可以防止您错过那些可能死去的孩子。当此时没有更多的孩子要收割时，它将返回 0 或错误输出 -1 (ECHILD)。

# javascript - 使用 Superscrollorama 的 Javascript 页面擦除转换

> ID：11322489
> 
> 赞同：2
> 
> 时间：2012-07-04T04:38:48.080
> 
> 标签：javascript, transition

我想要做的是让页面的不同部分向上滑动并覆盖前一部分。[我在http://johnpolacek.github.com/superscrollorama/](http://johnpolacek.github.com/superscrollorama/)找到了我想做的事情，特别是“擦除它”部分。我尝试复制一些代码并包含相同的 javascript 文件。

在 Firefox 中，它可以工作。但是，在 Chrome 和 IE 中，当我尝试向下滚动时，滚动条会抖动并弹回页面顶部。

我没有把它放在网站上，但我确实有我正在使用的文件：[http ://www.mediafire.com/?h28etrbr5t24qyw](http://www.mediafire.com/?h28etrbr5t24qyw)

任何帮助（或更实用的替代方案）将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T05:34:58.413

是的，看起来很酷。我只是从头开始创建代码，这样你就可以得到你想要的。我刚刚创建了一些真正基本的东西。一个蓝色主 div 和一个红色 div 擦拭。显然，您可以在两个 div 上放置您想要的任何内容。代码如下：

```
<!doctype html>
<html>
  <head>
    <style type='text/css'>
      body{
        margin: 0px;
      }
      #wipeScreen{
        position: fixed;  
        width: 100%;                  
        background-color: red;
      }

      #mainScreen{
        position: absolute;
        background-color: blue;
        height: 200%;
        width: 100%;
      }
    </style>
    <script type='text/javascript'>
      var visHeight;
      function loadConstants(){
        visHeight = Math.ceil(document.getElementById("mainScreen").offsetHeight/2);
        var wipeScreen = document.getElementById("wipeScreen");
        wipeScreen.style.height = visHeight+"px";
        wipeScreen.style.top = -visHeight+"px";
        window.onscroll = runScroller;
      }
      function runScroller(){
        document.getElementById("wipeScreen").style.top = pageYOffset-visHeight+"px";
      }    
    </script>        
  </head>
  <body onload='loadConstants()'>
    <div id='mainScreen'></div>
    <div id='wipeScreen'></div>  
  </body>
</html> 
```

将其复制并粘贴到 HTML 文档中，您将明白我的意思

# c# - 为什么我的 System.Data.Entity 命名空间对于 c# 项目是空白的？

> ID：11322496
> 
> 赞同：0
> 
> 时间：2012-07-04T04:39:54.227
> 
> 标签：c#, asp.net-mvc

我正在研究 ac# asp.net MVC 项目。它是作为一个普通的旧 asp.net 项目提供给我的，我升级到 MVC 3。通常我将 vb.net 用于我的项目，但这是作为 ac# 交给我的项目。在我的所有项目中，我创建了一个使用泛型并且可以处理几乎所有基本情况的基础存储库，它引用的表由 System.Data.Entity 命名空间中的 IDbSet 类型的成员变量表示。这在我的 vb 项目中一直运行良好。在这个项目中，我收到一个编译错误，指出该类型无法识别，并询问我是否缺少 using 指令或程序集引用。

当我尝试像这样定义显式指定命名空间的变量时：

```
protected readonly System.Data.Entity.IDbSet mObjectSet; 
```

我仍然收到错误，我在 System. 和数据之后。但是一旦我输入实体。我什么都得不到。我试过清理和重建，重新启动 Visual Studio，重新启动我的电脑。谷歌似乎没有一个相关的问题。任何帮助是极大的赞赏！

编辑：

我应该提到我已经引用了 System.Data.Entity 的 4.0.0.0 版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T04:45:17.987

[IDbSet](http://msdn.microsoft.com/en-us/library/gg679233%28v=vs.103%29.aspx)接口存在于`EntityFramework.dll`程序集中（不在`System.Data.Entity.dll`程序集中，请注意！）。只需添加对它的引用（`References`项目树中的文件夹，然后右键单击并选择`Add reference`或使用 NuGet 包管理器，如果您已经安装它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:42:26.510

检查您是否有**System.Data.Entity**参考

**编辑**：我认为您需要版本 3.5.0.0 或 4.0.0.0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:28:02.653

另请注意，VS 2010 默认创建实体框架 4.0（在 System.data.entity 内）实体模型，而 VS 2012 创建实体框架 5.0（在 EntityFramework.dll 内）模型。

# windows-phone-7 - windows phone 8开发的文档和sdk

> ID：11322498
> 
> 赞同：1
> 
> 时间：2012-07-04T04:39:58.410
> 
> 标签：windows-phone-7, windows-phone-8

我开始为 windows phone 8 开发播放器。我在 appHub 上登录，可以访问 WP7 开发的文档和工具。WP8 和 WP7 之间似乎存在一些差异，例如，使用 WinRT API 代替 Silverlight 进行播放器开发。不知WP8的开发文档和sdks现在有没有。我在哪里可以得到它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T04:48:54.957

现在你只有 Microsoft Surface 的 SDK .. WP8 的 SDK 仍然不可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:34:09.080

wp8 的 sdk 仍然不可用，因此您现在将无法获得任何材料。

你只需要等待。

与此同时，您仍然可以继续为 wp7 进行开发，并在 sdk 发布后将其移植到 wp8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T17:06:41.960

您现在可以在此处下载 WP8 SDK 和文档：http:
[//www.microsoft.com/en-us/download/details.aspx?id= 35471](http://www.microsoft.com/en-us/download/details.aspx?id=35471)

# django - 在 Django/Python 中允许嵌入视频的方法是什么？

> ID：11322501
> 
> 赞同：3
> 
> 时间：2012-07-04T04:40:14.487
> 
> 标签：django, youtube, embed

我想允许使用 Django 显示嵌入的 youtube 视频（和其他常用的嵌入媒体）。Django中是否有允许这种情况发生？

上下文是我正在尝试显示 rss 项目，这些项目在给定项目中可能有也可能没有一个或多个嵌入视频。使用“安全”过滤器会丢弃它们，并编写一个返回 mark_safe(html) 的自定义过滤器，其中“html”是通过的项目，也会丢弃它们。有没有办法克服这个问题？

您是否必须从视图中的 rss 项目中提取嵌入的对象，然后将它们重新嵌入到模板中？

虽然我是 Django 新手，但我已经对这个主题进行了大量搜索，但还没有找到有用的答案。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T11:50:07.860

使用[django-embed-video](http://django-embed-video.readthedocs.org/en/latest/)。它为您提供所需的所有功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:56:20.517

我想出了这个问题的答案......我正在使用 feedparser，它正在删除某些内容。我最终添加了一个猴子补丁（我相信这是正确的术语）以允许更多材料通过：

```
feedparser._HTMLSanitizer.acceptable_elements.add("object")
feedparser._HTMLSanitizer.acceptable_elements.add("embed")
feedparser._HTMLSanitizer.acceptable_elements.add("iframe") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:04:23.130

1.  从 RSS 解析 youtube 链接
2.  将它们传递给模板
3.  使用此[http://djangosnippets.org/snippets/212/](http://djangosnippets.org/snippets/212/)模板标签将链接转换为嵌入代码

# android - 单击按钮时的Android侧面板

> ID：11322505
> 
> 赞同：0
> 
> 时间：2012-07-04T04:41:17.627
> 
> 标签：android, panel

在我的 Android 应用程序中，我希望在单击屏幕上的按钮时出现侧面板。我不知道该怎么做。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:51:12.457

使用slidingDrawer 找到下面的示例代码。主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout01"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/icon_image"
        android:gravity="bottom"
        android:orientation="vertical" >

         <ImageView
                android:id="@+id/imageVW"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:background="@drawable/vincent" >
            </ImageView>
        <SlidingDrawer
            android:id="@+id/SlidingDrawer"
            android:layout_width="wrap_content"
            android:layout_height="250dip"
            android:content="@+id/contentLayout"
            android:handle="@+id/slideHandleButton"
            android:padding="10dip" >

            <Button
                android:id="@+id/slideHandleButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/closearrow" >
            </Button>

            <LinearLayout
                android:id="@+id/contentLayout"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center|top"
                android:orientation="vertical"
                android:background="#ff00ff"
                android:padding="10dip" >

                <Button
                    android:id="@+id/Button01"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Content" >
                </Button>

                <Button
                    android:id="@+id/Button02"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:text="Content" >

                </Button>

                <Button
                    android:id="@+id/Button03"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Content" >
                </Button>
            </LinearLayout>
        </SlidingDrawer>

    </LinearLayout> 
```

滑动抽屉Example.java

```
 import android.app.Activity;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.SlidingDrawer;
    import android.widget.SlidingDrawer.OnDrawerCloseListener;
    import android.widget.SlidingDrawer.OnDrawerOpenListener;
    import android.widget.Toast;

    public class slidingDrawerExample extends Activity {

        Button slideHandleButton;
        SlidingDrawer slidingDrawer;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.main);
            slideHandleButton = (Button) findViewById(R.id.slideHandleButton);
            slidingDrawer = (SlidingDrawer) findViewById(R.id.SlidingDrawer);
            Button b = (Button) findViewById(R.id.Button01);
            b.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    Toast.makeText(getBaseContext(), "This is button 1", 9).show(); 
                }
            });

            slidingDrawer.setOnDrawerOpenListener(new OnDrawerOpenListener() {

                public void onDrawerOpened() {
                    slideHandleButton.setBackgroundResource(R.drawable.openarrow);
                }
            });

            slidingDrawer.setOnDrawerCloseListener(new OnDrawerCloseListener() {

                public void onDrawerClosed() {
                    slideHandleButton.setBackgroundResource(R.drawable.closearrow);
                }
            });

        }

    } 
```

# algorithm - 子集选择的贪心或动态算法

> ID：11322509
> 
> 赞同：4
> 
> 时间：2012-07-04T04:41:27.110
> 
> 标签：algorithm, dynamic, points, overlapping, greedy

我有一个简单的算法问题。如果你能帮助我，我将不胜感激。

我们有一些二维点。正权重与它们相关联（附有示例问题）。我们想要选择它们的一个子集来最大化权重，并且两个选定的点都不相互重叠（例如，在附件中，我们不能同时选择 A 和 C，因为它们在同一行中，并且以相同的方式我们不能同时选择 A 和 B，因为它们在同一列中。）如果有任何贪婪（或动态）方法我可以使用。我知道非重叠区间选择算法，但我不能在这里使用它，因为我的问题是二维的。

任何参考或注释表示赞赏。

问候

附件：问题的简单示例：

```

   A (30 美元) -------- B (10 美元)
   |
   |
   |
   |
   C (8$)

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:25:54.677

如果您对一个好的解决方案感到满意，并且不要求最好的解决方案 - 您可以使用**启发式算法**来解决这个问题。

设`S`为点集，和`w(s)`- 加权函数。

创建一个权重函数`W:2^S->R`（从 S 的子集到实数）：

```
W(U) =    - INFINITY                         is the solution is not feasible
          Sigma(w(u)) for each u in U        otherwise 
```

还要创建一个函数`next:2^S -> 2^2^S`（获取 的子集`S`并返回 的子集的函数`S`）

```
next(U) = V   you can get V from U by adding/removing one element to/from U 
```

现在，给定这些数据 - 您可以调用人工智能书中的任何优化算法，例如[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)或[爬山](http://en.wikipedia.org/wiki/Hill_climbing)算法。

例如，**Hill Climbing with random restarts**将是这样的：

```
1\. best<- -INFINITY
2\. while there is more time
3\. choose a random subset s
4\. NEXT <- next(s)
5\. if max{ W(v) | for each v in NEXT} < W(s): //s is a local maximum
   5.1\. if W(s) > best: best <- W(s) //if s is better then the previous result - store it.
   5.2\. go to 2\. //restart the hill climbing from a different random point.
6\. else:
   6.1\. s <- max { NEXT }
   6.2\. goto 4.
7\. return best //when out of time, return the best solution found so far. 
```

上述算法是[随时可用](http://en.wikipedia.org/wiki/Anytime_algorithm)的——这意味着如果给予更多时间，它将产生更好的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:19:49.250

这可以被视为线性分配问题，可以使用类似匈牙利算法的算法来解决。该算法试图最小化成本总和，因此只需否定您的权重，并将它们用作成本。将行分配给列将为您提供所需的点子集。对于并非每个（行，列）对都有关联点的情况，存在稀疏变体，但您也可以为此使用较大的正成本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T04:46:40.043

好吧，您可以将其视为二元约束优化问题，并且有各种算法。这个问题最简单的算法是回溯和弧传播。然而，在最坏的情况下，它需要指数级的时间。我不确定是否有任何特定的算法可以利用问题的几何性质。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T06:00:03.783

这可以通过具有指数时间复杂度的非常直接的动态规划方法来解决

```
s = {A, B, C ...}

getMaxSum(s) = max( A.value + getMaxSum(compatibleSubSet(s, A)),
                    B.value + getMaxSum(compatibleSubSet(s, B)),
                    ...) 
```

where`compatibleSubSet(s, A)`得到不与 A 重叠的 s 的子集

为了优化它，您可以记住每个子集的结果

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T06:47:10.777

一些方法来做到这一点：

*   编写一个函数，生成从最大权重到最小权重子集排序的子集，同时忽略约束。

*   然后重复调用此函数，直到弹出一个遵守约束的子集。

为了提高性能，您可以编写一个不那么愚蠢的生成器函数，例如尊重不在同一行上的约束，但忽略不在同一列上的约束。

# jquery - JQuery 和 MVC POST

> ID：11322512
> 
> 赞同：1
> 
> 时间：2012-07-04T04:42:02.627
> 
> 标签：jquery, asp.net-mvc-3

我有一个绑定到模型的 html 元素（使用 MVC3）

```
 <label id="total-amount">
             @Html.Encode(@Model.TotalAmount)
        </label> 
```

我在客户端使用 Jquery 修改值

```
 if (!$(this).is(':checked')) {

           var lblTotalAmount = $("#total-amount");
           var totalAmount = nationalPrice + recurPrice;
           lblTotalAmount.text(totalAmount.toFixed(2));

        } 
```

它工作正常。但是当我在我的控制器中发布 Model.TotalAmount 的值时..我通过 JQuery 修改的值没有反映......

```
 [HttpPost]
    [ActionName("Payment")]
    public ActionResult PaymentViaPost(PaymentVM viewModel)
    {
        //still the same value before JQuery modification
        var totalAmount = viewModel.TotalAmount; 
```

我是否在这里遗漏了一些东西，比如我需要使用 AJAX 或其他东西进行异步调用......如果它确实如此，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:10:32.300

标签中的文本不会发送到服务器，您需要使用某种输入控件。

我建议您使用隐藏控件，并让您的 JQuery 更新标签和隐藏输入。

例如

```
@Html.HiddenFor( x => x.TotalAmount)
<label id="total-amount">
     @Html.Encode(@Model.TotalAmount)
</label>

if (!$(this).is(':checked')) {
   var lblTotalAmount = $("#total-amount");
   var totalAmount = nationalPrice + recurPrice;
   lblTotalAmount.text(totalAmount.toFixed(2));

   var hiddenInput = $("#TotalAmount");
   hiddenInput.val(totalAmount);   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:01:46.120

我相信这可以通过以下方式实现：

1.  像您所做的那样从客户端更新 html 控件值
2.  使用`$.Post`jQuery 将更新后的值发送到 MVC 控制器（创建一个新的控制器来更新模型）
3.  在控制器操作中更新您的模型

模型更新后，它将反映在您的 UI 上。您的问题是您的模型未更新，因此`PaymentViaPost`操作将始终从模型中获取旧值

以下链接可能会有所帮助

[MVC3 和 jQuery](http://www.codeproject.com/Articles/75288/ASP-NET-MVC-and-jQuery-Part-3-Model-Binding)

[使用 jQuery 更新模型](https://stackoverflow.com/questions/1518417/how-to-send-a-model-in-jquery-ajax-post-request-asp-net-mvc)

# c - 在不使用迭代的情况下反转数组

> ID：11322514
> 
> 赞同：38
> 
> 时间：2012-07-04T04:42:12.563
> 
> 标签：c, algorithm

今天有人问我一个问题，我不相信这是可能的，但我可能是错的，或者我想多了。如何在不使用 C 中的迭代的情况下反转数组？

我的想法是这是不可能的，因为数组可以是任意大小，并且在不使用某种形式的迭代的情况下，没有任何 C 程序可以在考虑到这种支持的情况下表达。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-07-06T10:36:47.800

您的问题的答案是，**是的，可以在没有迭代的情况下反转数组**。问题本身的措辞可能模棱两可，但问题的精神是显而易见的：可以使用递归算法；*在这个意义上，递归*的含义一点也不含糊。

如果在与顶级公司的面试中，你被问到这个问题，那么下面的伪代码就足以证明你**真正理解**了递归的含义：

```
function reverse(array)

    if (length(array) < 2) then
        return array

    left_half = reverse(array[0 .. (n/2)-1])
    right_half = reverse(array[(n/2) .. (n-1)])

    return right_half + left_half

end 
```

例如，如果我们有一个包含 16 个元素的数组，其中包含拉丁字母的前 16 个字母 [A]..[P]，则上述反向算法可以可视化如下：

```
 Original Input

1\.                ABCDEFHGIJKLMNOP                   Recurse
2\.        ABCDEFGH                IJKLMNOP           Recurse
3\.    ABCD        EFGH        IJKL        MNOP       Recurse
4\.  AB    CD    EF    GH    IJ    KL    MN    OP     Recurse

5\. A  B  C  D  E  F  G  H  I  J  K  L  M  N  O  P    Terminate

6\.  BA    DC    FE    HG    JI    LK    NM    PO     Reverse
7\.    DCBA        HGFE        LKJI        PONM       Reverse
8\.        HGFEDCBA                PONMLKJI           Reverse
9\.                PONMLKJIHGFEDCBA                   Reverse

                  Reversed Output 
```

使用递归算法解决的任何问题都遵循**分而治**之的范式，即：

1.  问题被划分为 [两个或更多] 子问题，其中每个子问题都小于原始问题，但可以以与原始问题 ( **Divide** ) 类似的方式解决。

2.  问题分为 [两个或更多] 子问题，其中每个子问题都是独立的，可以递归解决，如果足够小（**征服**），也可以直接解决。

3.  问题被划分为 [两个或更多] 子问题，其中这些子问题的结果被组合以给出原始问题的解决方案（**组合**）。

上面用于反转数组的伪代码严格满足上述标准。因此，它可以被认为是一种递归算法，我们可以毫无疑问地声明，可以在不使用迭代的情况下对数组进行反转。

* * *

**附加背景信息
迭代、递归实现和递归算法之间的区别**

递归实现意味着算法是递归的，这是一个常见的误解。它们不是等价的。这是关于原因的明确解释，包括对上述解决方案的详细解释。

* * *

**什么是迭代和递归？**

早在 1990 年，计算机科学领域最受尊敬的三位现代算法分析学者[Thomas H. Cormen](http://mitpress.mit.edu/catalog/author/default.asp?aid=344)、[Charles E. Leiserson](http://mitpress.mit.edu/catalog/author/default.asp?aid=345)和[Ronald L. Rivest](http://mitpress.mit.edu/catalog/author/default.asp?aid=346)发表了他们广受好评*[的《算法导论》](http://mitpress.mit.edu/catalog/item/default.asp?ttype=2&tid=3440)*。在这本书中，它代表了 200 多本受人尊敬的文本的汇集，并且 20 多年来一直被用作世界上大多数一流大学教授算法的第一个也是唯一一个文本，Mssrs . Cormen、Leiserson 和 Rivest 明确说明了什么是*迭代*，什么是*递归*。

*在他们对两种经典排序算法Insertion Sort*和*Merge Sort*的分析和比较中，他们解释了迭代和递归算法的基本属性（有时称为**增量**算法以消除在相同上下文中使用[迭代](http://oxforddictionaries.com/definition/english/iteration?q=iteration)的经典数学概念时的歧义）。

首先，插入排序被归类为迭代算法，其行为总结如下：

> *对子数组 A[1.. j* -1]进行了排序后，我们将单个项 A[ *j* ] 插入到适当的位置，产生排序后的数组 A[ *1..j* ]。

*资料来源：[算法简介](http://mitpress.mit.edu/catalog/item/default.asp?ttype=2&tid=3440)- Cormen、Leisersen、Rivest，1990 年 MIT 出版社*

此语句将迭代算法分类为依赖于算法先前执行（“迭代”）的结果或状态的算法，然后使用此类结果或状态信息来解决当前迭代的问题。

另一方面，归并排序被归类为递归算法。递归算法符合称为**分而治**之的处理范式，该范式是一组三个基本标准，用于区分递归算法和非递归算法的操作。如果在处理给定问题期间，算法可以被认为是递归的：

1.  问题被划分为 [两个或更多] 子问题，其中每个子问题都小于原始问题，但可以以与原始问题 ( **Divide** ) 类似的方式解决。

2.  问题分为[两个或更多]子问题，其中每个子问题可以递归解决，或者如果足够小（**征服**），则可以直接解决。

3.  问题被划分为 [两个或更多] 子问题，其中这些子问题的结果被组合以给出原始问题的解决方案（**组合**）。

*参考：[算法简介](http://mitpress.mit.edu/catalog/item/default.asp?ttype=2&tid=3440)- Cormen, Leisersen, Rivest, 1990 MIT Press*

迭代算法和递归算法都会继续工作，直到达到*终止条件*。插入排序的终止条件是第*j*项已正确放置在数组 A[ *1..j* ] 中。分治算法的终止条件是范式的标准 2“触底”，即子问题的大小达到足够小的大小，无需进一步细分即可解决。

重要的是要注意分而治之范式要求子问题必须以与原始问题类似的方式可解决，以允许递归。由于原始问题是一个独立问题，没有外部依赖，因此子问题也必须是可解决的，就好像它们是没有外部依赖的独立问题一样，*特别是在其他子问题上*。这意味着分治算法中的子问题应该是自然**独立**的。

相反，同样重要的是要注意迭代算法的输入基于算法的先前迭代，因此必须按顺序考虑和处理。这会在迭代之间产生依赖关系，从而阻止算法将问题划分为可以递归解决的子问题。例如，在插入排序中，您不能将项目 A[1.. *j* ] 分成两个子集，以使 A[ *j* ] 数组中的排序位置在所有项目 A[1.. *j* -1之前确定] 已被放置，因为 A[ *j* ] 的真正正确位置可能会在 A[1.. *j* -1] 中的任何一个被放置时移动。

**递归算法与递归实现**

*对递归*一词的普遍误解源于这样一个事实，即对某些任务的递归*实现*自动意味着问题已通过递归*算法*得到解决，这是一个常见且错误的假设。递归*算法*与递归*实现*不同，而且从来都不是。

递归实现涉及一个函数或一组函数，它们最终调用自身，以便以与解决整个任务完全相同的方式解决整个任务的子部分。递归*算法*（即，那些满足分而治之范式的），很适合递归实现。但是，递归算法可以仅使用迭代构造来实现`for(...)`，`while(...)`因为所有算法，包括递归算法，最终都会重复执行某些任务以获得结果。

这篇文章的其他贡献者已经完美地证明了迭代算法可以使用递归函数来实现。事实上，递归实现对于涉及迭代直到满足某个终止条件的*所有事情都是可能的。**在底层算法*中没有 Divide 或 Combine 步骤的递归实现等效于具有标准终止条件的迭代实现。

以插入排序为例，我们已经知道（并且已经证明）插入排序是一种迭代算法。但是，这并不妨碍插入排序的递归*实现*。实际上，可以很容易地创建递归实现，如下所示：

```
function insertionSort(array)

    if (length(array) == 1)
        return array
    end

    itemToSort = array[length(array)]
    array = insertionSort(array[1 .. (length(array)-1)])

    find position of itemToSort in array
    insert itemToSort into array

    return array

end 
```

可以看出，实现是递归的。但是，插入排序是一种迭代算法，我们知道这一点。那么，我们怎么知道即使使用上面的递归实现，我们的插入排序算法也没有变成递归的呢？让我们将分而治之范式的三个标准应用于我们的算法和检查。

1.  问题被分成[两个或更多]子问题，其中每个子问题小于原始问题，但可以以与原始问题类似的方式解决。

    **YES**：不包括长度为 1 的数组，将项 A[ *j* ] 插入数组中适当位置的方法与将所有先前项 A[ *1..j* -1] 插入数组的方法相同。

2.  问题被划分为[两个或更多]子问题，其中每个子问题都是独立的，可以递归解决，如果足够小，也可以直接解决。

    **否：项目 A[** *j* ]的正确放置完全*取决于*包含 A[1.. *j* -1] 项目的数组以及正在排序的项目。因此，在处理数组的其余部分之前，不会将项 A[ *j* ]（称为*itemToSort*）放入数组中。

3.  问题被分成[两个或更多]子问题，其中这些子问题的结果被组合起来以给出原始问题的解决方案。

    **NO**：作为一种迭代算法，只有一个项目 A[ *j* ] 可以正确放置在任何给定的迭代中。空间 A[1.. *j* ] 没有被划分为子问题，其中 A[1]、A[2]...A[ *j* ] 都被适当地独立放置，然后所有这些适当放置的元素组合起来给出排序大批。

显然，我们的递归实现并没有使插入排序算法本质上是递归的。实际上，在这种情况下，实现中的递归起到了*流控制*的作用，允许迭代继续进行，直到满足终止条件。因此，使用递归实现并没有将我们的算法更改为递归算法。

**在不使用迭代算法的情况下反转数组**

因此，既然我们了解了是什么使算法迭代，又是什么使一个递归，那么我们如何“不使用迭代”来反转一个数组呢？

有两种方法可以反转数组。这两种方法都要求您提前知道数组的长度。迭代算法因其效率而受到青睐，其伪代码如下所示：

```
function reverse(array)

    for each index i = 0 to (length(array) / 2 - 1)
        swap array[i] with array[length(array) - i]
    next

end 
```

这是一个纯粹的迭代算法。*让我们通过将其与决定算法递归*性的分而治之范式进行比较来检验为什么我们可以得出这个结论。

1.  问题被分成[两个或更多]子问题，其中每个子问题小于原始问题，但可以以与原始问题类似的方式解决。

    **YES**：数组的反转被分解为最细的粒度、元素，并且每个元素的处理与所有其他处理的元素相同。

2.  问题被划分为[两个或更多]子问题，其中每个子问题都是独立的，可以递归解决，如果足够小，也可以直接解决。

    **YES ：数组中元素***i*的反转是可能的，而不需要元素*(i + 1)*（例如）是否反转。此外，数组中元素*i*的反转不需要其他元素反转的结果即可完成。

3.  问题被分成[两个或更多]子问题，其中这些子问题的结果被组合起来以给出原始问题的解决方案。

    **NO**：作为一种迭代算法，每个算法步骤只执行一个计算阶段。它不会将问题划分为子问题，也不会合并两个或多个子问题的结果以获得结果。

我们上面第一个算法的上述分析证实它不符合分治范式，因此不能被认为是递归算法。然而，由于标准 (1) 和标准 (2) 都得到满足，显然递归算法是可能的。

关键在于我们迭代解决方案中的子问题具有最小可能的粒度（即元素）。通过将问题划分为越来越小的子问题（而不是从一开始就追求最细粒度），然后合并子问题的结果，可以使算法递归。

例如，如果我们有一个包含 16 个元素的数组，其中包含拉丁字母 (A..P) 的前 16 个字母，则递归算法在视觉上看起来如下所示：

```
 Original Input

1\.                ABCDEFHGIJKLMNOP                   Divide
2\.        ABCDEFGH                IJKLMNOP           Divide
3\.    ABCD        EFGH        IJKL        MNOP       Divide
4\.  AB    CD    EF    GH    IJ    KL    MN    OP     Divide

5\. A  B  C  D  E  F  G  H  I  J  K  L  M  N  O  P    Terminate

6\.  BA    DC    FE    HG    JI    LK    NM    PO     Conquer (Reverse) and Merge
7\.    DCBA        HGFE        LKJI        PONM       Conquer (Reverse) and Merge
8\.        HGFEDCBA                PONMLKJI           Conquer (Reverse) and Merge
9\.                PONMLKJIHGFEDCBA                   Conquer (Reverse) and Merge

                  Reversed Output 
```

从顶层开始，16 个元素逐渐分解为大小完全相同的较小子问题（级别 1 到 4），直到我们达到子问题的最细粒度；正向排列的单位长度数组（第 5 步，单个元素）。此时，我们的 16 个数组元素看起来仍然是有序的。但是，它们同时也是反转的，因为单个元素数组本身也是反转数组。然后将单元素数组的结果合并得到八个长度为 2 的反向数组（步骤 6），然后再次合并得到四个长度为 4 的反向数组（步骤 7），依此类推，直到我们的原始数组被重构反过来（步骤 6 到 9）。

递归算法反转数组的伪代码如下所示：

```
function reverse(array)

    /* check terminating condition. all single elements are also reversed
     * arrays of unit length.
     */
    if (length(array) < 2) then
        return array

    /* divide problem in two equal sub-problems. we process the sub-problems
     * in reverse order so that when combined the array has been reversed.
     */
    return reverse(array[(n/2) .. (n-1)]) + reverse(array[0 .. ((n/2)-1)])

end 
```

正如您所看到的，该算法将问题分解为子问题，直到它达到子问题的最细粒度，从而提供即时结果。然后在合并结果时反转结果以提供反转的结果数组。虽然我们认为这个算法是递归的，但让我们应用分治算法的三个标准来确认。

1.  问题被分成[两个或更多]子问题，其中每个子问题小于原始问题，但可以以与原始问题类似的方式解决。

    **YES**：可以使用与级别 2、3、4 或 5 完全相同的算法在级别 1 反转数组。

2.  问题被划分为[两个或更多]子问题，其中每个子问题都是独立的，可以递归解决，如果足够小，也可以直接解决。

    **是**：每个不是单位长度的子问题都可以通过将问题分成两个独立的子数组并递归地反转这些子数组来解决。单位长度数组（可能的最小数组）本身是反转的，因此提供了终止条件和保证的第一组组合结果。

3.  问题被分成[两个或更多]子问题，其中这些子问题的结果被组合起来以给出原始问题的解决方案。

    **是**：第 6、7、8 和 9 级的每个问题仅由上一级的结果组成；即他们的子问题。在每个级别上反转阵列会导致总体上反转的结果。

可以看出，我们的递归算法通过了分治范式的三个标准，因此可以被认为是真正的递归算法。因此，*可以在不使用迭代算法的情况下反转数组。*

有趣的是，我们最初的数组反转迭代算法可以使用递归函数来*实现。*这种实现的伪代码如下：

```
function reverse(array)

    if length(array) < 2
        return
    end

    swap array[0] and array[n-1]
    reverse(array[1..(n-1)])

end 
```

这类似于其他海报提出的解决方案。这是一个递归*实现*，因为定义的函数最终会调用自身以对数组中的所有元素重复执行相同的任务。然而，这并**没有**使*算法*递归，因为没有将问题划分为子问题，也没有合并子问题的结果来给出最终结果。在这种情况下，递归只是被用作流控制结构，并且在算法上可以证明整体结果以完全相同的顺序执行相同的步骤序列，与为解决方案。

**这就是迭代算法**、**递归算法**和**递归实现**之间的区别。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-04T05:06:34.497

正如人们在评论中所说，这取决于迭代的定义。

## 案例 1\. 迭代作为一种编程风格，不同于递归

如果将递归（简单地）作为迭代的*替代方案*，那么 Kalai 提出的递归解决方案就是正确的答案。

## 案例 2\. 迭代作为下限线性时间

如果将迭代视为“检查每个元素”，那么问题就变成了数组反转是否需要线性时间还是可以在亚线性时间内完成。

为了表明没有用于数组反转的次线性算法，请考虑具有*n 个*元素的数组。假设存在不需要读取每个元素的反转算法*A。*然后存在`a[i]`一些算法从不读取`i`的元素`0..n-1`，但仍然能够正确反转数组。（**编辑**：我们必须排除奇数长度数组的中间元素——请参阅此范围内的以下评论——请参阅下面的评论——但这不会影响算法在渐近情况下是线性的还是次线性的。）

由于算法从不读取元素`a[i]`，我们可以更改它的值。说我们这样做。然后，该算法根本没有读取过这个值，它将产生与我们改变它的值之前相同的反转答案。但是这个答案对于 的新值是不正确的`a[i]`。因此，不存在至少不读取每个输入数组元素（保存一个）的正确反转算法。因此，数组反转的下限为 O(n)，因此*需要*迭代（根据此场景的工作定义）。

（请注意，此证明仅适用于数组反转，并没有扩展到真正具有亚线性实现的算法，例如二分查找和元素查找。）

## 案例 3\. 作为循环结构的迭代

如果将迭代视为“循环直到满足条件”，那么这将转换为具有条件跳转的机器代码，已知需要一些严重的编译器优化（利用分支预测等）在这种情况下，有人问是否存在做一些“没有迭代”的方法可能会考虑*循环展开*（到直线代码）。在这种情况下，您原则上可以编写直线（无循环）C 代码。但这种技术并不通用；仅当您事先知道数组的大小时，它才有效。（很抱歉将这个或多或少轻率的情况添加到答案中，但我这样做是为了完整性，因为我听说过以这种方式使用的术语“迭代”，而循环展开是一个重要的编译器优化。）

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-04T04:47:16.860

**使用递归函数。**

```
void reverse(int a[],int start,int end)
{
     int temp;
     temp = a[start];
     a[start] = a[end];
     a[end] = temp;

    if(start==end ||start==end-1)
       return;
    reverse(a, start+1, end-1);
} 
```

只需将上述方法称为**reverse(array,0,lengthofarray-1)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-29T14:47:39.547

实现一个递归函数来反转一个排序的数组。即，给定数组 [1, 2, 3, 4, 5]，您的过程应该返回 [5, 4, 3, 2, 1]。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-28T10:13:02.197

这是一个在 javascript 函数中使用递归的巧妙解决方案。它不需要数组本身以外的任何参数。

```
/* Use recursion to reverse an array */
function reverse(a){
    if(a.length==undefined || a.length<2){
        return a;
    }
    b=[];
    b.push(reverse(copyChop(a)));
    b.push(a[0]);
    return b;
    /* Return a copy of an array minus the first element */
    function copyChop(a){ 
        b=a.slice(1); 
        return b;
    }
} 
```

如下调用它；

```
reverse([1,2,3,4]); 
```

请注意，如果您不使用嵌套函数 copyChop 进行数组切片，您最终会得到一个数组作为最终结果中的第一个元素。不太清楚为什么会这样

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-13T02:35:11.813

```
 #include<stdio.h>

   void rev(int *a,int i,int n)
  {

if(i<n/2)
{
    int temp = a[i];
    a[i]=a[n-i-1];
    a[n-i-1]=temp;
    rev(a,++i,n);
 }
}
int main()
    {
    int array[] = {3,2,4,5,6,7,8};
   int len = (sizeof(array)/sizeof(int));
   rev(array,0,len);    
   for(int i=0;i<len;i++)
   {
    printf("\n array[%d]->%d",i,array[i]);
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-13T19:53:02.383

一种解决方案可能是：

```
#include <stdio.h>
#include <stdlib.h>

void swap(int v[], int v_start, int v_middle, int v_end) {
    int *aux = calloc(v_middle - v_start, sizeof(int));

    int k = 0;
    for(int i = v_start; i <= v_middle; i++) {
        aux[k] = v[i];
        k = k + 1;
    }

    k = v_start;
    for(int i = v_middle + 1; i <= v_end; i++) {
        v[k] = v[i];
        k = k + 1;
    }

    for(int i = 0; i <= v_middle - v_start; i++) {
        v[k] = aux[i];
        k = k + 1;
    }
}

void divide(int v[], int v_start, int v_end) {
    if(v_start < v_end) {
        int v_middle = (v_start + v_start)/2;
        divide(v, v_start, v_middle);
        divide(v, v_middle + 1, v_end);
        swap(v, v_start, v_middle, v_end);
    }
}

int main() {
    int v[10] = {4, 20, 12, 100, 50, 9}, n = 6;

    printf("Array: \n");
    for (int i = 0; i < n; i++) {
        printf("%d ", v[i]);
    }
    printf("\n\n");

    divide(v, 0, n - 1);

    printf("Reversed: \n");
    for (int i = 0; i < n; i++) {
        printf("%d ", v[i]);
    }

    return 0;
} 
```

# iis-7 - http error 500.19 - internal error 请求的页面无法访问，因为该页面的相关配置数据无效

> ID：11322520
> 
> 赞同：1
> 
> 时间：2012-07-04T04:42:37.657
> 
> 标签：iis-7, asp-classic

我创建并部署了经典的 ASP 站点，当我在 IE 中测试时，我得到了这个：

> HTTP 错误 500.19 - 内部服务器错误
> 描述：无法访问请求的页面，因为该
> 页面的相关配置数据无效。
> 
> 错误代码：0x8007000b7
> 
> 通知：ExecuteRequestHandler
> 
> 模块：DefaultDocumentModule
> 
> 请求的 URL：localhost:80/bikes/
> 
> 物理路径：D:\BIKES\
> 登录用户：匿名
> 
> 登录方式：匿名
> 
> 处理程序：静态文件
> 
> 配置错误：无法添加类型为“add”且唯一键属性“value”设置为“index.asp”的重复集合条目
> 
> 配置文件：\?\D:\BIKES\web.config
> 
> 配置来源：
> 6：`<files>`
> 7： `<add value="index.asp" />`
> 8：`</files>`

这是我的 web.config：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <configuration>
    <system.webServer>
        <directoryBrowse enabled="false" />
        <defaultDocument>
          <files>
            <add value="index.asp" />
          </files>
        </defaultDocument>
        <security>
            <authorization>
                <remove users="*" roles="" verbs="" />
                <add accessType="Allow" users="*" roles="" />
            </authorization>
        </security>
    </system.webServer>
    <connectionStrings>
        <remove name="LocalSqlServer" />
    </connectionStrings>
  </configuration> 
```

我试图删除标记文件在 D:\bikes 和 system/inetpub/wwwroot/web.config 中的 web.config 中添加值，但它仍然是相同的错误。请任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:43:20.330

从 web.config 中删除 defaultDocument 元素，或者在 defaultDocument 元素的开头放置一个 clear 元素。

**编辑**：

我再试一次。你有这个错误：

> 配置错误：无法添加类型为“add”且唯一键属性“value”设置为“index.asp”的重复集合条目

请注意，它抱怨值为“index.asp”的内容是集合中已有项目的副本，因此无法添加。

配置中有什么值为“index.asp”？在主 web.config 你有这个：

```
 <defaultDocument> 
      <files> 
        <add value="index.asp" /> 
      </files> 
    </defaultDocument> 
```

默认情况下，这很公平，机器级配置在此集合中不包含“index.asp”，因此可以正常工作。

但是你的自行车文件夹中的 Web.config 也有：

```
<files>  
    <add value="index.asp" />  
</files> 
```

现在重要的是要注意，对于子文件夹，父文件夹（包括您的主 web.config）中的任何 web.configs 都将被加载。当 IIS 尝试加载此自行车文件夹 web.config 时，您要求它再次将值“index.aspx”添加到默认文档文件集合中。

因此，解决方法是`<defaultDocument>`从自行车 web.config 中删除元素，它正在尝试做的工作已经完成。

# git - 回滚到 Mercurial 中的旧版本（如 git reset）

> ID：11322532
> 
> 赞同：7
> 
> 时间：2012-07-04T04:44:14.327
> 
> 标签：git, version-control, mercurial

使用 git，我可以使用类似的命令丢弃错误或意外的提交

```
git reset --soft HEAD^ 
```

它将当前分支（例如`master`）重置为当前修订的父提交`HEAD^`，而不触及工作树 -如果您也想删除工作树，您可以替换为`--soft`。`--hard`

另外，如果我想摆脱多个提交，我可以使用类似的命令

```
git reset --hard 53b94d0 
```

这让我回到了提交 53b94d0 的状态，就好像在那之后我从未提交过任何事情一样。

什么是汞 (hg) 等价物？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-04T04:44:15.263

尽管 Mercurial 没有提供简单的替代方案并且回避可变历史的想法，但有几种方法可以实现接近的目标。在这篇文章中，我将概述其中的一些。

# hg回滚

如果您特别想撤消上一次提交，可以使用：

```
hg rollback 
```

`hg revert --all`这将撤消提交（它不会触及工作树 - 如果您也`hg update -C`想重置整个工作目录，您应该能够跟随它）。

# hg克隆-r

假设您要将调用的存储库重置`giraffe`为修订版 77182fb7451f。如果您`cd`进入父目录并运行：

```
hg clone -r 77182fb7451f giraffe new-giraffe
cp giraffe/.hg/hgrc new-giraffe/.hg/ 
```

然后你会得到 new-giraffe，一个版本为 77182fb7451f 的存储库。（`cp`有必要确保 new-giraffe `paths`（如 git 的“遥控器”）正确指向原始存储库，而不是`giraffe`默认情况下指向的文件夹。）

这比从 Internet 重新克隆要快，因为它仅将文件复制到本地磁盘上（在许多系统上，硬链接它们以节省更多时间和空间），但如果您的存储库很大，仍然可能非常耗时。

# 汞条

如果您想通过修改提交历史来做更复杂的事情（顺便说一下，这在 hg 世界中有点不受欢迎），首先通过将以下行添加到您的（无需指定路径）来启用[Mercurial Queues 扩展](https://www.mercurial-scm.org/wiki/MqExtension/)`.hgrc`等号后）：

```
[extensions]                                                                    
mq = 
```

这为您（以及其他有用的东西）`hg strip`提供了从存储库中完全删除变更集及其所有后代的命令。因此，您可以使用如下命令：

```
hg strip 1cc72d33ea76 
```

如果 1cc72d33ea76 是存储库中要删除的第一个“坏”变更集。

不幸的是，使用这种方法通常很难删除完全正确的变更集，而且很容易得到多个头（您可以使用查看`hg heads`），需要繁琐的重复应用`hg strip`才能到达您想要的位置额外的头。

# 使用 revsets 的 hg 条带

使用[hg revsets](https://www.mercurial-scm.org/repo/hg/help/revsets)您可以使用以下命令删除`.`（当前修订版）的所有祖先，这些祖先*不是*您要恢复到的修订版的祖先：

```
hg strip "ancestors(.) and not ancestors(77182fb7451f)" 
```

确保首先运行：

```
hg log -r "ancestors(.) and not ancestors(77182fb7451f)" 
```

这将向您显示所有`hg strip`将删除的变更集，因此您可以确保不会对您的提交历史造成不可挽回的损害（因为您有备份......对吗？）。

# iphone - Iphone Development : MapKit ，如何在没有针杆的情况下添加针脚？

> ID：11322537
> 
> 赞同：1
> 
> 时间：2012-07-04T04:44:46.183
> 
> 标签：iphone, mapkit

在 Mapkit 上，

我想知道是否可以添加一个没有其茎的图钉，就像它只反映我们地图中的针头，而不是使用图像顺便说一句。

亲切的谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:50:17.043

是的，有可能。为此，您必须使用`MKAnnotationView`而不是`MKPinAnnotationView`. 并且不要使用 annotation.animatesDrop 属性。

以下是您可以使用的示例代码`viewForAnnotation`，

```
 annotation = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"try"];
    annotation.canShowCallout = YES;

    annotation.image = [UIImage imageNamed:@"image.png"];

    return annotation; 
```

希望这可以帮助。

我看到你对堆栈溢出很陌生。确保将此答案或任何其他答案标记为正确答案。

# python - 使用 Pyinstaller 包含目录

> ID：11322538
> 
> 赞同：39
> 
> 时间：2012-07-04T04:44:50.090
> 
> 标签：python, installation, include, pyinstaller, packaging

Pyinstaller 的所有文档都谈到了包括单个文件。是否可以包含一个目录，或者我应该编写一个函数来通过遍历我的包含目录来创建包含数组？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2017-02-06T06:41:17.367

我很惊讶没有人提到官方支持的选项使用`Tree()`：

[https://stackoverflow.com/a/20677118/2230844](https://stackoverflow.com/a/20677118/2230844)

[https://pyinstaller.readthedocs.io/en/stable/advanced-topics.html#the-toc-and-tree-classes](https://pyinstaller.readthedocs.io/en/stable/advanced-topics.html#the-toc-and-tree-classes)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-20T07:24:37.183

在规范文件中粘贴以下内容`a = Analysis()`以递归遍历目录并将其中的所有文件添加到分发中。

```
##### include mydir in distribution #######
def extra_datas(mydir):
    def rec_glob(p, files):
        import os
        import glob
        for d in glob.glob(p):
            if os.path.isfile(d):
                files.append(d)
            rec_glob("%s/*" % d, files)
    files = []
    rec_glob("%s/*" % mydir, files)
    extra_datas = []
    for f in files:
        extra_datas.append((f, f, 'DATA'))

    return extra_datas
###########################################

# append the 'data' dir
a.datas += extra_datas('data') 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-05-14T15:19:45.110

是的，您只需将目录添加到 Analysis 对象，它们就会被复制。

```
a = Analysis(['main.py'],
             datas = [('test/dir', 'test/dir')],
             ...) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-04T04:59:00.630

只是使用`glob`呢？

```
from glob import glob
datas = []
datas += glob('/path/to/filedir/*')
datas += glob('/path/to/textdir/*.txt')
...

a.datas = datas 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-11-30T16:21:48.493

问题比你想象的要容易

试试这个： `--add-data="path/to/folder/*;."`

希望能帮助到你 ！！！

# javascript - 如何使用 javascript 进行 24 小时验证维护 12 小时格式？

> ID：11322542
> 
> 赞同：0
> 
> 时间：2012-07-04T04:44:58.450
> 
> 标签：javascript, validation

在我的网络应用程序表单中，我有两个字段称为 startTime，closeTime，它们在表的每一行中重复。现在我要验证从第一行的 startTime 到最后一行的 closeTime 的 24 小时（1440 分钟）。但用户输入12 小时格式的时间表示如果第一行的 startTime 是上午 08:00，那么我要检查到第二天上午 08:00（我要转换为分钟的每一件事）。我尝试了多种方式，但无法计算缺失在上午到下午/下午到上午请帮助我。以下是我的代码（点击它会被调用的每一行的第一列）

```
var timeArray=[""],timeArray1=[""],timeNoon,closeNoon,temp=0,sumTime=0; 
function checkTime(){
var startTime,closeTime;
if(rowIndex!=0){//rowIndex is current row index
                    startTime=document.getElementById("logSheetDataTable").rows[rowIndex-1].cells[j].childNodes[0].tBodies[0].rows[0].cells[1].childNodes[0].value;
                    closeTime = document.getElementById("logSheetDataTable").rows[rowIndex-1].cells[j].childNodes[0].tBodies[0].rows[1].cells[1].childNodes[0].value;

                    timeNoon=startTime.substring(6);//to get am or pm
                    startTime = startTime.substring(0,5);//to get tome 08:00
                    timeArray = startTime.split(":");

                    closeNoon=closeTime.substring(6);//to get am or pm
                    closeTime1=closeTime.substring(0,5);
                    timeArray1=closeTime1.split(":");

                    if(timeNoon.toLowerCase()=="pm"){
                        startMin=parseInt((timeArray[0]*60))+parseInt(timeArray[1])+720;
                    }else if(timeNoon.toLowerCase()=="am"){
                        startMin=parseInt((timeArray[0]*60))+parseInt(timeArray[1]);
                    }

                    if(closeNoon.toLowerCase()=="pm"){
                        endMin=parseInt((timeArray1[0]*60))+parseInt(timeArray1[1]+720);
                    }else if(closeNoon.toLowerCase()=="am"){
                        endMin=parseInt((timeArray1[0]*60))+parseInt(timeArray1[1]);
                    }

                    if(startMin<endMin){
                        temp=endMin-startMin;
                    }else if(startMin>endMin){
                        temp=(1440-startMin)+endMin;
                    }

                    sumTime=sumTime+temp;
                    alert("sum: "+sumTime);
} 
```

对于 sumTime 我已经检查了 1440 分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:11:56.577

听起来你有一张看起来像这样的表：

```
START      END
08:00 am    10:00 am
10:00 am    03:00 pm
03:00 pm    08:00 am 
```

你是说你想验证从第一行的 START 到最后一行的 END 已经过去了 24 小时。如果这就是你想做的全部，那么你的代码的其余部分是什么*？*

您在代码中得到的计算看起来像是您将行中每个 START 和 END 之间的时间相加，然后将这些相加，大概是为了检查您是否需要 24 小时。您没有检查第一个 START + 最后一个 END，所以这是否有效（三个 8 小时 ==24）？

```
START      END
01:00 am    09:00 am
01:00 am    09:00 am
01:00 am    09:00 am 
```

当您拆分字符串时，您总是取前 5 个字符并假设它们的格式为`HH:MM`. 这是否总是正确的（你永远不会遇到例如`0`前缀丢失的时间，所以你有`8:00am`？你确定在时间之后，在上午/下午之前总是有 1 个空格吗？你确定上午/下午之后什么都没有？所有这些都会影响您的字符串解析是否正常工作......

你提取数字的一些方法在我看来有点狡猾。例如：

```
startMin=parseInt((timeArray[0]*60))+parseInt(timeArray[1])+720; 
```

仔细看括号。您调用`parseInt`. `(timeArray[0]*60)`在您尝试进行数学运算之前，大概应该调用它：

```
startMin=(parseInt(timeArray[0])*60)+parseInt(timeArray[1])+720; 
```

这是您的许多电话的常见问题`parseInt`，可能会导致一些意想不到的问题......

现在，查看单行上每个开始和结束之间的时间差的计算......

如果时间是下午，则添加十二小时（720 分钟）以将其转换为 24 小时制。您似乎正在尝试这样做，同时您也在将其转换为分钟。

现在，您有三种情况。

1.  START == END - 这将是 0 或 24 小时，目前您似乎不满足于此。
2.  START > END - 一天在 START 时间和 END 时间之间翻转。因此，您需要计算（到一天结束的时间）+ END 时间。因此，在几分钟内，您将拥有`1440 - startMin + endMin`. 您似乎正确地执行了此操作...
3.  END > START - End 比开始晚，所以你只需要区别：`endMin - startMin`，你似乎再次正确地做这件事。

所以，你的代码一定有问题。我有一点[麻烦](http://jsfiddle.net/CcDzx/)，它变成了我们的问题基本上是你的包围。因为你把它们放在错误的地方，你的数字有时被用作字符串 + 其他数字，所以有时你得到的不是加法，而是值的串联，这会让你离开......

相关的修复是：

```
if(timeNoon.toLowerCase()=="pm"){
    startMin=(parseInt(timeArray[0])*60)+parseInt(timeArray[1])+720;
}else if(timeNoon.toLowerCase()=="am"){
    startMin=(parseInt(timeArray[0])*60)+parseInt(timeArray[1]);
}                       

if(closeNoon.toLowerCase()=="pm"){                
    endMin=(parseInt(timeArray1[0])*60)+parseInt(timeArray1[1])+720;
}else if(closeNoon.toLowerCase()=="am"){
    endMin=(parseInt(timeArray1[0])*60)+parseInt(timeArray1[1]);
} 
```

# asp.net - ， 带着 项目，如何将目录插入 ImageUrl='<%# Eval("StatusImage") %>'？

> ID：11322546
> 
> 赞同：0
> 
> 时间：2012-07-04T04:45:14.157
> 
> 标签：asp.net

我有一个带有`<asp:TemplateField ...`> 列的 GridView。在那个 TemplateField 里面，我有一个`<asp:Image ... >`由 DataSource 列动态设置的 whos 图像。例如：

```
<asp:TemplateField HeaderText="Status">
  <ItemTemplate>
  <asp:Image ID="Image1" runat="server" ImageUrl='<%# Eval("StatusImage").ToString() %>' />
  </ItemTemplate>
</asp:TemplateField> 
```

`ImageUrl='<%# Eval("StatusImage").ToString() %>'`需要以某种方式附加一个目录（“Images/”），但如何？我已经尝试了我能想到的一切......有什么建议吗？

非常感谢您的帮助！史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:56:04.563

试试这个，但我不确定你是否需要在那里使用字符串

```
ImageUrl='<%# Eval("StatusImage", "~/Images/{0}").ToString() %>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:04:00.007

您可以以多种格式执行此操作，例如

```
ImageUrl='<%# "~/Images/" & Eval("StatusImage").ToString() %>' 
```

或者

```
ImageUrl='<%# getImagePath(Eval("StatusImage").ToString()) %>' 
```

在后面的代码中

```
function getImagePath(ByVal ImageName as string) as string
  return "~/Images/" & ImageName 
end function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T09:21:30.587

您最好在数据库中插入“images/”以及文件名。这将正常工作。

# android - 如何在android中放大、缩小、拖放和旋转图像视图？

> ID：11322548
> 
> 赞同：-2
> 
> 时间：2012-07-04T04:45:29.277
> 
> 标签：android, drag-and-drop, zooming, pinchzoom

如果有人想捏缩放，放大，缩小，旋转（左和右），拖放图像视图，请帮助我，如果有人有想法，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:27:25.547

您可以在[此处](http://www.codeproject.com/Articles/319401/Simple-Gestures-on-Android)找到一篇从初学者角度讨论 Android 上的多点触控手势的文章。它展示了一种允许“标准”手势（例如滑动移动和捏合缩放）的方法，但也试图超越这些手势并尝试转向旋转。源代码也附上了，[这里](http://www.youtube.com/watch?v=Se7Si9VwKYY)有一个演示，展示了本文中开发的一些功能

[这里](https://github.com/jasonpolites/gesture-imageview/blob/master/main/src/com/polites/android/GestureImageView.java)还有一个使用一些手势功能的自定义 ImageView，您可以在代码中使用它

# jquery - 如何在 mvc3 操作链接中使用 jquery 添加删除类？

> ID：11322549
> 
> 赞同：1
> 
> 时间：2012-07-04T04:45:40.803
> 
> 标签：jquery, asp.net, asp.net-mvc-3

我正在尝试使用 jquery 的东西为选定的菜单添加类。我尝试了以下方法，它不起作用。

我的代码是

```
<div class="paragraph">
   <ul class="tablinkss">
        <li class="active">@Html.ActionLink("Login", "LogOn")</li>
        <li>@Html.ActionLink("Register", "Register")</li>
   </ul>
</div> 
```

还有我的jQuery

```
$(function () {
           $('ul.tablinkss li').click(function () {
               $('ul.tablinkss li').removeClass("active");
               $(this).addClass("active");
           });
       }); 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T04:57:06.557

`Html.ActionLink`返回一个超链接，让浏览器加载一个新页面。 **除非您阻止链接加载下一页，否则 JavaScript 在这种情况下将不起作用。** 好吧，它将工作一瞬间，然后浏览器将显示新页面。

1.  登录处于活动状态。
2.  用户单击注册。
3.  由于您的 JavaScript，注册变为活动状态。
4.  浏览器加载注册页面。
5.  登录再次处于活动状态。

您需要在 Razor 模板中而不是在 JavaScript 中修复此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:55:06.937

试试这个

```
 $('ul.tablinkss li').on('click',function () {
           $('ul.tablinkss li').removeClass("active");
           $(this).addClass("active");
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:01:24.200

尝试`event.stopPropagation()`：

```
$(function () {
   $('ul.tablinkss li').click(function(e) {
       e.stopPropagation()
       $('ul.tablinkss li').removeClass("active");
       $(this).addClass("active");
   });
}); 
```

# c++ - 如何检索连接到服务器的硬盘信息？示例 C /C 代码？

> ID：11322552
> 
> 赞同：0
> 
> 时间：2012-07-04T04:46:04.730
> 
> 标签：c++, c, windows, disk

我对 Windows 编程非常陌生。所以你能帮我获取示例程序（C/C++），我可以获取连接到我的服务器的所有硬盘信息。

我使用的是 windows 2008 R2 sp1 服务器，并且还连接了多个硬盘到服务器。

请帮助我获取此信息。

谢谢， Deepesh CP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:18:53.250

您可以使用 WMI 查询来提取磁盘信息。

```
SELECT Name,VolumeName from Win32_LogicalDisk WHERE DriveType='3' 
```

使用您的 WMI API 搜索可以从 C/C++ 代码执行上述命令。 [这](http://www.codeproject.com/Articles/10539/Making-WMI-Queries-In-C)是更多详细信息和示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:02:16.077

以下 API 必须有用

DisplayVolumePaths GetDiskFreeSpace CreateFile

也参考这些链接

[http://social.msdn.microsoft.com/Forums/en-CA/vcgeneral/thread/1d4fda3c-885f-46e2-bc32-80c4426510dc](http://social.msdn.microsoft.com/Forums/en-CA/vcgeneral/thread/1d4fda3c-885f-46e2-bc32-80c4426510dc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:17:10.523

作为开始，我会阅读 Windows API。

要获取 Windows 系统上的所有逻辑驱动器，请使用

```
DWORD WINAPI GetLogicalDrives(void); 
```

或者

```
DWORD WINAPI GetLogicalDriveStrings(
  __in   DWORD nBufferLength,
  __out  LPTSTR lpBuffer
); 
```

参见[http://msdn.microsoft.com/en-us/library/windows/desktop/aa364972(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364972(v=vs.85).aspx)

# java - 如何在我的 Android 应用程序中调用外部库项目

> ID：11322557
> 
> 赞同：0
> 
> 时间：2012-07-04T04:46:30.430
> 
> 标签：java, android, android-intent, android-activity, android-library

```
import com.example.testQRCode.*;  //<--external project 

public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // create a new intent based on your library activity
        Intent myIntent = new Intent(this, QRCode.class); // QRCode is a class from the external projects
        startActivityForResult(myIntent, 0);  
    } 
```

异常显示系统无法实例化活动。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T04:54:37.997

您还必须在主项目的 AndroidManifest.xml 文件中声明 QRCode.class 的 Activity 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:02:22.117

如果您的意思是在 Eclipse 中包含一个作为 Android 库项目的库，您可以通过简单地添加它

`Project Properties->Android`

在此屏幕中，您将看到“项目构建目标”和“库”两个部分。在“库”部分，您可以添加对其他项目的引用。

如果您打算包含一个外部 jar 文件，您可以通过

`Project Properties->Java Build Path->Libraries tab`

在这里，有一个“添加外部罐子...”按钮，您可以在其中包含您需要的罐子。

# php - php中jquery-ajax函数内的for循环

> ID：11322558
> 
> 赞同：0
> 
> 时间：2012-07-04T04:46:32.757
> 
> 标签：php, jquery

我正在用 php 做一个评级应用程序，在这里我想在一个 jQuery ajax 函数调用中编写一个 for 循环。我不知道正确的语法。

我使用的 PHP 代码是

```
for(i=1;i<=4;i++)
{
<div class="like">
<a href="#" class="like" id="1" name="up"><img src="images/likebig.png"></a>
<a href="#" class="like" id="1" name="down"><img src="images/dislike.png"></a>

 <form>
 <input type="hidden" id="<?php echo $i; ?>" value="<?php echo $_SESSION['r_id'][$i]?>">
 </form>
}
</div> 
```

上面的代码给出了四个结果。这里我想获取每个结果的值（$_SESSION['r_id'][$i]）在他们相应点击的点击上

我使用的jQuery函数是

```
<script type="text/javascript">

    $(document).ready(function()
    {
    $(".like").click(function(e)
    {
    e.preventDefault();
    var id=$(this).attr("id");
    var name=$(this).attr("name");
    var fname = $("#fname").val();
    var lname = $("#lname").val();
    var email = $("#email").val();
    for(var i=1;i<=4;i++)
    {
    var rel[i] = $("#i").val();
    }
    var dataString = 'id='+ id + '&name='+ name + '&fname='+ fname + '&lname='+ lname + '&email='+ email;
     $.ajax
      ({
      type: "POST",
      url: "rate.php",
      data: dataString,
      cache: false,
      });
     });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:51:52.290

改变这个

```
var rel[i] = $("#i").val(); 
```

到：

```
var rel[i] = $("#" + i).val(); 
```

或者，您可以使用[`.serialize()`](http://api.jquery.com/serialize/)方法：

> .serialize() 方法以标准 URL 编码表示法创建文本字符串。它对表示一组表单元素的 jQuery 对象进行操作。表单元素可以有多种类型：

```
$.ajax({
   type: "POST",
   url: "rate.php",
   data: $('form').serialize(),
   cache: false,
 }); 
```

# arm - HP 到 TI 计算器链接...是否可以使用/不使用汇编编程？

> ID：11322559
> 
> 赞同：1
> 
> 时间：2012-07-04T04:46:33.747
> 
> 标签：arm, usb, protocols, z80

我有一个 HP50g 和 TI84 计算器，并且对链接它们的可能性感到好奇，编写了一个程序来发送数字/字符串/数据。两者都可以通过 USB 连接，但 TI 使用[自己的特殊协议](http://www.ticalc.org/archives/files/fileinfo/113/11382.html)，HP 使用 Xmodem/kermit。如果我没记错的话， [HP 手册](http://www.hpcalc.org/details.php?id=6374)似乎没有显示任何发送原始数据的命令，而且我也不相信 TI 有任何命令可以通过线路发送字节。HPGCC 或汇编是制作这样一个程序的唯一方法吗？

# android - 有人知道如何在android的webview中选择文本吗？不使用 emulateShiftHeld，因为文档说“此方法已弃用”

> ID：11322568
> 
> 赞同：0
> 
> 时间：2012-07-04T04:47:21.617
> 
> 标签：android, textselection

我尝试在 webview 中选择文本，选择文本后，我需要决定下一步要做什么。不仅仅是复制选定的文本。我有更多的选择供用户选择。我的意思是，在用户在 webview 中选择文本后，可以我提示了一些按钮以获取更多信息？我尝试使用 emulateshiftheld 来解决我的问题。但谷歌的文档说“这种方法已被弃用”。另外，我无法提示某些选择按钮。你可以点击链接看看我的意思。链接：[https ://public.blu.livefilestore.com/y1pHhMR2iyIbQN7uJ2C-9CLLJBosWAZw2r4MvD0qyyTG-QWUM-06i6HFu4Fn4oaWnHMbDyTBOa-CPwN6PwoZNifSQ/select.jpg?download&psid=1](https://public.blu.livefilestore.com/y1pHhMR2iyIbQN7uJ2C-9CLLJBosWAZw2r4MvD0qyyTG-QWUM-06i6HFu4Fn4oaWnHMbDyTBOa-CPwN6PwoZNifSQ/select.jpg?download&psid=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:32:51.407

[在 Android 较新的 SDK 上粘贴来自 WebView emulateShiftHeld() 的](http://cosmez.blogspot.in/2010/04/webview-emulateshiftheld-on-android.html)相关代码

```
/**
 * Select Text in the webview and automatically sends the selected text to the clipboard
 */
public void selectAndCopyText() {
    try {
     KeyEvent shiftPressEvent = new KeyEvent(0,0,KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_SHIFT_LEFT,0,0);
     shiftPressEvent.dispatch(mWebView);
    } catch (Exception e) {
        throw new AssertionError(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T10:27:35.237

这个问题很老了，但对于其他人来说，这里是 API 19+ 的 javascript 解决方案。只需将其添加到您的 WebView 中：

```
public void getSelectedText(final SelectedTextInterface selectedTextInterface) {
    evaluateJavascript("(function(){return window.getSelection().toString()})()", new ValueCallback<String>() {
        @Override
        public void onReceiveValue(final String selectedText) {
            if (selectedText != null && !selectedText.equals("")) {
                //If you don't have a context, just call
                //selectedTextInterface.onTextSelected(selectedText);
                if (context instanceof Activity) {
                    ((Activity) context).runOnUiThread(new Runnable() {
                        @Override
                        public void run() {
                            selectedTextInterface.onTextSelected(selectedText);
                        }
                    });
                } else selectedTextInterface.onTextSelected(selectedText);
            }
        }
    });
}

public interface SelectedTextInterface {
    void onTextSelected(String selectedText);
} 
```

完成选择文本后，只需使用以下命令调用它：

```
webView.getSelectedText(new YourWebView.SelectedTextInterface() {
    @Override
    public void onTextSelected(String selectedText) {
        //Your code here
    }
}); 
```

我希望这可能对某些人有用:-)

# css - 如何将css应用于“文本”和“密码”

> ID：11322573
> 
> 赞同：-7
> 
> 时间：2012-07-04T04:47:38.720
> 
> 标签：css

如何将 css 应用于“文本”和“密码”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:54:10.507

```
input[type="text"] , input[type="password"] {
    /*css code*/   
} 
```

# jquery - 如何在不影响其他元素定位的情况下执行 jQuery fadeOut？

> ID：11322578
> 
> 赞同：0
> 
> 时间：2012-07-04T04:48:56.610
> 
> 标签：jquery

目前，如果我做类似的事情

```
$.('#myelem').fadeOut(); 
```

它会成功淡出元素，然后重新定位屏幕上的其他所有内容。如何在将所有其他元素保持在同一个位置的同时进行淡出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T04:52:00.860

而不是使用*fadeOut*，尝试*animate*：

```
$("#myelem").animate({"opacity": 0}); 
```

如果您查看[JQuery 源代码](http://code.jquery.com/jquery-latest.js)，您会注意到*fadeOut*实际上动画为“不透明度：隐藏”。使用直接*动画*功能使元素显示，只是不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:51:40.617

```
$.('#myelem').animate({opacity : 0}, 600); 
```

来自 jQuery：

> .fadeOut() 方法动画匹配元素的不透明度。一旦不透明度达到 0，显示样式属性设置为无，因此元素不再影响页面的布局。

只是将不透明度设置为零不会成功`display:none`，并且会将元素保留在文档流中，以免像设置一样影响其他元素`display:none`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T04:57:45.467

使用`fadeTo()`动画方法代替`opacity`：

```
$el.fadeTo('fast', 0) 
```

# java - hello world 示例 struts 序列图

> ID：11322580
> 
> 赞同：2
> 
> 时间：2012-07-04T04:49:13.080
> 
> 标签：java, servlets, struts, sequence-diagram

我有一个具体的疑问。

在示例中，[hello world 示例](http://www.dzone.com/tutorials/java/struts/struts-tutorial/struts-tutorial-using-eclipse-1.html) ![在此处输入图像描述](../Images/b105e4c3632bc4a9ecf38982280d2c1c.png)

我画了一个序列图。我必须代表tomcat在图中所扮演的角色。这是正确的代表方式吗？这个图中的 struts-config.xml 文件有什么作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:05:34.327

我认为在你的序列图中不需要`web.xml`之前`web server layer`。事实上，`web server`或者`servlet engine`是解析web.xml并`ActionServlet`在你部署应用程序时加载的那个。所以在这种情况下，web.xml没有进入图片。所有请求都将由您处理`Action class`。您可以在此处包含。

`Struts-Config`将`ActionServlet`在您部署应用程序时由您加载。您的 Web 服务器由

1\. `web.xml`which 将加载`action servlet`which 在部署应用程序期间依次加载所有操作类。

2.当用户提出请求时，这`action class`是为您的请求提供服务的用户。您可以在此处表示操作类。

# jquery - 如果 div 中的控件如何显示无，则 Jquery 时间选择器不起作用

> ID：11322581
> 
> 赞同：0
> 
> 时间：2012-07-04T04:49:20.227
> 
> 标签：jquery, jquery-ui-timepicker

我正在使用带有fancybox的Jquery插件“Timepicker”，我为时间选择器放置文本框的div是不显示，fancy box会自动弹出那个div，

问题是，时间选择器在该 div 中不起作用。如果我从样式标签中删除“显示：无”，它的工作正常，

有人可以帮帮我吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:47:20.763

在调用 timepicker 函数之后，不要将 display:none 放在元素本身上，而是尝试以下操作：

```
$('.element').hide(); 
```

但是向我们展示您的一些代码，以便我们可以看到您正在尝试做什么:)

# git - 无法从其他计算机访问 git 分支

> ID：11322582
> 
> 赞同：4
> 
> 时间：2012-07-04T04:49:22.317
> 
> 标签：git, github

基本上我看不到另一台计算机上的分支。我跑

```
git branch -a 
```

在家用电脑上我得到

```
C:\learn ror\sample_app [filling-in-layout]> git branch -a
* filling-in-layout
  master
  static-pages
  remotes/origin/filling-in-layout
  remotes/origin/master
  remotes/origin/static-pages 
```

在工作电脑上，我得到几乎相同的结果，除了“填充布局”分支（本地和远程）。

我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T04:52:08.350

要共享分支，您需要将分支推送到创建它们的机器上，并在其他机器上设置远程跟踪分支：

在有分支的机器上试试这个：

```
git push -u origin <branch name> 
```

这在没有的机器上：

```
git fetch
git checkout <branch name> 
```

`<branch name>`如果您尝试签出仅存在于远程的分支，Git 将自动设置一个名为的远程跟踪分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:53:06.533

当您在您的机器中创建标签或分支时，并且当您想要在远程存储库中共享您的标签或分支时，您必须以与推送存储库相同的方式推送标签或分支。

```
$ git checkout -b new-branch
[...]
$ git add .
$ git commit -m 'Some stuff'
$ git push origin new-branch 
```

与标签相同：

```
$ git tag 6.7
[...]
$ git push origin 6.7 
```

# ruby-on-rails-3 - Rails 3，rake db:test:prepare 在使用 postgres 模式时不起作用

> ID：11322583
> 
> 赞同：4
> 
> 时间：2012-07-04T04:49:22.457
> 
> 标签：ruby-on-rails-3, rspec, rake

我有一个 Rails 3.2.1 项目，我正在尝试运行我的规范。

当我跑步时：耙子

> 耙中止！PG ::错误：错误：参数“search_path”的值无效：“示例”详细信息：模式“示例”不存在：SET search_path TO示例

据我所知，rake db:test:prepare 删除测试数据库，然后尝试从 schema.rb 重新创建它。问题是，database.yml 有这条线

> schema_search_path：示例

所以当它尝试重新连接时，它会因上述错误而失败。

我想我的问题是，我怎样才能让 rake db:test:prepare 也设置 schema_path？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:03:16.640

一种解决方案是向创建模式的 db:create 任务添加一些代码。把它放在一个 rake 任务中，例如 'APP_ROOT/lib/tasks/db_create_schema.rake'

```
namespace :db do
  task :create do
    config = Rails.configuration.database_configuration[Rails.env].merge!({'schema_search_path' => 'public'})
    ActiveRecord::Base.establish_connection(config)
    ActiveRecord::Base.connection.execute("CREATE SCHEMA schema_name")
  end
end 
```

[https://gist.github.com/4280172](https://gist.github.com/4280172)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T03:21:33.210

您应该`schema_search_path`在 config/database.yml 中设置

例如

```
development:
  adapter: postgresql
  encoding: unicode
  database: test
  pool: 5
  username: user
  password: password
  #host: localhost
  #port: 5432
  # Schema search path. The server defaults to $user,public
  schema_search_path: example 
```

# python - 使用误差线 matplotlib 制作椭圆标记

> ID：11322584
> 
> 赞同：4
> 
> 时间：2012-07-04T04:49:26.890
> 
> 标签：python, matplotlib

我需要用椭圆作为标记制作一个图（带有误差线）。经过一番搜索，我想出了`Ellipse`in `matplotlib.patches`。然后我可以用`plt.errorbar`. 但问题是，即使我先给出了错误栏命令，无论我在程序中给出什么顺序，错误栏总是在前景中绘制，而椭圆则在背景中绘制。

有谁知道用误差线创建一个椭圆作为标记（每个点都有不同的偏心率）的更好方法？或者至少指导我如何将误差线放在后台？

这是我到目前为止的一个最小示例：

```
import matplotlib.pyplot as plt
from matplotlib.backends.backend_pdf import PdfPages
from matplotlib.patches import Ellipse

PlotFileName="test.pdf"
pdf = PdfPages(PlotFileName)
fig=plt.figure(1)
ax1=fig.add_subplot(111)
plt.xlim([1,4])
plt.ylim([2,8])
ax1.errorbar([2.5], [5], yerr=[1], fmt="o", color="black", ms=0.1)
ax1.add_artist(Ellipse((2.5, 5), 1, 1, facecolor="green", edgecolor="black"))
pdf.savefig(fig)
pdf.close()
plt.close() 
```

这是它的外观： ![椭圆前面的误差线](../Images/2610c53f6ea96b755a30c81ebd1d0cca.png)

我希望误差条出现在椭圆的背景中。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T06:41:45.243

为您的两个绘图命令使用[zorder说明符。](http://matplotlib.sourceforge.net/api/artist_api.html#matplotlib.artist.Artist.set_zorder)来自文档：“为艺术家设置 zorder。首先绘制 zorder 值较低的艺术家。”

```
import matplotlib.pyplot as plt
from matplotlib.patches import Ellipse

fig=plt.figure(1)
ax1=fig.add_subplot(111)
plt.xlim([0,5])
plt.ylim([0,10])
ax1.errorbar([2.5], [5], yerr=[1], fmt="o", color="black", ms=0.1, zorder=1)
ax1.add_artist(Ellipse((2.5, 5), 1, 1, facecolor="green", edgecolor="black",zorder=2))

plt.show()

exit(0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-14T12:10:15.490

[![使用路径](../Images/f1f2f49a8f2b6185bc0440981dc1e149.png)](https://i.stack.imgur.com/pJ9Cd.png)在我看来，使用`Path`是一种更直接的方法：`Path`实例被完全视为 normal `marker`，因此只需使用相同的接口。请查看下面的示例，还可以参考有关此主题的[matplotlib 文档。](https://matplotlib.org/3.1.0/gallery/shapes_and_collections/marker_path.html)

```
import numpy as np

import matplotlib.pyplot as plt 
import matplotlib.path as mpath

# Create mock data.
theta = np.linspace(0, 2.*np.pi, 30) 
signa = np.sin(theta)

u_theta = np.random.normal(0., scale=0.15, size=signa.size)
u_signa = np.random.normal(0., scale=0.15, size=signa.size)

theta += u_theta
signa += u_signa

# Define the ellipse marker.
circle = mpath.Path.unit_circle()
verts = np.copy(circle.vertices)
verts[:, 0] *= 1.618
ellipt_marker = mpath.Path(verts, circle.codes)

# Done, basically.[![Plotting example][1]][1]
plt.errorbar(theta, signa, xerr=u_theta, yerr=u_signa,
             marker=ellipt_marker, linestyle='', capsize=5,
             ms=20, mfc='w', c='r', mec='g')

plt.xlabel('Autology', fontsize=35)
plt.ylabel('Eterology', fontsize=35)
plt.show() 
```

# batch-file - 使用 BATCH 合并一个大列中的文本行

> ID：11322585
> 
> 赞同：0
> 
> 时间：2012-07-04T04:49:43.940
> 
> 标签：batch-file

我有数百个不同的 txt 文件（从 TXT1 到 TXT 2000），位于一个文件夹中，我想使用批处理合并所有 TXT，如下所示：

```
TXT1             TXT2           TXT2       etc      TXT2000    
line 001       line 101       line 501              line 90000
(...)           (...)          (...)                   (...)
line 100       line 500       line 550              line 100000 
```

合并前，应删除每个 TXT 文件的前两行。合并后，我会有一个文件 TXTall.txt 为：

```
TXTall
line 003
line 004
(...)
line 100000 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:59:07.253

您可以使用复制命令执行此操作：

```
copy TXT*.txt TXTall.txt 
```

这会将所有名称匹配的文件附加`TXT*.txt`在一起，并将整个文件保存到一个名为`TXTall.txt`.

我不确定您是否可以依靠合理的排序。我建议你测试一下，看看是否适合你。

**更新：**要跳过每个文件的前两行，试试这个：

```
@echo off
for %%f in (txt*.txt) do (
    for /F "delims= skip=2" %%t in (%%f) do (
        echo %%t >> AllTxt.txt
    )
) 
```

# ruby-on-rails - ActiveModel::MassAssignmentSecurity::CustomersController#create 中的错误（设置了 attr_accessible）

> ID：11322587
> 
> 赞同：1
> 
> 时间：2012-07-04T04:50:17.463
> 
> 标签：ruby-on-rails, activerecord, mass-assignment

在我的控制器中，我在创建动作并尝试创建模型时出错 [无法批量分配]，但在我的规范中，我对批量分配模型的测试通过了！？！

我的模型：

```
class Customer < ActiveRecord::Base
  attr_accessible :doc, :doc_rg, :name, :birthday, :name_sec, :address, :state_id, :city_id, :district_id,
                  :customer_pj, :is_customer, :segment_id, :activity_id, :person_type, :person_id

  belongs_to    :person , :polymorphic => true, dependent: :destroy
  has_many :histories
  has_many :emails

  def self.search(search)
    if search
      conditions = []
      conditions << ['name LIKE ?', "%#{search}%"]
      find(:all, :conditions => conditions)
    else
      find(:all)
    end
  end 
end 
```

我也厌倦了在控制器中设置 attr_accessible，以我的随机方式。

控制器：

```
class CustomersController < ApplicationController
  include ActiveModel::MassAssignmentSecurity
  attr_accessible :doc, :doc_rg, :name, :birthday, :name_sec, :address, :state_id, :city_id, :district_id, :customer_pj, :is_customer

  autocomplete :business_segment, :name, :full => true
  autocomplete :business_activity, :name, :full => true

  [...]

end 
```

测试，我通过的测试

```
 describe "accessible attributes" do
  it "should allow access to basics fields" do
    expect do
      @customer.save
    end.should_not raise_error(ActiveModel::MassAssignmentSecurity::Error)
  end    
end 
```

错误：

```
ActiveModel::MassAssignmentSecurity::Error in CustomersController#create
Can't mass-assign protected attributes: doc, doc_rg, name_sec, address, state_id, city_id, district_id, customer_pj, is_customer 
```

[https://github.com/megabga/crm](https://github.com/megabga/crm)

1.9.2p320

导轨 3.2

苹果系统

皮克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:11:12.450

我的错，在我的控制器中，它设置了一个最古老的类。然后旧类没有传递参数的属性。对不起！

# cocos2d-iphone - cocos2d 禁用对所有其他视图的触摸

> ID：11322596
> 
> 赞同：2
> 
> 时间：2012-07-04T04:51:34.380
> 
> 标签：cocos2d-iphone, touch, cocos2d-x

下面是我想出的。想知道是否有更简单的方法来做到这一点。

假设我只希望菜单层在启动时是可触摸的。
我放置了会吞下触摸的隐形层。

```
bool tNoTouchLayer::init()
{
    if(!CCLayer::init()) {
        return false;
    }

    setIsTouchEnabled(true);

    return true;
}

void tNoTouchLayer::registerWithTouchDispatcher()
{
    CCDirector::sharedDirector()->getTouchDispatcher()->addTargetedDelegate(this, 0, true);

}

bool tNoTouchLayer::ccTouchBegan(CCTouch *pTouch, CCEvent *pEvent)
{
    return true;
} 
```

现在我可以在添加菜单层之前添加 noTouchLayer，所有的触摸都会被 noTouchLayer 窃取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:47:15.677

据我所知，你就是这样做的。但是请注意，您的代码不会禁用添加到场景中的任何菜单。为此，您必须在添加弹出窗口时从触摸调度程序中删除菜单，并在删除弹出窗口时再次将其添加回来。

要从触摸调度程序中删除菜单，您可以执行以下操作：

```
CCDirector::sharedDirector()->getTouchDispatcher()->removeDelegate(menu); 
```

并将其添加回来，您可以这样做：

```
CCDirector::sharedDirector()->getTouchDispatcher()->addTargetedDelegate(menu, kCCMenuHandlerPriority, true); 
```

其中 menu 是您的 CCMenu 节点。

作为提示，我创建了一个与上面类似的类，但我还向其中添加了弹出菜单，在一个节点中创建一键式阻止菜单。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:53:18.293

这不完全是您正在寻找的答案，但这里有一些值得思考的地方：

如果您尝试为弹出窗口执行此操作，是否可以尝试弹出 UIAlertView 的子类（看起来像您想要的那样）？

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:38:41.840

这是另一种方法：

保持应用程序的状态以及哪个图层“在顶部”。

在您的每个菜单侦听器中，让他们都检查一下您当前层的状态是否应该允许按下该菜单按钮。

此外，您可以覆盖“addchild”以查看它是否是 MenuItem，如果它是 MenuItem，则让它检查是否应该启用它。如果不是，则立即返回，而不是执行其余代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T18:40:13.067

最后，我确实找到了更多信息：

[http://code.google.com/p/cocos2d-iphone/issues/detail?id=1033](http://code.google.com/p/cocos2d-iphone/issues/detail?id=1033)

菜单项窃取触摸的原因是菜单项的触摸优先级设置为可能的最高（最低字符值）......

您可以将 kCCMenutouchPriority 改为 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T21:41:38.273

如果我正确理解您的问题，我想您会尝试执行“暂停屏幕”之类的操作来弹出并禁用所有其他图层。

好吧，您在评论中说您不希望在其他**区域**启用触摸事件，但不是您的弹出区域。基本上，我认为我们应该从层的角度来考虑，以便于理解和实现。

让我们看看我们是否有“主层”，它包含其他游戏对象以显示为它的孩子（假设它们也在运行动画）。现在你触摸一个按钮，想要弹出“暂停层”。您必须执行以下操作才能禁用其他图层 + 对象的所有触摸事件。

*   暂停图层的计划和操作 [通过*pauseSchedulerAndActions()* ]
*   暂停层内的所有游戏对象（即敌人）[通过*pauseSchedulerAndActions()* ]
*   禁用 CCMenu 对象（如果有），这将忽略 CCMenu 相关对象上的触摸事件 ie.CCMenuItemImage [通过*setEnabled(false)* ]
*   禁用图层本身的触摸事件 [通过*setTouchEnabled(false)* ]

前两点是关于停止运行任何调度方法和动画。后两点是关于停止接受触摸事件。您可以看到 CCMenu* 相关类独立于 CCLayer 维护自己的触摸事件，因此我们需要通过设置 CCMenu* 对象和图层本身来做额外的工作。

我试过这个，它对我很有效。此外，在我看来，我们不必直接设置调度程序，这样会更好。

# javascript - 使用 .call/.apply 隐藏类方法

> ID：11322599
> 
> 赞同：5
> 
> 时间：2012-07-04T04:51:48.417
> 
> 标签：javascript, private-members

[有人可以解释一下单页应用程序的](http://singlepageappbook.com/maintainability1.html)摘录是什么意思吗？

> 类（例如从原型实例化的对象）的常见模式是通过以下划线开始简单地将类方法标记为私有。*您可以通过使用 .call/.apply 设置 "this" 来正确隐藏类方法*，但我不会在这里展示它；这是一个小细节。

我认为它表明有一种方法实际上可以使“私有”JavaScript 方法实际上无法访问，而不是仅用下划线标记它们的约定，但我无法想象实现会是什么样子，也无法想象如何使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:10:23.303

```
var Treasure = function(){  
  function locate(){
    return this.x * this.y + 31337;
  }

  function Treasure(x, y){
    this.x = x;
    this.y = y;
  }

  Treasure.prototype.find = function find(){
    return locate.call(this);
  };

  return Treasure;
}(); 
```

`locate`是构造函数和原型方法的共享私有函数。使用`call`它可以像一种方法一样使用`this`.

这个概念的更完整的实现是接口对象和实现对象。您实际上创建了一个私有的整个类，而不是使用一些随机函数作为方法（类似于上面的定位）。接口的每次外部创建都会生成两个对象：公共 shell 接口和私有实现对象。这允许您公开提供不同的、可能更易于使用的 API 的接口。或者可以允许您为整个接口对象组重用单个私有实现对象。

这实际上是指定 DOM 工作的方式（尽管通常不在 js 中实现）。接口对象（例如元素和节点对象）特别需要包装实际执行该单词的底层实现。暴露的对象只不过是转发属性访问和方法调用的外壳。

Dom.js 是用 js 制作的完整的 DOM 实现。我在工作时熟悉的一项有趣的技术是完全自动生成公共接口。这就是 IDL 的目的：公共 API 是自动生成的，只留下私有实现来实际创建。这真正意味着它可以在不咨询人类的情况下创建这样的东西：[https ://github.com/Benvie/svgstuff/blob/master/lib/defs.js](https://github.com/Benvie/svgstuff/blob/master/lib/defs.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T04:59:02.073

您可以在此示例中看到两种类型的变量。你会注意到第一个是私有的，第二个是公开的：

```
function x() {
    var _var1 = "hello";
    this.var2 = "world";
    x.prototype.innerTest = function() {
        console.log("inner var1: " + _var1);
        console.log("inner var2: " + this.var2);
    }
}

var y = new x;
console.log("var1: " + y._var1);
console.log("var2: " + y.var2);

// var1: undefined
// var2: world 
```

运行内部测试显示可以从类中访问*var1 ：*

```
y.innerTest();
// var1: hello
// var2: world 
```

# iphone - 仅在 iPhone 中横向的相机方向

> ID：11322602
> 
> 赞同：0
> 
> 时间：2012-07-04T04:52:05.530
> 
> 标签：iphone, xcode, camera, orientation, overlay

在我的应用程序中，我使用相机拍照，并且我想使用图像作为相机上的叠加层。仅当我的应用程序处于横向模式时，相机才应显示横向。我将 UIImagePicker 添加为视图的子视图，并且我正在使用下面的代码将其更改为横向模式

```
CGAffineTransform transform=imgPicker.view.transform;
transform=CGAffineTransformRotate(transform, -90*M_PI/180);
transform=CGAffineTransformTranslate(transform, -52, -47);
[imgPicker setCameraViewTransform:transform]; 
```

当我添加任何 UIImageView 作为相机的叠加层时，图像视图并没有添加为横向。它添加了肖像。

这是我的代码：

```
picker=[[UIImagePickerController alloc] init];
picker.delegate=self;
picker.sourceType=UIImagePickerControllerSourceTypeCamera;
picker.showsCameraControls=NO;

[picker setCameraFlashMode:UIImagePickerControllerCameraFlashModeOff];
[self.view addSubview:picker.view];
picker.view.frame=CGRectMake(0, 0, 480, 320);
picker.cameraOverlayView.frame=picker.view.frame;
CGAffineTransform transform=picker.view.transform;
transform=CGAffineTransformRotate(transform, -90*M_PI/180);
transform=CGAffineTransformTranslate(transform, -52, -47);
[picker setCameraViewTransform:transform];
[picker setWantsFullScreenLayout:YES];
[picker shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationLandscapeRight];
UIView *theView = [[UIView alloc] initWithFrame:CGRectMake(100, 100, 120, 120)];
theView.backgroundColor = [UIColor yellowColor];
[picker setCameraOverlayView:theView]; 
```

请告诉我我在哪里做错了提前谢谢

# php - 读取 PDF 上的用户权限，例如密码、签名等？

> ID：11322605
> 
> 赞同：0
> 
> 时间：2012-07-04T04:52:38.160
> 
> 标签：php, perl, file, pdf

我需要编写一个能够访问 pdf 文件并读取文档上所有功能/用户权限处于活动状态的工具。我厂分2个阶段发展。第一阶段：确定文档上的所有功能/用户权限处于活动状态。即检测是否启用了以下任何一项以及它们的类型。密码、数字签名、阅读器扩展、证书安全和策略。

我看过 PHP 的 PDF，但这看起来不像我需要的功能。哪种包/语言最适合这种工具？

我喜欢使用 C、C++、Perl、PHP、Python 或 Java 工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:39:07.893

看看 Perl 的[CAM::PDF](https://metacpan.org/module/CAM%3a%3aPDF)。我相信它至少可以做一些你想做的事情。

# php - 为什么我的 PHP 表单验证器脚本不起作用？

> ID：11322609
> 
> 赞同：1
> 
> 时间：2012-07-04T04:53:24.177
> 
> 标签：php, forms, validation

我只是想简单地验证表单中的字段，但由于某种原因，如果我没有在 mcHandle 字段中输入任何内容，我的 if 语句的 elseif 部分将不会回显 $errormsg 的值。

```
<?php include('header.php'); ?>
<div id="mainContent">
<?php
    if ($_POST['submitted'] == 1) {
        $errormsg = "";
        if (isset($_POST['mcHandle'])) {
            $mcHandle = $_POST['mcHandle'];
        } else if (!isset($_POST['mcHandle'])) {
            $errormsg ="Please enter your mc handle.";
            echo("<p>".$errormsg."</p>");
        }
    }
?>
            <div id="donateForm">
                <form action="" method="post" enctype="multipart/form-data">
                    <ul>
                        <li><label>Minecraft Username:</label><input type="text" name="mcHandle" value=""></li>
                        <li><label>First Name:</label><input type="text" name="firstName" value=""></li>
                        <li><label>Last Name:</label><input type="text" name="lastName" value=""></li>
                        <li>
                            <label>Choose a plan:</label>
                                <select name="planName">
                                    <option>Donator 2$/month</option>
                                    <option>VIP 4$/month</option>
                                    <option>Celebrity 6$/month</option>
                                    <option>Saint 8$/month</option>
                                    <option>Legendary 10$/month</option>
                                </select>
                        </li>
                        <li>
                            <label>How many months?</label>
                                <select name="planLength">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                </select>
                        </li>
                        <li>
                            <br><input value="Submit" class="submit" type="submit">
                            <input type="hidden" value="1" name="submitted">
                        </li>
                    </ul>
                </form>
            </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T04:57:25.140

`$_POST['mcHandle']`可以设置并有一个空字符串（“”）作为它的值；这与根本没有设置不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:03:50.370

这是因为 $_POST['mcHandle'] 已设置！尝试这个：

`var_dump($_POST)`

您将看到表单中的每个字段是如何在 $_POST 超全局中设置的。

# python - 是否可以使用映射（字典）执行 MySQLdb executemany 函数

> ID：11322618
> 
> 赞同：0
> 
> 时间：2012-07-04T04:55:19.977
> 
> 标签：python, mysql-python

我知道我们可以这样使用executeman：

```
sql = "insert into a(c1,c2,c3) values(%s,%s,%s)"
seq_of_parameters = [('a','b','c'),('a','b','c')]
cu.executemany(sql,seq_of_parameters) 
```

我想知道为什么这不起作用：

```
sql = "insert into a(c1,c2,c3) values(%(c1)s,%(c2)s,%(c3)s)"
seq_of_parameters = [{'c1':'a','c2':'b','c3':'c'},{'c1':'a','c2':'b','c3':'c'}]
cu.executemany(sql,seq_of_parameters) 
```

来自 PEP249 Python 数据库 API 规范 v2.0

> .executemany（操作，seq_of_parameters）
> 
> 准备一个数据库操作（查询或命令），然后针对 在序列 seq_of_parameters 中找到的所有参数**序列或映射执行它。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:02:40.830

可能它支持通过另一种方式映射，不是使用`%(c1)s`，而是使用

```
params = [ ('c1', 1), ('c2', 2) ]
executemany("insert into a(c1, c2) values (?, ?)", params) 
```

你可以试试这个：

```
from string import Template
Template('$c1, $c3, $c3').safe_substitute({'c1':1, 'c2':2, 'c3':3}) 
```

executemany 可能不使用 Template 实现，而只是使用 string.format，因为它不对您的参数名称做出任何假设。

# iphone - 如何使用指针处理 UIImage？

> ID：11322619
> 
> 赞同：0
> 
> 时间：2012-07-04T04:55:32.207
> 
> 标签：iphone, objective-c, ios, xcode

我正在学习iOS编程。

我必须处理图像。

我必须将图像制作成 BMP 文件。但iOS不支持制作BMP文件。

所以我想也许我可以使用一个指针来制作 BMP 文件。

我为 BMP 制作了一个标题。并将其放入`NSData`对象中。

现在我把图像数据保存到那个了`NSData`。（我会说bmpData）

这里开始我的疑惑。

我必须有尺寸为 128 x 64 的图像。

我`UIImage`从上下文中得到。（我会说image1）

我做了一个`CGSize`128 x 64的。

我使用该尺寸制作了一个 context2，绘制了一个 image1

现在我`UIImage`从一个大小为 128 x 64、调整大小的 image1 的 context2 中得到了。

我制作了一个`UIImageView`并使用了image2，它工作正常。好的。image2 做得很好。

所以我声明了一个指针，它是 unsigned char *。

```
unsigned char *bmpDataPointer = (unsigned char *)image2; 
```

我用for循环

```
for(int i = 0; i < 64; ++i)
{
    for(int j = 0 ; j < 128; ++j)
    {
       // dataObj and bmpData are different NSData object
       // dataObj just contain bitmap data to check my pointer works fine or not.
       [dataObj appendBytes:&(bitmapDataPointer[i*1 + j]) length:sizeof(char)];
    }
} 
```

我做了一个`UIImage`检查数据是否有效，它失败了。

```
UIImage *createdImageUsedByaPointer = [UIImage imageWithData:dataObj];
if(createdImageUsedByaPointer == nil)
{
  NSLog(@"nil!");
} 
```

好的运行。然后将显示字符串 nil。

这是为什么？我使上下文大小为 128 x 64，所以我循环 128 x 64 次。

但效果不好。

我该如何解决？

我如何处理`UIImage`使用指针？

任何人都知道，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:13:13.470

你为什么要这么复杂？

您可以按如下方式创建位图上下文：

```
CGContextRef context = CGBitmapContextCreate(data, width, height, 
            bitsPerComponent, 
            bytesPerRow, colorSpace, 
            kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

CGColorSpaceRelease(colorSpace);
CGImageRef imageRef = CGBitmapContextCreateImage(context);
UIImage *result = [UIImage imageWithCGImage:imageRef]; 
```

这里的数据是你的图像`NSData`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:21:52.937

不知道为什么需要 .bmp 格式，但 ImageMagick 会处理导出。

使用这个 lib [ImageMagick for iOS](https://github.com/marforic/imagemagick_lib_iphone)和下面的代码。

```
UIImage *img9 = [UIImage imageNamed:@"00009_face.jpg"];
MagickWand *bmpWand = NewMagickWand();
NSData *bmpObj = UIImagePNGRepresentation(img9);
MagickSetFormat(bmpWand, "bmp");
MagickReadImageBlob(bmpWand, [bmpObj bytes], [bmpObj length]);

size_t bmp_size;
unsigned char * bmp_image = MagickGetImagesBlob(bmpWand, &bmp_size);
NSData *bmpData = [[[NSData alloc] initWithBytes:bmp_image length:bmp_size] autorelease];
free(bmp_image);
DestroyMagickWand(bmpWand);

NSArray *pathsArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString * documentDirectory = [pathsArray objectAtIndex:0];
NSString * bmpPath = [documentDirectory stringByAppendingPathComponent:@"test2.bmp"];
[bmpData writeToFile:bmpPath atomically:NO];

NSLog(@"bmpPath %@", bmpPath); 
```

# iphone - 应用内购买总是在 iphone 中显示错误消息

> ID：11322620
> 
> 赞同：1
> 
> 时间：2012-07-04T04:55:41.193
> 
> 标签：iphone, objective-c, ios, xcode, in-app-purchase

我已经在我的应用程序中实现了应用购买。点击购买按钮时，它会要求确认。但是点击确定后，它总是显示一条错误消息，说“你已经购买了这个，但还没有下载。点击确定立即下载。” 这之后什么也没有发生。在

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{} 
```

它总是调用这种情况“SKPaymentTransactionStateFailed：”。尝试打印错误并显示“无法连接到 iTunes 商店”。我所做的是，单击购买按钮时，调用此方法：

```
`- (void) requestProductData
{
    NSLog(@"requestProductData");
    SKProductsRequest *request= [[SKProductsRequest alloc] initWithProductIdentifiers: 
                                 [NSSet setWithObjects:featureBusiness , nil]] ; // add any other product here
    request.delegate = self;
    [request start];
    if([delegate respondsToSelector:@selector(beginAnimationPurchased)]) {
        [delegate beginAnimationPurchased];
    }
}
` 
```

任何人都可以指导我吗？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T23:17:42.150

我有同样的问题。我使用的是 Ray Wenderlich 示例中的 IAPHelper 代码，然后我将其子类化为我自己的 MyAppIAPHelper。我通过在主视图控制器“m”文件的顶部声明一个观察者来解决这个特殊问题：

```
IAPHelper *observer; 
```

然后在我的主视图控制器的 ViewDidLoad 中添加一个事务观察器：

```
observer = [[IAPHelper alloc] init];
[[SKPaymentQueue defaultQueue] addTransactionObserver:observer]; 
```

在我的 dealloc 中，我添加了：

```
[[SKPaymentQueue defaultQueue] removeTransactionObserver:observer]; 
```

不确定这是最好的解决方案，但它对我有用。希望这可以帮助 ：-）

# iphone - 使用变换旋转时，TTStyledTextLabel 文本对齐不起作用

> ID：11322621
> 
> 赞同：0
> 
> 时间：2012-07-04T04:55:52.683
> 
> 标签：iphone, objective-c, ios, three20

我遇到了 Three20 的 TTSTyledTextLabel 的问题。我已经指定了这样的视图

```
//iphone properties
    htmlSubtitle_ = [[TTStyledTextLabel alloc] init];
    htmlSubtitle_.font = [UIFont systemFontOfSize:14];
    htmlSubtitle_.contentInset = UIEdgeInsetsMake(2, 2, 2, 2);
    htmlSubtitle_.backgroundColor = [UIColor clearColor];
    htmlSubtitle_.textColor = [UIColor whiteColor];
    htmlSubtitle_.textAlignment = UITextAlignmentCenter;
    htmlSubtitle_.userInteractionEnabled = NO;  
    htmlSubtitle_.text = [TTStyledText textFromXHTML:@"<p><p>I dont know where this\n is going<br/> but it is ok :D</p></p>" lineBreaks:YES URLs:YES];;
    htmlSubtitle_.frame = CGRectMake(0, 390, 200, 90);
    htmlSubtitle_.backgroundColor = [UIColor greenColor];
    [self.view addSubview:htmlSubtitle_]; 
```

它看起来像这样： ![在此处输入图像描述](../Images/cbcc69fb9b17dfbbffa594fa02393e0c.png)

当我旋转屏幕时，我写了这段代码：

```
else if (interfaceOrientation == UIInterfaceOrientationLandscapeRight){
  htmlSubtitle_.frame = CGRectMake(0, 0, 90, 200);
  htmlSubtitle_.transform = CGAffineTransformMakeRotation(M_PI / 2);
  htmlSubtitle_.backgroundColor = [UIColor greenColor];
} 
```

它看起来像这样：

![在此处输入图像描述](../Images/85686372519efdab380b233e2532ac5a.png)

查看文本对齐方式，对齐方式已更改为向左而不是保持在中心。其他人有这个问题吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:20:14.283

我使用 UIWebView 来显示 HTML 样式文本，而不是使用这个 TTStyledLabel 废话......谢谢大家。

# php - 从html中提取信息？

> ID：11322623
> 
> 赞同：0
> 
> 时间：2012-07-04T04:56:13.973
> 
> 标签：php, html, xml, parsing, dom

首先，我见过很多类似的问题。我知道可以使用正则表达式或 dom，但我找不到任何好的 DOM 示例，而正则表达式让我抓狂。另外，我需要从 html 源中提取多个值，一些简单的内容，一些属性。

这是我需要从中获取信息的 html 示例：

```
<div class="log">
    <div class="message">
        <abbr class="dt" title="time string">
            DATA_1
        </abbr>
        :
        <cite class="user">
            <a class="tel" href="tel:+xxxx">
                <abbr class="fn" title="DATA_2">
                    Me
                </abbr>
            </a>
        </cite>
        :
        <q>
            DATA_3
        </q>
    </div>
</div> 
```

“消息”块可能出现一次或数百次。我试图最终得到这样的数据：

```
array(4) {
    [0] => array(3) {
               ["time"] => "DATA_1"
               ["name"] => "DATA_2"
               ["message"] => "DATA_3"
           }
    [1] => array(3) {
               ["time"] => "DATA_1"
               ["name"] => "DATA_2"
               ["message"] => "DATA_3"
           }
    [2] => array(3) {
               ["time"] => "DATA_1"
               ["name"] => "DATA_2"
               ["message"] => "DATA_3"
           }
    [3] => array(3) {
               ["time"] => "DATA_1"
               ["name"] => "DATA_2"
               ["message"] => "DATA_3"
           }
} 
```

我尝试使用 simplexml，但它似乎只适用于非常简单的 html 页面。有人可以将我链接到一些例子吗？我真的很困惑，因为我需要从标题属性中获取 DATA_2。您认为提取他的数据的最佳方法是什么？它似乎与我所做的 XML 提取非常相似，但我需要使用其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T05:28:24.903

这是一个使用[DOMDocument](http://php.net/domdocument)和[DOMXpath](http://php.net/domxpath)来解析 HTML 的示例。

```
$doc = new DOMDocument;
$doc->loadHTMLFile('your_file.html');
$xpath = new DOMXpath($doc);

$res = array();

foreach ($xpath->query('//div[@class="message"]') as $elem) {
    $res[] = array(
        'time' => $xpath->query('abbr[@class="dt"]', $elem)->item(0)->nodeValue,
        'name' => $xpath->query('cite/a/abbr[@class="fn"]', $elem)->item(0)->getAttribute('title'),
        'message' => $xpath->query('q', $elem)->item(0)->nodeValue,
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:58:13.963

我可以建议使用 xPath 吗？它似乎是您想要做的事情的完美候选人（但我可能误解了您的要求）。

XPath 将允许您选择 XML/HTML 树的特定节点，然后您可以从那里对它们进行操作。在那之后，它应该是一个简单的任务（或者最多是一点点简单的正则表达式。就我个人而言，我喜欢正则表达式，所以如果你需要帮助，请告诉我）。

您的 XPath 语句将类似于（假设没有冲突的名称）：

时间（数据1）：

```
/div/div/abbr/text() 
```

名称（数据 2）：

```
/div/div/cite/a/abbr/@title 
```

消息（数据 3）：

```
/div/div/q/text() 
```

例如，如果你想通过元素的属性来识别元素，你可以获得比这更多的技术，但我给你的会很快。

# python - 为什么 psycopg2 不能插入像 '\x00' 这样的字符串？

> ID：11322624
> 
> 赞同：0
> 
> 时间：2012-07-04T04:56:21.570
> 
> 标签：python, psycopg2

当我使用**psycopg2向****PostgreSQL**插入数据时，我无法插入包含 '\x00' 的字符串。

这是我的代码：

```
>>> import psycopg2
>>> import psycopg2.extensions
>>> conn = psycopg2.connect(database='test')
>>> curs = conn.cursor()
>>> print curs.mogrify('insert into test values (%s, %s)', 
        ('hello, buddy', 'str\x00str'))
>>> curs.close()
>>> conn.close() 
```

我可以得到这样的字符串：

```
>>> ...
>>> print curs.mogrify('insert into test values (%s, %s)', 
...    ('hello, world', 'str\x00str'))
insert into test values ('hello, world', 'str')
>>> ... 
```

那么，“\x00str”在哪里？

但是，在**psycopg2**中，我发现了一些关于 [unicoding-handling 的](http://initd.org/psycopg/docs/usage.html#unicode-handling)信息。

它显示 ['\x01' - '\xff] 有效。

代码如：

```
>>> ...
>>> print curs.mogrify('insert into test values (%s, %s)', 
...    ('hello, world', 'str\x01\x02\x03...\xffstr'))
insert into test values ('hello, world', 'str\x01\x02\x03...\xffstr')
>>> ... 
```

[**问题**]：'\x00str'在哪里？如何使字符串 '\x00' 在 psycopg2 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:10:18.370

问题是您试图在字符串中间插入一个值为 0 的字符，而 PostgreSQL 不支持字符数据（libpq 返回字符串 \0-终止，我们无法区分您的 \0 与真实的）。如果要插入任意数据（包括 0），请使用 bytea 列和 psycopg2 二进制适配器。

见[http://www.psycopg.org/psycopg/docs/module.html#psycopg2.Binary](http://www.psycopg.org/psycopg/docs/module.html#psycopg2.Binary)

# java - 由于插入查询中的单引号引起的错误

> ID：11322629
> 
> 赞同：0
> 
> 时间：2012-07-04T04:56:51.880
> 
> 标签：java, mysql, sql

我正在使用 java 文件在 Mysql 数据库中插入值 -

```
String query = "INSERT INTO genes (sent, title) VALUES ('"+sent+"','"+title+"')";
Statement stmt = con.createStatement();
int rs = stmt.executeUpdate(query); 
```

其中`sent`和`title`是应用某种算法后提取的变量字符串。但这会在`sent`或`title`包含单个 qoutes 时给出 sql 错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T05:01:41.223

考虑使用带参数的预处理语句：

```
PreparedStatement pstmt = con.prepareStatement(
    "INSERT INTO genes (sent, title) VALUES (?, ?)");
pstmt.setString(1, sent);
pstmt.setString(2, title);
pstmt.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T05:01:52.907

您应该使用[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)填写查询参数。如果输入参数中有单引号，它会负责转义。

如下修改您的查询和语句对象，它应该可以工作：

```
String query = "INSERT INTO genes (sent, title) VALUES (? , ?)";
PreparedStatement pst = con.prepareStatement( query );
pst.setString( 1, sent );
pst.setString( 2, title );

int insertResult = pst.executeUpdate(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T05:02:39.227

你应该使用`PreparedStatements`它。**[PreparedStatement](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)**在`java.sql.*`命名空间下。

```
String insertString = "INSERT INTO genes (sent, title) VALUES (?,?)";
// con is your active connection
PreparedStatement insertX = con.prepareStatement(updateString); 
insertX.setString(1, sent);
insertX.setString(2, title);
insertX.executeUpdate(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T05:03:03.147

你不应该像这样连接 SQL 语句，而是使用[准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)：

```
String query = "INSERT INTO genes (sent, title) VALUES (?,?)";
PreparedStatement stmt = con.prepareStatement(query);

p.setString(1, sent);
p.setString(2, title);
p.executeUpdate(); 
```

如果您使用字符串连接方法，您将面临危险[的 sql 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T05:44:28.780

```
String query = "INSERT INTO genes (sent, title) VALUES (?, ?)";
PreparedStatement pt = con.prepareStatement(query);
pt.setString(1, sent);
pt.setString(2, title);
pt.executeUpdate(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T05:06:43.683

请`'`从字符串中删除或替换为`\'`from `'`。

Mysql 只允许`\'`特殊字符的格式。

# android - 安卓的关键监听器

> ID：11322630
> 
> 赞同：1
> 
> 时间：2012-07-04T04:57:04.727
> 
> 标签：android, keylistener

我正在设计一个应用程序，我需要大声读出该人在文本字段中键入的字符。我可以用android做这样的事情吗？如果是，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T05:37:16.643

您可以使用[TextWatcher](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFgQFjAA&url=http://developer.android.com/reference/android/text/TextWatcher.html&ei=k9bzT5mEPMftrAe97IjiBg&usg=AFQjCNF5WNMSztKb7uY5NdI7TsXHDjv_QQ&sig2=s2iC_z_vHZ2kjrFH7JgVyQ)来读取人员在文本字段中键入的字符，如下所示：

**第一个解决方案：**

```
editText.addTextChangedListener(new TextWatcher(){ 
@Override   
public void afterTextChanged(Editable s) {   
       //GET TEXT HERE AFTER TYPING DONE BY PERSON   
    }   
@Override   
public void beforeTextChanged(CharSequence s,int start,int count,int after){  
      //GET TEXT HERE BEFORE TYPING START BY PERSON   
    }   
@Override   
public void onTextChanged(CharSequence s, int start, int before, int count) {   
   //GET TYPED CHAR HERE 
  }   
}); 
```

**第二个解决方案：**您还可以使用[setOnKeyListener](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&ved=0CHgQFjAF&url=http://developer.android.com/reference/android/view/View.html&ei=zNbzT-7qNMryrQfa89nPBg&usg=AFQjCNGAaxjBt2TI3FJ_vmjXgMYsgHoFlg&sig2=ZGhE031pOmYWLR7pekdLpQ)从edittext中获取用户键入的字符：

```
editText.setOnKeyListener(new EditText.OnClickListener(){   
public boolean onKey(View v,int keyCode,KeyEvent event)   
{   
     String str=editText.getText(); //GET TYPED CHAR HERE  
     return false;   
}   
}); 
```

# android - 如何从 onTick 方法中清除 CountDownTimer？

> ID：11322633
> 
> 赞同：2
> 
> 时间：2012-07-04T04:57:22.500
> 
> 标签：android, countdowntimer

我已经在 android 应用程序中实现了计时器功能，我可以通过调用其他本地方法来完成计时器`timerObject.cancel()`。它工作完美。

但是当我尝试在`onTick()`特定条件下调用相同的方法时，我无法取消计时器，它会持续到计时器时间结束。

如何取消计时器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T05:11:43.777

AFAIK你不能那样做

但是 Android CountDownTimer 类有一个 Drop-in 替代方案，但您可以从 onTick 中取消它。

干得好

```
/*
 * Copyright (C) 2008 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package alt.android.os;

import android.util.Log;
import android.os.Handler;
import android.os.SystemClock;
import android.os.Message;

/**
 * Schedule a countdown until a time in the future, with
 * regular notifications on intervals along the way.
 *
 * Example of showing a 30 second countdown in a text field:
 *
 * <pre class="prettyprint">
 * new CountdownTimer(30000, 1000) {
 *
 * public void onTick(long millisUntilFinished) {
 * mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
 * }
 *
 * public void onFinish() {
 * mTextField.setText("done!");
 * }
 * }.start();
 * </pre>
 *
 * The calls to {@link #onTick(long)} are synchronized to this object so that
 * one call to {@link #onTick(long)} won't ever occur before the previous
 * callback is complete. This is only relevant when the implementation of
 * {@link #onTick(long)} takes an amount of time to execute that is significant
 * compared to the countdown interval.
 */
public abstract class CountDownTimer {

    /**
     * Millis since epoch when alarm should stop.
     */
    private final long mMillisInFuture;

    /**
     * The interval in millis that the user receives callbacks
     */
    private final long mCountdownInterval;

    private long mStopTimeInFuture;

    private boolean mCancelled = false;

    /**
     * @param millisInFuture The number of millis in the future from the call
     * to {@link #start()} until the countdown is done and {@link #onFinish()}
     * is called.
     * @param countDownInterval The interval along the way to receive
     * {@link #onTick(long)} callbacks.
     */
    public CountDownTimer(long millisInFuture, long countDownInterval) {
        mMillisInFuture = millisInFuture;
        mCountdownInterval = countDownInterval;
    }

    /**
     * Cancel the countdown.
     *
     * Do not call it from inside CountDownTimer threads
     */
    public final void cancel() {
        mHandler.removeMessages(MSG);
        mCancelled = true;
    }

    /**
     * Start the countdown.
     */
    public synchronized final CountDownTimer start() {
        if (mMillisInFuture <= 0) {
            onFinish();
            return this;
        }
        mStopTimeInFuture = SystemClock.elapsedRealtime() + mMillisInFuture;
        mHandler.sendMessage(mHandler.obtainMessage(MSG));
        mCancelled = false;
        return this;
    }

    /**
     * Callback fired on regular interval.
     * @param millisUntilFinished The amount of time until finished.
     */
    public abstract void onTick(long millisUntilFinished);

    /**
     * Callback fired when the time is up.
     */
    public abstract void onFinish();

    private static final int MSG = 1;

    // handles counting down
    private Handler mHandler = new Handler() {

        @Override
        public void handleMessage(Message msg) {

            synchronized(CountDownTimer.this) {
                final long millisLeft = mStopTimeInFuture - SystemClock.elapsedRealtime();

                if (millisLeft <= 0) {
                    onFinish();
                } else if (millisLeft < mCountdownInterval) {
                    // no tick, just delay until done
                    sendMessageDelayed(obtainMessage(MSG), millisLeft);
                } else {
                    long lastTickStart = SystemClock.elapsedRealtime();
                    onTick(millisLeft);

                    // take into account user's onTick taking time to execute
                    long delay = lastTickStart + mCountdownInterval - SystemClock.elapsedRealtime();

                    // special case: user's onTick took more than interval to
                    // complete, skip to next interval
                    while (delay < 0) delay += mCountdownInterval;

                    if (!mCancelled) {
                        sendMessageDelayed(obtainMessage(MSG), delay);
                    }
                }
            }
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:17:05.013

查看源代码`CountDownTimer`很容易看出它为什么不起作用。`cancel()`只是从队列中删除用于计时的消息。但是在每个滴答声中调用的消息处理程序会在调用 后为下一个滴答声发布一条消息`onTick()`。因此，您要么必须通过例如`cancel()`在外部调用，要么改用 Timer 类。`onTick()``Handler`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-24T12:28:57.187

如果使用 RXJava2。这段代码可以帮助你。

```
 public abstract class CountDownTimer { 

    private TimeUnit timeUnit;
    private Long startValue;
    private Disposable disposable;

    public CountDownTimer(Long startValue,TimeUnit timeUnit) {
        this.timeUnit = timeUnit;
        this.startValue = startValue;
    } 

    public abstract void onTick(long tickValue);

    public abstract void onFinish(); 

    public void start(){ 
        io.reactivex.Observable.zip( 
                io.reactivex.Observable.range(0, startValue.intValue()), io.reactivex.Observable.interval(1, timeUnit), (integer, aLong) -> {
                    Long l = startValue-integer;
                    return l; 
                } 
        ).subscribeOn(Schedulers.io()) 
                .observeOn(AndroidSchedulers.mainThread()) 
                .subscribe(new Observer<Long>() { 
                    @Override 
                    public void onSubscribe(Disposable d) { 
                        disposable = d; 
                    } 

                    @Override 
                    public void onNext(Long aLong) { 
                        onTick(aLong); 
                    } 

                    @Override 
                    public void onError(Throwable e) { 
                        e.printStackTrace(); 
                    } 

                    @Override 
                    public void onComplete() { 
                        onFinish(); 
                    } 
                }); 
    } 

    public void cancel(){ 
        if(disposable!=null) disposable.dispose();
    } 
} 
```

使用：

```
public class MainActivity extends AppCompatActivity { 

    @Override protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.start_activity);

        new CountDownTimer(10L, TimeUnit.SECONDS) {

            @Override 
            public void onTick(long tickValue) {
                Log.d("CountDown", "Remaining: " + tickValue);

                // cancel();
            } 

            @Override 
            public void onFinish() { 
                Log.d("CountDown", "The End!! ");
            } 
        }.start();
    } 
} 
```

代码的所有者[https://gist.github.com/chemickypes/fa3b7fc5b5a00a3ce37fee5815018702](https://gist.github.com/chemickypes/fa3b7fc5b5a00a3ce37fee5815018702)

# entity-framework-4 - 如何从连接中使用 Entity Framework + PostgreSQL？

> ID：11322635
> 
> 赞同：7
> 
> 时间：2012-07-04T04:57:27.003
> 
> 标签：entity-framework-4, postgresql-9.1, npgsql

我已经看到讨论使用官方说明的实体框架和 PostgreSQL 的线程。每次安装都需要运行这些说明，`gacutil`这对于部署目的来说不是那么方便。

我在这里要做的是将 PostgreSQL 连接直接传递给`DbContext`构造函数。这对我来说已经足够了，因为我将在`CodeFirst`没有设计师的情况下使用。这就是我所做的：

```
public class Context : DbContext
{
    Context(System.Data.Common.DbConnection connection)
        : base(connection, true)
    {
    }

    public static Context CreateContext()
    {
        NpgsqlConnection conn = new NpgsqlConnection("Server=127.0.0.1;Port=5432;User Id=postgres;Password=********;Database=xxx;");
        conn.Open();

        return new Context(conn);
    }
} 
```

但是使用这种方法，我收到一条`NotSupportedException`消息：

> 无法确定“Npgsql.NpgsqlConnection”类型连接的提供程序名称。

我应该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T06:49:04.407

您需要在`app/web.config`. 请参阅Npgsql 手册的第[3.4 节将 Npgsql 与 ProviderFactory 一起使用。](http://npgsql.projects.postgresql.org/docs/manual/UserManual.html)

当您为数据库（MySQL、PostgreSQL 等）安装 ADO.NET 提供程序时，安装程​​序通常会在 GAC 中注册提供程序程序集并将一个条目添加到`machine.config`. 如果您想在无需安装提供程序的情况下进行部署，则需要包含提供程序程序集的副本（将 Npgsql 程序集引用设置为项目的 Copy Local）并向您的应用程序添加一个条目，`app/web.config`如下所示：

```
<configuration>
  ...
  <system.data>
    <DbProviderFactories>
      <clear />
      <add name="Npgsql Data Provider" invariant="Npgsql" support="FF" description=".Net Framework Data Provider for Postgresql Server" type="Npgsql.NpgsqlFactory, Npgsql, Version=2.0.1.0, Culture=neutral, PublicKeyToken=5d8b90d52f46fda7" />
    </DbProviderFactories>
  </system.data>
  ...
</configuraiton> 
```

确保版本与您部署的 Npgsql 程序集的版本完全匹配（或者只是省略 Version/Culture/PublicKeyToken）。如果`<Clear />`在其`machine.config`. 没有明确的，你会得到一个例外。但是，这也是假设您不依赖于`machine.config`为您的应用程序指定的任何其他提供程序。

# cordova - phonegap 推送通知插件和 pushwoosh.com 上弹出错误

> ID：11322636
> 
> 赞同：1
> 
> 时间：2012-07-04T04:57:36.560
> 
> 标签：cordova, push-notification, xcode4.3, phonegap-plugins

我正在使用 pushwoosh.com 服务为 phonegap 实现推送通知插件。我按照本教程... [http://www.pushwoosh.com/programming-push-notification/push-notification-sdk-integration-for-phonegap/](http://www.pushwoosh.com/programming-push-notification/push-notification-sdk-integration-for-phonegap/)

在我的配置文件遇到问题并克服了该错误之后，我现在在运行我的应用程序时收到“警报”错误。这是错误的屏幕截图...![在此处输入图像描述](../Images/9d8a838295d9118544d9a8d249618c66.png)

当我谷歌它时，我没有看到任何关于该错误的信息。我已经检查了我的代码好几次，并没有看到任何突出的“错误”。我希望这里的其他人遇到了这个问题并以某种方式解决了它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T06:42:09.213

这不是错误。这是调试警报，显示您的设备已成功订阅推送通知。您可以通过删除 index.html 中的所有行来删除所有调试警报，如下所示：

navigator.notification.alert(...)

# java - 我有一个错误：setOnItemClickListener 不能与微调器一起使用，出了什么问题？

> ID：11322642
> 
> 赞同：114
> 
> 时间：2012-07-04T04:58:23.967
> 
> 标签：java, android, android-spinner

请这是我下面的代码，我在下面粘贴错误消息：我正在尝试`setOnItemClickListener`在微调器上使用，是否允许？

```
@Override
public void onItemClick(AdapterView<?> arg0, View v, int index, long arg3) {
    if (quantity[index]=="Meter" ){
        s1="Meter";
        Toast.makeText(v.getContext(), "convert from meter",Toast.LENGTH_SHORT).show();
    } 
}

   });

convertto.setOnItemClickListener(new OnItemClickListener()
{
    @Override
    public void onItemClick(AdapterView<?> arg, View v1, int index1, long arg4)
    {
        if ((quantity[index1]=="Meter") && (s1.equalsIgnoreCase("Meter")))
        {
            Toast.makeText(v1.getContext(), " to meter",Toast.LENGTH_SHORT).show();
            var2=var1;
            lresult.setText("" + var2);
        }
    }      
});

}

} 
```

这是错误

```
FATAL EXCEPTION: main
07-04 09:48:39.912: E/AndroidRuntime(694): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.a2zunitconverter.miniproject/com.a2zunitconverter.miniproject.lenght}: java.lang.RuntimeException: setOnItemClickListener cannot be used with a spinner.
07-04 09:48:39.912: E/AndroidRuntime(694):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
07-04 09:48:39.912: E/AndroidRuntime(694):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-04 09:48:39.912: E/AndroidRuntime(694):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-04 09:48:39.912: E/AndroidRuntime(694):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-04 09:48:39.912: E/AndroidRuntime(694):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-04 09:48:39.912: E/AndroidRuntime(694):  at android.os.Looper.loop(Looper.java:123)
07-04 09:48:39.912: E/AndroidRuntime(694):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-04 09:48:39.912: E/AndroidRuntime(694):  at java.lang.reflect.Method.invokeNative(Native Method)
07-04 09:48:39.912: E/AndroidRuntime(694):  at java.lang.reflect.Method.invoke(Method.java:507)
07-04 09:48:39.912: E/AndroidRuntime(694):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-04 09:48:39.912: E/AndroidRuntime(694):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-04 09:48:39.912: E/AndroidRuntime(694):  at dalvik.system.NativeStart.main(Native Method)
07-04 09:48:39.912: E/AndroidRuntime(694): Caused by: java.lang.RuntimeException: setOnItemClickListener cannot be used with a spinner.
07-04 09:48:39.912: E/AndroidRuntime(694):  at android.widget.Spinner.setOnItemClickListener(Spinner.java:102)
07-04 09:48:39.912: E/AndroidRuntime(694):  at com.a2zunitconverter.miniproject.lenght.onCreate(lenght.java:31)
07-04 09:48:39.912: E/AndroidRuntime(694):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-04 09:48:39.912: E/AndroidRuntime(694):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-04 09:48:39.912: E/AndroidRuntime(694):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2012-07-04T05:01:30.823

查看 logcat 的第一行：

```
java.lang.RuntimeException: setOnItemClickListener cannot be used with a spinner. 
```

`setOnItemClickListener`不能与`Spinner`. 改为使用`setOnItemSelectedListener`。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2015-07-13T07:24:09.193

正如@Alex 所说，你必须使用

```
spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {

        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {

        }
    }); 
```

或者，如果您使用的是 ButterKnife：

```
@OnItemSelected(R.id.spinner)
public void onSpinnerItemSelected(int index){
    // ...
} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2018-01-19T20:41:36.803

# 科特林：

```
spinner.onItemSelectedListener = object : AdapterView.OnItemSelectedListener {
    override fun onItemSelected(parent: AdapterView<*>, view: View, position: Int, id: Long) {
        print("onItemSelected position = $position id = $id")
    }

    override fun onNothingSelected(parent: AdapterView<*>) {

    }
} 
```

我写它是因为从接口内联创建对象是不同的。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-03-12T18:32:25.793

只需将您的实施形式更改`setOnItemClickListener`为`setOnItemSelectedListener`. 之后您的代码应该可以正常工作而不会出错。

**爪哇：**

```
convertto.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {

        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {

        }
    }); 
```

**科特林：**

```
convertto.onItemSelectedListener = object : AdapterView.OnItemSelectedListener {

    override fun onItemSelected(parent: AdapterView<*>, view: View, position: Int, id: Long) {

    }

    override fun onNothingSelected(parent: AdapterView<*>) {

  }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-04T05:01:34.890

改变这个

```
 convertto.setOnItemClickListener(new OnItemClickListener()
   {

    @Override
    public void onItemClick(AdapterView<?> arg, View v1, int index1, long arg4)
    {
         if ((quantity[index1]=="Meter") && (s1.equalsIgnoreCase("Meter")))
        {

        Toast.makeText(v1.getContext(), " to meter",Toast.LENGTH_SHORT).show();
        var2=var1;
        lresult.setText("" + var2);
        }

    }

   }); 
```

到 onItemSelectedListener，

```
 convertto.setOnItemSelectedListener(new OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
         if ((quantity[index1]=="Meter") && (s1.equalsIgnoreCase("Meter")))
        {

        Toast.makeText(v1.getContext(), " to meter",Toast.LENGTH_SHORT).show();
        var2=var1;
        lresult.setText("" + var2);
        }

    }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
}); 
```

看起来您不能在 Spinner 中使用 itemClickListener，

这是解释它的错误行，

```
07-04 09:48:39.912: E/AndroidRuntime(694): Caused by: java.lang.RuntimeException: setOnItemClickListener cannot be used with a spinner. 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-05-29T11:56:02.927

解决者

```
 spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> adapterView, View view, int  
 i, long l) {

        }

        @Override
        public void onNothingSelected(AdapterView<?> adapterView) {

        }
    }); 
```

# objective-c - 我无法让滚动视图与情节提要一起使用

> ID：11322643
> 
> 赞同：0
> 
> 时间：2012-07-04T04:58:31.987
> 
> 标签：objective-c

我可以显示`UIScrollView`指示器，但我无法向下滚动以查看隐藏的内容。我在我的`viewDidLoad`：

```
self.scroller.contentSize = CGSizeMake(320, 600);

self.scroller.frame = CGRectMake(320,480,320,480); 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:07:04.963

```
 // define the area that is initially visible
  scrollViewCustom.frame = CGRectMake(0, 5, 354, 500);

  // then define how much a user can scroll it
 [scrollViewCustom setContentSize:CGSizeMake(354, 960)]; 
```

另外，清除滚动视图的背景颜色以显示文本。

```
 scrollViewCustom.backgroundColor = [UIColor clearColor]; 
```

# javascript - 如何使用 d3.js 避免在图中记录零

> ID：11322651
> 
> 赞同：12
> 
> 时间：2012-07-04T04:59:20.443
> 
> 标签：javascript, d3.js

我目前正在研究库 d3.js。我有使用 [动态线图的线图](http://bl.ocks.org/2657838) 这里我们可以选择绘制功率线性和对数。但我的问题是我的数据集中可能有一些值为零，并且由于 log 0 未定义，因此代码无法绘制它。在我的代码中，规模集是这样的

```
y = d3.scale.log().domain([0.1, max_y _value]).range([h, 0]).nice(); 
```

这就是它的使用方式

```
 lineFunction = d3.svg.line()
        .y(function(d) {
          return y(d);
        }); 
```

我知道这是一个奇怪的问题。但是有没有一种方法可以处理 log 0 值，这样如果我有单个零值，其余的都可以正确绘制。如果是，我可以在同一个语句中给出两个域和范围（处理 0 值），而不是如何绑定到 y 轴？

感谢任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-04T05:19:05.090

我通过使用[钳位](https://github.com/d3/d3-scale#continuous_clamp)功能解决了我的问题。这就是我更改代码的方式：

```
y = d3.scale.log().clamp(true).domain([0.1, max_y _value]).range([h, 0]).nice(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T08:35:51.727

如果您有一个域边界之一为 0 对数刻度的域将不适合您。对数刻度还为您提供了一个带有不可配置的刻度数的 tick() 函数。

我目前的任务是在线性比例散点图上显示具有任意域和范围的数据，但用户可以选择切换到对数比例。这包括有问题的 [0,n] 和 [n,0] 域。

这是我想出的处理这些情况的解决方案：如果我们使用线性比例将我们的域投影到具有正边界的任意范围，则可以避免该问题。我选择 [1,10] 但它可以取任何正数。之后，我们可以使用正常的对数刻度。

```
d3.scale.genericLog = function() {
    return GenericLog();
};
function GenericLog() {
    var PROJECTION=[1,10];
    var linearScale, logScale;

    linearScale=d3.scale.linear();
    linearScale.range(PROJECTION);

    logScale=d3.scale.log();
    logScale.domain(PROJECTION);

    function scale(x) {
        return logScale(linearScale(x));
    }
    scale.domain = function(x) {
        if (!arguments.length) return linearScale.domain();
        linearScale.domain(x);
        return scale;
    };
    scale.range = function(x) {
        if (!arguments.length) return logScale.range();
        logScale.range(x);
        return scale;
    };
    scale.ticks = function(m) {
        return linearScale.ticks(m);
    };
    return scale;

} 
```

用法：

```
var scale1 = d3.scale.genericLog().domain([0,1]).range([500,1000]);
var scale2 = d3.scale.genericLog().domain([-10,0]).range([500,1000]);
scale1(0)   //500
scale2(-10) //500
scale2(0)   //100 
```

我只需要 range()、scale()、ticks() 函数，所以我只包含了这些，但实现所有其他函数的时间不会超过 5 分钟。另外：请注意，我使用的是线性刻度的 ticks() 值，因为我必须限制刻度的数量，而使用线性刻度更容易。

编辑： **注意** 根据您选择的投影，它会扭曲您的对数刻度。您使用的更宽的间隔将更多地拉伸您的秤的下部。

# c# - 在 C# 中获取已安装程序的 exe 名称？

> ID：11322653
> 
> 赞同：3
> 
> 时间：2012-07-04T04:59:29.040
> 
> 标签：c#, winforms, registry, visual-c#-express-2010

我正在使用它来获取程序名称，但我需要 exe 名称。我如何找到它们？

```
string SoftwareKey = "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Installer\\UserData\\S-1-5-18\\Products";
RegistryKey rk = default(RegistryKey);
rk = Registry.LocalMachine.OpenSubKey(SoftwareKey);
//string skname = null;
string sname = string.Empty;

foreach (string skname in rk.GetSubKeyNames())
{

  try
    {
       sname = Registry.LocalMachine.OpenSubKey(SoftwareKey).OpenSubKey(skname).OpenSubKey("InstallProperties").GetValue("DisplayName").ToString();
       listBox1.Items.Add(sname);
     }
     catch (Exception ex)
     {
        MessageBox.Show(ex.Message);
     }
} 
```

我正在尝试这样做：

```
System.Diagnostics.Process.Start("Name.exe"); 
```

运行程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:06:20.237

安装程序不知道，也确实不知道实际的可执行文件。它只知道安装包 - .MSI 文件。

为了获得可执行文件的名称（是的，许多“程序”由大量 .EXE 文件组成），您需要查询 .MSI 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:09:21.687

在 Windows 中，程序通常由 msi 文件安装，单个包可以安装多个 exe。确实，有时程序是由 setup.exe 安装的，但它们只是提取真正的 msi 文件的包装器。

某些供应商（如 InstallShield）可能会将 setup.exe 存储在本地硬盘的某个位置，以防用户需要再次启动 setup.exe 以进行修改\卸载。但是，这是供应商特定的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:37:44.643

缺乏对细节的澄清，您可以在本地驱动器上获取 .exe，如下所示：

```
var allExePaths =
    from drive in Environment.GetLogicalDrives()
    from exePath in Directory.GetFiles(drive, "*.exe", SearchOption.AllDirectories)
    select exePath; 
```

如果您正在寻找一个特定的，请提供更多详细信息，说明哪些因素将决定您正在寻找的那个。使用注册表列出已安装的程序似乎不是您想要做的，所以请更具体。

# codeigniter - Jquery .ajax() 函数不从 codeigniter 控制器返回值

> ID：11322657
> 
> 赞同：1
> 
> 时间：2012-07-04T04:59:42.847
> 
> 标签：codeigniter, jquery, codeigniter-2

我有一个正在开发的网站，我正在尝试向控制器（codeigniter 框架）发出 ajax 请求。我在萤火虫中看到我的控制器正在接收我的帖子值，但由于某种原因它没有发回响应。我已经将其设置为非常简单，此时无需数据库调用，仅用于测试，但仍然无法正常工作。有任何想法吗？

在我看来，这是我的表格：

```
<div class="purchaseState">
     <input type="text" name="city" id="city" class="grayGrad"/>
</div>      
<div>
     <ul id="cityResults">
          <!-- AJAX results here -->
     </ul>
</div> 
```

这是我的控制器返回值：

```
function citySearch() { 
     echo '<li>test</li>';
} 
```

这是我的 Jquery ajax

```
//New City Search
$('#city').keyup( function() {

     var city = $('#city').val();

    $.ajax({
         type: "POST",
         url: "page/citySearch",
         data: { city: city },
         }).done(function( data ) {
         $('ul#cityResults').append(data);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:05:24.713

你应该使用ajax`success`回调：

```
$('#city').keyup(function() {

 var city = $('#city').val();

    $.ajax({
         type: "POST",
         url: "page/citySearch",
         data: { city: city },
         success: function(data) {
            $('ul#cityResults').append(data);
         } 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:36:41.117

请按以下方式更改 AJAX 函数中的 url。

```
$('#city').keyup(function() {
var city = $('#city').val();
$.ajax({
     type: "POST",
     url: "<?php echo base_url; ?>page/citySearch",
     data: { city: city },
     success: function(data) {
        $('ul#cityResults').append(data);
     } 
});
}); 
```

# java - 有没有办法将 java 函数导出到库中的其他包，而不是库的用户？

> ID：11322663
> 
> 赞同：4
> 
> 时间：2012-07-04T05:01:18.983
> 
> 标签：java, visibility

所以，这里有一个例子。我在包中有一个库`HTTP`。我在例如 package 中定义了库的子部分`HTTP.TCPProtocol`。现在我想使用 HTTP 包中的 TCPProtocol，这意味着我必须公开 TCPProtocol 功能。同时，不应将此功能导出给图书馆的用户。

我该怎么做呢？我不想把我的整个库放到一个包中，因为我觉得单独的子包确实使代码更结构化，并且在 Eclipse 中更容易导航。但是四处浏览，我找不到在我的项目中公开函数的方法，但不能将它们导出到我的项目之外。

编辑：鉴于我能够想出一个更好的例子，我正在更新 OP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T05:19:37.477

一种简单的方法是将您的“实用程序”方法列入白名单，以便它们仅采用某种类型的调用者实例。

```
package gameengine;

interface Whitelisted {} // marker 
```

然后你的方法：

```
public void myMethod(Whitelisted caller, String arg) 
```

并调用：

```
package gameengine.network;

class Foo implements Whitelisted {
...
Someclass.myMethod(this, "foo"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:19:36.823

在没有看到你的依赖关系的情况下，社区能给你的唯一真正的建议是重构你的代码。如果您的网络包中的某些内容需要了解您的游戏引擎，那么您似乎有一个泄漏的抽象。很难说没有看到你的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T07:38:25.017

检查呼叫者的类以锁定所有不需要的呼叫者。调用者的类可以从堆栈跟踪中获得。在下面的示例中，只有 Bar 的实例会触发 system.out.println，所有其他实例都会触发异常。您甚至可以通过这种方式进行包级检查。确保所有允许的调用者类方法都不是公共的，或者它们可以间接调用 doSomething 方法。您甚至可以通过进一步检查堆栈跟踪来进行更深入的检查。

但请注意，熟练的开发人员可以规避您在此问题上尝试做的任何事情。没有解决方案是真正“安全”的。

```
package one.two;

import one.Bar;

public class Foo {

    public void doSomething() {

        StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();
        StackTraceElement stackTraceElement = stackTrace[2];
        String className = stackTraceElement.getClassName();

        if (Bar.class.getName().equals(className)) {
            System.out.println("jay!");
        } else {
            throw new RuntimeException("not allowed");
        }

    }
} 
```

* * *

```
package one;

import one.two.Foo;

public class Bar {

    void makeCall() {
        new Foo().doSomething();
    }

    public static void main(String[] args) {
        new Bar().makeCall();
    }

} 
```

# xml - 根据xslt中的条件将字符串分配给变量

> ID：11322671
> 
> 赞同：4
> 
> 时间：2012-07-04T05:01:46.533
> 
> 标签：xml, xslt, xpath, xslt-1.0, xslt-2.0

如果特定属性返回特定值，我想为变量赋值。在这里，如果 pr:all/[@pr:name=current()/@cx:name]/pr:properties/(@ls:middlename) 是“cengie”，我想在这里将值“young”分配给可变的“person” ”。那可能吗？

```
<xsl:variable
  name='person' select='pr:all/[@pr:name=current()/@cx:name]/pr:properties/(@ls:middlename)'>
</xsl:variable> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-04T06:22:04.967

您可以将任何 xslt 代码放在**xsl:variable**中，结果将分配给变量。在这种情况下，您可以使用**xsl:if**来检查您的状况

```
<xsl:variable name="person"> 
    <xsl:if test="pr:all[@pr:name=current()/@cx:name]/pr:properties[@ls:middlename='cengie']">
       <xsl:text>young</xsl:text>
    </xsl:if>
</xsl:variable> 
```

如果你想要一个“else”的情况，你可以使用**xsl:choose**代替。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T05:07:13.030

您可以使用`use-when`，它有条件地应用模板。

但是，它是在模板的“编译时”进行评估的。

检查这个：[https ://github.com/wildfly/wildfly/blob/master/testsuite/integration/src/test/xslt/enableTrace.xsl](https://github.com/wildfly/wildfly/blob/master/testsuite/integration/src/test/xslt/enableTrace.xsl)

```
<xsl:template match="//l:subsystem/l:periodic-rotating-file-handler" use-when="$trace">
    <xsl:choose>
        <xsl:when test="$trace='none'">
            ...
        </xsl:when>
        <xsl:otherwise>
            ...
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

将其应用于您的代码...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T03:53:02.027

> ```
> <xsl:variable   name='person' 
>     select='pr:all/[@pr:name=current()/@cx:name]/pr:properties/(@ls:middlename)'>
> 
> </xsl:variable> 
> ```

**这在语法上是非法的 XPath —— 1.0 和 2.0 都是如此**。定位步骤不能以谓词开始。有问题的子字符串是：`/[`.

**另一个语法错误**（这次是 XML-well-formedness 错误）是`<xsl:variable>`上面引用的元素没有关闭。

你需要纠正这个。

除此之外，这里是一个 XSLT 2.0 解决方案（上面引用的 XPath 表达式的语法和`<xsl:variable>`更正的：

**在 XSLT 2.0 中：**

```
<xsl:variable name="person" as="xs:string?" select=
  "'young'[current()/pr:all[@pr:name=current()/@cx:name]
                                            /pr:properties
                                               [@ls:middlename='cengie']
          ]"/> 
```

# ruby-on-rails-3 - 无法批量分配受保护的属性问题

> ID：11322676
> 
> 赞同：1
> 
> 时间：2012-07-04T05:02:21.853
> 
> 标签：ruby-on-rails-3, mass-assignment

我知道为什么批量分配不好背后的所有安全原因，但我无法弄清楚为什么我的应用程序试图进行批量分配。

我只是想为我的 Section 模型**创建一个新记录**，但我收到了“无法批量分配受保护的属性”错误。以下是可能涉及的模型。有人可以向我解释一下这是如何分配的吗？我是 Rails 新手，所以我可能会遗漏一些非常简单的东西。

```
class Section < ActiveRecord::Base
  belongs_to :project
  belongs_to :type, :foreign_key => 'type_id', :class_name => 'SectionType'
  attr_accessor :order
end

class SectionType < ActiveRecord::Base
  attr_accessible :name, :template
end

class Project < ActiveRecord::Base
  has_many :sections
  attr_accessible :description, :name, :short, :status, :subtitle, :version

  def to_param
    return name.gsub(/\s+/, '%20')
  end
end 
```

任何帮助将不胜感激，我是 Rails 新手，知道这可能是一个简单的问题，但我一直在努力寻找答案，但找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:24:37.543

如果您尝试创建一个新`Section`对象但失败了，那是因为您没有在该模型中列为可访问的任何属性。您将需要使用与模型中已有`attr_accessible`的类似的调用来执行此操作。`Project`

# java - 同步读并行，一次写一个

> ID：11322679
> 
> 赞同：1
> 
> 时间：2012-07-04T05:02:32.750
> 
> 标签：java, synchronization, thread-safety

我有一个对象 obj，它被许多线程频繁读取，但仅由一个线程定期更新。更新发生在很长一段时间后（比如 10 分钟）。

数据不那么跨国。意味着如果读取线程在一段时间内获得陈旧数据（旧），那么它完全可以。

现在我想到了使用以下方法进行同步：

```
final Object lock = new Object();
private MyObject obj = new MyObject(); //this is the data

public String getDataFieldName(){
 synchronized(lock){
   return this.obj.name;
 }
}

/*the following code is wrong right?As its just synchronizes the code for getting reference.But after getting reference read thread R1 may try to get data while write Thread is modifying data.Will that give exception?How to solve this? */
public String getData(){
 synchronized(lock){
   return this.obj;
 }
}

//only one thread can update.But how multipe threads can read at once?
public updateData(args ) {
  synchronized(lock){
    //do update
 }

} 
```

我的问题如下：

1.  我不希望只有一个线程来读取数据。读取应该是并行的。

2.  我如何同步读取和写入？如果写入线程正在更新并且读取线程正在读取我不会得到一些异常。如果读取得到一些旧数据也没关系 3）如果读取线程正在读取而写入线程正在更新，我会得到异常？会不会有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:27:48.620

在这种情况下，您不需要任何同步。您所要做的就是：

*   确保`MyObject`是[不可变](http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html)的，这意味着您永远不会更改对象中的任何值相反，`MyData`每次更改时都构造一个新对象。这可以防止任何人看到半变化的对象。
*   将obj 声明为[volatile](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html)，以确保所有线程每次都能看到更新的值。

如果您遵循这些步骤，您将永远不会因为并发读取和写入而出现异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:15:03.807

1.  使用 volatile 关键字，与同步不同，它不会获取锁，并且会提供多重访问，反映一个线程对另一个线程的更新。

2.  但是最好有某种同步，因为 volatile 不能确保防止数据上的竞争条件。因此，如果您不想使用同步，那么最好使用不可变对象

**例如：**

```
import java.util.Date;

/**
* Planet is an immutable class, since there is no way to change
* its state after construction.
*/
public final class Planet {

 //Final primitive data is always immutable.

  private final double fMass;

  private final String fName;

  private final Date fDateOfDiscovery;

  public Planet (double aMass, String aName, Date aDateOfDiscovery) {
     fMass = aMass;
     fName = aName;
     //make a private copy of aDateOfDiscovery
     //this is the only way to keep the fDateOfDiscovery
     //field private, and shields this class from any changes that 
     //the caller may make to the original aDateOfDiscovery object
     fDateOfDiscovery = new Date(aDateOfDiscovery.getTime());
  }

  public double getMass() {
    return fMass;
  }

  public String getName() {
    return fName;
  }

  public Date getDateOfDiscovery() {
    return new Date(fDateOfDiscovery.getTime());
  }

} 
```

# mysql - 如何构建用于检测mysql中过期许可证的表？

> ID：11322686
> 
> 赞同：2
> 
> 时间：2012-07-04T05:03:13.267
> 
> 标签：mysql, database, database-design, data-structures

我正在尝试设计一个表格来帮助我确定许可证是否已过期。我想要更好的方法来构建表格的建议。

具体来说，我想做以下三件事：

*   我想知道许可证是否存在
*   我想知道许可证是否过期
*   如果许可证尚未过期，我想延长许可证

我想出了下表。当用户许可证延期时，该用户许可证的第一个条目被标记为过期。我认为这种方法很好，因为如果出现某种问题，我还有历史可循。

```
----------------------------------------------------------------------------
|   user_id   |   licence   |    start    |    stop          |   expired   |
----------------------------------------------------------------------------
|     22      |    other    |   03JUL2010 |    03JUL2012     |    true     | 
|     55      |  commercial |   03JUL2012 |    03JUL2014     |    true     | <= marked as expired because it was extended.
|     55      |  commercial |   04JUL2012 |    03JUL2016     |    false    | 
---------------------------------------------------------------------------- 
```

**注意：** 04JUL2012 显示许可证延长的日期。

这看起来是个好方法吗？你有什么要改变的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:18:56.937

您将相同的记录存储两次。相反，您可以寻求更好的设计

表格1

```
user-id  |  license  |  start | stop | expired | extended 
```

表2

```
prim_key | user_id | extended_date | extended_date_expiry 
```

在 table1 中扩展列是一个布尔值 true 或 false。

如果extended 为真，那么您可以在table2 中搜索用户扩展至的日期。

在 table2 中，您可以为同一用户存储多个延长日期并获取历史记录。它延长到的最高日期将是该 user_id 的有效日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:40:29.737

我将有三个表，因为用户和许可证之间似乎存在 N:M（多对多关系）：

```
users
------------
user_id [PK]
...

users_has_licenses
----------------------
user_id [PK] (references users.user_id)
license_id [PK] (references licenses.license_id)
issued [PK]
expire_date

licenses
-------------------
license_id [PK]
... 
```

表格`users`和`licenses`相当简单。它们将用户和许可证固有的信息存储为独立实体。

在`users_has_licenses`交叉引用表中，行在三个字段中是唯一的：`user_id`、`license_id`和`issued`。`issued`是一个日期时间字段，表示许可证的颁发日期或开始日期。由于用户可以多次续订许可证，并且您需要保留许可证续订的历史记录，因此我们将此字段作为复合主键的一部分。

您可以不使用`expired`字段，因为您已经可以从数据本身判断它是否已过期，并且您不必进行例行更新以使数据保持最新。例如，要查找用户的过期许可证，您只需执行以下查询：

```
SELECT
    a.license_id
FROM
    (
        SELECT user_id, license_id, MAX(issued) AS issued
        FROM users_has_licenses
        WHERE user_id = <user_id here>
        GROUP BY user_id, license_id
    ) a
INNER JOIN
    users_has_licenses b ON
        a.user_id = b.user_id AND
        a.license_id = b.license_id AND
        a.issued = b.issued AND
        b.expire_date < NOW() 
```

这比您预期的要忙一些，但这只是因为您保留了过去许可证续订的数据。在这种情况下，您必须按组进行最大值，以确保您获得最新的许可期限。第一个子选择找出每个特定用户的最新许可证，然后在`expire_date`已经通过的条件下加入。

如果您想获取所有用户的许可证（最近一段时间），无论它们是否已过期，并且仍想知道它们是否已过期，只需将 更改`INNER JOIN`为 a `LEFT JOIN`，所有未过期的许可证都将具有`NULL`值连接的表。

要更新用户的许可证，您只需要一个`INSERT`而不是一个`INSERT` ***和***一个`UPDATE`，就像您当前的设计一样：

```
INSERT INTO users_has_licenses VALUES (<user_id here>, <license_id here>, NOW(), NOW() + INTERVAL 4 YEAR) 
```

**编辑：**解决提问者对此答案的评论：

> 我还有一个关于更新许可证的问题。如果用户在第一个许可证 6 个月后续订许可证，您将如何在上面列出的 INSERT INTO 语句中包含额外的时间？我认为最后一个值需要是 now() +remaining time + expiry period（或类似的东西）。除非我误解了什么。我只是不确定如何获得剩余时间。

假设您选择不保留过去许可期的历史记录，您可以`UPDATE`对当前记录执行以下操作：

```
UPDATE users_has_licenses a SET
    a.issued = NOW(),
    a.expire_date = (
        SELECT 
            NOW() 
            + INTERVAL CASE WHEN DATEDIFF(expire_date, NOW()) < 0 THEN 0 ELSE DATEDIFF(expire_date, NOW()) END DAY 
            + INTERVAL 4 YEAR 
        FROM 
            users_has_licenses 
        WHERE 
            user_id = a.user_id AND 
            license_id = a.license_id
    )
WHERE
    a.user_id = <user_id here> AND
    a.license_id = <license_id here> 
```

这将更新`issued`为当前日期和`expire_date`当前日期+旧期限的剩余天数+常规到期期限（无论它可能是什么）。如果过去的许可证已经过期，那么剩余天数将为负数，在这种情况下，我们只需添加常规过期时间。

作为关于我发布到原始问题的上述架构的旁注，您不再需要将`issued`其作为主键的一部分。

# encryption - 盐可以防止字典或蛮力攻击吗？

> ID：11322691
> 
> 赞同：2
> 
> 时间：2012-07-04T05:04:20.167
> 
> 标签：encryption, passwords, salt, brute-force

我刚看了一篇[文章](http://codahale.com/how-to-safely-store-a-password/)。据说：

> 所以我并不是说盐是没有目的的，我是说它们不能防止字典或暴力攻击（它们不能）。

如果您有一个带有散列密码和盐的数据库转储，则只有在您知道 crypt 算法的情况下才能启动暴力破解。如果你使用开源，这可能是个问题。但是如果你稍微改变一下算法，这不是问题，直到有人知道它。我对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T05:18:34.403

Troy Hunt 最近写了一篇很棒的文章，[我们的密码哈希没有衣服](http://www.troyhunt.com/2012/06/our-password-hashing-has-no-clothes.html)，详细介绍了密码哈希的演变，包括 Salts。

尽管 Salts 阻止了与预先散列的彩虹表进行直接比较，但他的观点是，硬件已经改进到可以根据摩尔定律在短时间内将盐应用于未散列的彩虹密码并比较加盐的哈希值。

正如 Trickfire 所说，使用专有的散列算法是通过默默无闻的安全性。如果攻击者拥有你的数据库，他也很可能能够获取你的应用程序并对其进行反汇编并获得算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:09:39.320

[通过默默无闻的安全](http://en.wikipedia.org/wiki/Security_through_obscurity)

虽然它使找出密码的问题变得更加困难，但不建议依赖这种技术。

# jakarta-ee - 在 Tomcat 7 中获取 Java 堆空间问题

> ID：11322694
> 
> 赞同：5
> 
> 时间：2012-07-04T05:04:24.050
> 
> 标签：jakarta-ee, tomcat7

我正在开发一个由 Struts、Spring 和 Hibernate 组成的 Java EE Web 应用程序。在那里，我反复遇到以下异常（每天至少一次）。

**例外 1：**

```
Exception in thread "Timer-0" java.lang.OutOfMemoryError: Java heap space
    at java.util.LinkedHashMap.createEntry(LinkedHashMap.java:424)
    at java.util.LinkedHashMap.addEntry(LinkedHashMap.java:406)
    at java.util.HashMap.put(HashMap.java:385)
    at sun.util.resources.OpenListResourceBundle.loadLookup(OpenListResourceBundle.java:118)
    at sun.util.resources.OpenListResourceBundle.loadLookupTablesIfNecessary(OpenListResourceBundle.java:97)
    at sun.util.resources.OpenListResourceBundle.handleGetObject(OpenListResourceBundle.java:58)
    at sun.util.resources.TimeZoneNamesBundle.handleGetObject(TimeZoneNamesBundle.java:59)
    at java.util.ResourceBundle.getObject(ResourceBundle.java:368)
    at java.util.ResourceBundle.getObject(ResourceBundle.java:371)
    at java.util.ResourceBundle.getStringArray(ResourceBundle.java:351)
    at sun.util.TimeZoneNameUtility.retrieveDisplayNames(TimeZoneNameUtility.java:100)
    at sun.util.TimeZoneNameUtility.retrieveDisplayNames(TimeZoneNameUtility.java:81)
    at java.util.TimeZone.getDisplayNames(TimeZone.java:399)
    at java.util.TimeZone.getDisplayName(TimeZone.java:350)
    at java.text.SimpleDateFormat.subFormat(SimpleDateFormat.java:1110)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:899)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:869)
    at java.text.DateFormat.format(DateFormat.java:316)
    at org.apache.log4j.helpers.PatternParser$DatePatternConverter.convert(PatternParser.java:443)
    at org.apache.log4j.helpers.PatternConverter.format(PatternConverter.java:65)
    at org.apache.log4j.PatternLayout.format(PatternLayout.java:506)
    at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:310)
    at org.apache.log4j.DailyRollingFileAppender.subAppend(DailyRollingFileAppender.java:369)
    at org.apache.log4j.WriterAppender.append(WriterAppender.java:162)
    at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
    at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
    at org.apache.log4j.Category.callAppenders(Category.java:206)
    at org.apache.log4j.Category.forcedLog(Category.java:391)
    at org.apache.log4j.Category.log(Category.java:856)
    at com.mchange.v2.log.log4j.Log4jMLog$Log4jMLogger.log(Log4jMLog.java:161)
    at com.mchange.v2.log.log4j.Log4jMLog$Log4jMLogger.warning(Log4jMLog.java:221)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector.run(ThreadPoolAsynchronousRunner.java:624) 
```

**例外 2：**

```
Exception in thread "com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1" java.lang.OutOfMemoryError: GC overhead limit exceeded
    at java.util.HashMap.addEntry(HashMap.java:753)
    at java.util.HashMap.put(HashMap.java:385)
    at java.util.HashSet.add(HashSet.java:200)
    at com.mchange.v2.c3p0.util.ConnectionEventSupport.addConnectionEventListener(ConnectionEventSupport.java:39)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.addConnectionEventListener(NewPooledConnection.java:237)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.refurbishResourceOnCheckin(C3P0PooledConnectionPool.java:292)
    at com.mchange.v2.resourcepool.BasicResourcePool.attemptRefurbishResourceOnCheckin(BasicResourcePool.java:1606)
    at com.mchange.v2.resourcepool.BasicResourcePool.access$200(BasicResourcePool.java:32)
    at com.mchange.v2.resourcepool.BasicResourcePool$1RefurbishCheckinResourceTask.run(BasicResourcePool.java:1228)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
Exception in thread "com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#4" java.lang.OutOfMemoryError: GC overhead limit exceeded
Exception in thread "Task-Thread-for-com.mchange.v2.async.ThreadPerTaskAsynchronousRunner@6c8bb765" java.lang.OutOfMemoryError: GC overhead limit exceeded
Exception in thread "com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#3" java.lang.OutOfMemoryError: GC overhead limit exceeded
Exception in thread "com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2" java.lang.OutOfMemoryError: GC overhead limit exceeded
Exception in thread "Task-Thread-for-com.mchange.v2.async.ThreadPerTaskAsynchronousRunner@6c8bb765" java.lang.OutOfMemoryError: GC overhead limit exceeded
Exception in thread "Task-Thread-for-com.mchange.v2.async.ThreadPerTaskAsynchronousRunner@6c8bb765" java.lang.OutOfMemoryError: GC overhead limit exceeded
Exception in thread "Timer-0" java.lang.OutOfMemoryError: Java heap space
Exception in thread ""http-bio-8080"-exec-2" java.lang.OutOfMemoryError: Java heap space
Exception in thread ""http-bio-8443"-Acceptor-0" java.lang.OutOfMemoryError: Java heap space
Exception in thread ""http-bio-8080"-exec-3" java.lang.OutOfMemoryError: Java heap space
Exception in thread "com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#4" java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

这是我的配置：

```
-server -Xms2048m -Xmx2048m
-XX:NewSize=1024m -XX:MaxNewSize=1024m -XX:PermSize=512m
-XX:MaxPermSize=1024m -XX:+DisableExplicitGC" 
```

谁能指出我是否因为这种配置或其他任何原因而出现此异常？

我知道我的代码中存在一些问题，但我如何预测找出这些问题？我尝试过 Eclipse MAT 来分析内存转储，但没有任何想法。

我已经尝试为此增加内存，但除了减少此异常的频率外，它并没有太大帮助。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T05:19:44.137

关于为什么会出现这些异常，有两种选择。首先，您的应用程序可能只需要这么多内存。其次，您的应用程序泄漏内存。无论哪种情况，MAT 都是诊断问题的好工具。一个很好的起点是支配树和泄漏嫌疑报告。

# iphone - 如何将图像放入不规则形状的框架中

> ID：11322702
> 
> 赞同：1
> 
> 时间：2012-07-04T05:05:31.420
> 
> 标签：iphone, ios, uiimageview

我对不规则形状有疑问。我搜索了很多，但没有什么对我有用。我有许多不规则形状的框架，每个框架再次分为子区域。我想将照片库中的图像放入框架的每个子区域。但是我无法获得每个子区域的位置，并且由于形状也是不规则的，所以又是另一个问题来适应该区域的图像。谁能帮我 ！！这是该框架的一个示例。![图像有两个奇怪的形状框架](../Images/0df3e181cfb77e29c20c9f349d1b88c8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:16:09.570

你永远不能有不规则形状的框架。框架将始终呈矩形。您可以通过检测透明区域来完成。

[参考这个链接。它会让你知道如何做到这一点:)](http://iphonedevelopment.blogspot.in/2010/03/irregularly-shaped-uibuttons.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:23:06.623

你想通过圆弧来剪辑各种图像吗？例如，这是一个包含四张图片的屏幕快照（只是我在[http://images.google.com](http://images.google.com)上搜索狗时得到的随机图片）：

![未裁剪](../Images/31bd0a6f7e2211d1ad0e2df5e4b12d0d.png)

这里是用圆圈裁剪的相同的四张图像（或者更准确地说，四张图像中的每一张都分别被相同的圆形路径裁剪）：

![裁剪](../Images/eb58d1c6391b9463821b172d8ad13004.png)

这是执行此操作的代码

```
- (UIImage *)cropImage:(UIImage *)image locatedAt:(CGRect)imageFrame byCircleAt:(CGPoint)center withRadius:(float)radius
{
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, imageFrame.size.width, imageFrame.size.height, 8, 4 * imageFrame.size.width, colorSpace, kCGImageAlphaPremultipliedFirst);

    CGContextBeginPath(context);
    CGRect ellipseFrame = CGRectMake(center.x - imageFrame.origin.x - radius, imageFrame.size.height - (center.y - imageFrame.origin.y - radius) - radius * 2.0, radius * 2.0, radius * 2.0);
    CGContextAddEllipseInRect(context, ellipseFrame);
    CGContextClosePath(context);
    CGContextClip(context);

    CGContextDrawImage(context, CGRectMake(0, 0, imageFrame.size.width, imageFrame.size.height), image.CGImage);

    CGImageRef imageMasked = CGBitmapContextCreateImage(context);
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);

    UIImage *newImage = [UIImage imageWithCGImage:imageMasked];

    CGImageRelease(imageMasked);

    return newImage;
}

- (void)addSingleCroppedImage:(UIImage *)image at:(CGRect)imageFrame byCircleAt:(CGPoint)center withRadius:(float)radius
{
    UIImage *newImage = [self cropImage:image locatedAt:imageFrame byCircleAt:center withRadius:radius];
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:imageFrame];
    imageView.image = newImage;
    [self.view addSubview:imageView];
}

- (void)addCroppedImages
{
    NSString *bundlePath = [[NSBundle mainBundle] resourcePath];

    CGPoint center = CGPointMake(self.view.frame.size.width / 2.0, self.view.frame.size.width / 2.0);
    float radius = 150.0;

    UIImage *dog1 = [UIImage imageWithContentsOfFile:[bundlePath stringByAppendingPathComponent:@"imgres-1.jpg"]];
    UIImage *dog2 = [UIImage imageWithContentsOfFile:[bundlePath stringByAppendingPathComponent:@"imgres-2.jpg"]];
    UIImage *dog3 = [UIImage imageWithContentsOfFile:[bundlePath stringByAppendingPathComponent:@"imgres-3.jpg"]];
    UIImage *dog4 = [UIImage imageWithContentsOfFile:[bundlePath stringByAppendingPathComponent:@"imgres-4.jpg"]];

    CGRect frame;
    UIImage *currentImage;

    // upper left

    currentImage = dog1;
    frame = CGRectMake(center.x - currentImage.size.width, center.y - currentImage.size.height, currentImage.size.width, currentImage.size.height);
    [self addSingleCroppedImage:currentImage at:frame byCircleAt:center withRadius:radius];

    // upper right

    currentImage = dog2;
    frame = CGRectMake(center.x, center.y - currentImage.size.height, currentImage.size.width, currentImage.size.height);
    [self addSingleCroppedImage:currentImage at:frame byCircleAt:center withRadius:radius];

    // lower left

    currentImage = dog3;
    frame = CGRectMake(center.x - currentImage.size.width, center.y, currentImage.size.width, currentImage.size.height);
    [self addSingleCroppedImage:currentImage at:frame byCircleAt:center withRadius:radius];

    // lower right

    currentImage = dog4;
    frame = CGRectMake(center.x, center.y, currentImage.size.width, currentImage.size.height);
    [self addSingleCroppedImage:currentImage at:frame byCircleAt:center withRadius:radius];
} 
```

# java - org.hibernate.exception.SQLGrammarException：无法再次执行查询

> ID：11322706
> 
> 赞同：1
> 
> 时间：2012-07-04T05:05:35.633
> 
> 标签：java, spring, hibernate

我是 Spring 和 Hibernate 的新手。我正在尝试从数据库中插入和检索所有数据。我已经在 mySql db 中插入了数据，现在我正在尝试从数据库中检索所有数据，但我遇到了一些异常。我能做些什么来解决这个问题。

```
Jul 04, 2012 10:46:58 AM org.hibernate.util.JDBCExceptionReporter logExceptions
WARNING: SQL Error: 1064, SQLState: 42000
Jul 04, 2012 10:46:58 AM org.hibernate.util.JDBCExceptionReporter logExceptions
SEVERE: You have an error in your SQL syntax; check the manual that corresponds to     your MySQL server version for the right syntax to use near ') as emp1_0_, employee0_.address as address0_, employee0_.emp_email as emp3_0_, ' at line 1
Hibernate: select employee0_.emp_id) as emp1_0_, employee0_.address as address0_, employee0_.emp_email as emp3_0_, employee0_.manager_id as manager4_0_, employee0_.emp_name as emp5_0_ from employee employee0_
org.hibernate.exception.SQLGrammarException: could not execute query 
```

休眠代码是

```
public void getAll() {

    Session session = HibernateUtil.getSessionFactory().openSession();
    Transaction transaction = null;
    try {
        transaction = (Transaction) session.beginTransaction();
        List employees = session.createQuery("from Employee").list();
        for (Iterator iterator = employees.iterator(); iterator.hasNext();) {
            Employee employee = (Employee) iterator.next();
            System.out.println(employee.getName());
        }
        transaction.commit();
    } catch (HibernateException e) {
        transaction.rollback();
    } finally {
        session.close();
    }
} 
```

雇员.java

```
@Entity
@Table(name="employee")
public class Employee {

private int id;
private String name;
private String email;
private String address;
private int managerId;

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name="emp_id)")
public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

@Column(name="emp_name")
public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

@Column(name="emp_email")
public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

@Column(name="address")
public String getAddress() {
    return address;
}

public void setAddress(String address) {
    this.address = address;
}

@Column(name="manager_id")
public int getManagerId() {
    return managerId;
}

public void setManagerId(int managerId) {
    this.managerId = managerId;
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T05:21:23.440

这

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name="emp_id)")
public int getId() {
    return id;
}

should be - 

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name="emp_id")
public int getId() {
    return id;
} 
```

`)`从末尾删除`name="emp_id)"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T05:22:07.630

Id 字段 emp_id 中存在拼写错误，有多余的 ')'

```
@Column(name="emp_id)") 
```

去掉大括号就可以了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T05:24:37.343

您指定的 id 的列名包含）删除它，例如

代替 `@Column(name="emp_id)") with @Column(name="emp_id")`

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name="emp_id") 
```

# node.js - NodeJS https 客户端错误 - 400

> ID：11322709
> 
> 赞同：1
> 
> 时间：2012-07-04T05:05:46.670
> 
> 标签：node.js, https, openssl, ssl-certificate

我正在创建一个连接到 Proxmox 2.1 的 REST api 的 NodeJS 服务。

我的脚本：

```
// module dependencies
var http    = require('http'),
    url     = require('url'),
    https   = require('https'),
    querystring = require('querystring'),
    fs     = require('fs');

exports.urlReq = function(reqUrl, options, cb){
    if(typeof options === "function"){ cb = options; options = {}; }// incase no options passed in

    // parse url to chunks
    reqUrl = url.parse(reqUrl);

    // http.request settings
    var settings = { 
        host: reqUrl.hostname,
        port: reqUrl.port || 80,
        path: reqUrl.pathname,
        headers: options.headers || {},
        method: options.method || 'GET',
        requestCert: false
    };

    // if there are params:
    if(options.params){
        options.params = querystring.stringify(options.params); 
        settings.headers['Content-Length'] = options.params.length; 
    }; 

    // MAKE THE REQUEST
    var req = https.request(settings); 

    req.on('error', function(err) {
        console.log(err);
    });

    // when the response comes back
    req.on('response', function(res){
        res.body = '';

        console.log("statusCode: ", res.statusCode);
        console.log("headers: ", res.headers);

        res.setEncoding('utf-8');

        // concat chunks
        res.on('data', function(chunk){ res.body += chunk });

        res.on('error', function(err){
            throw err;
        })

        // when the response has finished
        res.on('end', function(){

            // fire callback
            cb(res.body, res);
        });
    }); 

    // if there are params: write them to the request
    if(options.params){ req.write(options.params) };

    // end the request
    req.end();
} 
```

该脚本适用于 GET 请求，但在执行 POST 请求时，它会死掉。它不会抛出任何错误，它只是默默地失败。

当控制台记录响应时，这里是 res.connection 对象：

```
connection: 
      { pair: [Object],
        writable: true,
        readable: true,
        _paused: false,
        _needDrain: false,
        _pending: [],
        _pendingCallbacks: [],
        _pendingBytes: 0,
        socket: [Object],
        encrypted: [Object],
        authorized: false,
        _controlReleased: true,
        _events: [Object],
        _pool: <Buffer 48 54 54 50 2f 31 2e 31 20 34 30 30 20 50 61 72 61 6d 65 74 65 72 20 76 65 72 69 66 69 63 61 74 69 6f 6e 20 66 61 69 6c 65 64 20 2d 20 64 75 70 6c 69 63 ...>,
        _poolStart: 332,
        _poolEnd: 65536,
        parser: [Object],
        _httpMessage: [Circular],
        ondata: [Function: socketOnData],
        onend: [Function: socketOnEnd],
        npnProtocol: undefined,
        authorizationError: 'UNABLE_TO_VERIFY_LEAF_SIGNATURE' }, 
```

服务器使用自签名 SSL 证书。

任何帮助将不胜感激，

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-05T17:11:47.607

这已经相当老了，但我最近在 Proxmox 上遇到了类似的问题，并希望做出贡献，以防其他人看到这个问题。

要解决“authorizationError: 'UNABLE_TO_VERIFY_LEAF_SIGNATURE'”错误，您可以指示 node.js 接受自签名证书（默认情况下拒绝），将其放在脚本的顶部：

process.env['NODE_TLS_REJECT_UNAUTHORIZED'] = '0';

此外，我无法在您的代码中判断您是否设置了 Content-Type 标头，但必须将其设置为 application/x-www-form-urlencoded 才能发布到 Proxmox API。也许您已经在 options.headers 中设置了它，但是当您指定 Content-Length 时，我不确定。POST 也需要 CSRFPreventionToken，因此它也应该作为标头的一部分传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:15:02.063

`authorized: false`并`authorizationError: 'UNABLE_TO_VERIFY_LEAF_SIGNATURE'`明确说明这是一个证书问题，通常是由于[根证书颁发机构](http://en.wikipedia.org/wiki/Root_certificate)没有正确签署证书。

我不知道您是否可以在[Proxmox](http://www.proxmox.com/)服务器上设置正确签名的证书，但是管理它的人应该这样做。如果它是您维护或管理的某个软件，那么您有两种选择（请注意，以下适用于 HTTPS 客户端需要信任 HTTPS 服务器的所有情况）：

1.  在服务器上安装正确签名的证书（购买它，或告诉管理它的人这样做）；或者
2.  让您的客户信任无法验证的证书。

如果您要做第一件事，那么客户端就没有其他事情可做。

因此，以下是有关如何让您的 nodejs HTTPS 客户端**信任**来自特定服务器的自签名证书的简要说明（请注意，它只会**将该**特定证书添加到信任链中，而不是所有自签名证书）：

1.  使用 Web 浏览器访问目标 URL，并将证书保存在本地。[Mozilla Firefox](http://www.mozilla.org/en-US/firefox/)支持以 PEM 格式导出证书。
2.  如果您的浏览器无法导出 PEM 格式的证书，请使用[OpenSSL](http://www.openssl.org/)进行[转换](https://www.sslshopper.com/ssl-converter.html)。
3.  最后，通过 TLS 服务器选项对象指示 HTTPS 代理信任证书。有关详细信息，请参阅[nodejs tls.connect() 文档](http://nodejs.org/api/tls.html#tls_tls_connect_options_callback)。

# d3.js - 附加 在 SVG 中使用 D3 节点

> ID：11322711
> 
> 赞同：6
> 
> 时间：2012-07-04T05:05:54.160
> 
> 标签：d3.js

我试图在节点旁边添加一些弹出消息，但看起来除了 SVG <text> 元素之外的任何内容都不会显示附加。

这有效：

```
 node.append("text")
      .attr("dx", 16)
      .attr("dy", ".0em")
      .text(function(d) { return d.name }); 
```

但是当我附加 a`div`而不是`text`它时是不可见的。我在这里缺少什么吗？如何使 div 可见？

另外，如何轻松获取节点的位置，以便将定位属性转移到另一个元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T07:54:44.303

您不能将 HTML 元素放在 SVG 中的任何位置，您需要将它们包含在一个`foreignObject`元素中，请参见[此处](http://ajaxian.com/archives/foreignobject-hey-youve-got-html-in-my-svg)。如果您将`text`元素和`foreignObject`SVG 组（`g`元素）都包含在其中并在其上设置位置，则它们应该都显示在同一个位置，而无需在两者上设置相同的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-17T15:33:43.717

或者，您可以在自己的 div 中定义 svg 之外的 html 代码。然后使用以下内容按类附加内容：

```
d3.select("#nytg-tooltip").style('top',ypos+"px").style('left',xpos+"px").style('display','block'); 
```

如本例所示：

[http://www.nytimes.com/interactive/2012/10/15/us/politics/swing-history.html?_r=0](http://www.nytimes.com/interactive/2012/10/15/us/politics/swing-history.html?_r=0)

![在此处输入图像描述](../Images/964f9ed6f048522a0f36ff185926ad6d.png)

# c# - 静态哈希表应该有多少容量才能最大限度地减少冲突？

> ID：11322713
> 
> 赞同：1
> 
> 时间：2012-07-04T05:06:29.303
> 
> 标签：c#, .net, hashtable

我的程序检索我想通过字符串 ID 引用的元素的有限且完整的列表。我正在使用 .Net`Dictionary<string, MyClass>`来存储这些元素。我个人不知道会有多少元素。可能是几个。可能是数千。

鉴于程序确切知道它将在哈希表中放入多少元素，它应该指定什么作为表的容量。显然，它至少应该是它将包含的元素数量，但仅使用该数量可能会导致大量冲突。

是否有为已知数量的元素选择哈希表容量以平衡哈希冲突和内存浪费的指南？

**编辑：**我知道哈希表的大小可以改变。我首先要避免的是将其保留为默认分配，然后立即添加数千个元素，从而导致无数的调整大小操作。填充后，我不会添加或删除元素。如果我知道发生了什么，我可以确保前面有足够的空间。我的问题与哈希冲突与内存浪费的平衡有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T05:20:25.193

您的问题似乎暗示了一个错误的假设，即字典的容量是固定的。它不是。

如果您知道在任何给定情况下字典将至少包含一定数量的元素，那么您可以将该数字指定为字典的*初始*容量。字典的容量总是至少与其项目数一样大（至少对于 .NET 2 到 4 来说是这样；我相信这是一个未记录的实现细节，可能会发生变化）。

指定初始容量通过消除字典从其默认初始容量增长到您选择的容量时可能发生的分配来减少内存分配的数量。

如果使用的散列函数选择得当，那么冲突的数量应该相对较少，并且对性能的影响应该最小。在某些人为的情况下，指定一个过大的容量可能会有所帮助，但我绝对不会考虑这一点，除非分析表明字典的查找对性能有重大影响。

（作为人为情况的示例，考虑一个`int`容量为 10007 的字典，其所有键都是 10007 的倍数。在当前实现中，所有项目都将存储在单个存储桶中，因为存储桶通过将哈希码除以容量并取余数来选择。在这种情况下，字典将用作链表，强制它使用不同的容量可以解决这个问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:04:16.073

这是一个主观的问题，但让我尽力回答这个问题（从 CLR 2.0 的角度来看。只是因为我还没有探索 CLR 4.0 的字典是否有任何变化）。

您正在使用以字符串为键的字典。由于可能存在无限个可能的字符串，因此可以合理地假设每个可能的哈希码“均等”。或者换句话说，每个 2^32 哈希码（int 范围）都同样可能用于字符串类。BCL 中的当前版本的字典从由此获得的任何 32 位哈希码中删除第 32 位，从而基本上获得 31 位哈希码。因此，我们正在处理的范围是 2^31 个唯一的等可能哈希码。

请注意，哈希码的范围不取决于字典包含或可以包含的元素数量。

字典类将使用此哈希码将存储桶分配给“Myclass”对象。因此，本质上，如果两个不同的字符串返回相同的 31 位哈希码（假设 BCL 设计者已经高度明智地选择了字符串哈希函数，那么这样的实例应该被公平地分散）两者都将被分配相同的桶。在这样的哈希冲突中，什么也做不了。

现在，在 Dictionary 类的当前实现中，即使是不同的哈希码（同样是 31 位）也可能会出现在同一个桶中。桶索引标识如下：

```
hash = <31 bit hash code>
pr = <least prime number greater than or equal to current dictionary capacity>
bucket_index = hash modulus pr 
```

因此，无论因子部分如何，每个 (pr*factor + bucket_index) 形式的哈希码都将在同一个桶中结束。

如果你想绝对确定所有不同的可能的 31 位哈希码最终都在不同的桶中，唯一的方法是强制 pr 大于或等于最大可能的 31 位哈希码。或者换句话说，确保每个哈希码的形式为 (pr*0 + hash_code)，即 pr 应该大于 2^31。这通过扩展意味着字典容量应该至少为 2^31。

请注意，最小化哈希冲突所需的容量根本不取决于您要存储在字典中的元素数量，而是取决于可能的哈希码的范围。

你可以想象 2^31 是巨大的内存分配。实际上，如果您尝试将 2^31 指定为容量，则会出现两个 2^31 长度的数组。考虑到在 32 位机器上，RAM 上可能的最高地址是 2^32！！！！

如果由于某种原因，字典的默认行为对您来说是不可接受的，并且最小化哈希冲突（或者我会说存储桶冲突）对您来说至关重要，那么只希望您提供自己的哈希码（即您可以不使用字符串作为键）。这样的哈希码应该牢记获取桶索引的公式，并努力最小化可能的哈希码范围。最简单的方法是为您的唯一 MyClass 实例增量分配一个数字/索引，并将此数字用作您的哈希码。然后您可以将 MyClass 实例的总数指定为字典容量。但是，在这种情况下，可以轻松维护数组而不是字典，因为您知道对象的“索引”和索引是增量的。

最后，我想重申一下其他人所说的“不会有无数次调整大小”。每次发现自己空间不足时，字典都会将其容量加倍（四舍五入到大于或等于新容量的最接近的素数）。为了节省一些处理，您可以很好地将容量设置为您拥有的 MyClass 实例的数量，因为在任何情况下字典都需要这么多容量来存储实例，但这不会最小化“哈希冲突”，并且在正常情况下将是足够快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T05:13:14.213

像 HashTable 这样的数据结构用于动态内存分配。但是，您可以在某些结构中提及初始大小。但是，当您添加新元素时，它们的大小会扩大。您无法隐式限制大小。

有许多可用的数据结构，各有优缺点。你需要选择最好的。限制大小不会影响性能。您需要注意添加、删除和搜索，这会影响性能。

# php - 从 MySQL 条目创建字符串

> ID：11322715
> 
> 赞同：-2
> 
> 时间：2012-07-04T05:06:37.837
> 
> 标签：php, mysql, database, content-management-system

我正在尝试在我的简单 CMS 中自动添加页面，并且不是 PHP 的大用户，无法弄清楚如何从我的 MySQL 数据库中获取列并从中创建一组字符串。我会解释的。

```
$home=mysql_query("SELECT * FROM data WHERE callsign='home'"); //**

$num=mysql_num_rows($home);
$i=0;
while ($i < $num) {
 $f1=mysql_result($home,$i,"code"); //**
 $i++;
}
switch($_GET['page'])  {
case '#home' : $page = $f1; break; //**
}
echo $page; 
```

如何为 MySQL 数据库列中的每个条目在标有星号的行上创建字符串和变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:24:50.740

我不完全确定数据库中的“变量”和“字符串”是什么意思，但这就是我要纠正的方法。请注意，我正在使用[PDO](http://php.net/PDO)，因为这些`mysql_*`功能已被弃用。

```
// this is how you connect with PDO
$dbh = new PDO('mysql:dbname=yourdbname;host=yourhost','youruser','yourpassword');

// you can name the column from the database itself. This is much faster
// also the ? is a placeholder. We'll pass the value on execute()
// this prevents SQL Injection attacks.
$sth = $dbh->prepare("SELECT code FROM data WHERE callsign=?");

// use try { } catch { } to detect errors
try {
    $sth->execute( array($_GET['page']) );
}
catch(PDOException $e) {
    die( $e->getMessage() );
}

// now you can fetch(). This returns the first row as an array. list() names the only variable in it
list($code) = $sth->fetch(PDO::FETCH_NUM); 

$sth->closeCursor(); // close the cursor or you'll have problems reusing the db handle

print $code; // output is a string 
```

# button - ExtJs 引用属性

> ID：11322723
> 
> 赞同：0
> 
> 时间：2012-07-04T05:07:41.433
> 
> 标签：button, extjs, textfield, ref

我有如下代码，

```
window = Ext.extend(Ext.Window, {
  initComponent: function(){
    Ext.applyIf(this,{
      fbar: {
        xtype: 'toolbar',
        items: [{
          xtype: 'button',
          id: 'button1',
          text: 'button1'
          ref: ??
        }
        ]
      },
      items:[{
        xtype: 'form',
        items: [{
          layout: 'form',
          items:[{
            xtype: 'field'
            id: 'field1'
            ref: ??
          }]
        }]
      }]
    })
  }
}) 
```

我可以为上面的字段和按钮的 ref 属性提供什么，以便我可以与 window 变量一起使用？请帮助我。

我尝试使用“../../button”，但无法通过窗口变量访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:21:40.450

我自己想。

button1 的引用将是“../button”，字段的引用将是“../../fieldname”...窗口被调用为，

测试窗口 = 新窗口（）；

并且 button1 可以作为 testWindow.button 访问

字段为 testWindow.fieldname

# svn - 如何通过 Google 帐户配置 Subversion 身份验证？

> ID：11322724
> 
> 赞同：0
> 
> 时间：2012-07-04T05:07:47.513
> 
> 标签：svn, openid, redmine

我在带有 Subversion 集成的 Ubuntu 服务器 12.04 上安装了 Redmine 1.3.x，并通过 google 帐户为身份验证用户安装了 Google Apps Login 插件。

但是 subversion 只接受通过 Redmine 的内部帐户进行用户身份验证

现在我想通过 google 帐户配置 Subversion 身份验证用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T10:54:33.070

根据[mod_auth_openid 常见问题解答](http://findingscience.com/mod_auth_openid/faq.html)，无法为 SVN http 访问配置 openid 身份验证。

从常见问题解答：

> 我可以使用 mod_auth_openid 来保护 dav 共享/我的 svn 安装吗？
> 
> 不可以。由于 OpenID 规范的分布式特性，用户必须能够被重定向到身份提供者网站以进行身份​​验证，然后被重定向回他们尝试查看的初始资源。任何需要基本 HTTP 身份验证的软件（webdav、svn 客户端）都不能支持这种重定向。mod_auth_openid 专门设计用于在从标准 Web 浏览器查看时保护基于 Web 的资源。

# c# - 游戏在桌面上运行但没有在我的 wpf 应用程序中运行..为什么？

> ID：11322725
> 
> 赞同：0
> 
> 时间：2012-07-04T05:07:48.073
> 
> 标签：c#, wpf, process, game-engine

fifa12 和 blur 游戏通过单击桌面上的图标成功运行，但是在通过我的 WPF 应用程序运行时，相同的 game.exe 运行，但是当我开始我的游戏时：快速比赛、在线或 LAN 游戏它加载并且永远不会启动。

我正在使用下面的代码来执行 game.exe：

```
proc.UseShellExecute = false;
string direct= new System.IO.FileInfo(@"" + txtLocation.Text + "").Directory.ToString();
proc.WorkingDirectory=direct;
proc.FileName = @"" + txtLocation.Text + "";
proc.CreateNoWindow = true;
proc.Verb = "runas";
proc.RedirectStandardError = true;
proc.RedirectStandardOutput = true;
p1.StartInfo = proc;
p1.Start(); 
```

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-04T05:55:41.680

先试试这个

```
string path = "c:\yourgame.exe";
System.Diagnostics.Process.Start(path); 
```

# visual-c++ - 如何在 Metro 应用程序中写入控制台/登录 VC++？

> ID：11322726
> 
> 赞同：5
> 
> 时间：2012-07-04T05:07:55.827
> 
> 标签：visual-c++, windows-8, microsoft-metro

我正在开发 vc++ 应用程序，在这个应用程序中如何写入控制台/日志？

c# ----system.diagnostics.debug.writeline("Hello"); 类似于 Vc++ ----？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:41:10.820

Metro 风格的应用程序不能有控制台。您可以在 C++/CXX 应用程序中使用 OutputDebugString() 在 Visual Studio 输出窗口上显示调试文本，就像 System.Diagnostics.Debug.Write 在托管应用程序中一样。批准的 winapi 函数不多，但 OutputDebugString() 没问题。起始 MSDN 页面[在这里](http://msdn.microsoft.com/en-us/library/windows/apps/br205755.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:48:25.313

如果您正在创建 GUI 应用程序，您可以自己启用控制台。

```
AllocConsole();
freopen("CONOUT$", "w+t", stdout); 
```

然后，您可以简单的 std::cout 或 printf 诊断消息。

# javascript - 将布尔类型的 js 变量值从一个 html 页面传递到另一个

> ID：11322729
> 
> 赞同：0
> 
> 时间：2012-07-04T05:08:36.087
> 
> 标签：javascript, html

我想将布尔类型的 JAVASCRIPT 变量值从一个 html 页面传递到另一个页面（从 page1.html 到 page2.html）。我不知道这样做。我不确定我的方法是对还是错。*请建议我正确的方法来做到这一点。*

**第一次加载页面时first_load**的值应该改变，改变的值将被发送到另一个 html 页面。

```
<html>
  <head>
    <script type="text/javascript">
      first_load = false; 
      function load() {
        first_load = true;
        alert("first_load="+first_load);
        //pass the value of first_load to page2.html
      }
    </script>
  </head>    
  <body onload="load()">    
  </body>
</html> 
```

**如何在 page2.html 中获取 first_load 的值？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:23:04.270

有几种方法可以实现您尝试做的事情，您可以使用

html5网络存储

[http://www.w3schools.com/html5/html5_webstorage.asp](http://www.w3schools.com/html5/html5_webstorage.asp)

饼干

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

或者你可以只使用一个 qurystring，毕竟 bool 值只是 true 或 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:23:22.337

您可以通过 url 变量、cookie 或 HTML5 Web 存储来完成此操作。

网址变量：

[如何从 GET 参数中获取值？](https://stackoverflow.com/questions/979975/how-to-get-the-value-from-url-parameter)

饼干

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

HTML5 网络存储

[http://www.w3schools.com/html5/html5_webstorage.asp](http://www.w3schools.com/html5/html5_webstorage.asp)

对用户和我的选择最透明的是 cookie。

# c# - 为什么委托在用作属性时必须是公共的？

> ID：11322732
> 
> 赞同：1
> 
> 时间：2012-07-04T05:08:56.870
> 
> 标签：c#, properties, delegates

```
class MyClass
{
    **private** delegate void MyDelegate(); //error: MyDelegate is less accessible than property Del
    private MyDelegate del;
    public MyDelegate Del
    {
        get { return this.del; }
        set { this.del = value; }
    }
} 
```

更改为公共修复，但我想更详细地了解原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T05:12:02.077

如果将 MyDelegate 定义为私有类型，那么 MyClass 的使用者如何知道 的类型`Del`？就像您定义了一个私有类并尝试在公共属性中使用该私有类

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T05:11:55.550

`MyDelegate`是公共财产的签字部分`Del`。

如果某物消耗了 的返回值`Del`，它肯定需要返回类型的定义。

换句话说，如果某个其他类有这样的实例`MyClass`：

```
MyClass myclass = new MyClass();
MyDelegate del = myclass.Del; 
```

`MyDelegate`除非是该类已知的类型，否则是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T05:14:14.567

`MyDelegate`是属性的类型`Del`。方式`MyClass`将是类实例的类型。如果您的课程不是公开的，您将无法从外部代码创建该课程的实例。

这里的情况也是如此。外部代码无法访问该类型`MyDelegate`，也不知道如何处理该属性。

# jquery - validate.js 总是验证

> ID：11322733
> 
> 赞同：0
> 
> 时间：2012-07-04T05:09:01.410
> 
> 标签：jquery, validation, jquery-validate

我的jQuery：

```
 <script src="js/jquery-1.4.4.js" type="text/javascript"></script>
 <script src="js/jquery.validate.js" type="text/javascript"></script>
    <script type="text/javascript">

       $(function() {
            var v = $("#form1").validate({
                ignore: ':hidden',
                rules: {
                    txtTest: { required: true }

                },
                messages: {
                    txtTest: "User name is required."

                }

            });

            $("#btnTest").click(function() {
                if (v.form()) {
                    alert("Success");
                }
                else {
                    alert("Fail");
                }
            });
        });

    </script> 
```

我的 HTML 是：

```
 <input type="text" id="txtTest" />
 <input type="button" id="btnTest" value="Test" /> 
```

虽然`txtTest`是空​​白的，但它的火。永远不要`alert("Success");`进入`else`条件。永远不要火。`alert("Fail");`它在萤火虫中没有显示任何错误。我找不到我的错误。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:14:24.260

**请** **通过电子邮件 http://jsfiddle.net/LjMQ2/1/ 进一步**[查看工作演示](http://jsfiddle.net/LjMQ2/1/)[http://jsfiddle.net/Xc3d5/](http://jsfiddle.net/Xc3d5/)

 **请参阅验证`element`api：[http ://docs.jquery.com/Plugins/Validation/Validator/element#element](http://docs.jquery.com/Plugins/Validation/Validator/element#element)

使用`v.form()`不会做任何事情，我认为使用`.element`然后传递您要验证的元素。休息一下演示会说清楚。

希望这可以帮助 ：）

**代码**

```
var v = $("form").validate({
    submitHandler: function() {
        console.log('successful submit');
        return false;
    }
});

$("#btnTest").click(function() {
    if (v.element('#txtTest')) {
        alert("Success");
    }
    else {
        alert("Fail");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:17:54.107

您遇到的唯一问题是表单中的每个输入或选择都必须具有一个`name`属性。

所以你的输入应该是这样的：

```
<input type="text" id="txtTest" name="txtTest" /> 
```

除此之外，你所有的演示对我来说都很好——我将@Tats_innit 演示简化为：http: [//jsfiddle.net/ryleyb/LjMQ2/2/](http://jsfiddle.net/ryleyb/LjMQ2/2/)

如果您在表单提交成功或失败时需要做一些特定的事情，那么正确的位置应该是在`submitHandler`or`invalidHandler`中。如果要触发验证，合理的做法是执行`$('form').submit()`.**

# vb.net - 如何从 vb.net 代码将参数传递给水晶报表

> ID：11322735
> 
> 赞同：3
> 
> 时间：2012-07-04T05:09:09.540
> 
> 标签：vb.net, crystal-reports

我创建了一个水晶报表（交叉表）。我没有使用任何数据集，而是使用 Crystal Report 中的向导从我的数据库模式中调用一个过程（给定的提供程序是 Oracle 的 Microsoft OLEDB 提供程序，之后我提供了我的数据库凭据（即模式、用户名、密码）和选择了程序并选择了我想在报告中显示的列）。

我需要从前端传递 5 个参数来生成报告。在查看水晶报表预览时，通过提供参数，报表工作正常。

现在我想从前端（vb.net）传递这 5 个参数以在 CrystalReportViewer 中显示报告。请建议在 aspx.vb 文件中编写的代码。（PS：-我确实浏览了其他论坛并找到了一些代码，但他们都给出了一些或其他错误，所以我发布一个以便我可以获得特定于我要求的代码）。

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T04:07:50.717

我已经让报告工作了......我写了下面的代码：

```
 Dim RptDocument As New ReportDocument

    RptDocument.Load(Server.MapPath("rpt\Report.rpt"))

    RptDocument.SetParameterValue("param1", Session("param1"))
    RptDocument.SetParameterValue("param2", ddlparam2.SelectedValue)
    RptDocument.SetParameterValue("param3", param3.text)
    RptDocument.SetParameterValue("param4", param4.text)
    RptDocument.SetParameterValue("param5", param5.text)

    'Set login info
    Dim myLogin As CrystalDecisions.Shared.TableLogOnInfo

    Dim myTable As Table
    For Each myTable In RptDocument.Database.Tables
        myLogin = myTable.LogOnInfo
        myLogin.ConnectionInfo.ServerName = "server name"
        myLogin.ConnectionInfo.DatabaseName = ""
        myLogin.ConnectionInfo.UserID = "userid"
        myLogin.ConnectionInfo.Password = "pwd"
        myTable.ApplyLogOnInfo(myLogin)
        myTable.Location = myTable.Location

    CrystalReportViewer1.ReportSource = RptDocument 
```

创建了一个系统 DNS 并且必须添加`Oracle.DataAccess.dll`到引用和一个类文件（功能与 connectooracle.vb 类文件中的功能相同但名称不同），还在 global.asax 中建立一个连接以引用该类连接并 `Imports Oracle.DataAccess.Client`使用的`Imports System.Data.OracleClient`（避免歧义）...

这以某种方式使它起作用，并且可能有其他解决方案..:)

```
(For ref:- Adding  myLogin.ConnectionInfo.IntegratedSecurity = True  gave me this error--
Logon failed. Error in File C:\DOCUME~1\Username\LOCALS~1\Temp\Report {1AG3DD86-141D-43YA-B6A2-AEDF3459AE49}.rpt: Unable to connect: incorrect log on parameters.) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T09:38:16.063

这对我有用，因为 VS2010 没有可供参考的水晶引擎，所以我使用 Visual Studio 2008。

首先，确保你已经导入了这两个：

```
Imports CrystalDecisions.CrystalReports.Engine
Imports CrystalDecisions.Shared 
```

现在，就我而言，我正在使用**odbc**，因为正如我所注意到的那样，水晶报告可以正常工作，而且我们正在使用 odbc。所以我没有在我的代码中包含报告中的登录属性。在报告上只需选择 odbc 连接。

```
Private Sub ReportViewer_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        Dim cryRpt As New ReportDocument

        Dim str1 As String

Try
            str1 = Title.str1
            str2  =Title.str2

            cryRpt.Load("c:\Program Files\Report\" & str2 & "")

            Dim crParameterFieldDefinitions As ParameterFieldDefinitions
            Dim crParameterFieldDefinition As ParameterFieldDefinition
            Dim crParameterValues As New ParameterValues
            Dim crParameterDiscreteValue As New ParameterDiscreteValue

                crParameterDiscreteValue.Value = strStore
                crParameterFieldDefinitions = cryRpt.DataDefinition.ParameterFields
                crParameterFieldDefinition = crParameterFieldDefinitions.Item("Store")
                crParameterValues = crParameterFieldDefinition.CurrentValues

                crParameterValues.Clear()
                crParameterValues.Add(crParameterDiscreteValue)
                crParameterFieldDefinition.ApplyCurrentValues(crParameterValues)

            rptviewer.Cursor = Cursors.AppStarting
            rptviewer.ReportSource = cryRpt
            rptviewer.Refresh()
            rptviewer.Cursor = Cursors.Default
        Catch ex As Exception
            MsgBox(ex.Message)
            Me.Close()
            ReportInterface.Show()
        End Try
    End Sub 
```

我有一个类可以获取用户输入的数据。但这不适用于使用存储过程参数。

**如果对您有用，请标记为已接受**

谢谢你

# android - 如何覆盖相机活动的 onBackPressed？即 android.provider.MediaStore.ACTION_IMAGE_CAPTURE

> ID：11322737
> 
> 赞同：2
> 
> 时间：2012-07-04T05:09:29.630
> 
> 标签：android, android-intent

有什么方法可以覆盖相机活动的 onBAckPressed()，即 android.provider.MediaStore.ACTION_IMAGE_CAPTURE。

让我解释一下我要做什么

当用户单击出现一个对话框时，我有一个按钮，该对话框要求用户从图库中选择图片或使用相机捕获图像。

所以代码是这样的

```
case R.id.btn_live:
            Intent liveIntent= new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(liveIntent,RESULT_CAPTURE_IMAGE);
            myDialog.dismiss();       
            break;

        case R.id.btn_gallery:  
            Intent galIntent = new Intent(
                    Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
           startActivityForResult(galIntent, RESULT_LOAD_IMAGE);  
           myDialog.dismiss();
            break; 
```

现在假设用户选择了这两个动作中的任何一个，那么我们开始使用这样的意图 -

Intent liveIntent=new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

用户进入相机活动，现在当用户使用相机时，如果他按下后退按钮，我想应用一些功能。

那我该怎么做呢？有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T05:18:12.383

您不能覆盖您正在调用的外部活动中的方法。但是，当用户回击使用 startActivityForResult 调用的活动时，通常会返回响应代码 RESULT_CANCELLED（可能存在不正确的情况）。在您的 onActivityResult 方法中，只需检查 RESULT_CANCELLED 代码并调用您需要的任何功能

# android - 自定义进度条 Android

> ID：11322740
> 
> 赞同：9
> 
> 时间：2012-07-04T05:09:45.730
> 
> 标签：android, progress-bar, customization

我想在 android 中使用这种类型的进度条。我尝试过许多水平进度条。它们都看起来像具有不同颜色的默认进度条。不知道如何使用这种类型：![在此处输入图像描述](../Images/34d1e6b027ec01afeebeaa96dd520a99.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T05:12:46.433

您将需要创建自己的自定义进度条。这并不像使用许多单杠那么简单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-03T12:17:08.513

自定义进度条需要定义进度条的背景和进度的属性或属性。

在 res-> drawable 文件夹中创建一个名为 customprogressbar.xml 的 .xml 文件

**customprogressbar.xml**

```
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android">

        <!-- Define the background properties like color etc -->
    <item android:id="@android:id/background">
    <shape>
        <gradient
                android:startColor="#000001"
                android:centerColor="#0b131e"
                android:centerY="1.0"
                android:endColor="#0d1522"
                android:angle="270"
        />
    </shape>
   </item>

  <!-- Define the progress properties like start color, end color etc -->
  <item android:id="@android:id/progress">
    <clip>
        <shape>
            <gradient
                android:startColor="#007A00"
                android:centerColor="#007A00"
                android:centerY="1.0"
                android:endColor="#06101d"
                android:angle="270"
            />
        </shape>
    </clip>
</item> 
```

现在您需要设置将 progressDrawable 属性设置为 customprogressbar.xml(drawable)

您可以在 xml 文件或 Activity 中执行此操作（在运行时）

在您的 xml 中，请执行以下操作

```
 <ProgressBar
    android:id="@+id/progressBar1"
    style="?android:attr/progressBarStyleHorizontal"
    android:progressDrawable="@drawable/custom_progressbar"         
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

**在运行时执行以下操作**

```
 // Get the Drawable custom_progressbar                     
                              Drawable draw= res.getDrawable(R.drawable.custom_progressbar);
                              // set the drawable as progress drawavle

                              progressBar.setProgressDrawable(draw); 
```

# android - 条码图像扫描仪

> ID：11322742
> 
> 赞同：0
> 
> 时间：2012-07-04T05:09:54.540
> 
> 标签：android

我是安卓新手。我正在尝试开发一个条形码扫描仪，其工作原理如下：通过相机拍摄（条形码）图像并扫描此条形码图像。我的问题是我该怎么做？提前致谢

这是我的代码：

```
TextView result_text;
Button scan_btn;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    result_text = (TextView)findViewById(R.id.Result_tv);

    scan_btn = (Button)findViewById(R.id.Barcode_Scan_Button);
    scan_btn.setOnClickListener( new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent scanIntent= new Intent("com.google.zxing.client.android.SCAN");
            scanIntent.putExtra("SCAN_MODE", "QR_CODE_MODE");

            startActivityForResult(scanIntent, 0);

        }
    });
}

public void onActivityResult(int requestCode, int resultCode, Intent intent) {

        if (requestCode == 0) {

          if (resultCode == RESULT_OK) {

            result_text.setText(intent.getStringExtra("SCAN_RESULT"));

          } else if (resultCode == RESULT_CANCELED) {

            result_text.setText("Scan cancelled.");

          }

        }

      }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T05:25:39.183

**@Zain 严格不推荐您采用的方法**。

根据他们的指南，您不应明确调用 Scan Intent。

您必须使用`IntentIntegrator`zxing 发布的新类。

干得好

首先添加代码来调用 Intent：

```
IntentIntegrator integrator = new IntentIntegrator(yourActivity);
integrator.initiateScan(); 
```

从下面的 url 下载 IntentIntegrator 类。

[http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java)

其次，将此添加到您的 Activity 以处理结果：

```
@Override   
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
  IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
  if (scanResult != null) {
    // handle scan result
  }
  // else continue with any other code you need in the method
  ...
} 
```

花点时间浏览 Zxing 的 wiki 页面。他们已经很好地解释了。

[http://code.google.com/p/zxing/w/list](http://code.google.com/p/zxing/w/list)

[http://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

这是演示如何调用 Zxing 意图的示例应用程序。

[http://code.google.com/p/zxing/source/browse/trunk/androidtest/src/com/google/zxing/client/androidtest/ZXingTestActivity.java](http://code.google.com/p/zxing/source/browse/trunk/androidtest/src/com/google/zxing/client/androidtest/ZXingTestActivity.java)

最后测试项目+库位于

[http://code.google.com/p/zxing/source/browse/trunk#trunk%2Fandroid-integration%253Fstate%253Dclose](http://code.google.com/p/zxing/source/browse/trunk#trunk/android-integration%253Fstate%253Dclosed)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T05:11:33.183

学习[http://code.google.com/p/zxing/](http://code.google.com/p/zxing/)

无论如何，这个问题相当复杂，这是 IIRC 使用傅立叶、边缘检测、矩阵计算等完成的。另外还有很多标准。准备一个月的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:19:09.583

查看下面的链接，它将帮助您开发条码扫描应用程序

[条码扫描](http://tekeye.biz/2012/scan-barcode-from-android-app) [1 条码扫描2](https://stackoverflow.com/questions/2050263/using-zxing-to-create-an-android-barcode-scanning-app)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-08T15:21:01.047

Firebase ML 套件条码扫描 API 可用于在 Android 应用中构建条码扫描功能。要获取条形码值，需要将包含条形码的正立图像传递给 Firebase ML 套件条形码扫描 API。

这是一个[具有条形码扫描功能的示例应用程序](https://www.zoftino.com/android-barcode-scanning-example)。

# c++ - 清除 Serial.read() 中的数据

> ID：11322745
> 
> 赞同：0
> 
> 时间：2012-07-04T05:10:09.443
> 
> 标签：c++, arduino

我正在对 Arduino 进行编程，当它在串口接收到东西时打开 LED。我已经这样做了，它已经收到了数据，但是在应该关闭 LED 之后它会继续运行。这是我当前的代码：

```
int ledPin = 13;

void setup() {
  pinMode(ledPin, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  if(Serial.available() > 0) {
    Serial.print("RECEIVED_CALL");
    digitalWrite(ledPin, HIGH);
    delay(4500);
    digitalWrite(ledPin, LOW);
    Serial.clear();
  }
} 
```

请留下任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:14:59.083

添加一些调试语句（如`Serial.print("LED_OFF")`）以确保您的 Arduino 在接收到我在[此处](https://stackoverflow.com/a/10921900/1440715)的帖子中描述的串行数据时不会重新启动。

这可能是灯一直亮着的原因。如果您发送足够的串行数据，它可能会一遍又一遍地重新启动。

# jakarta-ee - 我们还需要使用 Servlet 3.0 进行 URL 编码（用于会话 ID）吗

> ID：11322750
> 
> 赞同：2
> 
> 时间：2012-07-04T05:11:06.790
> 
> 标签：jakarta-ee, servlets

我正在阅读一本关于 Servlet 的书来复习，它指出它将自动决定何时附加会话 ID。我在网上阅读了相互矛盾的陈述。当 cookie 被阻止时，它将在多大程度上自动将会话 ID 附加到 URL，这是否包括使用 sendRedirect()。我指的是最新版本。我在 Oracle.com 上查看了 The JAVA Docs，但我不确定它们最近是否更新得足够。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:19:28.840

不，容器没有智能来检测您写入输出流的模板文本或字符串中的链接。

对于 Ex，请使用以下示例代码：

```
servletoutputStream.write("<form method=\"post\" action=\"/submit.jsp\"); 
```

在上面的代码中，您必须`HttpServletResponse.encodeURL("/submit.jsp")`在 post action url 中有 session id。

同样，API 文档 `HttpServletResponse.encodeRedirectURL()`说

```
java.lang.String encodeRedirectURL(java.lang.String url)

   Encodes the specified URL for use in the sendRedirect method or, if encoding 
     is not needed, returns the URL unchanged. The implementation of this method 
     includes the logic to determine whether the session ID needs to be encoded in 
     the URL.Because the rules for making this determination can differ from those 
     used to decide whether to encode a normal link, this method is separated from 
     the encodeURL method.

   All URLs sent to the HttpServletResponse.sendRedirect method should be run 
   through this method. Otherwise, URL rewriting cannot be used with browsers 
   which do not support cookies. 
```

**参考：**

*   [HttpServletResponse.encodeRedirectURL](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#encodeRedirectURL%28java.lang.String%29)
*   [HttpServletResponse.sendRedirect](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#sendRedirect%28java.lang.String%29)

# jquery - 使用 JQuery UI selectable 选择日期后打开一个对话框

> ID：11322752
> 
> 赞同：0
> 
> 时间：2012-07-04T05:11:21.030
> 
> 标签：jquery, jquery-ui

我设计了一个日历。我必须在选择日期后打开一个对话框。我使用过滤器选项来选择日期。它工作正常。但问题是也为非活动日期打开了对话框。我只想在可用日期打开。有什么建议么？示例在[链接中](http://jsfiddle.net/8Sd53/3/)

```
jQuery("#calendar").selectable({
            filter: ".available",
            stop: function() {
            jQuery( ".ui-selected", this ).each(function() { 
            result.push( this.id); 
            });
            var width = 250;
            var height = 270;
            jQuery('#dialog').dialog({
                    modal: true,
                    height:height,
                    width:width,
                    resizable: false,
                    draggable: false,
                    dialogClass: "flora" 
                });
            jQuery('.flora.ui-dialog').css({ position:"absolute",top:"596px"});

            }
        }); 
```

![在此处输入图像描述](../Images/793e0a2a4789129046412ef50609bce5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:11:24.013

尝试这个。它适用于我的机器。

[http://jsfiddle.net/8Sd53/3/](http://jsfiddle.net/8Sd53/3/)

我所做的更改是使用`cancel` [option](http://jqueryui.com/demos/selectable/#option-cancel)。

如果您单击与传递给取消选项的选择器匹配的元素，它将阻止选择开始。

```
jQuery("#calendar").selectable({
    filter: ".available",
    cancel: ".disabled",  // this is the important piece        
    stop: function() {
    // remaining code
    } 
```

# javascript - jQuery基于mysql表更新html表

> ID：11322761
> 
> 赞同：0
> 
> 时间：2012-07-04T05:11:57.620
> 
> 标签：javascript, php, jquery, html-table

我有一个 MySQL 数据库，里面有 2 个表。

我使用的主要文件是 index.php、jquery.js、jfunc.js 和 urlmappingDB.php。

我的主要问题与前 3 个有关。在 index.php 中，我在 html 标记中显示 urlmappingDB.php 中制作的数据表中的数据。当我点击表格下方的更新按钮时，我希望在 html 表格的相应位置显示更新后的 MySQL 表格数据。我觉得我当前的 jquery 代码不足以更新表，因为它传递给 _POST 数组的变量在我的程序中几乎是一个任意变量。

也就是说，我的雇主更喜欢我为此使用 jquery，所以我对如何实现这一点有点困惑。我该怎么办？

索引.php

```
<?php 
    $con = mysql_connect("localhost", "root", "");

    if (!$con) {
        die("Error: ".mysql_error());
    }

    mysql_select_db("genius", $con);

     $result = mysql_query("SELECT * FROM `urlMappingConsumption`");
?>  

<!DOCTYPE html>
<html>
    <head>
        <script type ="text/javascript" src ="jquery.js"></script>
        <script type ="text/javascript">
        function get() {

            $.post('urlmappingDB.php', {},
            function(output) {

                $('#urlmappingdata').html(output).show();   
            }); 
        }
        </script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <table id="urlConsumptionTable">
                <thead>
                    <tr>
                        <th>urlConsumptionID</th>
                        <th>customerID</th>
                        <th>activityID</th>
                        <th>numOccurences</th>
                        <th>lastModified</th>
                    </tr>
                </thead>
                <tbody>
                    <?php while($row = mysql_fetch_array($result)) {?>
                        <tr>
                            <td><?=$row['urlMappingConsumptionID']?></td>
                            <td><?=$row['customerID']?></td>
                            <td><?=$row['activityID']?></td>
                            <td><?=$row['numOccurences']?></td>
                            <td><?=$row['lastModified']?></td>
                        </tr>
                    <?php } ?>
                </tbody>
            </table>
        <div id="urlmappingdata"></div>
        <form name="form">
            <input type="button" value="Update" id="update">
        </form>

        <script type="text/javascript" src="jfunc.js"></script>
    </body>
</html> 
```

jfunc.js

```
$('#update').click( function() {
    var outputMessage;

    outputMessage = "<?php echo POST['outputMessage'];?>";

    $.post('urlmappingDB.php', {outputMessage:outputMessage}, function(data) {
        $('#urlmappingdata').html(data).show();
    });
}); 
```

第一个 MySQL 表是通过这个 PHP 文件创建的。我也在这里更新 MySQL 表：

urlmappingDB.php：

```
<?php
$checkVariable = 0;

function table_exists($tablename, $database = false) {
    if(!$database) {
        $res = mysql_query("SELECT DATABASE()");
        $database = mysql_result($res, 0);
    }

    $res = mysql_query("
        SELECT COUNT(*) AS count 
        FROM information_schema.tables 
        WHERE table_schema = '$database' 
        AND table_name = '$tablename'
    ");

    return mysql_result($res, 0) == 1;
}

//$conn = mysql_connect("localhost", "root", "");
//$db = mysql_select_db('genius', $conn);
try {
    $db = new PDO('mysql:host=localhost; dbname=genius;', 'root', '');
} 
catch (PDOException $e) {
    $error_message = $e->getMessage();
    echo $error_message;
    exit();
}

$query = "SELECT COUNT(*)
            FROM `urlmapping`";
$totalAccountedFor = $db ->query($query);
$allAccounted = 0;
foreach ($totalAccountedFor as $value) {
    $allAccounted = array_sum($value)/2;
}

$query = "SELECT `numOccurences` 
            FROM `urlMappingConsumption`";

$allOccurrences= $db->query($query);
$occurrencesSum = 0;
foreach ($allOccurrences as $row) {
    $occurrencesSum += (array_sum($row)/2)."<br>";

}

$query = "SELECT MIN(`urlMappingID`)
        FROM `urlmapping`
        LIMIT 1"; 
$minURLID = $db->query($query);

$urlMinID = 0;
foreach ($minURLID as $urlid) {
    $urlMinID = array_sum($urlid)/2;
}

$query = "SELECT MAX(`urlMappingID`)
        FROM `urlmapping`
        LIMIT 1";

$maxURLID = $db->query($query);
$urlMaxID = 0;

foreach ($maxURLID as $webid) {
    $urlMaxID = array_sum($webid)/2;
}

$urlIDDifference =$urlMaxID-$urlMinID;

$urlMinID =array_sum($urlid)/2;
$urlConsumption = array();

if($occurrencesSum == ($urlIDDifference + 1)) {
    $checkVariable = 1;

    for($i = 0; $i<($urlIDDifference+1); $i++) {
        $_POST['outputMessage'] = $urlMinID + $i;

        $outputMessage = mysql_real_escape_string($_POST['outputMessage']);
        $querys = "SELECT * 
                    FROM `urlmapping`
                    WHERE urlMappingID = $outputMessage";
        $row = $db->query($querys);

        foreach ($row as $r) {
            $valueCustomer = sprintf("%d",$r['customerID']);
            $valueActivity = sprintf("%d",$r['activityID']);

            if(array_key_exists($valueCustomer, $urlConsumption)) {
                if(is_array($urlConsumption[$valueCustomer])) {
                    if(array_key_exists($valueActivity, $urlConsumption[$valueCustomer])) {
                        $urlConsumption[$valueCustomer][$valueActivity] = $urlConsumption[$valueCustomer][$valueActivity] + 1;
                    } else {
                        $urlConsumption[$valueCustomer][$valueActivity] = 1;
                    }
                } else {
                    $urlConsumption[$valueCustomer] = array($valueActivity => 1);
                }
            } else {
                $urlConsumption[$valueCustomer] = array($valueActivity => 1);
            }
        }
    }
} elseif($occurrencesSum < ($urlIDDifference+1) && $occurrencesSum < $allAccounted ) {
    $otherUrlIDDifference = $urlIDDifference - $occurrencesSum;
    $checkVariable = 2; 

    for($i = 0; $i<($otherUrlIDDifference+1); $i++) {
        $_POST['outputMessage'] = $urlMinID + $occurrencesSum   + $i;
        $outputMessage = mysql_real_escape_string($_POST['outputMessage']);
        $querys = "SELECT * 
                    FROM `urlmapping`
                    WHERE urlMappingID = $outputMessage";
        $row = $db->query($querys);

        foreach($row as $r) {
            $valueCustomer = sprintf("%d",$r['customerID']);
            $valueActivity = sprintf("%d",$r['activityID']);

            if(array_key_exists($valueCustomer, $urlConsumption)) {

                if(is_array($urlConsumption[$valueCustomer])) {
                    if(array_key_exists($valueActivity, $urlConsumption[$valueCustomer])) {
                        $urlConsumption[$valueCustomer][$valueActivity] = $urlConsumption[$valueCustomer][$valueActivity] + 1;
                        // urlConsumption[$valueCustomer][$valueActivity]
                    } else {
                        $urlConsumption[$valueCustomer][$valueActivity] = 1;
                    }
                } else {
                    $urlConsumption[$valueCustomer] = array($valueActivity => 1);
                }
            } else {
                $urlConsumption[$valueCustomer] = array($valueActivity => 1);
            }
        }
    }
}

    $urlConsumptionCustomerKeys = array_keys($urlConsumption);
    $urlConsumptionActivityKeys = array();

    for($i = 0; $i<count($urlConsumptionCustomerKeys); $i++) {
        $urlConsumptionActivityKeys[] = array_keys($urlConsumption[$urlConsumptionCustomerKeys[$i]]);
    }

    $currentIDValue = 1;

    for($i = 0; $i < count($urlConsumptionCustomerKeys); $i++) {
        for ($j=0; $j < count($urlConsumptionActivityKeys[$i]); $j++) {
            $activityID=$urlConsumptionActivityKeys[$i][$j];

            $occurrences = $urlConsumption[$urlConsumptionCustomerKeys[$i]][$urlConsumptionActivityKeys[$i][$j]];

            $customerID= $urlConsumptionCustomerKeys[$i];

            if($checkVariable == 1) {
                $addToTableQuery = "INSERT INTO `urlMappingConsumption`
                                    (`urlMappingConsumptionID`, `customerID`, `activityID`, `numOccurences`, `lastModified`)
                                VALUES
                                    ('$currentIDValue','$customerID', '$activityID','$occurrences', NOW())";
                                $db->exec($addToTableQuery);
                                $currentIDValue = $currentIDValue +1;
                                $occurrencesSum +=1;
            }
            if($checkVariable==2) {
             $checkExistingIDsQuery = $db->query("SELECT `urlMappingConsumptionID`, `numOccurences`
                                                FROM `urlMappingConsumption`
                                                WHERE customerID = $customerID AND activityID = $activityID");
            if(!$checkExistingIDsQuery) {
                die("could not process query");
            } else {
                foreach ($checkExistingIDsQuery as $IDRow) {
                    if($occurrencesSum <$allAccounted) {
                        $newOccurences = $IDRow['numOccurences'] + 1;
                        $querys = "UPDATE urlMappingConsumption
                                    SET numOccurences = $newOccurences
                                    WHERE urlMappingConsumptionID={$IDRow['urlMappingConsumptionID']}";
                        $db->exec($querys);
                        $occurrencesSum +=1;
                    }
                }
            }
        }
    }
?> 
```

另一个 MySQL 表由以下 2 个文件定义。

CreateUrlMapping.txt

```
DROP TABLE IF EXISTS `urlMapping`;
SET @saved_cs_client        = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `urlMapping` (
    `urlMappingID` bigint(20) unsigned NOT NULL auto_increment,
    `customerID` int(11) default '0',
    `activityID` int(11) default '0',
    `contactID` int(11) default '0',
    `fullURL` mediumtext,
    `lastModified` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
    `developerSandbox` varchar(25) default '',
    PRIMARY KEY (`urlMappingID`),
    KEY `customerActivityID` (`customerID`,`activityID`)
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
SET character_set_client = @saved_cs_client; 
```

和

urlMapping.csv

```
INSERT INTO urlMapping (urlMappingID,customerID,activityID,contactID,fullURL,lastModified,developerSandbox)
VALUES
(7549046856,57544,2191972,166419052,'http://www.salesgenius.com/activities/emailOpened.php','2  012-06-1422:53:51','/webapp/webroot/'),
(7549046855,57544,2191972,166419052,'https://www.salesgenius.com/activities/unsubscribe.php','2012-06-1422:53:51','/webapp/webroot/'),
(7549046854,57544,2191972,166419052,'http://security.intuit.com/privacy/marketing-preferences.html','2012-06-1422:53:51','/webapp/webroot/'),
(7549046853,57544,2191972,166419052,'https://privacy.intuit.com/cpi/do/signin','2012-06-1422:53:51','/webapp/webroot/'),
(7549046852,57544,2191972,166419052,'http://ps.genius.com/intuit/pos/index_c.html','2012-06-1422:53:51','/webapp/webroot/'),
etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:48:02.727

好的，您将使用 ajax 但 onclick 不是在您的 php 文件中获取原始数据，而是将数据放在一个表中，然后将其发送到主页

```
$.ajax({
        url: "table.php", 
        type: "GET",
        data: data,     
        cache: false,
        success: function (html) {
            alert("HTLM = " + html);
            $('#table').html(html);
            }
 }); 
```

`#table`是您的表格要放置的 div

`html`是 ajax 从 php 文件 = 表中获取的内容

它将html放在`#table`div中

如果您仍然需要帮助评论

# php - PHP：隐藏异常抛出消息

> ID：11322766
> 
> 赞同：0
> 
> 时间：2012-07-04T05:13:03.703
> 
> 标签：php

你可能认为这是一个愚蠢的问题。但我需要这个。是否可以隐藏异常抛出消息。我遇到了一些异常消息的问题，实际上这在调试时非常重要，但就我而言，我不想再显示它们了

有没有像 php display_errors off 这样的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T05:23:56.360

`ini_set('display_errors', false);`在开头添加。

你最好不要关闭error_reporting by `error_reporting(0);`，你需要检查日志中的错误消息并修复错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T05:22:25.370

您可以使用[error_reporting](http://php.net/manual/en/function.error-reporting.php)函数来启用/禁用出现的错误。PHP 手册页提供了各种可用选项的示例，您可能想要这样：

```
// Turn off all error reporting
error_reporting(0); 
```

如果代码的特定部分抛出异常，您可能希望使用[try / catch 块](http://php.net/manual/en/language.exceptions.php)来处理它而不是阻止它。

如果您有一个生产服务器，您可能希望关闭*显示*错误但仍然记录它们。更改服务器上的[配置文件](http://php.net/manual/en/configuration.file.php)并将其设置`display_errors`为 0 是理想的，因为这样您就可以在服务器之间保持代码相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:23:22.080

`error_reporting(0);`

和/或

您还可以将错误消息写入 txt 文件，例如在 catch 块中（不在屏幕上显示）

# android - 应用程序崩溃（在设备屏幕上获取打印堆栈跟踪的任何方式）

> ID：11322771
> 
> 赞同：1
> 
> 时间：2012-07-04T05:13:24.907
> 
> 标签：android

我有两个应用程序

1-Application1（当前在设备上运行）

2-Application2（安装在设备上）

到底发生了什么：-

Application1 在设备上运行良好。

步骤 1-i 卸载 Application2

步骤 2-我再次安装 Application2

现在如果我去 Application1 那么我的应用程序（Application1）正在崩溃。

有什么方法可以在我的设备屏幕上打印堆栈跟踪（崩溃原因）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T05:19:36.143

安装 logcat 查看器，例如[aLogCat](https://play.google.com/store/apps/details?id=org.jtb.alogcat&hl=en)。它为您提供了多种查看、保存或共享日志输出的方式。

# javascript - IOS 5 通知样式滑块

> ID：11322772
> 
> 赞同：1
> 
> 时间：2012-07-04T05:13:29.073
> 
> 标签：javascript, touch, dom-events

我正在寻找一个滑块插件，它的功能类似于 iOS 5 通知，它位于顶部，有一个可见的小手柄，用户可以将其向下拖动并将其拉回。

我发现了一个类似的插件，叫做 slide-in-menu，它工作得很好，但是我在页脚的菜单上实现它时遇到了麻烦。该插件专为标题菜单设计。

上述插件的演示： http: [//cubiq.org/dropbox/sim/](http://cubiq.org/dropbox/sim/)

我实际上通过向 3DTranslate 添加一个负值来修改它以在页脚中工作，但是这个修改后的版本缺少该`touchMove`事件。它只对水龙头做出反应。

我可以发布插件代码，但它有 120 行长。

# php - 如何将从 date_parse 返回的日期数组转换回日期字符串

> ID：11322777
> 
> 赞同：8
> 
> 时间：2012-07-04T05:13:50.193
> 
> 标签：php, arrays, string, date

我有一个由 php 例程 date_parse 返回的格式的日期数组。我需要将此日期数组转换回日期字符串。

我正在寻找一个与 date_parse 例程相反的函数。这是一个接受日期数组作为参数并返回日期字符串的函数。

[http://php.net/manual/en/function.date-parse.php](http://php.net/manual/en/function.date-parse.php)

我拥有的日期数组有时只有“年”、“月”和“日”的值。其他时候，它将具有“年”、“月”、“日”、“小时”、“分钟”和“秒”的值。如果缺少小时、分钟和秒值，我希望例程会返回一个日期字符串，其中字符串的小时、分钟和秒部分为 00:00:00。

我花了一些时间搜索，但到目前为止还没有找到与date_parse相反的函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-12T04:07:49.060

我一直在寻找相同问题的答案，但找不到。我在[PHP 文档](http://php.net/manual/en/function.date.php)中使用`date()`and找到了一些示例，`mktime()`并提出了这个...

```
$date_array = date_parse($date_string);

// returns original date string assuming the format was Y-m-d H:i:s
$date_string = date('Y-m-d H:i:s', mktime($date_array['hour'], $date_array['minute'], $date_array['second'], $date_array['month'], $date_array['day'], $date_array['year'])); 
```

我对此进行了测试，如果小时、分钟和秒未传递给`mktime()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-15T10:04:35.710

好吧，我能找到的最好的方法就是使用`sprintf`...`mktime`需要设置时间语言环境，而且我也不喜欢通过时间戳来格式化日期。

因此，只需打印格式化字段：

```
// Parse from YYYY-MM-DD to associative array
$date = date_parse_from_format("Y-m-d", "2014-07-15");
// Write back to DD/MM/YYYY with leading zeros
echo sprintf("%02d/%02d/%04d", $date["day"], $date["month"], $date["year"]); 
```

编辑：但如果您需要，此解决方案需要进行一些调整，例如，仅打印一年的最后 2 位数字（例如从 1984 年到“84”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-26T23:48:48.380

我在表单中使用日期选择器，返回格式是一个数组：

[开始] => 数组 ([月] => 04 [日] => 26 [年] => 2016 [小时] => 05 [分钟] => 54 [经线] => 下午) [结束] => 数组( [月] => 04 [日] => 26 [年] => 2016 [小时] => 05 [分钟] => 54 [子午线] => 下午)

将该数组转换为日期对象的方法如下：

```
$timeArray = $this->request->data['Task']['start'];
$start = $this->Task->deconstruct('start', $timeArray); 
```

我的模型是“任务”，日期数组的键是“开始”，您需要将这两个字段替换为您自己的。

日期对象的输出是：

```
2016-04-26 17:54:00 
```

参考：[如何最好地将 CakePHP 日期选择器表单数据转换为 PHP DateTime 对象？](https://stackoverflow.com/questions/2764376/how-best-to-convert-cakephp-date-picker-form-data-to-a-php-datetime-object)

# magento - Magento 安装脚本未运行

> ID：11322779
> 
> 赞同：-1
> 
> 时间：2012-07-04T05:14:00.770
> 
> 标签：magento

我正在使用禁用缓存并启用模块的 Magneto 1.7。

![magento 安装脚本没有运行](../Images/739ef6afb84dc80580dc7d7e3243ca8c.png) *直接查看图像以获得清晰的视图。*

这是在从`core_resource`.

![magento 删除模块行](../Images/b6866110f37b80320534bd386f41ab0e.png)

应该发生什么，当我刷新页面时是否显示。

> 运行此升级：Magentotutorial_Weblog_Model_Resource_Mysql4_Setup 暂时退出

相反，脚本不会加载，就好像它不存在一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:10:45.030

首先尝试将您的重命名`Showdown_setup`为`showdown_setup`（全部小写）。接下来是您的安装文件被称为`mysql4-install-1.php`. 这对我来说看起来很奇怪。您在 中定义的版本是什么`config.xml`？是`<version>1</version>`吗？因为它必须与安装文件名中的数字匹配。`<models>`你也应该`config.xml`像这样定义：

```
<global>
   <models>
      <showdown>
         <class>Desbest_Showdown_Model</class>
      </showdown>
   </models>
</global> 
```

# mysql - 在 Mac OS X Lion 服务器上安装 MySQL？

> ID：11322780
> 
> 赞同：0
> 
> 时间：2012-07-04T05:14:06.413
> 
> 标签：mysql, macos

我用谷歌搜索了它，但没有什么是直截了当的，我相信其他人也一定有这个问题，在不弄乱我的 mac 服务器的情况下，最好的方法是什么？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T05:28:01.350

试试这个;

“下载适用于 Mac OS X 10.6 的 64 位 Apple Disk Image (DMG) 安装程序。虽然下载页面显示该安装程序适用于 Snow Leopard (Mac OS X 10.6)，但它可以在 Lion (Mac OS X 10.7) 上正常运行如果你遵循这个过程。

下载完成后，双击 DMG 文件以挂载磁盘映像。您将看到一个“正在打开...”对话框。当它消失时，它将在您的桌面上创建一个名为 mysql-5.5.15-osx10.6-x86_64 的新磁盘。

双击桌面上的新图标。这将在 Finder 中打开磁盘映像，您将能够浏览内容。

在驱动器上找到主 MySQL PKG 文件。它应该命名为 mysql-5.5.15-osx10.6-x86_64.pkg。请注意，还有另一个名为 MySQLStartupItem.pkg 的 PKG 文件，因此请确保您选择了正确的文件。

双击 MySQL PKG 文件。安装程序将打开，向您显示如上所示的初始页面。单击“继续”按钮开始引导式安装过程。

单击“继续”按钮继续通过“重要信息”屏幕。单击“继续”按钮绕过“许可协议”屏幕（当然，在彻底阅读并咨询您的律师之后！）。安装程序还会让您在对话框中单击“同意”，表明您真的非常同意许可协议的条款。如果您想将 MySQL 安装在主硬盘以外的位置，请单击更改安装位置按钮以选择所需的位置。否则，单击安装开始安装过程。

Mac OS X 将提示您输入密码以批准安装。继续这样做，安装将开始。需要几分钟才能完成。

一旦你看到“安装成功”的消息，你就差不多完成了！我们只需要几个内务处理步骤就可以让它运行起来。单击关闭按钮退出安装程序。

返回对 MySQL 磁盘映像打开的 Finder 窗口。这一次，双击 MySQLStartupItem.pkg PKG 文件。这会将您的系统配置为在启动时自动启动 MySQL。继续安装启动包项。引导过程与用于主 MySQL 安装的过程非常相似。

返回对 MySQL 磁盘映像打开的 Finder 窗口。第三次，双击 MySQL.prefPane 项。这将在您的系统偏好设置窗口中添加一个 MySQL 窗格，使 MySQL 更易于使用。

系统将询问您是希望仅为您自己安装首选项窗格，还是希望所有计算机用户都能看到它。如果选择第二个选项，则需要提供管理员密码。做出选择并单击安装以继续。

然后您将看到 MySQL 首选项窗格。您可以使用此窗格来启动和停止 MySQL 服务器，还可以配置 MySQL 是否会自动启动。”

更多信息： [http ://databases.about.com/od/shareware/ht/Installing-Mysql-On-Mac-Os-X-10-7-Lion.htm](http://databases.about.com/od/shareware/ht/Installing-Mysql-On-Mac-Os-X-10-7-Lion.htm)

# java - @link 到 package-info.java 中的另一个包

> ID：11322783
> 
> 赞同：16
> 
> 时间：2012-07-04T05:14:26.720
> 
> 标签：java, javadoc

有没有办法从 package-info.java 链接到这个包之外的另一个包（在同一个项目中）？

如果我尝试在 java 7 中执行此操作，我总是会得到：

```
warning - Tag @link: reference not found: 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-04-29T17:56:10.503

两者都`@link`支持`@see` [链接到包](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html#see)。

我的一个`package-info.java`文件中有以下代码，javadoc 工具生成链接：

```
/**
 * <p>但请注意，{@link gov.va.med.srcalc.domain} 中的类
 * 通过 JPA 注释定义绝大多数数据映射。</p>
 */
包 gov.va.med.srcalc.db；
```

我们使用 Gradle 作为构建工具，但是我发现 Gradle 不会生成链接并产生`reference not found: gov.va.med.srcalc.domain`警告。也许这是 Gradle 中的一个错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-09T12:28:18.120

A plain link with a `@docroot` works for the standard Java doclet:

```
/**
 * See the 
 * <a href="{@docRoot}/com/mycorp/package-summary.html#package_description">
 *    package overview
 * </a> for more information.
 */ 
```

It does not matter whether you need this in package-info.java or in a class, the `{@link}` tag cannot handle links to packages.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T11:52:06.543

这更像是一种解决方法，但至少如果您链接到包中的某个文件，`com.foo.Bar`Eclipse 将允许您通过随后在 Inline Previews 等中悬停/单击来导航`Bar`到描述中。`package-info.java``foo`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-28T12:26:10.807

一半的答案是`{@link some.package.name}`确实链接到包。

答案的另一半，正如我刚刚幸运地发现的那样，`javadoc`必须在命令行上使用包名进行调用。好吧，这是一个猜测，因为我实际上正在使用 ant 的`<javadoc/>`任务，但是一旦我添加 a `<packageset/>`，`reference not found`警告就消失了，并且生成的 javadoc 中的链接可用。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-11T14:20:33.377

您必须导入使用过的包，以便 javadoc 知道您所指的名称空间。

package-info.java 应该看起来链接这个：

```
import package.subpackage.ClassnameYouWantToLink;
/**
* {@link ClassnameYouWantToLink}
*/ 
```

如果您不想导入包，则需要 ClassName 前面的完整限定包名：

```
/**
* {@link package.subpackage.ClassnameYouWantToLink}
*/ 
```

# .net - 从 .NET 调用 VB6 表单时，表单交互被阻止？

> ID：11322789
> 
> 赞同：1
> 
> 时间：2012-07-04T05:15:16.533
> 
> 标签：.net, vb6, com-interop, ccw

我有一个编译为 VB6 exe 的 VB6 项目。

它有一个简单的形式作为它的启动对象。

它通过 regasm 的 .NET dll 启动一个 .NET 模态表单，将回调 COM 接口 (IHandler) 的实现传递给它。

.NET 回调 VB6 中的 IHandler 实现。

VB6 尝试使用 vbModal 显示一种新形式。**VB6 表单被阻止交互，因为模态 .NET 表单仍然可见。**

有没有办法解决这个问题或建议的方法？

我尝试在新的（STA）（托管）线程上回调 VB6，但是当它尝试执行 MyCallbackForm.Show vbModal 时，我得到“无效的过程调用或参数。”......我认为这与事实有关我正在回电一个新线程...

* * *

更新：如果我将我的 VB6 项目类型设置为 ActiveX exe，我能够成功地在新线程上进行回调并以模态方式显示我的 VB6 表单......但是一旦我这样做了，我似乎失去了回调上的线程 - 制作从 VB6 到 .NET 的后续调用导致了跨线程异常。我猜这与使用 ActiveX exe 时的线程模型有关......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:02:10.503

您可以在 VB6 应用程序中无模式地显示带有 .NET 控件的表单，但是，您必须这样做：

*   创建一个 .NET 用户控件，其中包含应在表单上的所有内容。
*   使用[MS InteropToolkit](http://msdn.microsoft.com/en-us/vstudio/bb419144.aspx)轻松创建COM可见的用户控件，并让该控件继承自用户控件（也可以跳过第一步，直接让用户控件com可见）
*   在您的 VB6 项目中创建一个新窗体，并将 COMVisible .NET 用户控件添加到其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:15:57.987

您可以将 VB6 EXE 项目拆分为两个项目。
项目一是当前的 VB6 项目减去您希望能够从 .Net DLL 显示的子窗体。项目二是一个 VB6 ActiveX DLL 项目，它应该包含您希望能够从您的 .Net dll 中显示的子表单。

所以，而不是这样做： 1\. VB6.exe 项目调用传递 IHandler 的 .Net DLL 2\. .Net 项目调用 IHandler 中的函数 3\. IHandler（VB6 实现）试图显示一个子窗体，没有运气。

你这样做： 1\. VB6.exe 项目调用 .Net DLL，从主项目中传递子窗体需要的任何数据 2\. .Net 项目在包含子窗体的 ActiveX DLL 中调用“ShowYourSelf”函数并传递任何数据必要的。

# iphone - iOS RestKit 框架 - 发送请求后崩溃

> ID：11322796
> 
> 赞同：0
> 
> 时间：2012-07-04T05:15:46.863
> 
> 标签：iphone, objective-c, ios, http, restkit

我的代码：

```
RKRequest.m:

#import "RKRequestDelegate.h"
#import "Constants.h"

@implementation RKRequestDelegate {

}

- (void)sendRequest:(UIImageView *)imageView {

    NSDictionary *queryParams = [NSDictionary dictionaryWithObjectsAndKeys:@"0", @"w", @"4", @"section", @"0",
                                                                           @"latitude", @"0", @"longitude", @"0", @"dt", @"0", @"di", nil];
    NSString *plistPath = [[NSBundle mainBundle] pathForResource:[Constants getSettingsName]
            ofType:[Constants getSettingsFormat]];
    NSDictionary *contentDictionary = [NSDictionary dictionaryWithContentsOfFile:plistPath];
    NSString *addedUrl = [contentDictionary valueForKey:[Constants getBannerTag]];
    //

    RKRequest *request = [[RKClient sharedClient] get:addedUrl queryParameters:queryParams delegate:self];
}

- (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response {
    NSLog(@"Response!!!");
}

@end

RKRequestDelegate.h:

@interface RKRequestDelegate : NSObject <RKRequestDelegate>

- (void)sendRequest:(UIImageView *)UIImageView;
- (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response;

@end

AppDelegate.m:

    RKClient *client = [RKClient clientWithBaseURL:[HttpUtil getHost]]; 
```

启动应用程序后，它会在 5 秒后崩溃。如果我更改`delegate:self`为委托：`[RKRequestDelegate class]`它不会崩溃，并给出响应 200（OK），但它没有回调 a `didLoadResponse`！

请帮忙，谢谢。

更新：

如果我`[request sendSynchronously];`在 RKRequestDelegate.m 中使用，则会调用响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:20:47.943

创建`request`一个类变量。

编辑：这是一些代码，在现实生活中没有检查过，但这种方式应该可行

```
 @interface MYRequests : NSObject<RKRequestDelegate>
   {
       RKRequest *request;
   }

   @implementation MYRequests
   - (void)loginRequest
   {
       request = [RKRequest ...];
       request.method = RKRequestMethodGET;
       request.delegate = self;
       [request send];
   }
   @end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T06:49:02.767

你的崩溃几乎肯定是因为你的代表被释放得太早了。如果您不想学习正确的内存管理，请尝试使用等效的块：[RKClient get:usingBlock:]，您可能会很幸运。

# google-maps - 计算谷歌静态地图的度/分尺寸

> ID：11322797
> 
> 赞同：1
> 
> 时间：2012-07-04T05:15:54.037
> 
> 标签：google-maps, math, google-earth, google-latitude

**如何计算出 Google 静态地图图像的宽度（以度和分钟为单位）？**

例如，如果我请求一个中心为 -32 Lat 151 Long（澳大利亚悉尼）且缩放值为 14 的静态地图，我如何确定返回的卫星图像的宽度？

```
http://maps.googleapis.com/maps/api/staticmap?center=-32,151&zoom=14&size=400x400&sensor=true 
```

*返回的图像的真实宽度和高度是多少？*

我知道中心是-32、151，缩放级别是14。也许zoom=14代表14000米的高度？如果是这样，我可以使用数学计算出现实世界的维度，但我不太确定这就是“14”的含义。

这个 SO 问题看起来很有希望，但可惜他们没有答案：[Google Static Maps Dimension Discrepancy](https://stackoverflow.com/questions/11086705/google-static-maps-dimension-discrepancy)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T07:26:56.093

如果您对测量距离 [英里或公里] 不感兴趣，而只对球面距离 [度] 感兴趣，那么计算并不难。

在缩放级别为零时，赤道的整个 360° 适合 256 像素。在变焦 1 时，它是 360÷2=180°。在变焦 14 时，它是 360÷2 ^(14) = 0.021973°（大约）。

`widthDeg = (elementWidthInPixels/256)*(360 / Math.pow(2,zoom))`

# iphone - 如何访问不在应用程序中的图像

> ID：11322798
> 
> 赞同：0
> 
> 时间：2012-07-04T05:16:08.180
> 
> 标签：iphone, ios, ipad, memory-management, memory-leaks

我正在开发一个包含很多图像的应用程序，这是增加构建大小和内存泄漏的原因，我的应用程序本身中有图像并使用 plist 读取它。有没有其他方法可以读取/访问图像而不将所有图像都放入应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:47:34.337

您可以做的是，制作所有图像名称的 XML 或 JSON。当您的应用程序启动时，您只需首先下载该 JSON（解析后）并（首先）仅向用户显示图像的名称。当用户单击图像的名称时，然后转到该图像的详细视图并下载完整的图像。通过这种方式，您将只下载所需的图像。这减少了您的应用程序的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:18:07.947

您可以将图像存储在远程服务器中，然后将 URL 写入 plist 文件中，然后您可以使用[SDWebImage](https://github.com/rs/SDWebImage/)之类的东西来下载和显示图像（SDWebImage 将通过将 url 作为参数传递给它来下载和显示图像）。那里有很多开源框架，或者您可以自己编写代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:23:33.857

是的，以上答案符合您的要求。您可以在远程服务器上上传图像，然后在应用程序完成启动或需要时在设备下载目录中下载这些图像并从中获取每个图像路径。

# r - 将没有“timevar”的数据帧从长格式转换为宽格式

> ID：11322801
> 
> 赞同：26
> 
> 时间：2012-07-04T05:16:24.290
> 
> 标签：r, reshape, transpose, r-faq

我有一个遵循以下长模式的数据框：

```
 Name          MedName
  Name1    atenolol 25mg
  Name1     aspirin 81mg
  Name1 sildenafil 100mg
  Name2    atenolol 50mg
  Name2   enalapril 20mg 
```

并且想得到下面（我不在乎我是否可以这样命名列，只想要这种格式的数据）：

```
 Name   medication1    medication2      medication3
  Name1 atenolol 25mg   aspirin 81mg sildenafil 100mg
  Name2 atenolol 50mg enalapril 20mg             NA 
```

通过这个站点，我已经熟悉了 reshape/reshape2 包，并且已经尝试了几次试图让它工作，但到目前为止都失败了。

当我尝试时，`dcast(dataframe, Name ~ MedName, value.var='MedName')`我只得到一堆作为药物名称标志的列（转置的值是 1 或 0）例如：

```
 Name  atenolol 25mg  aspirin 81mg
Name1              1             1
Name2              0             0 
```

在我融化数据集后，我也尝试了一个`dcast(dataset, Name ~ variable)`，但这只是吐出以下内容（只计算每个人有多少药物）：

```
 Name  MedName
Name1        3
name2        2 
```

最后，我尝试融合数据，然后使用`idvar="Name"` `timevar="variable"`（其中所有只是 Mednames）进行整形，但这似乎不是为我的问题构建的，因为如果 idvar 有多个匹配项，reshape 只会采用第一个 MedName 并忽略休息。

有谁知道如何使用 reshape 或其他 R 函数来做到这一点？我意识到可能有一种方法可以通过一些 for 循环和条件来以更混乱的方式执行此操作，以基本上拆分和重新粘贴数据，但我希望有一个更简单的解决方案。非常感谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-02-07T13:58:01.190

使用[data.table](/questions/tagged/data.table "显示标记为“data.table”的问题")包，这可以通过新`rowid`功能轻松解决：

```
library(data.table)
dcast(setDT(d1), 
      Name ~ rowid(Name, prefix = "medication"), 
      value.var = "MedName") 
```

这使：

> ```
>  Name    medication1     medication2       medication3
> 1 Name1  atenolol 25mg    aspirin 81mg  sildenafil 100mg
> 2 Name2  atenolol 50mg  enalapril 20mg              <NA> 
> ```

另一种方法（1.9.7版本之前常用）：

```
dcast(setDT(d1)[, rn := 1:.N, by = Name], 
      Name ~ paste0("medication",rn), 
      value.var = "MedName") 
```

给出相同的结果。

* * *

类似的方法，但现在使用[dplyr](/questions/tagged/dplyr "显示标记为“dplyr”的问题")和[tidyr](/questions/tagged/tidyr "显示标记为“tidyr”的问题")包：

```
library(dplyr)
library(tidyr)
d1 %>%
  group_by(Name) %>%
  mutate(rn = paste0("medication",row_number())) %>%
  spread(rn, MedName) 
```

这使：

> ```
> Source: local data frame [2 x 4]
> Groups: Name [2]
> 
>     Name   medication1    medication2      medication3
>   (fctr)         (chr)          (chr)            (chr)
> 1  Name1 atenolol 25mg   aspirin 81mg sildenafil 100mg
> 2  Name2 atenolol 50mg enalapril 20mg               NA 
> ```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-04T05:36:12.273

假设您的数据在对象中`dataset`：

```
library(plyr)
## Add a medication index
data_with_index <- ddply(dataset, .(Name), mutate, 
                         index = paste0('medication', 1:length(Name)))    
dcast(data_with_index, Name ~ index, value.var = 'MedName')

##    Name   medication1    medication2      medication3
## 1 Name1 atenolol 25mg   aspirin 81mg sildenafil 100mg
## 2 Name2 atenolol 50mg enalapril 20mg             <NA> 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-04T06:03:28.837

在`timevar`使用`reshape`. 在这里，我使用“沿”每个“名称”`ave`应用函数。`seq_along`

```
test <- data.frame(
Name=c(rep("name1",3),rep("name2",2)),
MedName=c("atenolol 25mg","aspirin 81mg","sildenafil 100mg",
          "atenolol 50mg","enalapril 20mg")
)

# generate the 'timevar'
test$uniqid <- with(test, ave(as.character(Name), Name, FUN = seq_along))

# reshape!
reshape(test, idvar = "Name", timevar = "uniqid", direction = "wide") 
```

结果：

```
 Name     MedName.1      MedName.2        MedName.3
1 name1 atenolol 25mg   aspirin 81mg sildenafil 100mg
4 name2 atenolol 50mg enalapril 20mg             <NA> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-12-15T09:58:52.307

这似乎实际上是一个相当普遍的问题，所以我`getanID`在我的“splitstackshape”包中包含了一个调用的函数。

这是它的作用：

```
library(splitstackshape)
getanID(test, "Name")
#     Name          MedName .id
# 1: name1    atenolol 25mg   1
# 2: name1     aspirin 81mg   2
# 3: name1 sildenafil 100mg   3
# 4: name2    atenolol 50mg   1
# 5: name2   enalapril 20mg   2 
```

由于“data.table”与“splitstackshape”一起加载，您可以访问`dcast.data.table`，因此您可以像@mnel 的示例一样继续。

```
dcast.data.table(getanID(test, "Name"), Name ~ .id, value.var = "MedName")
#     Name             1              2                3
# 1: name1 atenolol 25mg   aspirin 81mg sildenafil 100mg
# 2: name2 atenolol 50mg enalapril 20mg               NA 
```

* * *

该函数本质上实现了`sequence(.N)`由标识的组创建“时间”列。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-08-13T06:55:39.177

@thelatemail 的解决方案与此类似。当我生成时间变量时，我会使用`rle`以防我不是以交互方式工作并且`Name`变量需要是动态的。

```
# start with your example data
x <- 
    data.frame(
        Name=c(rep("name1",3),rep("name2",2)),
        MedName=c("atenolol 25mg","aspirin 81mg","sildenafil 100mg",
            "atenolol 50mg","enalapril 20mg")
    )

# pick the id variable
id <- 'Name'

# sort the data.frame by that variable
x <- x[ order( x[ , id ] ) , ]

# construct a `time` variable on the fly
x$time <- unlist( lapply( rle( as.character( x[ , id ] ) )$lengths , seq_len ) )

# `reshape` uses that new `time` column by default
y <- reshape( x , idvar = id , direction = 'wide' )

# done
y 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-07-14T11:16:10.693

一个干净的解决方案涉及包版本中非常有用`pivot_wider`的功能。有了这个，您还可以使用参数直接指定列名。`tidyr``1.1.0``names_glue`

```
library(tidyr)
library(dplyr)

dataframe %>% 
  group_by(Name) %>% 
  mutate(row_n = row_number()) %>% 
  pivot_wider(id_cols = Name, names_from = row_n, values_from = MedName, names_glue = "medication{row_n}") 
```

输出

```
# A tibble: 2 x 4
# Groups:   Name [2]
#   Name  medication1   medication2    medication3     
#   <chr> <chr>         <chr>          <chr>           
# 1 Name1 atenolol 25mg aspirin 81mg   sildenafil 100mg
# 2 Name2 atenolol 50mg enalapril 20mg NA 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-19T10:38:30.553

和的`tidyr`解决方案。`chop()``unnest_wider()`

```
library(tidyr)

df %>%
  chop(-Name) %>%
  unnest_wider(MedName, names_sep = "")

# # A tibble: 2 x 4
#   Name  MedName1      MedName2       MedName3        
#   <chr> <chr>         <chr>          <chr>           
# 1 Name1 atenolol 25mg aspirin 81mg   sildenafil 100mg
# 2 Name2 atenolol 50mg enalapril 20mg NA 
```

论证`names_sep = ""`是必要的；否则，新列名将是`..1`、`..2`和`..3`。

* * *

**数据**

```
df <- structure(list(Name = c("Name1", "Name1", "Name1", "Name2", "Name2"
), MedName = c("atenolol 25mg", "aspirin 81mg", "sildenafil 100mg", 
"atenolol 50mg", "enalapril 20mg")), class = "data.frame", row.names = c(NA, -5L)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-06T22:06:33.897

这是一个更短的方法，利用`unlist`处理名称的方式：

```
library(dplyr)
df1 %>% group_by(Name) %>% do(as_tibble(t(unlist(.[2]))))
# # A tibble: 2 x 4
# # Groups:   Name [2]
#      Name      MedName1       MedName2         MedName3
#     <chr>         <chr>          <chr>            <chr>
#   1 name1 atenolol 25mg   aspirin 81mg sildenafil 100mg
#   2 name2 atenolol 50mg enalapril 20mg             <NA> 
```

# windows-phone-7 - 从 Windows Phone 本地数据库读取

> ID：11322806
> 
> 赞同：0
> 
> 时间：2012-07-04T05:17:17.087
> 
> 标签：windows-phone-7, windows-phone-7.1.1

我的 Windows Phone 应用程序中有一个数据库。从表中我需要选择一些行。我需要在查询中应用多个 Where 条件。我该如何编写这样的查询？

我的表包含用户名、DocumentId、FileType、FileLocation、FileSize 等。

我需要使用用户名、DocumentId 和 FileType 选择行。如何为此编写查询？

现在我正在使用以下代码：

```
using (DocumentDataContext DocDb = new DocumentDataContext(strConnectionString))
{
    IQueryable<Document> DocQuery = from Doc in DocDb.Documents where Doc.UserName == txtName.Text select Doc;
    Document Docs= DocQuery.FirstOrDefault();
} 
```

我可以使用此查询选择一个文档。我想选择所有满足条件的行。我可以在单个查询中执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T05:49:54.113

当然可以。`where`您可以使用标准或/和关键字扩展您的条件：

```
from Doc in DocDb.Documents
where Doc.UserName == txtName.Text && dic.FileType == "some type" && Doc.UserName == "some name"
select Doc; 
```

要获得多行使用[`ToList`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)而不是[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb340482). 它返回包含查询结果的元素列表：

```
var Docs= DocQuery.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:04:17.923

我找到了解决方案。

为了选择多个文档并在“WHERE”子句中应用多个条件，我对代码进行了一些更改，如下所示

```
IList<Document> DocumentList = null;

using (DocumentDataContext DocDb = new DocumentDataContext(strConnectionString))
{
    IQueryable<Document> DocQuery = from Doc in DocDb.Documents where Doc.UserName == txtName.Text & Doc.DocumentId == docId & Doc.FileType == fileType select Doc;
    DocumentList = DocQuery.ToList();
} 
```

在查询中，我首先使用“AND”在“WHERE”子句中添加更多条件。当我将“AND”更改为“&”时，它可以正常工作，并使用 IList<> 获取多条记录

# bash - 将多行回显到文件中

> ID：11322807
> 
> 赞同：20
> 
> 时间：2012-07-04T05:17:23.063
> 
> 标签：bash, echo

我有一个共享托管服务器的 httpd.conf 文件，我的任务是将每个虚拟主机迁移到 vps。使用 awk 我为特定站点提取了一个虚拟主机条目块。并将该条目存储在变量中。但是当我回显变量的输出以附加 vps 服务器的 httpd.conf 时，它会给出一个错误，例如

bash：命令替换：第 1 行：意外标记`newline' bash: command substitution: line 1:`echo 附近的语法错误

谁能告诉通过回显具有多行的变量来附加简单文本文件的确切方法。

我的期望脚本如下：

```
#!/usr/bin/expect 
set remote_ip [lindex $argv 0] 
set username [lindex $argv 1] 
set remote_command [lindex $argv 2] 
foreach {remote_ip username remote_command} $argv {break} 
spawn ssh -o "StrictHostKeyChecking no" root@$remote_ip `echo $remote_command >> /etc/httpd/conf/httpd.conf`
expect "*assword: " 
send "redhat\r" 
interact 
```

并且变量“remote_command”包含虚拟主机条目的模式。使用 printf 但仍然存在同样的问题。——</p>

* * *

我的 remote_command 包含以下值

```
<VirtualHost>
DirectoryIndex index.php
</VirtualHost> 
```

它仍然给出相同的错误。我使用了“”引号，但它适用于单行，而不适用于多行。

我的主脚本 script.sh 包含行

```
#!/bin/bash
some code .....
some code......
some code ......
echo "<VirtualHost $D_IPADDRESS>" > /opt/remotehttpd_conf
awk "p && /\/VirtualHost/{exit} /$SITENAME/{p=1}p" /opt/httpd.conf >> /opt/remotehttpd_conf
echo "</VirtualHost>" >> /opt/remotehttpd_conf
REMOTE_COMMANDS4=`cat /opt/remotehttpd_conf`
echo $REMOTE_COMMANDS4
./expect_remote_command_httpd.exp  "$D_IPADDRESS" "$USERNAME" "$REMOTE_COMMANDS4"
some code .....
some code ..... 
```

当我回显 REMOTE_COMMANDS4 它工作正常并给我输出所以我使用 expect_remote_command_httpd.exp 将输出传输到远程机器

我的 expect_remote_command_httpd.exp 包含

```
#!/usr/bin/expect 
set remote_ip [lindex $argv 0] 
set username [lindex $argv 1] 
set remote_command [lindex $argv 2] 
foreach {remote_ip username remote_command} $argv {break} 
spawn ssh -o "StrictHostKeyChecking no" root@$remote_ip `echo $remote_command >>   /etc/httpd/conf/httpd.conf`
expect "*assword: " 
send "redhat\r" 
interact 
```

但它不工作。可能是我使用的方法是完全错误的。我主要关心的是在共享 httpd 服务器中提取与给定站点相关的所有虚拟主机块行，并将其传输到远程 vps 的 httpd conf 文件。如果您提出任何其他方式，我将不胜感激。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2018-08-15T19:00:02.310

```
cat >> /path/to/existingFile.text<< EOF
some text line 1
some text line 2
some text line 3
EOF 
```

切换`cat >>`到`cat >`创建文件而不是追加

```
cat > /path/to/newFile.text<< EOF
some text line 1
some text line 2
some text line 3
EOF 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-04T05:20:30.987

似乎您尝试编写一些被视为特殊字符的字符。你必须用`''`. 如果您只想添加行`line1`, `line2`,`line3`用换行符分隔，请尝试

```
echo -e 'line1\nline2\nline3\n' 
```

或（更便携）

```
printf 'line1\nline2\nline3\n' 
```

如果还有其他问题，您能否提供更多信息？

感谢您提供更多信息。您必须更改反引号`` to double quotes`“” `in the`spawn ssh` 命令。那是这里的命令替换，但必须是普通（内插）字符串。

*更新*

好的，所以您想运行`$remote_command`并将其 reuls 写入文件。好的。那么你必须这样做：

```
spawn ssh -o "StrictHostKeyChecking no" root@$remote_ip $remote_command >> /etc/httpd/conf/httpd.conf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:44:18.767

你可以这样做，它更容易

```
spawn ssh -o "StrictHostKeyChecking no" root@$remote_ip "echo ready;cat >> /etc/httpd/conf/httpd.conf"
expect "assword:"
send "redhat\n"
expect "ready"
send "line 1 of file\n"
send "line 2 of file\n"
send "line 3 of file\n"
# send control-D to end
send "\04"
interact 
```

如果您不喜欢“echo ready; cat ...”，您可以调用一个从标准输入读取的脚本并完成您的工作。或者直接调用 bash 并发送脚本。

# iphone - 网络队列没有响应第二个请求

> ID：11322809
> 
> 赞同：0
> 
> 时间：2012-07-04T05:17:52.090
> 
> 标签：iphone, objective-c, json, asihttprequest

我正在创建一个网络队列来发送两个请求。我已将这两个请求添加到网络队列中。

```
-(void)viewDidLoad 
{
    [super viewDidLoad];
    ASINetworkQueue *networkQueue = [[ASINetworkQueue queue] retain];
    NSURL *url = [NSURL URLWithString:@"http://www.w3schools.com/xml/simple.xml"];
    NSURL *url1 = [NSURL URLWithString:@"http://search.twitter.com/search.json?q=mobtuts&rpp"];

    for(int i = 0; i<=1; i++)
    {
        if(i==0)
        {
            ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
            NSString *str =[NSString stringWithFormat: @"%d", i];
            request.userInfo = [NSDictionary dictionaryWithObject:str forKey:@"requestnum"];
            [request setDelegate:self];
            [networkQueue addOperation:request];
        }
        if(i==1)
        {
            ASIHTTPRequest *request1 = [ASIHTTPRequest requestWithURL:url1];
            NSString *str =[NSString stringWithFormat: @"%d", i];
            request1.userInfo = [NSDictionary dictionaryWithObject:str forKey:@"requestnum1"];
            [request1 setDelegate:self];
            [networkQueue addOperation:request1];   
        }
        [networkQueue go];
    }
} 
```

为了检查我的响应，我在 requestFinished:(ASIHTTPRequest *)request 方法中得到响应，如果我将密钥从 requestnum 更改为requestnum1 我将第一个 xml 数据作为响应字符串获取，为什么我无法访问第二个请求的响应。

```
-(void)requestFinished:(ASIHTTPRequest *)request
{
    NSString *str ;
    str= [request.userInfo objectForKey:@"requestnum1"];
    NSString *responseString = [request responseString];
    str = [request responseString];
    NSLog(@"%@",responseString);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:29:53.243

区分这两个请求非常简单。只需为每个请求分配标签。

```
for(int i = 0; i<=1; i++)
{
    if(i==0)
    {
        ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
        NSString *str =[NSString stringWithFormat: @"%d", i];
        request.tag = 1; //<--Tag here
        request.userInfo = [NSDictionary dictionaryWithObject:str forKey:@"requestnum"];
        [request setDelegate:self];
        [networkQueue addOperation:request];
    }
    if(i==1)
    {
        ASIHTTPRequest *request1 = [ASIHTTPRequest requestWithURL:url1];
        NSString *str =[NSString stringWithFormat: @"%d", i];
        request1.tag = 2; //<--Tag here
        request1.userInfo = [NSDictionary dictionaryWithObject:str forKey:@"requestnum1"];
        [request1 setDelegate:self];
        [networkQueue addOperation:request1];   
    }
    [networkQueue go];
} 
```

在请求完成处理相应

```
-(void)requestFinished:(ASIHTTPRequest *)request
{
    NSLog(@"request tag-->%d",request.tag);

    NSString *str=nil;
    NSString *responseString = nil;

    switch (request.tag) 
    {
        case 1:

            str= [request.userInfo objectForKey:@"requestnum"];
            responseString = [request responseString];
            str = [request responseString];
            NSLog(@"Response reqeust 1 --->%@",responseString);

            break;

        case 2:
            str= [request.userInfo objectForKey:@"requestnum1"];
            responseString = [request responseString];
            NSLog(@"Response reqeust 2 --->%@",responseString);

            break;
        default:
            break;
    }
} 
```

享受。

# python - 如何通过 Django 中的 gdata.youtube python 库上传 youtube 视频

> ID：11322815
> 
> 赞同：1
> 
> 时间：2012-07-04T05:18:26.527
> 
> 标签：python, django, youtube, youtube-api

我有一个由 py​​thon/django 驱动的应用程序，它具有可以使用 gdata.youtube python 库将视频发布到 youtube 的功能

我的参考如下：[https ://developers.google.com/youtube/1.0/developers_guide_python](https://developers.google.com/youtube/1.0/developers_guide_python)

前开发人员遵循了这个非常有用的页面中的说明，例如满足上传视频的要求和身份验证。但它不起作用。当我运行 firebug 时，有一个 500 INTERNAL SERVER ERROR 并且在我看来它可以追溯到 upload_prepare 函数，这很可能是在保存部分。

```
 def upload_prepare(request):
        if request.POST:
            form = UploadForm(request.user, request.POST)
            if form.is_valid():
                #error is in the next line
                video = form.save() 
```

他还按照有关如何通过 Browserupload 发布 youtube 视频的说明进行操作

我的代码如下：

模型.py

```
 class Category(models.Model):
        text = models.CharField(max_length=100)
        label = models.CharField(max_length=100)
        scheme = models.URLField()

        def toGData(self):
            return gdata.media.Category(
                text=self.text,
                label=self.label,
                scheme=self.scheme)

    class YoutubeUser(models.Model):
        username = models.CharField(max_length=50)
        ...

        #Initialize gdata.youtube.service.YouTubeService object
        def yt_service(self):
            try:
                return selt._yt_service
            except AttributeError:
        #setting up developer key and client ID
                yt_service = gdata.youtube.service.YouTubeService()
                yt_service.developer_key = settings.SYNCR_YT_DEVKEY
                yt_service.client_id = 'LOLtest'
        #setting up a authentication token
                if self.token:
                    yt_service.SetAuthSubToken(self.token)
                self._yt_service = yt_service
                return yt_service

        #Setting up AuthSub authentication for web apps
        def authsub_url(self, request):
        #urls.py url
            base = reverse('authlanding', args=(self.id,))
            next = 'http://%s%s?next=%s' % (request.get_host(), base, urllib2.quote(request.build_absolute_uri()))
            scope = 'http://gdata.youtube.com'
            secure = False
            session = True

            return self.yt_service.GenerateAuthSubUrl(next, scope, secure, session)

        #upgrade to a session token
        def upgrade_to_session(self):
            yt_service = self.yt_service
            yt_service.SetAuthSubToken(self.token)
            yt_service.UpgradeToSessionToken()
            self.token = yt_service.current_token.get_token_string()
            self.save() 
```

到目前为止，我的models.py中的代码，这里是我的forms.py中的代码，导致错误的保存函数在这里找到（查看上面的upload_prepare视图）

表格.py

```
 class UploadForm(forms.Form):
        video_title = forms.CharField(max_length=100)
        ...
        #https://developers.google.com/youtube/1.0/developers_guide_python#UploadingVideos
        #Browser-based upload
        def save(self):
            mediagroup = gdata.media.Group(
                title=gdata.media.Title(text=self.cleaned_data['video_title']),
                description=gdata.media.Description(description_type="plain", text=self.cleaned_data['video_description']),
                keywords=gdata.media.Keywords(text=self.cleaned_data['tags']),
        #category already in GData format look in models.py
                category=self.cleaned_data['category'].toGData(),
                player=None,
            )
            video_entry = gdata.youtube.YouTubeVideoEntry(media=mediagroup)
            response = self.yt_user.yt_service.GetFormUploadToken(video_entry)
            post_url = response[0]
            youtube_token = response[1]

            video = Video.objects.create(
                author=self.yt_user,
                post_url=post_url,
                youtube_token=youtube_token,
                title=self.cleaned_data['video_title'],
                description=self.cleaned_data['video_description'],
                tag_list=self.cleaned_data['tags'],
            )
            self.video = video
            return video 
```

html 中用来传递数据的表单，另一方面结合了 django 表单、django 自定义标记和 ajax

表格.py

```
 class UploadForm(forms.Form):
        video_title = forms.CharField(max_length=100)
        video_description = forms.CharField(widget=forms.Textarea(attrs={'cols': 60,
                                             'rows': 10}))
        category = forms.ModelChoiceField(Category.objects, empty_label=None)
        tags     = TagField(
               label=_('tags (comma separated)'),
               required=True,
               ) 
```

youtube_tags.py

```
 def youtube_upload_form(context):
    #UploadForm from above
        upload_form = UploadForm(context['user'])
        context['upload_form'] = upload_form
        return context

    register.inclusion_tag('syncr/youtube/upload.html',
                   takes_context=True)(youtube_upload_form) 
```

add_post.html

```
 <script>
        function upload_video_to_youtube(url){
            action = "%s?nexturl=%s" % (youtube_url, url)
            var new_form = create_element('form', {'method': 'post', 'action': action, 'enctype':"multipart/form-data"});
            $('#youtube_upload_form input').each(function(){
                var obj = this.cloneNode(true);
                new_form.appendChild(obj);
            });
            document.body.appendChild(new_form);
            new_form.submit();
        }
    </script>

    {% block body %}
    ...
    <div id="rd2-radioOptionContent" class="hide radioOptionContent">
    {% youtube_upload_form %}
    </div>
    {% endblock %} 
```

希望每个人都能完美地了解我发布的代码。如果读得很清楚，参考上发布的大多数说明都遵循（尽管用于提交数据的表单略有不同），并且鉴于我有 500 内部服务器错误，我需要在这些代码行中找到问题。任何答案都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:12:56.433

您的 yt_service 方法的第二行有错字，应该是 self 而不是 selt。也许这就是问题所在？

# javascript - Facebook 发帖请求不起作用

> ID：11322816
> 
> 赞同：0
> 
> 时间：2012-07-04T05:18:29.450
> 
> 标签：javascript, facebook, coffeescript, facebook-javascript-sdk, facebook-app-requests

我在我的网络应用程序中使用 Facebook JavaScript SDK。当我点击 Facebook 邀请按钮时，将调用以下函数

```
facebookInvite: (e) ->
  e.preventDefault()
  FB.ui
    method: "apprequests"
    message: "Become my Buddie"
    filters: [ "app_non_users" ]
    title: "Become my Buddie"
  , (response) ->
    if response and response.request_ids
      $howManyInvites = String(requests).split(",").length
    else
      false 
```

一切似乎都很好，即弹出窗口出现在我的朋友列表中

![在此处输入图像描述](../Images/8db948d142c80041b127dced3c5e124c.png)

但是，点击“发送请求”后，我只看到一个空白屏幕弹出窗口

![在此处输入图像描述](../Images/9faad91917b8a1a7969e2330ac553892.png)

此外，该请求似乎根本没有通过。

我在实施过程中遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:40:50.703

apprequest 对话框仅适用于画布应用程序...

# .net - 桌子 .DeleteOnSubmit 生成的 SQL 匹配所有列

> ID：11322818
> 
> 赞同：3
> 
> 时间：2012-07-04T05:18:43.710
> 
> 标签：.net, linq-to-sql

我在使用 LINQ to SQL 的棕地项目上遇到了一个问题，其中调用`Table<T>.DeleteOnSubmit`导致 SQL 查询`WHERE`对表中的每一列都有一个子句。

这是默认行为吗？如何更改它以使其仅与主键匹配？

**编辑**

确认一下，生成的类有一个主键：

```
[Column(Name="id", Storage="_Id", AutoSync=AutoSync.OnInsert, 
        DbType="BigInt NOT NULL IDENTITY", IsPrimaryKey=true, IsDbGenerated=true)]
public long Id
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T05:36:39.367

是的 - Linq-to-SQL 数据模型具有`UpdateCheck`为任何表中的每个列调用的属性。该属性指示该列是否将用于检查行在更新之前是否未更改。

相同的属性还用于检查行在删除之前是否未更改。因此，如果您只是在模型中设置所有列（主键除外）`UpdateCheck = Never`，那么您应该得到您正在寻找的内容。

![在此处输入图像描述](../Images/a7c82489dec25354cca9da6f72ca342d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T05:33:56.910

如果没有看到您的 SQL 表结构或 LINQ-to-SQL 类，就很难分辨。

但是，您看到的行为是在 LINQ-to-SQL 层不相信表上存在主键时识别记录。

您应该针对有问题的表重新生成 LINQ-to-SQL 类，并查看这是否不会产生正确的主键属性模型。

# ruby-on-rails-3.1 - 如何在视图中调用nested_li

> ID：11322819
> 
> 赞同：0
> 
> 时间：2012-07-04T05:18:45.847
> 
> 标签：ruby-on-rails-3.1

我正在创建一个 Rails 应用程序，我必须在其中创建一个教程网站，为此我想在我的索引页面上显示课程列表，并且当用户选择一门课程时，它将重定向到不同部分和小节的显示页面对于那些课程，在一个部分下可以有任何小节。`**For example**` `Course is Ruby on rails,`在此之下，我们有类似的部分

```
1.Introduction
 1.1 What is ruby
 1.2 Small program in ruby
  1.2.1 Say hello world
   1.2.1.1 Welcome user
   1.2.1.2 array in ruby
  1.2.2 User Interface
 1.3 Introduction to irb
2\. Introduction to rails. 
```

我想在我的应用程序中使用这种嵌套的 li 。

我已经在我的帮助表单中编写了嵌套 li 的代码。我`courses_helper.rb`文件中的代码是

```
def nested_li(objects)
  output = ""

  output += "<ul>"
  path = [nil]
  objects.each do |o|
    if o.parent_id != path.last
      # we are on a new level, did we decent or ascent?
      if path.include?(o.parent_id)
        # remove wrong wrong tailing paths elements
        while path.last != o.parent_id
          path.pop
          output += "\n</ul>"
        end
      else
        path << o.parent_id
        output += "\n<ul>"
      end
    end
    output += "\n<li>#{yield o}</li>"
  end
  #pop off unfinished paths elements
  while path.length > 1
    path.pop
    output += "\n</ul>"
  end
  output += "\n</ul>"
  return output.html_safe
end 
```

在我`show page`的我这样称呼它：

```
<div  class="row">
  <div id="main_content" class="span9">
  <h2><%= @course.title.titleize if !@course.title.nil? -%> </h2>
  <p> <%= @course.notes %></p>  

  <h3> List </h3>

  <div class="section">  

            <ul>   
                <%= nested_li(@sections) do |section| %>  
              <%= link_to section.title,section_path(section.id) %>
              <% end %>  
             </ul>

 </div>

  </div><!-- /main_content -->
   <%= render :partial => "/shared/side_bar" %>
</div><!-- /row --> 
```

谁能帮我解决这个问题。正如我在上面的示例中所示，此代码无法正确调用嵌套的子部分。我已经使用了closure_tree gem。请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:40:04.863

```
def display_sections(sections, course_id)
section_array = []
       <ul class='nav nav-list '>"
  for section in sections
   if(!section_array.include?(section.id))
       if section.children.present?
          ret += "<li class='item'>"
        ret += "<div id='sectiontitle_#{section.id}' class='section_title'>" 
        ret +="<span id='section_#{section.id}'>"            
        ret += "</span>"
        ret += "<br/>"
        ret += "</div>"
          ret += find_all_subsections(section, section_array, course_id)

          ret += "</li>"

          section_array << section.id
      else
         ret += "<li class='item'>"
         ret += "<div id='sectiontitle_#{section.id}' class='section_title'>"
           ret += link_to section.title,course_section_path(course_id, section.id), :title=> "#{section.id}"
         ret +="<span id='section_#{section.id}'>"
         ret += "</span>"
         ret += "</div>"
           ret += "</li>"

           section_array << section.id
       end
   end
  end
  ret += "</ul>"
  ret.html_safe
  end

 def find_all_subsections(section, section_array, course_id)

  if section.children.size > 0
    ret = '<ul class="nav nav-list">'
    section.children.each { |subsection|
      section_array << subsection.id
      if subsection.children.present?
        ret += "<li>"
        ret += "<div id='sectiontitle_#{subsection.id}' class='section_title'>"
        ret += link_to h(subsection.title),course_section_path(course_id, subsection.id), :class => 'sub_item', :title=> "#{subsection.id}"
        ret += "<br/>"
        ret +="<span id='section_#{subsection.id}'>"            
        ret += "</span>"
        ret += "</div>"
        ret += find_all_subsections(subsection, section_array, course_id)
        ret += '</li>'

      else
        ret += "<li class='item'>"
        ret += "<div id='sectiontitle_#{subsection.id}' class='section_title'>"
        ret += link_to h(subsection.title),course_section_path(course_id, subsection.id), :class => 'sub_item', :title=> "#{subsection.id}"
        ret +="<span id='section_#{subsection.id}' style='display:none;' class='pull-right'>"
        ret += "<br/>"

        ret += "</div>"
        ret += '</li>'
        section_array << subsection.id
      end
      }
    ret += '</ul>'
  end
end 
```

# alfresco - 如何知道 alfresco share 中特定屏幕的 js 文件？

> ID：11322820
> 
> 赞同：3
> 
> 时间：2012-07-04T05:18:48.817
> 
> 标签：alfresco, alfresco-share

在 alfresco share 中，有一个页面，有没有办法找出哪个 .js 文件与之关联？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T06:13:50.357

在 Alfresco Share a Page 中聚合了大量的 Surf 组件，每个组件通常都有一个 Javascript 控制器。有一个很棒的工具可以调试你的共享页面，它叫做[SurfBug](http://docs.alfresco.com/3.4/index.jsp?topic=%2Fcom.alfresco.Enterprise_3_4_0.doc%2Fconcepts%2FSurf_v4_surfbug.html)。它将告诉您[页面上所有 Surf 组件](http://blogs.alfresco.com/wp/ddraper/2011/08/31/surfbug/)的关联控制器和视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:51:13.507

您是指用于 java 脚本控制器的 javascript 文件还是用于事件触发器 java 脚本文件？

1.  对于 java 脚本控制器，

您可以根据之前的答案直接使用 SurfBug 查看冲浪组件文件。比如工作流列表页面中的workflow-list组件，workflow-list.get.js就是javascript控制器文件。

1.  对于事件触发 javascript 文件，

通常这个文件由 XXXXX.head.ftl 文件表示。例如，workflow-list.get.head.ftl 文件

```
<#include "../component.head.inc">
<!-- Common Workflow Actions -->
<@script type="text/javascript" src="${page.url.context}/res/components/workflow/workflow-actions.js"></@script>
<!-- Workflow List -->
<@link rel="stylesheet" type="text/css" href="${page.url.context}/res/components/workflow/workflow-list.css" />
<@script type="text/javascript" src="${page.url.context}/res/components/workflow/workflow-list.js"></@script> 
```

在此示例中，workflow-list.js 是 javascript 事件处理程序文件。

# jakarta-ee - 基于命名空间或 URI 的 spring 安全性

> ID：11322828
> 
> 赞同：0
> 
> 时间：2012-07-04T05:19:29.293
> 
> 标签：jakarta-ee, spring-security, authorization

我需要根据 URI 的命名空间来实现授权。例如**localhost:8080/common/*** **所有类型的用户都可以访问，并且 **localhost:8080/admin/*** *****只有管理员用户可以访问。*

 *我已经使用 UsernamePasswordAuthenticationFilter 进行登录，但我不知道如何检查每个请求的授权。

有人可以指导我如何使用 Spring Security 实现这种授权吗？

感谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:06:11.667

您可以使用

```
<intercept-url> element 
```

intercept-url 元素可用于定义一个模式，该模式使用 ant path 样式语法与传入请求的 URL 匹配。

例如使用 SpEL 的 Spring 3.0 +：

```
<http auto-config="true" use-expressions="true">
    <intercept-url pattern="/common/*" access="permitAll" />
    <intercept-url pattern="/registered/*" access="hasAnyRole('ROLE_USER,ROLE_ADMIN')" />
    <intercept-url pattern="/admin/**" access="hasRole('ROLE_ADMIN')" />
</http> 
```

如果您没有 SpEL 支持，请像这样使用：

```
<http auto-config='true'>
    <intercept-url pattern="/common/*" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
    <intercept-url pattern="/registered/*" access="ROLE_USER,ROLE_ADMIN" />
    <intercept-url pattern="/admin/*" access="ROLE_ADMIN" />
</http> 
```

[文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-minimal)

**更新**- 如果您在 JSP/JSP 中进行转发，则需要在 http 元素上设置一次每次请求 =“false”。

也可以看看：

*   [Spring Security 3 和 JSF 2 集成，无需重定向页面](https://stackoverflow.com/questions/11283098/spring-security-3-and-jsf-2-integration-without-redirecting-page/11287884#11287884)*

# windows - 获取伦号和对应的名称 - windows

> ID：11322834
> 
> 赞同：1
> 
> 时间：2012-07-04T05:20:06.590
> 
> 标签：windows, powershell, wmi

我有一个包含挂载点的 lun 名称列表。我正在寻找通过编程找到相应的 lun 编号/磁盘编号（我们在磁盘管理中看到的相同）

```
Disk 0  C:
Disk 1  D: 
```

请提供任何提示 - 希望通过 powershell 执行此操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T01:18:16.633

我会考虑使用 WMI 来获取这些信息。Win32_diskdrive 是一个很好的查看位置。

```
$Drives = gwmi Win32_diskdrive 
```

# multithreading - 非阻塞线程安全文件写入

> ID：11322835
> 
> 赞同：0
> 
> 时间：2012-07-04T05:20:19.613
> 
> 标签：multithreading, file-io, nonblocking

我正在尝试使用不应被阻塞的线程在不同的偏移位置写入文件。我不太确定如何进行相同的操作。我猜我需要用 O_NONBLOCK 标志打开文件。

只是我需要用 O_NONBLOCK 标志打开文件并且写入过程是一样的吗？

任何示例代码都将有助于解释

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:26:23.540

在 UNIX/Linux[上，与文件关联的文件描述符始终准备好进行读写](http://pubs.opengroup.org/onlinepubs/9699919799/functions/select.html)。换句话说，`O_NONBLOCK`对常规文件没有影响。

通常，写入文件只是将数据复制到内核页面缓存并返回。除非文件是用`O_DIRECT`标志打开的，或者内核页面缓存有太多脏页，在这种情况下写入会阻塞。

如果您需要对文件进行非阻塞写入，请创建一个专门的线程来完成所有写入，或者使用[异步 I/O](http://pubs.opengroup.org/onlinepubs/007904975/functions/aio_write.html)。

# c# - 使用 Jquery 将对齐属性应用于表头

> ID：11322840
> 
> 赞同：0
> 
> 时间：2012-07-04T05:20:36.260
> 
> 标签：c#, asp.net

我知道使用 .css() 使用 jquery 将 css 应用于 DOM，我想知道是否有任何 .attr 或 .att 方法，以便我可以使用 jquery 将对齐属性分配给表头。如果是，请告诉我代码。

```
<table>
<th >
</th>
<th >
</th>
<th >
</th>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:44:16.163

这是一个这样的示例代码`$(element).attr("nameAttr",valueAttr);`，您可以将任何属性添加到任何 html 元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:27:49.463

我不确定这是否是您要查找的内容，但您可以像这样添加属性

```
$("th").attr("align", "left"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:28:45.887

艰难的你应该尝试`CSS`设置对齐方式，但 jQuery 仍然提供`attr`如下功能：

```
$("th").attr("align","left"); 
```

# c# - Button tip when Mouse is over

> ID：11322841
> 
> 赞同：8
> 
> 时间：2012-07-04T05:20:41.080
> 
> 标签：c#, winforms, button

I have a simple question ! I'd like to know how to add like a tip when the user puts his mouse over a button, like that like grey box that appears right below the button. I'm using Windows Form !

P.S-> I know it's obsolete and we now have WPF but I'm using Form !

Thanks !

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-04T05:21:47.150

Use [ToolTip](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.aspx) on the button. Like.

```
System.Windows.Forms.ToolTip ToolTip1 = new System.Windows.Forms.ToolTip();
ToolTip1.SetToolTip(this.Button1, "Button Info"); 
```

Or you can:
Add a ToolTip control to your form, Name it ToolTip1.
Add text for tooltip to the "ToolTip on ToolTip1" property of the button.

# mongodb - Doctrine2 ODM - 对象（或嵌入式文档）作为_id

> ID：11322842
> 
> 赞同：2
> 
> 时间：2012-07-04T05:20:52.803
> 
> 标签：mongodb, symfony, doctrine-orm, doctrine-odm

我有一个运行增量地图的进程，减少到一个集合，我在其中查看不同时间段的指标 - 按 id(s) 和日期分组。所以我的输出集合基本上有一个复合 id 来处理分组。

```
{
    "_id" : {
        "site" : 67,
        "dt" : ISODate("2012-07-03T00:00:00Z")
    },
    "value" : {
        // Metrics here
    }
} 
```

我希望能够使用 ODM 在我的 Symfony2 应用程序中从该集合中获取结果 - 但在该`_id`字段中遇到问题。我以为我可以将其指定为`@Id`and `@embedOne`：

```
 /**
    * @MongoDB\Id
    * @MongoDB\EmbedOne(targetDocument="reportId")
    */
   protected $id; 
```

但是，这不起作用。我还尝试使用 进行设置`@Id`，`strategy=NONE`并且可以使用 QueryBuilder 来获取行，但是在尝试对 Document 类进行水合时会出错。我尝试使用站点 ID 和日期 ( `67-134137916`)，它允许我使用 DocumentManager，但我失去了按日期范围查询的能力。

任何人都对如何在 Doctrine2 的 ODM 中将对象作为 id 处理有任何意见，这是否支持？

**编辑：** 删除复合主键标签 - 问题确实与使用对象作为主键有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:47:57.677

我不确定这是否是您问题的核心：[复合主键教程](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/composite-primary-keys.html)

看起来你只能有整数和字符串的复合主键（所以没有日期？）。

# iphone - 在 cocos2d 应用中全局打开/关闭声音

> ID：11322844
> 
> 赞同：-4
> 
> 时间：2012-07-04T05:20:56.767
> 
> 标签：iphone, ios, cocos2d-iphone

我使用了一个单例类并在所有类中使用来打开/关闭应用程序声音。问题是当我改变屏幕时，即使它被静音，声音也会打开。我在每个类的 init 中调用 sound 方法，所以它打开了。但是，如果我不从 init 调用它，它就永远不会启动。我搞砸了。

以下是我用过的

```
//SingletonClass.m
+(SingletonClass*)sharedMySingleton
{
 .....
}
+(id)alloc{
 ......
}

-(id)init{
    self = [super init];
         if (self != nil) {
             // initialize stuff here
             is_sound_enable = TRUE;
    //         [[SimpleAudioEngine sharedEngine] setMute:NO];
             [[SimpleAudioEngine sharedEngine] resumeBackgroundMusic];
            }              
      return self;
}

-(void)setsound{
    if(is_sound_enable == TRUE){
//       [[SimpleAudioEngine sharedEngine] setMute:NO]; //this is not working when called again
        [[SimpleAudioEngine sharedEngine] resumeBackgroundMusic];
//        is_sound_enable = FALSE;
    }
    else{
//        [[SimpleAudioEngine sharedEngine] setMute:YES]; // this is not working when called again
        [[SimpleAudioEngine sharedEngine] pauseBackgroundMusic];
//        is_sound_enable = TRUE;
    }

    if(is_sound_enable == TRUE){
        is_sound_enable = FALSE;
    }
    else{
        is_sound_enable = TRUE;
    }
}

//MyClass.m
-(void)toggleSoound{
[[SingletonClass sharedMySingleton] setsound];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T06:48:33.907

创建 SingletonClass.h 文件如下

```
#import <Foundation/Foundation.h>
#import "AVFoundation/AVFoundation.h"

@interface SingletonClass : NSObject 
{
    BOOL is_sound_enable;
    AVAudioPlayer *audioPlayer;
}

@property (nonatomic,assign) BOOL is_sound_enable;
@property (nonatomic,retain) AVAudioPlayer *audioPlayer;

+ (SingletonClass *)sharedInstance;
-(void)checkAndPlayMusic;
-(void)loadNewFile:(NSURL*)newFileURL;

@end 
```

创建 SingletonClass.m 文件如下

```
#import "SingletonClass.h"

@implementation SingletonClass

@synthesize is_sound_enable;
@synthesize audioPlayer;

#pragma mark -
#pragma mark Singleton Variables
static SingletonClass *singletonHelper = nil;

#pragma mark -
#pragma mark Singleton Methods
- (id)init {
    if ((self = [super init])) {
        is_sound_enable = YES;
        NSString *strPath = @""; //<-- Assign path here
        NSURL *url = [NSURL URLWithString:strPath];
        audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
        [audioPlayer prepareToPlay];
        audioPlayer.numberOfLoops = -1; //<-- This will set it to infinite playing.
    }

    return self;
}
+ (SingletonClass *)sharedInstance {
    @synchronized(self) {
        if (singletonHelper == nil) {
            [[self alloc] init]; // assignment not done here
        }
    }
    return singletonHelper;
}
+ (id)allocWithZone:(NSZone *)zone {
    @synchronized(self) {
        if (singletonHelper == nil) {
            singletonHelper = [super allocWithZone:zone];
            // assignment and return on first allocation
            return singletonHelper;
        }
    }
    // on subsequent allocation attempts return nil
    return nil;
}
- (id)copyWithZone:(NSZone *)zone {
    return self;
}
- (id)retain {
    return self;
}
- (unsigned)retainCount {
    return UINT_MAX;  // denotes an object that cannot be released
}
//- (void)release {
- (void)dealloc {
    [audioPlayer release];
    [super dealloc];
}
- (id)autorelease {
    return self;
}

-(void)resumeBackgroundMusic
{
    //Your code
    NSLog(@"Playing music");
    [self.audioPlayer play];
}

-(void)pauseBackgroundMusic
{
    //Your code here
    NSLog(@"Paused music");
    [self.audioPlayer pause];
}

-(void)checkAndPlayMusic
{
    if(self.is_sound_enable)
        [self resumeBackgroundMusic];
    else 
        [self pauseBackgroundMusic];
}

//Added this new method to load new music file.
-(void)loadNewFile:(NSURL*)newFileURL
{
    if(self.audioPlayer)
        [self.audioPlayer release];

    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:newFileURL error:nil];
    [audioPlayer prepareToPlay];
    audioPlayer.numberOfLoops = -1; 
}

@end 
```

现在你要做的是

```
SingletonClass *sgHelper = [SingletonClass sharedInstance];
sgHelper.is_sound_enable = NO; //<--Set here NO or YES according to your requirement and music will be played accordingly.
[sgHelper checkAndPlayMusic]; 
```

如果您需要进一步的帮助，请告诉我。

# .htaccess - mod-rewrite 去除 .htaccess 中的子目录

> ID：11322848
> 
> 赞同：0
> 
> 时间：2012-07-04T05:21:29.083
> 
> 标签：.htaccess, mod-rewrite, apache

我将如何重写 URL，例如：

```
http://www.site.com/sub-directory/page-name 
```

到

```
http://www.site.com/page-name 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:54:56.740

我相信您的预期解决方案是使用[Virtual Hosts](http://httpd.apache.org/docs/2.0/vhosts/examples.html)，但如果您无权访问 httpd.conf，您可以尝试以下重写规则：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} =host1.example.com
RewriteCond %{REQUEST_URI} !^/host1-dir
RewriteRule ^(.*) host1-dir/$1 [L]

RewriteCond %{HTTP_HOST} =host2.example.com
RewriteCond %{REQUEST_URI} !^/host2-dir
RewriteRule ^(.*) host2-dir/$1 [L]

RewriteCond %{HTTP_HOST} =host3.example.com
RewriteCond %{REQUEST_URI} !^/host3-dir
RewriteRule ^(.*) host3-dir/$1 [L]

# If doesn't match any of it then 404 Not Found or anything you like
RewriteCond %{HTTP_HOST} =host1.example.com
RewriteCond %{HTTP_HOST} =host2.example.com
RewriteCond %{HTTP_HOST} =host3.example.com
RewriteRule .* - [R=404,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:24:39.310

IIRC mod_rewrite 支持正则表达式，因此您可以使用它的替换：

```
^(.*/)[^/]*& 
```

括号匹配到最后`/`。

然后你使用组引用重新使用它，我认为它是`$1`. 其余的被丢弃。

查看关于如何使用正则表达式的 mod_rewrite 帮助。

# java - 在 mssql 的情况下 metadata.getTables 结果集为空

> ID：11322863
> 
> 赞同：4
> 
> 时间：2012-07-04T05:23:37.403
> 
> 标签：java, mysql, sql-server, oracle, metadata

我试图从数据库中选择所有表名。我为此使用以下代码行。

```
DatabaseMetaData databaseMetaData =  connection.getMetaData();
            resultSet = databaseMetaData.getTables(null, dbName, null, null);
            while(resultSet.next()){
                        //doing operations - take table name and all that
                        } 
```

这里的问题是在 mysql 的情况下它工作正常，这意味着如果底层数据库是 mysql - 没问题。但是当我用 mssql 尝试相同的代码时，结果集是空的。是否还有其他替代方法可以从 mssql 数据库中获取表详细信息。？

如果它的..请提供在 mysql、mssql、oracle 等 diff 数据库下获取表详细信息的区别；因为就我而言，我的数据库可能是上述任何一种。任何人都可以请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:32:48.243

获取代码，例如：

```
Connection con = null;
    try {

      Class.forName(
        "com.microsoft.sqlserver.jdbc.SQLServerDriver");
      con = DriverManager.getConnection(
          "jdbc:sqlserver://localhost:1269;"
        + "user=sa;password=HerongYang;"
        + "database=AdventureWorksLT");

      DatabaseMetaData meta = con.getMetaData();
      ResultSet res = meta.getTables(null, null, null, 
         new String[] {"TABLE"});
      System.out.println("List of tables: "); 
      while (res.next()) {
         System.out.println(
            "   "+res.getString("TABLE_CAT") 
           + ", "+res.getString("TABLE_SCHEM")
           + ", "+res.getString("TABLE_NAME")
           + ", "+res.getString("TABLE_TYPE")
           + ", "+res.getString("REMARKS")); 
      }
      res.close();

      con.close(); 
```

您可以在此页面尝试此链接：

[列出所有表 - getTables()](http://www.herongyang.com/JDBC/sqljdbc-jar-Table-List.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:37:08.793

我认为以下链接会对您有所帮助。

[http://www.roseindia.net/jdbc/jdbc-mysql/AllTableName.shtml](http://www.roseindia.net/jdbc/jdbc-mysql/AllTableName.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-13T13:38:35.457

MySQL 安装附带默认数据库。其中一个数据库名为“mysql”。如果您使用“mysql”数据库并尝试获取元数据和表名，它会给出空结果。我通过创建另一个名为“mydb”的数据库来验证这一点，然后用它来获取元数据，然后是表名。它翻转工作。

使用名为“mysql”的默认数据库似乎 MYSQL 存在一些问题或限制

# mysql - (My)SQL多重深度左连接

> ID：11322872
> 
> 赞同：0
> 
> 时间：2012-07-04T05:25:05.500
> 
> 标签：mysql, sql, join

任何人都可以告诉我如何制作多个左连接的视图吗？

```
A GAME has zero or multiple LINKs (OneToMany on GAME.ID = LINK.GAME_ID)
Each LINK has exactly one of multiple STOREs (OneToOne on LINK.STORE_ID = STORE.ID)
Each STORE has exactly one of multiple PLATFORMs (OneToOne on STORE.PLATFORM_ID = PLATFORM.ID) 
```

我想把 VIEW 作为

```
PLATFORM_ID (FK)    GAME_ID (FK)
-------------------------------- 
```

我的意思是我想`GAME`通过给定的 s 列出 s，`PLATFORM`每个都**至少有**一个或多个路径通过`LINK`和`STORE`到达`PLATFORM`

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T05:31:24.200

```
select 
   l.game_id, p.platform_id
from
   links l,
   stores s,
   platforms p
where
   l.link_id = s.link_id
and
   p.platform_id = s.platform_id
group by 
   l.game_id, p.platform_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T05:28:56.110

```
SELECT DISTINCT s.PLATFORM_ID, l.GAME_ID
FROM Games g 
LEFT JOIN Links l ON g.ID = l.GAME_ID
INNER JOIN Stores ON l.STORE_ID = s.STORE_ID
INNER JOIN PLATFORMS p ON s.PLATFORM_ID = p.ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T05:29:26.870

你的 SQL 将是，

```
select GAME_ID 
from GAME,STORE,PLATFORM
where 
PLATFORM.ID = STORE.PLATFORM_ID
and STORE.ID = GAME.STORE_ID
and PLATFORM.ID = {some_ID} 
```

# android - 如何在android中第一张图像的选定点将两个位图合并在一起？

> ID：11322876
> 
> 赞同：8
> 
> 时间：2012-07-04T05:25:29.003
> 
> 标签：android, bitmap, drawbitmap

如何将两个不同的图像合并为一个。我还需要在第一张图像的特定点合并第二张图像。安卓可以吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:40:10.897

这应该有效：

*   从位图创建一个画布对象。
*   为该画布对象绘制另一个位图（方法将允许您专门设置坐标）。
*   原始位图对象将保存新数据，因为画布会写入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T02:24:40.660

我想这个功能可以帮助你：

```
private Bitmap mergeBitmap(Bitmap src, Bitmap watermark) {
      if (src == null) {
         return null;
      }
      int w = src.getWidth();
      int h = src.getHeight();

      Bitmap newb = Bitmap.createBitmap(w, h, Config.ARGB_8888);
      Canvas cv = new Canvas(newb);

      // draw src into canvas
      cv.drawBitmap(src, 0, 0, null);

      // draw watermark into           
      cv.drawBitmap(watermark, null, new Rect(9, 25, 154, 245), null);

      // save all clip
      cv.save(Canvas.ALL_SAVE_FLAG);

      // store
      cv.restore();

      return newb;
   } 
```

它将水印绘制到特定矩形的“src”上。

# blackberry - 黑莓http post请求长度问题

> ID：11322881
> 
> 赞同：1
> 
> 时间：2012-07-04T05:27:05.840
> 
> 标签：blackberry

我有一个黑莓程序，它使用 http post 请求将数据发送到后端。现在该代码在我的模拟器（OS 5/6/7）甚至真实设备上都能完美运行，但在某些国家/地区的其他一些设备上，使用带有 http 错误代码 400（错误请求）的 3g 但通过 WiFi 连接失败好的..经过调查，我意识到那些电信运营商的 bis-b 代理由于大小（> 7kb）而“阻止”/“拒绝”发布请求。问题是我无法缩短请求大小，所以关于如何解决这个问题的任何想法？任何将不胜感激。谢谢

**编辑** 这是通过 BIS 连接时使用的连接字符串。

```
deviceside=false;connectionUID=GPMDSXXXX;ConnectionType=mds-public (XXXX varies from network to network) 
```

经过进一步检查，我意识到“工作”连接使用 BIS_B TransportDescriptor 类型 (5) 进行连接，而“失败”连接使用 TCP_CELLULAR (1) 进行连接。即要求`connectionDescriptor.getTransportDescriptor().getTransportType()`工作连接给出5，而失败的连接给出1。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:10:45.057

尝试使用 HTTPS。在这种情况下，承运人无法嗅出里面到底是什么。

# android - 在Android上点击主页按钮后未绘制三角形

> ID：11322884
> 
> 赞同：1
> 
> 时间：2012-07-04T05:27:16.990
> 
> 标签：android, opengl-es, android-ndk, java-native-interface

您好，我最近一直在 android ndk 上使用 OpenGL ES 1.1，但我遇到了一个问题。发生的事情是我在屏幕上呈现一个简单的红色方块，当我启动应用程序时，方块完美显示，但是当我点击主页按钮并返回应用程序时，方块不再显示。`getError`我在调用后尝试调用`glDrawArrays`以查看是否发生错误并且它总是返回`GL_NO_ERROR`。我在 android 网站上读到以下内容：

> 在某些情况下，EGL 渲染上下文会丢失。这通常发生在设备在进入睡眠状态后唤醒时。当 EGL 上下文丢失时，与该上下文关联的所有 OpenGL 资源（例如纹理）将被自动删除。为了保持正确渲染，渲染器必须重新创建它仍然需要的任何丢失的资源。onSurfaceCreated(GL10, EGLConfig) 方法是一个方便的地方。

我所做的是在活动的每个阶段都在 log cat 上打印，当点击主页按钮并返回应用程序时，系统没有调用`onSurfaceCreated`. 我还尝试在 log cat 中打印我的顶点，以检查它们是否以某种方式被破坏，我只是发送了错误的值，`glVertexPointer`但看起来没问题。这是代码：

```
 static jint initialize(JNIEnv* env, jobject obj, jint width, jint height){
        glViewport(0, 0, width, height);

        glMatrixMode(GL_PROJECTION);
        glOrthof(0, width, height, 0, -1, 1);

        glClearColor(100.0f/255.0, 149.0f/255.0f, 237.0/255.0f, 1.0f);

    }

    struct Vertex {
         float Position[2];
         float Texture[4];
    };

    static void gameRun(JNIEnv* evn, jobject obj) {
         glClear(GL_COLOR_BUFFER_BIT);

         const Vertex Vertices[] = {
        {{ 0.0f, 100.0f },   { 1.0f, 0.0f, 0.0f, 1.0f }},
        {{ 0.0f,  0.0f },    { 1.0f, 0.0f, 0.0f, 1.0f }},
        {{ 100.0f, 100.0f }, { 1.0f, 0.0f, 0.0f, 1.0f }},
        {{ 100.0f,  0.0f },  { 1.0f, 0.0f, 0.0f, 1.0f }},
         };

         glMatrixMode(GL_MODELVIEW);
         glLoadIdentity();

         glEnableClientState(GL_VERTEX_ARRAY);
         glEnableClientState(GL_COLOR_ARRAY);

         glVertexPointer(2, GL_FLOAT, sizeof(Vertex), &Vertices[0].Position[0]);
         glColorPointer(4, GL_FLOAT, sizeof(Vertex), &Vertices[0].Texture[0]);

         GLsizei vertexCount = sizeof(Vertices) / sizeof(Vertex);
         glDrawArrays(GL_TRIANGLE_STRIP, 0, vertexCount);

         glDisableClientState(GL_VERTEX_ARRAY);
         glDisableClientState(GL_COLOR_ARRAY);
    } 
```

**注意：**该函数`initialize`是从`onSurfaceCreated`和`gameRun`从调用的`onDrawFrame`。

让我感到奇怪的一件事是，在我的手机上按主页按钮后再次运行该应用程序时，系统会调用该功能`onSurfaceChanged`两次。不知道它是否与任何事情有关，但它只是奇怪。

如果有人可以帮助我，我将非常感激：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:01:49.980

好的，所以在做了一些测试并与一些示例项目进行比较之后，我注意到了一些事情。在调用 glOrthof 的一个项目中，我将传递左右的宽度和高度之间的比率，并将 -1 和 1 传递给顶部和底部：

```
float ratio = width / height;
glOrthof(-ratio, ratio, -1, 1, -1, 1); 
```

当我点击主页按钮然后再次运行应用程序时，我注意到正方形会缩放。

在另一个项目中，我将简单地创建一个投影矩阵，然后在我的 gameRun 函数上使用 glLoadMatrix 设置它：

```
mat4 projection = mat4::Frustum(-2, 2, -h / 2, h / 2, 5, 10);
glMatrixMode(GL_PROJECTION);
glLoadMatrixf(projection.Pointer()); 
```

当我点击主页按钮然后再次运行应用程序时，我看到这一次正方形会毫无问题地出现。然后我开始阅读 OpenGL ES 1.1 的文档，发现如下：

> glOrtho 描述了一种产生平行投影的变换。**当前矩阵（参见 glMatrixMode）乘以该矩阵，结果替换当前矩阵...**

它突然袭击了我......因为从家庭中断回来后，我的应用程序正在使用先前创建的上下文。所以实际上发生的是，当我调用`glOrthof`这个时间时，值乘以在我的应用程序被中断之前设置的值。这会导致我的 Ortho 放大一个平方因子。使我的 100 x 100 正方形渲染得非常非常小。为了解决这个问题，我只是`glLoadIndentity`在调用之前添加了一个`glOrthof`：

```
static jint initialize(JNIEnv* env, jobject obj, jint width, jint height){
   glViewport(0, 0, width, height);

   glMatrixMode(GL_PROJECTION);
   glLoadIdentity();
   glOrthof(0, width, height, 0, -1, 1);

   glClearColor(100.0f/255.0, 149.0f/255.0f, 237.0/255.0f, 1.0f);
} 
```

这是有效的，因为`glLoadIdentity`用单位矩阵替换了之前的值：

> glLoadIdentity**用单位矩阵替换当前矩阵。** 它在语义上等价于使用单位矩阵调用 glLoadMatrix
> 
> （1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1）

从而解决问题！:D

# php - 如何限制用户输入直接网址

> ID：11322889
> 
> 赞同：-2
> 
> 时间：2012-07-04T05:27:51.290
> 
> 标签：php

我有一些文件可以由管理员访问并由该用户的管理员允许。但问题是，第三个用户可以直接输入网址，也可以访问该页面，那么如何限制未经授权的用户访问呢？eg: www.manoj.com/myinfo.php /// 管理员可以访问 eg: www.manoj.com/myinfo.php /// 管理员允许的用户可以访问

但是第三个用户也可以通过直接输入 url 来访问这个页面。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:37:56.323

1）我认为第三个用户可能会尝试尝试该网址的陌生人。
希望您使用[**会话**](http://php.net/manual/en/features.sessions.php)管理多用户，您必须检查页面顶部的会话以检查有效的登录凭据（用户是否登录）。
因此任何第三次尝试访问 url 的用户都将被重定向到登录名。

# windows - 所有 Windows 用户共用的目录

> ID：11322890
> 
> 赞同：0
> 
> 时间：2012-07-04T05:27:58.710
> 
> 标签：windows

我想知道 Windows 中所有用户都可以访问的目录路径。

多个用户可以使用该目录共享文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:29:41.650

`%PUBLIC%``C:\Users\Public`环境变量（它在我的系统上解析）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:41:46.530

要获取公用文件夹 ( `FOLDERID_Public`)，您应该调用[SHGetKnownFolderPath](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762188%28v=vs.85%29.aspx)。

在 < Vista 上，您可能应该使用`CSIDL_COMMON_DOCUMENTS`或`CSIDL_COMMON_APPDATA`...

# php - php mysql date.timezone 和冬夏时间

> ID：11322893
> 
> 赞同：0
> 
> 时间：2012-07-04T05:28:10.227
> 
> 标签：php, mysql, date, timezone

我在使用 php 或 mysql 的夏季 GMT +02:00 和冬季 GMT +01:00 时间时遇到问题

在 php.ini date.timezone = '欧洲/布拉格'

php 和 mysql 工作方式相同，通过这种方式 ->

所以`strtotime('20120101000000') returns 1325372400` 因为 strtotime 使用本地时间，同时`strtotime('20120101000000 UTC')`返回正确的值`1325376000`

但对我来说没有什么是正确的，例如：当用户在 2012 年 1 月 30 日 00:30 收到钱并且我在没有 UTC 的情况下通过 strtotime 存储它时......但是当我在冬季阅读它时，我会看到 23:30 30.6.2012 ....因为我的 GMT +小时已更改

所以我尝试将本地时间设置为 UTC 并仅使用 UTC ......但这意味着，我必须更改系统时间并添加时间（格林威治标准时间 +02:00）现在一切正常

但必须停止 NTP 同步...因为我需要使用 GMT +02:00 增加的时间

你能帮我吗，如果存在另一个出色的解决方案或者如何将 NTP 同步设置增加 2 小时

下一个问题是，该网络服务器说您的时间（增加 2 小时是格林威治标准时间......但事实并非如此）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T05:49:16.400

在 PHP 中，您可以使用函数 date_default_timezone_set [http://php.net/manual/en/function.date-default-timezone-set.php在脚本中设置时区](http://php.net/manual/en/function.date-default-timezone-set.php)

在 mysql 中，时区将默认为您的计算机/服务器的系统时间。您可以通过以下方式了解如何更改此设置：

[http://dev.mysql.com/doc/refman//5.5/en/time-zone-support.html](http://dev.mysql.com/doc/refman//5.5/en/time-zone-support.html)

或者使用 mysql，您可以使用以下命令在每个查询的基础上执行此操作：

CONVERT_TZ()
[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)

最好通过将所有数据转换为单个 TZ 来处理时区，最好是一个不易受夏令时影响的 TZ。GMT 或 UTC 是最佳实践。您可以在需要时将查询结果转换为所需的 TZ。或者，您可以使用 linux 时间戳（php: time()、strtotime()、Mysql: UNIX_TIMESTAMP），然后在需要时将这些值转换为人类可读的字符串。

希望这可以帮助。

# ruby - 在 OSX Lion 上关闭终端时，RVM 忘记了 gemsets

> ID：11322895
> 
> 赞同：1
> 
> 时间：2012-07-04T05:28:38.627
> 
> 标签：ruby, command-line, osx-lion, rvm, zsh

我有一个与此处列出的问题类似的问题： [RVM and OSX Lion - RVM 'forgets' gemsets on system restart](https://stackoverflow.com/questions/8670065/rvm-and-osx-lion-rvm-forgets-gemsets-on-system-restart)

当我简单地关闭终端时，我的 RVM 忘记了 gemsets。我已经完成了`rvm use --default 1.9.3-p194@mygemset`，在关闭终端并重新打开后，`rvm gemset list`我得到了

```
➜  ~  rvm gemset list

gemsets for system (found in /Users/adam/.rvm/gems/system)
   * 
```

以下是您需要的附加信息：我在 OSX Lion 上，使用 Oh-my-zsh

```
➜  ~  rvm --version

rvm 1.14.5 (master) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]

➜  ~  rvm info

system:

  system:
    uname:       "Darwin Adams-MacBook-Pro.local 11.4.0 Darwin Kernel Version 11.4.0: Mon Apr  9 19:32:15 PDT 2012; root:xnu-1699.26.8~1/RELEASE_X86_64 x86_64"
    bash:        "/bin/bash => GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin11)"
    zsh:         "/bin/zsh => zsh 4.3.11 (i386-apple-darwin11.0)"

  rvm:
    version:      "rvm 1.14.5 (master) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "2 days 4 hours 42 minutes 33 seconds ago"

  homes:
    gem:          "not set"
    ruby:         "not set"

  binaries:
    ruby:         "/Users/adam/.rvm/rubies/ruby-1.9.3-p125/bin/ruby"
    irb:          "/Users/adam/.rvm/rubies/ruby-1.9.3-p125/bin/irb"
    gem:          "/Users/adam/.rvm/rubies/ruby-1.9.3-p125/bin/gem"
    rake:         "/Users/adam/.rvm/gems/ruby-1.9.3-p125@global/bin/rake"

  environment:
    PATH:         "/Users/adam/.rvm/gems/ruby-1.9.3-p125@rails32/bin:/Users/adam/.rvm/gems/ruby-1.9.3-p125@global/bin:/Users/adam/.rvm/rubies/ruby-1.9.3-p125/bin:/Users/adam/.rvm/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/X11/bin"
    GEM_HOME:     ""
    GEM_PATH:     ""
    MY_RUBY_HOME: ""
    IRBRC:        ""
    RUBYOPT:      ""
    gemset:       "" 
```

谢谢

编辑：我刚刚删除了 oh-my-zsh 并且 rvm 似乎工作正常。我怎样才能让这两个（RVM 和 oh-my-zsh）发挥得很好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T23:02:55.847

您需要限制加载的 OMZ 插件的数量，基本上只使用那些真正为您提供所需功能的插件，如果您不知道插件提供了哪些功能，请不要安装它以防万一，通常是那些插件比 rvm 已经做了一些额外的事情。

与往常一样：系统为您做的事情也对您做。

# django - 如何在模板 Django 中使用 for 循环将数组元素用作标签？

> ID：11322902
> 
> 赞同：2
> 
> 时间：2012-07-04T05:29:09.223
> 
> 标签：django, templates, for-loop, label, formset

我有以下模板代码，目前我正在获取循环计数器作为我的表单集的标签。我怎样才能得到数组'月'的元素（例如month.counter，其中计数器是循环）作为我的标签？我试过 {{month.forloop.counter}} 但没有奏效

```
<html>

<head>
<title>Actuals</title>
</head>

<body>

<h1>Actuals Data</h1>

<h2>Your Account Number is : {{ Account_Number }}</h2>
<h2>You Chose {{ Year }} {{month}} as period.</h2>

{% if form.errors %}

    <p style="color: red;">
   Please correct the error{{ form.errors|pluralize }}below.</p>

   {% endif %}

<form action="." >
    {{ formset.management_form }}

<table>

      {% for form in formset %}

    {{form.id}}

            <div class="field">
                {{ form.Value.errors }}
                <label for="id_Value">{{months}}.{{forloop.counter}}</label>
                {{ form.Value }}
            </div>

      {% endfor %}

    </table>

</form>

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:06:35.230

您可以使用自定义模板标签来做到这一点。示例代码如下：

将以下内容添加到 /{app_name}/templatetags/app_tags.py

```
from django import template
register = template.Library()

@register.filter
def month(value, counter):
    try:
        month = value[counter]
    except IndexError:
        month = ""
    return month 
```

在您的模板中添加以下内容

```
{% load app_tags %}

............
............

{% for form in formset %}
    {{form.id}}
    <div class="field">
        {{ form.Value.errors }}
        <label for="id_Value">{{ months|counter:forloop.counter }}</label>
        {{ form.Value }}
    </div>
{% endfor %}

............
............ 
```

[查看此链接](http://copilotco.com/mail-archives/django.2009/msg00904.html)，有人也尝试了不同的方法来做到这一点；虽然他们都没有工作。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:47:28.227

django 模板中没有现成的过滤器/标签。您可以尝试编写自定义过滤器/标签。请参阅[自定义模板标签和过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

# vb.net - VB.Net 处理 PowerShell 管道？

> ID：11322903
> 
> 赞同：0
> 
> 时间：2012-07-04T05:29:17.127
> 
> 标签：vb.net, powershell

我不知道如何表达这个问题，但这就是我要找的：

我想创建一个 VB.Net 应用程序，它可以将自身“插入”到 PowerShell 管道中作为接收器，也*可以选择*作为生产者。换句话说，我想这样做：

```
Some-PowerShell-CmdLet | My-Program 
```

并且可以选择：

```
Some-PowerShell-CmdLet | My-Program | Other-PowerShell-CmdLet 
```

如果您能指出相关文档和/或教程，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T05:36:03.320

看看 David Aiken 的这个[MSDN 博客](http://blogs.msdn.com/b/daiken/archive/2007/02/07/creating-a-windows-powershell-cmdlet-using-the-visual-studio-windows-powershell-templates.aspx)。它讨论了在 C# 和 Vb.net 中获取[Visual Studio PowerShell 模板，然后简要介绍了如何创建 cmdlet。](http://channel9.msdn.com/forums/sandbox/249904-Windows-PowerShell-Visual-Studio-2005-Templates-C-and-VBNET)

您还可以查看[Microsoft 提供的这些教程](http://msdn.microsoft.com/en-us/library/windows/desktop/dd878321.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T06:02:22.690

您可以从安装 Powershell 的位置直接执行应用程序“powershell Some-PowerShell-CmdLet | PATH/My-Program”。还可以在 Windows 中使用以下命令启动一个新的 powershell 窗口：“start powershell new-PSSession -Computername ${IPAddress} -Cred ${adminUser}\${VMUserName}”

# android - 将活动转换为视图

> ID：11322908
> 
> 赞同：2
> 
> 时间：2012-07-04T05:29:45.937
> 
> 标签：android, camera

在 mainactivity 我有侧边栏。在那个侧边栏中，需要放置secondactivity的内容。Secondactivity 扩展了 ListActivity，其中包含从数据库中获取的数据。

**主要活动：**

```
setContentView(R.layout.main);
RelativeLayout mainContainer = (RelativeLayout) findViewById(R.id.MainContainer);  
LayoutInflater layoutinflate = getSystemService(Context.LAYOUT_INFLATER_SERVICE);   
View view = layoutinflate.inflate(R.layout.cameralist, null);

RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams                         (RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.FILL_PARENT);
params.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
view.setLayoutParams(params);
mainContainer.addView(view); 
```

**主.xml：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/MainContainer"
android:layout_width="wrap_content"
android:layout_height="fill_parent">
</RelativeLayout> 
```

**相机列表.xml：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/Sidebar"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="#000000">

<TextView
      android:id="@+id/CameraHeading"
      android:layout_width="wrap_content"
      android:layout_height="fill_parent"
      android:text="  Camera List  "
      android:textAppearance="?android:attr/textAppearanceLarge"
      android:ellipsize="middle"/>

<com.fs.menuanimation.ViewCamera
      android:id="@+id/CamList"
      android:layout_width="wrap_content"
      android:layout_height="fill_parent"/> 
```

**第二活动：**

公共类 ViewCamera 扩展 ListActivity {

```
String DB = AddCamera.DB_NAME;
String TABLE_NAME = AddCamera.TABLE_NAME;
ArrayList<String> results = new ArrayList<String>();
//SQLiteDatabase sampleDB = null;
SQLiteDatabase sampleDB = AddCamera.SMMSLITEDB;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    sampleDB =  this.openOrCreateDatabase(DB, MODE_PRIVATE, null);

    Cursor c = sampleDB.rawQuery("SELECT CameraName FROM " + TABLE_NAME , null);

    if (c != null ) {
        if  (c.moveToFirst()) {
            do {
                String CameraName = c.getString(c.getColumnIndex("CameraName"));
                //int age = c.getInt(c.getColumnIndex("Age"));
                results.add(CameraName);
            }while (c.moveToNext());
        } 
    }       
    this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,results));
} 
```

}

谁能帮我。

# android - 在 android 2.2 中检索联系人

> ID：11322909
> 
> 赞同：0
> 
> 时间：2012-07-04T05:29:46.260
> 
> 标签：android, android-edittext, android-contacts

嗨，当我按下按钮时，我需要在edittext中获取联系方式。但是当我只有一个联系人并且如果它有多个联系人时，它会显示一个execption。这是我的代码&我不知道是什么我应该添加它吗？如果有人知道，请提供帮助。谢谢 Adv。

```
Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null); 

            while (cursor.moveToNext()) {
                String contactId = cursor.getString(cursor.getColumnIndex( 
                       ContactsContract.Contacts._ID)); 

                  Cursor phones = getContentResolver().query( ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = " + contactId , null, null); 
                  startManagingCursor(phones); 
                  while (phones.moveToNext()) { 
                      String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                  e2.setText(phoneNumber);
                  } 

               //}

            Cursor emails = getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null, ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = " + contactId, null, null); 
            startManagingCursor(emails); 
            while (emails.moveToNext()) { 
               // This would allow you get several email addresses 
               String emailAddress = emails.getString( 
               emails.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA)); 
               e3.setText(emailAddress);
            } 

            Cursor street = getContentResolver().query(ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_URI, 
                    null,
                    ContactsContract.CommonDataKinds.StructuredPostal.CONTACT_ID + " = " + contactId, null, null); 
            startManagingCursor(street); 
            while (street.moveToNext()) { 
                String streetname=street.getString(street.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.FORMATTED_ADDRESS));
                e1.setText(streetname);
            }
            phones.close(); 
            emails.close(); 
            street.close();
            cursor.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:34:19.687

Change your while condition in `while(!cursor.isAfterLast())`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:53:20.487

您可以访问[联系人信息](http://code.google.com/p/android-contacts-contract-example/)，其中会查询所有联系人和信息

# javascript - 为什么 LinkedIn inFollow 按钮脚本在本地运行时不生成按钮？

> ID：11322912
> 
> 赞同：0
> 
> 时间：2012-07-04T05:30:12.890
> 
> 标签：javascript, html, css, linkedin

我通过提供公司名称并单击“获取代码”按钮从[该链接](https://developer.linkedin.com/plugins/follow-company)复制代码。它生成了下面给出的代码

```
<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/FollowCompany" data-id="361557" data-counter="right"></script> 
```

我用这些 scipts 创建了一个 HTML 文件来创建一个**inFollow**按钮。但是当我在本地运行该 HTML 文件时，它会显示一个空白页面而不是一个**inFollow**按钮。但是当我在服务器中部署并运行同一个 HTML 文件时，输出与预期的一样，我的意思是它向我显示了**inFollow**按钮。

**所以我的问题是为什么LinkedIn开发**站点给出的脚本在本地运行时无法生成**inFollow**按钮。在本地运行时，我应该如何更改该脚本以获取按钮。

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:52:14.247

**首先，在 chrome 中运行项目打开检查元素并将链接的徽标图像保存到您的桌面。**

**现在，在 //platform.linkedin.com/in.js 文件中，给出您在桌面上保存的本地图像的路径，或者现在从桌面到项目的图像文件夹。**

**另一种选择可能是.... 如果您已在本地保存 in.js 文件，则检查其中的图像路径并保存到服务器上的图像路径。要再次获取服务器上的图像路径，请使用 chrome 的检查元素。或 Mozilla firefox 浏览器的开发人员工具栏。**

如果这不起作用，请告诉我！

# php - PDO 和定义的常量.. php 错误

> ID：11322914
> 
> 赞同：0
> 
> 时间：2012-07-04T05:30:51.057
> 
> 标签：php

我在connect.php 中为数据库设置了常量。

连接.php

```
define('DB_HOST','localhost');
define('DB_NAME','dbname');
define('DB_USER','dbuser');
define('DB_PASSWORD','dbpass'); 
```

这是数据库类

```
require("connect.php");
    class Database {

    private $connect;

    function opendb() {
    $this->connect = new PDO(DB_NAME, DB_USER, DB_PASSWORD);

    }

    function closedb() {
    $this->connect =  null; //close connection

    }

    } 
```

当我加载访问数据库类的页面时出现此错误。

```
Fatal error: Uncaught exception 'PDOException' with message 'invalid data source name' 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T05:36:43.793

您必须在此处提供连接字符串而不是常量 DB_NAME：

```
 $this->connect = new PDO(DB_NAME, DB_USER, DB_PASSWORD); 
```

像

```
 $dsn = 'mysql:host=localhost;dbname='.DB_NAME;
 $this->connect = new PDO(DB_NAME, DB_USER, DB_PASSWORD); 
```

**编辑**

您还应该使用 HOST 常量作为其定义。

```
 $dsn = 'mysql:host='.DB_HOST.';dbname='.DB_NAME; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T05:41:19.893

你需要使用这个 -

```
$this->connect = new PDO('mysql:host=' . DB_HOST . ';dbname=' . DB_NAME, DB_USER, DB_PASSWORD); 
```

# javascript - 当属性名称在变量中时如何检索对象属性？

> ID：11322915
> 
> 赞同：-5
> 
> 时间：2012-07-04T05:30:54.727
> 
> 标签：javascript, json

我想将字符串从`koderesult`转换为对象，然后`obj.result`应该是这样的 >> `obj.GetReportIdResult`。在函数上`detail()`，`koderesult`是字符串，那么我想用这个`koderesult`字符串作为`obj`对象。如何将`koderesult`字符串转换为对象名称？
好吧，我必须`obj.GetReportIdResult`得到 JSON 对象，然后我想要`GetReportIdResult`的是动态的（例如它可以更改为`GetReportMyResult`or `GetReportHkResult`）这是我的函数：

```
function detail(kodenegara, koderesult)
        {
            $.ajax({
                type: "GET",
                contentType: "application/json; charset=utf-8",
                url: "http://10.80.3.73/webservice/Service1.svc/json/weeklyflash/"+kodenegara,
                dataType: "json",
                success:function(data){
                    var json = JSON.stringify(data);
                    var obj = JSON.parse(json);
                    //alert (koderesult);
                    result = eval(koderesult);
                    alert( countTypesForBulan(obj.result, "4") ); //this obj.result should be like this >> obj.GetReportIdResult
                },
                error: function () { 
                    alert("ERROR"); 
                }
            });
        } 
```

这是调用此函数的按钮：

```
<button type="button" onclick="detail('id', 'GetReportIdResult')">Display JSON String</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:34:32.813

你的问题不是很清楚。但我认为你需要的是这样的：

```
 alert( countTypesForBulan(obj[koderesult], "4") ); 
```

`obj.GetReportIdResult`与 相同`obj['GetReportIdResult']`。

# lisp - Lisp 语法对 AST 建模的目的

> ID：11322922
> 
> 赞同：5
> 
> 时间：2012-07-04T05:31:55.213
> 
> 标签：lisp

据我所知，Lisp 语法代表 AST，但采用高级格式，以便人类轻松阅读和修改，同时也使机器易于处理源代码。

出于这个原因，在 Lisp 中，据说代码就是数据，数据就是代码，因为代码（s-epxression）本质上就是 AST。我们可以将更多的 AST（这是我们的数据，只是 lisp 代码）插入到其他 AST（lisp 代码）中，或者独立地扩展其功能并在运行时（运行时）对其进行操作，而无需重新编译整个操作系统以集成新的代码。在其他语言中，我们必须重新编译以将人类语言源代码转换为有效的 AST，然后才能将其编译为代码。

*这是否是 Lisp 语法首先被设计成它的原因（代表一个 AST，但它是人类可读的，以满足人类和机器的需求）？为了实现人机之间更强大（即时 - 运行时）以及更简单（无需重新编译，更快）的通信？*

我听说 Lisp 机器只有一个地址空间来保存所有数据。在Linux这样的操作系统中，程序员只有虚拟地址空间，假装它是真实的物理地址空间，可以为所欲为。Linux 中的数据和代码是分开的区域，因为实际上，数据就是数据，数据就是代码。在用 C（或类似 C 的语言）编写的普通操作系统中，如果我们只为整个系统操作一个地址空间并且将数据与代码混合会非常混乱，这将是非常混乱的。

*在 Lisp Machine 中，由于代码是数据，数据是代码，这是否是只有一个地址空间（没有虚拟层）的原因？既然我们有 GC 并且没有指针，那么在不破坏物理内存的情况下操作物理内存是否安全（因为只有 1 个单独的空间要简单得多）？*

**编辑：**我问这个是因为据说Lisp[的优点之一是单一地址空间：](http://linuxfinances.info/info/lisposes.html)

> 安全的语言意味着一个可靠的环境，无需将任务分离到它们自己单独的内存空间中。
> 
> Unix 的“明确分离的进程”模型特征在处理可能不可靠到不安全的软件时具有强大的优点，例如用 C 或 C++ 编写的代码，其中无效的指针访问可以“取消系统。” 从这个意义上说，MS-DOS 及其继承者非常不可靠，几乎任何程序错误都可能导致整个系统崩溃；《蓝屏死机》之类的。
> 
> 如果整个系统都是用 Lisp 构建和编码的，那么这个系统就和 Lisp 环境一样可靠。通常这是非常安全的，因为一旦您到达符合标准的层，它们就非常可靠，并且不提供允许系统自毁的直接指针访问。

[健全个人计算第三定律](http://www.loper-os.org/?p=231)

> 易失性存储设备（即 RAM）应专门用作非易失性存储设备的读/写缓存。从除操作系统之外的所有软件的角度来看，机器必须呈现一个可以被认为是非易失性的单一地址空间。没有任何计算机系统遵守这一定律，它需要比电灯更长的时间才能从电源中断中完全恢复其状态。

如前所述，单个地址空间将所有正在运行的进程保存在同一内存空间中。我只是好奇为什么人们坚持认为单一地址空间更好。我将它与类似 AST 的 Lisp 语法联系起来，试图解释它如何适合单空间模型。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T07:08:15.473

您的问题并不能非常准确地反映现实，尤其是在 Linux 和其他操作系统中关于代码/数据分离的部分。实际上，这种分离不是在操作系统级别执行的，而是由编译器/程序加载器执行的。在操作系统级别，只有内存页面可以设置不同的保护位（如可执行、只读等），在此级别之上，存在不同的可执行格式（如 Linux 中的 ELF），它们指定了对程序内存不同部分的限制。

回到 Lisp，据我所知，从历史上看，Lisp 的创建者使用 S 表达式格式，因为他们想专注于语言的语义，将语法搁置一段时间。有一个计划最终为 Lisp 创建一些语法（参见 M 表达式），并且有一些基于 Lisp 的语言有更多的语法，比如 Dylan。但是，总的来说，Lisp 社区已经达成共识，即 S 表达式的好处超过了它们的缺点，所以他们坚持了下来。

将代码视为数据，这并不严格绑定到 S 表达式，因为其他代码也可以视为数据。这整个方法称为元编程，并且在不同级别和多种语言的不同机制上得到支持。每种支持`eval`（Perl、JavaScript、Python）的语言都允许将代码视为数据，只是表示几乎总是一个字符串，而在 Lisp 中它是一棵树，这更方便并且促进了高级的东西，比如宏。

# java - 如何使用多个分隔符拆分具有不同值的字符串？

> ID：11322925
> 
> 赞同：2
> 
> 时间：2012-07-04T05:32:25.403
> 
> 标签：java, regex

有人可以给我以下正则表达式的建议吗？

例子：`city^chennai|country^India~TamilNadu|pincode^600034`

预期的分隔字符串是：

```
city
chennai
country
India,TamilNadu
pincode
600034 
```

注：`~`应转换为`,`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T05:45:54.137

用逗号替换后，只需拆分非单词字符（不包括逗号）`~`：

```
input.replaceAll("~",",").split("[^\\w,]"); 
```

然后（根据需要地图的评论）成对迭代结果数组，添加地图条目。

下面是一些测试代码：

```
public static void main( String[] args ) {
    String input = "city^chennai|country^India~TamilNadu|pincode^600034";
    String[] things = input.replaceAll( "~", "," ).split( "[^\\w,]" );
    Map<String, String> map = new HashMap<String, String>( );
    for (int i = 0; i < things.length; i+=2) {
        map.put(things[i], things[i+1]);
    }
    System.out.println( map );
} 
```

输出：

```
{pincode=600034, country=India,TamilNadu, city=chennai} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:34:37.900

```
((w+)[|^~])*(w+) 
```

编辑：现在我注意到它类似于地图，所以也许：

```
((w+)^(w+)|)*(w+)^(w+) 
```

用自定义类替换 w+`[...]`以使 ~ 也可以工作。

```
Pattern p = Pattern.compile("((w+)^(w+)|)*(w+)^(w+)");
 Matcher m = p.matcher("city^chennai|country^India~TamilNadu|pincode^600034");
 if( m.matches() ){
     for( int i = 1; i < m.groupCount(); i+=2 ) {
         // m.group(i) and m.group(i+1) gives you the values.
     }
 } 
```

如果您想要更简单的方法，请使用`Pattern#split("")`

[http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#split%28java.lang.CharSequence%29](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#split%28java.lang.CharSequence%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:42:08.510

你可以使用这个：

```
.replaceAll("~", ",").split("[|^]") 
```

假设字符串被正确拆分，您可以通过将索引 2k 处的字符串映射到索引 (2k + 1) 将它们分组为名称-值对

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T05:43:37.380

您可以`StringTokenizer`在此处使用类来拆分具有不同分隔符的字符串。使用`hasNextToken("delimiterHereAsString")`method 指定要拆分的不同分隔符。

此链接可能会对您有所帮助。 [http://www.java-examples.com/java-stringtokenizer---specify-delimiter-example](http://www.java-examples.com/java-stringtokenizer---specify-delimiter-example)

# asp.net - 替代 iisreset

> ID：11322931
> 
> 赞同：1
> 
> 时间：2012-07-04T05:32:51.953
> 
> 标签：asp.net, iis, web-config

我在生产服务器上有多个站点，有时一个站点在繁重的实用程序结束时关闭，这需要 iisreset，但 iisreset 会导致所有站点在重置 iis 时关闭。我只想重置一个站点，而不是所有应用程序池。我如何重置我的特定应用程序池站点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T05:37:08.797

您可以使用[PowerShell](https://stackoverflow.com/questions/2710166/how-can-i-stop-and-start-individual-websites-in-iis-using-powershell)：

```
Import-Module WebAdministration
Stop-WebSite 'Your Web Site'
Start-WebSite 'Your Web Site' 
```

这是 Web 管理 cmdlet 的[参考文档](http://technet.microsoft.com/en-us/library/ee790599.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T05:38:38.723

您可以对 web.config 文件进行更改 - 非破坏性更改，例如属性保存和还原之间的额外空间。这只会导致该站点进行回收。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T05:48:35.290

您的每个网站都必须有独立的 AppPool。并在您需要时随时回收它们。一般来说，将所有网站放在同一个 AppPool 下并不是一个好习惯，除非你有一些特定的目标要实现。

# objective-c - 突出显示 NSSearchField

> ID：11322932
> 
> 赞同：0
> 
> 时间：2012-07-04T05:33:00.867
> 
> 标签：objective-c, nssearchfield

我有一个 NSWindow，它包含一个仅在某些特定场合出现的 NSView，这个 NSView 包含一个我想要的 NSSearchField，如果剪贴板上有数据，它将出现在 searchField 中，否则它将为空。我能够做到我想要的是SearchField 中有数据，它应该是焦点我这样尝试过：

在 NSViewController 类中有一个返回 NSSearchField 的函数，它是一个类变量

```
 -(NSSearchField*)getSearchField
                  {
                  return searchField;
                  } 
```

在 NSWindowController 类中，我将其作为第一响应者，其中 pSearchContact 是 NSViewController 类的实例变量

```
 [[self window] makefirstResponder:[pSearchContact getSearchField]]; 
```

它运行顺利，但我不知道为什么 searchField 没有得到焦点

只有当它是 NSWindow 的一部分时，他们的类似 searchField 才会成为第一响应者，因为在我的情况下，searchField 位于 NSView 中，而 NSView 位于 NSWindow 中。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:47:47.650

您的问题有点令人困惑，但我认为您的要求归结为“为什么我不能让我的搜索字段成为焦点？”。

那一行代码：

```
[[self window] makefirstResponder:[pSearchContact getSearchField]]; 
```

为了我的舒适，它做了太多的事情（即我不会在一行代码中嵌入这么多的功能——其中任何部分都可能出错或失控）。

做这样的事情怎么样：

```
NSWindow * myWindow = [self window];
if(myWindow)
{
    if(pSearchContact)
    {
        NSResponder * ourSearchField = [pSearchContact getSearchField];
        if(ourSearchField)
        {
            [myWindow makeFirstResponder: ourSearchField];
        } else {
            NSLog( @"ourSearchfield is nil; why?" );
        }
    } else {
        NSLog( @"pSearchContact is nil; why?" );
    }
} else {
    NSLog( @"myWindow is nil; why?" );
} 
```

这也可能让您缩小焦点设置不适合您的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T17:55:15.713

响应较晚，但我遇到了类似的问题，通过取消选中`refusesFirstResponder`Xcode/Interface Builder 来解决。

# java - jersey-spring 和 jenkins - 读取 zip 文件 /jersey-core-1.8.jar 时出现奇怪错误

> ID：11322938
> 
> 赞同：3
> 
> 时间：2012-07-04T05:33:35.153
> 
> 标签：java, spring, maven, jenkins, jersey

我们有一个想要在 jenkins 中构建的 REST 服务器。本地一切都很好，但是当我告诉詹金斯构建项目时，它给了我

```
[INFO] Copying 1 resource
[WARNING] POM for 'com.sun.jersey:jersey-core:pom:1.8:compile' is invalid. Its dependencies (if any) will NOT be available to the current build. 
[INFO] [compiler:compile {execution: default-compile}] 
[INFO] Compiling 2 source files to /usr/share/tomcat6/.jenkins/workspace/xx-engine-integration-server SNAPSHOT/target/classes
[JENKINS] Archiving /usr/share/tomcat6/.jenkins/workspace/xx-engine-integration-server SNAPSHOT/pom.xml to /usr/share/tomcat6/.jenkins/jobs/xx-engine-integration-server SNAPSHOT/modules/our.package.apps$xx-engine-integration-server/builds/2012-07-04_05-23-22/archive/our.package.apps/xx-engine-integration-server/1.0-SNAPSHOT/xx-engine-integration-server-1.0-SNAPSHOT.pom

[INFO] ------------------------------------------------------------------------ 
[ERROR] BUILD FAILURE 
[INFO] ------------------------------------------------------------------------ 

[INFO] Compilation failure error: error reading /usr/share/tomcat6/.m2/repository/com/sun/jersey/jersey-core/1.8/jersey-core-1.8.jar; error in opening zip file 
```

有人见过这个吗？为什么 jersey-core pom 无效？为什么 jenkins 需要 tomcat 来构建我的项目？

我的绒球

```
<!-- ... -->

<packaging>war</packaging>

<!-- Build -->
<build>
    <!-- Filtering -->
    <resources>
        <resource>
            <filtering>true</filtering>
            <directory>src/main/resources</directory>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build>

<repositories>
    <repository>
        <id>projects-maven</id>
        <name>My Maven Repository</name>
        <url>http://path.to.our/repository</url>
    </repository>
</repositories>

<dependencies>
            <!-- Include Spring 3.1 dependencies and more.. -->
    <dependency>
        <groupId>our.path</groupId>
        <artifactId>core-modules</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey.contribs</groupId>
        <artifactId>jersey-spring</artifactId>
        <version>1.8</version>
        <exclusions>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-core</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-web</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-beans</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
</dependencies> 
```

依赖树：

```
[INFO]
[INFO] --- maven-dependency-plugin:2.4:tree (default-cli) @ xx-manager ---
[INFO] our.package.apps:xx-manager:war:1.0-SNAPSHOT
[INFO] +- our.package.base:xx-connect:jar:1.0-SNAPSHOT:compile
[INFO] |  +- our.package.base:xx-core:jar:1.1-SNAPSHOT:compile
[INFO] |  |  +- org.springframework:spring-aspects:jar:3.1.0.RELEASE:compile
[INFO] |  |  +- org.springframework:spring-orm:jar:3.1.0.RELEASE:compile
[INFO] |  |  +- org.aspectj:aspectjrt:jar:1.6.12:compile
[INFO] |  |  +- org.aspectj:aspectjweaver:jar:1.6.12:compile
[INFO] |  |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  |  +- commons-lang:commons-lang:jar:2.3:compile
[INFO] |  |  +- log4j:log4j:jar:1.2.16:compile
[INFO] |  |  +- org.slf4j:slf4j-api:jar:1.6.1:compile
[INFO] |  |  +- org.slf4j:jcl-over-slf4j:jar:1.6.1:runtime
[INFO] |  |  +- org.slf4j:slf4j-log4j12:jar:1.6.1:runtime
[INFO] |  |  +- junit:junit:jar:4.10:compile
[INFO] |  |  |  \- org.hamcrest:hamcrest-core:jar:1.1:compile
[INFO] |  |  +- org.powermock:powermock-module-junit4:jar:1.4.11:compile
[INFO] |  |  |  \- org.powermock:powermock-module-junit4-common:jar:1.4.11:compile
[INFO] |  |  |     +- org.powermock:powermock-core:jar:1.4.11:compile
[INFO] |  |  |     \- org.powermock:powermock-reflect:jar:1.4.11:compile
[INFO] |  |  |        \- org.objenesis:objenesis:jar:1.2:compile
[INFO] |  |  +- org.powermock:powermock-api-mockito:jar:1.4.11:compile
[INFO] |  |  |  \- org.powermock:powermock-api-support:jar:1.4.11:compile
[INFO] |  |  +- org.mockito:mockito-all:jar:1.8.4:compile
[INFO] |  |  +- com.google.guava:guava:jar:10.0.1:compile
[INFO] |  |  |  \- com.google.code.findbugs:jsr305:jar:1.3.9:compile
[INFO] |  |  +- com.natpryce:make-it-easy:jar:3.1.0:compile
[INFO] |  |  |  +- org.hamcrest:hamcrest-library:jar:1.2.1:compile
[INFO] |  |  |  \- junit:junit-dep:jar:4.8.1:compile
[INFO] |  |  +- javax.inject:javax.inject:jar:1:compile
[INFO] |  |  +- cglib:cglib:jar:2.2:compile
[INFO] |  |  +- joda-time:joda-time:jar:1.6.2:compile
[INFO] |  |  +- org.apache.cxf:cxf-rt-frontend-jaxws:jar:2.6.0:compile
[INFO] |  |  |  +- xml-resolver:xml-resolver:jar:1.2:compile
[INFO] |  |  |  +- org.apache.cxf:cxf-api:jar:2.6.0:compile
[INFO] |  |  |  |  +- org.codehaus.woodstox:woodstox-core-asl:jar:4.1.2:runtime
[INFO] |  |  |  |  |  \- org.codehaus.woodstox:stax2-api:jar:3.1.1:runtime
[INFO] |  |  |  |  +- org.apache.ws.xmlschema:xmlschema-core:jar:2.0.2:compile
[INFO] |  |  |  |  +- org.apache.geronimo.specs:geronimo-javamail_1.4_spec:jar:1.7.1:compile
[INFO] |  |  |  |  \- wsdl4j:wsdl4j:jar:1.6.2:compile
[INFO] |  |  |  +- org.apache.cxf:cxf-rt-core:jar:2.6.0:compile
[INFO] |  |  |  +- org.apache.cxf:cxf-rt-bindings-soap:jar:2.6.0:compile
[INFO] |  |  |  |  \- org.apache.cxf:cxf-rt-databinding-jaxb:jar:2.6.0:compile
[INFO] |  |  |  +- org.apache.cxf:cxf-rt-bindings-xml:jar:2.6.0:compile
[INFO] |  |  |  +- org.apache.cxf:cxf-rt-frontend-simple:jar:2.6.0:compile
[INFO] |  |  |  \- org.apache.cxf:cxf-rt-ws-addr:jar:2.6.0:compile
[INFO] |  |  |     \- org.apache.cxf:cxf-rt-ws-policy:jar:2.6.0:compile
[INFO] |  |  |        \- org.apache.neethi:neethi:jar:3.0.2:compile
[INFO] |  |  +- org.apache.cxf:cxf-rt-transports-http:jar:2.6.0:compile
[INFO] |  |  \- org.apache.cxf:cxf-rt-transports-local:jar:2.6.0:compile
[INFO] |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.5:compile
[INFO] |  |  \- org.codehaus.jackson:jackson-core-asl:jar:1.9.5:compile
[INFO] |  +- com.sun.jersey:jersey-server:jar:1.12:compile
[INFO] |  |  +- asm:asm:jar:3.1:compile
[INFO] |  |  \- com.sun.jersey:jersey-core:jar:1.12:compile
[INFO] |  +- com.sun.jersey:jersey-client:jar:1.12:compile
[INFO] |  +- com.sun.jersey:jersey-json:jar:1.12:compile
[INFO] |  |  +- org.codehaus.jettison:jettison:jar:1.1:compile
[INFO] |  |  |  \- stax:stax-api:jar:1.0.1:compile
[INFO] |  |  +- com.sun.xml.bind:jaxb-impl:jar:2.2.3-1:compile
[INFO] |  |  |  \- javax.xml.bind:jaxb-api:jar:2.2.2:compile
[INFO] |  |  |     +- javax.xml.stream:stax-api:jar:1.0-2:compile
[INFO] |  |  |     \- javax.activation:activation:jar:1.1:compile
[INFO] |  |  +- org.codehaus.jackson:jackson-jaxrs:jar:1.9.2:compile
[INFO] |  |  \- org.codehaus.jackson:jackson-xc:jar:1.9.2:compile
[INFO] |  \- com.sun.jersey.contribs:jersey-multipart:jar:1.6:compile
[INFO] |     \- org.jvnet:mimepull:jar:1.4:compile
[INFO] +- our.package.base:xx-security:jar:1.1-SNAPSHOT:compile
[INFO] |  +- our.package.base:xx-data-jpa:jar:1.1-SNAPSHOT:compile
[INFO] |  |  +- org.springframework.data:spring-data-jpa:jar:1.0.3.RELEASE:compile
[INFO] |  |  +- org.springframework.data:spring-data-commons-core:jar:1.1.0.RELEASE:compile
[INFO] |  |  +- org.hibernate:hibernate-core:jar:4.1.3.Final:compile
[INFO] |  |  |  +- antlr:antlr:jar:2.7.7:compile
[INFO] |  |  |  +- org.jboss.logging:jboss-logging:jar:3.1.0.GA:compile
[INFO] |  |  |  +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec:jar:1.0.0.Final:compile
[INFO] |  |  |  +- dom4j:dom4j:jar:1.6.1:compile
[INFO] |  |  |  +- org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.1.Final:compile
[INFO] |  |  |  +- org.javassist:javassist:jar:3.15.0-GA:compile
[INFO] |  |  |  \- org.hibernate.common:hibernate-commons-annotations:jar:4.0.1.Final:compile
[INFO] |  |  +- org.hibernate:hibernate-entitymanager:jar:4.1.3.Final:compile
[INFO] |  |  +- javax.validation:validation-api:jar:1.0.0.GA:compile
[INFO] |  |  +- org.hibernate:hibernate-validator:jar:4.3.0.Final:compile
[INFO] |  |  +- com.mysema.querydsl:querydsl-apt:jar:2.6.0:compile
[INFO] |  |  |  \- com.mysema.querydsl:querydsl-codegen:jar:2.6.0:compile
[INFO] |  |  |     \- com.mysema.codegen:codegen:jar:0.4.11:compile
[INFO] |  |  +- com.mysema.querydsl:querydsl-jpa:jar:2.6.0:compile
[INFO] |  |  |  \- com.mysema.querydsl:querydsl-core:jar:2.6.0:compile
[INFO] |  |  |     \- com.mysema.commons:mysema-commons-lang:jar:0.2.2:compile
[INFO] |  |  \- mysql:mysql-connector-java:jar:5.1.11:compile
[INFO] |  +- our.package.base:xx-utils:jar:1.1-SNAPSHOT:compile
[INFO] |  |  \- net.sf.opencsv:opencsv:jar:2.3:compile
[INFO] |  +- org.springframework.security:spring-security-core:jar:3.1.0.RELEASE:compile
[INFO] |  +- org.springframework.security:spring-security-config:jar:3.1.0.RELEASE:compile
[INFO] |  +- org.springframework.security:spring-security-web:jar:3.1.0.RELEASE:compile
[INFO] |  +- org.springframework.security:spring-security-acl:jar:3.1.0.RELEASE:compile
[INFO] |  +- org.springframework.security:spring-security-crypto:jar:3.1.0.RELEASE:compile
[INFO] |  \- net.sf.ehcache:ehcache-core:jar:2.4.6:compile
[INFO] +- our.package.base:xx-view-mvc:jar:1.0-SNAPSHOT:compile
[INFO] |  +- org.springframework:spring-webmvc:jar:3.1.0.RELEASE:compile
[INFO] |  |  \- org.springframework:spring-context-support:jar:3.1.0.RELEASE:compile
[INFO] |  +- org.springframework:spring-test:jar:3.1.0.RELEASE:compile
[INFO] |  +- cglib:cglib-nodep:jar:2.2:compile
[INFO] |  +- javax.servlet:jstl:jar:1.2:compile
[INFO] |  \- org.freemarker:freemarker:jar:2.3.19:compile
[INFO] +- our.package.company:xx-engine-integration-server:war:1.0-SNAPSHOT:test
[INFO] +- javax.servlet:servlet-api:jar:2.5:provided
[INFO] +- javax.servlet.jsp:jsp-api:jar:2.1:provided
[INFO] +- org.springframework:spring-test-mvc:jar:1.0.0.BUILD-SNAPSHOT:test
[INFO] +- xmlunit:xmlunit:jar:1.3:test
[INFO] +- org.springframework:spring-aop:jar:3.1.0.RELEASE:compile
[INFO] |  \- aopalliance:aopalliance:jar:1.0:compile
[INFO] +- org.springframework:spring-asm:jar:3.1.0.RELEASE:compile
[INFO] +- org.springframework:spring-context:jar:3.1.0.RELEASE:compile
[INFO] +- org.springframework:spring-beans:jar:3.1.0.RELEASE:compile
[INFO] +- org.springframework:spring-core:jar:3.1.0.RELEASE:compile
[INFO] |  \- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] +- org.springframework:spring-tx:jar:3.1.0.RELEASE:compile
[INFO] +- org.springframework:spring-web:jar:3.1.0.RELEASE:compile
[INFO] +- org.springframework:spring-jdbc:jar:3.1.0.RELEASE:compile
[INFO] \- org.springframework:spring-expression:jar:3.1.0.RELEASE:compile 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T07:23:01.053

所以这是通常的：依赖冲突..如图`mvn dependency:tree -Dincludes=com.sun.jersey`所示。叹..

解决方案是升级到 jersey-spring 1.12。

这就是您从教程中复制依赖项而无需担心版本然后将它们与您自己的项目混合的结果。

# iphone - UITableViewCell 动态扩展 UIWebview 高度

> ID：11322944
> 
> 赞同：1
> 
> 时间：2012-07-04T05:34:24.930
> 
> 标签：iphone, ios, uitableview

我有一个包含 UITableViewCells 列表的 UITableView。我设置了 UITableViewCells 的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:40:41.413

你的 UITableViewDelegate 应该实现 tableView:heightForRowAtIndexPath:

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath     *)indexPath
{
return [indexPath row] * 20;// or whatever you need to set height
} 
```

或者

**如果所有单元格都相同，请将 UITableView 上的 rowHeight 属性设置为单元格的大小。如果它们根据内容都不同，您将必须实现 -tableView:heightForRowAtIndexPath: 并根据您的数据源计算每行的高度。**

# android - 使用 FFMpeg for android 解码视频

> ID：11322952
> 
> 赞同：16
> 
> 时间：2012-07-04T05:35:09.920
> 
> 标签：android, video, android-ndk, ffmpeg, decode

我尝试使用互联网上提供的示例示例中的 FFMpeg 库解码视频，我用新版本的 ffmpeg 解决了这个问题，这是我从我的类文件中调用的代码，

```
 private static native int decodeVideo(String filename);
   decodeVideo(getString(R.string._sdcard_abc_3gp)); 
```

现在在位于 JNI 目录中的 .c 文件中，我编写了这段代码，

```
 jint Java_ru_dzakhov_ffmpeg_test_MainActivity_decodeVideo(JNIEnv* env, jobject
javaThis,jstring filename) {   
  AVFormatContext *pFormatCtx;
  int             i, videoStream;
  AVCodecContext  *pCodecCtx;
  AVCodec         *pCodec;
  AVFrame         *pFrame;
  AVFrame         *pFrameRGB;
  AVPacket        packet;
  int             frameFinished;
  int             numBytes;
  uint8_t         *buffer;

  // Register all formats and codecs
  av_register_all();

  // Open video file

      const jbyte *str;
      str = (*env)->GetStringUTFChars(env, filename, NULL);

      if(av_open_input_file(&pFormatCtx, str, NULL, 0, NULL)!=0)
      {
          LOGI("Can't open file '%s'\n", str);
          return 1;
      }
      else
      {
          LOGI("File is opened\n");
          LOGI("File '%s', Codec %s",pFormatCtx->filename,pFormatCtx->iformat->name);
      }

  // Dump information about file onto standard error

  LOGI("dump_format");
  dump_format(pFormatCtx, 0, filename, 0);
  LOGI("dump_format DONE");
  // Find the first video stream
  videoStream=-1;
  for(i=0; i<pFormatCtx->nb_streams; i++)
    if(pFormatCtx->streams[i]->codec->codec_type==CODEC_TYPE_VIDEO)
      //if(pFormatCtx->streams[i]->codec->codec_type==AVMEDIA_TYPE_VIDEO)
      {
          LOGI("videoStream:: %d",videoStream);
      videoStream=i;
      break;
    }
  if(videoStream==-1)
    return -1; // Didn't find a video stream

  // Get a pointer to the codec context for the video stream
  pCodecCtx=pFormatCtx->streams[videoStream]->codec;

  // Find the decoder for the video stream
  pCodec=avcodec_find_decoder(pCodecCtx->codec_id);
  if(pCodec==NULL) {
    fprintf(stderr, "Unsupported codec!\n");
    LOGI("Unsupported codec!\n");
    return -1; // Codec not found
  }
  // Open codec
  if(avcodec_open(pCodecCtx, pCodec)<0){
      LOGI("Codec Opened!\n");
    return -1; // Could not open codec
  }
  // Allocate video frame
  pFrame=avcodec_alloc_frame();

  // Allocate an AVFrame structure
  pFrameRGB=avcodec_alloc_frame();
  if(pFrameRGB==NULL){

      LOGI("checking --->>> pFrameRGB==NULL\n");
    return -1;
  }
  // Determine required buffer size and allocate buffer

  LOGI("Determine required buffer size and allocate buffer\n");
  numBytes=avpicture_get_size(PIX_FMT_RGB24, pCodecCtx->width,
                              pCodecCtx->height);

  LOGI("numBytes %d",numBytes);

  buffer=(uint8_t *)av_malloc(numBytes*sizeof(uint8_t));

  // Assign appropriate parts of buffer to image planes in pFrameRGB
  // Note that pFrameRGB is an AVFrame, but AVFrame is a superset
  // of AVPicture
  avpicture_fill((AVPicture *)pFrameRGB, buffer, PIX_FMT_RGB24,
                 pCodecCtx->width, pCodecCtx->height);

  // Read frames and save first five frames to disk
  i=0;
  while(av_read_frame(pFormatCtx, &packet)>=0) {
    // Is this a packet from the video stream?
    if(packet.stream_index==videoStream) {
      // Decode video frame
        avcodec_decode_video2(pCodecCtx, pFrame, &frameFinished,&packet);
                           //packet.data, packet.size);

      // Did we get a video frame?
      if(frameFinished) {
        // Convert the image from its native format to RGB
        /*Temporarily down
         *
         * img_convert((AVPicture *)pFrameRGB, PIX_FMT_RGB24,
                    (AVPicture*)pFrame, pCodecCtx->pix_fmt, pCodecCtx->width,pCodecCtx->height);*/

        // Save the frame to phone memory
          LOGI("Saving Frame\n");
         SaveFrame(pFrameRGB, pCodecCtx->width, pCodecCtx->height, ++i);
         LOGI("After Saving Frame\n");
      }
    }

    // Free the packet that was allocated by av_read_frame
    av_free_packet(&packet);
  }

  // Free the RGB image
  av_free(buffer);
  av_free(pFrameRGB);

  // Free the YUV frame
  av_free(pFrame);

  // Close the codec
  avcodec_close(pCodecCtx);

  // Close the video file
  av_close_input_file(pFormatCtx);

  return 0;
} 
```

编译代码后，我在日志中得到了这个，

```
07-04 10:58:38.961: D/dalvikvm(1010): Trying to load lib /data/data/ru.dzakhov.ffmpeg.test/lib/libmylib.so 0x4051e878
07-04 10:58:38.971: D/dalvikvm(1010): Added shared lib /data/data/ru.dzakhov.ffmpeg.test/lib/libmylib.so 0x4051e878
07-04 10:58:38.971: D/dalvikvm(1010): No JNI_OnLoad found in /data/data/ru.dzakhov.ffmpeg.test/lib/libmylib.so 0x4051e878, skipping init
07-04 10:58:39.011: I/System.out(1010): Creating Engine
07-04 10:58:39.011: I/mylib(1010): initiated
07-04 10:58:39.011: I/System.out(1010): Decoding Video
07-04 10:58:39.011: I/System.out(1010): passing video::/sdcard/NativeMedia.ts
07-04 10:58:39.101: W/dalvikvm(231): disableGcForExternalAlloc: false
07-04 10:58:39.121: I/DEBUG(71): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
07-04 10:58:39.121: I/DEBUG(71): Build fingerprint: 'htc_asia_india/htc_icong/icong:2.3.3/GRI40/68450.5:user/release-keys'
07-04 10:58:39.121: I/DEBUG(71): pid: 1010, tid: 1010  >>> ru.dzakhov.ffmpeg.test <<<
07-04 10:58:39.121: I/DEBUG(71): signal 4 (SIGILL), code 1 (ILL_ILLOPC), fault addr 8102de90
07-04 10:58:39.121: I/DEBUG(71):  r0 0000ac28  r1 40521b98  r2 40526340  r3 42157cc8
07-04 10:58:39.121: I/DEBUG(71):  r4 bee7d368  r5 00000004  r6 40521b98  r7 42157c88
07-04 10:58:39.121: I/DEBUG(71):  r8 bee7d348  r9 42157c80  10 42157c6c  fp 42f0f04c
07-04 10:58:39.121: I/DEBUG(71):  ip 8102de91  sp bee7d348  lr 80018378  pc 8102de90  cpsr a0000030
07-04 10:58:39.121: I/DEBUG(71):  d0  4140000041600000  d1  3ff0000041680000
07-04 10:58:39.121: I/DEBUG(71):  d2  bf80000000000000  d3  0000000000000000
07-04 10:58:39.121: I/DEBUG(71):  d4  0000000000000000  d5  3ff000003f800000
07-04 10:58:39.121: I/DEBUG(71):  d6  bff000003f800000  d7  4160000000000000
07-04 10:58:39.121: I/DEBUG(71):  d8  0000000000000000  d9  0000000000000000
07-04 10:58:39.121: I/DEBUG(71):  d10 0000000000000000  d11 0000000000000000
07-04 10:58:39.121: I/DEBUG(71):  d12 0000000000000000  d13 0000000000000000
07-04 10:58:39.121: I/DEBUG(71):  d14 0000000000000000  d15 0000000000000000
07-04 10:58:39.121: I/DEBUG(71):  scr 20000012
07-04 10:58:39.221: I/DEBUG(71):          #00  pc 0002de90  /data/data/ru.dzakhov.ffmpeg.test/lib/libmylib.so
07-04 10:58:39.221: I/DEBUG(71):          #01  pc 0004f13c  /system/lib/libdvm.so
07-04 10:58:39.221: I/DEBUG(71):          #02  pc 0001d584  /system/lib/libdvm.so
07-04 10:58:39.221: I/DEBUG(71):          #03  pc 00022b8c  /system/lib/libdvm.so
07-04 10:58:39.221: I/DEBUG(71):          #04  pc 00021a80  /system/lib/libdvm.so
07-04 10:58:39.221: I/DEBUG(71):          #05  pc 0006060a  /system/lib/libdvm.so
07-04 10:58:39.221: I/DEBUG(71):          #06  pc 0006828e  /system/lib/libdvm.so
07-04 10:58:39.221: I/DEBUG(71):          #07  pc 0001d584  /system/lib/libdvm.so
07-04 10:58:39.221: I/DEBUG(71):          #08  pc 00022b8c  /system/lib/libdvm.so
07-04 10:58:39.231: I/DEBUG(71):          #09  pc 00021a80  /system/lib/libdvm.so
07-04 10:58:39.231: I/DEBUG(71):          #10  pc 0006045c  /system/lib/libdvm.so
07-04 10:58:39.231: I/DEBUG(71):          #11  pc 0004c430  /system/lib/libdvm.so
07-04 10:58:39.231: I/DEBUG(71):          #12  pc 00037638  /system/lib/libandroid_runtime.so
07-04 10:58:39.231: I/DEBUG(71):          #13  pc 00038456  /system/lib/libandroid_runtime.so
07-04 10:58:39.231: I/DEBUG(71):          #14  pc 00008ca2  /system/bin/app_process
07-04 10:58:39.231: I/DEBUG(71):          #15  pc 00014f24  /system/lib/libc.so
07-04 10:58:39.231: I/DEBUG(71): code around pc:
07-04 10:58:39.231: I/DEBUG(71): 8102de70 003d9cd0 00000408 0029e598 0029e5de 
07-04 10:58:39.231: I/DEBUG(71): 8102de80 0029e5d8 0029e5d8 0029e5cc 0029e5c8 
07-04 10:58:39.231: I/DEBUG(71): 8102de90 4ff0e92d b0994604 f0004615 6823f945 
07-04 10:58:39.231: I/DEBUG(71): 8102dea0 46294620 32a4f8d3 47982200 46044f81 
07-04 10:58:39.231: I/DEBUG(71): 8102deb0 a8172300 22004621 9300447f f9c0f060 
07-04 10:58:39.231: I/DEBUG(71): code around lr:
07-04 10:58:39.231: I/DEBUG(71): 80018358 3497c004 3488c004 3afffff9 e2888004 
07-04 10:58:39.231: I/DEBUG(71): 80018368 eafffff9 e899000c e594c008 e12fff3c 
07-04 10:58:39.231: I/DEBUG(71): 80018378 e3550000 1594c00c 188c0003 e914a3f0 
07-04 10:58:39.231: I/DEBUG(71): 80018388 e1a05e22 e5946004 e3a02000 e4d6c001 
07-04 10:58:39.231: I/DEBUG(71): 80018398 e35c0000 0a000007 e2822001 e35c0044 
07-04 10:58:39.231: I/DEBUG(71): stack:
07-04 10:58:39.231: I/DEBUG(71):     bee7d308  000001b4  
07-04 10:58:39.231: I/DEBUG(71):     bee7d30c  c0000000  
07-04 10:58:39.231: I/DEBUG(71):     bee7d310  80018540  /system/lib/libdvm.so
07-04 10:58:39.231: I/DEBUG(71):     bee7d314  0000cf98  
07-04 10:58:39.231: I/DEBUG(71):     bee7d318  42157c6c  
07-04 10:58:39.231: I/DEBUG(71):     bee7d31c  afd139d9  /system/lib/libc.so
07-04 10:58:39.231: I/DEBUG(71):     bee7d320  0002de91  
07-04 10:58:39.241: I/DEBUG(71):     bee7d324  0000000e  
07-04 10:58:39.241: I/DEBUG(71):     bee7d328  80018540  /system/lib/libdvm.so
07-04 10:58:39.241: I/DEBUG(71):     bee7d32c  00000070  
07-04 10:58:39.241: I/DEBUG(71):     bee7d330  42157c6c  
07-04 10:58:39.241: I/DEBUG(71):     bee7d334  00238100  
07-04 10:58:39.241: I/DEBUG(71):     bee7d338  00000000  
07-04 10:58:39.241: I/DEBUG(71):     bee7d33c  00000000  
07-04 10:58:39.241: I/DEBUG(71):     bee7d340  df002777  
07-04 10:58:39.241: I/DEBUG(71):     bee7d344  e3a070ad  
07-04 10:58:39.241: I/DEBUG(71): #00 bee7d348  423692b4  
07-04 10:58:39.241: I/DEBUG(71):     bee7d34c  0000cf98  
07-04 10:58:39.241: I/DEBUG(71):     bee7d350  40521b98  
07-04 10:58:39.241: I/DEBUG(71):     bee7d354  8102de91  /data/data/ru.dzakhov.ffmpeg.test/lib/libmylib.so
07-04 10:58:39.241: I/DEBUG(71):     bee7d358  80018540  /system/lib/libdvm.so
07-04 10:58:39.241: I/DEBUG(71):     bee7d35c  0000cf98  
07-04 10:58:39.241: I/DEBUG(71):     bee7d360  bee7d368  
07-04 10:58:39.241: I/DEBUG(71):     bee7d364  800499df  /system/lib/libdvm.so
07-04 10:58:39.241: I/DEBUG(71):     bee7d368  42157c80  
07-04 10:58:39.241: I/DEBUG(71):     bee7d36c  42d58795  
07-04 10:58:39.241: I/DEBUG(71):     bee7d370  8102de91  /data/data/ru.dzakhov.ffmpeg.test/lib/libmylib.so
07-04 10:58:39.241: I/DEBUG(71):     bee7d374  bee7d418  
07-04 10:58:39.241: I/DEBUG(71):     bee7d378  00016de0  
07-04 10:58:39.241: I/DEBUG(71):     bee7d37c  0000ac28  
07-04 10:58:39.241: I/DEBUG(71):     bee7d380  00000001  
07-04 10:58:39.241: I/DEBUG(71):     bee7d384  bee7d418  
07-04 10:58:39.241: I/DEBUG(71):     bee7d388  42157c80  
07-04 10:58:39.241: I/DEBUG(71):     bee7d38c  40521b98  
07-04 10:58:39.241: I/DEBUG(71):     bee7d390  423692b4  
07-04 10:58:39.241: I/DEBUG(71):     bee7d394  800499a1  /system/lib/libdvm.so
07-04 10:58:39.241: I/DEBUG(71):     bee7d398  42157c80  
07-04 10:58:39.241: I/DEBUG(71):     bee7d39c  8004f13f  /system/lib/libdvm.so
07-04 10:58:39.241: I/DEBUG(71): #01 bee7d3a0  00000002  
07-04 10:58:39.251: I/DEBUG(71):     bee7d3a4  0000000e  
07-04 10:58:39.251: I/DEBUG(71):     bee7d3a8  bee7d418  
07-04 10:58:39.251: I/DEBUG(71):     bee7d3ac  0000cf98  
07-04 10:58:39.251: I/DEBUG(71):     bee7d3b0  400198b8  
07-04 10:58:39.251: I/DEBUG(71):     bee7d3b4  42d5861c  
07-04 10:58:39.251: I/DEBUG(71):     bee7d3b8  42157c98  
07-04 10:58:39.251: I/DEBUG(71):     bee7d3bc  bee7d410  
07-04 10:58:39.251: I/DEBUG(71):     bee7d3c0  40521b98  
07-04 10:58:39.251: I/DEBUG(71):     bee7d3c4  8001d588  /system/lib/libdvm.so 
```

无法理解到底有什么问题？这里使用了 SaveFrame 函数，看起来像，

```
void SaveFrame(AVFrame *pFrame, int width, int height, int iFrame) {
  FILE *pFile;
  char szFilename[32];
  int  y;

  // Open file
  LOGI("Opening file!");
  sprintf(szFilename, "frame%d.ppm", iFrame);

  pFile=fopen(szFilename, "wb");
  if(pFile==NULL)
    return;

  // Write header
  fprintf(pFile, "P6\n%d %d\n255\n", width, height);
  //LOGI("width::"+width+"Height::"+height);
  // Write pixel data
  for(y=0; y<height; y++){
      LOGI("writing file");
    fwrite(pFrame->data[0]+y*pFrame->linesize[0], 1, width*3, pFile);
  }
  // Close file
  fclose(pFile);
} 
```

在日志中我没有得到我放在代码中的任何日志！

请帮帮我，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:03:14.763

查看导致问题的指令...

$ rasm2 -a arm -d 4ff0e92d stclcs 0, cr15, [r9, #316]！

stc 指令[文档](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0489c/Cihehjca.html)。

搜索它，可能无法从用户空间执行此操作：[Getting ILL_ILLOPC (illegal opcode) when trying to perform MRC or MCR instructions on Android](https://stackoverflow.com/questions/7691373/getting-ill-illopc-illegal-opcode-when-trying-to-execute-mrc-or-mcr-instructio)

那么，这不应该是你的问题，对吧？:)

尝试在本机中打印一些日志消息（或者至少在**av_register_all()**之前这样做），不要添加任何其他额外的库，看看你是否做对了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-29T21:15:39.410

我认为您使用不适合 Android 的编译器选项构建了 FFmpeg。

我建议遵循[android-ffmpeg-tutorial](https://github.com/roman10/android-ffmpeg-tutorial)，它有适用于 Android 上的 FFmpeg 的工作示例。它也参考了有关为 Android 构建 FFmpeg 的文章。

您可能还想查看更高级的 Android 代码，使用 FFmpeg 播放器[AndroidFFmpeg](https://github.com/appunite/AndroidFFmpeg)，即使在 Genymotion 模拟器中也可以正常工作，我测试过。开箱即用的详细说明如何构建。

您的代码使用了已弃用的 FFmpeg 调用，上面链接中的代码已为此更新。

# sql - 用于根据其他列选择多列总和的 SQL 查询

> ID：11322954
> 
> 赞同：0
> 
> 时间：2012-07-04T05:35:27.323
> 
> 标签：sql

我有这样的数据库

说一个包含 A 和 B 列的表 X

```
X
--
A B
1 300
1 400
1 100
2 200
2 400 
```

我想编写 sql 查询以获取格式的结果

```
P Q
1 800
2 600 
```

其中Q是所有具有相同A值的总和。

我想选择相同格式的数据，然后使用逻辑显示，有没有办法处理 SQL 查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T05:36:19.133

```
select  A as P
,       sum(B) as Q
from    X
group by
        A 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T05:41:25.383

```
SELECT A as P, SUM(B) AS Q
FROM X
GROUP BY A 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T05:37:09.630

```
SELECT A AS P, SUM(B) AS Q
FROM TableA
GROUP BY A 
```

# iphone - 将由多个 wav 文件组成的单个 wav 文件导出到 iPhone 音乐库

> ID：11322955
> 
> 赞同：1
> 
> 时间：2012-07-04T05:35:32.253
> 
> 标签：iphone, ios, core-audio, openal, wav

是否有任何适用于 iOS 的 API 允许我创建由其他几个 WAV 样本组成的 WAV 文件？我正在制作一个节拍制作应用程序，节拍声音本身由几个小的 wav 声音组成，如 kick.wav、snare.wav 等。我想根据用户的模式组装所有这些单独的 .wav 声音以制作最终 output.wav . 对于 iOS 平台应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:29:55.307

没有 iOS API 可以直接执行类似的操作，文件到文件。

手动执行的步骤序列可能包括将 WAV 文件读取到原始 PCM 样本 (AVAssetReader) 的缓冲区中，如果采样率不完全合适，则重新采样，使用 DSP 混音器在适当的时间偏移处合成样本（包括增益控制和限制），然后将生成的复合矢量写入新的 WAV 文件。

这些步骤中的每一个都可能是一个单独的问题，并且对于多个 stackexchange 站点而言，因为有不止一种方法可以重新采样和混合样本，并且根据您的确切要求，做好这件事可能并非易事。

# android - 使用 DialogFragments。官方例子有bug吗？

> ID：11322957
> 
> 赞同：1
> 
> 时间：2012-07-04T05:36:00.283
> 
> 标签：android, android-layout, android-dialogfragment

我刚刚复制[了官方的例子](http://android-developers.blogspot.com/2012/05/using-dialogfragments.html)，我的对话很窄。为什么？

![在此处输入图像描述](../Images/5d83267ceb69afc28e96d53b68ec9031.png)

我的代码。

对话框。

```
package com.redplanet;

import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.WindowManager.LayoutParams;
import android.view.inputmethod.EditorInfo;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.TextView.OnEditorActionListener;

public class EditNameDialog extends DialogFragment implements OnEditorActionListener {

    public interface EditNameDialogListener {
        void onFinishEditDialog(String inputText);
    }

    private EditText mEditText;

    public EditNameDialog() {
        // Empty constructor required for DialogFragment
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_edit_name, container);
        mEditText = (EditText) view.findViewById(R.id.txt_your_name);
        getDialog().setTitle("Hello");

        // Show soft keyboard automatically
        mEditText.requestFocus();
        getDialog().getWindow().setSoftInputMode(
                LayoutParams.SOFT_INPUT_STATE_VISIBLE);
        mEditText.setOnEditorActionListener(this);

        return view;
    }

    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if (EditorInfo.IME_ACTION_DONE == actionId) {
            // Return input text to activity
            EditNameDialogListener activity = (EditNameDialogListener) getActivity();
            activity.onFinishEditDialog(mEditText.getText().toString());
            this.dismiss();
            return true;
        }
        return false;
    }
} 
```

活动。

```
package com.redplanet;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.view.Menu;
import android.widget.Toast;

import com.redplanet.EditNameDialog.EditNameDialogListener;

public class FragmentDialogDemo extends FragmentActivity implements EditNameDialogListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        showEditDialog();
    }

    private void showEditDialog() {
        FragmentManager fm = getSupportFragmentManager();
        EditNameDialog editNameDialog = new EditNameDialog();
        editNameDialog.show(fm, "fragment_edit_name");
    }

    @Override
    public void onFinishEditDialog(String inputText) {
        Toast.makeText(this, "Hi, " + inputText, Toast.LENGTH_SHORT).show();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return super.onCreateOptionsMenu(menu);
    }

} 
```

活动布局文件。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        tools:context=".FragmentDialogDemo" />

</RelativeLayout> 
```

对话框布局文件。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/edit_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/lbl_your_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Your name" />

    <EditText
        android:id="@+id/txt_your_name"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:imeOptions="actionDone"
        android:inputType="text" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T10:17:51.260

为了不对解决方法感到困惑，我更喜欢[AlertDialog](http://developer.android.com/reference/android/app/AlertDialog.html)而不是`DialogFragment`. 我问的问题是在 Android 2.3.6 上，而不是在 Android 4.1.2 上。

# html - 如何在 MVC3 视图（Razor）中将动态字符串呈现为 html

> ID：11322960
> 
> 赞同：1
> 
> 时间：2012-07-04T05:36:14.700
> 
> 标签：html, asp.net-mvc-3, razor

我正在`MVC3 Razor`用于开发 Web 应用程序。我是 MVC3 的新手。我只想渲染一个`string`包含一些 html 标签的动态`into a view as html`。

我怎样才能做到这一点？如果有人知道请分享..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T05:37:47.680

您可以使用[HtmlHelper.Raw](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.98%29.aspx)方法。

```
string myDynamicContent = "<b>This is bold</b>";

@Html.Raw(myDynamicContent) 
```

# php - 如何通过从另一个页面获取会话变量的值来使 Td 样式可见，我的代码附加了 PHP HTML？

> ID：11322961
> 
> 赞同：0
> 
> 时间：2012-07-04T05:36:15.323
> 
> 标签：php, html, css, validation

我想知道让我的 td 标记样式以会话变量的形式从另一个 php 页面获取值可见，因为我的代码在下面定义，

在 php 页面的其他条件下，我正在设置会话变量并重定向到另一个页面，

```
else {
session_start();
$_SESSION['Validation'] = 'on';
header("Location: index.html");
} 
```

之后在 table 标记之间的 index.html 页面上，我使用这个脚本，

```
<?php
session_start();
$foo = $_GET['Validation'];
echo $foo;
?>
<tr><td colspan=2><font face="verdana,arial" size="-1" color="red"       style="visibility:hidden">Wrong username or Password</font></td></tr> 
```

如果会话变量没有得到任何值，如何使 td 标签样式可见，并且它保持隐藏状态？？？？

希望听到你的...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:42:25.443

使用一个简单的`if... then... else`条件并使用您的 $_SESSION 变量来切换这些条件。创建一个新变量来保存您当前的样式，例如`$tdStyle = "visibility: hidden;"`或`$tdStyle = "visibility: visible;"`分别隐藏/显示您的 td。

HTML/PHP 代码：[编辑]

```
<?php
  ...
  if ($_SESSION['Validation'] == "on") {
     $tdStyle = "visibility: visible;";
  } else  {
     $tdStyle = "visibility: hidden;";
  }
  ...
?>
...
<tr><td style="<?php echo $tdStyle; ?>">Wrong username or Password</td></tr>
... 
```

编辑：在 HTML 中嵌入 PHP 代码时`index.php`不要使用`index.html`，否则您的 php 代码将被视为纯文本/html

```
header("Location: index.php");

NOT

header("Location: index.html"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T05:44:40.070

```
<?php
session_start();
$foo = $_GET['Validation'];
echo $foo;
?>
<tr>
<td colspan=2>
<font face="verdana,arial" size="-1" color="red" <?php
if (isset($_SESSION['style_visible'])) {
  echo 'style="visibility:visible"';
} else {
  echo 'style="visibility:hidden"';
}
?>
>Wrong username or Password</font></td></tr> 
```

但我认为这是错误的

第一次验证

```
<?php

// make validation
$errors = array();
// if error fill $errors

// store errors in sessions
if (count($errors) > 0) $_SESSION['errors'] = $errors; 
```

第二种形式

```
<?php
session_start();

// show errors
if (isset($_SESSION['errors'])) {
    foreach ($_SESSION['errors'] as $error) {
      echo '<tr><td>'.$error.'</td></tr>';
    }
}

?> 
```

# iphone - setLaunchPath: @"/bin/ps" 在 iPhone 设备上运行时崩溃

> ID：11322964
> 
> 赞同：0
> 
> 时间：2012-07-04T05:36:21.720
> 
> 标签：iphone, objective-c, process

我想为我的 iPhone 应用程序设置 setLaunchPath: @"/bin/ps" 它实际上会做什么？应用程序崩溃并给出错误 - 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“启动路径不可访问” ***第一次抛出调用堆栈：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T05:40:51.943

[" `setLaunchPath`" 存在于 MacOS 下的 NSTask 中](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html#//apple_ref/occ/instm/NSTask/setLaunchPath%3a)......也许它存在于 iOS 下，但它**没有记录在案**，并且对于提交到 Apple App Store 的沙盒应用程序肯定是不允许的。

# codeigniter - 如何解决此图形 api 重定向不起作用

> ID：11322967
> 
> 赞同：0
> 
> 时间：2012-07-04T05:36:30.980
> 
> 标签：codeigniter, facebook-graph-api, fbml

我是 facebook 应用程序的新手，我尝试将代码从 fbml 更改为图形 api，但图形 api 重定向不起作用，它显示 404 页面未找到。我的画布类型是 FBML。如何将画布类型 FBML 更改为 iframe。我的代码是，

```
<?php function index()
        {
        $facebook = new Facebook(array(
                    'appId'  => '1670025435555',
                    'secret' => '682018907e58d7208d9b663d9073op09',
                    'cookie' => true,
                    ));

                     $session = $facebook->getSession();
                     $app_id = "1670025435555";     
                     $canvas_page = "http://apps.facebook.com/englishlanguageclub/";
     $auth_url = "http://www.facebook.com/dialog/oauth?client_id=". $app_id . "&redirect_uri=" . urlencode($canvas_page)."&scope=user_about_me,user_hometown,email,read_requests,read_stream,publish_stream,user_birthday,sms";
         if(isset($_REQUEST["signed_request"]))
         {
             $signed_request = $_REQUEST["signed_request"];
             list($encoded_sig, $payload) = explode('.', $signed_request, 2); 
             $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);
         }
        if (empty($data["user_id"]))
         {  
          echo("<script type='text/javascript'> top.location.href='" . $auth_url . "'</script>");

        }
      else 
      {
         $uid = $data["user_id"];
      } 
}
?> 
```

任何人请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:24:02.103

您必须从 Facebook 应用程序设置中更改画布类型。您需要登录 developer.facebook.com，然后转到您的应用程序，然后编辑设置。

# eclipse - eclipse rcp树查看器的子节点不显示

> ID：11322968
> 
> 赞同：0
> 
> 时间：2012-07-04T05:36:35.010
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, rcp, treeviewer

我的 RCP 应用程序的项目资源管理器视图中有一个树查看器。我的产品完全处理资源（“org.eclipse.emf.ecore.resource.Resource”）中的加载、值检索和更新值。我有一个创建项目菜单项，用于创建新项目。项目创建操作完成后，在项目文件夹中创建了一个新文件。我有一个标准文件，我需要在创建项目本身时加载它。因此，在整个应用程序中，我处理了 2 个文件（标准文件和在项目创建操作期间创建的文件）。当我在 Eclipse 中运行 rcp 产品时，它工作正常，项目创建过程完成后，项目节点出现在树中，当我尝试展开项目节点时，它显示子节点。

我试图将它作为 Eclipse 产品文件中的 rcp 产品导出。当我尝试创建项目时，项目节点显示在树查看器中，但是当我尝试展开项目节点时，它下面什么都没有显示。为什么不显示项目节点的子节点。子节点应取自项目创建过程中创建的文件。该文件在项目文件夹中完美创建。我认为，这是由于与资源相关的一些问题而发生的。在出口产品时，我们应该关心资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T02:47:55.730

我也遇到过同样的问题，尽管这门课很丑。

```
package com.mycomp

import java.net.URL;

import org.eclipse.core.resources.ResourcesPlugin;
import org.eclipse.core.runtime.FileLocator;
import org.eclipse.core.runtime.IAdaptable;
import org.eclipse.core.runtime.Path;
import org.eclipse.core.runtime.Platform;
import org.eclipse.jface.resource.ImageDescriptor;
import org.eclipse.ui.application.IWorkbenchConfigurer;
import org.eclipse.ui.application.WorkbenchAdvisor;
import org.eclipse.ui.ide.IDE;
import org.eclipse.ui.internal.ide.IDEInternalWorkbenchImages;
import org.eclipse.ui.internal.ide.IDEWorkbenchPlugin;
import org.eclipse.ui.internal.ide.model.WorkbenchAdapterBuilder;
import org.osgi.framework.Bundle;

public abstract class WorkbenchAdvisorHack extends WorkbenchAdvisor
{
/**
 * Declares all IDE-specific workbench images. This includes both "shared"
 * images (named in {@link IDE.SharedImages}) and internal images (named in
 * {@link org.eclipse.ui.internal.ide.IDEInternalWorkbenchImages}).
 * 
 * @see org.eclipse.ui.internal.ide.IDEWorkbenchAdvisor#declareImage
 */
protected void declareWorkbenchImages()
{
    final String ICONS_PATH = "$nl$/icons/full/";//$NON-NLS-1$
    final String PATH_ELOCALTOOL = ICONS_PATH + "elcl16/"; // Enabled
    // //$NON-NLS-1$

    // toolbar
    // icons.
    final String PATH_DLOCALTOOL = ICONS_PATH + "dlcl16/"; // Disabled
    // //$NON-NLS-1$
    // //$NON-NLS-1$
    // toolbar
    // icons.
    final String PATH_ETOOL = ICONS_PATH + "etool16/"; // Enabled toolbar
    // //$NON-NLS-1$
    // //$NON-NLS-1$
    // icons.
    final String PATH_DTOOL = ICONS_PATH + "dtool16/"; // Disabled toolbar
    // //$NON-NLS-1$
    // //$NON-NLS-1$
    // icons.
    final String PATH_OBJECT = ICONS_PATH + "obj16/"; // Model object
    // //$NON-NLS-1$
    // //$NON-NLS-1$
    // icons
    final String PATH_WIZBAN = ICONS_PATH + "wizban/"; // Wizard
    // //$NON-NLS-1$
    // //$NON-NLS-1$
    // icons

    Bundle ideBundle = Platform.getBundle(IDEWorkbenchPlugin.IDE_WORKBENCH);

    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_ETOOL_BUILD_EXEC,
            PATH_ETOOL + "build_exec.gif", false); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_ETOOL_BUILD_EXEC_HOVER,
            PATH_ETOOL + "build_exec.gif", false); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_ETOOL_BUILD_EXEC_DISABLED,
            PATH_DTOOL + "build_exec.gif", false); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_ETOOL_SEARCH_SRC,
            PATH_ETOOL + "search_src.gif", false); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_ETOOL_SEARCH_SRC_HOVER,
            PATH_ETOOL + "search_src.gif", false); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_ETOOL_SEARCH_SRC_DISABLED,
            PATH_DTOOL + "search_src.gif", false); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_ETOOL_NEXT_NAV, PATH_ETOOL
            + "next_nav.gif", false); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_ETOOL_PREVIOUS_NAV,
            PATH_ETOOL + "prev_nav.gif", false); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_WIZBAN_NEWPRJ_WIZ,
            PATH_WIZBAN + "newprj_wiz.png", false); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_WIZBAN_NEWFOLDER_WIZ,
            PATH_WIZBAN + "newfolder_wiz.png", false); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_WIZBAN_NEWFILE_WIZ,
            PATH_WIZBAN + "newfile_wiz.png", false); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_WIZBAN_IMPORTDIR_WIZ,
            PATH_WIZBAN + "importdir_wiz.png", false); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_WIZBAN_IMPORTZIP_WIZ,
            PATH_WIZBAN + "importzip_wiz.png", false); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_WIZBAN_EXPORTDIR_WIZ,
            PATH_WIZBAN + "exportdir_wiz.png", false); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_WIZBAN_EXPORTZIP_WIZ,
            PATH_WIZBAN + "exportzip_wiz.png", false); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle,
            IDEInternalWorkbenchImages.IMG_WIZBAN_RESOURCEWORKINGSET_WIZ, PATH_WIZBAN
                    + "workset_wiz.png", false); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_DLGBAN_SAVEAS_DLG,
            PATH_WIZBAN + "saveas_wiz.png", false); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_DLGBAN_QUICKFIX_DLG,
            PATH_WIZBAN + "quick_fix.png", false); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle, IDE.SharedImages.IMG_OBJ_PROJECT, PATH_OBJECT
            + "prj_obj.gif", true); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDE.SharedImages.IMG_OBJ_PROJECT_CLOSED, PATH_OBJECT
            + "cprj_obj.gif", true); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDE.SharedImages.IMG_OPEN_MARKER, PATH_ELOCALTOOL
            + "gotoobj_tsk.gif", true); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_ELCL_QUICK_FIX_ENABLED,
            PATH_ELOCALTOOL + "smartmode_co.gif", true); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_DLCL_QUICK_FIX_DISABLED,
            PATH_DLOCALTOOL + "smartmode_co.gif", true); //$NON-NLS-1$

    // task objects
    // declareRegistryImage(IDEInternalWorkbenchImages.IMG_OBJS_HPRIO_TSK,
    // PATH_OBJECT+"hprio_tsk.gif");
    // declareRegistryImage(IDEInternalWorkbenchImages.IMG_OBJS_MPRIO_TSK,
    // PATH_OBJECT+"mprio_tsk.gif");
    // declareRegistryImage(IDEInternalWorkbenchImages.IMG_OBJS_LPRIO_TSK,
    // PATH_OBJECT+"lprio_tsk.gif");

    declareWorkbenchImage(ideBundle, IDE.SharedImages.IMG_OBJS_TASK_TSK, PATH_OBJECT
            + "taskmrk_tsk.gif", true); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDE.SharedImages.IMG_OBJS_BKMRK_TSK, PATH_OBJECT
            + "bkmrk_tsk.gif", true); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_OBJS_COMPLETE_TSK,
            PATH_OBJECT + "complete_tsk.gif", true); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_OBJS_INCOMPLETE_TSK,
            PATH_OBJECT + "incomplete_tsk.gif", true); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_OBJS_WELCOME_ITEM,
            PATH_OBJECT + "welcome_item.gif", true); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_OBJS_WELCOME_BANNER,
            PATH_OBJECT + "welcome_banner.gif", true); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_OBJS_ERROR_PATH,
            PATH_OBJECT + "error_tsk.gif", true); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_OBJS_WARNING_PATH,
            PATH_OBJECT + "warn_tsk.gif", true); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_OBJS_INFO_PATH, PATH_OBJECT
            + "info_tsk.gif", true); //$NON-NLS-1$

    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_LCL_FLAT_LAYOUT,
            PATH_ELOCALTOOL + "flatLayout.gif", true); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_LCL_HIERARCHICAL_LAYOUT,
            PATH_ELOCALTOOL + "hierarchicalLayout.gif", true); //$NON-NLS-1$
    declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_ETOOL_PROBLEM_CATEGORY,
            PATH_ETOOL + "problem_category.gif", true); //$NON-NLS-1$
/*  declareWorkbenchImage(ideBundle, IDEInternalWorkbenchImages.IMG_LCL_LINKTO_HELP,
            PATH_ELOCALTOOL + "linkto_help.gif", false); //$NON-NLS-1$
*/  }

/**
 * Declares an IDE-specific workbench image.
 * 
 * @param symbolicName
 *            the symbolic name of the image
 * @param path
 *            the path of the image file; this path is relative to the base
 *            of the IDE plug-in
 * @param shared
 *            <code>true</code> if this is a shared image, and
 *            <code>false</code> if this is not a shared image
 * @see org.eclipse.ui.internal.ide.IDEWorkbenchAdvisor#declareImage
 */
private void declareWorkbenchImage(Bundle ideBundle, String symbolicName, String path,
        boolean shared)
{
    URL url = FileLocator.find(ideBundle, new Path(path), null);
    ImageDescriptor desc = ImageDescriptor.createFromURL(url);
    getWorkbenchConfigurer().declareImage(symbolicName, desc, shared);
}

@Override
public void initialize(IWorkbenchConfigurer configurer)
{
    //configurer.setSaveAndRestore(true);
    declareWorkbenchImages();
}

@Override
public IAdaptable getDefaultPageInput()
{
    return ResourcesPlugin.getWorkspace().getRoot();
}

@SuppressWarnings("restriction")
@Override
public void preStartup()
{
    WorkbenchAdapterBuilder.registerAdapters();
}
} 
```

这是 ui 资源未设置的问题，您也需要此扩展点“org.eclipse.ui.navigator.viewer”来创建具有项目浏览器视图 ID 的查看器。希望有帮助。

# objective-c - id 变量和可可中的铸造

> ID：11322971
> 
> 赞同：1
> 
> 时间：2012-07-04T05:37:03.927
> 
> 标签：objective-c, cocoa, casting

我正在处理可可中基于视图的 TableView。在 tableview 数据源方法中，我想根据它们相关的对象类型创建三个不同的单元格。
我的想法是在 if 语句之前为单元格创建一个通用 id 变量，然后在我对与之相关的对象进行自省时将其转换为 if 内的正确单元格类型。不幸的是，使用这种方法，xcode 抱怨通用单元格变量没有我尝试在里面设置的属性。它无法识别我在上一行中所做的投射。

我知道这是一个非常基本的问题，但是在objective-c/cocoa 中解决这个问题的常用模式是什么。

下面是数据源方法的代码：

```
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row 
{
    GeneralVector *vector = [self.vectors objectAtIndex:row];
    id cellView;
    if ([[self.vectors objectAtIndex:row] isKindOfClass:[Vector class]]) {
        cellView = (VectorTableCellView *)[tableView makeViewWithIdentifier:@"vectorCell" owner:self];
        cellView.nameTextField.stringValue = vector.name;
    } else if ([[self.vectors objectAtIndex:row] isKindOfClass:[NoiseVector class]]) {
        cellView = (NoiseVectorTableCellView *)[tableView makeViewWithIdentifier:@"noiseVectorCell" owner:self];
    } else {
        cellView = (ComputedVectorTableCellView *)[tableView makeViewWithIdentifier:@"computedVectorCell" owner:self];
    }

    return cellView;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T05:59:23.277

您不必强制执行分配，因为所有内容都按定义是`id`Objective-C 的后代。相反，您需要在取消引用该属性的位置进行转换。所以，改变你的代码看起来更像这样：

```
if( /* some check */ ) {
  // No need to cast here, we are all descended from 'id'
  cellView = [tableView makeViewWithIdentifier:@"vectorCell" owner:self];
  // Here, we need to cast because we need to tell the compiler how to format
  // the method call for the 'nameTextField' property, so it needs to know
  // some information about the class
  ((VectorTableCellView*)cellView).nameTextField.stringValue = vector.name;
} else if( /* some other check... */ {
  // and so on
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T05:53:27.363

如果 VectorTableCellView 、 NoiseVectorTableCellView 是从 NSView 继承的，则使用“NSView *cellView”代替“id cellView”。

如下

*   (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row

{

```
 GeneralVector *vector = [self.vectors objectAtIndex:row];
    NSView *cellView;
    if ([[self.vectors objectAtIndex:row] isKindOfClass:[Vector class]]) 
    {

        cellView = (VectorTableCellView *)[tableView makeViewWithIdentifier:@"vectorCell" owner:self];

        cellView.nameTextField.stringValue = vector.name;

    } 

    else if ([[self.vectors objectAtIndex:row] isKindOfClass:[NoiseVector class]]) 
    {

        cellView = (NoiseVectorTableCellView *)[tableView 
         makeViewWithIdentifier:@"noiseVectorCell" owner:self];

    } 
    else 
    {

        cellView = (ComputedVectorTableCellView *)[tableView 
        makeViewWithIdentifier:@"computedVectorCell" owner:self];

    }

    return cellView; } 
```

# extjs4 - 作为我之前帖子的补充

> ID：11322986
> 
> 赞同：0
> 
> 时间：2012-07-04T05:38:19.737
> 
> 标签：extjs4

作为对我之前帖子的补充：

[（图书馆问题）](https://stackoverflow.com/questions/11309998/extjs-4-with-geoext-libraries-issue)

我在这里找不到 GeoExt 2 的 css 文件：[https ://github.com/geoext/geoext2](https://github.com/geoext/geoext2)

我只是可以在 src 文件夹中找到 GeoExt javascript

我真的需要使用 GeoExt 2，所以任何人都可以找到我的好来源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:20:17.477

它在这里说[http://geoext.blogspot.ro/2012/05/geoext2-sprint-results.html](http://geoext.blogspot.ro/2012/05/geoext2-sprint-results.html)他们只发布了 alpha 版本，你在 git hub 上找到的那个。alpha 版本面向开发人员和测试人员，采用白盒方法（这就是为什么没有压缩的 js，它包含所有文件的原因）。通常，只有 beta 版本可供公众使用（一个 js）。

# facebook-graph-api - 如何从用户那里获取带有图像的 facebook 相册

> ID：11322987
> 
> 赞同：-1
> 
> 时间：2012-07-04T05:38:24.190
> 
> 标签：facebook-graph-api, facebook-fql, fql.multiquery

我正在创建一个 facebook 应用程序，我想显示带有封面图像的用户相册，我已经尝试使用代码 #1，但它真的很慢，因为我在 foreach 中进行了 facebook api 调用，这使得我的应用程序永远需要，所以我正在寻找另一种方法来进行一次 api 调用并获取所有信息，所以我尝试使用 FQL 多查询（代码#2）但现在我遇到了一个问题，因为如果专辑没有图像，它不会返回任何内容，所以请检查我的代码，如果您知道我该怎么做，我将不胜感激

```
code#1
$albums = $facebook->api('/me/albums?limit=0&fields=id,name,count,cover_photo');
foreach($albums['data'] as $album)
                {
                // get all photos for album
                $photos = $facebook->api("/{$album['id']}/?fields=picture,name,count");
                $foto = $photos['picture'];
                $nombre = $album['name'];

                $id = $album['id'];
                $count = $album['count'];
                $cover_photo = $album['cover_photo'];
                $nombre = $nombre." (".$count.")";

                echo "<li> <a href=\"album.php?numero_album=$id&nombre_album=$nombre \" title=\"$nombre\"><img src=\"https://graph.facebook.com/{$cover_photo}/\" alt=\"$nombre\" /> </a> </li>";
                }

code#2
$multiQuery = '{
  "albumes":"SELECT name,cover_pid,object_id,size FROM album WHERE owner=me()",
  "portadas":"SELECT src_big FROM photo WHERE pid IN (SELECT cover_pid FROM #albumes)"
        }';

        $param = array(       
     'method' => 'fql.multiquery',       
     'queries' => $multiQuery,       
     'callback' => '');       
        $queryresults = $facebook->api($param);

                foreach($queryresults[0]['fql_result_set'] as $album)
                {
                $nombre = $album['name'];
                $id = $album['object_id'];
                $count = $album['size'];
                $nombre = $nombre." (".$count.")";

                echo "<li> <a href=\"album.php?numero_album=$id&nombre_album=$nombre \" title=\"$nombre\"><img src=\"https://graph.facebook.com/{$cover_photo}/\" alt=\"$nombre\" /> </a> </li>";
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:11:04.310

> so i tried with FQL multi query (code#2) but now i have a problem because if the album has no image it won´t return nothing

Can’t really see your problem there. If I try your queries using the Graph API explorer, it gives me all my albums, and a cover photo for each one that has one. (So that’s 4 albums and 3 photos for me.)

If you’re having trouble to tell which photo is from which album – then just include the `aid` field in both queries.

> it is really really slow as i make a facebook api call in the foreach which makes my app take forever

Of course it does, because each API call means another HTTP request, and those are *slow*.

If the FQL method doesn’t give you what you want, then make your API requests into [batch requests](https://developers.facebook.com/docs/reference/api/batch/) – that reduces the number of HTTP requests, and therefor should speed things up quite well.

# c++ - 在 C/C++ 中解析具有键值的文件

> ID：11322989
> 
> 赞同：-3
> 
> 时间：2012-07-04T05:38:39.720
> 
> 标签：c++

在解析文件时需要一些帮助

```
Device#  Device Name                 Serial No.                  Active Policy         Disk#         P.B.T.L        ALB
                                                                     Paths                                        
---------------------------------------------------------------------------------------    -------------------------------------
 1       AB      OPEN-V-CM           50 0BC1F1621                          1    SQST           Disk  2       3.1.4.0         N/A
 2       AB      OPEN-V-CM           50 0BC1F1605                          1    SQST           Disk  3       3.1.4.1         N/A
 3       AB      OPEN-V*2            50 0BC1F11D4                          1    SQST           Disk  4       3.1.4.2         N/A
 4       AB      OPEN-V-CM           50 0BC1F005A                          1    SQST           Disk  5       3.1.4.3         N/A 
```

以上信息在devices.txt文件中，我想提取与我输入的磁盘号对应的设备号。我输入的磁盘号只是一个整数（而不是文件中显示的“磁盘 2”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T05:52:05.503

打开文件并跳过前 3 行。从第 4 行开始逐行阅读。您可以轻松获取设备编号，因为它是第一列。*要获取磁盘编号，请使用空格字符*搜索每一行。当您遇到一个空格字符时，这意味着您已经过了一列。**忽略重复的空格**并继续此操作，直到找到磁盘编号。如果存在，您必须单独处理列数据中的空格。

将磁盘编号和设备编号加载到地图中，稍后您可以使用输入从该地图中查询设备信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:09:36.857

在 UNIX 中，您可以使用 awk 或其他脚本语言轻松实现此目的。

```
cat Device.txt | awk '{if ( $1 == 2 ) print}' 
```

在 C++ 中，您必须使用提取特定列`strtok`并将其与 'val' 进行比较，如果它匹配打印该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T06:29:27.287

假设以下任何一列中都没有“磁盘”：

1）跳过行，直到遇到'-'作为一行的第一个字符，然后也跳过该行。

2）读一行

2.a) 跳过当前行的字符，直到 isdigit(line[i]) 函数返回 true，然后将当前字符及其后面的字符读入临时缓冲区，直到 isdigit(line[i]) 返回 false。这是设备 ID。

2.b) 跳过当前行的字符，直到找到“D”

2.bi) 匹配 'i', 's', 'k' 字符，如果其中任何一个失败，转到 2.b

2.c) 跳过当前行的字符，直到 isdigit(line[i]) 函数返回 true，然后将当前字符及其后面的字符读入另一个缓冲区，直到 isdigit(line[i]) 返回 false。这是磁盘 ID。

3) 打印出两个缓冲区

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T06:31:14.117

```
#include <sstream>
#include <fstream>
#include <iostream>
#include <cctype>
using namespace std;

int main(int argc, char* argv[])
{
    int wantedDisknum = 4;
    int finalDeviceNum = -1;

    ifstream fin("test.txt");

    if(!fin.is_open())
        return -1;

    while(!fin.eof())
    {
        string line;
        getline(fin, line);
        stringstream ss(line);

        int deviceNum;
        ss >> deviceNum;
        if(ss.fail())
        {
            ss.clear();
            continue;
        }

        string unused;
        int diskNum;
        ss >> unused >> unused >> unused >> unused >> unused >> unused >> unused >> diskNum;

        if(diskNum == wantedDisknum)
        {
            finalDeviceNum = deviceNum;
            break;
        }
    }

    fin.close();
    cout << finalDeviceNum << endl;

    system("pause");
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T06:45:13.253

我没有方便的正则表达式备忘单，但我很确定通过正则表达式运行文件中的每一行会很简单：

1) 在行中查找整数 2) 跳过空格后跟文本 3 次 3) 匹配字符一个空格和字符

Boost、Qt 和大多数其他常见的 C++ 类库都有一个正则表达式解析器来处理这类事情。

# javascript - jQuery中需要的冲突解决方案和jquery中的$

> ID：11322991
> 
> 赞同：-2
> 
> 时间：2012-07-04T05:38:49.107
> 
> 标签：javascript, jquery, conflict, simpletip

我有两页的脚本

```
jQuery(document).ready(function()
 {      
    jQuery("#"+id).simpletip({
    /*content: 'A simple tooltip2 A simple tooltip2 A simple tooltip2',*/                       
        content: msg,
        fixed: true,        
        position: ["0", positionVal]        

    });
}); 
```

但我有一个问题，一个页面正在使用上述方法，但另一个页面只有在我用**$替换****jQuery**时才能工作。有没有其他方法可以解决这个冲突？

 **我试过 jQuery.noConflict(); 和 var j = jQuery.noConflict(); 方法，但是没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T05:41:03.207

你可能在那里有其他图书馆。但是`$`，您可以像这样在两个页面上使用：

```
jQuery(function($){
  // use $ now
}); 
```

或者

```
jQuery(document).ready(function($){      
   // use $ now
}); 
```

仅供参考，您还可以检查使用什么`$`解决方案：

```
alert($); // or console.log($) 
```**

# hsqldb - 多客户端的 HSQLDB 性能如何

> ID：11322996
> 
> 赞同：0
> 
> 时间：2012-07-04T05:40:00.207
> 
> 标签：hsqldb, database-performance

我想在具有 5 到 30 个客户端的服务器中使用 HSQLDB +Hibernate，这些客户端将相当密集地写入数据库。
每个客户端将每 30 秒（24/7，大约 10 亿行/天）在一个表中保留十几万行，并且客户端还将在随机时间或多或少地在数据库中查询几千行每 5 到 10 秒两次请求的平均频率。

HSQLDB 可以处理这样的用例还是应该切换到 MySQL/PostgreSQL ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T13:39:36.703

您正在查看每秒总共 2000 - 12000 次写入和 5000 - 30000 次读取。

借助快速硬件，HSQLDB 可能可以使用持久内存表来处理这个问题。使用 CACHED 表，它可能能够处理固态磁盘的较低范围（磁盘寻道时间是主要参数）。

看这个测试。您可以使用 MySQL 和 PostgresSQL 运行它以进行比较。

[http://hsqldb.org/web/hsqlPerformanceTests.html](http://hsqldb.org/web/hsqlPerformanceTests.html)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-04T05:43:14.933

你应该换。HSQLDB 不适用于关键应用程序。为数据损坏和随着时间的推移降低启动性能做好准备。

主要的负面炒作来自 JBoss：[https ://community.jboss.org/wiki/HypersonicProduction](https://community.jboss.org/wiki/HypersonicProduction)

另请参阅[http://www.coderanch.com/t/89950/JBoss/HSQLDB-production](http://www.coderanch.com/t/89950/JBoss/HSQLDB-production)

另见类似问题：[Is is safe to use HSQLDB for production？(JBoss AS5.1)](https://stackoverflow.com/questions/2299080/is-is-safe-to-use-hsqldb-for-production-jboss-as5-1)