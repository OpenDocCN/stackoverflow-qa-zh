# StackOverflow 问答 10518000-10518999

# iphone - 如何将照片上传到 iPhone 中的 Foursquare API

> ID：10518000
> 
> 赞同：0
> 
> 时间：2012-05-09T14:18:28.900
> 
> 标签：iphone, photo, foursquare

我正在使用 Foursquare API，它在登录时工作正常。

现在我想将照片上传到 Foursquare，我有访问令牌和所有相关信息。

我已经搜索了很多，但没有找到代码。有人可以帮我吗？？？？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:05:34.533

您要上传什么类型的照片？

如果您尝试上传当前经过身份验证的用户的个人资料照片，请查看此端点：

[https://developer.foursquare.com/docs/users/update](https://developer.foursquare.com/docs/users/update)

如果您想将照片添加到场地、小费或签到，请查看：

[https://developer.foursquare.com/docs/photos/add](https://developer.foursquare.com/docs/photos/add)

希望这可以帮助！

# iphone - 如何在objective-c的Web服务调用中将文件作为参数传递？

> ID：10518001
> 
> 赞同：0
> 
> 时间：2012-05-09T14:18:36.680
> 
> 标签：iphone, ios, web-services, ipad

我有一个本地存储的文件，我想使用 copy.asmx 的“CopyInToItems”Web 服务上传到共享点服务器。我必须将文件作为 NSStream 传递。我能弄清楚该怎么做？

```
<!--Request-->
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"xmlns:xsi="http>
<soap:Body>
<CopyIntoItems xmlns="http://schemas.microsoft.com/sharepoint/soap/">
<SourceUrl>-------local path of the file-------</SourceUrl><DestinationUrls>
<string>-------server path where the file needs to be uploaded--------</string>
</DestinationUrls>
<Fields>
<FieldInformation Type="Invalid" Id="00000000-0000-0000-0000-000000000000" />
</Fields>
<Stream>
----File Stream----
 </Stream>
 </CopyIntoItems>
 </soap:Body>
 </soap:Envelope> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:59:48.200

实际上你不需要使用 NSSTREAM。您可以使用将本地存储的文件转换为 NSDATA，

```
NSMutableData *filedata=[[NSMutableData alloc]initWithContentsOfURL:[NSURL URLWithString:localPath]] ; 
```

然后使用 base-64 编码将此 NSDATA 转换为 NSSTRING。由于不能直接在 IOS 中完成 base-64 编码，这里有一个功能可以做到这一点。

```
 - (NSString *) base64StringFromData: (NSData *)data length: (int)length {
            unsigned long ixtext, lentext;
            long ctremaining;
            unsigned char input[3], output[4];
            short i, charsonline = 0, ctcopy;
            const unsigned char *raw;
            NSMutableString *result;

            lentext = [data length]; 
            if (lentext < 1)
                return @"";
            result = [NSMutableString stringWithCapacity: lentext];
            raw = [data bytes];
            ixtext = 0; 

            while (true) {
                ctremaining = lentext - ixtext;
                if (ctremaining <= 0) 
                    break;        
                for (i = 0; i < 3; i++) { 
                    unsigned long ix = ixtext + i;
                    if (ix < lentext)
                        input[i] = raw[ix];
                    else
                        input[i] = 0;
                }
                output[0] = (input[0] & 0xFC) >> 2;
                output[1] = ((input[0] & 0x03) << 4) | ((input[1] & 0xF0) >> 4);
                output[2] = ((input[1] & 0x0F) << 2) | ((input[2] & 0xC0) >> 6);
                output[3] = input[2] & 0x3F;
                ctcopy = 4;
                switch (ctremaining) {
                    case 1: 
                        ctcopy = 2; 
                        break;
                    case 2: 
                        ctcopy = 3; 
                        break;
                }

                for (i = 0; i < ctcopy; i++)
                    [result appendString: [NSString stringWithFormat: @"%c", base64EncodingTable[output[i]]]];

                for (i = ctcopy; i < 4; i++)
                    [result appendString: @"="];

                ixtext += 3;
                charsonline += 4;

                if ((length > 0) && (charsonline >= length))
                    charsonline = 0;
            }     
            return result;
        } 
```

现在调用此函数并将您之前创建的文件的 NSDATA 作为参数传递。

```
NSString *stream=[self base64StringFromData:filedata length:[filedata length] ]; 
```

现在您可以将此字符串作为参数传递给您的 Web 服务调用

# scala - 高阶 ScalaCheck

> ID：10518015
> 
> 赞同：17
> 
> 时间：2012-05-09T14:19:33.127
> 
> 标签：scala, specifications, category-theory, scalacheck

考虑以下类别的定义：

```
trait Category[~>[_, _]] {
  def id[A]: A ~> A
  def compose[A, B, C](f: A ~> B)(g: B ~> C): A ~> C
} 
```

这是一元函数的一个实例：

```
object Category {
  implicit def fCat = new Category[Function1] {
    def id[A] = identity
    def compose[A, B, C](f: A => B)(g: B => C) = g.compose(f)
  }
} 
```

现在，类别受某些法律的约束。相关组成（`.`）和身份（`id`）：

```
forall f: categoryArrow -> id . f == f . id == f 
```

我想用 ScalaCheck 对此进行测试。让我们尝试整数上的函数：

```
"Categories" should {
  import Category._

  val intG  = { (_ : Int) - 5 }

  "left identity" ! check {
    forAll { (a: Int) => fCat.compose(fCat.id[Int])(intG)(a) == intG(a) }      
  }

  "right identity" ! check {
    forAll { (a: Int) => fCat.compose(intG)(fCat.id)(a) == intG(a) }      
  }
} 
```

但这些是通过 (i) 特定类型 ( `Int`) 和 (ii) 特定功能 ( `intG`) 量化的。所以这是我的问题：在概括上述测试方面我能走多远，以及如何？或者，换句话说，是否有可能创建任意`A => B`函数的生成器，并将其提供给 ScalaCheck？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T15:07:43.967

不完全了解希尔伯特的 epsilon 是，我会采取更基本的方法并使用 ScalaCheck[`Arbitrary`](http://scalacheck.googlecode.com/svn/artifacts/1.9/doc/api/index.html#org.scalacheck.Arbitrary$)并[`Gen`](http://scalacheck.googlecode.com/svn/artifacts/1.9/doc/api/index.html#org.scalacheck.Gen$)选择要使用的函数。

首先，为要生成的函数定义一个基类。一般来说，生成结果未定义的函数是可能的（例如除以零），所以我们将使用[`PartialFunction`](http://www.scala-lang.org/api/current/scala/PartialFunction.html)它作为我们的基类。

```
trait Fn[A, B] extends PartialFunction[A, B] {
  def isDefinedAt(a: A) = true
} 
```

现在您可以提供一些实现。重写`toString`，以便 ScalaCheck 的错误消息易于理解。

```
object Identity extends Fn[Int, Int] {
  def apply(a: Int) = a
  override def toString = "a"
}
object Square extends Fn[Int, Int] {
  def apply(a: Int) = a * a
  override def toString = "a * a"
}
// etc. 
```

我选择使用案例类从二进制函数生成一元函数，并将附加参数传递给构造函数。不是唯一的方法，但我发现它是最直接的。

```
case class Summation(b: Int) extends Fn[Int, Int] {
  def apply(a: Int) = a + b
  override def toString = "a + %d".format(b)
}
case class Quotient(b: Int) extends Fn[Int, Int] {
  def apply(a: Int) = a / b
  override def isDefinedAt(a: Int) = b != 0
  override def toString = "a / %d".format(b)
}
// etc. 
```

现在您需要创建一个 的生成器`Fn[Int, Int]`，并将其定义为隐式`Arbitrary[Fn[Int, Int]]`。你可以继续添加生成器，直到你脸色发青（多项式，从简单的函数中组合复杂的函数等）。

```
val funcs = for {
  b <- arbitrary[Int]
  factory <- Gen.oneOf[Int => Fn[Int, Int]](
    Summation(_), Difference(_), Product(_), Sum(_), Quotient(_),
    InvDifference(_), InvQuotient(_), (_: Int) => Square, (_: Int) => Identity)
} yield factory(b)

implicit def arbFunc: Arbitrary[Fn[Int, Int]] = Arbitrary(funcs) 
```

现在您可以定义您的属性。用于`intG.isDefinedAt(a)`避免未定义的结果。

```
property("left identity simple funcs") = forAll { (a: Int, intG: Fn[Int, Int]) =>
  intG.isDefinedAt(a) ==> (fCat.compose(fCat.id[Int])(intG)(a) == intG(a))
}

property("right identity simple funcs") =  forAll { (a: Int, intG: Fn[Int, Int]) =>
  intG.isDefinedAt(a) ==> (fCat.compose(intG)(fCat.id)(a) == intG(a))
} 
```

虽然我所展示的只是概括了测试的函数，但希望这能让您了解如何使用高级类型系统技巧来概括该类型。

# c# - 从 .net 代码运行 sql server 作业

> ID：10518016
> 
> 赞同：4
> 
> 时间：2012-05-09T14:19:36.497
> 
> 标签：c#

根据[MSDN 页面](http://msdn.microsoft.com/en-us/library/ms202348.aspx)和这篇 [博客文章](http://blog.the-dargans.co.uk/2007/02/executing-job-on-sql-2005-server-in-c.html)，我正在尝试从 Windows 服务运行 sql 作业，我需要通过声明***JOB STEP NAME***来运行该作业。有没有办法告诉作业从第***1 步开始***，这样如果步骤名称更改我不需要每次都更改配置文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T14:42:27.427

您可以使用[sp_start_job](http://technet.microsoft.com/en-us/library/ms186757%28v=sql.105%29.aspx)系统存储过程。步骤名称是可选的。只需像执行任何其他存储过程一样执行它。

# java - 可执行 JAR 文件未显示资源

> ID：10518020
> 
> 赞同：0
> 
> 时间：2012-05-09T14:19:46.700
> 
> 标签：java, jar

我使用 eclipse 创建了一个可执行的 JAR 文件。我在项目文件夹中有资源，当框架打开时没有出现。我的意思是当我双击 JAR 文件时。更重要的是，在我尝试删除 JAR 文件后，我收到一条警告，指出 JAR 文件正在 Java Se 平台上使用。除了使用资源加载器类之外，我该如何消除这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:51:40.497

有时，当我们运行 jar 文件时，jvm 使用了资源并且因此无法释放它们，因此我们无法删除 jar 文件。因此尝试从任务管理器中终止进程，以便您可以删除 jar 文件。对我来说，杀死explorer.exe 工作。尝试终止该进程，然后尝试删除 jar 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:35:56.423

如果您的资源位于源文件夹中，请使用 ClassLoader 获取 InputStream。

```
ClassLoader.getResourceAsStream(String name); 
```

在删除 JAR 文件之前关闭您的应用程序。或者使用以下代码显式退出您的应用程序。

```
System.exit(0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:47:32.027

可能根本没有导出资源。有时，您需要勾选每个资源名称的复选框，然后在使用 Eclipse 导出它时点击完成。

另外，请检查导出过程完成时是否没有警告。

从任务管理器中杀死所有 java.exe 和 javaw.exe 进程，然后尝试删除。

# mysql - 在 MySQL 的过程中，@ 符号是什么意思？

> ID：10518026
> 
> 赞同：27
> 
> 时间：2012-05-09T14:20:02.297
> 
> 标签：mysql, sql, stored-procedures

有或没有访问变量有什么区别`@`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-09T14:31:17.840

这`@`使其成为[*用户定义*](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html) **的会话**变量。否则它将是[**本地范围**](http://dev.mysql.com/doc/refman/5.0/en/declare-local-variable.html)的变量（在[存储过程](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)中），您必须先访问`DEFINE`本地变量`SET`。如果您愿意，您还可以设置一个**全局** *系统*变量（使用`SET GLOBAL`or `SET @@global`）。以及带有or或的会话*系统*变量。`SET SESSION var``SET @@session var``SET @@var`

[有关文档的](http://dev.mysql.com/doc/refman/5.1/en/set-statement.html)`SET`更多详细信息：如果不存在修饰符，则更改会话变量（这就是为什么您的本地人首先在存储过程中的原因）。如果您设置了多个系统变量，则语句中最新的或修饰符用于后续未指定修饰符的变量。`SET``DEFINE``GLOBAL``SESSION`

更多（和一些很好的例子）在这里：

*   [MySQL：@variable 与变量。有什么不同？](https://stackoverflow.com/questions/1009954/mysql-variable-vs-variable-whats-the-difference)
*   [存储程序中的变量](http://dev.mysql.com/doc/refman/5.1/en/stored-program-variables.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T14:23:10.193

该符号用于用户定义的变量，如下所述：http: [//dev.mysql.com/doc/refman/5.0/en/user-variables.html](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)

# php - PHP mail() 函数无法正常工作

> ID：10518027
> 
> 赞同：0
> 
> 时间：2012-05-09T14:20:04.853
> 
> 标签：php, email

我使用 PHP mail() 函数从我的网站发送电子邮件。地址，标题等没有问题......该功能实际上发送电子邮件，但似乎它们无法到达某些特定地址。

例子：

1.  从 x@domain1.com 到 x@domain1.com,y@domain2.com 的邮件 - 在 x 收到，在 y 未收到
2.  从 x@domain1.com 到 y@domain2.com,x@domain1.com 的邮件 - 在 x 收到，在 y 未收到
3.  从 y@domain2.com 到 x@domain1.com,y@domain2.com 的邮件 - 在 x 收到，在 y 未收到
4.  从 y@domain2.com 到 y@domain2.com,x@domain1.com 的邮件 - x 收到，y 未收到

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:32:33.007

如果您正在发送邮件，并且它被一个人接收，而不是另一个人，那么问题几乎总是由于接收者端的问题。

我会说您的电子邮件很可能被卡在某处的垃圾邮件过滤器中。通过 PHP 发送的电子邮件看起来很像垃圾邮件发送者发送的电子邮件 - 您的`From:`标头与发送它的服务器不匹配，并且它已发送给多个人。你也有一个`Reply-to:`标题集吗？

如果您使用您的代码尽可能发送基本电子邮件，请查看是否可以通过 y；然后你可以开始添加额外的标题，直到你再次停止工作......

# c - 数组填入 C

> ID：10518028
> 
> 赞同：2
> 
> 时间：2012-05-09T14:20:13.543
> 
> 标签：c, arrays

我的程序中有很多数组都有这个问题，我不明白为什么。我想我错过了阵列理论的一些东西。

“某人”在我的数组末尾添加了某种字符字符，例如 ?^)(&%。例如，如果我有一个长度为 5 且带有“hello”的数组，那么它是满的，有时它会打印 hello?() /&%%. 如果它有 10 个元素并且我只使用 5 个元素，我可以理解它可能会发生，所以其他 5 个元素可能会得到一些随机值，但如果它已满，那么到底从哪里得到这些奇怪的值？

我通过在末尾手动添加字符'\0'来部分解决它。

例如，有时，当我尝试从另一个数组填充一个数组时，会出现这个问题（我从一个带有 fgets 的测试文件中读取一行，然后我必须提取单个单词）：

```
...
for(x=0;fgets(c,500,fileb);x++) { // read old local file        
int l=strlen(c);
    i=0;
    for (k=0;k<(l-34);k++) {
        if(c[k+33]!='\n') {
            userDatabaseLocalPath[k]=c[k+33];
        }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T14:22:21.240

C 中的字符串以值为 0 的字符终止，通常称为字符文字，即`'\0'`.

大小为 5 的字符数组不能容纳 string `hello`，因为终止符不适合。期望终止符的函数将被混淆。

要声明一个包含字符串的数组，最好使用的语法是：

```
char greeting[] = "hello"; 
```

这样，您无需指定长度（计算字符数），因为编译器会为您执行此操作。而且您也不需要包含终止符，它是自动添加的，因此上面将在内存中创建它：

```
 +-+-+-+-+-+--+
greeting: |h|e|l|l|o|\0|
          +-+-+-+-+-+--+ 
```

你说你有问题“从另一个更长的数组填充一个数组”，这听起来像一个最常被称为*字符串复制*的操作。由于字符串只是带有终止符的数组，因此您不能盲目地将较长的字符串复制到较短的字符串上，除非您知道有额外的空间。

鉴于上述情况，此代码将调用未定义的行为：

```
strcpy(greeting, "hi there!"); 
```

因为被复制到`greeting`数组中的字符串比数组的空间长。

这通常通过使用“已知足够大”的缓冲区来避免，或者添加手动跟踪所用空间的检查。有一个名为`strncpy()`which sort of do this 的函数，但我不建议使用它，因为它的确切语义相当奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:57:53.473

您正面临数组边界限制的问题。如果数组的大小为 5 ，那么第六个位置就没有必要`\0`安全了。因为它不是为您的数组保留/分配的内存。如果一段时间后，其他一些应用程序访问此内存并对其进行写入。您将丢失正在读取`\0`的字符串的结果。`helloI accessed this space`这就是你得到的。

# c++ - 如何在qt中获取您的进程名称？

> ID：10518030
> 
> 赞同：1
> 
> 时间：2012-05-09T14:20:21.977
> 
> 标签：c++, qt

如何在qt中获取您的（这个，这个应用程序当前正在运行的）进程名称？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T14:41:59.830

我认为您正在寻找[QCoreApplication::applicationPid()](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#applicationPid)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T15:12:28.180

如果您想获取可执行文件的名称（即通常保存在 中的字符串`argv[0]`），您*可以*通过读取[`QCoreApplication::arguments()`](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#arguments).

在 Unix 上，这仅在您`Q(Core)Application`正确初始化时才有效：

```
int main(int argc, char* argv[])
{
    QApplication app(argc, argv);
    //...
    return app.exec();
} 
```

**编辑：**[`QCoreApplication::applicationFilePath()`](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#applicationFilePath)实际上，调用获取可执行文件的完整路径可能会更好。鉴于其完整路径，您可以使用[`QFileInfo::fileName()`](http://qt-project.org/doc/qt-4.8/qfileinfo.html#fileName).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T14:50:55.317

不幸的是，**在 Qt 中没有这样的东西**。

您必须使用您正在使用的平台的本机 API 来检索此信息。

**Windows**：检查[`GetCurrentProcessId()`](http://msdn.microsoft.com/en-us/library/ms683180%28VS.85%29.aspx)以及[如何在 C++ 中获取进程名称](https://stackoverflow.com/q/4570174/176769)

**Linux**：[如何在 linux 中获取当前进程名称？](https://stackoverflow.com/questions/9097201/how-to-get-current-process-name-in-linux)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-12T21:52:23.560

使用 arg 第一部分

```
 QStringList args = QCoreApplication::instance()->arguments();
    args.takeFirst(); 
```

# node.js - 如何将 UDP 广播结果输出到 Node.js 中的 http 服务器？

> ID：10518035
> 
> 赞同：2
> 
> 时间：2012-05-09T14:20:41.447
> 
> 标签：node.js, udp, broadcast

我想重定向一个简单的 UDP 广播结果，其中包含来自不同设备的多个延迟（2 秒）消息，并将结果呈现为 http 响应。下面的代码运行良好，我可以通过 console.log 看到收集到的广播消息，但是 Web 响应是空的。如何正确实施？

```
var dgram = require("dgram");   
var http = require('http');

function broadcast(callback) {

    var data = '';

    var server = dgram.createSocket("udp4");

    server.on("message", function (message, rinfo) {
        data += message;    
    })

    server.bind(11000);

    var socket = dgram.createSocket("udp4");

    socket.bind();
    socket.setBroadcast(true);

    socket.send(Buffer([3]), 0, 1, 11001, '255.255.255.255', function(err, bytes) {     
        socket.close();
    });

    // dealy to collect all messages in 2 sec
    setTimeout(function () {
        callback(data);
    }, 2000);       
}

http.createServer(function (req, res) {

    res.writeHead(200, {'Content-Type': 'text/plain'});

    broadcast(function(data) {          
        res.write(data);
        console.log(data);          
    });

    res.end();

}).listen(6969, "0.0.0.0");

console.log('HTTP server running at http://0.0.0.0:6969/') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:36:03.000

你`res.end()`在发送数据之前打电话。进入`res.end()`你的回调。

```
http.createServer(function (req, res) {

    res.writeHead(200, {'Content-Type': 'text/plain'});

    broadcast(function(data) {          
        res.write(data);
        console.log(data);          
        res.end();
    });

}).listen(6969, "0.0.0.0"); 
```

# java - Java剪贴板不工作

> ID：10518036
> 
> 赞同：1
> 
> 时间：2012-05-09T14:20:41.567
> 
> 标签：java, linux, clipboard, openjdk

我试图将图像复制到剪贴板并使用以下代码段将其粘贴到 gimp 中：

```
BufferedImage bi = new BufferedImage(board.getAmount()*16,16,BufferedImage.TYPE_INT_ARGB);
Graphics2D g2d = bi.createGraphics();

Color[] colors = board.getColors();

for (int loop = 0; loop < board.getAmount(); loop++) {
    g2d.setColor(colors[loop]);
    g2d.fill(new Rectangle(16*loop,0,16,16));
}

ImageSelection is = new ImageSelection(bi);

Toolkit.getDefaultToolkit().getSystemClipboard().setContents(is, null); 
```

无论如何，理论上一切都应该很好。它没有给我任何错误，但是当我尝试粘贴图像时，什么也没有发生。

这是在两台不同的 linux 机器上完成的，但都没有工作。然后我来到学校并在 Windows 上使用相同的代码进行了尝试，并且成功了。

所以我想我真正的问题是它与open-jdk或java 1.7有关，还是linux的问题？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T21:37:12.987

我有同样的问题，发现这个工作：

```
final Clipboard clipboard = frame.getToolkit().getSystemSelection(); 
```

...然后继续将其用作常规剪贴板。“系统选择”允许您更改窗口管理器认为已选择的内容，因此“在剪贴板上”。

我不确定检测是否应该使用系统选择或系统剪贴板的最佳方法是什么，但看起来 Windows 将为 getSystemSelection 返回 null，因此可以用作测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:01:50.400

我认为下一页可能有用：[http](http://www.java2s.com/Code/Java/2D-Graphics-GUI/SendingImageObjectsthroughtheClipboard.htm) ://www.java2s.com/Code/Java/2D-Graphics-GUI/SendingImageObjectsthroughtheClipboard.htm 。

考虑以下几行将图像复制到剪贴板。

```
final Clipboard clipboard = frame.getToolkit().getSystemClipboard();
label.setTransferHandler(new ImageSelection());
...
TransferHandler handler = label.getTransferHandler();
handler.exportToClipboard(label, clipboard, TransferHandler.COPY); 
```

# php - 为什么我的 fopen() 会随机停止查找目标路径？

> ID：10518037
> 
> 赞同：0
> 
> 时间：2012-05-09T14:20:43.173
> 
> 标签：php, ftp, stream, http-status-code-404, fopen

几天来一直在尝试解决没有客户端更新程序的问题。它将我们 SVN 上的文件结构与客户端 ftps 进行比较，并在必要时进行更新/删除。我得出的结论是，一些文件没有得到更新，因为

```
 if ($stream = fopen($path)) 
```

突然间（经过多次成功尝试）失败了。我没有包含太多代码，因为我怀疑它会有所帮助。这一切都非常抽象且充满定义。

发生的情况是我将几个脚本上传到服务器，运行它们然后再次删除它们。这些脚本被 fopen() 调用。

但是由于某种原因，在对上传的脚本进行了一堆 fopen() 调用之后（在删除之前，我已经检查了这一点并确保脚本也成功上传）它突然抛出了这个错误

```
fopen(http://www.mysite.com/back_it_up.php) [function.fopen]: failed to open stream: HTTP request failed! HTTP/1.1 404 Not Found 
```

有人知道什么可能会干扰我的 fopen 吗？我已经尝试过 clearstatcache() 并检查了所有文件的权限（0755），并且已经对这个问题进行了相当多的研究。

# function - C++ ROT13 函数崩溃

> ID：10518044
> 
> 赞同：0
> 
> 时间：2012-05-09T14:21:21.260
> 
> 标签：function, visual-c++, rot13

但是，我不太擅长 C++；我的代码已编译，但该函数使我的程序崩溃，以下是代码的简短总结；它不完整，但是功能和调用在那里。

```
void rot13(char *ret, const char *in);

int main()
{
    char* str;
    MessageBox(NULL, _T("Test 1; Does get here!"), _T("Test 1"), MB_OK);
    rot13(str, "uryyb jbeyq!"); // hello world!
    /* Do stuff with char* str; */
    MessageBox(NULL, _T("Test 2; Doesn't get here!"), _T("Test 2"), MB_OK);
    return 0;
}

void rot13(char *ret, const char *in){
    for( int i=0; i = sizeof(in); i++ ){
        if(in[i] >= 'a' && in[i] <= 'm'){
            // Crashes Here;
            ret[i] += 13;
        }
        else if(in[i] > 'n' && in[i] <= 'z'){
            // Possibly crashing Here too?
            ret[i] -= 13;
        }
        else if(in[i] > 'A' && in[i] <= 'M'){
            // Possibly crashing Here too?
            ret[i] += 13;
        }
        else if(in[i] > 'N' && in[i] <= 'Z'){
            // Possibly crashing Here too?
            ret[i] -= 13;
        }
    }
} 
```

函数到达“测试 1；到达这里！” - 但是它没有到​​达“测试 2；没有到达这里！”

提前谢谢你。-尼克丹尼尔斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:27:30.353

`str`未初始化，它正在被取消引用`rot13`，导致崩溃。`str`在传递给之前分配内存`rot13()`（在堆栈上或动态）：

```
char str[1024] = ""; /* Large enough to hold string and initialised. */ 
```

里面的`for`循环`rot13()`也不正确（无限循环）：

```
for( int i=0; i = sizeof(in); i++ ){ 
```

改成：

```
for(size_t i = 0, len = strlen(in); i < len; i++ ){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:32:15.813

你有几个问题：

*   你永远不会为你的输出分配内存——你永远不会初始化变量`str`。这就是导致您崩溃的原因。

*   您的循环条件始终评估为真（= 分配并返回分配的值，== 测试相等性）。

*   您的循环条件用于`sizeof(in)`获取输入字符串的大小，但这实际上会给您指针的大小。改为使用`strlen`。

*   您的算法将返回字符串中的值增加或减少 13。您放置在输出字符串中的值与输出字符串中的初始值相差 +/- 13，此时它们应该基于输入字符串。

*   您的算法不处理“A”、“n”或“N”。

*   您的算法不处理任何非字母字符，但您使用的测试字符串包含两个。

# html - Chrome 中的渲染错误

> ID：10518045
> 
> 赞同：3
> 
> 时间：2012-05-09T14:21:25.930
> 
> 标签：html, google-chrome, animation, twitter-bootstrap

偶然发现了一种奇怪的仅限 Chrome 的选择框渲染行为：选择一个选项，在渲染期间 Chrome 会吐出似乎从选择框开始的行。

设置时：

```
-webkit-appearance: none; 
```

与

```
-webkit-appearance: menulist-button 
```

问题不复存在。

这是[JSFiddle 上的演示](http://jsfiddle.net/SA4eZ/)（使用 Chrome 18 测试）。

有没有人遇到过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:31:42.527

这是与 Google Chrome 18 相关的错误，已在版本 19 中进行了修补。

# mysql - MYSQL 查询速度（搜索与查询）

> ID：10518046
> 
> 赞同：0
> 
> 时间：2012-05-09T14:21:27.273
> 
> 标签：mysql, search

我的服务器还没有启动和运行，所以很遗憾我还不能测试，但我希望你能对我的一个问题有所了解。

因此，表 A 与表 B 具有反向的一对多关系，因此将表 B 的 ID 存储在表 A 中按 ID 搜索会更好，还是查询表 B 的所有结果会更好/更快它的表 A ID 等于我的表 A 的 ID？

基本上是搜索（根据 ID 搜索行）与查询（获取所有具有特定值的行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:29:30.320

只要 B 中包含 ID 的列是（外）键。它肯定更快。在数据库的列中存储非标量（即列表）通常是一个坏主意。

# file - 确保文件及时关闭

> ID：10518049
> 
> 赞同：9
> 
> 时间：2012-05-09T14:21:34.987
> 
> 标签：file, haskell, io, strict

我正在编写一个守护进程，它从一个小文件中读取一些内容，对其进行修改，然后将其写回同一个文件。在尝试写入之前，我需要确保每个文件在阅读后立即关闭。我还需要确保每个文件在写入后立即关闭，因为我可能偶尔会立即再次读取它。

我已经研究过使用二进制严格而不是二进制，但似乎只提供严格的 Get，而不是严格的 Put。System.IO.Strict 也有同样的问题。通过阅读二进制严格文档，我不确定它是否真的解决了我确保文件被及时关闭的问题。处理这个问题的最佳方法是什么？深度序列？

这是一个高度简化的示例，可以让您了解我的应用程序的结构。这个例子以

```
*** 例外：test.dat：openBinaryFile：资源繁忙（文件被锁定）
```

出于显而易见的原因。

```
import Data.Binary ( Binary, encode, decode )
import Data.ByteString.Lazy as B ( readFile, writeFile )
import Codec.Compression.GZip ( compress, decompress )

encodeAndCompressFile :: Binary a => FilePath -> a -> IO ()
encodeAndCompressFile f = B.writeFile f . compress . encode

decodeAndDecompressFile :: Binary a => FilePath -> IO a
decodeAndDecompressFile f = return . decode . decompress =<< B.readFile f

main = do
  let i = 0 :: Int
  encodeAndCompressFile "test.dat" i
  doStuff

doStuff = do
  i <- decodeAndDecompressFile "test.dat" :: IO Int
  print i
  encodeAndCompressFile "test.dat" (i+1)
  doStuff 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T14:55:31.640

所有对文件的“放置”或“写入”都是严格的。`writeFile`要求对所有 Haskell 数据进行评估以便将其放入磁盘的行为。

所以你需要关注的是**输入**的懒读。在上面的示例中，你们都懒惰地读取文件，然后懒惰地解码它。

相反，尝试严格阅读文件（例如使用严格的字节串），你会没事的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T20:08:05.333

考虑使用诸如[管道](http://hackage.haskell.org/package/conduit)、[管道](http://hackage.haskell.org/package/pipes)、[迭代器](http://hackage.haskell.org/package/iteratee)或[枚举](http://hackage.haskell.org/package/enumerator)器之类的包。在没有惰性 IO 的情况下，它们提供了惰性 IO 的许多好处（代码更简单，内存占用可能更小）。这是一个使用[导管](http://hackage.haskell.org/package/conduit)和[谷物](http://hackage.haskell.org/package/cereal)的示例：

```
import Data.Conduit
import Data.Conduit.Binary (sinkFile, sourceFile)
import Data.Conduit.Cereal (sinkGet, sourcePut)
import Data.Conduit.Zlib (gzip, ungzip)
import Data.Serialize (Serialize, get, put)

encodeAndCompressFile :: Serialize a => FilePath -> a -> IO ()
encodeAndCompressFile f v =
  runResourceT $ sourcePut (put v) $$ gzip =$ sinkFile f

decodeAndDecompressFile :: Serialize a => FilePath -> IO a
decodeAndDecompressFile f = do
  val <- runResourceT $ sourceFile f $$ ungzip =$ sinkGet get
  case val of
    Right v  -> return v
    Left err -> fail err

main = do
  let i = 0 :: Int
  encodeAndCompressFile "test.dat" i
  doStuff

doStuff = do
  i <- decodeAndDecompressFile "test.dat" :: IO Int
  print i
  encodeAndCompressFile "test.dat" (i+1)
  doStuff 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T01:17:06.400

使用管道等的替代方法。将只使用[`System.IO`](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/System-IO.html#g:21)，这将允许您根据 IO 执行顺序明确控制文件何时关闭。

您可以使用`openBinaryFile`后跟正常的读取操作（可能来自 的操作[`Data.ByteString`](http://hackage.haskell.org/packages/archive/bytestring/0.9.2.1/doc/html/Data-ByteString.html#v:hGetContents)）以及`hClose`完成后的操作，或者`withBinaryFile`，它会自动关闭文件（但要注意[此类问题](https://stackoverflow.com/questions/9406463/withfile-vs-openfile)）。

无论您使用哪种方法，正如 Don 所说，您可能希望将其读取为严格的字节串，然后使用[`fromChunks`](http://hackage.haskell.org/packages/archive/bytestring/0.9.2.1/doc/html/Data-ByteString-Lazy.html#v:fromChunks).

# c# - C# 如何在其属性的详细信息选项卡中更改 microsoft installer(msi) 内容创建的属性值？

> ID：10518051
> 
> 赞同：1
> 
> 时间：2012-05-09T14:21:38.293
> 
> 标签：c#, visual-studio-2008

我已经在 VS 2008 中为我的 Windows 窗体应用程序创建了一个设置和部署项目，但我无法在 microsoft 安装程序 (msi) 属性的详细信息选项卡中找到如何更改内容创建的属性值。

# r - 如何根据派系填充区域？

> ID：10518052
> 
> 赞同：4
> 
> 时间：2012-05-09T14:21:39.137
> 
> 标签：r, igraph

我有两个图的 3 个顶点的集团

```
g9<- graph(c(0,1,0,2,0,3,1,4,1,2,3,4,3,5,4,5,5,2),n=6,dir=FALSE) 
```

派系是：`a[0 1 2],b[3 4 5]`

如何在情节（g9）上填充这些派系？？？

我试过了

```
colorT<-gray.colors(2) 
polygon(c(x1a,x2a,x3a),c(y1a,y2a,y3a),col = colorT[1])
polygon(c(x1b,x2b,x3b),c(y1b,y2b,y3b),col = colorT[2]) 
```

问题是它与图 g9（坐标）不一致，区域应该在 g9 的图上。

我该怎么做？（如果你给我看一个例子会更好）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:26:04.717

`plot`igraph 0.6（开发版本，不是当前稳定版本）中的函数有一个名为的参数，`mark.groups`可让您指定应在布局上由填充多边形标记的顶点组。例如：

```
plot(g9, mark.groups=list(c(1,2,3), c(4,5,6))) 
```

请注意，这在 igraph 0.5.x 中不起作用；另请注意，我之所以写`1,2,3`而不是`0,1,2`因为 igraph 0.6 在 R 接口中使用基于 1 的顶点索引，这与 igraph 0.5.x 使用基于 0 的索引不同。

# java - 如何为 WebSphere 上的远程 EJB 调用启用 Kerberos 身份验证？

> ID：10518057
> 
> 赞同：14
> 
> 时间：2012-05-09T14:21:57.117
> 
> 标签：java, jakarta-ee, ejb, websphere, kerberos

由于经典的 JNDI 查找和 RMI-IIOP 方法调用，我的应用程序是一个独立的 Swing 客户端，它调用 EJB 无状态会话 bean。它作为 Java WebStart 应用程序启动。我的目标是通过 Windows 工作站、ActiveDirectory 和在 Linux 上运行的 WebSphere 服务器之间的 Kerberos SSO从`EJBContext`with方法中检索客户端用户的身份。`getCallerPrincipal`

[感谢 infocenter 文档，](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/tsec_authusers.html)我已经成功地将我的 WebSphere 单元配置为网络部署模式以支持 Kerberos 身份验证。

`krb5.conf`和文件都可以，`krb5.keytab`并且在 Linux和答案中都经过测试。`kinit``klist``wsadmin``$AdminTask validateKrbConfig``true`

[客户端设置](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/tsec_kerb_auth_client.html)仅引用 JAAS`login.config`文件以使用命令系统属性启用。我的直觉告诉我，这可能还不够。

但是现在，我找不到更多信息来完成测试用例：

*   必须如何设置 JNDI 初始上下文环境才能触发 Kerberos 协商？
*   如果服务器端有其他要求，比如用角色保护我的 EJB（例如 JBoss 不需要它）？

**更新**

由于没有运行 JavaEE 客户端容器`./launchClient`，我在我的 JNLP 中设置了读取所需的属性`sas.client.props`和 JAAS 登录配置：

```
<property name="java.security.auth.login.config" value="C:\temp\wsjaas_client.config"/>
<property name="com.ibm.CORBA.ConfigURL" value="C:\temp\sas.client.props"/> 
```

My`wsjaas_client.config`适用于 Oracle Java，因此它包含：

```
WSKRB5Login{
    com.sun.security.auth.module.Krb5LoginModule required
       debug=true useTicketCache=true doNotPrompt=true;
}; 
```

我的`sas.client.props`包含：

```
com.ibm.CORBA.securityEnabled=true
com.ibm.CORBA.authenticationTarget=KRB5
com.ibm.CORBA.loginSource=krb5Ccache
com.ibm.CORBA.loginUserid=
com.ibm.CORBA.loginPassword=
com.ibm.CORBA.krb5CcacheFile=
com.ibm.CORBA.krb5ConfigFile=C:\\temp\\krb5.conf 
```

目前，没有触发 Kerberos 身份验证：`WAS/myserver.mydomain.com`在我的 kerberos 缓存（来自 Windows 或 Linux 工作站）中没有针对 SPN 的 TGS，并且 JNDI 连接仍然是匿名建立的。

没有错误消息，没有警告，最后没有主体。我如何诊断出了什么问题或缺少什么？

**更新 2012/06/20**

这里有一些前进的步骤。在使用 Oracle Java 运行的应用程序 JNLP 中，我设置了以下属性以使用 IBM ORB 并启用完整的跟踪和调试信息：

```
<property name="org.omg.CORBA.ORBSingletonClass" value="com.ibm.rmi.corba.ORBSingleton"/>
<property name="org.omg.CORBA.ORBClass" value="com.ibm.CORBA.iiop.ORB"/>
<property name="traceSettingsFile" value="C:\temp\TraceSettings.properties"/> 
```

该文件`TraceSettings.properties`包含

```
traceFileName=c:\\temp\\traces.log
ORBRas=all=enabled
SASRas=all=enabled
com.ibm.*=all=enabled 
```

即使在阅读了[WebSphere 7 Security IBM RedBook](http://www.redbooks.ibm.com/redbooks/pdfs/sg247660.pdf)的大部分内容之后，我仍然无法从客户端获得 CSIv2 触发器 Kerberos 身份验证。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T22:13:59.387

根据[GSS-API/Kerberos v5 身份验证](http://docs.oracle.com/javase/jndi/tutorial/ldap/security/gssapi.html)指南，您必须在调用 JNDI 上下文之前对 Kerberos 进行身份验证。执行 Kerberos 配置后，您可以按如下方式配置初始上下文：

*   创建初始上下文时，将 Context.SECURITY_AUTHENTICATION（在 API 参考文档中）环境属性设置为字符串“GSSAPI”。

过去我处理过让 Java 客户端使用 Kerberos（尽管不是使用 JNDI）。这是我在客户端消除对 JVM 选项和本地配置文件的需要的方法（在客户端尝试进行身份验证之前调用此代码）：

```
public static void initKerberosConfig() 
{                 
        System.setProperty("javax.security.auth.useSubjectCredsOnly", "false"); 
        System.setProperty("java.security.krb5.kdc", "host.name:88"); 
        System.setProperty("java.security.krb5.realm", "REALM"); 
        System.setProperty("sun.security.krb5.debug", "false");                                 
        Configuration progConfig = getProgramaticLoginConfig(); 
        Configuration.setConfiguration(progConfig); 
} 

private static Configuration getProgramaticLoginConfig() 
{ 
        HashMap<String, String> options = new HashMap<String, String>(); 
        options.put("useTicketCache", "true"); 
        options.put("doNotPrompt", "true");                                                 
        AppConfigurationEntry krb5LoginModule = new AppConfigurationEntry("com.sun.security.auth.module.Krb5LoginModule", LoginModuleControlFlag.REQUIRED, options); 
        final AppConfigurationEntry[] aces = new AppConfigurationEntry[]{krb5LoginModule}; 
        Configuration progConfig = new Configuration() 
        { 
                @Override 
                public AppConfigurationEntry[] getAppConfigurationEntry(String arg0) 
                {                                 
                        return aces; 
                } 

        }; 
        return progConfig; 
} 
```

您可能需要根据您的上下文调整它（`java.security.krb5.kdc`并且`java.security.krb5.realm`不会是正确的） - 但我希望它有所帮助。转向`sun.security.krb5.debug` `true`大量的日志记录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T13:02:35.447

由于您没有在您遵循的步骤中特别提及，您是否按照您提供的客户端设置链接配置了您的 sas.client.props？

您可以查看 RedBook[在 WebSphere Application Server Environment](http://www.redbooks.ibm.com/abstracts/sg247771.html?Open)中实现 Kerberos，以获取有关如何进行此配置以及 Application Client 的剩余配置的示例。

第 13.5 节（13.5 配置 Java EE 应用程序客户端）提供了设置胖客户端运行时的示例，包括 sas.client.props 文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T06:50:23.420

总结一下上下文：多年来，我们的部署一直在生产中，IBM WebSphere 在 Linux 上运行，并且由于 Java WebStart 在 Sun JavaSE 6 上运行而部署了应用程序，其中包含 IBM ORB 并配置为无需任何身份验证即可连接。现在我们想要通过 RMI-IIOP 启用 Kerberos 身份验证和单点登录，自 WebSphere 6（我认为）就支持了。

现在这里有一些答案。

自 WebSphere 7 以来，引入了一个新概念来基于每个服务器配置安全方面：*安全域*。理论上，安全域中未更改的任何选项都继承自*全局安全*部分。

在测试 Kerberos 设置时，我们为我们的测试服务器创建了一个专用的安全域，以避免在单元中运行的其他服务器出现问题。

**但是**，即使在*全局安全*中启用了 Kerberos ，它也不会为配置有自己的*安全域*的服务器继承/启用。

一旦我们使用默认*全局安全性*运行我们的测试服务器，其中 Kerberos 选项可见并启用，那么 Kerberos 身份验证就开始与**IBM JavaSE 6**一起使用，该脚本从具有通常 ClassPath 和文档中声明的所有属性的**cmd bat 脚本**执行。

注意：JNDI`Context.SECURITY_AUTHENTICATION`选项从未设置。反编译后，IBM ORB 的唯一可用值是`none`，但还没有实现。`simple``strong``strong`

还有一点：根据生成的日志，IBM ORB 不能`file:/C:/temp/sas.client.config`作为`com.ibm.CORBA.ConfigURL`. 它**必须**是 URI 而不是文件路径。我们甚至遇到了解析`C`主机名的 DNS 查找失败！阿尔夫。所有文档示例都是基于 Unix 的，`file:/path/to/sas.client.config`因此我们在从 HTTP 服务器交付该文件之前进行了许多试验。

现在部署的**Java WebStart 部分**：

*   没有任何安全性且没有 Kerberos 设置的相同原始 JNLP 与 Oracle JavaSE 6 和 IBM Java 6 完美配合

*   启用 WebSphere 安全性并在 JNLP 中启用 Kerberos（并且只有该更改集），在 IBM Java 6 上运行的 IBM ORB 抱怨`NoClassDefFoundError`在 ClassPath 中（仍然/始终）可用的 ffdc 日志管理器实现。这听起来确实像是与 Java WebStart 安全 ClassLoader 层次结构的代码不兼容。

*   使用 Kerberos JNLP，在 Oracle JavaSE 6 上运行的 IBM ORB 似乎只是忽略了安全设置并像往常一样匿名连接。

所以第一步现在正在工作：IBM Java 6 从命令行启动，但调查尚未结束以实现我们的目标：在 Java WebStart 上下文中使用 Oracle JavaSE 6 的 Kerberos。

# php - mysql_fetch_array() 期望参数 1 是资源，在第 3 行的 C:\wamp\www\inc\prod_list.php 中给出的布尔值？

> ID：10518058
> 
> 赞同：-2
> 
> 时间：2012-05-09T14:21:58.373
> 
> 标签：php, mysql, select, while-loop

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

我收到错误“mysql_fetch_array() 期望参数 1 是资源，在第 3 行的 C:\wamp\www\inc\prod_list.php 中给出的布尔值”

这是我的代码：

```
<?php
$mysql = mysql_query("SELECT * FROM products ORDER BY id DESC;");
while($row = mysql_fetch_array($mysql)){ //line 3 here
    $id=$row["id"];
    $name=$row["name"];
    $dicription=$row["dicriprion"];
    $price=$row["price"];
    $img_alt=$row["img_alt"];
    $thumb_alt=$row["img_alt"];
    echo 'Data:<br/>
    '. $name.'<br/>
    '. $dicription.'<br/>
    '. $price=$row. '<br/>
    '. $img_alt=$row. '<br/>
    '. $thumb_alt=$row. '<br/>';
}
?> 
```

我基于旧站点的代码，除了 $row = mysql_fetch_array($data)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:26:31.197

从[文档](http://php.net/manual/en/function.mysql-query.php)中：

> `mysql_query`成功或`FALSE`错误时返回资源。

您所看到的事实`mysql_fetch_array() expects parameter 1 to be resource, boolean given`表明对`mysql_query`上述的调用已返回`FALSE`

也来自相同的文档：

> 查询字符串不应以分号结尾

...所以尝试从查询末尾删除分号。如果不是这样，请尝试添加对[mysql_error](http://uk.php.net/mysql_error)的调用以检查发生了什么错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:28:07.887

此问题的最可能原因是[`mysql_query`](http://php.net/manual/en/function.mysql-query.php)返回 false。确保指定的查询有效（检查连接是否有效，选择了正确的数据库等）并检查输出`mysql_eror`以查看发生了什么错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:33:54.883

您可以添加一个`die`替代方案：

```
$mysql = mysql_query("SELECT * FROM products ORDER BY id DESC;") 
    or die("error: " . mysql_error()); 
```

此外，我发现更好的做法是指定您在查询中选择的所有字段，这样您就不会因为意外的字段名称“大小写”而导致错误：

```
$mysql = mysql_query("SELECT id,name,dicriprion,price,img_alt FROM products ORDER BY id DESC;") 
    or die("error: " . mysql_error()); 
```

# sql - 按案例字段分组

> ID：10518061
> 
> 赞同：2
> 
> 时间：2012-05-09T14:21:59.913
> 
> 标签：sql, group-by, case, sql-server-2005-express

所以我对 SQL 很陌生，到目前为止几乎完全是自学的。我目前正在尝试对员工的等级进行一些分析，我正在尝试将大约 15 个以上的等级“重新分类”为 4 个等级类别。然后我想按这些类别进行分组，但遇到了一些麻烦（SQL for Dummies 似乎已经失去动力，或者我找不到答案......）。

无论如何，我目前的查询如下。这给出了 group by 必须包含一个不是外部引用的列的错误，我理解，但不知道如何解决。

编辑：我的目标是得到一个结果，它给了我以下信息：

```
RANK                      Hours etc
Equity Partner            12
Fixed Share Partner       20
Associate                 50
Trainee                   25
Other                     15 
```

任何帮助将不胜感激马特

```
declare @startperiod as integer
declare @endperiod as integer
declare @offc as integer
declare @dept as varchar(3)

select @startperiod = '201101'
select @endperiod = '201112'
select @offc = '55'

select 
    case k.rank_code 
                when '10'   then 'Equity Partner'
                when '110'  then 'Fixed Share Partner'
                when '130'  then 'Associate'
                when '131'  then 'Associate' 
                When '132'  then 'Associate'
                when '133'  then 'Associate'
                when '134'  then 'Associate'
                when '135'  then 'Associate'
                when '136'  then 'Associate'
                when '137'  then 'Associate'
                when '141'  then 'Associate'
                when '142'  then 'Associate'
                when '341'  then 'Trainee'
                when '342'  then 'Trainee'
                else 'Other'
end as 'Rank Desc',
sum(b.base_hrs) as 'Base Hrs',sum(b.tobill_hrs) as 'ToBill Hrs',sum(b.billed_hrs) as 'Billed Hrs', 
sum(b.base_amt) as 'Base Amt',sum(b.tobill_amt) as 'ToBill Amt',sum(b.billed_amt) as 'Billed Amt'

from blh_billed_fees b, tbl_rank k, tbm_persnl p
where b.tk_empl_uno = p.empl_uno
and p.rank_code = k.rank_code

group by 'Rank Desc' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:23:26.520

您不能使用*当前*选择中定义的列进行分组。

使它选择一个子查询，然后您可以使用列 RankDesc 来进行分组。

* * *

最终查询应该是这样的：

```
select 
aux.RankDesc as 'Rank Desc',
sum(aux.base_hrs) as 'Base Hrs',
sum(aux.tobill_hrs) as 'ToBill Hrs',
sum(aux.billed_hrs) as 'Billed Hrs', 
sum(aux.base_amt) as 'Base Amt',
sum(aux.tobill_amt) as 'ToBill Amt',
sum(aux.billed_amt) as 'Billed Amt'

from
    (select 
        case k.rank_code 
                    when '10'   then 'Equity Partner'
                    when '110'  then 'Fixed Share Partner'
                    when '130'  then 'Associate'
                    when '131'  then 'Associate' 
                    When '132'  then 'Associate'
                    when '133'  then 'Associate'
                    when '134'  then 'Associate'
                    when '135'  then 'Associate'
                    when '136'  then 'Associate'
                    when '137'  then 'Associate'
                    when '141'  then 'Associate'
                    when '142'  then 'Associate'
                    when '341'  then 'Trainee'
                    when '342'  then 'Trainee'
                    else 'Other'
    end as 'RankDesc',
    b.base_hrs,
    b.tobill_hrs,
    b.billed_hrs, 
    b.base_amt,
    b.tobill_amt,
    b.billed_amt

    from blh_billed_fees b, tbl_rank k, tbm_persnl p
    where b.tk_empl_uno = p.empl_uno
    and p.rank_code = k.rank_code) aux
group by aux.RankDesc 
```

* * *

就像@PhilipKelley 所说，您还可以将案例按部分包含在分组中，这样您就不需要使用子查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:28:23.410

要么将其设为子查询，然后按其结果字段进行分组，要么（如果它足够可重用，可能会更好）创建一个视图并按其字段分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:33:38.670

带有 case 的 select 必须是子查询，这使得它在 paarent 执行时显示为一个表，然后可以轻松地对其应用分组。

# android - 表面视图绘图线程 - 忙循环？

> ID：10518064
> 
> 赞同：0
> 
> 时间：2012-05-09T14:22:12.523
> 
> 标签：android

所有使用 SurfaceView 的示例似乎都使用了执行繁忙循环的 run 方法。这是一种有效的方法吗？我能看到的所有代码都遵循月球着陆器示例中的这个范例。但是，创建繁忙的 while 循环似乎是编写多线程应用程序的一种奇怪方式。绘图代码不应该等待绘图命令队列或类似的东西。我会以这种方式实现它，但是我看到的代码量如下所示，这让我提出了一个问题……在 SurfaceView 上绘制线程的最佳语义是什么。

```
public void run() {
            while (mRun) {
                Canvas c = null;
                try {
                    c = mSurfaceHolder.lockCanvas(null);
                    synchronized (mSurfaceHolder) {
                        // DO DRAWING HERE
                    }
                } finally {

                    if (c != null) {
                        mSurfaceHolder.unlockCanvasAndPost(c);
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:57:20.143

我不知道在这种情况下什么是最佳实践，但我已经成功地在我的应用程序中使用了该示例的略微修改版本。由于我响应触摸输入（而不是不断更新画布），我添加了一个标志来测试是否需要完成绘图。我还在每次刷新后添加了睡眠以限制系统负载。这是我在 try 块中的代码：

```
 if(mPanel.needsRefresh()) {
                c = mSurfaceHolder.lockCanvas(null);
                synchronized (mSurfaceHolder) {
                    mPanel.onDraw(c);
                }
            } else {
                SystemClock.sleep(10);
            } 
```

# sql - 计算表中的出现次数

> ID：10518066
> 
> 赞同：2
> 
> 时间：2012-05-09T14:22:16.117
> 
> 标签：sql, ms-access, vba, ms-access-2007

假设我想计算一列中字符串中包含的名称的出现总数，并在其旁边的新列中显示该名称的所有出现旁边的总数。例如，如果我有：

```
Name  | Home Address | Special ID 
==================================
Frank | 152414       | aTRF342
Jane  | 4342342      | rRFC432
Mary  | 423432       | xTRF353
James | 32111111     | tLZQ399
May   |    4302443   | 3TRF322 
```

我如何计算“TRF”、“RFC”或“LZQ”等特殊标签的出现次数，所以表格如下所示：

```
Name  | Home Address | Special ID  | Occurrences
================================================
Frank | 152414       | aTRF342     |     3
Jane  | 4342342      | rRFC432     |     1
Mary  | 423432       | xTRF353     |     3
James | 32111111     | tLZQ399     |     1
May   |    4302443   | 3TRF322     |     3 
```

当前使用 Access 2007。这甚至可以使用 SQL 查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:39:21.203

你可以这样做：

```
select Name, [Home Address], [Special ID], 
       (select count(*) from [your table] where [Special ID] = RemoveNonAlphaCharacters([Special ID]) ) as Occurrences
from [your table] 
```

辅助功能（从此[链接](https://stackoverflow.com/questions/1007697/how-to-strip-all-non-alphabetic-characters-from-string-in-sql-server)获得）：

```
Create Function [dbo].[RemoveNonAlphaCharacters](@Temp VarChar(1000))
Returns VarChar(1000)
AS
Begin

    While PatIndex('%[^a-z]%', @Temp) > 0
        Set @Temp = Stuff(@Temp, PatIndex('%[^a-z]%', @Temp), 1, '')

    Return @Temp
End 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:47:54.133

假设您的第一个表称为“table_with_string”

以下代码将根据特殊 ID 列中字符串的前 3 个字符显示发生情况。因为不清楚您传递字符串以匹配的确切程度

```
select tws.Name,tws.HomeAddress,tws.SpecialID,str_count.Occurrences from    
table_with_string tws
left join
(select SpecialID,count(*) from table_with_string where specialID like(substring  
(specialid,0,3))
group by specialId) as str_count(id,Occurrences)
on str_count.id=tws.SpecialID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:46:50.177

我建议将其明确地作为一个连接来执行，这样您就可以清楚它是如何工作的：

```
select tws.Name, tws.HomeAddress, tws.SpecialID, str_count.Occurrences
from table_with_string tws 
join
(
  select substring(spcecialid, 2, 3) as code, count(*) as Occurrences
  from table_with_string tws
  group by substring(spcecialid, 2, 3)
) s
  on s.code = substring(tws.spcecialid, 2, 3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T16:38:10.197

使用 Access 2007，我将您的示例数据存储在名为*tblUser1384831*的表中。下面的查询返回此结果集。

```
Name  Home Address Special ID special_tag Occurrences
----  ------------ ---------- ----------- -----------
Frank 152414       aTRF342    TRF                   3
Jane  4342342      rRFC432    RFC                   1
Mary  423432       xTRF353    TRF                   3
James 32111111     tLZQ399    LZQ                   1
May   4302443      3TRF322    TRF                   3 
```

尽管您的问题有一个 vba 标记，但您不需要为此使用 VBA 过程。您可以使用 SQL 和`Mid()`函数来完成。

```
SELECT
    base.[Name],
    base.[Home Address],
    base.[Special ID],
    base.special_tag,
    tag_count.Occurrences
FROM
        (
            SELECT
                [Name],
                [Home Address],
                [Special ID],
                Mid([Special ID],2,3) AS special_tag
            FROM tblUser1384831
        ) AS base
    INNER JOIN
        (
            SELECT
                Mid([Special ID],2,3) AS special_tag,
                Count(*) AS Occurrences
            FROM tblUser1384831
            GROUP BY Mid([Special ID],2,3)
        ) AS tag_count
    ON base.special_tag = tag_count.special_tag; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T14:33:25.170

您将不得不`GROUP BY`使用`Special ID`. [在 MS Access 中，您可以在此处](https://stackoverflow.com/questions/809120/is-there-an-equivalent-to-the-substring-function-in-ms-access-sql)阅读有关如何计算子字符串的信息。

您的问题是`Special ID`列中的数据不遵循标准模式，该模式很容易通过`substring`函数提取。您可能需要使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)来提取此类值，然后将其`GROUP BY`应用于它们。

使用 MSSQL、Oracle、PostgreSQL，您将能够声明一个存储过程（MS SQL Server 中的[示例 CLR 函数）来为您执行此操作。](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)不确定 MS Access。

# jquery - 视频不通过 video.js 播放

> ID：10518068
> 
> 赞同：0
> 
> 时间：2012-05-09T14:22:22.820
> 
> 标签：jquery, wordpress, video

嗨，我在主页上设置了视频介绍。

www.blazepictures.co.uk

您将能够看到的默认示例视频可以正常播放，但是当我使用自己的视频 URL 时，播放不会加载...

我正在使用 WordPress 插件版本并使用短代码。我只是删除示例 URL 并替换为我的。

此外，当我将视频 URL 粘贴到地址栏中时，浏览器可以正常播放。所以我不确定这里发生了什么。

我的视频文件： http: [//www.blazepictures.co.uk/wp-content/uploads/video-intro/](http://www.blazepictures.co.uk/wp-content/uploads/video-intro/)

这是我正在使用的默认短代码：

```
[video mp4="http://video-js.zencoder.com/oceans-clip.mp4" ogg="http://video-js.zencoder.com/oceans-clip.ogg" webm="http://video-js.zencoder.com/oceans-clip.webm" poster="http://video-js.zencoder.com/oceans-clip.png" preload="auto" autoplay="true" width="640" height="264" id="movie-id" class="alignleft"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:27:27.503

使用 VIDEOJS 在标签中引用 src 时，您必须使用完整的 URL，而不是本地视频内容的 / 或相对 URL。

代替：

```
<source src="/file.mp4" type='video/mp4' /> 
```

利用：

```
<source src="http://www.blazepictures.co.uk/wp-content/uploads/video-intro/file.mp4" type='video/mp4' /> 
```

Video.js 从远程 CDN 服务器拉入一个 .swf 文件。.swf 然后从其域（CDN）中获取 /file.mp4 相对文件，这会导致失败。

# drupal - 如何配置或修改 Drupal 以完全删除 Drupal 的登录，即使对于管理员也是如此？

> ID：10518073
> 
> 赞同：0
> 
> 时间：2012-05-09T14:22:42.370
> 
> 标签：drupal, login

这是背景。

我需要在两台服务器上部署相同的 Drupal 网站。第一个是用于互联网访问，我们不希望有任何 Drupal 登录，即使是管理员也不行。

第二台服务器在我们组织的内部网络上，这台服务器上的 Drupal 网站只是普通的。

在第一台服务器上配置/修改 Drupal 的优雅方法是什么？

对我来说，对于互联网 Drupal，http://myorg.com/user 之类的链接[仍然](http://myorg.com/user)有效，但应该没有表格是可以接受的。如果我想这样做，我需要修改哪些文件以及如何修改？

另一种解决方案可能是无需对 Drupal 进行任何配置/修改，第一台服务器可以进行重定向，并且任何[http://myorg.com/user](http://myorg.com/user)都将被重定向到另一个页面。这是可行的吗？如何？

我使用的是 Drupal 7，服务器环境是 Unix。

非常感谢您的任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:09:01.913

Drupal 中的任何路径都可以通过[hook_menu_alter](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_menu_alter/7)进行更改。

简单地创建您的自定义模块，使用钩子，并设置您想要的路径（用户、用户/登录）以拒绝访问。

您可以将用户配置为禁止注册以禁用用户/注册。

这些项目是一个数组，因此您可以简单地添加一个属性“访问回调”并将其设置为 FALSE。

```
function mymodule_menu_alter(&$items) {
  //disable the user login paths
  $items['user']['access callback'] = FALSE;
  $items['user/login']['access callback'] = FALSE;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:36:16.187

Bright Plum 建议的替代方法是您可以修改 .htaccess。禁止所有 /admin 路径和 /user 路径。

不过Bright Plum回答的方式可能会好一点。因为它允许您在两台服务器（使用不同的数据库）上拥有相同的代码，在第一个服务器上启用您的模块，而在第二台服务器上您从不启用它）。

希望有帮助。

# python - Django 查询集按 ISO 周数过滤

> ID：10518074
> 
> 赞同：12
> 
> 时间：2012-05-09T14:22:46.203
> 
> 标签：python, django, date, filter, iso

我有一个模型，其中包含`datefield`. 我正在尝试获取包含当前周（从星期一开始）的模型的查询集。

因此，由于 Django`datefield`包含简单的`datetime.date`模型，我假设使用`.isocalendar()`. 从逻辑上讲，这正是我想要的，没有在当前工作日进行额外的比较和计算。

所以我想做的基本上是强制`.filter`声明在这个逻辑中表现：

```
if model.date.isocalendar()[2] == datetime.date.today().isocalendar()[2]
    ... 
```

但是如何在过滤器语句中编写它？ `.filter(model__date__isocalendar=datetime.date.today().isocalendar())`会给出错误的结果（与今天而不是本周相比）。

作为挖掘真正的[http://docs.python.org/library/datetime.html](http://docs.python.org/library/datetime.html)我没有注意到任何其他工作日选项......

**文档中的注释：**

> date.isocalendar() 返回一个三元组，（ISO 年、ISO 周数、ISO 工作日）。

**更新：**

虽然我不喜欢使用范围的解决方案，但它是最好的选择。但是在我的情况下，我创建了一个标记一周开始的变量，并且看起来更大或相等的值，因为如果我正在寻找本周的匹配项。如果给出周数，则需要两端。

```
today = datetime.date.today()
monday = today - datetime.timedelta(days=today.weekday())

... \
.filter(date__gte=monday) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T14:35:06.847

你将无法做到这一点。请记住，这不仅仅是 Python 支持什么的问题，Django 必须将过滤器传递给数据库，而数据库不支持如此复杂的日期计算。但是，您*可以*将`__range`与开始日期和结束日期一起使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-27T08:49:28.397

`Extract`比使用Amit 在他的回答中提到的函数更简单的是使用 Django 1.11 中添加的[`__week`字段查找](https://docs.djangoproject.com/en/1.11/ref/models/querysets/#week)，因此您可以简单地执行以下操作：

```
.filter(model__date__week=datetime.date.today().isocalendar()[1]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-26T16:00:16.470

ExtractWeek 已在 Django 1.11 中引入，用于基于等周数进行过滤。

对于 Django 1.10 及更低版本，以下解决方案适用于在 postgres 数据库上按 iso 编号周过滤：

```
from django.db.models.functions import Extract
from django.db import models
@models.DateTimeField.register_lookup
class ExtractWeek(Extract):
    lookup_name = 'week' 
```

现在进行如下查询

```
queryset.annotate(week=ExtractWeek('date'))\
            .filter(week=week_number) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-01T15:03:46.650

（这个答案应该只适用于 postgres，但可能适用于其他数据库。）

这个问题的一个快速而优雅的解决方案是定义这两个[自定义转换](https://docs.djangoproject.com/en/1.9/howto/custom-lookups/#a-simple-transformer-example)器：

```
from django.db import models
from django.db.models.lookups import DateTransform

@models.DateTimeField.register_lookup
class WeekTransform(DateTransform):
    lookup_name = 'week'

@models.DateTimeField.register_lookup
class ISOYearTransform(DateTransform):
    lookup_name = 'isoyear' 
```

现在您可以像这样按周查询：

```
from django.utils.timezone import now
year, week, _ = now().isocalendar()

MyModel.objects.filter(created__isoyear=year, created__week=week) 
```

在幕后，Django`DateTransform`对象使用了 postgres[`EXTRACT`函数](http://www.postgresql.org/docs/current/static/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)，它支持`week`和`isoyear`.

# javascript - 级联下拉删除以前选择的

> ID：10518078
> 
> 赞同：1
> 
> 时间：2012-05-09T14:23:01.557
> 
> 标签：javascript, jquery

我想在 html 中有 7 个下拉框。它们都将填充相同的数据。我想要做的是，当第一个下拉列表被选中时，它会从下一个下拉列表中删除选定的项目。所以，如果你有数字：A,B,C,D,E,F,G,H,I 在一个下拉列表中如果我在第一个下拉列表中选择 B 然后在下一个下拉列表中它应该只显示 A,C,D ,E,F,G,H,I 等最多 7 个下拉菜单。我不知道在 JavaScript 或 JQuery 中解决这个问题的最佳方法是什么。提前感谢您的帮助。

```
<table>
    Selected Options: <div id="123"></div>
      <tr>
         <td class="assessmentHeader" align="left"><U> Diagnosis: -  </U><br/> <!---Added code 88898 Created 7 dropdowns for Diagnosis  05/04/2012--->
           <!---<font style="visibility:hidden"><textarea name="diagnosis" rows="2" cols="5" disabled="disabled">NULL</textarea></font><br/>--->                                                                              
           Primary  : <select name="Primary" onchange="selected(this)">
           <option value=""></option>
           <cfloop query="DCheck">
           <option value="#DCheck.cDescription#" >#DCheck.cDescription#</option></cfloop>                                                      
           </select> &nbsp;&nbsp; <br/> <br/>
           Secondary: <select name="Secondary" onchange="selected(this)">
           <option value=""></option>
           <cfloop query="DCheck">
           <option value="#DCheck.cDescription#">#DCheck.cDescription#</option> </cfloop>
                                                                                </select>&nbsp;&nbsp;<br><br />
           Third &nbsp;   : <select name="Third" onchange="selected(this)">
           <option value=""></option>
           <cfloop query="DCheck">
           <option value="#DCheck.cDescription#">#DCheck.cDescription#</option></cfloop>
                                                                                </select>&nbsp;&nbsp;<br><br/>
            Fourth   : <select name="Fourth" onchange="selected(this)">
            <option value=""></option>
            <cfloop query="DCheck">
            <option value="#DCheck.cDescription#">#DCheck.cDescription#</option></cfloop>
                                                                                </select>&nbsp;&nbsp;<br><br/>
            Fifth  &nbsp; : <select name="Fifth" onchange="selected(this)">
            <option value=""></option>
            <cfloop query="DCheck">
            <option value="#DCheck.cDescription#">#DCheck.cDescription#</option></cfloop>
                                                                                </select>&nbsp;&nbsp;<br><br/>
            Sixth &nbsp; : <select name="Sixth" onchange="selected(this)">
            <option value=""></option>
            <cfloop query="DCheck">
            <option value="#DCheck.cDescription#">#DCheck.cDescription#</option></cfloop>
                                                                                </select>&nbsp;&nbsp;<br><br/>
            Seventh  : <select name="Seventh" onchange="selected(this)">
            <option value=""></option>
            <cfloop query="DCheck">
            <option value="#DCheck.cDescription#">#DCheck.cDescription#</option></cfloop>
                                                                                </select>&nbsp;&nbsp;<br><br />
          </td>                    
         </tr>
      </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:42:08.677

[http://jsfiddle.net/iambriansreed/AyxSE/](http://jsfiddle.net/iambriansreed/AyxSE/)

这适用于无限`select`标签。

jQuery

```
$('#select-group select').change(function(){

    var values = [];
    $('#select-group select').each(function(){
        if(this.value.length > 0)
            values.push(this.value);
    });

   $('#select-group select optgroup').each(function(){
        $(this).after('<option>'+          $(this).attr('label')+'</option>').remove();
    });

    $('#select-group select option').each(function(){   
        if($.inArray(this.value, values) > -1 &&
           !this.selected)                
        $(this).after('<optgroup label="'+this.value+'"></optgroup>').remove();
    });

});​ 
```

HTML

```
<div id="select-group">
    <select>
        <option value="">Select a ...</option>
        <option>A</option>
        <option>B</option>
        <option>C</option>
        <option>D</option>
        <option>E</option>
        <option>F</option>
        <option>G</option>
    </select>
    <select>
        <option value="">Select a ...</option>
        <option>A</option>
        <option>B</option>
        <option>C</option>
        <option>D</option>
        <option>E</option>
        <option>F</option>
        <option>G</option>
    </select>

</div>​ 
```

# java - 你能给我推荐一本面向 Java 开发人员的 Android Book 吗？

> ID：10518080
> 
> 赞同：-2
> 
> 时间：2012-05-09T14:23:03.720
> 
> 标签：java, android

你们中的任何人都可以为具有Java背景的开发人员推荐一本好的Android书籍。我看过这本书，即

1 - Zigurd Mednieks、Laird Dornin、G. Blake Meike 和 Masumi Nakamura 编写的 Android 编程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:25:46.300

我会向你推荐[官方网站](http://developer.android.com/index.html)。如果您想离线阅读，可以使用 SDK 工具下载文档。

![在此处输入图像描述](../Images/30a7f10c37e3fbd67609597e05624040.png)

请参阅列表中的第 3 项。

还可以看看[Professional Android 2 Application Development](https://rads.stackoverflow.com/amzn/click/com/0470565527)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:25:28.793

是的，我强烈建议您订阅 Mark Murphy 的书籍一年！

[公共软件](http://commonsware.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:26:19.430

1.  安卓食谱
2.  Android无线应用开发

但我发现 android 的官方在线文档和教程（开发指南）也很有帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T14:27:37.980

既然您已经了解 java，那么 API-demos 将是一个好的开始。[链接在这里](http://developer.android.com/resources/samples/ApiDemos/index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T14:46:06.533

我使用过“Pro Android 3”，虽然它并不完美，但它实际上对我入门很有帮助。对于更高级的问题，我会访问 Android 开发网站或 stackoverflow.com。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T15:46:15.837

如果您已经了解 Java，我会推荐一种基于实践的方法来学习 Android。

如果您使用的是 Eclipse，那么您可以使用 Android API 演示项目创建一个新项目。转到文件->新建项目->Android API 演示

通过这种方式，您可以查看代码并进行小的更改，在虚拟 android 设备上编译和运行代码。它涵盖了许多主题，例如片段、布局、所有不同的小部件等。

更多信息如下：

[http://developer.android.com/resources/samples/ApiDemos/index.html](http://developer.android.com/resources/samples/ApiDemos/index.html)

在寻找其他示例时，我也将其用作参考。

[http://developer.android.com/resources/index.html](http://developer.android.com/resources/index.html)

# ios - 如何将 YUV 帧从 FFmpeg 传递到 OpenGL ES？

> ID：10518082
> 
> 赞同：1
> 
> 时间：2012-05-09T14:23:10.210
> 
> 标签：ios, opengl-es, ffmpeg, video-processing

有没有人尝试使用 FFmpeg 解码视频帧，然后在 iOS 5.0 的 OpenGL ES 中显示它？

我试图从 Apple 修改 GLCameraRipple 示例，但我总是从`CVOpenGLESTextureCacheCreateTextureFromImage()`.

这是我的解码代码：

```
...

convertCtx = sws_getContext(codecCtx->width, codecCtx->height, codecCtx->pix_fmt, 
                            codecCtx->width, codecCtx->height, PIX_FMT_NV12, 
                            SWS_FAST_BILINEAR, NULL, NULL, NULL);

srcFrame = avcodec_alloc_frame();
dstFrame = avcodec_alloc_frame();
width = codecCtx->width;
height = codecCtx->height;

outputBufLength = avpicture_get_size(PIX_FMT_NV12, width, height);
outputBuf = malloc(outputBufLength);

avpicture_fill((AVPicture *)dstFrame, outputBuf, PIX_FMT_NV12, width, height);

...

avcodec_decode_video2(codecCtx, srcFrame, &gotFrame, pkt);

...

sws_scale(convertCtx, 
          (const uint8_t**)srcFrame->data, srcFrame->linesize, 
          0, codecCtx->height, 
          dstFrame->data, dstFrame->linesize); 
```

这是我的显示代码：

```
 CVPixelBufferRef pixelBuffer;
    CVPixelBufferCreateWithBytes(kCFAllocatorDefault, [videoDecoder width], [videoDecoder height], 
                                 kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange, 
                                 dstFrame->data[0], dstFrame->linesize[0], 0, 0, 0, 
                                 &pixelBuffer);

    ...

CVReturn err;
int textureWidth = CVPixelBufferGetWidth(pixelBuffer);
int textureHeight = CVPixelBufferGetHeight(pixelBuffer);

if (!videoTextureCache)
{
    NSLog(@"No video Texture cache");
}

CVPixelBufferLockBaseAddress(pixelBuffer, 0);

// Y-plane
err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, 
                                                   videoTextureCache, 
                                                   pixelBuffer, 
                                                   NULL, 
                                                   GL_TEXTURE_2D, 
                                                   GL_RED_EXT, 
                                                   textureWidth, 
                                                   textureHeight,
                                                   GL_RED_EXT, 
                                                   GL_UNSIGNED_BYTE, 
                                                   0, 
                                                   &lumaTexture);
if (err)
{
    NSLog(@"Error at CVOpenGLESTextureCacheCreateTextureFromImage %d", err);
}

glBindTexture(CVOpenGLESTextureGetTarget(lumaTexture), CVOpenGLESTextureGetName(lumaTexture));
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

// UV-plane
err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, 
                                                   videoTextureCache, 
                                                   pixelBuffer, 
                                                   NULL, 
                                                   GL_TEXTURE_2D, 
                                                   GL_RG_EXT, 
                                                   textureWidth / 2, 
                                                   textureHeight / 2,
                                                   GL_RG_EXT, 
                                                   GL_UNSIGNED_BYTE, 
                                                   1, 
                                                   &chromaTexture);
if (err)
{
    NSLog(@"Error at CVOpenGLESTextureCacheCreateTextureFromImage %d", err);
}

glBindTexture(CVOpenGLESTextureGetTarget(chromaTexture), CVOpenGLESTextureGetName(chromaTexture));
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

CVPixelBufferUnlockBaseAddress(pixelBuffer, 0); 
```

我知道代码不完整，但应该足以理解我的问题。

有人可以帮助我或向我展示这种方法的一些工作示例吗？

# google-apps-script - 使用谷歌应用脚 本从电子表格数据中检索行

> ID：10518084
> 
> 赞同：26
> 
> 时间：2012-05-09T14:23:12.357
> 
> 标签：google-apps-script, spreadsheet, google-spreadsheet-api

我正在使用 Google 应用脚本将表单数据写入电子表格。现在我想从 Excel 中获取与条件匹配的值（例如，按日期、用户名过滤）并使用应用脚本显示它们。

我的电子表格有

```
+-------------+-----------+----------------------+
| Date        | Username  | Comment              |
+-------------+-----------+----------------------+
| 2012-05-02  | palani    | My first comment     |
| 2012-05-02  | raja      | My second comment    |
| 2012-05-03  | palani    | My third comment     |
| 2012-05-03  | raja      | My fourth comment    |
+-------------+-----------+----------------------+ 
```

现在我想过滤`2012-05-02`日期和`raja`用户名的数据，并使用 app-script（作为 Web 服务运行）中的标签显示它们。

我所有的搜索都返回解决方案[`SpreadsheetApp.getActiveSheet().getDataRange();`](https://developers.google.com/apps-script/class_sheet#getDataRange)，我认为这不是在工作表中显示 1000 多行中的一条记录的优化方式。

**编辑**

现在，我`.getValues()`只使用。此处显示的数据仅供参考；我的真实工作表现在有 15 列和 5000 多行。最终它将增长到数百万，因为这是一个时间表应用程序。我想知道`getValues()`过滤行还有其他方法吗？

在 tmp 单元格上应用`=Filter`公式也将是一个问题，因为脚本可以由多个人同时使用。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-10T09:18:43.433

最简单的方法，也是我知道的一种方法是：
使用 Array 获取值

```
var data = SpreadsheetApp.getActiveSheet().getDataRange().getValues(); 
```

然后做一个循环

```
for (i in data) { 
```

在此循环中检查日期 ( `data[i][0]`) 是否等于您要查找的日期，以及名称 ( `data[i][1]`) 是否也等于您要查找的日期。并将其推送到数组

```
var labels=new Array;
label.push( [data[i][0], data[i][1], data[i][2]] ); 
```

然后将所有数据都放在这个数组中，您可以使用 for 循环使用标签填充 panen Ui

```
for (i in labels) { ... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T23:53:39.027

好吧，您可以考虑使用一个单元格并在其上使用“查询”公式。假设日期在 A 列，用户名 = B 列，评论是 C 列，而空白单元格是 D1，您的脚本将如下所示：

```
SpreadsheetApp.getActiveSheet().getRange("D1").setFormula('Query(A:C,"SELECT A,B,C WHERE B="' + "SomeOne'" + ',1)'; //filter the data and populate to D1 onwards    
SpreadsheetApp.getActiveSheet().getRange("D:F").getValues();//this is the filtered data 
```

# php - 从 mysql 转换为 mysqli (mysql_fetch_array)

> ID：10518090
> 
> 赞同：4
> 
> 时间：2012-05-09T14:23:25.850
> 
> 标签：php, mysql, oop, mysqli

我有一些这样的 php 代码：

```
$row = mysql_fetch_array ( mysql_query("SELECT * FROM `tblFacilityHrs` WHERE `uid` = '$uid'")); 
```

我现在正在尝试将其转换`mysqli_fetch_array`为此处所示的[http://php.net/manual/en/mysqli-result.fetch-array.php](http://php.net/manual/en/mysqli-result.fetch-array.php)（示例#1 面向对象的样式）

我不确定示例中的“$result”是什么意思。

到目前为止，这是我将代码转换为的内容：

```
<?php 
include('../config.php'); 
if (isset($_GET['uid']) ) { 
$uid = $_GET['uid'];
$id = $_GET['id'];  
if (isset($_POST['submitted'])) { 
foreach($_POST AS $key => $value) { $_POST[$key] = mysqli_real_escape_string($value); } 

//Query for tblFacilityHrs
$sql = " UPDATE tblFacilityHrs SET `title`='{$_POST['title']}',`description`='{$_POST['description']}' WHERE `uid` = '$uid' "; 
$result = $mysqli->query($sql) or die($mysqli->error);

//Query for tblFacilityHrsDateTimes
$sql2 = "UPDATE tblFacilityHrsDateTimes SET `startEventDate`='{$_POST['startEventDate']}',`endEventDate`='{$_POST['endEventDate']}', `startTime`='{$_POST['startTime']}',`endTime`='{$_POST['endTime']}',`days`='{$_POST['days']}',`recurrence`='{$_POST['recurrence']},`finalDate`='{$_POST['finalDate']}' WHERE `id` = '$id' "; print $sql2;
$result2 = $mysqli->query($sql2) or die($mysqli->error);

echo ($mysqli->affected_rows) ? "Edited row.<br />" : "Nothing changed. <br />"; 
echo "<a href='list.php'>Back</a>";
} 
$row = $result->fetch_array($mysqli->query("SELECT * FROM `tblFacilityHrs` WHERE `uid` = '$uid'"));
$row2 = $result2->fetch_array($mysqli->query("SELECT * FROM `tblFacilityHrsDateTimes` WHERE `id` = '$id'"));
?> 
```

我在学习mysqli时可能有很多问题，但现在它会出错

> 致命错误：调用成员函数 fetch_array()

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T14:28:27.060

`UPDATE`查询不返回结果对象，它返回`TRUE`（假设成功）。然后你试图打电话`TRUE->fetch_array()`，这显然是行不通的。

现在，为了做你真正想做的事，试试这个：

```
$row = $mysqli->query("SELECT.....")->fetch_array(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:35:43.717

看起来您正在尝试使用旧的结果对象（更新的结果）来获取新查询的结果。您需要先运行新查询，将其结果分配给对象，然后从对象中获取结果。查看重新编写的脚本的最后三行：

```
$facilityHoursQueryResult = $mysqli->query("SELECT * FROM `tblFacilityHrs` WHERE `uid` = '$uid'");
$facilityHoursDateTimesQueryResult = $mysqli->query("SELECT * FROM `tblFacilityHrsDateTimes` WHERE `id` = '$id'");

$facilityHoursRow = $facilityHoursQueryResult == FALSE ? NULL : $facilityHoursQueryResult->fetch_array();
$facilityDateTimesRow = $facilityHoursDateTimesQueryResult == FALSE ? NULL : $facilityHoursDateTimesQueryResult->fetch_array();
?> 
```

这是一个包含其他结果对象方法的有用页面： [http ://www.php.net/manual/en/class.mysqli-result.php](http://www.php.net/manual/en/class.mysqli-result.php)

# smalltalk - 为 Pharo 1.3 安装 OmniBrowser 脚本？

> ID：10518095
> 
> 赞同：6
> 
> 时间：2012-05-09T14:23:33.927
> 
> 标签：smalltalk, squeak, pharo, morphic

请不要在这里宣传 Nautilus 或 Glamour。我正在使用 Pharo 1.3（没有迁移到 Pharo 1.4 或 2.0 的计划）。那里似乎有很多版本的 OmniBrowser。哪一个是经过最多测试的（在覆盖范围内）或只是没有错误？

*   [http://www.squeaksource.com/PharoOB](http://www.squeaksource.com/PharoOB)
*   [http://source.lukas-renggli.ch/ob21](http://source.lukas-renggli.ch/ob21)
*   [http://source.lukas-renggli.ch/omnibrowser](http://source.lukas-renggli.ch/omnibrowser)
*   [http://source.wiresong.ca/ob/](http://source.wiresong.ca/ob/)
*   ...可能还有更多

我有一些问题：

*   它与 Shout 一起使用是否正确？
*   我可以在没有 AST 和重构引擎的情况下加载它吗？
*   我可以在没有 Morphic 的情况下加载它吗？
*   它与任何版本的 Squeak 兼容吗？
*   它可以在 Cuis 中加载吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T14:39:39.577

Omnibrowser 预装在 Pharo 1.3 中。

如果您要在 1.3 核心中安装它，请使用：

```
Gofer new
    squeaksource: 'MetacelloRepository';
    package: 'ConfigurationOfOmniBrowser';
    load.
((Smalltalk at: #ConfigurationOfOmniBrowser) project perform: #version: with: '1.3') load: #( Dev ). 
```

至于你的其他问题......它是否正确地与 Shout 一起使用？是的。

我可以在没有 AST 和重构引擎的情况下加载它吗？是的。加载#Core 组而不是#Dev。

我可以在没有 Morphic 的情况下加载它吗？不。

它与任何版本的 Squeak 兼容吗？是的。您可以使用以下命令将其加载到 Squeak 4.2 和 4.3 中：

```
Installer ss
    project: 'MetacelloRepository';
    install: #ConfigurationOfOmniBrowser.
((Smalltalk at: #ConfigurationOfOmniBrowser) project perform: #stableVersion) load: #( Dev ). 
```

虽然它似乎有一些问题。例如，似乎不需要重构，当出现错误时，我不得不将一些#createCompletionController 方法更改为：

```
createCompletionController
    ^ OController model: self 
```

它可以在 Cuis 中加载吗？高度怀疑。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T21:03:59.857

存储库[http://source.wiresong.ca/ob/](http://source.wiresong.ca/ob/)是 Squeak 的官方 OmniBrowser 存储库（使用 Tool-Builder）。存储库[http://source.lukas-renggli.ch/omnibrowser](http://source.lukas-renggli.ch/omnibrowser)是 Pharo 的官方 OmniBrowser 存储库（使用 Polymorph）。在两个存储库中，核心包是相同的并且定期镜像。

存储库[http://source.lukas-renggli.ch/ob21](http://source.lukas-renggli.ch/ob21)已经过时，它源于我多年前开始的一个实验。我暂时删除了存储库以避免进一步混淆。所有其他存储库（以及各种 Metacello 配置）都基于过时的分叉代码。您获得的代码缺乏许多改进，并且错过了很久以前实施的重要修复。

对于 Pharo 1.3，正如 Philippe 指出的那样，您只需提交[https://github.com/renggli/builder/blob/master/scripts/omnibrowser.st](https://github.com/renggli/builder/blob/master/scripts/omnibrowser.st)即可获得稳定的安装。Shout、eCompletion、重构引擎和其他各种扩展都是可选的。只需从脚本中删除不需要的部分。从技术上讲，也不需要 Morphic，但是您不会获得默认的用户界面。还有其他几个类似的界面`OB-Web`，`OB-Mars`您可以加载它们，但我不知道它们目前的工作情况如何。

相同的文件输入也适用于 Squeak。您只需更换以下软件包：

*   `Refactoring-Pharo-Platform`with `Refactoring-Squeak-Platform`（如果你想要重构引擎）
*   `OB-Pharo-Platform`和`OB-Squeak-Platform`
*   `OB-Polymorph`和`OB-ToolBuilder`
*   `Shout`已预装在 Squeak 中且不需要
*   `eCompletion`在 Squeak 中不起作用（据我所知）

我不认为 OmniBrowser 在 Cuis 中工作。它可以通过提供必要的平台和 UI 包来工作。Pharo 1.4 或 Pharo 2.0 不太可能支持 OmniBrowser，因为反射系统的中心部分（例如`MethodReference`和`SystemNavigation`）发生了巨大变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T18:30:47.520

我使用来自[http://source.lukas-renggli.ch/omnibrowser](http://source.lukas-renggli.ch/omnibrowser)的那个，因为我知道 Lukas 住在哪里 ;-) Lukas 已经维护它好几年了，我从来没有遇到过任何问题。话虽如此，它只在 Pharo 1.3 中真正有效。

*   它与 Shout 一起使用是否正确？**是的**
*   我可以在没有 AST 和重构引擎的情况下加载它吗？**是的**
*   我可以在没有 Morphic 的情况下加载它吗？**不**
*   它与任何版本的 Squeak 兼容吗？**不**，只有 Pharo 1.3
*   它可以在 Cuis 中加载吗？**不**，只有 Pharo 1.3

[我使用来自https://github.com/renggli/builder/blob/master/scripts/omnibrowser.st](https://github.com/renggli/builder/blob/master/scripts/omnibrowser.st)的加载脚本， 不幸的是没有 Metacello 配置。

# apache - Glassfish 3.1.2 Apache2 负载平衡与 mod_jk

> ID：10518096
> 
> 赞同：3
> 
> 时间：2012-05-09T14:23:35.733
> 
> 标签：apache, apache2, glassfish, glassfish-3, mod-jk

我们正在使用由 Apache 使用 mod_jk 进行负载平衡的 glassfish 3.1.2 但是，当我将 ping_mode 设置为 C 或 A 时它不起作用，它只是说

```
[Wed May 09 08:17:05 2012] [15033:140400029296384] [info] ajp_handle_cping_cpong::jk_ajp_common.c (889): awaited reply cpong, not received
[Wed May 09 08:17:05 2012] [15033:140400029296384] [error] ajp_connect_to_endpoint::jk_ajp_common.c (992): (worker2) cping/cpong after connecting to the backend server failed (errno=0)
[Wed May 09 08:17:05 2012] [15033:140400029296384] [error] ajp_send_request::jk_ajp_common.c (1585): (worker2) connecting to backend failed. Tomcat is probably not started or is listening on the wrong port (errno=0)
[Wed May 09 08:17:05 2012] [15033:140400029296384] [info] ajp_service::jk_ajp_common.c (2540): (worker2) sending request to tomcat failed (recoverable), because of error during request sending (attempt=19)
[Wed May 09 08:17:06 2012] [15033:140400029296384] [info] ajp_connection_tcp_get_message::jk_ajp_common.c (1223): (worker2) can't receive the response header message from tomcat, tomcat (192.168.42.83:8009) has forced a connection close for socket 15 
```

但是，如果我注释掉以下行，它可以正常工作，有什么想法吗？

```
worker.template.ping_mode=A 
```

我的整个工人档案看起来像这样。

```
worker.list=loadbalancer, status

worker.template.type=ajp13
worker.template.port=8009
worker.template.lbfactor=1
worker.template.socket_timeout=10
worker.template.ping_timeout=10000
worker.template.ping_mode=A
worker.template.connection_pool_size=25
worker.template.connection_pool_timeout=300
worker.template.retries=20

worker.worker1.reference=worker.template
worker.worker1.host=node1

worker.worker2.reference=worker.template
worker.worker2.host=node2

worker.loadbalancer.type=lb
worker.loadbalancer.balance_workers=worker1,worker2

worker.status.type=status 
```

# c# - 从 IntPtr Handle 获取 Control/Form 对象

> ID：10518098
> 
> 赞同：3
> 
> 时间：2012-05-09T14:23:46.857
> 
> 标签：c#, .net, windows, handle, hwnd

我尝试使用以下代码从显示的 Word 应用程序窗口中获取托管控件：

```
Process[] processes = null;
processes = Process.GetProcessesByName("WINWORD");
Process wordProc = processes[0];
Control wordControl = Control.FromHandle(wordProc.MainWindowHandle); 
```

不幸的是 wordControl 始终为空...据我所知，如果没有找到与句柄相关的控件，FromHandle 将返回空。但实际上我猜应该有一个相关的控件，因为我可以在我的屏幕上看到窗口。

因此我的问题是，如果我在尝试获取手柄或控件时做错了什么。或者，也许我的一般方法不适用于某些基于 .NET / Windows 环境中某处的目前未知的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:30:24.703

你试图做的事情是不可能的。您不能将在其自己的进程中运行的 Word 实例转换为 C# WinForms 控件 - 这将是完全不安全的。

根据您要执行的操作，您可以采用两种方法：

*   如果您想影响现有 Word 实例的行为，则可以使用 SendMessage() 和其他各种 User32.DLL 函数向它发送一些消息。使用[Pinvoke / DLL Import](http://pinvoke.net/default.aspx/user32.SendMessage)来完成此操作。

*   如果您尝试在您编写的应用程序中使用 Word 功能（例如创建 Word 文档），请使用[Word 互操作库](http://msdn.microsoft.com/de-de/library/microsoft.office.interop.word%28v=office.11%29.aspx)：

**编辑**

If you're interested in handling key events in an existing Word instance, you can use a [Low Level keyboard hook](http://pinvoke.net/default.aspx/user32.SetWindowsHookEx) to deal with key events, specifying the handle of the word procs you're interested in.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:30:15.700

Control.FromHandle 要求您传递托管控件的句柄，而不是 win32 窗口的 MainWindowHandle...

# c++ - Boost Unit Test 计时机制

> ID：10518099
> 
> 赞同：3
> 
> 时间：2012-05-09T14:23:50.003
> 
> 标签：c++, performance, unit-testing, boost

Boost Unit Test 框架中是否有一些内置机制来检查时间问题。例如：

*   报告每次测试的时间

*   检查超过给定时间限制的测试

*   你知道的任何与时间有关的事情

我尝试使用命令行参数，例如 --report_level 或 --log_level，但它没有报告任何与时间相关的内容。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-08T08:17:54.997

1.  每次测试的报告时间：要让 Boost.Test 报告时间，您需要指定“--report_level=detailed --log_level=all”。测试时间将在输出中丢失，但看起来像：

> 离开测试用例“my_test_1”；测试时间：220mks
> 离开测试用例“my_test_2”；测试时间：219mks
> ...

2.  检查超过给定时间限制的测试：我从未测试过，但 boost 测试框架提供了[装饰器超时](http://www.boost.org/doc/libs/1_62_0/libs/test/doc/html/boost_test/testing_tools/timeout.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:36:14.790

1.  您可以为测试用例指定超时
2.  Boost.Test 详细报告模式下每个测试单元的报告时间
3.  我希望尽快实现更高级的时序测试工具（ish）

# numpy - scipy.interpolate.bisplev 给出的 B 样条的偏导数是什么意思？

> ID：10518104
> 
> 赞同：0
> 
> 时间：2012-05-09T14:24:04.047
> 
> 标签：numpy, scipy, interpolation, scientific-computing

我有一个从 cloudpoint 生成的网格，可以描述为`z = f(x,y)`，所以我使用`scipy.interpolate.bisplrep`and `bisplev`，效果很好。

`bisplev`可以与参数一起使用`dx=n`和/或`dy=n`使得结果是`n`评估点的阶导数。我计划用它来计算平均曲率和高斯曲率（`surfature`在 Matlab 中调用），这应该涉及获得曲面的二阶偏导数

一次使用其中一个偏导数的结果`dx`非常好，清楚地将渐变表示为“阴影”效果，如这张从人类背部拍摄的图像中所见（代码优先）：

```
 self.spline = inter.bisplrep(self.pointlist[:,1],
                                 self.pointlist[:,0],
                                 self.pointlist[:,2], s=smoothing_factor)
    self.mesh_shadow = inter.bisplev(yy.flat, xx.flat, self.spline, dy=1) 
```

![在此处输入图像描述](../Images/5745af135df0a910f287a261f6f86fa1.png)

到现在为止还挺好。**问题是：当我同时要求两个偏导数时**，我无法理解（也找不到任何解释）结果的含义是什么，因为没有任何明显的数字或视觉含义。例如，如果我使用`dx`AND `dy`：

```
self.mesh_shadow = inter.bisplev(yy.flat, xx.flat, self.spline, dx=1, dy=1) 
```

我明白了： ![在此处输入图像描述](../Images/75eba7867c9b1c148b5763db582dd16d.png)

所以，我想知道：

1.  由 给出的表面的一阶偏导数的同时结果的数学/几何意义是`bislplev(..., dx=1, dy=1)`什么？
2.  有没有办法从 获得最大斜率（在任何方向）`bislplev(..., dx=1, dy=1)`？
3.  首先，两个偏导数是否应该一起调用？我知道我可以使用，比如说，`(..., dx=1, dy=2)`这个函数似乎产生了“有效”的结果，但这有什么意义吗？

每次，返回值都是一个 (Y,X) 形的单个浮点值数组（Z 或其与导数相关的值之一）。

有什么帮助吗？

谢谢阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:01:41.360

1.  用 dx=n, dy=m 得到的偏导数是数学对象（或者更确切地说，它的数值近似）

    (d/dx)^n (d/dy)^mf(x,y)

2.  您不能仅从 dx=2,dy=0 和 dx=0,dy=2 计算高斯曲率——通常您还需要交叉导数 dx=1,dy=1。

3.  偏导数 (d/dx)^n (d/dy)^mf(x,y) 在数学上是明确定义的。使用样条曲线，如果您的阶数太高，您应该开始得到零点或不连续点。

# c++ - c++：从 `const char* const' 到 `char*' 的无效转换

> ID：10518106
> 
> 赞同：-5
> 
> 时间：2012-05-09T14:24:13.253
> 
> 标签：c++, compiler-errors

![编译错误]

无论我在相关行中进行什么更改，我都会一遍又一遍地收到此编译错误。如您所见，它将我发送到**stl_iterator.h**文件。

我不知道问题可能是什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T14:28:19.743

`punc_vec`是`const`，所以你必须使用一个`const_iterator`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T14:29:08.207

似乎`punc_vec`已声明`const`，因此`punc_vec.begin()`返回 a `const_iterator`，而不是 a `iterator`。将行更改为：

```
for(std::vector<char>::const_iterator i_vec=(punc_vec).begin();/*...*/) 
```

# objective-c - NSMutableArray 计数

> ID：10518109
> 
> 赞同：1
> 
> 时间：2012-05-09T14:24:27.230
> 
> 标签：objective-c, nsmutablearray

我正在阅读一些代码，并且遇到了以下语句，这似乎完全没有意义。该行编码如下。它获取 NSMutableArray 的第一个对象，然后发送“count”消息。这究竟是在做什么？

```
for (int j = 0; j < [[inputData objectAtIndex:0] count]; j++)
//inputData is just an NSMutableArray 
```

有人可以向我解释一下吗？我以前从未遇到过这种情况。起初我想这可能就像一个二维数组场景，其中 array[x].length 与 array.length 不同，但 inputData 只是一个类似 10 个数字的 NSMutableArray。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:30:30.243

如果您的数组（在这种情况下`inpuData`）具有键值匹配机制，则此循环将增加其索引，但由于每次条件相同（计数`[inputData objectAtIndex:0]`永远不会改变），这将导致无限循环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:42:32.460

如果你是正确的`inputData`包含`NSNumber`s，那么会发生什么是第一次通过，你得到一个异常，因为`NSNumber`没有响应`-count`。

代码可以做任何其他事情的唯一方法是如果 `[inputData objectAtIndex:0]`响应`-count`. 它可以是任何不仅响应`-count`数组的对象。`inputData`实际上，如果是，它也不会抛出异常`nil`。然后表达式将返回 0（发送`objectAtIndex:`到`nil`返回`nil`并发`count`送到`nil`返回 0）。

# maven - maven站点解包错误

> ID：10518111
> 
> 赞同：0
> 
> 时间：2012-05-09T14:24:53.147
> 
> 标签：maven, maven-dependency-plugin

我有一个多模块 Maven 项目。如果我跑

```
mvn clean install 
```

一切正常。但是如果我运行：

```
mvn site 
```

我收到以下错误：

```
[INFO] --- maven-dependency-plugin:2.4:unpack (copy-war) @ module2 ---
[INFO] Configured Artifact: com.example:module1:1.0-SNAPSHOT:war
Unpacking path\2\module1\target\classes to path\2\module2\target\module1 with includes "" and excludes ""
org.codehaus.plexus.archiver.ArchiverException: The source must not be a directory. 
```

同时`mvn clean install`我得到：

```
[INFO] --- maven-dependency-plugin:2.4:unpack (copy-war) @ module2 ---
[INFO] Configured Artifact: com.example:module1:1.0-SNAPSHOT:war
[INFO] Unpacking path\2\module1\target\module1-1.0-SNAPSHOT.war to path\2\module2\target\module1 with includes "" and excludes "" 
```

一切正常。

知道为什么依赖插件要解压目录而不是战争吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:22:57.920

我找到了解决方法。我禁用了该模块的站点插件：

```
 <plugin>
            <artifactId>maven-site-plugin</artifactId>
            <configuration>
                <generateReports>false</generateReports>
            </configuration>
        </plugin> 
```

我认为命令失败是由于站点插件中的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T05:53:37.397

这确实是 maven-dependency-plugin 中长期存在的（自 2007 年以来！）错误。查看[MDEP-98 JIRA 问题](http://jira.codehaus.org/browse/MDEP-98)以进行讨论和可能的解决方法。

# objective-c - 带有#define的常量中的字符串数组 - 目标c

> ID：10518112
> 
> 赞同：3
> 
> 时间：2012-05-09T14:25:00.637
> 
> 标签：objective-c, ios

我需要一个常量中的字符串数组。使用#define 是个好主意吗？

例如：

```
#define rows [NSArray arrayWithObjects:  @"NameRowA",@"NameRowB",@"NameRowC", nil]

#define KEY_ROWA [columnas objectAtIndex:0]
#define KEY_ROWB [columnas objectAtIndex:1]
#define KEY_ROWC [columnas objectAtIndex:2] 
```

我需要访问字符串数组和该数组的元素。

我已经读过，（我不知道是否属实）通过这种方式，它在使用时创建了一个新的 NSArray，我想然后该数组被释放，所以我认为这很好，因为你只使用那部分内存当你需要它的时候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T22:59:36.787

使用单例，它只是几行代码。您所需要的只是一个静态单例，以及一个用于检索它（并设置一次）的静态方法。

您的 .m 文件应包含以下内容：

```
@implementation MyClass 

static NSArray *mySingletonArray; // this will be your array

+ (NSArray *)mySingletonArray // this is the static method for accessing your array
{
    if (nil == mySingletonArray) {
        mySingletonArray = [NSArray arrayWithObjects:@"firstString", @"secondString", nil];
    }

    return mySingletonArray;
} 
```

使用静态访问方法 [MyClass mySingletonArray] 从数组中获取您需要的内容，例如

```
NSLog("%@", [[MyClass mySingletonArray] objectAtIndex:0]); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T14:37:36.290

我不认为你想用`#define`这个。

在您的示例中，没有使用此代码生成的常量字符串数组。在您的代码中使用的每一次`rows`，都会分配一个新的 NSArray。此外，`KEY_ROWA`指的是列，但这不在行定义中。我假设你有这样的东西

```
NSArray *columnas = rows; 
```

这和真的没有区别

```
NSArray *columnas = [NSArray arrayWithObjects: @"NameRowA",@"NameRowB",@"NameRowC", nil]; 
```

但第二行要明显得多。情况也是如此`KEY_ROWA`—— objectAtIndex 调用会更明显，而宏不会给你任何东西。

我不确定你到底需要什么，但是如果你需要一个类中的字符串共享常量数组，你可以将它声明为`+`而不是`-`在开头，然后分配一次（这是一个类变量而不是实例变量）。更多信息在这里：

[如何在 Objective-C 中声明类级别的属性？](https://stackoverflow.com/questions/695980/how-do-i-declare-class-level-properties-in-objective-c)

# ruby-on-rails - 如何在不刷新页面的情况下使用 Plupload 上传后显示图像？

> ID：10518113
> 
> 赞同：2
> 
> 时间：2012-05-09T14:25:04.427
> 
> 标签：ruby-on-rails, plupload

Plupload/回形针/rails 3.1.4/ruby 1.9.3

我使用 Plupload 成功上传了多张图片，并且像往常一样，我输入了“images/create.js.erb”代码，将图片附加到页面。

什么都没发生。即使是原始警报也没有视觉反应，但我听到我的硬盘发出咕噜声（实际上我做了无休止的警报循环以听到里面发生了一些事情:)

**图像控制器**

```
def create
  @image=Image.create(:photo => params[:file])
  respond_to :js
end 
```

**视图/图像/create.js.erb**

```
$('body').append('<%= escape_javascript(image_tag(@image.photo.url(:medium))) %>'); 
```

每个图像创建后，它必须出现在页面上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:40:02.903

我找到了答案。

**视图/图像/create.js.erb**

```
<%=@image.id %>:<%= @image.photo.url(:medium) %> 
```

**意见/项目/_form.js.erb**

```
<script>
... 
uploader.bind('FileUploaded', function (up, file, info) {
        var response = info['response'].split(':');
        var image_id= response[0];
        var image_url= response[1];
        ...
        use it as you want, my lord!..
        ...    
});
...
</script> 
```

# facebook - 提交 Facebook 打开图形操作

> ID：10518117
> 
> 赞同：0
> 
> 时间：2012-05-09T14:25:19.213
> 
> 标签：facebook, submit, action, facebook-opengraph

我正在尝试提交一个 facebook opengraph 操作。这是一个简单的“阅读”“文章”操作，但是当我提交它以供批准时，facebook 最终会响应此错误。

“状态：需要更改您正在尝试提交不允许的自定义操作。请删除此操作并提交此操作的内置版本。请在下面进行更改并重新提交以供审核。”

我不确定这意味着什么，据我所知，这不是我创建的自定义操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:52:57.647

单击以创建新的操作类型，当文本框出现时，开始输入“阅读”，然后选择下拉选项。那是内置的读取操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:21:38.633

I had the same issue, it seems FB doesn't allow to add built in actions as custom for some unknown reason, may be they have some future plan with them for AI stuff. The only the thing I see in built in read is its very limited.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T01:12:06.200

试试这个教程[http://onlytipsandtricks.com/facebook/how-to-publish-actions-on-timeline/](http://onlytipsandtricks.com/facebook/how-to-publish-actions-on-timeline/)

# typo3 - Typo3 缺少页面类型图标

> ID：10518121
> 
> 赞同：1
> 
> 时间：2012-05-09T14:25:35.120
> 
> 标签：typo3

对于我的新typo3 页面，我想添加几个页面和链接。不幸的是，在我全新的 4.5（我也尝试过 4.7）安装时，页面模块中不同页面类型的图标丢失了。

![在此处输入图像描述](../Images/9d5cf8a0dea36acf0e77653d2decada7.png)

我怎样才能得到这个图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:25:13.550

它们被“隐藏”在带有绿色加号的图标下（屏幕截图的左上角），请先单击它。

# python - 未找到 WSGI 应用程序 - 404

> ID：10518127
> 
> 赞同：2
> 
> 时间：2012-05-09T14:25:48.357
> 
> 标签：python, apache2, mod-wsgi, wsgi

遵循本指南：

[http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide)

我无法在我的 ubuntu 挤压机上配置“Hello World”WSGI 应用程序（我没有安装在 docroot 并且没有委托给守护进程）。Python 版本是 2.6.5。我相信 mod_wsgi 安装正确。这是我所做的：

*   创建了一个用户 /home/wsgitest （我知道我们不应该这样做，但这只是为了测试）。
*   将用户添加到组 www-data，这是 apache2 运行的：

    ```
    groups wsgitest
    wsgitest : wsgitest www-data 
    ```

    作为 wsgitest，添加了明确读取文件夹的权限：

    ```
    chmod -R g+rx wsgitest 
    ```

*   创建了一个与指南内容完全相同的 WSGI 应用程序脚本文件：

    ```
    ls -la /home/wsgitest/
    (...)
    -rw-r--r-- 1 wsgitest wsgitest  277 May  7 17:11 application.wsgi 
    ```

*   创建了一个应用程序配置文件：

    ```
    cat /etc/apache2/sites-available/application.conf 
    <VirtualHost *:80>
      WSGIScriptAlias /application /home/wsgitest/application.wsgi
      <Directory /home/wsgitest>
        Order allow,deny
        Allow from all
      </Directory>
    </VirtualHost> 
    ```

(文件属于root:root)

*   启用网站：

    ```
    ls -la /etc/apache2/sites-enabled/
    (..)
    lrwxrwxrwx 1 root root   35 May  9 15:29 application.conf -> ../sites-available/application.conf 
    ```

*   重启apache2，进入如下地址：

    ```
    <ip-address>/application
    <ip-address>/application/ 
    ```

这给出了 404。

*   禁用该站点并将以下内容放在文件 /etc/apache2/apache2.conf 的底部：

    ```
    <Directory /home/wsgitest>
      Order allow,deny
      Allow from all
    </Directory>        
    WSGIScriptAlias /application /home/wsgitetst/application.wsgi 
    ```

*   重新启动 apache 并尝试再次导航，没有任何变化。

*   尝试使用 lynx 和 localhost，没有任何变化。

*   在 apache2 中启用日志信息级别。/var/log/apache2 访问日志告诉我该请求以“404 503”回答，这是来自 error.log：

    ```
    [Wed May 09 15:39:28 2012] [info] mod_wsgi (pid=27914): Attach interpreter ''.
    (...) 
    [Wed May 09 15:39:32 2012] [error] [client <ip>] File does not exist: /var/www/application
    (...)
    [Wed May 09 15:39:28 2012] [info] mod_wsgi (pid=27914): Cleanup interpreter ''. 
    ```

“other_vhosts_access.log”为空。

对我来说，请求似乎永远不会到达 wsgi 应用程序或者没有以某种方式路由......任何人都可以帮我确定问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:24:39.480

在 application.wsgi 中必须是*应用程序*可调用对象（区分大小写）

[http://webpython.codepoint.net/wsgi_application_interface](http://webpython.codepoint.net/wsgi_application_interface)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:29:48.450

不好了。我确实检查了所有内容 3 或 4 次，但仍然有一个错字。正如您在 apache2.conf 编辑 (wsgitetst) 的 WSGIScriptAlias 声明中看到的那样。包含配置仍然不起作用，但没关系。

# c - 用 C 编写井字游戏

> ID：10518130
> 
> 赞同：-2
> 
> 时间：2012-05-09T14:26:03.643
> 
> 标签：c, tic-tac-toe

我正在用 C 编写一个井字游戏。这是逻辑。用户先走，选择一个插槽。使用简单的公式计算槽的位置。然后填充选定的插槽。接下来，计算机随机选择一个插槽。为此，我在 stdlib.h 中使用了 rand() 函数。最初，3x3 矩阵的所有元素都设置为 0。我的问题是，即使所有其他元素都是 0，并且用户选择插槽 5 或插槽 9，用户也会获胜。comp 也一样。这是我的代码-

```
#include<stdio.h>
#include<stdlib.h>
int check(int[][3]);
void print(int[][3]);
main()
{
 int i,j,match[3][3]={0},posx,posy,comp_posx,comp_posy,fill=0,slot,user_score=0,comp_score=0;
 char ch;
 srand(time(NULL));
 do
 {
  while(fill<9)
  {
   printf("\nEnter the slot you want to fill.\n");
   scanf("%d",&slot);
   if (slot > 9)
   {
    printf("Error!\nSlot value cannot exceed 9.\n");
    continue;
   }
   else if( slot >= 1&&slot <=3)
   {
    posx=0;
    posy=slot-1;
   }
   else if (slot >= 4 && slot <= 6)
   {
    posx=1;
    posy=slot-4;
   }
   else
   {
    posx=2;
    posy=slot-7;
   }
   if (match[posx][posy] == 0)
   {
    match[posx][posy]=1;
    fill++;
    check(match);
    if(check(match)==1)
    {
     printf("The user wins!\n");
     user_score++;
     print(match);
     break;
    }
    else if(check(match)==-1)
    {
     printf("The computer wins!\n");
     comp_score++;
     print(match);
    }
    else
    {
     if(fill==9)
     {
      printf("It's a draw!\n");
      print(match);
      break;
     }
     else
     {
      printf(" ");
     }
    }
   }
   else
   {
    printf("Sorry! This slot is already filled.\nPlease pick another slot.\n");
    continue;
   }
   label:
   comp_posx=rand()%3;
   comp_posy=rand()%3;
   if(match[comp_posx][comp_posy]==0)
   {
    match[comp_posx][comp_posy]=-1;
    fill++;
    check(match);
    if (check(match)==1)
    {
     printf("The user wins!\n");
     user_score++;
     print(match);
     break;
    }
    else if(check(match)==-1)
    {
     printf("The computer wins!\n");
     comp_score++;
     print(match);
     break;
    }
    else
    {
     if (fill==9)
     {
      printf("It's a draw!\n");
      print(match);
      break;
     }
     else
     {
      printf(" ");
     }
    }
   }
   else
   goto label;
   for(i=0;i<3;i++)
   {
    printf("\n");
    for(j=0;j<3;j++)
    {
    printf("%d\t",match[i][j]);
    }
   }
  }
  for(i=0;i<3;i++)
  {
   for(j=0;j<3;j++)
   {
    match[i][j]=0;
   }
  }
  printf("Continue? Y/N\n");
  scanf("%c %c",&ch,&ch);
 }
 while(ch=='y'||ch=='Y');
 printf("FINAL SCORES>>\nUser=%d\nComputer=%d\n",user_score,comp_score);
}
int check(int match[][3])
{
 int i,j;
 if( match[2][0]==match[1][1] && match[1][1]==match[0][2] )
 {
  if (match[0][2]==1)
  return 1;
  else if (match[0][2]==-1)
  return -1;
  else
  printf(" ");
 }
 for(i=0;i<3;i++)
 {
  if (match[i][0]==match[i][1]&&match[i][1]==match[i][2])
  {
   if(match[i][1]==1)
   return 1;
   else if(match[i][1]==-1)
   return -1;
   else
   continue;
  }
 }
 for(j=0;j<3;j++)
 {
  if(match[0][j]==match[1][j]&&match[0][j]==match[2][j])
  {
   if (match[0][j]==1)
   return 1;
   else if(match[0][j]==-1)
   return -1;
   else
   continue;
  }
 }
 for (i=0;i<1;i++)
 {
  if(match[i][i]==match[i+1][i+1]&&match[i][i]==match[i+2][i+2])
  {
   if (match[i][i]==1)
   return 1;
   else if (match[i][i]==-1)       return -1;
  else continue;
  }
 }
}
 void print(int match[][3])
 {
  int i,j;
  for(i=0;i<3;i++)
  {
   printf("\n");
   for(j=0;j<3;j++)
   {
    printf("%d\t",match[i][j]);
   }
  }
 } 
```

您能否建议更改代码，以便我不会遇到这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:34:33.233

`check`这段代码有很多混乱，但问题的原因是如果没有人获胜，您不会返回值（或者换句话说，返回垃圾值） 。`return 0;`在末尾添加行`check`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:42:28.387

我不能为您的代码提出解决方案，而是在实施中提出解决方案。我曾经不得不在 C 中实现井字游戏，最后我使用了类似于[MiniMax 算法](http://en.wikipedia.org/wiki/Minimax "MiniMax")的东西，你可以[在 github](https://github.com/marcelog/ttt "井字游戏")上找到它。

在井字游戏中，您有 9 个！(362880) 游戏的可能状态。每个状态代表棋盘中 X 和 O 的给定组合。这些状态可以表示“无效状态”（也就是说，您永远无法通过玩游戏达到该状态）、“平局”、“X 胜”或“O 胜”。

由于您的可能状态数量相对较少，您可以通过玩每个可能的移动来计算所有可能的状态（我在游戏初始化时这样做，因为它需要做的工作量很小并且不关心性能），并将初始动作与他们可能的下一步动作联系起来。

这将给你一棵树，给定一个初始移动，它将引导你进入平局、胜利或失败的情况（当然取决于谁是 X，谁是 O）。一旦达到该状态，您就可以将此结果传播到第一步。

结果，当人类玩家下棋时，计算机只会跟随这棵可能走棋的树，总是玩给出“赢”或“平”的结果，但绝不会是“输”。它只是一个状态机，每次移动都会改变状态。人类通过下棋来改变状态，计算机通过下棋来选择下一个状态，这会将游戏重定向到获胜的最终状态（从计算机的角度来看），如果不可能获胜，则为平局。

所以本质上，这是一个“完美的井字游戏”。你将无法击败它。如果你打得无懈可击，你可以打平比赛，但永远不会赢。

# javascript - android的window.onpopstate？

> ID：10518133
> 
> 赞同：2
> 
> 时间：2012-05-09T14:26:23.783
> 
> 标签：javascript, android

我正在制作一个移动优化的网站，当您“单击”页面上的某些元素时，它会打开全屏对话窗口。这些窗口实际上只是动画到位置的 div。

如果用户在其中一个对话框窗口打开时按下浏览器后退按钮，我希望对话框关闭，而不是让页面全部保留。

我可以用 iPhone 做到这一点。如果我让您单击链接片段的元素，那么在 window.onpopstate 事件上，我可以使用 window.location.href 检查 url 并在适当时隐藏对话框。

但是，由于不支持 window.onpopstate，因此我无法在 Android 上使用它（至少在手机即时通讯测试中使用它已经很旧了）。我怎样才能绕过这个？jQuery Mobile 可以做到这一点，所以我知道它一定是可能的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:02:11.983

我没有扩展地查看对此的支持级别，但 window.onhashchange 适用于我相当旧的 Android。

# hadoop - Hadoop 生态系统 - 在我的场景中使用什么技术工具组合？（里面的细节）

> ID：10518134
> 
> 赞同：2
> 
> 时间：2012-05-09T14:26:26.670
> 
> 标签：hadoop, hbase, hive, apache-pig, mahout

对某些人来说，这可能是一个有趣的问题：

**给定：**存储在**SQL Server** (RDBMS) 中的 2-3 TB 数据，认为它类似于亚马逊的数据，即用户 -> 他们看到/点击查看的内容 -> 他们购买了什么

**任务：**制作一个推荐引擎（如亚马逊），向用户显示，购买此产品的客户也购买了此产品->如果您喜欢此产品，那么您可能会喜欢此产品->（也）一种数据挖掘来预测未来的购买习惯好（数据挖掘）。依此类推，基本上是一个reco引擎。

**问题：**由于数据量巨大（5-6 年的用户习惯数据），我认为 Hadoop 是最终的解决方案。现在的问题是，要使用哪些技术工具组合？

> HDFS：底层文件系统
> 
> HBASE/HIVE/猪：？
> 
> Mahout：为了运行一些算法，我假设使用 Map-Reduce（遗传、集群、数据挖掘等）
> 
> **- 我错过了什么？为所有这些处理加载 RDBMS 数据怎么样？（*用于 Hadoop 的 Sqoop？*）**
> 
> **- 在这一切结束时，我得到一个结果列表（reco's），或者有一种方法可以直接查询它并将其报告给我在.NET中构建的前端？**

我认为这个问题的答案，对于像我这样想在未来开始他们的 hadoop 实验的许多人来说可能是一个很好的讨论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:35:19.523

对于从 RDBMS 加载数据，我建议查看 BCP（从 SQL 导出到平面文件）然后使用 Hadoop 命令行加载到 HDFS。Sqoop 对持续数据很有用，但对于您的初始负载来说，它的速度会慢得令人无法忍受。

要从 Hadoop 查询结果，您可以使用 HBase（假设您需要低延迟查询），可以通过其 Thrift API 从 C# 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:10:54.790

HBase 可以适合您的场景。HDFS 是底层文件系统。尽管如此，除非您使用 HBase 文件格式 (HFile)，否则您无法在 HBase 中加载 HDFS（以任意格式）查询中的数据

HBase 与 MR 集成。Pig 和 Hive 也与 HBase 集成。正如 Chris 所提到的，您可以使用 Thrift 执行查询（获取、扫描），因为这将提取特定的用户信息而不是海量数据集，它比使用 MR 更合适。

# iphone - 如何在 UITableViewCell 中并排添加两个图像？

> ID：10518136
> 
> 赞同：0
> 
> 时间：2012-05-09T14:26:35.393
> 
> 标签：iphone, uitableview, uiimage

如何在 UITableViewCell 中并排添加两个图像？UITableViewCell 的样式是 UITableViewCellStyleSubtitle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:36:30.760

一旦你开始在 UITableViewCell 中做任何不寻常的事情，就该创建你自己的 UITableView 单元格的自定义子类了。试图乱用 iOS 给你的默认设置只会导致痛苦和痛苦。

网上有很多教程和例子，做起来很简单，例如

[http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)

确保您注意所有内容在 Interface Builder 中的连接方式。使用 XCode 4，您还必须在单独的步骤中自行创建 NIB/XIB - 请参阅之前的堆栈溢出响应：

[如何在 Xcode 4 中使用 nib 创建自定义 UITableViewCell？](https://stackoverflow.com/questions/8291518/how-do-i-create-a-custom-uitableviewcell-with-nib-in-xcode-4)

# wpf - 值 '' 无法转换。具有无效的 SelectedValue 和空 Source

> ID：10518138
> 
> 赞同：3
> 
> 时间：2012-05-09T14:26:47.653
> 
> 标签：wpf

当我第一次加载窗口时，Combobox 在绑定时显示验证错误，并显示消息“无法转换值''” `SelectedValue="{Binding ID, ElementName=mySelf, Mode=TwoWay}`...调用`UpdateTarget()`验证错误消失了。在这两种情况下，ID 都是 0，它绑定到 SelectedValue 属性（Load 和 ButtonClick）

我看到的唯一区别是在 InitializeComponents 之后加载了Employees集合（如果我在 InitializeComponents 验证错误消失之前添加了该集合）

```
public class Employee
{
    public Employee(Int32 id, String name)
    {
        this.ID = id;
        this.Name = name;
    }
    public int ID { get; set; }

    public string Name { get; set; }
} 
```

XAML

```
<Grid>
    <ComboBox VerticalAlignment="Center" Margin="12,57,424,93" x:Name="cmbEntityBuyer2" Width="230" 
            ItemsSource="{Binding Employees, ElementName=mySelf}"
            DisplayMemberPath="Name"
            SelectedValuePath="ID"                  
            SelectedValue="{Binding ID, ElementName=mySelf, Mode=TwoWay}"
            IsEditable="False"/>

    <TextBox Text="{Binding ElementName=cmbEntityBuyer2,Path=SelectedValue, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
             Height="25" Margin="12,12,424,134" />
    <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="12,108,0,0" Name="button1" VerticalAlignment="Top" Width="230" Click="button1_Click" />
</Grid> 
```

代码背后

```
 public partial class MainWindow : Window, INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent();
        Employees.Add(new Employee(1, "Vinay"));
        Employees.Add(new Employee(2, "Leny"));
    }

    Int32 _id = 0;
    public Int32 ID
    {
        get { return _id; }
        set { _id = value; OnPropertyChanged("ID"); }
    }

    ObservableCollection<Employee> _emp = new ObservableCollection<Employee>();
    public ObservableCollection<Employee> Employees
    {
        get { return _emp; }
        set { _emp = value; }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged(string propName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propName));
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        String error = Validation.GetErrors(cmbEntityBuyer2)[0].ErrorContent.ToString();
        cmbEntityBuyer2.GetBindingExpression(ComboBox.SelectedValueProperty).UpdateTarget();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:28:02.750

尝试`TargetNullValue=''`在绑定中使用

[这个链接](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/9eed8586-7443-43e0-a65a-b7046ada1fd2)

# spring - 如何防止@ModelAttribute 从请求参数创建命令对象？

> ID：10518142
> 
> 赞同：1
> 
> 时间：2012-05-09T14:27:17.063
> 
> 标签：spring, spring-mvc

即我只想要一种从我的模型中检索现有对象的好方法（主要是一些 SessionAttributes）。

我不希望创建新对象，尤其不希望从请求参数中实例化对象并将其放入模型中。这听起来对我来说就像一个后门。

如果模型中没有匹配的参数，如果可以抛出异常也很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:16:52.930

我通过阅读源代码得到了答案。根据 的实现`org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveModelAttribute`，如果使用@SessionAttributes 注解将模型属性的名称声明为会话属性，则不会创建新的绑定对象。

如果会话中不存在该属性，则会抛出异常。

所以这样绑定会话属性是比较安全的。

# blackberry - 有没有办法阻止 Yahoo! 在不破坏 Blackberry OS 6 上的移动版本的情况下显示 HTML 电子邮件的移动版本的邮件？

> ID：10518143
> 
> 赞同：2
> 
> 时间：2012-05-09T14:27:19.353
> 
> 标签：blackberry, css, html-email, media-queries, yahoo-mail

我正在处理一封 HTML 电子邮件，但遇到了问题（如图）。事实证明，雅虎！邮件莫名其妙地使用其中定义的 CSS 样式优先于@media 样式表，而不是 HTML 电子邮件中的任何内联样式。此处讨论了该问题和解决方法：http: [//www.campaignmonitor.com/blog/post/3457/media-query-issues-in-yahoo-mail-mobile-email/](http://www.campaignmonitor.com/blog/post/3457/media-query-issues-in-yahoo-mail-mobile-email/). 测试后，我发现此工作存在一些问题... Blackberry OS 6 电子邮件客户端似乎无法识别或读取雅虎修复中使用的属性选择器格式。结果是，您的电子邮件必须在 Yahoo 中正确呈现，还是在 Blackberry 上很好呈现之间做出选择。有没有人遇到过这个问题？如果是这样，您是否找到了实现两全其美的方法？（让它在 Yahoo! mail 和 blackberry 上正常工作）。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:45:26.227

您是否尝试过通过指定 id 来使用样式？例如。div[id='blackberry'] { /* 媒体查询在这里 */ }

需要指定带有 id 的媒体查询以使其与 Yahoo 邮件兼容。

# php - 'where 子句'中的未知列'login'

> ID：10518146
> 
> 赞同：2
> 
> 时间：2012-05-09T14:27:32.757
> 
> 标签：php, mysql, sql-update

是的，我知道，这是常见的问题，但我无法在过去 3 小时内解决它。

我做这个查询：

```
$query = 'UPDATE `'.$masterapp_users_table.'` SET `login` = "'.htmlspecialchars(strip_tags($_POST['login'])).'", `pass` = "'.md5(htmlspecialchars(strip_tags($_POST['pass']))).'", `email` = "'.htmlspecialchars(strip_tags($_POST['email'])).'", `firstname` = "'.htmlspecialchars(strip_tags($_POST['fn'])).'", `secondname` = "'.htmlspecialchars(strip_tags($_POST['sn'])).'" WHERE `login` = "'.htmlspecialchars(strip_tags($_POST['previouslogin'])).'"';
            echo $query.'<br />';
            mysql_query($query) or die(mysql_error()); 
```

我明白了：

```
UPDATE `masterapp_users` SET `login` = "asdasdasd", `pass` = "a3dcb4d229de6fde0db5686dee47145d", `email` = "asdasdasd", `firstname`
= "asdasdasd", `secondname` = "asdasdasd" WHERE `login` = "88888881"<br />Unknown column 'login' in 'where clause' 
```

但它改变了记录！也许有人可以看到我看不到的东西？

哦！忘了说：如果我将该字符串从浏览器粘贴到 PMA，它工作正常。

更新：

```
CREATE TABLE IF NOT EXISTS `masterapp_users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `login` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `pass` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `firstname` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `secondname` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `email` (`email`),
  UNIQUE KEY `login` (`login`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=33 ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T14:29:58.667

该错误表示`MasterApp_Users`未调用表中的列`login`；它是`Login`or `LOGIN`or `log_in`or or or `user`or `username`or `user_name`or ...

在构造字符串的语句中，您有反引号：

```
 UPDATE `'.$masterapp_users_table.'` SET `login` ... 
```

在 中`echo`，那些反引号没有显示。

如果您使用这样的反引号，则列名将区分大小写。CREATE TABLE 语句的拼写究竟是什么？列名是否在反引号内以混合大小写写成？

* * *

...现在我们显示了表模式，它不太可解释（之前不是很容易解释）...

你确定你的浏览器和你的 PHP 连接到同一个数据库吗？

为了进一步调试，我建议更改：

*   用于指定`id`列和适当值的 WHERE 条件。
*   不要设置`login`列。

检查 UPDATE 是否更改了您期望它更改的内容。

如果它没有更改您认为应该更改的记录（但它确实有效），那么您在识别数据库时遇到了问题。

如果您最终没有找到不同的列，我们可以很确定完全不同的表。也许做一个`SELECT * FROM masterapp_users`并查看返回的列定义。

如果它改变了记录，那么我们手上就有一个很深的谜团。

* * *

> 它改变了记录。

投诉专门针对`login`WHERE 子句中的列。如果`id`在 WHERE 子句中指定，是否可以`login`在语句的 SET 子句中设置？

如果是这样，这开始看起来像 DBMS 中的错误。很难理解为什么它会`login`在 WHERE 而不是在 SET 中抱怨。因此，它不太可能成为解决方案。

如果消息更改为大致相当于“ `login`SET 子句中的未知列”的内容，则存在一些自洽性。

如果重命名表中的列并相应地修改代码会发生什么？

* * *

### 解析度

评论 N：

> 如果它允许`SET login = ...`而不是`WHERE login = ...`在单个语句中，那么我认为你有一个错误。我很惊讶; 它不像 DBMS（任何 DBMS）那样反复无常，所以在称它为错误之前我需要非常确定它。这也可能意味着这里还有另一个因素在起作用。如果您在行`echo "Hi"`后添加一个`mysql_query() or die`，那会通过吗？您实际上是在调试错误的 SQL 吗？也许之后有一个 SELECT 或其他格式错误的东西？

评论 N+1：

> 是的，谢谢！在我添加`echo 'Hi';`after 之后`mysql_query`，它出现了，所以问题出在我的下一个查询中。我知道这个问题很愚蠢。*掌心*

谁没有犯过类似的错误？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:03:32.530

如果我的查询在 phpMyAdmin 中有效，但在代码中无效，我要做的第一件事就是更改

```
SELECT `column` FROM `table` 
```

至

```
SELECT `column` FROM `database`.`table` 
```

，或者当然与查询类似`UPDATE`。也许这是您的解决方案，而 MySQL 错误只是有点神秘。

## 编辑：

此外，不要**使用**nor`htmlspecialchars`为`strip_tags`您的查询转义！这是不安全的，因为这不是预期的用途。要转义查询值，最好使用`mysql_real_escape_string`. 为正确的应用程序使用正确的转义函数。我会按如下方式编写您的查询：

```
$query = '
    UPDATE `' . $masterapp_users_table . '`
    SET `login` = "' . mysql_real_escape_string($_POST['login']) . '",
    `pass` = "' . md5($_POST['pass']) . '",
    `email` = "' . mysql_real_escape_string($_POST['email']) . '",
    `firstname` = "' . mysql_real_escape_string($_POST['fn']) . '",
    `secondname` = "' . mysql_real_escape_string($_POST['sn']) . '"
    WHERE `login` = "' . mysql_real_escape_string($_POST['previouslogin']) . '"
';
// To display it in your browser:
echo htmlspecialchars($query) . '<br />';
// To run it:
mysql_query($query) or die(mysql_error()); 
```

这只是一个友好的教训。错误的逃生功能会导致严重的安全漏洞。

# command-line - 如果给定文件或目录被锁定（由任何进程使用），如何检查命令行？

> ID：10518151
> 
> 赞同：18
> 
> 时间：2012-05-09T14:27:50.320
> 
> 标签：command-line, batch-file, windows-xp, filelock

在尝试对此类文件执行任何操作之前，我需要知道这一点。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-09T16:54:07.943

不确定锁定的目录（Windows 有吗？）

但是检测一个文件是否正在被另一个进程写入并不困难。

```
@echo off
2>nul (
  >>test.txt echo off
) && (echo file is not locked) || (echo file is locked) 
```

我使用另一个窗口中的以下测试脚本来锁定文件。

```
(
  >&2 pause
) >> test.txt 
```

当我从一个窗口运行第二个脚本，然后从第二个窗口运行第一个脚本时，我收到“锁定”消息。一旦我按下`<Enter>`第一个窗口，如果我重新运行第一个脚本，我会收到“解锁”消息。

***解释***

每当命令的输出被重定向到文件时，当然必须打开文件以进行写访问。Windows CMD 会话将尝试打开文件，即使该命令没有产生任何输出。

重定向运算符以`>>`附加模式打开文件。

所以`>>test.txt echo off`将尝试打开文件，它不会向文件写入任何内容（假设 echo 已经关闭），然后关闭文件。该文件不会以任何方式修改。

大多数进程在打开文件进行写访问时都会锁定文件。（有一些操作系统系统调用允许打开文件以在共享模式下写入，但这不是默认设置）。因此，如果另一个进程已经锁定“test.txt”以进行写入，则重定向将失败，并发送以下错误消息到 stderr - *“该进程无法访问该文件，因为它正被另一个进程使用。”* . 重定向失败时也会生成错误代码。如果命令和重定向成功，则返回成功代码。

简单地添加`2>nul`到命令不会阻止错误消息，因为它重定向命令的错误输出，而不是重定向。这就是为什么我将命令括在括号中，然后将错误输出重定向到括号外的 nul 。

所以错误消息被有效地隐藏了，但错误代码仍然在括号之外传播。标准的 Windows`&&`和`||`操作符用于检测括号内的命令是成功还是失败。大概`echo off`永远不会失败，所以失败的唯一可能原因是重定向失败。它很可能是由于锁定问题而失败，尽管从技术上讲可能还有其他失败原因。

这是一个奇怪的“功能”，Windows 不会在重定向失败时将 %ERRORLEVEL% 动态变量设置为错误，除非使用了`||`运算符。（请参阅[Windows 中的文件重定向和 %errorlevel%](https://stackoverflow.com/questions/10354016/file-redirection-in-windows-and-errorlevel)）。因此，`||`操作员必须在某个低级别读取返回的错误代码，而不是通过 %ERRORLEVEL% 变量。

使用这些技术来检测重定向失败在批处理上下文中非常有用。它可用于建立允许在并行进程中序列化多个事件的锁。例如，它可以使多个进程在“同一”时间安全地写入同一个日志文件。[在 Windows 下如何共享日志文件？](https://stackoverflow.com/questions/9337415/how-do-you-have-shared-log-files-under-windows/9344547#9344547)

* * *

编辑

关于锁定的文件夹。我不确定 Windows 是如何实现这一点的，也许是带锁的。但是如果一个进程有一个涉及该文件夹的活动目录，则不能重命名该文件夹。可以很容易地使用

```
2>nul ren folderName folderName && echo Folder is NOT locked || echo folder is LOCKED 
```

* * *

编辑

从那以后，我了解到`(call )` *（有空格）*是一个非常快速的命令，没有副作用，可以保证在 ERRORLEVEL 设置为 0 时成功。并且`(call)` *（没有空格）*是一个没有副作用的快速命令，保证在 ERRORLEVEL 1 时失败.

所以我现在使用以下内容来检查文件是否被锁定：

```
2>nul (
  >>test.txt (call )
) && (echo file is not locked) || (echo file is locked) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-17T22:05:03.130

除了来自 dbenham 的[出色回答](https://stackoverflow.com/a/10520609/1333331)外，以下表格最终帮助我理解了使用的技术：

```
( type nul >> file.txt ) 2>nul || echo File is locked! 
```

`type nul`command 给出一个空输出，并且不会像`echo off`原始命令中的命令那样影响当前的回显设置。

如果您想使用`if–then–else`条件，请记住正确的顺序 - 成功语句 ( `&&`) 排在第一位，备用语句 ( `||`) 排在第二位：

```
command && (echo Command is successful) || (echo Command has failed) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-09T14:48:22.363

如果您下载并安装 Windows Server 2003 资源工具包工具，则有一个名为的实用程序`oh.exe`将列出给定文件的打开文件句柄：

[http://www.microsoft.com/en-us/download/details.aspx?id=17657](http://www.microsoft.com/en-us/download/details.aspx?id=17657)

安装后，重新启动计算机，您就可以使用该实用程序了。您可以在帮助和支持中心以及`oh /?`在命令提示符下键入来查看所有选项。

（信息来自： http: [//windowsxp.mvps.org/processlock.htm](http://windowsxp.mvps.org/processlock.htm)）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-13T17:43:59.580

请注意，与设置返回代码的批处理命令相比，写入说明文件状态的消息的帮助较小。例如，如果文件被锁定，则返回代码 1。

```
@echo off
2>nul (
   >>test.tmp echo off
) && (EXIT /B 0) || (EXIT /B 1) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-09T19:11:15.810

其他答案对我产生了副作用。例如，[此答案](https://stackoverflow.com/a/6970119/847382)中的以下内容将导致文件观察者触发：

```
COPY /B app.exe+NUL app.exe 
```

[此处最佳答案](https://stackoverflow.com/a/10520609/847382)中的以下内容将覆盖对目标文件所做的任何更改：

```
2>nul (
  >>test.txt (call )
) && (echo file is not locked) || (echo file is locked) 
```

在现代版本的 Windows 上，您可以调用 Powershell 以零副作用完成此任务：

```
powershell -Command "$FileStream = [System.IO.File]::Open('%FILE%', 'Open', 'Write'); $FileStream.Close(); $FileStream.Dispose()" && (echo File is not locked) || (echo File is locked) 
```

这根本不会修改文件或其元数据，即使它没有被锁定。

### 示例用法

我在我的自定义 git mergetool 脚本中使用此方法来合并 Excel 文件。git mergetool的工作方式是等待脚本shell退出，然后检查目标文件是否被修改，提示“XX.yyy似乎没有改变。合并成功[y/n]？” 如果不是。但是，Excel（至少我正在使用的版本）不会为它打开的每个文件生成一个新进程。因此，如果 Excel 已经打开，脚本将立即退出，并且 git 将检测到文件没有更改，从而导致该提示。

所以我设计了上面的方法，我像下面这样使用它：

```
REM block until MERGED is closed
:loop
powershell -Command "$FileStream = [System.IO.File]::Open('%MERGED%', 'Open', 'Write'); $FileStream.Close(); $FileStream.Dispose()" >NUL 2>NUL || (goto :loop) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-19T20:32:27.030

顺便说一句，dbenham 的解决方案似乎也是一种确定进程是否正在运行的有效方法。这是我为以下应用找到的最佳解决方案：

```
start /b "job1.exe >> job1.out"
start /b /wait "job2.exe >> job2.out"   

::wait for job1 to finish using dbenham's code to check if job1.out is in use

comparejobs.exe 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-11T11:27:49.403

只是我想与您分享一个基于@dbenham 技巧的脚本示例

***该脚本的描述： Check_Locked_Files.bat ：*** 该脚本可以扫描并检查一组文件夹上的锁定文件，这些文件夹可以修改到脚本中；例如，我选择了要扫描的那些文件夹集：

```
Set Folders=^
^ "%ProgramData%\Microsoft\Windows\Start Menu\Programs\Startup"^
^ "%UserProfile%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup"^
^ "%ProgramFiles%\Internet Explorer"^
^ "%ProgramFiles%\Skype"^
^ "%ProgramFiles%\TeamViewer"^
^ "%WinDir%\system32\drivers"^
^ "%Temp%" 
```

输出结果为 HTML 格式以提高可读性。

如果文件被锁定，我们将其显示为红色，否则我们将其显示为绿色。

整个脚本是：***Check_Locked_Files.bat***

```
@echo off
Rem This source is inspired from here
Rem hxxps://stackoverflow.com/questions/
Rem 10518151/how-to-check-in-command-line-if-a-given-file-or-directory-is-locked-used-by-any?answertab=active#tab-top
Rem Thanks for dbenham for this nice trick ;)
Mode con cols=90 lines=5 & color 9E
Title Scan and Check for Locked Files by Hackoo 2017 
set "LogFile=%~dp0%~n0.html"
(
    echo ^<html^>
    echo ^<title^> Scan and Check for locked files by Hackoo 2017^</title^>
    echo ^<body bgcolor^=#ffdfb7^>
    echo ^<center^>^<b^>Log Started on %Date% @ %Time% by the user : "%username%" on the computer : "%ComputerName%"^</b^>^</center^>
)> "%LogFile%"
echo(
echo       --------------------------------------------------------------------------
echo         Please Wait a while ....... Scanning for locked files is in progress 
echo       --------------------------------------------------------------------------
Rem We Play radio just for fun and in order to let the user be patient until the scan ended
Call :Play_DJ_Buzz_Radio
Timeout /T 3 /nobreak>nul
cls
Set Folders=^
^ "%ProgramData%\Microsoft\Windows\Start Menu\Programs\Startup"^
^ "%UserProfile%\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup"^
^ "%ProgramFiles%\Internet Explorer"^
^ "%ProgramFiles%\Skype"^
^ "%ProgramFiles%\TeamViewer"^
^ "%WinDir%\system32\drivers"^
^ "%Temp%" 

@For %%a in (%Folders%) Do (
    ( echo ^<hr^>^<font color^=DarkOrange^>^<B^>Folder : %%a^</B^>^</font^>^<hr^>) >> "%LogFile%"
    @for /f "delims=" %%b in ('Dir /A-D /s /b "%%~a\*.*"') do (
        Call :Scanning "%%~nxb"
        Call:Check_Locked_File "%%~b" "%LogFile%"
    )
)

(
    echo ^<hr^>
    echo ^<center^>^<b^>Log ended on %Date% @ %Time% on the computer : "%ComputerName%"^</b^>^</center^>
    echo ^</body^>
    echo ^</html^>
)>> "%LogFile%"
Start "" "%LogFile%" & Call :Stop_Radio & exit
::***********************************************************************************
:Check_Locked_File <File> <LogFile>
(
    2>nul (
    >>%1 (call )
    ) && ( @echo ^<font color^=green^>file "%~1"^</font^>^<br^>
    ) || ( 
        @echo ^<font color^=red^>file "%~1" is locked and is in use^</font^>^<br^> 
    ) 
)>>%2 2>nul
exit /b
::***********************************************************************************
:Scanning <file>
cls
echo(
echo       --------------------------------------------------------------------------
echo          Please Wait a while... Scanning for %1
echo       --------------------------------------------------------------------------
exit /b
::***********************************************************************************
:Play_DJ_Buzz_Radio
Taskkill /IM "wscript.exe" /F >nul 2>&1
Set "vbsfile=%temp%\DJBuzzRadio.vbs"
Set "URL=http://www.chocradios.ch/djbuzzradio_windows.mp3.asx"
Call:Play "%URL%" "%vbsfile%"
Start "" "%vbsfile%"
Exit /b
::**************************************************************
:Play
(
echo Play "%~1"
echo Sub Play(URL^)
echo    Dim Sound
echo    Set Sound = CreateObject("WMPlayer.OCX"^)
echo    Sound.URL = URL
echo    Sound.settings.volume = 100
echo    Sound.Controls.play
echo    do while Sound.currentmedia.duration = 0
echo        wscript.sleep 100
echo    loop
echo    wscript.sleep (int(Sound.currentmedia.duration^)+1^)*1000
echo End Sub
)>%~2
exit /b
::**************************************************************
:Stop_Radio
Taskkill /IM "wscript.exe" /F >nul 2>&1
If Exist "%vbsfile%" Del "%vbsfile%"
::************************************************************** 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-08T20:50:37.373

```
:: Create the file Running.tmp

ECHO %DATE% > Running.tmp
ECHO %TIME% >> Running.tmp

:: block it and do the work

(
  >&2 CALL :Work 30
) >> Running.tmp

:: when the work is finished, delete the file
DEL Running.tmp
GOTO EOF

:: put here the work to be done by the batch file

:Work
ping 127.0.0.1 -n 2 -w 1000 > NUL
ping 127.0.0.1 -n %1 -w 1000 > NUL

:: when the process finishes, the execution go back
:: to the line after the CALL 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-22T10:54:26.170

如果你想在 Cygwin Bash 中使用它，这里是单行：

```
# To lock a file: (in a different window)
cmd.exe /C "( >&2 pause ) >> test.txt"
#Press any key to continue . . .

# To test if a file is locked (with text)
cmd.exe /C "2>nul ( >>test.txt (call ) ) && (echo ok) || (echo locked)"
#locked

# To test if a file is locked (with POSIX exit code)
cmd.exe /C "2>nul ( >>test.txt (call ) ) && (exit /b 0) || (exit /b 1)"
echo $?
#1 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-02T08:18:27.160

如果是 windows 网络共享，您可以尝试 powershell 命令：

```
Get-SmbOpenFile 
```

例如以管理员身份执行文件服务器命令：

```
Get-SmbOpenFile | Where-Object -Property Path -match "file.txt" 
```

# java - 如何在 jsp/struts2 中访问 servlet-context？

> ID：10518152
> 
> 赞同：0
> 
> 时间：2012-05-09T14:27:52.987
> 
> 标签：java, jsp

我有一个`HashMap<Long, ClientProperties>`在启动时放在 ServletContext 上的东西。

```
//During application-startup:
//getProperties() returns HashMap<Long, ClientProperties>
context.setAttribute("clientProps", clientManager.getProperties()); 
```

ClientProperties 是一个 POJO，具有我需要在我的 jsp 中访问的 5 个属性。基本上我需要获得正确的 POJO（通过 HashMap-key）并在我的 jsp 中访问它的属性。

更特别（例如目的），POJO 属性之一是`clientLogo` 在我的 jsp 中，我现在有： `<img src="<c:url value='/images/logo.png'/>" alt="Logo">`

我需要用 POJO 的 clientLogo-property 替换 logo-file 的路径。要使用的 HashMap-key 应该从存储在会话中的用户对象中提取。可以这样检索：`${sessionScope['user'].clientId}`

有任何想法吗？如果这很重要，请使用 struts2 和 spring btw。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:23:52.007

要从 servlet 上下文中获取属性`foo`，可以使用与从会话中获取属性相同的语法，但将 sessionScope 替换为 applicationScope。

但是你这里有很多嵌套的东西，你应该定义变量：

```
<c:set var="map" value="${applicationScope['clientProps']}"/>
<c:set var="mapKey" value="${sessionScope['user'].clientId}"/>
<c:set var="pojo" value="${map[mapKey]}"/>
<c:set var="clientLogo" value="${pojo.clientLogo}"/>

<c:url value="${clientLogo}"/> 
```

请注意，这通常是您不应该在视图中进行的艰苦工作。在控制器中用 Java 实现图像路径的检索，并将其作为您的操作/表单的属性提供，并直接从您的视图中访问它。

# ruby-on-rails - Rspec + Capybara + requests：have_selector 不返回任何内容

> ID：10518154
> 
> 赞同：1
> 
> 时间：2012-05-09T14:28:12.973
> 
> 标签：ruby-on-rails, capybara, rspec2

我有以下请求 rspec 测试：

```
describe "CRUD" do
  it "should list users" do
    10.times do
      FactoryGirl.create(:user)
    end

    visit users_path
    page.should have_selector('table tr', :count => 10)
  end
end 
```

问题是它总是给出这个错误：

```
1) Users CRUD should list users
    Failure/Error: page.should have_selector('table tr', :count => 10)
    expected css "table tr" to return something 
```

关于为什么会发生这种情况的任何想法？它看起来与 rspec 手册中的测试非常相似。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:56:38.607

根据 capybara 文档，提供该确切数字的计数检查。您正在检查 10 行，但您有 12 行。

[http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers#has_selector%3F-instance_method](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers#has_selector%3F-instance_method)

# javascript - JavaScript 无法在我的 Rails 应用程序上运行

> ID：10518159
> 
> 赞同：1
> 
> 时间：2012-05-09T14:28:27.210
> 
> 标签：javascript, jquery, ruby-on-rails

我在我的 rails 应用程序中运行 js/jquery 时遇到问题。我安装了 Ruby 1.9.3 和 Rails 3.2.3。

我在 /app/assets/javascripts 中有两个 js 文件：

```
application.js
main.js 
```

我创建了这个 main.js。里面有这段代码

```
$(document).ready(function() {
    alert('Hello world!');
}); 
```

我的 application.js 有以下内容：

```
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require main.js 
```

当我打开我的应用程序时，没有弹出警告消息！

打开源代码，我看到了所有的 js 文件：

```
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/main.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

我做错了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:38:43.413

```
//= require_tree . 
```

应该始终是 application.js 文件中的最后一行

```
$(document).ready(function() {
    alert('Hello world!');
}) 
```

也不需要最后一个分号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:15:22.863

好吧，伙计们，我犯了一个错误。出于抽象目的，我提供了有关我的 js 文件名称的虚假信息。my 的原始名称是 advert.js，无论出于何种原因，它都没有作为 js 执行。我记得我在这个项目中使用了 advert.css，而且它也没有被 rails 识别为 css，即使它被加载了。我将那个 advert.css 重命名为 popup.css 并且它起作用了，所以现在我的 advert.js 也起作用了。将其重命名为 popup.js 并且可以正常工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:31:35.000

尝试在*main.js*的顶部写`alert($);`或。`console.log($);`

 *是`$`未定义的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:06:47.877

**根据您的帖子， jQuery.js**和**jquery_ujs.js**不在您的资产文件夹中*

# validation - 验证是一个交叉问题吗？

> ID：10518162
> 
> 赞同：5
> 
> 时间：2012-05-09T14:28:47.833
> 
> 标签：validation, aop

我的一些同事认为验证是横切关注点的一个例子，并认为面向方面编程是处理验证关注点的好方法。要使用 PostSharp 表示法，他们认为这样的做法是个好主意：

```
[InRange(20.0, 80.0)]
public double Weight
{
    get { return this.weight; }
    set { this.weight = value; }
} 
```

我的观点是验证是算法的固有部分，没有必要使用 AOP 将其推到幕后。然而，这很像一种直觉，我对此没有非常明确的理由。

你认为什么时候用 AOP 处理验证是个好主意，什么时候用你的主代码内联处理它更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:48:20.710

看起来很像MVC 使用的[Microsoft DataAnnotations 。](http://msdn.microsoft.com/en-us/library/ee256141.aspx)

您并没有真正“把它推到幕后”，因为所有相关信息都在属性构造函数中。您只是将嘈杂的样板推到幕后并进入自己的班级。您也不再需要显式的支持字段，您可以只使用自动获取器和设置器。所以现在，8 行（或更多）代码可以减少到 1 行和 1 个属性。

我认为，如果您的替代方法是将一些验证代码放在 setter 中，并且您在项目中多次执行此操作以使其成为重复的样板，那么**是的，我认为这是一个有效的横切关注点**，适合使用 PostSharp . 否则，我认为目前还没有一两个地方可以证明引入第三方工具是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T22:18:59.603

我认为这是一个横切关注点，尽管我从未专门使用 AOP 实现它。

也就是说，有许多不同的验证场景，我怀疑它们都可能完全是黑色或白色。

[Microsoft 模式和实践 - 横切关注点](http://msdn.microsoft.com/en-us/library/ee658105.aspx)

# android - Android - 将 TextViews 动态添加到 ListView

> ID：10518163
> 
> 赞同：0
> 
> 时间：2012-05-09T14:28:53.177
> 
> 标签：android, listview, textview

所以我想在JAVA中将TextView添加到我的主ListView中，我遇到了一些问题......

而不是给我TextView的值，我得到的只是一些随机的垃圾，比如：

```
 android.Widget.TextView@somerandomnumbersandtext 
```

我正在添加这样的文本视图：

```
 adapter=new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listItems);
    setListAdapter(adapter);
    TextView tv = new TextView(SpellCast.this);
    TextView tvC = new TextView(SpellCast.this);
    tv.setText(name[i]);
    tvC.setText(Integer.toString(current[i]));
    tvC.setId(i);
    tv.setGravity(Gravity.LEFT);
    tvC.setGravity(Gravity.RIGHT);
    listItems.add(tv + "");
    adapter.notifyDataSetChanged(); 
```

为什么这不起作用？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:32:55.407

您应该添加一个字符串而不是文本视图。

当您打电话时，`adapter=new ArrayAdapter<String>`您是在说“我正在定义一个新的 ArrayAdapter，它将包含 'String' 类型的项目”

因此，当您尝试将项目添加到列表视图时，它需要一个字符串。当你添加一个文本视图时，它只是在`toString()`文本视图上执行一个，这就是你得到那个时髦文本的原因。

相反，通过调用将您的文本直接添加到列表视图

```
listItems.add(name[i]); 
```

# java - 客户端-服务器套接字：未达到 if 语句

> ID：10518164
> 
> 赞同：0
> 
> 时间：2012-05-09T14:28:57.513
> 
> 标签：java, sockets, client-server

> **可能重复：**
> [为什么我的应用程序没有进入我的 if 语句](https://stackoverflow.com/questions/10516802/why-isnt-my-application-entering-my-if-statement)

我正在尝试用 Java 编写控制台客户端-服务器应用程序；使用套接字，我目前有一个简单的登录系统和一个简单的命令系统。登录系统似乎工作，连接似乎工作。

但是，命令系统似乎根本不起作用，当服务器收到命令时，它似乎没有发回任何东西。

所以我的主要问题是为什么我的服务器在收到命令时不向客户端发送任何内容？

这是我的服务器：

```
import java.io.*;
import java.net.*;

class TCPServer2
{
public static void main(String argv[]) throws Exception
{
//error is caused by command being used differently to login & username/password strings.
//consider removing command as a set string and adding a statement which takes
//the readLine value, adds it to a string and the command is the value of said string.
//If string is = "listLanguages" do this else if = "getcost" do this else "invalid cmd".

    ServerSocket welcomeSocket = new ServerSocket(6789);
Map<String, String> userDetails = new HashMap<String, String>();
userDetails.put("JOHN","UNCP");
userDetails.put("MATT","UNCP");
    String Command;
    String username;
    String username1;
    String password;
    String password1;
    String cmd;
    while(true)
    {
        Socket connectionSocket = welcomeSocket.accept();
        BufferedReader inFromClient =
           new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
        DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
        username = inFromClient.readLine();
        System.out.println("\nUsername received: " + username);
        password = inFromClient.readLine();
        System.out.println("\nPassword received: " + password);
        username1=username.toUpperCase();
        password1=password.toUpperCase();

if (userDetails.get(username1).equals(password1))
{
    outToClient.writeBytes("Hello " + username1);
              outToClient.writeBytes("\nOther users registered on the server currently include: \n");

  for (String str : userDetails.keySet())
  {
      outToClient.writeBytes(str);
  }

}
else
{
   outToClient.writeBytes("Invalid Username and/or password.\n");
}

                        BufferedReader inFromClient2 =
           new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
        DataOutputStream outToClient2 = new DataOutputStream(connectionSocket.getOutputStream());
        Command = inFromClient2.readLine();
        System.out.println("\nCommand received: " + Command);

if(Command.equals("listTranslations"))
{
outToClient2.writeBytes("English,Thai,Geordie,etc.");
}
else
{
if(Command.equals("getCost"))
{
outToClient2.writeBytes("£100\n");
}
else
{
outToClient2.writeBytes("Invalid Command");
}
}

} 

    }
} 
```

这是我的客户：

```
import java.io.*;
import java.net.*;

class TCPClient2
{
public static void main(String argv[]) throws Exception
{
     String userName;
     String passWord;
     String loginInfo;
     String loginInfo2;
     String loginInfo3;
     String command;
     String commandInfo;
     String commandInfo2;

     BufferedReader inFromUser = new BufferedReader( new InputStreamReader(System.in));
     Socket clientSocket = new Socket("localhost", 6789);
     DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
     BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

     System.out.println("Username: ");
     userName = inFromUser.readLine();
     outToServer.writeBytes(userName + "\n");

     System.out.println("Password: ");
     passWord = inFromUser.readLine();
     outToServer.writeBytes(passWord + "\n");

     loginInfo = inFromServer.readLine();
     System.out.println(loginInfo);
     loginInfo2 = inFromServer.readLine();
     System.out.println(loginInfo2);
     loginInfo3 = inFromServer.readLine();
     System.out.println(loginInfo3);

     System.out.println("Please enter a command: ");
     command = inFromUser.readLine();
     outToServer.writeBytes(command);

     commandInfo = inFromServer.readLine();
     System.out.println(commandInfo);
     commandInfo2 = inFromServer.readLine();
     System.out.println(commandInfo);

     clientSocket.close();
 }
} 
```

它的工作原理如下：客户端连接到服务器，客户端要求用户登录，用户输入他的登录信息，服务器检查登录信息，服务器告诉客户端它已成功登录，客户端询问用户输入命令，用户输入命令（请求价格），命令被发送到服务器，服务器发回所需的信息，然后它应该循环回被要求输入命令的用户。

但是，它不这样做。用户登录后卡在“当前在服务器上注册的其他用户包括：”行，没有打印任何数据。

为什么要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:04:58.380

为什么它会卡住可能是因为客户端和服务器都在 readLine() 上导致死锁。客户端等待传入的数据，服务器也是如此，因为这是一个命令提示符客户端和服务器，你没有“按钮”来发送数据。

我会添加信息来显示它正在打印的变量，这样你就可以轻松地跟踪它卡在哪里。例子：

```
loginInfo = inFromServer.readLine();
     System.out.println("loginInfo client Side "+loginInfo); 
```

这将显示它正在打印位于客户端中的 loginInfo 变量。现在，您可以轻松地跟踪流程并找到问题所在。

我从未做过命令提示服务器/客户端（仅 gui），但是当您使用当前设计打印用户列表时，您可能想要构建一个包含所有用户名的字符串，将整个字符串发送到客户端，然后客户端用 StringBuilder 分隔字符串并打印结果。这是因为客户端不知道服务器将发送多少个“用户名”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:01:55.717

在发送下一行之前，您是否尝试过刷新数据输出流编写器的缓冲区。我也很好奇为什么您为一个客户端使用两种不同的数据输出流编写器和输入流读取器。您不能对程序的两个部分都使用相同的部分吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:19:44.297

问题在于不正确的套接字数据读/写方法。当您将数据写入套接字时，您必须始终使用 flush()。如果你评论行

```
 //loginInfo3 = inFromServer.readLine();
 //System.out.println(loginInfo3); 
```

然后您可以看到客户端显示“请输入命令”，但在您输入命令后，套接字未刷新/关闭，因此服务器一直在等待。

服务器和客户端代码的主要问题是正确的握手。您必须在一个块中编写代码，打开套接字，编写命令，获取响应并关闭套接字。这应该是输入数据的常用方法。您在没有正确刷新/关闭的情况下将套接字和数据写入流，因此它在不同的点等待。

# salesforce - 在 Salesforce 页面中添加标签自定义字段

> ID：10518166
> 
> 赞同：3
> 
> 时间：2012-05-09T14:29:08.270
> 
> 标签：salesforce, visualforce

我正在尝试在 Salesforce 页面中放置一个复选框，但问题是所需的消息超过 40 个字符，因此它不适合复选框标签（最多 40 个字符）

我尝试在复选框顶部添加两个自定义字段，但问题是这些字段即使它们是只读的，用户也可以在那里编辑内容（文本（255））或无法看到它们（公式（文本））编辑模式。

有什么方法可以在不创建自定义页面并将其附加到页面中的情况下做到这一点？

![在此处输入图像描述](../Images/db70fec2e0f97ab47e6000ca713e35e4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:22:19.957

这不是一个理想的解决方案，但您可以在页面布局上创建一个新部分，这将允许显示比标签更多的文本。然后只将您的确认复选框字段放在该部分中。

这将有效地为您提供您正在寻找的长标签描述。

![在此处输入图像描述](../Images/ce4f99836ce5f1ddfb5ec011df2ee065.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:52:34.183

您可以创建一个非常简单的 Visualforce 页面：

```
<apex:page standardController="Account" showHeader="false" sidebar="false">
  I confirm that the new account is open
</apex:page> 
```

将控制器设置为您的对象；我在这里使用“帐户”。

然后，您将 Visualforce 页面直接插入页面布局，就像您插入字段一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:49:29.957

听起来您需要 visualforce 或 S-Controls（现已弃用）

另一种方法是制作一个文本框并用信息预填充它，但我认为这也需要这些技术

如果您想出解决方案，请告诉我。

# orchardcms - Orchard cms，在管理菜单上创建所选内容的列表

> ID：10518171
> 
> 赞同：0
> 
> 时间：2012-05-09T14:29:22.920
> 
> 标签：orchardcms

我正在尝试通过查询并在管理菜单上显示列表来制作特定内容类型的列表。我创建了一个投影来关联查询并添加到管理菜单中。但是当我单击创建的菜单时，它会导航到投影定义的编辑模式，但我期待一个列表。任何人都可以帮助如何创建可以从管理菜单访问的选定内容类型的列表吗？

问候乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:26:48.217

Vandelay.Industries 中有添加自定义内容项列表的代码示例。Vandelay 的 repo 可以在[这里](https://github.com/bleroy/vandelay/)找到。

它的工作方式是它实际上只是创建管理菜单项，这些管理菜单项指向显示内容项列表`Admin`的功能中的现有控制器。`Content`该控制器已经具备按内容类型过滤项目的功能。

```
item.Action("List", "Admin",
    new RouteValueDictionary {
        {"area", "Contents"},
        {"model.Id", definition.Name}
    }) 
```

如果您想为自己的特定目的编写自己的版本，您可以[在 Orchard repo 中找到有问题的控制器](https://github.com/OrchardCMS/Orchard/blob/dev/src/Orchard.Web/Core/Contents/Controllers/AdminController.cs)（但同样，如果您只想在管理员中显示按类型过滤的项目，则不需要方式与仪表板的其余部分一致）。

相关代码是这样的：

```
_contentManager.Query(versionOptions, model.TypeName); 
```

# java - JBoss AS 7.1.1 没有选择我的 JSF 实现

> ID：10518172
> 
> 赞同：10
> 
> 时间：2012-05-09T14:29:24.033
> 
> 标签：java, jsf, jboss7.x

当我在 JBoss AS 7.1.1 中部署我的 .war 文件并调用

```
FacesContext.class.getPackage().getImplementationTitle() 
```

和

```
FacesContext.class.getPackage().getImplementationVersion() 
```

当我在tomcat上部署它时，我得到了一个不同的版本。

JBoss：JSF JavaServer Faces API 2.0.1.Final

Tomcat：JSF Mojarra 2.0.6-FCS

似乎 JBoss 没有选择我在`WEB-INF\lib\`. 这会导致我的网站出现不同的行为。我试图解决这个问题

```
<context-param>
   <param-name>org.jboss.jbossfaces.WAR_BUNDLES_JSF_IMPL</param-name>
   <param-value>true</param-value>
</context-param> 
```

但这没有用。我用 JBoss 71 阅读[了 Alternative JSF implementation，](https://stackoverflow.com/questions/7080081/alternative-jsf-implementation-with-jboss-71)但显然它在 7.1.1 中没有解决。

我添加`jboss-deployment-structure.xml`了`WEB-INF\`以下内容。

```
<jboss-deployment-structure> 
<deployment>
    <exclusions>
      <module name="javax.faces.api" slot="main"/>
      <module name="com.sun.jsf-impl" slot="main"/>
    </exclusions>
    <dependencies>
      <module name="org.apache.commons.logging" />
      <module name="org.apache.commons.collections" />
      <module name="org.apache.log4j" />
      <module name="org.dom4j" />
      <module name="javax.faces.api" slot="1.2"/>
      <module name="com.sun.jsf-impl" slot="1.2"/>
    </dependencies>
  </deployment>   
</jboss-deployment-structure> 
```

但后来我的应用程序没有部署，我收到以下错误`server.log`：

```
14:06:14,733 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-4) Critical error during deployment: : com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! Class org.jboss.as.web.deployment.jsf.JandexAnnotationProvider is not an instance of com.sun.faces.spi.AnnotationProvider
at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:357) [jsf-impl.jar:2.0.6-FCS] 
```

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T19:19:37.263

是否还有其他依赖于 JSF API 的东西？我不确定为什么 JBoss 和 Tomcat 之间会有所不同，但请尝试在排除和不排除 JSF 的情况下运行 mvn dependency:tree 和 mvn dependency:analyze。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-11T15:59:27.663

JBoss AS 7.1.1 默认使用 JSF 2，但向后兼容 JSF 1.2。

我有同样的问题并解决如下：我使用了`jboss-deployment-structure.xml`和你一样的方法，并在中添加了以下参数`web.xml`：

```
<context-param>
 <param-name>org.jboss.jbossfaces.JSF_CONFIG_NAME</param-name>
 <param-value>Mojarra-1.2</param-value>
</context-param> 
```

您不需要`lib`目录中的 JSF 1.2 JAR（因此在`org.jboss.jbossfaces.WAR_BUNDLES_JSF_IMPL`中不需要该参数`web.xml`）。

来源：[http ://tapas-tanmoy-bose.blogspot.ch/2014/01/how-to-run-jsf-12-application-in-jboss.html](http://tapas-tanmoy-bose.blogspot.ch/2014/01/how-to-run-jsf-12-application-in-jboss.html)

我怀疑 JBoss AS 7.1.1 忽略了`jboss-deployment-structure.xml`JSF 的排除模块（但我有`org.hibernate`另一个被有效排除的排除模块，证明`jboss-deployment-structure.xml`已考虑到）。

# php - 使用一个正则表达式在特定 div 中获取多个链接

> ID：10518176
> 
> 赞同：0
> 
> 时间：2012-05-09T14:29:39.603
> 
> 标签：php, regex

看看这个html：

```
<div class="foo"><a href="link1">link1</a><a href="link2">link2</a></div>
<div class="bar"><a href="barlink">barlink</a></div> 
```

我想知道是否可以使用 php.ini 中的正则表达式在 foo 中的所有链接中循环。我试过这个但不工作：

```
preg_match_all(
  '#<div.*?class="foo".*?<a.*?>(?P<text>.*?)</a>#xi', 
  $text, 
  $matches, 
  PREG_SET_ORDER
); 
```

遗憾的是，在这种情况下，它必须是正则表达式，而不是 xml 或其他解析器。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-09T19:39:29.657

不要使用正则表达式来解析 HTML。

```
<?php
$content = 
'<div class="foo">
<a href="link1">link1</a>
<a href="link2">link2</a>
</div>
<div class="bar">
<a href="barlink">barlink</a>
</div>';

$dom = new DOMDocument();
$dom->loadHTML($content);
$divs = $dom->getElementsByTagName('div');
foreach($divs as $div)
{
    $classes = explode(' ', $div->getAttribute('class'));
    if(in_array('foo', $classes) || trim($div->getAttribute('class')) === 'foo')
    {
        foreach($div->getElementsByTagName('a') as $link)
        {
            echo $dom->saveXML($link);
        }
    }
}
?> 
```

这将输出任何 div 类为“foo”的所有匹配链接。

不应该使用正则表达式来解析 HTML，因为 HTML 本身不是常规语言。它可能会变得非常草率，并且您最终可能会遇到比开始时更多的问题，尤其是当您可能正在处理格式错误的 HTML 时。

# c# - 从 ListBox C# win 表单中读取 XML 文件内容

> ID：10518179
> 
> 赞同：0
> 
> 时间：2012-05-09T14:29:46.320
> 
> 标签：c#, winforms, visual-studio-2010, xml-serialization, xml-parsing

我有一个`ListBox`＆它有一些文件。我有 2 个`Panels`相同的格式，每个`Panel`都有很多`Labels`是`ListBox`.

每当用户选择每个文件时，就会在面板中显示所选文件的相应数据。

例如，这是文件内容之一：

```
 <connection>
    <sourceId>sdfsdf</sourceId>
    <description>test.sdfds.interact.loop.com</description>
    <uri>https://test.sdf.interact.loop.com/WITSML/Store/Store.asmx</uri>
    <username>sdfdsf</username>
    <organizationFilter>*</organizationFilter>
    <fieldFilter>*</fieldFilter>
  </connection> 
```

列表框 1：

```
private void Form1_Load(object sender, EventArgs e)
        {
            PopulateListBox(listbox1, @"C:\TestLoadFiles", "*.rtld");

        }

private void PopulateListBox(ListBox lsb, string Folder, string FileType)
        {
            DirectoryInfo dinfo = new DirectoryInfo(Folder);
            FileInfo[] Files = dinfo.GetFiles(FileType);
            foreach (FileInfo file in Files)
            {
                lsb.Items.Add(file.Name);
            }
        } 
```

如何读取和显示数据？有人请向我解释如何读取/解析目录中的 xml 文件并显示数据？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:08:48.427

如果我理解正确，这应该可以帮助您入门。

```
string path = "C:\\TestLoadFiles.xml";
string xmldoc = File.ReadAllText(path);

using (XmlReader reader = XmlRead.Create(xmldoc))
{
    reader.MoveToContent();
    label_sourceId.Text = reader.GetAttribute("sourceId");
    label_description.Text = reader.GetAttribute("description");
    // ... for each label if everything will always be the same
    // might be better to read in the file, verify it, then set your labels
} 
```

编辑：
实际上开关可能会更好：

```
while (reader.MoveToNextAttribute())
{
  switch (reader.Name)
  {
    case "description":
      if (!string.IsNullOrEmpty(reader.Value))
        label_description.Text = reader.Value;
      break;
    case "sourceId":
      if (!string.IsNullOrEmpty(reader.Value))
        label_sourceId.Text = reader.Value;
      break;
    // ...
  }
} 
```

编辑2：

所以列表框包含文件名。

```
private void listBox1_SelectedIndexChanged(object sender, System.EventArgs e)
{
    string path = (string)listBox1.SelectedItem;
    DisplayFile(path);
} 
private void DisplayFile(string path)
{
    string xmldoc = File.ReadAllText(path);

    using (XmlReader reader = XmlRead.Create(xmldoc))
    {   

        while (reader.MoveToNextAttribute())
        {
          switch (reader.Name)
          {
            case "description":
              if (!string.IsNullOrEmpty(reader.Value))
                label_description.Text = reader.Value; // your label name
              break;
            case "sourceId":
              if (!string.IsNullOrEmpty(reader.Value))
                label_sourceId.Text = reader.Value; // your label name
              break;
            // ... continue for each label
           }
        }
    }
} 
```

# vb.net - 如何查看时间范围

> ID：10518181
> 
> 赞同：1
> 
> 时间：2012-05-09T14:29:57.217
> 
> 标签：vb.net

我实现了一个函数来检查 vb.net 中的时间范围。但它给了我错误的输出。我的开始时间是每天晚上 11 点，结束时间是早上 5 点。如果我通过 1.10 AM，我的函数不会返回真正的输出，因为这属于该时间范围。不知道我做错了什么。

```
Private Function CheckTimeRange() As Boolean
  Dim retValue As Boolean = True
  Try
    Dim Dt As DateTime = DateTime.Now
    Dim StartDt As DateTime = Convert.ToDateTime("11.00 PM")
    Dim EndDt As DateTime =  Convert.ToDateTime("5.00 AM")

    Dim startTime As New TimeSpan(StartDt.Hour, StartDt.Minute, 0)
    Dim endTime As New TimeSpan(EndDt.Hour, EndDt.Minute, 0)
    Dim now As TimeSpan = DateTime.Now.TimeOfDay

    If (now > startTime) AndAlso (now < endTime) Then
      retValue = True
    Else
      retValue = False
    End If
    Return retValue
  Catch ex As Exception
  End Try
End Function 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T14:35:32.190

我认为您的代码过于复杂。你可以这样做：

```
Private Function CheckTimeRange() As Boolean
    Return DateTime.Now.Hour >= 23 OrElse DateTime.Now.Hour < 5
End Function 
```

**编辑：**

如果开始时间和结束时间由用户输入，则应先将字符串值转换为`TimeSpan`对象，然后可以使用更灵活的方法，将日期、最小时间和最大时间作为参数：

```
Private Function CheckTimeRange(myDate As DateTime, minTime as TimeSpan, maxTime As TimeSpan) As Boolean
    If minTime > maxTime Then
        Return myDate.TimeOfDay >= minTime OrElse myDate.TimeOfDay < maxTime
    Else
        Return myDate.TimeOfDay >= minTime AndAlso myDate.TimeOfDay < maxTime
    End If
End Function 
```

示例用法：

```
Dim minTime As New TimeSpan(23, 0, 0) 'Should be converted from 11.00 PM
Dim maxTime As New TimeSpan(5, 0, 0) 'Should be converted from 5.00 AM
CheckTimeRange(New Date(2012, 1, 1, 15, 0, 0), minTime, maxTime) '==> false
CheckTimeRange(New Date(2012, 1, 1, 22, 30, 0), minTime, maxTime) '==> false
CheckTimeRange(New Date(2012, 1, 1, 23, 00, 0), minTime, maxTime) '==> true
CheckTimeRange(New Date(2012, 1, 2, 1, 10, 0), minTime, maxTime) '==> true
CheckTimeRange(New Date(2012, 1, 2, 4, 59, 0), minTime, maxTime) '==> true
CheckTimeRange(New Date(2012, 1, 2, 5, 10, 0), minTime, maxTime) '==> false 
```

如果您在将字符串值转换为 TimeSpan 时遇到问题，您应该针对此特定任务提出一个新问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:34:43.593

您正在使用 TimeSpan 对象，您会发现没有日期的情况下，上午 1.10 永远不会超过晚上 11.00。

Meta-Knight 有更好的解决方案。

# php - Facebook 最新状态更新

> ID：10518183
> 
> 赞同：1
> 
> 时间：2012-05-09T14:30:02.130
> 
> 标签：php, facebook

我正在尝试使用 PHP 获取最新的 Facebook 状态更新，而无需登录 Facebook。我已经看到查询参数“范围：offline_access”。但是在网上的某个地方，我看到 facebook 正在贬低这个功能。那我现在该怎么办？此外，我在这里找到的大多数代码似乎都不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:51:12.767

我不知道 Facebook 最新状态更新，但我在 stackoverflow 上发现了一个问题，请查看链接 [PHP 函数以获取 Facebook 状态？](https://stackoverflow.com/q/383777/718224) 这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:33:17.417

已经获得此权限的应用程序运行良好，但不是新应用程序，因此这是不可能的，您现在每次都需要新的访问令牌

# jsf - 使用 JSF 生成 HTTP 错误代码页面以及异常错误页面？

> ID：10518186
> 
> 赞同：4
> 
> 时间：2012-05-09T14:30:10.057
> 
> 标签：jsf, exception-handling, web.xml, error-code

我知道可以使用 web.xml 中的配置来提供自定义错误 404 页面，如下所示：

```
<error-page>  
       <error-code>404</error-code>  
         <location>/NotFound.jsp</location>  
 </error-page> 
```

但是我预计许多错误代码网页会非常相似——只有错误代码和文本会改变。

为了减少过多的文件和重复使用，最好将参数传递给具有所有通常 HTML 和 CSS 优点的通用页面。

我使用 Apache MyFaces，并阅读了有关 ExceptionHandlerFactory（[此处](https://cwiki.apache.org/confluence/display/MYFACES/Handling+Server+Errors)）的信息，但我发现没有提供错误代码。

是不是我可以自定义错误代码页面的绝对唯一方法是为每个要自定义的错误代码创建一个，然后使用 web.xml 将它们连接起来？:-(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T14:45:27.067

错误页面可以只是一个 JSF 页面。如果您正在运行支持 Servlet 3.0 的容器，则可能会有一个全局错误页面：

```
<error-page>  
    <location>/error.jsf</location>  
</error-page> 
```

如果您正在运行 Servlet 2.5 或更旧的容器，或者碰巧使用 Tomcat 7，但到目前为止还[没有](https://issues.apache.org/bugzilla/show_bug.cgi?id=52135)实现全局错误页面，那么您需要为每个状态代码指定单独的错误页面，但它们都可以指向相同的错误页面。

```
<error-page>  
    <status-code>404</status-code>
    <location>/error.jsf</location>  
</error-page> 
<error-page>  
    <status-code>500</status-code>
    <location>/error.jsf</location>  
</error-page> 
```

状态码和异常类型在 EL 中可用，如下所示：

```
Status code: #{requestScope['javax.servlet.error.status_code']}
Exception type: #{requestScope['javax.servlet.error.exception_type']} 
```

如有必要，您可以对此进行条件检查。请注意，默认情况下，异常的状态代码始终为 500。

如果您使用的是 JSP 的后续 Facelets，那么模板化会更加容易。

# section508 - 输入按钮和 508 合规性：他们真的需要标签吗？

> ID：10518195
> 
> 赞同：1
> 
> 时间：2012-05-09T14:30:38.697
> 
> 标签：section508

具有值的按钮是否真的需要匹配的标签标签才能符合 508 标准？

说我有：

```
<label for="search_box" class="hideme">search query</label>
<input type="text" id="search_box">
<input type="button" id="search" value="Search"> 
```

网络可访问性测试软件正在标记它，因为它有一个 id 但没有匹配的标签？真的有必要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:31:06.910

`<label>`不需要A `<input type="button">`，您需要提供 value 属性。如果按钮使用的是图像而不是文本，则需要提供 alt 以使其符合要求。

```
<input type="button" src="....jpg" alt="Search" id="..."> 
```

# ruby - 动态页面网址

> ID：10518196
> 
> 赞同：3
> 
> 时间：2012-05-09T14:30:40.670
> 
> 标签：ruby, watir-webdriver, pageobjects, page-object-gem

我有一个带有动态 URL 的页面。我们称之为*查看帖子*页面。*帖子 1*的网址是`site.com/post/1`，*帖子 2*的网址是`site.com/post/2`。

这就是我目前所做的，以检查我是否在正确的页面上。

这页纸：

```
class ViewPostPage
  include PageObject

  def self.url
    "site.com/post/"
  end
end 
```

黄瓜步骤：

```
on(ViewPostPage) do |page|
  @browser.url.should == "#{page.class.url}#{@id}"
end 
```

有没有更好的办法？您甚至会费心检查整个 URL，还是只检查`site.com/post/`一部分？

我正在使用最新的[页面对象](https://rubygems.org/gems/page-object)gem (0.6.6)。

# 更新

更大的问题是直接进入具有动态 URL 的页面。

这页纸：

```
class ViewPostPage
  include PageObject

  def self.url
    "site.com/post/"
  end
  page_url url
end 
```

黄瓜步骤：

```
visit ViewPostPage 
```

我现在要做的是将 Cucumber 步骤更改为：

```
@browser.goto "#{ViewPostPage.url}#{@id}" 
```

如果页面有办法知道它的 ID，那就太好了，但我还没有想出如何去做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T19:33:24.870

您可以使用 current_url 方法获取页面的 url。在上面的测试中，您是否试图确定您是否在正确的页面上？如果是这种情况，我可能会建议使用两种“预期”方法之一——expected_title 和 expected_element。

如果您需要动态导航到 url，page_url 方法很可能不是您的选择。您可能会尝试向您的页面添加一个方法，该方法执行以下操作：

```
class ViewPostPage
  include PageObject

  URL = "site.com/post/"

  expected_title  "The expected title"

  def navigate_to_post_with_id(id)
    navigate_to "#{URL}/#{id}"
  end

end 
```

在你的测试中

```
on_page(ViewPostPage) do |page|
  page.navigate_to_post_with_id @id
  page.should have_expected_title
end 
```

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T09:25:11.713

有一个选项可以检查页面对象 gem 中的动态 URL。

使用以下代码：

> 类 ViewPostPage
> 
> ```
>  include PageObject
> 
>       expected_url  "The expected URL"
> 
>   def initialize
> 
>      has_expected_url?
> 
>    end 
> ```
> 
> 结尾

它会帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:47:59.140

据我所知，`#page_url`是用于打开相应的页面以及页面对象初始化。要验证您在正确的页面上，您可以尝试使用`#expected_title`方法。

另外，也许它对你有用。当符号传递给 时`#page_url`，它会调用相应的方法，所以最好使用它。我还没有尝试过，但这里有几个链接给你。

*   GitHub上的原始[问题](https://github.com/cheezy/page-object/blob/master/spec/page-object/accessors_spec.rb#L136)
*   [眼镜](https://github.com/cheezy/page-object/blob/master/spec/page-object/accessors_spec.rb#L136)
*   [#page_url 的文档](http://rubydoc.info/gems/page-object/0.6.6/PageObject/Accessors%3apage_url)

# optimization - 如何防止编译器优化断点？

> ID：10518204
> 
> 赞同：3
> 
> 时间：2012-05-09T14:31:34.217
> 
> 标签：optimization, breakpoints

我写了一个 if 子句来检查我是否应该中断程序进行调试：

```
if (a < 0) {
    a = a;
} 
```

`a`不应该变成负数，但我发现它确实如此，我想中断调试，看看为什么如果发生这种情况它会变成负数，因此我写了这个 if 子句。在这一行上，`a = a;`我设置了一个断点，如果程序进入 if 子句，它应该停止程序。问题是该行不做任何事情（这是为了不搞砸任何事情所必需的），因此该行被优化掉并且断点在 if 子句之后结束。这个技巧通常有效，但这次编译器显然没有找到它。

语言是 C++，我正在使用`qmake`（Qt 工具）和`mingw`.

我的问题是，当我在代码行上设置断点时，如何防止编译器优化掉代码行？还是有其他方法可以有条件地中断程序进行调试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:34:14.483

一种可能性是调用 I/O 函数。在 Java 中，可以这样写：

```
if (a < 0) {
    System.out.printf("");
} 
```

类似地，在 C/C++ 中，可以这样写：

```
if (a < 0) {
    printf("");
} 
```

即使函数调用实际上是无操作的，编译器也不知道这一点，也不太可能优化调用。

> 还是有其他方法可以有条件地中断程序进行调试？

许多现代 IDE 允许设置*条件断点*：[Visual Studio](http://msdn.microsoft.com/en-us/library/7sye83ce.aspx)、[Eclipse](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/task-manage_conditional_breakpoint.htm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T23:18:35.387

如果它是 C 或 C++，简单地定义`a`as`volatile`应该会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:34:05.870

我通常在这里放一个`printf`（或`cout`，或任何适合您使用的语言），以便我可以设置断点，例如

```
if (a < 0) {
    printf("a < 0 !\n"); // <<< set breakpoint here
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T23:21:12.123

它不是可移植的，但是我使用 MSVC （如果代码可能会保留一段时间，则`__asm nop`用 ...<code>#endif 包围）插入我知道编译器不会触及的文字空操作。`#ifndef NDEBUG`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T23:02:13.540

我定义了一个 NO_OP() 宏，它什么都不做，也不需要使用它的文件包含任何头文件：

```
#define  NO_OP()  {float f = 0; if (f != 0) exit(0);} 
```

我不知道编译器是否能够优化这个宏，但它适用于我的 MinGW。

# c# - 无法反序列化值类型的 IComparable 字段

> ID：10518206
> 
> 赞同：3
> 
> 时间：2012-05-09T14:31:48.917
> 
> 标签：c#, .net, serialization

我调查了有关 IComparable 属性的二进制序列化的问题，当 IComparable 属性被分配一个 DateTime 时，该问题会导致以下错误：

二进制流“0”不包含有效的 BinaryHeader。

以下代码可能会产生此问题：

```
/// <summary>
/// This class is injected with an icomparable object, which is assigned to a property.
/// If serialized then deserializes using binary serialization, an exception is thrown
/// </summary>
[Serializable]
public class SomeClassNotWorking
{
    public SomeClassNotWorking(IComparable property)
    {
        Property = property;
    }

    public IComparable Property;

}

public class Program
{
    static void Main(string[] args)
    {
        // var comparable = new SomeClass<DateTime>(DateTime.Today);
        // here we pass in a datetime type that inherits IComparable (ISerializable also produces the error!!)
        var instance = new SomeClassNotWorking(DateTime.Today);

        // now we serialize
        var bytes = BinaryHelper.Serialize(instance);
        BinaryHelper.WriteToFile("serialisedResults", bytes);

        // then deserialize
        var readBytes = BinaryHelper.ReadFromFile("serialisedResults");
        var obj = BinaryHelper.Deserialize(readBytes);
    }
} 
```

我通过将 IComparable 属性替换为实现 IComparable 的类型 T 属性解决了这个问题：

```
/// <summary>
/// This class contains a generic type property which implements IComparable
/// This serializes and deserializes correctly without error
/// </summary>
/// <typeparam name="T"></typeparam>
[Serializable]
public class SomeClass<T> where T : IComparable
{
    public SomeClass(T property)
    {
        Property = property;
    }

    public T Property;
} 
```

这可以毫无问题地进行序列化和反序列化。但是，为什么 IComparable 属性的序列化（当该属性是 DateTime 时）首先会导致问题，尤其是在 DateTime 支持 IComparable 的情况下？ISerializable 也会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:41:33.477

这是一个已知的错误，它没有修复：[http ://connect.microsoft.com/VisualStudio/feedback/details/91177/de-serialization-of-an-instance-of-a-class-implementing-icomparable-does-not -工作](http://connect.microsoft.com/VisualStudio/feedback/details/91177/de-serialization-of-an-instance-of-a-class-implementing-icomparable-does-not-work)

# text - 将 CSV 数据转换为 stackoverflow 友好的纯文本表的工具？

> ID：10518207
> 
> 赞同：5
> 
> 时间：2012-05-09T14:31:50.820
> 
> 标签：text, csv, formatting

是否有将 csv 数据转换为 stackoverflow 友好表格的在线工具？类似于 mysql 在命令行上渲染结果。

```
2012-05-02,palani,My first comment
2012-05-02,raja,My second comment
2012-05-02,palani,My third comment
2012-05-03,raja,My fourth comment 
```

非常友好

```
+-------------+-----------+----------------------+
| 2012-05-02  | palani    | My first comment     |
+-------------+-----------+----------------------+
| 2012-05-02  | raja      | My second comment    |
+-------------+-----------+----------------------+
| 2012-05-03  | palani    | My third comment     |
+-------------+-----------+----------------------+
| 2012-05-03  | raja      | My fourth comment    |
+-------------+-----------+----------------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:58:33.613

也许[这](https://meta.stackexchange.com/questions/96125/how-to-format-sql-tables-in-a-stack-overflow-post)可以帮助你，即使它不是你正在寻找的东西。该工具是[tsv（制表符分隔值）到 ascii 艺术表](https://senseful.github.io/web-tools/text-table/)，所以现在您需要 csv2tsv 转换器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-12-01T12:48:52.417

使用[米勒](https://miller.readthedocs.io/en/latest/installing-miller/)并运行

```
mlr --c2p cat input.csv 
```

输出

```
2012-05-02 palani My first comment
2012-05-02 raja   My second comment
2012-05-02 palani My third comment
2012-05-03 raja   My fourth comment 
```

或运行

```
mlr --c2p --barred cat input.csv 
```

输出

```
+------------+--------+-------------------+
| 2012-05-02 | palani | My first comment  |
+------------+--------+-------------------+
| 2012-05-02 | raja   | My second comment |
| 2012-05-02 | palani | My third comment  |
| 2012-05-03 | raja   | My fourth comment |
+------------+--------+-------------------+ 
```

或者

```
mlr --c2p --implicit-csv-header --barred cat input.csv 
```

```
+------------+--------+-------------------+
| 1          | 2      | 3                 |
+------------+--------+-------------------+
| 2012-05-02 | palani | My first comment  |
| 2012-05-02 | raja   | My second comment |
| 2012-05-02 | palani | My third comment  |
| 2012-05-03 | raja   | My fourth comment |
+------------+--------+-------------------+ 
```

或者

```
mlr --c2m --implicit-csv-header --barred cat input.csv 
```

```
| 1 | 2 | 3 |
| --- | --- | --- |
| 2012-05-02 | palani | My first comment |
| 2012-05-02 | raja | My second comment |
| 2012-05-02 | palani | My third comment |
| 2012-05-03 | raja | My fourth comment | 
```

| 1 | 2 | 3 |
| --- | --- | --- |
| 2012-05-02 | 帕拉尼 | 我的第一条评论 |
| 2012-05-02 | 拉贾 | 我的第二条评论 |
| 2012-05-02 | 帕拉尼 | 我的第三条评论 |
| 2012-05-03 | 拉贾 | 我的第四条评论 |

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T01:10:25.113

我更喜欢这个[工具来将逗号分隔值转换为文本表](http://selmiak.bplaced.net/gf/gf.php?lang=eng&page=Comma-Separated-Values)。您甚至可以设置线宽。对于高级用户，表格单元格宽度和对齐方式的控制非常简洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T19:07:28.323

[我在http://www.convertcsv.com/csv-to-flat-file.htm](http://www.convertcsv.com/csv-to-flat-file.htm)使用这个工具 它也处理列标题。单击“ASCII Table-ize it”框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-22T21:30:47.787

`csvkit`包括工具`csvlook`（以及`csvformat`）：

# 输入

```
cat <<EOF | csvlook
2012-05-02,palani,My first comment
2012-05-02,raja,My second comment
2012-05-02,palani,My third comment
2012-05-03,raja,My fourth comment
EOF 
```

# 输出

```
| 2012-05-02 | palani | My first comment  |
| ---------- | ------ | ----------------- |
| 2012-05-02 | raja   | My second comment |
| 2012-05-02 | palani | My third comment  |
| 2012-05-03 | raja   | My fourth comment | 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-06T02:48:46.600

还有另一个工具（YATG，Yet Another Table Generator）可以做到这一点，用python编写：

见：[https ://github.com/10gic/yatg](https://github.com/10gic/yatg)

将您的数据作为输入，这是输出（emacs 表格样式）：

```
+------------+--------+-------------------+
| 2012-05-02 | palani | My first comment  |
+------------+--------+-------------------+
| 2012-05-02 | raja   | My second comment |
+------------+--------+-------------------+
| 2012-05-02 | palani | My third comment  |
+------------+--------+-------------------+
| 2012-05-03 | raja   | My fourth comment |
+------------+--------+-------------------+ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-01T12:14:34.317

强烈推荐一个在线工具：**[Convert CSV to ASCII Table](https://tableconvert.com/csv-to-ascii)**

它是我最喜欢的表格格式转换工具，它可以将csv转换成不同的友好纯文本表格：

1.  ASCII 表（mysql 风格）

```
+─────────────+─────────+───────────────────+
| 2012-05-02  | palani  | My first comment  |
+─────────────+─────────+───────────────────+
| 2012-05-02  | raja    | My second comment |
+─────────────+─────────+───────────────────+
| 2012-05-02  | palani  | My third comment  |
+─────────────+─────────+───────────────────+
| 2012-05-03  | raja    | My fourth comment |
+─────────────+─────────+───────────────────+ 
```

2.  reStructuredText 网格表

```
+-------------+---------+-------------------+
| 2012-05-02  | palani  | My first comment  |
+=============+=========+===================+
| 2012-05-02  | raja    | My second comment |
+-------------+---------+-------------------+
| 2012-05-02  | palani  | My third comment  |
+-------------+---------+-------------------+
| 2012-05-03  | raja    | My fourth comment |
+-------------+---------+-------------------+ 
```

3.  Unicode 表（单行）

```
┌─────────────┬─────────┬───────────────────┐
| 2012-05-02  | palani  | My first comment  |
├─────────────┼─────────┼───────────────────┤
| 2012-05-02  | raja    | My second comment |
| 2012-05-02  | palani  | My third comment  |
| 2012-05-03  | raja    | My fourth comment |
└─────────────┴─────────┴───────────────────┘ 
```

4.  统一码表

```
╔═════════════╦═════════╦═══════════════════╗
║ 2012-05-02  ║ palani  ║ My first comment  ║
╠═════════════╬═════════╬═══════════════════╣
║ 2012-05-02  ║ raja    ║ My second comment ║
║ 2012-05-02  ║ palani  ║ My third comment  ║
║ 2012-05-03  ║ raja    ║ My fourth comment ║
╚═════════════╩═════════╩═══════════════════╝ 
```

以及其他一些格式的纯文本 ASCII 表。您也可以输入“强制分隔行”来决定是否清楚地表达标题！

[![在此处输入图像描述](../Images/681a393110483c3708f5bd8dffa5991d.png)](https://i.stack.imgur.com/jeBbP.png)

# database - codeigniter 会话自定义数据丢失，但不在本地主机上

> ID：10518209
> 
> 赞同：5
> 
> 时间：2012-05-09T14:31:59.750
> 
> 标签：database, codeigniter, session

我的 ci 会话有这个奇怪的问题。在本地主机上工作正常，但在线日志显示错误：

> 会话 cookie 数据与预期不符。这可能是一次可能的黑客攻击。

我删除了所有 cookie 并清空了会话表。我还将 user_agent 长度设置为 255。基本路径也是正确的。当我记录会话 ID 时需要注意的是：

在登录页面上，当检查用户名/密码时，id 是相同的，然后我转到我的成员区域，其中 id 已更改。

另一个例子：
1.我去会员区，设置了会话ID，我没有登录，我发送到登录
2.在登录页面，会话ID改变，我登录
3.验证，会话ID不变，我已验证并发送到会员区
4。在会员区，会话 ID 已更改，我未登录。

在登录页面上，我的会话表计为 0 行，当我登录时会话表计为 2/3 行。其中 1 个，但不是具有当前会话 ID 的那个包含所有正确的数据。

希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T18:21:10.513

我认为 Codeignitor 原生 php 会话库存在问题。它会导致您描述的问题，因为如果未设置 cookie，则不会设置。此外，它将无法识别会话。为了避免这个问题，你可以使用[Native Session Class](http://codeigniter.com/wiki/Native_session/)

这里有几个链接可以支持我的回答。 [cookie / MAMP / Codeingiter 的问题](https://stackoverflow.com/questions/5868177/problems-with-cookies-mamp-codeingiter) [http://myphplibrary.blogspot.in/2012/03/codeigniter-session-issue-fixation.html](http://myphplibrary.blogspot.in/2012/03/codeigniter-session-issue-fixation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:15:57.260

有几件事要检查；

1.  服务器本地时间与您的本地时间 - 也许cookie在设置时到期？要确认 - 将 $config['sess_expiration'] 时间设置为喜欢 9999999 并查看它是否有效

2.  关闭 $config['encrypt_cookie']

3.  关闭 $config['sess_match_ip']

4.  确保您设置了正确的 cookie 信息：

    ```
    $config['cookie_prefix']    = "";
    $config['cookie_domain']    = // YOUR DOMAIN
    $config['cookie_path']      = // YOUR BASE URI
    $config['cookie_secure']    = FALSE; 
    ```

# php - 如何按时间将来自不同查询的事件分组到一个数组中

> ID：10518210
> 
> 赞同：1
> 
> 时间：2012-05-09T14:32:02.137
> 
> 标签：php, arrays, multidimensional-array

我正在从我的数据库中提取一些与时间相关的笔记。

我对多维数组不太感兴趣，但我想将所有事件在它们发生的时间分组在一起。

这是我的一个查询：

```
SELECT TIME(date) AS time, followupNote, completed, entityRef
FROM entity_followups
WHERE userRef = ?
AND DAY(date) = ?
AND MONTH(date) = ?
AND YEAR(date) = ? 
```

一个示例输出可能是三行，第一列是时间，然后是注释，完成，然后是 entityRef。

我希望将具有相同时间的任何行组合在数组中，例如

```
Array (
    [0] => Array (
        [0] => 12:00:00
        [1] => Array (
            [0] => note
            [1] => completed
            [2] => entityRef
        )
        [2] => Array (
            [0] => note2
            [1] => completed2
            [2] => entityRef2
        )
    )
) 
```

但是稍后会有其他查询收集需要添加到顶级数组中的其他类型的事件，如果一个事件与子数组中的一个事件具有相同的时间，则需要将其添加到其中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:48:16.007

我假设您现有的代码足以获得时间和价值。因此，您将在您选择使用的任何变量或数据结构中拥有这些项目。出于此答案的目的，我将假设这些值已经存在于各个变量中：`$time`、`$value[0]`、`$value[1]`和`$value[2]`。此外，我将假设结果正在加载到数组中`$timesAndValues[]`

我认为关键是让`$timesAndValues[]`数组在相应的时间被索引：

```
if (isset($timesAndValues[$time]))
{ //The corresponding sub-array already exists, so we just need to load it

  //Push the array of values into the sub-array 
  array_push($timesAndValues[$time], $value);
}
else
{ //The corresponding sub-array does not exist yet, so we need to create it and load it

  //Create the sub-array
  $timesAndValues[$time] = array($time);

  //Push the array of values into the sub-array
  array_push($timesAndValues[$time], $value);
} 
```

# java - Hibernate @OrderBy 用于嵌套属性

> ID：10518216
> 
> 赞同：12
> 
> 时间：2012-05-09T14:32:31.540
> 
> 标签：java, hibernate, jpa, orm, hibernate-mapping

我需要使用@OrderBy（JPA，Hibernate 作为提供者）对嵌套属性的集合进行排序：

```
@OneToMany(mappedBy = "paramSpec", cascade = CascadeType.ALL)
@OrderBy("release.ordinal")
private List<PkdbParameter> pkdbParams; 
```

在 PkdbParameter.java 中：

```
...
@ManyToOne
@JoinColumn(name = "release_id")
private Release release;
... 
```

在 Release.java 中：

```
...
private int ordinal;
... 
```

（所有这些字段都提供了简单的 getter 和 setter）

不幸的是，我遇到了错误：

`Caused by: org.hibernate.AnnotationException: property from @OrderBy clause not found: some.package.PkdbParameter.release.ordinal`

这段代码有什么问题？如果不可能使用嵌套属性表示法，还有其他方式来订购`ordinal`属性吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-10-27T19:43:52.783

您可以使用 Hibernate`@SortComparator`注释：

像这样：

```
@OneToMany(mappedBy = "paramSpec", cascade = CascadeType.ALL)
@SortComparator(ReleaseComparator.class)
private List<PkdbParameter> pkdbParams; 
```

CameraNameComparator 在哪里：

```
public class ReleaseComparator implements Comparator<PkdbParameter> {
    @Override
    public int compare(PkdbParameter o1, PkdbParameter o2) {
        return o1.getRelease().getOrdinal().compareTo( o2.getRelease().getOrdinal() );
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T10:36:51.480

`@OrderBy`仅适用于直接属性或嵌入属性。来自[Java EE 6 文档](http://docs.oracle.com/javaee/6/api/javax/persistence/OrderBy.html)

> 点 (".") 表示法用于引用嵌入属性中的属性

因此，如果`Release`是嵌入式属性，则可以使用。否则，您可以按照[此处的建议使用命名查询](https://stackoverflow.com/questions/1105099/defining-the-order-of-a-list/1105370#1105370)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-05-26T16:10:25.813

您可以拆分订单语句并将其放在非集合属性上：

```
@OneToMany(mappedBy = "paramSpec", cascade = CascadeType.ALL)
@OrderBy("release")
private List<PkdbParameter> pkdbParams; 
```

和

```
@ManyToOne
@JoinColumn(name = "release_id")
@OrderBy("ordinal")
private Release release; 
```

作为副作用，您有固定的 PkdbParameter 排序顺序。

# java - AppEngine 中 X-AppEngine-Estimated-CPM-US-Dollars 的使用

> ID：10518225
> 
> 赞同：2
> 
> 时间：2012-05-09T14:32:57.930
> 
> 标签：java, google-app-engine

如何在 AppEngine 中使用**X-AppEngine-Estimated-CPM-US-Dollars**标头。我阅读了一些文档，我们可以仅使用管理员凭据来使用它，这是什么意思？

如果您有任何样品，请与我们分享。

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:10:30.530

我没有做任何特别的事情来启用这个功能。`Owner`如页面[https://appengine.google.com/Administration](https://appengine.google.com/) > Permissions 所示，我的应用具有角色。

如果我从我的 Google 帐户注销 - 此标题消失。
如果我登录到我的 Google 帐户并访问我网站上的安全区域，则会出现其他标题。

像这样标记的安全区域`web.xml`：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Administration resources</web-resource-name>
        <url-pattern>/admin/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
    </auth-constraint>
</security-constraint> 
```

它在 Firebug 中看起来像这样： ![在此处输入图像描述](../Images/512f106c40b8cadbf8a2437f7c3b4189.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T13:57:19.477

标头本身在[http://googleappengine.blogspot.com/2009/08/new-features-in-124.html?m=1](http://googleappengine.blogspot.com/2009/08/new-features-in-124.html?m=1)中进行了说明。如果您没有免费配额，这是您支付给 Google 以提供该页面的 1,000 倍。（当然，实际上服务完全相同的页面 1000 次可能会因为缓存而花费更少。）

# jquery - 在 wordpress 上手动安装 nivoslider 不起作用

> ID：10518228
> 
> 赞同：0
> 
> 时间：2012-05-09T14:33:08.760
> 
> 标签：jquery, wordpress, nivo-slider

我正在尝试将 nivoslider 手动安装到 wordpress 主题，以便我可以将 nivoslider 作为选项添加到主题选项面板。最初我只需要它来处理硬编码的图像，但我不断收到这个 js 错误 $("#slider").nivoSlider is not a function。

包括 Nivo 滑块，并且该文件的路径与 jquery 版本 1.7.1 一样。文件的两个路径都可以正常工作，因此包含了所有必要的 js。在浏览器中渲染后，我将在下面粘贴整个标题。文件路径是本地的，因此无法从外部访问

```
<?php
/**
 * The Header for our theme.
 *
 * Displays all of the <head> section and everything up till <div id="main">
 *
 * @package WordPress
 * @subpackage GPSite
 * @since Starkers 3.0
 */
global $theme_shortname;
global $mm;
$mm = get_option($theme_shortname."_maintenance_mode");

// If maintenance mode is on and we're not on the homepage, then redirect to the homepage
if($mm && !is_front_page() && !current_user_can('level_10')) {
  //wp_redirect( get_bloginfo("url") );
}
?>
<!DOCTYPE html>
<html <?php language_attributes(); ?>>
<head>
<meta charset="<?php bloginfo( 'charset' ); ?>" />
<title><?php wp_title( '&nbsp;', true, 'right' ); ?></title>

<!-- For iPhone 4 -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="<?php bloginfo("template_url"); ?>/images/apple-touch-icon-114.png">
<!-- For iPad 1-->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="<?php bloginfo("template_url"); ?>/images/apple-touch-icon-72.png">
<!-- For iPhone 3G, iPod Touch and Android -->
<link rel="apple-touch-icon-precomposed" href="<?php bloginfo("template_url"); ?>/images/apple-touch-icon-64.png">
<!-- For Nokia -->
<link rel="shortcut icon" href="<?php bloginfo("template_url"); ?>/images/apple-touch-icon-64.png">
<!-- For everything else -->
<link rel="shortcut icon" href="<?php bloginfo("template_url"); ?>/images/favicon.ico">

<?php
if(class_exists("MultiPostThumbnails") && (is_single() || is_page()))
{
    if(MultiPostThumbnails::has_post_thumbnail($post->post_type, 'secondary-image'))
    {
        $thumbnail = wp_get_attachment_image_src ( MultiPostThumbnails::get_post_thumbnail_id ($post->post_type, "secondary-image", $post->ID ),array(1024,9999));
        ?>
<style type="text/css">
#top
{
    background-image: url("<?php print $thumbnail[0];?>") !important;
    background-position: 50% 0;
    background-repeat: no-repeat;
}
</style>
        <?php

    }
}

?>

<?php
/*
<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo( 'stylesheet_url' ); ?>" />
<link type="text/css" rel="stylesheet" media="print" href="<?php print get_bloginfo("template_url")."/css/print.css"; ?>" />
 * */

if($_COOKIE['high_contrast'])
{
    ?>
    <link id="high-contrast-stylesheet" type="text/css" title="high-contrast" rel="stylesheet" href="<?php print get_bloginfo("template_url")."/css/high-contrast.css"; ?>" >
    <?php
}
?>

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="<?php bloginfo( 'stylesheet_url' ); ?>">
<link rel="stylesheet" media="print" href="<?php bloginfo("template_url"); ?>/css/print.css">

<!-- For progressively larger displays -->

<link rel="stylesheet" href="<?php bloginfo("template_url"); ?>/css/992.css">
<?php
/* WHEN RESPOND IS WORKING USE THIS
<!-- For progressively larger displays -->
<link rel="stylesheet" media="only screen and (min-width: 480px)" href="<?php bloginfo("template_url"); ?>/css/480.css">
<link rel="stylesheet" media="only screen and (min-width: 600px)" href="<?php bloginfo("template_url"); ?>/css/600.css">
<link rel="stylesheet" media="only screen and (min-width: 768px)" href="<?php bloginfo("template_url"); ?>/css/768.css">
<link rel="stylesheet" media="only screen and (min-width: 992px)" href="<?php bloginfo("template_url"); ?>/css/992.css">
*/
?>
<?php
/*
 * <!-- For Retina displays -->
<link rel="stylesheet" media="only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (-o-min-device-pixel-ratio: 3/2), only screen and (min-device-pixel-ratio: 1.5)" href="css/2x.css">
*/
?>
<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />
<script type="text/javascript" src="<?php bloginfo("template_url"); ?>/js/modernizr-1.5.min.js"></script>
<?php wp_enqueue_script("jquery"); ?>
<?php
    /* We add some JavaScript to pages with the comment form
     * to support sites with threaded comments (when in use).
     */
    if ( is_singular() && get_option( 'thread_comments' ) )
        wp_enqueue_script( 'comment-reply' );

    /* Always have wp_head() just before the closing </head>
     * tag of your theme, or you will break many plugins, which
     * generally use this hook to add elements to <head> such
     * as styles, scripts, and meta tags.
     */
    wp_head();
?>
<script type="text/javascript">
jQuery(window).load(function() {
    jQuery('#slider').nivoSlider({
        effect:'random', //Specify sets like: 'fold,fade,sliceDown'
        slices:15,
        animSpeed:500, //Slide transition speed
        pauseTime:5000,
        startSlide:0, //Set starting Slide (0 index)
        directionNav:true, //Next & Prev
        directionNavHide:true, //Only show on hover
        controlNav:true, //1,2,3…
        keyboardNav:true, //Use left & right arrows
        pauseOnHover:true, //Stop animation while hovering
        captionOpacity:0.8 //Universal caption opacity
    });
});
</script>
</head>
<!--[if lt IE 7 ]> <body <?php body_class("ltie7"); ?>> <![endif]-->
<!--[if IE 7 ]>    <body <?php body_class("ie7"); ?>> <![endif]-->
<!--[if IE 8 ]>    <body <?php body_class("ie8"); ?>> <![endif]-->
<!--[if IE 9 ]>    <body <?php body_class("ie9"); ?>> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <body <?php body_class(); ?>> <!--<![endif]-->
<!--<div class="push">-->
<div class="wrapper">
    <header id="top">

        <div class="inner">
            <div id="slider" class="nivoSlider">
                <img src="http://192.168.200.74/~wadem/gpsite/slide.png" alt="Slide 1" width="957" height="280" />
                <img src="images/slide2.jpg" alt=""  />
            </div> 
```

页面上安装了 2 个版本的 jquery，相互冲突。拿起这个的第一件事是 nivo 滑块。一位老开发人员留在页脚的旧版本中，这意味着 jquery 是从 $ 和 jQuery 运行的，这显然 nivoslider 真的不喜欢。

完全愚蠢，我不能自己回答问题。Justet 最终在我的帐户上遇到了更多未回答的问题。梳理出来

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:29:23.687

页面上安装了 2 个版本的 jquery，相互冲突。拿起这个的第一件事是 nivo 滑块。一位老开发人员留在页脚的旧版本中，这意味着 jquery 是从 $ 和 jQuery 运行的，这显然 nivoslider 真的很讨厌

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:48:00.390

我认为脚本中给出的链接是错误的。你也没有给出 nivoslider 样式链接。将以下代码放在您的标题中，而不是您添加的行中。

```
<!-- Include the Nivo Slider CSS file -->
<link rel="stylesheet" href="<?php bloginfo("template_url"); ?>/scripts/nivoslider/nivo-slider.css" type="text/css" media="screen" />
<!-- Include the Nivo Slider JS file -->
<script src="<?php bloginfo("template_url"); ?>/js/nivoslider/jquery.nivo.slider.pack.js" type="text/javascript"></script> 
```

确保路径正确。希望这会奏效。

**编辑：** 请参阅此链接以[设置 jQuery Nivo 滑块](http://nivo.dev7studios.com/support/advanced-tutorials/manually-setting-up-the-jquery-nivo-slider-plugin-in-wordpress/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:50:41.327

```
$("#slider").nivoSlider is not a function 
```

是一个典型的 jQuery 错误，与错误的脚本加载顺序或缺少脚本有关。

您发布的标头代码与我们几乎无关。将[Firebug](http://getfirebug.com/)与 Firefox 一起使用，或者在 Chrome、Safari 或 IE8 中使用开发人员工具来查看您的网站上加载的内容以及 JS 错误。

确保您在functions.php 中正确地将jQuery 和其他脚本排入队列并`wp_head`在header.php 中使用。见[http://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

# javascript - Ajax.BeginForm 调用 JS 函数 OnBegin

> ID：10518229
> 
> 赞同：0
> 
> 时间：2012-05-09T14:33:12.627
> 
> 标签：javascript, jquery, asp.net-mvc-3

嗨，关于[https://github.com/shichuan/javascript-patterns/blob/master/general-patterns/function-declarations.html](https://github.com/shichuan/javascript-patterns/blob/master/general-patterns/function-declarations.html)我这样定义我的 JS 函数

```
<script language="javascript">
    var clearMessage = function ClearMessage() {
        $("#result").html("");
    };
</script> 
```

我尝试在 MVC ajax 的 OnBegin 方法中调用它，

```
@using (Ajax.BeginForm(new AjaxOptions() { HttpMethod = "post", OnBegin = "ClearMessage" })) 
```

但是我收到函数不退出的错误，如何调用这个最佳实践所描述的函数？（没有*var clearMessage*永远工作正常）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:41:27.127

从未见过这样的语法。甚至不知道它是否是有效的javascript。

尝试像这样定义你的函数：

```
<script type="text/javascript">
    var ClearMessage = function() {
        $("#result").html("");
    };
</script> 
```

或像这样（几乎相同）：

```
<script type="text/javascript">
    function ClearMessage() {
        $("#result").html("");
    };
</script> 
```

# c# - System.Nullable<> 结构的“协方差”

> ID：10518230
> 
> 赞同：6
> 
> 时间：2012-05-09T14:33:13.877
> 
> 标签：c#, nullable, covariance

当我们有两个结构，并且一个可以隐式转换为另一个时，看起来这两个结构的`System.Nullable<>`版本也可以隐式转换。就像，如果 struct`A`隐式转换为 struct `B`，则也`A?`转换`B?`为。

这是一个例子：

```
struct MyNumber
{
  public readonly int Inner;

  public MyNumber(int i)
  {
    Inner = i;
  }

  public static implicit operator int(MyNumber n)
  {
    return n.Inner;
  }
} 
```

在一些方法里面：

```
MyNumber? nmn = new MyNumber(42);
int? covariantMagic = nmn; // works! 
```

在 C# 语言规范版本 4.0 中，我们读到“预定义的隐式标识和数字转换”应该存在这样的转换。

但是**假设**它也适用于用户定义的隐式转换是否安全？

（这个问题可能与这个错误有关：[http](http://connect.microsoft.com/VisualStudio/feedback/details/642227/) ://connect.microsoft.com/VisualStudio/feedback/details/642227/ ）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T14:36:35.163

> 但是假设它也适用于用户定义的隐式转换是否安全？

是的。从 C# 4 规范的第 6.4.2 节：

> 给定一个用户定义的转换运算符，它从一个不可为空的值类型`S`转换为一个不可为空的值类型`T`，一个*提升的转换运算符*从 转换`S?`为`T?`。这个提升的转换运算符执行从`S?`to的展开，`S`然后是用户定义的从`S`to的转换，然后是从to`T`的包装，除了 null 值直接转换为 null 值。`T``T?``S?``T?`
> 
> 提升的转换运算符与其基础的用户定义的转换运算符具有相同的隐式或显式分类。术语“用户定义的转换”适用于使用用户定义的和提升的转换运算符。

# c# - 在 C# 中使用 HttpWebRequest 流水线化

> ID：10518233
> 
> 赞同：4
> 
> 时间：2012-05-09T14:33:21.970
> 
> 标签：c#, http

我正在开发一个 HTTP 客户端，理想情况下它应该在需要时通过管道传输请求。此外，请求将在特定的网络接口上发送（客户端是多宿主的）。

使用异步套接字，为了发出请求，我使用以下代码：

```
 Uri url = new Uri(reqUrl);
        ServicePoint sp = ServicePointManager.FindServicePoint(url);
        sp.BindIPEndPointDelegate = new BindIPEndPoint(localBind);

        pseg.req = (HttpWebRequest)HttpWebRequest.Create(url);
        pseg.req.AddRange("bytes", psegStart, psegStart + psegLength - 1);
        pseg.req.KeepAlive = true;
        pseg.req.Pipelined = true; 
```

对于使用此代码发出的每个请求，都会打开到服务器的单独连接并并行接收分段。这没关系，但是，这不是我想要的行为。我希望请求被流水线化，但回复按顺序到达。如果我使用锁定或将连接限制设置为 1，则在完全接收到段 #1 之后才会发送对段 #2 的请求。

有什么方法可以实现我想要的并且仍然使用 HttpWebRequest/Response-classes？还是我必须下降到套接字？

# asp.net-mvc - MVC3 (Razor) - 不以编程方式更改 UI 文化语言

> ID：10518240
> 
> 赞同：0
> 
> 时间：2012-05-09T14:33:41.247
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在尝试开发具有选择语言功能的 MVC3（剃刀）应用程序。

使用以下视图作为`_Layout.cshtml` **_SelectCulture的局部视图**

```
<text>
   @Html.ActionLink("English", "SetCulture", new { controller = "Culture", culture = "en-GB" })  
   | 
   @Html.ActionLink("Welsh", "SetCulture", new { controller = "Culture", culture = "cy-GB" })
</text>
<div>
    @System.Threading.Thread.CurrentThread.CurrentUICulture.ToString()
</div> 
```

**文化控制器**

```
public ActionResult SetCulture(string culture)
        {
        System.Globalization.CultureInfo ci = new     System.Globalization.CultureInfo(culture);

            System.Threading.Thread.CurrentThread.CurrentCulture = ci;
            System.Threading.Thread.CurrentThread.CurrentUICulture = ci;

            return RedirectToAction("Index", "Home");
        } 
```

但它仍然没有改变语言。

请提供任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T14:36:13.697

好吧，您正在更改当前线程的语言。当前线程以当前请求结束，该请求在您的控制器操作执行后稍晚一些。然后您将重定向到其他一些控制器操作。然后 ASP.NET 产生一个新线程来服务这个显然没有文化集的请求。

所以你必须在某个地方坚持这个改变。基本上有3种不同的方法：

1.  路径变量
2.  饼干
3.  会议

我将它们按优先顺序排列。第一种方法包括在所有路由中集成一个`{culture}`令牌。恕我直言，这也是 SEO 方面的最佳方法。因此，例如，`/fr/home/index`如果您想以法语获取您的网站，您将重定向到。然后，您可以使用将在每个操作之前运行的自定义操作过滤器属性，检查文化路由参数并设置当前线程文化（这次是针对当前操作）。

Cookie 和会话还涉及在请求之间保持当前语言。在第一个示例中，这是在客户端完成的，而在第二个示例中，这是在服务器中完成的。再一次，可以使用自定义操作过滤器在每个操作之前读取语言的值并反映当前的线程文化。

您可以查看[以下](http://adamyan.blogspot.com/2010/02/aspnet-mvc-2-localization-complete.html)使用 Session 来保持当前语言的指南。

# coronasdk - 找到两点之间的点？

> ID：10518241
> 
> 赞同：0
> 
> 时间：2012-05-09T14:33:49.657
> 
> 标签：coronasdk

在我的游戏中，我使用两点画线。我想计算线之间的点。请给出在两点之间寻找点的任何公式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:40:10.627

如果你的两点是`A`然后`B`

> r(t) = A + t(B - A) ，其中 t 大于或等于 0 且小于或等于 1

`A`是连接到的线的方程`B`，因此允许您找到位于它们之间的线上的任何点（通过使用适当的 t 值）。

这有帮助吗？？

# objective-c - 在 NSTextField 中处理度量单位

> ID：10518253
> 
> 赞同：0
> 
> 时间：2012-05-09T14:34:20.717
> 
> 标签：objective-c, cocoa

我正在创建一个测试应用程序来计算矩形的面积。这个应用程序使用 **NSTextField**控件来获取矩形的长度和宽度。
用户应该输入一个字符串值，其中也包括长度单位（示例值**2.5 英寸**，**1500 毫米**）。我希望 NSTextField 自动转换以厘米（**cm**）为单位的值，以便在文本字段失去焦点时立即显示转换后的值（**以 cm为单位）。**

**例如：**

**用户输入长度为**：1500 mm

一旦用户转到下一个文本字段输入宽度，长度字段就会显示

**显示值**：150 厘米

我们怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:57:26.500

我认为您想使用委托方法 controlTextDidEndEditing:，它在编辑完成后发送到您的文本字段的委托。从字段编辑器中获取字符串后，您需要以某种方式对其进行解析以找到单位（如何解析它取决于您需要查找的所有内容）。如果您要寻找的东西很少，例如 cm、mm、m，那么您可能只使用 rangeOfString: 并测试 0 长度以找出输入的单位。顺便说一句，你也应该正确计算 - 1500mm = 150 cm

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:00:13.180

我会考虑一种不同的方法，使用 UIPicker 来显示可用的单位，并让他们分别输入数字。

否则，您将不得不进行所有这些解析。看不到解析的意义。另外，如果他们拼写错误，或者使用不同的方式来表示它，那么你也必须考虑到这一点。取决于您的应用程序，但如果用户无论如何都必须输入单位，则使用 UIPicker 可能更方便。

# tfs-workitem - 当我单击“将工作项发送到 Microsoft Outlook”按钮时，我可以修改从 WI 创建的电子邮件吗？

> ID：10518254
> 
> 赞同：2
> 
> 时间：2012-05-09T14:34:21.087
> 
> 标签：tfs-workitem

当我单击“将工作项发送到 Microsoft Outlook”按钮时，我可以修改从工作项创建的电子邮件吗？

我找到了一个转换，允许您更改与警报相关的电子邮件，但（到目前为止）不是这个按钮？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:16:29.337

这是不可能的。它在我们的积压工作中，但不会成为 TFS vNext (TFS11) 的一部分

Ewald Hofman（项目经理 TFS）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T17:31:55.887

这是可能的，有一个小的解决方法。

方法如下： 1\. 设置一个包含您希望在电子邮件中显示的字段的查询。过滤它以包含您的需求标准。

（就我而言，我选择了团队项目、ID、标题、分配给、状态、历史、描述。）

2.  运行查询。它可能会为您提供适用于查询的任务/工作项列表。

3.  右键单击您要通过电子邮件发送的那个，然后选择将选择发送到 MS Outlook。

** 'Viola' - 它将包括您选择的字段。

![TFS 和生成的电子邮件的简单示例](../Images/bdebe5c26f28b865e083404d0f663de6.png)

# postgresql - 将字符串类型转换为整数

> ID：10518258
> 
> 赞同：145
> 
> 时间：2012-05-09T14:34:34.250
> 
> 标签：postgresql

我正在从在 Varchar 中具有原始提要的表中导入数据，我需要将 varchar 中的列导入到字符串列中。我尝试使用`<column_name>::integer`as ，`to_number(<column_name>,'9999999')`但出现错误，因为有一些空字段，我需要将它们作为空或 null 检索到新表中。

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-05-09T14:43:39.550

大胆猜测：如果您的值是空字符串，则可以使用 NULLIF 将其替换为 NULL：

```
SELECT
    NULLIF(your_value, '')::int 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-12-01T13:38:19.930

您甚至可以更进一步并限制此合并字段，例如：-

```
SELECT CAST(coalesce(<column>, '0') AS integer) as new_field
from <table>
where CAST(coalesce(<column>, '0') AS integer) >= 10; 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-05-09T14:44:01.107

如果您需要将空列视为`NULL`s，请尝试以下操作：

```
SELECT CAST(nullif(<column>, '') AS integer); 
```

另一方面，如果您确实有`NULL`需要避免的值，请尝试：

```
SELECT CAST(coalesce(<column>, '0') AS integer); 
```

我同意，错误信息会有很大帮助。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2015-06-01T20:22:41.467

由于 NULL、特殊字符或空字符串，我成功地没有错误的唯一方法是这样做：

```
SELECT REGEXP_REPLACE(COALESCE(<column>::character varying, '0'), '[^0-9]*' ,'0')::integer FROM table 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-05-09T14:46:32.417

我无法对 Lukas 的帖子发表评论（声誉太低？我是新手）。

在我的 PG 设置`to_number(NULL)`上不起作用，所以我的解决方案是：

```
SELECT CASE WHEN column = NULL THEN NULL ELSE column :: Integer END
FROM table 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2018-06-22T08:59:53.990

如果值包含非数字字符，您可以将值转换为整数，如下所示：

```
SELECT CASE WHEN <column>~E'^\\d+$' THEN CAST (<column> AS INTEGER) ELSE 0 END FROM table; 
```

CASE 运算符检查<column>，如果匹配整数模式，则将速率转换为整数，否则返回0

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2020-03-02T08:40:23.670

## 常见问题

像这样天真地将任何字符串转换为整数

```
SELECT ''::integer 
```

通常会导致著名的错误：

```
Query failed: ERROR: invalid input syntax for integer: "" 
```

# 问题

PostgreSQL 没有用于**安全地**将任何字符串类型转换为整数的预定义函数。

## 解决方案

[创建一个受 PHP 的intval()](https://www.php.net/manual/en/function.intval.php)函数启发的用户定义函数。

```
CREATE FUNCTION intval(character varying) RETURNS integer AS $$

SELECT
CASE
    WHEN length(btrim(regexp_replace($1, '[^0-9]', '','g')))>0 THEN btrim(regexp_replace($1, '[^0-9]', '','g'))::integer
    ELSE 0
END AS intval;

$$
LANGUAGE SQL
IMMUTABLE
RETURNS NULL ON NULL INPUT; 
```

### 用法

```
/* Example 1 */
SELECT intval('9000');
-- output: 9000

/* Example 2 */
SELECT intval('9gag');
-- output: 9

/* Example 3 */
SELECT intval('the quick brown fox jumps over the lazy dog');
-- output: 0 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-01-10T12:21:27.717

你可以使用这个查询

```
SUM(NULLIF(conversion_units, '')::numeric) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-14T06:53:52.500

如果您的列有小数点

```
select NULLIF('105.0', '')::decimal 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-18T00:44:18.330

这对我有用：

```
select (left(regexp_replace(coalesce('<column_name>', '0') || '', '[^0-9]', '', 'g'), 8) || '0')::integer 
```

为了方便查看：

```
select (
    left(
        regexp_replace(
            -- if null then '0', and convert to string for regexp
            coalesce('<column_name>', '0') || '',
            '[^0-9]',
            '',
            'g'
        ),      -- remove everything except numbers
        8       -- ensure ::integer doesn't overload
    ) || '0'    -- ensure not empty string gets to ::integer
)::integer 
```

# ios - 位置服务授权对话框导致应用程序被停用？

> ID：10518259
> 
> 赞同：3
> 
> 时间：2012-05-09T14:34:38.790
> 
> 标签：ios, core-location

我注意到当我的应用程序显示定位服务授权对话框时，应用程序会暂停一小会儿（它会收到`UIApplicationWillResignActiveNotification`通知）。这是在某处记录或讨论的吗？可能是什么原因？其他授权对话框也这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:57:48.373

我仍然对这方面的一些权威资源感兴趣，但经过一番思考，这种行为是有道理的。授权对话框不能是应用程序的一部分，因为这可能会产生安全风险：应用程序可能会尝试代表用户确认对话框。由于对话框不是应用程序的一部分，因此在显示弹出窗口时考虑停用应用程序是有意义的。看起来所有授权对话框都这样做。

# iphone - NSNumber 导致 SIGABRT

> ID：10518265
> 
> 赞同：2
> 
> 时间：2012-05-09T14:34:57.477
> 
> 标签：iphone, objective-c, ios, nsnumber

我有一个奇怪的问题（如果你问我很奇怪）。我使用一个`NSNumber`对象来存储一个数字（doh）。当我尝试“修改”它时，它会使我的应用程序崩溃。我正在使用的代码如下所示：

```
if ([frequency intValue] > 19999)
    return;
frequency = [NSNumber numberWithInt:([frequency intValue] + 1)]; //I think this line is causing me the problem
[freqLabel setText:[NSString stringWithFormat:@"%i Hz", [frequency intValue]]]; 
```

频率`NSNumber`和 freqLabel 我的标签在哪里，每次调用它时我都会将值写入该标签。为什么这是不正确的？当我第一次调用它时它会起作用。它`NSNumber numberWithInt`总是返回一个我试图分配给频率的新对象吗？我该如何解决？改变 a`NSNumber`值的正确方法是什么？

对不起我的英语不好（如果有任何错误）。

编辑：错误日志如下所示：

```
[__NSCFType intValue]: unrecognized selector sent to instance 0x73430e0
2012-05-09 16:39:28.064 MyApp[31939:10703] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFType intValue]: unrecognized selector sent to instance 0x73430e0'
*** First throw call stack:
(0x17a6022 0x28afcd6 0x17a7cbd 0x170ced0 0x170ccb2 0x4821 0x17a7e99 0x49d14e 0x49d0e6 0x543ade 0x543fa7 0x543266 0x4c23c0 0x4c25e6 0x4a8dc4 0x49c634 0x2e49ef5 0x177a195 0x16deff2 0x16dd8da 0x16dcd84 0x16dcc9b 0x2e487d8 0x2e4888a 0x49a626 0x1cca 0x1c15)
terminate called throwing an exception 
```

但它并不总是显示此错误。有时它会导致 EXC_BAD_ACCESS。我应该将变量存储在临时变量中`NSNumber`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:02:20.673

您不能只分配/初始化一次，然后您就可以终身引用该类型。当您将频率分配给 numberWithInt 时，您将使用*autorelease值***覆盖**先前的 alloc/init 值（稍后将发布并导致您描述的确切行为）。它与 self.frequency 一起工作的原因是因为您的属性设置为保留属性，因此它会自动保留自动释放值。在您的 numberWithInt 行中添加一个 retain 就可以了（或者使用 self.frequency 执行您现在正在做的事情）。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:43:23.637

我会尝试这样做

```
int myNumber = ([frequency intValue] + 1);
frequency = [NSNumber numberWithInt:myNumber]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:44:32.480

是的，`numberWithInt:`确实返回了一个新对象。您可能没有保留此对象。分配`frequency`新的`NSNumber`. 如果没有上下文，我不确定实现此目的的最佳方法，但一种方法是创建`frequency`对象的属性并使用访问器方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-16T11:56:16.923

看起来您已经在 NSNumber 之前初始化并分配了一些值，例如您将它放在数组中。

基本上 NSNumber 对象是不可变的，所以无论如何改变它们的值是不可能的。如果您在数组中使用它，则可以使用此解决方法：

```
NSMutableArray *myOldArray = [[NSMutableArray alloc] init];
myOldInt = 3;
myOldArray[4] = [NSNumber numberWithInt:myOldInt]; // for example

NSMutableArray *myNewArray = [[NSMutableArray alloc] init];
myInt = myOldInt+2; 

NSMutableArray *row = [NSMutableArray arrayWithObjects:myOldArray[1],myOldArray[2],myOldArray[3],[NSNumber numberWithInt:myInt],[NSNumber numberWithInt:myInt2],nil];

[myNewArray addObject:row]; 
```*

# python - 处理（迭代）几个（HDF5）文件和每个 HDF 文件中的几个节点

> ID：10518267
> 
> 赞同：2
> 
> 时间：2012-05-09T14:35:17.920
> 
> 标签：python, iteration, filenames, hdf5

如何在 Numpy 中自动处理升序文件名和数组名：

我有一系列名为的 HDF5 文件：

```
20120101.hdf5, 20120102.hdf5, 20120103.hdf5, ..., 20120130.hdf5, 20120131.hdf5 
```

每个 hdf5 文件都包含几个数组命名：

```
array1, array2, array3, ..., array24 
```

我想分别修改每个数组，然后创建相应的新 hdf5 文件。例如，使用`20120101.hdf5`：

```
import numpy
import tables

file = openFile("20120101.hdf5","r")
b1 = file.root.array1
c1 = (b1<=1)
new20120101_array1 = creatArray('/','1',c1)
c2 = ((b1<=2) and (b>1))
new20120101_array1 = creatArray('/','2',c2)
.
.
.

c20 = ((b1<=20) and (b>19))
new20120101_array1 = creatArray('/','20',c20) 
```

并对数组 2-24 重复此操作。结果，我想要：

```
new20120101.hdf5 ---- new20120101_array1 ---- 1
                                              2
                                              ...
                                              20
                 ---- new20120101_array2 ---- 1
                                              ...
                                              20
                 ...
                 ---- new20120101_array24 --- 1
                                              ...
                                              20
new20120102.hdf5
....
new20120131.hdf5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:14:24.833

如果目录中有多个文件，则可以使用该`os.listdir`函数，该函数返回一个包含目录中条目名称的列表。

例子：

```
import os
import tables

direc = '/Users/cg/' # the working directory (where your files are stored)
dirs = os.listdir(direc)

for idir in dirs: # this will iterate over the files in your working directory

    if idir.endswith('.he5'): # only for HDF5 files...
        hdf5 = tables.openFile(os.path.join(direc,idir))

        #### DO WHAT YOU WANT WITH EACH FILE!

        hdf5.close() 
```

我猜你的问题的另一部分已经在你的[另一个问题](https://stackoverflow.com/questions/10526636/how-to-batch-select-and-calculate-arrays-in-numpy)`walkNodes`中得到了回答（你可以使用该功能）。

# android - 解析带有嵌套标记的 XML 后，如何在 ListView 中显示数据？

> ID：10518275
> 
> 赞同：-2
> 
> 时间：2012-05-09T14:35:46.817
> 
> 标签：android, xml, parsing, android-listview

我有这样的 XML 文件：

```
<activities>
<activity>
    <filename>http://www.someurl.com/documentSetting/members/0/701/66/videos/521/521.mp4</filename>
    <thumbnail>http://www.someurl.com/documentSetting/members/0/701/66/videos/521/521_120x90.jpg</thumbnail>
    <id>521</id>
    <is_private>0</is_private>
    <comments>
        <comment>
            <id>111</id>
            <body>Good video</body>
            <member_id>oo7</member_id>
            <profile_image>http://www.someurl.com/images/avatar/default_male_qlone.png</profile_image>
        </comment>
        <comment>
            <id>222</id>
            <body>nice video</body>
            <member_id>123</member_id>
            <profile_image>http://www.someurl.com/images/avatar/default_male_qlone.png</profile_image>
        </comment>
        <comment>
            <id>333</id>
            <body>gotcha!!!</body>
            <member_id>11</member_id>
            <profile_image>http://www.someurl.com/images/avatar/default_male_qlone.png</profile_image>
        </comment>
</activity>

<activity>
    <filename>http://www.someurl.com/documentSetting/members/0/701/66/videos/521/521.mp4</filename>
    <thumbnail>http://www.someurl.com/documentSetting/members/0/701/66/videos/521/521_120x90.jpg</thumbnail>
    <id>522</id>
    <is_private>0</is_private>
    <comments>
        <comment>
            <id>101</id>
            <body>aaa</body>
            <member_id>oo7</member_id>
            <profile_image>http://www.someurl.com/images/avatar/default_male_qlone.png</profile_image>
        </comment>
        <comment>
            <id>222</id>
            <body>bbb</body>
            <member_id>123</member_id>
            <profile_image>http://www.someurl.com/images/avatar/default_male_qlone.png</profile_image>
        </comment>
        <comment>
            <id>333</id>
            <body>ccc</body>
            <member_id>11</member_id>
            <profile_image>http://www.someurl.com/images/avatar/default_male_qlone.png</profile_image>
        </comment>
</activity> 
```

现在我想解析这个 XML 文件并在 ListView ::: 中像这样显示它

将文件名标签视为状态 ::

状态一：

```
 Comment 1
        Comment 2   
        Comment 3 
        Comment 4 
```

状态二：

```
 Comment 1
        Comment 2   
        Comment 3 
```

假设第一个活动有 4 条评论作为嵌套标签，第二个活动在他的评论标签中有 3 条评论。

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:45:11.123

尝试使用 Android 提供的 SAX Parser。

这是一个很好的[示例](http://www.jondev.net/articles/Android_XML_SAX_Parser_Example) ，您如何使用 SAX Parser 方法解析 XML 文件。

# sql - 根据两个条件排序，SQL

> ID：10518277
> 
> 赞同：0
> 
> 时间：2012-05-09T14:35:49.927
> 
> 标签：sql, tsql

![在此处输入图像描述](../Images/3ba6728bcbc9125645409ffcb280f345.png)

以上是我的查询的输出。我想按字母顺序排列排放类型，同时将地铁、阿巴拉契亚和农村`TRUES`组合在一起，即地铁、农村和阿巴拉契亚的所有 1 的顺序正确，但我如何按字母顺序排列第一列。以下是我的查询

```
SELECT     tblDischarge.dischargeType, COUNT(tblDischarge.dischargeType) AS counts, tblVisits.diabetes, tblVisits.hemiplegia, tblKentuckyCounties.Metro, 
                      tblKentuckyCounties.Appalachia, tblKentuckyCounties.Rural
FROM         tblKentuckyCounties INNER JOIN
                      tblVisits ON tblKentuckyCounties.countyID = tblVisits.countyID INNER JOIN
                      tblDischarge ON tblVisits.DischargeStatus = tblDischarge.dis_statID
WHERE     (tblVisits.diabetes = 1) AND (tblVisits.hemiplegia = 1)
GROUP BY tblDischarge.dischargeType, tblVisits.diabetes, tblVisits.hemiplegia, tblKentuckyCounties.Metro, tblKentuckyCounties.Appalachia, tblKentuckyCounties.Rural
HAVING      (tblDischarge.dischargeType LIKE '%routine%') OR
                      (tblDischarge.dischargeType LIKE '%short-term%') OR
                      (tblDischarge.dischargeType LIKE '%icf%') OR
                      (tblDischarge.dischargeType = 'home health') OR
                      (tblDischarge.dischargeType LIKE '%swing%') OR
                      (tblDischarge.dischargeType LIKE 'rehab%') OR
                      (tblDischarge.dischargeType LIKE '%long-term%')
ORDER BY tblKentuckyCounties.Appalachia, tblKentuckyCounties.Rural, tblKentuckyCounties.Metro 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:37:40.940

将最后一行更改为：

```
ORDER BY tblKentuckyCounties.Appalachia, tblKentuckyCounties.Rural, tblKentuckyCounties.Metro, tblDischarge.dischargeType 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:43:07.303

```
ORDER BY tblKentuckyCounties.Appalachia, tblKentuckyCounties.Rural, tblKentuckyCounties.Metro, tblDischarge.dischargeType 
```

应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:38:28.960

只需将 tblDischarge.dischargeType 添加到 ORDER BY 作为第一个值。

```
ORDER BY tblDischarge.dischargeType, tblKentuckyCounties.Appalachia, tblKentuckyCounties.Rural, tblKentuckyCounties.Metro 
```

**编辑**

这是无法做到的，因为您正试图按照两个完全不同的标准进行排序。您只能分订单 - 每个步骤**对上一步**中的结果进行排序，但您只能有一个订单。

# javascript - 如何使用 js 跳转到特定元素，例如使用哈希

> ID：10518280
> 
> 赞同：0
> 
> 时间：2012-05-09T14:35:58.080
> 
> 标签：javascript, jquery, html

我正在寻找一种方法，让我使用 javascript 跳转到元素列表（div）中的特定元素。

我不能使用哈希，因为我正在使用 history.js 插件来显示位置，就好像它是一个 url (http://www.mysite.com/load/php/into/div/)

我已经尝试过 scrolltop() 和 scrollto 插件，但两者都不会让我直接跳转到一个元素 - 我不希望页面闪烁，因为滚动条向下。

我正在寻找一种看起来就像您将使用链接哈希来获取元素的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:43:29.860

尝试使用 scrollTo jQuery 插件来跳转到一个元素。

```
var $parent = $('someParentContainer');//Or you can use body element
var $target = $parent.find('elementToScrollTo');
$('body').scrollTo($target, 500); 
```

# svn - 使用 svnkit 获取创建日期

> ID：10518282
> 
> 赞同：1
> 
> 时间：2012-05-09T14:36:14.273
> 
> 标签：svn, svnkit

我正在使用 svnkit 和 poi 为我的公司创建一个文档，这一切似乎进展顺利，直到我踩到文档的“创建日期”部分。我有一堆需要展示的属性，到目前为止我可以通过谷歌找到它。我已经读过，我实际上可以通过执行 SVNRepository.log 并查看第一个 SVNLogEntry.getDate 来检索任何文件的创建日期，但是我的大多数文档都围绕着最新的修订数据。Beeing 最后的评论，最后修改它的人等等，所以我试图用 SVNRepository.getLatestRevision 来填充它。所以如果没有其他可用的，我将不得不做一堆寻找每个文件的创建日期并寻找它对应的文件。我要问的是：

一些示例代码来显示我在做什么：

```
ArrayList<SVNFileRevision> resultReturn new ArrayList<SVNFileRevision>();
ArrayList entries = new ArrayList<SVNDirEntry>();
repository.getDir(path, repository.getLatestRevision(), true, entries);

Iterator iterator = entries.iterator();
while (iterator.hasNext()) {
SVNDirEntry entry = (SVNDirEntry) iterator.next();
if (entry.getKind() != SVNNodeKind.DIR) {

    ArrayList<SVNFileRevision> aux = new ArrayList<SVNFileRevision>();
    repository.getFileRevisions(path + (path.equals("") ? "" : "/") + entry.getName(), temp, 1,
                                repository.getLatestRevision());

    for (SVNFileRevision rev : aux) {

  //So we know that rev contains date author and log        
  //System.out.println(rev.getRevision());
  //System.out.println(rev.getRevisionProperties().getSVNPropertyValue("svn:date"));
  //System.out.println(rev.getRevisionProperties().getSVNPropertyValue("svn:author"));
  //System.out.println(rev.getRevisionProperties().getSVNPropertyValue("svn:log"));

            //we add path and name
            rev.getRevisionProperties().put("path", path);
            rev.getRevisionProperties().put("name", entry.getName());

    //insert creation date
    // ? ? ?

            resultReturn.add(rev);

    }
}
}
return resultReturn; 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T22:51:14.990

每个文件和目录的 SVNProperty.COMMITTED_DATE 指向创建日期。

您还可以查看 SVNProperty.COMMITTED_REVISION 和 SVNProperty.LAST_AUTHOR （如果您有一天需要作者和修订文件/目录的最新更改）。所有这些属性都由 SVN 在每个版本 > 0 时自动为每个文件和目录设置。

```
SVNProperties properties = new SVNProperties();
svnRepostory.getFile("path/to/file", -1, properties, null);
final String committedDateString = properties.getStringValue(SVNProperty.COMMITTED_DATE);
SVNDate date = SVNDate.parseDate(committedDateString); 
```

或者（甚至更好）你可以使用 SVNRepository#info 调用。它返回具有 getDate() 方法的 SVNDirEntry 实例。

# android - 全屏 VideoView 不居中

> ID：10518283
> 
> 赞同：4
> 
> 时间：2012-05-09T14:36:14.513
> 
> 标签：android

我使用此 XML 布局在我的活动中显示全屏 VideoView。视频是全屏的，但不是居中的。在横向模式下，它停留在屏幕的左侧，并在屏幕的右侧留下一些空白区域。

如何让我的 VideoView 放置在屏幕中央？

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent" >
   <VideoView android:id="@+id/myvideoview"
             android:layout_width="fill_parent"
             android:layout_alignParentRight="true"
             android:layout_alignParentLeft="true"
             android:layout_alignParentTop="true"
             android:layout_alignParentBottom="true"
             android:layout_height="fill_parent">
    </VideoView>
 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T10:53:39.563

试试这个布局，

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"              
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_gravity="center"
  android:gravity="center">

         <VideoView android:id="@+id/videoview"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerInParent="true"/>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T17:21:25.243

尝试这个：

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent" >
   <VideoView android:id="@+id/myvideoview"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:layout_centerInParent="true">
    </VideoView>
 </RelativeLayout> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T11:22:39.387

您需要有两种不同的布局。一张是人像，一张是风景。创建两个具有相同名称的 xml 文件，并将它们放入文件夹“layout-land”（横向）和“layout-port”（纵向）文件夹中。

在这里你可以看看如何处理方向变化。

这可以是使视频视图全屏的布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-17T11:26:31.433

接受 3 票反对

您需要有两种不同的布局。一张是人像，一张是风景。创建两个具有相同名称的 xml 文件，并将它们放入文件夹“layout-land”（横向）和“layout-port”（纵向）文件夹中。

在这里你可以看看如何处理方向变化。

这可以是使视频视图全屏的布局。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-10-20T01:47:21.330

如果您的 VideoView 无法在 RelativeLayout 中居中，您可以尝试将其放入 FrameLayout 中，如下所示：

```
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <VideoView
        android:id="@+id/video_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center">
    </VideoView>

</FrameLayout> 
```

然后把它放到RelativeLayout中。

# authorization - 使用 java 以编程方式将同义词上传到谷歌搜索 api

> ID：10518285
> 
> 赞同：1
> 
> 时间：2012-05-09T14:36:20.933
> 
> 标签：authorization, google-api, google-search-api, synonym

我在弄清楚如何使用 java 以编程方式将同义词从我的服务器上传到 google 搜索 api 时遇到问题。

**1.授权：**[这里](https://developers.google.com/accounts/docs/OAuth2)解释了如何做一个服务器到google api的描述。我在哪里可以找到一个使用 java 的简单示例？

**2.上传同义词**：我已经创建了要上传的xml，[在这里](https://developers.google.com/custom-search/docs/api)解释。我无法看到我实际上是如何将其上传到 google-api 的。有没有一个如何做到这一点的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:16:57.593

**一、授权**

```
 public static String getAuthorizationToken() throws IOException, HttpException{
      PostMethod method = new PostMethod("https://www.google.com/accounts/ClientLogin");
      method.addParameter("accountType", "HOSTED_OR_GOOGLE");
      method.addParameter("Email", "my@gmail.com");
      method.addParameter("Passwd", "myPassword");
      method.addParameter("service", "cprose");
      method.addParameter("source", "mySource");
      String response = executeMethodAsString(method);
      return retrieveAuthFromResponse(response);
    } 
```

**2.上传同义词**

```
 public static String updateSynonyms(String authToken, String xml) throws HttpException, IOException{

        PostMethod method = new PostMethod("http://www.google.com/cse/api/default/synonyms/abcdefg1234");
        method.addRequestHeader("Content-Type", "text/xml");
        method.addRequestHeader("Authorization", "GoogleLogin auth=" + authToken);
        RequestEntity entitiy = new StringRequestEntity(xml, "text/xml", "utf-8");
        method.setRequestEntity(entitiy);
        return executeMethodAsString(method);
    } 
```

# programming-languages - UML 是领域特定语言 (DSL) 吗？

> ID：10518286
> 
> 赞同：4
> 
> 时间：2012-05-09T14:36:21.940
> 
> 标签：programming-languages, uml, dsl

将 UML 视为 DSL 是否合适？

我知道每个人都认为 UML 是一种绘制图片的方式，但在 UML 图的“视图”之下有一个模型……而 UML 中的“L”代表语言。

另一个问题 - SysML 是 DSL 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T15:08:56.840

UML*是*一种 DSL。

“特定领域的语言”可以让人们在狭窄的应用领域中指定问题或解决方案；银行、电话电路设计……区分 DSL 的一种方法是它不能进行通用计算（尽管有一些 DSL 可以）。Java、C#、Python 和 COBOL 未能通过此测试。（有人会说 COBOL 是特定于“业务”的域，但它唯一的重大让步是十进制数据类型，C# 也有。）ColdFusion 未通过此测试；非标准语法不是 DSL，但 IIRC ColdFusion 对生成 HTML 有一些支持。Fortran 未能通过此测试，但其数组（-section）子语言仅适用于数组，不适用于通用计算。Verilog 是非常特定于领域的：它旨在让您写下数字电路。

UML 侧重于指定软件结构的不同方面。[你会注意到它不能进行通用计算；一个标志]。（它实际上有 9 个或更多不同的方面：类、状态图、部署……我将坚持讨论类方面）。类图方面可以描述数据是如何组织的，以及对该数据的操作。您可以就软件争论这一点，因此它不能是“特定于域的”。什么，构建软件不是问题域？

SYSML 专注于表达系统的连接方式，因此它也适合这一类别。

恕我直言，一个更有用的问题是，“如果我将 UML 视为 DSL，我将获得什么？” 在这里，我认为您不会得到很多。当你为一个你没有（设计或拥有）的人争论时，DSL 的概念很有用，重点是对常见问题的更好表达，并且可能对争论“你不想完全在其中实现你的系统”很有用因为它没有图灵能力”。如果您想解释您的语言将有很多有趣的符号，这也很有用，正是因为它们服务于特殊目的。人们已经对 UML 有所了解，所以……什么都没学到。

虽然我是 DSL 的忠实粉丝，但我也是 GPL（通用语言）的忠实粉丝。我认为在大型系统中，您必须同时找到“很多”：DSL 可以简洁地表达它们（减少工程和维护成本），以及 GPL 提供系统部分之间的任意计算和粘合。对我来说，一门语言最重要的是：

*   它声称要解决的问题类型是什么？它做得如何？
*   语法是什么（对于问题域来说它是相对标准的吗）？
*   什么是精确的语义（这是你学得最多的地方）？
*   工具支持有多好？
*   DSL 与大型系统的其他部分的集成情况如何？
*   社区有多大和支持？

UML（15 年后）已经对这些问题给出了很好的答案。

本土 DSL 通常表现不佳，部分原因是设计不佳，但通常是因为难以获得工具支持。我的公司提供[机器给 DSL 建设者极好的支持](http://www.semanticdesigns.com/products/DMS/DomainSpecificLanguage.html)来改善这种情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T15:04:41.737

UML 不是 DSL，因为 UML 可用于对任何垂直领域（保险软件、嵌入式系统……）进行建模

UML 是一种（水平的）DSL，因为 UML 是一种专门用于对软件系统建模的语言。

所以 UML 是也不是 DSL，这取决于你如何看待它。您可以将相同的推理应用于许多其他语言，例如 html 或 SQL。它们是通用的，因为它们可用于表示/操作任何类型的数据，但它们是特定的，因为它们专注于一项任务

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:43:04.417

对这两个问题的简短回答 - 否。

将 UML 视为一种工具，可让您描述软件架构、软件交互等……**以通用方式**描述它们，与语言无关。

DSL 是**专门**的语法，旨在更容易描述一些**特定的问题**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T14:44:50.260

我认为您第一个问题的答案取决于如何在“通用语言”一词中定义“通用”。[维基百科说它](http://en.wikipedia.org/wiki/Domain-specific_language)不是 DSL：

> 相反的是：
> 
> *   通用编程语言，例如 C、Java 或 Python，
>     
>     
> *   或通用建模语言，例如统一建模语言 (UML)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T07:04:33.877

我是 MDA 爱好者，所以我想我可以为你的问题提供一个非常详细的答案。什么是 UML：**对象管理组**(OMG) 是一个旨在提供标准语言和技术的公司联盟，它定义了一种称为“元对象设施”或**MOF的元元建模语言**(http://www.omg.org/mof)。元模型是描述模型的模型，或者换句话说，描述词汇表（您可以在模型中使用的元素）、语法（它们相互关联）及其语义（每个实体的含义以及如何它的含义在给定的上下文中会发生变化等）。元模型在它们产生的语言方面扮演着与上下文无关文法相同的角色。因此，您可以将元元模型视为一种可用于定义元模型的语言。这就是 OMG 对 UML 所做的实际操作。UML 语言有一个通过 MOF 在两个文档中描述的元模型：**UML Infrastructure**和**UML Supersturcture** (http://www.omg.org/spec/UML)。

UML 元模型的定义目的是足够通用以应对属于不同领域的不同系统的建模。当您定义一个新的 UML 模型时，您将创建一个 UML 元模型的实例。这样做的原因有很多：分析系统的某些特征，与其他利益相关者共享系统的某些方面等等。然而，OMG 愿景最重要的方面之一是**模型转换**。您可以将转换视为一组规则，告诉解释器如何探索模型并产生其他东西。您基本上可以将模型转换为两种不同的模型，其他模型（Model2Model，M2M 转换，通过**QVT定义**语言）或文本，例如代码或文档（Model2Text、M2T、通过**MOFM2T 转换语言**定义的转换）。所以理解UML模型不是它的图表是非常重要的。图表只是模型内容的图形表示，对人类有用，但不是机器可读的。您不能将转换应用于图表。

**Eclipse 建模框架**(EMF) 是一个非常强大（而且免费！）的框架，它实现了我提到的所有技术。MOF 的一个子集是用 Eclipse ECORE 语言实现的。通过 ECORE 定义 UML 元模型，以便图形 UML 编辑器（即 Papyrus、TopCased 等）实际上创建图形定义的 UML 模型的 XMI 表示，以符合 UML 元模型的 ECORE 表示。这种表示可以作为输入提供给转换引擎。**使用 QVTo 插件和ACCELEO**（实现 MOFM2T 转换语言）的 EMF 中也提供了这两种转换语言和相关引擎。

如前所述，UML 是有意通用的。然而，它还提供轻量级扩展机制，以使用特定领域的结构扩展原始语言词汇。这可以通过刻板印象来完成。原型是一种标签（实际上带有元属性），您可以附加在模型元素上以在语言中创建新实体。例如，您可以在您的模型中说某些类可能是需求或其他东西。当然有一些规则，例如，当你构造一个元类时，你不能违反它的原始语义，只是减少它。

SysSML 是 UML [http://www.omgsysml.org/](http://www.omgsysml.org/)的概要文件。SysML Block 只是一个原型为 Block 的 UML 类，SysML Requirement 只是另一个原型为 Block 的 UML 类，依此类推。

剖析像 UML 这样的元模型是一种创建与 UML 兼容的 DSL（就像您将原型添加到更通用的语言中的一些属于您的领域的结构一样）的一种非常简单的方法（即您可以使用 SysML和 UML 一起）。还有另一种创建 DSL 的方法，它通过 MOF (ECORE) 定义其元模型。在这种情况下，您将创建一种全新的语言，它在概念上与 UML 本身处于同一级别。

许多人说 UML 只是关于图表，因为在许多情况下他们不知道他们在说什么。这个话题要复杂得多，有趣和有前途。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T14:44:04.113

UML 是一种通用建模语言，不特定于任何领域，而 DSL 中的 S 代表特定。UML 用于建模也可以用多用途编程语言表示的系统。另一方面，DSL 是特定于特定领域的受限编程/脚本语言。

# python - 一个类中的所有函数是否有一个 __enter__ 和 __exit__ 等效项？

> ID：10518290
> 
> 赞同：4
> 
> 时间：2012-05-09T14:36:45.643
> 
> 标签：python, class, function

在处理数据库（或文件）时，我发现 python 的一个非常方便的功能是你可以给类提供的`__enter__`和函数。`__exit__`现在通过使用该`with`语句，您可以确保在此块`__enter__`中首先调用（并且您可以打开数据库或文件）并在它完成后`__exit__`调用（并且您可以关闭数据库或文件。

每次调用我的数据库类中的函数时，我都想打开和关闭一个 sqlite 事务。我可以在每个函数的开头和结尾都这样做，但是由于必须为每个函数都做那个类，我想知道，是否有在每个函数调用之前和之后调用的方法？就像单元测试中的 SetUp 和 TearDown 一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T14:39:01.420

您可以使用 pie 装饰器来装饰每个成员函数，例如

```
@transaction
def insertData(self):
    # code 
```

并且 transaction 是您定义的装饰器，用于用 pre 和 post 包装函数。是的，您必须为每个功能都这样做。这是一个例子

```
def transaction(f):
    def pre():
        print "pre transaction"
    def post():
        print "post transaction"

    def wrapped(*args):
        pre()
        f(*args)
        post()

    return wrapped

class Foo(object):
    def __init__(self):
        print "instantiating"

    def doFoo(self):
        print "doing foo"

    @transaction
    def doBar(self, value):
        print "doing bar "+str(value)

@transaction
def foofunc():
    print "hello"

foofunc()

f=Foo()
f.doFoo()
f.doBar(5) 
```

.

```
stefanos-imac:python borini$ python decorator.py 
pre transaction
hello
post transaction
instantiating
doing foo
pre transaction
doing bar 5
post transaction 
```

另一种方法是使用元类，如下所示：

```
import types

class DecoratedMetaClass(type):
    def __new__(meta, classname, bases, classDict):
        def pre():
            print "pre transaction"
        def post():
            print "post transaction"
        newClassDict={}
        for attributeName, attribute in classDict.items():
            if type(attribute) == types.FunctionType:
                def wrapFunc(f):
                    def wrapper(*args):
                        pre()
                        f(*args)
                        post()
                    return wrapper
                newAttribute = wrapFunc(attribute)
            else:
                newAttribute = attribute
            newClassDict[attributeName] = newAttribute
        return type.__new__(meta, classname, bases, newClassDict)

class MyClass(object):

    __metaclass__ = DecoratedMetaClass

    def __init__(self):
        print "init"
    def doBar(self, value):
        print "doing bar "+str(value)
    def doFoo(self):
        print "doing foo"

c = MyClass()
c.doFoo()
c.doBar(4) 
```

这是纯粹的黑魔法，但它有效

```
stefanos-imac:python borini$ python metaclass.py
pre transaction
init
post transaction
pre transaction
doing foo
post transaction
pre transaction
doing bar 4
post transaction 
```

您通常不想装饰`__init__`，并且您可能只想装饰具有特殊名称的那些方法，因此您可能需要替换

```
 for attributeName, attribute in classDict.items():
            if type(attribute) == types.FunctionType: 
```

有类似的东西

```
 for attributeName, attribute in classDict.items():
            if type(attribute) == types.FunctionType and "trans_" in attributeName[0:6]: 
```

这样，只有名为 trans_whatever 的方法才会被处理。

# google-maps-api-3 - google maps api v3 将多边形旋转一定程度

> ID：10518293
> 
> 赞同：3
> 
> 时间：2012-05-09T14:36:57.833
> 
> 标签：google-maps-api-3, rotation, polygon

我正在使用谷歌地图来允许用户绘制一个多边形，然后使用地图 API 和某种几何图形绘制以 16 度角覆盖绘制的多边形的最小有界正方形，即有界正方形应该限制整个多边形区域并且应该是相对于 y 轴旋转 16 度。

非常感谢您的帮助

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:49:21.300

这是一个复杂的问题。我可以概述一些步骤，让您获得最大的成功：

# 解决方案概要

1.  获取地图投影 (map.getProjection()) 并使用 projection.fromLatLngToPoint 将用户多边形转换为点平面。
2.  将用户多边形旋转 -16 度。
3.  计算新旋转用户的边界正方形/多边形。
4.  将多边形旋转 +16 度。
5.  使用 projection.fromPointToLatLng 将多边形顶点转换回 LatLng 坐标

## 资源：

*   谷歌地图 Api 投影：[https ://developers.google.com/maps/documentation/javascript/reference#Projection](https://developers.google.com/maps/documentation/javascript/reference#Projection)
*   谷歌地图 API 点平面文档：[https ://developers.google.com/maps/documentation/javascript/maptypes#WorldCoordinates](https://developers.google.com/maps/documentation/javascript/maptypes#WorldCoordinates)
*   多边形变换算法：[http ://www.kralidis.ca/gis/compcart/polytrans/](http://www.kralidis.ca/gis/compcart/polytrans/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-28T16:58:17.690

以下示例演示如何旋转多边形 ( [`google.maps.Polygon class`](https://developers.google.com/maps/documentation/javascript/reference#Polygon))。

操作说明：

*   画一个多边形
*   单击绘制的多边形以旋转它

```
function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 13,
        center: { lat: 33.678, lng: -116.243 },
        mapTypeId: google.maps.MapTypeId.TERRAIN
    });

    var drawingManager = new google.maps.drawing.DrawingManager({
        drawingMode: google.maps.drawing.OverlayType.POLYGON,
        drawingControl: true,
        drawingControlOptions: {
            position: google.maps.ControlPosition.TOP_CENTER,
            drawingModes: [
              google.maps.drawing.OverlayType.POLYGON
            ]
        }
    });
    drawingManager.setMap(map);

    google.maps.event.addListener(drawingManager, "overlaycomplete", function (event) {
        var polygon = event.overlay;
        google.maps.event.addListener(polygon, 'click', function (e) {
            autoRotatePolygon(polygon, 5);
        });
    });

}

function autoRotatePolygon(polygon, angle) {
    window.setInterval(function () {
        rotatePolygon(polygon, 5);
    }, 250);
}

function rotatePolygon(polygon,angle) {
    var map = polygon.getMap();
    var prj = map.getProjection();
    var origin = prj.fromLatLngToPoint(polygon.getPath().getAt(0)); //rotate around first point

    var coords = polygon.getPath().getArray().map(function(latLng){
       var point = prj.fromLatLngToPoint(latLng);
       var rotatedLatLng =  prj.fromPointToLatLng(rotatePoint(point,origin,angle));
       return {lat: rotatedLatLng.lat(), lng: rotatedLatLng.lng()};
    });
    polygon.setPath(coords);
}

function rotatePoint(point, origin, angle) {
    var angleRad = angle * Math.PI / 180.0;
    return {
        x: Math.cos(angleRad) * (point.x - origin.x) - Math.sin(angleRad) * (point.y - origin.y) + origin.x,
        y: Math.sin(angleRad) * (point.x - origin.x) + Math.cos(angleRad) * (point.y - origin.y) + origin.y
    };
}
```

```
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}

#map {
    height: 100%;
}
```

```
<div id="map"></div>
    <script async defer src="https://maps.googleapis.com/maps/api/js?callback=initMap&libraries=drawing"></script>
```

[**JSFiddle**](https://jsfiddle.net/thk7xs4u/1/)

# android - 关闭自定义对话框android

> ID：10518294
> 
> 赞同：1
> 
> 时间：2012-05-09T14:37:12.743
> 
> 标签：android, spinner

我创建了一个带有微调器和确定按钮的自定义对话框。我已经用一些项目填充了这个微调器并膨胀了布局。如果我单击“确定”按钮对话框将关闭。我设置了微调器

```
spinner.performCLick(); 
```

有什么方法可以让微调器选择项目并在不按确定按钮的情况下关闭对话框。我努力了

```
button.performclick(); 
```

但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:40:28.617

看看我下面的**代码**它可能会对你有所帮助。

```
package com.Test_dia;

import android.app.Activity;

import android.app.Dialog;

import android.os.Bundle;

import android.view.View;

import android.view.View.OnClickListener;

import android.widget.AdapterView;

import android.widget.AdapterView.OnItemSelectedListener;

import android.widget.ArrayAdapter;

import android.widget.Button;

import android.widget.Spinner;

import android.widget.Toast;

public class Test_diaActivity extends Activity {

    private Button btn;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btn = (Button) findViewById(R.id.button1);
        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                showalert();
            }
        });
    }

    protected void showalert() {
        // TODO Auto-generated method stub
        final Dialog dia = new Dialog(this);
        dia.setContentView(R.layout.dia);
        final String a[] = { "select one", "android", "java", "php" };

        Button btnok = (Button) dia.findViewById(R.id.button2);
        Spinner spin = (Spinner) dia.findViewById(R.id.spinner1);

        btnok.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                dia.dismiss();
            }
        });

        spin.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_dropdown_item_1line, a));

        spin.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub
                if (arg2 > 0) {
                    Toast.makeText(Test_diaActivity.this,
                            "You Selected :" + a[arg2], Toast.LENGTH_SHORT)
                            .show();
                    dia.dismiss();
                }
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });

        dia.show();
    }
} 
```

**主要的.xml**

```
<LinearLayout 
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="click here" />

</LinearLayout> 
```

**直径.xml**

```
<Spinner
    android:id="@+id/spinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="16dp" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/spinner1"
    android:text="ok" /> 
```

这段代码对我来说完全可以。

请享用....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:08:35.997

**编辑** （删除了以前的不合适的答案）

我将假设您的问题是 using`setOnItemSelectedListener`在启动时触发“onItemSelected”（因此在没有任何用户输入的情况下选择微调器中的第一个项目）并且您不希望这样。

如果是这种情况，请尝试以下操作。

设置类变量：

```
private int newSpinner = 0; 
```

然后在`setOnItemSelectedListener`：

```
 spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onNothingSelected(AdapterView<?> parent) {
        }

        @Override
        public void onItemSelected(AdapterView<?> parent, View view,int pos, long id) {
            if (newSpinner != 0) {
                // Do your code thing here
                dismiss();
            } else {
               newSpinner++
            }
        }
    }); 
```

# c# - C# - Windows Mobile - 蓝牙配对

> ID：10518307
> 
> 赞同：0
> 
> 时间：2012-05-09T14:37:55.910
> 
> 标签：c#, bluetooth, windows-mobile-6

我的任务是为我们公司构建一个 Windows Mobile 应用程序，该应用程序通过扫描设备的条形码快速配对设备。我可以发现该设备并与之交谈，但我无法配对。

在 C#/Windows Mobile 6 中，如何配对设备？我真的不需要在应用程序中与设备对话，我需要将其配对以便其他应用程序可以使用它。

是否有我需要执行此操作的 API？我看到有人说我需要注册密码等？我似乎找不到任何关于实际配对过程的文档，只是连接到它。（只是连接到它，实际上并没有配对。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:28:34.333

您可以使用我的库[32feet.NET](http://32feet.codeplex.com/)。使用方法`BluetoothSecurity.PairRequest`参见例如[蓝牙安全](http://32feet.codeplex.com/wikipage?title=Bluetooth%20Security)（无论设备是否安装了微软自己的蓝牙堆栈或设备是否有 Widcomm/Broadcom 或 SSO Bluetopia，这都应该有效）。

“配对”过程还应同时启用服务。如果没有，我们可能还有其他 API。使用哪些服务？串行端口，其他？

# jquery - Jquery如何在可扩展部分更改+，-

> ID：10518312
> 
> 赞同：1
> 
> 时间：2012-05-09T14:38:22.773
> 
> 标签：jquery

**（使用jquery）我有以下功能**

```
$(function() {
    $('tr.parent')
        .css("cursor","pointer")
        .attr("title","Click to expand/collapse")
        .click(function(){
            $(this).siblings('.child-'+this.id).toggle();
        });
    $('tr[@class^=child-]').hide().children('td');
}); 
```

**我有以下网页**

```
<table>
    <col style="width:40px;">
    <col style="width:80px;">
    <col style="width:150px;">
    <col style="width:40px;">
<thead>
    <tr>
        <th>ID</th>
        <th colspan="2">Name</th>
        <th>Total</th>
    </tr>
</thead>
<tbody>
    <tr class="parent" id="row123">
        <td>123</td>
        <td colspan="2">[+]Bill Gates</td>
        <td>100</td>
    </tr>
    <tr class="child-row123">
        <td>&nbsp;</td>
        <td>2007-01-02</td>
        <td>A short description</td>
        <td>15</td>
    </tr>
    <tr class="child-row123">
        <td>&nbsp;</td>
        <td>2007-02-03</td>
        <td>Another description</td>
        <td>45</td>
    </tr>
    <tr class="child-row123">
        <td>&nbsp;</td>
        <td>2007-03-04</td>
        <td>More Stuff</td>
        <td>40</td>
    </tr>

    <tr class="parent" id="row456">
        <td>456</td>
        <td colspan="2">[+]Bill Brasky</td>
        <td>50</td>
    </tr>
    <tr class="child-row456">
        <td>&nbsp;</td>
        <td>2007-01-02</td>
        <td>A short description</td>
        <td>10</td>
    </tr>
</tbody>
</table> 
```

**期望的结果：**

在可展开部分左侧带有“[+]”和“[-]”的文本之间进行更改，以表明它可以展开或压缩。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:52:47.500

我在您编辑之前就这样做了，我仍然认为它是有效的。我稍微更改了您的标记以将其放入`[+]`自己的单元格中，例如：

```
<tr class="parent" id="row123">
    <td>[+]</td>           
    <td>123</td>
    <td colspan="2">Bill Gates</td>
    <td>100</td>
</tr> 
```

然后你的代码就变得简单了：

```
$('tr.parent')
    .css("cursor","pointer")
    .attr("title","Click to expand/collapse")
    .click(function(){
        var sibs = $(this).siblings('.child-'+this.id).toggle();
        var expanded = sibs.is(':visible');
        $(this).children('td').eq(0).text( expanded ? '[-]' : '[+]');
    }); 
```

现场示例：http: [//jsfiddle.net/Vxdq8/](http://jsfiddle.net/Vxdq8/)

如果您*真的*想要第二个单元格内的 +/-，我建议您将其包装在一个跨度中并将上面的相关行更改为：

```
$(this).children('td').eq(1).children('span').text( expanded ? '[-]' : '[+]'); 
```

现场示例：http: [//jsfiddle.net/8J8Vj/](http://jsfiddle.net/8J8Vj/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:54:44.130

你可以做一个简单的 html/text 替换方法：

[http://jsfiddle.net/xBNGB/](http://jsfiddle.net/xBNGB/)

我看到你的开始状态是打开的..所以我在加载时将 + 更改为 -。

将您的脚本更改为：

```
$(function() {
    $('tr.parent')
        .css("cursor","pointer")
        .attr("title","Click to expand/collapse")
        .click(function(){

            var children = $(this).siblings('.child-'+this.id);
            children.toggle();

            if (children.css('display')=='none')
            $(this).html($(this).html().replace('-','+'));
            else
                $(this).html($(this).html().replace('+','-'));
        });
    $('tr[@class^=child-]').hide().children('td');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:46:56.223

您可以采取两种不同的方法：

1.  将 +/- 文本包裹在一个 span 中，然后当该项目的状态发生变化时，使用 .find() 在单击的元素中定位 span 并更改其内容。

2.  忘记把它作为文本，并将它们作为元素背景包含为更好看的图像（有足够的 padding-left 来容纳）。然后只需切换元素的类，使其显示 + 或 - 背景图像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T14:51:26.823

```
 $(document).ready(function () {
                $('tr:first').append('<th></th>');

                $('tr.parent').append('<td>+</td>');

                $('tr.parent').css("cursor", "pointer").attr("title", "Click to expand/collapse").click(function () {
                    $(this).siblings('.child-' + this.id).is(':visible') ? $(this).find('td:last').text('+') : $(this).find('td:last').text('-');
                    $(this).siblings('.child-' + this.id).toggle();
                });

                $('tr[class^=child-]').hide();
            });

//Or  

        $(document).ready(function () {
            $('tr:first').append('<th></th>');

            $('tr.parent').addClass('Expand').append('<td>+</td>');

            $('tr.parent').css("cursor", "pointer").attr("title", "Click to expand/collapse").click(function () {
                $(this).hasClass('Expand') ? $(this).removeClass('Expand').addClass('Compress').find('td:last').text('-') : $(this).removeClass('Compress').addClass('Expand').find('td:last').text('+');
                $(this).siblings('.child-' + this.id).toggle();
            });

            $('tr[class^=child-]').hide();
        }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T14:56:31.083

这是一个工作示例[http://jsfiddle.net/NE4rK/](http://jsfiddle.net/NE4rK/)

# javascript - 通过javascript将json转换为数组

> ID：10518313
> 
> 赞同：3
> 
> 时间：2012-05-09T14:38:23.357
> 
> 标签：javascript, json

> **可能重复：**
> [JSON 到 javaScript 数组](https://stackoverflow.com/questions/6872832/json-to-javascript-array)

谁能指出我如何使用 java 脚本将 json 数据转换为数组，以便从数据中绘制图表。JSON 的结构如下：

```
{
"d":{
  "results":[
     {
       "_metadata":{
          "uri": "http://www.something.com/hi",
          "type" : "something.preview.hi"
          }, "Name", "Sara", "Age": 20, "Sex" : "female"
     },
       "_metadata":{
           "uri": "http://www.something.com/hi",
           "type" : "something.preview.hi"
          }, "Name", "James", "Age": 20, "Sex" : "male"
     } 
   ]
  }
} 
```

我想将此 jason 转换为以下格式：

```
var sampleData = [
                { name: 'Sara', Age: 20, Sex: 'female'},
                { name: 'James', Age: 20, Sex: 'male'}
            ]; 
```

有人对如何实现这一目标有任何建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T14:43:45.800

```
var sampleData = [], results = d.results;
for (var i = 0, len = results.length; i < len; i++) {
    var result = results[i];
    sampleData.push({ name: result.Name, Age: result.Age, Sex: result.Sex });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:43:57.327

您只需遍历 javascript 对象中的 results 数组并构建一个新数组，其中包含所需格式的数据。

```
var results = data.d.results;
var sampleData = [], item;
for (var i = 0, len = results.length; i < len; i++) {
    item = results[i];
    sampleData.push({name: item.Name, Age: item.Age, Sex: item.Sex});
} 
```

# c# - 用 Arc 连接两个 UIElement

> ID：10518314
> 
> 赞同：0
> 
> 时间：2012-05-09T14:38:24.447
> 
> 标签：c#, wpf, silverlight, xaml, uielement

我有两个`UIElements`（即矩形）`Canvas`和它们的坐标。如何将它们与后面的代码中的 arc 连接起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:19:01.760

无需对矩形（或其他对象）进行精确命中：确保 Z 顺序正确。`arc.SetValue(Canvas.ZIndex, -1)`会将其推到后台。如果你想要一个垂直的命中，你需要打破代数：/

对于弧：（请参阅[http://msdn.microsoft.com/en-us/library/ms751808.aspx](http://msdn.microsoft.com/en-us/library/ms751808.aspx)），它需要包含在 PathFigure 中。

**编辑：**这显示了两个连接的矩形。简单的线在两个中心之间运行。圆弧从一个中心（pathFigure 起点）开始，第一个参数是第二个对象的中心。

```
 r1 = new Rectangle();
        r1.Margin = new Thickness(50, 50, 0, 0);
        r1.VerticalAlignment = System.Windows.VerticalAlignment.Top;
        r1.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
        r1.Height = 50;
        r1.Width= 50;
        r1.Fill = new SolidColorBrush(Colors.Red);

        r2 = new Rectangle();
        r2.Width = 50;
        r2.Height = 50;
        r2.Fill = new SolidColorBrush(Colors.Blue);
        r2.Margin = new Thickness(350, 450, 0, 0);
        r2.VerticalAlignment = System.Windows.VerticalAlignment.Top;
        r2.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;

        l = new Line();
        l.X1 = 75;
        l.Y1 = 75;
        l.X2 = 375;
        l.Y2 = 475;
        l.Fill = new SolidColorBrush(Colors.Purple);
        l.Stroke = new SolidColorBrush(Colors.Purple);
        l.StrokeThickness = 2;
        l.SetValue(Canvas.ZIndexProperty, -1);

        PathGeometry myPathGeometry = new PathGeometry();

        // Create a figure.
        PathFigure pathFigure1 = new PathFigure();
        pathFigure1.StartPoint = new Point(75, 75);

        pathFigure1.Segments.Add(
            new ArcSegment(
                new Point(375, 475),
                new Size(50, 50),
                45,
                true, /* IsLargeArc */
                SweepDirection.Clockwise,
                true /* IsStroked */ ));
        myPathGeometry.Figures.Add(pathFigure1);

        // Display the PathGeometry. 
        Path myPath = new Path();
        myPath.Stroke = Brushes.Black;

        myPath.StrokeThickness = 1;
        myPath.Data = myPathGeometry;
        myPath.SetValue(Canvas.ZIndexProperty, -1);

        LayoutRoot.Children.Add(r1);
        LayoutRoot.Children.Add(r2);
        LayoutRoot.Children.Add(l);
        LayoutRoot.Children.Add(myPath); 
```

# jquery - 为 smartwizard 2.0 动态添加子菜单

> ID：10518322
> 
> 赞同：3
> 
> 时间：2012-05-09T14:38:50.377
> 
> 标签：jquery, jquery-plugins, smart-wizard

嗨，我正在使用 smartwizard 2.0 插件，我想知道是否有人可以帮助我。

基本上，当用户单击某个按钮时，我试图动态添加一个菜单。我已经给出了下面的代码。

```
function add_submenu() {
        var ulid = document.getElementById("ulsub1");
        var newli = document.createElement("li");

        newli.innerHTML = "<a href=\"#step-7\" class=\"done\" isdone=\"1\" rel=\"7\"><label class=\"stepNumber\">7</label><span class=\"stepDesc\">Dy Coupon<br /></span></a>";
        ulid.appendChild(newli);

        var maintab = document.getElementById("stpContainer");
        var newdiv = document.createElement("div");
        newdiv.setAttribute('id', 'step-7');
        newdiv.setAttribute('class', 'content');
        newdiv.setAttribute('style', 'display: block;');
        newdiv.innerHTML = "<h2 class=\"StepTitle\">Dynamic Coupon</h2><table cellspacing=\"3\" cellpadding=\"3\" align=\"center\"><tr><td align=\"center\" colspan=\"3\">&nbsp;</td></tr><tr><td align=\"right\">Hello Name :</td><td align=\"left\"><input type=\"text\" id=\"coupon-8\" name=\"Coupon Name\" class=\"txtBox\"></td><td align=\"left\"><span id=\"msg_firstname\"></span>&nbsp;</td></tr></table>";
        maintab.appendChild(newdiv);
} 
```

我面临的问题是添加的菜单无法根据功能工作。

任何帮助是极大的赞赏。

[您可以在此网站http://techlaboratory.net/products.php?product=smartwizard&action=2](http://techlaboratory.net/products.php?product=smartwizard&action=2)中找到 smartwizard 2.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:04:45.877

我可能会迟到，但您应该在添加新菜单后再次尝试调用 smartWizard 函数。

# apache-flex - 我如何将 Google Map API V3 用于 Flex 4 应用程序

> ID：10518323
> 
> 赞同：1
> 
> 时间：2012-05-09T14:38:52.047
> 
> 标签：apache-flex, google-maps

谁能告诉我，我如何将 Google Map API V3 用于 Flex 4 应用程序。

目前，我的应用程序正在使用 Google Map API (map_flex_1_18b.swc)，因为它已被弃用。我想使用谷歌地图 API V3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:41:25.267

Flex AIR 可以实现 StageWebView：

![谷歌地图-stagewebview](../Images/963c527b7a83da6ef3d2545597761f29.png)

实现如下，这应该适用于桌面版 AIR，我相信适用于 Android 的 Flex 移动版适用，但不适用于 iOS。

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                       xmlns:s="library://ns.adobe.com/flex/spark"
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       addedToStage="addedToStageHandler(event)">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            protected var stageWebView:StageWebView;

            protected function addedToStageHandler(event:Event):void
            {
                stageWebView = new StageWebView();
                stageWebView.viewPort = new Rectangle(0, 0, stage.stageWidth, stage.stageHeight);
                stageWebView.stage = stage;
                stageWebView.loadURL("http://maps.google.com/");
            }

            override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
            {
                super.updateDisplayList(unscaledWidth, unscaledHeight);

                if (stageWebView)
                    stageWebView.viewPort = new Rectangle(0, 0, unscaledWidth, unscaledHeight);
            }
        ]]>
    </fx:Script>
</s:WindowedApplication> 
```

Flash / Flex 不支持 Google Maps V3 API。StageWebView 或在通过外部接口访问的 Flex 应用程序顶部覆盖 HTML 包装器是选项。

在本机上，您可能想要寻找其他地图 API，例如 MapQuest 或 Esri / ArcGIS。

*   [http://developer.mapquest.com/web/products/featured/as3-flex-flash](http://developer.mapquest.com/web/products/featured/as3-flex-flash)
*   [http://developer.mapquest.com/web/products/featured/as3-flex-flash-mobile](http://developer.mapquest.com/web/products/featured/as3-flex-flash-mobile)
*   [http://www.adobe.com/devnet/flash-builder/articles/mobile-mapping-app-arcgis.html](http://www.adobe.com/devnet/flash-builder/articles/mobile-mapping-app-arcgis.html)
*   [http://help.arcgis.com/en/webapi/flex/](http://help.arcgis.com/en/webapi/flex/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T16:05:21.060

Google Maps API v3 仅适用于 Google 站点中所示的 javascript。

您必须使用旧的 v2 才能使用它。

关于 stageWebView，我不推荐它，因为你无法控制它。

# machine-learning - 如何在 sklearn 的集成分类器中使用自定义分类器？

> ID：10518329
> 
> 赞同：8
> 
> 时间：2012-05-09T14:39:07.923
> 
> 标签：machine-learning, nlp, scikits, scikit-learn

我读到 sklearn 中的内置集成方法使用决策树作为基本分类器。是否可以改用自定义分类器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:10:13.213

如果您的意思是随机森林类，那么不，这目前是不可能的。去年 1 月，在 scikit-learn 邮件列表中讨论了允许其他估算器的选项，但我认为没有任何实际代码出现在讨论中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-08T23:31:42.817

如果您使用`sklearn.ensemble.AdaBoostClassifier`，那么答案是肯定的： [scikit-learn.org/stable/modules/generated/sklearn.ensemble.AdaBoostClassifier.html](http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.AdaBoostClassifier.html) 您可以自己分配 base_estimator。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-22T12:33:36.223

我不知道它是否有帮助，但您可以使用管道实用程序非常轻松地堆叠/组合自定义分类器：http: [//scikit-learn.org/stable/tutorial/statistical_inference/putting_together.html#pipelining](http://scikit-learn.org/stable/tutorial/statistical_inference/putting_together.html#pipelining)

# c# - WCF，如何自托管回调？

> ID：10518330
> 
> 赞同：0
> 
> 时间：2012-05-09T14:39:14.863
> 
> 标签：c#, wcf, self-hosting

我有一个由自主机 [Winform] 和客户端 [Winform] 运行的 WCF 服务库，并且我使用 NetTcpBinding。

**我希望客户端从 WCF 服务调用一个方法，以在自托管**Winform上弹出一个 MessageBox 。
**要点**：我想将图像发送到服务器端，它应该以新形式出现，但我无法在 WCF 服务库与其自托管表单之间进行通信。

请您提供一个示例，该示例向我展示当客户端从 WCF 服务库调用方法时，我将如何在自托管 winform 上显示消息框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:43:50.467

您可以将您的服务创建为单例，并在其构造函数中传递表单。然后将这个服务对象传入ServiceBase。

然后，当您获得函数调用时，您将引用 Form 并可以以这种方式对其进行操作。请注意使用表单应用程序时的线程限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:36:07.507

您可以从将图像发送到服务器端的服务调用返回成功或失败消息。假设您成功地将消息发送到服务器，您可以打开一个新表单并填充消息框或您希望向用户显示的任何用户界面控件。正如我在评论中提到的，服务是多租户的，你不应该在服务层混合用户界面相关的代码。

# python - 间歇性 KeyError 引发且无法重现

> ID：10518333
> 
> 赞同：3
> 
> 时间：2012-05-09T14:39:31.720
> 
> 标签：python

我试图用一些更简单的功能重现它，但没有成功。所以下面的代码展示了我们的生产服务器抛出的很多 KeyError 的相关方法。

```
class PokerGame:
...
    def serialsNotFold(self):
        return filter(lambda x: not self.serial2player[x].isFold(), self.player_list)

    def playersNotFold(self):
        return [self.serial2player[serial] for serial in self.serialsNotFold()]
... 
```

这是追溯。

```
Traceback (most recent call last):
  File "/usr/lib/python2.6/dist-packages/pokernetwork/pokertable.py", line 945, in update
    try: self.game.historyReduce()
  File "/usr/lib/python2.6/dist-packages/pokerengine/pokergame.py", line 3949, in historyReduce
    self.turn_history = PokerGame._historyReduce(self.turn_history,self.moneyMap())
  File "/usr/lib/python2.6/dist-packages/pokerengine/pokergame.py", line 1323, in moneyMap
    money = dict((player.serial,player.money) for player in self.playersNotFold())
  File "/usr/lib/python2.6/dist-packages/pokerengine/pokergame.py", line 3753, in playersNotFold
    return [self.serial2player[serial] for serial in self.serialsNotFold()]
KeyError: 21485L 
```

*   self.player_list 是一个连续剧列表
*   self.serial2player 是一个将连续剧映射到 Player 对象的字典

现在应该不可能在 playerNotFold 中引发 KeyError，因为因此必须在 serialsNotFold 中引发相同的错误，而事实并非如此。

我问了我的 2 位同行和#python 上的人，但没有人能够猜到这是怎么发生的。

如果您需要完整的源代码：[https ://github.com/pokermania/poker-network/](https://github.com/pokermania/poker-network/)

**编辑：** 问题是我们打印了从顶部而不是底部限制的 traceback.format_exc(limit=4) 。最后 2 个调用隐藏，所以看起来像 playerNotFold 引发了异常。

这是一个完整的跟踪。

```
Traceback (most recent call last): 
  File "/usr/lib/python2.7/pokernetwork/pokertable.py", line 704, in update 
    try: self.game.historyReduce() 
  File "/usr/lib/python2.7/pokerengine/pokergame.py", line 3953, in historyReduce 
    self.turn_history = PokerGame._historyReduce(self.turn_history,self.moneyMap()) 
  File "/usr/lib/python2.7/pokerengine/pokergame.py", line 1327, in moneyMap 
    money = dict((player.serial,player.money) for player in self.playersNotFold()) 
  File "/usr/lib/python2.7/pokerengine/pokergame.py", line 3757, in playersNotFold 
    return self.serial2player[serial] for serial in self.serialsNotFold()] 
  File "/usr/lib/python2.7/pokerengine/pokergame.py", line 3754, in serialsNotFold 
    return filter(lambda x: not self.serial2player[x].isFold(] self.player_list) 
  File "/usr/lib/python2.7/pokerengine/pokergame.py", line 3754, in <lambda> 
    return filter(lambda x: not self.serial2player[x].isFold(] self.player_list) 
KeyError: 1521 
```

很抱歉浪费了您的时间：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:49:17.920

我猜你使用线程和 self.serial2player 被不同的线程修改。

# java - 在 JasperReports (iReport) 中对数据集上的连续数字进行分组

> ID：10518334
> 
> 赞同：1
> 
> 时间：2012-05-09T14:39:33.290
> 
> 标签：java, sql, jasper-reports, ireport

我的 jasper 报告中有一个查询，由用户给定的输入生成的结果集之一可能是下面所述的数据：

```
memberId stockNo refineryCode constantSerialNo  serialNo
45       1       IAR          A-                98729
45       1       IAR          A-                98730
45       1       IAR          A-                98731
45       1       IAR          A-                98733
45       1       IAR          A-                98734
45       1       IAR          A-                98736
45       1       IAR          A-                98737
45       1       IAR          A-                98738
45       1       IAR          A-                98739 
```

如果序列号是连续的，我想在一行上显示这些数据。因此，如果我想在报告中显示上述数据，我必须以下列方式显示它们：

```
memberId stockNo refineryCode constantSerialNo  serialNo
45       1       IAR          A-                98729 - 98731
45       1       IAR          A-                98733 - 98734
45       1       IAR          A-                98736 - 98739 
```

我知道可能有一些解决方案在 sql 上使用光标或在 Java 等 OOP 语言中使用 ORM 并发送到 jasper 报告。但是，出于好奇，我想问一下是否有使用 iReport 的表达式或组或任何其他我现在没有想到的东西的动态解决方案，这可以让我的生活更轻松。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:26:50.607

这是一种方法，假设`serialNo`是某种数值而不是字符串。

1.  sql 查询结果的数据集必须按 排序`serialNo`，如上所示。
2.  `Report Group`使用以下组表达式创建一个： `$V{GroupCount} == new BigDecimal(0) ? $F{serialNo}:$F{serialNo}.subtract($V{GroupCount})`. 每次`serialNo`序列中存在间隙时，这将创建一个新组。
3.  创建一个变量来计算当前组`GroupCount`中连续值的数量。`serialNo`此变量用于跟踪下一个期望值`serialNo`是什么。
4.  创建一个变量，该变量`StartRange`将保存给定范围的连续`serialNo`值的起始值。该值应在新组开始时重置并具有以下值：`$V{GroupCount}.intValue() == 1 ? $F{ID}:$V{StartRange}`.
5.  将字段的`Evaluation Time`值设置为。将以下值放入其中：.`serialNo``ReportGroup``$V{StartRange}+" - " + $F{serialNo}`
6.  `Print When Expression`将`Detail`乐队的更改为以下内容： `new Boolean($V{GroupCount}.intValue() == 1)`。

我在下面发布了完整的 jrxml 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Created with iReport - A designer for JasperReports -->
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN"
"http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport name="Group_By_Consecutive" columnCount="1" printOrder="Vertical" orientation="Portrait" pageWidth="595" pageHeight="842" columnWidth="535" columnSpacing="0" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20" whenNoDataType="NoPages" isTitleNewPage="false" isSummaryNewPage="false">
  <property name="ireport.scriptlethandling" value="0" />
  <property name="ireport.encoding" value="UTF-8" />
  <import value="java.util.*" />
  <import value="net.sf.jasperreports.engine.*" />
  <import value="net.sf.jasperreports.engine.data.*" />
  <queryString>
    <![CDATA[select 1 as id, 'Name 1' as name from dual union all
select 2 as id, 'Name 2' as name from dual union all
select 3 as id, 'Name 3' as name from dual union all
select 4 as id, 'Name 4' as name from dual union all
select 6 as id, 'Name 6' as name from dual union all
select 7 as id, 'Name 7' as name from dual union all
select 8 as id, 'Name 8' as name from dual union all
select 9 as id, 'Name 9' as name from dual union all
select 10 as id, 'Name 10' as name from dual union all
select 11 as id, 'Name 11' as name from dual union all
select 14 as id, 'Name 14' as name from dual union all
select 15 as id, 'Name 15' as name from dual union all
select 16 as id, 'Name 16' as name from dual union all
select 17 as id, 'Name 17' as name from dual union all
select 23 as id, 'Name 23' as name from dual union all
select 24 as id, 'Name 24' as name from dual union all
select 25 as id, 'Name 25' as name from dual union all
select 26 as id, 'Name 26' as name from dual union all
select 27 as id, 'Name 27' as name from dual union all
select 28 as id, 'Name 28' as name from dual]]>
</queryString>
  <field name="ID" class="java.math.BigDecimal" />
  <field name="NAME" class="java.lang.String" />
  <variable name="GroupCount" class="java.math.BigDecimal" resetType="Group" resetGroup="Consecutive" calculation="Count">
    <variableExpression>
      <![CDATA[$F{ID}]]>
</variableExpression>
    <initialValueExpression>
      <![CDATA[new BigDecimal(0)]]>
</initialValueExpression>
  </variable>
  <variable name="StartRange" class="java.math.BigDecimal" resetType="Report" calculation="Nothing">
    <variableExpression>
      <![CDATA[$V{GroupCount}.intValue() == 1 ? $F{ID}:$V{StartRange}]]>
</variableExpression>
  </variable>
  <group name="Consecutive">
    <groupExpression>
      <![CDATA[$V{GroupCount} == new BigDecimal(0) ? $F{ID}:$F{ID}.subtract($V{GroupCount})]]>
</groupExpression>
    <groupHeader>
      <band height="0" isSplitAllowed="true"></band>
    </groupHeader>
    <groupFooter>
      <band height="0" isSplitAllowed="true"></band>
    </groupFooter>
  </group>
  <background>
    <band height="0" isSplitAllowed="true"></band>
  </background>
  <title>
    <band height="0" isSplitAllowed="true"></band>
  </title>
  <pageHeader>
    <band height="0" isSplitAllowed="true"></band>
  </pageHeader>
  <columnHeader>
    <band height="18" isSplitAllowed="true">
      <staticText>
        <reportElement x="0" y="0" width="200" height="18" key="staticText-1" />
        <box></box>
        <textElement>
          <font />
        </textElement>
        <text>
          <![CDATA[serialNo]]>
</text>
      </staticText>
      <staticText>
        <reportElement x="200" y="0" width="100" height="18" key="staticText-3" />
        <box></box>
        <textElement>
          <font />
        </textElement>
        <text>
          <![CDATA[Name]]>
</text>
      </staticText>
      <staticText>
        <reportElement x="300" y="0" width="100" height="18" key="staticText-4" />
        <box></box>
        <textElement>
          <font />
        </textElement>
        <text>
          <![CDATA[MetaData(Ignore)]]>
</text>
      </staticText>
    </band>
  </columnHeader>
  <detail>
    <band height="18" isSplitAllowed="true">
      <printWhenExpression>
        <![CDATA[new Boolean($V{GroupCount}.intValue() == 1)]]>
</printWhenExpression>
      <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self">
        <reportElement x="200" y="0" width="100" height="18" key="textField" />
        <box></box>
        <textElement>
          <font />
        </textElement>
        <textFieldExpression class="java.lang.String">
          <![CDATA[$F{NAME}]]>
</textFieldExpression>
      </textField>
      <textField isStretchWithOverflow="false" pattern="##0.00" isBlankWhenNull="false" evaluationTime="Group" evaluationGroup="Consecutive" hyperlinkType="None" hyperlinkTarget="Self">
        <reportElement x="0" y="0" width="200" height="18" key="textField" />
        <box></box>
        <textElement>
          <font />
        </textElement>
        <textFieldExpression class="java.lang.String">
          <![CDATA[$V{StartRange}+" - " + $F{ID}]]>
</textFieldExpression>
      </textField>
      <textField isStretchWithOverflow="false" pattern="##0.00" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self">
        <reportElement x="300" y="0" width="100" height="18" key="textField" />
        <box></box>
        <textElement>
          <font />
        </textElement>
        <textFieldExpression class="java.math.BigDecimal">
          <![CDATA[$V{GroupCount}]]>
</textFieldExpression>
      </textField>
    </band>
  </detail>
  <columnFooter>
    <band height="0" isSplitAllowed="true"></band>
  </columnFooter>
  <pageFooter>
    <band height="0" isSplitAllowed="true"></band>
  </pageFooter>
  <summary>
    <band height="0" isSplitAllowed="true"></band>
  </summary>
</jasperReport> 
```

# c# - 文本框验证不起作用

> ID：10518335
> 
> 赞同：1
> 
> 时间：2012-05-09T14:39:37.017
> 
> 标签：c#, validation

我有两个文本框。在采取任何其他行动之前，我需要验证它们。

```
private ErrorProvider _errorProviderEmail = new ErrorProvider();
private ErrorProvider _errorProviderPass = new ErrorProvider();
public FormLogin()
{
  InitializeComponent();

  textBoxEmail.Validating += TextBoxEmailValidating;
  textBoxPass.Validating += TextBoxPassValidating;

  textBoxEmail.Validated += TextBoxEmailValidated;
  textBoxPass.Validated += TextBoxPassValidated;

  textBoxEmail.Text = "";
  textBoxPass.Text = "";
}

void TextBoxPassValidated(object sender, EventArgs e)
{
  _errorProviderPass.SetError(textBoxPass, "");
}

void TextBoxEmailValidated(object sender, EventArgs e)
{
  _errorProviderEmail.SetError(textBoxEmail, "");
}

void TextBoxPassValidating(object sender, System.ComponentModel.CancelEventArgs e)
{
  if (!string.IsNullOrEmpty(textBoxPass.Text)) return;
  e.Cancel = true;
  _errorProviderPass.SetError(textBoxPass,"Password is required!");
}

void TextBoxEmailValidating(object sender, System.ComponentModel.CancelEventArgs e)
{
  if (!string.IsNullOrEmpty(textBoxEmail.Text)) return;
  e.Cancel = true;
  _errorProviderEmail.SetError(textBoxEmail, "Email address is required!");
} 
```

问题是只`textBoxEmail`触发了验证事件，这里可能出了什么问题，为什么验证事件`textBoxPass`永远不会触发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:29:48.747

单个 TextBox 控件仅在失去焦点时进行验证。

尝试调用表单的`ValidateChildren()`函数来强制每个控件调用它们的验证处理程序：

```
private void button1_Click(object sender, EventArgs e) {
  if (this.ValidateChildren()) {
    this.Close();
  }
} 
```

此外，您只需要一个`ErrrorProvider`组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-16T16:31:33.867

`Validating`仅当接收焦点的控件将`CausesValidation`属性设置为 true时才会引发该事件。

例如，如果您在`TextBox1`'s`Validating`事件中编写了代码，然后单击 OK 按钮 ( `CausesValidation = true`)，则会引发 Validating 事件，但如果您单击 Cancel 按钮 ( `CausesValidation = false`)，`Validating`则不会引发该事件。

[CodeProject](https://www.codeproject.com/Answers/232913/Validation-is-not-firing#answer1)上的源代码

# android - Android：通过 LAN 使用 WiFi

> ID：10518339
> 
> 赞同：2
> 
> 时间：2012-05-09T14:39:54.653
> 
> 标签：android, wifi, lan

出于调试目的，我将手机上的 IP 地址设置为 192.168.178.220，它通过无线路由器连接到我的 PC，以访问我在 PC 上的 IIS 中运行的 Web 应用程序。Web 应用程序使用 192.168.178.201。我必须使用桌面应用程序 DnsSpeeder 作为我的 DNS 服务器，以便我的手机应用程序使用其域名而不是其 IP 地址与 Web 应用程序通信。我需要这样做，因为我使用与其他 Web 应用程序共享相同 IP 地址的子域。

通常这是可行的，但如果我一分钟左右不碰手机，手机就无法解析域名。我什至尝试了第三方工具，只是输入了 IP 地址，它无法连接到 Web 应用程序。但几分钟后，无论是 IP 地址还是域名，连接都可以正常工作。如果我使用第三方工具 ping Internet 上的站点，例如 google.com，也会出现很长的延迟。

我的 Internet 连接似乎始终处于打开状态，并且在我的设置下我将其设置为永不关闭，所以我看不出它怎么可能是 WiFi 收音机本身。

问题可能出在使用 LAN IP 地址还是其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:03:00.720

有趣的！当然，听起来好像有什么东西要在手机上睡觉。您是否在 PC 上运行过数据包嗅探器（例如 Wireshark）来确定预期的 DNS 请求是否从手机发送到 DnsSpeeder？

# php - 使用php从mysql db中选择随机唯一记录

> ID：10518345
> 
> 赞同：2
> 
> 时间：2012-05-09T14:40:12.883
> 
> 标签：php, mysql

我正在尝试`random`从数据库中获取记录`mysql`，它可以工作，但是当我获取它们时我也需要记录，`unique`因为它们在输出中重复，这是我的代码：

```
 <?

for ($counter = 1; $counter <=5;$counter++) 
{

$randomPostSelect = mysql_query("SELECT DISTINCT * FROM beventreservation WHERE (beventStatus='online' OR beventStatus='soldout') ORDER BY RAND() LIMIT 5") or die(mysql_error());

$fetchPosts = mysql_fetch_array($randomPostSelect) or die(mysql_error());

echo '<li><a href="reservation.php?rev='.$fetchPosts['eventId'].'">'.$fetchPosts['eventTitle'].'</a></li>';
echo '</br>';
}

?> 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:45:45.720

您在 for 循环中拥有所有代码，包括运行查询的代码；您从 db 中“提取”5 行，但只获取第一行，然后重复 5 次。相反，你应该运行一次查询，然后循环你的结果，直到你到达末尾`results`：

```
<?
$randomPostSelect = mysql_query("SELECT DISTINCT * FROM beventreservation 
        WHERE (beventStatus='online' OR beventStatus='soldout') ORDER BY RAND() LIMIT 5")
    or die(mysql_error());

while ($fetchPosts = mysql_fetch_array($randomPostSelect))
{
    echo '<li><a href="reservation.php?rev='.$fetchPosts['eventId'].'">'.$fetchPosts['eventTitle']
        .'</a </li>';
    echo '</br>';
}
?> 
```

# asp.net-mvc - MVC4：单个布尔模型属性的两个单选按钮

> ID：10518352
> 
> 赞同：62
> 
> 时间：2012-05-09T14:40:32.357
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, radiobuttonfor

我正在尝试为互斥的单选按钮找到正确的 Razor 语法，这些单选按钮都反映了我的模型上的布尔属性的值。我的模型有这个：

```
public bool IsFemale{ get; set; } 
```

我想用两个单选按钮来显示这个，一个是“男性”，另一个是“女性”，但到目前为止我尝试的所有内容都没有反映`IsFemale`模型上属性的实际值。目前，我有这个：

```
@Html.RadioButtonFor(model => model.IsFemale, !Model.IsFemale) Male
@Html.RadioButtonFor(model => model.IsFemale, Model.IsFemale) Female 
```

如果我更改和更新，这似乎可以正确地保留该值，但不会将正确的值标记为已选中。我敢肯定这是愚蠢的，但我被困住了。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-05-09T14:47:42.273

试试这样：

```
@Html.RadioButtonFor(model => model.IsFemale, "false") Male
@Html.RadioButtonFor(model => model.IsFemale, "true") Female 
```

这是完整的代码：

模型：

```
public class MyViewModel
{
    public bool IsFemale { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel
        {
            IsFemale = true
        });
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return Content("IsFemale: " + model.IsFemale);
    }
} 
```

看法：

```
@model MyViewModel

@using (Html.BeginForm())
{
    @Html.RadioButtonFor(model => model.IsFemale, "false", new { id = "male" }) 
    @Html.Label("male", "Male")

    @Html.RadioButtonFor(model => model.IsFemale, "true", new { id = "female" })
    @Html.Label("female", "Female")
    <button type="submit">OK</button>
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-12-05T15:35:04.777

在 MVC 6 (ASP.NET Core) 中，这也可以通过标签助手来实现：

```
<label>
    <input type="radio" asp-for="IsFemale" value="false" /> Male
</label>
<label>
    <input type="radio" asp-for="IsFemale" value="true" /> Female
</label> 
```

# c# - 实体框架 5 无效的列名错误

> ID：10518353
> 
> 赞同：6
> 
> 时间：2012-05-09T14:40:34.853
> 
> 标签：c#, entity-framework, ef-code-first

我目前正在使用 EF 5 Code First 编写计费应用程序，并且在运行该应用程序时遇到了错误。

有问题的数据库对象如下：

```
[Table("Client")]
public class ClientBase
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int ClientID { get; set; }

    [Required]
    public string ClientName { get; set; }

    [Required]
    public bool IsActive { get; set; }

    [Required]
    public string ClientContactName { get; set; }

    [Required]
    public string ClientContactEmail { get; set; }

    [Required]
    public DateTime ClientStartDate { get; set; }

    [Required]
    public string SalesforceID { get; set; }

    public DateTime TerminatedDate { get; set; }

    public string ClientStreet { get; set; }

    public string ClientCity { get; set; }

    public string ClientState { get; set; }

    public int? ClientZipCode { get; set; }

    public virtual List<PropertyBase> Properties { get; set; }

    public virtual List<ClientCharge> ClientDefaultCharges { get; set; }

} 
```

我最近添加了一堆这些字段（从 ClientStartDate 到 ClientZipCode 都是新的），每当我运行应用程序时，我都会收到以下错误：

```
{"Invalid column name 'ClientStartDate'.\r\nInvalid column name 'SalesforceID'.\r\nInvalid column name 'TerminatedDate'.\r\nInvalid column name 'ClientStreet'.\r\nInvalid column name 'ClientCity'.\r\nInvalid column name 'ClientState'.\r\nInvalid column name 'ClientZipCode'."} 
```

然而，令我惊讶的是我的数据库实际上已经相应地更新了。这些字段现在在桌面上，但这仍然给我一个错误。

关于这里出了什么问题的任何想法？

编辑：好的，显然有一件事我忘了提：SalesforceID 不是外键。添加的所有列实际上都不是 FK。它们只是普通的字段。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T17:24:45.897

简而言之，考虑让您的 [Required] DateTime 字段为 Nullable（DateTime？）。如果您提供有关堆栈跟踪和任何初始化代码的更多信息，那将会很有帮助。

```
[Required]
public DateTime? ClientStartDate { get; set; } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T16:27:52.230

就我而言，发生此错误是因为我正在针对我的测试数据库更新我的 EDMX 并针对生产数据库运行我的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T15:06:15.757

我怀疑是 SalesforceID 导致了问题。尝试删除所有新列并一次添加一个，同时检查错误。如果问题确实与 SalesforceID 有关，[这](https://stackoverflow.com/a/5058516/138938)可能会解决它。

# java - REST 中的元素编组列表

> ID：10518354
> 
> 赞同：2
> 
> 时间：2012-05-09T14:40:40.543
> 
> 标签：java, rest, get

我在使用 JAX-rs 将 ArrayList 从服务器发送到客户端时遇到问题。我有4节课：

演示 - 正在启动 REST 服务器 FileDetails - 有 3 个字段存储数据 ConfigFiles - 它几乎没有文件方法，并且有一个 FileDetails 对象列表 RestServer - 有方法 GET

我有以下代码：

```
@XmlRootElement(name="FileDetails")
@Path("/easy")
public class RestSerwer {

    @GET
    @Path("/temporary")
    @Produces("text/temporary")
    public String methodGet() { 
        ConfigFiles cf = ConfigFiles.getInstance();
           List<FileDetails> files = cf.getList();
                   try {
                       JAXBContext ctx = JAXBContext.newInstance(ArrayList.class, FileDetails.class);
                       Marshaller m = ctx.createMarshaller();
                       StringWriter sw = new StringWriter();
                       m.marshal(files, sw);
                       return sw.toString();
                   } catch (JAXBException e) {
                       e.printStackTrace();
                   }
                   return null;
    }
} 
```

在客户端，我有 GetRest：

```
public class GetRest{

    HttpClient client = null;
    GetMethod method = null;
    private String url = null;

    public GetRest(String url) {
        this.url = url;
    }

    public String getBody(String urlDetail){
           client = new HttpClient();
           method = new GetMethod(url + urlDetail);
           method.getParams().setParameter(HttpMethodParams.RETRY_HANDLER,
           new DefaultHttpMethodRetryHandler(3, false));
           try {
                client.executeMethod(method);
            } catch (HttpException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            byte[] responseBody = null;
            try {
                responseBody = method.getResponseBody();
            } catch (IOException e) {
                e.printStackTrace();
            }finally{                   
                method.releaseConnection();
            }
            String str = new String(responseBody);
            return str;
    }   

    public String getFiles(){   
        return getBody("/easy/temporary");
    }   
} 
```

当我尝试：

```
GetRest getRestClass = new GetRest("http://localhost:8185");
                        //List<FileDetails> cf = new ArrayList<FileDetails>();
                        String xxxx = getRestClass.getFiles(); // TODO 
```

它抛出：

```
Caused by: com.sun.istack.internal.SAXException2: unable to marshal type "java.util.ArrayList" as an element because it is missing an @XmlRootElement annotation 
```

在服务器端。

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:51:23.930

您基本上有 2 种可能性：创建您自己的类，它是列表顶部的包装器，或者编写您自己的[提供程序](http://jersey.java.net/nonav/apidocs/1.12/jersey/javax/ws/rs/ext/Providers.html)并将其注入球衣中，以便它知道如何编组/解组数组列表。这是第一个解决方案的简单代码：

```
@XmlRootElement
public class MyListWrapper {

    @XmlElement(name = "List")
    private List<String> list;

    public MyListWrapper() {/*JAXB requires it */

    }

    public MyListWrapper(List<String> stringList) {
        list = stringList;
    }

    public List<String> getStringList() {
        return list;
    }

} 
```

# c# - 即使我在浏览器中禁用了 Cookie，.NET Cookie 仍然有效。如何？

> ID：10518355
> 
> 赞同：1
> 
> 时间：2012-05-09T14:40:43.373
> 
> 标签：c#, asp.net, cookies

我试图在我的浏览器中禁用 cookie，并检查它们是否在我的 .Net 网络应用程序中被禁用。

我在页面上存储一个这样的cookie：

```
HttpResponse response = HttpContext.Current.Response;

response.Cookies[cookieKey].Value = cookieValue.ToString(); 
```

在另一个页面上，我正在检索这样的 cookie：

```
cookieValue = request.Cookies[cookieKey].Value; 
```

我试图在我的浏览器中禁用 cookie 以使上述代码失败，但我似乎无法做到这一点。我正在使用 Internet Explorer 7 和 8。（我正在使用这两种浏览器，因为 IE7 是我公司当前的标准，而 IE8 是未来的公司标准）。

在这两个浏览器中，我都去了*Internet Options* `>` *Privacy* `>` *Advanced*，并检查了覆盖 cookie 处理，并阻止了第一方和第三方 cookie（也删除了任何现有的 cookie/历史/临时文件）。

这样做之后，我希望上面的代码不起作用，但它仍然有效。我仍然可以从 cookie 中设置和检索值。知道为什么吗？我想也许 cookie 实际上并没有被禁用，但如果我转到`hotmail.com`，它会给我一条错误消息，上面写着*“您的浏览器必须允许 cookie 才能使用 Windows Live ID。”* 所以我不知道。

为什么访问我的 ASP.Net 站点时 cookie 仍然有效？

**2012 年 5 月 14 日更新：**

本地 Intranet 站点上似乎忽略了隐私选项卡中的 cookie 设置（我不知道这是否正常），所以这给了我问题。然而，我确实想出了一种不同的方法来禁用 cookie（我需要它来进行测试），即使对于 Intranet 站点也是如此。在 IE8 中，我转到*Tools > Developer Tools > Cache > Disable Cookies*。这按预期工作，我可以完成我的测试。但是我仍然没有找到 IE7 的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:47:38.547

您在本地运行网站吗？

[我在 SuperUser 上问](https://superuser.com/questions/238114/why-is-internet-explorer-8-still-accepting-cookies)过类似的问题。

据我所知，Sparky 是正确的。localhost / 127.0.0.1 将始终接受 cookie，无论您的设置如何。

# cakephp - CakePHP 2.1 + AJAX 搜索/JsHelper

> ID：10518356
> 
> 赞同：1
> 
> 时间：2012-05-09T14:40:44.417
> 
> 标签：cakephp, cakephp-2.0

我尝试使用 JsHelper 使用 CakePHP 创建 Ajax 搜索。Ajax 请求触发但它从不返回值：

搜索表格（find_entries.ctp）：

```
<?php echo $this->Form->create('Entry');?>
<?php echo $this->Form->input('title', array('div' => false, 'empty', 'label' => false, 'placeholder' => 'Search'));?>

<?php echo $this->Js->submit('Upload', array(
    'before'=>$this->Js->get('#checking')->effect('fadeIn'),
    'success'=>$this->Js->get('#checking')->effect('fadeOut'),
    'update'=>'#choose_options')
    )
;?> 
<?php echo $this->Form->end();?> 
```

控制器：

```
public function find_entries(){
    if(!empty($this->request->data)){

            $entries = $this->Entry->find('all', array('conditions' => array('Entry.title' => $this->request->data['Entry']['title);    
    $this->set('entries', $entries);
    if($this->RequestHandler->isAjax()){
    $this->render('entries', 'ajax');   
    }
    }

} 
```

部分渲染 (entry.ctp)

```
<div id="entries">

<?php foreach ($entries as $entry) :?>

    <?php echo $entry['Entry']['title']; ?>

<?php endforeach ;?> 
```

这里出了什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:06:09.987

您是否创建了任何带有 id 的 div 标签`choose_options`来呈现 ajax 结果？如果不在视图文件中创建这样的 div 标签。

```
<div id="choose_options"></div> 
```

# android - 如何回到默认的xml布局界面？

> ID：10518362
> 
> 赞同：0
> 
> 时间：2012-05-09T14:41:26.800
> 
> 标签：android, xml, android-layout, android-xml, eclipse-adt

我不知道这是怎么发生的..但我不知道如何使用这种格式..我只想回到默认布局选项，您可以在其中拖放 n 个下拉按钮、文本字段和后端编码是自动创建的..我只是找不到任何选项，也不知道如何谷歌这个问题..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:45:45.897

当您在编码部分并且想要转到图形布局时，您可以按**ALT + PAGE UP**。

这将进入图形布局，您可以在其中拖放。

希望这是您正在搜索的内容。

编辑：

右键单击该文件 --> 打开 --> Android 布局编辑器。

# c# - 通过 Mono 访问 PayPal 沙箱

> ID：10518365
> 
> 赞同：2
> 
> 时间：2012-05-09T14:41:29.550
> 
> 标签：c#, .net, mono, paypal-sandbox

我正在尝试在 Visual Studio 2008 上使用 .NET 3.5 应用程序，运行 Mono 2.10.2 和 Apache（使用 mod-mono）来执行 PayPal 付款。我正在使用 PayPal 沙箱，当我在本地调试或运行时，该解决方案可以完美运行。在使用 Mono 的服务器上运行时，它会在以下几行之后超时：

```
PayPalAPIAASoapBinding ws = PayPalUtils.BuildPayPalWebservice();

SetExpressCheckoutResponseType resp = ws.SetExpressCheckout(req); 
```

出现以下错误：

```
System.Net.WebException: The request timed out at System.Net.HttpWebRequest.GetRequestStream () [0x0005f] in /usr/src/redhat/BUILD/mono-2.10.2/mcs/class/System/System.Net/HttpWebRequest.cs:752 at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke (System.String method_name, System.Object[] parameters) [0x00069] in /usr/src/redhat/BUILD/mono-2.10.2/mcs/class/System.Web.Services/System.Web.Services.Protocols/SoapHttpClientProtocol.cs:367 
```

[我已经为https://www.sandbox.paypal.com](https://www.sandbox.paypal.com)运行了 ssl 导入，并且我已经运行了 mozroots 导入以从 Mozilla 引入所有 ssl 证书。

欢迎任何想法或建议！

# php - php检查字符串是否包含多个单词

> ID：10518368
> 
> 赞同：3
> 
> 时间：2012-05-09T14:41:38.670
> 
> 标签：php, string, preg-match, words

我在互联网上寻找可以做到这一点的东西，但它只能用一个词。

我正在尝试构建一个脚本来检测我的站点的错误用户名，如果用户名包含数组中的任何单词，则会检测到错误的用户名。

这是我制作的代码，但无法正常工作。

```
$bad_words = array("yo","hi");
$sentence = "yo";

if (strpos($bad_words,$sentence)==false) {
echo "success";
} 
```

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T14:49:40.497

利用

[substr_count](http://php.net/manual/en/function.substr-count.php)

对于数组使用以下函数

```
function substr_count_array( $haystack, $needle ) {
     $count = 0;
     foreach ($needle as $substring) {
          $count += substr_count( $haystack, $substring);
     }
     return $count;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:46:13.787

您可以使用以下代码：

```
$bad_words = array("yo","hi");
$sentence = "yo you your";
// break your sentence into words first
preg_match_all('/\w+/', $sentence, $m);
echo ( array_diff ( $m[0], $bad_words ) === $m[0] ) ? "no bad words found\n" :
                                                      "bad words found\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T04:05:30.647

```
// returns false or true
function multiStringTester($feed , $arrayTest)
{   
    $validator = false;
    for ($i = 0; $i < count($arrayTest); $i++) 
    {
            if (stringTester($feed, $arrayTest[$i]) === false ) 
            {   
                continue;
            } else 
            {
                $validator = true;              
            }       
    }
    return $validator;
}
//www.ffdigital.net 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T14:48:13.073

你很近。您可以通过以下方式进行操作：

```
$bad_words = array("yo","hi");
$sentence = "yo";
$match = false;
foreach($bad_words as $bad_word) {
  if (strpos($bad_word,$sentence) === false) {  # use $bad_word, not $bad_words
    $match = true;
    break;
  }
}
if($match) { echo "success"; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T14:49:13.167

```
<?php
function isUserNameCorrect()
{
    Foreach($badname in $badnames)
    {
        if(strstr($badname, $enteredname) == false)
        {
             return false;
        }
    }
    return true;
} 
```

也许这有帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T15:50:34.737

我将按如下方式实现：

```
$bad_words = array("yo","hi");
$sentence = "yo";

$valid = true;
foreach ($bad_words as $bad_word) {
    if (strpos($sentence, $bad_word) !== false) {
        $valid = false;
        break;
    }
}

if ($valid) {
    echo "success";
} 
```

一个句子是有效的，除非它至少包含一个来自 的单词`$bad_words`。注意严格检查（即`!==`），如果没有这个检查将在结果`strpos`为 0 而不是 false 时失败。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T15:05:27.520

不幸的是，你不能`Array`直接给函数 strpos/strstr 赋值。

根据 PHP.net 的评论，要做到这一点，您需要使用（或创建自己的）函数，如下所示：

```
function strstr_array($haystack, $needle) 
{
     if ( !is_array( $haystack ) ) {
         return false;
     }
     foreach ( $haystack as $element ) {
         if ( stristr( $element, $needle ) ) {
             return $element;
         }
     }
} 
```

然后，只需更改`strpos`为新功能 - `strstr_array`：

```
$bad_words = array("yo","hi");
$sentence = "yo";

if (strstr_array($bad_words,$sentence)==false) {
     echo "success";
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-09T14:55:57.100

我相信一句话不止一个词

尝试

```
$badwords = array("yo","hi");
$string  = "i am yo this is testing";
$word = array_intersect( $badwords,explode(" " , $string));
if(empty($word))
{
    echo "Sucess" ;
} 
```

# c# - 如何在 C# 中使用具有管理权限的父进程跨越具有管理权限的子进程？

> ID：10518370
> 
> 赞同：2
> 
> 时间：2012-05-09T14:41:47.313
> 
> 标签：c#, process, console, runas, output-redirect

如何在不使用`verb`=的情况下生成具有管理权限的子进程`runas`？

父进程具有管理权限。而且我想将输出（不仅仅是纯文本，而是“彩色”）放到父进程的控制台（输出）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T22:53:16.943

使用Win API 中的[CreateProcess](http://msdn.microsoft.com/en-us/library/ms682425%28VS.85%29.aspx)函数（[非托管](http://msdn.microsoft.com/en-us/magazine/cc301501.aspx)）。子进程将具有与父进程相同的权限，并将在与父进程相同的控制台窗口中运行。

# c# - 如何将xml反序列化为对象

> ID：10518372
> 
> 赞同：137
> 
> 时间：2012-05-09T14:41:55.290
> 
> 标签：c#, xml-deserialization

```
<StepList>
  <Step>
    <Name>Name1</Name>
    <Desc>Desc1</Desc>
  </Step>
  <Step>
    <Name>Name2</Name>
    <Desc>Desc2</Desc>
  </Step>
</StepList> 
```

我有这个 XML，我应该如何为类建模以便能够使用`XmlSerializer`对象反序列化它？

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2012-05-09T14:56:04.490

你的课程应该是这样的

```
[XmlRoot("StepList")]
public class StepList
{
    [XmlElement("Step")]
    public List<Step> Steps { get; set; }
}

public class Step
{
    [XmlElement("Name")]
    public string Name { get; set; }
    [XmlElement("Desc")]
    public string Desc { get; set; }
} 
```

这是我的测试代码。

```
string testData = @"<StepList>
                        <Step>
                            <Name>Name1</Name>
                            <Desc>Desc1</Desc>
                        </Step>
                        <Step>
                            <Name>Name2</Name>
                            <Desc>Desc2</Desc>
                        </Step>
                    </StepList>";

XmlSerializer serializer = new XmlSerializer(typeof(StepList));
using (TextReader reader = new StringReader(testData))
{
    StepList result = (StepList) serializer.Deserialize(reader);
} 
```

如果要读取文本文件，应将文件加载到 FileStream 并反序列化。

```
using (FileStream fileStream = new FileStream("<PathToYourFile>", FileMode.Open)) 
{
    StepList result = (StepList) serializer.Deserialize(fileStream);
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-06-03T16:13:05.700

上面的评论是正确的。你缺少装饰器。如果你想要一个通用的反序列化器，你可以使用它。

```
public static T DeserializeXMLFileToObject<T>(string XmlFilename)
{
    T returnObject = default(T);
    if (string.IsNullOrEmpty(XmlFilename)) return default(T);

    try
    {
        StreamReader xmlStream = new StreamReader(XmlFilename);
        XmlSerializer serializer = new XmlSerializer(typeof(T));
        returnObject = (T)serializer.Deserialize(xmlStream);
    }
    catch (Exception ex)
    {
        ExceptionLogger.WriteExceptionToConsole(ex, DateTime.Now);
    }
    return returnObject;
} 
```

然后你会这样称呼它：

```
MyObjType MyObj = DeserializeXMLFileToObject<MyObjType>(FilePath); 
```

# mongodb - Grails - MongoDB 和自定义脏检查

> ID：10518376
> 
> 赞同：4
> 
> 时间：2012-05-09T14:42:08.240
> 
> 标签：mongodb, grails, grails-domain-class

我在我的应用程序上使用 MongoDB 和 Spring Security Core 和 UI。几乎所有的东西都完美无缺，除了这一点：

```
 def beforeUpdate() {
        if (isDirty('password')) {
            encodePassword()
        }
    } 
```

这是用户域类的一部分。我读过 MongoDB 插件还不支持脏检查。所以我试着像这样实现我自己的：

```
if ( User.collection.findOne(id:id).password != password ) {
            encodePassword()
        } 
```

但它不起作用。我得到了经典`Cannot get property 'password' on null object.`

有谁知道如何从域类定义中引用一个实例？我也愿意接受任何更好的想法来实施脏检查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:59:50.527

也许 findOne 返回 null？你试过了吗：

```
def existing = User.collection.findOne(id:id)?.password 
if ( !existing || existing != password ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:59:21.877

我刚刚遇到了同样的问题，直到动态方法起作用，这将不得不这样做：

```
def mongo
def beforeUpdate() {
    def persisted = mongo.getDB("test").user.findOne(id).password
    def encodedNew = springSecurityService.encodePassword(password)
    if(persisted != encodedNew) password = encodedNew
    //if (isDirty('password')) {
    //  encodePassword()
    //}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T11:15:10.587

```
User.collection.findOne(_id:id).password 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T21:52:11.743

我也为这个问题而苦苦挣扎 - 这是我的解决方案：

```
def beforeUpdate() {
    User.withNewSession {
        def user = User.findByUsername(this.username)
        if ( !user?.password || user?.password != password) {
            encodePassword()
        }
    }
} 
```

请让我知道是否有更有效的方法。

# php - xcache.var_size 为 0 或太小而无法启用 var 数据缓存

> ID：10518378
> 
> 赞同：1
> 
> 时间：2012-05-09T14:42:10.923
> 
> 标签：php, macos, xcache

我已经在 mac osx 10.7.3 上安装了 Xcache 2.0.0 模块，将它的配置添加到 php.ini 中，如下所示

```
; zend_extension = /opt/local/lib/php/extensions/no-debug-non-zts-20090626/xcache.so extension = xcache.so
[xcache]
xcache.shm_scheme =        "mmap"
xcache.size  =               64M
xcache.count =                 1
xcache.slots =                8K
xcache.ttl   =                 0
xcache.gc_interval =           0
xcache.var_size  =            32M
xcache.var_count =             1
xcache.var_slots =            8K
xcache.var_ttl   =             0
xcache.var_maxttl   =          0
xcache.var_gc_interval =     300

xcache.mmap_path =    "/dev/zero"
xcache.coredump_directory =   ""
; per request settings
xcache.cacher =               On
xcache.stat   =               On
xcache.optimizer =           Off    

xcache.test =                Off
xcache.experimental =        Off

[xcache.coverager]
xcache.coverager =          Off

; ini only settings xcache.coveragedump_directory = "" 
```

当我尝试使用以下功能时放

```
$test = "Hello";
xcache_set("test", $test ); 
```

出现了这个错误

> 警告：xcache_set() [function.xcache-set]: xcache.var_size 为 0 或太小而无法启用 var 数据缓存

但是从 phpinfo() 可以看到，Xcache 设置配置正确

```
XCache Support  enabled
Version 2.0.0
Modules Built   cacher coverager
Readonly Protection N/A
Cache Init Time 2012-05-09 16:07:12
Cache Instance Id   4687
Opcode Cache    enabled, 67,108,864 bytes, 1 split(s), with 16384 slots each
Variable Cache  enabled, 33,554,432 bytes, 1 split(s), with 16384 slots each
Shared Memory Schemes   mmap
Coverage Auto Dumper    disabled

Directive   Local Value Master Value
xcache.admin.enable_auth    On  On
xcache.cacher   On  On
xcache.coredump_directory   no value    no value
xcache.count    1   1
xcache.coveragedump_directory   no value    no value
xcache.coverager    Off Off
xcache.experimental Off Off
xcache.gc_interval  0   0
xcache.mmap_path    /tmp/xcache /tmp/xcache
xcache.readonly_protection  0   0
xcache.shm_scheme   mmap    mmap
xcache.size 64M 64M
xcache.slots    16K 16K
xcache.stat On  On
xcache.test no value    no value
xcache.ttl  0   0
xcache.var_count    1   1
xcache.var_gc_interval  300 300
xcache.var_maxttl   0   0
xcache.var_size 32M 32M
xcache.var_slots    16K 16K
xcache.var_ttl  0   0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:54:05.543

我也遇到了同样的问题，但是通过更改`xcache.mmap_path`

```
xcache.mmap_path =    "/tmp/xcache" 
```

为什么`xcache.mmap_path`phpinfo中的值和你配置文件中设置的值不一样？

# nginx - 生产精简最佳实践

> ID：10518380
> 
> 赞同：1
> 
> 时间：2012-05-09T14:42:16.163
> 
> 标签：nginx, rack, thin, faye

我正在使用[Thin](http://code.macournoyer.com/thin/)作为[Faye](http://faye.jcoglan.com/)的服务器。为此，我使用这样的东西：

```
require 'faye'
bayeux = Faye::RackAdapter.new(:mount => '/faye', :timeout => 25)
bayeux.listen(9292) 
```

瘦身过程受到[上帝](http://godrb.com/)的监督，一切都在发展中。

但是，我不确定这是否是生产配置的正确设置。我想知道的是这个设置（前面没有 Nginx 或 HAProxy）将如何在生产环境中执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:54:45.893

这是我的上帝配置。

```
#Faye
ports = [9292, 9293, 9294, 9295]
ports.each_with_index do |port, id|
  God.watch do |w|
    w.dir      = "#{rails_root}"
    w.name     = "faye-#{port}"
    w.group    = "faye"
    w.interval = 30.seconds
    w.start    = "thin start -R #{rails_root}/faye.ru -e production -p #{port} -P  #{rails_root}tmp/pids/faye-#{port}.pid"
    w.stop     = "thin stop -P  #{rails_root}tmp/pids/faye-#{port}.pid"
    w.log      = "#{rails_root}/log/god_node.log"

    #w.uid = 'server'
    #w.gid = 'server'

    # restart if memory usage is > 500mb
    w.transition(:up, :restart) do |on|
      on.condition(:memory_usage) do |c|
        c.above = 500.megabytes
        c.times = 2
      end
    end

    # determine the state on startup
    w.transition(:init, { true => :up, false => :start }) do |on|
      on.condition(:process_running) do |c|
        c.running = true
      end
    end

    # determine when process has finished starting
    w.transition([:start, :restart], :up) do |on|
      on.condition(:process_running) do |c|
        c.running = true
        c.interval = 10.seconds
      end

      # failsafe
      on.condition(:tries) do |c|
        c.times = 5
        c.transition = :start
        c.interval = 10.seconds
      end
    end

    # start if process is not running
    w.transition(:up, :start) do |on|
      on.condition(:process_running) do |c|
        c.running = false
      end
    end
  end
end 
```

我正在使用 nginx 进行负载平衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:24:19.107

我一直在用thin来运行faye和redis。确保设置

```
Faye::WebSocket.load_adapter('thin') 
```

所有流量都通过 haproxy（第一个被命名为代理，因为我将所有流量重定向到 https）

```
frontend proxied
    bind 127.0.0.1:81 accept-proxy
    timeout client 86400000
    default_backend nginx_backend
    acl is_websocket hdr(Upgrade) -i WebSocket
    acl is_websocket hdr_beg(Host) -i ws
    use_backend socket_backend if is_websocket

backend nginx_backend
    balance roundrobin
    option forwardfor #except 127.0.0.1 # This sets X-Forwarded-For
    timeout server 30000
    timeout connect 4000
    server nginx1 localhost:8081 weight 1 maxconn 20000 check

backend socket_backend
    balance roundrobin
    option forwardfor except 127.0.0.1 # This sets X-Forwarded-For
    timeout queue 5000
    timeout server 86400000
    timeout connect 86400000
    server socket1 localhost:3100 weight 1 maxconn 20000 check
    server socket2 localhost:3101 weight 1 maxconn 20000 check
    server socket3 localhost:3102 weight 1 maxconn 20000 check
    server socket4 localhost:3103 weight 1 maxconn 20000 check
    ... 
```

如果是 http 流量，我会通过 nginx 路由它，如果它包含 /faye 路径，它会转发到同一组瘦实例。

我不是 haproxy 专家，但这适用于 websocket 和长轮询连接。

# visual-studio-2008 - 通过 MSBuild 和 Visual Studio Express 2008 的 DirectX SDK 包含/库文件夹：缺失

> ID：10518382
> 
> 赞同：0
> 
> 时间：2012-05-09T14:42:22.263
> 
> 标签：visual-studio-2008, msbuild, visual-studio-express

我遇到了一件奇怪的事情。

Visual Studio 2008 项目：DirectX SDK 的 Include/Libraries 文件夹已通过 Tools->Options->Projects and Solutions->VC++ Directories 添加。

正确引用了 DirectX SDK 中所需的包含文件 dsound.h。

编译和链接工作正常

*   通过 Visual Studio 2008
*   也可以通过 MSBuild 从 VS 命令行使用 Visual Studio 2008

现在在另一台机器上，使用相同的设置运行 Visual C++ 2008 Express...

编译和链接工作正常

*   通过 Visual C++ 2008 Express

但是通过 VS Express cmd 行中的 MSBuild，DirectX SDK 的包含路径丢失，编译当然会失败。

这可能是Express版的问题吗？如果不向项目本身添加与每台机器相关的包含路径，您将如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T03:38:43.963

我找不到 MSBuild 2008 的全局配置文件，其中可以添加一些全局编译器路径。

但是，您可以从 Visual Studio GUI 将路径添加到项目的包含列表和库列表。它们存储在 vcproj 文件中，供 MSBuild 使用。

就我而言，我只是将其添加到相应的项目目录中：

```
$(DXSDK_DIR)\Include
$(DXSDK_DIR)\Lib\x86 
```

然后你可以像往常一样调用 MSBuild：

```
MSBuild.exe /nologo /v:minimal /p:Configuration=Debug 
```

# facebook - Facebook AS3 api 登录框确实有效，一天后它没有

> ID：10518388
> 
> 赞同：0
> 
> 时间：2012-05-09T14:42:35.287
> 
> 标签：facebook, actionscript-3, api, login

昨天我成功让我的 Flash 项目使用 facebook as3 api 登录。今天我再次尝试使用该应用程序，现在它无法正常工作。我没有更改任何代码...有谁知道我应该如何调试这个或其他人是否发生过这种情况？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:00:07.887

一位朋友为此问题创建了一个解决方案。我修复了我的 flash 网站和他们的 facebook 与 AS3 SDK 的连接。

我们来自墨西哥，所以它是西班牙语： [Facebook AS3 Fix](http://ederchrono.com/blog/2012/05/09/arreglando-el-graph-api-de-facebook-para-as3/)

导读：

1.- 如果您使用的是 GraphAPI_Web_1_8_1.swc，请将其删除。

2.- 从[这里下载修改后的 api](http://ederchrono.com/blog/srcfiles/GRAPHAPI_mod.rar)

3.- 复制库中的文件夹，如果您已经拥有 facebook 文件夹，请覆盖。

4.- 编译项目。

问题的发生是因为 facebook 修改了其[http://connect.facebook.net/en_US/all.js](http://connect.facebook.net/en_US/all.js)文件，其中来自 as3 api 的 FacebookJSBridge.as 文件对“FB.JSON”进行了一些调用。现在它们应该改为“JSON”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:12:04.943

1.- 如果您使用的是 GraphAPI_Web_1_8_1.swc，请将其删除。

2.- 从[这里下载修改后的图形 api](http://ederchrono.com/blog/srcfiles/GRAPHAPI_mod.rar)

3.- 将这些文件夹粘贴到您的库中，如果您让 facebook 文件夹覆盖它。

4.- 发布您的项目。

当 facebook 更改其文件 connect.facebook.net/en_US/all.js 时，这个问题就开始了，从 as3 文件“FacebookJSBridge.as”进行的所有调用都必须从“FB.JSON”更改为“JSON” .

来源：http : [//ederchrono.com/blog/2012/05/09/fixing-fb-graph-api-for-as3/](http://ederchrono.com/blog/2012/05/09/fixing-fb-graph-api-for-as3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:22:20.617

在工作中制作的所有 Flash 网站上的 facebook 连接功能也已停止工作。单击 facebook 连接按钮时，没有任何反应。我们没有做任何改变。现在每个人都在疯狂地寻找解决方案。

我希望有人能尽快找到解决方案。Facebook 没有发布任何更改，但他们应该对此进行调查。我敢打赌，一个 Flash 网站刚刚停止工作。

# iphone - 使用 sortedArrayUsingComparator 排序 NSMutableArray 包含 NSArray

> ID：10518389
> 
> 赞同：0
> 
> 时间：2012-05-09T14:42:35.300
> 
> 标签：iphone, objective-c, ios, nsdate, date-sorting

我遇到了排序 nsdate 数组的问题。所以我在 nsmutablearray 中有日期数组

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd"];
NSArray *arrString = [[NSArray alloc] initWithObjects:@"2012-05-01", @"2012-02-01", @"2012-22-03", @"2012-05-01", @"2012-15-01", nil];
NSMutableArray *arrDate = [[NSMutableArray alloc] initWithCapacity:arrString.count];
for (NSString *item in arrString) {
    NSDate *date = [dateFormatter dateFromString:item];
    [arrDate addObject:date];
} 
```

正如我在许多情况下看到的那样，他们使用这样的代码对数组进行排序：

```
NSArray *sortedArray = [arrDate sortedArrayUsingComparator:^(id firstObject, id secondObject) {
    return [((NSDate *)firstObject) compare:((NSDate *)secondObject)];
}]; 
```

我试图把我的阵列放在上面，但没有奏效。任何人都可以帮助我如何对 nsmutablearray 进行排序的最佳方式包含 nsdate。我想将最新日期放在索引数组的顶部。

所以真正的问题是，如何在 arrDate 中对数据进行排序？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:56:28.100

您的日期格式与您使用的日期字符串不匹配。

```
yyyy-MM-dd hh:mm:ss 
```

表示您提供的日期应类似于：

```
2012-05-09 15:54:21
        ^^ Day
     ^^ Month 
```

即您的字符串缺少小时、分钟和秒，并且您有一些日期为 22 月和 15 月。如果日期格式化程序无法解析日期，我认为它返回 nil，这意味着您正在尝试将 nil 放入数组，这将导致异常。

**编辑**

要实际对日期进行排序，您的示例代码看起来不错，除了您想要最近的日期，所以反转`compare:`

```
NSArray *sortedArray = [arrDate sortedArrayUsingComparator:^(id firstObject, id secondObject) {
     return [secondObject compare: firstObject];
}]; 
```

或者使用可变数组，您可以就地排序：

```
[arrDate sortUsingComparator:^(id firstObject, id secondObject) {
     return [secondObject compare: firstObject];
}]; 
```

# git - 网站初始下载到 github

> ID：10518393
> 
> 赞同：3
> 
> 时间：2012-05-09T14:42:50.200
> 
> 标签：git, github

我已经在我的服务器上安装了 Git 并成功连接到 Github。我现在想将我的网站（已经开发的）下载到 Github 以开始版本跟踪。但是，我在执行此操作时遇到问题。

我已经注册了 Github 并创建了一个带有自述文件的空白存储库。

我已经登录到我的服务器并创建了 id_rsa.pub 我已经使用 cat 复制了 id_rsa.pub 的内容并将密钥放入我的 github 帐户。

我现在想将我的网站推送到 Github 上的存储库。

但是，我似乎无法让它工作。请问有人可以给我一个演练吗？这是从服务器到 Github 的初始下载。

当我做

```
git push -u origin master 
```

我回来了：

> 到`git@github.com:<github-username>/<github-repo-name>.git`
> ！[rejected] master -> master (non-fast-forward)
> error: failed to push some refs to`git@github.com:<github-username>/<github-repo-name>.git`
> 为了防止你丢失历史记录，非快进更新被拒绝了`git pull`在再次推送之前合并远程更改（例如）。有关详细信息，请参阅“关于快进的说明”部分`git push --help`。

当我做

```
git pull 
```

我回来了：

> 当前分支没有跟踪信息。请指定要合并的分支。详见 git-pull(1)
> 
> ```
> git pull <remote> <branch> 
> ```
> 
> 如果您希望为此分支设置跟踪信息，您可以这样做：
> 
> ```
> git branch --set-upstream master <remote>/<branch> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:23:34.647

首先，您需要：

`git pull origin master`从服务器引入更改。

然后，`git push origin master`将工作。

这是因为您*使用自述文件*创建了一个存储库，并`git init`在本地副本中执行了 a 而不是`clone`.

创建自述文件会导致 github 创建一个存储库，但随后还将自述文件推送到存储库 - 您的存储库的服务器版本现在具有本地版本没有的提交。因此，在将文件推送到 github 之前，您需要使本地副本与 github 保持同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:46:09.090

根据 github 在您创建 repo 后立即为您提供的说明：

> ### 现有的 Git 存储库？
> 
> ```
> cd existing_git_repo
> git remote add origin git@github.com:<github-username>/<github-repo-name>.git
> git push -u origin master 
> ```

# java - 使用 java、DB2、spring 和 hibernate 连接来自两个不同库的两个表

> ID：10518395
> 
> 赞同：3
> 
> 时间：2012-05-09T14:42:57.673
> 
> 标签：java, sql, spring, hibernate, db2

我在 AS400 (iSeries)、hibernate 3、spring 2.0 和 Java 6 上使用 DB2，我在两个不同的库上有两个表（物理文件），如下所示：Library1/TableA 和 Library2/Table2，所以通常我需要一个 sessionFactory对于每个这样的库：

```
<bean id="sessionFactory1AS400"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSourceAS400" />
        <property name="annotatedClasses">
            <list>
                <value>com.appllication.model.TableA</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                …
                <prop key="hibernate.default_schema">Library1</prop>
            </props>
        </property>
    </bean> 
```

和

```
<bean id="sessionFactory2AS400"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSourceAS400" />
        <property name="annotatedClasses">
            <list>
                <value>com.appllication.model.TableB</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                …
                <prop key="hibernate.default_schema">Library2</prop>
            </props>
        </property>
    </bean> 
```

我正在尝试像这样加入我班级的表格：

```
@Entity(name = "TableA")
public class TableA {

@ManyToOne(targetEntity=TableB.class, fetch=FetchType.LAZY)
    @JoinColumns(
            {
                @JoinColumn(name="column1", referencedColumnName="column1", insertable=false, updatable=false),
                @JoinColumn(name="column2", referencedColumnName="column2", insertable=false, updatable=false)
            })
    private TableB tableB;

…
} 
```

但是当我运行我的单元测试时它失败了，因为 DAO 类一次只能加载一个 sessionFactory，而我的 TableADao 加载了 sessionFactory1AS400，它不知道 TableB 的存在。为了克服这个问题，我将 TableB 移动到与 TableA 相同的 sessionFactory：

```
<bean id="sessionFactory1AS400"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSourceAS400" />
        <property name="annotatedClasses">
            <list>
                <value>com.appllication.model.TableA</value>
<value>com.appllication.model.TableB</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                …
                <prop key="hibernate.default_schema">Library1</prop>
            </props>
        </property>
    </bean> 
```

并在 TableB 类上添加了模式的定义：

```
@Entity(name="TableB")
@Table(schema="Library2")
public class TableB implements Serializable {
…
} 
```

这次我的测试运行正常并给了我正确的查询：

```
SELECT * FROM Library1.TableA ta INNER JOIN Library2.TableB tb ON ta.column1 = tb.column1 AND ta.column2 = tb.column2 
```

现在我的问题是 TableB 上的模式定义是硬编码的，而不是从完美场景的配置文件中加载，因为我们有不同的环境，其中库名称不同。

有没有办法让 TableB 上的模式定义来自 spring 上的配置或任何其他方式来加入这些表？

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:34:34.230

通过 2 个不同的库连接表非常容易，您只需要一些额外的 JDBC 参数：

在 JDBC url 中添加参数“libraries”和“naming”。例如 jdbc:as400://systemName/;libraries="Library1 Library2";naming=system

使用上面的 JDBC url，您将能够执行此查询：

select * from TableA inner join TableB on ... = ...

iSeries 机器将使用“libraries”参数来查找物理文件。使您的物理文件名在两个库中都是唯一的，以防止冲突。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T21:53:37.587

使用 Hibernate 的 *.hbm.xml 配置而不是 Annotations 怎么样？

```
<class name="TableB" table="table_b" schema="Library2">
    . . .
</class> 
```

然后，您可以指定在 Spring 上下文 XML 中加载哪些 *.hbm.xml 文件，然后使用通过 PropertyPlaceHolderConfigurer 或类似配置配置的属性。

# matlab - 在图像中找到正方形

> ID：10518399
> 
> 赞同：0
> 
> 时间：2012-05-09T14:43:11.183
> 
> 标签：matlab, image-processing

在这张图片中：

![在此处输入图像描述](../Images/71cdcb987c9ab9b679024c388369bbef.png)

有正方形（3*3、5*5 和 11*11）

如何找到小方块（5*5）？

应用过滤器后，图像中只剩下一个小方块。

如果正方形消失了，我们可以在图像上应用模糊（大小 5*5）过滤器，那么我们可以理解为 (5*5) 的正方形更小。

matlab如何求平方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:15:13.807

您应该将图像与以下内核进行卷积：

```
-1 -1 -1 -1 -1 -1 -1
-1 +1 +1 +1 +1 +1 -1
-1 +1 +1 +1 +1 +1 -1
-1 +1 +1 +1 +1 +1 -1
-1 +1 +1 +1 +1 +1 -1
-1 -1 -1 -1 -1 -1 -1 
```

如果白色部分为 0，黑色部分为 1。如果白色为 1，黑色为 0，则在内核中切换 + 和 -。

您可以使用[conv2](http://www.mathworks.fr/help/techdoc/ref/conv2.html)。查看链接或维基百科以获取有关卷积的更多信息。完整的程序留给读者作为练习;-)

结果将是一个所有像素都为零的图像，除了黑暗的 5x5 正方形的中心。

# javascript - 有没有办法将css文件或javascript文件动态注入HTML文档的head标签。

> ID：10518400
> 
> 赞同：2
> 
> 时间：2012-05-09T14:43:11.350
> 
> 标签：javascript, html, css

有没有办法将css文件或javascript文件动态注入HTML文档的head标签。

这是场景：

我做了一个ajax调用，它基本上带回了一些HTML，css和事件存储在一个单独的文件中。

我需要的是，将链接和脚本放入 head 标签中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:50:15.053

[加载外部 JavaScript](http://api.jquery.com/jQuery.getScript/)内置在 jQuery 中，但您需要创建 CSS 元素：

```
$(document).ready( function(){

    $("head").append("<link>");
    css = $("head").children(":last");
    css.attr({
      rel:  "stylesheet",
      type: "text/css",
      href: "/link/to/your.css"
    });
    $.getScript("/path/to/your.js", function(){
         // fires after JS is loaded
    });

}); 
```

您将需要能够加载 jQuery 并在页面上运行此 JavaScript，以便拉入您的外部文件。

我用谷歌找到：[http ://topsecretproject.finitestatemachine.com/2009/09/how-to-load-javascript-and-css-dynamically-with-jquery/](http://topsecretproject.finitestatemachine.com/2009/09/how-to-load-javascript-and-css-dynamically-with-jquery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:51:22.753

jQuery 方法在 IE 中不起作用，但您可以使用它自己的特殊`creatStyleSheet`功能来处理它：

```
var url = '/b/css/datepicker.jquery-ui.css';

if (document.createStyleSheet){
  document.createStyleSheet(url);
 } else {
   $('head').append('<link rel="stylesheet" type="text/css" href="' + url + '"/>');
 } 
```

# sql - 为什么会出错：将数字转换为数据类型数字的算术溢出错误

> ID：10518401
> 
> 赞同：0
> 
> 时间：2012-05-09T14:43:13.433
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

```
SELECT 
    TradeId,
    Trade_SecurityId,
    SecurityType.*, 
    Trade_ParAmount Quantity 
INTO 
    #Securities 
FROM 
    Fireball.dbo.PreAssignSecurityType SecurityType
INNER JOIN 
    Fireball_RawImportData.dbo.Import_WSO_TradeReport TradeReport ON 
        SecurityType.NativeTradeId = TradeReport.Trade_ID AND
        TradeReport.Trade_TradeDate = SecurityType.TradeDate
INNER JOIN
    Fireball..Trade ON
        Trade.NativeTradeId = SecurityType.NativeTradeID
WHERE 
    SecurityType.TradeDate = '2012-02-02' 
```

在那之后

```
INSERT INTO 
    Fireball..IRPTrade 
    (TradeId, Par, TradeFee, AccruedInterest, AccruedPIK, AccruedFees)
SELECT 
    TradeId, 
    Par, 
    TradeFee, 
    AccruedInterest, 
    AccruedPIK, 
    AccruedFees 
FROM 
    Fireball..bondTrade 
WHERE 
    TradeId IN 
    (
    SELECT 
        TradeId 
    FROM 
        #Securities 
    WHERE 
        SecurityType = 'IRP' OR 
        SecurityType = 'IRS'
    ) AND
    NOT EXISTS(
        SELECT  *
        FROM -- GETTING ERROR AT THIS LINE WHY :(
        Fireball..IRPTrade
    WHERE
        TradeId = bondTrade.TradeId) 
```

表定义：

```
BondTradeId int Unchecked
TradeId int Unchecked
Par decimal(32, 4)  Checked
TradeFee    decimal(32, 4)  Checked
AccruedInterest decimal(32, 4)  Checked
AccruedPIK  decimal(32, 4)  Checked
AccruedFees decimal(32, 4)  Checked
        Unchecked

IRPTradeId  int Unchecked
TradeId int Unchecked
Par decimal(32, 4)  Checked
TradeFee    decimal(32, 4)  Checked
AccruedInterest decimal(32, 4)  Checked
AccruedPIK  decimal(32, 4)  Checked
AccruedFees decimal(32, 4)  Checked
        Unchecked 
```

可能是`decimal(32,4)`从表中获取超过的列值之一`Fireball..IRPTrade` ，`Fireball..bondTrade`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:46:31.823

如果没有表的定义，很难回答 :) 根据错误消息，很可能是在 INSERT 期间引发的错误，因为来自 VARCHAR 列的数据无法正确转换为 INT 列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T02:47:27.087

上次我遇到类似的错误是因为数字字段中的一个值设置为 NaN，而不是数字，更正了值或删除了行，之后就很好了。

# c# - 带有异常的验证与 IDataErrorInfo 和新的 INotifyDataErrorInfo

> ID：10518402
> 
> 赞同：0
> 
> 时间：2012-05-09T14:43:18.750
> 
> 标签：c#, wpf, validation, idataerrorinfo, inotifydataerrorinfo

我正在尝试不同的验证方式，但我遇到了新的 INotifyDataErrorInfo 接口的问题。

例如，当写入一个只接受 10 个字符的绑定文本框时。我写了 11 个字符并制表符。验证开始并将文本框标记为红色等。现在，我不想将此无效值写入此绑定的源，但如果我不这样做，我会立即将文本框中的值重置为最后一个有效值。就好像绑定在其绑定上执行 UpdateTarget 一样，即使出现错误也是如此。

通过使用 ValidatesOnExceptions 并在设置器中抛出异常，我得到了我所追求的行为。如果在 setter 中抛出异常，则绑定不会从源更新它的值。这会在文本框中留下无效值，以便我可以使用它使其有效。我认为这比必须将无效值存储在底层对象中要好得多。

问题是为什么 IDataErrorInfo 和新的 INotifyDataErrorInfo 的行为方式是即使出现错误，它也会从源更新目标？我可以让它表现得更像 ValidatesOnExceptions 吗？

由于异步验证等其他功能，我需要 INotifyDataErrorInfo ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:02:46.917

如果需要在将值提交到源之前对其进行验证，则需要创建自定义验证规则并将 ValidationStep 设置为 RawProposedValue 或 ConvertedProposedValue。

有关更多信息，请参阅有关[验证过程](http://msdn.microsoft.com/en-us/library/ms752347.aspx)和[验证步骤](http://msdn.microsoft.com/en-us/library/system.windows.controls.validationstep.aspx)的文档。

# elasticsearch - 在 ElasticSearch 中，我们应该在 nGram 分析器的查询字符串中使用 default_field

> ID：10518404
> 
> 赞同：0
> 
> 时间：2012-05-09T14:43:20.607
> 
> 标签：elasticsearch

我已经通过这个 JSON 创建了我的索引和映射

```
// 1st Mapping
    http://localhost:9200/hdm/entities/_mapping
    {
            "entities" : {
                "properties": {
                    "name": { "type": "string", "boost": 2.0, "analyzer": "snowball" },
                    "description": { "type": "string", "analyzer": "nGram" }
                }
            }
        }
// 2nd Mapping
    http://localhost:9200/hdm/products/_mapping
    {
        "products": {
            "_parent": { "type": "entities" },
            "properties": {
                "name": { "type": "string", "boost": 2.0, "analyzer": "snowball" },
                "code": { "type": "string", "analyzer": "snowball" },
                "segment": { "type": "string", "analyzer": "snowball" },
                "description": { "type": "string", "analyzer": "snowball" }
            }
        }
    } 
```

现在我已经使用 JSON 在这个索引中索引了一些文档

```
 http://localhost:9200/hdm/entities/100
    {
        "name":"Entity 001",
        "description":"this is the company or an organization which provides the whole medicine, tablets injunction for the problem of human being those noting worth gaining was ever gained without effort

",
        "itype":"entities"
    }

    http://localhost:9200/hdm/products/101?parent=100
    {
        "name":"biorich",
        "description":"the tablet para is used to rectify the person from the all types of pain in the body, kingston , car, bat, ball, description of the products",
        "code":"COD19202",  
        "segment":"SEG1022",
        "itype":"products"
    } 
```

对于搜索，我使用了这个 JSON

```
{
  "query": {
    "filtered": {
      "query": {
        "bool": {
          "should": [
            {
              "has_child": {
                "type": "products",
                "query": {
                  "query_string": {
                    "query": "tab"
                  }
                }
              }
            },
            {
              "query_string": {
                "query": "tablet"
              }
            }
          ]
        }
      },
      "filter": {
        "or": [
          {
            "term": {
              "itype": "entities"
            }
          }
        ]
      }
    }
  }
} 
```

我没有得到结果，但是我像这样更改了查询字符串，然后我得到了结果

```
 "query_string": {
        "default_field" : "description"
        "query": "tablet"
      } 
```

您能否确认一下，我们是否应该在查询字符串中提及 default_field 以获取 nGram 分析器结果？我的分析仪配置如下

```
index.analysis.analyzer.mynGram.type: custom
index.analysis.analyzer.mynGram.tokenizer: standard
index.analysis.analyzer.mynGram.filter: [lowercase, mynGramFilter]
index.analysis.filter.mynGramFilter.type: nGram
index.analysis.filter.mynGramFilter.min_gram: 1
index.analysis.filter.mynGramFilter.max_gram: 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:44:51.287

当`"default_field"`查询中未指定时，elasticsearch 使用特殊`[_all](http://www.elasticsearch.org/guide/reference/mapping/all-field.html)`字段执行搜索。由于您没有更改默认分析器，也没有为`_all`映射中的字段指定分析器，因此`_all`使用[标准](http://www.elasticsearch.org/guide/reference/index-modules/analysis/standard-analyzer.html)分析器执行针对该字段的搜索。

# php - php mysql best practice show 在下拉列表中选择

> ID：10518406
> 
> 赞同：1
> 
> 时间：2012-05-09T14:43:22.070
> 
> 标签：php, drop-down-menu, selected

我有一个相当简单的问题。我有一个值为 1 到 10 的选择下拉菜单。这是一个编辑屏幕，因此用户已经选择了一个应该选择的值。我给他们机会改变它。所以我需要做的就是在选项值中插入选择的单词。为了完成这个简单的任务，我一直在做一堆不优雅的 if thens。是否有最佳实践或简单的方法来做到这一点。执行所有这些 if then 并创建 10 个新变量似乎没有必要的开销。请注意，出于将 html 与 php 逻辑分开的原因，我不想按顺序写出选项值，我将 html 放在单独的区域中，只需要在适当的位置设置选择的变量。

```
if ($row['points']==1){
$select1 = "selected"}
if ($row['points']==2){
$select2 = "selected"}
//values 3 through 9
if ($row['points']==2){
$select2 = "selected"}

echo '<select name="points">';
echo '<option value = 1'. $select1.'>1</option>';
echo '<option value=2'. $select1.'>2</option>';
//values 3 through 9
echo '<option value=10'.$select10.'>10</option>';
echo '</select>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:51:37.480

```
for ($x = 1; $x <= 10; $x++) {
   echo "<option value=$x" . ($row['points'] == $x ? ' selected' : '')
      . ">$x</option>';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:52:08.093

for 循环对此很有用，使用内联 if else 语句来测试所选用例

```
echo '<select name="points">';
for ($i=1; $i<=10; $i++) {
   echo "<option value='{$i}'".($row['points']==$i ? ' select="selected"':'').">{$i}</option>";   

}
echo '</select>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:52:46.293

因为您使用的是单个可选列表（不允许多选），即一次只能选择一个.. 查找[http://fi.php.net/str_replace](http://fi.php.net/str_replace)

```
echo str_replace("value='".$selected_value."'", "value='".$selected_value."' selected", "<option value='1'>1</option><option value='2'>2</option> ...."); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T15:05:58.123

我使用 jquery 和一个隐藏字段来指示 a 的选定值`<select>`。

html:

```
<input type=hidden name=points value=1>
<select name="points">
  <option value=1>1</option>
  <option value=2>2</option>
</select> 
```

js：

```
$('input[type=hidden]').each(function(){
            var e = $(this);
            var name = e.attr("name");
            var val = e.val();
            if(name!="")
            {
                e.parent().find('select[name='+name+']').val(val);              
            }       
        }); 
```

[例子](http://jsfiddle.net/wBVxx/)

# android - 从 SQLite 和 android 选择阿拉伯数据时编码结果不佳

> ID：10518409
> 
> 赞同：0
> 
> 时间：2012-05-09T14:43:26.393
> 
> 标签：android, sqlite, text, encoding, arabic

我对 SQLite 和 android 有问题，我正在尝试从数据库中选择阿拉伯数据，数据库由 android 外部的数据填充，然后我将其推送到 android 模拟器。英文文本显示正常，但阿拉伯文本出现错误方法

文字看起来像这样 img ![在此处输入图像描述](../Images/13035ad71e1d59193bac7a0af551c8f9.png)

所以请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:24:32.307

我用通过代码创建的随机文本检查了阿拉伯语数据库：

```
db = openOrCreateDatabase("dictionary", MODE_PRIVATE, null);
db.execSQL("CREATE TABLE IF NOT EXISTS LIST(wlist varchar);");
db.execSQL("INSERT INTO LIST VALUES('صبالخير');"); 
db.execSQL("INSERT INTO LIST VALUES('صبا لخير');"); 
```

然后我使用以下带有光标的查询从数据库中动态选择文本：

```
String q = "SELECT * FROM LIST";
Cursor c = db.rawQuery(q, null);
if(c.getCount() == 0)
  {
    setSuggestions(list, true, true);
  }
else{
  int i=0;
  c.moveToFirst();
     do {
         String cm = c.getString(c.getColumnIndex("wlist")); 
                      list.add(cm);
                      i++;
        } while (c.moveToNext() && i<30); 
```

结果如下：

![在此处输入图像描述](../Images/873e2b2561eccdce54b2e8dc6a8a3694.png)
显示阿拉伯文本。因此，如果阿拉伯语数据的格式正确，请使用 SQLite 数据库浏览器检查您现有的数据库。

# javascript - 如何在 Backbone.js 的单击事件中获取 jQuery 元素（或属性）？

> ID：10518411
> 
> 赞同：24
> 
> 时间：2012-05-09T14:43:29.997
> 
> 标签：javascript, jquery, backbone.js

我有以下代码：

**HTML**：

```
<div id='example'>
 <a href='#' data-name='foo' class='example-link'>Click Me</a>
 <a href='#' data-name='bar' class='example-link'>Click Me</a>
</div> 
```

**JavaScript**

```
example_view = Backbone.View.extend({
    el: $("#example"),
    events: {
      'click .example-link' : 'example_event'
    },
    example_event : function(event) {
      //need to get the data-name here
    } 
}); 
```

如何获取`data-name`在函数内部单击的链接的属性`example_event`？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-09T14:48:50.527

尝试这个。

```
example_event : function(event) {
  //need to get the data-name here
  var name = $(event.target).data('name');
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-04-24T13:35:28.140

[您也可以使用 JavaScript 的getAttribute](http://www.w3schools.com/jsref/met_element_getattribute.asp)方法在没有 jQuery 的情况下执行此操作：

```
example_event : function(event) {
  //need to get the data-name here
  var name = event.target.getAttribute('data-name');
} 
```

# php - 哪个更快：“SELECT * FROM table”或“SELECT x,y,q FROM table”（来自具有 4 个字段的表）

> ID：10518413
> 
> 赞同：5
> 
> 时间：2012-05-09T14:43:32.787
> 
> 标签：php, mysql, sql, database

我想知道，什么是最快的（或最轻的数据库处理）

假设 db 表有 4 个字段：x、y、z、q

我只需要 3: x,y,q

数据库执行（使用 PHP）最快/最简单的方式是什么？“SELECT * FROM table”或“SELECT x,y,q FROM table”？

如果表格有 5 个或更多字段，而我仍然只需要选择 3 个字段，这同样适用吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T14:44:14.987

`SELECT x,y,z FROM table`更快，因为 MySQL 在执行查询之前不必查找表中的列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T14:47:50.373

在大多数数据库中，* 比指定字段慢。

将所有列放在一起也是一种很好的编程习惯，即使它们很多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T14:49:29.587

`SELECT x,y,q FROM table`总是比`select *`你没有阅读所有领域而是提到`SELECT x,y,q,z FROM table`并且`select *`会在性能方面具有相同的效果。

# google-app-engine - Webapp2 中的身份验证和会话助手？

> ID：10518414
> 
> 赞同：4
> 
> 时间：2012-05-09T14:43:37.407
> 
> 标签：google-app-engine, session, authentication

我正在尝试在 GAE 上托管的 webapp2 应用程序中添加身份验证。我已经成功完成了需要注册用户、登录以及注销功能的部分。由于这是我第一次尝试从头开始添加身份验证，因此我很想获得一些关于最佳实践的建议。这些是我的疑问：

*   Webapp2 中是否有助手。RoR 中的视图帮助器行中的一些东西，其中帮助器功能在每个视图/控制器上自动可用。

*   检查用户是否在每个页面上登录的正确方法是什么？我正在考虑`is_logged_in` 通过检查存储在用户浏览器中的cookie然后进行验证来在每个页面上运行一个助手。有没有更好的办法？

*   最后，我如何/在哪里使用会话？它有什么帮助？

我对身份验证的了解是我在 Udacity 正在进行的课程中学到的。讲师虽然没有提到会话，但谈到了使用 cookie 进行身份验证。

任何指针将不胜感激。太感谢了。

# php - 在 mysql 字段之间交换/交换值

> ID：10518417
> 
> 赞同：0
> 
> 时间：2012-05-09T14:43:43.997
> 
> 标签：php, mysql, insert-update

因此，在创建字段后，检索新闻订单所需的代码和其他内容如下：[Planning news ordering system](https://stackoverflow.com/questions/10515027/planning-news-ordering-system/10515231)

我遇到了另一个困境：

*   有**`X`**order value的 row和order value 的**`17`**row ，这是用 php 代码交换它们的 mysql 值的最佳方法？**`Y`****`19`**

## 更新

我对交换的意思是：用另一个值改变一个值。

我想要实现的目标类似于 joomla 对其数据进行排序。[http://awesomescreenshot.com/01658u06e](http://awesomescreenshot.com/01658u06e)

`sn_news`桌子：

```
....   id     order   title  
       ====   =====   =======
       1231   1       ASDAASD
       1331   2       ASDXXSD
       1221   3       ASDBBSD
       1731   4       ASDYYSD
       1531   5       ASDCCSD 
```

我想将 id`1221`的订单`3`与`5`来自 id的订单交换，`1531`因此它将变为：

```
....   id     order   title  
       ====   =====   =======
       1231   1       ASDAASD
       1331   2       ASDXXSD
 -->   1221   5       ASDBBSD
       1731   4       ASDYYSD
 -->   1531   3       ASDCCSD 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:09:02.470

这是我能理解的最好的

```
Update table_name set order=5 where id=1221;
Update table_name set order=3 where id=1531; 
```

# matlab - 在matlab中对pcolor进行着色和遮罩

> ID：10518421
> 
> 赞同：3
> 
> 时间：2012-05-09T14:43:55.443
> 
> 标签：matlab, overlay, mask, stipple

确实是两个问题，但我觉得它们重叠，所以我会在一个地方问它们（如果可以的话）。

我在 matlab 中使用以下方法创建了一个 pcolor：

```
p = pcolor(Lon', Lat', data); 
```

但现在我想补充一些信息。我有一个`mask`与数据具有相同维度的矩阵，但由 1 和 0 填充。在它包含 1 的地方，我想保留 pcolor 中的像素，当它包含 0 时，将其删除（不仅仅是将值设为零，这在我的颜色图中没有由白色像素表示）。

其次，我有第二个矩阵，称为“点画”，它再次包含 0 和 1。我现在想用点画效果覆盖由 1 表示的任何位置。

这样做的目的是创建一个类似这样的图像： [http](http://www.ipcc.ch/publications_and_data/ar4/wg1/en/figure-spm-7.html) ://www.ipcc.ch/publications_and_data/ar4/wg1/en/figure-spm-7.html 绘制平均值的地方，但是有区域太多的分歧被抹去，有很多共识的地方被“点画”。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:28:48.200

我会采取的方法是使用你的面具来提高透明度。这稍微复杂一些，`pcolor`因为它不允许您在创建绘图时直接设置属性，但您可以抓住它的句柄并这样做。

要覆盖点画，您可以`hold on`让 pcolor 绘图不会消失，并使用“绘图”在您想要的位置绘制点。

```
Lon = (-179:1:180)'; %# comment for formatting'
Lat = -90:1:90;
data = randn(length(Lon),length(Lat)); #% generate random data
mask = randi(2,size(data))-1; #% generate a random mask (zeros and ones)
point_matrix = randi(4,size(data)-1)==4; #% random (logical) matrix
[r c]=find(point_matrix==1); %# get the coordinates of the ones
figure;
hold on;
#% save a handle to the surface object created by pcolor
h=pcolor(repmat(Lon ,1,length(Lat)),repmat(Lat,length(Lon),1),data);
#% set properties of that surface: use mask as alphadata for transparency
#% and set 'facealpha' property to 'flat', and turn off edges (optional)
set(h,'alphadata',mask,'facealpha','flat','edgecolor','none');
#% overlay black dots on the center of the randomly chosen tiles
plot(r-179.5,c-89.5,'.k') 
```

# c++ - 错误 C2059：语法错误：“常量”

> ID：10518424
> 
> 赞同：5
> 
> 时间：2012-05-09T14:44:01.573
> 
> 标签：c++, visual-studio-express

我有一段自动生成的代码，可以在 Linux 上编译，但不能在 Windows 上使用 Visual Studio 2008 Express 编译。我遇到的问题是我不理解编译器错误。我不认为我可以发布确切的代码，所以这里是它的净化版本......

声明静态 const DELETE 的行报告错误。**注意：**编译此文件时不会显示编译器错误 - 它成功构建到库中，但会显示在包含头文件的第二个项目中（间接）。我相信至少有一个或两个其他项目将它间接包含在解决方案中——它们在编译时没有问题。

`File_A.h:`

```
enum LONG_TYPE_NAME {
  ENUM_NAME_PREFIX_ADD = 0,
  ENUM_NAME_PREFIX_CHANGE = 1,
  ENUM_NAME_PREFIX_DELETE = 2,
  ENUM_NAME_PREFIX_SOMETHINGELSE = 3,
};
//Lots of code here
class FOO : public ::LIBRARY_NAME {
 public:
  //Some stuff
  private:
  //Some stuff
  public:
  //Some more stuff

  typedef LONG_TYPE_NAME SHORT_NAME;
  static const SHORT_NAME ADD = ENUM_NAME_PREFIX_ADD;
  static const SHORT_NAME CHANGE = ENUM_NAME_PREFIX_CHANGE; 

  /* compiler error for the following line only*/
  static const SHORT_NAME DELETE = ENUM_NAME_PREFIX_DELETE; 
  static const SHORT_NAME SOMETHINGELSE = ENUM_NAME_PREFIX_SOMETHINGELSE; 

  //More stuff
}; 
```

常量本身只出现在一个地方（当我在项目中搜索术语 DELETE 时）：

`File_A.cc:`

```
#ifndef _MSC_VER
const LONG_TYPE_NAME FOO::ADD;
const LONG_TYPE_NAME FOO::CHANGE;
const LONG_TYPE_NAME FOO::DELETE;
//More stuff
#endif  // _MSC_VER 
```

报告的错误是`error C2059: syntax error : 'constant'`（随后是我认为不相关的） `error C2258: illegal pure syntax, must be '= 0'`，`error C4430: missing type specifier - int assumed. Note: C++ does not support default-int`但不是在编译上述文件时。

这些文件被编译成一个库，该库由另一个项目（C++）静态链接——这是产生错误的那个（以及在第二个 .cpp 文件中执行类似操作）。当我注释掉所有代码时它仍然会出现，所以我认为它与标题包含有关。

注释掉生成错误的行使构建在 Windows 上工作（并且在 Linux 上失败，但我认为在 ifndef 中注释掉它的对应部分应该可以解决这个问题），但我真的很想知道为什么编译器在该特定行上失败以及错误的实际含义。此外，最好不要修改自动生成的代码。

**编辑：**将术语拆分为单独的行使编译器指向 DELETE 行。也许在某处自动定义了一个名为 DELETE 的宏？

**编辑 2：**稍微清理了标题部分以消除一些可能的误解。顺便说一句，重命名 DELETE 变量也可以清除错误。

**编辑 3：**显然我需要了解更多关于 VS - /P 生成预处理文件而不生成目标文件，因此构建当然会失败而不会产生编译错误。此外，它看起来确实在某处有一个宏，它将 DELETE 定义为 (0x00010000L)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T16:42:26.243

肯定在`DELETE`某处定义了一个宏。

# c++ - 如何在 Xcode 输出控制台中显示 C++ 输出

> ID：10518430
> 
> 赞同：6
> 
> 时间：2012-05-09T14:44:17.550
> 
> 标签：c++, xcode

我已经阅读了所有类似问题的先前答案，它们似乎都与显示命令行项目的输出有关。如果您想以 Xcode 所称的“空”（没有文件、目标或构建配置的项目）的方式运行，该怎么办。

下面的代码构建成功。然而，“所有输出”控制台仍然没有显示结果。我试图深入研究 GDB 文档，但我是新手，我迷失在其中。

下面是代码：

```
#include <iostream>                           
using namespace std;  
int main()                                    

{                                             

cout << "Come up and C++ me some time.";  
cout << endl;                             
cout << "You won't regret it!" << endl;   
std::cout << "Press any key to continue." <<endl;
cin.get();
cin.get();

return 0;      
} 
```

更糟糕的是，我的 C++ 班的老师在 3 次尝试后没有解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T14:50:59.900

尝试激活控制台命令：++`Cmd`或在顶部菜单中：查看 -> 调试区域 -> 激活控制台。Xcode 4.3.2 也是如此。`Shift``C`

我记得 Xcode 3 中有一个命令`Cmd`++ （在控制台中运行）`Shift`。`R`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-19T04:34:02.210

我的帖子可能有点迟了，但如果任何其他菜鸟用户像我一样在网上搜索一个小时，然后自己找出答案，那将是天赐之物。答案很简单，但没有人提及。激活调试区域后使窗口变宽！！！

如果 xcode 窗口太窄，即如果您打开了一个显示 C++ 教程的网页并像我一样挤压了旁边的 xcode 窗口，并且尽管激活了调试器，但您看不到命令​​行输出，因为当窗口如果左右面板当前都可见（默认情况下），那么愚蠢的 xcode 会隐藏调试器的左半部分。这些可以在右上角关闭。或者，调试器窗格的左下角有两个按钮，可让您选择要查看调试器的哪一半，命令行部分或其他部分。

如果您是像我这样的菜鸟用户，那么这可能会为您节省一个小时的头痛。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-24T00:20:55.250

先说几件事。

Xcode 用于从移动应用程序到基本控制台应用程序的大量开发（据我所知，这是您的情况）。

**当你创建一个 New Project -> template of OS X -> application and console**时，Xcode 知道将 I/O 与你的 OSX/Xcode 控制台相关联。（OSX 控制台可能是许多其他框架的默认 I/O，但显然是上述框架的默认 I/O）。

正如有人提到的另一件重要的事情（你已经在做）。 **Xcode 在看到 "endl" 或 "\n" 之前不会登录到控制台**。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-14T06:13:52.067

看来您必须在打印件的末尾加上“\n”。像这样：

```
cout << "Come up and C++ me some time.\n"; 
```

那应该排序它。

# .net - 解析文本文件的最佳 C# 文件类

> ID：10518433
> 
> 赞同：0
> 
> 时间：2012-05-09T14:44:22.447
> 
> 标签：.net, c#-4.0

我的文件中有以下文本

```
 Index: D:/QATV2Demo/Main.msbuild
===================================================================
--- D:/QATV2Demo/Main.msbuild   (revision 12414)
+++ D:/QATV2Demo/Main.msbuild   (revision 12416)
--- D:/QATV2Demo/Main.msbuild   (revision 12414)
+++ D:/QATV2Demo/Main.msbuild   (revision 12416)
@@ -39,7 +39,7 @@
  AssemblyFile="$(ToolsBinPath)\MSBuild.Community.Tasks.dll" /> 
```

```
-    <FxCop_CriticalErrors>10</FxCop_CriticalErrors>
 +    <FxCop_CriticalErrors>0</FxCop_CriticalErrors>

 <FxCop_Errors>0</FxCop_Errors>
 <FxCop_CriticalWarnings>0</FxCop_CriticalWarnings>
 <FxCop_Warnings>0</FxCop_Warnings>

  Index: D:/QATV2Demo/QATV2Demo/QATConstant.cs
===================================================================
--- D:/QATV2Demo/QATV2Demo/QATConstant.cs   (revision 12414)
+++ D:/QATV2Demo/QATV2Demo/QATConstant.cs   (revision 12416)
@@ -9,7 +9,7 @@
  {
     public static readonly string PAGE_DATA_DROP_DOWN_MODE = "D";
     public static readonly string PAGE_DATA_GRID_MODE = "G";
-        public static readonly string REPORT = "Report";
+        public static readonly string REPORT = "Report1";
    public static readonly string ITEM_COUNT = "ItemCount";
 } 
```

}

现在我已经编写了自己的代码，它给出了结果，即以 - 和 + 开头的行，显示文件的内容差异。

这是我的代码

```
 int counter = 0;
        string line;
        string filename = args[0].ToString();

        using (System.IO.StreamReader file = new StreamReader(filename))
        {
            while ((line = file.ReadLine()) != null)
            {
                if (line.StartsWith("- ")||line.StartsWith("+ "))
                {
                    Console.WriteLine(line.Trim('-',' ','+'));

                }
                counter++;
            }

            file.Close();
        }
        // Suspend the screen.
        Console.WriteLine(counter); 
```

这是我使用的 ruff 代码。

请告诉我在这种情况下哪个 dot net 类最适合我

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:47:30.310

如果代码符合您的要求，则无需更改解析。您可以使用 来简化文件读取`File.ReadLines`，如下所示：

```
foreach (var line in File.ReadLines(filename))
{
    if (line.StartsWith("- ") || line.StartsWith("+ "))
    {
        // do stuff here
    }
    ++counter;
} 
```

除此之外，一旦找到添加和删除的行，您就不会说要对它们做什么。所以我不能在那里给出任何建议。

# javascript - 在循环内创建的函数中使用时的数组引用问题

> ID：10518440
> 
> 赞同：1
> 
> 时间：2012-05-09T14:44:53.790
> 
> 标签：javascript

我知道，很好的标题；-)

无论如何，假设我有以下代码（我这样做）：

```
function GetArray(i) {
    if (i == 0) {
        return [1, 2, 3];
    }
    return [];
}

for (var i = 0; i < 3; i++) {
    var array = GetArray(i);

    var onClick = function() {
        alert(array.length);
    }

    var html = "<a>click me</a><br/>";
    var element = $(html);
    $("div").append(element);

    element.click(onClick);
}​ 
```

[在此处查看工作代码](http://jsfiddle.net/XFBNA/)

单击 3 个链接，并注意每个值为 0 的警报。

我想要的是第一个链接在点击时提醒 3。

现在，在你们都开始大喊为什么会发生这种情况之前，我知道 onClick 函数正在使用对同一数组实例的引用进行清除，因此循环的每次迭代都会“更改”数组，而不是创建一个新的，这就是为什么实际上最后一个数组值用于所有点击事件。

所以问题是，我能做些什么来完成这项工作？

我想尝试在函数内部“克隆”不起作用的数组（我使用过`.slice(0)`）并且可能正确地不起作用。另外，我猜它甚至可能只是完全相同的功能被用于所有 3 个事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:49:14.207

每当发生这种情况时，它就是一个范围界定问题。每次通过数组时，您都需要将数组锁定到 onClick 处理程序。你可以通过一个自调用函数在它周围创建一个闭包来做到这一点。

```
for (var i = 0; i < 3; i++) {
    var array = GetArray(i), onClick;

    // create a closure around onClick and array
    (function(array){
        onClick = function() {
            alert(array.length);
        }
    })(array);

    var html = "<a>click me</a><br/>";
    var element = $(html);
    $("div").append(element);

    element.click(onClick);
}​ 
```

请注意，这将提醒 3、0、0，因为第二次和第三次通过 leep 您返回一个空数组。

# mongodb - mongodb 查询选项

> ID：10518442
> 
> 赞同：0
> 
> 时间：2012-05-09T14:44:56.020
> 
> 标签：mongodb

如果我有一个字段`extr_date`，我想运行一个 MAP-REDUCE，我想使用`extr_date`大于任何特定日期的文档，

我有两个选择，

首先，我在结果语句中提供查询字段，如下所示

```
var res_acc = db.some_input_coll.mapReduce(map_func, red_func, {query : { extr_date : {$gte:any_given_date}},finalize : final, out :{ "merge" : "some_output_coll" }}); 
```

其次，我将 if 条件提供到 map 函数中，如下所示，

```
var map_func = function(){
if(this.extr_date > given_date)
{
    emit({...} , {...})
} 
```

...所以推荐哪个？

带有结果语句的查询是否减少了要检查地图的文档数量？

如果是，那么我怎样才能找到检查的文件数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:10:48.460

假设您在“extr_date”上有一个索引，第一种方法可能会更快，因为它会减少提供给 map 的文档数量。

要弄清楚有多少文档被过滤掉，您可以尝试使用 .explain() 单独运行查询。像这样的东西：

```
db.some_input_coll.find({ extr_date : {$gte:any_given_date}}).explain() 
```

希望这可以帮助。

# android - Android中的DXF查看器

> ID：10518443
> 
> 赞同：1
> 
> 时间：2012-05-09T14:44:58.410
> 
> 标签：android, opengl-es

我现在能够读取 DXF 文件，但我对在 Android UI 上绘制图像感到震惊。

我在[这里](http://www.autodesk.com/techpubs/autocad/acad2000/dxf/index.htm)检查了 DXF 文件格式。

我知道我必须使用 OpenGL API 来绘制它。但是在读取 DXF 文件时对从哪里开始绘制它感到困惑。

有人可以给我一个链接或让我知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:23:43.273

不知道如何回答这样一个笼统的问题......这是一个包罗万象的回应L

OpenGL ES 在如何绘制数据方面受到限制。您只能绘制点、线、三角形、三角形带和三角形扇形。它不能绘制四边形或 NGons。假设您的 DXF 文件必须支持 NGons，您有几个选择：

1.  对 NGon 面做出假设（就像它们不太凹一样），计算面的中心并使用它来将每个面绘制为 triangle_fan
2.  构建自己的 ngon 细分方法并显示为三角形
3.  仅显示线框
4.  结合 ((1 | 2) & 3)

至于实际使用openGL进行绘图，我推荐Android开发参考中的精彩教程：

[OpenGL ES 1.0](http://developer.android.com/resources/tutorials/opengl/opengl-es10.html)

[OpenGL ES 2.0](http://developer.android.com/resources/tutorials/opengl/opengl-es20.html)

使用 GL ES 2.0 示例，您将修改 initShapes() 方法以将 DXF 数据加载到字节缓冲区中（查看[此处](http://www.opengl.org/sdk/docs/man/xhtml/glVertexAttribPointer.xml)的文档）。然后，您将修改 Renderer 类中的 onDrawFrame 方法以使用具有适当参数的 byteBuffer 并以首选方法绘制数组（例如，GL_LINES 或 GL_LINE_STRIP 用于线框）。

希望这会有所帮助

# php - 发送电子邮件文本/html 失败

> ID：10518444
> 
> 赞同：0
> 
> 时间：2012-05-09T14:45:00.033
> 
> 标签：php, email

我正在尝试发送和电子邮件文本或/和 html 版本..

我要做的是：

```
 $bodyHTML = "
 --PHP-alt-$random_hash 
 Content-Type: text/plain; charset='iso-8859-1' 
 Content-Transfer-Encoding: 7bit

http://example.com/app_dl.php?app_id=$_GET[app_id] to download your $app_name app \n\r
Want to get tons more hot apps for free! anywhere anytime? Download our app on http://example' \n\r\n\r
example.com team

  --PHP-alt-$random_hash 
 Content-Type: text/html; charset='iso-8859-1'
Content-Transfer-Encoding: 7bit

 <p><a href='http://example.com/app_dl.php?app_id=$_GET[app_id]'>Click Here</a> to download your $app_name app</p>
 <p>Want to get tons more hot apps for free! anywhere anytime? Download our app on <a href='http://example.com'>example.com</a></p>
 <br/>
 <p>example.com team</p>
  --PHP-alt-$random_hash ";
endif; 
```

这就是我得到的：

```
--PHP-alt-f4b83c7072ae970392b44308a6c36109 Content-Type: text/plain; charset='iso-8859-

    1' Content-Transfer-Encoding: 7bit http://example.com/app_dl.php?app_id=35 to download your PhoneMates app Want to get tons more hot apps for free! anywhere anytime? Download our app on http://example.com' example.com team --PHP-alt-f4b83c7072ae970392b44308a6c36109 Content-Type: text/html; charset='iso-8859-1' Content-Transfer-Encoding: 7bit
        Click Here to download your PhoneMates app
        Want to get tons more hot apps for free! anywhere anytime? Download our app on example.com

   example.com team
    --PHP-alt-f4b83c7072ae970392b44308a6c36109 
```

问题是我看到所有这些标题行..内容类型..并且文本行无法使用 '\n\r'..

另外不知道能不能达到一个版本失败..html或者txt,然后出现另一个版本..谢谢帮助

这是一些代码：

```
 $random_hash = md5(date('r', time())); 
 $boundary="PHP-alt-".$random_hash;
 $headers = array ('From' => $from,
  'Content-Type'=>  'multipart/alternative',
   'boundary'=>$boundary,  
   'To' => $to,
    'Return-Path' => 'info@example.com',
   'Subject' => $subject); 
```

其他详细信息，例如发件人，通行证，标题，不相关..所以我没有在这里展示它们..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:48:03.603

不要滚动您自己的 MIME 处理。使用库而不是重新发明轮子。

我知道[Swift](http://swiftmailer.org/)是 PHP 领域的常用选项。

也就是说，我怀疑问题与您的 MIME 边界标记和标题之前的空白有关。尝试删除它。

您最后的 MIME 边界也缺少`--`最后的。

*真的，真的*，为这些东西使用一个健壮的、经过良好测试的第三方库。有太多繁琐的东西你可能会出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:53:17.707

当我写自己的时候，就像你现在所做的那样，这是最后一组标题，最终成为正确的工作设置。

```
//headers - specify your from email address and name here
//and specify the boundary for the email
$headers = "MIME-Version: 1.0\r\n";
$headers .= "From:".$from."\r\n";
$headers .= "To: ".$to."\r\n";
$headers .= "Return-Path: ".$from."\r\n";
$headers .= "Content-Type: multipart/alternative;boundary=" . $boundary . "\r\n"; 
```

另外，在上下文中，我的边界看起来像这样：

```
$message .= "\r\n\r\n--" . $boundary . "--"; 
```

大概，你需要那些尾随的破折号。

# php - 如何检查用户是否使用 Zend Framework 登录？

> ID：10518450
> 
> 赞同：6
> 
> 时间：2012-05-09T14:45:16.997
> 
> 标签：php, zend-framework, login, acl

我正在学习 Zend Framework，但我对用法和概念有一些疑问。

我想检查用户是否已登录以允许访问所有页面。如果是，显示页面，如果不是，显示登录页面。

我的主要疑问是**我需要使用什么来执行此操作**（Zend_Auth、Zend_Acl 等）以及**在哪里检查用户是否已登录**（在每个控制器或框架中自动检查每个申请）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:07:27.680

您要使用的工具是[Zend_Auth](http://framework.zend.com/manual/en/zend.auth.html)，当您掌握它的窍门时，它非常容易使用。

检查用户是否登录可以很简单：-

```
$auth = Zend_Auth::getInstance();
if($auth->hasIdentity()) $loggedIn = true; 
```

请参阅[Rob Allen 关于 Zend Auth 入门的优秀教程](http://akrabat.com/zend-auth-tutorial/)。

[我使用的方法是设置一个负责授权和访问控制的用户类，并将其作为Action Helper](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html)注入我的应用程序，这样我就可以在我的任何控制器中执行以下操作：-

```
$this->user->checkSomething(); 
```

授权部分需要影响您不希望公开的站点的所有部分，并且每个受影响的控制器都需要检查用户是否已登录。对于访问控制，这是基于每个角色/每个资源完成的，具体取决于您需要多细粒度。请参阅手册中的[ACL](http://framework.zend.com/manual/en/zend.acl.html)和[AUTH](http://framework.zend.com/manual/en/zend.auth.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-26T21:52:53.880

想检查用户是否登录 ZendFramework？尝试这个：

将其放在控制器的任何位置以“调试”，并将其放在代码的顶部或开头：

```
if (Zend_Auth::getInstance()->hasIdentity()) echo "oh yeah I'm logged in lol"; die; 
```

# nhibernate - 我在哪里可以获得最新的 FluentNHibernate 版本？

> ID：10518452
> 
> 赞同：2
> 
> 时间：2012-05-09T14:45:26.357
> 
> 标签：nhibernate, fluent-nhibernate

在我的应用程序中，我经常使用 FluentNHibernate。不幸的是，[一个 Visual Studio Bug 迫使我获得了不同的 FNH 版本](https://stackoverflow.com/questions/10331325/what-causes-the-vs-2010-sp1-wpf-designer-to-crash)，但是自从项目主页切换到 GitHub 后，已经没有工作的已编译二进制文件的下载链接，因此无法获得签名的强名称版本在此刻。

我所做的是获取源代码并构建我自己的版本（使用 VS，而不是 rake / albacore），它具有 - 缺少原始的 .snk - 没有强名称/比原始名称更强大的名称。这会在我的程序集之间造成一些不兼容，这些程序集部分使用供应商构建，部分使用我自己的。

那么，你们到底是如何处理这个问题的呢？我不可能是唯一一个在寻找最新的 FNH 二进制文件的人，可以吗？是否有一些持续集成平台托管它？

编辑：当前的源代码还包含 SNK，所以我可以像原始版本一样对其进行签名，不会再有任何麻烦。不过，如果有在线可用的 CI 构建，那就太好了……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:52:26.233

努吉特？ [http://nuget.org/packages/FluentNHibernate](http://nuget.org/packages/FluentNHibernate)

# java - MSSQL 数据库锁停止我的应用程序？

> ID：10518455
> 
> 赞同：0
> 
> 时间：2012-05-09T14:45:33.400
> 
> 标签：java, sql-server

我在我的 java 应用程序中遇到问题，一旦我登录，我就可以访问任何不查询名为`content`. 当我尝试查询此表时，它会坐着等着什么。我检查了 MsSQL 中的活动监视器，它似乎有一个锁。我试图弄清楚这是从哪里来的。我是具有 MySQL 背景的 MsSQL 新手。

我认为我们的 DAO 中的一些查询可能会导致这种情况，所以我将它们改为使用 JPA，但没有运气。

![MsSQL 活动监视器](../Images/7cdf493d873fba5ea2dd0235afd04668.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:28:55.440

看起来会话 58 被会话 74 阻止。检查会话 74 是否被另一个会话阻止，依此类推，直到找到根锁。

您可以通过右键单击会话来终止会话，或者执行如下查询：

```
kill 74 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:14:43.440

上面已经解决了具体问题，但更普遍的问题是您的代码没有为查询执行配置 jdbc 驱动程序超时。它是关于如何执行此操作的特定驱动程序，因此您必须对 sqlserver 进行研究以弄清楚如何执行此操作。

通常，只需在管理连接的任何内容上设置一些属性即可。通常这将在底层 javax.sql.DataSource

# ios - iOS 的同步框架提供程序

> ID：10518456
> 
> 赞同：2
> 
> 时间：2012-05-09T14:45:35.413
> 
> 标签：ios, sql-server, microsoft-sync-framework

我们正在开始开发 iPhone 应用程序，该应用程序将使用 Microsoft Sync Framework 在手机上的本地 SQLite 数据库与远程 SQL Server 2008 数据库之间进行同步。是否有任何与 SQLite 一起使用的商业 iOS 同步提供程序？如果我们可以不用自己写，那就太好了。如果没有，有没有人写过可以给我任何建议的？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-09T15:25:33.190

[Sybase Unwired Platform](http://www.sybase.com/products/mobileenterprise/sybaseunwiredplatform)等有[SQL Server](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)和[SQL Anywhere](http://en.wikipedia.org/wiki/SQL_Anywhere)连接模板，本地数据库将是`SQLite`，您可以尝试在[这里](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.pubs.docset-SUP-2.1.2/doc/html/title.html)找到更多信息，我并不是说这很容易。

# c# - C# 将 2 个字符串数组合并为一个具有唯一值的数组

> ID：10518457
> 
> 赞同：1
> 
> 时间：2012-05-09T14:45:37.753
> 
> 标签：c#, arrays, linq, unions

这与上一个[问题有关](https://stackoverflow.com/questions/10506503/c-sharp-modifying-string-array-from-one-scope-level-down)，但似乎不同，可以单独发布：

`DomAttributeIds`我有从用户输入（和）存储在字符串数组中的设置`IntlAttributeIds`。我正在尝试有条件地构建一个值数组来执行一些代码。条件是：

1.  如果`DomAttributesSettings`存在，则创建一个值数组并将它们传递给`AddAttributeEdit()`方法。
2.  如果`IntlAttributesSettings`存在，则创建这些设置的数组，并将它们与条件一中的设置明显结合（无重复），并将该数组传递给代码的其余部分，最终将每个数组元素传递给`AddAttributeEdit()`方法。

除了“无重复”部分之外，下面的代码似乎有效。我认为使用 Linq 的 Union 和/或 Distinct 方法可以做到这一点，但我一定做错了什么。我的代码抛出以下异常：

> 找到具有相同 ID 'trAttribute_493' 的多个控件。FindControl 要求控件具有唯一的 ID。

我知道这是因为该 id 存在于两种设置中。最后的`AddAttributeEdit()`方法包含基于传递给它的值构建带有 Ids 的表格和单元格的代码。为了获得两个数组的不同联合，我做错了什么？

这是代码：

```
 private void LoadAttributes()
    {
        if (!string.IsNullOrEmpty(DomAttributesSetting))
        {
            string[] attributeIds;
            if (!string.IsNullOrEmpty(IntlAttributesSetting))
            {

                string[] domattributeIds = DomAttributesSetting.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
                string[] intlattributeIds = IntlAttributesSetting.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
                IEnumerable<string> atrributeIdList = domattributeIds.Union(intlattributeIds).Distinct();
                attributeIds = atrributeIdList.ToArray();
            }
            else
            {
                attributeIds = DomAttributesSetting.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
            } 
            foreach (string attributeId in attributeIds)
            {
                int attrId = -1;
                if (int.TryParse(attributeId, out attrId) && attrId != -1)
                {
                    Arena.Core.Attribute attribute = new Arena.Core.Attribute(attrId);
                    PersonAttribute personAttribute = (PersonAttribute)person.Attributes.FindByID(attribute.AttributeId);
                    if (personAttribute == null)
                        personAttribute = new PersonAttribute(person.PersonID, attrId);

                    AddAttributeEdit(attribute, personAttribute, true);
                }

            }

        }

    }... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:03:37.960

您可能对逗号分隔列表中的值进行了填充（例如“Prop1, Prop2”与“Prop1,Prop2”），或者大小写不同。

尝试从输入中修剪每个值并使用不区分大小写的比较器，如下所示：

```
var domattributeIds = DomAttributesSetting
    .Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
    .Select(x=>x.Trim());

var intlattributeIds = IntlAttributesSetting
    .Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
    .Select(x=>x.Trim());

var attributeIds = domattributeIds
    .Union(intlattributeIds, StringComparer.InvariantCultureIgnoreCase)
    .ToArray(); 
```

你甚至不需要`Distinct()`在最后打电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:33:07.257

Do you have two strings that vary only by case? Linq won't see those as duplicates by default. Try this instead:

```
domattributeIds.Union(intlattributeIds, StringComparer.CurrentCultureIgnoreCase) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T15:06:38.567

您必须对某些整数有不同的字符串表示形式 - 例如前导“0”。

您最好的选择是先转换为`int`s，然后运行`Distinct`​​.

就像是：

```
var ints = attributeIds.Select( s =>
{
  int i;
  return Int32.TryParse( s, out i ) ? i : -1;
};

var uniques = ints.Where( i => i != -1 ).Distinct().ToList();

foreach ( int attrId in uniques )
{
  Arena.Core.Attribute attribute = ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:03:54.573

```
 string a = "a,b, c";
 string b = "b,c,d";
 String[] ass  = a.Split( new char[]{','}, StringSplitOptions.RemoveEmptyEntries);
 String[] bss =  b.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
 var list = ass.Union(bss).Distinct().ToArray();
 StringBuilder sb = new StringBuilder();
 foreach ( String s in list)
  {
    sb.Append(s);
  }
 Text = sb.ToString(); 
```

由于空格，最后的文本是“ab ccd”。确保您的输入不包含空格

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T14:54:34.193

使用 LINQ 中的 Union，例如：

```
string[] domattributeIds = new string[] { "a", "b", "c" };
string[] intlattributeIds = new string[] { "a", "c", "d" };

string[] combined = domattributeIds.Union(intlattributeIds).ToArray(); 
```

新数组“组合”具有值“a”、“b”、“c”、“d”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-19T12:58:33.003

以下代码将从 2 个字符串数组中返回不同的字符串数组

```
public string[] UniqueNames(string[] names1, string[] names2) {
    newName = names1.ToList();
    foreach (var dr in names2) {
        if (!newName.Contains(dr)) {
            newName.Add(dr);
        }
    }
    string[] newNameArray = newName.ToArray();
    return newNameArray;
} 
```

或者你也可以试试

```
public string[] UniqueNames(string[] names1, string[] names2) {            
    return names1.Union(names2).ToArray(); ;            
} 
```

# javafx - JavaFX - 使用图像创建自定义按钮

> ID：10518458
> 
> 赞同：23
> 
> 时间：2012-05-09T14:45:40.000
> 
> 标签：javafx

我想创建一个自定义按钮，它有两种状态是否按下，比如切换按钮。我有两个图像可以做到这一点（按下和未按下），那么我如何创建按钮并用我的图像显示它？按钮必须采用图像的大小。
我没有使用 FXML。感谢您的帮助。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-09T19:38:31.177

有几种不同的方法可以做到这一点，我将概述我的最爱。

使用[ToggleButton](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ToggleButton.html)并对其应用自定义样式。我建议这样做是因为您所需的控件“就像一个切换按钮”，但看起来与默认的切换按钮样式不同。

我的首选方法是在 css 中为按钮定义图形：

```
.toggle-button {
  -fx-graphic: url('http://icons.iconarchive.com/icons/aha-soft/desktop-buffet/128/Pizza-icon.png');
}

.toggle-button:selected {
  -fx-graphic: url('http://icons.iconarchive.com/icons/aha-soft/desktop-buffet/128/Piece-of-cake-icon.png');
} 
```

或使用附加的 css 定义背景图像。

```
// file imagetogglebutton.css deployed in the same package as ToggleButtonImage.class
.toggle-button {
  -fx-background-image: url('http://icons.iconarchive.com/icons/aha-soft/desktop-buffet/128/Pizza-icon.png');
  -fx-background-repeat: no-repeat;
  -fx-background-position: center;
}

.toggle-button:selected {
  -fx-background-image: url('http://icons.iconarchive.com/icons/aha-soft/desktop-buffet/128/Piece-of-cake-icon.png');
} 
```

我更喜欢 -fx-graphic 规范而不是 -fx-background-* 规范，因为设置背景图像样式的规则很棘手，并且设置背景不会自动将按钮调整为图像大小，而设置图形则可以。

还有一些示例代码：

```
import javafx.application.Application;
import javafx.scene.*;
import javafx.scene.control.ToggleButton;
import javafx.scene.layout.StackPaneBuilder;
import javafx.stage.Stage;

public class ToggleButtonImage extends Application {
  public static void main(String[] args) throws Exception { launch(args); }
  @Override public void start(final Stage stage) throws Exception {
    final ToggleButton toggle = new ToggleButton();
    toggle.getStylesheets().add(this.getClass().getResource(
      "imagetogglebutton.css"
    ).toExternalForm());
    toggle.setMinSize(148, 148); toggle.setMaxSize(148, 148);
    stage.setScene(new Scene(
      StackPaneBuilder.create()
        .children(toggle)
        .style("-fx-padding:10; -fx-background-color: cornsilk;")
        .build()
    ));
    stage.show();
  }
} 
```

这样做的一些优点是：

1.  您可以获得默认的切换按钮行为，并且不必通过添加自己的焦点样式、鼠标和键处理程序等来自己重新实现它。
2.  如果您的应用程序被移植到不同的平台，例如移动设备，它将开箱即用地响应触摸事件而不是鼠标事件等。
3.  您的样式与您的应用程序逻辑分离，因此更容易重新设计您的应用程序。

另一种方法是不使用 css 并仍然使用 ToggleButton，但在代码中设置图像图形：

```
import javafx.application.Application;
import javafx.beans.binding.Bindings;
import javafx.scene.*;
import javafx.scene.control.ToggleButton;
import javafx.scene.image.*;
import javafx.scene.layout.StackPaneBuilder;
import javafx.stage.Stage;

public class ToggleButtonImageViaGraphic extends Application {
  public static void main(String[] args) throws Exception { launch(args); }
  @Override public void start(final Stage stage) throws Exception {
    final ToggleButton toggle      = new ToggleButton();
    final Image        unselected  = new Image(
      "http://icons.iconarchive.com/icons/aha-soft/desktop-buffet/128/Pizza-icon.png"
    );
    final Image        selected    = new Image(
      "http://icons.iconarchive.com/icons/aha-soft/desktop-buffet/128/Piece-of-cake-icon.png"
    );
    final ImageView    toggleImage = new ImageView();
    toggle.setGraphic(toggleImage);
    toggleImage.imageProperty().bind(Bindings
      .when(toggle.selectedProperty())
        .then(selected)
        .otherwise(unselected)
    );

    stage.setScene(new Scene(
      StackPaneBuilder.create()
        .children(toggle)
        .style("-fx-padding:10; -fx-background-color: cornsilk;")
        .build()
    ));
    stage.show();
  }
} 
```

基于代码的方法的优点是，如果您不熟悉 css，则不必使用它。

为了获得最佳性能和便于移植到未签名的小程序和 webstart 沙箱，请将图像与您的应用程序捆绑在一起，并通过相对路径 url 引用它们，而不是从网上下载它们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T15:12:56.343

您只需要创建自己的从父类继承的类。在其上放置一个 ImageView，在 mousedown 和 mouse up 事件上只需更改 ImageView 的图像。

```
public class ImageButton extends Parent {

    private static final Image NORMAL_IMAGE = ...;
    private static final Image PRESSED_IMAGE = ...;

    private final ImageView iv;

    public ImageButton() {
        this.iv = new ImageView(NORMAL_IMAGE);
        this.getChildren().add(this.iv);

        this.iv.setOnMousePressed(new EventHandler<MouseEvent>() {

            public void handle(MouseEvent evt) {
                iv.setImage(PRESSED_IMAGE);
            }

        });

        // TODO other event handlers like mouse up

    } 

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-16T11:40:40.997

前两个答案的组合起到了作用。谢谢。继承自 Button 的新类。注意：应该在显示按钮之前调用 updateImages()。

```
import javafx.event.EventHandler;
import javafx.scene.control.Button;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.input.MouseEvent;

public class ImageButton extends Button {

    public void updateImages(final Image selected, final Image unselected) {
        final ImageView iv = new ImageView(selected);
        this.getChildren().add(iv);

        iv.setOnMousePressed(new EventHandler<MouseEvent>() {
            public void handle(MouseEvent evt) {
                iv.setImage(unselected);
            }
        });
        iv.setOnMouseReleased(new EventHandler<MouseEvent>() {
            public void handle(MouseEvent evt) {
                iv.setImage(selected);
            }
        });

        super.setGraphic(iv);
    }
} 
```

# html - 在 IE8 和 IE9 的同一行中显示文本输入和密码输入元素

> ID：10518459
> 
> 赞同：0
> 
> 时间：2012-05-09T14:45:40.260
> 
> 标签：html, css, internet-explorer-9

给出以下简单代码

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Untitled Document</title>
</head>
<body>
  <input type="text">
  <input type="password">
</body>
</html> 
```

并在IE8或IE9中显示代码，我们会看到两个输入框在同一行，但它们的垂直位置差异很小，如下图所示： ![在此处输入图像描述](../Images/647a2fd1333aea54ca362d571efda83b.png)

这让我很困扰，我怎样才能消除这种差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:53:45.323

根据经验，ie9 开发者工具显示文本输入为 47.24 像素宽 x 15.33 像素高，边框为 2 像素；密码为 40.68px 宽 x 16.09px 高，边框为 2px。如此处所示

[http://jsfiddle.net/Tp7FW/](http://jsfiddle.net/Tp7FW/)

你可以申请

```
input {
     height:20px;
} 
```

或类似的东西让你所有的输入都是相同的大小（高度），如此处所示 [http://jsfiddle.net/Tp7FW/1/](http://jsfiddle.net/Tp7FW/1/)

# objective-c - 您可以缓存数据以供以后离线查看吗？

> ID：10518462
> 
> 赞同：0
> 
> 时间：2012-05-09T14:45:46.723
> 
> 标签：objective-c, ios, caching

我制作了一个应用程序，当连接到互联网时，它会从 ftp 服务器下载视频、pdf、图像。它当前将数据存储在文档目录中（例如，它可以是 50mb 左右）。它工作正常。

现在我有一种感觉，这违反了苹果的指导方针，该应用程序将被应用商店拒绝，我的感觉对吗？

现在，如果我读到的内容是正确的，如果此数据存储在缓存文件夹中，我的应用程序将被允许在应用程序商店中使用，对吗？现在我的问题是，我可以将存储目录更改为缓存吗？在尺寸方面有限制吗？当应用程序在没有连接的情况下关闭并重新启动时，文件是否仍然可用？设备或其他应用程序可以从缓存中删除数据吗？

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:02:22.873

我们的应用去年也因为同样的原因被拒绝了。但是，将内容下载到缓存文件夹而不是文档就足以让它被接受。不过，有一些事情要记住。

首先，这是必读的：[https ://developer.apple.com/icloud/documentation/data-storage/](https://developer.apple.com/icloud/documentation/data-storage/)

据我所知，缓存文件夹没有大小限制，因此您可以继续存储与以前在文档中相同的内容，没人会在意。另一方面，只要系统发现剩余空间太少，缓存文件夹就会被清空。

从文件系统编程指南：

> [缓存文件夹] 包含可以根据需要重新生成的缓存数据。应用程序不应该依赖缓存文件的存在。

我在某处读到（不幸的是丢失了源），存储在缓存中的数据保证在会话期间是持久的，也就是说，从用户启动/切换到您的应用程序直到它被发送到后台/终止。这意味着当您的应用程序处于活动状态时，很容易会发现一个完全空的缓存文件夹。你应该准备好处理它。

# xpath - 子元素的 xpath 表达式

> ID：10518465
> 
> 赞同：0
> 
> 时间：2012-05-09T14:46:03.647
> 
> 标签：xpath

我有一个这种类型的 xml 文件

```
 <a Text="">
   <b>
     <c Text=""/>
     < c Text=""/>
   </b>
    <b>
          <c/>
    </b>
 </a> 
```

所以，我需要一个像

```
 a
        c
        c 
```

你能帮我写一下 xpath 表达式吗？我需要忽略 b 的出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:55:19.617

假设您想要选择 a 节点和 b 节点，您可以使用以下表达式：

```
/a | /a/b/c 
```

这将选择所有 a 节点和（联合）所有 c 节点。请注意，它只会在文档中的指定级别上选择它们。你也可以选择类似的东西：

```
//a | //c 
```

也许您可以向我们提供有关此查询目的的更多信息？

您也可以使用 XQuery，如下所示：

```
<div class="breadcrumb">
{
for $d in doc("test.xml")/a/b/c return
<a href="somepage.php?id={fn:data($d/@Text)}">{fn:data($d/@Text)}</a>
}
</div> 
```

在以下输入

```
<a>
  <b>
    <c Text="Cat1" />
    <c Text="Cat2" />
    <c Text="Cat3" />
  </b>
  <b>
    <c Text="Cat4" />
    <c Text="Cat5" />
  </b>
</a> 
```

你会得到这个输出：

```
<div class="breadcrumb">
    <a href="somepage.php?id=Cat1">Cat1</a>
    <a href="somepage.php?id=Cat2">Cat2</a>
    <a href="somepage.php?id=Cat3">Cat3</a>
    <a href="somepage.php?id=Cat4">Cat4</a>
    <a href="somepage.php?id=Cat5">Cat5</a>
</div> 
```

# c# - log4net AdoNetAppender 未在 Web 应用程序中登录到 sql azure db

> ID：10518468
> 
> 赞同：2
> 
> 时间：2012-05-09T14:46:08.750
> 
> 标签：c#, asp.net, sql, log4net, azure-sql-database

我一直在尝试让 log4net 在我的 asp.net Web 应用程序中将任何信息或错误记录到我的 SQL Azure 数据库中，但没有成功或任何明显的错误。我正在尝试将 ADONetAppender appender 与以下 web.config 一起使用：

```
<configuration>
  <configSections>
    <section name="log4net"
         type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"
         />
  </configSections>
  <log4net>
    <appSettings>
      <add key="log4net.Internal.Debug" value="true"/>
    </appSettings>
    <appender name="AdoNetAppender" type="log4net.Appender.AdoNetAppender">
      <bufferSize value="1" />
      <connectionType value="System.Data.SqlClient.SqlConnection, System.Data,
 Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      <connectionString value="Server=;Trusted_Connection=False;Encrypt=True;MultipleActiveResultSets=True" />
      <commandText value="INSERT INTO Log ([Date],[Thread],[Level],[Logger],[Message],[Exception]) 
 VALUES (@log_date, @thread, @log_level, @logger, @message, @exception)" />

      <parameter>
        <parameterName value="@log_date" />
        <dbType value="DateTime" />
        <layout type="log4net.Layout.RawTimeStampLayout" />
      </parameter>
      <parameter>
        <parameterName value="@thread" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%thread" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@log_level" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%level" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@logger" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%logger" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@message" />
        <dbType value="String" />
        <size value="4000" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%message" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@exception" />
        <dbType value="String" />
        <size value="2000" />
        <layout type="log4net.Layout.ExceptionLayout" />
      </parameter>
    </appender>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="ADONetAppender" />
    </root>
  </log4net> 
```

……

在我的 global.asax Application_Start 我打电话

```
 void Application_Start(object sender, EventArgs e)
            {
                // Code that runs on application startup
                log4net.Config.XmlConfigurator.Configure();

            } 
```

然后尝试记录：

```
 readonly ILog _logger = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType);

 protected void Button1_Click(object sender, EventArgs e)
    {
        if (_logger.IsInfoEnabled)
            _logger.Info("Performance sensitive Info message");
        _logger.Info("testing web role into Poqlogging");
        _logger.Error("new error",new Exception("new exception"));
    } 
```

据我所知，所有这些都无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:15:25.013

使用 log4net 和 SQL Azure 是在 Azure 中执行应用程序日志记录的好方法。以下是一些可以尝试的事情：

1) 您的连接字符串应如下所示：

```
<connectionString value="data source=ServerName;initial catalog=DBName;integrated security=false;persist security info=True;User ID=SQLUsername;Password=SQLPassword" /> 
```

2) applog4net.Internal.Debug 键应该放在 web.config 的 appSettings 部分，而不是 log4net 部分。例如

```
...
</configSections>
<appSettings>
  <add key="log4net.Internal.Debug" value="true"/>
</appSettings>
<log4net>
... 
```

3) log4net 内部调试消息被写入 System.Diagnostics.Trace 系统。在对 log4net 配置问题进行故障排除时，我喜欢通过将以下内容添加到我的 web.config 来将跟踪输出重定向到一个文件（请注意，您必须确保您的 ASP.Net 服务器进程可以写入该文件）：

```
<system.diagnostics>
  <trace autoflush="true">
    <listeners>
      <add
        name="textWriterTraceListener"
        type="System.Diagnostics.TextWriterTraceListener"
        initializeData="c:\temp\log4net.txt" />
    </listeners>
  </trace>
</system.diagnostics> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T16:46:41.510

根据您在上面提供的信息，可能会出现一些问题。为了更好地理解问题，需要更多信息。

我可以提供一些您可以验证的检查点：

1.  你在哪里运行这个应用程序？在计算模拟器或 Windows Azure 上
2.  如果它在 Compute Emulator 中运行，请在 SQL Azure 上设置防火墙以接受来自开发机器的连接，反之亦然。
3.  如果此应用程序在 Windows Azure 中运行，您是否修改了防火墙策略
4.  无论您在何处运行此应用程序，您都必须首先证明可以连接到 SQL Azure，因为应用程序本身无法做到这一点，您必须设置环境，以便与 SQL Azure 的连接正常工作
5.  使用 Log4Net 我总是做两件事：
    1.  我总是首先验证我的 Log4Net 设置/代码是否使用本地日志记录工作文件
    2.  确认上述内容后，我跳到下一步并添加代码/配置以将日志记录更改为其他目的地。
6.  如果以上所有内容均已验证，则查找运行应用程序的网络跟踪（计算模拟器或 Windows Azure），以获取指向 SQL Azure 服务器的任何网络数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T18:02:30.340

并且我同意; AdoNetAppender 在按照上面的答案 #2 指定连接时工作。此外，如果您远离 Azure SQL 数据库，请务必创建防火墙源 IP 规则以允许您的 IP 地址连接到 Azure SQL 数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-08T15:23:38.070

在解决这个问题的过程中，我发现 Azure SQL 表**必须**有一个**CLUSTERED INDEX**。根据标准日志表，它应该是这样的。

```
CREATE TABLE [dbo].[Log] (
[Id] [int] IDENTITY (1, 1) NOT NULL,
[Date] [datetime] NOT NULL,
[Thread] [varchar] (255) NOT NULL,
[Level] [varchar] (50) NOT NULL,
[Logger] [varchar] (255) NOT NULL,
[Message] [varchar] (4000) NOT NULL,
[Exception] [varchar] (2000) NULL,
CONSTRAINT [PK_Log] PRIMARY KEY CLUSTERED ([Id] ASC)
) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-10T12:52:02.393

似乎您需要编写一个自定义附加程序来完成这项工作

[http://cloudshaper.wordpress.com/2010/10/30/logging-with-log4net-on-the-azure-platform/](http://cloudshaper.wordpress.com/2010/10/30/logging-with-log4net-on-the-azure-platform/)

# java - 是否有任何范围滑块来选择时间段？

> ID：10518478
> 
> 赞同：3
> 
> 时间：2012-05-09T14:46:29.920
> 
> 标签：java, swing

对于我的应用程序，我需要一个范围滑块一段时间。那就是我有一个开始日期和一个结束日期。现在我想创建一个范围滑块，允许用户选择开始日期和结束日期之间的范围。

在自己编码之前，我想检查是否已经有类似的东西可用，但是使用谷歌我只找到了数字的范围滑块。

有人可以推荐一个时间范围滑块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:57:42.227

如果您不是特别关注单个滑块，请尝试此操作。

[日期滑块](http://www.java2s.com/Code/Java/Swing-JFC/Dateslider.htm)

# java - ListView 中的片段 - Wicket

> ID：10518481
> 
> 赞同：0
> 
> 时间：2012-05-09T14:46:33.087
> 
> 标签：java, wicket

我正在尝试在重复的 li 组件中添加片段：

```
<ul>
<li wicket:id="listView">HERE GOES MY FRAGMENT</li>
</ul> 
```

填充列表视图的代码如下：

```
@Override
protected void populateItem(final org.apache.wicket.markup.repeater.Item<Message> item) {
                    Message msg = item.getModelObject();
                    log.info("Adding message fragment to markup: " + item.getMarkupId());
                    item.add(new MessageFragement(item.getMarkupId(), "messageFragment", this, msg));
} 
```

生成的预期代码是：

```
<ul>
<li .... wicket:id="listView></li>
<li .... wicket:id="listView></li>
....
</ul> 
```

但是我的片段没有添加，我收到了运行时检票口异常：

> 以下组件未能呈现。一个常见的问题是您在代码中添加了一个组件，但忘记在标记中引用它（因此该组件永远不会被渲染）。

为什么我不能使用项目标记 ID 作为我的片段的组件 ID？我现在可以通过在 li 上添加一个附加标签来轻松解决这个问题：

```
<ul><li wicket:id="listView"><div wicket:id="message"></div></li></ul> 
```

并将标记 ID“消息”添加到片段中。但我不想要它。我只想使用已经存在的 <li> 来托管我的片段，这甚至可能吗？

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:23:51.290

我想我找到了解决方案，或者更好的解决方法。

我确实在 <li> 中保留了 Fragment 的容器标签：

```
<ul>
<li wicket:id="listView"><div wicket:id="message">FRAGMENT</div></li>
</ul> 
```

之后在 MessageFragment 中，我只是在 Fragment 构造函数中设置为不使用**setRenderBodyOnly(true)**函数呈现容器标记：

```
public MessageFragement(String id, String markupId, MarkupContainer markupProvider, final Message message) {
            super(id, markupId, markupProvider, new Model<Message>(message));

            setRenderBodyOnly(true);
...
} 
```

结果和预期的一样：

```
<ul>
    <li wicket:id="listView" wicketpath="...listView_1">MessageFragment1</li>
    <li wicket:id="listView" wicketpath="...listView_2">MessageFragment2</li>
    <li wicket:id="listView" wicketpath="...listView_3">MessageFragment3</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:07:31.393

如果您想使用您的 li 列表条目作为片段的占位符，您至少需要为您的片段提供一个 wicket:fragment 应该在占位符中呈现。

但是，即使您将StripWicketTags 设置为false，这将导致您的标记中出现原始的wicket:id，该id 也不等于getMarkupId() 的返回，因为它们至少会获得一个随机后缀。也已经有一个组件附加到该 Id，因此无法将任何其他组件附加到它

# java - 由于使用 jnotify 或任何其他原因导致 jvm 崩溃

> ID：10518483
> 
> 赞同：-1
> 
> 时间：2012-05-09T14:46:38.777
> 
> 标签：java, filesystems, operating-system, jnotify

朋友们请帮助我的java程序在运行时崩溃。我正在使用 Jnotify 来监控驱动器。显示的错误是

![在此处输入图像描述](../Images/202dbdcae32426b99c8f52ad7c73f551.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:50:38.433

它清楚地表明创建表 Fdrive 时出错，因为它已经存在。尝试从数据库中删除该表（如果可能）并再次运行所有内容。

您应该注意错误消息，有时它们往往是非常自我描述的。

# asp.net - 从 ASP.NET 中的数据库自动生成的 ID

> ID：10518485
> 
> 赞同：1
> 
> 时间：2012-05-09T14:46:45.970
> 
> 标签：asp.net, sql, database, lambda, autonumber

我的表员工有一个主键。我将其命名为“IDS”。IDS 数据如：K-00001、K-00002 等。我想问的是，如何在 ASP.NET 中使这个 IDS 自动生成，而不是在 SQL 中使用触发器或函数？

我已经完成了这样的代码：

```
 DBRabbit _db = new DBRabbit();
            Employee k = new Employee();
            var row = (from r in _db.Employees
                       orderby r.IDS descending
                       select r).FirstOrDefault();
            var n = row.IDS.PadLeft(5, '0');    
            IDSText.Text = n.ToString(); 
```

而且我在思考如何将'n'添加到+ 1时被卡住了。因为当我这样写时：

```
var n = row.IDS.PadLeft(5, '0')+1; 
```

（最后一条记录是 K-00010）
结果是 K-000101 如何在不更改数据库或使用 SQL 服务器脚本/查询的情况下使其成为 K-00011？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:00:07.280

正如詹姆斯所说，你最好让你的 IDS 列自动递增。此外，如果您需要另一列用于`K-00010`, `K-00011`,... 我建议您使用具有以下公式的计算列

```
'K-' + cast( right([IDS]+(100000),(5)) as varchar(5)) 
```

编辑：公式更正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:53:37.307

使列自动递增。根据经验，您*永远不*应该手动增加主键——这只是在乞求问题。正确的事件顺序会损害这种逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T15:00:15.433

只需在某处有一个自动 inc 整数（首选 DB），然后用

```
String.Concat("K-",KeyValue.ToString().PadLeft(5,'0'); 
```

你的方式很混乱，墨菲几乎保证有机会玩你的头。只是不要做你正在做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T14:53:33.907

尝试：

```
var n = (Convert.ToInt32(row.IDS) + 1).ToString().PadLeft(5, '0'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T15:00:46.557

你在上面使用javascript吗？如果是这样，请尝试使用

var n = (number(row.ids.substring(2))+1).toString().PadLeft(5,'0')

替代功能是删除“k-”

# android - 如何通过telnet发送数据？

> ID：10518488
> 
> 赞同：0
> 
> 时间：2012-05-09T14:46:50.027
> 
> 标签：android, telnet

我会使用 telnet 向安装在 Android 模拟器上的活动服务发送一个简单的字符串。显然这个服务是我自己开发的，如果需要，我也可以修改。

`Service`如何通过 telnet向我发送字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:02:06.510

更好的问题是你如何接收这串数据？
正如 Depado 已经回答的那样，如果您有在 android 模拟器端侦听的套接字服务器，例如 localhost（192.168.1.10）和特定端口（例如 8000）上的 tcp 服务器，那么您可以尝试 telnet：

```
telnet 192.168.1.10 8000 
```

例如 192.168.1.10 应该是绑定到 android 模拟器的网络 IP 地址，但我不确定这部分是如何完成的。

**更新**
如此处所述： http: [//developer.android.com/guide/developing/devices/emulator.html](http://developer.android.com/guide/developing/devices/emulator.html)：

> 如果您想访问在您的开发机器的环回接口（也就是您机器上的 127.0.0.1）上运行的服务，您应该使用特殊地址 10.0.2.2 来代替。

另请阅读部分：*模拟器网络*。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:48:47.050

通过 telnet 连接到您的服务，然后输入您想要的内容，然后输入 enter，它将向您的应用程序的侦听器发送一个字符串。（这就是telnet在我脑海中的工作方式，但也许我错了）

# image - 为什么 Firefox 似乎没有缓存图像？

> ID：10518493
> 
> 赞同：15
> 
> 时间：2012-05-09T14:46:59.453
> 
> 标签：image, firefox, caching, header

编辑：下面提供的答案。

几天来，我一直在努力理解为什么 Mozilla Firefox 总是无法从其缓存中检索图像，而不是每次我重新加载页面时都获取新副本。

谷歌浏览器似乎没有这个问题，但这是因为在 Chrome 中刷新页面不会强制它重新加载图像（除非使用 CTRL-F5）。

下面我已经回答了我自己的问题并添加了一些额外的信息，我希望这些信息可以帮助其他人节省一些时间来解决这个问题。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-11T14:57:34.847

谢谢kapep，很好的建议。不知道如何表达一个问题 - 但我可以回答我自己的问题！

首先要确保图像是可缓存的，您必须检查响应标头以确保将以下标头设置为有效值：

*   'Cache-Control' 设置为私有或公共。
*   'Expires' 是一个以正确格式表示的未来日期。（例如，格林威治标准时间 2012 年 6 月 21 日星期四 06:20:49）
*   “Last-Modified”不比“Date”标头更新。
*   “内容处置”未设置为“附件”；

如果您确信标头设置正确并且图像似乎仍然没有从缓存中到达，请确保以下内容：

*   您不是 F5 刷新页面以检查缓存，因为如果您刷新，Firefox 将获取图像的新副本。确保您通过导航到另一个页面并重新访问同一页面来重新加载您的页面（这将是您的一个用户的正常行为）。
*   在您的 about:config 中（只需在地址栏中键入即可访问隐藏设置） browser.cache.memory.enable = true 和 browser.cache.disk.enable = true

# database - TypoScript：在不使用 `pidInList` 选项的情况下进行横向 MySQL 查询

> ID：10518494
> 
> 赞同：2
> 
> 时间：2012-05-09T14:47:03.003
> 
> 标签：database, typo3, typoscript

正如[TYPO3 wiki 上提到的](http://docs.typo3.org/typo3cms/TyposcriptReference/Functions/Select/Index.html)，我们可以使用 TypoScript 进行查询：

```
page.60 = CONTENT
page.60 {
   table = tt_content
   select {
       pidInList = 73
       where = header != ###whatever###
       orderBy = ###sortfield###
       markers {
         whatever.data = GP:first
         sortfield.value = sor
         sortfield.wrap = |ting
       }
   }
} 
```

对我来说不方便的是参数pidInList。即使我们没有使用它，脚本也会在查询中用 pid替换*当前页面 id 。*有没有办法让它更简单，例如，实现这样简单的查询：

```
select title from pages where uid=100; 
```

什么是最简单的 TypoScript 等价物？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:36:16.620

据我所知`pidInList`是必需的。解决方法是将其设置为“0”并使用该`recursive`属性。

```
page.60 = CONTENT
page.60 {
   table = tt_content
   select {
       pidInList = 0
       recursive = 99
       where = header != ###whatever###
       orderBy = ###sortfield###
       markers {
         whatever.data = GP:first
         sortfield.value = sor
         sortfield.wrap = |ting
       }
   }
} 
```

**注意**：如果您担心性能影响并且您纯粹通过其 UID 选择记录，请考虑改用该`RECORDS`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:43:00.723

对于您的示例：

```
SELECT title FROM pages WHERE uid=100; 
```

最简单的 TypoScript 等价物是：

```
page.60 = RECORDS
page.60 {
    tables = pages
    source = 100
    dontCheckPid  = 1
    conf.pages = TEXT
    conf.pages.field = title
    } 
```

请注意，该`source`参数是必需的。对于更灵活的查询，我建议编写一个快速的[userFunc](http://www.typo3wizard.com/en/snippets/common-problems-and-solutions/simple-userfunc.html)。

# ios - 当我为 iPhone 项目创建 .ipa 或二进制文件时，图像消失了

> ID：10518497
> 
> 赞同：2
> 
> 时间：2012-05-09T14:47:18.417
> 
> 标签：ios, xcode, uiimage, ios5, testflight

我在我的 xcode 项目中使用了一个简单的图像。

使用普通屏幕版本（以及视网膜显示版本'@2x.png'实际上在视网膜显示上）一切都很好。

```
UIImage * image1 = [UIImage imageNamed:@"myimage.png"]; 
```

然后我在按钮上使用该图像。当我在模拟器或 iPhone 3g 和其他设备上使用 xcode 进行测试时，图像会出现。但是当我通过 testflight 或从应用商店测试我的应用时，图像消失了。

我努力了：

*   清理整个项目
*   替换图像
*   更改代码以以不同的方式实现该图像
*   使用不同的图像
*   以正常、恢复模式和 dfu 模式恢复非视网膜显示设备
*   祈祷 =(

任何人都知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:56:56.637

您可能已经这样做了，但是您是否检查过您的目标>构建阶段以确保在“复制捆绑资源”中该图像实际上正在被复制？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:37:43.637

问题可能是图像在应该是**strong时被****弱**指针引用。在**发布**模式下，一些优化已经完成，内存的释放比在**调试**模式下更积极，这就是为什么只有在将项目存档以在 TestFlight 或 AppStore 上分发（内置发布模式）后才会出现问题的原因......

 ******* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T21:32:36.860

也许这很愚蠢，但您是否尝试过使用 JPG 而不是 PNG？只是为了放弃PNG优化器搞砸某些东西的可能性......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:00:37.320

图像是否包含在您的编译源（编译包资源）中？

![在此处输入图像描述](../Images/7de090e9622cd95f185e049400274ea7.png)******

# javascript - 切换脚本需要更改

> ID：10518503
> 
> 赞同：-4
> 
> 时间：2012-05-09T14:47:33.587
> 
> 标签：javascript, jquery, html, css

我需要更改此脚本，以便我可以单击我的`slideshow-expand`向下箭头按钮并让它在单击时上下切换框的高度。现在它适用于整个框单击，但我希望它在箭头上，因为它是幻灯片放映，每次单击上一个或下一个箭头时，它都会切换框高度

这是脚本：

```
 $("#slideshow-box").click((function() {
                var i = 0;
                return function() {
                    $(this).animate({
                        height: (++i % 2) ? 166 : 115
                    }, 200);
                }
            })());
            }); 
```

这是html：

```
<div id="slideshow-box">
    <div id="slideshow-stage">
       <img src="images/slideshowimage.png">
       <img src="images/slideshowimage2.png">
       <img src="images/slideshowimage3.png">
    </div>

<div id="slideshow-prev"></div>
<div id="slideshow-next"></div>
<div id="slideshow-expand"></div> 
```

这是CSS：

```
#slideshow-box {
    background-color:#CCC;
    position: absolute;
    top:129px;
    width:883px;
    height:115px;
    overflow:hidden;
    z-index:1;
}

#slideshow-stage {
    position: absolute;
    top:0;
    width:883px;
    height:115px;
    z-index:1;
    margin-left: auto;
    margin-right: auto;
}

#slideshow-stage>img {
    position:absolute;
    left:0;
    top:0;  
}

#slideshow-prev {
    position: absolute;
    top:40px;
    left:10px;
    background-image: url(images/arrows_left.png);
    background-repeat:no-repeat;
    width:22px;
    height:42px;
    opacity: .4;
    z-index:50;
}

#slideshow-prev:hover {
    opacity: 10;
    cursor:pointer;
}

#slideshow-next {
    position: absolute;
    top:40px;
    right:10px;
    background-image: url(images/arrows_right.png);
    background-repeat:no-repeat;
    width:22px;
    height:42px;
    opacity: .4;
    z-index:50;
}

#slideshow-next:hover {
    opacity: 10;
    cursor:pointer;
}

#slideshow-expand {
    background-image: url(images/arrows_down.png);
    background-repeat:no-repeat;
    width:28px;
    height:14px;
    position: absolute;
    bottom:10px;
    left:441px;
    opacity: .4;
    z-index:50;

}

#slideshow-expand:hover {
    position: absolute;
    bottom:10px;
    left:441px;
    opacity: 10;
    cursor:pointer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:49:53.097

您是否尝试过更改：

```
 $("#slideshow-box").click((function() ... 
```

至

```
 $("#slideshow-expand").click((function() ... 
```

**编辑**

重新阅读后，您可能需要将其更改为：

```
 $("#slideshow-expand").click((function() {
    var i = 0;
    return function() {
        $("#slideshow-box").animate({
           height: (++i % 2) ? 166 : 115
           }, 200);
          }
         })());
   }); 
```

请注意，这里的区别在于我们没有使用`this`，因为当您单击 时`slideshow-expand`，`slideshow-box`应该是动画的..

# php - PHP - MVC 框架 - 每个操作最多包含 6 个

> ID：10518507
> 
> 赞同：0
> 
> 时间：2012-05-09T14:47:43.277
> 
> 标签：php, performance, model-view-controller, readability

我正在开发一个小型 PHP-MVC 框架，其主要原则是使用和调试的简单性，以及可移植性、性能（最重要的是）和超简单的学习曲线。

好的，所以事情是，到目前为止，这些是每个操作中几乎是强制性的（对于大多数 MVC 框架）：

```
- Controller.php (the controller class)
- View.php (the view class)
- Model.php (the model class, in my case I try no to use more than 2 models per action)
- template.php (the HTML template which is loaded by the View)
- language.php (a language file that loads translations) 
```

在我的框架中，路由器和控制器在同一个文件中，因为我并没有真正使用路由器，我只是从 _GET 和 _POST 中解析动作所以我的想法是尝试，无论调用什么动作，从不（或几乎从不）做超过 6 个包含（include()）的事情。这样做的想法是保持最佳的可读性和性能。

你们怎么看？你认为这是个好主意吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:57:14.580

许多包含都没有问题，至少对于像 xcache 或 apc 这样的操作码缓存扩展没有问题。他们将类缓存在内存中并保存以供以后使用（几乎即时）。

您应该计划与 uml 之类的类交互，并且更喜欢类和方法的单一职责而不是使用较少的类和方法。

如果你喜欢 mvc，你可能想看看 h-mvc，因为它启用了使用 mvc 的分层控制器调用。您还应该尝试将视图与模板引擎分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:45:24.760

首先使用包含的目的是缩小您需要的范围，这样您就不会结束运行代码或定义您根本不会使用的函数。许多轻量级框架都建立在这个想法之上：“仅在需要时使用”。如果您的框架只需要 6 个文件，那是粗略的，确保它会稍微清理代码，但随后您会遇到其他问题，例如加载时间、功能、实用性、可重用性、内存、可读性、调试、可维护性……这不切实际在我看来，只强迫自己减少到 6 个文件。

# java - 编写单元测试（java）的最佳位置？

> ID：10518508
> 
> 赞同：0
> 
> 时间：2012-05-09T14:47:46.053
> 
> 标签：java, unit-testing, testing, jvm

在与测试方法相同的类中编写单元测试或在另一个类（相同包或外部包）中编写单元测试有什么区别？这些测试地点的优点或缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T14:52:35.327

如果您在单独的课程中进行测试，您可以

*   **使用一个众所周知的单元测试框架**，让你的生活更轻松——我所知道的所有这些都假设你将测试与测试代码分开
*   拥有尽可能多的测试用例（不会使您的生产类变得庞大且难以管理 - 请注意，在管理良好的项目中，单元测试代码与生产代码一样多，并且可能比生产更多的公共测试方法API 方法，最终可能会驱动你的 IDE 的 API 索引器，然后你自己，疯狂......）
*   **在没有测试的情况下发布您的生产代码**- 包括您的测试依赖项（没有人喜欢将大量仅用于测试的 3rd 方东西捆绑到产品部署包中，对吗？）
*   在不接触生产代码本身的情况下更改测试（这将使 SCM 中的审计和更改控制变得更加容易，因为将生产代码/数据中的更改与测试中的更改分开总是很简单的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:54:03.647

最佳实践是将测试与它们正在验证的代码分开。原因很简单：您不想将测试与您的应用程序打包在一起。应用程序应该是干净的。测试应该从外部验证功能。

测试通常有额外的依赖项（例如测试框架、模型库等）。

常见的做法是将源代码`src/main/java`放在`src/tests/java`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:51:59.140

在分离的类中编写的优点是您可以将测试与代码分开。例如使用 maven：
1\. 构建一切
2\. 执行包括`**/*Test*.java pattern`

我什至不知道如何在与代码相同的类中进行单元测试...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T14:53:39.393

测试方法可以测试您的代码。将它们放在被测试的类中会使类的 API 变得混乱，并使类的字节码和依赖项变得比必要的大。

如果我想使用你的 Calculator 类，我不需要`testPlusWorks()`and`testMinusWorks()`测试方法。我只需要`plus()`和`minus()`。如果`testPlusWorks`依赖于 JUnit 或 Mockito 库中的某个类，我不希望在生产环境中使用这些依赖项：它们仅在测试类时有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T14:53:55.667

这个问题没有“正确”的答案。

在同一个类中编写：允许您测试私有方法，但会弄乱代码。

在同一个项目中编写：允许您测试内部方法/逻辑，但会弄乱项目并延长编译时间。

外部编写：阻止您测试项目内部方法/类，但保持测试干净并在您的“生产”编码器外部。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T14:54:16.347

我发现最好将单元测试完全写在不同的源文件夹中，但将它们保存在同一个包中，因为您仍然可以访问打包（默认）范围的方法和变量。

1.  这使您的测试保持在一起，以便于导航和健全
2.  当您进行构建时，您可以排除 jar/war/ear 中的测试类。

# php - 在 symfony2 中覆盖 parameters.ini

> ID：10518509
> 
> 赞同：1
> 
> 时间：2012-05-09T14:47:47.580
> 
> 标签：php, symfony

我的 app/config/parameters.ini 中有一个“语言环境”设置，我想在我的包中覆盖它。

我试图在 NewAcme/MyBundle/Resource/config/parameters.ini 中创建 parameters.ini，但它似乎没有选择这个设置。

我使用 $this->container->getParameter('locale') 检索它，但我得到了原始值。

有任何想法吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:52:05.533

app/config 中的设置*旨在*覆盖捆绑配置。

解决这个问题的最好方法是为你的包使用你自己的配置。有关如何执行此操作，请参阅本食谱章节：http: [//symfony.com/doc/current/cookbook/bundles/extension.html](http://symfony.com/doc/current/cookbook/bundles/extension.html)

# excel - 使用字典和书签将数据从 Excel 传输到 Word

> ID：10518511
> 
> 赞同：1
> 
> 时间：2012-05-09T14:47:54.070
> 
> 标签：excel, vba, ms-word

我正在寻找一种将电子表格中的数据（通过使用字典插件）传输到word文档中的设置书签的方法。

最终产品将需要遍历电子表格中的每一行数据-然后-将数据填充到word中的当前书签中-然后-删除以前的书签-然后-继续循环...

但是，如果有人可以帮助我一次将数据从 excel 传递到 word 中的书签，我将非常感激，因为我可以轻松地从那里运行它。

这是我到目前为止所拥有的（我被困在代码的底部！）：

```
Dim columnLocations As New Dictionary
Dim bookmarkOrder As New Dictionary
Dim solutionWorkbook As Workbook

Sub Main()
  Set solutionWorkbook = ActiveWorkbook

  columnLocations.RemoveAll
  bookmarkOrder.RemoveAll

  Call PopulateColumnLocations
  Call PopulateBookmarkMappings
  Call DictionaryData
End Sub

Sub PopulateColumnLocations()
  'Loop through row1 to populate dictionary. key = header name, value = column number
  Sheets("Data").Select
  For Each cell In solutionWorkbook.Worksheets("Data").Range("A10", Range("A10").End(xlToRight)).Cells
    columnLocations.Add Trim(cell.Value), cell.Column
  Next
End Sub

Sub PopulateBookmarkMappings()
  'Loop through row1 to populate dictionary. key = header name, value = collumn number
   Sheets("Mappings").Select
  Dim Var As Object
  Dim Key As Object

  For Each cell In solutionWorkbook.Worksheets("Mappings").Range("A2", Range("A2").End(xlDown)).Cells
    Debug.Print Cells(cell.Row, 2).Value
    Debug.Print cell.Value
    bookmarkOrder.Add Trim(cell.Value), Cells(cell.Row, 2).Value 'the 2 is the column which has the bookmark name in
  Next
End Sub

Sub DictionaryData()
  Sheets("Data").Select
  Dim count As Integer
  count = 1
  'Loop through all rows in input data sheet
  For Each cell In solutionWorkbook.Worksheets("Data").Range("A11", Range("A11").End(xlDown)).Cells
    Dim TweetSummary As String
    TweetSummary = solutionWorkbook.Sheets("Data").Cells(cell.Row, columnLocations.Item("Summary")).Value

    Dim TweetDate As String
    TweetDate = solutionWorkbook.Sheets("Data").Cells(cell.Row, columnLocations.Item("Date")).Value

    Dim TweetURL As String
    TweetURL = solutionWorkbook.Sheets("Data").Cells(cell.Row, columnLocations.Item("URL")).Value

    Dim TweetFollowers As String
    TweetFollowers = solutionWorkbook.Sheets("Data").Cells(cell.Row, columnLocations.Item("Twitter Followers")).Value

    Dim TweetFollowing As String
    TweetFollowing = solutionWorkbook.Sheets("Data").Cells(cell.Row, columnLocations.Item("Twitter Following")).Value

    Dim TweetTweets As String
    TweetTweets = solutionWorkbook.Sheets("Data").Cells(cell.Row, columnLocations.Item("Twitter Tweets")).Value

  Next
End Sub

Sub Worddoc()
  Dim LaunchWord As Object
  Dim tweetWord As Object
  Dim Path As String
  Dim tBookmark As Bookmark
  Path = solutionWorkbook.Path & "\B_watch_social_twitter_template.dot"

  Set LaunchWord = CreateObject("Word.Application")
  Set tweetWord = LaunchWord.Documents.Add(Path)

  tweetWord.Select

 ''IM STUCK HERE!!!
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:46:37.877

[http://www.dailydoseofexcel.com/archives/2004/08/13/automating-word/](http://www.dailydoseofexcel.com/archives/2004/08/13/automating-word/)

我认为这就是你所需要的。

# winforms - 模仿 ON_UPDATE_COMMAND_UI

> ID：10518517
> 
> 赞同：0
> 
> 时间：2012-05-09T14:48:05.397
> 
> 标签：winforms, mfc

我的问题是我无法修改对 ON_UPDATE_COMMAND_UI 做出反应的代码，并且我已将代码托管在 WinForms 中，因此无法正确路由消息。

我已经连接到我的 winform 主机中的空闲覆盖，但我不知道如何模仿该消息。

如果我想通过直接向目标发送消息来模仿 ON_UPDATE_COMMAND_UI，我将如何安排 WPARAM 和 LPARAM。

我查看了 MFC 的内容，它似乎根本没有发送消息，它直接从通过 CmdTarget 中的方法路由命令到手动搜索目标的消息映射。

因此，由于我没有推送真实消息的示例，因此我不知道该怎么做。

替代解决方案同样被接受！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:01:22.083

> 我查看了 MFC 的胆量，它似乎没有发送消息

这种说法是不正确的。当应用程序进入空闲状态时，Al 路由从发送到主窗口和所有后代的 WM_IDLEUPDATECMDUI 消息开始。

当菜单弹出以更新菜单项时也会发送它。我认为在 .NET 世界中实现它并不容易。

# magento - 您在哪里将商家电子邮件地址添加到 Magento 后端

> ID：10518519
> 
> 赞同：-3
> 
> 时间：2012-05-09T14:48:14.960
> 
> 标签：magento

您在哪里将商家的电子邮件地址添加到 Magento 后端，以便在有人购买时自动通知他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:14:58.837

`Sales Email`如果这是您的意思，您可以自动将副本发送到另一个地址。转到`System->Configuration->Sales->Sales Emails`并查看`Order`选项卡。

然后，您可以填写`Send Order Email Copy To`选项。

其他电子邮件的副本也可以设置为发送到此处的备用电子邮件地址。

# html - ruby on rails css 行为

> ID：10518530
> 
> 赞同：0
> 
> 时间：2012-05-09T14:48:53.993
> 
> 标签：html, ruby-on-rails, css, margin

我正在开发一个 Rails 项目版本 3，但我不知道这是怎么发生的。没有 CSS，因为这是一个全新的项目。

**为什么我得到这个保证金？** 这是铁路公约吗？

如果您不设置 reset-css-file，rails 是否使用任何标准 css？

**铬合金：**

![铬边距](../Images/95f816fa5b51ebdebb361b68978ca955.png)

**这就是rails生成html的方式：**

![html结构](../Images/0e4ec6d5d0c63b9bcc42eafffcac0f45.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T14:52:19.480

谷歌浏览器将默认属性应用`body { margin: 8px; }`到所有未指定自己的边距的网页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:51:57.557

许多浏览器具有默认样式，这些样式可能会更改元素的默认显示方式。如果您想从头开始，您应该考虑使用 CSS 重置样式表。我更喜欢Eric Meyer 的[这个](http://meyerweb.com/eric/tools/css/reset/)，但是你可以考虑使用其他的。

# javascript - Facebook fql 查询将其传递给 javascript 数组

> ID：10518533
> 
> 赞同：1
> 
> 时间：2012-05-09T14:48:59.243
> 
> 标签：javascript, arrays, facebook

我正在开发一个 Facebook 应用程序，我在这里有这个查询用户 ID 和其他信息的代码：

```
$users = $facebook->api(array(
  'method' => 'fql.query',
  'query' =>    "SELECT uid, last_name, pic_big"
             + " FROM user WHERE uid IN ("
             + "     SELECT uid" 
             + "     FROM page_fan"
             + "     WHERE page_id='411133928921438'" 
             + "         AND uid IN ("
             + "             SELECT uid2 FROM friend WHERE uid1 = me()"
             + "         )"
             + ")"
)); 
```

我需要将用户 ID 存储在一个数组中，这样我就可以只向生成的数组中的用户发送邀请。

```
function newInvite(){
    var user_ids = ["1368246891", "1206927311", "1149862205"];
    FB.ui({ 
      'method' : 'apprequests',
      'message': 'There goes the message for Penelope App users to invite their friends',
      'to'     : user_ids,
    });
} 
```

user_ids 必须在包含从 fql 查询生成的用户 ID 的数组中...

# javascript - 通过切换文件覆盖JS函数

> ID：10518534
> 
> 赞同：4
> 
> 时间：2012-05-09T14:49:03.617
> 
> 标签：javascript, ajax, user-interface, overriding

我知道，一旦加载了脚本，您就可以`<script>`从页面中删除元素，并且变量/函数仍然存在。

假设我有两个版本的函数，处理 UI，用户可以根据偏好在其中进行选择。

整个页面大量基于 AJAX。理想情况下，除非用户明确执行，否则它永远不应该重新加载，因此根本不可能调用`location.reload()`。

我的想法是这样的：

```
<script type="text/javascript" src="ui1.js" id="uiscript"></script> 
```

然后简单地改变：

```
document.getElementById('uiscript').src = ...; 
```

这两个文件的格式为：

```
var ui = function(...) {
    ...
}; 
```

所以我的问题是，在两个来源之间切换会可靠地改变功能吗？即使脚本被缓存了？我会更好地添加一个 cachebusting 查询字符串吗？或者我应该完全放弃这个想法并去做其他事情，例如在回调中重写函数而不是更改脚本的源代码？

关于这样的事情还有其他建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:58:46.780

为什么不使用对函数的引用？这里有一些伪代码：

```
function func1() { /* Do stuff one way */}
function func2() { /* Do stuff the other way */}
var ui = func1;

ui(some_param);

function myCallback() {
  // overwrite ui
  ui = func2;
  ui(some_param); // now calls func2
} 
```

这只是一个简单的例子。在现实世界中，您会使用对象将您的功能组合在一起。

也许你可以使用像[注入这样的 JavaScript 依赖注入框架](https://github.com/linkedin/inject)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:59:07.177

基本上，您尝试做的只是不好的做法 - 尝试用另一个版本覆盖一个 JS 版本。不要那样做。

如果您有一个函数的两个版本，则给它们不同的函数名称并将一个变量设置为活动的，然后使用该变量执行当前函数，如下所示：

```
function drawMethodOne() {}
function drawmethodTwo() {}
var currentDrawMethod = drawMethodOne; 
```

然后，在您的代码中，您将使用`currentDrawMethod`：

```
currentDrawMethod(); 
```

* * *

作为对您问题的更具体的回答，javscript 不会卸载以前加载的函数定义。加载更多重新定义现有函数名称的脚本只会将新函数分配给该现有名称，从而使先前函数的代码无法访问。因此，可以通过加载重新定义该函数名称的新 javascript 来替换以前的函数定义，但这通常是一种不好的做法，我可以想到许多调试会非常痛苦的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:00:36.773

作为快速测试，chrome 在更改源代码时甚至没有尝试为我加载第二个脚本。添加一个新的脚本元素似乎会拉入第二个 js 文件并覆盖该函数。如果这两个函数永远不会改变，您可能希望缓存它们并将“ui”变量重新分配给您需要的任何函数。我同意上面的不良做法评论，但我不知道您的用例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:02:18.620

坦率地说，我不能对这种行为说太多——据我所知，它只是不可预测且依赖于实现。一个更好的主意是使用类似下面的东西：

```
// usage: call skinHandler.setSkin({/* a skin object */)
// now having set the skin, call the skin's functions using skinHandler.skin.MyFunc();
app.skinHandler = function() {
    var oldSkin = null;
    this.skin = null;
    // call this after loading the skin object.
    this.setSkin = function(skin) {
        oldSkin = this.currentSkin;
        this.skin = skin;
    };
}; 
```

皮肤对象将包含用户界面所需的所有代码，并且因皮肤而异。现在，要使用它，您需要将每个皮肤/主题文件的功能包装在一个单独的对象中。

# html - 双边框样式不适用于 Outlook

> ID：10518539
> 
> 赞同：1
> 
> 时间：2012-05-09T14:49:28.680
> 
> 标签：html, css, outlook, outlook-2010

发送 html 电子邮件时，我正在尝试设置双边框来分隔表格上的某些行。

我的第一次尝试是内联样式：

```
style='border-top:double' 
```

使用 style='border-collapse:collapse'

它在 gmail 上运行良好。但在 Outlook 中，唯一的区别是空格而不是第二行。

另外，我试过

```
style='border-top:double windowtext 2px' 
```

和

```
style='border-top:3px double #CCC;' 
```

并且行之间仍然有一条线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:28:23.180

我找到了答案...

我必须为两行设置样式，我想在两者之间设置双线，在底部和顶部。在我测试的大多数浏览器上只使用一个。（IE 6 除外）

所以，这就是我的做法：

...

```
<table style='border-collapse: collapse'>
    <tr> 
      <td style='border-botton:double'> 1st row </td>
    </tr>
    <tr> 
      <td style='border-top:double'> 2nd row </td>
    </tr>
</table> 
```

...

# php - HTML/PHP 添加多个文本字段并将其全部放在 1 个字符串中

> ID：10518541
> 
> 赞同：1
> 
> 时间：2012-05-09T14:49:35.233
> 
> 标签：php, html, input

我正在创建一个表单，用户可以在其中输入某些信息。默认状态如下所示；

```
<div class="options">
<input type="text" name="option[]" />
<input type="text" name="content[]" />
</div> 
```

现在，通过单击按钮添加，我将添加两个具有相同名称的新字段，因此状态如下；

```
 <div class="options">
    <input type="text" name="option[]" />
    <input type="text" name="content[]" />
    <input type="text" name="option[]" />
    <input type="text" name="content[]" />
    </div> 
```

然后，我希望 PHP 最终创建一个字符串，如下所示；

```
valueOfFirstOption:valueOfFirstContent,valueOfSecondOption:valueOfSecondContent 
```

等等等等。从理论上讲，我应该能够添加无限数量的输入字段。

这可能是我想要实现的吗？或者我应该在输入字段中添加唯一名称？

任何提示或提示我应该怎么做？或者有人给我一个教程/示例代码？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:07:22.713

如果您可以在添加额外元素时在名称中设置索引，这会更好一些。

```
<div class="options">
  <input type="text" name="data[0][option]" />
  <input type="text" name="data[0][content]" />
  <input type="text" name="data[1][option]" />
  <input type="text" name="data[1][content]" />
</div>
<a href="#" onclick="addSet(); return false;">Add</a>
<script>
    var addSet = function() {
        var container = document.getElementsByClassName('options')[0];
        var numInputs = container.getElementsByTagName('input');
        var numSets = numInputs/2;
        var nextIndex = numSets;

        var newOption = document.createElement('input');
        newOption.name = 'data[' + nextIndex + '][option]';
        container.appendChild(newOption);

        var newContent = document.createElement('input');
        newContent.name = 'data[' + nextIndex + '][content]';
        container.appendChild(newContent);
    }
</script> 
```

然后，当您收到 POST 时，您可以遍历数据并处理 duplets

```
$pieces = array();

foreach ($_POST['data'] as $set)
    $pieces = $set['option'] . ':' . $set['content'];
}

// or
for ($i = 0; $i < count($_POST['data']); $i++) {
    $pieces[] = $_POST['data'][$i]['option'] . ':' . $_POST['data'][$i]['content'];
}

// then
$compiledString = implode(",", $pieces); 
```

# json - 从 json (dojo) 填充表单

> ID：10518542
> 
> 赞同：1
> 
> 时间：2012-05-09T14:49:36.093
> 
> 标签：json, dojo

我有一个 json`{"Name":"@@","Phone":"9999999999","EMail":"example@ex.com"}` 我想将这个对象的值填充到一个表单中......怎么做？这是表格

```
<form data-dojo-type="dojox.form.Manager" name="form" id="form" method="post">
<tr><td>
<input type="text" required="true" name="Name" id="Name" data-dojo-type="dijit.form.ValidationTextBox"/></tr></td>
<tr><td>
<input type="text" name="Phone" id="Phone" data-dojo-type="dijit.form.ValidationTextBox"/></tr></td>
<tr><td>
<input type="text" name="Email" id="Email" data-dojo-type="dijit.form.ValidationTextBox"/></tr></td>
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:47:37.173

要在表单中设置值，请尝试以下操作：-

```
var obj = {"Name":"@@","Phone":"9999999999","EMail":"example@ex.com"};
dijit.byId('form').set('value',obj); 
```

我知道它晚了，但它的工作： -

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:18:04.477

`dojox.form.Manager`包括`dijit.form._FormMixin`提供 .setValues 功能。您应该能够`form.setValues`使用您的 JSON 对象进行调用。这样做的好处是它会正确调用`.set("value", ...)`每个小部件，以确保 Dijit 小部件具有新值。简单地在 DOM 节点上分配 ' `.value`' 属性可能会绕过 Dijit 逻辑。

也有一个等价物`.getValues`，`_FormMixin`它做相反的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:01:11.050

我会在 json 上使用一个简单的 javascript 循环。

```
var data = JSON.parse(jsonDataString);
for (index in data) {
    var el = document.getElementById(index);
    if (el)
        el.value = data[el];
} 
```

# php - 处理我自己的函数的 if() 语句的意外结果

> ID：10518543
> 
> 赞同：1
> 
> 时间：2012-05-09T14:49:38.247
> 
> 标签：php, function, if-statement

以前从未遇到过这种情况，但是在 if() 语句中测试用户编写的函数是否有问题？

我在位于不同服务器上的单独 PHP 包含文件中有以下内容（称为“myPhpInclude.php”）：

```
<?php

error_reporting(E_ALL);
ini_set('display_errors','On');

function displayIt($phrase = NULL) {
    if (is_null($phrase)) return false;
    else return true;
}

if ($_SERVER['REMOTE_ADDR'] == '123.456.789.012') { /* my ip address */
    echo 'include file is coming in ok...';
}

?> 
```

摘自我在 PHP 包含文件的单独服务器上的 HTML 文档：

```
<?php include('http://mydomain.com/includes/myPhpInclude.php'); /* the displayIt() function is contained in this include file */ ?>

...

<div id="content">
<?php if (displayIt('on')) { /* <-- MY PROBLEM ORIGINATES HERE */?>
    <p>Some content.</p>
<? } ?>
</div> 
```

网页在我的 if() 语句处停止渲染并且不返回任何错误。PHP错误调试已激活并打开。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:55:52.890

等等等等，你有$phrase 和$phase 吗？我认为这是一个错字。

那里：

```
function displayIt($phrase = NULL) { <== phrase
    if (is_null($phase))             <== phase 
```

如果没有，请尝试将其放入 try{} 块中，尝试`echo displayIt('on');`，也许它出于某种原因返回 false。

**编辑**：而不是`include('http://mydomain.com/includes/myPhpInclude.php');`尝试`include('./includes/myPhpInclude.php');`或用包含文件的文件系统路径替换它。

即使 cross_domain_include 有效，从 url 获取 php 文件也不会给您 php 代码，而是输出（在这种情况下为空）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:27:54.203

问题在于包含文件：

```
include('http://mydomain.com/includes/myPhpInclude.php'); 
```

将通过正常的 http 请求`includes/myPhpInclude.php`从服务器请求文件。`http://mydomain.com`您将收到的不是 php 代码，而是 Web 服务器运行该 php 文件时的输出。即使在某些条件下：

> PHP 4.3.0 之前的 Windows 版本的 PHP 不支持通过此函数访问远程文件，即使启用了 allow_url_fopen 也是如此。

您需要做的是通过本地文件系统包含文件，使用相对路径（或文件系统的绝对路径），例如：

```
include 'includes/myPhpInclude.php'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:55:43.127

您在第二个变量中拼写错误的“短语”。

# fortran - 关于程序中使用的全局变量/模块变量的警告？

> ID：10518546
> 
> 赞同：2
> 
> 时间：2012-05-09T14:49:49.867
> 
> 标签：fortran

我有一个正在清理的旧 Fortran 代码。在这一点上，我想为每个过程获取一个非本地变量的列表：代码使用（滥用）全局变量，我想尽可能多地摆脱对全局变量的引用。手工操作很痛苦，所以我一直在寻找一个编译器选项来执行此操作，但我还没有找到任何东西。任何指针？

谢谢， Ángel de Vicente

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:25:13.507

首先使用“implicit none”或等效的编译器选项。希望您没有太多未声明的变量。大多数编译器都有一个选项，可以节省您在每个过程中添加“隐式无”。如果没有未声明的变量，则进行下一步，否则声明它们。如果有太多未声明的变量，那么你就不走运了。然后在特定的过程中注释掉公共块，包括拉入公共块的行和模块使用语句。查看哪些变量未声明并通过“隐式无”生成警告——这将揭示公共块和模块中的哪些变量在该过程中实际使用。

如果您有一个包含类型声明和变量声明的模块，这可能不起作用。您可能需要将类型和声明放在单独的模块中，以便您可以只注释掉带有变量声明的模块。但这对于滥用全局变量的旧代码来说不太可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:29:23.583

我感觉到你的痛苦。可悲的是，同情几乎是我所能提供的，我还没有找到我最近使用的任何 Fortran 编译器（在过去 6 年左右的时间里几乎所有）都可以识别它们的选项。

[了解 Fortran](http://www.scitools.com/)或[Fortran Lint](http://legacy.cleanscape.net/products/fortranlint/index.html)等工具可以提供帮助，但它们需要花钱；您可能无需付费即可下载评估副本。

在没有此类工具的情况下，我通常：

1.  注释掉我希望是全局的变量，这通常意味着那些在程序范围内声明或在公共块中传递的变量
2.  随意`IMPLICIT NONE`拍打，你可能正在这样做。
3.  让编译器在本地范围内发现未声明的变量。

# c - rdtsc 的 gcc 优化问题

> ID：10518547
> 
> 赞同：1
> 
> 时间：2012-05-09T14:49:50.107
> 
> 标签：c, optimization, gcc

我正在使用 rdtsc 和 cpuid 指令（使用易失性内联汇编指令）来测量程序的 CPU 周期。rdtsc 指令为我在 Linux（使用速度优化 -o2 -fomit-frame-pointer）和 Windows（使用 MS Visual Studio 2008 的速度优化选项 C 编译器（我认为它的 VC 9.0））上的程序提供了真实的结果。

最近，我实现了一个新程序，它使用了大量的表格查找和类似的东西。然而，这个程序在 Linux 上使用 gcc 优化的 rdtsc 测量结果总是比我预期的错误测量结果（非常少的 CPU 周期数）。同一程序在 Windows 上运行时的 rdtsc 测量结果（使用我上面提到的优化和编译器编译）是现实的，并且符合预期。

我的问题是 gcc 优化有什么方法可以将易失性汇编指令移动到产生上述行为的地方？

我的计时器代码如下：

```
#define TIMER_VARS                                                 \
  uint32 start_lo, start_hi;                                       \
  uint32 ticks_lo, ticks_hi

#define TIMER_START()                                              \
  __asm__ __volatile__                                             \
     ("rdtsc"                                                      \
     : "=a" (start_lo), "=d" (start_hi) /* a = eax, d = edx*/      \
     : /* no input parameters*/                                    \
     : "%ebx", "%ecx", "memory")

#define TIMER_STOP()                                               \
  __asm__ __volatile__                                             \
     ("rdtsc"                                                      \
     "\n        subl %2, %%eax"                                    \
     "\n        sbbl %3, %%edx"                                    \
     : "=&a" (ticks_lo), "=&d" (ticks_hi)                          \
     : "g" (start_lo), "g" (start_hi)                              \
     : "%ebx", "%ecx", "memory") 
```

如果有人能就此提出一些想法，我将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:02:21.580

为了防止内联`rdtsc`函数在任何加载/存储/其他操作中移动，您应该将 asm 编写为`__asm__ __volatile__`并包含`"memory"`在 clobber 列表中。如果不执行后者，则 GCC 无法删除 asm 或将其移动到可能需要 asm 的结果（或更改输入）的任何指令中，但它仍然可以针对不相关的操作移动它。`"memory"`clobber 意味着 GCC 不能对内存内容（地址可能被泄露的任何变量）在整个 asm 中保持不变做出任何假设，因此移动它变得更加困难。但是，GCC*仍然*可以在只修改地址从未被占用的局部变量的指令之间移动 asm（因为它们不是`"memory"`）。

哦，正如 wildplasser 在评论中所说，在你浪费大量时间之前**检查 asm 输出。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:09:39.723

我不知道它是否正确，但我曾经使用的代码是：

```
#define rdtscll(val) \
      __asm__ __volatile__("rdtsc" : "=A" (val))

typedef unsigned unsigned long long Ull;

static inline Ull myget_cycles (void)
{
Ull ret;

rdtscll(ret);
return ret; 
} 
```

我记得它在英特尔上比在 AMD 上“慢”。YMMV。

# java - xstream 原始反序列化不起作用？

> ID：10518549
> 
> 赞同：0
> 
> 时间：2012-05-09T14:49:55.600
> 
> 标签：java, xml-serialization, xstream

我正在使用 XStream 序列化程序来序列化一个原语并面临反序列化的问题。以下是问题描述：

说，我有：

```
int i = 80; 
```

我将其序列化如下：

```
serializer.toXML(i, new FileOutputStream("me.xml")); 
```

并获取此 xml：

```
<int>80</int> 
```

但是当我试图解除现实时：

```
i = (int) serializer.fromXML("me.xml"); 
```

我得到这样的例外：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -1
    at com.thoughtworks.xstream.core.util.FastStack.pop(FastStack.java:42)
    at com.thoughtworks.xstream.io.xml.AbstractPullReader.move(AbstractPullReader.java:125)
    at com.thoughtworks.xstream.io.xml.AbstractPullReader.moveDown(AbstractPullReader.java:103)
    at com.thoughtworks.xstream.io.xml.XppReader.<init>(XppReader.java:63)
    at com.thoughtworks.xstream.io.xml.AbstractXppDriver.createReader(AbstractXppDriver.java:54)
    at com.thoughtworks.xstream.XStream.fromXML(XStream.java:912)
    at com.thoughtworks.xstream.XStream.fromXML(XStream.java:903)
    at Utilities.Parser.serializeTimeIntervalDuration(Parser.java:371)
    at Utilities.Parser.parseData(Parser.java:152)
    at CoreLayer.Main.Main.main(Main.java:52) 
```

有人能指出我的错误吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:54:30.880

那是因为`fromXML()`需要 XML，而不是文件名。您应该在解析之前从文件中读取您的 XML。

请注意，[XStream](http://x-stream.github.io/javadoc/com/thoughtworks/xstream/XStream.html)有多种 fromXML() 实现，因此您可以提供字符串、URL、阅读器等。

目前，XStream 正试图理解字符串“me.xml”。

# android - 如何在没有收件人的情况下通过意图撰写短信

> ID：10518552
> 
> 赞同：2
> 
> 时间：2012-05-09T14:50:07.427
> 
> 标签：android, android-intent, sms

我想打开默认的 SMS 应用程序并加载包含一些文本的内容，但我不想提供电话号码。相反，我想将该字段留空，以便用户可以选择收件人。

这是 SMS 应用程序通常被调用的方式：

```
Intent intent = new Intent(Intent.ACTION_SENDTO, "smsto:666"); 
```

但是，我想在打开电子邮件客户端时这样做：

```
Intent emailIntent = new Intent(Intent.ACTION_SEND); 
```

可以这样做吗？如果是这样，我应该为意图设置哪些属性以便它打开 SMS 应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:50:49.690

不将电话号码附加到 URI 也可以：

```
 Uri uri = Uri.parse("smsto:");
    Intent intent = new Intent(Intent.ACTION_SENDTO, uri);
    intent.putExtra("sms_body", "Hello World!");  
    startActivity(intent); 
```

[我想它也适用于https://stackoverflow.com/a/2372665/813951](https://stackoverflow.com/a/2372665/813951)中所述的 ACTION_VIEW 操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:57:32.687

```
Intent sendIntent = new Intent(Intent.ACTION_VIEW);
sendIntent.putExtra("sms_body", "hello world");  
sendIntent.setType("vnd.android-dir/mms-sms"); 
startActivity(sendIntent); 
```

# ssis - 为什么在验证日期时间字段时在派生转换中出现错误？

> ID：10518553
> 
> 赞同：1
> 
> 时间：2012-05-09T14:50:10.137
> 
> 标签：ssis

`0000-00-00`我在日期时间字段中有一个来源。当我尝试将其复制到 SQL 目标时，会弹出错误。

我正在尝试派生列来修复它。当它`0000-00-00`更改为`NULL`. 这是图片。

![在此处输入图像描述](../Images/de250e63cef21020e13de74d0bf883d6.png)

为什么它不起作用？我已经尝试将其更改`0000-00-00 00:00:00`为`0000-00-00`，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:10:50.537

### 解释：

尝试以下表达式来解决问题。由于您的传入字段是`DATETIME`数据类型，并且您希望忽略其中包含零的所有值。您可以找到给定日期时间值的 DAY 并检查它是否为零。如果为零，您需要使用 NULL 函数`NULL(DT_DBTIMESTAMP)`，否则您可以简单地使用包含有效日期和时间值的字段名称。然后，将整个表达式类型转换为数据类型`DT_DBTIMESTAMP`

### 表达：

> (DT_DBTIMESTAMP)(DAY([FechaHoraCorteAgente]) == 0 ? NULL(DT_DBTIMESTAMP) : [FechaHoraCorteAgente])

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:10:14.117

您应该在表达式中使用 NULL(DT_DBTIMESTAMP) 而不是 NULL。

# java - 使用具有唯一 .jar 文件的图像（Slick 2D）

> ID：10518554
> 
> 赞同：2
> 
> 时间：2012-05-09T14:50:12.737
> 
> 标签：java, jar, executable-jar, slick2d

我正在尝试创建一个使用库 slick2D 创建的迷你游戏的可执行 jar 文件。我发现使用 JarSplice 我们可以将多个罐子合并成一个“胖罐子”

问题是：当我运行生成的 fat jar 时，我得到了这个错误，我无法加载图像......

> 线程“主”java.lang.RuntimeException 中的异常：找不到资源：文件：/C:/Users/b.daepp/Desktop/F/Football.jar!/foot/img/field.jpg

我从 slick 教程中描述的标准方式开始

```
Image i = new Image("img/name.png"); 
```

由于在 fat jar 中没有类路径，我尝试了很多解决方案，最后一个是：

```
Image i = new Image(
getClass().getClassLoader().getResource("/package/img/name.png").getFile())); 
```

错误从未改变，无法使用这些图像请帮助

# python - python写入文件语法错误

> ID：10518557
> 
> 赞同：0
> 
> 时间：2012-05-09T14:50:19.670
> 
> 标签：python, string, syntax

刚刚学习python并尝试编写一个允许用户更改文本行的脚本。出于某种原因，在提示用户输入要替换的行的内容时出现此错误：

Traceback（最近一次调用最后一次）：文件“textedit.py”，第 10 行，在 f.write(line1) 中 AttributeError：'str' 对象没有属性'write'

和脚本本身：

```
f = raw_input("type filename: ")
def print_text(f):
    print f.read()
current_file = open(f)
print_text(current_file)
commands = raw_input("type 'e' to edit text or RETURN to close the file")

if commands == 'e':
    line1 = raw_input("line 1: ")
    f.write(line1)
else:
    print "closing file"
    current_file.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T14:52:04.797

改变这个：

```
f.write(line1) 
```

进入这个：

```
current_file.write(line1) 
```

发生错误，因为您像访问`f`文件一样访问它，但它只是用户给出的文件名。打开的文件存储在`current_file`变量中。

此外，您正在以读取模式打开文件。看看[`open()`'s 文档](http://docs.python.org/library/functions.html#open)：

> `open(name[, mode[, buffering]])`
> 
> 最常用的值`mode`是**`'r'`读取**、`'w'`写入（如果文件已经存在则截断文件）和`'a'`追加（在某些 Unix 系统上，这意味着所有写入都附加到文件末尾，而不管当前的查找位置如何） . **如果省略模式，则默认为`'r'`.**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:52:03.313

你应该这样做：

```
current_file.write(line1) 
```

发生了什么？您将*文件名*存储在`f`其中，然后用它打开了一个文件对象，该文件对象存储在`current_file`.

错误消息试图准确地告诉您：`f`是一个字符串。字符串没有`write`方法。在第 10 行，您尝试调用`write`存储在变量中的对象的方法`f`。它行不通。

学习编程将涉及学习阅读错误信息。不用担心。随着您的进行，它会变得更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:52:12.830

改变这个：

```
current_file = open(f) 
```

对此：

```
current_file = open(f, 'w') 
```

和这个：

```
f.write(line1) 
```

至：

```
current_file.write(line1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T14:58:11.410

您正在尝试`write`在`f`which 上是一个字符串（包含`raw_input()`结果），而您可能应该在文件上写入。此外，它被认为更符合 Python 风格，并且是使用`with`语句打开文件的更好做法，因此您可以确保文件在任何可能的情况下都会关闭（包括意外错误！）：

蟒蛇3.x：

```
def print_from_file(fname):
    with open(fname, 'r') as f:
        print(f.read())

f = input("type filename: ")
with open(f, 'w') as current_file:
    print_from_file(f)
    commands = input("type 'e' to edit text or RETURN to close the file")
    if commands == 'e':
        line1 = input("line 1: ")
        current_file.write(line1)
    else:
        print("closing file") 
```

蟒蛇2.x：

```
def print_from_file(fname):
    with open(fname, 'r') as f:
        print f.read()

f = raw_input("type filename: ")
with open(f, 'w') as current_file:
    print_from_file(f)
    commands = raw_input("type 'e' to edit text or RETURN to close the file")
    if commands == 'e':
        line1 = raw_input("line 1: ")
        current_file.write(line1)
    else:
        print "closing file" 
```

# c# - Process.Start - 无法将输出发送到日志文件

> ID：10518566
> 
> 赞同：1
> 
> 时间：2012-05-09T14:51:04.483
> 
> 标签：c#, process.start

我有以下代码

```
var parameters =
    string.Format("TestSuiteDefinitions.dll /include:{0} /out:{1} /err:{2} /xml:{3}", String.Join(",", args), OutputLog, ErrorLog, ResultLog);

var p = Process.Start(GetAssemblyDirectory() + @"\NUnit\nunit-console.exe", parameters); 
```

这允许我从我的应用程序中启动一个单独的进程，启动 NUnit 控制台以及我所需的输出。问题是实际的 NUnit 输出是唯一写入日志的内容。如果进程因其他原因失败，您在命令提示符级别从 nunit-console.exe 看到的命令输出将丢失。

我试过添加

```
> CommandOutput.txt 
```

或者

```
| CommandOutput.txt 
```

在 Process.Start 参数字符串的末尾，但它会引发错误，所以不喜欢那样。

谁能建议如何做到这一点？而且我不能使用 Process 的标准输出流，因为调用进程需要在另一个 Process 启动后立即关闭，因此无法保持打开读取和写入流。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:54:42.407

`Process.Start`不启动外壳，而只是产生一个进程。所以重定向和管道不起作用也就不足为奇了。您可以将实例传递到您可以设置的位置，并将其从. [`ProcessStartInfo`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)`Process.Start``RedirectStandardOutput``p.StandardOutput`

# c# - 使 CRL 缓存无效

> ID：10518567
> 
> 赞同：7
> 
> 时间：2012-05-09T14:51:05.843
> 
> 标签：c#, certificate, invalidation

有没有办法立即使 CRL（证书吊销列表）缓存失效，导致客户端再次下载 CRL？

我想在 C# 中实现它而不求助于命令行“certutil.exe”。

更好的是能够设置失效时间（如 UtcNow + 12hours）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:41:38.970

我已经实现了这样的解决方案，它每 x 小时更新一次客户端机器上的 CRL 缓存，具体取决于调度程序设置。您可以在此处阅读 CRL：http: [//social.technet.microsoft.com/wiki/contents/articles/4954.certificate-status-and-revocation-checking.aspx](http://social.technet.microsoft.com/wiki/contents/articles/4954.certificate-status-and-revocation-checking.aspx)

CRL 缓存存储在客户端计算机上的特殊文件夹中，由存储在 Metadata 和 Content 文件夹中的两个文件组成。这些文件夹位于“C:\Documents and Settings{用户名}\Application Data\Microsoft\CryptnetUrlCache”中，每台计算机的缓存位置为“%WINDIR%\System32\config\SystemProfile\Application Data\Microsoft\CryptnetUrlCache” . Cahce 文件以 CRL url 的 MD5 哈希和命名。文件夹“元数据”中的文件包含一些常量数据、上次更新日期、CRL url、CRL 文件大小等。“内容”文件夹中的文件是 CRL 文件本身，与“元数据”中的文件同名。我解析元文件，检查它是否无效并通过 CRL url 加载新的 CRL 文件，将其放置到“内容”文件夹并重建元数据文件。我将 BouncyCastle 库用于这些目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T19:06:00.753

我知道你不想使用`certutil.exe`，但是这样你就可以在你的应用程序中运行它而不显示 cmd 窗口，如果那是你不想要的。

```
public bool ClearCRLCache()
{
    var pw = new ProcessWrapper();
    var result = pw.Start("certutil.exe", "-urlcache * delete");
    // -2147024637 is the exitcode when the urlcache is empty
    return (result == 0 || result == -2147024637);
} 
```

ProcessWrapper 类：

```
public class ProcessWrapper
{
    /// <summary>
    /// Output from stderr
    /// </summary>
    public string StdErr { get; private set; }

    /// <summary>
    /// Output from stdout
    /// </summary>
    public string StdOut { get; private set; }

    /// <summary>
    /// Starts a process
    /// </summary>
    /// <param name="command">Executable filename</param>
    /// <returns>Process exitcode</returns>
    public int Start(string command)
    {
        return Start(command, "");
    }

    /// <summary>
    /// Starts a process with commandline arguments
    /// </summary>
    /// <param name="command">Executable filename</param>
    /// <param name="arguments">Commanline arguments for the process</param>
    /// <returns>Process exitcode</returns>
    public int Start(string command, string arguments)
    {
        return Start(command, arguments, "");
    }

    /// <summary>
    /// Starts a process with commandline arguments and working directory
    /// </summary>
    /// <param name="command">Executable filename</param>
    /// <param name="arguments">Commanline arguments for the process</param>
    /// <param name="workingDirectory">Working directory for the process</param>
    /// <returns>Process exitcode</returns>
    public int Start(string command, string arguments, string workingDirectory)
    {
        StdErr = "";
        StdOut = "";
        var proc = new Process();
        proc.StartInfo.FileName = command;
        proc.StartInfo.Arguments = arguments;
        proc.StartInfo.WorkingDirectory = workingDirectory;
        proc.StartInfo.UseShellExecute = false;
        proc.StartInfo.RedirectStandardOutput = true;
        proc.StartInfo.RedirectStandardError = true;
        proc.EnableRaisingEvents = true;
        proc.StartInfo.CreateNoWindow = true;

        // Write messages from stderr to StdErr property
        proc.ErrorDataReceived += (sender, e) =>
        {
            StdErr += e.Data + Environment.NewLine;
        };

        // Write messages from stdout to StdOut property
        proc.OutputDataReceived += (sender, e) =>
        {
            StdOut += e.Data + Environment.NewLine;
        };

        proc.Start();

        proc.BeginErrorReadLine();
        proc.BeginOutputReadLine();

        proc.WaitForExit();
        return proc.ExitCode;
    }
} 
```

# python - 无需安装即可使用 BeautifulSoup

> ID：10518570
> 
> 赞同：0
> 
> 时间：2012-05-09T14:51:17.970
> 
> 标签：python, import, module, installation, beautifulsoup

我在我的 Linux 工作机器上安装了 BeautifulSoup 3.x。我想使用 BeautifulSoup 4.x，因为它支持 utf-16。我不想从计算机中删除 BeautifulSoup 3.x。我只想添加 bf4。我应该从网站下载哪些文件以及如何导入它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:56:33.370

听起来您想在同一系统上安装某些 Python 库的不同版本。您应该为此使用[virtualenv 。](http://pypi.python.org/pypi/virtualenv)它允许您使用自己的站点包创建新的虚拟 Python 环境，并在其中安装包。然后，您可以在同一台机器上运行具有不同要求的不同项目。[这](http://mitchfournier.com/2010/06/25/getting-started-with-virtualenv-isolated-python-environments/)是一个简单的教程。

# python - 使用单独的数据文件时，尝试在 python 中传递函数字典失败

> ID：10518575
> 
> 赞同：0
> 
> 时间：2012-05-09T14:51:28.210
> 
> 标签：python, function, dictionary

我有三个文件；一个包含测试，一个包含数据，一个包含运行测试的指令。

基础.py

```
#!/usr/bin/env python

class Base(object):

    def __init__(self):
        pass

    def is_true(self):
        return True 
```

数据驱动程序.py

```
def pytest_generate_tests(metafunc):
    """
    Parse the data provided in scenarios.
    """
    idlist = []
    argvalues = []
    for scenario in metafunc.cls.scenarios:
        idlist.append(scenario[0])
        items = scenario[1].items()
        argnames = [x[0] for x in items]
        argvalues.append(([x[1] for x in items]))
    metafunc.parametrize(argnames, argvalues, ids=idlist)
###
# EDIT BELOW
# ADD NEW SCENARIOS
###

scenario1 = ('ACME_Manage_Keys', { 'org': 'ACME_Corporation', 
                                   'perm_name': 'ManageAcmeCorp', 
                                   'resource': 'activation_keys',
                                   'verbs': ('manage_all',),
                                   'allowed': {"test1": is_true}}) 
```

test_execute.py

```
#!/usr/bin/env python

from lib.base import Base
import pytest
from unittestzero import Assert
from data.datadrv import *

class TestDictionarySupport(object):
    scenarios = [scenario1]

    def test_datadriven_support(self,
            org,
            perm_name,
            resource,
            verbs,
            allowed):

        base = Base()

        functionToCall = allowed['test1']
        Assert.true(base.functionToCall())
        """ THIS WORKS, uncomment the block to see """
        """
        Assert.true(base.is_true())
        """ 
```

我的最终目标是让`Assert.true(base.is_true())`我所做的每一次尝试都导致 TypeErrors 或 NameErrors。我在这里错过了什么或做错了什么？

要重现上述内容，只需创建 3 个目录；库、数据和测试。将 test_execute.py 放在测试中，将 datadrv.py 放在 data 中，将 base.py 放在 lib 中。您将需要 pytest 和 unittestzero 才能运行。您可以从根目录运行 py.test。

注意：当我有这么多工作时，我将有一个 for 循环和多个测试，所以`functionToCall = allowed['test1']`会变成类似`functionToCall = key[value]`

另外，我的起始参考点是[http://code.activestate.com/recipes/65126-dictionary-of-methodsfunctions/](http://code.activestate.com/recipes/65126-dictionary-of-methodsfunctions/)。

谢谢，错误如下：

**注意**错误因尝试的方法而异。

使用`'allowed': {'test1': Base.is_true}})`： ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* ___**错误收集测试/test_execute.py ***_* __ *_* __ *_* __ *_* _ *_* __ *_* __ *_* __ *_* ___** 测试/test_execute.py:6：在

> from data.datadrv import * data/datadrv.py:22: in 'allowed': {'test1': Base.is_true}}) E NameError: name 'Base' is not defined ========== =========================================== 0.02 秒内出现 1 个错误 === ====================================================

使用`'allowed': {'test1': base.is_true}})`：测试/test_execute.py:6：在

> from data.datadrv import * data/datadrv.py:22: in 'allowed': {'test1': base.is_true}}) E NameError: name 'base' is not defined

与`Assert.true(base.functionToCall())`：

测试/test_execute.py:6: 在

> from data.datadrv import * data/datadrv.py:22: in 'allowed': {'test1': is_true}}) E NameError: name 'is_true' is not defined

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:17:03.487

`Base.is_true`和之间有区别`is_true`，第一个是对象的方法`Base`，第二个是代码中未定义的函数。您可以拥有一个方法字典并像这样调用它们：

```
d = {'test1': Base.is_true}
f = d['test1']
f(base) 
```

这样您就可以调用该方法并`base`作为参数给出`self`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:25:16.083

您需要在 datadrv.py 中添加一个“import Base”行。

这将解决“未定义基础”错误，因此您可以使用 {'test1': Base.is_true}

# html - 使用 CSS 交换图像和文本（包括图片）

> ID：10518580
> 
> 赞同：0
> 
> 时间：2012-05-09T14:51:46.030
> 
> 标签：html, css, hover, image-replacement, replace

好吧，伙计们，我在实习时把自己搞砸了。即使是我的计算机理论教授，他是 Wolfram Alpha 的前系主任，也没有真正给我任何有用的信息。看来我必须在您的指导下着手构建这组网页，因为我在其他地方找不到任何有用的网站。

我正在整理页面来解释我们已集成到课堂环境中的不同技术。我想使用[类似这样](http://host.sonspring.com/hoverbox/)的 CSS 图像库，因为当您将鼠标悬停在图像上时，会弹出一个更大的图像。

但是，我希望它能够在 iframe 中交换图像以及随附的文本和链接。[这是我的意思的说明。](http://imgur.com/a/a9S8P#sGepF)当鼠标悬停在左侧画廊中的一张图片上时，我希望更改图像、其下方的文本以及其左侧文本框中的信息。我的想法是在 iframe 中呈现所有必要的信息，以便您在一个地方获得与该技术相关的所有信息。

“Podium Components”下的框是 iframe。我知道图像的交换可以通过 CSS 完成，因为我为我的 Web 开发课程建立了一个使用它的网站（Wolfram Alpha 老师：D）

如果可能的话，我想避免使用 Java 或 JavaScript 并坚持使用纯 CSS。我们用于网站的 CMS 是 Drupal，所以事情已经相当复杂了。将 JavaScript 混入其中只会让事情变得太古怪。

作为补充说明，当我处理项目时，我总是对使用 StackOverflow 感到内疚。感觉就像我在作弊：/。因此，如果您能指出我的教程或告诉我搜索字词将带我去我需要去的地方，我将不胜感激。帮我自学，让我更有市场？:D 提前谢谢，伙计们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:05:07.527

如果您真的想在没有 javascript 的情况下执行此操作（我认为现在它没有什么古怪之处），您可以将您的“讲台组件”放在不可见的`<div>`元素中，并将它们放置在左侧画廊的每个项目中。有点像这样：

```
<ul id="gallery">
    <li id="item1">
        Left-hand item 1
        <div class="hidden-data">
            Your podium component's content here
        </div>
    </li>
    <li id="item2">
        Left-hand item 2
        <div class="hidden-data">
            Another podium component
        </div>
    </li>
</ul> 
```

现在，您可以为列表项创建`:hover`样式，使它们仅在鼠标悬停时可见。您不需要`<iframe>`此解决方案，我认为它会更优化，除非您的左侧画廊中有大量项目。

将讲台组件放置在您想要它们的右侧可以通过将它们设置`position`为来完成`absolute`。我将留给您了解它们是如何工作的（提示：您需要将父元素设置为`position: relative`- 但不仅仅是任何父元素，请明智地选择！）:)

**编辑**：如果您想看到它的实际效果，[这里有一个剧透。](http://jsfiddle.net/GX4Nn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:05:50.140

如果您只是为了使用 CSS 而使用 CSS，那么对于 Web 开发的语义而言，这是一种错误的做法。但是为了不做个混蛋，我会尽力帮助的！;)

您可以使用 CSS 属性“内容”来更改 DIV 等中的内容，而无需使用 JavaScript 之类的东西： [http](http://www.w3schools.com/cssref/pr_gen_content.asp) ://www.w3schools.com/cssref/pr_gen_content.asp此解决方案的好处是您不会不需要为要更改的内容创建 iframe。

当然，如果您坚持使用 iframe，还有其他解决方案。您还可以在图像的悬停状态上使用 CSS 的伪类来更改 iframe 的显示值。

[http://devsnippets.com/article/5-advanced-css-pseudo-class.html](http://devsnippets.com/article/5-advanced-css-pseudo-class.html)

例如，悬停在图像上会放大图像，并同时更改 DIV 的内容。我相信这不应该那么难！

我希望这有一点帮助！

# windbg - !clrstack -p 不给出调用堆栈中方法的参数值

> ID：10518588
> 
> 赞同：11
> 
> 时间：2012-05-09T14:52:10.607
> 
> 标签：windbg, sos

我们正在尝试使用 windbg 分析 w3wp 内存转储，我们发现 w3wp 进程由于堆栈溢出而崩溃。我加载了 psscor4.dll 并通过发出 !clrstack 获得了调用堆栈。但我也想知道传递给方法的参数。如果我发出“！clrstack -p”或“！clrstack -a”，我们将获得所有参数和局部变量的<no data>。任何想法，为什么我们得到 <no data> 而不是参数和局部变量的实际值？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T16:54:36.577

这就是调试优化代码的乐趣。如果你使用 !sosex.mdv，你至少会得到你的 locals/args 的数据类型。然后你可以运行 !sos.dso 或 !sosex.mdso 来查看堆栈上的对象及其类型。以这种方式追踪论点通常并不难，尽管它并不总是有效。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-09T14:54:19.457

如果您正在运行发布版本，您通常无法跟踪本地变量和参数，因为它们已被优化并存储在寄存器中。如果你真的需要它，你可以查看 JIT 编译的代码并找到寄存器中的值，但这可能需要大量的簿记。

# php - PHP MySQL WHERE单元格为空白不返回信息

> ID：10518594
> 
> 赞同：0
> 
> 时间：2012-05-09T14:52:33.477
> 
> 标签：php, mysql, sql

我有一个脚本可以将值插入数据库，然后完成后将标题传递到页面，在该页面中检查特定列中的空白值并将它们返回到页面上，稍后我将使其可编辑以便可以更新它们。

我遇到的问题是，当我运行查询时，它没有返回具有空白值的单元格。

```
$sql = "SELECT * FROM `data` WHERE `team`=''";

$result = mysql_query($sql, $conn);
if(!$result) {
    echo "Cannot do query" . "<br/>";
    exit;
}

$row = mysql_fetch_row($result);
$count = $row[0];

$each_results = mysql_fetch_row($result);

for ($i=0; $i<$each_results; $i++) {
    $row = mysql_fetch_assoc ($result);
    echo $row['rep_num'] . " " ;
    echo $row['team'] . " ";
    echo $row['description'] . "</br>";
} 
```

我尝试了 SELECT * FROM `data`，它返回了所有结果，包括没有团队价值的结果。我在 phpmyadmin 中运行了 SELECT * FROM `data`WHERE `team`='' 查询，它确实返回了我期望的行以及团队行中缺少的单元格数据。所以我猜它底部的 for 循环有问题。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:54:34.937

`$each_result`不包含您期望的值；您已从结果集中将一行作为数组提取到其中，并且无法进行类似的比较`$i < $each_results`）而不是循环，而是使用循环`for`迭代您的行`while`

```
// Don't call fetch here, as it will advance the record pointer
// before you intend to.
//$row = mysql_fetch_row($result);
//$count = $row[0];

//$each_results = mysql_fetch_row($result);

// Replace the for loop with a while loop
while ($row = mysql_fetch_assoc($result)) {
    echo $row['rep_num'] . " " ;
    // Note, team should be blank because you queried team=''
    echo $row['team'] . " ";
    echo $row['description'] . "</br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:55:23.333

以防万一您有 NULL 和 ot 空白字段，请使用 'IS NULL' 或 'IS NOT NULL' 或 isnull() mysql 函数

# c - 指向数组类型的指针，或者添加“typedef”、“const”、“*”和“&”时“数组衰减到指针”发生了什么

> ID：10518597
> 
> 赞同：3
> 
> 时间：2012-05-09T14:52:42.757
> 
> 标签：c, arrays, pointers, constants

我有这个不透明的类型`type_t`和一个函数原型，比如`foo(type_t *t)`和被调用者：

```
int bar(void)
{
    type_t t;

    foo(&t);

    return 0;
} 
```

我想将函数原型从 更改`foo(type_t *t)`为`foo(const type_t *t)`.

不幸`type_t`的是，它被定义为一个数组，例如`typedef char type_t[16]`) ... 所以调用`foo`带`&t`参数的函数会使编译器产生警告。

首先，`foo`函数应该有一个原型，例如`foo(type_t t)`和 被调用`foo(t)`。在这种情况下，我希望*数组衰减到指针*规则也允许`foo(&t)`，但它不适用于`&`运算符。`foo`如果写成这样可能会起作用`foo(void *t)`

**注意：详细例子可以跳过，见文末**

所以我写了这个小测试程序来重现警告/错误[https://gist.github.com/2644970](https://gist.github.com/2644970)

GCC 版本 4.4.3 (Ubuntu 4.4.3-4ubuntu5.1) 正在产生这些警告：

```
array.c: In function ‘test_array_pointer’:
array.c:36: warning: return makes integer from pointer without a cast
array.c: In function ‘test_const_array_pointer’:
array.c:59: warning: return makes integer from pointer without a cast
array.c: In function ‘main’:
array.c:132: warning: passing argument 1 of ‘test_array_pointer’ from incompatible pointer type
array.c:18: note: expected ‘uint8_t (*)[16]’ but argument is of type ‘uint8_t *’
array.c:134: warning: passing argument 1 of ‘test_const_array_pointer’ from incompatible pointer type
array.c:41: note: expected ‘const uint8_t (*)[16]’ but argument is of type ‘uint8_t (*)[16]’
array.c:135: warning: passing argument 1 of ‘test_const_array_pointer’ from incompatible pointer type
array.c:41: note: expected ‘const uint8_t (*)[16]’ but argument is of type ‘uint8_t *’
array.c:137: warning: passing argument 1 of ‘test_array’ from incompatible pointer type
array.c:64: note: expected ‘uint8_t *’ but argument is of type ‘uint8_t (*)[16]’
array.c:140: warning: passing argument 1 of ‘test_const_array’ from incompatible pointer type
array.c:82: note: expected ‘const uint8_t *’ but argument is of type ‘uint8_t (*)[16]’
array.c:143: warning: passing argument 1 of ‘test_const_pointer’ from incompatible pointer type
array.c:100: note: expected ‘const uint8_t *’ but argument is of type ‘uint8_t (*)[16]’ 
```

虽然 LLVM/Clang 版本 1.1 (branches/release_27) 正在生成这些：

```
array.c:36:10: warning: incompatible pointer to integer conversion returning 'array_t' (aka 'uint8_t [16]'), expected 'uintptr_t' (aka 'unsigned int') [-pedantic]
  return a[0]; /* warning: return makes integer from pointer without a cast */
         ^~~~
array.c:59:10: warning: incompatible pointer to integer conversion returning 'array_t const' (aka 'uint8_t const[16]'), expected 'uintptr_t' (aka 'unsigned int') [-pedantic]
  return a[0]; /* warning: return makes integer from pointer without a cast */
     ^~~~
array.c:132:3: warning: incompatible pointer types passing 'array_t' (aka 'uint8_t [16]'), expected 'array_t *' [-pedantic]
  TEST(array_pointer, a);
  ^~~~~~~~~~~~~~~~~~~~~~
array.c:132:23: note: instantiated from:
  TEST(array_pointer, a);
                      ^
array.c:134:3: warning: incompatible pointer types passing 'array_t *', expected 'array_t const *' [-pedantic]
  TEST(const_array_pointer, &a);
  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
array.c:134:29: note: instantiated from:
  TEST(const_array_pointer, &a);
                            ^~
array.c:135:3: warning: incompatible pointer types passing 'array_t' (aka 'uint8_t [16]'), expected 'array_t const *' [-pedantic]
  TEST(const_array_pointer, a);
  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
array.c:135:29: note: instantiated from:
  TEST(const_array_pointer, a);
                            ^
array.c:137:3: warning: incompatible pointer types passing 'array_t *', expected 'uint8_t *' [-pedantic]
  TEST(array, &a);
  ^~~~~~~~~~~~~~~
array.c:137:15: note: instantiated from:
  TEST(array, &a);
              ^~
array.c:140:3: warning: incompatible pointer types passing 'array_t *', expected 'uint8_t const *' [-pedantic]
  TEST(const_array, &a);
  ^~~~~~~~~~~~~~~~~~~~~
array.c:140:21: note: instantiated from:
  TEST(const_array, &a);
                    ^~
array.c:143:3: warning: incompatible pointer types passing 'array_t *', expected 'uint8_t const *' [-pedantic]
  TEST(const_pointer, &a);
  ^~~~~~~~~~~~~~~~~~~~~~~
array.c:143:23: note: instantiated from:
  TEST(const_pointer, &a);
                      ^~
8 diagnostics generated. 
```

**注：精简版**

请参见最后一个示例：

```
typedef char array_t[16];

static int
test_const_array_pointer(const array_t *a)
{
    return 0;
}

int
main(void)
{
    array_t a = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0xa, 0xb, 0xc, 0xd, 0xe, 0xf };
    const array_t b = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0xa, 0xb, 0xc, 0xd, 0xe, 0xf };

    test_const_array_pointer(&a); /* warning: passing argument 1 of ‘test_const_array_pointer’ from incompatible pointer type
                                     note: expected ‘const char (*)[16]’ but argument is of type ‘char (*)[16]’ */

    test_const_array_pointer(a); /* warning: passing argument 1 of ‘test_const_array_pointer’ from incompatible pointer type
                                     note: expected ‘const char (*)[16]’ but argument is of type ‘char *’ */

    test_const_array_pointer(&b); /* OK */

    test_const_array_pointer(b); /* warning: passing argument 1 of ‘test_const_array_pointer’ from incompatible pointer type
                                    note: expected ‘const char (*)[16]’ but argument is of type ‘const char *’ */

    return 0;
} 
```

我认为 &a 将等同于 &b。例如，当一个函数有一个原型`foo(const char *)`要给出时，它是没有必要的`const char *`，例如传递`char *`被接受。

所以我的问题是为什么一个参数`const array_t *`需要一个指向`const`数组的指针？（将不胜感激指向 C11 草案部分的指针）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:08:44.667

这是数组不是 C 中的一等类型这一事实的结果。因为它们不是一等类型，所以`const`在数组上使用类型限定符（例如 ）实际上没有任何意义——就像你不能直接分配或使用数组，限定符将无效。因此，当您尝试将限定符应用于数组时，它会默默地移动到数组元素中。结果，当您说 时`const array_t *`，您没有获得指向 const 字符数组的指针，而是获得了指向 const 字符数组的指针。一个微妙但重要的区别。

这揭示了`test_const_array_pointer(&a)`失败的原因。在 C 中匹配参数的确切规则是将它们视为对参数变量的赋值并遵循赋值规则。规范中 6.5.16.1 的相关约束是：

> 左操作数具有原子、限定或非限定指针类型，并且（考虑左操作数在左值转换后将具有的类型）两个操作数都是指向兼容类型的限定或非限定版本的指针，并且左侧指向的类型具有所有右边指向的类型的限定符；

在这种情况下，左操作数是指向 const 字符数组的指针，而右操作数是指向字符数组的指针。两者都是指针，但由于“字符数组”和“常量字符数组”不是兼容的类型，所以它失败了。

这最终类似于问题“为什么我不能将 a 传递`char **`给期望 a 的函数`const char * const *`”。在这两种情况下，由于函数不能修改参数直接指向的东西（因为它在双指针情况下也是 const ，因为它是一个数组，并且在你的情况下不能直接修改数组），它似乎是无害的——没有明确的演员表，没有办法默默地摆脱 const 。唯一的问题是标准委员会没有考虑它和/或他们没有选择编写匹配规则以便允许它。

# java - 使用 Gradle 的 Application 插件添加类路径条目

> ID：10518603
> 
> 赞同：21
> 
> 时间：2012-05-09T14:53:10.480
> 
> 标签：java, build, gradle

我正在使用 Gradle 的应用程序插件为独立的 java 应用程序生成安装。我有一个需要放在类路径中的配置文件，但我似乎无法让它在 sh/bat 文件中正确生成类路径。此配置文件需要位于 jar 之外。

conf 文件位于目录中，`/src/dist/conf/`因此当我运行`installApp`它时，会将其安装在这样的 conf 目录下`$APP_HOME/conf`。

我尝试将此目录添加到 claspath 中，如下所示：

```
startScripts.classpath.add(files('$APP_HOME/conf')) 
```

但是当我查看 sh/bat 文件中的类路径时，它会添加一个如下所示的条目：

```
$APP_HOME/lib/conf 
```

如何告诉 gradle 删除`lib`此条目的部分？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-10T07:05:07.977

[Alexandr Fadeev在这里](http://forums.gradle.org/gradle/topics/classpath_in_application_plugin_is_bilding_always_relative_to_app_home_lib_directory)提出了另一个解决此问题 ( [GRADLE-2333](http://issues.gradle.org/browse/GRADLE-2333) ) 的方法。

这是（稍加修改）Alexandr 在 Gradle-1.6 上为我解决问题的解决方案：

```
startScripts {
  classpath += files('src/dist/XxxAPlaceHolderForAConfigxxX')
  doLast {
    def windowsScriptFile = file getWindowsScript()
    def unixScriptFile    = file getUnixScript()
    windowsScriptFile.text = windowsScriptFile.text.replace('%APP_HOME%\\lib\\XxxAPlaceHolderForAConfigxxX', '%APP_HOME%\\config')
    unixScriptFile.text  = unixScriptFile.text.replace('$APP_HOME/lib/XxxAPlaceHolderForAConfigxxX', '$APP_HOME/config')
  }
} 
```

它比 Josh 的解决方案有点难看，但它允许您保留原始问题中提到的确切目录布局（/src/dist/conf 和 $APP_HOME/conf）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T15:26:39.663

将文件放入类路径的最简单方法是将其放入`src/main/resources`. `src/dist`用于将文件添加到发行版（即 zip 文件），而不是 Jar/类路径。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T06:12:22.990

对于您的问题，这不是一个特别好的答案，但是我发现了一些 startScripts 任务还没有我们需要的灵活性的例子。

我已经通过直接编辑文件内容解决了其中的几个实例……没有完全利用 Gradle 的出色模型，也没有特别推荐，但至少展示了 Gradle 的灵活性！

所以你可以像这样在类路径中破解一些东西：

```
tasks.startScripts {
  doLast {
    def scriptFile = file "${outputDir}/${applicationName}"
    scriptFile.text = scriptFile.text.replace('CLASSPATH=$APP_HOME/lib', 'CLASSPATH=$APP_HOME/conf/:$APP_HOME/lib')
  }
} 
```

执行此操作时请注意破坏启动脚本的平台独立性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-09T20:02:34.950

在我看来，我正在尝试做的事情不应该是那么与众不同，但作为一种解决方法，我可以拥有允许将`dist`目录放置在目录中的目录和 gradle 生成的类路径sh/bat 文件是正确的。`src/dist/lib/conf``conf``lib`

如果有人有更好的答案，我会接受另一个答案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-20T13:09:59.227

我在下面做了 Martin Dow 食谱的变体：

我在启动脚本中将 'APP_HOME=' 替换为 'export APP_HOME='。

然后我的代码可以执行 System.env.get("APP_HOME") 然后导航到例如 conf/ 文件夹。

这是我的 Gradle hack：

```
tasks.startScripts {
  doLast {
    def scriptFile = file "${outputDir}/${applicationName}"
    scriptFile.text = scriptFile.text.replaceAll('APP_HOME=',  'export APP_HOME=')
  }
} 
```

应用程序中的 Java 代码示例：

```
String APP_HOME = System.env().get("APP_HOME");
Properties p = new Properties();
p.load(new FileInputStream(APP_HOME + "/conf/myapp.properties")) 
```

希望这可以帮助。

*注意：“导出”在 Windows 中不起作用！*

# c++ - 缓冲和非缓冲流

> ID：10518608
> 
> 赞同：6
> 
> 时间：2012-05-09T14:53:25.823
> 
> 标签：c++, stream, buffered, unbuffered

在缓冲流的情况下，它在一本书中说它会等到缓冲区满后再写回监视器。例如：

```
cout << "hi"; 
```

1.  “缓冲区已满”是什么意思。

    ```
    cerr << "hi"; 
    ```

2.  在我的书中说发送到`cerr`的所有内容都会立即写入标准错误设备，这是什么意思？

    ```
    char *ch;
    cin>> ch; // I typed "hello world"; 
    ```

3.  在这个例子`ch`中将分配给“hello”，而“world”将被忽略，这是否意味着它仍在缓冲区中并且会影响未来语句的结果？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T15:25:33.317

你的书似乎不是很有帮助。

1) 输出流将它们的字节发送到 a `std::streambuf`，其中可能包含一个缓冲区；使用的`std::filebuf`（派生自`streambuf`）并且`std::ofstream`通常会被缓冲。这意味着当你输出一个字符时，它不一定会立即输出；它将被写入缓冲区，并仅在缓冲区已满时输出到操作系统，或者您以某种方式显式请求它，通常通过调用 `flush()`流（直接或间接，通过使用`std::endl`）。但是，这可能会有所不同；输出 to`std::cout`与 同步 `stdout`，大多数实现或多或少遵循 `stdout`for的规则，`std::cout`如果输出到交互式设备，则更改缓冲策略。

无论如何，如果您不确定，并且想确定输出确实离开了您的程序，只需添加对 flush 的调用。

2）你的书在这里错了。

缓冲策略之一是`unitbuf`；这是 `std::ostream`您可以设置或重置的标志（`std::ios_base::set()`并且 `std::ios_base::unset()`—`std::ios_base`是 的基类 `std::ostream`，因此您可以在对象上调用这些函数`std::ostream` ）。`unitbuf`设置时，`std::ostream`将调用添加`flush()` 到每个输出函数的末尾，因此当您编写时：

```
std::cerr << "hello, world"; 
```

在字符串中的*所有*字符输出后，流将被刷新，前提`unitbuf`是设置。启动时，`unitbuf`设置为`std::cerr`; 默认情况下，它未在任何其他文件上设置。但是您可以随意设置或取消设置它。我建议不要在 上取消设置`std::cerr`，但如果`std::cout`要输出到交互式设备，将其设置在那里很有意义。

请注意，这里所讨论的只是`streambuf`. 通常，操作系统也会缓冲。所有刷新缓冲区所做的都是将字符传输到操作系统；这个事实意味着您不能 `ofstream`在需要事务完整性时直接使用。

3）当您使用 输入到字符串或字符缓冲区`>>`时， `std::istream`首先跳过前导空格，然后输入最多但不包括下一个空格。在标准的正式术语中，它从流中“提取”字符，这样它们就不会再被看到（除非你寻找，如果流支持的话）。下一个输入将在前一个停止的地方拾取。以下字符是在缓冲区中还是仍在磁盘上，这实际上无关紧要。

请注意，输入的缓冲有点复杂，因为它发生在几个不同的级别，并且在操作系统级别，它根据设备采用不同的形式。通常，操作系统会按扇区缓冲文件，通常会提前读取几个扇区。除非遇到文件结尾，否则操作系统将始终返回所需数量的字符。大多数操作系统将逐行缓冲键盘：在输入完整行之前不会从读取请求返回，并且永远不会在读取请求中返回超出当前行末尾的字符。

`std::ostream`以与使用 a`streambuf`输出 相同的方式，`std::istream`使用 one 来获取每个单独的字符。在 的情况下`std::cin`，它通常是`filebuf`; 当`istream` 请求一个字符时，`filebuf`如果它有一个字符，它将从它的缓冲区返回一个；如果没有，它将尝试重新填充缓冲区，从操作系统请求例如 512（或任何其缓冲区大小）字符。如上所述，它将根据其对设备的缓冲策略进行响应。

无论如何，如果`std::cin`连接到键盘，并且您输入了 ，您输入`"hello world"`的所有字符最终都会被流读取。（但如果你使用`>>`，会有很多*你*看不到的空白。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:01:51.113

C++ 中的流是缓冲区以提高效率，即文件和控制台 IO 与内存操作相比非常慢。

为了解决这个问题，C++ 流有一个缓冲区（一块内存），其中包含要写入文件或输出的所有内容，当它已满时，它会刷新到文件中。输入反之亦然，当缓冲区耗尽时它会获取更多。

这对于流来说非常重要，因为以下

```
std::cout << 1 << "hello" << ' ' << "world\n"; 
```

将是 4 次写入效率低下的文件。

然而，在 std::cout、cin 和 cerr 的情况下，这些类型实际上默认关闭了缓冲，以确保它可以与 std::printf 和 std::puts 等结合使用...

要重新启用它（我建议这样做）：

```
std::ios_base::sync_with_stdio(false); 
```

但是不要使用 C 风格的控制台输出，而它被设置为 false 或可能会发生不好的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T15:13:43.357

您可以使用一个小应用程序自己检查差异。

```
#include <iostream>
int main() {
    std::cout<<"Start";
    //std::cout<<"Start"<<std::endl; // line buffered, endl will flush.
    double j = 2;
    for(int i = 0; i < 100000000; i++){
        j = i / (i+1);
    }
    std::cout<<j;
    return 0;
} 
```

尝试两个“开始”语句的区别，然后更改为 cerr。您注意到的差异是由于缓冲。

在我的设备上 for 语句大约需要 2 秒，您可能需要调整您的 i < 条件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T15:12:37.597

> 1）“缓冲区已满”是什么意思。

对于缓冲输出，有一个内存区域，称为缓冲区，您写出的内容在实际写入输出之前存储在其中。当您说`cout << "hi"`字符串可能只复制到该缓冲区中而不是写出时。cout 通常会等到该内存被填满后才真正开始写出东西。

这样做的原因是因为通常开始实际写入数据的过程很慢，所以如果你对每个字符都这样做，你会得到糟糕的性能。使用缓冲区，以便程序只需要不经常这样做，并且您可以获得更好的性能。

> 2）它在我的书中说发送到 cerr 的所有内容都会立即写入标准错误设备，这是否意味着它发送'h'然后发送'i'......？

这只是意味着没有使用缓冲区。cerr 可能仍会同时发送 'h' 和 'i'，因为它已经拥有这两个。

> 3）在这个例子中 ch 将被分配给“hello”并且“world”将被忽略是否意味着它仍然在缓冲区中并且它会影响未来语句的结果？

这与缓冲没有任何关系。char* 的运算符 >> 被定义为读取直到它看到空格，因此它在“hello”和“world”之间的空格处停止。但是，是的，下次阅读时，您将获得“世界”。

（尽管如果该代码不仅仅是实际代码的释义，那么它具有未定义的行为，因为您正在将文本读入未定义的内存位置。相反，您应该这样做：

```
std::string s;
cin >> s; 
```

)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T15:10:06.860

1.  每次写入终端的调用都很慢，因此为了避免执行缓慢的操作，数据通常存储在内存中，直到输入一定数量的数据或使用 fflush 或 std::endl 手动刷新缓冲区。这样做的结果是有时文本可能不会在您期望的时候写入终端。

2.  由于错误消息的时间比正常输出更关键，因此忽略了性能损失并且不缓冲数据。但是，由于字符串是在单个数据中传递的，因此它是在一次调用中写入的（在某处的循环内）。

3.  It world 仍然在缓冲区中，但很容易通过在 3 行程序中尝试来证明这一点。但是，您的示例将失败，因为您试图写入未分配的内存。您应该改为将输入输入 std::string 。

# git - 无法在我的 github 站点上安装 jekyll-bootstrap

> ID：10518611
> 
> 赞同：-1
> 
> 时间：2012-05-09T14:53:35.240
> 
> 标签：git, github

所以我克隆了 jekyll-boostrap 并尝试推送到我的 anthonybrown.github.com 并收到以下消息：

```
t67:anthonybrown.github.com anthonybrown$ git remote add origin
git@github.com:anthonybrown/anthonybrown.github.com.git fatal: remote origin already exists.
t67:anthonybrown.github.com anthonybrown$ git push origin master
To git@github.com:anthonybrown/anthonybrown.github.com.git
 ! [rejected] master -> master (non-fast-forward)
error: failed to push some refs to 'git@github.com:anthonybrown/anthonybrown.github.com.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again. See the
'Note about fast-forwards' section of 'git push --help' for details.
t67:anthonybrown.github.com anthonybrown$ git push --help 
```

我究竟做错了什么 ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:48:41.383

不久前我想通了，先学习 git，使用 git 页面很容易

# php - 在 PHP 中编辑 Excel 2007 (.xlsm) 文件

> ID：10518622
> 
> 赞同：5
> 
> 时间：2012-05-09T14:54:09.527
> 
> 标签：php, excel-2007, xlsm

我正在使用 PHP（Zend 框架）和 JS（extJS 4）开发一个 webapp，它读取我们客户发送的 Excel 文件。问题是他们经常使用宏，这意味着发送的所有文件都是**xlsm**格式。我们读取文件并用数据更新我们的数据库，但有时我们还需要编辑他们的文件，以更新其中的一些数据。

我们使用了很多[PHPExcel](http://phpexcel.codeplex.com/)来满足我们所有的 PHP/excel 需求，但我有点坚持这个。我知道该库不正式支持启用宏的文件，但就我而言，我只需要打开文件，编辑“工作表数据”部分并保存文件**及其宏**。我永远不需要访问/编辑文件的宏部分。我进行了一些测试，我所能做的就是编辑文件，然后以**xlsx**格式写回。

我返回给他们一个包含他们的宏的文件非常重要，因为他们每天都使用这个文件，有时一天会进行几次导入。我不能要求他们改变他们的工作方式，所以我正在努力解决这个问题。我在 Google 上搜索了其他实现 xlsm 编写的库，但我能找到的唯一线索是 PHP 内置 COM 对象，以及非常稀疏的文档......

所以我想看看这里是否有人已经去过那里，并且有针对这个特定需求的提示或教程。

顺便说一句，我对此有技术要求：我只能使用 PHP，也许 .NET 语言，但 Java 不是一个选项......

谢谢

# plot - 使用 Gnuplot 绘制 3D 数据

> ID：10518624
> 
> 赞同：4
> 
> 时间：2012-05-09T14:54:17.320
> 
> 标签：plot, gnuplot

我的 3D 数据存储在 .txt 文件中，如下所示

```
3423.432 4353.23 45345.435
324.4    4352.2  3342.3
1234.3   3988.4  342.
... 
```

因此，每一列对应一个单独的轴 (x, y, z)。如何使用 Gnuplot 绘制 3D 数据，以便显示 x、y 和 z 轴以用于定向目的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:02:05.807

请参阅本文的[伪 3D 条形图](http://folk.uio.no/hpl/scripting/doc/gnuplot/Kawano/datafile-e.html#3dim)部分。您将使用专门为 3D 绘图创建的*[splot命令。](http://www.duke.edu/~hpgavin/gnuplot.html)*本文为您提供了与您正在寻找的内容相匹配的简单示例。您已经拥有的“XY Z”格式的数据也很好，因此您无需调整其中的任何内容。

# python - python 3.X 的 tkinter 建议

> ID：10518631
> 
> 赞同：0
> 
> 时间：2012-05-09T14:54:37.733
> 
> 标签：python, python-3.x, tkinter

首先，如果您觉得这个话题多余，我深表歉意....但我需要您提供一些具体的答案..这就是我这样做的原因。

我最近开始学习 tkinter for python。但我不能决定走哪条路。每个教程都提出了一种令人困惑的新方法。所以我需要知道：

1.我应该先学习tkinter的哪个部分？？

2.开始tkinter之前我应该​​具备哪些知识？

3.是否有任何书籍或教程记录了从上到下的结构？

4.你对我详细学习tkinter有什么建议？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:33:54.837

Q1.- 熟悉基本的容器和小部件及其属性，然后了解布局小部件的不同方法，最后研究命令属性和事件如何将您的程序逻辑与小部件连接起来。

Q2.- Tkinter 不需要任何特殊背景，除了 Python 本身。
Tkinter 通常用于“非 OOP”模式（未定义类等）。这对于非常简单的事情是可以的，但我建议在一个类中定义你的框架并使用 OOP 来构建你的应用程序小部件和行为。如果您熟悉 OOP，那就更好了。第三季度的建议使用这种方法。

Q3.- 我的建议按顺序显示：
1）[Tkinter 8.4 参考：Python 的 GUI](http://infohost.nmt.edu/tcc/help/pubs/tkinter/)（John W. Shipman，2010）
2）[Thinking in TkInter](http://thinkingtkinter.sourceforge.net/)（Stephen Ferg，2005）和此处的参考

Q4.- 编写你的 GUI，阅读其他代码，重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:03:11.137

谢谢，tkinter 8.4 参考非常有用。我还发现[Core Python Programming](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&ved=0CGUQFjAE&url=http%3A%2F%2Fbulaohu.org%2Fjueduibaomi%2FCore%2BPython%2BProgramming%2B(2nd%2BEdition).pdf&ei=eyCrT9evBJDJrAeJ3oTzAQ&usg=AFQjCNGl0vJhjb_wIt6Pe6e3xLiusxIJUA&sig2=dLGu72NpV1XjsfY3qfCvvA)对于学习 tkinter 的基础知识非常有用。

# transform - 这是将两个 2D 点转换为一个 3D 的正确方法吗？

> ID：10518634
> 
> 赞同：1
> 
> 时间：2012-05-09T14:54:45.440
> 
> 标签：transform, camera-calibration

在我的 Windows 7 PC 上的 MSVSC++ 中，有一个移动物体的 imagePoints 我用两个 MS LifeCam 识别了两次。我想确定这两个 3D 点之间的距离。显示了我正在使用的步骤。我几乎没有包含任何细节，因为现在我只想了解我是否使用了正确的 OCV 2.3.1 功能。

)1。calibrateCamera 为每个摄像头

输出：每个摄像机的 cameraMatrix 和 distCoeffs

)2。simpleBlobDetect 一次为每个摄像头两次

```
 output: point 1 (cam1x1, cam1y1) (cam2x1, cam2y1)

 output: point 2 (cam1x2, cam1y2) (cam2x2, cam2y2) 
```

)3。立体校准

```
 output: R, T, E, & F 
```

)4。立体校正

```
this doesn't actually rectify any images but produces R1,R2,P1 & P2 so it can be done 
```

)5。不失真点

```
output: vector of Point2f objects in rectified image 
```

)6。透视变换

```
 output: vector of Point3f objects 
```

从 30k 英尺开始，这些是正确的步骤吗？

谢谢。查尔斯

# ruby-on-rails - Rails 中的一对一关联

> ID：10518640
> 
> 赞同：1
> 
> 时间：2012-05-09T14:55:23.403
> 
> 标签：ruby-on-rails, cucumber

我的业务逻辑如下：我有很多用户。每个用户可以是请求者或工作者。

这就是我在 Rails 中实现它的方式。我正在使用设计进行身份验证。

```
class User < ActiveRecord::Base
   devise :database_authenticatable, :registerable, :confirmable,
     :recoverable, :rememberable, :trackable, :validatable
   attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :confirmed_at
   has_one :requester           
end 
```

这是请求者模型。

```
class Requester < ActiveRecord::Base
   attr_accessible :rating      
   belongs_to :user
   has_many :tasks
end 
```

当我尝试用 cucumber 测试它时，我定义了一个方法来创建多个用户

```
def create_confirmed_user(name,email,password)
  user = User.new(name: name, email: email, password: password, password_confirmation: password, confirmed_at: DateTime.now)
  user.skip_confirmation!
  user.save
end 
```

并从用户创建请求者

```
def create_requester_from_user(email, rating)
  user = User.find_by_email(email)
  requester = Requester.new(rating: rating)
  requester.user = user
  requester.save
  binding.pry #To debug 
  0
end 
```

当我用 pry 进行调试时，我发现`requester.user`返回了一个用户，但`r = Requester.first`随后`r.user`返回 nil（我检查了`r == requester`返回 true）。这很奇怪。

推测问题出在没有准备测试数据库，我跑去`rake db:test:prepare`检查但`r.user`仍然返回nil。

另一个问题：用这个模型，我可以打电话`user.requester`让请求者属于这个用户吗？

还有一个问题是如何正确实现这个业务逻辑？单表继承 (STI) 是一个不错的选择吗？因为我用谷歌搜索发现使用 STI 有很多不好的副作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:17:24.503

我相信你想要一个多态关联 [http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:08:35.233

我已经从这篇文章中发现了这个问题[Using build with a has_one association in rails](https://stackoverflow.com/questions/2472982/using-build-with-a-has-one-association-in-rails)：我只修改了模型而没有创建迁移。`belongs_to`添加到我的请求者模型后，我需要运行此迁移： `rails generate migration add_user_id_to_requester user_id:integer`. 令人惊讶的是，许多文档都没有提到这一点。

# c# - NullReferenceException 与实体框架和多线程

> ID：10518641
> 
> 赞同：4
> 
> 时间：2012-05-09T14:55:23.583
> 
> 标签：c#, multithreading, entity-framework

我在 Parallel.ForEach 循环中使用实体框架保存数据。知道 EF 不是线程安全的，我为每个线程实例化了一个实体上下文。

1- 安全吗？正如我在这些帖子中看到的那样：

[实体框架 + 多线程 + 延迟加载](https://stackoverflow.com/questions/7176303/entity-framework-multiple-threads-lazy-load)

[每个线程使用一个实体框架上下文是否安全？... 是的？如何？](https://stackoverflow.com/questions/5491869/is-it-safe-to-use-one-entity-framework-context-per-thread-yes-how)

2-在我的上下文创建过程中出现异常，但只有 3 次中的一次，我无法找出原因。

这是我创建上下文的代码：

```
public partial class Entities
{
    private static Entities mfgEntities = new Entities();
    private static readonly Dictionary<int,Entities>  ThreadContexts = new Dictionary<int, Entities>();

    public static Entities Context
    {
        get
        {
            if (HttpContext.Current != null)
            {
                string objectContextKey = HttpContext.Current.GetHashCode().ToString("x");
                if (!HttpContext.Current.Items.Contains(objectContextKey))
                {
                    HttpContext.Current.Items.Add(objectContextKey, new Entities());
                }
                return HttpContext.Current.Items[objectContextKey] as Entities;
            }
            else
            {
                int threadId = Thread.CurrentThread.ManagedThreadId;
                if (!ThreadContexts.ContainsKey(threadId))
                {
                    try
                    {
                        ThreadContexts.Add(threadId, new Entities());
                    }
                    catch (Exception ex)
                    {
                        throw new Exception("Erreur lors de la création de l'entity context");
                    }
                }
                return ThreadContexts[threadId];
            }
            return mfgEntities;
        }
    }
} 
```

它在线抛出 NullReferenceException ：

```
ThreadContexts.Add(threadId, new Entities()); 
```

并且 ThreadContexts、threadId 和新的 Entities 不为空。

我感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:44:50.643

你应该使用[`ConcurrentDictionary`](http://msdn.microsoft.com/en-us/library/dd287191.aspx)for `ThreadContexts`。

更好的是：找到一种在线程中捕获上下文实例的方法，例如通过执行[并行任务](http://msdn.microsoft.com/en-us/library/dd537609.aspx)：

```
var task1 = new Task(() => <your method that instantiates a context>)); 
```

# java - 打印机代码在 Windows 下找不到打印机，但在 OS X 下工作

> ID：10518642
> 
> 赞同：0
> 
> 时间：2012-05-09T14:55:25.970
> 
> 标签：java, printing

在 Mac OS X (Lion) 下，这种打印方法可以正常工作。在 Windows 下，它什么也不做；它没有找到任何打印机，并且菜单列表保持空白。

我使用这个类来发送我的页面：

```
new SelectPrinterDialog(this, new PrintContent(this, ord_id, this.sessionID)); 
```

在课堂`PrintContent`上，我使用：

```
private DocFlavor flavor; 
```

和

```
PrintService[] getPrinters(){ 
```

查找打印机。

```
public class PrintContent {

    private static final boolean TEXT = false;

    private OrdiniFrame frame;
    private String content;
    private long ordID;
    private long sessionID;
    private DocFlavor flavor;

public static final String PDF_PRINT_FILE = "__temp_print_file.pdf";
public static final String TXT_PRINT_FILE = "__temp_print_file.txt";
public static final String HTML_PRINT_FILE = "__temp_print_file.html";

public PrintContent(OrdiniFrame frame, long ordID, long sessionID){
    this.frame = frame;
    this.ordID = ordID;
    this.sessionID = sessionID;
    if(TEXT){
        this.flavor = DocFlavor.INPUT_STREAM.TEXT_PLAIN_US_ASCII;
        this.generateText();
    }
    else {
        this.flavor = DocFlavor.INPUT_STREAM.POSTSCRIPT;
        this.generateHTML();
    }

}

public PrintService[] getPrinters(){
    PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();
    //aset.add(MediaSizeName.ISO_A8);
    return PrintServiceLookup.lookupPrintServices(flavor, aset);
}

public XHTMLPrintable createRender () {
    try{
        XHTMLPanel renderer = new XHTMLPanel();
        renderer.getSharedContext().setDPI(300f);
        renderer.setDocument(new File(HTML_PRINT_FILE));
        JFrame f = new JFrame();
        f.getContentPane().add(renderer, "Center");
        f.setVisible(true);
        return new XHTMLPrintable(renderer);
    }catch(Exception ex){
        ex.printStackTrace();
    }
    return null;
}

public void print(PrintService service){

    try{
        float paperWidth = 62.0f;
        // paperHeight aumenta l'altezza del foglio
        float paperHeight = 70.0f;
        paperWidth *= 2.83;
        paperHeight *= 2.83;

        //val printJob = PrinterJob.getPrinterJob
        PrinterJob printJob = PrinterJob.getPrinterJob();
        printJob.setPrintService(service);

        PageFormat pageFormat = printJob.defaultPage();
        pageFormat.setOrientation(PageFormat.PORTRAIT);
        Paper labelPaper = pageFormat.getPaper();
        labelPaper.setSize(paperWidth, paperHeight);
        labelPaper.setImageableArea(+30,+30,paperWidth, paperHeight);
        pageFormat.setPaper(labelPaper);

        Book book = new Book();
        book.append(this.createRender(), pageFormat);
        printJob.setPageable(book);

        PrintRequestAttributeSet attributeSet = new HashPrintRequestAttributeSet();
        attributeSet.add(new PrinterResolution(300, 300, ResolutionSyntax.DPI));
        printJob.print(attributeSet);

    }catch(Exception ex){
        ex.printStackTrace();
    } 
```

我究竟做错了什么？

* * *

更新：我已经解决了。问题出在标签 html->`<meta charset="utf-8"/>`中！我在创建文件 .bat 以执行 .jar 后发现此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:25:19.007

我已经解决了。问题出在标签 html-> 中！我在创建文件 .bat 以执行 .jar 后发现此错误。

# ruby-on-rails - 在这种情况下我应该有多少列？

> ID：10518647
> 
> 赞同：1
> 
> 时间：2012-05-09T14:55:39.643
> 
> 标签：ruby-on-rails, model-view-controller

这是关于处理模型字段的一般问题，只是想知道这是否是正确的方法。假设我有模型`House`，用户可以选择它具有的 10 个功能：

```
Swimming Pool
Hot Tub
Tennis Court
Boat Parking
Horse Facilities
Balcony
Pets Allowed
Energy Efficient
Lease Option
Disability Features 
```

这意味着我必须制作 10 个布尔列，对吗？我从来没有使用过这么多的表格列，所以我不确定。有这么多是正常的做法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T15:12:27.207

另一种选择是有一个名为 HouseOptions 的表（或任何你喜欢的），然后是一个名为 UserHouseOptions 之类的连接表。

AR 关系如下所示：

```
# user.rb
has_many :user_house_options
has_many :house_options, :through => :user_house_options

# user_house_options.rb
belongs_to :user
belongs_to :house_options

# house_options.rb
has_many :user_house_options
has_many :users, :through => :user_house_options 
```

然后，用户没有额外的列。它只是通过 AR 关系拥有那个连接表。用户住宅选项将有两列：user_id 和 house_options_is。然后 House Options 只有字符串列（“Swimming Pool”等），它只是一个参考表。

查看此 Rails 指南以获取有关 has_many :through 关系（和示例代码）的更多信息：http: [//guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T15:37:48.070

我并不担心字段的数量，但您可能希望概括您的设计，以便您可以轻松实现新功能。

他是一个设计理念。

```
> rails generate Model Feature type:string house_id:integer

class House < ActiveRecord::Base
  has_many :features
end

class Feature < ActiveRecord::Base
  belongs_to :house
end

class SwimmingPool < Feature
  def to_s
    "Swimming Pool"
  end
end

house = House.create
house.features << SwimmingPool.new
house.save!

house.features.each do |feature|
  puts feature
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T15:13:00.387

这可能是可行的，但实现代码可能会很混乱。一种可能的解决方案是序列化

```
class User < ActiveRecord::Base
  serialize :preferences
end

user = User.create(:preferences => { "background" => "black", "display" => large })
User.find(user.id).preferences # => { "background" => "black", "display" => large } 
```

在这里，我们使用的首选项只是一个哈希，但您也可以使用数组

另一种解决方案，为每个功能创建一个表并使用连接，但这可能会更麻烦哈。当我更多地思考这个问题时，我会更新我的答案

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T17:30:39.373

我的另一个答案（使用多态类）只是一个想法。另一种更简单的方法是有一个 feature_types 表，在名称字段中列出 Swimming Pool，以及一个多对多链接表。请参阅 has_many :through。

此表解决方案很容易扩展以添加另一种类型。

*如果*您想扩展特定于类的行为，多态类解决方案是可扩展的。例如，游泳池可能会根据特征表中的质量数据在 to_s 中包含诸如“奥林匹克规模”之类的数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T15:09:04.130

这取决于您可以创建一个数组字段的用途，例如称为特征，您可以在该数组中插入房屋的特征类型。

# ios - NSDateFormatter “月份” 3 个字母而不是完整的单词

> ID：10518659
> 
> 赞同：34
> 
> 时间：2012-05-09T14:56:26.430
> 
> 标签：ios, date, nsdate, nsdateformatter, monthcalendar

```
 NSDateFormatter* formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"dd-MM-YYYY HH:mm"];        
    [formatter setTimeZone:[NSTimeZone systemTimeZone]]; 
```

如果我选择`MM`我得到月份的数字：`09-05-2012 15:33` 如果我选择`MMMM`我得到月份的单词：`09-May-2012 15:33`

我想要的是 3 个字母缩写的月份。
例如：`January`将是`Jan`

在这种情况下，May 是正确的，因为它只有 3 个字母。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-09T15:00:04.103

你有没有试过：`[formatter setDateFormat:@"dd-MMM-YYYY HH:mm"];`然后`[formatter stringFromDate:someNSDate];`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-21T16:47:41.090

如果你以错误的顺序得到这两件事，你就不会得到预期的输出。

```
[formatter setDateFormat:@"MMM"];
[formatter setDateStyle:NSDateFormatterMediumStyle]; 
```

不给出与以下相同的结果：

```
[formatter setDateStyle:NSDateFormatterMediumStyle];
[formatter setDateFormat:@"MMM"]; 
```

（这两个片段中的第二个现在很高兴在我的应用程序中分发 Sep Oct 等）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-09T10:07:10.450

在**SWIFT中**

```
let dateFormatter = NSDateFormatter()

dateFormatter.dateFormat = "dd MMM yyyy HH:mm"

dateFormatter.stringFromDate(NSDate()) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-21T06:43:47.323

这是一个精简的解决方案，可与 Swift 4 一起生成 3 个字母的月输出：

```
let dateFormatter = DateFormatter()
dateFormatter.dateFormat = "dd MMM YYYY, HH:mm:ss" 
```

并验证：

```
print(dateFormatter.string(from: Date())) // 20 Mar 2018, 23:41:40 
```

如前所述，`MMM`是获取所需月份输出的正确语法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-13T15:35:35.630

对于 swift 4 来说：

```
if let dateFormatter = DateFormatter(){
    dateFormatter.dateStyle = .medium
    // eventually:
    //let locale = Locale(identifier: ...                       
    //dateFormatter!.locale = locale
    dateFormatter.dateStyle = .medium
    dateFormatter!.dateFormat = "dd MMM YYYY, HH:mm:ss"
 } else..
        .. 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-09T15:03:45.023

实际上，您可以将 dateStyle 设置为中等（即“Jan”、“Feb”等），如下所示：

```
[formatter setDateStyle:NSDateFormatterMediumStyle]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-05T23:37:08.690

对于那些没有通过“MMM”获得整整一个月的人，您可以通过

```
dateFormatter.dateFormat = "dd MMMM yyyy" 
```

在 Swift 4.2 上测试

# ruby - RSpec：如何测试文件解析器

> ID：10518662
> 
> 赞同：3
> 
> 时间：2012-05-09T14:56:31.337
> 
> 标签：ruby, unit-testing, file-io

我是 ruby​​ 和 rspec 的新手，我想知道如何测试一个必须解析文件的类。这是我计划测试的功能：

```
def self.get_description(event_code)
  # search through a file for the event_code and return
  # the associated description field
end 
```

在生产中，我将硬编码文件的路径。我应该如何控制 rspec 中的文件内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:05:23.540

创建一些包含有效和无效输入的解析规范，[`Tempfiles`并](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html)确保解析函数返回预期结果（或异常）。

# javascript - 从 iframe 中的 js var 访问父窗口中的 js var

> ID：10518664
> 
> 赞同：0
> 
> 时间：2012-05-09T14:56:34.447
> 
> 标签：javascript, iframe

如何访问父级 iframe 中的 javascript 文件中的变量和数组？

我的理由是因为我试图绕过跨域权限。我注意到它会加载 iframe 窗口……它会加载 js……但它不会执行 ajax 或 http 请求，我需要一个 xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:00:21.560

你不能，真的，虽然你可以用`postMessage`. 请参阅[此答案](https://stackoverflow.com/questions/3683163/accessing-parent-window-variable-from-an-cross-domain-iframe)以获得更深入的解释。

# php - PHP Mysql 跟踪访问者可扩展性

> ID：10518666
> 
> 赞同：3
> 
> 时间：2012-05-09T14:56:48.653
> 
> 标签：php, mysql, scalability, analytics

我有一个从一个代码库运行多个网站的 Web 应用程序。我使用包含在应用程序上运行的站点和域的表来设置它。该应用程序跟踪访问者，因此我们可以了解每个站点以及该应用程序在全球范围内获得的流量。

我遇到的问题是访问者跟踪非常慢，因为那里有 250 万条记录。运行查询以获取本月的访问者数量需要数分钟，这使得我们的数据无法访问。

系统直接从包含所有其他文件的基本 php 文件记录跟踪。当它没有找到现有的识别 cookie 时，它​​会在访问者表中创建一条记录。当它创建记录时，它会为用户分配一个 cookie，这样当他们回来时，他们只创建单个访问者记录。该访问者记录存储了他们查看了多少页面以及他们进入了哪个页面（入口页面）以及他们查看的最后一页（退出页面）。

我们获得了相当多的流量，我想通过加快结果来使每月访问者的这份报告变得可访问。

我之前尝试过为 site_id 和日期添加索引，但它似乎并没有帮助加快速度......

我们决定自己跟踪分析，而不是使用像谷歌分析这样的工具，这样我们以后就可以用它创建一些更有意义的数据。例如，当正在查看网站的用户提交联系表格并成为 CRM 中的联系人时，我们希望查看该联系人的历史记录，以了解他们在寻求支持之前查看了哪些页面等。

有什么建议么？表架构如下。提前非常感谢，我一直在努力想出解决方案。

```
CREATE TABLE `analytics_track_visits` (
    `id` bigint unsigned NOT NULL AUTO_INCREMENT
    ,`site_id` int(4) unsigned default NULL

    ,`inc` bigint unsigned default NULL
    ,`referer` text NOT NULL
    ,`refer_host` text NOT NULL
    ,`user_agent` text NOT NULL
    ,`browser` text NOT NULL
    ,`os` text NOT NULL
    ,`search_term` text NOT NULL

    ,`entry_page` int(4) unsigned default NULL
    ,`entry_page_url` text default NULL
    ,`exit_page` int(4) unsigned default NULL
    ,`exit_page_url` text default NULL

    ,`created` datetime NOT NULL
    ,`created_ip` varchar(200) NOT NULL default ''
    ,`created_user_id` int(4) unsigned default NULL
    ,`modified` datetime NOT NULL default '0000-00-00'
    ,`modified_user_id` int(4) unsigned default NULL

    ,PRIMARY KEY(`id`)
    ,CONSTRAINT `analytics_track_visits__site` FOREIGN KEY (`site_id`) 
        REFERENCES `site` (`id`) ON DELETE CASCADE
    ,CONSTRAINT `analytics_track_visits__entry_page` FOREIGN KEY (`entry_page`) 
        REFERENCES `page` (`id`) ON DELETE CASCADE
    ,CONSTRAINT `analytics_track_visits__exit_page` FOREIGN KEY (`exit_page`) 
        REFERENCES `page` (`id`) ON DELETE CASCADE
) ENGINE=INNODB; 
```

`inc`存储该特定访问者查看的页面数。`entry_page`是我们 cms 页表的外键（与 exit_page 相同）。`browser`并`os`保持从`user_agent`. `search_term`存储用于查找入口页面的任何关键字。`site_id`与包含具有域名名称的站点设置列表的表相关。

我怀疑部分问题是该表永远不会真正中断，因此当我们运行报告时，会同时插入和更新该表的活动查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:49:41.997

250 万条记录并不是一张那么大的表。我有一个超过 2500 万条记录的日志表（记录操作、登录、注销、价格变化等）。

如果您查询`site_id`and `created`（只是日期部分），我建议创建一个类型为 date 的 created_date 和一个索引，如：`INDEX (idx_lookup (site_id, created_date)`我相信这应该给你最好的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:04:56.693

在不知道您正在运行哪种查询的情况下，您可能需要考虑以下几点：

*   为每个站点创建一个单独的表；我知道这似乎不是一个很好的解决方案，但它消除了对表中另一个昂贵索引的需要。
*   设置一个只读从属来执行您的报告查询；这减少了主数据库的压力。
*   我相信 InnoDB 也会为您的所有外键创建一个索引；这对表格的大小没有帮助（它也会减慢插入速度）。除非您定期删除页面，否则您可以不使用这些页面。

如果我能想到更多，我会添加更多提示。

# android - 更新复选框首选项的最佳方法

> ID：10518667
> 
> 赞同：0
> 
> 时间：2012-05-09T14:56:51.680
> 
> 标签：android, settings, sharedpreferences, checkboxpreference

我正在为android编写一个时钟。为此，我设置了一个每秒更新屏幕 1 次的功能，因此我的程序可以消耗大量资源，而我的目标是添加一个复选框首选项，尽可能减少资源消耗。

然后，我的问题是：我已经看到了一些更新首选项`onSharedPreferenceChangeListener`的方法，例如......哪种方式消耗更少的系统资源？我应该如何在我的代码中实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:17:17.073

如果您使用的是，`PreferenceActivity`您可以`OnPreferenceClickListener`在复选框上实现设置侦听器，然后在您的`onPreferenceClick`方法中使用您为框设置的键并执行您需要执行的操作

```
@Override
public boolean onPreferenceClick(Preference preference) {
    if (preference.getKey().equals("schedulestart")) {
        showDialog(0);
    } else if (preference.getKey().equals("schedulestop")) {
        showDialog(1);
    } else if (preference.getKey().equals("priority")) {
        // Reset unread count when switching mailboxes. They might differ.
        getPreferenceManager().getSharedPreferences().edit().putInt("unreadcount", 0).commit();
    }
    return true;
} 
```

# javascript - 如果我想在每次测试之前初始化数据库，如何组织代码？

> ID：10518671
> 
> 赞同：1
> 
> 时间：2012-05-09T14:56:57.957
> 
> 标签：javascript, unit-testing, jasmine

我是 jasmine 的新手，我想为 mongodb 操作编写一些测试。

假设我`.spec.js`在 directory 下有几个文件`spec`，其中的所有测试都应该删除测试数据库并插入一些测试数据。

我应该如何组织代码？我应该在`init()`某个地方定义一个方法，然后从所有其他测试中调用它吗？或者有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:29:28.780

在您的内部，您`describe`可以像往常一样调用测试框架。这是设置和拆除测试先决条件的正确位置。`beforeEach``afterEach`

例如：

```
describe('My Module', function () {
  beforeEach(function () {
    ...
  });

  afterEach(function () {
    ...
  });

  it('...', function () { ... });

}); 
```

在任何情况下，尽管最佳实践是不实际执行 db 操作：大概您使用一些已经过测试的库。**如果您模拟**您的数据库层，它将为您节省很多麻烦。您可以通过使用 jasmine 有效地执行此操作[spies](http://github.com/pivotal/jasmine/wiki/Spies)。

例如，假设您的 db 层有一个`get(id)`返回一些 json 的函数。你可能正在做：

```
it('can access the db', function () {
  var spy = spyOn(db, 'get').andCallFake(function (id) {
    expect(id).toEqual('foo');
    return {title: 'Foo Bar'};
  });

  // Something here does stuff that would result to a call to db.get
  var res = db_calling_function('foo');
  expect(spy).toHaveBeenCalled();
  expect(res).toEqual({title: 'Foo Bar'});
}); 
```

# batch-file - DOS SET 中的替换变量

> ID：10518672
> 
> 赞同：0
> 
> 时间：2012-05-09T14:57:11.850
> 
> 标签：batch-file, environment-variables, cmd

我正在尝试在 DOS CMD 脚本中执行此操作：

```
@setlocal
@for /L %%X in (1,1,10) do @call :label1 %%X
@endlocal
@exit /b

:label1
@set I=%1
@set /P A%I%=SET A%I% to?
@echo You entered %%A%%I%%
exit /b 
```

但是我无法让它回显实际输入的值。我已经尝试了回声线上的所有变化。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:18:46.360

要获得输出，您可以使用`call echo You entered %%A%I%%%`.

但最好使用延迟扩展，以便像 & 和 | 这样的特殊字符 永远不会给你带来问题：`echo You entered !A%I%!`

为了使用延迟扩展，您需要使用`setlocal enableDelayedExpansion`.

有用的提示 1 - 放在`@echo off`脚本的顶部。那么你永远不需要`@`在以下任何命令中使用。

有用的提示 2 - 在使用 SET /P 之前，您应该明确清除任何现有的变量值。您不能确定它尚未定义。如果用户只是按下`<Enter>`而不输入任何内容，则将保留现有值。

有用的提示 3 - 你甚至不需要这个`I`变量。您可以简单地在`%1`任何地方使用该参数`%I%`。

有用的提示 4 - 更好的是，您甚至不需要调用子例程。

```
@echo off
setlocal enableDelayedExpansion
for /L %%X in (1,1,10) do (
  set "A%%X="
  set /P "A%%X=SET A%%X to? "
  echo You entered !A%%X!
)
endlocal 
```

# java - Android api 级别 8 - ProgressBar 未更新

> ID：10518679
> 
> 赞同：0
> 
> 时间：2012-05-09T14:57:53.623
> 
> 标签：java, android, progress-bar

现在我知道了，有很多线程都存在这个问题，但是我都试过了，但还是没有用。问题是我的进度条没有更新。这是我的代码：

```
private class TwoSecondsThread extends Thread {

    int progress = 0;

    public TwoSecondsThread() {

    }

    @Override
    public void run() {

        while(progress != 2000) {

            Log.d("TWO SECONDS", "going to sleep for 100ms");

            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {}

            progress += 100;

            final ProgressBar pg = startTransactionProgressBar;

            // Update the progress bar
            runOnUiThread(new Runnable() {

                @Override
                public void run() {

                    Log.d("TWO SECONDS", "updating progress bar");

                    pg.setProgress(progress);

                }
            });

        }

    }

} 
```

我了解，adnroid SDK 中存在错误，但我看到应用程序具有功能进度条。那么让它发挥作用的诀窍是什么？

谢谢，菲利普

# android - Android 上的二进制短信接收：动态接收方注册

> ID：10518680
> 
> 赞同：1
> 
> 时间：2012-05-09T14:57:54.767
> 
> 标签：android, binary, sms, intentfilter

我可以使用以下代码片段在 Android 上发送和接收数据 SMS：

```
SmsManager manager = SmsManager.getDefault();
manager.sendDataMessage(phonenumber, null, (short) PORT, data,piSend, piDelivered); 
```

其中 PORT=8091 表示发件人。而对于接收者，在清单文件中定义了一个广播意图，如下所示：

```
 <receiver android:name=".DataSMSReceiver"> 
 <intent-filter> 
 <action android:name="android.intent.action.DATA_SMS_RECEIVED"/>
 <data android:port="8091"/>
 <data android:scheme="sms"/> 
 </intent-filter> 
 </receiver> 
```

然后在 DataSMSReceiver 类中接收。

但是，我需要像注册短信一样动态注册广播接收器，例如：

```
protected static final String SMS_RECEIVED="android.provider.Telephony.SMS_RECEIVED";
getApplicationContext().registerReceiver(mReceiver, new IntentFilter(SMS_RECEIVED)); 
```

如何在 IntentFilter 中指定端口以动态注册接收器？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:12:54.637

相信你需要使用[`addDataAuthority(String, String)`](http://developer.android.com/reference/android/content/IntentFilter.html#addDataAuthority%28java.lang.String,%20java.lang.String%29). 例如：

```
IntentFilter filter = new IntentFilter(SMS_RECIEVED);
filter.addDataAuthority("*", "8091");
filter.addDataScheme("sms");

//use the filter, etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-28T06:56:30.150

由于我没有很容易找到它，所以我在这里发布：

String `"android.provider.Telephony.SMS_RECEIVED"` 可以在[`Telephony.Sms.Intents`](https://developer.android.com/reference/android/provider/Telephony.Sms.Intents.html)类中作为常量找到：

`Telephony.Sms.Intents.DATA_SMS_RECEIVED_ACTION`

# java - 如何动态创建视图组？

> ID：10518682
> 
> 赞同：0
> 
> 时间：2012-05-09T14:58:04.510
> 
> 标签：java, android, listview, footer, viewgroup

我有一个列表视图。

我想添加页脚。

所以我创建了一个页脚 xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="100px"
android:background="@drawable/background_news_list"
android:gravity="center" >

<ImageButton
    android:id="@+id/btn_more"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10px"
    android:background="@drawable/btn_more_news" />

</LinearLayout> 
```

我想将整个布局膨胀到主java中，但我只设法膨胀按钮

```
footer = getLayoutInflater().inflate(R.layout.testing, null, false);
btnmore = (ImageButton)footer.findViewById(R.id.btn_more);

ListView lv = (ListView) findViewById(android.R.id.list);
lv.addFooterView(footer); 
```

我的清单在这个 xml 中

```
<LinearLayout
    android:id="@+id/layout_content"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/layout_menu"
    android:layout_below="@id/layout_title"
    android:orientation="vertical" >

    <ListView
        android:id="@+android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>
</LinearLayout> 
```

我如何创建一个视图组来实现并变成这样？

```
footer = getLayoutInflater().inflate(R.layout.testing, parent, false); 
```

这样我就可以使用自己的线性布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:12:05.963

您的帖子有点令人困惑，但我认为您只需要在 LinearLayout 中添加一个 id：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@id/linlayoutid"
    android:layout_width="fill_parent"
    android:layout_height="100px"
    android:background="@drawable/background_news_list"
    android:gravity="center" >

<ImageButton
    android:id="@+id/btn_more"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10px"
    android:background="@drawable/btn_more_news" />

</LinearLayout> 
```

然后抓取线性布局：

```
footer = getLayoutInflater().inflate(R.layout.testing, null, false);
LinearLayout ll = footer.findViewById(R.id.linlayoutid);

ListView lv = (ListView) findViewById(android.R.id.list);
lv.addFooterView(ll); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:58:32.620

我通过这样做解决了它

```
footer = getLayoutInflater().inflate(R.layout.testing, lv, false); 
```

这是因为

```
lv is the list id and it 
```

# php - 使用 STI（单表继承）的 Symfony2 表单验证

> ID：10518683
> 
> 赞同：1
> 
> 时间：2012-05-09T14:58:06.397
> 
> 标签：php, ajax, symfony, symfony-forms

我正在使用 Symfony 2 框架构建一个 Web 应用程序，其中我有一个 Notification 类，由 OrderCloseNotification 和 OrderDelayNotification 子类化，使用单表继承，如 Doctrine 2 文档中所述，用于稍微不同的目的（正如您可以通过类名猜测的那样）。

我需要以不同的方式验证表单提交，这导致我为它们中的每一个创建自定义类型和控制器。我将使用 OrderDelayNotification，因为它是需要验证的通知类型。这是我的设置：

超级班：

```
# src/MyNamespace/MyBundle/Entity/Noticication.php
namespace MyNamespace\MyBundle\Entity;
use Doctrine\ORM\Mapping as ORM;

class Notification
{
    # common attributes, getters and setters
} 
```

子类：

```
# src/MyNamespace/MyBundle/Entity/OrderDelayNotification.php
namespace MyNamespace\MyBundle\Entity;
use Doctrine\ORM\Mapping as ORM;

class OrderDelayNotification extends Notification
{
    private $message;
    # getters and setters
} 
```

子类控制器：

```
namespace MyNamespace\MyBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;

use MyNamespace\MyBundle\Entity\OrderDelayNotification;
use MyNamespace\MyBundle\Form\Type\OrderDelayNotificationType;

class OrderDelayNotificationController extends Controller
{    
    public function createAction() {

    $entity  = new OrderDelayNotification();
        $request = $this->getRequest();
        $form    = $this->createForm(new OrderDelayNotificationType(), $entity);
        $form->bindRequest($request);

        if ($form->isValid()) {
             //$em = $this->getDoctrine()->getEntityManager();
             //$em->persist($entity);
             //$em->flush();

        } else {

        }   

        // I'm rendering javascript that gets eval'ed on the client-side. At the moment, the js file is only displaying the errors for validation purposes  
        if ($request->isXmlHttpRequest()) {
            return $this->render('LfmCorporateDashboardBundle:Notification:new.js.twig', array('form' => $form->createView()));
        } else {
        return $this->redirect($this->generateUrl('orders_list'));
        }
    }
} 
```

我的自定义表单类型

```
# src/MyNamespace/MyBundle/Form/Type/OrderDelayNotificationType.php
class OrderDelayNotificationType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {

        $builder->add('message')
                ->add('will_finish_at', 'date')
                ->add('order', 'order_selector'); //*1

    return $builder;
    }

    public function getName()
    {
        return 'orderDelayNotification';
     }
} 
```

*1 : order_selector 它是一种自定义类型，我与数据转换器一起将订单映射到它的主键，以便在给定订单集的表视图中创建通知。

最后，我有一个 validation.yml（我对每个配置都使用 YAML）

```
# src/MyNamespace/MyBundle/Resources/config.validation.yml
MyNamespace\MyBundle\Entity\OrderDelayNotification:
    properties:
        message:
            - NotBlank: ~ 
```

这里发生的情况是：当我尝试通过 AJAX 创建 OrderDelayNotification（尚未尝试过 html 请求）时，即使消息为空白，订单也始终被视为有效。我也试图强加一个最小长度，但没有运气。我阅读了 symfony 的文档，他们说验证是默认启用的。还尝试将validation.yml 上的属性名称更改为无效名称，Symfony 抱怨它意味着文件已加载，但验证没有发生。

有人对此有任何指示吗？

编辑： ajax 调用是这样的：

```
$('form[data-remote="true"]').submit(function(event){
    $.ajax({
        type:       $(this).attr('method'),
        url:            $(this).attr('action'),
        data:       $(this).serialize(),
        success:    function(response) {
            eval(response)
        }
    });
    event.preventDefault();
}); 
```

产生：

```
# src/MyNamespace/MyBundle/Resources/views/Notification/new.js.twig
alert("{{ form_errors(form) }}"); 
```

我可以看到 Symfony 的验证器服务没有抛出任何错误（根据 Symfony 的文档，由我的 AbstractType 子类间接调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:35:58.230

找出问题所在。该表单实际上无效，但未显示错误。我必须为每个表单字段包含以下选项：

```
$builder->add('message', null, array('error_bubbling' => true)) 
```

现在可以正确显示错误。

# html - 在 Firefox 中，DIV 不会一直向左浮动

> ID：10518685
> 
> 赞同：1
> 
> 时间：2012-05-09T14:58:08.520
> 
> 标签：html, css

我有以下代码：

```
<div style="width:560px">
    <div style="float: left; width: 50%; margin-bottom: 20px">
        <div style="float: left; width: 40%">
            <!-- Thumbnail -->
        </div>
        <div style="float: left; width: 60%">
            <!-- Title -->
            <!-- Author -->
            <!-- Price -->
            <!-- Quantity -->
            <!-- Add to Cart -->
        </div>
    </div>
</div> 
```

这是它的样子`Chrome`： ![在此处输入图像描述](../Images/e4dd11195a2e8db07f658dca6be2bf89.png)

但这就是它的样子`Firefox`： ![在此处输入图像描述](../Images/b56b3b3cc616a186db0661f90bf41458.png)

如何让 Firefox 像 Chrome 一样显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:06:36.277

**编辑：**睡前阅读：[960 网格系统](http://960.gs/)

这是由于第一个元素的高度在 Firefox 中“推动”了第三个元素，但在 Chrome 中没有。为什么会这样，我不知道。当不使用固定高度时，这是一个常见问题，在我看来，避免这种做法也是一种很好的做法，因为您*永远无法*真正判断某物的高度。

我可以建议对布局进行一些解决方法吗？它稍微手动一些，但会确保“行状”布局。通过简单地添加一个`row`div，它将允许您确保至少有 2 个项目连续，就像这样。

```
<div id="container">
    <div class="row">
        <div class="item">Item 1...</div>
        <div class="item">Item 2...</div>
    </div>
    <div class="row">
        <div class="item">Item 3...</div>
        <div class="item">Item 4...</div>
    </div>
    <div class="row">
        <div class="item">Item 5...</div>
        <div class="item">Item 6...</div>
    </div>
</div> 
```

为了“推动”新行开始，您需要在`row`课堂上清除两者。

**优点：**

*   将始终有 2 个项目连续
*   项目将始终从顶部开始级别

**缺点**

*   将其更改为`x`每行项目将需要 HTML 更改

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:12:46.080

您应该始终使用 CSS 重置。它有助于完全避免这些问题。我个人使用的是这个： [http ://html5reset.org/](http://html5reset.org/)

干杯，罗宾

# php - apns-php 使用生产配置文件发送推送通知

> ID：10518688
> 
> 赞同：1
> 
> 时间：2012-05-09T14:58:12.577
> 
> 标签：php, ios, notifications, push

我们使用apns-php来实现推送通知服务，最近遇到了这个问题：

推送通知适用于我们的开发配置文件，不适用于生产。

我们从苹果服务器没有收到任何错误，我们可以看到它们工作正常。这是日志

```
2012/05/09 07:26:50 [trace] [push_notification] APNS: INFO: Trying ssl://gateway.push.apple.com:2195...
2012/05/09 07:26:51 [trace] [push_notification] APNS: INFO: Connected to ssl://gateway.push.apple.com:2195.
2012/05/09 07:26:51 [trace] [push_notification] APNS: Added recipient iPad with YSA_ID:209
2012/05/09 07:26:51 [trace] [push_notification] APNS: Added recipient iPad with YSA_ID:323
2012/05/09 07:26:51 [trace] [push_notification] APNS: Added recipient iPad with YSA_ID:326
2012/05/09 07:26:51 [trace] [push_notification] APNS: INFO: Sending messages queue, run #1: 3 message(s) left in queue.
2012/05/09 07:26:51 [trace] [push_notification] APNS: STATUS: Sending message ID 1 [custom identifier: YSA-Notification-ID#181] (1/3): 121 bytes.
2012/05/09 07:26:51 [trace] [push_notification] APNS: STATUS: Sending message ID 2 [custom identifier: YSA-Notification-ID#181] (1/3): 121 bytes.
2012/05/09 07:26:51 [trace] [push_notification] APNS: STATUS: Sending message ID 3 [custom identifier: YSA-Notification-ID#181] (1/3): 121 bytes.
2012/05/09 07:26:52 [trace] [push_notification] APNS: INFO: Disconnected. 
```

如您所见，没有错误。但在 iPad 上没有收到任何通知。

也许有人以前遇到过这个问题？任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:13:53.760

在某处我读到这两个 SSL 证书都可以放入一个 PEM 文件中。不幸的是，这个提示似乎不正确......

我发现在一个 PEM 文件中同时拥有生产和沙盒 SSL 证书会导致生产环境静默失败。

解决方案是将 PEM 拆分为两个单独的文件并相应地将其传递给服务器：

```
$server=new ApnsPHP_Push_Server(ApnsPHP_Abstract::ENVIRONMENT_SANDBOX, 'server_certificates_bundle_sandbox.pem'); 
```

或者

```
$server=new ApnsPHP_Push_Server(ApnsPHP_Abstract::ENVIRONMENT_PRODUCTION, 'server_certificates_bundle_production.pem'); 
```

之后，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T07:10:47.087

另请检查您的 App Id 是否启用推送通知

# python - 安装 pip 和 virtualenv，鸡和蛋的困境？

> ID：10518689
> 
> 赞同：7
> 
> 时间：2012-05-09T14:58:18.923
> 
> 标签：python, installation, virtualenv, pip

我已经在使用 pip 和 virtualenv（实际上有时仍然更喜欢通过 SVN 存储库进行组织良好的组合，明智地使用 svn:externals 和动态 sys.path）。

但是这次对于新的服务器安装，我想以正确的方式做事。

所以我去了[pip 安装页面](http://www.pip-installer.org/en/latest/installing.html)，它说：

> 使用 pip 的推荐方法是在 virtualenv 中，因为每个 virtualenv 都自动安装了 pip。这不需要 root 访问权限或修改您的系统 Python 安装。[...]

然后我转到[virtualenv 安装页面](http://www.virtualenv.org/en/latest/index.html#installation)，它建议：

> 您可以使用 pip install virtualenv 安装 virtualenv，或者使用 pip install virtualenv==dev 安装最新的开发版本。您还可以使用 easy_install [...]

当然，pip 应该取代easy_install :)

当然，他们都解释了所有替代的安装方式。

但是……**应该先走哪一个？** 我**是否应该支持系统范围的点子**？

我看到一个需要思考的主要原因，但可能还有其他原因

*   我是否想为该盒子的所有用户提供便利，或者这是一个针对运行某些服务的单个*用户的服务器？*

如果我希望每个人都有一个可用的虚拟环境，我可能只安装一个系统范围的 pip（例如，使用 ubuntu`sudo aptitude install python-pip`然后使用它来安装 virtualenv `sudo pip install virtualenv`）。

**编辑**另一个需要考虑的原因：[virtualenvwrapper](http://www.doughellmann.com/projects/virtualenvwrapper/)安装说明（但不是[文档](http://www.doughellmann.com/docs/virtualenvwrapper/)）说：

> 注意 为了使用 virtualenvwrapper，您必须单独安装 virtualenv。

不完全确定“单独”是什么意思（我从未注意到）。

否则，应该先走哪一个，这真的有影响吗？

## 有关的：

最接近的问题（和答案）是以下第一个（特别是参见@elarson 答案），第二个看起来过于复杂：

*   [在系统范围内安装 pip 和 virtualenv 的官方“首选”方式是什么？](https://stackoverflow.com/questions/5585875/what-is-the-official-preferred-way-to-install-pip-and-virtualenv-systemwide/#5598635)
*   [为 Python 安装 pip、virtualenv 和分发的正确方法是什么？](https://stackoverflow.com/questions/4324558/whats-the-proper-way-to-install-pip-virtualenv-and-distribute-for-python/4325047#4325047)
*   [使用 pip 和 virtualenv 逐步设置 python？](https://stackoverflow.com/questions/4986896/step-by-step-setting-up-python-with-pip-and-virtualenv)
*   [默认情况下，系统 PIP 而不是 virtualenv PIP？](https://stackoverflow.com/questions/9235212/system-pip-instead-of-virtualenv-pip-by-default)

但我觉得这一切都无法完整地回答我的问题：系统范围与本地，但 pip 或 virtualenv 也应该先行（以及为什么他们将每个人发送给另一个人开始！！！）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T15:46:55.570

tl; dr 首先是 VirtualEnv。对于 Python 版本 2.x 和 3.x，您可以分别拥有两个

[编辑]

我真的很怀疑安装（没有安装，您只需下载并执行脚本） VirtualEnv 系统范围/每个用户是否重要。使用 VirtualEnv 的全部意义在于创建隔离的开发沙箱，以便一个项目中的库不会相互冲突。例如，您可以在两个不同的虚拟环境中使用 Beautiful-soup Version < 4.x 的 Python 2.x 项目和使用 Beautiful-soup 4.0 版的 Python 3.x 项目。

如何在系统上获取 VirtualEnv 脚本并不重要，因为一旦你拥有它并且 pip 是自包含在 VirtualEnv 中的，那么首先获取 VirtualEnv 就很有意义。同样，一旦您使用 python，您将拥有许多项目，并且对于每个项目，推荐的方法是拥有一个虚拟环境，然后通过 pip 安装依赖项。您可以稍后执行“pip freeze > requirements.txt”，然后执行“pip install requirements.txt”，以简单地在两个系统中复制您的确切库[比如开发和生产]等等......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:38:39.797

半个，六打另一个。（让它沉入水中。哈哈。）

但更严重的是，您的系统上真的有多个用户吗？如今，即使是 Linux 主机也倾向于为单个用户服务，并且在有多个用户 ID 的情况下，它们往往是在各种隔离用户 ID 下运行多个进程的服务器。鉴于此，让所有用户的生活更轻松并不是那么重要。

另一方面，每个使用 Python 的多个服务可能有相互冲突的要求，这种情况很少见，因为它甚至可以归结为所需的`pip`. 鉴于此，我倾向于更喜欢 virtualenv 的全局安装，以便进行 Python 的原始准安装。

然而，我想指出另一个想法：Buildout，[http ://www.buildout.org/](http://www.buildout.org/)

Buildout 与 virtualenv 做同样的事情，但采用了截然不同的方法。您编写一个构建配置文件 ( `buidout.cfg`)，列出您的各种鸡蛋是什么以及它们将如何连接，并指定设置特殊情况的“构建配方”设置（如 Django 部署、Buildbot 服务器、Plone 网站， Google 应用引擎应用等）。

然后你使用你的系统 Python 来引导构建，运行它，它会生成一个独立的设置——就像一个 virtualenv。

但最好的部分是：它是可重复的。您可以将其`buildout.cfg`带到另一台主机并获得相同的设置。**使用 virtualenv更难**做到这一点！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T15:32:30.620

尚未决定最终的解决方案，但这就是现在正在发生的事情，部分基于@nutjob 评论（不，我暂时没有切换到 buildout，但我稍后会花一些时间！）

我有一个大而强大的服务器，里面有很多 django 应用程序。我主要使用 gunicorn + supervisord。

这些要求规定了以下内容，但稍有不同的设置可能会有所不同。

1.  基于代码/功能的相似性，我将这些应用程序逻辑地组织在集群中；每个集群都可能有相同版本的常用 python 库（pylibmc、pillow 等）
2.  我创建了几个用户，每个集群一个
3.  对于每个用户，我通过下载 virtualenv.py 并运行来安装 virtualenv（与用户同名，由我自己选择）`python virtualenv.py VIRTUALENVNAME`；我没有安装 virtualenv 包装器
4.  我编辑该用户 .bashrc 以便立即加载 virtualenv
5.  我使用 pip 安装常用包，但更具体的包是通过 sys.path 直接添加的。这使我能够更快地部署，因为文件夹/版本控制项目结构在那里承载了所有大多数必需的库。我发现这更清晰，部署更快，更容易编辑。您的个人案例的里程可能会有所不同。

这意味着每个用户都有自己的单个 virtualenv。

如果我从头开始，我可能会转向构建或类似的解决方案（我不喜欢混合主管和 virtualenv 时会发生什么），但我现在对这个很满意......

# java - 有没有办法查看eclipse执行了哪些命令？

> ID：10518692
> 
> 赞同：2
> 
> 时间：2012-05-09T14:58:35.627
> 
> 标签：java, eclipse, command-line

这可能是一个愚蠢的问题，但我在使用`java -jar myapp.jar`.

当我使用菜单选择“作为 Java 应用程序运行”时，相同的应用程序在 Eclipse 中完美运行

我能否以某种方式让 eclipse 在控制台中向我显示它正在执行的确切内容，以便我可以通过命令行复制它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:04:26.280

当您从 Eclipse 启动应用程序时，转到 Debug Perspective 并在 Debug 视图中找到该应用程序。右键单击调试树中的类名（此处以蓝色突出显示）

![在此处输入图像描述](../Images/a9b83c1c80b7b20d6c11a14e86f51bd9.png)

选择属性，您可以在此处看到用于启动应用程序的命令行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:06:39.927

查看 myapp Java 应用程序运行配置的运行配置（运行 -> 运行配置...）。

Main 选项卡将显示主类。这是您必须添加到命令行的类，或者在构建可运行 jar 时指定。

Classpath 选项卡将向您显示在构建 jar 时必须在类路径上指定的任何其他 jar 或类文件。

# php - 将变量绑定到 Kohana 消息

> ID：10518693
> 
> 赞同：1
> 
> 时间：2012-05-09T14:58:39.440
> 
> 标签：php, kohana, kohana-3, kohana-3.2

有没有办法将变量传递给 Kohana 消息，然后可以通过 il8n 翻译获取，例如：

```
Kohana::message('user', 'greeting') 
```

消息/user.php：

```
return array
(
    'greeting' => __('user.greeting', array(':user' => $name ))
); 
```

i18n/en.php：

```
return array
(
    'greeting' => 'Hello, :user'
); 
```

我抓住了将 il8n 链接到来自[i18n 的消息和 Kohana 3 中的错误消息的方法](https://stackoverflow.com/questions/3430140/i18n-and-error-messages-in-kohana-3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:30:55.207

我没有您正在寻找的确切答案，但如果您不介意覆盖当前的 Kohana::message() 方法，我可以建议一个解决方案。我在自己的应用程序中做了类似的事情。

只需使用以下代码在您的“应用程序/类”中创建一个 Kohana.php 文件：

```
class Kohana extends Kohana_Core {

    public static function message($file, $path = NULL, $default = NULL, $replacements = array())
    {
        static $messages;

        if ( ! isset($messages[$file]))
        {
            // Create a new message list
            $messages[$file] = array();

            if ($files = Kohana::find_file('messages', $file))
            {
                foreach ($files as $f)
                {
                    // Combine all the messages recursively
                    $messages[$file] = Arr::merge($messages[$file], Kohana::load($f));
                }
            }
        }

        if ($path === NULL)
        {
            // Return all of the messages
            $message = $messages[$file];
        }
        else
        {
            // Get a message using the path
            $message = Arr::path($messages[$file], $path, $default);
        }

        return !empty($replacements) ? strtr($message,$replacements) : $message;
    }
} 
```

基本上，唯一值得注意的变化是添加了`$replacements`参数，`return !empty($replacements) ? strtr($message,$replacements) : $message;`它将消息的内容替换为替换数组中的内容。

所以你现在可以这样做：

`Kohana::message('user', 'greeting', NULL, array(':user' => $name));`

消息/user.php：

```
return array
(
    'greeting' => __('user.greeting'),
); 
```

# c# - 向谷歌电子表格添加一行

> ID：10518694
> 
> 赞同：6
> 
> 时间：2012-05-09T14:58:44.980
> 
> 标签：c#, row, add, google-spreadsheet-api

我正在尝试向谷歌电子表格添加一行。他们提供了一个来源[https://developers.google.com/google-apps/spreadsheets/#adding_a_list_row](https://developers.google.com/google-apps/spreadsheets/#adding_a_list_row) 但这个来源对我不起作用，谁能告诉我，包含名称“行”的行有什么问题。“错误 11 当前上下文中不存在名称‘行’”

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Google.GData.Client;
using Google.GData.Spreadsheets;

namespace Google_test3
{
class Program
{
    static void Main(string[] args)
    {
        string USERNAME = "test";
        string PASSWORD = "test";
        SpreadsheetsService service = new SpreadsheetsService("MySpreadsheetIntegration-v1");

        service.setUserCredentials(USERNAME, PASSWORD);

        // Instantiate a SpreadsheetQuery object to retrieve spreadsheets.
        SpreadsheetQuery query = new SpreadsheetQuery();

        // Make a request to the API and get all spreadsheets.
        SpreadsheetFeed feed = service.Query(query);

        if (feed.Entries.Count == 0)
        {
            Console.WriteLine("None");
        }

        // TODO: Choose a spreadsheet more intelligently based on your
        // app's needs.
        SpreadsheetEntry spreadsheet = (SpreadsheetEntry)feed.Entries[0];
        Console.WriteLine(spreadsheet.Title.Text);

        // Get the first worksheet of the first spreadsheet.
        // TODO: Choose a worksheet more intelligently based on your
        // app's needs.
        WorksheetFeed wsFeed = spreadsheet.Worksheets;
        WorksheetEntry worksheet = (WorksheetEntry)wsFeed.Entries[0];

        // Define the URL to request the list feed of the worksheet.
        AtomLink listFeedLink = worksheet.Links.FindService(GDataSpreadsheetsNameTable.ListRel, null);

        // Fetch the list feed of the worksheet.
        ListQuery listQuery = new ListQuery(listFeedLink.HRef.ToString());
        ListFeed listFeed = service.Query(listQuery);
        // Create a local representation of the new row.
        row.Elements.Add(new ListEntry.Custom() { LocalName = "firstname", Value = "Joe" });
        row.Elements.Add(new ListEntry.Custom() { LocalName = "lastname", Value = "Smith" });
        row.Elements.Add(new ListEntry.Custom() { LocalName = "age", Value = "26" });
        row.Elements.Add(new ListEntry.Custom() { LocalName = "height", Value = "176" });

        // Send the new row to the API for insertion.
        service.Insert(listFeed, row);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:02:34.123

文档中的示例中缺少一行：

```
ListEntry row = new ListEntry();
row.Elements.Add(new ListEntry.Custom() { LocalName = "firstname", Value = "Joe" });
row.Elements.Add(new ListEntry.Custom() { LocalName = "lastname", Value = "Smith" });
row.Elements.Add(new ListEntry.Custom() { LocalName = "age", Value = "26" });
row.Elements.Add(new ListEntry.Custom() { LocalName = "height", Value = "176" }); 
```

如果切换到 Java 视图，您可以看到 Java 版本包含这一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-20T12:19:25.730

Google 的这项服务已停产，现在他们提出了另一项名为 Google.Apis.Sheets.v4 的服务。

所以上面的代码现在一天都行不通了，我已经试过了。

并找到对我有用的东西。

我写了一个博客并在那里分享了整个源代码。一探究竟。

```
private static SheetsService AuthorizeGoogleApp()
 {
     UserCredential credential;

     using (var stream =
         new FileStream("client_secret.json", FileMode.Open, FileAccess.Read))
     {
         string credPath = System.Environment.GetFolderPath(
             System.Environment.SpecialFolder.Personal);
         credPath = Path.Combine(credPath, ".credentials/sheets.googleapis.com-dotnet-quickstart.json");

         credential = GoogleWebAuthorizationBroker.AuthorizeAsync(
             GoogleClientSecrets.Load(stream).Secrets,
             Scopes,
             "user",
             CancellationToken.None,
             new FileDataStore(credPath, true)).Result;
         Console.WriteLine("Credential file saved to: " + credPath);
     }

     // Create Google Sheets API service.
     var service = new SheetsService(new BaseClientService.Initializer()
     {
         HttpClientInitializer = credential,
         ApplicationName = ApplicationName,
     });

     return service;
 } 
```

对于整个源代码，请查看。 [使用 Google.Apis.Sheets.V4 服务向 Google 表格插入新行](https://developers.google.com/sheets/api/quickstart/dotnet)

# ios - 有没有办法在 iBook 小部件中捕获“关闭”事件？

> ID：10518696
> 
> 赞同：3
> 
> 时间：2012-05-09T14:58:55.970
> 
> 标签：ios, widget, ibooks

我有在 iBook 中运行的小部件。特别是，它们播放一些音乐和声音，以及 Javascript“主循环”。

每当用户关闭小部件时，我希望声音和音乐停止。我不知道 iBook 是否触发了一些类似“FocusLost”或“WidgetClosed”的事件。

据我目前的理解，这个用例不会触发“onunload”，因为每当 iPhone 决定回收一些内存时都会运行这个用例，因为它需要用户当前所在的页面。

这个问题的标准解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:18:54.843

`focusout`我使用和`blur`事件的组合部分解决了这个问题，并`tabindex=1`添加到了小部件`html`元素。

剩下的问题是，如果只是滑动并关闭，则缺乏焦点。

# ruby-on-rails - RoR Active Record 未知属性

> ID：10518698
> 
> 赞同：0
> 
> 时间：2012-05-09T14:59:09.117
> 
> 标签：ruby-on-rails, activerecord

在为名为 wearquests 的表提交表单后，我收到 ActiveRecord 错误。错误是“未知属性：contact_id”。但是， wearquests 表包含contact_id。它是联系人表的外键。在我的 wearquest 模型中，我有“belongs_to :contact”，在我的联系人模型中，我有“has_many :worequests”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:18:50.477

您是否进行过迁移？添加关系后，您需要添加对架构的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T23:19:31.707

我解决了这个问题。当我创建 wearquest 时，我也有在评论表中创建记录的代码。代码在 wearquest 模型中。在这行代码中，我输入了一个错误的字段。

# asp.net-mvc-3 - 没有为此对象定义无参数构造函数 MVC3

> ID：10518699
> 
> 赞同：2
> 
> 时间：2012-05-09T14:59:10.883
> 
> 标签：asp.net-mvc-3, object

我已经搜索并尝试了我的问题，但我找不到解决方案，我想知道是否有人可以帮助我修复我的代码..

我有一个编辑用户的视图..

```
 @model MembershipUser
 @{
ViewBag.Title = "Edit";
Layout = "~/Views/Shared/_Layout.cshtml";
 }

@using (Html.BeginForm()) {

@Html.ValidationSummary(true)
<fieldset>  
    <div class="editor-label">
      Username:
    </div>
    <div class="editor-field">
    @Html.DisplayFor(model => model.UserName)
    </div>

    <div class="editor-label">
       Email:
    </div>
    <div class="editor-field">
    @Html.EditorFor(model => model.Email)
    </div>

 <div class="editor-label">
       Password:
    </div>
    <div class="editor-field">
   @Html.DisplayFor(model => model.Password) 
    </div>
          <p>
        <input type="submit" value="Save" />
    </p>
</fieldset> 
```

然后在控制器中执行一个可以获取用户信息的操作..

```
 [Authorize(Roles = "Admins")]
    public ActionResult Edit(string username)
    {
        var usu = Membership.GetUser(username);
        return View(usu);
    } 
```

另一个可以更新用户..

```
 [Authorize(Roles = "Admins")]
    [HttpPost]
    public ActionResult Edit(MembershipUser umtoupdate)
    {

MembershipUserCollection iduser = Membership.GetAllUsers();            

        if(umtoupdate.Password != umtoupdate.ConfirmPassword)
        {
                alert = "Password dont match!";
                return View("Users", "Admin");
        }

        else {

            foreach (MembershipUser um in iduser) {

                if (um.UserName == umtoupdate.UserName) {

                    Membership.DeleteUser(um.UserName, true);

                    // Attempt to register the new updated user
                    MembershipCreateStatus createStatus;
                    Membership.CreateUser(umtoupdate.UserName,
                    umtoupdate.Password,
                    umtoupdate.Email,
                    umtoupdate.PasswordQuestion,
                    umtoupdate.AnswerQuestion, true, null, out createStatus);

                }
            }
        }

               return View("Details", umtoupdate.UserName);

     } 
```

在这个类中，我定义了一个构造函数，它创建一个列表来做另一件事（我放是因为它告诉我一些关于无参数构造函数的事情）..

```
 public AdminController()
    {

    foreach (MembershipUser member in iduser) {

            UserEntity entity2 = new UserEntity();
            entity2.Username = member.UserName;
            entity2.Roles = "Users";
            entity2.Email = member.Email;
            for (int i = 1; i < iduser.Count; i++)
            {
                entity2.ID_client = i;
            }
            _entities.Add(entity2);

       } 
```

然后，我去编辑一个用户，我可以去第一个视图（可以在哪里编辑信息）但是当我尝试保存更新的信息并去第二个视图更新用户时，它告诉我

“[MissingMethodException 没有为此对象定义无参数构造函数。”

有人可以告诉我如何解决吗？如果我更改 Edit(string) 并删除 string 参数，但在这种情况下我无法获取 info 用户，并且如果我添加另一个没有参数的视图，它不会因为歧义而工作。

谢谢。

* * *

好的，谢谢，我不知道它没有公共构造函数！但是，如果我从 MembershipUser 做另一个继承类（例如，如你所说的 MyUser，使用公共构造函数）并且我做

```
public ActionResult Edit(MyUser umtoupdate) {...} 
```

当我尝试获取用户信息时，告诉我我使用 MembershipUser 字典而不是 MyUser 字典，因为使用另一个视图

```
[Authorize(Roles = "Admins")]
public ActionResult Edit(string username)
{
    var usu = Membership.GetUser(username);
    return View(usu);
} 
```

使用 membeship 类并返回一个会员用户，在这种情况下我不能使用 MyUser.GetUser，因为它是 Membership 的一种方法！

我能做些什么来解决它？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T15:02:58.020

ModelBinder 尝试将您的表单绑定到 MembershipUser。不幸的是 MembershipUser 没有公共的默认构造函数。如果您想使用 ModelBinder，这是一个要求...

我建议创建一些其他类（例如 MyUser）并将此类用作您的 ViewModel。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T06:41:57.387

MembershipUser 没有默认的公共无参数构造函数，因此您必须将对象包装在另一个类中，以使其作为模型可供您的视图访问。

```
public class MyUserModel
{
    public MembershipUser User { get; set; }
} 
```

在您的控制器中：

```
MyUserModel model = new MyUserModel { User = Membership.GetUser() }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:32:53.517

我通过在模型对象构造函数中设置值来完成此操作

模型示例：

```
public class ViewModel
{
    public MembershipUser User { get; set; }

    public ViewModel()
    {
        User = Membership.GetUser();
    }
} 
```

POST 动作示例：

```
[HttpPost]
public ActionResult Account(ViewModel model)
{
    Membership.UpdateUser(model.User);
    return View(model);
} 
```

# file - 是否可以通过FTP获取服务器上文件夹的属性

> ID：10518701
> 
> 赞同：0
> 
> 时间：2012-05-09T14:59:13.637
> 
> 标签：file, ftp, download

我想从远程服务器下载图像。协议是FTP。是否可以获取服务器上文件夹的属性，例如名称和上次修改日期，以便决定是否应该下载文件夹中的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:06:54.133

您使用什么语言？

这绝对是可能的，因为信息是可用的。[这是php中的解决方案。](https://stackoverflow.com/questions/2462269/get-modified-date-via-ftp-using-php-curl)

# java - 如何从保留字符列表中删除最后一个字符？

> ID：10518707
> 
> 赞同：0
> 
> 时间：2012-05-09T14:59:49.650
> 
> 标签：java, parsing

我如何`|`从我的偶数/奇数条件中删除最后一个？

例子：

```
import java.io.*;
import java.net.Socket;

public class Test {

  public static String _noManualTraceIt = "0008e07cd8ec6cfdb900283508004500004a7d8d400080060000c0a80087c0a800c6c6931388956304704eebd50c5018ffff82da0000674500000504000000000000030000000000000000000000060000000000ff210000";
  public static void main(String[] args) throws IOException {
    System.out.println( wireShirk(_noManualTraceIt) );
  }

  public static byte[] wireShirk(String bytes) throws IOException {
    String temp = "";
    String replaceIfOnLastFound = "||&|\r\n|\n\r|etc|etc";

    int _i = 0;
    do {
      temp += bytes.charAt(_i);     
      if(_i%2 ==0) {
      } else {
        temp += "|";
      }
      System.out.println(bytes.length() + " " + _i + " " + two.charAt(_i) + " " + temp);
      _i++;
    } while(_i<bytes.length());

    bytes = temp; // << replaceIfOnLastFound any of those characters 
                  // | or & or \r\n or etc etc from that variable

    String byteArrayStr[] = bytes.split("\\|");
    byte bytesArray[] = new byte[byteArrayStr.length];
    for (int i = 0; i < byteArrayStr.length; ++i) {
      bytesArray[i] = (byte) (Integer.parseInt(byteArrayStr[i], 16));
    }
    return bytesArray;
  }  

} 
```

输出：

```
176 175 0 00|08|e0|7c|d8|ec|6c|fd|b9|00|28|35|08|00|45|00|00|4a|7d|8d|40|00|80|06|00|00|c0|a8|00|87|c0|a8|00|c6|c6|93|13|88|95|63|04|70|4e|eb|d5|0c|50|18|ff|ff|82|da|00|00|67|45|00|00|05|04|00|00|00|00|00|00|03|00|00|00|00|00|00|00|00|00|00|00|06|00|00|00|00|00|ff|21|00|00| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:04:48.737

在循环内添加 if 语句 ..

```
} else {
   if(i < bytes.length - 1){
    temp += "|";
   }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:11:48.723

重新排序添加管道符号和十六进制字符的步骤并添加条件

```
if (temp.length() > 0) {
  temp += '|';
} 
```

这样，您首先添加分隔符，而不是第一次循环迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:08:07.820

这是一个简单的例子，没有使用任何逻辑，但是有一个分隔变量的常量（重新）分配：

```
String separator = "";
String output = "";
for (String s : my_list) {
  output += separator + s;
  separator = "|";
} 
```

# objective-c - 在 XCode 中计算 URL 处的文件数

> ID：10518714
> 
> 赞同：1
> 
> 时间：2012-05-09T15:00:11.100
> 
> 标签：objective-c, ios, xcode

我需要计算 XCode 中文件夹 URL 中包含的文件数量，以便能够知道我想要获取多少图像以及需要在屏幕中创建多少按钮。

我找到了一些关于在您的脱机目录中计算文件的信息，但不知道如何为 URL 执行此操作。

这是一个适用于离线的示例：

```
int numberOfFileInFolder = [[[NSFileManager defaultManager] contentsOfDirectoryAtPath:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"/Angry"] error:Nil] count]; 
```

我想做同样的事情，但是对于诸如@“http://hello/images/”之类的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:08:44.233

你不能以简单的方式做到这一点。一种解决方案是使用 FTP 连接到该文件夹​​（[如何设置 FTP 连接？](https://stackoverflow.com/q/4805998/855738)），然后检索其中的文件列表（将[FTP 目录内容下载到 ios](https://stackoverflow.com/q/10407238/855738)）

当我遇到与您相同的问题时，我使用的另一个解决方案是下载包含文件夹中文件列表的 xml（或任何您喜欢的内容）。使用脚本页面很容易生成这样的 xml 文件，例如执行类似[http://hello/images/folder_listing.php 之](http://hello/images/folder_listing.php)类的操作，它会为您提供 xml。当然，这意味着您可以访问该服务器

如果您真的非常非常幸运，访问[http://hello/images](http://hello/images)可能会返回一个简单的 html 页面，其中包含文件夹内所有对象的列表，Apache 有时会自动执行此操作，其中如果您可以对页面的 html 源代码进行某种解析。

无论哪种方式，你都在做相当多的工作，祝你好运！

# configuration - 用于限制对特定 SQS 队列的访问的 AWS IAM 用户策略

> ID：10518715
> 
> 赞同：9
> 
> 时间：2012-05-09T15:00:12.800
> 
> 标签：configuration, amazon-web-services, policy, amazon-sqs, amazon-iam

我正在尝试为 AWS IAM 用户设置用户策略以访问特定的 AWS SQS 队列。

当我尝试使用以下策略时，我收到错误 AccessDenied。

```
{
  "Statement": [
    {
      "Action": ["sqs:*"],
      "Effect": "Allow",
      "Resource": ["arn:aws:sqs:us-east-1:my_aws_account_id:queue_name"]
    }
  ]
} 
```

但是，当我尝试使用相同的策略时，仅将 arn 的 queue_name 部分替换为 *，它可以工作：

```
{
  "Statement": [
    {
      "Action": ["sqs:*"],
      "Effect": "Allow",
      "Resource": ["arn:aws:sqs:us-east-1:my_aws_account_id:*"]
    }
  ]
} 
```

尝试限制对特定队列的访问时可能会出现什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T21:58:16.153

您尝试使用特定于队列的策略执行什么操作？我做了以下事情：

1.  创建了一个队列（所有默认值）
2.  定义了一个 IAM 用户并添加了一个与您的 #1 格式相同的用户策略
3.  添加一条消息，检索一条消息并删除一条消息 -**没有问题**
4.  执行了*高于*队列级别的操作（如列表队列）**错误**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-23T22:23:10.203

我遇到了类似的情况，发现这`"arn:aws:sqs:*:*:queue_name"`对我有用。

# mysql - Group by 在查询中的奇怪行为需要优化

> ID：10518718
> 
> 赞同：7
> 
> 时间：2012-05-09T15:00:17.777
> 
> 标签：mysql, optimization, subquery

谁能帮我优化这个查询

```
SELECT 
  `debit_side`.`account_code` CODE,
  GROUP_CONCAT(DISTINCT accounts.name) AS DebitAccount,
  GROUP_CONCAT(debit_side.amount) AS DebitAmount,
  GROUP_CONCAT(transaction_info.voucher_date) AS DebitVoucherDate,
  (SELECT 
    GROUP_CONCAT(DISTINCT accounts.name) 
  FROM
    (accounts) 
    LEFT JOIN debit_side 
      ON accounts.code = debit_side.account_code 
    LEFT JOIN credit_side 
      ON debit_side.transaction_id_dr = credit_side.transaction_id_cr 
    LEFT JOIN transaction_info 
      ON transaction_info.transaction_id = credit_side.transaction_id_cr 
  GROUP BY credit_side.account_code 
  HAVING credit_side.account_code = `Code`) AS CreditAccount,
  (SELECT 
    GROUP_CONCAT(credit_side.amount) AS CreditAmount 
  FROM
    (accounts) 
    LEFT JOIN debit_side 
      ON accounts.code = debit_side.account_code 
    LEFT JOIN credit_side 
      ON debit_side.transaction_id_dr = credit_side.transaction_id_cr 
    LEFT JOIN transaction_info 
      ON transaction_info.transaction_id = credit_side.transaction_id_cr 
  GROUP BY credit_side.account_code 
  HAVING credit_side.account_code = `Code`) AS CreditAmount,
  (SELECT 
    GROUP_CONCAT(transaction_info.voucher_date) AS CreditVoucherDate 
  FROM
    (accounts) 
    LEFT JOIN debit_side 
      ON accounts.code = debit_side.account_code 
    LEFT JOIN credit_side 
      ON debit_side.transaction_id_dr = credit_side.transaction_id_cr 
    LEFT JOIN transaction_info 
      ON transaction_info.transaction_id = credit_side.transaction_id_cr 
  GROUP BY credit_side.account_code 
  HAVING credit_side.account_code = `Code`) AS CreditVoucherDate 
FROM
  (`accounts`) 
  LEFT JOIN `credit_side` 
    ON `accounts`.`code` = `credit_side`.`account_code` 
  LEFT JOIN `debit_side` 
    ON `debit_side`.`transaction_id_dr` = `credit_side`.`transaction_id_cr` 
  LEFT JOIN `transaction_info` 
    ON `transaction_info`.`transaction_id` = `credit_side`.`transaction_id_cr` 
GROUP BY `debit_side`.`account_code` 
HAVING `Code` IS NOT NULL 
ORDER BY `debit_side`.`account_code` ASC 
```

实际上，在此查询中，我试图获取所有帐户的借方和贷方数据。您一定已经注意到子查询重复但选择不同的列。此查询正在获取完美的结果，但我希望对其进行优化。这是我的架构的链接

[http://www.sqlfiddle.com/#!2/82274/6](http://www.sqlfiddle.com/#!2/82274/6)

以前我有这两个查询，我试图将它们结合起来

```
SELECT
  debit_side.account_code    DebitCode,
  group_concat(distinct accounts.name) as DebitAccount,
  group_concat(debit_side.amount) as DebitAmount,
  group_concat(transaction_info.voucher_date) as DebitVoucherDate
FROM (`accounts`)
  LEFT JOIN `credit_side`
    ON `accounts`.`code` = `credit_side`.`account_code`
  LEFT JOIN `debit_side`
    ON `debit_side`.`transaction_id_dr` = `credit_side`.`transaction_id_cr`
  LEFT JOIN `transaction_info`
    ON `transaction_info`.`transaction_id` = `credit_side`.`transaction_id_cr`
GROUP BY `debit_side`.`account_code`
ORDER BY `debit_side`.`account_code` ASC 
```

和

```
SELECT
  credit_side.account_code    CreditCode,
  group_concat(distinct accounts.name) as CreditAccount,
  group_concat(credit_side.amount) as CreditAmount,
  group_concat(transaction_info.voucher_date) as CreditVoucherDate
FROM (`accounts`)
  LEFT JOIN `debit_side`
    ON `accounts`.`code` = `debit_side`.`account_code`
  LEFT JOIN `credit_side`
    ON `debit_side`.`transaction_id_dr` = `credit_side`.`transaction_id_cr`
  LEFT JOIN `transaction_info`
    ON `transaction_info`.`transaction_id` = `credit_side`.`transaction_id_cr`
GROUP BY `credit_side`.`account_code`
ORDER BY `credit_side`.`account_code` ASC 
```

我还想删除正在获取的空记录。注意：您还应该注意，在子查询中，我根据我的要求使用了一些不同的条件。

编辑

我已经解决了删除空记录的问题，但优化仍然存在。

新编辑

这是我尝试使用半连接的方法

```
SELECT
  `lds`.`account_code`    DebitCode,
  group_concat(distinct la.name) as DebitAccount,
  group_concat(lds.amount) as DebitAmount,
  group_concat(lti.voucher_date) as DebitVoucherDate,
  `rcs`.`account_code`    CreditCode,
  group_concat(distinct ra.name) as CreditAccount,
  group_concat(rcs.amount) as CreditAmount,
  group_concat(rti.voucher_date) as CreditVoucherDate
FROM accounts as la
  LEFT join accounts as ra
    ON ra.`code` = la.`code`
  LEFT JOIN `credit_side` as lcs
    ON `la`.`code` = `lcs`.`account_code`
  LEFT JOIN `debit_side` as lds
    ON `lds`.`transaction_id_dr` = `lcs`.`transaction_id_cr`
  LEFT JOIN `transaction_info` as lti
    ON `lti`.`transaction_id` = `lcs`.`transaction_id_cr`
  LEFT JOIN `debit_side` as rds
    ON `ra`.`code` = `rds`.`account_code`
  LEFT JOIN `credit_side` rcs
    ON `rds`.`transaction_id_dr` = `rcs`.`transaction_id_cr`
  LEFT JOIN `transaction_info` as rti
    ON `rti`.`transaction_id` = `rcs`.`transaction_id_cr`
GROUP BY `CreditCode`
HAVING `CreditCode` IS NOT NULL
ORDER BY `CreditCode` ASC 
```

奇怪的是，如果我通过使用 DebitCode 更改组并订购，它会为借方带来完美的记录，如果我使用 CreditCode 更改它，如果为贷方带来完美的记录。有没有办法克服这个问题或任何替代方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:31:51.467

我一直在研究您的架构和 SQL，但我不太了解您的逻辑。我看到的东西：

*   您有一组交易（准确地说是 9 个）；
*   对于每笔交易，您都有借方和贷方的详细信息；
*   使用`account_code`每一面，您可以获得有关帐户的信息。

因此，对于初学者，我会采用这种方式并创建一个`VIEW`，它将为您提供有关您的交易的所有必要信息。我在`INNER`这里使用了联接，因为我相信每笔交易都*必须*有借方和贷方，而每一方都应该有一个帐户：

```
CREATE VIEW all_transactions AS
SELECT ti.transaction_id tid, ti.voucher_no tvno, ti.voucher_date tvdt,
       ds.account_code dacc, ds.amount damt, da.name daname, da.type dat,
       cs.account_code cacc, cs.amount camt, ca.name caname, ca.type cat
  FROM transaction_info ti
  JOIN debit_side ds ON ds.transaction_id_dr = ti.transaction_id
  JOIN credit_side cs ON cs.transaction_id_cr = ti.transaction_id
  JOIN accounts da ON da.code = ds.account_code
  JOIN accounts ca ON ca.code = cs.account_code; 
```

现在，查看您的查询，您似乎正在尝试获取每个帐户代码的所有柜台操作的列表。我不确定这样做的目的是什么，但我会执行以下操作：

*   选择了唯一帐户代码列表；
*   为每个帐户代码创建了借方操作的汇总列表，其中此类代码位于贷方；
*   为贷方操作创建相同的汇总列表，其中此类帐户位于借方；
*   并将每个帐户代码放在中间。

所以这样的事情可能会完成这项工作：

```
SELECT group_concat(dacc) "D-Accounts",
       group_concat(damt) "D-Amounts",
       group_concat(daname) "D-Names",
       group_concat(dvdt) "D-Dates",
       code, name,
       group_concat(cacc) "C-Accounts",
       group_concat(camt) "C-Amounts",
       group_concat(caname) "C-Names",
       group_concat(cvdt) "C-Dates"
  FROM (
    SELECT atl.dacc, atl.damt, atl.daname, atl.tvdt dvdt,
           a.code, a.name, NULL cacc, NULL camt, NULL caname, NULL cvdt
      FROM accounts a
      LEFT JOIN all_transactions atl ON atl.cacc = a.code
    UNION ALL
    SELECT NULL, NULL, NULL, NULL, a.code, a.name,
           atr.cacc, atr.camt, atr.caname, atr.tvdt cvdt
      FROM accounts a
      RIGHT JOIN all_transactions atr ON atr.dacc = a.code
  ) full_join
 GROUP BY code, name
 ORDER BY code; 
```

在内部，我`FULL OUTER`通过联合其他 2 个连接`LEFT`和一个来模拟连接`RIGHT`。外部执行所有分组。[看看结果](http://www.sqlfiddle.com/#!2/80160/1)。

请注意，如果您想从结果中添加/删除列，您应该修改内部和外部查询。

我希望这是你一直在寻找的。

# sharepoint - 使用 PowerShell 检测 SharePoint 2010 网站的搜索设置

> ID：10518722
> 
> 赞同：0
> 
> 时间：2012-05-09T15:00:25.027
> 
> 标签：sharepoint, search, powershell

## 问题

我们有一个外联网，可以将组隔离到单独的网站集中。为了防止通过搜索泄露信息，我们将所有站点的搜索可见性设置为“从不索引 ASPX 页面”。由于站点管理员可以更改该设置，因此我们计划使用一个脚本来报告任何已启用 ASPX 索引的站点并安排它定期运行。以下是我到目前为止所拥有的。它仅报告每个网站集的根网站。我将为网站集中的所有网站添加一个循环，但可以等到脚本运行。

当我更改开发框中某个根站点的搜索设置时，“http://spdevlc01”我看不到脚本输出有任何变化。[AllowAutomaticASPXPageIndexing](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.allowautomaticaspxpageindexing.aspx)的MSDN 页面表明它确实在检测站点上细粒度权限的使用，而不是实际配置设置本身，因此我添加了检索 WebASPXPageIndexMode 的行。当我手动将设置更改为“从不索引此站点上的任何 Web 部件”并运行脚本时，为该站点返回的[WebASPXPageIndexMode](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webaspxpageindexmode.aspx)值不会更改，它始终显示“0”，这意味着自动索引。

## 脚本

```
# Down to Set-Location $home, copied form SharePoint Management Shell. Need to be in place to have the SharePoint cmdlets and prevent memory leak.
$ver = $host | select version
if ($ver.Version.Major -gt 1)  {$Host.Runspace.ThreadOptions = "ReuseThread"}
Add-PsSnapin Microsoft.SharePoint.PowerShell
Set-location $home

# Get all the web applications in the farm, minus Central Admin
$webApplications = Get-SPWebApplication

# Enumerate all SharePoint web application
foreach($webApplication in $webApplications.GetEnumerator())
{
    # Enumerate all the site collections in the web application.
    foreach($siteCollection in $webApplication.sites)
    {
       # Reference to the AllowAutomaticASPXIndexing: http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.allowautomaticaspxpageindexing.aspx
       $rootWeb = $siteCollection.RootWeb
       "$($rootWeb.Url) : $($rootWeb.AllowAutomaticASPXPageIndexing)"  
       "$($rootWeb.Url) : $($rootWeb.WebASPXPageIndexMode -as [int]) " 

       $rootWeb.Close()
       $siteCollection.Close()
    }
} 
```

## 输出

```
http://spdevlc01:22000/sites/GetTogether : False
http://spdevlc01:22000/sites/GetTogether : 0
http://spdevlc01:22000/sites/KB : False
http://spdevlc01:22000/sites/KB : 0
http://spdevlc01:22000/sites/TW :
http://spdevlc01:22000/sites/TW : 0
http://spdevlc01 : False
http://spdevlc01 : 0 
```

# css - IE7 z-index 层错误

> ID：10518723
> 
> 赞同：1
> 
> 时间：2012-05-09T15:00:26.670
> 
> 标签：css, z-index, internet-explorer-7

> **可能重复：**
> [IE7 Z-Index 分层问题](https://stackoverflow.com/questions/1287439/ie7-z-index-layering-issues)

IE7 上的一个错误让我发疯......导航位于本网站主页上的 jquery 循环滑动面板下：http: [//www.marshall-trailers.co.uk/](http://www.marshall-trailers.co.uk/)

我已经对已知的 IE7 z-index 错误进行了修复，但它仍然不起作用。我也一直在看我最近做的另一个网站[http://www.dowdeswell.co.uk/](http://www.dowdeswell.co.uk/) 确实有效！

主要的 css 文件是：www.marshall-trailers.co.uk/css/screen.css 要查看的 div 是：nav_container、slider_wrapper、slider

我认为这将是一件非常简单的事情......有人可以让我摆脱痛苦吗？！

干杯，

抢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:13:49.113

您只需将“.nav_container”规则中的“z-index:100”属性移动到“#header”规则。

IE7 中元素的 z-index 仅相对于它们在代码层次结构中的兄弟元素......如果这有意义的话;）

# c# - 将单选按钮绑定到特定对象列表中的枚举

> ID：10518724
> 
> 赞同：2
> 
> 时间：2012-05-09T15:00:29.430
> 
> 标签：c#, wpf, enums, radio-button

我有以下情况：

*   我有一个对象列表 ( `List<MyObjects>`)。
*   该类`MyObjects`包含一个名为的枚举`States`和一些其他属性，例如`ObjectName`：

    ```
    public enum States { State1, State2, State3, State4, State5 }
    public string ObjectName { get; set; }
    // some more Properties 
    ```

    和一个私有字段和一个像这样的属性：

    ```
    private States _state = States.State1; // State1 is the default state

    public States State
    {
      get { return _state; }
      set
      {
        if (_state != value)
        {
          _state = value;  
          OnPropertyChanged("State");
        }
      }
    } 
    ```

*   在我的 XAML 中，我想为`MyObjects`我的枚举的每个状态显示 ListView 中的列表和五个单选按钮。我这样做如下：

    ```
    <ListView x:Name="myObjectsListView"
              ItemsSource="{Binding MyObjectList}">
      <ListView.View>
        <GridView>
           <GridViewColumn DisplayMemberBinding="{Binding ObjectName}"
                           Header="Object Name"
                           Width="Auto"/>
           <!-- some more GridViewColumns -->
         </GridView>
       </ListView.View>
    </ListView>
    <StackPanel>
        <RadioButton x:Name="state1RB"
            Content="{x:Static States.State1}"
            IsChecked="{Binding ElementName=myObjectsListView, Path=SelectedItem.State,
                UpdateSourceTrigger=PropertyChanged,
                Converter={StaticResource enumToBool},
                ConverterParameter={x:Static States.State1},
                Mode=TwoWay}"/>

        <RadioButton x:Name="state2RB"
            Content="{x:Static States.State2}"
            IsChecked="{Binding ElementName=myObjectsListView, Path=SelectedItem.State,
                UpdateSourceTrigger=PropertyChanged,
                Converter={StaticResource enumToBool},
                ConverterParameter={x:Static States.State2},
                Mode=TwoWay}"/>

        <RadioButton x:Name="state3RB"
            Content="{x:Static States.State3}"
            IsChecked="{Binding ElementName=myObjectsListView, Path=SelectedItem.State,
                UpdateSourceTrigger=PropertyChanged,
                Converter={StaticResource enumToBool},
                ConverterParameter={x:Static States.State3},
                Mode=TwoWay}"/>

        <RadioButton x:Name="state4RB"
            Content="{x:Static States.State4}"
            IsChecked="{Binding ElementName=myObjectsListView, Path=SelectedItem.State,
                UpdateSourceTrigger=PropertyChanged,
                Converter={StaticResource enumToBool},
                ConverterParameter={x:Static States.State4},
                Mode=TwoWay}"/>

        <RadioButton x:Name="state5RB"
            Content="{x:Static States.State5}"
            IsChecked="{Binding ElementName=myObjectsListView, Path=SelectedItem.State,
                UpdateSourceTrigger=PropertyChanged,
                Converter={StaticResource enumToBool},
                ConverterParameter={x:Static States.State5},
                Mode=TwoWay}"/>
    </StackPanel> 
    ```

*   我正在使用一个 EnumToBoolean 转换器，它看起来像这样：

    ```
    [ValueConversion(typeof(System.Enum), typeof(bool))]
    public class EnumToBooleanConverter : IValueConverter
    {
      public object Convert (object value, Type targetType, object parameter, CultureInfo culture)
      {
         return value.Equals (parameter);
      }

      public object ConvertBack (object value, Type targetType, object parameter, CultureInfo culture)
      {
        if ((Boolean)value)
          return parameter;
        return null;
      }
    } 
    ```

绑定有效，单选按钮的显示有效，但问题是当我为 ListView 中的第一个元素检查另一个单选按钮时，它 `State`被正确保存。当我现在更改 ListView 中的选定项目，然后再次选择 ListView 中的第一个项目时，没有选中单选按钮，因为`State`没有调用属性的 getter。

我正在寻找解决方案，但我的具体问题是，我有一个`MyObjects`包含状态的列表，并且在更改所选项目时，也应更改所选单选按钮。

我希望有人能理解我的问题并能提供帮助。

在此先感谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:07:24.577

如果您使用的是 MVVM，我发现了一种使用 ICommand 更新视图模型中的 SelectedItem 的好方法。XAML 看起来像这样。

```
 <RadioButton x:Name="state5RB"
    Content="{x:Static States.State5}"
    Command="{Binding UpdateSelectedItemCommand}"
    IsChecked="{Binding Path=State,
        UpdateSourceTrigger=PropertyChanged,
        Converter={StaticResource enumToBool},
        ConverterParameter={x:Static States.State5},
        Mode=TwoWay}">
       <RadioButton.CommandParameter>
           <myEnum:State>State5</myEnum:State>          
       </RadioButton.CommandParameter>

   </RadioButton> 
```

ViewModel 看起来像这样：

```
ICommand UpdateSelectedItemCommand {get;set;}

..

UpdateSelectedItemCommand = new DelegateCommand( (param) =>
{
   State= (States) param;
}); 
```

将 DelegateCommand 替换为实现 ICommand 的自定义对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:25:30.397

您的代码有效，我在一个新项目中重新创建了它，它正确更新单选按钮以在您更改 SelectedItem 时反映最新值（即在将选择更改为非默认值之后）。

我认为您在项目中还有其他干扰因素，您应该尝试取出解决方案的一部分并单独测试它们。

# string - 使用多个子字符串扩展字符串

> ID：10518727
> 
> 赞同：1
> 
> 时间：2012-05-09T15:00:45.777
> 
> 标签：string, bash

我需要从包含多个子字符串的字符串中提取数据。

例子：

```
@string1 = "string 1"
@string2 = "string 2"
@string3 = "string 3" @string1 @string2 
```

我需要扩展string3。结果将是：

“字符串 3 字符串 2 字符串 1”

如何使用 Bash 扩展列表？

* * *

实际上，我需要读取现有 gitolite 配置文件的一部分，以便格式正确。该字符串始终以“@”开头。一个字符串可以包含一个子字符串。

这是格式的样子：

```
@string1 = hello
@string2 = everyone 
@resultstring = @string1 @string2 this is a string 
```

现在我想扩展@resultstring。结果将是：“大家好，这是一个字符串”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:10:08.913

你想要的是

```
string1='string 1'
string2='string 2'
string3="string 3 $string1 $string2" 
```

单引号用于强引用，不扩展变量，而另一方面，您可以在双引号内扩展变量。

另请参阅[http://mywiki.wooledge.org/Quotes](http://mywiki.wooledge.org/Quotes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T16:51:00.493

如果“=”在其他地方硬编码，您可以将此 awk 助手与任何 posix shell 一起使用：

```
#!/bin/sh
print_var(){
    awk 'BEGIN{FS=" = "}
    {   if ($1=="'$1'"){
            len=split($2,words," ")
            for(i=0;i<=len;i++){
                if (match(words[i],"@")) printf strings[words[i]]
                else printf words[i]
                printf (i==len)?"\n":" "
            }
        } else strings[$1]=$2
    }' $2
}

print_var @resultstring input 
```

或者如果 bash-4.0isms 没问题，您可以直接将该字符串读入关联数组

```
#!/bin/bash
print_var(){
    declare -A STRINGS
    while read FIRST EQUAL STRING || [ "$FIRST" ]; do
        case $FIRST in
        @*)STRINGS["${FIRST#@}"]="$STRING";;
        esac
    done < "$2"
    for x in ${STRINGS[${1#@}]};  do
        case $x in
        @*)printf "%s " ${STRINGS[${x#@}]};;
        *)printf "%s " "$x";;
        esac
    done
    echo
}

print_var @resultstring input 
```

# python - add2virtualenv（virtualenv 包装器）不适用于 scipy

> ID：10518729
> 
> 赞同：6
> 
> 时间：2012-05-09T15:00:53.133
> 
> 标签：python, macos, scipy, virtualenv, virtualenvwrapper

我想创建一个没有全局 python 包的 virtualenv，但使用共享的 scipy 发行版；安装 scipy 需要相当长的时间，我不想经常经历这些动作。

所以我运行`add2virtualenv /Library/Python/2.7/site-packages/scipy`并在运行 add2virtualenv 后显示目录已添加。（我仔细检查了，它是正确的目录）。然后我发出`workon myfile`以确保重新加载工作目录。但是，当我尝试加载 scipy 时，它是一个`ImportError: No module named scipy`. 这是出乎意料的。

有没有人在非全局站点包 virtualenv 中使用全局 scipy？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-06T10:04:20.263

所以，总结一下，这里的实际问题是必须使用包含要导入的包的目录，而不是具体的包。也就是说，而不是

```
add2virtualenv /Library/Python/2.7/site-packages/scipy 
```

它应该是

```
add2virtualenv /Library/Python/2.7/site-packages 
```

请注意：此解决方案的缺点是您不仅包含 scipy，还包含`/Library/Python/2.7/site-packages`.

* * *

另一种节省空间的解决方案可能是在虚拟环境的站点包内对 scipy 目录进行符号链接。这可以通过以下方式在您的虚拟环境中完成：

```
cdsitepackages
ln -s /Library/Python/2.7/site-packages/scipy scipy 
```

* * *

*所有学分都归@rubik（见评论）*

查看[此](https://stackoverflow.com/questions/122327/how-do-i-find-the-location-of-my-python-site-packages-directory)答案以查找您的站点包路径，以防它与此处使用的路径不同。

# valgrind - valgrind 不接受最新版本的 glibc

> ID：10518734
> 
> 赞同：22
> 
> 时间：2012-05-09T15:01:17.843
> 
> 标签：valgrind

Valgrind 不喜欢 glibc 2.15：

```
checking the GLIBC_VERSION version... unsupported version 2.15
configure: error: Valgrind requires glibc version 2.2 - 2.14 
```

我该如何处理？我必须降级glibc吗？如果这是相关信息，我正在开发 Ubuntu 12.04。

更新：

所以我试图从那里下载源代码并安装，而不是使用 apt-get，因为我正在经历 Learn C the Hard Way。在我遇到这个问题后，我求助于 apt-get 看看它是否可以工作。它为我安装了这个包：

```
libc6-dbg - Embedded GNU C Library: detached debugging symbols 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-13T03:20:20.887

我也在浏览这本书，遇到了这个问题。我用谷歌搜索了它，然后按照 Employeed Russian 的建议来到这里，我进去玩了配置文件并让它工作。

进入您的配置到大约第 6404 行，然后将其粘贴到：

```
 2.15)
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: 2.15 family" >&5
$as_echo "2.15 family" >&6; }

$as_echo "#define GLIBC_2_14 1" >>confdefs.h

DEFAULT_SUPP="glibc-2.X.supp ${DEFAULT_SUPP}"
DEFAULT_SUPP="glibc-2.34567-NPTL-helgrind.supp ${DEFAULT_SUPP}"
DEFAULT_SUPP="glibc-2.X-drd.supp ${DEFAULT_SUPP}"
;; 
```

然后我跑了`configure`，`make`然后`sudo make install`一切都奏效了。

在 configure.in 文件中，我还添加了 777 附近的代码，但我认为这对最终结果并不重要，如果我基本上只是复制了之前引用 2.14 的内容，粘贴并将其全部更改为 2.15

希望这可以帮助

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-23T18:11:10.763

**valgrind 3.9.0 和 glibc 2.19 的更新：**

我遇到了同样的问题，并将其添加到配置脚本中，在带有 的行之前`darwin)`，修复了它：

```
 2.19)
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: 2.19 family" >&5
$as_echo "2.19 family" >&6; }

$as_echo "#define GLIBC_2_19 1" >>confdefs.h

    DEFAULT_SUPP="glibc-2.X.supp ${DEFAULT_SUPP}"
    DEFAULT_SUPP="glibc-2.34567-NPTL-helgrind.supp ${DEFAULT_SUPP}"
    DEFAULT_SUPP="glibc-2.X-drd.supp ${DEFAULT_SUPP}"
    ;; 
```

在 KUbuntu 14.04 上测试

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-10T05:50:40.227

> 我该如何处理？

两种方式之一：

1.  使用您的发行版并下载他们已经为您构建的软件包，或者
2.  找出问题（即添加到`configure`后没有重新生成）并修复它。`2.15``configure.in`

> 我必须降级glibc吗？

这可能会使您的系统无法启动（因为大多数其他二进制文件都依赖于 2.15）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-05T02:55:49.917

更新了 valgrind-3.8.1（这应该适用于任何准当前的 Linux 机器——在 Slackware 14.0 上测试过）：

在“valgrind-3.8.1/configure”文件的“2.16”结尾和“darwin”开头之间添加了一个“2.17”选项（大约第 6607 行）。

像魅力一样工作！感谢大佬们的帮助！

干杯!

- 在

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-23T15:38:02.637

似乎，每当发布新版本时，终端都会要求使用不同版本的 Glibc。所以如果终端给出这样的错误：

```
checking the GLIBC_VERSION version... unsupported version 2.19
configure: error: Valgrind requires glibc version 2.2 - 2.14 
```

然后您需要编辑 2.19 版本的配置文件，因为该版本不受终端报告的支持。

因此，在一些文本编辑器中打开 - valgrind 目录中名为 configure 的文件，通过 CTRL+F 找到以下代码：

`case "${GLIBC_VERSION}" in 2.2)`

当您在编辑器中到达该行时（总是行号可能会根据发行版本而变化），您会发现以下代码以`2.2)`.

```
 2.2)
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: 2.15 family" >&5
$as_echo "2.15 family" >&6; }

$as_echo "#define GLIBC_2_14 1" >>confdefs.h

DEFAULT_SUPP="glibc-2.X.supp ${DEFAULT_SUPP}"
DEFAULT_SUPP="glibc-2.34567-NPTL-helgrind.supp ${DEFAULT_SUPP}"
DEFAULT_SUPP="glibc-2.X-drd.supp ${DEFAULT_SUPP}"
;; 
```

如果向下滚动，您会发现所有其他版本的代码都相同`from 2.2 to 2.21...`。在上一个版本之后复制并粘贴上一个版本的代码（请注意，仅在我的情况下它是`2.2`版本，首先`2.2)`您需要将所有这些更改`2.2)`为终端所需的版本，`2.19)`在我的情况下。

因此，如果`2.19`终端需要版本，您将添加的代码将如下所示：

```
 2.19)
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: 2.19 family" >&5
$as_echo "2.19 family" >&6; }

$as_echo "#define GLIBC_2_19 1" >>confdefs.h

DEFAULT_SUPP="glibc-2.X.supp ${DEFAULT_SUPP}"
DEFAULT_SUPP="glibc-2.34567-NPTL-helgrind.supp ${DEFAULT_SUPP}"
DEFAULT_SUPP="glibc-2.X-drd.supp ${DEFAULT_SUPP}"
;; 
```

并遵循您的代码，如果进入文件，则应该`darwin)`在下一行。

# c# - 如何处理当前的 BrowserWindow

> ID：10518737
> 
> 赞同：2
> 
> 时间：2012-05-09T15:01:32.393
> 
> 标签：c#, coded-ui-tests

我正在创建多个 UI 测试，而不是打开一个新实例，`Microsoft.VisualStudio.TestTools.UITesting.BrowserWindow`我想检查 BrowserWindow 对象是否已经可用——这意味着 IE 已经在主机上打开——并获取它的句柄。我找到了这个[问题](https://stackoverflow.com/questions/7150534/codedui-tests-start-a-browser-once-for-the-entire-set-of-tests)，但我希望我的 BrowserWindow 包装类获得句柄，并且播放已经在类初始化时初始化，因此建议的方法不起作用。

这是我现有的代码...

```
public class uiBrowserWindow : BrowserWindow {
    public static void launchUrl(string url) {
        Launch(url);
    }
} 
```

**编辑** 我已经让它工作了，它并不理想，但它可以工作。有没有更好的办法？

```
public class uiBrowserWindow : BrowserWindow {
    public void launchUrl(string url) {
        try {
            SearchProperties[PropertyNames.ClassName] = "IEFrame";
            NavigateToUrl(new Uri(url));
        } catch (Exception) {
            Launch(url);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:50:15.117

如果在调用方法`BrowserWindow`时没有启动实例，则会引发异常。`NavigateToUrl()`我决定捕获异常并启动 url，否则一旦`BrowserWindow`启动就调用`NavigateToUrl()`。这可行，但在捕获异常时在第一个测试方法上花费的时间太长。如果提供更好的解决方案，我将重新分配答案...

```
public class uiBrowserWindow : BrowserWindow {
    public void launchUrl(string url) {
        try {
            SearchProperties[PropertyNames.ClassName] = "IEFrame";
            NavigateToUrl(new Uri(url));
        } catch (Exception) {
            Launch(url);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:52:01.623

我不确定 BrowserWindow 对象，但如果您想了解特定应用程序是否正在运行或获取特定窗口的句柄，您可以使用 WIN32 API。

```
/* Create a Win32.Win32Api Helper class, or include in your class  */
[DllImport("User32.dll")]
public static extern Int32 FindWindow(String lpClassName, String lpWindowName);
[DllImport("User32.dll")]
public static extern Int32 SetForegroundWindow(int hWnd);
[DllImport("User32.dll")]
public static extern Int32 SendMessage(int hWnd, UInt32 msg, int wParam, int lParam); 
```

这是获取特定进程并通过 API 向其发送消息的示例：

```
int ieWindow = Win32.Win32API.FindWindow(null, "C:\\Program Files (x86)\\Internet Explorer\\iexplore.exe");
Win32.Win32API.SetForegroundWindow(ieWindow);

// Example sending message, Right Mouse Button Up message (0x0205)
Win32.Win32API.SendMessage(ieWindow, 0x0205, 0, 0); 
```

我希望这有帮助。

克里斯

# python - 这个函数定义在 python 中是如何工作的？

> ID：10518739
> 
> 赞同：3
> 
> 时间：2012-05-09T15:01:38.943
> 
> 标签：python

我是 Python 的新手，具有 Java 背景。我遇到了以下函数定义

```
def S(seq,i=0):
    print i
    if i==len(seq): 
        return 0    
    return S(seq,i+1)+seq[i] 
```

这里到底做了`i=0`什么，每次都重新初始化为 0 吗？因为我注意到 i 的值增加了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T15:02:20.833

它为第二个参数提供*默认值*。

可以使用一个或两个参数调用该函数。如果使用 1 调用它，则第二个参数`i`, 默认为零。

# solr - Solr 使用 hl.q 高亮显示

> ID：10518745
> 
> 赞同：0
> 
> 时间：2012-05-09T15:01:58.707
> 
> 标签：solr

目前，我们在整个站点中使用 solr 3.4 dismax 查询，以便充分利用它的分面功能。

我现在被要求从查询结果中突出显示某些单词。

例如，我有以下查询，它找到了 110 个正确的文档：

[http://localhost:8080/apache-solr-3.4./select/?qt=dismax&mm=100%25&rows=10&start=0&fq=productType%3Abooks](http://localhost:8080/apache-solr-3.4./select/?qt=dismax&mm=100%25&rows=10&start=0&fq=productType%3Abooks)

如果我使用以下内容，我会找到相同数量的文档，但没有突出显示的部分：

[http://localhost:8080/apache-solr-3.4./select/?qt=dismax&mm=100%25&rows=10&start=0&fq=productType%3Abooks&hl=true&hl.q=java&hl.fl=descriptions&hl.snippets=1000&hl.simple。 pre=%3Cb%3E&hl.simple.post=%3C%2Fb%3E&hl.fragsize=120](http://localhost:8080/apache-solr-3.4./select/?qt=dismax&mm=100%25&rows=10&start=0&fq=productType%3Abooks&hl=true&hl.q=java&hl.fl=descriptions&hl.snippets=1000&hl.simple.pre=%3Cb%3E&hl.simple.post=%3C%2Fb%3E&hl.fragsize=120)

在上面的查询中，我添加了突出显示参数，并使用了[hl.q](http://wiki.apache.org/solr/HighlightingParameters#hl.q)，我认为它可以用来传递我想要在文档中突出显示的单词，而不会影响 numFound (110)。但是，情况似乎并非如此，但是当我添加 q=java 时，查询将返回带有突出显示文本的字段，但 numFound 会受到影响。

谁能看到我哪里出错了？Solr 可以完成这项任务，还是我以后需要对结果进行处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:19:43.123

根据[hl.q](http://wiki.apache.org/solr/HighlightingParameters#hl.q)参数的 Solr Wiki 文档，这仅在 Solr 版本 3.5 或更高版本中可用。由于您在 3.4 上运行，这可能是您遇到的行为的解释。

# android - 像通知android一样拖动活动

> ID：10518751
> 
> 赞同：1
> 
> 时间：2012-05-09T15:02:14.013
> 
> 标签：android, android-activity, drag-and-drop

我有 2 个活动，我想将一个活动拖到另一个之上，而不会丢失第一个活动的信息，比如通知，你在互联网上，你拖动通知，看到一些东西，然后你把通知拖回来并继续做你正在做的事。

我该怎么做，或者我应该搜索什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:16:58.347

我强烈怀疑你正在寻找的是一个[SlidingDrawer。](http://developer.android.com/reference/android/widget/SlidingDrawer.html)

正如医生所说，

> SlidingDrawer 将内容隐藏在屏幕之外，并允许用户拖动手柄以将内容带到屏幕上。SlidingDrawer 可以垂直或水平使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:06:47.503

任何活动都可以通过将其配置为[Dialog](http://developer.android.com/guide/topics/ui/dialogs.html)来进行模态化。这是你要找的吗？

# javascript - getJSON 没有输出？

> ID：10518755
> 
> 赞同：0
> 
> 时间：2012-05-09T15:02:21.190
> 
> 标签：javascript, jquery, json, api, weather-api

我一生都无法弄清楚为什么这不起作用？

```
<div class="clouds">

</div>

<div class="station">

</div>

<script type="text/javascript">
$.getJSON("http://api.geonames.org/findNearByWeatherJSON?lat=53.36652&lng=-2.29855&username=jolones&callback=?",
function(data){

          var clouds = data.weatherObservation.clouds;
          var station = data.weatherObservation.stationName;

      jQuery.(".clouds").html(clouds);
      jQuery.(".station").html(station);

      }); 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:04:45.173

```
jQuery . (".clouds").html(clouds);
jQuery . (".station").html(station); 
```

你的意思是那里有那些点吗？应该

```
jQuery(".clouds").html(clouds);
jQuery(".station").html(station); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:06:08.680

浏览器安全策略阻止您将 json ( xmlhttpReqeusts ) 发送到另一个域。不过，您应该查找 JSONP 的工作原理，如果 geonames.org 提供 jsonp 方法（jsonp 将允许您执行此操作并调用另一个域），这可能很有用。

另一种选择是创建一个远程调用 api 的本地 php 脚本。不禁止 PHP 调用远程 api，因此您可以使用 php 检索 json 结果，然后使用 javascript 从本地（在同一域上）php 程序中检索结果。

# multithreading - 如何在 perl 中创建同步方法？

> ID：10518757
> 
> 赞同：3
> 
> 时间：2012-05-09T15:02:38.710
> 
> 标签：multithreading, perl, thread-safety

在 Java 中，当我创建线程并共享对象时，有时我希望线程访问相同的对象方法，但我不希望它们同时执行此操作。因此，为避免这种情况，我将对象方法定义为 Synchronized 方法，如下所示。

同步实例方法：

类 class_name { 同步类型 method_name() { \statement block } }

方法中的所有语句都变成了同步块，实例对象就是锁。这意味着如果我告诉一个线程使用这个方法，它会等到前一个线程使用完这个方法。有没有办法在 Perl 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:50:24.070

在构造函数中创建一个互斥锁。

```
sub new {
   ...
   my $mutex :shared;
   $self->{mutex_ref} = \$mutex;
   ...
} 
```

输入方法时将其锁定。

```
sub method {
   my ($self) = @_;
   lock ${ $self->{mutex_ref} };
   ...
} 
```

演示：

```
use strict;
use warnings;
use threads;
use threads::shared;
use feature qw( say );

sub new {
   my ($class, $id) = @_;
   my $mutex :shared;
   return bless({
      mutex_ref => \$mutex,
      id        => $id,
   }, $class);
}

sub method {
   my ($self) = @_;
   lock ${ $self->{mutex_ref} };
   say sprintf "%08X %s %s", threads->tid, $self->{id}, "start";
   sleep(2);
   say sprintf "%08X %s %s", threads->tid, $self->{id}, "end";
}

my $o1 = __PACKAGE__->new('o1');
my $o2 = __PACKAGE__->new('o2');

for (1..3) {
   async { my ($o) = @_; $o->method() } $o1;
   async { my ($o) = @_; $o->method() } $o2;
}

$_->join for threads->list(); 
```

*   没有两个调用`$o1->method`同时运行。
*   调用`$o1->method`和`$o2->method`可以同时运行。

* * *

实际上，如果你无论如何都要共享对象——这是通过将对象作为参数传递给`async`上面的代码来完成的——你可以使用对象本身作为锁。

```
use threads::shared qw( shared_clone );

sub new {
   my ($class, ...) = @_;
   return shared_clone(bless({
      ...
   }, $class));
} 
```

输入方法时将其锁定。

```
sub method {
   my ($self) = @_;
   lock %$self;
   ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:06:57.637

您可以使用[信号量](http://perldoc.perl.org/perlthrtut.html#Basic-semaphores)在线程之间发出信号，或者在调用相关方法时[锁定](http://perldoc.perl.org/perlthrtut.html#Controlling-access%3a-lock%28%29)共享对象，从而导致其他线程的任何后续调用阻塞，直到锁定线程完成该方法调用。

在开始使用 perl 线程之前，我强烈建议您阅读[perl 线程教程](http://perldoc.perl.org/perlthrtut.html)，因为 perl 的线程与其他语言不同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T15:10:06.717

旧的 perl 线程模型（从 5.005 开始）支持一个`:locked`或多或少可以满足您需求的属性。但是，对于当前的*ithreads*模型（5.8 以后），您可以重新引入类似的属性。

这本质上是@ikegami 的[简化解决方案](https://stackoverflow.com/a/10519574/132382)，隐藏在[Attribute::Handlers](http://perldoc.perl.org/Attribute/Handlers.html)语法便利的背后：

```
package Local::Sub::Attribute::Synchronized;
use strict;
use warnings;
use thread::shared;
use Attribute::Handler;

sub Synchronized : ATTR(CODE) {
  my (undef, $sym, $code) = @_;
  #
  # Lock the first argument (assumed to be a shared() object), then call $code
  # with the original @_
  #
  no warnings 'redefine';
  *{$sym} = sub { lock($_[0]); &$code; };
}

sub import {                              # Make :Synchronized available to our importer.
  my $callpkg = caller;                   # The usual technique is defines a UNIVERSAL::
  no strict 'refs';                       # handler, but I find that a bit ham-fisted.
  push @{"${callpkg}::ISA"}, __PACKAGE__;
} 
```

允许您像这样编写类：

```
package Foo;
use threads::shared;
use Local::Sub::Attribute::Synchronized;

sub new { shared_clone(...); }     # N.B.:  Your Foo object must be shared!

sub method_name : Synchronized {
  ...
} 
```

你的代码是这样的：

```
$foo_object->method_name();  # Don't worry, it's synchronized! 
```

# c# - XML.InnerText 空

> ID：10518762
> 
> 赞同：0
> 
> 时间：2012-05-09T15:02:56.310
> 
> 标签：c#, xml

我在 XMLElement 中加载了以下 XML，如下所示：

```
<related_id>
  <Item>
    <classification>Component</classification>
    <id></id>
    <keyed_name>glass</keyed_name> <!-- I want to get this InnerText -->
  </Item>
</related_id>
<source_id>968C45A47942454DA9B34245A9F72A8C</source_id>
<itemtype>5E9C5A12CC58413A8670CF4003C57848</itemtype> 
```

当我得到内部文本时：

```
string nameChildren = node.SelectSingleNode("/related_id/Item/keyed_name").InnerText; 
```

字符串为空！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:09:25.353

以双斜杠开始您的 XPath，并检查`xmlns`整个文档中的默认命名空间（属性）。

双斜杠表示它`related_id`不一定是文件中的顶级元素（在您的示例中不是）。

如果您确认已定义默认命名空间，则需要将其反映在您的 xpath 中，如下所示：“//x:related_id/x:Item/x:keyed_name”并参考[此答案](https://stackoverflow.com/questions/585812/using-xpath-with-default-namespace-in-c-sharp)。

但是，您的 XPath 仍然会有点可疑，因为在特定级别可能有多个具有相同名称的元素，并且您似乎无法安全地处理所有可能的组合。双斜杠本身就有些危险，除非 XML 非常简单。通常最好以单斜杠开始 XPath，并从上到下列出所有元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:18:59.807

我认为您需要添加名称空间，即使是默认名称。尝试创建一个 XmlNamespaceManager 实例并向其添加默认命名空间（例如“ns”）。之后，您的 xpath 应如下所示：

```
/ns:related_id/ns:Item/ns:keyed_name 
```

我认为在这里：[在 C# 中使用带有默认命名空间的 Xpath 与](https://stackoverflow.com/questions/585812/using-xpath-with-default-namespace-in-c-sharp)您遇到的问题相同。

# php - 联系表格在 WordPress 模板中行为不端

> ID：10518765
> 
> 赞同：0
> 
> 时间：2012-05-09T15:03:01.233
> 
> 标签：php, jquery, wordpress, contact-form

我想指出，我并不是真正的开发人员，而是设计师。我正在尝试在 Wordpress 模板文件中添加自定义联系表单。它的工作原理基于[Cats Who Code: How to create an built-in contact form for your Wordpress theme 中](http://www.catswhocode.com/blog/how-to-create-a-built-in-contact-form-for-your-wordpress-theme)的教程。

我已将联系表格修改为以下内容：

*   名称（文本字段）
*   公司（文本字段）
*   地址（文本区域）
*   电子邮件地址（文本字段）
*   电话（文本字段）
*   移动（文本字段）
*   查询（文本区）

但是，当我将它集成到自定义模板中并将其放在 Wordpress 安装中时，它只会给我一个空白页面，其中包含空白代码。我想知道为什么会发生这种情况，当我从模板中删除联系表时，没有联系表一切都很好。下面是整个模板代码。

```
<?php
if(isset($_POST['submitted'])) {
if(trim($_POST['name']) === '') {
    $nameError = 'Please enter your name.';
    $hasError = true;
} else {
    $name = trim($_POST['name']);
}
if(trim($_POST['company']) === '') {
    $companyError = 'Please enter your company name.';
    $hasError = true;
} else {
    $company = trim($_POST['company']);
}
if(trim($_POST['address']) === '') {
    $addressError = 'Please enter your address.';
    $hasError = true;
} else {
    if(function_exists('stripslashes')) {
        $address = stripslashes(trim($_POST['address']));
    } else {
        $address = trim($_POST['address']);
    }
}
    if(trim($_POST['email']) === '')  {
    $emailError = 'Please enter your email address.';
    $hasError = true;
} else if (!eregi("^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$", trim($_POST['email']))) {
    $emailError = 'You entered an invalid email address.';
    $hasError = true;
} else {
    $email = trim($_POST['email']);
}
if(trim($_POST['telephone']) === '') {
    $telephoneError = 'Please enter your telephone number.';
    $hasError = true;
} else {
    $telephone = trim($_POST['telephone']);
}
if(trim($_POST['mobile']) === '') {
    $mobileError = 'Please enter your mobile phone number.';
    $hasError = true;
} else {
    $mobile = trim($_POST['mobile']);
}
if(trim($_POST['enquiry']) === '') {
    $enquiryError = 'Please enter a message.';
    $hasError = true;
} else {
    if(function_exists('stripslashes')) {
        $enquiry = stripslashes(trim($_POST['enquiry']));
    } else {
        $enquiry = trim($_POST['enquiry']);
    }
}

if(!isset($hasError)) {
    $emailTo = get_option('tz_email');
    if (!isset($emailTo) || ($emailTo == '') ){
        $emailTo = get_option('admin_email');
    }
    $subject = '[Blue Doors] From '.$name;
    $body = "Name: $name \n\nCompany: $company \n\nAddress: $address \n\nEmail: $email \n\nTel: $telephone \n\nMobile: $mobile \n\nDetails of Enquiry: $enquiry";
    $headers = 'From: '.$name.' <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email;

    mail($emailTo, $subject, $body, $headers);
    $emailSent = true;
}
} ?>

<?php get_header(); ?>

<section class="content">
    <?php if(have_posts()) : ?><?php while(have_posts()) : the_post(); ?>

    <header class="content-title">
        <h1><?php the_title(); ?></h1>
    </header>

        <article class="content-body">  
            <?php the_post_thumbnail(); ?>
            <?php the_content(); ?>
        </article>

        <article class="content-body">

        <?php if(isset($emailSent) && $emailSent == true) { ?>
                        <div class="thanks">
                            <p>Thanks, your email was sent successfully.</p>
                        </div>
                        <?php } else { ?>
                        <?php the_content(); ?>
                        <?php if(isset($hasError) || isset($captchaError)) { ?>
                            <p>Sorry, an error occured.<p>
                        <?php } ?>

            <form action="<?php the_permalink(); ?>" id="contactform" method="post">
                <ul>
                    <li>
                        <label>What is your name?</label>
                        <input type="text" name="name" id="name" value="<?php if(isset($_POST['name'])) echo $_POST['name'];?>" class="required"/>
                        <?php if($nameError != '') { ?>
                                <span class="error"><?=$nameError;?></span>
                            <?php } ?>
                    </li>
                    <li>
                        <label>What is your company's name?</label>
                        <input type="text" name="company" id="company" value="<?php if(isset($_POST['company'])) echo $_POST['company'];?>" class="required"/>
                    </li>
                    <li>
                        <label class="address">What is your address?</label>
                        <textarea name="address" id="address" rows="5" cols="30" class="required"><?php if(isset($_POST['address'])) { if(function_exists('stripslashes')) { echo stripslashes($_POST['address']); } else { echo $_POST['address']; } } ?></textarea>
                            <?php if($addressError != '') { ?>
                                <span class="error"><?=$addressError;?></span>
                            <?php } ?>
                    </li>
                    <li>
                        <label>What is your email address?</label>
                        <input type="text" name="email" id="email" value="<?php if(isset($_POST['email'])) echo $_POST['email'];?>" class="required" />
                            <?php if($emailError != '') { ?>
                                <span class="error"><?=$emailError;?></span>
                            <?php } ?>
                    </li>
                    <li>
                        <label>What is your telephone no?</label>
                        <input type="text" name="telephone" id="telephone" value="<?php if(isset($_POST['telephone'])) echo $_POST['telephone'];?>" class="required" />
                            <?php if($nameError != '') { ?>
                                <span class="error"><?=$telephoneError;?></span>
                            <?php } ?>
                    </li>
                    <li>
                        <label>What is your mobile no?</label>
                        <input type="text" name="mobile" id="mobile" value="<?php if(isset($_POST['mobile'])) echo $_POST['mobile'];?>" class="required" />
                            <?php if($mobileError != '') { ?>
                                <span class="error"><?=$mobileError;?></span>
                            <?php } ?>
                    </li>
                    <li>
                        <label>What would you like to discuss about with Blue Doors?</label>
                        <textarea name="enquiry" id="enquiry" rows="8" cols="30" class="required"><?php if(isset($_POST['enquiry'])) { if(function_exists('stripslashes')) { echo stripslashes($_POST['enquiry']); } else { echo $_POST['enquiry']; } } ?></textarea>
                            <?php if($enquiryError != '') { ?>
                                <span class="error"><?=$enquiryError;?></span>
                            <?php } ?>
                    </li>
                    <li>
                        <button type="submit" class="submitbutton">Submit your enquiry</button>
                    </li>
                </ul>
                <input type="hidden" name="submitted" id="submitted" value="true" />
            </form>
        </article>

    <?php endwhile; endif; ?>

</section>

<?php get_sidebar(); ?>

<?php get_footer(); ?> 
```

我试图弄清楚它在哪里崩溃，但我对 PHP 不是很了解，也无法理解它。谁能指出我哪里出错了，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:44:51.763

您已将联系表单代码放入循环中`<?php if(have_posts()) : ?><?php while(have_posts()) : the_post(); ?>`

尝试将整个联系表单代码从循环外部`<?php if(isset($emailSent) && $emailSent == true) { ?>`开始。`</form>`即把代码部分放在这一行之后`<?php endwhile; endif; ?>`

希望这会有所帮助。

**编辑：**

您在代码上缺少一个花括号。更新以下代码部分。我只在最后一行添加了一个大括号。

```
<?php if(isset($emailSent) && $emailSent == true) { ?>
                        <div class="thanks">
                            <p>Thanks, your email was sent successfully.</p>
                        </div>
                        <?php } else { ?>
                        <?php the_content(); ?>
                        <?php if(isset($hasError) || isset($captchaError)) { ?>
                            <p>Sorry, an error occured.<p>
                        <?php } } ?> 
```

它对我来说非常有用。

# javascript - 保留 html.dropdownlist 中的选定值

> ID：10518767
> 
> 赞同：0
> 
> 时间：2012-05-09T15:03:20.153
> 
> 标签：javascript, jquery, asp.net-mvc

我有一个下拉列表。即使在执行 javascript 函数后，如何使选定的值保持选中状态。现在，无论我选择什么选项，在运行 javascript 函数后，下拉菜单默认返回第一个选项。

```
 <%=Html.DropDownList("MovieType", new List<SelectListItem>
                     {
                        new SelectListItem{ Text="Kids", Value = "Kids" }, 
                        new SelectListItem{ Text="Adults", Value = "Adults" }

                     }, new { onchange = "GetGenre()" })%> 
```

Javascript

```
function GetGenre()
{   
    var e = document.getElementById("MovieType");
    var SelValue = e.options[e.selectedIndex].value;

    if (SelValue == "Kids")
        window.location.href = "";
    else
        window.location.href = "";    

} 
```

编辑：

我在 MVC3 中有两个控制器，KidsController 和 AdultsController.. 我想根据选择的内容路由到每个控制器......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:17:07.670

```
 <%=Html.DropDownList("MovieType", new List<SelectListItem>
                     {
                        new SelectListItem{ Text="Kids", Value = "Kids" }, 
                        new SelectListItem{ Text="Adults", Value = "Adults" }

                     }, new { @id = "ddlGetGenre" })%>

    $(document).ready(function () {
        $('#ddlGetGenre').val($.cookies('ddlGetGenre'));

        $('#ddlGetGenre').on('change', function () {
            $.cookies('ddlGetGenre', $(this).val());
            if ($(this).val() === "Kids")
                window.location.href = "";
            else
                window.location.href = "";
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T06:21:27.123

为什么不将表单发布到控制器，然后控制器可以查看您为表单字段选择的值，并将您重定向到 /kids?MovieType=Kids 或 /adult?MovieType=Adult。那么你的 onchange 就是 form.submit()。这遵循 Post、Redirect、Get 方法。

# javascript - 确定页面是否还没有准备好

> ID：10518769
> 
> 赞同：0
> 
> 时间：2012-05-09T15:03:23.267
> 
> 标签：javascript, jquery, html, loading

我想知道我是否可以确定页面是否尚未准备好？因为如果页面还没有准备好，我想在那里插入一个动画。

我从以前的问题中发现了类似的东西：

```
var ready = false;
$(document).ready(function () {
    ready = true;
}); 
```

但它并没有真正帮助我。有没有其他方法可以确定页面是否还没有准备好？或在页面未准备好时添加加载屏幕的任何方式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T15:05:45.947

我将创建带有加载动画的基本页面作为其中的一部分。然后您检测页面何时*准备*就绪并将其删除。

```
$(document).ready(function () {
    $("#loading").hide();
}); 
```

# javascript - 谷歌再营销 JavaScript

> ID：10518770
> 
> 赞同：0
> 
> 时间：2012-05-09T15:03:25.207
> 
> 标签：javascript, magento, prototypejs, google-ads-api

我有一些从我的 Magento 安装中打印出来的精美 JavaScript。它允许我们拥有我们的域列表，如果他们有再营销列表，我们可以输入详细信息以在 JS 检测到我们在该域上时启动再营销。

继承人的代码：

```
$protocol = Mage::app()->getStore()->isCurrentlySecure() ? 'https' : 'http';
    if (!Mage::getStoreConfigFlag('google/analytics/active')) {
        return '';
    }
    $this->addText('<script src="'.$protocol.'://www.googleadservices.com/pagead/conversion.js" type="text/javascript"></script>');
    $this->addText("
<script type=\"text/javascript\">
    // This section finds all links that are outside of the current domain and adds a Google Analytics Cross-Domain Tracking Script
    // THIS IS ABSOLUTELY MAGICAL, SOMETIMES I LAUGH AT HOW CLEVER THIS LITTLE SNIPPET IS
    // I need to get out more
    var domains = {
        'whitestores.co.uk':false,
        'bbqsdirect.co.uk':false,
        'resinweavegardenfurniture-direct.co.uk':{
            'google_conversion_id':1069311156,
            'google_conversion_label':'BDWlCMy72AIQtMnx_QM'
        },
        'metalgardenfurnituredirect.co.uk':false,
        'teakgardenfurniture-direct.co.uk':false,
        'bistrosets-direct.co.uk':false,
        'firepits-direct.co.uk':false,
        'cushions-direct.co.uk':false,
        'benches-direct.co.uk':false,
        'parasols-direct.co.uk':false,
        'covers-direct.co.uk':false,
        'gardenbeanbags-direct.co.uk':false,
        'chimineas-direct.co.uk':false,
        'outdoorfurniture-direct.co.uk':false,
        'stores-direct.co.uk':false
    };

    // Get the current domain name
    var current_domain = document.domain.replace('www.','');

    // Go through each of the domain lists above, check that we aren't going to be affecting links
    // to the domain that we are currently on as this would be unnecessary.
    \$H(domains).each(function(pair){
        var val = pair.key;
        var options = pair.value;

        if(val == current_domain && options){
            console.log('This domain has remarketers');

            <!-- Google Code for Resin Weave Visitors Remarketing List -->

            var google_conversion_id = options['google_conversion_id'];
            var google_conversion_language = \"en\";
            var google_conversion_format = \"3\";
            var google_conversion_color = \"ffffff\";
            var google_conversion_label = \"options['google_conversion_label']\";
            var google_conversion_value = 0;

        }
        if(val != current_domain){

            // Check to see if there are 'a' elements in the code with any of the domains above in the HREF
            // If there is, go through each of them and add an on-click event utilising Google's link tracking feature
            if($(\"a[href*='\"+val+\"']\")){
                $(\"a[href*='\"+val+\"']\").each(function(elemindex,elem){
                    $(elem).click(function(){
                        _gaq.push(['_link',this.href]);
                        return false;
                    });
                });
            }

            // Do the same for forms
            if($(\"form[action*='\"+val+\"']\")){
                $(\"form[action*='\"+val+\"']\").each(function(elemindex,elem){
                    $(elem).attr('onSubmit',\"_gaq.push(['_linkByPost',this])\");
                });
            }

        }
    });

</script>
<script type=\"text/javascript\">
//<![CDATA[
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','UA-9852071-15']);
    _gaq.push(['_setDomainName', 'none']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']);
    ".$this->getQuoteOrdersHtml()."
    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
//]]>
 </script>
 "); 
```

如您所见，此代码还将相关的 Google 跨域跟踪属性添加到链接和表单，但问题是我的再营销转换脚本不起作用。没有 Javascript 错误，但也没有人出现在我的再营销列表中，我们每隔几分钟就会有大约 50 次访问我们的网站，所以他们应该在那里......

拼命寻求解决方案。

希望收到某人的来信

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:00:17.853

戴维齐，

首先，您使用的是什么版本的 jQuery，因为我不认为`$H(domains).each`它是 jQuery 函数。Mootools 中有一个`$H`函数，但[jQuery 没有](http://forum.jquery.com/topic/jquery-prototype-h)。

如果你想遍历一个 jQuery 对象，你需要使用

`$.each(your_array, function(index, value){}`

（这也适用于您在第 59 行的位 - `$(\"a[href*='\"+val+\"']\").each`）

其次，如果您`console.log`的代码中有任何条目，IE 将会崩溃，请仅在开发环境中使用它们......

希望有帮助。

图森

# c++ - C++ 线程概念

> ID：10518772
> 
> 赞同：0
> 
> 时间：2012-05-09T15:03:30.850
> 
> 标签：c++, multithreading

考虑以下正在运行循环的示例程序；

```
int main()
{

  for (int i = 0; i<= 300; ++i) {

  }

} 
```

非常基本，现在假设我想打印出`i`每秒的值：

```
cout << "i= " << i << "\n"; 
```

像下面这样的简单循环可能就足够了，其中“elaspedTime”是一个虚构的整数，包含程序运行的秒数，由操作系统神奇地更新：

```
int lastTime = 0;
while (true) {
  if (elapsedTime > lastTime) { // Another second has passed
    cout << "i= " << "\n";
    lastTime = elapsedTime;
  }
} 
```

这里的最终目标是提供如下输出（假设循环恰好每秒运行 100 次，因为它位于旧的、缓慢的 CPU 上）：

```
$ ./myprog
i= 100
i= 200
i= 300 
```

这些都是简单的函数和例程，尽管如此，我认为没有办法在通常只有一个`main()`函数的“经典”c++ 程序中执行这样的操作。尽管很简单，但这是我需要学习多线程的关键吗？或者，是否可以调用函数`main()`而不等待它们的返回，但没有被调用的函数“占用”线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:19:03.897

如果您希望两个函数在*同一时间*彼此独立地运行，则需要使用线程。您提供的示例不需要使用线程来完成您所说的想要完成的事情，但是根据您的评论，我认为您的问题有点不清楚。

多线程是 C++03 标准中没有提到的东西。最新的 C++11 标准对它有一些支持，但它不是全部，全部。多线程的实际实现方式是特定于平台的。WinTel 机器以一种方式进行，Linux/Intel 机器以另一种方式进行。编写多线程代码的两种主要方法是：

1.  使用特定于平台的设施。
2.  使用跨平台线程库。

刚开始时，这些天我建议从跨平台库开始，这样您就可以了解许多大图概念，而不会被特定于平台的特性所困扰。一个这样的库是[Boost.Thread](http://www.boost.org/doc/libs/1_49_0/doc/html/thread.html)。

**编辑**

鉴于您是多线程编程的新手，我觉得我应该警告您：您正在蒙着眼罩跳进一个深兔子洞。多线程编程有点像国际象棋——您可以相当快地学习很多基本语法和系统调用，但是**正确**地进行多线程编程需要**大量**的学习和实践。正确完成多线程编程是程序员将面临的最困难的事情之一。

另外，请特别注意下面@CrazyEddie 的评论：

> 一旦你从“功能”切换到“任务”，尽管故事发生了变化。根据任务的不同，很有可能一次完成许多任务。由于像 OP 这样的事件循环通常大部分时间都在休眠，因此线程通常仅用于方便而不是性能或必要性。我敢肯定你知道这一点，但 OP 可能不知道。OP 需要查找“异步处理”并权衡使用线程与非阻塞操作和事件循环的优缺点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:07:54.830

这样做有什么问题？无需多任务处理。

```
int lastTime = 0;
while (true) {
  if (std::time() > lastTime) { // Another second has passed
    cout << "i= " << i << "\n";
    // potentially expensive code goes here, which updates "i"
    lastTime = std::time();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T19:03:31.963

我很好奇你想解决什么问题。“想知道一秒钟内完成了多少次迭代”从何而来？我问的原因是因为您将使用顶部讨论的单线程方法（检查时钟-增量-检查时钟-增量...检查时钟-打印）或多线程方法得到答案，他们两者都受到引入线程运行的开销和不确定性的影响。我的意思是：在这两种情况下，你都必须执行一堆额外的东西——单线程情况下的时钟（）调用和多线程情况下的线程同步。两者都会影响您的程序在一秒钟内完成的迭代总数（数量会更小），因此您将得到不正确的结果。此外还有' s 操作系统谁的线程调度程序是您的线程何时运行以及何时休眠等待下一个可用时间片的决定者。量子约为 20-30 毫秒，因此在时间间隔检查期间产生的错误很容易（可能平均而言）只有百分之几。

保存开始时间会不会更容易更自然，然后做所有需要做的迭代来处理所有数据（做所有工作），然后再次取时间戳并将迭代总数除以时间间隔。或者是否有特定于您正在解决的问题的问题，这种方法不起作用？

# c# - 无法让 MethodInvoker 返回布尔值

> ID：10518774
> 
> 赞同：2
> 
> 时间：2012-05-09T15:03:40.257
> 
> 标签：c#, multithreading

我需要从我的线程中访问共享日志文件，所以我现在尝试使用 MethodInvoker 读取文件并根据它是否找到条目返回一个布尔值。但是遇到此错误，无法弄清楚如何获取它给我一个布尔值：

> 无法将匿名方法转换为委托类型“System.Windows.Forms.MethodInvoker”，因为块中的某些返回类型不能隐式转换为委托返回类型

```
 private void searchLogInThread(string msg, string fileName)
    {
        Invoke(new MethodInvoker(
                       delegate
                       {
                           StreamReader re = File.OpenText(fileName);

                           string input = null;
                           while ((input = re.ReadLine()) != null)
                           {

                               if (input.Contains(msg))
                               {
                                   re.Close();
                                   return true;
                               }

                           }
                           re.Close();
                           return false;
                       }
                       ));
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:05:47.540

### 描述

MethodInvoker 是没有结果的委托。您需要创建自己的。

### 样本

```
public delegate bool MethodInvokerWithBooleanResult();

Invoke(new MethodInvokerWithBooleanResult(
             delegate
             {
                            // do something and return a bool
                            return true;
             }
         )); 
```

## 更新

另一种方法是使用`Func<bool>`

```
Invoke(new Func<bool>(
        delegate
        {
                    // do something and return a bool
                    return true;
        }
    )); 
```

### 更多信息

*   [MSDN - 代表（C# 编程指南）](https://msdn.microsoft.com/en-us/library/ms173171(v=vs.140).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T15:05:54.680

[`MethodInvoker`](http://msdn.microsoft.com/en-us/library/system.windows.forms.methodinvoker.aspx)不能返回任何东西。委托有一个`void`返回类型。如果需要返回值，则需要使用不同的委托（例如`Func<bool>`）。

假设这是在一个控件内，我认为你无论如何都会以错误的方式进行这一切 - 你正在使用`Control.Invoke`，它将*在 UI 线程中*执行所有代码（读取文件） 。不要那样做。

此外，没有任何迹象表明你将如何使用结果......基本上，我认为你需要重新考虑你的设计。此刻很困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:17:19.580

`MethodInvoker`没有定义返回类型。有多种不同的方法可以从匿名方法或 lambda 表达式中获取返回值。但是，您似乎对应该如何`Invoke`使用有一个基本的误解。您提供的代码根本不会在后台线程上运行。

我会使用`Task`该类在后台读取文件。用于`StartNew`让`Func<TResult>`委托在后台线程上运行。然后，您可以调用`ContinueWith`将控制权转移回 UI，您可以在其中提取返回值并使用它操作任何控件。

```
private void searchLogInThread(string msg, string fileName)
{
  Task.Factory
    .StartNew(() =>
    {
      // This executes on a background thread.

      using (StreamReader re = File.OpenText(fileName))
      {
        string input = null;
        while ((input = re.ReadLine()) != null)
        {
          if (input.Contains(msg))
          {
            return true;
          }
        }
        return false;
      }
    })
    .ContinueWith(task =>
    {
      // This executes on the UI thread.

      bool result = task.Result; // Extract result from the task here.

      MessageBox.Show(result.ToString());

    }, TaskScheduler.FromCurrentSynchronizationContext);
} 
```

# java - 如何转义所有正则表达式特殊字符但不是一次全部转义（通过 Pattern.quote()），只是一个接一个

> ID：10518781
> 
> 赞同：5
> 
> 时间：2012-05-09T15:03:57.877
> 
> 标签：java, regex

这就是问题所在：向用户呈现一个文本字段，他或她可以在该字段上键入过滤器。过滤器，用于过滤未过滤的数据。经历 Oracle Forms 洗脑的用户，除了 % 之外没有其他特殊字符，我猜它或多或少代表 Java 中的“.*”正则表达式。

如果用户行为良好，给定的人会输入“CTHULH%”之类的东西，在这种情况下，我可以构建一个模式：

```
Pattern.compile(inputText.replaceAll("%", ".*")); 
```

但是，如果用户来自印斯茅斯，他将无法通过几个简单的按键输入“.+\[a-#$%^&*(”来破坏我的方案。这将不起作用：

```
Pattern.compile(Pattern.quote(inputText).replaceAll("%", ".*")); 
```

因为它会将 \Q 放在字符串的开头，将 \E 放在字符串的末尾，从而使我的 % -> .* 开关没有意义。

问题是：我是否必须查找模式代码中的每个特殊字符并通过在前面添加“\\”来自行转义，还是可以自动完成？还是我对问题太深入了，我忽略了一些明显的解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T15:06:40.363

我认为这个算法应该适合你：

*   拆分开`%`
*   使用单独引用每个部分`Pattern.quote`
*   加入字符串使用`.*`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:11:19.600

怎么样`Pattern.compile(Pattern.quote(inputText).replaceAll("%", "\\E.*\\Q"));`？

这应该导致以下模式：

```
input:   ".+\[a-#$%^&*(" 
quote:   \Q".+\[a-#$%^&*("\E 
replace: \Q".+\[a-#$\E.*\Q^&*("\E 
```

如果`%`字符是第一个或最后一个字符，你会得到一个`\Q\E`（如果你只有输入`%`，表达式最终会是`\Q\E.*\Q\E`），但这仍然应该是一个有效的表达式。

*更新*：

`replace(...)`我忘记了and之间的区别`replaceAll(...)`：前者中的替换参数是文字，而后者中的替换参数是表达式本身。因此 - 正如您在评论中已经说明的那样 - 您需要调用`Pattern.compile(Pattern.quote(inputText).replaceAll("%", "\\\\E.*\\\\Q"));`（引用字符串和表达式中的反斜杠）。

从文档中`String#replaceAll(...)`：

> 请注意，替换字符串中的反斜杠可能会导致结果与将其视为文字替换字符串时的结果不同。

# objective-c - iOS 和 ARC：如何在异步操作期间保持自我？

> ID：10518782
> 
> 赞同：17
> 
> 时间：2012-05-09T15:03:58.133
> 
> 标签：objective-c, ios, automatic-ref-counting

这是我第一次摆弄 iOS5 和 ARC。到目前为止，一切都很好，它有效，但我遇到了某种问题。

我有一个习惯`UIStoryboardSegue`，我使用 Facebook Connect（或其他服务）将用户登录到我的应用程序。简而言之，它应该执行以下操作：

1.  用户点击按钮
2.  Button 触发 Segue
3.  segue 启动异步登录但不会立即推送视图控制器
4.  当且仅当登录成功时，segue 才会推送视图控制器

相反，登录开始了，但是 ARC 在它有机会完成之前立即释放了 segue。

我想到了一个快速'n'dirty hack来防止这种情况：

```
@interface BSLoginSegue() {
    __strong BSLoginSegue *_retained_self;
}
@end

// Stuff...
// Other stuff...

- (void) perform {
    login();
    _retained_self = self;
}

- (void) loginServiceDidSucceed:(BSLoginService *)svc {
    ...
    _retained_self = nil;
} 
```

问题是，它*确实*是*一个 hack*，所以我想知道是否还有其他更优雅的方式可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T13:49:34.217

如果您使用[Grand Central Dispatch](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html) (GCD) 进行并发（您应该这样做，这太棒了！）然后通过将对象的引用放在[Objective-C 块](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)中并将其传递给 GCD，它将被块自动保留，直到之后该块已执行并且本身已被释放。

在不确切知道您是如何进行异步操作的情况下，很难给出明确的答案，但是通过使用[块](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)和[GCD](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)，您根本不必担心这一点。该块将负责保留它引用的对象，而 ARC 将完成其余的工作。

看起来您必须在`UIStoryboardSegue`某处存储对您的子类的引用才能调用`loginServiceDidSucceed:`它，所以也许只是制作一个强引用就可以了。再一次，从[块](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)中引用它（例如登录成功时的完成块）是理想的。我建议调整您的登录代码以使用块进行成功/失败回调。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T16:01:53.920

类应该需要保留自己的想法表明可能存在设计问题。当一个对象保留自己时，就不清楚谁拥有它或谁可能引用它，并且泄漏的风险很高。

哪个类负责呈现 segue？它是包含按钮的同一个类吗？此类应保留转场，呈现转场，然后在转场完成时/如果转场完成则释放转场。

如果没有对视图控制器层次结构的进一步了解，很难给出具体的建议。但我的第一反应是建议决定是否呈现 segue 的视图控制器应该在 segue 上有一个强大的属性。子类化的 segue 可能会定义一个协议，呈现类可能会遵守该协议，以告知何时应该取消/释放该 segue。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-04T08:51:58.430

`self`只需在以下数据成员的数组中添加和删除`self`：

```
@interface MyClass
{
    NSMutableArray* _selfRetains;
}
@end

@implementation MyClass
-(id)retainSelf
{ 
    [_selfRetains addObject:self];
    return self;
}
-(void)releaseSelf
{
    [_selfRetains removeLastObject];
}
@end 
```

然后，`[self retain]`用`[self retainSelf]`和`[self release]`替换`[self releaseSelf]`。

虽然其他答案是正确的，并且您通常应该避免需要类来保留自身的设计，但这种解决方法不需要您显着更改应用程序的设计。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-09-12T02:48:10.847

如果您需要在异步操作中保留自己的实例，单例可能是您的选择。

# php - 服务器可以在不更改网页代码的情况下强制浏览器等待吗？

> ID：10518783
> 
> 赞同：0
> 
> 时间：2012-05-09T15:04:06.560
> 
> 标签：php, javascript, html, ajax, perl

我有一个后端服务器来处理来自几个不同网站的请求。这意味着许多网站会向我的服务器询问他们提供给用户浏览器的信息。

这些网站有自己的代码和自己的服务器，我无法控制。我必须更改我的后端代码，这将导致最多 5 分钟的延迟将数据返回到他们的服务器以呈现给他们的客户端 Web 浏览器。

由于我无法更改所有客户端的网站，我的后端服务器是否可以强制客户端浏览器在浏览器上按下提交后等待而不超时？

有什么我可以返回到客户端服务器的东西，他们可以传递给他们的客户端浏览器，以便它继续等待并且当我忙于处理数据而没有从他们的网站得到回复时不会放弃？

现在我使用 php，但我可以使用任何可以解决问题的语言。

我很绝望！

谢谢粗！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:10:28.897

您最好的操作方法是确保服务器不会使您的 php 执行超时，确保设置 php 脚本允许的执行时间以及您的 http 守护程序的所有其他适用的超时设置以及 php 超时设置。

至于客户端超时，这里没有什么可以做的，客户端决定他们什么时候有足够的时间并断开连接。如果可以的话，您可以做的一个技巧是在最终结果的过程中输出一些东西，只要输出不断通过，通常客户端不会超时。这可能意味着在您准备好最终计算之前输出周期。

如果你真的无法控制客户端代码，你能做的最好的就是尝试让你的身边更快。如果可以，缓存数据，预先计算结果等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:08:55.043

大多数浏览器会无限期地等待（或至少，很长一段时间）服务器响应请求，前提是与服务器建立了成功的连接，并且请求将其发送到服务器。

不过我不推荐这条路线。虽然浏览器会等待，但用户可能不会。我建议在后台做你的工作，更新数据库中的工作状态或其他东西。在客户端，您可以通过 AJAX 定期轮询更新，然后在工作完成后根据需要重定向用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:05:54.533

将耗时的进程分叉到后台。让他们将他们的（部分）输出数据传送到会话存储中。定期将主页重定向到自身，从会话存储中读取内容。

有关完整程序，请参阅[通过 CGI 观察长进程。](http://www.stonehenge.com/merlyn/LinuxMag/col39.html)

# installation - 在 ubuntu 11 上安装 phantomjs

> ID：10518784
> 
> 赞同：1
> 
> 时间：2012-05-09T15:04:08.140
> 
> 标签：installation, phantomjs

我遵循了两个安装指南，这个：[http ://code.google.com/p/phantomjs/wiki/Installation](http://code.google.com/p/phantomjs/wiki/Installation)

这个：http: [//yoodey.com/comment/10803](http://yoodey.com/comment/10803)

两次，问题是 bin 目录应该包含一个名为 phantomjs 的文件，但它没有。对于第一个指南，它只包含一个 Info.plist 文件，而在第二个指南中，bin 是空的。

# html - 这些天我们应该使用 -moz-border-radius 属性吗？

> ID：10518785
> 
> 赞同：3
> 
> 时间：2012-05-09T15:04:10.063
> 
> 标签：html, firefox, css

我正在使用[W3C CSS 验证服务](http://jigsaw.w3.org/css-validator/)来验证 CSS，它返回了以下错误：

> 属性 -moz-border-radius-bottomleft 不存在：5px

我的问题是，我们是否需要它，因为现代浏览器似乎理解`border-bottom-left-radius`等。

这是完整的CSS：

```
height: 160px;
border-bottom-left-radius: 5px 5px;
border-bottom-right-radius: 5px 5px;
border-top-left-radius: 5px 5px;
border-top-right-radius: 5px 5px;
-moz-border-radius-bottomleft: 5px;
-moz-border-radius-bottomright: 5px;
-moz-border-radius-topleft: 5px;
-moz-border-radius-topright: 5px;
background: transparent url(../images/search-box-repeat-small.png) repeat; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T15:06:46.713

[Firefox从版本 4 开始](https://developer.mozilla.org/En/Firefox_4_for_developers#Renamed_CSS_properties)理解标准化`border-*-radius`属性。

如果您要为所有四个角指定相等的半径，并且您对支持 Firefox < 4.0 和其他较旧的浏览器不感兴趣，那么您不妨将惊人的**八个边框半径声明**减少到一个：

```
height: 160px;
border-radius: 5px;
background: transparent url(../images/search-box-repeat-small.png) repeat; 
```

如果您需要支持 Firefox 3.6 及更早版本，您仍然需要 prefixed 属性，但为每个角落指定一个仍然只是自找麻烦：

```
height: 160px;
-moz-border-radius: 5px;
border-radius: 5px;
background: transparent url(../images/search-box-repeat-small.png) repeat; 
```

另请注意，无前缀属性应在规则中排在*最后*，因此支持无前缀属性的浏览器将使用它来获得最佳标准一致性。¹

* * *

¹ [是的，供应商确实以不符合标准的方式实现了前缀属性，因为规范中没有任何内容说他们不能。有关Mozilla 删除前缀后发生的变化的详细信息，请参阅[Gecko 说明。`-moz-border-radius`](https://developer.mozilla.org/en/CSS/border-radius#Gecko_notes)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:06:57.557

好吧，很多人坚持支持 IE6，所以是的，你应该支持只有 -moz-border-radius 的旧版本的 Firefox。

哦等等，Firefox 用户比 IE 用户聪明得多，*所以*他们知道如何更新。好吧，猜猜你不需要它。

真的，这取决于你。如果你想保留它，那就这样做吧。除了一点额外的带宽（如果缓存正确，这应该不是问题）之外，没有真正的缺点，那为什么不呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T15:09:36.720

对于 Firefox，我个人认为不需要这个供应商前缀。大多数现代浏览器按原样支持border-radius 属性。

您可以查看此网站以获取浏览器支持： [http ://caniuse.com/border-radius](http://caniuse.com/border-radius)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:11:33.903

供应商属性必须写在像这样的非供应商属性之前

```
-webkit-transform: rotate(7.5deg);  /* Saf3.1+, Chrome */
   -moz-transform: rotate(7.5deg);  /* FF3.5+ */
    -ms-transform: rotate(7.5deg);  /* IE9 */
     -o-transform: rotate(7.5deg);  /* Opera 10.5 */
        transform: rotate(7.5deg); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T15:08:44.873

对于现代版本的 firefox no..

但是为了向后兼容，您需要它们（*4.0 之前*）

看看[-prefix-free](http://leaverou.github.com/prefixfree/)以及自动处理所有（*几乎*）浏览器的所有前缀

# c# - 异步更新 ObservableCollection 项

> ID：10518786
> 
> 赞同：6
> 
> 时间：2012-05-09T15:04:18.710
> 
> 标签：c#, wpf, asynchronous, observablecollection

我是多线程和 WPF 的新手。

我有一个`ObservableCollection<RSSFeed>`, 在应用程序启动项从 UI 线程添加到此集合。RSSFeed 的属性绑定到 WPF ListView。稍后，我想异步更新每个 RSSFeed。所以我正在考虑实现类似的东西`RSSFeed.FetchAsync()`并在其更新的属性上提高 PropertyChanged 。

我知道 ObservableCollection 不支持来自 UI 线程以外的线程的更新，它会抛出 NotSupportedException。但是由于我不是在操作 ObservableCollection 本身，而是在更新其项目的属性，所以我可以期望它能够工作并看到更新的 ListView 项目吗？还是会由于 PropertyChanged 而引发异常？

**编辑：**代码

RSSFeed.cs

```
public class RSSFeed
{
    public String Title { get; set; }
    public String Summary { get; set; }
    public String Uri { get; set; }        
    public String Encoding { get; set; }
    public List<FeedItem> Posts { get; set; }
    public bool FetchedSuccessfully { get; protected set; }        

    public RSSFeed()
    {
        Posts = new List<FeedItem>();
    }

    public RSSFeed(String uri)
    {
        Posts = new List<FeedItem>();
        Uri = uri;
        Fetch();
    }

    public void FetchAsync()
    { 
        // call Fetch asynchronously
    }

    public void Fetch()
    {
        if (Uri != "")
        {
            try
            {
                MyWebClient client = new MyWebClient();
                String str = client.DownloadString(Uri);

                str = Regex.Replace(str, "<!--.*?-->", String.Empty, RegexOptions.Singleline);
                FeedXmlReader reader = new FeedXmlReader();
                RSSFeed feed = reader.Load(str, new Uri(Uri));

                if (feed.Title != null)
                    Title = feed.Title;
                if (feed.Encoding != null)
                    Encoding = feed.Encoding;
                if (feed.Summary != null)
                    Summary = feed.Summary;
                if (feed.Posts != null)
                    Posts = feed.Posts;

                FetchedSuccessfully = true;
            }
            catch
            {
                FetchedSuccessfully = false;
            }

        }
    } 
```

用户配置文件.cs

```
public class UserProfile : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    public event CollectionChangeEventHandler CollectionChanged;

    private ObservableCollection<RSSFeed> feeds;
    public ObservableCollection<RSSFeed> Feeds 
    { 
        get { return feeds; }
        set { feeds = value; OnPropertyChanged("Feeds"); }
    }

    public UserProfile()
    {
        feeds = new ObservableCollection<RSSFeed>();
    }

    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }

    protected void OnCollectionChanged(RSSFeed feed)
    {
        CollectionChangeEventHandler handler = CollectionChanged;
        if (handler != null)
        {
            handler(this, new CollectionChangeEventArgs(CollectionChangeAction.Add, feed));
        }
    }
} 
```

主窗口.xaml.cs

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    // My ListView is bound to this
    // ItemsSource="{Binding Posts}
    public List<FeedItem> Posts
    {
        get 
        {
            if (listBoxChannels.SelectedItem != null)
                return ((RSSFeed)listBoxChannels.SelectedItem).Posts;
            else
                return null;
        }
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        // here I load cached feeds
        // called from UI thread

        // now I want to update the feeds
        // since network operations are involved, 
        // I need to do this asynchronously to prevent blocking the UI thread
    }

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-15T19:52:23.633

使用 .Net 4.5，您可以使用 BindingOperations.EnableCollectionSynchronization 添加对后台线程更新到 ObservableCollection 的支持。这适用于 MVVM。

请参阅： [.net 4.0 等效的 BindingOperations.EnableCollectionSynchronization()](https://stackoverflow.com/questions/12965372/bindingoperations-enablecollectionsynchronization-equivalent-for-net-4-0)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T16:38:45.250

对于这种应用程序，我通常使用将 ReportsProgress 设置为 True 的 BackgroundWorker。然后，您可以为每个调用传递一个对象作为 ReportProgress 方法中的 userState 参数。ProgressChanged 事件将在 UI 线程上运行，因此您可以将对象添加到事件处理程序中的 ObservableCollection。

否则，从后台线程更新属性将起作用，但如果您正在过滤或排序 ObservableCollection，则除非引发某些集合更改通知事件，否则不会重新应用过滤器。

您可以通过查找集合中项目的索引（例如，通过将其报告为progresspercentage）并设置list.item(i) = e.userstate 来重新应用过滤器和排序，即自行替换列表中的项目在 ProgressChanged 事件中。这样，绑定到集合的任何控件的 SelectedItem 都将被保留，而过滤和排序将尊重项目中任何更改的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T15:08:58.257

如果您使用的是 WPF，您可以更新单个绑定项目的属性并从后台线程引发 PropertyChanged。WPF 数据绑定机制（与 WinForms 等效机制不同）检测到这一点并为您编组到 UI 线程。这当然是有代价的——使用自动机制，每个单独的属性更新都会导致一个编组事件，所以如果你要更改很多属性，性能可能会受到影响，你应该考虑将自己的 UI 编组为单个批处理操作.

但是，您不允许操作集合（添加/删除项目），因此如果您的 RSS 提要包含要绑定到的嵌套集合，则需要提前将整个更新提升到 UI 线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-04T02:29:45.803

我有一个类似的场景，遇到了这个“ObservableCollection 不支持来自 UI 线程以外的线程的更新”，最后通过在 Thomas Levesque 的博客中引用这个[AsyncObservableCollection 实现](http://www.thomaslevesque.com/2009/04/17/wpf-binding-to-an-asynchronous-collection/)得到了解决，我认为它可能对你有帮助。

在其更新版本中，SynchronizationContext 用于解决此问题。可以参考[SynchronizationContext的MSDN页面](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext%28v=vs.110%29.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T16:37:44.930

您可能想查看 .Net 中的 ConcurrentCollections 命名空间。

[http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)

这是另一个可能也有帮助的问题。

[ObservableCollection 和线程](https://stackoverflow.com/questions/2293246/observablecollection-and-threading)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-01T14:58:02.183

这是一个简单的 observablecollection，它在 AddRange 方法结束时通知，基于这篇文章[https://peteohanlon.wordpress.com/2008/10/22/bulk-loading-in-observablecollection/](https://peteohanlon.wordpress.com/2008/10/22/bulk-loading-in-observablecollection/)

根据这篇文章[https://thomaslevesque.com/2009/04/17/wpf-binding-to-an-asynchronous-collection/ ，它也是异步和跨线程可修改的](https://thomaslevesque.com/2009/04/17/wpf-binding-to-an-asynchronous-collection/)

```
public class ConcurrentObservableCollection<T> : ObservableCollection<T>
{
    private SynchronizationContext _synchronizationContext = SynchronizationContext.Current;

    private bool _suppressNotification = false;

    public ConcurrentObservableCollection()
        : base()
    {
    }
    public ConcurrentObservableCollection(IEnumerable<T> list)
        : base(list)
    {
    }

    public void AddRange(IEnumerable<T> collection)
    {
        if (collection != null)
        {
            _suppressNotification = true;
            foreach (var item in collection)
            {
                this.Add(item);
            }
            _suppressNotification = false;

            OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
        }
    }
    public void RemoveRange(IEnumerable<T> collection)
    {
        if (collection != null)
        {
            _suppressNotification = true;
            foreach (var item in collection)
            {
                this.Remove(item);
            }
            _suppressNotification = false;

            OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
        }
    }

    protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
    {
        if (SynchronizationContext.Current == _synchronizationContext)
        {
            // Execute the CollectionChanged event on the current thread
            RaiseCollectionChanged(e);
        }
        else
        {
            // Raises the CollectionChanged event on the creator thread
            _synchronizationContext.Send(RaiseCollectionChanged, e);
        }
    }
    protected override void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        if (SynchronizationContext.Current == _synchronizationContext)
        {
            // Execute the PropertyChanged event on the current thread
            RaisePropertyChanged(e);
        }
        else
        {
            // Raises the PropertyChanged event on the creator thread
            _synchronizationContext.Send(RaisePropertyChanged, e);
        }
    }

    private void RaiseCollectionChanged(object param)
    {
        // We are in the creator thread, call the base implementation directly
        if (!_suppressNotification)
            base.OnCollectionChanged((NotifyCollectionChangedEventArgs)param);
    }
    private void RaisePropertyChanged(object param)
    {
        // We are in the creator thread, call the base implementation directly
        base.OnPropertyChanged((PropertyChangedEventArgs)param);
    }
} 
```

# jsp - 为什么我的 response.sendRedirect(returnURL) 最终会杀死我设置的任何域 cookie？

> ID：10518787
> 
> 赞同：0
> 
> 时间：2012-05-09T15:04:18.540
> 
> 标签：jsp, cookies, response.redirect

基本上......每当用户登录我的网站时，我都会创建一个带有加密客户数据的 cookie。这样做没有问题。

但是，如果第 3 方站点用户单击我们的登录链接，我不仅需要创建相同的加密客户 cookie，还需要将它们重定向到我从第 3 方站点生成的 URL 构建的“returnURL”。

这样做也没问题。“returnURL”得到正确的映射等。但是，当我调用“response.sendRedirect(returnURL)”时，我被重定向到与 cookie 相同域的第 3 方站点（这是正确的）。 ..但现在所有的饼干都不见了。

知道为什么会这样吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:21:32.047

**编辑：我的回答好像 OP 询问了 ASP.NET，而他实际上谈论的是 JSP。**我将在这里留下我的答案以供参考，但这与问题无关。

如果您执行`Response.Redirect();`导致`Response.End();`被调用的操作（将 true 作为第二个参数传递，或者根本不传递第二个参数），如果这是您第一次为用户编写会话信息，您将丢失会话数据。例如，登录后，您可以设置 do：

```
Session["userId"] = userId;
Response.Redirect("admin.aspx"); 
```

解决方法是调用

```
Response.Redirect("admin.aspx", false); 
```

如果在您进行重定向时会话尚不存在，您只会丢失会话数据。这里没有设置的不是会话数据本身，而是标识会话的 cookie。

Betrand LeRoy 更详细地解释了这一点：

[http://weblogs.asp.net/bleroy/archive/2004/08/03/207486.aspx](http://weblogs.asp.net/bleroy/archive/2004/08/03/207486.aspx)

# wpf - ListView ItemTemplate 和 ItemsSource 不显示预期值

> ID：10518788
> 
> 赞同：1
> 
> 时间：2012-05-09T15:04:24.590
> 
> 标签：wpf, listview, itemtemplate

我遇到了以下代码的问题：

```
FolderBrowserDialog ofd = new FolderBrowserDialog();
        ofd.Description = "Wählen Sie bitte den Ordner mit den Videodateien die Sie verschieben und umbenennen wollen...";
        if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK) {
            string path = ofd.SelectedPath;
            foreach (var file in Directory.GetFiles(path)) {
                files.Add(new FileStatus(file, new FileInfo(file).Length));
            }
        } 
```

FileStatus 对象的代码是：

```
public FileStatus(string filename, long filesize, long currentsize = 0) {
        this.currentsize = currentsize;
        this.filename = filename;
        this.filesize = filesize;
    }
    public string filename { get; set; }
    public long filesize { get; set; }
    public long currentsize { get; set; }
    public double percent {
        get {
            return (currentsize / filesize) * 100;
        }
    } 
```

ListView 的 XAML 是：

```
<ListView Name="lb_data" Grid.Row="2" DataContext="{Binding}" ItemTemplate="{StaticResource fileStatusTemp}">
    </ListView> 
```

fileStatusTemp 的 XAML：

```
<DataTemplate x:Key="fileStatusTemp">
        <StackPanel>
            <TextBlock Text="{Binding Path=filename}" ></TextBlock>
        </StackPanel>
</DataTemplate> 
```

ItemSource 属性在窗口的构造函数中设置：

```
lb_data.ItemSource = files; 
```

感谢 KDiTraglia 的建议 :)
所以问题是当我运行这段代码时它不显示文件名。它什么也没显示。在另一个项目中，一段类似的代码可以工作......
我希望你能帮助我:)
问候 Knerd

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:09:17.103

您在列表视图中缺少 itemssource="{binding ??}" 。我也怀疑这条线是否按你的意愿工作......

```
DataContext="{Binding}" 
```

编辑：

我将这一切复制到一个测试项目中，它工作正常，这是我的整个项目逐字记录，也许我做了一些小事情。

dowhilefor 对 INotifyPropertyChanged 提出了一个很好的观点，我的代码在加载时工作，但如果文件是从构造函数以外的事件添加的，则不会工作。要轻松解决此问题，只需将 List 更改为 ObservableCollection（不要忘记包含“使用 System.Collections.ObjectModel”）。我在下面更新了我的代码。

```
public partial class MainWindow : Window
{
    public ObservableCollection<FileStatus> files { get; set; }
    public MainWindow()
    {
        InitializeComponent();
        files = new ObservableCollection<FileStatus>();
        lb_data.ItemsSource = files;

        FolderBrowserDialog ofd = new FolderBrowserDialog();
        ofd.Description = "Wählen Sie bitte den Ordner mit den Videodateien die Sie verschieben und umbenennen wollen...";
        if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            string path = ofd.SelectedPath;
            foreach (var file in Directory.GetFiles(path))
            {
                files.Add(new FileStatus(file, new FileInfo(file).Length));
            }
        }
    }
} 
```

-

```
<Window x:Class="WPFtest5.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <DataTemplate x:Key="fileStatusTemp">
            <StackPanel>
                <TextBlock Text="{Binding Path=filename}" />
            </StackPanel>
        </DataTemplate>
    </Window.Resources>
    <ListView Name="lb_data" ItemTemplate="{StaticResource fileStatusTemp}"/>
</Window> 
```

-

```
public class FileStatus
{
    public FileStatus(string filename, long filesize, long currentsize = 0)
    {
        this.currentsize = currentsize;
        this.filename = filename;
        this.filesize = filesize;
    }
    public string filename { get; set; }
    public long filesize { get; set; }
    public long currentsize { get; set; }
    public double percent
    {
        get
        {
            return (currentsize / filesize) * 100;
        }
    }

} 
```

# iphone - 如何动态设置 UIScrollView 的内容大小

> ID：10518790
> 
> 赞同：37
> 
> 时间：2012-05-09T15:04:35.357
> 
> 标签：iphone, objective-c, uiview, uiscrollview

我有关于`UIScrollview`.

故事是我有一个`UIView`名为 ChartsView 的我自己通过 override 方法重新绘制它`drawRect()`。绘图内容是动态生成的。所以直到运行时我才知道它的大小。问题是我如何/在哪里可以动态设置其超级视图（scrollView）的内容大小？对此有任何想法吗？

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

// not this way. it's fixed size.....
        ChartsView *chartsView = [[ChartsView alloc]initWithFrame:CGRectMake(0, 0, 320, 800)]; 

        self.scrollView.contentSize = chartsView.frame.size;

        [self.scrollView addSubview:chartsView];

    } 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-13T11:33:45.573

另一种简单的方法

```
- (void)viewDidLoad
{
    float sizeOfContent = 0;
    UIView *lLast = [scrollView.subviews lastObject];
    NSInteger wd = lLast.frame.origin.y;
    NSInteger ht = lLast.frame.size.height;

    sizeOfContent = wd+ht;

    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width, sizeOfContent);
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-10-14T19:30:22.727

不能 100% 保证 scrollView.subviews 数组中的最后一个对象将返回滚动视图中最高的 y 原点对象。subviews 数组按 Z-Index 排列（即 subviews 数组中的最后一个对象将是堆叠最高的对象，并且将是滚动视图的子视图中最顶层的子视图。相反，使用基本排序功能更准确遍历子视图并获取具有最高 y 原点的对象。

**斯威夫特 4**

```
extension UIScrollView {
    func updateContentView() {
        contentSize.height = subviews.sorted(by: { $0.frame.maxY < $1.frame.maxY }).last?.frame.maxY ?? contentSize.height
    }
} 
```

用法（在`viewDidLayoutSubviews`内容大小更新时或更新时）：

```
myScrollView.updateContentView() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-08T15:07:47.850

**迅速**(2.0)

```
@IBOutlet weak var btnLatestButton: UIButton!

override func viewDidLoad() {
    super.viewDidLoad()

    let height = btnLatestButton.frame.size.height
    let pos = btnLatestButton.frame.origin.y
    let sizeOfContent = height + pos + 10
    scrollview.contentSize.height = sizeOfContent

} 
```

当然，以上是当您的滚动视图只有固定数量的视图时。IOS Rocks 方法可用，但对我不利，创造了比我需要的更多空间。

```
 let lastView : UIView! = scrollview.subviews.last
    let height = lastView.frame.size.height
    let pos = lastView.frame.origin.y
    let sizeOfContent = height + pos + 10
    scrollview.contentSize.height = sizeOfContent 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-28T00:41:37.870

感谢 IOS Rocks 和 CularBytes 提供的线索。我发现上述解决方案有两个问题（对我来说）：

1.  我总是有一个容器 UIView 作为我的 UIScrollView 的唯一子级，所以我必须更新在该子级 UIView 中查找最后一个视图的方式（见下文）
2.  我在 UIScrollView 中偏移了我的内容，因此需要计算最后一个 UIView 的绝对位置（因此，相对于窗口而不是父视图）

我也使用自动布局来固定 UIScrollView 的侧面，所以我不需要担心宽度（就像 CularBytes 一样）。

这是我想出和工作的（在 Swift 3.0 中）：

```
func setScrollViewContentSize() {

    var height: CGFloat
    let lastView = self.myScrollView.subviews[0].subviews.last!
    print(lastView.debugDescription) // should be what you expect

    let lastViewYPos = lastView.convert(lastView.frame.origin, to: nil).y  // this is absolute positioning, not relative
    let lastViewHeight = lastView.frame.size.height

    // sanity check on these
    print(lastViewYPos)
    print(lastViewHeight)

    height = lastViewYPos + lastViewHeight

    print("setting scroll height: \(height)")

    myScrollView.contentSize.height = height
} 
```

`viewDidAppear()`我在我的方法中称之为。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-25T10:57:38.410

```
override func viewDidAppear(_ animated: Bool) {
    var height: CGFloat
    let lastView = self.scrollView.subviews[0].subviews.last!

    let lastViewYPos = lastView.convert(lastView.frame.origin, to: nil).y  
    let lastViewHeight = lastView.frame.size.height

    height = lastViewYPos + lastViewHeight
    scrollView.contentSize.height = height
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-09T15:15:21.773

尝试这个

```
- (void)viewDidLoad
        {
            [super viewDidLoad];

    // not this way. it's fixed size.....
            ChartsView *chartsView = [[ChartsView alloc]initWithFrame:CGRectMake(0, 0, 320, 800)]; 

            self.scrollView.contentSize = chartsView.frame.size;
            [self.scrollView setNeedsDisplay];
            [self.scrollView addSubview:chartsView];

    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-11T09:44:00.053

动态计算 UIScrollview contentSize（取决于子视图框架）

迅速：

```
override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()

    DispatchQueue.main.async {
        var contentRect = CGRect.zero

        for view in self.scrollView.subviews {
           contentRect = contentRect.union(view.frame)
        }

        self.scrollView.contentSize = contentRect.size
    }
} 
```

目标 C：

```
 - (void)viewDidLayoutSubviews {
     [super viewDidLayoutSubviews];

     dispatch_async(dispatch_get_main_queue(), ^ {
                        CGRect contentRect = CGRectZero;

                        for(UIView *view in scrollView.subviews)
                           contentRect = CGRectUnion(contentRect,view.frame);

                           scrollView.contentSize = contentRect.size;
                       });
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-08-24T22:32:26.673

在情节提要中使用滚动视图时，最好根据滚动视图中存在的视图数量计算内容大小，而不是通过静态值以编程方式给出内容大小。以下是动态获取内容大小的步骤。

**第 1 步：** 添加 Scrollview 以在情节提要中查看并添加前导、尾随、顶部和底部约束（所有值均为零）。

**第 2 步：** 不要直接在滚动视图上添加您需要的视图，首先向滚动视图添加一个视图（这将是我们所有 UI 元素的内容视图）。将以下约束添加到此视图。前导、尾随、顶部和底部约束（所有值均为零）。将等高、等宽添加到主视图（即包含滚动视图）。对于相等的高度，将优先级设置为低。（这是设置内容大小的重要步骤）。此内容视图的高度将根据添加到视图中的视图数量而定。假设您添加的最后一个视图是一个标签，并且他的 Y 位置为 420，高度为 20，那么您的内容视图将为 440。

**第 3 步：**根据您的要求为您在内容视图中添加的所有视图添加约束。

[![在此处输入图像描述](../Images/f3892da1fd795aa15d27dbe97faaedcb.png)](https://i.stack.imgur.com/Z7EfB.png)

[![在此处输入图像描述](../Images/be8e1239a4b3e572b1e7912298005ac4.png)](https://i.stack.imgur.com/CWr9k.png)

参考：[https ://medium.com/@javedmultani16/uiscrollview-dynamic-content-size-through-storyboard-in-ios-fb873e9278e](https://medium.com/@javedmultani16/uiscrollview-dynamic-content-size-through-storyboard-in-ios-fb873e9278e)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-04-13T14:10:43.080

**斯威夫特 5**

您还可以`UIScrollView`通过调整以编程方式更新 contentView `UIScrollView.contentLayoutGuide`，这是将 contentview 限制为高度的示例`yourView`：

```
self.scrollView.translatesAutoresizingMaskIntoConstraints = false
self.scrollView.translatesAutoresizingMaskIntoConstraints = false
self.scrollView.heightAnchor.constraint(equalTo: self.view.heightAnchor).isActive = true
self.scrollView.widthAnchor.constraint(equalTo: self.view.widthAnchor).isActive = true
self.scrollView.leadingAnchor.constraint(equalTo: self.view.leadingAnchor).isActive = true
self.scrollView.topAnchor.constraint(equalTo: self.view.topAnchor).isActive = true

self.scrollView.contentLayoutGuide.heightAnchor.constraint(equalTo: yourView.heightAnchor, multiplier: 1).isActive = true
self.scrollView.contentLayoutGuide.widthAnchor.constraint(equalTo: self.view.widthAnchor, multiplier: 1).isActive = true
self.scrollView.contentLayoutGuide.leadingAnchor.constraint(equalTo: self.view.leadingAnchor).isActive = true
self.scrollView.contentLayoutGuide.topAnchor.constraint(equalTo: self.view.topAnchor).isActive = true 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-10-14T10:01:34.353

使用 contentInset

> 故事板

和

> 以编程方式

跟随[![这个效果最好](../Images/2dba20b89f0c1b4b7bed156796637c6f.png)](https://i.stack.imgur.com/LiEdH.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-06-28T04:03:45.980

尝试这个 -

```
- (void)viewDidLoad
    {
        [super viewDidLoad];

// not this way. it's fixed size.....
        ChartsView *chartsView = [[ChartsView alloc]initWithFrame:CGRectMake(0, 0, 320, 800)]; 

        //self.scrollView.contentSize = chartsView.frame.size;
        [self.scrollView setContentSize:CGSizeMake(chartsView.frame.size.width, chartsView.frame.size.height)];
        [self.scrollView addSubview:chartsView];

    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-01T12:38:19.723

这是在 Swift 3 上编写的扩展

```
extension UIScrollView {
    func updateContentViewSize() {
        var newHeight: CGFloat = 0
        for view in subviews {
            let ref = view.frame.origin.y + view.frame.height
            if ref > newHeight {
                newHeight = ref
            }
        }
        let oldSize = contentSize
        let newSize = CGSize(width: oldSize.width, height: newHeight + 100)
        contentSize = newSize
    }
} 
```

# macos - 归档应用程序时出现mac应用商店productbuild错误

> ID：10518798
> 
> 赞同：0
> 
> 时间：2012-05-09T15:04:56.730
> 
> 标签：macos, app-store, productbuild

我使用 productbuild 归档我的应用程序以提交到应用商店。我在终端中运行这个命令：

```
/Developer/usr/bin/productbuild   --component /Ahmed/QtWorkMac/AlMosaly2-build-desktop-Desktop_Qt_4_8_0_for_GCC__Qt_SDK__Release/AlMosaly2.app /Applications /Ahmed --sign "3rd Party Mac Developer Installer: Nourayn Media Group" 
```

但发生错误是：

```
productbuild: error: Cannot write product to "/Ahmed". (The operation couldn’t be completed. Bad file descriptor) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:46:20.277

尝试把`--sign`之前`--component`。然后，在应用程序包的路径之后，您应该提供要保存包的路径。你有`/Applications /Ahmed`这不是它所期望的。

# jquery - 使用jQuery切换锚标记的属性值

> ID：10518802
> 
> 赞同：0
> 
> 时间：2012-05-09T15:05:07.650
> 
> 标签：jquery

我有这个 HTML。

```
<a href="#" class="button redB" style="margin: 4px 4px 4px -4px;" id="estEditItemToggleMode" data-mode="edit">
    <img src="images/icons/light/check.png" alt="" class="icon">
    <span>Enable Editing Mode</span>
</a> 
```

单击时我想继续切换`class`属性的值，`data-mode` 它应该像这样

```
if(mode == "edit") {
    class = "button blueB";
    data-mode = "select";
}
else if(mode == "select") {
    class = "button redB";
    data-mode = "edit";
} 
```

我试过用这个。

```
$('#estEditItemToggleMode').live('click', function(e){
    e.preventDefault();
    if($(this).data('mode') == "edit") {
        $(this).removeClass('redB').addClass('blueB');
        $(this).attr('data-mode', 'select');
    }
    else if($(this).data('mode') == "select") {
        $(this).removeClass('blueB').addClass('redB');
        $(this).attr('data-mode', 'edit');
    }
}); 
```

这只会切换一次值。因此对两次或多次点击没有影响。如何正确处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:09:43.390

尝试如下，

[**演示**](http://jsfiddle.net/skram/UMpEq/1/)

```
$('#estEditItemToggleMode')
     .data('mode', 'edit') //added data to the link
     .live('click', function(e){
        e.preventDefault();

        var $this = $(this);
        var mode = $this.data('mode');

        if(mode == "edit") {
            $this.removeClass('redB').addClass('blueB');
            $this.data('mode', 'select'); //Changed from .attr to .data
        }
        else if(mode == "select") {
            $this.removeClass('blueB').addClass('redB');
            $this.data('mode', 'edit'); //Changed from .attr to .data
        }
 }); 
```

`data-mode`并从标记中删除 attr 。

```
<a href="#" class="button redB" style="margin: 4px 4px 4px -4px;" id="estEditItemToggleMode" >
    <img src="images/icons/light/check.png" alt="" class="icon">
    <span>Enable Editing Mode</span>
</a> 
```

**编辑：**缓存了一些多余的 jQuery 调用。

**编辑 2：** `.live`已弃用，因此您应该使用`.on`或`.delegate`

**编辑 3：**小提琴输出，

![在此处输入图像描述](../Images/817b83870109c6e8826ed27d8276196a.png)

# python - 数据对齐后无法导出为 CSV

> ID：10518803
> 
> 赞同：2
> 
> 时间：2012-05-09T15:05:08.147
> 
> 标签：python, pandas

我有两组数据，只想保留两组具有共同日期的数据。我用 导入数据集`read_csv()`，称它们为*`df1`*，*`df2`*。

然后运行：

```
DF=df1.align(df2, join='inner',axis=0) 
```

检查后，似乎*DF*是一个元组。目标是使用 . 导出对齐的数据（仅在常见日期）`DF.to_csv(path)`。它失败并显示“元组”对象没有属性“to_csv”的消息。我不明白为什么加入创建了一个元组。这不应该仍然是可以导出到 CSV 的数据框吗？

是否有更好的命令可以使用，以便可以轻松地将其导出到 .csv 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T19:10:37.163

`align`返回左右 DataFrame 的对齐版本（作为元组）：

[http://pandas.pydata.org/pandas-docs/stable/basics.html#aligning-objects-with-each-other-with-align](http://pandas.pydata.org/pandas-docs/stable/basics.html#aligning-objects-with-each-other-with-align)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:20:45.297

阅读[文档](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.align.html?highlight=dataframe#pandas.DataFrame.align)。

```
DF,type = df1.align(df2, join='inner', axis=0)
DF.to_csv(path) 
```

# date - ical 导出的格式化时间

> ID：10518804
> 
> 赞同：7
> 
> 时间：2012-05-09T15:05:12.873
> 
> 标签：date, datetime, time, icalendar, rfc5545

我在 jquery 中创建了一个导出到 ical 的日历。但是，我在日期时间方面遇到了一些问题。

ical 导出脚本需要以下格式的日期/时间：19970714T170000Z。

有谁知道这是什么以及我应该如何准备我的字符串？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T18:45:15.827

阅读 RFC（[链接](https://www.rfc-editor.org/rfc/rfc5545#section-3.3.5)）给出：

> 3.3.5。约会时间

> [...]

> 日期时间 = 日期“T”时间

> “DATE-TIME”值类型以三种形式表示时间值：

> 表格 #1：带有当地时间的日期 例如，以下表示 1998 年 1 月 18 日晚上 11 点：19980118T230000

> FORM #2: DATE WITH UTC TIME CAPITAL LETTER Z 后缀字符，到时间值。
> 例如，以下表示 1998 年 1 月 19 日 0700 UTC：19980119T070000Z

> 表格 #3：带有本地时间和时区参考的日期 TZID=America/New_York:19980119T020000

> DTSTART:19970714T133000；当地时间 DTSTART:19970714T173000Z ；UTC 时间 DTSTART;TZID=America/New_York:19970714T133000 ; 当地时间和时间；区域参考

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-31T11:50:24.397

这几乎就像 toISOString

```
function formatDateTime(date) {
  const year = date.getUTCFullYear();
  const month = pad(date.getUTCMonth() + 1);
  const day = pad(date.getUTCDate());
  const hour = pad(date.getUTCHours());
  const minute = pad(date.getUTCMinutes());
  const second = pad(date.getUTCSeconds());
  return `${year}${month}${day}T${hour}${minute}${second}Z`;
}

function pad(i) {
  return i < 10 ? `0${i}` : `${i}`;
}

// Example:
const date = new Date('2017-05-31T11:46:54.216Z');
date.toISOString()   // '2017-05-31T11:46:54.216Z'
date.toJSON()        // '2017-05-31T11:46:54.216Z'
formatDateTime(date) // '20170531T114654Z' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-08T09:12:05.003

因此，要回答在 JQuery 中转换为这种格式的问题，您可以执行以下操作。

```
var n = d.toISOString(); 
```

# c# - 如何在标记中添加项目以供用户控制？

> ID：10518805
> 
> 赞同：4
> 
> 时间：2012-05-09T15:05:18.227
> 
> 标签：c#, asp.net, user-controls, webforms, custom-server-controls

我有一个生成一系列箭头按钮的用户控件。我希望每个按钮都显示一个自定义用户控件。我的自定义箭头按钮导航控件在呈现时如下所示：

![](../Images/f2e523f476c38401d0d62ed5b5299f49.png)

完成后，单击按钮将在箭头下方显示用户控件。每个箭头按钮都需要绑定到包含特定于该按钮的独特功能的自定义用户控件。目前，我在用户控件上有一个简单的`List<ArrowTab> Tabs { get; set; }`属性，并且在托管用户控件的页面的 page_load 中，我以编程方式添加了一些示例选项卡（如上所示），如下所示：

```
 TabWizard1.Tabs = new List<ArrowTab>
            {
                new ArrowTab
                {
                    Text = "Project Settings",
                    Selected = true
                },
                new ArrowTab { Text = "Groups" },
                new ArrowTab { Text = "Products" },
                new ArrowTab { Text = "Make Assignments" },
                new ArrowTab { Text = "Review Assignments" },
                new ArrowTab { Text = "Commitments" }
            }; 
```

这适用于从后面的代码中添加按钮，但我真正想要的是在页面上的用户控件的标记中添加按钮，并将不同的自定义用户控件关联到该按钮。例如，我想做这样的事情：

```
 <uc:TabWizard ID="TabWizard1" runat="server">
        <items>
            <arrowTab Text="Project Settings">
                <uc:ProjectSettingsControl ID="projectSettings1" runat="server" />
            </arrowTab>
            <arrowTab Text="Groups">
                <uc:GroupsControl ID="groups1" runat="server" />
            </arrowTab>
            <arrowTab Text="Products">
                <uc:ProductsControl ID="products1" runat="server" />
            </arrowTab>
            <arrowTab Text="Make Assignments">
                <uc:MakeAssignmentsControl ID="makeAssignments1" runat="server" />
            </arrowTab>
            <arrowTab Text="Review Assignments">
                <uc:ReviewAssignmentsControl ID="reviewAssignments1" runat="server" />
            </arrowTab>
            <arrowTab Text="Commitments">
                <uc:CommitmentsControl ID="commitments1" runat="server" />
            </arrowTab>
        </items>
    </uc:TabWizard> 
```

Telerik RadPanel 控件就是一个已经在做类似事情的例子。

```
<telerik:RadPanelItem Text="Mail" ImageUrl="Img/mail.gif" Expanded="True">
    <Items>
        <telerik:RadPanelItem ImageUrl="Img/mailPersonalFolders.gif" Text="Personal Folders" />
        <telerik:RadPanelItem ImageUrl="Img/mailDeletedItems.gif" Text="Deleted Items" />
        <telerik:RadPanelItem ImageUrl="Img/mailInbox.gif" Text="Inbox" />
        <telerik:RadPanelItem ImageUrl="Img/mailFolder.gif" Text="My Mail" />
        <telerik:RadPanelItem ImageUrl="Img/mailSent.gif" Text="Sent Items" />
        <telerik:RadPanelItem ImageUrl="Img/mailOutbox.gif" Text="Outbox" />
        <telerik:RadPanelItem ImageUrl="Img/mailSearch.gif" Text="Search Folders" />
    </Items>
</telerik:RadPanelItem> 
```

我不知道如何创建允许这种行为的用户控件。即使只是朝着正确的方向轻推也会是有益的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:52:27.780

理查德提供的链接应该为您指明正确的方向，但要回答您的一些问题：

### 如何允许子元素？

`PersistenceMode`您可以通过使用和属性标记属性来使服务器控件支持子元素`DesignerSieralizationVisibility`。在您的情况下，此属性将是元素的集合，如下例所示：

```
 /// <summary>
    /// Gets the columns collection.
    /// </summary>
    [Browsable(true)]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
    [PersistenceMode(PersistenceMode.InnerProperty)]
    public GridColumnCollection Columns
    {
        get
        {
            if (columnsCollection == null)
            {
                if (columnsArrayList == null)
                {
                    this.EnsureChildControls();
                    if (columnsArrayList == null)
                        columnsArrayList = new ArrayList();
                }
                columnsCollection = new GridColumnCollection(columnsArrayList);
            }
            return columnsCollection;
        }
    } 
```

### 如何迭代页面加载用户控件中的那些元素？

子元素集合将映射到一个属性，您可以遍历该集合以将元素添加到您的控件。

```
foreach (GridColumn dataColumn in columnsCollection)
{
    var cell = new GridCell(dataColumn.HeaderStyle, dataColumn.HeaderText);
    item.Cells.Add(cell);
} 
```

### 子项也需要是用户控件吗？

不，子项将是其他服务器控件。您的 items 属性将映射到服务器控件的集合，在您的情况下是`ArrowTab`控件。

### 最后，如果子项需要成为他们自己的用户控件，那么这些控件是否需要某种 ContentTemplate 东西？

是的，您希望在服务器控件中实现该`ITemplate`接口。`ArrowTab`理查德提供的链接应该解释如何做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:15:36.163

我相信您所追求的是[Building Templated Custom ASP.NET Server Controls](http://msdn.microsoft.com/en-us/library/aa478964.aspx)。

# function - VB6 有指定函数别名的方法吗？

> ID：10518810
> 
> 赞同：1
> 
> 时间：2012-05-09T15:05:34.857
> 
> 标签：function, vb6, alias

有没有办法在 VB6 中为函数指定别名？

例如。我有以下功能

```
 Public Sub printCommonString(CommonString() As Byte)
 ... 
```

我这样称呼这个函数 -

```
 printCommonString commonString 
```

我不想以这种方式调用函数，而是想使用更短的名称，例如

```
pCS commonString 
```

所以 pCS 是 printCommonString 的别名。有没有办法写出这样的别名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T18:57:02.790

据我所见，VB6 中没有别名。如果您无法重命名该方法，这可能是一个选项。创建一个简单包装 printCommonString 的方法怎么样？

```
Public Sub pCS(ByRef CommonString() As Byte)
   printCommonString CommonString
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:19:03.807

据我所知，您可以在 VB6 中使用的唯一别名是从 DLL 声明函数的别名。例如

```
Declare Function Dostf Lib "stuff.dll" Alias "DoStuff" (ByVal id As Integer, ByRef msg As Any, ByVal blen As Integer) As Integer) 
```

其中 DoStuff 是库中的函数名， Dostf 是 vb 代码中的函数名。

# ios - iOS - 按下按钮后更改按钮颜色不起作用

> ID：10518811
> 
> 赞同：0
> 
> 时间：2012-05-09T15:05:35.793
> 
> 标签：ios, uibutton, cgcontext, uicolor

我使用[此处](http://iphonedevelopment.blogspot.com/2010/05/improved-gradient-buttons.html)找到的代码为按钮着色。我已经创建了一些类似于代码中默认颜色的方法，例如`orangeColor`,`greenColor`等等。

当我的视图加载时，我设置了我的 UIButtons 的颜色，当按下一个按钮时，我想更改按钮的颜色以反映它们的功能变化，我执行以下操作（考虑到按钮是不同的颜色）：

```
[self.recordPlayButton greenColor];
[self.recordPlayButton setNeedsDisplay];
[self.stopRecordButton orangeColor];
[self.stopRecordButton setNeedsDisplay]; 
```

但是我的按钮颜色保持不变，知道为什么会这样吗？

**编辑：**我刚刚注意到的另一件奇怪的事情是按钮的突出显示颜色发生了变化，但不是正常颜色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:10:55.810

[http://code.google.com/p/iphonegradientbuttons/issues/detail?id=4](http://code.google.com/p/iphonegradientbuttons/issues/detail?id=4)

如果您查看 Wiki 中的渐变按钮，您会发现它实际上是 iOS5 中的缺陷。您是否测试过演示是否可以在您的设备上运行？

# c++ - 如何在共享内存中使用运算符“new”和“delete”？

> ID：10518820
> 
> 赞同：7
> 
> 时间：2012-05-09T15:05:58.617
> 
> 标签：c++, memory-management, shared-memory

我想使用共享内存在多​​个程序之间共享一些对象。

我在[这个网站](http://www.go4expert.com/forums/showthread.php?t=8461)上找到了例子。它没有任何对象分配，只是直接寻址，但我想在共享内存中创建结构或类。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T15:11:01.860

因为已经分配了内存，所以您要使用**Placement new**：

```
void * ptr = shmat(shmid, 0, 0);
// Handle errors
MyClass * x = new (ptr) MyClass; 
```

然后， 的新实例`MyClass`将在 指向的内存中构造`ptr`。

当不需要对象时，您必须手动调用析构函数（不释放内存）。

```
ptr->MyClass::~MyClass(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T15:10:21.417

可以使用placement new 在任何合适的对齐存储中创建对象：

```
void* storage = get_aligned_shared_memory();
T* object = new (storage) T(); 
```

也就是说——您是否考虑过为此使用诸如[Boost.Interprocess之类的库。](http://www.boost.org/doc/libs/release/doc/html/interprocess.html)

# jquery - 基于垂直滚动的水平图像移动

> ID：10518823
> 
> 赞同：0
> 
> 时间：2012-05-09T15:06:12.370
> 
> 标签：jquery, scroll

请检查这个网站：

[http://www.agencynet.com/](http://www.agencynet.com/)

我不明白如何控制绿点的移动。

我该怎么做才能使绿点对滚动做出反应？

```
$(function(){

     $('a[href*=#]').click(function() {

     if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {

             var $target = $(this.hash);

             $target = $target.length && $target || $('[name=' + this.hash.slice(1) +']');

             if ($target.length) {

                 var targetOffset = $target.offset().top;

                 $('html,body').animate({scrollTop: targetOffset}, 1000);
                 $('#punto').animate({'marginLeft': targetOffset/2}, 1000);
                 return false;

            }

       }

   });

}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:12:51.073

这应该让你开始

```
$(window).scroll(function() {
var scrolltop = $(window).scrollTop();
// animate your green dot according to the scrolltop value here
// e.g. $('.dot').stop().animate({left:(scrolltop/1000.0)*100+'px'});
}); 
```

一句忠告：每次滚动更新时都制作动画可能会导致平滑滚动浏览器的性能下降。在这种情况下，最好仅在滚动停止或至少有一些最小超时后才开始动画

# mysql - 根据主表主键值将数据插入子表

> ID：10518831
> 
> 赞同：0
> 
> 时间：2012-05-09T15:06:41.740
> 
> 标签：mysql, transactions

我目前正在与电子商务购物网站合作。用户可以随时随地提交订单是完全没有必要的。

我在 MySql 数据库中有两个表`order`（`order_details`还有其他表）来维护我们可以轻松想象的订单细节，因此我认为，我不需要描述这两个表的整个结构。

该`order`表基本上包含诸如`order_id`自动递增主键的字段`order_date`，`order_status`以及我们在此上下文中不需要的其他一些字段。

该`order_details`表基本上包含表的`order_id`外键*等*字段。`order``product_name``product_price`

当客户提交订单时，要进行的第一个条目在`order`表中，并基于`order_id`此表中的内容，将订单的详细信息插入到`order_details`表中。

插入到表中需要从**订单**表中获取`order_details`适当的值（它是自动递增的，因此我们不能提前获得它）。我目前正在从类似这样的表中获取它。`order_id`**`order_id``order`**

 **```
select max(order_id) from order; 
```

该 SQL 语句为我提供`order_id`了`order`表中的最新信息，并且使用该值，我可以将特定订单的详细信息插入到`order_details`表中。

现在，假设我当前正在提交包含购物车中一些产品的订单。我的订单已`order`成功插入表中，但在插入之前（以及在从表中`order_details`检索**最大值** 之前），由于某些原因，服务器上的操作系统调度程序关闭了此过程，以执行另一个客户的订单并处理该订单另一个客户的订单已完全完成（插入到两个表中，the和 the ）。`order_id``order``order``order_details`

完成此订单处理（另一个客户的订单）后，我的仍待处理的订单开始执行，该订单在从表中检索**最大值之前被关闭。** 上面的SQL语句执行时，会从与其他客户的订单相关的表中取出与我的订单**无关**的表，导致交易状态**不一致**！`order_id``order``max` `order_id``order`

 ****我想问的是，如何正确地`order_id`从`order`表中获取一个始终与特定订单相关的适当的数据，并保证***任何事务在任何时候都不会以不一致的***状态结束。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:08:09.530

MySQL 的[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/en/information-functions.html#function_last-insert-id)函数将从`INSERT`当前连接上最后一个操作的第一次成功插入返回自动递增的值。

您的 MySQL API 通常会为这个函数调用提供一些包装器，例如[`mysql_insert_id()`](http://php.net/manual/en/function.mysql-insert-id.php)在 PHP 中。******

# git - 使用 SmartGit 克隆的存储库，但显示 在目录面板中

> ID：10518844
> 
> 赞同：2
> 
> 时间：2012-05-09T15:07:14.337
> 
> 标签：git, github, ssh-keys, smartgit

我在 Github 上有一个存储库，想将它克隆到我的笔记本电脑上。我可以使用 SmartGit 克隆它，但在目录面板上看不到任何内容。除了克隆存储库的名称外，它还显示“缺失”。

我的钥匙有什么问题吗？我没有生成密钥，因为我是从我在学校的另一个帐户中获取的。我已将两个密钥（私有和公共）存储在我的笔记本电脑中：C:\users\owner.ssh\id_rsa 文件夹。

我选择的 Authentication SmartGit 是“使用 SmartGit 作为 SSH 客户端”。

“已知凭据”我有以下内容：存储库 Git：ssh://git@github.com 详细信息私钥：C:\Users\owner.ssh\rd_rsa

我是 Git 的新手，我不知道出了什么问题……我将不胜感激任何帮助和建议！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:49:40.640

我遇到的问题是我应该将 ssh 文件夹（私钥和公钥所在的位置）存储在 wamp/www 文件夹中，而不是用户文件夹中。

然后我更新了 SmartGit 中的凭据（首先我删除了已知凭据，然后我从 github 克隆了 repo。SmartGit 询问了新凭据。这里我写了私钥的路径（现在在 wamp/www 文件夹中），最后我输入密码。

然后将 repo 克隆到同一个 wamp/www 文件夹中。瞧！现在一切都很好。

# android - android:drawable 书签/收藏夹图标的名称

> ID：10518845
> 
> 赞同：3
> 
> 时间：2012-05-09T15:07:14.247
> 
> 标签：android, icons, drawable

我正在浏览 SDK 的平台 android-7、android-8 文件夹以找到我想在我的应用程序中使用的“官方”书签/收藏夹图标。令我惊讶的是我没有找到它？有人知道它的名字吗？我还需要“添加收藏夹/书签”和“删除收藏夹/书签”图标的名称。

我不想设计图标，因为到目前为止我的应用程序只使用系统图标，我想坚持使用它们以在所有图标和所有 API 级别上保持共同的外观和感觉......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:19:49.093

浏览 android-8 res 文件夹，我发现`btn_star_big_off_*.png`了`btn_star_big_on_*.png`许多针对不同状态的不同可绘制对象。您可以使用它来添加和删除书签。

# mongodb - MongoDB 更新多个文档

> ID：10518848
> 
> 赞同：4
> 
> 时间：2012-05-09T15:07:23.230
> 
> 标签：mongodb, transactions

架构：

```
{
    name: String,
    available: Boolean,
    for: String
} 
```

有“一个”：

```
{
    name: "a",
    available: true,
    for: ["b", "c"]
} 
```

和“b”：

```
{
    name: "b",
    available: true,
    for: ["a", "b]
} 
```

如果我更新 a.available = false，我应该同时更新 b.available = false。我如何更新两个文档并确保在更新“a”和“b”之间不会有其他进程/线程获得“b”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:11:53.447

MongoDB 不支持原子事务。因此，如果您需要在第二次更新失败时使第一次更新“自行撤消”，那么您就不走运了。

但是，在某些有限的情况下，MongoDB 确实支持独立更新。更新不是全部或全部，但 MongoDB 将保证在您的写入过程中没有其他人写入集合。

几个**主要**的警告：

*   文档必须都在同一个集合中
*   更新必须全部在一个查询中指定

根据您提供的示例，您的案例可能符合条件。

[这](http://www.mongodb.org/display/DOCS/Atomic+Operations#AtomicOperations-ApplyingtoMultipleObjectsAtOnce)是描述隔离更新的文档。

基本上，当名称为“a”或“b”时，您需要发出类似于以下内容的更新，以原子方式将“available”设置为 false：

```
db.blah.update({"name": {"$in": ["a", "b"]}, "$atomic": 1}, {"available": false}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T08:10:13.197

如果您真的需要它，可以在 mongodb 之上实现此逻辑（在您的应用程序中或更好地在 mongo 驱动程序的包装器中）。

您要求隔离属性。实现这一目标的一种方法是使用[MVCC](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)模式。这确实有点矫枉过正，但这是为了让您了解如果您确实需要 mongodb 和一些 ACID 属性，您可以做什么。

[此处](http://highlyscalable.wordpress.com/2012/01/07/mvcc-transactions-key-value/)描述了 MVCC 模式的通用实现。github上还有一个[项目可以实现这个，但它是一个java项目。](https://github.com/igd-geo/mongomvcc)

您可能还会看到这个[SO question](https://stackoverflow.com/questions/5984873/is-it-possible-to-implement-multi-version-concurrency-control-mvcc-on-top-of-m)和他们的答案。我现在的回答只是一个总结。

# orchardcms - Orchard cms，如何在管理菜单上制作内容项目列表

> ID：10518851
> 
> 赞同：0
> 
> 时间：2012-05-09T15:07:28.347
> 
> 标签：orchardcms

有人可以帮我找到任何类型的文档，如何在管理菜单上制作内容项目列表。

问候乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:24:38.297

如果其内容类型上有管理菜单部分，则任何内容项都可以提升到管理菜单。投影默认有这部分。

这不需要任何编码，但如果您想了解如何将自定义内容列表从代码添加到管理菜单，Vandelay.Industries 中有相关示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:21:38.657

您只需要使用您想要的标准向 ContentManager 进行查询：

```
var query = _contentManager.Query( //your query); 
```

这个方法有大量的重载和扩展重载，所以你应该找到一个适合你需要的。

作为使用示例，请尝试查看 Contents AdminController 中的源代码（[请参阅源代码](http://orchard.codeplex.com/SourceControl/changeset/view/cba63b605e53#src/Orchard.Web/Core/Contents/Controllers/AdminController.cs)），它就是这样做的。

# ruby-on-rails-3.2 - 带有远程测试 Postgres DB 的 Rails

> ID：10518856
> 
> 赞同：1
> 
> 时间：2012-05-09T15:07:45.607
> 
> 标签：ruby-on-rails-3.2, postgresql-8.4

在[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)学习3.2 版

卡在 6.2.1 部分的末尾，内容如下：

```
$ bundle exec rake db:test:prepare
rake aborted!
FATAL:  no pg_hba.conf entry for host "192.168.108.1", user "sample_user", database "postgres", SSL on
FATAL:  no pg_hba.conf entry for host "192.168.108.1", user "sample_user", database "postgres", SSL off

Tasks: TOP => db:test:load => db:test:purge 
```

192.168.108.1 是我的 ip。如果我在 database.yml 中有另一个条目，它为什么要寻找它？用户 sample_user 是所有数据库的所有者，并在其上拥有 CREATEDB。我可以使用来自 192.168.108.1 的 psql 成功连接到 192.168.108.2 上的任何数据库

我如何克服它，仍在使用远程 postgres？

宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'bootstrap-sass', '2.0.0'
gem 'pg', '0.12.2'

group :development, :test do
  gem 'rspec-rails', '2.9.0'
end

group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.0'

group :development do
gem 'annotate', '~> 2.4.1.beta'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'spork', '0.9.0'
end 
```

数据库.yml

```
common: &common
    adapter: postgresql
    username: sample_user
    password: qwerty123
    host: 192.168.108.2

development:
    <<: *common
    database: sample_db_dev

test:
    <<: *common
    database: sample_db_tst

production:
    <<: *common
    database: sample_db_pro 
```

pg_hba.conf 在 192.168.108.2

```
host    sample_db_dev   sample_user 192.168.108.1/32   md5
host    sample_db_tst   sample_user 192.168.108.1/32   md5
host    sample_db_pro   sample_user 192.168.108.1/32   md5 
```

在 192.168.108.1 上没有本地 pg_hba.conf

红宝石 1.9.3p125 Rails 3.2.3 psql (PostgreSQL) 8.4.11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:57:45.863

pg_hba.conf 是 PostgreSQL 服务器上的一个文件，用于定义允许哪些用户使用哪些身份验证方法从哪些主机连接到哪些数据库。

[http://www.postgresql.org/docs/8.4/interactive/auth-pg-hba-conf.html](http://www.postgresql.org/docs/8.4/interactive/auth-pg-hba-conf.html)

因此，该消息告诉您尚未告知服务器允许您尝试的连接。您必须建立一个 PostgreSQL 被告知允许的连接，或者通过更新 pg_hba.conf 文件告诉它允许这个连接。

如果您无权访问服务器，并且没有选择授予您 PostgreSQL 连接权限的人，您将无法连接。这就是安全的本质。

# powershell - 如何显示使用 Write-Error 引发异常的位置？

> ID：10518859
> 
> 赞同：2
> 
> 时间：2012-05-09T15:07:53.123
> 
> 标签：powershell

考虑以下代码段：

```
function fail {
    throw "simulated failure"
}
fail 
```

运行脚本时，默认异常处理会打印引发异常的行和命令：

```
simulated failure
At D:\tmp\Untitled1.ps1:2 char:10
+     throw <<<<  "simulated failure"
    + CategoryInfo          : OperationStopped: (simulated failure:String) [],     RuntimeException
    + FullyQualifiedErrorId : simulated failure 
```

另一方面，如果我捕捉到异常并自己打印：

```
function fail {
    throw "simulated failure"
}
try {
    fail
} catch {
    Write-Error $_
    exit 1
} 
```

Write-Error 的输出只告诉我错误发生在脚本内部：

```
D:\tmp\Untitled2.ps1 : simulated failure
At line:1 char:16
+ .\Untitled2.ps1 <<<<
    + CategoryInfo          : NotSpecified: (:) [Write-Error], WriteErrorException
    + FullyQualifiedErrorId : Microsoft.PowerShell.Commands.WriteErrorException,Untitled2.ps1 
```

如何获得与第一种情况相同的输出？

注意：我想捕获异常的原因是执行“退出 1”。默认情况下，即使出现异常，powershell 也会以 0 退出，因此脚本似乎已经成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:00:44.473

事实证明这是微不足道的。我不应该使用Write-Error，而只是直接输出异常：

```
function fail {
    throw "simulated failure"
}
try {
    fail
} catch {
    $_
    exit 1
} 
```

输出是：

```
simulated failure
At D:\tmp\Untitled2.ps1:2 char:14
+         throw <<<<  "simulated failure"
    + CategoryInfo          : OperationStopped: (simulated failure:String) [], RuntimeException
    + FullyQualifiedErrorId : simulated failure 
```

更新：

这种方法显然会写入输出流。如果您想改为写入错误流（如 Write-Error 所做的那样），您可能不走运，根据这篇文章：[如何在 PowerShell 中写入标准错误？](https://stackoverflow.com/questions/4998173/how-do-i-write-to-standard-error-in-powershell). Write-Error 不能用于写入特定的字符串（它会添加自己的内容），并且没有等价的 Write-Error 可以很好地处理重定向。我个人希望看到一个模仿 Out-Default 但写入当前管道元素的错误流的 Out-Error cmdlet。

# iphone - 插入数据库时 的 FMDB EXC_BAD_ACCESS

> ID：10518867
> 
> 赞同：3
> 
> 时间：2012-05-09T15:08:21.003
> 
> 标签：iphone, objective-c, fmdb

当我尝试在我的数据库中插入一些东西时，我收到了这个错误：

![fmdb 错误](../Images/30d187cd0de333de0c80c86f9a347acd.png) 奇怪的是，只有当我插入的表中有大约 12-14 条以前的记录时才会发生错误。有谁知道如何解决这个问题？

这是我的代码：

```
 - (void)addToBasket:(id)sender {
   NSArray *sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
   NSString *docDirectory = [sysPaths objectAtIndex:0];
   NSString *filePath = [NSString stringWithFormat:@"%@/MainDatabase.db", docDirectory];

   databasePath = filePath;

   db = [FMDatabase databaseWithPath:databasePath];
   if (![db open]) { [db release]; return; }

   NSInteger prodID = ((UIControl*)sender).tag;

   [db executeUpdate:@"INSERT INTO order_items VALUES (?, ?, ?, ?)", @"", [NSNumber numberWithInt:prodID], orderID, [NSNumber numberWithInt:1], nil];

   [basket insertObject:[NSNumber numberWithInt:prodID] atIndex:0];
   [basketQA insertObject:[NSNumber numberWithInt:1] atIndex:0];
   [basketItemName insertObject:@"test" atIndex:0];
   [basketPrice insertObject:@"test" atIndex:0];

   NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
   [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];

   [db close];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:23:33.460

什么类型`orderID`？它来自哪里？你确定它不是一个悬空指针？您只应该将对象传递到`executeUpdate:`.

此外，您过度释放`db`. 除非方法名称中有`new`、`alloc`、`retain`或`copy`，否则返回的任何对象都是自动释放的。你不必自己释放它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:25:26.387

您没有显示`orderID`定义的位置，但如果它不是一个对象（派生自`NSObject`），那么这将破坏您显示的代码。如果它是原始整数类型，那么您需要将它包装在一个`NSNumber`对象中，就像您对其他值所做的那样：

```
[NSNumber numberWithInt:orderID] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T23:37:10.980

打开[僵尸](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)，看看会发生什么。

# ruby-on-rails - 编组或序列化 ActiveRecord 对象

> ID：10518868
> 
> 赞同：5
> 
> 时间：2012-05-09T15:08:21.443
> 
> 标签：ruby-on-rails, ruby, activerecord, redis, marshalling

我正在使用 rails 3.2 和 Ruby 1.9.3

我需要将数据存储在 Redis 中以进行缓存。我要保存的数据元素是不同类型元素的散列——其中一些当前是 ActiveRecord 对象。

我想将此复合对象存储在 redis（内存中键/值存储）中。为此，我需要以将复合对象正确组合在一起的方式序列化/反序列化复合对象。

如何序列化或编组此哈希，以便在将其从缓存中拉出时返回到同一组对象中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T16:12:29.167

尝试使用 Marshal.dump(obj) 和 Marshal.load(marshal_str)。[这是文档](http://www.ruby-doc.org/core-1.9.3/Marshal.html)

# mysql - MySQL 是否有管理员模式？

> ID：10518870
> 
> 赞同：0
> 
> 时间：2012-05-09T15:08:27.867
> 
> 标签：mysql, mysql-management, database-migration

我们需要迁移和归档 MySQL 中的一些记录。我们不想关闭整个站点（无论如何，大多数读取都是从应用层中的单独缓存提供服务的），但我们需要防止任何人尝试注册或执行任何更改数据库的操作。

MySQL 是否具有将数据库置于类似`admin`模式的功能，其中只有管理员可以操作记录，而来自应用层的连接（使用单独的数据库帐户）被拒绝？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:42:29.413

您可以使用`read_only`系统变量。只有拥有超级权限的用户才能更改任何内容。

参考：[http ://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_read_only](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_read_only)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:11:59.960

你可以做几件事，但我认为它们不是一个好的解决方案：有一个很好的改变，你的应用程序不会对此反应很高兴:)

也就是说，您可以从您的数据库用户中删除适当的权限，就可以了。它们基本上将处于只读模式。

查看[http://dev.mysql.com/doc/refman/5.1/en/revoke.html](http://dev.mysql.com/doc/refman/5.1/en/revoke.html)如何撤销，以及[http://dev.mysql.com/doc/refman/5.1/en/grant.html](http://dev.mysql.com/doc/refman/5.1/en/grant.html)关于如何重新授予某些东西:)

# javascript - 如何在 JavaScript 中过滤这些搜索结果？

> ID：10518873
> 
> 赞同：1
> 
> 时间：2012-05-09T15:08:40.693
> 
> 标签：javascript, search, extjs, filter

我有一个 search.js 文件（大型脚本的一部分），它处理文件和文件夹的搜索并返回结果。

我正在尝试过滤搜索结果，以便不显示任何包含*“不需要”*的文件名或路径。

这是完整的 search.js 文件：

```
FR = {
    UI: {translations:[]}
};

function setLookInValue() {
    var path = window.parent.FR.searching.path.replace('/ROOT/HOME', '');
    lookin.setValue(path ? path : '/');
    FR.grid.getStore().removeAll();
}

Ext.onReady(function() {
    window.parent.Ext.get(window.parent.FR.UI.searchPopup.getLayout().container.body.dom).unmask();
metadataField = new Ext.form.ComboBox({
    fieldLabel: FR.T('Metadata Field'),
    autoCreate:true, mode: 'local',
    emptyText:FR.T('Select...'),
    displayField:'filetype',
    valueField:'id', name: 'metadata_field_id', hiddenName:'metadata_field_id',
    editable: false, triggerAction:'all', disableKeyFilter: true,
    forceSelection:true, value:0, width:130,
    store: new Ext.data.SimpleStore({
        fields: ['id', 'filetype'],
        data: FR.metadataFields
    })
});
metadataValue = new Ext.form.TextField({
    fieldLabel: FR.T('Metadata'), name: 'metadata_value', width: 130, value: ''
});
FR.rightColumnFields = [];
if (window.parent.User.perms.metadata) {
    FR.rightColumnFields.push(metadataField);
    FR.rightColumnFields.push(metadataValue);
}
FR.rightColumnFields.push(new Ext.Button({
    text: FR.T('Search'),
    style: (!window.parent.User.perms.metadata ? '' : 'margin-left:98px'),
    handler: function(){
         ds.load({
            params:{
                filename: Ext.getCmp('filename').getValue(),
                keyword: Ext.getCmp('keyword').getValue(),
                metafield: metadataField.getValue(),
                metavalue: metadataValue.getValue(),
                path: encodeURIComponent(window.parent.FR.searching.path)
            }
        });
    }
}));

FR.form = new Ext.form.FormPanel({
    labelAlign: 'right',
    labelWidth: 90,
    border: false,
    hideBorders: true,
    bodyBorder: false,
    bodyStyle: 'padding:5px',
    items: [{
        layout:'column',
        items: [{
            columnWidth:.5,
            layout: 'form',
            border: false, bodyBorder: false,
            items: [{
                id: 'filename', xtype:'textfield',
                fieldLabel: FR.T('File name'),
                name: 'file_name', width: 130, value: ''
            },
            {
                id: 'keyword', xtype:'textfield',
                fieldLabel: FR.T('File contents'),
                name: 'file_contents',
                width: 130, value: '',
                disabled: !window.parent.Settings.fullTextSearch
            },
            lookin = new Ext.form.TextField({
                fieldLabel: FR.T('Look in'),
                name: 'lookin', width: 130, value: '', readOnly: true
            })
            ]
        },{
            columnWidth:.5,
            id: 'secondCol',
            layout: 'form',
            border: false,
            bodyBorder: false,
            items: FR.rightColumnFields
        }]
    }]
});

var ds = new Ext.data.Store({
    proxy: new Ext.data.HttpProxy({
        url: URLRoot+'/?module=search&section=ajax&page=search'
    }),
    reader: new Ext.data.JsonReader({
            root: 'files',
            totalProperty: 'totalCount',
            id: 'id'
        }, 
        [
            {name: 'icon'},
            {name: 'id'},
            {name: 'filename'},
            {name: 'path'},
            {name: 'technical_path'},
            {name: 'score', type: 'float'}
        ]
    )
});

var cm = new Ext.grid.ColumnModel({
    defaults: {sortable: true},
    columns: [
        {id: 'filename', header: FR.T("File name"), dataIndex: 'filename', width: 160,
            renderer: function (value, p, record) {
                return '<img src="'+URLRoot+'/images/fileman/file_icons/small/'+record.data.icon+'" width="16" height="16" align="absmiddle"> '+value;
            }
        },
        {id: 'path', header: FR.T("Path"), dataIndex: 'path'}
    ]
});
cm.defaultSortable = true;

grid = new Ext.grid.GridPanel({
    ds: ds,
    cm: cm,
    border: false, bodyBorder: false, hideBorders: true,
    selModel: new Ext.grid.RowSelectionModel({singleSelect:true}),
    loadMask: {msg: FR.T('Searching...')},
    enableColumnHide: false,
    enableColumnMove: false,
    autoExpandColumn: 'path',
    selModel: new Ext.grid.RowSelectionModel({singleSelect:true})
});

grid.on('rowclick', function (grid, rowIndex, e){
    var rowData = grid.getStore().data.items[rowIndex].data;
    var path = rowData.technical_path;
    var filename = rowData.filename;
    if (window.parent.FR.currentPath != path) {
        window.parent.FR.UI.tree.panel.selectPath(path, 'pathname', function() {
            window.parent.FR.UI.grid.highlightOnDisplay = filename;
        });
    } else {
        window.parent.FR.UI.grid.highlight(filename);
    }
});

grid.on('rowcontextmenu', function(grid, rowIndex, e) {e.stopEvent();return false;})
FR.grid = grid;

new Ext.Viewport({
    layout: 'border',
    hideBorders: true,
    items: [
        {
            region: 'north', layout: 'fit', split: true, height:100,
            hideBorders: true, bodyBorder: false, border: false,
            items: [FR.form]
        },
        {
            region: 'center', layout: 'fit', autoHeigh: true,
            items: grid
        }
    ]
});
setLookInValue();
}); 
```

我很迷茫。我想在代码的某个地方我可以做类似的事情：

```
if (someVar.indexOf("unwanted") == -1) { ... 
```

这个 JavaScript 中是否有任何内容可以为任何人提供足够的信息来帮助我过滤这些搜索结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:02:45.370

这看起来像使用 Ext JS 的代码，我相应地添加了一个标签。稍稍浏览一下文档，就会发现[Ext.data.Store](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store)页面的 Filtering and Sorting 部分会让您走上正轨。

# django - django 评论是否支持分页？

> ID：10518879
> 
> 赞同：0
> 
> 时间：2012-05-09T15:08:55.433
> 
> 标签：django, pagination, django-comments

我想知道是否可以仅在页面上显示例如 10 条最新评论。然后用户可以点击，按需，如果他想查看更多评论？

我不确定要搜索什么，因此我在这里问它。

我正在使用 Django 提供的评论框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:10:37.253

它在文档中。[https://docs.djangoproject.com/en/dev/topics/pagination/?from=olddocs](https://docs.djangoproject.com/en/dev/topics/pagination/?from=olddocs)

# objective-c - 如何将传入的结果作为 id 存储到 NSDictionary

> ID：10518883
> 
> 赞同：-1
> 
> 时间：2012-05-09T15:09:01.697
> 
> 标签：objective-c, ios, delegates, nsdictionary, facebook-ios-sdk

所以我正在使用 Facebook SDK for iOS 向 Facebook 请求一些数据。我在方法中得到响应：

```
- (void)request:(FBRequest *)request didLoad:(id)result {
    NSLog(@"Result is: %@", result);
    //How to save this data in a NSDictionary (or some other data structure)
} 
```

任何人都可以通过解释如何将其保存到 NSDictionary 来帮助我，以便从结果中轻松获得我需要的东西。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:20:08.220

那么你将需要一个键和对象的值。例如在一个`NSMutableDictionary`：

> [myDictionary setObject:result forKey:@"myKey"];

* * *

您应该知道您将要存储的确切位置，它是否有意义以及它会给您的架构带来什么后果。上面的答案只是回答您问题的快速方法。

# c# - string.join 到列表

> ID：10518886
> 
> 赞同：1
> 
> 时间：2012-05-09T15:09:14.450
> 
> 标签：c#, c#-4.0, c#-to-vb.net

我想从以下代码返回一个列表：

```
private List<string> tokenizer(string x)
.........
 ..........
i has done thank you 
```

我试着用

```
.ToList(); 
```

但它没有用。谁能帮忙？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:15:44.680

我会试一试。这是你的追求吗？

```
var list = from s in Regex.Split(sb.ToString(), "([ \\t{}()\n])") 
             where s.Length > 3 && !exclude.IsMatch(s) 
             select s.Replace("!‌", "@")).ToList() 
```

然后你可以返回它：

```
return list; 
```

如果这不是您想要做的，请提供更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:15:56.523

这是你想要的吗？

```
return new List<String>(
    from s in Regex.Split(sb.ToString(), "([ \\t{}()\n])")
    where s.Length > 3 && !exclude.IsMatch(s)
    select s.Replace("!‌", "@")); 
```

如果您想要清理后的文本列表，不确定为什么要将字符串连接在一起。

# php - 如何像保存文件一样保存和加载选中的复选框 - php

> ID：10518889
> 
> 赞同：0
> 
> 时间：2012-05-09T15:09:24.093
> 
> 标签：php, database, checkbox, load, save

我正在开发一个网络工具，目的是通过复选框遵循特定规则（由用户确定）将 XML（xmi）文件转换为 SQL 文件。

所以基本上用户应该能够在下次访问他可以加载的网站/webtool时保存在一种保存文件中使用的复选框，从而在上次使用时获得选中的复选框，明白吗？

因此，用户指示保存文件的名称以便能够在后面的访问中加载保存文件。我不知道这是否可以使用 :x NEDD HELP :XXX

```
input type="checkbox" name="chk[]" id="chk[]" value="chk"> when a class doesn't have an Identifier a primary key will be automatically created in the corresponding table. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:17:56.500

如果我对您的理解正确，您希望保存用户的设置，以便在用户下次访问该站点时保留它们。

我会使用[会话](http://www.w3schools.com/php/php_sessions.asp)来存储用户的设置，然后使用这样的代码让复选框反映用户的设置：

```
<input type="checkbox" name="chk[]" id="chk[]" value="chk" <?php if ($_SESSION['someval']) { print 'checked="checked" '; } ?>> 
```

# android - 位图处理时内存泄漏

> ID：10518899
> 
> 赞同：2
> 
> 时间：2012-05-09T15:10:02.017
> 
> 标签：android, bitmap, out-of-memory

我尝试编写一些相机意图处理程序来拍照并对其进行后期处理（如果需要）。如果我以高分辨率拍摄一些照片，我的程序会因“分配太大”而中断。如果我拿一些分辨率较低的东西，我可以拿更多，但它也会坏掉。经过一番搜索，我发现我必须回收手动制作的位图。但问题并没有消失。我的主要问题是我不知道 1\. 我的代码中是否存在内存泄漏 2\. 我不知道为什么它试图分配内存，因为我没有在我的程序中显示位图（现在） ，我只是保存它们以供进一步重复使用。

```
public void onClick(View view) {
    Intent i = new Intent("android.media.action.IMAGE_CAPTURE");
    this.mLastPic = new File(this.mFs.getDirPath(), this.mFs.getNextPicName()); //create and save a file for pic
    i.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(this.mLastPic));
    this.startActivityForResult(i, 0);
} 
```

on 活动结果处理程序

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == Activity.RESULT_OK && requestCode == 0) {

        try {
            if(!this.mController.getSetting(R.string.USE_HEIGH_RESOLUTION)) { //use high res or not
                int quality = this.mFs.getPicQuality(); //get compress quality
                Bitmap pic = BitmapFactory.decodeFile(this.mLastPic.getPath());
                ByteArrayOutputStream outStream = new ByteArrayOutputStream();
                pic.compress(Bitmap.CompressFormat.JPEG, quality, outStream);
                String path = this.mLastPic.getPath();
                if(this.mLastPic.delete()) { //replace the old file with a now file
                    File newFile = new File(path);
                    newFile.createNewFile();
                    FileOutputStream os = new FileOutputStream(newFile);
                    os.write(outStream.toByteArray());
                    Log.d("newEntryActivity.onActivityResult", "replaced pic ");
                } else {
                    Log.d("newEntryActivity.onActivityResult", "cant delete old pic");
                }
                pic.recycle(); //cleaning up
                outStream.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

logcat 显示

> 05-09 14:35:01.694: E/dalvikvm-heap(845): 6380496 字节的外部分配对于这个进程来说太大了。05-09 14:35:01.694: E/(845): VM 不允许我们分配 6380496 字节
> 
> 05-09 14:35:01.694: D/AndroidRuntime(845): 关闭 VM
> 
> 05-09 14:35:01.694: W/dalvikvm(845): threadid=3: 线程以未捕获的异常退出 (group=0x4001b188)
> 
> 05-09 14:35:01.694：E/AndroidRuntime(845)：未捕获的处理程序：线程主因未捕获的异常而退出
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): java.lang.RuntimeException: 无法启动活动 ComponentInfo{unicorn.Heurazio/unicorn.Heurazio.SettingsActivity}: android.view.InflateException: 二进制 XML 文件行# 2：膨胀类错误......
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 由: android.view.InflateException: Binary XML file line #2: Error inflating class
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.view.LayoutInflater.createView(LayoutInflater.java:513)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:385)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:320)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:276)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.app.Activity.setContentView(Activity.java:1622)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 unicorn.Heurazio.SettingsActivity.onCreate(SettingsActivity.java:38)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): ... 11 更多
> 
> 05-09 14:35:01.714：E/AndroidRuntime(845)：由：java.lang.reflect.InvocationTargetException 引起
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.widget.LinearLayout.(LinearLayout.java:92)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): at java.lang.reflect.Constructor.constructNative(Native Method)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 java.lang.reflect.Constructor.newInstance(Constructor.java:446)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.view.LayoutInflater.createView(LayoutInflater.java:500)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): ... 21 更多
> 
> 05-09 14:35:01.714：E/AndroidRuntime(845)：原因：java.lang.OutOfMemoryError：位图大小超出 VM 预算
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.graphics.Bitmap.nativeCreate(Native Method) > 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.graphics。 Bitmap.createBitmap(Bitmap.java:468)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.graphics.Bitmap.createBitmap(Bitmap.java:435)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:488)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:462)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:323)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.content.res.Resources.loadDrawable(Resources.java:1705)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.content.res.TypedArray.getDrawable(TypedArray.java:548)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.view.View.(View.java:1850)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.view.View.(View.java:1799)
> 
> 05-09 14:35:01.714: E/AndroidRuntime(845): 在 android.view.ViewGroup.(ViewGroup.java:284)

任何帮助都会很棒。

问候亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:59:23.313

如果你检查你的日志，它看起来像一个大的（~6MB）位图分配发生在膨胀`unicorn.Heurazio.SettingsActivity`. 检查您的资源，看看您是否在某处使用大位图作为背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T00:13:13.880

在对我的程序进行了一些阅读和修改之后，比如在重载的应用程序中添加对背景的引用，擦除所有不需要的上下文元素，我仍然遇到同样的问题，而且情况似乎更糟。

如果我可以相信我对位图大小的计算

```
Bitmap tmp = BitmapFactory.decodeResource(this.getResources(), R.drawable.logo);
Log.d("mainApp", tmp.getRowBytes() * tmp.getHeight() / 1024 + "kB"); 
```

我的`100kB`徽标 (.png) 需要`6mB`ram（适合异常消息）。任何想法都会很棒。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-09T15:24:39.633

尝试在应用程序中添加清单`android:largeHeap="true"`

# r - 关于 UseMethod 搜索机制的困惑

> ID：10518901
> 
> 赞同：4
> 
> 时间：2012-05-09T15:10:05.023
> 
> 标签：r, dispatch

我试图弄清楚R如何`UseMethod`找到一个方法，一旦它弄清楚它在寻找什么（即用MyClass类的x调用的函数MyGeneric（x）：MyGeneric.MyClass）具体来说，涉及哪些环境？

我已阅读 R 语言手册的“5.3 Method Dispatching”和“5.4 UseMethod”部分，其中没有指定搜索机制。R-Help 页面`UseMethod`提供了一个线索：

```
...UseMethod and NextMethod search for methods in two places: 
first in the environment in which the generic function is called, 
and then in the registration data base for the environment 
in which the generic is defined (typically a namespace) 
```

但这并没有加起来（在我的脑海里=）。这是一个具体的例子：

```
library( xts )
as.matrix  # shows UseMethod("as.matrix")
methods("as.matrix") # shows as.matrix.xts.  * indicates non-visible
showMethods("as.matrix")  # says <not an S4 generic function>
data(sample_matrix)
as.matrix( as.xts(sample_matrix) ) # how does R find as.matrix.xts??  its not exported! 
```

`as.matrix`中定义`namespace:base`。如果 R 要使用该环境或调用环境 (R_GlobalEnv)，则无法找到`as.matrix.xts`，因为它未导出。如果 xts 中的函数调用，则调用环境似乎可以工作，`as.matrix`因为`as.matrix.xts`将在调用环境中。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:28:40.533

你读得不够仔细。它说“注册数据库”存储在泛型的环境（命名空间）中，而不是方法本身。在这种情况下`base::as.matrix`：

```
> grep("as.matrix",ls(base:::.__S3MethodsTable__.), value=TRUE)
[1] "as.matrix.dist"   "as.matrix.raster" "as.matrix.xts"    "as.matrix.zoo" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:53:45.967

除了增加我知识的 Joshua 的洞察力....在加载的 NAMESPACE 中与被导出不同。您可能已经看到 as.matrix.xts 函数具有以下任一功能：

```
 getAnywhere(as.matrix.xts)
 xts:::as.matrix.xts 
```

尝试输入

```
search() 
```

我还在 SO 或 rhelp 上看到了一个函数，该函数将显示 R 解释器的函数调用搜索路径，但目前我似乎找不到它。这会产生一个相当长的函数名称列表：

```
apropos("as", mode="function") 
```

而这份名单还有半长：

```
apropos("^as\\.", mode="function") 
```

# java - 如果在我的表达之后需要一个词法分析器怎么办？

> ID：10518905
> 
> 赞同：1
> 
> 时间：2012-05-09T15:10:15.920
> 
> 标签：java, parsing, antlr

仍在研究 Antlr，我搜索了一些我在文档中找不到的东西。

这是一个可以检测字符串中的“非”模式的解析器：

```
 factor : 'not'^ primary| primary;
 (and some other lines). 
```

但是如果我想在我的 primary 之后检测一个表达式怎么办？例如

```
B exists 
```

如何定义一个解析器规则在我的表达式的其余部分进行搜索？我通过类比尝试了这个，但直到现在才让它工作。

```
 exists : primary 'exists'^ | primary; 
```

根据我在表达中存在的位置，我得到了

```
line 1:44 extraneous input 'exists' expecting ')' 
```

或者

```
line 1:3 mismatched input 'exists' expecting ')'
line 1:22 missing EOF at ')' 
```

错误

谢谢 ！

**编辑：**

我的语法和你的一样，但有一件事。这是我的代码：

```
// Aiming at parsing a complete BQS formed Query
grammar Logic;

options {
    backtrack=true;
    output=AST;
}

/*------------------------------------------------------------------
 * PARSER RULES
 *------------------------------------------------------------------*/

 parse  
    : expression EOF -> expression
    ; // ommit the EOF token

 expression
    : query
    ;       

 query  
    : term (OR^ term)*    // make `or` the root
    ;

 term   
    : factor (AND^ factor)*
    ;

 factor 
    : NOT^ primary 
    | primary
    ;

 primary // this one has to be completed (a lot)
    : atom (LIKE^ atom)* // right expressions have to be indicated
    | atom (EXISTS^)?
    ;

 atom   
    : ID 
    | '('! expression ')'! // omit both ( and )
    ;

/*------------------------------------------------------------------
 * LEXER RULES
 *------------------------------------------------------------------*/
// GENERAL OPERATORS: 
NOTLIKE :   'notlike'; // whitespaces have been removed
LIKE    :   'like';
EXISTS  :   'exists';

OR          :   'or';
AND         :   'and';
NOT         :   'not';

//ELEMENTS 
ID          :   (CHARACTER)+;   

WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+    { $channel = HIDDEN; } ; 
```

所以问题显然来自这里。

我虽然在这里有一个严重的问题。在删除所有 or 和 not 之后，我希望我的主要形式是：

```
A like B 
```

或者

```
A exists 
```

我的代码有什么问题？我认为这正是我的主要规则所说的？

我真的很想找到一种方法来调试自己，因为：

```
line 1:3 mismatched input 'like' expecting ')' 
```

真的不言自明

非常感谢您的帮助，我真的很难理解 antlr 文档网站：s。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:07:32.067

我怀疑你在你的`EOF`一个解析器规则中放错了一个。您发布的规则似乎没有太大问题：至少，不会导致您发布的错误。

对于（可能的）未来问题（不仅是 ANTLR 问题），我强烈建议您发布“自包含”的语法（或示例代码）。换句话说：您发布了一个语法，某人可以轻松地在不修改它（！）的情况下在他们自己的机器上运行，这样他们就可以准确地看到您所看到的。现在它只是猜测你的其他规则是什么样的。

以下：

```
exists
 : atom (Exists^)?
 ; 
```

就像一个魅力，你可以测试自己：

```
grammar T;

options {
  output=AST;
}

parse
 : expr EOF -> expr
 ;

expr
  :  orexp
  ;

orexp
  :  andexp (Or^ andexp)*
  ;

andexp
  :  not (And^ not)*
  ;

not
 : Not^ exists
 | exists
 ;

exists
 : atom (Exists^)?
 ;

atom
 : Num
 | Id
 | '(' expr ')' -> expr
 ;

Or     : 'or';
And    : 'and';
Exists : 'exists';
Not    : 'not';
Num    : '0'..'9'+;
Id     :  ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;
Space  : ' ' {skip();}; 
```

输入：

```
(A or B) and (not C or D exists) or not E exists 
```

产生以下 AST：

![在此处输入图像描述](../Images/aae3a1f8a498d29bc419fddde78f39af.png)

## 编辑

`primary`您的规则的备选方案 1 和备选方案 2 ：

```
 primary
  : atom (LIKE^ atom)* // alternative 1
  | atom (EXISTS^)?    // alternative 2
  ; 
```

匹配单个`atom`. 这是解析器无法正确解析您的输入的原因（并且需要您添加`backtrack=true;`，应该避免！）。

我没有测试它，但我很确定如果你`backtrack=true;`从选项块中删除它会起作用，并重写`primary`如下：

```
primary
 : atom ( (LIKE^ atom)* // alternative 1
        | EXISTS^       // alternative 2
        )
 ; 
```

现在替代 1 仅匹配单个`atom`，并且没有歧义（至少，不在*该*规则中）。

# java - 从arraylist中删除不需要的字符？爪哇

> ID：10518908
> 
> 赞同：0
> 
> 时间：2012-05-09T15:10:24.607
> 
> 标签：java, arraylist, character, fileoutputstream

我正在尝试将 ArrayList 的内容保存到 txt 文件，但是当我这样做时，我得到了很多不需要的字符。逗号我可以处理 string.replace() 但我只是想知道是否有另一种方法可以更有效地过滤这些类型的字符？尤其是 txt 文件中的“¬í t[”部分。上面的引号中还显示了其他字符，但我不会在这里复制它们。我输出到文件的代码如下。我正在向 ArrayList 添加几个字符串，但问题似乎出在数组列表本身。如下所示，我已将列表转换为字符串并以这种方式打印到文件中，因为我似乎得到了更少的不需要的字符。任何帮助将不胜感激。

```
String Output = ScanOutputList.toString();
FileOutputStream fstream = new FileOutputStream("Port_Scan.txt");
ObjectOutputStream ostream = new ObjectOutputStream(fstream);

ostream.writeObject(Output);
ostream.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:51:02.997

如果要将文本写入文件（如 .txt 扩展名所示），请不要使用输出流。使用作家：

FileWriter fw = null;

```
try {
   fw = new FileWriter(file);
   fw.print(StringUtils.join(collection, System.getProperty("line.separator")));
}
finally {
   IOUtils.closeQuietly(fw);
} 
```

我也不会使用列表中的“toString”方法，因为它为您提供了以下格式：

```
[ item1.toString(), item2.toString() ] 
```

最好以您想要的格式放置内容。上面的代码将每行放置 1 个项目，并在每个项目之间放置一个换行符（取决于系统）。

如上所述，列表中对象的类型也很重要，因为它在编写对象时会使用“toString()”方法。您可以通过将 StringUtils.join 替换为 for 循环来进行自定义输出，并在循环中准确编写您想要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:17:14.267

如果一些奇怪的字符是您的主要问题，并且您只是想摆脱所有不是“标准”字符的东西，那么您可以做的是将字符串转换为 char 数组，然后将这些字符转换为整数。如果给定的 int 太大，请将其删除。最后 - 从那些尚未删除的 int 重新创建您的字符串。

# php - 保存并分享在网站上创建的图像

> ID：10518912
> 
> 赞同：2
> 
> 时间：2012-05-09T15:10:46.137
> 
> 标签：php, jquery, css, facebook, share

我正在一个网站上开发这个有趣的工具，它允许用户拖动图像（使用 jQuery UI）来创建自己的角色。

你可以在这里看到这个工作的基础：http: [//goo.gl/JVXM0](http://goo.gl/JVXM0)

然而，我所追求的是用户能够通过 Facebook 和 Twitter 分享他们的创作。是否一旦创建，它需要一个区域的屏幕截图，然后他们可以分享他们的创作......我不确定。

看看这个，我可以采取任何步骤或方向来实现这一点吗？

任何帮助将不胜感激。

谢谢，理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:18:50.663

所以你想在页面上生成 DOM 的图像？如果是这样，这将是一个很好的开始： [Generate image from DOM elements](https://stackoverflow.com/questions/6162678/generate-image-from-dom-elements)

希望这可以帮助！

干杯，罗宾

# javascript - 尝试使用 javascript、jquery 和 html 搜索 wunderground 位置

> ID：10518913
> 
> 赞同：2
> 
> 时间：2012-05-09T15:10:48.557
> 
> 标签：javascript, jquery, html, json, wunderground

下面的代码不起作用。试图搜索天气位置。当我搜索时，什么也没有发生。

```
<input type="text" id="query" /><button>search</button><br />
<div id="results">

</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
var url='http://autocomplete.wunderground.com/aq?format=JSON&query=';
var query;
    $('button').click(function(){
        query=$("#query").val();
        $.getJSON(url+query,function(json){
            $.each(json.results,function(i,location){
               $("#results").append('<p>'+location.name+'</p>');
            });
        });
    });
});
</script> 
```

仅供参考，我对编码非常缺乏经验（从另一个网站复制脚本）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:26:24.210

如果要进行跨域请求，则必须使用`JSONP`，并且应该为 JSONP 请求附加回调函数，如[wunderground.com 中所述](http://www.wunderground.com/weather/api/d/documentation.html)，试试这个。

```
$(document).ready(function() {
    var url = 'http://autocomplete.wunderground.com/aq?format=JSON&query=';
    var query;
    $('button').click(function() {
        query = $("#query").val();
        $.getJSON(url + query + '&cb=callbackfunc', function(json) {
            $.each(json.results, function(i, location) {
                $("#results").append('<p>' + location.name + '</p>');
            });
        });
    });
});​ 
```

**更新：**

首先你应该了解什么是[JSONP](http://en.wikipedia.org/wiki/JSONP)。

cb 参数用于[wunderground API 中的 JSONP 回调函数，如您在文档中所见](http://www.wunderground.com/weather/api/d/documentation.html)。

如果你还是不明白为什么需要使用 jsonp 回调函数，

打开这两个链接，您将看到它们之间的区别。

[无 cb 参数](http://autocomplete.wunderground.com/aq?format=JSON&query=atina)

[带 cb 参数](http://autocomplete.wunderground.com/aq?format=JSON&query=atina&cb=mycallbackfunc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:29:19.543

出于安全原因，您不能使用 JavaScript 从远程站点提取数据（请参阅[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)）。

解决方法包括 CORS（有限的浏览器支持，该服务不支持）、JSON-P（该服务显然不支持）以及在您自己的服务器上使用代理。

# c# - 在 C# 中将列动态添加到 gridview - if 语句过多

> ID：10518915
> 
> 赞同：1
> 
> 时间：2012-05-09T15:10:50.900
> 
> 标签：c#, gridview, if-statement

我正在清理一些代码，我正在使用的是在 C# 的代码隐藏中创建的 gridview。创建的 boundfields 有一个 visible 属性，稍后将确定它是否添加到 gridView 将包含的列集合中。

构建 gridView 时，它引用一个表示默认列集合的属性，但在此属性中，每个 boundfield 的可见属性都使用 if 语句评估，如果它是可见的，则将其添加到集合中。代码如下所示：

```
private GridView.BaseFieldCollection _defaultColumns;

private GridView.BaseFieldCollection DefaultColumns
{
    get
    {
        if (Col1.Visible)
        {
            _defaultColumns.Add(Col1);
        }
        if (Col2.Visible)
        {
            _defaultColumns.Add(Col2);
        }
        if (Col3.Visible)
        {
            _defaultColumns.Add(Col3);
        }
        if (Col4.Visible)
        {
            _defaultColumns.Add(Col4);
        }
        if (Col5.Visible)
        {
            _defaultColumns.Add(Col5);
        }
    }
} 
```

问题是要评估大约 30 个字段，并且有 30 个左右的 if 语句不适合我。我希望可能有一个更优雅的解决方案。尽管我想到将所有列添加到某种集合对象（列表、数组等）中，然后循环遍历它，但这样做似乎效率较低。

关于如何更优雅地做这样的事情有什么想法吗？我被难住了...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:15:12.997

> 但似乎这样做可能效率较低

在此代码成为瓶颈之前，这​​是无关紧要的。例如，加入一些数据库访问，这段代码永远不会成为瓶颈。

```
var cols = new[] {Col1,Col2,Col3}; // etc
foreach(var col in cols)
{
  if(col.IsVisible)
    _defaultColumns.Add(col);
} 
```

也许：

```
var cols = new[] {Col1,Col2,Col3}; // etc
_defaultColumns.AddRange(cols.Where(c => c.IsVisible)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:23:09.273

您可以使用转换器显示（或不显示）在其可见性属性上绑定的列

# sql - Sql 不同的按行分组

> ID：10518920
> 
> 赞同：2
> 
> 时间：2012-05-09T15:11:04.623
> 
> 标签：sql

谁能帮助我了解如何为下表构建 sql 查询以获取具有最新日期的不同行（基于名称和日期）。

```
Date               Name     Score

2011-06-16 10:30   Johan    36    
2010-12-09 08:52   Thomas   32
2012-04-25 15:14   Jak      56
2008-09-07 11:57   Jak      64
2012-02-28 13:22   Jan      23 
2011-01-11 12:08   Thomas   22      
2008-10-06 12:22   Kane     54 
```

因此，查询将显示第 1、3、6、7 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:36:06.927

由于最大日期重复的问题，我正在贡献一些东西。以上所有内容都返回所有重复项。提问者可能仍然只想要其中一行。

```
SELECT date, name, score
FROM (select *,
             row_number() over (partition by name order by date desc) as seqnum
      from table a
     ) a
WHERE seqnum = 1 
```

这会枚举行，从最新的日期开始倒数。然后它选择其中一个日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:16:16.547

假设您的 RDMS 不支持窗口函数，

```
SELECT a.*
FROM table1 a
INNER JOIN 
(
  SELECT name,MAX(date) as max_date -- date field may need escaping
  FROM table1 a
  GROUP BY name
)b ON (b.name = a.name AND a.date=b.max_date) 
```

**更新**

在**Dems**评论之后，如果 date+name 不是唯一的，但您只想查看一次名称，

```
SELECT c.name,c.date, MAX(c.score) as max_score
FROM
(
 SELECT a.* 
 FROM table1 a
 INNER JOIN 
 (
  SELECT name,MAX(date) as max_date -- date field may need escaping
  FROM table1 a
  GROUP BY name
 )b ON (b.name = a.name AND a.date=b.max_date)
)c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T15:16:18.903

像这样的东西应该工作......

```
SELECT date, name, score
FROM table a
WHERE date = (
    SELECT MAX(date)
    FROM table b
    WHERE a.name = b.name
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T15:18:18.543

您可以使用以下内容：

```
select date, name, score
from temp t1
where date = (select max(date) from temp where t1.name = temp.name) 
```

查看带有演示的[sql fiddle 。](http://sqlfiddle.com/#!3/4eec6/1)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-09T15:25:42.220

```
select convert(varchar,date,103) as name_date, name from table1 where convert(varchar, date, 103) = (select convert(varchar,max(date),103) as n_date from table1) 
```

这是在 mssql 数据库 sql 格式中不考虑时间的时候

# python - 从文本文件中提取 Python 数据

> ID：10518924
> 
> 赞同：0
> 
> 时间：2012-05-09T15:11:34.107
> 
> 标签：python, text-files, extraction

问题是从文本文件中的一堆垃圾中提取数据。例如，首先，我需要从文本文件中提取这个特定部分：

%T 525 1:0.00:6425.12 2:0.01:6231.12 3:0.00:3234.51 并且持续了很长时间。

然后，我需要专门从每个短语中提取第三个数据，即 6425.12、6231.12 和 3234.51，并将其写入一个新的文本文件，然后对这些数据进行其他编辑。

我正在考虑在这种情况下使用正则表达式。任何人都可以显示示例代码吗？对于经验丰富的程序员来说应该是相当直截了当的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:20:20.467

你不需要`re`得到数字...

```
s='%T 525 1:0.00:6425.12 2:0.01:6231.12 3:0.00:3234.51'
columns=s.split()[2:]  #Create a list of all the columns except the first 2.
numbers=[c.split(':')[-1] for c in columns]  #Split each column on ':' and take the last piece. 
```

但是，我们需要更多关于文件结构的信息，然后才能确定如何首先挑选出字符串`s`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:20:54.880

我不认为我会为此求助于正则表达式，看起来很简单。

```
with open(...) as file:
    for line in file:
        for word in line.split():
             if ':' in word:
                  print word.split(':')[2]  # do something with it here 
```

# r - R：在数据框列的循环中使用 ddply

> ID：10518925
> 
> 赞同：1
> 
> 时间：2012-05-09T15:11:41.310
> 
> 标签：r, plyr

我需要根据数据框中列子集中每列中的值计算多个新列并将其添加到数据框中。这些列都保存时间序列数据（有一个通用的日期列）。例如，我需要计算十几个列在上一年同一个月的变化。我可以指定它们并单独计算它们，但是要转换大量列会变得繁重，因此我尝试使用 for 循环自动化该过程。

在我尝试使用`ddply`为迄今为止的年度值的运行总计创建一个列之前，我做得很好。发生的情况是`ddply`在每次迭代期间通过循环添加新行并将这些新行包括在`cumsum`计算中。我有两个问题。

问：如何让 ddply 计算正确的 cumsum？问：如何在 ddply 调用期间指定列的名称，而不是使用虚拟值并在之后重命名？

[编辑：我说得太早了，下面的更新代码此时不起作用，仅供参考]

```
require(lubridate)
require(plyr)
require(xts)

set.seed(12345)
# create dummy time series data
monthsback <- 24
startdate <- as.Date(paste(year(now()),month(now()),"1",sep = "-")) - months(monthsback)
mydf <- data.frame(mydate = seq(as.Date(startdate), by = "month", length.out = monthsback),
                   myvalue1 = runif(monthsback, min = 600, max = 800),
                   myvalue2 = runif(monthsback, min = 200, max = 300))

mydf$year <- as.numeric(format(as.Date(mydf$mydate), format="%Y"))
mydf$month <- as.numeric(format(as.Date(mydf$mydate), format="%m"))
newcolnames <- c('myvalue1','myvalue2')

for (i in seq_along(newcolnames)) {
    print(newcolnames[i])
    mydf$myxts <- xts(mydf[, newcolnames[i]], order.by = mydf$mydate)
    ## Calculate change over same month in previous year
    mylag <- 12
    mydf[, paste(newcolnames[i], "_yoy", sep = "", collapse = "")] <- as.numeric(diff(mydf$myxts, lag = mylag)/ lag(mydf$myxts, mylag))
    ## Calculate change over previous month
    mylag <- 1
    mydf[, paste(newcolnames[i], "_mom", sep = "", collapse = "")] <- as.numeric(diff(mydf$myxts, lag = mylag)/ lag(mydf$myxts, mylag))

    ## Calculate cumulative figure
    #mydf$newcol <- as.numeric(mydf$myxts)
    mydf$newcol <- 1
    mydf <- ddply(mydf, .(year), transform, newcol = cumsum(as.numeric(mydf$myxts)))
    colnames(mydf)[colnames(mydf)=="newcol"] <- paste(newcolnames[i], "_cuml", sep = "", collapse = "")

}

mydf 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:00:52.020

在您的循环中，由于`myxts`不是数据框的一部分，因此它不会`ddply`与其他所有内容一起在语句中拆分。将其更改为：

```
mydf$myxts <- xts(mydf[, newcolnames[i]], order.by = mydf$mydate) 
```

我不知道有什么方法可以将动态生成的名称与`transform`.

# c# - 日志解析器 - 通过 MSUtill 查询和通过 C# 代码读取记录

> ID：10518927
> 
> 赞同：2
> 
> 时间：2012-05-09T15:11:48.053
> 
> 标签：c#, logparser

我发现很多关于日志解析器的线程，但没有一个能满足我的愿望，

我需要将此查询应用于日志解析器 select * from security

并获取事件行，然后逐行读取它们，知道我访问哪一列......

请帮忙...

什么应该下来： 1.通过 LogParser.dll 查询 Windows 事件（使用 MSUtill 库） 2.获取并将行放入任何容器中 3.逐行读取 4.能够分隔行的每个单元格，并读取它们分别像访问事件 ID 列或消息列...

* * *

## ——对问题

有东西，但我没有得到它们，例如，这个人使用这个，取单行，但我需要多行，我想知道接下来要转换什么：| 我需要使用什么类

```
LogQueryClass logger = new LogQueryClassClass();
            COMIISW3CInputContextClass inputContext = new COMIISW3CInputContextClassClass();
            string query = // i change it during test
            ILogRecord record = logger.Execute(query, inputContext).getRecord(); 
```

或其他用途：似乎也返回单个结果

```
// prepare LogParser Recordset & Record objects
            ILogRecordset rsLP = null;
            ILogRecord rowLP = null;

            LogQueryClassClass LogParser = null;
            COMW3CInputContextClassClass W3Clog = null;

            double UsedBW = 0;
            int Unitsprocessed;
            double sizeInBytes;

            string strSQL = null;

            LogParser = new LogQueryClassClass();
            W3Clog = new COMW3CInputContextClassClass();

            try
            {
                //W3C Logparsing SQL. Replace this SQL query with whatever 
                //you want to retrieve. The example below 
                //will sum up all the bandwidth
                //Usage of a specific folder with name 
                //"userID". Download Log Parser 2.2 
                //from Microsoft and see sample queries.

                strSQL = //the query (i changed it during test)

                // run the query against W3C log
                rsLP = LogParser.Execute(strSQL, W3Clog);

                rowLP = rsLP.getRecord();

                Unitsprocessed = rsLP.inputUnitsProcessed;

                if (rowLP.getValue(0).ToString() == "0" ||
                    rowLP.getValue(0).ToString() == "")
                {
                    //Return 0 if an err occured
                    UsedBW = 0;
                    return UsedBW;
                }

                //Bytes to MB Conversion
                double Bytes = Convert.ToDouble(rowLP.getValue(0).ToString());
                UsedBW = Bytes / (1024 * 1024); 
```

我找到的最好的查询是这个，它在寄存器内搜索（我没有原始查询，因为我改变了它

```
ILogRecordset rs = null;
            try
            {
                LogQueryClass qry = new LogQueryClass();
                COMRegistryInputContextClass registryFormat = new COMRegistryInputContextClass();
                string query = //Chnaged it
                rs = qry.Execute(query, registryFormat);
                for (; !rs.atEnd(); rs.moveNext())
                    Console.WriteLine(rs.getRecord().toNativeString(","));
            }
            finally
            {
                rs.close();
            } 
```

还有一些东西，似乎不是将数据作为活动对象返回给 SQL：|

## 因为我要编写服务，所以我希望尽可能少地访问数据库以交换数据，只存储当前数据

## - 编辑：

让我补充一下，我的查询（使用传递“log parser.exe”参数）是这样的，但是在服务内部调用 exe 文件对我来说太粗鲁了。

```
myProc.StartInfo.Arguments = " \"select * INTO AuditLogParser from \\\\" + Dns.GetHostName() +
                                         "\\security WHERE TimeGenerated >= '" + startDate +
                                         "' and TimeGenerated <'" + endDate +
                                         "' and (eventid=560 or eventid=540)\" -o:SQL -server:\"" +
                                         Dns.GetHostName() +
                                         "\\sqlexpress\"  -database:SecurityLog -driver:\"SQL Server\" -username:TrainAudit -password:Password.110 -createtable:OFF"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T20:50:03.593

以下示例代码使用 LogParser 从名为的本地目录中读取文件名和大小`C:\Bat`

```
LogQueryClass logQuery = new LogQueryClassClass();

COMFileSystemInputContextClass inputFormat = new COMFileSystemInputContextClassClass();
inputFormat.recurse = 0;

String strQuery = @"SELECT Name, Size FROM 'C:\Bat\*.*' ORDER BY Name ASC";

ILogRecordset results = logQuery.Execute(strQuery, inputFormat);
while (! results.atEnd())
{
    Console.WriteLine(String.Format("File: {0} Size: {1}", results.getRecord().getValue("Name"), results.getRecord().getValue(1)));
    results.moveNext();
} 
```

请注意，我可以通过查询中的列名或列索引来访问该列。

# jquery - 我们可以在单击提交按钮时强制回发（MVC3）

> ID：10518930
> 
> 赞同：0
> 
> 时间：2012-05-09T15:11:57.007
> 
> 标签：jquery, asp.net-mvc-3

我有一个表单，它有两个提交按钮（一个在主表单中，另一个在隐藏的 div 中，在某些情况下可见）。

在第一种情况下，提交按钮工作正常，但是当 div 显示为弹出窗口时，单击 div 中的提交按钮时，不会触发任何操作。

但我希望将表单提交给控制器，因为 div 也是父表单的一部分。
***我这样做的目的是启动模型绑定并在我的控制器中收集所有表单元素值。***

我可以使用 Jquery 强制表单发布并在第二次提交按钮单击时启动模型绑定吗？我的表格看起来像：

```
 @using (Html.BeginForm("SelectSuggestedAddress", "Dispatch", FormMethod.Post, new { id = "myform" }))
        { ....

     <p>
         <input id= "btn1" type="submit" value="Save" />
    </p>
} 
```

& 在 div 我有一些带有另一个提交按钮的控件：

```
<div style="display: none">
@Html.EditorFor(model => model.Address)
    <p>
         <input id= "btn2" type="submit" value="Save" onclick="InitiatePost()" />
    </p>
    }
<div> 
```

然后在一个单独的 javascript 文件中：

```
function InitiatePost() {
    alert("Posting the Form");
    $('#btn2').click(function () {
        $('#myform').submit();
    }); 
```

***它是否应该启动发布并执行模型绑定并收集我的控制器中的所有表单元素值。***

在我的情况下，警报在按钮单击时触发，但 POST 没有发生。请帮助我纠正我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:27:01.610

```
 $(function() {    
        $('#btn2').click(function() {
            $('#btn1').trigger('click');
        });
    }); 
```

# php - PHP 从 textarea 获取所有电子邮件地址

> ID：10518934
> 
> 赞同：2
> 
> 时间：2012-05-09T15:12:08.147
> 
> 标签：php, arrays

您好，我正在从数据库中的文本区域保存电子邮件地址。现在我希望将这些数据放入一个数组中，以便我可以向每个电子邮件地址发送一封邮件。

在每个换行符上都有一个电子邮件地址，如下所示：

```
<textarea>
my@email.com 
my2@email.com 
my3@email.com
</textarea> 
```

此数据以 LONGTEXT 格式保存在数据库中。我将这些数据作为字符串从数据库中取出。但我希望将数据放入一个数组中。所以每封电子邮件都有一个唯一的索引。请注意，数据库中没有保存像 '\n' 和 <br> 这样的特殊字符。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:34:01.000

Your question seems to indicate that you're saving the email addresses in the textarea as whole rather than first splitting them up and saving each address separately. You will want to take the latter approach. Why split/validate everytime you read out of the database?

First, split the incoming emails with:

```
$email_addresses = preg_split('/\r\n|\n|\r/', $_POST['email_addresses']); 
```

The regex allows you to take into account the different end of line characters the different platforms out there use.

Then you can loop over the addresses and validate each with:

```
filter_var($email_address, FILTER_VALIDATE_EMAIL) 
```

Then save each address in its own row in the database.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:13:09.870

假设您的数据库字段被调用`email_addresses`并且新行是`\n`：

```
$email_addresses = explode("\n", $row['email_addresses']); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T15:41:20.667

是的，正如上面提到的两个不错的答案，您可以使用

```
$email_addresses = explode("\n", $row['email_addresses']; 
```

完成你所需要的。但是，他们确实忘记提及您正在做的事情是个坏主意。您所做的事情会给 SQL 注入带来巨大的安全风险。看我可以放置类似的东西

```
test@aol.com'; DELETE * FROM employees WHERE 1 OR email = ' 
```

如果您有这样的语句设置，请在该文本框中删除您的表格

```
Select * FROM employees where email = '$email_addresses[0]' 
```

一个简单的解决方案是在您的每个电子邮件地址上使用“mysql_real_escape_string($string)”，或者使用正则表达式，例如

```
^[A-Za-z0-9._+-]+@[A-Za-z0-9.-]{2,}+\.[A-Za-z]{2,4}$ 
```

尝试使用这些资源让您走上正确的轨道，以防止您的整个数据库受到攻击：

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-stop-sql-injection-in-php)

[http://php.net/manual/en/security.database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)

[http://bit.ly/ICJhZJ](http://bit.ly/ICJhZJ)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:14:22.270

你试过什么？

尝试这个 ：

```
<?php
$array = explode("\n", $your_long_text); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T15:27:27.670

为了安全起见，您应该这样做：

```
<?php
    $array = explode('|', str_replace(array("\n","\r"),'|',$your_long_text));
    foreach ($array as $k => $v)
         if (empty($v)) unset($array[$k]);
?> 
```

这涵盖了所有类型的换行符，并删除了可能出现的任何空条目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T07:13:11.777

我重新解决了我的问题并遵循了 webbiedave 的建议。我首先拆分电子邮件地址并检查它们是否有效。之后，我将每个条目保存为数据库中的一行。

```
// Delete previous Emails
        DB::_execute("DELETE FROM `%s` WHERE education_id = ?", array(self::_getEducationEmailAddressesTable()), array($action['id']));

        // Only save new emails when email is not empty
        if( ! empty($data['emails'])) {
            // save Emails 
            $email_addresses = preg_split('/\r\n|\n|\r/', $data['emails']);

            foreach($email_addresses as $email) {
                if( ! Utils::_isEmailAddress($email)) {
                    return new Error("GiveValidEmailAddress");
                } else {
                    DB::_execute("INSERT INTO `%s` (education_id, email_address) VALUES (?, ?)", array(self::_getEducationEmailAddressesTable()), array($action['id'], $email));    
                }
            }
        } 
```

# excel - 从 3 到底部查看 C 列？Excel

> ID：10518935
> 
> 赞同：0
> 
> 时间：2012-05-09T15:12:08.810
> 
> 标签：excel

这是我的公式，它工作得很好，除了它从 C 的顶部到 C 的底部。我希望它通过 C3 到 C 的末尾。这可能吗？

```
=IFERROR(INDEX('Jobs List'!$C:$C,MATCH(ROWS(AG$12:AG12),'Jobs List'!$R:$R,0)),IFERROR(INDEX(K$8:K$11,MATCH(ROWS(C$7:C7),$M$8:$M$11,0)),"")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:27:31.293

在您的原始公式中，您可能会替换`$C:$C`为`OFFSET($C$3,0,0,ROWS($C:$C)-ROW($C$3)+1)`.

或者，在 Excel 2007 或 2010 中，您可以考虑使用带有结构化引用的数据表。因此，如果您的数据表名为 Your_Table 并且列 C 标记为“您的列”，则您可以使用`Your_Table[Your Column]`来引用列 C 的“已使用”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:18:52.637

您必须对这些值进行硬编码。

`C3:C65536`适用于 Excel 2003 及更早版本

`C3:C1048576`对于 Excel 2007 和 2010

# html - 如何旋转整个 HTML5 文档？

> ID：10518936
> 
> 赞同：0
> 
> 时间：2012-05-09T15:12:12.327
> 
> 标签：html, safari, rotation, markup

我在 iBooks Widget 中有一个 HTML5 游戏。事实证明，“关闭小部件”按钮不符合 Info.plist 中的信息，这意味着它最终位于播放区域的顶部。

我可以重新编码整个逻辑，并翻转每一个图像（工作量不大，但确实不是一个很好的解决方案），或者如果可能的话将整个文档旋转 180 度。

我试过申请

```
-webkit-transform: rotate(180deg); 
-webkit-transform-origin: 50% 50%; 
```

到 body 元素，但这不会在 Safari 上旋转背景图像，以及其他问题。

因此，问题是，我可以在文档标题中添加一些内容以要求它将自身旋转半圈吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:33:56.770

但是，这里没有用于测试的 Safari，将 CSS 属性应用到 html 而不是 body 可以在 Chrome 中按预期工作。

# sql - 将 SSRS 2008 报告描述复制到另一台机器？

> ID：10518938
> 
> 赞同：1
> 
> 时间：2012-05-09T15:12:23.530
> 
> 标签：sql, sql-server-2008, reporting-services, ssrs-2008

我正在将备份盒与生产服务器同步，并且我有大量报告，其中包含需要复制的描述。

我发现描述数据在目录表的报告服务数据库中。但是没有一个 guid 匹配，所以我不能只是将此信息放入另一个数据库并覆盖 .

以前有没有人必须这样做，有没有捷径可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:38:49.133

是的，我使用了这个工具：[http ://www.sqldbtips.com/showarticle.asp?ID=62](http://www.sqldbatips.com/showarticle.asp?ID=62)

# android - 如何防止在 Google TV 中的 ListFragment 上自动滚动？

> ID：10518939
> 
> 赞同：0
> 
> 时间：2012-05-09T15:12:25.440
> 
> 标签：android, android-fragments, google-tv, android-listfragment

我在 Google TV 应用中有一个活动，它显示 4 列。布局中的顶级小部件是水平 LinearLayout，其中包含构成列的小部件。4 列小部件（从左到右）是：Vertical LinearLayout（包含按钮）、ListFragment、ListFragment、Vertical LinearLayout（包含 TextViews）。

当填充数据时，2 个 ListFragments 比屏幕的可见高度高得多，并且可以独立滚动以在列表上向上/向下移动。当我在列之间移动焦点时，这一切都很好，除了 ListFragments 上的一些不需要的自动滚动。

例如，如果我将焦点放在第 2 列的顶部（最左侧的 ListFragment）并且我使用 d-pad 将焦点向下移动到可见屏幕的中间，然后我按下 d 上的右键-pad（水平移动到另一个 ListFragment）列表项（在第 2 个 ListFragment 中）与第一个 ListFragment 中的焦点项并排接收焦点（这很好），但同时第 2 个 ListFragment 自动垂直滚动, 将新聚焦的项目推到可见屏幕的顶部（这很糟糕）。相反，我希望它保持原样（在列表中间）。

如果我从第二个 ListFragment 的中间向左移动，回到第一个，也会出现同样的问题。如果我从第一列中的一个按钮向右移动到第一个 ListFragment 的中间，也会发生这种情况。

我知道这种自动滚动行为对于某些应用程序可能是可取的，但在我的应用程序中它并不真正合适，并且会导致用户混淆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:05:28.287

这似乎是平行垂直片段之间的 ListView d-pad 导航中的一个错误。请尝试在平板电脑上重现它并在 Android 问题跟踪器中提交错误。

同时，您可以使用以下解决方法：

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // workaround to handle keyevent dpad-right from left list to right list, to 
        // to prevent default behavior of focused item on right list snapping to top.             
        if (keyCode == KeyEvent.KEYCODE_DPAD_RIGHT) {
            if (left_list != null && right_list != null && left_list.isFocused()){
                right_list.setSelection(right_list_selected_index);
                right_list.requestFocus();
                return true;
            }
        } 
        return super.onKeyDown(keyCode, event);
    } 
```

# asp.net-mvc - .NET MVC 不显眼的验证和自定义模型绑定器

> ID：10518942
> 
> 赞同：4
> 
> 时间：2012-05-09T15:12:29.157
> 
> 标签：asp.net-mvc, unobtrusive-validation, modelbinder

我有一个简单的 MVC 网站，它显示一个用于编辑目的的 jquery 对话框。在此对话框中是一个文本区域，它接受用户可以输入的以逗号分隔的技能列表。提交后，我的模型绑定器将其转换为**List**。这是我的模型活页夹的代码

```
public class EditSkillsModelBinder : DefaultModelBinder
    {
        protected override void OnModelUpdated(ControllerContext controllerContext,
        ModelBindingContext bindingContext)
        {
            var form = controllerContext.HttpContext.Request.Form;
            var skillsAsString = form["SkillsAsString"];
            var user = bindingContext.Model as UserEditDetailsModel;

            //FOR VALIDATION
            ValueProviderResult valueResult = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
            ModelState modelState = new ModelState {Value = valueResult};

            if (string.IsNullOrEmpty(skillsAsString))
            {
                bindingContext.ModelState.AddModelError("Skills", "You must enter at least one skill.");
            }
            else
            {
                user.Skills = string.IsNullOrEmpty(skillsAsString) ? new List<string>() : skillsAsString.Split(',').Select(i => i.Trim()).ToList();
            }

        }

    } 
```

这是我的部分视图的代码

```
@using (Ajax.BeginForm("EditUserDetails", new { }, new AjaxOptions { }, new { id = "EditUserDetailsForm" }))
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>UserEditDetailsModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.FirstName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.FirstName)
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.LastName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.LastName)
            @Html.ValidationMessageFor(model => model.LastName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Skills)
        </div>
        <div class="editor-field">
            @Html.TextArea("SkillsAsString", Model.Skills.ToCommaSeparatedString())
            @Html.ValidationMessageFor(model => model.Skills)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>

}

@*Enable Client Side Validation*@
<script type="text/javascript">
    $(document).ready(function () {
        $.validator.unobtrusive.parse("#content_container > form");
    });
  </script> 
```

我所有的简单验证（例如 [Required]）都在客户端工作。模型绑定器验证也有效，但是没有显示错误消息。我假设我在 javascript 中遗漏了一些东西来注册错误，但我不知道它是什么。任何帮助，将不胜感激。谢谢。

这是问题的屏幕截图

![在此处输入图像描述](../Images/379c0d3401c439a1655b37ec2af10e87.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:29:06.477

所以我放弃了不显眼的，我发现我的技能模型上有一个 [Required] 属性，这导致了屏幕截图中的验证，而不是我的模型绑定器的验证。

尽管模型绑定器不用于验证，但似乎尝试为同一模型属性混合验证属性和模型绑定器会导致问题（至少在我尝试将字符串转换为列表的情况下），因此，我正在严格验证在我的模型活页夹（提供附加功能）中，它已经开始工作了。

**编辑**

[我应该补充一点，根据这篇文章](https://stackoverflow.com/questions/2783865/class-model-level-validation-as-opposed-to-property-level-asp-net-mvc-2-0)，我放弃了验证属性以支持 FluentValidation 。它不那么冗长，与客户端验证集成，并且更易于使用。

# javascript - 单击两者时，下一个和上一个按钮不起作用

> ID：10518945
> 
> 赞同：1
> 
> 时间：2012-05-09T15:12:31.663
> 
> 标签：javascript, jquery, html, banner

我正在尝试使用带有 jquery.currentBanner 值的横幅滑块，当我单击按钮但横幅没有改变时，值会增加和减少。

脚本：

```
$(document).ready(function () {
    var currentBanner = 0;
    $("#prev").bind("click", function () {
        currentBanner -= 1;
        $("#banner_div img").eq(currentBanner).fadeIn("slow");
    });

    $("#next").bind("click",function () {
        currentBanner += 1;
        $("#banner_div img").eq(currentBanner).fadeIn("slow");
    });

    $("#banner_div img").eq(currentBanner).css("display", "block");
}); 
```

HTML：

```
<a href="#" id="next>next</a>
<a href="#" id="prev">prev</a>
<div id="banner_div">
    <img src="image1.jpg" alt="" />
    <img src="image2.jpg" alt="" />
    <img src="image3.jpg" alt="" />
    <img src="image4.jpg" alt="" />
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:17:13.573

马上开始

```
<a href="#" id="next>next</a> 
```

缺少 id 属性的结束引号：

```
<a href="#" id="next">next</a> 
```

* * *

***[这是我会做什么的 jsFiddle 演示](http://jsfiddle.net/eFUqj/1/)。***

**jQuery** :

```
$(document).ready(function () {

    var $images = $("#banner_div img"),
        totalImages = $images.length,
        currentIndex = 0;

    $images.eq(currentIndex).fadeIn("slow");

    $("#prev").on("click", function() {
        if (currentIndex > 0) {
            $images.eq(currentIndex).stop(true,true).hide(0);
            currentIndex -= 1;
            $images.eq(currentIndex).stop(true,true).fadeIn("slow");
        }
    });

    $("#next").on("click",function () {
        if (currentIndex < totalImages-1) { 
            $images.eq(currentIndex).stop(true,true).hide(0);
            currentIndex += 1;
            $images.eq(currentIndex).stop(true,true).fadeIn("slow");
        }
    });

});​ 
```

**CSS**：

```
#banner_div img { display: none; }​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:25:23.930

Morteza 代码的精简版：

```
$(document).ready(function () {
    var currentBanner = 0;
    $("#banner_div img").eq(currentBanner).show("fade");

    $("#prev").bind("click", function () {
        $("#banner_div img").eq(currentBanner--).hide("fade").prev().show("fade");
    });

    $("#next").bind("click",function () {
        $("#banner_div img").eq(currentBanner++).hide("fade").next().show("fade");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:22:29.370

使用方法 $(selector).show("fade") 和 $(selector).hide("fade")

```
$(document).ready(function () {
    var currentBanner = 0;
    $("#banner_div img").hide();
    $("#banner_div img").eq(currentBanner).show("fade");

    $("#prev").bind("click", function () {
        $("#banner_div img").eq(currentBanner).hide("fade");
        decrease(currentBanner);
        $("#banner_div img").eq(currentBanner).show("fade");
    });

    $("#next").bind("click",function () {
        $("#banner_div img").eq(currentBanner).hide("fade");
        increase(currentBanner);
        $("#banner_div img").eq(currentBanner).show("fade");
    });

}); 
```

当增加和减少时检查 currentBanner beetween 0 和横幅计数。

```
function increase(n){
    n++;
    if(n >= $("#banner_div img").length)
        n=0;
}
function decrease(n){
    n;
    if(n < 0 )
        n=$("#banner_div img").length -1;
} 
```

# java - 在 Android 中无法解析 Unix 时间戳

> ID：10518946
> 
> 赞同：0
> 
> 时间：2012-05-09T15:12:33.860
> 
> 标签：java, android, unix-timestamp

我在解析使用 JSON 从服务器带回的时间戳字符串时遇到了一些麻烦。我正在使用以下代码从 HashMap 中提取时间戳并将其显示在日志中：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
Long time = Long.parseLong(event.get("time"));
final Calendar cal = Calendar.getInstance();
cal.setTimeInMillis(time);
String event_date = sdf.format(cal.getTime());
Log.v("Date", event_date); 
```

但是对于我传递给此方法的每个时间戳，它会返回 1970 年 1 月 16 日的日期，我试图解析的时间戳示例`1336773600`应该对应于 2012 年 5 月 11 日。我看不出我在做什么错在这里但显然我是。有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T15:19:36.877

Unix 时间戳是自纪元以来的秒数。Java 使用自纪元以来的毫秒数。

将您的 unix 时间戳乘以 1000 以对此进行调整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:21:35.737

尝试：

```
cal.setTimeInMillis(time * 1000); 
```

将秒转换为毫秒。

# c++ - 使用 Mac OS X Lion 工具（gcc 等）的 Eclipse C++ 项目错误

> ID：10518953
> 
> 赞同：0
> 
> 时间：2012-05-09T15:12:51.453
> 
> 标签：c++, xcode, eclipse, osx-lion

我已经在我的 MacBook Pro 上使用 Mac OS X Lion 成功构建并运行了一个 Eclipse C++ 项目。我的 MacBook Pro 上有最新的 Xcode 工具。现在我正在尝试在家里的 Mac Pro 上做同样的想法。我安装了 Xcode（包括带有 gcc 的命令行工具），但 gcc 编译一直在抱怨：

`unresolved inclusion: iostream`（去掉尖括号）

两个系统都运行最新的 Lion 版本和最新的 Xcode 工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:50:31.410

您需要找到 iostream.h 文件。尝试这个：

在您的 Eclipse 项目中，转到 Properties > C/C++ General > Paths and Symbols，然后选择“Includes”选项卡。在语言列表中选择“GNU C++”并单击“添加”以包含一个目录。现在，浏览 C++ 源代码：在 Mac 上，它们应该位于 /usr/include/c++。

希望这可以帮助。

# rtc - 在流内的组件级别限制用户访问

> ID：10518954
> 
> 赞同：0
> 
> 时间：2012-05-09T15:12:52.157
> 
> 标签：rtc

是否可以阻止用户将更改集交付给流中的组件？

例如，一个“ `Integration`”流不应该看到开发人员的任何交付：只有**集成团队**应该能够修改那个“ `Integration`”流。

然而，现在，项目区域的任何合作者都能够创建一个 repo 工作区，并且通过更改其流目标（即添加`Integration`“流并设置它” `current`），能够交付到该流！？

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:35:49.140

是的，但限制是授权为任何具有特定角色的人交付，而不是只限制一个人的名字。
因此，如果该人在该项目区域中没有与他/她的个人资料相关联的特定角色，他/她将无法在该流上进行交付。

您需要通过“操作行为”部分为“交付（服务器）”操作添加一个挂钩。参见插图：

![交付挂钩](../Images/4be4a151a8250032ae256d3d321efb82.png)

钩子“限制更改集交付到流中的组件”将仅允许具有角色“release_engineer”（仅为我们的项目创建的自定义角色）的用户在“流”字段中提到的流上交付列出的组件在“组件/权限”数组中。

# apache-flex - Adobe Air：拖放分组组件

> ID：10518955
> 
> 赞同：1
> 
> 时间：2012-05-09T15:12:52.370
> 
> 标签：apache-flex, drag-and-drop, air, flex4, flex-spark

我正在尝试创建需要以下组件的 Adob​​e Air 应用程序：

![示例图像](../Images/d1b918103e2eb7f959577dcc91568dad.png)

请允许我详细说明这个模型：

每侧有 2 个面板，这些面板内的项目可以相互拖放，就像在 2 个文件夹中移动项目一样。几个教程显示了一个列表

```
dragEnabled = "true"
dropEnabled = "true"
dragMoveEnabled = "true" 
```

将完成这项工作。然而，关键的部分来了。我希望列表中的项目具有这样的结构，即左侧有图像，右侧有 TextArea，如上所述。当用户拖动这个“结构化项目”时，我希望整个事情一起走到另一边，无论用户最初拖动这个“结构化项目”的位置 - 这意味着如果用户从图像中单击并将其拖放到另一边，这个“结构化项目”会出现在另一边。如果用户从 TextArea 拖动，应该会发生同样的事情。

TextArea 是这个“结构化项目”的一部分，位于滚动面板内，也应该允许用户滚动其文本。

那么我们如何在 Adob​​e Air 中做到这一点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:24:47.083

Flextras 是对的。最好的办法是展示您为尝试不同的事情并尝试自己解决问题所付出的努力。但是，我今天又心情很好，所以你去吧:)

主要应用：

```
 import mx.collections.ArrayCollection;

        [Bindable]
        private var list1Array:ArrayCollection = new ArrayCollection([
            {text: "a"},
            {text: "b"},
            {text: "c"},
            {text: "d"},
            {text: "e"}]);
        [Bindable]
        private var list2Array:ArrayCollection = new ArrayCollection();

    ]]>
</fx:Script>

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:HGroup>
    <s:List dataProvider="{list1Array}" dragEnabled="true" dragMoveEnabled="true" dropEnabled="true" itemRenderer="listItemRenderer"/>
    <s:List dataProvider="{list2Array}" dragEnabled="true" dragMoveEnabled="true" dropEnabled="true" itemRenderer="listItemRenderer"/>
</s:HGroup>
</s:Application> 
```

列表项渲染器：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
            xmlns:s="library://ns.adobe.com/flex/spark" 
            xmlns:mx="library://ns.adobe.com/flex/mx" 
            autoDrawBackground="true">

<fx:Script>
    <![CDATA[
        private function updateData():void
        {
            data.text = textArea.text;
        }
    ]]>
</fx:Script>
<s:HGroup>
    <mx:Image width="50" height="50"/>
    <s:TextArea id="textArea" text="{data.text}" change="updateData()"/>
</s:HGroup> 
</s:ItemRenderer> 
```

# arrays - PHP 提交带有返回值的表单数据

> ID：10518961
> 
> 赞同：0
> 
> 时间：2012-05-09T15:13:25.337
> 
> 标签：arrays, forms, post

我正在使用 php 创建一个将产品详细信息提交到 mysql 数据库的表单。我希望用户能够编辑产品详细信息。我已经从数据库中调用了产品的详细信息，并以表格形式返回了它们（如下所示）。但是，当我尝试提交数组时，我看不到值或键我的目标是重新提交数据，如果更新，覆盖现有信息并将其保存到数据库中。我在页面上确实有另一个用于上传图像的提交按钮，但不确定这是否会导致问题。帮助将不胜感激...

```
$newProd->getLineForm($returnId);
foreach($newProd->getLineForm($returnId) as $item => $val){ 
?>

<form id="newLineForm" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST"    enctype="multipart/form-data">     

<div class="well">
<ul>
<h3>Step 1</h3>
<br />
<table>
<td><label>Product Code</label><input type="text" style="width:100px;" name="int_prod_code" value="<?php echo $val['int_prod_code']; ?>"></input></td>
<td><label>Nationality</label><input type="text" style="width:100px;" name="nationality" value="<?php echo $val['nationality']; ?>"></input></td>
<td><label>Product Description</label><input type="text" style="width:350px;" name="prod_desc" value="<?php echo $val['prod_desc']; ?>"></input></td>
<td><label>Raw Material</label><input type="text" style="width:200px;" name="raw_material" value="<?php echo $val['raw_material']; ?>"></input></td>
</table>

<br />

<span class="btn btn-update fileinput-button">
<i class="icon-edit icon-white"></i>
<span>Update</span>
<input type="submit" name="update"/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:16:08.143

尝试通过 GET 提交。我遇到了一个问题，我没有将表单发送到正确的页面，因此即使 GET 可以，POST 也无法正常工作。如果 GET 工作正常，您至少可以缩小提交表单的范围，然后就可以排除 POST 工作不正常的原因。

# iphone - 删除没有名称字段的联系人列表数据

> ID：10518963
> 
> 赞同：1
> 
> 时间：2012-05-09T15:13:30.723
> 
> 标签：iphone, uisearchbar

我有一个查询。我从我的手机获取联系人列表。我不应该显示没有名字的联系人。

像联系人一样：9966332211。此类数据应删除，不应显示在联系人列表中。我怎样才能实现它。联系人应该有姓名和联系电话。我正在研究 UISearchBar。如何根据搜索栏中的输入过滤联系人。

请给我一些想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:19:06.177

不知道这是否是你要找的，如果这不是我的道歉。

我在开发网站时会做类似的事情。当“IsDeleted”设置为 1 时，我在名为“IsDeleted”的数据库中创建另一行，它隐藏在所有内容之外，例如当我运行此查询时：“SELECT * FROM [Cake] WHERE Frosting = @Frosting AND IsDeleted = 0" 那么显然它不会显示在结果中

所以我猜你可以做类似的事情。或者设置一个变量是

“如果数字！= null && 名称！= null 然后打印”

# ajax - JSF 非 AJAX 提交和“@all”AJAX 提交之间有什么显着的技术差异吗？

> ID：10518964
> 
> 赞同：1
> 
> 时间：2012-05-09T15:13:33.293
> 
> 标签：ajax, jsf-2, rendering

在 JSF 2.0 中，进行非 AJAX 提交（例如）和“@all”AJAX 提交（例如）之间是否存在显着的技术差异？

用户不会从 AJAX 样式的提交中感知到页面刷新，但是否发生了其他技术上重要的事情？提交回服务器的数据是否更少？AJAX 与非 AJAX 提交的 JSF 生命周期的任何元素是否不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:38:00.607

从技术上讲，`@all`它比同步回发慢。渲染响应期间的 HTML 渲染没有区别，但 ajax 响应中的数据稍多一些，因为 ajax 响应是作为 XML 文档发送的，更新后的 HTML 是 CDATA 块。以下数据将添加到整个 HTML 输出顶部的响应中：

```
<?xml version='1.0' encoding='UTF-8'?>
<partial-response>
    <changes>
        <update id="javax.faces.ViewRoot">
            <![CDATA[
                HTML output here.
            ]]>
        </update>
        <update id="javax.faces.ViewState">
            <![CDATA[5778819104895950876:-4716773626508512118]]>
        </update>
    </changes>
</partial-response> 
```

*（您可以在 Chrome/Firebug/IE9 中的 Web 开发人员工具集的“Net”或“Network”部分自行查看，您可以通过按 F12 获得）*

因此，这总是比同步响应多约 250 个字节。此外，后处理也有一些开销，因为 JavaScript 必须从 XML 响应中解析出所有 HTML 并用它替换 DOM，尽管这些天对于快速机器的性能影响实际上完全可以忽略不计。

然而，在实践中，它`@all` *看起来*比同步回发更快，因为没有任何[“内容闪存”](http://en.wikipedia.org/wiki/Flash_of_unstyled_content)的手段。

请注意，这`@all`在 PrimeFaces 中长期不受支持，因为它“根本上是错误的”（引用 PrimeFaces 线索），但在[OmniFaces`FullAjaxExceptionHandler`](http://balusc.blogspot.com/2012/03/full-ajax-exception-handler.html#ButItDoesNotWorkWithPrimeFacesActions)之后，PrimeFaces 线索改变了主意，并且它受到 PrimeFaces 3.2 及更高版本的支持。

# php - PHP ereg_replace

> ID：10518971
> 
> 赞同：1
> 
> 时间：2012-05-09T15:14:01.743
> 
> 标签：php, preg-replace, ereg-replace

我有这个文件，我通过php文件上传上传到服务器..

```
6;'!8.jpg 
```

我使用此代码删除非字母数字字符..

```
$image1 = ereg_replace("[^A-Za-z0-9]", "", $_FILES["image"]["name"]); 
```

效果很好，但它会像这样返回我的图像

```
68jpg 
```

将其返回为的最佳方法是什么`68.jpg`

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:21:43.953

不要使用 ereg/eregi。这些功能已弃用。请改用[PCRE](http://www.php.net/manual/en/ref.pcre.php)函数。

试试这个方法

`$image1 = preg_replace("#[^a-z0-9\.]#i", null, $_FILES["image"]["name"]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:16:21.410

试试这个代码：

```
$image1 = ereg_replace("[^A-Za-z0-9\\.]", "", $_FILES["image"]["name"]); 
```

但是你真的应该尝试使用PHP 函数`preg_`而不是`ereg_`PHP 函数，因为它们的性能更高（并且没有被弃用）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T15:27:43.533

您可能可以使用 PHP 的 pathinfo($_IMAGE["image"]["name"]) 命令来分解文件名的基本路径、基本名称和文件扩展名。然后，您可以在基本名称上运行搜索 n' 替换（如@John Conde 建议的那样），然后将基本名称和文件扩展名连接在一起。

# java - 用Jsoup打开连接，获取状态码并解析文档

> ID：10518972
> 
> 赞同：8
> 
> 时间：2012-05-09T15:14:15.073
> 
> 标签：java, jsoup, connection

我正在使用 jsoup 创建一个类，它将执行以下操作：

1.  构造函数打开到 url 的连接。
2.  我有一个方法可以检查页面的状态。即200、404等。
3.  我有一个方法来解析页面并返回一个 url 列表。#

下面是我正在尝试做的粗略工作，而不是非常粗略，因为我一直在尝试很多不同的事情

```
public class ParsePage {
private String path;
Connection.Response response = null;

private ParsePage(String langLocale){
    try {
        response = Jsoup.connect(path)
                .userAgent("Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.21 (KHTML, like Gecko) Chrome/19.0.1042.0 Safari/535.21")
                .timeout(10000)
                .execute();
    } catch (IOException e) {
        System.out.println("io - "+e);
    }
}

public int getSitemapStatus(){
    int statusCode = response.statusCode();
    return statusCode;
}

public ArrayList<String> getUrls(){
    ArrayList<String> urls = new ArrayList<String>();

 }
} 
```

如您所见，我可以获取页面状态，但是使用构造函数中已经打开的连接我不知道如何获取要解析的文档，我尝试使用：

```
Document doc = connection.get(); 
```

但这是不行的。有什么建议么？或者更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T16:13:11.813

[如Connection.Response](http://jsoup.org/apidocs/org/jsoup/Connection.Response.html)类型的 JSoup 文档中所述，有一种`parse()`方法可以将响应的主体解析为 a`Document`并返回它。当你拥有它时，你可以用它做任何你想做的事情。

例如，参见实现`getUrls()`

```
public class ParsePage {
   private String path;
   Connection.Response response = null;

   private ParsePage(String langLocale){
      try {
         response = Jsoup.connect(path)
            .userAgent("Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.21 (KHTML, like Gecko) Chrome/19.0.1042.0 Safari/535.21")
            .timeout(10000)
            .execute();
      } catch (IOException e) {
         System.out.println("io - "+e);
      }
   }

   public int getSitemapStatus() {
      int statusCode = response.statusCode();
      return statusCode;
   }

   public ArrayList<String> getUrls() {
      ArrayList<String> urls = new ArrayList<String>();
      Document doc = response.parse();
      // do whatever you want, for example retrieving the <url> from the sitemap
      for (Element url : doc.select("url")) {
         urls.add(url.select("loc").text());
      }
      return urls;
   }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-13T22:52:32.523

如果您不需要登录，请使用：

```
Document doc = Jsoup.connect("url").get(); 
```

如果您确实需要登录，我建议您使用：

```
Response res = Jsoup.connect("url")
    .data("loginField", "yourUser", "passwordField", "yourPassword")
    .method(Method.POST)
    .execute();
Document doc = res.parse();

//If you need to keep logged in to the page, use
Map<String, String> cookies = res.cookies;

//And by every consequent connection, you'll need to use
Document pageWhenAlreadyLoggedIn = Jsoup.connect("url").cookies(cookies).get(); 
```

在您使用获取网址时，我可能会尝试

```
Elements elems = doc.select(a[href]);
for (Element elem : elems) {
    String link = elem.attr("href");
} 
```

就是这样..继续努力

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T16:11:45.840

您应该能够在响应对象上调用 parse() 。

```
Document doc = response.parse(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-21T07:39:45.287

似乎您的情况就像您想与 jsoup 建立连接然后检查状态代码，然后根据您将解析的状态代码或您想做的任何事情。

为此，您首先必须检查 URL 的状态代码，而不是创建连接。

```
 Response response = Jsoup.connect("Your Url ").followRedirects(false).execute();
        System.out.println(response.statusCode() + " : " + response.url()); 
```

`response.statusCode()`将返回您的状态码

之后，您可以创建连接

```
 if (200 == response.statusCode()) {
        doc = Jsoup.connect(" Your URL").get();
        Elements elements = doc.select("href");
        /* what ever you want to do*/
      } 
```

您的课程将如下所示

```
package com.demo.soup.core;

import java.io.IOException;

import org.jsoup.Connection.Response;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;

/**
 * The Class DemoConnectionWithJsoup.
 *
 * @author Ankit Sood Apr 21, 2017
 */
public class DemoConnectionWithJsoup {

    /**
     * The main method.
     *
     * @param args
     *            the arguments
     */
    public static void main(String[] args) {
    Response response;
    try {
        response = Jsoup.connect("Your URL ").followRedirects(false).execute();

        /* response.statusCode() will return you the status code */
        if (200 == response.statusCode()) {
        Document doc = Jsoup.connect("Your URL").get();

        /* what ever you want to do */
        }
    } catch (IOException e) {
        e.printStackTrace();
    }

    }

} 
```

# mysql - 需要有人更新这些过时的 MySQL 命令（错误：'USING BTREE' 附近）

> ID：10518973
> 
> 赞同：-2
> 
> 时间：2012-05-09T15:14:17.733
> 
> 标签：mysql

我需要在我的服务器上运行这些 MySQL 查询，但出现错误

“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在“使用 BTREE”附近使用正确的语法

以下是查询：

```
"CREATE INDEX pphpbb_forums_track_forum_id
  ON phpbb_forums_track
  USING btree
  (forum_id);

CREATE INDEX pphpbb_forums_track_user_id
  ON phpbb_forums_track
  USING btree
  (user_id);

CREATE INDEX phpbb_topics_track_user_id
  ON phpbb_topics_track
  USING btree
  (user_id); 
```

"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:19:13.883

**创建索引语法**

```
CREATE [UNIQUE|FULLTEXT|SPATIAL] INDEX index_name
    [index_type]
    ON tbl_name (index_col_name,...)
    [index_type] 
```

所以你的查询应该是

```
CREATE INDEX pphpbb_forums_track_forum_id
  ON phpbb_forums_track (forum_id)
  USING btree;

CREATE INDEX pphpbb_forums_track_user_id
  ON phpbb_forums_track (user_id)
  USING btree ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:17:24.353

快速浏览一下[http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html) 告诉我你用 Using 交换了 (user_id)。

```
CREATE INDEX phpbb_topics_track_user_id
  ON phpbb_topics_track (user_id)
  USING btree; 
```

# jquery - MVC3 和 JQuery 表行克隆最佳实践

> ID：10518974
> 
> 赞同：1
> 
> 时间：2012-05-09T15:14:21.233
> 
> 标签：jquery, asp.net-mvc-3

在使用 MVC3 并遍历集合以显示表中的行以及允许使用 JQuery 和/或 Ajax 添加客户端行时，您的最佳实践规则是什么？我要避免的是复制表格行标记并在我的 JS 代码中维护它。如果这已经被覆盖，我很抱歉。

这是我要避免的..

具有强类型 Customer 对象的 MVC 视图代码

```
<table id="tblCustomers">
<tbody>
@foreach (Customer cust in Model)
{
    <tr><td><div class="nameholder">@cust.Name</div></td><td><div class="idholder">@cust.Id</div></td></tr>
}
</tbody>
</table>
<input type="text" name="txtName" id="txtName" style="width:150px;" />
<input type="button" id="btnTest" value="Testing!" /> 
```

JS代码：

```
$(document).ready(function () {
    $("#btnTest").click(function () {
        $("#tblCustomers").append('<tr><td><div class="nameholder">UiInputValue</div></td><td><div class="idholder">UiInputValue</div></td></tr>');

    });
}); 
```

我看到的代码建议克隆表中的最后一行然后更改值是一种方法，就像下面的代码一样：

```
$(document).ready(function () {
    $("#btnTest").click(function () {
        var clone1 = $("#tblCustomers tbody>tr:first").clone(true);
        var name = $("#txtName").val();
        $(clone1).find(".nameholder").html(name);
        $(clone1).find(".idholder").html('not yet defined');
        $("#tblCustomers").append(clone1);

    });
}); 
```

但是我看到的问题是在集合为空并且我需要能够添加第一行的情况下。我想你可以有一个隐藏的行来处理这种情况，但这只是重复的代码。

是否有克隆 HTML 块的最佳实践方法，该方法将在视图和 JS 之间保持一致？提前感谢您的帮助！

# java - 获取之间的所有数据 用java

> ID：10518976
> 
> 赞同：0
> 
> 时间：2012-05-09T15:14:25.633
> 
> 标签：java, html, selenium, webdriver

我根本没有任何Java经验，所以我有点迷茫。使用 selenium，我已经下载了页面的 html，并将其存储在字符串中。现在我想抓取所有数据并将其放入数组中。所以在 jquery 风格中，我会说它是这样的：

```
$('div[align="center"]').each(function(){
 array[] = $(this).text();
}); 
```

不同之处在于现在我必须从字符串中取出它并在 java 中执行它。因为我没有使用 java 的经验，所以我正在寻找最简单的方法。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:32:45.443

Instead of getting the whole HTML by Selenium (there are lighter tools for that, see [Get html file Java](https://stackoverflow.com/questions/704821/get-html-file-java)), you can pick the right element with Selenium.

If you're using Selenium RC:

```
// assuming 'selenium' is a healthy Selenium instance
String divText = selenium.getText("css=div[align='center']"); 
```

or if you're using Selenium 2 (WebDriver):

```
// assuming 'driver' is a healthy WebDriver instance
String divText = driver.findElement(By.cssSelector("div[align='center']")).getText(); 
```

If there are actually more `<div align="center">` elements, you can get them all:

```
List<WebElement> divList = driver.findElements(By.cssSelector("div[align='center']"));
// and use every single one
for (WebElement elem : divList) {
    System.out.print(elem.getText());
} 
```

[The Selenium JavaDocs](http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html). In particular, you want to see [WebDriver](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.html), [WebElement](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html).

[And the Selenium documentation in examples.](http://seleniumhq.org/docs/03_webdriver.html#selenium-webdriver-api-commands-and-operations) Read it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:33:56.370

我建议你阅读这个问题：

[使用Java使用正则表达式查找更大字符串的子字符串](https://stackoverflow.com/questions/600733/using-java-to-find-substring-of-a-bigger-string-using-regular-expression)

这里唯一的困难是您必须构建的正则表达式，但这不是 java 问题。

请阅读有关换行符和使用 Pattern.DOTALL 标志的注释。

编辑：正如 Luciano 提到的，我会寻找一种更好的方式来阅读 html。你`String`可能包含更多，`<div align="center">`你可能不会只得到你想要的东西。

编辑：

这段代码似乎工作：

```
String html = "<div align=\"center\">text</div>";

Pattern MY_PATTERN = Pattern.compile("<div align=\"center\">(.*?)</div>");

Matcher m = MY_PATTERN.matcher(html);
while (m.find()) {
    String s = m.group(1);
    System.out.println(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:32:17.377

使用 selenium，而不是下载源页面，使用 selenium 来获取您想要从其中获取文本的 html 元素，方法是使用 xpath 或一些定位器（[Selenium 定位策略](http://seleniumhq.org/docs/02_selenium_ide.html#locating-elements)）..然后执行 getText..类似..selenium.getText(locator_of_element)。如果它是一个元素列表，那么您可以在定位器前面使用索引进行循环，例如。//div[0], //div[i] 等

希望能帮助到你..

# cucumber - Cucumber cuke 示例语法

> ID：10518977
> 
> 赞同：0
> 
> 时间：2012-05-09T15:14:31.977
> 
> 标签：cucumber

伙计们，

我被困在一个地方，看起来像一个语法错误，这是我的 cuke：

```
Feature: This is a test feature

         @stagingsearch
         Scenario Outline: Create a search and run it
                   When I create a search for profile "profilesame" for user <user>
                   Then I should see "Results"

        Examples: These are the users
        | user |
        | mol_2_1 |
        | mol_2_2 | 
```

我收到错误说实施步骤：

```
When /^I create a search for profile "([^"]*)" for user mol_(\d+)_(\d+)$/ do |arg1, arg2, arg3|
  pending # express the regexp above with the code you wish you had
end 
```

我不明白为什么黄瓜没有将示例 mol_2_1 解析为单个字符串。这里只有 2 个参数，但 cucumber 似乎很困惑，并将其作为 3 个参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:28:29.403

我假设您问的是实现该步骤所需的正则表达式是什么，而不是如何使 Cucumber 的建议正确？

如果该假设是正确的，那么您想要的步骤是：

```
When /^I create a search for profile "([^"]*)" for user (.*)$/ do |profile, user|
  pending # express the regexp above with the code you wish you had
end 
```

# regex - 使用正则表达式为任何字符设置最小/最大字符数

> ID：10518979
> 
> 赞同：57
> 
> 时间：2012-05-09T15:14:48.270
> 
> 标签：regex

我正在尝试编写一个正则表达式，它将用于文本框以验证其内容以查看它是否在 1 到 35 之间。文本框中的字符可以是任何东西：数字、字母、标点符号、空格等.这是我到目前为止所拥有的：

```
^[:;,\-@0-9a-zA-Zâéè'.\s]{1,35}$ 
```

如您所见，我必须列出所有字符。有没有更简单的方法来说“所有”字符？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-09T15:18:18.700

像这样：`.`

表示除换行符以外的`.`任何字符（有时会但通常不包括在内，请检查您的正则表达式风格）。

您可以将表达式重写为`^.{1,35}$`，它应该匹配长度为 1-35 的任何行。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-09T15:24:08.273

`.`当不在字符类中时，它通常是元字符。

所以使用`^.{1,35}$`. 但是，除非对它应用 dot-all 修饰符，否则*dot*不包含换行符。

您可以`^[\S\s]{1,35}$`在没有任何修饰符的情况下使用，这也包括换行符。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-03-06T07:27:01.843

If you want to set Min 1 count and no Max length,

```
^.{1,}$ 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-05-09T15:19:59.867

是的，`.`（点）会匹配任何字符。利用：

```
^.{1,35}$ 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-09T15:21:14.640

如果您还想匹配换行符，那么您可能想要使用`"^[\s\S]{1,35}$"`（取决于正则表达式引擎）。否则，正如其他人所说，你应该使用`"^.{1,35}$"`

# linq - 对每个组内参数的出现次数进行分组和计数

> ID：10518980
> 
> 赞同：0
> 
> 时间：2012-05-09T15:14:50.453
> 
> 标签：linq, sqlite, group-by, linqpad

我在摆弄 LINQPad，我确信这个问题已经被问到了，但我一直在挣扎和寻找很长一段时间。

我有一个这样的集合：

```
Age  Material
---  --------
3    Steel
3    Steel
3    PVC
4    Steel
4    PVC 
```

我想先按材质对其进行分组，然后计算每个材质组中每个年龄的出现次数，结果如下：

```
{Mat = Steel,
   [(Age = 3, Count = 2),
    (Age = 4, Count = 1)]}
{Mat = PVC,
   [(Age = 3, Count = 1),
    (Age = 4, Count = 1)]} 
```

我知道这与嵌套组有关，但我做不到。我一直在尝试这样的东西（只有没有问号），但我不知道如何访问每个组中的项目：

```
var matGroups = from line in Pipelines                              
                group line by line.Material into matGroup
                from ???? in ???
                group ???? by ???.Age; 
```

如果相关，我正在查询的数据存储在 SQLite 中。

***更新***

下面的代码让我得到我想要的数据。但是，如果可能的话，我仍然想知道在单个查询中执行此操作的正确方法。

```
var materials = from p in Pipelines
                group p by p.Material into matGroup
                select matGroup.Key;

foreach (string material in materials)
{
    var ages = from p in Pipelines
               where p.Material == material
               group p by p.Age into ageGroup
               select new {Age = ageGroup.Key, Count = ageGroup.Count()};

    ages.Dump(material + " Pipelines");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:00:27.497

它只是一个分组`Age`and `Material`：

```
from p in Pipelines
group p by new { p.Material, p.Age } into g
orderby g.Key.Material, g.Key.Age
select new { g.Key.Material, g.Key.Age, Count = g.Count () } 
```

# java - 如何在 java (android) 中舍入 DecimalFormat

> ID：10518981
> 
> 赞同：1
> 
> 时间：2012-05-09T15:14:55.220
> 
> 标签：java, android, rounding

我要圆

```
0.005 to 0.01 
```

我正在使用此代码

```
DecimalFormat df = new DecimalFormat("0.00"); 
```

但答案不断得到`0.00` 我只想要右边的 2 位数字，如果可能的话，有人有想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T15:23:00.857

您应该`RoundingMode`为 DecimalFormat添加

```
double d = 0.005;
DecimalFormat df = new DecimalFormat("0.00");
df.setRoundingMode(RoundingMode.HALF_UP);
System.out.println(df.format(d)); //0.01 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:22:27.030

对于舍入使用[BigDecimal](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)

```
BigDecimal decimal = new BigDecimal(number);
decimal = decimal.setScale(2, RoundingMode.HALF_UP);
String result = decimal.toString(); 
```

# algorithm - 从二进制最大堆中删除第二个最小元素

> ID：10518985
> 
> 赞同：0
> 
> 时间：2012-05-09T15:15:06.483
> 
> 标签：algorithm, heap, complexity-theory, heapsort

这个问题与[此](https://stackoverflow.com/questions/7650917/oklogk-time-algorithm-to-find-kth-smallest-element-from-a-binary-heap)类似。不同之处在于我有一个**二进制 Max-Heap**而不是**Min-Heap**。这使得问题完全不同。

我的想法：

1）我遍历所有节点以找到第二小的元素，这将花费 O(n)

2）当我找到第二个最小的元素时，我将该元素冒泡，通过将其与其父元素交换直到它到达根，这将花费 O(logn)

3）我从根中删除元素并取出最右边的元素并将其存储在根位置（常规堆删除操作），这将花费 O(logn)

总计将是 O(n) + O(logn) + O(logn)，即 O(n)。

编辑：添加**二进制**

还有比这更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:33:47.950

为什么不保留一个包含 2 个元素的小数组来保留最小的 2 个元素的副本？

然后，所有操作都只用 O(1) 步骤改变，您可以在恒定时间内提供答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:32:49.350

The second smallest element is either a leaf or parent of a leaf and the leaf is the only child of it.

How to remove the second smallest element:

1.  Find it by searching through leaves and possibly the father that has only one child. O(n)
2.  If the 2nd smallest element is parent of a node, the node must be the smallest element and should be the right most leaf. Replace the 2nd smallest with its child and it is over. O(1)
    If the 2nd smallest element is a leaf, replace it with the right most leaf in the deepest level and bubble up. O(log(n))

So it is O(n)+O(log(n)) which is still O(n) but with fewer comparisons.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:35:02.840

When it comes to big O notation - no, it cannot be done better. Finding an arbitrary element in a max heap is `O(n)`.

You could however reduce the number of maximum nodes you need to traverse to `1/2 * n`, and essentially **double the speed of the algorithm**. [still `O(n)` domain], since the **2nd smallest element in a max heap has at most one son**, so you can traverse only leaves (n/2 of those), and one element at most which has only one son. (remember, a binary heap is an array representing a complete tree, thus at most one element has exactly one son).

One can also enhance a bit the removal step, but I doubt it will have any significant affect), so I wouldn't bother putting effort into it.

# wpf - 自定义图片框中的图片不刷新

> ID：10518986
> 
> 赞同：4
> 
> 时间：2012-05-09T15:15:10.360
> 
> 标签：wpf, image, binding, bitmap

我的自定义图片框包含一个滚动查看器和一个图像。字符串类型的依赖属性 Image 用于设置图像。

```
public static DependencyProperty ImageProperty = DependencyProperty.Register(
"Image", typeof(string), typeof(CustomPictureBox), new FrameworkPropertyMetadata("", new  PropertyChangedCallback(OnImageChanged)));

private static void OnImageChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
  CustomPictureBox cpb = (CustomPictureBox)d;
  if (e.Property == ImageProperty)
  {
    string newvalue = e.NewValue as string;
    if (!(string.IsNullOrEmpty(newvalue)))
    {
      var bmp = new BitmapImage();
      bmp.BeginInit();
      bmp.UriSource = new Uri(newvalue);
      bmp.CacheOption = BitmapCacheOption.OnLoad;
      bmp.EndInit();

      cpb.imgPicture.Source = bmp;
    }
    else
      cpb.imgPicture.Source = null;
  }
} 
```

图像通过图像采集卡获取并存储到名称为“camera_image.tif”的给定位置。Image 属性设置为此文件名。当我开始新的图像采集时，我通过绑定将 Image 属性设置为 null 并且图片框更新为不显示图像。图像采集完成后，我再次将其设置为“camera_image.tif”。问题是新图像永远不会出现。相反，它始终是在图片框中显示的第一个获取的图像。当我检查图像文件时，它包含新内容。

我怎样才能让图片框刷新图像？

问候，

塔比纳

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T10:16:02.247

我在这里找到了答案：

[在 wpf](https://stackoverflow.com/questions/1491383/reloading-an-image-in-wpf) 和此处重新加载图像。 [WPF Image.Source 缓存过于激进](https://stackoverflow.com/questions/4137469/wpf-image-source-caching-too-aggressively)

```
bmp.CacheOption = BitmapCacheOption.OnLoad;
bmp.CreateOptions = BitmapCreateOptions.IgnoreImageCache; 
```

是我正在寻找的解决方案！