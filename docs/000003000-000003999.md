# StackOverflow 问答 3000-3999

# asp.net - 使用 ASP.NET 动态数据/LINQ to SQL，如何让两个表字段与同一个外键有关系？

> ID：3004
> 
> 赞同：14
> 
> 时间：2008-08-06T01:42:51.333
> 
> 标签：asp.net, dynamic-data

我正在为一个项目使用 ASP.NET 动态数据，并且我有一个表，其中包含两个单独的字段，这些字段链接到不同表中的相同外键。

这种关系在 SQL Server 中运行良好。

但是，在 ASP.NET 动态数据模型中的 LINQ to SQL 模型中，只反映了第一个字段的关系。如果我尝试手动添加第二个关系，它会抱怨它“无法创建关联“ForeignTable_BaseTable”。同一个属性被多次列出：“Id”。

[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/bb629292.aspx)提供了以下有用的建议：

*   检查消息并记下消息中指定的属性。
*   单击“确定”关闭消息框。
*   检查关联属性并删除重复的条目。
*   单击确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-06T01:53:45.510

解决方案是删除两个表并将其重新添加到 LINQ to SQL 图表，而不仅仅是您添加第二个字段和键的那个。

或者，您似乎可以使用 LINQ to SQL 接口进行两个关联 - 只是不要尝试将它们捆绑到一个关联中。

# c# - 我们如何在 Visual Studio 中生成 getter 和 setter？

> ID：3017
> 
> 赞同：246
> 
> 时间：2008-08-06T02:15:14.123
> 
> 标签：c#, visual-studio, setter, getter

通过“生成”，我的意思是自动生成特定选定（一组）变量所需的代码。

但欢迎对良好实践进行任何更明确的解释或评论。

* * *

## 回答 #1

> 赞同：324
> 
> 时间：2008-08-06T02:43:21.477

而不是使用`Ctrl`+ `K`，`X`您也可以只键入`prop`然后按`Tab`两次。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2008-08-06T02:52:02.910

Visual Studio 还具有从私有变量生成属性的功能。

如果右键单击一个变量，在弹出的上下文菜单中，[单击“重构”项，然后选择*封装字段*](https://stackoverflow.com/questions/3017/how-can-we-generate-getters-and-setters-in-visual-studio/29917170#29917170)...。这将为变量创建一个 getter/setter 属性。

我不太喜欢这种技术，因为如果你必须创建很多 getter/setter，使用起来有点尴尬，而且它把属性直接放在私有字段下面，这让我很烦恼，因为我通常将我所有的私有字段组合在一起，这个 Visual Studio 功能打破了我班级的格式。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2015-04-28T10:41:55.600

我使用 Visual Studio 2013 Professional。

*   将光标放在实例变量的行上。

    ![在此处输入图像描述](../Images/c78cdaf28b61fabc045f2bb8999f4cde.png)

*   按组合键`Ctrl`+ `R`、`Ctrl`+`E`或单击鼠标右键。选择上下文菜单*Refactor* → *Encapsulate Field...*，然后按`OK`。

    ![在此处输入图像描述](../Images/5fe82e94dc3e9272cfb4ab75977d4fb3.png)

*   在*预览参考更改 - 封装字段*对话框中，按下按钮`Apply`。

    ![在此处输入图像描述](../Images/69429fe83c0f5fb7930c9c8f156e37a7.png)

*   这是结果：

    ![在此处输入图像描述](../Images/df5530c83ffa85fea0b07766b155b9a9.png)

您还可以**放置光标以选择属性**。使用菜单*编辑*→*重构*→*封装字段...*

*   **其他信息：**

    从 C# 3.0（2007 年 11 月 19 日）开始，我们可以使用[自动实现的属性](https://msdn.microsoft.com/en-us/library/bb384054.aspx)（这只是[语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)）。

    和

    ```
    private int productID;

    public int ProductID
    {
        get { return productID; }
        set { productID = value; }
    } 
    ```

    变成

    ```
    public int ProductID { get; set; } 
    ```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2008-08-06T02:31:37.990

通过生成，您的意思是自动生成吗？如果这不是你的意思：

Visual Studio 2008 对此有最简单的实现：

```
public PropertyType PropertyName { get; set; } 
```

在后台，这会创建一个隐含的实例变量，您的属性将存储和检索到该变量中。

但是，如果您想在属性中添加更多逻辑，则必须为其创建一个实例变量：

```
private PropertyType _property;

public PropertyType PropertyName
{
    get
    {
        //logic here 
        return _property;
    }
    set
    {
        //logic here
        _property = value;
    }
 } 
```

以前版本的 Visual Studio 也总是使用这种速记方法。

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2012-07-17T10:59:35.287

您也可以使用“propfull”并点击`TAB`两次。

将生成带有 get 和 set 的变量和属性。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2019-12-25T23:38:43.047

在 Visual Studio 2019 中，选择您的属性，如下所示：

[![在此处输入图像描述](../Images/7b982178354eee6a4bd34fad561c7f10.png)](https://i.stack.imgur.com/hy6dF.png)

然后按`Ctrl+r` 然后按`Ctrl+e`

将出现一个对话框，显示您的代码将发生的更改的预览。如果一切看起来都不错（大多数情况下会这样），请按`OK`。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-08-06T02:35:37.547

如果您使用的是 Visual Studio 2005 及更高版本，则可以使用 insert snippet 命令快速创建 setter/getter。

右键单击您的代码，单击*Insert Snippet* ( `Ctrl`+ `K`, `X`)，然后从列表中选择“prop”。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-09-28T17:56:15.003

如果您使用的是 ReSharper，请进入 ReSharper 菜单 →*代码*→*生成...*

（或者在周围的类中点击`Alt`+ `Ins`），你会得到所有你能想到的生成 getter 和/或 setter 的选项:-)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-03-25T20:07:19.893

我创建了自己的片段，*只*添加了`{get; set;}`. 我做到了只是因为我发现`prop`→`Tab`很笨重。

```
<?xml version="1.0" encoding="utf-8"?>
<CodeSnippets
    xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
    <CodeSnippet Format="1.0.0">
        <Header>
            <Title>get set</Title>
            <Shortcut>get</Shortcut>
        </Header>
        <Snippet>
            <Code Language="CSharp">
                <![CDATA[{get; set;}]]>
            </Code>
        </Snippet>
    </CodeSnippet>
</CodeSnippets> 
```

有了这个，你手动输入你的 PropType 和 PropName，然后输入`get`→ `Tab`，它会添加 get set。这没什么神奇的，但由于我倾向于先键入访问修饰符，所以我不妨完成名称和类型。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-09-25T03:16:41.553

使用`propfull`关键字。

它将生成一个属性和一个变量。

在编辑器中键入关键字`propfull`，后跟两个`TAB`s。它将生成如下代码：

```
private data_type var_name;

public data_type var_name1{ get;set;} 
```

[视频演示了片段“propfull”](https://www.youtube.com/watch?v=JhxC-K-Eehg&lc=UgyiQqiNVxFQAPQr9jt4AaABAg&t=4m11s)（除其他外）的使用，时间为 4 分 11 秒。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-01-06T22:04:45.530

在 Visual Studio Community Edition 2015 中，您可以选择所需的所有字段，然后按`Ctrl`+`.`自动生成属性。

您必须选择是否要使用属性而不是字段。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-01-12T15:22:47.900

除了“prop”片段和自动属性之外，还有一个重构选项可让您选择现有字段并通过属性公开它（[右键单击字段→*重构*→*封装字段...*](https://stackoverflow.com/questions/3017/how-can-we-generate-getters-and-setters-in-visual-studio/29917170#29917170)）。

此外，如果您不喜欢“prop”实现，您可以创建自己的片段。[此外，像ReSharper](https://en.wikipedia.org/wiki/JetBrains#ReSharper_Ultimate)这样的第三方重构工具将为您提供更多功能，并使创建更高级的片段变得更加容易。如果您负担得起，我会推荐 ReSharper。

*   [http://msdn.microsoft.com/en-us/library/f7d3wz0k(VS.80).aspx](http://msdn.microsoft.com/en-us/library/f7d3wz0k(VS.80).aspx)

*   [演示使用片段“道具”](https://www.youtube.com/watch?v=JhxC-K-Eehg&lc=UgyiQqiNVxFQAPQr9jt4AaABAg&t=2m01s)（除其他外）的视频，时间为 3 分 23 秒。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-08-06T02:24:29.130

我不再在我的机器上安装 Visual Studio（而且我使用的是 Linux），但我确实记得有一个向导隐藏在某个菜单中的某个位置，可以访问类生成器。

使用此向导，您可以定义所有类的详细信息，包括方法和属性。如果我没记错的话，有一个选项可以让 Visual Studio 自动为你创建 setter 和 getter。

我知道这很模糊，但是检查一下，您可能会找到它。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-08-14T12:04:34.523

[![在此处输入图像描述](../Images/4e496e3600140ae31d95d08304cdf81e.png)](https://i.stack.imgur.com/QkVpG.png)

代表 Visual Studio 工具，我们可以使用名为[C# 属性生成器的在线工具轻松生成 C# 属性。](http://www.dotnetqueries.com/csharp-property-generator)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-12-17T08:33:13.000

首先获取 Extension 只需按 ( `Ctrl`+ `Shift`+ `X`) 并安装 getter setter ....

在此之后，只需选择您的变量并右键单击。转到命令面板...

然后输入 getter ... 它会建议生成 get 和 set 方法。点击这个...

* * *

## 回答 #16

> 赞同：-6
> 
> 时间：2017-11-28T04:13:33.437

您只需在 Android Studio 中按`Alt`+即可。`Ins`

声明变量后，您将在生成的代码中获得 getter 和 setter。

# recursion - 什么是递归，我应该什么时候使用它？

> ID：3021
> 
> 赞同：121
> 
> 时间：2008-08-06T02:29:51.210
> 
> 标签：recursion, computer-science

邮件列表和在线讨论中似乎经常出现的主题之一是攻读计算机科学学位的优点（或缺乏）。对于消极一方来说，似乎一次又一次出现的一个论点是，他们已经编码了几年，而且他们从未使用过递归。

所以问题是：

1.  什么是递归？
2.  我什么时候使用递归？
3.  为什么人们不使用递归？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2008-08-06T05:09:44.770

在这个线程中有许多很好的[递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)解释，这个答案是关于为什么你不应该在大多数语言中使用它。*在大多数主要的命令式语言实现中（即 C、C++、Basic、Python 的每个主要实现、Ruby、Java 和 C#)[迭代](http://en.wikipedia.org/wiki/Iteration)比递归更可取。

要了解原因，请浏览上述语言用于调用函数的步骤：

1.  在[堆栈](http://en.wikipedia.org/wiki/Call_stack)上为函数的参数和局部变量开辟空间
2.  函数的参数被复制到这个新空间
3.  控制跳转到函数
4.  ***函数的代码运行***
5.  函数的结果被复制到返回值中
6.  堆栈回绕到其先前的位置
7.  控制跳回到调用函数的地方

完成所有这些步骤需要时间，通常比遍历循环所花费的时间多一点。然而，真正的问题在于步骤#1。当许多程序启动时，它们为其堆栈分配一块内存，当它们用完该内存时（通常，但不总是由于递归），程序由于[堆栈溢出](http://en.wikipedia.org/wiki/Stack_overflow)而崩溃。

因此，在这些语言中，递归速度较慢，并且使您容易崩溃。尽管如此，仍然有一些使用它的论据。通常，一旦您知道如何阅读，递归编写的代码会更短且更优雅。

语言实现者可以使用一种称为[尾调用优化](http://en.wikipedia.org/wiki/Tail_call_optimization)的技术，它可以消除某些类别的堆栈溢出。简而言之：如果一个函数的返回表达式只是一个函数调用的结果，那么你不需要在堆栈上添加一个新的级别，你可以将当前的级别重用于被调用的函数。遗憾的是，很少有命令式语言实现内置了尾调用优化。

**我喜欢递归。 [我最喜欢的静态语言](http://www.haskell.org/)根本不使用循环，递归是重复做某事的唯一方法。我只是不认为递归在没有针对它进行调整的语言中通常不是一个好主意。*

** 顺便说一句，Mario，您的 ArrangeString 函数的典型名称是“join”，如果您选择的语言还没有实现它，我会感到惊讶。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2010-05-04T16:38:20.530

递归的简单英文示例。

```
A child couldn't sleep, so her mother told her a story about a little frog,
    who couldn't sleep, so the frog's mother told her a story about a little bear,
         who couldn't sleep, so the bear's mother told her a story about a little weasel... 
            who fell asleep.
         ...and the little bear fell asleep;
    ...and the little frog fell asleep;
...and the child fell asleep. 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2010-05-04T11:25:33.620

在最基本的计算机科学意义上，递归是一个调用自身的函数。假设您有一个链表结构：

```
struct Node {
    Node* next;
}; 
```

你想知道一个链表有多长，你可以用递归来做到这一点：

```
int length(const Node* list) {
    if (!list->next) {
        return 1;
    } else {
        return 1 + length(list->next);
    }
} 
```

（这当然也可以通过 for 循环来完成，但作为概念的说明很有用）

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2010-05-04T13:33:03.223

每当一个函数调用自己，创建一个循环，那就是递归。与任何事情一样，递归也有好的用途和坏的用途。

最简单的例子是尾递归，函数的最后一行是对自身的调用：

```
int FloorByTen(int num)
{
    if (num % 10 == 0)
        return num;
    else
        return FloorByTen(num-1);
} 
```

然而，这是一个蹩脚的、几乎毫无意义的例子，因为它很容易被更有效的迭代所取代。毕竟，递归受到函数调用开销的影响，在上面的示例中，与函数本身的操作相比，这可能是相当大的。

因此，进行递归而不是迭代的全部原因应该是利用[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)来做一些聪明的事情。例如，如果您在同一个循环中多次使用不同的参数调用一个函数，那么这是一种完成[分支](http://en.wikipedia.org/wiki/Branch_(computer_science))的方法。一个典型的例子是[谢尔宾斯基三角形](http://en.wikipedia.org/wiki/Sierpinski_triangle)。

![在此处输入图像描述](../Images/7486f60287f2fbb901f26ae89b532b77.png)

您可以使用递归非常简单地绘制其中一个，其中调用堆栈在 3 个方向上分支：

```
private void BuildVertices(double x, double y, double len)
{
    if (len > 0.002)
    {
        mesh.Positions.Add(new Point3D(x, y + len, -len));
        mesh.Positions.Add(new Point3D(x - len, y - len, -len));
        mesh.Positions.Add(new Point3D(x + len, y - len, -len));
        len *= 0.5;
        BuildVertices(x, y + len, len);
        BuildVertices(x - len, y - len, len);
        BuildVertices(x + len, y - len, len);
    }
} 
```

如果你尝试用迭代做同样的事情，我想你会发现它需要更多的代码来完成。

其他常见用例可能包括遍历层次结构，例如网站爬虫、目录比较等。

**结论**

实际上，只要您需要迭代分支，递归就最有意义。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2008-08-06T02:54:58.850

递归是一种基于分而治之思维的解决问题的方法。基本思想是你把原始问题分成更小的（更容易解决的）实例，解决那些更小的实例（通常再次使用相同的算法），然后将它们重新组合成最终的解决方案。

典型示例是生成 n 的阶乘的例程。n 的阶乘是通过将 1 和 n 之间的所有数字相乘来计算的。C# 中的迭代解决方案如下所示：

```
public int Fact(int n)
{
  int fact = 1;

  for( int i = 2; i <= n; i++)
  {
    fact = fact * i;
  }

  return fact;
} 
```

迭代解决方案并不令人惊讶，任何熟悉 C# 的人都应该理解它。

通过识别第 n 个阶乘是 n * Fact(n-1) 来找到递归解决方案。或者换一种说法，如果你知道一个特定的阶乘数是什么，你就可以计算下一个阶乘数。这是 C# 中的递归解决方案：

```
public int FactRec(int n)
{
  if( n < 2 )
  {
    return 1;
  }

  return n * FactRec( n - 1 );
} 
```

该函数的第一部分称为**基本案例**（或有时称为保护子句），是防止算法永远运行的原因。每当使用 1 或更小的值调用函数时，它只会返回值 1。第二部分更有趣，被称为**递归步骤**。在这里，我们使用稍微修改的参数调用相同的方法（我们将其减 1），然后将结果与我们的 n 副本相乘。

当第一次遇到这可能会有点令人困惑，因此检查它在运行时的工作原理是有启发性的。假设我们调用 FactRec(5)。我们进入了例程，没有被基本情况所接受，所以我们最终是这样的：

```
// In FactRec(5)
return 5 * FactRec( 5 - 1 );

// which is
return 5 * FactRec(4); 
```

如果我们使用参数 4 重新输入方法，我们再次不会被保护子句停止，因此我们最终会出现：

```
// In FactRec(4)
return 4 * FactRec(3); 
```

如果我们将此返回值替换为上面的返回值，我们得到

```
// In FactRec(5)
return 5 * (4 * FactRec(3)); 
```

这应该为您提供有关如何得出最终解决方案的线索，因此我们将快速跟踪并展示下降过程中的每一步：

```
return 5 * (4 * FactRec(3));
return 5 * (4 * (3 * FactRec(2)));
return 5 * (4 * (3 * (2 * FactRec(1))));
return 5 * (4 * (3 * (2 * (1)))); 
```

当基本情况被触发时，就会发生最终的替换。在这一点上，我们有一个简单的代数公式来求解，它首先直接等同于阶乘的定义。

请注意，对方法的每次调用都会导致触发基本情况或调用参数更接近基本情况的同一方法（通常称为递归调用）。如果不是这种情况，那么该方法将永远运行。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2010-05-04T11:29:21.350

递归是通过调用自身的函数来解决问题。一个很好的例子是阶乘函数。阶乘是一个数学问题，其中 5 的阶乘是 5 * 4 * 3 * 2 * 1。这个函数在 C# 中解决了正整数的这个问题（未经测试 - 可能存在错误）。

```
public int Factorial(int n)
{
    if (n <= 1)
        return 1;

    return n * Factorial(n - 1);
} 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2010-05-04T13:58:17.817

考虑一个[古老的、众所周知的问题](http://en.wikipedia.org/wiki/Greatest_common_divisor)：

> 在数学中，两个或多个非零整数的**最大公约数(gcd) ... 是除以数字而没有余数的最大正整数。**

gcd 的定义非常简单：

![gcd 定义](../Images/03fe84b62e32d1ef1bab731f90f13e0b.png)

其中 mod 是[模运算符](http://en.wikipedia.org/wiki/Modulo_operator)（即整数除法后的余数）。

在英语中，这个定义说任何数字和零的最大公约数是那个数字，两个数字*m*和*n*的最大公约数是*n的最大公约数以及**m*除以*n*后的余数。

如果您想知道为什么会这样，请参阅有关[欧几里得算法](http://en.wikipedia.org/wiki/Euclidean_algorithm)的 Wikipedia 文章。

让我们以 gcd(10, 8) 为例。每一步都等于它之前的一步：

1.  gcd(10, 8)
2.  gcd(10, 10 mod 8)
3.  gcd(8, 2)
4.  gcd(8, 8 模 2)
5.  gcd(2, 0)
6.  2

在第一步中，8 不等于 0，因此适用定义的第二部分。10 mod 8 = 2 因为 8 进入 10 一次，余数为 2。在步骤 3，第二部分再次应用，但这次 8 mod 2 = 0 因为 2 除以 8，没有余数。在第 5 步，第二个参数是 0，所以答案是 2。

您是否注意到 gcd 出现在等号的左侧和右侧？数学家会说这个定义是递归的，因为您定义的表达式在其定义[中重复出现](http://www.google.com/search?sourceid=chrome&ie=UTF-8&q=define:recur)。

递归定义往往是优雅的。例如，列表和的递归定义是

```
sum l =
    if empty(l)
        return 0
    else
        return head(l) + sum(tail(l)) 
```

where`head`是列表中的第一个元素，是列表`tail`的其余部分。请注意，`sum`它最后在其定义中重复出现。

也许您更喜欢列表中的最大值：

```
max l =
    if empty(l)
        error
    elsif length(l) = 1
        return head(l)
    else
        tailmax = max(tail(l))
        if head(l) > tailmax
            return head(l)
        else
            return tailmax 
```

您可以递归地定义非负整数的乘法以将其转换为一系列加法：

```
a * b =
    if b = 0
        return 0
    else
        return a + (a * (b - 1)) 
```

如果关于将乘法转换为一系列加法的那一点没有意义，请尝试扩展一些简单的示例以了解它是如何工作的。

[合并排序](http://en.wikipedia.org/wiki/Merge_sort)有一个可爱的递归定义：

```
sort(l) =
    if empty(l) or length(l) = 1
        return l
    else
        (left,right) = split l
        return merge(sort(left), sort(right)) 
```

如果您知道要查找什么，那么递归定义无处不在。请注意所有这些定义如何具有非常简单的基本情况，*例如*gcd(m, 0) = m。递归案例减少了问题，以得到简单的答案。

有了这个理解，你现在可以欣赏[维基百科关于递归的文章](http://en.wikipedia.org/wiki/Recursion_(computer_science))中的其他算法了！

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2010-05-04T11:26:02.030

递归是指通过解决问题的较小版本然后使用该结果加上一些其他计算来制定原始问题的答案来解决问题的方法。很多时候，在解决较小版本的过程中，该方法会解决问题的较小版本，依此类推，直到达到一个难以解决的“基本情况”。

例如，要计算数字 的阶乘`X`，可以将其表示为`X times the factorial of X-1`。因此，该方法“递归”以找到 的阶乘`X-1`，然后乘以它得到的任何结果`X`以给出最终答案。当然，要找到 的阶乘`X-1`，首先要计算 的阶乘`X-2`，以此类推。基本情况是何时为 0 或 1，在这种情况下，它知道从`X`开始返回。`1``0! = 1! = 1`

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2008-08-06T02:35:07.437

1.  调用自身的函数
2.  当一个函数可以（很容易）分解成一个简单的操作加上在问题的某个较小部分上的相同函数时。相反，我应该说，这使它成为递归的一个很好的候选者。
3.  他们是这样！

典型的例子是阶乘，它看起来像：

```
int fact(int a) 
{
  if(a==1)
    return 1;

  return a*fact(a-1);
} 
```

一般来说，递归不一定很快（函数调用开销往往很高，因为递归函数往往很小，见上文）并且可能会遇到一些问题（堆栈溢出任何人？）。有人说他们往往很难在非平凡的情况下得到“正确”，但我并不真正相信这一点。在某些情况下，递归最有意义，并且是编写特定函数的最优雅和最清晰的方式。应该注意的是，某些语言更喜欢递归解决方案并对其进行更多优化（想到 LISP）。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2008-08-06T02:44:53.317

递归函数是调用自身的函数。我发现使用它的最常见原因是遍历树结构。例如，如果我有一个带有复选框的 TreeView（考虑安装一个新程序，“选择要安装的功能”页面），我可能想要一个“检查所有”按钮，它会是这样的（伪代码）：

```
function cmdCheckAllClick {
    checkRecursively(TreeView1.RootNode);
}

function checkRecursively(Node n) {
    n.Checked = True;
    foreach ( n.Children as child ) {
        checkRecursively(child);
    }
} 
```

所以你可以看到 checkRecursively 首先检查它传递的节点，然后为该节点的每个子节点调用自身。

你确实需要小心递归。如果你进入一个无限递归循环，你会得到一个 Stack Overflow 异常 :)

我想不出人们在适当的时候不应该使用它的理由。它在某些情况下很有用，而在其他情况下则不然。

我认为因为它是一种有趣的技术，一些编码人员最终可能会比他们应该更频繁地使用它，而没有真正的理由。这在某些圈子中给递归起了一个坏名声。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2010-05-04T11:56:43.173

递归是直接或间接引用自身的表达式。

考虑递归首字母缩写词作为一个简单的例子：

*   **GNU**代表**GNU's Not Unix**
*   **PHP**代表**PHP：超文本预处理器**
*   **YAML**代表**YAML 不是标记语言**
*   **WINE**代表**Wine Is Not an Emulator**
*   **VISA**代表**签证国际服务协会**

[维基百科上的更多示例](http://en.wikipedia.org/wiki/Recursive_acronym)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2008-08-06T03:12:15.507

递归最适用于我喜欢称之为“分形问题”的问题，在这种情况下，您正在处理由该大事物的较小版本组成的大事物，每个大事物都是该事物的更小版本，依此类推。如果您必须遍历或搜索诸如树或嵌套的相同结构之类的东西，那么您遇到的问题可能是递归的一个很好的候选者。

人们避免递归的原因有很多：

1.  与函数式编程相反，大多数人（包括我自己）都在过程或面向对象编程方面切身。对于这些人来说，迭代方法（通常使用循环）感觉更自然。

2.  我们这些在过程或面向对象编程方面磨练编程的人经常被告知要避免递归，因为它容易出错。

3.  我们经常被告知递归很慢。重复调用和从例程返回涉及大量的堆栈推送和弹出，这比循环慢。我认为有些语言比其他语言处理得更好，而且这些语言很可能不是那些主要范式是过程或面向对象的语言。

4.  对于我使用过的至少几种编程语言，我记得听到过一些建议，如果递归超过了一定深度，就不要使用它，因为它的堆栈不是那么深。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2008-08-06T03:12:38.190

这是一个简单的例子：一个集合中有多少个元素。（有更好的方法来计算事物，但这是一个很好的简单递归示例。）

首先，我们需要两条规则：

1.  如果集合为空，则集合中的项目数为零（呃！）。
2.  如果集合不为空，则计数为一加上删除一项后集合中的项目数。

假设你有一个这样的集合：[xxx]。让我们数一数有多少项目。

1.  集合是非空的[xxx]，所以我们应用规则2。项目数是[xx] 中的项目数加1（即我们删除了一个项目）。
2.  集合是 [xx]，所以我们再次应用规则 2：1 + [x] 中的项目数。
3.  集合是 [x]，它仍然匹配规则 2：1 + [] 中的项目数。
4.  现在集合是 []，它符合规则 1：计数为零！
5.  现在我们知道步骤 4 (0) 的答案，我们可以解决步骤 3 (1 + 0)
6.  同样，现在我们知道步骤 3 (1) 中的答案，我们可以解决步骤 2 (1 + 1)
7.  最后，现在我们知道步骤 2 (2) 中的答案，我们可以解决步骤 1 (1 + 2) 并获得 [xxx] 中的项目数，即 3。万岁！

我们可以将其表示为：

```
count of [x x x] = 1 + count of [x x]
                 = 1 + (1 + count of [x])
                 = 1 + (1 + (1 + count of []))
                 = 1 + (1 + (1 + 0)))
                 = 1 + (1 + (1))
                 = 1 + (2)
                 = 3 
```

应用递归解决方案时，通常至少有 2 条规则：

*   基础，一个简单的案例，它说明了当您“用完”所有数据时会发生什么。这通常是“如果您没有要处理的数据，您的答案是 X”的一些变体
*   递归规则，它说明如果您仍然有数据会发生什么。这通常是某种规则，它说“做一些事情来缩小你的数据集，并将你的规则重新应用到更小的数据集”。

如果我们将上面的内容翻译成伪代码，我们会得到：

```
numberOfItems(set)
    if set is empty
        return 0
    else
        remove 1 item from set
        return 1 + numberOfItems(set) 
```

还有更多有用的示例（例如，遍历一棵树），我相信其他人会介绍这些示例。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2010-05-04T13:30:28.267

**递归语句是您将下一步要做什么的过程定义为输入和您已经完成的组合的语句。**

例如，采用阶乘：

```
factorial(6) = 6*5*4*3*2*1 
```

但很容易看出 factorial(6) 也是：

```
6 * factorial(5) = 6*(5*4*3*2*1). 
```

所以一般来说：

```
factorial(n) = n*factorial(n-1) 
```

当然，递归的棘手之处在于，如果您想根据已经完成的内容来定义事物，则需要从某个地方开始。

在这个例子中，我们只是通过定义 factorial(1) = 1 来做一个特例。

现在我们从下往上看：

```
factorial(6) = 6*factorial(5)
                   = 6*5*factorial(4)
                   = 6*5*4*factorial(3) = 6*5*4*3*factorial(2) = 6*5*4*3*2*factorial(1) = 6*5*4*3*2*1 
```

由于我们定义了 factorial(1) = 1，我们到达了“底部”。

一般来说，递归过程有两个部分：

1）递归部分，它根据新输入定义一些过程，并结合您通过相同过程“已经完成”的内容。（即`factorial(n) = n*factorial(n-1)`）

2）一个基础部分，通过给它一些开始的地方来确保该过程不会永远重复（即`factorial(1) = 1`）

一开始你的头脑可能会有点混乱，但只要看看一堆例子，它们就应该融合在一起。如果您想更深入地理解这个概念，请学习数学归纳法。另外，请注意，某些语言针对递归调用进行了优化，而其他语言则没有。如果您不小心，很容易制作出异常缓慢的递归函数，但是在大多数情况下，也有一些技巧可以使它们具有高性能。

希望这可以帮助...

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2010-05-04T11:29:17.373

我喜欢这个定义：
在递归中，例程自己解决问题的一小部分，将问题分成更小的部分，然后调用自身来解决每个更小的部分。

我也喜欢 Steve McConnells 在 Code Complete 中对递归的讨论，他批评了计算机科学书籍中关于递归的示例。

> ### 不要对阶乘或斐波那契数使用递归
> 
> 计算机科学教科书的一个问题是它们提供了愚蠢的递归示例。典型的例子是计算阶乘或计算斐波那契数列。递归是一个强大的工具，在这两种情况下使用它真的很愚蠢。如果为我工作的程序员使用递归来计算阶乘，我会雇用其他人。

我认为这是一个非常有趣的观点，并且可能是递归经常被误解的原因。

编辑：这不是对 Dav 的回答的挖掘——当我发布这个时我没有看到那个回复

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2014-03-11T09:47:20.470

1.) 一个方法是递归的，如果它可以调用自己；直接：

```
void f() {
   ... f() ... 
} 
```

或间接地：

```
void f() {
    ... g() ...
}

void g() {
   ... f() ...
} 
```

2.) 何时使用递归

```
Q: Does using recursion usually make your code faster? 
A: No.
Q: Does using recursion usually use less memory? 
A: No.
Q: Then why use recursion? 
A: It sometimes makes your code much simpler! 
```

3.) 人们只有在编写迭代代码非常复杂时才使用递归。例如，像前序、后序这样的树遍历技术可以迭代和递归。但通常我们使用递归，因为它很简单。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2010-05-04T13:34:56.237

一个例子：一个楼梯的递归定义是：一个楼梯包括： - 一个台阶和一个楼梯（递归） - 或只有一个台阶（终止）

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2010-05-04T11:27:09.717

嗯，这是一个相当不错的定义。维基百科也有很好的定义。所以我会为你添加另一个（可能更糟的）定义。

当人们提到“递归”时，他们通常是在谈论他们编写的一个函数，该函数反复调用自身，直到完成它的工作。遍历数据结构中的层次结构时，递归会很有帮助。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2010-05-04T16:46:56.280

递归函数是一个包含对自身的调用的函数。递归结构是包含自身实例的结构。您可以将两者组合为一个递归类。递归项的关键部分是它包含自身的实例/调用。

考虑两个彼此面对的镜子。我们已经看到了它们所产生的简洁的无限效应。每个反射都是镜子的一个实例，它包含在镜子的另一个实例中，等等。包含自身反射的镜子是递归的。

[二叉搜索树](http://en.wikipedia.org/wiki/Binary_search_tree)是递归的一个很好的编程示例。该结构是递归的，每个节点包含一个节点的 2 个实例。在二叉搜索树上工作的函数也是递归的。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2008-08-06T03:32:35.730

对已解决的问题进行递归：什么都不做，你就完成了。
递归一个未解决的问题：执行下一步，然后递归其余的。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2014-08-30T10:09:20.510

这是一个老问题，但我想从逻辑的角度添加一个答案（即不是从算法正确性的角度或性能的角度）。

我使用 Java 工作，Java 不支持嵌套函数。因此，如果我想做递归，我可能必须定义一个外部函数（它的存在只是因为我的代码违反了 Java 的官僚规则），或者我可能不得不完全重构代码（我真的很讨厌这样做）。

因此，我经常避免递归，而是使用堆栈操作，因为递归本身本质上是一个堆栈操作。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2010-05-04T13:09:33.857

用简单的英语：假设你可以做 3 件事：

1.  拿一个苹果
2.  写下计数标记
3.  计数计数标记

**你面前的桌子上有很多苹果，你想知道有多少苹果。**

```
start
  Is the table empty?
  yes: Count the tally marks and cheer like it's your birthday!
  no:  Take 1 apple and put it aside
       Write down a tally mark
       goto start 
```

重复同一件事直到完成的过程称为递归。

我希望这是您正在寻找的“简单的英语”答案！

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2010-05-04T13:59:55.677

函数调用自己或使用自己的定义。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2008-08-21T13:18:19.180

你想在任何时候使用它，只要你有一个树形结构。它在读取 XML 时非常有用。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2010-05-04T16:04:40.107

递归是指您有一个使用自身的操作。它可能会有一个停止点，否则它将永远持续下去。

假设您想在字典中查找一个单词。您可以使用称为“查找”的操作。

你的朋友说“我现在真的可以舀一些布丁！” 你不知道他是什么意思，所以你在字典里查了“勺子”，它的内容是这样的：

勺子：名词——末端有圆勺的器具。勺子：动词 - 在某物上使用勺子 勺子：动词 - 从背后紧紧拥抱

现在，由于您的英语真的不好，这为您指明了正确的方向，但您需要更多信息。所以你选择“器物”和“拥抱”来查找更多信息。

拥抱：动词-依偎器具：名词-工具，通常是餐具

嘿！你知道什么是依偎，它与布丁无关。你也知道布丁是你吃的东西，所以现在说得通了。你的朋友一定想用勺子吃布丁。

好的，好的，这是一个非常蹩脚的例子，但它说明了（可能很糟糕）递归的两个主要部分。1）它使用自己。在这个例子中，在你理解一个词之前，你并没有真正有意义地查找一个词，这可能意味着要查找更多的词。这将我们带到第二点，2）它停在某个地方。它必须有某种基本情况。否则，您最终只会查找字典中的每个单词，这可能不太有用。我们的基本情况是，您获得了足够的信息，以便在您之前做过和不了解的事情之间建立联系。

给出的传统示例是阶乘，其中 5 阶乘是 1*2*3*4*5（即 120）。基本情况为 0（或 1，取决于）。因此，对于任何整数 n，您执行以下操作

n 等于 0 吗？否则返回 1，返回 n *（n-1 的阶乘）

让我们以 4 为例（我们提前知道是 1*2*3*4 = 24）。

4的阶乘……是0吗？不，所以它必须是 3 的 4 * 阶乘，但 3 的阶乘是什么？它是 3 * 2 的阶乘 2 的阶乘是 2 * 1 的阶乘 1 的阶乘是 1 * 0 的阶乘，我们知道 0 的阶乘！:-D 它是 1，即定义 1 的阶乘是 1 * 0 的阶乘，即 1... 所以 1*1 = 2 的 1 阶乘是 2 * 1 的阶乘，即 1... 所以 2* 1 = 3 的 2 阶乘是 3 * 2 的阶乘，即 2... 所以 3*2 = 4 的 6 阶乘（终于！！）是 4 * 3 的阶乘，即 6... 4*6 是24

阶乘是“基本案例，并使用自身”的简单案例。

现在，请注意，我们一直在处理 4 的阶乘……如果我们想要 100 的阶乘，我们必须一直降到 0……这可能会有很多开销。以同样的方式，如果我们在字典中查找一个晦涩的单词，可能需要查找其他单词并扫描上下文线索，直到找到我们熟悉的连接。递归方法可能需要很长时间才能完成。但是，如果正确使用并理解它们，它们可以使复杂的工作变得异常简单。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2010-05-04T16:10:15.793

递归的最简单定义是“自引用”。引用自身（即调用自身）的函数是递归的。要记住的最重要的事情是，递归函数必须具有“基本情况”，即如果为真则使其不调用自身并因此终止递归的条件。否则你将有无限递归：

[递归 http://cart.kolix.de/wp-content/uploads/2009/12/infinite-recursion.jpg](http://cart.kolix.de/wp-content/uploads/2009/12/infinite-recursion.jpg)

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2010-05-04T12:42:48.490

递归是方法调用自身以执行特定任务的过程。它减少了代码的冗余。大多数递归函数或方法必须有一个条件来中断递归调用，即在满足条件时阻止它调用自身——这可以防止创建无限循环。并非所有函数都适合递归使用。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2010-05-04T14:14:42.047

计算中的递归是一种用于计算从单个函数（方法、过程或块）调用正常返回后的结果或副作用的技术。

根据定义，递归函数必须能够根据退出条件或未满足的条件直接或间接（通过其他函数）调用自身。如果满足退出条件，则特定调用将返回给它的调用者。这一直持续到从返回初始调用，此时所需的结果或副作用将可用。

例如，这是一个在 Scala 中执行 Quicksort 算法的函数（[从 Scala 的 Wikipedia 条目复制](http://en.wikipedia.org/wiki/Scala_%28programming_language%29)）

```
def qsort: List[Int] => List[Int] = {
  case Nil => Nil
  case pivot :: tail =>
    val (smaller, rest) = tail.partition(_ < pivot)
    qsort(smaller) ::: pivot :: qsort(rest)
} 
```

在这种情况下，退出条件是一个空列表。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2010-05-04T12:48:44.663

在简单的英语中，递归意味着一次又一次地重复某些事情。

在编程中，一个例子是调用自身内部的函数。

请看以下计算数字阶乘的示例：

```
public int fact(int n)
{
    if (n==0) return 1;
    else return n*fact(n-1)
} 
```

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2010-05-04T12:50:05.383

嘿，对不起，如果我的意见同意某人，我只是想用简单的英语解释递归。

假设您有三位经理——杰克、约翰和摩根。Jack 管理 2 个程序员，John - 3 和 Morgan - 5。你将给每个经理 300 美元，并且想知道它会花多少钱。答案很明显——但如果摩根的 2 名员工也是经理呢？

递归来了。您从层次结构的顶部开始。夏季费用为 0 美元。你从杰克开始，然后检查他是否有任何经理作为员工。如果您发现其中任何一个，请检查他们是否有任何经理作为员工等等。每次找到经理时，夏季费用都会增加 300 美元。当你和杰克谈完后，去找约翰，他的员工，然后去找摩根。

你永远不会知道，在得到答案之前你会经历多少周期，尽管你知道你有多少经理以及你可以花费多少预算。

递归是一棵树，有枝有叶，分别称为父母和孩子。当您使用递归算法时，您或多或少有意识地从数据中构建一棵树。

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2010-05-04T11:25:53.683

应用于编程的递归基本上是从其自己的定义（自身内部）中调用一个函数，使用不同的参数来完成一项任务。

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2010-05-04T15:29:26.027

很多问题可以分为两种类型：

1.  基本案例，这是您可以通过查看它们来解决的基本问题，以及
2.  递归案例，从较小的部分（基本或其他）构建一个更大的问题。

那么什么是递归函数呢？好吧，这就是您拥有直接或间接根据自身定义的功能的地方。好吧，这听起来很荒谬，直到您意识到它对上述类型的问题是明智的：您直接解决基本情况并通过使用递归调用来处理递归情况，以解决嵌入其中的较小问题。

需要递归（或闻起来很像的东西）的真正经典示例是在处理一棵树时。树的叶子是基本情况，分支是递归情况。（在伪 C 中。）

```
struct Tree {
    int leaf;
    Tree *leftBranch;
    Tree *rightBranch;
}; 
```

打印出来的最简单的方法是使用递归：

```
function printTreeInOrder(Tree *tree) {
    if (tree->leftBranch) {
        printTreeInOrder(tree->leftBranch);
    }
    print(tree->leaf);
    if (tree->rightBranch) {
        printTreeInOrder(tree->rightBranch);
    }
} 
```

很容易看出这会奏效，因为它非常清晰。（非递归等价物要复杂得多，需要一个内部堆栈结构来管理要处理的事物列表。）当然，假设没有人完成循环连接。

在数学上，证明递归被驯服的诀窍是专注于找到参数大小的度量。对于我们的树示例，最简单的度量是当前节点下方树的最大深度。在叶子上，它是零。在一个只有叶子下面的分支上，它是一个，等等。然后你可以简单地表明，为了处理树，调用函数的参数的大小有严格的顺序；在度量的意义上，递归调用的参数总是比整体调用的参数“小”。使用严格递减的基数指标，您已排序。

无限递归也是可能的。这很混乱，而且在许多语言中都无法工作，因为堆栈爆炸了。（在它起作用的地方，语言引擎必须确定该函数以某种方式不会返回，因此能够优化堆栈的保留。一般来说是棘手的东西；尾递归只是最简单的方法.)

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2010-05-04T13:53:14.483

如果基本上由一个 switch 语句组成，并且每个数据类型的 case 都有一个 case，那么任何算法都表现出对数据类型的*结构递归。*

例如，当你在处理一个类型时

```
 tree = null 
       | leaf(value:integer) 
       | node(left: tree, right:tree) 
```

结构递归算法将具有以下形式

```
 function computeSomething(x : tree) =
   if x is null: base case
   if x is leaf: do something with x.value
   if x is node: do something with x.left,
                 do something with x.right,
                 combine the results 
```

这确实是编写适用于数据结构的任何算法的最明显方法。

现在，当您查看使用 Peano 公理定义的整数（嗯，自然数）时

```
 integer = 0 | succ(integer) 
```

你看到整数的结构递归算法看起来像这样

```
 function computeSomething(x : integer) =
   if x is 0 : base case
   if x is succ(prev) : do something with prev 
```

众所周知的阶乘函数是这种形式最简单的例子。

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2010-05-04T11:54:34.753

*“如果我有一把锤子，让一切看起来都像钉子。”*

递归是解决*大*问题的一种策略，每一步都只是“把两件小事变成一件大事”，每次都用同一个锤子。

## 例子

假设你的办公桌上堆满了 1024 份杂乱无章的文件。你如何使用递归从乱七八糟的文件中制作出整齐、干净的一摞文件？

1.  **划分：**将所有纸张展开，因此每个“堆栈”中只有一张。
2.  **征服：**
    2.  四处走动，将每张纸放在另一张纸上。你现在有 2 个堆栈。
    3.  四处走动，将每个 2 堆放在另一个 2 堆的顶部。你现在有 4 个堆栈。
    4.  四处走动，将每个 4 堆放在另一个 4 堆的顶部。你现在有 8 个堆栈。
    5.  ... 不断...
    6.  您现在有一大叠 1024 张纸！

请注意，这非常直观，除了计算所有内容（这不是绝对必要的）。实际上，您可能不会一直到 1 页堆栈，但您可以并且它仍然可以工作。重要的部分是锤子：用你的手臂，你总是可以将一个堆栈放在另一个之上以形成更大的堆栈，并且（在合理范围内）任何一个堆栈有多大都无关紧要。

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2010-05-04T15:22:16.847

递归是根据自身定义函数、集合或算法的技术。

例如

```
n! = n(n-1)(n-2)(n-3)...........*3*2*1 
```

现在它可以递归定义为：-

```
n! = n(n-1)!   for n>=1 
```

在编程术语中，当一个函数或方法重复调用自己，直到满足某个特定条件时，这个过程称为递归。但必须有终止条件，函数或方法不能进入无限循环。

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2010-05-04T12:02:28.687

它是一种无限期地反复做事的方法，以便使用每个选项。

例如，如果您想获取 html 页面上的所有链接，您将需要递归，因为当您获取第 1 页上的所有链接时，您将希望获取第一页上找到的每个链接上的所有链接。然后对于指向新页面的每个链接，您将需要这些链接等等......换句话说，它是一个从自身内部调用自身的函数。

当您这样做时，您需要一种方法来知道何时停止，否则您将处于无限循环中，因此您向函数添加一个整数参数以跟踪循环数。

在 c# 中你会得到这样的东西：

```
private void findlinks(string URL, int reccursiveCycleNumb)    {
   if (reccursiveCycleNumb == 0)
        {
            return;
        }

        //recursive action here
        foreach (LinkItem i in LinkFinder.Find(URL))
        {
            //see what links are being caught...
            lblResults.Text += i.Href + "<BR>";

            findlinks(i.Href, reccursiveCycleNumb - 1);
        }

        reccursiveCycleNumb -= reccursiveCycleNumb;
} 
```

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2008-08-21T13:39:47.037

实际上，阶乘的更好递归解决方案应该是：

```
int factorial_accumulate(int n, int accum) {
    return (n < 2 ? accum : factorial_accumulate(n - 1, n * accum));
}

int factorial(int n) {
    return factorial_accumulate(n, 1);
} 
```

因为这个版本是[尾递归的](http://en.wikipedia.org/wiki/Tail_recursion)

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2008-08-06T03:00:16.547

我创建了一个递归函数来连接字符串列表和它们之间的分隔符。我主要使用它来创建 SQL 表达式，通过将字段列表作为“*项目*”和“*逗号+空格*”作为分隔符传递。这是函数（它使用一些 Borland Builder 本地数据类型，但可以适应任何其他环境）：

```
String ArrangeString(TStringList* items, int position, String separator)
{
  String result;

  result = items->Strings[position];

  if (position <= items->Count)
    result += separator + ArrangeString(items, position + 1, separator);

  return result;
} 
```

我这样称呼它：

```
String columnsList;
columnsList = ArrangeString(columns, 0, ", "); 
```

*假设您有一个名为“ fields* ”的数组，其中包含以下数据：“ *albumName* ”、 “ *releaseDate* ”、“ *labelId* ”。然后调用函数：

```
ArrangeString(fields, 0, ", "); 
```

随着函数开始工作，变量' *result* '接收到数组位置0的值，即' *albumName* '。

然后它检查它正在处​​理的位置是否是最后一个。如果不是，那么它将结果与分隔符和函数的结果连接起来，哦，上帝，这就是同一个函数。但是这一次，检查一下，它称自己在位置上加 1。

```
ArrangeString(fields, 1, ", "); 
```

它不断重复，创建一个 LIFO 堆，直到它到达正在处理的位置是最后一个位置的点，因此该函数仅返回列表中该位置上的项目，不再连接。然后将堆向后连接。

知道了？如果你不这样做，我有另一种方式来解释它。:o)

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2008-08-06T03:13:35.817

我使用递归。这与拥有计算机科学学位有什么关系......（顺便说一句，我没有）

我发现的常见用途：

1.  **站点地图**- 从文档根目录开始通过文件系统递归
2.  **蜘蛛**- 爬过网站以查找电子邮件地址、链接等。
3.  ?

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2008-08-06T03:19:31.920

马里奥，我不明白你为什么在那个例子中使用递归。为什么不简单地遍历每个条目？像这样的东西：

```
String ArrangeString(TStringList* items, String separator)
{
    String result = items->Strings[0];

    for (int position=1; position < items->count; position++) {
        result += separator + items->Strings[position];
    }

    return result;
} 
```

上述方法会更快，也更简单。无需使用递归来代替简单的循环。我认为这些例子就是为什么递归会受到不好的批评。即使是典型的阶乘函数示例也可以通过循环更好地实现。

# security - Web 表单是否有不显眼的验证码？

> ID：3027
> 
> 赞同：21
> 
> 时间：2008-08-06T02:36:23.160
> 
> 标签：security, usability, captcha

什么是 Web 表单最好的不显眼的 CAPTCHA？一个不涉及 UI，而是非 UI 图灵测试。我见过一个简单的非 UI 验证码示例，例如 Microsoft 的[Nobot](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/NoBot/NoBot.aspx) 控件。我正在寻找一种不会以任何形式向用户询问任何问题的验证码。没有谜语，没有这个图像中的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-06T09:09:22.620

试试wp 的[akismet](http://akismet.com/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-06T03:19:56.147

我认为您可能是在暗指“隐形”验证码。查看 Subkismet 项目以了解不可见的验证码实现。

[http://www.codeplex.com/subkismet](http://www.codeplex.com/subkismet)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-06T09:14:18.770

我想问用户简单的问题，例如：

“狗有几条腿？”

将比目前任何 CAPTCHA 系统更有效。计算机不仅很难回答这个问题，而且**人类很容易回答**！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T10:02:50.060

[Eric Meyer](http://meyerweb.com)实现了一个与 WordPress 插件非常相似的东西，称为[WP-GateKeeper](http://meyerweb.com/eric/tools/wordpress/wp-gatekeeper.html)，它会询问人类可读的问题，例如“橙色是什么颜色？”。不过，他确实在提出一些非英语母语人士能够简单回答的问题方面遇到了一些问题。

[他的博客](http://meyerweb.com)上有几篇关于它的文章。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-06T11:19:28.083

@KP

在您更新原始问题后，您唯一可用的真正选择是在客户端上用 Javascript 做一些小游戏。唯一的问题是为非 JavaScript 启用的客户端提供优雅的降级。

例如，您可以添加一些 AJAX-y 优点，它读取隐藏的表单字段值，从服务器请求验证密钥，并将其与响应一起发送回，但如果 javascript 被阻止/禁用，则永远不会填充。您总是可以实现一个更传统的验证码类型接口，该接口可以被 javascript 禁用，并且如果脚本化字段被填写，则被服务器忽略......

不过，这取决于你想走多远。祝你好运

# perl - 遍历 Perl 哈希键的最安全方法是什么？

> ID：3033
> 
> 赞同：111
> 
> 时间：2008-08-06T02:53:13.033
> 
> 标签：perl, hash, iteration, each

如果我有一个带有一堆（键，值）对的 Perl 哈希，那么遍历所有键的首选方法是什么？我听说使用`each`可能会以某种方式产生意想不到的副作用。那么，这是真的吗，以下两种方法之一是最好的，还是有更好的方法？

```
# Method 1
while (my ($key, $value) = each(%hash)) {
    # Something
}

# Method 2
foreach my $key (keys(%hash)) {
    # Something
} 
```

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2008-08-06T13:22:14.620

经验法则是使用最适合您需要的功能。

如果您只想要键并且不打算*读取*任何值，请使用键（）：

```
foreach my $key (keys %hash) { ... } 
```

如果您只想要这些值，请使用 values()：

```
foreach my $val (values %hash) { ... } 
```

如果您需要键*和*值，请使用 each()：

```
keys %hash; # reset the internal iterator so a prior each() doesn't affect the loop
while(my($k, $v) = each %hash) { ... } 
```

如果您打算以任何方式更改散列的键，*除了*在迭代期间删除当前键，那么您不能使用 each()。例如，使用 keys() 创建一组新的具有双倍值的大写键的代码可以正常工作：

```
%h = (a => 1, b => 2);

foreach my $k (keys %h)
{
  $h{uc $k} = $h{$k} * 2;
} 
```

产生预期的结果哈希：

```
(a => 1, A => 2, b => 2, B => 4) 
```

但是使用 each() 来做同样的事情：

```
%h = (a => 1, b => 2);

keys %h;
while(my($k, $v) = each %h)
{
  $h{uc $k} = $h{$k} * 2; # BAD IDEA!
} 
```

以难以预测的方式产生不正确的结果。例如：

```
(a => 1, A => 2, b => 2, B => 8) 
```

但是，这是安全的：

```
keys %h;
while(my($k, $v) = each %h)
{
  if(...)
  {
    delete $h{$k}; # This is safe
  }
} 
```

所有这些都在 perl 文档中进行了描述：

```
% perldoc -f keys
% perldoc -f each 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-09-15T23:37:14.490

使用时您应该注意的一件事**`each`**是它具有将“状态”添加到散列的副作用（散列必须记住“下一个”键是什么）。当使用上面发布的代码片段时，它会一次性遍历整个哈希，这通常不是问题。`each`但是，当您在处理所有键之前与语句一起使用 `last`或`return`退出`while ... each`循环时，您将遇到难以追踪的问题（我是根据经验说的；） 。

在这种情况下，散列会记住它已经返回了哪些键，并且当您`each`下次使用它时（可能是在完全不相关的一段代码中），它会在这个位置继续。

例子：

```
my %hash = ( foo => 1, bar => 2, baz => 3, quux => 4 );

# find key 'baz'
while ( my ($k, $v) = each %hash ) {
    print "found key $k\n";
    last if $k eq 'baz'; # found it!
}

# later ...

print "the hash contains:\n";

# iterate over all keys:
while ( my ($k, $v) = each %hash ) {
    print "$k => $v\n";
} 
```

这打印：

```
found key bar
found key baz
the hash contains:
quux => 4
foo => 1 
```

键 "bar" 和 baz" 发生了什么事？它们仍然存在，但是第二个`each`从第一个停止的地方开始，并在到达散列末尾时停止，所以我们在第二个循环中永远看不到它们。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2008-09-16T14:35:43.583

可能导致您出现问题的地方`each`是它是一个真正的、非作用域的迭代器。例如：

```
while ( my ($key,$val) = each %a_hash ) {
    print "$key => $val\n";
    last if $val; #exits loop when $val is true
}

# but "each" hasn't reset!!
while ( my ($key,$val) = each %a_hash ) {
    # continues where the last loop left off
    print "$key => $val\n";
} 
```

如果您需要确保`each`获取所有键和值，则需要确保首先使用`keys`或`values`（因为这会重置迭代器）。请参阅[每个](http://perldoc.perl.org/functions/each.html).

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-09-11T22:04:22.110

使用 each 语法将防止一次生成整个密钥集。如果您使用绑定散列到具有数百万行的数据库，这可能很重要。您不想一次生成整个密钥列表并耗尽您的物理内存。在这种情况下，每个都用作迭代器，而键实际上在循环开始之前生成整个数组。

因此，“每个”真正有用的唯一地方是当哈希非常大时（与可用内存相比）。只有当哈希本身并不存在于内存中时，才会发生这种情况，除非您正在对手持数据收集设备或内存小的东西进行编程。

如果内存不是问题，通常地图或键范式是更流行且更易于阅读的范式。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-15T21:36:12.300

关于这个主题的一些其他想法：

1.  任何哈希迭代器本身都没有不安全的地方。不安全的是在您迭代散列时修改它的键。（修改值是完全安全的。）我能想到的唯一潜在副作用是`values`返回别名，这意味着修改它们将修改散列的内容。这是设计使然，但在某些情况下可能不是您想要的。
2.  John[接受的答案](https://stackoverflow.com/questions/3033/safest-way-to-iterate-through-the-keys-of-a-perl-hash#3360)很好，但有一个例外：文档很清楚，在迭代哈希时添加键是不安全的。它可能适用于某些数据集，但对于其他数据集会失败，具体取决于哈希顺序。
3.  如前所述，删除返回的最后一个键是安全的`each`。这是*不*正确的，`keys`因为`each`它是一个迭代器，而`keys`返回一个列表。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-06T03:43:58.563

我可能会被这个咬伤，但我认为这是个人喜好。我在文档中找不到任何对 each() 与 keys() 或 values() 不同的引用（除了明显的“它们返回不同的东西”答案。事实上，文档声明使用相同的迭代器，它们都是返回实际的列表值而不是它们的副本，并且在使用任何调用对其进行迭代时修改散列是不好的。

话虽如此，我几乎总是使用 keys() 因为对我来说，通过哈希本身访问密钥的值通常更自我记录。当值是对大型结构的引用并且散列的键已经存储在结构中时，我偶尔会使用 values()，此时键是多余的，我不需要它。我想我在 10 年的 Perl 编程中使用了 each() 2 次，这两次都可能是错误的选择 =)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-08-06T04:04:16.353

我也总是使用方法2。使用 each 的唯一好处是，如果您只是读取（而不是重新分配）散列条目的值，则不会经常取消引用散列。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-08-22T15:31:20.770

我通常使用`keys`，但我想不起我上次使用或阅读使用`each`.

不要忘记`map`，这取决于您在循环中所做的事情！

```
map { print "$_ => $hash{$_}\n" } keys %hash; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2010-12-20T12:46:21.640

我想说：

1.  使用对大多数人来说最容易阅读/理解的东西（我认为通常是键）
2.  在整个代码库中始终使用您决定的任何内容。

这有两个主要优点：

1.  更容易发现“通用”代码，因此您可以重新考虑函数/方法。
2.  未来的开发者更容易维护。

我不认为在每个上使用键更昂贵，因此不需要在代码中为同一事物使用两种不同的构造。

# office-2007 - 链接两个 Office 文档

> ID：3045
> 
> 赞同：14
> 
> 时间：2008-08-06T03:14:59.933
> 
> 标签：office-2007, office-2003

**问题：**

我有两个电子表格，每个都有不同的用途，但包含一个特定的数据，这两个电子表格需要相同。这条数据（其中一列）在电子表格 A 中更新，但也需要在电子表格 B 中更新。

**目标：**

一种以某种方式将这两个电子表格链接在一起的解决方案（请记住，它们存在于网络上的两个单独的 LAN 共享中），以便在更新 A 时，自动更新 B 以获取相应的记录。

*请注意，我完全理解数据库可能是完成此类任务的更好计划，但不幸的是我在这件事上没有发言权。

**另请注意，这需要适用于 Office 2003 和 Office 2007

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-06T03:25:25.917

所以你的意思是电子表格B上的AD743必须等于电子表格A上的AD743？试试这个：

*   在同一台机器上打开两个电子表格。
*   转到电子表格 B 上的 AD743。
*   类型 =。
*   转到电子表格 A 并单击 AD743。
*   按回车。

您会注意到该公式类似于“ *[path-to-file+file-name].worksheet-name!AD743* ”。

电子表格 B 上的值将在您打开时更新。实际上，它会询问您是否要更新。当然，您的连接必须启动并运行才能更新。此外，您不能更改电子表格 A 的名称或路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-06T22:17:06.290

在不知道您的用例细节的情况下，我不能说这是否是矫枉过正，但考虑创建一个电子表格 C 来保存两者之间共有的所有数据。随着电子表格的老化，链接可能会变得令人眼花缭乱，拥有共享数据源可能有助于消除混乱。

也许更“企业化”的概念是仅粘贴所有本来可以共享的数据。这是我公司官方的最佳实践，因为外部链接在可维护性方面造成了很多麻烦。起初它可能看起来很麻烦，但我发现它可能只是提高可维护性和易用性的最佳方式，假设您不介意手动干预。

# java - 如何配置串行端口并与之通信？

> ID：3049
> 
> 赞同：49
> 
> 时间：2008-08-06T03:19:19.470
> 
> 标签：java, c++, windows, unix

我需要通过串行连接（RS-232 和 RS-422）发送和接收数据。

如何设置这种连接并与之通信？我如何弄清楚配置设置（例如波特率）应该是什么以及如何设置它们？

特别是，我希望在 Java、C/C++ 或主要的 Unix shell 之一中执行此操作，但我也对使用 Windows/Hyperterminal 进行串行编程感兴趣。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-08-06T03:27:43.323

造一台时光机，回到1987年？嗬嗬。

好的，不再有刻薄的评论。

> 我如何弄清楚配置设置（例如波特率）应该是什么......

阅读数据表？好的好的。说真的，最后一个。如果您不知道您尝试与之通信的设备的波特率，您有两种选择。开始猜测，或者可能破坏一个 o-scope。如果您需要一个好的起点，我建议您使用 9600-8-N-1。我的怀疑是你可以相对较快地用蛮力到达那里。第三种选择是让老派忍者在某些标准波特率下仅通过乱码字符的外观就能判断实际波特率是多少。可以肯定的是，这是一个令人印象深刻的派对技巧。

希望您可以访问此信息。在unix/linux下，可以直接用minicom玩串口。这应该可以相当快地弄清楚配置。

> 主要的 Unix shell 之一

在 Unix 中，串行端口被文件映射到 /dev/ 子目录。例如 ttyS0。如果您使用 minicom 设置正确的波特率和诸如此类的东西，您甚至可以将内容分类到该文件以将内容发送出去。

关于问题的实质，您可以通过 POSIX 标头以编程方式访问它。termios.h 是最大的。

~~请参阅：[http](http://www.easysw.com/~mike/serial/serial.html#3_1)~~ **://www.easysw.com/~mike/serial/serial.html#3_1 （不再提供）**

> 但我也对使用 Windows/Hyperterminal 进行串行编程感兴趣。

超级终端和 minicom 基本上是同一个程序。至于 Windows 如何让您访问串行端口，我将把这个问题留给其他人。自 Win95 以来，我还没有在 Windows 中这样做过。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-08-23T08:15:37.253

如果你想用 Java 编写代码，我真的推荐 SerialIOs [SerialPort](http://serialio.com/products/serialport/serialport.php)。它非常易于使用，可以节省您数天的工作时间。我从来没有找到像 SerialIO 这样好的开源库，真的！

我的建议：不要使用 Sun 的串行 IO 框架！它是从 1998 年开始的，充满了错误。您可以使用[rxtx](http://www.rxtx.org/)但 serialio 更好！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-08-13T12:44:34.937

对于 Windows 上的 C/C++，您有（至少）两种选择：

1.  使用 .NET 提供的 SerialPort 类。
2.  使用 Win32 API。有一篇可追溯到 1995 年的[广泛 MSDN 文章，以及网络上的许多免费库和示例来帮助您入门。](http://msdn.microsoft.com/en-us/library/ms810467.aspx)

.NET 选项会容易得多。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-03T12:12:46.500

如果需要跨平台，我建议查看 Boost [Asio](http://www.boost.org/doc/libs/1_36_0/doc/html/boost_asio.html)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-15T19:16:28.143

不久前，我编写了一个大小合适的应用程序，将连接从调制解调器群路由到 TCP/IP 网络地址。

最初，我寻找一个不受阻碍的（免费）串行 IO 库。我尝试了 Sun、IBM 和 RxTx。它们在开发应用程序和初始测试时都很好，但在生产中它们都被证明是不稳定的。

最后我支付了 SerialIO 的 SerialPort。转换实际上是更改导入的练习，并且该库***绝对***坚如磐石 - 我不能推荐它。我的应用程序已经在现场 24/7 运行了几年，多个客户没有遇到任何问题。

如果您开始使用 SerialPort 进行开发，他们有更好的 API，我会使用它。

如果您需要跨平台支持，那么带有 SerialPort 的 Java 是我能找到的最佳选择。

最后，只要您没有为您的客户在设备上预安装软件，他们的许可就非常合理。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-06T03:35:50.093

另一方面，如果你想使用 C# 来做，它将在 Windows 和 Linux 上运行——有一些[限制](http://www.mono-project.com/HowToSystemIOPorts)（编辑：这可能已经过时了。我无法测试它。）。只需创建一个[SerialPort](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)对象，设置其波特率、端口和任何其他奇怪的设置，在其上调用 open，然后写出您的 byte[]s。完成所有设置后，SerialPort 对象的行为与任何网络流非常相似，因此应该很容易弄清楚。

正如 ibrandy 所说，在您开始尝试与任何串行设备通信之前，您需要了解所有这些设置，例如波特率。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-08-06T05:04:57.353

在工作中，我们使用 teraterm 和 realterm 来检查串行数据的格式是否正确。此外，我们还有一个带交换机的硬件分离器，因此我们可以通过连接到另一个端口的电缆监控到我们的应用程序的流量。

Windows 允许您通过 CreateFile 访问串行端口。这为您提供了一个句柄，您可以从那里配置访问权限。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-23T01:21:20.023

根据您尝试与之通信的设备，可能有比波特率、数据位数、奇偶校验类型和停止位数更多的参数要考虑。如果我没记错的话，调制解调器使用 9 条 RS-232C 接口。某些设备（例如收银机）可能会在 RTS/CTS 线路或 DTR/STR 线路上使用硬件握手。

一般来说，了解界面的工作原理是件好事。如果波特率不匹配，您将无法通信，但其他参数设置错误可能会起作用。例如，您可以轻松地将数据发送到需要设置 2 个停止位的 1 个停止位的设备。当您在这种情况下尝试接收数据时，问题就开始了。您还可以使用适当设置的奇偶校验位作为停止位之一等。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-09-06T13:01:36.613

如果你不是被迫使用特定的编译器，我建议使用 Qt，在新的 5.3 版本中，你会发现一个专用于串行端口的类：

[http://qt-project.org/doc/qt-5/qserialport.html](http://qt-project.org/doc/qt-5/qserialport.html)

您将编写的代码将在所有支持的 Qt 平台上运行，至少是那些具有串行端口的平台。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-18T10:59:35.200

我一直在使用 purejavacomm： [它是用纯 java + JNA 编写的 javax.comm 的实现](http://www.sparetimelabs.com/purejavacomm/index.html)

与 rxtx 不同，您不需要安装 dll。它是用纯 Java + JNA 编写的，它为我解决了 Windows 和 Linux 之间的可移植性问题。应该很容易移植到 JNA 支持的其他操作系统，例如 Solaris 和 FreeBSD，但我没有尝试过。

您可能期望纯 java 库在性能上落后于诸如 rxtx 之类的本机实现，但对于现代 CPU，瓶颈很可能是您的串行端口的比特率，而不是 CPU 周期。此外，它比混合的 Java/Native 库或纯编译的本机代码更容易调试。

# performance - 速度比较 - 解释语言中的程序与 OO

> ID：3057
> 
> 赞同：22
> 
> 时间：2008-08-06T03:34:01.517
> 
> 标签：performance, oop, maintainability, procedural, interpreted-language

在 PHP 和 JavaScript 等解释性编程语言中，使用面向对象的方法优于过程方法的影响是什么？

具体来说，我正在寻找的是在创建 Web 应用程序并在过程和面向对象方法之间进行选择时要考虑的事项清单，不仅可以优化速度，还可以优化可维护性。如果您知道任何进一步探讨此问题的文章，引用的研究和测试用例也会有所帮助。

底线：在解释语言中使用 OO 与程序时，性能的真正影响有多大（如果有的话）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-08-06T03:36:28.267

也许我疯了，但在这种情况下使用解释性语言担心速度就像试图弄清楚要给棚子涂上什么颜色一样。我们甚至不要认为这种优化完全不成熟。

当您说“可维护性”时，您一针见血。我会选择最高效和最可维护的方法。如果您以后需要速度，它不会来自解释语言中的过程与面向对象的编码范例之间的切换。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2011-07-22T21:28:14.503

不幸的是，我也做过测试。我测试了速度，结果差不多，但是当在 PHP 中测试内存使用获取 memory_get_usage() 时，我看到 OOP 方面的数字要大得多。

OOP 为 116,576 字节，程序为 18,856 字节。我知道“硬件很便宜”，但是来吧！使用量增加 1,000%？抱歉，这不是最佳选择。有这么多用户同时访问您的网站，我敢肯定您的 RAM 会烧毁或耗尽。我错了吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-06T03:35:31.327

底线：不，因为解释的开销超过了方法调度的开销。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-22T19:31:03.297

根据我的经验，使用 OOP 代码而不是程序代码，负载重的站点会更容易陷入困境并变得无响应。原因很容易理解。

OOP requires a lot more memory allocations (MALLOC) and a lot more operations to run in memory than procedural code. It requires a lot more CPU time to perform its tasks. It is essentially 'overhead', wrapped around procedural code, adding to the CPU burden to execute it, especially when performing database operations.

Many programmers like the convenience of OOP, creating little black boxes hidden behind simple interfaces. However, I have been paid well to revive sites that were taking forever to respond under heavy user load. Stripping out the OOP and replacing it with simple procedural functions made a huge difference.

If you don't expect your site to be very busy, by all means use OOP. If you are building a high-traffic system, you'll want to strip every CPU cycle from the processing and every byte from the output that you can.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-06T03:49:20.940

如果您使用的是解释性语言，则差异无关紧要。如果性能是一个问题，您不应该使用解释型语言。两者的表现大致相同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T18:18:17.857

你的表现将取决于实现，而不是语言。你可以使用最慢的语言，只要你设计成可扩展的，它就可以扩展成世界上最大的网站。

只要记住优化的第一条规则。

不。

:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-26T20:01:09.310

我实际上在我维护的一个网站上用 python 做了一个像这样的小测试，发现它们的速度几乎相同，程序方法以千分之十秒的速度获胜，但是 OO 代码是如此显着更清洁我没有继续练习超过一次迭代。

所以真的，没关系（无论如何根据我的经验）。

# oop - 什么是控制反转？

> ID：3058
> 
> 赞同：2133
> 
> 时间：2008-08-06T03:35:27.380
> 
> 标签：oop, design-patterns, inversion-of-control

第一次遇到控制反转 (IoC) 时可能会非常混乱。

1.  它是什么？
2.  它解决了哪个问题？
3.  什么时候适合使用，什么时候不适合？

* * *

## 回答 #1

> 赞同：1831
> 
> 时间：2008-08-06T07:22:09.513

( **`Inversion-of-Control`IoC)**模式是关于提供*任何类型*的`callback`（控制反应），而不是直接行动（换句话说，反转和/或将控制重定向到外部处理程序/控制器）。( **`Dependency-Injection`DI)**模式是 IoC 模式的一个更具体的版本，旨在从代码中移除依赖项。

> 每个`DI`实现都可以考虑`IoC`，但不应该调用它`IoC`，因为实现依赖注入比回调更难（不要通过使用通用术语“IoC”来降低产品的价值）。

对于 DI 示例，假设您的应用程序有一个文本编辑器组件，并且您想提供拼写检查。您的标准代码如下所示：

```
public class TextEditor {

    private SpellChecker checker;

    public TextEditor() {
        this.checker = new SpellChecker();
    }
} 
```

我们在这里所做的创建了`TextEditor`和之间的依赖关系`SpellChecker`。在 IoC 场景中，我们将改为执行以下操作：

```
public class TextEditor {

    private IocSpellChecker checker;

    public TextEditor(IocSpellChecker checker) {
        this.checker = checker;
    }
} 
```

在第一个代码示例中，我们正在实例化`SpellChecker`( `this.checker = new SpellChecker();`)，这意味着`TextEditor`该类直接依赖于`SpellChecker`该类。

在第二个代码示例中，我们通过在的构造函数签名中使用`SpellChecker`依赖类来创建抽象（而不是在类中初始化依赖）。`TextEditor`这允许我们调用依赖项，然后将其传递给 TextEditor 类，如下所示：

```
SpellChecker sc = new SpellChecker(); // dependency
TextEditor textEditor = new TextEditor(sc); 
```

现在创建`TextEditor`类的客户端可以控制`SpellChecker`使用哪个实现，因为我们将依赖项注入到`TextEditor`签名中。

* * *

## 回答 #2

> 赞同：749
> 
> 时间：2008-08-06T05:42:36.233

控制反转是您在程序回调时得到的，例如 gui 程序。

例如，在旧式菜单中，您可能有：

```
print "enter your name"
read name
print "enter your address"
read address
etc...
store in database 
```

从而控制用户交互的流程。

在 GUI 程序或类似的程序中，我们说：

```
when the user types in field a, store it in NAME
when the user types in field b, store it in ADDRESS
when the user clicks the save button, call StoreInDatabase 
```

所以现在控制被颠倒了......而不是计算机以固定的顺序接受用户输入，用户控制输入数据的顺序，以及何时将数据保存到数据库中。

基本上，**任何**带有事件循环、回调或执行触发器的东西都属于这一类。

* * *

## 回答 #3

> 赞同：465
> 
> 时间：2010-07-22T17:34:19.737

什么是控制反转？

如果您遵循这两个简单的步骤，您就完成了控制反转：

1.  将“做什么”部分与“**何时做****什么**”部分分开。
***   确保**当**零件尽可能*少*地知道**什么**零件；反之亦然。**

 **根据您用于实现的技术/语言，每个步骤都有几种可能的技术。

--

控制反转（IoC）的*反转部分是令人困惑的事情；*因为*倒置*是相对的术语。理解 IoC 的最好方法就是忘记这个词！

--

例子

*   事件处理。事件处理程序（待办事项部分）——引发事件（何时待办事项部分）
*   依赖注入。构建依赖项（what-to-do 部分）的代码——在需要时为客户端实例化和注入该依赖项，这通常由 Dagger 等 DI 工具（when-to-do-part）处理。
*   接口。组件客户端（when-to-do部分）——组件接口实现（what-to-do部分）
*   xUnit 夹具。Setup 和 TearDown（待办事项部分）——xUnit 框架在开头调用 Setup 并在结尾调用 TearDown（待办事项部分）
*   模板方法设计模式。模板方法when-to-do部分——原始子类实现what-to-do部分
*   COM 中的 DLL 容器方法。DllMain、DllCanUnload 等（待办事项部分）——COM/OS（待办事项部分）

* * *

## 回答 #4

> 赞同：196
> 
> 时间：2013-09-25T14:24:31.633

控制反转是关于分离关注点。

**没有 IoC**：你有一**台笔记本**电脑，但不小心打破了屏幕。而且，您会发现市场上没有相同型号的笔记本电脑屏幕。所以你被困住了。

**使用 IoC**：您有一**台台式**计算机，但您不小心打破了屏幕。你会发现你几乎可以从市场上买到任何桌面显示器，而且它与你的桌面配合得很好。

在这种情况下，您的桌面成功实现了 IoC。它接受各种类型的显示器，而笔记本电脑不接受，它需要一个特定的屏幕来固定。

* * *

## 回答 #5

> 赞同：155
> 
> 时间：2013-03-04T19:33:57.607

控制反转（或 IoC）是关于**获得自由**（你结婚了，你失去了自由，你被控制了。你离婚了，你刚刚实施了控制反转。这就是我们所说的“解耦”。好的计算机系统不鼓励一些非常亲密的关系。）**更多的灵活性**（你办公室的厨房只提供干净的自来水，这是你想喝的唯一选择。你的老板通过设置一台新咖啡机实施了控制反转。现在你得到了选择自来水或咖啡的灵活性。）和**更少的依赖**（你的伴侣有工作，你没有工作，你在经济上依赖你的伴侣，所以你被控制了。你找到了工作，你实施了控制反转。好的计算机系统鼓励独立。）

当您使用台式计算机时，您已经从属（或者说，被控制）。你必须坐在屏幕前看着它。使用键盘键入并使用鼠标导航。一个写得不好的软件会更加奴役你。如果你用笔记本电脑代替你的台式机，那么你的控制就有点颠倒了。您可以轻松携带它并四处走动。因此，现在您可以使用计算机控制您所在的位置，而不是您的计算机控制它。

通过实施控制反转，软件/对象消费者可以获得对软件/对象的更多控制/选项，而不是被控制或拥有更少的选项。

带着以上的想法。我们仍然错过了 IoC 的一个关键部分。在 IoC 场景中，软件/对象消费者是一个复杂的框架。这意味着您创建的代码不是您自己调用的。现在让我们解释一下为什么这种方式更适合 Web 应用程序。

假设您的代码是一组工人。他们需要造一辆汽车。这些工人需要一个地方和工具（一个软件框架）来制造汽车。一个**传统**的软件框架就像一个有很多工具的车库。所以工人们需要自己制定计划，并使用工具来制造汽车。造车不是一件容易的事，工人们要好好规划和配合，真的很难。一个**现代**软件框架将像一个现代化的汽车工厂，所有的设施和管理人员都到位。工人不必制定任何计划，经理（框架的一部分，他们是最聪明的人并制定了最复杂的计划）将帮助协调，以便工人知道何时完成他们的工作（框架调用您的代码）。工作人员只需要足够灵活以使用经理提供给他们的任何工具（通过使用依赖注入）。

尽管工作人员将顶层项目管理的控制权交给了管理者（框架）。但是最好有一些专业人士的帮助。这就是IoC的概念真正的来历。

具有 MVC 架构的现代 Web 应用程序依赖于框架来执行 URL 路由并将控制器放置在适当的位置以供框架调用。

依赖注入和控制反转是相关的。依赖注入是**微观**层面的，控制反转是**宏观**层面的。您必须吃完每一口食物（实施 DI）才能完成一顿饭（实施 IoC）。

* * *

## 回答 #6

> 赞同：99
> 
> 时间：2010-02-12T14:31:57.880

在使用控制反转之前，您应该清楚地知道它有其优点和缺点，并且如果您这样做，您应该知道为什么要使用它。

优点：

*   您的代码被解耦，因此您可以轻松地将接口的实现与替代实现交换
*   它是针对接口而不是实现进行编码的强大动力
*   为您的代码编写单元测试非常容易，因为它只依赖于它在其构造函数/设置器中接受的对象，并且您可以轻松地用正确的对象单独初始化它们。

缺点：

*   IoC 不仅会反转程序中的控制流，还会使程序变得混乱。这意味着您不能再仅仅阅读您的代码并从一个地方跳到另一个地方，因为通常在您的代码中的连接不再在代码中。相反，它位于 XML 配置文件或注释以及解释这些元数据的 IoC 容器的代码中。
*   出现了一类新的错误，您的 XML 配置或注释错误，您可能会花费大量时间找出为什么您的 IoC 容器在某些条件下将空引用注入您的对象之一。

就我个人而言，我看到了 IoC 的优点，我真的很喜欢它们，但我倾向于尽可能避免使用 IoC，因为它会将您的软件变成一个类的集合，这些类不再构成“真正的”程序，而只是需要由XML 配置或注释元数据，没有它就会崩溃（并且崩溃）。

* * *

## 回答 #7

> 赞同：72
> 
> 时间：2008-08-06T04:33:19.727

1.  [维基百科文章](http://en.wikipedia.org/wiki/Inversion_of_control)。对我来说，控制反转是把你顺序编写的代码变成一个委托结构。您的程序不是显式地控制一切，而是设置一个类或库，其中包含在某些事情发生时要调用的某些函数。

2.  它解决了代码重复。例如，在过去，您会手动编写自己的事件循环，轮询系统库以获取新事件。如今，大多数现代 API 您只需告诉系统库您感兴趣的事件，它就会让您知道它们何时发生。

3.  控制反转是减少代码重复的一种实用方法，如果您发现自己复制了整个方法并且只更改了一小部分代码，您可以考虑使用控制反转来解决它。在许多语言中，通过委托、接口甚至原始函数指针的概念，控制反转很容易。

    它并不适合在所有情况下使用，因为以这种方式编写的程序流程可能更难遵循。在编写将被重用的库时，这是一种设计方法的有用方法，但除非它真正解决了代码重复问题，否则应该在您自己程序的核心中谨慎使用。

* * *

## 回答 #8

> 赞同：50
> 
> 时间：2013-09-25T14:00:30.113

假设你是一个对象。你去一家餐馆：

**没有 IoC**：您要求“苹果”，当您要求更多时，您总是得到苹果。

**使用 IoC**：您可以要求“水果”。每次上菜时，您可以获得不同的水果。例如，苹果、橙子或西瓜。

因此，显然，当您喜欢这些品种时，IoC 是首选。

* * *

## 回答 #9

> 赞同：47
> 
> 时间：2008-08-06T22:08:27.180

但我认为你必须非常小心。如果你过度使用这种模式，你会做出非常复杂的设计甚至更复杂的代码。

就像在这个 TextEditor 的例子中一样：如果你只有一个 SpellChecker，也许真的没有必要使用 IoC 吗？除非你需要写单元测试什么的……

总之：讲道理。设计模式是**好的实践**，但不是要传讲的圣经。不要到处粘。

* * *

## 回答 #10

> 赞同：46
> 
> 时间：2008-09-19T02:54:35.443

对我来说，IoC / DI 将依赖关系推向调用对象。超级简单。

非技术性的答案是能够在您打开汽车之前更换汽车中的发动机。如果一切都连接正确（界面），那么你很好。

* * *

## 回答 #11

> 赞同：44
> 
> 时间：2016-01-11T00:49:09.723

只回答第一部分。它是什么？

控制反转 (IoC) 意味着先创建依赖项实例，然后创建类的后一个实例（可选地通过构造函数注入它们），而不是先创建类的实例，然后类实例创建依赖项的实例。因此，控制**反转**会反转程序的控制**流程**。**调用者控制程序**的控制流，**而不是**被**调用者控制控制****流**（同时创建依赖项）。

 *** * *

## 回答 #12

> 赞同：27
> 
> 时间：2008-09-19T02:27:33.993

1.  控制反转是一种用于解耦系统中的组件和层的模式。该模式是通过在构建组件时将依赖项注入组件来实现的。这些依赖关系通常作为接口提供，用于进一步解耦和支持可测试性。IoC / DI 容器，例如 Castle Windsor、Unity 是可用于提供 IoC 的工具（库）。这些工具提供了超越简单依赖管理的扩展功能，包括生命周期、AOP/拦截、策略等。

2.  一种。减轻组件负责管理其依赖项的责任。
    湾。提供在不同环境中交换依赖项实现的能力。
    C。允许通过模拟依赖项来测试组件。
    d。提供一种在整个应用程序中共享资源的机制。

3.  一种。在进行测试驱动开发时至关重要。如果没有 IoC，可能很难进行测试，因为被测组件与系统的其余部分高度耦合。
    湾。开发模块化系统时至关重要。模块化系统是其组件无需重新编译即可更换的系统。
    C。如果有许多需要解决的横切关注点，尤其是在企业应用程序中，则至关重要。

* * *

## 回答 #13

> 赞同：23
> 
> 时间：2014-11-10T08:43:40.777

**我将写下我对这两个术语的简单理解：**

```
For quick understanding just read examples* 
```

**依赖注入（DI）：**
依赖注入通常意味着**将方法所依赖的对象作为参数传递给方法，而不是让方法创建依赖对象**。
这在实践中意味着该方法不直接依赖于特定的实现；任何满足要求的实现都可以作为参数传递。

*用这个对象告诉他们的依赖关系。春天使它可用。
这导致松散耦合的应用程序开发。*

```
Quick Example:EMPLOYEE OBJECT WHEN CREATED,
              IT WILL AUTOMATICALLY CREATE ADDRESS OBJECT
   (if address is defines as dependency by Employee object) 
```

**控制反转（IoC）容器：**
这是框架的共同特征，IOC通过其 BeanFactory**管理 Java 对象——从实例化到销毁。** - 由 IoC 容器实例化的 Java 组件称为 bean，**IoC 容器管理 bean 的范围、生命周期事件以及**已为其配置和编码的任何 AOP 功能。

 ***`QUICK EXAMPLE:Inversion of Control is about getting freedom, more flexibility, and less dependency. When you are using a desktop computer, you are slaved (or say, controlled). You have to sit before a screen and look at it. Using keyboard to type and using mouse to navigate. And a bad written software can slave you even more. If you replaced your desktop with a laptop, then you somewhat inverted control. You can easily take it and move around. So now you can control where you are with your computer, instead of computer controlling it`*.

通过实施控制反转，软件/对象消费者可以获得对软件/对象的更多控制/选项，而不是被控制或拥有更少的选项。

**控制反转作为设计指南的目的如下：**

某个任务的执行与执行是脱钩的。
每个模块都可以专注于它的设计目的。
模块不对其他系统做什么做任何假设，而是依赖于它们的合同。
替换模块对其他模块没有副作用
我将在这里保持抽象，您可以访问以下链接以详细了解该主题。
[一个很好的例子](http://www.springbyexample.org/examples/intro-to-ioc-basic-constructor-injection.html)

[详细解释](http://howtodoinjava.com/2013/03/19/inversion-of-control-ioc-and-dependency-injection-di-patterns-in-spring-framework-and-related-interview-questions/)

* * *

## 回答 #14

> 赞同：20
> 
> 时间：2012-09-26T17:54:41.467

假设我们在某家酒店开会。

许多人，许多水壶，许多塑料杯。

当有人想喝的时候，他/她装满一个杯子，喝完，然后把杯子扔在地板上。

一个小时左右后，我们的地板上铺满了塑料杯和水。

现在让我们反转控制。

在同一个地方举行同一次会议，但我们有一个服务员拿着一个玻璃杯而不是塑料杯（Singleton）

她一直都在为客人喝酒。

当有人想喝酒的时候，她从服务员那里拿过来，喝了，然后还给服务员。

撇开卫生问题不谈，最后一种饮用过程控制形式更加有效和经济。

这正是 Spring（另一个 IoC 容器，例如：Guice）所做的。Spring IoC 容器始终为应用程序提供所需对象（一杯水）的相同实例（单例），而不是让应用程序使用新关键字（拿塑料杯）创建它需要的东西。

将自己想象为此类会议的组织者。您需要向酒店管理部门发送消息的方式

会议成员需要一杯水，但不是小菜一碟。

**例子：-**

```
public class MeetingMember {

    private GlassOfWater glassOfWater;

    ...

    public void setGlassOfWater(GlassOfWater glassOfWater){
        this.glassOfWater = glassOfWater;
    }
    //your glassOfWater object initialized and ready to use...
    //spring IoC  called setGlassOfWater method itself in order to
    //offer to meetingMember glassOfWater instance

} 
```

**有用的链接：-**

*   [http://adfjsf.blogspot.in/2008/05/inversion-of-control.html](http://adfjsf.blogspot.in/2008/05/inversion-of-control.html)
*   [http://martinfowler.com/articles/injection.html](http://martinfowler.com/articles/injection.html)
*   [http://www.shawn-barrett.com/blog/post/Tip-of-the-day-e28093-Inversion-Of-Control.aspx](http://www.shawn-barrett.com/blog/post/Tip-of-the-day-e28093-Inversion-Of-Control.aspx)

* * *

## 回答 #15

> 赞同：19
> 
> 时间：2017-11-04T13:27:41.170

[我在这里](http://php-di.org/doc/understanding-di.html)找到了一个非常清楚的例子，它解释了“控制是如何倒置的”。

**经典代码（无依赖注入）**

以下是不使用 DI 的代码大致如何工作：

*   应用程序需要 Foo（例如控制器），所以：
*   应用程序创建 Foo
*   应用程序调用 Foo
    *   Foo 需要 Bar（例如服务），所以：
    *   Foo 创建 Bar
    *   Foo 呼叫 Bar
        *   Bar 需要 Bim（服务、存储库……），所以：
        *   Bar 创建 Bim
        *   酒吧做点什么

**使用依赖注入**

以下是使用 DI 的代码大致如何工作：

*   应用需要Foo，需要Bar，需要Bim，所以：
*   应用程序创建 Bim
*   应用程序创建 Bar 并为其提供 Bim
*   应用程序创建 Foo 并给它 Bar
*   应用程序调用 Foo
    *   Foo 呼叫 Bar
        *   酒吧做点什么

***依赖关系的控制从一个被调用反转到一个调用。***

**它解决了哪些问题？**

依赖注入可以很容易地与注入类的不同实现进行交换。在进行单元测试时，您可以注入一个虚拟实现，这使测试变得更加容易。

例如：假设您的应用程序将用户上传的文件存储在 Google Drive 中，使用 DI，您的控制器代码可能如下所示：

```
class SomeController
{
    private $storage;

    function __construct(StorageServiceInterface $storage)
    {
        $this->storage = $storage;
    }

    public function myFunction () 
    {
        return $this->storage->getFile($fileName);
    }
}

class GoogleDriveService implements StorageServiceInterface
{
    public function authenticate($user) {}
    public function putFile($file) {}
    public function getFile($file) {}
} 
```

当您的要求发生变化时，系统会要求您使用 Dropbox 而不是 GoogleDrive。您只需要为 StorageServiceInterface 编写一个 Dropbox 实现。只要 Dropbox 实现遵循 StorageServiceInterface，您无需对控制器进行任何更改。

在测试时，您可以使用虚拟实现为 StorageServiceInterface 创建模拟，其中所有方法都返回 null（或根据您的测试要求的任何预定义值）。

相反，如果您让控制器类使用如下`new`关键字构造存储对象：

```
class SomeController
{
    private $storage;

    function __construct()
    {
        $this->storage = new GoogleDriveService();
    }

    public function myFunction () 
    {
        return $this->storage->getFile($fileName);
    }
} 
```

当您想使用 Dropbox 实现进行更改时，您必须替换`new`构建 GoogleDriveService 对象的所有行并使用 DropboxService。此外，在测试 SomeController 类时，构造函数总是期望 GoogleDriveService 类，并触发该类的实际方法。

**什么时候合适，什么时候不合适？** 在我看来，当你认为有（或可能有）一个类的替代实现时，你会使用 DI。

* * *

## 回答 #16

> 赞同：18
> 
> 时间：2008-08-06T05:20:11.037

我同意[NilObject](https://stackoverflow.com/questions/3058/what-is-inversion-of-control#3082)，但我想补充一点：

> 如果您发现自己复制了整个方法并且只更改了一小部分代码，您可以考虑通过控制反转来解决它

如果您发现自己在复制和粘贴代码，那么您几乎总是在做错*事*。编纂为设计原则[Once and Only Once](http://c2.com/xp/OnceAndOnlyOnce.html)。

* * *

## 回答 #17

> 赞同：18
> 
> 时间：2010-01-27T12:15:48.473

例如，task#1 是创建对象。如果没有 IOC 概念，task#1 应该由 Programmer 完成。但是如果有 IOC 概念，task#1 将由容器完成。

简而言之，控制从程序员反转到容器。因此，它被称为控制反转。

[我在这里](http://www.goospoos.com/2009/12/inversion-of-control-basics-with-example/)找到了一个很好的例子。

* * *

## 回答 #18

> 赞同：18
> 
> 时间：2011-01-19T03:50:19.453

似乎“IoC”这个首字母缩写词和它所代表的名字最令人困惑的是它的名字太迷人了——几乎是一个噪音名字。

我们真的需要一个名称来描述过程驱动编程和事件驱动编程之间的区别吗？好的，如果我们需要，但我们是否需要选择一个全新的“比生命更重要”的名称，它让人困惑多于解决问题？

* * *

## 回答 #19

> 赞同：17
> 
> 时间：2017-12-15T18:35:52.217

**控制反转**是当你去杂货店时，你的妻子给了你要购买的产品清单。

在编程术语中，她将一个回调函数传递给`getProductList()`您正在执行的函数 - `doShopping()`。

它允许函数的用户定义它的某些部分，使其更加灵活。

* * *

## 回答 #20

> 赞同：14
> 
> 时间：2015-10-29T04:27:32.597

控制反转是一个通用原则，而依赖注入将此原则实现为对象图构造的设计模式（即配置控制对象如何相互引用，而不是对象本身控制如何获取对另一个对象的引用）。

将控制反转视为一种设计模式，我们需要看看我们正在反转什么。依赖注入反转了对构建对象图的控制。如果用外行的话来说，控制反转意味着程序中控制流的变化。例如。在传统的独立应用程序中，我们有 main 方法，控制从那里传递给其他第三方库（如果我们使用了第三方库的函数），但是通过控制反转控制从第三方库代码转移到我们的代码，因为我们正在接受第三方图书馆的服务。但是在程序中还有其他方面需要反转——例如调用方法和线程来执行代码。

对于那些对控制反转更深入感兴趣的人，已经发表了一篇论文，概述了作为一种设计模式的控制反转的更完整图片（OfficeFloor：使用办公模式改进软件设计[http://doi.acm.org/10.1145/ 2739011.2739013](http://doi.acm.org/10.1145/2739011.2739013)可从[http://www.officefloor.net/about.html](http://www.officefloor.net/about.html)下载免费副本）。

确定的是以下关系：

控制反转（对于方法）= 依赖（状态）注入 + 持续注入 + 线程注入

可用控制反转的上述关系摘要 - [http://dzone.com/articles/inversion-of-coupling-control](http://dzone.com/articles/inversion-of-coupling-control)

* * *

## 回答 #21

> 赞同：14
> 
> 时间：2017-10-01T11:24:20.933

我知道这里已经给出了答案。但我仍然认为，关于控制反转的一些基础知识必须在这里详细讨论，以供未来的读者阅读。

控制反转 (IoC) 建立在一个非常简单的原则之上，称为**好莱坞原则**。它说，

> 不要打电话给我们，我们会打电话给你

这意味着不要去好莱坞实现你的梦想，如果你值得，那么好莱坞会找到你并让你的梦想成真。几乎是颠倒的，对吧？

现在，当我们讨论 IoC 的原理时，我们常常忘记好莱坞。对于国际奥委会来说，必须具备三个要素，一个好莱坞，一个你和一个像实现你的梦想的任务。

在我们的编程世界中，**好莱坞**代表一个通用框架（可能由您或其他人编写），**您**代表您编写的用户代码**，任务**代表您想用代码完成的事情。现在你永远不会自己去触发你的任务，而不是在 IoC 中！相反，您已经设计了所有内容，以便您的框架将为您触发您的任务。因此，您构建了一个可重用的框架，可以使某人成为英雄或使另一个人成为恶棍。但该框架始终负责，它知道何时选择某人，而某人只知道它想成为什么。

这里将给出一个真实的例子。假设您想开发一个 Web 应用程序。因此，您创建了一个框架来处理 Web 应用程序应该处理的所有常见事情，例如处理 http 请求、创建应用程序菜单、服务页面、管理 cookie、触发事件等。

然后你在你的框架中留下一些钩子，你可以在其中放置更多代码来生成自定义菜单、页面、cookies或记录一些用户事件等。在每个浏览器请求上，你的框架将运行并执行你的自定义代码，如果钩子然后返回它到浏览器。

所以，这个想法非常简单。与其创建一个控制一切的用户应用程序，不如先创建一个可重用的框架来控制一切，然后编写您的自定义代码并将其连接到框架以及时执行这些代码。

Laravel 和 EJB 就是这种框架的例子。

参考：

[https://martinfowler.com/bliki/InversionOfControl.html](https://martinfowler.com/bliki/InversionOfControl.html)

[https://en.wikipedia.org/wiki/Inversion_of_control](https://en.wikipedia.org/wiki/Inversion_of_control)

* * *

## 回答 #22

> 赞同：13
> 
> 时间：2013-02-22T14:13:23.550

一个非常简单的书面解释可以在这里找到

[http://binstock.blogspot.in/2008/01/excellent-explanation-of-dependency.html](http://binstock.blogspot.in/2008/01/excellent-explanation-of-dependency.html)

它说 -

> “任何重要的应用程序都由两个或多个相互协作以执行某些业务逻辑的类组成。传统上，每个对象都负责获取对与其协作的对象（其依赖项）的自己的引用。在应用 DI 时，对象在创建时由协调系统中每个对象的外部实体赋予它们的依赖关系。换句话说，依赖关系被注入到对象中。

* * *

## 回答 #23

> 赞同：13
> 
> 时间：2017-02-16T02:03:20.613

我喜欢这个解释：http: [//joelabrahamsson.com/inversion-of-control-an-introduction-with-examples-in-net/](http://joelabrahamsson.com/inversion-of-control-an-introduction-with-examples-in-net/)

它开始很简单，并显示代码示例。

[![在此处输入图像描述](../Images/830069c520f197cc7bef6cd45a9d0698.png)](https://i.stack.imgur.com/H4Tbn.png)

消费者 X 需要消费类 Y 来完成某事。这一切都很好而且很自然，但是 X 真的需要知道它使用了 Y 吗？

X 知道它使用了具有 Y 的行为、方法、属性等的东西而不知道谁实际实现了该行为，这还不够吗？

通过提取 X 在 Y 中使用的行为的抽象定义，如下图 I 所示，并让消费者 X 使用该行为的一个实例而不是 Y，它可以继续做它所做的事情，而无需了解有关 Y 的细节。

[![在此处输入图像描述](../Images/25a820a3df713e609fc7fd45c2a94b07.png)](https://i.stack.imgur.com/i4x6r.png)

在上面的插图中，Y 实现了 I，而 X 使用了 I 的一个实例。虽然 X 很可能仍然使用 Y，但有趣的是 X 并不知道这一点。它只知道它使用了实现 I 的东西。

阅读文章以获取更多信息和好处描述，例如：

*   X 不再依赖于 Y
*   更灵活，实现可以在运行时决定
*   代码单元隔离，测试更轻松

...

* * *

## 回答 #24

> 赞同：12
> 
> 时间：2014-09-19T18:25:33.013

IoC 是关于反转您的代码和第三方代码（库/框架）之间的关系：

*   在正常的软件开发中，您编写***main()***方法并调用“库”方法。 ***你***在控制:)
*   在 IoC 中，“框架”控制***main()***并调用您的方法。***框架***在控制中:(

DI（依赖注入）是关于控制如何在应用程序中流动的。传统的桌面应用程序具有从您的应用程序（main() 方法）到其他库方法调用的控制流，但是通过 DI 控制流反转，框架负责启动您的应用程序、初始化它并在需要时调用您的方法。

最后你总是赢:)

* * *

## 回答 #25

> 赞同：11
> 
> 时间：2015-04-19T12:07:43.160

编程口语

简单来说 IoC：它是使用接口作为特定事物（如字段或参数）的一种方式，作为某些类可以使用的通配符。它允许代码的可重用性。

例如，假设我们有两个类：**Dog**和**Cat**。两者都有相同的品质/状态：年龄、大小、体重。因此，我可以创建一个名为**AnimalService**的服务类，而不是创建一个名为**DogService**和**CatService的服务类，它仅在 Dog 和 Cat 使用接口****IAnimal**时才允许使用它们。

 ****但是，从务实的角度来说，它有一些倒退。

a)**大多数开发人员不知道如何使用它**。例如，我可以创建一个名为**Customer**的类，然后**我可以自动**（使用 IDE 的工具）创建一个名为**ICustomer**的接口。因此，无论接口是否会被重用，找到一个充满类和接口的文件夹并不罕见。它被称为膨胀。有些人可能会争辩说“将来我们可能会使用它”。:-|

b) 它有一些限制。例如，让我们谈谈**Dog**和**Cat**的情况，我想为狗添加一个新的服务（功能）。假设我想计算我需要训练一只狗的天数**`trainDays()`**（

b.1）如果我添加`trainDays()`到 Service **AnimalService**那么它也适用于猫，它根本无效。

b.2）我可以添加一个条件`trainDays()`来评估使用哪个类。但它会彻底破坏 IoC。

b.3) 我可以为新功能创建一个名为**DogService**的新服务类。但是，它将增加代码的可维护性，因为我们将为**Dog**提供两类服务（具有相似的功能） ，这很糟糕。

* * *

## 回答 #26

> 赞同：11
> 
> 时间：2017-12-24T18:34:59.483

控制反转是将控制从库转移到客户端。当我们谈论将函数值（lambda 表达式）注入（传递）到控制（更改）库函数行为的高阶函数（库函数）中时，它更有意义。

因此，这种模式的一个简单实现（具有巨大影响）是一个高阶库函数（它接受另一个函数作为参数）。库函数通过让客户端能够提供“控制”函数作为参数来转移对其行为的控制。

例如，“map”、“flatMap”等库函数是 IoC 实现。

当然，受限的 IoC 版本是例如布尔函数参数。客户端可以通过切换布尔参数来控制库函数。

将库依赖项（携带行为）注入库的客户端或框架也可以视为 IoC

* * *

## 回答 #27

> 赞同：9
> 
> 时间：2019-08-12T15:36:49.930

由于这个问题已经有很多答案，但没有一个显示反转控制术语的细分，我看到有机会给出更简洁和有用的答案。

控制反转是一种实现依赖反转原则 (DIP) 的模式。DIP 声明如下： 1\. 高级模块不应该依赖于低级模块。两者都应该依赖于抽象（例如接口）。2\. 抽象不应该依赖于细节。细节（具体实现）应该依赖于抽象。

控制反转分为三种类型：

**接口反转** 提供者不应定义接口。相反，消费者应该定义接口，而提供者必须实现它。接口反转允许消除每次添加新提供者时修改消费者的必要性。

**Flow Inversion** 改变流的控制。例如，您有一个控制台应用程序，您在其中要求输入许多参数，并且在每个输入的参数之后您都必须按 Enter 键。您可以在这里应用 Flow Inversion 并实现一个桌面应用程序，用户可以选择参数输入的顺序，用户可以编辑参数，并且在最后一步，用户只需按一次 Enter。

**创建反转** 可以通过以下模式实现：工厂模式、服务定位器和依赖注入。创建反转有助于消除类型之间的依赖关系，将依赖对象创建过程移到使用这些依赖对象的类型之外。为什么依赖关系不好？这里有几个例子：在你的代码中直接创建一个新对象会使测试更难；不重新编译就不可能更改程序集中的引用（违反 OCP 原则）；你不能轻易地用 web 用户界面替换桌面用户界面。

* * *

## 回答 #28

> 赞同：8
> 
> 时间：2019-08-06T23:45:04.210

**我已经为此阅读了很多答案，但是如果有人仍然感到困惑并且需要一个超“外行术语”来解释 IoC，我的看法是：**

想象一下父母和孩子互相交谈。

**没有 IoC：**

***家长**：只有当我问你问题时，你才能说话，只有在我允许你的情况下，你才能行动。

**家长**：也就是说，如果我不问你，你就不能问我能不能吃饭、玩耍、上厕所甚至睡觉。

**家长**：你想吃吗？

**孩子**：没有。

**家长**：好的，我会回来的。等等我。

**孩子**：（想玩，但由于父母没有问题，孩子什么都做不了）。

*1小时后...*

**家长**：我回来了。你想玩吗？

**孩子**：是的。

**家长**：已授予权限。

**孩子**：（终于可以玩了）。

这个简单的场景解释了控件以父级为中心。孩子的自由受到限制，很大程度上取决于父母的问题。孩子**只有**在被要求说话时才能说话，并且**只有**在获得许可时才能行动。

**使用国际奥委会：**

孩子现在可以提出问题，而家长可以回答并获得许可。简单来说就是控制反转！孩子现在可以随时自由提问，尽管在权限方面仍然依赖于父母，但他不依赖于说话/提问的方式。

*从技术上讲，这与控制台/shell/cmd 与 GUI 交互非常相似。（这是 Mark Harrison 的答案高于第二个最佳答案）。在控制台中，您取决于向您询问/显示的内容，如果不先回答问题，您将无法跳转到其他菜单和功能；遵循严格的顺序流程。（以编程方式，这就像一个方法/函数循环）。然而，使用 GUI，菜单和功能被布局，用户可以选择它需要的任何东西，从而拥有更多的**控制**和更少的限制。（以编程方式，菜单在选择并发生操作时具有回调）。*

* * *

## 回答 #29

> 赞同：5
> 
> 时间：2015-05-13T08:52:39.357

在类中创建对象称为紧耦合，Spring 通过遵循设计模式（DI/IOC）来消除这种依赖关系。在构造函数中传递的类对象中，而不是在类中创建。此外，我们在构造函数中给出了超类引用变量来定义更通用的结构。

* * *

## 回答 #30

> 赞同：4
> 
> 时间：2015-07-16T16:06:57.940

使用 IoC，您不会更新您的对象。您的 IoC 容器将执行此操作并管理它们的生命周期。

它解决了必须手动将一种对象的每个实例化更改为另一种的问题。

当您的功能可能会在未来发生变化或可能会因所使用的环境或配置而有所不同时，这是合适的。

* * *

## 回答 #31

> 赞同：4
> 
> 时间：2016-06-03T01:46:24.477

为了理解这个概念，控制反转 (IoC) 或依赖反转原则 (DIP) 涉及两个活动：抽象和反转。依赖注入（DI）只是为数不多的倒置方法之一。

要了解有关此的更多信息，您可以阅读我的博客 [Here](http://kusnaditjung.blogspot.co.uk/2016/05/dependency-inversion-principle-dip.html)

1.  它是什么？

这是一种让实际行为来自边界之外的做法（面向对象编程中的类）。边界实体只知道它的抽象（例如接口、抽象类、面向对象编程中的委托）。

2.  它解决了哪些问题？

在编程方面，IoC 尝试通过模块化、解耦各个部分并使其可单元测试来解决单体代码。

3.  什么时候合适，什么时候不合适？

大多数情况下它是合适的，除非你有只需要单片代码的情况（例如非常简单的程序）

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2008-09-19T04:59:27.483

1.  所以[上面](https://stackoverflow.com/questions/3058/what-is-inversion-of-control#99100)的数字 1 。[什么是控制反转？](https://stackoverflow.com/questions/3058/what-is-inversion-of-control#99100)

2.  维护是它为我解决的第一件事。它保证我正在使用接口，以便两个类彼此不亲密。

在使用像 Castle Windsor 这样的容器时，它可以更好地解决维护问题。能够在不更改一行代码的情况下将进入数据库的组件换成使用基于文件的持久性的组件真是太棒了（配置更改，你已经完成了）。

一旦你进入泛型，它会变得更好。想象一下，有一个消息发布者接收记录并发布消息。它不关心它发布了什么，但它需要一个映射器来将某些内容从记录转换为消息。

```
public class MessagePublisher<RECORD,MESSAGE>
{
    public MessagePublisher(IMapper<RECORD,MESSAGE> mapper,IRemoteEndpoint endPointToSendTo)
    {
      //setup
    }
} 
```

我曾经写过一次，但是现在如果我发布不同类型的消息，我可以在这组代码中注入多种类型。我还可以编写映射器来获取相同类型的记录并将它们映射到不同的消息。将 DI 与泛型结合使用使我能够编写很少的代码来完成许多任务。

哦，是的，存在可测试性问题，但它们仅次于 IoC/DI 的好处。

我绝对喜欢 IoC/DI。

3\. 当你有一个更复杂的中型项目时，它就变得更合适了。我会说当你开始感到疼痛的那一刻就变得合适了。

* * *

## 回答 #33

> 赞同：3
> 
> 时间：2019-05-09T00:39:31.767

[真的不明白为什么会有很多错误的答案，甚至接受的答案也不太准确，这让事情变得难以理解。真相总是简单而干净的。]

正如[@Schneider](https://stackoverflow.com/a/3108/2361308#comment-1186335)在[@Mark Harrison 的回答](https://stackoverflow.com/a/3108/2361308)中评论的那样，请阅读Martin Fowler 讨论IoC 的帖子。

[https://martinfowler.com/bliki/InversionOfControl.html](https://martinfowler.com/bliki/InversionOfControl.html)

我最喜欢的一个是：

> 这种现象就是控制反转（也称为好莱坞原则——“不要打电话给我们，我们会打电话给你”）。

为什么？

[IoC 的 Wiki](https://en.wikipedia.org/wiki/Inversion_of_control)，我可能会引用一个片段。

> 控制反转用于增加程序的模块化并使其可扩展……然后在 2004 年由**Robert C. Martin**和**Martin Fowler**进一步推广。

罗伯特 C. 马丁： 的作者`<<Clean Code: A Handbook of Agile Software Craftsmanship>>`。

马丁·福勒： 的作者`<<Refactoring: Improving the Design of Existing Code>>`。

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2019-02-14T23:03:45.400

控制反转意味着您控制组件（类）的行为方式。为什么将其称为“反转”，因为在此模式之前，这些类是硬连线的，并且对它们将要做什么是确定的，例如

您导入一个具有 a`TextEditor`和`SpellChecker`类的库。现在这自然`SpellChecker`只会检查英语的拼写。假设如果您想要`TextEditor`处理德语并能够进行拼写检查，您可以控制它。

使用 IoC，这个控制是倒置的，即它给了你，如何？该库将实现如下内容：

它将有一个`TextEditor`类，然后它会有一个`ISpeallChecker`（这是一个接口而不是一个具体的`SpellChecker`类），当您在 IoC 容器（例如 Spring）中配置内容时，您可以提供自己的“ISpellChecker”实现，它将检查德语的拼写。因此，拼写检查如何工作的控制权是从该库中获取并交给您的。那是国际奥委会。

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2019-02-28T17:37:32.303

**它是什么？** （耦合）控制反转，改变方法签名的耦合方向。使用反向控制，方法签名的定义由方法实现（而不是方法的调用者）决定。[完整的解释在这里](https://dzone.com/articles/inversion-of-coupling-control)

**它解决了哪个问题？** 自上而下的方法耦合。这随后消除了重构的需要。

**什么时候适合使用，什么时候不适合？** 对于不会发生太大变化的小型定义良好的应用程序，这可能是一种开销。但是，对于将要发展的定义较少的应用程序，它减少了方法签名的固有耦合。这给了开发人员更多的自由来发展应用程序，避免了对代码进行昂贵的重构的需要。基本上，允许应用程序在几乎没有返工的情况下发展。

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2019-04-13T14:58:16.617

要理解 IoC，我们应该谈谈依赖倒置。

依赖倒置：依赖于抽象，而不是具体。

控制反转：主要与抽象，以及主要如何成为系统的粘合剂。

![DIP 和 IoC](../Images/95eab047dfaa64791d1d89f28d907b41.png)

我写了一些很好的例子，你可以在这里查看它们：

[https://coderstower.com/2019/03/26/dependency-inversion-why-you-shouldnt-avoid-it/](https://coderstower.com/2019/03/26/dependency-inversion-why-you-shouldnt-avoid-it/)

[https://coderstower.com/2019/04/02/main-and-abstraction-the-decoupled-peers/](https://coderstower.com/2019/04/02/main-and-abstraction-the-decoupled-peers/)

[https://coderstower.com/2019/04/09/inversion-of-control-putting-all-together/](https://coderstower.com/2019/04/09/inversion-of-control-putting-all-together/)

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2020-11-01T07:31:55.543

IoC 原则有助于设计松散耦合的类，使它们可测试、可维护和可扩展。

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2020-01-11T14:32:32.020

控制反转是程序中责任转移的一个指标。

每次授予依赖项直接作用于调用方空间的能力时，都会发生控制反转。

最小的 IoC 是通过引用传递一个变量，让我们先看看非 IoC 代码：

```
function isVarHello($var) {
    return ($var === "Hello");
}

// Responsibility is within the caller
$word = "Hello";
if (isVarHello($word)) {
    $word = "World";
} 
```

现在让我们通过将结果的责任从调用者转移到依赖项来反转控制：

```
function changeHelloToWorld(&$var) {
    // Responsibility has been shifted to the dependency
    if ($var === "Hello") {
        $var = "World";
    }
}

$word = "Hello";
changeHelloToWorld($word); 
```

* * *

这是另一个使用 OOP 的示例：

```
<?php

class Human {
    private $hp = 0.5;

    function consume(Eatable $chunk) {
        // $this->chew($chunk);
        $chunk->unfoldEffectOn($this);
    }

    function incrementHealth() {
        $this->hp++;
    }
    function isHealthy() {}
    function getHungry() {}
    // ...
}

interface Eatable {
    public function unfoldEffectOn($body);
}

class Medicine implements Eatable {
    function unfoldEffectOn($human) {
        // The dependency is now in charge of the human.
        $human->incrementHealth();
        $this->depleted = true;
    }
}

$human = new Human();
$medicine = new Medicine();
if (!$human->isHealthy()) {
    $human->consume($medicine);   
}

var_dump($medicine);
var_dump($human); 
```

[*) 免责声明：现实世界中的人类使用消息队列。]

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2022-02-07T02:53:37.193

我在使用库或框架的上下文中想到了控制反转。

“控制”的传统方式是我们构建一个控制器类（通常是主类，但它可以是任何东西），导入一个库，然后使用您的控制器类来“控制”软件组件的动作。就像你的第一个 C/Python 程序（在 Hello World 之后）。

```
import pandas as pd
df = new DataFrame()
# Now do things with the dataframe. 
```

在这种情况下，我们需要知道 Dataframe 是什么才能使用它。你需要知道使用什么方法，它的取值方式等等。如果你通过多态将它添加到你自己的类中，或者只是重新调用它，你的类将需要 DataFrame 库才能正常工作。

“控制反转”是指过程被反转。不是您的类控制库、框架或引擎的元素，而是注册类并将它们发送回要控制的引擎。换句话说，IoC 可能意味着我们正在使用我们的代码来配置框架。您也可以将其视为类似于我们在列表中使用函数`map`或`filter`处理列表中数据的方式，除了将其应用于整个应用程序。

如果您是构建引擎的人，那么您可能正在使用依赖注入方法（如上所述）来实现这一目标。如果您是使用引擎的人（更常见），那么您应该能够只声明类、添加适当的符号并让框架完成其余的工作（例如创建路由、分配 servlet、设置事件、输出小部件等。） 为你。**********

# python - 使用模块名称（字符串）调用模块的函数

> ID：3061
> 
> 赞同：2174
> 
> 时间：2008-08-06T03:36:08.627
> 
> 标签：python, object

在 Python 程序中给定带有函数名称的字符串，调用函数的最佳方法是什么。例如，假设我有一个 module `foo`，并且我有一个字符串，其内容是`"bar"`. 最好的打电话方式是`foo.bar()`什么？

我需要获取函数的返回值，这就是为什么我不只使用`eval`. 我想出了如何通过使用`eval`定义一个返回该函数调用结果的临时函数来做到这一点，但我希望有一种更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：2595
> 
> 时间：2008-08-06T03:57:16.820

假设`foo`具有方法的模块`bar`：

```
import foo
method_to_call = getattr(foo, 'bar')
result = method_to_call() 
```

您可以将第 2 行和第 3 行缩短为：

```
result = getattr(foo, 'bar')() 
```

如果这对您的用例更有意义。

您可以[`getattr`](https://docs.python.org/library/functions.html#getattr)以这种方式在类实例绑定方法、模块级方法、类方法上使用……不胜枚举。

* * *

## 回答 #2

> 赞同：673
> 
> 时间：2009-05-07T12:45:13.747

```
locals()["myfunction"]() 
```

或者

```
globals()["myfunction"]() 
```

[locals](http://docs.python.org/library/functions.html#locals)返回带有当前本地符号表的字典。[globals](http://docs.python.org/library/functions.html#globals)返回一个带有全局符号表的字典。

* * *

## 回答 #3

> 赞同：412
> 
> 时间：2008-08-07T11:35:23.323

帕特里克的解决方案可能是最干净的。如果您还需要动态获取模块，您可以像这样导入它：

```
module = __import__('foo')
func = getattr(module, 'bar')
func() 
```

* * *

## 回答 #4

> 赞同：149
> 
> 时间：2012-08-19T09:40:43.627

只是一个简单的贡献。如果我们需要实例化的类在同一个文件中，我们可以使用如下内容：

```
# Get class from globals and create an instance
m = globals()['our_class']()

# Get the function (from the instance) that we need to call
func = getattr(m, 'function_name')

# Call it
func() 
```

例如：

```
class A:
    def __init__(self):
        pass

    def sampleFunc(self, arg):
        print('you called sampleFunc({})'.format(arg))

m = globals()['A']()
func = getattr(m, 'sampleFunc')
func('sample arg')

# Sample, all on one line
getattr(globals()['A'](), 'sampleFunc')('sample arg') 
```

而且，如果不是一个类：

```
def sampleFunc(arg):
    print('you called sampleFunc({})'.format(arg))

globals()['sampleFunc']('sample arg') 
```

* * *

## 回答 #5

> 赞同：139
> 
> 时间：2013-10-16T00:24:22.033

给定一个字符串，一个函数的完整 python 路径，这就是我如何获取所述函数的结果：

```
import importlib
function_string = 'mypackage.mymodule.myfunc'
mod_name, func_name = function_string.rsplit('.',1)
mod = importlib.import_module(mod_name)
func = getattr(mod, func_name)
result = func() 
```

* * *

## 回答 #6

> 赞同：80
> 
> 时间：2016-10-24T13:20:46.897

根据[Python 编程常见问题解答](https://docs.python.org/3/faq/programming.html#how-do-i-use-strings-to-call-functions-methods)的最佳答案是：

```
functions = {'myfoo': foo.bar}

mystring = 'myfoo'
if mystring in functions:
    functions[mystring]() 
```

> 这种技术的主要优点是字符串不需要匹配函数的名称。这也是用于模拟案例构造的主要技术

* * *

## 回答 #7

> 赞同：66
> 
> 时间：2014-04-09T10:17:41.807

答案（我希望）没人想要

评估类行为

```
getattr(locals().get("foo") or globals().get("foo"), "bar")() 
```

为什么不添加自动导入

```
getattr(
    locals().get("foo") or 
    globals().get("foo") or
    __import__("foo"), 
"bar")() 
```

如果我们有额外的字典要检查

```
getattr(next((x for x in (f("foo") for f in 
                          [locals().get, globals().get, 
                           self.__dict__.get, __import__]) 
              if x)),
"bar")() 
```

我们需要更深入

```
getattr(next((x for x in (f("foo") for f in 
              ([locals().get, globals().get, self.__dict__.get] +
               [d.get for d in (list(dd.values()) for dd in 
                                [locals(),globals(),self.__dict__]
                                if isinstance(dd,dict))
                if isinstance(d,dict)] + 
               [__import__])) 
        if x)),
"bar")() 
```

* * *

## 回答 #8

> 赞同：39
> 
> 时间：2012-02-14T05:55:36.507

对于它的价值，如果您需要将函数（或类）名称和应用程序名称作为字符串传递，那么您可以这样做：

```
myFnName  = "MyFn"
myAppName = "MyApp"
app = sys.modules[myAppName]
fn  = getattr(app,myFnName) 
```

* * *

## 回答 #9

> 赞同：37
> 
> 时间：2016-12-07T18:29:30.357

试试这个。虽然这仍然使用 eval，但它只使用它*从当前 context 中调用函数*。然后，您就可以根据需要使用真正的功能了。

这样做对我的主要好处是，在调用函数时，您将收到任何与 eval 相关的错误。然后你在调用时只会得到*与*函数相关的错误。

```
def say_hello(name):
    print 'Hello {}!'.format(name)

# get the function by name
method_name = 'say_hello'
method = eval(method_name)

# call it like a regular function later
args = ['friend']
kwargs = {}
method(*args, **kwargs) 
```

* * *

## 回答 #10

> 赞同：19
> 
> 时间：2012-12-28T16:56:45.310

任何建议都没有帮助我。我确实发现了这一点。

```
<object>.__getattribute__(<string name>)(<params>) 
```

我正在使用 python 2.66

希望这可以帮助

* * *

## 回答 #11

> 赞同：15
> 
> 时间：2019-03-26T18:15:53.643

作为这个问题[如何使用方法名称分配给标记为与此重复的变量[重复]来动态调用类中的方法](https://stackoverflow.com/questions/16642145/how-to-dynamically-call-methods-within-a-class-using-method-name-assignment-to-a)，我在这里发布了相关答案：

场景是，一个类中的一个方法想要动态调用同一个类上的另一个方法，我在原始示例中添加了一些细节，它提供了一些更广泛的场景和清晰度：

```
class MyClass:
    def __init__(self, i):
        self.i = i

    def get(self):
        func = getattr(MyClass, 'function{}'.format(self.i))
        func(self, 12)   # This one will work
        # self.func(12)    # But this does NOT work.

    def function1(self, p1):
        print('function1: {}'.format(p1))
        # do other stuff

    def function2(self, p1):
        print('function2: {}'.format(p1))
        # do other stuff

if __name__ == "__main__":
    class1 = MyClass(1)
    class1.get()
    class2 = MyClass(2)
    class2.get() 
```

> 输出（Python 3.7.x）
> 
> 功能1：12
> 
> 功能2：12

* * *

## 回答 #12

> 赞同：14
> 
> 时间：2020-07-16T15:20:48.160

尽管 getattr() 是优雅的（大约快 7 倍）方法，但您可以使用 eval 与`x = eval('foo.bar')()`. 并且当您实现一些错误处理时，就会非常安全（相同的原理可以用于 getattr）。模块导入和类的示例：

```
# import module, call module function, pass parameters and print retured value with eval():
import random
bar = 'random.randint'
randint = eval(bar)(0,100)
print(randint) # will print random int from <0;100)

# also class method returning (or not) value(s) can be used with eval: 
class Say:
    def say(something='nothing'):
        return something

bar = 'Say.say'
print(eval(bar)('nice to meet you too')) # will print 'nice to meet you' 
```

当模块或类不存在（错字或更好的东西）时，会引发 NameError。当函数不存在时，会引发 AttributeError。这可用于处理错误：

```
# try/except block can be used to catch both errors
try:
    eval('Say.talk')() # raises AttributeError because function does not exist
    eval('Says.say')() # raises NameError because the class does not exist
    # or the same with getattr:
    getattr(Say, 'talk')() # raises AttributeError
    getattr(Says, 'say')() # raises NameError
except AttributeError:
    # do domething or just...
    print('Function does not exist')
except NameError:
    # do domething or just...
    print('Module does not exist') 
```

* * *

## 回答 #13

> 赞同：11
> 
> 时间：2021-07-07T09:30:06.627

在python3中，您可以使用该`__getattribute__`方法。请参阅以下带有列表方法名称字符串的示例：

```
func_name = 'reverse'

l = [1, 2, 3, 4]
print(l)
>> [1, 2, 3, 4]

l.__getattribute__(func_name)()
print(l)
>> [4, 3, 2, 1] 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2020-07-01T08:09:44.203

`getattr`从对象中按名称调用方法。但是这个对象应该是调用类的父对象。父类可以通过`super(self.__class__, self)`

```
class Base:
    def call_base(func):
        """This does not work"""
        def new_func(self, *args, **kwargs):
            name = func.__name__
            getattr(super(self.__class__, self), name)(*args, **kwargs)
        return new_func

    def f(self, *args):
        print(f"BASE method invoked.")

    def g(self, *args):
        print(f"BASE method invoked.")

class Inherit(Base):
    @Base.call_base
    def f(self, *args):
        """function body will be ignored by the decorator."""
        pass

    @Base.call_base
    def g(self, *args):
        """function body will be ignored by the decorator."""
        pass

Inherit().f() # The goal is to print "BASE method invoked." 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2021-09-20T06:13:10.933

还没有人提到`operator.attrgetter`：

```
>>> from operator import attrgetter
>>> l = [1, 2, 3]
>>> attrgetter('reverse')(l)()
>>> l
[3, 2, 1]
>>> 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2021-06-15T08:14:59.950

我之前遇到过类似的问题，即将字符串转换为函数。**但我不能使用`eval()`or `ast.literal_eval()`，因为我不想立即执行此代码。**

例如，我有一个字符串`"foo.bar"`，我想将其分配`x`为函数名而不是字符串，这意味着我可以通过`x()` **ON DEMAND**调用该函数。

这是我的代码：

```
str_to_convert = "foo.bar"
exec(f"x = {str_to_convert}")
x() 
```

至于你的问题，你只需要添加你的模块名称`foo`和`.`之前`{}`如下：

```
str_to_convert = "bar"
exec(f"x = foo.{str_to_convert}")
x() 
```

**警告！！！要么 要么`eval()`是`exec()`一种危险的方法，你应该确认安全性。** **警告！！！要么 要么`eval()`是`exec()`一种危险的方法，你应该确认安全性。** **警告！！！要么 要么`eval()`是`exec()`一种危险的方法，你应该确认安全性。**

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-12-30T01:17:18.723

你的意思是从模块中获取指向内部函数的指针

```
import foo
method = foo.bar
executed = method(parameter) 
```

对于准时的情况，这不是更好的pythonic方式确实是可能的

* * *

## 回答 #18

> 赞同：-13
> 
> 时间：2019-08-28T16:46:12.583

这是一个简单的答案，例如，这将允许您清除屏幕。下面有两个示例，使用 eval 和 exec，在清理后将在顶部打印 0（如果您使用的是 Windows，则更`clear`改为`cls`，例如 Linux 和 Mac 用户保持原样）或分别执行它。

```
eval("os.system(\"clear\")")
exec("os.system(\"clear\")") 
```

# visual-studio - 用于模仿 Eclipse 的“开放类型”或“开放资源”键盘访问的 Visual Studio 插件

> ID：3067
> 
> 赞同：23
> 
> 时间：2008-08-06T03:44:41.197
> 
> 标签：visual-studio, plugins

如果您曾经使用过 Eclipse，您可能已经注意到了很棒的键盘快捷键，它可以让您按下快捷键组合，然后只需键入函数、类、文件名等的前几个字符。它甚至足够聪明，可以打开列表中的第一个文件。

![替代文字](../Images/a82312ab80abdbf5004054e4356cf2b9.png)

我正在为 Visual Studio 2008 寻找类似的功能。我知道在 codeproject 上有一个 findfiles 插件，但那个插件有问题而且有点奇怪，并且不能让我访问函数或类。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-21T09:38:06.973

Vs11（也许 2010 年也有）具有导航到...功能，（在我的机器上）具有`Ctrl`+`,`快捷方式。

顺便说一句，它将大写字母理解为驼峰式缩写（eclipse 也是如此）。例如输入 HH 来获取 HtmlHelper。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-03T16:34:14.593

这与您描述的 Eclipse 并不完全相同，但 Visual Studio 具有一些开箱即用的类似功能（我从未使用过 Visual Assist X，但听起来确实很有趣）。

工具栏中的 Find ComboBox 最终成为一种“Visual Studio 命令行”。您可以按`Ctrl`+ `/`（默认情况下）在此处设置焦点，Visual Studio 将在文本开头插入一个“>”（表示您要输入命令而不是搜索）。它甚至会在您键入时自动完成，帮助您查找命令。

无论如何，要从那里打开文件，请键入“open <filename>”。当您键入时，它将在下拉列表中显示任何匹配的文件（它从当前打开的解决方案中提取文件列表）。

要快速导航到某个函数，请在代码编辑器中按`Ctrl`+`I`开始增量搜索。然后开始输入，直到找到您要查找的内容。按`Escape`取消搜索，或`F3`使用相同的查询再次搜索。当您键入搜索查询时，左下角的状态栏将包含 Visual Studio 正在搜索的内容。当然，这不会搜索多个文件（我从来没有使用过太多的 Eclipse，但这听起来像你描述的那样），但希望它至少能帮助你一点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-11-24T09:25:31.777

如果有人偶然发现这个线程：

Visual Studio 2008 有一个免费插件（由我创建），它模仿了 Eclipse ++ `Ctrl`Open Resource 对话框（注意，不是 Open Type 对话框）。它适用于任何语言和/或项目类型。`Shift``R`

您可以在[Visual Studio Gallery](http://visualstudiogallery.msdn.microsoft.com/en-us/e4e906ee-2a2a-459b-85e8-df4b1c5666d1)中找到它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-06T05:06:57.723

Visual Assist X 中提供了一些简洁的功能，但不是全部。我在他们的论坛上问过，但他们还没有出现。VAX 会在大约 4 周的时间内定期更新，以修复错误并每隔几个月更新一个新功能。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-06T06:11:31.573

[Resharper](http://www.jetbrains.com/resharper/)使用`Ctrl`-`N`关键字执行此操作。不幸的是，它不是免费的。

Visual Studio 除了 Find 之外没有类似的功能。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-06T08:15:53.960

如果您正在寻找这样的插件来快速导航到项目中的源文件：

![SonicFileFinder 1.8.5](../Images/b9a8a82e2487a591b2d6db88c32c3dd5.png)

尝试 Visual Studio 2005/2008 插件[SonicFileFinder](http://jens-schaller.de/sonictools/sonicfilefinder/index.htm)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-04-01T10:37:49.107

在搜索 Eclipse 的 Ctrl+Shift+R 时发现了这个线程，在看到 Visual Studio Gallery 之后，找到了[DPack Tools](http://www.usysware.com/dpack/Default.aspx)（它们是免费的，不，我不以任何方式认可它们）。

但这正是我正在搜索的内容：- Alt+U -> 文件浏览器（a la Eclipse Ctrl+Shift+R）- Alt+M -> 代码浏览器（实际类中的方法列表）

它有更多的功能，但我对这些很满意。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-15T13:21:55.333

我也来自 Java 开发方面，正在寻找 Visual Studio 中的 CTRL+T 功能。其他答案是指打开文件，但由于在 C# 中类名和文件名可能不同，这不是我想要的。

使用**类视图**或**对象浏览器**，您可以搜索对象和类

[视图]->[类视图]或[视图]->[对象]

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-02T18:13:22.980

我一直在使用 biterScripting 和 Visual Studio 来进行更灵活的搜索和操作。

1.  它可以搜索整个工作区。

2.  它可以在任何项目中搜索 - 即使该项目未加载或工作空间的一部分。

3.  它可以使用正则表达式查找内容。

4.  而且，最重要的是，它可以进行批量更改。例如，想将一个类的名称从 CCustomer 更改为 CUser，我只需几个命令行即可完成 - 实际上，我已经为我经常做的此类事情编写了脚本。我不必单击每个实例并手动进行更改。

5.  而且，它很便宜（0 美元）。我从[http://www.biterscripting.com](http://www.biterscripting.com)下载了它。

# ajax - ASP.NET AJAX 部分呈现可以在 SharePoint 2007 应用程序页面中工作吗？

> ID：3075
> 
> 赞同：14
> 
> 时间：2008-08-06T04:20:41.920
> 
> 标签：ajax, sharepoint

我有一个带有 my`ScriptManager`和 my的简单页面`UpdatePanel`，并且 my`ContentTemplate`有一个`ListBox`和一个标签。我只是想抓住它`OnSelectionChanged`，这样我就可以更新`Label`. 无论我尝试调整什么设置，我总是会收到整页的回传。

这真的行不通，还是我只是搞砸了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-06T04:43:31.267

您需要拥有 Sharepoint 2007 service pack 1——否则就没有机会了。（Sharepoint 2007 早于 ajax 1.0——他们在 service pack 1 中内置了一些支持）

接下来，从故障排除的角度，测试托管在常规 asp.net 页面中的**完全相同的代码是否可以正常运行。**（从字面上复制并粘贴您的代码到一个新页面，以排除任何印刷错误）。将共享点划入或划出问题区域将有助于缩小解决方案空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T20:14:51.107

如果您已经安装了 SharePoint 2007（没有 Service Pack 1），那么您可以按照以下文章中的示例进行操作：

[AjaxBasePart：Easy ASP.NET 2.0 AJAX Extensions 1.0 和 Office SharePoint Server 2007](http://www.capdes.com/2007/02/microsoft_office_sharepoint_se.html)

这样做的原因是混合 doPostback、UpdatePanel 和 SharePoint 存在一个特定问题 - 症状正是您所看到的：整页回发而不是异步回发。有关解决方法，请参阅此知识库文章：[包含使用 _doPostBack() 的 ASP.NET AJAX 1.0 UpdatePanel 控件的 Web 部件...](http://support.microsoft.com/kb/941955)

否则，您只需安装 Service Pack 1 即可解决您的问题：

[Windows SharePoint Services 3.0 服务包 1 (SP1)](http://www.microsoft.com/downloads/details.aspx?FamilyId=4191A531-A2E9-45E4-B71E-5B0B17108BD2&displaylang=en)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-02T18:34:28.260

混合 doPostback、UpdatePanel 和 SharePoint 存在一个特定问题——症状正是您所看到的：整页回发而不是异步回发。有关解决方法，请参阅此知识库文章：http: [//support.microsoft.com/kb/941955](http://support.microsoft.com/kb/941955)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-11T11:08:48.287

Mindsharp 的 Todd Bleeker 向我展示了他编写的一段代码，该代码可以在 Sharepoint 2.0 上使用 Ajax。这很酷。如果您想看一下，我相信该公司在他们的 sharepoint 站点管理软件上使用了它。（您过去可以申请 30 天试用）。我敢打赌如何在他们的 yahoo 组上进行操作（我不记得名字了，但我敢肯定，如果你搜索 mindsharp，你会找到它。）

需要说明的是，Ajax 已经存在了很长时间。微软从 2002 年开始很容易支持它，可能更早的 IE 5.5 发布（我不知道其他浏览器，我在做内部开发，我们当时只支持 ie）。只是没有这么叫。Ajax 一词只不过是后来有人创造的营销术语。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-12T07:13:36.627

获取 SharePoint 2007 的最新服务包将解决您的问题（并添加对 AJAX 的全面支持）。如果没有服务包，您将需要遵循本文中概述的示例：

[AjaxBasePart：Easy ASP.NET 2.0 AJAX Extensions 1.0 和 Office SharePoint Server 2007](http://www.capdes.com/2007/02/microsoft_office_sharepoint_se.html)

发布此消息以便人们知道即使没有最新的服务包也有答案（secretGeek 的回复似乎说没有机会）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-15T06:26:15.970

从技术的角度来看，Service Pack 1**没有**添加对 ASP.NET AJAX 的完全支持。您仍然需要使用前面答案中提到的各种文章中描述的解决方法。

特别是，您需要确保您的 SharePoint Web 应用程序的 web.config 文件已更新以支持适当版本的 ASP.NET AJAX 扩展。

web.config 未更新的事实最有可能导致原始问题中描述的问题。

# python - 教初学者编程的最佳方法？

> ID：3088
> 
> 赞同：324
> 
> 时间：2008-08-06T05:01:16.677
> 
> 标签：python, language-agnostic

**原始问题**

我目前正在教我的兄弟编程。他是一个完全的初学者，但非常聪明。（他实际上想学习）。我注意到我们的一些会议在一些小细节上陷入了困境，而且我觉得我的组织不够有序。（*但这篇文章的答案有很大帮助。*）

我能做些什么来更好地教他？是否有一个逻辑顺序可以用来逐个概念地运行？有没有我应该在以后避免的复杂性？

我们使用的语言是[Python](http://www.python.org)，但欢迎任何语言的建议。

* * *

**如何帮助**

如果你有好的，请在你的答案中添加以下内容：

*   初学者练习和项目构想
*   初学者教学资源
*   截屏视频/博客文章/免费电子书
*   印刷适合初学者的书籍

*请用链接*描述该资源，以便我查看。我想让每个人都知道，我肯定一直在使用其中的一些想法。您提交的内容将汇总在此帖子中。

* * *

**面向初学者的**在线资源：****

 ***   [使用 Python 进行编程的简单介绍](http://ocw.mit.edu/OcwWeb/Electrical-Engineering-and-Computer-Science/6-189January--IAP--2008/CourseHome/)
*   [如何像计算机科学家一样思考](http://openbookproject.net/thinkcs/python/english2e/index.html)
*   [Alice：适合初学者的 3D 程序](http://www.alice.org/)
*   [Scratch（开发编程技能的系统）](http://scratch.mit.edu/)
*   [如何设计程序](http://www.htdp.org/)
*   [计算机程序的结构和解释](http://mitpress.mit.edu/sicp/full-text/book/book.html)
*   [学习编程](http://pine.fm/LearnToProgram/)
*   [Robert Read 如何成为一名程序员](http://samizdat.mines.edu/howto/HowToBeAProgrammer.html)
*   [微软 XNA](http://creators.xna.com/)
*   [催生下一代黑客](http://vodpod.com/watch/914464-inspirational-oscon-keynote)
*   [*COMP1917* Richard Buckland 的高等计算讲座](http://deimos3.apple.com/WebObjects/Core.woa/Browse/unsw.edu.au.1504975442.01504975444)（需要 iTunes）
*   [潜入 Python](http://diveintopython.net/)
*   [Python 维基书](http://en.wikibooks.org/wiki/Programming:Python)
*   [Project Euler](http://projecteuler.net/) - 示例问题（主要是数学问题）
*   [pygame](http://www.pygame.org/) - 一个用于创建游戏的简单 python 库
*   [用 Python 发明你自己的电脑游戏](http://inventwithpython.com/IYOCGwP_book1.pdf)
*   超越基础的下一步[编程基础。](http://codebetter.com/blogs/karlseguin/archive/2008/06/24/foundations-of-programming-ebook.aspx)
*   [举例说明](http://www.iam.unibe.ch/~scg/SBE/)
*   [为孩子们争吵的蛇](http://www.briggs.net.nz/log/writing/snake-wrangling-for-kids/)（这不仅仅是为孩子们准备的！）

* * *

**推荐给初学者的**印刷书籍****

 ***   [加速 C++](http://www.acceleratedcpp.com/)
*   [绝对初学者的 Python 编程](https://rads.stackoverflow.com/amzn/click/com/1598631128)
*   [Charles Petzold 的代码](https://rads.stackoverflow.com/amzn/click/com/0735611319)
*   [Python 编程：计算机科学导论第 2 版](https://rads.stackoverflow.com/amzn/click/com/1590282418)

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2008-08-06T06:00:28.740

我不得不与几个初学者（从未编写过一行代码）程序员一起工作，今年秋天我将与高中生一起做一个课后研讨会。这是我最接近文档的东西。它仍在进行中，但我希望它有所帮助。

1)**嘶嘶声。**从命令行程序开始。您可以非常快速地编写一些有趣的游戏或工具，并且您可以非常快速地学习所有语言功能，而无需先学习 GUI 工具。这些早期的应用程序应该足够简单，以至于您不需要使用任何真正的调试工具来使它们工作。

如果没有别的东西像 FizzBu​​zz 是好的项目。您的前几个应用程序不必处理数据库、文件系统、配置等。这些概念只会让大多数人感到困惑，当您只是学习语法和基本框架功能时，您真的不需要更多复杂性。

一些项目：

*   你好世界！
*   取我的出生年份，并计算我的年龄（只是（现在 - 那时）没有月份更正）。*（简单的数学，输入，输出）*
*   询问方向（上、下、左、右），然后告诉用户他们的命运（掉进洞里，找到蛋糕等）。*（布尔逻辑）*
*   FizzBu​​zz，但每秒计数一次。*（循环、计时器和更多逻辑）*
*   根据他们的年龄，有些人真的很喜欢一个应用程序，它会在一段时间内对用户进行随机侮辱。*（循环、数组、计时器和随机，如果你使间隔随机）*

2）**简单的项目**一旦他们很好地掌握了语言特性，就可以开始一个项目（简单，有趣的游戏很好用。）。你应该尽量让第一个项目能够在 6-12 小时内完成。不要花时间尽早构建它。让他们设计它，即使它很糟糕。如果它分崩离析，请谈谈发生了什么以及失败的原因，然后选择另一个主题并重新开始。

这是您开始介绍工具的调试功能的地方。即使您可以通过阅读代码看到问题，您也应该教他们如何使用这些工具，然后向他们展示您如何看到它。这具有双重目的，即教授调试工具和教授如何在没有工具的情况下识别错误。

一旦或如果项目开始运行，您就可以使用它来引入重构工具。如果您随后可以使用一些您从未计划过的简单功能来扩展项目，那就太好了。这通常意味着重构和重要的调试，因为很少有人第一次写出一半体面的代码。

一些项目：

*   刽子手游戏
*   试验机器人（[Vex](http://www.vexlabs.com)和[Mindstorms](http://mindstorms.lego.com)是选项）

3)**真实项目**开始一个可能需要一些时间的真实项目。使用适当的源代码控制，并明确制定时间表。像真正的项目一样运行这个项目，如果没有别的，它必须处理工具的良好体验。

显然，您需要针对每个人进行调整。我发现的最重要的事情是让即使是第一个简单的应用程序也适用于人们感兴趣的内容。

一些项目：

*   俄罗斯方块
*   基于文本文件的博客引擎
*   更先进的机器人工作

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2008-08-06T05:29:49.240

您可以尝试使用[Alice](http://www.alice.org/)。这是一个 3D 程序，设计用于介绍性编程课程。

新程序员的两个最大障碍通常是：

*   语法错误
*   动机（写一些有意义和有趣的东西，而不是做作）

Alice 使用拖放界面来构建程序，避免了语法错误的可能性。Alice 让您构建 3D 世界并让您的代码控制（简单）3D 角色和动画，这通常比实现链接列表更有趣。

有经验的程序员可能会把 Alice 看成是一个玩具，并嘲笑拖放代码行，但[研究](http://www.alice.org/index.php?page=publications/publications)表明这种方法是有效的。

免责声明：我为爱丽丝工作。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2008-08-20T21:09:00.913

我推荐 Logo（又名海龟）来了解基本概念。它提供了一个带有即时图形反馈的良好沙箱，您可以演示循环、变量、函数、条件等。[这个页面](http://mckoss.com/logo/ "学习标志")提供了一个很好的教程。

在 Logo 之后，转到 Python 或 Ruby。我推荐 Python，因为它基于 ABC，它是为教授编程而发明的。

在教授编程时，我必须先考虑 EHaskins 关于简单项目的建议，然后才是复杂项目。最好的学习方式是从确定的结果和可衡量的里程碑开始。它使课程保持专注，允许学生建立技能，然后在这些技能上建立，并为学生提供一些可以向朋友炫耀的东西。不要低估为自己的工作展示一些东西的力量。

从理论上讲，您可以坚持使用 Python，因为 Python 几乎可以做任何事情。它是教授面向对象编程和（大多数）算法的好工具。您可以像命令行一样以交互模式运行 Python 以了解它的工作原理，或者一次运行整个脚本。您可以运行即时解释的脚本，或将它们编译成二进制文件。有数千个模块可以扩展功能。你可以制作一个像 Windows 捆绑的图形计算器，或者你可以制作一个 IRC 客户端，或其他任何东西。

[XKCD](http://xkcd.com/353/ "Python")更好地描述了 Python 的强大功能： ![](../Images/fc88ad9978782a5e90679d125fa8091c.png "Python")

之后您可以迁移到 C# 或 Java，尽管它们没有提供 Python 所没有的太多功能。这样做的好处是它们使用许多（我敢说最多？）语言使用的 C 样式语法。您还不需要担心内存管理，但是您可以习惯于从语言解释器那里获得更多的自由和更少的牵手。Python 强制使用空格和缩进，这在大多数情况下都很好，但并非总是如此。C# 和 Java 允许您在保持强类型的同时管理自己的空格。

从那里开始，标准是 C 或 C++。这些语言的自由几乎是存在的。您现在负责自己的内存管理。没有垃圾收集可以帮助您。这是您教授真正高级算法（如合并排序和快速排序）的地方。在这里您可以了解为什么“分段错误”是一个诅咒词。在这里您可以下载 Linux 内核的源代码并凝视深渊。首先编写一个循环缓冲区和一个用于字符串操作的堆栈。然后努力向上。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2008-08-06T05:47:05.553

一个好的 Python 课程是 MIT 的[A Gentle Introduction to Programming Using Python](http://ocw.mit.edu/OcwWeb/Electrical-Engineering-and-Computer-Science/6-189January--IAP--2008/CourseHome/)。这一切都是在线免费的，你不必成为麻省理工学院的超级学生就能理解它。

> 编辑 [[贾斯汀标准](https://stackoverflow.com/users/92/justin-standard)]
> 
> 本课程使用这本免费的在线书籍：[如何像计算机科学家一样思考](http://www.openbookproject.net/thinkcs/python/english2e/index.xhtml)
> 我肯定发现它非常有用。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2009-02-25T21:00:08.037

**从 Python 中的 Turtle 图形开始。**

我会使用 Python 标配的海龟图形。它直观、简单，您可以使用此环境介绍许多编程概念，例如迭代和过程调用，然后再深入了解语法。考虑以下 python 中的交互式会话：

```
>>> from turtle import *
>>> setup()
>>> title("turtle test")
>>> clear()
>>>
>>> #DRAW A SQUARE
>>> down()        #pen down
>>> forward(50)   #move forward 50 units
>>> right(90)     #turn right 90 degrees
>>> forward(50)
>>> right(90)
>>> forward(50)
>>> right(90)
>>> forward(50)
>>>
>>> #INTRODUCE ITERATION TO SIMPLIFY SQUARE CODE
>>> clear()
>>> for i in range(4):
        forward(50)
        right(90)
>>>
>>> #INTRODUCE PROCEDURES   
>>> def square(length):
        down()
        for i in range(4):
            forward(length)
            right(90)
>>>
>>> #HAVE STUDENTS PREDICT WHAT THIS WILL DRAW
>>> for i in range(50):
        up()
        left(90)
        forward(25)
        square(i)
>>>
>>> #NOW HAVE THE STUDENTS WRITE CODE TO DRAW
>>> #A SQUARE 'TUNNEL' (I.E. CONCENTRIC SQUARES
>>> #GETTING SMALLER AND SMALLER).
>>>
>>> #AFTER THAT, MAKE THE TUNNEL ROTATE BY HAVING
>>> #EACH SUCCESSIVE SQUARE TILTED 
```

在尝试完成最后两个任务时，他们会有很多失败的尝试，但是这些失败会在视觉上很有趣，并且他们会在试图弄清楚为什么它没有画出他们期望的那样时快速学习。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2008-09-08T18:26:28.447

Python 包[VPython——普通人](http://vpython.org)的 3D 编程（[视频教程](http://showmedo.com/videos/video?name=pythonThompsonVPython1&fromSeriesID=30)）。

[代码示例：](http://vpython.org/vpythonprog.htm)

```
from visual import *

floor = box (pos=(0,0,0), length=4, height=0.5, width=4, color=color.blue)
ball = sphere (pos=(0,4,0), radius=1, color=color.red)
ball.velocity = vector(0,-1,0)
dt = 0.01

while 1:
    rate (100)
    ball.pos = ball.pos + ball.velocity*dt
    if ball.y < ball.radius:
        ball.velocity.y = -ball.velocity.y
    else:
        ball.velocity.y = ball.velocity.y - 9.8*dt 
```

[VPython 弹跳球 http://vpython.org/bounce.gif](http://vpython.org/bounce.gif)

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2008-08-22T10:35:35.553

关键是相关人员需要有一些他们想要解决的问题。如果您没有想要编写的程序（以及一些明智且定义明确的程序，而不是“我想编写下一个 Quake！”），那么您就无法学习编程，因为您没有任何东西可以激励您. 我的意思是，您可以阅读一本书并对一门语言的语法和语义有一个粗略的了解，但是在您拥有*一个您想要编写的程序*之前，您永远不会抓住荨麻。

如果存在这种推动力，那么其他一切都只是小细节。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2010-10-19T00:42:21.437

我不知道是否有人在这里提到过这个，但是你可能想看看[Zed Shaw](http://www.zedshaw.com/)的[Learn Python the Hard Way](http://www.learnpythonthehardway.com)

希望这可以帮助

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2008-08-06T16:37:38.703

http://tryruby.hobix.com/">试用 Ruby（在您的浏览器中）

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2008-08-07T10:04:27.560

[如何设计程序](http://www.htdp.org/)

[计算机程序的结构和解释](http://mitpress.mit.edu/sicp/full-text/book/book.html)。[http://www.swiss.ai.mit.edu/classes/6.001/abelson-sussman-lectures/](http://www.swiss.ai.mit.edu/classes/6.001/abelson-sussman-lectures/)上的视频讲座

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2008-08-07T05:33:05.440

这是一本很棒的书，我的小兄弟们曾经学习过：

[http://pine.fm/LearnToProgram/](http://pine.fm/LearnToProgram/)

当然，最重要的是在读完这本书后立即开始一个真正有用的某种程序。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2008-08-06T05:08:37.020

如果他有兴趣，小细节不就是好的部分吗？使用 python，您已经切断了它的 GUI，这样混乱就消失了。为什么不选择一个项目、一个游戏或其他东西并实施它。经典的高低猜数字游戏可以简单地从命令行以 20-30 行代码（当然取决于语言）实现，并为您提供变量、条件、循环和用户输入。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2008-08-09T01:37:07.920

我只是让他写大量的代码。让他参与你们所做的一切，并随时回答问题。

信不信由你，在写了几个月的蹩脚代码之后，他会开始明白这个想法并开始编写更好的程序。那时，您可能会陷入细节（内存等）的困境，并且还会谈论一般设计原则。

我听说伟大的艺术家与平庸的艺术家的区别在于，每次他们练习时，他们都会改进一些东西，无论多么小。让你哥哥练习，每次坐在键盘前他都会进步。

> 编辑：[贾斯汀标准]
> 
> Esteban，这让我想起了最近的一篇[编码恐怖帖子](http://www.codinghorror.com/blog/archives/001160.html)，我*认为*你是对的。但我觉得还是值得寻找方法来*指导*他的修行。毫无疑问，我希望他尽可能多地编写代码。这就是我要求提供示例项目的原因之一。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-08-06T05:13:15.763

首先，像其他人一样开始：使用[Hello World](http://en.wikipedia.org/wiki/Hello_world)程序。这很简单，它让他们对程序的布局有一个基本的感觉。试着回想一下你第一次编程的时候，以及一些概念是多么困难——从简单开始。

在 Hello World 之后，继续创建一些基本变量、算术，然后是布尔逻辑和 if/else 语句。如果您有一本旧的编程教科书，请查看一些早期的示例并让他阅读这些示例。只是不要试图一次介绍太多，否则会让人不知所措和混乱。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-08-06T05:18:46.657

在教你的兄弟编程时，你应该非常注意的是，他不要过于依赖你。通常当我发现自己在帮助别人时，他们会开始认为我是他们所有问题的答案，而不是尝试寻找答案，他们只是问我。最好的老师通常是实验，每次你的兄弟有一个问题，比如“如果我在一个字符串上加 2 会发生什么？” 你应该告诉他自己试试看。我还注意到，当我无法将概念传达给某人时，查看一些示例代码会有所帮助，我们可以在其中单独查看每个部分并逐段解释。作为旁注，刚接触编程的人经常对面向对象编程的想法感到困惑，

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-08-06T06:07:51.003

我曾经教过编程，而你的兄弟与他想学习的大多数学生相比，有一个主要优势:)

如果你决定使用 C 语言[，朋友的网站](http://cymonsgames.retroremakes.com/)上有一些老一代人记得的基本类型的程序。它们中更复杂的使用 ncurses，这在某种程度上否定了它们作为教具的使用，但其中一些是很小的东西，你可以在不被教导的情况下学习负载。

就我个人而言，我认为 Python 和 Ruby 会成为很好的第一语言。

编辑： 一夜之间出现[的初学者编程作业列表](http://cymonsgames.retroremakes.com/beginners-programming-homework/)可能正是您正在寻找的。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-08-26T03:39:08.407

有一[本非常适合学习 python](http://en.wikibooks.org/wiki/Programming:Python)的wikibook 。

我不知道 wikibooks 对其他语言的影响如何，但我个人从 wikibook 中学习了 python，就像 2007 年 2 月一样

ps - 如果你不熟悉[wikibooks](http://en.wikibooks.org/wiki/Main_Page)，它基本上是 wikipedia 版本的书籍创作。这有点难以描述，但如果你看看那里的几本书，你就会明白它是如何工作的

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2010-12-08T16:58:37.297

[蟒蛇挑战](http://www.pythonchallenge.com/)

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2008-08-06T10:44:54.297

这真的取决于你兄弟的学习方式。许多人通过亲自动手并开始学习，在进步和积累知识的过程中明确概念和全局，从而学得更快。

我，我更喜欢从大局开始，深入细节。我想知道的第一件事是它是如何组合在一起的，然后是面向对象的 gobbledygook，然后是关于类和实例等等。在学习语法之前，我喜欢了解基本概念和一些理论。我有一点优势，因为我在 20 年前用 BASIC 写过一些游戏，但从那以后就没什么了。

在实际编写代码之前，先从总体使命陈述开始，然后是计划和/或流程图，然后详细说明一些伪代码（倾向于您最终将使用的语法），来跟踪生产过程也许是有用的。

这里的黄金法则是确定学生的学习风格。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2008-08-20T21:54:17.840

如果您的兄弟可以访问 iTunes，他可以下载新南威尔士大学 Richard Buckland 提供的计算机科学入门课程的视频讲座。他是一位引人入胜的讲师，涵盖了计算和 C 语言的基础知识。如果不出意外，请告诉你的兄弟在后台播放视频，一些概念可能会通过渗透而深入人心。:)

**COMP1917 高等计算 - 2008 年第 1 节** [http://deimos3.apple.com/WebObjects/Core.woa/Browse/unsw.edu.au.1504975442.01504975444](http://deimos3.apple.com/WebObjects/Core.woa/Browse/unsw.edu.au.1504975442.01504975444)

如果链接不起作用，这是一个路径：

主页 -> iTunes U --> 工程 --> COMP1917 Higher Computing - 2008 Session 1

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2008-09-08T17:55:47.677

[绝对初学者的 Python 编程](http://safari.oreilly.com/1592000738)

[绝对初学者的 Python 编程封面 http://safari.oreilly.com/images/1592000738/1592000738_xs.jpg](http://safari.oreilly.com/images/1592000738/1592000738_xs.jpg)

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2009-08-04T22:20:23.637

我认为 Python 是个好主意。我会给他一些基本的任务让他自己做，并告诉他他遇到的任何死胡同都可以通过谷歌之旅来解决。至少对我来说，自己解决问题总是比别人告诉我解决方案更好。

一些可能的项目（排名不分先后）：

*   硬币翻转模拟器。让用户输入所需的掷硬币试验次数。执行它并显示结果以及正面或反面的百分比。

*   制作一个带有菜单的温度转换器，该菜单接受用户输入来选择用户想要进行的转换类型。选择转换并执行后，它应该返回主菜单。

    这是具有相同想法的扩展转换器的示例：http: [//pastebin.org/6541](http://pastebin.org/6541)

*   制作一个程序，接受数字输入并显示它将转换为的字母等级。它将最终根据 if 和 elif 语句评估输入以找到适合的位置。

*   做一个简单的测验，包括多项选择题或填空题。最后，它将显示用户的操作方式。他可以选择任何他想问的问题。

*   输入一些（可能很大）便士并将其转换为更大的面额。例如，149 便士 = 1 美元、1 夸特、2 美分和 4 便士。

*   创建一个简单的列表管理器。能够添加/删除列表以及在这些列表中添加/删除条目。这是圣诞节列表管理器的示例：http: [//pastebin.org/6543](http://pastebin.org/6543)

*   创建一个程序，该程序将构建然后测试输入的数字是否形成幻方（带有二维数组）。这是一些示例代码，但它应该在每个步骤中真正打印出正方形，以显示用户在构建正方形方面的位置：http: [//pastebin.org/6544](http://pastebin.org/6544)

我还建议使用 xTurtle 或其他图形模块做一些事情来混合内容并防止他变得无聊。当然，这是非常多的练习编程，而不是很多人真正会使用 python 的脚本，但是我给出的示例几乎直接取自我通过 python 学习时，它对我来说非常有用。祝你好运！

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2010-03-19T13:44:53.010

让它变得有趣！

[令人惊讶的是，如果您尝试Kojo](http://www.kogics.net/sf:kojo)，Scala 可能是最简单的

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2010-04-07T00:35:21.363

如果您的兄弟喜欢拼图，我会推荐[Python Challenge](http://www.pythonchallenge.com "蟒蛇挑战")。我不会将它用作 1 对 1 教程中的正式教学工具，但当你不在一起挑战自己并获得乐趣时，这是他可以做的事情。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2011-01-03T01:54:43.940

在浏览了几本免费的电子书后，我发现学习编程的最佳书籍是 O'Reily Press 出版的 Head First Programming。它使用 Python 作为语言，并为您提供从一开始就可以使用的程序。它们都比“Hello World”更有趣。我花在它上面的钱物有所值，而且由于它已经发售了一段时间，您也许可以在 Ebay 或 Amazon 上找到更便宜的二手副本。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2008-08-22T14:09:28.643

Python 对于新开发人员来说很容易学习。您不会纠结于内存管理和类型定义的细节。[Dive Into Python](http://diveintopython.net/ "潜入 Python")是一本很好的 Python 编程初学者指南。当我姐姐想学习编程时，我指给她看“Head Start”系列的书，她觉得这些书很容易阅读和理解。我发现刚开始教别人很难，因为你没有词典可以和他们一起使用。首先让他读几本书或教程，然后问你问题。从那里您可以分配项目并对其进行评分。我发现教编程很困难，因为我是在近 15 年的修修补补中学会的。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2008-09-08T17:40:52.427

如果他有兴趣，我就不会担心专注于游戏或诸如此类的事情。我只是抓住你要扔的那本初学者“自学x”的书，给他，让他挣扎。也许以后再谈，然后再做一个又一个。之后我会和他结对编程，这样他就可以知道他读的那些书是多么肤浅和蹩脚。然后我会开始让他为自己编写一些代码。一个跟踪垒球统计数据或任何能吸引他的网站。对我来说，它是当时的葡萄酒数据库。

之后，我会开始研究真正的书籍、领域设计等。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2008-08-09T16:28:05.737

Robert Read 写了一个有用的指南，[如何成为一名程序员](http://samizdat.mines.edu/howto/HowToBeAProgrammer.html)，它涵盖了初学者会发现有帮助的广泛的编程问题。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2008-08-06T07:15:53.953

如果您想教授编程的基础知识，而不是特定于语言，那么麻省理工学院创建了一个名为[Scratch的应用程序。](http://scratch.mit.edu/)它旨在帮助人们发展编程技能。当用户创建 Scratch 项目时，他们会学习创建条件、循环等。还有一个 Scratch 项目社区，可以下载哪些项目 - 这样您就可以探索其他人的程序并查看它们是如何构建的。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2009-07-08T09:57:21.460

我认为 Python 是一门非常棒的语言：:-)

我建议你试试[http://www.pythonchallenge.com/](http://www.pythonchallenge.com/)

它的构建就像一个小型冒险，每个解决方案都将您链接到一个新的好问题。

解决问题后，您可以访问一个不错的论坛来讨论您的代码并查看其他人创建的内容。

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2008-08-19T14:52:48.043

There is a book called *Code*. I can't remember who wrote it, but it goes through the basics of a lot of stuff that we (programmers) know and take for granted that people we talk to know also. Everything from how do you count binary to how processors work. It doesn't have anything dealing with programming languages in it (well from what I remember), but it is a pretty good primer. I will admit that I am also of the school that believes you have to know how the computer works to be able to effectively program things for it.

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2008-08-11T04:30:31.143

There have already been a bunch of great answers, but for an absolute beginner, I would wholeheartedly recommend [Hackety Hack](http://hacketyhack.net/). It was created by the unreasonably prolific [why_the_lucky_stiff](http://whytheluckystiff.net/) specifically to provide a BASIC/LOGO/Pascal-like environment for new programmers to experiment in. It's essentially a slick Ruby IDE with some great libraries (flash video, IM, web server) and interactive lessons. It makes a good pitch for programming, as it chose lessons that do fun, useful things. "Hello, world" may not impress right off the bat, but creating a custom IM client in 20 minutes can inspire someone to keep learning. Have fun!

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2008-08-11T12:23:24.247

Copy some simple code line by line and get them to read and interpret it as they go along. They will soon work it out. I started programming on an Acorn Electron with snippets of code from Acorn magazines. I had no idea about programming when I was 6, I used to copy the text, but gradually I learnt what the different words meant.

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2008-08-23T18:14:19.297

我推荐 Charles Petzold 的书[Code - The Hidden Language of Computer Hardware and Software](http://books.google.com/books?id=l4gpAAAACAAJ&dq=petzold+code&ei=2U-wSL_hNoLmygSxpcmoDQ)作为对计算机工作原理的一般性介绍。

书中有*很多*信息（382 页），绝对初学者可能需要一些时间才能阅读，但非常值得。Petzold 设法以非常清晰和令人愉快的方式解释了计算机和编程的许多核心概念，从简单的代码、继电器、内存、CPU 到操作系统和 GUI。它将使任何读者在编写代码时对幕后实际发生的事情有一个很好的了解。

我当然希望它在我第一次学习编程时就在身边！

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2008-09-01T13:21:44.107

教年轻人的一个很好的资源是免费的电子书“用 Python 发明你自己的游戏”：

[http://pythonbook.coffeeghost.net/book1/IYOCGwP_book1.pdf](http://pythonbook.coffeeghost.net/book1/IYOCGwP_book1.pdf)

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2009-08-26T15:22:35.967

Try to find a copy of [Why's (Poignant) Guide to Ruby](http://en.wikipedia.org/wiki/Why's_(poignant)_Guide_to_Ruby) online. The original site is offline but I'm sure there are a few mirrors out there. It's not your typical programming guide; it puts a unique (and funny) spin on learning a new language that might suit your friend. Not to mention, Ruby is a great language to learn with.

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2008-08-26T19:12:37.413

我不确定什么对你的兄弟最好，但我知道我是从 python 开始的。我从小就玩各种游戏，想自己做，所以我叔叔向我介绍了带有[pygame](http://www.pygame.org/ "pygame 网站")库的 python。它有很多教程，让一切变得简单（在我看来比 openGL 容易得多）。它*仅限*于 2d，但无论如何你应该从简单开始。

我叔叔推荐 python 是因为他当时对它很感兴趣，但我推荐它，现在知识渊博，因为它易于学习、直观（或与编程语言一样直观）和简单（但肯定不简单） .

当时我个人觉得基础编程只是为了学习编程而枯燥无味，但随着我的学习，我获得了相当大的热情。我真的很想学习是为了创造一些东西，而不仅仅是为了学习它。

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2008-08-13T06:10:25.183

这听起来可能很愚蠢，但你为什么要教你的兄弟编程？

最好的学习环境通常包括一个敏锐的初学者可以实现的目标（一个示例程序）、充足的资源供应（谷歌/教程/书籍），以及可以在需要时提供指导的知识渊博的建议来源。

您绝对可以为前两个提供建议，但最后一个是您的主要角色。

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2008-08-09T02:23:54.160

我通过学习如何使用流程图和[PDL](http://en.wikipedia.org/wiki/Program_Design_Language)（程序设计语言）以与语言无关的方式解决问题来学习。几周后，我学会了将我编写的 PDL 转换为一种语言。我很高兴我学会了这种方式，因为我大部分时间都在编程，在不受语言束缚的情况下解决问题。我使用的语言一直是实现细节，而不是设计的一部分。

必须通过将问题分解为基本步骤来解决问题是一项关键技能。我认为这是将那些可以编程的人和那些不能编程的人区分开来的事情之一。

至于如何处理语言概念的顺序，我认为最简单的方法是确定一个项目并在需要时处理这些概念。这使您可以根据需要将它们应用于您有兴趣做的事情。在学习一门语言时，最好记住几个简单的项目和一些具有渐进复杂性的项目。决定这些将帮助您绘制出所需的概念及其顺序。

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2008-08-09T08:17:05.883

我还建议您观看一些截屏视频 - 它们通常是在特定技术而不是语言的上下文中创建的，但如果显示 Python 代码，那就可以了:)。关键是——它们是由一些优秀的程序员创建的，并且观察优秀的程序员如何编程是一件好事。你和你的兄弟也可以做一些对等编程，这可能是一个更好的主意。只是不要忘记解释为什么你这样做而不是那样做。我认为学习编程的最好方法是从好的例子中学习，尽量不要看到坏的例子。

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2008-08-28T23:59:23.527

首先问他这个问题：“*你想用你的电脑做什么样的事情？* ”

然后选择一组适合他的答案的活动，并选择一种允许完成这些事情的语言。如果它是一个简单（或可简化）的脚本环境（例如 Applescript、Ruby、任何 shell（Ksh、Bash 甚至 .bat 文件），那就更好了。

原因是：

1.  如果他对结果感兴趣，他可能会比你让他数斐波那契的兔子更有动力。
2.  如果他得到了他喜欢的结果，他可能会想出你创建的活动的变化。
3.  如果你在教他，他（还）不是在追求严肃的职业；以后总有时间切换到“工业实力”语言。

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2008-08-16T00:46:31.483

一开始有很多事情让我绊倒，但最简单的就是简单的机制。概念，我立刻接受了。但是错过了一个右括号？在一个不平凡的程序中容易做到，但通常很难调试。

所以，我谦虚的建议是：不要低估基础知识（比如良好的打字）。这听起来很补救，甚至很傻，但在我学习过程的早期，当我偶然发现输入代码结构的完整“骨架”然后只是填充它的简单技术时，它为我节省了很多悲伤。

对于 Python 中的“if”语句，请从以下内容开始：

```
if  : 
```

在 C/C++/C#/Java 中：

```
if () 
{

} 
```

在帕斯卡/德尔福：

```
If () Then
Begin

End 
```

然后，在开始和结束标记之间键入。一旦这成为一个坚实的习惯，所以你不假思索地去做，更多的大脑被释放出来做有趣的事情。我承认，发布的建议不是很华而不实，但我亲眼目睹的建议有很多好处！

> 编辑：[[贾斯汀标准](https://stackoverflow.com/users/92/justin-standard)]
> 
> 谢谢你的贡献，翼。与你所说的相关，我试图帮助我的兄弟记住python 作用域的语法的一件事是，每次有冒号时，他都需要缩进下一行，并且任何时候他认为他应该缩进，最好有一个冒号结束上一行。

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2008-08-13T09:29:29.290

我建议采用类似于本书[Accelerated C++](http://www.acceleratedcpp.com/)的方法，其中涵盖了通常对制作简单程序有用的 C++ 部分。对于任何刚接触编程的人来说，我认为通过一些努力来展示一些东西是让他们保持兴趣的好方法。一旦你掌握了 Python 的基础知识，你就应该坐下来让他体验一下这门语言。

在我本学期的一个大学科目中，他们采用了一种称为基于问题的学习（PBL）的方法，在这种方法中，他们使用讲座来激发学生对不同问题的处理方法。既然你的兄弟很热心，你应该采取类似的方法。让他做一些小项目，让他自己解决。然后，一旦他完成了，您就可以通过他的方法并与不同的方法进行比较和对比。

如果你能给他适量的帮助来引导他朝着正确的方向前进，那么他应该没问题。为他提供一些好的网站和书籍也是一个好主意。

我还建议在开始阶段远离 IDE。使用命令行和文本编辑器将使他对编译/汇编代码所涉及的过程有更深入的了解。

我希望我能有所帮助。:)

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2008-08-18T15:24:16.577

这个怎么样：由 Nat Torkington[产生下一代黑客。](http://vodpod.com/watch/914464-inspirational-oscon-keynote)

* * *

## 回答 #45

> 赞同：1
> 
> 时间：2008-08-22T20:27:05.803

[Project Euler](http://projecteuler.net/)有许多有趣的数学问题，可以为初学者提供很好的学习材料。问题开始很容易，难度增加，网络上[充满了各种编程语言的示例解决方案](http://www.google.com/search?hl=en&lr=&safe=active&q=project+euler+solutions&btnG=Search)。

* * *

## 回答 #46

> 赞同：1
> 
> 时间：2008-08-07T22:12:54.220

I think that once he has the basics (variables, loops, etc) down you should try to help him find something specific that he is interested in and help him learn the necessities to make it happen. I know that I am much more inclined and motivated to do something if it's of interest to me. Also, make sure to let him struggle though some of the tougher problems, nothing is more satisfying than the moment you figure it out on your own.

* * *

## 回答 #47

> 赞同：1
> 
> 时间：2008-09-10T00:29:18.847

我浏览了评论，似乎没有人从[www.CodeBetter.com提到](http://www.CodeBetter.com)[编程](http://codebetter.com/blogs/karlseguin/archive/2008/06/24/foundations-of-programming-ebook.aspx)基础。虽然它需要一些基础，但它肯定可以成为学习过程的下一步。

* * *

## 回答 #48

> 赞同：1
> 
> 时间：2008-09-19T11:43:53.803

一旦他掌握了基础知识，我建议[河内塔](http://en.wikipedia.org/wiki/Tower_of_Hanoi)作为一个很好的练习。如果您有木制玩具，我建议您从木制玩具开始；让他尝试自己解决问题，并系统地描述他的方法。向他展示递归在哪里发挥作用。向他解释移动次数如何取决于磁盘的数量。然后让他用你选择的语言编写一个程序来打印移动的顺序。

* * *

## 回答 #49

> 赞同：1
> 
> 时间：2008-09-20T22:23:18.907

斯坦福大学非常好的视频介绍课程（无需先验知识）：

[编程方法论](http://see.stanford.edu/see/lecturelist.aspx?coll=824a47e1-135f-4508-a5aa-866adcae1111)

将教你每个程序员都应该知道的好“方法论”和一些Java编程。

* * *

## 回答 #50

> 赞同：1
> 
> 时间：2009-02-14T13:47:20.020

书籍：[面向儿童、父母和祖父母的 Java 编程](http://myflex.org/yf/JavaKid811.pdf)(PDF)

我没有使用这本书学习的个人经验，但它似乎很好，因为它很快就会产生一些可见的东西，并且不会花太多时间在语法上的小细节上。这里有人试过用那本书吗？

* * *

## 回答 #51

> 赞同：1
> 
> 时间：2009-03-18T14:51:51.170

一旦你教他们如何编程，他们可能想学习如何开发软件。我认为 Greg Wilson 的[软件木工](http://www.swc.scipy.org/)课程很棒。它还使用 Python 作为学生的语言。

* * *

## 回答 #52

> 赞同：1
> 
> 时间：2009-08-04T21:42:17.317

我可以推荐我的项目[PythonTurtle](http://pythonturtle.com)。

概括：

PythonTurtle 致力于提供最低门槛的 Python 学习方式。学生命令交互式 Python shell（类似于 IDLE 开发环境）并使用 Python 函数移动屏幕上显示的海龟。插图帮助屏幕向学生介绍 Python 编程的基础知识，同时演示如何移动海龟。

它看起来像这样：

[替代文字 http://www.pythonturtle.com/screenshot.gif](http://www.pythonturtle.com/screenshot.gif)

* * *

## 回答 #53

> 赞同：1
> 
> 时间：2010-04-17T12:33:32.757

[Academic Earth](http://academicearth.org/subjects/computer-science/category:14)提供指向顶尖大学的免费计算机科学课程的链接。他们有一个面向初级计算机科学的部分。初级课程中教授的语言各不相同：

*   **麻省理工学院**- 计算机科学和编程导论 - Python
*   **斯坦福**- 计算机科学 I：编程方法论 - Java
*   **哈佛**- 计算机科学概论 I - C （主要重点），以及其他一些很好的措施（例如，SQL、PHP、LISP、汇编程序等）
*   **伯克利**- LISP 语言的一种方言

* * *

## 回答 #54

> 赞同：0
> 
> 时间：2008-08-27T15:25:04.833

学习任何东西的最好方法是从基础开始。你可以找到任何好的教科书来解释什么是编程、内存、算法。

下一步选择语言，这取决于老师知道什么或学生想学习的原因。

然后它只是代码，代码，代码。对书中的每个示例进行编码。然后稍微改变它来做另一个动作。学习编程是一个主动的过程，而不是被动的过程。您不能只阅读 Dietal 的 C++ How to Program ，然后期望在阅读时没有主动完成 C++ 编码。

即使您是一位经验丰富的程序员，在书中编写代码也有助于学习新知识。

* * *

## 回答 #55

> 赞同：0
> 
> 时间：2008-08-14T16:23:14.240

起初我对不同程序的工作方式很感兴趣，所以我从查看源代码开始。然后当我开始了解程序如何工作时，我会更改某些参数，看看会发生什么。所以基本上我在学会写作之前就学会了阅读。这恰好是大多数人学习英语的方式。

因此，如果我试图教某人如何编程，我会给他们一个小程序来尝试阅读和理解它的工作原理，让他们只是玩弄源代码。

只有这样，我才会给他们“任务”以尝试完成。

现在，如果他们有特定的理由想要学习如何编程，那么从他们想要完成的事情开始肯定是一个好主意。例如，如果他们想精通[搅拌机之类的应用程序，那么从](http://www.blender.org/)[Alice](http://www.alice.org/)开始无疑是一个好主意。

我绝对建议坚持使用具有垃圾收集功能的语言，例如[D](http://www.digitalmars.com/d/)、[Perl](http://www.perl.org/)或某些解释性语言（例如 javascript）。[在Perl 6](http://www.perlfoundation.org/perl6)接近完成之前远离 Perl 可能是个好主意，因为它解决了阅读和理解 Perl 的一些困难。

* * *

## 回答 #56

> 赞同：0
> 
> 时间：2008-08-06T17:32:33.680

我同意莱克的观点。如果我觉得无聊，我有时会玩[Scratch 。](http://scratch.mit.edu/)这是查看代码的一种非常有趣的视觉方式。

它的工作原理是，它们给你一堆“积木”（这些看起来像乐高积木），你可以堆叠它们。通过堆叠这些块，并与画布（放置精灵、图形的地方）进行交互，您可以创建游戏、电影、幻灯片……这真的很有趣。

完成后，您可以将其直接上传到 Scratch 网站，这是一个用于 Scratch 应用程序的 youtube 式门户。不仅如此，您还可以下载网站上的任何提交，并学习或扩展其他 Scratch 应用程序。

* * *

## 回答 #57

> 赞同：0
> 
> 时间：2008-08-16T15:56:38.293

我的个人经历始于小学时使用 Logo Writer（在某种程度上已经演变为 Scratch），当然我还是个小孩，电脑不像现在那么棒，但暂时它把我带到了我没有的地方以前没有……我想这就是我迷上这个行业的原因……我可以说，正是这些基于如此简单和酷炫的第一印象，才使我终生难忘。这就是教授编程基础知识的方式……一个渴望魔法的简单过程。

回到我的第一个 CS 101，我从构建 Tequila Sunrise 开始了解算法是什么（一个逐步的过程，可以随时使用正确的成分重复，这将产生相同的输出），从那里我们继续使用 Scheme 的基本数学函数（就像 EHaskins 所说的......从小处着手，然后构建），从那里到循环、布尔逻辑、结构的概念，然后构建到对象的概念和一些模拟执行...... .

这种方法的好处之一是语言不是目标，而只是学习编程概念和基础知识的工具（就像数学中的运算符、函数和其他东西一样）。

恕我直言，学习编程基础知识和创建基础可能是您可以教给您兄弟的最好的东西，一旦达到目标，您就可以继续使用更通用的语言，例如 python，并教他们更高的概念，例如架构和设计模式（在这个过程中让它们自然，这样他就会从早期阶段开始习惯良好的做法，并将它们视为过程的一部分）......我们远未重新发明温水，但我们总是必须从生火开始。

从那里开始，天空就是极限！

* * *

## 回答 #58

> 赞同：0
> 
> 时间：2008-09-16T10:31:42.343

我会推荐[Think Python](http://www.greenteapress.com/thinkpython/thinkpython.html)。

* * *

## 回答 #59

> 赞同：0
> 
> 时间：2008-09-06T15:30:16.827

一些其他信息可以附加到 Jason Pratt 早期关于[Alice](http://www.alice.org/)的帖子中……特别是[讲故事的 Alice](http://www.alice.org/kelleher/storytelling/)变体。

尽管该研究针对的是中学生，但您可能会发现凯特琳·凯莱赫 ( [Caitlin Kelleher](http://www.cse.wustl.edu/~ckelleher/) ) 撰写的[白皮书](http://www.cse.wustl.edu/~ckelleher/kelleherThesis_CSD.pdf)很有趣。

* * *

## 回答 #60

> 赞同：0
> 
> 时间：2008-09-06T16:42:22.583

我和孩子一起使用的是[CEEBot](http://www.ceebot.com/ceebot/index-e.php)。它不是 python，但它在一个有趣的机器人编程游戏中教授 C / Java 风格的编程。它针对的是 10-15 岁的孩子，但它确实非常好。

* * *

## 回答 #61

> 赞同：0
> 
> 时间：2008-08-06T05:16:25.757

我实际上会争辩选择一种更简单、指令更少的语言。[我和Jeff](http://www.codinghorror.com/blog/archives/001104.html)一样在家里亲自学习了 BASIC 。这样，您就不必深入研究更复杂的问题，例如面向对象编程，甚至不需要研究过程。一旦他可以处理简单的控制流，然后再转向更复杂的东西，但只有简单的功能。

也许从非常简单的程序开始，只需添加 2 个数字，然后发展到可能需要分支的东西，然后可能读取输入并响应它，然后是某种循环，然后开始将它们组合在一起。只需从小处着手，然后一路向上。在他掌握基本原理之前不要做任何大项目（否则可能太令人生畏，他可能会中途放弃）。一旦他掌握了 BASIC 或任何你选择的东西，就继续做更复杂的事情。

只是我的 0.02 美元

* * *

## 回答 #62

> 赞同：0
> 
> 时间：2008-08-06T06:20:28.077

我认为“群众的智慧”在这里起作用。大多数人是如何学习编程的？许多人声称他们是通过复制他人的程序来做到这一点的，通常是他们想用 BASIC 玩的游戏。

也许这条路线也适用于他？

* * *

## 回答 #63

> 赞同：0
> 
> 时间：2008-08-11T12:30:33.997

I would recommend in first teaching the very basics that are used in almost every language, but doing so without a language. Outline all the basic concepts If-Else If-Else, Loops, Classes, Variable Types, Structures, etc. Everything that is the foundation of most languages. Then move onto really understanding Boolean, comparisons and complex AND OR statements, to get the feeling on what the outcomes are for more complex statements.

By doing it this way he will understand the concepts of programming and have a much easier time stepping into languages, from there its just learning the intricate details of the languages, its functions, and syntax.

* * *

## 回答 #64

> 赞同：0
> 
> 时间：2008-08-11T12:59:16.687

My favourite "start learning to code" project is the Game **Snakes** or **Tron** because it allows you to start slow (variables to store the current "worm position", arrays to store the worm positions if the worm is longer than one "piece", loops to make the worm move, if/switch to allow the user to change the worm's direction, ...). It also allows to include more and more stuff into the project in the long run, e.g. object oriented programming (one worm is one object with the chance to have two worms at the same time) with inheritance (go from "Snakes" to "Tron" or the other way around, where the worm slightly changes behavior).

I'd suggest that you use [Microsoft's XNA](http://creators.xna.com/) to start. In my experience starting to program is much more fun if you can see something on your screen, and XNA makes it really easy to get something moving on the screen. It's quite easy to do little changes and get another look, e.g. by changing colors, so he can see that his actions have an effect -> Impression of success. Success is fun, which is a great motivation to keep on learning.

* * *

## 回答 #65

> 赞同：0
> 
> 时间：2008-09-05T02:20:10.700

这可能看起来很奇怪，但我是通过在我以前的工作中自动执行任务和数据分析来开始编写代码的。这是通过记录然后研究 Excel 宏生成的代码来完成的。当然，这种方法假设您可以通过 VB 学习。

* * *

## 回答 #66

> 赞同：0
> 
> 时间：2008-09-21T22:27:48.920

无论您选择哪种语言和环境，如果学生出于专业原因想要学习或进行“真正的”编程（无论是什么），请让他们首先在纸上编写他们的入门程序^(1并带他们去运行。)带着输出和/或错误结果回来，让他们在纸上解决问题。

一开始这并不比在屏幕上运行并点击运行更难，但是当他们开始发现美妙的错误世界时，它会让事情变得容易得多。

1) 简短的“Hello, World!”类型的程序仍然有一些逻辑和/或计算，对一些可能有错误的程序执行此操作

* * *

## 回答 #67

> 赞同：0
> 
> 时间：2008-09-21T22:30:01.580

无论他们写什么，让他们在第一次运行时在调试器中逐行执行。让他们*自己*看看电脑在做什么。这消除了很多神秘感，减少了恐吓（“哦，每一行真的很简单！”），并帮助他们学习调试技能并认识到常见错误的常见原因（以及为什么它们是错误）

* * *

## 回答 #68

> 赞同：0
> 
> 时间：2008-10-30T04:38:26.657

海勒的《谁害怕 C++》

可能值得一试

* * *

## 回答 #69

> 赞同：0
> 
> 时间：2008-08-14T01:30:02.410

作为初学者（> 100行代码）程序员，这个线程对我非常有用。

根据我所经历的，一旦我完成了“Hello World”并转到变量和“if/else”语句，我就被太多的语法所困扰；不知道该怎么处理他们。

因此，通过一个有趣的简单项目，我可能会再次引起我的兴趣。这里有很多项目建议。

我可以在这里问一个问题吗？

首先学习像[Autohotkey](http://www.autohotkey.com/)这样的脚本语言会更好吗？

> 编辑：[贾斯汀标准]
> 
> 我认为学习像 Autohotkey 这样的基于宏的东西只会有最小的帮助。首先尝试学习一门“真正的”编程语言。最容易上手（根据大多数人）是[python](http://www.python.org)和[ruby](http://www.ruby-lang.org/en/)​​ 。我喜欢python，但两者都很简单。还有一个[完整的 stackoverflow 帖子](https://stackoverflow.com/questions/4769/easiest-language-to-start-with#4856)回答了从哪种语言开始的问题。

* * *

## 回答 #70

> 赞同：0
> 
> 时间：2008-08-09T06:52:29.203

首先，我认为已经有一些很好的答案，所以我会尽量不要欺骗太多。

*   让他们编写大量代码，让他们不断提问以保持脑汁畅通。
*   我想说，在他们了解它们的含义或询问之前，不要被*真正详细的信息所困扰。*

我认为我要确保的最重要的一点是他们理解框架的核心概念。我知道您正在使用 Python（我对此一无所知），但例如，使用 ASP.NET 让人们理解模型背后的页面/代码可能是一个真正的挑战，但他们理解它**至关重要。**举个例子，我最近在一个论坛上遇到了一个关于“*我应该把我的数据访问代码放在哪里，在 'cs' 文件或 'aspx' 文件中*”的问题。

所以我想说，在大多数情况下，让他们引导方向，在需要的地方支持他们，并提出更多问题以保持兴趣。只要确保他们有基本的基础，不要让他们在他们能走路之前就跑。

祝你好运！

* * *

## 回答 #71

> 赞同：0
> 
> 时间：2008-08-19T08:37:58.660

在我的偏见中，C 是最好的起点。语言很小，它的高级特性无处不在，低级特性让你学习机器。

我发现[C Primer Plus，第 5 版](https://rads.stackoverflow.com/amzn/click/com/0672326973)对于几乎没有编程经验的初级程序员非常有帮助。它假定没有任何编程经验，阅读起来很有趣，并且深入涵盖了 C（包括最新的 C99 标准）。

* * *

## 回答 #72

> 赞同：0
> 
> 时间：2008-08-07T05:35:26.933

我建议从 C/C++ 开始。我发现它是几乎所有其他语言的良好基础。此外，不同版本的 BASIC 充其量是相当狡猾的，并且与实际编程没有真正的相关性。

* * *

## 回答 #73

> 赞同：0
> 
> 时间：2008-08-07T07:47:41.363

我认为因为你想学习编程而学习编程永远不会像因为你想做某事而学习编程一样好。如果你能找到你兄弟感兴趣的东西，因为他想让它发挥作用，你可以把他留给谷歌，他会做的。他会让你检查他是否走在正确的道路上。

我认为抽象地教授编程的最大问题之一是它没有一个让学习者可以投入情感的真实世界环境。编程很难，必须有一些真正的回报才能让它值得付出努力做它。就我而言，我在 uni 完成了计算机科学，在那里学习了 Pascal 和 COBOL，在那之前在家里学习了 BASIC，但直到 90 年代我成为一名自雇网页设计师和我的客户需要他们网站上的功能，并且愿意为功能支付大约 10 倍于设计的费用。把食物放在桌子上是一种激励！

所以我学习了 Perl，然后是 ASP/VBScript，然后是 JavaScript，然后是 Flash/ActionScript，然后是 PHP——所有这些都是为了实现我想要的东西。

* * *

## 回答 #74

> 赞同：0
> 
> 时间：2008-08-22T10:32:23.047

对我来说，在 IDE 本身中的探索和试验帮助我学习了 Java 和 Visual Basic，但我以艰难的方式学习了编程的基础知识：Perl 5。当时没有免费的 IDE，所以这意味着在记事本中输入代码，保存它，然后运行 ​​perl 解释器。

我想说 IDE 让学习编程基础知识变得更容易。首先尝试使用控制结构和变量。用 Java 说：

```
int a = 5;

for (int i = 0; i < a; i++) {
     System.out.println("i is now " + i);
} 
```

基本上，简单地学习控制结构和变量就可以让初学者开始编写有趣的东西了。

* * *

## 回答 #75

> 赞同：0
> 
> 时间：2008-11-18T01:40:35.640

[Microsoft Small Basic](http://msdn.microsoft.com/en-us/devlabs/cc950524.aspx)是一个基于 .NET 的免费编程环境，旨在为初学者提供一个“有趣”的学习环境。该语言是 VB.NET 的一个子集，甚至包含一个与 Logo 语言相似的“Turtle”对象。该网站包含一个分步教程。

* * *

## 回答 #76

> 赞同：0
> 
> 时间：2008-09-04T20:23:36.097

需要考虑的事情......不是每个人都能够编程：

有些人就是无法克服以下问题：

A = 1

B = 2

A = B

（这些人还是会认为 A = 1）

[杰夫也谈到了这一点。](http://www.codinghorror.com/blog/archives/000635.html) 事实上，我的例子是在链接中（并解释，引导）。

* * *

## 回答 #77

> 赞同：0
> 
> 时间：2008-09-07T20:25:02.913

拥有可实现的小目标是学习任何技能的最佳方式之一。编程也不例外。Python 是一门很棒的语言，因为它易于学习、干净并且仍然可以做高级的事情。Python 只受限于你的想象力。

真正让某人感兴趣的一种方法是给他们一些小项目，他们可以在一个小时左右的时间内完成。当我最初开始学习 python 时，我在玩[Code Golf](http://www.codegolf.com)。他们面临着许多有助于教授编程基础知识的小挑战。我建议每天尝试解决其中一个挑战，然后使用所学的概念。你必须让学习编程变得有趣，否则很快就会失去兴趣。

* * *

## 回答 #78

> 赞同：0
> 
> 时间：2008-09-12T20:51:18.440

作为一名非程序员，我发现 Pragmatic Programmers 的“如何编程”一书从基本的角度来看非常有帮助。对于初学者来说，它平易近人且易于阅读。它不会将您从初学者变成专家，但它会为您在选择一种语言并拿起您的第一本“Learn to Program in (language here)”书后的准备工作做好准备。

* * *

## 回答 #79

> 赞同：0
> 
> 时间：2008-11-18T02:06:58.130

我同意上面的 superjoe30，但我还没有足够的声誉来发表评论。

我当了 4 年的 CS 教授。语言是 Basic，然后是 Pascal，但语言是什么并不重要。

作为一名新教授，我学到的最大的教训是，无论我认为一个概念多么简单，对新手来说都不简单。永远不要比你的学生走得更快。我怎么强调都不过分。去真的，真的很慢。

我会从非常简单的东西开始，阅读和打印，也许是一个简单的计算，只是为了让学生习惯于放入和取出一些东西。然后是 IF 语句。然后是非常简单的 FOR 循环，总是根据学生可以编写并从中获得乐趣的东西。

然后我会花大约 3 周的时间为一种名为 SIMPL 的假十进制机器教授一种非常简单的机器语言，你可以单步执行。这样做的原因是让学生可以看到“橡胶与道路的交汇点”，计算机一步一步地做事情，事情发生的顺序会有所不同。否则，学生倾向于认为计算机可以有点读懂他们的想法，一次做所有的事情。

然后回到基本。几个星期的阵列，因为这是一个很大的减速带。然后是顺序文件，这是另一个减速带。我所说的“减速带”是指学生可以非常自信地航行，然后你用数组之类的概念打击他们，他们又完全迷失了，直到你让他们轻松通过它。

然后，凭借他们掌握的这些技能，我会让他们选择一个学期项目，因为这就是让编程变得有趣的原因。没有它的用​​处，真的很无聊。我会建议各种项目，例如游戏、会计程序、科学程序等。看到它们被打开真是太好了。他们经常会向我寻求帮助，这很好，因为你知道他们正在学习。

在他们做项目的同时，我们将继续介绍更高级的编程技术——搜索、排序、合并、如何制作简单的数据库等。

祝你好运。教学是艰苦的工作，但当您看到学生成长时，您会感到满意。

* * *

## 回答 #80

> 赞同：0
> 
> 时间：2008-09-16T06:51:29.003

其他几个起始平台：

*   一个好的可编程计算器（这是我在 70 年代学到的），然后是 HP25，然后是 HP41，现在是 TI69，等等。
*   互动小说平台，如“通知 7”，为整个事情提供了另一个角度
*   Flash/动作脚本

所有这些都是不同且引人入胜的，其中任何一个都可能引发初学者和跑步所需的兴趣。

体重秤

* * *

## 回答 #81

> 赞同：0
> 
> 时间：2008-10-11T23:32:32.673

我建议将“不[插电的计算机科学](http://www.csunplugged.com)”作为补充的教学材料。

* * *

## 回答 #82

> 赞同：0
> 
> 时间：2008-09-19T12:08:42.763

您的问题完全取决于您兄弟的年龄和教育程度，但如果他是儿童/青少年，我建议先进行一些 GUI 编程或图形编程（使用 Canvas 等）。它看起来不错，并且您有立竿见影的效果。算法很无聊，对年轻人（比如 15 岁之前）来说太抽象了。

当我开始在 ZX Spectrum 上编程的时候（我大概 12 岁），我喜欢在屏幕上画各种东西，它仍然很有趣。我大概 18 岁时才学习真正的算法技术。不要误以为这种“简单”的编程是一个错误的开始。学习它的人的兴趣是其中最重要的部分。

所以，我会研究 PyKDE、PyGTK、PyQt 或 Python + OpenGL（网上肯定有一些教程，我知道一些捷克语的，但对你没有帮助:)）。

当然，如果你哥哥年纪大一些，并且受过接近数学的教育，你可以直接上算法之类的。

* * *

## 回答 #83

> 赞同：0
> 
> 时间：2008-10-03T11:38:45.040

+1 斯坦福大学的讲座。[http://see.stanford.edu/see/courseinfo.aspx?coll=824a47e1-135f-4508-a5aa-866adcae1111](http://see.stanford.edu/see/courseinfo.aspx?coll=824a47e1-135f-4508-a5aa-866adcae1111)

它们很简单，质量很高，我可以保证他们有能力教初学者（我是其中之一）。

* * *

## 回答 #84

> 赞同：0
> 
> 时间：2009-12-18T14:59:54.703

使用现实世界的类比和虚构的人物来教他们编程。就像我教人们变量和控制语句等时一样。

通常我从计算器示例开始。我说假设你有一个用于每个变量的盒子，你有 10 个卡片板，上面印有数字 0 - 9。说这个盒子一次可以装一张纸板，并用类似的方式来解释编程元素的工作原理

并强调每个运算符的工作原理.. 就像简单的 '=' 运算符总是首先将右侧计算为一个值。并将该值放入名为“num_1”的框中（这是变量名）

这是非常非常有效的，因为他们能够非常快速地想象流程。

* * *

## 回答 #85

> 赞同：0
> 
> 时间：2011-05-29T03:05:52.660

我强烈推荐[John Zelle](http://mcsp.wartburg.edu/zelle/)的[Python Programming: An Introduction to Computer Science 2nd Edition](https://rads.stackoverflow.com/amzn/click/com/1590282418)。它面向初学者，处理编程的*语义*。阅读后，由于 Zelle 的语义与句法方法，您将能够更快地学习其他语言。一探究竟！

 ** * *

## 回答 #86

> 赞同：0
> 
> 时间：2011-05-12T13:28:55.367

问问你的兄弟，他是否想做一个程序或为他发明一个你认为他会感兴趣的项目。

他可以知道输出应该是什么，并将他指向与项目相关的材料（在线或印刷）。如果他开始接触 Python 或编程“冷”，请耐心等待他通过理解语法、错误、范围界定等基础知识来工作，并准备好让他跑到一边，当你开始看到光明时让他自己犯错误灯泡继续在他的头上。*****

# windows - 如何在 Windows 中为 Visual Studio 项目创建 Debian 安装包？

> ID：3106
> 
> 赞同：21
> 
> 时间：2008-08-06T05:36:49.770
> 
> 标签：windows, visual-studio, mono, cross-platform

我正在开发一些针对 Visual Studio 下的 Mono 的跨平台软件，并且希望能够通过单击一次按钮来构建 Windows 和 Linux（特别是 Ubuntu）的安装程序。我想我可以通过从构建后事件调用 cygwin 来做到这一点，但我希望充其量是一个 Visual Studio 插件，或者最坏的情况是一种更原生的 Windows 方式。看起来包格式相当简单，这一定是一种常见的需求。

编辑：由于重复登录问题，在其他帐户下重新提问。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T16:30:31.217

Debian 的 .deb 软件包只是包含 tarball 的“ar”档案。您可以很容易地使用 cygwin 或 msys 操作这两种类型的文件：

```
$ ar xv asciidoc_8.2.1-2_all.deb 
x - debian-binary
x - control.tar.gz
x - data.tar.gz

$ tar -tzf control.tar.gz 
./
./conffiles
./md5sums
./control 
```

或者你可以使用 cygwin 安装所有“标准”Debian 的东西，我想，但如果你正在构建一个 .Net 应用程序，大部分这些东西不会给你带来太多好处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-06T11:01:29.123

如果您使用 .NET Core SDK，则可以使用[dotnet-packaging](https://github.com/qmfrederik/dotnet-packaging)工具从任何运行 .NET Core 的平台创建 Debian 安装程序包。

例如，运行`dotnet deb -c Release -f netcoreapp2.1 -r ubuntu.16.04-x64`将创建一个`.deb`文件，您可以使用该文件在 Ubuntu 16.04 上安装您的应用程序。

项目存储库有更多详细信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-06T06:06:45.607

我不知道有任何插件可以原生实现，特别是因为 Mono 用户似乎更喜欢[MonoDevelop](http://www.monodevelop.com/Main_Page)。

但是，应该可以使用 Cygwin 和自定义 MSBuild 任务或批处理文件，以便通过使用本机 .deb 创建工具来实现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-13T03:56:07.983

> 这一定是一个共同的需要。

一小部分软件开发人员为 .NET 开发
一小部分人开发单声道
一小部分人想要提供 .debs 而不仅仅是一个
zip windows而不是linux上的本机

只是你:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-14T10:43:08.033

如果您不介意使用 Java 工具，可以在 Ant 脚本中使用[jdeb构建 Debian 软件包。](https://github.com/tcurdt/jdeb)这可能比依赖 Cygwin 更轻松。

# perl - 您可以强制标量或数组 ref 成为 Perl 中的数组吗？

> ID：3112
> 
> 赞同：28
> 
> 时间：2008-08-06T05:56:00.933
> 
> 标签：perl, arrays, reference, scalar

我有一个`$results`从服务返回的 perl 变量。该值应该是一个数组，并且`$results`应该是一个数组引用。但是，当数组中只有一项时，`$results`将设置为该值，而不是包含该一项的引用数组。

我想`foreach`在预期的数组上做一个循环。如果不检查`ref($results) eq 'ARRAY'`，有没有办法获得与以下内容等效的内容：

```
foreach my $result (@$results) {
    # Process $result
} 
```

该特定代码示例将用于参考，但会抱怨简单的标量。

编辑：我应该澄清一下，我无法更改从服务返回的内容。问题在于，当只有一个值时，该值将是一个标量，而当有多个值时，它将是一个数组引用。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-08-06T07:13:16.753

我不确定除了：

> ```
> $result = [ $result ]   if ref($result) ne 'ARRAY';  
> foreach ..... 
> ```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-08-19T14:16:57.493

另一种解决方案是将调用包装到服务器并让它始终返回一个数组以简化您的余生：

```
sub call_to_service
{
    my $returnValue = service::call();

    if (ref($returnValue) eq "ARRAY")
    {
        return($returnValue);
    }
    else
    {
       return( [$returnValue] );
    }
} 
```

然后你总是可以知道你会得到一个对数组的引用，即使它只是一个项目。

```
foreach my $item (@{call_to_service()})
{
  ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-12T21:14:12.530

好吧，如果你做不到...

```
for my $result ( ref $results eq 'ARRAY' ? @$results : $results ) {
    # Process result
} 
```

或这个...

```
for my $result ( ! ref $results ? $results : @$results ) {
    # Process result
} 
```

那么你可能不得不尝试像这样的毛茸茸的可怕的东西！....

```
for my $result ( eval { @$results }, eval $results ) {
    # Process result
} 
```

并且为了避免那个危险的字符串评估，它变得非常丑陋！......

```
for my $result ( eval { $results->[0] } || $results, eval { @$results[1 .. $#{ $results }] } ) {
    # Process result
} 
```

PS。我的偏好是在 reatmon 给出的 sub ala call_to_service() 示例中将其抽象出来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-14T21:41:18.903

我会重新分解循环内的代码，然后做

```
if( ref $results eq 'ARRAY' ){
    my_sub($result) for my $result (@$results);
}else{
    my_sub($results);
} 
```

当然，如果循环中的代码不平凡，我只会这样做。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-08-06T06:22:23.080

我刚刚对此进行了测试：

> ```
> #!/usr/bin/perl -w
> use strict;
> 
> sub testit {
> 
>  my @ret = ();
>  if (shift){
>    push @ret,1;
>    push @ret,2;
>    push @ret,3;
> }else{
>   push @ret,"oneonly";
> }
> 
> return \@ret;
> }
> 
> foreach my $r (@{testit(1)}){
>   print $r." test1\n";
> }
> foreach my $r (@{testit()}){
>    print $r." test2\n";
> } 
> ```

它似乎工作正常，所以我认为这与从服务返回的结果有关？如果您无法控制退货服务，这可能很难破解

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-11-23T05:34:34.953

你可以这样做：

```
my @some_array
push (@some_array, results);
foreach my $elt(@some_array){
  #do something
} 
```

# cron - 如何设置 crontab 在特定时间执行

> ID：3136
> 
> 赞同：18
> 
> 时间：2008-08-06T07:16:16.373
> 
> 标签：cron, settings

如何设置我的 crontab 以在每天晚上 11:59 执行 X 脚本而不给我发电子邮件或创建任何日志？

现在我的 crontab 看起来像这样

```
@daily /path/to/script.sh 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-06T07:21:32.430

当你执行 crontab -e 时，试试这个：

```
59 23 * * * /usr/sbin/myscript > /dev/null 
```

这意味着：在每个工作日的每个月的 59 分钟和 23 小时 (*) 执行 myscript。

有关更多信息和示例，请参阅**man crontab 。**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-10T07:27:38.167

跟进[svrist 的回答，](https://stackoverflow.com/questions/3136/help-with-cronjobs#3145)根据你的 shell，2>&1 应该*在*> /dev/null 之后，否则你仍然会看到 stderr 的输出。

以下将使 stdout 和 stderr 静音：

```
59 23 * * * /usr/sbin/myscript > /dev/null 2>&1 
```

以下使标准输出静音，但标准错误仍会出现（通过标准输出）：

```
59 23 * * * /usr/sbin/myscript 2>&1 > /dev/null 
```

[Advanced Bash Scripting Guide 的关于 IO 重定向的章节](http://tldp.org/LDP/abs/html/io-redirection.html)是一个很好的参考——搜索 2>&1 以查看几个示例。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-06T07:43:29.500

您将通过上述回复收到电子邮件，其中包含写入 stderr 的任何文本。有些人也将其重定向，并确保脚本改为写入日志。

```
... 2>&1 .... 
```

# mono - 在 TeamCity 中使用 MBUnit

> ID：3143
> 
> 赞同：17
> 
> 时间：2008-08-06T07:41:11.937
> 
> 标签：mono, nant, teamcity, mbunit

我正在使用 TeamCity 持续集成服务器在 linux 上编译一个 NAnt 项目。我已经能够通过命令行运行器在单声道上运行 NAnt 来生成测试报告，但没有像 NAnt Runner 那样使用报告的选项。我也在使用 MBUnit 作为测试框架。

如何合并测试报告并为构建显示“测试失败：1（1 个新），通过：3049”？

**更新：**看看 MBUnitTask，它是一个 NAnt 任务，它使用 TeamCity 期望从 NUnit 发送的消息，因此它允许您使用 TeamCity 的所有功能进行测试。

[MBUnitTask](http://code.google.com/p/nant-extensions/wiki/MbUnitTask)

**更新：** Galio 具有更好的支持，因此您只需引用 Galio MBUnit 3.5 dll 而不是 MBUnit 3.5 dll 并切换到 galio runner 以使其工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T23:07:43.877

[Gallio 现在有一个扩展](http://blog.bits-in-motion.com/2008/10/announcing-gallio-and-mbunit-v304.html)来输出 TeamCity 服务消息。只需使用包含的 Gallio.NAntTasks.dll 并启用 TeamCity 扩展。（这[在下一个版本中不是必需的](http://groups.google.com/group/gallio-dev/browse_thread/thread/812917adbca13d7b)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-06T23:49:46.600

TeamCity 监视构建的命令行输出。您可以通过在该输出中插入某些标记来让它知道您的测试进展情况，请参阅[http://www.jetbrains.net/confluence/display/TCD3/Build+Script+Interaction+with+TeamCity](http://www.jetbrains.net/confluence/display/TCD3/Build+Script+Interaction+with+TeamCity)。例如

```
##teamcity[testSuiteStarted name='Test1'] 
```

将让 TeamCity 知道一组测试已开始。使用 MbUnit，您无法在测试运行时输出这些标记，但您可以转换它输出的 XML 文件。这是我正在使用的 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>
    <xsl:template match="/">

        <xsl:apply-templates/>

    </xsl:template>

    <xsl:template match="assemblies/assembly">
##teamcity[testSuiteStarted name='<xsl:value-of select="@name" />']

        <xsl:apply-templates select="//run" />

##teamcity[testSuiteFinished name='<xsl:value-of select="@name" />']
    </xsl:template>

    <xsl:template match="run">

        <xsl:choose>
            <xsl:when test="@result='ignore' or @result='skip'">
        ##teamcity[testIgnored name='<xsl:value-of select="@name" />' message='Test Ignored']
            </xsl:when>
            <xsl:otherwise>
        ##teamcity[testStarted name='<xsl:value-of select="@name" />']
            </xsl:otherwise>
        </xsl:choose>

        <xsl:if test="@result='failure'">
            ##teamcity[testFailed name='<xsl:value-of select="@name" />' message='<xsl:value-of select="child::node()/message"/>' details='<xsl:value-of select="normalize-space(child::node()/stack-trace)"/>']
        </xsl:if>

        <xsl:if test="@result!='ignore' and @result!='skip'">
        ##teamcity[testFinished name='<xsl:value-of select="@name" />']
        </xsl:if>

    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-27T14:14:21.570

这是我想出的

**如何在测试报告中合并？**

首先，您需要获取 mbunit 来生成 XML 和 HTML 报告。命令行参数如下所示

```
/rt:Xml /rt:Html /rnf:mbunit /rf:..\reports 
```

这会将报告生成到一个名为 reports 的目录中，该文件将被称为 mbunit.xml 和 mbunit.html

接下来我们要将这些文件作为工件添加到构建中

```
build\reports\* => Reports 
```

最后一步是告诉 teamcity 将其添加为构建的选项卡

找到 .BuildServer\config\main-config.xml 并添加这一行（在 Windows 上，它位于 c:\Documents and Settings\ 中，在 linux 上它位于 /root 目录中）

```
<report-tab title="Tests" basePath="Reports" startPage="mbunit.html" /> 
```

**如何为构建显示“测试失败：1（1 个新），通过：3049”？**

TeamCity 会查找一个名为 teamcity-info.xml 的文件，您可以在其中粘贴要显示的消息。实际测试计数实际上只是纯文本。我认为您可以将文件添加为工件，但我也将它放在构建的根目录中。

在 NAnt 中，您需要使用此命令对 MBUnit XML 报告执行 XSLT

```
<style style="includes\teamcity-info.xsl" in="reports\mbunit.xml" out="..\teamcity-info.xml" /> 
```

实际的 xsl 看起来像这样。（注意： { 和 } 在 xsl 中是保留的，所以我们必须使用参数）

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:param name="cbl" select="'{'"/>
<xsl:param name="cbr" select="'}'"/>
<xsl:template match="/">
<xsl:for-each select="report-result/counter">

<build number="1.0.{concat($cbl,'build.number',$cbr)}">
    <xsl:if test="@failure-count &gt; 0">
        <statusInfo status="FAILURE">    
            <text action="append"> Tests failed: <xsl:value-of select="@failure-count"/>, passed: <xsl:value-of select="@success-count"/></text>
        </statusInfo>
    </xsl:if>
    <xsl:if test="@failure-count = 0">
        <statusInfo status="SUCCESS">
            <text action="append"> Tests passed: <xsl:value-of select="@success-count"/></text>
        </statusInfo>
    </xsl:if>

</build>
</xsl:for-each>

</xsl:template>
</xsl:stylesheet> 
```

这会给你一个看起来像这样的文件

```
<build number="1.0.{build.number}">
   <statusInfo status="FAILURE">
      <text action="append">Tests failed: 16, passed: 88</text>
   </statusInfo>
</build> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2010-02-11T17:21:40.647

适用于 Windows Vista、Windows 7 的 TeamCity 侧边栏小工具 [http://teamcity-gadget.com](http://teamcity-gadget.com)

# vb.net - “最佳”差异算法

> ID：3144
> 
> 赞同：18
> 
> 时间：2008-08-06T07:42:33.947
> 
> 标签：vb.net, diff

我需要在 VB.NET 中实现一个 Diff 算法来查找一段文本的两个不同版本之间的变化。我在网上找了一个侦察员，发现了几种不同的算法。

这里有人知道我可以实现的“最佳”算法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-06T07:49:32.407

好吧，我在 codeproject 上使用了 c# 版本，它真的很适合我想要的……

[http://www.codeproject.com/KB/recipes/diffengine.aspx](http://www.codeproject.com/KB/recipes/diffengine.aspx)

[如果你不能自己做，你可以通过在线转换器](http://labs.developerfusion.co.uk/convert/csharp-to-vb.aspx)把它翻译成 VB.net ...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-08-06T07:58:13.557

我喜欢Eugene Myers[的 O(ND) 差分算法及其变体。](http://www.xmailserver.org/diff2.pdf)我相信这是 GNU diff 中使用的算法。有关良好的背景，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Diff)。

这是相当理论上的，您可能希望找到源代码，但我不知道 VB 中有任何源代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-06T07:52:42.180

我不确定它是否是最好的差异算法，但您可能想查看那些谈论 SOCT4 和 SOCT6 的链接

[http://dev.libresource.org/home/doc/so6-user-manual/concepts](http://dev.libresource.org/home/doc/so6-user-manual/concepts)

还有：
[http://www.loria.fr/~molli/pmwiki/uploads/Main/so6group03.pdf](http://www.loria.fr/~molli/pmwiki/uploads/Main/so6group03.pdf) [http://www.loria.fr/~molli/pmwiki/uploads/Main/diffalgo.pdf](http://www.loria.fr/~molli/pmwiki/uploads/Main/diffalgo.pdf)

# .net - 在 .Net 中使用扩展方法的最佳实践是什么？

> ID：3147
> 
> 赞同：42
> 
> 时间：2008-08-06T07:52:31.620
> 
> 标签：.net

我已经看到这些被以各种方式使用，并且被指责以错误的方式使用它们（尽管在那种情况下，我以这种方式使用它们来证明一个[观点](http://blog.gadodia.net/extension-methods-in-vbnet-and-c/)）。

那么，您认为使用扩展方法的最佳实践是什么？

开发团队是否应该创建一个扩展方法库并将它们部署到各种项目中？

是否应该有一个开源项目形式的常用扩展方法集合？

*更新：已决定创建一个组织范围的扩展方法库*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-16T17:41:20.670

即将发布的第 2 版框架设计指南将提供一些实现扩展方法的指南，但总的来说：

您应该只在“它们具有语义意义的地方”定义扩展方法，并提供与每个实现相关的辅助功能。

您还应该避免扩展 System.Object，因为并非所有 .NET 语言都能够将扩展方法作为扩展调用。（例如，VB.NET 需要将其作为静态扩展类的常规静态方法调用。）

除非您要扩展接口，否则不要在与扩展类型相同的命名空间中定义扩展方法。

不要定义与“真实”方法具有相同签名的扩展方法，因为它永远不会被调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-07T12:14:49.093

您可能想看看[http://www.codeplex.com/nxl](http://www.codeplex.com/nxl)和[http://www.codeplex.com/umbrella](http://www.codeplex.com/umbrella)这两个扩展方法库。我个人没有看过源代码，但我相信那里的人会给你一些好的指导。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-06T08:08:20.557

我一直在 Utils 类中将我的扩展方法包含在我的核心库中，因为使用我的框架的人可能会发现这些方法很有用，但对于最终开发人员可能可以选择扩展方法库的大规模部署，我建议将所有扩展放入他们自己的命名空间，甚至是他们自己的项目文件中，以便人们可以选择添加引用或 using 语句，或者只是在需要时添加，如下所示：

```
Core.Extensions.Base64Encode(str); 
```

我的 Utils 课程是我在全世界最好的朋友，那是在扩展方法出现之前，它们只会帮助加强我们的关系。我会遵循的最大规则是让人们在可能的情况下选择他们使用的扩展框架。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-08T07:46:19.697

自 1990 年代初以来，Objective-C 语言就有了“类别”；这些本质上与 .NET 扩展方法相同。在寻找最佳实践时，您可能希望了解 Objective-C（Cocoa 和 NeXT）开发人员围绕它们提出的经验法则。

[Brent Simmons](http://inessential.com/)（Mac OS X 和 iPhone 的 NetNewsWire RSS 阅读器的作者）今天刚刚发布了关于他[使用类别的新样式规则，](http://inessential.com/?comments=1&postid=3518)并且围绕该帖子[在 Cocoa 社区中](http://evand.org/2008/08/07/reuse-vs-use-once/)进行了一些讨论。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-06T08:02:10.867

我认为这取决于扩展方法的用途。

*   与项目的特定业务需求相关的扩展方法（无论它们是连接到基本数据类型还是自定义对象）不应包含在将分布在多个项目中的库中。
*   与基本数据类型（int、string 等）或具有更广泛应用的泛型相关的扩展方法可以打包并跨项目分发。

注意不要在全局范围内包含应用很少的扩展方法，因为它们只会阻塞智能感知并可能导致混淆和/或误用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-15T20:07:20.350

当我第一次发现扩展时，我真的过度使用和滥用了它们。

在大多数情况下，出于多种原因，我已经开始摆脱使用任何扩展方法。

我停止使用它们的一些原因在上面 Scott 的博客链接中有说明，例如“在扩展你不拥有的类型之前三思而后行”。如果您无法控制要扩展的类型的源，如果源类型有一些添加/更改（例如将项目移动到更新的 .NET 版本），您将来可能会遇到问题/冲突。如果较新的 .NET 版本在与您的扩展同名的类型上包含一个方法，那么有人会受到重创。

我停止使用扩展方法的主要原因是，您无法通过阅读代码快速分辨出方法的来源以及谁“拥有”它。

仅阅读代码时，您无法判断该方法是扩展还是只是该类型的标准 NET API 方法。

智能感知菜单很快就会变得非常混乱。

# c++ - 如何为 Visual Studio C++ 设置单元测试

> ID：3150
> 
> 赞同：94
> 
> 时间：2008-08-06T07:57:50.017
> 
> 标签：c++, unit-testing, testing, visual-studio-2008, frameworks

我无法弄清楚如何在**Visual Studio 2008**中设置和使用测试框架，`C++`可能与内置的单元测试套件一起使用。

任何链接或教程将不胜感激。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2008-08-30T13:51:31.510

[这个页面](http://gamesfromwithin.com/exploring-the-c-unit-testing-framework-jungle)可能会有所帮助，它回顾了很多 C++ 单元测试框架：

*   CppUnit
*   Boost.Test
*   CppUnitLite
*   NanoCppUnit
*   单元++
*   CxxTest

查看***[CPPUnitLite](http://www.objectmentor.com/resources/downloads.html)***或***[CPPUnitLite2](http://gamesfromwithin.com/?p=48)***。

*CPPUnitLite*由 Michael Feathers 创建，他最初将 Java 的 JUnit 作为 CPPUnit 移植到 C++（CPPUnit 尝试模仿 JUnit 的开发模型 - 但 C++ 缺乏 Java 的特性 [例如反射] 使其易于使用）。

CPPUnitLite 试图创建一个真正的 C++ 风格的测试框架，而不是移植到 C++ 的 Java 框架。（我是从 Feather 的[《有效地使用旧代码》](https://rads.stackoverflow.com/amzn/click/com/0131177052)一书中转述的）。*CPPUnitLite2*似乎是另一个重写，具有更多功能和错误修复。

我还偶然发现了***[UnitTest++](http://sourceforge.net/projects/unittest-cpp/)***，其中包括来自 CPPUnitLite2 和其他一些框架的东西。

微软发布了***[WinUnit](http://winunit.codeplex.com/)***。

还可以查看***[Catch](https://github.com/philsquared/Catch)***或***[Doctest](https://github.com/onqtam/doctest)***

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-05-05T13:54:02.460

**有一种方法可以使用 Visual Studio 2008 中的内置测试框架来测试非托管 C++**。如果使用 C++/CLI 创建 C++ 测试项目，则可以调用非托管 DLL。如果要测试用非托管 C++ 编写的代码，则必须将公共语言运行时支持从 /clr:safe 切换到 /clr。

我在我的博客上有一步一步的详细信息：http: [//msujaws.wordpress.com/2009/05/06/unit-testing-mfc-with-mstest/](http://msujaws.wordpress.com/2009/05/06/unit-testing-mfc-with-mstest/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-12-01T21:56:06.783

这是我在 Microsoft 测试 IIS URL Rewrite 模块的方法（它是基于命令行的，但也适用于 VS）：

1.  通过将源代码移动到 cpp 文件并在需要时使用前向声明来确保您的头文件是可使用的。
2.  编译您的代码以作为库 (.lib) 进行测试
3.  使用 CLR 支持将您的 UnitTest 项目创建为 C++。
4.  包括你的头文件。
5.  包括您的 .lib 文件。
6.  添加对 Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll 的引用
7.  使用一个非常小的类来声明您的单元测试并像这样从托管代码跳转到 C++/Native 代码（可能有错别字）：

这是一个例子：

```
// Example
#include "stdafx.h"
#include "mstest.h"

// Following code is native code.
#pragma unmanaged
void AddTwoNumbersTest() {
  // Arrange
  Adder yourNativeObject;
  int expected = 3;
  int actual;
  // Act
  actual = yourNativeObject.Add(1, 2);
  // Assert
  Assert::AreEqual(expected, actual, L"1 + 2 != 3");
}

// Following code is C++/CLI (Managed)
#pragma managed
using namespace Microsoft::VisualStudio::TestTools::UnitTesting;
[TestClass]
public ref class TestShim {
public:
  [TestMethod]
  void AddTwoNumbersTest() {
     // Just jump to C++ native code (above)
     ::AddTwoNumbersTest();
  }
}; 
```

使用这种方法，人们不必学习太多 C++/CLI 东西，所有真正的测试都将在 C++ 原生中完成，TestShim 类将用于将测试“发布”到 MSTest.exe（或使其可见）。

要添加新测试，您只需声明一个新的 [TestMethod] void NewTest(){::NewTest();} 方法和一个新的 void NewTest() 本机函数。没有宏，没有技巧，直截了当。

现在，头文件是可选的，但它可以用来公开带有 C++ 原生签名的 Assert 类的方法（例如 wchar_t* 而不是 Stirng^），因此它可以让它接近 C++ 而远离 C++/CLI ：

这是一个例子：

```
// Example
#pragma once
#pragma managed(push, on)
using namespace System;
class Assert {
public:
    static void AreEqual(int expected, int actual) {
        Microsoft::VisualStudio::TestTools::UnitTesting::Assert::AreEqual(expected, actual);
    }

    static void AreEqual(int expected, int actual, PCWSTR pszMessage) {
        Microsoft::VisualStudio::TestTools::UnitTesting::Assert::AreEqual(expected, actual, gcnew String(pszMe
ssage));
    }

    template<typename T>
    static void AreEqual(T expected, T actual) {
        Microsoft::VisualStudio::TestTools::UnitTesting::Assert::AreEqual(expected, actual);
    }

    // Etcetera, other overloads...
}
#pragma managed(pop) 
```

高温高压

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-15T16:33:51.530

就个人而言，我更喜欢[WinUnit](http://msdn.microsoft.com/en-us/magazine/cc136757.aspx) ，因为它不需要我[写任何东西，除了我的测试](http://www.wintellect.com/cs/blogs/jrobbins/archive/2008/01/17/winunit-an-outstanding-native-c-unit-testing-tool.aspx)（我构建一个 .dll 作为测试，而不是一个 exe）。我只是构建了一个项目，并将 WinUnit.exe 指向我的测试输出目录，它会运行它找到的所有内容。您可以[在此处下载 WinUnit 项目](http://download.microsoft.com/download/f/2/7/f279e71e-efb0-4155-873d-5554a0608523/MSDNMag2008_02.exe)。（MSDN 现在要求您下载整个问题，而不是文章。WinUnit 包含在其中。）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-14T14:17:39.610

VS9 包含的框架*是*.NET，但您可以使用 C++/CLI 编写测试，因此只要您能够自如地学习一些 .NET 主义，您应该能够测试大多数 C++ 代码。

[boost.test](http://www.boost.org/doc/libs/1_35_0/libs/test/doc/) 和[googletest](http://code.google.com/p/googletest/) 看起来非常相似，但适用于稍微不同的用途。这两个都有一个二进制组件，因此您的解决方案中需要一个额外的项目来编译和运行测试。

我们使用的框架是[CxxTest](http://cxxtest.sourceforge.net/)，它更轻量级；它只是标题，并使用 Perl (!) 脚本从标题中抓取测试套件信息（套件继承自 CxxTest::Base，所有测试方法的名称都以“test”开头）。显然，这要求您从一个或[另一个](http://www.cygwin.com/)[来源](http://www.activestate.com/Products/activeperl/index.mhtml)获取 Perl ，这会增加构建环境设置的开销。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-06T08:28:14.620

我使用[UnitTest++](https://github.com/unittest-cpp)。

自从我发表这篇文章以来的几年里，源代码已经从 SourceForge 转移到了 github。此外，[示例教程](https://github.com/unittest-cpp/unittest-cpp/wiki/Writing-More-Tests-With-the-Bowling-Game-Kata)现在更加不可知 - 根本不涉及任何配置或项目设置。

我怀疑它仍然适用于 Visual Studio 6，因为项目文件现在是通过 CMake 创建的。如果您仍然需要旧版本支持，您可以在[SourceForge](https://github.com/unittest-cpp/unittest-cpp/tree/sourceforge)分支下获得最后一个可用版本。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-06-24T06:21:25.387

这里提到的工具都是命令行工具。如果您正在寻找更集成的解决方案，请查看[cfix studio](http://www.cfix-studio.com/)，它是用于 C/C++ 单元测试的 Visual Studio 插件。它与 TestDriven.Net 非常相似，但用于（非托管）C/C++ 而不是 .NET。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-11T23:13:28.770

我已经将[CppUnit](http://cppunit.sourceforge.net/cppunit-wiki)与 VS2005 和 Eclipse 一起使用。wiki 非常详尽（特别是如果您熟悉 JUnit）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-11T23:45:25.633

我不是 100% 确定 VS2008，但我知道微软在 VS2005 中作为 Team Suite 的一部分提供的单元测试框架仅适用于 .NET，而不适用于 C++

我也用过 CppUnit，没问题。与 NUnit/JUnit/等非常相似。

如果你用过 boost，他们[还有一个单元测试库](http://www.boost.org/doc/libs/1_35_0/libs/test/doc/index.html)

boost 背后的人有一些**严重**的编码印章，所以我想说他们的框架应该相当不错，但它可能不是最用户友好的 :-)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-19T17:01:49.547

据我所知，Visual Studio 2008 的单元测试器仅适用于 .NET 代码。

我在 Visual Studio 2005 上使用了 CppUnit，发现它非常好。

据我记得，设置相对轻松。只需确保在您的测试项目中链接器（链接器 → 输入 → 附加依赖项）包括 cppunitd.lib。

然后，`#include <cppunit/extensions/HelperMacros.h>`在您的标题中。

然后，您可以按照[http://cppunit.sourceforge.net/doc/1.11.6/cppunit_cookbook.html](http://cppunit.sourceforge.net/doc/1.11.6/cppunit_cookbook.html)中的步骤让您的测试类正常工作。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-27T18:15:50.350

出于同样的原因，我也喜欢 CxxTest。它只是一个头文件，因此不需要链接。你不会被 Perl 困住，因为还有一个 Python 运行器。我将很快审查谷歌图书馆。Boost 的东西带来了太多的其他包袱。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-12-07T08:32:16.853

我在使用 Visual Studio 在 Windows 环境中为非托管 C++ 应用程序实施单元测试时遇到了困难。所以我设法克服并写了一篇文章作为非托管 C++ 应用程序单元测试的分步指南。我希望它可以帮助你。

*[Visual Studio 中非托管 C++ 的单元测试](http://codeketchup.blogspot.sg/2012/12/unit-test-for-unmanaged-c-in-visual.html)*

# apache - .htaccess 指令*不*重定向某些 URL

> ID：3157
> 
> 赞同：22
> 
> 时间：2008-08-06T08:15:28.233
> 
> 标签：apache, .htaccess, mod-rewrite

在一个严重依赖`.htaccess`RewriteRules 的 PrettyURLs（在我的例子中是 CakePHP）的应用程序中，我如何正确设置指令以从重写中排除某些目录？那是：

```
/appRoot/.htaccess
         app/
         static/ 
```

默认情况下，每个请求`/appRoot/*`都被重写以被 接收`app/webroot/index.php`，并在其中对其进行分析并调用相应的控制器操作。这是通过以下指令完成的`.htaccess`：

```
RewriteBase /appRoot

RewriteRule ^$ app/webroot/     [L]
RewriteRule (.*) app/webroot/$1 [L] 
```

我现在想从这个重写中排除一些像 static/ 这样的目录。我在 Cake RewriteRules*之前*试过这个：

```
RewriteCond $1 ^(static|otherDir).*$ [NC]
RewriteRule (.*) - [L] 
```

到目前为止，它不再重写请求，但现在**所有**请求都被跳过，甚至是不应该匹配的合法 Cake 请求`^(static|otherDir).*$`。

我尝试了这些规则的几种变体，但无法让它按我想要的方式工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-07T06:09:54.337

而正确的答案 iii...

```
RewriteRule   ^(a|bunch|of|old|directories).* - [NC,L]

# all other requests will be forwarded to Cake
RewriteRule   ^$   app/webroot/   [L]
RewriteRule   (.*) app/webroot/$1 [L] 
```

即使有这些指令，我仍然不明白为什么最初调用根目录中的 index.php 文件。它现在位于

```
/appRoot/app/views/pages/home.ctp 
```

并通过 Cake 处理。现在有了这个，我想这也会奏效（迈克建议的略微修改版本，未经测试）：

```
RewriteCond $1      !^(a|bunch|of|old|directories).*$ [NC]
RewriteRule ^(.*)$  app/webroot/$1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-06T08:19:29.677

从前面的规则中删除 [L]：

```
RewriteBase /appRoot

RewriteRule ^$ app/webroot/ &nbsp; &nbsp;
RewriteRule (.*) app/webroot/$1 
```

[L] 表示“在此处停止重写过程，不再应用任何重写规则。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-06T08:26:56.667

您能否不将条件应用于以下规则，而是使用否定，如（有一些变化，我不太擅长记住 .htaccess 规则，所以标志可能是错误的）：

```
RewriteCond $1 !^(static|otherDir).*$ [NC]
RewriteRule ^$ app/webroot/ [L]

RewriteCond $1 !^(static|otherDir).*$ [NC]
RewriteRule ^$ app/webroot/$1 [L] 
```

# apache-flex - Actionscript 3 - 将 yyyy-mm-dd hh:mm:ss 解析为 Date 对象的最快方法？

> ID：3163
> 
> 赞同：24
> 
> 时间：2008-08-06T08:33:53.097
> 
> 标签：apache-flex, actionscript-3

我一直在尝试找到一种非常快速的方法来将 yyyy-mm-dd [hh:mm:ss] 解析为 Date 对象。以下是我尝试过的 3 种方法，以及每种方法解析 50,000 个日期时间字符串所需的时间。

有谁知道任何更快的方法或加快方法的提示？

```
castMethod1 takes 3673 ms 
castMethod2 takes 3812 ms 
castMethod3 takes 3931 ms 
```

代码：

```
private function castMethod1(dateString:String):Date {
    if ( dateString == null ) {
        return null;
    }

    var year:int = int(dateString.substr(0,4));
    var month:int = int(dateString.substr(5,2))-1;
    var day:int = int(dateString.substr(8,2));

    if ( year == 0 && month == 0 && day == 0 ) {
        return null;
    }

    if ( dateString.length == 10 ) {
        return new Date(year, month, day);
    }

    var hour:int = int(dateString.substr(11,2));
    var minute:int = int(dateString.substr(14,2));
    var second:int = int(dateString.substr(17,2));

    return new Date(year, month, day, hour, minute, second);
} 
```

-

```
private function castMethod2(dateString:String):Date {
    if ( dateString == null ) {
        return null;
    }

    if ( dateString.indexOf("0000-00-00") != -1 ) {
        return null;
    }

    dateString = dateString.split("-").join("/");

    return new Date(Date.parse( dateString ));
} 
```

-

```
private function castMethod3(dateString:String):Date {
    if ( dateString == null ) {
        return null;
    }

    var mainParts:Array = dateString.split(" ");
    var dateParts:Array = mainParts[0].split("-");

    if ( Number(dateParts[0])+Number(dateParts[1])+Number(dateParts[2]) == 0 ) {
        return null;
    }

    return new Date( Date.parse( dateParts.join("/")+(mainParts[1]?" "+mainParts[1]:" ") ) );
} 
```

* * *

不， Date.parse 默认情况下不会处理破折号。我需要为日期时间字符串（如`"0000-00-00"`.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-08-13T16:21:37.243

我一直在使用以下 snipplet 来解析 UTC 日期字符串：

```
private function parseUTCDate( str : String ) : Date {
    var matches : Array = str.match(/(\d\d\d\d)-(\d\d)-(\d\d) (\d\d):(\d\d):(\d\d)Z/);

    var d : Date = new Date();

    d.setUTCFullYear(int(matches[1]), int(matches[2]) - 1, int(matches[3]));
    d.setUTCHours(int(matches[4]), int(matches[5]), int(matches[6]), 0);

    return d;
} 
```

只需删除时间部分，它应该可以满足您的需求：

```
private function parseDate( str : String ) : Date {
    var matches : Array = str.match(/(\d\d\d\d)-(\d\d)-(\d\d)/);

    var d : Date = new Date();

    d.setUTCFullYear(int(matches[1]), int(matches[2]) - 1, int(matches[3]));

    return d;
} 
```

~~不知道速度，我在我的应用程序中并不担心。~~在我的机器上进行 50K 次迭代不到一秒。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-13T14:42:52.357

这是经过一番摆弄后我能想到的最快的：

```
private function castMethod4(dateString:String):Date {          
    if ( dateString == null ) 
        return null;    
    if ( dateString.length != 10 && dateString.length != 19) 
        return null;

    dateString = dateString.replace("-", "/");
    dateString = dateString.replace("-", "/");

    return new Date(Date.parse( dateString ));
} 
```

我的计算机上的 castMethod2() 在大约 470 毫秒内完成了 50k 次迭代，我的版本在 300 毫秒内完成了迭代（这与在 63% 的时间内完成的工作量相同）。我肯定会说两者都“足够好”，除非您要解析大量的日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-06T08:50:13.373

我猜 Date.Parse() 不起作用？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T09:00:31.483

那么方法2似乎是最好的方法：

```
private function castMethod2(dateString:String):Date {
    if ( dateString == null ) {
        return null;
    }

    if ( dateString.indexOf("0000-00-00") != -1 ) {
        return null;
    }

    dateString = dateString.split("-").join("/");

    return new Date(Date.parse( dateString ));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-06-10T16:06:12.517

因为 Date.parse() 不接受所有可能的格式，我们可以使用 DateFormatter 和 Data.parse() 可以理解的 formatString 对传递的 dateString 值进行预格式化，例如

```
// English formatter
var stringValue = "2010.10.06"
var dateCommonFormatter : DateFormatter = new DateFormatter();
dateCommonFormatter.formatString = "YYYY/MM/DD";

var formattedStringValue : String = dateCommonFormatter.format(stringValue);                                
var dateFromString : Date = new Date(Date.parse(formattedStringValue)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-24T01:24:45.013

```
var strDate:String = "2013-01-24 01:02:40";

function dateParser(s:String):Date{
    var regexp:RegExp = /(\d{4})\-(\d{1,2})\-(\d{1,2}) (\d{2})\:(\d{2})\:(\d{2})/;
    var _result:Object = regexp.exec(s);

    return new Date(
        parseInt(_result[1]),
        parseInt(_result[2])-1,
        parseInt(_result[3]),
        parseInt(_result[4]),
        parseInt(_result[5]),
        parseInt(_result[6])
    );
}

var myDate:Date = dateParser(strDate); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-08-07T11:40:13.590

这是我的实现。试试这个。

```
public static function dateToUtcTime(date:Date):String {
  var tmp:Array = new Array();
  var char:String;
  var output:String = '';

  // create format YYMMDDhhmmssZ
  // ensure 2 digits are used for each format entry, so 0x00 suffuxed at each byte

  tmp.push(date.secondsUTC);
  tmp.push(date.minutesUTC);
  tmp.push(date.hoursUTC);
  tmp.push(date.getUTCDate());
  tmp.push(date.getUTCMonth() + 1); // months 0-11
  tmp.push(date.getUTCFullYear() % 100);

  for(var i:int=0; i < 6/* 7 items pushed*/; ++i) {
    char = String(tmp.pop());
    trace("char: " + char);
    if(char.length < 2)
      output += "0";
    output += char;
  }

  output += 'Z';

  return output;
} 
```

# c# - 返回到 Web 相对路径的绝对路径

> ID：3164
> 
> 赞同：66
> 
> 时间：2008-08-06T08:34:13.983
> 
> 标签：c#, asp.net, .net, path, mappath

如果我已经设法使用 Server.MapPath 找到并验证文件的存在并且我现在想将用户直接发送到该文件，那么将该绝对路径转换回相对 Web 路径的**最快方法是什么？**

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2008-08-06T09:28:50.940

也许这可能有效：

```
String RelativePath = AbsolutePath.Replace(Request.ServerVariables["APPL_PHYSICAL_PATH"], String.Empty); 
```

*我正在使用 c# 但可以适应 vb。*

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2011-03-07T17:27:02.383

拥有**Server.RelativePath(path)**不是很好吗？

好吧，你只需要扩展它;-)

```
public static class ExtensionMethods
{
    public static string RelativePath(this HttpServerUtility srv, string path, HttpRequest context)
    {
        return path.Replace(context.ServerVariables["APPL_PHYSICAL_PATH"], "~/").Replace(@"\", "/");
    }
} 
```

有了这个，你可以简单地打电话

```
Server.RelativePath(path, Request); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-05T14:05:48.737

我知道这很旧，但我需要考虑虚拟目录（根据@Costo 的评论）。这似乎有帮助：

```
static string RelativeFromAbsolutePath(string path)
{
    if(HttpContext.Current != null)
    {
        var request = HttpContext.Current.Request;
        var applicationPath = request.PhysicalApplicationPath;
        var virtualDir = request.ApplicationPath;
        virtualDir = virtualDir == "/" ? virtualDir : (virtualDir + "/");
        return path.Replace(applicationPath, virtualDir).Replace(@"\", "/");
    }

    throw new InvalidOperationException("We can only map an absolute back to a relative path if an HttpContext is available.");
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-24T08:19:45.037

我喜欢 Canoas 的想法。不幸的是，我没有可用的“HttpContext.Current.Request”（BundleConfig.cs）。

我改变了这样的方法：

```
public static string RelativePath(this HttpServerUtility srv, string path)
{
     return path.Replace(HttpContext.Current.Server.MapPath("~/"), "~/").Replace(@"\", "/");
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-06T08:44:34.820

如果您使用了 Server.MapPath，那么您应该已经有了相对 Web 路径。根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)，此方法采用一个变量*path*，它是 Web 服务器的虚拟路径。因此，如果您能够调用该方法，您应该已经可以立即访问相对 Web 路径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-19T11:40:03.870

对于 asp.net 核心，我编写了辅助类来获取两个方向的路径。

```
public class FilePathHelper
{
    private readonly IHostingEnvironment _env;
    public FilePathHelper(IHostingEnvironment env)
    {
        _env = env;
    }
    public string GetVirtualPath(string physicalPath)
    {
        if (physicalPath == null) throw new ArgumentException("physicalPath is null");
        if (!File.Exists(physicalPath)) throw new FileNotFoundException(physicalPath + " doesn't exists");
        var lastWord = _env.WebRootPath.Split("\\").Last();
        int relativePathIndex = physicalPath.IndexOf(lastWord) + lastWord.Length;
        var relativePath = physicalPath.Substring(relativePathIndex);
        return $"/{ relativePath.TrimStart('\\').Replace('\\', '/')}";
    }
    public string GetPhysicalPath(string relativepath)
    {
        if (relativepath == null) throw new ArgumentException("relativepath is null");
        var fileInfo = _env.WebRootFileProvider.GetFileInfo(relativepath);
        if (fileInfo.Exists) return fileInfo.PhysicalPath;
        else throw new FileNotFoundException("file doesn't exists");
    } 
```

从控制器或服务注入 FilePathHelper 并使用：

```
var physicalPath = _fp.GetPhysicalPath("/img/banners/abro.png"); 
```

反之亦然

```
var virtualPath = _fp.GetVirtualPath(physicalPath); 
```

# fogbugz - 有人用fogbugz独奏吗？

> ID：3180
> 
> 赞同：35
> 
> 时间：2008-08-06T08:47:45.423
> 
> 标签：fogbugz

有没有人单独工作并在那里使用fogbugz？我对个人经验/开销与纸张感兴趣。

我参与了几个项目，并且对很多细节都非常了解，以跟踪......欢迎任何经验。

（是的，我知道 Joel 先生在 stackoverflow 团队中……我仍然想要好的答案：）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-08-06T08:52:51.980

我使用它，特别是因为 FugBugz 的托管版本[最多可供 2 人免费使用](https://stackoverflow.com/questions/3180/anyone-soloing-using-fogbugz#3581)。我发现它比纸要好得多，因为我正在处理多个项目，一旦你开始做注释，或者如果你想重新组织和随机分配任务，我的论文往往会变得相当混乱，将它们标记为完成只是为了查看毕竟它们并不完整……

此外，Visual Studio 的集成非常简洁，是纸张无法与之匹敌的。此外，如果您将项目搁置 6 个月然后回来，您的所有任务和笔记仍然存在，而对于纸张，您可能需要再次搜索所有旧文档和笔记，如果您没有丢弃它。

但这只是一个不太善于保持井井有条的人的观点 :-) 如果你是一个非常整洁和有条理的人，纸对你来说可能比对我更有用。

额外建议：在第二台 PC（或像 eeePC 这样的小型笔记本电脑）上运行 Fogbugz，这样您就可以随时使用它。任务跟踪程序（无论是 FogBugz、Outlook、Excel 还是只是记事本）的主要问题是它们占用了屏幕空间，而我的两台显示器通常都装满了 Visual Studio、电子邮件、Web 浏览器、一些记事本等。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-08-06T15:46:49.197

访问[http://www.fogbugz.com/](http://www.fogbugz.com/)，然后在底部的“Try It”下注册。

在设置 => 您的 FogBugz 托管帐户下，它应该已经显示“付款信息：使用学生版和启动版”。或者应该有一些选项/链接来打开学生版和启动版。

是的，这不仅适用于学生和初创公司，我还请求他们的支持 :-)

免责声明：我不隶属于 FogCreek，Joel 不仅将钱存入我的账户。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-08-06T10:46:14.373

当我为自己做咨询业务时，我注册了一个托管帐户，老实说，没有它我做不到。

我最喜欢它的是注册一个帐户需要 30 秒，然后我能够使用 sourcegear vault（这是一个优秀的源代码控制产品，对单个开发人员免费）集成源代码控制设置项目、客户、发布和版本并不断监控我的进度。

让我大吃一惊的一件事是，我最终完全放弃了所有与工作相关的通信的前景。我可以在fogbugz 中管理我所有的客户交互，而且效果非常好。

在开销方面，您可以做的一件好事是将任何东西变成一个案例。您在编码时想到的任何事情，您只需创建一封新电子邮件，将其发送到fogbugz，然后立即将其添加为项目以供稍后查看。

我强烈建议您让自己拥有一个托管帐户并试一试

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-08-06T15:08:52.813

除了已经提到的好处之外，使用 FogBugz 的另一个不错的功能是 BugzScout，您可以使用它来报告应用程序中的错误并将它们自动记录到 FogBugz。如果您是一个人的团队，那么您的代码中可能存在一些您在自己的测试期间从未见过的错误，因此很高兴能够自动报告并记录这些“在野外”发现的错误。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-08-06T10:05:25.237

我也使用它，坦率地说，没有它我不想工作。

我一直为我从事的项目提供某种问题跟踪器，因此非常习惯于更新它。有了 FB6，这个过程现在变得更好了。

由于 FB 还与 Subversion 集成，这是我用于项目的源代码控制工具，这个过程非常好，我现在在两个系统之间有双向链接。我可以单击 Subversion 日志中的案例编号并转到 FB 中的案例，或者查看绑定到 FB 中的案例的修订。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-08-13T17:25:21.250

我认为 Joel 等人很棒。让人们自行使用免费托管的 FogBugs。这是一个很棒的商业策略，因为用户成为粉丝（毕竟这是一个很棒的软件），然后他们将它推荐给他们的企业或客户。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-30T08:40:48.697

是的 FogBugz 非常适合流程轻、快速和简单的任务管理。它似乎特别适合独奏，您不需要或不希望该区域有很多复杂性。

顺便说一句，如果您想跟踪您整天在计算机上所做的事情，请查看与 FogBugz 集成的 TimeSprite。这是一个 Windows 应用程序，它记录您的活动窗口，然后根据您定义的窗口标题/活动类型映射对您的活动进行分类。（您也可以直接告诉它您在做什么。）如果您是 FogBugz 用户，您可以将您的工作与 FogBugz 案例相关联，它会上传您针对该案例的时间间隔。这使得准确记录经过的时间变得非常轻松，并且尽可能准确，这反过来又提高了 FogBugz 在其基于证据的调度中的预测能力。此外，在单打独斗时，我发现这种对时间的特定记录让我能够专注于任务，就像一个曲折的经理可能会做的那样。（一世'

# sql - SQL查询、计数和分组依据

> ID：3196
> 
> 赞同：25
> 
> 时间：2008-08-06T09:00:58.063
> 
> 标签：sql

如果我有这样的数据：

| 钥匙 | 姓名 |
| --- | --- |
| 1 | 担 |
| 2 | 汤姆 |
| 3 | 乔恩 |
| 4 | 汤姆 |
| 5 | 山姆 |
| 6 | 担 |

什么是 SQL 查询来带回`Name`重复 2 次或更多次的记录？

所以我想要的结果是

| 汤姆 |
| --- |
| 担 |

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-08-06T09:02:36.907

再简单不过了……

```
Select Name, Count(Name) As Count 
    From Table
    Group By Name
    Having Count(Name) > 1
    Order By Count(Name) Desc 
```

这也可以扩展到删除重复项：

```
Delete From Table
Where Key In (
    Select Max(Key)
        From Table
        Group By Name
        Having Count(Name) > 1
    ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-17T04:36:53.657

```
select name from table group by name having count(name) > 1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-10T01:31:05.703

这也可以通过将表与自身连接来完成，

```
SELECT DISTINCT t1.name
FROM    tbl t1
        INNER JOIN tbl t2
        ON      t1.name = t2.name
WHERE   t1.key         != t2.key; 
```

# c# - 将整数转换为书面数字

> ID：3213
> 
> 赞同：63
> 
> 时间：2008-08-06T09:21:09.490
> 
> 标签：c#, integer

是否有将整数转换为书面数字的有效方法，例如：

```
string Written = IntegerToWritten(21); 
```

将返回“二十一”。

有没有不涉及大量查找表的方法？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2008-08-06T10:31:24.170

这应该工作得相当好：

```
public static class HumanFriendlyInteger
{
    static string[] ones = new string[] { "", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine" };
    static string[] teens = new string[] { "Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen" };
    static string[] tens = new string[] { "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety" };
    static string[] thousandsGroups = { "", " Thousand", " Million", " Billion" };

    private static string FriendlyInteger(int n, string leftDigits, int thousands)
    {
        if (n == 0)
        {
            return leftDigits;
        }

        string friendlyInt = leftDigits;

        if (friendlyInt.Length > 0)
        {
            friendlyInt += " ";
        }

        if (n < 10)
        {
            friendlyInt += ones[n];
        }
        else if (n < 20)
        {
            friendlyInt += teens[n - 10];
        }
        else if (n < 100)
        {
            friendlyInt += FriendlyInteger(n % 10, tens[n / 10 - 2], 0);
        }
        else if (n < 1000)
        {
            friendlyInt += FriendlyInteger(n % 100, (ones[n / 100] + " Hundred"), 0);
        }
        else
        {
            friendlyInt += FriendlyInteger(n % 1000, FriendlyInteger(n / 1000, "", thousands+1), 0);
            if (n % 1000 == 0)
            {
                return friendlyInt;
            }
        }

        return friendlyInt + thousandsGroups[thousands];
    }

    public static string IntegerToWritten(int n)
    {
        if (n == 0)
        {
            return "Zero";
        }
        else if (n < 0)
        {
            return "Negative " + IntegerToWritten(-n);
        }

        return FriendlyInteger(n, "", 0);
    }
} 
```

（经过编辑以修复百万、十亿等的错误）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-10-07T12:46:09.923

我使用这个名为 Humanizer 的方便的库。

[https://github.com/Humanizr/Humanizer](https://github.com/Humanizr/Humanizer)

它支持多种文化，不仅可以将数字转换为单词，还可以转换日期，而且使用起来非常简单。

这是我如何使用它：

```
int someNumber = 543;
var culture = System.Globalization.CultureInfo("en-US");
var result = someNumber.ToWords(culture); // 543 -> five hundred forty-three 
```

瞧！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-08-06T09:46:18.863

我使用此代码。它是 VB 代码，但您可以轻松地将其转换为 C#。有用

```
Function NumberToText(ByVal n As Integer) As String

   Select Case n
Case 0
  Return ""

Case 1 To 19
  Dim arr() As String = {"One","Two","Three","Four","Five","Six","Seven", _
    "Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen", _
      "Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"}
  Return arr(n-1) & " "

Case 20 to 99
  Dim arr() as String = {"Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"}
  Return arr(n\10 -2) & " " & NumberToText(n Mod 10)

Case 100 to 199
  Return "One Hundred " & NumberToText(n Mod 100)

Case 200 to 999
  Return NumberToText(n\100) & "Hundreds " & NumberToText(n mod 100)

Case 1000 to 1999
  Return "One Thousand " & NumberToText(n Mod 1000)

Case 2000 to 999999
  Return NumberToText(n\1000) & "Thousands " & NumberToText(n Mod 1000)

Case 1000000 to 1999999
  Return "One Million " & NumberToText(n Mod 1000000)

Case 1000000 to 999999999
  Return NumberToText(n\1000000) & "Millions " & NumberToText(n Mod 1000000)

Case 1000000000 to 1999999999
  Return "One Billion " & NumberTotext(n Mod 1000000000)

Case Else
  Return NumberToText(n\1000000000) & "Billion " _
    & NumberToText(n mod 1000000000)
End Select
End Function 
```

这是c#中的代码

```
public static string AmountInWords(double amount)
{
        var n = (int)amount;

        if (n == 0)
            return "";
        else if (n > 0 && n <= 19)
        {
            var arr = new string[] { "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen" };
            return arr[n - 1] + " ";
        }
        else if (n >= 20 && n <= 99)
        {
            var arr = new string[] { "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety" };
            return arr[n / 10 - 2] + " " + AmountInWords(n % 10);
        }
        else if (n >= 100 && n <= 199)
        {
            return "One Hundred " + AmountInWords(n % 100);
        }
        else if (n >= 200 && n <= 999)
        {
            return AmountInWords(n / 100) + "Hundred " + AmountInWords(n % 100);
        }
        else if (n >= 1000 && n <= 1999)
        {
            return "One Thousand " + AmountInWords(n % 1000);
        }
        else if (n >= 2000 && n <= 999999)
        {
            return AmountInWords(n / 1000) + "Thousand " + AmountInWords(n % 1000);
        }
        else if (n >= 1000000 && n <= 1999999)
        {
            return "One Million " + AmountInWords(n % 1000000);
        }
        else if (n >= 1000000 && n <= 999999999)
        {
            return AmountInWords(n / 1000000) + "Million " + AmountInWords(n % 1000000);
        }
        else if (n >= 1000000000 && n <= 1999999999)
        {
            return "One Billion " + AmountInWords(n % 1000000000);
        }
        else
        {
            return AmountInWords(n / 1000000000) + "Billion " + AmountInWords(n % 1000000000);
        }
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-06T09:22:35.993

为什么要海量查找表？

```
string GetWrittenInteger(int n)
{
  string[] a = new string[] {"One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine" }
  string[] b = new string[] { "Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen" }
  string[] c = new string[] {"Twenty", "Thirty", "Forty", "Sixty", "Seventy", "Eighty", "Ninety"};
  string[] d = new string[] {"Hundred", "Thousand", "Million"}
  string s = n.ToString();

  for (int i = 0; i < s.Length; i++)
  {
    // logic (too lazy but you get the idea)
  }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-12-04T18:18:02.027

```
using System;
using System.Collections.Generic; 
using System.Linq; 
using System.Text; 

namespace tryingstartfror4digits 
{ 
    class Program 
    { 
        static void Main(string[] args)
        {
            Program pg = new Program();
            Console.WriteLine("Enter ur number");
            int num = Convert.ToInt32(Console.ReadLine());

            if (num <= 19)
            {
                string g = pg.first(num);
                Console.WriteLine("The number is " + g);
            }
            else if ((num >= 20) && (num <= 99))
            {
                    if (num % 10 == 0)
                    {
                        string g = pg.second(num / 10);
                        Console.WriteLine("The number is " + g);
                    }
                    else
                    {
                        string g = pg.second(num / 10) + pg.first(num % 10);
                        Console.WriteLine("The number is " + g);
                    }
            }
            else if ((num >= 100) && (num <= 999))
            {
                int k = num % 100;
                string g = pg.first(num / 100) +pg.third(0) + pg.second(k / 10)+pg.first(k%10);
                Console.WriteLine("The number is " + g);
            }
            else if ((num >= 1000) && (num <= 19999))
            {
                int h = num % 1000;
                int k = h % 100;
                string g = pg.first(num / 1000) + "Thousand " + pg.first(h/ 100) + pg.third(k) + pg.second(k / 10) + pg.first(k % 10);
                Console.WriteLine("The number is " + g);
            }

            Console.ReadLine();
        }

        public string first(int num)
        {
            string name;

            if (num == 0)
            {
                name = " ";
            }
            else
            {
                string[] arr1 = new string[] { "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine" , "Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen"};
                name = arr1[num - 1];
            }

            return name;
        }

        public string second(int num)
        {
            string name;

            if ((num == 0)||(num==1))
            {
                 name = " ";
            }
            else
            {
                string[] arr1 = new string[] { "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety" };
                name = arr1[num - 2];
            }

            return name;
        }

        public string third(int num)
        {
            string name ;

            if (num == 0)
            {
                name = "";
            }
            else
            {
                string[] arr1 = new string[] { "Hundred" };
                name = arr1[0];
            }

            return name;
        }
    }
} 
```

从 1 到 19999 工作正常，我完成后很快就会更新

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-26T20:18:11.677

接受的答案似乎并不完美。它不处理像二十一这样的数字中的破折号，它不把“和”这个词放在像“一百零一”这样的数字中，而且，它是递归的。

这是我的答案。它智能地添加“和”字，并适当地连字符数字。让我知道是否需要任何修改。

下面是如何调用它（显然你会想把它放在某个类中）：

```
for (int i = int.MinValue+1; i < int.MaxValue; i++)
{
    Console.WriteLine(ToWords(i));
} 
```

这是代码：

```
private static readonly string[] Ones = {"", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine"};

private static readonly string[] Teens =
{
    "Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen",
    "Seventeen", "Eighteen", "Nineteen"
};

private static readonly string[] Tens =
{
    "", "", "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty",
    "Ninety"
};

public static string ToWords(int number)
{
    if (number == 0)
        return "Zero";

    var wordsList = new List<string>();

    if (number < 0)
    {
        wordsList.Add("Negative");
        number = Math.Abs(number);
    }

    if (number >= 1000000000 && number <= int.MaxValue) //billions
    {
        int billionsValue = number / 1000000000;
        GetValuesUnder1000(billionsValue, wordsList);
        wordsList.Add("Billion");
        number -= billionsValue * 1000000000;

        if (number > 0 && number < 10)
            wordsList.Add("and");
    }

    if (number >= 1000000 && number < 1000000000) //millions
    {
        int millionsValue = number / 1000000;
        GetValuesUnder1000(millionsValue, wordsList);
        wordsList.Add("Million");
        number -= millionsValue * 1000000;

        if (number > 0 && number < 10)
            wordsList.Add("and");
    }

    if (number >= 1000 && number < 1000000) //thousands
    {
        int thousandsValue = number/1000;
        GetValuesUnder1000(thousandsValue, wordsList);
        wordsList.Add("Thousand");
        number -= thousandsValue * 1000;

        if (number > 0 && number < 10)
            wordsList.Add("and");
    }

    GetValuesUnder1000(number, wordsList);

    return string.Join(" ", wordsList);
}

private static void GetValuesUnder1000(int number, List<string> wordsList)
{
    while (number != 0)
    {
        if (number < 10)
        {
            wordsList.Add(Ones[number]);
            number -= number;
        }
        else if (number < 20)
        {
            wordsList.Add(Teens[number - 10]);
            number -= number;
        }
        else if (number < 100)
        {
            int tensValue = ((int) (number/10))*10;
            int onesValue = number - tensValue;

            if (onesValue == 0)
            {
                wordsList.Add(Tens[tensValue/10]);
            }
            else
            {
                wordsList.Add(Tens[tensValue/10] + "-" + Ones[onesValue]);
            }

            number -= tensValue;
            number -= onesValue;
        }
        else if (number < 1000)
        {
            int hundredsValue = ((int) (number/100))*100;
            wordsList.Add(Ones[hundredsValue/100]);
            wordsList.Add("Hundred");
            number -= hundredsValue;

            if (number > 0)
                wordsList.Add("and");
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-13T23:24:38.623

这是一个[C# 控制台应用程序](http://forums.exchangecore.com/topic/684-convert-number-to-words-c-console-application/)，它将返回整数和小数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-15T08:01:43.020

[仅用于HumanFriendlyInteger](https://stackoverflow.com/a/3267/197652) (↑)类的土耳其语表示（Türkçe，sayı yazı karşılığı）：

```
public static class HumanFriendlyInteger
{
    static string[] ones = new string[] { "", "Bir", "İki", "Üç", "Dört", "Beş", "Altı", "Yedi", "Sekiz", "Dokuz" };
    static string[] teens = new string[] { "On", "On Bir", "On İki", "On Üç", "On Dört", "On Beş", "On Altı", "On Yedi", "On Sekiz", "On Dokuz" };
    static string[] tens = new string[] { "Yirmi", "Otuz", "Kırk", "Elli", "Altmış", "Yetmiş", "Seksen", "Doksan" };
    static string[] thousandsGroups = { "", " Bin", " Milyon", " Milyar" };

    private static string FriendlyInteger(int n, string leftDigits, int thousands)
    {
        if (n == 0)
        {
            return leftDigits;
        }

        string friendlyInt = leftDigits;

        if (friendlyInt.Length > 0)
        {
            friendlyInt += " ";
        }

        if (n < 10)
            friendlyInt += ones[n];
        else if (n < 20)
            friendlyInt += teens[n - 10];
        else if (n < 100)
            friendlyInt += FriendlyInteger(n % 10, tens[n / 10 - 2], 0);
        else if (n < 1000)
            friendlyInt += FriendlyInteger(n % 100, ((n / 100 == 1 ? "" : ones[n / 100] + " ") + "Yüz"), 0); // Yüz 1 ile başlangıçta "Bir" kelimesini Türkçe'de almaz.
        else
            friendlyInt += FriendlyInteger(n % 1000, FriendlyInteger(n / 1000, "", thousands + 1), 0);

        return friendlyInt + thousandsGroups[thousands];
    }

    public static string IntegerToWritten(int n)
    {
        if (n == 0)
            return "Sıfır";
        else if (n < 0)
            return "Eksi " + IntegerToWritten(-n);

        return FriendlyInteger(n, "", 0);
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-05T08:20:33.477

只需获取该字符串并转换为字符串 s=txtNumber.Text.Tostring(); int i=Convert.ToInt32(s.Tostring()); 它只会写入完整的整数值

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-12-10T08:58:56.990

Nick Masao 对同一问题的孟加拉数字的回答的扩展。数字的初始输入是 Unicode 字符串。干杯！！

```
string number = "২২৮৯";
number = number.Replace("০", "0").Replace("১", "1").Replace("২", "2").Replace("৩", "3").Replace("৪", "4").Replace("৫", "5").Replace("৬", "6").Replace("৭", "7").Replace("৮", "8").Replace("৯", "9");
double vtempdbl = Convert.ToDouble(number);
string amount = AmountInWords(vtempdbl);

private static string AmountInWords(double amount)
    {
        var n = (int)amount;

        if (n == 0)
            return " ";
        else if (n > 0 && n <= 99)
        {
            var arr = new string[] {  "এক", "দুই",  "তিন",  "চার",  "পাঁচ", "ছয়",  "সাত",  "আট",   "নয়",  "দশ",   "এগার", "বারো", "তের",  "চৌদ্দ",    "পনের", "ষোল", "সতের", "আঠার", "ঊনিশ", "বিশ",  "একুশ", "বাইস", "তেইশ", "চব্বিশ",   "পঁচিশ",    "ছাব্বিশ",  "সাতাশ",    "আঠাশ", "ঊনত্রিশ",  "ত্রিশ",    "একত্রিস",  "বত্রিশ",   "তেত্রিশ",  "চৌত্রিশ",  "পঁয়ত্রিশ", "ছত্রিশ",   "সাঁইত্রিশ",    "আটত্রিশ",  "ঊনচল্লিশ", "চল্লিশ",   "একচল্লিশ", "বিয়াল্লিশ",    "তেতাল্লিশ",    "চুয়াল্লিশ",    "পয়তাল্লিশ",    "ছিচল্লিশ", "সাতচল্লিশ",    "আতচল্লিশ", "উনপঞ্চাশ", "পঞ্চাশ",   "একান্ন",   "বায়ান্ন",  "তিপ্পান্ন",    "চুয়ান্ন",  "পঞ্চান্ন", "ছাপ্পান্ন",    "সাতান্ন",  "আটান্ন",   "উনষাট",    "ষাট",  "একষট্টি",  "বাষট্টি",  "তেষট্টি",  "চৌষট্টি",  "পয়ষট্টি",  "ছিষট্টি",  " সাতষট্টি",    "আটষট্টি",  "ঊনসত্তর ", "সত্তর",    "একাত্তর ", "বাহাত্তর", "তেহাত্তর", "চুয়াত্তর", "পঁচাত্তর", "ছিয়াত্তর", "সাতাত্তর", "আটাত্তর",  "ঊনাশি",    "আশি",  "একাশি",    "বিরাশি",   "তিরাশি",   "চুরাশি",   "পঁচাশি",   "ছিয়াশি",   "সাতাশি",   "আটাশি",    "উননব্বই",  "নব্বই",    "একানব্বই", "বিরানব্বই",    "তিরানব্বই",    "চুরানব্বই",    "পঁচানব্বই ",   "ছিয়ানব্বই ",   "সাতানব্বই",    "আটানব্বই", "নিরানব্বই" };
            return arr[n - 1] + " ";
        }
        else if (n >= 100 && n <= 199)
        {
            return AmountInWords(n / 100) + "এক শত " + AmountInWords(n % 100);
        }

        else if (n >= 100 && n <= 999)
        {
            return AmountInWords(n / 100) + "শত " + AmountInWords(n % 100);
        }
        else if (n >= 1000 && n <= 1999)
        {
            return "এক হাজার " + AmountInWords(n % 1000);
        }
        else if (n >= 1000 && n <= 99999)
        {
            return AmountInWords(n / 1000) + "হাজার " + AmountInWords(n % 1000);
        }
        else if (n >= 100000 && n <= 199999)
        {
            return "এক লাখ " + AmountInWords(n % 100000);
        }
        else if (n >= 100000 && n <= 9999999)
        {
            return AmountInWords(n / 100000) + "লাখ " + AmountInWords(n % 100000);
        }
        else if (n >= 10000000 && n <= 19999999)
        {
            return "এক কোটি " + AmountInWords(n % 10000000);
        }
        else
        {
            return AmountInWords(n / 10000000) + "কোটি " + AmountInWords(n % 10000000);
        }
    } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-06-07T00:27:17.013

以下 C# 控制台应用程序代码将接受最多 2 位小数的货币值并以英文打印。这不仅将整数转换为其英语等价物，而且将其转换为美元和美分的货币价值。

```
 namespace ConsoleApplication2
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text.RegularExpressions;
    class Program
    {
       static void Main(string[] args)
        {
            bool repeat = true;
            while (repeat)
            {
                string inputMonetaryValueInNumberic = string.Empty;
                string centPart = string.Empty;
                string dollarPart = string.Empty;
                Console.Write("\nEnter the monetary value : ");
                inputMonetaryValueInNumberic = Console.ReadLine();
                inputMonetaryValueInNumberic = inputMonetaryValueInNumberic.TrimStart('0');

                if (ValidateInput(inputMonetaryValueInNumberic))
                {

                    if (inputMonetaryValueInNumberic.Contains('.'))
                    {
                        centPart = ProcessCents(inputMonetaryValueInNumberic.Substring(inputMonetaryValueInNumberic.IndexOf(".") + 1));
                        dollarPart = ProcessDollar(inputMonetaryValueInNumberic.Substring(0, inputMonetaryValueInNumberic.IndexOf(".")));
                    }
                    else
                    {
                        dollarPart = ProcessDollar(inputMonetaryValueInNumberic);
                    }
                    centPart = string.IsNullOrWhiteSpace(centPart) ? string.Empty : " and " + centPart;
                    Console.WriteLine(string.Format("\n\n{0}{1}", dollarPart, centPart));
                }
                else
                {
                    Console.WriteLine("Invalid Input..");
                }

                Console.WriteLine("\n\nPress any key to continue or Escape of close : ");
                var loop = Console.ReadKey();
                repeat = !loop.Key.ToString().Contains("Escape");
                Console.Clear();
            }

        }

        private static string ProcessCents(string cents)
        {
            string english = string.Empty;
            string dig3 = Process3Digit(cents);
            if (!string.IsNullOrWhiteSpace(dig3))
            {
                dig3 = string.Format("{0} {1}", dig3, GetSections(0));
            }
            english = dig3 + english;
            return english;
        }
        private static string ProcessDollar(string dollar)
        {
            string english = string.Empty;
            foreach (var item in Get3DigitList(dollar))
            {
                string dig3 = Process3Digit(item.Value);
                if (!string.IsNullOrWhiteSpace(dig3))
                {
                    dig3 = string.Format("{0} {1}", dig3, GetSections(item.Key));
                }
                english = dig3 + english;
            }
            return english;
        }
        private static string Process3Digit(string digit3)
        {
            string result = string.Empty;
            if (Convert.ToInt32(digit3) != 0)
            {
                int place = 0;
                Stack<string> monetaryValue = new Stack<string>();
                for (int i = digit3.Length - 1; i >= 0; i--)
                {
                    place += 1;
                    string stringValue = string.Empty;
                    switch (place)
                    {
                        case 1:
                            stringValue = GetOnes(digit3[i].ToString());
                            break;
                        case 2:
                            int tens = Convert.ToInt32(digit3[i]);
                            if (tens == 1)
                            {
                                if (monetaryValue.Count > 0)
                                {
                                    monetaryValue.Pop();
                                }
                                stringValue = GetTens((digit3[i].ToString() + digit3[i + 1].ToString()));
                            }
                            else
                            {
                                stringValue = GetTens(digit3[i].ToString());
                            }
                            break;
                        case 3:
                            stringValue = GetOnes(digit3[i].ToString());
                            if (!string.IsNullOrWhiteSpace(stringValue))
                            {
                                string postFixWith = " Hundred";
                                if (monetaryValue.Count > 0)
                                {
                                    postFixWith = postFixWith + " And";
                                }
                                stringValue += postFixWith;
                            }
                            break;
                    }
                    if (!string.IsNullOrWhiteSpace(stringValue))
                        monetaryValue.Push(stringValue);
                }
                while (monetaryValue.Count > 0)
                {
                    result += " " + monetaryValue.Pop().ToString().Trim();
                }
            }
            return result;
        }
        private static Dictionary<int, string> Get3DigitList(string monetaryValueInNumberic)
        {
            Dictionary<int, string> hundredsStack = new Dictionary<int, string>();
            int counter = 0;
            while (monetaryValueInNumberic.Length >= 3)
            {
                string digit3 = monetaryValueInNumberic.Substring(monetaryValueInNumberic.Length - 3, 3);
                monetaryValueInNumberic = monetaryValueInNumberic.Substring(0, monetaryValueInNumberic.Length - 3);
                hundredsStack.Add(++counter, digit3);
            }
            if (monetaryValueInNumberic.Length != 0)
                hundredsStack.Add(++counter, monetaryValueInNumberic);
            return hundredsStack;
        }
        private static string GetTens(string tensPlaceValue)
        {
            string englishEquvalent = string.Empty;
            int value = Convert.ToInt32(tensPlaceValue);
            Dictionary<int, string> tens = new Dictionary<int, string>();
            tens.Add(2, "Twenty");
            tens.Add(3, "Thirty");
            tens.Add(4, "Forty");
            tens.Add(5, "Fifty");
            tens.Add(6, "Sixty");
            tens.Add(7, "Seventy");
            tens.Add(8, "Eighty");
            tens.Add(9, "Ninty");
            tens.Add(10, "Ten");
            tens.Add(11, "Eleven");
            tens.Add(12, "Twelve");
            tens.Add(13, "Thrteen");
            tens.Add(14, "Fourteen");
            tens.Add(15, "Fifteen");
            tens.Add(16, "Sixteen");
            tens.Add(17, "Seventeen");
            tens.Add(18, "Eighteen");
            tens.Add(19, "Ninteen");
            if (tens.ContainsKey(value))
            {
                englishEquvalent = tens[value];
            }

            return englishEquvalent;

        }
        private static string GetOnes(string onesPlaceValue)
        {
            int value = Convert.ToInt32(onesPlaceValue);
            string englishEquvalent = string.Empty;
            Dictionary<int, string> ones = new Dictionary<int, string>();
            ones.Add(1, " One");
            ones.Add(2, " Two");
            ones.Add(3, " Three");
            ones.Add(4, " Four");
            ones.Add(5, " Five");
            ones.Add(6, " Six");
            ones.Add(7, " Seven");
            ones.Add(8, " Eight");
            ones.Add(9, " Nine");

            if (ones.ContainsKey(value))
            {
                englishEquvalent = ones[value];
            }

            return englishEquvalent;
        }
        private static string GetSections(int section)
        {
            string sectionName = string.Empty;
            switch (section)
            {
                case 0:
                    sectionName = "Cents";
                    break;
                case 1:
                    sectionName = "Dollars";
                    break;
                case 2:
                    sectionName = "Thousand";
                    break;
                case 3:
                    sectionName = "Million";
                    break;
                case 4:
                    sectionName = "Billion";
                    break;
                case 5:
                    sectionName = "Trillion";
                    break;
                case 6:
                    sectionName = "Zillion";
                    break;
            }
            return sectionName;
        }
        private static bool ValidateInput(string input)
        {
            return Regex.IsMatch(input, "[0-9]{1,18}(\\.[0-9]{1,2})?"))
        }
    }
} 
```

# javascript - 如何让浏览器看到 CSS 和 Javascript 更改？

> ID：3224
> 
> 赞同：63
> 
> 时间：2008-08-06T09:38:15.417
> 
> 标签：javascript, css, http, caching

CSS 和 Javascript 文件不会经常更改，因此我希望它们被 Web 浏览器缓存。但我也希望 Web 浏览器能够查看对这些文件所做的更改，而无需用户清除浏览器缓存。还需要一个与 Subversion 等版本控制系统配合良好的解决方案。

* * *

> 我见过的一些解决方案涉及以查询字符串的形式在文件末尾添加版本号。
> 
> 可以使用 SVN 修订号为您自动执行此操作：[ASP.NET Display SVN Revision Number](https://stackoverflow.com/questions/2308/aspnet-display-svn-revision-number)

你能指定如何包含另一个文件的[修订](http://svnbook.red-bean.com/en/1.4/svn.advanced.props.special.keywords.html)变量吗？那就是在 HTML 文件中，我可以在 CSS 或 Javascript 文件的 URL 中包含修订号。

在[Subversion 书中](http://svnbook.red-bean.com)，它谈到了修订：“此关键字描述了该文件在存储库中更改的最后一个已知修订”。

> Firefox 还允许按`CTRL`+`R`重新加载特定页面上的所有内容。

为了澄清，我正在寻找不需要用户做任何事情的解决方案。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-08-06T09:41:02.353

我发现如果您将文件的最后修改时间戳附加到 URL 的末尾，浏览器将在修改文件时请求文件。例如在 PHP 中：

```
function urlmtime($url) {
   $parsed_url = parse_url($url);
   $path = $parsed_url['path'];

   if ($path[0] == "/") {
       $filename = $_SERVER['DOCUMENT_ROOT'] . "/" . $path;
   } else {
       $filename = $path;
   }

   if (!file_exists($filename)) {
       // If not a file then use the current time
       $lastModified = date('YmdHis');
   } else {
       $lastModified = date('YmdHis', filemtime($filename));
   }

   if (strpos($url, '?') === false) {
       $url .= '?ts=' . $lastModified;
   } else {
       $url .= '&ts=' . $lastModified;
   }

   return $url;
}

function include_css($css_url, $media='all') {
   // According to Yahoo, using link allows for progressive 
   // rendering in IE where as @import url($css_url) does not
   echo '<link rel="stylesheet" type="text/css" media="' .
        $media . '" href="' . urlmtime($css_url) . '">'."\n";
}

function include_javascript($javascript_url) {
   echo '<script type="text/javascript" src="' . urlmtime($javascript_url) .
        '"></script>'."\n";
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-08-06T09:52:01.347

我见过的一些解决方案涉及以查询字符串的形式在文件末尾添加版本号。

```
<script type="text/javascript" src="funkycode.js?v1"> 
```

您可以使用 SVN 修订号来自动执行此操作[，](https://stackoverflow.com/questions/2308/aspnet-display-svn-revision-number)方法是在您的 html 文件中的 v1 出现在上面的位置之后包含单词**LastChangedRevision 。**您还必须设置您的存储库来执行此操作。

我希望这进一步澄清了我的答案？

Firefox 还允许按`CTRL`+`R`重新加载特定页面上的所有内容。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-08-06T21:33:14.473

在我看来，最好将版本号作为文件本身的一部分，例如`myscript.1.2.3.js`. 您可以将您的网络服务器设置为永久缓存此文件，并在您有新版本时添加一个新的 js 文件。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-08-09T14:37:46.130

当您发布新版本的 CSS 或 JS 库时，会导致以下情况发生：

1.  修改文件名以包含唯一的版本字符串
2.  修改引用库的 HTML 文件以指向版本化文件

（对于发布脚本来说，这通常是一件非常简单的事情）

现在您可以将 CSS/JS 的 Expires 设置为未来几年。每当您更改内容时，如果引用 HTML 指向新的 URI，浏览器将不再使用旧的缓存副本。

这会导致您想要的缓存行为，而不需要用户的任何内容。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-13T16:54:51.573

当我找到格罗姆的答案时，我也想知道如何做到这一点。感谢您的代码。

我很难理解代码应该如何使用。（我不使用版本控制系统。）总而言之，您在调用样式表时包含时间戳 (ts)。您不打算经常更改样式表：

```
<?php 
    include ('grom_file.php');
    // timestamp on the filename has to be updated manually
    include_css('_stylesheets/style.css?ts=20080912162813', 'all');
?> 
```

# c++ - 你如何打包一个 Visual Studio C++ 项目来发布？

> ID：3230
> 
> 赞同：38
> 
> 时间：2008-08-06T09:49:27.467
> 
> 标签：c++, visual-studio

我想知道如何制作一个包含所有必要 dll 文件到 .exe 的发布版本，这样程序就可以在非开发机器上运行，而不必在目标机器上安装微软可再发行组件。

如果不这样做，您将收到应用程序配置不正确的错误消息并重新安装。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-08-13T18:10:34.870

1.  选择项目 -> 属性
2.  选择配置 -> 常规
3.  在应如何链接 MFC 的框中，选择静态链接它。
4.  选择链接器 -> 输入。在**Additional Dependencies**下，添加您需要应用静态链接的任何库。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-08-07T21:11:52.817

您需要将所有项目的运行时库（在 C/C++ -> 代码生成下）设置为静态链接，这与以下默认构建配置相关：

*   多线程调试/发布
*   单线程调试/发布

与这些库的“DLL”版本相反。

即使您这样做，根据您使用的库，您可能必须安装合并模块/框架/等。这取决于您的依赖项的静态 LIB 版本是否可用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-09T11:41:09.910

Be aware that [Microsoft do not recommend that you static link the runtime into your project](http://blogs.msdn.com/martynl/archive/2005/10/13/480880.aspx), as this prevents it from being serviced by windows update to fix critical security bugs. There are also potential problems if you are passing memory between your main .exe and .dll files as if each of these static links the runtime you can end up with malloc/free mismatch problems.

You can include the DLLs with the executable, without compiling them into the .exe and without running the redist tool - this is what I do and it seems to work fine.

The only fly in the ointment is that you need to include the files twice if you're distributing for a wide range of Windows versions - newer OSs need the files in manifest-defined directories, and older ones want all the files in the program directory.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-06T12:10:55.920

你会寻找静态链接（而不是动态链接）

我不确定有多少 MS 可再发行组件静态链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-07T06:40:28.177

如果您想找出您的目标机器缺少哪个 dll，请使用 MSDev 附带的depends.exe，但也可以在[此处](http://dependencywalker.com/)找到。在几台目标机器上进行测试应该会告诉您需要将哪些 dll 打包到您的应用程序中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-05T19:29:23.967

You should use a static link and add all libraries you need under additional dependencies.

# c++ - 用于从 USB MIDI 设备读取 MIDI 信号的 C/C++ 库

> ID：3231
> 
> 赞同：29
> 
> 时间：2008-08-06T09:51:06.153
> 
> 标签：c++, c, midi, signal-processing

我想编写从 MIDI 设备获取输入的 C/C++ 程序。

MIDI 设备使用 USB 连接器连接到我的 PC。

我正在寻找一个（C/C++ 实现的）库，我可以使用它通过 USB 端口从 MIDI 设备读取 MIDI 信号。

我很乐意在获得 MIDI 数据后对其进行操作，我只是不想实现捕获它的代码。

我打算在 Windows XP 上使用 Bloodshed Dev-C++ IDE 编写我的代码。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-09T04:11:32.773

[PortMidi](http://portmedia.sourceforge.net/portmidi/)是另一个值得一试的开源跨平台 MIDI I/O 库。另一方面，如果您正在开发 sysex 类型的应用程序，那么直接 Win32 可以轻松运行。

刚刚遇到另一个包含 MIDI 支持的开源跨平台框架：[Juce](http://www.rawmaterialsoftware.com/juce/)。

另外，我应该注意到 USB 连接的 MIDI 设备并没有什么特别之处。它在 Windows 中仍将显示为 MIDI 设备，您将使用标准 MIDI API（mmsystem）与其通信。

[2014 年 7 月] 我刚刚遇到[RtMidi](http://www.music.mcgill.ca/~gary/rtmidi/)，它看起来是一个不错的、紧凑的、开源的跨平台 C++ 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-06T17:39:02.980

查看开源项目[LMMS](http://lmms.sourceforge.net/)。这是一个适用于 Linux 的音乐工作室，包括将 MIDI 键盘与软件乐器一起使用的能力。[如果您在名称中带有“midi”的源文件](http://lmms.sourceforge.net/wiki/index.php?title=Accessing_SVN)中四处寻找，您可能会找到您要查找的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-27T07:37:36.547

也许[杰克](http://jackaudio.org/)源代码也可能有所帮助。它是适用于 Posix 兼容系统的声音驱动程序，具有多种可能性，并支持 USB 和 Firewire 音频设备。

# c# - 从 Respose.WriteFile()/Response.ContentType 显示广告内容

> ID：3234
> 
> 赞同：19
> 
> 时间：2008-08-06T09:52:36.603
> 
> 标签：c#

如何从“动态”aspx 页面显示任何添加内容？目前，我正在使用 System.Web.HttpResponse“Page.Response”将存储在 Web 服务器上的文件写入 Web 请求。

这将允许人们点击[http://www.foo.com?Image=test.jpg](http://www.foo.com?Image=test.jpg)类型的 url并在他们的浏览器中显示图像。因此，您可能知道这围绕着 Response.ContentType 的使用展开。

通过使用

```
Response.ContentType = "application/octet-stream"; 
```

我能够显示 gif/jpeg/png 类型的图像（到目前为止我测试过的所有图像），试图显示 .swf 或 .ico 文件的尝试给了我一个不错的小错误。

使用

```
Response.ContentType = "application/x-shockwave-flash"; 
```

我可以播放 Flash 文件，但是图像混乱了。

那么如何**轻松**选择内容类型呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-08-18T12:10:43.100

这很难看，但最好的方法是查看文件并根据需要设置内容类型：

```
switch ( fileExtension )
{
    case "pdf": Response.ContentType = "application/pdf"; break; 
    case "swf": Response.ContentType = "application/x-shockwave-flash"; break; 

    case "gif": Response.ContentType = "image/gif"; break; 
    case "jpeg": Response.ContentType = "image/jpg"; break; 
    case "jpg": Response.ContentType = "image/jpg"; break; 
    case "png": Response.ContentType = "image/png"; break; 

    case "mp4": Response.ContentType = "video/mp4"; break; 
    case "mpeg": Response.ContentType = "video/mpeg"; break; 
    case "mov": Response.ContentType = "video/quicktime"; break; 
    case "wmv":
    case "avi": Response.ContentType = "video/x-ms-wmv"; break; 

    //and so on          

    default: Response.ContentType = "application/octet-stream"; break; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-06T09:59:38.633

这是我在本地 Intranet 上使用的解决方案的一部分。当我从数据库中提取它们时，您必须自己收集一些变量，但您可以从其他地方提取它们。

唯一的额外但我有一个名为**getMimeType**的函数，它连接到数据库并根据文件扩展名拉回正确的地雷类型。如果找不到，则默认为 application/octet-stream。

```
// Clear the response buffer incase there is anything already in it.
Response.Clear();
Response.Buffer = true;

// Read the original file from disk
FileStream myFileStream = new FileStream(sPath, FileMode.Open);
long FileSize = myFileStream.Length;
byte[] Buffer = new byte[(int)FileSize];
myFileStream.Read(Buffer, 0, (int)FileSize);
myFileStream.Close();

// Tell the browse stuff about the file
Response.AddHeader("Content-Length", FileSize.ToString());
Response.AddHeader("Content-Disposition", "inline; filename=" + sFilename.Replace(" ","_"));
Response.ContentType = getMimeType(sExtention, oConnection);

// Send the data to the browser
Response.BinaryWrite(Buffer);
Response.End(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-20T05:42:47.130

[是的，基思](https://stackoverflow.com/users/905/keith)丑陋但真实。我最终将我们将使用的 MIME 类型放入数据库中，然后在发布文件时将它们取出。我仍然无法相信那里没有自动的类型列表，或者没有提及 MSDN 中可用的内容。

我发现[这个](https://web.archive.org/web/20080913141333/http://www.utoronto.ca/webdocs/HTMLdocs/Book/Book-3ed/appb/mimetype.html)网站提供了一些帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-25T19:47:36.700

由于.Net 4.5 可以使用

```
MimeMapping.GetMimeMapping 
```

它返回指定文件名的 MIME 映射。

[https://docs.microsoft.com/en-us/dotnet/api/system.web.mimemapping.getmimemapping](https://docs.microsoft.com/en-us/dotnet/api/system.web.mimemapping.getmimemapping)

# algorithm - Big O，您如何计算/近似它？

> ID：3255
> 
> 赞同：939
> 
> 时间：2008-08-06T10:18:16.067
> 
> 标签：algorithm, optimization, complexity-theory, big-o, performance

大多数拥有 CS 学位的人肯定知道[Big O 代表](http://www.nist.gov/dads/HTML/bigOnotation.html)什么。它可以帮助我们衡量算法的可扩展性。

但我很好奇，你如何*计算*或近似算法的复杂性？

* * *

## 回答 #1

> 赞同：1526
> 
> 时间：2011-01-31T15:33:54.120

我将尽我所能在这里用简单的术语来解释它，但请注意，这个主题需要我的学生几个月才能最终掌握。[您可以在 Java 中的数据结构和算法](https://rads.stackoverflow.com/amzn/click/com/0321370139)一书的第 2 章中找到更多信息。

* * *

没有可用于获得 BigOh 的[机械程序。](http://en.wikipedia.org/wiki/Halting_problem)

作为一本“食谱”，要从一段代码中获取[BigOh](http://en.wikipedia.org/wiki/Big_Oh_notation)，您首先需要意识到您正在创建一个数学公式来计算在给定一定大小的输入的情况下执行了多少计算步骤。

目的很简单：从理论角度比较算法，无需执行代码。步数越少，算法越快。

例如，假设您有这段代码：

```
int sum(int* data, int N) {
    int result = 0;               // 1

    for (int i = 0; i < N; i++) { // 2
        result += data[i];        // 3
    }

    return result;                // 4
} 
```

该函数返回数组所有元素的总和，我们想创建一个公式来计算该函数的[计算复杂度](http://en.wikipedia.org/wiki/Computational_complexity_theory)：

```
Number_Of_Steps = f(N) 
```

所以我们有`f(N)`一个计算计算步数的函数。函数的输入是要处理的结构的大小。这意味着调用此函数，例如：

```
Number_Of_Steps = f(data.length) 
```

参数`N`取值`data.length`。现在我们需要函数的实际定义`f()`。这是从源代码完成的，其中每个有趣的行都从 1 到 4 编号。

有很多方法可以计算 BigOh。从这一点开始，我们将假设每个不依赖于输入数据大小的句子都采用恒定`C`数量的计算步骤。

我们将添加函数的单独步数，并且局部变量声明和返回语句都不依赖于`data`数组的大小。

这意味着第 1 行和第 4 行各需要 C 步，函数有点像这样：

```
f(N) = C + ??? + C 
```

下一部分是定义`for`语句的值。请记住，我们正在计算计算步骤的数量，这意味着`for`语句的主体得到执行`N`次数。这与添加`C`,`N`次相同：

```
f(N) = C + (C + C + ... + C) + C = C + N * C + C 
```

没有机械规则来计算`for`执行主体的次数，您需要通过查看代码的作用来计算它。为了简化计算，我们忽略了`for`语句的变量初始化、条件和增量部分。

为了得到实际的 BigOh，我们需要对函数进行[渐近分析](http://en.wikipedia.org/wiki/Asymptotic_analysis)。大致是这样完成的：

1.  带走所有的常数`C`。
2.  从`f()`得到它的[多项式](http://en.wikipedia.org/wiki/Polynomial)`standard form`。
3.  将多项式的各项除以增长率并对其进行排序。
4.  `N`留着靠近时变大的那一个`infinity`。

我们`f()`有两个术语：

```
f(N) = 2 * C * N ^ 0 + 1 * C * N ^ 1 
```

去掉所有`C`常量和冗余部分：

```
f(N) = 1 + N ^ 1 
```

由于最后一项是在`f()`接近无穷大时变大的项（考虑[限制](http://en.wikipedia.org/wiki/Limit_%28mathematics%29)），这是 BigOh 参数，并且该`sum()`函数的 BigOh 为：

```
O(N) 
```

* * *

有一些技巧可以解决一些棘手的问题：尽可能使用[求和](http://en.wikipedia.org/wiki/Summation)。

例如，可以使用求和轻松解决此代码：

```
for (i = 0; i < 2*n; i += 2) {  // 1
    for (j=n; j > i; j--) {     // 2
        foo();                  // 3
    }
} 
```

您需要被问到的第一件事是执行的顺序`foo()`。虽然通常是这样`O(1)`，但您需要询问您的教授。`O(1)`表示（几乎，大部分）常量`C`，与大小无关`N`。

第`for`一个句子的陈述很棘手。当索引以 结束时`2 * N`，增量是 2。这意味着第一个`for`只执行`N`步骤，我们需要将计数除以二。

```
f(N) = Summation(i from 1 to 2 * N / 2)( ... ) = 
     = Summation(i from 1 to N)( ... ) 
```

*第二*句更加棘手，因为它取决于 的值`i`。看一下：索引 i 取值：0、2、4、6、8、...、2 * N，然后`for`执行第二个：N 次第一个，N - 2 第二个，N - 4第三个......直到 N / 2 阶段，第二个`for`永远不会被执行。

在公式上，这意味着：

```
f(N) = Summation(i from 1 to N)( Summation(j = ???)(  ) ) 
```

同样，我们正在计算**步数**。根据定义，每个求和应该始终从 1 开始，并以大于或等于 1 的数字结束。

```
f(N) = Summation(i from 1 to N)( Summation(j = 1 to (N - (i - 1) * 2)( C ) ) 
```

（我们假设这`foo()`是`O(1)`并采取了`C`措施。）

我们这里有一个问题：当`i`取值`N / 2 + 1`向上时，内部求和以负数结束！这是不可能的，也是错误的。`i`我们需要将总和分成两部分，这是关键时刻`N / 2 + 1`。

```
f(N) = Summation(i from 1 to N / 2)( Summation(j = 1 to (N - (i - 1) * 2)) * ( C ) ) + Summation(i from 1 to N / 2) * ( C ) 
```

自关键时刻以来`i > N / 2`，内部`for`不会被执行，我们假设其主体上的 C 执行复杂度恒定。

现在可以使用一些恒等规则来简化求和：

1.  求和（w 从 1 到 N）( C ) = N * C
2.  求和(w 从 1 到 N)( A (+/-) B ) = 求和(w 从 1 到 N)( A ) (+/-) 求和(w 从 1 到 N)( B )
3.  Summation(w from 1 to N)( w * C ) = C * Summation(w from 1 to N)( w ) (C 是一个常数，独立于`w`)
4.  求和（w 从 1 到 N）( w ) = (N * (N + 1)) / 2

应用一些代数：

```
f(N) = Summation(i from 1 to N / 2)( (N - (i - 1) * 2) * ( C ) ) + (N / 2)( C )

f(N) = C * Summation(i from 1 to N / 2)( (N - (i - 1) * 2)) + (N / 2)( C )

f(N) = C * (Summation(i from 1 to N / 2)( N ) - Summation(i from 1 to N / 2)( (i - 1) * 2)) + (N / 2)( C )

f(N) = C * (( N ^ 2 / 2 ) - 2 * Summation(i from 1 to N / 2)( i - 1 )) + (N / 2)( C )

=> Summation(i from 1 to N / 2)( i - 1 ) = Summation(i from 1 to N / 2 - 1)( i )

f(N) = C * (( N ^ 2 / 2 ) - 2 * Summation(i from 1 to N / 2 - 1)( i )) + (N / 2)( C )

f(N) = C * (( N ^ 2 / 2 ) - 2 * ( (N / 2 - 1) * (N / 2 - 1 + 1) / 2) ) + (N / 2)( C )

=> (N / 2 - 1) * (N / 2 - 1 + 1) / 2 = 

   (N / 2 - 1) * (N / 2) / 2 = 

   ((N ^ 2 / 4) - (N / 2)) / 2 = 

   (N ^ 2 / 8) - (N / 4)

f(N) = C * (( N ^ 2 / 2 ) - 2 * ( (N ^ 2 / 8) - (N / 4) )) + (N / 2)( C )

f(N) = C * (( N ^ 2 / 2 ) - ( (N ^ 2 / 4) - (N / 2) )) + (N / 2)( C )

f(N) = C * (( N ^ 2 / 2 ) - (N ^ 2 / 4) + (N / 2)) + (N / 2)( C )

f(N) = C * ( N ^ 2 / 4 ) + C * (N / 2) + C * (N / 2)

f(N) = C * ( N ^ 2 / 4 ) + 2 * C * (N / 2)

f(N) = C * ( N ^ 2 / 4 ) + C * N

f(N) = C * 1/4 * N ^ 2 + C * N 
```

BigOh 是：

```
O(N²) 
```

* * *

## 回答 #2

> 赞同：209
> 
> 时间：2008-08-06T13:34:13.753

Big O 给出了算法时间复杂度的上限。它通常与处理数据集（列表）结合使用，但可以在其他地方使用。

几个如何在 C 代码中使用的示例。

假设我们有一个包含 n 个元素的数组

```
int array[n]; 
```

如果我们想访问数组的第一个元素，这将是 O(1)，因为无论数组有多大，获取第一个元素总是需要相同的常数时间。

```
x = array[0]; 
```

如果我们想在列表中找到一个数字：

```
for(int i = 0; i < n; i++){
    if(array[i] == numToFind){ return i; }
} 
```

这将是 O(n)，因为我们最多必须查看整个列表才能找到我们的号码。Big-O 仍然是 O(n)，即使我们可能会在第一次尝试中找到我们的数字并运行一次循环，因为 Big-O 描述了算法的上限（omega 表示下限，theta 表示紧界） .

当我们进入嵌套循环时：

```
for(int i = 0; i < n; i++){
    for(int j = i; j < n; j++){
        array[j] += 2;
    }
} 
```

这是 O(n^2)，因为对于外循环 ( O(n) ) 的每次传递，我们必须再次遍历整个列表，因此 n 的乘法使我们得到 n 的平方。

这几乎没有触及表面，但是当您开始分析更复杂的算法时，涉及证明的复杂数学就会发挥作用。希望这至少能让您熟悉基础知识。

* * *

## 回答 #3

> 赞同：108
> 
> 时间：2008-09-05T19:09:48.837

虽然知道如何计算特定问题的大 O 时间很有用，但了解一些一般情况可以大大帮助您在算法中做出决策。

以下是一些最常见的案例，摘自[http://en.wikipedia.org/wiki/Big_O_notation#Orders_of_common_functions](http://en.wikipedia.org/wiki/Big_O_notation#Orders_of_common_functions)：

O(1) - 判断一个数是偶数还是奇数；使用固定大小的查找表或哈希表

O(logn) - 使用二分搜索在有序数组中查找项目

O(n) - 在未排序的列表中查找项目；将两个 n 位数字相加

O(n ² ) - 用一个简单的算法将两个 n 位数字相乘；添加两个 n×n 矩阵；冒泡排序或插入排序

O(n ³ ) - 通过简单算法将两个 n×n 矩阵相乘

O(c ^n ) - 使用动态规划找到旅行商问题的（精确）解；使用蛮力确定两个逻辑语句是否等价

O(n!) - 通过蛮力搜索解决旅行商问题

O(n ^n ) - 通常用来代替 O(n!) 来推导更简单的渐近复杂度公式

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2008-08-23T20:43:50.357

小提醒：该`big O`符号用于表示*渐近*复杂度（即当问题的大小增长到无穷大时），*它*隐藏了一个常数。

这意味着在 O(n) 中的算法和 O(n ² ) 中的算法之间，最快的并不总是第一个（尽管总是存在 n 的值，因此对于大小 >n 的问题，第一个算法是最快的）。

请注意，隐藏常量在很大程度上取决于实现！

此外，在某些情况下，运行时间不是输入*大小*n 的确定性函数。以使用快速排序为例：对包含 n 个元素的数组进行排序所需的时间不是一个常数，而是取决于数组的起始配置。

有不同的时间复杂度：

*   最坏的情况（通常最容易弄清楚，但并不总是很有意义）
*   平均情况（通常更难弄清楚......）

*   ...

一个很好的介绍是R. Sedgewick 和 P. Flajolet*的算法分析介绍。*

正如您所说，优化代码时确实应该始终使用`premature optimisation is the root of all evil`, 和（如果可能的话）*分析。*它甚至可以帮助您确定算法的复杂性。

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2008-08-07T08:10:04.780

*看到这里的答案，我想我们可以得出结论，我们大多数人确实确实通过查看*算法的顺序并使用常识而不是使用例如我们在大学时认为的[主方法来计算它。](http://en.wikipedia.org/wiki/Master_theorem)话虽如此，我必须补充一点，即使是教授也鼓励我们（后来）实际*考虑*它，而不仅仅是计算它。

另外我想补充一下它是如何为**递归函数**完成的：

假设我们有一个类似（[方案代码](http://plt-scheme.org/)）的函数：

```
(define (fac n)
    (if (= n 0)
        1
            (* n (fac (- n 1))))) 
```

它递归地计算给定数字的阶乘。

第一步是尝试确定*函数主体的性能特征，仅*在这种情况下，主体中没有做任何特别的事情，只是乘法（或返回值 1）。

所以**身体的表现是：O(1)**（常数）。

接下来尝试确定*递归调用的数量*。在这种情况下，我们有 n-1 个递归调用。

所以**递归调用的性能是：O(n-1)**（顺序是 n，因为我们扔掉了无关紧要的部分）。

然后把这两者放在一起，你就可以得到整个递归函数的性能：

**1 * (n-1) = O(n)**

* * *

[彼得](https://stackoverflow.com/users/1192/peter-holmdahl)，回答[您提出的问题；](https://stackoverflow.com/questions/3255/big-o-how-do-you-calculateapproximate-it#12001)我在这里描述的方法实际上处理得很好。但请记住，这仍然是一个*近似值*，而不是一个完整的数学正确答案。这里描述的方法也是我们在大学里教授的方法之一，如果我没记错的话，它用于比我在这个例子中使用的阶乘更高级的算法。
当然，这一切都取决于您对函数体的运行时间和递归调用次数的估计程度，但对于其他方法也是如此。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2011-01-31T13:30:15.113

如果您的成本是多项式，只需保留最高阶项，不要使用乘数。例如：

> O((n/2 + 1)*(n/2)) = O(n ² /4 + n/2) = O(n ² /4) = O(n ² )

请注意，这不适用于无限系列。一般情况没有单一的方法，但对于一些常见情况，以下不等式适用：

> O(log *N* ) < O( *N* ) < O( *N* log *N* ) < O( *N* ² ) < O( *N* ^k ) < O(e ^(*n*) ) < O( *n* !)

* * *

## 回答 #7

> 赞同：23
> 
> 时间：2009-03-10T13:24:13.873

我从信息的角度考虑。任何问题都包括学习一定数量的比特。

您的基本工具是决策点及其熵的概念。决策点的熵是它会给你的平均信息。例如，如果一个程序包含一个具有两个分支的决策点，则它的熵是每个分支的概率乘以该分支的逆概率的log [2的总和。]这就是你通过执行该决定学到的东西。

例如，`if`具有两个分支的语句，两者的可能性相同，其熵为 1/2 * log(2/1) + 1/2 * log(2/1) = 1/2 * 1 + 1/2 * 1 = 1\. 所以它的熵是 1 位。

假设您正在搜索包含 N 个项目的表，例如 N=1024。这是一个 10 位问题，因为 log(1024) = 10 位。因此，如果您可以使用具有同样可能结果的 IF 语句来搜索它，那么它应该做出 10 个决定。

这就是二进制搜索所得到的。

假设您正在进行线性搜索。您查看第一个元素并询问它是否是您想要的元素。它是的概率是 1/1024，不是的概率是 1023/1024。该决定的熵是 1/1024*log(1024/1) + 1023/1024 * log(1024/1023) = 1/1024 * 10 + 1023/1024 * 约 0 = 约 0.01 位。你学的太少了！第二个决定也好不了多少。这就是线性搜索如此缓慢的原因。事实上，你需要学习的位数是指数级的。

假设你正在做索引。假设表被预先排序到很多箱中，并且您使用键中的所有位中的一些位来直接索引表条目。如果有 1024 个 bin，对于所有 1024 个可能的结果，熵为 1/1024 * log(1024) + 1/1024 * log(1024) + ...。这是 1/1024 * 10 乘以 1024 个结果，或该索引操作的 10 位熵。这就是索引搜索速度快的原因。

现在考虑排序。你有 N 个项目，你有一个列表。对于每个项目，您必须搜索该项目在列表中的位置，然后将其添加到列表中。所以排序大约需要 N 倍于底层搜索的步数。

因此，基于具有大致相同可能性结果的二元决策的排序都需要 O(N log N) 步骤。如果基于索引搜索，则可以使用 O(N) 排序算法。

我发现几乎所有的算法性能问题都可以用这种方式来看待。

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2014-02-02T15:30:25.447

让我们从头开始。

首先，接受对数据的某些简单操作可以及时完成的​​原则，`O(1)`即与输入大小无关的时间。C 中的这些原始操作包括

1.  算术运算（例如 + 或 %）。
2.  逻辑运算（例如 &&）。
3.  比较操作（例如，<=）。
4.  结构访问操作（例如 A[i] 之类的数组索引，或带有 -> 运算符的指针）。
5.  简单的赋值，例如将值复制到变量中。
6.  调用库函数（例如，scanf、printf）。

这一原则的合理性需要对典型计算机的机器指令（原始步骤）进行详细研究。每个描述的操作都可以用少量的机器指令来完成；通常只需要一两条指令。因此，C 中的几种语句可以及时执行`O(1)`，即在与输入无关的某个恒定时间内执行。这些简单的包括

1.  在其表达式中不涉及函数调用的赋值语句。
2.  阅读声明。
3.  编写不需要函数调用来评估参数的语句。
4.  跳转语句 break、continue、goto 和 return 表达式，其中表达式不包含函数调用。

在 C 中，许多 for 循环是通过将索引变量初始化为某个值并在循环中每次将该变量递增 1 来形成的。当索引达到某个限制时，for 循环结束。例如，for循环

```
for (i = 0; i < n-1; i++) 
{
    small = i;
    for (j = i+1; j < n; j++)
        if (A[j] < A[small])
            small = j;
    temp = A[small];
    A[small] = A[i];
    A[i] = temp;
} 
```

使用索引变量 i。它在循环中每次将 i 递增 1，当 i 达到 n-1 时迭代停止。

但是，目前，关注简单形式的 for 循环，其中**最终值和初始值之间的差异除以索引变量的递增量告诉我们循环了多少次**。这个计数是准确的，除非有办法通过跳转语句退出循环；在任何情况下，它都是迭代次数的上限。

例如，for 循环迭代`((n − 1) − 0)/1 = n − 1 times`，因为 0 是 i 的初始值，n - 1 是 i 达到的最高值（即，当 i 达到 n-1 时，循环停止并且 i = n- 不发生迭代1)，并且在循环的每次迭代中将 1 添加到 i 中。

在最简单的情况下，每次迭代在循环体中花费的时间都是相同的，**我们可以将循环体的 big-oh 上限乘以循环的次数**。严格来说，我们必须**添加 O(1) 时间来初始化循环索引和 O(1) 时间来首次比较循环索引和 limit**，因为我们测试的时间比我们绕循环多一次。但是，除非可以执行循环零次，否则初始化循环和测试一次限制的时间是一个可以被求和规则删除的低阶项。

* * *

现在考虑这个例子：

```
(1) for (j = 0; j < n; j++)
(2)   A[i][j] = 0; 
```

我们知道**第 (1) 行**需要`O(1)`时间。显然，我们绕着循环 n 次，因为我们可以通过从第 (1) 行找到的上限中减去下限然后加 1 来确定。由于主体，第 (2) 行，需要 O(1) 时间，我们可以忽略增加 j 的时间以及比较 j 与 n 的时间，这两者也是 O(1)。因此，第 (1) 行和第 (2) 行的运行时间是**n 和 O(1) 的乘积**，即`O(n)`.

类似地，我们可以限定由第 (2) 到 (4) 行组成的外循环的运行时间，即

```
(2) for (i = 0; i < n; i++)
(3)     for (j = 0; j < n; j++)
(4)         A[i][j] = 0; 
```

我们已经确定第 (3) 行和第 (4) 行的循环需要 O(n) 时间。因此，我们可以忽略 O(1) 时间来增加 i 并在每次迭代中测试 i 是否 < n，得出外循环的每次迭代需要 O(n) 时间的结论。

外循环的初始化 i = 0 和条件 i < n 的第 (n + 1) 次测试同样需要 O(1) 时间，可以忽略。最后，我们观察到我们绕过外循环 n 次，每次迭代花费 O(n) 时间，给出总 `O(n^2)`运行时间。

* * *

一个更实际的例子。

![在此处输入图像描述](../Images/816b48342e02de2322e119d65e479569.png)

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2008-12-11T20:49:05.190

如果您想凭经验而不是通过分析代码来估计代码的顺序，您可以坚持一系列递增的 n 值和时间。在对数刻度上绘制你的时间。如果代码为 O(x^n)，则值应落在斜率为 n 的线上。

与仅仅研究代码相比，这有几个优点。一方面，您可以查看您是否处于运行时间接近其渐近顺序的范围内。此外，您可能会发现某些您认为是 O(x) 顺序的代码实际上是 O(x^2) 顺序，例如，因为花费在库调用上的时间。

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2008-08-14T15:35:50.200

基本上，90% 的时间出现的只是分析循环。你有单、双、三重嵌套循环吗？你有 O(n), O(n^2), O(n^3) 运行时间。

很少（除非您正在编写一个具有广泛基础库（例如，.NET BCL 或 C++ 的 STL）的平台）您会遇到比仅查看循环更困难的事情（for 语句、while、goto、 ETC...）

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2008-09-23T07:26:08.710

我认为一般来说不太有用，但为了完整起见，还有一个[Big Omega Ω](http://en.wikipedia.org/wiki/Big_O_notation#Family_of_Bachmann.E2.80.93Landau_notations)，它定义了算法复杂度的下限，还有一个[Big Theta Θ](http://en.wikipedia.org/wiki/Big_O_notation#Related_asymptotic_notations)，它定义了上限和下限。

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2008-08-08T13:53:20.930

大 O 表示法很有用，因为它易于使用并且隐藏了不必要的复杂性和细节（对于一些不必要的定义）。计算分治算法复杂性的一种好方法是树方法。假设您有一个带有中值过程的快速排序版本，因此您每次都将数组拆分为完全平衡的子数组。

现在构建一个与您使用的所有数组相对应的树。在根你有原始数组，根有两个子数组。重复此操作，直到底部有单个元素数组。

由于我们可以在 O(n) 时间内找到中位数并在 O(n) 时间内将数组分成两部分，因此在每个节点完成的工作是 O(k)，其中 k 是数组的大小。树的每一层（最多）包含整个数组，所以每层的工作量是 O(n)（子数组的大小加起来为 n，因为我们每层都有 O(k)，所以我们可以把它加起来） . 因为每次我们将输入减半时，树中只有 log(n) 个级别。

因此，我们可以通过 O(n*log(n)) 来限制工作量。

然而，Big O 隐藏了一些我们有时不能忽视的细节。考虑计算斐波那契数列

```
a=0;
b=1;
for (i = 0; i <n; i++) {
    tmp = b;
    b = a + b;
    a = tmp;
} 
```

让我们假设 a 和 b 是 Java 中的 BigIntegers 或可以处理任意大数字的东西。大多数人会说这是一个 O(n) 算法而不会退缩。原因是您在 for 循环中有 n 次迭代，并且 O(1) 在循环侧工作。

但是斐波那契数很大，第 n 个斐波那契数是 n 的指数，因此仅存储它就需要 n 个字节的顺序。用大整数执行加法将需要 O(n) 的工作量。所以在这个过程中完成的工作总量是

1 + 2 + 3 + ... + n = n(n-1)/2 = O(n^2)

所以这个算法运行在二次时间！

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2008-08-06T10:59:40.603

熟悉我使用的算法/数据结构和/或迭代嵌套的快速浏览分析。困难在于当您调用一个库函数时，可能会多次调用——您通常不确定您是否有时会不必要地调用该函数，或者它们正在使用什么实现。也许库函数应该有一个复杂性/效率度量，无论是 Big O 还是其他一些指标，都可以在文档甚至[IntelliSense](http://en.wikipedia.org/wiki/IntelliSense)中找到。

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2008-08-06T11:34:26.803

将算法分解成你知道大 O 表示法的部分，并通过大 O 运算符进行组合。这是我知道的唯一方法。

有关更多信息，请查看有关该主题的[Wikipedia 页面](http://en.wikipedia.org/wiki/Big_O_notation)。

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2009-03-10T15:02:13.297

至于“你如何计算”大 O，这是[计算复杂性理论](http://en.wikipedia.org/wiki/Computational_complexity_theory)的一部分。对于某些（许多）特殊情况，您可能可以使用一些简单的启发式方法（例如将嵌套循环的循环计数相乘），尤其是。当您想要的只是任何上限估计，并且您不介意它是否过于悲观时-我想这可能是您的问题所在。

如果你真的想回答任何算法的问题，你能做的最好的就是应用该理论。除了简单的“最坏情况”分析之外，我发现[摊销分析](http://en.wikipedia.org/wiki/Amortized_analysis)在实践中非常有用。

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2011-01-31T14:36:02.787

对于第一种情况，内部循环执行`n-i`次数，所以执行的总数是`i`从`0`到`n-1`（因为低于，不低于或等于）的总和`n-i`。你终于得到`n*(n + 1) / 2`了，所以`O(n²/2) = O(n²)`。

对于第二个循环，在外循环`i`之间`0`并`n`包含在外循环中；然后当`j`严格大于时执行内部循环`n`，这是不可能的。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2008-09-05T18:33:32.480

除了使用主方法（或其专长之一）之外，我还通过实验测试我的算法。这不能*证明*达到了任何特定的复杂度等级，但它可以保证数学分析是适当的。为了帮助确保这一点，我将代码覆盖工具与我的实验结合使用，以确保我正在练习所有案例。

作为一个非常简单的示例，假设您想对 .NET 框架的列表排序速度进行健全性检查。您可以编写如下内容，然后在 Excel 中分析结果以确保它们不超过 n*log(n) 曲线。

在此示例中，我测量了比较的次数，但检查每个样本量所需的实际时间也是谨慎的做法。但是，您必须更加小心，您只是在测量算法而不包括来自测试基础架构的工件。

```
int nCmp = 0;
System.Random rnd = new System.Random();

// measure the time required to sort a list of n integers
void DoTest(int n)
{
   List<int> lst = new List<int>(n);
   for( int i=0; i<n; i++ )
      lst[i] = rnd.Next(0,1000);

   // as we sort, keep track of the number of comparisons performed!
   nCmp = 0;
   lst.Sort( delegate( int a, int b ) { nCmp++; return (a<b)?-1:((a>b)?1:0)); }

   System.Console.Writeline( "{0},{1}", n, nCmp );
}

// Perform measurement for a variety of sample sizes.
// It would be prudent to check multiple random samples of each size, but this is OK for a quick sanity check
for( int n = 0; n<1000; n++ )
   DoTest(n); 
```

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2008-10-14T20:16:38.760

不要忘记考虑空间复杂性，如果内存资源有限，这也可能引起关注。因此，例如，您可能会听到有人想要一个恒定空间算法，这基本上是一种说法，即算法占用的空间量不取决于代码中的任何因素。

有时复杂性可能来自调用的次数，循环执行的频率，内存分配的频率等等是回答这个问题的另一部分。

最后，大 O 可用于最坏情况、最佳情况和摊销情况，通常它是用于描述算法可能有多糟糕的最坏情况。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2009-03-10T14:30:13.263

经常被忽视的是算法的*预期*行为。**它不会改变算法的大 O**，但它确实与“过早优化......”的陈述有关

你的算法的预期行为是 - 非常愚蠢 - 你可以期望你的算法以多快的速度处理你最有可能看到的数据。

例如，如果你在一个列表中搜索一个值，它是 O(n)，但是如果你知道你看到的大多数列表都有你的值，那么你的算法的典型行为会更快。

要真正确定它，您需要能够描述“输入空间”的概率分布（如果您需要对列表进行排序，该列表多久会被排序一次？它多久完全颠倒一次？如何通常它主要是排序的吗？）你知道这一点并不总是可行的，但有时你会这样做。

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2016-08-20T04:57:30.437

好问题！

**免责声明：此答案包含虚假陈述，请参阅下面的评论。**

如果您使用的是 Big O，那么您正在谈论更坏的情况（稍后会详细说明这意味着什么）。此外，一般情况下有大写 theta，最佳情况下有大 omega。

查看此站点以获得 Big O 的可爱正式定义：[https ://xlinux.nist.gov/dads/HTML/bigOnotation.html](https://xlinux.nist.gov/dads/HTML/bigOnotation.html)

> f(n) = O(g(n)) 表示存在正常数 c 和 k，因此对于所有 n ≥ k，0 ≤ f(n) ≤ cg(n)。对于函数 f，c 和 k 的值必须是固定的，并且不能依赖于 n。

* * *

好的，那么现在我们所说的“最佳情况”和“最坏情况”复杂性是什么意思？

这可能通过例子最清楚地说明。例如，如果我们使用线性搜索在已排序的数组中查找数字，那么**最坏的情况**是当我们决定**搜索数组的最后一个元素**时，因为这需要与数组中的项目一样多的步骤。**最好**的情况是当我们搜索第**一个元素**时，因为我们将在第一次检查之后完成。

所有这些*形容词*案例复杂性的关键在于，我们正在寻找一种方法来根据特定变量的大小绘制一个假设程序运行到完成的时间量。但是，对于许多算法，您可以争辩说对于特定大小的输入没有单一的时间。请注意，这与函数的基本要求相矛盾，任何输入都不应超过一个输出。因此，我们提出了*多个*函数来描述算法的复杂性。现在，即使搜索大小为 n 的数组可能会花费不同的时间，具体取决于您在数组中查找的内容并与 n 成比例，我们可以使用最佳情况、平均情况创建算法的信息描述和最坏情况类。

抱歉，这篇文章写得太差了，而且缺乏很多技术信息。但希望它能让时间复杂度类更容易思考。一旦您对这些感到满意，就可以轻松解析程序并查找依赖于数组大小的 for 循环之类的内容，并根据您的数据结构进行推理在最坏的情况下。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2019-02-20T10:44:36.433

我想从不同的角度解释 Big-O。

Big-O 只是为了比较程序的复杂性，这意味着当输入增加时它们的增长速度，而不是执行操作所花费的确切时间。

恕我直言，在大 O 公式中，您最好不要使用更复杂的方程式（您可能只使用下图中的方程式。）但是您仍然可以使用其他更精确的公式（如 3^n、n^3、.. .) 但不仅如此，有时还会产生误导！所以最好让它尽可能简单。

[![在此处输入图像描述](../Images/1335c15e53a8ecb394b45682aeab9241.png)](https://i.stack.imgur.com/ZEmZ6.png)

我想再次强调，在这里我们不想为我们的算法得到一个精确的公式。我们只想展示当输入增长时它是如何增长的，并在这个意义上与其他算法进行比较。否则，您最好使用不同的方法，例如基准测试。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2011-01-31T20:07:35.107

对于代码A，外循环将执行`n+1`多次，'1'时间表示检查我是否仍然满足要求的过程。内部循环运行`n`时间，`n-2`时间.... 因此，`0+2+..+(n-2)+n= (0+n)(n+1)/2= O(n²)`.

对于代码B，虽然内循环不会介入并执行foo()，但内循环将执行n次取决于外循环执行时间，即O(n)

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2013-05-11T01:32:45.333

我不知道如何以编程方式解决这个问题，但人们做的第一件事是我们在完成的操作数量中对某些模式的算法进行采样，比如 4n^2 + 2n + 1 我们有 2 条规则：

1.  如果我们有一项总和，则保留增长率最大的项，而省略其他项。

2.  如果我们有几个因素的乘积，则省略常数因素。

如果我们简化 f(x)，其中 f(x) 是完成操作数的公式，（上面解释过 4n^2 + 2n + 1），我们在此得到大 O 值 [O(n^2)案子]。但这必须考虑程序中的拉格朗日插值，这可能难以实现。如果真正的大 O 值是 O(2^n)，我们可能有类似 O(x^n) 的东西，那么这个算法可能不可编程。但是，如果有人证明我错了，请给我代码。. . .

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2021-07-02T10:51:35.063

首先，公认的答案是试图解释漂亮的花哨的东西，
但我认为，*故意*使 Big-Oh 复杂化并不是
程序员（或至少像我这样的人）寻找的解决方案。

## 大哦（简而言之）

```
function f(text) {
  var n = text.length;
  for (var i = 0; i < n; i++) {
    f(string.slice(0, n-1))
  }
  // ... other JS logic here, which we can ignore ...
} 
```

上面的大哦是 f(n) = **O(n!)**其中**n**代表`number`输入集中的项目，**f**代表`operation`每个项目完成。

* * *

Big-Oh 表示法是算法复杂度的渐近上限。
在编程中：对于输入的大小，假定的最坏情况所用的时间，
或假定的最大逻辑重复次数。

## 计算

请记住（从上面的意思）；我们只需要受**N**（输入大小）影响的**最坏情况时间**和/或**最大重复计数**， 然后再看一下（接受的答案）示例：

 **```
for (i = 0; i < 2*n; i += 2) {  // line 123
    for (j=n; j > i; j--) {     // line 124
        foo();                  // line 125
    }
} 
```

1.  从这个搜索模式开始：

    *   找到**N**导致重复行为的第一行，
    *   或者导致执行的逻辑增加，
    *   但无论是否持续，忽略该行之前的任何内容。
2.  似乎第 123 行是我们正在搜索的内容；-)

    *   乍一看，线似乎有`2*n`最大循环。
    *   但是再看一遍，我们看到了`i += 2`（那一半被跳过了）。
    *   所以， max repeat 只是**n**，把它写下来，就像`f(n) = O( n` 但不要关闭括号。
3.  重复搜索直到方法结束，找到与我们的搜索模式匹配的下一行，这里是第 124 行

    *   这很棘手，因为奇怪的条件和反向循环。
    *   但是在记住我们只需要考虑最大重复次数（或最坏情况下所花费的时间）之后。
    *   就像说“反向循环`j`以 开头`j=n`，对吗？是的，**n**似乎是最大可能的重复次数”一样简单，所以，添加`n`到先前写下的结尾，但是像“ `( n` ”（而不是`+ n`，因为这是在先前的循环）和右括号，只有当我们发现前一个循环之外的东西时。

搜索完成！为什么？因为第 125 行（或任何其他行）与我们的搜索模式不匹配。
我们现在可以关闭任何括号（在我们的记录中左开），结果如下：

```
f(n) = O( n( n ) ) 
```

尝试进一步缩短 " `n( n )`" 部分，例如：

*   **n( n ) = n * n**
*   **= n ²**
*   最后，只需用 Big Oh 符号包装它，如**O(n ² )**或 O(n^2) 而不进行格式化。**

# algorithm - 测量信号的峰值检测

> ID：3260
> 
> 赞同：59
> 
> 时间：2008-08-06T10:23:18.833
> 
> 标签：algorithm, language-agnostic

我们使用数据采集卡从设备中获取读数，该设备将信号增加到峰值，然后回落到原始值附近。为了找到峰值，我们目前在数组中搜索最高读数，并使用索引来确定我们计算中使用的峰值时间。

如果最大值是我们正在寻找的峰值，则此方法效果很好，但如果设备无法正常工作，我们可以看到第二个峰值，该峰值可能高于初始峰值。我们在 90 秒的时间内从 16 个设备中每秒读取 10 个读数。

我最初的想法是循环检查读数以查看前一个点和下一个点是否小于当前点以找到一个峰值并构建一个峰值数组。也许我们应该查看当前位置两侧的多个点的平均值，以考虑系统中的噪声。这是最好的方法还是有更好的技术？

* * *

我们确实使用 LabVIEW，我查看了[LAVA 论坛](http://forums.lavag.org/Peak-Detection-t8499.html)，有很多有趣的例子。这是我们测试软件的一部分，我们正在努力避免使用过多的非标准 VI 库，因此我希望获得有关所涉及的流程/算法而不是特定代码的反馈。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2008-09-04T18:07:31.570

有很多很多经典的峰值检测方法，其中任何一种都可能有效。您必须特别了解限制数据质量的因素。以下是基本说明：

1.  在数据中的任意两点之间，`(x(0), y(0))`和`(x(n), y(n))`相加并称之为（“旅行”）并将（“上升”）设置`y(i + 1) - y(i)`为适当的小。 表示一个峰值。如果不太可能由于噪声导致大行程或噪声围绕基本曲线形状对称分布，则此方法可以正常工作。对于您的应用，接受分数高于给定阈值的最早峰值，或分析每次上升的行程曲线值以获得更多有趣的属性。`0 <= i < n``T``R``y(n) - y(0) + k``k``T/R > 1`

2.  使用匹配过滤器对与标准峰形的相似度进行评分（本质上，使用针对某个形状的归一化点积来获得相似度的余弦度量）

3.  根据标准峰形去卷积并检查高值（尽管我经常发现 2 对简单仪器输出的噪声不太敏感）。

4.  平滑数据并检查等距点的三元组 where, if`x0 < x1 < x2, y1 > 0.5 * (y0 + y2)`或检查欧几里得距离，如下所示： `D((x0, y0), (x1, y1)) + D((x1, y1), (x2, y2)) > D((x0, y0),(x2, y2))`，这依赖于三角形不等式。使用简单的比率将再次为您提供评分机制。

5.  为您的数据拟合一个非常简单的 2 高斯混合模型（例如，Numerical Recipes 有一个很好的现成代码块）。取较早的高峰。这将正确处理重叠峰。

6.  在数据中找到与简单高斯、柯西、泊松或你有什么关系的曲线的最佳匹配。在广泛的范围内评估此曲线，并在记录其峰值位置后从数据副本中减去它。重复。取模型参数（可能是标准偏差，但某些应用程序可能关心峰度或其他特征）满足某些标准的最早峰值。当从数据中减去峰值时，请注意留下的伪影。最佳匹配可能由上面#2 中建议的匹配评分类型确定。

我已经完成了您之前正在做的事情：在 DNA 序列数据中找到峰值，在从测量曲线估计的导数中找到峰值，以及在直方图中找到峰值。

我鼓励您仔细注意适当的基线。维纳滤波或其他滤波或简单的直方图分析通常是在存在噪声的情况下进行基线的简单方法。

最后，如果您的数据通常很嘈杂，并且您从卡中获取数据作为未引用的单端输出（甚至是引用的，只是没有差分），并且如果您对每个数据点的大量观察结果进行平均，请尝试对这些数据进行排序观察并丢弃第一个和最后一个四分位数并平均剩余的四分位数。有许多这样的异常值消除策略非常有用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-08-06T11:12:48.890

您可以尝试信号平均，即对于每个点，将周围 3 个或更多点的值平均。如果噪声信号很大，那么即使这样也可能无济于事。

我意识到这与语言无关，但猜测您使用的是 LabView，LabView 附带了许多预打包的信号处理 VI，您可以使用它们来进行平滑和降噪。[NI 论坛](http://forums.ni.com/)是在这类事情上获得更专业帮助的好地方。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-23T14:28:23.130

已经对这个问题进行了一些详细的研究。

[ROOT](http://root.cern.ch/)（核/粒子物理分析工具）`TSpectrum*`类中有一组非常最新的实现。该代码适用于一维到三维数据。

ROOT 源代码可用，因此您可以根据需要获取此实现。

从[TSpectrum](http://root.cern.ch/root/html/TSpectrum.html)类文档：

此类中使用的算法已在以下参考文献中发布：

> [1] M.Morhac 等人：多维符合伽马射线光谱的背景消除方法。物理研究中的核仪器和方法 A 401 (1997) 113-132。
> 
> [2] M.Morhac 等人：高效的一维和二维金反卷积及其在伽马射线光谱分解中的应用。物理研究中的核仪器和方法 A 401 (1997) 385-408。
> 
> [3] M.Morhac 等人：识别多维符合伽马射线光谱中的峰值。研究物理学中的核仪器和方法 A 443（2000），108-125。

对于那些没有 NIM 在线订阅的人，这些论文是从课程文档中链接的。

* * *

所做的简短版本是直方图展平以消除噪声，然后在展平直方图中通过蛮力检测局部最大值。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-11-03T21:46:15.990

我想为这个线程贡献一个[我自己开发](https://stackoverflow.com/questions/22583391/peak-detection-in-realtime-timeseries-data)的算法：

它基于[分散](https://en.wikipedia.org/wiki/Statistical_dispersion)原理：如果一个新的数据点与某个移动均值相差给定 x 个标准差，则算法发出信号（也称为[z-score](https://en.wikipedia.org/wiki/Standard_score)）。该算法非常稳健，因为它构造了*单独*的移动均值和偏差，因此信号不会破坏阈值。因此，无论先前信号的数量如何，都以大致相同的精度识别未来信号。该算法需要 3 个输入`lag = the lag of the moving window`：`threshold = the z-score at which the algorithm signals`和`influence = the influence (between 0 and 1) of new signals on the mean and standard deviation`。例如，a `lag`of 5 将使用最后 5 个观测值来平滑数据。`threshold`如果数据点与移动平均值相差 3.5 个标准差，则A值为 3.5。而`influence`0.5 的 an 给出了*一半的信号*正常数据点的影响。同样，`influence`为 0 的 an 完全忽略重新计算新阈值的信号：因此 0 的影响是最稳健的选择。

它的工作原理如下：

***伪代码***

```
# Let y be a vector of timeseries data of at least length lag+2
# Let mean() be a function that calculates the mean
# Let std() be a function that calculates the standard deviaton
# Let absolute() be the absolute value function

# Settings (the ones below are examples: choose what is best for your data)
set lag to 5;          # lag 5 for the smoothing functions
set threshold to 3.5;  # 3.5 standard deviations for signal
set influence to 0.5;  # between 0 and 1, where 1 is normal influence, 0.5 is half

# Initialise variables
set signals to vector 0,...,0 of length of y;   # Initialise signal results
set filteredY to y(1,...,lag)                   # Initialise filtered series
set avgFilter to null;                          # Initialise average filter
set stdFilter to null;                          # Initialise std. filter
set avgFilter(lag) to mean(y(1,...,lag));       # Initialise first value
set stdFilter(lag) to std(y(1,...,lag));        # Initialise first value

for i=lag+1,...,t do
  if absolute(y(i) - avgFilter(i-1)) > threshold*stdFilter(i-1) then
    if y(i) > avgFilter(i-1)
      set signals(i) to +1;                     # Positive signal
    else
      set signals(i) to -1;                     # Negative signal
    end
    # Adjust the filters
    set filteredY(i) to influence*y(i) + (1-influence)*filteredY(i-1);
    set avgFilter(i) to mean(filteredY(i-lag,i),lag);
    set stdFilter(i) to std(filteredY(i-lag,i),lag);
  else
    set signals(i) to 0;                        # No signal
    # Adjust the filters
    set filteredY(i) to y(i);
    set avgFilter(i) to mean(filteredY(i-lag,i),lag);
    set stdFilter(i) to std(filteredY(i-lag,i),lag);
  end
end 
```

* * *

# 演示

[![鲁棒阈值算法的演示](../Images/cd93be4bc53fe415bbce924e80568686.png)](https://i.imgur.com/LFvEM2Y.gif)

# [> 有关更多信息，请参阅原始答案](https://stackoverflow.com/questions/22583391/peak-signal-detection-in-realtime-timeseries-data/22640362)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-02T01:00:13.913

这种方法基本上来自大卫马尔的书《愿景》

用峰的预期宽度高斯模糊您的信号。这样可以消除噪声尖峰，并且您的相位数据完好无损。

然后边缘检测（LOG会做）

那么你的边缘就是特征的边缘（比如山峰）。在边缘之间寻找峰，按大小对峰进行排序，就完成了。

我对此使用了变体，它们工作得很好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-06T11:38:05.393

我认为您希望将您的信号与预期的示例信号进行[交叉关联。](http://en.wikipedia.org/wiki/Cross-correlation)但是，我学习信号处理已经很长时间了，即便如此，我也没有太在意。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-06T11:17:29.240

您可以将一些[标准偏差](http://en.wikipedia.org/wiki/Standard_deviations)应用于您的逻辑并注意超过 x% 的峰值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-06T11:38:37.607

我不太了解仪器，所以这可能完全不切实际，但话又说回来，这可能是一个有用的不同方向。如果你知道读数是如何失败的，并且在这些失败的情况下峰值之间有一定的间隔，为什么不在每个间隔进行梯度下降。如果下降带您回到之前搜索过的区域，您可以放弃它。根据采样表面的形状，这也可以帮助您比搜索更快地找到峰。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-02T12:33:16.163

期望的峰值和不需要的第二个峰值之间是否存在质的差异？如果两个峰值都是“尖锐的”——即持续时间很短——当在频域中查看信号时（通过进行 FFT），您将在大多数频段获得能量。但是，如果“好”峰值可靠地在“坏”峰值中不存在的频率处存在能量，或者反之亦然，那么您可能能够以这种方式自动区分它们。

# sql - 基于定时器的事件触发器

> ID：3272
> 
> 赞同：15
> 
> 时间：2008-08-06T10:43:16.720
> 
> 标签：sql, web-services, service, triggers, timer

我目前正在从事一个具有特定要求的项目。简要概述如下：

*   从外部网络服务检索数据
*   数据存储在 SQL 2005 中
*   数据通过 Web GUI 进行操作
*   与 Web 服务通信的 Windows 服务与我们的内部 Web UI 没有耦合，除了通过数据库。
*   与 Web 服务的通信既需要基于时间，又需要通过用户对 Web UI 的干预来触发。

Web 服务通信触发的当前（预生产）模型是通过存储手动干预生成的触发请求的数据库表。我真的不想拥有多个触发机制，但希望能够根据调用时间使用触发器填充数据库表。在我看来，有两种方法可以做到这一点。

1) 调整触发器表以存储两个额外的参数。一个是“这是基于时间的还是手动添加的？” 和一个可以为空的字段来存储时间细节（具体格式待定）。如果它是手动创建的触发器，则在触发触发器时将其标记为已处理，但如果它是定时触发器则不标记。
*或*
2) 创建第二个 Windows 服务，以定时间隔动态创建触发器。

第二个选项对我来说似乎是一个骗局，但选项 1 的管理很容易变成一个编程噩梦（你怎么知道表的最后一次轮询是否返回了需要触发的事件，然后你如何停止它在下一次投票时重新触发）

如果有人能抽出几分钟帮助我决定走哪条路线（这两条路线之一，或者可能是第三条未列出的路线），我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-07T18:24:09.863

为什么不使用 SQL 作业而不是 Windows 服务？您可以将所有数据库“触发器”代码封装在存储过程中。然后，您的 UI 和 SQL 作业可以调用相同的存储过程并以相同的方式创建触发器，无论是手动还是按时间间隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-06T10:53:15.437

我的看法是这样的。

您有一个 Windows 服务，它扮演调度程序的角色，其中有一些类可以简单地调用 Web 服务并将数据放入数据库中。

因此，您也可以直接从 WebUI 使用这些类，并根据 WebUI 触发器导入数据。

我不喜欢将用户生成的操作作为标志（触发器）存储在数据库中的想法，其中某些服务将轮询它（以不受用户控制的间隔）以执行该操作。

您甚至可以将整个代码转换为 exe，然后您可以使用 Windows 调度程序进行调度。并在用户从 Web UI 触发操作时调用相同的 exe。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-06T11:03:12.640

@Vaibhav

不幸的是，解决方案的物理架构不允许组件之间进行任何直接通信，除了 Web UI 到数据库和数据库到服务（然后可以调用 Web 服务）。但是，我同意重用通信类将是这里的理想选择——我只是不能在我们的业务范围内这样做*

*技术上“更好”的解决方案不总是受到外部因素的阻碍吗？

# ruby - 从Ruby中的两个数组映射值

> ID：3281
> 
> 赞同：23
> 
> 时间：2008-08-06T11:02:20.597
> 
> 标签：ruby, maps, reduce

我想知道是否有一种方法可以在 Ruby 中使用 Python 执行以下操作：

```
sum = reduce(lambda x, y: x + y, map(lambda x, y: x * y, weights, data)) 
```

我有两个大小相等的权重和数据数组，但我似乎无法在 Ruby 中找到类似于 map 的函数，减少我的工作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-07T01:29:05.777

@Michiel de Mare

您的 Ruby 1.9 示例可以进一步缩短：

```
weights.zip(data).map(:*).reduce(:+) 
```

另请注意，在 Ruby 1.8 中，如果您需要 ActiveSupport（来自 Rails），您可以使用：

```
weights.zip(data).map(&:*).reduce(&:+) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-07T01:22:36.540

在 Ruby 1.9 中：

```
weights.zip(data).map{|a,b| a*b}.reduce(:+) 
```

在 Ruby 1.8 中：

```
weights.zip(data).inject(0) {|sum,(w,d)| sum + w*d } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-06T12:15:50.747

Array.zip 函数对数组进行元素组合。它不像 Python 语法那么干净，但这是您可以使用的一种方法：

```
weights = [1, 2, 3]
data = [4, 5, 6]
result = Array.new
a.zip(b) { |x, y| result << x * y } # For just the one operation

sum = 0
a.zip(b) { |x, y| sum += x * y } # For both operations 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T12:21:46.460

Ruby 有一个`map`方法（又名`collect`方法），它可以应用于任何`Enumerable`对象。如果`numbers`是一个数字数组，Ruby 中的以下行：

```
numbers.map{|x| x + 5} 
```

相当于 Python 中的以下行：

```
map(lambda x: x + 5, numbers) 
```

有关详细信息，请参阅[此处](http://www.globalnerdy.com/2008/06/25/enumerating-enumerable-enumerablecollectenumerablemap/ "可枚举#collect / 可枚举#map")或[此处](http://www.ruby-doc.org/core/classes/Enumerable.html#M001146)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-02-26T00:31:53.167

也适用于超过 2 个数组的地图的替代方案：

```
def dot(*arrays)
  arrays.transpose.map {|vals| yield vals}
end

dot(weights,data) {|a,b| a*b} 

# OR, if you have a third array

dot(weights,data,offsets) {|a,b,c| (a*b)+c} 
```

这也可以添加到数组中：

```
class Array
  def dot
    self.transpose.map{|vals| yield vals}
  end
end

[weights,data].dot {|a,b| a*b}

#OR

[weights,data,offsets].dot {|a,b,c| (a*b)+c} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-09T08:24:56.067

```
weights = [1,2,3]
data    = [10,50,30]

require 'matrix'
Vector[*weights].inner_product Vector[*data] # => 200 
```

# c# - 为什么我不能在 C# 中使用抽象静态方法？

> ID：3284
> 
> 赞同：197
> 
> 时间：2008-08-06T11:04:33.587
> 
> 标签：c#, .net, language-design

最近我一直在与[提供程序](http://msdn.microsoft.com/en-us/library/aa479030.aspx)合作，我遇到了一个有趣的情况，我想要一个具有抽象静态方法的抽象类。我阅读了一些关于该主题的帖子，这有点道理，但是有一个很好的清晰解释吗？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2008-08-06T11:30:07.093

静态方法不是这样*实例化*的，它们只是在没有对象引用的情况下可用。

对静态方法的调用是通过类名完成的，而不是通过对象引用，调用它的中间语言 (IL) 代码将通过定义它的类的名称来调用抽象方法，不一定是你使用的类。

让我举个例子。

使用以下代码：

```
public class A
{
    public static void Test()
    {
    }
}

public class B : A
{
} 
```

如果你调用 B.Test，像这样：

```
class Program
{
    static void Main(string[] args)
    {
        B.Test();
    }
} 
```

那么Main方法里面的实际代码如下：

```
.entrypoint
.maxstack 8
L0000: nop 
L0001: call void ConsoleApplication1.A::Test()
L0006: nop 
L0007: ret 
```

如您所见，调用是对 A.Test 进行的，因为定义它的是 A 类，而不是 B.Test，即使您可以这样编写代码。

如果你有*类类型*，比如在 Delphi 中，你可以在其中创建一个引用类型而不是对象的变量，那么你将更多地使用虚拟和抽象静态方法（以及构造函数），但它们不可用并且因此静态调用在 .NET 中是非虚拟的。

我意识到 IL 设计人员可以允许编译代码以调用 B.Test，并在运行时解析调用，但它仍然不是虚拟的，因为您仍然需要在那里编写某种类名。

虚拟方法以及抽象方法仅在您使用变量时有用，该变量在运行时可以包含许多不同类型的对象，因此您希望为变量中的当前对象调用正确的方法。对于静态方法，无论如何您都需要通过类名，因此要调用的确切方法在编译时是已知的，因为它不能也不会改变。

因此，虚拟/抽象静态方法在 .NET 中不可用。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2008-08-06T11:21:11.667

静态方法不能被继承或覆盖，这就是它们不能抽象的原因。由于静态方法是在类的类型而不是实例上定义的，因此必须在该类型上显式调用它们。所以当你想调用一个子类的方法时，你需要使用它的名字来调用它。这使得继承无关紧要。

假设您可以暂时继承静态方法。想象一下这个场景：

```
public static class Base
{
    public static virtual int GetNumber() { return 5; }
}

public static class Child1 : Base
{
    public static override int GetNumber() { return 1; }
}

public static class Child2 : Base
{
    public static override int GetNumber() { return 2; }
} 
```

如果调用 Base.GetNumber()，会调用哪个方法？返回哪个值？很容易看出，如果不创建对象实例，继承是相当困难的。没有继承的抽象方法只是没有主体的方法，所以不能被调用。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2008-08-09T07:01:57.000

另一位受访者 (McDowell) 表示，多态性仅适用于对象实例。那应该是合格的；有些语言确实将类视为“类”或“元类”类型的实例。这些语言确实支持实例和类（静态）方法的多态性。

C# 与之前的 Java 和 C++ 一样，不是这样的语言；`static`关键字显式用于表示该方法是静态绑定的，而不是动态/虚拟的。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2010-02-18T05:36:44.097

在这种情况下，静态字段和方法肯定需要继承：

```
abstract class Animal
{
  protected static string[] legs;

  static Animal() {
    legs=new string[0];
  }

  public static void printLegs()
  {
    foreach (string leg in legs) {
      print(leg);
    }
  }
}

class Human: Animal
{
  static Human() {
    legs=new string[] {"left leg", "right leg"};
  }
}

class Dog: Animal
{
  static Dog() {
    legs=new string[] {"left foreleg", "right foreleg", "left hindleg", "right hindleg"};
  }
}

public static void main() {
  Dog.printLegs();
  Human.printLegs();
}

//what is the output?
//does each subclass get its own copy of the array "legs"? 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-08-06T11:24:41.957

*添加到前面的解释中，静态方法调用在编译时*绑定到特定方法，从而排除了多态行为。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-08-18T19:01:59.430

我们实际上覆盖了静态方法（在 delphi 中），它有点难看，但它可以很好地满足我们的需求。

我们使用它，因此类可以在没有类实例的情况下拥有其可用对象的列表，例如，我们有一个如下所示的方法：

```
class function AvailableObjects: string; override;
begin
  Result := 'Object1, Object2';
end; 
```

这很丑但很有必要，这样我们就可以实例化需要的东西，而不是为了搜索可用对象而实例化所有类。

这是一个简单的例子，但应用程序本身是一个客户端-服务器应用程序，它在一个服务器中拥有所有可用的类，以及多个不同的客户端，它们可能不需要服务器拥有的所有东西，也永远不需要对象实例。

因此，这比为每个客户端拥有一个不同的服务器应用程序要容易得多。

希望这个例子很清楚。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2021-02-05T21:35:56.190

这个问题已有 12 年历史，但仍然需要给出更好的答案。正如评论中很少有人指出的那样，与所有答案所假装的相反，在 C# 中使用静态抽象方法肯定是有意义的。正如哲学家丹尼尔丹尼特所说，想象力的失败并不是对必然性的洞察。没有意识到 C# 不仅仅是一种 OOP 语言，这是一个常见的错误。对给定概念的纯 OOP 视角会导致受限且在当前情况下被误导的检查。多态性不仅仅是对多态性进行细分：它还包括参数多态性（又名泛型编程），而 C# 已经支持这一点很长时间了。在这个额外的范例中，抽象类（和大多数类型）不仅用于为实例提供类型。它们也可以用作**泛型参数的界限**；多年来，某些语言（例如 Haskell，以及最近的 Scala、Rust 或 Swift）的用户已经理解的东西。

在这种情况下，您可能想要执行以下操作：

```
void Catch<TAnimal>() where TAnimal : Animal
{
    string scientificName = TAnimal.ScientificName; // abstract static property
    Console.WriteLine($"Let's catch some {scientificName}");
    …
} 
```

在这里，表达可以由子类专门化的静态成员的能力**完全有意义**！

不幸的是，C# 不允许抽象静态成员，但我想提出一种可以很好地**模拟**它们的模式。这种模式并不完美（它对继承施加了一些限制），但据我所知它是类型安全的。

主要思想是将抽象伴随类（此处`SpeciesFor<TAnimal>`）与应包含静态抽象成员的类（此处）相关联`Animal`：

```
public abstract class SpeciesFor<TAnimal> where TAnimal : Animal
{
    public static SpeciesFor<TAnimal> Instance { get { … } }

    // abstract "static" members

    public abstract string ScientificName { get; }

    …
}

public abstract class Animal { … } 
```

现在我们想让这项工作：

```
void Catch<TAnimal>() where TAnimal : Animal
{
    string scientificName = SpeciesFor<TAnimal>.Instance.ScientificName;
    Console.WriteLine($"Let's catch some {scientificName}");
    …
} 
```

当然我们有两个问题需要解决：

1.  我们如何确保子类的实现者`Animal`提供该子类的特定实例`SpeciesFor<TAnimal>`？
2.  该物业如何`SpeciesFor<TAnimal>.Instance`检索此信息？

这是我们如何解决1：

```
public abstract class Animal<TSelf> where TSelf : Animal<TSelf>
{
    private Animal(…) {}

    public abstract class OfSpecies<TSpecies> : Animal<TSelf>
        where TSpecies : SpeciesFor<TSelf>, new()
    {
        protected OfSpecies(…) : base(…) { }
    }

    …
} 
```

通过将构造函数设为`Animal<TSelf>`私有，我们确保它的所有子类也是内部类的子类`Animal<TSelf>.OfSpecies<TSpecies>`。所以这些子类必须指定一个`TSpecies`有`new()`边界的类型。

对于 2，我们可以提供以下实现：

```
public abstract class SpeciesFor<TAnimal> where TAnimal : Animal<TAnimal>
{
    private static SpeciesFor<TAnimal> _instance;

    public static SpeciesFor<TAnimal> Instance => _instance ??= MakeInstance();

    private static SpeciesFor<TAnimal> MakeInstance()
    {
        Type t = typeof(TAnimal);
        while (true)
        {
            if (t.IsConstructedGenericType
                    && t.GetGenericTypeDefinition() == typeof(Animal<>.OfSpecies<>))
                return (SpeciesFor<TAnimal>)Activator.CreateInstance(t.GenericTypeArguments[1]);
            t = t.BaseType;
            if (t == null)
                throw new InvalidProgramException();
        }
    }

    // abstract "static" members

    public abstract string ScientificName { get; }

    …
} 
```

我们怎么知道里面的反射代码`MakeInstance()`永远不会抛出？正如我们已经说过的，几乎所有层次结构中`Animal<TSelf>`的类也是`Animal<TSelf>.OfSpecies<TSpecies>`. `TSpecies`所以我们知道，对于这些类，必须提供特定的。由于约束，这种类型也必然是可构造的`: new()`。但这仍然排除了`Animal<Something>`没有相关物种的抽象类型。现在我们可以说服自己奇怪地重复出现的模板模式`where TAnimal : Animal<TAnimal>`使得我们无法编写`SpeciesFor<Animal<Something>>.Instance`，因为 type`Animal<Something>`永远不是`Animal<Animal<Something>>`.

等等：

```
public class CatSpecies : SpeciesFor<Cat>
{
    // overriden "static" members

    public override string ScientificName => "Felis catus";
    public override Cat CreateInVivoFromDnaTrappedInAmber() { … }
    public override Cat Clone(Cat a) { … }
    public override Cat Breed(Cat a1, Cat a2) { … }
}

public class Cat : Animal<Cat>.OfSpecies<CatSpecies>
{
    // overriden members

    public override string CuteName { get { … } }
}

public class DogSpecies : SpeciesFor<Dog>
{
    // overriden "static" members

    public override string ScientificName => "Canis lupus familiaris";
    public override Dog CreateInVivoFromDnaTrappedInAmber() { … }
    public override Dog Clone(Dog a) { … }
    public override Dog Breed(Dog a1, Dog a2) { … }
}

public class Dog : Animal<Dog>.OfSpecies<DogSpecies>
{
    // overriden members

    public override string CuteName { get { … } }
}

public class Program
{
    public static void Main()
    {
        ConductCrazyScientificExperimentsWith<Cat>();
        ConductCrazyScientificExperimentsWith<Dog>();
        ConductCrazyScientificExperimentsWith<Tyranosaurus>();
        ConductCrazyScientificExperimentsWith<Wyvern>();
    }

    public static void ConductCrazyScientificExperimentsWith<TAnimal>()
        where TAnimal : Animal<TAnimal>
    {
        // Look Ma! No animal instance polymorphism!

        TAnimal a2039 = SpeciesFor<TAnimal>.Instance.CreateInVivoFromDnaTrappedInAmber();
        TAnimal a2988 = SpeciesFor<TAnimal>.Instance.CreateInVivoFromDnaTrappedInAmber();
        TAnimal a0400 = SpeciesFor<TAnimal>.Instance.Clone(a2988);
        TAnimal a9477 = SpeciesFor<TAnimal>.Instance.Breed(a0400, a2039);
        TAnimal a9404 = SpeciesFor<TAnimal>.Instance.Breed(a2988, a9477);

        Console.WriteLine(
            "The confederation of mad scientists is happy to announce the birth " +
            $"of {a9404.CuteName}, our new {SpeciesFor<TAnimal>.Instance.ScientificName}.");
    }
} 
```

这种模式的一个限制是不可能（据我所知）以令人满意的方式扩展类层次结构。例如，我们不能引入与同伴`Mammal`关联的中间类。`MammalClass`另一个是它不适用于比抽象类更灵活的接口中的静态成员。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-21T18:10:45.047

使用`.NET 6`/`C# preview`您可以使用“接口中的静态抽象成员”来做到这一点。

（在编写代码时编译成功，但某些 IDE 无法突出显示代码）

```
using System;

namespace StaticAbstractTesting
{
    public interface ISomeAbstractInterface
    {
        public abstract static string CallMe();
    }

    public class MyClassA : ISomeAbstractInterface
    {
        static string ISomeAbstractInterface.CallMe()
        {
            return "You called ClassA";
        }
    }

    public class MyClassB : ISomeAbstractInterface
    {
        static string ISomeAbstractInterface.CallMe()
        {
            return "You called ClassB";
        }
    }

    public class Program
    {

        public static void Main(string[] args)
        {
            UseStaticClassMethod<MyClassA>();
            UseStaticClassMethod<MyClassB>();
        }

        public static void UseStaticClassMethod<T>() where T : ISomeAbstractInterface
        {
            Console.WriteLine($"{typeof(T).Name}.CallMe() result: {T.CallMe()}");
        }
    }
} 
```

资源：

*   [https://docs.microsoft.com/en-us/dotnet/core/compatibility/core-libraries/6.0/static-abstract-interface-methods](https://docs.microsoft.com/en-us/dotnet/core/compatibility/core-libraries/6.0/static-abstract-interface-methods)
*   [https://github.com/dotnet/csharplang/issues/4436](https://github.com/dotnet/csharplang/issues/4436)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-14T11:11:59.220

抽象方法是隐式虚拟的。抽象方法需要一个实例，但静态方法没有实例。因此，您可以在抽象类中拥有静态方法，但它不能是静态抽象（或抽象静态）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-22T20:35:58.800

它目前在 C# 10 中作为预览功能提供。

# c# - 我可以有一个返回 IEnumerator 的方法吗 并在 foreach 循环中使用它？

> ID：3315
> 
> 赞同：21
> 
> 时间：2008-08-06T12:17:31.320
> 
> 标签：c#, foreach, ienumerable, ienumerator

我需要设置表单上每个文本框的高度，其中一些嵌套在其他控件中。我以为我可以做这样的事情：

```
private static IEnumerator<TextBox> FindTextBoxes(Control rootControl)
{
    foreach (Control control in rootControl.Controls)
    {
        if (control.Controls.Count > 0)
        {
            // Recursively search for any TextBoxes within each child control
            foreach (TextBox textBox in FindTextBoxes(control))
            {
                yield return textBox;
            }
        }

        TextBox textBox2 = control as TextBox;
        if (textBox2 != null)
        {
            yield return textBox2;
        }
    }
} 
```

像这样使用它：

```
foreach(TextBox textBox in FindTextBoxes(this))
{
    textBox.Height = height;
} 
```

但是编译器当然会吐出它的假人，因为*foreach*需要一个**IEnumerable**而不是**IEnumerator**。

有没有办法做到这一点而不必使用**GetEnumerator()**方法创建一个单独的类？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-06T12:19:57.367

正如编译器告诉您的，您需要将返回类型更改为 IEnumerable。这就是 yield return 语法的工作原理。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-08-08T23:34:44.237

只是为了澄清

```
private static IEnumerator<TextBox> FindTextBoxes(Control rootControl) 
```

更改为

```
private static IEnumerable<TextBox> FindTextBoxes(Control rootControl) 
```

这应该是全部:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-06T13:04:33.487

如果您返回 IEnumerator，则每次调用该方法时它将是一个不同的枚举器对象（就像您在每次迭代时重置枚举器一样）。如果您返回 IEnumerable，则 foreach 可以根据使用 yield 语句的方法进行枚举。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T12:32:59.353

```
// Generic function that gets all child controls of a certain type, 
// returned in a List collection
private static List<T> GetChildTextBoxes<T>(Control ctrl) where T : Control{
    List<T> tbs = new List<T>();
    foreach (Control c in ctrl.Controls) {
        // If c is of type T, add it to the collection
        if (c is T) { 
            tbs.Add((T)c);
        }
    }
    return tbs;
}

private static void SetChildTextBoxesHeight(Control ctrl, int height) {
    foreach (TextBox t in GetChildTextBoxes<TextBox>(ctrl)) {
        t.Height = height;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-07-14T19:09:39.747

如果你有一个枚举器，并且需要在 for-each 循环中使用它，你可以使用以下内容来包装它：

```
静态公共类枚举Helper
{
    公共类 enumeratorHolder<T>
    {
        私人 T theEnumerator;
        public T GetEnumerator() { return theEnumerator; }
        公共 enumeratorHolder(T newEnumerator) { theEnumerator = newEnumerator;}
    }
    静态 enumeratorHolder<T> toEnumerable<T>(T theEnumerator) { return new enumeratorHolder<T>(theEnumerator); }
    私有类 IEnumeratorHolder<T>:IEnumerable<T>
    {
        私人 IEnumerator<T> theEnumerator;
        public IEnumerator<T> GetEnumerator() { return theEnumerator; }
        System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator() { return theEnumerator; }
        公共 IEnumeratorHolder(IEnumerator<T> newEnumerator) { theEnumerator = newEnumerator; }
    }
    静态 IEnumerable<T> toEnumerable<T>(IEnumerator<T> theEnumerator) { return new IEnumeratorHolder<T>(theEnumerator); }
}

```

该`toEnumerable`方法将接受[c#](/questions/tagged/c%23 "显示标记为“c#”的问题")或[vb](/questions/tagged/vb "显示标记为“vb”的问题")认为可接受的返回类型 from 的任何内容`GetEnumerator`，并返回可以在`foreach`. 如果参数是 an`IEnumerator<>`响应将是 an `IEnumerable<T>`，尽管调用`GetEnumerator`它一次可能会产生不好的结果。

# javascript - 如何使用 JavaScript 中的 css 属性设置 HTML 元素的背景颜色

> ID：3319
> 
> 赞同：128
> 
> 时间：2008-08-06T12:23:22.413
> 
> 标签：javascript, css, background-color

如何在 JavaScript 中使用 css 设置 HTML 元素的背景颜色？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2008-08-06T12:25:54.920

通常，CSS 属性通过使它们不带任何破折号的驼峰式大小写转换为 JavaScript。就这样`background-color`变成了`backgroundColor`。

```
function setColor(element, color)
{
    element.style.backgroundColor = color;
}

// where el is the concerned element
var el = document.getElementById('elementId');
setColor(el, 'green'); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2008-08-19T11:59:40.470

如果您将所有样式等都保留在 CSS 中，并且只在 JavaScript 中设置/取消设置类名，您可能会发现您的代码更易于维护。

你的 CSS 显然是这样的：

```
.highlight {
    background:#ff00aa;
} 
```

然后在 JavaScript 中：

```
element.className = element.className === 'highlight' ? '' : 'highlight'; 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2008-08-06T12:25:13.800

```
var element = document.getElementById('element');
element.style.background = '#FF00AA'; 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2008-08-06T13:23:42.247

或者，使用一点 jQuery：

```
$('#fieldID').css('background-color', '#FF6600'); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2011-03-03T21:20:56.590

将此脚本元素添加到您的正文元素：

```
<body>
  <script type="text/javascript">
     document.body.style.backgroundColor = "#AAAAAA";
  </script>
</body> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-04-17T16:07:45.950

```
var element = document.getElementById('element');

element.onclick = function() {
  element.classList.add('backGroundColor');

  setTimeout(function() {
    element.classList.remove('backGroundColor');
  }, 2000);
};
```

```
.backGroundColor {
    background-color: green;
}
```

```
<div id="element">Click Me</div>
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-09-03T12:21:03.320

你可以试试这个

```
var element = document.getElementById('element_id');
element.style.backgroundColor = "color or color_code"; 
```

例子。

```
var element = document.getElementById('firstname');
element.style.backgroundColor = "green";//Or #ff55ff 
```

[JSFIDDLE](http://jsfiddle.net/1rjdLno5/6/)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-03-01T23:57:53.427

亲吻答案：

```
document.getElementById('element').style.background = '#DD00DD'; 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-02-10T17:13:09.163

你可以用 JQuery 做到这一点：

```
$(".class").css("background","yellow"); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-01-05T12:51:06.763

您可以使用：

```
<script type="text/javascript">
  Window.body.style.backgroundColor = "#5a5a5a";
</script> 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-03-13T20:51:31.147

```
$("body").css("background","green"); //jQuery

document.body.style.backgroundColor = "green"; //javascript 
```

有这么多方法，我认为这很容易和简单

[Plunker 上的演示](https://plnkr.co/edit/FEjfjG7SM10ouhvjt4AR?p=preview)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-06-23T09:56:47.933

```
$('#ID / .Class').css('background-color', '#FF6600'); 
```

通过使用 jquery，我们可以定位元素的类或 Id 以应用 css 背景或任何其他样式

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-04-11T01:34:55.530

您可以使用

```
$('#elementID').css('background-color', '#C0C0C0'); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-06-23T10:02:59.833

Javascript：

```
document.getElementById("ID").style.background = "colorName"; //JS ID

document.getElementsByClassName("ClassName")[0].style.background = "colorName"; //JS Class 
```

查询：

```
$('#ID/.className').css("background","colorName") // One style

$('#ID/.className').css({"background":"colorName","color":"colorname"}); //Multiple style 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-06-07T19:51:07.130

## 更改 a 的 CSS`HTMLElement`

您可以使用 JavaScript 更改大部分 CSS 属性，使用以下语句：

```
document.querySelector(<selector>).style[<property>] = <new style> 
```

其中`<selector>`, `<property>`,`<new style>`都是`String`对象。

通常，样式属性的名称与 CSS 中使用的实际名称相同。但是只要有超过一个词，就会变成驼峰式：例如`background-color`用 . 改变`backgroundColor`。

以下语句将背景设置为`#container`红色：

```
documentquerySelector('#container').style.background = 'red' 
```

这是一个快速演示，每 0.5 秒更改一次盒子的颜色：

```
colors = ['rosybrown', 'cornflowerblue', 'pink', 'lightblue', 'lemonchiffon', 'lightgrey', 'lightcoral', 'blueviolet', 'firebrick', 'fuchsia', 'lightgreen', 'red', 'purple', 'cyan']

let i = 0
setInterval(() => {
  const random = Math.floor(Math.random()*colors.length)
  document.querySelector('.box').style.background = colors[random];
}, 500)
```

```
.box {
  width: 100px;
  height: 100px;
}
```

```
<div class="box"></div>
```

* * *

## 更改多个 CSS`HTMLElement`

想象一下，您想将 CSS 样式应用于多个元素，例如，为所有具有类名的元素设置背景色`box` `lightgreen`。那么你就可以：

1.  使用[解构语法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)选择元素[`.querySelectorAll`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector)并将它们解包到一个对象中：`Array`

    ```
    const elements = [...document.querySelectorAll('.box')] 
    ```

2.  遍历数组[`.forEach`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)并将更改应用于每个元素：

    ```
    elements.forEach(element => element.style.background = 'lightgreen') 
    ```

这是演示：

```
const elements = [...document.querySelectorAll('.box')]
elements.forEach(element => element.style.background = 'lightgreen')
```

```
.box {
  height: 100px;
  width: 100px;
  display: inline-block;
  margin: 10px;
}
```

```
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
```

* * *

## 另一种方法

如果您想多次更改元素的多个样式属性，您可以考虑使用另一种方法：将此元素链接到另一个类。

假设您可以预先在 CSS 中准备样式，您可以通过访问`classList`元素并调用`toggle`函数来切换类：

```
document.querySelector('.box').classList.toggle('orange')
```

```
.box {
  width: 100px;
  height: 100px;
}

.orange {
  background: orange;
}
```

```
<div class='box'></div>
```

* * *

## JavaScript 中的 CSS 属性列表

以下是完整列表：

```
alignContent
alignItems
alignSelf
animation
animationDelay
animationDirection
animationDuration
animationFillMode
animationIterationCount
animationName
animationTimingFunction
animationPlayState
background
backgroundAttachment
backgroundColor
backgroundImage
backgroundPosition
backgroundRepeat
backgroundClip
backgroundOrigin
backgroundSize</a></td>
backfaceVisibility
borderBottom
borderBottomColor
borderBottomLeftRadius
borderBottomRightRadius
borderBottomStyle
borderBottomWidth
borderCollapse
borderColor
borderImage
borderImageOutset
borderImageRepeat
borderImageSlice
borderImageSource  
borderImageWidth
borderLeft
borderLeftColor
borderLeftStyle
borderLeftWidth
borderRadius
borderRight
borderRightColor
borderRightStyle
borderRightWidth
borderSpacing
borderStyle
borderTop
borderTopColor
borderTopLeftRadius
borderTopRightRadius
borderTopStyle
borderTopWidth
borderWidth
bottom
boxShadow
boxSizing
captionSide
clear
clip
color
columnCount
columnFill
columnGap
columnRule
columnRuleColor
columnRuleStyle
columnRuleWidth
columns
columnSpan
columnWidth
counterIncrement
counterReset
cursor
direction
display
emptyCells
filter
flex
flexBasis
flexDirection
flexFlow
flexGrow
flexShrink
flexWrap
content
fontStretch
hangingPunctuation
height
hyphens
icon
imageOrientation
navDown
navIndex
navLeft
navRight
navUp>
cssFloat
font
fontFamily
fontSize
fontStyle
fontVariant
fontWeight
fontSizeAdjust
justifyContent
left
letterSpacing
lineHeight
listStyle
listStyleImage
listStylePosition
listStyleType
margin
marginBottom
marginLeft
marginRight
marginTop
maxHeight
maxWidth
minHeight
minWidth
opacity
order
orphans
outline
outlineColor
outlineOffset
outlineStyle
outlineWidth
overflow
overflowX
overflowY
padding
paddingBottom
paddingLeft
paddingRight
paddingTop
pageBreakAfter
pageBreakBefore
pageBreakInside
perspective
perspectiveOrigin
position
quotes
resize
right
tableLayout
tabSize
textAlign
textAlignLast
textDecoration
textDecorationColor
textDecorationLine
textDecorationStyle
textIndent
textOverflow
textShadow
textTransform
textJustify
top
transform
transformOrigin
transformStyle
transition
transitionProperty
transitionDuration
transitionTimingFunction
transitionDelay
unicodeBidi
userSelect
verticalAlign
visibility
voiceBalance
voiceDuration
voicePitch
voicePitchRange
voiceRate
voiceStress
voiceVolume
whiteSpace
width
wordBreak
wordSpacing
wordWrap
widows
writingMode
zIndex 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-01-20T08:38:10.603

一个简单的js就可以解决这个问题：

```
document.getElementById("idName").style.background = "blue"; 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-11-11T08:44:51.483

```
$(".class")[0].style.background = "blue"; 
```

# javascript - 在文本框中捕获 TAB 键

> ID：3362
> 
> 赞同：107
> 
> 时间：2008-08-06T13:27:05.453
> 
> 标签：javascript, user-interface

我希望能够使用`Tab`文本框中的键来制表四个空格。现在的方式是，Tab 键将我的光标跳转到下一个输入。

是否有一些 JavaScript 会在文本框中的 Tab 键冒泡到 UI 之前捕获它？

我了解某些浏览器（即 FireFox）可能不允许这样做。像`Shift`+`Tab`或`Ctrl`+这样的自定义组合键怎么样`Q`？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2008-08-16T13:55:26.087

即使您捕获`keydown`/`keyup`事件，这些是 tab 键触发的唯一事件，您仍然需要一些方法来防止默认操作（移至 tab 顺序中的下一个项目）发生。

在 Firefox 中，您可以调用`preventDefault()`传递给事件处理程序的事件对象的方法。在 IE 中，您必须从事件句柄中返回 false。JQuery 库`preventDefault`在其事件对象上提供了一个在 IE 和 FF 中工作的方法。

```
<body>
<input type="text" id="myInput">
<script type="text/javascript">
    var myInput = document.getElementById("myInput");
    if(myInput.addEventListener ) {
        myInput.addEventListener('keydown',this.keyHandler,false);
    } else if(myInput.attachEvent ) {
        myInput.attachEvent('onkeydown',this.keyHandler); /* damn IE hack */
    }

    function keyHandler(e) {
        var TABKEY = 9;
        if(e.keyCode == TABKEY) {
            this.value += "    ";
            if(e.preventDefault) {
                e.preventDefault();
            }
            return false;
        }
    }
</script>
</body> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-08-06T13:36:04.220

我宁愿制表符缩进不起作用，也不愿打破表单项之间的制表符。

如果要缩进以将代码放入 Markdown 框中，请使用`Ctrl`+ `K`（或 Mac 上的 ⌘K）。

就实际停止操作而言，当您从事件回调中返回 false 时，jQuery（Stack Overflow 使用）将阻止事件冒泡。这使使用多个浏览器的工作更轻松。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-08-06T13:35:44.157

前面的答案很好，但我是坚决反对将行为与表示混合的人之一（将 JavaScript 放入我的 HTML 中），因此我更喜欢将我的事件处理逻辑放入我的 JavaScript 文件中。此外，并非所有浏览器都以相同的方式实现事件（或 e）。您可能需要在运行任何逻辑之前进行检查：

```
document.onkeydown = TabExample;

function TabExample(evt) {
  var evt = (evt) ? evt : ((event) ? event : null);
  var tabKey = 9;
  if(evt.keyCode == tabKey) {
    // do work
  }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-08-06T13:36:33.640

我建议不要更改密钥的默认行为。我尽可能不触碰鼠标，所以如果你让我的 tab 键不移动到表单上的下一个字段，我会非常恼火。

然而，快捷键可能很有用，尤其是对于大型代码块和嵌套。Shift-TAB 是一个不好的选择，因为它通常会将我带到表单上的前一个字段。也许WMD编辑器上的一个新按钮可以插入带有快捷键的代码TAB？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-02-17T10:55:00.457

在 Mac 上的 Chrome 中，alt-tab 将制表符插入到`<textarea>`字段中。

这是一个：。哇！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2010-09-09T06:14:55.220

ScottKoon给出的最佳答案存在问题

就这个

```
} else if(el.attachEvent ) {
    myInput.attachEvent('onkeydown',this.keyHandler); /* damn IE hack */
} 
```

应该

```
} else if(myInput.attachEvent ) {
    myInput.attachEvent('onkeydown',this.keyHandler); /* damn IE hack */
} 
```

因此，它在 IE 中不起作用。希望 ScottKoon 更新代码

# javascript - JavaScript 中的 MAC 地址

> ID：3385
> 
> 赞同：118
> 
> 时间：2008-08-06T13:43:44.983
> 
> 标签：javascript, mac-address

我知道我们可以通过 IE（ActiveX 对象）获取用户的 MAC 地址。

有没有办法使用 JavaScript 获取用户的 MAC 地址？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2008-08-14T06:21:12.150

我同意所有先前的答案，如果您能够直接从 Javascript 执行此操作，这将是一个隐私/安全漏洞。我能想到的有两点：

*   使用 Java（带有签名的小程序）
*   使用签名的 Javascript，在 FF（和一般的 Mozilla）中获得比普通 JS 更高的权限（但设置起来相当复杂）

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2008-08-06T13:45:00.707

快速而简单的答案是否定的。

Javascript 是一种高级语言，无法访问此类信息。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2008-08-11T16:34:49.840

不，您无法在 JavaScript 中获取 MAC 地址，主要是因为 MAC 地址唯一标识了正在运行的计算机，因此这将是一个安全漏洞。

现在，如果您只需要一个唯一标识符，我建议您使用某种加密算法自己创建一个并将其存储在 cookie 中。

如果您确实需要知道计算机的 MAC 地址并且您正在为内部应用程序开发，那么我建议您使用外部组件来做到这一点：IE 的 ActiveX，Firefox 的 XPCOM（作为扩展安装）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-08-06T13:51:52.267

如果这是针对 Intranet 应用程序并且所有客户端都使用 DHCP，则可以向 DHCP 服务器查询给定 IP 地址的 MAC 地址。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-08-06T15:38:50.897

没有。ActiveX 能做到这一点的原因是 ActiveX 是一个运行在客户端机器上的小应用程序。

我想通过 JavaScript 访问这些信息将是一个安全漏洞。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-01-05T11:22:54.310

我正在寻找同样的问题并偶然发现了以下代码。

如何获取客户端 MAC 地址（Web）：

要获取客户端 MAC 地址，我们只能依靠 Microsoft 的 JavaScript 和 Active X 控件。只有在 IE 启用 Active X 时才能在 IE 中工作。由于 ActiveXObject 在 Firefox 中不可用，因此无法在 Firefox 中使用，并且在 IE 中可以正常工作。

此脚本仅适用于 IE：

```
function showMacAddress() {
    var obj = new ActiveXObject("WbemScripting.SWbemLocator");
    var s = obj.ConnectServer(".");
    var properties = s.ExecQuery("SELECT * FROM Win32_NetworkAdapterConfiguration");
    var e = new Enumerator(properties);
    var output;
    output = '<table border="0" cellPadding="5px" cellSpacing="1px" bgColor="#CCCCCC">';
    output = output + '<tr bgColor="#EAEAEA"><td>Caption</td><td>MACAddress</td></tr>';
    while (!e.atEnd()) {
        e.moveNext();
        var p = e.item();
        if (!p) continue;
        output = output + '<tr bgColor="#FFFFFF">';
        output = output + '<td>' + p.Caption; +'</td>';
        output = output + '<td>' + p.MACAddress + '</td>';
        output = output + '</tr>';
    }
    output = output + '</table>';
    document.getElementById("box").innerHTML = output;
}

showMacAddress();
```

```
<div id='box'></div>
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2022-01-31T14:20:41.403

不，您不能以另一种方式使用 JavaScript 获取用户的 MAC 地址，只需在 IE 浏览器中使用 Microsoft 的 Active X op

# sql-server - 如何让领先的通配符全文搜索在 SQL Server 中工作？

> ID：3400
> 
> 赞同：49
> 
> 时间：2008-08-06T13:52:29.067
> 
> 标签：sql-server, full-text-search

**注意：**我*正在*使用 SQL 的全文搜索功能、CONTAINS 子句和所有 - * 是全文中的通配符，% 仅用于 LIKE 子句。

我现在在几个地方读到 MS SQL 不支持“前导通配符”搜索（例如，使用“*overflow”来匹配“stackoverflow”）。我正在考虑使用[CLR 函数来添加正则表达式匹配](http://blogs.msdn.com/sqlclr/archive/2005/06/29/regex.aspx "SQL CLR 博客")，但我很想知道人们可能有什么其他解决方案。

**更多信息**：[您只能在单词或短语的末尾添加星号。](http://msdn.microsoft.com/en-us/library/ms552152.aspx "MSDN")- 连同我的经验经验：当匹配“myvalue”时，“my*”有效，但“（星号）值”返回不匹配，当做一个简单的查询时：

```
SELECT * FROM TABLENAME WHERE CONTAINS(TextColumn, '"*searchterm"'); 
```

因此，我需要一种解决方法。我只是在我的网站上的实际搜索页面上使用搜索 - 所以它的工作方式必须与 Google 的工作方式基本相同（在 Joe Sixpack 类型的用户看来）。没有那么复杂，但这种匹配真的不应该失败。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-09-23T23:11:43.040

仅针对前导通配符的解决方法：

*   将反转的文本存储在不同的字段中（或物化视图中）
*   在该列上创建全文索引
*   找到带有 * 的反转文本

    ```
    SELECT * 
    FROM TABLENAME 
    WHERE CONTAINS(TextColumnREV, '"mrethcraes*"'); 
    ```

当然有很多缺点，只是为了快速解决...

更不用说 CONTAINSTABLE ...

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-08-06T14:07:59.973

前导通配符的问题：它们无法被索引，因此您正在执行全表扫描。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-11-26T09:22:02.710

可以在单词或短语的末尾使用通配符“*”（前缀搜索）。

例如，此查询将查找所有“datab”、“database”、“databases”...

```
SELECT * FROM SomeTable WHERE CONTAINS(ColumnName, '"datab*"') 
```

但是，不幸的是，无法使用前导通配符进行搜索。

例如，此查询将找不到“数据库”

```
SELECT * FROM SomeTable WHERE CONTAINS(ColumnName, '"*abase"') 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-10-06T18:17:56.623

为了让这个线程更加清晰，从我在 2008 R2 上的测试来看，Franjo 在上面是正确的。在处理全文搜索时，至少在使用 CONTAINS 短语时，不能使用前导*，只能使用尾随*功能。* 是通配符，而不是全文中的 %。

有人建议忽略 *。情况似乎并非如此，我的结果似乎表明尾随 * 功能确实有效。我认为前导 * 被引擎忽略了。

然而，我增加的问题是，使用带有通配符的全文的相同查询在 2005 年（20 秒）工作相对较快，并且在将数据库迁移到 2008 R2 后减慢到 12 分钟。似乎至少有一个其他用户有类似的结果，他开始了我添加到的论坛帖子...... FREETEXT 仍然运行得很快，但是随着 2008 年处理 CONTAINS 中尾随 * 的方式，“似乎”发生了一些变化。他们在升级顾问中给出了各种各样的警告，他们“改进”了全文，所以你的代码可能会中断，但不幸的是，他们没有给你任何关于某些不推荐使用的代码等的具体警告......只是他们改变了它的免责声明，使用风险自负。

[http://social.msdn.microsoft.com/Forums/ar-SA/sqlsearch/thread/7e45b7e4-2061-4c89-af68-febd668f346c](http://social.msdn.microsoft.com/Forums/ar-SA/sqlsearch/thread/7e45b7e4-2061-4c89-af68-febd668f346c)

也许，这是与这些问题相关的最接近的 MS 命中... [http://msdn.microsoft.com/en-us/library/ms143709.aspx](http://msdn.microsoft.com/en-us/library/ms143709.aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-06T13:57:28.683

**注意**`CONTAINS`：这是我在修订版 #2 中引入关键字之前为问题的原始版本 #1 提交的答案。事实上，它仍然是准确的。

SQL Server 中的通配符是`%`符号，它可以正常工作，无论是前导、尾随还是其他。

也就是说，如果您要进行任何形式的严肃全文搜索，那么我会考虑使用全文索引功能。使用`%`和`_`通配符将导致您的数据库受到严重的性能影响。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-06T14:03:59.123

值得记住的一件事是，与其他通配符用法相比，领先的通配符查询具有显着的性能优势。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T00:22:38.610

仅供参考，Google 不会进行任何子字符串搜索或截断，无论是向右还是向左。它们有一个通配符 * 来查找短语中的未知单词，但不是单词。

谷歌与大多数全文搜索引擎一样，根据单词的字母顺序建立了一个倒排索引，并带有指向其源文档的链接。二进制搜索速度很快，即使对于巨大的索引也是如此。但是在这种情况下真的很难做到左截断，因为它失去了索引的优势。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-04T23:59:40.290

作为存储过程中的参数，您可以将其用作：

```
ALTER procedure [dbo].[uspLkp_DrugProductSelectAllByName]
(
    @PROPRIETARY_NAME varchar(10)
)
as
    set nocount on
    declare @PROPRIETARY_NAME2 varchar(10) = '"' + @PROPRIETARY_NAME + '*"'

    select ldp.*, lkp.DRUG_PKG_ID
    from Lkp_DrugProduct ldp
    left outer join Lkp_DrugPackage lkp on ldp.DRUG_PROD_ID = lkp.DRUG_PROD_ID
    where contains(ldp.PROPRIETARY_NAME, @PROPRIETARY_NAME2) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-08T15:34:28.997

在全文搜索方面，对我而言，没有什么比[Lucene](http://lucene.apache.org)更好的了。有一个[可用的 .Net 端口](http://incubator.apache.org/projects/lucene.net.html)与使用 Java 版本创建的索引兼容。

您必须创建/维护索引涉及一些工作，但搜索速度非常快，您可以创建各种有趣的查询。甚至索引速度也相当不错——我们每天只需完全重建一次索引，不用担心更新它们。

例如，[此搜索功能](http://www.wateronline.com/Search.mvc?keyword=wastewater)由 Lucene.Net 提供支持。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-02T14:20:02.597

如果您可以访问全文搜索引擎的单词列表，您可以在此列表上进行“喜欢”搜索，并将数据库与找到的单词匹配，例如带有以下单词的表“单词”：

```
 pie
    applepie
    spies
    cherrypie
    dog
    cat 
```

要在 fts 表 'full_text' 上匹配此数据库中包含 'pie' 的所有单词，并带有字段 'text'：

```
 to-match <- SELECT word FROM words WHERE word LIKE '%pie%'
    matcher = ""
    a = ""
    foreach(m, to-match) {
      matcher += a
      matcher += m
      a = " OR "
    }
    SELECT text FROM full_text WHERE text MATCH matcher 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-18T17:34:27.467

或许下面的链接将为这种通配符的使用提供最终答案：[执行 FTS 通配符搜索](https://blogs.msdn.microsoft.com/sqlforum/2011/02/27/faq-how-can-i-perform-wildcard-searches-in-full-text-search/)。

请注意以下段落：“但是，如果您指定“<em>Chain”或“Chain”，您将不会得到预期的结果。星号将被视为普通标点符号而不是通配符。“

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2008-08-06T15:08:11.130

来自 SQL Server 联机丛书：

> 要在 Microsoft SQL Server 2005 中编写全文查询，您必须学习如何使用 CONTAINS 和 FREETEXT Transact-SQL 谓词，以及 CONTAINSTABLE 和 FREETEXTTABLE 行集值函数。

这意味着上面使用 % 和 _ 编写的所有查询都不是有效的全文查询。

下面是调用 CONTAINSTABLE 函数时查询的样例。

> SELECT RANK , * FROM TableName , CONTAINSTABLE (TableName, *, ' "*WildCard" ') searchTable WHERE [KEY] = TableName.pk ORDER BY searchTable.RANK DESC

为了让 CONTAINSTABLE 函数知道我正在使用通配符搜索，我必须将它用双引号引起来。我可以在开头或结尾使用通配符 *。在为 CONTAINSTABLE 函数构建搜索字符串时，您还可以做很多其他事情。您可以搜索靠近另一个词的词，搜索屈折词（驱动 = 驱动器、驱动器、驾驶和驱动），以及搜索另一个词的同义词（金属可以有铝和钢等同义词）。

我刚刚创建了一个表，在表上放置了一个全文索引并进行了几次测试搜索，没有出现问题，因此通配符搜索按预期工作。

[更新]

我看到您已经更新了您的问题，并且知道您需要使用其中一项功能。

您仍然可以在开头使用通配符进行搜索，但如果该单词不是通配符后面的完整单词，则必须在末尾添加另一个通配符。

```
Example:  "*ildcar" will look for a single word as long as it ends with "ildcar".

Example:  "*ildcar*" will look for a single word with "ildcar" in the middle, which means it will match "wildcard".  [Just noticed that Markdown removed the wildcard characters from the beginning and ending of my quoted string here.] 
```

[更新#2]

Dave Ward - 使用通配符和其中一个功能不应该是一个巨大的打击。如果我只用“*”创建了一个搜索字符串，它不会返回所有行，在我的测试用例中，它返回 0 条记录。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2008-08-06T14:00:57.600

% 匹配任意数量的字符 _ 匹配单个字符

我从未使用过全文索引，但您只需使用内置的 T-SQL 字符串函数即可完成相当复杂和快速的搜索查询。

# javascript - Internet Explorer 中的 JavaScript 故障排除工具

> ID：3404
> 
> 赞同：43
> 
> 时间：2008-08-06T13:56:42.210
> 
> 标签：javascript, internet-explorer, debugging

我大量使用 Firebug 和 Mozilla JS 控制台，但时不时会遇到一个仅限 IE 的 JavaScript 错误，这真的很难找到（例如：*第 724 行的错误*，而源 HTML 只有 200 行）。

我很想有一个用于 Internet Explorer 的轻量级 JS 工具（*a la* firebug），如果我遇到错误然后卸载，我可以在几秒钟内将它安装在客户端的 PC 上。一些 Microsoft 工具需要一些严重的下载和配置时间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-08-06T13:59:47.213

您可能会发现[Firebug Lite](http://getfirebug.com/lite.html)对此很有用。

在用户机器上进行调试时，它的小书签应该特别有用。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-15T21:16:02.887

从 Internet Explorer 8 开始，IE 就提供了一组令人印象深刻的 JavaScript 调试、分析等工具。与大多数其他浏览器一样，可以通过按键盘上的 F12 访问开发人员工具。

### 脚本选项卡

脚本选项卡可能是您感兴趣的，尽管控制台、分析器和网络选项卡在调试应用程序时也有很多用途。

![在此处输入图像描述](../Images/9d8022b2b25019620c1561c3fad5cec2.png)

在脚本选项卡中，您可以：

*   格式化 JavaScript 以使其更具可读性
*   在页面上从源到源移动各种资源
*   插入断点
*   在单步执行时移入和移过代码行
*   观察变量
*   检查调用堆栈以查看代码是如何执行的
*   切换断点
*   和更多...

### 控制台选项卡

当您需要对应用程序执行一些任意代码时，控制台选项卡非常有用。我用它来检查某些方法的返回，甚至在 Stack Overflow 上快速测试答案的解决方案。

![在此处输入图像描述](../Images/44dec9b43c83fae45831e7608786b4d1.png)

### 探查器选项卡

如果您正在寻找长时间运行的进程，或者尝试优化您的代码以更顺畅地运行或减少对资源密集型方法的调用，该配置文件非常棒。打开任何页面，然后单击 Profiler 选项卡中的“开始分析”以开始记录。

在分析器工作时，您可以在页面上移动，执行常见操作。当你觉得你已经记录了足够多时，点击“停止分析”。然后，您将看到所有已运行函数的摘要或调用树。您可以按各种列快速对该数据进行排序：

![在此处输入图像描述](../Images/98119ff58f8dc5a5d42c5dffe65982ad.png)

### 网络选项卡

网络选项卡将记录您的站点/应用程序上的流量。它对于查找未下载、未挂起的文件或跟踪异步请求的数据非常方便。

在此选项卡中，您还可以在摘要视图和详细视图之间移动。在详细视图中，您可以检查随请求和响应一起发送的标头。您可以查看 cookie 信息、检查事件时间等。

![在此处输入图像描述](../Images/a18a834fc30e8e03f392690389b08405.png)

我并没有真正做到 IE 开发者工具正义 - 有很多未被发现的地方。不过，我鼓励您检查它们，并使它们成为您开发的一部分。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-11T16:56:24.960

我会推荐[Companion JS](http://www.my-debugbar.com/wiki/CompanionJS/HomePage)。

这是[调试栏](http://www.my-debugbar.com/wiki/Doc/HomePage)的免费版本，但我发现它更易于使用并且具有我需要的功能。非常适合在 IE 中测试小的 JavaScript 片段，就像我在 Firefox 中使用 Firebug 一样。

**5 年后编辑**：我现在使用 Internet Explorer 集成开发人员工具。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-06T13:58:57.167

IE 8 应该有更好的工具，但是 IE Developer Toolbar 还是不错的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-10-12T14:34:10.407

我同时使用[Microsoft Script Debugger](http://www.microsoft.com/downloads/details.aspx?FamilyID=2f465be0-94fd-4569-b3c4-dffdf19ccd99&displaylang=en)和[FireBug Lite](http://getfirebug.com/lite.html)，这取决于我正在调试的内容。两者都是很棒的工具 - 尝试它们并使用您喜欢的东西。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-02-15T16:53:53.453

在 IE8 中只需按 F12！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-16T00:32:11.833

1.  转到工具-> Internet 选项...-> 高级-> 启用脚本调试 (Internet Explorer)

然后在发生错误时附加 Visual Studio 调试器。

如果您使用的是 IE 8，请安装开发人员工具栏，因为它具有内置调试器。

# ruby-on-rails - Ruby On Rails 与 Windows Vista - 最佳设置？

> ID：3408
> 
> 赞同：17
> 
> 时间：2008-08-06T13:59:16.793
> 
> 标签：ruby-on-rails, windows, ruby, ide

您认为在 Win Vista 环境中 RoR 的最佳设置是什么？我已经尝试了 radrails eclipse 插件，但它对我来说似乎太笨重了，我也开始只使用 Textpad 和命令行，但我已经习惯了使用一些 IDE。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-03T12:59:40.110

我不知道“最佳”，因为这是一个主观问题，但我可以告诉你我使用和推荐的设置：

**编辑器**：[E 文本编辑器](http://e-texteditor.com)
TextMate 似乎是 Mac 上 Rails 的首选编辑器。E 文本编辑器本质上是用于 Windows 的 TextMate。它的捆绑包与 TextMate 的捆绑包广泛兼容，包括基本安装中包含的 Rails 2 捆绑包。

或者，如果您进入整个 Visual Studio 生态系统，那么[**Steel PE 中的 Ruby**](http://www.rubyinside.com/ruby-in-steel-pe-free-visual-studio-based-ruby-and-rails-ide-for-windows-1228.html)可能是更好的选择。这是一个非常棒的一体化软件包，现在实际上随 Visual Studio（精简版）一起提供。

**环境**：运行 Ubuntu Server的[VirtualBox](http://www.virtualbox.org/)
部署 Rails 应用程序在最好的时候可能会很痛苦；将 Rails 应用程序从 Windows 环境部署到 *nix 服务器更糟糕。另外，[在 Windows 上运行 Rails 应用程序很慢](http://railsforum.com/viewtopic.php?id=7219)。运行测试很慢。所以我使用 VirtualBox 在我的 Windows 机器上托管一个虚拟机，尽可能地反映我的目标部署环境。[在我的例子中，我运行 Ubuntu Server，因为在SliceHost wiki](http://articles.slicehost.com/ubuntu-hardy)上有一组非常好的分步教程，用于启动和运行完整的基于 Ubuntu 的 Rails 堆栈。

以下是使用 VM 进行开发的好处：

*   我将网络驱动器映射到 VM，以便我可以使用 E 文本编辑器直接从 Windows 编辑其上的代码。VM 的行为和感觉就像一个命令行窗口。因此，您不会觉得自己处于完全陌生的环境中。
*   它运行 Rails 和其他 Ruby 脚本（如测试）比在 Windows 中本地运行更快
*   一切都包含在内且可[快照](http://servervirtualization.blogs.techtarget.com/2008/06/25/getting-to-know-sun-xvm-virtualbox-snapshots/)，因此我可以进行试验并通常玩耍而不必担心破坏任何东西。如果确实发生了故障，我只是回滚到以前的良好状态。
*   它几乎不使用任何 RAM。它通常使用不到 100MB（它目前使用 ~43MB，但我没有启动 Rails 应用程序）。与 Firefox 相比，Firefox 通常会占用超过 200MB，您会意识到运行这样的基于 Linux 的 VM 非常高效。
*   我可以在机器之间移动我的环境
*   我有更强大的部署工作流程
*   我可以将 VM 限制为与我将托管的服务器具有完全相同数量的 RAM。例如，如果我要使用 SliceHost 256MB 切片，我会将 RAM 限制为 256MB。
*   我可以为不同的主机建立一个单独的环境。例如，如果我想在 Joyent 上托管，我可以构建一个 Open Solaris VM
*   Gems 和其他二进制文件不需要为您的目标环境重新编译
*   掌握 Rails 应用程序可能运行的环境是“一件好事”™。鉴于大多数（如果不是全部）商业 Rails 主机都运行某种 *nix 衍生产品，您会希望对 *nix 环境感到满意。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-06T14:15:34.000

[e-texteditor](http://e-texteditor.com)似乎正在成长为在 ruby​​ 上进行 Rails 开发的首选编辑器。可惜不是免费的。

除此之外，[RailsOnWindows](http://wiki.rubyonrails.org/rails/pages/RailsOnWindows)指南工作正常。到目前为止，Sqlite 是您开发的最佳选择：[RailsWithSqlite](http://wiki.rubyonrails.org/rails/pages/HowtoUseSQLite)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-06T14:42:56.953

如果您喜欢 IDE，则绝对推荐使用 NetBeans。它有很多[Ruby 功能](http://www.netbeans.org/features/ruby/index.html)，并且[只有 Ruby](http://download.netbeans.org/netbeans/6.1/final/)下载。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-11T23:44:20.423

可能没有明确的“正确”答案——这将取决于你喜欢如何发展。

然而，有趣的是，大多数“名字”Rails 人似乎在他们的 Mac 上使用 Textmate。所以一个相当强大的编辑器而不是一个 IDE。我怀疑这至少部分是因为 Rails 社区中相当强烈的 TDD 偏见——没有那么多调试是必要的，因为它们是在小的测试驱动步骤中工作的。无论如何，这就是理论。

Windows 中与 Textmate 最接近的类似物似乎是**e**。它的成本，但相当微不足道（口袋里的钱，如果我们诚实的话）。还有一个 30 天的免费评估。

我在大部分 Ruby/Rails 工作中都使用了 Scite，不要仅仅因为它是“默认”而丢弃它——选择它是有原因的。

至于 IDE，我无法在 Eclipse 中使用任何东西，NetBeans 似乎相当不错，我尝试了 Sapphire in Steel 的 beta 版，也很漂亮。我只是似乎不想在 IDE 中工作。奇怪的是，这与我在 C# 中工作的感觉相反。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-06T14:09:03.933

您只是在寻找一个 IDE，还是一个完整的堆栈（IDE、源代码控制、数据库、Web 服务器）？

如果只是一个 IDE，我会推荐[NetBeans](http://www.netbeans.org/)或[RadRails](http://www.aptana.com/rails)。两者都具有语法高亮、代码帮助、对 Rails 项目的支持、代码完成，以及您希望在全功能 IDE 中找到的所有其他内容。两者也是完全免费的。当然，两者都受到您确定的“庞大”问题的困扰。

如果是全栈，我会推荐 Subversion、MySql 和 Mongrel。这三个都非常简单，并且在 Windows 中得到了很好的支持。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-12T00:50:26.827

借调电子文本编辑器。我每天都使用它，它很棒（尽管并非没有它的 BUGS 份额）。

不过，对于 Rails 方面的事情，我实际上建议使用运行 linux 的虚拟机。Ubuntu 运行良好，唯一需要注意的是您必须`rubygems`手动安装，因为它不符合伟大的 debian 文件系统命名思想:-(

我建议这样做是因为如果你想做“高级”的事情，比如安装 ImageMagick/RMagick，或 memcached，或许多其他需要本地 C 库的插件，如果你在 Windows 上，它很快就会变得非常痛苦。

第二个原因是，除非您*非常*不典型，否则您的生产服务器也可能运行 linux。让您的开发环境尽可能与您的部署环境匹配是一种很好的做法，以帮助您更早、更轻松地发现和修复错误，并避免修复不会影响您的生产站点的错误（如 Windows 特定的错误）

Microsoft Virtual PC 和 VMWare 都有免费选项，它们运行良好，而且速度非常快，所以这不是问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-06T14:07:13.733

[Instant Rails](http://instantrails.rubyforge.org/wiki/wiki.pl)是快速入门的好方法。

我可以验证它在 Vista 上运行良好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-16T07:08:05.027

我建议你先安装 Ruby。然后安装 Rails。然后下载 Aptana 并安装它。之后，您可以从 Aptana 的起始页安装 RadRails。

使用 RadRails 时请参考 Packt 发布的《Aptana Radrails: An Ide for Rails Development》。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-06T14:03:43.210

你可能想看看这个：

[http://www.sapphiresteel.com/](http://www.sapphiresteel.com/)

还有免费的个人版

（更新：假设您已经拥有 Visual Studio Full Fat Edition）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-08-01T12:54:13.683

我是[Rubystack](http://bitnami.org/stack/rubystack)的贡献者之一，它是一个免费的 Windows 一体化安装程序，可以安装 Apache、MySQL、Ruby、Rails 和所有其他通常在开发环境中使用的第三方库（例如 Imagemagick）。你可能想试一试

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-21T08:29:52.783

RubyMine 3-4 +（RubyInstaller、用于构建 gems 的 DevKit、Postgres、msys git）在 Windows 7 上作为开发平台非常适合我。

好吧，除了 ruby​​ 在 windows 上有导轨时非常慢的问题。

# mysql - MySQL 中的多个更新

> ID：3432
> 
> 赞同：431
> 
> 时间：2008-08-06T14:12:09.903
> 
> 标签：mysql, sql, sql-update

我知道您可以一次插入多行，有没有办法在 MySQL 中一次更新多行（如在一个查询中）？

编辑：例如我有以下

```
Name   id  Col1  Col2
Row1   1    6     1
Row2   2    2     3
Row3   3    9     5
Row4   4    16    8 
```

我想将以下所有更新合并到一个查询中

```
UPDATE table SET Col1 = 1 WHERE id = 1;
UPDATE table SET Col1 = 2 WHERE id = 2;
UPDATE table SET Col2 = 3 WHERE id = 3;
UPDATE table SET Col1 = 10 WHERE id = 4;
UPDATE table SET Col2 = 12 WHERE id = 4; 
```

* * *

## 回答 #1

> 赞同：703
> 
> 时间：2008-08-06T14:33:41.560

是的，这是可能的 - 您可以使用 INSERT ... ON DUPLICATE KEY UPDATE。

使用您的示例：

```
INSERT INTO table (id,Col1,Col2) VALUES (1,1,1),(2,2,3),(3,9,3),(4,10,12)
ON DUPLICATE KEY UPDATE Col1=VALUES(Col1),Col2=VALUES(Col2); 
```

* * *

## 回答 #2

> 赞同：139
> 
> 时间：2008-09-17T14:55:02.717

由于您有动态值，因此您需要使用 IF 或 CASE 来更新要更新的列。它有点难看，但它应该工作。

使用您的示例，您可以这样做：

```
更新表 SET Col1 = CASE id
                          当 1 时 1
                          当 2 然后 2
                          当 4 然后 10
                          其他 Col1
                        结尾，
                 Col2 = 案例编号
                          当 3 那么 3
                          当 4 然后 12
                          ELSE Col2
                        结尾
             WHERE id IN (1, 2, 3, 4);

```

* * *

## 回答 #3

> 赞同：95
> 
> 时间：2013-06-24T20:14:12.363

这个问题很老，但我想用另一个答案来扩展这个话题。

我的观点是，实现它的最简单方法就是用事务包装多个查询。公认的答案`INSERT ... ON DUPLICATE KEY UPDATE`是一个不错的 hack，但应该意识到它的缺点和局限性：

*   如前所述，如果您碰巧使用表中不存在主键的行启动查询，则查询会插入新的“半生不熟”记录。可能不是你想要的
*   如果你有一个非空字段且没有默认值的表，并且不想在查询中触及该字段，那么`"Field 'fieldname' doesn't have a default value"`即使你根本不插入一行，你也会收到 MySQL 警告。如果您决定严格并在您的应用程序中将 mysql 警告转换为运行时异常，它将给您带来麻烦。

我对三个建议的变体进行了一些性能测试，包括`INSERT ... ON DUPLICATE KEY UPDATE`变体、带有“case / when / then”子句的变体和带有事务的幼稚方法。[您可以在此处](https://gist.github.com/imankulov/5849790)获得 python 代码和结果。总体结论是，带有 case 语句的变体的速度是其他两个变体的两倍，但是很难为其编写正确且注入安全的代码，因此我个人坚持使用最简单的方法：使用事务。

**编辑：**[Dakusan](https://stackoverflow.com/users/698632/dakusan)的调查结果证明我的性能估计不太有效。请参阅[此答案](https://stackoverflow.com/a/39831043/848010)以进行另一项更详细的研究。

* * *

## 回答 #4

> 赞同：82
> 
> 时间：2013-09-26T16:01:40.237

不知道为什么还没有提到另一个有用的选项：

```
UPDATE my_table m
JOIN (
    SELECT 1 as id, 10 as _col1, 20 as _col2
    UNION ALL
    SELECT 2, 5, 10
    UNION ALL
    SELECT 3, 15, 30
) vals ON m.id = vals.id
SET col1 = _col1, col2 = _col2; 
```

* * *

## 回答 #5

> 赞同：50
> 
> 时间：2016-10-03T11:58:05.807

以下所有内容都适用于 InnoDB。

我觉得了解三种不同方法的速度很重要。

有3种方法：

1.  插入：插入重复键更新
2.  TRANSACTION：您在其中对事务中的每条记录进行更新
3.  案例：对于 UPDATE 中的每个不同记录，您的案例/时间

我刚刚对此进行了测试，对我来说，INSERT 方法比 TRANSACTION 方法快**6.7 倍**。我尝试了一组 3,000 和 30,000 行。

TRANSACTION 方法仍然必须运行每个单独的查询，这需要时间，尽管它在执行时将结果批处理到内存或其他东西中。TRANSACTION 方法在复制和查询日志中也非常昂贵。

更糟糕的是，CASE 方法比具有 30,000 条记录的 INSERT 方法慢 41.1 倍（比**TRANSACTION**慢 6.1 倍）。在**MyISAM**中慢了 75 倍。INSERT 和 CASE 方法在大约 1,000 条记录时实现了收支平衡。即使有 100 条记录，CASE 方法也几乎没有更快的速度。

所以总的来说，我觉得 INSERT 方法是最好的，也是最容易使用的。查询更小更易于阅读，并且只占用 1 个操作查询。这适用于 InnoDB 和 MyISAM。

**奖励的东西：**

INSERT非默认字段问题的解决方法是暂时关闭相关的SQL模式：`SET SESSION sql_mode=REPLACE(REPLACE(@@SESSION.sql_mode,"STRICT_TRANS_TABLES",""),"STRICT_ALL_TABLES","")`. `sql_mode`如果您打算恢复它，请确保保存第一个。

至于我看到的其他评论说 auto_increment 使用 INSERT 方法上升，这在 InnoDB 中似乎是这种情况，但不是 MyISAM。

运行测试的代码如下。它还输出 .SQL 文件以消除 php 解释器开销

```
<?php
//Variables
$NumRows=30000;

//These 2 functions need to be filled in
function InitSQL()
{

}
function RunSQLQuery($Q)
{

}

//Run the 3 tests
InitSQL();
for($i=0;$i<3;$i++)
    RunTest($i, $NumRows);

function RunTest($TestNum, $NumRows)
{
    $TheQueries=Array();
    $DoQuery=function($Query) use (&$TheQueries)
    {
        RunSQLQuery($Query);
        $TheQueries[]=$Query;
    };

    $TableName='Test';
    $DoQuery('DROP TABLE IF EXISTS '.$TableName);
    $DoQuery('CREATE TABLE '.$TableName.' (i1 int NOT NULL AUTO_INCREMENT, i2 int NOT NULL, primary key (i1)) ENGINE=InnoDB');
    $DoQuery('INSERT INTO '.$TableName.' (i2) VALUES ('.implode('), (', range(2, $NumRows+1)).')');

    if($TestNum==0)
    {
        $TestName='Transaction';
        $Start=microtime(true);
        $DoQuery('START TRANSACTION');
        for($i=1;$i<=$NumRows;$i++)
            $DoQuery('UPDATE '.$TableName.' SET i2='.(($i+5)*1000).' WHERE i1='.$i);
        $DoQuery('COMMIT');
    }

    if($TestNum==1)
    {
        $TestName='Insert';
        $Query=Array();
        for($i=1;$i<=$NumRows;$i++)
            $Query[]=sprintf("(%d,%d)", $i, (($i+5)*1000));
        $Start=microtime(true);
        $DoQuery('INSERT INTO '.$TableName.' VALUES '.implode(', ', $Query).' ON DUPLICATE KEY UPDATE i2=VALUES(i2)');
    }

    if($TestNum==2)
    {
        $TestName='Case';
        $Query=Array();
        for($i=1;$i<=$NumRows;$i++)
            $Query[]=sprintf('WHEN %d THEN %d', $i, (($i+5)*1000));
        $Start=microtime(true);
        $DoQuery("UPDATE $TableName SET i2=CASE i1\n".implode("\n", $Query)."\nEND\nWHERE i1 IN (".implode(',', range(1, $NumRows)).')');
    }

    print "$TestName: ".(microtime(true)-$Start)."<br>\n";

    file_put_contents("./$TestName.sql", implode(";\n", $TheQueries).';');
} 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2008-08-06T14:14:33.737

```
UPDATE table1, table2 SET table1.col1='value', table2.col1='value' WHERE table1.col3='567' AND table2.col6='567' 
```

这应该对你有用。

[MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/update.html)中有多个表的参考。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2011-04-07T07:34:08.543

使用临时表

```
// Reorder items
function update_items_tempdb(&$items)
{
    shuffle($items);
    $table_name = uniqid('tmp_test_');
    $sql = "CREATE TEMPORARY TABLE `$table_name` ("
        ."  `id` int(10) unsigned NOT NULL AUTO_INCREMENT"
        .", `position` int(10) unsigned NOT NULL"
        .", PRIMARY KEY (`id`)"
        .") ENGINE = MEMORY";
    query($sql);
    $i = 0;
    $sql = '';
    foreach ($items as &$item)
    {
        $item->position = $i++;
        $sql .= ($sql ? ', ' : '')."({$item->id}, {$item->position})";
    }
    if ($sql)
    {
        query("INSERT INTO `$table_name` (id, position) VALUES $sql");
        $sql = "UPDATE `test`, `$table_name` SET `test`.position = `$table_name`.position"
            ." WHERE `$table_name`.id = `test`.id";
        query($sql);
    }
    query("DROP TABLE `$table_name`");
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-07-05T16:23:20.460

为什么没有人**在一个查询中提到多个语句**？

在 php 中，您使用`multi_query`mysqli 实例的方法。

来自[php 手册](http://php.net/manual/en/mysqli.quickstart.multiple-statement.php)

> MySQL 可选地允许在一个语句字符串中包含多个语句。一次发送多个语句可以减少客户端-服务器往返，但需要特殊处理。

这是更新 30,000 raw 中与其他 3 种方法相比的结果。可以在[此处](https://github.com/yanxurui/keepcoding/blob/master/php/mysql/multiple_update.php)找到代码，该代码基于@Dakusan 的回答

**交易：5.5194580554962
插入：0.20669293403625
案例：16.474853992462
多：0.0412278175354** 

如您所见，多语句查询比最高答案更有效。

如果您收到这样的错误消息：

```
PHP Warning:  Error while sending SET_OPTION packet 
```

您可能需要增加`max_allowed_packet`我机器中的 mysql 配置文件，`/etc/mysql/my.cnf`然后重新启动 mysqld。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2011-03-06T21:32:06.220

您可以更改一个名为“multi statement”的设置，它禁用 MySQL 的“安全机制”以防止（多个）注入命令。MySQL 的“出色”实现是典型的，它还阻止用户进行有效的查询。

这里（[http://dev.mysql.com/doc/refman/5.1/en/mysql-set-server-option.html](http://dev.mysql.com/doc/refman/5.1/en/mysql-set-server-option.html)）是有关设置的 C 实现的一些信息。

如果你使用的是 PHP，你可以使用 mysqli 来做多语句（我认为 php 已经与 mysqli 一起发布了一段时间）

```
$con = new mysqli('localhost','user1','password','my_database');
$query = "Update MyTable SET col1='some value' WHERE id=1 LIMIT 1;";
$query .= "UPDATE MyTable SET col1='other value' WHERE id=2 LIMIT 1;";
//etc
$con->multi_query($query);
$con->close(); 
```

希望有帮助。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-01-02T19:48:31.147

您可以为同一个表设置别名，以便为您提供要插入的 id（如果您正在进行逐行更新：

```
UPDATE table1 tab1, table1 tab2 -- alias references the same table
SET 
col1 = 1
,col2 = 2
. . . 
WHERE 
tab1.id = tab2.id; 
```

此外，很明显，您也可以从其他表中进行更新。在这种情况下，更新兼作“SELECT”语句，为您提供您指定的表中的数据。您在查询中明确说明更新值，因此第二个表不受影响。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-08-06T14:20:23.257

您可能还对在更新上使用连接感兴趣，这也是可能的。

```
Update someTable Set someValue = 4 From someTable s Inner Join anotherTable a on s.id = a.id Where a.id = 4
-- Only updates someValue in someTable who has a foreign key on anotherTable with a value of 4. 
```

编辑：如果您要更新的值不是来自数据库中的其他地方，则需要发出多个更新查询。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-08-09T10:16:59.350

是的..可以使用 INSERT ON DUPLICATE KEY UPDATE sql 语句.. 语法：INSERT INTO table_name (a,b,c) VALUES (1,2,3),(4,5,6) ON DUPLICATE KEY UPDATE a=值(a),b=值(b),c=值(c)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-03-15T16:59:23.193

采用

```
REPLACE INTO`table` VALUES (`id`,`col1`,`col2`) VALUES
(1,6,1),(2,2,3),(3,9,5),(4,16,8); 
```

请注意：

*   id 必须是主唯一键
*   如果您使用外键来引用表，REPLACE 删除然后插入，所以这可能会导致错误

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-06T19:43:08.670

现在最简单的方法

```
update my_table m, -- let create a temp table with populated values
    (select 1 as id, 20 as value union -- this part will be generated
     select 2 as id, 30 as value union -- using a backend code
     -- for loop 
     select N as id, X as value
        ) t
set m.value = t.value where t.id=m.id -- now update by join - quick 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-01-29T08:02:38.870

我从@newtover 那里得到答案，并使用 MySql 8 中的新 json_table 函数对其进行了扩展。这允许您创建一个存储过程来处理工作负载，而不是在代码中构建自己的 SQL 文本：

```
drop table if exists `test`;
create table `test` (
  `Id` int,
  `Number` int,
  PRIMARY KEY (`Id`)
);
insert into test (Id, Number) values (1, 1), (2, 2);

DROP procedure IF EXISTS `Test`;
DELIMITER $$
CREATE PROCEDURE `Test`(
    p_json json
)
BEGIN
    update test s
        join json_table(p_json, '$[*]' columns(`id` int path '$.id', `number` int path '$.number')) v 
        on s.Id=v.id set s.Number=v.number;
END$$
DELIMITER ;

call `Test`('[{"id": 1, "number": 10}, {"id": 2, "number": 20}]');
select * from test;

drop table if exists `test`; 
```

它比纯 SQL 慢了几毫秒，但我很乐意接受这一点，而不是在代码中生成 sql 文本。不确定它在处理大型记录集时的性能如何（JSON 对象的最大大小为 1Gb），但我在一次更新 10k 行时一直使用它。

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2008-08-06T14:18:21.217

以下将更新一个表中的所有行

```
Update Table Set
Column1 = 'New Value' 
```

下一个将更新 Column2 的值大于 5 的所有行

```
Update Table Set
Column1 = 'New Value'
Where
Column2 > 5 
```

有[Unkwntech](https://stackoverflow.com/questions/3432/multiple-updates-in-mysql#3439)更新多个表的所有例子

```
UPDATE table1, table2 SET
table1.col1 = 'value',
table2.col1 = 'value'
WHERE
table1.col3 = '567'
AND table2.col6='567' 
```

* * *

## 回答 #17

> 赞同：-4
> 
> 时间：2008-08-06T14:22:37.837

```
UPDATE tableName SET col1='000' WHERE id='3' OR id='5' 
```

这应该可以实现您想要的。只需添加更多的ID。我已经测试过了。

* * *

## 回答 #18

> 赞同：-6
> 
> 时间：2013-08-28T15:40:27.173

```
UPDATE `your_table` SET 

`something` = IF(`id`="1","new_value1",`something`), `smth2` = IF(`id`="1", "nv1",`smth2`),
`something` = IF(`id`="2","new_value2",`something`), `smth2` = IF(`id`="2", "nv2",`smth2`),
`something` = IF(`id`="4","new_value3",`something`), `smth2` = IF(`id`="4", "nv3",`smth2`),
`something` = IF(`id`="6","new_value4",`something`), `smth2` = IF(`id`="6", "nv4",`smth2`),
`something` = IF(`id`="3","new_value5",`something`), `smth2` = IF(`id`="3", "nv5",`smth2`),
`something` = IF(`id`="5","new_value6",`something`), `smth2` = IF(`id`="5", "nv6",`smth2`) 
```

// 你只是在 php 中构建它

```
$q = 'UPDATE `your_table` SET ';

foreach($data as $dat){

  $q .= '

       `something` = IF(`id`="'.$dat->id.'","'.$dat->value.'",`something`), 
       `smth2` = IF(`id`="'.$dat->id.'", "'.$dat->value2.'",`smth2`),';

}

$q = substr($q,0,-1); 
```

所以你可以用一个查询更新孔表

# google-maps - 基于 SSL 的 Google 地图选项

> ID：3437
> 
> 赞同：20
> 
> 时间：2008-08-06T14:14:29.383
> 
> 标签：google-maps, iframe, ssl, https

我们最近发现 Google Maps API 不能很好地与 SSL 配合使用。很公平，但是其他人有效地使用了哪些选项来克服这个问题？

> [Maps API 是否可以通过 SSL (HTTPS) 工作？](http://code.google.com/support/bin/answer.py?answer=65301&topic=10945)
> 
> 目前，地图 API 无法通过安全 (SSL) 连接使用。如果您在安全站点上运行 Maps API，浏览器可能会警告用户屏幕上的非安全对象。

我们考虑了以下选项

1.  拆分页面，以便信用卡收集（SSL 的要求）与 Google 地图不在同一页面上。
2.  切换到另一个地图提供程序，例如 Virtual Earth。有传言说他们支持 SSL。
3.  使用 IFRAME 玩花样。听起来很笨拙。
4.  将呼叫代理到 Google。听起来开销很大。

是否还有其他选择，或者是否有人对我们考虑过的选项有深入了解？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-21T17:32:37.307

我同意前两个答案，在这种情况下，从可用性的角度来看，将这两个功能分成单独的屏幕可能会更好。您确实希望您的用户专注于输入完整且准确的信用卡信息，而在同一屏幕上显示地图可能会分散注意力。

尽管如此，Virtual Earth 确实完全支持 SSL。要启用它，您只需将脚本引用从 http:// 更改为 https:// 并将 &s=1 附加到 URL，例如

```
<script src="http://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.1" type="text/javascript"></script> 
```

变成

```
<script src="https://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.1&s=1" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2011-03-17T09:51:34.987

只是添加到这个

[http://googlegeodevelopers.blogspot.com/2011/03/maps-apis-over-ssl-now-available-to-all.html](http://googlegeodevelopers.blogspot.com/2011/03/maps-apis-over-ssl-now-available-to-all.html)

还没有尝试将我的 SSL 地图（最终使用 Bing 地图 api）迁移回 Google，但很可能会成功。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-06T19:37:27.733

这似乎是一个业务需求/可用性问题 - 您是否有充分的理由将地图放在信用卡页面上？如果是这样，也许值得解决一些技术问题。

您可以尝试使用[Mapstraction](http://www.mapstraction.com/)，这样您就可以切换到支持 SSL 的提供商，如果他们将来支持它，请切换回 Google。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-06T14:40:20.720

我会选择你的第一个解决方案。这允许用户专注于输入他们的信用卡详细信息。

然后，您可以将它们转移到另一个网页，该网页会询问或提供与 Google 地图相关的更多信息。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-09-30T19:32:07.683

如果您是[Google Maps API Premier](http://www.google.com/enterprise/earthmaps/maps.html)客户，则支持 SSL。我们使用它并且效果很好。

在 Google 提供 SSL 之前，我们代理了所有流量，这可以接受。当您使用这种方法时，您将失去 Google 的 CDN 的优势，并且您的 IP 可能会被禁止，因为看起来您正在产生大量流量。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-03T17:26:29.380

如果您在显示 Google 地图时在 IE 9 上收到安全警报，请使用

```
<script src="https://maps.google.com/maps?file=api&v=2&hl=en&tab=wl&z=6&sensor=true&key=<?php echo $key;?>
" type="text/javascript"></script> 
```

代替

```
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE"
  type="text/javascript"></script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-03T07:56:26.933

我刚刚删除了 http 协议，它起作用了！

由此：

```
<script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script> 
```

对此：

```
<script src="//maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script> 
```

# xhtml - 无效的 XHTML 可以接受吗？

> ID：3448
> 
> 赞同：21
> 
> 时间：2008-08-06T14:21:18.823
> 
> 标签：xhtml, markup

我注意到很多网站，包括 SO，使用 XHTML 作为他们的标记语言，然后不遵守规范。只需浏览 SO 的源代码，就会缺少段落、无效元素等的结束标签。

那么，如果工具（和开发人员）要生成无效标记，是否应该使用 XHTML 文档类型？浏览器是否应该更坚定地接受糟糕的标记？

在任何人大喊伪君子之前，我的博客有一个涉及 captha 的无效标记（或者我上次检查时确实如此），其中涉及到 noscript 标签的样式。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-08-06T14:46:40.660

使用有效标记的[原因](https://validator.w3.org/docs/why.html)有很多。我最喜欢的是它允许您将验证用作回归测试的一种形式，一旦错误达到临界质量，就可以防止“delta rot”的标记等价物导致真正的渲染问题。确实，允许诸如拼写错误和错误嵌套/未关闭的标签之类的“懒惰”错误累积是很草率的。[有效标记是识别热情的程序员](https://web.archive.org/web/20100913081355/http://stackoverflow.com:80/questions/3247/identifying-passionate-programmers)的一种方式。

还有调试问题：有效标记还为您提供了一个稳定的基线，可以用来解决不可避免的跨浏览器兼容性问题。任何珍惜时间的 Web 开发人员都不应该在没有首先确保标记至少在*语法上*有效的情况下开始调试浏览器兼容性问题——任何其他无效标记都应该有充分的理由出现。

（顺便说一句，stackoverflow.com 未能通过这两项测试，并且[拒绝了解决问题](http://stackoverflow.uservoice.com/pages/general/suggestions/14740)[的](http://stackoverflow.uservoice.com/pages/general/suggestions/14739) 建议。）

*综上所述，要回答您的具体问题，除非您计划生成有效（或至少*格式正确）的标记，否则可能不值得使用其中一种 XHTML 文档类型。XHTML 的主要优势源于 XHTML 是 XML 的事实，它允许通过使用 XML 的工具和技术对其进行处理和转换。如果您不打算使您的 XHTML 格式良好的 XML，那么选择该 doctype 就没有什么意义了。最新的 HTML 4 规范可能会满足您的所有需求，而且更加宽容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-02T09:56:54.997

我们应该始终尝试使其根据标准进行验证。我们将确保该网站将在当前浏览器和未来浏览器上正常显示和运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-02T10:11:45.473

我不认为，如果你指定了一个文档类型，那么没有任何理由不遵守这个文档类型。

使用 XHTML 使自动错误检测变得容易，每次更改都可以自动检查无效标记。这可以防止错误，尤其是在使用自动生成的内容时。对于使用模板引擎（JSP、ASP.NET StringTemplate 等）的 Web 开发人员来说，复制/粘贴一个关闭标记太少或太多是非常容易的。当这是您唯一的错误时，可以立即检测并修复它。我曾经为一个每页有 165 个验证错误的网站工作，其中 2 或 3 个是实际错误。这些在其他错误的混乱中很难找到。自动验证可以从源头上防止这些错误。

不用说，选择一个标准并坚持它永远不会有利于与其他系统（屏幕抓取器、屏幕阅读器、搜索引擎）的互操作性，而且我从来没有遇到过这样的情况：使用 CSS 解决方案的有效语义 XHTML 对所有人来说都是不可能的主流浏览器。

显然，在处理复杂系统时，并不总是可以坚持使用您的 doctype，但这主要是由于开发这些系统的不同部分的不同团队之间的不正确沟通，或者很可能是遗留系统。在最后一种情况下，最好隔离这些情况并相应地更改您的文档类型。

务实而不是仅仅因为有人这么说就坚持 XHTML 是件好事，不计成本，但以目前关于 CSS 和浏览器、测试和验证工具的知识，大多数时候收益远大于成本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-15T15:34:30.250

你可以说我对 XHTML 有效性有强迫症。我发现代码无效的大部分问题来自于程序员不知道 HTML 和 XHTML 之间的区别。我一直在编写 100% 有效的 XHTML 和 CSS 或一段时间，并且在使用其他浏览器时从未遇到过任何重大的渲染问题。如果您保持所有内容有效，并且不要尝试任何太奇特的 css 明智，您将节省大量修复时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-06T14:29:44.780

我根本不会使用 XHTML 来减轻自己的哲学压力。无论如何，并不是任何浏览器都将其视为 XHTML。

如果页面以 application/xhtml+xml 格式发送，浏览器将拒绝糟糕的标记，但它们很少这样做。这可以。

我会更关心诸如 CSS 和 JavaScript 与 Stack Overflow 的内联使用之类的事情，只是因为它们使维护变得更加困难。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-06T14:35:35.923

尽管我相信努力实现有效的 XHTML 和 CSS，但由于多种原因，这通常很难做到。

*   首先，一些内容可以通过 AJAX 加载。有时，片段没有正确插入到现有的 DOM 中。
*   您正在查看的 HTML 可能并非全部在同一个文档中生成。例如，页面可以由多个组件或模板组成，然后在浏览器呈现它之前组合在一起。这不是一个借口，但您不能假设您看到的 HTML 是一次性手动编码的。
*   如果 Markdown 生成的某些代码无效怎么办？你不能责怪 Stack Overflow 没有生成有效的代码。
*   最后，DOCTYPE 的目的不是简单地说“嘿，我正在使用有效代码”，而是让浏览器了解您正在尝试执行的操作，以便它至少可以接近正确解析该信息。

我认为大多数开发人员不会指定 DOCTYPE，然后明确地不遵守它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-06T14:42:25.130

虽然我同意“如果它渲染得很好，那就不用担心”的说法，但是遵循标准是有好处的，即使它现在可能还没有得到完全的支持。您仍然可以使用 Table 进行布局，但它不好是有原因的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-11T13:16:24.397

No, you should not use XHTML if you can't guarantee well-formedness, and in practice you can't guarantee it if you don't use XML serializer to generate markup. Read [about producing XML](http://hsivonen.iki.fi/producing-xml/).

Well-formedness is *the* thing that differentiates XHTML from HTML. XHTML with "just one" markup error ceases to be XHTML. *It has to be perfect every time*.

If "XHTML" site appears to work with some errors, it's because [browsers ignore the DOCTYPE](http://www.xml.com/pub/a/2003/03/19/dive-into-xml.html) and interpret page as HTML.

See [XHTML proxy](http://schneegans.de/xp/) that forces interpretation of pages as XHTML. Most of the time [they fail miserably](http://schneegans.de/xp/?url=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F3448%2Facceptable-for-invalid-xhtml&ct=application%2Fxml). This is one of the reason why future of XHTML is uncertain and [why development of HTML has been resumed](http://dig.csail.mit.edu/breadcrumbs/node/166).

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-06T14:25:40.577

这取决于。我的博客有这个[问题，](http://www.stum.de/2008/02/29/valid-xhtml-and-youtube-embedding/) YouTube 视频导致 XHTML 无效，但它呈现得很好。另一方面，我有一个“有效 XHTML”链接，并且“有效 XHTML”声明和无效 XHTML 的组合并不专业。

由于 SO 并不声称是有效的，我认为这是可以接受的，但就我个人而言，如果我是 Jeff，我会感到困扰并尝试修复它，即使它在现代浏览器中看起来不错，但有些人宁愿继续前进并实际完成任务而不是修复不存在的错误。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-06T14:29:09.697

只要它在 IE、FF、Safari 中运行（在此处插入其他浏览器）就可以了。验证不如让它在多个浏览器中正确呈现重要。例如，仅仅因为它是有效的，并不意味着它可以在 IE 中正常工作。

在您的网站上运行 Google Analytics 或类似工具，查看您的用户使用哪种浏览器，然后判断您最需要支持哪些浏览器，并在您有空闲时间时担心不太重要的浏览器。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-06T14:29:56.543

我说，如果它渲染得很好，那么它是否像素完美都没关系。

建立一个网站并按照您想要的方式运行需要一段时间，返回并进行更改会稍微改变页面呈现的方式，然后您必须解决*这些*问题。

现在，我并不是说您应该构建草率的网页，但我认为没有理由修复未损坏的内容。浏览器不会在不久的将来随时放弃对纠错的支持。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-08-06T14:30:23.203

我不明白为什么当某些浏览器在正确呈现标准代码时仍然存在问题时，每个人都试图让他们的网站符合标准。我从事网页设计已经有 10 年了，我停止了双重编码（阅读：hacking css），并改变了愚蠢的东西，以便我可以在我的网站上放置一个按钮。

我相信使用 < div> 无论如何都会导致您无效，并且如果没有它，执行任何主要的 JavaScript/AJAX 都会变得有点困难。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-08-06T14:33:33.947

有很多标准，而且它们的“执行”或支持很差，我认为这并不重要。不要误会我的意思，我认为应该有标准，但因为它们没有被强制执行，没有人遵循它们，这是一个巨大的螺旋式下降。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-08-06T14:37:08.603

对于 99.999% 的网站来说，这真的无关紧要。唯一一次重要的是，我通过 HTMLTidy 运行 HTML 输入以对其进行 XHTML 化，然后对其进行处理。

几乎，这是老程序员的公理：不信任任何输入。

# sql-server - 适用于 Mac OS X 的 SQL 客户端，可与 MS SQL Server 配合使用

> ID：3452
> 
> 赞同：478
> 
> 时间：2008-08-06T14:25:17.457
> 
> 标签：sql-server, macos

如何使用 Mac OS X 连接到远程 SQL 服务器？我真的不需要 GUI，但如果有颜色编码和结果集网格就好了。我宁愿不必使用虚拟机。

是否有适用于 MS SQL Server 的 Mac OS X 的 SQL 客户端？

* * *

## 回答 #1

> 赞同：353
> 
> 时间：2008-08-29T08:05:06.120

让我们一起研究一个规范的答案。

### 原生应用

*   [用于 MSSQL 的 SQLPro](http://www.macsqlclient.com/)
*   [Navicat](http://www.navicat.com/products/navicat-for-sqlserver)
*   [瓦伦蒂娜工作室](http://www.valentina-db.com/en/valentina-studio-overview)
*   [表加](https://tableplus.io)

### 基于 Java

*   [Oracle SQL 开发人员](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)（免费）
*   [SQuirrel SQL](http://squirrel-sql.sourceforge.net/)（免费、开源）
*   [剃刀 SQL](http://razorsql.com/)
*   [数据库可视化器](http://www.dbvis.com/)
*   [DBeaver](http://dbeaver.jkiss.org/)（免费，开源）
*   [SQL Workbench/J](http://www.sql-workbench.net)（免费、开源）
*   [JetBrains DataGrip](https://www.jetbrains.com/datagrip/)
*   [元数据库](http://www.metabase.com/)（免费，开源）
*   [Netbeans](https://netbeans.org)（免费、开源、完整的开发环境）

### 基于电子

*   [带有 mssql 扩展的 Visual Studio Code](https://docs.microsoft.com/en-us/sql/linux/sql-server-linux-develop-use-vscode)
*   [Azure 数据工作室](https://docs.microsoft.com/en-us/sql/azure-data-studio/what-is)
*   [SQLectron](https://sqlectron.github.io)

（TODO：添加下面提到的其他人）

* * *

## 回答 #2

> 赞同：181
> 
> 时间：2008-08-06T15:31:49.400

基于 Java 的[Oracle SQL Developer](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)有一个支持 SQL Server 的插件模块。我经常在我的 Mac 上使用它。它也是免费的。

以下是安装 SQL Server 插件的方法：

*   运行 SQL 开发人员
*   转到此菜单项：Oracle SQL Developer/Preferences/Database/Third-party JDBC Drivers
*   单击帮助。
*   它将具有指向MySQL、SQL Server 等的[JAR文件的指针。](http://en.wikipedia.org/wiki/JAR_%28file_format%29)
*   SQL Server JAR 文件位于[http://sourceforge.net/projects/jtds/files/](http://sourceforge.net/projects/jtds/files/)

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2008-08-29T08:10:05.187

这将是我连续回答的第二个问题，所以我认为值得指出的是，我与这个产品没有任何关系，但我使用它并且喜欢它，并且认为它也是这个问题的正确答案：[数据库可视化器](http://www.dbvis.com/)。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2010-03-26T08:25:32.640

当被问到这个问题时，几乎没有什么工具有价值。我最终还使用了 Fusion 和 Windows 客户端。我已经为 MAC 和 Linux 尝试了几乎所有东西，但从未发现任何值得的东西。其中包括 dbvisualizer、squirrel（特别糟糕，尽管我办公室里的 windows 讨厌者都对它发誓）、oracle SQL 开发人员和其他一些人。就我而言，与 Windows 上的 DBArtizan 相比，没有什么可比的，我准备将它与 Fusion 或 VirtualBox 一起使用。我不使用 MS 产品，因为它仅限于 MS SQL。

底线是没有免费的东西是值得的，大多数商业非 Windows 产品也不值得

然而，现在（2010 年 3 月）我相信 MAC 和 Linux 有两个重要的竞争者和有价值的版本，它们的成本很低。第一个是 Aqua Data Studio，每位用户的成本约为 450 美元，这勉强可以接受，但与 DBArtizan 和其他具有类似功能（但仅限 MS）的产品相比便宜。另一个是 RazorSQL，每位用户只需 69 美元。Aqua 数据工作室很好，但资源消耗大，基本上相当缓慢，并且具有非必要的功能，例如 ER 图表工具，在这方面非常糟糕。Razor 速度快如闪电，下载量仅为 16meg，拥有 SQL 开发人员所需的一切，包括 TSQL 编辑器。

因此，最大的赢家是 RazorSQL，售价 69 美元，非常物有所值，而且功能齐全。相信我，在等待了几年寻找便宜的非 Windows 替代 DBartizan 之后，我终于找到了一个，而且我一直很挑剔。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-02T04:36:42.030

我认为 MySQL 的 Sequel Pro 看起来很有趣。很难找到一种适用于所有这些数据库的工具（尤其是 SQL Server 2005 ......大多数人使用 SQL Server Management Studio，当然这只是 Windows）。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-04-23T20:15:29.160

我的雇主生产了一个简单的、[基于概念验证的 HTML5 SQL 客户端](http://wikis.openlinksw.com/UdaWikiWeb/HTML5ODBCExplorerSampleProg)，它可以通过我们也生产的[HTML5 WebDB-to-ODBC Bridge](http://wikis.openlinksw.com/UdaWikiWeb/InstallConfigODBCHTML5Bridge)用于 Web 浏览器主机上的任何 ODBC 数据源。这些组件是免费的，适用于 Mac、Windows 等。

适用于这里的许多其他答案——大多数人提到的 Type 1 JDBC-to-ODBC Bridge 是 Sun 内置并与 JVM 捆绑在一起的。JVM/JRE/JDK 文档一直建议不要使用此内置组件，除非在实验场景中或不存在其他选项时，因为此组件是作为概念验证构建的，并且从未打算用于生产用途。

我的雇主制作了一个企业级 JDBC 到 ODBC 桥，可作为[单层（完全安装在客户端应用程序主机上）](http://uda.openlinksw.com/jdbc-odbc-st/)或[多层（在客户端应用程序主机和 ODBC 数据源主机上拆分组件，](http://uda.openlinksw.com/jdbc-odbc-mt/)使任何 JVM 中的 JDBC 客户端应用程序能够使用 Mac、Windows、Linux 等上的 ODBC 数据源）。这个解决方案不是免费的。

All of the above can be used with the ODBC Drivers for [Sybase & Microsoft SQL Server](http://uda.openlinksw.com/odbc-sqlserver/) (or [other databases](http://uda.openlinksw.com/odbc/)) we also produce ...

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-05-02T06:58:58.350

[DbVisualizer](http://www.dbvis.com/)支持许多不同的数据库。有一个我以前用过的免费版本。[从这里下载](http://www.dbvis.com/download/)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-05-03T16:05:48.887

[Squirrel SQL](http://squirrel-sql.sourceforge.net)是一个基于 Java 的 SQL 客户端，我在 Windows 和 Linux 上都有很好的使用经验。由于它是 Java，它应该可以解决问题。

它是开源的。您可以同时运行与多个数据库的多个会话。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2010-07-11T06:47:06.830

我也投票给[RazorSQL](http://www.razorsql.com/)。它在许多方面都非常强大，并且实际上支持大多数数据库。我主要将它用于 SQL Server、MySQL 和 PostgreSQL。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2009-05-04T18:54:46.770

在过去两年左右的时间里，我使用[Navicat](http://en.wikipedia.org/wiki/Navicat) for MySQL 取得了很好的成功。UI 可以进行一些更新，但他们提供的所有工具和选项都让我觉得成本是合理的。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-08-22T14:11:15.143

我在 Windows 上使用[AquaFold](http://www.aquafold.com/)，但它基于 Java 并支持 Mac OS X。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-05-02T04:02:11.393

我为 MySQL 和 PostgreSQL 使用 Navicat 客户端，并且对它们很满意。“好”显然是主观的......你如何判断你的数据库客户？

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-07-25T16:06:54.380

我喜欢[SQLGrinder](http://www.sqlgrinder.com/)。

它是使用[Cocoa](http://en.wikipedia.org/wiki/Cocoa_%28API%29)构建的，因此与这里提到的所有基于 Java 的应用程序相比，它看起来好多了，感觉更像一个 Mac OS X 应用程序。

它使用 JDBC 驱动程序连接到 Microsoft SQL Server 2005、FrontBase、MySQL、OpenBase、Oracle、PostgreSQL 和 Sybase。

免费试用或 59 美元。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2010-10-22T02:07:21.517

我用过（[DB Solo](http://www.dbsolo.com)），我非常喜欢它。它只需 99 美元，可与许多更昂贵的工具相媲美。它支持 Oracle、SQL Server、Sybase、MySQL、PostgreSQL 等。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2011-07-31T19:04:52.687

我一直在使用 Oracle SQL Developer，因为用于 SQL Server 的 Microsoft 软件目前在 Mac OS X 上不可用。它可以创造奇迹。我还会推荐 RazorSQL 或 SQLGrinder。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-11-14T19:53:03.207

当被问到这个问题时，微软的 OS X 远程桌面多年来一直不受支持。它不是通用二进制文件，我发现它有些错误（我记得应用程序将在连接失败后退出，而不是允许您更改连接信息并重试）。

当时我推荐了 Open Source [CoRD](http://cord.sourceforge.net/)，一个很好的 Mac 的 RDP 客户端。

此后，[Microsoft Remote Desktop Client for Mac 2](http://www.microsoft.com/mac/products/remote-desktop/default.mspx)发布。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2009-05-02T04:05:23.400

不确定开源，但我听说过关于[http://www.advenio.com/sqlgrinder/](http://www.advenio.com/sqlgrinder/)的好消息（没有尝试过，我更喜欢编写 Python 脚本来尝试，而不是使用 GUI；-）。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-08-06T14:28:13.613

这并没有具体回答您的问题，因为我不确定 Mac OS X 中是否存在任何客户端，但我通常只是[远程桌面](http://en.wikipedia.org/wiki/Remote_Desktop_Services#Remote_Desktop_Connection)进入服务器并通过它来工作。另一种选择是[VMware Fusion](http://en.wikipedia.org/wiki/VMware_Fusion)（我认为它比[Parallels](http://en.wikipedia.org/wiki/Parallels_Desktop_for_Mac)好得多）+ Windows XP + [SQL Server Management Studio](http://en.wikipedia.org/wiki/SQL_Server_Management_Studio)。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-05-04T22:15:06.743

为此，我已经将 Eclipse 与 Quantum-DB 插件一起使用，因为无论如何我已经在使用 Eclipse。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-12-22T14:55:35.107

我使用 Eclipse 的数据库开发插件——就像所有基于 Java 的 SQL 编辑器一样，它可以与任何类型 4（即纯 Java）JDBC 驱动程序一起跨平台工作。基本的东西没问题（主要的失败是它很难给予事务控制——似乎总是设置 auto-commit=true）。

Microsoft 有一个不错的 JDBC 4 类驱动程序： http: [//www.microsoft.com/downloads/details.aspx?](http://www.microsoft.com/downloads/details.aspx?FamilyId=6D483869-816A-44CB-9787-A866235EFC7C&displaylang=en) FamilyId=6D483869-816A-44CB-9787-A866235EFC7C&displaylang=en 这可以与 Win 上的所有 Java 客户端/程序一起使用/Mac/林/等。

那些在 Mac 上使用 Java/JDBC 苦苦挣扎的人大概是在尝试使用本机驱动程序而不是 JDBC 驱动程序——我已经有近 10 年没有使用（或实际上听说过）ODBC 驱动程序桥了。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2010-09-27T18:55:02.780

如果您还没有它，它可能不是最好的解决方案，但是带有实际 SQL Server ODBC 驱动程序 (http://www.actualtech.com/product_sqlserver.php) 的 FileMaker 11 今天对我的客户来说效果很好。ODBC 驱动程序只需 29 美元，而 FileMaker 则为 299 美元，这就是为什么您可能只在已经拥有它的情况下才考虑它的原因。

* * *

## 回答 #22

> 赞同：-4
> 
> 时间：2008-08-06T15:18:09.393

Ed：[phpMyAdmin](http://en.wikipedia.org/wiki/PhpMyAdmin)是用于 MySQL 的，但提问者需要一些用于 Microsoft SQL Server 的东西。

我发现的大多数解决方案都涉及使用 ODBC 驱动程序，然后是您使用的任何客户端应用程序。例如，[Gorilla SQL](http://www.macupdate.com/info.php/id/17557)声称能够做到这一点，尽管该项目似乎已被放弃。

大多数**好的**解决方案要么使用[远程桌面](http://en.wikipedia.org/wiki/Remote_Desktop_Services#Remote_Desktop_Connection)，要么使用[VMware](http://en.wikipedia.org/wiki/VMware) / [Parallels](http://en.wikipedia.org/wiki/Parallels_Desktop_for_Mac)。

* * *

## 回答 #23

> 赞同：-6
> 
> 时间：2010-12-15T23:55:04.017

尝试使用 CoRD 并直接从服务器修改您想要的内容。

它是开源的。

[http://cord.sourceforge.net/](http://cord.sourceforge.net/)

* * *

## 回答 #24

> 赞同：-10
> 
> 时间：2009-05-02T05:06:27.620

对于 MySQL，有[Querious](http://www.araelium.com/querious/)和[Sequel Pro](http://www.sequelpro.com/)。前者收费25美元，后者免费。您可以在此处找到它们的比较，并[在此处](http://theappleblog.com/2009/02/27/mysql-showdown-querious-vs-sequel-pro/)找到一些其他 Mac OS X MySQL 客户端的[列表](http://theappleblog.com/2009/03/31/eight-more-mysql-apps-for-os-x/)。

史蒂夫

* * *

## 回答 #25

> 赞同：-11
> 
> 时间：2008-08-06T15:17:16.743

由于目前没有适用于 Mac OS X 的 MS SQL 客户端，因此我会按照[Modesty](https://stackoverflow.com/questions/3452/sql-server-client-for-osx#3455)的建议，使用适用于 Mac 的[远程桌面](http://www.microsoft.com/mac/products/remote-desktop/default.mspx)。

# sql-server - 如何将 Sql 列转换为行？

> ID：3470
> 
> 赞同：17
> 
> 时间：2008-08-06T14:36:56.640
> 
> 标签：sql-server, sql-server-2005

我有一个非常简单的问题，需要在 SQL Server 2005 中使用非常快速简单的解决方案。

我有一个 x 列的表。我希望能够从表中选择一行，然后将列转换为行。

```
TableA
Column1, Column2, Column3 
```

ruturn 的 SQL 语句

```
ResultA
Value of Column1
Value of Column2
Value of Column3 
```

* * *

**@Kevin：**我已经对这个主题进行了谷歌搜索，但是对于我的例子来说，很多例子过于复杂，**你能提供进一步的帮助吗？**

@Mario：我正在创建的解决方案有 10 列存储值 0 到 6，我必须计算出有多少列的值为 3 或更多。所以我考虑创建一个查询将其转换为行，然后在子查询中使用生成的表来计算 Column >= 3 的行数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-06T14:39:09.457

你应该看看 UNPIVOT 子句。

**更新1： GateKiller**，奇怪的是我今天早上读了一篇关于它的文章（关于一些不相关的东西），我试图在我再次看到它的地方慢跑记忆，也有一些看起来不错的例子。我敢肯定，它会回到我身边。

**更新2 ：找到它：[http :](http://weblogs.sqlteam.com/jeffs/archive/2008/04/23/unpivot.aspx) **//weblogs.sqlteam.com/jeffs/archive/2008/04/23/unpivot.aspx****

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-06T15:16:32.223

我以前必须为一个项目这样做。我遇到的主要困难之一是向其他人解释我想做什么。我花了很多时间尝试在 SQL 中执行此操作，但我发现枢轴函数严重不足。我不记得它的确切原因，但它对于大多数应用程序来说太简单了，并且在 MS SQL 2000 中没有完全实现。我最终在 .NET 中编写了一个数据透视函数。我会把它贴在这里，希望有一天它对某人有所帮助。

```
 ''' <summary>
    ''' Pivots a data table from rows to columns
    ''' </summary>
    ''' <param name="dtOriginal">The data table to be transformed</param>
    ''' <param name="strKeyColumn">The name of the column that identifies each row</param>
    ''' <param name="strNameColumn">The name of the column with the values to be transformed from rows to columns</param>
    ''' <param name="strValueColumn">The name of the column with the values to pivot into the new columns</param>
    ''' <returns>The transformed data table</returns>
    ''' <remarks></remarks>
    Public Shared Function PivotTable(ByVal dtOriginal As DataTable, ByVal strKeyColumn As String, ByVal strNameColumn As String, ByVal strValueColumn As String) As DataTable
        Dim dtReturn As DataTable
        Dim drReturn As DataRow
        Dim strLastKey As String = String.Empty
        Dim blnFirstRow As Boolean = True

        ' copy the original data table and remove the name and value columns
        dtReturn = dtOriginal.Clone
        dtReturn.Columns.Remove(strNameColumn)
        dtReturn.Columns.Remove(strValueColumn)

        ' create a new row for the new data table
        drReturn = dtReturn.NewRow

        ' Fill the new data table with data from the original table
        For Each drOriginal As DataRow In dtOriginal.Rows

            ' Determine if a new row needs to be started
            If drOriginal(strKeyColumn).ToString <> strLastKey Then

                ' If this is not the first row, the previous row needs to be added to the new data table
                If Not blnFirstRow Then
                    dtReturn.Rows.Add(drReturn)
                End If

                blnFirstRow = False
                drReturn = dtReturn.NewRow

                ' Add all non-pivot column values to the new row
                For Each dcOriginal As DataColumn In dtOriginal.Columns
                    If dcOriginal.ColumnName <> strNameColumn AndAlso dcOriginal.ColumnName <> strValueColumn Then
                        drReturn(dcOriginal.ColumnName.ToLower) = drOriginal(dcOriginal.ColumnName.ToLower)
                    End If
                Next
                strLastKey = drOriginal(strKeyColumn).ToString
            End If

            ' Add new columns if needed and then assign the pivot values to the proper column
            If Not dtReturn.Columns.Contains(drOriginal(strNameColumn).ToString) Then
                dtReturn.Columns.Add(drOriginal(strNameColumn).ToString, drOriginal(strValueColumn).GetType)
            End If
            drReturn(drOriginal(strNameColumn).ToString) = drOriginal(strValueColumn)
        Next

        ' Add the final row to the new data table
        dtReturn.Rows.Add(drReturn)

        ' Return the transformed data table
        Return dtReturn
    End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-06T14:39:17.837

[UNION](http://msdn.microsoft.com/en-us/library/ms180026.aspx)应该是你的朋友：

```
SELECT Column1 FROM table WHERE idColumn = 1
UNION ALL
SELECT Column2 FROM table WHERE idColumn = 1
UNION ALL
SELECT Column3 FROM table WHERE idColumn = 1 
```

但它也可能是您在大型结果集上[的敌人。](http://blog.falafel.com/2006/01/20/TSQLTipAvoidUNION.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-06T14:41:29.280

如果你有一组固定的列并且你知道它们是什么，你基本上可以做一系列的子选择

`(SELECT Column1 AS ResultA FROM TableA) as R1`

并加入子选择。所有这些都在一个查询中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-06T14:59:36.547

我不确定 SQL Server 的语法，但在 MySQL 中我会这样做

```
SELECT IDColumn, ( IF( Column1 >= 3, 1, 0 ) + IF( Column2 >= 3, 1, 0 ) + IF( Column3 >= 3, 1, 0 ) + ... [snip ] )
  AS NumberOfColumnsGreaterThanThree
FROM TableA; 
```

编辑：一个非常（非常）简短的谷歌搜索告诉我，该`CASE`语句与我`IF`在 MySQL 中的语句一样。您可能会也可能不会使用[我找到的 Google 结果](http://www.craigsmullins.com/ssu_0899.htm)

进一步编辑：我还应该指出，这不是您问题的答案，而是您实际问题的替代解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-26T21:34:22.083

```
SELECT IDColumn, 
       NumberOfColumnsGreaterThanThree = (CASE WHEN Column1 >= 3 THEN 1 ELSE 0 END) + 
                                         (CASE WHEN Column2 >= 3 THEN 1 ELSE 0 END) + 
                                         (Case WHEN Column3 >= 3 THEN 1 ELSE 0 END) 
FROM TableA; 
```**

# security - 使用 HTTP_REFERER 阻止用户访问站点内部

> ID：3486
> 
> 赞同：5
> 
> 时间：2008-08-06T14:44:09.137
> 
> 标签：security, apache, mod-rewrite, http-referer

我可以控制 HttpServer，但不能控制 ApplicationServer 或坐在那里的 Java 应用程序，但我需要阻止直接访问这些应用程序上的某些页面。准确地说，我不希望用户自动访问向适当的 servlet 发出直接 GET/POST HTTP 请求的表单。

所以，我决定根据`HTTP_REFERER`. 毕竟，如果用户在网站内部导航，它会有一个合适的`HTTP_REFERER`. 嗯，我就是这么想的。

我在 .htaccess 文件中实现了一个重写规则，上面写着：

```
RewriteEngine on 

# Options +FollowSymlinks
RewriteCond %{HTTP_REFERER} !^http://mywebaddress(.cl)?/.* [NC]
RewriteRule (servlet1|servlet2)/.+\?.+ - [F] 
```

我希望禁止访问未浏览站点但使用查询字符串向“servlet1”或“servlet2”servlet 发出直接 GET 请求的用户。但是我的期望突然结束了，因为正则表达式`(servlet1|servlet2)/.+\?.+`根本不起作用。

当我将该表达式更改为时，我真的很失望，`(servlet1|servlet2)/.+`而且效果如此之好，以至于我的用户无论是否浏览该网站都会被屏蔽。

所以，我的问题是：如果我没有访问/特权/时间来修改应用程序，我如何才能完成不允许“机器人”直接访问某些页面的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-06T18:41:13.057

我不确定我是否可以一口气解决这个问题，但我们可以根据需要来回切换。

首先，我想重复一下我认为你在说什么，并确保我说的很清楚。您想禁止对 servlet1 和 servlet2 的请求是请求没有正确的引用者并且它**确实**有查询字符串吗？我不确定我是否理解 (servlet1|servlet2)/.+\?.+ 因为看起来您需要 servlet1 和 2 下的文件。我想您可能正在将 PATH_INFO（在“？”之前）与 GET 结合起来查询字符串（在“？”之后）。PATH_INFO 部分似乎可以工作，但 GET 查询测试不会。我使用 script1.cgi 和 script2.cgi 在我的服务器上进行了快速测试，以下规则可以完成您的要求。它们显然经过了一些编辑以匹配我的环境：

```
RewriteCond %{HTTP_REFERER} !^http://(www.)?example.(com|org) [NC]
RewriteCond %{QUERY_STRING} ^.+$
RewriteRule ^(script1|script2)\.cgi - [F] 
```

上面捕获了所有尝试使用查询字符串提交数据的对 script1.cgi 和 script2.cgi 的错误引用请求。但是，您也可以使用 path_info 和发布数据来提交数据。我使用此表单来防止使用不正确的referer的三种方法中的任何一种：

```
RewriteCond %{HTTP_REFERER} !^http://(www.)?example.(com|org) [NC]
RewriteCond %{QUERY_STRING} ^.+$ [OR]
RewriteCond %{REQUEST_METHOD} ^POST$ [OR]
RewriteCond %{PATH_INFO} ^.+$
RewriteRule ^(script1|script2)\.cgi - [F] 
```

根据您尝试开始工作的示例，我认为这就是您想要的：

```
RewriteCond %{HTTP_REFERER} !^http://mywebaddress(.cl)?/.* [NC]
RewriteCond %{QUERY_STRING} ^.+$ [OR]
RewriteCond %{REQUEST_METHOD} ^POST$ [OR]
RewriteCond %{PATH_INFO} ^.+$
RewriteRule (servlet1|servlet2)\b - [F] 
```

希望这至少能让你更接近你的目标。请让我们知道它是如何工作的，我对您的问题感兴趣。

（顺便说一句，我同意引用阻止是很差的安全性，但我也明白，relaity 有时会迫使解决方案不完美和部分，你似乎已经承认了。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-06T14:49:13.073

我没有解决方案，但我敢打赌，依赖引荐来源网址永远不会奏效，因为用户代理可以完全不发送它或将其欺骗到可以让他们进入的东西上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-06T15:02:26.587

您无法通过他们的 http 请求来区分用户和恶意脚本。但是您可以分析哪些用户在很短的时间内请求的页面过多，并阻止他们的 IP 地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T15:03:37.397

Javascript 是另一个防止（或至少延迟）屏幕抓取的有用工具。大多数自动抓取工具没有 Javascript 解释器，因此您可以执行设置隐藏字段等操作。

编辑：与[此 Phil Haack 文章](http://haacked.com/archive/2006/09/26/Lightweight_Invisible_CAPTCHA_Validator_Control.aspx)类似的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-06T15:08:30.913

使用推荐人作为一种验证方法是非常不可靠的。正如其他人所提到的，它很容易被欺骗。您最好的解决方案是修改应用程序（如果可以）

您可以使用验证码，或设置某种 cookie 或会话 cookie，以跟踪用户上次访问的页面（会话更难欺骗）并跟踪页面查看历史记录，并且只允许浏览过的用户访问您要阻止的页面所需的页面。

这显然需要您访问相关应用程序，但这是最简单的方法（不完全，但在我看来“足够好”。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-06T15:00:15.780

我猜您是在尝试防止屏幕刮擦？

老实说，这是一个很难解决的问题，并且试图通过检查 HTTP_REFERER 的值来解决它只是一个贴膏药。任何去自动化提交的麻烦的人都会足够精明地从他们的“自动机”发送正确的推荐人。

您可以尝试限制速率，但无需实际修改应用程序以在某些时候强制进行某种“这是人类的验证”（CAPTCHA），那么您会发现这很难防止。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-06T15:32:11.113

如果您试图阻止搜索引擎机器人访问某些页面，请确保您使用的是格式正确的[robots.txt](http://www.robotstxt.org/)文件。

使用 HTTP_REFERER 是不可靠的，因为它很[容易被伪造](http://en.wikipedia.org/wiki/Referer_spoofing)。

另一种选择是检查已知机器人的用户代理字符串（这可能需要修改代码）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-06T15:58:14.790

为了让事情更清楚一点：

1.  是的，我知道使用 HTTP_REFERER 是完全不可靠的，而且有点幼稚，但我很确定那些学会（可能是从我身上）使用 Excel VBA 进行自动化的人将不知道如何在时间跨度内颠覆 HTTP_REFERER最终的解决方案。

2.  我无权修改应用程序代码。政治。你相信吗？所以，我必须等到权利人做出我要求的更改。

3.  根据以前的经验，我知道请求的更改需要两个月才能投入生产。不，将敏捷方法论书籍扔在他们的脑海中并没有改善任何东西。

4.  这是一个内网应用程序。所以我没有很多年轻人试图破坏我的声望。但我还很年轻，以至于试图破坏“来自印度的非常出色的全球咨询服务”的声望，但奇怪的是，那里没有一个印度人在那里工作。

到目前为止，最好的答案来自“Michel de Mare”：根据 IP 屏蔽用户。嗯，我昨天做的。今天我想做一些更通用的东西，因为我有很多袋鼠用户（从一个 IP 地址跳转到另一个），因为他们使用 VPN 或 DHCP。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-20T13:06:48.730

您也许可以使用反 CSRF 令牌来实现您所追求的。

这篇文章更详细地解释了它：[Cross-Site Request Forgeries](http://shiflett.org/articles/cross-site-request-forgeries)

# math - “BODMAS”一词是什么意思？

> ID：3510
> 
> 赞同：16
> 
> 时间：2008-08-06T14:54:52.360
> 
> 标签：math

什么是 BODMAS，为什么它在编程中很有用？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-08-06T14:57:01.403

[http://www.easymaths.com/What_on_earth_is_Bodmas.htm](http://www.easymaths.com/What_on_earth_is_Bodmas.htm)：

> 你认为 2 + 3 x 5 的答案是什么？
> 
> 是 (2 + 3) x 5 = 5 x 5 = 25 吗？
> 
> 还是 2 + (3 x 5) = 2 + 15 = 17 ？
> 
> BODMAS 可以出手相救，并为我们提供要遵循的规则，以便我们始终得到正确的答案：
> 
> (B)球拍 (O)rder (D)ivision (M)乘法 (A)加法 (S)减法
> 
> 根据 BODMAS，乘法应始终在加法之前完成，因此 17 实际上是根据 BODMAS 的正确答案，如果您输入 2 + 3 x 5 ，您的计算器也会给出答案。

为什么它在编程中有用？不知道，但我认为这是因为你可以摆脱一些括号？我是一个非常防御性的程序员，所以我的行看起来像这样：

```
result = (((i + 4) - (a + b)) * MAGIC_NUMBER) - ANOTHER_MAGIC_NUMBER; 
```

使用 BODMAS，您可以更清楚地说明这一点：

```
result = (i + 4 - (a + b)) * MAGIC_NUMBER - ANOTHER_MAGIC_NUMBER; 
```

我想我仍然会使用第一个变体 - 更多的括号，但这样我就不必学习另一个规则，并且我忘记它并导致那些奇怪的难以调试错误的风险更小？

只是猜测那部分。

Mike Stone 编辑：Gaius 指出的固定数学

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-08-06T15:01:15.827

另一个版本（在中学）是“请原谅我亲爱的莎莉阿姨”。

*   括弧
*   指数
*   乘法
*   分配
*   添加
*   减法

助记器在学校很有用，在今天的编程中仍然有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-06T15:03:35.977

表达式中的运算顺序，例如：

```
foo * (bar + baz^2 / foo) 
```

*   **B**球拍优先
*   **阶**数（即幂和平方根等）
*   **除法**和乘法**（**从左到右）
*   **加减法**（****从左到右**）**

 **来源： http: [//www.mathsisfun.com/operation-order-bodmas.html](http://www.mathsisfun.com/operation-order-bodmas.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-08-14T01:29:42.253

我无权编辑[@Michael Stum 的答案](https://stackoverflow.com/a/3511/50776)，但这并不完全正确。他减少

```
(i + 4) - (a + b) 
```

到

```
(i + 4 - a + b) 
```

它们不是等价的。对于整个表达式，我能得到的最好的减少是

```
((i + 4) - (a + b)) * MAGIC_NUMBER - ANOTHER_MAGIC_NUMBER; 
```

或者

```
(i + 4 - a - b) * MAGIC_NUMBER - ANOTHER_MAGIC_NUMBER; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-06T15:11:01.327

当我在小学（在加拿大）学到这一点时，它被称为 BEDMAS：

**B**球拍指数除法**乘法**加法减法
**_**
**_**
**_** _
**_**

 **只为来自这个世界的人...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-06T15:12:30.327

无论如何，我不确定如何适用于编程旧的 BODMAS 助记符。语言之间的操作顺序无法保证，虽然许多语言保持标准操作的顺序，但并非所有人都这样做。还有一些语言的操作顺序并不是那么有意义（例如 Lisp 方言）。在某种程度上，如果您忘记标准顺序并且对所有内容使用括号（例如（a * b）+ c）或专门学习您所使用的每种语言的顺序，您可能会更好地进行编程。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-22T10:45:12.950

我在某处读到，尤其是在 C/C++ 中，将表达式拆分为小语句更利于优化；因此，不是在一行中编写非常复杂的表达式，而是将部分缓存到变量中，并逐步执行每个部分，然后在进行过程中构建它们。

优化例程将在您有变量的地方使用寄存器，因此它不应该影响空间，但它可以帮助编译器一点。****

# c# - 在目录中搜索大量文件？

> ID：3512
> 
> 赞同：15
> 
> 时间：2008-08-06T14:57:16.597
> 
> 标签：c#, directory, file-management

我正在使用 MSVE，并且我有自己的图块，我在顶部的图层中显示。问题是，它们有很多，而且它们在网络服务器上。在某些目录中，大约有 30,000 多个文件。最初我调用了 Directory.GetFiles，但一旦我开始在伪真实环境中进行测试，它就会超时。

以编程方式列出和迭代这么多文件的最佳方法是什么？

编辑：我的同事建议使用 MS 索引服务。有没有人尝试过这种方法，并且（如何）有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-06T15:35:30.203

过去，我曾在 SAN 系统上使用电话录音，该系统在单个文件夹中的文件数量存在问题 - 该系统在接近 5,000 个的地方变得无法使用（在 Windows 2000 Advanced Server 上使用 C#.Net 1.1 中的应用程序） -我们想出的唯一明智的解决方案是更改文件夹结构，以便有更合理的文件数量。有趣的是，Explorer 也会超时！

我们提出的约定是一种结构，该结构以年、月和日为单位进行分解-但这取决于您的系统以及您是否可以控制目录结构...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-06T16:03:51.893

果断分道扬镳。也就是说，尽可能远离索引服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-06T15:42:08.457

没有任何。.NET 依赖于底层的 Windows API 调用，这些调用本身非常非常讨厌这么多文件。

正如罗尼所说：把他们分开。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T15:47:49.430

可以用DOS吗？

```
DIR /s/b > Files.txt 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-06T23:53:38.637

您还可以查看自己为文件编制索引，或者让第三方应用程序（如 google desktop 或[copernic](http://www.copernic.com/en/products/desktop-search/whats-new-15.html)）来执行此操作，然后与他们的索引进行交互。我知道 copernic 有一个 API，您可以使用它来搜索其索引中的任何文件，它还支持映射网络驱动器。

# ruby - 如何在 Ruby 脚本中运行 Rake 任务？

> ID：3530
> 
> 赞同：57
> 
> 时间：2008-08-06T15:15:54.143
> 
> 标签：ruby, rake, command-line-interface

我有一个`Rakefile`通常会从命令行调用的 Rake 任务：

```
rake blog:post Title 
```

我想编写一个多次调用该 Rake 任务的 Ruby 脚本，但我看到的唯一解决方案是使用 ``（反引号）或`system`.

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2008-08-06T15:24:00.787

来自[timocracy.com](http://web.archive.org/web/20090412040557/http://timocracy.com:80/articles/2008/02/21/calling-invoking-rails-rake-tasks-from-within-ruby-for-testing-try-2)：

```
require 'rake'

def capture_stdout
  s = StringIO.new
  oldstdout = $stdout
  $stdout = s
  yield
  s.string
ensure
  $stdout = oldstdout
end

Rake.application.rake_require 'metric_fetcher', ['../../lib/tasks']
results = capture_stdout {Rake.application['metric_fetcher'].invoke} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-06T22:14:36.513

这适用于 Rake 版本 10.0.3：

```
require 'rake'
app = Rake.application
app.init
# do this as many times as needed
app.add_import 'some/other/file.rake'
# this loads the Rakefile and other imports
app.load_rakefile

app['sometask'].invoke 
```

正如 knut 所说，`reenable`如果您想多次调用，请使用。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-17T10:06:53.430

您可以使用`invoke`和`reenable`再次执行该任务。

您的示例调用`rake blog:post Title`似乎有一个参数。此参数可用作以下参数`invoke`：

例子：

```
require 'rake'
task 'mytask', :title do |tsk, args|
  p "called #{tsk} (#{args[:title]})"
end

Rake.application['mytask'].invoke('one')
Rake.application['mytask'].reenable
Rake.application['mytask'].invoke('two') 
```

请用您的 rakefile 替换`mytask`任务定义`blog:post`。`require`

此解决方案会将结果写入标准输出 - 但您没有提到您想要抑制输出。

* * *

有趣的实验：

您也可以`reenable`在任务定义中调用 。这允许任务重新启用自己。

例子：

```
require 'rake'
task 'mytask', :title do |tsk, args|
  p "called #{tsk} (#{args[:title]})"
  tsk.reenable  #<-- HERE
end

Rake.application['mytask'].invoke('one')
Rake.application['mytask'].invoke('two') 
```

结果（使用 rake 10.4.2 测试）：

```
"called mytask (one)"
"called mytask (two)" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-24T22:09:16.420

在加载了 Rails 的脚本中（例如`rails runner script.rb`）

```
def rake(*tasks)
  tasks.each do |task|
    Rake.application[task].tap(&:invoke).tap(&:reenable)
  end
end

rake('db:migrate', 'cache:clear', 'cache:warmup') 
```

# vb.net - 部署 VB.NET 应用程序的最佳方式是什么？

> ID：3544
> 
> 赞同：8
> 
> 时间：2008-08-06T15:25:51.237
> 
> 标签：vb.net, visual-studio, installation, clickonce

通常，当我在构建 VB.NET 程序时使用 ClickOnce，但它有一些缺点。我从来没有真正使用过其他任何东西，所以我不确定我的选择是什么。

ClickOnce 的缺点：

*   由多个文件组成 - 分发一个文件似乎比管理一堆文件和下载器下载这些文件更容易。
*   您必须为 CD 安装再次构建它（当最终用户没有互联网时）
*   程序不会出现在程序文件中 - 它最终隐藏在某些应用程序捕获文件夹中，这使得快捷方式变得更加困难。

ClickOnce 的优点：

*   有用。神奇地。它内置于 VisualStudio 2008 express 中。
*   使升级应用程序变得容易。

Windows Installer 是否也执行这些操作？我知道它没有任何 ClickOnce 缺点，但很高兴知道它是否也具有 ClickOnce 优点。

**更新**：我最终使用了 Wix 2（Wix 3 可用，但在我做这个项目时，没有人有一个称职的教程）。这很好，因为它支持我（最终）需要的三件事。一个可选的 Windows 启动快捷方式、一个在安装程序完成时启动的选项，以及我老板认为可以防止用户点击错误选项的三段文字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-06T15:38:52.287

你见过 WiX 吗？

[http://wix.sourceforge.net/](http://wix.sourceforge.net/)

它使用 XML 文件构建 Windows 安装程序，如果您想改进安装程序等，它还可以使用其他库。我承认我的学习曲线在开始时处于中高水平，但之后我能够毫不费力地构建第二个安装程序。

如果您愿意，它将处理更新和其他项目，并且您可以将文件夹权限等应用于安装程序。它还使您可以更好地控制您想要安装文件的确切位置，并且与所有标准化的 Windows 文件夹约定兼容，因此您可以指定“PROGRAM_DATA”或类似的内容，安装程序知道将其放入 C:\Documents 和Settings\All Users\Application Data 或 C:\ProgramData 取决于您运行的是 XP 还是 Vista。

有传言说 Office 2007 和 Visual Studio 2008 使用 WiX 来创建它们的安装程序，但我无法在任何地方验证这一点。我相信它是由微软内部的一些人开发的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-22T13:39:46.563

我同意 Joseph 的观点，我对 ClickOnce 的体验对于绝大多数项目来说都非常有用，尤其是在它使构建、发布和部署变得容易的企业环境中。在 ClickOnce 中实施“强制升级”以确保用户在运行时拥有最新版本要容易得多，这也是我使用它的主要原因。

ClickOnce 的问题：在企业环境中，代理服务器存在问题，并且解决方法不太理想。在这些情况下，我不得不从 UNC 路径部署一些应用程序......但你不能一直这样做。它的“沙盒”非常棒，直到您想要找到可执行文件或创建桌面快捷方式。

2008 年还没有部署，所以不确定这些问题是否仍然存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-06T15:33:21.500

创建一个依赖于您的 EXE 的安装程序项目（这又取决于它需要的任何东西）是一个相当简单的过程 - 但您至少需要 VS 标准版。

在安装程序项目中，您可以创建自定义任务和对话步骤，让您可以执行任何您编写的代码。

缺少的是使用 ClickOnce 获得的自动升级和版本检查魔法。你仍然可以构建它，它不是自动的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T15:37:43.723

我不相信有任何简单的方法可以使 Windows Installer 项目具有 ClickOnce 的易用性或可升级性。我将 ClickOnce 用于我开发的所有内部 .NET 应用程序（控制台应用程序除外）。我发现在企业环境中，易于部署胜过缺乏灵活性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-06T15:46:41.710

如果您有需要与产品一起安装的第 3 方组件，ClickOnce 可能会出现问题。您可以通过为组件创建安装程序在一定程度上避免这种情况，但是使用 ClickOnce 部署，您必须创建更新所述组件安装程序的逻辑。

我以前曾使用 Wise For Windows Installer 创建安装包。虽然使用它创建升级并不是像 ClickOnce 那样自动进行，但当涉及到需要注册/添加的其他组件时，它们更加精确且不那么令人头疼。

# sql - 数据库方案的 SQL 查询

> ID：3567
> 
> 赞同：7
> 
> 时间：2008-08-06T15:41:13.827
> 
> 标签：sql, sql-server

在 SQL Server 中，如何查询数据库以返回所有具有特定名称字段的表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-06T15:46:09.777

以下查询将返回`Column_Name`与您要查找的列相同的唯一表列表：

```
SELECT Table_Name
FROM INFORMATION_SCHEMA.COLUMNS
WHERE Column_Name = 'Desired_Column_Name'
GROUP BY Table_Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-06T15:43:32.963

```
SELECT Table_Name
FROM Information_Schema.Columns
WHERE Column_Name = 'YourFieldName' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-06T15:43:54.537

我是老派：

```
SELECT DISTINCT object_name(id)
FROM syscolumns
WHERE name = 'FIELDNAME' 
```

# mysql - 使用 MySQL 而不是 SQLite 创建一个新的 Ruby on Rails 应用程序

> ID：3585
> 
> 赞同：134
> 
> 时间：2008-08-06T15:50:49.813
> 
> 标签：mysql, ruby-on-rails, ruby

我想用 MySQL 创建我的 Rails 应用程序，因为我非常喜欢它。如何在最新版本的 Rails 而不是默认的 SQLite 中做到这一点？

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2008-08-06T15:52:09.140

通常，你会创建一个新的 Rails 应用程序使用

```
rails ProjectName 
```

要使用 MySQL，请使用

```
rails new ProjectName -d mysql 
```

* * *

## 回答 #2

> 赞同：142
> 
> 时间：2008-08-06T16:04:05.043

如果您已经有一个 rails 项目，请将`config/database.yml`文件中的适配器更改为`mysql`并确保您指定了有效的用户名和密码，以及可选的套接字：

```
development:
  adapter: mysql2
  database: db_name_dev
  username: koploper
  password:
  host: localhost
  socket: /tmp/mysql.sock 
```

接下来，确保编辑 Gemfile 以包含 mysql2 或 activerecord-jdbcmysql-adapter（如果使用 jruby）。

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2010-12-14T11:08:34.260

对于 Rails 3，您可以使用以下命令使用 mysql 创建一个新项目：

```
$ rails new projectname -d mysql 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2013-01-21T11:55:21.350

转到终端并写入：

```
rails new <project_name> -d mysql 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2014-06-23T11:47:55.693

如果您还没有创建应用程序，只需转到 cmd（适用于 windows）或终端（适用于 linux/unix）并键入以下命令以使用 mysql 数据库创建一个 rails 应用程序：

`$rails new <your_app_name> -d mysql`

它适用于 Rails 版本 3 以上的任何内容。如果您已经创建了应用程序，那么您可以执行以下 2 项操作之一：

1.  使用 mysql 数据库创建一个*another_name*应用程序，转到 cd *another_name* /config/ 并从这个新应用程序复制 database.yml 文件。将其粘贴到*your_app_name*应用程序的 database.yml 中。但请确保更改数据库名称并在执行此操作后在 database.yml 文件中相应地设置数据库的用户名/密码。

或者

1.  转到 cd *your_app_name* /config/ 并打开 database.yml。重命名如下：

开发：
适配器：mysql2
数据库：db_name_name
用户名：root
密码：
主机：localhost
套接字：/tmp/mysql.sock

此外，从您的 Gemfile 中删除 gem 'sqlite3' 并添加 gem 'mysql2'

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2011-08-04T04:15:54.403

如果您使用的是 rails 3 或更高版本

```
rails new your_project_name -d mysql 
```

如果您有早期版本

```
rails new -d mysql your_project_name 
```

因此，在创建项目之前，您需要找到 rails 版本。你可以找到

```
rails -v 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2009-04-27T06:28:31.413

```
rails -d mysql ProjectName 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2012-06-21T12:30:54.037

```
rails new <project_name> -d mysql 
```

或者

```
rails new projectname 
```

config/database.yml 中的更改

```
development:
  adapter: mysql2
  database: db_name_name
  username: root
  password:
  host: localhost
  socket: /tmp/mysql.sock 
```

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2013-01-21T13:49:58.010

使用 -d 选项创建应用程序

```
rails new AppName -d mysql 
```

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2011-11-18T14:26:24.010

```
$ rails --help 
```

永远是你最好的朋友

用法：

```
$ rails new APP_PATH[options] 
```

另请注意，应在应用程序名称之后给出选项

导轨和mysql

```
$ rails new project_name -d mysql 
```

rails 和 postgresql

```
$ rails new project_name -d postgresql 
```

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2012-03-29T08:32:17.220

您应该使用开关 -D 而不是 -d 因为它将生成两个应用程序和没有文档文件夹的 mysql。

```
 rails -D mysql project_name  (less than version 3)

  rails new project_name -D mysql (version 3 and up) 
```

或者，您只需使用该`--database`选项。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2008-08-06T15:53:32.647

如果您正在创建一个新的 rails 应用程序，您可以使用 -d 开关设置数据库，如下所示：

```
rails -d mysql myapp 
```

不过，以后切换数据库总是很容易，如果您在 Mac 上开发，使用 sqlite 确实更容易。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2011-05-18T15:09:01.900

在 Rails 3 中，你可以这样做

```
$rails new projectname --database=mysql 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2017-02-15T07:32:02.843

只需转到 Rails 控制台并输入：

```
rails new YOURAPPNAME -d mysql 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-02-08T21:45:57.403

在新项目上，很容易：

```
rails new your_new_project_name -d mysql 
```

在现有项目上，肯定更棘手。这给了我一些关于现有 Rails 项目的问题。这种对我有用：

```
# On Gemfile:
gem 'mysql2',  '>= 0.3.18', '< 0.5' # copied from a new project for rails 5.1 :)
gem 'activerecord-mysql-adapter' # needed for mysql..

# On Dockerfile or on CLI:
sudo apt-get install -y  mysql-client libmysqlclient-dev 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-09-20T12:45:15.127

首先确保安装了mysql gem，如果没有？而不是在控制台中输入以下命令

```
gem install mysql2 
```

通过在控制台中键入以下命令来创建新的 rails 应用程序并将 mysql 数据库设置为默认数据库

```
rails new app-name -d mysql 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-09-01T18:58:31.620

**使用以下命令使用 mysql 数据库为 API 创建新应用程序**

```
rails new <appname> --api -d mysql

  adapter: mysql2
  encoding: utf8
  pool: 5
  username: root
  password: 
  socket: /var/run/mysqld/mysqld.sock 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-02-22T05:02:45.590

**数据库.yml**

```
# MySQL. Versions 5.1.10 and up are supported.
#
# Install the MySQL driver
#   gem install mysql2
#
# Ensure the MySQL gem is defined in your Gemfile
#   gem 'mysql2'
#
# And be sure to use new-style password hashing:
#   https://dev.mysql.com/doc/refman/5.7/en/password-hashing.html
#
default: &default
  adapter: mysql2
  encoding: utf8
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  host: localhost
  database: database_name
  username: username
  password: secret

development:
  <<: *default

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  <<: *default

# As with config/secrets.yml, you never want to store sensitive information,
# like your database password, in your source code. If your source code is
# ever seen by anyone, they now have access to your database.
#
# Instead, provide the password as a unix environment variable when you boot
# the app. Read http://guides.rubyonrails.org/configuring.html#configuring-a-database
# for a full rundown on how to provide these environment variables in a
# production deployment.
#
# On Heroku and other platform providers, you may have a full connection URL
# available as an environment variable. For example:
#
#   DATABASE_URL="mysql2://myuser:mypass@localhost/somedatabase"
#
# You can use this database configuration with:
#
#   production:
#     url: <%= ENV['DATABASE_URL'] %>
#
production:
  <<: *default 
```

**宝石文件**：

```
# Use mysql as the database for Active Record
gem 'mysql2', '>= 0.4.4', '< 0.6.0' 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-04-08T17:55:27.903

如果您使用的是 Ubuntu 或任何 Debian 发行版，您首先应该确保 MySQL 驱动程序在您的系统上，如果没有在您的终端上运行它

```
sudo apt-get install mysql-client libmysqlclient-dev 
```

并将其添加到您的 Gemfile

```
gem 'mysql2', '~> 0.3.16' 
```

然后在项目的根目录中运行

```
bundle install 
```

之后，您可以将 mysql 配置添加到 config/database.yml 作为先前的答案

# sql - 仅备份 SQL 架构？

> ID：3589
> 
> 赞同：21
> 
> 时间：2008-08-06T15:53:51.647
> 
> 标签：sql, sql-server, oracle, sql-server-2005, backup

我需要创建一个只有结构的 SQL Server 2005 数据库的备份……没有记录，只有架构。有没有办法做到这一点？

编辑：我正在尝试创建一个用于旧进程的备份文件，所以脚本不能满足我的目的，抱歉

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-08-06T16:12:44.213

使用 3 步流程：

1.  从工作数据库生成脚本
2.  从该脚本创建一个新数据库
3.  创建新数据库的备份

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-06T15:55:35.420

为什么不直接使用 SQL Management Studio 创建数据库和对象的完整脚本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-06T16:46:39.577

我大量使用了这个工具：
[SQLBalance for MySQL](http://www.dswsoft.com/sqlbalance.php)

很遗憾; 仅它的窗口......但它就像一个魅力来移动数据库，数据或无数据，合并或比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-06T17:27:15.470

如果您正在考虑商业产品，Toad for SQL Server 可以很好地做到这一点。

# svn - 在没有 URL/Subversion 后端的情况下将 Fogbugz 与 TortoiseSVN 集成

> ID：3607
> 
> 赞同：16
> 
> 时间：2008-08-06T16:10:44.313
> 
> 标签：svn, tortoisesvn, integration, fogbugz

我已经安装了 TotroiseSVN，并且我的大部分存储库都从 C:\subversion\*签入和签出，还有几个从网络共享签入和签出（我最初发布这个问题时忘记了这一点）*。

这意味着我本身没有“颠覆”服务器。

如何集成 TortoiseSVN 和 Fogbugz？

*编辑：插入斜体*

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-12-16T00:03:30.553

我一直在调查这个问题并设法让它工作。有几个小问题，但可以解决。

这个问题有 3 个不同的部分，如下所示：

1.  **TortoiseSVN 部分**- 让 TortoiseSVN 在 svn 日志中插入 Bugid 和超链接

2.  **FogBugz 部分**- 让 FogBugz 插入 SVN 信息和相应的链接

3.  **WebSVN 部分**- 确保来自 FogBugz 的链接实际工作

第 1 部分的说明在另一个答案中，尽管它实际上比要求的要多。关于钩子的内容实际上是针对第 2 部分的，正如所指出的 - 它不能“开箱即用”

**只是为了确认一下，我们正在考虑使用 TortoiseSVN*而不*使用 SVN 服务器（即基于文件的存储库）**

我正在使用 UNC 路径访问存储库，但它也适用于本地驱动器或映射驱动器。

所有这些都适用于 TortoiseSVN v1.5.3 和 SVN Server v1.5.2（您需要安装 SVN Server，因为第 2 部分需要`svnlook.exe`在服务器包中。您实际上并没有将其配置为 SVN 服务器）它甚至可能可以`svnlook.exe`从另一台计算机复制并将其放在路径中的某个位置。

# 第 1 部分 - TortoiseSVN

创建 TortoiseSVN 属性是获取 SVN 日志中的链接所必需的。

以前的说明工作正常，为方便起见，我将在此处引用它们：

> ## 配置属性
> 
> 1.  右键单击要使用的已签出项目的根目录。
>     
>     
> 2.  选择“TortoiseSVN -> 属性”
>     
>     
> 3.  通过单击“新建...”并分别在“属性名称”和“属性值”中插入以下内容来添加五个属性值对：（确保为每个属性勾选“递归应用属性”）
>     
>     
>     
>     ```
>     bugtraq:label    BugzID:
>     bugtraq:message  BugzID: %BUGID%
>     bugtraq:number   true
>     bugtraq:url      http://[your fogbugz URL here]/default.asp?%BUGID%
>     bugtraq:warnifnoissue   false 
>     ```
>     
>     
> 4.  点击“确定”

正如 Jeff 所说，您需要为每个工作副本执行此操作，因此请按照他的说明迁移属性。

就是这样。TortoiseSVN 现在将在您提交时添加指向相应 FogBugz bugID 的链接。如果这就是你想要的，你可以在这里停下来。

# 第 2 部分 - FogBugz

为此，我们需要设置挂钩脚本。基本上，每次提交后都会调用批处理文件，而这又会调用 VBS 脚本，该脚本会提交给 FogBugz。VBS 脚本在这种情况下实际上可以正常工作，所以我们不需要修改它。

问题是批处理文件被编写为用作*服务器*挂钩，但我们需要一个*客户端*挂钩。

SVN 服务器使用以下参数调用 post-commit 钩子：

```
<repository-path> <revision> 
```

TortoiseSVN 使用以下参数调用 post-commit 钩子：

```
<affected-files> <depth> <messagefile> <revision> <error> <working-copy-path> 
```

所以这就是它不起作用的原因 - 参数错误。我们需要修改批处理文件，以便将正确的参数传递给 VBS 脚本。

您会注意到 TSVN 没有通过存储库路径，这是一个问题，但它在以下情况下确实有效：

*   存储库名称和工作副本名称相同
*   您在工作副本的根目录下进行提交，而不是在子文件夹中。

我将看看是否可以解决此问题，如果可以，我会在此处发帖。

这是我修改后的批处理文件，它确实有效（请原谅过多的评论......）

您需要设置挂钩和存储库目录以匹配您的设置。

```
rem @echo off
rem   SubVersion -> FogBugz post-commit hook file
rem   Put this into the Hooks directory in your subversion repository
rem   along with the logBugDataSVN.vbs file

rem   TSVN calls this with args <PATH> <DEPTH> <MESSAGEFILE> <REVISION> <ERROR> <CWD>
rem   The ones we're interested in are <REVISION> and <CWD> which are %4 and %6

rem   YOU NEED TO EDIT THE LINE WHICH SETS RepoRoot TO POINT AT THE DIRECTORY 
rem   THAT CONTAINS YOUR REPOSITORIES AND ALSO YOU MUST SET THE HOOKS DIRECTORY

setlocal

rem   debugging
rem echo %1 %2 %3 %4 %5 %6 > c:\temp\test.txt

rem   Set Hooks directory location (no trailing slash)
set HooksDir=\\myserver\svn\hooks

rem   Set Repo Root location (ie. the directory containing all the repos)
rem   (no trailing slash)
set RepoRoot=\\myserver\svn

rem   Build full repo location
set Repo=%RepoRoot%\%~n6

rem   debugging
rem echo %Repo% >> c:\temp\test.txt

rem   Grab the last two digits of the revision number
rem   and append them to the log of svn changes
rem   to avoid simultaneous commit scenarios causing overwrites
set ChangeFileSuffix=%~4
set LogSvnChangeFile=svn%ChangeFileSuffix:~-2,2%.txt

set LogBugDataScript=logBugDataSVN.vbs
set ScriptCommand=cscript

rem   Could remove the need for svnlook on the client since TSVN 
rem   provides as parameters the info we need to call the script.
rem   However, it's in a slightly different format than the script is expecting
rem   for parsing, therefore we would have to amend the script too, so I won't bother.
rem @echo on
svnlook changed -r %4 %Repo% > %temp%\%LogSvnChangeFile%
svnlook log -r %4 %Repo% | %ScriptCommand% %HooksDir%\%LogBugDataScript% %4 %temp%\%LogSvnChangeFile% %~n6

del %temp%\%LogSvnChangeFile%
endlocal 
```

我将假设存储库位于`\\myserver\svn\`并且工作副本都在 `C:\Projects\

1.  进入你的 FogBugz 账户并点击 Extras -> Configure Source Control Integration

2.  下载 Subversion 的 VBScript 文件（不要打扰批处理文件）

3.  创建一个文件夹来存储挂钩脚本。我把它和我的存储库放在同一个文件夹中。例如。`\\myserver\svn\hooks\`

4.  重命名 VBscript 以删除`.safe`文件名末尾的 。

5.  将我的批处理文件版本保存在您的钩子目录中，为`post-commit-tsvn.bat`

6.  右键单击任何目录。

7.  选择“TortoiseSVN > 设置”（在上一步的右键菜单中）

8.  选择“挂钩脚本”

9.  点击“添加”，设置属性如下：

    *   钩子类型：提交后钩子

    *   工作副本路径：（`C:\Projects`或所有项目的根目录。）

    *   要执行的命令行：（`\\myserver\svn\hooks\post-commit-tsvn.bat`这需要指向您在步骤 3 中放置 hooks 目录的任何位置）

    *   勾选“等待脚本完成”

10.  单击确定两次。

下次提交并输入一个 Bugid 时，它将被提交给 FogBugz。这些链接不起作用，但至少有修订信息，您可以在 TortoiseSVN 中手动查找日志。

注意：您会注意到存储库根目录已硬编码到批处理文件中。因此，如果您从没有相同根目录的存储库中签出（例如，一个在本地驱动器上，一个在网络上），那么您将需要在 TSVN 的 Hook Scripts 下使用 2 个批处理文件和 2 个相应条目设置。这样做的方法是拥有 2 个单独的工作副本树 - 每个存储库根目录一个。

# 第 3 部分 - WebSVN

Errr，我没有这样做:-)

从阅读 WebSVN 文档来看，WebSVN 似乎实际上并没有与 SVN 服务器集成，它只是表现得像任何其他 SVN 客户端，但提供了一个 Web 界面。从理论上讲，它应该可以与基于文件的存储库一起正常工作。我还没有尝试过。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-08-06T16:12:49.533

**这个答案不完整且有缺陷！它只适用于 TortoisSVN 到 Fogbugz，反之则不行。我仍然需要知道如何让它从 Fogbugz 向后工作（就像它设计的那样），以便我可以在查看错误时从 Fogbugz 中看到错误的修订号。**

* * *

## 有用的网址

[http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-propertypage.html](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-propertypage.html)

[http://tortoisesvn.net/issuetracker_integration](http://tortoisesvn.net/issuetracker_integration)

* * *

## 设置“钩子”

1.  进入您的 fogbugz 帐户，然后单击 Extras > Configure Source Control Integration

2.  下载“post-commit.bat”和 Subversion 的 VBScript 文件

3.  在一个易于访问的常用位置创建一个“钩子”目录（最好在文件路径中没有空格）

4.  将文件的副本放在钩子目录中

5.  重命名不带“.safe”扩展名的文件

6.  右键单击任何目录。

7.  选择“TortoiseSVN > 设置”（在上一步的右键菜单中）

8.  选择“挂钩脚本”

![](../Images/7061c0c5afa31fc4cf5d2503e9483ffd.png)

1.  点击“添加”

2.  因此设置属性：

    *   钩子类型：提交后钩子

    *   工作副本路径：C:\\Projects（或所有项目的根目录。如果有多个，则需要为每个项目执行此步骤。）

    *   要执行的命令行：C:\\subversion\\hooks\\post-commit.bat（这需要指向您在步骤 3 中放置 hooks 目录的任何位置）

    *   我还选中了等待脚本完成的复选框...

**警告：不要忘记双反斜杠！“\\”**

点击确定...

![添加挂钩脚本](../Images/2bb0db5630a89393253bc19dd35130b2.png)

*注意：屏幕截图不同，请按照文件路径的文本，而不是屏幕截图...*

此时，您似乎可以单击“问题跟踪器集成”并选择 Fogbugz。不。它只是返回“没有可用的问题跟踪器提供程序”。

1.  单击“确定”关闭整个设置对话窗口

## 配置属性

2.  再次，右键单击要使用的已签出项目的根目录（您需要为每个项目执行此“配置属性”步骤 - 请参阅下面的“在项目之间迁移属性”）

3.  选择“TortoiseSVN > 属性”（在上一步的右键菜单中）

4.  通过单击“新建...”并分别在“属性名称”和“属性值”中插入以下内容来添加五个属性值对：

> bugtraq:label BugzID:
> bugtraq:message BugzID: %%BUGID%%
> 
> bugtraq：数字真
> 
> bugtraq:url [http://[你的](http://[your)fogbugz 网址]/default.asp?%BUGID%
> 
> bugtraq:warnifnoissue 错误

![属性窗口](../Images/380239e816edae1c3fa260214b92e390.png) ![添加新属性](../Images/1d4e41f8ed88667ffd0abc1f39f808c6.png)

15.  点击“确定”

## 提交更改并查看日志

现在，当您提交时，您可以指定提交解决的一个错误。这种迫使你在修复每个错误后提交......

![指定提交时解决的错误](../Images/39c4cd8c4f9ae9419f1d5a0d1a260d06.png)

查看日志时（右键项目根目录，TortoiseSVN > show log）可以看到每次检查对应的bug id（1），可以点击bug id号带到fogbugz自动查看该bug如果您正在查看实际的日志消息。相当漂亮！

![](../Images/efb2045c687ccf4d91ca94b0147ce911.png)

* * *

## 在项目之间迁移属性

1.  右键单击已经具有正确属性配置的项目

2.  选择“TortoiseSVN > 属性”（从步骤 1 的右键菜单中）

3.  突出显示所有所需的属性

4.  点击“导出”

5.  以属性命名文件，并放置在一个易于访问的目录中（我将我的与钩子文件放在一起）

![保存属性对话框](../Images/5bd157eee24d7ffd22263eae495e5c63.png)

5.  右键单击需要设置属性的签出项目的根目录。

6.  点击“导入”

7.  选择您在上面第 4 步中导出的文件

8.  点击打开

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-08T11:02:16.213

为什么不能简单地安装一个颠覆服务器？如果您下载免费的[VisualSVN 服务器](http://www.visualsvn.com/server/)，您将获得一个用于源代码的 http 服务器，因此可以使用 FogBugz 脚本来集成两者。

我问的原因是因为到目前为止所有脚本和文档都假设您拥有服务器，客户端脚本对于 FogBugz 来说太新而无法为其提供模板，因此您几乎可以使用自己的设备。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-13T13:08:28.757

问题是 FogBugz 会链接到网页，而 file:///etc 不是网页。要获得两种方式的集成，您需要一个用于您的 subversion 存储库的 Web 服务器。设置 Apache 或其他可以以正确方式托管这些东西的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-08T11:34:20.157

我不确定我是否跟随你。您在网络上或 C:\ 驱动器上是否有存储库？根据你的两个帖子，你两者都有，或者都没有，或者其中一个或者......

您无法让 VisualSVN 或 Apache 从网络共享安全地提供存储库。由于您最初说您的 C:\ 驱动器上有存储库，这就是您得到建议的原因。如果您有不同的设置，您需要告诉我们。

如果您在本地硬盘上有存储库，我会安装 VisualSVN，或将其集成到 Apache 中。VisualSVN 可以与 Apache 一起正常运行，所以如果你走这条路，你只需要安装它。您现有的存储库也可以复制到 VisualSVN 的存储库根目录中，然后您就可以启动并运行了。

我不确定为什么这里的那个大帖子被标记为不完整，因为它详细说明了设置挂钩脚本以通知 FogBugz 与案例相关的新修订的必要步骤，这应该是*不完整*的消息所说的不做. 那不工作吗？

# php - PHP 错误 - 上传文件

> ID：3611
> 
> 赞同：18
> 
> 时间：2008-08-06T16:13:02.250
> 
> 标签：php, iis, upload

我正在尝试编写一些 PHP 来将文件上传到我的网络服务器上的文件夹。这是我所拥有的：

```
<?php
    if ( !empty($_FILES['file']['tmp_name']) ) {
        move_uploaded_file($_FILES['file']['tmp_name'], './' . $_FILES['file']['name']);
        header('Location: http://www.mywebsite.com/dump/');
        exit;
    }
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
    <head>
        <title>Dump Upload</title>
    </head>
    <body>
        <h1>Upload a File</h1>
        <form action="upload.php" enctype="multipart/form-data" method="post">
            <input type="hidden" name="MAX_FILE_SIZE" value="1000000000" />
            Select the File:<br /><input type="file" name="file" /><br />
            <input type="submit" value="Upload" />
        </form>
    </body>
</html> 
```

我收到这些错误：

> 警告：move_uploaded_file(./test.txt) [function.move-uploaded-file]：无法打开流：第 3 行 E:\inetpub\vhosts\mywebsite.com\httpdocs\dump\upload.php 中的权限被拒绝
> 
> 警告：move_uploaded_file() [function.move-uploaded-file]：无法将 'C:\WINDOWS\Temp\phpA30E.tmp' 移动到 E:\inetpub\vhosts\mywebsite.com\ 中的 './test.txt'第 3 行的 httpdocs\dump\upload.php
> 
> 警告：无法修改标头信息 - 标头已由 E:\inetpub\vhosts\mywebsite.com\httpdocs\ 中的（输出开始于 E:\inetpub\vhosts\mywebsite.com\httpdocs\dump\upload.php:3）发送第 4 行转储\upload.php

PHP 版本 4.4.7 在 Windows 机器上运行 IIS。这个特定的文件/文件夹有 777 权限。

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-12-13T17:17:01.657

我的天啊

```
move_uploaded_file($_FILES['file']['tmp_name'], './' . $_FILES['file']['name']); 
```

不要那样做。`$_FILES['file']['name']`可能是`../../../../boot.ini`或任何数量的坏事。你永远不应该相信这个名字。您应该将文件重命名为其他名称，并将原始名称与您的随机名称相关联。最少使用`basename($_FILES['file']['name'])`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-06T16:16:01.667

因为它是 Windows，所以没有真正的 777。如果您使用的是[chmod](http://fr2.php.net/manual/en/function.chmod.php)，请查看与 Windows 相关的注释。

检查 IIS 帐户是否可以访问（读取、写入、修改）这两个文件夹：

```
E:\inetpub\vhosts\mywebsite.com\httpdocs\dump\
C:\WINDOWS\Temp\ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-07T12:06:45.817

尝试添加路径。以下代码适用于我：

```
<?php

if ( !empty($_FILES['file']) ) {
    $from = $_FILES['file']['tmp_name'];
    $to = dirname(__FILE__).'/'.$_FILES['file']['name'];

    if( move_uploaded_file($from, $to) ){
        echo 'Success';   
    } else {
        echo 'Failure';   
    }

    header('Location: http://www.mywebsite.com/dump/');
    exit;
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T16:15:21.637

警告：move_uploaded_file() [function.move-uploaded-file]：无法将 'C:\WINDOWS\Temp\phpA30E.tmp' 移动到 E:\inetpub\vhosts\mywebsite.com\ 中的 './people.xml'第 3 行的 httpdocs\dump\upload.php

是重要的一行，它说你不能把文件放在你想要的地方，这通常意味着权限问题

检查运行应用程序的进程（通常是 php 的 webservers 进程）是否有权在其中写入文件。

编辑：

稍等一下，我有点过分了，第一行文件的路径是否正确？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-12T17:14:23.050

另一个需要注意的是您的目录分隔符，您在 Windows 框中使用 / ..

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-12-03T04:12:43.020

在“转储”文件夹安全权限组中添加 IIS 用户，并为其授予读/写访问权限。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-16T12:51:29.290

使用文件夹权限创建一个名为“image”的文件夹`777`

```
<?php
    move_uploaded_file($_FILES['file']['tmp_name'],"image/".$_FILES['file']['name']);
?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-05T17:59:49.113

我们发现使用以下路径

`{['DOCUMENT_ROOT'] + 'path to folder'`

并让每个人都可以完全访问该文件夹，从而解决了这个问题。

确保不要在地址栏中显示位置。放弃位置没有任何意义。

# .net - 将 SQLite 与 Visual Studio 2008 和 Silverlight 一起使用

> ID：3615
> 
> 赞同：9
> 
> 时间：2008-08-06T16:14:15.100
> 
> 标签：.net, silverlight, sqlite

任何人都知道使用上述工具引用 SQLite 数据库的好方法吗？我尝试使用 ODBC（SQLite 驱动程序），但是虽然连接良好，但没有返回任何数据。就像我在数据连接（VS 2008）中看不到任何表一样。有没有更好的办法？

*编辑：纠正错别字*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-10T02:38:27.843

Joel Lucsy：SQLite 的实现是 Silverlight 不支持的混合模式程序集。只有纯托管实现才能在 Silverlight CLR 下工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-06T16:47:09.840

您是否尝试过 SQLite 的 ADO 驱动程序？

有一个很棒的快速入门指南（感谢这里的另一个线程），您可以在这里获得：http://web.archive.org/web/20100208133236/http: [//www.mikeduncan.com/sqlite-on-dotnet- 3分钟内/](http://web.archive.org/web/20100208133236/http://www.mikeduncan.com/sqlite-on-dotnet-in-3-mins/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-01-02T18:55:23.317

MIT 许可的[C#-SQLite](http://code.google.com/p/csharp-sqlite)可能是正确的解决方案。它是一个完整的 SQLite 托管端口，因此可以与 Silverlight 一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-02T15:32:51.507

你应该试试[Siaqodb](http://siaqodb.com/)。我尚未对其进行测试，但他们提到它适用于 Silverlight OOB 应用程序，甚至[在此处](http://siaqodb.com/?p=174)为您提供教程。
它是商业软件，但可以试用 30 天。

# devexpress - 什么是 System.Windows.Forms.LinkBut ton 的 Developer Express 等价物？

> ID：3625
> 
> 赞同：3
> 
> 时间：2008-08-06T16:20:06.290
> 
> 标签：devexpress

我似乎找不到 Developer Express 版本的`LinkButton`. （Windows 窗体链接按钮，而不是`ASP.NET`链接按钮。） `HyperLinkEdit`似乎不是我想要的，因为它看起来像一个 TextEdit/TextBox。

有谁知道他们的版本是什么？我正在使用最新的 DevX 控件：8.2.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T14:12:29.407

该控件称为 HyperLinkEdit。您必须调整属性以使其行为类似于 System.Windows.Forms 控件，如下所示：

```
 control.BorderStyle = BorderStyles.NoBorder;
    control.Properties.Appearance.BackColor = Color.Transparent;
    control.Properties.AppearanceFocused.BackColor = Color.Transparent;
    control.Properties.ReadOnly = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-06T18:12:58.013

您可能应该只使用标准的 ASP.Net LinkBut​​ton，除非它确实缺少您需要的东西。

# html - HTML 版本选择

> ID：3654
> 
> 赞同：23
> 
> 时间：2008-08-06T16:40:23.130
> 
> 标签：html, xml, xhtml

在开发新的基于 Web 的应用程序时，您应该针对哪个版本的 html？

编辑：

很酷，我只是想从其他人那里得到一种感觉，我在自己的工作中倾向于使用 XHTML 1.0 Strict，而当其他人参与内容创建时，我倾向于使用 Transitional。

我将第一个 XHTML 1.0 过渡帖子标记为“正确答案”，但我坚信当时给出的所有答案都同样有效。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-08-06T17:10:25.317

HTML 4.01。绝对**没有理由**使用 XHTML 来解决您只想在“晦涩”的 Web 浏览器上运行的实验或学术问题。

*即使对那些*浏览器来说， XHT​​ML 过渡也是完全没有意义的，所以我不确定为什么有人会以此为目标。很多人会推荐它，这实际上非常令人担忧。

我想说以 HTML 4.01 为目标是最可预测的，但 Teifion 确实是对的，“任何呈现您的页面的东西都可以”。

回应[迈克尔·斯图姆](https://stackoverflow.com/questions/3654/html-version-choice#3659)：

> XHTML 是基于 XML 的，因此它可以更轻松地进行解析，并且您还可以使用大多数 IDE 的 XML 组件以编程方式查询和插入内容。

这当然不是真的。Web 上的许多 XHTML（如果不是大多数）不符合 XML 有效性（而且它不需要 - 它不是作为 XML 发送的）。在处理它时试图像 XML 一样对待它只会让您头疼不已。例如，Stack Overflow 上的这个页面会使用许多无情的 XML 工具产生错误，因为它们具有无效的标记。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-06T16:43:00.410

我会为 XHTML Transitional 1.0 拍摄。仍然存在一些不喜欢严格的 XHTML 的细微差别，而且我现在看到的大多数编辑器都会给您适当的推动以确保事情正确完成。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-11T12:55:24.533

**不推荐使用 XHTML 和 HTML 的过渡**风格。它们仅适用**于不支持 CSS 的旧用户代理**。请参阅[DTD 中的说明](http://www.w3.org/TR/REC-html40/sgml/loosedtd.html)。

W3C 建议您应该尽可能使用 Strict，而现在它肯定是可能的。

XHTML/1.1 和 HTML5 中已经删除了过渡版本。

* * *

XHTML/1.0 具有与 HTML4 完全相同的元素和属性（语义）。XHTML/1.0 规范甚至没有指定任何元素！除了语法之外，它指的是 HTML4。

此外，如果您以 . 格式发送文档，您将无法使用 HTML（命名空间、XML DOM）中不可用的任何 XHTML 功能，`text/html`不幸的是，这是与 IE 和其他仅支持 HTML 的浏览器兼容所必需的。

在 2008 年，正确的选择是 HTML4 Strict：

> `<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">`

但截至 2016 年，只有[一个版本的 HTML](https://html.spec.whatwg.org/multipage/)很重要。

```
 <!DOCTYPE html> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-06T16:46:26.143

Dillie-O 对 XHTML 1.0 Transitional 的回答是正确的，但我建议为 XHTML 1.0 Strict 拍摄，并且只有在您绝对需要 Strict 不允许的某些功能时才使用 Transitional。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-06T20:27:27.883

@麦克风：

虽然我同意渲染页面不需要有效性（毕竟，我们必须保持 IE6 兼容性......），但创建兼容且有效的有效 XHTML 不是问题。当人们习惯了 HTML 4 并使用过时的标签和属性时，问题就开始了。

仅仅因为 Web 是一堆废话并不意味着每个新页面也必须是一堆废话。SO 上的大多数验证错误都是微不足道的，修复应该不会花费太长时间，例如缺少属性上的引号。

但这可能仍然毫无意义，因为 W3C 并不知道他们想去哪里（参见 HTML 5），而且某家大型浏览器公司也生产操作系统也不在乎，所以一个站点也可以发送它的 doctype，因为 HTML 1337 Sucks 并且浏览器仍然会尝试呈现它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-21T16:46:27.167

关于 XHTML 的使用有一些[令人信服的](http://friendlybit.com/html/why-xhtml-is-a-bad-idea/) [警告](http://www.autisticcuckoo.net/archive.php?id=2005/03/14/xhtml-is-dead)，主要围绕这样一个事实，即此类文档的 mime-type 应该发送为：

`Content-type: application/xhtml+xml`

然而 IE 6 和 7 不支持这一点，然后网站必须将其发送为：

`Content-type: text/html`

不幸的是，这种方法被[认为是有害](http://www.hixie.ch/advocacy/xhtml)的。

一些人还抱怨这样一个事实，虽然 XHTML 的目的是使网页可以被 XML 解析器解析，但由于在现有网站上的不正确使用，它在实践中失败了。

我仍然更喜欢用 XHTML 1.0 Strict 编写文档，主要是因为挑战，以及[验证器提供的](http://validator.w3.org/)[简洁](http://www.alistapart.com/articles/betterliving/)性和错误检查。我更喜欢这种语法，因为它迫使我在标签结束时非常明确，等等。这对我来说更多的是个人选择，而不是纯粹的技术。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-06T16:43:45.680

无论您使用哪种流行标准，任何呈现您的页面的东西都会这样做。XHTML 更严格并且可能“更好”，但我看不出使用一种标准相对于另一种标准会有什么优势。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-06T16:44:28.410

就个人而言，我更喜欢 XHTML 1.0 Transitional。

XHTML 是基于 XML 的，因此它可以更轻松地进行解析，并且您还可以使用大多数 IDE 的 XML 组件以编程方式查询和插入内容。

Transitional 不像 strict 那样严格，这使得它相对容易使用，与通常可以是 PITA 的 strict 相比。[过渡和严格的比较](http://brainstormsandraves.com/archives/2003/10/21/xhtml/)

1.0 比 1.1 更“兼容”，而 1.1 似乎仍在某种开发中。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-06T20:20:23.013

我的目标是 XHTML 1.0 Trans。最好符合标准，这样当浏览器中的错误得到修复时，您就不会突然争分夺秒地试图找出实际需要更改的内容。

在我看来，1.1 是无聊的，而 2.0 已经被粉碎了：我真的需要/想要一个页眉/页脚标签吗？

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-21T15:54:21.020

我每次都支持 XHTML Strict。我坚信 HTML 应该更像 XML。如果您了解 XML 并且 W3 的验证器 i 指出您在正确的轨道上，那么验证它并不难。

XHTML 2.0 正朝着 W3 长期以来的目标——语义网迈进。XHTML 2.0 对我来说最大的好处是 Web 上的每个符合标准的页面都可以作为内容或文章（因为这就是页面 - 文档）来理解，因为它们都适用于相同的标准。然后，您将能够构建以完全不同的方式呈现内容的解释器（即浏览器）——实际上有成千上万的想法在这里等待。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-10-11T14:21:57.260

如果您想以与 HTML 兼容的方式使用 XHTML 1.0，那很好。但是，请注意 W3C 验证器和 XHTML DTD 对 mime 类型以及浏览器如何在它们之间进行不同的行为（如 <map> 名称/id 匹配）一无所知。DTD 也不知道浏览器对某些元素的支持程度（例如 <embed> ）。

这意味着 XHTML DTD 和验证器不能反映现实，试图遵循它们是没有意义的。

如果您想使用 XHTML 以便可以使用 /> 关闭某些元素（其中与 html 兼容），只需使用 HTML5 标记（因此浏览器处于完全标准模式）。HTML5 允许以与 HTML 兼容的方式使用 />（与使用带有 text/html 的 XHTML 1.0 标记时必须使用的与 HTML 兼容的方式相同）。然后，只需坚持在浏览器中有效的方法（您比某些 DTD 更清楚）。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title></title>
    </head>
    <body>
        <p>Line1<br/>Line2</p>
        <p><img src="" alt="blank"/></p>
        <p><input type="text"/></p>
        <p><embed type="application/x-something" src=""/></p>
    </body>
</html> 
```

然后，使用[http://validator.nu/](http://validator.nu/)确保它至少格式正确。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2010-01-10T12:08:41.387

如果您有生成 XHTML 的工具，就像任何其他 XML 文档一样，那么请使用 XHTML。但是当您只使用纯文本模板、文本连接等时，您可以使用良好的旧 HTML 4.01。

浏览器现在开始支持这个已有 10 年历史的标准。

重要提示：[在生成 XML 时避免被称为笨蛋](http://hsivonen.iki.fi/producing-xml/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-11T14:54:59.847

我认为您使用 XHTML 还是纯 HTML 并不重要。这里的最终目标是通过可预测的渲染实现低维护和快速开发。只要您有验证代码，您就可以通过使用 xhtml 或 html 来获得它。我什至听说过最好针对 quirks 模式的争论，因为新版本的浏览器不会更改 quirks 模式，因此维护起来很容易。

最后，这一切都变成了标签汤，这是有充分理由的，因为让 Web 应用程序开发人员编写无错误的 html 意味着要求他们编写无错误的代码。验证器没有帮助，因为它们只验证初始页面视图。这也是为什么我从来没有看到 xhtml 中的点作为 xml 用于静态站点之外的任何东西。Web 应用程序开发人员需要为他们的 Web 应用程序提供服务所需的傲慢程度，因为 xml 是惊人的。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2008-10-17T18:24:02.247

HTML 4.0 Strict 或 ISO HTML。

# apache-flex - 您可以从 Adob e Air 访问 Windows 注册表吗？

> ID：3666
> 
> 赞同：8
> 
> 时间：2008-08-06T16:47:41.850
> 
> 标签：apache-flex, actionscript-3, air

（是/否）

编辑：只读访问很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2011-06-23T17:33:07.070

我还没有尝试过，但我想我找到了解决方法。

Adobe AIR 无法写入 Windows 注册表，但是您可以在 AIR 2 中启动本机进程。这里有一篇博客文章展示了如何做到这一点：http: [//www.adobe.com/devnet/air/flex/quickstart /articles/interacting_with_native_process.html](http://www.adobe.com/devnet/air/flex/quickstart/articles/interacting_with_native_process.html)

现在，在 Windows 上，您可以使用 .reg 文件修改 Windows 注册表。.reg 文件只是由 regedit.exe 读取的纯文本文件。所以理论上，您可以将.reg 文件写入文件系统，然后使用传入的.reg 文件启动regedit.exe 并...TADA！您刚刚从 AIR 应用程序修改了 Windows 注册表！

要读取值，您可以使用 regedit 的导出功能写入 reg 文件并从 reg 文件中读取。regedit 选项的详细信息：[http ://www.robvanderwoude.com/regedit.php](http://www.robvanderwoude.com/regedit.php)

以下是一些附加资源：
.reg 文件语法： http: [//support.microsoft.com/kb/310516](http://support.microsoft.com/kb/310516)
使用 AIR 写入文件：http: [//www.adobe.com/devnet/air/flex/articles/exploring_file_capabilities。 html](http://www.adobe.com/devnet/air/flex/articles/exploring_file_capabilities.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-07T16:37:02.557

如果您愿意强制用户也安装另一个应用程序，您可以编写一个小型 C# 或 C++ Windows 服务，它只需打开一个提供某种协议来访问注册表的 Socket。然后在 AIR 中，您可以使用 Socket 类向/从 C# 服务发送消息，该服务会将结果返回给 AIR 应用程序。

当应用程序加载时，您可以尝试连接到 Socket，如果连接被拒绝，您可以提示用户下载/安装服务。

至于直接访问注册表，我很确定 Adob​​e 不会允许从 AIR 访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-19T04:47:45.317

> 如果可以，我会很害怕。

你为什么会害怕？Air 是一个桌面平台，访问操作系统的 API（例如注册表访问）非常有意义。

话虽如此，它现在不受支持（而且由于 Adob​​e 似乎非常以 Mac 为中心，我怀疑它是否会被添加）。

> 我已经决定从用户目录的名称中获取用户名

使用 File.userDirectory.name 在大多数情况下都可以使用，但它似乎是一个非常脆弱的实现，它依赖于操作系统维护将用户名作为其目录的约定。我可以想到一些可能会破坏它的事情（使用 TweakUI 等）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T22:32:52.890

有点晚了，但是当项目快完成时，我从客户那里得到了一个愿望，从注册表中读取一些值。如果有更多这样的愿望，我永远不会选择 AIR。但是我从 FluorineFx 中找到了一个不错的扩展，通过扩展它，我现在可以从注册表中读取字符串和 dword 值。仅限 Windows： http: [//aperture.fluorinefx.com/](http://aperture.fluorinefx.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-07T20:02:21.473

Are you trying to determine if the user is an administrator or not?

If so you could grad the username by with "File.userDirectory.name".

And I think to figure out if the user is an administrator you could probably try to access a file that requires administrator privileges (maybe try writing a file to Windows/System32). If the file access fails you could probably assume that the user is under a Limited account.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-23T19:49:06.360

Here is a sample of modifying Windows Registry in Adobe Air using NativeProcess and Python. So you can Add, Delete or Read keys by only a single line of code !!

Download: [Adobe Air Registry Modifier](https://github.com/yaa110/Adobe-Air-Registry-Modifier) on Github

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-07T16:39:35.690

理论上您可以修改实际的注册表文件，但我强烈反对这种想法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-07T20:19:24.497

Be very careful if you decide to create a socket server that listens for registry commands. You are potentially creating a security hole and users' personal firewalls may get in the way in terms of usability.

# svn - 您最喜欢的 SVN 网络应用部署工作流程是什么？

> ID：3667
> 
> 赞同：15
> 
> 时间：2008-08-06T16:48:24.127
> 
> 标签：svn, deployment

我们目前正在使用一个有点复杂的部署设置，其中涉及一个远程 SVN 服务器，3 个用于 DEV、STAGE 和 PROD 的 SVN 分支，通过补丁等来促进它们之间的代码。我想知道您在小型开发团队情况下使用什么部署?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-08-26T23:45:56.213

用于开发的主干，以及用于生产材料的分支（生产）。

在我的本地机器上，我有一个指向主干分支的 VirtualHost 来测试我的更改。

对主干的任何提交都会触发一个提交钩子，该钩子会执行 svn 导出并同步到在线服务器的开发 URL - 所以如果站点是 stackoverflow.com，那么这个钩子会自动更新 dev.stackoverflow.com

然后我使用 svnmerge 将选定的补丁从主干合并到本地结帐中的生产。我的本地机器上又有一个指向生产分支的 VirtualHost。

当我将合并的更改提交到生产分支时，SVN 导出挂钩再次更新生产（实时）导出并且该站点处于活动状态！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-06T17:18:58.357

当我在一个小型开发团队工作时（小的意思是我，另一个程序员和老板），那是相当混乱的一团糟。但是，我们发现分配“看门人”类型的流程对我们有用。

看门人是在应用程序上完成最多工作的人（在这种情况下，我有 2 个我从头开始开发的项目，他有 4 个）。

基本上，每当他必须处理我的项目时，他都会通知我他正在工作，我会确保存储库是最新的并且可构建，然后他会下拉，进行更改，然后提交. 他会告诉我它已经完成，我会拉下，构建和部署。如果有 DB 更改，我们有一个 DB Change 文件夹，其中包含所有可以更正 DB 的脚本。

它显然有很多漏洞，但这个过程对我们有用，并且让我们无法相互建立。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-07T21:35:29.117

三个分支听起来像是额外的工作。

可以通过在主干中具有不同版本的相关文件来处理环境差异。即database.yml & database.yml.prod。部署过程应该具有环保意识，只需将每个环境的文件复制到默认文件上即可。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-04T14:17:08.913

我对常见的标签/分支/主干组织没有任何问题。

一般的持续开发发生在主干中。

生产中发布的维护发生在适当的发布分支中。

合并仍然与主干相关的发布分支的更改。

当一个新版本准备好部署时，它会从主干标记，然后从该标记创建一个分支。新的发布分支被检出到服务器，与当前发布平行。当需要切换时，路径会被调整（“mv appdir appdir.old && mv appdir.new appdir”）。

支持生产版本的开发人员然后 svn 将他们的工作副本切换到新分支，或者从它进行新的检查。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-06T16:53:36.020

一个简单的主干分支包含最新的代码，然后在我们上线时剪切一个分支。这似乎非常有效。每当您为实时系统剪切的当前分支失败时，您都可以轻松转到上一个分支。此外，修复当前活动分支上的错误很容易，并且由于当您剪切一个新分支时该分支实际上会死掉，所以您只需要处理 1 个真正的分支（然后将修复从那里合并到活分支）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-17T18:52:14.333

我们不使用分支来暂存与 Web 相关的内容；仅用于测试需要很长时间（阅读：超过一天）才能合并回主干的实验性事物。以“持续集成”风格的主干代表（希望）工作的当前状态。

因此，大多数更改都会直接提交到主干。CruiseControl.NET 服务器将在同样运行 IIS 并拥有所有额外站点可用资源的最新副本的机器上自动更新，因此可以在内部对站点进行全面、干净的测试。经过测试，文件上传到公共服务器。

我不会说这是完美的方法，但它很简单（因此适合我们相对较小的员工）并且相对安全，而且效果很好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-04T06:10:35.340

Trunk 包含当前的“主要”开发代码库。

开发人员通常会为任何可能占用主干代码库并妨碍其他开发人员的中长期项目创建一个单独的分支。当他完成后，他将合并回树干。

每次将代码推送到生产环境时，我们都会创建一个标记发布。/tags 中的文件夹只是版本号。

为了部署到生产环境，我们正在执行 SVN Export to Staging。当这令人满意时，我们使用一个简单的 rsync 来推广到生产集群。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-04-30T12:41:39.020

我强烈推荐这本书（目前是粗略的）[持续交付](http://my.safaribooksonline.com/9780321670250)，它描述了基于持续集成原则（以及其他）管理软件交付的完整过程。

我非常不喜欢分支和合并方法，因为它会变得非常混乱，并且非常浪费，因为您最终将时间花在实际上并没有带来任何新价值的活动上。您已经开发、测试和修复了一次代码，为什么要创建一个需要您重做这项工作的情况（将代码复制到另一个分支）？

无论如何，避免分支和合并的方法是从主干构建可部署的人工制品，并在通过测试、登台等时推广构建的人工制品（而不是源代码）。这样你就 100% 确定你是投入生产与您测试过的相同。

If you've got different features which may need to be released on different schedules, changing your approach to how you implement (make functionality configurable, or better yet modular) can help you keep a single development trunk.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-26T23:50:45.530

我们使用发布分支——这对我们来说似乎比我们正在做的功能分支更有效。

不要为不同的环境制作不同的分支。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-04T11:58:30.190

我个人在本地工作（开发），添加/修复功能，当我认为它准备好时，我会致力于主干（生产）。在生产服务器上，我只是进行 svn 更新。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-04T13:01:04.387

我的工作情况与您目前的情况类似。我的任务是找到一个“更好”的解决方案，它按照以下方式运行。

实时分支代表处于当前状态的服务器。

任何开发工作都应该在取自 live 的分支中完成。这可能是一个人半小时的工作或长达一年的多团队项目。只要喜欢，生活的变化就可以合并到这些开发分支中。

在某项工作上线之前，来自 live 的更改会再次合并，并将其标记为潜在版本。此版本在暂存环境中进行测试，如果通过测试，则从标签中获取新版本。

如果效果更好，可以将多个工作合并到一个版本中。

这意味着让开发分支保持最新状态是相当简单的，如果开发中的一项工作被丢弃，则需要做的整理工作很少。

要从一个项目切换到另一个项目，开发人员可以简单地 svn 将他们的本地工作环境切换到不同的分支。

正如您所描述的，我们在系统中遇到的问题之一是 DEV 可以很快地与 PROD 过时，因此您不会针对实时进行开发，并且在阶段之前很难发现交叉依赖关系。上述解决方案解决了这些问题，同时仍然保持相当轻量级。

# sql - 表的时间分布

> ID：3682
> 
> 赞同：12
> 
> 时间：2008-08-06T16:58:34.153
> 
> 标签：sql, mysql

我有一个 MySQL 表，每个用户大约有 3000 行。其中一列是一个日期时间字段，它是可变的，因此行不是按时间顺序排列的。

我想在图表中可视化时间分布，所以我需要一些单独的数据点。20 个数据点就足够了。

我可以这样做：

```
select timefield from entries where uid = ? order by timefield; 
```

并查看每 150 行。

或者我可以做 20 个单独的查询并使用`limit 1`and `offset`。

但必须有一个更有效的解决方案......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-01T01:49:27.897

Michal Sznajder 几乎拥有它，但您不能在 SQL 的 WHERE 子句中使用列别名。因此，您必须将其包装为派生表。我试过了，它返回 20 行：

```
SELECT * FROM (
    SELECT @rownum:=@rownum+1 AS rownum, e.*
    FROM (SELECT @rownum := 0) r, entries e) AS e2
WHERE uid = ? AND rownum % 150 = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-06T17:06:44.247

我想到了这样的事情

```
select @rownum:=@rownum+1 rownum, entries.* 
from (select @rownum:=0) r, entries 
where uid = ? and rownum % 150 = 0 
```

我手头没有 MySQL，但也许这会有所帮助......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-01T02:07:33.347

就可视化而言，我知道这不是您正在谈论的定期采样，但我会查看用户的所有行并选择一个间隔桶，桶内的 SUM 并显示在条形图或类似物中。这将显示一个真正的“分布”，因为在一个时间范围内的许多事件可能很重要。

```
SELECT DATEADD(day, DATEDIFF(day, 0, timefield), 0) AS bucket -- choose an appropriate granularity (days used here)
     ,COUNT(*)
FROM entries
WHERE uid = ?
GROUP BY DATEADD(day, DATEDIFF(day, 0, timefield), 0)
ORDER BY DATEADD(day, DATEDIFF(day, 0, timefield), 0) 
```

或者，如果您不喜欢必须重复自己的方式 - 或者如果您正在使用不同的存储桶并希望在 3-D 中分析许多用户（在 Z 中测量 x、y uid、存储桶）：

```
SELECT uid
    ,bucket
    ,COUNT(*) AS measure
FROM (
    SELECT uid
        ,DATEADD(day, DATEDIFF(day, 0, timefield), 0) AS bucket
    FROM entries
) AS buckets
GROUP BY uid
    ,bucket
ORDER BY uid
    ,bucket 
```

如果我想以 3-D 绘图，我可能会根据一些对用户有意义的整体指标来确定一种对用户进行排序的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-06T18:01:32.733

[@迈克尔](https://stackoverflow.com/questions/3682/sql-distribution-of-table-in-time#3691)

无论出于何种原因，您的示例仅在 where @recnum 使用小于运算符时才有效。我认为当 where 过滤掉一行时，rownum 不会增加，它不能匹配其他任何东西。

如果原始表有一个自动递增的 id 列，并且行是按时间顺序插入的，那么这应该有效：

```
select timefield from entries
where uid = ? and id % 150 = 0 order by timefield; 
```

当然，如果 id 和 timefield 之间没有相关性，那是行不通的，除非您实际上并不关心获得均匀间隔的 timefields，只关心 20 个随机 timefields。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-27T16:14:36.443

您真的关心各个数据点吗？或者使用日期数的统计聚合函数就足以告诉您您想知道什么？

*   [平均](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg)
*   [STDDEV_POP](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_stddev-pop "STDDEV_POP")
*   [方差](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_variance "方差")
*   [TO_DAYS](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_to-days "TO_DAYS")

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-27T16:37:10.760

```
select timefield
from entries
where rand() = .01 --will return 1% of rows adjust as needed. 
```

不是 mysql 专家，所以我不确定 rand() 在这个环境中是如何运行的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-27T11:36:00.383

对于我的参考 - 以及那些使用 postgres 的人 - Postgres 9.4 将具有应该解决这个问题的有序集合聚合：

```
SELECT percentile_disc(0.95) 
WITHIN GROUP (ORDER BY response_time) 
FROM pageviews; 
```

资料来源：[http ://www.craigkerstiens.com/2014/02/02/Examineing-PostgreSQL-9.4/](http://www.craigkerstiens.com/2014/02/02/Examining-PostgreSQL-9.4/)

# javascript - 从 JavaScript 调用 ASP.NET 函数？

> ID：3713
> 
> 赞同：142
> 
> 时间：2008-08-06T17:16:36.630
> 
> 标签：javascript, c#, asp.net, onclick

我正在用 ASP.NET 编写网页。我有一些 JavaScript 代码，并且有一个带有点击事件的提交按钮。

是否可以使用 JavaScript 的点击事件调用我在 ASP 中创建的方法？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2008-08-06T18:04:25.270

好吧，如果您不想使用 Ajax 或任何其他方式来执行此操作，而只想进行正常的 ASP.NET 回发，那么您可以这样做（不使用任何其他库）：

*虽然有点棘手...... :)*

一世。在您的代码文件中（假设您使用 C# 和 .NET 2.0 或更高版本）将以下接口添加到您的 Page 类中，使其看起来像

```
public partial class Default : System.Web.UI.Page, IPostBackEventHandler{} 
```

ii. 这应该将（使用`Tab`- `Tab`）此函数添加到您的代码文件中：

```
public void RaisePostBackEvent(string eventArgument) { } 
```

iii. 在 JavaScript 中的 onclick 事件中，编写以下代码：

```
var pageId = '<%=  Page.ClientID %>';
__doPostBack(pageId, argumentString); 
```

这将调用代码文件中的“RaisePostBackEvent”方法，并将“eventArgument”作为您从 JavaScript 传递的“argumentString”。现在，您可以调用您喜欢的任何其他事件。

PS：那是“下划线-下划线-doPostBack”……而且，该序列中不应该有空格……不知何故，WMD不允许我写下划线后跟一个字符！

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2008-08-11T19:03:48.667

该`__doPostBack()`方法效果很好。

另一个解决方案（非常骇人听闻）是在您的标记中简单地添加一个不可见的 ASP 按钮，然后使用 JavaScript 方法单击它。

```
<div style="display: none;">
   <asp:Button runat="server" ... OnClick="ButtonClickHandlerMethod" />
</div> 
```

*从您的 JavaScript 中，使用其ClientID*检索对按钮的引用，然后对其调用*.click()*方法。

```
var button = document.getElementById(/* button client id */);

button.click(); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-08-06T17:40:32.087

[Microsoft AJAX 库](http://www.asp.net/ajax/)将完成此操作。您还可以创建自己的解决方案，包括使用 AJAX 调用您自己的 aspx（基本上）脚本文件来运行 .NET 函数。

我建议使用 Microsoft AJAX 库。安装并引用后，您只需在页面加载或初始化中添加一行：

```
Ajax.Utility.RegisterTypeForAjax(GetType(YOURPAGECLASSNAME)) 
```

然后您可以执行以下操作：

```
<Ajax.AjaxMethod()> _
Public Function Get5() AS Integer
    Return 5
End Function 
```

然后，您可以在页面上调用它：

```
PageClassName.Get5(javascriptCallbackFunction); 
```

函数调用的最后一个参数必须是 AJAX 请求返回时将执行的 javascript 回调函数。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-08-06T17:23:53.027

您可以使用 .NET Ajax PageMethods 异步执行此操作。见[这里](http://web.archive.org/web/20170818234231/http://www.singingeels.com:80/Articles/Using_Page_Methods_in_ASPNET_AJAX.aspx)或[这里](http://weblogs.asp.net/sohailsayed/archive/2008/02/23/calling-methods-in-a-codebehind-function-pagemethods-from-client-side-using-ajax-net.aspx)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-05-21T11:28:22.263

我认为博客文章*[How to fetch & show SQL Server database data in ASP.NET page using Ajax (jQuery)](http://www.dotnetawesome.com/2013/12/how-to-fetch-show-sql-server-database-data-using-ajax-jquey.html)*将对您有所帮助。

**JavaScript 代码**

```
<script src="http://code.jquery.com/jquery-3.3.1.js" />
<script language="javascript" type="text/javascript">

    function GetCompanies() {
        $("#UpdatePanel").html("<div style='text-align:center; background-color:yellow; border:1px solid red; padding:3px; width:200px'>Please Wait...</div>");
        $.ajax({
            type: "POST",
            url: "Default.aspx/GetCompanies",
            data: "{}",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: OnSuccess,
            error: OnError
        });
    }

    function OnSuccess(data) {
        var TableContent = "<table border='0'>" +
                                "<tr>" +
                                    "<td>Rank</td>" +
                                    "<td>Company Name</td>" +
                                    "<td>Revenue</td>" +
                                    "<td>Industry</td>" +
                                "</tr>";
        for (var i = 0; i < data.d.length; i++) {
            TableContent += "<tr>" +
                                    "<td>"+ data.d[i].Rank +"</td>" +
                                    "<td>"+data.d[i].CompanyName+"</td>" +
                                    "<td>"+data.d[i].Revenue+"</td>" +
                                    "<td>"+data.d[i].Industry+"</td>" +
                                "</tr>";
        }
        TableContent += "</table>";

        $("#UpdatePanel").html(TableContent);
    }

    function OnError(data) {

    }
</script> 
```

**ASP.NET 服务器端函数**

```
[WebMethod]
[ScriptMethod(ResponseFormat= ResponseFormat.Json)]
public static List<TopCompany> GetCompanies()
{
    System.Threading.Thread.Sleep(5000);
    List<TopCompany> allCompany = new List<TopCompany>();
    using (MyDatabaseEntities dc = new MyDatabaseEntities())
    {
        allCompany = dc.TopCompanies.ToList();
    }
    return allCompany;
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-13T10:36:37.150

静态的强类型编程对我来说一直很自然，所以一开始我拒绝学习 JavaScript（更不用说 HTML 和 CSS），因为我不得不为我的应用程序构建基于 Web 的前端。只要我可以编写纯 C# 代码，我会做任何事情来解决这个问题，比如重定向到一个页面只是为了对 OnLoad 事件执行和操作。

然而你会发现，如果你要与网站打交道，你必须有一个开放的心态，并开始思考更多面向网络的想法（也就是说，不要试图在服务器上做客户端的事情，反之亦然） . 我喜欢 ASP.NET 网络表单并且仍然使用它（以及[MVC](http://en.wikipedia.org/wiki/ASP.NET_MVC_Framework)），但我会说，通过尝试使事情变得更简单并隐藏客户端和服务器的分离，它可能会使新手感到困惑，实际上有时会让事情变得更加困难.

我的建议是学习一些基本的 JavaScript（如何注册事件、检索 DOM 对象、操作 CSS 等），你会发现 Web 编程更有趣（更不用说更容易了）。很多人提到了不同的 Ajax 库，但我没有看到任何实际的 Ajax 示例，所以就在这里。（如果您不熟悉 Ajax，那么它就是发出异步 HTTP 请求来刷新内容（或者可能在您的场景中执行服务器端操作），而无需重新加载整个页面或执行完整的回发。

**客户端：**

```
<script type="text/javascript">
var xmlhttp = new XMLHttpRequest(); // Create object that will make the request
xmlhttp.open("GET", "http://example.org/api/service", "true"); // configure object (method, URL, async)
xmlhttp.send(); // Send request

xmlhttp.onstatereadychange = function() { // Register a function to run when the state changes, if the request has finished and the stats code is 200 (OK). Write result to <p>
    if (xmlhttp.readyState == 4 && xmlhttp.statsCode == 200) {
          document.getElementById("resultText").innerHTML = xmlhttp.responseText;
    }
};
</script> 
```

就是这样。尽管名称可能会产生误导，但结果也可以是纯文本或 JSON，但您不仅限于 XML。[jQuery](http://en.wikipedia.org/wiki/JQuery)提供了一个更简单的接口来进行 Ajax 调用（同时简化了其他 JavaScript 任务）。

请求可以是 HTTP-POST 或 HTTP-GET，并且不必发送到网页，但您可以发布到任何侦听 HTTP 请求的服务，例如[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services) API。ASP.NET MVC 4 Web API 也使设置服务器端 Web 服务来处理请求变得轻而易举。但是很多人不知道，您还可以将 API 控制器添加到 Web 表单项目中，并使用它们来处理这样的 Ajax 调用。

**服务器端：**

```
public class DataController : ApiController
{
    public HttpResponseMessage<string[]> Get()
    {
        HttpResponseMessage<string[]> response = new HttpResponseMessage<string[]>(
            Repository.Get(true),
            new MediaTypeHeaderValue("application/json")
        );

        return response;
    }
} 
```

**全球.asax**

然后只需在 Global.asax 文件中注册 HTTP 路由，这样 ASP.NET 就会知道如何引导请求。

```
void Application_Start(object sender, EventArgs e)
{
    RouteTable.Routes.MapHttpRoute("Service", "api/{controller}/{id}");
} 
```

使用 AJAX 和控制器，您可以随时异步回传到服务器以执行任何服务器端操作。这种一举两得的方式提供了 JavaScript 的灵活性和 C# / ASP.NET 的强大功能，为访问您网站的人们提供了更好的整体体验。在不牺牲任何东西的情况下，您可以两全其美。

**参考**

*   [阿贾克斯](http://www.w3schools.com/ajax/default.asp)，
*   [jQuery阿贾克斯](http://www.w3schools.com/jquery/jquery_ajax.asp)，
*   [网络表单中的控制器](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/using-web-api-with-aspnet-web-forms)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-08-25T17:25:36.917

> Microsoft AJAX 库将完成此操作。您还可以创建自己的解决方案，包括使用 AJAX 调用您自己的 aspx（基本上）脚本文件来运行 .NET 函数。

这是一个名为 AjaxPro 的库，它是由一个名为[Michael Schwarz](http://weblogs.asp.net/mschwarz/about.aspx)的 MVP 编写的。这是库不是由 Microsoft 编写的。

我已经广泛使用了 AjaxPro，它是一个非常好的库，我推荐它用于简单的服务器回调。它在 Microsoft 版本的 Ajax 中运行良好，没有任何问题。但是，我要指出，由于 Microsoft 使 Ajax 变得如此简单，我只会在真正需要时才使用它。只需将其放入更新面板即可完成一些从 Microsoft 获得的非常复杂的功能，这需要大量 JavaScript。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-08-12T12:48:36.457

如果要触发服务器端事件处理程序，例如 Button 的单击事件，这两种情况（即同步/异步）都非常容易。

用于触发控件的事件处理程序：如果您已经在页面上添加了 ScriptManager，则跳过第 1 步。

1.  在您的页面客户端脚本部分添加以下内容

    ```
    //<![CDATA[
    var theForm = document.forms['form1'];
    if (!theForm) {
        theForm = document.form1;
    }
    function __doPostBack(eventTarget, eventArgument) {
        if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
            theForm.__EVENTTARGET.value = eventTarget;
            theForm.__EVENTARGUMENT.value = eventArgument;
            theForm.submit();
        }
    }
    //]]> 
    ```

    2.  为您的控件编写服务器端事件处理程序

        protected void btnSayHello_Click(object sender, EventArgs e) { Label1.Text = "Hello World..."; }

    3.  添加客户端函数以调用服务器端事件处理程序

        函数 SayHello() { __doPostBack("btnSayHello", ""); }

将上面代码中的“btnSayHello”替换为控件的客户端 ID。

通过这样做，如果您的控件位于更新面板内，则页面将不会刷新。那太容易了。

要说的另一件事是：小心使用客户端 ID，因为它取决于您使用 ClientIDMode 属性定义的 ID 生成策略。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-11-12T21:01:08.693

> 我正在尝试实现这一点，但它无法正常工作。该页面正在回发，但我的代码没有被执行。当我调试页面时， RaisePostBackEvent 永远不会被触发。我做的不同的一件事是我在用户控件而不是 aspx 页面中执行此操作。

如果其他人像 Merk 一样，并且遇到了麻烦，我有一个解决方案：

当您拥有用户控件时，您似乎还必须在父页面中创建 PostBackEventHandler。然后您可以通过直接调用它来调用用户控件的 PostBackEventHandler。见下文：

```
public void RaisePostBackEvent(string _arg)
{
    UserControlID.RaisePostBackEvent(_arg);
} 
```

其中 UserControlID 是您在标记中嵌套父页面时赋予用户控件的 ID。

注意：您也可以直接调用属于该用户控件的方法（在这种情况下，您只需要父页面中的 RaisePostBackEvent 处理程序）：

```
public void RaisePostBackEvent(string _arg)
{
    UserControlID.method1();
    UserControlID.method2();
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-11T18:15:19.793

您可能希望为常用方法创建 Web 服务。
只需在要调用的函数上添加一个 WebMethodAttribute 即可，仅此而已。
拥有包含所有常用内容的 Web 服务也使系统更易于维护。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-08-26T16:19:38.667

如果页面上没有生成 __doPostBack 函数，则需要插入一个控件来强制它，如下所示：

```
<asp:Button ID="btnJavascript" runat="server" UseSubmitBehavior="false" /> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-11-27T06:30:08.907

关于：

```
var button = document.getElementById(/* Button client id */);

button.click(); 
```

它应该是这样的：

```
var button = document.getElementById('<%=formID.ClientID%>'); 
```

其中 formID 是 .aspx 文件中的 ASP.NET 控件 ID。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2010-05-10T11:57:19.050

感谢跨浏览器，这个回复对我来说就像轻而易举：

> __doPostBack() 方法效果很好。

另一个解决方案（非常骇人听闻）是在您的标记中简单地添加一个不可见的 ASP 按钮，然后使用 JavaScript 方法单击它。

```
<div style="display: none;"> 
    <asp:Button runat="server" ... OnClick="ButtonClickHandlerMethod" /> 
</div> 
```

从您的 JavaScript 中，使用其 ClientID 检索对按钮的引用，然后对其调用 .Click() 方法：

```
var button = document.getElementByID(/* button client id */); 

button.Click(); 
```

> 块引用

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2011-02-12T09:21:45.767

如果您收到对象预期错误，请将此行添加到页面加载。

```
ClientScript.GetPostBackEventReference(this, ""); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-06-15T07:06:18.990

您可以使用`PageMethods.Your C# method Name`以便将 C# 方法或 VB.NET 方法访问到 JavaScript。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-03-14T07:39:23.667

试试这个：

```
if(!ClientScript.IsStartupScriptRegistered("window"))
{
    Page.ClientScript.RegisterStartupScript(this.GetType(), "window", "pop();", true);
} 
```

或这个

```
Response.Write("<script>alert('Hello World');</script>"); 
```

使用按钮的 OnClientClick 属性调用 JavaScript 函数...

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-10-01T10:23:52.710

您也可以通过在 JavaScript 代码中添加这一行来获取它：

```
document.getElementById('<%=btnName.ClientID%>').click() 
```

我认为这个非常容易！

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-03-05T09:29:55.800

请试试这个：

```
<%= Page.ClientScript.GetPostBackEventReference(ddlVoucherType, String.Empty) %>; 
```

ddlVoucherType 是所选索引更改将调用的控件...您可以在此控件的所选索引更改上放置任何函数。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-12-05T09:29:16.373

实现这一点的最简单和最好的方法是使用`onmouseup()`JavaScript 事件而不是`onclick()`

这样，您将在单击后触发 JavaScript，并且它不会干扰 ASP`OnClick()`事件。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-03-15T18:07:02.723

我试试这个，所以我可以在使用 jQuery 时运行 Asp.Net 方法。

1.  在您的 jQuery 代码中执行页面重定向

    ```
    window.location = "Page.aspx?key=1"; 
    ```

2.  然后在页面加载中使用查询字符串

    ```
    protected void Page_Load(object sender, EventArgs e)
    {
        if (Request.QueryString["key"] != null)
        {
            string key= Request.QueryString["key"];
            if (key=="1")
            {
                // Some code
            }
        }
    } 
    ```

所以不需要运行额外的代码

# c# - 如何在 C# 中创建树视图首选项对话框类型的界面？

> ID：3725
> 
> 赞同：18
> 
> 时间：2008-08-06T17:22:27.350
> 
> 标签：c#, user-interface

我正在编写一个基本上只是一个首选项对话框的应用程序，很像 Visual Studio 本身使用的树视图首选项对话框。该应用程序的功能只是将数据从串行设备传递到文件。它在将数据写入文件之前对数据执行了很多很多转换，因此应用程序的 GUI 只是指示这些转换应该是什么的所有设置。

设计/编码树视图首选项对话框的最佳方法是什么？我一直在做的方式是在左侧构建带有停靠树控件的主窗口。然后我一直在创建与树的每个节点相对应的容器控件。选择节点时，应用程序将该节点的相应容器控件带到前面，将其移动到右侧位置，并将其最大化在主窗口中。这在设计时看起来非常非常笨拙。这基本上意味着我在设计时在主窗口边缘之外有大量容器控件，我必须不断滚动主窗口才能使用它们。我不知道这是否完全符合我写这篇文章的方式，但也许我正在谈论的这个视觉效果会更有意义：

![形式设计](../Images/4b5cb015f63836251f850733dab7fe0d.png)

基本上我必须使用这个巨大的表单，到处都是容器控件，然后进行一堆运行时重新格式化以使其全部工作。这似乎是*很多*额外的工作。我这样做是完全愚蠢的吗？是否有一些我缺少的“明显”更简单的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-08-06T18:02:31.480

一种更简洁的方法是为每个“窗格”创建单独的表单，并在每个表单构造函数中设置

```
this.TopLevel = false;
this.FormBorderStyle = FormBorderStyle.None;
this.Dock = DockStyle.Fill; 
```

这样，这些表单中的每一个都可以在自己的设计器中布局，在运行时实例化一次或多次，然后像普通控件一样添加到空白区域。

也许主窗体可以在一个面板中使用`SplitContainer`带有静态的 a `TreeView`，并在另一个面板中使用空间来添加这些表单。一旦它们被添加，它们可以通过使用`Hide/Show`或`BringToFront/SendToBack`方法来翻转。

```
SeparateForm f = new SeparateForm(); 
MainFormSplitContainer.Panel2.Controls.Add(f); 
f.Show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-06T18:20:29.947

格雷格·赫尔曼写道：

> 当在网格中选择一个节点时，为什么不只显示/隐藏正确的容器？让容器在同一位置的大小都适当，并隐藏除默认值之外的所有容器，默认值将在加载时在网格中预先选择。

不幸的是，这就是我试图避免的。我正在寻找一种在设计时处理界面的简单方法，只需最少的重新格式化代码即可使其在运行时工作。

我喜欢 Duncan 的回答，因为这意味着每个节点的接口设计可以*完全*分开。这意味着我不会在捕捉指南和其他设计时间优势上得到重叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-14T15:13:40.183

我可能会基于继承 CustomControl 的基类创建几个面板类。然后这些控件将具有诸如保存/加载之类的方法和类似的东西。如果是这样，我可以分别设计每个面板。

我使用了一个在设计模式下处理多个页面的向导控件，以便可以在设计器中单击下一步并通过设计器一次设计所有页面。尽管在将代码连接到控件时这有几个缺点，但这可能意味着您可以通过构建一些设计器类来进行类似的设置。我自己从来没有在 VS 中编写过任何设计器类，所以我不能说如何或是否值得:-)

我有点好奇您打算如何处理向/从控件加载/保存值？如果你所有的页面都在一个大表单中，那么一个类中一定有很多代码吗？

还有另一种方法当然是在请求每个页面时生成 gui 代码，使用有关设置类型的信息。

# sharepoint - Sharepoint：从计时器作业执行 stsadm + SHAREPOINT\System 权限

> ID：3739
> 
> 赞同：8
> 
> 时间：2008-08-06T17:27:19.883
> 
> 标签：sharepoint, timer, privileges, stsadm, event-viewer

我有一个不寻常的情况，我需要一个 SharePoint 计时器作业来同时拥有本地管理员窗口权限和`SHAREPOINT\System`SharePoint 权限。

我可以通过简单地将计时器服务配置为使用本地管理员成员的帐户来获得 Windows 权限。我知道这不是一个好的解决方案，因为它为 SharePoint 计时器服务提供了比它应该拥有的更多权利。但它至少允许我的 SharePoint 计时器作业运行`stsadm`。

在本地管理员下运行计时器服务的另一个问题是，此用户不一定具有`SHAREPOINT\System`SharePoint 权限，而我也需要此 SharePoint 作业。事实证明，`SPSecurity.RunWithElevatedPrivileges`在这种情况下不起作用。Reflector 显示`RunWithElevatedPrivileges`检查当前进程是否是`owstimer`（运行 SharePoint 作业的服务进程）并且不执行提升是这种情况（我猜这里的原因是计时器服务应该在`NT AUTHORITY\NetworkService`具有`SHAREPOINT\System`SharePoint的 Windows 帐户下运行权限，因此无需提升计时器作业的权限）。

这里唯一可能的解决方案似乎是在其通常的 NetworkService windows 帐户下运行计时器服务，并通过将管理员凭据存储在某处并通过 StarInfo 的用户名将它们传递给 System.Diagnostics.Process.Run() 以本地管理员身份运行 stsadm 、域和密码。

现在看来一切都应该正常了，但这是我目前遇到的另一个问题。Stsamd 失败并出现以下错误弹出窗口 (!)（Winternals filemon 显示在这种情况下 stsadm 正在管理员下运行）：

`The application failed to initialize properly (0x0c0000142).`
`Click OK to terminate the application.`

事件查看器只注册弹出窗口。

本地管理员用户是我的帐户，当我`stsadm`在此帐户下交互运行时，一切正常。当我将计时器服务配置为在此帐户下运行时，它也可以正常工作。

任何建议表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-06T17:31:48.220

我不在工作，所以这不是我的想法，但是：如果您获得对站点的引用，您可以尝试使用 SYSTEM-UserToken 创建一个新的 SPSite 吗？

```
SPUserToken sut = thisSite.RootWeb.AllUsers["SHAREPOINT\SYSTEM"].UserToken;

using (SPSite syssite = new SPSite(thisSite.Url,sut)
{
    // Do what you have to do
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-07T10:25:33.090

如果以这种方式运行的其他应用程序（即从具有显式凭据的计时器作业）以相同的方式失败，则“应用程序无法正确初始化”。我只是写了一个简单的应用程序，它采用另一个可执行文件的路径及其参数作为参数，当从该计时器作业运行时，它以同样的方式失败。

```
internal class ExternalProcess
{
    public static void run(String executablePath, String workingDirectory, String programArguments, String domain, String userName,
                           String password, out Int32 exitCode, out String output)
    {
        Process process = new Process();

        process.StartInfo.UseShellExecute = false;
        process.StartInfo.RedirectStandardError = true;
        process.StartInfo.RedirectStandardOutput = true;

        StringBuilder outputString = new StringBuilder();
        Object synchObj = new object();

        DataReceivedEventHandler outputAppender =
            delegate(Object sender, DataReceivedEventArgs args)
                {
                    lock (synchObj)
                    {
                        outputString.AppendLine(args.Data);
                    }
                };

        process.OutputDataReceived += outputAppender;
        process.ErrorDataReceived += outputAppender;

        process.StartInfo.FileName = @"C:\AppRunner.exe";
        process.StartInfo.WorkingDirectory = workingDirectory;
        process.StartInfo.Arguments = @"""" + executablePath + @""" " + programArguments;

        process.StartInfo.UserName = userName;
        process.StartInfo.Domain = domain; 
        SecureString passwordString = new SecureString();

        foreach (Char c in password)
        {
            passwordString.AppendChar(c);
        }

        process.StartInfo.Password = passwordString;

        process.Start();

        process.BeginOutputReadLine();
        process.BeginErrorReadLine();

        process.WaitForExit();

        exitCode = process.ExitCode;
        output = outputString.ToString();
    }
} 
```

AppRunner 基本上和上面的片段做的一样，但是没有用户名和密码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-05-09T14:40:01.507

SharePoint 计时器作业使用 SharePoint 公司管理员凭据运行，因为信息会进入 SharePoint 配置数据库。因此应用程序池将无权访问。

为了在开发环境中测试计时器作业，我们可以暂时将应用程序池帐户更改为用于管理中心的应用程序池帐户。

# database - 在 DB 中存储图像 - 是还是不是？

> ID：3748
> 
> 赞同：415
> 
> 时间：2008-08-06T17:38:35.383
> 
> 标签：database, image, theory, storage, blob

所以我正在使用一个将图像大量存储在数据库中的应用程序。您对此有何看法？我更倾向于将位置存储在文件系统中，而不是将其直接存储在数据库中。

你认为有什么优点/缺点？

* * *

## 回答 #1

> 赞同：350
> 
> 时间：2008-08-06T17:40:10.387

我负责一些管理许多 TB 图像的应用程序。我们发现在数据库中存储**文件路径**是最好的。

有几个问题：

*   数据库存储通常比文件系统存储更昂贵
*   您可以使用标准的现成产品超级加速文件系统访问
    *   例如，许多 Web 服务器使用操作系统的**sendfile()**系统调用将文件直接从文件系统异步发送到网络接口。存储在数据库中的图像不会从这种优化中受益。
*   Web 服务器等东西不需要特殊的编码或处理来访问文件系统中的图像
*   在图像和元数据之间的事务完整性很重要的地方，数据库胜出。
    *   管理数据库元数据和文件系统数据之间的完整性更加复杂
    *   很难（在 Web 应用程序的上下文中）保证数据已刷新到文件系统上的磁盘

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2008-08-22T16:33:14.163

与大多数问题一样，它并不像听起来那么简单。在某些情况下，将图像存储在数据库中是有意义的。

*   您正在存储动态变化的图像，例如发票，并且您想要获得 2007 年 1 月 1 日的发票？
*   政府要你维持6年历史
*   存储在数据库中的图像不需要不同的备份策略。存储在文件系统上的图像
*   如果图像在数据库中，则更容易控制对图像的访问。空闲管理员可以访问磁盘上的任何文件夹。需要一个非常坚定的管理员去窥探数据库以提取图像

另一方面也存在相关问题

*   需要额外的代码来提取和流式传输图像
*   延迟可能比直接文件访问慢
*   数据库服务器上的负载较重

* * *

## 回答 #3

> 赞同：99
> 
> 时间：2008-08-20T18:35:15.900

文件存储。Facebook 工程师对此进行了精彩的讨论。一个收获是了解目录中文件的实际限制。

[大海捞针：高效存储数十亿张照片](http://perspectives.mvdirona.com/2008/06/30/FacebookNeedleInAHaystackEfficientStorageOfBillionsOfPhotos.aspx)

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2008-08-06T20:15:31.230

这可能有点远，但如果您正在使用（或计划使用）SQL Server 2008，我建议您查看新的[FileStream](http://msdn.microsoft.com/en-us/library/bb933993(SQL.100).aspx)数据类型。

FileStream 解决了在数据库中存储文件的大部分问题：

1.  Blob 实际上作为文件存储在文件夹中。
2.  可以使用*数据库*连接*或*文件系统访问 Blob。
3.  备份是集成的。
4.  迁移“有效”。

但是 SQL 的“透明数据加密”不会加密 FileStream 对象，因此如果考虑到这一点，最好将它们存储为 varbinary。

来自 MSDN 文章：

> Transact-SQL 语句可以插入、更新、查询、搜索和备份 FILESTREAM 数据。Win32 文件系统接口提供对数据的流式访问。
> FILESTREAM 使用 NT 系统缓存来缓存文件数据。这有助于减少 FILESTREAM 数据可能对数据库引擎性能产生的任何影响。未使用 SQL Server 缓冲池；因此，该内存可用于查询处理。

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2008-08-06T18:07:46.603

数据库中的文件路径**绝对**是要走的路——我从拥有 TB 图像的客户那里听到一个又一个故事，说试图在数据库中存储大量图像成为一场噩梦——仅对性能造成的影响就太大了。

* * *

## 回答 #6

> 赞同：35
> 
> 时间：2008-08-06T17:59:59.380

根据我的经验，有时最简单的解决方案是**根据主键命名图像**。因此很容易找到属于特定记录的图像，反之亦然。但与此同时，您没有在数据库中存储有关图像的*任何内容。*

* * *

## 回答 #7

> 赞同：31
> 
> 时间：2008-08-31T17:54:01.417

这里的诀窍是不要成为狂热者。

这里需要注意的一点是，专业文件系统阵营中没有人列出特定的文件系统。这是否意味着从 FAT16 到 ZFS 的所有内容都能轻松击败所有数据库？

不。

事实是，即使我们只谈论原始速度，许多数据库也胜过许多文件系统。

正确的做法是为您的精确场景做出正确的决定，为此，您需要一些数字和一些用例估计。

* * *

## 回答 #8

> 赞同：30
> 
> 时间：2009-02-19T21:28:48.513

在必须保证参照完整性和 ACID 合规性的地方，需要将图像存储在数据库中。

您不能事务性地保证存储在数据库中的图像和有关该图像的元数据引用同一个文件。换句话说，不可能保证文件系统上的文件只在与元数据相同的时间和相同的事务中被更改。

* * *

## 回答 #9

> 赞同：28
> 
> 时间：2008-08-30T09:50:23.850

正如其他人所说，SQL 2008 带有一个 Filestream 类型，它允许您将文件名或标识符作为指针存储在数据库中，并自动将图像存储在文件系统上，这是一个很好的场景。

如果您使用的是较旧的数据库，那么我会说，如果您将其存储为 blob 数据，那么您实际上不会以搜索功能的方式从数据库中获取任何内容，因此这可能是最好的在文件系统上存储地址，并以这种方式存储图像。

这样，您还可以节省文件系统上的空间，因为您只会节省确切的空间量，甚至是文件系统上的压缩空间。

此外，您可以决定保存一些结构或元素，使您可以浏览文件系统中的原始图像而没有任何 db 命中，或者将文件批量传输到另一个系统、硬盘驱动器、S3 或其他场景 - 更新位置你的程序，但保持结构，在尝试增加存储时尝试将图像从数据库中取出并没有太大影响。

可能，它还允许您根据通常点击的图像 url 将一些缓存元素放入您的 Web 引擎/程序中，因此您也可以将自己保存在那里。

* * *

## 回答 #10

> 赞同：27
> 
> 时间：2008-08-06T18:46:49.270

不经常编辑的小型静态图像（不超过几兆）应存储在数据库中。这种方法有几个好处，包括更容易移植（图像与数据库一起传输）、更容易备份/恢复（图像与数据库一起备份）和更好的可伸缩性（包含数千个小缩略图文件的文件系统文件夹听起来像是可伸缩性的噩梦）我）。

从数据库提供图像很容易，只需实现一个 http 处理程序，它将从 DB 服务器返回的字节数组作为二进制流提供服务。

* * *

## 回答 #11

> 赞同：26
> 
> 时间：2008-09-16T20:28:48.007

这是关于该主题的有趣白皮书。

[To BLOB or Not To BLOB：数据库或文件系统中的大对象存储](http://research.microsoft.com/research/pubs/view.aspx?msr_tr_id=MSR-TR-2006-45)

答案是“视情况而定”。当然，这将取决于数据库服务器及其对 blob 存储的方法。它还取决于存储在 blob 中的数据类型，以及如何访问该数据。

使用数据库作为存储机制，可以有效地存储和传递较小的文件。较大的文件可能最好使用文件系统存储，特别是如果它们会经常修改/更新。（blob 碎片成为性能方面的一个问题。）

这里还有一点需要牢记。支持使用数据库存储 blob 的原因之一是 ACID 合规性。然而，测试人员在白皮书中使用的方法（SQL Server 的 Bulk Logged 选项）使 SQL Server 吞吐量翻了一番，有效地将 ACID 中的“D”更改为“d”，因为 Blob 数据没有被记录事务的初始写入。因此，如果完全符合 ACID 是您的系统的一项重要要求，则在将文件 I/O 与数据库 blob I/O 进行比较时，将数据库写入的 SQL Server 吞吐量数据减半。

* * *

## 回答 #12

> 赞同：25
> 
> 时间：2008-08-20T18:25:12.540

我还没有看到有人提到但绝对值得注意的一件事是，在大多数文件系统中也存在与存储大量图像相关的问题。例如，如果您采用上述方法并在主键后命名每个图像文件，那么在大多数文件系统上，如果您尝试将所有图像放在一个大目录中，一旦您获得大量图像（例如数十万或数百万）。

曾经常见的解决方案是将它们散列到平衡的子目录树中。

* * *

## 回答 #13

> 赞同：22
> 
> 时间：2008-11-28T06:33:53.797

没有人提到的是数据库保证原子操作、事务完整性和并发处理。即使是文件系统的引用完整性也不存在 - 那么你怎么知道你的文件名真的仍然正确？

如果您将图像保存在文件系统中，并且在您编写新版本甚至删除文件时有人正在读取该文件 - 会发生什么？

我们使用 blob 是因为它们也更易于管理（备份、复制、传输）。他们为我们工作得很好。

* * *

## 回答 #14

> 赞同：20
> 
> 时间：2009-04-08T16:35:09.563

在数据库中仅存储图像的文件路径的问题是不能再强制数据库的完整性。

如果文件路径指向的实际图像不可用，则数据库会无意中出现完整性错误。

鉴于图像是正在寻找的实际数据，并且可以在一个集成数据库中更轻松地管理它们（图像不会突然消失），而不必与某种文件系统交互（如果文件系统是独立访问的，图像可能会突然“消失”），我会直接将它们存储为 BLOB 等。

* * *

## 回答 #15

> 赞同：17
> 
> 时间：2008-08-06T18:37:17.573

在我以前工作的一家公司，我们在 Oracle 8i（当时是 9i）数据库中存储了 1.55 亿张图像。价值 7.5TB。

* * *

## 回答 #16

> 赞同：14
> 
> 时间：2008-08-06T17:42:21.787

通常，我强烈反对采用最昂贵和最难扩展的基础架构（数据库）部分并将所有负载放入其中。另一方面：它极大地简化了备份策略，尤其是当您有多个 Web 服务器并且需要以某种方式保持数据同步时。

像大多数其他事情一样，这取决于预期的规模和预算。

* * *

## 回答 #17

> 赞同：13
> 
> 时间：2008-10-26T17:55:01.187

我们已经实现了一个文档图像系统，它将所有图像存储在 SQL2005 blob 字段中。目前有数百 GB，我们看到出色的响应时间和很少或没有性能下降。此外，为了符合法规，我们有一个中间件层，可以将新发布的文档存档到光学点唱机系统，该系统将它们公开为标准的 NTFS 文件系统。

我们对结果非常满意，特别是在以下方面：

1.  易于复制和备份
2.  能够轻松实施文档版本控制系统

* * *

## 回答 #18

> 赞同：11
> 
> 时间：2008-08-06T17:52:51.937

如果这是基于 Web 的应用程序，那么将图像存储在第三方存储交付网络上可能会有优势，例如 Amazon 的 S3 或 Nirvanix 平台。

* * *

## 回答 #19

> 赞同：11
> 
> 时间：2009-05-18T13:18:53.097

*假设：应用程序支持网络/基于网络*

我很惊讶没有人真正提到这一点......将其委托给其他专家 ->**使用 3rd 方图像/文件托管服务提供商**。

将您的文件存储在付费在线服务上，例如

*   [亚马逊 S3](http://aws.amazon.com/s3/)
*   [茂硕云存储](http://www.mosso.com/cloudfiles.jsp)

[另一个 StackOverflow 线程在这里](https://stackoverflow.com/questions/792134/alternative-to-amazon-s3-for-the-data-center)谈论这个。

[该线程](https://stackoverflow.com/questions/731526/amazon-s3-when-why)解释了为什么您应该使用 3rd 方托管服务提供商。

太值得了。他们有效地存储它。没有带宽从您的服务器上传到客户端请求等。

* * *

## 回答 #20

> 赞同：10
> 
> 时间：2008-09-02T14:01:36.467

如果您不在 SQL Server 2008 上并且您有充分的理由将特定图像文件放入数据库中，那么您可以采用“两者”方法并将文件系统用作临时缓存并将数据库用作主存储库.

例如，您的业务逻辑可以在提供图像文件之前检查磁盘上是否存在图像文件，并在必要时从数据库中检索。这为您购买了多个 Web 服务器的功能并减少了同步问题。

* * *

## 回答 #21

> 赞同：7
> 
> 时间：2008-08-20T18:42:14.400

我不确定这是一个“真实世界”的例子，但我目前有一个应用程序可以存储交易卡牌游戏的详细信息，包括卡牌的图像。尽管迄今为止数据库的记录数只有 2851 条记录，但考虑到某些卡片已多次发布并具有替代图稿，实际上扫描图稿的“主要正方形”然后动态扫描尺寸更有效请求时为卡片生成边框和杂项效果。

这个图像库的原始创建者创建了一个数据访问类，它根据请求呈现图像，并且对于查看和个人卡片来说它的速度非常快。

这也简化了新卡发布时的部署/更新，而不是压缩整个图像文件夹并将它们发送到管道并确保创建正确的文件夹结构，我只需更新数据库并让用户再次下载它。目前最大大小为 56MB，这不是很好，但我正在为未来版本开发增量更新功能。此外，还有一个“无图像”版本的应用程序，允许那些通过拨号上网的人在没有下载延迟的情况下获取应用程序。

由于应用程序本身被定位为桌面上的单个实例，因此该解决方案迄今为止运行良好。有一个网站，所有这些数据都被存档以供在线访问，但我绝不会为此使用相同的解决方案。我同意文件访问会更可取，因为它可以更好地适应图像请求的频率和数量。

希望这不是胡说八道，但我看到了这个话题，并想从一个相对成功的中小型应用程序中提供一些我的见解。

* * *

## 回答 #22

> 赞同：7
> 
> 时间：2008-08-28T21:37:10.623

SQL Server 2008 提供了一个两全其美的解决方案：[文件流数据类型](http://msdn.microsoft.com/en-us/library/cc716724.aspx)。

像普通表一样管理它并拥有文件系统的性能。

* * *

## 回答 #23

> 赞同：7
> 
> 时间：2008-09-05T10:54:06.813

It depends on the number of images you are going to store and also their sizes. I have used databases to store images in the past and my experience has been fairly good.

IMO, Pros of using database to store images are,

A. You don't need FS structure to hold your images
B. Database indexes perform better than FS trees when more number of items are to be stored
C. Smartly tuned database perform good job at caching the query results
D. Backups are simple. It also works well if you have replication set up and content is delivered from a server near to user. In such cases, explicit synchronization is not required.

If your images are going to be small (say < 64k) and the storage engine of your db supports inline (in record) BLOBs, it improves performance further as no indirection is required (Locality of reference is achieved).

Storing images may be a bad idea when you are dealing with small number of huge sized images. Another problem with storing images in db is that, metadata like creation, modification dates must handled by your application.

* * *

## 回答 #24

> 赞同：7
> 
> 时间：2008-12-08T04:31:54.727

我最近创建了一个 PHP/MySQL 应用程序，它将 PDF/Word 文件存储在 MySQL 表中（目前每个文件最大 40MB）。

**优点：**

*   上传的文件与其他所有文件一起复制到备份服务器，不需要单独的备份策略（高枕无忧）。
*   设置网络服务器稍微简单一些，因为我不需要上传/文件夹并告诉我所有的应用程序它在哪里。
*   我可以使用事务进行编辑以提高数据完整性 - 我不必担心孤立和丢失的文件

**缺点：**

*   mysqldump 现在需要很长时间，因为其中一个表中有 500MB 的文件数据。
*   与文件系统相比，总体而言内存/cpu 效率不是很高

我认为我的实现是成功的，它处理了备份需求并简化了项目的布局。对于使用该应用程序的 20-30 人来说，性能很好。

* * *

## 回答 #25

> 赞同：6
> 
> 时间：2008-09-02T07:20:58.020

我的经验是我必须管理这两种情况：存储在数据库中的图像和文件系统上的图像，路径存储在 db 中。

第一个解决方案，数据库中的图像，有点“干净”，因为您的数据访问层只需要处理数据库对象；但这仅在您必须处理低数字时才有用。

显然，当您处理二进制大对象时，数据库访问性能正在下降，并且数据库维度会增长很多，再次造成性能损失......而且通常数据库空间比文件系统空间昂贵得多。

另一方面，将大型二进制对象存储在文件系统中会导致您的备份计划必须同时考虑数据库和文件系统，这对于某些系统来说可能是一个问题。

选择文件系统的另一个原因是当您必须与第三方访问共享您的图像数据（或声音、视频等）时：现在我正在开发一个 Web 应用程序，该应用程序使用必须从“外部”访问的图像“我的网络农场以这样的方式访问数据库来检索二进制数据是根本不可能的。因此，有时还有一些设计因素会促使您做出选择。

还请考虑，在做出此选择时，如果您在访问二进制对象时必须处理权限和身份验证：当数据存储在 db 中时，这些要求通常可以以更简单的方式解决。

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2008-08-20T18:51:56.110

我曾经做过一个图像处理应用程序。我们将上传的图像存储在类似于 /images/[今天的日期]/[id 编号] 的目录中。但是我们还从图像中提取了元数据（exif 数据）并将其与时间戳等一起存储在数据库中。

* * *

## 回答 #27

> 赞同：4
> 
> 时间：2009-12-16T14:29:05.767

在之前的一个项目中，我将图像存储在文件系统上，这给备份、复制和文件系统与数据库不同步带来了很多麻烦。

在我最新的项目中，我将图像存储在数据库中，并将它们缓存在文件系统中，并且效果非常好。到目前为止，我没有遇到任何问题。

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2008-08-06T17:51:00.053

其次是关于文件路径的建议。我参与了几个需要管理大型资产集合的项目，任何将事物直接存储在数据库中的尝试都会导致长期的痛苦和挫败感。

关于将它们存储在数据库中，我能想到的唯一真正的“专业人士”是易于使用单个图像资产的潜力。如果没有文件路径可供使用，并且所有图像都直接从数据库中流出，那么用户就不会发现他们不应该访问的文件的危险。

不过，这似乎可以通过从 Web 无法访问的文件存储中提取数据的中间脚本来更好地解决。所以数据库存储并不是真正需要的。

* * *

## 回答 #29

> 赞同：3
> 
> 时间：2008-08-06T21:19:16.500

流行的说法是，除非您是试图证明您的数据库可以做到这一点的数据库供应商（例如，假设 Microsoft 吹嘘 Terraserver 在 SQL Server 中存储了 bajillion 图像），否则这不是一个好主意。当替代方案 - 将图像存储在文件服务器和数据库中的路径变得如此容易时，为什么还要麻烦呢？Blob 字段有点像 SUV 的越野能力——大多数人不使用它们，那些使用它们的人通常会遇到麻烦，然后有些人会使用它们，但只是为了好玩。

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2009-05-18T06:36:42.107

将图像存储在数据库中仍然意味着图像数据最终会存储在文件系统中的某个位置，但会被隐藏，因此您无法直接访问它。

+ves:

*   数据库完整性
*   它易于管理，因为您不必担心在添加或删除图像时保持文件系统同步

-ves：

*   性能损失——数据库查找通常比文件系统查找慢
*   您不能直接编辑图像（裁剪、调整大小）

这两种方法都很常见，也很实用。看看优点和缺点。无论哪种方式，您都必须考虑如何克服缺点。存储在数据库中通常意味着调整数据库参数并实现某种缓存。使用文件系统需要您找到某种方法来保持文件系统+数据库同步。

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2008-08-30T10:15:53.227

我是企业文档管理系统的首席开发人员，一些客户在该系统中存储了数百 GB 的文档。TB 在不久的将来。我们使用**文件系统**方法是出于本页中提到的许多原因以及另一个原因：归档。

我们的许多客户必须遵守行业特定的归档规则，例如存储到光盘或以非专有格式存储。此外，您还可以灵活地将更多磁盘添加到 NAS 设备。如果您将文件存储在数据库中，即使使用 SQL Server 2008 的文件流数据类型，您的归档选项也会变得非常狭窄。

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2008-08-22T15:49:19.310

如果您需要在文件系统上存储大量图像，需要考虑以下几点：

*   备份还原。你如何保持图像同步。
*   文件系统性能。取决于你在做什么和文件系统，但你可能想要实现一个散列机制，这样你就没有一个包含数十亿文件的目录。
*   复制。您是否需要在多个服务器之间保持文件同步？

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2008-08-06T17:40:57.767

您的网络服务器（我假设您使用的是一个）旨在处理图像，而数据库则不是。因此，我会大力投反对票。

只在数据库中存储路径（也可能是文件信息）。

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2008-08-06T17:41:26.143

我会亲自将大数据存储在数据库之外。

优点：将所有内容存储在一个文件中，易于访问数据文件，易于备份缺点：降低数据库性能，许多页面拆分，可能的数据库损坏

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2008-08-20T18:49:45.553

我们将图像存储在表中的**唯一**原因是因为每个表（或每个工作范围的表集）都是临时的，并且在工作流结束时被删除。如果有任何形式的长期存储，我们肯定会选择存储文件路径。

还应该注意的是，我们在内部使用客户端/服务器应用程序，因此无需担心 Web 界面。

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2010-02-03T20:39:13.300

正如有人已经提到的那样，“这取决于”。如果数据库中的存储应该是文件系统的一对一精美替代品，那么它可能不是一个最佳选择。

但是，如果数据库后端将提供额外的值，而不仅仅是对 blob 的序列化和存储，那么它可能会真正有意义。

您可以查看[WKT Raster](http://trac.osgeo.org/postgis/wiki/WKTRaster)，这是一个旨在在[PostGIS](http://www.postgis.org)中开发栅格支持的项目，后者又用作[PostgreSQL](http://www.postgresql.org)数据库系统的地理空间扩展。WKT Raster 背后的想法不仅是定义栅格序列化和存储的格式（使用 PostgreSQL 系统），而且比存储更重要的是指定可从 SQL 访问的数据库端高效图像处理。长话短说，这个想法是将操作权重从客户端转移到数据库后端，因此它尽可能靠近存储本身。WKT 栅格作为 PostGIS，专用于特定领域[GIS](http://en.wikipedia.org/wiki/Geographic_information_system)的应用。

如需更完整的概述，请查看系统的[网站](http://trac.osgeo.org/postgis/wiki/WKTRaster)和[演示文稿](http://trac.osgeo.org/postgis/attachment/wiki/WKTRaster/WKTRasterIntro-Geomatique2009.pdf)(PDF)。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2008-08-22T16:08:52.537

通过网络从数据库中提取大量二进制数据会导致巨大的延迟问题，并且无法很好地扩展。

在数据库中存储路径并让您的网络服务器承担负载 - 这就是它的设计目的！

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2008-08-20T18:15:08.490

尝试使用 SQL 模拟文件系统通常是一个糟糕的计划。如果您坚持使用文件系统作为外部存储，您最终会编写更少的代码并获得相同或更好的结果。

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2008-08-28T20:12:14.400

File system, for sure. Then you get to use all of the OS functionality to deal with these images - back ups, webserver, even just scripting batch changes using tools like imagemagic. If you store them in the DB then you'll need to write your own code to solve these problems.

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2008-12-09T19:51:51.343

我会采用文件系统方法，主要是因为它具有更好的灵活性。考虑到如果图像数量变得巨大，一个数据库可能无法处理它。使用文件系统，您可以简单地添加更多文件服务器，假设您使用的是 NFS 或 kind。

文件系统方法的另一个优点是能够做一些花哨的事情，例如您可以使用 Amazon S3 作为主存储（将 url 保存在数据库中而不是文件路径中）。如果 S3 发生中断，您将回退到您的文件服务器（可能是另一个包含文件路径的数据库条目）。适用于 Apache 或您正在使用的任何 Web 服务器的一些巫术。

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2008-09-02T16:15:56.783

我更喜欢将图像路径存储在数据库中，并将图像存储在文件系统上（在服务器之间使用 rsync 以使所有内容保持合理的最新状态）。

然而，我做的一些内容管理系统的东西需要 CMS 中的图像有几个原因 - 可见性控制（因此资产被保留直到新闻稿发布）、版本控制、重新格式化（一些 CMS 将动态调整大小缩略图）和易于使用的图像链接到所见即所得的页面。

所以我的经验法则是始终将应用程序的东西存储在文件系统上，除非它是由 CMS 驱动的。

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2008-08-29T23:04:07.010

您需要记住的一件事是数据集的大小。我相信 Dillie-O 是唯一一个甚至遥不可及的人。

如果您有一个小型的单用户消费者应用程序，那么我会说 DB。我有一个使用文件系统（在 Program Files 中）的 DVD 管理应用程序，它是一个要备份的 PIA。我希望他们每次都将它们存储在数据库中，并让我选择保存该文件的位置。

对于更大的商业应用程序，我会开始改变我的想法。我曾经在一家开发县文员信息管理应用程序的公司工作。我们将根据县分配的仪器编号以编码格式[以处理大量文件的 FS 问题] 将图像存储在磁盘上。这在另一个方面很有用，因为图像可能存在于数据库记录之前（由于他们的工作流程）。

与大多数事情一样：“这取决于你在做什么”

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2008-08-30T04:27:40.490

将图像存储在文件系统中的另一个好处是您无需执行任何特殊操作即可让客户端缓存它们...

...当然，除非图像不能通过文档根目录访问（例如身份验证屏障），在这种情况下，您需要检查代码发送的缓存控制标头。

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2008-09-02T19:33:44.860

I would go with the file system approach. No need to create or maintain a DB with images, it will save you some major headaches in the long run.

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2009-05-18T13:36:43.093

我几乎从不将它们存储在数据库中。最好的方法通常是将图像存储在由中央配置变量控制的路径中，并根据数据库表和主键（如果可能）命名图像。这为您带来以下优势：

*   只需更新全局配置即可将您的图像移动到另一个分区或服务器。
*   通过搜索其主键找到与图像匹配的记录。
*   您的图像可以通过 imagemagick 等处理工具访问。
*   在网络应用程序中，您的图像可以由您的网络服务器直接处理（保存处理）。
*   CMS 工具和 Coldfusion 等 Web 语言可以本地处理上传。

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2009-03-02T07:14:31.100

数据数据库

文件的文件系统

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2012-01-26T16:05:51.933

我会选择这两种解决方案，我的意思是......我将开发一个小组件（EJB），将图像存储在数据库中，并将该图像的路径存储到服务器中。仅当我们有新图像或已更新的原始图像时，才会更新此数据库。然后我还将路径存储在业务数据库中。

从应用程序的角度来看，我将始终使用文件系统（从业务数据库中检索路径），通过这种方式我们将解决备份问题，并避免可能的性能问题。

唯一的缺点是我们将存储相同的图像 2 次......好处是内存很便宜，加油！

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2011-05-17T09:15:10.423

对于**大量的小图像**，数据库可能会更好。

我有一个带有许多小缩略图（每个 2Kb）的应用程序。当我将它们放在文件系统上时，由于文件系统的块大小，它们每个消耗 8kb。空间增加 400%！

有关块大小的更多信息，请参阅这篇文章： [iphone 文件系统的块大小是多少？](https://stackoverflow.com/questions/1315311/what-is-the-block-size-of-the-iphone-filesystem)

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2011-09-27T11:34:24.060

如果您在 Teradata 上，那么 Teradata Developer Exchange 有一篇关于加载和检索 lob 和 blob 的详细文章。

[http://developer.teradata.com/applications/articles/large-objects-part-1-loading](http://developer.teradata.com/applications/articles/large-objects-part-1-loading)

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2009-08-11T11:27:06.173

我使用过许多数字存储系统，它们都将数字对象存储在文件系统上。他们倾向于使用分支方法，因此文件系统上会有一个存档树，通常从条目年份开始，例如 2009，子目录将是月份，例如八月的 8，下一个目录将是一天，例如 11，有时他们会使用小时，然后文件将使用记录持久 ID 命名。使用 BLOBS 有其优势，我听说它经常用于化工行业的 IT 部分，用于存储数千或数百万张照片和图表。它可以提供更细粒度的安全性、单一的备份方法、可能更好的数据完整性和改进的媒体间搜索，Oracle 在他们过去称为 Intermedia 的包中为此提供了许多功能（我认为它现在被称为其他东西）。文件系统还可以通过诸如 XACML 或其他 XML 类型安全对象的系统提供细粒度的安全性。有关示例，请参见 Fedora 对象存储的 D 空间。

* * *

## 回答 #51

> 赞同：-1
> 
> 时间：2008-10-02T23:33:46.910

文件存储中的图像是最好的选择，并将元数据存储在数据库中作为补充。从 Web 服务器的角度来看，提供内容的快速方法是直接指向它。如果它在数据库中 - ala Sharepoint - 您需要 ADO.Net 的开销来将其拉出、流式传输等。

Documentum - 虽然臃肿且复杂 - 其正确之处在于文件在共享中，可供您确定如何存储它们 - 服务器上的磁盘、SAN、NAS 等等。Documentum 策略是通过根据数据库中的主键对文件夹和文件名进行编码，将文件存储为树结构。数据库成为了解哪些文件是什么并加强安全性的资源。对于大容量系统，这种方法是一个不错的方法。

在处理元数据时还要考虑这一点：如果您需要更新元数据语料库的属性，数据库是您的朋友，因为您可以使用 SQL 快速执行更新。使用其他标记系统，您手头没有简单的数据操作工具

* * *

## 回答 #52

> 赞同：-1
> 
> 时间：2008-08-22T16:48:58.307

不，由于页面拆分。您实际上是在定义可以为 1KB - n MB 的行，因此您的数据库将在其页面中有很多空白空间，这对性能不利。

* * *

## 回答 #53

> 赞同：-1
> 
> 时间：2008-09-15T19:27:48.257

在我的小应用程序中，我至少有一百万个文件，最后一次计数大约为 200GB。所有文件都位于通过 iscsi 安装在 linux 服务器上的 XFS 文件系统中。路径存储在数据库中。对文件路径和文件名使用某种智能命名约定。

恕我直言，将文件系统用于它的目的 - 存储文件。与标准文件系统相比，数据库在存储二进制数据方面通常不会为您提供任何优势。

* * *

## 回答 #54

> 赞同：-1
> 
> 时间：2008-08-06T21:45:51.220

我会采用文件系统方法。正如其他一些人所指出的，大多数 Web 服务器都是为从文件路径发送图像而构建的。如果您不必从数据库中写入或流出 BLOB 字段，您将获得更高的性能。为图像提供文件系统存储可以在内容不变或您希望限制数据库负载时更轻松地设置静态页面。

* * *

## 回答 #55

> 赞同：-1
> 
> 时间：2008-09-08T19:51:20.583

在我当前的应用程序中，我正在做这两个。当用户确定要附加到记录的图像时，我使用 ImageMagick 将其调整为适当的大小以在屏幕上显示（我的应用程序约为 300x300）并将其存储在数据库中以便于访问，但随后也复制用户的原始文件到网络共享，以便它可用于需要更高分辨率的应用程序（如打印）。

（还涉及到其他几个因素：Navision 只会显示 BMP，所以当我调整它的大小时，我也会转换为 BMP 进行存储，并且数据库会复制到远程站点，以便能够显示图像。打印只在总公司做，所以我不需要复制原始文件。）

* * *

## 回答 #56

> 赞同：-1
> 
> 时间：2008-11-04T20:30:44.887

如果您正在计划一个面向公众的网站，那么您不应该选择任何一个选项。您应该使用内容交付网络 (CDN)。当通过 Internet 提供大量静态内容时，CDN 具有价格、可扩展性和速度优势。

# asp.net - 寻找代码以呈现显示对象视图的表单

> ID：3757
> 
> 赞同：7
> 
> 时间：2008-08-06T17:42:43.613
> 
> 标签：asp.net, controls, propertygrid

我的任务是显示一个 Web 表单来表示 .NET 类中的属性。在 WinForms 中，有一个名为 PropertyGrid 的预制控件，它很像我需要的。我只是在寻找一些东西来在适当的控件旁边显示属性名称的简单布局，例如字符串的文本框或枚举属性的下拉列表。

ASP.NET 是否已经存在类似的东西，还是我会在这里推出自己的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-06T17:49:03.943

[ASP.Net 属性网格](http://www.codeplex.com/PropertyGrid "CodePlex")

# user-interface - 与客户一起制作 GUI 原型

> ID：3781
> 
> 赞同：17
> 
> 时间：2008-08-06T18:10:23.477
> 
> 标签：user-interface, prototyping

当与客户一起设计初始 GUI 功能原型时，是使用笔/纸绘图更好，还是使用工具模拟某些东西并向他们展示？

反对工具生成设计的论点是，客户有时可以专注于模型的低级细节，而不是从整体上获取更高级别的 GUI 功能视图。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-08-06T18:10:56.317

总是先从纸或类似纸的模型开始。当后端完全空心时，您不想陷入给人完整印象的陷阱。

一个精致的原型或像素完美的例子过于强调设计。通过一个明显的草图，您可以更好地讨论所需的功能和内容，而不是颜色、照片和其他风格问题。项目稍后将有时间进行讨论。

[Jeff 在他的 Coding Horror 文章UI-First Software Development](http://www.codinghorror.com/blog/archives/001091.html)中讨论了纸质原型

点击“观看视频！” [在twitter.com](http://twitter.com/)上的链接可以看到[Common Craft](http://www.commoncraft.com/)的想法的有趣看法。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-08-06T19:13:15.363

Java的[“Napkin Look & Feel”](http://napkinlaf.sourceforge.net/)对于原型设计来说真的很酷。一个实际的、可运行的、可点击的应用程序，看起来就像是在餐巾纸上绘制的。看看这个截图：

![餐巾纸的外观和感觉](../Images/bc0d1fdd12880ac3b11184dfdf4b2292.png)

说真的，这有多酷？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-04T13:21:19.233

我建议您与您的客户坐下来，使用[Mockupscreens](http://mockupscreens.com/)之类的工具并交互式地开发 UI。与 Napkin LAF 相比，它的一个好处是它不需要编码，或者实际上不需要任何类型的开发工具

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-08-10T15:44:16.210

看看[Balsamiq](http://www.balsamiq.com/)

它很好地完成了“这不是一个功能性应用程序”的餐巾视图，并且易于使用。

有一个功能齐全的[演示](http://www.balsamiq.com/demos/mockups/Mockups.html)，您可以在线试用，作为额外的奖励，您可以通过电子邮件将您的 XML 发送给您的客户，他们可以对其进行调整和使用，然后通过电子邮件将其发回给您，而无需获得许可证。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-06T18:12:33.707

有一本书叫[Paper Prototyping](https://rads.stackoverflow.com/amzn/click/com/1558608702)，其中详细介绍了笔和纸绘图以及您可以从中获得什么。我认为它有很多好处，特别是您可以在很早的时候（并且很容易）修改最终结果，而无需付出太多努力，然后从正确的角度开始。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-06T18:14:14.313

基本的纸质版本是进行初始模型的方法。根据我的经验，如果你做一个“真正的”模型，即使你向客户解释这是一个没有功能的模型，当事情不起作用时，他们也会感到困惑。

底线：保持尽可能简单。如果它在纸上，客户就不会将其与工作产品混淆。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-06T18:26:45.987

对于初稿，我更喜欢使用方格纸（上面印有网格的东西）和铅笔。方格纸非常适合帮助保持比例。一旦客户和我得出结论，我通常会用钢笔填写图纸，因为铅笔容易褪色。

当我真正开始构建数字原型时，我会扫描手绘的原型并将其用作背景模板。似乎对我来说工作得很好。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-12-04T12:53:09.460

我认为最好从纸/白板/白墙开始。

获得基本结构后，您可以使用线框模具将其移动到 Visio

*   （[下载模板套件](http://developer.yahoo.com/ypatterns/wireframes/)）
*   （[信息架构师的 Visio 模板](http://nickfinck.com/stencils/)）。

或者，您可以使用 Denim（[早期网站和 UI 设计的非正式工具](http://dub.washington.edu:2007/denim/)）和平板电脑或 Wacom 平板电脑来设计 GUI 并将其作为 HTML 网站运行。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-12-04T17:50:55.617

[WireframeSketcher](http://wireframesketcher.com)是一种工具，可帮助为桌面、Web 和移动应用程序快速创建线框、模型和原型。它既可以作为**独立**版本，也可以作为 Eclipse IDE 的**插件**。它具有一些独特的功能，例如故事板、组件、链接和矢量 PDF 导出。支持的 IDE 包括 Aptana、Flash Builder、Zend Studio 和 Rational Application Developer。

[![WireframeSketcher 样机示例](../Images/9937b1a1920765e2a3202d5daca958e0.png)](https://i.stack.imgur.com/clCOj.png)
[（来源：[wireframesketcher.com](http://wireframesketcher.com/samples/Website.png)）]

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-14T21:24:13.770

我最近使用 Windows 应用程序为客户制作应用程序原型（最终界面必须集成到网站中）。

起初人们认为这将是最后一个版本，他们开始从控件的显示方式到我使用的词语（术语和东西）提出非常严厉的批评，会议时间甚至在我们讨论功能本身之前就结束了。

讨论持续了好几天，直到我告诉他们，作为一个模拟（而不是最终的应用程序），所有的输入都是受欢迎的，但我们必须首先关注功能，然后我们才能继续进行外观和感觉以及术语问题。

从那次会议开始，我一直对原型和模型感到恐惧……也许我应该给他们一些用 visio 制作的东西。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-08-10T15:36:43.683

你可以试试[ForeUI](http://www.foreui.com/)，它允许制作不同风格的原型，更重要的是，它可以制作交互式原型并在浏览器中运行。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-12-01T13:47:15.150

对于基于浏览器的非安装工具，您可以尝试[Draft-it](http://www.draft-it.com "草稿")

它是免费的 - 如果您有 gmail 帐户 - 无需注册。

制作交互式/逐步或幻灯片演示原型。您只需发送一个链接即可与您选择的任何人分享您的原型。

为我们工作...

# windows - 是否有 WMI 可再发行包？

> ID：3790
> 
> 赞同：4
> 
> 时间：2008-08-06T18:15:43.357
> 
> 标签：windows, 64-bit, wmi

我一直在从事一个访问 WMI 以获取有关安装在用户计算机上的软件的信息的项目。我们一直在查询 Win32_Product 却发现它在 64 位版本的 Windows 中不存在，因为它是一个[“可选组件”](http://msdn.microsoft.com/en-us/library/aa392726(VS.85).aspx)。

我知道有很多非常好的替代方法可以查询 WMI 以获取这些信息，但我有一点[既得利益想](http://www.codeplex.com/linq2wmi)知道这将如何解决。

我想知道的是，是否有某种可以与我们的软件打包在一起的可再发行组件，以允许 64 位用户将 WMI 安装程序提供程序放到他们的机器上？现在，他们必须手动安装它，并且安装需要他们手边有 Windows 光盘。

编辑：

> 您没有提到什么操作系统，但 WMI Redistributable Components 1.0 版肯定存在。

对于操作系统，我们一直在使用 .NET 3.5，因此我们需要可以在 XP64 和 64 位版本的 Windows Vista 上运行的软件包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-06T18:44:55.373

您没有提到什么操作系统，但[WMI Redistributable Components 1.0 版](http://www.microsoft.com/downloads/details.aspx?familyid=013BB284-3946-44A9-AC3C-BF2A569EAA72&displaylang=en "微软下载中心")肯定存在。

对于 Windows Server 2003，WMI SDK 和可再发行组件是[Server SDK的一部分](http://www.microsoft.com/downloads/details.aspx?FamilyId=484269E2-3B89-47E3-8EB7-1F2BE6D7123A&displaylang=en "Windows Server 2003 SDK 完整下载")

*我相信*[Server 2008 SDK](http://www.microsoft.com/downloads/details.aspx?FamilyId=F26B1AA4-741A-433A-9BE5-FA919850BDBF&displaylang=en "Microsoft Download Center")也是如此

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-20T23:15:11.090

Windows 组件的正常方法不是让一组服务器的管理员使用他们的本地软件推送技术（即 SMS）来确保安装该组件吗？通过 WMI 远程管理服务器的要求并不少见。

顺便说一句，服务器产品的标准版中没有提供 WMI 安装程序提供程序，但在企业版中提供。因此，默认情况下，Windows 2003 Server 不会安装它，但 Windows 2003 Server Enterprise（和 DataCenter）会。

这个答案确实意味着您将安装的负担重新推给了您的用户群，但对于 Windows 管理员来说，这应该不是任何问题。

# .net - 获取 XElement 的 InnerXml 的最佳方法？

> ID：3793
> 
> 赞同：150
> 
> 时间：2008-08-06T18:16:55.853
> 
> 标签：.net, xml, xelement, innerxml

`body`在下面的代码中获取混合元素内容的最佳方法是什么？该元素可能包含 XHTML 或文本，但我只希望它的内容为字符串形式。该`XmlElement`类型具有`InnerXml`正是我所追求的属性。

编写的代码*几乎*可以满足我的要求，但包括我不想要的周围的`<body>`...`</body>`元素。

```
XDocument doc = XDocument.Load(new StreamReader(s));
var templates = from t in doc.Descendants("template")
                where t.Attribute("name").Value == templateName
                select new
                {
                   Subject = t.Element("subject").Value,
                   Body = t.Element("body").ToString()
                }; 
```

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2009-11-09T23:08:14.530

我想看看这些建议的解决方案中哪一个表现最好，所以我进行了一些比较测试。出于兴趣，我还将 LINQ 方法与Greg 建议的普通旧**System.Xml方法进行了比较。**变化很有趣，不是我所期望的，最慢的方法**比最快的方法慢 3 倍以上**。

结果按最快到最慢排序：

1.  CreateReader - 实例猎手（0.113 秒）
2.  普通的旧 System.Xml - Greg Hurlman（0.134 秒）
3.  使用字符串连接进行聚合 - Mike Powell（0.324 秒）
4.  StringBuilder - Vin (0.333 秒)
5.  String.Join on array - Terry (0.360 秒)
6.  数组上的 String.Concat - Marcin Kosieradzki (0.364)

* * *

**方法**

我使用了一个包含 20 个相同节点的 XML 文档（称为“提示”）：

```
<hint>
  <strong>Thinking of using a fake address?</strong>
  <br />
  Please don't. If we can't verify your address we might just
  have to reject your application.
</hint> 
```

上面显示的秒数是连续提取 1000 次 20 个节点的“内部 XML”并取 5 次运行的平均值（平均值）的结果。我没有包括将 XML 加载和解析为`XmlDocument`（对于**System.Xml**方法）或`XDocument`（对于所有其他方法）所花费的时间。

我使用的 LINQ 算法是：*（C# - 都采用`XElement`“父”并返回内部 XML 字符串）*

**创建阅读器：**

```
var reader = parent.CreateReader();
reader.MoveToContent();

return reader.ReadInnerXml(); 
```

**用字符串连接聚合：**

```
return parent.Nodes().Aggregate("", (b, node) => b += node.ToString()); 
```

**字符串生成器：**

```
StringBuilder sb = new StringBuilder();

foreach(var node in parent.Nodes()) {
    sb.Append(node.ToString());
}

return sb.ToString(); 
```

**String.Join 数组：**

```
return String.Join("", parent.Nodes().Select(x => x.ToString()).ToArray()); 
```

**数组上的 String.Concat：**

```
return String.Concat(parent.Nodes().Select(x => x.ToString()).ToArray()); 
```

我没有在这里展示“Plain old System.Xml”算法，因为它只是在节点上调用 .InnerXml。

* * *

**结论**

如果性能很重要（例如大量 XML，经常解析），我**每次都会****使用 Daniel 的`CreateReader`**方法。如果您只是做一些查询，您可能想要使用 Mike 更简洁的 Aggregate 方法。

如果您在具有大量节点（可能有 100 个）的大型元素上使用 XML，您可能会开始看到使用`StringBuilder`Aggregate 方法的好处，但不会超过`CreateReader`. 我不认为`Join`and`Concat`方法在这些条件下会更有效，因为将大列表转换为大数组的代价（即使在这里使用较小的列表也很明显）。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2009-03-18T17:17:25.360

我认为这是一种更好的方法（在 VB 中，应该不难翻译）：

给定一个 XElement x：

```
Dim xReader = x.CreateReader
xReader.MoveToContent
xReader.ReadInnerXml 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2008-08-19T20:29:41.767

在 XElement 上使用这个“扩展”方法怎么样？为我工作！

```
public static string InnerXml(this XElement element)
{
    StringBuilder innerXml = new StringBuilder();

    foreach (XNode node in element.Nodes())
    {
        // append node's xml string to innerXml
        innerXml.Append(node.ToString());
    }

    return innerXml.ToString();
} 
```

或者使用一点 Linq

```
public static string InnerXml(this XElement element)
{
    StringBuilder innerXml = new StringBuilder();
    doc.Nodes().ToList().ForEach( node => innerXml.Append(node.ToString()));

    return innerXml.ToString();
} 
```

**注意**：上面的代码必须使用`element.Nodes()`，而不是`element.Elements()`. 记住两者之间的区别非常重要。`element.Nodes()`为您提供诸如等之类的所有内容`XText`，`XAttribute`但`XElement`仅提供一个元素。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-01-04T20:21:41.603

感谢那些发现并证明了最佳方法的人（谢谢！），在这里它被包含在一个扩展方法中：

```
public static string InnerXml(this XNode node) {
    using (var reader = node.CreateReader()) {
        reader.MoveToContent();
        return reader.ReadInnerXml();
    }
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-10-31T17:22:59.363

保持简单高效：

```
String.Concat(node.Nodes().Select(x => x.ToString()).ToArray()) 
```

*   连接字符串时，聚合在内存和性能方面效率低下
*   使用 Join("", sth) 使用的是比 Concat 大两倍的字符串数组......并且在代码中看起来很奇怪。
*   使用 += 看起来很奇怪，但显然并不比使用 '+' 差多少 - 可能会针对相同的代码进行优化，因为分配结果未使用并且可能会被编译器安全地删除。
*   StringBuilder 是如此必要——每个人都知道不必要的“状态”很糟糕。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-08-06T19:36:02.667

我最终使用了这个：

```
Body = t.Element("body").Nodes().Aggregate("", (b, node) => b += node.ToString()); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-03-17T08:47:45.507

就个人而言，我最终`InnerXml`使用 Aggregate 方法编写了一个扩展方法：

```
public static string InnerXml(this XElement thiz)
{
   return thiz.Nodes().Aggregate( string.Empty, ( element, node ) => element += node.ToString() );
} 
```

然后，我的客户端代码与使用旧的 System.Xml 命名空间一样简洁：

```
var innerXml = myXElement.InnerXml(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-08-06T18:25:08.877

@Greg：看来您已将答案编辑为完全不同的答案。我的回答是肯定的，我可以使用 System.Xml 来做到这一点，但我希望能用 LINQ to XML 让我的脚湿透。

如果其他人想知道为什么我不能只使用 XElement 的 .Value 属性来获得我需要的东西，我将在下面留下我的原始回复：

@Greg： Value 属性连接任何子节点的所有文本内容。因此，如果 body 元素仅包含文本，它可以工作，但如果它包含 XHTML，我会将所有文本连接在一起，但没有标签。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-02-08T04:55:35.983

// 使用正则表达式可能会更快地简单地修剪开始和结束元素标记

```
var content = element.ToString();
var matchBegin = Regex.Match(content, @"<.+?>");
content = content.Substring(matchBegin.Index + matchBegin.Length);          
var matchEnd = Regex.Match(content, @"</.+?>", RegexOptions.RightToLeft);
content = content.Substring(0, matchEnd.Index); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-10-13T20:08:32.527

doc.ToString() 或 doc.ToString(SaveOptions) 完成工作。请参阅[http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.tostring(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.tostring(v=vs.110).aspx)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-06T18:20:18.903

是否可以使用 System.Xml 命名空间对象来完成这里的工作，而不是使用 LINQ？正如您已经提到的， XmlNode.InnerXml 正是您所需要的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-18T16:57:12.803

想知道是否（请注意我摆脱了 b+= 并且只有 b+）

```
t.Element( "body" ).Nodes()
 .Aggregate( "", ( b, node ) => b + node.ToString() ); 
```

效率可能略低于

```
string.Join( "", t.Element.Nodes()
                  .Select( n => n.ToString() ).ToArray() ); 
```

不是 100% 肯定...但是在反射器中查看 Aggregate() 和 string.Join()...我*认为*我将它读为 Aggregate 只是附加了一个返回值，所以基本上你得到：

字符串 = 字符串 + 字符串

与 string.Join 相比，它在其中提到了 FastStringAllocation 之类的东西，这让我觉得微软的人可能已经在其中增加了一些额外的性能提升。当然，我的 .ToArray() 对此表示否定，但我只是想提出另一个建议。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-10-25T23:39:21.693

你知道？最好的办法是回到 CDATA :( 我在这里查看解决方案，但我认为 CDATA 是迄今为止最简单和最便宜的，不是最方便的开发

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-10-25T19:07:28.277

```
var innerXmlAsText= XElement.Parse(xmlContent)
                    .Descendants()
                    .Where(n => n.Name.LocalName == "template")
                    .Elements()
                    .Single()
                    .ToString(); 
```

将为您完成工作

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2010-08-13T07:05:02.603

```
public static string InnerXml(this XElement xElement)
{
    //remove start tag
    string innerXml = xElement.ToString().Trim().Replace(string.Format("<{0}>", xElement.Name), "");
    ////remove end tag
    innerXml = innerXml.Trim().Replace(string.Format("</{0}>", xElement.Name), "");
    return innerXml.Trim();
} 
```

# mysql - 完全完整的 MySQL 数据库复制？想法？人们做什么？

> ID：3798
> 
> 赞同：20
> 
> 时间：2008-08-06T18:24:42.887
> 
> 标签：mysql, oracle, replication

目前我有两台运行 MySQL 的 Linux 服务器，一台位于我旁边的机架上，位于 10 Mbit/s 上传管道（主服务器）下，另一台位于几英里外的 3 Mbit/s 上传管道（镜像）上。

我希望能够在两台服务器上连续复制数据，但遇到了几个障碍。其中之一是，在 MySQL 主/从配置下，时不时地，一些语句会丢弃（！），意思是；一些登录到镜像 URL 的人看不到我知道在主服务器上的数据，反之亦然。假设这每月发生一次有意义的数据块，所以我可以忍受它并假设这是一个“丢失数据包”问题（即，上帝知道，但我们会补偿）。

另一个最重要（也是最烦人的）反复出现的问题是，当出于某种原因我们在一端进行重大上传或更新（或重新启动）并且必须[切断](http://en.wiktionary.org/wiki/sever)链接时，从主站加载数据不起作用并且我有在一端手动转储并在另一端上传，如今移动大约 0.5 TB 的数据是一项艰巨的任务。

有这方面的软件吗？我知道 MySQL（“公司”）将此作为一项非常昂贵的服务（完整的数据库复制）提供。外面的人在做什么？它的结构方式是，我们运行自动故障转移，如果一台服务器未启动，则主 URL 只会解析到另一台服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-09-21T00:09:04.323

我们 Percona 提供免费工具来检测主服务器和服务器之间的差异，并通过重新应用最小的更改来使它们恢复同步。

*   [pt 表校验和](http://www.percona.com/doc/percona-toolkit/pt-table-checksum.html)
*   [pt-表同步](http://www.percona.com/doc/percona-toolkit/pt-table-sync.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-06T18:30:45.950

[GoldenGate](http://www.goldengate.com/)是一个非常好的解决方案，但可能与 MySQL 复制器一样昂贵。

它基本上跟踪日志，并根据提交的内容应用更改。它们支持双向复制（一项艰巨的任务）以及异构系统之间的复制。

由于它们通过处理日志文件来工作，因此它们可以在不影响源机器性能的情况下进行大规模分布式复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-20T22:26:39.643

我从未见过丢弃的语句，但有一个错误，网络问题可能导致中继日志损坏。确保在没有此修复的情况下不要运行 mysql。

> 在 5.0.56、5.1.24 和 6.0.5 变更日志中记录如下：
> 
> ```
>  Network timeouts between the master and the slave could result
>    in corruption of the relay log. 
> ```

[http://bugs.mysql.com/bug.php?id=26489](http://bugs.mysql.com/bug.php?id=26489)

# asp.net - Web 服务器上的更多与更快的内核

> ID：3801
> 
> 赞同：11
> 
> 时间：2008-08-06T18:28:04.987
> 
> 标签：asp.net, windows, iis, hardware

Dual 与 Quadcore 的讨论与 Quadcores 本身一样古老，答案通常是“这取决于您的情况”。所以这里的场景是一个 Web 服务器（Windows 2003（不确定是 x32 还是 x64），4 GB RAM，IIS，ASP.net 3.0）。

我的印象是，Web 服务器中的 CPU 不需要那么快，因为请求通常是相当轻量级的，因此拥有更多（较慢）内核应该是更好的选择，因为我们有很多小请求。

但是由于我在IIS负载平衡方面没有太多经验，而且我不想花很多钱才发现我做出了错误的选择，所以有经验的人可以评论一下是否更慢或更少更快的核心更好？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-08-06T18:40:08.393

对于像网络服务器这样的东西，划分处理每个连接的任务是（相对）容易的。我可以肯定地说，Web 服务器是并行代码最常见的（并且已经解决的）用途之一。而且由于您能够将大部分处理拆分为多个离散线程，因此更多的内核确实对您有利。这是共享主机成为可能的重要原因之一。如果像 IIS 和 Apache 这样的服务器软件不能并行运行请求，这意味着每个页面请求都必须以队列方式发出……可能会使加载时间变得难以忍受。

这也是为什么像 Windows 2008 Server Enterprise 这样的高端服务器操作系统支持 64 核和 2TB 内存的原因。这些应用程序实际上可以利用这么多内核。

此外，由于每个请求都可能具有较低的 CPU 负载，因此您可能（对于某些应用程序）可以使用更慢的内核。但显然，让每个核心更快意味着能够更快地完成每项任务，并且理论上可以处理更多任务和更多服务器请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-06T18:33:50.530

我们在 linux 上使用 apache，它分叉了一个进程来处理请求。我们发现更多的内核有助于我们的吞吐量，因为它们减少了等待放入运行队列的进程的延迟。我对 IIS 没有太多经验，但我想同样的场景也适用于它的线程池。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-06T18:40:39.813

马克哈里森说：

> 我对 IIS 没有太多经验，但我想同样的场景也适用于它的线程池。

确实 - 更多内核 = 更多线程同时运行。IIS 本质上是多线程的，并且很容易利用这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T18:31:14.793

越多越好。随着编程语言开始变得更加复杂和抽象，将需要更多的处理能力。

Atleat Jeff 认为[Quadcore 更好](https://blog.stackoverflow.com/2008/04/our-dedicated-server/)。

# language-agnostic - 您如何在普通文本中排版代码元素？

> ID：3802
> 
> 赞同：8
> 
> 时间：2008-08-06T18:28:38.573
> 
> 标签：language-agnostic, format

排版具有可读性、简洁性和准确性参数的函数的最佳方法是什么？我倾向于在函数名之后加上空括号`func()`，即使函数实际上有参数。我在包括论点时遇到了麻烦，但仍然觉得该段落是可读的。

关于最佳实践的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-06T19:16:06.403

我通常采用这种方法，但如果我觉得它会引起混淆，我会使用如下省略号：`myFunction(...)`

我想如果我做得很好，我会在*任何*时候在文本中从函数中省略参数时使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-06T18:31:49.923

我会更加小心我的变量和参数的名称，然后大多数人将能够更准确地猜测你想要在其中保存什么类型的数据。

# visual-studio - 设置 Visual Studio 2005 以打印行号

> ID：3809
> 
> 赞同：11
> 
> 时间：2008-08-06T18:32:37.957
> 
> 标签：visual-studio, visual-studio-2005, line-numbers

打印列表时如何`print`在**Visual Studio 2005中获取行号？**`code`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-06T18:33:28.830

打印对话框中没有选项吗？

编辑：有。转到文件 => 打印，然后在左下角有“打印什么”，然后是“包括行号”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-06T18:35:41.400

打印对话框中有一个选项可以执行相同的操作（至少在 VS 2005 和 2008 中）！

# sql - 在 SQL Server 中实施审计表的建议？

> ID：3823
> 
> 赞同：32
> 
> 时间：2008-08-06T18:39:33.560
> 
> 标签：sql, sql-server, database, audit

我过去使用的一种简单方法基本上只是创建第二个表，其结构反映了我要审核的表，然后在主表上创建更新/删除触发器。在更新/删除记录之前，当前状态通过触发器保存到审计表中。

虽然有效，但审计表中的数据并不是最有用或最容易报告的数据。我想知道是否有人有更好的方法来审核数据更改？

这些记录不应该有太多更新，但它是高度敏感的信息，因此对客户而言，对所有更改进行审计并轻松报告是很重要的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-08-06T18:51:48.793

您预计该表的写入与读取量是多少？

我使用了一个审计表，其中包含 Table、Column、OldValue、NewValue、User 和 ChangeDateTime 的列 - 足够通用，可以处理数据库中的任何其他更改，虽然大量数据被写入该表，但报告这些数据足够稀疏，可以在一天中的低使用时段运行。

**补充：** 如果数据量与报告是一个问题，审计表可以复制到只读数据库服务器，允许您在必要时运行报告，而不会让主服务器停止工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-10T09:41:37.720

我们为此使用了两个表设计。

一张表保存有关事务的数据（数据库、表名、模式、列、触发事务的应用程序、启动事务的登录主机名、日期、受影响的行数等等）。

第二个表仅用于存储数据更改，以便我们可以在需要时撤消更改并报告旧/新值。

另一种选择是为此使用第三方工具，例如[ApexSQL 审计](http://www.apexsql.com/sql_tools_audit.aspx)或 SQL Server 中的更改数据捕获功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-01T09:14:48.070

我发现这两个链接很有用：

使用 CLR 和单一审计表。
[使用 SQL 2005 CLR 创建通用审计触发器](http://web.archive.org/web/20090429064008/www.sqljunkies.ddj.com/Article/4CD01686-5178-490C-A90A-5AEEF5E35915.scuk)

为每个被审计的表使用触发器和单独的审计表。
[如何审核对 SQL Server 数据的更改？](http://web.archive.org/web/20071006100909/http://sqlserver2000.databases.aspfaq.com:80/how-do-i-audit-changes-to-sql-server-data.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T18:49:23.150

是否有任何内置的审计包？Oracle 有一个不错的软件包，它甚至可以将审计更改发送到一个单独的服务器，任何修改 SQL 的坏人都无法访问。

他们的例子很棒......它展示了如何提醒任何修改审计表的人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-06T19:56:14.763

[OmniAudit](http://www.krell-software.com/omniaudit/)可能是您需要的一个很好的解决方案。我以前从未使用过它，因为我很高兴编写自己的审计程序，但这听起来不错。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-06T20:23:27.750

我使用 Greg 在他的[回答](https://stackoverflow.com/questions/3823/suggestions-for-implementing-audit-tables-in-sql-server#3848)中描述的方法，并使用从表触发器调用的存储过程填充审计表。

# asp.net - 如何最好地检测 ASP.NET 过期会话？

> ID：3831
> 
> 赞同：12
> 
> 时间：2008-08-06T18:44:06.857
> 
> 标签：asp.net, http, session

我需要在我的 Visual Basic Web 应用程序中检测会话何时过期。这就是我正在使用的...

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If CurrentSession.IsNew AndAlso (Not Page.Request.Headers("Cookie") Is Nothing) AndAlso (Page.Request.Headers("Cookie").IndexOf("ASP.NET_SessionId") >= 0) Then
        Response.Redirect("TimeOut.aspx")
    End If

    ...do something...

End Sub 
```

**注：** `CurrentSession.IsNew`退货`HttpContext.Current.Session.IsNewSession`

这似乎适用于*Internet Explorer*，但似乎在*Firefox*中失败。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-06T18:55:57.693

尝试以下

```
If Session("whatever") IsNot Nothing Then 
```

# mysql - 如何在 MySQL 中连接整个结果集？

> ID：3839
> 
> 赞同：21
> 
> 时间：2008-08-06T18:47:24.137
> 
> 标签：mysql, sql, union

我正在尝试以下查询：

```
SELECT A,B,C FROM table WHERE field LIKE 'query%'
UNION
SELECT A,B,C FROM table WHERE field LIKE '%query'
UNION
SELECT A,B,C FROM table WHERE field LIKE '%query%'
GROUP BY B ORDER BY B ASC LIMIT 5 
```

那是三个查询粘在一起，有点像。但是，返回的结果集在查询 #1 的结果之前反映了查询 #3 的结果，这是不希望的。

有没有办法对这些进行优先级排序，以便查询 #1 的结果全部出现，然后查询 #2 的结果全部出现，然后查询 #3 的结果全部出现？我还不想在 PHP 中执行此操作（更不用说必须控制在第一个查询中显示的结果而不在第二个查询中显示，依此类推）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-08-06T18:59:36.467

也许您应该尝试包含第四列，说明它来自哪个表，然后按它排序和分组：

```
SELECT A,B,C, "query 1" as origin FROM table WHERE field LIKE 'query%'
UNION
SELECT A,B,C, "query 2" as origin FROM table WHERE field LIKE '%query'
UNION
SELECT A,B,C, "query 3" as origin FROM table WHERE field LIKE '%query%'
GROUP BY origin, B ORDER BY origin, B ASC LIMIT 5 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-08-06T18:55:45.243

添加一个带有硬编码值的附加列，用于对整个结果集进行排序，如下所示：

```
SELECT A,B,C,1 as [order] FROM table WHERE field LIKE 'query%'
UNION
SELECT A,B,C,2 as [order] FROM table WHERE field LIKE '%query'
UNION
SELECT A,B,C,3 as [order] FROM table WHERE field LIKE '%query%'
GROUP BY B ORDER BY [order] ASC, B ASC LIMIT 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-06T18:54:23.157

您可以将其作为子选择进行吗，例如

```
SELECT * FROM (
    SELECT A,B,C FROM table WHERE field LIKE 'query%'
    UNION
    SELECT A,B,C FROM table WHERE field LIKE '%query'
    UNION
    SELECT A,B,C FROM table WHERE field LIKE '%query%'
) ORDER BY B ASC LIMIT 5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T19:41:52.607

SELECT distinct a,b,c FROM ( SELECT A,B,C,1 as o FROM table WHERE field LIKE 'query%' UNION SELECT A,B,C,2 as o FROM table WHERE field LIKE '%query' UNION SELECT A,B,C,3 as o FROM table WHERE field LIKE '%query%' ) ORDER BY o ASC LIMIT 5

将是我这样做的方式。我不知道它是如何扩展的。

我不明白

```
GROUP BY B ORDER BY B ASC LIMIT 5 
```

它仅适用于联合中的最后一个 SELECT 吗？

mysql实际上是否允许您按列分组，但仍然不能对其他列进行聚合？

编辑：啊。我看到 mysql 确实如此。它是 DISTINCT(b) 或其他东西的特殊版本。我不想尝试成为该领域的专家:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-06T18:54:27.587

如果没有一种对您想要的排序有意义的排序，请不要将结果合并在一起 - 只需返回 3 个单独的记录集，并在您的数据层中相应地处理它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-06T19:19:53.993

我最终（查看所有建议）来到了这个解决方案，它在我需要的东西和时间之间有点妥协。

```
SELECT * FROM 
  (SELECT A, B, C, "1" FROM table WHERE B LIKE 'query%' LIMIT 3
   UNION
   SELECT A, B, C, "2" FROM table WHERE B LIKE '%query%' LIMIT 5)
AS RS
GROUP BY B
ORDER BY 1 DESC 
```

它总共提供了 5 个结果，从第四个“列”开始排序，并给了我我需要的东西；一个自然的结果集（它来自 AJAX），以及紧随其后的通配符结果集。

:)

/mp

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T16:21:48.967

UNION 有两种变体。

```
'UNION' and 'UNION ALL' 
```

在大多数情况下，您真正​​想说的是 UNION ALL，因为它不会`SELECT DISTINCT`在集合之间进行重复消除（思考），这可以节省相当多的执行时间。

其他人提出了多个结果集，这是一个可行的解决方案，但是我会提醒在时间敏感的应用程序或通过 WAN 连接的应用程序中不要这样做，因为这样做可能会导致服务器和客户端之间的线路上的往返次数显着增加。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-20T05:14:44.530

我不明白为什么需要联合从单个表中获取数据

```
SELECT A, B, C 
FROM table 
WHERE field LIKE 'query%' 
   OR field LIKE '%query' 
   OR field LIKE '%query%'
GROUP BY B 
ORDER BY B ASC LIMIT 5 
```

# apache-flex - Adobe Flex 组件事件

> ID：3856
> 
> 赞同：7
> 
> 时间：2008-08-06T18:57:38.313
> 
> 标签：apache-flex, actionscript-3

我编写了一个显示文件名、缩略图和加载/播放文件的按钮的组件。该组件数据绑定到转发器。我怎样才能使按钮事件触发到主应用程序并告诉它要播放哪个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-06T19:23:41.287

想通了（终于）

自定义组件

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" x="0" y="0" width="215" height="102" styleName="leftListItemPanel" backgroundColor="#ECECEC" horizontalScrollPolicy="off" verticalScrollPolicy="off">
<mx:Script>
    <![CDATA[
        [Bindable] public var Title:String = "";
        [Bindable] public var Description:String = "";
        [Bindable] public var Icon:String = ""; 
        [Bindable] public var FileID:String = "";
        private function viewClickHandler():void{
            dispatchEvent(new Event("viewClick", true));// bubble to parent
        }
    ]]>
</mx:Script>
<mx:Metadata>
    [Event(name="viewClick", type="flash.events.Event")]
</mx:Metadata>
<mx:Label x="11" y="9" text="{String(Title)}" styleName="listItemLabel"/>
<mx:TextArea x="11" y="25" height="36" width="170" backgroundAlpha="0.0" alpha="0.0" styleName="listItemDesc" wordWrap="true" editable="false" text="{String(Description)}"/>
<mx:Button x="20" y="65" label="View" click="viewClickHandler();" styleName="listItemButton" height="22" width="60"/>
<mx:LinkButton x="106" y="68" label="Details..." styleName="listItemLink" height="18"/>
<mx:HRule x="0" y="101" width="215"/> 
```

中继器

```
<mx:Canvas id="pnlSpotlight" label="SPOTLIGHT" height="100%" width="100%" horizontalScrollPolicy="off">
    <mx:VBox width="100%" height="80%" paddingTop="2" paddingBottom="1"  verticalGap="1">
        <mx:Repeater id="rptrSpotlight" dataProvider="{aSpotlight}">            
            <sm:SmallCourseListItem 
                viewClick="PlayFile(event.currentTarget.getRepeaterItem().fileName);"
                Description="{rptrSpotlight.currentItem.fileDescription}"
                FileID = "{rptrRecentlyViewed.currentItem.fileName}"    
                Title="{rptrSpotlight.currentItem.fileTitle}" />
        </mx:Repeater>
    </mx:VBox>
</mx:Canvas> 
```

处理功能

```
private function PlayFile(fileName:String):void{
    Alert.show(fileName.toString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-06T19:25:37.400

在您的自定义组件上，您可以侦听按钮单击事件，然后生成一个自定义事件，其中包含有关您要播放的文件的信息。然后，您可以将事件的 bubbles 属性设置为 true 并从您的自定义组件调度自定义事件。bubbles 属性将使您的事件在显示列表中浮动并到达您的主应用程序。现在在您的主应用程序上，您可以收听该事件并播放正确的文件。希望这可以帮助。

# version-control - 所有不同类型的版本控制有什么区别？

> ID：3859
> 
> 赞同：22
> 
> 时间：2008-08-06T18:58:53.707
> 
> 标签：version-control

在 SO 上至少有 10 人告诉我版本控制是一件好事，即使只有我一个人，我现在有一个后续问题。

所有不同类型的版本控制之间有什么区别？是否有任何人都知道的非常简单易懂的版本控制指南？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-08-06T19:10:51.687

我们似乎正处于版本控制的黄金时代，有很多选择，所有这些都有其优点和缺点。

以下是我看到最常用的：

*   svn——目前最流行的开源？
*   git - 自从 Linus 切换到它后非常热
*   善变 - 我认识的一些聪明人对此发誓
*   cvs - 每个人都在转换的那个
*   perforce - 恕我直言，最好的功能，但它不是开源的。不过，两用户许可证是免费的。
*   visual sourcesafe - 我在微软的世界里并不多，所以我不知道这个，除了人们喜欢在微软的所有东西上破旧不堪。
*   sccs - 出于历史兴趣，我们提到了这一点，上述许多人的曾祖父
*   rcs - 以及上述许多人的祖父

我的建议：使用 git、svn 或 perforce 最安全，因为很多人使用它们，它们是跨平台的，有很好的 gui，你可以购买有关它们的书籍等。

不要考虑 cvs、sccs、rcs，它们是古董。

好消息是，由于您的项目相对较小，一旦您更有经验并决定要使用另一个系统，您就可以将代码移至新系统。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-08-06T19:02:28.303

Eric Sink 对源代码控制有[很好的概述](http://www.ericsink.com/scm/source_control.html)。这里还有一些关于 SO[的现有](https://stackoverflow.com/questions/871/why-is-git-better-than-subversion) [问题。](https://stackoverflow.com/questions/2658/version-control-getting-started)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-06T19:34:49.940

对于刚开始使用版本控制的每个人：

**由于炒作，请不要使用 git（或 hg 或 bzr）**

使用 git（或 hg 或 bzr），因为它们是比 SVN**更好的源代码管理工具**。

我在工作中使用了几年的 SVN，并在 6 个月前切换到了 git。如果不先学习 SVN，在使用 DVCS 时我会完全迷失。

对于刚开始使用版本控制的人：

*   首先下载SVN
*   了解*为什么*需要版本控制
*   学习如何提交、签出、分支
*   了解为什么在 SVN 中合并如此痛苦

然后切换到 DVCS 并学习：

*   如何克隆/分支/提交
*   合并你的分支是多么容易（分支疯狂！）
*   重写提交历史并让您的分支与主线保持同步是多么容易（ [git rebase -i](http://git-scm.com/docs/git-rebase) , ）
*   如何发布您的更改以便其他人受益

* * *

tldr; 人群：

从 SVN 开始学习基础知识，然后毕业到 DVCS。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-08-06T19:00:23.050

版本控制对于开发来说是必不可少的，即使您自己工作也是如此，因为它可以保护您免受自己的伤害。如果你犯了一个错误，回滚到你知道有效的以前版本的代码是一件简单的事情。这也使您可以自由地探索和试验您的代码，因为您不必担心您正在做的事情是否可逆。版本控制系统 (VCS) 有两个主要分支，集中式和分布式。

集中式 VCS 基于使用中央服务器，每个人都“签出”一个项目，对其进行处理，并将他们的更改“提交”回服务器以供其他人使用。主要的集中式 VCS 是 CVS 和 SVN。两者都受到严厉批评，因为“合并”“分支”对他们来说非常痛苦。[TODO：解释什么是分支以及为什么用 CVS 和 SVN 很难合并]

分布式 VCS 让每个人都拥有自己的服务器，您可以在其中“拉”其他人的更改并将更改“推送”到服务器。最常见的分布式 VCS 是 Git 和 Mercurial。[TODO：写更多关于分布式 VCS]

如果您正在处理一个项目，我强烈建议您使用分布式 VCS。我推荐 Git，因为它速度极快，但被批评为太难使用。如果您不介意使用商业产品，BitKeeper 应该很容易使用。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-08-06T19:02:22.203

我将从：

*   [版本控制的可视化指南](http://betterexplained.com/articles/a-visual-guide-to-version-control/)
*   [维基百科](http://en.wikipedia.org/wiki/Revision_control)

阅读完之后，下载并安装[SVN](http://subversion.tigris.org/)、[TortoiseSVN并浏览](http://tortoisesvn.tigris.org/)[本书](http://svnbook.red-bean.com/)的前几章并开始使用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-06T19:29:10.153

[另一个问题](https://stackoverflow.com/questions/2658/version-control-getting-started)的[答案](https://stackoverflow.com/questions/2658/version-control-getting-started#2668)也适用于此，最重要的是

> [Jon Works](https://stackoverflow.com/users/413/jon-works)说：
> 版本控制最重要的是：
> 
> *开始使用吧*

他的回答更详细，我不想被指责为剽窃，所以看看。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-06T23:31:21.270

简单的答案是，你喜欢撤消按钮吗？答案当然是肯定的，因为我们人类总是犯错误。

作为程序员，通常情况下，在我们尝试解决问题的方法之前可能需要几个小时的测试、代码更改、覆盖、删除、文件移动和重命名，这完全是错误的，并且代码比我们开始时更糟糕。

因此，源代码控制是一个巨大的撤消按钮，可将代码恢复到草绿色且食物充足的早期时间。不仅如此，由于源代码控制的工作方式，您仍然可以保留损坏代码的副本，以防几周后您想再次参考它并挑选出任何好的想法.

我个人（尽管它可能被称为矫枉过正）使用 Source Gear Fortress 的免费单用户许可版本（这是他们的具有错误跟踪功能的 Vault 源代码控制产品）。我发现 UI 使用起来非常简单，它同时支持 checkout > edit > checkin 模型和 edit > merge > commit 模型。不过设置起来可能有点棘手，需要您运行 ISS 和 SQL 服务器的本地副本。您可能想尝试一个较小的程序，例如此处其他答案所推荐的程序。看看你喜欢什么，你能负担得起什么。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-08-06T23:33:52.843

马克说：

> git - 自从 Linus 切换到它后非常热

我只想指出，Linus 没有切换到它，Linus*写*的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-06T19:15:30.227

如果您自己在 Windows 环境中工作，那么 SourceGear 的 Vault 的[单用户许可](http://www.sourcegear.com/faq.html)是免费的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-06T19:59:33.697

我们使用并喜欢[Mercurial](http://www.selenic.com/mercurial/wiki/)。它遵循分布式模型——它消除了一些必须“签到”工作的感觉。Mozilla 已[迁移到 Mercurial](https://web.archive.org/web/20150604064655/https://developer.mozilla.org/en-US/docs/Mercurial)，这是一个好兆头，表明它不会很快消失。在我看来，一个缺点是它没有一个很好的 GUI。但是，如果您对命令行感到满意，那么它非常方便。

[Mercurial 文档](http://www.selenic.com/mercurial/wiki/) [非官方手册](http://hgbook.red-bean.com/hgbook.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-17T02:17:44.077

只需开始使用源代码管理，无论您使用什么类型。你用什么并不重要；重要的是它的用途

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-07T12:36:31.950

和其他人一样，SC 真的取决于您的需求、预算、环境等。

从根本上说，源代码控制旨在为您的所有代码提供一个中央存储库，并跟踪谁在何时对其做了什么。应该有完整的历史记录，并且您可以获得执行完整变更日志、审核、访问控制等的产品...

当您开始考虑希望或需要如何将 SC 纳入您的环境（无论是您的个人代码和文档还是大型公司）时，那里的每种产品都开始发光（可以这么说）。随着人们使用它们，他们发现该工具有局限性，因此人们编写了新的。SVN 诞生于创作者在 CVS 中看到的限制。Linus 想要为 Linux 内核提供更好的东西，所以现在我们有了**git**。

我会说开始使用一个（像 SVN 这样非常流行且非常易于使用的东西）并看看它是如何进行的。随着时间的推移，您可能会发现您需要一些其他功能，或者需要与其他系统交互，因此您可能需要 SourceSafe 或其他工具。

源代码控制始终很重要，虽然您可以在处理 PSD 文件或其他内容时手动重新编号版本，但您会忘记运行该批处理脚本一次或两次，或者可能忘记哪个编号去了与哪个变化。这就是大多数这些 SC 工具可以提供帮助的地方（只要您签入/签出）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-31T09:34:01.227

另请参阅此 SO 问题：

*   [GIT 和 CVS 的区别](https://stackoverflow.com/questions/802573/difference-between-git-and-cvs)

# visual-studio - 自动发布脚本和 Visual Studio 安装项目

> ID：3867
> 
> 赞同：11
> 
> 时间：2008-08-06T19:04:51.823
> 
> 标签：visual-studio, msbuild, wix, build-automation, vdproj

我认为这里的大多数人都了解全自动构建的重要性。

问题是我们的一个项目现在正在使用集成的 Visual Studio 安装项目 (vdproj)，并且最近已移植到 Visual Studio 2008。不幸的是，那些不会在 MSBuild 中构建，并且在 2008 上调用 devenv.exe /build 只会崩溃，显然它在所有多核计算机上都这样做（！！！）。所以现在我可以选择要么回滚到 .Net 2.0 和 2005，要么干脆放弃 Visual Studio 部署，但首先，我想要第二个意见。

任何人都知道另一种构建 .vdproj 的自动化方法，它不需要我们打开 IDE 并单击内容？

* * *

当我说我们将放弃 vdproj 时，我想到的是 WiX。你有什么经验吗，好东西，警告？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-06T20:25:24.673

低成本解决方案是切换到使用 ClickOnce，您可以使用 MSBuild 自动执行此操作。但是，如果您仍然需要创建 Windows Installer 程序包，则需要将您的项目转换为 WiX（非常直接）并使用您的解决方案构建它。

这将帮助您入门： [使用 MSBuild 和 Windows Installer XML 自动发布](http://msdn.microsoft.com/en-us/magazine/cc163456.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-06T22:26:49.873

我以前使用过一点 WiX，通常我发现一旦你弄清楚要做什么，它就很棒，但是学习曲线很陡峭。如果您花一整天的时间阅读 WiX 教程，您应该能够完成 80% 的设置工作。

[WiX 工具集教程](http://wix.sourceforge.net/tutorial.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-26T20:28:27.957

我有同样的要求，最终使用了这两个链接中的建议

[大卫威廉姆斯博客](http://geekswithblogs.net/davewill/archive/2009/03/02/129787.aspx)

[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms404859.aspx)

基本上，由于 Team Build 本身不会为您构建设置项目，因此这种方法让您在常规构建完成后添加一个新的构建步骤。此步骤通过启动 devenv.exe 启动第二次构建。IDE 将构建您的设置文件。额外的构建有点昂贵，但我们只需要它用于将要推出的构建。每日构建最多需要这种定制，我们的 CI 构建不需要每次都构建设置文件。

之后您执行一些复制命令，再次构建显示在您的团队系统构建结果中的步骤，将设置文件移动到网络共享等。

一开始感觉有点像一团糟，但它确实有效，它也是 Team System 中自动化构建的完整部分，因此它适用于我的持续集成目标。

# javascript - 如何在 Firefox 扩展中将 HTML 字符串转换为 DOM 对象？

> ID：3868
> 
> 赞同：26
> 
> 时间：2008-08-06T19:08:19.290
> 
> 标签：javascript, firefox, dom

我正在使用 XMLHttpRequest 下载网页（标记汤 HTML），我想获取输出并将其转换为 DOM 对象，然后我可以在该对象上运行 XPATH 查询。如何从字符串转换为 DOM 对象？

似乎一般的解决方案是创建一个隐藏的 iframe 并将字符串的内容放入其中。一直在[谈论](http://starkravingfinkle.org/blog/2007/03/how-to-parse-html-in-mozilla/)更新[DOMParser](https://developer.mozilla.org/en-US/docs/Web/API/DOMParser)以支持 text/html，但从 Firefox 3.0.1 开始，`NS_ERROR_NOT_IMPLEMENTED`如果你尝试，你仍然会得到一个。

除了使用隐藏的 iframe 技巧之外，还有其他选择吗？如果不是，那么执行 iframe 技巧的最佳方法是什么，以便您的代码在任何当前打开的选项卡的上下文之外工作（这样关闭选项卡就不会搞砸代码等）？

[这](http://mxr.mozilla.org/mozilla/source/browser/components/microsummaries/src/nsMicrosummaryService.js#2090)是我为什么要寻找 iframe hack 以外的解决方案的一个示例，如果我必须编写*所有*代码才能获得强大的解决方案，那么我宁愿继续寻找其他东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-06T20:37:32.260

Ajaxian 实际上今天有一篇[关于从 iframe 插入/检索 html](http://ajaxian.com/archives/introducing-html-into-an-iframe-and-getting-it-back)的帖子。您可能可以使用他们在那里发布的 js 片段。

至于处理关闭浏览器/选项卡，您可以附加到 onbeforeunload ( [http://msdn.microsoft.com/en-us/library/ms536907(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms536907(VS.85).aspx) ) 事件并执行您需要执行的任何操作.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-06T19:13:13.930

**试试这个：**

```
var request = new XMLHttpRequest();

request.overrideMimeType( 'text/xml' );
request.onreadystatechange = process;
request.open ( 'GET', url );
request.send( null );

function process() { 
    if ( request.readyState == 4 && request.status == 200 ) {
        var xml = request.responseXML;
    }
} 
```

注意**overrideMimeType**和**responseXML**。
已`readyState == 4`“完成”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-06T19:59:50.997

尝试创建一个 div

```
document.createElement( 'div' ); 
```

然后将标签汤HTML设置为div的innerHTML。浏览器应将其处理为 XML，然后您可以对其进行解析。

> innerHTML 属性接受一个字符串，该字符串指定文本和元素的有效组合。当设置了 innerHTML 属性时，给定的字符串将完全替换对象的现有内容。如果字符串包含 HTML 标记，则在将字符串放入文档时对其进行解析和格式化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T20:22:10.543

因此，您想使用 javascript 将网页作为 XML 对象下载，但您不想使用网页？由于您无法控制用户将执行的操作（关闭选项卡或窗口等），因此您需要像 OSX Dashboard 小部件或某些单独的应用程序一样执行此操作。Firefox 扩展也可以使用，除非您担心用户关闭浏览器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-12T18:56:54.637

> 除了使用隐藏的 iframe 技巧之外，还有其他选择吗？

不幸的是，不，不是现在。否则，您指向的微摘要代码将使用它。

> 如果不是，那么执行 iframe 技巧的最佳方法是什么，以便您的代码在任何当前打开的选项卡的上下文之外工作（这样关闭选项卡就不会搞砸代码等）？

您引用的代码使用最近的浏览器窗口，因此关闭选项卡不会影响解析。关闭该浏览器窗口将中止您的加载，但您可以处理它（例如检测加载中止并在另一个窗口中重新启动它）并且它不会经常发生。

您需要一个 DOM 窗口才能使 iframe 正常工作，因此目前没有干净的解决方案（如果您热衷于使用 mozilla 解析器）。

# java - 空参数的 IllegalArgumentException 或 NullPointerException？

> ID：3881
> 
> 赞同：565
> 
> 时间：2008-08-06T19:26:30.627
> 
> 标签：java, exception, null, nullpointerexception, illegalargumentexception

我有一个简单的属性设置方法，`null`不适合这个特定的属性。我一直在这种情况下被撕裂：我应该扔一个[`IllegalArgumentException`](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html)，还是一个[`NullPointerException`](http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html)？从 javadocs 来看，两者似乎都是合适的。有某种可以理解的标准吗？或者这只是你应该做任何你喜欢做的事情之一，而且两者都是正确的？

* * *

## 回答 #1

> 赞同：430
> 
> 时间：2008-09-06T18:29:07.520

您应该使用`IllegalArgumentException`(IAE)，而不是`NullPointerException`(NPE)，原因如下：

首先，[NPE JavaDoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NullPointerException.html)明确列出了适合 NPE 的情况。请注意，当使用不当时，它们都会被*运行*时抛出。`null`相比之下，[IAE JavaDoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/IllegalArgumentException.html)再清楚不过了：“抛出来表明一个方法被传递了一个非法或不适当的参数。” 对，就是你！

其次，当您在堆栈跟踪中看到 NPE 时，您会假设什么？可能有人取消引用了`null`. 当您看到 IAE 时，您假定堆栈顶部的方法调用者传入了一个非法值。同样，后一个假设是正确的，前一个是误导性的。

第三，既然IAE显然是为验证参数而设计的，你不得不假设它是默认的异常选择，那你为什么要选择NPE呢？当然不是因为不同的行为——你真的希望调用代码从 IAE 中分别捕获 NPE 并因此做一些不同的事情吗？您是否尝试传达更具体的错误消息？但是无论如何，您都可以在异常消息文本中执行此操作，就像所有其他不正确的参数一样。

第四，所有其他不正确的参数数据都会是IAE，那为什么不一致呢？为什么非法`null`的如此特殊，以至于它应该与所有其他类型的非法论点分开？

最后，我接受其他答案给出的论点，即部分 Java API 以这种方式使用 NPE。但是，Java API 与从异常类型到命名约定的所有内容都不一致，所以我认为只是盲目地复制（您最喜欢的部分）Java API 并不足以胜过其他考虑。

* * *

## 回答 #2

> 赞同：313
> 
> 时间：2008-08-06T19:29:24.427

`IllegalArgumentException`如果您不想`null`成为允许的值，似乎需要 an ，`NullPointerException`如果您尝试*使用*结果为 的变量，则会抛出`null`。

* * *

## 回答 #3

> 赞同：167
> 
> 时间：2008-08-11T20:05:18.527

标准是扔`NullPointerException`。一般不会出错的“Effective Java”在第 42 条（第一版）、第 60 条（第二版）或第 72 条（第三版）“支持使用标准异常”中简要讨论了这一点：

> “可以说，所有错误的方法调用都归结为非法参数或非法状态，但其他异常通常用于某些类型的非法参数和状态。如果调用者在某些参数中传递 null 值，则禁止使用 null 值，约定规定抛出 NullPointerException 而不是 IllegalArgumentException。”

* * *

## 回答 #4

> 赞同：145
> 
> 时间：2011-11-19T18:42:13.277

`IllegalArgumentException`直到今天，当我注意到`java.util.Objects.requireNonNull`Java 7 中的方法时，我都赞成抛出空参数。使用该方法，而不是这样做：

```
if (param == null) {
    throw new IllegalArgumentException("param cannot be null.");
} 
```

你可以做：

```
Objects.requireNonNull(param); 
```

如果`NullPointerException`您传递的参数是`null`.

鉴于该方法在中间是正确的，`java.util`我认为它的存在是一个非常强烈的迹象，表明抛出`NullPointerException`是“Java 做事的方式”。

我想我无论如何都决定了。

请注意，关于硬调试的论点是虚假的，因为您当然可以提供一条消息来`NullPointerException`说明什么是 null 以及为什么它不应该为 null。就像`IllegalArgumentException`.

一个额外的优点`NullPointerException`是，在高性能关键代码中，您可以省去对 null 的显式检查（以及`NullPointerException`带有友好错误消息的 a），而只依赖于`NullPointerException`当您在 null 上调用方法时会自动获得范围。如果您快速调用一个方法（即快速失败），那么您将获得基本相同的效果，只是对开发人员来说不太友好。大多数时候，最好明确检查并抛出有用的消息来指示哪个参数为空，但是如果性能要求不破坏方法/构造函数的已发布合同，则可以选择更改它。

* * *

## 回答 #5

> 赞同：74
> 
> 时间：2008-08-08T20:35:04.007

我倾向于遵循 JDK 库的设计，尤其是集合和并发（Joshua Bloch、Doug Lea，这些人知道如何设计可靠的 API）。无论如何，JDK 中的许多 API 都会主动抛出`NullPointerException`.

例如，用于`Map.containsKey`状态的 Javadoc：

> @throws NullPointerException 如果键为空并且此映射不允许空键（可选）。

抛出你自己的 NPE 是完全有效的。约定是在异常消息中包含为 null 的参数名称。

模式是：

```
public void someMethod(Object mustNotBeNull) {  
    if (mustNotBeNull == null) {  
        throw new NullPointerException("mustNotBeNull must not be null");  
    }  
} 
```

无论您做什么，都不要设置错误的值并在以后其他代码尝试使用它时抛出异常。这使得调试成为一场噩梦。您应该始终遵循“快速失败”的原则。

* * *

## 回答 #6

> 赞同：47
> 
> 时间：2009-12-09T06:07:52.040

投票赞成 Jason Cohen 的论点，因为它很好地呈现。让我一步一步地肢解它。;-)

*   [NPE JavaDoc](http://docs.oracle.com/javase/7/docs/api/)明确指出， “空对象的*其他非法用途”*。如果它仅限于运行时在不应该遇到 null 的情况下，那么所有这些情况都可以更简洁地定义。

*   如果您假设错误，但假设封装被正确应用，您真的不应该关心或注意 null 是否被不适当地取消引用，而不是方法是否检测到不适当的 null 并触发异常。

*   出于多种原因，我会选择[NPE](http://docs.oracle.com/javase/7/docs/api/)而不是[IAE](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html)

    *   更具体的非法经营性质
    *   错误地允许空值的逻辑往往与错误地允许非法值的逻辑大不相同。例如，如果我正在验证用户输入的数据，如果我得到不可接受的值，则该错误的根源在于应用程序的最终用户。如果我得到一个空值，那就是程序员错误。
    *   无效值可能会导致堆栈溢出、内存不足错误、解析异常等。事实上，大多数错误通常在某些时候以无效值的形式出现在某些方法调用中。出于这个原因，我认为 IAE 实际上是*RuntimeException*下所有异常中最常见的。
*   实际上，其他无效参数可能会导致各种其他异常。[UnknownHostException](http://docs.oracle.com/javase/7/docs/api/java/net/UnknownHostException.html)、[FileNotFoundException](http://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html)、各种语法错误异常、[IndexOutOfBoundsException](http://docs.oracle.com/javase/7/docs/api/java/lang/IndexOutOfBoundsException.html)、认证失败等

总的来说，我觉得 NPE 受到了很大的诟病，因为传统上一直与未能遵循[快速失败原则](http://www.martinfowler.com/ieeeSoftware/failFast.pdf)的代码相关联。再加上 JDK 未能用消息字符串填充 NPE，确实造成了一种没有充分根据的强烈负面情绪。实际上，从运行时的角度来看，NPE 和 IAE 之间的区别严格来说就是名称。从这个角度来看，你的名字越准确，你给来电者的清晰度就越高。

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2008-10-17T13:31:45.627

这是一个“圣战”风格的问题。换句话说，这两种选择都很好，但人们会有自己的偏好，他们会誓死捍卫。

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2008-08-06T19:31:11.070

如果它是一个`setter`方法并且`null`被传递给它，我认为抛出一个`IllegalArgumentException`. 在`NullPointerException`您尝试实际使用`null`.

所以，如果你正在使用它并且它是`null`, `NullPointer`. 如果它被传入并且它是`null`, `IllegalArgument`.

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2009-07-02T04:47:14.430

Apache Commons Lang 有一个[NullArgumentException](http://commons.apache.org/lang/apidocs/org/apache/commons/lang/NullArgumentException.html)，它执行了这里讨论的许多事情：它扩展了 IllegalArgumentException 并且它的唯一构造函数采用了应该是非空的参数的名称。

虽然我觉得抛出 NullArgumentException 或 IllegalArgumentException 之类的东西更准确地描述了特殊情况，但我和我的同事选择听从 Bloch 关于这个主题的建议。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2008-08-22T11:11:35.980

不能更同意所说的话。早失败，快失败。非常好的例外咒语。

关于抛出哪个异常的问题主要是个人喜好问题。在我看来，IllegalArgumentException 似乎比使用 NPE 更具体，因为它告诉我问题出在我传递给方法的参数上，而不是在执行方法时可能生成的值。

我的 2 美分

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2012-12-31T17:44:57.683

实际上，抛出 IllegalArgumentException 或 NullPointerException 的问题在我看来只是对 Java 中的异常处理理解不完整的少数人的“圣战”。一般来说，规则很简单，如下所示：

*   必须尽快指出参数约束违规（-> 快速失败），以避免更难调试的非法状态
*   如果由于某种原因出现无效的空指针，则抛出 NullPointerException
*   如果出现非法数组/集合索引，则抛出 ArrayIndexOutOfBounds
*   如果数组/集合大小为负，则抛出 NegativeArraySizeException
*   如果存在上述未涵盖的非法参数，并且您没有其他更具体的异常类型，请将 IllegalArgumentException 作为废纸篓抛出
*   另一方面，如果由于某种正当原因而无法通过快速失败避免的 FIELD 内的约束违规，则将其捕获并重新抛出为 IllegalStateException 或更具体的检查异常。在这种情况下，切勿让原始 NullPointerException、ArrayIndexOutOfBounds 等传递！

将所有类型的参数约束违规映射到 IllegalArgumentException 的情况至少有三个很好的理由，第三个可能非常严重，以至于标志着实践不好的风格：

(1) 程序员不能安全地假设所有违反参数约束的情况都会导致 IllegalArgumentException，因为如果没有更具体的异常可用，大多数标准类都使用此异常而不是作为废纸篓。尝试将所有违反参数约束的情况映射到 API 中的 IllegalArgumentException 只会导致程序员在使用您的类时感到沮丧，因为标准库大多遵循违反您的规则的不同规则，并且您的大多数 API 用户也会使用它们！

(2) 映射异常实际上会导致另一种异常，由单继承引起：所有Java异常都是类，因此仅支持单继承。因此，没有办法创建一个真正说是 NullPointerException 和 IllegalArgumentException 的异常，因为子类只能从其中一个继承。因此，在出现空参数的情况下抛出 IllegalArgumentException 会使 API 用户在程序尝试以编程方式纠正问题时更难区分问题，例如通过将默认值输入到重复调用中！

(3) 映射实际上会产生错误屏蔽的危险：为了将参数约束违规映射到 IllegalArgumentException，您需要在每个具有任何约束参数的方法中编写外部 try-catch。但是，简单地在这个 catch 块中捕获 RuntimeException 是不可能的，因为这可能会将记录在案的 RuntimeExceptions 映射到 IllegalArgumentException 中，即使它们不是由违反参数约束引起的。因此，您需要非常具体，但即使这种努力也不能保护您免受意外将另一个 API 的未记录运行时异常（即错误）映射到 API 的 IllegalArgumentException 的情况。

另一方面，在标准实践中，规则保持简单，异常原因保持公开和具体。对于方法调用者，规则也很简单： - 如果您因为传递了非法值而遇到任何类型的记录运行时异常，请使用默认值重复调用（因为此特定异常是必要的），或者更正您的代码- 另一方面，如果您遇到运行时异常，但未记录给定参数集会发生，请向方法的制造者提交错误报告，以确保他们的代码或文档得到修复。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2016-09-23T10:07:12.967

作为一个主观问题，这应该被关闭，但它仍然是开放的：

这是我以前工作的地方使用的内部政策的一部分，而且效果很好。这都是凭记忆，所以我不记得确切的措辞。值得注意的是，他们没有使用检查异常，但这超出了问题的范围。他们确实使用的未经检查的异常分为 3 个主要类别。

NullPointerException：不要故意抛出。NPE 在取消引用空引用时只能由 VM 抛出。将尽一切可能确保这些东西永远不会被抛出。@Nullable 和 @NotNull 应与代码分析工具结合使用以查找这些错误。

IllegalArgumentException：当函数的参数不符合公共文档时抛出，这样可以根据传入的参数来识别和描述错误。OP 的情况属于此类。

IllegalStateException：当调用函数并且其参数在传递时意外或与该方法所属的对象的状态不兼容时抛出。

例如，有两个内部版本的 IndexOutOfBoundsException 用于具有长度的事物。IllegalStateException 的一个子类，在索引大于长度时使用。IllegalArgumentException 的另一个子类，在索引为负数时使用。这是因为您可以向对象添加更多项目并且参数将是有效的，而负数永远不会有效。

正如我所说，这个系统运行得非常好，有人解释了为什么会有区别：“根据错误的类型，你很容易弄清楚该怎么做。即使你实际上无法弄清楚找出问题所在，您可以找出在哪里捕获该错误并创建额外的调试信息。”

NullPointerException：处理 Null 情况或放入断言，以便不抛出 NPE。如果您放入断言只是其他两种类型中的一种。如果可能，继续调试，就好像断言一开始就在那里一样。

IllegalArgumentException：您的呼叫站点有问题。如果传入的值来自另一个函数，请找出您收到错误值的原因。如果您传入其中一个参数，则会传播错误检查调用堆栈，直到找到未返回您期望的函数。

IllegalStateException：您没有以正确的顺序调用您的函数。如果您使用其中一个参数，请检查它们并抛出描述问题的 IllegalArgumentException。然后，您可以将脸颊向上传播到堆栈，直到找到问题为止。

无论如何，他的观点是您只能将 IllegalArgumentAssertions 复制到堆栈中。您无法将 IllegalStateExceptions 或 NullPointerExceptions 传播到堆栈上，因为它们与您的函数有关。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2008-08-11T19:43:49.210

如果使用*IllegalArgumentException( String message )*来声明参数无效并提供尽可能多的详细信息，则公认的做法是……所以说发现参数为空而异常非空，你会做一些事情像这样：

```
if( variable == null )
    throw new IllegalArgumentException("The object 'variable' cannot be null"); 
```

您几乎没有理由隐式使用“NullPointerException”。NullPointerException 是当您尝试在空引用上执行代码时 Java 虚拟机抛出的异常（如*toString()*）。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2012-11-09T16:30:07.017

抛出参数独有的异常`null`（无论`NullPointerException`是自定义类型）使自动化`null`测试更加可靠。这种自动化测试可以通过反射和一组默认值来完成，就像在[Guava](http://code.google.com/p/guava-libraries/)的[`NullPointerTester`](http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/testing/NullPointerTester.java). 例如，`NullPointerTester`将尝试调用以下方法...

```
Foo(String string, List<?> list) {
  checkArgument(string.length() > 0);
  // missing null check for list!
  this.string = string;
  this.list = list;
} 
```

...带有两个参数列表：`"", null`和`null, ImmutableList.of()`. 它将测试这些调用中的每一个是否都会抛出预期的`NullPointerException`. 对于此实现，传递`null`列表*不会*产生`NullPointerException`. 但是，它确实会产生一个，`IllegalArgumentException`因为`NullPointerTester`碰巧使用了默认字符串`""`. 如果`NullPointerTester`只期望值`NullPointerException`，`null`它会捕获错误。如果它期望`IllegalArgumentException`，它会错过它。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2008-09-05T10:34:05.583

一般来说，开发人员**永远不**应该抛出 NullPointerException。当代码尝试取消引用值为 null 的变量时，运行时会引发此异常。因此，如果您的方法想要明确禁止 null，而不是碰巧有一个 null 值引发 NullPointerException，则应该抛出 IllegalArgumentException。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2012-11-09T16:18:38.267

一些集合假设使用而不是`null`拒绝。例如，如果您将包含的集合与拒绝的集合进行比较，则第一个集合将调用另一个集合并捕获它的-- 但不是。（我正在研究 的实现。）`NullPointerException``IllegalArgumentException``null``null``containsAll``NullPointerException``IllegalArgumentException``AbstractSet.equals`

您可以合理地争辩说，以这种方式使用未经检查的异常是一种反模式，将包含`null`的集合与不能包含的集合进行比较`null`是一个可能确实*应该*产生异常的错误，或者`null`根本就放入一个集合是一个坏主意. 然而，除非你愿意说`equals`在这种情况下应该抛出异常，否则你会一直记住`NullPointerException`在某些情况下是必需的，而在其他情况下则不需要。（“在 NPE 之前的 IAE，除了 'c' 之后......”）

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2015-06-23T13:51:21.917

`NullPointerException`尝试使用当前值为 的引用变量访问对象时抛出`null`。

`IllegalArgumentException`当方法接收到格式与方法预期不同的参数时抛出。

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2009-01-17T00:13:16.980

我想从其他非法参数中挑选出 Null 参数，因此我从 IAE 派生了一个名为 NullArgumentException 的异常。甚至不需要阅读异常消息，我就知道一个空参数被传递到一个方法中，并且通过阅读消息，我找出哪个参数是空的。我仍然使用 IAE 处理程序捕获 NullArgumentException，但在我的日志中，我可以快速看到差异。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2012-04-17T17:15:09.600

二分法...它们不重叠吗？只有整体中不重叠的部分才能形成二分法。照我看来：

```
throw new IllegalArgumentException(new NullPointerException(NULL_ARGUMENT_IN_METHOD_BAD_BOY_BAD)); 
```

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2015-06-05T09:43:13.063

根据您的情况，`IllegalArgumentException`是最好的选择，因为`null`它不是您的财产的有效价值。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2008-08-16T18:13:20.263

上述两个异常的链接中的定义是 IllegalArgumentException: 抛出以指示方法已传递了非法或不适当的参数。NullPointerException：当应用程序在需要对象的情况下尝试使用 null 时引发。

这里最大的区别是在检查方法的参数是否有效时应该使用 IllegalArgumentException。NullPointerException 应该在当对象为空时被“使用”时使用。

我希望这有助于正确看待两者。

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2008-08-28T18:03:19.793

如果它是一个“setter”，或者我让一个成员稍后使用，我倾向于使用 IllegalArgumentException。

如果这是我现在要在方法中使用（取消引用）的东西，我会主动抛出 NullPointerException。我比让运行时更喜欢这样做，因为我可以提供有用的消息（似乎运行时也可以这样做，但这是另一天的咆哮）。

如果我要覆盖一个方法，我会使用被覆盖的方法使用的任何东西。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2008-09-09T04:13:05.290

你应该抛出一个 IllegalArgumentException，因为它会让程序员明白他做了一些无效的事情。开发人员已经习惯了看到虚拟机抛出的 NPE，以至于任何程序员都不会立即意识到自己的错误，并且会开始随意四处寻找，或者更糟的是，责怪你的代码有“错误”。

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2008-10-29T16:20:26.617

在这种情况下，IllegalArgumentException 使用您的 API 向用户传达“不应为空”的明确信息。正如其他论坛用户指出的那样，只要您使用您的 API 向用户传达正确的信息，您就可以使用 NPE。

GaryF 和tweakt 删除了推荐使用NPE 的“Effective Java”（我发誓）参考。了解其他优秀 API 的构建方式是了解如何构建 API 的最佳方式。

另一个很好的例子是查看 Spring API。例如， org.springframework.beans.BeanUtils.instantiateClass(Constructor ctor, Object[] args) 有一个 Assert.notNull(ctor, "Constructor must not be null") 行。org.springframework.util.Assert.notNull(Object object, String message) 方法检查传入的参数（对象）是否为 null，如果是则抛出一个新的 IllegalArgumentException(message)，然后在 org. springframework.beans.BeanUtils.instantiateClass(...) 方法。

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2016-08-18T08:40:06.050

理想情况下，不应抛出运行时异常。应为您的场景创建一个检查异常（业务异常）。因为如果抛出并记录这些异常中的任何一个，它就会在浏览日志时误导开发人员。相反，业务异常不会造成这种恐慌，并且在对日志进行故障排除时通常会被忽略。

* * *

## 回答 #26

> 赞同：-5
> 
> 时间：2008-08-11T13:20:39.560

如果您选择抛出 NPE 并且您在方法中使用该参数，则显式检查 null 可能是多余且昂贵的。我认为虚拟机已经为您做到了。

# sql-server - T-Sql 从货币数据类型中删除小数点

> ID：3894
> 
> 赞同：10
> 
> 时间：2008-08-06T19:34:47.910
> 
> 标签：sql-server, tsql, sql-server-2005

鉴于在 Sql Server 2005 中仅使用 T-Sql 的限制，有没有比转换为 varchar（此处为隐式）然后替换小数点更好的方法从货币数据类型中删除小数点？

这是我目前所拥有的。

```
SELECT REPLACE(1.23, '.', ''), REPLACE(19.99, '.', '') 
```

它返回所需的 123 和 1999，但我想知道是否有更好的方法。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-06T19:37:14.940

乘以 100，然后转换为 int。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-08T13:53:26.377

您永远不应该使用 money 数据类型来存储货币值。如果您进行任何计算，您将得到截断的结果。运行以下命令以了解我的意思

```
DECLARE
@mon1 MONEY,
@mon2 MONEY,
@mon3 MONEY,
@mon4 MONEY,
@num1 DECIMAL(19,4),
@num2 DECIMAL(19,4),
@num3 DECIMAL(19,4),
@num4 DECIMAL(19,4)

SELECT
@mon1 = 100, @mon2 = 339, @mon3 = 10000,
@num1 = 100, @num2 = 339, @num3 = 10000

SET @mon4 = @mon1/@mon2*@mon3
SET @num4 = @num1/@num2*@num3

SELECT @mon4 AS moneyresult,
@num4 AS numericresult 
```

输出：2949.0000 2949.8525

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-06T19:38:38.993

您能否对用例更具体一点？从表示中删除小数点有点不寻常，因为您将丢失有关比例的所有信息。您是否假设总会有两位数？如果是这样，您可以简化乘以 100，然后在转换为字符串之前进行舍入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-06T20:59:36.880

请记住，货币数据类型最多可以有小数点后 4 位。对于您的原始解决方案或 x100 技巧，超过两位数的值可能无法按预期工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T06:02:47.553

这是魔术：

```
DataFormatString="{0:c0} 
```

这将删除小数位。

# c# - 这是确定操作系统架构的好方法吗？

> ID：3903
> 
> 赞同：22
> 
> 时间：2008-08-06T19:41:59.813
> 
> 标签：c#, windows, registry

由于 WMI 类 Win32_OperatingSystem 只包含 Windows Vista 中的 OSArchitecture，所以我很快写了一个方法，使用注册表来尝试确定当前系统是 32 位还是 64 位系统。

```
private Boolean is64BitOperatingSystem()
{
    RegistryKey localEnvironment = Registry.LocalMachine.OpenSubKey("SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Environment");
    String processorArchitecture = (String) localEnvironment.GetValue("PROCESSOR_ARCHITECTURE");

    if (processorArchitecture.Equals("x86")) {
        return false;
    }
    else {
        return true;
    }
} 
```

到目前为止，这对我们来说效果很好，但我不确定我有多喜欢浏览注册表。这是一种非常标准的做法还是有更好的方法？

**编辑**：哇，该代码在预览中看起来更漂亮。下次我会考虑链接到 pastebin 或其他东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-06T19:49:35.727

看看 Raymond Chens 的解决方案：

[如何以编程方式检测您是否在 64 位 Windows 上运行](http://blogs.msdn.com/oldnewthing/archive/2005/02/01/364563.aspx)

这是 .NET 的 PINVOKE：

[IsWow64Process (kernel32)](http://www.pinvoke.net/default.aspx/kernel32/IsWow64Process.html?diff=y)

**更新：**我会在检查“x86”时遇到问题。谁能说英特尔或 AMD 的下一个 32 位处理器可能被指定为什么。概率很低，但有风险。您应该要求操作系统通过正确的 API 来确定这一点，而不是通过查询可能被认为对外界不透明的操作系统版本/平台特定值。问自己这些问题，1 - 相关的注册表项是否由 MS 正确记录，2 - 如果是，它们是否提供了可能值的明确列表，保证允许您作为开发人员在您是否正在运行之间做出明智的决定32 位或 64 位。如果答案是否定的，那么调用 API，是的，它是一个更冗长的但它被记录和确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-06T20:07:33.587

> 在 .NET 下测试 64 位的最简单方法是检查 IntPtr.Size 的值。

对于在 WOW 下运行的 32 位应用程序，我相信 IntPtr.Size 的值是 4，不是吗？

**编辑**：@编辑：是的。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-06T19:48:05.153

查看注册表是完全有效的，只要您可以确定应用程序的用户将始终可以访问您需要的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-06T20:01:58.450

在 .NET 下测试 64 位的最简单方法是检查 IntPtr.Size 的值。

编辑：哇！这将告诉您当前进程是否为 64 位，而不是整个操作系统。对不起！

# c# - 有哪些好的 .NET 分析器？

> ID：3927
> 
> 赞同：374
> 
> 时间：2008-08-06T20:14:57.173
> 
> 标签：c#, .net, profiling, profiler

在使用 .net 程序时，您使用过哪些分析器，您会特别推荐哪些？

* * *

## 回答 #1

> 赞同：284
> 
> 时间：2008-09-19T08:29:08.040

我已经广泛使用[JetBrains dotTrace](http://www.jetbrains.com/profiler/)和[Redgate ANTS](http://www.red-gate.com/products/ants_performance_profiler/)。它们在功能和价格上非常相似。它们都提供有用的性能分析和非常基本的内存分析。

dotTrace 与 Resharper 集成，非常方便，因为您可以在 IDE 中一键分析单元测试的性能。然而，dotTrace 似乎经常给出虚假的结果（例如说一个方法需要几年才能运行）

我更喜欢 ANTS 呈现分析结果的方式。它向您显示源代码，每行左侧告诉您运行所需的时间。dotTrace 只有一个树视图。

[EQATEC 探查器](http://www.eqatec.com/Profiler/)非常基础，需要您编译程序集的特殊检测版本，然后可以在 EQATEC 探查器中运行。但是，它是免费的。

总的来说，我更喜欢 ANTS 进行性能分析，尽管如果您使用 Resharper，那么 dotTrace 的集成是一个杀手级功能，这意味着它在可用性方面击败了 ANTS。

免费的 Microsoft CLR Profiler ( [.Net framework 2.0](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=13382) / [.Net Framework 4.0](http://www.microsoft.com/download/en/details.aspx?id=16273) ) 是 .NET 内存分析所需的一切。

**2011 年更新：**

[Scitech 内存分析器](http://memprofiler.com/)有一个非常基本的UI，但有很多有用的信息，包括一些 dotTrace 和 ANTS 缺少的关于非托管内存的信息 - 如果你正在做 COM 互操作，你可能会发现它很有用，但我还没有找到任何分析器使 COM记忆问题很容易诊断——你通常必须爆发`windbg.exe`。

ANTS 分析器在过去几年中突飞猛进，它的内存分析器具有一些真正有用的功能，据我估计，现在它作为一个软件包将其推向了 dotTrace 之前。我很幸运拥有两者的许可证，但是如果您要购买一个同时用于性能和内存的 .Net 分析器，那就让它成为 ANTS。

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2009-09-25T03:16:32.280

其他人已经涵盖了性能分析，但**关于内存分析** ，我目前正在评估 Scitech .NET Memory Profiler 3.1 和 ANTS Memory Profiler 5.1（截至 2009 年 9 月的当前版本）。我在一两年前尝试了 JetBrains，但它不如 ANTS（用于内存分析），所以这次我没有打扰。从阅读网站来看，它似乎没有与其他两个相同的*内存分析*功能。

ANTS 和 Scitech 内存分析器都具有另一个没有的功能，因此哪个最好取决于您的偏好。一般来说，Scitech 提供更详细的信息，而 ANTS 则在识别泄漏对象方面确实令人难以置信。总的来说，我更喜欢 ANTS，因为它可以快速识别可能的泄漏。

根据我的经验，以下是每种方法的主要优点和缺点：

**ANTS 和 Scitech .NET Memory Profiler 的共同特点**

*   实时分析功能
*   他们网站上的优秀操作视频
*   便于使用
*   合理的性能（显然比没有附加分析器要慢，但不会让你感到沮丧）
*   显示泄漏对象的实例
*   基本上他们都做得很好

**蚂蚁**

*   **一键式过滤器可查找常见泄漏，**包括：仅通过事件处理程序保持活动状态的对象、已释放但仍处于活动状态的对象以及仅通过来自已释放对象的引用保持活动状态的对象。这可能是 ANTS 的杀手级功能——因此发现泄漏的速度非常快。以我的经验，大多数泄漏是由于事件处理程序没有被解开而引起的，而 ANTS 只是将您直接带到这些对象。惊人的。
*   对象保留图。虽然在 Scitech 中提供了相同的信息，但在 ANTS 中更容易解释。
*   除了对象本身的大小之外，还显示带有子项的大小（但仅在不幸选择了一个实例时，而不是在整个类列表中）。
*   更好地与 Visual Studio 集成（右键单击图形以跳转到文件）

**Scitech .NET 内存分析器**

*   分配对象时显示堆栈跟踪。这对于分配在许多不同位置的对象**非常有用。**使用 ANTS 很难确定泄漏对象的确切创建位置。
*   显示未处理的一次性对象的计数。虽然不表示存在泄漏，但它确实确定了解决此问题并通过更快的垃圾收集提高应用程序性能的机会。
*   更详细的过滤选项（可以独立过滤几列）。
*   显示创建的对象总数（包括那些垃圾收集）的信息。ANTS 仅显示“实时”对象统计信息。这使得分析和调整整体应用程序性能变得更加容易（例如，确定在哪里创建了大量不必要的对象，而这些对象不一定会泄漏）。

总而言之，我认为 ANTS 可以帮助您更快地找到泄漏的内容，而 Scitech 一旦您知道要查看什么（例如创建时的堆栈跟踪），就会提供有关您的整体应用程序内存性能和各个对象的更多详细信息。如果将堆栈跟踪和未处理的一次性对象的跟踪添加到 ANTS 中，我不会看到需要使用其他任何东西。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2008-08-29T09:46:26.330

我最近发现了 EQATEC Profiler [http://www.eqatec.com/tools/profiler](http://www.eqatec.com/tools/profiler)。它适用于大多数 .NET 版本和许多平台。它易于使用，部分免费，即使用于商业用途。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2011-08-22T15:42:44.277

*[[全面披露](https://stackoverflow.com/users/54305/todd)]*

虽然功能还不如此处列出的其他一些 .NET 内存分析器功能全面，但市场上有一个名为[JustTrace](http://www.telerik.com/justtrace)的新条目。它由 Telerik 制作，其主要目标是让所有类型的应用程序（网络/Silverlight/桌面）更容易和更快地进行跟踪/分析。

如果您曾经发现使用其他工具进行分析和优化令人生畏或速度缓慢，那么[JustTrace](http://www.telerik.com/justtrace)可能值得一看。

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2008-08-06T20:19:16.417

不要忘记[nProf](http://code.google.com/p/nprof/ "谷歌项目托管上的 nprof") - 一个非常好的免费软件分析器。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2009-03-04T22:23:30.820

我发现[JetBrains的](http://www.jetbrains.com/)[dotTrace Profiler](http://www.jetbrains.com/profiler/)是一款出色的 .NET 分析工具，并且它们的 ASP.NET 模式质量很高。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2008-08-06T20:19:00.253

[蚂蚁探查器](http://www.red-gate.com/products/ants_profiler/index.htm)。我没有用过很多，但我对ANTS真的没有任何抱怨。可视化真的很有帮助。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2008-08-29T09:49:56.367

[AutomatedQA AQTime](http://www.automatedqa.com/products/aqtime/index.asp)用于计时，[SciTech MemProfiler](http://memprofiler.com/)用于内存。

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2010-12-29T20:04:40.507

如果您正在寻找快速、简单和免费的东西，[http://code.google.com/p/slimtune/](http://code.google.com/p/slimtune/)似乎可以很好地完成工作。

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2008-08-06T20:17:59.553

我一直在为 WinForms 和控制台应用程序使用[JetBrains dotTrace](http://www.jetbrains.com/profiler/)（尚未在 ASP.net 上测试），并且效果很好：

他们最近还添加了一个比公司许可证便宜得多的“个人许可证”。不过，如果其他人知道一些更便宜甚至免费的，我也想听听:-)

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2008-10-15T22:25:20.340

不要忘记很棒的 scitech [.net 内存分析器](http://memprofiler.com/)

它非常适合追踪您的 .net 应用程序内存不足的原因。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2009-04-07T23:29:35.177

我要补充一点，dotTrace 区分**内存和性能跟踪会话**的能力绝对是无价的（ANTS 也可能具有内存差异功能，但我没有看到性能差异）。

能够在错误修复或增强之前和之后运行分析会话，然后比较结果是非常有价值的，尤其是对于一个庞大的遗留 .NET 应用程序（在我的例子中），性能从来不是优先考虑的问题，而且发现瓶颈可能是很乏味。进行前后差异可以让您查看**每个方法的调用次数的****变化以及每个方法的持续时间**的变化。

这不仅在代码更改期间很有帮助，而且在您有一个使用不同数据库的应用程序（例如，对于每个客户/客户）时也很有帮助。如果一位客户抱怨速度缓慢，您可以使用他们的数据库运行分析会话并将结果与​​“快速”数据库进行比较，以确定哪些操作导致速度缓慢。当然有很多数据库端性能工具，但有时我确实有助于从应用程序端查看性能指标（因为这更接近用户实际看到的）。

**底线：dotTrace 效果很好，差异是无价的。**

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2009-03-04T22:19:44.260

[AQTime](http://www.automatedqa.com/products/aqtime/)是合理的，但有一点学习曲线，并且不像 Team Suite 中的内置那样易于使用

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-08-31T05:12:31.653

过去，我使用过[Visual Studio Team System](http://en.wikipedia.org/wiki/VSTS_Profiler)附带的分析器。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2010-02-08T13:15:34.043

当前版本的[SharpDevelop (3.1.1)](http://www.icsharpcode.net/OpenSource/SD/)有一个很好的集成分析器。它非常快，并且很好地集成到了 SharpDevelop IDE 及其 NUnit 运行器中。结果以灵活的树/列表样式显示（使用 LINQ 创建您自己的选择）。双击显示的方法直接跳转到源代码。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-08-06T20:17:06.280

我过去曾使用过 RedGate 的分析器。为我完成了这项工作。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2009-03-04T22:19:50.143

自己没有尝试过，但也许[dotTrace](http://www.jetbrains.com/profiler/)？他们的 ReSharper 应用程序当然是一个不错的应用程序。也许 dotTrace 也是 :)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2009-03-04T22:20:34.400

我怀疑 Visual Studio Team System 附带的分析器是最好的分析器，但我发现它在很多场合都足够好。除了 VS 提供的功能之外，您还需要什么？

编辑：不幸的是，它仅在 VS Team System 中可用，但如果您可以访问它，则值得一试。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2009-07-07T22:07:10.153

最新版本的 ANTS 内存分析器（我认为是 5）简直太棒了！我一直在使用 WinDbg 和 SOS 来解决泄漏问题，因为它被证明是以前最好的方法，然后我尝试了 ANTS，我在几分钟内就搞定了。真的是一款很棒的软件。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2010-06-15T09:56:31.103

我想添加[yourkit](http://www.yourkit.com/) java 和 .net 分析器，我喜欢它用于 Java，但还没有尝试过 .NET 版本。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2008-09-19T08:38:59.750

不幸的是，我尝试的大多数分析器在与尾调用一起使用时都失败了，尤其是 ANTS。我只是最终写我自己的。CodeProject 上有一个简单的实现，您可以将其用作基础。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2008-09-19T08:48:46.463

用于快速采样的[英特尔® VTune™ 性能分析器](http://www.intel.com/cd/software/products/asmo-na/eng/219898.htm)

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2010-03-16T21:07:33.377

我必须带上一个很棒的工具来引起你的注意，我曾经使用过。**AVICode 拦截器工作室**。在我以前的公司中，我们使用这个出色的工具来分析 Web 应用程序（*这应该是世界上最大的 Web 应用程序，也是有史以来最大的民用 IT 项目*）。表演团队在这个宏伟的工具的帮助下创造了奇迹。配置它很痛苦，但这是一次性的活动，我会说值得花时间。查看[此页面](http://www.avicode.com/productsinterceptstudiooverview.htm)了解详情。

谢谢，詹姆斯

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2010-08-07T11:31:45.240

对我来说，SpeedTrace 是市场上最好的工具，因为它不仅可以帮助您找到应用程序中的瓶颈。它还可以帮助您在故障排除场景中找出为什么您的应用程序崩溃、您的设置未安装、您的应用程序挂起、您的应用程序性能有时很差，具体取决于数据输入，例如识别缓慢的数据库事务。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2011-01-31T03:16:08.263

NuMega True Time 分析器继续存在于 Micro Focus 的 DevPartner Studio 中。它为只需要 PDB 而不需要源代码的 .NET 应用程序提供行和方法级别的详细信息（但它有帮助。）它可以使用我们专有的每线程内核模式时序驱动程序区分算法繁重的例程与具有长 I/O 等待的例程。10.5 版于 2011 年 2 月 4 日发布了新的 64 进程支持。无耻插件：我在 DevPartner 产品线工作。[在http://www.DevPartner.com](http://www.DevPartner.com)上跟进以获取 10.5 发布的消息。

免责声明：我是 Micro Focus DevPartner 的产品经理。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2011-09-02T13:05:29.797

我最近一直在测试 Telerik 的 JustTrace，尽管它距离成品还很遥远，但这些家伙正朝着正确的方向前进。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2012-02-02T15:36:07.877

如果许可是一个问题，您可以尝试使用 WINDBG 进行内存分析

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2009-06-05T15:17:10.210

我在使用[这个](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux/378024#378024)的大型 C# 应用程序中发现了很多问题。

通常问题发生在启动或关闭期间，因为正在加载插件，并且正在创建、销毁、序列化或反序列化大数据结构。通常它们会被多次创建和初始化，并且更改处理程序会被多次添加，从而使问题更加复杂。

在这种情况下，程序可能非常缓慢，只有 2 个样本就足以确定有罪的方法/函数/属性调用站点。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2012-01-09T16:12:17.377

我们在我的公司中选择了适用于 .NET 的 YourKit Profiler，因为它具有最佳价值（价格与功能）。对于一家希望拥有灵活许可（浮动许可）的小公司来说，这是一个完美的选择——ANTS 在当时是开发者座位挂坠盒。

此外，它为我们提供了附加到正在运行的进程的能力，这是 dotTrace 无法实现的。请注意，虽然附加不是最佳选择，因为所有 .NET 都会减慢速度，但这是分析由其他进程启动的 .NET 应用程序的唯一方法。功能方面，ANTS 和 dotTrace 更好——但最终 YourKit 已经足够好了。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2012-03-13T14:41:04.410

如果您使用的是 ASP.NET MVC，可以尝试 MVCMiniProfiler (http://benjii.me/2011/07/using-the-mvc-mini-profiler-with-entity-framework/)

# .net - 在 Windows 窗体应用程序中查找长时间运行代码的最佳方法是什么

> ID：3942
> 
> 赞同：8
> 
> 时间：2008-08-06T20:26:21.923
> 
> 标签：.net, vb.net

我继承了一个用 VB.Net 编写的 Windows 窗体应用程序。该应用程序的某些部分运行速度非常慢。找出代码的哪些部分阻碍了事情的最简单方法是什么？我正在寻找一种方法来快速找到最慢的子程序并首先解决它们，以尝试加快应用程序的速度。

我知道有几种代码分析器产品可供购买，它们会显示每个子例程需要多长时间，但我希望找到一个**免费**的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-07T01:01:16.177

我很欣赏寻找免费软件的愿望。但是，在这种情况下，我强烈建议您查看所有选项，包括商业产品。我尝试使用 nProf（我认为是 0.1 版），但运气不佳。即便如此，对应用程序进行性能分析是一项微妙的业务，最好使用功能强大、灵活的工具来处理。除非您是免费工作，否则我坚信使用专业产品所节省的时间将远远超过许可证的成本。当然，如果您只想分析单个应用程序，每个商业包都有 15 或 30 天的试用期，这足以确定现有应用程序中的任何问题。而且，如果您需要的不仅仅是一次性项目的分析支持，那么您最好还是购买一个完整的工具。

我们使用 RedGate 的[ANTS 分析器](http://www.red-gate.com/products/ants_profiler/index.htm)并且对它非常满意。我还使用了[.NET Memory Profiler](http://memprofiler.com/features.aspx)，结果非常好。.NET Memory Profiler 最酷的地方在于，它可以附加到正在运行的生产应用程序并对其进行分析，当我们在生产环境中出现无法在测试实验室中重现的内存泄漏时，它确实节省了我们的精力。

JetBrains 的人[有一个名为 dotTrace 的分析器](http://www.jetbrains.com/profiler/)，我没有尝试过，但我必须相信，如果它来自 JetBrains 商店，它可能也是一流的。

无论如何，我的建议是：尝试在其中一个或三个的聚合组合（至少 45 天免费使用）的免费试用窗口内修复您的应用程序，如果时间不够，选择您最喜欢的和春天为其中之一。你不会后悔的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-06T20:30:29.687

[nProf](http://nprof.sourceforge.net/Site/Description.html)是一个免费的 .Net 分析器（[参考](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers#3935)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-06T20:30:50.450

[nProf](http://nprof.sourceforge.net/Site/Description.html)是一个很好的免费 .Net Profiling 工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-01-03T02:00:26.003

Visual Studio 还附带了一个相当不错的性能分析器。它不是所有版本都附带的——对于 VS2008，我认为它是你需要的开发者版。

# sql-server - 我如何知道要实施哪些 SQL Server 2005 索引建议（如果有）？

> ID：3975
> 
> 赞同：9
> 
> 时间：2008-08-06T20:59:58.190
> 
> 标签：sql-server, sql-server-2005

我们正在将我们的一个 SQL Server 实例从 2000 年升级到 2005 年。我安装了性能仪表板 ( [http://www.microsoft.com/downloads/details.aspx?FamilyId=1d3a4a0d-7e0c-4730-8204 -e419218c1efc&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyId=1d3a4a0d-7e0c-4730-8204-e419218c1efc&displaylang=en) ) 用于访问一些高级报告。其中一份报告显示缺少（推荐的）索引。我认为它基于查询优化器维护的一些系统视图。

我的问题是确定何时接受指数推荐的最佳方法是什么。我知道应用所有优化器的建议是没有意义的。我看到很多建议基本上都说尝试索引并在性能提高时保留它，如果性能下降或保持不变则放弃它。我想知道是否有更好的方法来做出决定，以及在这个主题上有哪些最佳实践。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-08T13:32:30.550

首先要注意：

当您从 2000 升级到 2005（通过使用分离和附加）时，请确保您：

1.  将兼容性设置为 90
2.  重建索引
3.  使用完整扫描运行更新统计信息

如果您不这样做，您将获得次优计划。

如果该表主要是写入，则您希望尽可能少的索引如果该表用于大量读取查询，则您必须确保 WHERE 子句被索引覆盖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-06T21:11:53.987

你得到的建议是正确的。一个一个地尝试它们。

在性能方面，没有什么可以替代测试。除非你证明它，否则你什么都没做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-06T21:03:51.913

您最好研究数据库上发生的最常见查询类型并根据该研究创建索引。

例如，如果有一个存储网站点击量的表，该表经常被写入，但几乎没有读取。然后不要索引表。

如果您有一个访问频率高于写入频率的用户列表，那么我将首先在访问最多的列上创建一个聚集索引，通常是主键。然后，我将在常用搜索列以及按子句顺序使用的列上创建索引。

# python - 以编程方式与 OS X 或 Linux 中的串行端口通信

> ID：3976
> 
> 赞同：20
> 
> 时间：2008-08-06T21:00:01.217
> 
> 标签：python, linux, macos, serial-port

我有一个 Prolite LED 标志，我喜欢设置它来显示来自 apache 日志和其他有趣统计数据的滚动搜索查询。问题是，我的 G5 没有串口，所以我必须使用 USB 转串口加密狗。它显示为 /dev/cu.usbserial 和 /dev/tty.usbserial 。

当我这样做时，一切似乎都是笨拙的：

```
stty -f /dev/cu.usbserial
speed 9600 baud;
lflags: -icanon -isig -iexten -echo
iflags: -icrnl -ixon -ixany -imaxbel -brkint
oflags: -opost -onlcr -oxtabs
cflags: cs8 -parenb 
```

当我使用[串口工具](http://www.versiontracker.com/dyn/moreinfo/macosx/24024)与之交谈时，一切也都有效。

如果我在上面提到的串口工具的同时运行这段代码，那么一切都可以。但是，一旦我断开该工具，连接就会丢失。

```
#!/usr/bin/python

import serial

ser = serial.Serial('/dev/cu.usbserial', 9600, timeout=10) 
ser.write("<ID01><PA> \r\n") 
read_chars = ser.read(20)
print read_chars

ser.close() 
```

所以问题是，我需要执行什么魔法才能在没有串口工具的情况下开始与串口通信？这是权限问题吗？另外，/dev/cu.usbserial 和 /dev/tty.usbserial 有什么区别？

* * *

不，没有序列号。问题是，即使使用 sudo 运行 python 脚本，问题仍然存在，并且如果我在我提到的 gui 工具中打开连接，唯一可以让它通过的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-07T00:19:03.233

`/dev/cu.xxxxx`是“标注”设备，它是您在建立与串行设备的连接并开始与之交谈时使用的设备。`/dev/tty.xxxxx`是“拨入”设备，用于监视端口的传入呼叫，例如传真侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-06T23:40:43.810

你有没有试过观察 GUI 和串口之间的流量，看看是否有某种特殊的命令正在发送？也只是好奇，Python 发送的是 ASCII 而不是 UTF-8 或其他东西，对吗？我问的原因是因为我注意到您对字符串和某些语言的引号更改实际上是 ASCII 和 UTF-8 之间的区别。

# php - 多范式语言

> ID：3978
> 
> 赞同：22
> 
> 时间：2008-08-06T21:02:16.207
> 
> 标签：php, oop, paradigms, procedural

使用一种语言，例如（因为我现在正在使用它）PHP，它支持过程和面向对象的范例。

是否有一个好的经验法则可以确定哪种范式最适合新项目？如果没有，你怎么能做出决定？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-08-06T21:15:35.150

这完全取决于您要解决的问题。显然，您可以用任何一种风格（过程式或 OO）解决任何问题，但您通常可以在开始编写代码之前在规划阶段弄清楚哪种风格更适合您。

有些人喜欢写用例，如果他们看到很多相同的名词一遍又一遍地出现（例如，一个人从银行取钱），那么他们会走 OO 路线并使用这些名词作为他们的对象。相反，如果你没有看到很多名词，而实际上有更多的动词在进行​​，那么程序性或功能性可能是要走的路。

Steve Yegge 像往常一样有一篇[很棒但很长的帖子](http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html)，它从不同的角度谈到了这一点，你可能会发现它也很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-06T21:48:58.543

如果您正在为自己做某事，或者您只是在做一个原型，或测试一个想法……请使用脚本语言为您提供的自由风格。

在那之后：总是在对象中思考，尝试围绕 OO 范式组织你的工作，即使你正在编写程序性的东西。然后，重构，重构，重构。

# .net - TestDriven.NET 没有为 MbUnit 运行我的 SetUp 方法

> ID：3984
> 
> 赞同：21
> 
> 时间：2008-08-06T21:06:32.797
> 
> 标签：.net, visual-studio, tdd, mbunit, testdriven.net

我创建了一些 MbUnit 测试装置，它们的 SetUp 方法用 SetUp 属性标记。这些方法使用 MbUnit GUI、控制台运行器和 ReSharper MbUnit 插件在测试之前运行良好。但是，当我使用 TestDriven.NET 运行测试时，它根本不运行 SetUp 方法。

有谁知道这是 TestDriven.NET 的错误还是我的设置有误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-06T23:25:47.280

自 v3.0.4 以来，最新版本的 Gallio 不再是问题。只需确保使用 64 位安装程序即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-06T22:56:14.463

在 Vista 64 上遇到这个问题数周后，我今天发现了 Dave Bouwman 的[帖子，它解决了这个问题。](http://blog.davebouwman.com/2008/08/06/trouble-running-mbunit-tests-with-testdriven-net-on-vista-64/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T09:26:03.660

在使用 nuget 安装 NUnit 后，我​​遇到了同样的问题……以前我一直在使用旧版本的 NUnit，一切正常。

我认为 TestDriven 与最新版本的 NUnit 不兼容。

我已经改用 NCrunch，它是免费的，并在你编码时在后台编译/运行测试，除其他外。强烈推荐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-18T11:10:58.790

我在 NUnit 和 TestDriven.NET 上遇到了类似的问题，我花了几个小时才弄清楚。我在下面安装了 Visual Studio 扩展，它在测试中命中断点，但跳过了 [TestFixtureSetUp] 中的一个。

[![在此处输入图像描述](../Images/ff987d9bc81c780c54d77d1e70e9dba6.png)](https://i.stack.imgur.com/sl5xw.png)

事实证明，我还需要将实际的 TestDriven.NET 软件安装在 C:\Program Files (x86)\TestDriven.NET 4

这可从[https://www.testdriven.net/download.aspx获得](https://www.testdriven.net/download.aspx)

# macos - 如何配置 Vista Ultimate（64 位）帐户，以便它可以访问 OSX 上的 SMB 共享？

> ID：3996
> 
> 赞同：10
> 
> 时间：2008-08-06T21:14:57.507
> 
> 标签：macos, windows-vista, smb

我在 OS X 10.4 计算机上启用了 Windows 文件共享。网络上的所有 Windows 用户都可以通过 \rudy\myshare 访问它，除了一个运行 Vista Ultimate 64 位版本的人。

所有其他用户都在运行 Vista 或 XP，都是 32 位的。所有工作组信息都相同，都使用相同的用户名/密码登录。

Vista 64 的家伙可以在网络上看到 Mac，但他的登录每次都被拒绝。

现在，我想 Vista Ultimate 的配置与商业版和 XP 不同，但我真的不知道去哪里找。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-06T21:50:49.837

尝试将 Vista 框中的“本地策略\安全选项\网络安全：LAN 管理器身份验证级别”的本地安全策略从“仅发送 NTLMv2 响应”更改为“发送 LM 和 NTLM - 如果协商，则使用 NTLMv2 会话安全”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-06T21:51:22.143

不，我已经用我的 Vista 64 位机器成功地做到了这一点。您可能想尝试使用机器的 IP 地址并尝试以这种方式连接。或者可以查看 Mac 上的日志文件以查看拒绝错误是什么。