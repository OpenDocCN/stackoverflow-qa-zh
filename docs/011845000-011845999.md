# StackOverflow 问答 11845000-11845999

# asp.net-mvc - 跨控制器的会话在 MVC 中变为空

> ID：11845000
> 
> 赞同：1
> 
> 时间：2012-08-07T11:29:51.310
> 
> 标签：asp.net-mvc

当我重定向到另一个控制器的操作时，我的会话变为空，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:30:05.663

我意识到在像这样在登录时设置新会话之前我正在清除和销毁所有会话

```
Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetNoStore();
Session.Abandon();
Session.Clear(); 
```

当我删除这些行时，一切都开始像@Clayton 所说的那样工作，所以我删除了这些行并将其替换为`Session.Remove('sessionvariablename')`，我仍然不确定上述行导致了什么问题，但我的代码开始工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T19:53:06.780

您必须创建一个具有会话属性的唯一基本控制器，然后项目中的所有控制器都将从该 BaseController 继承：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace MonitoringCSP.Controllers
{
//[AllowAnonymous]
//[Authorize(Roles = "admin")]
public class BaseController : Controller
{
    private HttpSessionStateBase _session;
    protected HttpSessionStateBase CrossControllerSession
    {
        get
        {
            if (_session == null) _session = Session;
            return _session;
        }
        set {
                _session = Session;
            }
        }
    }
} 
```

使用示例

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.Mvc;
    using System.Web.Routing;
    using System.Web.Security;
    using MonitoringCSP.Models;

    namespace MonitoringCSP.Controllers
    {
[AllowAnonymous]
public class AccountController : BaseController
{
    [HttpPost]
    public ActionResult LogOn(LogOnModel model, string returnUrl)
        {
                /*session*/
                CrossControllerSession["UserName"] = User.Identity.Name;
                /*end session*/
        return RedirectToAction("someAction");
        }
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T11:58:13.617

关于您发布给我的评论，这就是我的想法。在需要会话的控制器中，使用类似于以下内容的内容：

```
//Controller A
public class TheController : Controller
{
   public ActionResult Index(){
     Session["yourSession"] = "Hello World";
     return View();
   }
}

//Controller B
public class MyController : Controller
{
    string textString;

    protected override void OnActionExecuting(ActionExecutingContext ctx)
    {
        base.OnActionExecuting(ctx);
        textString = ctx.HttpContext.Session["yourSession"].ToString();
    }

    public ActionResult Index(){
       string currentText = textString;
       return View();
    }
} 
```

我测试了来自（http://stackoverflow.com/questions/889516/session-null-in-asp-net-mvc-controller-constructors）的建议，并且会话的内容是可用的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-19T16:59:29.037

确保您的控制器上没有设置此属性：

```
[SessionState(SessionStateBehavior.Disabled)] 
```

# c# - 使用 TableAdapters 将小数从 C# 错误地传递到 SQL Server

> ID：11845012
> 
> 赞同：2
> 
> 时间：2012-08-07T11:30:27.943
> 
> 标签：c#, sql-server-2008, tableadapter

昨天我在使用 TableAdapters 时注意到一个奇怪的行为，由于某种原因，当传递一个小于 0.1 的小数时，它会变成一个整数。例如，如果我通过 1.0123，我可以在 SQL Profiler 中看到 1.0123，但如果我通过 0.0123，我将得到 123。是否存在已知问题？您可以执行以下步骤来重现该问题：

1.  新建一个数据库TestDatabase，并创建如下存储过程

    ```
    create proc DecimalParametersSelect
    (
        @Foo decimal(10,5)
    )

    as

    select @Foo 
    ```

2.  创建一个新项目并添加一个新的 DataSet 文件 SampleDataset。添加一个新的 TableAdapter 并将 DecimalParametersSelect 添加为 Select 过程（它应该是您数据库中唯一的一个）。

3.  运行您的项目并尝试选择一些数据，例如

    ```
    using (SampleDatasetTableAdapters.DecimalParametersSelectTableAdapter dta = new SampleDatasetTableAdapters.DecimalParametersSelectTableAdapter())
    {
        var table = dta.GetData(0.01588M);
    } 
    ```

在分析器中，您应该看到传入的值是 1588（有趣的是，返回的值在 C# 中被正确识别为 0.01588）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:24:47.380

`TextData`当该列未包含在跟踪中并且 RPC 命令的文本是从另一个源（大概是 ）重建时，这似乎是 SQL Profiler 中的一个显示错误`BinaryData`。

我按照您的步骤操作，并且能够使用 SQL 探查器中的默认跟踪在 SQL 2008 R2 上进行回购。

但是，当跟踪属性更改为包含 的`TextData`列时`RPC:Completed`，会显示正确的命令。

![在此处输入图像描述](../Images/428959cf6248618d130773f06d1ba9ed.png)

# nhibernate - 获取 NHibernate 中新添加的实体的代理

> ID：11845013
> 
> 赞同：1
> 
> 时间：2012-08-07T11:30:28.830
> 
> 标签：nhibernate, lazy-loading

我正在进行早期研究，以在使用自定义编写的应用程序引擎实现的系统中用 NHibernate 替换 EF。

客户端创建一个实体，比如 Person，从用户那里获取属性值并将其发送到服务器。在服务器中，我们用来`context.CreateObject<Person>()`获取一个 Person 的代理。然后将属性值应用于代理，我们能够使用延迟加载来访问相关对象。例如，如果这个人有一个属性`MajorID`和一个导航属性`Major`，我们设置`MajorID`为`5`，如果一个表达式访问`Major`，正确`Major`的被延迟加载到这个字段中。更新也会发生类似的过程。

在 NHibernate 中，我没有`CreateOject<>()`方法，所以我拥有的对象没有被代理，因此缺少延迟加载。此外，在更新中，如果我更改 MajorID 然后访问 Major，它仍然指向旧的错误的 Major。

我对 NHibernate 很陌生，在这种情况下我可以让它表现得像 EF 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:07:40.883

`CreateObject`在 NHibernate 中你根本不需要。

NH 中代理的实现与 EF 完全不同，它基于实体，而不是属性。

以下是这在 NH 中的工作方式：

```
var person = new Person(); //no proxy needed; person is a new entity
person.Major = session.Load<Major>(majorId); //creates Major proxy, no DB call
//...somewhere else
var majorId = person.Major.Id; //getting the Id does not cause loading, ever
var foo = person.Major.Foo; //this causes lazy-loading if not already loaded. 
```

需要注意的一件有趣的事情是，没有`MajorId`属性，也不需要属性，因为与 EF 不同，您可以为已经持久化的实体创建代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:35:08.517

我认为你可以实现你使用的 wat`session.Get<>`并传递你想要加载的人的 ID。对于 id 部分，当您操纵关联时，通常不应直接使用它。你为什么不试试类似的东西：

```
var p = session.Get<Person>(personId);
p.Major = session.Get<Majors>(mayorId);
session.Update(p); 
```

# javascript - 有没有办法在没有真正的 onclick 事件的情况下使用 onclick？

> ID：11845014
> 
> 赞同：1
> 
> 时间：2012-08-07T11:30:28.503
> 
> 标签：javascript, html

我有这个代码：

```
<a href="" onclick="return false;" class="submitme">Add</a> 
```

有什么方法可以在用户按下此按钮而不更改代码或添加 onclick 事件时发出警报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:43:12.537

您可以使用 JavaScript 简单地覆盖该属性：

```
// Select the targeted element(s), in this case the first <a> element
// Note: You will need to replace this by a code that works
//       for your actual markup!
document.getElementsByTagName("a")[0].onclick = function() {
    alert("hi");
    return false;
}​​​; 
```

演示：http: [//jsfiddle.net/WNZAP/](http://jsfiddle.net/WNZAP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:38:37.267

没有事件就不可能触发动作。但是，如果我的问题正确，您想在不更改 HTML 的情况下触发警报。

最简单的方法是使用像 jQuery 这样的 JavaScript 库。因此，通过下载库并将其放置在您的项目中或通过 Google CDN 加载库：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

然后做这样的事情：

```
<script type="text/javascript">
$(document).ready(function(){
    $(".submitme").click(function(){
        alert("hello world");
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:45:49.163

正如 OP 所说，他们不允许更改 HTML，并且 jquery 对他们不可用。

链接上没有“id”会让生活变得非常困难。所以下面的代码假定链接是页面上的第一个…

将此javascript放入`<head></head>`您页面的部分...

```
<script type="text/javascript">
  window.onload = function() {
    document.getElementsByTagName("a")[0].onclick = function() {
      alert("Hello World");
      return false;
    }
  }
</script> 
```

观看[现场 JSFiddle 演示](http://jsfiddle.net/yd5La/)

# image - 图像未正确对齐

> ID：11845016
> 
> 赞同：0
> 
> 时间：2012-08-07T11:30:30.263
> 
> 标签：image, apache-flex

我在 controlBarContainer 中有一个图像，由于某种原因不想正确对齐。我的代码如下所示：

```
<s:controlBarLayout>
        <s:HorizontalLayout/>
    </s:controlBarLayout>
    <s:controlBarContent>
        <mx:Text color="#EC6500">
            <mx:htmlText>
                <![CDATA[
                <b><font size="18" font-weight="bold">Institut für Angewandte Geowissenschaften</font></b>
                <b><font size="12">Forschungsprojekte: Geo-Ressourcen und Geo-Risiken</font></b>
                ]]>
            </mx:htmlText>
        </mx:Text>
        <mx:Spacer width="100%"/>
        <s:Image height="100" smooth="true" smoothingQuality="high"
                 source="@Embed(source='../images/logo.png')"/>
    </s:controlBarContent> 
```

有什么方法可以让图像在左对齐文本的同时右对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:28:54.153

我认为如果您将容器宽度 (ControlBarContent) 设置为 100%，您将获得所需的对齐方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:50:44.633

实际上，它已经 algn to reight，因为容器不够宽，所以你认为它不起作用。

尝试将父容器修改为 100%：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:31:49.193

我不确定问题是什么，但是在弄乱了代码一段时间后，我注意到图像似乎存在问题。我将图像导入 GIMP 并调整大小，然后将其保存为 png 和 jpg。png 和 jpg 文件似乎都嵌入得很好。如果有人对可能发生的事情有任何理论，请让我知道未来。

# java - 使用 maven 命令运行测试时传递用户名

> ID：11845024
> 
> 赞同：1
> 
> 时间：2012-08-07T11:31:04.477
> 
> 标签：java, maven, selenium, maven-plugin

我们想创建特定于在服务器中触发请求的用户的测试报告。如果我们这样改变 pom

```
<configuration>
    <outputDirectory>${basedir}/target/${user.name}</outputDirectory>
</configuration> 
```

这会产生服务器的用户名，而不是触发测试的个人。我已经看到了一种可能的解决方案，例如`mvn surefire-report:report -DoutputDirectory=newpath`. 但是想知道，我们如何通过命令提示符传递用户名。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:58:39.223

在你的 pom 文件中创建一个属性：

```
<pom>
    ...
    <properties>
        <some.propertyName></some.propertyName>
    </properties>
    ...
    <configuration>
        <outputDirectory>${basedir}/target/${some.propertyName}</outputDirectory>
    </configuration>
</pom> 
```

然后你像这样使用它：

```
mvn surefire-report:report -Dsome.propertyName=DonaldDuck 
```

# html - 在同一行上对齐文本和图像后奇怪的 html 格式

> ID：11845025
> 
> 赞同：0
> 
> 时间：2012-08-07T11:31:08.333
> 
> 标签：html, css, wordpress

我想把我的电子邮件作为图像，所以我把文本和电子邮件地址作为图像。在该行之后是另一行，这是同一行上的文本和链接。

但问题是，出于某种原因，第二行（带有文本和链接）正在使用第一行的参数进行格式化，即使它不在同一个 div 标签上。我完全不明白为什么要对其进行格式化（当我删除第一行并对其进行所有格式化时， www:link 会按应有的方式出现在一行上）。我只能通过使用绕过它：

```
<br /> // or another spacings such as padding-bottom. 
```

但我希望行之间的间距最小。

为了更清楚，这里是一个屏幕截图，它现在的样子： ![我的两条 html 行的当前状态](../Images/5ab5d5c12ca81fffc207b14785920d1b.png)

html代码：

```
<div class="col3">
Email:
<img  class="image-align" src="http://safemail.justlikeed.net/e/931d68fcf4daa5643b0142bf34f3e4cb.png"/>
</div>
<div>
 www: <a href="http://www.test.com/">http://www.test.com</a>
 </div> 
```

CSS样式：

```
 .col3 { 
width:140px; 
height:15px;
padding-bottom:10px;
 }

 .image-align {
float:right; 

  } 
```

我也在使用 wordpress，但我有原始 html 插件并尝试了原始标签，并且还禁用了所有 wordpress 格式，但它是一回事。有谁知道可能出了什么问题？

我想要做的是第二行应该是这样的：

```
www: http://www.test.com 
```

不像这样：

```
wwww:
http://www.test.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:18:02.097

你可以试试这个：

***HTML***

```
<div class="col3">
  <div class="email">Email:</div>
  <img  class="image-align" src="http://safemail.justlikeed.net/e/931d68fcf4daa5643b0142bf34f3e4cb.png"/> </div>
<div class="sitelink">www: </div>
<div class="link"><a href="http://www.test.com/">http://www.test.com</a> </div> 
```

***CSS***

```
.col3 {
    padding-bottom:10px;
}
.email {
    float:left
}
.image-align {
    display:inline-block;
    margin-left:5px
}
.sitelink {
    float:left
}
.link {
    display:inline-block;
    margin-left:5px
} 
```

**[演示](http://jsfiddle.net/nR6CP/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:45:31.370

您的宽度是问题，请尝试设置更大的值。让我们知道它是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:40:04.427

将类分配`.col3`给 div，我认为您可能已经在样式表中为所有 div 指定了宽度，并且您需要覆盖它（使其与上述 div 一样宽）

# iphone - 在 iPhone 应用程序中使用信用卡付款的选项

> ID：11845032
> 
> 赞同：0
> 
> 时间：2012-08-07T11:31:29.703
> 
> 标签：iphone, objective-c, ios

我想知道让用户在我的 iPhone 应用程序中为电子商务商店中的商品付款的选项。这将是一个应用程序，而不是一个移动网站。

理想情况下，我只想使用 Authorize.net 或 SagePay - 这可能吗？我发现一年前的一些帖子说Apple只允许他们的In App购买，这仍然是真的吗？

感谢您的任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:42:10.823

假设您可以访问 Apple 的开发者会员中心，请查看[App Store Review Guidelines](https://developer.apple.com/appstore/resources/approval/guidelines.html)第 11 节。

据我了解，允许（甚至要求）拥有自己的支付系统，只要您不销售应该在应用程序中使用的（数字）项目。

# git - 用git意外删除了很多文件

> ID：11845033
> 
> 赞同：0
> 
> 时间：2012-08-07T11:31:29.793
> 
> 标签：git, delete-file

我不小心删除了我网站的所有样式表文件。

我正在使用 git，但我不会将更改推送到任何 repo。我只是在我的开发副本上提交。所以没有要从中结帐的回购。

所以我所做的是，我有我网站的备份副本（它很旧并且不包含所有文件）所以手动复制粘贴所有样式表文件到我的开发副本。

有什么办法可以恢复所有已经消失的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T11:37:48.900

如果您曾经将文件添加并提交到您的开发 Git 存储库中，您可以通过`git checkout HASH`. 该命令会将所有具有 HASH 时状态的文件加载到工作目录中。您还可以选择特定状态下的特定文件；试试`git checkout HASH -- filename`。如果您不小心删除了包含相关文件的提交，您可以通过`git reflog`“恢复”存储库的状态来查找所有 Git 操作的总历史记录。在任何情况下，在开始之前复制您的存储库！

如果您从未将文件添加到存储库，则可以使用文件系统工具之一来取消删除文件。应用程序的选择取决于您使用的操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:36:27.720

您可以使用`git checkout /path/to/file`，这将恢复上次提交时的文件。

# python - 了解 Kivy 中的小部件

> ID：11845038
> 
> 赞同：2
> 
> 时间：2012-08-07T11:31:53.120
> 
> 标签：python, widget, kivy

我是一名新手程序员，目前正在使用 kivy 作为 GUI 平台学习 python。

我正在阅读 kivy 手册并正在研究小部件。我想在教程画家小部件上尝试一些东西，但经过数小时的尝试，未能如愿。

我想要的应该很简单。我有一个小部件，它在触摸屏幕后创建一条随机线。我认为在某个区域触摸屏幕后自动重复添加线条会很有趣。所以我制作了一个函数，不断向小部件“注入”数据以创建更多行。

但我根本无法与小部件“交流”。我不知道小部件“实例”名称是什么。所以我通过命名它来创建实例painter，好吧，让我们分享一下代码：

```
import kivy
import time
from random import random
from kivy.app import App
from kivy.clock import Clock
from kivy.uix.widget import Widget
from kivy.graphics import Color, Ellipse, Line

class MyPaintWidget(Widget):
    def on_touch_down(self, touch,):
        with self.canvas:
            Color(random(), random(), random())
            touch.ud['Line'] = Line(points=(touch.x, touch.y))
            touch.ud['Line'].points += [random()*1000, random()*1000 ]
        begin()

    def touchme():
        touch.ud['Line'].points += [random()*1000, random()*1000 ]
        print 'touchme'

class MyPaintApp(App):
    def build(self):
        painter = MyPaintWidget()
        return painter

def begin():
    def my_callback(dt):
        print 'begin'
        painter.touchme()
    Clock.schedule_interval(my_callback, 1.)

if __name__ == '__main__':
    MyPaintApp().run() 
```

希望有人可以为我提供如何做到这一点的答案，并可能向我解释一下小部件是如何工作的。我将它视为 python 中的标准类，但我认为它的工作方式与此略有不同。

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T09:22:09.333

不确定我是否理解您要实现的目标，但我想您可以将代码从您的`begin`方法移到`on_touch_down`方法中，以使后者看起来像这样：

```
def on_touch_down(self, touch):
    with self.canvas:
        Color(random(), random(), random())
        touch.ud['Line'] = Line(points=(touch.x, touch.y))
        touch.ud['Line'].points += [random()*1000, random()*1000 ]
    Clock.schedule_interval(self.touchme, 1.) 
```

问题是`touchme`需要该`touch`对象，因此您必须将其作为参数传递。像这样的东西可能有效，但我没有检查：

```
def on_touch_down(self, touch):
    with self.canvas:
        Color(random(), random(), random())
        touch.ud['Line'] = Line(points=(touch.x, touch.y))
        touch.ud['Line'].points += [random()*1000, random()*1000 ]
    Clock.schedule_interval(lambda: self.touchme(touch), 1.)

def touchme(self, touch):
    touch.ud['Line'].points += [random()*1000, random()*1000 ]
    print 'touchme' 
```

一般来说，我建议您尝试对变量范围有更好的感觉。在您的代码中，您尝试访问变量`painter`以及`touch`它们不可见的位置。

我自己只是开始使用kivy，所以也许我可以在几周内给出更完整的答案。;)

# php - foreach 循环的有效数组？

> ID：11845051
> 
> 赞同：0
> 
> 时间：2012-08-07T11:32:42.027
> 
> 标签：php, arrays, codeigniter, foreach

我在 codeigniter 中有一个函数，它从数据库中提取数据，检查它是否应该是销售项目，如果是，则添加销售属性。我有 2 个相同的函数来提取数据，一个用于前 20 个结果并通过 ajax 加载接下来的 20 个结果。

提取前 20 个结果的函数通过销售转换器运行良好，但提取接下来的 20 个结果的函数返回以下错误消息：

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：为 foreach() 提供的参数无效
> 
> 文件名：models/products_model.php
> 
> 行号：15

这是销售转换器功能（错误导致第 15 行）：

```
private function checkSalesProducts($query)
{

    $i=0;
    //print_r($query);
    if (sizeof($query) > 0) {
        echo "<script type=\"text/javascript\">alert('".print_r($query)."');</script>";
        foreach($query as $row)  //LINE 15
        {

            $row->sale = 0;
            ++$i;

        }

    }

    $this->db->select("sale_product, sale_discount");
    $salesItems = $this->db->get("sale_items");

    foreach($salesItems->result() as $salesItem)
    {

        for($i=0; $i<sizeof($query); ++$i)
        {

            if($salesItem->sale_product == $query[$i]->prod_id)
            {

                $query[$i]->prod_price = $query[$i]->prod_price * (1 - $salesItem->sale_discount);
                $query[$i]->sale = true;
                $query[$i]->sale_discount = $salesItem->sale_discount;
                break;

            }               

        }

    }

    return $query;

} 
```

这是提取初始 20 的函数：

```
public function searchProducts($searchText)
{

    $this->db->select("prod_id");
    $this->db->where("MATCH (`prod_title`, `prod_desc`) AGAINST ('{$searchText}' IN BOOLEAN MODE)", "", false);
    $this->db->or_where("prod_id LIKE '%{$searchText}%'");
    $this->db->or_where("prod_sku LIKE '%{$searchText}%'");
    $this->db->or_where("prod_title LIKE '%{$searchText}%'");
    $this->db->or_where("prod_desc LIKE '%{$searchText}%'");

    $query = $this->db->get("product_search", 20);

    if($query->num_rows() == 0) return null;

    foreach($query->result() as $row)
    {

        $this->db->or_where("prod_id", $row->prod_id);

    }

    $query = $this->db->get("products");

    return $this->checkSalesProducts($query->result());
} 
```

这是返回下一个 20 的函数：

```
public function loadMoreSearchProducts($searchText, $id)
{

    $this->db->select("prod_id");
    $this->db->where("(MATCH (`prod_title`, `prod_desc`) AGAINST ('{$searchText}' IN BOOLEAN MODE) OR prod_id LIKE '%{$searchText}%' OR prod_sku LIKE '%{$searchText}%' OR prod_title LIKE '%{$searchText}%' OR prod_desc LIKE '%{$searchText}%') AND `prod_id` < {$id}", "", false);
    $this->db->order_by("prod_id", "desc");

    $query = $this->db->get("product_search", 20);

    if($query->num_rows() == 0) return null;

    foreach($query->result() as $row)
    {

        $this->db->or_where("prod_id", $row->prod_id);

    }

    $query = $this->db->get("products");

    return $this->checkSalesProducts($query->result());

    /*$this->db->select("prod_id, prod_sku, prod_title, prod_desc, prod_price, prod_main_image");
    $this->db->where("(prod_sku LIKE '%{$searchText}%' OR prod_title LIKE '%{$searchText}%' OR prod_desc LIKE '%{$searchText}%') AND `prod_id` < {$id}");
    $this->db->order_by("prod_id", "desc");
    $query = $this->db->get("products", 20);

    return $this->checkSalesProducts($query->result());*/

} 
```

这是导致错误的数组中前 3 个结果的示例：

```
Array
(
[0] => stdClass Object
    (
        [prod_id] => 5
        [prod_sku] => HY-FLY
        [prod_cat] => 68
        [prod_title] => Hy Guardian Fly Rug
        [prod_desc] => <p><font color="#ff0000" size="4">Our best selling Combo neck fly rug,</font><font color="#6e5d3f" size="2"> made from polyester silver close weave mesh giving maximum protection against all flying insects.</font></p>
        [prod_price] => 47.00
        [prod_weight] => 3000
        [prod_main_image] => Hydrophane-Guardian-fly-rug.jpg
        [prod_deliverable] => 1
    )

[1] => stdClass Object
    (
        [prod_id] => 6
        [prod_sku] => CITRONE
        [prod_cat] => 14
        [prod_title] => NAF Off Citronella Tags
        [prod_desc] => BRAND NEW TO THE MARKET FOR SUMMER 2012 - /NAF OFF Citronella Tags.
        [prod_price] => 9.10
        [prod_weight] => 200
        [prod_main_image] => NAF-Citronella-Tags.jpg
        [prod_deliverable] => 1
    )

[2] => stdClass Object
    (
        [prod_id] => 7
        [prod_sku] => FLARE-T
        [prod_cat] => 37
        [prod_title] => Liveryman Flare Trimmer 
        [prod_desc] => <p><font color="#6e5d3f" size="2">Very Quiet, Petit and Light Trimmer.</font></p>
        [prod_price] => 20.00
        [prod_weight] => 750
        [prod_main_image] => Liveryman-Flare-Trimmers.jpg
        [prod_deliverable] => 1
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:38:45.363

试试这个...

```
if(is_array($query))
{
    foreach($query as $row)  //LINE 15
    {
        $row->sale = 0;
        ++$i;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:41:51.537

`$query`不是数组或可迭代对象。结果是`var_dump($query)`什么？

# python - 从前一个日期预测：值数据

> ID：11845055
> 
> 赞同：8
> 
> 时间：2012-08-07T11:32:53.787
> 
> 标签：python, algorithm, statistics, prediction

我有一些类似时期的数据集。是那天人的介绍，时间大约一年。数据不是定期收集的，而是相当随机的：每年有 15-30 个条目，来自 5 个不同的年份。

从每年的数据中绘制的图表大致如下所示： ![图形](../Images/6f2a2650a8d34bafd456e22c50a82d11.png) 使用 matplotlib 制作的图表。我有`datetime.datetime, int`格式的数据。

是否有可能以任何明智的方式预测未来的事情会如何发展？我最初的想法是计算所有先前事件的平均值并预测它会是这样。但是，这并没有考虑到当年的任何数据（如果它一直高于平均水平，那么猜测应该会略高一些）。

数据集和我的统计知识是有限的，所以每一个见解都是有帮助的。

我的目标是首先创建一个原型解决方案，以测试我的数据是否足以满足我正在尝试做的事情，并且在（潜在的）验证之后，我会尝试一种更精致的方法。

编辑：不幸的是，我从来没有机会尝试收到的答案！我仍然很好奇这种数据是否足够，如果有机会我会记住这一点。谢谢你的所有答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T03:23:32.300

就您而言，数据变化很快，您可以立即观察到新数据。可以使用[Holt-winter](http://en.wikipedia.org/wiki/Exponential_smoothing)指数平滑法进行快速预测。

更新方程：

![在此处输入图像描述](../Images/7b78f44bb187334a1d60187f9150c55e.png)

`m_t`是您拥有的数据，例如，每次的人数`t`。`v_t`是一阶导数，即 的趋势`m`。是两个衰减参数`alpha`。顶部`beta`的变量表示预测值。`tilde`在维基百科页面上查看算法的详细信息。

由于您使用`python`，我可以向您展示一些示例代码来帮助您处理数据。顺便说一句，我使用了一些合成数据，如下所示：

```
data_t = range(15)
data_y = [5,6,15,20,21,22,26,42,45,60,55,58,55,50,49] 
```

以上`data_t`是从时间 0 开始的一系列连续数据点；`data_y`是在每次演示中观察到的人数序列。

数据如下所示（我试图使其接近您的数据）。

![在此处输入图像描述](../Images/49e3c4df157e8dfe664d346909d6449e.png)

该算法的代码很简单。

```
def holt_alg(h, y_last, y_pred, T_pred, alpha, beta):
    pred_y_new = alpha * y_last + (1-alpha) * (y_pred + T_pred * h)
    pred_T_new = beta * (pred_y_new - y_pred)/h + (1-beta)*T_pred
    return (pred_y_new, pred_T_new)

def smoothing(t, y, alpha, beta):
    # initialization using the first two observations
    pred_y = y[1]
    pred_T = (y[1] - y[0])/(t[1]-t[0])
    y_hat = [y[0], y[1]]
    # next unit time point
    t.append(t[-1]+1)
    for i in range(2, len(t)):
        h = t[i] - t[i-1]
        pred_y, pred_T = holt_alg(h, y[i-1], pred_y, pred_T, alpha, beta)
        y_hat.append(pred_y)
    return y_hat 
```

好的，现在让我们调用我们的预测器并根据观察结果绘制预测结果：

```
import matplotlib.pyplot as plt
plt.plot(data_t, data_y, 'x-')
plt.hold(True)

pred_y = smoothing(data_t, data_y, alpha=.8, beta=.5)
plt.plot(data_t[:len(pred_y)], pred_y, 'rx-')
plt.show() 
```

红色表示每个时间点的预测结果。我设置`alpha`为 0.8，因此最近的观察确实对下一个预测有很大影响。如果你想给历史数据更多的权重，只需使用参数`alpha`和`beta`。还要注意，红线最右边的数据点`t=15`是最后一个预测，我们还没有观察到。

顺便说一句，[这](https://gist.github.com/126ec1249d0bb9ed3ef2)远非完美的预测。这只是您可以快速开始的事情。这种方法的一个缺点是您必须能够获得观察结果，否则预测会越来越偏离（可能对于所有实时预测都是如此）。希望能帮助到你。

![在此处输入图像描述](../Images/2e2fb2288b0efe3c789486ff8d2482ef.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T11:39:58.950

预测很难。您可能想尝试[**多项式外推**](http://en.wikipedia.org/wiki/Extrapolation)- 但**随着您远离“已知”区域，估计错误将急剧增加**。

另一种可能的解决方案是尝试使用[**机器学习**](http://en.wikipedia.org/wiki/Machine_learning)算法，但这需要您收集大量数据。

从您的数据中提取特征（例如，特征是一天内的条目数）。并训练算法。（例如，给它一个遥远过去的数据一个特征，并将现在作为预测字段）。

我不了解python，但是在java中-有一个名为[weka](http://www.cs.waikato.ac.nz/ml/weka/)的开源库，它实现了用于机器学习的大部分功能和算法。

您可以稍后估计此方法使用[交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)的准确性。

* * *

话虽如此 - 这个问题通常被称为趋势检测，并且是当前研究的热门领域，因此[没有灵丹妙药](http://en.wikipedia.org/wiki/No_Silver_Bullet)。

# javascript - JavaScript - 从数组中删除

> ID：11845056
> 
> 赞同：1
> 
> 时间：2012-08-07T11:33:02.073
> 
> 标签：javascript, jquery

```
var arr = [ 4, "Pete", "test", 8, "John", "", "test" ]; 
```

如何从此数组中删除值**测试**和空字符串？最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T11:34:46.957

```
var arr = [ 4, "Pete", "test", 8, "John", "", "test" ]; 
var l = arr.length;

while( l-- ) {
    if( arr[l] === "test" || arr[l] === "" ) {
        arr.splice(l, 1);
    }
}

//> arr
//[4, "Pete", 8, "John"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T11:45:45.433

替代方案：[过滤器](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference/Objects/Array/filter)

```
var arr = [ 4, "Pete", "test", 8, "John", "", "test" ]
           .filter(function(v){return String(v).length && v !== 'test';});
//=> arr = [4, "Pete", 8, "John"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T11:45:32.587

如果您想删除单个项目，请检查它可能会对您有所帮助

[http://jsfiddle.net/HWKQY/](http://jsfiddle.net/HWKQY/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T11:45:50.870

如果您知道数组中项目的索引，则可以轻松使用 splice

arr.splice（索引，多少）

howmany=要删除的项目数

[http://www.w3schools.com/jsref/jsref_splice.asp](http://www.w3schools.com/jsref/jsref_splice.asp)

# scala - scala 类构造函数和抽象类型

> ID：11845058
> 
> 赞同：11
> 
> 时间：2012-08-07T11:33:05.480
> 
> 标签：scala, generics, constructor, type-parameter, abstract-type

我想使用抽象类型而不是类型参数。

在我的泛型类构造函数中，我想要一个泛型类型的参数，但代码无法编译：

```
class SomeOtherClass(val s: S){
    type S
} 
```

scala 编译器错误是“未找到：类型 S”

如果我使用类型参数而不是抽象类型，那么它可以工作：

```
class SomeClass[T](val t: T){
    //...
} 
```

如果我想在构造函数中使用泛型参数，scala 是否会强制我使用类型参数而不是抽象类型？

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:03:37.137

在这种情况下，您几乎被迫使用泛型类型参数。您可以通过在类之外声明类型来解决它，但是您需要实例化包装器，然后实例化对象，它会很快变得丑陋。

```
trait FooDef {
  type T
  class Foo(val x: T)
}
val ifd = new FooDef { type T = Int }
val ifoo = new ifd.Foo(5)
val sfd = new FooDef { type T = String }
val sfoo = new sfd.Foo("hi")
def intFoos(f: fd.Foo forSome { val fd: FooDef {type T = Int} }) = f.x + 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T17:14:34.760

当未指定抽象类型时，您的类需要是抽象的。所以你根本不需要这个参数。抽象类型的等价物是：

```
abstract class SomeOtherClass {
  type S
  val s: S 
} 
```

然后在使用现场：

```
val x = new SomeOtherClass {
  type S = String
  val s = "abc"
} 
```

没有参数，这里的抽象类就相当于一个trait。最好使用特征，因为它的限制较少（您只能扩展一个基类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:59:45.347

编译器应该如何知道它应该在那里使用什么类型？要么您必须直接指定类型，这没有多大意义，要么使用泛型。有一种方法可以使它工作，但我认为它不会帮助你。

```
class SomeClass(s: SomeClass#S) {
  type S
} 
```

但是由于 SomeClass#S 没有定义，所以没有它的实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T12:02:56.730

也许你想要这样的东西？这样，您可以有多个实例，`AbstractFooFactory`每个生产`Foo`s 具有不同的 s 值。

```
trait AbstractFooFactory {
  type S
  def makeFoo(s:S):Foo
  class Foo(val s:S) {}
}

object StringFooFactory extends AbstractFooFactory {
  override type S = String
  override def makeFoo(s:String) = new Foo(s)
}

val b = StringFooFactory.makeFoo("bar")
val s:String = b.s 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-27T01:14:52.223

这里的其他答案都没有捕获用于这种情况的非常常见模式的两个部分，如下所示。我们使用 a`trait`或 an `abstract class`（`SomeOtherClass`如 Luigi 的回答），然后伴随对象的`apply`方法是轻松创建实例的工厂。它接受`s`val 并且`S`可以推断类型参数，这简化了在我们使用它的任何地方实例化对象。

```
trait SomeOtherClass {
  type S
  val something: S 
}

object SomeOtherClass {
  def apply[S0](s:S0) = new SomeOtherClass {
    type S = S0
    val something = s
  }
}

// usage
SomeOtherClass(12) 
```

# dart - Dart 的 EventSource 错误

> ID：11845066
> 
> 赞同：0
> 
> 时间：2012-08-07T11:33:38.703
> 
> 标签：dart, event-sourcing

我正在尝试将 EventSource 与 Dart 一起使用。

```
var source = new EventSource('/myUrl');
source.on.error.add((Event e) => print('error'));
source.on.message.add((MessageEvent me)  => print(me.data)); 
```

消息很受欢迎，但总是打印“错误”。如何获得有关此错误的更多信息？我尝试使用 ErrorEvent 而不是 Event 但它失败了，因为这个事件不是 ErrorEvent

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:21:34.803

我没有要测试的事件源，但我可以帮助您回答您的问题，“我怎样才能获得有关此错误的更多信息？”

改变：

```
source.on.error.add((Event e) => print('error')); 
```

至：

```
source.on.error.add((e) {
  print('error');
}); 
```

然后，在 print 行上设置一个断点。当您在 Dartium 中调试应用程序时，这将允许您检查局部变量 e。

您还可以使用 dart2js 将应用程序编译为 JavaScript 和 Chrome 的 JavaScript 调试器，以了解有关 e.js 的更多信息。在调试器中搜索生成的 JavaScript 中的“错误”以找出放置断点的位置。

有时有用的另一个技巧是将代码更改为：

```
source.on.error.add((int e) => print('error')); 
```

e 不是 int，所以 DartEditor 会给你一个警告，告诉你 e 到底是什么类型。然后，您可以使用该类型。接下来，按住 Command 键单击该类型以查看它的源代码。

我最好的建议是尝试使用 Chrome 的 JavaScript 调试器并从那里调试问题。这帮助我在过去隔离了这类问题。

# regex - 正则表达式匹配 / 之后的任何内容

> ID：11845068
> 
> 赞同：0
> 
> 时间：2012-08-07T11:33:46.550
> 
> 标签：regex, wordpress, redirect

我基本上不了解正则表达式，但我需要一个正则表达式语句，它可以识别`/`URL 中的任何内容。

基本上，我正在为某人开发一个网站，并且页面的 URL（课程的本地 URL）是`(http://)localhost/sweettemptations/available-sweets`. 此页面充满了自定义帖子类型（这是一个 WordPress 网站），其 URL 为`(http://)localhost/sweettemptations/sweets/sweet-name`.

我想要做的是将 URL 重定向`(http://)localhost/sweettemptations/sweets`回`(http://)localhost/sweettemptations/available-sweets`很容易做到的，但我还需要将任何类型的 sweet 重定向回`(http://)localhost/sweettemptations/available-sweets`. 所以说我需要重定向`(http://)localhost/sweettemptations/sweets/*`回`(http://)localhost/sweettemptations/available-sweets`.

如果有人可以通过告诉我如何编写正确的正则表达式来匹配 URL 中 sweets/ 之后的所有内容来提供帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:43:23.350

使用这个正则表达式`(?<=://).+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:51:12.860

要执行您要求的操作，您需要使用组。在正则表达式组中，您可以隔离整个匹配的部分。

例如：

```
input string of: aaaaaaaabbbbcccc 

regex: a*(b*) 
```

括号标记一个组，在这种情况下它将是组 1，因为它是模式中的第一个。

注意：组 0 是隐式的，是完全匹配的。

所以在我上面的例子中，比赛将是：

```
group 0: aaaaaaaabbbb
group 1: bbbb 
```

为了用上面的糖果模式达到你想要的效果，你只需要在最后放一个组。

```
possible solution: /sweets/(.*) 
```

您对小组之前的模式越精确，您出现误报的可能性就越小。

如果您真正想要的是匹配最后一个 / 之后的任何内容，您可以采取另一种方法：

```
 possible other solution: /([^/]*) 
```

上面的模式将找到一个 / 和一个不是另一个 / 的字符串，并将其保留在第 1 组中。这里的问题是你可以匹配 URL 中没有糖果的东西。

请注意，如果您不介意开头的 / 则只需删除 ( 和 )，您不必担心组。

我喜欢使用[http://regexpal.com/](http://regexpal.com/)来测试我的正则表达式。它会用不同的颜色标记不同的匹配项。

希望这可以帮助。

我可能在我原来的帖子中误解了你的要求。

如果您只想更改与 (http://)localhost/sweetemptations/sweets/* 匹配的任何字符串

进入你提供的另一个（没有在最后添加你的 * 部分匹配）我会使用正则表达式来匹配 URL 中的模式，但他们只是用所需的字符串替换整个字符串：（http:// )localhost/sweetemptations/available-sweets

因此，如果您想要 URL：

```
 http://localhost/sweettemptations/sweets/somethingmore.html 
```

变成：

```
 http://localhost/sweettemptations/available-sweets 
```

而不是：

```
 localhost/sweettemptations/available-sweets/somethingmore.html 
```

然后解决方案更简单，不需要组:)。

这样做时，我会确保您不匹配“本地主机”部分。此外，我假设 (http://) 确实意味着前面的可选 http://，因为 (http://) 不是有效的协议前缀。

所以如果这是你想要的，那么这应该与模式匹配：

```
(http://)?[^/]+/sweettemptations/sweets/.* 
```

此正则表达式将可选地匹配 http:// 部分与主机（可以是 localhost、IP 或主机名）。如果你愿意，你可以在最后省略 .*。

如果该模式匹配，只需将整个 URL 替换为您要重定向到的 URL。

# java - 动态读取 Xml 数据并存储在文本文件中

> ID：11845072
> 
> 赞同：-1
> 
> 时间：2012-08-07T11:34:20.000
> 
> 标签：java, xml, xml-parsing

我需要读取 XMl 数据并将其存储在文本文件中，在上面的代码中，我为所有标签名称硬编码 getTagValue，如果它们是 4 个标签名称，我可以硬编码 getTagValue，但现在我有 200 个标签，我如何将数据读入没有硬编码的文本文件 getTagValue

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:41:05.023

使用 DOM 解析 XML 时，您必须知道 XML 的确切结构，因此没有真正的方法可以避免您正在做的事情。

如果您有一个 XSD（如果没有，您可以编写一个），您可以使用一些 Xml 绑定框架（如[XmlBeans](http://xmlbeans.apache.org/) ）从中生成一个 Java 对象，然后通过一行您可以解析 XML 并开始使用常规 java 对象。

示例代码是：

```
File xmlFile = new File("c:\employees.xml"); 

// Bind the instance to the generated XMLBeans types.
EmployeesDocument empDoc = 
    EmployeesDocument.Factory.parse(xmlFile); 

// Get and print pieces of the XML instance.
Employees emps = empDoc.getEmployees(); 
Employee[] empArray = emps.getEmployeeArray(); 
for (int i = 0; i < empArray.length; i++) 
{ 
    System.out.println(empArray[i]); 
} 
```

# jquery - 萤火虫窗口的错误

> ID：11845078
> 
> 赞同：0
> 
> 时间：2012-08-07T11:34:44.960
> 
> 标签：jquery, firebug

我有一个网站，里面有很多 div，用于页眉、中间、主要和页脚。

我在中间有一个 jquery 幻灯片，在主要部分有 2 个，但是在中间和主要部分之间以及页脚部分下面有一个空白空间。我试图解决页脚下部分的问题。

我的问题是，当我想修复中间和主要之间的部分并打开萤火虫时，它会慢慢减少空白部分 - 就像 jquery 向上或向下滑动一样，我可以看到它已经解决了！！当我再次关闭萤火虫时，问题又回来了！

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:40:25.987

您是否尝试过在“分离”模式下启动 Firebug（这会在单独的窗口中打开）——这不会影响当前页面的布局。

# php - 无法将信息从 PHP 表单发送到多个 mysql 数据库表

> ID：11845090
> 
> 赞同：0
> 
> 时间：2012-08-07T11:35:23.477
> 
> 标签：php, mysql

我正在尝试将数据插入 4 个表（资产、资产详细信息、发票和位置）。当我提交表单时，它告诉我所有数据都已成功提交，但是当我检查 MySQL 数据库时，信息仅提交到位置表。

任何帮助将不胜感激，谢谢。

```
 mysql_query("START TRANSITION");

    $query1 =("INSERT INTO .asset (asset_tag, asset_number, cap_ex, asset_type_id, invoice_id, status) 
        Values(".$_POST['asset_tag'] .",,,".$_POST['asset_type'] . ",".$_POST['invoice_number']."," . $_POST['status_id'] .")");

    $query2 =("INSERT INTO .asset_details (asset_type_id, asset_tag, asset_type, physical_asset_id, manufacturer, os, os_version, make, model, serial_number, processor, ram, memory, hdd, host_name, notes)
        Values(" .",".$_POST['asset_tag']."," .$_POST['asset_type'].",,
        ,".$_POST['os'].",".$_POST['os_version'].",".$_POST['make'].",".$_POST['model'].",".$_POST['serial_number'].",".$_POST['processor'].",,".$_POST['memory'].",".$_POST['hdd'].",,".$_POST['notes'].")");

    $query3 =( "INSERT INTO .invoice (invoice_number, invoice_date, purchas_price, quantity, order_date, vender, warrenty_end, notes)   
        Values(" .$_POST['invoice_number'].",". $_POST['invoice_date'].",". $_POST['purchase_price'].",,,". $_POST['vender'].")");

    $query4 =( "INSERT INTO .location (location_name, rack, row, unit)
        Values(" .$_POST['location_name'].",".$_POST['rack'].",".$_POST['row'].",".$_POST['unit'].")");

    echo "$query1 $query2 $query3 $query4";

    $result1= mysql_query($query1);
    $result2= mysql_query($query2);
    $result3= mysql_query($query3);
    $result4= mysql_query($query4);

    $result = mysql_query("COMMIT");    

if (!$result)
{
    mysql_query("ROLLBACK");
    die('Invalid query: ' . mysql_error());
}
else
{
    echo "<script>alert('SUCCESS!');</script>";
}
}

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:46:59.853

有一些奇怪的事情；

*   `START TRANSITION`应该是`START TRANSACTION`。
*   您没有引用任何字符串值。字符串需要使用`'`a'la引用`INSERT INTO TEST VALUES ('olle');`
*   一个空字段不能通过跳过它来表示，你正在做`INSERT INTO TEST (a,b,c) VALUES (1,,2);`的不是不设置 b 的有效语法。

另外，我建议使用比 mysql 更现代的 api `mysql_query`，例如[PDO 或 mysqli](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)，因为将 POST 值注入字符串可能非常危险，可能会导致 SQL 注入问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:47:56.523

在每个属性（列）周围使用'`'并在每个值周围使用'''，它应该可以工作

在开发过程中，我会在将每个查询表达式发送到数据库之前对其进行回显。

...顺便说一句，mysql_error()是php中一个有用的函数，它返回mysql的最后一个错误信息...。你可以用它来调试

# php - 在变量中获取 YouTube 视频 URL

> ID：11845092
> 
> 赞同：-6
> 
> 时间：2012-08-07T11:35:26.770
> 
> 标签：php, variables, youtube

如何在 PHP 变量中获取 YouTube 视频（.flv）路径..假设从 youtube 视频 url 它将获取视频可下载 url 链接..像这样：
`http://tc.v15.cache3.c.youtube.com/videoplayback?algorithm=throttle-factor&burst=40&cp=U0hTSVNRUV9LTUNOM19LS1VIOlZ1V2M5YUd5RVNM&expire=1344363763&factor=1.25&fexp=906430%2C913529%2C915507%2C907217%2C919804%2C920704%2C912806%2C906055%2C924500%2C925701%2C924700%2C911406%2C913547%2C904721%2C920706%2C907344%2C912706%2C900816%2C902518%2C909414&id=5d4df8214f695e43&ip=184.95.55.18&ipbits=8&itag=5&keepalive=yes&key=yt1&ms=au&mt=1344338530&mv=m&signature=C0012A45BF4240C299C6755507BCC6C24F291153.8F40151E7E3331B9524A54F168FB3BF0C4BFFA63&source=youtube&sparams=algorithm%2Cburst%2Ccp%2Cfactor%2Cid%2Cip%2Cipbits%2Citag%2Csource%2Cupn%2Cexpire&sver=3&upn=OHj8ucDOV7c`
所以我会有这样的。$vurl= this_types_of_video_url;

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:52:09.847

您首先放入问题的 URL 示例中没有 YouTube Video ID 变量。此外，`.flv`下载网站已被Google[停止](http://www.cbsnews.com/8301-501465_162-57456397-501465/google-youtube-blocks-website-that-converts-videos-into-mp3s/)查询。

如果有，您获取 URL 的方法是使用[`preg_match()`](http://php.net/manual/en/function.preg-match.php)帮助您匹配 URL 上的正则表达式模式的函数。

另一种选择是使用[`parse_url()`](http://php.net/manual/en/function.parse-url.php)and[`parse_str()`](http://www.php.net/manual/en/function.parse-str.php)函数。

[此答案](https://stackoverflow.com/a/3393008/1428773)中描述的方法应该使您走上正轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:55:21.487

浏览页面？

1.  找到播放器 JavaScript 块。
2.  转义 JavaScript 块并提取播放器变量。
3.  获取变量的查询字符串。
4.  再次找到流图（url_encoded_fmt_stream_map），一个查询字符串。
5.  遍历地图中的每个项目，用逗号分隔，再用一个查询字符串分隔。
6.  利润！

# string - 日期刻度或字符串刻度作为 d3 中折线图的 xAxis

> ID：11845096
> 
> 赞同：1
> 
> 时间：2012-08-07T11:35:39.467
> 
> 标签：string, d3.js

是否可以使用 d3 图表在折线图中传递 xAxis 的字符串或日期值？=

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:28:43.790

[您可以使用此处](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-ticks)描述的轴日期，尤其是[此处](https://github.com/mbostock/d3/wiki/Time-Scales#wiki-ticks)。另请参阅[`tickFormat`](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickFormat). 使用它，您应该也可以显示任意字符串。

# entity - 重新创建实体单例

> ID：11845097
> 
> 赞同：0
> 
> 时间：2012-08-07T11:35:42.693
> 
> 标签：entity, code-first, dbcontext

我正在使用实体框架的数据库优先方法。我希望在一个数据库中有多家公司，为此我希望能够在创建 DBContext 时通过在表名前面添加前缀（即 Company1$Users、Company2$Users）来覆盖表名。第一次一切正常，直到我换了公司。似乎 DBContext 缓存了实体，并且下次创建上下文时它不会触发 OnModelCreating 。我几乎到处都在寻找解决方案，但似乎找不到任何解决方案。只有我一个人有这个问题吗？真的有可能吗？有人可以帮我吗？

重新创建问题的代码如下：

```
public class User 
{ 
    public int UserId { get; set; } 
    public string FirstName { get; set; } 
    public string LastName { get; set; } 
    public string Username { get; set; } 
}

public class EntityMappingContext : DbContext
{
    public String CompanyId { get; set; }
    public DbSet<User> Users { get; set; }

    public EntityMappingContext(string companyId = null) : base("DB")
    {
        CompanyId = companyId;
    }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>().ToTable(CompanyId + "$Users");
        base.OnModelCreating(modelBuilder);
    }

} 
```

要重新创建问题，您可以运行以下命令：

```
using (var context = new EntityMappingContext("Company1"))
{
    foreach (var user in context.Users)
    {
        Console.WriteLine(user.FirstName + " " + user.LastName);
    }
}
using (var context = new EntityMappingContext("Company2"))
{
    foreach (var user in context.Users)
    {
        Console.WriteLine(user.FirstName + " " + user.LastName);
    }
} 
```

第一个和第二个上下文查询 Company1$Users，尽管我用“Company2”调用第二个上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:58:38.433

如果您浏览[此处](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext.onmodelcreating%28v=vs.103%29.aspx)的文档，它会在 OnModelCreating 方法中说明：

> 通常，此方法仅在创建派生上下文的第一个实例时调用一次。然后缓存该上下文的模型，并用于应用程序域中上下文的所有进一步实例。可以通过在给定的 ModelBuidler 上设置 ModelCaching 属性来禁用此缓存，但这会严重降低性能。通过直接使用 DbModelBuilder 和 DbContext 类来提供对缓存的更多控制。

希望能帮助到你

# android - 以编程方式添加片段时，ContextMenu 不起作用

> ID：11845103
> 
> 赞同：0
> 
> 时间：2012-08-07T11:36:24.383
> 
> 标签：android, android-fragments

我有一个 ListFragment 为其元素提供 ContextMenu。当我将此片段放在 xml 布局中时，一切正常，但是当我通过 FragmentManager 以编程方式添加此 ListFragment 时，这仅在第一次屏幕旋转之前有效。旋转屏幕后，我可以在调试器中看到 Android 恢复了旧的 ListFragment 并创建了一个新的，原因是

```
CustomListFragment fragment = new CustomListFragment();
fragmentTransaction.add(R.id.customFragmentContainer, fragment); 
```

创建一个新的 ListFragment 的地方。当我长按一个项目打开 ContextMenu 时，`onCreateContextMenu`会调用新 ListFragment 的方法，并将结果传递给`onContextItemSelected`旧 ListFragment 的方法。

我认为当我发布一些代码时它会变得更清楚：

这是我的 ListFragment：

```
public class CustomListFragment extends ListFragment {

private LayoutInflater layoutInflater;
private OnSelectedListener<String> selectionListener;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    layoutInflater = inflater;
    return inflater.inflate(R.layout.list_fragment_layout, null);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setListAdapter(new CustomListAdapter());
    registerForContextMenu(getListView());
}

public void setOnSelectedListener(OnSelectedListener<String> listener) {
    selectionListener = listener;
}

private static final String item0 = "item0";
private static final String item1 = "item1";

@Override
public void onCreateContextMenu (ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {
    menu.add(0, 0, 0, item0);
    menu.add(0, 1, 0, item1);
}
@Override
public boolean onContextItemSelected(MenuItem menuItem) {
    String selection;
    if (menuItem.getItemId()==0)
        selection = item0;
    else
        selection = item1;

    if (selectionListener!=null)
        selectionListener.onSelected(selection);
    return true;
}

private class CustomListAdapter extends BaseAdapter  {

    private List<String> elemente = new ArrayList<String>();

    public CustomListAdapter() {
        elemente.add("one");
        elemente.add("two");
        elemente.add("three");
    }

    @Override
    public int getCount() {
        return elemente.size();
    }

    @Override
    public Object getItem(int position) {
        return elemente.get(position);
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView==null)
            convertView = layoutInflater.inflate(R.layout.element, null);
        TextView tv = (TextView)convertView;
        tv.setText(elemente.get(position));
        return tv;
    }
}
} 
```

有了这个 Activity 它工作正常：

```
public class CustomFragmentActivity extends FragmentActivity implements OnSelectedListener<String> {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_layout);

    FragmentManager fragmentManager = getSupportFragmentManager();
    CustomListFragment fragment = (CustomListFragment)fragmentManager.findFragmentById(R.id.customFragment);

    fragment.setOnSelectedListener(this);
}

@Override
public void onSelected(String selection) {
    Toast.makeText(this, selection, Toast.LENGTH_LONG).show();
}
} 
```

但是有了这个 Activity 它只在第一次屏幕旋转之前有效：

```
 public class CustomFragmentContainerActivity extends FragmentActivity implements OnSelectedListener<String> {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_container_layout);

    FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    CustomListFragment fragment = new CustomListFragment();
    fragmentTransaction.add(R.id.customFragmentContainer, fragment);
    fragmentTransaction.commit();

    fragment.setOnSelectedListener(this);
}

@Override
public void onSelected(String selection) {
    Toast.makeText(this, selection, Toast.LENGTH_LONG).show();
}
} 
```

OnSelectedListener 只是一个提供一个公共方法的接口。屏幕旋转后，结果（所选项目）被传递给旧的 ListFragment。但是这个旧的 ListFragment 是由 Android 系统重新创建的，并且 selectionListener 为 null，所以什么也没有发生。界面如下所示：

```
public interface OnSelectedListener<V> {
    public void onSelected(V selection);
} 
```

最后，也许我应该提到我正在使用 v4 支持库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:50:28.460

好的，问题是，支持库中存在内存泄漏，并且旧片段的 onContextItemSelected() 方法被调用。当我返回 true 时，较新的片段不会得到这个方法调用。

# azure - Windows Azure 虚拟机的虚拟 IP 和内部 IP

> ID：11845106
> 
> 赞同：3
> 
> 时间：2012-08-07T11:36:29.110
> 
> 标签：azure, virtual-machine, virtual-ip-address

虚拟机是否可以使用内部 IP 与在不同位置创建的另一个虚拟机通信？

登录到那个特定的虚拟机后如何获得一个天蓝色虚拟机的外部vip？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:36:14.550

考虑到对该问题的第一条评论，以及尚未更新更多细节的事实，这是我的两分钱。

通过内部 IP 地址进行通信的唯一方法是创建 2 组虚拟网络，并将它们都连接到本地虚拟网络。这是我看到托管在不同地理位置的两个虚拟机相互看到的唯一方法。

至于获取虚拟机的外部 VIP，您可以使用 Windows Azure 管理 API ( [GetVirtualMachine](http://msdn.microsoft.com/en-us/library/windowsazure/jj157193) ) 以编程方式获取虚拟机的 VPI。或者只是跟踪 [vmname].cloudapp.net 以查看 IP 地址。

# javascript - JavaScript 和 NPAPI 使用相同的方法名称，但在 Android 浏览器上获得不同的标识符

> ID：11845108
> 
> 赞同：0
> 
> 时间：2012-08-07T11:36:30.920
> 
> 标签：javascript, android, android-ndk, npapi, npruntime

我为 android 浏览器编写了一个插件，并遵循 npruntime 规则让它支持 JavaScript 方法。但是，在我用 JavaScript 调用插件的函数后，我在 NPAPI 的 pluginHasMethod() 函数中得到了不同的标识符号。我确信我的 JavaScript 代码中没有拼写错误。有什么想法可以调试这种情况吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T04:34:16.247

NPN_UTF8fromIdentifier 是一个你必须自己提供的函数，以便在插件初始化时给你的 NPNFuncs 上调用正确的函数。

NPIdentifier 只保证在同一个浏览器实例中是相同的；如果您退出浏览器并启动一个新浏览器，它可能会改变。

所有 NPN_* 函数都不是真正的函数；这些是您可能为它们使用的“典型”名称，但实际上您会得到一个 NPNFuncs 类型的函数指针结构，该结构将为每个 NPN_* 函数提供一个函数指针；如果您希望它们实际工作，您需要创建 NPN_UTF8FromIdentifier 函数等，并让它调用正确的函数指针。

有关详细信息，请参阅[http://npapi.com/tutorial](http://npapi.com/tutorial)和[http://npapi.com/tutorial2](http://npapi.com/tutorial2)

# vaadin - 如何刷新vaadin（ExternalResource）中的嵌入页面？

> ID：11845109
> 
> 赞同：1
> 
> 时间：2012-08-07T11:36:35.473
> 
> 标签：vaadin

我是 vaadin 框架的新手。当我单击 vaadin 组件的按钮时，我正在尝试刷新嵌入页面。

我发现我们可以使用 Refresher 插件，但我很困惑如何使用它。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T14:20:12.307

我还建议您使用复习插件。我也将它用于我的应用程序，并且运行良好。

举个小例子：

```
//Create the Refresher
final Refresher refresher = new Refresher();
//time period in ms when the Refresher shell call the attached listener
refresher.setRefreshInterval(5000); 
//listener that gets called every 5000ms in this example
refresher.addListener(new MyRefresherListener()); 
//add the Refresher component to your layout
myLayout.addComponent(refresher); 
```

侦听器的实现可能如下所示：

```
import com.github.wolfie.refresher.Refresher;
import com.github.wolfie.refresher.Refresher.RefreshListener;

public class MyRefreshListener implements RefreshListener {
    private static final long serialVersionUID = 1L;

    @Override
    public void refresh(final Refresher source) {
        System.out.println("I am getting refreshed");
        // add the refresh page of your application logic here
        // e.g. the same code you use for changing views when a button click is happening
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:25:04.237

我在向布局中添加复习时遇到问题

> > AbstractOrderedLayout 类型中的方法 addComponent(Component) 不适用于参数（Refresher）

这是我使用的示例代码：

```
public class RefresherDemo extends UI  {
    Refresher refresher;
    Label timeLabel;    

    protected void init(VaadinRequest request) {
        final VerticalLayout layout = new VerticalLayout();
        layout.setMargin(true);
        setContent(layout);

        timeLabel = new Label(getTime());

        refresher = new Refresher();
        refresher.setRefreshInterval(500);
        refresher.addListener(new RefreshListener(){
            @Override
            public void refresh(Refresher source) {
                timeLabel.setValue(getTime());
            }
        });
        addExtension(refresher);        

        layout.addComponent(timeLabel);

    }

    public String getTime(){
        DateFormat dateFormat = new SimpleDateFormat("HH:mm:ss");
        Date date = new Date();
        String d = dateFormat.format(date);
        return d;
    }

} 
```

# php - 水平回显表格php

> ID：11845114
> 
> 赞同：-1
> 
> 时间：2012-08-07T11:36:55.913
> 
> 标签：php, mysql, css

我一直在尝试解决这个问题几个小时，但我不确定如何获得正确的结果，希望有人能够帮助我。

我有下面的代码，它会垂直显示结果是一个表格，但我希望单元格水平相邻，我该如何实现？

```
<?php     
echo "<table border='1' cellpadding='1' width='100%' bordercolor='000099'border='solid'>
";
echo '<div style="width:100%;">'; 
while($row = mysql_fetch_array($boxlink))
echo "<tr>";
{

echo "<td>" . $row['page_page_title'] . "</td>";

}
echo "</tr>";
echo "</table>"; 
echo '</div>'; 
?> 
```

非常感谢Brill，为什么小事情会导致这样的问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:38:36.067

将您的 tr 标签移出循环。每次看到一个 tr 标签时，它都会产生另一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:39:08.343

尝试这个：

```
<?php     
echo '<div style="width:100%;">'; 
echo "<table border='1' cellpadding='1' width='100%' bordercolor='000099'border='solid'>
";
echo "<tr>";
while($row = mysql_fetch_array($boxlink))
{
echo "<td>" . $row['page_page_title'] . "</td>";
}
echo "</tr>";
echo "</table>"; 
echo '</div>'; 
?> 
```

# google-chrome - 在后台页面加载远程网页：Chrome 扩展

> ID：11845118
> 
> 赞同：10
> 
> 时间：2012-08-07T11:37:15.787
> 
> 标签：google-chrome, google-chrome-extension

是否可以使用 chrome 扩展将远程网页加载到背景页面中？

```
"background": {
    "page": "local.html"
  } 
```

有效，但是

```
"background": {
    "page": "http://...."
  } 
```

失败并出现以下错误：

```
Could not load background page http://.... 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T12:35:32.327

~~不，那是不可能的。~~从 Chrome 22 开始就有**可能**- 请参阅答案的底部。

您*可以* [将清单文件文件中的资源](http://code.google.com/chrome/extensions/contentSecurityPolicy.html#H2-3)[列入白名单`https:`](http://code.google.com/chrome/extensions/contentSecurityPolicy.html#H2-3)，以便手动构建您的后台脚本。确保您在扩展程序中包含一个备用资源，以防网络出现故障：

```
<!-- ... doctype etc ... (background.html) -->
<script src="https://..../external_bg.js"></script>
<script src="bg.js"></script> 
```

由于[内容安全策略 (CSP)](http://code.google.com/chrome/extensions/contentSecurityPolicy.html)，您无法运行内联 JavaScript，因此您*必须*使用外部 JS 文件。`bg.js`可能看起来像：

```
if (!window.namespace_of_external_bg) {
    // Fallback, by defining fallback methods or injecting a new script:
    document.write('<script src="fallback_bg.js"></script>');
} 
```

如果要动态构建页面，请避免使用`eval`-like 方法，因为 CSP 也禁止使用这些方法。您可以编写模板，并请求外部值来填充您的模板。`localStorage`可用于缓存变量。有关缓存外部资源的示例，请参阅[Chrome 扩展将外部 javascript 添加到当前页面的 html](https://stackoverflow.com/a/10371025/938089)。这个答案引用了**Content scripts**，因此不能使用确切的方法来启用缓存脚本（因为您需要使用它`eval`来加载脚本）。但是，仍然可以使用缓存技术。

* * *

我也尝试使用以下方法，但**不起作用**（包含在此答案中，因此您不必自己尝试）：从 AJAX 响应
创建一个，然后使用创建一个临时 URL 来加载资源。[`Blob`](https://developer.mozilla.org/en/DOM/Blob/)[`webkitURL.createObjectURL`](https://developer.mozilla.org/en-US/docs/DOM/window.URL.createObjectURL)

```
// Modification of https://stackoverflow.com/a/10371025
// Instead of `chrome.tabs.executeScript`, use 
// x.responseText  or  x.response (eg when using x.responseType='arraybuffer')
var blob = new Blob([x.responseText], {type: 'application/javascript'});
var url = (window.URL || window.webkitURL).createObjectURL(blob);
var s = document.createElement('script');
s.src = url;
document.head.appendChild(s); 
```

前面的代码产生以下错误：

> 拒绝加载脚本 'blob:chrome-extension%3A//dmgmplfpicjkeogacmlgiceidmilllf/96356d24-3680-4188-812e-5661d23e81df' 因为它违反了以下内容安全策略指令：“script-src 'self' chrome-extension-resource: ”。

## 在后台页面加载外部资源

从 Chrome 22 开始，技术上可以（使用`unsafe-eval`CSP 策略）在后台页面加载非 https 资源。出于安全考虑，这显然**不推荐**（例如，因为它容易受到[MITM 攻击](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)）。

这是一个加载任意资源并在后台脚本的上下文中运行它的示例。

```
function loadScript(url) {
    var x = new XMLHttpRequest();
    x.onload = function() {
        eval(x.responseText); // <---- !!!
    };
    x.open('GET', url);
    x.send();
}
// Usage:
loadScript('http://badpractic.es/insecure.js'); 
```

*   **`unsafe-eval`**必须指定 CSP 策略。
*   像往常一样，要发出跨域请求，URL 必须在清单中的`permissions`部分列入白名单，或者服务器必须启用[CORS](https://developer.mozilla.org/en/docs/HTTP_access_control)。

因此，清单至少应包含：

```
"content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self'",
"permissions": ["http://badpractic.es/insecure.js"],
"background": {"scripts": ["background.js"] } 
```

# magento - 如何在 magento 中为管理员创建自定义订单确认电子邮件？

> ID：11845119
> 
> 赞同：0
> 
> 时间：2012-08-07T11:37:15.550
> 
> 标签：magento

我想在订单确认时为管理员设置自定义电子邮件。

我试着改变`Mage_Sales_Model_Order->sendNewOrderEmail()`。

即使我写`exit;`了那个函数，也不会改变输出。该方法没有调用我已经清除了历史记录，那么我该如何解决呢？请帮我解决这个问题..

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:50:57.427

订单的电子邮件模板可在`/app/locale/YOUR_LANGUAGES/template/email/sales.`此处获得，您可以自定义很多电子邮件。

# c# - Browser.ReadyState 上的致命执行错误

> ID：11845123
> 
> 赞同：4
> 
> 时间：2012-08-07T11:37:21.590
> 
> 标签：c#, winforms, browser, clr, fatal-error

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:25:21.033

我的解决方案基于[如何等待 WebBrowser 在 VB.NET 中完全加载？](https://stackoverflow.com/questions/3275515/how-to-wait-until-webbrowser-is-completely-loaded-in-vb-net/9205751#9205751)

您要做的就是将`bool _pageReady` 变量添加到`Completed`事件中。

```
void web_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            var urlCurrent = e.Url.ToString();
            var browser = (WebBrowser)sender;

            if (!(urlCurrent.StartsWith("http://") || urlCurrent.StartsWith("https://")))
            {
                // in AJAX     
            }
            if (e.Url.AbsolutePath != browser.Url.AbsolutePath)
            {
                // IFRAME           
            }
            else
            {
                //  DOCUMENT IS LOADED 100%
                Debug.WriteLine("DocumentCompleted " + DateTime.Now.TimeOfDay.ToString());

                _pageReady = true; // Here it goes!!!! :)

                try
                {
                    mshtml.IHTMLDocument2 docs2 = (mshtml.IHTMLDocument2)web.Document.DomDocument;
                    mshtml.IHTMLDocument3 docs3 = (mshtml.IHTMLDocument3)web.Document.DomDocument;
                    mshtml.IHTMLElement2 body2 = (mshtml.IHTMLElement2)docs2.body;
                    mshtml.IHTMLElement2 root2 = (mshtml.IHTMLElement2)docs3.documentElement;

                    // Determine dimensions for the image; we could add minWidth here
                    // to ensure that we get closer to the minimal width (the width
                    // computed might be a few pixels less than what we want).
                    int width = Math.Max(body2.scrollWidth, root2.scrollWidth);
                    int height = Math.Max(root2.scrollHeight, body2.scrollHeight);

                    //get the size of the document's body
                    Rectangle docRectangle = new Rectangle(0, 0, width, height);

                    web.Width = docRectangle.Width;
                    web.Height = docRectangle.Height;

                    //if the imgsize is null, the size of the image will 
                    //be the same as the size of webbrowser object
                    //otherwise  set the image size to imgsize
                    Rectangle imgRectangle;
                    if (imgsize == null) imgRectangle = docRectangle;
                    else imgRectangle = new System.Drawing.Rectangle() { Location = new System.Drawing.Point(0, 0), Size = imgsize.Value };

                    //create a bitmap object 
                    __Bitmap = new Bitmap(imgRectangle.Width, imgRectangle.Height);

                    //Rectangle resolution = Screen.PrimaryScreen.Bounds;
                    //__Bitmap.SetResolution(resolution.Width, resolution.Height); 

                    //get the viewobject of the WebBrowser
                    IViewObject ivo = web.Document.DomDocument as IViewObject;

                    using (Graphics g = Graphics.FromImage(__Bitmap))
                    {
                        //get the handle to the device context and draw
                        IntPtr hdc = g.GetHdc();
                        ivo.Draw(1, -1, IntPtr.Zero, IntPtr.Zero,
                                 IntPtr.Zero, hdc, ref imgRectangle,
                                 ref docRectangle, IntPtr.Zero, 0);
                        g.ReleaseHdc(hdc);
                    }

                    //var randomPart = System.IO.Path.GetRandomFileName();
                    //__Bitmap.Save(@"D:\t" + randomPart + ".png");

                    if (CropRectangle != null)
                    {
                        if (CropRectangle.Width > 0 && CropRectangle.Height > 0)
                        {
                            Bitmap bmpCrop = __Bitmap.Clone(CropRectangle, __Bitmap.PixelFormat);
                            __Bitmap = bmpCrop;
                        }
                    }

                    //__Bitmap.Save(@"D:\cropped" + randomPart + ".png");

                    bitmapPointer = __Bitmap.GetHbitmap();
                }
                catch
                {
                    //System.Diagnostics.Process.GetCurrentProcess().Kill();
                }
            }
        } 
```

也要做类似的事情

```
public void HtmlCapture2()
        {
            try
            {
                if (web == null)
                    web = InitWebBrowser();

                web.Navigate(_navigateURL);

                try
                {
                    while (_pageReady == false) // YEAH!!!!!! IT IS WORKING!!!!
                    {
                        System.Windows.Forms.Application.DoEvents();
                     }
                    //Thread.Sleep(WaitForWebsite); --- It works but....
                    //while (web.ReadyState != WebBrowserReadyState.Complete) --- it gives an ERROR
                    //    System.Windows.Forms.Application.DoEvents();
                }
                catch (Exception)
                {
                }
            }
            catch (Exception)
            {
            }
        } 
```

# algorithm - 来自 1..n 的二进制堆数

> ID：11845126
> 
> 赞同：6
> 
> 时间：2012-08-07T11:37:30.903
> 
> 标签：algorithm, combinatorics

给定从 1 到 n 的整数，确定可以用这些数字构造多少个有效的二进制堆。

```
Example: 1 2 3 4 
```

有效的最小堆是：`{1 2 3 4}`, `{1 3 2 4}`, `{1 2 4 3}`,

因此答案是 3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T12:00:27.357

暗示：

二叉堆具有预定义数量的节点，以及定义良好的结构（完整树）
递归地思考这个问题。

“选择”哪些非根数到左子树，哪些到右子树 - 并在子树上递归调用。

```
f(1) = 1 //no sons
f(2) = f(1) * 1 //one son and a root
//chose which element will go to the left sub-tree, and recursively invoke.
f(3) = Chose(2,1)* f(1) * f(1) * 1 
f(4) = Chose(3,2)*f(2) * f(1) * 1 //chose which 2 elements will go to the left sub tree
... 
```

这个问题被标记为家庭作业，所以我将由你来寻找一般情况的确切数字。

# jquery - 将克隆的输入附加到变量

> ID：11845128
> 
> 赞同：4
> 
> 时间：2012-08-07T11:37:36.427
> 
> 标签：jquery

我有一个 jquery 变量：

```
var $items = "<input type='text' />"; 
```

我有一个克隆的元素：

```
var cloneA = $("#element").clone(); 
```

我找不到将 cloneA 附加到 $items 的方法。

有什么解决办法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:39:56.050

问题是您没有将`$items`其用作 jQuery 对象。您需要它是一个 jQuery 对象才能在`.append()`其上使用该函数。

将 HTML 字符串包装在 jQuery 变量中，`$`将创建一个包含该 HTML 的对象。

尝试这个 -

```
var $items = $("<input type='text' />");
var cloneA = $("#element").clone();
$items.append(cloneA); 
```

* * *

我认为这只是伪代码，因为您不希望经常将元素附加到*元素*`<input>`中。而是将`<input>`字段添加到现有元素中......

稍微更合乎逻辑的东西看起来像这样 -

```
var $items = $("<div id="input_holder"></div>");

// #element in this example is an actual <input> 
var cloneA = $("#element").clone(); element.

$items.append(cloneA); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:40:31.227

`$items` 不是 jQuery 选择器，它只是一个字符串。要使其成为有效的 jQuery 对象，您可以`append()`将代码更新为：

```
var $items = $("<input type='text' />"); 
```

然后你应该能够附加克隆：

```
var cloneA = $("#element").clone();

$items.append(cloneA); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T11:51:02.047

我相信您想将克隆的元素添加到选择中？

```
var $items = $('<input type="text"/>');
var cloneA = $('#element').clone();
$items = $items.add(cloneA); //items now has the input and #element 
```

# java - 如何在调用 @Before setup() 后反射性地访问要运行的测试方法？

> ID：11845134
> 
> 赞同：0
> 
> 时间：2012-08-07T11:37:54.677
> 
> 标签：java, junit

我们有很多通过 junit 运行的 selenium 测试，它们都有一些需要在实际测试之前运行的步骤。为此，我们有一个父 TestCase 类，其中包含一些 @Before 和 @After 方法。

现在，由于我们网站的一项新功能，我想参数化此设置的一部分，我想创建一个新注释以进行一些测试，以向 setup() 方法表明设置略有不同，同时允许其他人使用默认值。那么，是否可以反射性地访问即将在 @Before 方法中运行的测试方法？

例如。

```
class SomeTest extends MyTestCase {

  @Test
  @Flavour(Red.class)
  public void testRedFlavouredHomepage() {
    testHomepage();
  }

  @Test
  public void testBlueFlavouredHomepage() {  // assuming Blue is my default flavour
    testHomepage();
  } 

  public void testHomepage() {
    // test some stuff
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:33:57.007

我宁愿建议对这两种方法使用不同的测试类。

```
class MyTestCase {

    @Before
    public void setUp() {
        /* Default setup */
    }

    public void testHomepage() {
        // test some stuff
    }

}

class MyRedTestCase extends MyTestCase {

    @Before
    public void setUp() {
        super.setUp();
        /* Red setup */
    }

} 
```

然后您可以将您的测试放入分别从 MyTestCase 和 MyRedTestCase 扩展的 2 个不同的类中。

```
class BlueTest extends MyTestCase {

    @Test
    public void testBlueFlavouredHomepage() {  // assuming Blue is my default flavour
        testHomepage();
    } 

}

class RedTest extends MyRedTestCase {

    @Test
    public void testRedFlavouredHomepage() {
        testHomepage();
    }

} 
```

你也可以用另一种方式来做，而不需要引入新的类。在父类中声明一个抽象（或具有默认值的具体）方法。

```
class MyTestCase {

    protected abstract Flour getFlour();

} 
```

你的孩子班看起来像这样

```
class SomeTest extends MyTestCase {

    private Flour flour;

    @Test
    public void testRedFlavouredHomepage() {
        flour = Flour.RED;
        testHomepage();
    }

    @Test
    public void testBlueFlavouredHomepage() {  // assuming Blue is my default flavour
        flour = Flour.BLUE;
        testHomepage();
    } 

    public void testHomepage() {
        // test some stuff
    }

    protected abstract Flour getFlour() {
        return flour;
    }

} 
```

我会说第一个解决方案是“更清洁”；即使您必须创建额外的类，您也不会在一个类中包含不同类型的逻辑（例如在反模式[God object](http://en.wikipedia.org/wiki/God_object)中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:03:55.490

您可以使用[@Rule](http://kentbeck.github.com/junit/javadoc/latest/org/junit/Rule.html)来执行此操作（使用更高版本的 JUnit >= 4.9）。如果你有一个实现[TestRule](http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/TestRule.html)的类，特别是 apply()，你可以在测试运行之前做一些额外的事情。描述被传递给 apply 方法，其中包含方法上的注释[：](http://kentbeck.github.com/junit/javadoc/latest/org/junit/runner/Description.html)

使用`@Deprecated`为例：

```
public class ExtraSetupTest {
  @Rule
  public TestRule moreSetup = new TestRule() {
    public Statement apply(Statement base, Description description) {
      return statement(base, description);
    }

    private Statement statement(final Statement base,
        final Description description) {
      return new Statement() {
        @Override
        public void evaluate() throws Throwable {
          if (description.getAnnotation(Deprecated.class) != null) {
            System.out.println("more setup here");
          }
          base.evaluate();
        }
      };
    }
  };

  @Test
  public void noExtraSetup() {
    System.out.println("noExtraSetup");
  }

  @Test
  @Deprecated
  public void withExtraSetup() {
    System.out.println("withExtraSetup");
  }
} 
```

这产生作为输出：

```
noExtraSetup
more setup here
withExtraSetup 
```

# wso2 - 在 WSO2ESB 类调解器中进行策略交集

> ID：11845135
> 
> 赞同：0
> 
> 时间：2012-08-07T11:37:58.297
> 
> 标签：wso2, intersection, policy, wso2esb

我创建了一个类调解器，我想在其中与两个策略相交。我已经使用 Carbon Studio for Eclipse 创建了 Class Mediator，它会自动将一些预定义的库添加到我的项目的构建路径中。

其中一个库是 neethi-2.0.4.wso2v1.jar。

如果我想使用 intersect-method 我得到一个异常。如果我查看源代码，我会发现 intersect-method 只会抛出“UnsupportedOperationException”。

所以给定的 neethi 库对于交集没有用，因此我想在我的类调解器中使用最新的 Neethi 库（又名 neethi-3.0.2.lib）作为交集。

你能告诉我如何包含第三方库，尤其是在我的用例中，这些库应该覆盖曾经在 esb 中使用过的库（neethi-2.0.4.wso2v1.jar）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:59:51.023

Developer Studio 将这些库添加到您的项目类路径中，以便开发人员不会在源代码中遇到构建错误。

因此，这些库仅适用于开发时间，并且仅适用于 Dev Studio。它们不是服务器运行时使用的库。

运行时库由 WSO2 Carbon Server 运行时提供。所以服务器抛出这个 UnsupportedOperationException 是由于服务器中的 neethi 版本不支持它而发生的。所以你需要在服务器运行时升级库。

但正如您所看到的，WSO2 已经分叉了 neethi 代码库，并且在分叉的源代码上有一些自定义实现。因此，IMO，仅升级版本无济于事。

无论如何，您需要实际升级库，看看您是否遇到任何问题。

要升级版本，您可以为较新的 Neethi 库创建 Java 库工件并将其包含在 CAR 文件中并部署 CAR 文件，或者`<CARBON_HOME>/repository/components/lib`在服务器运行时将新的 Neethi 库复制到相应位置。

`<CARBON_HOME>/repository/components/plugins`您可以在该位置找到当前的 Neethi 库。如果您发现一些类似于“链接错误”的错误或异常，请尝试删除旧版本的库。但这会导致其他一些异常。

所以 IMO 的底线是，您将面临版本升级的一些问题。但是是的，当然你可以试一试，看看我们是否能克服它们。试一试，并在此处发布您的观察结果。我们将尽力为您提供帮助。

# visual-studio-2010 - 在项目/解决方案中查找不再存在的文件

> ID：11845155
> 
> 赞同：1
> 
> 时间：2012-08-07T11:39:26.473
> 
> 标签：visual-studio-2010, visual-studio

Visual Studio 2010 有一个错误（或令人讨厌的行为），如果它包含对不再存在的（源）文件的引用（以及随后的所有依赖项目），它总是为项目启动新构建。现在我有一个相当大的项目，我知道找到此类文件的唯一方法是手动打开每个文件。

有没有更简单的方法来识别项目文件中的此类无效引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T10:02:18.637

我编写了一个 python 脚本来识别丢失的文件并将它们打印到控制台。

```
import os
import re
import sys

def show_help():
    print()
    print("Syntax:", sys.argv[0], "[filename]")
    print()

def check_missing_project_includes(filename):
    f = open(filename, 'r')
    p = re.compile('(ClCompile|ClInclude) Include="(.*?)" />', re.IGNORECASE)

    missing_files = []
    for line in f:
        m = re.search(p, line)
        if m:
            filename = m.group(2)
            if not os.path.exists(filename):
                missing_files.append(filename)

    return missing_files

if len(sys.argv) != 2:
    show_help()
    exit()

filename = sys.argv[1]
missing_files = check_missing_project_includes(filename)

if len(missing_files) > 0:
    print("Missing files:")
    for mf in missing_files:
        print("\t", mf) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T10:44:31.980

我用来诊断丢失文件的一种技术是安装一个 SCC 提供程序插件（例如，如果您使用的是 Subversion，则为 AnkhSVN），然后在解决方案资源管理器中丢失的文件将有一个不同的图标。这对于较大的项目没有那么有用，但对于较小的项目，它一目了然。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T11:43:46.357

您是否尝试过在 Notepad++ 等编辑器中打开 proj 文件并从中找到并删除引用？（如果我正确理解了这个问题）

# java - 如何创建序列号密钥以保护应用程序

> ID：11845157
> 
> 赞同：4
> 
> 时间：2012-08-07T11:39:33.973
> 
> 标签：java, licensing, sha, serial-number

我有一个创建序列号的应用程序，如下所示：

```
Take customername
Sign customername using privatekey and sha/dsa algorithm 
```

然后可以通过使用公钥解码来检查许可证，并检查客户名称匹配

除了生成的序列相当长之外，这可以正常工作。因此，客户输入序列号实际上并不实用，而是必须在文件中提供序列号，这与雾应用程序的工作方式有很大不同，而且令人困惑。

许多其他应用程序只是在用户购买时为他们提供一个 Guid

即5bd1060b-8608-4817-93ca-207f7c828e2f

用户必须输入他们的电子邮件地址和 guid 才能许可他们的应用程序。

对于用户来说，这看起来像是一个更简洁的解决方案，但我不明白这样的应用程序如何从无效的 guid 中验证有效的 guid，除非它通过检查数据库上的电子邮件地址/guid 对在线完成。但我真的希望在不需要在线检查的情况下进行某种验证：

a>如果互联网连接/我的服务器关闭，应用程序将无法运行，或者 b>他们可以通过禁用互联网访问来规避检查

**编辑：**

**我的理解解决方案由以下答案提出：**

用户进行购买
Take emailaddress + salt
用 SHA1 加密给出 160 位哈希
转换为十六进制表示法给出 20 个十六进制值，即
最后 8 个字符的 40 个字符 Lop 给出一个 Guid
电子邮件用户 Gui 和他们输入程序的电子邮件地址 程序通过以下方式验证此配对获取电子邮件地址、添加盐、加密 ectera 并检查会生成有效的 guid。

我的主要问题是我需要将盐存储在程序中的某个地方，因此如果黑客找到了盐并弄清楚我在做什么，他们可以为任何电子邮件地址创建一个有效的许可证密钥生成器。

**我目前对另一个程序的方法：**

我已经生成了一个公钥/私钥对
用户进行购买
我通过签署
电子邮件地址生成许可证 BaseEncode 生成的许可证 将许可证
发送给用户
程序通过使用公钥和解密来验证许可证

我的问题是，当我签署电子邮件地址时太长，所以我最终将它放在一个文件中，而不是用户将它输入到一个字段中，但问题可能是我是 base64 编码而不是转换为十六进制。

签名的输出可以多长时间，它取决于输入的长度还是总是相同的？

因为我用公钥解密了密钥，所以我无法删除许可证密钥的一些字符，但如果生成密钥只有 40 个字符，我想那没关系

我认为这种方法的优点是，即使黑客知道我是如何做事的，他们也无法创建许可证生成器，因为他们没有，也无法获取私钥，因为它只存储在我的服务器上。他们只能在创建新的私钥/公钥配对时生成许可证，然后如果我的应用程序本身具有编码的公钥，则应用程序无论如何都可以拒绝许可证。

当然，他们可以破解应用程序，但如果应用程序定期更新，这将变得很费力。

**总而言之：** 我是否正确理解了这一点，哪种方法最好，以及为第二种方法生成了多少数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:01:19.690

我认为签名方法是目前的最佳实践。顺便提一句。有许多免费库涵盖了这个主题。

许可证密钥的长度至少由签名密钥长度决定——一个 1024 位的密钥产生一个 128 字节的许可证（如果没有添加其他有效负载）。

许可证文件通常包含有关许可使用本身的更多信息，例如有效期、许可子模块、吞吐量...... - 签名本身嵌入在此结构中。这样您可以获得灵活性，我强烈建议您使用此解决方案，即使许可证变得更大。

要在应用程序中导入许可证，您可以采用混合方式（就像我们所做的那样）。一方面，您可以提供经典的“导入许可证文件”解决方案。另一方面，我们生成一个随机的短 ID（如您的 GUID）并将其与许可证数据相关联。注册后，用户输入短 ID，应用程序通过 HTTP 查找完整的许可证。您必须只在线一次，您仍然可以提供复杂的许可证并且用户只需要一个简短的 ID。

编辑

1.  s签名的长度就是密钥的长度。例如 1024 位（或 128 字节）
2.  如果您的应用程序知道哪些数据被签名（例如邮件），您可以单独使用此签名
3.  您可以签署包含更多属性的“许可文件”，而不仅仅是邮件。在这种情况下，许可证包含属性和签名（因此，比仅签名更长）
4.  您不需要在线连接进行许可证检查。只需使用应用程序导入许可证并随时检查。
5.  除了许可证文件导入之外，您还可以使用短 ID 作为密钥在线下载许可证文件。许可证已下载并脱机。所以你有两全其美。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T17:07:50.397

您可能只是散列与“秘密”盐连接的用户信息，然后截断散列。

黑客——只要他们对你的程序感兴趣——就会通过对源代码进行逆向工程来破解它：他们会找到哈希算法和秘密盐。

但这也会发生在您的 sign&verify 解决方案中：他们可以绕过检查使其返回 true。

因此，sign&verify 解决方案更复杂，但并不安全。

# php - 如何在php中回显脚本

> ID：11845159
> 
> 赞同：5
> 
> 时间：2012-08-07T11:39:35.413
> 
> 标签：php

我在 wordpress 中使用简码执行插件。

这只是让我可以编写这样的短代码 [email_spamproof]

但我试图回应一个脚本。请看下面...

```
<?php

echo '<script type="text/javascript">
    <!-- 
    // spam protected email
    emailE=("enquiries@" + "example.co.uk")
    document.write('<a title="E-mail Example" href="mailto:' + emailE + '">' + emailE + '</a>')
     //-->
    </script>
    <noscript>
        <span class="spam-protected">Email address protected by JavaScript. Please enable JavaScript.</span>
    </noscript>';

?> 
```

现在你可能已经看到我的问题了。

通常当我回显内容时，它会像这样......`echo 'hello';`

然后你使用相同的撇号打破字符串 - 像这样......
`echo 'hello ' . php_name() . ' and friends'`

**我的问题**

该脚本也使用类似的方法，将脚本变量添加到字符串中，但这些脚本撇号会混淆为 PHP 撇号，并破坏回显的字符串。

我怎样才能避免这种情况？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-25T17:57:02.890

正确的代码：

```
<?php

echo "<script type='text/javascript'>
    <!-- 
    // spam protected email
    emailE=('enquiries@' + 'example.co.uk')
    document.write('<a title='E-mail Example' href='mailto:' + emailE + ''>' + emailE + '</a>')
     //-->
    </script>
    <noscript>
        <span class='spam-protected'>Email address protected by JavaScript. Please enable JavaScript.</span>
    </noscript>";

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-19T13:34:30.683

这很容易。将您的 javascript 代码保存在一个新的文件中，然后使用它来加载它：

```
include('myjavascript.php'); 
```

然后您将使用该`include`选项作为 a `echo`，因为网络会将您的代码理解为 HTML，并且您可以在需要时执行它`php`（如`echo`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T11:43:08.263

该`\`字符是转义字符。为用于分隔字符串的字符的每个内部使用添加一个。

或者，使用[HEREDOC](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T11:43:39.180

您可以在您的 javasript 代码中编写 "，然后在您的 php echo 中仅使用单引号 (')。

更**合适**的方法是在您的 javascript 代码中使用转义字符“ **\'** ”（不带双引号）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T11:44:39.587

您需要转义它们，然后连接变量：

（另外我不知道你是否意识到，但你正在呼应 javascript 的注释掉部分）

```
echo '<script type="text/javascript">    
  <!--      // spam protected email     
  emailE=("enquiries@" + "example.co.uk")     
  document.write(\'<a title="E-mail Example" href="mailto:'.emailE.'">'.emailE.'</a>\')      
  //-->     
  </script>     
  <noscript>         
  <span class="spam-protected">Email address protected by JavaScript. Please enable JavaScript.</span>     
  </noscript>'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T11:45:20.443

您可以使用反斜杠转义它们：`echo 'It\'s cold';`或使用`heredoc`：

```
echo <<<END
lots of text here
END; 
```

# c# - 在 ASP.NET C# Web 应用程序中使用 TraceSource.TraceEvent 时出错

> ID：11845163
> 
> 赞同：0
> 
> 时间：2012-08-07T11:39:49.903
> 
> 标签：c#, asp.net, trace

我在堆栈溢出上找到了我想要解决的相同问题，但没有答案。

[如何在 ASP.NET C# Web 应用程序中使用 TraceSource.TraceEvent](https://stackoverflow.com/questions/11239541/how-to-use-tracesource-traceevent-in-a-asp-net-c-sharp-web-application)

我在做什么可能的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:10:35.977

你可以试试msdn上的这篇文章

[http://msdn.microsoft.com/en-us/library/ms228984(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms228984(v=vs.90).aspx)

# c++ - 引用 C 函数的参数

> ID：11845169
> 
> 赞同：0
> 
> 时间：2012-08-07T11:40:05.517
> 
> 标签：c++, c, pointers, reference, parameters

我想在 C 中通过引用传递一个值。这两个函数是否相同？有什么区别？在 C++ 中是一样的吗？

```
void foo1(int * val1, int * val2)

void foo2(int &val1, int &val2) 
```

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T11:42:31.180

引用仅是 C++（不是 C）。

方法的实现会有所不同，因为在 C++ 中取消引用引用不同于取消引用指针。

例如

```
ref.method(); 
```

对比

```
ptr->method(); 
```

在这两种情况下，您都在调用传递给方法的原始对象，而不是副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:41:41.910

第二个不是C，只有C++。通过引用传递在 C 中是通过传递值的地址来模拟的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T11:44:20.583

在 C 中你不能做 foo2，因为没有像 C++ 中那样的引用运算符。在 C++ 中，它们也不相同。引用不能为 NULL，并且它们是常量。初始化后它们不能指向另一个位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T11:49:37.773

`void foo1(int * val1, int * val2)`相当于 `void foo2(int &val1, int &val2)`C 中的。在这两种情况下，函数都需要地址。

第二个用于 C++。这可用于传递任何变量的引用。

例如，如果您有一个变量，例如`int num1 = 10, num2 = 20;`.

然后`foo2(&num1 , &num2 )`在 C++ 中需要 foo2 但这在 C 中不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T13:50:46.267

在 C 中，没有通过引用传递。相反，您可以将地址传递给指针，这实际上允许更改传递的变量的值。

第二个函数是用 C++ 编写的。

这两个函数具有不同的签名，尽管它们允许一个执行相同的任务。

# microsoft-dynamics - CRM 2011 - JScript 不在一个组织中工作，但在另一个组织中工作

> ID：11845174
> 
> 赞同：0
> 
> 时间：2012-08-07T11:40:32.947
> 
> 标签：microsoft-dynamics

我已经从我的开发区域部署了一个解决方案到另外两个独立的服务器/组织。在这个解决方案中，我在实体表单上使用一些脚本，一旦它们加载。在我的开发区域和其他开发区域中，一切似乎都运行良好，但在另一个开发区域中，一旦我打开“加载资源错误：语法错误”的表单，我就会收到错误消息。错误消息与我从加载脚本中的另一个脚本调用的函数有关。

所以我不确定这是否是我的编码错误，因为它在两个 CRM 系统中确实有效。但是是否有任何可能影响它的设置或配置？或者一个简单的方法来检查问题是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:50:47.000

我想我可能已经找到了答案，在这种情况下，由于某种原因，代码似乎没有正确获取 CRM 系统的服务器和组织名称。所以我要检查一下代码，看看为什么会这样

# asp.net-mvc - 如何在大型 asp.net mvc 项目中管理路由

> ID：11845175
> 
> 赞同：4
> 
> 时间：2012-08-07T11:40:37.890
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

在大型（100 多个控制器和不断增长的）MVC 项目中管理 url 路由有哪些策略？区域很有帮助，但它们的用处似乎有限，因为它们不能嵌套。随着项目的发展，我注意到了一些大痛点：

1.  SEO 友好的路线（每条 seo 路线都需要特殊定义）
2.  旧路由的重定向（需要 301 个旧 url 到更新的等价物）
3.  测试路线（有什么比手动测试更好、比硒更轻的东西吗？）

另外，随着路由数量的增加，性能不会下降吗？定义路由的方式表明性能至少为`O(n*k)`，其中`n`是已定义路由的数量，`k`是 url 的长度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:55:04.743

需要考虑的几个问题可能会使您更容易做到这一点：

*   控制器之间是否有共享功能？
*   有没有办法为您的控制器创建通用模式并使用控制器引发的一些事件来提供通用功能（即以一致的模式从数据库中提取数据）？
*   每个控制器之间有什么根本不同？

这些问题的原因是我看到了几个潜在的解决方案：

*   假设您在 IIS 7 或更高版本上运行，那么您可以将您的功能分解为每个区域的多个 MVC 项目。使用 IIS 7 及更高版本（对于部署而言），这变得更加容易。
*   假设呈现数据的模式一致，通用控制器或路由可以使这更容易，允许您折叠控制器。
*   基本控制器将允许共享功能，同时为每个单独的控制器提供所需的专业化。

总而言之，我建议尝试根据目的将您的代码库分解为多个 MVC 项目，以帮助建立随着项目的不断发展而逐渐消失的理智感。

# scala - 如何使 sbt 任务使用特定的配置范围？

> ID：11845176
> 
> 赞同：12
> 
> 时间：2012-08-07T11:40:42.103
> 
> 标签：scala, build, scope, sbt

我有一个`lazy val task = TaskKey[Unit]`以 a`lazy val setting = SettingKey[String]`作为输入的任务。我还有三个不同的独立配置范围（`config("dev")`, `config("stage")`, `config("prod")`）和一个为每个配置范围`build.sbt`指定不同值的文件（ ... ）。`setting``setting in stage := "foo"`

我希望`task`使用配置范围前缀进行调用将使任务使用来自相应配置范围的值（例如 `>dev:task`，将使任务使用`setting`来自的值`dev`，使用命令`>stage:task`将使任务使用`setting`来自`stage`...的值）。但是，这似乎不起作用。

如何强制`task`使用特定配置范围的设置？

构建.sbt：

```
setting := "default setting"

setting in stage := "stage setting"

setting in prod  := "prod setting" 
```

构建.scala：

```
import sbt._
import Keys._

object TaskBuild extends Build {
  val setting = SettingKey[String]("setting", "a simple string setting")

  val task = TaskKey[Unit]("task", "a simple task experiment")

  val taskTask = task <<= setting map { s: String =>
    println("Setting is: " + s)
  }

  lazy val dev = config("dev") describedAs("dev environment settings")
  lazy val stage = config("stage") describedAs("stage environment settings")
  lazy val prod = config("prod") describedAs("prod environment settings")

  lazy val root = Project(
    "project",
     file("."),
     settings = Defaults.defaultSettings ++ Seq(taskTask)
  )
  .configs(dev, stage, prod)
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-05T08:18:39.707

如[我如何使 SBT 密钥查看当前配置的设置中所讨论的？](https://stackoverflow.com/questions/17437443/how-can-i-make-an-sbt-key-see-settings-for-the-current-configuration/17479710#17479710)，你大概可以使用`inConfig`如下。

改变这个：

```
settings = Defaults.defaultSettings ++ Seq(taskTask) 
```

对此：

```
settings = Defaults.defaultSettings ++
  Seq(taskTask) ++
  inConfig(dev)(Seq(taskTask)) ++
  inConfig(stage)(Seq(taskTask)) ++
  inConfig(prod)(Seq(taskTask)) 
```

瞧：

```
$ sbt
> task
Setting is: default setting
> dev:task
Setting is: default setting
> stage:task
Setting is: stage setting
> prod:task
Setting is: prod setting 
```

如果您有兴趣深入挖掘，`inConfig`在`sbt.Project`( [http://harrah.github.io/xsbt/latest/api/index.html#sbt.Project$](http://harrah.github.io/xsbt/latest/api/index.html#sbt.Project$ "sbt.Project scaladoc") ) 中定义为“复制任务/设置的子图”的函数进入不同的范围”（正如@MarkHarrah 所描述的那样）。此外，请查看[http://eed3si9n.com/sbt-010-guide](http://eed3si9n.com/sbt-010-guide)并向下滚动到“更改范围”，作者解释了如何`inConfig(conf)(ss)`“仅在尚未确定范围时将设置范围限定为 conf一个配置”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:38:24.213

我认为你需要写一些类似的东西

```
val devTaskSetting = task <<= setting in dev map { s: String =>
   println("Setting in Dev is: " + s)
} 
```

您还可以定义单独的任务键，像这样

```
val devTask   = TaskKey[Unit]("task", "a simple task experiment") in dev
val stageTask = TaskKey[Unit]("task", "a simple task experiment") in stage 
```

# android - 动作条夏洛克 + 地图视图。操作栏未显示。

> ID：11845180
> 
> 赞同：1
> 
> 时间：2012-08-07T11:41:06.970
> 
> 标签：android, actionbarsherlock

我创建了 RoboSherlockMapActivity.java

```
import roboguice.RoboGuice;
import roboguice.activity.event.OnActivityResultEvent;
import roboguice.activity.event.OnConfigurationChangedEvent;
import roboguice.activity.event.OnContentChangedEvent;
import roboguice.activity.event.OnCreateEvent;
import roboguice.activity.event.OnDestroyEvent;
import roboguice.activity.event.OnNewIntentEvent;
import roboguice.activity.event.OnPauseEvent;
import roboguice.activity.event.OnRestartEvent;
import roboguice.activity.event.OnResumeEvent;
import roboguice.activity.event.OnStartEvent;
import roboguice.activity.event.OnStopEvent;
import roboguice.event.EventManager;
import roboguice.inject.ContentViewListener;
import roboguice.inject.RoboInjector;
import android.content.Intent;
import android.content.res.Configuration;
import android.os.Bundle;

import com.actionbarsherlock.view.Menu;
import com.google.android.maps.MapActivity;
import com.google.inject.Inject;

public class RoboSherlockMapActivity extends MapActivity{

    @Override
    protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
    }

    protected EventManager eventManager;

    @Inject ContentViewListener ignored; // BUG find a better place to put this

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        final RoboInjector injector = RoboGuice.getInjector(this);
        eventManager = injector.getInstance(EventManager.class);
        injector.injectMembersWithoutViews(this);
        super.onCreate(savedInstanceState);
        eventManager.fire(new OnCreateEvent(savedInstanceState));
    }

    @Override
    protected void onRestart() {
        super.onRestart();
        eventManager.fire(new OnRestartEvent());
    }

    @Override
    protected void onStart() {
        super.onStart();
        eventManager.fire(new OnStartEvent());
    }

    @Override
    protected void onResume() {
        super.onResume();
        eventManager.fire(new OnResumeEvent());
    }

    @Override
    protected void onPause() {
        super.onPause();
        eventManager.fire(new OnPauseEvent());
    }

    @Override
    public void onNewIntent( Intent intent ) {
        super.onNewIntent(intent);
        eventManager.fire(new OnNewIntentEvent());
    }

    @Override
    protected void onStop() {
        try {
            eventManager.fire(new OnStopEvent());
        } finally {
            super.onStop();
        }
    }

    @Override
    protected void onDestroy() {
        try {
            eventManager.fire(new OnDestroyEvent());
        } finally {
            try {
                RoboGuice.destroyInjector(this);
            } finally {
                super.onDestroy();
            }
        }
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        final Configuration currentConfig = getResources().getConfiguration();
        super.onConfigurationChanged(newConfig);
        eventManager.fire(new OnConfigurationChangedEvent(currentConfig, newConfig));
    }

    @Override
    public void onContentChanged() {
        super.onContentChanged();
        RoboGuice.getInjector(this).injectViewMembers(this);
        eventManager.fire(new OnContentChangedEvent());
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        eventManager.fire(new OnActivityResultEvent(requestCode, resultCode, data));
    }

    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

我继承了这个而不是 MapActivity。仍然没有出现操作栏 Sherlock。这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:48:28.530

要与您一起使用`ActionBarSherlock`，`MapActivity`您必须扩展您的`Activity`类 `com.actionbarsherlock.app.SherlockMapActivity`，您可以从中下载[ActionBarSherlock-Plugin-Maps](https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps)。

此类是 ActionBarSherlock 的插件，支持`MapActivity`链接到提到的 github 项目，您也可以在[ActionBarSherlock 下载部分](http://actionbarsherlock.com/download.html)找到。

# binding - 淘汰赛双向绑定迷路

> ID：11845182
> 
> 赞同：1
> 
> 时间：2012-08-07T11:41:17.247
> 
> 标签：binding, knockout.js

我有一个从服务填充的可观察集合。UI 是使用无容器`ko`标签构建的。我有正确绑定的输入框，但双向绑定没有更新虚拟机。

我在[http://jsfiddle.net/cooper/EHNct/18/中复制了我的问题](http://jsfiddle.net/cooper/EHNct/18/)

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:03:50.363

您的错误在于输入的值绑定。通过使用函数调用`volume()`，您可以显式地解开包含在可观察对象中的值，以便将 wat 放入您的输入中成为静态的。

在您的数据绑定中使用简单的`volume`定义，一切都会正常工作。

# session - 在黑莓中经过一定时间间隔后在后台关闭应用程序

> ID：11845183
> 
> 赞同：3
> 
> 时间：2012-08-07T11:41:17.297
> 
> 标签：session, blackberry

我希望在一段时间后在后台关闭应用程序。基本上我希望保持用户会话。会话可以持续长达 5 到 10 分钟。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T11:47:25.560

```
// to close the application after some time if it is in background.
// you have to override the following method. Pass the time in seconds 
// after which you want to close the application.

    public void deactivate(){       
        new CloseAppInBackground(time duration);        
    }

    public class CloseAppInBackground {
        Timer timer;

        public CloseAppInBackground(int seconds) {
            timer = new Timer();
            timer.schedule(new CloseBackgroundAppTask(), seconds*1000);
        }

        class CloseBackgroundAppTask extends TimerTask {
            public void run() {
                // check whether the application is in foreground or not 
                if(!UiApplication.getUiApplication().isForeground())
                    System.exit(0); // exit the application.

                    timer.cancel(); //Terminate the timer thread
                 }
        }
    } 
```

# iphone - 如何从 iOS 上的主机名解析 IP 地址

> ID：11845184
> 
> 赞同：4
> 
> 时间：2012-08-07T11:41:19.070
> 
> 标签：iphone, ios, ip, hostname, resolve

我需要从 iOS 中的主机名解析 IP 地址。我知道使用 NSHost 很简单，但是 NSHost 解析功能似乎只适用于 OSX。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T11:47:37.880

像这样：

```
struct hostent *host_entry = gethostbyname("stackoverflow.com");
char *buff;
buff = inet_ntoa(*((struct in_addr *)host_entry->h_addr_list[0])); 
```

buff 变量现在包含一个 IP 地址...

# gwt - GWT：DataGrid - 设置高度 100% 未正确呈现

> ID：11845196
> 
> 赞同：4
> 
> 时间：2012-08-07T11:42:09.807
> 
> 标签：gwt, datagrid

我正在使用布局面板和数据网格。当我将数据网格高度设置为 100% 时，网格不呈现。我的面板层次结构如下图所示

![在此处输入图像描述](../Images/cd6c0b1ab28bc5a2b117405a13748c93.png)

我做得正确还是我搞砸了面板层次结构？？？

父面板是简单的布局面板，里面我有拆分布局面板->滚动面板->数据网格

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T09:07:55.127

`DataGrid`需要放在一个`LayoutPanel`或`Panel`实现`ProvidesResize`接口可见的地方。`ScrollPanel`实现该接口。

此外，`LayoutPanels` 从您`DataGrid`到您的根元素/面板的这条链必须不间断。在您的面板层次结构中似乎就是这种情况。

最后，您必须使用`RootLayoutPanel`而不是`RootPanel`添加您的`LayoutPanels`.
那么，您是否确保将您的添加`SimpleLayoutPanel`到`RootLayoutPanel`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T08:33:53.670

就我而言，这是由以下原因引起的： [DataGrid rows not visible in second tab of TabLayoutPanel](http://code.google.com/p/google-web-toolkit/issues/detail?id=6889)

# javascript - jQuery 图像转换。向上滑动

> ID：11845197
> 
> 赞同：0
> 
> 时间：2012-08-07T11:42:09.700
> 
> 标签：javascript, jquery, image, transition

我在网上搜索过，但没有找到与我所追求的完全匹配的任何东西。我想使用滑动过渡来改变我的图像。就像可以在 Windows 8 预览版视频 ( [http://windows.microsoft.com/en-US/windows-8/release-preview](http://windows.microsoft.com/en-US/windows-8/release-preview) ) 中看到的那样，在最初的几秒钟内，平铺图像变为文本，然后变为某些内容别的。这可以在 JQuery 中完成吗？或者，还有更好的方法？

谢谢。

编辑：我在这里找到了想要的效果：http: [//malsup.com/jquery/cycle/browser.html](http://malsup.com/jquery/cycle/browser.html)在左侧的“scrollUp”选项下。但我一辈子都不能让它在我的页面上工作！谁能指导我在以下脚本中提供的代码应该放在哪里？

```
<img id="img" src="link here">
<script>
function changeImage()
{
    var img = document.getElementById("img");
    img.src = images[x];
    x++;

    if(x >= images.length){
        x = 0;
    } 

    //fadeImg(img, 100, true);
    setTimeout("changeImage()", 3000);
}

var images = new Array(),
x = 0;

images[0] = "link here";
images[1] = "link here";
images[2] = "link here";
setTimeout("changeImage()", 3000);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:50:40.563

据我所知，仅通过 JQuery 无法实现这一点，JQuery 提供了可以实现类似功能的 slideUp 和 slideDown 插件，但它不是滑动操作。

# qt - 插件中的 QML 和 QtGStreamer

> ID：11845199
> 
> 赞同：1
> 
> 时间：2012-08-07T11:42:13.613
> 
> 标签：qt, plugins, qml, gstreamer, qtgstreamer

我正在尝试准备 QML 插件以在嵌入式设备上播放视频，以便其他开发人员可以轻松使用它。然而，目前提出的方式几乎总是需要围绕您的 QML 应用程序编写一些 C++ 包装器。我指的是这个例子： http: [//gstreamer.freedesktop.org/data/doc/gstreamer/head/qt-gstreamer/html/examples_2qmlplayer_2main_8cpp-example.html](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/qt-gstreamer/html/examples_2qmlplayer_2main_8cpp-example.html)

我希望能够拥有插件并简单地编写：

```
import AwesomeVideoPlugin 1.0

Rect
{
    AwesomeVideo
    {
        width: 320 
        height: 240
        url: "./myvideo.avi" 
        // ... some minor stuff like mouse click handling, controls, etc.
    }
} 
```

目前 QtGStreamer 需要为 VideoItem 提供 videoSurface 属性。这样做的唯一方法是在 rootContext() 中为附加属性创建和设置上下文。并创建 GraphicsVideoSurface 我需要 QGraphicsView （QDeclarativeView 填补这个角色）。

是否有可能：

1.  从 QDeclarativeItem（我只能从 QML 插件访问）中获取 QDeclarativeView，以便以后可以用于提供 GraphicsVideoSurface？我的猜测是否定的——但是我找到了路径 QFraphicsItem::scene() ==> *QGraphScene ==> QGraphScene::views() ==> QGraphicsView 的 QList——*它看起来像非常糟糕的编程，但也许有人让它工作（我得到段错误）

2.  是否有其他方法可以从 QDeclarativeItem 为 QtGStreamer 提供视频接收器？

格雷茨

八字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:25:30.177

我有同样的问题，但还没有想出一个优雅的解决方案。

但是，一种想法是通过子类 QApplication 对象的访问器函数使视频表面可用。

当然，这意味着您的插件依赖于具有 getVideoSurface 方法的应用程序子类，但它确实消除了 QML 代码中的丑陋之处。

```
class MyApp : public QApplication
{
    ....
     QGst::Ui::GraphicsVideoSurface *getVideoSurface() { return m_videosurface; }
}

 ...
int MyApp::init()
{
     m_viewer = new QDeclarativeView(); 
     m_viewer->setViewport(new QGLWidget(QGLFormat(QGL::SampleBuffers)));
     m_videosurface = new QGst::Ui::GraphicsVideoSurface(m_viewer);
}

MyVideoPlugin::MyVideoPlugin(QDeclarativeItem *parent) : QDeclarativeItem(parent)
{
    QGst::Ui::GraphicsVideoSurface *surface = ((MyApp*)qApp)->getVideoSurface();
}
... 
```

现在可以使用 MyVideoPlugin 元素而不引用导出的视频表面上下文项。

# ruby - Ruby线程回调奇怪的行为

> ID：11845202
> 
> 赞同：1
> 
> 时间：2012-08-07T11:42:16.783
> 
> 标签：ruby

创建一个包含一些线程、执行任务并最终调用回调方法的类是我目前的目标，在这条路上没什么特别的。

我的**实验**班对给定 IP 的特定端口进行了一些连接检查，以提供状态信息。

所以我的尝试：

```
check = ConnectionChecker.new do | threads |
   # i am done callback
end

check.check_connectivity(ip0, port0, timeout0, identifier0)
check.check_connectivity(ip1, port1, timeout1, identifier1)
check.check_connectivity(ip2, port2, timeout2, identifier2)

sleep while not check.is_done 
```

也许不是最好的方法，但总的来说它适合我的情况。

那么发生了什么：

在我的班级中，我存储了一个回调，执行操作并执行内部操作：

`Thread.new`-> 成功/失败 -> 标记为完成，全部完成后 -> 调用回调：

```
 class ConnectionChecker

   attr_reader :is_done

   def initialize(&callback)
     @callback     = callback
     @thread_count = 0
     @threads      = []
     @is_done      = false
   end

   def check_connectivity(host, port, timeout, ident)
     @thread_count += 1
     @threads << Thread.new do

       status = false
       pid    = Process.spawn("nc -z #{host} #{port} >/dev/null")

       begin
         Timeout.timeout(timeout) do
           Process.wait(pid)
           status = true
         end
       rescue Process::TimeoutError => e
         Process.kill('TERM', pid)
       end

       mark_as_done
       #returnvalue for the callback.
       [status, ident]
     end
   end

   # one less to go..
   def mark_as_done
     @thread_count -= 1
     if @thread_count.zero?
       @is_done = true
       @callback.call(@threads)
     end
   end
 end 
```

这段代码——是的，我知道没有启动方法，所以我必须相信我会立即调用它——工作正常。

但是当我交换这两行时：

```
 @is_done = true
  @callback.call(@threads) 
```

到

```
 @callback.call(@threads)
  @is_done = true 
```

然后最后一行，

```
sleep while not check.is_done 
```

变成一个无限循环。调试显示回调被正确调用，当我检查 的值时`is_done`，它确实总是`false`。由于我没有将其放入闭包中，因此我想知道为什么会这样。

回调本身也可以为空，`is_done`保持不变`false`（因此没有错误捕获的异常）。

在这种情况下，我注意到最后一个线程处于运行状态。由于我没有要求线程的价值，所以我只是不明白这里的窍门。

有关此问题的任何文档/信息？另外，给它起个名字就好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:27:48.367

尝试使用 Mutex 来确保线程安全:)

# android - 是否可以在清单文件中不添加权限的情况下接收广播

> ID：11845205
> 
> 赞同：0
> 
> 时间：2012-08-07T11:42:25.883
> 
> 标签：android, broadcastreceiver, android-permissions

如果应用程序使用权限进行广播，即接收者应该具有某些特定权限才能接收广播。

是否有其他方法可以在不在清单文件中添加权限的情况下接收此广播？

我现在只是想知道权限有多强大......不是出于错误的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:48:44.710

这是 Android 的主要安全概念之一，每个活动都需要请求它想在其应用程序中使用的权限。

如果可以在清单文件中注册一些没有特定权限的广播接收器，那么很容易危及系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:57:00.780

不必在清单文件中声明 BroadcastReceiver。您也可以像这样在 java 代码中执行此操作。

```
IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
registerReceiver(batteryLevelReceiver, batteryLevelFilter); 
```

# android - 如何判断两个电话号码是否相同？

> ID：11845206
> 
> 赞同：1
> 
> 时间：2012-08-07T11:42:25.537
> 
> 标签：android

如果我们有一个`358541321`没有国家代码的电话号码，有时当电话响起时会显示`(+56 - 358541321)`或 `+56358541321`。

如何检测响铃号码是否是第一个号码？

**该号码不会保存在手机内存中以进行手机查找。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-05T08:22:19.243

[https://developer.android.com/reference/android/telephony/PhoneNumberUtils.html](https://developer.android.com/reference/android/telephony/PhoneNumberUtils.html) 提供了一个简洁的解决方案：

```
 import android.telephony.PhoneNumberUtils; 
```

...

```
 String one = "+51 - 3245678";
  String two = "+513245678";
  boolean isSame = PhoneNumberUtils.compare(one, two); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:46:13.890

这个问题的通常解决方案是比较号码的最后 X（例如 7 或 8，取决于您所在的国家/地区）数字。在极少数情况下，这可能会导致误报，但通常这是一个很好的近似值，它可以避免不同或缺少国家或地区代码的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:53:07.273

Java`regular expression`和 String 函数`replaceAll`可以轻松做到这一点。

这边走，

```
 String one = "+51 - 3245678";
    String two = "+513245678";

    one = one.replaceAll("[^0-9]","");
    two = two.replaceAll("[^0-9]","");
    Toast.makeText(this, one+" -- "+two, Toast.LENGTH_LONG).show();
    if(one.equalsIgnoreCase(two))
    {
        Toast.makeText(this, "Both Are Equal", Toast.LENGTH_LONG).show();
    }
    else
    {
        Toast.makeText(this, "Different", Toast.LENGTH_LONG).show();
    } 
```

# paypal - 通过 PayPal API 查询定期付款资料

> ID：11845214
> 
> 赞同：1
> 
> 时间：2012-08-07T11:42:50.620
> 
> 标签：paypal

在基本搜索下的 Paypal 中，我可以通过“订阅和协议”->“定期付款”->“我的个人资料”获得所有创建/取消的定期付款资料的概览。但是，在 PayPal API 中，我只有一个[TransactionSearch](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_TransactionSearch)调用可用。

是否可以从某处的 API 中获取这些信息？

# c++ - ofstream 和 stringstream 不起作用

> ID：11845216
> 
> 赞同：1
> 
> 时间：2012-08-07T11:42:54.160
> 
> 标签：c++, stringstream, ofstream

我`std::ofstream os`在课堂上有一个用于将各种内容记录到文件中的内容，例如：

```
 `os<< "# Query " << queryCount++ << " -- "
   << "Type: " << typeName << ", "
   << "Instructions: " << instructions << "\n";` 
```

在构造函数中，它被初始化为`path`代表文件路径的 where ： `os(path.c_str(), std::ios::trunc)`

我想使用 a`stringstream`来记录所有这些消息，并且在函数结束时我只想将其输出`stringstream`到文件中，例如：

```
stringstream ss;

ss<< "# Query " << queryCount++ << " -- "
  << "Type: " << typeName << ", "
  << "Instructions: " << instructions << "\n";

os << ss.str(); 
```

然而由于某种原因，虽然它编译什么都没有打印出来。我不确定是什么原因。我也尝试将字符串转换为 ac 字符串，但 htat 也不起作用。关于什么可能是错的任何想法？

希望很清楚。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:46:52.330

我怀疑这是您在`ofstream`构造函数中使用的输出模式；尝试：

```
os(path.c_str(), std::ios::out|std::ios::trunc) 
```

# iphone - 删除 uiwebview href 灰色选择

> ID：11845217
> 
> 赞同：2
> 
> 时间：2012-08-07T11:42:54.240
> 
> 标签：iphone, objective-c, ios, uiwebview

我在网上搜索过，但给定的解决方案不符合我的需求。所以我有一个 webview，我的 webview 加载如下数据：

```
NSString *path = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:path];
[_webView loadHTMLString:htmString baseURL:baseURL]; 
```

该html字符串具有带href的锚标记，例如- <a href=http://url.com/ ... />，我在shouldStartLoadWithRequest上触发了一些事件。

现在的问题是我不知道如何在按下此属性时删除灰色选择。我看到人们这样做：

```
<a href=http://yourlink.com/ style = "-webkit-tap-highlight-color:rgba(0,0,0,0);"> 
```

和一些类似的事情，但我想以其他方式做。通过其他方式，我说我不想更改我的 htmlString，因为它可能有很多，并且在每一个中注入样式似乎不是完美的解决方案..

所以我试着这样做：

```
[_webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.style.webkitTapHighlightColor = \"rgba(0,0,0,0);\""]; 
```

在我加载 html 字符串后，但它不起作用。

所以有人有一些建议，或者知道我做错了什么？

**编辑：** 或者可能为我想要的行为简单地注入 javascrypt？

提前致谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T18:59:17.647

这段代码应该可以解决问题：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView

    NSString *js = @"var styleNode = document.createElement('style');\n"
                    "styleNode.type = 'text/css';\n"
                    "var styleText = document.createTextNode('a {-webkit-tap-highlight-color:rgba(0,0,0,0)}');\n"
                    "styleNode.appendChild(styleText);\n"
                    "document.getElementsByTagName('head')[0].appendChild(styleNode);\n";

    [_webView stringByEvaluatingJavaScriptFromString:js];
} 
```

# asp.net - 将值列表放入 ASP.Net MVC 中的视图模型中

> ID：11845218
> 
> 赞同：2
> 
> 时间：2012-08-07T11:42:56.017
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, linq

我让自己完全困惑，如果有人能再次指出我正确的方向，我将不胜感激。

为了我自己的学习目的，我正在尝试将搜索表单添加到一个虚构的项目中。

想法是 - 我有一个日期文本框和租用天数文本框 - 当搜索被点击时 - 代码应该查找在输入日期和日期加上所需租用天数之间已预订的所有汽车. （一种）

这将生成必须从搜索的下一部分中排除的汽车列表 (B)

然后它搜索 Cars (C)，并排除在 (B) 生成的列表

然后 Linq 填充 ct 对象 (D) freeCarTypes。

freeCarTypes 在这一点上，正确地保存了我正在寻找的数据 - 一个列表：

```
Car Type (TypeNme)
Type ID
TypeCount (how many of this car type are available)
NumSelected (set to 0 by default) 
```

当我列出每种汽车类型时，NumSelected（我希望）将填充到模型中，并带有 TypeCount（可用）的下拉列表 - 然后它将填充模型的 NumSelected 部分。所以当帖子发布时，我有一个汽车类型列表，以及经销商感兴趣的每种类型的数量。

我的问题是，如何将汽车列表 - freeCarTypes (D) - 放入我的 SearchViewModel.TypesAvail？

是我使用 IQueryable 的 SearchViewModel 是错误的，还是我应该在这里使用其他东西 - 我正在绕圈子。

谢谢你的帮助，

标记

```
public class SearchViewModel
{
    [Required]
    public DateTime From { get; set; }
    [Required]
    public int Days { get; set; }
    public long DealerID { get; set; }
    public IQueryable<Car> Cars { get; set; }
    public IQueryable<TypesAvail> TypesAvails { get; set; }
}

    public class TypesAvail
{
        public String TypeNme { get; set; }
        public long TypeID { get; set; }
        public int TypeCount { get; set; }
        public int NumSelected { get; set; }
} 
```

我的搜索控制器

```
 [HttpPost]
    public ActionResult Avail(SearchViewModel model, string id)
    {
        if (ModelState.IsValid)
        {

            // (A)
            var dteFrom = model.From;
            var dteTo = model.From.AddDays(model.Nights);

            // (B)
            var prebookedCars = db.Cars
                .Where(car => car.Rentals.Any(rental =>
                    (model.DealerID == rental.Dealer_id) && (
                    (dteFrom >= rental.dateout && dteFrom < rental.dateback)
                    ||
                    (dteTo > rental.dateout && dteTo <= rental.dateback)
                    ||
                    (dteFrom <= rental.dateout && dteTo >= rental.dateback)
                )));

                // (C)
            var freeCarTypes = db.Cars
                .Where(r => r.DealerID == model.DealerID)
                .Except(prebookedCars)
                .GroupBy(p => p.CarType)
                .Select(ct => new                       // (D)
                {
                    TypeNme = ct.Key.type_name,     
                    TypeID = ct.Key.type_id,
                    TypeCount = ct.Count(),
                    NumSelected = 0
                }
                );

            foreach (var fr in freeCarTypes)
            { 
                TypesAvail ta = new TypesAvail();
                {
                ta.NumSelected = fr.NumSelected;
                ta.TypeCount = fr.TypeCount;
                ta.TypeID = fr.TypeID;
                ta.TypeNme = fr.TypeNme;
                }

            }

            // This is where I'm stuck - how do I get the list above, into the ViewModel, to I can generate a list of car types, with a drop down list of how many are available

           // model.TypesAvail = ta;
           // model.TypesAvail = freeCarTypes;

            return View(model);
        }
        else    // model is not valid, so return the View
        {
            return View(model);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T12:12:53.847

这个怎么样？

```
// (C)    
model.TypesAvail = db.Cars.Where(r => r.DealerID == model.DealerID)
                      .Except(prebookedCars)
                      .GroupBy(p => p.CarType)
                      .Select(ct => new TypesAvail                 // (D)
                      {                      
                          TypeNme = ct.Key.type_name,
                          TypeID = ct.Key.type_id,
                          TypeCount = ct.Count(),
                          NumSelected = 0                  
                      }; 
```

# android - 使用密码保护 Android 中的文件

> ID：11845219
> 
> 赞同：0
> 
> 时间：2012-08-07T11:43:05.960
> 
> 标签：android, excel, encryption, jexcelapi

我正在制作一个使用 JExcelApi 生成 Excel 文件的 Android 应用程序。该字段的内容也可以作为纯文本使用，但它不会存储在任何地方（我使用它来在 TextView 上显示它；内容并不太复杂）。

为了简化事情，我将 Excel 文件存储在 SD 卡根目录中。我知道这不是一个好的做法，但这个应用程序并不适合广泛分发，它只用于我公司的内部目的，所以我不太担心。当应用程序生成文件时，您可以在主视图上按下“发送 XLS”按钮，该按钮将创建一个 SEND_ACTION Intent，以便您可以通过电子邮件、Dropbox 或其他方式发送文件，或者您只需将手机插入计算机，将其挂载为 USB 存储并获取文件。

但是，很快我们将需要将应用程序发送给我们的一些客户，并且需要进行一些更改。我们不希望我们的客户访问 XLS 文件，所以我需要以某种方式保护它。不幸的是，JExcelApi 不支持受密码保护的文件，所以我需要找到一种替代方法来保护它。

关于“发送”按钮：我正在考虑添加一个简单的密码对话框，以便用户在发送意图之前需要先输入硬编码密码。不过，我还没有看这个。

最让我担心的是XLS文件。理想情况下，它应该仍然在 SD 卡的根文件夹中可用，但我意识到这可能会使事情变得比必要的困难得多。使用应用程序的私人存储将是一种选择，因为该文件将是“不可见的”，但这可以通过使用有根电话的手机轻松破解。我已经查看了 Cipher 类，但我不确定如何将它应用到我的案例中：JExcelApi 自己管理文件的打开和保存，我不能使用 CipherOutputStream 来保存文件；我还需要能够在 PC 上解密文件。

我应该怎么办？有什么方法可以在 Android 中加密文件，从而可以在 PC 上对其进行解密？我是否应该找到其他一些支持密码保护的 Excel API（甚至有）？

关于安全要求：报告的内容并不重要，如果我们的客户可以访问它也没什么大不了的（我的意思是，内容本身显示在屏幕上！），但我想做如果他们曾经尝试过，我们的客户将不再坚持访问 XLS 文件，这已经够烦人的了。

TL;DR：如何在 Android 中加密任何类型的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:52:05.450

我对 Android 上的加密不是很熟悉，但有[Bouncycastle](http://www.bouncycastle.org/)库可用于 Android 上的加密。可能会有一些[陷阱](http://www.unwesen.de/2011/06/12/encryption-on-android-bouncycastle/)，但显然您也可以使用 Android 自己的[Cipher](http://developer.android.com/reference/javax/crypto/Cipher.html)类使用不同的算法进行加密/解密。

如果您想共享加密数据，您必须拥有一个共享密钥才能让接收者解密它。

# android - 如何使 adb 服务器不响应？

> ID：11845223
> 
> 赞同：3
> 
> 时间：2012-08-07T11:43:18.777
> 
> 标签：android, adb

我们有测试套件，其中 adb 客户端连接到多个 android 设备。我们的测试套件提出了这些连接请求、获取设备状态并在其中运行应用程序。

我想模拟一个 adb 服务器挂起的场景。我尝试发出“adb kill-server”，但来自客户端的任何 adb 请求都会启动 adb 服务器。无论如何我们可以阻止 adb 服务器监听 adb 客户端请求吗？

当然，我们自己编译 adb 服务和修改代码还有很长的路要走。但是有什么简单的方法可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:57:24.453

您是否仍然需要连接（不响应命令），或者完全终止连接是否可以？听起来像终止连接会很好，因为你说你试过了`adb kill-server`。

在这种情况下，尝试以 TCP/IP 模式连接到设备而不设置 adb 服务器以侦听网络端口怎么样？即类似的东西：

```
adb tcpip 12345 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T17:40:36.510

另一个建议是在设备中完全禁用 adb 接口。虽然这可能会也可能不会停止 adb 服务器，但您仍然会得到您想要的结果，即 adb 客户端没有连接。可以做到这一点的方法是在 ROOTED 设备上，执行

*   `adb shell`
*   `su`
*   `echo 1 > /sys/class/android_usb/f_adb/on`

这是我可以在手头的 HTC Vivid 上做的。对于其他设备，路径可能不同，但它们都应该相似。重新启动手机后，adb 将再次开始工作。

# php - PHP 脚本运行缓慢，但服务器 CPU 空闲

> ID：11845224
> 
> 赞同：1
> 
> 时间：2012-08-07T11:43:20.900
> 
> 标签：php, mysql

我有一个 PHP 脚本来从文本文件中导入各种数据。

导入非常复杂，我的测试文件有 32.000 个条目。这些条目必须被解析并插入到 mysql 数据库中。

如果我要运行我的脚本，它需要 30 分钟才能完成......此时我的服务器 cpu 99% 空闲。

是否有机会优化 php 和 mysql，因为它们正在使用机器的更多功率？

代码：

```
if ($handle = @fopen($filename, "r")) {

    $canceled = false;
    $item = null;
    $result = null;

    while (!feof($handle)) {
        $buffer = fgets($handle, 4096);
        $line = $buffer;

        if (substr($line, 0, 2) == '00') {

            continue;
        }
        else if (substr($line, 0, 2) == '99') {
            continue;
        }
        else if (strlen($line) < 75) {
            continue;
        }

        Reread:
        if ($canceled) {
            break;
        }

        if ($item == null) {
            $item = new DA11_Item();
            $item->boq_id = $boq_id;
        }
        $result = $this->add_line_into_item($item, $line);

        if ($result == self::RESULT_CLOSED) {
            $this->add_item($item);
            $item = null;
        }
        else if ($result == self::RESULT_REREAD) {
            $this->add_item($item);
            $item = null;
            goto Reread;
        }
        else if ($result == self::RESULT_IGNORD) {
            if (count($item->details()) > 0) {
                    $this->add_item($item);
            }
            $item = null;
        }
    }

    if ($item !== NULL) {
        $this->add_item($item);
    }

    fclose($handle);
} 
```

add_item 将执行 $item->save() 并将其保存到数据库中。

谢谢和亲切的问候， viperneo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:48:49.583

您遇到的一个问题是，每个插入都是对您的数据库服务器的单独请求，包括它的响应。有了 32.000 条记录，您可能会想到，这是一个相当大的开销。一次对（比如说）1000 条记录使用批量插入

```
INSERT INTO foo (col1, col2) VALUES
  (1,'2'),
  (3,'4')
  -- 997 additional rows
  (1999, '2000'); 
```

额外的交易可能会有所帮助

更新，因为您提到了活动记录：我建议避免为此类大规模导入任务添加任何额外的抽象层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:47:54.357

正如 Florent 在评论中所说，MySQL 引擎处理请求的速度太慢。将 MySQL 数据库移动到 SSD（而不是 HDD）将显着提高速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:48:23.590

有一些东西可以优化。

但我认为最好的性能是你的 MySQL 数据库。有时，连接表上的某些**索引**可能会带来很大的速度。你应该首先检查一下。

当你有一个 linux 系统时，你可以使用**mysqltuner**来优化你的数据库。

第二种方法是优化您的代码并缓存数据库中的一些结果，当您以前做过同样的事情时。

# mysql - 创建表的问题

> ID：11845227
> 
> 赞同：3
> 
> 时间：2012-08-07T11:43:35.550
> 
> 标签：mysql

我想创建一个表并用记录填充它。新表应命名为majorlist，并应包括学生ID、学生姓名（名字和姓氏之间用空格连接）、专业和每个学生的年龄（整年）。标记输出列 SID、Name、Major 和 Age。

```
create table majorlist
 select studentid as 'SID' from students
 select concat(firstname,' ',lastname) as "name" from students
 select major as 'major' from students
 select round((datediff(now(),DOB))/365) as "age" from students; 
```

我知道这些中的每一个都是单独工作的，但我不知道如何将它们集成到一个表中而不会出错。我尝试从每个语句中删除选择语句，但仍然不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:47:50.720

```
create table majorlist 
select studentid as 'SID',
       concat(firstname,' ',lastname) as "name", 
       round((datediff(now(),DOB))/365) as "age" 
from students; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:34:31.307

是的，@juergen d 的回答很好。您正在通过获取单个表值来创建表`students`。

然后最好使用单个`select`语句进行获取。您可以使用以下查询 -

```
 create table majorlist 
   select studentid as 'SID',
   concat(firstname,' ',lastname) as 'name',round((datediff(now(),DOB))/365) as 'age' 
   from students; 
```

# c++ - 在 C++ 中读取 COM 端口数据

> ID：11845228
> 
> 赞同：1
> 
> 时间：2012-08-07T11:43:38.410
> 
> 标签：c++, c

我有一个设备是听诊器数字机器，所以我将该机器与 PC 连接并使用 C++ 代码（算法）获取该机器数据，那么我该如何开始？任何人都可以给我任何类型的教程或任何相关的示例链接来帮助我完成这项任务吗？我对这类任务知之甚少，所以与该任务相关的对我有什么好处请建议我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T11:48:31.473

如果您使用 Windows

```
HANDLE m_hParallelComm = CreateFile(portName,GENERIC_READ | GENERIC_WRITE, 0, NULL, OPEN_EXISTING, 0,NULL); 

if(m_hParallelComm == INVALID_HANDLE_VALUE)
    return false;

ReadFile( m_hParallelComm,data,  dwSize, &dwNumberOfBytesToRead, NULL);
CloseHandle(m_hParallelComm); 
```

有关读取文件功能，请参阅[此](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467%28v=vs.85%29.aspx)

一篇关于[串行编程的好文章](http://www.codeguru.com/cpp/i-n/network/serialcommunications/article.php/c5425/Serial-Communication-in-Windows.htm)

# c++ - glGenBuffers 在 Release Build 中崩溃

> ID：11845230
> 
> 赞同：5
> 
> 时间：2012-08-07T11:43:40.860
> 
> 标签：c++, opengl, qt4

我在使用 OpenGL 函数 glGenBuffers() 时遇到了一个奇怪的问题。我正在编写一个相当简单的应用程序，其中我使用以下列方式声明的 VBO：

```
#include <QGLFunctions>
#include <QGLWidget>

class MyClass : public QGLWidget, protected QGLFunctions {
    GLuint vertexBufferObject;

    // ...
    GLuint makeBufferList(void);
}

GLuint MyClass::makeBufferList(void) {
    vertexBufferObject = 0;
    glGenBuffers(1, &vertexBufferObject);  // <-- Here it crashes

    // ... load data and render

    return vertexBufferList;
}

MyClass::MyClass(QWidget* parent) 
    : QGLWidget(parent),
      vertexBufferObject(0)
{
    QGLContext* context = new QGLContext(this->format());
    initializeGLFunctions(context);
    glInit();
}

MyClass::~MyClass() {
    glDeleteBuffers(1, &vertexBufferObject);
} 
```

这一切在 Debug Build 中运行良好。数据渲染得很好，程序最终正确完成。但是，在 Release Build 中，glGenBuffers() 会使程序崩溃。它不只是返回 0 或什么也不做，它会在函数调用时崩溃。但由于问题只发生在发布模式下，我无法使用调试器找出问题所在。

我正在使用 Windows 7 系统并在 Qt 4.8.1 中进行开发。编译器是 MSVC 2010 (Qt SDK) 编译器。

有人有什么建议我可以尝试吗？

// 编辑：

知道可能有用：我尝试使用 GCC (Qt SDK) 编译器在 Mac 上编译完全相同的代码，并且 Debug 和 Release Build 都可以正常工作。但在 Windows 7 上，问题仍然存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:43:38.037

发现了问题（感谢@MahmoudFayez）：问题来自Qt API 中的一个错误，它导致 glGenBuffers() 函数（可能还有其他函数）崩溃。这个问题直接等同于这里讨论的问题：

*   [仅在发布模式下使用 glGenBuffer 的未处理异常 - QT](https://stackoverflow.com/questions/10230976/)
*   [http://qt-project.org/forums/viewthread/12794](http://qt-project.org/forums/viewthread/12794)

解决方案相对简单但不是很优雅：使用 GLEW 代替 QGLFunctions。我通过以下方式解决了我的问题：

```
#include "glew.h"
#include <QGLWidget>

class MyClass : public QGLWidget {
    // ...same as the above
}

MyClass::MyClass(QWidget* parent) 
    : QGLWidget(parent),
      vertexBufferObject(0)
{ 
    makeCurrent();
    glewInit();
} 
```

这解决了一切。缺点是这涉及使用额外的外部依赖项，而使用 Qt 就是尽可能兼容，尽可能少的外部依赖项。但是，似乎我们需要等到 Qt 5.0 发布后才能修复此错误。

作为最后的评论：我无法弄清楚这个错误中的哪个部分只导致崩溃的发布版本，而不是调试模式。

# eclipse - Eclipse 中的键盘快捷键冲突

> ID：11845232
> 
> 赞同：0
> 
> 时间：2012-08-07T11:43:44.500
> 
> 标签：eclipse, editor, keyboard-shortcuts, aptana

我使用 Aptana Studio 进行 PHP 开发。我还使用 Eclipse 中的 Emacs+ 插件在编辑器中获得类似 Emacs 的体验。但是，当我尝试使用某些快捷方式时，我会得到一个弹出窗口，我必须从中选择要执行的命令。例如，当我发出`Ctrl`-时`/`，我会弹出这样的窗口：（哎呀，我没有足够的声望来发布图片！）

```
-----------------------------------
| Comment Line / Selection  |  1  |
|---------------------------------|
| Undo+                     |  2  |
----------------------------------- 
```

当我必须执行一系列撤消操作时，这很烦人。

我想在这种情况下执行 Emacs+ 插件绑定的命令。我以为这些是冲突，但是键首选项窗口（窗口->首选项->常规->键）没有显示任何内容。关于我应该如何实现这一目标的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:00:18.877

转到窗口 -> 首选项 -> 常规 -> 键或 Ctrl+Shift+L

然后转到您要查找的命令。

在这里，您应该能够看到**Binding**和**When**下拉菜单。

![在此处输入图像描述](../Images/35dd20d1fb0d973c3f262957a3416562.png)

对于相同的绑定，您可以定义不同的范围。

可能对于 Aptana，您可以定义`PHP`范围（当下拉列表时）。

安装 Pydev 后，我在使用 Ctrl+Shift+T 时遇到了同样的问题。它曾经绑定到*Open Type*和*Python Class Browser*。改变了范围，它工作得很好。

# java - 这是一种什么样的方法方法？

> ID：11845234
> 
> 赞同：1
> 
> 时间：2012-08-07T11:43:48.290
> 
> 标签：java, swing, jtable

我想禁用编辑但不突出显示我的 JTable 中的所有单元格。

我有一个网站上的以下示例，它按预期工作：

```
DefaultTableModel model = new DefaultTableModel(data, new String[]{"First header", "Second header", "Third Header"});

JTable table = new JTable(model) 
{ 
    public boolean isCellEditable(int rowIndex, int colIndex) 
    {
        return false;
    } 
}; 
```

**在表**变量实例化之后会发生什么？

我是否某种覆盖了实例方法**isCellEditable**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:48:57.480

这称为[匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)。它是扩展`JTable`和覆盖其`isCellEditable`方法的类的实例化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:48:07.837

它正在创建一个从`JTable`.

在代码中：

```
public ExistingClass x = new ExistingClass { ... } 
```

这实际上创建了一个派生自`ExistingClass`. 这是提供单个派生实例的简洁方法。在您上面的示例中，只需覆盖一种方法即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T11:49:51.370

您正在实例化一个[匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)：

> 匿名类是没有名称的本地类。使用 new 运算符在单个简洁表达式中定义和实例化匿名类。

是的，你在这里覆盖了一个方法。

# twitter-bootstrap - 制作自己的流体模板

> ID：11845236
> 
> 赞同：1
> 
> 时间：2012-08-07T11:43:54.170
> 
> 标签：twitter-bootstrap

我需要 tis 标记 - 左右侧边栏具有静态宽度（例如 300 像素），并且中间容器必须是流动的。

UPD：侧边栏对齐到浏览器侧

我如何使用 twitter-bootstrap（当前版本）做到这一点？

现在我有了这个标记，但结果不是我需要的

```
<div class="container-fluid">
<div class="row-fluid">
    <div class="span3" style="width: 300px;">
        <div class="well sidebar-nav">
            &nbsp;
        </div>
    </div>
    <div class="span6">
        &nbsp;
    </div>
    <div class="span3" style="width: 300px;">
        <div class="well sidebar-nav">
            &nbsp;
        </div>
    </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:33:44.147

对于这种情况，我们将避免使用跨度类，因此我们可以控制情况。

我们将为这个场景创建自己的侧边栏。

像这样：

把它放在你的CSS中。

```
.container-fluid > .sidebar-nav {
     position: relative;
     top: 0;
     left:auto;
     width: 300px;
 }

 .left {
      float:left;
 }

 .right {
     float:right;
 }

 .container-fluid > .content {
     margin: 0 320px;
 } 
```

将此 thml 标记放入您的文档中。

```
 <div class="container-fluid">
        <div class="sidebar-nav left">
            <div class="well">
            <h5>Sidebar</h5>
            Lorem ipsum dolor sit amet, dianam Interposito brutis aeternae reversurus eum. Crescente mihi servitute meam ad nomine Maria cum magna aliter refundens domum Taliarchus eius in fuerat construeret cena reges. Tharsos determinatio vestes in lucem in fuerat est Apollonius. Navis fortiter invenit quasi nomen ibique parvulam eodem mulier. Denique laetare quod ait regem Boreas quam crucis in.
            </div>
        </div>
        <div class="sidebar-nav right">
            <div class="well">
            <h5>Sidebar</h5>
            Lorem ipsum dolor sit amet, dianam Interposito brutis aeternae reversurus eum. Crescente mihi servitute meam ad nomine Maria cum magna aliter refundens domum Taliarchus eius in fuerat construeret cena reges. Tharsos determinatio vestes in lucem in fuerat est Apollonius. Navis fortiter invenit quasi nomen ibique parvulam eodem mulier. Denique laetare quod ait regem Boreas quam crucis in.
            </div>
        </div>
        <div class="content">
            <h1>Hello, world!</h1>
            <p>Lorem ipsum dolor sit amet, dianam Interposito brutis aeternae reversurus eum. Crescente mihi servitute meam ad nomine Maria cum magna aliter refundens domum Taliarchus eius in fuerat construeret cena reges. Tharsos determinatio vestes in lucem in fuerat est Apollonius. Navis fortiter invenit quasi nomen ibique parvulam eodem mulier. Denique laetare quod ait regem Boreas quam crucis in.</p>
        </div>
        </div> 
```

这些代码应输出与此类似的页面

![3列布局](../Images/a09d3034c3ee4f36f4b7d9f4f9c60e93.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:18:47.420

给宽度一个百分比。
**已更新**添加`float:left;`到 span6，因此当您重新调整窗口大小时，右侧 div 不会掉落

```
 <div class="container-fluid">
<div class="row-fluid">
    <div class="span3" style="width: 20%;">
        <div class="well sidebar-nav">
            &nbsp;
        </div>
    </div>
    <div class="span6" style="width: 50%;float: left;">
        &nbsp;
    </div>
    <div class="span3" style="width: 20%;">
        <div class="well sidebar-nav">
            &nbsp;
        </div>
    </div>
</div>
</div> 
```

# android - Android调用WCF服务

> ID：11845237
> 
> 赞同：3
> 
> 时间：2012-08-07T11:43:56.257
> 
> 标签：android, wcf, web-services

`WCF web service`我从拨打电话时遇到问题`Android application`。如果我调用以下 URL，`"http://10.0.2.2:80/WebService/WebServiceImpl.svc"`我会收到 response `"200 OK"`，但是当我尝试在服务中调用该函数时，`"http://10.0.2.2:80/WebService/WebServiceImpl.svc/Test"`我会收到 response `"400 Bad request"`。

有人可以帮忙吗？

```
namespace WebService
{
    public class WebServiceImpl : IWebServiceImpl
    {
        #region IRestServiceImpl Members
        public string Test()
        {
            return "Test pass";
        }

        #endregion
    }
}

namespace WebService
{
    [ServiceContract]
    public interface IWebServiceImpl
    {
     [OperationContract]
        [WebInvoke(
            Method = "GET")]
        string Test();
    }
} 
```

安卓活动：

```
 public void onClick(View v)
    {
        // TODO Auto-generated method stub
        HttpClient  client = new DefaultHttpClient();
        String SERVER_HOST="10.0.2.2";
        int SERVER_PORT = 80;
        String URL = "http://10.0.2.2:80/WebService/WebServiceImpl.svc/Test";
        HttpHost target = new HttpHost(SERVER_HOST, SERVER_PORT, "http");
        HttpGet request = new HttpGet(URL);
        try
        {
            HttpResponse response = client.execute(target,request);
            HttpEntity entity = response.getEntity();
            MessageBox(response.getStatusLine().toString());
        }
        catch(Exception e)
        {
            MessageBox("excepton");
            MessageBox(e.toString());
        }
    }

    public void MessageBox(String message){
        Toast.makeText(this,message,Toast.LENGTH_LONG).show();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:15:27.637

我使用“SoapObject”解决了这个问题

部分代码：

```
public static final String NAMESPACE = "http://tempuri.org/";
public static final String URL = "http://10.0.2.2:80/MyFirstPublishedWebService/WebServiceImpl.svc?wsdl";  
public static final String SOAP_ACTION = "http://tempuri.org/IWebServiceImpl/Login";
public static final String METHOD_NAME = "Login";

SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
SoapSerializationEnvelope envelope = 
    new SoapSerializationEnvelope(SoapEnvelope.VER11); 

envelope .dotNet = true;

envelope.setOutputSoapObject(request);
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

try {
    androidHttpTransport.call(SOAP_ACTION, envelope);
}
catch (Exception e) {

} 
```

亚历克斯，谢谢你的回答！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:58:46.820

首先在浏览器中测试这个 url。如果您有同样的问题，请在清单中为您的服务启用 Web 访问。

辅助检查 ip 10.0.2.2 是否可以从您的手机访问。

# python - 在 python 的 raw_input 中使用 %r

> ID：11845238
> 
> 赞同：4
> 
> 时间：2012-08-07T11:43:56.463
> 
> 标签：python, raw-input

在 python 的 raw_input 中使用 %r 是否可行？

对于上下文，我正在研究 Zed Shaw 的[练习 12](http://learnpythonthehardway.org/book/ex12.html)。（很棒的资源！这些课程很有帮助，而且节奏很好。）

我正在玩额外的功劳，试图让 raw_input 重复我输入的内容。我知道我可以用 print 语句完成同样的事情，但很好奇我是否可以在 raw_input 中完成它。

我输入的代码是：

```
from sys import argv

script, firstname, lastname = argv

age = raw_input("Hello %r, what is your age? ") % firstname

print ("Ahh, Mr. %r, you are %r years old.") % (lastname, age) 
```

我得到的错误是：

```
Traceback (most recent call last):
  File "ex13a.py", line 5, in <module>
    age = raw_input("Hello %r, what is your age? ") % firstname
TypeError: not all arguments converted during string formatting 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T11:47:34.500

你的行应该是

```
raw_input("Hello %r, what is your age? " % firstname) 
```

代替

```
raw_input("Hello %r, what is your age? ") % firstname 
```

* * *

否则，您不会格式化您的`"Hello %r, ..."`字符串，而是调用`raw_input`.

# asp.net - 在 umbraco 模板中对页面加载进行渲染宏控制

> ID：11845239
> 
> 赞同：1
> 
> 时间：2012-08-07T11:43:57.973
> 
> 标签：asp.net, razor, macros, umbraco, pageload

我正在尝试加载剃刀脚本，该脚本在 umbraco 中作为单独的宏存在。我正在使用 umbraco 4.7.0

我基本上是在进行地理定位，因此每次加载页面时都需要运行脚本。所以我正在寻找类似的东西：

```
 <script type="c#" runat="server">
protected void Page_Load(object sender, EventArgs e)
  {
    Call the Macro here
  } 
```

显然我可以在模板中做到这一点

```
 <umbraco:Macro Alias="GeoTargetting" runat="server" /> 
```

但我需要在页面中加载任何控件之前调用此宏。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T23:14:30.143

这似乎工作正常：

**模板：**

```
<umbraco:Macro Alias="Sandbox" runat="server"></umbraco:Macro>
<asp:Label runat="server" ID="Label1" Text="Yo"></asp:Label> 
```

**宏脚本：**

```
@using System.Web.UI.WebControls
@using umbraco.MacroEngines
@inherits DynamicNodeContext
@{
    Page page = HttpContext.Current.Handler as Page;
    page.Load += new EventHandler(page_Load);
}

@functions
{
    static void page_Load(object sender, EventArgs e)
    {
        Page page = sender as Page;
        Label label = FindControlRecursive(page, "Label1") as Label;
        label.Text = "Hello";
    }

    private static Control FindControlRecursive(Control Root, string Id)
    {
        if (Root.ID == Id)
            return Root;

        foreach (Control Ctl in Root.Controls)
        {
            Control FoundCtl = FindControlRecursive(Ctl, Id);

            if (FoundCtl != null)
                return FoundCtl;
        }

        return null;
    }
} 
```

**注意：**`FindControlRecursive()`方法来自这个论坛[帖子](http://forums.asp.net/t/1107107.aspx/1)。

# java - 如何使用spring security访问spring应用程序登录页面中的资源包

> ID：11845242
> 
> 赞同：0
> 
> 时间：2012-08-07T11:44:01.153
> 
> 标签：java, spring, spring-security

我想使用标签在登录页面中使用资源包，`<spring:message code="login.name" />`但出现错误

```
No message found under code 'login.name' for locale 'en_US'. 
```

我在下面提到了这个答案，但它对我不起作用。 [直接调用JSP时我可以在Spring中使用消息资源包吗](https://stackoverflow.com/questions/11448237/can-i-use-in-spring-the-message-resource-bundle-when-calling-a-jsp-directly)

这是从我的 spring security.xml 中截取的示例

```
<sec:global-method-security pre-post-annotations="enabled" />

    <sec:http pattern="/css/**" security="none"/>
    <sec:http pattern="/images/**" security="none"/>
    <sec:http pattern="/js/**" security="none"/>
    <sec:http pattern="/index.jsp" security="none"/>
    <!-- <sec:http pattern="/app/addNewUser.json" security="none"/> -->
    <sec:http pattern="/login.jsp" security="none"/>
    <sec:http use-expressions="true">

        <!--
             Allow all other requests. In a real application you should
             adopt a whitelisting approach where access is not allowed by default
          -->
        <sec:intercept-url pattern="/**" access="isAuthenticated()" />
        <sec:form-login login-page='/login.jsp'
          authentication-failure-url="/login.jsp?login_error=1"
          default-target-url="/index.jsp" />
        <sec:logout logout-success-url="/login.jsp" delete-cookies="JSESSIONID"/>
        <sec:remember-me /> 
```

有什么建议吗？我认为登录请求应该通过控制器路由，然后我将能够访问资源包，但如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:51:03.387

将您的 login.jsp 放在 WEB-INF 目录下。

# active-directory - .htaccess 文件和网站的 ACL

> ID：11845247
> 
> 赞同：0
> 
> 时间：2012-08-07T11:44:29.600
> 
> 标签：active-directory, acl

有谁知道如何使用用户名和密码限制访问您自己的网站。我知道如何编写 .htaccess 并将其放置在正确的位置，但是我遇到了 .htpasswd 文件的问题。我确实将 .thpasswd 文件保存在 wwww 目录之外，然后添加了用户名和密码，但是当我尝试输入该用户名和密码时，它不接受它。任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:48:36.383

您是否指定了 .htpasswd 文件的完整路径？

另外，您的 .htaccess 看起来像这样吗？

```
AuthType Basic
AuthName "My private folder"
AuthUserFile /full/path/to/.passwd
Require valid-user 
```

# emacs - 简单的 elisp 错误

> ID：11845248
> 
> 赞同：0
> 
> 时间：2012-08-07T11:44:30.027
> 
> 标签：emacs, elisp

我对以下代码有一点问题（它应该删除文件并终止缓冲区）：

```
(defun bk-deletes-file ()
  "Closes the buffer and deletes associated file."
  (interactive)
  (let (curFile curBuffer)
    (if (file-exists-p buffer-file-name)
        (progn
          (setq curFile buffer-file-name)
          (delete-file buffer-file-name))
      (setq curFile 1))
    (setq curBuffer (buffer-name))
    (kill-this-buffer)
    (if (stringp curFile)
        (message "I've deleted %s and buried its buffer %s"
                 (file-name-nondirectory curFile) curBuffer)
      (message "I've buried %s buffer" curBuffer)
      ))) 
```

它不起作用：当我对没有文件的缓冲区进行操作时，它给出“如果：错误的类型参数：stringp，nil”，当我对文件的缓冲区进行操作时，它的行为就好像它是缓冲区-没有文件（即它打印“我已经掩埋了 %s 缓冲区” - 而它应该打印“我已经删除了 %s 并掩埋了它的缓冲区 %s”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:15:05.190

据我所知，只有一个错误，这是代码无法在与文件无关的缓冲区上工作。在这种情况下，`buffer-file-name`is`nil`并`file-exists-p`抱怨没有传递字符串。

这是一个可用的版本（对可读性和 lisp 良好实践进行了一些改进）：

```
(defun bk-deletes-file ()
  "Kills the buffer and deletes associated file."
  (interactive)
  (let ((current-file (buffer-file-name))
        (current-buffer (buffer-name)))
    (when current-file
      (delete-file current-file))
    (kill-this-buffer)
    (if current-file
        (message "I've deleted %s and killed its buffer %s"
                 (file-name-nondirectory current-file) current-buffer)
      (message "I've killed %s buffer" current-buffer)))) 
```

# javascript - 在 Javascript 中重新定义事件

> ID：11845249
> 
> 赞同：0
> 
> 时间：2012-08-07T11:44:35.593
> 
> 标签：javascript, jquery, javascript-events

是否可以在 Javascript 中重新定义事件？

示例：如果`F12`按键被按下并且事件发生，我需要浏览器将其作为键盘的键`Tab`来处理。`Space`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:56:05.257

在没有测试以查看这是否有效的情况下，这与我尝试的方式一致。

本质上是监听一个**keydown 事件**，如果按下的键是`F12`，触发另一个**keydownevent**模拟`tab`。

```
$(document).keydown(function(event) {
  if(event.which == 123) { // Chrome code for F12 
    event.preventDefault(); // Stop the default actions for this event.
    var press = jQuery.Event("keydown"); // Create a new keypress event.
    press.ctrlKey = false; // No control key down
    press.which = 9; // Chrome code for tab
    $(document).trigger(press); // Fire the keypress event for tab
  }
}); 
```

我不确定您是否可以在***文档***`keydown`上触发事件，这也只是一个猜测。

# merge - vBulletin 合并旧数据库和新数据库

> ID：11845255
> 
> 赞同：0
> 
> 时间：2012-08-07T11:45:06.230
> 
> 标签：merge, backup, vbulletin

如何将旧数据库与新数据库合并？

我需要将所有东西（主题、评论、用户和所有信息）从一个数据库添加到另一个数据库...

vBulletin 3.7.3（两个数据库）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:54:06.677

您可以使用 ImpEx。[https://www.vbulletin.com/docs/html/impex/](https://www.vbulletin.com/docs/html/impex/)

# c# - 如何从没有 ID 或 ParentID 列的 sql 数据库表中填充树视图？

> ID：11845262
> 
> 赞同：1
> 
> 时间：2012-08-07T11:45:41.297
> 
> 标签：c#, sql, treeview

我正在 VS2008 中开发 WinForm 应用程序，我有一个按以下顺序排列的 sql 表：

```
Region | Contract  | Name
-------------------------
South  | Miami     | John
South  | Miami     | Peter
South  | Calafornia| Brock
North  | New York  | Josh 
```

我想在树视图中显示如下：

```
South
  --Miami
      --John
      --Peter
  --Calafornia
      --Brock
North
  --New York
      --Josh 
```

我可以通过读取数据库表并制作如下所示来完成`datatable`它：

```
ID  | ParentID | Description
-----------------------------
1   |          | South
2   | 1        | Miami
3   | 1        | Calafornia
4   | 2        | John
5   | 2        | Peter
6   | 3        | Brock 
```

我想知道这是否是将数据从表中获取到树视图的唯一方法，或者有人可以用更直观的方法帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:54:45.613

您还可以遍历每个级别字段上按字母顺序返回的所有行，如果级别字段更改其值，则在该级别上创建一个新分支。

您始终将最后一行保留在内存中并从右到左比较字段。

# php - 将标头/内容类型从 cURL 请求传递到当前输出/标头

> ID：11845264
> 
> 赞同：0
> 
> 时间：2012-08-07T11:45:47.527
> 
> 标签：php, curl, http-headers

我不知道如何写一个更好的标题。随意编辑。不知何故，我没有找到任何东西：

我有一个来自 PHP 的 cURL 请求，它返回一个 quicktime 文件。如果我想在浏览器窗口中输出流，这很好用。但我想发送它，因为它是一个真实的文件。如何传递标头并将其设置为脚本的输出，而无需将所有内容存储在变量中。

脚本如下所示：

```
if (preg_match('/^[\w\d-]{36}$/',$key)) {

    // create url
    $url        = $remote . $key;

    // init cURL request
    $ch         = curl_init($url);

    // set options
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);
    curl_setopt($ch, CURLOPT_NOBODY, false);
    curl_setopt($ch, CURLOPT_BUFFERSIZE, 256);
    if (null !== $username) {
        curl_setopt($ch, CURLOPT_USERPWD, $username . ':' . $password);
    }

    // execute request
    curl_exec($ch);

    // close
    curl_close($ch);
} 
```

我可以看到这样的标题和内容，所以请求本身工作正常：

> HTTP/1.1 200 OK X-Powered-By: Servlet/3.0 JSP/2.2 (GlassFish Server Open Source Edition 3.1.2 Java/Oracle Corporation/1.7) 服务器: GlassFish Server Open Source Edition 3.1.2 内容类型: video/quicktime传输编码：分块

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:59:10.200

从 curl 查询中获取 Content-Type：

```
$info = curl_getinfo($ch);
$contentType = $info['content_type']; 
```

并将其发送给客户端：

```
header("Content-Type: $contentType"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T17:13:14.627

因此，在以前的答案的帮助下，我开始工作了。在我看来，它仍然有一个要求，但也许有人有更好的方法。

**出现的问题在哪里：**

1.) 当像这样使用 cURL 时：

```
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_NOBODY, true); 
```

标头未返回内容类型，而仅返回`*\*`.

2.) 使用`curl_setopt($ch, CURLOPT_NOBODY, false);`获得了正确的内容类型以及整个内容本身。所以我可以将所有内容存储在一个变量中，读取标题，发送内容。不知何故，这不是一个真正的选择。

`get_headers($url, 1);`因此，在获取内容之前，我必须使用一次请求标头。

3.) 最后，出现了 HTML5-video-tag 和 jwPlayer 都不想播放 'index.php' 的问题。因此，使用 mod_rewrite 并将 'name.mov' 设置为 'index.php' 它起作用了：

```
RewriteRule ^(.*).mov index.php?_route=$1 [QSA] 
```

### 这是结果：

```
if (preg_match('/^[\w\d-]{36}$/',$key)) {

    // create url
    $url        = $remote . $key;

    // get header
    $header     = get_headers($url, 1);

    if ( 200 == intval(substr($header[0], 9, 3)) ) {
        // create url
        $url        = $remote . $key;

        // init cURL request
        $ch         = curl_init($url);

        // set options
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);
        curl_setopt($ch, CURLOPT_HEADER, false);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);
        curl_setopt($ch, CURLOPT_NOBODY, false);
        curl_setopt($ch, CURLOPT_BUFFERSIZE, 256);
        if (null !== $username) {
            curl_setopt($ch, CURLOPT_USERPWD, $username . ':' . $password);
        }

        // set header
        header('Content-Type: ' . $header['Content-Type']);

        // execute request
        curl_exec($ch);

        // close
        curl_close($ch);

        exit();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:56:58.160

尝试这个：

```
header ('Content-Type: video/quicktime'); 
```

在输出内容之前

# c# - RadGrid 分页在更改页面后无法正常工作

> ID：11845265
> 
> 赞同：5
> 
> 时间：2012-08-07T11:45:47.793
> 
> 标签：c#, asp.net, telerik, radgrid

我的 ASP.Net 应用程序中有一个 RadGrid，我已将 AllowPaging 设置为 True 并将 PageSize 设置为 10，现在它为每个 RadGridPage 加载 10 个项目，这是我想要的，但只要我按下下一页按钮（箭头查看按钮）什么都没有加载，RadGrid 变空。我怎样才能让它正常工作？

```
protected void Page_Load(object sender, EventArgs e)
    {
        PopulateGridOnLoad();
    }
private void PopulateGridOnLoad()
    {
        rgCustomers.DataSource = odsCustomers;
        // your datasource type
        rgCustomers.MasterTableView.VirtualItemCount = 28;
        //your datasource type total/count
        rgCustomers.CurrentPageIndex = rgCustomers.MasterTableView.CurrentPageIndex;
        rgCustomers.Rebind();

    }

protected void grdName_NeedDataSource(object sender, Telerik.Web.UI.GridNeedDataSourceEventArgs e)
    {

        rgCustomers.DataSource = odsCustomers;
        // your datasource type
        rgCustomers.MasterTableView.VirtualItemCount = 28;
        //your datasource type total/count
        rgCustomers.CurrentPageIndex = rgCustomers.MasterTableView.CurrentPageIndex;
        //Donot rebind here
    }

    protected void btnLoad_Click(object sender, EventArgs e)
    {
        odsCustomers.SelectParameters["CustomerFullName"].DefaultValue = txtFullName.Text;
        odsCustomers.SelectParameters["CustomerMelliCode"].DefaultValue = txtMelliCode.Text;
        odsCustomers.SelectParameters["CustomerHomeAddress"].DefaultValue = txtHomeAddressPart.Text;
        odsCustomers.SelectParameters["CustomerWorkAddress"].DefaultValue = txtWorkAddressPart.Text;
        rgCustomers.DataSource = odsCustomers;
        rgCustomers.DataBind();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:49:22.177

经过很长时间我找到了解决方案，问题涉及 2 个小问题：
1.我同时设置了 DataSource（在代码中）和 DataSourceID（属性），但它们不能很好地协同工作
2.我将 AllowPaging 和 AllowCustomPaging 都设置为是的，当它们都为真时，它们都不起作用:)那是你知道的 Telerik 团队，但他们很棒，我在开玩笑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:57:44.013

您必须在设计中设置网格的以下属性

```
 <telerik:RadGrid ID="grdName" 
             AllowPaging="True" 
             AllowCustomPaging="True"
             VirtualItemCount="0" PageSize="15" > 
```

在加载 vb.net 时填充网格

```
Private Sub PopulateGridOnLoad()

    grdName.DataSource = source ' your datasource type
    grdName.MasterTableView.VirtualItemCount = source.Total 'your datasource type total/count
    grdName.CurrentPageIndex = grdName.MasterTableView.CurrentPageIndex
    grdName.Rebind()

End Sub 
```

在加载 c#.net 时填充网格

```
private void PopulateGridOnLoad()
{
    grdName.DataSource = source;
    // your datasource type
    grdName.MasterTableView.VirtualItemCount = source.Total;
    //your datasource type total/count
    grdName.CurrentPageIndex = grdName.MasterTableView.CurrentPageIndex;
    grdName.Rebind();

} 
```

覆盖 NeedDatasource vb.net

```
 Protected Sub grdName_NeedDataSource(sender As Object, e As Telerik.Web.UI.GridNeedDataSourceEventArgs) Handles grdName.NeedDataSource

         grdName.DataSource = source ' your datasource type
         grdName.MasterTableView.VirtualItemCount = source.Total 'your datasource type total/count
         grdName.CurrentPageIndex = grdName.MasterTableView.CurrentPageIndex
        'Donot rebind here
    End Sub 
```

覆盖 NeedDatasource c#

```
protected void grdName_NeedDataSource(object sender, Telerik.Web.UI.GridNeedDataSourceEventArgs e)
{

    grdName.DataSource = source;
    // your datasource type
    grdName.MasterTableView.VirtualItemCount = source.Total;
    //your datasource type total/count
    grdName.CurrentPageIndex = grdName.MasterTableView.CurrentPageIndex;
    //Donot rebind here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:24:47.980

您需要定义“onNeedDataSource”radgrid 事件，您应该在其中重置网格的数据源。

```
 protected void RadGrid_NeedDataSource(object sender, EventArgs e)
      {
          IsNeedDataSource = true;
      } 
```

而不是在页面`OnPreRender`事件中，您应该这样做：

```
 protected override void OnPreRender(object sender, EventArgs e)
      {
           DriverLinksGrid.DataSource = value;
           DriverLinksGrid.DataBind();
      } 
```

我不放心，也许您可​​以在`OnNeedDataSource`事件中直接绑定数据。但是该 `DataBind()`方法可能无法从那里获得。

# c# - 显式方法覆盖的发出隐藏属性

> ID：11845270
> 
> 赞同：5
> 
> 时间：2012-08-07T11:46:07.450
> 
> 标签：c#, reflection.emit

有一个类具有一个属性：

```
public class BaseClass
{
  public virtual string Property1 { get; set; }
} 
```

现在我创建一个带有一些方法覆盖的派生类型：

```
[Test]
public void name ()
{
  var assemblyBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly (new AssemblyName ("Test"), AssemblyBuilderAccess.RunAndSave);
  var moduleBuilder = assemblyBuilder.DefineDynamicModule ("Test.dll");
  var derivedBuilder = moduleBuilder.DefineType ("DerivedClass", TypeAttributes.Public, typeof (BaseClass));

  const MethodAttributes methodAttributes = MethodAttributes.Private | MethodAttributes.Virtual | MethodAttributes.SpecialName | MethodAttributes.NewSlot;

  var getterOverride = derivedBuilder.DefineMethod (
      "get_Property1",
      methodAttributes,
      typeof (string),
      Type.EmptyTypes);
  var getterILGenerator = getterOverride.GetILGenerator();
  getterILGenerator.Emit (OpCodes.Ldnull);
  getterILGenerator.Emit (OpCodes.Ret);
  derivedBuilder.DefineMethodOverride (getterOverride, typeof (BaseClass).GetMethod ("get_Property1"));

  var setterOverride = derivedBuilder.DefineMethod (
      "set_Property1",
      methodAttributes,
      typeof (void),
      new[] { typeof (string) });
  var setterILGenerator = setterOverride.GetILGenerator ();
  setterILGenerator.Emit (OpCodes.Ret);
  derivedBuilder.DefineMethodOverride (setterOverride, typeof (BaseClass).GetMethod ("set_Property1"));

  var derivedType = derivedBuilder.CreateType();
  var props = derivedType.GetProperties (BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);

  assemblyBuilder.Save ("Test.dll");

  Assert.That (props, Has.Length.EqualTo (1));
} 
```

生成的类型不再包含该属性。奇怪的是，如果您将 更改为至少一个方法定义，该属性会再次`methodAttributes`出现`MethodAttributes.Public`。

看起来像一个错误？

**编辑：** peverify 不会给出错误。

**编辑：**（Fabian Schmied 的重要评论）

ECMA-335 Partition II, 10.3.3：“如果一个类型通过 MethodImpl 覆盖了继承的方法，它可以扩大或缩小该方法的可访问性。”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T13:12:38.017

由于[规范](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=2&ved=0CFYQFjAB&url=http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf&ei=0hMhUN7FK5L74QSTyIGYDw&usg=AFQjCNFVe1ujQC6xdlnJU5pRFAZGVfbc0Q)（ECMA-335，II.10.3.3）明确允许人们缩小通过 MethodImpl 覆盖的方法的可见性（“显式覆盖”，由 Reflection.Emit 通过 TypeBuilder.DefineMethodOverride 表示），我相信这确实是一个反射实现中的错误，应通过[Microsoft Connect](https://connect.microsoft.com/VisualStudio)报告。

# jsf - 在 p:datatable 中找不到 PrimeFaces/JSF 组件 ID

> ID：11845275
> 
> 赞同：6
> 
> 时间：2012-08-07T11:46:20.970
> 
> 标签：jsf, jsf-2, primefaces

我刚从 RichFaces 3 和 4 的 PrimeFaces 3.3.1 开始。

我有一个结构的数据表：

```
 <f:facet name="header">
                <h:outputText value="Employees" />
            </f:facet>

            <p:column sortBy="#{emp.lastName}">
                <f:facet name="header">
                    <h:outputText value="Last Name" />
                </f:facet>
                <h:outputText value="#{emp.lastName}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="First Name" />
                </f:facet>
                <h:outputText value="#{emp.firstName}" />
            </p:column>

            ...

            <p:column>
                    <p:commandButton icon="ui-icon ui-icon-trash"
                                     value="Remove"
                                     process="@this"
                                     update="employee-remove-dialog"
                                     oncomplete="employeeRemoveDialog.show();">
                        <f:setPropertyActionListener target="#{employeeManager.currentEmployee}" value="#{emp}" />
                    </p:commandButton>
            </p:column>
        </p:dataTable>

        <p:dialog header="Remove Employee"
                  modal="true"
                  appendToBody="true"
                  widgetVar="employeeRemoveDialog"
                  id="employee-remove-dialog">
            <h:outputText value="Remove employee #{employeeManager.currentEmployee.fullName}?" />
            <f:facet name="footer">
                <p:commandButton icon="ui-icon ui-icon-check"
                                 value="OK"
                                 action="#{employeeManager.deleteEmployee}"
                                 process="@this"
                                 update="employee-list"
                                 oncomplete="employeeRemoveDialog.hide();" />
                <p:commandButton icon="ui-icon ui-icon-close"
                                 value="Cancel"
                                 onclick="employeeRemoveDialog.hide();"
                                 ajax="false"
                                 immediate="true" />
            </f:facet>
        </p:dialog>

    </h:form> 
```

然而 PrimeFaces 抛出异常：

```
09:36:08,961 SEVERE [javax.enterprise.resource.webcontainer.jsf.application] (http-localhost-127.0.0.1-8080-1) Error Rendering View[/employeeList.xhtml]: javax.faces.FacesException: Cannot find component with identifier "employee-remove-dialog" referenced from "j_idt30:employee-list:0:j_idt41".
    at org.primefaces.util.ComponentUtils.findClientIds(ComponentUtils.java:251) [primefaces-3.3.1.jar:]
    at org.primefaces.util.AjaxRequestBuilder.addIds(AjaxRequestBuilder.java:102) [primefaces-3.3.1.jar:]
    at org.primefaces.util.AjaxRequestBuilder.update(AjaxRequestBuilder.java:90) [primefaces-3.3.1.jar:]
    at org.primefaces.renderkit.CoreRenderer.buildAjaxRequest(CoreRenderer.java:195) [primefaces-3.3.1.jar:]
    at org.primefaces.component.commandbutton.CommandButtonRenderer.encodeMarkup(CommandButtonRenderer.java:74) [primefaces-3.3.1.jar:]
    at org.primefaces.component.commandbutton.CommandButtonRenderer.encodeEnd(CommandButtonRenderer.java:49) [primefaces-3.3.1.jar:]
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.primefaces.component.datatable.DataTableRenderer.encodeRegularCell(DataTableRenderer.java:780) [primefaces-3.3.1.jar:]
    at org.primefaces.component.datatable.DataTableRenderer.encodeRow(DataTableRenderer.java:741) [primefaces-3.3.1.jar:]
    at org.primefaces.component.datatable.DataTableRenderer.encodeTbody(DataTableRenderer.java:645) [primefaces-3.3.1.jar:]
    at org.primefaces.component.datatable.DataTableRenderer.encodeRegularTable(DataTableRenderer.java:248) [primefaces-3.3.1.jar:]
    at org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:220) [primefaces-3.3.1.jar:]
    at org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:107) [primefaces-3.3.1.jar:]
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:55) [primefaces-3.3.1.jar:]
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43) [primefaces-3.3.1.jar:]
    at org.primefaces.component.layout.LayoutUnitRenderer.encodeEnd(LayoutUnitRenderer.java:51) [primefaces-3.3.1.jar:]
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_04] 
```

找不到 ID。嗯....我基本上从 RichFaces 复制了结构。用于删除或编辑行的行按钮不需要 :employee-form:... 前缀。**我想知道为什么。**

当为表单提供 ID 并使用 ':' 语法为 PF 组件引用添加前缀时，代码将按预期运行：

```
 <h:form id="employee-form">
        <p:dataTable ...>
            ...
            <p:column>
                <h:panelGrid ...>
                    <p:commandButton ...
                                     update=":employee-form:employee-remove-dialog"
                                     ...>
                        ...
                    </p:commandButton>
                </h:panelGrid>
            </p:column>
        </p:dataTable>
        <p:dialog ...
                  id="employee-remove-dialog">
        </p:dialog>
    </h:form> 
```

**问：**

为什么 ap:datatable 需要为根 JSF ID 添加前缀？也许这是我的代码，但发布的示例对我来说似乎微不足道。在任何情况下，使用它都会导致整个应用程序中的 ID 很长。

我究竟做错了什么？

PS：我在 JBoss AS 7.1.1.Final、Mojarra 2.1.7、PF 3.3.1

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T13:51:55.763

PrimeFaces 使用 提供的标准 JSF 算法按[`UIComponent#findComponent()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#findComponent%28java.lang.String%29)给定的客户端 ID 查找组件。该算法在前面链接的 javadoc 中有详细描述。这是相关性的摘录：

> *搜索表达式*由一个标识符（与 a 的 id 属性完全匹配`UIComponent`）或由字符值链接的一系列此类标识符组成`UINamingContainer#getSeparatorChar`。搜索算法应按如下方式操作，但可以使用替代算法，只要最终结果是一样的：
> 
> *   通过在满足以下条件之一时立即停止来确定`UIComponent`将作为搜索基础的内容：
>     *   如果搜索表达式以分隔符开头（称为“绝对”搜索表达式），则基将是`UIComponent`组件树的根。前导分隔符将被删除，搜索表达式的其余部分将被视为“相对”搜索表达式，如下所述。
>     *   否则，如果这`UIComponent`是一个`NamingContainer`它将作为基础。
>     *   否则，搜索该组件的父级。如果`NamingContainer`遇到 a ，它将是基础。
>     *   否则（如果没有`NamingContainer`遇到）根`UIComponent`将是基础。
> *   搜索表达式（可能在上一步中修改）现在是一个“相对”搜索表达式，用于在基本组件的范围内定位具有匹配 id 的组件（如果有）。比赛进行如下：
>     *   如果搜索表达式是一个简单的标识符，则将该值与 id 属性进行比较，然后递归地遍历 base 的 facets 和 children `UIComponent`（除非`NamingContainer`找到了后代，则不会搜索其自己的 facets 和 children）。
>     *   如果搜索表达式包含多个由分隔符分隔的标识符，则第一个标识符用于`NamingContainer`按照前一个项目符号点中的规则定位 a。然后，将调用`findComponent()`this的方法`NamingContainer`，传递搜索表达式的其余部分。

RichFaces 使用相同的算法[“有一些额外的例外”](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/ArchitectureOverview.html#Re-Rendering)。

> *“reRender”*使用`UIComponent.findComponent()`算法（有一些额外的例外）在组件树中查找组件。

`:`这些额外的例外没有详细描述，`NamingContainer`但众所周知，相对组件 ID（即那些不`NamingContainer`以顺便说一句相对昂贵的工作）。

# iphone - 为什么 NSDateFormatter 在 12 小时设置的 24 小时本地人上返回 NULL？

> ID：11845276
> 
> 赞同：2
> 
> 时间：2012-08-07T11:46:25.527
> 
> 标签：iphone, objective-c, ios, xcode, ipad

嗨，世界专家，

我遇到了一个非常奇怪的问题：

我正在以下列方式格式化一个表示 00-23 的时间的字符串（由 Google 服务返回）：

（传入一个让我们说 14 的字符串，应该输出 14:00 或 2:00 PM，取决于本地用户）

```
+(NSString *) formatTime: (NSString *)timeToBeFormatted {

   NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
   [dateFormat  setDateFormat:@"HH"];
   NSDate *date = [[NSDate alloc] init];
   date = [dateFormat dateFromString:timeToBeFormatted];  

   // Convert date object to desired output format
   [dateFormat setTimeStyle:NSDateFormatterShortStyle];

   timeToBeFormatted = [dateFormat stringFromDate:date];
   return timeToBeFormatted;
} 
```

在全球所有当地人中一切正常。

但是，仅当用户在默认值为 24 小时的本地将其 TIME 格式设置为 12 小时时，格式化程序才会仅对 12-23 之间的值返回 NULL。我会说这很奇怪！

示例：格式化程序 12 之前 12:00 AM 之后 格式化程序 13 之前 之后 (null)

任何想法为什么会发生这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:35:39.683

解决了！（受上述答案的启发）..

为了解决这个问题，我正在创建一个特定的语言环境，然后使用这个语言环境来表达 stringToDate。然后我使用默认用户首选项创建另一个区域设置并使用该区域设置来表达 dateBackToString ..

```
+(NSString *) formatTime: (NSString *)timeToBeFormatted
{
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];

//ADDED//
NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[dateFormat setLocale:enUSPOSIXLocale];

[dateFormat  setDateFormat:@"HH"];
NSDate *date = [[NSDate alloc] init];
date = [dateFormat dateFromString:timeToBeFormatted];  

//ADDED//
NSLocale *defualtLocale = [[NSLocale alloc] init];
[dateFormat setLocale:defualtLocale];

[dateFormat setTimeStyle:NSDateFormatterShortStyle];
timeToBeFormatted = [dateFormat stringFromDate:date];  

return timeToBeFormatted;
} 
```

我想它对于旧设备来说相当昂贵，但在 ARC 和强大的手机时代它可以工作；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:49:59.160

`NSDateFormatter`使用当前的语言环境和时间设置来解析（和输出）时间。如果要使用特定的时间格式，请自行设置日期格式化程序的区域设置。

```
dateFormat.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]; 
```

此外，创建日期格式化程序很*昂贵*，如果您经常调用此函数，您应该将日期格式化程序缓存在静态变量中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T12:08:28.950

我之前也遇到过这个问题。

根据您的需要，使用以下代码来格式化您的日期。

```
+(NSDate *)getGMTDateToView:(NSDate *) availableDate formatter:(NSDateFormatter *)timeFormat {

     NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
     [timeFormat setLocale:enUSPOSIXLocale];

     NSTimeInterval timeZoneOffset = [[NSTimeZone defaultTimeZone] secondsFromGMT]; 
     NSTimeInterval gmtTimeInterval = [availableDate timeIntervalSinceReferenceDate] + timeZoneOffset;

     [timeFormat setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

     [timeFormat setDateStyle:NSDateFormatterShortStyle];
     [timeFormat setTimeStyle:NSDateFormatterShortStyle];

      enUSPOSIXLocale = nil;
      return [NSDate dateWithTimeIntervalSinceReferenceDate:gmtTimeInterval];

} 
```

我从苹果的一个文档中找到了上面的代码（我已经根据我的需要修改了（一点点）它），但现在无法找到这个链接。

# javascript - 在 jQuery 中滑动 3D 轮播

> ID：11845277
> 
> 赞同：1
> 
> 时间：2012-08-07T11:46:30.653
> 
> 标签：javascript, jquery, html, css

我用 jQuery 和 CSS3 创建了一个 3D 轮播。[这](http://jsfiddle.net/upEC6/40/)是我的代码。

如果用户单击下一页或上一页，它会导航到下一页或上一页并产生效果。

现在，我想为我的代码添加滑动支持。我知道有[一堆图书馆](http://www.queness.com/post/11755/11-multi-touch-and-touch-events-javascript-libraries)。

但我不想检测只是刷卡。**用户可能会慢慢滑动，我希望轮播开始慢慢旋转，只需用用户的手指（或鼠标）**。

我可以使用一个库（[来自这些库](http://www.queness.com/post/11755/11-multi-touch-and-touch-events-javascript-libraries)）来检测快速滑动，设置时间和距离阈值，*但是如何检测慢速滑动，以及如何将这种效果添加到我的轮播中？（它应该看起来像一个物理的东西......）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:16:45.823

Bx 滑块是一个很好的选择，如果提供带有自动化等的自动收报机模式并且具有非常好的 API 选项。

# console - virsh 控制台挂在转义字符“^]”处

> ID：11845280
> 
> 赞同：20
> 
> 时间：2012-08-07T11:46:49.617
> 
> 标签：console, virtual-machine

我正在尝试启动一个新建的虚拟机。我坚持以下。想从控制台开始，以便我可以包含此 VM 的用户名和其他信息：

```
 @vmhost02 ~]$ sudo virsh start --console testengine
   Domain testengine started
   Connected to domain testengine
   Escape character is ^] 
```

它挂在那里，不听任何键，除了“^]”

如果您需要更多信息以获取任何想法，请告诉我...

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-11-04T14:17:57.983

## 1)

您可以尝试`/etc/default/grub`在来宾中进行编辑，并确保您拥有：

```
GRUB_TERMINAL=serial
GRUB_SERIAL_COMMAND="serial --unit=0 --speed=115200 --word=8 --parity=no --stop=1" 
```

然后执行：

```
# update-grub
# reboot 
```

## 2)

如果这不起作用，请尝试`quiet`用`console=ttyS0`in `GRUB_CMDLINE_LINUX_DEFAULT`in替换`/etc/default/grub`：

```
GRUB_CMDLINE_LINUX_DEFAULT="... console=ttyS0" 
```

再说一遍：

```
# update-grub
# reboot 
```

## 3)

您可能仍需要尝试：

```
# systemctl enable serial-getty@ttyS0.service
# systemctl start serial-getty@ttyS0.service
# reboot 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T12:15:37.467

您需要定义一个 tty 用作虚拟控制台。如果您可以使用 vnc 或 ssh 访问您的虚拟机，请创建以下文件

```
vi /etc/init/ttyS0.conf 
```

内容应该类似于

```
start on stopped rc RUNLEVEL=[2345]
stop on runlevel [!2345]

respawn
exec /sbin/getty -L 38400 ttyS0 vt102  # This is your term type vt102 
```

保存这些设置，然后从您的主机中保存

```
 virsh destroy [vm-name]; service libvirtd stop; service libvirtd start; virsh start [vm-name] 
```

我在这里停止/启动 libvirt，因为它有时往往不会向 libvirt 发送 SIGTERM。

最后尝试

```
 virsh console [vm-name] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-04T08:26:42.560

可能比 val0x00ff 的解决方案更简单，您应该在 VM 文件`console=ttyS0`的内核行末尾添加`/boot/grub2/grub.cfg`（默认情况下似乎没有这样做）：

```
 (vm)$> grubby --update-kernel=ALL --args="console=ttyS0"
   (vm)$> reboot 
```

然后`virsh console`应按预期工作。

# facebook - 脸书分享红利

> ID：11845282
> 
> 赞同：0
> 
> 时间：2012-08-07T11:46:54.827
> 
> 标签：facebook

我不确定这是否可能。

如果用户在 facebook 上分享我的网站，我想向他们提供一些奖励/免费材料。

可能吗？如果是，如何？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:20:12.273

请小心，因为它可能很容易违反[Facebook 平台政策](https://developers.facebook.com/policy/)：

> 四。应用程序集成点
> 
> 1.  您不得激励用户使用 Facebook 社交渠道（或限制使用内容背后的内容），或暗示激励与使用我们的渠道直接相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:56:46.867

对的，这是可能的。并且有很多不同的方式。

请提供有关您计划如何执行此操作的更多详细信息。或者至少在问“如何”之类的基本问题之前尝试弄清楚。

# caching - F#：尝试记忆成员函数在每次调用时重置缓存？

> ID：11845285
> 
> 赞同：3
> 
> 时间：2012-08-07T11:47:07.527
> 
> 标签：caching, f#, member, memoization

我正在尝试记忆一个类的成员函数，但是每次（由另一个成员）调用该成员时，它都会创建一个全新的缓存和“记忆”函数。

```
member x.internal_dec_rates = 
        let cache = new Dictionary< Basis*(DateTime option), float*float>()
        fun (basis:Basis) (tl:DateTime option) ->
            match cache.TryGetValue((basis,tl)) with
            | true, (sgl_mux, sgl_lps) -> (sgl_mux, sgl_lps)
            | _ ->
                let (sgl_mux, sgl_lps) =
                    (* Bunch of stuff *)
                cache.Add((basis,tl),(sgl_mux,sgl_lps))
                sgl_mux,sgl_lps 
```

我使用“真实世界函数式编程”中的清单 10.5 作为模型。我试过使用记忆高阶函数，但没有帮助。上面的清单直接内置了 memoization。

问题是，当我称之为例如

```
member x.px (basis:Basis) (tl: DateTime option) = 
        let (q,l) = (x.internal_dec_rates basis tl)
        let (q2,l2) = (x.internal_dec_rates basis tl)
        (exp -q)*(1.-l) 
```

执行到 'let cache=...' 行，完全失败了。我放入 (q2,l2) 行以确保它不是范围问题，但似乎不是。

事实上，我使用 Petricek 的代码作为成员函数进行了测试，这似乎有同样的问题：

```
// Not a member function
let memo1 f =
    let cache = new Dictionary<_,_>()
    (fun x ->
        match cache.TryGetValue(x) with
        | true, v -> v
        | _ -> let v = f x
               cache.Add(x,v)
               v
    )

member x.factorial = memo1(fun y->
    if (y<=0) then 1 else y*x.factorial(y-1)) 
```

甚至 x.factorial 的内部递归似乎也为每个级别设置了一个新的“缓存”。

我做错了什么，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T14:29:05.670

回应您对杰克回答的评论，这不必变得乏味。给定一个 memoize 函数：

```
let memoize f =
  let cache = Dictionary()
  fun x ->
    match cache.TryGetValue(x) with
    | true, v -> v
    | _ -> 
      let v = f x
      cache.Add(x, v)
      v 
```

将您的每个函数定义为 let-bound 值并从您的方法中返回它们：

```
type T() as x =
  let internalDecRates = memoize <| fun (basis: Basis, tl: DateTime option) ->
    (* compute result *)
    Unchecked.defaultof<float * float>

  let px = memoize <| fun (basis, tl) ->
    let (q,l) = x.InternalDecRates(basis, tl)
    let (q2,l2) = x.InternalDecRates(basis, tl)
    (exp -q)*(1.-l)

  member x.InternalDecRates = internalDecRates
  member x.Px = px 
```

唯一的“样板”是`let`绑定和调用`memoize`.

编辑：正如 kvb 所指出的，在 F# 3.0 中，自动属性允许更简洁的解决方案：

```
type T() as x =
  member val InternalDecRates = memoize <| fun (basis: Basis, tl: DateTime option) ->
    (* compute result *)
    Unchecked.defaultof<float * float>

  member val Px = memoize <| fun (basis, tl) ->
    let (q,l) = x.InternalDecRates(basis, tl)
    let (q2,l2) = x.InternalDecRates(basis, tl)
    (exp -q)*(1.-l) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T15:54:37.673

我在这里看到很多很长的答案；简短的回答是

```
member x.P = code() 
```

定义一个属性，该属性`P`具有每次访问时运行的*getter*。您需要将缓存创建移动到类的构造函数中，以便它只运行一次。`code()``P`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T15:15:31.607

正如其他人已经说过的，这不能仅通过`member`在 F# 2.0 中定义一个来完成。您需要一个单独的字段（`let`绑定值）用于缓存或用于记忆的本地函数。

正如 kvb 所提到的，在 F# 3.0 中，您可以使用`member val`which 来执行此操作，该属性是在创建对象时初始化的（并且具有存储结果的自动生成的支持字段）。这是一个完整的示例来演示这一点（它将在 Visual Studio 2012 中工作）：

```
open System.Collections.Generic

type Test() = 
  /// Property that is initialized when the object is created
  /// and stores a function value 'int -> int'
  member val Foo = 
    // Initialize cache and return a function value
    let cache = Dictionary<int, int>()
    fun arg ->
      match cache.TryGetValue(arg) with
      | true, res -> res
      | false, _ -> 
          let res = arg * arg
          printfn "calculating %d" arg
          cache.Add(arg, res)
          res
    // Part of the property declaration that instructs
    // the compiler to generate getter for the property
    with get 
```

声明的`with get`部分可以省略，但我将其包含在此处以使示例更清晰（您也可以使用它`with get, set`来获取可变属性）。现在您可以`test.Foo`作为函数调用，它会根据需要缓存值

```
let t = Test()
t.Foo(10)
t.Foo(10) 
```

这种方法的唯一问题是它`t.Foo`实际上被编译为返回函数的属性（而不是被编译为方法）。当您使用 F# 中的类时，这不是一个大问题，但如果您从 C# 中调用它，则会出现问题（因为 C# 会将成员视为 type 的属性`FSharpFunc<int, int>`，这很难使用）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T12:32:52.450

John 是正确的——您需要将`cache`字典移动到该类型的私有、let-bound 成员中。

类型成员的编译方式与`let`模块中的 -bound 值略有不同，这就是行为差异的原因。如果您复制/粘贴`x.internal_dec_rates`方法的主体并将其分配给`let`模块中的 -bound 值，那么它*应该*可以正常工作，因为 F# 编译器会将其编译为一个闭包，该闭包被创建一次，然后分配`static readonly`给模块。

一些其他的提示，很好的衡量标准：

*   类型`member`方法可以使用可选参数——因此如果您愿意，可以稍微简化方法签名。
*   您可以只创建一次缓存键并重复使用它（这也有助于避免错误）。
*   您可以通过为元组指定一个名称（例如，）来简化`(sgl_mux, sgl_lps)`模式匹配代码`value`，因为无论如何您只是返回整个元组。

这是我对您的代码的看法：

```
type FooBar () =
    let cache = new Dictionary< Basis*(DateTime option), float*float>()

    member x.internal_dec_rates (basis : Basis, ?tl : DateTime) =
        let key = basis, tl
        match cache.TryGetValue key with
        | true, value -> value
        | _ ->
            // sgl_mux, sgl_lps
            let value =
                (* Bunch of stuff *)

            cache.Add (key, value)
            value 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T12:17:36.360

您需要将字典移到函数调用之外 - 比如

```
let cache = new Dictionary< Basis*(DateTime option), float*float>()
member x.internal_dec_rates =             
        fun (basis:Basis) (tl:DateTime option) ->
            match cache.TryGetValue((basis,tl)) with
            | true, (sgl_mux, sgl_lps) -> (sgl_mux, sgl_lps)
            | _ ->
                let (sgl_mux, sgl_lps) =
                    (* Bunch of stuff *)
                cache.Add((basis,tl),(sgl_mux,sgl_lps))
                sgl_mux,sgl_lps 
```

这样，缓存在函数调用中持续存在。你`memo1`有同样的问题。在原始版本中，每次调用函数时都会创建一个新的缓存，这样我们就只有一个缓存，它在函数调用中保持不变。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-07T14:54:31.110

除了其他答案，请注意，在 F# 3.0 中，您可以使用自动实现的属性，这些属性将按照您的意愿行事：

```
member val internal_dec_rates = ... 
```

在这里，右手边只被评估一次，但一切都是独立的。

# php - 在 PHP 中存储大量布尔值的高效内存方法

> ID：11845287
> 
> 赞同：1
> 
> 时间：2012-08-07T11:47:18.773
> 
> 标签：php, boolean, memory-efficient

我正在寻找一种在 PHP 内存中存储大量布尔值（最多 2.5*10e11）的有效方法。我的第一个想法是创建一个整数数组并在每个整数中存储一个布尔值：

```
// number of booleans to store
$n = 2.5 * pow(10, 11);

// bits per integer
$bitsPerInt = PHP_INT_SIZE * 8;

// init storage
$storage = array();
for ($i=0; $i<ceil($n/$bitsPerInt); $i++) {
    $storage[$i] = 0;
}

// bits in each integer can be accessed using PHP's bitwise operators 
```

但是，这种解决方案的开销仍然太大：在 32 位环境（PHP_INT_SIZE = 4 字节）中存储 10^8 个布尔值（位）需要 3125000 个整数的数组，消耗约 254 MB 内存，而罕见的10^8 个布尔值的数据只需要 ~ 12 MB。

那么在 PHP (5) 中存储大量布尔值的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:19:14.767

如果你真的必须使用这么多布尔值的数组，你可以使用一个字符串作为 ByteArray 并为字符串中的每个字符打包 8 个布尔值。与原生 PHP 数组相比，它的内存开销很小，但更难使用。[您可以使用ord](http://php.net/manual/en/function.ord.php)和[chr](http://php.net/manual/en/function.chr.php)函数
将字节转换为字符并返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:06:27.283

[也许SPL](http://php.net/manual/es/book.spl.php)中的 SplStack 或 SplFixedArray 类更适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:51:51.887

如果每个值使用一个位会占用太多内存，那么您将需要重新考虑您的设计 - 内存中的所有内容最终都只是位，并且您不能将多个布尔值压缩到一个位中（根据定义）。

# java - Java - Desktop.open() 不会打开视频或音乐

> ID：11845290
> 
> 赞同：1
> 
> 时间：2012-08-07T11:47:34.153
> 
> 标签：java, file, windows-7, desktop

我有以下方法应该打开在关联程序中传递的文件。它适用于大多数文件，但如果我传递任何视频或音乐文件，它会打印`java.io.IOException: Failed to open file:/C:/8GB/Bruno%20Mars%20-%20It%20will%20rain.mp3\. Error message: Access is denied.`（例如）并且不会打开文件，即使它与 Windows Media Player 相关联！

```
private static void openFileinAssociate(File toOpen){
        // Open it using the operating system/environment
        Desktop environment = Desktop.getDesktop();
        if(toOpen.exists()){
            if(!toOpen.isDirectory())
                try{
                    environment.open(new File(toOpen.getAbsolutePath()));
                }catch(Exception ex){
                    ex.printStackTrace();
                    JOptionPane.showMessageDialog(null, "An error occured whilst trying to open the file.", applicationName, JOptionPane.ERROR_MESSAGE);
                }
        }
} 
```

并且这是所要求的堆栈跟踪的其余部分。不过，我真的可以发布更多实际代码，抱歉。

```
at sun.awt.windows.WDesktopPeer.ShellExecute(WDesktopPeer.java:77)
at sun.awt.windows.WDesktopPeer.open(WDesktopPeer.java:54)
at java.awt.Desktop.open(Desktop.java:272)
at main.GraphicUI.openFileinAssociate(GraphicUI.java:1930)
at main.GraphicUI.access$12(GraphicUI.java:1924)
at main.GraphicUI$17.mouseReleased(GraphicUI.java:837)
at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:290)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2713)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:680)
at java.awt.EventQueue$4.run(EventQueue.java:678)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

我正在使用 Windows 7，并且我拥有最新版本的 Java ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:01:11.587

国家的[文件](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#open%28java.io.File%29)，`Desktop.open(File)`即：

> **抛出：** IOException - 如果指定文件没有关联的应用程序**或**关联的应用程序启动失败

尝试将另一个应用程序与相关文件相关联，看看是否可行。此外，检查“Windows 事件日志”以查看 WMP 在打开时是否可能崩溃。

* * *

另一种方法（至少可以在 Windows 上工作）是使用[`Runtime.exec(String)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)-method 和`start [file]`-command 来启动给定文件及其关联的应用程序。

```
Runtime.exec("start \"C:\\Your\\Path with spaces\\file.whatever\""); 
```

**注意**：当您的路径中有空格时，请将路径放在双引号中（需要在字符串中进行转义）。此外，由于反斜杠是字符串的转义字符，因此也需要对其进行转义。

**另请注意**，当没有为给定文件类型分配应用程序时，此方法将打开“选择适当的应用程序”对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-05T11:12:42.273

我遇到了同样的问题。不知道原因，但找到了解决办法。

```
Runtime.getRuntime().exec("rundll32 SHELL32.DLL,ShellExec_RunDLL \"" + StringEscapeUtils.escapeJava(f.getAbsolutePath()) + "\""); 
```

# java - 当 Session.sendToTarget() 返回 false 时？

> ID：11845294
> 
> 赞同：0
> 
> 时间：2012-08-07T11:47:39.130
> 
> 标签：java, quickfix

谁能告诉我，在什么情况下 quickfix.Session.sentToTarget(message, sessionId) 返回 false。实际上，我们尝试向接收器发送订单，它返回 false，没有抛出任何异常。不知道为什么会发生这种情况，每件事似乎都很好。

```
public void sendOrder(SessionID sessionId){
        ClOrdID order_id = new ClOrdID();
        order_id.setValue("121ifkaar");

        OrdType type = new OrdType(OrdType.LIMIT);

        OrderQty quantity = new OrderQty();
        quantity.setValue(new Double(79955));

        NewOrderSingle newOrderSingle = new NewOrderSingle(order_id, new Side(Side.SELL), new TransactTime(), type );
            newOrderSingle.set(new Account("ifkaar123"));
            newOrderSingle.set(new Symbol("USD"));
            newOrderSingle.set(new Currency("United State Doller"));
            Message msg =  (Message)newOrderSingle;
            try{
            boolean result = Session.sendToTarget(msg, sessionId);
            if(result){
                System.out.println("Message Send:   "+result);
            }else{
                System.out.println("Message Not send:   "+result);
            }
            }catch(Exception e){e.printStackTrace();}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:46:16.200

First of all, when you start your Initiator, you will see the HeartBeat messgages (tag 35=0) flowing from and to the counterparty?

# c# - C#插件实现查询

> ID：11845297
> 
> 赞同：1
> 
> 时间：2012-08-07T11:47:47.997
> 
> 标签：c#, plugins

我正在尝试为应用程序编写插件。我唯一得到的是一个定义接口的 dll 资源文件；这是代码：

```
using System;
using System.Drawing;

namespace App.Plugin.Resources.Interface
{
  public interface IAppPlugin
  {
    string Name { get; set; }

    string Description { get; set; }

    string Author { get; set; }

    string Version { get; set; }

    Icon MenuIcon { get; set; }

    EventHandler PluginEventHandler { get; set; }
  }
} 
```

然后我创建了一个实现这个接口的类，让它显示一个消息框，编译 dll，把它放在应用程序的 Plugins 文件夹中，当应用程序执行并启动插件时，它确实显示了消息。

在我看来，该软件提供了执行外部代码的方法（通过插件系统），但实际上并没有提供对任何应用程序属性或方法的访问权限。

**考虑到上述情况，我的问题是：我是否能够使用给定的资源以任何其他方式与主机进程交互（例如，在选择菜单项时获得通知，甚至自己将菜单项添加到主 GUI）或这样做插件系统只是充当应用程序启动器（通过执行我提供的 dll 中的代码）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:53:51.300

这似乎只是一个应用程序启动器，而不是真正的插件，除非有一些约定俗成的策略实现：也许应用程序通过反射查看插件构造函数，并将一些接口传递给主机系统，或者它查找一些标记为 some 的属性传递一些入口点的自定义属性。传递主应用程序入口点的另一个可能的工具是`PluginEventHandler`，尝试在调试中查看调用插件时收到的内容。此外，尝试使用一些工具作为[ILspy](http://wiki.sharpdevelop.net/ILSpy.ashx)来查看插件实例化中是否还有更多内容。

# android - 音频在 Android 4.0.3 中无法正常播放

> ID：11845298
> 
> 赞同：3
> 
> 时间：2012-08-07T11:47:48.073
> 
> 标签：android, audio, sip

我正在开发一个基于 SIP 的应用程序来拨打和接听电话。最近我在不同的设备上测试了该应用程序。首先，我用三星 Galaxy 5(2.2) 和三星 Galaxy y(2.3.6) 进行了测试，当调用双方音频时都很好。

但是当我尝试使用 Galaxy y(2.3.6) 和 Sony XPERIA (4.0.3) 时，声音是单方面的。应用程序在 2.2 和 2.3.6 上运行良好，但在测试 2.3.6 和 4.0.3 时是 ICS 的音频问题。

任何人都知道这个问题或遇到过这种问题，那么请给我一些想法。

谢谢

**编辑：**

我在应用程序中使用编解码器，并且为该编解码器创建了 .so 文件。但我只为**armeabi**处理器创建了 .so 文件。我认为在 Android 4.0.3 中有一个 armeabi-v7a。那么我是否需要为 armeabi-v7a CPU 创建 .so 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:22:20.200

正如 sebweisgerber 所说，有几个可能的故障点，如果呼叫正确建立但没有听到音频，则应该是音频捕获/播放、音频解码/编码或音频传输。如果我们考虑到这适用于 2.3.6 而不是 4.0.3，我会打赌音频捕获/播放或编码。

您是否正在与第三方库合作进行编码？因为，如果这个库试图访问系统的编码库，如[csipsimple](http://code.google.com/p/csipsimple/)项目，大多数用于解码的库名称已从 Gingerbread 更改为 ICS，因此，这将解释“单向”行为。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:06:11.413

**armeabi**也在**armeabi-v7a**上运行。无论如何，处理器类型取决于设备而不是操作系统。即使在姜饼中，您也可以拥有 armeabi-v7 ......

您需要找到包/音频丢失的确切位置。在 SIP 应用程序中，错误链相当长。即使您没有音频（您需要 root 才能在您的设备上运行 Shark/tcpdump），您是否可以使用 Shark 验证两台设备上是否都接收到 RTP 数据包？否则，尝试强制 RTp 代理并在代理上运行 wireshark。

如果数据包是双向传输的，请检查数据包丢失的位置以及它们到达编码器的位置。将日志和检查放在音频传输管道中的任何位置，直到您知道它们去了哪里并向我们提供更多信息。

# c# - 使用 GA 移动跟踪电子邮件打开率

> ID：11845300
> 
> 赞同：1
> 
> 时间：2012-08-07T11:47:52.593
> 
> 标签：c#, asp.net, google-analytics, email-analytics

我在这里查看了有关此主题的几个资源，但找不到合适的答案。

我想使用 GA 移动跟踪来获取电子邮件中的打开率。我打算通过放入`<img src="http://www.website.com/trk.aspx" />`电子邮件来做到这一点。谷歌提供的标准页面如下。我想要实现的是在服务器上重定向运行到图像而不是在页面上显示它，这将有望在电子邮件客户端中工作。

请帮助，除了普通的旧 HTML 和 CSS 之外，我是一个完全的新手。

```
<%@ Page Language="C#" %>
<script language="C#" runat="server">
// Copyright 2010 Google Inc. All Rights Reserved.
private const string GaAccount = "MO-1276714-16";
private const string GaPixel = "/ga.aspx";

private string GoogleAnalyticsGetImageUrl() {
  System.Text.StringBuilder url = new System.Text.StringBuilder();
  url.Append(GaPixel + "?");
  url.Append("utmac=").Append(GaAccount);
  Random RandomClass = new Random();
  url.Append("&utmn=").Append(RandomClass.Next(0x7fffffff));
  string referer = "-";
  if (Request.UrlReferrer != null
      && "" != Request.UrlReferrer.ToString()) {
    referer = Request.UrlReferrer.ToString();
  }
  url.Append("&utmr=").Append(HttpUtility.UrlEncode(referer));
  if (HttpContext.Current.Request.Url != null) {
    url.Append("&utmp=").Append(HttpUtility.UrlEncode(Request.Url.PathAndQuery));
  }
  url.Append("&guid=ON");
  return url.ToString().Replace("&", "&amp;");
}
</script>

<html>
<head>
<title>Email Tracking</title>
</head>
<body>
<% string googleAnalyticsImageUrl = GoogleAnalyticsGetImageUrl(); %>
<img src="<%= googleAnalyticsImageUrl %>" width="1" height="1" border="0" />
</body>
</html> 
```

# jquery - 连续循环3个div

> ID：11845305
> 
> 赞同：0
> 
> 时间：2012-08-07T11:48:07.387
> 
> 标签：jquery, loops, html

我有 3 个不同的 div 内容放在 css 中的同一位置。

```
<div class="sidebanner_01">
abc
</div>

<div class="sidebanner_02">
def
</div>

<div class="sidebanner_03">
ghi
</div> 
```

我需要它们不断变化（彼此之间可能会褪色？）。

对不起一个新手问题。可以使用 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:00:59.703

这是一个***非常基本***的小提琴，应该做你想做的事。请注意，插件要好得多，因为它们具有更多功能，但是如果您想要一个***非常基本***的系统，则应该这样做。

[http://jsfiddle.net/r9ngh/2/](http://jsfiddle.net/r9ngh/2/)

```
var slideShowDivs = ['.sidebanner_01', '.sidebanner_02', '.sidebanner_03'];
var currentID = 0;
var slideShowTimeout = 1000;
$(document).ready(function() {
    for (var i = 1; i < slideShowDivs.length; i++) $(slideShowDivs[i]).hide();
    setTimeout(slideShowChange, slideShowTimeout);
});
function slideShowChange() {
    var nextID = currentID + 1;
    if (nextID >= slideShowDivs.length) nextID = 0;
    $(slideShowDivs[currentID]).stop(true).fadeOut(400);
    $(slideShowDivs[nextID]).stop(true).fadeIn(400, function() {
        setTimeout(slideShowChange, slideShowTimeout);
    });
    currentID = nextID;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:59:37.147

您需要使用 jquery 的fadeIn() 和fadeOut() 函数以及可以使用setTimeout() 或doTimeout() 的定时器函数的不同定时器函数

至于这个资源的相关链接，都给你回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:04:53.483

这可能是一个例子：

```
function slide(){

$('div[class^=sidebanner_]').each(function(i,e){

    var op = $(e).css('opacity') == 0 ? 1 : 0;   
    $(e).animate({'opacity': op}, 1000 * i);

});

}

setInterval(slide, 3000); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-07T12:06:27.750

演示 - 平滑淡入淡出过渡：http: [//jsfiddle.net/gmefu/3/](http://jsfiddle.net/gmefu/3/)

使用类滑块将内容放在 div 中

```
 <div class="slider">abc</div>
 <div class="slider">def</div>
 <div class="slider">ghi</div> 
```

# python - 如何下载使用 django-filebrowser 上传的文件？

> ID：11845309
> 
> 赞同：4
> 
> 时间：2012-08-07T11:48:27.877
> 
> 标签：python, django, django-filebrowser

我正在尝试创建文件对象的下载。该文件是使用 django-filebrowser 添加的，这意味着它被转换为文件的字符串路径。我尝试了以下方法：

```
f = Obj.objects.get(id=obj_id)
myfile = FileObject(os.path.join(MEDIA_ROOT, f.Audio.path))
...

response = HttpResponse(myfile, content_type="audio/mpeg")
response['Content-Disposition'] = 'attachment; filename=myfile.mp3'

return response 
```

下载的文件包含文件位置的路径字符串，而不是文件。任何人都可以就如何访问文件对象提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:57:12.950

```
f = Obj.objects.get(id=obj_id)
myfile = open(os.path.join(MEDIA_ROOT, f.Audio.path)).read()
...

response = HttpResponse(myfile, content_type="audio/mpeg")
response['Content-Disposition'] = 'attachment; filename=myfile.mp3'

return response 
```

笔记！这对内存不友好！由于整个文件被放入内存。您最好使用网络服务器进行文件服务，或者如果您想使用 Django 进行文件服务，您可以使用[xsendfile](https://tn123.org/mod_xsendfile/)或查看此[线程](https://stackoverflow.com/questions/2922874/how-to-stream-an-httpresponse-with-django)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:56:10.083

您需要打开文件并将其二进制内容发送回响应中。所以像：

```
fileObject = FileObject(os.path.join(MEDIA_ROOT, f.Audio.path))
myfile = open(fileObject.path)
response = HttpResponse(myfile.read(), mimetype="audio/mpeg")
response['Content-Disposition'] = 'attachment; filename=myfile.mp3'
return response 
```

希望能得到你正在寻找的东西。

# java - Java Swing - 通知 GUI 模型的变化

> ID：11845313
> 
> 赞同：3
> 
> 时间：2012-08-07T11:48:42.920
> 
> 标签：java, swing, jtable, jcombobox, tablemodel

我在 JTable 中有一个列，它绑定到业务对象列表上的基础布尔属性。我还有一个组合框，它应该选择应该选择的项目。我基本上将以下代码作为处理程序添加到组合框：

```
 macroCombo.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    JComboBox comboBox = (JComboBox) e.getSource();
                    Predicate filter = (Predicate) comboBox.getSelectedItem();
                    for(SelectableKey key : tableEntries){
                        key.setSelected(filter.evaluate(key));
                    }
                }
            }); 
```

我还想根据值更改其他一些控件。目前，表格中只有少数单元格将其状态更改为选中/取消选中。只有当我单击行或选择多行时，UI 才会自行更新。我需要从处理程序中调用来告诉 GUI 重绘自己吗？ALos，如果我修改 JTable 以外的其他控件，我将如何告诉他们更改其状态？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T11:59:50.070

当您更新 中的值时`TableModel`，模型应触发相应的`TableModelEvent`（类型：）`UPDATE`。

如果您`TableModel`的示例从 扩展，您可以在进行更改后`AbstractTableModel`调用该方法。[`fireTableRowsUpdated`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html#fireTableRowsUpdated%28int,%20int%29)

另一种方法是`TableModel`知道何时更新（例如，通过将侦听器添加到它包含的对象）。这允许其他代码简单地更新 中包含的对象`TableModel`，而无需了解`TableModel`. 然后`TableModel`，当它检测到对其包含的对象所做的更改时，它本身将触发该事件。

我更喜欢第二种方法，因为这样可以避免我必须将它传递`TableModel`给我的所有其他类。

有关更多信息，请参阅[表格教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。

# java - 缓冲输入文件和java中的并行处理

> ID：11845315
> 
> 赞同：1
> 
> 时间：2012-08-07T11:48:47.663
> 
> 标签：java, multithreading, io, buffer

我收集了 1000 个 gz 格式的文件。我想并行处理它们，比如每轮 8 个。当我让每个线程打开一个文件并从磁盘读取时，由于许多进程试图从不同的位置读取而导致显着延迟。

我只是想知道是否有一种有效的方法来处理多个文件读取？或者我应该先将所有文件缓冲到内存中（例如所有 8 个文件，然后将缓冲区交给线程）。如果是这样，缓冲文件的最佳方式是什么？缓冲区数组？或一些替代结构？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:51:54.383

我怀疑你用 1000 个线程淹没了你的进程。线程不是特别轻量级的（例如，默认情况下每个线程会占用 512k 的堆栈空间）。

更有效的模型可能是使用线程池（通过[ThreadPoolExecutor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)）并将其调整为系统上同时线程的最佳数量（例如，您在上面建议了 8 个 - 我建议这在某种程度上取决于您拥有的免费 CPU）。

每个`.gz`文件将由一个`Callable`提交给执行程序的文件表示，执行程序将同时运行多个作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:55:58.393

如果您使用 8 个固定大小的池（因为您有 8 个内核），您可能会发现这是相当有效的，因为解压缩文件是 cpu 密集型的。

但是，您可能会发现这并不比使用 4 个线程或仅 2 个线程快，因为真正的瓶颈是从磁盘读取数据。如果是这种情况，您唯一能做的就是获得更快的磁盘。例如镜像磁盘，或使用速度快 20 倍的 SSD。

# asp.net-mvc - 如何检测asp.net webforms 页面？

> ID：11845319
> 
> 赞同：0
> 
> 时间：2012-08-07T11:48:49.710
> 
> 标签：asp.net-mvc, webforms

如果页面在源中包含 Viewstate。这是否意味着该网页正在使用 ASP.NET WebForms 或者这也可能是一个 MVC 项目？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:57:03.677

来源：[ASP.NET MVC 和 Web 窗体集成](http://ofps.oreilly.com/titles/9781449320317/ch_MVCandWebForms.html)

> IIS 需要能够确定给定请求是 ASP.NET MVC 还是 Web 窗体请求。一旦它弄清楚这一点，IIS 就可以将请求发送到适当的处理程序，并且应用程序的行为与您预期的一样。

从那篇好文章中检查这些行。

> 警告
> 
> 注意 ViewState！尽管 Web 窗体和 ASP.NET MVC 都可以访问 ASP.NET 框架的许多部分，但 ASP.NET MVC 根本不支持的 Web 窗体框架中最重要的部分是 ViewState。大多数情况下，ViewState 用于 Web 窗体页面与自身通信，因此在 Web 窗体页面和 ASP.NET MVC 控制器之间交叉发布时遇到 ViewState 问题的可能性很小。
> 
> 但是，在将 Web 窗体应用程序转换到 ASP.NET MVC 时，请注意 Web 窗体应用程序中需要 ViewState 的任何代码——在 ASP.NET MVC 请求过程中，ViewState 数据将不存在，因此取决于就它可能会破裂！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:53:46.273

MVC 中没有 ViewState。因此，如果您找到一个`ViewState`元素，就可以确定它是一个 ASP.NET WebForms 页面。

虽然，由于 ViewState 只是一个名称/id 为“__VIEWSTATE”的常规隐藏输入元素，但是有一个很小的机会，有人添加了这样一个具有该名称和 id 的元素（在非 ASP.NET 页面中）：

```
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE"
  value="contents go here" /> 
```

# git - 搜索并查看从 repo 中删除的文件

> ID：11845321
> 
> 赞同：7
> 
> 时间：2012-08-07T11:48:53.063
> 
> 标签：git, search, version-control

我正在用 git 做一个项目，我知道在过去的某个时间（早在我有代码之前）存在一个名为`exec.js`. 我想查看这个文件的内容。我知道哪个存储库曾经包含此文件，但我不知道确切的路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:48:39.820

您可以在以下位置使用通配符`git log`：

```
git log -- *exec.js 
```

`exec.js`当任何调用的文件被修改时，将为您提供所有日志消息。

一旦你找到删除提交（比如`A`），你可以

```
git checkout A -- *exec.js 
```

这将为您带来最新版本的`exec.js`.

如果要查看 的完整历史记录`exec.js`，可以使用`gitk`：

```
gitk -- *exec.js 
```

这将再次向您显示所有修改。如果您对某个提交特别感兴趣，可以右键单击`gitk`对话框中的文件，然后选择**external diff tool**。这将打开带有**完整**文件的外部差异工具，而不仅仅是补丁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:55:48.477

您可以使用以下命令在日志历史记录中搜索该特定文件 -

如果你没有文件路径，那么

```
git log --diff-filter=D --summary | grep filename 
```

如果你有文件路径，那么你可以使用 -

```
git log -- filepath
git log -n 1 -- filepath 
```

一旦获得修订版，您就可以签出该特定修订版以获取该文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T15:22:19.083

没有简单的方法可以在一两个命令中列出已删除文件的全名及其内容。但是，这里有一个别名可以帮助您入门：

```
$ git config --global alias.find-deleted-file '!f() { for c in `git rev-list HEAD`; do for fnm in `git diff-tree -r --diff-filter=D --name-only $c | grep -P ".*/$1"` ; do echo "$c $fnm" ; git show $c^:$fnm ; echo "" ; done ; done ; } ; f' 
```

这将提供一个 Git别名，该别名将使用提供的文件名模式（由 提供的模式匹配）`find-deleted-file`搜索已删除的文件（使用） ，显示文件被删除的提交、文件的全名及其被删除之前的内容。[`diff-tree`](http://git-scm.com/docs/git-diff-tree)[`grep -P`](http://linux.die.net/man/1/grep)

使用以下示例存储库历史记录：

```
$ git log --all --graph --decorate --oneline --name-only
* 3f3cba1 (HEAD, master) I
I
* 4c8b369 H
E/H
* a008343 rm F
E/F
* 525a127 FG
E/F
E/G
* 3a10f93 initial
A
B
C
D
E/F 
```

您将使用以下命令搜索已删除的`F`文件：

```
$ git find-deleted-file F
a008343eec91fe917078209d44ae93ee72fc5acb E/F
F 
```

# owasp - OWASP 十大更新

> ID：11845324
> 
> 赞同：3
> 
> 时间：2012-08-07T11:49:09.397
> 
> 标签：owasp

自 2010 年以来，OWASP 前 10 名项目是否没有更新？

在 OWASP 上查看了以下站点后，我可以看到可能是这种情况：[https ://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project)

我的公司非常重视 OWASP 合规性，所以我只想确保我是最新的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T00:00:08.513

更新 -- OWASP Top 10 2017 已发布。您总是可以在这里找到最新版本。[https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project)

> OWASP Top 10 2013 今天发布了！你可以在这里下载[http://owasptop10.googlecode.com/files/OWASP%20Top%2010%20-%202013%20-%20RC1.pdf](http://owasptop10.googlecode.com/files/OWASP%20Top%2010%20-%202013%20-%20RC1.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T03:51:27.307

是的，[2010 年](https://www.owasp.org/index.php/Top_10_2010)版的 OWASP Top Ten 是最新版本。在此之前，最后一个版本是[2007 年](https://www.owasp.org/index.php/Top_10_2007)。如果有更多的人自愿参与，它会更频繁地更新，但我们大多数从事 OWASP 项目的人也从事全职工作，因此进度有时会令人沮丧地缓慢。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T00:24:35.027

AFAIK - 正在进行 2013 年更新。

联系 Dave Wichers 以获取更多信息，或者更好的是，在 topten 邮件列表中做志愿者。:)

# javascript - JavaScript 中的延迟/承诺概念是新概念还是函数式编程的传统部分？

> ID：11845328
> 
> 赞同：13
> 
> 时间：2012-08-07T11:49:33.923
> 
> 标签：javascript, functional-programming, history, promise, deferred

我真的很喜欢 jQuery 的延迟/承诺模式或范式的想法，但有时我很难将老化的大脑包裹在更精细的点或特定的实现细节上。

事实上，最近我发现延迟/承诺模式/范式似乎早于 jQuery，并且至少在这些其他 JavaScript 库/框架中也存在：

*   延迟^([的 github](http://documentup.com/medikoo/deferred/))
*   Q^([主页](http://documentup.com/kriskowal/q/))
*   task.js^([主页](http://taskjs.org/))
*   当.js ^([github](https://github.com/cujojs/when))
*   wire.js ^([github](https://github.com/cujojs/wire)，[演示文稿](http://briancavalier.com/presentations/wirejs-2011-jsconf/))
*   YUI^([画廊延迟模块](http://juandopazo.github.com/yui3-gallery/src/gallery-deferred/api/modules/gallery-deferred.html))

我可能错过了一些，包含的东西确实是其他人的一部分，并在该列表中犯了其他错误......请编辑它以更正它或发表评论。

**延期/承诺的概念是“Q”发明的吗？它是与其他 JavaScript 库或框架一起发明的吗？还是它完全早于 JavaScript？**

**如果整个想法传统上是函数式编程的一部分，那么它首先是在哪里完成的，我可以在哪里阅读一般性的概念，而不是这些不同的 JavaScript 实现？**

**还是函数式编程完全不重要？这个概念与并发编程比与函数式编程更相关吗？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T11:54:27.353

[根据维基百科](http://en.wikipedia.org/wiki/Futures_and_promises)：**承诺一词是由 Daniel P. Friedman 和 David Wise 于 1976 年提出的，Peter Hibbard 称之为最终。1977 年，Henry Baker 和 Carl Hewitt 在一篇论文中引入了一个有点类似的未来概念。**

请参阅： 维基百科上的[期货和承诺历史：](http://en.wikipedia.org/wiki/Futures_and_promises#History)

> future 和/或 promise 构造首先在 MultiLisp 和 Act 1 等编程语言中实现。在并发逻辑编程语言中使用逻辑变量进行通信与 future 非常相似。这些从带有 Freeze 和 IC Prolog 的 Prolog 开始，并通过关系语言、并发 Prolog、Guarded Horn Clauses (GHC)、Parlog、Vulcan、Janus、Mozart/Oz、Flow Java 和 Alice ML 成为真正的并发原语。来自数据流编程语言的单赋值 I-var，源自 Id 并包含在 Reppy 的并发 ML 中，非常类似于并发逻辑变量。
> 
> 承诺流水线技术（使用期货来克服延迟）由 Barbara Liskov 和 Liuba Shrira 于 1988 年发明，[12] 并由 Mark S. Miller、Dean Tribble 和 Rob Jellinghaus 在大约 1989 年的 Xanadu 项目的背景下独立发明。 [13]
> 
> 术语 Promise 是由 Liskov 和 Shrira 创造的，尽管他们通过名称 call-stream 来指代流水线机制，现在很少使用。[...]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T18:56:17.267

我认为 JavaScript 中的 deferred/promise 概念首先出现在[Dojo](http://dojotoolkit.org/reference-guide/1.7/dojo/Deferred.html)中（受 Python 的[Twisted](http://twistedmatrix.com/documents/current/core/howto/defer.html)启发），然后出现在[jQuery](http://api.jquery.com/category/deferred-object/)中。

值得注意的时刻是 CommonJS 小组的工作，他们为 JavaScript 的“标准化”承诺付出了很多努力，参见[A](http://wiki.commonjs.org/wiki/Promises/A)、[B](http://wiki.commonjs.org/wiki/Promises/B)和[D](http://wiki.commonjs.org/wiki/Promises/D)提案，在此基础上 Kris Kowal 的[Q](https://github.com/kriskowal/q)（我猜是目前最流行的实现）演变而来。

[Deferred](http://documentup.com/medikoo/deferred)（我是作者）是后来的实现，它最初是受[Q](https://github.com/kriskowal/q)启发的，它的目标是让 Promise 在 JavaScript 中感觉自然，同时也让 Node.js 回调风格的转换变得容易。

但是是的，正如@rsp 所写，promise 是比 JavaScript 本身更古老的概念 :)

# java - Spring 安全访问角色基础知识

> ID：11845329
> 
> 赞同：0
> 
> 时间：2012-08-07T11:49:34.953
> 
> 标签：java, spring, spring-security

我是 Spring Security 的新手，正在学习简单的 Hello World 类程序。

我从这里得到了这个例子：[http ://www.roseindia.net/tutorial/spring/spring3/springsecurity/SpringSecurityCustomLoginForm.html](http://www.roseindia.net/tutorial/spring/spring3/springsecurity/SpringSecurityCustomLoginForm.html)

我无法获得正确的申请流程。

我在 Spring HTML Form 中发现，写成这样，

" 方法='POST'>

当有人写像 j_spring_security_check 时会发生什么？

同样在 security.xml 即服务器端，

```
<http auto-config="true">
    <intercept-url pattern="/index*" access="ROLE_USER" />
    <form-login login-page="/login" default-target-url="/index" authentication-failure-url="/failLogin" />
    <logout logout-success-url="/logoff" />
</http>

<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="admin" password="roseindia" authorities="ROLE_USER" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

那么当像 (http://localhost:8080/SpringSecurityCheckExample/index) 这样的请求第一次出现时会发生什么。

它将转到身份验证管理器标签或 http 标签？

另外，我发现了一些写成的地方，

在这种情况下 cam_create 应该是什么？

另外，如果我们从数据库中检查 uid 和密码，那么我们是否必须在那里为角色创建一列，并为每个 uid 和 pswd 赋予一些角色，或者它是怎么回事？

我很抱歉问了一些愚蠢的事情，但我想清除我的疑问。我也发现了一些很好的教程。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:50:27.197

> Q. 当有人写像 j_spring_security_check 时会发生什么？

--->`j_spring_security_check`是映射`filterProcessesUrl`到`org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter`. 这启用了使用 Spring Security 的身份验证。但请记住，您必须将输入字段`username`和`password`名称设置为`j_username`和`j_password`。

> Q. 当像 (http://localhost:8080/SpringSecurityCheckExample/index) 这样的请求首先命中时会发生什么？

--->

1.  检查用户是否已登录，如果未登录，则将用户带到登录页面。

2.  用户使用凭据登录。如果凭据有效，则将用户带到`/index`页面，如果凭据无效，则将用户带到**authentication-failure-url="/failLogin"**。

> 它将转到身份验证管理器标签或 http 标签？

---> 它既不会去`http`标签也不会`authentication-manager`标签。在服务器启动时，Spring 类和过滤器将读取 XML 值。

> 另外，如果我们从数据库中检查 uid 和密码，那么我们是否必须在那里为角色创建一列，并为每个 uid 和 pswd 赋予一些角色，或者它是怎么回事？

---> 是的，您需要为每个用户分配角色，并且您还必须将角色存储在数据库中。

查看[Spring Security Docs](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/springsecurity-single.html)以获取更多信息。

# solr - 如何使用 solrj 访问 solr

> ID：11845330
> 
> 赞同：1
> 
> 时间：2012-08-07T11:49:34.607
> 
> 标签：solr, solrj

我是 solr 的新手，我正在尝试使用 solrj 索引一些文件。我已经做了[http://lucene.apache.org/solr/api-3_6_1/doc-files/tutorial.html](http://lucene.apache.org/solr/api-3_6_1/doc-files/tutorial.html)。

但现在我想将 solr 与 solrj 一起使用。我想发送 pdf 文件并将它们编入索引。

我已经找到了一个教程，但我得到了 CommonsHttpSolrServer is deprecated 错误。

是否有使用 solrj 的好教程？我需要导入什么罐子等..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:23:59.027

当您下载[apache-solr-src](http://ftp.itu.edu.tr/Mirror/Apache/lucene/solr/3.6.1/)文件时，您可以在 solr 文件夹中找到 solrj 源代码和测试代码。

在以下路径中，您可以找到 Solrj 的测试代码，这将帮助您了解如何使用 Solrj。

> apache-solr/solr/solrj/src/test

# java - Java循环问题

> ID：11845332
> 
> 赞同：4
> 
> 时间：2012-08-07T11:49:49.523
> 
> 标签：java, for-loop

```
Object[] objs = new Object[5];
for (int i = 0; i < 5; ++i) {
    int j = i + 1;
    Object obj = objs[i];
} 
```

对于上述循环，我有两个问题：

1.  是为每个循环迭代创建`j`变量和`obj`引用，还是创建一次然后只重新分配值？
2.  `++i`放置而不是`i++`作为单个指令来增加值是否有任何性能优势？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T11:51:02.113

> 是为每个循环迭代创建 j 变量和 obj 引用，还是创建一次然后只重新分配值？

每次都声明和创建

> 将 ++i 而不是 i++ 作为单个指令来增加值是否有任何性能优势？

并不真地。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T11:52:29.637

> 是为每个循环迭代创建 j 变量和 obj 引用，还是创建一次然后只重新分配值？

每次循环时，都会创建一个新的 int 但 obj 只是对现有对象的引用，因此不会触发对象创建。无论如何，JVM 很可能会为您优化它。

> 将 ++i 而不是 i++ 作为单个指令来增加值是否有任何性能优势？

很可能没有什么值得注意的，而且JVM可能会再次更改您的代码。

底线：使用更具可读性的任何内容，并将变量的范围限制在使用它们的位置。

实际上，JVM 可能会将您的代码更改为此，因为您不在循环中使用局部变量：

```
Object[] objs = new Object[5];
//for (int i = 0; i < 5; ++i) {
//    int j = i + 1;
//    Object obj = objs[i];
//} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T12:04:39.727

我已经比较了代码部分的两个字节码。我没有发现什么特别的。唯一不同的是，在第一个示例代码部分中定义了 4 个局部变量，但在第二个示例代码部分中定义了 5 个局部变量。然而，类似的操作码被执行。由于局部变量名称不同，因此执行不同的操作码。我的意思是在第一个示例中'i 被定义为 local-variable-2'，在第二个示例中'i 被定义为 local-variable-4'。

但是通过 JVM 工具监控代码执行可以提供额外的信息。由于 Java 是一个平台，而 JVM 可能会优化代码执行，我们可能无法通过查看 java 源代码或 java 字节码来确定。

```
 Object[] objs = new Object[5];  
    for (int i = 0; i < 5; ++i) {  
       int j = i + 1;  
       Object  obj = objs[i];  
    }  

 local-variable-0=this
 local-variable-1=objs
 local-variable-2=i
 local-variable-3=j

  stack=2, locals=5, args_size=1 
 0: aload_0 
 1: invokespecial #8                  // Method java/lang/Object."<init>":()V 
 4: iconst_5 
 5: anewarray     #3                  // class java/lang/Object 
 8: astore_1 #store created object referance to local value-1 (objs)
 9: iconst_0 #push 0 on stack
10: istore_2  # local-value-2(i) assigned 0
11: goto          26 
14: iload_2  #load localvalue 2(i)
15: iconst_1 # ++i operation
16: iadd  #i+1
17: istore_3 #assign i+1 into local-variable-3(j)
18: aload_1 # push object in local varable 1 (objs) onto the stack
19: iload_2 # push integer in local variable 2 (i) onto the stack
20: aaload  # retrieve entry
21: astore        4 # push value on stack into local-variable-4 (obj)
23: iinc          2, 1 # local-variable-2(i)++
26: iload_2 
27: iconst_5 
28: if_icmplt     14 for(if i==5)
31: return 

 **************************************************************************
  Object[] objs = new Object[5];  
    int j; 
    Object obj; 
    for (int i = 0; i < 5; ++i) {  
        j = i + 1;  
        obj = objs[i];  
    }  

  local-variable-0=this
 local-variable-1=objs
 local-variable-2=j
 local-variable-3=obj
 local-variable-4=i

  stack=2, locals=5, args_size=1 
     0: aload_0 
     1: invokespecial #8                  // Method java/lang/Object."<init>":()V 
     4: iconst_5 
     5: anewarray     #3                  // class java/lang/Object 
     8: astore_1 #store created object referance to local value-1 (objs)
     9: iconst_0 #push zero on to the stack
    10: istore        4 # local variable-4(i) is assigned zero
    12: goto          28 
    15: iload         4 
    17: iconst_1 
    18: iadd  #i+1
    19: istore_2  #j is set 
    20: aload_1  #load objs
    21: iload         4 #load i
    23: aaload 
    24: astore_3  #obj=objs[i]
    25: iinc          4, 1 # i++
    28: iload         4 
    30: iconst_5 
    31: if_icmplt     15 # if i==5
    34: return 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T12:00:51.823

> 是为每个循环迭代创建 j 变量和 obj 引用，还是创建一次然后只重新分配值？

理论上是的。在实践中优化代码这不会发生。但是，在您的情况下，可能不会优化 5 个（或少于 10,000 个）的循环，因为它的性能可能并不重要。

> 将 ++i 而不是 i++ 作为单个指令来增加值是否有任何性能优势？

对于优化的代码，它们在这里是相同的。对于未优化的代码，差异不太重要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T11:52:38.977

对，他们是！

像这样做 ：

```
Object[] objs = new Object[5]; 
int j = 0;
Object obj = new Object();
for (int i = 0; i < 5; ++i) {   
   j = i + 1;   
   obj = objs[i]; 
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-07T11:54:58.643

是的，他们每次都创建，前缀或后缀 ++ 并不重要。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-07T12:55:54.240

我会尽力回答你的问题......

`Are the j variable and obj reference created for every loop iteration or they are created` `once and then only reassigned the values?`

`int j`每次都**创建**，并且**每次在循环内**`Object Reference Variable obj`也创建，但**不是**。****`OBJECT`****

 ****`Is there any perfomance benefit of putting ++i instead of i++ as a single instruction to` `increment the value?`

在这种情况下，**没有分配** `j's value`，**这无关紧要。******

# c# - 尝试检查 urlreferrer 是否为空

> ID：11845338
> 
> 赞同：6
> 
> 时间：2012-08-07T11:50:01.657
> 
> 标签：c#, asp.net-mvc

我正在使用以下代码行来检查是否`UrlReferrer`是`null`

`@if (Request.UrlReferrer.AbsolutePath == null)`

它只是给了我一个错误：

```
System.NullReferenceException: Object reference not set to an instance of an object. 
```

我是asp的新手并且已经四处寻找，但似乎找不到任何可以回答我的问题的东西。让我感到困惑的是，如果我像这样替换 null ：

`@if (Request.UrlReferrer.AbsolutePath == "/Home")`

...而且 AbsolutePath 确实是 /Home，代码工作正常，当然我在这里要求同样的东西，但是`null`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T11:55:03.750

**如果没有引用者，则**Request.UrlReferrer为 null，这会使您对****Request.UrlReferrer.AbsolutePath**（空对象上的属性）的引用引发空引用异常。**

 **相反，尝试；

```
@if (Request.UrlReferrer == null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T13:55:56.260

如果您需要当前页面的当前路径，您可以使用这个：

```
var absoluteUrl = System.Web.HttpContext.Current.Request.Url.AbsoluteUri;
string returnUrl = absoluteUrl.Replace(System.Web.HttpContext.Current.Request.Url.PathAndQuery, "/"); 
```**

# c# - 检索 Listview 项目并将列数据显示为组合框显示成员，将其他值显示为值成员

> ID：11845339
> 
> 赞同：1
> 
> 时间：2012-08-07T11:50:08.017
> 
> 标签：c#, winforms, listview, combobox

我有一个包含两列名称和编号的列表视图。我想阅读所有这些项目并将名称分配给组合框显示成员并将编号分配给值成员。我尝试过思考要遵循的方法，但无法帮助自己。这是我尝试过的。我应该如何进行？

```
 public class numbers
    {
        public string name;
        public string number;
    }
    public class names : List<numbers>
    { 

    }
    names cname = new names();

    public void addcontacts()
    {
        foreach(ListView lv in bufferedListView1)
        {
         //No idea how to proceed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:03:31.823

首先，您设置自己的类型：

```
public class myContact
{
    public string Name { get; set; }
    public string Number { get; set; }

    public myContact(string name, string number)
    {
        this.Name = name;
        this.Number = number;
    }

    public override string ToString()
    {
        return Name;
    }
} 
```

然后您将所有项目从列表视图传输到组合框，如下所示：

```
foreach (ListViewItem item in listView1.Items)
{
    comboBox1.Items.Add(new myContact(item.Text, item.SubItems[0].Text));
} 
```

此示例假定每个 listviewitem 都拥有名称，并且它的第一个子项拥有数字。

当您将对象添加到组合框时，C# 将使用对象的 ToString() 方法来创建您可以在程序运行时实际看到的内容。您用自己的方法覆盖默认的 ToString() 方法，只返回名称。如果您想使用组合框中的选择，您只需将 selectedItem 投射回 myContact 并可以访问那里的号码。欢迎来到 OOP :)

# java - 我们可以使用 jpcap 过滤 https 数据包吗？

> ID：11845344
> 
> 赞同：1
> 
> 时间：2012-08-07T11:50:55.943
> 
> 标签：java, http, traffic, jpcap

我们可以使用 jpcap 过滤 https 数据包吗？如果是，那么在这些数据包实际提供给用户之前是否对这些数据包进行了特殊处理，或者没有什么特别的？

是否对 https 数据包进行特殊处理，而不是针对 http 数据包或两者都以相同的方式完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:48:37.613

就您的意思而言，您无法使用 JPcap 过滤任何内容。您可以捕获数据包（并使用过滤器来定义捕获的内容），但您不能以任何方式影响它们如何或是否传递到目标应用程序。

# c++ - C++“使用标准:: " vs 调用 std:: 每次

> ID：11845351
> 
> 赞同：3
> 
> 时间：2012-08-07T11:51:08.353
> 
> 标签：c++, namespaces, using

> **可能重复：**
> [使用 std 命名空间](https://stackoverflow.com/questions/1265039/using-std-namespace)
> [为什么是“使用命名空间 std；” 在 C++ 中被认为是一种不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

假设我`#include <iostream>`在 C++ 中使用并且我正在制作一个打印语句。我可以选择：

```
using namespace std;
[...]
cout << "Hello" << endl; 
```

或者

```
using std::cout;
using std::endl;
[...]
cout << "Hello" << endl; 
```

或者

```
std::cout << "Hello" << std::endl; 
```

我被引导相信，也许这是不正确的，第一个应该避免，因为它会给你的程序增加很多不必要的膨胀。不过，不知道第二款和第三款在性能上是否有区别。我看到的大多数使用库的代码都倾向于使用第三种风格。但是对我来说，如果在使用第二种方法时没有权衡，它似乎是最干净、最易读的方法，尤其是当您对相关函数或对象进行大量调用时。

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T11:58:35.247

无论您选择哪种方式，都没有性能差异或“膨胀”。

但是，如果你这样做，例如

```
using namespace std;
using namespace boost; 
```

两个命名空间中的名称冲突会给您带来很多麻烦。

我认为`std::cout`在任何地方都使用 etc 的版本 3 更易于阅读，并且可以避免将来出现名称冲突。

如果这不是您想要的，选项 2 是第二好的，因为它只从命名空间中引入了一些选择名称。请注意，尽管在您的示例中，键入会造成**净损失**，因为 using 声明包含*的*字符比不键入`std::`其余代码所节省的字符多。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-07T11:56:56.820

我的经验法则：永远不要放入`using namespace`.h，但可以随意在`.cpp`文件中使用它。尤其是当它`using namespace std`！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T12:09:03.790

这些中的每一个生成的代码应该完全相同。从一开始就不会有任何膨胀，因为它只是`std`在编译时使所有名称都可用于代码 - 未使用的内容不会被采用。`std`实际使用的唯一名称是`cout`，`endl`因此编译代码的最终结果是相同的。

优点和缺点是：

1.  这将在大多数行中包含更简洁的代码。阅读它的人*可能*不得不更努力地考虑在哪里定义`cout`和`endl`定义，尽管对于像他们这样知名的东西来说，这并不是一个大问题。编译可能需要更长的时间，因为每个名称的可能含义范围稍大一些，但这可能可以忽略不计，除非程序很大并且您正在编译的机器非常弱。如果范围内的某个其他名称空间定义了 an`cout`或 an，`endl`那么名称将不明确，您将被迫使用其他名称空间之一。

2.  1号的优点，只带两个名字就减少了缺点。

3.  与第一名相反。编译器和开发人员在查看源代码时都没有歧义，但代价是更加冗长。

`std`因此，如果这些是整个文件中的唯一用途，则可能值得采用方法 3 ，如果`std`重复使用的东西很多，则使用方法 3，如果您使用`cout`很多`endl`，则使用方法 2，但`std`.

或者您可以一直使用数字 1，除非由于歧义而被迫这样做。

两者并不相互排斥。一个可以做到：

```
using namespace std;
/*...*/
std::cout << "Hello" << std::endl; 
```

这里当然是多余的，但是如果这些在上下文中是模棱两可的，但其他用途不是，或者如果人们可能不熟悉特定名称，那么冗余代码有助于可读性`std::`，我们可能会这样做。`std`还有一些以这种方式给出全名的更常见的名称，并且做常见的事情本身就有助于提高可读性。

尽管如此，除非出现歧义（不会编译），否则所有这些都会在编译时产生相同的程序。

编辑：

我在这里假设一个 .cpp 文件，但我同意其他人关于标题的看法。在 .h 文件中，您强制对包含在其中的所有文件做出决定，并且只需要一个模棱两可就可以做出错误的决定。开发人员也不太容易看到它，因为包含的地方并不靠近使用地点。

如果您真的想在 .h 文件中使用 1 或 2 ，则`using`通过将其放置在命名空间、类或函数中来确定其范围，这样包含该文件的人就不会有任何意外。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-07T11:54:14.833

我通常更喜欢第三种样式，但有时使用第一种或第二种样式更加紧凑和简单。我有时在本地使用它们。例如：

```
void foo()
{
    using namespace std;
    //do stuff
} 
```

但我不喜欢`using namespace std`在模块中全局编写

# python - 在 python multiprocessing.lock() 中需要帮助

> ID：11845353
> 
> 赞同：2
> 
> 时间：2012-08-07T11:51:12.423
> 
> 标签：python, variables, multiprocessing

我正在使用 Python 程序来计算浮点数列表的平均值。遵循程序逻辑：

1.  该程序以一些参数开始。
2.  创建了一个“主机组”列表。
3.  For-in 循环遍历列表“hostgroups”，启动一个函数 worker(hosgroup,var1, var2,var3,...)
4.  在工作者函数内部，使用工作者的一些输入变量构建了两个变量
    *   4a。在工作人员内部，使用工作人员的一些输入变量调用子工作人员函数
    *   4b。subworker 返回一些新变量
    *   4c。回到工人
    *   4d。有些事情已经完成
    *   4d。最后在worker中调用了一个带有一些变量的final-function。

到目前为止，一切顺利！

我的下一步是设置多处理...谁能提供帮助？

更新：这是我的实际方法：

```
class Consumer(multiprocessing.Process):

    def __init__(self, task_queue, result_queue):
        multiprocessing.Process.__init__(self)
        self.task_queue = task_queue
        self.result_queue = result_queue

    def run(self):
        proc_name = self.name
        while True:
            next_task = self.task_queue.get()
            if next_task is None:
                # Poison pill means shutdown
                print '%s: Exiting' % proc_name
                self.task_queue.task_done()
                break
            print '%s: %s' % (proc_name, next_task)
            answer = next_task()
            self.task_queue.task_done()
            self.result_queue.put(answer)
        return

class Task(object):
    def __init__(self, hostgroup, lock):
        self.hostgroup = hostgroup
        self.lock = lock
    def __call__(self):
        print 'Doing something fancy for %s!' % self.hostgroup
        try:
            lock.acquire()
            worker(self.hostgroup,hostsfile,mod_inputfile,outputdir,testmode,backup_dir,start_time,end_time,rrdname,unit,yesterday,now_epoch,rrd_interval,rrd_heartbeat,name)
        finally:
            lock.release()
    def __str__(self):
        return 'str %s' % self.hostgroup

if __name__ == '__main__':
    lock = multiprocessing.Lock()
    # Establish communication queues
    tasks = multiprocessing.JoinableQueue()
    results = multiprocessing.Queue()

    # Start consumers
    num_consumers = multiprocessing.cpu_count() * 2
    print 'Creating %d consumers' % num_consumers
    consumers = [ Consumer(tasks, results)
                  for i in xrange(num_consumers) ]
    for w in consumers:
        w.start()

    # Enqueue jobs
    for hostgroup in hostgroups:
        tasks.put(Task(hostgroup,lock))

    # Add a poison pill for each consumer
    for i in xrange(num_consumers):
        tasks.put(None)

    # Wait for all of the tasks to finish
    tasks.join() 
```

**---> 很好，到目前为止！但是不可能有锁，所有的结果都是一样的......为什么 lock.acquire() 不起作用？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:45:05.520

我发现`multiprocessing.Pool`它比 Queue 类更容易使用。基本设置是

```
from multiprocessing import Pool
p = Pool(processes=<number of processes>)
p.map(function, [a, b, c]) 
```

它将在独立进程中调用`function(a)`, `function(b)`,`function(c)`

# eclipse - eclipse 调试远程 web 应用程序

> ID：11845354
> 
> 赞同：0
> 
> 时间：2012-08-07T11:51:16.633
> 
> 标签：eclipse, debugging, tomcat7, remote-debugging, eclipse-indigo

> 我在 Eclipse IDE 中开发了一个 struts2 Web 应用程序，并将其导出为 war 文件，并将其部署在安装在 windows 服务器中的 tomcat7 中。现在**我需要在本地系统中的 eclipse 中调试这个部署的 Web 应用程序**。 **如何将这些代码带入内部？** 我找到了一些链接，但我坚持如何将这些代码带入本地系统中的 eclipse 中以放置断点。
> 
> 这些是那**几个**链接...
> 
> [链接 1](http://ihategeek.wordpress.com/2007/06/25/remote-debugging-with-eclipse-and-tomcat/) [链接 2](https://stackoverflow.com/questions/1988039/how-do-i-debug-a-remote-application-in-my-eclipse) [链接 3](http://www.skill-guru.com/blog/2010/12/28/setting-up-tomcat-for-remote-debugging/) [链接 4](http://blog.paulgu.com/java/setting-up-tomcat-for-remote-debugging/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T12:42:07.143

..或者只需导航到 bin 文件夹并使用以下命令启动您的 tomcat：

> 卡特琳娜 jpda 开始

无需使用此方法进行任何更改。默认值与 Ingemar 引用的相同：端口 8000 和 transport=dt_socket。确认可与 tomcat 7（准确地说是 .0.40 或更高版本）一起使用。然后按照他的说明在 Eclipse 中设置远程 Java 应用程序调试配置。基本上，只需使用默认值 - 它们匹配（至少在 Juno 和 Kepler 中）。您可能希望在调试时检查“源”选项卡或按需执行此操作。

... 或者，如果您使用 maven，您可能会考虑使用 tomcat7-maven-plugin 插件，它将完全让您留在 eclipse 中。

快乐调试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:14:44.770

**窗户解决方案：**

**首先**你必须修改你的tomcat启动脚本（startup.bat）：

把它放在startup.bat之上

```
set JPDA_ADDRESS=8000
set JPDA_TRANSPORT=dt_socket
... 
```

然后修改以下行（几乎在 startup.bat 的结尾处）：

```
call "%EXECUTABLE%" start %CMD_LINE_ARGS% 
```

到

```
call "%EXECUTABLE%" jpda start %CMD_LINE_ARGS% 
```

现在你可以通过执行startup.bat来启动tomcat，tomcat打开8000端口进行调试。

**第二步**是配置Eclipse：

选择运行 > 调试配置 ...

通过右键单击选择“远程 Java 应用程序”来创建新配置。

检查是否选择了正确的项目。

并修改连接属性。（请注意，端口必须与在 startup.bat 中输入的端口相同（8000），而不是运行您的 struts 应用程序的端口）

最后你必须点击调试

现在你应该可以设置断点了。

# jquery - event.preventDefault(); 当触发器是父 div 不链接？

> ID：11845355
> 
> 赞同：0
> 
> 时间：2012-08-07T11:51:24.243
> 
> 标签：jquery

我有一个 div 作为一些 jQuery 的触发器。div 包含一个链接。有时单击 div 也意味着单击链接，我需要停止链接的行为。

我相信这可以通过 event.preventDefault(); 来完成。但以下在 IE8 中不起作用。我假设这是因为触发器是父 div 而不是实际链接，但我该如何解决这个问题？谢谢

```
$('div#myDiv').click(function(){
    event.preventDefault();
    //other js here
});

<div id="myDiv">
   <a href="#">Link</a>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T11:54:58.787

您没有定义参数：

```
$('div#myDiv').click(function(e){
    e.preventDefault();
    //other js here
}); 
```

`.preventDefault`是 jQuery 事件对象中的 jQuery 垫片。它不存在于 IE 事件对象中。

Chrome 和 IE 定义了一个全局`event`对象，该对象引用这些浏览器中的本机事件对象。出于这个原因，总是使用`e` `ev` `evt`etc 这样你就不会意外地引用这个全局事件对象，因为它不会得到 jQuery 错误修复和规范化。

文档：[http ://api.jquery.com/category/events/event-object/](http://api.jquery.com/category/events/event-object/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:56:00.593

一个简单的解决方案可能是删除`href`锚标记上的属性。虽然我不推荐这个，但可以是一个快速的解决方案。

# javascript - window.scrollTo 在手机中不起作用

> ID：11845371
> 
> 赞同：11
> 
> 时间：2012-08-07T11:52:24.937
> 
> 标签：javascript, mobile

在我的网页的移动视图上，我可以在垂直和水平方向滚动，但这总是从左上角开始。现在我想用 window.scrollTo 或类似的东西将视口设置为我的自定义位置。window.scroll 似乎只适用于桌面浏览器。

知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T12:56:52.543

我终于让它工作了。

我不得不另外使用 setTimeout 函数

```
setTimeout(window.scrollTo(x,y),100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:05:13.537

正如我在评论中所说，如果您的内容**足够大**，这将有效。这意味着大于视口。在不知道细节的情况下，您是否考虑过设置视口元标记？

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

现在，如果您的内容 div 或图像或任何内容超过视口宽度的大小（iPhone 上为 320 个下降），您可以在 x 轴上滚动。但是，对于具有不同值的 y 轴也是如此。

# c# - 通过套接字发送视频帧

> ID：11845372
> 
> 赞同：7
> 
> 时间：2012-08-07T11:52:26.910
> 
> 标签：c#, sockets

我用 Kinect 设备捕获了视频流。我需要通过网络发送这个流。为此，我使用了套接字。她是服务器和客户端中的一段代码：

```
private System.Drawing.Bitmap _CurrentBitmap;
    public ManWindow()
    {
        InitializeComponent();

        this.Loaded += delegate
        {
            BackgroundWorker bw1 = new BackgroundWorker();
            bw1.RunWorkerCompleted += (a, b) => bw1.RunWorkerAsync();
            bw1.DoWork += delegate { SendImage(); };
            bw1.RunWorkerAsync();
        };
    }
    public void SendImage()
    {
        Socket sListen = new Socket(AddressFamily.InterNetwork,
                                    SocketType.Stream,
                                    ProtocolType.Tcp);

        IPAddress IP = IPAddress.Parse("127.0.0.1");
        IPEndPoint IPE = new IPEndPoint(IP, 4321);

        sListen.Bind(IPE);
        sListen.Listen(2);

        while (true)
        {
            Socket clientSocket;
            clientSocket = sListen.Accept();

            var converter = new System.Drawing.ImageConverter();
            byte[] buffer = (byte[])converter.ConvertTo(_CurrentBitmap, typeof(byte[]));
            clientSocket.Send(buffer, buffer.Length, SocketFlags.None);
        }
    } 
```

客户：

```
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        BackgroundWorker bw11111 = new BackgroundWorker();
        bw11111.RunWorkerCompleted += (a, b) => bw11111.RunWorkerAsync();
        bw11111.DoWork += delegate { Recive(); };
        bw11111.RunWorkerAsync();
        Recive();
    }

    public void Recive()
    {
        Socket s = new Socket(AddressFamily.InterNetwork,
                            SocketType.Stream,
                            ProtocolType.Tcp);

        IPAddress IP = IPAddress.Parse("127.0.0.1");
        IPEndPoint IPE = new IPEndPoint(IP, 4321);
        s.Connect(IPE);

        while (true)
        {

            byte[] buffer = new byte[1000000];

            s.Receive(buffer, buffer.Length, SocketFlags.None);

            MemoryStream ms = new MemoryStream(buffer);

            ms.Write(buffer, 0, buffer.Length);
            System.Drawing.Bitmap bitmap = new System.Drawing.Bitmap(ms);

            Dispatcher.BeginInvoke(new Action(() =>
            {
                rgbImage11.Source = bitmap.ToBitmapSource();
            }));

        }
    } 
```

_CurrentBitmap 是从 Kinect 读取的帧，每 1 秒更新一次。客户端启动时，调用Socket Receive方法，接收帧，转换为位图后分配给Image WPF控件。我的问题是这个动作发生在客户端并没有重复循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:19:18.433

我认为您做对了，尽管根据您的需要 UDP 套接字可能更有意义。尝试将您的服务器代码更改为以下内容：

```
while (true)
{
     Socket clientSocket;
     clientSocket = sListen.Accept();

     var converter = new System.Drawing.ImageConverter();
     while(true) // find a better way to determine that the picture is still updating?
    {
        byte[] buffer = (byte[])converter.ConvertTo(_CurrentBitmap, typeof(byte[]));
        clientSocket.Send(buffer, buffer.Length, SocketFlags.None);
    }
} 
```

您正在向您的客户端发送一个位图，然后退出循环。套接字不会保持打开状态，因此您的客户端会运行一次它的循环。

# hibernate - Hibernate - 父子关系中 OneToMany 的引用列

> ID：11845379
> 
> 赞同：0
> 
> 时间：2012-08-07T11:52:43.573
> 
> 标签：hibernate, one-to-many

我有一个 Web 应用程序使用名为“父”的表访问数据库。这个父母有孩子，也可以是更多孩子的父母：

```
public class Thing extends Entity{

  @OneToMany(cascade = {CascadeType.ALL})
  @JoinColumn(name = "parent_id")
  private List<Thing> children = new ArrayList<Thing>();

  @Column
  private String property;

  public String getProperty() { return property; }
  public void setProperty(String property) { this.property = property; } 
```

实体获得了 PK 属性：

```
@Id
@Column(nullable = false)
@GeneratedValue(strategy = GenerationType.TABLE)
private Long id; 
```

现在，我想从 HQL 查询访问事物的 parent_id 属性。如果我这样做：

```
[Another class]
Query queryParents = getEntityManager().createQuery("from Thing t where t.parent_id is null"); 
```

我收到一条错误消息，说该属性不存在。好吧，我将以下内容添加到 Thing 类：

```
@Column
private Long parent_id;
public Long getParent_id() { return parent_id; }
public void setParent_id(Long parent_id) { this.parent_id = parent_id; } 
```

这似乎有效，但我认为这是不正确的，因为它们没有引用同一个实体......事实上，试图更新一个事物对象，最终会出现“org.hibernate.StaleObjectStateException: Row was updated或被另一笔交易删除（或未保存的值映射不正确）：...”。

那么，如果类 Thing 本身没有该属性，那么返回实体“Thing”的 parent_id 属性[数据库有一个对象 Thing 的列“parent_id”] 的正确方法是什么？我是所有这些东西的新手......数据库对于每个事物都有一个 parent_id 字段，对于根父级为空，并且包含其他所有内容的父级 ID。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:09:19.400

使您的关联是双向的：

```
@OneToMany(mappedBy = "parent")
private List<Thing> children;

@ManyToOne
@JoinColumn(name = "parent_id")
private Thing parent; 
```

查询将只是

```
select t from Thing t where t.parent is null 
```

返回父 ID 将是：

```
Long parentId = thing.getParent() == null ? null : thing.getParent().getId(); 
```

[在Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#collections-bidirectional)中阅读有关双向关联的更多信息。

# android - 在 SurfaceView 中缩放位图

> ID：11845380
> 
> 赞同：0
> 
> 时间：2012-08-07T11:52:50.097
> 
> 标签：android, scale, surfaceview

这是我在`Sprite`课堂上的代码：

```
public class Sprite {
    int x, y, vx, vy;
    private Bitmap texture;

    public Sprite(Bitmap texture) {
        this.texture = texture;
    }

    public int getWidth() {
        return texture.getWidth();
    }

    public int getHeight() {
        return texture.getHeight();
    }

    public void draw(Canvas c) {
        c.drawBitmap(texture, x, y, null);
    }
} 
```

和`background.draw(c);`我一起画一个背景。但是背景比屏幕大...

如何将其缩放到屏幕大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:02:42.930

绘制位图时只设置位图的 left 和 top 属性。要缩放它，请调用具有宽度和高度的重载 drawBitmap 方法，[就像这个](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28int%5B%5D,%20int,%20int,%20float,%20float,%20int,%20int,%20boolean,%20android.graphics.Paint%29)

给你的想法：

```
public class Sprite {
    int width, height;
    private Bitmap texture;

    public Sprite(Bitmap texture, width, height) {
        this.texture = texture;
        this.width = width;
        this.height = height;
    }

    public int getWidth() {
        return width;
    }

    public int getHeight() {
        return height;
    }

    public void setWidth(int width) {
        this.width = width;
    }

    public void setHeight(int height) {
        this.height = height;
    }

    public void draw(Canvas c) {
        c.drawBitmap(texture, null, new RectF(0, 0, width, height), null);
    }
} 
```

在创建 Sprite 类的 Activity 中，您必须执行以下操作：

```
Display display = getWindowManager().getDefaultDisplay();
Sprite sprite = new Sprite(bitmap, display.getWidth(), display.getHeight()) 
```

# javacard - pkcs11 对 kona 25 javacard 的支持

> ID：11845383
> 
> 赞同：1
> 
> 时间：2012-08-07T11:52:59.453
> 
> 标签：javacard, pkcs#11

我有一些来自 Tag 系统的[Kona25](http://www.tagsystems.net/downloads/kona25.pdf) javacard，我想用它们来加密和签名我的电子邮件（例如在 Thunderbird 中）。

我搜索了谷歌，发现我的卡需要一个 PKCS11 模块。我搜索了更多，我发现[Charismathics CSSI](http://www.charismathics.com/products/middleware-smart-security-interface/cssi/)为 kona25 卡提供了一个 pkcs11 模块，但我正在寻找一个开源或免费的解决方案。有人有报价吗？

OpenSC 不支持 kona25 卡！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:46:57.747

由于这是一个 JavaCard，OpenSC wiki 中关于 JavaCard-s 的所有内容都适用。如果它是一张“空白”卡，您需要在其上安装一个 PKI 小程序并处理所有相关的事情。

如果您的卡上已经有一个 PKI 小程序和/或如果您无法加载自己的小程序（通常是零售 javacard 的情况），您需要扩展 OpenSC 以支持它。

# sms - Kannel - 发送多部分消息

> ID：11845391
> 
> 赞同：1
> 
> 时间：2012-08-07T11:53:27.353
> 
> 标签：sms, multipart, kannel, sar

我希望有人可以为我阐明多部分短信。

目前，如果字符少于 140 个字符，则 kannel 中的以下配置适用于向移动设备发送消息。我想要的是，如果消息包含 140 个字符，则消息将作为 1 条 SMS 消息而不是 2 或 3 条单独的 SMS 消息传递到手机。

我从我们的上游 SMPP 提供商那里得到的指导是“需要 sar_msg_ref_num 来构建多部分消息”。

但我不知道从哪里开始配置 kannel 以满足该要求。

任何有关相关材料的提示或指示将不胜感激：

```
group = core
admin-port = 13000
smsbox-port = 13001
admin-password = bar
dlr-storage = mysql
log-file = "/var/log/kannel.log"
log-level = 0
box-deny-ip = "*.*.*.*"
box-allow-ip = "x.x.x.x"
sms-combine-concatenated-mo = true

#iTouch SMPP Server

group = smsc
smsc = smpp
smsc-id = iTouch
interface-version = 34
host = SMPP_PROVIDER
port=9500
smsc-username = SMPP_USRNAME
smsc-password = SMPP_PASSWD
system-type = kannel
transceiver-mode = true
msg-id-type = 0x01
throughput = 15

group = smsbox
bearerbox-host = x.x.x.x
sendsms-port = 13013
log-level = 0

group = mysql-connection
id = mydlr
host = localhost
username = kannel
password = **********
database = kannel
max-connections = 1

#DLR DB GROUP
group = dlr-db
id = mydlr
table = msg_pending
field-smsc = smsc
field-timestamp = ts
field-source = source
field-destination = destination
field-service = service
field-url = url
field-mask = mask
field-status = status
field-boxc-id = boxc

group = sendsms-user
        username = linux
        password = t3mp0
            max-messages = 3
            concatenation = 1
            default-sender = 99999999 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T12:51:59.140

在下面的 kannel 1.4.3 文档中：@ [Kannel 1.4.3 文档](http://www.kannel.org/download/1.4.3/userguide-1.4.3/userguide.html)，在 SMS-service 组中，设置以下参数： concatenation bool （长消息可以作为独立的 SMS 消息发送， concatenation = false 或作为 concatenation = 的串联消息发送true。连接的消息由接收设备重新组合成一条长消息。）

例如：

```
max-messages = 3 
concatenation = true 
```

如果我们省略这个参数，那么 kannel 将简单地发送前 160 个字符并省略其余的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:12:39.470

首先尝试使用原生 Kannel 连接功能。它基于 UDH，适用于大多数 SMSC。

如果这不起作用，您可以使用自己的软件拆分消息并使用 Kannel 1.5.0（和 SVN 中继）支持的可选 TLV 设置 SAR_* 参数。[在 kannel文档](http://www.kannel.org/download/kannel-userguide-snapshot/userguide.html#META-DATA)中阅读有关设置可选 SMPP TLV 的更多信息

可能这也会有所帮助：[在 kannel 邮件列表中发帖](http://www.kannel.org/pipermail/users/2010-March/010369.html)

# android - Android：ListView中的项目单击侦听器位于对话框内

> ID：11845392
> 
> 赞同：1
> 
> 时间：2012-08-07T11:53:29.423
> 
> 标签：android

我有这个代码

```
private ListView event_list;
event_list = (ListView) open_event_list.findViewById(R.id.events_list);
loadList(cw.getDate()); 
```

“cw”是一个被点击的 CalendarView，取决于你点击的日期，会出现一个包含 ListView 的对话框......只需看下面的图片里面的 loadList() 方法是

```
Cursor c = dbHelper.retrieveAllEventsWhere(TABLE_NAME, cwdate);
sched_list = new ArrayList<Schedule>();
Schedule s;
c.moveToFirst();
while(!c.isAfterLast())
{
    s = new Schedule();
    s.setId(c.getInt(c.getColumnIndex("_id")));
    s.setTitle(c.getString(c.getColumnIndex("title")));
    s.setDescription(c.getString(c.getColumnIndex("desc")));
    s.setTime(c.getLong(c.getColumnIndex("time")));
    s.setType(c.getString(c.getColumnIndex("type")));

    if(c.getInt(c.getColumnIndex("alarm")) == 1)
        s.setAlarm(true);
    else
        s.setAlarm(false);
    Log.d("dbcheck", s.toString());
    sched_list.add(s);
    c.moveToNext();
}
dbHelper.close();
Log.d("dbcheck", "==============================");
for(Schedule sc: sched_list)
{
    Log.d("dbcheck", sc.toString());
}
ScheduleAdapter schedListAdapter = new ScheduleAdapter(this, R.layout.schedule_list_item, sched_list);
event_list.setAdapter(schedListAdapter);

event_list.setOnItemClickListener(new OnItemClickListener() {

public void onItemClick(AdapterView<?> arg0, View v, int arg2,
        long arg3) {
    TextView sched_id = (TextView) v.findViewById(R.id.sched_id);

    Toast toast = Toast.makeText(ScheduleActivity.this, sched_id.getText().toString(), Toast.LENGTH_SHORT);
    toast.show();

}
}); 
```

所以我的问题是，当我单击对话框内的 ListView 上的一个项目时，它什么也不做，我无法单击或者它不可单击，如图所示没有任何反应

![在此处输入图像描述](../Images/ec5a8617d362c860bd7d979a197d5c73.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:09:45.193

尝试使视图**R.layout.schedule_list_item**的项目不可点击且不可聚焦。

```
android:clickable="false"
android:focusable="false" 
```

**如果R.layout.schedule_list_item**的任何子视图可以获得焦点，则**OnItemClickListener()**可能无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:12:41.637

> 你应该将此代码输入到 event_list.setOnItemClickListener

我认为它会解决你的问题

> `((ScheduleAdapter)event_list.getAdapter()).getItem(0);`

# pdf - 在VB6中将PDF文件加载到图片框中

> ID：11845406
> 
> 赞同：1
> 
> 时间：2012-08-07T11:54:51.050
> 
> 标签：pdf, vb6, file-conversion

我知道在“组件”窗口的“可插入对象”选项卡中，有“Adobe Acrobat 文档”，但这并不是我真正想要的。我不确定“控件”选项卡中的“Adobe Acrobat 7.0 浏览器控件类型库 1.0”（我尝试使用它时出错）是什么。

这是我需要的功能：

*   读取 PDF 文件中有多少页
*   将每个页面作为背景导入图片框

我在这里看到了关于将 PDF 转换为 TIFF 的内容，所以我不确定这是否是最好的方法？[https://stackoverflow.com/questions/2...rt-pdf-to-tiff](https://stackoverflow.com/questions/2...rt-pdf-to-tiff)；我下载了 ImageMagick，但不知道如何使用它，但我会研究它（不确定我是否必须在 ImageMagick 的 convert.exe 上使用“Shell”，或者是否有更好的方法 [比如使用 DLL]）

我也看到了这个：[http ://www.quickpdflibrary.com/faq/c...age-to-pdf.php](http://www.quickpdflibrary.com/faq/c...age-to-pdf.php)

这个看起来很有希望，但它似乎适用于 .NET：[http ://social.msdn.microsoft.com/For...-c1d98a90a2a2/](http://social.msdn.microsoft.com/For...-c1d98a90a2a2/)

我会努力解决这个问题，但是任何能指出我正确方向的东西都会受到赞赏，并且非常感谢详细的信息 - 甚至可能会获得赏金奖励。;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:25:11.583

如果您可以选择商业图书馆，您可以尝试使用[Amyuni PDF Creator ActiveX](http://www.amyuni.com/en/developer/pdfcreatoractivex/)。您可以将其作为查看器嵌入到您的应用程序中，或者您可以使用方法[ExportToJPeg_Method](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_ACTIVE_X/Using_the_PDF_Creator_Control/Methods/Exporting/ExportToJPeg_Method.htm)并将生成的图像加载到您的图片框中。

示例代码：

```
On Error GoTo report_error
With PDFCreactiveX1
.Open "test.pdf", ""
'export the PDF file to JPEG format with the resolution=300 and
'compression level=9.
.ExportToJPeg "exportJpeg.jpg", 300, 9
End With 
```

您还可以通过使用 shell 执行[将 ImageMagic](http://studio.imagemagick.org/pipermail/magick-users/2002-May/002616.html)用于 PDF 到图像的转换：

```
Shell "convert v.pdf v%d.png" 
```

请注意，ImageMagic“PDF 到图像”转换需要 ghostscript，这是一个 GPL 项目，这意味着您不应该在商业闭源应用程序中免费使用它。

*通常免责声明适用于第一个建议*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:35:59.520

嗯，还有另一种选择，即如果您不介意为 .net 模块编写 com 包装器。它似乎并不那么复杂，但对您来说可能不值得花时间。无论如何，它被称为[ItextSharp](http://itextpdf.com/)，遗憾的是，没有人发布 com 包装器以供下载，但 MSDN 有编写它们的操作指南。我希望这有帮助。

资料来源： - 涉及 PDF 文件和 VB6 的个人经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-31T15:07:30.003

如果有人需要预览它，您可以使用此代码段：

```
ShellExecute Me.hWnd, vbNullString, "c:\MyPDFFile.pdf", vbNullString, vbNullString, vbNormalFocus 
```

# windows - Windows 批处理中的 if/then/else 语句

> ID：11845409
> 
> 赞同：17
> 
> 时间：2012-08-07T11:55:01.643
> 
> 标签：windows, batch-file

在 shell 脚本中，我有以下代码：

```
if echo Mr.32 ; then
  echo Success
else
  echo Failed
  exit
fi 
```

Windows 批处理文件的等效语法是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-07T15:48:07.790

我很难想象 ECHO 何时会失败，返回的 ERRORLEVEL 不等于 0。我想如果输出已被重定向到文件并且目标驱动器已满，它可能会失败。

CptHammer 使用 ERRORLEVEL 发布了一个很好的解决方案，尽管它不必要地使用了 GOTO。它可以在没有 GOTO 的情况下使用：

```
ECHO Mr.32
if errorlevel 1 (
  echo Failed
  exit /b
) else (
  echo Success
) 
```

有一种更简单的方法可以对任何命令的 SUCCESS 或 FAILURE 采取措施。

```
command && success action || failure action 
```

在你的情况下

```
ECHO Mr.32&& (
  echo Success
) || (
  echo Failed
  exit /b
) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-07T13:37:04.777

我认为这样的事情可能会奏效：

```
REM run the command
ECHO Mr.32
IF ERRORLEVEL 1 GOTO failLabel

:successLabel
REM put code to execute in case of success here.
ECHO Success
GOTO endLabel

:failLabel
REM put code here that should be executed in case of failure.
ECHO Failed

:endLabel 
```

这假设您要测试的命令（此处：echo MR.32）在成功时返回 0，在失败时返回更高的值（注意：大多数 Windows 操作系统中的 Echo 将不返回任何内容，因此，在此脚本中测试的实际值可能是在脚本之前执行的最后一个命令的返回代码。你可能最好使用以下命令进行测试：“DIR someFile.txt”，如果 somefile.txt 存在则返回 0，否则返回 1。）

正如 dbenham 指出的那样，这种结构确实使用了很多 GOTO。这是因为这个 GOTO 结构是唯一一个在所有 Windows 版本中都能很好理解的结构。随着时间的推移出现了更紧凑的版本，但它们仅适用于最近的 Windows 版本。

# html - 文本漂浮在图像旁边的块中

> ID：11845412
> 
> 赞同：33
> 
> 时间：2012-08-07T11:55:07.180
> 
> 标签：html, css

我想实现以下位置：

两个不同的文本（块中）在图像旁边浮动/内联。（div内的所有内容）。

我一直在尝试使用不同的显示设置（文本的块 + 内联等），但它仍然无法正常工作。

![在此处输入图像描述](../Images/dfbf06dc24cbb243b280a1d3a9320dc4.png)

**HTML：**

```
<div class="res">
<img src="<?php echo 'img/'.$row["sType"].'.png';?>"/>
<span>TITLEe</span>
<span>Description</span>
</div> 
```

**CSS：**

```
.res {

    height:60px;
    background-color:yellow;
    border-bottom:1px solid black;
    text-align:left;

}

.res img {

    margin-top:8.5px;
    margin-left:5px;
    display:inline
}

.res span {

    display:block;
} 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-07T12:04:27.607

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T12:10:11.570

Hi why used to float left you can do this without used `float` as like this

```
<div class="res">
<img src="<?php echo 'img/'.$row["sType"].'.png';?>"/>
<div class="text"><h5>TITLEe</h5>
  <p>Description</p></div>
</div> 
```

**Css**

```
 .res {
    height:60px;
    background-color:yellow;
    border-bottom:1px solid black;
}
img, .text{
vertical-align:top;
}
.text{
display:inline-block;
}
p, h5{
margin:0;
  padding:0;
} 
```

and change to css, class according to your design

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T12:04:12.447

好吧，您可以尝试使用表格的经典方式，尽管不建议使用表格进行布局

```
<table>
  <tr>
    <th><img src="yourimage" /> </th>
    <th >adsasd<br/>adas</th>
  </tr>
</table> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T12:00:20.070

试试这个.....应该可以

html:

```
<div id="testDiv">
    <div class="imgContainer"><img src="path/image.jpg" /></div>
    <div class="textContainer"></div>
</div> 
```

CSS：

```
#testDiv { float:left; width: 360px; }
#testDiv .imgContainer { float:left; width:120px; height:90px; }
#testDiv .textContainer { float:left; width:240px; height:90px; overflow:hidden } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T12:01:28.950

我认为您需要以下内容：

HTML：

```
<div class="wrap">
  <img src="img.jpg" class='left;' />
  <h1 class='right'>TITLE</h1>
  <div class='right'>Element description</div>
</div> 
```

CSS：

```
.wrap { width: 600px; /* Just a sample value */ }
.left { width: 200px; float: left; }
.right { margin-left: 220px; width: 380px;} 
```

这应该够了吧。根据您的需要调整宽度和边距参数。

# android - 如何将数据从服务发送到我的活动？

> ID：11845423
> 
> 赞同：4
> 
> 时间：2012-08-07T11:56:12.643
> 
> 标签：android, service, android-activity

我有两个活动`A`和`B`。我需要从`A`. 该服务将执行一些操作。我需要在活动中使用服务中的一些数据`B`。我怎样才能做到这一点。请用示例代码解释这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:00:28.953

您可以通过 StartService 方法中的意图发送数据。

此代码来自我的服务（StartService 方法）

```
Intent updater = new Intent();
updater.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
updater.putExtra("betHour", pref.getInt("Hr", exampleHour));
updater.putExtra("betMin", pref.getInt("Mn", exampleMinute));
PendingIntent pen = 
    PendingIntent.getBroadcast(getApplicationContext(), 0, updater, PendingIntent.FLAG_UPDATE_CURRENT);

AlarmManager alarmManager = 
    (AlarmManager) getApplicationContext().getSystemService(Context.ALARM_SERVICE);
alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME, SystemClock.elapsedRealtime() + 1000, 60000, pen); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:01:41.960

一种方法是[`ResultReceiver`](http://developer.android.com/reference/android/os/ResultReceiver.html)使用 Bundle 将数据从 Service 发送到 Activity。例如，您可以查看我的博客文章[`here`](http://www.lalit3686.blogspot.in/2012/06/how-to-update-activity-from-service.html)。另一种方法是使用 BroadCastReceiver。当您想在您的活动中接收数据时，您可以注册您的广播并启动广播。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T12:04:58.430

好吧，有很多方法可以做到这一点。

这是一种简单的方法：您可以使用广播来发送这样的消息：

```
Intent i = new Intent();
i.setAction("broadcastName");
//You can put extras here.
context.sendBroadcast(i); 
```

而且，您将需要在您的活动中使用广播接收器：

```
private static class UpdateReceiver extends BroadcastReceiver {
        ListSmartsActivity reference;

        @Override
        public void onReceive(Context context, Intent intent) {
                //You do here like usual using intent
                intent.getExtras(); //
        }
    } 
```

-- 编辑 -- 抱歉忘记提及您需要注册您的广播，只需这样做：

```
updateReceiver = new UpdateReceiver();
registerReceiver(updateReceiver, new IntentFilter("broadcastName")); 
```

您可以根据需要发送尽可能多的广播，也可以注册尽可能多的接收器。

# java - Android Java 日历替代品，具有以下功能

> ID：11845425
> 
> 赞同：4
> 
> 时间：2012-08-07T11:56:20.733
> 
> 标签：java, android, calendar

我需要从星期一开始我的日历。根据今天的日期（07/aug/2012），第一天是星期一，一周中的最少天数是 1，java 为我提供一年中的第 33 周，而 android 32，为什么？

所以我需要具有以下功能的日历替代品。我正在使用的代码：

```
Calendar cal = Calendar.getInstance();
cal.setFirstDayOfWeek(Calendar.MONDAY);
cal.setMinimalDaysInFirstWeek(1);

out("For date : "+df.format(cal.getTime())+" Week = "+cal.get(Calendar.WEEK_OF_YEAR)); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-28T06:40:34.487

# c# - 水晶报表中的公式相关问题

> ID：11845426
> 
> 赞同：2
> 
> 时间：2012-08-07T11:56:22.137
> 
> 标签：c#, .net, crystal-reports

我有学生数据库.. 我生成了学生考试报告，其中包含分数和 PassNumber，如下图所示

![在此处输入图像描述](../Images/7d85496869557a4da5167004684747ee.png)

报告有分组字段 Group by Date 和 ExamNumbers 当前报告可能有 20 页，每组显示在 New Page。

现在我只想显示在 Passnumber 字段中排名前 3 的名称。

我如何使用公式字段来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:32:30.450

您可以有条件地隐藏密码 > 3 的学生的详细信息部分。

转到详细信息部分的选择专家并将其添加为条件抑制公式：`{table.pass_number}>3`。这将阻止除前 3 名（包括并列）之外的所有内容显示在报告中。

编辑：如果您只想显示 GF 中前 3 名学生的姓名，您可以在处理报告时将它们添加到详细信息部分的数组中。为此，您需要在 GH 中创建一个声明/重新初始化数组的公式，详细信息部分中的一个公式，用于检查通过号，如果小于或等于 3，则将其放入数组中（因为可以关系，这会有点棘手，如果需要，您将不得不调整数组的大小）。最后，在 GF 中，您可以使用第三个公式显示数组，该公式通过以下方式将数组的元素连接在一起`join(myarray,', ');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:58:45.887

我相信您可以使用 Group Sort Expert 功能来做到这一点。但是，我阅读了一篇[论坛帖子](http://www.forumtopics.com/busobj/viewtopic.php?p=563625&sid=39866a6eb60d17e41ac8ea9300bf5fe4)，说明如何确保启用该选项。希望能帮助到你。

# .net - COM 类工厂错误：80040154

> ID：11845428
> 
> 赞同：0
> 
> 时间：2012-08-07T11:56:32.790
> 
> 标签：.net, visual-studio, dll

我的客户收到以下错误，我了解到此错误是由于 32 位机器内置的 dll 用于 64 位机器而产生的。但我试图通过在 windows xp 32 位中构建一个简单的 dotnet dll 在本地复制这个错误，并尝试在 64 位机器的 windows 应用程序中引用。我仍然无法复制此错误。错误消息：检索具有 CLSID {} 的组件的 COM 类工厂失败，原因是以下错误：80040154

请提供任何输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:14:18.763

在此处输入代码尝试确保您要查找的 COM dll 在目标机器上正确注册。然后看看客户端，如果客户端是.NET，你应该在x86模式下编译它，以便使用32位activex库。

# playframework-2.0 - 将 Play Framework 2.0 应用程序发布到 CloudFoundry 时，VMC 无法检测应用程序类型

> ID：11845439
> 
> 赞同：1
> 
> 时间：2012-08-07T11:57:05.607
> 
> 标签：playframework-2.0, cloud-foundry

我正在尝试按照Cloud Foundry 博客上的 Play Framework[教程将 playframework 2.0 的 zentasks 示例部署到 cloudfoundry.com。](http://blog.cloudfoundry.com/2012/05/31/cloud-foundry-now-supports-play/)但是在这样做`vmc push --path=/path/to/dist.zip`时，我收到以下警告：

```
Application Name: zentasks
[WARNING] Can't determine the Application Type.
Select Application Type: 
```

我尝试输入“play”作为应用程序类型，但它说`Unknown answer, please try again!` 我在 Max OSX lion（10.7.4）上运行 vmc 0.3.18。JDK版本是1.6.0_33

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:31:49.023

如果 VMC 无法猜测框架并要求您指定它是哪一个，请通过输入框架旁边的数字而不是名称本身来回答。

但是，使用相同版本的 VMC，我能够成功地将其推送到 cloudfoundry.com 并让它正确猜测框架。我从 github.com 克隆了 Play20 存储库，移至 Play20/samples/scala/zentasks 并发出以下命令；

```
$ play dist clean
$ vmc push --path==dist/zentask-1.0.zip 
```

从那里，vmc 正确地猜测了框架并成功地暂存了应用程序 (http://dh-zentask.cloudfoundry.com/login)，你能确认你也做了同样的事情吗？

**编辑**

`vmc login`之前需要`vmc push`

# logging - WindsorContainer 构造错误和日志记录问题

> ID：11845444
> 
> 赞同：1
> 
> 时间：2012-08-07T11:57:14.380
> 
> 标签：logging, castle-windsor, construction

我正在使用 Castle windsor，并使用配置文件启动它（并且真的希望将所有内容都保留在那里），它还拥有一个日志记录工具。

当我在初始化时从 Windsor 收到错误（由于配置错误、缺少依赖项等），我没有启动记录器，因此 - 无法在任何地方写入错误......这是我的代码：

```
 private static ILogger m_Logger { get; set; } 

    static void Main(string[] args)
    {
        try
        {
            // Windsor has missing dependencies
            var container = new WindsorContainer("windsor.xml");
            // Did not make it here...
            var logger = container.Resolve<ILogger>();
            m_Logger.Debug("Testing 123");
        }
        catch (Exception)
        {
            // Logger was not initialized, null reference exception!
            m_Logger.Debug("Testing 123");
        }
    } 
```

我在这里有什么选择？

谢谢，尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:21:36.760

您可以写入 Windows 事件日志：

```
catch (Exception ex)
{
    const string Source = "MySource";
    const string Log = "MyNewLog";

    // Create the source, if it does not already exist.
    if(!EventLog.SourceExists(Source))
    {
        EventLog.CreateEventSource(Source , Log);
    }

    // Create an EventLog instance and assign its source.
    EventLog myLog = new EventLog();
    myLog.Source = Source;

    string eventMessage = string.Empty;

    while (ex != null)
    {
        eventMessage += string.Format("{0}\n{1}\n{2}\n\n",
            ex.GetType().FullName,
            ex.Message,
            ex.SackTrace);
    }

    myLog.WriteEntry(eventMessage);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:31:33.770

这真的吞噬了所有使用 IOC 容器的期望。无论如何，您可以在 catch 块中手动创建您的记录器（例如：log4net）并记录它。

```
...
catch (Exception)
{
    // Create logger here
    m_Logger = new Log4NetLogger(); // Assuming 'windsor.xml' configured to inject a Log4NetLogger
    m_Logger.Debug("Testing 123");
} 
```

# java - Hibernate：按日期和时间对数据进行排序

> ID：11845445
> 
> 赞同：1
> 
> 时间：2012-08-07T11:57:15.800
> 
> 标签：java, mysql, hibernate

在 mysql 数据库中，我有一个名为`bug_list`

```
tables name: bug_list

id    projectId    created_date  
1     5            2012-06-30 13:30:57  
2     5            2012-07-30 10:30:58  
3     5            2012-07-30 12:30:44  
4     5            2012-07-31 13:30:14  
5     5            2012-07-31 14:30:32 
```

我想在第一个结果中按月（如 jan、feb...）
排序，在第二个结果中按工作日（如 mon、tue、wed）
排序并按小时排序（如 2hrs 范围说 8-上午 10 点，晚上 10 点到 12 点....）在第三个结果中

我无法从标准查询中理解。有人可以解释如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:04:52.787

1.  “我想在第一个结果中按月份（如 1 月、2 月 ...）对其进行排序”

    ```
    ORDER BY MONTH(created_date) 
    ```

2.  “在第二个结果中按每周（如星期一、星期二、文）排序”

    ```
    ORDER BY WEEKDAY(created_date) 
    ```

3.  在第三个结果中按小时排序（比如 2 小时范围，比如上午 8 点到 10 点，晚上 10 点到 12 点....）

    ```
    ORDER BY HOUR(created_date) 
    ```

    或按时间跨度

    ```
    ORDER BY CASE
        WHEN HOUR(created_date) BETWEEN 8 AND 9 THEN 1
        WHEN HOUR(created_date) BETWEEN 10 AND 12 THEN 2
        WHEN HOUR(created_date) BETWEEN 13 AND 17 THEN 3
        ELSE 4
        END 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:19:11.753

[在这里](http://blog.hexican.com/2012/05/how-to-customize-hibernate-order-by/)你可以找到一些有用的东西。

从扩展 Hibernate Order 类开始：

```
public class CustomizedOrderBy extends Order {
    private String sqlExpression;

    protected CustomizedOrderBy(String sqlExpression) {
        super(sqlExpression, true);
        this.sqlExpression = sqlExpression;
    }

    public String toSqlString(Criteria criteria, CriteriaQuery criteriaQuery) throws HibernateException {
        return sqlExpression;
    }

    public static Order sqlFormula(String sqlFormula) {
        return new CustomizedOrderBy(sqlFormula);
    }

    public String toString() {
        return sqlExpression;
    }

} 
```

然后使用一些 SQL 公式：

```
criteria.addOrder(CustomizedOrderBy.sqlFormula("MONTH("+sortBy.getInnerName()+")"+ asc));
criteria.addOrder(CustomizedOrderBy.sqlFormula("WEEKDAY("+sortBy.getInnerName()+")"+ asc));
criteria.addOrder(CustomizedOrderBy.sqlFormula("HOUR("+sortBy.getInnerName()+")"+ asc)); 
```

# telerik - 如果 terlrik 控制方法没有找到它正在寻找的东西，它会返回什么？

> ID：11845449
> 
> 赞同：-1
> 
> 时间：2012-08-07T11:57:35.613
> 
> 标签：telerik

示例案例： [http ://www.telerik.com/help/aspnet-ajax/treeview-client-objects-radtreeview.html](http://www.telerik.com/help/aspnet-ajax/treeview-client-objects-radtreeview.html)

在此示例中，如果 .findNodeByValue() 未找到匹配项，将返回什么？空值？0? 不明确的？通常文档会涵盖大量的返回结果。也许我已经习惯了我掌握的更深入的过多信息，我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:17:11.660

做一个简单的：

```
 var tv = $find("TreeView"); 
```

然后将其放入浏览器控制台，您可以执行以下操作：

```
 tv.findNodeByValue("lolwhat"); 
```

这将返回*null*。

# iphone - 如何通过 iPhone 中的 xmlparsing 在 tableview 中显示图像

> ID：11845450
> 
> 赞同：-1
> 
> 时间：2012-08-07T11:57:38.943
> 
> 标签：iphone, ios, uitableview, xml-parsing, uiimage

我是 iphone 开发的新手，我正在使用 NSXML 来解析并能够在 tableview 中显示数据，我还需要在 tableview 中显示图像以及文本。在提交这个问题之前，我已经在互联网上搜索并没找到解决办法，

以下是我用来在表格视图上解析和显示数据的代码

```
NSMutableString *currentNodeContent;
NSXMLParser *parser;
ImageView *currentImage;
bool isStatus;

ViewController *xmlParser;

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 10;
}

-(UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    ImageView *currentImage = [[xmlParser templates]objectAtIndex:indexPath.row];

    UITableViewCell *cell = [UITableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    CGRect nameLabelFrame = CGRectMake(55, 2, 250, 20);
    UILabel *namelabelF = [[UILabel alloc] initWithFrame:nameLabelFrame];
    namelabelF.tag = 0011;
    namelabelF.font = [UIFont boldSystemFontOfSize:12];
    namelabelF.text = @"Template Name :";
    namelabelF.textColor = [UIColor orangeColor];
    [cell.contentView addSubview:namelabelF];

    CGRect nameFrame = CGRectMake(165, 2, 250, 20);
    UILabel *nameLabel = [[UILabel alloc]initWithFrame:nameFrame];
    nameLabel.tag = 0012;
    nameLabel.font = [UIFont boldSystemFontOfSize:12];
    [cell.contentView addSubview:nameLabel];

    CGRect imageFrame = CGRectMake(105, 20, 250, 13);
    UILabel *imageLabel = [[UILabel alloc]initWithFrame:imageFrame];
    imageLabel.tag = 0014;
    imageLabel.font = [UIFont systemFontOfSize:12];
    [cell.contentView addSubview:imageLabel];

    CGRect categoryFrameCreated = CGRectMake(45, 35, 250, 10);
    UILabel *categoryFrameCreatedLabel = [[UILabel alloc] initWithFrame:categoryFrameCreated];
    categoryFrameCreatedLabel.tag = 0015;
    categoryFrameCreatedLabel.font = [UIFont boldSystemFontOfSize:10];
    categoryFrameCreatedLabel.text = @"Category ;";
    categoryFrameCreatedLabel.textColor = [UIColor grayColor];
    [cell.contentView addSubview:categoryFrameCreatedLabel];

    CGRect categoryFrame = CGRectMake(105, 35, 250, 10);
    UILabel *categoryLabel = [[UILabel alloc] initWithFrame:categoryFrame];
    categoryLabel.tag = 0016;
    categoryLabel.font = [UIFont systemFontOfSize:10];
    [cell.contentView addSubview:categoryLabel];

    }

    UILabel *templateLabel = (UILabel *)[cell.contentView viewWithTag:0012];
    templateLabel.text = [currentImage templateName];

    UILabel *imgLabel = (UILabel *)[cell.contentView viewWithTag:0014];
    imgLabel.text = [currentImage imgPath];

    UILabel *categoryLabel = (UILabel *)[cell.contentView viewWithTag:0016];
    categoryLabel.text = [currentImage category];

    return cell;

}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 55;
}

#pragma mark -
#pragma mark Table view delegate

-(id) loadXMLByURL:(NSString *)urlString
{
    templates       = [[NSMutableArray alloc] init];
    NSURL *url      = [NSURL URLWithString:urlString];
    NSData  *data   = [[NSData alloc] initWithContentsOfURL:url];
    parser          = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    [parser parse];

    return self;

}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementname isEqualToString:@"template_maste"]) 
    {
        currentImage = [ImageView alloc];
        isStatus = YES;
    }

    if ([elementname isEqualToString:@"Template_name"]) 
    {
        currentImage = [ImageView alloc];
        isStatus = YES;
    }

}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

    if ([elementname isEqualToString:@"Template_name"]) 
    {
        currentImage.templateName = currentNodeContent;
    }  

    if ([elementname isEqualToString:@"img_path"]) 
    {
        currentImage.imgPath = currentNodeContent;
    }
    if ([elementname isEqualToString:@"Category"]) 
    {
        currentImage.category = currentNodeContent;
    }
    if ([elementname isEqualToString:@"template_maste"]) 
    {
        [self.templates addObject:currentImage];
        currentImage = nil;
        currentNodeContent = nil;
    }

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    xmlParser = [[ViewController alloc] loadXMLByURL:@"http://www.okok.net/services/contacts.aspx?type=gettemplates1&category="];
} 
```

*****--xml 文件-- *** ******

 **```
<template_maste>
<img_id>249</img_id>
<img_path>http://www.okok.net/Templatehtml/small/249.jpg</img_path>
<html_path>/templatehtml/249.html</html_path>
<Added_date>2011-12-28T00:00:00-08:00</Added_date>
<Template_name>Happy New year 4</Template_name>
<Category>Seasonal</Category>
<Template_Status>1</Template_Status>
</template_maste> 
```

我想在 tableview 中显示来自 img_path 的图像

任何解决方案将不胜感激..，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:55:12.063

我会使用[SDWEBIMAGE](https://github.com/rs/SDWebImage/)

使用它，您可以设置一个占位符图像，直到图像被下载，并且一旦图像被下载，它将替换单元格的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:45:49.737

我不确定您要在表格视图单元格中显示什么，但是如果您希望显示图像，那么您需要使用`UIImageView`（现在您只需使用标签来显示图像 URL）
BTW ImageView 是您的模型，所以它是将其称为“视图”不是一个好主意，我会将其更改为 imageData 并添加一个`UIImage`属性来保存实际图像。因此，与向单元格添加标签的方式相同，添加图像视图：

```
UIImageView *imageView = nil;
if(cell == nil) {

       cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

       imageView = [[UIImageView alloc] initWithFrame:someFrame];
       imageView.tag = IMAGE_VIEW_TAG;
       [cell.contentView addSubview:imageView];  

       // ...
    }

    // now you need to configure this cell
    // first thing is to get the model for this cell
    ImageData *imageData = [[xmlParser templates]objectAtIndex:indexPath.row];  

    if (!imageData.image) {
       // we don't have the image yet in our model, so we need to fetch it from the
       // internet according to the image path. 
       // do it in a separate thread to not block the UI 
       dispatch_queue_t imgDownloaderQueue = dispatch_queue_create("imageDownloader", NULL);
       dispatch_async(imgDownloaderQueue, ^{
          NSData * imageData = [[NSData alloc] initWithContentsOfURL: [NSURL URLWithString:imageData.imgPath]];
          UIImage *image = [UIImage imageWithData:imageData];
          [imageData release];
          dispatch_queue_t main_queue = dispatch_get_main_queue();
          dispatch_sync(main_queue, ^{
             imageData.image = image;

             // update UI 
             [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                                          withRowAnimation:UITableViewRowAnimationNone];
          });
       });
       dispatch_release(imgDownloaderQueue);
    }
    else {
       // we already fetched the image, so we just update the image view

       imageView = (UIImageView *)[cell.contentView viewWithTag:IMAGE_VIEW_TAG];  
       imageView.image = imageData.image;
    }
} 
```**

# android - 在 android 中使用 jtransform 时出现异常 - java.lang.NoClassDefFoundError: edu.emory.mathcs.jtransforms.fft.DoubleFFt_1D

> ID：11845451
> 
> 赞同：1
> 
> 时间：2012-08-07T11:57:39.903
> 
> 标签：android, fft, frequency

当我使用 jTransform 时。

[https://sites.google.com/site/piotrwendykier/software/jtransforms](https://sites.google.com/site/piotrwendykier/software/jtransforms)

使用我的应用程序对我的 pcm 数据执行 FFT，我遇到了异常

`java.lang.NoClassDefFoundError: edu.emory.mathcs.jtransforms.fft.DoubleFFt_1D`

虽然我`jtransform.jar`在我的应用程序中添加了。并且还更新了构建路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:57:06.923

1.在项目属性 -> Java 构建路径 -> 排序和导出中，检查所有添加的依赖项以包含在项目类文件中。

2.选择 Android 工具 > 修复项目属性

比运行你的应用程序。它的工作完美。

# vb.net - 如何在实体框架中保存关系实体

> ID：11845453
> 
> 赞同：0
> 
> 时间：2012-08-07T11:57:42.400
> 
> 标签：vb.net, entity-framework-4.1

我有一个字符串列表，我需要将其保存到关系实体中。

```
Dim ts = (From t In _repository.GetSettings _
               Where t.TrustSettingId = Setting.SettingId).First()

For i As Integer = 0 To emailAddressList.Count()
        If(Not emailAddressList(i) = ts.SettingEmailAddresses(i).EmailAddress)
            ts.SettingEmailAddresses.Add(New SettingHREmailAddress() With {.EmailAddress = emailAddressList(i)})
        End If
    Next 
```

我收到以下错误：

```
Unable to update the EntitySet 'TrustSettingEmailAddress' because it has a DefiningQuery and no <InsertFunction> element exists in the <ModificationFunctionMapping> element to support the current operation. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:43:57.250

它告诉您它无法将数据保存到，`TrustSettingEmailAddress`因为它很可能没有在您的模型中定义主键。`DefiningQuery`如果您尝试将没有主键的数据库视图或表添加到 EDMX，则会自动使用。这也发生在多对多关系中的联结表上。

# android - TextView Html 链接活动

> ID：11845454
> 
> 赞同：1
> 
> 时间：2012-08-07T11:57:45.153
> 
> 标签：android

我正在使用此代码`html`从 in 中打开活动。`TextView`它工作正常。

即点击“打开活动”它打开活动。

但我的问题是如何发送数据或参数？

```
 txtLink = (TextView) findViewById(R.id.txtLink);

    txtLink.setText(Html
            .fromHtml("<b>text3:</b>  Text with a "
                    + "<a href=\***"com.example.textviewlink:/linkActivty/\">Open Activity</a>*** "
                    + "created in the Java source code using HTML.<a href=\"http://www.google.com\">Google.com</a>"));
    txtLink.setMovementMethod(LinkMovementMethod.getInstance()); 
```

我如何在上面的代码中发送额外的参数，以便我可以在目标活动中使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:06:11.103

```
String text = "Visit my blog <a href=\"http://sherifandroid.blogspot.com/\">mysite</a> or run the <a href=\"sherif-activity://myactivity?author=sherif&nick=king\">myactivity</a> callback"; 
```

在您调用的活动中使用 Intent。

```
 String author = getIntent().getData().getQueryParameter("author");  
 String nick = getIntent().getData().getQueryParameter("nick"); 
```

看看这个[链接](http://www.sherif.mobi/2011/09/html-and-activity-links-in-textview.html)。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-05-22T09:30:11.820

例如 ：

布局

```
<TextView 
            android:id="@+id/link_web"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="true"
            android:autoLink="web"               
            android:text="@string/link_web"/> 
```

活动

```
TextView.setText(Html.fromHtml("http://www.google.com")); 
```

# c++ - C++ 堆状态差异

> ID：11845458
> 
> 赞同：1
> 
> 时间：2012-08-07T11:58:08.607
> 
> 标签：c++, windows, heap-memory, allocation, application-verifier

有一个用 C++ 编写的大项目。一些 gui 操作（按钮单击）分配 2 MB 内存。这不是内存泄漏，当然内存稍后会被释放。但我需要调查分配了哪些对象以尝试减少内存分配大小。

所以我尝试使用 debug crt

```
OnBtnClick()
{
    //breakpoint1
    _CrtMemState s1;
    _CrtMemCheckpoint( &s1 );

        //The logic itself

    _CrtMemDumpAllObjectsSince(&s1);
    _CrtMemState s2;
    _CrtMemCheckpoint( &s2 );
    _CrtMemState s3;
    if ( _CrtMemDifference( &s3, &s1, &s2) )
        _CrtMemDumpStatistics( &s3 );
    //breakpoint2
} 
```

调试报告说只分配了 400 KB。但是任务管理器中两个断点之间的进程内存增加了 2 MB。

因此，创建的转储是无用的。你能解释一下剩余的内存分配在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:20:32.340

尝试创建一个重载的全局 New 和 Delete 运算符，将每个请求记录到文件中的简单测试。您可以使用静态全局的状态打开/关闭日志记录。这将为您提供一个工具来记录您可以期望控制的每个内存分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:27:47.737

看来我已经找到了问题的原因。

在按钮单击时，创建了几个 Richedit 窗口控件并填充了数据。Windows 可能会绕过运行时分配内存。所以我们在 dbgcrt 报告中看不到它的分配。但是当我关闭richedit句柄时，内存就成功释放了。

因此，我将尝试对所有按钮点击使用一个通用的 Richedit。

感谢大家的帮助！

# windows - Weblogic 服务器在 windows 上启动时间过长

> ID：11845460
> 
> 赞同：1
> 
> 时间：2012-08-07T11:58:20.593
> 
> 标签：windows, weblogic

Weblogic 服务器在 Windows 上启动时间过长。我希望它在 jdeveloper 中运行一些 soa 应用程序。如何让它启动更快？

我找到了一些适用于 linux 的解决方案，但没有找到适用于 windows 的解决方案。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-21T15:41:31.963

如果您运行的是 Windows，有时 Weblogic 会将自身绑定到运行 Windows 的计算机上配置的所有网络适配器。这不会发生在 Linux 系统上。

所有这些冗余绑定最终都会占用几秒钟的启动时间。要最小化它：

1.  启动 Weblogic：在 JDeveloper 上，转至**运行**>**启动服务器实例**
2.  转到[http://localhost:7101/console](http://localhost:7101/console)的管理控制台并以 weblogic/weblogic1 身份登录
3.  在左侧导航栏上，选择**环境**>**服务器**
4.  从表中选择默认服务器
5.  在监听地址字段中，输入：**127.0.0.1**
6.  重启网络逻辑

对于在 Windows 上运行的 Weblogic 实例，这应该会减少至少 30 秒的启动时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:23:14.543

如果超过 30 秒，则有问题。

也许问题不在于 Windows，而是您之前上传到服务器的项目。尝试从**jdeveloper**创建一个新项目并按下`Run`以启动集成的 weblogic：

*   如果时间过多 → 暂时禁用**Windows 防火墙和/或您的防病毒软件**，然后重试
*   如果少于 30 秒 → 生产服务器包含太多项目、太多要加载的库等。

由于公司的防病毒系统，我通常**遇到**很多问题。

# html - 在没有文本的情况下向 div 添加背景？

> ID：11845461
> 
> 赞同：0
> 
> 时间：2012-08-07T11:58:21.553
> 
> 标签：html, css

我试图使用 css 使 html 元素具有背景图像，但背景并非没有例如文本。

社会保障体系——

```
#box {

  background url(.....)

} 
```

HTML -

```
 <div id="box">something</div> // this works bu it shows the text

 <div id="box"></div>          // this is what i want not text just the background url from #box 
```

谢谢 ：））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:59:14.693

在 div 上设置宽度和高度。
示例：
HTML：

```
<div id="myDiv"></div> 
```

CSS：

```
#myDiv {
  background: url(path/to/image.png);
  width: 200px;
  height: 200px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:59:35.007

那是因为 div 是 0x0px。给它一个高度和一个宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:00:54.870

默认情况下，您的 div 具有`auto`高度。您只在输入文本时看到背景的原因`div`是因为`auto`高度正在从`0px`现在需要的任何高度增加到现在有文本到位。

因此，如果您需要固定高度，则需要`height`在 CSS 中设置一个属性：

```
#box
{
   background: url(.....);
   height:100px;
} 
```

您不需要设置宽度，因为[默认情况下](https://stackoverflow.com/a/3906762/370103)`auto`它会自动设置为宽度。

# c# - AJAX 时旋转光标

> ID：11845470
> 
> 赞同：1
> 
> 时间：2012-08-07T11:58:53.080
> 
> 标签：c#, jquery, asp.net, html, ajax

我在很多列出产品的页面中都有一个 WebGrid。我有以下代码将项目添加到用户单击的数据库中：

```
 public bool ToCart(int userId,
            string partNumber,
            string productDescription,
            int units,
            int boxes,
            decimal unitPrice,
            decimal boxPrice,
            decimal lineTotal,
            string orderId,
            DateTime dateTime,
            bool isBoxed)
        {
            bool addedToCart = false;

            try
            {
                Cart cart = new Cart()
                {
                    UserId = userId,
                    PartNumber = partNumber,
                    Description = productDescription,
                    Units = units,
                    Boxes = boxes,
                    UnitPrice = unitPrice,
                    BoxPrice = boxPrice,
                    LineTotal = lineTotal,
                    OrderId = orderId,
                    OrderDate = dateTime,
                    IsBoxed = isBoxed
                };

                database.AddToCarts(cart);
                database.SaveChanges();

                addedToCart = true;
            }
            catch (Exception exception)
            {
                addedToCart = false;
                Console.Write(exception.Message);
            }

            return addedToCart;
        } 
```

对该方法的调用如下所示：

```
ToCart(WebSecurity.CurrentUserId, PartNumber, ProductDescription, Units, Boxes, UnitPrice, BoxPrice, LineTotal, OrderId, DateTime.Now, IsBoxed) 
```

* * *

现在我想把它变成一个 AJAX 帖子。但我不想要任何花哨的东西。我只想在将其添加到购物车时显示正常的 WaitCursor 或 BusyCursor，并`<p>item added to cart</p>`在将其添加到购物车时在页面顶部显示 a 。

![在此处输入图像描述](../Images/4e51e4349f0ac33f5477ab8d0859dcd3.png)

当用户点击他们希望添加到购物车的商品时，我该如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:14:37.237

我建议您为此使用[BlockUI](http://malsup.com/jquery/block/)插件：

```
$('.addToCart').click(function(){
 $.ajax({
       before: function(){$('body').block()} ,//will be called before the ajax call begins
       complete: function(){$('body').unblock()}, //will be called when ajax completes, whether with error or success
       //on success, append message to top
       success: function(){
              var message = "<p>item added to cart</p>";
              $(message).appendTo('.topDiv');
    }

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:19:14.510

创建一个`div`（在下面的示例中，我给了我的一个`id`loadingdiv *）*，其中包含您喜欢的任何内容（通常是动画 GIF - 查看[http://ajaxload.info](http://ajaxload.info)）。然后，使用 jQuery，您可以这样做：

```
<div id="loadingdiv"><img src="spinning-image.gif" /></div>

$("#loadingdiv").
    hide().
    ajaxStart(function() { $(this).show(); }).
    ajaxStop(function() { $(this).hide(); }); 
```

或者，如果您只想更改光标，请执行以下操作：

```
$(document).
    ajaxStart(function() { $(document).css("cursor", "wait"); }).
    ajaxStop(function() { $(document).css("cursor", "default"); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:19:22.820

在您的代码中添加：

```
using System.Web.Services; 
```

并创建要使用 AJAX 调用的方法，将 WebMethod 属性添加到方法中：

```
 [WebMethod]
    public static string CallAJAX(string Iwant)
    {
        if (string.IsNullOrEmpty(Iwant)) throw new Exception("What You want ?");
        return "One " + Iwant + " for You";
    } 
```

这就是所有 C# 部分。现在从您的页面调用它，将脚本管理器添加到页面表单：

```
<asp:ScriptManager ID="ScriptManager" runat="server" EnablePageMethods="true" /> 
```

添加 JavaScript 方法：

```
<script type="text/javascript">

    function CallAJAX() {
        var Iwant = 'ice cream';
        PageMethods.CallAJAX(Iwant, OnSucceeded, OnFailed);
        //set wait cursor
        jQuery("body").css("cursor", "progress");
    }

    function OnSucceeded(result) {
        alert(result);
        //set cursor to normal
        jQuery("body").css("cursor", "auto");
    }

    function OnFailed(error) {
        alert(error.get_message());
        //set cursor to normal
        jQuery("body").css("cursor", "auto");
    }

</script> 
```

使用 PageMethods.CallAJAX(Iwant, OnSucceeded, OnFailed); 您调用服务器 C# 方法并附加响应事件。然后您可以将它与 ASP.NET 按钮一起使用，例如：

```
<asp:Button runat="server" Text="ajax call" OnClientClick="CallAJAX(); return false;" /> 
```

# javascript - 如何在 node.js (express.js) 中获取浏览器语言？

> ID：11845471
> 
> 赞同：57
> 
> 时间：2012-08-07T11:59:03.913
> 
> 标签：javascript, node.js, express

用户请求一些页面，我想知道（在服务器端）他/她的浏览器中的语言是什么。所以我可以用正确的消息渲染模板。

在客户端很容易：

```
var language = window.navigator.userLanguage || window.navigator.language 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-08-07T12:05:38.190

您可以使用**req.headers["accept-language"]**来获取用户在其浏览器中设置的语言/区域设置。

为了更容易获得支持，您可能需要查看[locale module](https://github.com/jed/locale)。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-11-12T08:38:26.307

`request.acceptsLanguages`将包含`request.headers['accept-language']`.

请参阅：[http ://expressjs.com/en/api.html#req.acceptsLanguages](http://expressjs.com/en/api.html#req.acceptsLanguages)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-11-15T17:53:38.377

使用 Express 4.x，您可以使用[req.acceptsLanguages(lang [, ...])](http://expressjs.com/en/api.html#req.acceptsLanguages)中的构建来检查某些语言是否被接受。

```
var express = require('express');
app.get('/translation', function(request, response) {
    var lang = request.acceptsLanguages('fr', 'es', 'en');
    if (lang) {
        console.log('The first accepted of [fr, es, en] is: ' + lang);
        ...
    } else {
        console.log('None of [fr, es, en] is accepted');
        ...
    }
}); 
```

要使用 Express 4.x 获取所有接受语言的列表，您可以使用模块[accept](https://github.com/jshttp/accepts)。

```
var express = require('express'), accepts = require('accepts');
app.get('/translation', function(request, response) {
    console.log(accepts(request).languages());
    ...
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-12-26T11:54:17.903

设置请求语言并在全局范围内使用的中间件：

```
// place this middleware before declaring any routes
app.use((req, res, next) => {
    // This reads the accept-language header
    // and returns the language if found or false if not
    const lang = req.acceptsLanguages('bg', 'en')

    if (lang) { // if found, attach it as property to the request
        req.lang = lang
    } else { // else set the default language
        req.lang = 'en'
    }

    next()
}) 
```

现在您可以访问“req.lang”

```
app.get('/', (req, res) => {
    res.send(`The request language is '${req.lang}'`)
}) 
```

使用翻译的示例

```
const translate = {
    en: {
        helloWorld: "Hello World!"
    },
    bg: {
        helloWorld: "Здравей Свят!"
    }
}
app.get('/hello-world', (req, res) => {
    res.send(translate[req.lang].helloWorld)
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-15T15:55:44.160

您需要解析`req.headers["accept-language"]`. 这将为您提供客户首选语言的优先列表。您还可以检查`req.acceptsLanguages(lang [, ...])`您的语言是否受支持。

我强烈建议使用[express-request-language](https://github.com/tinganho/express-request-language)进行任何语言匹配工作，因为第一次就很难做到。

大多数时候，匹配一种语言是不够的。用户可能想要更改首选语言。`express-request-language`帮助您将首选语言存储在 cookie 中，它还为您的服务器提供 URL 路径以更改首选语言。

只需几行代码即可完成上述所有功能：

```
app.use(requestLanguage({
  languages: ['en-US', 'zh-CN'],
  cookie: {
    name: 'language',
    options: { maxAge: 24*3600*1000 },
    url: '/languages/{language}'
  }
})); 
```

如果不匹配，中间件也将匹配默认语言（`en-US`如上）。

# xslt - XSLT 按以 XML 命名的元素排序

> ID：11845475
> 
> 赞同：0
> 
> 时间：2012-08-07T11:59:15.673
> 
> 标签：xslt, xslt-1.0

在 XSLT-1.0 中是否可以按 xml 中的值排序。在下面的示例中，`<examples>`请求 s 的列表`<example>`按`year`字段排序。

```
...
<examples>
  <sortby>year</sortby>

  <example>
    <year>2012</year>
    <number>3</number>
  </example>

</examples>
... 
```

在这种情况下，使用选择的静态条件不起作用，因为我不知道可能的字段是什么`<example>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:05:03.583

**是的，使用这种形式的东西**：

```
<xsl:apply-templates select="example">
  <xsl:sort select="*[name()=sortby]" data-type="{sort-data-type}" 
            order="{sort-order}" />
</xsl:apply-templates> 
```

**请注意**，您还需要指定排序数据类型和顺序。

**完整的例子**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <xsl:copy>
    <xsl:apply-templates select="example">
      <xsl:sort select="*[name()=/*/sortby]" data-type="{/*/sort-data-type}"
                order="{/*/sort-order}" />
    </xsl:apply-templates>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="example">
  <xsl:copy-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<examples>
    <sortby>year</sortby>
    <sort-data-type>number</sort-data-type>
    <sort-order>descending</sort-order>
    <example>
        <year>2008</year>
        <number>3</number>
    </example>
    <example>
        <year>2012</year>
        <number>2</number>
    </example>
    <example>
        <year>2010</year>
        <number>5</number>
    </example>
</examples> 
```

**产生了想要的正确结果**：

```
<examples>
   <example>
      <year>2012</year>
      <number>2</number>
   </example>
   <example>
      <year>2010</year>
      <number>5</number>
   </example>
   <example>
      <year>2008</year>
      <number>3</number>
   </example>
</examples> 
```

如果在此 XML 文档上应用相同的转换（与上面相同，但更改了`sortby`和`sort-order`）：

```
<examples>
    <sortby>number</sortby>
    <sort-data-type>number</sort-data-type>
    <sort-order>ascending</sort-order>
    <example>
        <year>2008</year>
        <number>3</number>
    </example>
    <example>
        <year>2012</year>
        <number>2</number>
    </example>
    <example>
        <year>2010</year>
        <number>5</number>
    </example>
</examples> 
```

**然后再次产生想要的正确结果**：

```
<examples>
   <example>
      <year>2012</year>
      <number>2</number>
   </example>
   <example>
      <year>2008</year>
      <number>3</number>
   </example>
   <example>
      <year>2010</year>
      <number>5</number>
   </example>
</examples> 
```

**说明**：

1.  的`select`属性`xsl:sort`可以包含任何 XPath 表达式，因此我们可以指定一个表达式来选择要排序的元素的任何子元素，这样它的名称就是另一个 XPath 表达式求值的结果。

2.  在 XSLT 中，通常，除`select`允许 * *[AVT](http://www.w3.org/TR/1999/REC-xslt-19991116#attribute-value-templates)* *s（属性值模板）之外的所有属性都可以在其值中指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:04:07.453

Sort by `*[local-name() = $your-sort-item]`, e.g.

```
<xsl:template match="examples">
  <xsl:variable name="sort-name" select="sortby"/>
  <xsl:apply-templates select="example">
    <xsl:sort select="*[local-name() = $sort-name]"/>
  </xsl:apply-templates>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:04:31.863

我假设您的意思是您排序的节点应该是动态的，从`examples/sortBy`节点读取。在这种情况下：

```
<xsl:template match="examples">
    <xsl:apply-templates select='example'>
        <xsl:sort
            select='*[name() = /examples/sortby]'
            data-type='number'
            order='descending' 
        />
    </xsl:apply-templates>
</xsl:template>
<xsl:template match='example'>
    <p><xsl:value-of select='year' /></p>
</xsl:template> 
```

[此 XML Playground](http://www.xmlplayground.com/WH2LW9)上的可运​​行演示。

每年输出一个段落。根据需要将“降序”更改为“升序”。

# matlab - Matlab print -dmeta 命令将错误的图形剪辑到剪贴板。怎么修？

> ID：11845476
> 
> 赞同：-1
> 
> 时间：2012-08-07T11:59:20.063
> 
> 标签：matlab, user-interface, printing, clipboard

我有一个使用 Windows 7 下 R2012a 下的 GUIDE 工具开发的 MATLAB GUI 项目。它使用类似的代码

```
function pushbutton1_Callback(hObject, eventdata, handles)
  h = figure()
  t = linspace(1,10,200);
  plot(t,sin(t))
  figure(1)
  save2word('myfile.doc') 
```

这应该将图形保存到 Windows 剪贴板。实际发生的是剪贴板包含调用程序的图像。

如果我按如下方式更改代码，预期的图像会出现在剪贴板上。

```
function pushbutton1_Callback(hObject, eventdata, handles)
  h = figure()
  t = linspace(1,10,200);
  plot(t,sin(t))
  figure(1)
  save2word('myfile.doc', '-f1') 
```

以这种方式使用 save2word 解决了我的问题，但我很困惑为什么以前可以工作的东西发生了变化。会不会是 Java 更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:55:20.200

该[`save2word`](http://www.mathworks.com/matlabcentral/fileexchange/3149-save2word/content/save2word.m)函数提供了第二个参数，您可以使用它来指定要“打印”的图形：

```
save2word('file.doc','-f1') 
```

最终调用：

```
print -dmeta -f1 
```

将图形复制到剪贴板。

当然，您可以通过编程方式构建字符串：图形句柄`sprintf('-f%d',hFig)`在哪里。`hFig`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:27:31.767

要使用 save2word，您需要调用 save2word，在这种情况下我没有看到您这样做。 `print -demta`正如您在这里所拥有的，只需将活动图形复制到剪贴板即可。如果要将其保存到必须使用的文件中`print -dmeta 'filename'`。

我想我可能不完全理解你在这里问/说什么。您是说 save2word 用于`print -dmeta`将给定图形放入 word 文档中吗？重要的是要注意 save2word 不支持一次将多个图形保存到一个 word 文档中，并且您需要为每个要保存的图形每次调用它。

# android - Android SD 卡文件系统

> ID：11845479
> 
> 赞同：4
> 
> 时间：2012-08-07T11:59:37.027
> 
> 标签：android, filesystems, sd-card, ntfs, fat

长话短说 - 我如何检查 SD 卡上使用的文件系统？

我希望能够区分 FAT 和 NTFS。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T12:20:02.640

一种方法是解析 mount 命令的输出

编辑：这是代码

```
proc = Runtime.getRuntime().exec("mount");
BufferedReader in = new BufferedReader(new InputStreamReader(proc .getInputStream()));
String line = null;

while ((line = in.readLine()) != null) {  
//parse here
} 
```

您将不得不解析字符串行以检查文件系统中的 sdcard。我认为它也应该适用于无根设备

# java - 在 HashSet 的 ArrayList 中重新创建一个 HashSet

> ID：11845483
> 
> 赞同：0
> 
> 时间：2012-08-07T11:59:51.400
> 
> 标签：java, arraylist, hashset

我有代码

```
List<HashSet<Integer>> list = new ArrayList<HashSet<Integer>>(50);
pos = 17; // just some index less than 50
list.add(pos, new HashSet<Integer>());
list.get(17).add(99);
list.get(17).add(88); 
```

过了一会儿，我想删除里面有 {99, 88} 的 HashSet 并创建一个新的，如下所示：

```
// pos is still here
list.add(pos, new HashSet<Integer>()); 
```

是否允许？你知道更快的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T12:02:19.717

`list.add(pos, new HashSet<Integer>());`将[在该位置添加一个新集合并将现有的集合转移](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#add%28int,%20E%29)到`pos+1`. 这似乎不是你想要的。

如果你想用一个新的替换集合，使用`set`：

```
list.set(pos, new HashSet<Integer>()); 
```

在性能方面，`ArrayList#set`以恒定时间运行，因此它是替换列表中现有集合的有效方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:19:14.747

如果要替换集合的内容，可以这样做

```
Set<Integer> set = list.get(pos);
set.clear();
set.add(99); set.add(98); 
```

这稍微更有效，因为它重用了集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:55:17.030

如果你使用**guava**，你可以更简洁地说：

```
List<Set<Integer>> list = Lists.newArrayListWithCapacity(50);
list.set(17, Sets.newHashSet(99, 88)); 
```

# jquery - 仅在 DIV 上加载信号

> ID：11845484
> 
> 赞同：1
> 
> 时间：2012-08-07T11:59:51.900
> 
> 标签：jquery, html, loading

I have this code that will call a page to a div when the radio button is selected, but sometimes, it takes 4 or 5 secounds to load, because it as a big query...

有没有办法在 div 加载内容时发出加载信号？谢谢 ：）

```
 $('#button-radio-1').change(function(){
                var valor = $(this).val(); 
                $.post('mostrar_whois.php',{valor: valor}, function(data){
                $('#pesquisa').html(data)
                });
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:03:33.370

You can try add a "spinner" img to your div, and remove it as soon as the post action is complete. Like this:

```
$('#button-radio-1').change(function(){
                var valor = $(this).val();
                $('#pesquisa').html('<img src="spinner.gif" />');
                $.post('mostrar_whois.php',{valor: valor}, function(data){
                $('#pesquisa').html(data);
                });
            }); 
```

# javascript - 使用动画向上/向下滑动表格

> ID：11845487
> 
> 赞同：1
> 
> 时间：2012-08-07T11:59:54.100
> 
> 标签：javascript, jquery, animation

我想用动画关闭/打开一个表格。为此，我尝试使用 jQuery 只是为了发现 jquery 无法在表上执行 slideUp/Down。当然，我可以`.wrap()`用来将该表包含在一个 div 中，但它很笨拙，有时会给我带来错误

还有其他选择吗？此外，jquery 动画也不流畅；如何在[http://www.dynamicdrive.com/dynamicindex17/animatedcollapse.htm中实现流畅的动画](http://www.dynamicdrive.com/dynamicindex17/animatedcollapse.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:13:32.630

[jsFiddle 示例](http://jsfiddle.net/hWFy6/2/)

```
<button id="hidr">Hide</button>
<button id="showr">Show</button>

<table border="1">
  <tr>
    <td>row 1, cell 1</td>
    <td>row 1, cell 2</td>
  </tr>
  <tr>
    <td>row 2, cell 1</td>
    <td>row 2, cell 2</td>
  </tr>
</table>

<script>
    $("#hidr").click(function () {
      $("table").hide("fast");
    });
    $("#showr").click(function () {
      $("table").show("fast");
    });
</script> 
```

# coded-ui-tests - 用于验证 Web 应用程序 (.Net) 中 1000 多个屏幕字段的任何工具

> ID：11845488
> 
> 赞同：0
> 
> 时间：2012-08-07T11:59:55.627
> 
> 标签：coded-ui-tests, gui-testing

**需要验证 Web 应用程序 (.net) 上的 1K+ 字段。**其中包括下拉列表、应用程序中的文本文件。这里的重点更多是数据正确反映在屏幕上的天气！

**我目前正在寻找一种工具来进行验证。**请帮助我！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:43:01.820

既然您标记了 coded-ui-tests，您是否已经考虑过标记背后的技术？

来自标签：“编码的 UI 测试是可以使用 Visual Studio 2010 Ultimate 或 Visual Studio 2010 Premium 创建的自动化 UI 测试，以测试不同类型的用户界面：Web、WPF、Silverlight 和 Windows 窗体。”

使用编码的 UI 测试，您想要完成的事情应该不会太难。对于几个控件，您可以看到它们的值（我假设这是您要断言的数据）。

# node.js - 如何从 Node.js 在 MongoDB 和 CouchDB 中存储富文本数据

> ID：11845489
> 
> 赞同：6
> 
> 时间：2012-08-07T11:59:54.990
> 
> 标签：node.js, mongodb, couchdb, nosql

我正在使用带有节点 JS 的 mongoDb 和 couchDb。
我面临的问题是如何将 HTML 数据等富文本内容存储在键值对中。
除了使用 URI 编码（这是一种方法）对数据进行编码之外，我在 Internet 上找不到太多帮助。
他们是否有任何内置方法来为这些数据库引擎编码富文本或 blob 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-26T13:00:20.103

使用 CouchDB 时，我会使用附件。您可以[在此处进一步阅读](http://wiki.apache.org/couchdb/HTTP_Document_API#Standalone_Attachments)

# reporting-services - Microsoft报告中的rdlc表达式？

> ID：11845491
> 
> 赞同：1
> 
> 时间：2012-08-07T12:00:00.840
> 
> 标签：reporting-services

我需要填充取决于另一列（Transtype 和amount 列）的列我有一个包含两个值“D”或“C”的trans 列
如果DI 想要乘以负数。

我应该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:12:14.440

假设您的数据集字段名称是 Trans 和 Amount。

```
=IIF(Fields!Trans.Value = "D", Fields!Amount.Value *-1, Fields!Amount.Value ) 
```

# html - 使用 HTML5 画布文本 - SEO 后果

> ID：11845492
> 
> 赞同：0
> 
> 时间：2012-08-07T12:00:01.290
> 
> 标签：html, canvas, html5-canvas, seo

我正在构建一个网站，其中导航栏的元素使用 HTML5 的 canvas 元素进行动画处理。例如，按钮是浮动的圆圈。这个想法是按钮的文本将浮动到这些圆圈的右侧。我想知道，就 SEO 而言，我应该使用什么方法来实现不同的文本元素：

我想到的一种方法是只使用画布文本来绘制文本，但当然 SEO 无法读取它。但我不知道——谷歌的机器人是否关心我如何实现导航？或者他们只是阅读了 XML 站点地图来理解它？

第二种方法是使用 CSS 以编程方式将 html 元素与文本一起移动，以便它们跟随动画圆圈。

我正在考虑的一种混合方法是在画布上绘制，但也将带有常规文本的常规 html 导航作为画布的后备内容。

由于我不确定 Google 的 SEO 是如何工作的，如果您分享您对上述方法的看法，或者提供更好的方法，我会很高兴。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:04:42.597

> 第二种方法是使用 CSS 以编程方式将 html 元素与文本一起移动，以便它们跟随动画圆圈。

从 SEO 的角度来看，这将是理想的，因为搜索引擎将能够抓取内容并跟踪您的链接，而您的用户将受益于动画。

# jquery - 获取值时jquery每个函数错误

> ID：11845495
> 
> 赞同：1
> 
> 时间：2012-08-07T12:00:19.550
> 
> 标签：jquery

我有那个 Jquery 代码：

```
$('input[name*="fotos[]"]').each(function (i, ele) {
      alert(ele.val());
}); 
```

但我在浏览器中遇到了这个错误：

错误：TypeError：ele.val 不是函数

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:08:42.273

您可以使用

`alert($(ele).val());`

或者

```
alert($(this).val()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T12:01:22.177

You need to turn `ele` into a jQuery object:

```
alert($(ele).val()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T12:07:43.070

回调的`ele`参数`.each`是单个 DOM 元素，而不是 jQuery 对象。

您应该：

1.  使用本机 DOM 属性 - `ele.value`，或

2.  转换`ele`回 jQuery 对象 -`$(ele).val()`

注意：在回调中，`this === ele`

# php - 未保存表单步骤的链接

> ID：11845496
> 
> 赞同：0
> 
> 时间：2012-08-07T12:00:25.473
> 
> 标签：php, html, forms, hyperlink

我有这样的表格：

```
 <form id="candida-form" action="index.php?gender=<? echo $sex; ?>?step=<? echo $step; ?>" method="get">
    <? if ( $step == -1 ): ?>

    <div style="padding-left: 95px;padding-top: 40px;">
                            <div class="radio-option"><input type="radio" id="male" name="form_sex" value="0" checked /> <label for="male" style="cursor:pointer;"><img src="images/icon_man.png" /> Male</label></div>
                            <div class="radio-option"><input type="radio" id="female" name="form_sex" value="1" /> <label for="female" style="cursor:pointer;"><img src="images/icon_woman.png" /> Female</label></div>
                            <div class="radio-option" style="padding-top:9px;"><input type="radio" id="child" name="form_sex" value="2" /> <label for="child" style="cursor:pointer;"><img src="images/icon_child.png" /> Child</label></div></div>
                            <div class="clear"></div>

<div class="submit-wrapper"><input type="submit" id="nextstep" value="Next Step" /></div>

<? elseif ( $step == 0 ): ?>
                    <div class="form-inner">

                    <? if ( $sex == 0 ): ?>
                        <h2>MALE</h2>
                        <div class="yesno">
                            <div class="section-description">
                                <p>text</p>
                            </div>
                    <? elseif ( $sex == 1 ): ?>
                        <h2>FEMALE</h2>
                        <div class="yesno">
                            <div class="section-description">
                                <p>text</p>
                            </div>
                    <? else: ?>
                        <h2>CHILDREN</h2>
                        <div class="yesno">
                            <div class="section-description">
                                <p>text</p>
                            </div>
                    <? endif; ?> 
```

变量是：

```
$step = intval( $_POST[ 'form_post' ] ); // Gather completed step
$sex = intval( $_POST[ 'form_sex' ] ); // Gather gender 
```

这个想法是，当我单击该输入以“下一步”时，浏览器中的 url 正在更改为：`http://xyz.com/survey/index.php?gender=0?step=1`

但是如果我想把确切的链接`http://xyz.com/survey/index.php?gender=0?step=1`放在一个新的浏览器中，这样我就可以进入男性的第 1 步，它**不会**，它会进入第 1 步的索引，请问有什么解决方案吗？你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:02:24.017

You have the URL wrong with parameters. The correct syntax is:

```
http://xyz.com/survey/index.php?gender=0&step=1 
```

instead of

```
http://xyz.com/survey/index.php?gender=0?step=1 
```

ues `&` to string more variables together. The `?` is only used for the first to say that the rest of the URL is variables.

Change this line in your PHP code:

```
<form id="candida-form" action="index.php?gender=<? echo $sex; ?>?step=<? echo $step; ?>" method="get"> 
```

to

```
<form id="candida-form" action="index.php?gender=<? echo $sex; ?>&step=<? echo $step; ?>" method="get"> 
```

Edit: Also, change `$step = intval( $_POST[ 'form_post' ] );` to:

```
$step = intval( $_POST[ 'step' ] ); 
```

You aren't getting your variable back properly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:02:51.367

Your URL is incorrect. You need to use the ampersand characters to separate paramters. Not another question mark:

```
http://xyz.com/survey/index.php?gender=0?step=1 
```

should be

```
http://xyz.com/survey/index.php?gender=0&step=1 
```

# emacs - emacs orgmode中的自定义时间戳

> ID：11845497
> 
> 赞同：5
> 
> 时间：2012-08-07T12:00:26.217
> 
> 标签：emacs, timestamp, elisp, org-mode

我想在**emacs orgmode**中以自定义格式插入**时间戳**。我想以这种形式插入当前时间（没有日期！）：[HH:MM]，按。我对 lisp 完全陌生，无法弄清楚如何做到这一点。我的 -file 的起点是这样的：**`C-c -``~/.emacs`**

 **```
(defun org-my-custom-timestamp ()
  (interactive)
  ( :SOME_CODE: )
)

(define-key global-map "\C-c-" 'org-my-custom-timestamp) 
```

现在这只是我的自定义函数的定义`org-my-custom-timestamp`，即“交互”和快捷方式分配。但是，我尝试了各种方法，`:SOME_CODE:`但都没有成功。

可以在函数中安装什么以使其以所描述的方式工作？

是否有任何有经验的 emacs 用户甚至考虑过这种方法来解决它，或者是否有更聪明的方法来做到这一点？也许是 org-mode-internally？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T13:25:19.657

Org 模式的本地键盘映射有一个 bind 的条目`C-c -`，所以我们必须更改它而不是全局的：

```
(defun org-my-custom-timestamp ()
  (interactive)
  (insert (format-time-string "[%H:%M]")))
(add-hook 'org-mode-hook
          (lambda ()
            (local-set-key "\C-c-" 'org-my-custom-timestamp))) 
```

再次注意，它用您自己的命令替换了默认情况下在 Org 模式下`org-ctrl-c-minus`绑定的命令。`C-c -`**

# ruby-on-rails - Rails，设计认证，CSRF 问题

> ID：11845500
> 
> 赞同：43
> 
> 时间：2012-08-07T12:00:41.880
> 
> 标签：ruby-on-rails, ajax, authentication, devise, csrf

我正在使用 Rails 做一个单页应用程序。登录和注销时，使用 ajax 调用 Devise 控制器。我遇到的问题是，当我 1）登录 2）注销然后再次登录不起作用。

我认为它与 CSRF 令牌有关，当我退出时它会被重置（尽管它不应该 afaik），并且由于它是单页，旧的 CSRF 令牌是在 xhr 请求中发送的，因此会重置会话。

更具体地说，这是工作流程：

1.  登入
2.  登出
3.  登录（成功 201。但是`WARNING: Can't verify CSRF token authenticity`在服务器日志中打印）
4.  后续ajax请求失败401未授权
5.  刷新网站（此时页眉中的CSRF变成了别的东西）
6.  我可以登录，它可以工作，直到我尝试退出并再次登录。

任何线索都非常感谢！让我知道是否可以添加更多详细信息。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-27T14:45:37.783

Jimbo 出色地解释了您遇到的问题背后的“原因”。您可以采取两种方法来解决此问题：

1.  （由 Jimbo 推荐）覆盖 Devise::SessionsController 以返回新的 csrf-token：

    ```
    class SessionsController < Devise::SessionsController
      def destroy # Assumes only JSON requests
        signed_out = (Devise.sign_out_all_scopes ? sign_out : sign_out(resource_name))
        render :json => {
            'csrfParam' => request_forgery_protection_token,
            'csrfToken' => form_authenticity_token
        }
      end
    end 
    ```

    并在客户端为您的 sign_out 请求创建一个成功处理程序（可能需要根据您的设置进行一些调整，例如 GET 与 DELETE）：

    ```
    signOut: function() {
      var params = {
        dataType: "json",
        type: "GET",
        url: this.urlRoot + "/sign_out.json"
      };
      var self = this;
      return $.ajax(params).done(function(data) {
        self.set("csrf-token", data.csrfToken);
        self.unset("user");
      });
    } 
    ```

    这还假设您将 CSRF 令牌自动包含在所有 AJAX 请求中，如下所示：

    ```
    $(document).ajaxSend(function (e, xhr, options) {
      xhr.setRequestHeader("X-CSRF-Token", MyApp.session.get("csrf-token"));
    }); 
    ```

2.  更简单地说，如果它适合您的应用程序，您可以简单地覆盖`Devise::SessionsController`并使用 覆盖令牌检查`skip_before_filter :verify_authenticity_token`。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-08-13T22:32:21.363

我也遇到了这个问题。这里发生了很多事情。

**TL;DR** - 失败的原因是 CSRF 令牌与您的服务器会话相关联（无论您是登录还是注销，您都有一个服务器会话）。CSRF 令牌包含在每次页面加载时页面的 DOM 中。注销时，您的会话被重置并且没有 csrf 令牌。通常，注销会重定向到不同的页面/操作，这会为您提供一个新的 CSRF 令牌，但由于您使用的是 ajax，因此您需要手动执行此操作。

*   您需要覆盖 Devise SessionController::destroy 方法以返回您的新 CSRF 令牌。
*   然后在客户端，您需要为注销 XMLHttpRequest 设置成功处理程序。在该处理程序中，您需要从响应中获取这个新的 CSRF 令牌并将其设置在您的 dom 中： `$('meta[name="csrf-token"]').attr('content', <NEW_CSRF_TOKEN>)`

**更详细的说明**您很可能`protect_from_forgery`在 ApplicationController.rb 文件中进行了设置，所有其他控制器都从该文件继承（我认为这很常见）。`protect_from_forgery`对所有非 GET HTML/Javascript 请求执行 CSRF 检查。由于 Devise Login 是一个 POST，它执行一个 CSRF 检查。如果 CSRF 检查失败，则清除用户的当前会话，即将用户注销，因为服务器假定这是一次攻击（这是正确/期望的行为）。

因此，假设您从注销状态开始，您会重新加载页面，并且永远不会再次重新加载页面：

1.  **在呈现页面时：**服务器将与您的服务器会话关联的 CSRF 令牌插入页面。您可以通过在浏览器中的 javascript 控制台运行以下命令来查看此令牌`$('meta[name="csrf-token"]').attr('content')`。

2.  **然后您通过 XMLHttpRequest 登录：此时**您的 CSRF 令牌保持不变，因此您的 Session 中的 CSRF 令牌仍然与插入页面的那个相匹配。在后台，在客户端，jquery-ujs 正在侦听 xhr 并`$('meta[name="csrf-token"]').attr('content')`自动为您设置一个值为 'X-CSRF-Token' 的标头（请记住，这是服务器在步骤 1 中设置的 CSRF 令牌）。服务器将 jquery-ujs 在标头中设置的 Token 与存储在会话信息中的 Token 进行比较，它们匹配，因此请求成功。

3.  **然后您通过 XMLHttpRequest 注销：**这会重置会话，为您提供一个没有 CSRF 令牌的新会话。

4.  **然后通过 XMLHttpRequest 再次登录：** jquery-ujs 从`$('meta[name="csrf-token"]').attr('content')`. 这个值仍然是你的**旧**CSRF 令牌。它采用这个旧令牌并使用它来设置“X-CSRF-Token”。服务器将此标头值与它添加到会话中的新 CSRF 令牌进行比较，这是不同的。这种差异导致`protect_form_forgery`失败，这会引发`WARNING: Can't verify CSRF token authenticity`并重置您的会话，从而将用户注销。

5.  **然后，您创建另一个需要登录用户的 XMLHttpRequest：**当前会话没有登录用户，因此设计返回 401。

**更新：8/14**设计注销不会给你一个新的 CSRF 令牌，通常在注销后发生的重定向会给你一个新的 CSRF 令牌。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-04-16T13:58:07.580

我的回答大量借鉴了@Jimbo 和@Sija，但是我使用的是[Rails CSRF Protection + Angular.js 建议的设计/angularjs 约定：protect_from_forgery 让我在 POST 上注销](https://stackoverflow.com/questions/14734243/rails-csrf-protection-angular-js-protect-from-forgery-makes-me-to-log-out-on)，并在我的[博客](http://technpol.wordpress.com/2013/09/21/angularjs-and-rails-csrf-protection/)上详细说明了一点原来是这样做的。这在应用程序控制器上有一个为 csrf 设置 cookie 的方法：

```
after_filter  :set_csrf_cookie_for_ng

def set_csrf_cookie_for_ng
  cookies['XSRF-TOKEN'] = form_authenticity_token if protect_against_forgery?
end 
```

所以我使用@Sija的格式，但使用早期SO解决方案中的代码，给我：

```
class SessionsController < Devise::SessionsController
  after_filter :set_csrf_headers, only: [:create, :destroy]

  protected
  def set_csrf_headers
    cookies['XSRF-TOKEN'] = form_authenticity_token if protect_against_forgery?  
  end
end 
```

为了完整起见，由于我花了几分钟的时间来解决它，我还注意到需要修改您的 config/routes.rb 以声明您已经覆盖了会话控制器。就像是：

```
devise_for :users, :controllers => {sessions: 'sessions'} 
```

这也是我在我的应用程序上完成的大型 CSRF 清理的一部分，其他人可能会对此感兴趣。博客文章在[这里](http://technpol.wordpress.com/2014/04/17/rails4-angularjs-csrf-and-devise/)，其他更改包括：

从 ActionController::InvalidAuthenticityToken 中救援，这意味着如果事情不同步，应用程序将自行修复，而不是用户需要清除 cookie。由于事情在rails中，我认为您的应用程序控制器将默认为：

```
protect_from_forgery with: :exception 
```

在这种情况下，您需要：

```
rescue_from ActionController::InvalidAuthenticityToken do |exception|
  cookies['XSRF-TOKEN'] = form_authenticity_token if protect_against_forgery?
  render :error => 'invalid token', {:status => :unprocessable_entity}
end 
```

我也对竞争条件和与 Devise 中的超时模块的一些交互感到有些遗憾，我在博客文章中对此进行了进一步评论 - 简而言之，您应该考虑使用 active_record_store 而不是 cookie_store，并小心发出并行靠近 sign_in 和 sign_out 操作的请求。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-11-21T01:45:12.307

这是我的看法：

```
class SessionsController < Devise::SessionsController
  after_filter :set_csrf_headers, only: [:create, :destroy]
  respond_to :json

  protected
  def set_csrf_headers
    if request.xhr?
      response.headers['X-CSRF-Param'] = request_forgery_protection_token
      response.headers['X-CSRF-Token'] = form_authenticity_token
    end
  end
end 
```

在客户端：

```
$(document).ajaxComplete(function(event, xhr, settings) {
  var csrf_param = xhr.getResponseHeader('X-CSRF-Param');
  var csrf_token = xhr.getResponseHeader('X-CSRF-Token');

  if (csrf_param) {
    $('meta[name="csrf-param"]').attr('content', csrf_param);
  }
  if (csrf_token) {
    $('meta[name="csrf-token"]').attr('content', csrf_token);
  }
}); 
```

每次您通过 ajax 请求返回`X-CSRF-Token`或标头时，这将使您的 CSRF 元标记保持更新。`X-CSRF-Param`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-05T20:35:35.133

在挖掘 Warden 源之后，我注意到设置`sign_out_all_scopes`为`false`阻止 Warden 清除整个会话，因此 CSRF 令牌在退出之间保留。

有关设计问题跟踪器的相关讨论：[https ://github.com/plataformatec/devise/issues/2200](https://github.com/plataformatec/devise/issues/2200)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-18T11:47:49.817

我刚刚在我的**布局文件**中添加了它并且它有效

```
 <%= csrf_meta_tag %>

    <%= javascript_tag do %>
      jQuery(document).ajaxSend(function(e, xhr, options) {
       var token = jQuery("meta[name='csrf-token']").attr("content");
        xhr.setRequestHeader("X-CSRF-Token", token);
      });
    <% end %> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-07T12:13:55.827

检查您是否已将其包含在 application.js 文件中

> //= 需要 jquery
> 
> //= 需要 jquery_ujs

原因是 jquery-rails gem 默认情况下会在所有 Ajax 请求上自动设置 CSRF 令牌，需要这两个

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-15T05:22:05.703

就我而言，在用户登录后，我需要重新绘制用户的菜单。那行得通，但是我在同一部分对服务器的每个请求都收到了 CSRF 真实性错误（当然，没有刷新页面）。上面的解决方案不起作用，因为我需要渲染一个 js 视图。

我所做的是，使用设计：

应用程序/控制器/sessions_controller.rb

```
 class SessionsController < Devise::SessionsController
      respond_to :json

      # GET /resource/sign_in
      def new
        self.resource = resource_class.new(sign_in_params)
        clean_up_passwords(resource)
        yield resource if block_given?
        if request.format.json?
          markup = render_to_string :template => "devise/sessions/popup_login", :layout => false
          render :json => { :data => markup }.to_json
        else
          respond_with(resource, serialize_options(resource))
        end
      end

      # POST /resource/sign_in
      def create
        if request.format.json?
          self.resource = warden.authenticate(auth_options)
          if resource.nil?
            return render json: {status: 'error', message: 'invalid username or password'}
          end
          sign_in(resource_name, resource)
          render json: {status: 'success', message: '¡User authenticated!'}
        else
          self.resource = warden.authenticate!(auth_options)
          set_flash_message(:notice, :signed_in)
          sign_in(resource_name, resource)
          yield resource if block_given?
          respond_with resource, location: after_sign_in_path_for(resource)
        end
      end

    end 
```

之后，我向重绘菜单的控制器#action 发出请求。在 javascript 中，我修改了 X-CSRF-Param 和 X-CSRF-Token：

应用程序/视图/实用程序/redraw_user_menu.js.erb

```
 $('.js-user-menu').html('');
  $('.js-user-menu').append('<%= escape_javascript(render partial: 'shared/user_name_and_icon') %>');
  $('meta[name="csrf-param"]').attr('content', '<%= request_forgery_protection_token.to_s %>');
  $('meta[name="csrf-token"]').attr('content', '<%= form_authenticity_token %>'); 
```

我希望它对处于相同 js 情况的人有用:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-17T19:59:13.363

我的情况更简单。就我而言，我想做的就是：如果一个人坐在屏幕上，拿着表格，并且他们的会话超时（设计可超时的会话超时），通常如果他们在那个时候点击提交，设计会反弹他们到登录屏幕。好吧，我不想这样，因为他们丢失了所有的表单数据。我使用 JavaScript 来捕获表单提交，Ajax 调用一个控制器来确定用户是否不再登录，如果是这种情况，我提出一个表单，让他们重新输入密码，然后重新验证它们（bypass_sign_in 在控制器中）使用 Ajax 调用。然后允许原始表单提交继续。

在我添加protect_from_forgery 之前一直运行良好。

所以，多亏了上面的答案，我真正需要的只是在我的控制器中让用户重新登录（bypass_sign_in），我只是为新的 CSRF 令牌设置了一个实例变量：

```
@new_csrf_token = form_authenticity_token 
```

然后在渲染的 .js.erb 中（再一次，这是一个 XHR 调用）：

```
$('meta[name="csrf-token"]').attr('content', '<%= @new_csrf_token %>');
$('input[type="hidden"][name="authenticity_token"]').val('<%= @new_csrf_token %>'); 
```

瞧。我的表单页面没有刷新，因此被旧令牌卡住了，现在我从我的用户登录获得的新会话中获得了新令牌。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-02-27T13:54:51.963

回复@sixty4bit 的评论；如果您遇到此错误：

```
Unexpected error while processing request: undefined method each for :authenticity_token:Symbol` 
```

代替

```
response.headers['X-CSRF-Param'] = request_forgery_protection_token 
```

和

```
response.headers['X-CSRF-Param'] = request_forgery_protection_token.to_s 
```

# apache - CSS 和图像 mod_rewrite

> ID：11845503
> 
> 赞同：0
> 
> 时间：2012-08-07T12:00:55.567
> 
> 标签：apache, mod-rewrite

我有这个页面，我想使用 mod_rewrite 进行重写

`http://example.com/dev/main/1234`

至

`http://example.com/dev/index.php?page=main&id=1234`

我已成功让 mod_rewrite 为该页面工作，但 CSS 和图像仍然存在问题。

```
 1 Options +FollowSymLinks
  2 
  3 ReWriteEngine on
  4 RewriteRule ^(.*)/([^/\.]+)/?$ /dev/index.php?page=$1&id=$2 [L]
  5 RewriteCond %{REQUEST_FILENAME} !-d
  6 RewriteCond %{REQUEST_FILENAME} !-f 
```

css 位于 /var/www/dev/css，图像位于 /var/www/dev/img。[当我访问http://example.com/dev/main/1234](http://example.com/dev/main/1234)时，如何让 mod_rewrite 加载相同的图像和 css ？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:37:44.927

哇。让它与一些黑客一起工作。不知道这是否是正确的方法，但它有效：

```
RewriteRule ^(.*)/css/(.+)?$ css/$2 [NC,L]
RewriteRule ^(.*)/img/(.+)?$ img/$2 [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:07:55.377

您的 htaccess 中有这两个条件吗（我假设您的 htaccess 在 /dev 文件夹中）？

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f 
```

如果没有，您的图片网址将被重写，因为它们与您的正则表达式匹配（css/image.jpg）

当请求是真实路径（指向文件或文件夹）时，这两个条件避免了 url 重写

# c# - 将两个 C# 消息框的内容合二为一

> ID：11845505
> 
> 赞同：0
> 
> 时间：2012-08-07T12:01:00.990
> 
> 标签：c#, messagebox

我的程序中有以下代码。弹出一个消息框以显示字段表单的内容。点击 OK 后，会弹出另一个询问用户信息是否正确。我想将两者结合起来，弹出消息框，显示表单内容并询问信息是否正确，并带有一个是/否按钮。我已经尝试将两者结合起来无济于事。我相信我缺少一个句法概念。有任何想法吗？

```
 //shows contents of form fields
  StringBuilder MessageText = new StringBuilder();
        MessageText.AppendLine(string.Format("Coil#: {0}", coil_Num.Text));
        MessageText.AppendLine(string.Format("Location: {0}", location_box.Text));
        MessageText.AppendLine(string.Format("Sub-Area: {0}", sub_area_box.Text));
        MessageText.AppendLine(string.Format("Row: {0}", row_Num.Text));
        MessageBox.Show(MessageText.ToString());

  //asks if info is correct, with a YES/NO button and question mark
  DialogResult result1 = MessageBox.Show("Information is correct?",
        "Double Check Form Information",
        MessageBoxButtons.YesNoCancel,
        MessageBoxIcon.Question); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:04:20.490

```
 //shows contents of form fields
  StringBuilder MessageText = new StringBuilder();
        MessageText.AppendLine(string.Format("Coil#: {0}", coil_Num.Text));
        MessageText.AppendLine(string.Format("Location: {0}", location_box.Text));
        MessageText.AppendLine(string.Format("Sub-Area: {0}", sub_area_box.Text));
        MessageText.AppendLine(string.Format("Row: {0}", row_Num.Text));
        MessageText.AppendLine();
        MessageText.AppendLine();

  //asks if info is correct, with a YES/NO button and question mark
  DialogResult result1 = MessageBox.Show(MessageText.ToString() + "Information is correct?",
        "Double Check Form Information",
        MessageBoxButtons.YesNoCancel,
        MessageBoxIcon.Question); 
```

Something like this? Of course this last text could also be appended to the StringBuilder.

If you only want Yes/No buttons then change `MessageBoxButtons.YesNoCancel` to `MessageBoxButtons.YesNo`.

Finally check the result like this:

```
switch (result1)
{
   case DialogResult.Yes:
      // ... Do stuff if Yes is choosen
      break;

   case DialogResult.No:
      // ... Do stuff if No is choosen
      break;

   case DialogResult.Cancel:
      // ... Do stuff if Cancel is choosen
      break;
} 
```

of course you have to add/remove the cancel option depending on if you include the button or not.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:05:19.323

我假设您想在信息之后提出问题，在这种情况下，只需将您的问题附加到字符串生成器，然后再传递给相关的 MessageBox arg，就像您在第一个 MessageBox 中一样：

```
StringBuilder MessageText = new StringBuilder();
MessageText.AppendLine(string.Format("Coil#: {0}", coil_Num.Text));
MessageText.AppendLine(string.Format("Location: {0}", location_box.Text));
MessageText.AppendLine(string.Format("Sub-Area: {0}", sub_area_box.Text));
MessageText.AppendLine(string.Format("Row: {0}", row_Num.Text));
MessageText.AppendLine("Is this information correct?");

DialogResult result1 = MessageBox.Show(MessageText.ToString(),
    "Double Check Form Information",
    MessageBoxButtons.YesNoCancel,
    MessageBoxIcon.Question); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T12:06:05.623

做就是了：

```
MessageBox.Show(MessageText.ToString(), MessageBoxButtons.YesNoCancel, MessageBoxIcon.Question); 
```

第二个参数 (MessageBoxButtons.YesNoCancel) 决定了它将拥有哪些按钮（在这种情况下，是、否和取消）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T12:06:21.023

为什么不简单地连接字符串？

```
 DialogResult result1 = MessageBox.Show(MessageText.ToString() + 
"\nInformation is correct?",
        "Double Check Form Information",
        MessageBoxButtons.YesNoCancel,
        MessageBoxIcon.Question); 
```

# java - Restful Web 服务中的属性文件

> ID：11845506
> 
> 赞同：0
> 
> 时间：2012-08-07T12:01:05.053
> 
> 标签：java, web-services, rest

在 Restful Web 服务中，如果假设我想从某些属性文件中获取值意味着我需要将这些 .property 文件保存在战争中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:27:45.140

我通过添加来解决我的问题

```
 InputStream inputStream = Thread.currentThread().getContextClassLoader()
        .getResourceAsStream(propertiesFileName);
        if(inputStream != null) {
            properties.load(inputStream);
        } 
```

这段代码。当我的war文件当前在任何应用程序服务器上运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:02:42.303

You can read any .properties you like in your REST service implementation using getResourceAsStream().

# android - I am getting "Error inflating class fragment"?

> ID：11845508
> 
> 赞同：0
> 
> 时间：2012-08-07T12:01:12.393
> 
> 标签：android, android-fragments, android-listfragment

I have a main Activity and it has two fragments, ListFramgment and DetailFragment. In ListFragment, on the event of selecting a choice, I am making a query to database which will return an array. I am passing this array to DetailFragment.

```
public void onListItemClick(ListView l, View v, int position, long id) {
    String selectedStore = (String) getListAdapter().getItem(position);
    DetailFragment fragment = (DetailFragment) getFragmentManager()
            .findFragmentById(R.id.detailFragment);
    if (fragment != null && fragment.isInLayout()) {
        TestAdapter mDbHelper = new TestAdapter(getActivity());
        mDbHelper.createDatabase();
        mDbHelper.open();

        Cursor curItemList = mDbHelper.getItemList(selectedStore);
        String[] itemList = new String[curItemList.getCount()];
        int i = 0;
        while(curItemList.moveToNext()){
            String item = curItemList.getString(0);
            itemList[i] = item;
            i++;
        }

        mDbHelper.close();

        fragment.setText(itemList);

        //getItemList(selectedStore);

    } 
```

Here is DetailFragment code:

```
 public class DetailFragment extends android.app.ListFragment {

//   String qty;
//   String pr;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.e("Test", "hello");
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.details, container, false);
        return view;
    }

    public void setText(final String[] itemList) {
        ListView view = (ListView) getView().findViewById(R.id.detailsText);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, itemList);
        view.setAdapter(adapter);
}

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        Toast.makeText(null, "time for popup", Toast.LENGTH_SHORT).show();
    } 
```

As the application starts, it is crashing and the LogCat is:

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.click4tab.fragmentvogella/com.click4tab.fragmentvogella.MainActivity}: android.view.InflateException: Binary XML file line #14: Error inflating class fragment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:10:25.313

```
Binary XML file line #14: Error inflating class fragment 
```

检查你**`Layout xml file`**有什么错误**`line no.14`**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:57:34.020

就我而言，解决方案是写

```
super.onCreateView(inflater, container, savedInstanceState); 
```

在我的 onCreateView 实现中。

# sitemap - Google 站点地图提交显示错误 404

> ID：11845514
> 
> 赞同：4
> 
> 时间：2012-08-07T12:01:51.570
> 
> 标签：sitemap

我已经在 Google Sitemap 上提交了站点地图。当我检查提交和索引时，它显示出很大的差异。

然后我检查了一个文件中的错误。如下。

```
General HTTP error: 404 not found
HTTP Error: 404 
```

我已经检查了 404 的错误指南。它显示文件不存在时会发生此错误。但是当我单击文件的链接时，它正在下载文件。表示文件存在。

我试图重新提交文件并在另一天后检查，但仍然显示相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:06:22.067

我已经重新提交了站点地图，现在错误已更正。

# javascript - 如何实现 Javascript 自动完成功能？

> ID：11845517
> 
> 赞同：0
> 
> 时间：2012-08-07T12:02:02.877
> 
> 标签：javascript, jquery, asp.net, autocomplete

我对编程很陌生，但在谈到 JavaScript/jQuery 时，我大部分都是新手。我在这里的原因是因为即使我已经通过互联网搜索了自动完成搜索的解决方案/我尝试应用我发现的不同版本，但我无法找到真正有效的解决方案:)

这是我的一段代码：

```
var mydata
$(document).ready(function () 
{
    ConstructSuggestionArray();
    $("[id$='txtSearchProject']").keypress(function () 
    {
       $("[id$='txtSearchProject']").autocomplete
            ({
                source: mydata
            })
    })
});

function ConstructSuggestionArray()
{
    $.ajax
    ({
        url: 'ProjectManagement.aspx/ConstructSuggestionArray',
        type: "POST",
        data: {},
        async: false,
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (response) 
        {
            if (response.d != null) 
            {
                mydata = jQuery.parseJSON(response.d);
                return true;
            }
            else 
            {
                return false; 
            }
        }
    });
} 
```

另外，我构造数组的代码段：

```
public string ConstructSuggestionArray()
        {
            using (DataClassesDataContext context = new DataClassesDataContext())
            {
                List<Utils.ProjectsOfAUser> theProjects =  
                      ReturnProjectsAccordingToAllocation(context);
                string[] projectsNameArray = new string[theProjects.Count];
                int index = 0;

            foreach (Utils.ProjectsOfAUser oneProject in theProjects)
            {
                projectsNameArray[index] = oneProject.Name;
                index++;
            }

            string strJSON = string.Empty;
            JavaScriptSerializer objJSSerializer = new JavaScriptSerializer();
            strJSON = objJSSerializer.Serialize(projectsNameArray).ToString();

            return strJSON;
        }
    }
} 
```

而且我还在我的项目和我的 asp.net 页面中添加了脚本。

我很困惑，如果你能帮助我解决这个问题，我将非常感激。

提一下：txtSearchProject - 是一个asp控件。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:05:31.353

你用过 jquery 自动完成插件吗，它非常好用，也很容易实现，也请通过这个链接

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:47:21.850

jQuery AJAX 方法是异步的，自动完成绑定到 null 变量，因此没有选项。然后回调运行并填充变量，但为时已晚。

你在这里有两个选择。您可以在成功回调中添加以下内容：

```
$("[id$='txtSearchProject']").autocomplete( "options", "source", mydata); 
```

一旦完成，它将设置下拉列表的源（如果您需要再次调用它，这有利于更新）。

您还可以将 ConstructSuggestionArray 的 url 作为源，小部件将处理调用页面（请参阅“远程数据源”的自动完成演示页面并查看源）。

# android - Android camera preview in surfaceview

> ID：11845519
> 
> 赞同：3
> 
> 时间：2012-08-07T12:02:05.700
> 
> 标签：android, camera, surfaceview

I manage to put camera preview in surfaceview and this works great. But now i have problem with speed of other components. Because now it is really slow.

Do i need to put camera in new thread? How to decrease fps or resolution? Because this what i have now does not work properly.

My surface view:

```
class KameraSurface extends SurfaceView implements SurfaceHolder.Callback {
    private static final String TAG = "Preview";

    SurfaceHolder mHolder;
    public Camera camera;

    KameraSurface(Context context) {
        super(context);

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        mHolder.setFormat(PixelFormat.RGB_332);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_GPU);
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, acquire the camera and tell it where
        // to draw.

         camera = Camera.open();

         Camera.Parameters p = camera.getParameters();
         p.setPictureSize(80, 60);
         p.setColorEffect(android.hardware.Camera.Parameters.EFFECT_NONE);
         p.setJpegQuality(20);
         p.setPreviewFrameRate(1);
         p.setPreviewFpsRange(5, 10);
         p.setPreviewSize(80, 60);
         camera.setParameters(p);

        try {
            camera.setPreviewDisplay(holder);

            camera.setPreviewCallback(new PreviewCallback() {

                public void onPreviewFrame(byte[] data, Camera arg1) {
                    //KameraSurface.this.invalidate();
                }
            });
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when we return, so stop the preview.
        // Because the CameraDevice object is not a shared resource, it's very
        // important to release it when the activity is paused.
        camera.stopPreview();
        camera = null;
    }
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // Now that the size is known, set up the camera parameters and begin
        // the preview.
        Camera.Parameters parameters = camera.getParameters();
        parameters.setPreviewSize(80, 60);
        camera.setParameters(parameters);

        camera.startPreview();
    }

    @Override
    public void draw(Canvas canvas) {
            super.draw(canvas);
            Paint p= new Paint(Color.RED);
            Log.d(TAG,"draw");
            canvas.drawText("PREVIEW", canvas.getWidth()/2, canvas.getHeight()/2, p );
    }
} 
```

My xml:

```
.
.
.
 <TableRow
            android:layout_width="match_parent"
            android:layout_height="fill_parent" >

            <FrameLayout
                android:id="@+id/preview"
                android:layout_width="133dp"
                android:layout_height="100dp"
                android:layout_margin="20dp" >
            </FrameLayout>
.
.
. 
```

And how i call in main activity:

```
KameraSurface preview = new KameraSurface(getApplicationContext());
                ((FrameLayout) findViewById(R.id.preview)).addView(preview); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:12:29.060

您可以选择在不同的线程中启动“startPreview”..

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    // Now that the size is known, set up the camera parameters and begin
    // the preview.
    Camera.Parameters parameters = camera.getParameters();
    parameters.setPreviewSize(80, 60);
    camera.setParameters(parameters);

    Thread preview_thread = new Thread(new Runnable() {
        @Override
        public void run() {
               camera.startPreview();
           }
        }, "preview_thread");
        preview_thread.start(); 
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-18T11:31:13.240

我面临同样的问题，但我通过这种方法获得了这个预览大小，现在我的相机预览工作正常。

```
private Camera.Size getOptimalPreviewSize(List<Camera.Size> sizes, int w, int h) {
            final double ASPECT_TOLERANCE = 0.1;
            double targetRatio = (double) h / w;

            if (sizes == null)
                return null;

            Camera.Size optimalSize = null;
            double minDiff = Double.MAX_VALUE;

            int targetHeight = h;

            for (Camera.Size size : sizes) {
                double ratio = (double) size.height / size.width;
                if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE)
                    continue;

                if (Math.abs(size.height - targetHeight) < minDiff) {
                    optimalSize = size;
                    minDiff = Math.abs(size.height - targetHeight);
                }
            }

            if (optimalSize == null) {
                minDiff = Double.MAX_VALUE;
                for (Camera.Size size : sizes) {
                    if (Math.abs(size.height - targetHeight) < minDiff) {
                        optimalSize = size;
                        minDiff = Math.abs(size.height - targetHeight);
                    }
                }
            }

            return optimalSize;
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:11:16.577

我没有测试过你的代码，但是有很多因素会导致体验缓慢，包括糟糕的硬件。如果您在 Windows 中使用模拟器，请尝试将进程/应用程序的亲和性设置为除 0 以外的任何 CPU 内核。它在单核模式下运行得更快。

> 我需要将相机放在新线程中吗？

不。正如您可以在此处阅读的那样[https://stackoverflow.com/a/1243448/649979](https://stackoverflow.com/a/1243448/649979)，它已经在与 GUI 线程分开的自己的线程中。

然而，正如我们通过评论发现硬件加速有助于`<application android:hardwareAccelerated="true" ...>` [http://developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

> 如何降低fps或分辨率？因为这是我现在所拥有的不能正常工作。

应该如何工作？你没有概述这一点。

# xamarin.android - Unable run ProgressDialog - BadTokenException while showind

> ID：11845520
> 
> 赞同：2
> 
> 时间：2012-08-07T12:02:08.183
> 
> 标签：xamarin.android, mvvmcross, progressdialog, android-context

I am having a problem with a ProgressDialog thing in MVVMCross. I am getting `Android.Views.WindowManagerBadTokenException`: while creating `ProgressDialog` via `IReportService` where I have context from setup.cs.

```
public class Setup
        : MvxBaseAndroidBindingSetup
    {
        public Setup(Context applicationContext)
            : base(applicationContext)
        {
        }

        protected override MvxApplication CreateApp()
        {
            return new NoSplashScreenApp();
        }
        public class Converters
        {
          public readonly MvxVisibilityConverter Visibility = new MvxVisibilityConverter();
        }
        protected override IEnumerable<Type> ValueConverterHolders
      {
          get { return new[] {typeof (Converters)}; }
      }
        protected override void InitializeLastChance()
        {
            var errorHandler = new ReportsDisplayer(ApplicationContext);
            base.InitializeLastChance();
        }

    } 
```

```
public class ReportsDisplayer
: IMvxServiceConsumer<IReportsSource>
      , IMvxServiceConsumer<IMvxAndroidCurrentTopActivity>
{
    private readonly Context _applicationContext;
    private ProgressDialog _progressDialog;

    public ReportsDisplayer(Context applicationContext)
    {
        _applicationContext = applicationContext;

        var source = this.GetService<IReportsSource>();
        source.ErrorReported += (sender, args) => ShowError(args.Message);
        source.MessageReported += (sender, args) => ShowMessage(args.Title, args.Message);
        source.ProgressDialogShowed += (sender, args) => ShowProgressDialog(args.Title, args.Message);
        source.ProgressDialogDismiss += (sender, args) => DismissProgressDialog();

    }

    private void ShowError(string message)
    {
        var activity = this.GetService<IMvxAndroidCurrentTopActivity>().Activity as IMvxBindingActivity;
        View layoutView = activity.NonBindingInflate(Resource.Layout.ToastLayout_Error, null);

        var text1 = layoutView.FindViewById<TextView>(Resource.Id.ErrorText1);
        text1.Text = "Błąd";
        var text2 = layoutView.FindViewById<TextView>(Resource.Id.ErrorText2);
        text2.Text = message;

        var toast = new Toast(_applicationContext);

        toast.SetGravity(GravityFlags.CenterVertical, 0, 0);
        toast.Duration = ToastLength.Long;
        toast.View = layoutView;
        toast.Show();
    }
    private void ShowMessage(string title, string message)
    {
        var activity = this.GetService<IMvxAndroidCurrentTopActivity>().Activity as IMvxBindingActivity;
        View layoutView = activity.NonBindingInflate(Resource.Layout.ToastLayout_Message, null);
        var text1 = layoutView.FindViewById<TextView>(Resource.Id.MessageText1);
        text1.Text = title;
        var text2 = layoutView.FindViewById<TextView>(Resource.Id.MessageText2);
        text2.Text = message;

        var toast = new Toast(_applicationContext);
        toast.SetGravity(GravityFlags.CenterVertical, 0, 0);
        toast.Duration = ToastLength.Long;
        toast.View = layoutView;
        toast.Show();
    }
    private void ShowProgressDialog(string title, string message)
    {
        _progressDialog = new ProgressDialog(_applicationContext);
        _progressDialog .SetTitle(title);
        _progressDialog .SetMessage(message);
        _progressDialog .Show(); 
    }
    private void DismissProgressDialog()
    {
        _progressDialog .Dismiss();
    }
} 
```

`ToastMessages` are working fine with using local context, but `ProgressDialog` doesn't. The debugger crashes while running `_progressBar.Show()`. I have searched all the internet but I can't find any solution. Any suggestions are more than welcome!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:46:58.123

我怀疑问题与[Android 1.6 相同：“android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application”](https://stackoverflow.com/questions/2634991/android-1-6-android-view-windowmanagerbadtokenexception-unable-to-add-window)或[尝试打开对话框时出错：android.view.WindowManager$BadTokenException](https://stackoverflow.com/questions/3552581/error-trying-to-open-a-dialog-android-view-windowmanagerbadtokenexception)

> 即这一行： Context appContext = this.getApplicationContext(); 必须去，而是使用指向您所在活动的指针（可能是这个）。
> 
> 我今天也被这个咬了，烦人的部分是 getApplicationContext() 是来自 developer.android.com 的逐字记录 :(

所以，试试：

```
private void ShowProgressDialog(string title, string message)
{
     var activity = this.GetService<IMvxAndroidCurrentTopActivity>().Activity;
    _progressDialog = new ProgressDialog(activity);
    _progressDialog .SetTitle(title);
    _progressDialog .SetMessage(message);
    _progressDialog .Show(); 
} 
```

# networking - Connect Google TV Remote (phone) to Google TV emulator

> ID：11845521
> 
> 赞同：0
> 
> 时间：2012-08-07T12:02:10.583
> 
> 标签：networking, android-emulator, remote-debugging, google-tv, remote-control

Is there a way to connect Google TV Remote App to a Google TV emulator?

I tried to configure the emulator network to be accessible from outside without success.

I know that this question has already been made here: [How to connect Google TV remote app with Google TV emulator](https://stackoverflow.com/questions/9017032/how-to-connect-google-tv-remote-app-with-google-tv-emulator) but I was hoping that 6 months later, maybe something new has emerged.

Thanks for the help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:03:25.717

这是不可能的，因为模拟器不支持它。最好使用 Google TV 设备来调试第二屏应用程序。

# php - Trouble sending checkbox values with php and javascript Ajax

> ID：11845525
> 
> 赞同：0
> 
> 时间：2012-08-07T12:02:15.530
> 
> 标签：php, javascript

I am having some trouble diplaying the values of my checkboxes in the email my form sends, I am using html form field that uses php and javascript Ajax to send the email. If I leave the code form Javascript out then all the values display as Yes and with the code it displays No. I'm new to php and would appreciate any help. Thanks.

HTML

```
<form method="post" action="test.php" name="contactform" id="contactform">
<input name="extension" type="checkbox" id="extension" value="extension">Extension<br>
<input name="wallmount" type="checkbox" id="wallmount" value="wallmount">Wall Mount<br>
<input name="deskmount" type="checkbox" id="deskmount" value="deskmount">Desk Mount
</form> 
```

PHP

```
$extension=($_POST['extension'])?"Extension: Yes":"Extension: No";
$wallmount=($_POST['wallmount'])?"Wallmount: Yes":"Wallmount: No";
$wallmount=($_POST['wallmount'])?"Wallmount: Yes":"Wallmount: No";
$deskmount=($_POST['deskmount'])?"Deskmount: Yes":"Deskmount: No";

$msg.="$extension";;
$msg.="$wallmount";;
$msg.="$deskmount";; 
```

Javascipt

```
jQuery(document).ready(function(){

$('#contactform').submit(function(){

    var action = $(this).attr('action');

    $('#contactform #submit').attr('disabled','disabled');

    $("#message").slideUp(750,function() {
    $('#message').hide();           

    $.post(action, { 

            extension: $('#extension').serialize(),
        wallmount: $('#wallmount').serialize(),
        deskmount: $('#deskmount').serialize(),

        subject: $('#subject').val(),
        verify: $('#verify').val()
    },
        function(data){
            document.getElementById('message').innerHTML = data;
            $('#message').slideDown('slow');
            $('#contactform #submit').attr('disabled',''); 
            if(data.match('success') != null) $('#contactform').slideUp('slow');

        }
    );

    });

    return false; 

}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:04:52.450

您包括每个复选框的值。你应该测试它是否被选中。

更一般地说，您应该让 jQuery 从您的表单中为您构建数据对象。

```
$.post(action, $('form').serialize()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:06:35.107

尝试

```
$.post(action, { 
extension: $('#extension').attr('checked'),
wallmount: $('#wallmount').attr('checked'),
deskmount: $('#deskmount').attr('checked'),
}, 
```

# javascript - Google map api : How to add my own markers to a map?

> ID：11845532
> 
> 赞同：0
> 
> 时间：2012-08-07T12:02:38.697
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

first: english is not my language, but I try :-)

I like to have a map with markers. The map without marker works fine, you can see it here: [map without markers](http://myrange.de/support/test.php)

The code is just simple:

```
<!DOCTYPE html>
<html>
<head>
<title>MyRange Driving Ranges world wide </title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=yes" />

<style type="text/css">
html { height: 100% }
body { height: 100%; margin: 30px; padding: 0px }
#map_canvas { height: 80% }
</style>
<script type="text/javascript"
src="https://maps.google.com/maps/api/js?sensor=true">
</script>
<script type="text/javascript">
function initialize() {
var latlng = new google.maps.LatLng(51.1601369818597, 6.72036588191986);
var myOptions = {
  zoom: 16,
  center: latlng,
  mapTypeId: google.maps.MapTypeId.HYBRID
};
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

//var image = 'http://myrange.de/support/images/flag_red_big.png';
//var myLatLng = new google.maps.LatLng(51.1601369818597, 6.72036588191986));
//var golfMarker = new google.maps.Marker({ position: myLatLng,map: map, icon: image });
}
</script>
</head>
<body onload="initialize()">
<div align="center" id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html> 
```

all works fine. If I delete the // than I get an empty screen :-( what is wrong in this 3 lines?

```
var image = 'http://myrange.de/support/images/flag_red_big.png';
var myLatLng = new google.maps.LatLng(51.1601369818597, 6.72036588191986));
var golfMarker = new google.maps.Marker({ position: myLatLng,map: map, icon: image }); 
```

I hope you can understand my "english"

greetings from germany hape42

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T12:13:28.150

你的代码在行中断

```
var myLatLng = new google.maps.LatLng(51.1601369818597, 6.72036588191986)); 
```

它有一个额外的右括号。纠正它，它会工作。来自印度好友的问候.. :)

# ajaxform - Apply ajaxForm on IE

> ID：11845542
> 
> 赞同：2
> 
> 时间：2012-08-07T12:03:31.713
> 
> 标签：ajaxform

I'm trying to make this code work for IE(Any of them), The code work on other browsers..

it is possible to make the function AjaxForm work on Internet Explorer? Because I have search on the internet and i did not found nothing that help me solve this problem.

Here is the Code:

```
$('form#upload').ajaxForm({
    beforeSubmit: function() {
        $('div.status').html('<img src="loading.gif" alt="" />');
    },
    success: function(callback) {
        if(callback.match(/(.*):::ok/i)){
            $("form#upload").hide();
            $("div.status").html(callback);
        }
        else{
            alert("Error occurd!");
        }                            
    }
}); 
```

# gwt - 如何在 UiBinder 中为 GWT 小部件设置 id？

> ID：11845544
> 
> 赞同：8
> 
> 时间：2012-08-07T12:03:32.363
> 
> 标签：gwt, uibinder, gwt2

在java代码中我们可以设置id。是否可以在 UiBinder 本身中为 GWT 小部件设置“id”？

如果可能，请给我一个样品。

实际上我尝试了以下代码，

```
<g:Button ui:field="login" debugId="loginButton"> 
```

然后我在警报中检查了它。`Window.alert("Id: " + login.getElement().getId());` 但输出是`Id:`.

未为登录按钮设置 ID

有没有更好的方法来做到这一点？

谁能帮我？

提前致谢， Gnik

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T13:57:01.000

检查模块文件 (*.gwt.xml) 中以下行的可用性：

```
<inherits name="com.google.gwt.user.Debug"/> 
```

并在您的代码中调用[ensureDebugId(Element, id)方法：](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/UIObject.html)

```
login.ensureDebugId(login.getElement(), "loginButton"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T06:47:49.293

无法添加 ID。此问题也作为错误报告提交，并按“设计”关闭。有关详细信息，请参阅：

[http://code.google.com/p/google-web-toolkit/issues/detail?id=4176](http://code.google.com/p/google-web-toolkit/issues/detail?id=4176)

但是，如果您添加 `<inherits name="com.google.gwt.user.Debug"/>`到 *.gwt.xml 文件，则可以添加 debugId。

请参阅[将 GWT 中的 ui:field 映射到生成的代码](https://stackoverflow.com/questions/5228153/mapping-uifield-in-gwt-to-generated-code)

# jquery - jQuery幻灯片在滑动时改变宽度

> ID：11845553
> 
> 赞同：2
> 
> 时间：2012-08-07T12:03:53.413
> 
> 标签：jquery, css, html, uislider

代码工作正常。 [jsFiddle](http://jsfiddle.net/vyWTL/3/)

唯一的问题是它在滑动时改变了它的宽度（当按下“点击这里”时）。似乎它会削减与#slider 中左边距的 100px 相对应的宽度。

为什么它会“跳跃”以及如何解决？代码有什么问题吗？

里面有什么：一个居中 div 的滑块，它有一个内容和一个粘性页脚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:37:27.630

问题在于#slider 上的负边距。由于某种原因，它无法正确绘制动画。

这是一个解决方案：http: [//jsfiddle.net/vyWTL/8/](http://jsfiddle.net/vyWTL/8/)

它保持`margin-left`在 0px，并使用 jquery 来计算`left`应该是什么，给定容器的宽度。由于这是动态的，并且可以在调整视口宽度时发生变化，所以我将它放在一个函数调用中，该函数调用在页面加载和窗口调整大小时调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T12:18:59.420

不确定它是否符合您的需求，但您可以简单地设置：

**CSS**

```
...

.slider{

    ...

    bottom:0px;

    ...

} 
```

然后简单地使用 jQuery .slideToggle() 来处理打开/关闭状态并且更加流畅：

**JS**

```
$("#slide-link").click(function (){

    $('#slider').slideToggle();

}); 
```

这是一个[示例 jsFiddle](http://jsfiddle.net/vyWTL/5/)

**编辑 1**

对此进行了更新，以便 #slide-link 也可以与 #slider 切换。

基本上我们所做的是根据#slider 是否隐藏为它设置动画：

```
if(!$('#slider').is(':hidden')){

    $(this).animate({

        top: $('#global-container').height()-23

    },500)

 }else{

    $(this).animate({

        top: '0px'

    },500) 

 } 
```

*   [JSFIDDLE 在这里](http://jsfiddle.net/vyWTL/10/)

**编辑 2**

这是另一个不必处理 if(#slider is hidden) 从而只编写一次 .animate 函数的更老套的方法。

基本上 $('#slider').is(':hidden') 是一个布尔值，在 JS 中布尔值相当于 0/1 值，其中 false = 0 和 true = 1，因此您可以编写：

```
var hid = $('#slider').is(':hidden')

$(this).animate({

    top: (1-hid)*(contHeight)

 },500) 
```

其中 contHeight 是 #global-container 高度 - #slide-link 高度。

*   [JSFIDDLE 在这里](http://jsfiddle.net/vyWTL/12/)

**编辑 3 滚动问题**

如果我在评论中遇到了您的问题，那么当您用分配的单词 id 填充内容部分时，id 不会滚动，但内容面板似乎填充了 wole #slider 并继续页面而无法滚动它。

这是因为 .content 没有固定的高度，这是因为我们知道页脚是 70px 高，只是我们希望 .content 填满#slider 内剩余的所有空间，但是这样 .content 不会没有“固定值”，即在其 css 中没有对其高度的定义。所以我们需要做的是动态地告诉他它有多高，就像我们用#slide做的那样，所以在JS中添加

```
$('.content').height(contHeight-70) 
```

这样你现在可以添加：

```
overflow:hidden; //this is to prevent orizontal scroll
overflow-y:scroll; // this enables vertical scroll 
```

希望我做对了。

*   [JSFIDDLE 在这里](http://jsfiddle.net/vyWTL/15/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-23T00:16:04.290

```
.ui-effects-wrapper{  overflow-x: visible !important;  width: 100% !important; } 
```

# mysql - I need to find median in mysql

> ID：11845554
> 
> 赞同：2
> 
> 时间：2012-08-07T12:03:53.880
> 
> 标签：mysql, sql, statistics, median

> **Possible Duplicate:**
> [Simple way to calculate median with MySQL](https://stackoverflow.com/questions/1291152/simple-way-to-calculate-median-with-mysql)

I need find the median of each corresponding id value in mysql. Means i need to get like median of 1=3 and median of 2=5 and median of 3=7.Can any one help me..? Thanks in advance.

```
id | val
--------
 1    4
 3    7
 1    2
 2    2
 3    9
 2    8
 3    3 
```

# objective-c - 在 Objective-C 中从 .CER 文件中读取信息

> ID：11845563
> 
> 赞同：1
> 
> 时间：2012-08-07T12:04:37.157
> 
> 标签：objective-c, ios, macos, certificate

*为了方便同事，我构建了一个小型桌面程序，它接收.CER*文件和*.p12*文件作为输入，并将它们转换为 Apple 需要的适当的*.PEM*格式，如[本教程](http://www.raywenderlich.com/2011/05/12/apple-push-notification-services-tutorial-part-12/)中所述。

它实际上只是执行控制台命令将两个文件转换为单个*.PEM*文件，该文件最近将用于签署推送通知。

在我的界面中，我有一个`NSTextField`用户可以编写 iOS 应用程序*包标识符*的位置，因为所有生成的文件都将使用它作为其名称的前缀。

![.PEM 文件生成器](../Images/88bdef9353c8562c6806c8ead48683b5.png)

我意识到在原始*.CER*文件中我们可以找到*捆绑标识符*，我想：嘿，让我们改用它，这样我的朋友就不会犯任何错误。

所以我的问题是，是否无论如何都需要在 Objective-C 中解析*.CER*文件以获得 iOS 应用程序*Bundle Identifier*。

# javascript - 将 '\n' 附加到在 IE 中不起作用的字符串

> ID：11845567
> 
> 赞同：0
> 
> 时间：2012-08-07T12:04:45.643
> 
> 标签：javascript, jquery, cross-browser

这：

```
$('#myDiv').val( $('#myDiv').val() + "\n") 
```

不在 IE 中添加换行符。`<br>`有没有办法在不实际附加而不是 \n 的情况下克服这个问题？我稍后在代码中进行解析，这就是为什么我不能使用`<br>`而不是 \n。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:15:39.840

如果要使其可见，则必须添加两条新行。
使用`html`and`<br>`代替。

空行仅在您之后有另一个或包含一些文本时才可见。

*   [demo1](http://jsfiddle.net/ricardolohmann/bb97S/)：不可见

*   [演示2](http://jsfiddle.net/ricardolohmann/bb97S/1/)：可见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:22:02.303

我刚刚注意到您正在使用`val()`. 使用`text()`而不是`val()`.

# python - 实现比较运算符时如何处理混合类型？

> ID：11845569
> 
> 赞同：5
> 
> 时间：2012-08-07T12:04:46.733
> 
> 标签：python, comparison

完成以下代码的最自然方法是什么？

```
import functools

@functools.total_ordering
class X:
    def __init__(self, a):
        self._a = a

    def __eq__(self, other):
        if not isinstance(other, X):
            return False
        return self._a == other._a

    def __lt__(self, other):
        if not isinstance(other, X):
            return ...                    // what should go here?
        return self._a < other._a

if __name__ == '__main__':
    s = [2, 'foo', X(2)]
    s.sort()
    print s 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:06:06.640

**我个人的做法：**

一个例外。

不同类型之间没有自然顺序。

**官方一：（**选这个，应该有）

虽然我不完全同意这一点，但手册清楚地说明了应该如何做：

[http://docs.python.org/library/stdtypes.html#comparisons](http://docs.python.org/library/stdtypes.html#comparisons)

> 不同类型的对象，除了不同的数值类型和不同的字符串类型，从不比较相等；此类对象的排序一致但任意（因此对异构数组进行排序会产生一致的结果）。此外，某些类型（例如，文件对象）仅支持退化的比较概念，其中该类型的任何两个对象都不相等。同样，这些对象的顺序是任意但一致的。当任何操作数是复数时，<、<=、> 和 >= 运算符将引发 TypeError 异常。

所以基本上......我会提出一个例外，但最pythonic的排序方式是遵守手册。

> 应该有一种——最好只有一种——明显的方法来做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T12:06:37.320

你可以选择任何你觉得自然的东西；`False`意味着您的实例总是在其他类型之后排序，`True`并且它们将在之前排序。

或者，您可以返回`NotImplemented`（参见[和`__lt__`其他比较方法文档](http://docs.python.org/reference/datamodel.html#object.__lt__)）以表示不支持比较：

```
def __lt__(self, other):
    if not isinstance(other, X):
        return NotImplemented
    return self._a < other._a 
```

引用文档：

> 如果富比较方法`NotImplemented`没有为给定的一对参数实现操作，则它可能会返回单例。按照惯例，`False`返回`True`成功比较。但是，这些方法可以返回任何值，因此如果在布尔上下文中使用比较运算符（例如，在 if 语句的条件中），Python 将调用`bool()`该值来确定结果是真还是假。

# php - 为什么这个 array_walk 函数会抛出错误？

> ID：11845574
> 
> 赞同：1
> 
> 时间：2012-08-07T12:04:53.503
> 
> 标签：php

```
array_walk ($this->something, [$this, 'function_name'], $part_something); 
```

> 解析错误：语法错误，第 67 行 /.../...php 中的意外 '['

这适用于我的本地测试环境，但不适用于服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:06:01.550

您是否在生产环境中运行 PHP 5.4？如果不是，括号语法在 PHP 5.3 及更低版本中不是表示数组的有效方式，因为它是 5.4 中的新特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:09:58.223

尝试：

```
array_walk ($this->something, array($this, 'function_name'), $part_something); 
```

看看这个[http://it2.php.net/manual/en/function.array-walk.php](http://it2.php.net/manual/en/function.array-walk.php)

# objective-c - 为什么这个数组不需要 [NSArray 数组]？

> ID：11845586
> 
> 赞同：0
> 
> 时间：2012-08-07T12:05:40.483
> 
> 标签：objective-c, nsarray

这是代码的一小部分：

```
int main (int argc, const char * argv[]) {
    @autoreleasepool {
        NSProcessInfo *proc = [NSProcessInfo processInfo];
        NSArray *myArray = [proc arguments];
        ... 
```

为什么不是这样写`NSArray *myArray = [NSArray arrayWithArray: [proc arguments]];`？另外，使用 ARC 是否意味着数组不需要它们的`init`方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:07:22.493

因为`[proc arguments];`已经返回一个`NSArray *`. 写作`NSArray *myArray = [NSArray arrayWithArray: [proc arguments]];`只是多余的。

# spring-mvc - 将错误从控制器返回到 Spring MVC 中的视图

> ID：11845588
> 
> 赞同：0
> 
> 时间：2012-08-07T12:05:42.773
> 
> 标签：spring-mvc

在 Spring MVC 中，我有以下控制器：

```
@RequestMapping(value="adminUsers", method = RequestMethod.POST) 
public ModelAndView listAdminUsers(Person newPerson,  HttpServletResponse response)  throws Exception {
Person person = personService.findPerson(newPerson.getUsername());
if (person == null) {
    // Set errorText = "Invalid Person";
    // redisplay view
    ModelAndView mav = new ModelAndView("adminUsersList");
    return mav;
} else {
    Roles roles = new Roles();
    roles.setPersonCode(person.getPersonCode());
    roles.setRoleType("ADMN");
    rolesMapper.insert(roles);
    return new ModelAndView("redirect:/admin/adminUsers.html");
} 
} 
```

有观点：

```
 <form:form method="post" action="${action}" commandName="person" >
    <form:label path="username">Add new administrator:</form:label>
    <form:input path="username" size="20"/>
    <form:errors path="username" />
    <input type="submit" value="Submit Changes"/> </form:form> 
```

我如何将错误返回给视图，以便由`<form:errors path="username" />`标签显示？

这类似于[如何从这个 Spring MVC 控制器返回错误状态和验证错误？](https://stackoverflow.com/questions/9337824/how-to-return-error-status-and-validation-errors-from-this-spring-mvc-controller)除了我返回的是一个网页，而不是一个 REST 对象，所以那里的答案不适用。

我不想使用`Validator`，因为上面调用了数据库，这不仅仅是检查用户名是否为空等。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:10:08.737

添加`BindingResult`到您的方法签名中。从那里，`bindingResult.rejectValue("username", "username.notvalid", "Username is not valid");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:53:47.090

BrandonV 拥有它。我的控制器现在看起来像：

```
 // Create a new item
@RequestMapping(value="adminUsers", method = RequestMethod.POST)
public ModelAndView listAdminUsers(Person newPerson,  BindingResult result, HttpServletResponse response)  throws Exception {
    Person person = personService.findPerson(newPerson.getUsername());
    if (person == null) {
        result.rejectValue("username","username.notvalid","Username doesn't exist");
        ModelAndView mav = new ModelAndView("adminUsersList");  //This is ugly, it's copy & pasted from above
        mav.addObject("adminUsersList", adminService.findAllAdminUsers()); //Ugly...
        return mav;
    } else {
        Roles roles = new Roles();
        roles.setPersonCode(person.getPersonCode());
        roles.setRoleType("ADMN");
        rolesMapper.insert(roles);
        return new ModelAndView("redirect:/admin/adminUsers.html");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T10:14:01.473

您需要更改方法逻辑：

> if (result.hasErrors){ return ""; } else { 创建你的人对象逻辑就在这里！}

# asp.net - 如何在Windows身份验证异常中处理“在数据库'master'中创建数据库权限被拒绝？

> ID：11845589
> 
> 赞同：0
> 
> 时间：2012-08-07T12:05:43.413
> 
> 标签：asp.net, sql-server

`apsnet_regsql`我使用Visual Studio 10 命令 propmpt（以管理员身份运行）中的命令打开了“ASP.NET SQL Server 安装向导” 。

在那个向导中，我选择`Windows Authentication`了而不是`Sql Authentication`. 当我尝试连接到主数据库时，出现以下异常

`An error occurred during the execution of the SQL file 'InstallCommon.sql'. The SQL error number is 262 and the SqlException message is: CREATE DATABASE permission denied in database 'master'. Creating the TestDB database`

并且 SqlException 是：

`create database permission denied in database 'master' in windows authenticAtion`.

我了解我无权创建数据库。但是我如何以及在哪里可以允许这样做。

所以请帮助我并为我的问题提供解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:25:57.400

`sysadmin`您需要以属于or`dbcreator`角色的用户身份登录。

# http - J2me 中的 400 错误请求

> ID：11845591
> 
> 赞同：1
> 
> 时间：2012-08-07T12:05:54.520
> 
> 标签：http, java-me, midp

我正在尝试使用 POST 方法从我的 JME 应用程序中访问 .svc 服务。但收到“错误要求”。以下是我的代码。

```
HttpConnection hc = (HttpConnection) Connector.open(url, Connector.READ_WRITE);
hc.setRequestMethod(HttpConnection.POST);
hc.setRequestProperty("User-Agent", "Profile/MIDP-1.0 Configuration/CLDC-1.0" );
hc.setRequestProperty("Content-Type", "text/xml; charset=utf-8");
hc.setRequestProperty("Content-Length", ""+(postMsg.getBytes().length));

out = hc.openOutputStream();
out.write(postMsg.getBytes());

System.out.println("hc.getResponseCode() = "+hc.getResponseCode()+ "  hc.getResponseMessage() = "+hc.getResponseMessage()); 
```

请告诉我代码有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:15:32.960

我使用 Ksoap2-j2me-core jar 而不是 http，并使用我发现的以下代码 -

```
 SoapObject request = new SoapObject("namespace", "login");   

    request.addProperty("username", "pranav");   
    request.addProperty("password", "gangan");   

    //create the SOAP envelope   
    final SoapSerializationEnvelope env = new SoapSerializationEnvelope(SoapEnvelope.VER11);   
    env.setOutputSoapObject(request);   

    //create the transport and then call   
    final HttpTransport httpTransport = new HttpTransport("http://URL");   
    httpTransport.call("\"login\"", env);   

    SoapObject body = (SoapObject) env.bodyIn;   

    //body.getProperty(0) will return the content of the first tag inside body   
    Object response = body.getProperty(0);   
            System.out.println(response.toString); 
```

# php - 我的脚本和 hostgators 托管服务，以及一些附加信息

> ID：11845601
> 
> 赞同：1
> 
> 时间：2012-08-07T12:06:36.427
> 
> 标签：php, mysql, cron, xml-rpc

大家好，我有几个问题想问。我使用 hostgators 业务计划托管在共享服务器上，当我与他们谈论限制时，他们告诉我发送电子邮件的限制是每小时 500 封（我认为但不太确定可能是 1000 封，但事实并非如此问题。）我认为当我的工作上线时我会遇到问题，所以我正在考虑制作某种脚本（PHP）来监控外发电子邮件，允许发送 350 封电子邮件并将其余邮件搁置直到一个小时过去，然后再发送 350 个，依此类推。我正计划用 XML RPC 为引擎构建一个更新系统并与远程服务器通信，如果有任何更新可以开始读取它们*****并将它们应用于系统*****由 CRON 触发。这就是我现在想给出的信息：

**1\. 邮件监控：**
*1.1*如何获取邮件发送量？
*1.2*我应该如何为它设置 CRON？（如果我设置 CRON 的时间少于 5 分钟，我认为它会被删除。）或者我应该使用替代方案，它应该是什么？
*1.3*有人可以给我一个示例脚本吗？
**2\. XML RPC updater：**
*2.1*最好的方法是什么？
*2.2*除了“检查”->“响应[true|false]”->“读取更新的内容”->“写入更新的内容”之外的方法是什么？
*2.3*制作这样的系统是个好主意吗？制作它的最安全方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:22:51.440

您的数据库中始终可以有一个表格，用于设置特定日期已发送的电子邮件数量。您可以`UPDATE email_count SET emails = emails + 1 WHERE date = $current_date`在 PHP 查询中使用（`$current_date`PHP 必须从时间戳中获取的变量），并且在发送电子邮件之前，使用`SELECT`查询检查该值。

当然，你需要决定你想要什么。如果达到限制，则禁止发送电子邮件（我将以用户注册确认电子邮件为例），或者只是限制（推迟）它们。如果您决定**禁止**，您的工作很简单：如果金额已经达到限制，您只需禁用注册表单。

如果您决定**节流**，您将遇到一个非常复杂的问题，需要非常复杂的解决方案。您将需要生成电子邮件（作为它们已经生成的文本格式，或者只是可变内容）并将它们与`To:`值一起存储在数据库中。您还需要准确性和设置`cron`，以便在接下来的一小时内，您首先解析前一小时的*“遗留”*电子邮件。

但是，如果前一天不仅生成了如此多的电子邮件，而且之后的一小时都被*“堵塞”*了怎么办？您需要衡量和模拟您网站的使用情况并获得最佳示例。可能有一些方程式可以帮助您建立节流模式。限制的一半是每小时为可能*的遗留*电子邮件保留的？考虑到一些[人口统计方法](http://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval)？有多种选择。

请注意，如果服务器上安装了 CLI PHP，`cron`也可以执行 PHP 脚本。只需确保以更适合纯文本报告文件的方式生成 cron-ran 文件的输出，因为可以设置 cron 以将文件的输出保存到文件系统上的某个文件中。

```
00 * * * * /usr/local/bin/php /home/john/myscript.php 
```

* * *

获取远程更新需要您注意防止任何恶意数据。您应该尝试将更新信息封装到压缩容器（gzip？）中并计算校验和。方法应该是：

*   查询远程服务器
*   检查远程服务器上的差异/更新
*   获取响应（如果有差异）
*   通过一些消毒和散列检查本地差异
*   合并获取的更新

如果您也要设置远程服务器的系统（XML-RPC 可能会发送作为响应的内容），我会尝试实施具有足够安全检查的可靠方法。但要尽量防止过早的优化和过度杀伤。

但是，您还可以使用其他包装器与远程服务器进行通信。以[cURL](http://php.net/manual/en/book.curl.php)为例。

# git - 将 GIT 与服务器同步

> ID：11845603
> 
> 赞同：1
> 
> 时间：2012-08-07T12:06:40.353
> 
> 标签：git, synchronization, bitbucket

我使用 bitbucket 作为 GIT 存储库 .. 有没有办法将它链接到我自己的服务器并在它们之间同步文件？每当我更改文件时，我将其推送到 bitbucket 并且更改将自动反映在服务器中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:12:59.090

您可以在本地 repo 上设置两个遥控器，一个用于 bitbucket，一个用于您的服务器。然后，当您准备好向上游推送时，只需推送到两个存储库。它需要两个命令，但比在应该分发 git 时尝试开发一些同步过程要容易得多。这样，如果两个存储库之间存在任何合并冲突，您可以合并并提交更新以使它们保持同步。

```
git push bitbucket master
git push myserver master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:11:12.083

我认为最简单的方法是制作一个从您的服务器中提取的 cronjob。

还有其他一些方法，但它们更复杂一些。例如，您构建了一个 Git 钩子并编写了一些脚本，它们通过 SSH 来处理这些事情。或者您可以使用[Capistrano](https://github.com/capistrano/capistrano/wiki/)来部署您的文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-15T18:54:01.513

我发现这个项目有助于满足我们的类似需求：

[https://bitbucket.org/alixandru/bitbucket-sync](https://bitbucket.org/alixandru/bitbucket-sync)

# c++ - 内存中的多图表示

> ID：11845604
> 
> 赞同：2
> 
> 时间：2012-08-07T12:06:46.950
> 
> 标签：c++, xcode, multimap

我正在调试我的代码，有一次我有一个多图，其中包含一对 a`long`和 a`Note object`创建如下：

```
void Track::addNote(Note &note) {
    long key = note.measureNumber * 1000000 + note.startTime;
    this->noteList.insert(make_pair(key, note));
} 
```

我想看看这些值是否真的插入到多重映射中，所以我放置了一个断点，这就是多重​​映射的样子（在 Xcode 中）：

![在此处输入图像描述](../Images/7152bdb12bc53166ff8517d3b842ab34.png)

似乎我可以无限打开元素（我的实际多图是第一个被调用的元素`noteList`）如果这是正常的任何想法以及为什么我无法读取实际的对值（长和注释）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:09:21.927

似乎是呈现集合的组件中的错误。大约在列表的中间有一个条目是 0x00000000，但渲染继续低于该条目，但没有任何有效指针。也许您需要添加您自己对显示数据的常识性解释，并将空值视为树的该部分的结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:54:24.470

libstdc++ 使用通用红/黑树实现它的映射和集合。树的节点使用一个基类`_Rb_tree_node_base`，其中包含指向父/左/右节点相同类型的指针。

为了访问数据，它对特定于您提供的模板参数的节点类型执行静态转换。除非您可以强制转换，否则您将无法使用 XCode 查看数据。

它对链表做类似的事情，使用链表节点库。

编辑：这样做是为了删除模板生成的重复代码量。而不是有`RbTree<Type1>`, `RbTree<Type2>`, 等等；libstdc++ 有一组在基类上工作的操作，无论映射的基础类型如何，这些操作都是相同的。它仅在需要检查数据时进行转换，并且所有树的实际旋转/重新平衡代码都是相同的。

# ios - iOS 私有 API 调用将应用程序带到前台

> ID：11845608
> 
> 赞同：4
> 
> 时间：2012-08-07T12:07:05.130
> 
> 标签：ios, iphone-privateapi

有没有办法以编程方式将当前在后台运行的 iOS 应用程序带到前台？请注意，这是一个用于非越狱设备的企业 iOS 应用程序，因此可以调用私有 API。

我已经尝试了许多解决方案，包括注册自定义 URL 处理程序和`openURL`从后台任务调用，但似乎`openURL`后台任务忽略了调用。`openURL`我可以使用内部使用的较低级别的私有 API 调用吗？

我尝试过的其他方法包括[Launch other application without URL schema in iphone?](https://stackoverflow.com/questions/11693796/launch-other-application-without-url-schema-in-iphone/11693879#11693879) 但这些似乎也不适用于后台任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-06T23:17:04.623

```
[[UIApplication sharedApplication] launchApplicationWithIdentifier:@"" suspended:NO]; 
```

您还需要将`com.apple.springboard.launchapplications`权利设置`YES`为它才能正常工作。

# c - 将多个字符串分别放入数组中

> ID：11845620
> 
> 赞同：0
> 
> 时间：2012-08-07T12:07:56.907
> 
> 标签：c, arrays, string

我想编写一个从给定字符串中获取子字符串的程序。

然后，程序将检查子串是否为回文。如果是回文，它将在其他任何地方列出它们，然后它会整理出独特的回文。

但是有什么过程可以让我将多个字符串单独放入一个数组中吗？

我编写了一个程序来计算有多少子串是回文，但是我不知道如何从它们中计算唯一的回文。

我的代码在下面：

```
#include<stdio.h>
#include<malloc.h>
#include<string.h>
char* substring(char*,int,int);
int is_palindrome(char array[],int length);
int main()
{
    char string[85],*pointer;
    int position,length,temp,string_length,pesky;
    printf("enter a string\n");
    while(gets(string)){
        position=1,length=2;
        temp=string_length=pesky=strlen(string);
        while(position<=string_length){
            while(length<=temp){
                pointer=substring(string,position,length);
                if(is_palindrome(pointer,length)==1){pesky++;puts(pointer);}
                free(pointer);
                length++;
            }
            position++;
            temp--;
            length=2;
        }
        printf("The string '%s' contains %d palindromes.\n",string,pesky);
    }
    return 0;
}
char* substring(char *string,int position,int length)
{
    char *pointer;
    int c;
    pointer=malloc(length+1);
    if(pointer==NULL){
        printf("unable to locate memory.\n");
        exit(EXIT_FAILURE);
    }
    for(c=0;c<position-1;c++){
        string++;
    }
    for(c=0;c<length;c++){
        *(pointer+c)=*string;
        string++;
    }
    *(pointer+c)='\0';
    return pointer;
}
int is_palindrome(char array[],int length)
{
    int k,j,o=0;
    for(k=length-1,j=0;k>j;k--,j++){
        if(array[k]!=array[j]){
        o=1;
        break;
        }
    }
    if (o==0) {return 1;}
    else {return 0;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:22:01.463

为了存储各种子字符串，您需要一个 char 指针数组。当您分离出要复制到分配内存区域的子字符串时，您获取返回的指针并将指针存储到您的 char 指针数组中。

所以像下面这样的东西将定义一个字符数组以及当前在数组中的字符指针的数量。

```
char *pArrayStrings [100];
int   iArrayStringsIndex = 0; 
```

此时，您将拥有一个 char 指针数组。然后，您可以在数组中进行搜索以确定是否已经找到回文。类似于以下内容。

```
{
    int iLoop = 0;
    // search the array to see if this palindrome is already there
    for (iLoop = 0; iLoop < iArrayStringsIndex; iLoop++) {
        if (strcmp (pArrayStrings[iLoop], pointer) == 0) {
            // found a match for this palindrome
            break;
        }
    }
    if (iLoop >= iArrayStringsIndex) {
       // this is a new palindrome that is not in the array
       pArrayStrings[iArrayStringsIndex] = pointer;
       iArrayStringsIndex++;
    }
} 
```

上述`strcmp()`函数区分大小写，因此您可能希望使用不区分大小写的比较。

我没有尝试编译此代码，因此其中可能存在错误，但这将是一种通用方法，可以让您接近您想要的。

完成后，您可以遍历数组并执行 a`free()`以释放分配的内存。

# iphone - poptorootviewcontroller不依次调用rootview控制器的dealloc方法和viewdidappear方法

> ID：11845621
> 
> 赞同：1
> 
> 时间：2012-08-07T12:08:00.930
> 
> 标签：iphone, ios, objective-c, xcode, uiviewcontroller

我有一个导航控制器，里面有 4 个 VC。我有一个单例类，其委托属性设置为堆栈顶部的 VC。我在每个 VC 的 dealloc 方法中将此委托设置为 nil。我在 rootVC 的 viewdidappear 方法中设置委托。

当我从第 4 个 VC 弹回根 VC 时，调用 dealloc 方法（堆栈中的所有 VC）和 viewdidappear 方法的顺序如下：

```
"FirstVC dealloc called"
"SecondVC dealloc called"
"viewdidappear of root VC is called"
"ThirdVC dealloc called" 
```

现在，我面临的问题是委托被设置为 nil，即使我在根 VC 的 viewdidappear 方法中将其设置为 self（这也可以从控制流中看到）。我怎样才能防止这种情况？我希望在所有 VC 真正释放后调用 viewdidappear 方法。

谢谢， 奥贝德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:39:00.843

由于您无法预测方法调用的顺序，除非 Apple 发布了一些关于它们是什么的保证，也许您可​​以通过创建如下方法将单例编程为防御性的：

```
- (void)removeDelegate:(UIViewController *)oldDelegate; 
```

如果委托与指定的旧委托匹配，则将其设置为 nil。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:47:35.607

`dealloc`一旦不再需要对象，就会自动调用。当您弹出 时`ThirdVC`，由于委托属性仍在保留它，因此`dealloc`不会被调用。然后，当您的 rootVC`viewDidAppear`被调用时，它将 设置`rootVC`为委托。此时，不再需要您的 thirdVC，这会触发`dealloc`.

您可以做的一件事是将委托属性设置为 nil，而不是在 dealloc 上，而是在`viewWillDisappear`each 的方法上`ViewController`，因为这个方法肯定会在下一个`ViewController`出现之前被调用。

# mysql - 在查询中选择特定数字作为列值

> ID：11845624
> 
> 赞同：1
> 
> 时间：2012-08-07T12:08:07.357
> 
> 标签：mysql

我认为这很容易，但我无法通过搜索找到答案

我想做这样的事情

```
if(!$user_logged)
{
 $q = "select `id` , 0 as choice from tbl1";
}
else
{
 $q = "select tbl1.id , tbl2.choice as choice from tbl1 join tbl2 ON .... ";
} 
```

如果用户没有登录，我想选择 0 作为选择，所以我不需要做额外的加入，但我得到

```
Unknown column '0' in 'field list' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:30:27.020

产生错误（您显示）的唯一方法是，如果您的查询中有这个：

```
select id , `0` as choice from test ;
         ---^ ^------
         ------------ notice the backticks there 
```

做了：

```
select id , 0 as choice from test ; 
```

并且查询是有效的，MySQL 不会抛出任何错误。

如果您想在 PHP 中返回一个字符串（就像`choice`a`CHAR()`或列中的`VARCHAR()`列）并且您希望从查询的 2 个变体中获得一致的结果，请使用单引号：

```
select id , '0' as choice from test ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:10:27.640

我不确定这是否是你要找的，但试试这个：

```
SELECT id AS choice FROM tbl1 WHERE id=0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:12:08.753

如果你已经知道你想要什么值 (0) 为什么要让 SQL 返回它？只需使用 0 而不是解析查询中的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T12:13:25.537

试试这个查询：-

```
SELECT id,'0' AS Choices FROM tbl1 ; 
```

# objective-c - 用图片objective-C自定义UITableViewCell

> ID：11845625
> 
> 赞同：0
> 
> 时间：2012-08-07T12:08:15.457
> 
> 标签：objective-c, xcode, uitableview

我想有自定义单元格`UITableView`，我`UIView`通过情节提要创建我的，并将它们链接到代码

不知道为什么我的图片没有出现

请检查我的代码好吗？

自定义代码.h

```
: UITableViewCell

@property (strong, nonatomic) IBOutlet UIImageView *weekImg;

@end 
```

自定义代码.m

```
@synthesize weekImg;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
    weekImg=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"red.png"]];

}
return self;
} 
```

我的方法：`cellForRowAtIndexPath:`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

 WeekTableViewCell *cell = (WeekTableViewCell*)[tableView dequeueReusableCellWithIdentifier:@"WeekTableViewCell"];

NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]];
NSArray *contents = [[self sectionContents] objectForKey:key];
NSString *contentForThisRow = [contents objectAtIndex:[indexPath row]];

[[cell textLabel] setText:contentForThisRow];

  return cell;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:20:27.637

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    cell.imageView.layer.cornerRadius=10.0f;
    [cell.imageView.layer setMasksToBounds:YES];
    cell.textLabel.text=[NSMUtableArray objectAtIndex:indexPath.row];
switch (indexPath.row)
        {
            case 0:
                cell.imageView.image=[UIImage imageNamed:@"img1.png"];
                break;
            case 1:
                cell.imageView.image=[UIImage imageNamed:@"img2.png"];
                break;
            case 2:
                cell.imageView.image=[UIImage imageNamed:@"img3.png"];
                break;
            case 3:
                cell.imageView.image=[UIImage imageNamed:@"img4.png"];
                break;
            default:
                break;
        }
}

    cell.imageView.layer.cornerRadius=10.0f;
    [cell.imageView.layer setMasksToBounds:YES];, it is used by QuartzCore. 
```

像这样输出单元格，我们可以调整图像大小。

![在此处输入图像描述](../Images/226ee1fe3119dae9714c0976719ebcaa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:18:01.177

我认为这是因为您的代码只是在寻找先前创建的单元格。开始时不会创建任何单元格，也无法以这种方式检索任何单元格。

```
WeekTableViewCell *cell = (WeekTableViewCell*)[tableView dequeueReusableCellWithIdentifier:@"WeekTableViewCell"];

if (cell == nil){
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"WeekTableViewCell" owner:nil options:nil];
        for(id currentObject in topLevelObjects)
        {
            if([currentObject isKindOfClass:[WeekTableViewCell class]])
            {
                cell = (WeekTableViewCell *)currentObject;

                break;
            }
        }
    }
 cell.selectionStyle = UITableViewCellSelectionStyleNone;
NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]];
NSArray *contents = [[self sectionContents] objectForKey:key];
NSString *contentForThisRow = [contents objectAtIndex:[indexPath row]];

[[cell textLabel] setText:contentForThisRow];

return cell; 
```

如果没有可重复使用的单元格，则以这种方式创建一个新单元格

# android - 在 Android 的谷歌地图上显示当前位置

> ID：11845630
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:08:34.683
> 
> 标签：android, google-maps, google-maps-api-3

我想制作这样的应用程序，当用户打开应用程序时，它会显示一个带有当前位置的谷歌地图。我正在尝试一些教程，但很难理解或者有些难以理解。所以请给我示例代码这或建议正确的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:23:40.567

您可以使用[MyLocationOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MyLocationOverlay)。代码将如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Find the map view
    mMapView = findViewById(R.id.map);

    // Create an overlay and add to map view
    mMyLocationOverlay = new MyLocationOverlay(this, mMapView);
    mMapView.getOverlays().add(mMyLocationOverlay);
}

@Override
protected void onResume() {
    super.onResume();
    mMyLocationOverlay.enableMyLocation();
}

@Override
protected void onStop() {
    mMyLocationOverlay.disableMyLocation();
    super.onStop();
} 
```

# forms - PrimeFaces JSF2.0表单中对话框的同步验证和显示

> ID：11845631
> 
> 赞同：0
> 
> 时间：2012-08-07T12:08:37.633
> 
> 标签：forms, validation, jsf-2, dialog

我有一个带有 jsf2 和 primefaces 的表单，其中包含一个管理两件事的提交按钮：首先：使用更新属性进行表单验证，其次在验证成功时启动一个确认对话框，所有这些都由以下人员管理：

```
update="myfieldset display" 
```

所以我的问题是，当我单击按钮验证时：如果验证不成功：验证消息显示在表单中：好的，但如果验证成功，我必须再次单击以显示对话框

有谁知道如何解决这个问题？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <script type="text/javascript">
        <!--
        function effacer(formulaire){
            for (var i=0; i<formulaire.length; i++){
                if (formulaire.elements[i].type=="input" || formulaire.elements[i].type=="textarea" ) {formulaire.elements[i].value="";}
            }
            document.getElementById('contenu_input').value="";
        }
        //-->
    </script>

    <body>

        <ui:composition template="./template_utilisateur.xhtml">

            <ui:define name="content">
                <h:form id="form" prependId="false" >  
                    <p:fieldset  id="myfieldset" legend="Nouveau message">

                        <p:messages id="msgs"/>

                        <h:panelGrid columns="3" style="margin-bottom:10px">
                            <h:outputLabel for="title" value="Titre : *"/> 
                            <p:inputText id="title" style="width:340px;" value="#{messageController.titre}" required="true" requiredMessage="veuillez saisir un titre" label="Titre">  
                                <f:validateLength minimum="10" />  
                            </p:inputText>  
                            <p:message for="title" display="icon"/>
                            <h:outputLabel for="city" value="Destinataire : *" /> 
                            <p:selectOneMenu id="city" value="#{messageController.destinataire}" label="Destinataire" required="true" requiredMessage="veuillez choisir au moins un destinataire" >  
                                <f:selectItem itemLabel="Séléctionner déstinataire" itemValue="" />  
                                <f:selectItems value="#{messageController.users}" />    
                            </p:selectOneMenu>  
                            <p:message for="city" id="msgSurname3" display="icon"/>

                            <h:outputLabel for="comm" value="Lié a La commande N° : " /> 
                            <p:selectOneMenu id="comm" label="Commande"  value="#{messageController.idComm}"  >  
                                <f:selectItem itemLabel="Aucune commande" itemValue="" />  
                                <f:selectItems value="#{messageController.id_c}" />    
                            </p:selectOneMenu>  
                            <p:message for="comm" id="msgSurnamse3" display="icon"/>

                        </h:panelGrid>
                        <h:outputLabel for="contenu" value="Contenu : *" /> 
                        <h:panelGrid columns="2">
                            <p:editor id="contenu" widgetVar="editer" value="#{messageController.message}" width="600" required="true" requiredMessage="Veuillez saisir le contenu du message" >
                                <f:validateLength minimum="10" /> 
                            </p:editor>  
                            <p:message for="contenu" id="editorm" display="icon"/>
                        </h:panelGrid>

                        <h:panelGrid columns="3">  
                            <p:commandButton id="submitButton" value="envoyer" update="myfieldset display"  onclick="#{messageController.retournerDialog()}" icon="ui-icon-disk" />  
                            <p:commandButton id="clearButton" type="reset" value="initialiser" onclick="editer.clear()"  
                                             icon="ui-icon-close" /> 
                        </h:panelGrid>  

                    </p:fieldset>  

                    <p:dialog header="Confirmation" widgetVar="dlg" showEffect="fade" hideEffect="fade" modal="true">  
                        <h:panelGrid id="display" columns="1" cellpadding="4">
                            <h:outputText value="Titre : " />  
                            <h:outputText value="#{messageController.titre}" id="model"/>  

                            <h:outputText value="Déstinataire :" />  
                            <h:outputText value="#{messageController.destinataire}" id="year"/>  

                            <h:outputText value="Lié à la commande N° : " />  
                            <h:outputText value="#{messageController.idComm}" id="manufacturer"/>  

                            <h:outputText value="Contenu :" />  
                            <h:outputText id="displxcay" value="#{messageController.message}" escape="false" />
                        </h:panelGrid>

                    </p:dialog>  

                </h:form>  

            </ui:define>

        </ui:composition>

    </body>
</html> 
```

这里是启动对话框的方法

```
public String retournerDialog(){
    String retour = "";
    if( getDestinataire() != "" && getMessage()!= "" && getTitre()!="" && getMessage().length()>9 && getTitre().length()>9){
        retour="dlg.show()";
    }
    return retour;
    } 
```

先感谢您

* * *

**更新**：感谢 BalusC 的详细回复，我测试了您的两个答案，但它们在这里不起作用是按钮的代码：

```
<p:commandButton id="submitButton" value="envoyer" update="myfieldset, display" action="#{messageController.showDialog}"  icon="ui-icon-disk" /> 
```

和 managedBean ：

```
 private boolean showDialog;

public void showDialog() {
    showDialog = true;
}

public boolean isShowDialog() {
    return showDialog;
} 
```

并且使用上面的代码，即使验证成功，对话框也不会出现：我认为因为操作必须返回结果字符串而不是布尔值，并且当我制作时：

```
<p:commandButton id="submitButton" value="envoyer" update="myfieldset, display" onclick="dlg.show();"  icon="ui-icon-disk" /> 
```

即使验证失败也会出现

并在我将这样的方法放在上面时提醒您：

```
<p:commandButton id="submitButton" value="envoyer" update="myfieldset, display" onclick="#{messageController.retournerDialog()}"  icon="ui-icon-disk" /> 
```

我必须单击两次（我认为一次用于验证，一次用于显示对话框）才能显示对话框

也在官方文档中：他们将此对话框与 onclick 属性一起使用

你有什么别的想法吗

# java - Exchange 2007 日历的 WebDAV 查询：400 错误

> ID：11845636
> 
> 赞同：1
> 
> 时间：2012-08-07T12:08:50.987
> 
> 标签：java, webdav, exchange-server-2007

我正在尝试从 Java 中的 Exchange 日历中获取事件。我正在使用这个查询：

```
<?xml version=\"1.0\"?>
<D:searchrequest xmlns:D=\ " DAV: \>
    <D:sql>
        SELECT "DAV:contentclass", "DAV:displayname"
        FROM "http://domain.com/Exchange/user/Calendar"
        WHERE "DAV:ishidden" = false"
        AND "DAV:isfolder" = false" "
    </D:sql>
</D:searchrequest> 
```

但是，我不断收到 400 - Bad Request 错误代码。有人能告诉我语法有什么问题吗？还是这种方法有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:19:14.220

在 SQL 之后使用“JWebDAV for Exchange”库是等效的

选择 "DAV:contentclass","urn:schemas:calendar:dtstart","urn:schemas:calendar:dtend","http://schemas.microsoft.com/mapi/subject","http://schemas. microsoft.com/mapi/proptag/x1000001e”来自“http://server/exchange/mailbox/Calendar”，其中“DAV:contentclass”=“urn:content-classes:appointment”和“http://schemas.microsoft。 com/mapi/proptag/x10f4000b" = 假

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:29:08.737

“http://domain.com/Exchange/user/Calendar”应该是一个文件夹/集合吗？如果是这种情况，请尝试在末尾添加“/”。当我尝试在文件夹上使用 WebDAV 方法同时省略结尾斜杠时，我经常收到错误请求错误。

# c++ - 将类函数实现从 .h 移至 .cpp 过程

> ID：11845638
> 
> 赞同：1
> 
> 时间：2012-08-07T12:09:06.233
> 
> 标签：c++, visual-studio-2010

ATL项目“Class>Add>Implement Interface”程序从IDL到头文件生成了大量的类函数。据我了解，在 cpp 文件中实现功能会更聪明。是否可以以某种方式自动将实现移动到 cpp 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:12:58.730

我相信许多 ATL 类都是模板类，并且模板的源代码需要在使用这些类的每个点都可用（除了通常的例外，声明可能就足够了......）

所以将代码移动到单独的 .cpp 文件中是行不通的。

# html - 如何使用其 DOM 层次结构（父元素）访问元素？

> ID：11845639
> 
> 赞同：1
> 
> 时间：2012-08-07T12:09:14.660
> 
> 标签：html, dom, testing, selenium, automation

我想通过其父节点使用 DOM 层次结构节点结构访问元素。我试图通过 firebug 找到 DOM 层次结构；想要类似, `<parent_node1>.<child_node1>.<child_node2>`(**不是 by** `document.getElementByID` , `getElementbyname`) 来访问一个元素。

我想自动化一个场景，比如我有列标题和相应的值。想要测试，每个列标题下的值是否正确......

我正在考虑使用 DOM 作为自动化这种情况的一种方法......但是，我怎样才能找到 DOM 层次结构......？

我通过 Firebug 中的 Inspect Element 看到的内容类似于事件列表、元素，并且看起来不像层次结构节点结构......有人可以在这方面提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:23:59.790

`document.getElementById`并且`document.getElementByTagname` **正在**使用 DOM。它们在 DOM 中获取一个对象（特别是文档对象，尽管您也可以在元素上同时调用这两个对象）并返回一个对象，该对象分别是单个元素或零个或多个元素的集合。那是一个 DOM 操作。从那里您可以对结果执行其他 DOM 操作，例如获取孩子、父母或兄弟姐妹、更改值等。

所有 DOM 操作归结为：

1.  取一个起点。这通常`document`是因为我们做的第一件事是调用`document.getElementById`或`document.getElementByTagname`然后从我们真正认为起点的结果开始工作。
2.  找到我们感兴趣的一个或多个元素，相对于起点，无论是通过`startingPoint.getElementById`* 还是`startingPoing.getElementByTagname`结合一些测试（例如，只对具有特定 的那些`classname`，如果他们有特定类型的孩子等）。
3.  读取和/或更改某些值，添加新的子节点和/或删除节点。

在像您这样的情况下，起点将是由 、 或类似文件找到的一个或多个`document.getElementById(someID)`表`document.getElementById(someID).getElementsByTagname('table')[0]`。从该表中，`myTable.getElementsByTagname('th')`将为您提供列标题。根据结构以及您正在使用它执行的操作，您可以从每一行中选择相应的元素`myTable.getElementsByTagname('td')`或遍历每一行，然后处理`curRow.getElementsByTagname('td')`. 您也可以只使用`firstChild`等，`childNodes`但通常更方便的是通过标记名过滤掉您不关心的元素。

*由于在文档中只能有一个具有给定 id 的元素，因此如果在文档层次结构中更高的任何元素上调用它都会返回相同的值，所以我们通常只调用它 on `document`。如果我们想要在元素是我们当前元素的后代的情况下做某事，那么在元素上调用它会很有用，否则就不行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:33:54.603

如前所述，您可能指的是`DOM Element properties`like `element.childNodes`或`element.firstChild`类似的。

看看[JavaScriptKit 上的 DOM Element 属性参考](http://javascriptkit.com/domref/elementproperties.shtml)，你会很好地了解如何访问层次结构。

```
var currentTD = document.getElementsByTagName("td")[0];
var currentTable = document.getElementsByTagName("table")[0];

currentTD.parentNode // contains the TR element the TD resides in.
currentTable.childNodes // contains THEAD TBODY and TFOOT if present. 
```

[DOM 表甚至有更多的属性](http://www.javascriptkit.com/domref/tableproperties.shtml)，比如`rows`集合和`cells`集合。

**提醒注意**：请注意这些集合是实时集合，因此`collection.length`在每次迭代中对其进行迭代和访问可能非常慢，因为要获得长度，每次都必须查询 DOM。

# php - 将具有单个键和字符串值的数组拆分为具有多个键和值的数组

> ID：11845652
> 
> 赞同：4
> 
> 时间：2012-08-07T12:09:48.437
> 
> 标签：php, mysql, arrays

**我有一个表，其中存储学生在学期和会话期间注册的课程。我用特定学生的课程代码填充它。这是获取以下课程代码的函数：**

```
function get_course_code(){
    global $connection;

    $query = "SELECT DISTINCT course_code ";
    $query .= "FROM tbl_registered_courses_400 ";
    $query .= "WHERE matric_no = '03/55ec101' LIMIT 10";

    $course_code_set = mysql_query($query, $connection);
    confirm_query($course_code_set);
    return $course_code_set;
} 
```

**当我在主页中调用该函数时。它返回了以下结果**

```
$courseCode = get_course_code();
$courseFilter = '';
while ($courseList = mysql_fetch_array($courseCode)){
    $courseList['course_code']; 
    $courseFilter .= "\""."{$courseList['course_code']}"."\",";
    $courseFilter;
}

$course = array($courseFilter);

print_r($course); 
```

`Array ( [0] => "PHY 432","CSC 491","CHM 401","CHM 402","MAT 451","MAT 452","CSC 423","BLY 401", )`

**我想将 $course 数组拆分为一个数组，该数组将读取上面的字符串值**

```
array(
    [0] => PHY 432
    [1] => CSC 491
    [2] => CHM 401
    [3] => CHM 402
    .
    .
    .
    e.t.c
) 
```

**$course 数组中的字符串数据来自数据库中的 course_code 列。我的意图是使用新数组的结果在数据库中形成一行，该行将保存每个matric_no 的结果，用于学期/会话中完成的不同课程。我将不胜感激任何帮助我完成这项工作。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T12:14:53.787

创建数组，然后将值分配给该数组。

```
$courseCode = get_course_code();
$course = array();
while ($courseList = mysql_fetch_array($courseCode)){
    $course[] = $courseList['course_code'];
}

print_r($course); 
```

# java - Antlr：Decision 可以匹配多个备选方案（从非法令牌开始？）

> ID：11845656
> 
> 赞同：0
> 
> 时间：2012-08-07T12:10:02.810
> 
> 标签：java, antlr

我在 Antlr 中有一个语法来解析我保存的文件的格式。我将语法分解为不起作用的部分，我希望有人能澄清一下。这是语法：

```
grammar OptFile;

parseFile returns [java.util.List<java.util.List<java.util.List<String>>> list] :
{ list = new java.util.ArrayList<List<List<String>>>(); }
vc=VARIABLESCAPTION v=variables oc=OBJECTIVECAPTION o=objective
{ list.add($v.list); list.add($o.list); }
;

variables returns [java.util.List<java.util.List<String>> list] : 
{ list = new java.util.ArrayList<List<String>>(); }
(v=variable { list.add($v.list); } )*
;

variable returns [java.util.List<String> list] : 
{ list = new java.util.ArrayList<String>(); }
n=characters ';' t=characters ';' lb=characters ';' ub=characters ';' 
{ list = new java.util.ArrayList(); list.add($n.string); list.add($t.string); list.add($lb.string); list.add($ub.string); }
;

objective returns [java.util.List<String> list] :
{ list = new java.util.ArrayList<String>(); }
t=characters ';' { list.add($t.string); }
( 
      'PIECEWISE;' pw=piecewisefunction { list.add($pw.string); }
    | 'REGULAR;' rf=characters ';' { list.add($rf.string); } 
);  

piecewisefunction returns [String string] :
( characters ';' characters ';' characters ';' characters ';' )* 
{ string = getText(); }
;   

characters returns [String string] :
( ~(';') )* { string = getText(); }
;

VARIABLESCAPTION : '--Variables:--' ;

OBJECTIVECAPTION : '--ObjectiveFunction:--' ; 
```

有效输入应如下所示：

```
--Variables--x;INTEGER;0;INFTY;y;CONTINUOUS;-12;13;--ObjectiveFunction--MAX;13x^27+SIN(y); 
```

或者像这样

```
--Variables--x;INTEGER;12;20;--ObjectiveFunction--MAX;x;12;x;16;0,5x;16;x;20; 
```

在“--Variables--”之后可以是任意多个变量，每个变量有四个字段，在“--ObjectiveFunction--”之后是一个字段，然后是一个字段，或者是四个字段的任意多个“包”。

显然，使用 Antlr 进行编译时，出现以下错误：

```
warning(200): OptFile.g:26:37:
Decision can match input such as "OBJECTIVECAPTION {OBJECTIVECAPTION..VARIABLESCAPTION, 'PIECEWISE;'..'REGULAR;'} ';' 'PIECEWISE;' {OBJECTIVECAPTION..VARIABLESCAPTION, 'PIECEWISE;'..'REGULAR;'} ';' {OBJECTIVECAPTION..VARIABLESCAPTION, 'PIECEWISE;'..'REGULAR;'} ';' {OBJECTIVECAPTION..VARIABLESCAPTION, 'PIECEWISE;'..'REGULAR;'} ';' OBJECTIVECAPTION ';' 'PIECEWISE;'" using multiple alternatives: 1,2
As a result, alternative(s) 2 were disabled for that input 
```

我现在的问题是：

1.  输入怎么能以 OBJECTIVECAPTION 开头，据我了解，我的语法输入必须以 VARIABLESCAPTION 开头。
2.  我需要改变什么，才能运行这个语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:42:25.427

错误消息可能有点神秘，但问题出在生产中`variables`，它定义了`variable`. 变量可以以错误消息中显示的输入开头，但`variables`也可以跟在其调用环境中出现的相同输入之后。因此，在继续`variables`（备选方案 1）和完成它（备选方案 2）之间存在问题。

所以错误消息不是指完整的输入，而是指将被匹配的输入片段`variables`。显示的行号应该指向出现问题的产品。

为了修复它，您可以为列表引入一个分隔符，以便清楚何时停止收集更多出现的`variable`，例如

```
parseFile : VARIABLESCAPTION variables '.' OBJECTIVECAPTION objective ; 
```

* * *

由提问者编辑：

我尝试了这种方法，效果很好，但只有将用作分隔符号的点添加到必须忽略的字符列表中，即`characters`必须修改代码行：

```
characters : ( ~(';' | '.') )*; 
```

之后，它工作得很好。

# json - 从 Dojo 中的模块调用 JSON 函数

> ID：11845659
> 
> 赞同：0
> 
> 时间：2012-08-07T12:10:11.187
> 
> 标签：json, dojo

我的 dataHelper.js 文件的内容：

```
define(["dojo/_base/declare", "dojo/dom", "dojo/_base/xhr", "dojo/json"], 
function(declare, dom, xhr, json){
    return {
        getJSON: function(){
            xhr.get({ 
                url: "../../cpuusage.json",
                handleAs: "json",
                load: function(jsonData){
                    return jsonData;
                },
                error: function() {
                }
            });
        }
    };      
}); 
```

我正在尝试从我的 index.html 运行它，如下所示：

```
 var chartData = dataHelper.getJSON(); 
```

我想我有几个问题。首先，我不确定我的模块和 getJSON 函数是否定义正确。其次，我在控制台上遇到错误：

```
TypeError: this.source is undefined
[Break On This Error]   
= [],

dojo.js (line 362)
SyntaxError: missing : after property id
},

dojo.js (line 330)
SyntaxError: missing : after property id
},

dojo.js (line 330)
SyntaxError: missing : after property id
}, 
```

我首先要实现的就是将 json 数据加载到**chartData**变量中。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:38:54.967

我看到的第一个问题是您将异步进程视为同步进程。向`xhr.get`服务器发送请求后立即返回，直到收到响应才会阻塞。

首先，我将在`console.log`您的模块定义中添加一个以确保您的 dataHelper 模块被正确加载。

```
define(["dojo/_base/xhr"], 
function(xhr){
    console.log('dataHelper.js loaded');
    return {
    //
    };
}); 
```

另请注意，上面您没有使用除 之外的任何基本 dojo 模块`dojo/_base/xhr`，因此没有必要包含它们（除非它们在此代码段之外使用）。

您需要更新代码以异步处理此调用。为此，您可以利用该`xhr.get`方法返回[Deferred](http://dojotoolkit.org/reference-guide/1.7/dojo/Deferred.html)对象这一事实。这个类使得以一致的方式处理异步非常容易。

为此，请更新 dataHelper 模块以返回 xhr 调用的结果：

```
define(["dojo/_base/xhr"], function(xhr){
    return {
        getJSON: function(){
            //this returns a Deferred object, what to do on load and error is then handled by the invoker
            return xhr.get({ 
                url: "../../cpuusage.json",
                handleAs: "json"
            });
        }
    };      
}); 
```

然后，在使用此模块时：

```
//replace dataHelper with whatever it's path is
require(['dataHelper'],function(dataHelper){
    var deferred = dataHelper.getJSON();
    deferred.then(function(data){
        //this function is invoked once the data has been fully loaded
    }, function(error){
       //this function is invoked  if an error occurs while loading the data (in case of a server error response or if the response isn't in the format you specified)
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:05:58.150

这是我的建议：

您的 dataHelper.js 文件：

```
define("dataHelper", ["dojo/_base/declare", "dojo/dom", "dojo/_base/xhr"], 
function(declare, dom, xhr){
    return declare("dataHelper", [], {
        getJSON: function(){
            return xhr.get({ 
                url: "../../cpuusage.json",
                handleAs: "json"
            });
        });
    };      
}); 
```

你的调用：

```
require(["dataHelper"], function(dataHelper) {

    var chartData;
    dataHelper.getJSON().then(function(jsonData) {
        chartData = jsonData;
        //Continue doing stuff with chartData in here, not outside
    });

}); 
```

# mysql - MySQL 按 3 列排序或 UNION 它们

> ID：11845660
> 
> 赞同：6
> 
> 时间：2012-08-07T12:10:12.837
> 
> 标签：mysql, sql

我`ORDER BY`在`MySQL`. 我必须按 3 个标准对表格进行排序

1 - 首先我想按**TYPE_OF_WORK**排序，所以所有数据都必须按字母顺序排列，比如

```
dech_rap_bus
dech_rap_bus
ger_dem_dech_bus
ger_dem_dech_bus
ger_dem_stp_pp
... 
```

结果 => [http://sqlfiddle.com/#!2/b2a858/6](http://sqlfiddle.com/#!2/b2a858/6)

2 - 第二我想按**PROJECT_VERSION**排序，所以所有数据都必须按字母顺序排列，但要遵守 1 个标准，例如

```
dech_rap_bus            V123-V1234
dech_rap_bus            V300
ger_dem_dech_bus        V123-V1234  
ger_dem_dech_bus        V300
ger_dem_stp_pp          V123-V1234 
```

结果 => [http://sqlfiddle.com/#!2/b2a858/7](http://sqlfiddle.com/#!2/b2a858/7)

所以**1**和**2**工作得很好。

3 - 在此之后我想按列**not_existing排序**

结果 => [http://sqlfiddle.com/#!2/b2a858/5](http://sqlfiddle.com/#!2/b2a858/5)

我不知道它到底做了什么，但我看不到任何结果......我只是想要那个

dec_rap_bus V300

其中**NOT_EXISTING**列是**1**放在最后，什么时候有更多**NOT_EXISTING** = **1**来对它们进行排序，但在表的末尾。

我对自己说，2 个选择的 UNION 会帮助我

```
/* Selecting all data where  not_existing is not 1 or NULL ---> working good! */
(
    SELECT 
    * 
    FROM 
    atm_mti_view 
    WHERE 
    project_function='FRS01' AND 
    on_big_project_id = 12 AND
    (not_existing != 1 OR not_existing IS NULL)
    ORDER BY
    type_of_work ASC,
    project_version ASC
)

UNION

/* Selecting all data where  not_existing is 1 ---> working good! */
(
    SELECT 
    * 
    FROM 
    atm_mti_view 
    WHERE 
    project_function='FRS01' AND 
    on_big_project_id = 12 AND
    not_existing = 1
    ORDER BY
    type_of_work ASC,
    project_version ASC
) 
```

但是这段代码的作用是把不存在的 dech_rap_bus 放在最后，很好，但是它弄乱了版本排序，为什么？？？

在这里查看结果 => [http://sqlfiddle.com/#!2/b2a858/8](http://sqlfiddle.com/#!2/b2a858/8)

这是为什么？我只想**合并**两个选择结果，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:20:09.683

这不是给你你想要的吗？

[http://sqlfiddle.com/#!2/b2a858/26](http://sqlfiddle.com/#!2/b2a858/26)

先按 not_existing 排序？

这里有什么问题？你有你的排序，但最后有 not_existing 记录 - 这些也以相同的方式排序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:22:35.687

你不需要`UNION`你可以用这个查询来实现这一点：

```
SELECT *
FROM atm_mti_view
WHERE project_function='FRS01' AND
      on_big_project_id = 12          
ORDER BY IF(not_existing = 1, 1, 0) ASC,
         type_of_work ASC,
          project_version ASC; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T12:23:00.803

如果你这样做

```
order by 
 (case when not_existing is null then 0 else not_existing end) desc
,type_of_work ASC,
project_version ASC 
```

它会先出现。

您的查询没有排序，因为您对 dec_rap_bus 有不同的项目值

```
TYPE_OF_WORK    PROJECT_VERSION 
dech_rap_bus    V123-V1234  
dech_rap_bus    V300 
```

# java - 在 C++ 中重新加载 Java 字符串

> ID：11845668
> 
> 赞同：2
> 
> 时间：2012-08-07T12:10:33.020
> 
> 标签：java, c++, utf-8

有一个 Java 应用程序以这种方式将具有非英语内容的字符串写入文件：

```
byte bytes = str.getBytes("UTF-8");
writeToFile(bytes); 
```

在 C++ 方面，如何从该文件中读取内容并将其`WCHAR[]`正确保存到一个？例如，我需要用 . 显示字符串`MessageBox`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:12:17.717

看起来这篇文章描述了这个过程： http: [//www.codeproject.com/Articles/38242/Reading-UTF-8-with-C-streams](http://www.codeproject.com/Articles/38242/Reading-UTF-8-with-C-streams)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:34:28.037

好的，我认为至少适用于 Windows 的解决方案是`MultiByteToWideChar()`

# iphone - 我可以调用 ViewController 类中的什么方法来检查它何时被带到前台？

> ID：11845672
> 
> 赞同：1
> 
> 时间：2012-08-07T12:10:45.630
> 
> 标签：iphone, ios

我可以调用 ViewController 类中的什么方法来检查它何时被带到前台？

例如，我正在查看我的应用程序上的一个页面，然后我决定关闭该应用程序并稍后再返回。当我回到它时，屏幕上出现了与我看到的相同的视图。但是...一旦我打开应用程序，我就想切换到另一个视图。

我怎样才能做到这一点？

目前正在尝试这个：

```
 - (void) applicationDidBecomeActive:(NSNotification*) notification
{
    [self checkActivity];
    // Do your stuff here
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(applicationWillEnterForeground:)
                                                     name:UIApplicationWillEnterForegroundNotification
                                                   object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(applicationDidBecomeActive:)
                                                     name:UIApplicationDidBecomeActiveNotification
                                                   object:nil];
    }
    return self;
}

- (void)checkActivity{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSLog(@"Checking if re-authentication required...");
    if([[defaults objectForKey:@"shouldgotologin"] isEqualToString:@"yes"]){
        NSLog(@"View Should go to login...performing segue");
        [defaults setObject:@"no" forKey:@"shouldgotologin"];
        [defaults synchronize];
        [self performSegueWithIdentifier:@"backtologin" sender:self];
    } else {
        NSLog(@"Should go to login is not true.");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T12:23:26.143

注册您的视图控制器以观察`UIApplicationWillEnterForegroundNotification`：

1）内部视图控制器的init方法：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(applicationWillEnterForeground:)
                                             name:UIApplicationWillEnterForegroundNotification
                                           object:nil]; 
```

2）内部视图控制器的dealloc方法：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

3）另外，让你的视图控制器实现这个方法：

```
- (void) applicationWillEnterForeground:(NSNotification*) notification
{
    // This method will be called just before entering the foreground;
    // Do your stuff here
} 
```

如果时间`UIApplicationWillEnterForegroundNotification`不适合您，请在此处查看所有可用通知：http `UIApplication`: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:18:28.403

跳转到 ApplicationDelegate 文件，您会发现以下方法。

```
- (void)applicationWillResignActive:(UIApplication *)application
{

}

- (void)applicationDidEnterBackground:(UIApplication *)application
{

}

- (void)applicationWillEnterForeground:(UIApplication *)application
{

}

- (void)applicationDidBecomeActive:(UIApplication *)application
{

} 
```

请记住，接收与应用程序状态相关的通知（如 willResignActive、didEnterBackground、willEnterForeground）的不是 viewController。ApplicationDelegate 对象将处理这些通知。所以，试着把你的逻辑放在上面的方法中。希望有帮助。如果没有，请使用我的答案下方的评论添加您的查询。

# javascript - Jquery 语法和变量

> ID：11845674
> 
> 赞同：0
> 
> 时间：2012-08-07T12:10:57.110
> 
> 标签：javascript, jquery, html, css, fadeout

单击链接后，我正在尝试制作 FadeOut 效果。但我的语法似乎是错误的。当我单击时，它会淡出，然后转到**“~~nothing~~.html”**页面，它只是没有获得组成变量的值。id boo 附加到**标签 ( **body id="boo"** ) 并且在 css 样式表中 id **#boo**设置为**display:none;** 我正在使用 jquery-1.7.2.min**

 **```
<script type="text/javascript">
    $(document).ready(function(){
        $('#go').click(function(e) { //When something with the id 'go' is clicked, 
            e.preventDefault(); //Prevent default action (?)
            var url = $('#go').val() + ".html"; //set url as "Clicked 'go' value + .html" (374.html"
            $('#boo').fadeOut(600, function() { window.location.href = url; }); //fadeOut what is with the 'boo' id (body), and load the created address as a new page (?)
        });
    });
</script>
<a id="go" value="374" href="#">Go to page 374</a> 
```

374.html 页面位于同一文件夹中。如果可能的话，请解释我做错了什么，并逐步进行。我是 jquery 的新手。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:15:45.237

该`.val()`方法仅适用于字段，仅将`value`属性放在任何元素上都*不会*被该`val()`方法读取。

而是使用`.attr('value')`.

或者，使用`data-*`属性和使用`data()`方法是更好的做法：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#go').click(function(e) { //When something with the id 'go' is clicked, 
            e.preventDefault(); //Prevent default action (?)
            var url = $('#go').data('value') + ".html"; //set url as "Clicked 'go' value + .html" (374.html"
            $('#boo').fadeOut(600, function() { window.location.href = url; }); //fadeOut what is with the 'boo' id (body), and load the created address as a new page (?)
        });
    });
</script>
<a id="go" data-value="374" href="#">Go to page 374</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:15:22.883

尝试：

```
var url = $('#go').attr("value") + ".html"; 
```

代替

```
var url = $('#go').val() + ".html"; 
```

来自 jQuery[文档](http://api.jquery.com/val/)-

> .val() 方法主要用于获取输入、选择和文本区域等表单元素的值。在元素的情况下， .val() 方法返回一个包含每个选定选项的数组；如果未选择任何选项，则返回 null。

这里有一个例子 - [http://jsfiddle.net/A8ArH/](http://jsfiddle.net/A8ArH/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T12:15:27.543

该`val()`函数不会为您提供来自锚标记的值，用于`attr("value")`获取 a 标记的值

```
$(document).ready(function(){
    $('#go').click(function(e) { 
        e.preventDefault(); 
        var url = $('#go').attr("value") + ".html"; 
        alert(url)
        $('#boo').fadeOut(600, function() {
                 window.location.href = url; 
        });
    });
});​ 
```

或者，您可以使用 HTML 5`data`属性来存储此类值

```
<a id="go" data-someValue="374" href="#">Go to page 374</a> 
```

你可以像这样在javascript中访问它

```
var someVal=$("#go").data("someValue"); 
```

示例[http://jsfiddle.net/LyPZB/1/](http://jsfiddle.net/LyPZB/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T12:17:46.750

**a**标签不支持属性*value* ，你应该这样做：

像这样设置锚点

```
<a id="go" data-page="374" href="#">... 
```

（data-xxx 是自定义属性）

并获得它的价值

```
$('#go').data('page') 
```

这样它就可以工作并且您将尊重 HTML 标准（因为锚不应该具有 value 属性）**

# android - 如何在 Windows 中为 android 交叉编译 freetype 库？

> ID：11845675
> 
> 赞同：1
> 
> 时间：2012-08-07T12:10:56.500
> 
> 标签：android, android-ndk, freetype

我正在尝试在我的原生 android 应用程序中使用 freetype 库。但我发现的有关将此库与 android ndk 一起使用的唯一信息仅适用于 *nix 系统：

[http://blog.beuc.net/posts/Cross-compile_FreeType_for_Android_ARM/](http://blog.beuc.net/posts/Cross-compile_FreeType_for_Android_ARM/)

或者

[http://en.wikibooks.org/wiki/OpenGL_Programming/Installation/Android#FreeType](http://en.wikibooks.org/wiki/OpenGL_Programming/Installation/Android#FreeType)

换句话说，我不能在 windows 系统上执行交叉编译过程。

是否有任何关于它的分步参考，或者是否可以下载已经交叉编译的 freetype 库版本？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:19:50.677

当您在窗口系统下使用 ndk 时，您必须使用 cygwin 进行编译，无论如何都是 *nix 系统。

您可以使用 cygwin 进行编译

请参考这个链接

[http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/](http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:21:04.500

看看[这个](https://code.google.com/p/indic-text-renderer/)使用 freetype 的项目，因为我已经成功地使用 cygwin 编译它。

# javascript - 向一个元素添加多个事件监听器

> ID：11845678
> 
> 赞同：77
> 
> 时间：2012-08-07T12:11:05.720
> 
> 标签：javascript, html, dom-events

所以我的困境是我不想两次编写相同的代码。一次用于单击事件，另一次用于`touchstart`事件。

这是原始代码：

```
document.getElementById('first').addEventListener('touchstart', function(event) {
    do_something();
    });

document.getElementById('first').addEventListener('click', function(event) {
    do_something(); 
    }); 
```

我怎样才能压缩这个？必须有一个更简单的方法！

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2017-03-25T20:00:27.963

我知道这是一个老问题，但我认为有些人可能会发现这种方法很有用；它可以应用于任何类似的重复代码：

ES6

```
['click','ontouchstart'].forEach( evt => 
    element.addEventListener(evt, dosomething, false)
); 
```

ES5

```
['click','ontouchstart'].forEach( function(evt) {
    element.addEventListener(evt, dosomething, false);
}); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-07T12:43:31.517

也许你可以使用这样的辅助函数：

```
// events and args should be of type Array
function addMultipleListeners(element,events,handler,useCapture,args){
  if (!(events instanceof Array)){
    throw 'addMultipleListeners: '+
          'please supply an array of eventstrings '+
          '(like ["click","mouseover"])';
  }
  //create a wrapper to be able to use additional arguments
  var handlerFn = function(e){
    handler.apply(this, args && args instanceof Array ? args : []);
  }
  for (var i=0;i<events.length;i+=1){
    element.addEventListener(events[i],handlerFn,useCapture);
  }
}

function handler(e) {
  // do things
};

// usage
addMultipleListeners(
    document.getElementById('first'),
    ['touchstart','click'],
    handler,
    false); 
```

[**编辑十一月。2020** ] 这个答案已经很老了。我现在解决这个问题的方法是使用一个`actions`对象，其中为每个事件类型指定处理程序，一个`data-attribute`用于指示应该对其执行哪个操作的元素和一个通用文档范围的处理程序方法（因此[事件委托](https://javascript.info/event-delegation)）。

```
const firstElemHandler = (elem, evt) =>
  elem.textContent = `You ${evt.type === "click" ? "clicked" : "touched"}!`;
const actions = {
  click: {
    firstElemHandler,
  },
  touchstart: {
    firstElemHandler,
  },
  mouseover: {
    firstElemHandler: elem => elem.textContent = "Now ... click me!",
    outerHandling: elem => {
      console.clear();
      console.log(`Hi from outerHandling, handle time ${
        new Date().toLocaleTimeString()}`);
    },
  }
};

Object.keys(actions).forEach(key => document.addEventListener(key, handle));

function handle(evt) {
  const origin = evt.target.closest("[data-action]");
  return origin &&
    actions[evt.type] &&
    actions[evt.type][origin.dataset.action] &&
    actions[evt.type][origin.dataset.action](origin, evt) ||
    true;
}
```

```
[data-action]:hover {
  cursor: pointer;
}
```

```
<div data-action="outerHandling">
  <div id="first" data-action="firstElemHandler">
    <b>Hover, click or tap</b>
  </div>
  this is handled too (on mouse over)
</div>
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-08-07T12:13:03.177

您可以定义一个函数并传递它。匿名函数在任何方面都不特殊，所有函数都可以作为值传递。

```
var elem = document.getElementById('first');

elem.addEventListener('touchstart', handler, false);
elem.addEventListener('click', handler, false);

function handler(event) {
    do_something();
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-08-07T12:17:12.517

对于大量事件，这可能会有所帮助：

```
var element = document.getElementById("myId");
var myEvents = "click touchstart touchend".split(" ");
var handler = function (e) {
    do something
};

for (var i=0, len = myEvents.length; i < len; i++) {
    element.addEventListener(myEvents[i], handler, false);
} 
```

**06/2017 更新：**

现在新的语言功能更广泛地可用，您可以简化添加共享一个侦听器的有限事件列表。

```
const element = document.querySelector("#myId");

function handleEvent(e) {
    // do something
}
// I prefer string.split because it makes editing the event list slightly easier

"click touchstart touchend touchmove".split(" ")
    .map(name => element.addEventListener(name, handleEvent, false)); 
```

如果您想处理大量事件并且对每个侦听器有不同的要求，您还可以[传递一个](https://www.thecssninja.com/javascript/handleevent)大多数人容易忘记的对象。

```
const el = document.querySelector("#myId");

const eventHandler = {
    // called for each event on this element
    handleEvent(evt) {
        switch (evt.type) {
            case "click":
            case "touchstart":
                // click and touchstart share click handler
                this.handleClick(e);
                break;
            case "touchend":
                this.handleTouchend(e);
                break;
            default:
                this.handleDefault(e);
        }
    },
    handleClick(e) {
        // do something
    },
    handleTouchend(e) {
        // do something different
    },
    handleDefault(e) {
        console.log("unhandled event: %s", e.type);
    }
}

el.addEventListener(eventHandler); 
```

**05/2019 更新：**

```
const el = document.querySelector("#myId");

const eventHandler = {
    handlers: {
        click(e) {
            // do something
        },
        touchend(e) {
            // do something different
        },
        default(e) {
            console.log("unhandled event: %s", e.type);
        }
    },
    // called for each event on this element
    handleEvent(evt) {
        switch (evt.type) {
            case "click":
            case "touchstart":
                // click and touchstart share click handler
                this.handlers.click(e);
                break;
            case "touchend":
                this.handlers.touchend(e);
                break;
            default:
                this.handlers.default(e);
        }
    }
}

Object.keys(eventHandler.handlers)
    .map(eventName => el.addEventListener(eventName, eventHandler)) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-08-07T12:13:58.187

除非您的`do_something`函数实际上使用任何给定的参数执行某些操作，否则您可以将其作为事件处理程序传递。

```
var first = document.getElementById('first');
first.addEventListener('touchstart', do_something, false);
first.addEventListener('click', do_something, false); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-03-14T08:16:55.843

对我来说最简单的解决方案是将代码传递到一个单独的函数中，然后在事件侦听器中调用该函数，就像一个魅力。

```
function somefunction() { ..code goes here ..}

variable.addEventListener('keyup', function() {
   somefunction(); // calling function on keyup event
})

variable.addEventListener('keydown', function() {
   somefunction(); //calling function on keydown event
}) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-09-21T06:19:53.933

我有一个附加到原型的小解决方案

```
 EventTarget.prototype.addEventListeners = function(type, listener, options,extra) {
  let arr = type;
  if(typeof type == 'string'){
    let sp = type.split(/[\s,;]+/);
    arr = sp;   
  }
  for(let a of arr){
    this.addEventListener(a,listener,options,extra);
  }
}; 
```

允许你给它一个字符串或数组。字符串可以用空格（''）、逗号（','）或分号（';'）分隔

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-09T21:39:44.897

```
document.getElementById('first').addEventListener('touchstart',myFunction);

document.getElementById('first').addEventListener('click',myFunction);

function myFunction(e){
  e.preventDefault();e.stopPropagation()
  do_something();
} 
```

您应该使用`e.stopPropagation()`，因为如果没有，您的函数将在移动设备上触发两次

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-11-06T14:37:13.903

我刚刚做了这个功能（故意缩小）：

```
((i,e,f)=>e.forEach(o=>i.addEventListener(o,f)))(element, events, handler) 
```

用法：

```
((i,e,f)=>e.forEach(o=>i.addEventListener(o,f)))(element, ['click', 'touchstart'], (event) => {
    // function body
}); 
```

与其他方法相比的不同之处在于处理函数只定义一次，然后传递给 every `addEventListener`。

### 编辑：

添加非缩小版本以使其更易于理解。缩小版仅用于复制粘贴和使用。

```
((element, event_names, handler) => {

    event_names.forEach( (event_name) => {
        element.addEventListener(event_name, handler)
    })

})(element, ['click', 'touchstart'], (event) => {

    // function body

}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-28T01:21:52.793

像这样的东西怎么样：

```
['focusout','keydown'].forEach( function(evt) {
        self.slave.addEventListener(evt, function(event) {
            // Here `this` is for the slave, i.e. `self.slave`
            if ((event.type === 'keydown' && event.which === 27) || event.type === 'focusout') {
                this.style.display = 'none';
                this.parentNode.querySelector('.master').style.display = '';
                this.parentNode.querySelector('.master').value = this.value;
                console.log('out');
            }
        }, false);
});

// The above is replacement of:
 /*   self.slave.addEventListener("focusout", function(event) { })
      self.slave.addEventListener("keydown", function(event) {
         if (event.which === 27) {  // Esc
            }
      })
*/ 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-29T03:12:54.017

半相关，但这是用于初始化每个元素特定的唯一事件侦听器。

您可以使用滑块实时显示值，或检查控制台。在`<input>`元素上，我有一个`attr`名为 的标签`data-whatever`，因此您可以根据需要自定义该数据。

```
sliders = document.querySelectorAll("input");
sliders.forEach(item=> {
  item.addEventListener('input', (e) => {
    console.log(`${item.getAttribute("data-whatever")} is this value: ${e.target.value}`);
    item.nextElementSibling.textContent = e.target.value;
  });
})
```

```
.wrapper {
  display: flex;
}
span {
  padding-right: 30px;
  margin-left: 5px;
}
* {
  font-size: 12px
}
```

```
<div class="wrapper">
  <input type="range" min="1" data-whatever="size" max="800" value="50" id="sliderSize">
  <em>50</em>
  <span>Size</span>
  <br>
  <input type="range" min="1" data-whatever="OriginY" max="800" value="50" id="sliderOriginY">
  <em>50</em>
  <span>OriginY</span>
  <br>
  <input type="range" min="1" data-whatever="OriginX" max="800" value="50" id="sliderOriginX">
  <em>50</em>
  <span>OriginX</span>
</div>
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-08-13T18:22:19.687

这是我在工作流程中处理多个事件的解决方案。

```
let h2 = document.querySelector("h2");

function addMultipleEvents(eventsArray, targetElem, handler) {
        eventsArray.map(function(event) {
            targetElem.addEventListener(event, handler, false);
        }
    );
}
let counter = 0;
function countP() {
    counter++;
    h2.innerHTML = counter;
}

// magic starts over here...
addMultipleEvents(['click', 'mouseleave', 'mouseenter'], h2, countP);
```

```
<h1>MULTI EVENTS DEMO - If you click, move away or enter the mouse on the number, it counts...</h1>

<h2 style="text-align:center; font: bold 3em comic; cursor: pointer">0</h2>
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-10-10T13:56:38.860

```
//catch volume update
var volEvents = "change,input";
var volEventsArr = volEvents.split(",");
for(var i = 0;i<volknob.length;i++) {
    for(var k=0;k<volEventsArr.length;k++) {
    volknob[i].addEventListener(volEventsArr[k], function() {
        var cfa = document.getElementsByClassName('watch_televised');
        for (var j = 0; j<cfa.length; j++) {
            cfa[j].volume = this.value / 100;
        }
    });
}
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-14T15:18:30.253

你可以简单地迭代一个`Object`. 这可以与单个或多个元素一起使用。这是一个例子：

```
const ELEMENTS = {'click': element1, ...};
for (const [key, value] of Object.entries(ELEMENTS)) {
    value.addEventListener(key, () => {
        do_something();
    });
} 
```

When`key`是事件的类型，并且`value`是添加事件时的元素，因此您可以编辑`ELEMENTS`添加元素和事件的类型。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2018-05-27T19:28:53.437

这个迷你 javascript 库 (1.3 KB) 可以做所有这些事情

[https://github.com/Norair1997/norjs/](https://github.com/Norair1997/norjs/)

```
nor.event(["#first"], ["touchstart", "click"], [doSomething, doSomething]); 
```

# objective-c - 在阈值之后调用函数一次，而不在目标 C 中使用标志

> ID：11845682
> 
> 赞同：0
> 
> 时间：2012-08-07T12:11:31.430
> 
> 标签：objective-c, cocoa-touch

我正在设计目标 C 中的游戏，玩家通过正确回答一些问题来赚钱。当他达到阈值（例如每 1000 美元）时，我试图只显示一次祝贺信息。我知道我可以使用下面代码中的标志：

```
if (money>threshold){
    if (congratMsgShown==NO){
    [self displayCongratMsg];
    congratMsgShown=YES;
    }
} 
```

这样做的问题是它只适用于一个阈值。由于我的玩家可以赚取高达 100 万美元，我将不得不使用 1000 个标志，例如 congratMsgShown。Objective C中是否有一种方法可以在达到阈值时仅调用一次函数？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:15:45.283

使用相同的方法并更改阈值怎么样？

```
if (money > threshold)
{
    if (congratMsgShown==NO)
    {
        [self displayCongratMsg];
        congratMsgShown=YES;
        threshold += 1000;      //Change the threshold
        //threshold *= 2;       //Example
    }
} 
```

# ruby-on-rails - 动态 SASS 生成

> ID：11845683
> 
> 赞同：3
> 
> 时间：2012-08-07T12:11:34.923
> 
> 标签：ruby-on-rails, sass, multi-tenant

我正在开发一个多租户应用程序，我希望每个租户控制特定元素的颜色。例如，我想有一个带有颜色选择器的表单，用户可以在其中控制站点背景颜色、导航栏颜色等项目。

我有一个设置默认配色方案的基线 SASS(.scss) 文件。我的问题是：

1.  然后我将如何加载“动态”主题 .scss 文件？
2.  如果我有像 Tenant.nav_bar_link_color 这样的模型字段，我将如何将这些值加载到 SASS 主题文件中？
3.  我是否能够/应该以某种方式将租户特定主题预编译到资产管道中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:15:27.113

您可以向主应用程序的主体元素添加一个类。这可能像

```
<body class=""> 
```

然后根据他们对主题的选择，以编程方式将诸如“scheme-red”或“scheme-blue”之类的类添加到此正文元素。

然后，在您的 SASS 中，您将拥有覆盖默认值的不同配色方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:29:04.777

经过一番研究，我认为这里的方法大纲最有意义：

[用户生成的自定义 css](https://stackoverflow.com/questions/3152682/user-generated-custom-css)

基本上我会将租户控制的 CSS 值存储在数据库中，然后将它们呈现在头部作为对我的默认 SASS 文件的覆盖......

# rpgle - 在 RPG 中使用 MOVEL 函数对文本进行子串化

> ID：11845686
> 
> 赞同：0
> 
> 时间：2012-08-07T12:11:42.850
> 
> 标签：rpgle

问题：

使用 MOVEL 函数从 RPG 中的文本中获取子字符串 n 个字符是否可以保存，该函数获取长度为 x 的文本并将其存储到容量为 n 的变量中？

或者获取第一个 n 字符的唯一保存方法是使用 SUBST？

问题的背景是我的一位同事从长度为 30 个字符的数据库中获取前 3 个字符是使用 MOVEL 到一个长度仅为 3 个字符的变量（比如截断其余部分）。奇怪的方式，有时接收变量显示减号（'-'），有时不显示。所以我认为使用 MOVEL 不是一种安全的方法。我在想 C 中的字符串总是以 '\0' 终止，你需要使用 strcpy 函数来获取副本保存，而不是使用 = 运算符分配。

任何了解 RPG 的人都熟悉这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:33:16.167

移动应该工作。RPG 允许多种[字符数据类型](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rzasd/sc092508247.htm)。一般来说，使用 MOVEL 的人不会处理以空结尾的字符串，因为 MOVEL 是一种旧技术，而以空结尾的字符串是一种较新的数据类型。您可以阅读 RPG 手册中的[MOVEx 操作](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rzasd/sc092508779.htm)和[字符串操作](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rzasd/sc092508786.htm)。为了获得更好的答案，请发布您的代码，包括所涉及变量的定义。

*编辑*： MOVEL 如何处理标志的示例。

```
 dcl-s long char(20) inz('CORPORATION');
   dcl-s short char(3) inz('COR');
   dcl-s numb packed(3: 0);

   // 369
 c                   movel     long          numb
   dsply numb;

   // -369
 c                   movel     short         numb
   dsply numb;

   *inlr = *on; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T02:00:13.420

对于 RPG 中的带符号数字字段，符号保留在字段的最后一个字节的区域中。所以 123 是 X'F1F2F3' 但 -123 是 X'F1F2D3'。如果您将这些字段视为字符串，它们将包含 123 和 12L。

在您的程序中，您将“123 AAAAAL”之类的内容传输到 3 位数字字段，因此您得到 X'F1F2F3'，但因为最后一个字符是 X'D3'，它会将结果更改为具有 D 的区域，即 X'F1F2D3'您的异常取决于第 30 个字符包含的内容。如果它是 } 或任何大写字母 J 到 R，那么你会得到否定的结果。[前 3 个字符是数字还是字母并不重要，因为在您的示例中，只有字节的后半部分（即数字）才重要。]

IBM 手册说：如果因子 2 是字符并且结果字段是数字，如果因子 2 最右边位置的区域是十六进制 D（减号区域），则减号区域将移动到结果字段的最右边位置。但是，如果从因子 2 最右边开始的区域不是十六进制 D，则将正区域移动到结果字段的最右边位置。其他结果字段位置仅包含数字字符。

大学教师

# facebook-javascript-sdk - 通过 URL 启动照片标记

> ID：11845687
> 
> 赞同：0
> 
> 时间：2012-08-07T12:11:44.253
> 
> 标签：facebook-javascript-sdk, tagging, photos

是否可以将用户重定向到 Facebook 上的照片 URL 并自动启用标记？我的应用程序将照片上传到用户的相册，然后将他重定向到 Facebook 上的照片。是否可以自动启用标记模式？

# maven - 在maven中添加一组依赖项

> ID：11845701
> 
> 赞同：0
> 
> 时间：2012-08-07T12:12:29.237
> 
> 标签：maven, build-dependencies

我已经阅读了如何获取我拥有的 jar 文件并将其添加到此[链接中的 maven 中的依赖系统](https://stackoverflow.com/questions/396245/add-a-dependency-in-maven)

但我想要的是，我有一组 30 到 40 个 jar 文件，我必须将它们添加到依赖系统中。我是否需要使用添加所有 jar 文件

1.  mvn install:install-file -DgroupId=com.stackoverflow... -DartifactId=yourartifactid... -Dversion=1.0 -Dpackaging=jar -Dfile=/path/to/jarfile,

其次是，

2.

```
<dependencies>
        ...
        <dependency>
                <groupId>com.stackoverflow...</groupId>
                <artifactId>artifactId...</artifactId>
                <version>1.0</version>
        </dependency>
        ...
</dependencies> 
```

还是有一种简单的方法可以让我使用 mvn:install 将所有依赖的 jar 文件打包到一个 maven 项目中，我的主项目可以依赖于该项目？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:13:12.917

如果您所指的 30-40 个 jar 文件中的大多数是标准开源库，那么您不需要`install`手动将它们添加到本地存储库。它们中的许多也可能是`transitive`，即一个`dependency`轮流拉入另一个。在这种情况下，您只需要添加作为`dependency`主要依赖项。这反过来又会引入传递的。

如果大多数依赖项是专有的并且您自己管理它们，那么您很可能将它们放在源代码管理系统中的某个特定文件夹中，例如`lib`. 如果是这样，您可以跳过该`install`步骤，只需指定`dependencies`使用`<system>`范围（请参阅[此处](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#System_Dependencies)）。

您可以定义一个 maven 项目（作为`pom`类型）来指定所有项目，`dependencies`并让您的主项目依赖于它，如果有的`simplifies`话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:09:36.603

[此链接](https://stackoverflow.com/questions/8846426/maven-inheritance-and-aggregation-example-architecture)中的第一个答案确实解决了我的疑问..

“项目应该明确列出它们的所有依赖项，而不是依赖于继承它们（恕我直言）。这意味着您必须声明您的记录器几次，但它会在以后为您省去痛苦。（您当然可以使用单独的 POM 项目组合在一起相关的依赖项，因此通常一起指定，例如链接中的休眠示例）。如果要集中依赖项的版本，可以在父 POM 中放置一个依赖项管理部分，这意味着您仍然在子项目中声明依赖项，但版本来自父级，从而确保一致性。不声明依赖的子级根本不会得到它。

因此，实践应该是为所有依赖项创建单独的 POM（子）项目，如果我们愿意，我们可以使用聚合将它们包装到可以在我们的项目中单独引用的 Parent-POM。但是我们必须为每个依赖的 JAR 分别创建一个子项目。花费时间的过程，但似乎是唯一的答案。

# sql - 联合仅选择一行

> ID：11845702
> 
> 赞同：0
> 
> 时间：2012-08-07T12:12:30.777
> 
> 标签：sql

我有一个带有两个选择子句的查询与 UNION 结合。我只想选择顶部的第一行。我怎么能用 Union 做到这一点？

```
Select Fault,OccurredOn From ATMStatus Where Ticket=189703 // This Will retrieve single record as the primary key is applied
Union 
Select Fault,OccurredOn From ATMStatusHistory Where Resolved=0 AND Ticket=189703 Order By OccurredOn Desc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:14:54.973

```
select top 1 * from 
(
                 Select Fault,OccurredOn 
                 From ATMStatus
                 Where Ticket=189703
                 Union 
                 Select Fault,OccurredOn
                 From ATMStatusHistory
                 Where Resolved=0 AND Ticket=189703
) x
Order By OccurredOn Desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:15:38.040

这将返回 2 行：

```
select 1 as id
union
select 2 as id 
```

这将返回 1 行：

```
select top 1 * from (
  select 1 as id
  union
  select 2 as id
) as x
order by id 
```

# java - 何时以及如何增加版本号（Maven、Java、Sonar）？

> ID：11845703
> 
> 赞同：0
> 
> 时间：2012-08-07T12:12:36.327
> 
> 标签：java, maven, sonarqube, pom.xml

我有一个 Java 项目，该项目仍处于早期阶段。目前还没有真正的版本，所以我在 pom.xml 中将版本设置为 1.0.0-SNAPSHOT。

在每次提交之前，我使用以下命令直接从 Maven 执行声纳分析：

```
mvn sonar:sonar 
```

Sonar 具有记录 KPI 随时间变化的出色能力。但是，它仅适用于一个版本。现在，由于我不更新我的版本号，它会覆盖最后的分析结果并将其替换为当前结果。

我想知道如何解决这个问题。我不想每天手动增加版本号，因为这对我来说似乎不太自然。

我还有什么其他选择？我应该使用其中一个 Maven 插件将内部版本号添加到版本字符串中，以便我拥有唯一的版本吗？你还有其他策略吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:32:57.863

如果您想在每个版本中增加版本号，推荐使用[Maven 发布插件](https://maven.apache.org/plugins/maven-release-plugin/)。

但是如果你想每天增加版本号，甚至每次构建，你可以使用唯一的版本号，比如可以从 Maven 构建阶段获得的时间戳，在 Maven 2.1 之后，它有你可以使用的内置`${maven.build.timestamp}`，你可以使用格式

```
<properties>
    <maven.build.timestamp.format>yyyyMMdd-HHmm</maven.build.timestamp.format>
</properties> 
```

有关更多信息，您可以访问[http://maven.apache.org/guides/introduction/introduction-to-the-pom.html](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:18:02.163

Sonar 会保留每个快照构建的指标（基于您的配置）。然后，您可以适当地重命名快照并使用它们来获取[历史信息](http://docs.codehaus.org/display/SONAR/Historical+Information#HistoricalInformation-ManagingHistory)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:16:04.800

你说你还没有发布。只要你这样做，[Maven 发布插件](https://maven.apache.org/plugins/maven-release-plugin/)就是一个推荐。它处理发行版附带的 SVN 相关内容。

不过，我不确定这是否有助于您处理 SNAPSHOT 的日常工作。

# windows-phone-7 - Metro 风格，如何让我的屏幕兼容横向和纵向模式？

> ID：11845706
> 
> 赞同：0
> 
> 时间：2012-08-07T12:12:43.860
> 
> 标签：windows-phone-7, microsoft-metro, visual-studio-2012

我是 Metro 风格应用程序的新手。我在**Visual Studio 2012** Ultimate 中仅使用拖放工具在横向模式下设计了一个普通页面。我使用模拟器运行此页面。它在横向模式下运行良好。但在纵向模式下，内容页面没有自动适配。甚至不允许滚动屏幕查看页面中的所有内容。

我想要一个**适合所有屏幕分辨率和不同方向**的设计。我应该怎么办？如果有可用的教程，请提供链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:10:07.987

您是在谈论 Windows Phone 还是 WinRT？

无论哪种方式，您都需要自己处理方向更改。

如果您正在使用 WinRT，请从这里开始：

[优化横向和纵向](http://blogs.msdn.com/b/b8/archive/2011/10/20/optimizing-for-both-landscape-and-portrait.aspx)

如果您使用的是 Windows Phone，请从这里开始：

[如何：在 Windows Phone 上处理方向更改](http://msdn.microsoft.com/en-us/library/ff769553%28v=vs.92%29.aspx)

# selenium - 运行 androidwebdriver 时 Selenium 出错

> ID：11845709
> 
> 赞同：1
> 
> 时间：2012-08-07T12:12:48.450
> 
> 标签：selenium, automation

我在我的 htc sense android 设备上运行来自[http://code.google.com/p/selenium/wiki/AndroidDriver](http://code.google.com/p/selenium/wiki/AndroidDriver)的 Sample Selenium 代码。但是，当从 eclipse 将它作为 Android JUnit 测试运行时，我得到了这个堆栈跟踪。无法理解。我是 Selenium 的新手，所以任何帮助或建议都会对我最有帮助。谢谢

org.openqa.selenium.NoSuchElementException：找不到具有名称的元素：q 有关此错误的文档，请访问：[http ://seleniumhq.org/exceptions/no_such_element.html](http://seleniumhq.org/exceptions/no_such_element.html) 构建信息：版本：'未知'，修订：'未知'，时间：'未知'系统信息：os.name：'Linux'，os.arch：'armv7l'，os.version：'2.6.35.13-g2299e28' , java.version: '0' 驱动程序信息: driver.version: AndroidWebDriver at org.openqa.selenium.android.AndroidWebElement.lookupElement(AndroidWebElement.java:341) at org.openqa.selenium.android.AndroidWebElement.access$1(AndroidWebElement .java:330) 在 org.openqa.selenium.android.AndroidWebDriver$AndroidFindBy.findElementByName(AndroidWebDriver.java:457) 在 org.openqa.selenium.android.AndroidWebElement$FindByImpl.findElementByName(AndroidWebElement.java:295) 在 org. openqa.selenium.By$ByName.findElement(By.java:286) 在 org.openqa.selenium.android.AndroidWebDriver.findElement(AndroidWebDriver.java:393) 在 simple.app.test.SimpleGoogleTest。testGoogleWorks(SimpleGoogleTest.java:32) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:204) 在 android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java: 194) 在 android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169) 在 android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154) 在 android.test.ActivityInstrumentationTestCase2.runTest(ActivityInstrumentationTestCase2.java:186)。 test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529) 在 android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584)InstrumentationTestCase.runTest(InstrumentationTestCase.java:194) at android.test.ActivityInstrumentationTestCase2.runTest(ActivityInstrumentationTestCase2.java:186) at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169) at android.test.AndroidTestRunner.runTest(AndroidTestRunner .java:154) 在 android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529) 在 android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584)InstrumentationTestCase.runTest(InstrumentationTestCase.java:194) at android.test.ActivityInstrumentationTestCase2.runTest(ActivityInstrumentationTestCase2.java:186) at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169) at android.test.AndroidTestRunner.runTest(AndroidTestRunner .java:154) 在 android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529) 在 android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584)第529章）第529章）

# actionscript - 加载子 SWF 时防止 SWF 拦截和注入

> ID：11845717
> 
> 赞同：0
> 
> 时间：2012-08-07T12:13:11.450
> 
> 标签：actionscript, flash, inject, intercept

所以情况就是这样，我有一个父 SWF，它在它下面加载了多个子 SWF。我想知道是否有任何方法可以让我 100% 相信所有这些儿童 SWF 都是我的。

例如，当从域“http://example.com/b.swf”加载子 SWF“b.swf”时，我始终可以保证传递给我的 SWF 是我的，而不是被截获的并使用 Fiddler 之类的工具进行修改，然后传递给我。

像检查它的大小，哈希？不知道大家有没有可以帮忙的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:33:07.910

好吧，您当然可以创建要加载的 SWF 哈希。MD5 是一种常用的算法。因此，如果与 URL 一起存储正在加载的 SWF 的 MD5 哈希，则很难想出一个生成相同哈希的假 SWF。（非常困难，因为制作具有相同哈希值的 SWF 可能需要数年，甚至数百年）。

这种机制通常与其他软件发行版一起使用。许多开源工具在程序/安装程序中提供 md5 哈希。Maven 还使用 MD5 哈希来确保加载的库是真实的。所以这听起来像是一条路。

# ios - IOS在plist中创建字典列表

> ID：11845725
> 
> 赞同：0
> 
> 时间：2012-08-07T12:13:34.847
> 
> 标签：ios, plist

我无法在我的 plist 文件中编写新字典，每次用户填写表格时我都想在其中保存数据。我现在使用的代码只覆盖数据，并没有按需要保存以前的字典。

这里的代码：

```
//////////// Save data into plist /////////////////
// get paths from root direcory
NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
// get documents path
NSString *documentsPath = [paths objectAtIndex:0];
// get the path to our Data/plist file
NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Data.plist"];

// set the variables to the values in the text fields
self.titlestring = titleexperiencia.text;
self.descriptionstring = descriptionexperiencia.text;
self.coordinadastring = [self deviceLocation];

// create dictionary with values in UITextFields
NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: titlestring, descriptionstring,coordinadastring, nil] forKeys:[NSArray arrayWithObjects: @"Title", @"Description", @"Coordinate", nil]];

NSString *error = nil;
// create NSData from dictionary
NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];

// check is plistData exists
if(plistData) 
{
    // write plistData to our Data.plist file
    [plistData writeToFile:plistPath atomically:YES];
    NSLog(@"Saved in Data Plist");

}
else 
{
    NSLog(@"Error in saveData: %@", error);
    [error release];
} 
```

我也尝试使用 AddObject: 而不是 writeToFile: 但这会使 App 崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T09:07:27.990

读取plistPath的内容：
NSMutableData *myData = [NSMutableData dataWithContentsOfFile:plistPath];
并改变这个：

```
// create NSData from dictionary
NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error]; 
```

至：

```
// create NSData from dictionary
NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];  
[myData appdendData:plistData]; 
```

最后将 myData 写入文件。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:25:02.993

好吧，崩溃可能是由于您过度释放错误变量而引起的。

# iphone - 可以在 python 中编写 i-phone 应用程序

> ID：11845727
> 
> 赞同：0
> 
> 时间：2012-08-07T12:13:44.313
> 
> 标签：iphone, python

> **可能重复：**
> [我可以使用 Python 编写原生 iPhone 应用吗](https://stackoverflow.com/questions/43315/can-i-write-native-iphone-apps-using-python)

我刚刚在谷歌上搜索是否可以用 Python 编写一个 iPhone 应用程序，结果非常混乱，而且结果不是很好。

是否可以？如果是这样，我需要安装哪些模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:17:24.190

您可以在 iPhone 上使用 PyObjC。

[http://pyobjc.sourceforge.net/](http://pyobjc.sourceforge.net/)

你需要越狱你的 iPhone 才能运行。

他们也有一个教程，当然它是谷歌搜索的顶部。

[http://www.saurik.com/id/5/](http://www.saurik.com/id/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:17:47.243

不，您要么必须在 Xcode 和 Objective-c 中本地编写它，要么使用 PhoneGap [http://phonegap.com/](http://phonegap.com/)之类的东西，无论如何最终都会编译为 Objective-c。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:18:44.270

从技术上讲，对于越狱的 iPhone 来说是的，因为您可以做任何事情。但是，对于通过应用商店规则的主流应用，您需要使用目标 C。

# iphone - 如何使用 webview 从服务器读取 PDF 文档？

> ID：11845733
> 
> 赞同：0
> 
> 时间：2012-08-07T12:14:30.230
> 
> 标签：iphone, ios, xcode, pdf

我在服务器上有一些 PDF 书籍，这是我从服务器阅读这些书籍的代码。

```
self.webView = [[[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)] autorelease];
self.webView.backgroundColor = [UIColor whiteColor];
self.webView.scalesPageToFit = YES;
self.webView.delegate = self;
[self.view addSubview:self.webView];
[self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"url.pdf"]]]; 
```

使用此代码，webview 中不会出现任何内容，但是当我在我的资源文件夹中添加同一本书时，它就可以工作了。谁能帮助我如何使用上面的 url 修复它？thanx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:33:58.830

只需将您的最后一行更改为：

```
NSString *urlString = @"url.pdf";
NSString *encodedUrl = [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *targetURL = [NSURL URLWithString:encodedUrl];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
self.webView loadRequest:request]; 
```

您提供的pdf文件链接包含数千页的文件，因此加载可能需要一些时间。

# qt - 如何在qt中创建正确的退出按钮

> ID：11845734
> 
> 赞同：10
> 
> 时间：2012-08-07T12:14:30.880
> 
> 标签：qt, user-interface, button, exit

我正在尝试创建一个退出按钮，以正确关闭我在 QT 中制作的 GUI。我尝试通过以下方式执行此操作：

```
#include <QtGui/QApplication>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
QApplication a(argc, argv);

int window_width = QApplication::desktop()->width();
int window_height = QApplication::desktop()->height();

MainWindow w;

QPushButton * quit_btn = new QPushButton;
quit_btn->setParent(w.centralWidget());
quit_btn->setGeometry(window_width-50,12,32,32);

QObject::connect(quit_btn,SIGNAL(clicked()),qApp,SLOT(quit()));

w.resize(window_width,window_height);
w.show();

return a.exec();
} 
```

不幸的是，当我按下按钮时，调试器给出了一个错误：

```
Invalid address specified to RtlFreeHeap( 003E0000, 0028F950 ) 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-07T12:19:43.783

将按钮的`clicked()`信号连接到主窗口的`close()`插槽。这样东西就可以正确清理了。

# java - 以 8 个字符长度表示长度为 4 的字符串

> ID：11845741
> 
> 赞同：1
> 
> 时间：2012-08-07T12:15:05.817
> 
> 标签：java, freemarker

我正在使用 freemarker，我有一个`value`变量，它包含可变长度但小于 8 的字符串。

我只想在 8 个字符空间中打印它。

IE

```
${value} 
```

应该跨越8个空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:36:15.957

听起来你想要要么`${value?right_pad(8)}`要么`${value?left_pad(8)}`。

# php - 检查用户是否在没有请求权限的情况下登录 - facebook

> ID：11845743
> 
> 赞同：0
> 
> 时间：2012-08-07T12:15:14.427
> 
> 标签：php, facebook, api, sdk, permissions

我在 Facebook 上创建了一个应用程序，但在我请求权限之前，我想检查用户是否已登录并执行一些任务。

我试过这个：

```
 $facebook   = new Facebook(array(
            'appId'  => $app_id,
            'secret' => $secret,
            'cookie' => true
        ));

    $user = $facebook->getUser();
    if ($user) {
      echo 'logged in';
    } else {
      echo 'not logged in';
    } 
```

但它总是要求权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:11:37.900

我使用了这段代码：

```
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
    FB.init({
      appId      : 'xxxxxxx', // App ID
      channelUrl : 'YOUR_URL/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
                    //User Is Logged In and authorized
            var uid = response.authResponse.userID;
        } else if (response.status === 'not_authorized') {
            //User is Logged in and not authorized
        } else {
            // the user isn't logged in to Facebook.
        }
    });
};
</script> 
```

# jquery - JQUERY if :last:visible

> ID：11845749
> 
> 赞同：0
> 
> 时间：2012-08-07T12:15:31.227
> 
> 标签：jquery, visible

```
if( $("div:last").is(":visible") ) {
    $("p").css("color", "red");
} 
```

为什么脚本不能正常工作？

[http://jsfiddle.net/8Rrm2/8/](http://jsfiddle.net/8Rrm2/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:19:29.723

该脚本仅检查其在运行时是否可见。它不检查它*是否*可见。所以当用户使用右箭头键使其可见时，脚本已经通过并且它仍然不是红色的。您必须将该逻辑移动到您的事件处理程序中。

[这](http://jsfiddle.net/XNQk6/)是一个工作小提琴。我所做的只是剪切并粘贴您的逻辑。

现在，每次用户按下箭头键时，它都会更新按钮并相应地更改颜色。

另外，仅供参考：[KnockoutJS](http://learn.knockoutjs.com/)有一些很棒的模型绑定工具。几乎无需编写脚本，您就可以让模型和视图模型自动相互更新。箭头键更新您的视图模型值，从而自动在您的视图中创建更改。这真的很值得研究，他们的教程很有趣。

[这](http://jsfiddle.net/rzump/4/)是您的脚本示例，已修改为与 Knockout 一起使用，以防您好奇。在这个例子中，它的代码并没有*少*很多，但我确实认为它更易于阅读和处理“异常情况”。例如，如果您希望它在值 2、5 和 7 上显示为红色，则只需更改名为`iAmRed`.

# php - 将 .NET 转换为 php。响应.重定向

> ID：11845750
> 
> 赞同：0
> 
> 时间：2012-08-07T12:15:35.690
> 
> 标签：php, .net, response.redirect

好的，所以我的目标是获取此页面：

`http://www.orchidfilmcompany.co.uk/Payment.aspx`

在我的 php wordpress 页面中工作。

我真的不知道从哪里开始，我的整个网站都准备好了，除了这个新的在线支付页面。

创建 .NET 页面的人向我提供了 Response.Redirect 代码，其中包含带有 instID 等的商家人员 url。用户将被重定向到此 url 以完成付款

我一直在网上四处寻找，我发现 php 中的等效代码是：

`Header("Location: $url");`

我的问题是我不知道该怎么办？

这就是我所需要的输入框，用户可以在其中输入他们想要支付的金额，他们按下提交并将它们重定向到我在 Response.Redirect 代码中拥有的 url。使用他们在框中输入的金额，他们可以完成付款。

如果有人可以提供帮助，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:25:02.280

[header()](http://php.net/header)函数用于将浏览器重定向到特定位置。

如果您已经有了应该重定向客户端的 URL，并且您只需要添加一些来自输入的金额 .. 您应该将该金额附加到重定向 url

例如：

purchase.html - 在您的页面上包含此表单

```
<form method="post action="/redirect.php">
    <input type="text" name="amount" value="" />
    <input type="submit" name="sumbit" value="Purchase" />
</form> 
```

redirect.php - 将此文件放在您的 html 文件旁边

```
<?php
     $amount = (int) $_POST['amount'];
     $urlToRedirect = 'https://secure.wp3.rbsworldpay.com/wcc/purchase?instId=XXX&cartId=OFMaterial&currency=GBP&amount='.$amount;
     header('Location: '.$urlToRedirect);
     exit;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:22:23.047

您可以尝试使用提交到 PHP 页面的表单

然后 PHP 页面可以使用`$_POST['FORM_VAR']`

`$url`从提交的变量 + .net 页面 url构建一个变量

最后使用`header("Location: $url");`获取构建的 url 并重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:22:45.743

表单应该有一个`action`分配给它，这是将解析表单的页面。在该页面上（或在您的代码解析位中），确保重定向发生在那里。

标题语句是正确的，例如：

```
<?php
header('Location: http://www.example.com/');
exit;
?> 
```

将重定向到 example.com。因此，构建您想要重定向到那里的 URL。 **请注意：** header 直接修改您的网络服务器返回的标头，因此如果您已经将其他（HTML）输出发送到浏览器，则无法调用它。另请参阅此处的标题文档：http: [//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

# objective-c - 在一个点和你的手指之间画一条恒定的线

> ID：11845754
> 
> 赞同：2
> 
> 时间：2012-08-07T12:15:40.277
> 
> 标签：objective-c, ios, xcode

我想做与 Scalar 应用程序类似的事情，他们可以从一个点拖动到记事本上，将数字粘贴到他们拖动点的位置。我真正感兴趣的是与点和手指保持连接的线，如下所示：

![在此处输入图像描述](../Images/856c4acce270f74fdb2e9a191d95e970.png)

我的问题是我真的不知道这叫什么，所以我在寻找如何做到这一点时遇到了麻烦。有谁知道这会被称为什么，有他们遇到过关于这个主题的任何教程吗？如果你有一些代码让我看，那就更好了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:59:34.513

它将涉及子类`UIView`化和实现`touchesBegan`and方法，并在您的视图子类方法中从初始触摸到当前触摸`touchesMoved`画一条线。`drawRect`

继承人以前的问题，这将有助于[我如何在 iPhone 上画一条线？](https://stackoverflow.com/questions/856354/how-do-i-draw-a-line-on-the-iphone)

您只需要更改以下内容，以便坐标是您从 touches 方法获得的初始触摸和当前触摸的坐标

```
CGContextMoveToPoint(c, 5.0f, 5.0f);
CGContextAddLineToPoint(c, 50.0f, 50.0f); 
```

然后调用`[self setNeedsDisplay];`该`touchesMoved`方法将在您移动时重新绘制线条以跟随您的手指。

然后`touchesEnded`在手指抬起时执行代码。

希望它有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:37:08.287

这个 UIView 示例在手指拖动时绘制线条并检测到要触摸的第一个视图应该可以帮助您开始。

```
//this goes in the header file called "UILineView.h"

#import <UIKit/UIKit.h>

@interface UILineView : UIView

@end

//this in the implementation file called "UILineView.m"

#import "UILineView.h"

@implementation UILineView

{
    CGPoint _originOfTouchPoint; // your fist touch detected in touchesBegan: method
    CGPoint _currentFingerPositionPoint; // the position you have dragged your finger to
    CGFloat _strokeWidth; // the width of the line you wish to draw
    id _touchStartedObject; // the object(UIView) that the first touch was detected on
}

// If you use Interface Builder to design your interface, Objects in a nib file are reconstituted and then initialized using
// their initWithCoder: method
- (id)initWithCoder:(NSCoder *)decoder
{
    self = [super initWithCoder:decoder];
    if (self) {
        // Initialization code
        _originOfTouchPoint = CGPointMake( 0.0, 0.0 );
        _currentFingerPositionPoint = CGPointMake( 100.0, 100.0 );
        _strokeWidth = 2.0;
    }
    return self;
}
/*
// Use initWithFrame if you are not loding the UIView from a nib file
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        _originOfTouchPoint = CGPointMake( 0.0, 0.0 );
        _currentFingerPositionPoint = CGPointMake( 100.0, 100.0 );
        _strokeWidth = 2.0;
    }
    return self;
}
*/

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    CGContextRef context    = UIGraphicsGetCurrentContext();
    CGContextSetStrokeColorWithColor( context, [UIColor blueColor].CGColor );
    CGContextSetLineWidth( context, _strokeWidth );
    // fisrt point of line
    CGContextMoveToPoint( context, _originOfTouchPoint.x, _originOfTouchPoint.y );
    // last point of line
    CGContextAddLineToPoint( context, _currentFingerPositionPoint.x, _currentFingerPositionPoint.y );
    // draw the line
    CGContextStrokePath( context );
}

#pragma mark touches

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // get starting point and first view touched (if you need to send that view messages)
    _originOfTouchPoint = [[touches anyObject] locationInView:self];
    _touchStartedObject = [[touches anyObject] view];
}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint movedToPoint = [[touches anyObject] locationInView:self];
    // if moved to a new point redraw the line 
    if ( CGPointEqualToPoint( movedToPoint, _currentFingerPositionPoint ) == NO )
    {
        _currentFingerPositionPoint = movedToPoint;
        // calls drawRect: method to show updated line
        [self setNeedsDisplay];
    }
}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    // reset values
    _originOfTouchPoint = CGPointZero;
    _currentFingerPositionPoint = CGPointZero;
    _touchStartedObject = nil;
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:19:09.480

A`UIGestureRecognizer`可以做到这一点，而不会混淆触摸和拖动逻辑与视图。我用它们来编辑地图上的形状、长按拖动等。请参阅[本教程](http://www.raywenderlich.com/2011/11/30/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more/)。

# ubuntu-10.04 - 如何在 Ubuntu 10.04 LTS 上安装 postgres-9.1？

> ID：11845757
> 
> 赞同：2
> 
> 时间：2012-08-07T12:15:47.797
> 
> 标签：ubuntu-10.04, postgresql-9.1, aptitude

几个月前，我使用以下命令安装了 postgres 8.4：

```
$ sudo aptitude install postgresql-8.4 postgresql-client postgresql-contrib 
```

现在我正在尝试升级到 9.1。

```
$ sudo aptitude install postgresql-9.1 
```

显然没有与 9.1 匹配的包，但它似乎确实存在于 apt-get 中。我必须使用apt-get吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:37:01.747

这可能会帮助您：

[http://www.postgresql.org/docs/9.1/static/upgrading.html](http://www.postgresql.org/docs/9.1/static/upgrading.html)

* * *

否则您可以按照以下步骤操作：

作为根：

```
su - postgres
pg_dumpall > dump.sql
exit
cp ~postgres/dump.sql /root/ 
```

现在您可以安全地删除 postgresql-8.4 并安装 postgresql-9.1：

```
aptitude purge postgresql-8.4
aptitude install postgresql-9.1 
```

接下来检查 /etc/postgresql/9.1/main 中的 postgresql 配置。如果您进行任何更改，请确保使用 /etc/init.d/postgresql restart 重新启动 postgres。

Postgresql 9.1 现已启动并运行，让我们将数据重新导入其中。

```
su - postgres
psql < dump.sql 
```

就这样。您现在已完全升级到 PostgreSQL 9.1

编辑：

类似的问题在这里被问到：

[https://askubuntu.com/questions/66194/how-do-i-migrate-my-postgres-data-from-8-4-to-9-1](https://askubuntu.com/questions/66194/how-do-i-migrate-my-postgres-data-from-8-4-to-9-1)

# .net - 在多线程应用程序中使用非线程安全 dll

> ID：11845762
> 
> 赞同：0
> 
> 时间：2012-08-07T12:16:09.870
> 
> 标签：.net, multithreading

我正在使用[SSDeep](http://ssdeep.sourceforge.net/) `fuzzy.dll`对大量文件执行模糊散列。

如果我按顺序运行哈希，一切正常。如果我尝试使用多个线程，它会失败（应用程序终止，没有异常信息，日志中也没有任何内容）

我假设 DLL 不是线程安全的，并且一个线程正试图读取另一个的内存或类似的东西。

我想做的是让每个线程都有自己的dll“副本”。请注意，这不是一个实例——它都是静态/共享的——我只是想模拟如果同时运行两个引用 dll 的进程会发生什么——它们将拥有自己的内存空间等。 ..

在没有实际产生多个进程的情况下这可能吗？

```
<DllImport("C:\SSDeep\Fuzzy.dll",
    EntryPoint:="fuzzy_hash_filename",
    CallingConvention:=CallingConvention.Cdecl)>
Private Shared Function fuzzy_hash_filename(
                <InAttribute(),
                MarshalAsAttribute(UnmanagedType.LPStr)>
                ByVal Filename As String,
                ByVal Result As StringBuilder) As Integer
End Function

Public Shared Function FuzzyHash(Filename As String) As String
    Dim Ret As New StringBuilder
    Ret.Capacity = NativeConstants.FUZZY_MAX_RESULT
    Dim Success = fuzzy_hash_filename(Filename, Ret)
    If Success <> 0 Then
        Throw New Exception("SSDeep fuzzy hashing failed")
    End If
    Return Ret.ToString
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:19:45.963

为此，您需要两个单独的进程或两个不同的 dll 副本，例如“fuzzy1.dll”和“fuzzy2.dll”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:29:06.943

您不能在不同的线程中多次加载同一个本地 DLL。请参阅[多次加载 Dll 以允许 .Net 中的多线程](https://stackoverflow.com/questions/4225064/load-dll-multiple-times-to-allow-multi-threading-in-net)

我看到了不同的可能选项：

*   产生多个进程
*   正如 Eamonn McEvoy 所说，重命名您的 DLL，但这需要您知道您拥有的线程数并手动加载 DLL（因此很难使用`ThreadPool`例如）
*   将任务排入队列并按顺序处理它们

# iphone - ViewDidLoad 方法不保留变量？

> ID：11845763
> 
> 赞同：0
> 
> 时间：2012-08-07T12:16:10.383
> 
> 标签：iphone, ios, xcode, nsuserdefaults

**这是我的问题：**

在`viewDidLoad`我创建变量的方法中使用（如果它是“第一次运行”，**我**`NSUserDefaults`创建它并用`NSNumber`. 非常感谢

 **```
- (void)viewDidLoad {

NSUserDefaults *defaults =[NSUserDefaults standardUserDefaults];

if ([defaults objectForKey:@"seriesBool"]!=nil)

{
    seriesBool = [defaults objectForKey:@"seriesBool"];

}

else

{
    int i;

    seriesBool = [NSMutableArray arrayWithCapacity:9];

    for(i=0; i<9; i++)

    {
       [seriesBool addObject:[NSNumber numberWithBool:YES]];

    }

}

-(IBAction)toAction:(id)sender
{
NSLog(@"array: %@", seriesBool);
} 
```

seriesBool 为空...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:47:21.883

您必须设置属性，例如

```
@property(nonatomic,retain) NSMutableArray * seriesBool; 
```

并使用它

self.seriesBool = [NSMutableArray arrayWithCapacity:9];

或者

利用

```
 seriesBool = [[NSMutableArray alloc] initWithCapacity:9]; 
```

代替

```
seriesBool = [NSMutableArray arrayWithCapacity:9]; 
```

&你必须分配和分配对象

```
seriesBool = [[NSMutableArray alloc] init];
seriesBool = [defaults objectForKey:@"seriesBool"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:18:56.970

您需要首先学习内存管理的基础知识。基本上，那里发生的事情是您没有保留 seriesBool iVar。

看看这里：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

尝试保留您的 iVar，或者更好的是，创建一个 strong/retain 属性并使用访问器方法。**

# tomcat - Tomcat上的架构错误

> ID：11845764
> 
> 赞同：0
> 
> 时间：2012-08-07T12:16:26.593
> 
> 标签：tomcat, database-schema, postgresql-9.0, geonetwork

我有一个 tomcat 7 服务器和一个 postgreSQL 9.0 DB。我用它来设置地理网络元数据编辑器的开发环境。一切都是根据地理网络网站教程设置的。我在将服务器与数据库连接时遇到问题。我已经设置了一个默认模式，我的所有设置（我认为）都很好）。这是我得到的错误：

> 启动 appl 处理程序时引发异常。跳过。
> 异常 org.postgresql.util.PSQLException：
> 错误：未选择在
> 消息中创建模式错误：未选择创建模式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:35:39.300

导致此错误的一种方法是设置一个 bad `search_path`. 由于它在搜索路径上的第一个有效架构中创建表，因此空路径（或仅包含不存在的架构名称或您没有创建权限的路径）将导致此错误。

```
测试=# 设置搜索路径 = some_nonexistent_schema_name;
放
test=# 创建表 w (id int);
错误：没有选择要创建的架构

```

如果你同时展示你的`search_path`价值和失败的陈述，那将会有所帮助。

# cocoa - 跟踪光标位置可可并返回相对于窗口的鼠标位置

> ID：11845767
> 
> 赞同：0
> 
> 时间：2012-08-07T12:16:39.073
> 
> 标签：cocoa, user-interface, mouseevent, mousemove

我想我会发布一个关于在可可应用程序中连续跟踪可可中的鼠标位置（在 OSX 10.5.8 中使用 xcode 3.1.4）的问题和答案。

这是一个自我回答的问题，因为我终于想通了，但在这里找不到我认为描述了我如何设法解决它的答案

可能有些人可能认为它比使用事件点击更容易加上没有 10.6 中的屏蔽功能，这很容易:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:18:13.740

继承人我是怎么做到的。

首先这是我用来设置跟踪区域的代码：

```
NSTrackingArea* trackingArea = [ [ NSTrackingArea alloc] initWithRect:[ mainWindow frame]       options:(NSTrackingMouseMoved | NSTrackingActiveAlways ) owner:self userInfo:nil);

[container addTrackingArea:trackingArea]; 
```

当我创建主窗口时，我会在设置所有内容时添加此消息：

```
 [window setAcceptsMouseMovedEvents:YES]; 
```

在我想要捕获事件的类的头文件中（对我来说，它与我创建的跟踪区域在同一个类中）我将 NSResponder 子类化，然后实现我想要捕获的事件，对我来说是 mouseMoved。

```
-(void) mouseMoved: (NSEvent *) thisEvent
{
  NSPoint cursorPoint = [ thisEvent locationInWindow ];
  NSLog(@"X coordinate is %f and Y coordinate is %f",cursorPoint.x,cursorPoint.y);
} 
```

希望这个对你有帮助 ：）

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:14:52.120

谢谢！我用 [NSEvent mouseLocation] 得到了全局鼠标坐标；

# c# - 如何通过 HTTP 发送进程的标准输出

> ID：11845770
> 
> 赞同：3
> 
> 时间：2012-08-07T12:16:40.693
> 
> 标签：c#, .net, asp.net-mvc, http, stdout

我的 MVC 应用程序中有一个端点设置，它启动了一个外部进程（powershell 脚本）。我希望能够在创建时将输出重定向到“实时”浏览器。有没有如何做到这一点的例子？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:24:41.830

读取进程的标准输出流并通过[SignalR](https://github.com/SignalR/SignalR/)将其提供给浏览器应该可以工作。在这里，您可以找到[一些示例](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)来帮助您开始使用 SignalR。

如果您决定尝试一下，这也可能对您有用：

[从集线器外部通过集线器广播](https://github.com/SignalR/SignalR/wiki/Hubs)（在页面底部）

我自己在类似的场景中成功使用了 SignalR（将长时间运行的操作的实时进度提供给浏览器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:35:00.310

您可以考虑的一种方法是我在一个小型销售点应用程序中使用的一种方法，它允许通过 Web 浏览器进行远程查询。

我创建了一个简单的 Web 服务器，它作为附加到应用程序其余部分的 DLL 在自己的线程中运行。当应用程序启动时，它会检查 Web 服务器是否也应该启动。

这是一个使用 C++ 和 CAsynch 套接字的非常简单的 Web 服务器，但是它允许使用来自其他计算机的 Web 浏览器进行两种访问：(1) 下拉文件，例如 HTML 页面、Javascript、图像等。像普通的 Web 服务器一样，并且 (2) 使用特定功能的 URL 激活特定的功能组件，例如生成报告。

使用它，我也成功地使用了带有 JSON 的 JavaScript。

您可以在许多地方找到各种语言的简单 HTTP Web 服务器的源代码示例，并且在 stackoverflow 问题中有一些示例和链接。

这样做的关键是让您的 Web 服务器功能实现 HTTP 协议并保持 TCP 连接将其他内容推送出去。您的案例中的其他内容将是您已启动的流程的输出。

因此，这将要求您启动进程并执行标准 I/O 重定向，以便您启动的进程将通过管道将其输出发送到您的 Web 服务器，然后该服务器将从管道中读取进程输出，然后将其发送到打开浏览器的 TCP 端口。

使用它，您实际上可以执行一些 JavaScript，让浏览器用户通过开发基于文本的协议将命令发送回正在运行的进程，该协议被发送回 Web 服务器，然后将传入的文本发送到启动的进程。

其中一些实际上类似于在 Apache 等之前的原始 Web 服务器中使用的旧 CGI 类型的功能。这些服务器所做的是启动一个应用程序，通常是一些脚本，如 Perl，但有时也有一些编译的东西，如 C，和然后从应用程序获取标准输出并将其反射回浏览器 TCP 连接。通用网关接口，我想就是这个意思。

# php - 星号。php。如果我知道 SIP，如何获取电话号码？

> ID：11845772
> 
> 赞同：1
> 
> 时间：2012-08-07T12:16:51.320
> 
> 标签：php, asterisk

我们有星号服务器和 GSM 网关。我需要知道当前时间拨打星号的电话号码。现在我可以通过命令获取 SIP，`core show channels`但我不知道如何获取电话号码。我使用 phpAGI 库：

```
$agi_manager = new AGI_AsteriskManager(null, $agi_config);
$connect = $agi_manager->connect();
$result = $agi_manager->command('core show channels'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:28:20.190

'core show channels' 输出的第一行是频道 ID。使用它来发出命令`core show channel <id>`（频道末尾没有's'！）以查看有关频道的更多信息，包括主叫方的号码。

```
foreach(explode("\n", $result) as $line) {
   $cols = explode(" ", $line);
   $result2 = $agi_manager->command('core show channel '.$col[0]);
   if(preg_match('/Connected Line ID:\s*(\d+)/', $result2, $matches) {
      printf("Phone number: %s\n", $matches[1]);
   }
   else {
      printf("No phone number found for SIP Channel ID %s\n", $col[0]);
   }
} 
```

使用 Asterisk 1.8 测试，您的版本可能会给出不同的结果。只需检查`core show channel`.

# html5-canvas - HTML5 画布游戏 setTimeInterval 为多个对象创建难度

> ID：11845773
> 
> 赞同：0
> 
> 时间：2012-08-07T12:16:55.217
> 
> 标签：html5-canvas, game-loop

我是第一次创建 HTML5 画布游戏。它是一款塔防游戏，所以基本上我有一系列来自“敌人”类的敌人物体，它们使用路径飞入。然后我还有一组来自“塔”类的塔对象，当它们靠近时会杀死它们。

对于移动多个敌人和从塔射击的这两种操作，我使用如下 setInterval 来更改它们的状态并通过在各自类的实例中使用设置的间隔来相互独立地射击动画。_thatTower.attackInterval = setInterval(function () ...此处触发代码... },50);

我面临的困难是这些 setIntervals 往往与其他实例混合在一起，并且在少数情况下结合在一起并将所有敌人的反应作为一个而不是独立的..

我希望这些独立工作。我对此有两种看法 - 1\. 是否有更好的方法可以将 setintetval 用于我未使用的同一类不同实例。2\. 或者可能是 setinterval 在这些地方不适合使用.. 请让我知道我们如何独立移动许多东西，就像我在 Canvas 上的情况一样？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:28:22.117

您应该存储一个值，该值存储动画最后一次更改的时间。在您的游戏循环中，迭代您的游戏对象（该值将附加到每个对象）并相应地更新它们的动画状态。这是任何其他语言采用的传统方法，并且比许多计时器更明确。

# ruby-on-rails - Gemfile.lock 丢失

> ID：11845774
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:17:00.663
> 
> 标签：ruby-on-rails, heroku

好吧，我已经被困了好几个小时了。当我尝试推送到 heroku 时，它说：

Gemfile.lock 是必需的。请在本地运行“捆绑安装”！并提交您的 Gemfile.lock。

所以我看到我需要一个我没有的 Gemfile.lock，当我运行“捆绑安装”时，它说：

由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。

然后我运行“捆绑秀”并得到：

在您的 Gemfile 中列出的任何 gem 源中找不到 gem 'sqlite3 (= 2.8.17)'。

任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:21:55.017

你能再次创建你的rails项目吗？

听起来你缺少一堆你需要的文件。如果您还没有完成开发，请创建一个新项目并将您拥有的代码复制到其中。

# android - Android setImageResources

> ID：11845775
> 
> 赞同：2
> 
> 时间：2012-08-07T12:17:01.520
> 
> 标签：android

我正在制作一个 android 应用程序，用户必须在其中猜测照片中的人，但我有一个问题。
我有一个 ImageView，我希望当用户猜测或不猜测某些人时，图像会发生变化。
我正在使用 setImageResources() 方法，但它无法正常工作。

```
public void checkAnswer(){

    imageGuess.setImageResource(R.drawable.luizao);

    if (answer2.isChecked()){
        countRightAnswers++;
        marks_number.setText(countRightAnswers.toString());
        imageGuess.setImageResource(R.drawable.ruben_pintu);
    } else {
        imageGuess.setImageResource(R.drawable.ruben_pintu);
    }

    if (answer4.isChecked()){
        countRightAnswers++;
        marks_number.setText(countRightAnswers.toString());
        imageGuess.setImageResource(R.drawable.ruben_cani);
    } else {
        imageGuess.setImageResource(R.drawable.ruben_cani);
    }

} 
```

有人可以帮助我吗？

# nutch - Nutch Crawl2.0 错误 - java.io.IOException：作业中未指定输入路径

> ID：11845778
> 
> 赞同：2
> 
> 时间：2012-08-07T12:17:19.653
> 
> 标签：nutch, web-crawler

我尝试使用 nutch 2.0 抓取一些网址，但失败如下：

org.apache.nutch.crawl.Crawler urls -dir crawls -depth 5 -topN 100 线程“主”java.io.IOException 中的异常：在 org.apache.hadoop.mapreduce.lib.input 的作业中未指定输入路径。 FileInputFormat.listStatus(FileInputFormat.java:193) at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits(FileInputFormat.java:252) at org.apache.gora.mapreduce.GoraMapReduceUtils.getSplits(GoraMapReduceUtils.java: 67) 在 org.apache.gora.mapreduce.GoraInputFormat.getSplits(GoraInputFormat.java:93) 在 org.apache.hadoop.mapred 的 org.apache.gora.store.impl.FileBackedDataStoreBase.getPartitions(FileBackedDataStoreBase.java:148) .JobClient.writeNewSplits(JobClient.java:962) 在 org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:979) 在 org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:174) 在 org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:897) 在 org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850) 在 java.security.AccessController.doPrivileged （本机方法）在 javax.security.auth.Subject.doAs(Subject.java:396) 在 org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121) 在 org.apache.hadoop.mapred.JobClient .submitJobInternal(JobClient.java:850) 在 org.apache.hadoop.mapreduce.Job.submit(Job.java:500) 在 org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:530) 在 org. apache.nutch.util.NutchJob.waitForCompletion(NutchJob.java:43) 在 org.apache.nutch.crawl.GeneratorJob.run(GeneratorJob.java:180) 在 org.apache.nutch.crawl.Crawler.runTool(Crawler. java:68) 在 org.apache.nutch.crawl.Crawler.run(Crawler.java:152) 在 org.apache.nutch。crawl.Crawler.run(Crawler.java:250) at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65) at org.apache.nutch.crawl.Crawler.main(Crawler.java:257)

谁能帮我？多谢！

# asp.net - Minfy CSS 和 Javascript，包括 @import url (ASP.Net)

> ID：11845782
> 
> 赞同：1
> 
> 时间：2012-08-07T12:17:37.810
> 
> 标签：asp.net, minify, squishit

我的页面上加载了大约 20 个 CSS 文件，我正在寻找一种工具来缩小我的 CSS 和 JavaScript。我真的很喜欢 SquishIt，但它似乎无法处理通过 @import url 加载的 css。由于我的很多 CSS 文件是通过 @import 加载的，因此输出不正确。

是否有解决此问题的方法，或者有人可以推荐另一个可以正确处理通过@import 导入的 CSS 的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:01:39.963

您是否尝试在 css 捆绑设置中调用 .ProcessImports 方法？[我认为它可以满足您的需求，请参阅此文件](https://github.com/jetheredge/SquishIt/blob/master/SquishIt.Tests/CSSBundleTests.cs#L733-758)中的测试用例 CanRenderCssFileWithImportStatement()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:04:27.617

如果您不使用 Asp.Net 4.5，则可以使用 Web 优化。安装这个 Nuget 包：使用[http://nuget.org/packages/Microsoft.Web.Optimization/0.1](http://nuget.org/packages/Microsoft.Web.Optimization/0.1)包。

如何使用：

[http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetandvisualstudio_topic5.aspx](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetandvisualstudio_topic5.aspx)

[http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4-5-series.aspx](http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4-5-series.aspx)

[http://www.beletsky.net/2012/04/new-in-aspnet-mvc4-bundling-and.html](http://www.beletsky.net/2012/04/new-in-aspnet-mvc4-bundling-and.html)

# android - 如何在 Android 中播放 DivX 视频？

> ID：11845783
> 
> 赞同：0
> 
> 时间：2012-08-07T12:17:37.467
> 
> 标签：android

*已经问过这个问题，但没有得到回应，所以我再问一次。请多多包涵。:)*

如何在我的 Android 应用中播放 DivX 和其他非标准格式的视频（flv、mov 等）？

我发现的唯一库是 Vitamio，它确实可以播放这些文件，但前提是用户安装了额外的插件 Vitamio 插件。

有没有办法解决？使用其他库还是以某种方式在我的应用程序中包含该插件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:28:59.847

FFMPEG 是您所需要的。[Rock Player](https://play.google.com/store/apps/details?id=com.redirectin.rockplayer.android.unified.lite)使用 FFMpeg 播放视频。这是[源代码](http://www.rockplayer.com/tech_en.html)

# android - 如何在 Android 的 MapView 上绘制 KML 文件？

> ID：11845790
> 
> 赞同：2
> 
> 时间：2012-08-07T12:17:57.080
> 
> 标签：android, google-maps, android-mapview, kml, android-maps

我必须将 KML 文件绘制到 MapView 中。我在互联网上查看，但我没有找到如何做到这一点的例子，如果有人可以举例说明如何做到这一点，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:48:10.787

Google 已停止处理 kml 文件，首选解析 xml 或 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:54:06.937

现在不支持 KML。您可以像这样绘制不带 KML 的跟踪：

1）向谷歌服务提出请求：

> ```
> Request : http://maps.googleapis.com/maps/api/directions/output?parameters
> Info about : https://developers.google.com/maps/documentation/directions/ 
> ```

2) 发送请求

3) 像这样解析 JSON 响应：

```
JSONObject jsonObject;
  ...
JSONArray results = jsonObject.optJSONArray("routes");
JSONObject route = results.optJSONObject(0);
JSONArray legs = route.optJSONArray("legs");
JSONObject leg = legs.optJSONObject(0);
JSONArray steps = leg.optJSONArray("steps");

for (int i=0; i < steps.length(); ++i) {
    JSONObject step = steps.optJSONObject(i);
    JSONObject startP = step.optJSONObject("start_location");
    JSONObject endP = step.optJSONObject("end_location");
    JSONObject polyline = step.optJSONObject("polyline");
    String encodedPoints = polyline.optString("points");
    ... 
```

4）**encodedPoints**有很多点可以通过这个解码：[Map View draw Directions using google Directions API - 解码折线](https://stackoverflow.com/questions/6708408/map-view-draw-directions-using-google-directions-api-decoding-polylines)

5）像这样绘制叠加层：

```
private class Road extends Overlay {
        private ArrayList<GeoPoint> list;
        private Paint paint;

        public Road(ArrayList<GeoPoint> list) {
            this.list = new ArrayList<GeoPoint>();
            this.list.addAll(list);
            paint = new Paint();
            paint.setColor(Color.MAGENTA);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(4);
        }

        @Override
        public void draw(Canvas canvas, MapView mapView, boolean shadow) {
            drawPath(mapView, canvas);
        }

        private void drawPath(MapView mv, Canvas canvas) {
            int x1 = -1;  
            int y1 = -1;
            int x2 = -1;
            int y2 = -1;

            Point point = new Point();

            for (int i=0; i < list.size(); i++) {
                mv.getProjection().toPixels(list.get(i), point);
                x2 = point.x;
                y2 = point.y;

                if (i > 0) {
                    canvas.drawLine(x1, y1, x2, y2, paint);
                }

                x1 = x2;
                y1 = y2;
            }
        } 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:14:23.723

这种通过解析 KML 文件从 Google 中提取 Google 路线的方式自 2012 年 7 月 27 日起不再可用（因为 Google 改变了检索 Google 路线的结构，现在您只能通过 JSON 或 XML 来获取），是时候使用 JSON 而不是 KML。

[在我自己的问题中查看](https://stackoverflow.com/a/11745316/1230123)答案。

# sql - 在使用 IN 子句进行动态查询时需要帮助

> ID：11845794
> 
> 赞同：0
> 
> 时间：2012-08-07T12:18:06.433
> 
> 标签：sql, sql-server, sql-server-2008

我有 1 个名为 ProductMaster 的表。另一个表是 VendorMaster。现在我想从指定的 Vendormaster 中查找所有产品。

所以我想使用 SQL Server 的 IN 子句。

我将以逗号分隔的格式传递 VendorName。例如惠普、联想

我正在使用函数“f_split”以逗号（，）作为分隔符来拆分字符串。

我必须生成动态查询，因为我想为不同的参数使用自定义的 where 子句。

所以请告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:20:48.680

如果你的名字是

```
 declare @in varchar(100)
 select @in = 'HP,LENOVO' 
```

您可以使用动态 SQL

```
 declare @sql nvarchar(1000)
 select @sql = 'select * from yourtable where yourfield in ('+@in +')'
 exec sp_executesql @sql 
```

或者你可以让你的 split 函数返回一个表

```
 select * 
 from yourtable
     inner join dbo.f_Split(@in) f 
     on yourtable.yourfield =f.entry 
```

第二个更可取，因为它可以防止 SQL 注入类型的攻击

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:25:24.547

您最好单独使用连接和可为空的参数

考虑这个 table1 id 连接到表 2 id，where 子句可以使用参数 p1 表示 col1 或 p2 表示 col2 等...

```
select * 
from table1 t1
inner join table2 t2 on t2.id = t1.id -- join the tables
where 1=1
and t2.col1 = isnull(p1, t2.col1)
and t2.col2 = isnull(p2, t2.col2)
.
. -- etc...
. 
```

如果 p1 为空，那么您将得到一个 t2.col1 = t2.col1 的测试，它有效地将 p1 从 where 子句中解散。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:23:42.017

你可以使用

```
SELECT * FROM ProductMaster WHERE VendorId IN (
  SELECT DISTINCT VendorId FROM VendorMaster 
  WHERE PATINDEX('%'+VendorName+'%',@VendorNameCommaSeparated)>0
) 
```

# perl - 如何在 Perl 中读取多个文件并创建包含这些文件数据的不同文件

> ID：11845795
> 
> 赞同：0
> 
> 时间：2012-08-07T12:18:08.323
> 
> 标签：perl

我有一堆 18MB 的文本文件，我需要在 Perl 中读取这些文件，提取特定信息，并将其写入每个文件的新文件中。

我怎样才能做到这一点？

例如，以下代码仅适用于一个文件，并为代码中提到的文件创建一个新文件，但我如何处理多个文件，因为我有很多文件？

以下是我的代码，仅适用于单个文件。我想对很多文件做同样的事情。我该怎么做？

```
use Regexp::Common qw/net/;
use Regexp::Common qw/net/;

system("clear");

my $file2 = 'TR1';
open my $in, '<', $file2 or die $!;
open my $out, '>', 'Number_of_Hops_TR1_007' or die $!;

my $var = 0;
my $i   = 0;
my $traceroute;
my $line;

while (my $line = <$in>) {

    if ($line =~ /^traceroute to (\S+)/) {
        $traceroute = $1;
        $var++;

        #print "$traceroute\n";
    }
    my ($ip) = $line =~ /(?: \d+ \s \s+) ($RE{net}{IPv4}) /msx;

    if ($traceroute eq $ip) {

        print $out $ip if defined, "\n";
        if ($ip ne undef) {
            { $i++; }
        }
    }
    else {
    }
}

print $out "Number of traceroutes - $var\n";

print $out "Number of traceroutes reached destination - $i\n";

my $subs = $var - $i;

print $out
    "Number of traceroutes that did not reaach destination ($subs)\n";

my $perc = ($i / $var) * 100;

print $out "Percentage of sucessful traceroutes ($perc%)\n"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:54:41.037

一般的方法可能如下所示：

```
#!/usr/bin/env perl
use strict;
use warnings;
my $prev = q();
my ($fh, $log);
while (<>) {
    if ( $ARGV ne $prev ) {
        $prev = $ARGV;
        $log  = $ARGV . '.log';
        open $fh, '>', $log or die "Can't open '$log': $!\n";
    }
    if ( m/^traceroute to (\S+)/ ) {
        print {$fh} $1, "\n";
    }
} continue {
    close $fh if eof;
} 
```

输出文件仅根据其输入名称以“.log”为后缀命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:35:11.893

```
@txt_files = ();
@useful_files = ();

opendir(hand,"directory/with/txt/files");#eg: on windows opendir(hand,"c:/txtdir");
@files = readdir(hand);
closedir(hand);

foreach(@files){
  if(/\.txt$/i) {                        #if the filename has .txt at the end
   push(@txt_files,$_);
  }
}

foreach(@txt_files) {
  $txt_file=$_;      
  open(hanr,$txt_file);
  @lines=();
  @lines=<hanr>;

  foreach(@lines){
    if(/^somebeginstuff/i) {             #if you are searching txt files that begin with somebeginstuff
      push(@useful_files, $txt_file)
    }
  }
}
close(hanr); 
```

* * *

**如果你想为每个txt文件提取有用的行，你可以创建一个哈希，存储-$filename-作为键，-@arrayofusefullines-作为值，如果你不知道可以问**

将这样的功能与`push(@useful_files, $txt_file)`

但是，如果您想将 @useful_files 的所有内容存储在其他文件中，请执行此操作

```
foreach(@useful_files){
  open(hanr,$_);
  @lines=();
  @lines=<hanr>;                          #lines are saved now, they just have to be written
  close(hanr);
  @parts = split('.', $_);
  $filenamewithouttype = @parts[0];

  open(hanw,$filenamewithouttype."\.dat");#hanw will be used for writing in new .dat files
  print hanw @lines;
  close(hanw);
} 
```

* * *

我的时间比较少，所以我无法检查任何打字错误，希望您了解它是如何完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:09:03.713

假设你有一个目录中的所有文件（可能是'/home/user/tmp'），你可以将你的代码嵌入到一个由目录读取程序调用的函数'process'中：

```
#!/usr/bin/perl -w

use strict;

my @files = </home/user/tmp/*>;

foreach (@files) {
  if (-f $_) {
    process ($_);
  }
}

sub process {
  my $file2 = $_[0];
  open my $in, '<', $file2 or die $!;
  open my $out, '>', "$file2.log" or die $!;

  # ... your remain code here
} 
```

否则，您可以构建一个要编辑的文件列表（假设在“filelist.txt”中），其中包含完整的路径信息和每行一个文件名，并使用相同的先前代码加载到“@files”：

```
open LIST, "<filelist.txt" or die;
my @files = <LIST>;
close LIST; 
```

# visual-studio - 如何在编译之前列出所有#define 的值？

> ID：11845798
> 
> 赞同：2
> 
> 时间：2012-08-07T12:18:19.197
> 
> 标签：visual-studio, gcc

我有兴趣在调用编译器本身之前查看预处理器定义的所有值。

是否有某种标志可以在实际编译之前停止编译器（VS 或 gcc）并让它打印出所有使用 #define 语句设置的值？我不仅有兴趣从我自己的程序中查看#define 语句，而且还对 GENERIC_READ 等标准库中的语句感兴趣

所以理想情况下，会话看起来像：

```
cl /someflag mycode.c
> #define GENERIC_READ 0x80000000
> #define GENERIC_WRITE 0x40000000
> ... 
```

# r - 强制函数定义评估符号

> ID：11845801
> 
> 赞同：1
> 
> 时间：2012-08-07T12:18:32.113
> 
> 标签：r

考虑下面的例子：

```
> x=2
> myfun = function(y) x*y
> myfun(3)
[1] 6
> x=4
> myfun(3)
[1] 12 
```

我将如何定义`myfun`，以便其定义保持定义时的值`x`，而不是引用`x`？（即，第二次调用`myfun(3)`也产生 6 而不是 12）。

编辑：更改标题以删除不正确的术语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T12:26:49.587

我不得不猜测你的目的是什么。也许您只需要使用默认值定义您的参数之一：

```
myfun <- function(y, x=2){
  x * y
} 
```

然后使用它：

```
x <- 3

myfun(4)
[1] 8

myfun(x=4, 3)
[1] 12

myfun(x)
[1] 6 
```

* * *

但也许你真的在描述一个闭包。

> *对象是具有功能的数据。闭包是一个带有数据的函数。*
> 
> --- 约翰·D·库克

这是一个例子。首先定义一个记住快照的闭包：

```
newSnapshot <- function(x){
  xx <- x
  function(y) xx * y
} 
```

然后使用它：

```
x <- 10
myfun <- newSnapshot(x)

myfun(4)
[1] 40

x <- 4
myfun(5)
[1] 50 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T13:04:38.067

昨天在 R-help 邮件列表上提出了几乎相同的问题。请参阅关于 Nabble 的讨论，了解您可以执行此操作的各种方法。

[http://r.789695.n4.nabble.com/Force-evaluation-of-a-symbol-when-a-function-is-created-td4639350.html](http://r.789695.n4.nabble.com/Force-evaluation-of-a-symbol-when-a-function-is-created-td4639350.html)

这里有三种方法（来自 R-help 讨论）：

```
x <- 2

f1 <- local({x.now <- x;function(y) x.now*y})
f2 <- evalq(function(y)a*y,env=list(a=x))

multiply_by_x <- function(x) {
    force(x)
    function(y) y*x
}

f3 <- multiply_by_x(x) 
```

结果

```
> f1(3)
[1] 6
> f2(3)
[1] 6
> f3(3)
[1] 6

> x <- 4
> f1(3)
[1] 6
> f2(3)
[1] 6
> f3(3)
[1] 6 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T13:06:10.513

一种方法是：

```
myfun <- function(x = 2) {
    function(y) {
        x * y
    }
} 
```

基本上，我们编写一个函数，该函数返回一个执行我们想要的计算的函数。上面默认`x`设置为`2`，但您可以在调用时更改此设置`myfun`。当我们调用时，`myfun()`我们保存返回的函数，在`foo`下面的示例中：

```
> foo <- myfun() 
```

现在，无论您`x`在全局环境中做什么，都`foo()`将始终使用在调用该函数时`x`在环境中定义的值。`myfun()`

```
> foo(3)
[1] 6
> x <- 6
> foo(3)
[1] 6
> x <- 4
> foo(3)
[1] 6 
```

这一切都有效，因为由调用创建的函数环境`myfun()`contains`x`并且在定义函数时存在`x`该值。`x`

```
> environment(foo)$x
[1] 2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T13:16:48.197

这是另一个关闭解决方案：

```
myfun <- local({
  x <- 2
  list(
    f=function(y) {
      x*y
    },
    set.x=function(newx) {
      x <<- newx
    },
    get.x=function() {
      x
    }
  )
}) 
```

然后你可以按如下方式使用它：

```
> myfun$get.x()
[1] 2
> myfun$set.x(5)
> myfun$get.x()
[1] 5
> myfun$f(3)
[1] 15 
```

# cocoa - 如何在 Qt 中集成 Cocoa 代码

> ID：11845802
> 
> 赞同：2
> 
> 时间：2012-08-07T12:18:34.707
> 
> 标签：cocoa, qt

就像标题说的那样，如何将我的`.h`和`.m`文件添加到 Qt Creator？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:05:04.430

在您的 Qt Creator 项目“.pro”文件中添加 OBJECTIVE_SOURCES，例如

```
OBJECTIVE_SOURCES += \
mac/cocoainitializer.mm 
```

和通常的标题，比如

```
HEADERS += \
mac/cocoainitializer.h 
```

# python - Python 的 time.time() 时区是特定的吗？

> ID：11845803
> 
> 赞同：41
> 
> 时间：2012-08-07T12:18:40.850
> 
> 标签：python, datetime, time, timezone

很抱歉提出了太基本的问题，但在阅读文档后我无法将其清除。似乎我在这里遗漏或误解了一些太基本的东西。

从不同时区调用是否会`time.time()`同时产生不同的结果？这可能归结为 的定义`epoch`，在文档（以及我在 Internet 上不那么深入的搜索中）没有提及时区。

另外，假设 time.time() 已从具有不同时区的地方调用，并`datetime`在他们的机器上转换为 UTC ，它们都会给出相同的 UTC 时间吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-07T12:22:57.243

是的，返回自未指定*epoch*[`time.time()`](http://docs.python.org/library/time.html#time.time)以来的秒数。请注意，在大多数系统上，这不**包括**闰秒，尽管[可以将系统时钟配置](http://support.ntp.org/bin/view/Support/TimeScales)为包括闰秒。在 cpython 上，实现为对 C 函数的调用，根据[C 标准](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf)的第 27.23.2.4.2 节，它不必使用指定的时期：***`time.time``time`***

 ***> 该`time`函数确定当前日历时间。该值的编码未指定。

在几乎所有操作系统（包括 Linux、Mac OSX、Windows 和所有其他 Unix）上，纪元是[1970-1-1, 00:00 UTC](http://en.wikipedia.org/wiki/Unix_timestamp)，并且在这些系统`time.time`上与**时区无关**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T12:23:33.070

返回值应该相同，因为它是以秒为单位的 UNIX 纪元偏移量。

话虽如此，如果您将其转换为使用不同时区的日期，则值当然会有所不同。

如果从这些日期中将它们中的每一个都转换为 UTC，那么结果必须相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T12:22:16.640

`time.time()`返回自 UNIX 纪元开始于 1970 年 1 月 1 日 0:00 UTC 以来的秒数。假设机器的时钟设置正确，它在每台机器上返回相同的值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-07T12:23:54.657

根据[文档](http://docs.python.org/library/time.html#time.time)：

> 以浮点数形式返回**自纪元以来**的时间（以秒为单位）。请注意，尽管时间始终以浮点数形式返回，但并非所有系统都提供比 1 秒更好的时间精度。**虽然此函数通常返回非递减值，但如果系统时钟**已在两次调用之间调回，则它可以返回比先前调用更低的值。

维基百科说关于“ [Unix epoch](https://en.wikipedia.org/wiki/Unix_time) ”：

> Unix 纪元是 1970 年 1 月 1 日 00:00:00 UTC 时间（或 1970-01-01T00:00:00Z ISO 8601）。

它继续

> 这个定义有一个问题，因为 UTC 直到 1972 年才以其当前​​形式存在；这个问题将在下文讨论。为简洁起见，本节的其余部分使用 ISO 8601 日期格式，其中 Unix 纪元为 1970-01-01T00:00:00Z。

时间和日期很有趣。

鲜为人知的事实：1894 年之前的瑞士时区是 34:08（34 分 8 秒）。1894 年 6 月后，更新为 29:44。（[链接](https://stackoverflow.com/questions/10833428/whats-the-correct-time-zone-before-time-zones-were-introduced)）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T12:21:48.650

从文档中：

> 该模块中定义的大部分函数都调用同名的平台 C 库函数。有时查阅平台文档可能会有所帮助，因为这些函数的语义因平台而异。

[http://docs.python.org/library/time.html?highlight=time.time#module-time](http://docs.python.org/library/time.html?highlight=time.time#module-time)

所以答案是：视情况而定。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-30T12:58:04.820

`time.time()`在同时运行的任何机器上返回相同的值，`time.time()`即使这些机器使用不同的时区。

我有两台机器，一台使用UTC，另一台使用UTC+7。

我几乎同时在两台机器上运行这个脚本（UTC 大约提前三秒）：

```
import time
from datetime import datetime
import pytz

print("GENERATING TIMESTAMP:")
print("                                           time.time()", int(time.time()))
print("                            datetime.now().timestamp()", int(datetime.now().timestamp()))
print("datetime.utcnow().replace(tzinfo=pytz.UTC).timestamp()", int(datetime.utcnow().replace(tzinfo=pytz.UTC).timestamp()))
print("                         datetime.utcnow().timestamp()", int(datetime.utcnow().timestamp()))

ts = datetime.utcnow().replace(tzinfo=pytz.UTC).timestamp()

print("\nGENERATING DATETIME FROM TIMESTAMP ts =", ts)
print("                         datetime.fromtimestamp(ts)", datetime.fromtimestamp(ts))
print("            datetime.fromtimestamp(ts, tz=pytz.UTC)", datetime.fromtimestamp(ts, tz=pytz.UTC))
print("datetime.fromtimestamp(ts).replace(tzinfo=pytz.UTC)", datetime.fromtimestamp(ts).replace(tzinfo=pytz.UTC)) 
```

UTC机器打印了这个：

```
GENERATING TIMESTAMP:
                                           time.time() 1601469475
                            datetime.now().timestamp() 1601469475
datetime.utcnow().replace(tzinfo=pytz.UTC).timestamp() 1601469475
                         datetime.utcnow().timestamp() 1601469475

GENERATING DATETIME FROM TIMESTAMP ts = 1601469475.713351
                         datetime.fromtimestamp(ts) 2020-09-30 12:37:55.713351
            datetime.fromtimestamp(ts, tz=pytz.UTC) 2020-09-30 12:37:55.713351+00:00
datetime.fromtimestamp(ts).replace(tzinfo=pytz.UTC) 2020-09-30 12:37:55.713351+00:00 
```

UTC+7 机器打印了这个：

```
GENERATING TIMESTAMP:
                                           time.time() 1601469478
                            datetime.now().timestamp() 1601469478
datetime.utcnow().replace(tzinfo=pytz.UTC).timestamp() 1601469478
                         datetime.utcnow().timestamp() 1601444278

GENERATING DATETIME FROM TIMESTAMP ts = 1601469478.637603
                         datetime.fromtimestamp(ts) 2020-09-30 19:37:58.637603
            datetime.fromtimestamp(ts, tz=pytz.UTC) 2020-09-30 12:37:58.637603+00:00
datetime.fromtimestamp(ts).replace(tzinfo=pytz.UTC) 2020-09-30 19:37:58.637603+00:00 
```

您可以看到它`time.time()`应该在任何机器上返回相同的值，而不管该机器使用的时区如何。

> 另外，假设 time.time() 已从具有不同时区的地方调用，并在其机器上转换为 UTC 日期时间，它们都会给出相同的 UTC 时间吗？

是的，实验结果底部的第二行表明了这一点。***

# c++ - 增强蝇量级恐慌

> ID：11845805
> 
> 赞同：2
> 
> 时间：2012-08-07T12:18:46.027
> 
> 标签：c++, boost-flyweight

我正在使用 Boost 1.39。我已经使用`boost::flyweight<no_locking, hashed_factory<> >`（我的应用程序是单线程的）实现了我的类。我班级的测试程序顺利通过，但是当我在应用程序中使用时，我很恐慌

```
#9  0x08de7c3e in boost::flyweights::detail::refcounted_value<boost::flyweights::detail::default_value_policy<SharedFileAttr>::rep_type, SharedFileAttr>::release (this=0x0) at /usr/include/boost/flyweight/refcounted.hpp:89
#10 0x08de7517 in boost::flyweights::detail::refcounted_handle<boost::flyweights::detail::refcounted_value<boost::flyweights::detail::default_value_policy<SharedFileAttr>::rep_type, SharedFileAttr> const*, boost::flyweights::detail::flyweight_core_tracking_helper<boost::flyweights::detail::default_value_policy<SharedFileAttr>, mpl_::na, boost::flyweights::refcounted, boost::flyweights::hashed_factory<mpl_::na, mpl_::na, mpl_::na, 0>, boost::flyweights::no_locking, boost::flyweights::static_holder> >::~refcounted_handle (this=0xf32fe61c, 
    __in_chrg=<value optimized out>) at /usr/include/boost/flyweight/refcounted.hpp:131
#11 0x08e2edfe in boost::flyweights::flyweight<SharedFileAttr, boost::flyweights::no_locking, boost::flyweights::hashed_factory<mpl_::na, mpl_::na, mpl_::na, 0>, boost::parameter::void_, boost::parameter::void_, boost::parameter::void_>::operator= (this=0xf32fe7e4, x=...)
    at /usr/include/boost/flyweight/flyweight.hpp:196 
```

请注意，在第 9 帧中，这是 0x0

我不确定我的代码如何使用 boost::flyweight 导致引用计数问题。毕竟，我的接口只包含添加享元对象和销毁它们的方法。

我不知道如何解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:33:53.057

好吧，很尴尬，但问题是试图将一个未初始化的享元对象分配给另一个对象。一定要记得初始化所有类成员...

# assembly - 在装配中挣扎于二维数组

> ID：11845808
> 
> 赞同：-4
> 
> 时间：2012-08-07T12:18:55.347
> 
> 标签：assembly, mips, spim, pcspim

我正在尝试在 MIPS 中实现以下内容

X 是双精度浮点数的二维数组（矩阵），Y 是 32 位整数的二维数组。尝试为以下内容编写代码

```
Z= (X[i][j] + Y[i][j]) 
```

现在我不知道如何在 MIPS 中声明这些数组：

到目前为止，我已经编写了一些主程序，但不知道如何在该`.data`部分中实现它们

```
.data

.text
.main:
mtc1 $0, $f0
 cvt.d.w $f0, $f0
  # $a1 is the address of the first element of x
  l.a $r1, $a1
  # $a2 is the address of the first element of y
  l.a $r2, $a2
  addi $r4, $0, 30
  add.d $f8, $f0, $f0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:32:13.017

二维数组还不错。诀窍是一次处理一个维度。如果你有每个元素的大小和每个维度的大小，那么数学很简单。将行索引（从零开始）、行大小和元素大小（以字节为单位）的乘积添加到您的基地址。这将是您想要的行的基地址。将列索引和元素大小的乘积添加到其中，您就有了元素的地址。

至于数据段，只保留数组的总大小。例如，如果您需要 3x4 的空间，请保留 12 个元素。如果您使用整数， array: .word 0:12 将满足您的需求。

# user-controls - 在 MFC CPropertySheet 中添加 ActiveX 控件的问题（Windows 7 64 位和 Windows 2008 Server）

> ID：11845809
> 
> 赞同：1
> 
> 时间：2012-08-07T12:18:55.113
> 
> 标签：user-controls, vb6, activex, cpropertysheet

我有一个带有 CPropertPage 和 CPropertySheet 的 MFC 应用程序。PropertyPages 在运行时被添加到 CPropertySheet 中。

我在设计时将 VB ActiveX 用户控件（在 VB 6.0 中创建）添加到 PropertyPage 中。此应用程序在 Windows XP 中运行良好，并且用户控件已正确加载。

此应用程序在 Windows 7 64 位和 Windows 2008 服务器中加载用户控件时存在问题。

如果我删除 UserControls 并在 PropertyPage 中添加 MFC 控件，则 MFC 控件会正确加载。

笔记：

我尝试在 MFC ActiveX 容器控件中添加 VB 用户控件。在这种情况下，用户控件正在正确加载。

在 Windows 7 或 Windows 2008 服务器中使用带有 PropertySheet/PropertyPage 的 UserControl 是否有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:00:25.657

尝试使用“Apartment Threaded”线程模型创建 VB 控件。

您可以在 Project --> Properties --> General Tab --> Threading model --> "Apartment Threaded" 中选择 Threading model。

# iphone - 是否可以在 iPhone 中访问联系人信息屏幕？

> ID：11845821
> 
> 赞同：0
> 
> 时间：2012-08-07T12:19:22.877
> 
> 标签：iphone, ios, email, contact

我目前在 iPhone 应用程序中工作，使用 ABPeoplePickerNavigationController 在我的应用程序中创建联系人屏幕，然后我选择电子邮件字段并进入上一个屏幕，但我希望应用程序不允许用户选择电子邮件 ID，如何制作这个动作？下面我提到了截图供您参考，请帮助我。

提前致谢

![在此处输入图像描述](../Images/763cd3acfefcc5d2fa643a3bc0975647.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T13:20:45.627

实现以下委托方法并使用属性检查条件，如下所示。

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier{

    if(property == kABPersonPhoneProperty)
    {
        [self dismissModalViewControllerAnimated:YES]; //This should be here only if phone property is there.
    }

    return NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:17:50.513

将您的视图控制器指定为适当的[AddressBookUI.framework](http://developer.apple.com/library/ios/#DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html#//apple_ref/doc/uid/TP40007744)类型（例如`ABPersonViewControllerDelegate`or `ABPeoplePickerNavigationControllerDelegate`）的委托，然后编写一个方法来响应适当的协议事件（例如`shouldPerformDefaultActionForPerson`or `shouldContinueAfterSelectingPerson`）。查看[通讯簿 UI 框架参考中的协议参考](http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBookUI/Reference/AddressBookUI_Framework/_index.html#//apple_ref/doc/uid/TP40007082)。

# regex - 在 CMake 中将字符串的一部分转换为大写

> ID：11845823
> 
> 赞同：13
> 
> 时间：2012-08-07T12:19:27.890
> 
> 标签：regex, cmake, capitalization

有没有一种方便的方法来转换一个全小写的字符串，以便第一个字符是大写的？

我目前有一个可行的解决方案：

```
#PROTO_NAME is the lower-case string
string(SUBSTRING ${PROTO_NAME} 0 1 FIRST_LETTER)
string(TOUPPER ${FIRST_LETTER} FIRST_LETTER)
string(REGEX REPLACE "^.(.*)" "${FIRST_LETTER}\\1" PROTO_NAME_CAP "${PROTO_NAME}") 
```

结果在`PROTO_NAME_CAP`变量中。有没有更简单或更方便的方法来实现这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-03T15:31:57.177

CMake 中没有内置的解决方案。如果您想让事情更具可读性，您只能将代码隐藏在函数后面。

# asp.net - 未显示事件处理程序结果

> ID：11845827
> 
> 赞同：0
> 
> 时间：2012-08-07T12:19:34.097
> 
> 标签：asp.net, c#-4.0, user-controls

我正在动态加载用户控件。我添加了一个事件处理程序，它在调试时触发并返回正确的结果。但是，我正在从获得的结果中填充网格。尽管我得到了结果并且 gridview 被填充（如调试所示）。但是不显示填充的网格视图，而是显示网格视图。我不知道错误在哪里。

```
 protected void Page_Load(object sender, EventArgs e)
        {
            lblMessage.Visible = false;
            UCAdvancedFilter.sendMessageToThePage += new AdvancedFilter.SendMessageToThePageHandler(OnsendMessageToThePage);
    } 
```

背后的代码

```
 protected void OnsendMessageToThePage(string id)
    {
        GroupMasterClass gm = new GroupMasterClass();
        gm.igroup_id = Convert.ToInt32(id);

         ResultClass objres = gm.fn_GetAdvancedSearchById();
         if (objres.bStatus)
         {
             eslist<GroupMasterClass> OBJLIST = objres.objData as eslist<GroupMasterClass>;
             if (OBJLIST.Count > 0)
             {
              grid.DataSource=OBJLIST;
              grid.DataBind();
             }
          }
      } 
```

用户控制

```
public delegate void SendMessageToThePageHandler(string messageToThePage);
public event SendMessageToThePageHandler sendMessageToThePage;

#region Events

    protected void btnCloseMsg_Click(object sender, EventArgs e)
    {
        Panel1_ModalPopupExtender.Hide();
    }

    protected void btnSearch_Click(object sender,EventArgs e)
    {
if (sendMessageToThePage != null)
        {
            sendMessageToThePage(hdnResult.Value);
        }
} 
```

在进一步调试和检查中，我发现再次单击按钮时会显示结果。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:38:51.893

这是更新面板的问题。我设置了 UpdateMode=Always，它开始工作了。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-02-11T19:15:32.623

//在父表单或主表单中添加此代码 protected override void OnInit(EventArgs e) {

```
 LinkButton button = (LinkButton)UserControl.FindControl("btnSearch");
        //wire up event handler
        button.Click += new EventHandler(btnSearch_Click);
        UserControl.sendMessageToThePage += delegate (string message) { ButtonClick = message; };       
        base.OnInit(e);
    } 
```

# c# - 缺少对 System.Diagnostics.Process 的引用

> ID：11845828
> 
> 赞同：2
> 
> 时间：2012-08-07T12:19:40.357
> 
> 标签：c#, .net, windows, .net-4.5

我有一个正在构建的应用程序来关闭计算机

我尝试使用 System.Management；但它告诉我添加一个引用，我尝试使用此代码的添加引用列表中没有这样的东西，但进程有一个红色波浪

```
System.Diagnostics.Process.Start("Shutdown", "-s -t 10"); 
```

关于如何关闭的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:03:51.360

对于像这样的神秘问题有一个简单的解释：您正在使用可移植类库或选择了“.NET for Metro 风格应用程序”平台目标。由于不允许使用 Process 类，Metro 应用程序在禁用许多标准 .NET 功能的沙箱中运行。*不允许*启动另一个进程或关闭操作系统，只有用户可以这样做。

如果这对您很重要，您将不得不放弃 Metro，您的应用程序需要作为桌面应用程序运行。并且不会在启动 Win8 的平板上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T17:46:28.683

我结束了

1.  升级到最新的 Visual Studio 2015 SP3，
2.  使用 powershell 运行 Scott Smith 的升级命令，

    ```
    powershell dnvm upgrade -r coreclr 
    ```

    [https://stackoverflow.com/a/34013990/80772](https://stackoverflow.com/a/34013990/80772)

3.  从 Visual Studio 重新创建控制台项目。

在添加了解析标准类所需的更多包后，我观察到了这个 global.json，

```
{
  "projects": [ "src", "test" ],
  "sdk": {
    "version": "1.0.0-preview2-003131"
  }
} 
```

而这个project.json，

```
{
  "version": "1.0.0-*",
  "buildOptions": {
    "emitEntryPoint": true
  },

  "dependencies": {
    "Microsoft.NETCore.App": {
      "type": "platform",
      "version": "1.0.1"
    },
    "system.diagnostics.textwritertracelistener": "4.0.0-beta-23123",
    "System.Diagnostics.TraceSource": "4.0.0",
    "System.IO": "4.1.0"
  },

  "frameworks": {
    "netcoreapp1.0": {
      "imports": "dnxcore50"
    }
  }
} 
```

# tfs - TFS 中的错误 TF26212

> ID：11845834
> 
> 赞同：0
> 
> 时间：2012-08-07T12:20:01.413
> 
> 标签：tfs, tfs-workitem

我在工作项 TASK 中添加了一个字段“Microsoft.VSTS.Scheduling.StartDate”。我选择类型为“日期时间控制”和规则为“必需”现在我导出了工作并为所有导入相同项目。

现在我无法关闭任何任务。并显示错误 tf26212 团队基础服务器无法保存您的更改，工作项类型定义可能存在问题，重试或联系您的团队基础服务器“我有管理员权限，我尝试更改规则并删除添加了字段，但仍然显示相同的信息。任何机构都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:33:07.573

我怀疑你看到这个是因为你在标记为的字段中没有值`Required`。你是如何设置这个值的？从记忆中我认为这是一个可能（默认情况下）自动设置以响应状态更改的字段，但是，如果您没有设置该值，您可能会发现最终得到一个无效的工作项。

`Required`您可以尝试删除规则，而不是删除添加的字段。

# c# - 将 7.346000E-001 或 7.3460000E+000 转换为 Double

> ID：11845836
> 
> 赞同：0
> 
> 时间：2012-08-07T12:20:04.800
> 
> 标签：c#, visual-studio-2010, double, type-conversion, exponential

我正在尝试将字符串值转换为 Double 但我收到错误消息说格式不正确。

我的字符串表示如下：`7.346000E-001`，`7.3460000E+000`

是否有另一种方法来转换它们，或者我需要将字符串截断为两部分并自己进行计算以获得真正的价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:27:39.297

尝试`CultureInfo.InvariantCulture`_`double.parse`

```
System.Threading.Thread.CurrentThread.CurrentCulture = new CultureInfo("fr-FR"); // just to simulate french culture
double d = double.Parse("7.3460000E-001",CultureInfo.InvariantCulture);
Console.Write(d); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:24:35.353

法国文化（我从您的个人资料中假设）使用逗号而不是点作为小数分隔符。

此处描述的解决方案：[C# float.tryparse for French Culture](https://stackoverflow.com/questions/2722831/c-sharp-float-tryparse-for-french-culture)

# php - 带有后退和前进选项的 PHP 测验

> ID：11845837
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:20:07.307
> 
> 标签：php

我想要一个具有以下功能的 PHP 测验脚本

1.  用户可以从多个选项（单选按钮或复选框）中选择答案以及一个小的文本区域，以便在需要时进行简要说明。
2.  用户可以来回更改任何答案
3.  时间将是整个测验而不是每个问题级别
4.  测验的一般管理工作

我已经搜索过，但没有找到满足我需要的好的解决方案。有没有人遇到过匹配的 PHP 开源脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:25:58.633

我还没有看到任何特别类似的东西，但您可以从`survey`、`voting`或`ranking`脚本中进行调整。为什么不自己写呢？似乎是一个非常简单的脚本来编写。

例如：http: [//sourceforge.net/projects/uccass/](http://sourceforge.net/projects/uccass/)

# html - videojs禁用黑色背景

> ID：11845839
> 
> 赞同：4
> 
> 时间：2012-08-07T12:20:11.490
> 
> 标签：html, video

videojs (v3.2.0) 在以 swf 模式加载视频时总是显示黑色背景。有人知道如何改变吗？

您可以将这样的 swf 参数添加到播放器：

```
var params = {};
params.bgcolor = "#ffffff";
params.wmode = "transparent"; 
```

*V* .options.flash.params = 参数；

使用 wmode = "transparent" 您可以在左上角看到一个黑框。在 IE7/8 上，该框在播放视频时不会消失，而是在视频周围显示为一条黑线（如黑色边框顶部）。

非常感谢，弗洛里安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T12:35:44.277

啊我刚刚发现这个： [http ://help.videojs.com/discussions/problems/1220-black-square-in-flash-file](http://help.videojs.com/discussions/problems/1220-black-square-in-flash-file)

建议使用 flash builder 自己编译 swf。你可以在这里下载项目：[https ://github.com/zencoder/video-js-swf](https://github.com/zencoder/video-js-swf)

然后您可以使用自定义背景颜色设置您自己的 swf，如下所示：

```
var params = {};
params.bgcolor = "#ffffff";
_V_.options.flash.swf = "videojs/VideoJS.swf";
_V_.options.flash.params = params; 
```

希望 videojs 将很快更新他们的 selfhost-download 和 CDN，其中包含适当的 swf。干杯，弗洛里安

# colors - JUNG：未选取的顶点标签颜色

> ID：11845842
> 
> 赞同：2
> 
> 时间：2012-08-07T12:20:39.430
> 
> 标签：colors, label, renderer, jung, vertex

我可以使用这样声明的 vertexLabelRenderer 将选取的顶点标签设为红色**：**

```
DefaultVertexLabelRenderer vertexLabelRenderer=new DefaultVertexLabelRenderer(Color.RED); 
```

如何更改未选取的**顶点**标签的颜色。构造函数（见下文）仅允许定义**未选取**的顶点标签。方法 setForeground() 也不会影响字体颜色。

这是 JUNG 2.0.1 API 文档：http: [//jung.sourceforge.net/site/apidocs/edu/uci/ics/jung/visualization/renderers/DefaultVertexLabelRenderer.html](http://jung.sourceforge.net/site/apidocs/edu/uci/ics/jung/visualization/renderers/DefaultVertexLabelRenderer.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:51:52.980

对于任何仍在摸不着头脑的人，这里有两个简单的类可以更改未选取的顶点/边缘标签颜色。

```
public class MyDefaultVertexLaberRenderer extends DefaultVertexLabelRenderer
{
    protected Color unpickedVertexLabelColor = Color.BLACK;

    public MyDefaultVertexLaberRenderer(Color unpickedVertexLabelColor, Color pickedVertexLabelColor)
    {
        super(pickedVertexLabelColor);
        this.unpickedVertexLabelColor = unpickedVertexLabelColor;
    }

    public <V> Component getVertexLabelRendererComponent(JComponent vv, Object value, Font font, boolean isSelected, V vertex)
    {
        super.setForeground(unpickedVertexLabelColor);
        if (isSelected) setForeground(pickedVertexLabelColor);
        super.setBackground(vv.getBackground());
        if (font != null)
        {
            setFont(font);
        }
        else
        {
            setFont(vv.getFont());
        }
        setIcon(null);
        setBorder(noFocusBorder);
        setValue(value);
        return this;
    }
}

public class MyDefaultEdgeLaberRenderer extends DefaultEdgeLabelRenderer
{
    protected Color unpickedEdgeLabelColor = Color.BLACK;

    public MyDefaultEdgeLaberRenderer(Color unpickedEdgeLabelColor, Color pickedEdgeLabelColor)
    {
        super(pickedEdgeLabelColor);
        this.unpickedEdgeLabelColor = unpickedEdgeLabelColor;
    }

    public <E> Component getEdgeLabelRendererComponent(JComponent vv, Object value, Font font, boolean isSelected, E edge)
    {
        super.setForeground(unpickedEdgeLabelColor);
        if (isSelected) setForeground(pickedEdgeLabelColor);
        super.setBackground(vv.getBackground());

        if (font != null)
        {
            setFont(font);
        }
        else
        {
            setFont(vv.getFont());
        }
        setIcon(null);
        setBorder(noFocusBorder);
        setValue(value);
        return this;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-16T16:55:40.110

这是另一种设置未拾取顶点标签颜色（红色）的方法：

```
vv.setForegroundColor(Color.red); 
```

顶点（和边缘）标签使用 JLabel，它们从可视化查看器中获取前景色。

# reference - 在 Apache Felix 中为 @Reference 注释声明目标参数

> ID：11845845
> 
> 赞同：1
> 
> 时间：2012-08-07T12:21:06.777
> 
> 标签：reference, annotations, apache-felix

它定义了 felix SCR 注释的文档。 [http://felix.apache.org/site/scr-annotations.html#SCRAnnotations-Reference](http://felix.apache.org/site/scr-annotations.html#SCRAnnotations-Reference)

我想使用 @Reference Annotation 并且还想将目标服务设置为配置参数。

文档说：一个服务目标过滤器，用于选择要提供的特定服务。为了能够通过配置属性覆盖此值的值，必须声明此参数。如果不声明参数，则不会生成相应的声明属性

如何声明这个参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:16:15.993

有点晚了，但我在任何地方都找不到一个简单的例子，所以无论如何这可能对其他人有帮助。

例如，使用 Felix 注释过滤 DataSource：

```
@Reference(cardinality = OPTIONAL_UNARY, policy = DYNAMIC, name = "dataSource")
private DataSource dataSource; 
```

生成此 XML：

```
<reference name="dataSource" interface="javax.sql.DataSource" cardinality="0..1" policy="dynamic" bind="bindDataSource" unbind="unbindDataSource"/> 
```

[根据OSGi 4.2 Compendium Spec](http://www.osgi.org/download/r4v42/r4.cmpn.pdf)的第 112.6 节，该属性需要附加**.target**

因此，在我的配置中，我将 LDAP 过滤器设置为：

```
dataSource.target = (some.key=some.value) 
```

注意：我没有使用 un/bind 方法，而是让 DS 为我生成这些方法。

# magento - magento 媒体管理器完整网址

> ID：11845849
> 
> 赞同：1
> 
> 时间：2012-08-07T12:21:17.870
> 
> 标签：magento

我在我的 magento 扩展上使用了内置的 Magento Filebrowser。我有这个问题。如果我打开一个 magento 文件浏览器，然后选择文件，然后单击按钮“插入文件”然后 Filebrowser 给我一个 url，看起来像这样/magento/index.php/admin/cms_wysiwyg/directive/_directive/e3ttZWRpYSB1cmw9Ind5c2l3eWcvc2VhcmNoLnBuZyJ9fQ,,/key/dc3e70661f817703710378d51351495b/

我如何将此网址转换为正常的完整图片网址，例如[http://www.infira.ee/magento/dir/dir/dir/someImage.png](http://www.infira.ee/magento/dir/dir/dir/someImage.png)。我需要它，因为这个完整的 url 转到 css 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:43:24.193

登录到管理员。

转到系统 > 配置 > 内容管理（在常规下） > 所见即所得选项

'在所见即所得的目录中为媒体内容使用静态 URL' - 选择“是”

# visual-studio - 如何在 VS 2012 中找到当前的解决方案路径？

> ID：11845851
> 
> 赞同：1
> 
> 时间：2012-08-07T12:21:36.173
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-addins, vsx

我正在为 VS 2012 开发插件。

问题是，我需要找出当前的解决方案路径才能将文件放入当前的解决方案中。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:42:06.930

几个选项：

*   使用[`EnvDTE.Solution`](http://msdn.microsoft.com/en-us/library/envdte.solution), 得到`FullName`解决方案

*   使用[`IVsSolution`](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.shell.interop.ivssolution), 调用[`GetProperty`](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.shell.interop.ivssolution.getproperty)来获取[`VSPROPID_SolutionFileName`](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.shell.interop.__vspropid)（或者`VSPROPID_SolutionDirectory`如果你想要目录）

*   获取解决方案的 MSBuild 项目并获取`$(SolutionDir)`属性。

# c# - ASP.NET MVC 3 根据一年中的时间/可访问的日期范围限制对视图的访问

> ID：11845852
> 
> 赞同：2
> 
> 时间：2012-08-07T12:21:39.973
> 
> 标签：c#, asp.net-mvc

我正在使用带有 Razor 视图的 ASP.NET MVC 3。我在一个控制器中有两个操作方法（Get 和 Post），它们有一个对应的视图（.cshtml 文件）。在我的应用程序中，我希望仅在一年中的特定时间允许访问该视图，我们将其称为“可访问日期范围”。在所有时间不在可访问的日期范围内，我希望应用程序向用户提供错误消息而不是显示页面。什么是解决这个问题的好方法？可以在控制器方法上使用自定义属性吗？逻辑是否应该直接进入两个控制器方法？我应该只`if`在视图文件中使用一条语句以及适当的逻辑吗？我并不热衷于将此逻辑放在视图文件中，并且希望获得更清洁选项的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:25:51.897

您可以创建一个自定义属性，但我更喜欢自己将逻辑放入控制器中。如果我知道它是我将在应用程序中一遍又一遍地重用的东西，我只会倾向于使用自定义属性。

然后这是一个简单的案例，检查日期是否在特定日期内，然后根据结果触发不同的视图。

它永远不应该出现在视图中，因为我认为您已经从您的问题中知道了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:27:18.550

最简单的方法是将逻辑放入 action 方法中。当然不要在视图中这样做，因为那不是视图的责任。您可以为此创建一个属性，如果您打算重用它，我肯定会走这条路，否则我会保持简单，只需将逻辑放在操作方法中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T12:29:29.720

最简单的答案是将逻辑放入控制器中：

```
public ActionResult SummerOnly()
{
   if (!(DateTime.Now > new DateTime(2012,8,8)))
       return View("Error");    

   return View("GoodView");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-23T15:53:29.220

对于一次性用例，属性是多余的，但如果您确实需要重用逻辑，那么属性将是理想的。像这样的东西：

```
public class RestrictDate : ActionFilterAttribute
{
    private int _monthFrom ;
    private int _monthTo;

    private int _dayFrom = 1;
    private int _dayTo = 0;

    public RestrictDate(int monthFrom, int monthTo)
    {            
        _monthFrom = monthFrom;
        _monthTo = monthTo;

    }

    public RestrictDate(int monthFrom, int dayFrom, int monthTo, int dayTo)
        : this(monthFrom, monthTo)
    {
        _dayFrom = dayFrom;
        _dayTo = dayTo;
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {

        DateTime minDate = new DateTime(DateTime.Today.Year, _monthFrom, _dayFrom);

        int interval = _monthFrom <= _monthTo ? _monthTo - _monthFrom : 12 - _monthFrom  + _monthTo;

        DateTime maxDate;
        if (_dayTo == 0)
        {
            maxDate = minDate.AddMonths(interval + 1).AddDays(-1);
        }
        else
        {
            maxDate = new DateTime(DateTime.Today.Year, _monthFrom, 1).AddMonths(interval).AddDays(_dayTo - 1);
        }

        if (DateTime.Today < minDate || DateTime.Today > maxDate)
        {
            filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary(new
            {
                controller = "Home",
                action = "Error"
            }));
        }

        base.OnActionExecuting(filterContext);
    }
} 
```

显然，这不是生产就绪代码 - 没有验证输入等，但我想你明白了。

# asp.net-mvc - 基于 Active Directory 角色的权限

> ID：11845853
> 
> 赞同：3
> 
> 时间：2012-08-07T12:21:46.767
> 
> 标签：asp.net-mvc, web-config, roleprovider

我有一个 MVC 应用程序，它使用表单身份验证对 Active Directory 进行身份验证。随着我的 MVC 应用程序变大，很明显我正在做的角色检查变得越来越分散。我想替换以下内容：

`[Authorize(Roles = "Staff")]`和`Thread.CurrentPrincipal.IsInRole("Staff")`

类似于以下内容：

`[AuthorizePermission(Permission.CanDoSomething)]`和`Thead.CurrentPrincipal.HasPermission(Permission.CanDoSomething)`

其中 Permission 是一个枚举。现在我在想我可以定义每个 AD 角色在 web.config 中拥有的权限，如下所示：

```
 <role name="Staff">
    <permissions>
      <add name="CreateEditDeleteSomething" />
      <add name="PublishSomething" />
      <add name="QueryUsers" />
    </permissions>
  </role> 
```

然后我可以实现一个 IPrincipal 扩展方法 - `HasPermission(Permission permission)`。这将查看用户是否登录到具有 web.config 中定义的传入权限的任何 AD 组。这将允许我更改特定 AD 组的权限，而无需更改代码或更新现有测试。然后自定义授权属性可以调用 HasPermission 方法。

这种方法是正确的还是有更好的方法来简化我在应用程序中的角色？我在这里和网络上看到了很多例子，但它们似乎过于复杂。我可以通过在 HasPermission 中针对我的 web.config 角色设置检查传入的权限来实现这一点吗？IPrincipal 将具有其 AD 角色，因此确定允许的权限是否很简单？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T00:44:30.067

权限比角色复杂得多。

通常可以有诸如 CreateEditDelete 之类的权限组……但它们也可以是细粒度的子集，例如“创建”、“编辑”、“删除”

我解决这个问题的方法是创建一个 PermissionsManger 类，该类可以确定用户应该拥有哪些权限给业务规则上下文和他们的 AD 角色。

我使用按位标志来帮助简化细粒度权限的复杂性。

如何将角色映射到权限完全取决于您。

```
using System;
using System.Linq;
using System.Security.Principal;

// Install-Package FluentAssertions -Pre
using FluentAssertions;

public static class ExtensionsForIPrincipal
{
    public static bool HasPermission(this IPrincipal principal, Permissions permission)
    {
        return PermissionsManager.GetUserPermissions(principal).HasFlag(permission);
    }

    public static bool IsInRole(this IPrincipal principal, params string[] roleNames)
    {
        return roleNames.Any(principal.IsInRole);
    }
}

public static class PermissionsManager
{
    public static Permissions GetUserPermissions(IPrincipal user)
    {
        if ( user.IsInRole("admin") )
        {
            return Permissions.All;
        }

        var userPermissions = Permissions.None;

        if ( user.IsInRole("staff", "user") )
        {
            userPermissions |= Permissions.QueryUsers;
        }

        if ( user.IsInRole("staff") )
        {
            userPermissions |= Permissions.PermissionsCreateEditDeleteSomething | Permissions.QueryUsers;
        }

        if ( user.IsInRole("editor") )
        {
            userPermissions |= Permissions.PublishSomething;
        }

        return userPermissions;
    }
}

[Flags]
public enum Permissions
{
    None = 0,
    CreateSomething = 1,
    EditSomething = 2,
    DeleteSomething = 4,
    PublishSomething = 8,
    QueryUsers = 16,
    PermissionsCreateEditDeleteSomething = CreateSomething | EditSomething | DeleteSomething,
    All = PermissionsCreateEditDeleteSomething | PublishSomething | QueryUsers
}

internal class Program
{
    private static void Main(string[] args)
    {
        IPrincipal admin = Create("james", "admin");

        PermissionsManager.GetUserPermissions(admin).ShouldBeEquivalentTo(Permissions.All);

        admin.HasPermission(Permissions.None).Should().BeTrue();
        admin.HasPermission(Permissions.EditSomething).Should().BeTrue();
        admin.HasPermission(Permissions.PermissionsCreateEditDeleteSomething).Should().BeTrue();
        admin.HasPermission(Permissions.PublishSomething).Should().BeTrue();
        admin.HasPermission(Permissions.QueryUsers).Should().BeTrue();
        admin.HasPermission(Permissions.All).Should().BeTrue();

        IPrincipal editor = Create("susan", "editor", "staff");

        editor.HasPermission(Permissions.None).Should().BeTrue();
        editor.HasPermission(Permissions.EditSomething).Should().BeTrue();
        editor.HasPermission(Permissions.PermissionsCreateEditDeleteSomething).Should().BeTrue();
        editor.HasPermission(Permissions.QueryUsers).Should().BeTrue();
        editor.HasPermission(Permissions.PublishSomething).Should().BeTrue();
        editor.HasPermission(Permissions.All).Should().BeTrue();

        IPrincipal staff = Create("michael", "staff");

        staff.HasPermission(Permissions.None).Should().BeTrue();
        staff.HasPermission(Permissions.EditSomething | Permissions.DeleteSomething).Should().BeTrue();
        staff.HasPermission(Permissions.PermissionsCreateEditDeleteSomething).Should().BeTrue();
        staff.HasPermission(Permissions.QueryUsers).Should().BeTrue();
        staff.HasPermission(Permissions.PublishSomething).Should().BeFalse();
        staff.HasPermission(Permissions.All).Should().BeFalse();

        IPrincipal user = Create("bob", "user");

        user.HasPermission(Permissions.None).Should().BeTrue();
        user.HasPermission(Permissions.EditSomething).Should().BeFalse();
        user.HasPermission(Permissions.PermissionsCreateEditDeleteSomething).Should().BeFalse();
        user.HasPermission(Permissions.QueryUsers).Should().BeTrue();
        user.HasPermission(Permissions.PublishSomething).Should().BeFalse();
        user.HasPermission(Permissions.All).Should().BeFalse();

        IPrincipal anon = Create("anonymous");

        anon.HasPermission(Permissions.None).Should().BeTrue();
        anon.HasPermission(Permissions.EditSomething).Should().BeFalse();
        anon.HasPermission(Permissions.PermissionsCreateEditDeleteSomething).Should().BeFalse();
        anon.HasPermission(Permissions.QueryUsers).Should().BeFalse();
        anon.HasPermission(Permissions.PublishSomething).Should().BeFalse();
        anon.HasPermission(Permissions.All).Should().BeFalse();

        Console.WriteLine("All tests passed");
        Console.ReadLine();
    }

    private static IPrincipal Create(string name, params string[] roles)
    {
        return new GenericPrincipal(new GenericIdentity(name), roles);
    }
} 
```

# c# - 从网络请求中获取 C# 中的 JSON 对象

> ID：11845857
> 
> 赞同：3
> 
> 时间：2012-08-07T12:21:51.570
> 
> 标签：c#, asp.net, json, httpwebrequest

我需要从外部域获取 json 数据。我使用 webrequest 从网站获取响应。继承人的代码：

```
var search = umbraco.library.Request("search");
string Url = "http://ff.ss.dk/Suggest.ff?username=us&password=pass&channel=dk&format=JSON&query="+search;
WebRequest webRequest = WebRequest.Create(Url);
WebResponse response = webRequest.GetResponse();
Stream responseStream = response.GetResponseStream();
StreamReader reader = new StreamReader(responseStream); 
```

这样我得到这样的输出

> [{"hitCount":0,"imageURL":"","query":"Atrix h\u00E5ndcreme Dobbeltvirkende /100 Ml","type":"productName"},{"hitCount":0,"imageURL": "","query":"V\u00E6gur 磁吸","type":"productName"},{"hitCount":0,"imageURL":"","query":"Bic kuglepen Atlantis , bl\u00E5 ","type":"productName"},{"hitCount":0,"imageURL":"","query":"Laminering AT1256 31cm x30m A3","type":"productName"}]

我想以 JSON 对象格式获取此输出数据，我可以在我的 java 脚本函数中使用它。我认为输出数据的格式不合适，因为我使用了流式读取器功能来获取数据。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T05:56:53.340

可以使用 jQuery.parseJSON 将此数据转换为 json 格式。

```
 var obj = JSON.parse(data); 
```

然后我们可以访问数据

```
 obj[0].id 
```

谢谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:36:46.880

您似乎缺少数组名称说明符，例如，这有效：

```
{arrayName:[{"hitCount":0,"imageURL":"","query":"Atrix h\u00E5ndcreme Dobbeltvirkende /100 Ml","type":"productName"},{"hitCount":0,"imageURL":"","query":"V\u00E6gur magnetisk attraction","type":"productName"},{"hitCount":0,"imageURL":"","query":"Bic kuglepen Atlantis , bl\u00E5","type":"productName"},{"hitCount":0,"imageURL":"","query":"Laminering AT1256 31cm x30m A3","type":"productName"}]} 
```

# haskell - 我如何在状态单子中使用 Debug.Trace.trace？

> ID：11845863
> 
> 赞同：9
> 
> 时间：2012-08-07T12:22:08.137
> 
> 标签：haskell

我想跟踪状态单子的变化。这不起作用：

```
main :: IO ()
main = do
    print $ snd $ execState compute initialState

traceThis :: (Show a) => a -> a
traceThis x = trace ("test: " ++ show x) x

compute :: State ([Row], Integer) String
compute = liftM traceThis $ get >>= \(rs, result) -> put (rs, result + 3) >> return "foo" 
```

没有打印任何内容（除了已正确更新的主函数中打印的最终结果）。

跟踪状态的任何想法或替代方法？我想用它来检查项目欧拉解决方案的正确性。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T12:49:22.783

您的问题`traceThis`是永远不会被评估。Haskell 是一种惰性语言，因此它只计算需要的表达式。而且由于您不评估计算结果，只评估状态，因此没有必要评估`traceThis`inside `compute`。例如，如果您打印

```
print $ evalState compute initialState 
```

然后有状态计算的结果值与调用一起被评估`traceThis`。

更好的选择是定义一个 monadic 函数，该函数在评估 monadic 计算的任何部分时强制打印结果值：

```
traceState :: (Show a) => a -> State s a
traceState x = state (\s -> trace ("test: " ++ show x) (x, s))

compute :: State ([Int], Integer) String
compute = get >>= \(rs, result) -> put (rs, result + 3)
              >> return "foo"
              >>= traceState 
```

**更新：**这可以推广到任意单子。要点是`trace`必须包装一元计算，而不仅仅是内部的值，以便在评估时`>>=`对其进行评估，无论内部的值是否被评估：

```
traceMonad :: (Show a, Monad m) => a -> m a
traceMonad x = trace ("test: " ++ show x) (return x) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T12:40:45.057

这是一个替代方案。`StateT s IO`用作你的单子：

```
compute :: StateT ([Row], Integer) IO String
compute = do
    (rs, result) <- get
    lift $ putStrLn "result = " ++ show result
    put (rs, result + 3)
    return "foo" 
```

现在，您可以`IO`在任何地方使用`lift`.

要了解有关 monad 转换器的更多信息，我建议您阅读出色的介绍：[Monad Transformers - Step by Step](http://www.grabmueller.de/martin/www/pub/Transformers.en.html)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-07T12:44:57.480

当您调用 时`execState`，您只是询问最终状态，而不是`compute`函数返回的值。`liftM`，另一方面，将您的`traceThis`功能提升到`State`不触及状态的单子中的动作。因此，由于懒惰，只有在强制*计算*返回`traceThis`的值时才会调用。一般来说，为了正常工作，您必须确保您调用它的值得到评估。*`compute``trace`*

 *`Debug.Trace`通常只适用于快速调试——它不是一个非常强大的日志系统，并且由于懒惰而难以使用。如果您正在寻找一种更稳健的方法，您可以将另一个元素（可能是字符串列表）添加到您的状态元组，并让`compute`函数向其中写入日志消息。*

# objective-c - 无效的转换说明符 - SQLite - xCode Objective C

> ID：11845866
> 
> 赞同：0
> 
> 时间：2012-08-07T12:22:17.353
> 
> 标签：objective-c, database, xcode, sqlite, compiler-construction

下载新版本的 xCode 后，我刚刚更新了我的编译器。我在这段 SQLite 代码中收到以下错误：

```
if (pack !=YES) {

        query = [[NSString alloc] initWithFormat: @"SELECT Name, Description, Postcode, AddressLine1, ImageURL, Free, Area, OpeningTimes, NearestTube, Cost,UniqueID, URL, Number, FirstLetter, FirstLetterArea FROM MainDetails WHERE Free='Y' AND FirstLetterArea = '%@%' ORDER BY Area",tmpLike];

    } 
```

错误是“无效的转换说明符'O'”。该错误在 ORDER BY 语句中的字母“O”下划线。

这对我来说毫无意义 - 这是编译器中的故障还是有正当理由？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:29:53.243

删除 中的第二个百分号字符`'%@%'`。

# java - spring @Value 注解，继承和公共字段但不同的值

> ID：11845871
> 
> 赞同：3
> 
> 时间：2012-08-07T12:22:24.777
> 
> 标签：java, spring, annotations

我有三个班级，一个是超班级。

```
class abstract Base {
   public abstract String getV();
}

class A extends Base {
   private String v;
   @Value("${A.v}") public String getV() { return v; };
}

class B extends Base {
   private String v;
   @Value("${B.v}") public String getV() { return v; };
} 
```

有什么办法可以简化spring@Value注解的使用？我不想复制粘贴字段声明和所有 Base 孩子的 getter。到目前为止，我得到的是：

```
class abstract Base {
   protected String v;
   public String getV() { return v; };
   public abstract void setV(String v);
}

class A extends Base {
   @Value("${A.v}") public void setV(String v) { this.v = v;};
}

class B extends Base {
   @Value("${B.v}") public void setV(String v) { this.v = v;};
} 
```

有没有更有效的方法？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T13:33:08.753

我对此表示怀疑。注释不能是动态的。无法在抽象 setV 方法上添加任何类型的注释以适应子类。您所做的确实是正确的方法。

但是我会稍微修改你的代码：

```
class Base {
   private String v;
   public String getV() { return v; };
   public void setV(String v) { this.v = v; }
}

class A extends Base {
   @Value("${A.v}") public String setV(String v) { super.setV(v); }
}

class B extends Base {
   @Value("${B.v}") public String setV(String v) { super.setV(v); }
} 
```

我不仅在@Value 注释上遇到过这个问题，在@Resource/@Qualifier 注释上也遇到过这个问题。

这是我不是自动装配的忠实粉丝的一个重要原因。除了用不同的限定符/值自动装配事物之外，我发现自己无缘无故地制作了一堆子类。

另一种选择可能是基于 java 的配置。我知道这与在 XML 中做这件事并没有太大的不同，但我发现它比 xml 更干净，而且肯定比覆盖所有的 setter 更好。

```
@Configuration
public class MyConfig {
    @Value("${A.v}")
    private String av;

    @Value("${B.v}")
    private String bv;

    @Bean
    public A a() {
       A a = new A();
       a.setV(av);
    }

    @Bean
    public B b() {
       B b = new B();
       b.setV(bv);
    }
} 
```

然后在您的 XML 中：

```
<context:annotation-config />
<bean class="MyConfig" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:01:10.463

另一种方法：

```
class abstract Base {
    private String v;
    protected void configure(String v) {
        this.v = v;
    }
}

class A extends Base {
    @Value("${A.v}") private String v;

    @SuppressWarnings("unused")
    @PostConstruct
    private void configure() {
        super.configure(v);
    }
}

class B extends Base {
    @Value("${B.v}") private String v;

    @SuppressWarnings("unused")        
    @PostConstruct
    private void configure() {
        super.configure(v);
    }
} 
```

这样，如果您需要在超类中设置很多值，您只需为每个值设置一个实例变量，并且可以在 configure 方法中将它们全部设置。当然，您不必强制实施配置！

# c++ - 设置 Qt Widget 掩码

> ID：11845872
> 
> 赞同：1
> 
> 时间：2012-08-07T12:22:30.137
> 
> 标签：c++, qt, qt4

我想在我的 QT 应用程序中有一个图标图像形状的按钮。我正在尝试通过使用 alpha 通道从使用的图像 (.png) 中获取掩码来设置按钮掩码。

以下是感兴趣的代码行：

```
QPushButton button();
QPixmap pixmap("image_path.png");
QIcon icon(pixmap);
button.setIcon(icon);
button.setMask(pixmap.createMaskFromColor(Qt::transparent,Qt::MaskInColor)); 
```

结果是按钮消失了！

通过做一些测试，我确定掩码是正确创建的，错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T08:42:44.017

如果您使用像这样的带有 alpha 的 .png：
![透明PNG](../Images/ab26efcea1d8f8afa19a7cd7d2d984f9.png)
您可以将其形状设置为这样的蒙版：

```
QPushButton button;
button.resize(50,50);
button.show();

QPixmap mask("D:/shape.png");
button.setMask(mask.mask()); 
```

您将得到如下结果：
![结果形状按钮](../Images/766952f6221bdd7d903f33e2e223936b.png)

# javascript - 使用带有动态 div 的 jquery Show()

> ID：11845884
> 
> 赞同：0
> 
> 时间：2012-08-07T12:23:17.837
> 
> 标签：javascript, jquery, html

我创建了一个 div 模板，例如

```
var Mask="<div style='width: 60%;display:none; height: 602px;opacity: 0.3;' id='mask'>Hello i'm here</div>"; 
```

现在可以通过任何方式将`.show()`jquery 函数应用于此 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:36:22.410

使用 document.write 将 div 写入屏幕

```
document.write(Mask); 
```

您不需要使用 show() 或 on() 因为它会在写入屏幕时显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:25:03.423

不，但不要害怕。您可以将该字符串附加到正文 HTML，它将使用 .appendTo() 函数呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:28:44.777

如果您要动态添加此 div，请使用`$.on()`on
如果此 div 已添加到 HTML 中（意思是非动态），请使用简单`$("#mask").show()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T12:31:51.263

在实际将其附加到 DOM 之前，您无法显示此 div。一旦它被附加到一个元素上，它就会自动出现。

请注意，如果您打算多次附加此 div，则需要更改`id='mask'`为`class='mask'`，因为 id 必须是唯一的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T12:53:58.773

用这个

```
$("<div style='width: 60%; height: 602px;display:none; opacity: 0.3;' id='mask'>Hello i'm here</div>").appendTo("body");
$('#mask').show(); 
```

# php - 重组多维php数组

> ID：11845889
> 
> 赞同：0
> 
> 时间：2012-08-07T12:23:28.727
> 
> 标签：php, database, arrays, json, foreach

目前我正在尝试重构一个多维数组，它是数据库查询的结果。目标是最终将数组编码为 JSON，如下所示，但是我编写的 php 函数不起作用（请参见最后的代码）：

```
desiredJSONoutput = {"TypeA":[
    {"1":[
        {"TypeB":[4,5]},
        {"TypeC":[7,8,4]}]},
    {"2":[
        {"TypeB":[2,3]},
        {"TypeC":[6]}]},
    {"4":[
        {"TypeB":[33,12]},
        {"TypeC":[908]}]}]} 
```

数据库结构为：

```
fromType    fromID      toType      toID
-----------------------------------------------------
TypeA       1       TypeB       4
TypeA       1       TypeB       5
TypeA       1       TypeC       7
TypeA       1       TypeC       8
TypeA       1       TypeC       4
TypeA       2       TypeB       2
TypeA       2       TypeB       3
TypeA       2       TypeC       6
TypeA       2       TypeB       33
TypeA       2       TypeB       12
TypeA       2       TypeC       908 
```

我当前的 sql 查询的结果是这个 php 数组：

```
Array
(
    Array
    (
        ['fromType'] => 'TypeA'
        ['fromID'] => '1'
        ['toType'] => 'TypeB'
        ['toID'] => '4'  
    )
    Array
    (
        ['fromType'] => 'TypeA'
        ['fromID'] => '1'
        ['toType'] => 'TypeB'
        ['toID'] => '5'  
    )
    Array
    (
        ['fromType'] => 'TypeA'
        ['fromID'] => '1'
        ['toType'] => 'TypeC'
        ['toID'] => '7'  
    )
    Array
    (
        ['fromType'] => 'TypeA'
        ['fromID'] => '1'
        ['toType'] => 'TypeC'
        ['toID'] => '8'  
    )
    Array
    (
        ['fromType'] => 'TypeA'
        ['fromID'] => '1'
        ['toType'] => 'TypeC'
        ['toID'] => '4'  
    )
    Array
    (
        ['fromType'] => 'TypeA'
        ['fromID'] => '2'
        ['toType'] => 'TypeB'
        ['toID'] => '2'  
    )
    Array
    (
        ['fromType'] => 'TypeA'
        ['fromID'] => '2'
        ['toType'] => 'TypeB'
        ['toID'] => '3'  
    )
    Array
    (
        ['fromType'] => 'TypeA'
        ['fromID'] => '2'
        ['toType'] => 'TypeC'
        ['toID'] => '6'  
    )
    Array
    (
        ['fromType'] => 'TypeA'
        ['fromID'] => '3'
        ['toType'] => 'TypeB'
        ['toID'] => '33'  
    )
    Array
    (
        ['fromType'] => 'TypeA'
        ['fromID'] => '3'
        ['toType'] => 'TypeB'
        ['toID'] => '12'  
    )
    Array
    (
        ['fromType'] => 'TypeA'
        ['fromID'] => '3'
        ['toType'] => 'TypeC'
        ['toID'] => '908'  
    )
) 
```

我认为在编码为 JSON 之前我需要的重组数组是：

```
Array
    (
        ['TypeA'] => Array
            (
                ['1'] => Array
                    (
                        ['TypeB'] => Array
                            (
                                [0] => 4
                                [1] => 5
                            )
                        ['TypeC'] => Array
                            (
                                [0] => 7
                                [1] => 8
                                [2] => 4
                            )
                    )
                ['2'] => Array
                    (
                        ['TypeB'] => Array
                            (
                                [0] => 2
                                [1] => 3
                            )
                        ['TypeC'] => Array
                            (
                                [0] => 6
                            )
                    )
                ['3'] => Array
                    (
                        ['TypeB'] => Array
                            (
                                [0] => 33
                                [1] => 12
                            )
                        ['TypeC'] => Array
                            (
                                [0] => 908
                            )
                    )
            )  
    ) 
```

我不确定为什么下面的 PHP 代码没有将返回的 php 数组重构为我想要的结构：

```
class Utilities {
    public function linksReEncode($rowsArray) {
        $result = array();

        foreach ($rowsArray as $row) {

            $fromtype = $row['fromtype'];
            $fromID = $row['fromID'];
            $toType = $row['toType'];
            $toID = $row['toID'];

            $arr = $result[$fromType][$fromID][$toType];

            array_push($arr, $toID);
        }
    }
} 
```

**根据进一步的研究和@Waygood** 的第一个答案进行编辑，这是我现在正在使用并且正在工作的功能。我想知道是否有必要对现有密钥进行所有检查，这是否是实现这一目标的最经济的方法

```
public function linksReEncode($rows) {
        $result = array();

        foreach ($rows as $row) {

            $fromType = $row['fromType'];
            $fromID = $row['fromID'];
            $toType = $row['toType'];
            $toID = $row['toID'];

            if(!array_key_exists($fromType, $result))
                $result[$fromType] = array();

            if(!array_key_exists($fromID, $result[$fromType]))
                $result[$fromType][$fromID] = array();

            if(!array_key_exists($toType, $result[$fromType][$fromID]))
                $result[$fromType][$fromID][$toType] = array();

            array_push($result[$fromType][$fromID][$toType], $toID);

        }
        return $result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:30:59.533

您只是在每个循环中重新定义 $arr，而不是更改 $result

改变：

```
$arr = $result[$fromType][$fromID][$toType];
array_push($arr, $toID); 
```

到：

```
$result[$fromType][$fromID][$toType][]=$toID; 
```

# android - 如何从列表视图中仅删除选定的项目？

> ID：11845890
> 
> 赞同：2
> 
> 时间：2012-08-07T12:23:29.280
> 
> 标签：android

嗨，我想检查列表视图的所有项目。为此，我正在使用菜单。
如果选择全选菜单，则必须选择所有数据。同样，如果我从菜单中选择删除，则必须删除列表视图的所有值。
我正在正确选择列表视图项目。但是，如果我取消选中任何复选框并选择删除它，请说“请选择一个项目”。这是一个错误。
这意味着如果我选择所有项目然后取消选中列表视图中的任何一项，则必须删除选中的值。
我不知道该怎么做。

如果有人知道，请帮助我。

代码：

```
private void CreateMenu(Menu menu) {
        menu.setQwertyMode(true);
        MenuItem mnu1 = menu.add(0, 0, 0, "Delete");
        {
            mnu1.setAlphabeticShortcut('a');
        }
        MenuItem mnu2 = menu.add(1, 1, 1, "Select All");
        {
            mnu2.setAlphabeticShortcut('s');
        }
    }

    private boolean MenuChoice(MenuItem item) throws Exception {
        switch (item.getItemId()) {
        case 0:         
            if (getStrinValue != null) {
                delhistory(getStrinValue);
            } else {
                Toast.makeText(getApplicationContext(),
                        "Please select an Item", Toast.LENGTH_SHORT).show();
            }           
        case 1:
            if(item.getTitle().equals("Select All")){
                for(int i=0; i < lvhistory.getChildCount(); i++){
                    RelativeLayout itemLayout = (RelativeLayout)lvhistory.getChildAt(i);
                    final CheckBox cb = (CheckBox)itemLayout.findViewById(R.id.check);
                    cb.setChecked(true);    
                    if (cb.isChecked() == true) {                               
                        getStrinValue = getStrinValue + ","
                                + cb.getTag().toString();
                    }else{
                        getStrinValue = getStrinValue + ","
                        + cb.getTag().toString();
                    }                                                                                              
                }               
            }

        }
        return true;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        CreateMenu(menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        try {
            return MenuChoice(item);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return false;
    }

    private class MyAdapter extends ResourceCursorAdapter {

        public MyAdapter(Context context, Cursor cur) {
            super(context, R.layout.dummy, cur);
        }

        @Override
        public View newView(Context context, Cursor cur, ViewGroup parent) {
            LayoutInflater li = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            return li.inflate(R.layout.dummy, parent, false);
        }

        @Override
        public void bindView(View view, Context context, Cursor cur) {
            TextView tvListText = (TextView) view.findViewById(R.id.Mobile);
            chkBox = (CheckBox) view.findViewById(R.id.check);          
            tvListText.setText(cur.getString(cur
                    .getColumnIndex(MainscreenActivity.COL_Mobile)));
            chkBox.setTag(cur.getString(cur
                    .getColumnIndex(MainscreenActivity.COL_Sent_id)));

            chkBox.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    CheckBox cb = (CheckBox) v;
                    if (cb.isChecked() == true) {
                        getStrinValue = getStrinValue + ","
                                + cb.getTag().toString();
                    } else {
                        getStrinValue = null;
                    }
                }
            });
        }   

    }

    public void delhistory(String getStrinValue) {
        int pos1 = getStrinValue.indexOf(",");
        if (pos1 > 0) {
            String rowId = getStrinValue.substring(pos1 + 1);
            String delimiter = "\\,";
            String[] sentID = rowId.split(delimiter);
            for (int i = 0; i < sentID.length; i++) {
                String temp0 = sentID[i];
                int id = Integer.parseInt(temp0);
                MainscreenActivity.JEEMAAndroSMSDB
                        .delete(MainscreenActivity.Table_SentHistory, "_id="
                                + id, null);                
            }
            Toast.makeText(getApplicationContext(),
                    "History deleted successfully", Toast.LENGTH_SHORT)
                    .show();
            finish();
            Intent intent = new Intent(getApplicationContext(),
                    SentHistoryActivity.class);
            startActivity(intent);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:44:25.093

尝试以下代码：

1）定义数组列表：

```
public static ArrayList<String> item = new ArrayList<String>(); 
```

2）通过以下方式在其中添加项目：

```
item.add("string"); 
```

3）通过以下方式删除项目：

```
item.remove("string"); 
```

4) 对于 CheckAll/Uncheck Alllogic：

```
cbk = (CheckBox) findViewById(R.id.selectAllList);
cbk.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

            if(cbk.isChecked())
            {   
                CheckBox cb = (CheckBox) v;
                int itemCount = getListView().getCount();
                for(int i=0 ; i < itemCount ; i++){
                    getListView().setItemChecked(i, cb.isChecked());

                }

                itemList.clear();
                itemList.addAll(item);

                if(item.size() != itemList.size())
                {
                    cbk.setChecked(false);

                }

            }

            else
            {
                CheckBox cbk = (CheckBox) v;
                int itemCount = getListView().getCount();
                for(int i=0 ; i < itemCount ; i++){
                    getListView().setItemChecked(i, cbk.isChecked());
                }
                itemList.clear();

            }
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:45:49.710

这是您必须遵循的一般路径。

1.  从`ArrayList`填充您的`ListView`.
2.  完成后，您将不得不调用`notifyDataSetChanged()`正在`Adapter`用于`ListView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:50:49.940

好的，最后我自己找到了答案。我将 setonclicklistener 添加到复选框以删除未选中的值。答案如下：

```
private boolean MenuChoice(MenuItem item) throws Exception {
        switch (item.getItemId()) {
        case 0:
            if (getStrinValue != null) {
                delhistory(getStrinValue);
            } else {
                Toast.makeText(getApplicationContext(),
                        "Please select an Item", Toast.LENGTH_SHORT).show();
            }
        case 1:
            if (item.getTitle().equals("Select All")) {
                for (int i = 0; i < lvhistory.getChildCount(); i++) {
                    RelativeLayout itemLayout = (RelativeLayout) lvhistory
                            .getChildAt(i);
                    final CheckBox cb = (CheckBox) itemLayout
                            .findViewById(R.id.check);
                    cb.setChecked(true);
                    if (cb.isChecked() == true) {
                        getStrinValue = getStrinValue + ","
                                + cb.getTag().toString();
                        System.out.println("CHECKEDIITTEEMSS-->>>"
                                + getStrinValue);
                    }
                    cb.setOnClickListener(new OnClickListener() {
                        @Override
                        public void onClick(View arg0) {
                            // TODO Auto-generated method stub
                            if (cb.isChecked() == false) {                              
                                getUnselected = cb.getTag().toString();
                                getStrinValue = getStrinValue.replace(","
                                        + getUnselected, "");
                                System.out.println("UNCHECKED--->>>"
                                        + getStrinValue);
                            } else if (cb.isChecked() == true) {
                                getStrinValue = getStrinValue + ","
                                        + cb.getTag().toString();
                                System.out.println("CHECKEDIITTEEMSS-->>>"
                                        + getStrinValue);
                            }
                        }
                    });
                }
            }
        }
        return false;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        CreateMenu(menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        try {
            return MenuChoice(item);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return false;
    }

    private class MyAdapter extends ResourceCursorAdapter {

        public MyAdapter(Context context, Cursor cur) {
            super(context, R.layout.custom_sent_view, cur);
        }

        @Override
        public View newView(Context context, Cursor cur, ViewGroup parent) {
            LayoutInflater li = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            return li.inflate(R.layout.custom_sent_view, parent, false);
        }

        @Override
        public void bindView(View view, Context context, Cursor cur) {
            TextView tvListText = (TextView) view.findViewById(R.id.Mobile);
            chkBox = (CheckBox) view.findViewById(R.id.check);
            tvListText.setText(cur.getString(cur
                    .getColumnIndex(MainscreenActivity.COL_Mobile)));
            chkBox.setTag(cur.getString(cur
                    .getColumnIndex(MainscreenActivity.COL_Sent_id)));

            chkBox.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    CheckBox cb = (CheckBox) v;
                    if (cb.isChecked() == true) {
                        getStrinValue = getStrinValue + ","
                                + cb.getTag().toString();
                    } else {
                        getStrinValue = null;
                    }
                }
            });
        }

    }

    public void delhistory(String getStrinValue) {
        int pos1 = getStrinValue.indexOf(",");
        if (pos1 > 0) {
            String rowId = getStrinValue.substring(pos1 + 1);
            String delimiter = "\\,";
            String[] sentID = rowId.split(delimiter);
            for (int i = 0; i < sentID.length; i++) {
                String temp0 = sentID[i];
                int id = Integer.parseInt(temp0);
                MainscreenActivity.JEEMAAndroSMSDB
                        .delete(MainscreenActivity.Table_SentHistory, "_id="
                                + id, null);
            }
            Toast.makeText(getApplicationContext(),
                    "History deleted successfully", Toast.LENGTH_SHORT).show();
            finish();
            Intent intent = new Intent(getApplicationContext(),
                    SentHistoryActivity.class);
            startActivity(intent);
        }
    } 
```

非常感谢你。

# ruby-on-rails - 如何从 gem 中读取 config.i18n.default_locale？

> ID：11845896
> 
> 赞同：2
> 
> 时间：2012-08-07T12:23:40.003
> 
> 标签：ruby-on-rails, gem, scope

如何从 gem 中读取 Rails 应用程序的 default_locale？我在 REE 1.8.7 上运行 Rails 3.2.6

这对我不起作用：

```
module MyModule
  class Railtie < Rails::Railtie
    begin
      puts "test #{config.i18n.default_locale}"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:12:04.897

我有同样的问题，我是这样解决的：

```
module MyModule
  class Railtie < Rails::Railtie
    config.to_prepare do
        Rails.configuration.i18n.default_locale
    end
  end
end 
```

# java - 如何在 OS X 10.8 上添加特定路径到 CLASSPATH？

> ID：11845898
> 
> 赞同：2
> 
> 时间：2012-08-07T12:23:41.610
> 
> 标签：java, classpath, osx-mountain-lion

OS X 忽略 CLASSPATH，我在下面添加了以下行`.bash_profile`：

```
export CLASSPATH=$CLASSPATH:/path:/anOtherPath 
```

当`echo $CLSSPATH`我可以看到提供的路径但 OS X 只`/Library/Java/Extensions`在`~`.

**如何将特定路径添加到 CLASSPATH？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:12:02.480

我听说有人在做几个选项，包括将新目录添加到 ~/.bash_profile 或编辑 /etc/profile。

也就是说，我通常做的是在 /etc/paths.d 中创建一个文件，其中包含我想要添加到我的 PATH 的目录。如果您查看 /etc/paths 那么您可以看到格式（基本上只需将完全限定的路径添加到要添加到文件中自己的行的每个目录中）。例如，我在 /etc/paths.d 目录中有一个名为 android 的文件，该文件具有 Android platform-tools 文件夹和我的 NDK 文件夹的路径，因为我将它们都用于 Android 工作。

您可以只编辑文件 /etc/paths 但我不推荐它，因为这是系统路径，如果 Apple 向您推送新更新，Apple 可以随意覆盖它。paths.d 更安全。

# dns - 如何在 Weblogic 10.3 中启用/禁用 DNS 查找？

> ID：11845899
> 
> 赞同：1
> 
> 时间：2012-08-07T12:23:46.263
> 
> 标签：dns, weblogic

在 Apache-Tomcat 中，我有**enableLookups**属性（即[Tomcat 6](http://tomcat.apache.org/tomcat-6.0-doc/config/http.html)）用于启用或禁用 DNS 查找。在 Weblogic 10.3 中有什么方法可以做同样的事情吗？

我试过 -Dweblogic.system.enableReverseDNSLookups=false 但没有运气......

提前致谢，

路易斯

# javascript - 意外的“else”和函数未运行

> ID：11845906
> 
> 赞同：1
> 
> 时间：2012-08-07T12:24:08.740
> 
> 标签：javascript, google-chrome, javascript-events

此代码似乎没有正确运行：

```
var addEventListener = (function () {
    "use strict";
    if (document.addEventListener) {
        return function (element, event, handler) {
            element.addEventListener(event, handler, false);
        };
    } else {
        return function (element, event, handler) {
            element.attachEvent('on' + event, handler);
        };
    }
})();

addEventListener(window, 'onload', calcFailback); 
```

铬返回：

> 未捕获的类型错误：对象加载没有方法“addEventListener”

Jslint 返回：

> 没想到别的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:25:44.577

您正在创建一个全局变量`addEventListener`，它将被添加为`window`. 所以`window.addEventListener`（`element`=== `window`，通过这个调用）实际上是指您的自定义函数，而不是本机函数。使用不同的名称：

```
var myAddEventListener = (function() {
    "use strict";
    if (document.addEventListener) {
        return function(element, event, handler) {
            element.addEventListener(event, handler, false);
        };
    } else {
        return function(element, event, handler) {
            element.attachEvent('on' + event, handler);
        };
    }
})(); //<-- invoke it 
```

也使用`"load"`：

```
myAddEventListener( window, "load", function(){}) 
```

# c# - 将数据写入/加载到 XML 文件 C#

> ID：11845907
> 
> 赞同：0
> 
> 时间：2012-08-07T12:24:08.270
> 
> 标签：c#, xml

我有一个应用程序，用户将在其中保存稍后将被提取的信息。每个“试验”都有自己的 XML 文件，并且在该 XML 文件中将有由 EventID 标识的特定事件，并且在每个事件中竞争的特定狗将具有自己的 DogID。

我需要找到一种方法来检查特定事件中的特定事件或狗是否已写入此文件。下面是第一次创建这个 XML 文件的代码，然后在为这个文件创建一个特定的事件和狗时更新。

```
XmlWriter w = XmlWriter.Create(fs);

            w.WriteStartDocument();
            w.WriteStartElement("Event");
            for (int counter = 0; counter < registeredEventCount; counter++)
            {

                string eventString = registeredArrayList[counter].ToString();
                // eventString = eventString.Replace(" ", "");

                w.WriteStartElement("Event");
                w.WriteAttributeString("id", eventString);
                // Write a product.
                w.WriteStartElement("dogId");
                w.WriteElementString("eventID", eventSelectComboBox.SelectedItem.ToString());
                w.WriteElementString("ukcNumber", ukcDogNumTextBox.Text.ToString());
                w.WriteElementString("breed", breedTextBox.Text.ToString());
                w.WriteElementString("dogName", dogNameTextBox.Text.ToString());
                w.WriteEndElement();
                w.WriteEndElement();
            }

            w.WriteEndDocument();
            w.Flush(); 
```

有什么建议么？我很难找到一种有效的方法来检查是否已经创建了一个事件并且已经在一个事件中创建了一只狗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:46:06.950

using [XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx) could be easier, For example

```
XmlSerializer serializer = new XmlSerializer(typeof(Trial));
serializer.Serialize(stream, trialObject);

public class Trial
{
    public List<Event> Events;
}

public class Event
{
    public string eventID;
    public string dogId;
    public string ukcNumber;
    public string breead;
    public string dogName;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:27:29.890

在文件写入期间使用 a`Dictionary`或 a`HashedSet`填充，检查该字典是否有正确的键，以检查狗/事件是否已经“看到”并跳过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:41:01.090

我认为您需要查看 LINQ to XML：http: [//msdn.microsoft.com/fr-fr/library/bb387098.aspx](http://msdn.microsoft.com/fr-fr/library/bb387098.aspx)

这样您就可以查询您的 XML 文档并检索您需要检查的内容。

旁注：我建议您使用关键字“使用”来自动 Dispose() 您的 streamWriter。检查这个[http://msdn.microsoft.com/fr-fr/library/yh598w02%28v=vs.80%29](http://msdn.microsoft.com/fr-fr/library/yh598w02%28v=vs.80%29)

您将了解到，基本上，每个实现 IDisposable 的类都可以与 using 指令一起使用。

# c# - 是否可以使用 C# .NET 解密 Windows 安全目录 (.cat)？

> ID：11845910
> 
> 赞同：0
> 
> 时间：2012-08-07T12:24:11.953
> 
> 标签：c#, .net

> **可能重复：**
> [Microsoft 安全目录格式文档和 API 示例](https://stackoverflow.com/questions/1598236/microsoft-security-catalog-format-documentation-and-api-samples)

我一直在寻找是否可以使用 C# 和 .NET 打开和解密 Windows 安全目录。

我的目标是让 .cat 文件的内容纯粹是人类可读的，这样我就可以看到里面的内容。如果这是不可能的，那么该信息将很有用。

目前，我可以在 Notepad++ 中查看加密文本，但在文本中找不到任何类型的模式来显示文件的结构。

如果有人能告诉我用于加密 .cat 文件的加密算法，那也会很有用。

# .net - 如何更改 Visual Studio 2010（单元测试）中的目标框架？

> ID：11845914
> 
> 赞同：2
> 
> 时间：2012-08-07T12:24:24.207
> 
> 标签：.net, visual-studio-2010, unit-testing, .net-framework-version

我开发了一个小型网络部件。现在我想为这个 webpart 创建一个单元测试。我使用本[教程](http://channel9.msdn.com/Blogs/adebruyn/Visual-Studio-SP1-and-SharePoint-2010-Unit-Test)来创建单元测试。演示者将目标框架从 .Net 4.0 更改为 3.5，但我无法将目标框架更改为 3.5（我得到以下信息）。

Microsoft Visual Studio：已取消尝试重新定位项目。您不能更改测试项目的指定 .NET 框架版本或配置文件。

所以我测试[了这个](http://msdnrss.thecoderblogs.com/2011/05/retargeting-visual-studio-test-projects-for-net-4-platform-update-1/)。不幸的是它不起作用。

作为信息：如果我想创建一个新的测试项目，Visual Studio 不会显示任何适用于 .NET 3.5（仅 4.0）的项目。

如何将目标框架更改为 3.5？Visual Studio 2010 有更新吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:27:48.027

安装 Visual Studio Service Pack 1。我遇到了这个问题，这为我解决了。

# php - cakephp中的谷歌分析

> ID：11845915
> 
> 赞同：-2
> 
> 时间：2012-08-07T12:24:26.587
> 
> 标签：php, cakephp

我试过这个： [https ://github.com/msadouni/cakephp-plugin-google-analytics](https://github.com/msadouni/cakephp-plugin-google-analytics)

这是一个谷歌分析插件。

只是不确定我的 Tracking ID 应该去哪里。我应该把它放在哪个文件中？

如果有人能解释一下如何使用这个插件，那将是一个很大的帮助。

如果有人有更好的插件，请随时告诉我

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:30:41.570

[文档](https://github.com/msadouni/cakephp-plugin-google-analytics/blob/master/README.markdown)很清楚：

> 将 config/google_analytics.php.default 复制到 config/google_analytics.php 并在 $google_analytics 数组中填写您的帐户信息。

# google-maps-api-3 - google.maps.Marker zIndex 不适用于两种图标类型 - 符号和字符串

> ID：11845916
> 
> 赞同：23
> 
> 时间：2012-08-07T12:24:35.043
> 
> 标签：google-maps-api-3

当我使用不同的图标类型向 Google 地图添加更多标记时，例如：

```
...
var marker = new google.maps.Marker({
             position: markerLatLng,
             map: map,
             icon: "http://www.test.com/marker.png",
             zIndex: 10
         });
... 
```

和

```
...
var resultIcon = {
            path: google.maps.SymbolPath.CIRCLE,
            fillColor: "black",
            strokeColor: "black",
            strokeWeight: 1,
         };

var marker = new google.maps.Marker({
             position: markerLatLng,
             map: map,
             icon: resultIcon,
             zIndex: 5
         });
... 
```

比 zIndex 不起作用，符号标记出现在顶部。

我的代码错了还是如何使 zIndex 正常工作？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-21T19:20:42.053

您必须同时指定 a`zIndex`并添加

```
optimized: false 
```

到**每个**标记构造函数，例如。

```
var marker = new google.maps.Marker({
    position: markerLatLng,
    map: map,
    icon: resultIcon,
    optimized: false,
    zIndex: 5
}) 
```

这似乎是新的基于画布的标记渲染的问题。

**编辑：**

这确实解决了问题。不过要提到的一件事是，每个标记都必须具有“优化：假”属性。只要一个标记没有它，它就不会起作用。

从 LeJared 的小提琴中删除任何“优化：错误”属性，您将遇到该错误。

[http://jsfiddle.net/BNWYq/1/](http://jsfiddle.net/BNWYq/1/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-22T09:50:54.517

将圆圈的 zIndex 设置为 -99 似乎有帮助：http: [//jsfiddle.net/rq4vs/2/](http://jsfiddle.net/rq4vs/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:55:56.670

我做了一个小技巧：http: [//jsfiddle.net/gSRmV/](http://jsfiddle.net/gSRmV/)

看起来像一个错误，必须由谷歌修复。

~~添加`optimized: false`不会改变任何东西。~~

**编辑：**看起来仍然像错误，但 tborychowski 和 Codetoffel 的两个解决方案似乎有效。

# primefaces - JFreeChart 到 Primefaces 图表

> ID：11845918
> 
> 赞同：0
> 
> 时间：2012-08-07T12:24:36.233
> 
> 标签：primefaces, jfreechart

我正在使用静态 primefaces 图表组件：

```
<p:graphicImage value="#{dynamicImageController.chart}" /> 
```

有什么方法可以轻松地从这个静态图像（jfree 图表）切换到 primefaces 图表的模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:37:51.213

是的...查看 primefaces 文档： http: [//www.primefaces.org/showcase-labs/ui/dynamicImage.jsf](http://www.primefaces.org/showcase-labs/ui/dynamicImage.jsf)（它甚至向您展示了如何使用 jfreechart）

# android - 函数在 Qt 中无法正常工作

> ID：11845919
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:24:39.957
> 
> 标签：android, c++, qt, qt4

我正在制作一个简单的 GUI 程序来更改 Android 手机的启动动画，但是从过去 4 天开始我遇到了一个问题，我不知道是什么原因，这是我的代码

```
void MainWindow::bootanim1()
{   
    QProcess rootboot;

    QStringList path6,boottarget;
    path6<<ui->lineEdit_6->text();

    boottarget<<path6<<" /system/media";
    ui->textBrowser->clear();
    ui->textBrowser->setText("Remounting partitions...");
    rootboot.start("bbin\\adb shell su -c \"busybox mount -o remount,rw /system\"");
    rootboot.waitForFinished();
    ui->textBrowser->setText("\nInstalling bootanimation.zip");
    rootboot.start("bbin\\adb push ",boottarget);
    rootboot.waitForFinished();
    ui->textBrowser->setText("\nBootanimation has been changed! Try shutting down your phone to see new bootanimation");
} 
```

单击按钮时会启动此功能，但我的问题是，这不起作用！其次，您可以在代码中看到，为了提供更多信息，我使用 a`textBrowser`向用户显示正在发生的事情，例如重新安装分区等，并且`lineEdit_6`是`lineEdit`用户将粘贴 bootanimation.zip 路径的小部件。所以我的问题是当我点击按钮时只显示这个

`Bootanimation has been changed! Try shutting down your phone to see new bootanimation`

我认为上面的所有内容都被跳过了，我不知道为什么？谁能给我一些关于我缺少什么的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:52:56.423

在这里，您混合了两种不同的方法来为 QProcess 提供参数：

```
boottarget<<path6<<" /system/media";
rootboot.start("bbin\\adb push ",boottarget); 
```

[第一种方法](http://doc-snapshot.qt-project.org/4.8/qprocess.html#start-2)在一个 QString 中给出程序名称和参数。

[第二种方法](http://doc-snapshot.qt-project.org/4.8/qprocess.html#start)在 QStringList 中给出参数。

您试图在程序名称字符串中给出一个参数（“push”）。当其他参数在 QStringList 中给出时，它不起作用。最后一个参数在开头也包含可疑的空间，虽然我不知道它是否会导致问题。试试这个：

```
QStringList args;
args << "push" << path6 << "/system/media";
rootboot.start("bbin\\adb", args); 
```

path6 变量可能应该是 QString 而不是 QStringList。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:54:01.273

UI 需要 eventloop 来刷新自己。当您在一个函数调用中进行所有更改时，只会更改内部属性，并且 gui 本身不会重新绘制。`QCoreApplication::processEvents();`每次后立即使用`ui->textBrowser->setText(...);`

# c# - 无法通过“使用”使用命名空间

> ID：11845921
> 
> 赞同：1
> 
> 时间：2012-08-07T12:24:41.893
> 
> 标签：c#, .net, wcf

我有以下**工作代码**（用于使用 WCF 服务）。

> SecurityRoleWebService 是一个命名空间。
> 
> SecurityWebserviceManagerImplClient 是一个对应于 WCF 服务的类。
> 
> getSecurityRoles() 是对应服务操作的方法。

当我将命名空间添加为

```
using SecurityRoleWebService 
```

我收到以下错误：

> 错误：找不到类型或命名空间名称“SecurityRoleWebService”（您是否缺少 using 指令或程序集引用？）

为什么会这样？如何克服这一点？

```
SecurityRoleWebService.SecurityWebserviceManagerImplClient proxySecurityRole = new SecurityRoleWebService.SecurityWebserviceManagerImplClient();

        SecurityRoleWebService.SecurityRole[] roles = proxySecurityRole.getSecurityRoles(userID);

        string roleName = roles[0].roleName; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:41:53.227

您在其中创建 ServiceReference 的项目的命名空间是什么？您可能需要在 using 中为该名称空间添加前缀：

```
using YourNamespaceHere.SecurityRoleWebService; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T13:20:20.983

使用类的完全限定命名空间。当您使用 ServiceReference 时，生成的命名空间是`[default namespace of your project].[name of the service reference]`. 你必须在 using 中使用这个完全限定的命名空间。

当您像使用您所做的那样为类添加前缀时，`new SecurityRoleWebService.SecurityWebserviceManagerImplClient();`您可以使用相对命名空间（相对于代码块所在的命名空间）。

当您编写 using 时，您不在具有名称空间的代码块中，因此没有名称空间可关联。您必须使用完全限定的命名空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T12:32:16.740

您是否在项目中引用了 dll？如果没有，请右键单击您的项目，然后**添加引用**，然后选择您的 dll。

# sharepoint - 将 sharepoint 2010 与 tfs2010 集成

> ID：11845923
> 
> 赞同：0
> 
> 时间：2012-08-07T12:24:46.950
> 
> 标签：sharepoint, sharepoint-2010

我的同事已经安装了 TFS2010 和 Sharepoint Services 3.0

我想安装 Sharepoint2010，而不是使用 Sharepoint 服务。这有多可行？我能否将使用当前版本创建的现有 sharepoint 集合移动到新版本的 Sharepoint。它如何与 TFS2010 集成？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:53:21.703

您可以安全地将 SharePoint 升级到 2010，一切都会继续正常工作。

# java - 使用 ParameterExpression 作为 In 子句的一部分

> ID：11845925
> 
> 赞同：1
> 
> 时间：2012-08-07T12:24:47.000
> 
> 标签：java, hibernate, jpa, jpa-2.0

我想使用参数表达式作为 in 子句的一部分。我想查询在一组 Bars 中有一个 Bar 的 Foos 列表。这可能吗？

```
Foo
    // Join, ManyToOne
    Bar getBar()

Query
    ParameterExpression<???> barParameter;

    void setup() {
        CriteriaBuilder builder = ...
        CriteriaQuery<Foo> criteria = ...
        Root<Bar> root = ...

        barParameter = builder.parameter(???);

        criteria.where(
            builder.in(root.get(Foo_.bar)).value(barParameter)
        );
    }

    List<Foo> query(Set<Bar> bars) {
        TypedQuery<Foo> query = createQuery();
        query.setParameter(barParameter, bars);
        return query.getResultList();
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T17:20:24.897

对于`in`表达式，您只能使用原始比较类型，因此您需要进行连接并比较原始类型的字段（这里我使用过`Integer id`）：

```
Root<Foo> foo = cq.from(Foo.class);
Join<Foo, Bar> bar = foo.join(Foo_.bar);
ParameterExpression<Collection> bars = cb.parameter(Collection.class);
cq.where(bar.get(Bar_.id).in(bars));
TypedQuery<Foo> tq = em.createQuery(cq);
Collection<Integer> barsParameter = new ArrayList<Integer> ();
barsParameter.add(1);
List<Foo> resultList = tq.setParameter(bars, barsParameter).getResultList(); 
```

# javascript - 如何再次启动功能？

> ID：11845932
> 
> 赞同：0
> 
> 时间：2012-08-07T12:25:00.990
> 
> 标签：javascript, jquery, css

我有这个功能，一切都很好，但我无法再次启动它。只能这样做一次，有什么问题吗？谢谢帮助。

```
$('.bottom_panel_button_05').one('click', function(){
    $(this).css(
        'background-image','url("img/bottom_panel_icons/ap_bottom_panel_back_button_01_135_on.png")',
        'background-position','center center no-repeat'
    ).addClass('panel_blocked');
    $(this).one('click', function(){
        $(this).css(
            'background-image','url("img/bottom_panel_icons/ap_bottom_panel_back_button_01_135.png")',
            'background-position','center center no-repeat'
        ).removeClass('panel_blocked');
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:26:55.933

您正在使用函数`.one()`而不是`.on()`（或`.delegate()`, `.live()`/`.bind()`在较旧的 jQuery 版本中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:39:31.010

```
 $('.bottom_panel_button_05').on('click', function(){
      if (!$(this).hasClass('panel_blocked')) {
        $(this).css({
          'background-image': 'url("img/bottom_panel_icons/ap_bottom_panel_back_button_01_135_on.png")',
          'background-position': 'center center no-repeat'
        }).addClass('panel_blocked');
      } else {
        $(this).css({
          'background-image': 'url("img/bottom_panel_icons/ap_bottom_panel_back_button_01_135.png")',
          'background-position': 'center center no-repeat'
        }).removeClass('panel_blocked');
      }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T12:43:29.227

看起来您正在尝试切换按钮，在这种情况下您可以简化代码：

```
$('.bottom_panel_button_05').on('click', function (){
    var that = $(this);
    if (that.hasClass('panel_blocked') {
        that.css(
            'background-image','url("img/bottom_panel_icons/ap_bottom_panel_back_button_01_135.png")'
        ).removeClass('panel_blocked');
    } else {
        that.css(
            'background-image','url("img/bottom_panel_icons/ap_bottom_panel_back_button_01_135_on.png")'
        ).addClass('panel_blocked');
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T12:48:24.530

您真正要做的就是切换`'_on'`到图像名称的末尾并根据元素是否具有该类来切换一个类，一种简单的方法是：

```
$('.bottom_panel_button_05').on('click', function (){
    var Is = $(this).is('.panel_blocked');
    $(this).css('background-image','url("img/bottom_panel_icons/ap_bottom_panel_back_button_01_135'+(Is?'':'_on')+'.png")')
           .toggleClass('panel_blocked', !Is);
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T12:26:40.733

更改`one`为`live`

```
$('.bottom_panel_button_05').live('click', function(){
    $(this).css(
        'background-image','url("img/bottom_panel_icons/ap_bottom_panel_back_button_01_135_on.png")',
        'background-position','center center no-repeat'
    ).addClass('panel_blocked');
    $(this).live('click', function(){
        $(this).css(
            'background-image','url("img/bottom_panel_icons/ap_bottom_panel_back_button_01_135.png")',
            'background-position','center center no-repeat'
        ).removeClass('panel_blocked');
    });
}); 
```

# java - 春季认证

> ID：11845936
> 
> 赞同：-1
> 
> 时间：2012-08-07T12:25:04.917
> 
> 标签：java, spring, spring-mvc

我有一个用户模型 UserServices 并通过登录页面对注册用户进行身份验证。
你能帮我写一下在Authentication Controller中使用的方法吗？

```
<fieldset><legend>Authentication</legend>
<form:form action="login.htm"  commandName="user">
    <table>
        <tr>
            <td>User Name:<FONT color="red"><form:errors
                path="userName" /></FONT></td>
        </tr>
        <tr>
            <td><form:input path="userName" /></td>
        </tr>
        <tr>
            <td>Password:<FONT color="red"><form:errors
                path="password" /></FONT></td>
        </tr>
        <tr>
            <td><form:password path="password" /></td>
        </tr>
        <tr>
            <td><input type="submit" value="Submit" /></td>
        </tr>
    </table>
</form:form>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:36:02.230

在这里，您可以找到一个示例教程，如何将 Spring Security 添加到您的应用程序中。 [http://blog.rajithdelantha.com/2012/07/spring-security-part-1-sample-login.html](http://blog.rajithdelantha.com/2012/07/spring-security-part-1-sample-login.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:26:29.660

如果您已经使用过 spring，您可以轻松添加[spring 安全性](http://static.springsource.org/spring-security/site/)来处理用户身份验证和权限。

# desktop-application - 用旧版本的 Infragistics 控件替换新版本的 Infragistics 控件

> ID：11845940
> 
> 赞同：0
> 
> 时间：2012-08-07T12:25:13.967
> 
> 标签：desktop-application, infragistics

我正在为我的 Windows 桌面应用程序使用 Infragistics Win Controls。目前我正在使用 8.3 版本的 Infragistics Controls。现在我想使用新版本 12.1。

我可以在我的项目中替换和添加这些控件吗？我不知道如何做到这一点，并将现有控件中的旧版本更改为新版本的 Infragistics 控件。

任何人都可以给我一些想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:58:36.090

要升级控件，您需要将 Infragistics 引用更改为程序集的新版本。虽然您可以手动执行此操作，但 Infragistics 还提供了一个[版本实用程序](http://help.infragistics.com/NetAdvantage/WinForms/Current/CLR2.0/?page=Win_Upgrading_a_Project_to_NetAdvantage_Windows_Forms_11.1_%28and_above%29_Using_Version_Utility.html)来帮助您完成此操作。

# android - 无法写入输出：方法太多：66156；最大值为 65536。按包：android

> ID：11845941
> 
> 赞同：2
> 
> 时间：2012-08-07T12:25:19.613
> 
> 标签：android, command-line

我正在使用 ant 从命令提示符编译 android 项目。但是当我用 ant 编译时，我在转换为 dex 文件时遇到了这个错误。

```
-dex:
      [dex] Converting compiled files and external libraries into E:\Demo\bin\classes.dex...
       [dx]
       [dx] trouble writing output: Too many methods: 66156; max is 65536\. By package:
       [dx]     26 android
       [dx]     83 android.accessibilityservice
       [dx]    410 android.accounts
       [dx]    430 android.animation
       [dx]      8 android.annotation
       [dx]   3695 android.app
       [dx]    404 android.app.admin
       [dx]    309 android.app.backup
       [dx]     95 android.appwidget
       [dx]   1248 android.bluetooth
       [dx]   1673 android.content
       [dx]    932 android.content.pm
       [dx]    503 android.content.res
       [dx]    522 android.database
       [dx]    394 android.database.sqlite
       [dx]     91 android.ddm
       [dx]      5 android.debug
       [dx]     45 android.dirEncryption
       [dx]    163 android.drm
       [dx]     51 android.drm.mobile1
       [dx]     30 android.emoji
       [dx]   1245 android.graphics
       [dx]    705 android.graphics.drawable
       [dx]     36 android.graphics.drawable.shapes
       [dx]    321 android.hardware
       [dx]     96 android.hardware.motion
       [dx]    187 android.hardware.usb
       [dx]     43 android.icu.text
       [dx]    436 android.inputmethodservice
       [dx]    614 android.location
       [dx]   1526 android.media
       [dx]    248 android.media.audiofx
       [dx]    500 android.media.videoeditor
       [dx]    134 android.mtp
       [dx]   1547 android.net
       [dx]    375 android.net.http
       [dx]     49 android.net.rtp
       [dx]    440 android.net.sip
       [dx]   1529 android.net.wifi
       [dx]    493 android.net.wifi.p2p
       [dx]      1 android.net.wimax
       [dx]    357 android.nfc
       [dx]    165 android.nfc.tech
       [dx]   1501 android.opengl
       [dx]   2156 android.os
       [dx]    301 android.os.storage
       [dx]    468 android.preference
       [dx]    589 android.provider
       [dx]    916 android.renderscript
       [dx]     35 android.sax
       [dx]    140 android.sec.clipboard
       [dx]     52 android.sec.clipboard.data
       [dx]     31 android.sec.clipboard.data.file
       [dx]     58 android.sec.clipboard.data.list
       [dx]     31 android.sec.clipboard.util
       [dx]    372 android.sec.enterprise
       [dx]      5 android.sec.enterprise.kioskmode
       [dx]    565 android.sec.multiwindow
       [dx]     64 android.sec.mwdialog
       [dx]    113 android.security
       [dx]    720 android.server
       [dx]    123 android.service.wallpaper
       [dx]    147 android.speech
       [dx]    458 android.speech.tts
       [dx]    487 android.telephony
       [dx]     16 android.telephony.cdma
       [dx]    143 android.telephony.gsm
       [dx]    729 android.text
       [dx]     93 android.text.format
       [dx]    372 android.text.method
       [dx]    252 android.text.style
       [dx]     43 android.text.util
       [dx]    618 android.util
       [dx]     45 android.util.safelog
       [dx]     63 android.util.secutil
       [dx]   3897 android.view
       [dx]    314 android.view.accessibility
       [dx]    226 android.view.animation
       [dx]    319 android.view.inputmethod
       [dx]    112 android.view.textservice
       [dx]   3963 android.webkit
       [dx]   5621 android.widget
       [dx]     12 com.android.i18n.phonenumbers
       [dx]      2 com.android.i18n.phonenumbers.geocoding
       [dx]     23 com.android.internal
       [dx]    627 com.android.internal.app
       [dx]     80 com.android.internal.appwidget
       [dx]     57 com.android.internal.content
       [dx]     23 com.android.internal.database
       [dx]      8 com.android.internal.http
       [dx]     37 com.android.internal.location
       [dx]     12 com.android.internal.logging
       [dx]     49 com.android.internal.net
       [dx]    649 com.android.internal.os
       [dx]     26 com.android.internal.os.storage
       [dx]     54 com.android.internal.policy
       [dx]    194 com.android.internal.statusbar
       [dx]   3499 com.android.internal.telephony
       [dx]    675 com.android.internal.telephony.cat
       [dx]    922 com.android.internal.telephony.cdma
       [dx]    101 com.android.internal.telephony.cdma.sms
       [dx]   1056 com.android.internal.telephony.gsm
       [dx]    662 com.android.internal.telephony.ims
       [dx]      7 com.android.internal.telephony.mosecurity
       [dx]    474 com.android.internal.telephony.sip
       [dx]     15 com.android.internal.telephony.test
       [dx]     88 com.android.internal.textservice
       [dx]    393 com.android.internal.util
       [dx]    435 com.android.internal.view
       [dx]    509 com.android.internal.view.menu
       [dx]    695 com.android.internal.widget
       [dx]      1 com.android.org.bouncycastle.asn1
       [dx]      4 com.android.org.bouncycastle.asn1.x509
       [dx]      3 com.android.org.bouncycastle.jce.netscape
       [dx]      6 com.android.org.bouncycastle.openssl
       [dx]      1 com.android.org.bouncycastle.util.encoders
       [dx]     36 com.android.server
       [dx]     10 com.google.android.collect
       [dx]    313 com.google.android.gles_jni
       [dx]     11 com.lguplus.se
       [dx]     26 com.samsung
       [dx]     67 com.samsung.ScreenCapture
       [dx]    164 com.samsung.bluetoothle
       [dx]    100 com.samsung.media.fmradio
       [dx]    224 com.samsung.media.fmradio.internal
       [dx]    338 com.samsung.wfd
       [dx]     40 com.sec.android.app
       [dx]     41 com.sec.android.app.IWSpeechRecognizer
       [dx]    170 com.sec.android.app.eg
       [dx]    341 com.sec.android.app.eg.activity
       [dx]     21 com.sec.android.app.eg.cache
       [dx]     12 com.sec.android.app.eg.database
       [dx]      7 com.sec.android.app.eg.download
       [dx]     62 com.sec.android.app.eg.fragment
       [dx]     94 com.sec.android.app.eg.http
       [dx]     28 com.sec.android.app.eg.os
       [dx]      4 com.sec.android.app.eg.parser
       [dx]     15 com.sec.android.app.eg.parser.evergalade
       [dx]    311 com.sec.android.app.eg.parser.mediahub
       [dx]     12 com.sec.android.app.eg.request
       [dx]     27 com.sec.android.app.eg.request.get
       [dx]     19 com.sec.android.app.eg.request.post
       [dx]     10 com.sec.android.app.eg.screen
       [dx]      1 com.sec.android.app.eg.screen.land
       [dx]     46 com.sec.android.app.eg.service
       [dx]    335 com.sec.android.app.eg.util
       [dx]     51 com.sec.android.app.eg.view
       [dx]    131 com.sec.android.app.eg.view.ebookhub
       [dx]    129 com.sec.android.app.eg.view.gamehub
       [dx]    127 com.sec.android.app.eg.view.mediahub
       [dx]    124 com.sec.android.app.eg.view.musichub
       [dx]    180 com.sec.android.app.eg.view.mymedia
       [dx]     56 com.sec.android.app.eg.widget
       [dx]     50 com.sec.android.facedetection
       [dx]     10 com.sec.android.ims
       [dx]    210 com.sec.android.internal.ims
       [dx]    186 com.sec.android.internal.ims.external
       [dx]      1 dalvik.bytecode
       [dx]     65 dalvik.system
       [dx]      7 dalvik.system.profiler
       [dx]      4 default
       [dx]    252 java.io
       [dx]    447 java.lang
       [dx]      8 java.lang.ref
       [dx]     24 java.lang.reflect
       [dx]      4 java.math
       [dx]    108 java.net
       [dx]     94 java.nio
       [dx]      9 java.nio.channels
       [dx]     13 java.nio.charset
       [dx]     23 java.security
       [dx]     17 java.security.cert
       [dx]      1 java.security.spec
       [dx]     39 java.text
       [dx]    372 java.util
       [dx]     62 java.util.concurrent
       [dx]     20 java.util.concurrent.atomic
       [dx]     12 java.util.concurrent.locks
       [dx]     12 java.util.jar
       [dx]     13 java.util.logging
       [dx]     15 java.util.regex
       [dx]     11 java.util.zip
       [dx]      9 javax.crypto
       [dx]      1 javax.crypto.spec
       [dx]     33 javax.microedition.khronos.egl
       [dx]    267 javax.microedition.khronos.opengles
       [dx]     30 javax.net.ssl
       [dx]      1 javax.security.auth.x500
       [dx]      2 javax.sip
       [dx]     11 javax.sip.address
       [dx]      4 junit.framework
       [dx]      6 libcore.icu
       [dx]      2 libcore.internal
       [dx]     17 libcore.io
       [dx]      4 libcore.net
       [dx]      7 libcore.net.http
       [dx]      2 libcore.util
       [dx]      2 org.apache.commons.codec.binary
       [dx]     16 org.apache.harmony.dalvik.ddmc
       [dx]      2 org.apache.harmony.luni.internal.util
       [dx]      2 org.apache.harmony.security.asn1
       [dx]      6 org.apache.harmony.security.pkcs7
       [dx]      2 org.apache.harmony.security.provider.cert
       [dx]      1 org.apache.harmony.xml
       [dx]     11 org.apache.harmony.xnet.provider.jsse
       [dx]     33 org.apache.http
       [dx]     10 org.apache.http.client
       [dx]      2 org.apache.http.client.entity
       [dx]      8 org.apache.http.client.methods
       [dx]      1 org.apache.http.client.params
       [dx]      1 org.apache.http.conn
       [dx]      2 org.apache.http.conn.routing
       [dx]      4 org.apache.http.conn.scheme
       [dx]      2 org.apache.http.conn.ssl
       [dx]      1 org.apache.http.conn.util
       [dx]      9 org.apache.http.entity
       [dx]      3 org.apache.http.impl
       [dx]      8 org.apache.http.impl.client
       [dx]      1 org.apache.http.impl.conn
       [dx]      3 org.apache.http.impl.conn.tsccm
       [dx]      3 org.apache.http.impl.entity
       [dx]      6 org.apache.http.impl.io
       [dx]      6 org.apache.http.io
       [dx]     16 org.apache.http.message
       [dx]     14 org.apache.http.params
       [dx]      9 org.apache.http.protocol
       [dx]      8 org.apache.http.util
       [dx]      3 org.ccil.cowan.tagsoup
       [dx]     25 org.json
       [dx]      2 org.kxml2.io
       [dx]     13 org.xml.sax
       [dx]      1 org.xml.sax.helpers
       [dx]     31 org.xmlpull.v1

BUILD FAILED
D:\DevTools\android-sdk-windows\tools\ant\build.xml:851: The following error occurred while executing this line:
D:\DevTools\android-sdk-windows\tools\ant\build.xml:853: The following error occurred while executing this line:
D:\DevTools\android-sdk-windows\tools\ant\build.xml:865: The following error occurred while executing this line:
D:\DevTools\android-sdk-windows\tools\ant\build.xml:266: null returned: 2 
```

请帮助我，如何解决这个问题？

这是我的 build.xml 文件

```
<!-- The local.properties file is created and updated by the 'android' tool.
     It contains the path to the SDK. It should *NOT* be checked into
     Version Control Systems. -->
<property file="local.properties" />

<!-- The ant.properties file can be created by you. It is only edited by the
     'android' tool to add properties to it.
     This is the place to change some Ant specific build properties.
     Here are some properties you may want to change/update:

     source.dir
         The name of the source directory. Default is 'src'.
     out.dir
         The name of the output directory. Default is 'bin'.

     For other overridable properties, look at the beginning of the rules
     files in the SDK, at tools/ant/build.xml

     Properties related to the SDK location or the project target should
     be updated using the 'android' tool with the 'update' action.

     This file is an integral part of the build system for your
     application and should be checked into Version Control Systems.

     -->
<property file="ant.properties" />

<!-- if sdk.dir was not set from one of the property file, then
     get it from the ANDROID_HOME env var.
     This must be done before we load project.properties since
     the proguard config can use sdk.dir -->
<property environment="env" />
<condition property="sdk.dir" value="${env.ANDROID_HOME}">
    <isset property="env.ANDROID_HOME" />
</condition>

<!-- The project.properties file is created and updated by the 'android'
     tool, as well as ADT.

     This contains project specific properties such as project target, and library
     dependencies. Lower level build properties are stored in ant.properties
     (or in .classpath for Eclipse projects).

     This file is an integral part of the build system for your
     application and should be checked into Version Control Systems. -->
<loadproperties srcFile="project.properties" />

<!-- quick check on sdk.dir -->
<fail
        message="sdk.dir is missing. Make sure to generate local.properties using 'android update project' or to inject it through the ANDROID_HOME environment variable."
        unless="sdk.dir"
/>

<!--
    Import per project custom build rules if present at the root of the project.
    This is the place to put custom intermediary targets such as:
        -pre-build
        -pre-compile
        -post-compile (This is typically used for code obfuscation.
                       Compiled code location: ${out.classes.absolute.dir}
                       If this is not done in place, override ${out.dex.input.absolute.dir})
        -post-package
        -post-build
        -pre-clean
-->
<import file="custom_rules.xml" optional="true" />

<!-- Import the actual build file.

     To customize existing targets, there are two options:
     - Customize only one target:
         - copy/paste the target into this file, *before* the
           <import> task.
         - customize it to your needs.
     - Customize the whole content of build.xml
         - copy/paste the content of the rules files (minus the top node)
           into this file, replacing the <import> task.
         - customize to your needs.

     ***********************
     ****** IMPORTANT ******
     ***********************
     In all cases you must update the value of version-tag below to read 'custom' instead of an integer,
     in order to avoid having your file be overridden by tools such as "android update project"
-->
<!-- version-tag: 1 -->
<import file="${sdk.dir}/tools/ant/build.xml" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:27:03.453

在我看来，您正在尝试将其编译`android.jar`到您的包中。如果不了解您的项目/构建脚本是如何设置的，则很难给出完整的答案：

确保您没有专门添加`android.jar`到您的构建路径中。

# php - 命名 MySQL 表列

> ID：11845943
> 
> 赞同：1
> 
> 时间：2012-08-07T12:25:32.097
> 
> 标签：php, mysql

我在这里遇到一个小问题：

我正在通过 PHP 输入一个 MySQL 查询。我检查了连接工作正常，如下所示：

```
INSERT INTO table (q1,q2,q3) VALUES ('".$_POST['Q1']."', '".$_POST['Q2']."'...) 
```

然后当我将查询更改为以下内容时，出现错误：

```
INSERT INTO table (q1,q2,q3-1) VALUES ('".$_POST['Q1']."', '".$_POST['Q2']."'...) 
```

出现以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '-1) VALUES ('N', 'asdfasdf', '' )' 附近使用正确的语法

现在，我在想，是不是因为：

1.  我将表格列命名为“q3-1”
2.  或任何其他问题？

如果我改为 q3_1 可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T12:27:24.967

如果你在字段名周围加上反引号`，应该没问题

IE：

```
 INSERT INTO table (`q1`,`q2`,`q3-1`) ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T12:27:35.213

使用反引号。查看[PDO](http://us.php.net/pdo)。

```
INSERT INTO table (q1,q2,`q3-1`) 
VALUES ('".$_POST['Q1']."', '".$_POST['Q2']."'...) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T12:26:59.223

您的第二个查询有错误，因为`q3-1`. 它应该在引号中：

```
INSERT INTO table (q1,q2,`q3-1`) VALUES ('".$_POST['Q1']."', '".$_POST['Q2']."'...) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T12:49:55.100

**使用反引号 ( `** )转义列名

```
INSERT INTO table (`q1`, `q2`, `q3-1`) 
VALUES ('".$_POST['Q1']."', '".$_POST['Q2']."'...) 
```

但这种说法很容易受到`SQL Injection`. 尝试将它与**[PDO一起使用](http://php.net/manual/en/book.pdo.php)**

前任。）

```
<?php
$stmt = $dbh->prepare("INSERT INTO table (`q1`, `q2`, `q3-1`) VALUES (?, ?, ?)");
$stmt->bindParam(1, $_POST['Q1']);
$stmt->bindParam(2, $_POST['Q2']);
$stmt->bindParam(3, $_POST['Q3']);

$stmt->execute();

?> 
```

# sql-server-2008 - 声明日期时间类型的变量后，查询成功

> ID：11845944
> 
> 赞同：0
> 
> 时间：2012-08-07T12:25:35.200
> 
> 标签：sql-server-2008, tsql, datetime, converter, declare

声明日期时间类型的变量后，查询结果为成功。而且，我在结束阶段 Tiger2 徽标中收到以下错误。

“关键字'declare'附近的语法不正确本机错误：42000（156）”

代码如下。

```
DECLARE @Tarih1 DATETIME
DECLARE @Tarih2 DATETIME
SET @Tarih1 = Convert(DATETIME,'01.08.2011',104)
SET @Tarih2 = Convert(DATETIME,'30.09.2099',104)

SELECT
  Convert(Varchar,PLN.DATE_,104) AS 'Vade_TARİHİ', 
  Convert(Varchar,PLN.PROCDATE,104) AS 'İşlem_TARİHİ', 
  PLN.PAYNO AS 'Ö.D.P.SATIR NO',
  CL.TRANNO AS 'Fiş_No',
  BANK.CODE AS BANKA_KODU,
  BANK.DEFINITION_ AS BANKA,
  HESAP.CODE AS HESAP_KODU,
  HESAP.DEFINITION_ AS HESAP_AÇIKLAMASI,
  CC.CODE AS Öğrenci_No,
  CC.DEFINITION_ AS ÜNVANI,
  PLN.TOTAL AS 'HS.Düşmesi_Gereken',
  CL.AMOUNT AS 'POS_dan_Çekilen'
FROM LG_011_01_PAYTRANS AS PLN 
 JOIN LG_011_BANKACC AS HESAP ON HESAP.LOGICALREF=PLN.BANKACCREF 
 JOIN LG_011_BNCARD AS BANK ON BANK.LOGICALREF = HESAP.BANKREF 
 JOIN LG_011_CLCARD AS CC ON CC.LOGICALREF=PLN.CARDREF 
 LEFT OUTER JOIN LG_011_01_CLFLINE AS CL ON CL.LOGICALREF=PLN.FICHEREF
WHERE PLN.TRCODE=70 AND PLN.DATE_ BETWEEN @Tarih1 AND @Tarih2 
```

# jquery - Json 变得未定义并且不确定为什么

> ID：11845952
> 
> 赞同：0
> 
> 时间：2012-08-07T12:25:52.547
> 
> 标签：jquery, ajax, json

我有一个 json 提要，我目前正在使用 ajax 来尝试获取以列表格式显示的数据。我以前从未使用过 json 提要，因此必须从这些论坛中学到很多东西。

目前数据变得不确定，不知道为什么。现在我知道 json 提要是跨域的，所以需要 jsonp 和一个回调函数，而不是 url 中的一个。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>JSONP test</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
</head>

<body>
<div id="content"></div>
<script type="text/javascript"> 
function loadgatewayJSON() {

$.ajaxSetup({ 
        global  : true, 
        dataType: 'jsonp', 
        jsonp   : 'callback',
        cache   : true,
        data: {eventTypeId:1}, 
        ajaxStart: function(){
            //$('#content').hasClass('loading');
        },
        complete: function(){ 
             //$('#content').removeClass('loading');
        }
        });

    $.ajax({

        url: '(my url for feed)',
                   success: function(data, status) { 
                        $('#content').empty();  
                        var numResults = data.length;
                        alert(data);
                        for (var i=0;i < numResults;i++) {                              
                            $('#content').append("<p>"+data[0].eventCount+"</p>");

                        };

                   },
                   error:function (xhr, ajaxOptions, thrownError){ 
                    alert("An error has occured");
                    alert(xhr.status); 
                    alert(xhr.responseText); 
                } 
        });
};
loadgatewayJSON();
</script>
<div id="content"></div>
</body>
</html> 
```

我只是想知道是否有人可以发现我在代码中所做的任何错误，原因是它导致未定义。我真的只是想要一个事件列表。我希望这里有人可以帮助我。

**更新：**

我现在已经提取了提要，但正在努力提取 json 提要中的数据。

我需要拉的东西是

“名称”“开始日期”“结束日期”“事件类型”

我以为是：

```
$('#content').empty();  
var data = name.event;

alert(data);
for (var i=0;i < numResults;i++) {                              
$('#content').append('+data[0].events+'); 
```

可悲的是，所有这些都显示了 +data[0].events+ 加载次数

更新：

感谢对此的修复，遗憾的是似乎没有显示任何内容，所以假设它是我正在使用的措辞。

```
 "status": "success",
        "eventCount": 681,
        "events": [
            {

"baseUrl":                 
"pageUrl":                                 
"name":                 
"owner":        
"startDate":                 
"startTime":                 
"endDate":                 
"endTime": 
```

这些是提要 ID，可以使用此代码提取信息

```
success: function(data, status) { 
                    $('#content').empty();  
                    var data = data.name;
                    alert(data);
                    for (var i=0;i < data;i++) {                                
                        $('#content').append(data[0].events);

                    }; 
```

好的 2 个问题中的 1 个已修复，非常好。今天至少没有浪费。也非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:36:53.287

你做错了， `$('#content').append('+data[0].events+');`

你应该做的 `$('#content').append(data[0].events);`

`'+data[0].events+'`被视为字符串，输出如预期。

# php - 使用 INDEX 添加到数组或对象

> ID：11845953
> 
> 赞同：0
> 
> 时间：2012-08-07T12:25:55.283
> 
> 标签：php, javascript, jquery

如何生成具有自己索引的数组或对象？

在php中我可以：

```
$array = array();

foreach($users as $user){
   $array[$user] = $user;
} 
```

在 jQuery 中？

```
var arr = new Array();
$('input').each(function(){
   arr[$(this).val()] = $(this).val();
}) 
```

我想为此使用 JS 对象，但是如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T12:27:42.390

```
var arr = {};
$('input').each(function(){
    ... 
```

这就是你所需要的。在 JavaScript 中，数组 ( `new Array()`or `[]`) 具有连续的索引，而对象 ( `new Object()`or `{}`) 具有任意属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T12:50:40.107

这本来是不可能通过数组实现的，但是有一种方法可以通过 JS 对象来实现

```
var person = { country: 'Pakistan' }; 
```

现在这是一个对象，你会看到这两个语句都给出了相同的结果。

```
alert( person.country );
alert( person['country'] ); 
```

现在这意味着它实际上是对象，但它也像数组一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T12:27:52.287

只需使用对象而不是数组：

```
var obj = {};
$('input').each(function() {
    obj[$(this).val()] = $(this).val();
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T12:28:19.877

```
var obj = {};
$('input').each(function(){
   obj[$(this).val()] = $(this).val();
}); 
```

基本上就是这么简单。在此之后，您可以通过`obj[value]`或访问它们`obj.value`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T12:28:32.203

使用对象而不是数组

```
var arr = {}; 
```

# android - 我无法在 SDK 管理器中下载 Android 许可示例

> ID：11845957
> 
> 赞同：0
> 
> 时间：2012-08-07T12:26:04.693
> 
> 标签：android, android-lvl

我没有看到 Android 许可示例 ![在此处输入图像描述](../Images/332a96fe11223bf68db2c592f020c650.png)

左侧是它的外观。我的 SDK 在右侧。那里没有许可样本。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:28:54.087

试试这个：

选择“包”菜单，然后选择“重新加载”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:34:28.593

此外，您可能想要选择显示更新/新软件包并显示已安装的软件包。

顺便提一句。我认为它现在被称为 Google Play 而不是 Google Market。

# c# - 基于cookie设置从asp c#脚本发送pdf

> ID：11845958
> 
> 赞同：0
> 
> 时间：2012-08-07T12:26:04.950
> 
> 标签：c#, asp.net

我只想允许基于 cookie 设置下载 pdf。我找到了一个发送 pdf 文件并希望向其添加 cookie 检查的 asp 脚本。我无法找出正确的语法来让它工作。

此代码发送pdf罚款：

```
 <%@ Page Language="C#" %>
<%
        Response.ContentType = "application/pdf";
        Response.Clear();
        Response.TransmitFile("test.pdf");
        Response.End();        
%> 
```

我添加了这个 cookie 检查，但我不断收到运行时错误：

```
<%@ Page Language="C#" %>
<%
HttpCookie mycookie = Request.Cookies["CHECK"];
if (mycookie != 'ok') {
 Response.Write('<html><body>you cannot see this pdf');
} else {
 Response.ContentType = "application/pdf";
 Response.Clear();
 Response.TransmitFile("test.pdf");
 Response.End();        
} 
```

%>

我做错了什么还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:33:02.950

您需要检查 的值`mycookie`以查看它是否等于“ok”。您正在检查对象是否等于字符串。我假设你得到一个无效的强制转换异常或类似的东西。

你想检查`if(mycookie.Value != 'ok') { ... }`

# sql - 尝试匹配 GROUP_CONCAT 中的多个值

> ID：11845963
> 
> 赞同：1
> 
> 时间：2012-08-07T12:26:25.473
> 
> 标签：sql, group-concat

```
options_table

options_id    | object_id  |   option_value
=========================================
1            |    1       |    drink
2            |    2       |    ice
3            |    1       |    bath
4            |    2       |    soda
5            |    2       |    drink
6            |    3       |    ice
7            |    4       |    bath
8            |    2       |    bath
9            |    1       |    storm

object_table

object_id    |   object_name
=============================
1            |    sun
2            |    moon
3            |    mars
4            |    jupiter 
```

查询

```
SELECT object_table.object_name GROUP_CONCAT(options_table.option_value ) as object_options 
FROM options_table
LEFT JOIN object_table
ON object_table.object_id = options_table.object_id    
GROUP BY options_table.object_id 
```

所以我得到一个结果

```
object_name | object_options
=========================================
moon        | ice, soda, drink, bath
sun         | drink, bath, storm
mars        | ice
jupiter     | bath 
```

假设用户想要所有具有选项“drink”和选项“bath”的对象。所以我只得到这个结果。

```
object_name | object_options
=========================================
moon        | ice, soda, drink, bath
sun         | drink, bath, storm 
```

我如何必须编辑查询才能获得此结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T12:51:53.757

最简单的：[http ://www.sqlfiddle.com/#!2/1b2e3/5](http://www.sqlfiddle.com/#!2/1b2e3/5)

```
select obj.object_name, 
    group_concat(opt.option_value order by opt.options_id) as object_options
from options_table opt
join object_table obj using(object_id)
group by obj.object_id
having sum(opt.option_value in ('drink','bath')) = 2
order by obj.object_name; 
```

输出：

```
| OBJECT_NAME |      OBJECT_OPTIONS |
-------------------------------------
|        moon | ice,soda,drink,bath |
|         sun |    drink,bath,storm | 
```

* * *

如果您想要更多 ANSI-SQL'y 方式进行查询，请不要依赖 MySQLism（布尔/整数对偶性），而是在 SUM 上使用显式值：[http ://www.sqlfiddle.com/#!1/14cf4 /1](http://www.sqlfiddle.com/#!1/14cf4/1)

```
select obj.object_name, 
    array_agg(opt.option_value order by opt.options_id) as object_options
from options_table opt
join object_table obj using(object_id)
group by obj.object_id, obj.object_name
having sum(case when opt.option_value in ('drink','bath') then 1 end) = 2
order by obj.object_name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:57:02.763

另一种方法：

```
SELECT object_name, object_options FROM   
  (SELECT object_table.object_name, 
          GROUP_CONCAT(options_table.option_value ) as object_options
   FROM options_table
   LEFT JOIN object_table
     ON object_table.object_id = options_table.object_id    
   GROUP BY options_table.object_id) t   
WHERE FIND_IN_SET('drink', object_options)> 0 AND  FIND_IN_SET('bath', object_options)> 0 
```

# c#-4.0 - c#泛型错误：方法的类型参数'T'的约束......？

> ID：11845964
> 
> 赞同：14
> 
> 时间：2012-08-07T12:26:25.293
> 
> 标签：c#-4.0, generics, entity-framework-4

收到以下错误：

> 错误 1`T`​​方法
> “ `genericstuff.Models.MyClass.GetCount<T>(string)`”的类型参数“ ”的约束必须与接口方法“ ”的类型
> 参数“ ”的约束匹配。考虑 改用显式接口实现。`T``genericstuff.IMyClass.GetCount<T>(string)`

班级：

```
 public class MyClass : IMyClass
 {
     public int GetCount<T>(string filter)
     where T : class
       {
        NorthwindEntities db = new NorthwindEntities();
        return db.CreateObjectSet<T>().Where(filter).Count();
       }
 } 
```

界面：

```
public interface IMyClass
{
    int GetCount<T>(string filter);
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-07T12:29:01.217

您将 T 泛型参数限制为实现中的类。您的界面没有此限制。

您需要将其从您的类中删除或将其添加到您的界面以让代码编译：

由于您正在调用[需要类约束](http://msdn.microsoft.com/en-us/library/dd383062.aspx)`CreateObjectSet<T>()`的方法，因此您需要将其添加到您的界面中。

```
public interface IMyClass
{
    int GetCount<T>(string filter) where T : class;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T12:29:15.523

您要么需要将约束也应用到接口方法，要么将其从实现中删除。

您正在通过更改实现的约束来更改接口合同 - 这是不允许的。

```
public interface IMyClass
{
    int GetCount<T>(string filter) where T : class;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T12:30:42.277

你也需要约束你的界面。

```
public interface IMyClass
{
    int GetCount<T>(string filter) where T : class;
} 
```

# c# - 使用多个包含语句优化实体框架查询

> ID：11845970
> 
> 赞同：1
> 
> 时间：2012-08-07T12:26:44.760
> 
> 标签：c#, sql-server, performance, entity-framework

我正在尝试优化执行大约需要 6 秒的查询。

```
string[] filters = ...;   

var data =
   (from n in ctx.People
        .Where(np => np.IsActive)
    let isFilterMatch = filters.All(f => n.FirstName.ToLower().Contains(f) ||
                                         n.Prefix.ToLower().Contains(f) ||
                                         n.MiddleName.ToLower().Contains(f) ||
                                         n.LastName.ToLower().Contains(f) ||
                                         n.Information.Email.ToLower().Contains(f) ||
                                         (n.Address!= null &&
                                          (SqlFunctions.StringConvert((double)n.Address.Number).
                                               Contains(f) ||
                                           n.Address.Street.ToLower().Contains(f) ||
                                           n.Address.ZipCode.ToLower().Contains(f) ||
                                           n.Address.City.ToLower().Contains(f))))
    where isFilterMatch
    orderby n.LastName
    select n
    ).Take(numberOfItems).ToList(); 
```

这是一个搜索对话框的查询。用户可以输入任何文本，然后它将搜索与输入匹配的人。我们将用户输入拆分为一个字符串数组，然后在 Person 字段上执行 Contains。由于过滤器数组，无法预编译查询。

如何优化此功能？我听说过诸如 Sql Server 上的 FullTextSearch 或存储过程之类的东西。那能帮上忙吗？

我们正在使用 Sql Server 2008、Entity Framework 4.0（模型优先）和 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:39:21.840

我不会为此搜索查询使用 SQL 查询/Linq 查询。文本搜索的普通查询可能会很慢，并且只返回准确的结果；他们不纠正拼写/语法错误等。

您可以考虑使用 SQL Server 的“全文搜索”功能；但由此产生的性能可能仍然很差。请参考[http://www.sql-server-performance.com/2010/full-text-search-2008/](http://www.sql-server-performance.com/2010/full-text-search-2008/)。

我建议使用像 Apache Lucene 这样的搜索索引器（在 Lucene.NET 中作为 dll 提供）。另一种选择是编写自己的 Windows 服务来索引所有记录。

# mysql - 为什么我在这个 if 语句上出现错误？

> ID：11845975
> 
> 赞同：0
> 
> 时间：2012-08-07T12:27:04.933
> 
> 标签：mysql

```
select if
(
(min(student_number)>1) or (max(student_number)<5500),'ok','Check Students'
)
from students; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:41:16.567

您应该替换`OR`By `AND`：

```
select if
(
(min(student_number)>1) and (max(student_number)<5500),'ok','Check Students'
)
from students; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:34:23.037

尝试这个：

```
select if(min_sn > 1 or max_sn < 5500, 'ok', 'Check Students')
from (select 
        min(student_number) as min_sn,
        max(student_number) as max_sn
      from students) x 
```

这也将表现得相当好。

注意：似乎几乎可以肯定您应该在测试中使用`and`而不是。`or`想一想...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:47:28.420

如果您想测试它是否在某个范围内，还有第三种选择。之间使用。

select if(student_number between 1 and 5500, 'Ok', 'Check Students') from students;

只要您的表中有任何行 - 这将起作用。如果没有行，那么您将得到一个空集。

# git - git pull 后要提交什么？

> ID：11845976
> 
> 赞同：2
> 
> 时间：2012-08-07T12:27:05.337
> 
> 标签：git, tortoisegit

我使用 SVN 已经有一段时间了，现在正在一个项目中使用 Git。在完成 git pull 后解决冲突后，我不确定该怎么做。顺便说一句，我正在使用乌龟 GIT。

所以在大多数情况下，我可以先提交，然后拉，它会自动合并，我可以继续推送。但是，如果有冲突，它会要求我解决冲突。我使用内置的 tortoiseGit 工具来做到这一点。然后它要求我提交，我得到项目中每个修改文件的大列表。

现在，其中许多是本地更改，永远不应该提交。但我读了这个 git 博客：[http](http://randyfay.com/node/89) ://randyfay.com/node/89，更具体地说：

> Tortoise Git 的一位用户会执行拉​​取操作，遇到合并冲突，解决合并冲突，然后在提交结果时仔细查看要提交的文件列表。那里有很多文件，他知道合并冲突只涉及几个文件。对于他的提交，他取消了他未参与的所有其他文件更改的检查，提交了结果并推送了提交。

我怎么知道我必须选择和提交哪些文件现在搞砸了 git 存储库的状态？

编辑：这很好地总结了它，发生在我身上的事情，我们修复了，但我们需要了解如何在未来预防。

> 当有几个人提交时......我将他们的工作放到我的工作中，默认情况下会自动合并。我必须把那个合并提交推回去，不要把它搞砸，否则事情会变糟。
> 
> 我所描述的情况发生在发生自动合并的拉动时。大多数合并（通常会发生）是成功的。但是有一点矛盾。冲突得到了解决。但是在这种情况下，开发人员并没有提交所有其他的东西（成功合并并自动添加到索引中。）。他只承诺他已经解决的事情（他理解）。他不知道他对所有其他已成功合并并添加到他的索引的合并内容负责。这就是这场灾难的故事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:41:53.003

**EDIT2：**我想我已经赶上了。听起来人们在`push`没有先在本地进行回归测试的情况下进行更改，或者进行回归测试并且只暂存最初有冲突的文件。那很不好。 `git commit -a`?

听起来也没有足够的分支，并且当前的工作流程让每个人都向同一个 repo 提交了非常不同的、非规范化的工作。如果您因错误的合并而浪费时间，请配置项目，以便开发人员在必要时不会进行交互。从您问题中链接的文章中：

> 第二种选择由 Github 推广或采用，并被 Linux Core 项目（Git 的来源）广泛使用。在这种情况下，您不会让多个维护者推送到权威存储库上的重要分支。

所以也许我错过了一些东西。

[这篇关于分支工作流](http://nvie.com/posts/a-successful-git-branching-model/)的文章可能是一本不错的读物。

**编辑：**啊，通过编辑，也许您正在争论基于`fetch`ing 的工作流程，因为[您链接文章的第一个评论者遇到了](http://randyfay.com/comment/686#comment-686).

[“git pull”和“git fetch”有什么区别？](https://stackoverflow.com/questions/292357/whats-the-difference-between-git-pull-and-git-fetch)

如果您说有时信息不充分的合并可能会无意中误合并好的代码，那么您是对的。合并有时是一门艺术，通常需要直接干扰其他开发人员以配对合并更改。（我喜欢先浏览[git blame](http://www.kernel.org/pub/software/scm/git/docs/git-blame.html)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:40:25.127

我想首先，您应该只提交您编辑的文件，您可能应该知道它们是什么。

即使我不知道 TortoiseGit 可能有一个历史功能，您也可以确定哪些文件在上次提交中被修改。

对于将来，我建议您在存储库的本地副本的基础上创建一个 .gitignore 文件，并列出您知道永远不会提交的所有文件（例如 .project、.settings 和类似的东西，包括 . .gitignore)。事实上，Git 会扫描您的文件系统以了解哪个文件被更改，但有时它并没有用处。

如果您需要更多信息：[http ://www.kernel.org/pub/software/scm/git/docs/gitignore.html](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)

# xquery - 如何提高 Marklogic 中的 xdmp:document-filter() 性能？

> ID：11845977
> 
> 赞同：1
> 
> 时间：2012-08-07T12:27:08.383
> 
> 标签：xquery, marklogic

我正在使用`xdmp:document-filter(doc())`从文档（doc、docx、pdf 等）中提取元数据。我们使用它是因为它适用于所有类型的文档格式并为每种类型的文档生成**XHTML格式。**但是这个命令的主要缺点是它会减慢查询速度。如果数据库中有一个或两个文档，则查询工作正常，但如果有更多文档（例如 10 或 15 个），则查询速度会变慢。我们想从数据库中所有文档的元数据中提取和显示信息。

我们正在使用这个查询：-

```
for $d in fn:doc()
return xdmp:document-filter(doc(fn:base-uri($d))) 
```

有什么方法可以让这个查询更快地工作，或者有什么替代方法`xdmp:document-filter()`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:43:19.980

通常`xdmp:document-filter()`在 ETL 时使用。如果您使用 Information Studio 加载内容，则可以添加“过滤文档”转换。您可以选择将提取的元数据存储为单独的 xhtml 文档或文档属性。这样他们就不需要在每次请求时动态计算。

！

# jquery - 饼高图jquery中的动态数据

> ID：11845979
> 
> 赞同：0
> 
> 时间：2012-08-07T12:27:15.617
> 
> 标签：jquery, dynamic, charts, highcharts, pie-chart

我正在使用高图表将饼图绘制为流

这就是我给静态数据的方式这个itemdata应该动态加载数组 **静态初始化**

```
var itemdata = [
                      ['aloogobi', 42.0],
                      ['pannermakhani', 26.8],
                      {
                          name: 'Cholle',
                          y: 14.8,
                          sliced: true,
                          selected: true
                      },
                      ['mattuerpaneer', 6.5],
                      ['Jaipuri', 8.2],
                      ['Kolapuri', 0.7]
                  ]; 
```

我给动态如下

```
 for(var i=0;i<categoryGroup.length;i++){
     var temp=[categoryGroup[i][1],7.5];
     itemdata=itemdata+[temp]+',';
} 
```

这里 categoryGroup 是我要填写图表的数组，在这个 foor 循环之后，我在饼图中使用它，如下所示，但它向我显示最后一个值，并在图表中显示最后一个值的单个字母，如下所示

![在此处输入图像描述](../Images/e6f99164c642255e2fa8c294b9829d26.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:56:35.900

使用`itemdata.push(temp);`而不是`itemdata=itemdata+[temp]+',';`

# ios - 信用卡扫描仪

> ID：11845981
> 
> 赞同：0
> 
> 时间：2012-08-07T12:27:21.147
> 
> 标签：ios, xcode, ocr, photo, scanning

我想在我的应用程序中实现信用卡扫描仪。我遇到了[https://www.card.io/](https://www.card.io/)，这正是我正在寻找的东西，但它不是免费的。另外，我不想与远程服务器通信信息。你知道任何可以扫描信用卡并从照片中提取卡号和有效期的开源库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:34:59.987

您可以使用计算机视觉的*OpenCV*库来处理图像并“隔离”图像中存在数字的部分。之后，您可以使用*Tesseract*，一个由 Google 维护的优秀 OCR 引擎来“读取”图像中的数字；这两个库都是开源的。

存在两个库的预编译版本，您可以轻松地将其作为静态库包含在 Xcode 项目中。

# c++ - 为什么当我删除 std::vector 的成员时我的程序崩溃

> ID：11845984
> 
> 赞同：0
> 
> 时间：2012-08-07T12:27:26.287
> 
> 标签：c++, stl

我有一个像下面这样的向量

```
vector<unsigned int> myvector;
vector<unsigned int>::iterator it;

//fill it 
for (i=1; i<=10; i++) myvector.push_back(i);

//I want delete first one 
it = myvector.begin();
myvector.erase(it++);

//I want to know if I am in last element
if(it != myvector.end()) 
      cout << "a test"; 
```

但在比较表达式中，我的程序崩溃了。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T12:30:36.810

简单来说，因为在调用 之后`erase()`，所有指向向量中被擦除位置或后面位置的迭代器都是无效的。例如，请参阅[此处](http://www.cplusplus.com/reference/stl/vector/erase/)以获取有关此内容的官方文档。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T12:30:58.283

因为`erase()`在擦除点和之后使迭代器无效。

OTOH，返回值是一个迭代器，它指向擦除后的元素，所以你可以这样做：

```
it = myvector.erase(it);
if (it == myvector.end()) { ... } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T12:34:34.053

你不应该在擦除它时增加'i'，因为擦除返回下一个有效的迭代器

我认为这可能会回答您的问题

[https://stackoverflow.com/a/4645727/623546](https://stackoverflow.com/a/4645727/623546)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T12:32:21.937

被擦除元素的位置和向量末尾之间的迭代器被`erase()`. 见[这里](http://en.cppreference.com/w/cpp/container/vector/erase)。

# eclipse - 如何在 Eclipse 中的任何地方获得“for loop”的内容帮助？

> ID：11845995
> 
> 赞同：7
> 
> 时间：2012-08-07T12:28:18.300
> 
> 标签：eclipse

在 Eclipse 中，在这样一行之后：

列表列表 = 新的 ArrayList();

在下方键入“for”，然后输入“ctrl-space”（默认情况下），将带来几个有助于完成此“for 循环”的选项： ![协助](../Images/8e77099e619cf5edac18b185bb26a57c.png)

但是如果变量“list”声明的离这里很远（例如作为一个类字段），可能不能直接从这个上下文中推断出来，或者声明了很多列表，那么辅助就不能很好地工作：

![不行](../Images/9694f2b4ec2de3cb2360ff335a51fa53.png) @@分割线---

![在此处输入图像描述](../Images/fa5fc5fcde82588f4550faf7f17356f4.png)

在某些情况下，Eclipse 可以提供帮助，但不适用于成员变量。例如，手动键入“another”并在“：”之后回车并没有说服 Eclipse 猜测它....

（PS可行案例：

自动猜测

![自动猜测](../Images/2ae91c343ccb2b0fc947ea1a69b1dd5b.png)

输入想要的名字，然后ENTER，效果很好

![输入想要的名字，然后ENTER，效果很好](../Images/6cf61f8b3ceab16cfae01cc5a21d0172.png))

有没有人有任何提示可以使这种帮助在这种情况下发挥作用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-11T10:41:28.707

我遵循了 Ashutosh Jindal 的提示，并设法配置了有效的模板（使用 Kepler 版本进行了测试）。这里是：

```
for (${iterable_type:elemType(iterable)} ${iterable_element:newName(iterable_type)} :  ${iterable:var(java.lang.Iterable)}) {
    ${cursor}
} 
```

要点是在模板定义中将**localVar**更改为**var （** [Eclipse 文档](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/concepts/concept-template-variables.htm)清楚地解释了这一点）。

如何使用它：

1.  打印模板名称（默认模板为**foreach**），然后按 Enter。该模板将与 Eclipse 选择的默认集合一起使用（声明的最新集合）
2.  按 T​​AB 两次跳转到集合元素。您将获得包含所有适用的可迭代集合的下拉列表。
3.  使用向上/向下箭头选择所需的集合，按 Enter。Eclipse 将调整元素类型和名称（非常酷）。

[点击查看截图](http://i.stack.imgur.com/g2jrS.png)

这几乎与 Intellij 模板一样好。缺点是：

*   模板不包括数组（与默认的**foreach**模板相反）。对于数组，您必须定义另一个模板。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T12:59:41.523

我自己没有尝试过，但是看一下代码模板定义。例如，`foreach`代码模板在 Preferences -> Java -> Editor -> Templates 中定义如下：

![foreach的定义](../Images/77a78ae6df83fc0a13a7bac4f0e4c1b8.png)

定义如下：

```
for (${iterable_type} ${iterable_element} : ${iterable}) {
    ${cursor}
} 
```

注意正在使用的变量，例如`iterable_type`.

现在看看**[这个](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/concepts/concept-template-variables.htm)**Eclipse 帮助页面。

那里有一个变量，`${id:localVar(type[,type]*)}`其描述如下：

```
Evaluates to a local variable or parameter visible in the current scope that is a subtype of any of the given type. If no type is specified, any non-primitive local variable matches.
${array} is a shortcut for ${array:localVar(java.lang.Object[])}, but also matches arrays of primitive types.
${collection} is a shortcut for ${collection:localVar(java.util.Collection)}.
${iterable} is a shortcut for ${iterable:localVar(java.lang.Iterable)}, but also matches arrays. 
```

相同的屏幕截图：

![多变的](../Images/82727e5a22cc722462ae9cb536052b09.png)

我相信，如果您想增加`foreach`模板推断其变量的范围，您可能必须使用适当的变量编辑模板定义。

让我知道这是否有帮助。不幸的是，我之前没有深入研究过代码模板的编辑，所以无法给出具体的例子。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T15:53:21.710

我通常用 for 循环解决内容辅助的方法如下：

*   通过键入上面声明的集合变量和分号来创建局部变量：

    ```
    list; 
    ```

*   按 Ctrl+2 L

*   Eclipse 生成一个新的局部变量声明，如下所示：

    ```
    List list2 = list; 
    ```

*   键入我的 foreach 并使用 Ctrl+space 自动完成，得到以下信息：

    ```
    List list2 = list;
    for (Object object : list2) {
    } 
    ```

*   将光标放在 for 循环声明中的 list2 上，然后按代表内联变量的 Alt+Shift+I。

*   这会导致您想要实现的目标。经过一些练习后，努力是最小的：

    ```
    for (Object object : list) {
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-11T10:29:48.697

多年后，如果您输入字段/变量的名称，您可以按快速修复 (⌘+1)，在快速修复菜单中，您可以为集合或数组选择不同类型的 for 循环。 [![使用 Quick Fix 自动生成 for 循环](../Images/7acb3e8ff191462a301c7b6c0b7f4353.png)](https://i.stack.imgur.com/7AyMC.png)