# StackOverflow 问答 11071000-11071999

# javascript - 在页面加载时触发 div

> ID：11071000
> 
> 赞同：1
> 
> 时间：2012-06-17T11:35:36.273
> 
> 标签：javascript, jquery

我一直在尝试将页面的滚动设置为某个 div。请让我知道我该怎么做。以下是我的代码，其中 li 中的每个选项都移动到某个 div 。我试过这个 $("#header3").click(); 在 doucument.ready 函数中，但它不起作用。

请帮忙！

```
<ul id="navigation">

            <LI><A class="home selected-lice"href="#header">Home</A></LI>

            <LI><A  href="#header4">Partners</A></LI>

                <LI><A class="about" href="#header5">About Us</A></LI>

            <LI><A class="contact" href="#header6">Contact Us</A></LI>

        </ul><!-- end of #navigation --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:39:41.343

*或者*，您可以使用它在页面加载时滚动到带有*动画的**特定*元素：

 *```
$(function(){
   $('html, body').animate({ scrollTop: $("#header1").offset().top });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T11:44:26.757

检查此链接： [http ://css-tricks.com/snippets/jquery/smooth-scrolling/](http://css-tricks.com/snippets/jquery/smooth-scrolling/)

或尝试通过滚动覆盖通常的锚点行为。像这样：

```
$(function(){
  $('a[href^=#]').click(function(e){
    var name = $(this).attr('href').substr(1);
    var pos = $('a[name='+name+']').offset();
    $('body').animate({ scrollTop: pos.top });
    e.preventDefault();
  });
}); 
```*

# python - 在Django中制作数据库中对象的修改副本的最简洁方法是什么

> ID：11071001
> 
> 赞同：2
> 
> 时间：2012-06-17T11:35:41.140
> 
> 标签：python, django

假设我的项目中有一个模型`ArticleVersion`，定义为：

```
class ArticleVersion(models.Model):  

    article = models.ForeignKey(Article)
    version = models.PositiveIntegerField()
    content = models.TextField()
    created = models.DateTimeField(auto_now_add=True)
    media_type = models.ForeignKey(MediaType)
    author = models.ForeignKey(User, null=True) 
```

当用户填写此模型的表单时，我检查表单中的版本内容是否不同，如果不同，我创建一个新版本。实际上现在它看起来像这样

```
 if self.old_content != updated_version.content:
        # create new version if content is different
        updated_version = self.article.articleversion_set.create(
            article=self.article,
            version=self.article.latest_version.version + 1,
            content=updated_version.content,
            media_type=updated_version.media_type,
            author=updated_version.author
        ) 
```

但是，如果我在模型中放置更多字段，那就太冗长了。我想知道有没有办法在 Django 中更简洁地做这些事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T11:40:29.170

您可以设置`article.pk`为`None`，当您保存时，将创建一个新条目。

# android - android backgorund 在 hdpi 中看起来不错，但是 mdpi 和 ldpi 会扭曲它

> ID：11071003
> 
> 赞同：1
> 
> 时间：2012-06-17T11:36:47.820
> 
> 标签：android, background, distortion

我为我的应用程序创建了一些背景。这些 PNG 图片是 480x800 格式，在我的手机（使用 hdpi res）或在 hdpi 的模拟器上测试它看起来非常好。但是如果我在 mdpi 或 ldpi 中测试它，背景就会扭曲。由于 480x800 等于 1:1.666，mdpi 格式是 320x480 和 1:1.5，ldpi 是 240x320 和 1:1.333，因此背景自然不会完全适合所有尺寸。我可以使用 sharedPreferences 更改背景，因此我不能为此使用布局。我不想将更多图像放入应用程序，因为它已经 3 兆字节（背景为 2 兆字节）。我应该如何解决这个问题？我是否应该将所有背景放入具有较小分辨率的应用程序（hdpi 为 120x200，mdpi 为 100x150 ......）并且屏幕会自行拉伸它？恐怕会模糊。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:59:12.637

也许您可以尝试使用 9-patch 图像。如果这对您的背景图像当然是可能的。 [http://developer.android.com/guide/developing/tools/draw9patch.html](http://developer.android.com/guide/developing/tools/draw9patch.html)

# jquery - 绑定图片加载错误

> ID：11071005
> 
> 赞同：2
> 
> 时间：2012-06-17T11:36:59.410
> 
> 标签：jquery, image, onerror

[有没有办法在更改图像的 src 后绑定到图像的 load() 事件？](https://stackoverflow.com/questions/3800110/is-there-a-way-to-bind-to-the-load-event-of-an-image-after-changing-its-src)2 岁

[如何使用 jquery 删除未来损坏的图像](https://stackoverflow.com/questions/8440704/how-to-remove-future-broken-image-using-jquery)尚未成功回答

**注意：**我完全知道如何处理无法加载的图像，因为它正在加载 - 我可以添加一个占位符图像，然后在同一个循环中分配 onerror 处理程序，我正在分配实际的 src，就像[这个 DEMO](http://jsfiddle.net/mplungjan/PrQ2Q/)

我正在尝试运行一页图像并处理已经失败的图像（不是最佳的），或者在页面加载之前让 jQuery 在给定的选择器中绑定所有 img.onerror（更好的解决方案）

所以我想到了ON：

[演示](http://jsfiddle.net/mplungjan/4etet/)

```
$("figure img").on("error",function () {
  console.log("error")  
  $(this).parents(".content-holder").removeClass("p-alt");
  $(this).parents("figure").remove();
}); 
```

但这不起作用 - 没有删除任何内容，控制台中也没有任何内容。

我看过 naturalWidth，但并非所有浏览器都支持

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:05:15.590

如何将事件绑定到当时不存在的元素？`$("figure img")`不选择任何内容，因为页面上尚不存在这些元素。

# html - 站点背景图像的最大文件大小应该是多少？

> ID：11071008
> 
> 赞同：2
> 
> 时间：2012-06-17T11:37:25.590
> 
> 标签：html, css, image, optimization, load-time

我目前正在开发的网站经过优化后有一个250k的背景图片。它是从 CDN 提供的，但显然这太大了，但在我去找设计师并要求她重新制作图像之前，我应该建议图像不大于什么文件大小？

PS这是视频网站，主要演示是通过宽带连接的年轻人。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-17T13:18:18.073

您可以使用 Photoshop 减小图像大小...只需将该图像保存为“保存为 Web 或设备...”

# c++ - Visual C++，具有缩放、快照和捕获功能的 2D 绘图画布类

> ID：11071009
> 
> 赞同：0
> 
> 时间：2012-06-17T11:37:40.563
> 
> 标签：c++, visual-c++, graphics, 2d

我偶尔会开发科学模拟软件，并希望在 2D 视图上可视化结果。

是否有任何现成的（最好是开源的）Win32 类创建一个绘图画布

1.  飞涨，
2.  快照和
3.  可能是视频捕捉能力？

我需要有限的 API，包括快速像素绘制、从内存缓冲区绘制 bmp 和可能的文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:59:31.357

一起看 Qt 和 OpenGL。这是我经常使用的一些代码，可能对您有所帮助

```
//piview.h
#include <QGraphicsView>
#include <QGraphicsScene>

class PiView : public QGraphicsView{
    Q_OBJECT

  public:
    explicit PiView(QGraphicsScene * =0, QWidget *parent = 0);
    void enableSmoothRendering();
    void enableOpenGl();
    void fit();
    void renderToFile(QString const& path)const;

private:
    //void mouseMoveEvent(QMouseEvent *event);
    virtual void mousePressEvent(QMouseEvent *event);
    virtual void wheelEvent(QWheelEvent *event);
    virtual void resizeEvent(QResizeEvent * event );

  signals:
    void pointRightClicked(QPointF) const;
    void pointLeftClicked(QPointF) const;
};
PiView* createMyPiView(QGraphicsScene* pScene);

//piview.cpp
#include "piview.h"

#ifdef OPENGL
#include <QtOpenGL>
#include <QGLWidget>
#endif

#include <QMouseEvent>
#include <QWheelEvent>

#include <qdebug.h>

PiView::PiView(QGraphicsScene* scene, QWidget *parent) : QGraphicsView(scene , parent){
  this->setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOn);
  this->setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOn);
  this->setDragMode(QGraphicsView::ScrollHandDrag);
}

void PiView::enableSmoothRendering(){
  this->setRenderHints(QPainter::Antialiasing|QPainter::TextAntialiasing|QPainter::SmoothPixmapTransform);
}

#ifdef OPENGL
void  PiView::enableOpenGl(){
  QGLFormat fmt = QGLFormat::defaultFormat();
  fmt.setSampleBuffers(true);
  fmt.setDoubleBuffer(true);
  //fmt.setSamples(256);
  fmt.setDirectRendering(true);
  //qDebug() << "SampleBuffers:" << fmt.sampleBuffers() << fmt.samples();
  this->setViewport(new QGLWidget(fmt));
  this->setViewportUpdateMode(QGraphicsView::FullViewportUpdate);
  this->setCacheMode(QGraphicsView::CacheBackground);
  //this->scene()->setItemIndexMethod(QGraphicsScene::NoIndex);
}
#else
void PiView::enableOpenGl(){
  qDebug() << "Opengl was not enabled, enable it using opengl as qmake parameter";
}
#endif

void PiView::mousePressEvent(QMouseEvent *event){
  if (event->button()==Qt::RightButton) {
    emit pointRightClicked(mapToScene(event->pos()));
  }
  else if (event->button()==Qt::LeftButton) {
    emit pointLeftClicked(mapToScene(event->pos()));
  }
  QGraphicsView::mousePressEvent(event);
}

//Zooming using the mousewheel
void PiView::wheelEvent(QWheelEvent *event){
  double scaleFactor = 1.15; //How fast we zoom
  if (event->orientation()==Qt::Vertical){
    if(event->delta() > 0) {
      //Zoom in
      scale(scaleFactor, scaleFactor);
    } else {
      //Zooming out
      scale(1.0 / scaleFactor, 1.0 / scaleFactor);
    }
  }
  else if (event->orientation()==Qt::Horizontal) {
    if(event->delta() > 0) {
      scroll(10,0);
    }
    else {
      scroll(-10,0);
    }
  }
}

void PiView::resizeEvent(QResizeEvent *event){
  this->fit();
  QGraphicsView::resizeEvent(event);
}

void PiView::fit(){
  this->fitInView(this->sceneRect(),Qt::KeepAspectRatio);
}

PiView* createMyPiView(QGraphicsScene* pScene){
  PiView* view = new PiView(pScene);
  view->enableOpenGl();
  view->enableSmoothRendering();
  return view;
} 
```

对于快照，请查看以下内容：

```
void SceneInteractor::saveSelection(){
  if (mpScene->selectedItems().isEmpty()) return;
  QList<QGraphicsItem*> items(mpScene->selectedItems());
  QRect sourceRect;
  boostForeach(QGraphicsItem*  item, items) {
    sourceRect = sourceRect.united(item->sceneBoundingRect().toRect());
  }
  QImage img(sourceRect.size(),QImage::Format_ARGB32_Premultiplied);
  img.fill(Qt::transparent);
  QPainter p(&img);
  p.setRenderHint(QPainter::Antialiasing);
  QGraphicsView::CacheMode cache = mpView->cacheMode();
  mpView->setCacheMode(QGraphicsView::CacheNone);
  mpView->scene()->clearSelection();
  mpView->scene()->render(&p, QRectF(), sourceRect);
  p.end();
  QString path = QFileDialog::getSaveFileName(0,tr("Choose Image-File Destination"));
  img.save(path,"PNG",100);
  mpView->setCacheMode(cache);
} 
```

# iphone - ios 5.1.1 上的任何应用程序在 xcode 4.3.3 上崩溃

> ID：11071011
> 
> 赞同：0
> 
> 时间：2012-06-17T11:38:27.760
> 
> 标签：iphone, ios, xcode, crash, ios-simulator

在模拟器上运行的每个应用程序一开始都会在我的设备上崩溃。即使它只是一个空白应用程序。而且 xcode 不会停止调试，也不会显示任何日志。我没有开发人员 ID，所以我只是绕过了代码签名，但我认为这不是由它引起的。尝试了不同的构建设置，但没有任何帮助......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T12:01:56.397

你不能只是绕过代码签名，它不会运行。您看到的不是崩溃，而是关闭应用程序的设备。

您需要有效的开发者 ID 和必要的证书才能在设备上进行测试。

但是，您不需要有效的开发人员 ID 即可在模拟器中测试/运行。

# java - 使用 LWJGL 的键盘类时出现 java.lang.StackOverflowError

> ID：11071014
> 
> 赞同：0
> 
> 时间：2012-06-17T11:39:11.140
> 
> 标签：java, keyboard, lwjgl

我一直在尝试在我的游戏中实现键盘类并收到以下异常。这只是一个片段。完整的例外持续了比这更长的时间。

```
Exception in thread "main" java.lang.StackOverflowError
at org.lwjgl.opengl.DisplayMode.<init>(DisplayMode.java:63)
at oregon.client.Oregon.<init>(Oregon.java:10)
at oregon.src.Controller.<init>(Controller.java:9)
at oregon.client.Oregon.<init>(Oregon.java:12)
at oregon.src.Controller.<init>(Controller.java:9)
at oregon.client.Oregon.<init>(Oregon.java:12)
at oregon.src.Controller.<init>(Controller.java:9) 
```

这是主类（oregon.client.Oregon）的代码：

```
package oregon.client;

import oregon.src.Controller;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;

public class Oregon {
    public DisplayMode normal = new DisplayMode(640, 640);

    public Controller controls = new Controller();

    public boolean fullscreen = false;

    public void start() {
        try {
            create();
        } catch (LWJGLException e) {
            stop(e);
        }

        while (!Display.isCloseRequested()) {
            events();
            Display.update();
        }

        Display.destroy();
    }

    public void events() {
        try {
            controls.getInput();
        } catch (LWJGLException e) {
            stop(e);
        }
    }

    public void setFullscreen() {
        try {
            if (!fullscreen) {
                Display.setFullscreen(true);
                fullscreen = true;
            } else if (fullscreen) {
                Display.setDisplayMode(normal);
                fullscreen = false;
            }
        } catch (LWJGLException e) {
            stop(e);
        }
    }

    public void create() throws LWJGLException {
        if (fullscreen) {
            Display.setFullscreen(true);
        } else if (!fullscreen) {
            Display.setDisplayMode(normal);
        }

        Display.create();
    }

    public void stop() {
        System.exit(0);
        Display.destroy();
    }

    public void stop(Exception e) {
        e.printStackTrace();
        System.exit(0);
        Display.destroy();
    }

    public static void main(String args[]) {
        Oregon oregon = new Oregon();
        oregon.start();
    }
} 
```

这是我的键盘类的代码：-

```
package oregon.src;

import oregon.client.Oregon;

import org.lwjgl.LWJGLException;
import org.lwjgl.input.Keyboard;

public class Controller {
    public Oregon oregon = new Oregon();

    public void getInput() throws LWJGLException {
        while (Keyboard.next()) {
            if (Keyboard.getEventKeyState()) {
                if (Keyboard.getEventKey() == Keyboard.KEY_F11) {
                    oregon.setFullscreen();
                }
            }
        }
    }
} 
```

如果有 LWJGL 的专家，你能帮帮我吗？谢谢你，我希望我能得到一些帮助。:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:48:09.253

与 LWJGL 无关。简单代码中的堆栈溢出总是因为意外的无限循环。你有一个：`Controller`尝试创建一个`Oregon`(this line: `public Oregon oregon = new Oregon();)`，然后尝试创建一个`Controller`，它尝试...(等等..)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T11:50:04.353

当你创建一个`Oregon`实例时，它会创建一个`Controller`实例，它创建一个`Oregon`实例，它创建一个`Controller`实例，它创建一个...

您可能应该做的不是`Oregon`在控制器中创建实例，而是将现有实例作为参数传递给`Controller`构造函数并将其存储（或相反）。

伪代码：

```
public Oregon() {
  controller = new Controller(this);
  ...
} 
```

```
public Controller(Oregon oregon) {
  this.oregon = oregon;
  ...
} 
```

# php - 永久保存 cURL cookie

> ID：11071017
> 
> 赞同：1
> 
> 时间：2012-06-17T11:39:22.190
> 
> 标签：php, curl

是否可以永久存储 cookie 以便我可以重复使用它？现在我每次运行脚本来访问需要用户登录的几个页面时都必须重新登录，我想知道是否可以永久存储 cookie，这样我就不必每次都重新登录。

```
$post = $metadata;
$ch = curl_init('login.php');
curl_setopt_array($ch, array(
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_POST => true,
    CURLOPT_POSTFIELDS => $post,    
    CURLOPT_USERAGENT => 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1) Gecko/20090624 Firefox/3',
    CURLOPT_COOKIEFILE => 'cookie.txt',
    // CURLOPT_COOKIE => '',
    CURLOPT_COOKIEJAR => 'cookie.txt'
));
$result = curl_exec($ch);
curl_close($ch); 
```

我指定了一个`cookie.txt`文件，但实际上并没有看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:51:22.983

在设置 CURLOPT_COOKIEFILE 之前创建文件 cookie.txt。

CURLOPT_COOKIEJAR 将为您创建文件，但 CURLOPT_COOKIEFILE 需要一个已创建的文件才能将其作为请求发送。

还要确保您对该文件具有写入和读取权限。

# php - PHP MySQL插入“{$clientname}”作为字符串而不是PHP变量

> ID：11071019
> 
> 赞同：0
> 
> 时间：2012-06-17T11:39:34.730
> 
> 标签：php, mysql, smarty, whmcs

好的，第一个问题就到这里，

在激活我正在编写的模块时运行的函数需要将电子邮件模板放入 MySQL 数据库中。问题是这些是聪明的模板并使用 {$vars}，现在当我在 PHP 中执行此操作时，{$vars} 被解释为 PHP 变量，以便在运行之前放入 sql 查询中。

如何告诉 PHP 不要将“{$var}”解释为变量而是字符串？

这是当前查询：

```
$sqlEmail1 = "INSERT INTO `tblemailtemplates` (`type`, `name`, `subject`, `message`, `attachments`, `fromname`, `fromemail`, `disabled`, `custom`, `language`, `copyto`, `plaintext`)
VALUES ('general', 'IPGeek - Custom Email 1', 'Password Reset', 'Some text that contains {$company_name} among other things', '', '', '', '', '1', '', '', 0)" 
```

这应该是上面创建的电子邮件模板：

```
Some text that contains {$company_name} among other things 
```

但它创建了这个：

```
Some text that contains 
```

任何帮助都会很高兴收到！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T11:40:26.523

> 当用双引号或 heredoc 指定字符串时，会在其中解析变量。
> 
> 注意：与双引号和heredoc 语法不同，特殊字符的变量和转义序列在出现在单引号字符串中时不会被扩展。

使用`'`代替`"`

```
echo '{$var}'; 
```

或逃脱`$`：

```
echo "{\$var}"; 
```

了解更多：[php 字符串](http://php.net/manual/en/language.types.string.php)

**更新**：最小的努力修复只是在`\`之前添加`$`：

```
$sqlEmail1 = "INSERT INTO `tblemailtemplates` (`type`, `name`, `subject`, `message`, `attachments`, `fromname`, `fromemail`, `disabled`, `custom`, `language`, `copyto`, `plaintext`)
VALUES ('general', 'IPGeek - Custom Email 1', 'Password Reset', 'Some text that contains {\$company_name} among other things', '', '', '', '', '1', '', '', 0)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T12:19:09.237

如何正确转义值？

*   [mysql_real_escape_string](http://php.net/mysql_real_escape_string)
*   [mysqli_real_escape_string](http://php.net/mysql_real_escape_string)
*   [PDO::quote()](http://de2.php.net/manual/en/pdo.quote.php)

我打赌你的模板中有 ' （撇号）。如果是这样，它会破坏你的 SQL 语法。

# c# - CompileAssemblyFromDom 抛出 FileNotFoundException

> ID：11071025
> 
> 赞同：2
> 
> 时间：2012-06-17T11:40:22.477
> 
> 标签：c#, .net, windows, visual-studio-2010, codedom

我构建了一个 CodeCompileUnit，下面的代码输出了一个 C# 源代码文件，一个 .dll，我可以从程序集中获取一个实例：

```
TextWriter tw = new IndentedTextWriter(new StreamWriter(filePath + ".cs", false), "    ");
provider.GenerateCodeFromCompileUnit(compileUnit, tw, new CodeGeneratorOptions());
tw.Close();

CompilerParameters cp = new CompilerParameters { GenerateInMemory = true, GenerateExecutable = false};
cp.ReferencedAssemblies.Add("MyProgram.exe");
cp.OutputAssembly = filePath + ".dll";
CompilerResults cr = provider.CompileAssemblyFromFile(cp, filePath + ".cs");

MyType instance = (MyType)Activator.CreateInstance(cr.CompiledAssembly.GetTypes()[0]); 
```

到目前为止，一切都很好。现在我想避免生成这些文件：

```
CompilerParameters cp = new CompilerParameters { GenerateInMemory = true, GenerateExecutable = false};
cp.ReferencedAssemblies.Add("MyProgram.exe");
//cp.OutputAssembly = filePath + ".dll";
CompileResults cr = provider.CompileAssemblyFromDom(cp, compileUnit); 
```

这会引发 FileNotFoundException。它在我的 \temp 文件夹中查找 x32savit.dll（或类似文件），但它不存在。如果我取消注释 OutputAssembly，它会失败，但在该路径上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T23:45:50.990

原来是命名空间的错误。[这里](http://social.msdn.microsoft.com/Forums/en-AU/csharpgeneral/thread/882e2ff9-b5f1-4a77-ba9b-79adbca3e8c4)有一个很好的例子。

在调试时添加以下代码非常有帮助。

```
 string errorText = String.Empty;
  foreach (CompilerError compilerError in compilerResults.Errors)
      errorText += compilerError + "\n"; 
```

# javascript - 在javascript中将事件绑定到时间戳

> ID：11071029
> 
> 赞同：0
> 
> 时间：2012-06-17T11:40:31.483
> 
> 标签：javascript

这是我的问题：

我有一个仅在夜间（21:00 到 24:00 之后）工作`alert()`的`'The website is not available yet'`网站

但要这样做，它必须在伪代码中检查时间：

```
 if (time is less more than 21:00 and less than 24:00) {
     return true;
    } else {
      alert('the website is not available yet');
      e.preventDefault;
      return false;
    } 
```

但我不明白我怎么能在时差方面做到这一点，在**任何**一天，任何提示？

谢谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:42:54.620

```
new Date().getHours() 
```

将返回当前时间（`13`当我在 13:42 写这篇文章时）。然而，这种解决方案有几个缺点：

*   它使用系统时间，更改计算机中的时间会欺骗您的脚本
*   它使用系统时区，考虑`getUTCHours()`
*   可以通过禁用 JavaScript 或动态修改脚本轻松绕过它

因此考虑在渲染页面时从服务器获取时间，**并**在用户进入时在服务器端重复测试（以确保没有绕过检查）。

# asp.net - 无法编辑或删除 ASPxScheduler 约会

> ID：11071032
> 
> 赞同：0
> 
> 时间：2012-06-17T11:40:49.310
> 
> 标签：asp.net, .net, devexpress

我刚开始使用 ASPxScheduler 与 DevExpress 合作，并按照以下页面创建了一个示例自定义约会表格： [http ://documentation.devexpress.com/#AspNet/CustomDocument5464](http://documentation.devexpress.com/#AspNet/CustomDocument5464)

到目前为止，我可以添加一个新约会，但是当我单击它以显示编辑表单（自定义约会表单）或删除它时，什么也没有发生！！！！！！

我在问我是否必须遵循任何其他步骤才能显示编辑表单或删除约会。

谢谢你。

# android - 注销 SensorManager 不起作用

> ID：11071035
> 
> 赞同：2
> 
> 时间：2012-06-17T11:41:08.863
> 
> 标签：android, android-sensors, sensormanager

在我的应用程序中，我使用光和接近传感器来检测手机的口袋功能，然后在检测完成后取消注册 SensorManager。但即使应用程序的 CPU 使用量仅显示 1-2 秒的使用量，电池使用量始终显示我的应用程序为否。列表中的 1 个应用令人担忧。

我已经使用了 SensorManager.unRegisterListener 并且还设置了 SensorManager = null，但情况还是一样。

我读过，由于一些错误，传感器没有正确取消注册。有什么好方法可以正确处理传感器吗？

请指导。奥姆卡尔·盖萨斯

使用来自应用程序的代码示例进行了更新 -

```
@Override
protected void onPause()
{
    super.onPause();
    unHookReceiver();
}

private void unHookReceiver()
{
    if (r != null)
    {
        unregisterReceiver(r);
        if(GetProximityPreference("EnableReceiveByProximity"))
        {
            mySensorManager.unregisterListener(proximitySensorEventListener);
            mySensorManager.unregisterListener(lightSensorEventListener);
            mySensorManager = null;
            FileUtils.appendLog(FileUtils.GetCurrentDateTime() + " Power Consumption Log End");
            FileUtils.appendLog("------------------------------------------------");
        }
        r = null;
    }
} 
```

我还根据 stackpverflow 上一篇文章中的一项建议设置 sensorManager = null，但即使这样也无济于事。尽管调用了清理代码，但电池使用率仍然很高。该应用程序本身不应该使用太多电池，因为它是一个非常简单的应用程序，只有一个广播接收器和一个活动，但在活动中，我调用了光和接近传感器，我怀疑这些会导致电池使用量激增。不知道为什么。

任何帮助都是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T14:35:40.980

```
mSensorManager.registerListener(YourListener.this, mSensorManager
                    .getDefaultSensor(Sensor.TYPE_LINEAR_ACCELERATION),
                    SensorManager.SENSOR_DELAY_NORMAL); 
```

拿这个来注册你的听众......然后工作你的`unregisterListener`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-11T03:12:46.873

只需将此注册代码放入主处理程序，然后它就可以工作了。但我不知道为什么。

```
Handler mainHandler = new Handler(Looper.getMainLooper());
    mainHandler.post(new Runnable() {
        @Override
        public void run() {
            if (mSensorManager != null) {
                mSensorManager.registerListener(sensorEventListener, mProximity, SensorManager.SENSOR_DELAY_NORMAL);
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T14:42:44.647

我能够通过正确匹配侦听器的注册时间和注销时间来解决此问题。也许，最初侦听器没有在所有呼叫条件（来电、去电、未接电话等）中正确取消注册，因此即使活动关闭，侦听器仍在侦听事件，从而不必要地消耗功率。

# python - 如何在 Windows 中使用 2to3 工具？

> ID：11071037
> 
> 赞同：24
> 
> 时间：2012-06-17T11:42:06.460
> 
> 标签：python, python-2to3

我尝试通过运行命令使用 2to3 工具修改 sintax

```
python C:\Python32\Tools\scripts\2to3.py neo4j.py 
```

并得到了输出

![在此处输入图像描述](../Images/213890020361299973ac090340c04215.png)

但是，当打开 neo4j.py 时，我注意到没有任何改变。下面是应该进行更改（根据输出）的代码块：

```
try:
    import json
except ImportError:
    import simplejson as json
try:
    from urllib.parse import quote
except ImportError:
    from urllib import quote
try:
    from . import rest, batch, cypher
except ImportError:
    import rest, batch, cypher
except ValueError:
    import rest, batch, cypher

import logging
logger = logging.getLogger(__name__) 
```

有谁知道如何正确使用 2to3 工具以便将代码移植/更改为 v3.2？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-17T11:45:32.147

您必须使用该`-w`标志来实际编写更改：

```
python C:\Python32\Tools\scripts\2to3.py -w neo4j.py 
```

请参阅[2to3.py 文档](http://docs.python.org/release/3.0.1/library/2to3.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-08T15:35:25.957

*作为已接受答案的补充，*

将此行复制到`C:\python32\Scripts\2to3.bat`：

```
@python %~dp0..\tools\scripts\2to3.py %* 
```

之后你就可以使用

```
2to3 -w neo4j.py 
```

# heroku - Heroku：流氓转移正在进行中

> ID：11071048
> 
> 赞同：22
> 
> 时间：2012-06-17T11:43:37.723
> 
> 标签：heroku, migration, database-migration

昨晚我开始在 Heroku 上进行迁移，几个小时都没有给我任何反馈，最终我停止了迁移，因为不清楚系统是否在做任何事情。

从那以后，这就是一场噩梦。我无法访问 中的相关数据库表`heroku console`，无法迁移、回滚或使用 pgbackups。

有用的是，pgbackups 刚刚给了我一个简单的解释：

```
a transfer is currently in progress 
```

我假设这是我几个小时前尝试执行的迁移。我怎样才能**停止**Heroku 正在做的任何事情，以便我可以快速恢复并重新启动并运行？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-02T13:01:40.277

您可以通过找到备份的名称然后将其销毁来删除卡在“当前正在进行传输”的问题备份。例如

```
heroku pgbackups 
```

我的问题备份是这样列出的：

```
b210 | 2013/01/02 12:29.33 | unknown | DATABASE_URL 
```

所以为了摧毁它，我只是做了：

```
heroku pgbackups:destroy b210 
```

它为我删除了问题备份，因此我可以继续正确使用 pgbackups。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T23:05:14.423

我也刚遇到这个问题。找到了一种更简单的修复方法 - 简单地删除 pgbackups 插件。

```
heroku addons:remove pgbackups
heroku addons:add pgbackups 
```

**警告**如下评论中所述，这将破坏所有现有的备份！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-25T12:54:05.333

我不小心从我的`COLOR_URL`数据库转移到`DATABASE_URL`了同一个数据库。 `heroku pgackups:transfer`让这种情况发生，导致主数据库卡在

```
a transfer is currently in progress 
```

我通过查看进程列表`pg:ps`并终止所有连接来修复它`pg:killall` 这样做之后，查看`pg:ps`进程列表是空的，我可以再次使用主数据库`pgbackups`。

注意这可能是破坏性操作，因此请确保在执行此操作之前拥有快照。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T18:28:04.417

真正的解决方案是联系 Heroku 支持并让他们为您杀死流氓进程。他们说他们正在重新设计 pgbackups 以给予用户更多的控制权。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-21T00:00:13.777

一直不清楚发生了什么——大约一天后，我能够与之交互`heroku console`，但我再也无法运行另一次迁移。这就是我所做的：

1.  将我的应用程序重命名为其他名称。
2.  在其位置创建了一个新应用程序，检查堆栈是否相同，并复制所有附加组件和域。
3.  我从 pgbackups 恢复了数据库（如果你不使用这个插件，强烈推荐）。

这解决了问题。**注意：**请仔细检查您的 pgbackup 不会导致不可接受的数据丢失。

# applescript - AppleScript 无法从 /Library 中删除文件

> ID：11071050
> 
> 赞同：1
> 
> 时间：2012-06-17T11:44:18.223
> 
> 标签：applescript, packagemaker

我写了一个 AppleScript：

1.  检查两个特定的字典（File1 和 File2）文件是否退出`/Library/Dictionaries/`
2.  如果两个文件中的任何一个存在，则完全删除该文件和另一个

该脚本在 AppleScript 编辑器中运行良好。然后我将脚本保存为应用程序，对其进行测试，该应用程序也可以正常工作。我的意思是 AppleScript 编辑器中的脚本和保存的应用程序都检测并从`/Library/Dictionaries/`.

然而，在 PackageMaker Post Action 中，调用时，应用程序既不会删除 File1 也不会删除 File2，尽管它会检测到它们，甚至会显示对话框消息（请参见下面的代码行）。

这是代码：

```
tell application "System Events"
  if exists (application process "Dictionary") then
    tell application "Dictionary" to quit
end if
    end tell
try
    set theOtherFile1 to POSIX file "/Library/Dictionaries/File1.dictionary"
    set theOtherFile2 to POSIX file "/Library/Dictionaries/File2.dictionary"

tell application "Finder"
    if exists file theOtherFile1 then
        display dialog "File1/File2 exits. Do you want to remove it?" with title "Note" buttons {"No", "Yes"} default button "Yes"
        if the button returned of the result is "No" then
            delay 2
        else
            do shell script "rm -R /Library/Dictionaries/File1.dictionary" with administrator privileges
            do shell script "rm -R /Library/Dictionaries/File2.dictionary" with administrator privileges

        end if
    end if
end tell
end try

delay 5
tell application "Dictionary" to activate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:56:56.040

尝试这个：

```
tell application "System Events"
  if exists (application process "Dictionary") then
    tell application "Dictionary" to quit
  end if
end tell

try
    set theOtherFile1 to POSIX file "/Library/Dictionaries/File1.dictionary"
    set theOtherFile2 to POSIX file "/Library/Dictionaries/File2.dictionary"
tell application "Terminal" to activate
tell application "System Events"
    keystroke ("sudo chmod 777 " & theOtherFile1) as string
    display dialog "Click the button after you've typed the root password into Terminal." buttons {"OK"}
    keystroke return
    keystroke ("chmod 777 " & theOtherFile2) as string
    display dialog "Click the button after you've typed the root password into Terminal." buttons {"OK"}
end tell
do shell script "rm -rf /Library/Dictionaries/File1.dictionary"
do shell script "rm -rf /Library/Dictionaries/File2.dictionary" 
```

这应该可以解决问题。我目前正在使用 PC，否则我会先检查，但我认为这会正确运行。

# php - PHP Cronjob 更改 sh 根

> ID：11071052
> 
> 赞同：0
> 
> 时间：2012-06-17T11:44:48.653
> 
> 标签：php, cron, crontab

首先是一些设置背景：

*   我有一个 cronjob，它运行一个名为 worker_cronjob 的 PHP 文件。该文件所做的只是从 git 下载我的工作人员，而 cron.d 中的 cronjob 看起来像：

    */1 * * * * ubuntu /home/ubuntu/worker_cronjob >> /home/ubuntu/worker.log

*   它包括 worker_despatcher 文件

*   它会触发一个子进程（ROOT 是我目​​录的绝对路径）：

    $PID = exec(sprintf("%s > %s 2>&1 & echo $!", "php ".ROOT."/worker/encoder.php".$arg_string, ROOT."/worker/encoder.log" ));

问题在于，在 cronjob 下，这种方法正在改变系统命令的运行方式，更具体地说是 sh。因此，当我运行如下命令时：

```
ffmpeg 
```

它返回：

```
sh: 1: ffmpeg: command not found 
```

在跟踪和错误之后，我发现这只发生在 cronjob 中，它以某种方式改变了目录的设置方式，就像在没有我调用 chroot 的情况下进行 chrooting。

我查看了其他线程，它说它在创建 cronjobs 和运行文件时使用完整路径，但是问题不是我的文件，它们都是通过绝对路径引用的，它正在运行我遇到问题的已安装程序。

绝对路径是否也适用于已安装的应用程序，或者有没有办法打破这个功能，让我恢复使用一个单词运行命令的能力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:10:44.717

背后的原因是它们`cronjobs`由系统运行，因此它们对您的 shell 或用户环境变量一无所知。你可以说它们在**最小的环境**中运行。

可以在[**crontab 不起作用的原因**](https://askubuntu.com/a/23438)中找到非常详细的答案。

上述链接资源中未显示的另一种方式是：

```
* * * * * PATH=/usr/bin; command >> /var/log/command.log 
```

# sql - 按日期和时间显示来自多个表的数据

> ID：11071054
> 
> 赞同：-5
> 
> 时间：2012-06-17T11:44:50.733
> 
> 标签：sql, database, union

我有这些表格：想法和投票（以及其他），它们是成员可以在社区内发布的类型。我需要将它们全部显示在按时间和日期排序的“活动流”中，以便会员可以在他的“活动流”中看到所有其他人发布的任何类型的内容。我环顾四周，发现使用UNION，但是他们说这种方式太慢了。我想创建另一个名为 posts 的表，其中包含帖子的 ID 及其时间和日期，并在每个新帖子中更新。但无论哪种方式，我都需要一张新桌子。你认为最好的方法是什么？任何其他建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:10:26.997

> 是的，就像“汤姆问了一个问题：__ in:__ 几分钟”

所以你需要一个用户名、一个动作、一个时间戳和一个隐藏的 id。

在性能方面，一个单独的表更好（如果没有必要进行规范化，你可以避免联合，也许可以加入），但是你有额外的存储空间（这是一个问题吗？）和向这个表插入新记录的开销（很小）。请注意使用开关从其原始表中获取每个活动的详细信息。

归根结底，一切都取决于数据量和流量。

# java - 为什么Java SE编译的JAR文件可以在Android中执行

> ID：11071057
> 
> 赞同：3
> 
> 时间：2012-06-17T11:45:40.140
> 
> 标签：java, android

在 Android 操作系统中，我能够运行在桌面环境下编译的多个 Java JAR 文件。例如，[jtransforms](https://sites.google.com/site/piotrwendykier/software/jtransforms)

我可以知道为什么会这样吗？我认为 Oracle 的 JVM 和 Google 的 Dalvik VM 使用两种不同的字节码格式？为什么 Java SE 编译的 JAR 文件可以在 Android 中执行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T11:52:25.753

我假设您只是将 jar 文件包含在您的 android 项目中？然后它就可以工作了，因为在构建过程中它被转换（对你自己的类文件也是如此！）到 dex 格式。这是使用 dex (dx) 工具完成的。在 Eclipse 中使用 ADT 会自动为您完成。当然也可以在 android sdk 中手动使用：

`android-sdk-windows\platform-tools\dx.bat`如果在 windows下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:52:16.937

根据维基百科，`dx`用于将编译后`.class`的文件转换为`.dex`格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T12:31:03.663

`1\. Java SE` `-` `Java (Swing + AWT)`=`Android`

2 `In 2005, when Java was undergoing changes, Android creator didnt wanted to base Android` `totally on Java`.. `So they included JVM as the 1st compilation unit, thats the reason` `JRuby , Jython, etc can be used to write Android apps`. `And 2nd Compilation unit as Dalvik Compiler`.

`3\. So its quite natural that a jar file compiled under desktop environment works fine on Android.`

# grails - Grails 中的聊天应用程序

> ID：11071061
> 
> 赞同：4
> 
> 时间：2012-06-17T11:46:43.527
> 
> 标签：grails, chat

我正在尝试在 grails 中创建一个聊天应用程序。我不知道这样做，所以请您指出正确的方向。应用程序不需要花哨，我只想要一个简单的应用程序。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:56:11.853

有一个博客概述了这个的基本原则：

[http://programmingitch.blogspot.co.uk/2010/04/groovy-sockets-example.html](http://programmingitch.blogspot.co.uk/2010/04/groovy-sockets-example.html)

```
 import java.net.ServerSocket
 def server = new ServerSocket(4444)

 while(true) {
    server.accept { socket ->
       println "processing new connection..."
        socket.withStreams { input, output ->
            def reader = input.newReader()
            def buffer = reader.readLine()
            println "server received: $buffer"
            now = new Date()
           output << "echo-response($now): " + buffer + "\n"
    }
    println "processing/thread complete."
  }
} 
```

这为您提供了连接客户端的基本套接字连接和输入/输出流。您必须对此进行调整以跟踪多个客户端并广播（发送给所有连接的用户）来自服务器的任何消息。

# php - preg_match 错误和调试 php 代码

> ID：11071062
> 
> 赞同：0
> 
> 时间：2012-06-17T11:46:48.910
> 
> 标签：php, ioncube

请帮忙。我收到此错误：

> ( ! ) 警告：preg_match(): Unknown modifier 'b' in C:\wamp\www\pmd\install\ioncube_checker.php 第 22 行

当我运行以下代码时：

```
function system_info($php_info) {
$server_info = array();
$server_info['thread_safe'] = 'false';
$server_info['debug_build'] = 'false';
$server_info['php_ini_path'] = '';

foreach (explode("\n",$php_info) as $line) {
    if (preg_match('/command/',$line)) {
        continue;
    }

    if (preg_match('/thread safety.*(enabled|yes)/Ui',$line)) {
        $server_info['thread_safe'] = 'true';
    }

    if (preg_match('/debug.*(enabled|yes)/Ui',$line)) {
        $server_info['debug_build'] = 'true';
    }

    if (preg_match("/configuration file.*(</b></td><TD ALIGN=\"left\">| => |v\">)([^ <]*)(.*</td>*)?/",$line,$match)) {
        $server_info['php_ini_path'] = $match[2];

        if (!@file_exists($php_ini_path)) {
            $server_info['php_ini_path'] = '';
        }
    }

    $cgi_cli = ((strpos(php_sapi_name(),'cgi') !== false) || (strpos(php_sapi_name(),'cli') !== false));
    $cgi_cli ? $server_info['cgi_cli'] = 'true' : $server_info['cgi_cli'] = 'false'; 
}
return $server_info; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:47:54.667

由于您使用`/`的是正则表达式分隔符，因此您需要`/`使用`\`. 但是，在处理 HTM 时使用不同的分隔符要容易得多：

```
preg_match("/configuration file.*(</b></td><TD ALIGN=\"left\">| => |v\">)([^ <]*)(.*</td>*)?/",$line,$match) 
```

应该

```
preg_match("#configuration file.*(</b></td><TD ALIGN=\"left\">| => |v\">)([^ <]*)(.*</td>*)?#",$line,$match) 
```

但是，您应该考虑[**完全不使用正则表达式来解析 HTML**](https://stackoverflow.com/a/1732454/298479) - 使用 DOM 引擎会更好，而且 PHP 已经[有了一个](http://www.php.net/manual/en/book.dom.php).

# java - 安卓点击手势

> ID：11071063
> 
> 赞同：1
> 
> 时间：2012-06-17T11:47:32.760
> 
> 标签：java, android, user-interface, gesture

我正在做一个项目，需要在屏幕的某个部分点击手势才能移动到下一个屏幕。

有没有办法可以设置水龙头只能工作的特定xy坐标？目前，用户可以点击屏幕上的任意位置，屏幕会发生变化。换句话说，我想设置一个水龙头只能工作的特定区域。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:01:06.343

注册触摸侦听器的布局并使用 event.getX() 和 event.getY() 获取 x 和 y 坐标，其中 event 是 MouseEvent 对象。然后，您将了解要点击的区域以及用户在指定区域内点击时会转到下一个屏幕。检查此链接以获取 ontouchlistener 示例。 [在 LinearLayout 上实现 OnTouchListener - Android 开发](https://stackoverflow.com/questions/7534028/implementing-ontouchlistener-on-linearlayout-android-development)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:05:56.053

您可以使用[GestureDetector](http://developer.android.com/reference/android/view/GestureDetector.html)并`onSingleTapUp(MotionEvent e)`检测点击事件。然后您可以使用 e.getX() 和 e.getY() 来获取事件位置。

[此](https://stackoverflow.com/a/938657/961223)响应说明如何使用 GestureDetector。与 onTouch 事件相比，使用它的优点是您不必检测它是否真的只是一个点击事件或滑动或其他一些手势。

# asp.net - IIS 应用程序池和静态类

> ID：11071067
> 
> 赞同：10
> 
> 时间：2012-06-17T11:48:01.203
> 
> 标签：asp.net, iis, application-pool

我一直想知道，假设您有两个 asp.net 网站在同一个应用程序池中运行。

让我们称他们为网站 1 和网站 2

这两个网站都引用了一些共享代码，我们称之为 Awesome.dll

假设 Awesome.dll 包含一个定义如下的类

```
public static class Foo
{
   public static string Bar { get; set; }
} 
```

我的问题：

两个网站是否共享相同的静态类，或者它们是否有自己的独立副本？也就是说，如果网站 1 对 Foo.Bar 进行了更改，那么该更改是否反映在网站 2 中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T11:52:19.590

我的理解是，虽然这些网站将位于同一个 App Pool 中，但它们仍将位于它们自己的[App Domain](http://msdn.microsoft.com/en-us/library/ms173138%28v=vs.80%29.aspx)中。这意味着他们看不到彼此的对象，并且每个对象都有自己的静态类实例化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T11:56:39.830

每个应用程序包括（WebSite）都在应用程序域的上下文中运行 AppDomain 和静态数据，尽管 Web 应用程序正在运行相同的应用程序池

因此，网站 2 不会反映在网站中所做的更改。

# javascript - dojo mobile - 主页栏下方的标签栏

> ID：11071069
> 
> 赞同：0
> 
> 时间：2012-06-17T11:48:20.690
> 
> 标签：javascript, dojo, dojox.mobile

预期布局：

```
------------------------
| (back)  (title)      |
------------------------
| (tab1) (tab2) (tab3) |
------------------------
|                      |
|                      |
|                      |
|                      |
|                      |
|                      |
|                      |
|                      |
|                      |
------------------------ 
```

这里的意图是`dojox.mobile.Heading`在顶部有一个右边，`dojox.mobile.TabBar`在它下面有一个，以及由内容占据的屏幕的其余部分，如上所示。

当用户在应用程序的各个屏幕之间导航时，`Heading`必须更改（标题和后退按钮），但`TabBar`不会更改。然而，在某些屏幕上，TabBar 是隐藏的。

现在我正试图弄清楚如何对`dojox.mobile.View`s 执行此操作。我看到了两种可能的方法来实现这一目标：

1.  在 root中同时包含the`Heading`和 the ，其中包含几个 sub ，它们在其中导航。重写 的内容，由 上的导航事件触发。`TabBar``View``View``TabBar``Heading``TabBar`

2.  有几个`View`包含 a`Heading`和一个空的 s `div`。用页面中其他地方的 a 的内容重写空`div`的内容，不包含在 any中，其中包含 a 。`div``View``Heading`

以上哪种方法是在 DOJO mobile 中实现此目的的首选/标准方法？

还有更多的方法可以实现这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:45:23.520

您也可以只将标题和标签栏放在顶层（即作为您身体的直接子级），两者都具有 fixed="top" 属性。它们将堆叠在另一个下方。然后把你的不同观点放在后面（仍然是身体的孩子）。

下面是显示此解决方案的示例（标题中没有后退按钮，但您明白了......）。将其保存在 Dojo 安装的 dojox/mobile/tests 目录中的 HTML 文件中以运行它。这是针对 Dojo 1.7.2 的。

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>

<title>Heading + TabBar</title>

<link href="../themes/iphone/base.css" rel="stylesheet">
<link href="../themes/iphone/TabBar.css" rel="stylesheet">

<script type="text/javascript" src="../../../dojo/dojo.js" data-dojo-config="async: true, parseOnLoad: true, mblAlwaysHideAddressBar: true"></script>

<script type="text/javascript">
    require([
        "dojo/ready",
        "dojo/_base/array",
        "dojox/mobile/parser",
        "dojox/mobile",
        "dojox/mobile/compat",
        "dojox/mobile/ScrollableView",
        "dojox/mobile/TabBar"
    ], function(ready, array){
        ready(function(){
            var f = function(view, moveTo, dir, transition, context, method){
                var child = array.filter(this.getChildren(), function(w){
                    return w.moveTo === view.id; })[0];
                if(child){ 
                    child.select();
                    heading.set("label", child.get("label"));
                }
            };
            tabBar.subscribe("/dojox/mobile/afterTransitionIn", f);
            tabBar.subscribe("/dojox/mobile/startView", f);
        })
    });
</script>

<style>
html, body{
    height: 100%;
    overflow: hidden;
}
</style>
</head>
<body style="visibility:hidden;">
<h1 jsId="heading" data-dojo-type="dojox.mobile.Heading" data-dojo-props='fixed:"top"'>Heading</h1>
<ul jsId="tabBar" data-dojo-type="dojox.mobile.TabBar" data-dojo-props='fixed:"top"' style="border-bottom:none;">
    <li data-dojo-type="dojox.mobile.TabBarButton" data-dojo-props='icon1:"images/tab-icon-16.png", icon2:"images/tab-icon-16h.png", moveTo:"featured"'>Featured</li>
    <li data-dojo-type="dojox.mobile.TabBarButton" data-dojo-props='icon1:"images/tab-icon-15.png", icon2:"images/tab-icon-15h.png", moveTo:"categ"'>Categories</li>
    <li data-dojo-type="dojox.mobile.TabBarButton" data-dojo-props='icon1:"images/tab-icon-10.png", icon2:"images/tab-icon-10h.png", moveTo:"top25"'>Top 25</li>
</ul>

<div id="featured" data-dojo-type="dojox.mobile.ScrollableView">
    <ul data-dojo-type="dojox.mobile.RoundRectList">
        <li data-dojo-type="dojox.mobile.ListItem" data-dojo-props='moveTo:"categ"'>
            Categories
        </li>
        <li data-dojo-type="dojox.mobile.ListItem" data-dojo-props='moveTo:"top25", transitionDir:-1'>
            Top 25
        </li>
    </ul>
</div>

<div id="categ" data-dojo-type="dojox.mobile.ScrollableView">
    <ul data-dojo-type="dojox.mobile.RoundRectList">
        <li data-dojo-type="dojox.mobile.ListItem" data-dojo-props='moveTo:"top25"'>
            Top 25
        </li>
        <li data-dojo-type="dojox.mobile.ListItem" data-dojo-props='moveTo:"featured", transitionDir:-1'>
            Featured
        </li>
    </ul>
</div>

<div id="top25" data-dojo-type="dojox.mobile.ScrollableView">
    <ul data-dojo-type="dojox.mobile.RoundRectList">
        <li data-dojo-type="dojox.mobile.ListItem" data-dojo-props='moveTo:"featured"'>
            Featured
        </li>
        <li data-dojo-type="dojox.mobile.ListItem" data-dojo-props='moveTo:"categ", transitionDir:-1'>
            Categories
        </li>
    </ul>
</div>

</body>
</html> 
```

# android - Android加载图像作为布局背景会使应用程序崩溃

> ID：11071072
> 
> 赞同：0
> 
> 时间：2012-06-17T11:48:27.250
> 
> 标签：android, image, layout, crash

我使用 169.7 KB png 图像作为我的主要布局的背景。但是应用程序在扩展布局期间崩溃。如果我减小图像大小，那么应用程序工作正常。

以下是崩溃声明：

> 06-17 17:42:47.252：E/AndroidRuntime(1041)：原因：java.lang.OutOfMemoryError：位图大小超出 VM 预算

169.7 KB 不是大尺寸图片，为什么会崩溃？

谁能帮我调试这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:51:36.473

在 Android AVD 中创建模拟器时检查您为模拟器分配的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:53:45.680

图像的文件大小不相关。重要的是位图大小（宽度 x 高度 x 深度）。

# html - 如何将 Google Maps V3 置于网页的中心？

> ID：11071073
> 
> 赞同：1
> 
> 时间：2012-06-17T11:48:32.867
> 
> 标签：html, css, google-maps-api-3, web

我想问你点事儿。我用里面的谷歌地图制作了应用程序网络。但问题是我的地图在网页的左侧。如何将地图放置在网页的中心？

这是我的截图：

![在此处输入图像描述](../Images/b89326438a94aa9f0da05130f716a9ac.png)

那么，如何将地图放置在绿色部分的中心？现在，地图位于绿色部分的左侧。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-17T11:51:57.390

您可以添加在左侧和右侧具有“自动”边距的样式表。

```
<style type="text/css">
div#googleMap { margin: 0 auto 0 auto; }
</style>

<div id="googleMap"><!-- contains map --></div> 
```

# c++ - 多重包含错误，找不到解决方案

> ID：11071074
> 
> 赞同：4
> 
> 时间：2012-06-17T11:48:47.770
> 
> 标签：c++, file, redefinition, inclusion

我最近一直在为**多个文件包含**错误而苦苦挣扎。我正在开发一款太空街机游戏，并将我的类/对象划分为不同的 .cpp 文件，并确保一切仍能正常工作，我构建了以下头文件：

```
#ifndef SPACEGAME_H_INCLUDED
#define SPACEGAME_H_INCLUDED
//Some Main constants
#define PI 3.14159265

//Standard includes
#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>
#include <math.h>
#include <string.h>
#include <iostream>
#include <vector>
using namespace std;

//SDL headers
#include "SDL.h"
#include "SDL_opengl.h"
#include "SDL_mixer.h"
#include "SDL_image.h"

//Classes and project files
#include "Player.cpp"
#include "planet.cpp"
#include "Destructable.cpp"
#include "PowerUp.cpp"
#include "PowerUp_Speed.cpp"

#endif // SPACEGAME_H_INCLUDED 
```

在我的每个文件的顶部，我（仅）包含了这个包含所有 .cpp 文件和标准包含的头文件。

但是，我有一个 Player/Ship 类，它给了我“**重新定义 Ship 类**”类型的错误。我最终通过在类定义文件中包含预处理器 #ifndef 和 #define 命令找到了一种解决方法：

```
#ifndef PLAYER_H
#define PLAYER_H
/** Player class that controls the flying object used for the space game */
#include "SpaceGame.h"

struct Bullet
{
  float x, y;
  float velX, velY;
  bool isAlive;
};

class Ship
{
    Ship(float sX,float sY, int w, int h, float velocity, int cw, int ch)
    {
        up = false; down = false; left = false; right = false;
        angle = 0;
....
#endif 
```

通过这种解决方法，我丢失了“类/结构重定义”错误，但它在我的类文件 PowerUp_Speed 中给了我需要 Ship 类的奇怪错误：

```
#include "SpaceGame.h"

class PowerUp_Speed : public PowerUp
{

    public:
        PowerUp_Speed()
        {
            texture = loadTexture("sprites/Planet1.png");
        }

        void boostPlayer(Ship &ship)
        {
            ship.vel += 0.2f;
        }
}; 
```

我收到以下错误：“**不完整类型 'struct Ship' 的使用无效**”和“ **'struct ship' 的前向声明**”

我相信这些错误的根源仍然是多个文件包含错误的问题。我描述了我为减少错误数量而采取的每一步，但到目前为止，我在 Google 上找到的所有帖子都没有帮助我，所以我礼貌地问你们是否有人可以帮助我找到问题和修复。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T11:51:40.017

通常，您不包含 cpp 文件。
您只需要包含头文件！

当您包含 cpp 文件时，您最终会破坏**[One Definition Rule(ODR)](http://en.wikipedia.org/wiki/One_Definition_Rule)**。
通常，您的头文件（.h）将定义类/结构等，而您的源（.cpp）文件将定义成员函数等。
根据**ODR**，您只能定义每个变量/函数等，包括相同的 cpp多个文件中的文件会创建多个定义，因此会破坏 ODR。

> **你应该怎么做？**

请注意，为了能够创建对象或调用成员函数等，您需要做的就是在需要创建对象等的源文件中包含定义该类的头文件。您不需要在任何地方包含源文件.

> **前向声明呢？**

总是首选使用前向声明类或结构而不是包含头文件，这样做具有显着的优势，例如：

*   减少编译时间
*   不污染全局命名空间。
*   预处理器名称没有潜在的冲突。
*   二进制大小没有增加（在某些情况下，但并非总是如此）

但是，一旦您转发声明一个类型，您只能对其执行有限的操作，因为编译器将其视为**Incomplete Type**。所以你应该[总是尝试转发声明，但你不能总是这样做](https://stackoverflow.com/questions/553682/when-to-use-forward-declaration)。

# mongodb - 使用 Doctrine MongoDB ODM 进行地理空间查询

> ID：11071076
> 
> 赞同：0
> 
> 时间：2012-06-17T11:49:16.397
> 
> 标签：mongodb, doctrine-odm

我的文档的坐标属性上有一个二维索引。使用 mongo shell，我可以像这样查询集合；

```
db.adverts.find({coordinates:{$near:[20,40]}}) 
```

并按预期返回以下结果；

```
{ "_id" : ObjectId("4fddac51352de93903000000"), "title" : "dummy #3", "coordinates" : { "longitude" : 22, "latitude" : 31 } }
{ "_id" : ObjectId("4fddac48352de95105000000"), "title" : "dummy #3", "coordinates" : { "longitude" : 20, "latitude" : 30 } }
{ "_id" : ObjectId("4fddaca4352de93703000000"), "title" : "dummy #3", "coordinates" : { "longitude" : 31, "latitude" : 22 } }
{ "_id" : ObjectId("4fdda6a2352de90a03000000"), "title" : "dummy title", "created" : ISODate("2012-06-17T09:42:58Z"), "coordinates" : { "longitude" : 54.1234, "latitude" : -1.234 } }
{ "_id" : ObjectId("4fdda6d8352de9c004000000"), "title" : "dummy title #2", "created" : ISODate("2012-06-17T09:43:52Z"), "coordinates" : { "longitude" : 54.34, "latitude" : -1.124 } } 
```

但是，根据文档使用 Doctrine 查询完全相同的集合，我没有得到任何结果，例如

```
$adverts = $dm->createQueryBuilder('Advert')
                      ->field('coordinates')->near(20, 40)
                      ->getQuery()
                      ->execute();
$adverts->count(); // => 0 
```

我的广告 yaml 看起来像这样；

```
Advert:
    type: document
    collection: adverts
    fields:
        id:
            id: true
        title:
            type: string
        content:
            type: string
        created:
            type: date
        updated:
            type: date
        status:
            type: int
        distance:
            type: int

    indexes:
        coordinates:
            keys:
                coordinates: 2d

    referenceOne:
        owner:
            targetDocument: User

    embedOne:
        coordinates:
            targetDocument: Coordinates 
```

而坐标文件是这样的；

```
Coordinates:
    type: embeddedDocument
    fields:
        longitude:
            type: float
        latitude:
            type: float 
```

任何想法为什么使用 Doctrine 的 ODM 会在同一查询中返回零结果？

更新 #1 看起来 Doctrine\MongoDB\Query\Builder::near() L363 存在问题。方法参数忽略第二个值 ($y)。所以只有第一个值被传递来执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:31:30.807

该方法似乎存在实施问题`near()`（请参阅[https://github.com/doctrine/mongodb/pull/53](https://github.com/doctrine/mongodb/pull/53)）。要修复我的原始查询，我需要执行以下操作；

```
$adverts = $dm->createQueryBuilder('Advert')
              ->field('coordinates.latitude')->near(20)
              ->field('coordinates.longitude')->near(40);

$adverts->getQuery()->count(); // => 5 
```

这与暗示 x、y 坐标都可以传递给 Doctrine\MongoDB\Query\Builder::near() 的当前文档相矛盾。

编辑

为了让生活更轻松，我创建了一个自定义存储库类来为这种不一致提供更直观的解决方案；

```
public function near($longitude, $latitude)
{
    $query = $this->createQueryBuilder()
                  ->field('coordinates.longitude')->near((float) $longitude)
                  ->field('coordinates.latitude')->near((float) $latitude)
                  ->getQuery();

    return $query;
} 
```

# php - 循环中的PHP循环，选择了选项？

> ID：11071081
> 
> 赞同：1
> 
> 时间：2012-06-17T11:50:54.053
> 
> 标签：php, select, loops, option

使用 PHP，我在这样的循环中回显表行：

```
<?php
/* SQL STUFF */

  while ($row = mysql_fetch_array($select_courseelements)) {
   echo "<tr>\n";
    echo "<td>".$row['scpe_name']."</td>\n";
    echo "<td>".$row['scpe_days']."</td>\n";
   echo "</tr>\n";
  } 
```

现在我想在循环运行中包含一个具有 5 个预定义值的`<select>`元素。选项s 将是 1 到 5。循环 内还有一列包含 1 到 5 ( ) 的值。每次这个值都等于我希望它把它改成. 这可能吗？`<option>``<td>``value`

`$row``$row['scpe_grades_status']`

`<select>``selected='selected'`

当它在循环中运行时，我的`<select>`会看起来像这样：

```
echo "<td>\n";
echo "<select id='elements_grade'>\n";
        echo "<option value='1'>Registrerad</option>\n";
        echo "<option value='2'>Ej påbörjad</option>\n";
        echo "<option value='3'>Pågående</option>\n";
        echo "<option value='4'>Godkänd</option>\n";
        echo "<option value='5'>Deltagit</option>\n";
        echo "<option value='6'>Ej deltagit</option>\n";
echo "</select>\n";
echo "</td>\n"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T12:00:12.787

当然，从循环中构建值。您可以比较该部分的值。

```
for($i = 1; $i<=5; $i++) {
   echo "<option value='$i'";
   echo ($row['scpe_grades_status'] == $i) ? " selected='selected'": "";
   echo ">...."</option>"
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T12:03:51.210

```
$array = array('Registrerad' => 1, 'Ej påbörjad' => 2, 'Pågående' => 3, 'Godkänd' => 4, 'Deltagit' => 5, 'Ej deltagit' => 6);

foreach ($array as $key=>$value) {
    if ($value == $row['scpe_grades_status'])
        echo '<option value="'.$value.'" selected>'.$key.'</option>';
    else
        echo '<option value="'.$value.'">'.$key.'</option>';
} 
```

类似的东西？

# java - Java：鼠标点击的快速 2D 命中检测

> ID：11071087
> 
> 赞同：0
> 
> 时间：2012-06-17T11:52:01.420
> 
> 标签：java, graphics

## 语境

我正在使用 Java Graphics2D。

我正在画一堆形状。

我希望能够进行快速命中检测——当鼠标点击一个对象时，我想知道点击了什么对象。

## 更多细节：

我想在*填充*检测级别执行此操作。即，如果我有一个圆圈，我不想在圆圈的边界框上进行命中检测，我希望在圆圈的内部进行命中检测。

对于笔画/线条/字体，我可以对框（而不是字母的黑色部分）进行命中检测。

## 问题：

我应该使用哪些 API 进行设置？[出于好奇，Java 使用什么算法/什么是 big-OH​​ 运行时间？]

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:24:10.513

[`shape.contains(point)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Shape.html#contains%28java.awt.geom.Point2D%29)用?询问每个形状

那是 O（形状数量），但您可能不需要更快的东西。假设一个形状的点击测试需要 1 微秒，并且您有 100,000 个形状，您仍然可以每秒处理 10 次点击......

# operating-system - 临界区

> ID：11071095
> 
> 赞同：0
> 
> 时间：2012-06-17T11:53:02.543
> 
> 标签：operating-system

以下解决方案如何**不满足临界区问题的解决方案标准**？

三种情况哪一种不满足？
1\. 互斥
2\. 进步
3\. 有限等待

我知道这是令人满意的互斥，但是**2 和 3 呢？**
请注意，这不是家庭作业。我想了很多，但还是不清楚。

[编辑]
删除图片并添加代码。

```
Pi’s Algorithm    
    Var flag : array [ i…j] of boolean    
    repeat  
    flag [i] = true;    
While ( flag [j]  == “ true ”) do no-op;        

            Critical section

Flag [i]=“ false ”;
 until false 
```

另一个过程

```
Pj’s Algorithm    
    Var flag : array [ i…j] of boolean
repeat  
  flag [ j ] = true;
While ( flag [ i ]  == “ true ”) do no-op;  

        Critical section

Flag [j]=“ false ”;
 until false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:48:19.957

系统可能会死锁：

2 个进程：P1、P2。我假设 i 和 j 是进程的 ID，并且是共享变量，flags 数组也是如此。

然后P1开始执行：

```
flag[1] := true; 
```

-> 这里 P1 被调度程序中断，P2 开始运行：

```
flag[2] := true;
while (flag[1] == true) do nop ; 
```

-> P2 仍然在这个循环中。稍后调度程序再次选择 P1：

```
while (flag[2] == true) do nop; 
```

-> P1 也陷入了循环。没有进展。这种死锁，因此违反了#2 和#3。此外，也有可能一个进程被饿死（另一个进程总是运行整个代码并且永远不会在 flag[i] := false 和 flag[i] := true 之间中断，因此第一个进程永远不会得到有机会离开 while 循环。

# open-source - 您如何在 code.google.com 上与多个 repos 共享项目？

> ID：11071097
> 
> 赞同：1
> 
> 时间：2012-06-17T11:53:36.343
> 
> 标签：open-source, project-management, google-code, code-sharing

对于您在 code.google.com 上拥有的所有存储库，我很难找到一个页面或 URL 来指向某人。

有谁知道怎么做？我需要做任何事情来创建一个类似于我在 bitbucket 和 github 上获得的页面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:55:53.527

看起来如果你点击左上角的个人资料链接，你会被带到你所参与的所有内容的列表中。

**编辑**：旧链接已删除。

# c# - Rowdeleting 事件不会触发

> ID：11071098
> 
> 赞同：2
> 
> 时间：2012-06-17T11:53:38.080
> 
> 标签：c#, asp.net

我有一个gridview，上面有一个按钮。我想，如果用户单击一行上的按钮，则该行将被删除。我做了这些步骤，但没有成功。请你帮我解决我的问题问题？

```
 protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
        {
            int k=int.Parse(GridView1.DataKeys[e.RowIndex].Value.ToString());
            Label1.Text = k.ToString();
        } 
```

我想查看标签中的值但没有成功（我认为这个事件不会触发）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:17:20.377

编辑：

我喜欢在 Page_Init 事件的代码隐藏中指定我的处理程序，所以它看起来像这样：

```
protected void Page_Init(object sender, EventArgs e)
{
   gw.RowDeleting += new GridViewDeleteEventHandler(gw_RowDeleting);
}

void gw_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
   // do whatever you want
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:57:40.607

我假设您的数据来自数据库，但您没有在示例代码中指定您正在调用数据访问层/EF/存储库中的删除方法。

也许阅读本教程会有所帮助？[http://www.asp.net/web-forms/tutorials/data-access/editing,-inserting,-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs](http://www.asp.net/web-forms/tutorials/data-access/editing,-inserting,-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs)

# c# - 在 IIS7 中以编程方式为虚拟目录启用 BITS 上传

> ID：11071099
> 
> 赞同：3
> 
> 时间：2012-06-17T11:53:43.290
> 
> 标签：c#, iis-7, cmd, virtual-directory, microsoft-bits

在 IIS7 中名为“BITS Uploads”的虚拟目录功能下，有一个“允许客户端上传文件”复选框，我需要为特定虚拟目录和“默认网站”启用此复选框

这可以在 C# 甚至在命令行中完成，以便我可以通过 script\C# 运行它吗？

谢谢！

**编辑：** 在调查 applicationHost.config 的更改后，可以修改此 Xml 文件，但是有很多更改（包括 GUID 更改）但感觉不对...我希望 appcmd.exe\c# 可以为我提供这个小而重要的要求的解决方案。如果有人可以为这个问题发布更好的解决方案，我会非常高兴谢谢，Lior

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:01:22.817

您可以根据需要使用 c# 或您选择的任何语言修改 ApplicationHosts.config 文件：[http](http://learn.iis.net/page.aspx/373/editing-configuration-files/) ://learn.iis.net/page.aspx/373/editing-configuration-files/ （请注意，您很可能需要一个如果启用了 UAC，则为管理员帐户）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:46:04.133

我想出了一个更好的方法来自动配置 IIS。对于 IIS7，您可以下载一个管理包，让您为 IIS 配置生成脚本 (C#\javascript\appcmd)。在 IIS7.5 中，管理包已集成为 IIS 的一部分，称为“配置编辑器”。
您可以在以下[教程中找到它](http://technet.microsoft.com/en-us/video/iis-75-configuration-editor-windows-server-2008-r2-demo-screencast-2-of-5.aspx)

感谢您之前给我的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:00:03.537

查看[http://msdn.microsoft.com/en-us/library/microsoft.web.administration(VS.90).aspx](http://msdn.microsoft.com/en-us/library/microsoft.web.administration(VS.90).aspx) - 当您要编辑 IIS 7 及更高版本的配置时，它非常方便。用于更改 IIS 配置的托管 .NET 库

# html - JQuery: 'Uncaught TypeError: Illegal invocation' at ajax request - 几个元素

> ID：11071100
> 
> 赞同：131
> 
> 时间：2012-06-17T11:53:56.987
> 
> 标签：html, ajax, jquery

我有两个选择元素，A 和 B：当 A 的选定选项更改时，B 的选项必须相应更新。A 中的每个元素都意味着 B 中的许多元素，这是一对多的关系（A 包含国家，B 应该包含位于给定国家的城市）。

该函数`do_ajax`应该运行异步请求：

```
function do_ajax(elem, mydata, filename)
{
    $.ajax({
        url: filename,
        context: elem,
        data: mydata,
        datatype: "html",
        success: function (data, textStatus, xhr) {
            elem.innerHTML = data;
        }
    });
} 
```

为了更新 B 的选项，我在 A 的`onChange`事件中添加了一个函数调用。这是触发 onChange 事件 (of `A`) 时运行的函数：

```
function my_onchange(e) // "e" is element "A"
{
    var sel_B = ... ; // get select element "B"

    // I skipped some code here
    // ...

    var data = {
        'mode': 'filter_city',
        'id_A': e[e.selectedIndex]
    };
    do_ajax(city_sel, data, 'ajax_handler.php');
} 
```

}

我读过可以是数组（键值对）的JQuery文档[。](http://api.jquery.com/jQuery.ajax/)`data`如果我输入以下内容，我会收到错误消息：

```
var data = {
        'mode': 'filter_city',
        'id_A': e[e.selectedIndex]
}; 
```

相反，如果我的数据是字符串，我不会收到该错误：

```
var data = 'mode=filter_city&amp;id_A=' + e[e.selectedIndex]; 
```

但我需要变量的“数组版本”，在我的服务器端 php 代码中。

位于`Uncaught TypeError: Illegal invocation`“jquery-1.7.2.min.js”文件中，该文件全部被压缩，所以我无法弄清楚代码的哪一部分引发了错误。

我可以在我的代码中更改任何设置，以便它接受数据作为关联数组吗？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-06-17T12:41:00.537

多亏了与**Sarfraz**的谈话，我们才能找到解决方案。

问题是我传递了一个 HTML 元素而不是它的值，这实际上是我想要做的（事实上，在我的 php 代码中，我需要该值作为外键来查询我的`cities`表并过滤正确的条目）。

所以，而不是：

```
var data = {
        'mode': 'filter_city',
        'id_A': e[e.selectedIndex]
}; 
```

它应该是：

```
var data = {
        'mode': 'filter_city',
        'id_A': e[e.selectedIndex].value
}; 
```

**注意：**查看 Jason Kulatunga 的[答案](https://stackoverflow.com/a/11071290/1175496)，它引用了 JQuery 文档来解释为什么传递 HTML 元素会导致麻烦。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-06-17T12:28:33.677

来自 jQuery 文档`processData`：

> **processData** Boolean
> ^(默认值：true)
> 默认情况下，作为对象（从技术上讲，除了字符串之外的任何内容）传入 data 选项的数据将被处理并转换为查询字符串，适合默认的内容类型“application/x-www -form-urlencoded”。如果要发送 DOMDocument 或其他未处理的数据，请将此选项设置为 false。

来源： [http ://api.jquery.com/jquery.ajax](http://api.jquery.com/jquery.ajax)

看起来您将不得不使用`processData`将数据发送到服务器，或修改您的 php 脚本以支持查询字符串编码参数。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2018-01-29T15:35:40.187

我在发布 FormData 对象时收到此错误，因为我没有正确设置 ajax 调用。下面的设置解决了我的问题。

```
var myformData = new FormData();        
myformData.append('leadid', $("#leadid").val());
myformData.append('date', $(this).val());
myformData.append('time', $(e.target).prev().val());

$.ajax({
    method: 'post',
    processData: false,
    contentType: false,
    cache: false,
    data: myformData,
    enctype: 'multipart/form-data',
    url: 'include/ajax.php',
    success: function (response) {
        $("#subform").html(response).delay(4000).hide(1); 
    }
}); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-06-17T11:57:29.550

> 我在 JQuery 文档中读到数据可以是一个数组（键值对）。如果我输入以下内容，我会收到错误消息：

这是对象而不是数组：

```
var data = {
        'mode': 'filter_city',
        'id_A': e[e.selectedIndex]
}; 
```

你可能想要：

```
var data = [{
        'mode': 'filter_city',
        'id_A': e[e.selectedIndex]
}]; 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-04-10T15:21:52.350

最近有同样的问题，通过添加解决`traditional: true,`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-12-07T10:55:54.337

请按照以下步骤解决此问题：

```
$.ajax({
   url: 'https://your-api-endpoint',
   type: 'post',
   data: new formData(this),
   processData: false,
   contentType: false,
   success: function(response) {
      console.log(response)
   }
}) 
```

您必须使用 processData: false 和 contentType: false 这两行。你的问题将得到解决。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-23T17:13:29.677

```
function do_ajax(elem, mydata, filename)
{
    $.ajax({
        url: filename,
        context: elem,
        data: mydata,
        **contentType: false,
        processData: false**
        datatype: "html",
        success: function (data, textStatus, xhr) {
            elem.innerHTML = data;
        }
    });
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-18T22:42:06.377

我的`illegal invocation`错误`$.getJSON`是由`undefined`作为`data`对象的值之一传递引起的。修复它解决了错误。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-02-22T16:17:47.383

```
$.ajax({
                    url:"",
                    type: "POST",
                    data: new FormData($('#uploadDatabaseForm')[0]),
                    contentType:false,
                    cache: false,
                    processData:false,
                    success:function (msg) {}
                  }); 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2017-01-17T04:55:45.767

尝试这个：

```
 $.ajax({
                    url:"",
                    type: "POST",
                    data: new FormData($('#uploadDatabaseForm')[0]),
                    contentType:false,
                    cache: false,
                    processData:false,
                    success:function (msg) {}
                  }); 
```

# php - 正则表达式匹配以 %% 开头和结尾的字符串

> ID：11071103
> 
> 赞同：3
> 
> 时间：2012-06-17T11:55:23.523
> 
> 标签：php, regex

我有一个文本以这种格式多次出现变量：

```
Example text will %%include%% these %%parameters%% 
```

我正在尝试使用这个：

`preg_match('/%%[\s\S]*?%%/i',$output, $matches);`

但由于某种原因，我只得到了第一场比赛，有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T11:56:17.640

使用[preg_match_all](http://php.net/manual/en/function.preg-match-all.php)因为您需要多个匹配项。

# ios - ios启动画面

> ID：11071109
> 
> 赞同：-1
> 
> 时间：2012-06-17T11:56:16.797
> 
> 标签：ios, splash-screen

我在 iphone 项目中为 splah 屏幕添加了 default.png 文件。它适用于应用程序的每次启动。我只想为第一次运行设置此启动画面。然后当用户单击时，它将被隐藏。对于其他运行，我不想再次显示它。是否可以使用启动图像功能或者我应该使用新视图来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T11:58:09.543

您不能`Default.png`在应用启动之间动态换出“”。这会破坏代码签名，您的应用程序将不再运行或启动。

`UIView`您最好的解决方案是在初始（默认）屏幕消失后简单地使用唯一的“ ”，并`UIView`仅在第一次启动时显示该“”。

# perl - 在 Perl 中使用 XML::Twig 时，方法“parent”也返回子项（不需要）

> ID：11071115
> 
> 赞同：1
> 
> 时间：2012-06-17T11:57:40.860
> 
> 标签：perl, parent, perl-module, xml-twig, ancestor

我需要从 input.xml 的第一个元素中显示“父级”

我还必须显示来自父母的 id

这是我的脚本 Perl： C:\lng> C:\lng\uniq.pl

不幸的是，输出显示了子节点：

```
 <source id="berlin"> 
   <target id="karlsruhe" method="delete"/> 
   <target id="Stuttgart4" method="delete"/>
</source> 
```

预期的输出是：

```
<source id="berlin"> 
```

请帮忙。

这是 uniq.pl：

```
#!/usr/bin/perl -w
use warnings;
use XML::Twig;
my $t= XML::Twig->new;
my $v= XML::Twig::Elt->new;

$t-> parsefile ('input.xml');
$v= $t->first_elt('[@method]');

$w= $v->parent;
$w->print; 
```

输入文件：input.xml

```
<Germany>
 <airport id1="1">
  <plane id="3">
   <source id="berlin">
     <target id="karlsruhe" method="delete"/>
     <target id="Stuttgart4" method="delete"/>
   </source>
  </plane>
 </airport>
</Germany> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T12:32:58.107

当您调用`print`一个元素时，它会打印该元素，整个元素，从开始标记到结束标记，包括所有子元素及其后代。

你想要的只是开始标签，使用`start_tag`方法：

```
print $w->start_tag; 
```

# gcc - 我得到 omp_get_num_threads 在 gcc 中总是返回 1（在 icc 中工作）

> ID：11071116
> 
> 赞同：5
> 
> 时间：2012-06-17T11:57:41.777
> 
> 标签：gcc, icc, openmp

我有这个老问题，但网上没有适合我的答案，代码是：

```
#include "stdio.h"
#include "omp.h"

main ()
{
    omp_set_num_threads(4); //initialise thread count for 4 core cpu                                                                                                                             
    int j;
    printf ("%d\n", omp_get_max_threads());
    printf ("%d\n", omp_get_num_threads());
#pragma omp parallel for
    for (int j=0; j<10; ++j)
        {
            printf ("%d\n", omp_get_num_threads());
            int threadNum;
            threadNum = omp_get_thread_num();
            printf("This is thread %d\n", threadNum);
        }
    }
    return 0;
} 
```

在 G++ 4.4.5、linux 2.6.32-5-amd64 中，它产生：

```
4
1
1
This is thread 0
1
This is thread 0
1
This is thread 0
1
This is thread 0
1
This is thread 0
1
This is thread 0
1
This is thread 0
1
This is thread 0
1
This is thread 0
1
This is thread 0 
```

如果我们转移到 ICC 12.1.0，它会给我：

```
4
1
4
This is thread 0
4
This is thread 0
4  
This is thread 0
4
This is thread 1
4
This is thread 1
4
This is thread 1
4
This is thread 2
4 
This is thread 2
4
This is thread 3
4
This is thread 3 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-11T04:52:31.530

我从未见过`omp_get_num_threads()`使用**gcc**工作。
我使用自己的例程来计算正在运行的线程数：

```
#include <omp.h>
#include <stdio.h>

int omp_thread_count() {
    int n = 0;
    #pragma omp parallel reduction(+:n)
    n += 1;
    return n;
}

int main() {
    printf("%d, %d\n",omp_thread_count(),omp_get_num_threads());
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-04-01T21:23:21.320

正如所指出的，`omp_get_num_threads()`在顺序代码部分中总是返回 1。这是我想出的解决该限制的最简单方法：

```
#include <omp.h>
#include <stdio.h>

int main(int argc, char **argv)
{
  #pragma omp parallel
  {
    #pragma omp single
    printf("num_threads = %d\n", omp_get_num_threads());
  }
  return 0;
} 
```

编译`-fopenmp`并运行。输出应该是：

```
$ gcc -fopenmp test.c
$ ./a.out
num_threads = 4 
```

当然，`4`这只是我的电脑默认显示的内容；在您的计算机上，它将打印默认的线程数（核心数，或者`OMP_NUM_THREADS`如果设置了环境变量的值）。

我测试了这个解决方案，发现它可以与 Linux 上的 gcc 4.8.5、Linux 上的 icc 18.0.1、macOS 上的 gcc 6.4.0 和 macOS 上的 clang 3.9.1 一起使用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-17T12:04:07.550

您几乎可以肯定在编译时忘记使用该[`-fopenmp`标志。](http://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html#C-Dialect-Options)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-31T09:12:46.450

在程序的连续部分中 omp_get_num_threads 返回 1。（[https://gcc.gnu.org/onlinedocs/libgomp/omp_005fget_005fnum_005fthreads.html](https://gcc.gnu.org/onlinedocs/libgomp/omp_005fget_005fnum_005fthreads.html)）

只有在并行部分中，omp_get_num_threads 才会返回 1 以外的值。

我已经尝试过 gcc-4.9.1。尽管如此， omp_get_num_threads() 返回 1。

icc 和 gcc 对线程数的识别是不同的。

使用 icc-10，我可以使用 maxNumCompThreads(2) 来指定线程数。

# c# - 选中 gridview 列复选框

> ID：11071121
> 
> 赞同：2
> 
> 时间：2012-06-17T11:58:23.100
> 
> 标签：c#, asp.net

我正在用 C# 开发一个应用程序，其中我使用 datagridview 和 gridview 第一列包含复选框，我想检查复选框是否为真，但它给了我“对象引用未设置为实例”的例外情况一个东西'。代码如下

```
 private void btnDelete_Click(object sender, EventArgs e)
        {
            StudentDAL s = new StudentDAL();

            try 
            {
                for (int i = 0; i < this.dataGridView1.RowCount; i++)
                {

                    if (!DBNull.Value.Equals(this.dataGridView1.Rows[i].Cells[0]) && (bool)this.dataGridView1.Rows[i].Cells[0].Value == true)
                    {

                        s.delete(Convert.ToInt32(this.dataGridView1.Rows[i].Cells[1].Value));
                        i--;

                    }

                }
                this.dataGridView1.DataSource = s.getAll();

            }
            catch (Exception nn)
            {

            }

        } 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:07:40.690

您正在尝试引用尚未初始化的对象（我相信此实例 Row[i]）。

尝试在 for 循环中放置一个断点并单步执行 (F10) 并检查 i 在引发异常时所处的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T12:34:40.520

添加更多验证

```
foreach (DataGridViewRow rw in this.dataGridView1.Rows)
{
    if (rw.Cells.Count > 2 && 
        rw.Cells[0].Value != DBNull.Value && String.IsNullOrWhiteSpace(rw.Cells[0].Value.ToString()) &&
        ((bool)rw.Cells[0].Value) &&
            rw.Cells[1].Value != DBNull.Value && String.IsNullOrWhiteSpace(rw.Cells[1].Value.ToString()))
    {
            s.delete(Convert.ToInt32(rw.Cells[1].Value));

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T13:26:30.250

首先你必须找到你的 CheckBox 控件，然后你可以像这样检查它是否被选中：

```
 Int32 i;
    CheckBox k;

    for (i = 0; i < GridView1.Rows.Count; i++)
        {
            k = ((CheckBox)(GridView1.Rows[i].Cells[0].FindControl("chk")));
            if (k.Checked == true)
            {
                //your code here
            }
            else
            {
                //your code here
            }
        } 
```

# r - 如何按R中的第n列对数据框进行排序

> ID：11071124
> 
> 赞同：2
> 
> 时间：2012-06-17T11:58:43.320
> 
> 标签：r

我有两个具有相同列数的数据框。我正在编写一个函数，它将两个数据帧和一个整数 n 作为参数，并且需要按每个数据集各自的第 n 列对每个数据集进行排序。本质上，我怎样才能通过它的第 n 列对数据框进行排序，而不必知道该列的标签？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T12:09:11.113

对此处的答案稍作修改： [如何按列对数据框进行排序？](https://stackoverflow.com/questions/1296646/how-to-sort-a-dataframe-by-columns-in-r/6871968#6871968)

```
dd <- data.frame(b = factor(c("Hi", "Med", "Hi", "Low"), 
                            levels = c("Low", "Med", "Hi"), ordered = TRUE),
                 x = c("A", "D", "A", "C"), y = c(8, 3, 9, 9),
                 z = c(1, 1, 1, 2))

n <- 2
dd[ order(dd[[n]]), ]

    b x y z
1  Hi A 8 1
3  Hi A 9 1
4 Low C 9 2
2 Med D 3 1 
```

或者，您可以查找标签`colnames(dd)[n]` 并将其与上述链接中的任何方法一起使用。

# gwt - ValueProxy 的 equals() 失败，因为 stableId() 返回 null

> ID：11071125
> 
> 赞同：0
> 
> 时间：2012-06-17T11:59:02.357
> 
> 标签：gwt, gxt, requestfactory, json-rpc

我的一些小部件代码（GXT 3.0）想要从 RF-JsonRpc 接收到 ValueProxy 调用 equals() 但它失败了，因为这些代理没有任何 stableId 标签，并且 ValueProxyCategory 中实现的 equals 方法要求它检查它是否正在比较相同的类类型。

[http://code.google.com/searchframe#T04cSGC7sWI/trunk/user/src/com/google/web/bindery/requestfactory/shared/impl/ValueProxyCategory.java](http://code.google.com/searchframe#T04cSGC7sWI/trunk/user/src/com/google/web/bindery/requestfactory/shared/impl/ValueProxyCategory.java)

谁能告诉我收到的 ValueProxy 中缺少 stableId 是错误还是我犯了一些错误？谢谢！！！

我可以覆盖我的 ValueProxy 派生类型的 equals 实现吗？我在派生类型上有一个 id 属性，我想像 EntityProxy 的 equals 一样使用 id 比较。

# android - Google Play 应用说明格式

> ID：11071127
> 
> 赞同：428
> 
> 时间：2012-06-17T11:59:47.800
> 
> 标签：android, formatting, google-play

我制作了一个可在 Google Play 上使用的 Android 应用程序。现在我想在我的应用描述中添加更多格式（例如缩进、链接、列表……）。但我找不到任何列出可能格式的网站。谷歌帮助页面在这个问题上也不能帮助我。存在很多不同的格式，我真的不知道使用哪一种（例如 HTML 或 wiki 格式..）

我可以通过反复试验来测试它，但这需要一些时间，因为 Google Play 只会在 2-3 小时后刷新。在我进行测试时，如果使用了错误的格式，我的应用程序描述会相当难看。

tl;dr 是否有我可以在 Google Play 的应用描述中使用的所有可能格式的列表？

* * *

## 回答 #1

> 赞同：722
> 
> 时间：2013-09-11T16:50:46.137

通过实验，我发现您可以提供：

*   单个换行符被忽略；双换行符打开一个新段落。
*   可以通过以两个空格结束一行来强制执行单行换行（类似于 Markdown）。
*   一组有限的 HTML 标记（可选嵌套），特别是：
    *   `<b>…&lt;/b>`对于粗体字，
    *   `<i>…&lt;/i>`斜体字，
    *   `<u>…&lt;/u>`对于下划线，
    *   `<br />`强制换行，
    *   我**找不到**任何让删除线工作的方法（无论是 HTML 还是 Markdown 样式）。
*   完整格式的 URL，例如`http://google.com`; 这显示为一个超链接。
    （请注意，尝试使用 HTML`<a>`标记进行自定义描述不起作用*并且*会破坏格式。）
*   支持 HTML 字符实体，例如`&rarr;`(→)、`&trade;`(™) 和`&reg;`(®)；有关详细列表，请参阅[此 W3 参考](http://www.w3.org/TR/html4/sgml/entities.html)。
*   支持 UTF-8 编码字符，如 é、€、£、'、'、★ 和 ☆。
*   缩进不是严格可行的，但使用项目符号和 em 空格字符看起来是合理的（`&#8226;&#8195;`产生“•”）。
*   也支持表情符号（虽然网站上取决于用户的操作系统和浏览器）。

***仅*与Google Play 应用**有关的特别说明：

*   一些 HTML 标签仅在应用程序中有效：
    *   `<blockquote>…&lt;/blockquote>`缩进一段文本，
    *   `<small>…&lt;/small>`对于稍小的文字，
    *   `<big>…&lt;/big>`对于稍大的文字，
    *   `<sup>…&lt;/sup>`对于上标和`<sub>…&lt;/sub>`下标。
    *   `<font color="#a32345">…&lt;/font>`用于在 HEX 代码中设置字体颜色。
*   某些符号显示不正确，例如‣。
*   所有这些说明也适用于应用程序的“新增功能”部分。

***仅*与Google Play 网站**有关的特别说明：

*   所有 HTML 格式都以纯文本形式出现在网站的“新增功能”部分（即用户将看到 HTML 源代码）。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-07-28T13:01:11.143

目前*（2015 年 7 月）*，HTML 转义序列 ( `&bull; &#8226;`)在 Play 商店**的浏览器版本中不起作用**，它们显示为文本。不过，Play Store 应用程序按预期处理它们。

因此，如果您在应用程序/更新描述中的 unicode 项目符号点之后*[这就是你在这里的原因，很可能]*，只需**复制粘贴**项目符号字符

# •</h1>

*PS*你也可以使用unicode输入组合来获取字符

Linux：`Ctrl``Shift``u` `2022` `Enter`或`Space`

马克：保持`⌥</kbd> `2022` release `⌥</kbd>``

Windows：保持`Alt` `2022`释放`Alt`

Mac 和 Windows 需要一些设置，请[在 Wikipedia 上阅读](https://en.wikipedia.org/wiki/Unicode_input#Hexadecimal_code_input)

*PPS*如果您觉得有创意，这里有一个[很好的链接，其中包含更多可复制的符号](http://panmental.de/symbols/info.htm)，但不要太疯狂，没有人喜欢他们阅读的内容混乱。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-03-26T15:25:50.720

事实上，HTML 字符实体也可以工作：[http](http://www.w3.org/TR/html4/sgml/entities.html) ://www.w3.org/TR/html4/sgml/entities.html 。

它允许您插入特殊字符，如项目符号 '•' ( *•* )、'™' ( *™* )、... HTML 方式。

请注意，如果您可以输入国际字符，您也可以（并且可能应该）直接在表单字段中输入特殊字符。

=> 这里的一个考虑因素是您是否关心从 Google Play 收集您的应用程序数据的第三方网站：有些人可能只是将其视为 HTML 内容，其他人可能会将其插入仅理解纯 Unicode 的本机应用程序中。 .

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-06-21T09:30:59.753

这不是子弹，但你可以考虑一下。因为没有什么像大点。

我在描述中使用了下面的符号，它工作正常。

⚫ 黑圈

新月

满月

带点钻石

小橙色钻石

⚙ 齿轮

黑旗

白旗

▶ 播放按钮

⏩ 快进按钮

⭕ 沉重的大圆圈

✴八角星

◼ 黑色中号方形

◽ 白色中小方块

◾ 黑色中小方块

⬛ 黑色大方块

**您只需将其复制并粘贴到描述上。下面是结果。**

![在此处输入图像描述](../Images/91446d092d5ce51aebb5d844a2899cb1.png)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2016-06-22T04:26:15.627

目前（2016 年 6 月）在链接中键入[http://www.example.com](http://www.example.com)只会产生纯文本。

但是，您现在可以放入一个 html 锚点：

```
<a href="http://www.example.com">My Example Site</a> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-03-19T20:10:42.240

包括表情符号；将它们复制并粘贴到描述中：

[http://getemoji.com](http://getemoji.com)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-12-27T08:44:35.767

**标题、简短描述和开发者名称**

*   这些字段不支持 HTML 格式，但您可以包含 UTF-8 符号和表情符号：✓☆

**完整说明和新增功能：**

*   对于“详细说明”和“新增功能”部分，您可以应用更多种类的 HTML 代码来设置文本的格式和结构。但是，它们在 Google Play Store 应用程序和 Web 中的外观会略有不同。
*   这是一个包含代码的表格，您可以使用这些代码来格式化您在 Google Play 上的应用程序的 Description 和 What's New 字段（最初出现在 ASO Stack 博客上）：

[![在此处输入图像描述](../Images/7deca1f407804c33ba2d875ca9aa7e38.png)](https://i.stack.imgur.com/mTSRa.png)

**你也可以参考这个..**

> [https://thetool.io/2020/html-emoji-google-play](https://thetool.io/2020/html-emoji-google-play)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-03-16T04:23:05.800

`<br>`似乎是目前在应用程序版本上创建新换行符的最佳也是唯一方法。我在评论中成功地尝试过它，但也没有成功地尝试过维基百科换行页面会告诉我的所有其他 Unicode/HTML 换行相关字符。我在两边都使用`<br>`了 with ，没有使用结束标签，它神奇地创建了一个换行符，而不会泄露源代码或搞砸任何事情。`|`

**TLDR：** `<br>`让您在 Google Play 应用程序中成功利用单行换行符——与我尝试过的所有其他方法不同（很多）。

***附言*** ~~我不知道如何使事物显示源而不是用作源。!^(~~现在我做到了，而且我知道它适用于桌面和移动网站。！！

此外，在搜索如何使其显示来源时，我偶然发现~~这个。~~ `<del></del>`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-05T12:47:46.697

剪切、复制和粘贴表情符号的另一种方法是：

[https://emojicut.com/](https://emojicut.com/)

# java - web.xml : URL 映射

> ID：11071131
> 
> 赞同：1
> 
> 时间：2012-06-17T12:01:10.400
> 
> 标签：java, jakarta-ee, servlets, web.xml

我有这两行，`web.xml`

`<url-pattern>/</url-pattern> : Index Servlet`
但是
`<url-pattern>/login</url-pattern> : Login Servlet`

当我打开时，它`http://localhost:8084/login/`会转到`Index Servlet`，当我打开时`http://localhost:8084/login`，它会转到`Login Servlet`。和

有什么区别吗？ 我的`http://localhost:8084/login/``http://localhost:8084/login`

`web.xml`

```
<小服务程序>
    <servlet-name>索引</servlet-name>
    <servlet-class>索引</servlet-class>
</servlet>
<小服务程序>
    <servlet-name>登录</servlet-name>
    <servlet-class>登录</servlet-class>
</servlet>

```

和

```
<servlet 映射>
    <servlet-name>索引</servlet-name>
    <url-模式>/</url-模式>
</servlet-mapping>
<servlet 映射>
    <servlet-name>登录</servlet-name>
    <url-pattern>/登录</url-pattern>
</servlet-mapping>

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T15:13:08.027

的 URL 模式`/`具有特殊含义。它即表示“Default Servlet” URL 模式。因此，**每个**不匹配*任何*其他更具体的 URL 模式的`web.xml`请求最终都会出现在这个 servlet 中。请注意，这也涵盖了静态文件，例如普通的 HTML/CSS/JS 和图像文件！通常，“默认 Servlet”已经由 servlet 容器本身提供（参见例如[Tomcat 的`DefaultServlet`文档](http://tomcat.apache.org/tomcat-7.0-doc/default-servlet.html)）。在您自己的 web 应用程序中覆盖“默认 Servlet”应该非常小心，绝对不能这样。

您需要为您的索引 servlet 提供不同的 URL 模式。它应该与您在 中定义的相同`<welcome-file>`。

所以万一

```
<welcome-file-list>
    <welcome-file>index</welcome-file>
</welcome-file-list> 
```

您需要按如下方式映射索引 servlet

```
<servlet-mapping>
    <servlet-name>Index</servlet-name>
    <url-pattern>/index</url-pattern>
</servlet-mapping> 
```

对于您所考虑的特定目的，不需要按照其他答案的建议使用 URL 重写过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T12:07:01.350

是，有一点不同。[要么使用UrlRewriteFilter](http://www.tuckey.org/urlrewrite/)之类的东西来删除尾部斜杠，要么让你的 web.xml 指定两者：

```
<url-pattern>/login</url-pattern> 
```

和

```
<url-pattern>/login/*</url-pattern> 
```

作为到登录 servlet 的映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T03:45:19.363

如果你想让它去登录 Servlet。为什么不试试 Spring URL Mapping

```
@RequestMapping(value="/login", method=RequestMethod.GET)
public String demo(ModelMap map) {

String something = name;

// Do manipulation

return "login"; // Forward to login.jsp
} 
```

观看此[Spring MVC 框架教程](http://youtu.be/Q6hZQ5SzGyM)

# php - .htaccess > 4 个具有相同页面的 url（谷歌会全部索引吗？）

> ID：11071139
> 
> 赞同：1
> 
> 时间：2012-06-17T12:02:31.930
> 
> 标签：php, .htaccess, redirect, url-rewriting

我现在有来自同一个文件的 4 个 url：

*   [http://domain.com/picture.php?name=kim](http://domain.com/picture.php?name=kim) kardashian
*   [http://domain.com/picture.php?name=kim-kardashian](http://domain.com/picture.php?name=kim-kardashian)
*   [http://domain.com/picture/kim](http://domain.com/picture/kim) kardashian
*   [http://domain.com/picture/kim-kardashian](http://domain.com/picture/kim-kardashian)

所有这些链接都有效..

我的 htaccess：

```
RewriteEngine On
RewriteRule ^picture/([^/]*)$ /picture.php?name=$1 [L] 
```

在我的 php 文件顶部（用 - 替换空格）

```
$name  = str_replace('-', ' ', $_GET['name']);
$name  = mysql_escape_string($name);
$pic = mysql_query("SELECT * FROM pics WHERE name = '$name'") or die(mysql_error()); 
```

但我只想使用：[http](http://domain.com/picture/kim-kardashian) ://domain.com/picture/kim-kardashian ，如何使用 htaccess 或 php 将所有其他 url 重定向到这个？

谷歌会索引所有这些网址还是只是[http://domain.com/picture/kim-kardashian](http://domain.com/picture/kim-kardashian)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:24:45.513

在您拥有的规则*之前*添加这些规则：

```
RewriteCond %{THE_REQUEST} ^(GET|POST)\ (.*)%20(.*)\ HTTP
RewriteRule . %2-%3 [R=301,NE]

RewriteCond %{THE_REQUEST} ^(GET|POST)\ /picture.php\?
RewriteCond %{QUERY_STRING} ^name=([^&]+)&?(.*)
RewriteRule . /picture/%1?%2 [R=301] 
```

条件匹配，`%{THE_REQUEST}`因此我们不匹配重写的 URI（如您的规则重写的），并且我们匹配实际请求的 URI。第一个重定向带有空格的 URI 以替换为破折号（一次一个），第二个查找请求`profile.php`并重定向到 URI 的 SEO 友好版本。在客户端获得 301 重定向后，您的规则将在内部重写回 picture.php。

由于 301 重定向，Google 为前 3 个 URI 提供的任何链接最终都会映射到第 4 个。

# sql - 索引视图在没有索引的情况下编写脚本

> ID：11071140
> 
> 赞同：5
> 
> 时间：2012-06-17T12:02:40.243
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我使用 SQL Server 2008 R2。在我的数据库中存在多索引视图和多视图，它们使用这些索引视图和提示`NOEXPAND`。当我通过 SSMS (Database\Tasks\Generate Script ...) 获取我的数据库脚本时，SSMS 产品脚本按以下顺序：

1.  索引视图的脚本
2.  使用上述索引视图的视图脚本
3.  索引视图的聚集索引脚本。

当我运行创建的脚本时，SQL 服务器创建第一个没有聚集索引的索引视图，然后想要创建带有`NOEXPAND`提示的索引视图视图，这会导致引发错误。我做什么？

SSMS 错误：`hint 'noexpand' on object ..(indexed view).. is invalid.`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T16:09:19.103

脚本索引的默认值为 False。您需要将其更改为 true 才能将 包含在`CREATE INDEX`您的视图中。在管理工作室中：

*   工具 > 选项
*   SQL Server 对象资源管理器
*   脚本
*   表和视图选项 > 脚本索引

将选项设置为 True，单击 OK，然后再次尝试生成脚本。

**编辑**

在默认安装中，上述设置是我唯一更改的内容。我生成了以下架构：

```
CREATE TABLE dbo.x(i INT);
GO
ALTER VIEW dbo.v_x
WITH SCHEMABINDING
AS
  SELECT i, c = COUNT_BIG(*)
    FROM dbo.x
    GROUP BY i;
GO
CREATE UNIQUE CLUSTERED INDEX i ON dbo.v_x(i);
GO
CREATE VIEW dbo.v_y
AS
  SELECT i,c FROM dbo.v_x WITH (NOEXPAND);
GO 
```

我右键单击数据库，Tasks > Generate Scripts... 选择了两个视图和表，脚本化到一个新的查询窗口，这就是它产生的（`SET`为了简洁，我删除了所有选项，不是因为它们不是那里或不重要）：

```
USE [foo]
GO
/****** Object:  Table [dbo].[x]    Script Date: 06/20/2012 08:03:59 ******/
CREATE TABLE [dbo].[x](
    [i] [int] NULL
) ON [PRIMARY]
GO
/****** Object:  View [dbo].[v_x]    Script Date: 06/20/2012 08:04:00 ******/
CREATE VIEW [dbo].[v_x]
WITH SCHEMABINDING
AS
  SELECT i, c = COUNT_BIG(*)
    FROM dbo.x
    GROUP BY i;
GO
CREATE UNIQUE CLUSTERED INDEX [i] ON [dbo].[v_x] 
(
    [i] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, 
  IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, 
  ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
/****** Object:  View [dbo].[v_y]    Script Date: 06/20/2012 08:04:00 ******/
CREATE VIEW [dbo].[v_y]
AS
  SELECT i,c FROM dbo.v_x WITH (NOEXPAND);
GO 
```

当我将其更改`USE [foo]`为不同的数据库时，脚本执行得很好（显然事情的顺序是正确的）。

因此，要么您以不同的方式生成脚本，要么您使用了“错误时继续编写脚本”选项，而您的视图会阻止创建索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:22:51.117

我搜索我的问题并找到解决此问题的方法。当您创建一个名为 view1 的简单视图，然后创建另一个名为 view2 的视图，然后在 view1 中使用 view2，然后将 view2 更改为索引视图时，就会出现此问题。要解决此问题，您必须重新创建 view1。

# android - Android：关于滚动视图

> ID：11071147
> 
> 赞同：0
> 
> 时间：2012-06-17T12:04:26.763
> 
> 标签：android, scroll

标题可能不太明显。但这是我的问题。我想模拟一种类似于当我们长按主屏幕上的图标时出现的滚动菜单的滚动效果。该菜单（删除、编辑、更改目录等）可以滚动。有布局吗，或者有人可以指导我看教程吗？

如果我的问题不清楚，请告诉我

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:20:38.197

看看这个教程： [http ://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

它还包含 github 中的开源代码示例： [https ://github.com/lorensiuswlt/NewQuickAction](https://github.com/lorensiuswlt/NewQuickAction)

# macros - 如何使程序在特定屏幕（多个显示器）上打开？

> ID：11071148
> 
> 赞同：0
> 
> 时间：2012-06-17T12:04:30.540
> 
> 标签：macros, bookmarks, multiple-instances, multiple-monitors, television

我有我的电脑连接到我的电视，我使用它，所以我可以在我的沙发上获得高清的 netflix，等等。

我有几个书签位置，我只有在沙发上时才会真正使用它们。我已将这些链接保存到我的桌面，但在屏幕 2（我的电视）上。我的问题是，当我尝试打开书签时，它们将始终在 Firefox 上次关闭的任何屏幕上打开，或者如果有另一个浏览器实例正在运行，它们将在该屏幕上运行。

我想知道是否有一种方法可以设置它，以便只有这些书签会在屏幕 2 上打开一个新的浏览器窗口，而所有其他书签和 Firefox 实例自然会在屏幕 1（主计算机屏幕）上打开。

我见过类似的问题，但没有一个足够具体来解决我的问题。任何帮助，将不胜感激。谢谢 ：-）

我见过的唯一可能的解决方案是编写一个宏机器人，它会自动将浏览器窗口移动到屏幕 2，然后在浏览器关闭时将其返回到屏幕 1，并确定它只在某些书签上激活。我希望有一个更简单的答案，甚至只是其他选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:27:22.353

总是有[UltraMon](http://www.realtimesoft.com/ultramon/)。有点贵，但如果您想在多台显示器上尽可能多地自动化，那么值得。

具体来说，这就是你想要的：[http ://www.realtimesoft.com/ultramon/tour/shortcuts.asp](http://www.realtimesoft.com/ultramon/tour/shortcuts.asp)

# c# - 实体框架与直接数据访问

> ID：11071149
> 
> 赞同：5
> 
> 时间：2012-06-17T12:05:09.333
> 
> 标签：c#, asp.net, entity-framework, ado.net

过去，我一直使用直接数据访问来处理对象（手动运行查询，并将结果映射到数据对象）。我知道微软目前正在推动他们的客户使用 EF 来查询数据对象。

关于这个，我有几个问题要问社区：-

*   如果您有一个复杂的数据库，即几百个表、相当数量的存储过程、视图，那么一切都在 3NF 中。管理两个模式（一个本地 EF 模式映射和一个 DB）的负担是否值得权衡？

*   一旦开始增加数据访问，两者的缓存比较如何？我知道在直接访问中你可以实现你想要的任何形式的缓存，EF 是否允许类似的东西？

*   鉴于微软在大力推动产品并让人们为它们编写（SQL-NS、Linq-to-Sql）之后扼杀产品的历史，EF 发生这种情况的可能性有多大？

正如我所说，我目前正在大量使用直接访问，但正在考虑迁移（即，有新的查询向前发展，而不是全部回溯），并且正在寻求社区其​​他人关于他们观点的建议.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T12:14:45.463

> 如果您有一个复杂的数据库，即几百个表、相当数量的存储过程、视图，那么一切都在 3NF 中。管理两个模式（一个本地 EF 模式映射和一个 DB）的负担是否值得权衡？

您可以使用自动化工具来使您的 EF 架构保持最新状态，所以这并不是那么糟糕。

> 一旦开始增加数据访问，两者的缓存比较如何？我知道在直接访问中你可以实现你想要的任何形式的缓存，EF 是否允许类似的东西？

据我所知，是的。

> 鉴于微软在大力推动产品并让人们为它们编写（SQL-NS、Linq-to-Sql）之后扼杀产品的历史，EF 发生这种情况的可能性有多大？

这个问题太假设了。

我遇到的 EF 问题是它的性能。是的，你得到了快速的发展，但牺牲了性能。使用 EF 很容易编写糟糕且缓慢的代码，如果您不是 100% 知道自己在做什么，那么以后可能会遇到一些严重的性能问题（尤其是在处理数百个表时） .

我建议尝试一些 Micro-ORM 框架，例如 Dapper 或 Massive。您不会牺牲那么多性能，但它比传统的 Ado.net 方法更容易维护。

但是，嘿，这只是我，你可能喜欢 EF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:51:15.120

使用 EF 或任何其他 ORM 工具要记住的是，它只是将某些内容（在 EF 和 Linq2Entities 的情况下为 Linq 表达式树）转换为 SQL 语句。由于那里有一个额外的抽象和解析层，所以它总是比直接查询慢。然而，开发人员通常更容易使用 ORM。幸运的是，大多数 ORM（尤其不确定 EF）提供了一些在需要时仍可直接运行查询的方式。

你提到有一个“复杂”的数据库，这通常意味着有复杂的查询。这是 Linq 不喜欢的东西。例如，如果您最终有连接 13 个表的查询，并且几乎每个返回的列都传递给一个 db 函数，并且有一堆 case 语句和一堆子选择，那么几乎不可能转换到 Linq . 更简单的做法是将复杂性包装在视图中，并使用 EF 来查询视图。

从好的方面来说，EF 为开发人员提供了智能感知，因为构建了真正的类来模仿 DB。根据您的 EF 内容的布局方式，您可以将项目设置为所有类都从 DB 生成，因此如果有人编辑 DB 架构或更改列数据类型，您的 C# 代码将不再编译。使用传统的直接 SQL 查询，直到运行时（或集成测试时）才发现。

这都是权衡... IMO 最好的办法是尝试两者，看看你更喜欢哪个，或者以提供任一选项的方式构建解决方案。在我处理的最后一个应用程序中，我有一个“数据库工厂”类（工厂模式），其他数据访问类将使用它，它们可以向工厂请求一个普通的旧 ADO.NET 命令对象，或者请求ORM 对象（EF 案例中的 Context，但我使用的是 SubSonic，所以它是一个 IQueryable 实现）。这样，您可以通过 EF 进行“简单”查询，并在 SQL 中进行“复杂”查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T20:55:02.907

与直接数据访问相比，EF 的主要优势在于开发人员的生产力。

很少有开发人员再编写汇编代码，我们让编译器生成它。随着 EF 等工具变得更好，我们将更多地使用它们并停止编写 SQL。

但是，有时您需要额外的控制来获得所需的性能，因此您仍然可能需要编写一些 SQL 代码。就像仍然在编写一些汇编代码一样。

转换有效的解决方案没有商业价值。您可以尝试 EF 进行新的开发。

# python - reportlab中的条件分页符

> ID：11071150
> 
> 赞同：9
> 
> 时间：2012-06-17T12:05:42.817
> 
> 标签：python, django, reportlab

我正在使用 Reportlab 鸭嘴兽创建 PDF 表格。我不知道，由于动态内容，页面何时已满。如果我在页面末尾，我如何签出？

鸭嘴兽有什么方法可以检查页尾吗？

我有公司名单，每家公司都有多个业务部门及其收费。

```
 companies = [('company1', 'businessunit1', 500),
                ('company1', 'businessunit2',400),
                ('company2', 'businessunit3',200),
                ('company2', 'businessunit4', 700),
                ('company3', 'businessunit5', 800)
               ] 
```

上面的列表应该为一个公司生成 3 个表，但是如果这个列表有多个公司，则会生成多个表，如果任何表到达页面末尾，则会中断。

```
 fields = ['company name', 'business unit name', 'charge']
      for i, comp in enumerate(companies):
          charges = []
          document.append(Paragraph("<b>%s</b>" %comp[i][0], STYLES['COMPANY_NAME']))
          document.append(Spacer(1, 5))
          charges.append(comp[i][0])
          charges.append(comp[i][1])
          charges.append(comp[i][2])
          charges_table = LongTable([fields] + charges, colWidths=(30,150,100))
          charges_table.setStyle(TableStyle([
                          ('BACKGROUND', (0, 0), (-1, 0), colors.gray),
                          ('FONTSIZE', (0, 0), (-1, 0), 6),
                          ('GRID', (0, 0), (-1, -1), 1, colors.gray),
                          ('FONTSIZE', (0, 0), (-1, -1), 7),
                          ('TEXTCOLOR',(0,-1),(-1,-1),'#FF4500'),
                          ])
                          )

          charges_table.hAlign = 'CENTER'
          document.append(charges_table) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T17:39:13.117

您应该提供一些示例代码，以便我们知道您要完成什么。为什么你想知道页面何时结束？绘制新内容？打印一些诊断信息？

假设你想在页面渲染后绘制一些东西，你可以使用类`afterPage()`中提供的方法`BaseDocTemplate`。来自 ReportLab 的文档：

> 这在页面处理之后调用，并且在当前页面模板的 afterDrawPage 方法之后立即调用。派生类可以使用它来执行依赖于页面中信息的事情，例如字典页面上的第一个和最后一个单词。

基本上，它是`BaseDocTemplate`在绘制页面后调用的。在源代码中，它包含`self`，因为它是`BaseDocTemplate`类的一部分，因此您可以访问它的画布！

您可以在自己的脚本中覆盖该类，然后直接在画布上绘制。

```
from reportlab.platypus import BaseDocTemplate
from reportlab.lib.styles import getSampleStyleSheet
from reportlab.lib.units import inch
from reportlab.lib.pagesizes import A4
from reportlab.platypus import Paragraph

class MyDocTemplate(BaseDocTemplate):
    """Override the BaseDocTemplate class to do custom handle_XXX actions"""

    def __init__(self, *args, **kwargs):
        BaseDocTemplate.__init__(self, *args, **kwargs)

    def afterPage(self):
        """Called after each page has been processed"""

        # saveState keeps a snapshot of the canvas state, so you don't
        # mess up any rendering that platypus will do later.
        self.canv.saveState()

        # Reset the origin to (0, 0), remember, we can restore the
        # state of the canvas later, so platypus should be unaffected.
        self.canv._x = 0
        self.canv._y = 0

        style = getSampleStyleSheet()

        p = Paragraph("This is drawn after the page!", style["Normal"])

        # Wraps and draws the paragraph onto the canvas
        # You can change the last 2 parameters (canv, x, y)
        p.wrapOn(self.canv, 2*inch, 2*inch)
        p.drawOn(self.canv, 1*inch, 3*inch)

        # Now we restore the canvas back to the way it was.
        self.canv.restoreState() 
```

现在您可以使用`MyDocTemplate`与在主逻辑中使用 BaseDocTemplate 相同的方式：

```
if __name__ == "__main__":

    doc = MyDocTemplate(
        'filename.pdf',
        pagesize=A4,
        rightMargin=.3*inch,
        leftMargin=.3*inch,
        topMargin=.3*inch, 
        bottomMargin=.3*inch
    )

    elements = [
        # Put your actual elements/flowables here, however you're generating them.
    ]

    doc.addPageTemplates([
        # Add your PageTemplates here if you have any, which you should!
    ])

    # Build your doc with your elements and go grab a beer
    doc.build(elements) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:58:17.123

您必须计算自己使用的行数。我使用的程序包括：

```
lin += inc
if lin > 580:
    doc.append(PageBreak())
    lin = 5 
```

通过了解表格使用了多少行，您可以知道它是否适合页面的其余部分。

我使用计数“点”，所以我可以处理不同高度的线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T20:19:42.207

[根据如何在 PDF 页面上拆分 ReportLab 表格（并排），将表格拆分](https://stackoverflow.com/questions/9370699/how-to-split-reportlab-table-across-pdf-page-side-by-side)为多个页面需要使用您自己的模板？

表格到达页面末尾时应自动中断。但这是我发现的另一个例子：

*   [http://www.reportlab.com/snippets/15/](http://www.reportlab.com/snippets/15/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-19T02:51:14.210

自动将 longtable 拆分为多个页面，如下所示：

```
from reportlab.platypus import LongTable, TableStyle, BaseDocTemplate, Frame, PageTemplate
from reportlab.lib.pagesizes import letter
from reportlab.lib import colors

def test():
    doc = BaseDocTemplate(
        "test.pdf",
        pagesize=letter,
        rightMargin=72,
        leftMargin=72,
        topMargin=72,
        bottomMargin=18,
        showBoundary=True)

    elements = []
    datas = []
    for i, x in enumerate(range(1, 50)):
        datas.append([i, x])
    t = LongTable(datas)

    tableStyle = [
        ('INNERGRID', (0, 0), (-1, -1), 0.25, colors.black),
        ('BOX', (0, 0), (-1, -1), 0.25, colors.black),
    ]
    t.setStyle(TableStyle(tableStyle))
    elements.append(t)

    frame = Frame(
        doc.leftMargin, doc.bottomMargin, doc.width, doc.height, id='normal')
    doc.addPageTemplates([PageTemplate(id='longtable', frames=frame)])
    doc.build(elements)

if __name__ == '__main__':
    test() 
```

# java - 在 webview 上加载页面后的 android 错误

> ID：11071153
> 
> 赞同：0
> 
> 时间：2012-06-17T12:05:59.400
> 
> 标签：java, android, eclipse

在 webview 上加载网页后，应用程序崩溃返回以下错误。为什么？怎么可能做到？谢谢

```
06-17 11:54:00.077: E/Web Console(308): TypeError: Result of expression 'window.epConfig' [undefined] is not an object. at http://www.myWeb.com/epages/62995389.mobile/es_ES/?ObjectPath=/Shops/62995389/Categories
06-17 11:54:04.966: E/Web Console(308): TypeError: Result of expression 'a(".ep-metaparse").metaparse' [undefined] is not a function. at http://www.myWeb.com/WebRoot/StoreTypes/6.13.3/StratoES/GUI/mobilesf.epk.min.js:33
06-17 11:54:09.117: E/dalvikvm-heap(308): 589824-byte external allocation too large for this process.
06-17 11:54:09.117: E/GraphicsJNI(308): VM won't let us allocate 589824 bytes 
```

来自元素检查器的 javascript 代码，

```
;jQuery.plugin("ep.epk",window.epkStack,function(a,b){a.ready(function(){if(ep.config.autoMetaparse){a(".ep-metaparse").metaparse()}else{a(".ep-metaparse").each(function(){var c=a(this);c.attr("class",c.attr("class").replace(/([^\s]+\(.*\))/,""))})}})}); 
```

# ruby-on-rails - 如何使用 capybara 测试 am 图像/png 结果

> ID：11071154
> 
> 赞同：1
> 
> 时间：2012-06-17T12:06:21.907
> 
> 标签：ruby-on-rails, image, png, cucumber, capybara

使用 Capybara 我想测试：

```
visit("/some_dynamic_resource.png") 
```

并使用返回来测试返回的结果是否真的是图像`page.body`：

```
<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\">
<html>
    <body>
        <p>\x89PNG\r\n\n</p>
    </body>
</html> 
```

我可以看到有：

```
\x89PNG\r\n\n 
```

但我想获取 png 的内容并对其进行一些测试。

你知道这样做的方法吗？

# jquery-ui - 主题化 jquery 对话框

> ID：11071156
> 
> 赞同：0
> 
> 时间：2012-06-17T12:06:54.360
> 
> 标签：jquery-ui

我在同一页面上使用数据表和对话框，我想为每个应用不同的主题。我如何实现它？目前我的数据表主题适用于两者，我如何确定对话框的范围。

下面是我的对话框代码

```
 $('#newVisit').dialog({
                modal: true,
                autoOpen: false,
                draggable: true,
                width: 'auto',
                height: 'auto',
                title: "Add New Visit"

//                    open: function () {
//                        $(this).parents(".ui-dialog:first").find(".ui-dialog-titlebar").addClass("ui-state-error");
//                    }

            });                    //.parent(".ui-dialog").wrap("<div class='theme-smoothness'></div>"); 
```

我尝试过包装但没有成功。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:24:15.720

您是否尝试过使用 css 特性来定义默认 jquery ui 对话框样式的样式？尝试为这些类定义自定义样式（基于对话框动态类插入）：

```
 <div class="**ui-dialog** ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable">
   <div class="**ui-dialog-titlebar** ui-widget-header ui-corner-all ui-helper-clearfix">
      <span id="**ui-dialog-title-dialog**" class="ui-dialog-title">Dialog title</span>
      <a class="ui-dialog-titlebar-close ui-corner-all" href="#"><span class="ui-icon ui-icon-closethick">close</span></a>
   </div>
   <div style="height: 200px; min-height: 109px; width: auto;" class="**ui-dialog-content** ui-widget-content" id="dialog">
      <p>Dialog content goes here.</p>
   </div>
</div> 
```

您可以在此处查看默认布局/样式参考：

[点击“主题”](http://jqueryui.com/demos/dialog/)

# php - HTML/PHP - 验证 - 电子商务网站的基本验证要求？（名字和姓氏以及电子邮件）

> ID：11071157
> 
> 赞同：0
> 
> 时间：2012-06-17T12:06:59.113
> 
> 标签：php, validation, information-retrieval

我正在验证我将在我的网站上使用的表格，以获取有关正在向我们注册在线帐户的企业人员的某些详细信息。

我写这个问题是为了获得一些关于如何正确验证以下类型信息的建议。

为了解释这一点，我将列出一系列数据类型以及我想到的 html 验证。然后可以在一系列 php 验证中重用它，以确保表单始终得到正确验证，但是在我看来，标准的 html 验证看起来比我通过应用我自己的 css 所能实现的任何东西都要好。

名字 - `^[a-zA-Z -]{1,120}`（az，1 到 120 个字符长，大小写字母）

姓氏 -`^[a-zA-Z -]{1,120}`

电子邮件地址 - `^([a-zA-Z0-9_\\-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([a-zA-Z0-9\\-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$`（验证包括主要使用的 .com 和 .co.za 域）

如果有人对改进这些验证模式或其他一些使用更标准的验证模式有任何建议，我们将不胜感激。

此外，任何关于为什么应该或不应该使用它们的信息也会很好。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:14:13.663

您对名称的“验证”排除了所有不使用拉丁字母的语言。为什么？我想你可以检查那里没有任何数字并将其保留在那里。如果您希望没有拉丁名字的人能够使用您的网站，那么您的（数据库？）应该采用 UTF-8 等字符集，并且您必须允许所有内容。即使试图删除粗鲁的词语也可能导致[斯肯索普问题](http://en.wikipedia.org/wiki/Scunthorpe_problem)。

不要使用正则表达式验证电子邮件。邮寄/ ping地址并让该人单击链接。使用正则表达式验证电子邮件地址在技术上是不可能的，而开发的更好的正则表达式可能[是](https://stackoverflow.com/questions/156430/regexp-recognition-of-email-address-hard)[荒谬](https://stackoverflow.com/questions/201323/how-to-use-a-regular-expression-to-validate-an-email-addresses)的。[存在非拉丁域名](http://en.wikipedia.org/wiki/Internationalized_domain_name)，与名称一样，您不能使用拉丁字母来确保它们包含您想要的内容。

此外，由于[ICANN 目前正在出售一些新 gTLD](http://newgtlds.icann.org/en/announcements-and-media/video/overview-en)，这将大大增加可用的名称空间，如果不检查，您将永远无法保证某些东西*确实*存在。

显然，如果您使用的是数据库，请使用准备好的语句来停止 SQL 注入。

# javascript - 使 Div 适合屏幕但扣除左边距

> ID：11071160
> 
> 赞同：0
> 
> 时间：2012-06-17T12:07:06.350
> 
> 标签：javascript, jquery, html, css, width

我有以下结构

```
<div class="mybox">
<div id="imageslide">
    <a href=""><img src="url" /></a>
</div>
</div> 
```

它有固定的位置和left：300px；意味着它将在 300px 之后从左侧开始现在我想让 mybox div 宽度填充屏幕的剩余空间。所以我可以使用 100% 到#imageslide，它使用一些 javascript 将图像适合该 div。

多合一我想让 mybox 或 imageslide 在 300px 之后从左侧开始，并适合屏幕的剩余宽度，并且图像也应该相应地适合容器。

**更新：**

包含图像的宽度和高度为父 div #imageslide 的 100%，因此我无法用 css 覆盖。我可以删除另外添加的 mybox div 以尝试使用 css。我尝试过 css 但不起作用。

**这是网站网址**---------------- [http://saltaa.com/](http://saltaa.com/)

所以在这里我要设置的主页大滑块是一种方式，它会在左侧菜单列之后开始，并且图像将根据屏幕尺寸的宽度和高度进行调整。

**这真的很奇怪。谁帮助我找到解决方案我不知道他/她为什么删除了答案，可能是他对我投了反对票。它很奇怪。至少他/她会允许我检查我的文件而不是接受答案。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:17:47.430

这应该工作：

```
div.mybox {
    position:absolute;
    left: 300px;
    width:100%;
    height:100%;
}

#imageslide {
    left: 300px;
    width:100%;
    height:100%;
}

img {
    left: 300px;
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T12:34:16.093

试试这个：

```
.mybox {
   position: absolute;
   left: 30px;
}

var w = $(window).width() - 30;
$('.mybox').css("width", w) 
```

[http://jsfiddle.net/X5PPP/1/](http://jsfiddle.net/X5PPP/1/)

# android - 如何将qt资源添加到android APK文件？

> ID：11071161
> 
> 赞同：1
> 
> 时间：2012-06-17T12:07:24.467
> 
> 标签：android, c++, qt, cross-platform

我正在将一个小`Qt`应用程序移植到`Android`. 我正在使用**Qt Creator**。

我有一个包含一些图像的资源文件。问题是如何将这些文件添加到 android *APK 包*中。
另一个问题是如何访问它们`Qt`？
我可以使用类似的东西：

> QIcon actions_ok = QIcon(RES_PATH + "check.png")?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T12:11:29.227

您需要将图像添加到您的`assets`文件夹，然后使用以下 URI 访问它们：

```
file:///android_asset/check.png 
```

# java - java中的排序点（2d，3d等）

> ID：11071163
> 
> 赞同：0
> 
> 时间：2012-06-17T12:08:12.763
> 
> 标签：java, sorting

什么是对点进行排序的最佳方法（首先基于 x 坐标，如果 x 相同，则基于 y 坐标，如果 y 相同，则基于 z 坐标等等。）在 java 中不实现排序算法？

在 c++ 中，它可以在对的帮助下非常容易地完成（如下所示）。

对于 2D：

```
Vector < pair < int,int > > plane;
sort(plane.begin(),plane.end()) 
```

对于 3D：

```
Vector < pair < int,pair < int,int > > > space;
sort(space.begin(),space.end()); 
```

提前致谢。山塔努

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T12:10:33.090

您不需要实现排序算法。您只需要实现一个比较器，然后可以将其与[`Collections.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%2C%20java.util.Comparator%29).

有关更多信息，请参阅Java 教程中的[*对象排序*](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:20:12.793

Java 中的选项很少。

1.  `Collections.sort(List l)`

    利用`java.lang.Comparable // For sorting only on the basis of one property`

2.  `Collections.sort(List l, Comparator c)`

    利用`java.util.Comparator // For sorting in more than one way`

3.  如果需要唯一性，则与排序一起使用`TreeSet()`

    ```
    TreeSet()   // Sorting in Natural order

    TreeSet(Comparator c)   // Sorting in more than one way. 
    ```

# libreoffice - LibreOffice Presenter 导出带视频的 PDF

> ID：11071164
> 
> 赞同：3
> 
> 时间：2012-06-17T12:08:22.380
> 
> 标签：libreoffice

我有一个演示文稿，其中嵌入了一个视频。我想将此演示文稿导出为包含视频的 PDF。现在，不是视频，而是一个带有问号的图像。演示文稿中的视频效果很好。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:48:04.597

您可以尝试使用 7-zip 之类的东西打开 odp，然后编辑 content.xml，这样电影的 href 而不是 ../path/to/file.extension 它是 Video/file.extension 然后在 odp 中创建一个文件夹使用 7-zip，调用文件夹 Video，并将您在 content.xml 中引用的任何文件放在那里。我自己还在测试这种方法，一旦我回到我的 Linux 笔记本电脑和它的 libre office 安装，我会告诉你我是怎么做的。

令人讨厌的是，该技巧可以使您的 odp 可移植，但是当您将该 ODP 转换为 pd 时，它就不起作用了。不幸的是，该功能目前似乎在 Impress 上不可用。有这个指南，但它对我不起作用。我认为需要完成功能请求。

# coq - 如何在 Coq 中证明命题外延性？

> ID：11071165
> 
> 赞同：7
> 
> 时间：2012-06-17T12:08:35.870
> 
> 标签：coq

我试图证明关于 Prop 的替换定理，但我失败了。下面的定理能否在 coq 中被证明，如果不能，为什么不能。

```
 Theorem prop_subst:
    forall (f : Prop -> Prop) (P Q : Prop), 
      (P <-> Q) -> ((f P) <-> (f Q)). 
```

关键是，在逻辑上，证明将是归纳法。据我所知，道具不是归纳定义的。如何在 Coq 中证明这样的定理？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T17:09:44.130

答案是：我正在寻找的属性称为*命题外延性*，意思是`forall p q : Prop, (p <-> q) -> (p = q)`。反之，微不足道。这是在 中定义的东西`Library Coq.Logic.ClassicalFacts`，以及来自经典的其他事实，即非直觉逻辑。上面的定义称为`prop_extensionality`，可以如下使用：`Axiom EquivThenEqual: prop_extensionality`. 现在您可以应用`EquivThenEqual`，将其用于重写等。感谢 Kristopher Micinski 指出可扩展性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T16:27:34.213

您正在寻找的东西称为“可*扩展*性：”

[http://coq.inria.fr/V8.1/faq.html#htoc41](http://coq.inria.fr/V8.1/faq.html#htoc41)

[http://coq.inria.fr/stdlib/Coq.Logic.FunctionalExtensionality.html](http://coq.inria.fr/stdlib/Coq.Logic.FunctionalExtensionality.html)

[http://en.wikipedia.org/wiki/Extensionality](http://en.wikipedia.org/wiki/Extensionality)

编辑：

您可以承认*谓词*可扩展性，如 Coq FAQ 中所述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-28T22:51:28.847

这就是命题外延性。

```
Lemma blah: forall (P Q: Prop), (forall (f:Prop -> Prop), f Q -> f P) -> P = Q.
  intros P Q H.
  apply (H (fun x => x = Q)).
  reflexivity.
Qed.

Section S.

Hypothesis prop_subst:
  forall (f : Prop -> Prop) (P Q : Prop), 
    (P <-> Q) -> ((f P) <-> (f Q)).

Lemma prop_subst_is_ext: forall P Q, (P <-> Q) -> P = Q.
  intros.
  apply blah.
  intro f.
  destruct (prop_subst f P Q); assumption.
Qed.

End S.

Check prop_subst_is_ext. 
```

# c# - vb6背景下的面向对象方法

> ID：11071166
> 
> 赞同：0
> 
> 时间：2012-06-17T12:08:38.987
> 
> 标签：c#, vb6

我来自 vb6 背景，我正在慢慢测试 c# 水域。我的问题是我很难在我的程序中采用面向对象的方法，因为我倾向于按照我在 vb6 中编码的方式来设计我的程序。以我正在创建的软件的这个数据输入部分为例，正如你所看到的，我仍然按照我在 vb6 中编码的方式对其进行编码。

```
namespace WLMS
{
public partial class frmBA : Form
{
    enum status
    {
        add,
        edit,
        delete,
        complete,
        datafill,
    }

    status stat;
    clsSqlCommands sqlCommands = new clsSqlCommands();
    string connectionString = ConfigurationManager.ConnectionStrings["Main"].ConnectionString;
    int dataID = 0;

    public frmBA()
    {
        InitializeComponent();

    }

    private void displayInGrid()
    { 
        DataTable dt = new DataTable();
        dt = sqlCommands.dataFill("select series,baName,baLoc from tblBA order by baName",connectionString);
        if (dt != null)
        {
            dgBA_List.DataSource = dt;
            dgBA_List.Columns[0].HeaderText = null;
            dgBA_List.Columns[1].HeaderText = "BA NAME";
            dgBA_List.Columns[2].HeaderText = "BA LOCATION";
            dgBA_List.Columns[0].Visible = false;
            dgBA_List.Columns[1].Width = 100;
            dgBA_List.Columns[2].Width = 200;
            dataID = 0;        
        }
    }

    private void frmBA_Load(object sender, EventArgs e)
    {
        displayInGrid();
    }

    private void tlADD_Click(object sender, EventArgs e)
    {
        groupBox1.Enabled = true;
        clearTextBoxes(groupBox1);
        txtBAName.Focus();
        stat = status.add;
    }

    private void tlEDIT_Click(object sender, EventArgs e)
    {
        if (dataID != 0)
        {
            groupBox1.Enabled = true;
            stat = status.edit;
        }
        else
            MessageBox.Show("click on item to edit");
    }

    private void tlDELETE_Click(object sender, EventArgs e)
    {
        deleteData();
    }

    private void tlSAVE_Click(object sender, EventArgs e)
    {
        if (checkFilledTextBoxes(groupBox1) == true)
        {
            switch (stat)
            {
                case status.add:
                {
                    addNewData();
                    break;
                }
                case status.edit:
                {
                    editData();
                    break;
                }
                default:
                {
                    break;
                }
            }
        }

    }

    private bool checkForDuplicates()
    {
        DataRow dtr = sqlCommands.getOneRow("select count(*) as cnt from tblba where baName = '" + txtBAName.Text + "' and baLoc = '" + txtBALoc.Text + "'", connectionString);
        if (Convert.ToInt16(dtr["cnt"]) < 1)
        {
            return false;
        }
        else
            return true;
    }

    private void editData()
    {
        if (!checkForDuplicates())
        {
            sqlCommands.dataManipulate("update tblBa set baName = '" + txtBAName.Text + "',baLoc =  '" + txtBALoc.Text + "' where series = " + dataID + "", connectionString);
            clearTextBoxes(groupBox1);
            groupBox1.Enabled = false;
            stat = status.complete;
            displayInGrid();
            MessageBox.Show("Record Edited");
        }
        else
            MessageBox.Show("Duplicate record");
    }

    private void deleteData()
    {
        DialogResult dialogResult = MessageBox.Show("Are you sure?", "", MessageBoxButtons.YesNo);
        if (dialogResult == DialogResult.Yes)
        {
            sqlCommands.dataManipulate("delete from tblBa where series = " + dataID + "", connectionString);
            clearTextBoxes(groupBox1);
            groupBox1.Enabled = false;
            stat = status.complete;
            displayInGrid();
            MessageBox.Show("Record deleted");
        }
        else
            MessageBox.Show("Duplicate record");
    }

    private void addNewData()
    {
        if (!checkForDuplicates())
        {
            sqlCommands.dataManipulate("insert into tblBa (baName,baLoc) values ('" + txtBAName.Text + "','" + txtBALoc.Text + "')", connectionString);
            clearTextBoxes(groupBox1);
            txtBAName.Focus();
            stat = status.complete;
            displayInGrid();

            MessageBox.Show("Record Added");
        }
        else
            MessageBox.Show("Duplicate record");
    }

    private void clearTextBoxes(GroupBox gprx)
    {
        foreach (TextBox txtBx in gprx.Controls.OfType<TextBox>())
        {
            txtBx.Text = "";
        }
    }

    private Boolean checkFilledTextBoxes(GroupBox gprx)
    {
        foreach (TextBox txtBx in gprx.Controls.OfType<TextBox>())
        {
            if (txtBx.Text == "")
                return false;
        }
        return true;
    }

    private void tlEXIT_Click(object sender, EventArgs e)
    {
        this.Dispose();
    }

    private void dgBA_List_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        int rowIndex = e.RowIndex;
        DataGridViewRow row = dgBA_List.Rows[rowIndex];
        dataID = Convert.ToInt16(row.Cells[0].Value);
        txtBALoc.Text = row.Cells[1].Value.ToString();
        txtBAName.Text = row.Cells[2].Value.ToString();
        groupBox1.Enabled = false;
    }
}
} 
```

它有两个文本框，位于组框内，一个 datagridview 和 5 个工具条按钮用于添加、编辑、删除、保存和退出。我的问题是，如何重组我的代码以采用面向对象的方法？

请帮忙..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:12:51.000

当您使用 GUI 时，我建议您阅读 MVC 模式 (Winforms)为 C#或 MVVM 模式 (WPF)[寻找干净的 WinForms MVC 教程](https://stackoverflow.com/questions/955973/looking-for-clean-winforms-mvc-tutorial-for-c-sharp)[MVVM：从头到尾的教程？](https://stackoverflow.com/questions/1405739/mvvm-tutorial-from-start-to-finish).

我还建议阅读一本体面的设计模式书。我在第一次开始时发现非常有用的是 Head First Design Patterns 这本书。很容易跟上。他们使用的语言是 Java，但这在语法上非常接近 C#。

也许还可以阅读这篇关于 GUI 架构的优秀 Martin Fowler 文章：[http ://martinfowler.com/eaaDev/uiArchs.html](http://martinfowler.com/eaaDev/uiArchs.html)

编辑：继丹尼斯的评论之后。您还可以查看用于 Winform 开发的 MVP 模式。实现该模式的几种不同方式：http: [//martinfowler.com/eaaDev/SupervisingPresenter.html](http://martinfowler.com/eaaDev/SupervisingPresenter.html)和[http://martinfowler.com/eaaDev/PassiveScreen.html](http://martinfowler.com/eaaDev/PassiveScreen.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:18:40.583

简单的答案 - 你不能。

取决于技术。

*   ASP.NET——使用MVC，那就顺其自然了。
*   WPF：好吧，无论如何，UI 都在 XAML 中。Winforms：你不能，控制是在设计器中完成的，数据绑定不太好。

在 WInForms 中你能做的最好的事情实际上不是将逻辑保存在表单中，而是保存在另一个对象中，但是表单是按照设计者想要的方式完成的，或者你失去了所有兼容性。

# database - 与表名非常相似的列的Sql Server命名

> ID：11071169
> 
> 赞同：2
> 
> 时间：2012-06-17T12:09:08.760
> 
> 标签：database, database-design

当唯一的字段是实际区域和描述时，命名表的列（例如区域）的好策略是什么。当表也称为 Region 时，将列命名为 Region 会导致 ORMS 等问题。

**编辑** 忘了提到命名标准需要使用身份字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:12:04.977

RegionId 或 RegionName 和 Description 怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:31:14.597

如果您将 Region 本身用作 ID，您仍然可以将其命名为 RegionId，但您必须确保其他项目的值不会相同，否则它将不是有效 ID，如果当您说区域，例如地理区域，那么最好使用另一个字段作为 ID（和初级键），例如邮政编码或适用于区域的任何唯一值。或者您可以使用多个字段作为主键，例如 Region Table 或关联表中的 country->State->Region（或任何不同的顺序）。

# javascript - 我应该在 body 标签上使用 onload 还是检测 URL？

> ID：11071177
> 
> 赞同：0
> 
> 时间：2012-06-17T12:09:59.350
> 
> 标签：javascript, html, url, onload

我有一个 JavaScript 函数，它只能在网站的特定页面上运行。

该函数存在于一个单独的`script.js`文件中，该文件在站点上的每个页面之间共享。

为了确保此功能仅在特定页面上运行，我目前将 onload 属性硬编码到我希望它运行的页面上的 body 标记，例如`<body onLoad="myFunction()">`

我正在考虑删除它，而是在我的函数中添加一些代码，从而获取当前 URL，如果它与允许的 URL 列表中的一个 URL 匹配，那么它将运行。

**这样做是否值得，还是我应该保留只为每个正文标签添加一个 onload 属性的需要？**

**还是有更好的解决方案只在特定页面上运行功能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:15:13.230

Paul Irish 有一篇关于如何在所需页面上加载脚本的好文章，请查看：

*   [基于标记的不显眼的全面 DOM 就绪执行](http://paulirish.com/2009/markup-based-unobtrusive-comprehensive-dom-ready-execution/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:16:03.207

您可以检查当前的 url ( `location.href`)。但是，拥有一些您要查找的标识符会更清晰。例子：

```
<body id="thePageIwant">
</body> 
```

然后：

```
$(function () {
    if ($('#thePageIwant').length > 0) {
        // do something
    }
}); 
```

# php - 将设置保存到数据库中

> ID：11071183
> 
> 赞同：2
> 
> 时间：2012-06-17T12:10:58.580
> 
> 标签：php, mysql, smarty

我有一张桌子：

```
CREATE TABLE siteConfig (
    settingName     VARCHAR(64) NOT NULL,
    value           VARCHAR(255),
    PRIMARY KEY (settingName)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

显示这些设置。设置显示.php

```
$setting = siteConfig::find_all();

    $this_page = array(
                        'recaptcha_public_key','recaptcha_private_key','spam_register','spam_login',
                        'spam_register_emp','spam_login_emp','spam_apply','spam_contact','spam_share',
                        'spam_feedback','spam_forgot','spam_rsc'
                       );

    foreach ( $setting as $s )
    {
        if( in_array($s->settingName, $this_page) )
        {
            $_SESSION['set_ses'][ $s->settingName ] = isset($_SESSION['set_ses'][ $s->settingName ]) ? $_SESSION['set_ses'][ $s->settingName ] : $s->value;
        }
    } 
```

显示这些设置的 html 的一部分。

```
<tr>
    <td>&nbsp;</td>
    <td>{lang mkey='label' skey='spam_register'}</td>
    <td><input type="checkbox" name="txt_setting[spam_register]" id="spam_register" class="checkboxField" {if $smarty.session.set_ses.spam_register == 1 } checked="checked"{/if} /></td>
</tr> 
```

一旦所有信息都更改，则此页面将其保存到数据库。更新.php

```
foreach( $_POST['txt_setting'] as $k => $v )
    {
        $setting->settingName   = $k;
        $setting->value     = $v;

        if( $setting->updateSiteConfig() )
            $k = true;
    } 
```

当我选中该框时，我的 update.php 什么也看不到。

我不知道如何从这些复选框中获取 1 或 0 值。

固定的.................

```
$yes_or_no_key=array(list of my keys);
if( in_array($k, $yes_or_no_key) )
        {
            $setting->value = $_POST['txt_setting'][$k] == 'on' ? 1 : 0;
        } 
```

这解决了我的问题。感谢您的快速回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:16:57.117

> 复选框的值仅在它们被选中时发送！- 死亡

所以你需要这样的东西：

```
if (!isset($_POST['txt_setting[spam_register]']) $_POST['txt_setting[spam_register]'] = 0; // 0 value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T12:18:49.033

如果您需要特定选项的值为 1 或 0，我建议使用无线电。

```
<input type="radio" name="txt_setting[spam_register]" id="spam_register" class="checkboxField" value="0" {if $smarty.session.set_ses.spam_register == 1 } checked="checked"{/if} />    
<input type="radio" name="txt_setting[spam_register]" id="spam_register" class="checkboxField" value="1" {if $smarty.session.set_ses.spam_register == 1 } checked="checked"{/if} /> 
```

此外，请记住在表单中设置值，以便您可以在 PHP 中使用 $_POST 或 $_GET 访问它们。

# jsf-2 - 如何在 jsf 中将 Collection 转换为实体对象？

> ID：11071184
> 
> 赞同：1
> 
> 时间：2012-06-17T12:11:03.447
> 
> 标签：jsf-2

我已经采取了**`Collection<Edition> selectedEditions;`**。当我这样迭代时：

```
 Collection<Edition> edlist=(java.util.Collection)selectedEditions;         
for(Edition ed:edlist){ // error at this line
            EditionID=ed.getEditionID();
            NewspaperID=ed.getNewspaper().getNewspaperID();
            StateID=ed.getCity().getState().getStateID();
            System.out.print("nid..........."+NewspaperID);
            System.out.print("sid..........."+StateID);
        } 
```

然后它给出如下错误：java.lang.ClassCastException: java.lang.String cannot be cast to entity.Edition
my getter setter：

```
public Collection<Edition> getSelectedEditions() {
                return selectedEditions;
}
public void setSelectedEditions(Collection<Edition> selectedEditions) {
        this.selectedEditions = selectedEditions;
    } 
```

和

```
 </h:selectManyCheckbox>
                            <h:dataTable id="dt1" value="#{adcreateBean.selectedEditions}"  var="it" styleClass="nostyle" width="100%">
                                        <f:facet name="header">
                                            <h:outputText value="You have selected :" />
                                        </f:facet>
                                        <h:column>
                                            <h:outputText value="#{it}" />
                                     </h:column>
                                   </h:dataTable> 
```

那么，我怎样才能转换为 entity.Edition？正如在回答这个问题时所说的（[[我如何在 jsf 中获得多选复选框值？](https://stackoverflow.com/questions/11065427/how-can-i-get-multiselected-checkbox-value-in-jsf][1])），我该如何转换？

[如何在 jsf 中获取多选复选框值？](https://stackoverflow.com/questions/11065427/how-can-i-get-multiselected-checkbox-value-in-jsf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:41:59.340

正如[您在上一个问题](https://stackoverflow.com/questions/11066083/how-to-get-name-of-the-selected-checkbox-value-from-id)中评论/回答的那样，您只需要创建一个在和`Converter`之间转换的自定义。您只需要创建一个实现的类，然后相应地实现这些方法。`String``Edition`[`javax.faces.convert.Converter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/Converter.html)

```
@FacesConverter("editionConverter")
public class EditionConverter implements Converter {

    @Override
    public Object getAsString(FacesContext context, UIComponent component, Object object) {
        // Write code yourself which converts from Edition object to its unique 
        // String representation. This string will then be used in HTML and HTTP.
    }

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) {
        // Write code yourself which converts from unique String representation
        // back to Edition object. This object will then be used in JSF model.
    }

} 
```

通常，技术 ID 用作唯一`String`表示。这是一个基本的启动示例：

```
@FacesConverter("editionConverter")
public class EditionConverter implements Converter {

    @Override
    public Object getAsString(FacesContext context, UIComponent component, Object object) {
        Long id = (object instanceof Edition) ? ((Edition) object).getId() : null;
        return (id != null) ? String.valueOf(id) : null;
    }

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) {
        Long id = (submittedValue != null) ? Long.valueOf(submittedValue) : null;
        return (id != null) ? someEditionService.find(id) : null;
    }

} 
```

最后在`<h:selectManyCheckbox>`.

```
<h:selectManyCheckbox ... converter="editionConverter"> 
```

请注意，这与铸造**绝对不同。**`Edition`根本不是的超类或子类`String`。要了解究竟什么是强制转换，请阅读[Oracle 自己的关于该主题的基本 Java 教程](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)。

# c - 在不同的函数中分配的空闲内存？

> ID：11071190
> 
> 赞同：67
> 
> 时间：2012-06-17T12:11:30.860
> 
> 标签：c, pointers, memory-management, malloc, free

我正在尝试学习 C 并且我目前正在尝试编写一个基本的堆栈数据结构，但我似乎无法获得基本的`malloc`/`free`正确的。

这是我一直在使用的代码（我只是在这里发布一小部分来说明一个特定的问题，而不是全部代码，但错误消息是通过在 中运行此示例代码生成的`valgrind`）

```
#include <stdio.h>
#include <stdlib.h>

typedef struct Entry {
    struct Entry *previous;
    int value;
} Entry;

void destroyEntry(Entry entry);

int main(int argc, char *argv[])
{
    Entry* apple;
    apple = malloc(sizeof(Entry));
    destroyEntry(*(apple));
    return 0;
}

void destroyEntry(Entry entry)
{
    Entry *entry_ptr = &entry;
    free(entry_ptr);
    return;
} 
```

当我用 运行它`valgrind`时`--leak-check=full --track-origins=yes`，我收到以下错误：

```
==20674== Invalid free() / delete / delete[] / realloc()
==20674==    at 0x4028E58: free (vg_replace_malloc.c:427)
==20674==    by 0x80485B2: destroyEntry (testing.c:53)
==20674==    by 0x8048477: main (testing.c:26)
==20674==  Address 0xbecc0070 is on thread 1's stack 
```

我认为这个错误意味着该`destroyEntry`函数不允许修改 main 中显式分配的内存。是对的吗？为什么我不能只在另一个函数中`free`分配内存？`main`（并且这种行为是否特定于 main？）

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-17T12:14:41.043

每当您将参数传递给函数时，都会创建一个副本，并且该函数在该副本上工作。因此，在您的情况下，您正在尝试`free`复制原始对象，这没有任何意义。

您应该修改您的函数以获取一个指针，然后您可以让它`free`直接在该指针上调用。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-06-17T12:16:04.263

这是按值传递，这意味着创建了副本，因此您尝试释放局部变量`entry`所在的内存。请注意，这`entry`是一个具有自动存储持续时间的对象，当您的程序超出`destroyEntry`功能范围时，它所在的内存将被自动释放。

```
void destroyEntry(Entry entry)
{
    Entry *entry_ptr = &entry;
    free(entry_ptr);
    return;
} 
```

您的函数应该采用指针（通过引用传递）：

```
void destroyEntry(Entry *entry)
{
    free(entry);
} 
```

然后，`destroyEntry(*(apple));`您只需调用`destroyEntry(apple);`. 注意，如果没有与function相关的其他`destroyEntry`功能，那是多余的，最好直接调用`free(apple)`。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-20T15:39:44.037

这里的其他答案指出了主要问题——因为当你在 main() 中调用 destroyEntry 时取消引用你的苹果，它通过引用传递，创建一个副本。

即使你知道你的问题，它也有助于回到错误并尝试将你所看到的文本与问题联系起来，这样下次出现问题时你可能更有可能快速解决它。我发现 C 和 C++ 错误有时看起来非常模棱两可。

通常，当我在释放指针或删除对象时遇到问题时，我喜欢打印出地址，尤其是在我分配地址和尝试释放它的时候。valgrind 已经给了你坏指针的地址，但它有助于将它与一个好的指针进行比较。

```
int main()
{
  Entry * apple;
  apple = malloc(sizeof(Entry));
  printf("apple's address = %p", apple);  // Prints the address of 'apple'
  free(apple);   // You know this will work
} 
```

完成此操作后，您会注意到 printf() 语句为您提供了一个类似于 0x8024712 的地址（只是在正确的一般范围内构成一个地址），但您的 valgrind 输出给出了 0x4028E58。您会注意到它们位于两个非常不同的位置（实际上，“0x4 ...”在堆栈上，而不是 malloc() 分配的堆上，但我假设您刚刚开始那是对你来说还不是危险信号），所以你知道你正试图从错误的地方释放内存，因此“无效的 free()”。

所以从那里你可以对自己说“好吧，不知何故我的指针被损坏了。” 您已经将您的问题归结为一个小的、可编译的示例，因此您很快就可以从那里解决它。

*TL;DR - 当遇到与指针相关的错误时，请尝试打印地址或在您最喜欢的调试器中查找它们。它通常至少会为您指明正确的方向。*

当然，这并不是阻止您在 Stack Exchange 上发布您的问题。数以百计的程序员可能会从您这样做中受益。

# database - 来自数据库的持续集成数据

> ID：11071191
> 
> 赞同：0
> 
> 时间：2012-06-17T12:11:36.747
> 
> 标签：database, continuous-integration

我在 K. Scott Allen 的博客和Paul M. Duvall的“*持续集成，提高软件质量和降低风险*”一书中阅读了很多关于 CI 和数据库的内容。但是我仍然对数据库中的数据有几个问题：

如果我以应该重建数据库的方式更改我的数据库怎么办。在这种情况下，我可以从我的 VCS 运行我的所有创建/删除/更改脚本，并且我的数据库将启动并运行。除了我的数据。开发和测试环境有比较简单的解决方案，但是我的QA和生产环境大不了。如何处理我的部署中的数据？

有没有人有这方面的经验或者有没有人有关于这个的好博客文章？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:20:14.933

首先我必须说我没有读过这本书，因此我不知道包含的自动化代码和该代码涵盖的任务/案例。

我不太确定您如何定义数据库重建的必要性。

常见的情况是在开发中更改数据库模式并将其同步到其他环境（通常使用实用程序）。更改还可能涉及包含数据的新表（即新查找表）的存在，需要数据同步。如果一切开发和测试都很好，并且同步准确，那么 QA 和生产环境就没有问题。但是最好有一个回滚解决方案（这是第一个应该测试的）。

很少（？）对数据库的更改需要内部数据迁移。这是一个完全不同的情况，有一个强制性的回滚计划。根据我的经验，这样的案例会导致严重的停机时间。一个很好的例子是 hays.com（全球招聘）；他们在 2011 年（周末）将其国家站点数据库一一更改为所有域都停机的通用模式。

如果我错过了你的观点，请告诉我。

# java - 如何创建动态树形菜单 EXT-GWT(GXT)

> ID：11071194
> 
> 赞同：-1
> 
> 时间：2012-06-17T12:11:56.870
> 
> 标签：java, gwt, gxt

谁能建议我如何创建一个数据库驱动的树形菜单来调用表单？

我创建了一个树形菜单，但它是硬编码的（不是动态的）。我还必须为每个菜单项引入一些点击事件来调用表单。但我不确定如何去做。

所以我的问题是如何动态创建树形菜单以及处理单击事件以调用任何表单（也是动态的）的技术是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:08:02.207

首先，您需要树的某些部分，如您所说的硬编码。您可以查询您的数据库，获取您需要的数据，并使用此数据创建您想要的任何内容（复选框、树项等）并将其添加到您的树中。你不必担心给所有东西起不同的名字，只要确保你的听众是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-13T11:41:08.437

请找到创建动态树的代码。在这个我从文本框中获取数据并将其添加到树中。

```
HorizontalPanel hpanl = new HorizontalPanel();

    tree.addSelectionHandler( new SelectionHandler<TreeItem>() {

        @Override
        public void onSelection( SelectionEvent<TreeItem> event ) {

            tbox.setText( getChildToParentRoot( event ) );
            System.out.println("Height::"+event.getSelectedItem().getOffsetHeight()+"Weight::"+event.getSelectedItem().getOffsetWidth());
            System.out.println( "Selected::" + event.getSelectedItem().getParentItem() );
            Window.alert( "Selected Item:" + event.getSelectedItem().getParentItem().getText() );

        }

        private String getChildToParentRoot( SelectionEvent<TreeItem> event ) {
            TreeItem child = event.getSelectedItem();
            String st = null;
            while ( child.getParentItem() != null ) {
                st = st + child.getText();
                child = child.getParentItem();
            }
            st = st + child.getText();

            return st;
        }

    } );

    hpanl.setBorderWidth( 1 );
    hpanl.setSpacing( 5 );
    hpanl.add( option );
    Button subtbtn = new Button( "Add" );
    subtbtn.addClickHandler( new ClickHandler() {

        @Override
        public void onClick( ClickEvent event ) {
            String option1 = option.getText();
            System.out.println( "TextBox Value::" + option1 );
            if ( tree.getSelectedItem() == null ) {
                tree.addItem( new TreeItem( option1 ) );
            }
            else {

                TreeItem current = tree.getSelectedItem();

                current.setSelected( false );
                current.addItem( new TreeItem( option1 ) );
            }

        }
    } );
    Button delete = new Button( "Delete" );
    delete.addClickHandler( new ClickHandler() {

        @Override
        public void onClick( ClickEvent event ) {
            tree.getSelectedItem().remove();

        }
    } );
    hpanl.add( subtbtn );
    hpanl.add( delete );
    VerticalPanel vpanel = new VerticalPanel();

    vpanel.add( tree );
    hpanl.add( tbox );
    hpanl.add( vpanel );
    RootPanel.get().add( hpanl ); 
```

# c - OpenCL 的精度，hello world 示例中的浮点比较

> ID：11071196
> 
> 赞同：2
> 
> 时间：2012-06-17T12:12:30.250
> 
> 标签：c, visual-studio-2010, opencl, gpgpu

我要学习 OpenCL 并想轻松开始。

我发现并修改了这个 hello world 示例，但没有任何必要。 [http://developer.apple.com/library/mac/#samplecode/OpenCL_Hello_World_Example/Introduction/Intro.html](http://developer.apple.com/library/mac/#samplecode/OpenCL_Hello_World_Example/Introduction/Intro.html)

```
//
// File:       hello.c
//
// Abstract:   A simple "Hello World" compute example showing basic usage of OpenCL which
//             calculates the mathematical square (X[i] = pow(X[i],2)) for a buffer of
//             floating point values.
//             
//
// Version:    <1.0>
//
// Disclaimer: IMPORTANT:  This Apple software is supplied to you by Apple Inc. ("Apple")
//             in consideration of your agreement to the following terms, and your use,
//             installation, modification or redistribution of this Apple software
//             constitutes acceptance of these terms.  If you do not agree with these
//             terms, please do not use, install, modify or redistribute this Apple
//             software.
//
//             In consideration of your agreement to abide by the following terms, and
//             subject to these terms, Apple grants you a personal, non - exclusive
//             license, under Apple's copyrights in this original Apple software ( the
//             "Apple Software" ), to use, reproduce, modify and redistribute the Apple
//             Software, with or without modifications, in source and / or binary forms;
//             provided that if you redistribute the Apple Software in its entirety and
//             without modifications, you must retain this notice and the following text
//             and disclaimers in all such redistributions of the Apple Software. Neither
//             the name, trademarks, service marks or logos of Apple Inc. may be used to
//             endorse or promote products derived from the Apple Software without specific
//             prior written permission from Apple.  Except as expressly stated in this
//             notice, no other rights or licenses, express or implied, are granted by
//             Apple herein, including but not limited to any patent rights that may be
//             infringed by your derivative works or by other works in which the Apple
//             Software may be incorporated.
//
//             The Apple Software is provided by Apple on an "AS IS" basis.  APPLE MAKES NO
//             WARRANTIES, EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION THE IMPLIED
//             WARRANTIES OF NON - INFRINGEMENT, MERCHANTABILITY AND FITNESS FOR A
//             PARTICULAR PURPOSE, REGARDING THE APPLE SOFTWARE OR ITS USE AND OPERATION
//             ALONE OR IN COMBINATION WITH YOUR PRODUCTS.
//
//             IN NO EVENT SHALL APPLE BE LIABLE FOR ANY SPECIAL, INDIRECT, INCIDENTAL OR
//             CONSEQUENTIAL DAMAGES ( INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
//             SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
//             INTERRUPTION ) ARISING IN ANY WAY OUT OF THE USE, REPRODUCTION, MODIFICATION
//             AND / OR DISTRIBUTION OF THE APPLE SOFTWARE, HOWEVER CAUSED AND WHETHER
//             UNDER THEORY OF CONTRACT, TORT ( INCLUDING NEGLIGENCE ), STRICT LIABILITY OR
//             OTHERWISE, EVEN IF APPLE HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
//
// Copyright ( C ) 2008 Apple Inc. All Rights Reserved.
//

////////////////////////////////////////////////////////////////////////////////

#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
//#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <CL/opencl.h>

#define Warning(...)    fprintf(stderr, __VA_ARGS__)
////////////////////////////////////////////////////////////////////////////////

// Use a static data size for simplicity
//
#define DATA_SIZE (1024)

////////////////////////////////////////////////////////////////////////////////

// Simple compute kernel which computes the square of an input array 
//
const char *KernelSource = "\n" \
"__kernel void square(                                                  \n" \
"   __global float* input,                                              \n" \
"   __global float* output,                                             \n" \
"   const unsigned int count)                                           \n" \
"{                                                                      \n" \
"   int i = get_global_id(0);                                           \n" \
"   if(i < count)                                                       \n" \
"       output[i] = input[i] * input[i];                                \n" \
"}                                                                      \n" \
"\n";

////////////////////////////////////////////////////////////////////////////////

/*
 * CLErrString --
 *
 *      Utility function that converts an OpenCL status into a human
 *      readable string.
 *
 * Results:
 *      const char * pointer to a static string.
 */

static const char *
CLErrString(cl_int status) {
   static struct { cl_int code; const char *msg; } error_table[] = {
      { CL_SUCCESS, "success" },
      { CL_DEVICE_NOT_FOUND, "device not found", },
      { CL_DEVICE_NOT_AVAILABLE, "device not available", },
      { CL_COMPILER_NOT_AVAILABLE, "compiler not available", },
      { CL_MEM_OBJECT_ALLOCATION_FAILURE, "mem object allocation failure", },
      { CL_OUT_OF_RESOURCES, "out of resources", },
      { CL_OUT_OF_HOST_MEMORY, "out of host memory", },
      { CL_PROFILING_INFO_NOT_AVAILABLE, "profiling not available", },
      { CL_MEM_COPY_OVERLAP, "memcopy overlaps", },
      { CL_IMAGE_FORMAT_MISMATCH, "image format mismatch", },
      { CL_IMAGE_FORMAT_NOT_SUPPORTED, "image format not supported", },
      { CL_BUILD_PROGRAM_FAILURE, "build program failed", },
      { CL_MAP_FAILURE, "map failed", },
      { CL_INVALID_VALUE, "invalid value", },
      { CL_INVALID_DEVICE_TYPE, "invalid device type", },
      { 0, NULL },
   };
   static char unknown[25];
   int ii;

   for (ii = 0; error_table[ii].msg != NULL; ii++) {
      if (error_table[ii].code == status) {
         return error_table[ii].msg;
      }
   }

   _snprintf(unknown, sizeof unknown, "unknown error %d", status);
   return unknown;
}
/*
 * PrintDevice --
 *
 *      Dumps everything about the given device ID.
 *
 * Results:
 *      void.
 */

static void
PrintDevice(cl_device_id device) {
#define LONG_PROPS \
  defn(VENDOR_ID), \
  defn(MAX_COMPUTE_UNITS), \
  defn(MAX_WORK_ITEM_DIMENSIONS), \
  defn(MAX_WORK_GROUP_SIZE), \
  defn(PREFERRED_VECTOR_WIDTH_CHAR), \
  defn(PREFERRED_VECTOR_WIDTH_SHORT), \
  defn(PREFERRED_VECTOR_WIDTH_INT), \
  defn(PREFERRED_VECTOR_WIDTH_LONG), \
  defn(PREFERRED_VECTOR_WIDTH_FLOAT), \
  defn(PREFERRED_VECTOR_WIDTH_DOUBLE), \
  defn(MAX_CLOCK_FREQUENCY), \
  defn(ADDRESS_BITS), \
  defn(MAX_MEM_ALLOC_SIZE), \
  defn(IMAGE_SUPPORT), \
  defn(MAX_READ_IMAGE_ARGS), \
  defn(MAX_WRITE_IMAGE_ARGS), \
  defn(IMAGE2D_MAX_WIDTH), \
  defn(IMAGE2D_MAX_HEIGHT), \
  defn(IMAGE3D_MAX_WIDTH), \
  defn(IMAGE3D_MAX_HEIGHT), \
  defn(IMAGE3D_MAX_DEPTH), \
  defn(MAX_SAMPLERS), \
  defn(MAX_PARAMETER_SIZE), \
  defn(MEM_BASE_ADDR_ALIGN), \
  defn(MIN_DATA_TYPE_ALIGN_SIZE), \
  defn(GLOBAL_MEM_CACHELINE_SIZE), \
  defn(GLOBAL_MEM_CACHE_SIZE), \
  defn(GLOBAL_MEM_SIZE), \
  defn(MAX_CONSTANT_BUFFER_SIZE), \
  defn(MAX_CONSTANT_ARGS), \
  defn(LOCAL_MEM_SIZE), \
  defn(ERROR_CORRECTION_SUPPORT), \
  defn(PROFILING_TIMER_RESOLUTION), \
  defn(ENDIAN_LITTLE), \
  defn(AVAILABLE), \
  defn(COMPILER_AVAILABLE),

#define STR_PROPS \
  defn(NAME), \
  defn(VENDOR), \
  defn(PROFILE), \
  defn(VERSION), \
  defn(EXTENSIONS),

#define HEX_PROPS \
   defn(SINGLE_FP_CONFIG), \
   defn(QUEUE_PROPERTIES),

/* XXX For completeness, it'd be nice to dump this one, too. */
#define WEIRD_PROPS \
   CL_DEVICE_MAX_WORK_ITEM_SIZES,

   static struct { cl_device_info param; const char *name; } longProps[] = {
#define defn(X) { CL_DEVICE_##X, #X }
      LONG_PROPS
#undef defn
      { 0, NULL },
   };
   static struct { cl_device_info param; const char *name; } hexProps[] = {
#define defn(X) { CL_DEVICE_##X, #X }
      HEX_PROPS
#undef defn
      { 0, NULL },
   };
   static struct { cl_device_info param; const char *name; } strProps[] = {
#define defn(X) { CL_DEVICE_##X, #X }
      STR_PROPS
#undef defn
      { CL_DRIVER_VERSION, "DRIVER_VERSION" },
      { 0, NULL },
   };
   cl_int status;
   size_t size;
   char buf[65536];
   long long val; /* Avoids unpleasant surprises for some params */
   int ii;

   for (ii = 0; strProps[ii].name != NULL; ii++) {
      status = clGetDeviceInfo(device, strProps[ii].param, sizeof buf, buf, &size);
      if (status != CL_SUCCESS) {
         Warning("\tdevice[%p]: Unable to get %s: %s!\n",
                 device, strProps[ii].name, CLErrString(status));
         continue;
      }
      if (size > sizeof buf) {
         Warning("\tdevice[%p]: Large %s (%d bytes)!  Truncating to %d!\n",
                 device, strProps[ii].name, size, sizeof buf);
      }
      printf("\tdevice[%p]: %s: %s\n",
             device, strProps[ii].name, buf);
   }
   printf("\n");

   status = clGetDeviceInfo(device, CL_DEVICE_TYPE, sizeof val, &val, NULL);
   if (status == CL_SUCCESS) {
      printf("\tdevice[%p]: Type: ", device);
      if (val & CL_DEVICE_TYPE_DEFAULT) {
         val &= ~CL_DEVICE_TYPE_DEFAULT;
         printf("Default ");
      }
      if (val & CL_DEVICE_TYPE_CPU) {
         val &= ~CL_DEVICE_TYPE_CPU;
         printf("CPU ");
      }
      if (val & CL_DEVICE_TYPE_GPU) {
         val &= ~CL_DEVICE_TYPE_GPU;
         printf("GPU ");
      }
      if (val & CL_DEVICE_TYPE_ACCELERATOR) {
         val &= ~CL_DEVICE_TYPE_ACCELERATOR;
         printf("Accelerator ");
      }
      if (val != 0) {
         printf("Unknown (0x%llx) ", val);
      }
      printf("\n");
   } else {
      Warning("\tdevice[%p]: Unable to get TYPE: %s!\n",
              device, CLErrString(status));
   }

   status = clGetDeviceInfo(device, CL_DEVICE_EXECUTION_CAPABILITIES,
                            sizeof val, &val, NULL);
   if (status == CL_SUCCESS) {
      printf("\tdevice[%p]: EXECUTION_CAPABILITIES: ", device);
      if (val & CL_EXEC_KERNEL) {
         val &= ~CL_EXEC_KERNEL;
         printf("Kernel ");
      }
      if (val & CL_EXEC_NATIVE_KERNEL) {
         val &= ~CL_EXEC_NATIVE_KERNEL;
         printf("Native ");
      }
      if (val) {
         printf("Unknown (0x%llx) ", val);
      }
      printf("\n");
   } else {
      Warning("\tdevice[%p]: Unable to get EXECUTION_CAPABILITIES: %s!\n",
              device, CLErrString(status));
   }

   status = clGetDeviceInfo(device, CL_DEVICE_GLOBAL_MEM_CACHE_TYPE,
                            sizeof val, &val, NULL);
   if (status == CL_SUCCESS) {
      static const char *cacheTypes[] = { "None", "Read-Only", "Read-Write" };
      static int numTypes = sizeof cacheTypes / sizeof cacheTypes[0];

      printf("\tdevice[%p]: GLOBAL_MEM_CACHE_TYPE: %s (%lld)\n",
             device, val < numTypes ? cacheTypes[val] : "???", val);
   } else {
      Warning("\tdevice[%p]: Unable to get GLOBAL_MEM_CACHE_TYPE: %s!\n",
              device, CLErrString(status));
   }
   status = clGetDeviceInfo(device,
                            CL_DEVICE_LOCAL_MEM_TYPE, sizeof val, &val, NULL);
   if (status == CL_SUCCESS) {
      static const char *lmemTypes[] = { "???", "Local", "Global" };
      static int numTypes = sizeof lmemTypes / sizeof lmemTypes[0];

      printf("\tdevice[%p]: CL_DEVICE_LOCAL_MEM_TYPE: %s (%lld)\n",
             device, val < numTypes ? lmemTypes[val] : "???", val);
   } else {
      Warning("\tdevice[%p]: Unable to get CL_DEVICE_LOCAL_MEM_TYPE: %s!\n",
              device, CLErrString(status));
   }

   for (ii = 0; hexProps[ii].name != NULL; ii++) {
      status = clGetDeviceInfo(device, hexProps[ii].param, sizeof val, &val, &size);
      if (status != CL_SUCCESS) {
         Warning("\tdevice[%p]: Unable to get %s: %s!\n",
                 device, hexProps[ii].name, CLErrString(status));
         continue;
      }
      if (size > sizeof val) {
         Warning("\tdevice[%p]: Large %s (%d bytes)!  Truncating to %d!\n",
                 device, hexProps[ii].name, size, sizeof val);
      }
      printf("\tdevice[%p]: %s: 0x%llx\n",
             device, hexProps[ii].name, val);
   }
   printf("\n");

   for (ii = 0; longProps[ii].name != NULL; ii++) {
      status = clGetDeviceInfo(device, longProps[ii].param, sizeof val, &val, &size);
      if (status != CL_SUCCESS) {
         Warning("\tdevice[%p]: Unable to get %s: %s!\n",
                 device, longProps[ii].name, CLErrString(status));
         continue;
      }
      if (size > sizeof val) {
         Warning("\tdevice[%p]: Large %s (%d bytes)!  Truncating to %d!\n",
                 device, longProps[ii].name, size, sizeof val);
      }
      printf("\tdevice[%p]: %s: %lld\n",
             device, longProps[ii].name, val);
   }
}
/*
 * PrintPlatform --
 *
 *      Dumps everything about the given platform ID.
 *
 * Results:
 *      void.
 */

static void
PrintPlatform(cl_platform_id platform) {
   static struct { cl_platform_info param; const char *name; } props[] = {
      { CL_PLATFORM_PROFILE, "profile" },
      { CL_PLATFORM_VERSION, "version" },
      { CL_PLATFORM_NAME, "name" },
      { CL_PLATFORM_VENDOR, "vendor" },
      { CL_PLATFORM_EXTENSIONS, "extensions" },
      { 0, NULL },
   };
   cl_device_id *deviceList;
   cl_uint numDevices;
   cl_int status;
   char buf[65536];
   size_t size;
   int ii;

   for (ii = 0; props[ii].name != NULL; ii++) {
      status = clGetPlatformInfo(platform, props[ii].param, sizeof buf, buf, &size);
      if (status != CL_SUCCESS) {
         Warning("platform[%p]: Unable to get %s: %s\n",
                 platform, props[ii].name, CLErrString(status));
         continue;
      }
      if (size > sizeof buf) {
         Warning("platform[%p]: Huge %s (%d bytes)!  Truncating to %d\n",
                 platform, props[ii].name, size, sizeof buf);
      }
      printf("platform[%p]: %s: %s\n", platform, props[ii].name, buf);
   }

   if ((status = clGetDeviceIDs(platform, CL_DEVICE_TYPE_ALL,
                                0, NULL, &numDevices)) != CL_SUCCESS) {
      Warning("platform[%p]: Unable to query the number of devices: %s\n",
              platform, CLErrString(status));
      return;
   }
   printf("platform[%p]: Found %d device(s).\n", platform, numDevices);

   deviceList = (cl_device_id *)malloc(numDevices * sizeof(cl_device_id));
   if ((status = clGetDeviceIDs(platform, CL_DEVICE_TYPE_ALL,
                                numDevices, deviceList, NULL)) != CL_SUCCESS) {
      Warning("platform[%p]: Unable to enumerate the devices: %s\n",
              platform, CLErrString(status));
      free(deviceList);
      return;
   }

   for (ii = 0; ii < numDevices; ii++) {
      PrintDevice(deviceList[ii]);
   }

   free(deviceList);
}

int main(int argc, char** argv)
{
    int err;                            // error code returned from api calls

    float data[DATA_SIZE];              // original data set given to device
    float results[DATA_SIZE];           // results returned from device
    unsigned int correct;               // number of correct results returned

    size_t global;                      // global domain size for our calculation
    size_t local;                       // local domain size for our calculation

    cl_platform_id platform;            // compute platform id
    cl_uint numPlatforms;
    cl_platform_id *platformList;
    cl_int status;

    cl_device_id device_id;             // compute device id 
    cl_context context;                 // compute context
    cl_command_queue commands;          // compute command queue
    cl_program program;                 // compute program
    cl_kernel kernel;                   // compute kernel

    cl_mem input;                       // device memory used for the input array
    cl_mem output;                      // device memory used for the output array

    // Fill our data set with random float values
    //
    int i = 0;
    unsigned int count = DATA_SIZE;
    for(i = 0; i < count; i++)
    {
        data[i] = rand() / (float)RAND_MAX;
    //  printf("%f\n",data[i]);
    }

    err = clGetPlatformIDs(1, &platform, &numPlatforms);            
    if(err < 0) {          
        perror("Couldn't find any platforms");
          return EXIT_FAILURE;
    }
    printf("Found %d platform(s).\n", numPlatforms);

    platformList = (cl_platform_id *) malloc(sizeof(cl_platform_id) * numPlatforms);
    if ((status = clGetPlatformIDs(numPlatforms, platformList, NULL)) != CL_SUCCESS) {
       Warning("Unable to enumerate the platforms: %s\n",
               CLErrString(status));
       exit(1);
    }

    int ii;
    for (ii = 0; ii < numPlatforms; ii++) {
       PrintPlatform(platformList[ii]);
    }

    // Connect to a compute device
    //
    int gpu = 1;
    err = clGetDeviceIDs(platformList[0], gpu ? CL_DEVICE_TYPE_GPU : CL_DEVICE_TYPE_CPU, 1, &device_id, NULL);
    if (err != CL_SUCCESS)
    {
        printf("Error: Failed to create a device group!\n");
        return EXIT_FAILURE;
    }

    // Create a compute context 
    //
    context = clCreateContext(0, 1, &device_id, NULL, NULL, &err);
    if (!context)
    {
        printf("Error: Failed to create a compute context!\n");
        return EXIT_FAILURE;
    }

    // Create a command commands
    //
    commands = clCreateCommandQueue(context, device_id, 0, &err);
    if (!commands)
    {
        printf("Error: Failed to create a command commands!\n");
        return EXIT_FAILURE;
    }

    // Create the compute program from the source buffer
    //
    program = clCreateProgramWithSource(context, 1, (const char **) & KernelSource, NULL, &err);
    if (!program)
    {
        printf("Error: Failed to create compute program!\n");
        return EXIT_FAILURE;
    }

    // Build the program executable
    //
    err = clBuildProgram(program, 0, NULL, NULL, NULL, NULL);
    if (err != CL_SUCCESS)
    {
        size_t len;
        char buffer[2048];

        printf("Error: Failed to build program executable!\n");
        clGetProgramBuildInfo(program, device_id, CL_PROGRAM_BUILD_LOG, sizeof(buffer), buffer, &len);
        printf("%s\n", buffer);
        exit(1);
    }

    // Create the compute kernel in the program we wish to run
    //
    kernel = clCreateKernel(program, "square", &err);
    if (!kernel || err != CL_SUCCESS)
    {
        printf("Error: Failed to create compute kernel!\n");
        exit(1);
    }

    // Create the input and output arrays in device memory for our calculation
    //
    input = clCreateBuffer(context,  CL_MEM_READ_ONLY,  sizeof(float) * count, NULL, NULL);
    output = clCreateBuffer(context, CL_MEM_WRITE_ONLY, sizeof(float) * count, NULL, NULL);
    if (!input || !output)
    {
        printf("Error: Failed to allocate device memory!\n");
        exit(1);
    }    

    // Write our data set into the input array in device memory 
    //
    err = clEnqueueWriteBuffer(commands, input, CL_TRUE, 0, sizeof(float) * count, data, 0, NULL, NULL);
    if (err != CL_SUCCESS)
    {
        printf("Error: Failed to write to source array!\n");
        exit(1);
    }

    // Set the arguments to our compute kernel
    //
    err = 0;
    err  = clSetKernelArg(kernel, 0, sizeof(cl_mem), &input);
    err |= clSetKernelArg(kernel, 1, sizeof(cl_mem), &output);
    err |= clSetKernelArg(kernel, 2, sizeof(unsigned int), &count);
    if (err != CL_SUCCESS)
    {
        printf("Error: Failed to set kernel arguments! %d\n", err);
        exit(1);
    }

    // Get the maximum work group size for executing the kernel on the device
    //
    err = clGetKernelWorkGroupInfo(kernel, device_id, CL_KERNEL_WORK_GROUP_SIZE, sizeof(local), &local, NULL);
    if (err != CL_SUCCESS)
    {
        printf("Error: Failed to retrieve kernel work group info! %d\n", err);
        exit(1);
    }

    // Execute the kernel over the entire range of our 1d input data set
    // using the maximum number of work group items for this device
    //
    global = count;
    err = clEnqueueNDRangeKernel(commands, kernel, 1, NULL, &global, &local, 0, NULL, NULL);
    if (err)
    {
        printf("Error: Failed to execute kernel!\n");
        return EXIT_FAILURE;
    }

    // Wait for the command commands to get serviced before reading back results
    //
    clFinish(commands);

    // Read back the results from the device to verify the output
    //
    err = clEnqueueReadBuffer( commands, output, CL_TRUE, 0, sizeof(float) * count, results, 0, NULL, NULL );  
    if (err != CL_SUCCESS)
    {
        printf("Error: Failed to read output array! %d\n", err);
        exit(1);
    }

    // Validate our results
    //
    correct = 0;
    for(i = 0; i < count; i++)
    {
        //printf("%4f %4.10f %4.10f \n", data[i],data[i] * data[i], results[i]);
        if((results[i] - data[i] * data[i]) < 10e-8)
            correct++;
    }

    // Print a brief summary detailing the results
    //
    printf("Computed '%d/%d' correct values!\n", correct, count);

    // Shutdown and cleanup
    //
    free(platformList);
    clReleaseMemObject(input);
    clReleaseMemObject(output);
    clReleaseProgram(program);
    clReleaseKernel(kernel);
    clReleaseCommandQueue(commands);
    clReleaseContext(context);

    return 0;
} 
```

我在 Geforce 8800 GTS 上运行。

```
F:\Documents\Dropbox\05030 - OpenCL\Samples\Debug>HelloWorld.exe
Found 1 platform(s).
platform[012C6F88]: profile: FULL_PROFILE
platform[012C6F88]: version: OpenCL 1.1 CUDA 4.2.1
platform[012C6F88]: name: NVIDIA CUDA
platform[012C6F88]: vendor: NVIDIA Corporation
platform[012C6F88]: extensions: cl_khr_byte_addressable_store cl_khr_icd cl_khr_
gl_sharing cl_nv_d3d9_sharing cl_nv_d3d10_sharing cl_khr_d3d10_sharing cl_nv_d3d
11_sharing cl_nv_compiler_options cl_nv_device_attribute_query cl_nv_pragma_unro
ll
platform[012C6F88]: Found 1 device(s).
        device[012C6FF0]: NAME: GeForce 8800 GTS
        device[012C6FF0]: VENDOR: NVIDIA Corporation
        device[012C6FF0]: PROFILE: FULL_PROFILE
        device[012C6FF0]: VERSION: OpenCL 1.0 CUDA
        device[012C6FF0]: EXTENSIONS: cl_khr_byte_addressable_store cl_khr_icd c
l_khr_gl_sharing cl_nv_d3d9_sharing cl_nv_d3d10_sharing cl_khr_d3d10_sharing cl_
nv_d3d11_sharing cl_nv_compiler_options cl_nv_device_attribute_query cl_nv_pragm
a_unroll
        device[012C6FF0]: DRIVER_VERSION: 301.42

        device[012C6FF0]: Type: GPU
        device[012C6FF0]: EXECUTION_CAPABILITIES: Kernel
        device[012C6FF0]: GLOBAL_MEM_CACHE_TYPE: None (0)
        device[012C6FF0]: CL_DEVICE_LOCAL_MEM_TYPE: Local (1)
        device[012C6FF0]: SINGLE_FP_CONFIG: 0x3e
        device[012C6FF0]: QUEUE_PROPERTIES: 0x3

        device[012C6FF0]: VENDOR_ID: 4318
        device[012C6FF0]: MAX_COMPUTE_UNITS: 12
        device[012C6FF0]: MAX_WORK_ITEM_DIMENSIONS: 3
        device[012C6FF0]: MAX_WORK_GROUP_SIZE: 512
        device[012C6FF0]: PREFERRED_VECTOR_WIDTH_CHAR: 1
        device[012C6FF0]: PREFERRED_VECTOR_WIDTH_SHORT: 1
        device[012C6FF0]: PREFERRED_VECTOR_WIDTH_INT: 1
        device[012C6FF0]: PREFERRED_VECTOR_WIDTH_LONG: 1
        device[012C6FF0]: PREFERRED_VECTOR_WIDTH_FLOAT: 1
        device[012C6FF0]: PREFERRED_VECTOR_WIDTH_DOUBLE: 0
        device[012C6FF0]: MAX_CLOCK_FREQUENCY: 1188
        device[012C6FF0]: ADDRESS_BITS: 32
        device[012C6FF0]: MAX_MEM_ALLOC_SIZE: 134217728
        device[012C6FF0]: IMAGE_SUPPORT: 1
        device[012C6FF0]: MAX_READ_IMAGE_ARGS: 128
        device[012C6FF0]: MAX_WRITE_IMAGE_ARGS: 8
        device[012C6FF0]: IMAGE2D_MAX_WIDTH: 4096
        device[012C6FF0]: IMAGE2D_MAX_HEIGHT: 16383
        device[012C6FF0]: IMAGE3D_MAX_WIDTH: 2048
        device[012C6FF0]: IMAGE3D_MAX_HEIGHT: 2048
        device[012C6FF0]: IMAGE3D_MAX_DEPTH: 2048
        device[012C6FF0]: MAX_SAMPLERS: 16
        device[012C6FF0]: MAX_PARAMETER_SIZE: 4352
        device[012C6FF0]: MEM_BASE_ADDR_ALIGN: 2048
        device[012C6FF0]: MIN_DATA_TYPE_ALIGN_SIZE: 128
        device[012C6FF0]: GLOBAL_MEM_CACHELINE_SIZE: 0
        device[012C6FF0]: GLOBAL_MEM_CACHE_SIZE: 0
        device[012C6FF0]: GLOBAL_MEM_SIZE: 335544320
        device[012C6FF0]: MAX_CONSTANT_BUFFER_SIZE: 65536
        device[012C6FF0]: MAX_CONSTANT_ARGS: 9
        device[012C6FF0]: LOCAL_MEM_SIZE: 16384
        device[012C6FF0]: ERROR_CORRECTION_SUPPORT: 0
        device[012C6FF0]: PROFILING_TIMER_RESOLUTION: 1000
        device[012C6FF0]: ENDIAN_LITTLE: 1
        device[012C6FF0]: AVAILABLE: 1
        device[012C6FF0]: COMPILER_AVAILABLE: 1 
```

hello world 示例的结果是：计算出的“0/1024”正确值！改变周围，这样它不会比较结果

```
result[i] == data[i]*data[i] 
```

但

```
(result[i] - data[i]*data[i] ) < 10e-6 
```

我得到了正确的所有值。我现在想知道原因。所有数据都存储在主机上：

```
float data[DATA_SIZE];              // original data set given to device
float results[DATA_SIZE];           // results returned from device 
```

**我正在使用 Visual Studio 2010 进行编译，想知道如何评估两个浮点数 a == b，它需要相等的精度。**

**我是否应该始终假设我的 GPU 上的计算对于差异 < 10e-8 是正确的？新卡会有所不同吗？我已经订购了 HD 7970。**

最后，如果有人有一些非常好的入门指南，我很感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:21:54.210

没有绝对值可用于比较适用于所有情况的两个浮点数（任何精度）。原因是，由于表示，两个“相邻”的浮点数可以有很大的绝对差异。更好的方法是使用相对误差进行比较（相对误差：`abs((a-b)/b)`）——尽管这只是一种粗略的方法，但您还需要考虑一些边缘情况。

阅读[文章](http://floating-point-gui.de/errors/comparison/)和[文章](http://www.cnblogs.com/kitlover/articles/1921510.html)了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T22:20:50.040

这是这个问题的一个很好的答案。

总结：cpu在进行中间运算时，以比浮点（32位）更高的位（80位）精度存储值作为result[i] < in[i]*in[i]。

[OpenCL 浮点精度](https://stackoverflow.com/questions/11176990/opencl-floating-point-precision)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T04:23:26.800

什么时候：

```
result[i] == data[i]*data[i] 
```

你有 data[i]*data[i] 计算，然后存储在某个地方（临时变量，寄存器），然后与 result[i] 比较

什么时候：

```
result[i] - data[i]*data[i] 
```

你有 data[i] 加载，乘以自身，并减去 result[i]

在第一种情况下，您比较两个存储的浮点变量。在第二种情况下，您从存储的浮点数（具有固定的 4 字节表示形式）中减去一个中间计算结果（使用比存储表示形式更多的数字完成）。

在纯 cpu C++ 代码中，您可能会得到相同的错误结果（可能因编译器/CPU 而异）。公式中的任何中间结果都可以具有比数据类型更重要的数字，使用硬件精度，以便仅在存储结果时进行舍入。它提高了精度。

如果您想比较两者，请执行以下操作：

```
float a = result[i];
float b = data[i]*data[i];

float delta = a-b; // should be 0.0 
```

通常，最好的做法是永远不要使用相等 (a == b) 比较浮点值，因为这篇文章的大小有太多原因。

在您的情况下，这是合法的（检查 GPU 和 CPU 上的精度/舍入是否相同），但只能比较存储的值

# drupal-7 - Drupal 组字段

> ID：11071200
> 
> 赞同：0
> 
> 时间：2012-06-17T12:12:54.873
> 
> 标签：drupal-7

每张专辑都有一个使用节点引用附加到它的艺术家，我需要获取所有附加到这个艺术家的专辑我如何使用相同的视图来做到这一点，因为我从同一个艺术家的同一个视图复制中得到了什么？

![在此处输入图像描述](../Images/5c00bca3257bd0223ad9a39019a5e35d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T13:01:42.583

在问题中提供更多信息会有所帮助 - 特别是：

1.  什么版本的 Views 和 Drupal？（我假设最新的 - Views 3 和 Drupal 7）
2.  您希望看到什么样的结果以及您过滤的内容是什么？（您的视图屏幕截图有望解决问题）

我想我无论如何都可以回答 - 这里有三个关键的事情可以提供帮助：

**关系基础**

在视图中设置*关系*，然后在创建字段时使用该关系。在下图中，我有一个幻灯片节点，其中包含对幻灯片的节点引用。所以我已经建立了从幻灯片到幻灯片的关系。然后，该关系又用于从 Slide 中提取字段，而不是从 Fields 下的 Slideshow 中提取*字段*。

![基本视图关系截图](../Images/509509575e6d8bf394a08d7549cb446e.png)

**意见不同**

如果您唯一的问题是您得到重复的结果，有时一个简单的解决方案是为查询打开*Distinct*。在视图中，在 Advanced 下单击*Query settings*并选中*Distinct*。

![在视图中打开 Distinct](../Images/322fd5fe88ddf4afb41dea12a0e605a7.png)

**反向关系**

如果您正在加载艺术家节点，然后尝试将节点引用返回到该艺术家的所有专辑，听起来您实际上可能需要在这种情况下设置反向关系。当您添加关系以选择该节点引用的*反向*时，您可以看到每个节点引用都有一个相应的条目。

![视图中的反向节点引用关系字段](../Images/e753ea14eccaae319ed6c2d1d5e549cd.png)

# objective-c - 运行多个 AVCaptureSession 或添加多个输入

> ID：11071202
> 
> 赞同：17
> 
> 时间：2012-06-17T12:13:52.657
> 
> 标签：objective-c, video-capture, avcapturesession, ipad-2, avcapture

我想在两个相邻的 UIView 中显示 iPad2 的前置和后置摄像头的流。要流式传输一台设备的图像，我使用以下代码

```
AVCaptureDeviceInput *captureInputFront = [AVCaptureDeviceInput deviceInputWithDevice:[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo] error:nil];

AVCaptureSession *session = [[AVCaptureSession alloc] init];
session addInput:captureInputFront];
session setSessionPreset:AVCaptureSessionPresetMedium];
session startRunning];

AVCaptureVideoPreviewLayer *prevLayer = [AVCaptureVideoPreviewLayer layerWithSession:session];
prevLayer.frame = self.view.frame;
[self.view.layer addSublayer:prevLayer]; 
```

这适用于任一相机。为了并行显示流，我尝试创建另一个会话，但是一旦建立第二个会话，第一个会话就会冻结。

然后我尝试将两个 AVCaptureDeviceInput 添加到会话中，但目前似乎最多支持一个输入。

任何有用的想法如何从两个摄像机流式传输？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-05-12T12:33:18.087

在MacOS X***上***可以从多个视频设备获取`CMSampleBufferRef`s。您必须`AVCaptureConnection`手动设置对象。例如，假设您有这些对象：

```
AVCaptureSession *session;
AVCaptureInput *videoInput1;
AVCaptureInput *videoInput2;
AVCaptureVideoDataOutput *videoOutput1;
AVCaptureVideoDataOutput *videoOutput2; 
```

不要***像***这样添加输出：

```
[session addOutput:videoOutput1];
[session addOutput:videoOutput2]; 
```

相反，添加它们并告诉会话不要建立任何连接：

```
[session addOutputWithNoConnections:videoOutput1];
[session addOutputWithNoConnections:videoOutput2]; 
```

然后为每个输入/输出对手动从输入的视频端口连接到输出：

```
for (AVCaptureInputPort *port in [videoInput1 ports]) {
    if ([[port mediaType] isEqualToString:AVMediaTypeVideo]) {
        AVCaptureConnection* cxn = [AVCaptureConnection
            connectionWithInputPorts:[NSArray arrayWithObject:port]
            output:videoOutput1
        ];
        if ([session canAddConnection:cxn]) {
            [session addConnection:cxn];
        }
        break;
    }
} 
```

最后，确保为两个输出设置样本缓冲区委托：

```
[videoOutput1 setSampleBufferDelegate:self queue:someDispatchQueue];
[videoOutput2 setSampleBufferDelegate:self queue:someDispatchQueue]; 
```

现在您应该能够处理来自两个设备的帧：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection
{
    if (captureOutput == videoOutput1)
    {
        // handle frames from first device
    }
    else if (captureOutput == videoOutput2)
    {
        // handle frames from second device
    }
} 
```

另请参阅[AVVideoWall 示例项目](https://developer.apple.com/library/mac/samplecode/avvideowall/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011122)，了解组合来自多个视频设备的实时预览的示例。

# java - 是否可以在后台使用 videoview 播放视频？（安卓）

> ID：11071204
> 
> 赞同：0
> 
> 时间：2012-06-17T12:14:37.690
> 
> 标签：java, android, android-videoview

我使用 Videoview 显示 mp4 剪辑，当我返回时（后台应用程序）视频停止。

我怎样才能继续播放视频？我可以覆盖 VideoView 的 onpause 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:58:08.577

当承载它的 Activity 暂停时，VideoView 不会停止播放。如果您遇到这种行为，可能是由于不同的原因。

# android - 顶点数组性能问题

> ID：11071210
> 
> 赞同：1
> 
> 时间：2012-06-17T12:15:33.237
> 
> 标签：android, opengl-es

我已经编写 OpenGL 一段时间了，但我对 OpenGL ES 还是很陌生。我遇到的问题之一是以有效的方式在屏幕上绘制图元。

我需要在屏幕上绘制多个相等的线循环（使用不同的翻译），并注意到这段代码的性能大幅下降：

```
gl.glColor4f(0.5f, 0.5f, 0.5f, 1.0f);
gl.glVertexPointer(3, GL10.GL_FLOAT, 0, this.vertices);

for (int j = 0; j < height; j++)
{
    for (int i = 0; i < width; i++)
    {
        gl.glPushMatrix();

        gl.glTranslatef(i, j, 0);
        gl.glDrawArrays(GL10.GL_LINE_LOOP, 0, 4);

        gl.glPopMatrix();
    }
} 
```

我认为*glDrawArrays*是这里的坏人。

所以问题是如何有效地绘制一堆线循环？使用 GL_LINE_LOOP 时必须为每个图元调用 glDrawArrays，所以我需要将类型更改为 GL_LINES 吗？这将造成巨大的内存浪费，因为顶点数组（在上面的代码中，保存 4 个顶点）将保存**宽度 * 高度 * 8**个顶点。

我正在为 Android OpenGL ES 1.1 编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:23:51.417

> 我认为 glDrawArrays 是这里的坏人。

坏人是你，如此低效地使用你的函数调用/上下文切换预算。将所有行打包到一个数组中（作为 GL_LINES），并通过一次调用将其发送到 GPU。不，你没有浪费内存，因为无论如何你不能分配少于一页（通常是 4kiB）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:26:13.370

> 我认为 glDrawArrays 是这里的坏人。

是和不是。你说得对，DrawArrays 不是一个快速调用，但如果你不经常调用它，它是渲染某些东西的最快方法。

> 那么我需要将类型更改为 GL_LINES 吗？

是的，这样您就可以通过一次绘制调用绘制所有内容

> 这将造成巨大的内存浪费，因为顶点数组（在上面的代码中，保存 4 个顶点）将保存宽度 * 高度 * 8 个顶点。

与只有 4 个顶点相比，我想您可以将其视为内存浪费。但是 GPU 是为一次渲染大批量而*构建*的，它会讨厌你绘制大量的小批量。

此外，您应该有足够的内存来保存顶点，这应该不是问题。

# java - 将 JTextField 输入转换为整数

> ID：11071211
> 
> 赞同：5
> 
> 时间：2012-06-17T12:16:00.243
> 
> 标签：java, string, parsing, jtextfield, japplet

我是 JAVA 新手，我正在尝试将 JTextField 的输入转换为整数，我尝试了很多选项，但没有任何效果，eclipse 总是给我一个错误，这些错误对我来说没有意义。

导入 java.awt.Graphics；导入 java.awt.Color；

```
public class circle extends Shape{

public int x;
public int y;
public int Radius;

public circle (int Radius, int x, int y, Color c){
    super(c);
    this.x = x;
    this.y = y;
    this.Radius = Radius;
}
    public void draw(Graphics g){
        g.setColor(super.getColor());
        g.fillOval(x-Radius, y-Radius, Radius * 2, Radius * 2);
    }
 } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-17T12:25:50.437

代替：

```
JTextField f1 = new JTextField("-5");

//xaxis1 = Integer.parseInt(f1); 
```

试试这个：

```
JTextField f1 = new JTextField("-5");
String text = f1.getText();
int xaxis1 = Integer.parseInt(text); 
```

您无法解析`TextField`为`Integer`，但**可以解析**其包含的**值**- 文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T12:35:22.880

您有两个主要错误立即浮现在脑海中：

*   首先，您尝试解析 JTextField 本身，而不是它所包含的文本（正如 dantuch 所指出的——对他来说是 1+）。
*   接下来，即使您要成功解析 JTextField 保存的文本，在您的程序中执行此操作也不会产生效果，因为您将在创建 JTextField 时执行此操作，并且不会给用户机会更改字段保存的值。

一个更好的解决方案是解析 JTextField 保存的文本，再次如 dantuch 所建议的那样，但要在某种侦听器中执行此操作，可能是由 JButton 推送触发的 ActionListener。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T12:40:21.097

我已经实现了基于 JFormattedTextField 的数字字段。

它们还支持最小值和最大值。

也许您发现它们很有用（该库是开源的）：

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JRealNumberField.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JRealNumberField.html)

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JDoubleField.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JDoubleField.html)

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JFloatField.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JFloatField.html)

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLocalizedRealNumberField.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLocalizedRealNumberField.html)

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLocalizedDoubleField.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLocalizedDoubleField.html)

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLocalizedFloatField.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLocalizedFloatField.html)

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JWholeNumberField.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JWholeNumberField.html)

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JByteField.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JByteField.html)

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JIntegerField.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JIntegerField.html)

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLongField.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLongField.html)

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JShortField.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JShortField.html)

教程：

[http://softsmithy.sourceforge.net/lib/docs/tutorial/swing/number/index.html](http://softsmithy.sourceforge.net/lib/docs/tutorial/swing/number/index.html)

主页：

[http://www.softsmithy.org](http://www.softsmithy.org)

下载：

[http://sourceforge.net/projects/softsmithy/files/softsmithy/](http://sourceforge.net/projects/softsmithy/files/softsmithy/)

马文：

```
<dependency>  
    <groupId>org.softsmithy.lib</groupId>  
    <artifactId>lib-core</artifactId>  
    <version>0.1</version>  
</dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T12:46:49.660

您需要解析的值`TextField`：

```
int i = Integer.parseInt("-10"); 
```

相似地

```
double d = Double.parseDouble("-10.0"); 
```

ETC...

# iphone - 自定义 UITableView 缓慢滚动：UITableViewCell 中添加的项目数量是否有限制

> ID：11071215
> 
> 赞同：2
> 
> 时间：2012-06-17T12:16:09.280
> 
> 标签：iphone, ios, uitableview, scroll

我正在通过`UITableViewCell`在 Xcode 中设计自己的表格并将其加载到`cellForRowAtIndexPath`. 我面临滚动问题；表格滚动真的很慢而且根本不流畅。在每个单元格中，我都有：

*   2 或 3 `UIImageView`，其中第三个在需要时动态添加
*   1`UILabel`
*   1`UITextView`
*   一些单元格可能有 2 `UIButton`，一些 1 `UIButton`，并且大多数根本没有按钮
*   在某些单元格中，我可能会添加叠加层`UIView`

每个单元格中的图像视图、文本视图和按钮的大小都不同。为了防止每次滚动表格时计算大小，我加载所有大小`viewWillAppear`并将它们存储在一个数组中，在里面`cellForRowAtIndexPath`我只加载数组中的大小并将它们设置为所需的对象。

我尝试了我在网上找到的所有想法（比如将图像加载到[此处](https://stackoverflow.com/questions/6410997/slow-scrolling-of-uitableview)`if(cell == nil)`所示的正文中，或者不将单元格出列......）但没有解决我的问题。

另一方面，我注意到聊天应用程序 WhatsApp 每个单元格使用相似数量的项目（例如，当用户收到图像时，有 2 个按钮查看和转发，图像缩略图，缩略图旁边的复选标记图像，日期标签，缩略图后面的气泡图像...）但那里的滚动非常流畅。

即使表格中只有 10 个单元格，我的滚动速度也很慢。以下是我的问题：

1.  我是否在做一些我没有注意到的严重错误？
2.  应添加到自定义单元格以防止缓慢滚动的项目数量是否有限制？
3.  有没有办法通过在 Xcode 中使用 Product-> Profile 之类的东西来检测滚动缓慢的原因？
4.  任何人都可以为我的问题提出解决方案吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:08:23.800

每个单元格有多个图像，我遇到了同样的问题。如果每个单元格都有一个，UITextView 就会杀死它。还隐藏您不想显示的图像，并尝试不循环进入数组以查找是否应该显示或隐藏图像，但制作一个可以读取的 BOOL 数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:44:19.090

由于调整大小操作，使用图像时 TableView 操作缓慢是正常的。我制作的最后一个应用程序的图像来自网络。例如，进来的一张图像是 4k 像素 x 4k 像素的图像。所有其他的都比我试图显示的缩略图大小的图像大得多。总而言之，每次图像离开屏幕时，图像都会从 RAM 中移出并返回到闪存中，这是为了帮助保留 RAM 内存。问题是保留在 Flash 中的是您分配给 UIImageView 的原始 UIImage。UIImage 保留原始大小的图像。因此，现在每次图像返回屏幕时，都必须从其原始尺寸（比您希望显示的更小或更大）调整大小。每次 4k px x 4k px 图像回到屏幕上时，TableView 都会出现故障。诀窍是在将图像分配给支持 UIImageView 的 UIImage 之前，将图像的大小精确到您希望显示的大小。举个例子，这个表格视图一次只显示约 10 到 12 个项目，而且速度仍然非常慢（即使在所有图像战争完全从网络加载之后）。

另一个潜在的缓慢。我有另一个应用程序，我最初希望显示的数据可以选择用于复制和过去。您可以使用 UITextView 对象执行此操作。问题是我输出的值表是 17 列宽 218 行。在这种情况下，因为每个 UITextView 都具有滚动功能（即使我将其关闭）导致每个 UITextView 必须重新计算它自己的子视图显示坐标等......导致整个表格滚动非常缓慢。最后，如果数据不需要编辑，或者复制和粘贴，你真的应该只用 UILabel 对象显示它。当我这样做时，我的 UITableView 的性能大大提高了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T15:53:59.460

试试这个： `-webkit-overflow-scrolling: touch;` 取自这里： [http ://css-tricks.com/snippets/css/momentum-scrolling-on-ios-overflow-elements/](http://css-tricks.com/snippets/css/momentum-scrolling-on-ios-overflow-elements/)

# javascript - 检查由javascript中无关事件触发的函数中的函数是否完整

> ID：11071219
> 
> 赞同：0
> 
> 时间：2012-06-17T12:16:52.343
> 
> 标签：javascript

我有一个名为 call facebook 的函数。

```
call_facebook(284328420994");
call_facebook(197214710347172); 
```

它运行多次它向 facebook 发出 ajax 请求，通常需要几秒钟才能完成。

当我单击谷歌地图上的标记时，我还有一个修改 html 的函数：

```
google.maps.event.addListener(loc, 'click', function () {
    var template = $('#trips').html();
    var content = locationIndex[loc.title];
    var html = Mustache.to_html(template,  content );
}); 
```

如果单击其中一个标记，然后 call_facebook-event 完成。我想重新运行单击标记时触发的功能。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:30:56.843

您可以有一个回调，您的`call_facebook`函数从 ajax 成功回调中检查。如果上面没有列出回调，什么也不做；如果有，运行它。将它与一个标志结合起来，告诉您是否有未完成的`call_facebook`呼叫，您可以从您的`click`处理程序中检查它。像这样*的东西：*

```
var done_callbacks = [];
var activecalls = 0;
function call_facebook(id) {
    // Set active flag
    ++activecalls;

    // Start ajax
    start_ajax_call(/* ... */, function() {
        var f;

        // This is the "success" callback

        // Decrement active flag
        --activecalls;
        if (activecalls === 0) {
            // None others are active, process callbacks
            while (done_callbacks.length !== 0) {
               f = done_callbacks.shift();
               f();
            }
        }
    });
} 
```

进而

```
google.maps.event.addListener(loc, 'click', function () {

    if (activecalls === 0) {
        doUpdate();
    }
    else {
        done_callbacks.push(doUpdate);
    }

    function doUpdate() {
        var template = $('#trips').html();
        var content = locationIndex[loc.title];
        var html = Mustache.to_html(template,  content );
    }
}); 
```

您可以对上述内容进行各种改进。例如，如果您只需要将与相同的两个事物挂钩`loc`，则可以使用回调映射而不是数组，并且只触发相关的事物。您可以将处理程序中的逻辑隔离`click`到另一个函数中`call_facebook`（用于维护）等。您可能会在`f();`调用周围捕获错误。但这是基本的想法。

请注意，上面没有竞争条件，即使它看起来好像有。事件是异步的，可以随时*排队*，包括 JavaScript 代码运行时；但是它们的处理程序永远不会同时运行，因为除非您使用网络工作者（我们不在上面），否则浏览器上的 JavaScript 是单线程的。因此，我们不会（例如）签`activecalls === 0`入`click`处理程序，然后在处理程序中的下一条语句执行之前对其进行更改`click`。

# c# - youtrack 尖锐的反序列化异常

> ID：11071221
> 
> 赞同：1
> 
> 时间：2012-06-17T12:17:05.173
> 
> 标签：c#, youtrack

我正在尝试编写一个使用 YourackSharp 包装器来 quert=y youTrack 的客户门户。

项目的 bugtracker 上有一个错误：

[http://youtrack.codebetter.com/issue/YTSRP-27?projectKey=YTSRP](http://youtrack.codebetter.com/issue/YTSRP-27?projectKey=YTSRP) - 但似乎此代码已回滚。

重新启用代码后。我收到以下错误。

将 System.Collections.Generic.List`1[[System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]] 转换为 YouTrackSharp.Issues.IssueStack 跟踪时出错：

```
at JsonFx.Serialization.DataReader`1.ReadSingle(ITextTokenizer`1 tokenizer, IEnumerable`1 tokens, Type targetType)
at JsonFx.Serialization.DataReader`1.Read(String input, Type targetType)
at JsonFx.Serialization.DataReader`1.Read[TResult](String input)
at EasyHttp.Codecs.DefaultDecoder.DecodeToStatic[T](String input, String contentType)
at EasyHttp.Http.HttpResponse.StaticBody[T]()
at YouTrackSharp.Infrastructure.Connection.Get[T](String command)
at YouTrackSharp.Issues.IssueManagement.GetAllIssuesForProject(String projectIdentifier, Int32 max, Int32 start)
at TasksProxy.YouTrackServer.GetProjectIssues(IProxyProject project) in C:\Code\RadicalGeekMVC\TasksProxy\YouTrackServerConnection.cs:line 74
at RadicalGeek.Models.Project.GetTasks() in C:\Code\RadicalGeekMVC\RadicalGeek\Models\Project.cs:line 51
at ASP._Page_Views_Portal_Index_cshtml.Execute() in c:\Code\RadicalGeekMVC\RadicalGeek\Views\Portal\Index.cshtml:line 152
at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
at System.Web.WebPages.StartPage.RunPage()
at System.Web.WebPages.StartPage.ExecutePageHierarchy()
at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) 
```

此错误在连接类的第 103 行引发。

var staticBody = httpRequest.Get(_uriConstructor.ConstructBaseUri(command)).StaticBody(); 该方法如下所示：

```
`        public T Get<T>(string command)
    {
    var httpRequest = CreateHttpRequest();     
    try
    {              
    var staticBody = httpRequest.Get(_uriConstructor.ConstructBaseUri(command)).StaticBody<T>();
    HttpStatusCode = httpRequest.Response.StatusCode;             
    return staticBody;
    }
    catch (HttpException httpException)
    {
    if (httpException.StatusCode == HttpStatusCode.Forbidden)
    {
    throw new InvalidRequestException(Language.Connection_Get_Insufficient_rights);
    }
    throw;
    }
    }` 
```

如果有人可以在这方面给我任何帮助，因为我真的需要访问项目的自定义字段。

我已经实现的代码更改可以看作是在此更改集中回滚的更改：

[https://github.com/JetBrains/YouTrackSharp/commit/fc488364b0787deae82d9b0fd3891e21be23bb10](https://github.com/JetBrains/YouTrackSharp/commit/fc488364b0787deae82d9b0fd3891e21be23bb10)

谢谢你。

# python - 为什么 Django ModelForm 在调用 save() 之前会更改它的内部实例对象。有时？

> ID：11071231
> 
> 赞同：0
> 
> 时间：2012-06-17T12:19:33.307
> 
> 标签：python, django

在我的自定义`UpdateView`中，我想将表单的字段内容与该表单应该更改的对象字段进行比较（它作为`instance`参数提供给表单构造函数，也保存为`self.object`）。我试过这个`form_valid() method`：

```
if self.object.content != form.save(commit=False).content
   ... 
```

和这个

```
if self.object.content != form.cleaned_data['content']
   .... 
```

在这两种情况下，这个测试都没有通过，因为两个值相等。嗯..它变得很有趣，我在 django shell 中做了一些简单的测试来仔细检查这种行为。实际上我得到了一些非常尴尬的结果。看一下这个：

```
>>> class ArticleForm(forms.ModelForm):
...     class Meta:
...         model=Article
...         fields = ('title',)

>>> a = Article.objects.all()[0]
>>> a
<Article: 12345>
>>> form = ArticleForm(data={'title': 'python-power'}, instance=a)
>>> a
<Article: python-power>

>>> a = Article.objects.all()[0]
>>> a
<Article: 12345>
>>> form = ArticleForm(data={'title': 'python-power'}, instance=a)
>>> a
<Article: 12345> 
```

这正常吗？如果实例对象无论如何都被更改了，为什么我需要保存方法（特别是使用 commit=True 时）......有时呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:28:00.603

如[这里的 django 文档中所述](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method)

> 如果您使用 commit=False 调用 save()，那么它将返回一个尚未保存到数据库的对象。在这种情况下，您可以在生成的模型实例上调用 save() 。如果您想在保存对象之前对其进行自定义处理，或者如果您想使用专门的模型保存选项之一，这将非常有用。提交默认为 True

实例仅更新但尚未保存到数据库中。您需要调用`save`方法将这些更改传输到数据库。

# java - Java 构建路径

> ID：11071233
> 
> 赞同：17
> 
> 时间：2012-06-17T12:19:37.537
> 
> 标签：java, eclipse, build, path

当我打开 eclipse 我得到 1 Java Build Path 问题：构建路径指定执行环境 JavaSE-1.6。工作空间中没有安装与此环境严格兼容的 JRE。

现在我尝试查看答案和其他问题，但所有答案都是基于已经获得的有关编程等知识。请帮助我逐步解决此问题。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-17T12:31:20.883

您的问题是 Eclipse 项目已经配置为在版本 6 的系统库上工作。但是，您似乎没有此特定版本，因此您需要重新配置项目的构建路径。

为了更改您的 JRE 系统库，您必须

1.  去`Project|Properties`
2.  选择`Java Build Path`部分
3.  选择当前的 JRE System Library，然后选择`Remove`
4.  选择`Add Library`，然后在`JRE System Library`类别下选择您的系统库；你可能只需要选择`Workspace default JRE`

如果默认 JRE 版本 <= 4，您很可能会在构建项目时遇到问题。在这种情况下，我建议您安装更新的 JRE。

更一般地，在 下`Window|Preferences`，您可以检查`Java|Installed JREs|Execution Environments`以了解哪些已安装的 JRE 与特定的执行环境匹配。应该很清楚，但是该页面使事情变得神秘。

# c# - 如何在 SQL 中为 INSERT 创建序列号？

> ID：11071234
> 
> 赞同：2
> 
> 时间：2012-06-17T12:19:59.440
> 
> 标签：c#, sql, sql-server, database, tsql

我正在将数据保存到表中，但我还需要一个带有序列号的列。我怎么做？（我在 C# 中这样做，也许这很重要。）

这一定很简单，但谷歌搜索并没有成功。

编辑：我不想只保存一个整数。我想在保存时给 SQL 一个命令来创建它，因为如果我创建一个整数并在创建它和保存它之间保存它——另一个查询可能会尝试同时保存相同的数字，我会得到两个条目编号相同。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T12:25:59.410

使用[`IDENTITY`](https://docs.microsoft.com/en-us/sql/t-sql/statements/create-table-transact-sql-identity-property?view=sql-server-2017)：

```
CREATE TABLE YourTable
(
    ID INT IDENTITY
) 
```

每次插入新记录时，SQL Server 都会为您增加该值（没有两条记录具有相同的编号，它是唯一的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:23:47.340

最好的方法不是程序化的，而是让你的数据库自动创建一个递增的字段。在 SQL Server 中，这称为[标识](http://msdn.microsoft.com/en-us/library/aa933196%28v=sql.80%29.aspx)列。

在您的插入语句中，您只需跳过该列，就好像它不存在一样，但 SQL Server 会自动递增并为您填充它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-10T20:47:55.963

Uniqueidentifier 解决了这个问题，但它不可扩展，该列不适合创建聚集索引，因为生成的索引非常大并且它的值并不总是增加（对定义明确的聚集索引的限制）。

关键字 IDENTITY 就足够了，您可以根据需要在整数数据类型中进行选择（smallint、int、bigint ...），您可以安全地获得通过函数 scope_identity() 分配的最后一个值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T10:23:57.460

您如何看待使用 GUID（又名SQL Server 中的[UNIQUEIDENTIFIER数据类型）？](http://technet.microsoft.com/en-us/library/ms187942%28v=sql.105%29.aspx)

```
DECLARE @myid uniqueidentifier = NEWID();
SELECT @myid 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T12:24:15.250

使用`IDENTITY`sql 中可用的。下面是例子

```
CREATE TABLE Persons
(
P_Id int PRIMARY KEY IDENTITY,
LastName varchar(255) NOT NULL,
FirstName varchar(255),
Address varchar(255),
City varchar(255)
) 
```

## [参考](http://www.w3schools.com/sql/sql_autoincrement.asp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-17T12:34:47.123

将序列号定义为主键 NOT NULL 和 Auto Increment。希望这对您有所帮助。

# objective-c - NSOpenPanel 允许选择包但不显示内容

> ID：11071238
> 
> 赞同：3
> 
> 时间：2012-06-17T12:20:24.323
> 
> 标签：objective-c, cocoa, nsopenpanel

我正在尝试让 NSOpenPanel 执行以下操作：

1.  无法选择文件

2.  可以选择目录和包

3.  看不到包裹内容

为了获得前两点，我需要使用：

```
[openDlg setCanChooseFiles:NO];
[openDlg setCanChooseDirectories:YES];
[openDlg setTreatsFilePackagesAsDirectories:YES]; 
```

然而，这意味着当在列视图中选择一个包时，会显示包的内容。我想要当我们`[openDlg setCanChooseFiles:YES]; [openDlg setTreatsFilePackagesAsDirectories:NO];`选择包时发生的行为，但列视图浏览器在选择时不显示内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:42:22.283

NSSavePanel 的委托中有一个现已弃用的方法，其方法名称为：

`- (BOOL) panel: (id) sender shouldShowFilename: (NSString *) filename]`

可以用来告诉保存面板***不***显示某些文件名。

关于如何使用它的详细信息可以在[这个 Apple QA technote](https://developer.apple.com/library/mac/#qa/qa1468/_index.html)中看到，它详细说明了如何做与你试图做的完全相反的事情（他们的例子是如何选择任何文件但忽略包，但你可以翻转周围的内部逻辑）。

现在，请记住我说过该方法已“弃用”。NSSavePanel 头文件这样说：

```
/* This method is deprecated in 10.6, and will be formally deprecated */
/* in a future release. Use panel:shouldEnableURL:  instead           */
- (BOOL)panel:(id)sender shouldShowFilename:(NSString *)filename; 
```

什么 NSOpenSavePanelDelegate[`panel:shouldEnableURL:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOpenSavePanelDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSOpenSavePanelDelegate/panel:shouldEnableURL:)显然只是允许或禁止选择文件。

为了让您的应用程序适应未来，您可能需要在使用[`respondsToSelector`不太](https://stackoverflow.com/questions/3697058/when-to-use-respondstoselector-in-objective-c)理想的 " " 方法之前确保 " `shouldShowFilename`" 作为选项仍然可用。`shouldEnableURL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:14:59.553

我实现了 NSOpenPanelDelegate 方法`panel:shouldEnableURL:`如下：

```
- (BOOL)panel:(id)sender shouldEnableURL:(NSURL *)url {

    BOOL showObject = NO;

    // This checks if the path is a directory
    [[NSFileManager defaultManager] fileExistsAtPath:[url path] isDirectory:&showObject];

    // This checks if the path is a package
    if ([[NSWorkspace sharedWorkspace] isFilePackageAtPath:[url path]]) {
        showObject = YES;
    }
    return showObject;
} 
```

这不需要任何进一步的配置（如`setCanChooseDirectories:`）并且完全符合我的要求！

# c++ - c++排序类，里面有类向量

> ID：11071247
> 
> 赞同：1
> 
> 时间：2012-06-17T12:22:54.073
> 
> 标签：c++, class, sorting, vector

我有一个类 cl1：

```
class c1
{
long double * coords;
...
} 
```

我也有第二类 cl2：

```
class cl2
{
vector<cl1*> cl1_vec;
unsigned int d;
...
} 
```

我想根据 coords[d] 对 cl2 中的 cl1_vec 进行排序，使用向量的 sort 函数。所以我可以有类似的东西

```
sort(cl2_inst->cl1_vec.begin(),cl2_inst->cl1_vec.end(), ??? ); 
```

我尝试了类似的方法

[对包含类的“std::vector”进行排序](https://stackoverflow.com/questions/5468194/sort-the-stdvector-containing-classes)

[C++ std::sort 与 Class 中的谓词函数](https://stackoverflow.com/questions/1605400/c-stdsort-with-predicate-function-in-class)

但我无法解决这个问题。

感谢您提供的任何帮助。

我试过的代码：

```
class cl1 {
    public:
        long double* coords;

        cl1(long double *, unsigned int);
        cl1();
        cl1(const cl1& orig);
        virtual ~cl1();        
};

class cl2 {

    public:

    unsigned int d;

    vector<cl1*> cl1_vec;

    //the srting functions
    static bool compareMyDataPredicate(cl1* lhs, cl1* rhs)
    {
        return (lhs->coords[d] < rhs->coords[d]);
    };
    // declare the functor nested within MyData.
    struct compareMyDataFunctor : public binary_function<my_point*, my_point*, bool>
    {
        bool operator()( cl1* lhs, cl1* rhs)
        {
            return (lhs->coords[d] < rhs->coords[d]);
        }
    };
    ...
    ...
} 
```

然后在主要

```
 std::sort(cl2_inst->cl1_vec.begin(),cl2_inst->cl1_vec.end(),cl2::compareMyDataPredicate() ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:03:31.833

`d`该错误是因为您正在从比较器函数的静态上下文访问非静态成员。使用第二种方法，方法如下：

*   为该结构提供一个构造函数，该构造函数接受一个参数`unsigned int`并将一个成员设置为该值。
*   创建一个 类型的对象`compareMyDataFunctor`，并将 的值传递`d`给构造函数。
*   使用此对象进行排序（std::sort 的第三个参数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:01:48.343

我不确定这些问题，因为您对您的情况下“不起作用”的确切含义不够精确（不编译，编译但不排序等）。如果它没有编译（很可能是猜测），您没有发布错误消息，这也使得查找和解释问题变得非常困难。

以下是根据您发布的代码的一些猜测：

静态函数和仿函数都使用该成员`d`来决定对哪一列进行排序。然而`d`，它是一个实例变量，因此它不适用于任何静态的东西。仿函数和静态成员函数都不知道要使用哪个可能的 s，因为每个实例`d`都有一个。`d`

在不诉诸 C++11 特性 (lamdas) 的情况下做到这一点的最佳方法是为`d`您计划使用的仿函数提供一个构造函数。像这样的东西：

```
struct compareMyDataFunctor : public binary_function<cl1*, cl1*, bool>
{
    compareMyDataFunctor( unsigned int d ) : d( d ) {}
    bool operator()( cl1* lhs, cl1* rhs)
    {
        return (lhs->coords[d] < rhs->coords[d]);
    }

    unsigned int d;
}; 
```

这应该可以解决问题。

您发布的代码还有一些问题：

*   数组应该使用类型`size_t`而不是 a来索引`unsigned int`。`std::vector`s也一样
*   实例化中的`std::binary_function`类型与方法中的实际类型不匹配（可能是减少代码的问题）。
*   不要使用`using namespace std`（我假设您从代码中的声明中使用）。
*   诸如此类的函子应该将参数作为常量引用，而不是按值。

这就是我能想到的。下次尝试提出[简短、独立、完整的例子](http://sscce.org/)，人们就不必去猜测了。

# java - (JAVA) 在 zipstreams 中处理不同的压缩类型

> ID：11071250
> 
> 赞同：2
> 
> 时间：2012-06-17T12:23:12.463
> 
> 标签：java, stream, compression, zip

我目前正在尝试构建一个用于在嵌套 zip 中查找文件的功能。我可以处理的一般问题，并且我的代码可以正常工作。我遇到的问题与压缩格式有关。

默认 zip 文件不是问题，我打开我的 zipinputstream，将其发送到我的搜索功能，检查每个条目是否是 zip 文件，如果是，我将输入流包装在另一个 zipinputstream 中并递归。当我有一个非标准的 zip 压缩时，问题就来了。

我想让这个函数更加健壮：能够检测 zip 条目的压缩格式，将其包装在正确的 deflater 中，然后将其包装在 zipinputstream 中，以便我可以递归。问题是我不知道如何解码压缩设置。我也不知道如何处理其他 zip 压缩格式。

有关如何使此功能更灵活的任何建议都会有所帮助。我打算将其集成到我自己的个人库中，以便将来从各个方向使用此功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:21:34.933

据我所知，java.util.zip 支持的唯一压缩算法是标准压缩算法。[但是您可以使用ZipEntry getMehod()](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipEntry.html#getMethod%28%29)检测压缩算法。

添加对其他压缩算法的支持可能需要您做一些工作 - 除非您可以找到支持不同算法的库。例如，有一个 [用于 7zip 的 LZMA 格式的库](http://www.7-zip.org/sdk.html)，但这些类没有扩展 Decoder 或 ZipEntry - 它们只是提供了一个替代方案。您需要解压缩嵌套的 zip 文件，然后使用其他东西解压缩它。这可能不像您想要的那样干净。

# android - 动态壁纸屏幕旋转

> ID：11071256
> 
> 赞同：5
> 
> 时间：2012-06-17T12:23:58.550
> 
> 标签：android, live-wallpaper, screen-rotation

我目前正在制作一个非常密集且不能很好地处理屏幕旋转的动态壁纸。

事实上，没有调用 onSurfaceChanged，壁纸被破坏并显示空白屏幕！

这是我在 onSurfaceChanged 方法中的内容：

```
@Override
    public void onSurfaceChanged(SurfaceHolder holder, int format,
            int width, int height) {
        // TODO Auto-generated method stub
        super.onSurfaceChanged(holder, format, width, height);

        mRatio = (float) width / height;
        if (mRatio > 1) {
            orientation = 0;
        }
        if (mRatio < 1) {
            orientation = 1;
        }
        setRunning(true);
        Log.i(TAG, "Screen Rotation...");
        mHandle.post(r);
    } 
```

我很肯定这个方法不会被调用，因为没有日志消息。

为什么会发生这种情况以及处理屏幕旋转的一些技术是什么？莫非我的动态壁纸密集到无法呼唤？

此外，onVisibilityChanged 也没有被调用，当我在模拟器上打开应用程序时，没有日志消息：

```
@Override
    public void onVisibilityChanged(boolean visible) {
        // TODO Auto-generated method stub
        super.onVisibilityChanged(visible);
        if (visible) {
            setRunning(true);
            Log.i(TAG, "Visible...");
            mHandle.postDelayed(r, 2000);
        } else {
            setRunning(false);
            Log.i(TAG, "Invisible...");
            mHandle.removeCallbacks(r);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:15:22.357

在您的清单中，声明：

```
 <activity android:name=".YourActivityName"
              android:configChanges="keyboardHidden|orientation"
    </activity> 
```

只有在清单中`onSurfaceChanged`声明 - 属性时才会调用您的- 方法！`configChanges`

关于您的第二个问题：`onVisibilityChanged`这不是您对名称的期望：

`Called when the window containing has change its visibility (between GONE, INVISIBLE, and VISIBLE). Note that this tells you whether or not your window is being made visible to the window manager; this does not tell you whether or not your window is obscured by other windows on the screen, even if it is itself visible.`

`onPause()`您需要通过和检查您的应用是否对用户“可见”`onResume()`

# php - Urlencode 和 file_get_contents

> ID：11071257
> 
> 赞同：8
> 
> 时间：2012-06-17T12:24:00.437
> 
> 标签：php, file, urlencode, file-get-contents

我们有一个类似`http://site.s3.amazonaws.com/images/some image @name.jpg`里面的网址`$string`

我正在尝试做的事情（是的，网址周围有一个空格）：

```
$string = urlencode(trim($string));
$string_data = file_get_contents($string); 
```

我得到的（@ 也被替换）：

`file_get_contents(http%3A%2F%2Fsite.s3.amazonaws.com%2Fimages%2Fsome+image+@name.jpg)[function.file-get-contents]: failed to open stream: No such file or directory`

如果您复制/粘贴`http://site.s3.amazonaws.com/images/some image @name.jpg`到浏览器地址栏中，图像将打开。

有什么不好以及如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T12:56:03.573

对整个 URL使用函数`urlencode()`，将生成一个无效的 URL。保持 URL 不变也是不正确的，因为与浏览器相比，该`file_get_contents()`函数不执行[URL 规范化](http://en.wikipedia.org/wiki/URL_normalization)。在您的示例中，您需要将空格替换为`%20`：

```
$string = str_replace(' ', '%20', $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:55:45.407

您指定的 URL 无效。`file_get_contents`需要一个有效的 http URI（更准确地说，底层的 http 包装器确实如此）。由于您的无效 URI 不是有效 URI，因此`file_get_contents`失败。

您可以通过将无效 URI 转换为有效 URI 来解决此问题。[RFC3986](https://www.rfc-editor.org/rfc/rfc3986)中提供了如何编写有效 URI 的信息。您需要注意正确表示所有特殊字符。例如，加号的空格，广告的 at 标志必须是 URL 编码的。还需要删除开头和结尾的多余空格。

完成后，网络服务器会告诉您访问被禁止。然后，您可能需要通过 HTTP 上下文选项为 HTTP 文件包装器添加额外的请求标头来解决该问题。您可以在 PHP 手册中找到相关信息：[http:// -- https:// -- 访问 HTTP(s) URL](http://php.net/manual/de/wrappers.http.php)

# android - 以编程方式缩放画布以适应视图

> ID：11071258
> 
> 赞同：1
> 
> 时间：2012-06-17T12:24:03.373
> 
> 标签：android, scale, android-canvas, android-view

我正在寻求有关以下缩放问题的帮助。

我已经建立了自己的`View`类（自定义视图），它是`Dialog`. 在这个自定义视图中，我从下到上在垂直方向上绘制了一个图形。图形可以大于或小于`View`. 因此，我想使用该方法（请参见下面的代码）将图形绘制到`Canvas`（大于）上，然后将其缩放以适应.`View``onDraw()``Canvas``View`

我尝试过的事情已经包括使用`ScaleAnimation`with`duration=0`或调用该`canvas.scale()`方法。每次都是一样的结果；该图未按比例缩放。

我已经阅读了不同的主题，例如：

[如何以编程方式调整自定义视图的大小？](https://stackoverflow.com/questions/2963152/android-how-to-resize-a-custom-view-programmatically)

[Android 比例视图](https://stackoverflow.com/questions/7191965/android-scale-view)

谢谢您的帮助。

VerticalGraphView 代码：

```
public class VerticalGraphView extends View {
    private static final String TAG = "VerticalGraphView";

    private int[] ch1_data = new int[1000];
    private int[] ch2_data = new int[1000];
    private int mCanvasHeight = 1000;
    private int mCanvasWidth = 242;
    private Paint ch1_color = new Paint();
    private Paint ch2_color = new Paint();
    private Paint zero_color = new Paint();
    private Paint grid_paint = new Paint();
    private Paint outline_paint = new Paint();

    public VerticalGraphView(Context context, AttributeSet attrs) {
        super(context, attrs);
        Log.d(TAG, "VerticalGraphView-Constructor called!");
    }

    protected void onFinishInflate() {
        super.onFinishInflate();
        Log.d(TAG, "onFinishInflate()-called!");

     // Log.i(TAG, "New Size set for height = " + setSizeHeight);
    }

    protected void onDraw(Canvas canvas) {
        Log.d(TAG, "onDraw()-called!");

     // // RESIZE TO FIT THE DATA
     // Bitmap b = Bitmap.createBitmap(mCanvasWidth, ch1_data.length, Bitmap.Config.ARGB_8888);
     // Canvas canvas = new Canvas(b);
     // canvas.setBitmap(b);

        ch1_color.setColor(Color.BLUE);                
        ch2_color.setColor(Color.RED);

        zero_color.setColor(Color.argb(80,0,0,00));
        zero_color.setStrokeWidth(3f);

        grid_paint.setColor(Color.rgb(200, 200, 200));

        outline_paint.setColor(Color.BLACK);
        outline_paint.setStrokeWidth(2f);

        if (canvas != null) {
            // Redraw the background
            canvas.drawRGB(255, 255, 255);

            // Draw vertical grey lines
            for (int vertical = 1; vertical<6; vertical++) {
                if (vertical == 3) { // Draw line in the middle
                    canvas.drawLine( vertical*(mCanvasWidth/6)+1, 1,
                                     vertical*(mCanvasWidth/6)+1, 
                                     mCanvasHeight+1,
                                     zero_color);
                } else {
                    canvas.drawLine( vertical*(mCanvasWidth/6)+1, 1,
                                     vertical*(mCanvasWidth/6)+1,
                                     mCanvasHeight+1,
                                     grid_paint);
                }
            }            

            // Draw horizontal grey lines
            for (int horizontal = 1; horizontal<10; horizontal++) {
                canvas.drawLine(1, horizontal*(mCanvasHeight/10)+1,
                                mCanvasWidth+1, 
                                horizontal*(mCanvasHeight/10)+1,
                                 grid_paint);
            }

            // draw outline
            canvas.drawLine(0, 0, (mCanvasWidth+1), 0, outline_paint); // top
            canvas.drawLine((mCanvasWidth), 0, (mCanvasWidth), (mCanvasHeight+1),
                            outline_paint);  //right
            canvas.drawLine(0, (mCanvasHeight), (mCanvasWidth), (mCanvasHeight),
                            outline_paint);    // bottom
            canvas.drawLine(0, 0, 0, (mCanvasHeight+1), outline_paint); //left

            // plot data
            int middle = mCanvasWidth / 2;

            for (int x=0; x<(ch2_data.length-1); x++) {                
                canvas.drawLine((middle + ch2_data[x]),(mCanvasHeight - x),
                                (middle + ch2_data[x+1]), 
                                (mCanvasHeight - x+1), 
                                ch2_color);
                canvas.drawLine((middle + ch1_data[x]),(mCanvasHeight - x),
                                (middle + ch1_data[x+1]), 
                                (mCanvasHeight - x+1), 
                                ch1_color);
            }
        }

        Log.e(TAG, "canvas.Height = " + canvas.getHeight());
        Log.e(TAG, "canvas.Width = " + canvas.getWidth());

        // RESIZE TO FIT THE VIEW, only in Y-Direction
        // Fits the canvas onto the view
        float ratio = ((float) canvas.getHeight()) / (float) mCanvasHeight;
        Log.e(TAG, "SCALE: ratio = " + ratio);

     // ScaleAnimation anim = new ScaleAnimation(1f,1f,1f,ratio, 0.5f, 0.5f);
     // anim.setDuration(1000);
     // this.startAnimation(anim);

     // canvas.scale(0f, ratio, canvas.getWidth() * 0.5f , canvas.getHeight() * 0.5f);

     // canvas.save(Canvas.MATRIX_SAVE_FLAG);
     // canvas.scale(0f, ratio, mCanvasWidth * 0.5f , mCanvasHeight * 0.5f);
     // canvas.restore(); 

     // canvas.scale(0f, 0.5f, mCanvasWidth * 0.5f , mCanvasHeight * 0.5f);
     // canvas.scale(100, 100);
     // canvas.getMatrix().postScale(0.5f, 0.5f);

        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(242, 500);
     // params.addRule(RelativeLayout.CENTER_IN_PARENT, RelativeLayout.TRUE); 
        params.addRule(RelativeLayout.CENTER_IN_PARENT);
        this.setLayoutParams(params);

     // RelativeLayout layout = (RelativeLayout) findViewById(R.id.relativeLayoutRight);
     // ViewGroup.LayoutParams params = layout.getLayoutParams();
     // params.height = 500;
     // params.width = canvas.getWidth();
     // layout.setLayoutParams(params);
     // invalidate();

     // DRAW THE CANVAS
        super.onDraw(canvas);
    }        

    public void setData(int[] data1, int[] data2 ) {
        Log.d(TAG, "setData()-called!");
        ch1_data = data1;
        ch2_data = data2;
    }

    /**
     * This method sets the height of the View.</br>
     * <b><u>NOTE:</u></b> The method call deletes all data stored for the graph.
     * @param newHeight the new height of the view
     */

    public void setHeight(int newHeight) {
        mCanvasHeight = newHeight;
        ch1_data = new int[newHeight];
        ch2_data = new int[newHeight];
    }
} 
```

layout.xml 用于`Dialog`：

```
<com.android.Ui.VerticalGraphView 
    android:id="@+id/verticalGraphView"
    android:layout_width="242dp"
    android:layout_height="1000dp"
    android:layout_centerInParent="true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:32:48.173

1.  您不应该更改 onDraw() 方法中的布局。在 onDraw 方法中，您必须获取当前布局状态并处理它（并在其边界内绘制）。

2.  尝试计算所需的视图大小，然后设置布局参数。每次你需要扩展时，再做一次。如果需要更新，请调用 invalidate() 。

# node.js - socket.io RAM 使用量随着时间的推移而上升

> ID：11071262
> 
> 赞同：4
> 
> 时间：2012-06-17T12:24:31.767
> 
> 标签：node.js, socket.io

我该怎么做才能将 ram 保持在合理的水平？
在我启动服务器之前，我有大约 140mb 的可用内存。
16 小时后，我还剩下大约 4mb 的空闲内存。
我在具有 256mb 内存的机架空间云上运行它。

```
var maxMsgs = 50;
var express = require('express'), sio = require('socket.io'), redis = require('redis'), RedisStore = require('socket.io/lib/stores/redis');
var app = express.createServer(), pub = redis.createClient(), sub = redis.createClient(), client = redis.createClient();
app.configure(function () {
  app.use(express.bodyParser());
  app.use(express.cookieParser());
  app.use(express.static(__dirname + '/public'));
  app.use(app.router);
});

app.get('/', function (req, res) {
    res.sendfile(__dirname + '/index.html');
});
app.listen(8002, function () {
  var addr = app.address();
  console.log('app listening on http://' + addr.address + ':' + addr.port);
});

var io = sio.listen(app, {log: false}), nicknames = {}, history = [], user_count = 0, topic = {topic: '', setBy: 'Server'}, ytvid = {vid: '', setBy: 'Server'};
io.enable('browser client minification');
io.enable('browser client etag');
io.enable('browser client gzip');
io.set('store', new RedisStore({redisPub : pub, redisSub : sub, redisClient : client}));
//io.set('resource', 'socket');

io.sockets.on('connection', function(socket) {
  socket.on('join', function(cu) {
    if(cu.username && cu.username != 'Guest') {
      socket.nickname = cu.username;
      socket.emit('connected', nicknames, history, topic, ytvid);
      nicknames[cu.username] = cu;
      socket.broadcast.emit('nicknames', nicknames);
      user_count++;
      //socket.broadcast.emit('announcement', {msg: socket.nickname + ' connected'});
    }
  });
  socket.on('message', function(msg, cb) {
    if(msg.msg && msg.msg != '') {
      msg.time = Date.now() / 1000;
      history.push(msg);
      while(history.length > maxMsgs) history.shift();
      cb(true, msg.time);
      socket.broadcast.emit('message', msg);
    }
  });
  socket.on('stopic', function(t) {
    if(t.topic && t.setBy && t.topic != '') {
      topic = t;
      io.sockets.emit('topic', t);
    } else {
      topic = {topic: 'No topic set', setBy: 'Admin'};
      io.sockets.emit('topic', topic);
    }
  });
  socket.on('sytvid', function(v) {
    if(v.vid && v.setBy && v.vid != '') {
      ytvid = v;
      io.sockets.emit('ytvid', v);
    } else {
      ytvid = {vid: false, setBy: 'Admin'};
      io.sockets.emit('ytvid', ytvid);
    }
  });
  socket.on('get debug', function() {
    socket.emit('debug', {users: nicknames, history: history, user_count: user_count, topic: topic});
  });
  socket.on('send command', function(c) {
    if(c.type == 'empty') history = [];
    io.sockets.emit('command', c);
  });
  socket.on('disconnect', function() {
    if(!socket.nickname) return;
    if(!nicknames[socket.nickname]) return;
    //nicknames[socket.nickname].status = 'offline';
    delete nicknames[socket.nickname];
    //socket.broadcast.emit('announcement', {msg: socket.nickname + ' disconnected'});
    socket.broadcast.emit('nicknames', nicknames);
    user_count--;
  });
});

function inArray(needle,haystack){for(var key in haystack){if(needle===haystack[key]){return true;}}return false;}
function zeroPad(digits,n){n=n.toString();while(n.length<digits){n='0'+n;}return n;}
function time(time){if(time==null)time=new Date();else if((time instanceof Date)===false)time=new Date(time);return time;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:47:46.857

看起来像 socket.on('join') 点的问题。

我建议你开始使用

```
var profiler = require('v8-profiler');
setInterval(function() {
    profiler.takeSnapshot('snappy');
},1000); 
```

就像这里描述的[http://code.google.com/p/v8/wiki/V8Profiler](http://code.google.com/p/v8/wiki/V8Profiler)

所以你现在知道你的泄漏从哪里开始。

还要仔细检查每个变量、对象和范围的分配和释放。

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:34:48.393

[有些人认为 socket.io 在使用 websockets 传输时会泄漏内存](https://github.com/LearnBoost/socket.io/issues/880)。尝试禁用它。类似于以下内容：

```
io.configure('production', function(){
  io.enable('browser client etag');
  io.set('log level', 1);

  io.set('transports', [
  , 'htmlfile'
  , 'xhr-polling'
  , 'jsonp-polling'
  ]);
}); 
```

[heroku也必须说以下](https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku)

# java - 使用 Spring Web Service 将 Hibernate 映射的程序拆分为前端和后端

> ID：11071263
> 
> 赞同：1
> 
> 时间：2012-06-17T12:24:46.130
> 
> 标签：java, web-services, spring, hibernate, soap

我计划将我的系统分成前端和后端。目前我的应用程序直接与数据库通信，但我想创建一个 Spring Web 服务来代替它。我的问题在于使用 Hibernate 将我的对象映射到数据库表。

我需要我的前端程序与数据库进行持久的最新交互。这再次意味着我必须编写大量 Web 服务端点来处理所有查询和更新。这再次使其休眠映射毫无意义，因为我没有得到任何东西。

我的问题是：是否有一种经过验证且合理的方法（如果可能，通过 SOAP）将休眠映射对象传递到前端，然后提交对这些对象所做的更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:12:11.170

简而言之：没有。

在处理完所有的 LazyLoadingExceptions 之后，在不同的应用程序中分离和重新附加 hibernate 管理的对象，如您所想，将导致您想要避免的各种问题，例如并发和锁定问题。这将是一个痛苦的b ***。

您要走的路最终会导致一种体系结构，该体系结构增加了一个额外的间接层，[数据对象](http://martinfowler.com/eaaCatalog/dataTransferObject.html)在业务服务和这些业务服务的客户端之间传输。只有您的业务服务才能直接与数据库对话。显然这很耗时，并且必须尽可能避免。这就是为什么我要求您解释您要解决的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:39:29.700

您可以通过 SOAP 或其他序列化机制传递休眠实体，但您应该非常小心延迟加载、集合加载和从会话中分离实体 - 否则您可能最终将所有数据库发送到只需要一个对象或休眠代理的地方另一边不能用。

# facebook - 如何在我的语言环境中翻译 facebook 时间

> ID：11071264
> 
> 赞同：0
> 
> 时间：2012-06-17T12:24:47.213
> 
> 标签：facebook, time

facebook 为发布日期返回此值：

```
2012-05-17T05:07:43+01:00 
```

如何将其翻译为我所在位置的人类可读日期/时间，例如我在香港？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:32:33.427

这取决于您使用的编程语言……</p>

例如，在 PHP 中，您可以`strtotime`先使用从上述时间字符串获取 unix 时间戳，然后使用`strftime`.

# java - 如何在 Netbeans 7 中附加缺少的 Java JDK 源

> ID：11071265
> 
> 赞同：8
> 
> 时间：2012-06-17T12:24:57.680
> 
> 标签：java, netbeans, netbeans-7, netbeans-platform

当我尝试在 NetBeans 中导航到一些 JDK 源代码时，它只显示它是已编译的代码并且源代码丢失了，我可以附加它。使用“附加..”按钮附加源后没有任何反应？我应该在哪里附上源代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T12:31:54.440

工具->JavaPlatforms->JSE{选择你的jdk}->源选项卡->添加jar/文件夹{从安装的JDK路径中选择src.zip。}

# azure - 3 个角色的诊断监视器 (Windows Azure)

> ID：11071266
> 
> 赞同：0
> 
> 时间：2012-06-17T12:25:02.213
> 
> 标签：azure, azure-worker-roles, azure-diagnostics

我正在开发一个在 Windows Azure 中部署的具有 3 个角色（两个 WebRoles 和一个 WorkerRole）的项目。

我的问题是当实例尝试启动诊断监视器（用于跟踪）时。从 WorkerRole 启动诊断监视器工作正常，但 WebRoles 在部署期间尝试启动它时会抛出“未处理的异常”。

我对所有角色使用相同的配置，所以没有问题。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:01:31.020

您使用的是什么存储帐户？是偶然的 DevStorage 吗？如果是这样，您需要提供一个真实的 Azure 存储帐户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:19:13.490

如果您可以发布您的代码和配置会更好。请确保在 csdef 和 cscfg 中配置了诊断插件。您可以使用“启用诊断”复选框来简化配置。

此致，

明旭。

# javascript - 显示/隐藏 div 中的 bxSlider

> ID：11071269
> 
> 赞同：8
> 
> 时间：2012-06-17T12:25:21.213
> 
> 标签：javascript, jquery, html, bxslider

我的页面内容使用不同的链接进行切换，`div`使用 jQuery 'showonlyone' 函数一次显示一个。在加载页面时，不应显示任何 div。我让它工作正常，直到我尝试在其中一个 div 中放置一个图片滑块（bxSlider） `newboxes1`，.

在盒子外面，bxSlider 工作正常。在其中，图片不显示。[在此处](http://megalife.fr/test/test.html)查看实时示例。

这是我的代码的样子：

```
<head>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">                                         
function showonlyone(thechosenone) {
     $('.newboxes').each(function(index) {
          if ($(this).attr("id") == thechosenone) {
               $(this).show();
          }
          else {
               $(this).hide();
          }
     });
}</script>  
</script>

<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
<script src="jquery.bxSlider.min.js" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function(){

$(function(){
  var slider = $('#slidersample').bxSlider({
    mode:'fade',
    controls: false
  });
  $('#bx-prev-sample').click(function(){
    slider.goToPreviousSlide();
    return false;
  });
    $('#hover-next-g-sample').click(function(){
    slider.goToPreviousSlide();
    return false;
  });
  $('#bx-next-sample').click(function(){
    slider.goToNextSlide();
    return false;
  });
  $('#hover-next-d-sample').click(function(){
  slider.goToNextSlide();
  return false;
  });
});
});
</script>
</head>

<body>
<div id="left-menu">
<a id="myHeader1" href="javascript:showonlyone('newboxes1');" >LINK 1</a><br />
<a id="myHeader2" href="javascript:showonlyone('newboxes2');" >LINK 2</a><br />
<a id="myHeader3" href="javascript:showonlyone('newboxes3');" >LINK 3</a>
</div>

<div class="newboxes" id="newboxes1">DIV 1
<!-- SLIDER -->
<div id="slider" style="margin-top: 0px; width="580 px"; height="375 px">
<div class="bx-prev"><div id="bx-prev-sample">←&lt;/div></div>
<div class="bx-next"><div id="bx-next-sample">→&lt;/div></div>
<div class= "hover-next-g"><div id="hover-next-g-sample" style="height:100%; width:100%"></div></div>
<div class= "hover-next-d"><div id="hover-next-d-sample" style="height:100%; width:100%"></div></div>
<ul id="slidersample" width="580px" height="375 px" style="margin:0px ; padding:0px">
  <li><img src="images/1.jpg" width="580" height="375" /></li>
  <li><img src="images/2.jpg" width="580" height="375" /></li>
  <li><img src="images/3.jpg" width="580" height="375" /></li>
</ul>
</div>
<!-- SLIDER END-->
</div>

 <div class="newboxes" id="newboxes2">DIV 2<br /></div>

 <div class="newboxes" id="newboxes3">DIV 3</div>

</body>
</html> 
```

我用

```
.newboxes {display:none;} 
```

在 CSS 中，因此页面加载时没有显示任何 div。从 CSS 中删除它可以解决 bxSlider 问题，如您[在此处](http://megalife.fr/test2/test2.html)看到的。但是，加载页面时会显示内容，而我希望将所有内容都隐藏起来。任何尝试在代码中`display:block`或`display:none`其他地方使用的尝试均未成功。

谁能想到解决这个问题的方法？谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-04T07:55:13.330

我在使用 bxSlider 插件时遇到了类似的问题：当包含它的 DIV 最初是隐藏`display:none`时，当我使 DIV 可见时，幻灯片不会出现`$('#div-id').show();`。仅显示幻灯片控制按钮。然后我解决了这样的问题：

```
<script>

var mySlider;

$(function() {

    mySlider = $('#slider').bxSlider({
            easing: 'easeInCubic',
            displaySlideQty: 3,
            moveSlideQty: 1,
            infiniteLoop: false,
            hideControlOnEnd: true
    });

    $("#processSignUp").click(function() {   // button that sets the DIV visible
        $("#trainings-slide").show();     // DIV that contain SLIDER
        mySlider.reloadSlider();        // Reloads the slideshow (bxSlider API function)
    });

});

</script> 
```

如您所见，我在显示DIV（包含滑块）**之后重新加载了幻灯片，并且效果很好。**也许这可以帮助解决您的问题并避免使用可见性：隐藏和其他技巧。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T15:58:29.700

我知道这个问题是不久前被问到的，但我有同样的问题。我不知道 bxSlider 和 display:none 是怎么回事。如果内容包含在显示设置为无的 div 中，它似乎不会读取内容。

到目前为止，我已经通过切换`visibility:hidden`而`visibility:visible`不是显示来解决它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-10T14:00:33.917

您可以使用可见性：隐藏和可见性：可见，但会有些麻烦。你可以使用 height:0px;overflow:hidden; 我正在使用最后一个解决方案

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-24T17:57:20.373

另一种解决方案是允许 bxslider 加载，然后在加载后将其隐藏。

```
<script>
    var mySlider;

    $(function() {
        mySlider = $('#slider').bxSlider({
            easing: 'easeInCubic',
            displaySlideQty: 3,
            moveSlideQty: 1,
            infiniteLoop: false,
            hideControlOnEnd: true,
            onSliderLoad: function() {
                $('#trainings-slide').hide();
            }
        });
    });
</script> 
```

# actionscript-3 - 将带有两个分隔符的字符串拆分为 arraycollection

> ID：11071276
> 
> 赞同：1
> 
> 时间：2012-06-17T12:26:05.393
> 
> 标签：actionscript-3, apache-flex

我尝试拆分一个字符串以将其发送到arraycollection。问题是每条记录都包含几个字段。在一个领域，我找到了该怎么做，但就我而言，没有。

```
var str:String="12/12/2008-70,15#05/03/2005-193,50#23/04/1987-45,23";

 public function splitDouble(stringInit:String,sep1:String):ArrayCollection{

            var tempAc:ArrayCollection= new ArrayCollection((stringInit.split(sep1)));
            return tempAc;
        }

    } 
```

记录分隔符为“#”，字段分隔符为“,”。我想添加类似的内容： tempAc[0][0]==12/12/2008; tempAc[0][1]==70,15;

谢谢

那么，你能帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:14:18.807

几乎在那里，尝试这样的事情：

```
public function splitDouble(source:String,rSeparator:String,fSeparator:String):ArrayCollection{
            var records:Array = source.split(rSeparator);
            var result:Array = [];
            for (var i : int = 0; i < records.length; i++) {
                result[i] = records[i].split(fSeparator);
            }
            return new ArrayCollection(result);
        } 
```

为简洁起见，您可以使用[every()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#every%28%29)函数，但我认为没有匿名函数或类似函数会更简单/更干净。

# javascript - JavaScript 无法在我的服务器上运行

> ID：11071278
> 
> 赞同：0
> 
> 时间：2012-06-17T12:26:10.310
> 
> 标签：javascript, json, amazon-ec2, amazon-web-services, cdn

此代码适用于其他测试环境，但不适用于我的。

你知道为什么吗？

我正在使用 Amazon EC2 和 Cotendo CDN。

我得到的结果是一个空白页。

提前致谢！

```
<html>
<head>
<title>Geo Test</title>
<script type='text/javascript' src='http://www.101greatgoals.com/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
<script>
$(document).ready( function() {
    $.getJSON( "http://smart-ip.net/geoip-json?callback=?",
        function(data){            
            console.log(data);
            var c = data.countryCode;
            if(c=="US" || c=="US" ){
                document.getElementById('ddd').innerHTML = 'US'; } else {
                    document.getElementById('ddd').innerHTML = 'Not US';}
            /*
            this service needs ip
            var ip = data.host;
            alert(ip);
            $.getJSON( "http://freegeoip.net/json/"+ip,
                function(data){
                    console.log(data);
                }
            );*/
        }
    );

});?
</script>
</head>
<body>
<div id="ddd"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T13:13:37.620

更改此行：

```
$(document).ready( function() { 
```

对此：

```
jQuery(document).ready( function($) { 
```

这是必要的，因为在[http://www.101greatgoals.com/wp-includes/js/jquery/jquery.js?ver=1.7.1](http://www.101greatgoals.com/wp-includes/js/jquery/jquery.js?ver=1.7.1)你已经调用了`jQuery.noConflict();`，所以使用 jQuery 是不能访问的`$`

...并且还删除 ? （见上面Pointy的评论）

# java - Android / Java：莫名其妙地进入catch块但跳过行

> ID：11071280
> 
> 赞同：0
> 
> 时间：2012-06-17T12:26:14.913
> 
> 标签：java, android, return, try-catch, parseint

我不仅在调试时发现了这种奇怪的行为，而且在正常执行期间也发现了这种奇怪的行为（至少我是这样认为的，基于应用程序的行为方式）。

如果我使用以下代码（在返回 int 的函数中）：

```
try {
    return Integer.parseInt("3");
} catch (NumberFormatException ex) {
    System.out.println(ex.getMessage());
    return 0;
} 
```

在调试期间，在'return Integer.parseInt("3");'之后 调试器跳转到'return 0;'。它似乎进入了 catch 块，但跳过了 System.out 行，甚至没有将“ex”显示为现有变量。然后函数返回 0。

但是，如果我将上面的内容替换为以下内容：

```
int x;
try {
    x = Integer.parseInt("3");
} catch (NumberFormatException ex) {
    System.out.println(ex.getMessage());
    x = 0;
}
return x; 
```

然后一切都按照我的预期运行：x 得到 3 的值，函数返回 3。

为了我的利益，我无法弄清楚为什么会发生这种情况。你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:34:00.133

不知道为什么应该这样做，但作为替代建议：

```
int returnValue = 0; // set returnValue to error as default
try {
    returnValue = Integer.parseInt("3");
} catch (NumberFormatException ex) {
        System.out.println(ex.getMessage());
}
return returnValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:24:23.400

麻 说道：

您是否查看过返回的实际值？有时调试器（由于应用了优化）会跳转到一个返回位置，该位置似乎设置了一个不合适的值，但实际上返回值已经正确建立。

嗯是对的。我在这里发布这个是为了明确这是答案。

# graphics - 光线追踪中的相机

> ID：11071281
> 
> 赞同：2
> 
> 时间：2012-06-17T12:26:33.947
> 
> 标签：graphics, camera, raytracing

我在光线追踪中完全坚持使用相机。请看一下我的计算并指出错误在哪里。我正在使用左手坐标系。

x,y //范围 [0..S) x [0..S) //像素坐标

现在，让我们将像素坐标转换为相机平面的参数坐标：

```
xp = x/S * 2 – 1; 
yp = y/S * 2 – 1; 
```

xp, yp // 范围 [-1..1] x [-1..1]

相机基础的计算：

```
//eye - camera position
//up - camera up vector
//look_at - camera target point

vec3 w = normalize(look_at-eye);
vec3 u = cross(up,w);
vec3 v = cross(w,u); 
```

所以光线方向应该有以下坐标：

```
vec3 dir = look_at – eye + xp*u + yp*v;
ray3 ray = {eye, normalize(dir)}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:07:05.717

我认为错误在这里：

```
vec3 dir = look_at – eye + xp*u + yp*v; 
```

图像平面应该有一个法线向量`w`，或者在眼睛和观察点之间（光线追踪器中更常见的方式），或者在眼睛后面（更接近地模拟实际的针孔相机）。所以让我们创建一个标量`zoom_factor`。正数会将平面放在眼睛前面，而负数会将平面放在眼睛后面（并翻转图像）。

因此图像平面的中心为：

```
eye + zoom_factor*w 
```

`(xp, yp)`因此，图像平面上的一个点是：

```
eye + zoom_factor*w + xp*u + yp*v 
```

现在，您希望方向是从眼睛到此图像平面上的这一点：

```
vec3 dir = eye + zoom_factor*w + xp*u + yp*v - eye; 
```

`eye`s 取消，因此它简化为：

```
vec3 dir = zoom_factor*w + xp*u + yp*v 
```

这假设`xp`每个`yp`都在 (-0.5, 0.5) 这样的范围内。请注意，(0, 0) 是这种排列的图像平面的中间。

# eclipse - 如何将 Skype 提供程序添加到 Eclipse 通信框架中？

> ID：11071283
> 
> 赞同：2
> 
> 时间：2012-06-17T12:27:06.133
> 
> 标签：eclipse, eclipse-plugin, skype, eclipse-ecf

我已经[安装](http://download.eclipse.org/rt/ecf/3.5.5/site.p2)了 Eclipse Communication Framework，现在我想添加一个[Skype Provider](http://wiki.eclipse.org/Skype_Provider)。

我已经下载了[Skype 提供程序源](https://github.com/ECF/Skype)并将其放置在 /eclipse/ECF-Skype/eclipse/ 中，如[这里](http://wiki.eclipse.org/Equinox_p2_Getting_Started#Supported_dropins_formats)的第三种方法所述，现在我希望 Skype 提供程序出现在下拉列表中。相反，我仍然得到这个：

![在此处输入图像描述](../Images/d7432cedae4dc49bf7c2bc3b1ab3b432.png)

有人可以帮我为 Eclipse 通信框架安装 Skype 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:08:26.247

首先，您需要从[此处](https://github.com/ECF/Skype/tree/master/bundles)将 Skype 包签出 到您的工作区，然后您可以导出这些 Eclipse 插件并使用 Eclipse 导出器从它们生成 OSGi 包（JAR）。

从这些 Eclipse 插件生成 OSGi 包后，您可以将这些插件放在

```
<ECLIPSE_HOME>/dropins
```

位置并重新启动您的 Eclipse 实例。

然后，您将能够在连接部分看到可用的 Skype 提供商。

谢谢并恭祝安康，

哈沙娜

# wpf - 为什么 ViewModel 需要实现 INotifyPropertyChanged 或使用 Dependency Properties？

> ID：11071284
> 
> 赞同：2
> 
> 时间：2012-06-17T12:27:15.133
> 
> 标签：wpf, mvvm, viewmodel, dependency-properties, inotifypropertychanged

`INotiyfyPropertyChanged`我已经看过很多关于 MVVM-Patern 的教程，但是如果我想将信息从 ViewModel 发送回 View，我仍然不明白为什么我需要获取 Dependency-Property 或-Property。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:33:01.153

依赖属性在属性更改时提供内置更改通知，这意味着 WPF 知道控件值何时更改。

默认情况下，您的 ViewModel 类型不提供任何更改通知机制，因此如果它们不支持这些选项中的任何一个，视图应该如何知道您的 viewModel 中的属性何时更改？

您需要您的 viewModel 使用这些选项中的任何一个，以便在属性值更改时可以通知视图。

这意味着如果在代码中更改了属性值，则用户界面会更新，并且如果用户输入更改了属性，则您的 viewModel（最终是您的模型）也会更新以反映这些更改。（基本上，绑定的双方都需要一种将属性更改相互通信的方式）。

界面是首选方法，因为这意味着您的`INotifyPropertyChanged`视图模型不是特定于 WPF 的，并且可以被其他用户界面技术使用。此外，依赖属性只能用于派生自`DependencyObject`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:31:33.400

第一：你不需要使用`INotifyPropertyChanged`或根本不需要`DependencyObject`。

但是，这是使用 Binding 的中心点，在 Binding 中有一些 Pub / Sub 机制，它正在监听这些`PropertyChanged`事件并在 Binding 的相关属性发生变化时更新视图。

以下是有关此的更多信息：

[SO关于绑定的工作原理](https://stackoverflow.com/questions/6912778/how-binding-internally-works-is-iobserver-more-optimized-than-traditional-inoti)

[发布订阅又名发布订阅模式](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T14:30:58.070

`INotiyfyPropertyChanged`- 我们在视图模型中使用了这个属性，这样如果 UI 发生任何变化，这个属性就会反映这些变化。

# python - 睡衣与龙卷风的融合

> ID：11071287
> 
> 赞同：0
> 
> 时间：2012-06-17T12:28:00.013
> 
> 标签：python, tornado, pyjamas

`pyjamas`是否可以使用小部件以及`tornado`服务器模型编写应用程序？我的想法是为我的 Web 应用程序提供一个类似桌面的前端`pyjamas`，并使用 tornado 执行服务器端逻辑。

具体来说，我想在服务器端生成的 Web 应用程序中触发事件，并能够使用`pyjamas`小部件显示这些事件。

有人有这方面的工作例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:02:56.557

旧睡衣清单上的一些龙卷风参考资料，但我不熟悉： [http ://groups.google.com/group/pyjamas-dev/search?group=pyjamas-dev&q=tornado&qt_g=Search+in+this+团体](http://groups.google.com/group/pyjamas-dev/search?group=pyjamas-dev&q=tornado&qt_g=Search+in+this+group)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:10:07.363

我选择的路线是通过 JSONRPC 将 pyjs（旧睡衣）与 web2py 结合起来。到目前为止，它工作正常。

# windows - 使用批处理脚本自动将最新文件复制到文件夹

> ID：11071291
> 
> 赞同：2
> 
> 时间：2012-06-17T12:28:33.787
> 
> 标签：windows, cmd, batch-file

我想在尝试创建一个脚本时寻求帮助，该脚本将自动检查最后修改的文件并将其传输到目的地。

我所拥有的是：

```
@Echo Off
Set _Delay=1
for /f "tokens=1,2,3 delims==" %%a in (config.ini) do (
if %%a==source set _Monitor=%%b
if %%a==destination set _Dest=%%b
if %%a==timer set _Timer=%%b
)
Set _Base=%temp%\BaselineState.dir
Set _Chck=%temp%\ChkState.dir
Set _OS=6
Ver|Findstr /I /C:"Version 5">Nul
If %Errorlevel%==0 Set _OS=5 & Set /A _Delay=_Delay*1000
Goto :_Xfer
:_StartMon
@echo off
SET R1=Start /w Sync1.vbs
Call :_SetBaseline "%_Base%" "%_Monitor%"
:_MonLoop
If %_OS%==5 (Ping 1.0.0.0 -n 1 -w %_Delay%>Nul) Else Timeout %_Delay%>Nul
Call :_SetBaseline "%_Chck%" "%_Monitor%"
FC /A /L "%_Base%" "%_Chck%">Nul
If %ErrorLevel%==0 Goto _MonLoop
::
for /l %%a in (%_Timer%,-1,0) do (
@Echo::::::::::::::::::::::::::::::::::::::::::::::
@Echo:: SEC Auto Transfer ::
@Echo:: Aizal 16 June 2012 ::
@Echo::::::::::::::::::::::::::::::::::::::::::::::
@Echo This script will scan SEC Data Folder for
@Echo new files every 30 minutes and will copy
@Echo it to the Server. Make sure you set correct
@Echo folder before using this script.
ECHO.
ECHO Currently recording:
FOR /F %%a in ('xcopy "%_Monitor%\*.SEC" "%_Dest%" /L /Y') DO (
IF NOT EXIST "%_Dest%.\%%~nxa" ECHO %%~nxa
)
ECHO Refreshing...
ECHO Please wait %%a seconds...
%R1%
cls
)
::
:_Xfer
FOR /F %%a in ('xcopy "%_Monitor%\*.SEC" "%_Dest%" /L /Y') DO (
IF NOT EXIST "%_Dest%.\%%~nxa" xcopy "%%a" "%_Dest%" /Y
)
::
Echo.Change Detected
ECHO.
Goto :_StartMon
:::::::::::::::::::::::::::::::::::::::::::::::::::
:: Subroutine
:::::::::::::::::::::::::::::::::::::::::::::::::::
:_SetBaseline
If Exist "%temp%\tempfmstate.dir" Del "%temp%\tempfmstate.dir"
For /F "Tokens=* Delims=" %%I In ('Dir /S "%~2"') Do (
Set _Last=%%I
>>"%temp%\tempfmstate.dir" Echo.%%I
)
>"%~1" Findstr /V /C:"%_Last%" "%temp%\tempfmstate.dir"
Goto :EOF 
```

现在，如果您注意到脚本会将源文件夹的内容与目标文件夹的内容进行比较，如果目标文件夹中还没有文件，则会从源文件夹复制文件。我想知道是否有人可以帮助我弄清楚如何使脚本检查源文件夹中最后修改的文件并仅将其复制到目标位置，并且如果所述文件当前正在使用/正在写入，那么脚本将等待直到它完成，然后再尝试再次复制。

另外，现在我必须编辑 source.ini 文件以指定要监视的文件夹，并且每次我必须更改子文件夹路径以监视更改时，有没有办法监视父文件夹中的任何新文件并采取文件到目的地？

我在网上找到了这个脚本，但希望不是基于日期而是基于时间来检查文件。

```
::Copy Files Made Or Modified Today
@echo off
setlocal
set source= <source directory>
set dest= <destination directory>
pushd "%source%"
set t=%date:~4%
::for /f %%a in ('dir /b /a-d /o-d') do call :PROCESS "%%a"
goto :eof
popd
:PROCESS
for /f %%j in ('echo %~t1') do set d=%%j
if "%d%"=="%t%" copy %1 "%dest%"
goto :eof 
```

希望从这里找到解决方案。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:54:18.330

有了这个，您将获得最后修改的文件：

```
for /f %%A in ('dir /b /tw /o-d not-mandatory-file-mask') do (
   set last_file=%%A
   goto :endloop
)
:endloop 
```

有了这个，如果可能的话，你将复制文件。如果没有，它将一次又一次地尝试：

```
:tryagain
set /a errorlevel=0
copy some_dir\%last_file% %destination%
if %errorlevel% NEQ 0 (
   sleep 10
   goto :tryagain
) else (
   goto :end
)
:end 
```

# java - Facebook 在 libGDX 中的实现

> ID：11071294
> 
> 赞同：2
> 
> 时间：2012-06-17T12:28:52.527
> 
> 标签：java, android, facebook, libgdx

我正在使用 libGDX 框架开发游戏。

我想实现一个图标，让用户喜欢 facebook 上的游戏。我已经尝试过 libGDX 论坛，但几乎没有运气。如果我能得到一些帮助，或者至少被告知一个教程或解释链接，我会很高兴。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:04:40.173

Facebook like 按钮实际上只是一个 HTML 链接。那么，为什么不将它添加到游戏中的标签或任何其他区域，然后打开浏览器访问该 URL，或者如果可能的话发送 POST 或 GET 请求？

[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

[http://www.webmonkey.com/2010/04/adding-facebook-like-buttons-to-your-site-is-damn-easy/](http://www.webmonkey.com/2010/04/adding-facebook-like-buttons-to-your-site-is-damn-easy/)

# objective-c - 从结果类型为“CardCreationClass *”的函数返回“UIView *_strong”的不兼容指针类型

> ID：11071295
> 
> 赞同：3
> 
> 时间：2012-06-17T12:29:07.827
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我收到上述错误，但我不确定如何解决它，有人能告诉我为什么我会收到此错误，以便我可以修复它吗？

代码本身可以工作并将图像（文本层除外）绘制到屏幕上，所以我只想删除错误。我已经搜索了堆栈溢出并找到了“强制转换”，但是在尝试了这种技术之后，错误仍然存​​在。

我认为这是因为我正在使用这些方法

```
[CardElementsCreationClass drawHeart] 
```

和

```
[CardElementsCreationClass drawValueWithSuit:suit AndValue:value] 
```

我的.m

```
#import "CardCreationClass.h"

@implementation CardCreationClass

//--------------------
//Create a card
//
+ (UIView *) newPlayingCardWithSuit:(NSString *)suit
                          AndValue:(NSString *)value {  
    //Create playing card UIVIew
    CGRect playingCardBounds = CGRectMake(100, 50, 100, 200);
    //CGPoint playingCardPosition = CGPointMake(100, 50);

    UIView* playingCard = [[UIView alloc] initWithFrame:playingCardBounds];

    //CREATE BACK OF CARD
    //

    //CREATE FRONT OF CARD
    CALayer* front = [CALayer layer];

    //Determine suit
    CAShapeLayer *cardSuitShapeLayer;

    if ([suit isEqualToString:@"heart"]) {
        cardSuitShapeLayer = [CardElementsCreationClass drawHeart];
    }

    [front addSublayer:cardSuitShapeLayer];

    //Determine value
    CATextLayer *cardValueTextLayer = [CardElementsCreationClass drawValueWithSuit:suit AndValue:value];

    [front addSublayer:cardValueTextLayer];

    //Add layers to card
    [playingCard.layer addSublayer:front];

    NSLog(@"Type = %@", [playingCard class]);

    //Return - **ERROR HAPPENS HERE**
    return playingCard;
}

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)drawRect:(CGRect)rect {
    // Drawing code
    [CardCreationClass newPlayingCardWithSuit:@"heart" AndValue:@"A"];
}

@end 
```

绘图代码

```
#import "CardElementsCreationClass.h"

@implementation CardElementsCreationClass

//--------------------
//HEARTS
//
+ (CGMutablePathRef)newHeartPath {
    //Declare
    CGMutablePathRef heartPath = CGPathCreateMutable();

    //Create shape
    CGPathAddEllipseInRect(heartPath, NULL, CGRectMake(0, 0, 20, 20));
    CGPathAddEllipseInRect(heartPath, NULL, CGRectMake(20, 0, 20, 20));

    CGPathMoveToPoint(heartPath, NULL, 37.5, 16.5);

    CGPathAddLineToPoint(heartPath, NULL, 37.5, 16.5);
    CGPathAddLineToPoint(heartPath, NULL, 20, 37.5);
    CGPathAddLineToPoint(heartPath, NULL, 2.5, 16.5);
    CGPathAddLineToPoint(heartPath, NULL, 20, 10);

    CGPathCloseSubpath(heartPath);

    //Return
    return heartPath;
}

+ (CGMutablePathRef)newHeartHighlightPath {
    //Declare
    CGMutablePathRef heartHighlightPath = CGPathCreateMutable();

    //Create hightlight
    CGPathAddArc(heartHighlightPath, NULL, 0, 0, 7, -(110 * M_PI) / 180, -(0 * M_PI), NO);

    CGPathAddLineToPoint(heartHighlightPath, NULL, 4, 0);

    CGPathAddCurveToPoint(heartHighlightPath, NULL, 4, -7, 0, -7, 0, -7);

    //Return
    return heartHighlightPath;
}

+ (CAShapeLayer*)drawHeart {
    CAShapeLayer* heartShapeLayer = [CAShapeLayer layer];

    //Context
    CGContextRef context = UIGraphicsGetCurrentContext();

    //Declare
    CGMutablePathRef heartPath = [self newHeartPath];

    /*CGPathAddArc(heartPath, NULL, 10, 10, 10, M_PI, 0, false); // Left hump
    CGPathAddArc(heartPath, NULL, 30, 10, 10, M_PI, 0, false); // Right hump
    CGPathAddLineToPoint(heartPath, NULL, 20, 37.5); // Pointy end

    CGPathCloseSubpath(heartPath);*/

    //Line
    CGContextSetLineWidth(context, 8.0);
    CGContextSetLineJoin(context, kCGLineJoinRound);

    //Colour shape
    CGContextSetCMYKStrokeColor(context, 0.17, 1, 1, 0.07, 1);
    CGContextSetCMYKFillColor(context, 0.07, 1, 1, 0.01, 1);

    //Draw shape
    CGContextTranslateCTM(context, 4, 4);

    CGContextAddPath(context, heartPath);
    CGContextDrawPath(context, kCGPathStroke);

    CGContextAddPath(context, heartPath);
    CGContextDrawPath(context, kCGPathFill);

    //Colour highlight
    CGContextSetCMYKFillColor(context, 0, 0, 0, 0, 0.3);

    //Left highlight
    CGMutablePathRef heartHightlightLeft = [self newHeartHighlightPath];

    //Draw highlight
    CGContextTranslateCTM(context, 10, 9);

    CGContextAddPath(context, heartHightlightLeft);
    CGContextDrawPath(context, kCGPathFill);

    //Right highlight
    CGMutablePathRef heartHightlightRight = [self newHeartHighlightPath];

    //Draw hightlight
    CGContextTranslateCTM(context, 20, 0);

    CGContextAddPath(context, heartHightlightRight);
    CGContextDrawPath(context, kCGPathFill);

    //Attach
    heartShapeLayer.path = heartPath;

    //Release
    CGPathRelease(heartPath);
    CGPathRelease(heartHightlightLeft);
    CGPathRelease(heartHightlightRight);

    //Return
    return heartShapeLayer;
}

//--------------------
//VALUES
//
+ (CATextLayer*)drawValueWithSuit:(NSString *)suit
                         AndValue:(NSString *)value {
    CATextLayer* valueTextLayer = [CATextLayer layer];

    valueTextLayer.string = value;
    valueTextLayer.borderWidth = 2.0;
    valueTextLayer.borderColor = [UIColor blackColor].CGColor;

    valueTextLayer.bounds = CGRectMake(0, 0, 50, 50);

    //Determine colour
    if ([suit isEqualToString:@"heart"] || [suit isEqualToString:@"diamond"]) {
        valueTextLayer.foregroundColor = [UIColor redColor].CGColor;
    } else if ([suit isEqualToString:@"club"] || [suit isEqualToString:@"spade"]) {
        valueTextLayer.foregroundColor = [UIColor blackColor].CGColor;
    }

    //Return
    return valueTextLayer;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:47:41.337

只需重命名方法

```
+ (UIView *) newPlayingCardWithSuit:(NSString *)suit
                           AndValue:(NSString *)value 
```

以不以单词开头的东西`new`。例如：

```
+ (UIView *) playingCardWithSuit:(NSString *)suit
                        andValue:(NSString *)value 
```

# asp.net - 将现有 *.mdf 文件添加为现有项目时出错

> ID：11071298
> 
> 赞同：1
> 
> 时间：2012-06-17T12:30:20.107
> 
> 标签：asp.net, sql-server-2008, visual-studio-2008

我有一个使用 Microsoft Sql Managenent studio 创建的现有数据库（myDatabse），并希望将 myDatabse.mdf 文件添加为现有项目（使用 Visual Web Developer 速成版）

但收到错误消息“文件无法打开，因为它正在使用另一个进程......”

在我看来，它未打开或未使用，添加 .mdb 文件没有任何问题。

还有另一个为什么应该（可以）将数据库添加到 App_data 文件夹，以便可以建立与数据库的连接。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:33:30.913

通常，正在运行的 sql server 服务不允许复制数据库文件。要复制`.mdf`文件，请分离数据库：

1.  打开 SQL Server 管理工作室
2.  展开数据库
3.  右键单击您的数据库>指向*任务*>选择*分离*>单击*确定*
4.  手动添加文件到`App_Folder`
5.  复制后，转到 Management Studio 右键单击*​​数据库* > 附加 > 指定数据库 > 单击*添加*

# javascript - 无法让 xpath 在 javascript 上工作

> ID：11071300
> 
> 赞同：2
> 
> 时间：2012-06-17T12:30:48.827
> 
> 标签：javascript, xpath, greasemonkey

我试图在 Grease monkey 上用 javascript 做简单的 xpath，但它对我不起作用，：

```
 var xmlString="<body>text<table class='citizens largepadded'><tr><td>bla</td></tr><tr><td>needTHIStext</td></tr></table></body>";
    var doc = new DOMParser().parseFromString(xmlString,'text/xml');
    var result = doc.evaluate("//table[@class='citizens largepadded']/tr[2]/td[1]", doc, null, XPathResult.STRING_TYPE, null);
    alert(result.stringValue); 
```

如何使用 xpath 和警报获取文本“needTHIStext”？

编辑：感谢您指出我的愚蠢错误:)。如果有人想做一些 xpathing，它现在可以工作了；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:34:01.417

它是`FIRST`TD 而不是第二个。

```
var xmlString="<body>text<table class='citizens largepadded'><tr><td>bla</td></tr><tr><td>needTHIStext</td></tr></table></body>";
    var doc = new DOMParser().parseFromString(xmlString,'text/xml');
    var result = doc.evaluate("//table[@class='citizens largepadded']/tr[2]/td[1]", doc, null, XPathResult.STRING_TYPE, null);
    alert(result.stringValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T12:34:32.477

你几乎说对了。你需要`<td>`第二个里面的第一个，`<tr>`所以使用`/tr[2]/td[1]`：

```
var result = doc.evaluate("//table[@class='citizens largepadded']/tr[2]/td[1]", doc, null, XPathResult.STRING_TYPE, null); 
```

# vbscript - 如何将函数库关联到 QTP 脚本？

> ID：11071302
> 
> 赞同：2
> 
> 时间：2012-06-17T12:30:50.197
> 
> 标签：vbscript, automated-tests, qtp

如何在 QTP 环境之外将函数库与 QTP 脚本关联。

非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T04:49:28.527

将函数库关联到 QTP 脚本有 4 种不同的方法。请参考这个[链接](http://www.automationrepository.com/2011/09/associate-function-library-to-qtp-script/)

# ruby-on-rails - 蜻蜓质量分配错误

> ID：11071312
> 
> 赞同：2
> 
> 时间：2012-06-17T12:31:44.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, dragonfly-gem

我已经在我的用户模型（设计）中添加了一个“头像”并且收到了错误`Can't mass-assign protected attributes: avatar`

在我的用户模型中，我添加了：

```
attr_accessible :avatar_uid, :avatar_name
image_accessor :avatar 
```

表单 (simple_form) 有 :html => { :method => :put, :multipart => true } 和字段：

```
<%= f.file_field :avatar %>
<%= f.hidden_field :retained_avatar %>
<%= f.check_box :remove_avatar %> 
```

添加`:avatar`到`attr_accessible`解决批量分配错误，但字段只是没有保存在用户表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:54:29.303

You need to add avatar in attr_accessible list as well in order to mass-assign it.

So just replace attr_accessible list by,

```
 attr_accessible :avatar_uid, :avatar_name, :avatar 
```

**image_accessor** is provided by dragon-fly gem which provide reader/writer for listed attribute like attr_accessor.

check this out this thread to know more differnce between attr_accessible and attr_accessor

["WARNING: Can't mass-assign protected attributes"](https://stackoverflow.com/questions/3944288/warning-cant-mass-assign-protected-attributes)

# javascript - Javascript - 在所有图像加载后执行

> ID：11071314
> 
> 赞同：39
> 
> 时间：2012-06-17T12:31:55.537
> 
> 标签：javascript

读了别人的问题后我想

```
window.onload=... 
```

会回答我的问题。我已经尝试过了，但是它会在页面加载的那一刻（而不是在图像加载之后）执行代码。

如果有任何区别，则图像来自 CDN 并且不是相对的。

有人知道解决方案吗？（我没有使用 jQuery）

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-17T13:37:06.357

这是现代浏览器的快速破解：

```
var imgs = document.images,
    len = imgs.length,
    counter = 0;

[].forEach.call( imgs, function( img ) {
    if(img.complete)
      incrementCounter();
    else
      img.addEventListener( 'load', incrementCounter, false );
} );

function incrementCounter() {
    counter++;
    if ( counter === len ) {
        console.log( 'All images loaded!' );
    }
} 
```

加载所有图像后，您的控制台将显示“所有图像已加载！”。

这段代码的作用：

*   从文档中加载变量中的所有图像
*   循环浏览这些图像
*   为每个图像上的“加载”事件添加一个侦听器以运行该`incrementCounter`函数
*   将`incrementCounter`增加计数器
*   如果计数器已达到图像的长度，则意味着它们都已加载

以跨浏览器的方式拥有这段代码不会*那么*难，它只是像这样更干净。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2020-03-31T11:49:17.177

想要单线？

```
Promise.all(Array.from(document.images).filter(img => !img.complete).map(img => new Promise(resolve => { img.onload = img.onerror = resolve; }))).then(() => {
    console.log('images finished loading');
}); 
```

相当向后兼容，甚至可以在 Firefox 52 和 Chrome 49（Windows XP 时代）中使用。但是，不在 IE11 中。

如果要缩小图像列表，请替换`document.images`为 eg 。`document.querySelectorAll(...)`

为简洁起见，它使用`onload`和`onerror`。如果元素的这些处理程序`img`也设置在其他地方（不太可能，但无论如何），这可能与页面上的其他代码冲突。如果您不确定您的页面不使用它们并且想要安全，请将该部分替换`img.onload = img.onerror = resolve;`为更长的部分：`img.addEventListener('load', resolve); img.addEventListener('error', resolve);`.

它也不会测试是否所有图像都已成功加载（没有损坏的图像）。如果你需要这个，这里有一些更高级的代码：

```
Promise.all(Array.from(document.images).map(img => {
    if (img.complete)
        return Promise.resolve(img.naturalHeight !== 0);
    return new Promise(resolve => {
        img.addEventListener('load', () => resolve(true));
        img.addEventListener('error', () => resolve(false));
    });
})).then(results => {
    if (results.every(res => res))
        console.log('all images loaded successfully');
    else
        console.log('some images failed to load, all finished loading');
}); 
```

它一直等到所有图像都加载或加载失败。

如果您想尽早失败，请使用第一个损坏的图像：

```
Promise.all(Array.from(document.images).map(img => {
    if (img.complete)
        if (img.naturalHeight !== 0)
            return Promise.resolve();
        else
            return Promise.reject(img);
    return new Promise((resolve, reject) => {
        img.addEventListener('load', resolve);
        img.addEventListener('error', () => reject(img));
    });
})).then(() => {
    console.log('all images loaded successfully');
}, badImg => {
    console.log('some image failed to load, others may still be loading');
    console.log('first broken image:', badImg);
}); 
```

两个最新的代码块用于`naturalHeight`检测已加载图像中的损坏图像。此方法通常有效，但也有一些[缺点](https://stackoverflow.com/questions/1977871/check-if-an-image-is-loaded-no-errors-with-jquery/34726863#comments-34726863)：据说当图像 URL 通过 CSS`content`属性设置并且图像是未指定其尺寸的 SVG 时，它不起作用。如果是这种情况，您将不得不重构代码，以便在图像开始加载之前设置事件处理程序。这可以通过在 HTML 中指定`onload`和`onerror`右键或通过`img`在 JavaScript 中创建元素来完成。另一种方法是在 HTML 中设置`src`并`data-src`在`img.src = img.dataset.src`附加处理程序后执行。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-06-17T15:33:40.793

Promise Pattern 将以最好的方式解决这个问题，我参考了 when.js 一个开源库来解决所有图像加载的问题

```
function loadImage (src) {
    var deferred = when.defer(),
        img = document.createElement('img');
    img.onload = function () { 
        deferred.resolve(img); 
    };
    img.onerror = function () { 
        deferred.reject(new Error('Image not found: ' + src));
    };
    img.src = src;

    // Return only the promise, so that the caller cannot
    // resolve, reject, or otherwise muck with the original deferred.
    return deferred.promise;
}

function loadImages(srcs) {
    // srcs = array of image src urls

    // Array to hold deferred for each image being loaded
    var deferreds = [];

    // Call loadImage for each src, and push the returned deferred
    // onto the deferreds array
    for(var i = 0, len = srcs.length; i < len; i++) {
        deferreds.push(loadImage(srcs[i]));

        // NOTE: We could push only the promise, but since this array never
        // leaves the loadImages function, it's ok to push the whole
        // deferred.  No one can gain access to them.
        // However, if this array were exposed (e.g. via return value),
        // it would be better to push only the promise.
    }

    // Return a new promise that will resolve only when all the
    // promises in deferreds have resolved.
    // NOTE: when.all returns only a promise, not a deferred, so
    // this is safe to expose to the caller.
    return when.all(deferreds);
}

loadImages(imageSrcArray).then(
    function gotEm(imageArray) {
        doFancyStuffWithImages(imageArray);
        return imageArray.length;
    },
    function doh(err) {
        handleError(err);
    }
).then(
    function shout (count) {
        // This will happen after gotEm() and count is the value
        // returned by gotEm()
        alert('see my new ' + count + ' images?');
    }
); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-17T12:36:54.530

Using`window.onload`将不起作用，因为它会在页面加载后触发，但是图像不包含在此加载定义中。

对此的一般解决方案是[ImagesLoaded](https://github.com/desandro/imagesloaded) jQuery 插件。

如果您根本不想使用 jQuery，您至少可以尝试将这个插件转换为纯 Javascript。在 93 行重要的代码和良好的注释下，这应该不是一项艰巨的任务。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-17T12:45:41.177

您可以在图像上设置 onload 事件，该事件可以回调执行处理的函数...关于如何处理所有图像是否已加载，我不确定以下任何机制是否有效：

有一个函数可以计算调用 onload 的图像数量，如果这等于页面上的图像总数，则进行必要的处理。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-17T13:08:57.607

```
 <title>Pre Loading...</title>
 </head>

 <style type="text/css" media="screen"> html, body{ margin:0;
 padding:0; overflow:auto; }
 #loading{ position:fixed; width:100%; height:100%; position:absolute; z-index:1; ackground:white url(loader.gif) no-repeat center; }**
 </style>

 <script> function loaded(){
 document.getElementById("loading").style.visibility = "hidden"; }
 </script>

 <body onload="loaded();"> <div id="loading"></div>

 <img id="img" src="avatar8.jpg" title="AVATAR" alt="Picture of Avatar
 movie" />

 </body> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-17T12:51:53.273

我正要建议 Baz1nga 所说的同样的事情。

此外，另一种可能不那么简单但更易于维护的选项是选择最重要/最大的图像并仅将 onload 事件附加到该图像。这里的好处是，如果您以后向页面添加更多图像，则需要更改的代码更少。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2019-06-12T12:58:31.500

这很好用：

```
$(function() {
 $(window).bind("load", function() {
    // code here
 });
}); 
```

# c++ - 一组 shared_ptr 和设置函数计数

> ID：11071315
> 
> 赞同：1
> 
> 时间：2012-06-17T12:32:02.320
> 
> 标签：c++, count, set, shared-ptr

我有一组共享指针。

我想创建一个函数来检查其中是否存在共享指针。

我认为我需要使用 set.count 来获取它。

但是我一直得到 0 ......即使共享指针存在于那里。

所以我的问题是：count 如何比较共享指针？

请记住，我是 C++ 新手，我可以提供代码，但代码很多。

编辑 2：检查建筑物并添加汽车的功能。

```
void Garage::addCar(Car& n, Building& m){
    shared_ptr<Building> mm(new Building(m));
    if (this->Buildings.count(mm) == 0){
        cout << m.name << " doesn't exist in " << this->name << "." << endl;
        return;
    }
    shared_ptr<Car> s(new Car(n));
    m.addCar(s);
    Cars.insert(s);
} 
```

创建建筑物的功能

```
 Building Garage::create Building(string name){
    shared_ptr< Building> f_ptr(new  Building(name));
     Buildings.insert(f_ptr);
    return (*f_ptr);
} 
```

类车库

```
class Garage {
public:
    Garage(string name);
    ~Garage();
    void admitCar(Car& n, Building& m);
    void dismissCar(Car& n, Building& m);
    void employEmployee(Employee& n, Building& m);
    void dismissEmployee(Employee& n, Building& m);
    Building createBuilding(string name);
    void deleteBuilding(Building&);
    private:
int nextIndex;
    string name;
    set<shared_ptr<Building> > Buildings;
    set<shared_ptr<Employee> > Employees;
    set<shared_ptr<Car> > Car;
} 
```

每当我想在建筑物中添加汽车时，它都会说该建筑物不存在于那个车库中...

解决方案（我自己的）：

```
bool Garage::hasBuilding(shared_ptr<Building> f){
    return (this->Buildings.count(f) != 0);
} 
```

这是我创建的功能。有用。

我尝试了 Jonathan Wakely 和 LiKao 的方法，但它们对我来说有点太复杂了，而且我遇到了我自己无法解决的问题。

感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T13:18:54.780

您正在比较的指针是不同的，因为它们指向不同的对象。每当您说`new Building`将创建一座新建筑物时，尽管它与旧建筑物同名。因此，任何指向它的指针`new Building`都将不同于指向创建新建筑物的旧建筑物的任何指针。因此比较是正确的，新建筑不存在于集合中（您只是通过复制创建它，因此它不存在）。

您需要一个集合，可以根据指针指向的对象的属性进行比较。为此，您需要添加一个不同的比较函数来查看指向对象的指针。像这样的东西应该工作：

```
struct less_building  : std::binary_function<std::shared_ptr<Building>,std::shared_ptr<Building>,bool> {
  bool operator()( const std::shared_ptr<Building> & b1, const std::shared_ptr<Building> & b2 ) {
    return std::less( b1->name, b2->name );
  }
}; 
```

根据您对 的定义，这可能需要一些朋友声明`Building`，但一般来说，这样的事情就可以解决问题。

**注1**：

在使用此技巧之前，请务必了解其含义。使用这个比较器意味着，`Buildings`你的集合中没有两个可以有相同的名字，不管他们可能有任何其他属性。之后，每对`Building`具有相同名称的 s 将被视为相同`Building`。根据您的建模领域，这可能是也可能不是您想要的。

如果您还想在名称相同的情况下比较其他属性，那么您必须将其添加到您的比较函子中。但是，这意味着不可能有两个`Building`具有相同属性集的 s。同样，这可能是也可能不是您想要的，具体取决于问题。

**注2**：

通常混合和引用相同类型的对象非常不方便，`std::shared_ptr`这也会导致您遇到的问题。如果你`std::shared_ptr`在任何地方使用一个类型，你应该尽量保持一致并且只传递这些`std::shared_ptr`。原因是，从 a 转换`std::shared_ptr`为引用（例如使用`operator*()`）很像单向函数。即，您可以从 a 获得参考，`std::shared_ptr`但很难`std::shared_ptr`从参考中取回。我可以想出两种方法来将`std::shared_ptr`它衰减为引用，但一种方法需要您更改对象（源自`std::enable_shared_from_this<Building>``std::shared_ptr`与引用地址的无操作删除器）。所以我不会推荐任何一种方式。

相反，请选择适合您的问题域的设计，如上所示。或者防止`std::shared_ptr`腐烂。如果您将它们作为 (const)-references 传递，则`std::shared_ptr`this 实际上不会比仅传递指针本身花费更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T13:13:04.270

根据您的“编辑2”，我想我看到了您的误解。这是两个完全不相关的共享指针：

```
Building m;
shared_ptr<Building> a(new Building(m));
shared_ptr<Building> b(new Building(m)); 
```

它们不会在`std::set`.

但是，这些*是*相关的指针：

```
Building m;
shared_ptr<Building> a(new Building(m));
shared_ptr<Building> b = a; 
```

所以他们会在一个`std::set`.

本质上，比较是在指针上执行的，而不是在底层对象上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T13:27:34.970

> 我想创建一个函数来检查其中是否存在共享指针。

我不认为你这样做。

```
shared_ptr<Building> mm(new Building(m));
if (this->Buildings.count(mm) == 0){ 
```

**当您刚刚**在集合中创建共享指针时，它如何`mm`存在于集合中，并且它指向您**刚刚**创建的全新对象？在你创造他们和在系列中寻找他们之间，他们怎么会进入系列？

 ****我认为您想`Building`通过比较建筑物的值来检查其中是否存在 a，您*不在乎*集合中是否存在特定对象或特定共享指针。

您可以搜索集合，与`m`每个元素指向的建筑物进行比较：

```
void Garage::addCar(Car& n, Building& m){
  bool found = false;
  for (auto& shptr : Buildings)
  {
    if (*sp == m)  // dereference shared_ptr to compare the Building 
    {
      found = true;
      break;
    }
  } 
```

或在集合中使用自定义比较，如[this answer](https://stackoverflow.com/a/11071569/981959)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T13:01:32.087

回答你的问题

> count 如何比较共享指针？

比较是使用`std::shared_ptr`'s`get()`方法完成的，这意味着比较托管指针。值得一提`std::set<std::shared_ptr<T>>`的是，相关的比较是`bool operator<`。

请参阅[此处](http://en.cppreference.com/w/cpp/memory/shared_ptr/operator_cmp)了解更多信息。****

# r - 在 reshape 包中使用 cast。

> ID：11071316
> 
> 赞同：2
> 
> 时间：2012-06-17T12:32:33.070
> 
> 标签：r, casting, reshape

我正在尝试使用“value =”参数。它没有做我想要的。下面的示例以更简单的格式复制了该问题。我想知道“value =”参数的用途。

我已经将一个数据框融合为长格式，其中包含我的所有因子和一个取值 0、1、2、3、4 的单个数值变量。然后，我创建了第二个值为 0,1 的值列来细化原始值列。当我尝试聚合时，只要它是原始值列，Cast 就可以发挥作用。

```
D = data.frame(id = 1:10,
           grp = rep(c("A","B"),5),
           variable = "var",
           value = rnorm(10,0,1),
           value2 = rnorm(10,10,2))

cast(D, grp~., mean)                    #works fine
cast(D, grp~., value = "value2", mean)  #does not work 
```

如果这是不可能的，那么我将不得不操纵我的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:47:31.347

我不确定，但我认为这是因为以下代码`cast`：

```
if (any(names(data) == value)) 
names(data)[names(data) == value] <- "value" 
```

例如，尽量不要在变量名称中使用“值”一词`names(D)[4:5] = c("one", "two")`，然后使用`cast(D, grp ~ ., mean, value="one")`and`cast(D, grp ~ ., mean, value="two")`来获得您要查找的结果。

## 更新

从技术上讲，您的数据并未完全“融化”。请参阅下面的示例，了解如何正确处理此问题。它基本上涉及再次“融化”您的数据并使用`subset`. *（我已将“value”和“value2”更改为更容易看到正在发生的事情的值。）*

```
D = data.frame(id = 1:10,
               grp = rep(c("A","B"),5),
               variable = "var",
               value = rep(c(1, 2), 5),
               value2 = rep(c(3, 4), 5))
D2 = melt(D, id.vars=1:2, measure.vars=4:5)
cast(D2, grp ~ ., mean, subset=variable=="value")
#   grp (all)
# 1   A     1
# 2   B     2
cast(D2, grp ~ ., mean, subset=variable=="value2")
#   grp (all)
# 1   A     3
# 2   B     4 
```

## 更新 2

似乎任何时候都有一个名为 的变量`value`，它总是`cast`使用的那个，即使您为参数指定了另一个变量`value=`。帮助文件`guess_value`（`cast`使用）的“策略”部分描述了以下两个步骤：

1.  是否存在值或（全部）列？如果是这样，请使用它
2.  否则，猜测最后一列是值列

但是，在我完成的少数测试中，我没有看到任何方法可以在`value=`不重命名变量或重新融合数据的情况下成功指定参数。

# c# - .net 中的 XMPP SDK 未被放弃

> ID：11071322
> 
> 赞同：1
> 
> 时间：2012-06-17T12:33:08.233
> 
> 标签：c#, .net, xmpp, xmppframework

我正在寻找一个 SDK 来发送最新的 XMPP 消息并支持 XMPP 协议的最新 RFC。

我知道 AG SOFTWARE 的新框架，但每个开发人员席位的成本超过 1000 欧元。

我检查了 XMPP 站点，但没有发现任何感兴趣的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:08:54.343

尝试[适用于 .NET 和 Windows Phone 7.5 的 XMPP/媒体库](http://xmedianet.codeplex.com/)。希望它足够强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:14:53.387

还有来自 AG-Software 的 agsXMPP SDK，它是 GPL。还有 LGPL 的 jabber-net。这两种产品都与 RFC 保持同步并受到支持。

# css - 使用表格行在 div 内浮动

> ID：11071323
> 
> 赞同：0
> 
> 时间：2012-06-17T12:33:24.163
> 
> 标签：css, css-float

我需要在一个div的左右边框上放置两个重复的背景图片。我不知道 div 的宽度或高度。我想将左边框放在 div 中，并将右边框向右浮动。

这是我的布局：http: [//jsfiddle.net/WmLhV/](http://jsfiddle.net/WmLhV/)

 `在 Firefox 中它工作正常，但在其他浏览器中，当浏览器窗口太短并且出现滚动条时，浮动消失。如您所见，容器是 display: table-row。我无法更改此设置，否则布局将中断...有没有更好的方法将图像放在右侧？即使没有浮动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T07:43:36.493

如果要使用 100% 高度，则必须使用位置，右对齐的 div 没有高度。检查这个小提琴我已经通过位置[http://jsfiddle.net/WmLhV/4/完成了这个](http://jsfiddle.net/WmLhV/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:17:35.590

你的`<div>`那个浮动到右边没有高度。即使内容为`<div>`空，Firefox 似乎也能理解 100% 的高度，但例如 IE9 就不能。

另一种方法是给你`<div>`的包含文本 60px`padding-left`和 60px `padding-right`，然后应用背景图像（注意：多个背景图像只能在 CSS3 友好的浏览器中工作）。填充本质上为您的背景图像创建空白空间，并且始终与文本具有相同的高度。

更进一步，稍微复杂的方法是将内部区域分为三个（左、中、右）和设置`display: table-cell`（或使用表格），然后基本上允许左右单元格的高度根据包含文本的中间单元格的高度。这将根据中间文本的高度显示侧面的背景图像——标准表格行为。这将摆脱对浮动的需要。`display: table-cell`IE6/IE7 不支持，但普通的 HTML 表格可以正常工作。`

# jquery - Fancybox CSS 未在生产中加载

> ID：11071327
> 
> 赞同：1
> 
> 时间：2012-06-17T12:34:00.230
> 
> 标签：jquery, ruby-on-rails, asset-pipeline, sass, fancybox-2

我在我的网站上使用了 jQuery fancybox 2 插件。在开发中它很好，但在生产中，fancybox 2 css 文件没有被加载，如此屏幕截图所示：

[![Fancybox css 未加载](../Images/ecae1e1da3f026a56d425d8fa44aae59.png)](https://i.stack.imgur.com/MdTiQ.png)

这些文件位于供应商/资产/样式表中，并且是普通的 .css 文件

它们是从我的 application.css.scss 文件中引用的，如下所示：

```
@import 'compass';
@import 'compass/reset';

@import '_common';

@import 'main';
@import 'pages';
@import 'coasters';
@import 'contact';
@import 'collections';
@import 'albums';

@import 'responsive';
@import 'twitterbox';
@import 'jquery.fancybox.css';
@import 'jquery.fancybox-thumbs.css'; 
```

有谁知道为什么没有加载这两个 css 文件。fancybox .js 文件可以正常工作，只是 CSS 文件不行。

尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:27:33.257

好的，如果您希望可以预编译 css，您可以使用[http://css2sass.heroku.com/](http://css2sass.heroku.com/)将您的 fancybox.css 文件转换为 scss 文件。

我希望这个解决方案会有所帮助！

# javascript - 使用 url 滚动到某个 div

> ID：11071330
> 
> 赞同：3
> 
> 时间：2012-06-17T12:34:02.910
> 
> 标签：javascript, jquery

我可以发送请求以仅使用 abc.com/#header1 之类的 url 加载某些 div，因为我使用的方法必须为我的任务制作 5 个单独的文件并更新所有文件。如果可以通过在我的一个文件中包含任何一段代码来完成，那么这对我来说是最好的。

我希望使用 url 请求在 div 上滚动，例如 abc.com/#def，其中 def 是页面应加载的 div 的 id。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T12:43:30.700

关于您[之前的问题](https://stackoverflow.com/questions/11071000/trigger-div-on-pageload/11071020#11071020)，您可以这样做：

```
$(function(){
  // get hash value
  var hash = window.location.hash;
  // now scroll to element with that id
  $('html, body').animate({ scrollTop: $(hash).offset().top });
}); 
```

您需要将该代码放在您希望元素滚动的页面中。因此，如果您访问`yourdomain.com/#foo`，它将滚动到`id`设置为的元素`foo`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T12:53:27.553

您可以使用 jQuery 在页面中加载一些 url，特别是 div。

```
 Here is an example with fraction of code :    
 $('#result').load('test.html', function() {
   alert('Hello,I am in the div');
}); 
```

如果您需要显示该特定 url 的数据。那么，您可以使用 Ajax 和 Jquery。

```
 Here is a small code for it:
  $(document).ready(function(){
     $("#result").load(function(){

          $.ajax({
            type: 'GET',
            url: "http://localhost/a.html",
            success:function(data){
             alert(data);
            }
        });
    return false;
   });
}); 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T13:22:42.927

试试这个：document.getElementById('elmID').scrollIntoView(true);

# android - 预装应用程序

> ID：11071337
> 
> 赞同：0
> 
> 时间：2012-06-17T12:35:07.780
> 
> 标签：android, apk

请帮助我，我正在尝试在 Android 上查找一些有关预装应用程序的文档。我需要知道它是什么意思，它有什么权限以及如何“预安装”我的应用程序进行测试。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T12:41:31.963

> 这是什么意思

这意味着作为固件的一部分发布的应用程序构建在设备上。

> 它有什么权限

预安装的应用程序仅通过预安装就没有特殊权限。安装在固件上的应用程序可以拥有`signatureOrSystem`否则将不可用的权限（例如，`WRITE_SECURE_SETTINGS`）。

> 如何“预安装”我的应用程序进行测试

您必须构建自己的固件。轻量级测试可以通过将您的设备植根并将您的应用程序放在预安装应用程序所在的位置 ( `/system/app`IIRC) 来实现，但由于大多数消费类设备没有植根，您的测试可能存在缺陷。

# c - c：重命名内核模块中的文件

> ID：11071338
> 
> 赞同：2
> 
> 时间：2012-06-17T12:35:09.183
> 
> 标签：c, file, rename, kernel-module

我知道如何在可加载的内核模块中打开/写入/读取文件。

但是也可以重命名/移动文件吗？也许在初始化方法中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:00:06.557

`unlink()`系统调用（或其在内核中的实现）将删除一个文件。

`link()`系统调用（或其在内核中的实现）可以创建指向具有新名称的文件的链接。只要您在单个文件系统中重命名，您就可以通过`link()`创建新名称和`unlink()`删除旧名称来重命名。

内核不支持（因此您的模块也不支持）跨文件系统重命名文件。该任务被委派给用户命令，例如`mv`.

# c# - 更新数据网格视图

> ID：11071346
> 
> 赞同：2
> 
> 时间：2012-06-17T12:37:15.890
> 
> 标签：c#, asp.net, datagridview

我正在开发一个应用程序，其中用户显示 datagridview 并且他可以编辑网格并且有一个更新按钮，并且用户按下更新按钮应该更新网格。问题是我如何检查哪一行或哪一列被编辑，如果我得到整个网格，那么我如何以数据表的形式从显示中获取它以保存在数据库中，以及数据库的查询是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:02:26.567

在 GridView_RowCommand 上：

我们可以通过下面的代码找到 index if row

```
int rowIndex = Convert.toInt32(e.CommandArgument); 
```

现在我们可以从下面的代码中找到行号

```
GridViewRow row = GridView.Rows[rowIndex]; 
```

# jquery - 将变量传递给 .animate() 函数 JQuery

> ID：11071349
> 
> 赞同：1
> 
> 时间：2012-06-17T12:38:26.887
> 
> 标签：jquery, function, variables, if-statement, jquery-animate

下面我有一个函数，它`container`根据一个变量 ( `nextItem`) 是否大于另一个 ( ) 来向左或向右动画化 div ( `currentItemRel`)。

我遇到的问题是`distance`在函数中使用变量`.animate()`。

我怎样才能传递这个变量？目前我的 JavaScript 正在中断，因此我们将不胜感激。

谢谢

```
var distance = (nextItem - currentItemRel) * 1260;

            if (nextItem > currentItemRel)
            {

                $('#container').animate({ left: -=distance }, 1200);

            } else if (nextItem < currentItemRel)
            {
                $('#container').animate({ left: +=distance }, 1200);
            }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T13:24:35.483

jquery animate 函数的 += 和 -= 修饰符必须被解析为字符串。

看看[这个小提琴](http://jsfiddle.net/VNbX4/)

# php - SimpleXML 的另一个说明

> ID：11071352
> 
> 赞同：-2
> 
> 时间：2012-06-17T12:39:20.923
> 
> 标签：php, xml, simplexml

> **可能重复：**
> [一个简单的程序来 CRUD 节点和 xml 文件的节点值](https://stackoverflow.com/questions/4906073/a-simple-program-to-crud-node-and-node-values-of-xml-file)

这是一个示例 XML 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<notes>
   <note>
      <to>Tove</to>
      <from>Jani</from>
      <heading>Reminder</heading>
      <body>Don't forget me this weekend!</body>
   </note>
</notes> 
```

如何使用添加另一个`note`（及其所有元素）`SimpleXML`？
[据我所知， addChild()](http://www.w3schools.com/php/func_simplexml_addchild.asp)只向现有树添加一个孩子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:53:08.653

嗯，首先我会得到一个更好的参考。也许是 PHP 手册，这是一个很好的资源：

[http://www.php.net/manual/en/simplexml.examples-basic.php#example-5118](http://www.php.net/manual/en/simplexml.examples-basic.php#example-5118)

这会将一个节点添加到您的`notes`列表中：

```
<?php

$notesxml = <<<XML
<?xml version="1.0" encoding="ISO-8859-1"?>
<notes>
   <note>
      <to>Tove</to>
      <from>Jani</from>
      <heading>Reminder</heading>
      <body>Don't forget me this weekend!</body>
   </note>
</notes>
XML;

$notes = new SimpleXMLElement($notesxml);

$note = $notes->addChild('note');
$note->addChild('to', 'Yourself');
$note->addChild('from', 'Billy Brown');
$note->addChild('heading', 'Another note');
$note->addChild('body', 'This is the body');

echo $notes->asXML();

?> 
```

[http://codepad.org/QrlU5CYm](http://codepad.org/QrlU5CYm)

你正在寻找正确的。您只需要先加载 XML，无论它以何种形式出现。

# php - 会话数据的 codeigniter 回显自身翻倍

> ID：11071353
> 
> 赞同：1
> 
> 时间：2012-06-17T12:39:32.283
> 
> 标签：php, codeigniter, session

我在我的 CI 会话中存储随机的东西，例如用户 ID，并且我已经在我的代码中上下爬行以寻找错误，然后最终做理智的事情并对我的会话数据执行`var_dump`/ `print_r`。

所以事情就是这样。我做了 print_r 并且在这种情况下我正确地看到了用户 ID 21。但是如果我在 print_r 正下方的一行中做`echo $this->session->userdata('userID');`我的结果是 2121 而不是 21，这对我来说是一团糟，我可以'在任何地方都找不到任何提到类似问题的东西，所以我希望这里的人可以让我直截了当。

***编辑以显示“代码”***

```
print_r($this->session->userdata);
echo $this->session->userdata('userID'); 
```

这产生了这个结果......

```
Array ( [userID] => 21 ) 21 
```

但如果我这样做..

```
//print_r($this->session->userdata);
echo $this->session->userdata('userID'); 
```

结果我得到了这个

```
2121 
```

希望这可以消除一些混乱..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:12:45.843

it seems like you're outputting 21 someplace else which is why you get `2121` and `Array ( [userID] => 21 ) 21` do an `exit()`; right after `echo $this->session->userdata('userID');` and you'll see exactly what is stored there, also `var_dump()` is a good idea.

# mysql - MySQL排序：如何使西里尔字符排在拉丁字符之前？

> ID：11071357
> 
> 赞同：1
> 
> 时间：2012-06-17T12:40:06.280
> 
> 标签：mysql, sorting, sql-order-by, collation

我正在使用 MySQL 来存储西里尔文和拉丁文字符串。我想在列表中显示所有这些字符串，按字母顺序排序。但是，它们目前是根据第一个字符排序的：

1.  数字
2.  拉丁字符
3.  西里尔字符

我希望西里尔字符排在拉丁字符之前。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:17:20.907

为了保持效率，我认为最好的方法是[创建自定义排序规则](http://dev.mysql.com/doc/refman/5.0/en/adding-collation.html)。

# sql-server-2008 - CTE 用于构建一个结果，该结果在表的自引用层次结构中为每个类别及其每个祖先类别都有一条记录？

> ID：11071358
> 
> 赞同：1
> 
> 时间：2012-06-17T12:40:14.450
> 
> 标签：sql-server-2008, common-table-expression, recursive-query

例如，如果我有如下表：-

```
 create table Categories(CategoryId int primary key,
 ParentCategoryId int foreign key references Categories(CategoryId)) 
```

例如，如果我的表中有以下数据：-

```
CategoryID  ParentCategoryId
1           2
2           3
3           4
4           NULL

Result:     

CategoryId  ParentCategoryId
1           2
1           3
1           4
2           3
2           4
3           4
4           NULL 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:44:27.440

像这样的东西：

```
DECLARE @MyTable TABLE(CategoryID INT, ParentCategoryID INT);

INSERT @MyTable VALUES(1, 2);
INSERT @MyTable VALUES(2, 3);
INSERT @MyTable VALUES(3, 4);
INSERT @MyTable VALUES(4, NULL);

; WITH CTE(RootCategory,CategoryID,ParentCategoryID,depth) AS (
    SELECT      CategoryID,CategoryID,ParentCategoryID,1
    FROM        @MyTable
    UNION ALL
    SELECT      CTE.RootCategory, t.CategoryID, t.ParentCategoryID,CTE.depth + 1
    FROM        CTE
    JOIN        @MyTable t  ON t.CategoryID = CTE.ParentCategoryID
)
SELECT      CategoryID = RootCategory
            , ParentCategoryID 
FROM CTE
WHERE       ParentCategoryID IS NOT NULL OR depth = 1
ORDER BY    RootCategory 
```

结果：

```
CategoryID  ParentCategoryID
----------- ----------------
1           2
1           3
1           4
2           4
2           3
3           4
4           NULL 
```

# sql - 查询优化器更喜欢索引扫描而不是索引搜索

> ID：11071359
> 
> 赞同：2
> 
> 时间：2012-06-17T12:40:16.133
> 
> 标签：sql, optimization, sql-server-2012

我正在使用 AdventureWorks2012 数据库。

`Sales.SalesOrderHeader`我在表上创建了以下索引

```
create index i1 on 
sales.salesorderheader(purchaseordernumber,salespersonid)
   include(orderdate,shipdate)
   where purchaseordernumber is not null
   and salespersonid is not null 
```

当我运行以下查询时：

```
select 
    PurchaseOrderNumber,
    OrderDate,
    ShipDate,
    SalesPErsonId

from sales.salesorderheader
where purchaseordernumber like '%po5%' and salespersonid is not null 
```

我希望索引查找不是索引扫描，因为作为查询一部分的所有列都已经是索引的一部分。

我在某处读到，如果查询优化器认为索引扫描比索引查找便宜，那么我们将进行索引扫描。但是，我不明白为什么会在这种情况下发生。我们根本没有查询。

有人可以解释一下吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:52:33.087

索引就像电话簿一样工作。你会`%po5%`在电话簿的哪里寻找？您必须阅读整个电话簿，因为您不知道第一个字符。

这就是 SQL Server 扫描整个索引的原因。它没有足够的信息来寻找。

# imagemagick - 基于中心点使用 ImageMagick 和 Paperclip 调整图像大小

> ID：11071365
> 
> 赞同：0
> 
> 时间：2012-06-17T12:40:50.800
> 
> 标签：imagemagick, paperclip

假设我希望将图像大小调整为 100px x 100px。

我上传了 200 像素 x 150 像素的图片 A。我希望它根据中心点调整到 ...px x 100px。所以我实际上并不关心损失方面（调整大小的 200 像素）。

如果我上传 150px x 200px 的图片 B，同样它应该被调整为 100px x ...px。

最终结果总是 100px x 100px，只是它位于中心。

我查看了以下示例：

*   [http://www.imagemagick.org/script/command-line-processing.php#geometry](http://www.imagemagick.org/script/command-line-processing.php#geometry)
*   [http://www.imagemagick.org/Usage/resize/](http://www.imagemagick.org/Usage/resize/)

但不知道该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:03:19.890

从你的描述我猜你在说

1.  缩放图像以完全填充 100x100 像素，即使这意味着您获得 100x123 或 123x100 像素
2.  切掉 100x100 像素边界之外的图像的任何部分，最好从图像的死点向每侧切出 50px。

你在说的是缩略图裁剪。如果您使用的是[Imagick](http://php.net/imagick)，请查看方便的小方法[Imagick::cropThumbnailImage()](http://php.net/manual/en/imagick.cropthumbnailimage.php)。

如果您不能通过 PECL 使用 ImageMagick，这里是cropThumbnail 的 CLI：

```
convert input.png -resize '100x100^' -gravity center -extent '100x100' output.png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:34:42.797

~~分两部分解决这个问题——首先让 ImageMagick 在最长~~的最短边上将图像缩小到 100 像素。看看`man convert`如何做到这一点。然后围绕中心点在较长的相反轴上进行裁剪。我应该认为这样做比一次完成要容易，但后者可以通过 IM 实现。

（根据评论中的版本更正）

# python - 使用类变量作为实例变量？

> ID：11071370
> 
> 赞同：0
> 
> 时间：2012-06-17T12:41:30.380
> 
> 标签：python, class

我想做的是声明类变量，但实际上将它们用作实例的变量。我有一个 class`Field`和一个 class `Thing`，像这样：

```
class Field(object):
    def __set__(self, instance, value):
        for key, v in vars(instance.__class__).items():
            if v is self:
                instance.__dict__.update({key: value})

    def __get__(self, instance, owner):
        for key, v in vars(instance.__class__).items():
            if v is self:
                try:
                    return instance.__dict__[key]
                except:
                    return None

class Thing(object):
    foo = Field() 
```

因此，当我实例化一个事物并设置属性*foo*时，它将被添加到*实例*中，而不是类中，类变量实际上永远不会被重新设置。

```
new = Thing()
new.foo = 'bar'
# (foo : 'bar') is stored in new.__dict__ 
```

到目前为止，这是可行的，但是上面的 Field 代码相当尴尬。它也需要在类 props 中查找 Field 对象实例，否则似乎无法知道 and 中的属性 ( )`foo`的名称。是否有另一种更直接的方法来实现这一目标？`__set__``__get__`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:01:28.460

重新阅读您的问题并意识到我错了：

您不需要覆盖默认的 python 行为来执行此操作。例如，您可以执行以下操作：

```
class Thing(object):
    foo = 5

>>> r = Thing()
>>> r.foo = 10
>>> s = Thing()
>>> print Thing.foo
5
>>> print r.foo
10
>>> print s.foo
5 
```

如果您希望特定变量的默认值为“无”，则可以将类范围的值设置为无。也就是说，您必须专门为每个变量声明它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T13:14:28.303

Field 的每个实例（实际上）都有一个名称。它的名称是在 中引用它的属性名称（或键）`Thing`。不必动态查找密钥，您可以在设置类属性时使用名称*实例化* s ：`Field``Thing`

```
class Field(object):
    def __init__(self, name):
        self.name = name

    def __set__(self, instance, value):
        instance.__dict__.update({self.name: value})

    def __get__(self, instance, owner):
        if instance is None:
            return self
        try:
            return instance.__dict__[self.name]
        except KeyError:
            return None

def make_field(*args):
    def wrapper(cls):
        for arg in args:
            setattr(cls, arg, Field(arg))
        return cls
    return wrapper

@make_field('foo')
class Thing(object):
    pass 
```

它可以像这样使用：

```
new = Thing() 
```

设置之前`new.foo`，`new.foo`返回 None：

```
print(new.foo)
# None 
```

设置后`new.foo`，`'foo'`是一个实例属性`new`：

```
new.foo = 'bar'
print(new.__dict__)
# {'foo': 'bar'} 
```

您可以使用以下方式访问描述符（`Field`实例本身）`Thing.foo`：

```
print(Thing.foo)
# <__main__.Field object at 0xb76cedec> 
```

* * *

PS。我假设你有充分的理由

```
class Thing(object):
    foo = None 
```

还不够。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T13:00:03.020

最简单的方法是调用属性而不是描述符变量的名称 - 最好从`_`指示其实现细节开始。这样，你最终得到：

```
def __set__(self, instance, value):
    instance._foo = value

def __get__(self, instance, owner):
    return getattr(instance, '_foo', None) 
```

唯一的缺点是您无法从用于描述符的名称中确定键的名称。如果与循环相比，增加的耦合不是问题，您可以只使用一个[属性](http://docs.python.org/library/functions.html#property)：

```
class Thing:
    @property
    def foo(self):
       return getattr(self, '_foo', None)

    @foo.setter
    def foo(self, value):
       self._foo = value 
```

否则，您可以将变量的名称传递到描述符中`__init__`，这样您就有：

```
class Thing:
    foo = Field('_foo') 
```

当然，所有这些都假设最简单和最 Pythonic 的方式 - 使用`Thing().foo`您设置`None`的真实变量`Thing.__init__`- 由于某种原因不是一种选择。如果这种方式对你有用，你应该更喜欢它。

# sql - 如何使用 KDB 查询获取前几个月的数据？

> ID：11071374
> 
> 赞同：1
> 
> 时间：2012-06-17T12:41:53.547
> 
> 标签：sql

如何检索上个月的数据，如果要自动执行查询，则查询中的日期值每个月都会相应更改？

例如：
当查询在**2012.01.01**上运行时--> select * from Table where date >= **2011.12.01**
当查询在**2012.02.01**上运行时--> select * from Table where date >= **2012.01.01**
当查询时运行于**2012.03.01** --> select * from Table where date >= **2012.02.01**

等等..

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:45:35.323

我假设您使用的是 Oracle 数据库；

```
select * from Table where date >= ADD_MONTHS(TRUNC(SYSDATE),-1) 
```

# ios - iOS：图像库的最佳方法 [图像缓存]

> ID：11071378
> 
> 赞同：0
> 
> 时间：2012-06-17T12:43:09.897
> 
> 标签：ios, performance, caching, uiimageview, image-gallery

我必须为 iPhone iOS 实现一个图片库。图片是基于包含图片 URL 的 XML 文档从 Web 加载的。我的问题是 - 实现某个图库的所有图片的图库概览的最佳方法是什么？（所有图片一次呈现给用户，就像在 GridView 中一样。这个问题侧重于性能问题，因为一个画廊可以有 100 多张照片 - 每张都有 100KB 或更大的大小）。

我已经尝试实现一个简单的视图，它由多个 UIImageViews（行和列）组成，其中图像被异步加载。但是应用程序因内存不足警告而崩溃，所以我必须按需加载图片，而不是一次全部加载。

实施此类画廊概览的最佳方式是什么？例如，每个单元格使用带有 3 张图片的 UITableView？还是使用分页 UIScrollView 更好，用户可以在每个页面呈现 12 张左右图片的页面之间切换？

主要问题是图像的缓存。会很高兴一些提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:04:12.040

无论您使用哪种解决方案，您都可以缓存图像，要缓存图像，您可以实现自己的缓存机制或使用已经很疯狂的缓存机制（我选择第二种选择）我通常使用 ASIHTTPRequest，更具体地说，我使用[ASIDownloadCache](http://allseeing-i.com/ASIHTTPRequest/How-to-use#using_a_download_cache)检查他们的文档但是它非常易于使用

# c# - “/”应用程序中的服务器错误。没有为此对象定义参数构造函数

> ID：11071379
> 
> 赞同：0
> 
> 时间：2012-06-17T12:43:13.917
> 
> 标签：c#, parameters, constructor

我`No parameterles constructor defined for this object`的`HomeController.cs`. 根据[ASP.NET MVC: No parameterless constructor defined for this object](https://stackoverflow.com/a/1355475/651779)我必须确保我`ActionResults`没有参数。但是我的 HomeController ActionResult 没有参数：

```
public class HomeController : Controller
{
    /// <summary>
    /// injected settings
    /// </summary>
    private ISettings settings;

    /// <summary>
    /// Initializes a new instance of the <see cref="HomeController"/> class.
    /// </summary>
    /// <param name="settings">The settings.</param>
    public HomeController(ISettings settings)
    {
        this.settings = settings;
    }

    /// <summary>
    /// Default index page
    /// </summary>
    /// <returns>redirects to the default application home page</returns>
    public ActionResult Index()
    {
        return RedirectToAction("Index", "Home", new { area = settings.Application, master = "default" });
    }
} 
```

我怎样才能找出错误来自哪里？

完整的堆栈跟踪：

```
[MissingMethodException: No parameterless constructor defined for this object.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +67

[InvalidOperationException: An error occurred when trying to create a controller of type 'Web.Lifescience.Controllers.HomeController'. Make sure that the controller has a parameterless public constructor.]
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +182
   System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) +80
   System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +74
   System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +232
   System.Web.Mvc.<>c__DisplayClass6.<BeginProcessRequest>b__2() +49
   System.Web.Mvc.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() +13
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func`1 func) +124
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +98
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +50
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970356
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:15:13.263

您的问题与`ActionResult`. 您`HomeController`没有无参数构造函数。
如果您使用带有参数的控制器的构造函数，您应该创建您的[自定义控制器工厂](http://keyvan.io/custom-controller-factory-in-asp-net-mvc)或使用依赖注入：根据您的逻辑[手动或使用 IoC 容器。](https://stackoverflow.com/questions/122273/constructor-parameters-for-controllers-without-a-di-container-for-asp-net-mvc)

# android - 如何在android中为水平和垂直定义单独的触摸事件？

> ID：11071380
> 
> 赞同：1
> 
> 时间：2012-06-17T12:43:25.520
> 
> 标签：android, touch-event

我有一个安卓应用程序。我有四个屏幕，每个屏幕都包含一个列表视图。我的要求是，当用户水平翻转时，它应该改变 ui 屏幕，当用户垂直翻转时，它应该滚动列表。我的代码是

```
public boolean dispatchTouchEvent(MotionEvent event)
 {
     System.out.println("22");
       int eventaction=event.getAction();

         switch(eventaction) 
        {
          case (MotionEvent.ACTION_MOVE):
              System.out.println("move");
          a=1;
          break;

              case MotionEvent.ACTION_UP:
                  System.out.println("up");
              if(a==1)
              {
                  view1.setAnimation(AnimationUtils.loadAnimation(this, R.anim.slide_left));
                  view1.showNext();
              }
              a=0;
                  break;

          default:
          break;
        }

        return super.dispatchTouchEvent(event);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:01:16.993

我有一个类似的问题，孩子们正在吃掉所有的滚动事件。我最终覆盖了`onInterceptTouchEvent`父级以检测它是水平还是垂直滑动并相应地采取行动。你会想要这样的东西

```
@Override
public boolean onInterceptTouchEvent (MotionEvent ev){
    if(horizontalSwipe(ev)){
        return true;
    }
    else
        return false;

} 
```

您有一些功能可以从您的历史记录中确定新的运动事件是否构成水平运动事件。

# linux - 通过脚本的 SSH x 转发/屏幕

> ID：11071382
> 
> 赞同：0
> 
> 时间：2012-06-17T12:43:51.390
> 
> 标签：linux, bash, ssh, gnu-screen

我试图通过编写执行多个 ssh 命令的脚本来减少打字。例如，虽然简单地打开编辑器没有问题，但我无法打开带有特定文件的编辑器：

这有效：

```
editFile="ssh -X -t $username@$serverIP 'nano'"
$editFile 
```

这不会：

```
editFile="ssh -X -t $username@$serverIP 'nano ~/test'"
$editFile 
```

我也无法像这样连接到屏幕，而只需启动屏幕就可以了：

```
viewScreen="ssh -X -t $username@$serverIP 'screen -r screen1'
$viewScreen 
```

如果我添加 -v 标志，在建立连接后我会收到此错误：

```
debug1: Sending command: 'nano /home/herb/.Scripts/test.txt'
bash: nano ~/test: No such file or directory

debug1: Sending command: 'screen -r screen1'
bash: screen -r screen1: command not found 
```

如果在终端中输入，这两个命令都可以正常工作，所以我在这里一定缺少某种魔法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T13:31:16.100

一个问题是您对“命令”参数使用单引号。没有它们，它应该可以工作（或者至少给你一个不同的错误）。

您还应该使用“别名”命令而不是将命令分配给变量：

```
alias viewScreen="ssh -X -t $username@$serverIP screen -r screen1"
viewScreen 
```

请注意，这会在定义别名时评估变量。因此，$username 和 $serverIP 应该在之前定义。

# ruby-on-rails - Rails: Populate nested models with rake and forgery

> ID：11071389
> 
> 赞同：0
> 
> 时间：2012-06-17T12:46:18.803
> 
> 标签：ruby-on-rails, nested, rake, populate, ruby-forgery

I want to populate my database with test data my user and profile models are seperate form each other with a 1-to-1 relationship. The script that I'm running creates the data but doesn't relate it together. how would I get it to related the data together?

app/models/user.rb

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable
  has_one :profile

  attr_accessible :email, :password, :password_confirmation, :remember_me,      :profile_attributes

 accepts_nested_attributes_for :profile

end 
```

app/models/profile.rb

```
class Profile < ActiveRecord::Base
   belongs_to :user

   attr_accessible :first_name, :last_name

   validates :first_name, presence: true
   validates :last_name, presence: true 
```

end

lib/tasks/sample_data.rb

```
namespace :db do
  desc "Fill database with sample data"
  task populate: :environment do
   User.create!(email: "dufall@iinet.net.au",
             password: "123qwe",
             password_confirmation: "123qwe")
   Profile.create!(first_name: "Aaron",
                last_name: "Dufall")
   99.times do |n|
   first_name  = Forgery::Name.first_name
   Last_name  = Forgery::Name.last_name
   email = "example-#{n+1}@railstutorial.org"
   password  = "password"
   User.create!(email: email,
                password: password,
                password_confirmation: password)
  Profile.create!(first_name: first_name,
                  last_name: Last_name)
  end 
 end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:10:29.773

Try to use user.create_profile! instead of Profile.create!

```
namespace :db do
  desc "Fill database with sample data"
  task populate: :environment do
   user = User.create!(email: "dufall@iinet.net.au",
             password: "123qwe",
             password_confirmation: "123qwe")
   user.create_profile!(first_name: "Aaron",
                last_name: "Dufall")
   99.times do |n|
     first_name  = Forgery::Name.first_name
     Last_name  = Forgery::Name.last_name
     email = "example-#{n+1}@railstutorial.org"
     password  = "password"
     user = User.create!(email: email,
                password: password,
                password_confirmation: password)
     user.create_profile!(first_name: first_name,
                  last_name: Last_name)
  end 
 end
end 
```

# xpath - 如何在任何子（即子、孙等）节点中选择包含特定元素的所有节点

> ID：11071390
> 
> 赞同：0
> 
> 时间：2012-06-17T12:46:24.700
> 
> 标签：xpath

我有以下 XML：

```
<test>
    <a></a>
    <a><a1><c type="5"/></a1></a>
    <a><a2><a1><c type="5"/></a1></a2></a>
    <a><a2><a1><c/></a1></a2></a>
    <a><c type="6"/></a>
</test> 
```

我想选择在其子代、孙代或孙辈`a`中拥有的所有节点，即层次结构中的任何位置。`c[@type = '5']`我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:03:38.490

解决方案之一：

```
//a[descendant::c[@type = '5']] 
```

# c# - 命名空间“System.Web.Mvc”中不存在类型或命名空间名称

> ID：11071392
> 
> 赞同：222
> 
> 时间：2012-06-17T12:46:41.703
> 
> 标签：c#, asp.net-mvc-3

构建 MVC3 解决方案进展顺利，但在浏览器中出现错误：

编译器错误消息：CS0234：命名空间“System.Web.Mvc”中不存在类型或命名空间名称“Html”（您是否缺少程序集引用？）

```
Source Error:
Line 25:         <add namespace="System.Web.Mvc" />
Line 26:         <!--<add namespace="System.Web.Mvc.Ajax" />-->
Line 27:         <add namespace="System.Web.Mvc.Html" />
Line 28:         <add namespace="System.Web.Routing" />
Line 29:         <add namespace="System.Web.WebPages" /> 
```

`NuGet`我已经为所有项目安装并设置了解决方案的数据包`MVC3`。是否`MVC3`包括 library`System.Web.Mvc.Ajax`和 `System.Web.Mvc.Html`其他？为什么我会收到错误消息？

* * *

在 References 文件夹中，我有 System.Web.Mvc

`Runtime version: v4.0.30319`,

```
Version: 3.0.0.0 
```

* * *

网页配置

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <httpRuntime targetFramework="4.5" encoderType="System.Web.Security.AntiXss.AntiXssEncoder, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <machineKey compatibilityMode="Framework45" />
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </profile>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </roleManager>
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
      </providers>
    </sessionState>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
  <connectionStrings>
    <add name="EFDbContext" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=SportStore;Integrated Security=True;Pooling=False;" providerName="System.Data.SqlClient" />
  </connectionStrings>
</configuration> 
```

[MSDN](http://msdn.microsoft.com/en-us/library/system.web.mvc.aspx) System.Web.Mvc 命名空间

文件`packages.config`：

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="EntityFramework" version="5.0.0-rc" />
  <package id="jQuery" version="1.7.2" />
  <package id="jQuery.UI.Combined" version="1.8.11" />
  <package id="jQuery.Validation" version="1.9" />
  <package id="Microsoft.AspNet.Mvc" version="3.0.20105.1" />
  <package id="Microsoft.AspNet.Providers.Core" version="1.0" />
  <package id="Microsoft.AspNet.Providers.LocalDB" version="1.0" />
  <package id="Microsoft.AspNet.Razor" version="1.0.20105.408" />
  <package id="Microsoft.AspNet.WebPages" version="1.0.20105.408" />
  <package id="Microsoft.Web.Infrastructure" version="1.0.0.0" />
  <package id="Modernizr" version="2.0.6" />
  <package id="Moq" version="4.0.10827" />
  <package id="Ninject" version="3.0.1.10" />
</packages> 
```

* * *

## 回答 #1

> 赞同：424
> 
> 时间：2012-10-31T00:31:50.523

清理您的解决方案，然后将这些文件的属性设置为`Copy Local = True`.

将 Copy Local 属性设置为 True 或 False

在解决方案资源管理器中，单击“显示所有文件”按钮以显示“引用”节点。

*   打开项目的引用节点。
*   右键单击“引用”列表中的引用，然后单击“属性”。与该引用关联的属性出现在“属性”窗口的列表中。
*   在“属性”窗口中，将“复制本地”属性更改为 True 或 False。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2014-10-16T01:15:21.000

无论出于何种原因，我的两个解决方案都有以某种方式自发卸载 asp.net MVC 的 Web 项目。我从 Nuget 安装了它，现在它们都再次工作了。这发生在最近一批 Windows 更新之后，其中包括针对我使用的版本 (4.5.1) 的 .net 框架更新。

**编辑：来自 .Net Web 开发和工具博客：**

[Microsoft Asp.Net MVC 安全更新 MS14-059 破坏了我的构建！](http://blogs.msdn.com/b/webdev/archive/2014/10/16/microsoft-asp-net-mvc-security-update-broke-my-build.aspx)

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-06-17T13:17:09.830

当我从 IIS 运行并且默认站点的应用程序池设置为 .NET 2.0 版时，这通常会引起我的注意。在 Visual Studio 中使用 IIS 时，它会创建一个虚拟目录，但仍会在默认站点的应用程序池下运行。如果使用内置 Web 服务器，请右键单击您的 Web 项目，转到属性并确保您在正确版本的 .NET 下运行它。在 IIS 上检查应用程序池中的 .NET 版本。

继我上次关于如何创建项目的评论之后 - 您是否正确包含程序集，如下所示（取自 VS10 中的 MVC3 项目模板生成的默认 web.config 文件）：

```
<compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
</compilation> 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2014-11-07T19:31:31.180

**您需要更新 MVC。**

1.  转到工具-> NuGet 包管理器-> 管理解决方案的 NuGet 包
2.  点击“更新”
3.  更新“Microsoft ASP.NET MVC”
4.  重建解决方案

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2012-10-29T12:55:58.797

我遇到了同样的问题 - 我的情况是我从 lib 文件夹中引用新的 System.Web.Mvc.dll 并且我没有将“复制本地”设置为 true。然后应用程序恢复到 GAC 中没有正确命名空间（Html、Ajax 等）的版本，并给我运行时错误。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2014-10-18T15:06:39.340

我的解决方案在**为解决方案管理 Nuget 包下...** - 我有很多更新要做很多包。

让我退后半步，说我把自己搞砸了，因为我将解决方案和项目从一个文件夹移动到另一个文件夹......所以与项目的想法相比，事情已经不正常了。一切都顺利进行，但显然 Nuget 会变得混乱，除非您使用与我不同的方法。

回到解决方案...我只是去了**管理 Nuget Packages for Solution...** >> **Updates** >> **Microsoft and .NET**并点击**Update All 按钮**。

一切都恢复了正常和快乐。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2014-10-24T03:48:48.280

我下载了一个 mvc 5 项目和指向的违规问题

```
<add namespace="System.Web.Mvc.Ajax" /> 
```

使用此错误消息：

```
CS0234: The type or namespace name 'Ajax' does not exist in the namespace 'System.Web.Mvc' (are you missing an assembly reference?) 
```

- >我来到这个网页并尝试了一个干净的和上面的一些东西等等......

对我有用的只是

```
Manage Nuget and Update all the packages.  Then it worked fine. 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2015-10-13T14:55:47.733

在 nuget 包管理器中运行以下命令为我修复了它：

```
update-package microsoft.aspnet.mvc -reinstall 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-03-06T21:19:23.773

鉴于问题日期，这个答案相当晚，但有人可能会发现它很有用。

在 Visual Studio 2012 的本地项目 Net Framework 4.5 MVC 4 中，上述解决方案均不适用于我。对于上下文，我正在关注关于在 CodeProject 上创建准系统 Web Api 的教程（[http://www.codeproject.com/ Articles/615805/Creating-a-Clean-Minimal-Footprint-ASP-NET-WebAPI](http://www.codeproject.com/Articles/615805/Creating-a-Clean-Minimal-Footprint-ASP-NET-WebAPI)）当我遇到这个问题时。

对我有用的是明确地将“System.Web.Mvc”添加到我的应用程序的引用中，即使应用程序已经引用了“System.Web”。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-08-05T08:26:46.543

我有同样的问题，但以上都没有为我工作。他们确实把我引向了正确的方向。

例如，当我将 System.Web.Mvc 引用的“Copy Local”设置为“true”时，它会自动将其设置回 False。

我有多个项目依赖于我的解决方案中的 System.Web.Mvc 引用，但只有一个项目导致了这个问题。在 VS 2012 中，此引用标有黄色注意三角形。

找到这个参考 => 删除它 => 重新添加它

那为我修好了。希望这可以帮助

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-09-24T00:14:38.620

查看并检查您的 csproj 中的引用路径。

我删除了对 System.Web.Mvc （和其他）的引用，并将它们读入了自定义路径。`C:\Project\OurWebReferences`

但是，这样做之后，仍然 csproj 中的引用路径并没有改变。曾是

```
<Reference Include="System.Web.Mvc, Version=4.0.0.1, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\..\..\..\OurWebProject\bin\Debug\System.Web.Mvc.dll</HintPath>
</Reference> 
```

改为手动

```
<Reference Include="System.Web.Mvc, Version=4.0.0.1, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
        <HintPath>..\..\..\..\OurWebReferences\System.Web.Mvc.dll</HintPath>
</Reference> 
```

路径只是一个示例。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-11-03T19:46:40.250

对我来说，解决方案是确保所有项目都是为同一个 CPU 构建的——在我的例子中是 x86

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-11-10T13:31:51.117

Copy Local = True 解决了我的一个项目。但是在另一个项目中，我得到了同样的错误，试图设置 Copy Local = true，但它不能解决我的问题。在项目属性中将目标框架从 4.5.1 更改为 4.5 对此有所帮助。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-06-09T17:22:28.113

我做了一些非常愚蠢的事情（也许你也做了）。

我试图打电话`System.Web.Mvc.Html.Partial("<Partial Page>")`

System.Web.Mvc.Html 是一个命名空间而不是一个类，我没有很好地阅读我的错误消息，所以我将我的错误解释为该类`Html`在命名空间 System.Web.Mvc 中不存在，这就是我结束的方式在这里（我知道很愚蠢）。

我需要做的就是在`@using System.Web.Mvc.Html`我的页面中添加一个 using 语句，然后`@Html.Partial`按预期工作。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-10-30T10:38:40.723

如果以上任何一项都不能解决您的问题，只需将 System.Web.Mvc.dll 的属性设置为复制本地 ture。

它会解决

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-12-29T15:47:16.197

我有同样的问题，但在我的情况下是由其他因素引起的。我写这篇文章是为了帮助其他有同样问题的人。我有多个项目的解决方案。其中两个与 System.Web.Mvc 一起工作，通常我们的引用指向我们控制所用版本的外部包。出于某种原因，项目参考之一转到 GAC 并指向 GAC dll（版本 4.0.0.1）并且程序出现错误。要纠正它：

简单检查对 System.Web.Mvc 的引用是否指向同一目录路径中的同一 dll。

我希望有帮助。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-09-30T07:45:05.047

我已经从我网站的 Bin 文件夹中删除了 System.Web.dll。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-03-31T13:56:21.523

我遇到了这个问题，打开和关闭本地复制等不起作用。该项目没有使用 nuget，因此围绕该问题的修复也是不可能的。

对我来说，解决方法是安装 MVC 3（我是通过 Web 平台安装程序完成的）。

我怀疑随着 .net 框架的不断发展以及人们没有安装较旧的 MVC 东西，这将成为人们更多的解决方案。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-09-15T14:00:32.117

将您的 DLL 设置为 CopyLocal/true 或任何其他主要修复程序可能会解决您的问题，但这是另一个让我浪费 20 分钟时间的极端情况。

将命名空间添加到 Views/Web.config 时，请确保它们的大小写正确：

```
 <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=5.2.3.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="THE.NameSpace" />
        <add namespace="THE.Namespace" />
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-05-29T14:15:04.427

好的，所以很多人似乎都遇到了这个问题。我的问题是由具有其他项目的 bin 文件夹路径的引用或从系统文件夹中引用 dll 引起的。该项目大约有 6 年的历史，以前的开发人员已经决定这是他们引用库的方式。

解决方案是遍历每个引用并检查路径，然后删除引用并使用 NuGet 添加它。对于不在 NuGet 上的任何包，我在包旁边创建了另一个文件夹，并将 dll 以与 NuGet 相同的布局放入其中。

我还必须检查配置文件并确保使用了正确版本的软件包。漫长而痛苦的过程！

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-08-06T14:32:01.190

每当我在视图打开的情况下构建时，我都有一个项目执行此操作。一旦我关闭视图，错误就会消失并且构建成功。很奇怪。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-08-30T15:23:06.193

我有同样的问题，没有一个解决方案对我有用，最后我删除`System.Web.MVC`并再次添加然后一切恢复正常，我的问题解决了。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-07-15T09:09:29.647

正如经常发生的那样，其他答案中的所有激进步骤对我来说都是不必要的。相反，我遇到了一个未正确标记的错误。我的建议是在做任何过于激烈的事情之前先阅读该消息！

错误说：

[![在此处输入图像描述](../Images/2c2a923656ae718dd665f7569ab566f6.png)](https://i.stack.imgur.com/H9vbh.png)

引用的文件是一个临时文件 - 在那里没有多大用处。**但是当我对有问题的视图模型vmPayConfirm**进行全局搜索时，我发现了这个：

[![在此处输入图像描述](../Images/8d27d6c85a6e2dbf8cc4168b62645a68.png)](https://i.stack.imgur.com/OUguw.png)

一旦我纠正了这个错误（我使用了错误的命名空间来引用视图模型），一切都运行良好！

# javascript - 输入的jQuery keyup值

> ID：11071394
> 
> 赞同：5
> 
> 时间：2012-06-17T12:47:08.560
> 
> 标签：javascript, jquery

我需要在标签中显示值，当标签`<input>`变为`<span>`空时，将跨度值更改为“视频标题”。但总是我输入一些东西`<input>`然后删除它，`<input>`仍然有“”值所以`<span>`什么都不显示。感谢帮助。（对不起我的英语不好）

这是我的代码：

```
$("#newVideoName").keyup(function(){
   var newVideoName = $("#newVideoName").val();
   if(newVideoName == ""){
       $("#newVideoNameLabel").html("Video title");
   }
});
<input type="text" id="newVideoName">
<span id="newVideoNameLabel"></span> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T12:54:26.630

```
$("#newVideoName").keyup(function() {
   $("#newVideoNameLabel").text(this.value ? this.value : "Video title");
}); 
```

[http://jsfiddle.net/gZPyQ/](http://jsfiddle.net/gZPyQ/)

# jquery - 查找与之相关的数据 用户选择的元素

> ID：11071396
> 
> 赞同：2
> 
> 时间：2012-06-17T12:47:31.533
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui-selectable

我正在使用带有剃刀视图的 MVC3。我给用户一个`<li>`s 列表以供选择：

```
 <ol id="selectable">
            @foreach (var ebat in Model.AvailableSizes)
            {
                <li class="ui-widget-content">@ebat.Item1 x @ebat.Item2</li>                    
            }
        </ol> 
```

其中 Model.AvailableSizes 是一个`List<Tuple<int,int>>`. 当用户选择其中之一时，我希望能够从 jQuery 中找到`Tuple<int,int>`用户想要使用的内容。

顺便说一句，我在这些列表中使用 jqueryui Selectable。

我想我可以使用 找到所选元素`$(".ui-selected:first")`，但是如何获取关联的模型数据，即`@ebat.Item1`and `@ebat.Item2`，以便我可以将它们作为参数发送到服务器？

我对我最初的方法很怀疑，我的意思是它不应该这么难。因此，如果您能向我展示在这种情况下一起使用模型、html 和 jquery 的更好方法，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:03:28.340

您可以为所选值添加隐藏字段并在选择事件上设置其值。

```
@Html.HiddenFor(m => m.SelectedSize) 
```

虽然，`Tuple<T1,T2>`没有无参数构造函数，因此模型绑定器无法创建实例。您可以为每个大小提供一个整数 ID，并在从 POST 请求中读取它。

您应该使用`Tuple<int,T1,T2>`您的 AvailableSizes 属性。此外，您必须将 ID 值保存为 li 元素上的自定义属性，以便您可以将其保存在隐藏字段中。

MVC 仍然无法在发布请求时读取 AvailableSizes 属性，因此您必须排除该属性并只读 SelectedSize 属性。

您的模型属性应如下所示：

```
public IEnumerable<Tuple<int,T1,T2>> AvailableSizes { get; set; }
public int SelectedSize { get; set; } 
```

您应该将尺寸 ID 保存为自定义属性：

```
<ol id="selectable">
    @foreach (var ebat in Model.AvailableSizes)
    {
        <li class="ui-widget-content" data-size-id="@ebat.Item1">@ebat.Item2 x @ebat.Item3</li>                    
    }
</ol> 
```

您应该为应该读取 data-size-id 属性并将其设置为 SelectedSize 隐藏字段的选择事件提供 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:21:55.273

将属性添加到 li 标签：

```
<li class="ui-widget-content" data="@ebat.Item1-@ebat.Item2">@ebat.Item1 x @ebat.Item2</li> 
```

试试下面的 jQuery 代码：

```
 var value = $(".ui-selected:first").attr("data");
    var items = value.split("-");
    var item1 = items[0];
    var item2 = items[1]; 
```

# jquery - chrome中的jquery流沙高度

> ID：11071399
> 
> 赞同：0
> 
> 时间：2012-06-17T12:48:53.747
> 
> 标签：jquery, google-chrome, quicksand

我尝试将 jquery quick sand 包含在我的投资组合中。我认为在 Firefox 中，头部 ul 的高度总是好的。Chrome浏览器无法计算头部高度，流沙效果差。任何人都可以帮助我吗？

演示：[http ://www.testowa.isterio.pl/test.html](http://www.testowa.isterio.pl/test.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:21:19.917

我不确定你的问题是否正确。

如果您在容器内使用图像，则应使用

```
$(window).ready(function () 
```

代替

```
$(function() { 
```

因为图像没有加载到 dom 中。

希望这可以帮助。

# javascript - 没有 Jade 的 ExpressJS - 将数据直接注入 HTML 文件

> ID：11071403
> 
> 赞同：1
> 
> 时间：2012-06-17T12:49:18.460
> 
> 标签：javascript, node.js, express

我使用 ExpressJS 和普通的 HTML 模板（没有 Jade 或类似的模板引擎）。由于我即将将 MongoDB 添加到我的应用程序中，因此我需要将数据注入到我的 HTML 文件中。我知道当我使用 Jade 或类似的模板引擎时没有问题。是否可以不使用 Jade 直接将其注入到我的 HTML 文件中？如果没有，是否可以使用 Jade 并仍然拥有我的 HTML 文件？

这是我的 app.js：

```
var express = require('express');
var server = express.createServer();

server.configure(function () {
  server.use('/bootstrap', express.static(__dirname + '/bootstrap'));
  server.use('/css', express.static(__dirname + '/css'));
  server.use('/js', express.static(__dirname + '/js'));
  server.use(express.static(__dirname + '/html'));
});
server.set('views', __dirname + '/html');
server.register('.html', require('handlebars'));
server.set('view options', { layout: false });
server.use(express.bodyParser());
server.use(express.cookieParser({ secret: "keyboard cat" }));
var memStore = require('connect').session.MemoryStore;
server.use(express.session({ secret: "keyboard cat", store: memStore( {
  reapInterval: 60000 * 10
})}));

server.listen(1337);
console.log('Express server started on port %s', server.address().port);

/** SESSIONS **/
function requiresLogin(req, res, next) {
  if (req.session.user) {
    next();
  }
  else {
    res.redirect('/login'); // TODO: process redirect
  }
}

var pseudoUsers = require('./users');

server.get('/login', function(req, res) {
  res.render('login.html');
});
server.post('/authenticated', function(req, res) {
  pseudoUsers.authenticate(req.body['emailInput'], req.body['passwordInput'], function(user) {
     if (user) {
       req.session.user = user;
       res.redirect('/dashboard');
     }
     else {
       res.redirect('/login?wrongCredentials=true');
     }
  });
});

/* ROUTERS ****************/
/**************************/
server.get('/home', function(req, res) {
  res.render('index.html');
});
[some more routes..] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T13:08:16.900

假设您需要注入动态数据（随时间变化并具有其他依赖项的数据，如用户名等），您将以一种或另一种方式使用模板。如果您不愿意使用任何预制模板引擎，那么您很可能最终会创建自己的模板引擎，这很可能不如大多数其他拥有数十亿页面浏览量的引擎。

您特别提到您不想使用 Jade。但是您的代码确实引入了车把，这是另一个模板引擎 ( [http://handlebarsjs.com/](http://handlebarsjs.com/) )，它基本上允许您使用`{{ somevarref }}`.

您也可以完全避免使用模板并使用代码动态创建所有 html，但这通常是使用任何模板引擎在幕后为您完成的，那么为什么要手动解决所有这些麻烦呢？

最后，您也可以生成您的 html 客户端，可能使用 DOM 操作来获得所有正确的部分，但根据您的问题，我猜这不适合您的用例，和/或可能有点超出目前的需要。

# javascript - 是否可以在 Flexslider (JQuery) 插件中使用 JWplayer？

> ID：11071404
> 
> 赞同：2
> 
> 时间：2012-06-17T12:49:37.600
> 
> 标签：javascript, jquery, jwplayer, flexslider

我正在设计一个网站，我有一个大横幅（用[flexslider 制作](http://www.woothemes.com/flexslider/)）滚动图像和电影（我想用[JWplayer](http://www.longtailvideo.com/players/jw-flv-player)流式传输）。

有没有人有在 flexslider 中使用 jwplayer 视频的经验？它确实在 flexsliders 的网站上说支持任何 html 元素，但我想从实际的用户体验中知道这是否可能（经过多次尝试，我还没有从 woothemes 得到答案）。

或者还有其他更好的解决方案可以在 flexslider 中嵌入电影吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T12:25:00.367

你试过了吗？还是您没有提到某种奇怪的限制？因为我下载了两者，将 JWplayer 包含到 flexslider 示例页面中，并用 div 替换了其中一个滑动图像，它工作正常。

下载两者，将它们解压到同一个文件夹中，在 demo.html 中，将其中一个 <li> 的内容替换为：

```
<script type="text/javascript" src="jwplayer.js"></script>
<div id="mediaplayer"></div> 
<script type="text/javascript">
    jwplayer("mediaplayer").setup({
        flashplayer: "player.swf",
        file: "video.mp4",
        image: "preview.jpg"
    });
</script> 
```

说真的，这再简单不过了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T10:22:12.923

这是 jwplayer 和 flexslider 一起工作的一个 hackish 示例 [http://jsfiddle.net/MCcy5/4/](http://jsfiddle.net/MCcy5/4/)

# java - set 和 get 方法与公共变量的优势

> ID：11071407
> 
> 赞同：68
> 
> 时间：2012-06-17T12:49:52.190
> 
> 标签：java, class, methods, private, public

> **可能重复：**
> [为什么要使用 getter 和 setter？](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

使方法访问类中的私有变量而不是使变量公开有什么好处？

例如，第二种情况是否比第一种更好？

```
//Case 1
public class Shoe{
    public int size;
}

//Case 2
public class Shoe{
    private int size;
    public int getSize(){
        return size;
    }

    public void setSize(int sz){
        size = sz;
    }

} 
```

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-06-17T12:52:08.817

我有一天在 SO 上看到的，作为答案（由 @ChssPly76 编写）为什么要使用 getter 和 setter

> 因为从现在起 2 周（月、年）后，当您意识到您的 setter 需要做的不仅仅是设置值时，您还将意识到该属性已直接在 238 个其他类中使用:-)

还有更多优点：

1.  getter 和 setter**可以**在其中进行验证，字段不能
2.  使用 getter 你**可以获得**想要的类的子类。
3.  getter 和 setter**是多态的**，字段不是
4.  **调试**可以简单得多，因为断点可以放置在一个方法中，而不是靠近该给定字段的许多引用。
5.  他们可以**隐藏实现更改**：

前：

```
private boolean alive = true;

public boolean isAlive() { return alive; }
public void setAlive(boolean alive) { this.alive = alive; } 
```

后：

```
private int hp; // change!

public boolean isAlive() { return hp > 0; } // old signature 
 //method looks the same, no change in client code
public void setAlive(boolean alive) { this.hp = alive ? 100 : 0; } 
```

**编辑**：使用 Eclipse 时的另一个新优势 - 您可以在字段上创建观察点，但如果您有设置器，您只需要一个断点，并且...**断点（例如在 setter 方法中）可以是有条件的，观察点（在字段上）不能**。因此，如果您只想停止调试器`x=10`，则只能在设置器中使用断点来执行此操作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-17T12:56:51.903

使用公共变量可能会导致为变量设置错误的值，因为**无法检查输入值**。

例如：

```
 public class A{

    public int x;   // Value can be directly assigned to x without checking.

   } 
```

使用 setter 可以通过**检查输入**来设置变量。保持实例变量私有，getter 和 setter 公开是一种**封装**形式， getter 和 setter 也兼容**Java Beans 标准**，

getter 和 setter 也有助于**实现多态性概念**

例如：

```
public class A{

     private int x;      //

      public void setX(int x){

       if (x>0){                     // Checking of Value
        this.x = x;
       }

       else{

           System.out.println("Input invalid");

         }
     }

      public int getX(){

          return this.x;
       } 
```

多态示例：**我们可以将子类型的对象引用变量作为参数从调用方法分配给被调用方法的超类参数的对象引用变量。**

```
public class Animal{

       public void setSound(Animal a) {

          if (a instanceof Dog) {         // Checking animal type

                System.out.println("Bark");

             }

         else if (a instanceof Cat) {     // Checking animal type

                 System.out.println("Meowww");

             }
         }
      } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-17T12:55:57.540

1.  一些库需要它来满足“Java Bean 标准”。
2.  setter/getter 可以在接口中，属性不能在接口中
3.  Setter/getter 可以很容易地在后代类中被覆盖。
4.  setter/getter 抽象出值是按需计算还是只是属性的访问器的信息

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-17T13:27:35.187

有点倒退的看待事物的方式。

在任何情况下，最好通过公开成员变量来公开类的内部工作，以便它的任何消费者都可以做设计者从未想到的事情，从而导致失败的盛宴和崩溃的聚宝盆？

某种答案本身真的不是吗？

OO的基石原则，封装。公共成员变量基本上是带有前缀的全局变量......

# javascript - 使用 jQuery 检索和修改 :before 元素

> ID：11071408
> 
> 赞同：4
> 
> 时间：2012-06-17T12:50:08.740
> 
> 标签：javascript, jquery, html, jquery-selectors

我想选择一个由 CSS 选择器创建的元素`:before`。

我尝试使用`$('#element:before')`，但这不起作用，因为它选择了整个元素而不仅仅是`:before`元素。

这是示例代码：[**DEMO**](http://jsfiddle.net/qGStB/)

在该示例中，只有字符串“1.”应该是红色的，而不是整个字符串。知道怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T13:06:07.453

JQuery 无法在 :before 内容上设置 css 属性，因为它不包含在元素中。如果您希望能够使用 javascript 操作 :before 内容的颜色，您可以创建一个额外的 css 类，并添加/删除该类。

[例子](http://jsfiddle.net/qGStB/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T12:55:40.480

您不能定位使用 css 创建的内容`:before`。但是，您可以定位数据元素并将其添加到 css 中的内容标记。请参阅此[问题](https://stackoverflow.com/questions/5041494/manipulating-css-before-and-after-pseudo-elements-using-jquery)的已接受答案。

如果您希望这是您的目标，也可以使用 css 进行样式设置：

```
div:before {
    content: '1\. ';
    color:red;
} 
```

只会使 1\. 变红。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-18T16:02:05.743

一种方法可以是`custom properties`，实际上是 css 变量。

[这里的兼容性](https://caniuse.com/css-variables)

[这里有一些文档](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties)

还有一个示例，其中变量`--myColor`具有全局范围，因为在下面声明`:root`：

```
setInterval(function() {  

  $(':root').css('--myColor', 'red');

}, 2000);
```

```
:root {

  --myColor: green;

  font-size: 30px;
  font-weight: bold;
}
div:before {
    content: '1\. ';
    color: var(--myColor);
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div>
  test
</div>
```

# c - 如果 accept() 系统调用返回错误应该怎么处理

> ID：11071409
> 
> 赞同：-4
> 
> 时间：2012-06-17T12:50:35.487
> 
> 标签：c

如果接受系统调用返回错误，预期的错误处理是什么？我们应该关闭套接字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:53:43.667

这取决于错误。成功时，`accept()`返回新连接的套接字（文件描述符）。如果失败，您不需要关闭尚未收到的套接字（像许多系统调用一样，`accept()`返回 -1 表示错误）。

但是，根据错误代码，您可能决定关闭侦听套接字。

# java - 在复合组件中迭代时公开列表项

> ID：11071413
> 
> 赞同：1
> 
> 时间：2012-06-17T12:51:44.770
> 
> 标签：java, jsf, facelets, composite-component, uirepeat

我正在迭代复合组件中的项目列表。我想公开列表中的每个项目，以便它们可以在此复合组件的子组件中使用，以创建一个模板来显示列表中的所有项目。

这是我的复合组件实现：

**customList.xhtml**

```
<ui:component
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:ui="http://java.sun.com/jsf/facelets">    

    <cc:interface>
    </cc:interface>

    <cc:implementation>       
        ...
        ...   
        <ui:repeat value="#{listRetriever.list}" var="item">
            <cc:insertChildren />
        </ui:repeat>

    </cc:implementation>
</ui:component> 
```

现在我想`#{item}`在我的页面中定义复合组件的子组件时使用（类似于`h:dataTable`or `ui:repeat`）。

```
 <my:customList>
        #{item}                <!--- over here--->
  </my:customList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:24:34.717

That won't work with `<cc:insertChildren>` inside `<ui:repeat>` as the `<cc:insertChildren>` is evaluated during view build time, not during view render time. The `#{item}` is only available during view render time as the `<ui:repeat>` runs during view render time only.

It'll work when you use JSTL `<c:forEach>` instead as it's also evaluated during view build time like the `<cc:insertChildren>` itself.

```
xmlns:c="http://java.sun.com/jsp/jstl/core"
...
<c:forEach items="#{listRetriever.list}" var="item">
    <cc:insertChildren />
</c:forEach> 
```

Be careful when you use the composite in turn inside another repeating JSF component, it wouldn't work then. See also [JSTL in JSF2 Facelets... makes sense?](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense).

An alternative, apart from creating a custom component which extends `UIData` or `UIRepeat`, is using `<ui:decorate>` instead.

First make `customList.xhtml` a normal template:

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
>
    ... 
    ...  
    <ui:repeat value="#{list}" var="item">
        <ui:insert name="item" />
    </ui:repeat>
    ...
    ...
</ui:composition> 
```

Then you can use it as follows:

```
<ui:decorate template="customList.xhtml">
    <ui:param name="list" value="#{bean.list}" />
    <ui:define name="item">
        #{item}
    </ui:define>
</ui:decorate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:58:38.767

这些天我试图做类似的事情，没有解决。

我的解决方案，我自己的组件上的 var 属性的值永远无法配置。所以保持固定在名称“var”下，并始终暴露给我的组件，我使用变量“var”。

小米代码示例：

**组件：** *文件：listadoPaginado.xhtml*

```
<composite:interface>
    <composite:attribute name="id" required="true" 
                         displayName="ID if component" 
                         shortDescription="ID of component" />
    <composite:attribute name="value" required="true" 
                         displayName="List with values to iterate"/>  
</composite:interface>

<!-- Implementacion de la estructura del componente -->
<composite:implementation>
    <h:panelGroup id="#{cc.attrs.id}_panel_comp">
        <br/>
        <div  style="#{cc.attrs.style}">

            <ui:repeat  var="var" value="#{cc.attrs.value.model}">
                <composite:insertChildren/>
            </ui:repeat>
        </div>
    </h:panelGroup>
</composite:implementation> 
```

**组件的使用：**

```
<gb:listadoPaginado id="listado_garantias"
                            value="#{beanTest.myList}">
 <p:panel>
     <p:panelGrid>
         <p:row>
              <p:column>
                   <h:outputLabel value="#{var.description}"/>
               </p:column>
               <p:column>
                    <p:inputText value="#{var.longDescription}"/>
                </p:column>
          </p:row>
       </p:panelGrid>
   </p:panel> 
```

# c++ - 边缘情况：当（仅）在专业化中反转模板参数的顺序时，是否可以达到非专业化版本？

> ID：11071415
> 
> 赞同：2
> 
> 时间：2012-06-17T12:51:54.213
> 
> 标签：c++, templates

我想问一个我理解的极端情况是非常糟糕的 C++ 编程形式，而且很可能永远不应该在实践中使用。但是，我想确保我完全理解模板语法。

我的问题简单地涉及模板专业化中模板参数的反转。这是最简洁地演示我的问题的示例代码：

```
#include <iostream>

template<typename T1, typename T2>
class A
{
public:
    int foo()
    {
        return 1;
    }
};

template<typename T1, typename T2>
class A<T2, T1> // <-- Arguments reversed in template specialization
{
public:
    int foo()
    {
        return 2;
    }
};

int main()
{
    A<int, int> a;
    std::cout << a.foo(); // Output is "2"; the specialized version is called.
    return 0;
} 
```

如上所述，当我运行该程序时，输出为“2”：模板类的专用版本由模板编译器实例化。

*考虑到这一点，我相信在任何情况下都不可能*编写模板类的*非*专业版本由模板编译器实例化的代码。因为模板编译器首先寻找匹配的特化，并且因为双参数特化总是匹配任何实例化类型的客户端代码（特别是，对应于特化模板定义中的语法），它因此，似乎在*任何*情况下都无法达到非专业版本。*`A<first_type, second_type>``first_type``T2``template<typename T1, typename T2>`*

 **我对么？如果没有，有人可以演示使用模板类 A 并能够实例化模板的非专业版本的客户端代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T13:33:31.897

我想你是对的。无法访问主模板。如果您在定义部分特化之前尝试实例化它，那么您的程序将是错误的；无需诊断。

最近有人考虑将部分特化标记为格式错误，如果它不比主模板更特化（通过部分排序规则）。虽然您的代码不会造成任何伤害，但人们提出了另一个测试用例，其中部分专业化并不比主模板更专业化：

```
template <int B, typename Type1, typename... Types>
struct A;

template<typename... Types>
struct A<0, Types...> { }; 
```

对于第一个参数，主模板不太专业，但对于以下参数，主模板更专业，反之亦然。通过不特化偏特化中的第一个参数而是保持它可变，您甚至可以使偏特化*不如*主模板特化，这有点奇怪，而且不是偏特化的目的。**

# gcc - 创建.so库致命错误...... .h没有这样的文件或目录

> ID：11071418
> 
> 赞同：2
> 
> 时间：2012-06-17T12:52:47.423
> 
> 标签：gcc, java-native-interface

```
comrade@hp:~/workspace/JNI2/src$ ls
Prompt.c  Prompt.class  Prompt.h  Prompt.java

comrade@hp:~/workspace/JNI2/src$ gcc --shared -o libPrompt.so -I/usr/lib/jvm/java-6-openjdk-i386/include -I/usr/lib/jvm/java-6-openjdk-i386/include/linux -lX11 Prompt.c /usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386/server/libjvm.so
Prompt.c:2:20: fatal error: Prompt.h: No such file or directory
compilation terminated.

Prompt.c :  
#include <jni.h>
#include <Prompt.h>
........ 
```

我不明白什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:57:34.913

如评论，更改为：

```
#include "Prompt.h" 
```

来自[#include 指令](http://gcc.gnu.org/onlinedocs/gcc-2.95.3/cpp_1.html#SEC6)：

```
#include <文件>
    此变体用于系统头文件。
    它在目录列表中搜索名为 file 的文件
    由您指定，然后在系统目录的标准列表中。
    您指定目录以搜索头文件
    命令选项“-I”（参见 1.9 节调用 C 预处理器）。
    选项 `-nostdinc' 禁止搜索标准系统
    目录；在这种情况下，仅搜索您指定的目录。

#include "文件"
    此变体用于您自己程序的头文件。
    它首先在当前目录中搜索一个名为 file 的文件，
    然后在用于系统头文件的相同目录中。
    当前目录是当前输入文件的目录。
    首先尝试它，因为它被假定为
    当前输入文件引用的文件。
    （如果使用了 `-I-' 选项，则特殊处理
     当前目录被禁止。）

```

# git - 删除所有内容并上传新版本

> ID：11071420
> 
> 赞同：12
> 
> 时间：2012-06-17T12:52:49.580
> 
> 标签：git, version-control

我们正在使用 git 进行版本控制，现在我们在尝试上传最新版本时收到很多警告。我是 git 新手，对限制没有耐心，有没有办法删除所有内容并上传当前版本？

这是我现在尝试上传时得到的。

```
$ git push origin master
Username for 'https://code.google.com':
Password for 'https://<removed>@code.google.com':
To https://code.google.com/p/<removed>/
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'https://code.google.com/p/<removed>/'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-17T13:03:11.283

1.) 删除存储库文件夹中的所有内容

2.）运行`git rm *`告诉git删除所有文件（检查`git status`是否还有未暂存的文件）

3.) 执行 a`git commit -a -m "commitmessage"`删除`git push origin master`远程 git 服务器上的所有文件

4.）检查您现在是否有一个空的远程存储库

5.) 将所有新文件复制到本地存储库文件夹

6.) 运行`git add *`告诉 git 添加所有新文件（检查`git status`是否还有未暂存的文件）

7.) 提交并推送新文件

现在您应该在远程 git 存储库中拥有该版本。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-17T15:18:42.353

您无法推送，因为远程上的提交未合并到您尝试推送的提交中。如果您想丢弃当前在遥控器中的所有更改，您可以执行类似的操作。

```
git fetch
git merge -s ours origin/master
git push origin master 
```

请注意，这会丢弃远程中引入的本地存储库中没有的更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-02T09:56:35.610

如果您想从远程存储库中永久删除文件，并且回想起来，就好像它们没有首先被推送以重新开始，那么基于[这个答案](https://stackoverflow.com/a/24526351/80434)，您可以执行以下操作

在本地运行以下命令（注意`*`删除每个文件夹/文件）：

```
git filter-branch -f --index-filter "git rm -rf --cached --ignore-unmatch *" -- --all 
```

现在是时候在本地更新 git 引用以强制它忘记这些文件的所有历史记录

```
rm -rf .git/refs/original/

git reflog expire --expire=now --all

git gc --prune=now

git gc --aggressive --prune=now 
```

现在使用 FORCE 将所有更改推送到远程存储库，以确保远程存储库也清除所有这些文件

```
git push --all --force 
```

这将清理远程存储库，就好像不存在任何文件一样。

# java - FlowLayout 不显示组件而 GridLayout 显示？

> ID：11071421
> 
> 赞同：3
> 
> 时间：2012-06-17T12:53:06.993
> 
> 标签：java, swing, layout-manager

我正在制作一个应用程序来充当某种中心，用户可以在其中存储他们喜欢的应用程序的快捷方式并轻松启动它们。不过，我遇到了一些问题`FlowLayout`。当我使用`GridLayout`时，组件显示完美。当我使用`FlowLayout`时，什么都没有显示。

网格布局： ![网格布局](../Images/0cd550860f570d7188ab18efbbc226e9.png)

流布局： ![流式布局](../Images/f09cfd1076f54b3b53835cece9faf6be.png)

我所改变的只是`LayoutManager`. 当我打电话时`getComponentCount`，他们都以 9 回应。

我觉得这篇文章很长，所以我把我的[代码](http://codetidy.com/2955/)片段放在 Code Tidy 上（来自 Pastebin）

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T13:01:47.237

1)`FlowLayout`相当接受`PreferredSize`来自`JComponent`, 每个都可以在屏幕上`JComponents`得到不同的`Dimension`

示例（取消注释`getMinimumSize`& `getMinimumSize`）

```
import java.awt.*;
import javax.swing.*;

public class CustomComponent extends JFrame {

    private static final long serialVersionUID = 1L;

    public CustomComponent() {
        setTitle("Custom Component Test / BorderLayout");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new FlowLayout());
    }

    public void display() {
        add(new CustomComponents0(), BorderLayout.NORTH);
        add(new CustomComponents0(), BorderLayout.CENTER);
        add(new CustomComponents0(), BorderLayout.SOUTH);
        add(new CustomComponents0(), BorderLayout.EAST);
        pack();
        // enforces the minimum size of both frame and component
        setMinimumSize(getMinimumSize());
        setPreferredSize(getPreferredSize());
        setVisible(true);
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                CustomComponent main = new CustomComponent();
                main.display();
            }
        };
        javax.swing.SwingUtilities.invokeLater(r);
    }
}

class CustomComponents0 extends JLabel {

    private static final long serialVersionUID = 1L;

    /*@Override
    public Dimension getMinimumSize() {
    return new Dimension(200, 100);
    }

    @Override
    public Dimension getPreferredSize() {
    return new Dimension(300, 200);
    }*/
    @Override
    public void paintComponent(Graphics g) {
        int margin = 10;
        Dimension dim = getSize();
        super.paintComponent(g);
        g.setColor(Color.red);
        g.fillRect(margin, margin, dim.width - margin * 2, dim.height - margin * 2);
    }
} 
```

2）`GridLayou`t为每个创建比例区域`JComponents`，然后只接受`JComponent`已经变大`Dimnesion`的来自`PreferredSize`

3）因为`GridLayout`我在谈论方法`pack()`，而不是如果存在`JFrame#setSize()`，因为`FLowLayout`没关系，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T13:44:17.497

嗯，我知道这已经得到解答，但只是补充一下，如果您查看下面的代码并运行它，它将创建 9 个标签和 4 个按钮并使用流布局添加它们，但与下面的这个示例一样，帧大小是设置使用`setSize(int width,int height)`

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class FlowLayoutTest extends JFrame {

    private JPanel NorthPanel, SouthPanel;
    private JLabel[] labels;
    private JButton[] buttons;

    public FlowLayoutTest() {
        createAndShowUI();
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                FlowLayoutTest flowLayoutTest = new FlowLayoutTest();
            }
        });
    }

    private void createAndShowUI() {
        setTitle("Flow layout");
        setSize(400, 300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        initializeComponents();
        addComponents(this.getContentPane());

        //pack();

        setVisible(true);
    }

    private void initializeComponents() {

        labels = new JLabel[9];
        for (int i = 0; i < labels.length; i++) {
            labels[i] = new JLabel("Label " + (i+1));
        }
        buttons = new JButton[4];
        for (int i = 0; i < buttons.length; i++) {
            buttons[i] = new JButton("Button " + (i+1));
        }

        NorthPanel = new JPanel(new FlowLayout(5));
        SouthPanel = new JPanel(new FlowLayout(5));
    }

    private void addComponents(Container contentPane) {

        for (int i = 0; i < buttons.length; i++) {
            SouthPanel.add(buttons[i]);
        }

        for (int i = 0; i < labels.length; i++) {
            NorthPanel.add(labels[i]);
        }

        contentPane.add(NorthPanel, BorderLayout.NORTH);
        contentPane.add(SouthPanel, BorderLayout.SOUTH);
    }
} 
```

但是，当您运行应用程序时，您会注意到一个标签（数字 9）已离开屏幕，这是因为`setSize()`已使用，但是如果我们`pack()`在将框架设置为可见之前调用（或在本例中取消注释），您将能够看到框架上的所有组件。

# meteor - 流星。找不到模块“请求”

> ID：11071425
> 
> 赞同：2
> 
> 时间：2012-06-17T12:53:33.130
> 
> 标签：meteor

当我尝试给出新命令时，我得到了错误。

```
[root@localhost ~]# meteor

node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
Error: Cannot find module 'request'
at Function._resolveFilename (module.js:332:11)
at Function._load (module.js:279:25)
at Module.require (module.js:354:17)
at require (module.js:370:17)
at Object.<anonymous> (/usr/lib/meteor/app/meteor/deploy.js:9:15)
at Module._compile (module.js:441:26)
at Object..js (module.js:459:10)
at Module.load (module.js:348:32)
at Function._load (module.js:308:12)
at Module.require (module.js:354:17) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:50:22.527

这是因为缺少 node_modules 或 NODE_PATH 设置不正确。

尝试重新安装或调试它，或者如果正常方法不适合您，请尝试从 git clone 创建 dev_bundle ......

# ruby - 运行 Ruby 脚本而不直接调用它

> ID：11071427
> 
> 赞同：1
> 
> 时间：2012-06-17T12:53:37.253
> 
> 标签：ruby, bash

我正在寻找解决方案如何在不直接调用它的情况下运行 Ruby 脚本

```
ruby /path/to/file.rb 
```

到目前为止，我一直在使用别名`.bashrc`来创建快捷方式，例如

```
alias myscript='ruby /path/to/file.rb' 
```

但是现在，我需要创建一个我想在不同计算机上使用的 gem，而我目前的方法不适合这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:59:12.377

您可以执行以下操作：

1.  创建一个 shell 脚本，它像您的别名一样调用 Ruby 脚本：

    ```
    ruby /path/to/file.rb 
    ```

2.  设置指向 /usr/bin/ 路径的软链接，以便在 shell 中使用`somecommand`：

    ```
    ln -s /full/path/to/the/previously/created/shellscript /usr/bin/somecommand 
    ```

3.  如果你想走得更远，你可以创建一个自动执行软链接的 shell 脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T23:33:23.093

在脚本的开头添加一个 shebang

```
#!/usr/bin/env ruby 
```

（检查shebang是#！）然后使您的脚本可执行

```
chmod +x file.rb 
```

现在您可以将文件作为“独立”可执行文件运行

```
# For example
$ ./file.rb 
```

（“独立”，因为 ruby​​ 解释器仍然需要安装在路径中的某个位置。）

# bash - Bash 查找，排除父级？

> ID：11071442
> 
> 赞同：13
> 
> 时间：2012-06-17T12:56:06.000
> 
> 标签：bash, find, dotfiles

我有一个文件夹，里面有一些我想为其制作符号链接的点文件。我看不到一个简单的方法来做到这一点。

`ls -a ~/dotfiles`将包括点文件，但也`.`和`..`

`find ~/dotfiles -maxdepth 1`将包括点文件，但也`~/dotfiles`

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-17T13:31:44.410

根据[MvanGeest 的](/users/347934)评论，这似乎可行。

```
find ~/dotfiles -maxdepth 1 -mindepth 1 
```

这看起来也可以完成这项工作

```
ls -A ~/dotfiles 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T13:29:46.827

看起来您正在尝试查找点文件，即。以“.”开头的文件 并且有第二个字符不是“.”。这应该做的工作：

```
find . -name '.[^.]*' 
```

将所有找到的文件链接到 /path/to/dir：

```
find $PWD -name '.[^.]*' -exec ln -s '{}' /path/to/dir \; 
```

请注意，“$PWD”会生成一个绝对路径，因为指向相对路径的符号链接很可能会指向必杀技......

# ruby-on-rails - Ruby on Rails 应用程序中的 Favicon

> ID：11071445
> 
> 赞同：10
> 
> 时间：2012-06-17T12:56:16.203
> 
> 标签：ruby-on-rails, favicon

我放入`favicon.ico`文件`/public/`夹并将以下代码包含到布局页面中

```
<%= favicon_link_tag %> 
```

但是尽管如此，该图标仍不显示。我应该怎么办？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-17T14:56:24.550

我也遇到过同样的问题。这对我有用：

```
<%= favicon_link_tag 'favicon.ico' %> 
```

并移动`favicon.ico`到 /public/images 目录。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T13:34:03.573

我不知道`favicon_link_tag`您的应用程序中有什么，但总的来说，有两种方法可以创建网站图标。

1.  将您的图标文件放在您的*应用根目录*( `/public`) 中。在这种情况下，您不必在代码中执行任何操作。（不适用于 seamonkey，适用于我知道的所有其他浏览器）
2.  `link`在主视图的代码中放置一个元素：

    ```
     <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="/relative/path/to/file.ico" /> 
    ```

# javascript - 为什么以下 javascript 代码不起作用？（使用Crafty.js）

> ID：11071448
> 
> 赞同：1
> 
> 时间：2012-06-17T12:56:52.270
> 
> 标签：javascript

我是一个新手，在狡猾和 js 方面，如果我可能在以下程序中犯了非常愚蠢的错误，请原谅我。以下代码有什么问题？以下代码应该创建 5*5 矩阵，其中每个块将是存储在 iceblock.jpg 中的 60 像素高和宽的冰块。

```
window.onload=function()
{
    Crafty.init(500,500);
    Crafty.canvas();
    Crafty.sprite(60,"iceblock.jpg",{block : [0,0]});
    Crafty.c("iceblock",function(){
        init: function(){
            this.addComponent("2D, Canvas, Mouse, block");
            this.w = 60;
            this.h = 60;
        }
    });

};
for(var i=0;i<5;i++)
    {
        for(var j=0;j<5;j++)
        {
            Crafty.e("iceblock").attr({x: i*60,y: j*60})
        }
    } 
```

对应的 HTML 代码是：-

```
<!DOCTYPE html>
<head>
    <script type="text/javascript" src="crafty.js"></script>
    <script type="text/javascript" src="assignment.js"></script>
    <title>My Crafty Game</title>

</head>
<body>
</body>
</html> 
```

当我打开 HTML 页面时，完整的输出页面是空白的。这是图片的链接。 [http://postimage.org/image/ivqfhmjt9/](http://postimage.org/image/ivqfhmjt9/)

PS：- 有没有一种不那么烦人的方式来缩进我们的代码，而不是在每行前面放置 4 个空格？非常耗时且乏味。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T13:37:24.800

如需参考，请参阅此线程[https://groups.google.com/forum/?fromgroups#!topic/craftyjs/OkG5rFb3tqo](https://groups.google.com/forum/?fromgroups#!topic/craftyjs/OkG5rFb3tqo)

或者这里的代码[http://jsfiddle.net/cYxeZ/](http://jsfiddle.net/cYxeZ/)

# file - 如何使用元数据创建文件格式

> ID：11071451
> 
> 赞同：0
> 
> 时间：2012-06-17T12:57:39.613
> 
> 标签：file, audio, format

我正在尝试为音乐制作一种新的文件格式。它需要是一个实际存储多个音频文件的文件，例如 zip 文件。我正在寻找一种将 zip 文件转换为这种新文件格式的方法。但是，我仍然想在这些新文件中使用 id3 标签。我想知道如何制作这种新的文件格式，它是一个包含多个音频文件的文件，但仍然包含该文件的整体 id3 标签，以便我可以将其加载到我的移动应用程序中。任何帮助/建议将不胜感激。干杯，AJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:37:22.590

创建自己的新文件格式的问题在于只有您可以使用它。除非您说服许多其他人这是一种有用的新格式，否则没有其他人将拥有能够对您创建的文件执行任何操作的工具。

为了使现有的音乐播放器程序能够处理新的文件格式，您必须以该播放器的插件样式为您的文件格式编写一个 CODEC。可能不止一个插件，因为您的文件格式既是音乐容器又是目录。

创建新文件格式的一种替代方法是将您拥有的 MP3 文件放入一个新的 MP3 文件中，每个旧文件在新文件中都有一个新的 TRACK。确保将每个新曲目的开始时间设置在所有先前曲目播放时长的总和之后，以免它们相互踩踏。将每个文件的元数据合并到新文件的元数据中。这可能适用于具有大量通用元数据的集合（如同一位艺术家），但如果元数据非常多样化，则可能效果不佳。

另一种选择是将它们转换为 CDA 格式，然后放入音频 CD 映像文件，就像您将它们刻录到 CD 一样。

第三种选择是将文件放入 SQLite 数据库文件中。每个 MP3 文件中的元数据都会填写记录，您可以选择将 MP3 文件保留在外部并仅链接到它，或者也将 MP3 文件的 blob 存储在数据库中。如果您确实存储了 blob，则 SQLite 数据库文件是一个包含您放入其中的所有内容的文件。

-杰西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:08:28.413

不要创建新格式，除非您真的有充分的理由这样做。

它听起来像[Matroska](http://en.wikipedia.org/wiki/Matroska)可以做任何你需要的事情。但与您自己的格式相比，您和其他开发人员将拥有一堆现成的工具来处理该格式。这包括编辑、玩家……此外，您可以将最初的工程错误留给其他人。

如果您真的想创建自己的格式：要么将支持 id3 标签的音频文件放入 zip 文件，要么在 zip 文件中创建一个元文件（例如 XML 格式），其中包含元信息你想被包括在内。

# magento - magento - 与集合的区别

> ID：11071452
> 
> 赞同：2
> 
> 时间：2012-06-17T12:57:59.637
> 
> 标签：magento

我开始对 magento 有了一点经验，但收藏品出现了一些不一致的地方。

1.  一些集合使用 addAttributeToSelect 和 addAttributeToFilter，而其他集合使用 addFilter 和 addSelect。

为什么会这样？你如何直接分辨出哪个集合使用哪个？

1.  你到底是怎么加入收藏的。我已经尝试了每一个从不工作的例子。具体来说，我想加入运输、发票和订单收集

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:40:44.443

1.  据我所知，Magneto 中没有 addFilter 和 addSelect 函数。您可能指的是`addFieldToFilter`和之间的差异`addAttributeToFilter`。

    这两者之间的区别在于 Magento 中有一种特定的数据类型，称为`EAV`. 您可以在其他任何地方阅读有关它的更多信息。产品及其属性、客户和销售都`EAV`在 Magneto 中。下面的快速背景`EAV`是数据保存在不同的表中，这就是过滤集合的函数完全不同的原因。

2.  这给我们带来了你的第二个问题。由于 Magento 中没有产品、客户或订单的单一表，因此您不能`join`对其应用普通 SQL。但是，您不太可能经常需要它。对于所有其他非`EAV`情况，您可以使用以下语法：

    ```
    $collection = Mage::getModel('group/model')->getCollection();
    $collection->getSelect()->join(array(
        'your_alias' => Mage::getSingleton('core/resource')->getTableName('group2/model2')),
        'main_table.your_id = your_alias.your_id',
        array()); 
    ```

如果我能说得更清楚，请告诉我。

# wordpress - 我需要将 Magazine Basic Wordpress 放在我的页面上

> ID：11071453
> 
> 赞同：0
> 
> 时间：2012-06-17T12:58:06.890
> 
> 标签：wordpress, themes, center

我刚刚安装了 WP Magazine Basic。整个主题是左对齐的。我已经通过编辑器整个已经试图将其居中。该网站是[http://www.sportsjabber.net](http://www.sportsjabber.net)

如此简单的事情让我发疯。如果我能把这该死的东西放在中心，我就能把剩下的都弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:02:58.447

像这样更改您的CSS：

```
body {
margin: 0 auto !important;
} 
```

在 style.css 第 33 行

那可行。干杯！！！

# regex - NSPredicate 字符串匹配单词的开头

> ID：11071455
> 
> 赞同：8
> 
> 时间：2012-06-17T12:58:23.217
> 
> 标签：regex, core-data, nspredicate, foundation

*这必须是重复的。但是有这么多 NSPredicate 问题，我找不到合适的。*

我有一个包含`compositeName`字段的核心数据对象列表。像“艾米莉布朗特”这样的名字可能在那里。我想使用一个搜索列表，`NSPredicate`它可以让我搜索“Em”，也可以搜索“Bl”，然后让这个名字出现在获取的结果中。

这一定非常容易，但正如你猜想的那样，我没有看到它。我对带有正则表达式的 NSPredicate 的功能失调尝试如下所示：

```
[NSPredicate predicateWithFormat:@"compositeName MATCHES[cd] '.*(?<=^|\\s)%@.*'", query]; 
```

我对这个正则表达式的想法是：

*   之前的任意数量的字符
*   负后视空格或开头
*   查询
*   之后的任意数量的字符

但它不起作用。我没有得到任何结果。我该如何解决？

PS 如果有一个没有正则表达式的 NSPredicate 解决方案也适合我的目的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-17T15:29:47.370

您需要在谓词字符串之外构建整个正则表达式模式字符串，然后将其传递给谓词。

此外，还有一个正则表达式构造`\b`来匹配单词边界，这就是您所追求的。

所以总的来说，这个片段应该为你的问题提供一个简单的解决方案：

```
NSString *searchString = @"Em";
NSString *regexString  = [NSString stringWithFormat:@".*\\b%@.*", searchString];

NSPredicate *pred = [NSPredicate predicateWithFormat:@"self.compositeName matches[cd] %@", regexString]; 
```

如果输入搜索文本尚未被清理，您可能希望在将其传递给正则表达式引擎之前执行此操作。

另一个改进可能是在单词边界处接受 unicode 字符，以允许人们搜索“Ántonio”、“Über”和其他类似的字符串。

以下代码行将创建一个处理这两个方面的正则表达式模式：

```
NSString *orgSearchString = @"^";

NSString *escapedSearchString = [NSRegularExpression escapedPatternForString: orgSearchString];

NSString *regexString  = [NSString stringWithFormat:@"(?w:).*\\b%@.*", escapedSearchString]; 
```

# c# - 发布网站项目，数据库日期格式会一样还是转换为默认主机日期格式？

> ID：11071456
> 
> 赞同：0
> 
> 时间：2012-06-17T12:58:27.210
> 
> 标签：c#, asp.net

我正在开发一个 Web 应用程序，并且正在使用 gridview 和 sqldatasource。

```
I have some columns with type : Date. 
```

在我的控制面板中，我设置了我所在国家/地区的日期格式：`dd.mm.yyyy`

*   在这种情况下，c# 中数据库的表数据将具有日期格式：`dd.mm.yyyy`

我计划在完成项目后在主机上发布我的网站。

*   但我的问题是：

如果在我的数据库中日期列的格式为 dd.mm.yyyy，如果我发布数据库并将其与主机上的网站一起使用，则日期将为 dd.mm.yyyy 或转换为主机的默认格式?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:50:26.290

存储在数据库中的日期没有特定的格式。您在控制面板中选择以 format 显示它们`dd.mm.yyyy`，但这并不会改变数据库中实际存储的内容。它们类似于`DateTime`对象，表示日期，而不是通过某种格式表示日期的字符串。日期如何转换为字符串取决于将其转换为字符串时使用的文化设置，在大多数情况下（例如[`DateTime.ToShortDateString()`](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)）应该是当前文化。如果您的代码明确表示要使用 format `dd.mm.yyyy`，则需要更改。

所以是的，它应该以主机的默认格式显示。

（旁注：在 .NET 日期到字符串的格式中，`MM`是月，`mm`是分钟。在这种情况下，您不需要处理这个问题，但请注意在任何时候都使用正确的。）

# silverlight - 无法加载 uri 的内容

> ID：11071461
> 
> 赞同：0
> 
> 时间：2012-06-17T12:59:47.123
> 
> 标签：silverlight, navigation, uri

我尝试在 student.xaml 页面上的 mainpage.xaml 中添加一个超链接。student/xaml 页面位于 view/student/ 因为 About 页面正在工作，而 Student 页面不想

超链接按钮的代码：

```
<HyperlinkButton x:Name="Link2" Style="{StaticResource LinkStyle}" 
                                     NavigateUri="/About" TargetName="ContentFrame" Content="{Binding Path=Strings.AboutPageTitle, Source={StaticResource ApplicationResources}}"/>
            <Rectangle x:Name="Divider2" Style="{StaticResource DividerStyle}"/>

            <HyperlinkButton x:Name="Link3" Style="{StaticResource LinkStyle}" 
                                     NavigateUri="Views/Student" TargetName="ContentFrame" Content="{Binding Path=Strings.StudentPageTitle, Source={StaticResource ApplicationResources}}"/> 
```

uri映射代码：

```
<navigation:Frame x:Name="ContentFrame" Style="{StaticResource ContentFrameStyle}" 
                              Source="/Home" Navigated="ContentFrame_Navigated" NavigationFailed="ContentFrame_NavigationFailed">
                <navigation:Frame.UriMapper>
                  <uriMapper:UriMapper>
                    <uriMapper:UriMapping Uri="" MappedUri="/Views/Home.xaml"/>
                        <uriMapper:UriMapping Uri="/{pageName}" MappedUri="/Views/{pageName}.xaml"/>
                        <uriMapper:UriMapping Uri="/Student/{pageName}" MappedUri="/Views/Student/{pageName}.xaml"/>
                    </uriMapper:UriMapper>
                </navigation:Frame.UriMapper>
            </navigation:Frame> 
```

和

```
private void ContentFrame_Navigated(object sender, NavigationEventArgs e)
{
    foreach (UIElement child in LinksStackPanel.Children)
    {
        HyperlinkButton hb = child as HyperlinkButton;
        if (hb != null && hb.NavigateUri != null)
        {
            if (hb.NavigateUri.ToString().Equals(e.Uri.ToString()))
            {
                VisualStateManager.GoToState(hb, "ActiveLink", true);
            }
            else
            {
                VisualStateManager.GoToState(hb, "InactiveLink", true);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:39:05.120

It seems like you've forgotten a "/" in your "Link3"-Hyperlink. You should replace NavigateUri="Views/Student" with NavigateUri="/Views/Student"

**BUT:** All in all your UriMapping looks a bit strange to me. If you click on your About-Hyperlink it will use the mapping Uri="/{pageName}" and navigate to "/Views/About.xaml"

--> If you want to Navigate to your Students.xaml you should use **NavigateUri="/Student"** only which will end up navigating to "/Views/Student.xaml"

Hope that helps ;)

# css - CSS改变背景颜色网站

> ID：11071463
> 
> 赞同：1
> 
> 时间：2012-06-17T12:59:54.320
> 
> 标签：css, colors, background

我一直在看一个教程，它告诉我使用以下方法更改网页的背景颜色：

```
body {background-color:red;} 
```

但是，当我尝试在谷歌浏览器中加载页面时，背景仍然是白色的？

这是我的完整代码：

```
<!doctype html>
<html>              <!--Document START-->
    <head>              <!--Head START-->
        <title>Page Title</title>   
        <style type="text/css">                 <!--CSS START-->            
            body {  background-color:red }
        </style>
    </head>
    <body>                          <!--Body START-->
        <h1>Page Title</h1>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T13:06:16.733

问题是您的 css 中有一个 html 注释。

```
<style type="text/css">                 <!--CSS START--> 
```

删除`<!--CSS START-->`它，它会正常工作。

如果您想在 css 中添加注释，那么您可以使用`/* */`，例如：

```
<style type="text/css">
/* CSS START */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:01:28.420

应该：

```
body {  background-color:red; } 
```

（你忘了 ; 在“红色”之后）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T13:06:48.870

这对你有用。

```
 body {
          background:red;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T13:09:30.447

啊，是的，问题是你在css中有一个html注释，所以它在之后不起作用：-</p>

# java - java：如果使用复制构造函数而不是克隆有什么不同吗？

> ID：11071470
> 
> 赞同：0
> 
> 时间：2012-06-17T13:01:45.737
> 
> 标签：java, constructor, clone

> **可能重复：**
> [Clone() 与 Copy 构造函数——在 java 中推荐](https://stackoverflow.com/questions/2427883/clone-vs-copy-constructor-which-is-recommended-in-java)

`useClone`在下面的示例中，由和创建的对象之间有什么区别`copyConstrutor`吗？

```
class A  implements Cloneable{
    int data = 9;
    public A useClone() throws CloneNotSupportedException  {
        return (A)super.clone();
    }
    public A copyConstrutor() {
        A o =  new A();
        o.data = this.data;
        return o;
    }
} 
```

# javascript - JavaScript 如何保存到本地文件？

> ID：11071473
> 
> 赞同：22
> 
> 时间：2012-06-17T13:02:09.270
> 
> 标签：javascript, jquery, json, jsonp

已经有在线写入文件 JSON 的解决方案，但我想在本地保存 json 文件。我试过使用这个例子[http://jsfiddle.net/RZBbY/10/](http://jsfiddle.net/RZBbY/10/) 它创建一个链接来下载文件，使用这个调用 `a.attr('href', 'data:application/x-json;base64,' + btoa(t.val())).show();` 有没有办法在本地保存文件而不是提供可下载的链接？还有其他类型的转换`data:application/x-json;base64`吗？

这是我的代码：

```
<!DOCTYPE html>
<head> 
    <meta charset="utf-8">
    <title>jQuery UI Sortable - Default functionality</title>

    <link rel="stylesheet" href="http://jqueryui.com/themes/base/jquery.ui.all.css">
    <script src="http://jqueryui.com//jquery-1.7.2.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.core.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.widget.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.mouse.js"></script>
    <script src="http://jqueryui.com/ui/jquery.ui.sortable.js"></script>
        <script src="http://jqueryui.com/ui/jquery.ui.accordion.js"></script>
    <link rel="stylesheet" href="http://jqueryui.com/demos/demos.css">        
    <meta charset="utf-8">
    <style>a { font: 12px Arial; color: #ac9095; }</style>
<script type='text/javascript'>
$(document).ready(function() {
var f = $('form'), a = $('a'),
    i = $('input'), t = $('textarea');

$('#salva').click(function() {
    var o = {}, v = t.val();

    a.hide();//nasconde il contenuto
    i.each(function() { 
    o[this.name] = $(this).val(); });
    if (v === '') {
        t.val("[\n " + JSON.stringify(o) + " \n]")         
    }
    else {
        t.val(v.substr(0, v.length - 3));
        t.val(t.val() + ",\n " + JSON.stringify(o) +  " \n]")  
    }
});
});

$('#esporta').bind('click', function() {
    a.attr('href', 'data:application/x-json;base64,' + btoa(t.val())).show();

});
</script>
</head>
<body>
    <form>
        <label>Nome</label> <input type="text" name="nome"><br />
        <label>Cognome</label> <input type="text" name="cognome">
        <button type="button" id="salva">Salva</button>
    </form>        

    <textarea rows="10" cols="60"></textarea><br />
    <button type="button" id="esporta">Esporta dati</button>
    <a href="" style="display: none">Scarica Dati</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2019-06-16T06:52:27.783

基于[http://html5-demos.appspot.com/static/a.download.html](http://html5-demos.appspot.com/static/a.download.html)：

```
var fileContent = "My epic novel that I don't want to lose.";
var bb = new Blob([fileContent ], { type: 'text/plain' });
var a = document.createElement('a');
a.download = 'download.txt';
a.href = window.URL.createObjectURL(bb);
a.click(); 
```

修改了原小提琴：http: [//jsfiddle.net/9av2mfjx/](http://jsfiddle.net/9av2mfjx/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-17T13:24:28.223

您应该检查`download`属性和`window.URL`方法，因为该`download`属性似乎不喜欢数据 URI。谷歌的这个[例子](http://html5-demos.appspot.com/static/a.download.html)几乎就是你想要做的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-17T13:07:01.570

在不涉及本地客户端（浏览器机器）的情况下，不可能在本地保存文件，因为我可能对客户端机器构成很大威胁。您可以使用链接下载该文件。如果你想在本地机器上存储类似 Json 数据的东西，**你可以使用浏览器提供的 LocalStorage**，[Web Storage](http://www.w3schools.com/HTML/html5_webstorage.asp)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-17T13:15:38.943

这完全取决于您要通过“本地保存”实现的目标。您要允许用户下载文件吗？然后[`<a download>`](http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download)是要走的路。您想将其保存在本地，以便恢复您的应用程序状态吗？然后您可能想查看[WebStorage](http://www.html5rocks.com/en/features/storage)的各种选项。特别[是 localStorage](http://hacks.mozilla.org/2009/06/localstorage/)或[IndexedDB](https://developer.mozilla.org/en/IndexedDB)。[FilesystemAPI](https://developer.mozilla.org/en/DOM/File_API/File_System_API)允许您创建可以存储任意数据的本地虚拟文件系统。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-17T13:10:36.540

所以，你*真正的*问题是：“JavaScript 如何保存到本地文件？”

看看[http://www.tiddlywiki.com/](http://www.tiddlywiki.com/)

在您在内部“更改”后，他们将其 HTML 页面保存在本地。

[更新 2016.01.31]

TiddlyWiki 原版直接保存。它非常好，并保存到一个可配置的备份目录中，时间戳作为备份文件名的一部分。

TiddlyWiki 当前版本只是将其作为任何文件下载进行下载。您需要自己进行备份管理。:(

[更新结束

诀窍是，您必须以 file:// 而不是 http:// 打开页面才能在本地保存。

浏览器的安全性不会让您保存到_someone_else_的_本地系统，只能保存到您自己的系统，即使这样也不是微不足道的。

-杰西

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-05T20:52:13.103

虽然大多数人鄙视 Flash，但它是在您的 html/javascript 环境中提供“保存”和“另存为”功能的可行选择。

我创建了一个名为“OpenSave”的小部件，它在此处提供了此功能：

[http://www.gieson.com/Library/projects/utilities/opensave/](http://www.gieson.com/Library/projects/utilities/opensave/)

-麦克风

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-12-09T13:15:15.330

在 Javascript 中创建和保存文件的可能方法是：

使用名为 FileSaver 的库

```
saveAs(new File(["CONTENT"], "demo.txt", {type: "text/plain;charset=utf-8"})); 
```

创建一个 blob 对象并提供“另存为”。

```
var a = document.createElement("a");
a.href = window.URL.createObjectURL(new Blob(["CONTENT"], {type: "text/plain"}));
a.download = "demo.txt";
a.click(); 
```

上传数据，保存在服务器上。

```
var data = new FormData();
data.append("upfile", new Blob(["CONTENT"], {type: "text/plain"}));
fetch("SERVER.SCRIPT", { method: "POST", body: data }); 
```

创建一个可写的文件流。

```
const fileHandle = await window.showSaveFilePicker();
const fileStream = await fileHandle.createWritable();
await fileStream.write(new Blob(["CONTENT"], {type: "text/plain"}));
await fileStream.close(); 
```

在 NodeJS 中，只需使用文件系统模块

```
 require("fs").writeFile("demo.txt", "Foo bar!"); 
```

* * *

```
<!-- (A) LOAD FILE SAVER -->
<!-- https://cdnjs.com/libraries/FileSaver.js -->
<!-- https://github.com/eligrey/FileSaver.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

<script>
// (B) "SAVE AS"
var myFile = new File(["CONTENT"], "demo.txt", {type: "text/plain;charset=utf-8"});
saveAs(myFile);
</script> 
```

* * *

```
// (A) CREATE BLOB OBJECT
var myBlob = new Blob(["CONTENT"], {type: "text/plain"});

// (B) CREATE DOWNLOAD LINK
var url = window.URL.createObjectURL(myBlob);
var anchor = document.createElement("a");
anchor.href = url;
anchor.download = "demo.txt";

// (C) "FORCE DOWNLOAD"
// NOTE: MAY NOT ALWAYS WORK DUE TO BROWSER SECURITY
// BETTER TO LET USERS CLICK ON THEIR OWN
anchor.click();
window.URL.revokeObjectURL(url);
document.removeChild(anchor); 
```

* * *

```
 <script>
    function blobajax () {
      // (A) CREATE BLOB OBJECT
      var myBlob = new Blob(["CONTENT"], {type: "text/plain"});

      // (B) FORM DATA
      var data = new FormData();
      data.append("upfile", myBlob);

      // (C) AJAX UPLOAD TO SERVER
      fetch("3b-upload.php", {
        method: "POST",
        body: data
      })
      .then((res) => { return res.text(); })
      .then((txt) => { console.log(txt); });
    }
    </script>
    <input type="button" value="Go" onclick="blobajax()"/> 
```

* * *

```
 <script>
    async function saveFile() {
      // (A) CREATE BLOB OBJECT
      var myBlob = new Blob(["CONTENT"], {type: "text/plain"});

      // (B) FILE HANDLER & FILE STREAM
      const fileHandle = await window.showSaveFilePicker({
        types: [{
          description: "Text file",
          accept: {"text/plain": [".txt"]}
        }]
      });
      const fileStream = await fileHandle.createWritable();

      // (C) WRITE FILE
      await fileStream.write(myBlob);
      await fileStream.close();
    }
    </script>

    <input type="button" value="Save File" onclick="saveFile()"/> 
```

* * *

```
// (A) LOAD FILE SYSTEM MODULE
// https://nodejs.org/api/fs.html
const fs = require("fs");

// (B) WRITE TO FILE
fs.writeFile("demo.txt", "CONTENT", "utf8", (error, data) => {
  console.log("Write complete");
  console.log(error);
  console.log(data);
});

/* (C) READ FROM FILE
fs.readFile("demo.txt", "utf8", (error, data) => {
  console.log("Read complete");
  console.log(error);
  console.log(data);
});
*/ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-18T00:46:43.893

如果您使用的是 FireFox，您可以使用 File HandleAPI

[https://developer.mozilla.org/en-US/docs/Web/API/File_Handle_API](https://developer.mozilla.org/en-US/docs/Web/API/File_Handle_API)

我刚刚测试了它并且它有效！

# php - Mysqli conn 包含文件 - 全局变量 PHP

> ID：11071475
> 
> 赞同：0
> 
> 时间：2012-06-17T13:03:15.597
> 
> 标签：php, global-variables, class-constructors

我在 PHP 类的构造函数中包含 MySQLi 连接文件。由于我需要在此类中的方法中访问连接变量，因此我需要将变量设为全局变量。我总是听说全局变量不好。所以我想知道，这是处理这个问题的唯一/最好的方法吗？

```
class CheckUser {

  function __construct() {
     require_once('mysqli.php');
  }

  function checkEmail($email) {
     // sql code here
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:16:02.533

那只是一个模因。（并且依赖注入即将到来......）

您的连接句柄是一个中心资源。就这样使用它。全局变量非常好，并且是预期的语言结构。只要您只有*一个*数据库/连接，它就有意义。

如果全局变量不好，我们就不会有`$_GET`and `$_POST`（它们是*实际*的全局变量）。

如果您的班级（在这里猜测）是数据库查询的中央访问点，那么将句柄作为简单属性同样令人愉快。

```
 function __construct() {
     require_once('mysqli.php');
     $this->db = $db;
  } 
```

或者`mysqli.php`脚本创建的任何局部变量。

# php - OAuth2.0 Server stack如何使用状态来防止CSRF？对于draft2.0 v20

> ID：11071482
> 
> 赞同：13
> 
> 时间：2012-06-17T13:04:34.230
> 
> 标签：php, oauth, oauth-2.0, oauth-provider

我正在[为 OAuth2.0 v20 使用 PHP 库](https://github.com/quizlet/oauth2-php#readme)

在草案 20 中，[提到了使用状态来防止 CSRF](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-20#section-10.12)

到目前为止，我自己的实现这个 PHP 库的 Web 应用程序允许以下内容：

1.  [3 使用授权码请求的有脚身份验证](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-20#section-4.1)
2.  [2 使用 Resource Owner Credentials Grant 的有脚身份验证](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-20#section-4.3)
3.  [刷新访问令牌的请求](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-20#section-6)

我是否需要对上述所有 3 种情况都使用状态？

如果是这样，什么是“状态”的好例子？

什么是好的“状态”？

有理想的长度吗？有最小长度吗？有最大长度吗？

有什么理想的妆容吗？字母数字包括大写？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-05-13T19:58:10.787

逐步了解示例 CSRF 漏洞利用可能会有所帮助，以了解状态参数如何减轻此类攻击。在这个例子中， **Mallory**是*攻击者*，**Alice**是*受害者*。

# 攻击

1.  Mallory 访问某个**客户的**网站并开始授权该客户使用 OAuth访问某个**服务提供商的过程**

2.  客户请求服务提供商代表 Mallory 请求访问权限，该权限被授予

3.  Mallory 被重定向到服务提供商的网站，她通常会在其中输入她的用户名/密码以授权访问

4.  相反，Mallory 会捕获/阻止此请求并保存其 URL

5.  现在，Mallory 以某种方式让 Alice 访问该 URL。如果 Alice 使用她自己的帐户登录到服务提供商，那么*她的凭据*将用于颁发*授权码*

6.  授权码被交换为访问令牌

7.  现在*Mallory*在客户端的账户被授权访问*Alice*在服务提供商的账户

那么，我们如何使用`state`参数来防止这种情况呢？

# 预防

1.  客户端应该创建一个基于原始用户帐户的值（例如，用户会话密钥的哈希）。它是什么并不重要，只要它是*独一无二*的，并且是使用有关原始用户的一些私人的、不可猜测的信息生成的。

2.  该值在上述第三步的重定向中传递给服务提供者

3.  现在，当 Mallory 让 Alice 访问保存的 URL（上面的第五步）时，该 URL 包括`state`使用 Mallory 的会话信息生成的参数

4.  *授权码在Alice 的*会话**中与 Mallory 的****参数**一起发布并发送回客户端**`state`**

5.  `state`客户端根据*Alice 的*会话信息生成一个新值，并将其与`state`从授权请求发送回服务提供商的值进行比较。该值与请求上的参数不匹配`state`，因为该`state`值是根据*Mallory 的*会话信息生成的，因此被拒绝。

攻击者不应为任何特定用户生成状态值，因此，诱骗用户访问其授权 URL 无效。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-18T04:38:06.583

仅用于#1 -使用授权代码流的 3 条腿*授权。*

当您的应用程序将授权代码交换为访问令牌时，您希望确保导致提供授权代码的 OAuth 流程实际上是由合法用户发起的。因此，在客户端应用程序通过将用户重定向到提供者来启动 OAuth 流程之前，客户端应用程序会创建一个随机状态值并将其存储在服务器端会话中。然后，当用户完成 OAuth 流程时，您检查以确保状态值与存储在用户服务器端会话中的值相匹配——因为这表明用户已经启动了 OAuth 流程。

状态值通常应该是一个伪随机的不可猜测值。可以使用 PHP 中的 rand() 函数将简单值生成为 int，尽管您也可以变得更复杂以提供更大的保证。

该状态的存在是为了防止像我这样的事情通过电子邮件向您发送包含我帐户授权码的链接，您单击它并且应用程序将所有数据推送到您不知道的我的帐户中。

一些附加信息在 OAuth 2.0 威胁模型文档中： [https ://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-threatmodel-00](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-threatmodel-00)

特别是，请参阅 CSRF 保护部分： [https ://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-26#section-10.12](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-26#section-10.12)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-26T17:39:06.173

由于“状态”只是一个随机字符串，因此制作这样的东西应该可以解决问题：

```
$state = md5(uniqid(rand(), TRUE)); 
```

请记住将其保存在您的会话中，以便稍后检查。

# windows - Windows bat - 为不同的 cmd 调用程序

> ID：11071483
> 
> 赞同：0
> 
> 时间：2012-06-17T13:04:35.050
> 
> 标签：windows, batch-file, call

我想知道我是否可以使用 .bat 文件为不同的 cmd 执行一些程序。查看此示例 .bat 文件：

```
start cmd //number one
start cmd //number two

ping localhost //call in number one
ping 192.168.1.100 //call in number two 
```

我知道两者都将在主窗口（我启动 .bat 文件的窗口）中执行，但我认为这很容易理解。这段代码没什么用，但它只是一个例子。

感谢所有回复。

编辑：我知道 /k 开关，但有什么方法可以不使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:12:39.433

你可以开始你的命令

```
start cmd /k ping localhost
start cmd /k ping 192.168.1.100 
```

这将启动两个新的命令行提示，分别在每个命令行中运行 ping 命令，然后两个窗口和[/k](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/cmd.mspx?mfr=true)开关将使它们保持打开状态。

啊，在您编辑之前发布... ;) 与 shell 交互的唯一方法是在它启动时给它一个要执行的命令。没有办法在shell之间进行交互

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T13:13:13.893

CMD.EXE 有两个参数，/C 和/K，让您指定要执行的命令。/C 在命令完成时关闭窗口，而 /K 保持它运行。

如果你想在一个窗口中执行多个命令，你需要用 && 或类似的连接它们——这需要引用；`CMD /?`会告诉你所有的细节——或者你可以让它启动一个包含命令的批处理文件。

# ruby-on-rails - Rails：路由到自定义控制器操作

> ID：11071489
> 
> 赞同：11
> 
> 时间：2012-06-17T13:06:18.637
> 
> 标签：ruby-on-rails, controller, routes

我很难理解路线，我希望有人能帮助我。

这是我的自定义控制器

```
class SettingsController < ApplicationController
  before_filter :authenticate_user!

    def edit
      @user = current_user
    end

    def update
      @user = User.find(current_user.id)
      if @user.update_attributes(params[:user])
        # Sign in the user bypassing validation in case his password changed
        sign_in @user, :bypass => true
        redirect_to root_path
      else
        render "edit"
      end
    end
end 
```

我有文件 settings/edit.html.erb 和我的链接

```
<li><%= link_to('Settings', edit_settings_path) %></li> 
```

路线

```
get "settings/edit" 
```

对此不起作用，因为那时我得到

```
undefined local variable or method `edit_settings_path' for #<#<Class:0x00000001814ad8>:0x00000002b40a80> 
```

我必须给这个什么路线？我想不通。如果我放置“/settings/edit”而不是路径，一旦我在其他资源页面上，它就会混乱，因为资源名称放在设置/编辑之前

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-17T13:17:27.927

以下应该做：

```
get 'settings/edit' => 'settings#edit', :as => :edit_settings
# you can change put to post as you see fit
put 'settings/edit' => 'settings#update' 
```

如果您`/settings/edit`直接在链接中使用，则在路径中附加其他资源名称应该没有问题。但是，如果没有前导斜杠，即`settings/edit`它可能存在该问题。

不起作用的原因`edit_settings_path`可能是因为您没有声明命名路由。您必须使用`:as`选项来定义您将通过哪种方法生成此路径/url。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T13:21:04.783

如果你想明确定义路线，你会使用类似的东西

```
get 'settings/edit' => 'settings#edit', :as => edit_settings 
```

此语句定义当接收到设置/编辑的 GET 请求时，调用 SettingsController#edit 方法，并且视图可以使用“edit_settings_path”引用此链接。

花点时间阅读[Rails 路由指南](http://guides.rubyonrails.org/routing.html)。它比任何其他参考资料都更好地解释了路由。

还要记住`rake routes`任务，它列出了应用程序中定义的所有路由的详细信息。

# python - numpy，将一个数组映射到另一个数组的一部分

> ID：11071490
> 
> 赞同：4
> 
> 时间：2012-06-17T13:06:27.983
> 
> 标签：python, numpy

假设我有一个数组

```
 a = numpy.arange(8*6*3).reshape((8, 6, 3))
    #and another:
    l = numpy.array([[0,0],[0,1],[1,1]]) #an array of indexes to array "a"
    #and yet another:
    b = numpy.array([[0,0,5],[0,1,0],[1,1,3]]) 
```

其中“l”和“b”长度相等，我想说

```
 a[l] = b 
```

这样 a[0][0] 变为 [0,0,5]，a[0][1] 变为 [0,1,0] 等等。

当我得到一维数组时它似乎工作正常，但它给了我错误

```
 ValueError: array is not broadcastable to correct shape 
```

当我尝试使用 3 维数组时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T13:45:08.770

```
import numpy as np

a = np.arange(8*6*3).reshape((8, 6, 3))
l = np.array([[0,0],[0,1],[1,1]]) #an array of indexes to array "a"
b = np.array([[0,0,5],[0,1,0],[1,1,3]])

a[tuple(l.T)] = b
print(a[0,0])
# [0 0 5]

print(a[0,1])
# [0 1 0]

print(a[1,1])
# [1 1 3] 
```

[安妮阿奇博尔德说](http://mail.scipy.org/pipermail/numpy-discussion/2010-September/052549.html)，

> 当您在所有索引槽中提供数组时，您返回的内容与您放入的数组具有相同的形状；所以如果你提供一维列表，比如
> 
> A[[1,2,3],[1,4,5],[7,6,2]]
> 
> 你得到的是
> 
> [A[1,1,7]，A[2,4,6]，A[3,5,2]]

当您将其与您的示例进行比较时，您会看到

`a[l] = b`告诉 NumPy 设置

```
a[0,0,1] = [0,0,5]
a[0,1,1] = [0,1,0] 
```

并留下`b`未分配的第三个元素。这就是您收到错误的原因

```
ValueError: array is not broadcastable to correct shape 
```

解决方案是将数组转置`l`为正确的形状：

```
In [50]: tuple(l.T)
Out[50]: (array([0, 0, 1]), array([0, 1, 1])) 
```

（您也可以使用`zip(*l)`，但`tuple(l.T)`要快一些。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:55:57.227

或者您可以使用相同的阵列

```
for i in range(len(l)):
    a[l[i][0]][l[i][1]]=b[i] 
```

# point-cloud-library - PCL立方体检测

> ID：11071495
> 
> 赞同：1
> 
> 时间：2012-06-17T13:07:18.497
> 
> 标签：point-cloud-library

我想使用 PCL（点云库）来实现场景中任意大小的立方体或矩形检测。

谁能给我一些指导？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:07:50.960

您可能想看看[这个](http://pointclouds.org/documentation/tutorials/correspondence_grouping.php)PCL 教程，或者一般来说，看看`pcl::recognition`模块中实现的所有技术。

在 PCL 用户邮件列表存档（[此处](http://www.pcl-users.org/Detecting-quot-simple-quot-objects-in-a-point-cloud-td3468335.html)）上，有一个关于简单对象识别的旧但有用的讨论。对于简单的对象，如您的情况，您可以考虑使用 Sample Consensus 在场景点云中分割模型。

# java - 如何使用 POST 查询上传数据？

> ID：11071496
> 
> 赞同：0
> 
> 时间：2012-06-17T13:07:24.210
> 
> 标签：java, android

我有以下问题：我正在开发需要在服务器上授权并将数据从我的手机上传到其中的应用程序。服务器端已准备就绪并且可以正常工作。因此，为了授权，我使用以下代码：

```
URL url = new URL(VALIDATING_URL);
                URLConnection connection=url.openConnection();
                connection.setDoOutput(true);
                PrintWriter out=new PrintWriter(connection.getOutputStream());
                out.print(POST_QUERY_EMAIL+email);
                out.print("&");
                out.print(POST_QUERY_PASS+password);
                out.print("&");
                out.print(POST_QUERY_CHANNEL+channel);
                out.close();
                Scanner in=new Scanner(connection.getInputStream());
                StringBuilder result=new StringBuilder();
                while (in.hasNextLine()) {
                    result.append(in.nextLine());
                    result.append("\n");
                }
                in.close(); 
```

它工作正常，如果我输入正确的数据，应用程序将获得所需的结果。所以，现在我需要使用 POST 查询将数据上传到服务器，但我不知道该怎么做。使用 HTML 表单，视频通常使用 'userfile' 变量上传，将从 PHP scipts 中的 $_FILES 数组中获取。如何从 Java 上传？我可以从 InputStream 将数据打印到 PrintStream 吗？

谢谢，希望你能帮到我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:16:56.480

尝试这个，

```
public void postData() throws Exception {

 HttpClient client = new DefaultHttpClient();
 HttpPost httppost = new HttpPost("https://www.xyz.com");

 List<NameValuePair> list = new ArrayList<NameValuePair>(1);

 list.add(new BasicNameValuePair("name","ABC");

 httppost.setEntity(new UrlEncodedFormEntity(list));

 HttpResponse r = client.execute(httppost);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:25:33.223

我建议阅读[这个](https://stackoverflow.com/a/2793153/691639)。它向您展示了如何进行 POST`URLConnection`并解释发生了什么。

# c - opencv：将标量转换为浮点型或双精度型

> ID：11071509
> 
> 赞同：15
> 
> 时间：2012-06-17T13:09:06.530
> 
> 标签：c, opencv, scalar

谁能帮我将openCV的标量类型转换为浮点或双精度等基本类型？

```
Scalar Sum1=sum(arg1),Sum2=sum(arg2);
theta.at<float>(i,j)=0.5*atan(Sum1/Sum2); 
```

我必须对 Mat 对象`arg1`和`arg2`（邻域总和）的所有元素求和，然后我必须执行它们的除法以找到每个像素的方向场。我执行了 sum，但由于我必须应用 arctan 函数，所以标量类型不适合。谁能帮我将标量类型转换为基本类型？

实际上我正在尝试应用 log-gabor 过滤器，到目前为止我所做的代码是：

```
//function to enhance fingerprint by log-gabor filter

void filter(Mat src, Mat finalImage)
{

//Sobel derivatives for orientation estimation

Mat grad_x,grad_y,grad2_x,grad2_y,fImage;
src.convertTo(fImage, CV_32F);

//1st and second order gradient

Sobel(fImage,grad_x,CV_32F,1,0,3);
Sobel(fImage,grad_y,CV_32F,0,1,3);    
Sobel(fImage,grad2_x,CV_32F,2,0,3);
Sobel(fImage,grad2_y,CV_32F,0,2,3);

//orientation estimation

Mat theta=Mat::zeros(fImage.size(),CV_32F);
Size block=Size(12,12);
copyMakeBorder(grad_x, grad_x, block.height/2, block.height/2,
               block.width/2,block.width/2 , BORDER_CONSTANT, Scalar::all(0));

copyMakeBorder(grad2_x, grad2_x, block.height/2, block.height/2,
               block.width/2,block.width/2 , BORDER_CONSTANT, Scalar::all(0));

copyMakeBorder(grad_y, grad_y, block.height/2, block.height/2,
               block.width/2,block.width/2 , BORDER_CONSTANT, Scalar::all(0));

copyMakeBorder(grad2_y, grad2_y, block.height/2, block.height/2,
               block.width/2,block.width/2 , BORDER_CONSTANT, Scalar::all(0));
Size imgSz=grad_x.size();
for(int i=block.width/2;i<imgSz.width-block.width/2;++i)
    for(int j=block.height/2;j<imgSz.height-block.height/2;++j)
    {
        Mat roi_gradX=grad_x(Range(i-block.width/2,i+block.width/2),
                             Range(j-block.width/2,j+block.width/2));

        Mat roi_gradY=grad_y(Range(i-block.width/2,i+block.width/2),
                             Range(j-block.width/2,j+block.width/2));

        Mat roi_gradX2=grad2_x(Range(i-block.width/2,i+block.width/2),
                             Range(j-block.width/2,j+block.width/2));

        Mat roi_gradY2=grad2_y(Range(i-block.width/2,i+block.width/2),
                             Range(j-block.width/2,j+block.width/2));

        Mat arg1,arg2;
        multiply(roi_gradX,roi_gradY,arg1);
        arg1*=2;
        subtract(roi_gradX2,roi_gradY2,arg2);
        Scalar Sum1=sum(arg1),Sum2=sum(arg2);

        theta.at<float>(i,j)=0.5*atan(Sum1/Sum2);
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-17T22:03:35.993

我用

```
double s;
s = sum(arg1)[0]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T13:36:20.660

**编辑**

来自 OpenCV 文档：

> **sum**
> ...
> sum 函数计算并返回数组元素的总和，每个通道独立。

Sobel 生成的输出图像是具有一个通道的二进制图像，因为您的`Sum1`和`Sum2`标量结果来自您需要用来`atan(Sum1[0]/Sum2[0])`计算反正切的主值。

**错误**，因为应该应用 Log-Gabor 过滤器……</p>

看起来您尝试做很多事情，这些事情可以[通过](http://www.eml.ele.cst.nihon-u.ac.jp/~momma/wiki/wiki.cgi/OpenCV/Gabor%20Filter.html)`cv::filter2D()`......

```
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <math.h>

cv::Mat mkKernel(int ks, double sig, double th, double lm, double ps)
{
    int hks = (ks-1)/2;
    double theta = th*CV_PI/180;
    double psi = ps*CV_PI/180;
    double del = 2.0/(ks-1);
    double lmbd = lm;
    double sigma = sig/ks;
    double x_theta;
    double y_theta;
    cv::Mat kernel(ks,ks, CV_32F);
    for (int y=-hks; y<=hks; y++)
    {
        for (int x=-hks; x<=hks; x++)
        {
            x_theta = x*del*cos(theta)+y*del*sin(theta);
            y_theta = -x*del*sin(theta)+y*del*cos(theta);
            kernel.at<float>(hks+y,hks+x) = (float)exp(-0.5*(pow(x_theta,2)+pow(y_theta,2))/pow(sigma,2))* cos(2*CV_PI*x_theta/lmbd + psi);
        }
    }
    return kernel;
}

int kernel_size=21;
int pos_sigma= 5;
int pos_lm = 50;
int pos_th = 0;
int pos_psi = 90;
cv::Mat src_f;
cv::Mat dest;

void Process(int , void *)
{
    double sig = pos_sigma;
    double lm = 0.5+pos_lm/100.0;
    double th = pos_th;
    double ps = pos_psi;
    cv::Mat kernel = mkKernel(kernel_size, sig, th, lm, ps);
    cv::filter2D(src_f, dest, CV_32F, kernel);
    cv::imshow("Process window", dest);
    cv::Mat Lkernel(kernel_size*20, kernel_size*20, CV_32F);
    cv::resize(kernel, Lkernel, Lkernel.size());
    Lkernel /= 2.;
    Lkernel += 0.5;
    cv::imshow("Kernel", Lkernel);
    cv::Mat mag;
    cv::pow(dest, 2.0, mag);
    cv::imshow("Mag", mag);
}

int main(int argc, char** argv)
{
    cv::Mat image = cv::imread("cat.jpg",1);
    cv::imshow("Src", image);
    cv::Mat src;
    cv::cvtColor(image, src, CV_BGR2GRAY);
    src.convertTo(src_f, CV_32F, 1.0/255, 0);
    if (!kernel_size%2)
    {
        kernel_size+=1;
    }
    cv::namedWindow("Process window", 1);
    cv::createTrackbar("Sigma", "Process window", &pos_sigma, kernel_size, Process);
    cv::createTrackbar("Lambda", "Process window", &pos_lm, 100, Process);
    cv::createTrackbar("Theta", "Process window", &pos_th, 180, Process);
    cv::createTrackbar("Psi", "Process window", &pos_psi, 360, Process);
    Process(0,0);
    cv::waitKey(0);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-28T18:46:47.847

标量是从 Vec 派生的双精度的 4 元素向量，如 opencv 文档 ( [http://docs.opencv.org/2.4.9/modules/core/doc/basic_structures.html#scalar](http://docs.opencv.org/2.4.9/modules/core/doc/basic_structures.html#scalar) )中所示

如果矩阵有多个通道，函数 cv::sum 分别对每个通道的元素求和，并将它们存储在标量 Vec 上。因此，要访问每个通道的双精度值，您必须访问向量上的位置。（文档：[http](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#sum) ://docs.opencv.org/modules/core/doc/operations_on_arrays.html#sum ）

```
//sum for first channel
double sum1 = cv::sum(my_mat)[0];
//sum for second channel
double sum2 = cv::sum(my_mat)[1];
//sum for third channel
double sum3 = cv::sum(my_mat)[2]; 
```

# android - 图像按钮 android

> ID：11071510
> 
> 赞同：0
> 
> 时间：2012-06-17T13:09:12.647
> 
> 标签：android, image, button, imagebutton

> **可能重复：**
> [具有选定状态的Android ImageButton？](https://stackoverflow.com/questions/2604599/android-imagebutton-with-a-selected-state)

我想知道是否有办法在单击 ImageButton 时更改其图像？它应该是一个播放/暂停按钮，所以如果正在播放音频，那么图像应该是“暂停”，一旦用户点击暂停，图像应该显示“播放”提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:12:41.767

您可以创建按下方法和释放方法。在 press 方法中给出 oause 的图像，在 release 方法中只给出 play 的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:27:32.777

这听起来更像是一个[toggleButton](http://developer.android.com/reference/android/widget/ToggleButton.html)而不是一个简单的 imageButton，因为它有 2 个状态：正在播放和暂停/停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T05:41:06.893

在这种情况下，您有两种选择：

要么使用**切换按钮**

或者

处理您的 ImagButton 的 Clickable 事件，即在其单击时动态更改图像。即使您可以有两个按钮

1.  **按下播放按钮时：**设置暂停按钮的可见性为**真**，播放按钮设置可见性**消失**

2.  **按下暂停按钮时：**设置播放按钮的可见性为**真**，暂停按钮设置可见性**消失**

# javascript - Backbone.js 如何跟踪登录用户状态和关于应用程序结构的一般建议

> ID：11071512
> 
> 赞同：2
> 
> 时间：2012-06-17T13:09:24.830
> 
> 标签：javascript, backbone.js

我想知道如何在backbone.js应用程序中跟踪当前登录的用户，页面上的大多数视图都需要知道用户是否登录或现在以及哪个用户登录。最好的方法是什么实现这个？

我在服务器上有会话管理，但我怎么知道我在我的骨干应用程序中处理的是哪个用户，我怎么知道他是否注销了这就是问题

另外，我如何知道用户已使用另一个选项卡等注销？应该有一种通用的方法来处理这些东西，就像我们之前在 rails 中使用过滤器来管理这些东西一样。在前端使用什么方法来实现相同的。

我目前正在做的是，当我从服务器端设置的主页加载时呈现 html 隐藏字段#current_user_id，我的主干应用程序读取并设置如下变量

```
window.MyApp =
  Models: {}
  Collections: {}
  Views: {}
  Routers: {}
  currentUser: null
  init: -> 
    @currentBusiness = $('#current_business').val()
    new MyApp.Routers.Businesses
    Backbone.history.start()

$(document).ready ->
  MyApp.init() 
```

然后我的路由器设置一个 ShowView 然后设置页面上的其他子视图

```
class MyApp.Routers.AppRouter extends Backbone.Router
  routes:
    '': 'show'

  show: ->
    user = new Vocallocal.Models.user id: Vocallocal.currentBusiness
    Vocallocal.currentBusiness = business
    new Vocallocal.Views.BusinessesIndex model: business
    business.fetch() 
```

这是主要的 ShowView

```
class MyApp.Views.ShowView extends Backbone.View 

  el: '#main'
  template: JST['users/home'] 

  initialize: ->
    @model.bind 'change', @render, @
    @details = new Vocallocal.Views.UserDetails model: @model 
    @logo = new Vocallocal.Views.UserLogo model: @model 
    @managePhotos = new Vocallocal.Views.ManagePhotos model: @model 

  render: -> 
    console.log('change has occured') 
   @ 
```

上面的代码和设置是否有意义。如果我应该对上述内容进行任何更改，我正在寻求一般建议。

感谢您的宝贵意见

- 投标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:33:06.407

我们的应用程序是一个完全分离的客户端/服务器 API 架构，包括登录。

当用户通过我们的服务器进行身份验证和授权时，我们通过 HTTPS 连接发送带有相关数据的 JSON 请求（这意味着由于 CORS 和 IE，我们的后端和前端必须从同一个站点提供服务）。

后端返回一个身份验证令牌。

每个需要身份验证的 REST API 都需要将此令牌作为授权标头通过 HTTPS AJAX 请求发送。服务器设置为拒绝我们机制未提供的任何令牌，并拒绝来自我们服务器未提供的页面的任何连接。

我们将此身份验证令牌存储在客户端的 cookie 中。如果身份验证令牌无效、丢失等，我们的服务器会返回一个 HTTP 401，如果发生这种情况，我们会将其捕获并将客户端重定向到登录页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:24:08.207

在开发客户端应用程序时，我也在努力解决身份验证问题。如果您曾经使用过第 3 方 API（Facebook、Twitter），您就会知道所有身份验证都是在服务器端完成的。这就是为什么@Pointy 是正确的。客户端没有进行身份验证。

因此，如果您希望访问 API 的安全部分，您​​的用户名和密码必须随每个请求一起发送，并在服务器上进行检查。这绝对不是最安全的方式，而且在没有 HTTPS 连接的情况下，几乎没有办法解决这个问题。我不确定你用什么语言开发你的 API，但这个[链接](http://stevescodingblog.co.uk/basic-authentication-with-asp-net-webapi/)仍然是一个很好的阅读。Steve 基本上使用了一个简单的协议，客户端通过该协议将授权令牌作为 HTTP 请求中的标头发送，服务器对该令牌进行解码以确定它是否有效。

在回答您的问题时，我会检查用户是否有效。如果他/她是，请使用身份验证令牌引导您的用户模型。此身份验证令牌将与每个需要身份验证的 api 请求一起发送和解码。我不是专家，所以如果有其他方法，请告诉我。我也在学习这个。

# android - 将所有现有日历读出到 HashMap

> ID：11071517
> 
> 赞同：0
> 
> 时间：2012-06-17T13:10:17.283
> 
> 标签：android, calendar

我尝试读出所有现有的日历。

我想要一个包含所有标题和帐户的 HashMap。有人可以帮我吗？这是我的尝试。在 LogCat 中，我看到了所有日历。

```
public HashMap<String, String> readCalendar(Context context) {

    String[] EVENT_PROJECTION = new String[] {                  
        Calendars.ACCOUNT_NAME,                  
        Calendars.CALENDAR_DISPLAY_NAME                                   
    };

    Cursor managedCursor = null;
    HashMap<String, String> calendars = new HashMap<String, String>();
        Uri calendarUri = CalendarContract.Calendars.CONTENT_URI;
        ContentResolver cr = context.getContentResolver();
        managedCursor = cr.query(calendarUri, EVENT_PROJECTION, null, null, null);

        if (managedCursor != null && managedCursor.moveToFirst()) {

            do {
                    // here I see all accounts and names in the LogCat

                for (int i = 0; i < managedCursor.getColumnCount(); i++) {
                    Log.i(LOG_TAG, managedCursor.getColumnName(i) + "="
                            + managedCursor.getString(i));

                }

                String title = managedCursor.xxxxxx;   // I don't know how
                String account = managedCursor.xxxxx;  // I don't know how

                calendars.put(title, account);

            } while (managedCursor.moveToNext());

            managedCursor.close();
        } else {
            Log.i(LOG_TAG, "No Calendars");
                }
 return calendars;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:32:41.137

您似乎正在日历表中查找列名。它们[在 API](http://developer.android.com/reference/android/provider/CalendarContract.Calendars.html)（日历列部分）中进行了描述。调用可能如下所示（如果这些是您想要的列）：

```
String title = managedCursor.getString(managedCursor.getColumnIndex(
  CalendarContract.Calendars.NAME));
String account = managedCursor.getString(managedCursor.getColumnIndex(
  CalendarContract.Calendars.ACCOUNT_NAME)); 
```

# visual-studio-2010 - 在水晶报表中加载动态图像时，占位符图像代替第一张图像显示

> ID：11071520
> 
> 赞同：0
> 
> 时间：2012-06-17T13:10:25.843
> 
> 标签：visual-studio-2010, crystal-reports

我正在尝试将图像插入到我的水晶子报告之一中。我尝试了以下步骤：

1.  插入占位符图像。
2.  右键单击图形->“格式化图形”->“图片”选项卡->在“图形位置”下添加公式（基本上给定表格中图像的路径）。
3.  运行报告。

我所有的图像都按预期加载，除了第一个。代替第一张图像，仅显示占位符图像（这是不希望的）。我无法理解我在哪里犯了错误。我是水晶报告的新手，对此方面的任何帮助将不胜感激。我基本上是在使用 Visual Studio 2010 开发一个 Windows 应用程序，并且我有 CR 运行时版本 CR13_3_0_3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:40:24.353

此问题可能有多种原因。请尝试执行以下操作：

1.  右键单击图形 -> 'Format Graphic' -> 'Common' tab -> 确保勾选“Can Grow”并且取消勾选“Lock Position And Size”。

2.  尝试放大部分大小，使图片适合。

3.  确保从表格中提取图片的公式是否从 0 开始。您可以尝试在显示的图片和未显示的图片之间切换，以了解问题是由于图片本身还是与您的报告配置有关。

# python - 在 Jython 中，是否有向 EDT 提交方法的 Pythonesque 方式？

> ID：11071525
> 
> 赞同：0
> 
> 时间：2012-06-17T13:11:28.443
> 
> 标签：python, multithreading, jython, event-dispatch-thread

在 Python 中，人们习惯于做

```
def runTaskInNonEDT():
  pass
tRunTask = threading.Thread( target = runTaskInNonEDT )
tRunTask.start() 
```

在 Jython 中，我发现如果我想向 EDT 提交方法，我必须去

```
def makeRunnableClass():
  class RunnableClass( Runnable ):
    def run( rSelf ):
      pass
  return RunnableClass
SwingUtilities.invokeAndWait( makeRunnableClass()() ) 
```

显然你有关于传递参数等的所有伴随问题。我只是想知道是否可能有一种更快捷、更 Pythonesque 的方式来向 EDT 提交方法？

***@lvc***

谢谢......是的，事实上我明白了......事实上成语

```
def makeSthgClass():
  class SthgClass():
    pass
  return SthgClass 
```

是我习惯性地使用的一种，只是为了停止使用一次性子类实例的类名来混淆命名空间。

事实上，我有一些事情可以减轻任务

```
def runToMessageTree( self, method, *args, **kvargs ):
  if SwingUtilities.isEventDispatchThread():
    method( *args, **kvargs )
  else:
    def makeRunnableClass():
      class RunnableClass( Runnable ):
        def run( self ):
          method( *args, **kvargs )
      return RunnableClass
    SwingUtilities.invokeAndWait( makeRunnableClass()() ) 
```

所以你可以去

```
def doSthg():
  pass
self.runToMessageTree( doSthg ) 
```

...但它没有任何令人满意的 Pythonic 风格。

之后：

```
 class EDTWorkerThread( WorkerThread ):
    def __init__( ewt_self, name ):
      super( EDTWorkerThread, ewt_self ).__init__( name )
      class EDTWorker( SwingWorker ):
        def doInBackground(self ):
          check_event_thread( False )
          while True:
            method_call_elements = ewt_self.input_queue.get()
            if method_call_elements is None: # "poison pill"
              break
            self.super__publish( [ method_call_elements ])
          ewt_self.input_queue.task_done()
          return
        def process( self, chunks ):
          check_event_thread( True )
          for chunk in chunks:
            assert type( chunk ) is list
            assert chunk # i.e. must have at least one element!
            # check that first item is callable
            assert hasattr( chunk[ 0 ], "__call__" )
            method_call_elements = chunk
            method_args = method_call_elements[ 1 : ] 
            method_call_elements[ 0 ]( *method_args )
            ewt_self.input_queue.task_done()
      ewt_self.swing_worker = EDTWorker()
    def run( self ):
      self.swing_worker.execute() 
```

ẀorkerThread 是一个非常简单、经典的 Python 习语：

```
class WorkerThread( threading.Thread ):
  def __init__( self, *args, **kvargs ):
    threading.Thread.__init__( self, *args, **kvargs )
    self.input_queue = Queue()

  def send( self, item ):
    assert type( item ) is list
    assert item # i.e. must have at least one element!
    # check that first item is callable
    assert hasattr( item[ 0 ], "__call__" )
    self.input_queue.put( item )

  def close( self ):
    self.input_queue.put( None )
    self.input_queue.join()

  def run( self ):
    while True:
      method_call_elements = self.input_queue.get()
      if method_call_elements is None: # "poison pill"
        break
      method_args = method_call_elements[ 1 : ]
      method_call_elements[ 0 ]( *method_args ) 
      self.input_queue.task_done()
    self.input_queue.task_done()
    return 
```

所以你提交一个方法，然后是可选的 args ...然后这个方法最终在 EDT 中运行，使用有问题的 args。无需创建 Runnables...

当然，另一种可能性是从 SwingWorker 子类化......然后你不会有这种稍微麻烦的“双队列”安排（即 WorkerThread 队列和 EDT 自己的队列，它传递给 process()）......但是那么你必须在doInBackground中有一个相当不雅的循环（使用sleep（））......

会对人们的意见感兴趣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:23:41.713

要实现的主要事情是`SwingUtilities.invokeAndWait`需要一个单方法接口的实例，因为 Java 没有一流的函数。如果不使用`SwingUtilities`具有更多 Pythonic 接口的其他东西来实现此功能，那么这一点是无法避免的。

如果您决定使用该特定 API，您仍然可以避免使用包装器功能。做就是了：

```
class RunnableClass(Runnable):
    def run(self):
       pass

SwingUtilities.invokeAndWait(RunnableClass()) 
```

使用包装函数的唯一原因是能够使用传入函数来调用`run`使用闭包；您仍然可以通过将函数传入`RunnableClass.__init__`并存储它来做到这一点：

```
class RunnableClass(Runnable):
    def __init__(self, func):
       self._func = func

    def run(self):
       self._func() 
```

请注意，`func` *不应*将`self`其作为第一个参数 - 因为它是实例而不是类的属性，所以它不会被视为方法。

根据您的编辑 - 传递的重点`func`是它不再需要是一次性子类 -对于要运行的每个 func，您`RunnableClass.__init__`不需要一个子类，只需一个. 该类*本身*是从 Python 习语到 Java 的通用适配器，因此您不需要围绕它的函数来完成相同的工作。`Runnable``RunnableClass`

 *这意味着你`runToMessageTree`可以看起来像这样：

```
def runToMessageTree(self, method, *args, **kwargs):
    if SwingUtilities.isEventDispatchThread():
       method(*args, **kwargs)
    else:
       SwingUtilities.invokeAndWait(RunnableClass(method, *args, **kwargs)) 
```*

# f# - F# 中的并行可变赋值

> ID：11071526
> 
> 赞同：1
> 
> 时间：2012-06-17T13:11:48.217
> 
> 标签：f#

我想交换两个引用，有没有一种很好的方法可以使这样的构造工作？

```
 let mutable sarlast = ref (Array.copy ar)
 let mutable sarcurr = ref (Array.copy ar)
 ... some code ...

 sarcurr, sarlast <- sarlast, sarcurr 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T13:35:23.207

不，`<-`是单赋值，元组在 F# 中是不可变的。

您可以为此目的定义一个中缀函数（@bytebuster 的单行建议）：

```
let (>-<) x y = let temp = !x in x := !y; y := temp

// Usage
let a = ref [|1|]
let b = ref [|2|]
a >-< b 
```

# codeigniter - 从控制器传递多维数组以查看 codeignighter

> ID：11071529
> 
> 赞同：2
> 
> 时间：2012-06-17T13:12:07.013
> 
> 标签：codeigniter, multidimensional-array

如何将多维度数组传递给视图？控制器代码

```
 public function index(){

           data['navs'] =   array( 
            'name' => array('one', 'two', 'three'),
            'link' => array('one', 'two', 'three'));

            $this->load->view('adminView', $data);} 
```

查看代码

```
 <?php if ($navs) {
                foreach ($navs as $nav) {
                echo('<li><a href="' . $nav->link . '">' . $nav->name . '</a></li>');
                }
            }?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T14:06:10.903

首先，您需要以正确的方式构建阵列。它应该是这样的：

```
$data['navs'] = array( array(  'name'    =>  'one',
                               'link'    =>  'linkone'),

                       array(  'name'    =>  'two',
                               'link'    =>  'linktwo')    
                    );
$this->load->view('adminView', $data); 
```

那么在你看来：

```
foreach($navs as $n){
  echo "<li><a href='{$n['link']}'>{$n['name']}</a></li>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T13:40:08.253

进入视图后，将您的数据称为数组 elelements，而不是对象属性（您传递的是数组数组，而不是对象数组）。根据您的控制器，您的视图代码应如下所示：

```
foreach ($navs as $nav) {
    echo('<li><a href="' . $nav['link'] . '">' . $nav['name'] . '</a></li>');
} 
```

但是，这不会输出正确的结果，因为您的 $nav['link'] 和 $nav['name'] 是两个数组。您需要调用他们的任何元素或相应地更改控制器。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-08-11T17:19:05.540

如何在php中使用codeigniter的控制器获取动态数组值

```
Array
(
    [id] => 2
    [name] => Wellness & Spa
    [isSelected] => true
    [subModules] => Array
        (
            [0] => Array
                (
                    [id] => 1
                    [name] => Spa1
                    [isSelected] => true
                    [0] => object:81
                )

            [1] => Array
                (
                    [id] => 2
                    [name] => Spa2
                    [isSelected] => true
                    [0] => object:82
                )

            [2] => Array
                (
                    [id] => 3
                    [name] => Wellness
                    [isSelected] => true
                    [0] => object:83
                )

        )

) 
```

# mysql - Sequel - 为一对多和多对多模型关联排序数据集

> ID：11071538
> 
> 赞同：0
> 
> 时间：2012-06-17T13:13:18.977
> 
> 标签：mysql, ruby, sequel

我有一个关于使用续集订购数据集的问题。

我有表**'jobs'**、**'users'**、**'comments'**。用户可以申请任何工作，所以我这里有一个多对多关联（我还有一个“jobs_users”表）。工作和评论代表一对多的关联。我要实现的是以下内容 - 我想从**'jobs'**中检索行，按以下顺序排序：

1.  申请的用户数量；

2.  评论数（评论最多的在前）。

我使用sequel，到目前为止我正在使用显式查询，所以你能帮我以原生sequel方式实现这样的排序吗？

简化的数据库如下所示：

```
create_table :users do
    primary_key     :id
    String          :nickname
end

create_table :jobs do
    primary_key     :id
    Text            :description
end

create_table :jobs_users do
    primary_key     :id
    foreign_key     :job_id
    foreign_key     :user_id
end

create_table :comments do
    primary_key     :id
    Text            :comment
    foreign_key     :user_id
    foreign_key     :job_id
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:17:51.403

你可以试试这个——

```
SELECT j.id,
       COUNT(ju.id) AS appliedcount,
       COUNT(c.id) AS commentcount
FROM jobs j
     JOIN jobs_user ju ON ju.job_id = j.id
     JOIN comments c ON c.job_id = j.id
GROUP BY j.id
ORDER BY appliedcount DESC, commentcount DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:19:16.467

假设用户只能申请一次（也许通过`primary_key`在`jobs_users`桌子上制作来限制这一点`job_id`，`user_id`您可以通过简单地分组并围绕`job_id`

```
DB[:jobs_users].group_and_count(:job_id).order(:count.desc).all 
```

评论也是如此。对工作的评论最多的是：

```
DB[:comments].group_and_count(:job_id).order(:count.desc).all 
```

现在这些都不会返回完整的记录，但它们会为您提供`job_id`您正在寻找的 top 。

# android - 在底栏上创建类似 Android 的 Facebook 菜单

> ID：11071542
> 
> 赞同：0
> 
> 时间：2012-06-17T13:14:21.140
> 
> 标签：android, facebook, menu

我正在使用 Galaxy 选项卡，它的底部有一个一直出现的栏。FB 应用程序在那里显示了一个用作菜单按钮的新项目。

如何声明我的菜单像 FB 一样存在？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:54:09.437

我猜他们仍在使用旧的[选项菜单](http://developer.android.com/guide/topics/ui/menus.html)。您可以通过将目标 sdk 设置为最大 10 来实现该效果。我不建议这样做，因为菜单按钮隐藏信息并且不是当前的方式（我会使用[ActionBar](http://developer.android.com/design/patterns/actionbar.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:10:18.413

你一定要看看[ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html)。除了可用的选项卡导航之外，您还可以选择顶部和底部的拆分操作栏。ActionBar 是 Honeycomb (3.x) 的一部分，但如果你想支持旧版本，还有[ActionBarSherlock](http://actionbarsherlock.com/)库。

# java - ShareActionProvider 返回到它的活动时会自动打开

> ID：11071545
> 
> 赞同：1
> 
> 时间：2012-06-17T13:14:49.987
> 
> 标签：java, android, android-actionbar, shareactionprovider

我在我的操作栏中使用了一个非常标准的 ShareActionProvider 实现，它工作正常。但是，当我从操作栏中的操作按钮启动另一个活动并从该活动返回时，SharedActionProvider 的下拉菜单会自动打开。

当我执行完全相同的代码从普通按钮打开另一个活动时，不会发生这种行为。

这是我的菜单 xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:id="@+id/menu_btn_my_scedule" 
    android:icon="@drawable/ic_menu_my_calendar"
    android:title="To Scedule"
    android:showAsAction="ifRoom" />
<item android:id="@+id/menu_btn_share" 
    android:title="Share.."
    android:showAsAction="ifRoom"
    android:actionProviderClass="android.widget.ShareActionProvider" />    
<item android:id="@+id/menu_btn_set_scedule"
    android:icon="@drawable/ic_menu_today"
    android:title="Set Scedule"
    android:showAsAction="collapseActionView"
    android:actionProviderClass="android.widget.ShareActionProvider" />
<item android:id="@+id/menu_btn_settings"
    android:icon="@drawable/ic_menu_manage"
    android:title="Settings"
    android:showAsAction="collapseActionView"
    android:actionProviderClass="android.widget.ShareActionProvider" />
<item android:id="@+id/menu_btn_feedback"
    android:icon="@drawable/ic_menu_manage"
    android:title="Feedback/Question"
    android:showAsAction="collapseActionView"
    android:actionProviderClass="android.widget.ShareActionProvider" />
<item android:id="@+id/menu_btn_about"
    android:icon="@drawable/ic_menu_info_details"
    android:title="About"
    android:showAsAction="collapseActionView"
    android:actionProviderClass="android.widget.ShareActionProvider" />
</menu> 
```

其他菜单方法：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    getMenuInflater().inflate(R.menu.optionsmenu, menu);

    MenuItem actionItem = menu.findItem(R.id.menu_btn_share);
    ShareActionProvider actionProvider = (ShareActionProvider) actionItem.getActionProvider();
    actionProvider.setShareHistoryFileName(ShareActionProvider.DEFAULT_SHARE_HISTORY_FILE_NAME);
    actionProvider.setShareIntent(createShareIntent());

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
        case android.R.id.home:
            finish();
            return false;
        case R.id.menu_btn_my_scedule:
            Intent i = new Intent(ONTTOptions.this, ONTTShowScedule.class);
            i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);
            startActivity(i);
            return true;
        case R.id.menu_btn_set_scedule:
            i = new Intent(ONTTOptions.this, ONTTScedule.class);
            overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);
            startActivity(i);
            return true; 
        case R.id.menu_btn_settings: 
            i = new Intent(ONTTOptions.this, ONTTPreferences.class);
            overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);
            startActivity(i);
            return true; 
        case R.id.menu_btn_feedback: 
            showFeedbackDialog();
            return true;
        case R.id.menu_btn_about:
            i = new Intent(ONTTOptions.this, ONTTAboutActivity.class);
            overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);
            startActivity(i);
            return true;    
        default: return super.onOptionsItemSelected(item);
    }
}

private Intent createShareIntent() {
    Intent shareIntent = new Intent(Intent.ACTION_SEND);
    shareIntent.setType("text/plain");
    shareIntent.putExtra(Intent.EXTRA_TEXT, "https://play.google.com/store/apps/details?id=" + ONTTConfig.PACKAGE_NAME);
    return shareIntent;
} 
```

我一定在某个地方遗漏了什么，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:59:12.087

我发现了问题。我认为在溢出菜单中我想要的每个操作栏项目也需要 android:actionProviderClass="android.widget.ShareActionProvider" 。我只是在除共享按钮之外的所有项目上删除了它。

我的菜单 xml 现在看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:id="@+id/menu_btn_my_scedule" 
    android:icon="@drawable/ic_menu_my_calendar"
    android:title="To Scedule"
    android:showAsAction="ifRoom" />
<item android:id="@+id/menu_btn_share" 
    android:title="Share.."
    android:showAsAction="ifRoom"
    android:actionProviderClass="android.widget.ShareActionProvider" />    
<item android:id="@+id/menu_btn_set_scedule"
    android:icon="@drawable/ic_menu_today"
    android:title="Set Scedule"
    android:showAsAction="collapseActionView" />
<item android:id="@+id/menu_btn_settings"
    android:icon="@drawable/ic_menu_manage"
    android:title="Settings"
    android:showAsAction="collapseActionView" />
<item android:id="@+id/menu_btn_feedback"
    android:icon="@drawable/ic_menu_manage"
    android:title="Feedback/Question"
    android:showAsAction="collapseActionView" />
<item android:id="@+id/menu_btn_about"
    android:icon="@drawable/ic_menu_info_details"
    android:title="About"
    android:showAsAction="collapseActionView" />
</menu> 
```

# ajax - AJAX 将返回的数据分离到特定的 DIV 中

> ID：11071551
> 
> 赞同：0
> 
> 时间：2012-06-17T13:16:05.857
> 
> 标签：ajax, parsing, variables, html

AJAX 代码：

```
 <script type="text/javascript">
            function doCalc(){
            var roomX = $('#room_str').val();
            var heightX = $('#height_str').val();
            var widthX = $('#width_str').val();
            var prodid = $('#prodid').val();
            var qtyX = $('#qty_str').val();

            $.post('db_query.php',
            {qtyX:qtyX, roomX:roomX, heightX:heightX, widthX:widthX, prodid:prodid}, 
            function(data) {
                data = $.parseJSON(data);
                $('#width-placeholder').html(data.width);
                $('#height-placeholder').html(data.height);
                // ...
            });
            return false;
            };
        </script> 
```

PHP代码：

```
<?php
include('db_pbconnection.php');
$query = mysql_query(" SELECT * FROM price_dimensions WHERE prodid = '".$_POST['prodid']."' AND height >= '".$_POST['heightX']."' AND width >= '".$_POST['widthX']."' ORDER BY height ASC, width ASC LIMIT 1 ");
$results = array();
$row = mysql_fetch_array($query);
$results = array(
   'width' => $row['width'],
   'height' => $row['height'],
   'price' => $row['price']
);
$json = json_encode($results);
echo $json;
?> 
```

编辑：感谢亚历克斯，更新的代码可以成功运行。这使用 json_encode 将数据发回，并能够将每个 SQL 行分配给已识别的占位符。这是为了以防您需要在布局中单独移动数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:49:23.720

如果我没记错的话，您尝试做的是将选择器应用于来自 AJAX 请求的 HTML 数据。是的？我不认为 jQuery 会在这里帮助你。

一个选项可能是让这个 div 结构已经在页面上作为带有占位符的模板。并且您的 AJAX 调用应该以 JavaScript 原生、可解析的格式（[JSON](http://en.wikipedia.org/wiki/JSON) ）返回数据。PHP 有一个函数可以为你生成 JSON - [json_encode](http://www.php.net/manual/en/function.json-encode.php)。从服务器获取 JSON 后，您可以执行以下操作：

```
function(data) {
    data = $.parseJSON(data);
    $('#width-placeholder').html(data.width);
    $('#height-placeholder').html(data.height);
    // ...
});
return false;
}; 
```

# c++ - 是否允许标准库算法复制谓词参数？

> ID：11071553
> 
> 赞同：3
> 
> 时间：2012-06-17T13:16:55.590
> 
> 标签：c++, g++, functor, stl-algorithm

假设我们想从`int`s 的向量中删除重复值。通常的解决方案是使用erase-remove idiom对向量进行排序并擦除重复项。但是我们需要维护不会被删除的元素的顺序，所以我们不能排序。所以有人可能会想出一个这样的谓词并使用 with`remove_if`算法：

```
struct comp {
    std::set<int> s;
    comp() : s() {}
    bool operator()(int i)
    {
        return !(s.insert(i)).second;
    }
}; 
```

但是如果谓词对象由于某种原因被复制，这将中断，因为我们将获得`set`成员的两个副本。事实上，gcc 的实现`remove_if`正是这样做的：

```
template<typename _ForwardIterator, typename _Predicate>
    _ForwardIterator
    remove_if(_ForwardIterator __first, _ForwardIterator __last,
          _Predicate __pred)
    {

      __first = _GLIBCXX_STD_A::find_if(__first, __last, __pred);

      if(__first == __last)                             // ^^^^^ here a copy is made
        return __first;
      _ForwardIterator __result = __first;
      ++__first;
      for(; __first != __last; ++__first)
        if(!bool(__pred(*__first)))
          {
            *__result = _GLIBCXX_MOVE(*__first);
            ++__result;
          }
      return __result;
    } 
```

解决方法是使`set`我们的仿函数成员静态：

```
struct comp {
    static set<int> s;
    comp() { s. clear(); }
    bool operator()(int i)
    {
        return !(s.insert(i)).second;
    }
};
set<int> comp::s; 
```

但问题仍然存在：

**我们是否需要确保谓词函子的可能副本不会破坏我们的逻辑？** 标准中是否有任何规定（或禁止）与此问题相关的某些行为？或者它是实现中的错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T13:34:38.150

是的，标准没有指定谓词将被复制多少次，也没有说明谓词将以什么顺序应用于容器的元素。本质上，谓词必须像[纯函数](http://en.wikipedia.org/wiki/Pure_function)一样工作；它们必须没有可观察的状态。¹

所以`remove_if`在这里听起来不像是一个合适的算法。诸如将`set`外部存储到函子之类的技巧并不能解决问题；你仍然会调用未定义的行为。

* * *

[1\. 有关更深入的讨论，请参阅Scott Meyers 的[*Effective STL*](http://www.amazon.co.uk/Effective-STL-Specific-Professional-Computing/dp/0201749629/ref=sr_1_1?ie=UTF8&qid=1339941634&sr=8-1)*的第 39 条（“使谓词成为纯函数*”） 。[](http://www.amazon.co.uk/Effective-STL-Specific-Professional-Computing/dp/0201749629/ref=sr_1_1?ie=UTF8&qid=1339941634&sr=8-1)]

* * *

 *## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T13:25:27.410

> 我们是否需要确保谓词函子的可能副本不会破坏我们的逻辑？

是的，您应该假设谓词被复制。在 C++11 中，您可以考虑使用[std::ref 或 std::cref](http://en.cppreference.com/w/cpp/utility/functional/ref)。

~~另一种方法是修改您的`comp`结构以`set`通过引用获取：~~

```
struct comp {
    std::set<int>& s;
    comp(std::set<int> s) : s(s) {}
    bool operator()(int i)
    {
        return !(s.insert(i)).second;
    }
}; 
```

**注意**：我没有就这是否适用于 发表任何声明`remove_if`，我只是在解决包含不应被复制的状态的复制谓词的问题。

**编辑**正如评论中指出的那样，这种方法从根本上被打破了。谓词调用的结果不应依赖于可变状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T13:24:49.563

是的，他们可以无限次地复制参数。比使成员集静态更好的方法是在函子之外创建集并将其作为构造函数参数传递。在内部存储一个指针。*

# c# - c#xml解析中的日期

> ID：11071555
> 
> 赞同：-2
> 
> 时间：2012-06-17T13:16:57.167
> 
> 标签：c#, xml, datetime

我在 XML 中有一个日期：

```
<time>1340517600</time> 
```

如何`DateTime`在 C# 中将其转换为 a？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T13:19:58.460

这是“Sun, 24 Jun 2012 06:00:00 GMT”的[Unix 时间戳](http://en.wikipedia.org/wiki/Unix_time)。

要将 Unix 时间戳转换为 .NET DateTime，请查看以下问题：

*   [如何将 Unix 时间戳转换为 DateTime，反之亦然？](https://stackoverflow.com/questions/249760/how-to-convert-unix-timestamp-to-datetime-and-vice-versa)
*   [在 C# 中解析 unix 时间](https://stackoverflow.com/questions/1674215/parsing-unix-time-in-c-sharp)

这是[Jon Skeet 的解决方案](https://stackoverflow.com/a/1674258/61974)：

```
private static readonly DateTime Epoch = new DateTime(1970, 1, 1, 0, 0, 0, 
                                                      DateTimeKind.Utc);

public static DateTime UnixTimeToDateTime(string text)
{
    double seconds = double.Parse(text, CultureInfo.InvariantCulture);
    return Epoch.AddSeconds(seconds);
} 
```

在线查看它：[ideone](http://ideone.com/XzLWX)

# asterisk - Sox：读取文件失败：抱歉不理解 .wav 大小

> ID：11071556
> 
> 赞同：2
> 
> 时间：2012-06-17T13:17:01.937
> 
> 标签：asterisk, sox

我想将 44,100 Hz、24 位单声道 wav 文件转换为可以用星号播放的格式。我怎样才能使用 sox 做到这一点？当我使用“Sox filename.wav -t raw -r 44100 -s -w -c 1 filename.sln”时，我收到错误“Sox：读取文件失败：抱歉不明白 .wav 大小”。问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:42:11.883

SoX 无法处理 24 位样本。您将不得不为此使用不同的程序。

尝试 sndfile-convert。

[http://itdp.fh-biergarten.de/transcode-users/2005-12/msg00150.html](http://itdp.fh-biergarten.de/transcode-users/2005-12/msg00150.html)

# javascript - 删除选择中的选项

> ID：11071562
> 
> 赞同：1
> 
> 时间：2012-06-17T13:17:37.307
> 
> 标签：javascript, jquery, html

```
<select class="one">
    <option></option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select>
<br />
<select class="one">
    <option></option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select>
<br />
<select class="one">
    <option></option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select>

$(".one").change(function(){

}) 
```

我想制作 - 例如，如果我在第一个位置选择选项 1，那么我其他人选择了这个选项应该被删除。因此，如果我在第一个选择中选择 1，那么在选择第二个和第三个中我只有选项 2 和 3。如果在第二个选择中我选择 2，那么在最后一个选择中我只有选项 3。

我怎样才能做到？我想使用 jQuery。

直播：http : [//jsfiddle.net/9N9Tz/1/](http://jsfiddle.net/9N9Tz/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T13:31:47.377

[如果您需要对某些内容进行排序，请考虑使用诸如jQuery UI](http://docs.jquery.com/UI/Sortable)之类的可排序的东西，因为一堆下拉菜单会为此带来非常糟糕的用户体验。

但要回答你的问题：

```
var $selects = $('.one');
$selects.on("keyup click change", function(e) {
  $selects.not(this).trigger('updateselection');
}).on("updateselection", function(e, data) {
  var $this = $(this);
  $this.children().show();
  $selects.not(this).each(function() {
    var value = $(this).val();
    if (value) {
      $this.children('[value="' + value + '"]').hide();
    }
  });
}); 
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<select class="one">
  <option></option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
</select>
<br />
<select class="one">
  <option></option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
</select>
<br />
<select class="one">
  <option></option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
</select> 
```

隐藏选项在当前的 Firefox 中有效。我不确定旧版浏览器。隐藏但不删除元素可确保您可以更改选择而不会削弱输入元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T13:32:54.193

你去[http://jsfiddle.net/Calou/9N9Tz/6/](http://jsfiddle.net/Calou/9N9Tz/6/)。

当 s 的值发生变化时，只需取这个值，在其他s 中`<select>`搜索具有这个值的s 并将其删除。`<option>``<select>`

```
$(".one").change(function(){
    var val = this.value
    if (val !== '') {
        $(this).siblings().find('option[value=' + val + ']').remove()
    }
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T13:29:48.603

如果您对第二个和第三个选择元素使用不同的类，这将很容易

```
$(".one").change(function(){
    var val = parseInt($(this).val());
    $('.two,.three').find('option:contains('+val+')').remove();  
}); 
```

编辑：
更新代码以申请多项选择。[感谢所有评论员和亚历克斯注意到它]

```
 $(".one").change(function(){
        var val = parseInt($(this).val());
        $(this).siblings().find('option:contains('+val+')').remove();  
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T13:34:20.683

```
// As soon as all selects have one class, you'll have to distinguish them:
$(".one").each(function() { 
    // Now this corresponds to one select (in the loop over all)
    $(this).change(function() {
       // Fix what've done before
       $('option').show();
       // Find every other select, find an option in it
       // that has the same value that is selected in current select
       // (sorry for the description)
       $('.one').not(this).find('option[value=' + $(this).find('option:selected').val() +']').hide();
    });
})​;​ 
```

[jsFiddle](http://jsfiddle.net/9N9Tz/1/)

# html - IE 调整大小时 HTML 列表项换行

> ID：11071564
> 
> 赞同：0
> 
> 时间：2012-06-17T13:17:50.970
> 
> 标签：html, css, menu, resize

我有一个使用 UL 和 LI 创建的水平菜单栏。我遇到的问题是，当在主页（`default.aspx`）上，当 IE 调整大小时，具有长名称的菜单项会优雅地调整大小，但是一旦您单击菜单项并且您在该页面上，菜单就会变得古怪，并且菜单项与长名称换到下一行。

这是我正在谈论的图片。我怎么能不做那个包装，让 UL 在第二张图片中不调整大小？

[![](../Images/e19cbfec2ff4855d18542d45ad885be9.png)](https://i.stack.imgur.com/OAz3r.jpg)

```
#content-container {
  font-family: "Trebuchet MS", Verdana, serif;
  width: 100%;
  margin: 0 auto;
  padding: 0;
}

#content-container ul {
  border-bottom: 18px solid #C93;
  list-style: none;
  margin: 0 -10px;
  ;
  padding-bottom: 1px;
  overflow: visible;
  width: 98%;
}

#content-container ul li {
  float: left;
  padding: 0;
  margin: 0;
  text-align: center;
  width: 14.256%;
}

#content-container ul li a {
  border-left: 1px #fff solid;
  line-height: 36px;
  text-decoration: none;
  color: #ddd;
  background-color: #2E4B68;
  display: block;
  font-size: 1.5em;
}

#content-container ul li a:hover {
  background-color: #C93;
  color: #000;
}
```

```
<link rel="stylesheet" type="text/css" href="/css/dssmenu.css" />
<div id="content-container">
  <ul>
    <li><a id="link1" href="http://mysite/Pages/Training.aspx">Training</a></li>
    <li><a id="link2" href="http://mysite/Pages/Briefings.aspx">Briefings</a></li>
    <li><a id="link3" href="http://mysite/Pages/SecurityDirectives.aspx">Security Directives</a></li>
    <li><a id="link4" href="http://mysite/Pages/DSSInspections.aspx">DSS Inspections</a></li>
    <li><a id="link5" href="http://mysite/Pages/AdverseInformation.aspx">Adverse Information</a></li>
    <li><a id="link6" href="http://mysite/Pages/Travel.aspx">Travel</a></li>
    <li><a id="link7" href="http://mysite/Pages/Resources.aspx">Resources</a></li>
  </ul>
</div>
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T18:23:07.017

你应该考虑 nowrap。

```
#content-container ul li a {
   ....
   white-space: nowrap;
} 
```

# c# - 无法实现设置器（起订量）

> ID：11071565
> 
> 赞同：3
> 
> 时间：2012-06-17T13:17:51.093
> 
> 标签：c#, unit-testing, moq, getter-setter

我有下一个界面

```
 public interface IMyInterface
{
    string this[string key] { get; set; }
} 
```

我想在我的测试中实现get/set

```
var _Nvp = //...
var mockMyInterface = new Mock<IMyInterface>();
        mockMyInterface
            .Setup(e => e[It.IsAny<string>()])
            .Returns((string key) => _Nvp[key]);

        mockMyInterface
            .SetupSet(c => c[It.IsAny<string>()] = It.IsAny<string>())
            .Callback((string key, string value) => { _Nvp[key] = value; })); 
```

但它不起作用..没有错误，没有消息..

```
 var oj = mockMyInterface.Object;
        oj["key"] = "value";
        var value = oj["key"]; 
```

变量值始终为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T14:36:05.320

查看以下[SO 评论](https://stackoverflow.com/a/4293273/1373170)。

`c[It.IsAny<string>()]`起订量在 SetupSet 上的解析似乎存在限制。指定特定键时，它似乎可以工作。

在您的情况下，您可能希望使用内部状态实现您的接口而不是模拟的存根。

# nosql - RavenDB 错误 > 非数据库文件或损坏的数据库

> ID：11071570
> 
> 赞同：2
> 
> 时间：2012-06-17T13:19:14.293
> 
> 标签：nosql, asp.net-mvc-4, ravendb

我第一次运行我的应用程序时一切正常。我可以毫无问题地注册项目。

但是关闭应用程序并再次运行后，会出现以下错误：

![RavenDB 错误 非数据库文件或损坏的数据库](../Images/0932d37895cd72ff865089f3b9cb61e3.png)

> 完整图片在：http: [//i.stack.imgur.com/33Whm.png](https://i.stack.imgur.com/33Whm.png)

## 配置

**忍者**

```
public class RavenDBNinjectModule : NinjectModule
{
    public override void Load()
    {
        Bind<IDocumentStore>().ToMethod(context =>
        {
            NonAdminHttp.EnsureCanListenToWhenInNonAdminContext(8080);
            var documentStore = new EmbeddableDocumentStore { ConnectionStringName="RavenDB", UseEmbeddedHttpServer = true };
            return documentStore.Initialize();
        }).InSingletonScope();

        Bind<IDocumentSession>().ToMethod(context => context.Kernel.Get<IDocumentStore>().OpenSession()).InRequestScope();
    }
} 
```

**连接字符串**

```
<connectionStrings>
    <add name="RavenDB" connectionString="DataDir = ~\App_Data" />
</connectionStrings> 
```

**控制器**

```
private readonly IDocumentSession _documentSession;
public PluginsController (IDocumentSession documentSession)
{
    _documentSession = documentSession;
} 
```

### 它总是我第二次运行应用程序，错误发生！为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:31:49.893

某些东西在创建后正在修改磁盘上的文件。请检查您是否有任何可能导致此问题的东西。

这可能表明您的 HD 存在一些逻辑或物理问题。

# django - Heroku 数据库设置注入 - 如何设置我的 dev django 数据库？

> ID：11071579
> 
> 赞同：30
> 
> 时间：2012-06-17T13:20:25.183
> 
> 标签：django, heroku

在遵循这些关于添加 env 数据库设置的说明后，我正在尝试让我的本地开发 django 应用程序工作。

[https://devcenter.heroku.com/articles/django-injection](https://devcenter.heroku.com/articles/django-injection)

我按照说明进行操作，但是当我的应用程序尝试访问本地数据库时出现以下错误

```
Request Method: GET
Request URL:    http://localhost:8000
Django Version: 1.4
Exception Type: ImproperlyConfigured
Exception Value:    
You need to specify NAME in your Django settings file. 
```

我最初的数据库设置，

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'db',                      # Or path to database file if using sqlite3.
        'USER': 'foo',                      # Not used with sqlite3.
        'PASSWORD': 'bar',                  # Not used with sqlite3.
        'HOST': 'localhost',                
        'PORT': '5432',
    }
} 
```

heroku 文章说将以下内容添加到设置文件中

```
import dj_database_url
DATABASES = {'default': dj_database_url.config(default='postgres://localhost')} 
```

当 DATABASE_URL 在 dev 中不可用时，如何让 dj_database_url.config 使用我的 dev 设置？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-19T11:40:25.797

您可以像这样将您的开发设置添加到默认值...

```
import dj_database_url
DATABASES = {'default': dj_database_url.config(default='postgres://foo:bar@localhost:5432/db')} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-12T15:50:33.313

在你的 settings.py 中使用它：

```
DATABASES = {'default': dj_database_url.config(default=os.environ['DATABASE_URL'])} 
```

在你的 .env 文件中有这个：

```
DATABASE_URL=postgres://localhost/yourdbname 
```

当您使用“foreman start”启动时，它会查看 .env 文件并创建所有这些环境变量，就像在 Heroku 本身上运行一样。键入“heroku config”以确认您设置了 DATABASE_URL，如果您添加了 postgres 数据库插件，您应该这样做。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-17T15:20:39.617

只需在您的操作系统上设置一个环境变量并检查它是否已设置。例如，对于 UNIX 系统：

```
# In ~/.bash_profile
export LOCAL_DEV=true

# In settings.py
import dj_database_url
DATABASES = {'default': dj_database_url.config(default='postgres://localhost')}

if bool(os.environ.get('LOCAL_DEV', False)):
    # Override DATABASES['default'] with your local database configuration 
```

此外，如果您需要在 heroku 空间上[设置环境变量：](https://devcenter.heroku.com/articles/config-vars)

```
heroku config:add MY_VAR='my_value' 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-06T09:41:15.763

我刚试过这个，这是我的代码：

```
import dj_database_url

local_db = 'postgres://django_login:123456@localhost/django_db'
DATABASES = {'default': dj_database_url.config(default=local_db)} 
```

我的数据库名称是“django_db”，用户名是“django_login”，密码是“123456”。

我的代码可以在本地机器和heroku上运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-29T07:51:33.327

> 导入 dj_database_url
> 
> DATABASES = {'default': dj_database_url.config(default='postgres:// **yourusername** : **yourpassword** @ **yourhosturl** :5432/ **yourdbname** ')}

** 如果您使用的是本地数据库，请将粗体字符串替换为您的数据库设置，然后将*yourhosturl*替换为*localhost*

# javascript - 单击输入按钮更新 textarea 内容

> ID：11071580
> 
> 赞同：0
> 
> 时间：2012-06-17T13:20:54.153
> 
> 标签：javascript

我想在输入按钮上按时钟更新 textarea 内容

例如：

```
<input type="button" value="Reply" onclick="update('Ahmed')">
<textarea id="comment_content"></textarea>
//i want set textarea content to @/Ahmed/ onclick on the above button
//example for the javascript function
function update(var){
getElementByID('comment_content') = '@/'.var.'/'
//set the textarea to @/Ahmed/
} 
```

我还有一个问题..我想点击按钮，我想将用户发送到页面末尾（到 new_comment div）

我想要javascript代码，而不是jquery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:23:22.667

```
function update(name){
    document.getElementById('comment_content').value = '@/' + name + '/';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T13:25:41.717

```
function update(val)
{
   document.getElementById('comment_content').value = val;
} 
```

滚动到底部是：

```
window.scrollTo(0,document.body.scrollHeight); 
```

# php - 将 js 数组传递给 PHP

> ID：11071584
> 
> 赞同：2
> 
> 时间：2012-06-17T13:21:35.587
> 
> 标签：php, javascript, jquery, ajax

为什么我不能通过 PHP 中的 $_POST 访问我的数组？我正在尝试使用 jQuery $.post 方法。这是带有您的建议的更正代码：

我的JavaScript：

```
<script type="text/javascript">
var selectedValues;
var serializedValues;
$("td").click(function() {
$(this).toggleClass('selectedBox');

// map text of tds to selectedValues
selectedValues = $.map($("td.selectedBox"), function(obj) {
        return $(obj).text();

});

serializedValues = JSON.stringify(selectedValues);

// $.post('/url/to/page', {'someKeyName': variableName}); //exemple
$.post('handler.php', 
      {'serializedValues' : serializedValues}, 
      function(data) {
        //debug 
     }
);

});

</script> 
```

我的PHP：

```
<?php
if(isset($_POST['serializedValues'])) {

            var_dump($_POST['serializedValues']);
            $originalValues = json_decode($_POST['serializedValues'], 1);
            print_r($originalValues);

        }

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T13:27:37.870

您应该将数组序列化为 json 字符串：

```
serializedValues = JSON.stringify(selectedValues) 
```

并将其传递给 php。然后用 json_decode 解码：

```
$originalValues = json_decode($_POST['serializedValues'], 1); 
```

[http://php.net/manual/ru/function.json-decode.php](http://php.net/manual/ru/function.json-decode.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T13:34:14.237

附带说明；您的 javascript 可以重构为更简单的东西

```
$("td").click(function() {
    $(this).toggleClass('selectedBox');

    // map text of tds to selectedValues
    var selectedValues = $.map($("td.selectedBox"), function(obj) {
            return $(obj).text();
    });

    // $.post('/url/to/page', {'someKeyName': variableName}); //exemple
    $.post('handler.php', 
          {'serializedValues' : JSON.stringify(serializedValues)}, 
          function(data) {
            //debug 
         }
    );
}); 
```

# python - 每个线程具有不同代理的多线程爬虫，正确的方法？

> ID：11071587
> 
> 赞同：0
> 
> 时间：2012-06-17T13:22:33.590
> 
> 标签：python, urllib2, web-crawler, httplib2

我将编写一个计划在大约 10M 页面上运行的多线程爬虫，为了加快速度，我需要同时获取大约 10~ 个不同的页面。

每个爬虫线程将使用不同的代理并将结果推送到队列，另一方面，我将有更多的工作人员从队列中获取结果，解析并将它们插入数据库。

这是正确的方法吗？在队列中保存太多结果会不会有问题？我应该担心锁吗？（使用队列模块）。哪个 HTTP 库最适合我的需求？(httplib2/urllib2)。

创建每个线程时，我应该将请求对象的新实例传递给每个线程，还是应该移动请求对象并在线程中使用其“getPage”函数？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:25:58.187

尝试[请求](http://docs.python-requests.org)库（[代理的文档部分](http://docs.python-requests.org/en/latest/user/advanced/#proxies)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:46:11.753

[Scrapy](http://scrapy.org/)是要走的路。

这是描述如何设置代理中间件以使用多个代理的页面：http: [//mahmoud.abdel-fattah.net/2012/04/16/using-scrapy-with-different-many-proxies/](http://mahmoud.abdel-fattah.net/2012/04/16/using-scrapy-with-different-many-proxies/)

# c# - 检查目录是否没有文件，但它可能包含子文件夹

> ID：11071592
> 
> 赞同：14
> 
> 时间：2012-06-17T13:23:33.637
> 
> 标签：c#

我需要检查目录是否为空。问题是，如果目录包含子文件夹，我想认为该目录为空，无论子文件夹是否包含文件。我只关心我正在查看的路径中的文件。该目录将通过网络访问，这使事情有点复杂。解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-17T13:29:42.200

[`Directory.EnumerateFiles(string)`](http://msdn.microsoft.com/en-us/library/dd383458)方法重载只返回*直接*包含在指定目录中的文件。它不返回其中包含的任何子目录或文件。

```
bool isEmpty = !Directory.EnumerateFiles(path).Any(); 
```

`EnumerateFiles`over的好处`GetFiles`是按需枚举文件的集合，这意味着只要返回第一个文件，查询就会成功（从而避免读取目录中的其余文件）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-17T13:31:07.283

也许是这样：

```
if (Directory.GetFiles(path).Length == 0)...... ; 
```

# applescript - 从 perl 和 ruby 脚本创建一个 applescript？

> ID：11071595
> 
> 赞同：1
> 
> 时间：2012-06-17T13:23:46.227
> 
> 标签：applescript, fasta

[我从http://ncbi.nlm.nih.gov/genomes/FLU/Database/nph-select.cgi#mainform](http://ncbi.nlm.nih.gov/genomes/FLU/Database/nph-select.cgi#mainform)下载蛋白质序列，文件名为 FASTA.FA。对于文件中的每个蛋白质，它包括一个描述行，然后在每 70 个字符后用新行分隔蛋白质序列。

例子：

>CAA47401 B/Yamagata/16/88 1988// NA MLPSTIQTLTLFLTSGGVLLSLYVSASLSYLLYSDILLKFSPTEITAPKVPLDCANASNVQAVNRSATKG MTLLLSEPEWTYPRLSCQGSTFQKALLISPHRFGESRGNSAPLIIREPFIACGPKECKHFALTHYAAQPG >AAB26739 Influenza B virus 1973// NA MLPSTIQTLTLFLTSGGVLLSLYVSASLSYLLYSDILLKFSPTKITAPTMSLDCANVSNVQAVNRSATKE DVPCIGIEMVHDGGKETWHSAATAIYCLMGSGQLLWDIVTGVAMAL

我有一个 ruby​​ 脚本，可以将其转换为更适合 Excel 的文件，其中第一行获取一个单元格，整个蛋白质序列获取另一个单元格（perl 在两者之间创建一个制表符，Excel 将用制表符分隔的内容放在一个新单元格中） .

这是我的脚本：

```
ruby -e 'first_line = true; while line = STDIN.gets; line.chomp!; 
if line =~ /^>/; puts unless first_line; print line[1..-1]; print "\t"; 
else; print line; end; first_line = false; end; puts' < ~/Downloads/FASTA.fa > ~/Downloads/Sequences.xls 
```

在我下载文件的网站上，您可以更改第一行的格式，我在每个描述之间添加一个“+”，然后我有一个将 + 转换为制表符的 perl 脚本（一些描述中有一个空格） ，所以我不能使用空格作为分隔符）。

```
perl -p -i -e "s/\+/\t/g" ~/Downloads/Sequences.xls 
```

这两个 hack 成功地为我创建了一个不错的 excel 文件，并且我从我的 Dock 中的这两个脚本制作了一个 Automator 程序。

但是，现在我的小组希望我从中创建一个 AppleScript。如果我理解正确的话，它并不像只输入“do shell script”然后粘贴脚本那么简单，但您必须格式化实际脚本本身，以便applescript 理解它。有人可以帮我创建这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:53:14.760

我会说你应该将 ruby​​ 脚本制作成一个适当的`.rb`文件，当你使用它时，使用 Ruby 进行制表符替换（或者使用[Spreadsheet gem](http://spreadsheet.ch/)，如果你想要更高级的 Excel 输出，尽管这可能需要一些在别人的电脑上设置）。或者全部在 Perl 中完成。只是为了省去为这些琐碎的搜索/替换内容启动两个运行时的麻烦。就此而言，您可以在 中完成所有操作`sed`，我敢肯定。

无论如何，一旦将脚本作为文件，您可以在 AppleScript Editor 中创建一个新脚本并将其保存为*script bundle*。然后您可以将脚本包含在您的 AppleScript 中。这样，您就知道脚本在哪里，并且如果需要，它们更容易编辑。然后，您可以使用`do shell script`正确的参数调用脚本。简化示例：

```
-- get script path
set rb to POSIX path of (path to me) & "Contents/Resources/Scripts/convert.rb"

-- run script
do shell script "ruby '" & rb & "' < inputfile.fa > outputfile.xls" 
```

如果你愿意，你甚至可以进行一些拖放转换，而不是硬编码路径`~/Downloads/FASTA.fa`（如果有人忘记移动/删除旧下载，它会继续转换那个，并写在同一个xls，因为新的下载将是“FASTA-1.fa”之类的，所以如果可以的话，请避免使用硬编码路径）

# python - Webapp 用户名安全

> ID：11071598
> 
> 赞同：1
> 
> 时间：2012-06-17T13:24:10.220
> 
> 标签：python, web-applications, security

我正在用 Python（和 Flask）创建一个 web 应用程序，用户可以在其中使用他们想要的用户名进行注册。我想在 /user/ 显示他们的个人资料，并在服务器上为每个用户提供一个目录。

确保用户名对于 url 和目录都安全的最佳方法是什么？我读到有人在 base64 中使用 urlsafe 方法，但我想要一个与他们的用户名相关的字符串以便于识别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:06:00.263

这种 URL 安全值的通用术语是[“slug”](https://en.wikipedia.org/wiki/Slug_%28web_publishing%29)，生成一个的过程称为“slugification”或“slugify”。人们通常使用正则表达式来这样做；这是一个（来自[关于该主题的这篇文章](http://flask.pocoo.org/snippets/5/)），仅使用 stdlib 模块：

```
import re
from unicodedata import normalize

_punct_re = re.compile(r'[\t !"#$%&\'()*\-/<=>?@\[\\\]^_`{|},.]+')

def slugify(text, delim=u'-'):
    """Generates an slightly worse ASCII-only slug."""
    result = []
    for word in _punct_re.split(text.lower()):
        word = normalize('NFKD', word).encode('ascii', 'ignore')
        if word:
            result.append(word)
    return unicode(delim.join(result)) 
```

链接的文章还有另外 2 个需要附加模块的替代方案。

# android - 如何在一个 TextView 行的左侧和右侧对齐文本？

> ID：11071599
> 
> 赞同：4
> 
> 时间：2012-06-17T13:24:28.193
> 
> 标签：android, textview, alignment, spannablestring

我想在唯一一行的左侧和右侧的单行 TextView 中设置文本。为此，我使用 SpannableStringBuilder。

这是一个例子：

```
mSpannableStringBuilder.append("leftright");
mSpannableStringBuilder.setSpan(new AlignmentSpan.Standard(Alignment.ALIGN_NORMAL), 0, 3, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
mSpannableStringBuilder.setSpan(new AlignmentSpan.Standard(Alignment.ALIGN_OPPOSITE), 4, 8, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
mTextView.setText(mSpannableStringBuilder, BufferType.SPANNABLE); 
```

但它不起作用......请有任何建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T09:01:07.257

我只是在xml文件中使用如下

`<RelativeLayout android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_alignParentTop="true" android:gravity="center_horizontal" > <TextView android:text="AAA:" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#3b5998" android:layout_marginRight="5px" android:layout_alignParentLeft="true" android:layout_alignParentTop="true" /> <TextView android:id="@+id/maine" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Not Set" android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#0040FF" android:layout_alignParentRight="true" android:layout_alignParentTop="true"
/> </RelativeLayout>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T12:15:06.487

检查您的 xml 标签是否包含“android:textAlignment”或“android:gravity”属性。在积极的情况下，将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T21:22:23.423

它可以用跨度来完成，但需要在左右字符串之间换行，这有点糟糕。如果没有换行，则只能将行左对齐或右对齐，而不能拆分为左右。

# javascript - 远程安装搜索提供程序/加速器 [Internet Explorer 8]

> ID：11071603
> 
> 赞同：0
> 
> 时间：2012-06-17T13:25:15.180
> 
> 标签：javascript, internet-explorer, search-engine

我可以在 Internet Explorer 8 中远程安装搜索提供程序/加速器吗？我不想让用户选择，我想以静默模式安装它。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:18:27.947

是的你可以。希望[这](http://blogofanitadmin.blogspot.cz/2011/05/group-policy-changing-default-search.html)会有所帮助。

# java - 在 LWJGL 中使用键盘时，我不断收到此错误

> ID：11071614
> 
> 赞同：0
> 
> 时间：2012-06-17T13:26:38.620
> 
> 标签：java, lwjgl

我需要你的帮助。我不断收到此异常：-

```
Exception in thread "main" java.lang.IllegalStateException: Keyboard must be created before you can read events
    at org.lwjgl.input.Keyboard.next(Keyboard.java:467)
    at oregon.src.Controller.<init>(Controller.java:15)
    at oregon.client.Oregon.start(Oregon.java:19)
    at oregon.client.Oregon.main(Oregon.java:84) 
```

我不知道如何解决它。我早些时候发布了一个问题，有人帮助了我，但后来导致了这个问题。这是（oregon.src.Controller）的代码：

```
package oregon.src;

import oregon.client.Oregon;

import org.lwjgl.LWJGLException;
import org.lwjgl.input.Keyboard;
import org.lwjgl.opengl.Display;

public class Controller {
    public Oregon oregon;

    public Controller(Oregon oregon) throws LWJGLException {
        this.oregon = oregon;

        while (Keyboard.next()) {
            if (Keyboard.getEventKeyState()) {
                if (Keyboard.getEventKey() == Keyboard.KEY_F11) {
                    oregon.setFullscreen();
                }
            }
        }
    }
} 
```

这是（oregon.client.Oregon）的代码：

```
package oregon.client;

import oregon.src.Controller;

import org.lwjgl.LWJGLException;
import org.lwjgl.input.Keyboard;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;

public class Oregon {
    public static DisplayMode normal = new DisplayMode(640, 640);

    public Controller controller;

    public static boolean fullscreen = false;

    public void start() {
        try {
            controller = new Controller(this);
        } catch (LWJGLException e1) {
            e1.printStackTrace();
        }

        try {
            create();
        } catch (LWJGLException e) {
            stop(e);
        }

        while (!Display.isCloseRequested()) {
            events();
            Display.update();
        }

        Display.destroy();
    }

    public void events() {
        try {
            new Controller(this);
        } catch (LWJGLException e) {
            e.printStackTrace();
        }
    }

    public void setFullscreen() {
        try {
            if (!fullscreen) {
                Display.setFullscreen(true);
                fullscreen = true;
            } else if (fullscreen) {
                Display.setDisplayMode(normal);
                fullscreen = false;
            }
        } catch (LWJGLException e) {
            stop(e);
        }
    }

    public static void create() throws LWJGLException {        
        if (fullscreen) {
            Display.setFullscreen(true);
        } else if (!fullscreen) {
            Display.setDisplayMode(normal);
        }

        Keyboard.create();
        Display.create();
    }

    public void stop() {
        System.exit(0);
        Display.destroy();
    }

    public void stop(Exception e) {
        e.printStackTrace();
        System.exit(0);
        Display.destroy();
    }

    public static void main(String args[]) {
        Oregon oregon = new Oregon();
        oregon.start();
    }
} 
```

如果有人可以帮助我，我将不胜感激。谢谢你。

**编辑：-** 现在我收到此错误。

```
Exception in thread "main" java.lang.IllegalStateException: Display must be created.
at org.lwjgl.input.Keyboard.create(Keyboard.java:319)
at oregon.src.Controller.<init>(Controller.java:19)
at oregon.client.Oregon.start(Oregon.java:19)
at oregon.client.Oregon.main(Oregon.java:84) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T13:30:46.503

正如错误所说 - 你需要创建`keyboard`

```
public Controller(Oregon oregon) throws LWJGLException {
        this.oregon = oregon;

        Keyboard.create(); // <- add this here.

        while (Keyboard.next()) {
            if (Keyboard.getEventKeyState()) {
                if (Keyboard.getEventKey() == Keyboard.KEY_F11) {
                    oregon.setFullscreen();
                }
            }
        }
    } 
```

从[API](http://lwjgl.org/javadoc/org/lwjgl/input/Keyboard.html#create%28%29)：

> “创建”键盘。必须首先创建显示。这样做的原因是键盘有一个可以“聚焦”的窗口。

编辑：似乎您不能同时初始化它们，因此请尝试使用这种方法-`Keyboard`在该 if 语句中进行初始化：

```
 if ( !Keyboard.isCreated() && !getPrivilegedBoolean("org.lwjgl.opengl.Display.nokeyboard") ) {
                try {
                    Keyboard.create();
                } catch (LWJGLException e) {
                    if ( LWJGLUtil.DEBUG ) {
                        e.printStackTrace(System.err);
                    } else {
                        LWJGLUtil.log("Failed to create Keyboard: " + e);
                    }
                }
            } 
```

[这里发布了类似的源代码，似乎工作正常。](http://massapi.com/source/lwjgl-source-2.7.1/src/java/org/lwjgl/opengl/Display.java.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:42:34.263

如果要防止错误，请在主函数中初始化并创建显示，如下所示：

```
public static void main(String args[]) {
    Display.setDisplayMode(new DisplayMode(800, 600));
    Display.create();
    Oregon oregon = new Oregon();
    oregon.start();
} 
```

（在需要/想要的地方添加 try/catch）。这在快速测试中对我有用。

# web - 无法使用 Texttalk 平台的不同 DNS 访问子文件夹

> ID：11071617
> 
> 赞同：1
> 
> 时间：2012-06-17T13:27:03.413
> 
> 标签：web, dns, subdirectory

正如标题所说，当为 Texttalk 平台使用不同的 DNS 时，我无法访问我网站上的子文件夹。

子文件夹是“新的”（例如 www.example.com/new），如果没有 404 屏幕，我将无法访问它。如何使子文件夹可访问，同时仍将 DNS 保留在域中？

谢谢！

# javascript - 在 eq() 中使用变量

> ID：11071627
> 
> 赞同：0
> 
> 时间：2012-06-17T13:28:28.120
> 
> 标签：javascript, jquery

```
index = 5;
alert($('ul li:eq(index) a',context).html()); 
```

此脚本将提醒 : `"Null"`，但是当我更改为：

```
alert($('ul li:eq(5) a',context).html()); // it works 
```

那么这个脚本有什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T13:29:19.623

```
alert($('ul li:eq('+index+') a',context).html()); 
```

因为当您使用`'ul li:eq(index) a'`结果选择器时，它是相同的，即`'ul li:eq(index) a'`.

但是当你使用字符串连接时`'ul li:eq(' + index + ') a'`，结果选择器变成了`'ul li:eq(5) a'`因为 JS 解释器替换了`index`变量的值并构建了新的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T13:29:43.757

您需要使用变量值，而不是`index`字符串...

```
index = 5;
alert($('ul li:eq(' + index + ') a',context).html()); 
```

**更具可读性和更快的版本是：**

如果`context`是 DOM 节点：

```
$(context).find('ul li').eq(index).find('a').html() 
```

如果`context`是一个 jQuery 对象：

```
context.find('ul li').eq(index).find('a').html() 
```

# python - 数组和 if 语句

> ID：11071630
> 
> 赞同：2
> 
> 时间：2012-06-17T13:28:51.433
> 
> 标签：python, arrays, list, if-statement

有人可以帮我处理`if`声明和数组。因此，例如我`0001`在数组中输入的`"1"`是`[3]`. `"working"`如果`1`在 array 上键入，我试图让它打印`[3]`。

这段代码应该更多地解释它：

```
original = raw_input("Type is your input? ")
original_as_array = list(original)
print original_as_array
print original[3]

if (original[3] == 1):
    print "working" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T13:31:06.877

这是因为您将 a`int`与单个字符（类型`str`）进行比较。将您的`if`-statement 更改为：

```
if (original[3] == "1"):
    print "working" 
```

它会起作用。

您的密钥输入由字符 ( `'0001'`) 组成，因此您的比较必须考虑到这一点。

例如，

```
type(original[3])
str

type(1)
int 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T13:32:09.993

首先，字符串已经是数组，因此您不需要将它们转换为列表。在 Python 中，字符串比较不等于整数，所以你应该比较`'1'`。最后，如果没有括号，if 语句看起来更好：D

```
>>> original = raw_input("Type is your input? ")
Type is your input? 0001
>>> if original[3] == '1':
        print "working"

working 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T13:33:42.183

您的问题是您正在根据 str 检查一个 int，这将是 False。请参阅此交互式会话：

```
>>> original = raw_input("Type is your input? ")
Type is your input? 0001
>>> original_as_array = list(original)
>>> print original_as_array
['0', '0', '0', '1']
>>> print original[3]
1
>>> if original[3] == 1:
...     print "working"
... 
>>> print type(original[3])
<type 'str'>
>>> if original[3] == '1':
...     print "working"
... 
working
>>> 
```

# hadoop - Hadoop 1.0.3 推荐的默认 hadoop-metrics2.properties 内容是什么？

> ID：11071639
> 
> 赞同：3
> 
> 时间：2012-06-17T13:30:19.797
> 
> 标签：hadoop, jmx

我一直在寻找一个默认的 hadoop-metrics2.properties 文件，它只是通过 JMX 公开所有可用的指标，但找不到。

1.0.3 附带的当前文件非常空，并且引用了包信息，它没有显示度量类的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-29T22:40:31.660

要启用 JMX 进行远程监控，您无需修改​​ hadoop-metrics2.properties 文件。相反，您必须在启动脚本中添加类似于以下内容的内容：（`HADOOP_NAMENODE_OPTS="-Dcom.sun.management.jmxremote.port=8004"`该示例可以放入您的`hadoop-env.sh`文件中）。

除了公开 JMX 指标之外，您还应该注意，您的所有 JMX 指标都可以通过 HTTP（在本示例中为 namenode）在以下位置获得：[http://namenode-host:50070/jmx](http://namenode-host:50070/jmx)

如果您希望通过本地 JMX 连接查看 Hadoop 指标，则无需进行额外的配置更改。只需`jconsole`在您的本地实例上运行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-03T19:47:25.237

（将以下内容添加到您的 metrics2.properties 中，以便每 10 秒转储一次，该文件将位于 $HADOOP_HOME/logs 目录中）

```
*.sink.file.class=org.apache.hadoop.metrics2.sink.FileSink
*.period=10

namenode.sink.file.filename=./logs/namenode-metrics.out
datanode.sink.file.filename=./logs/datanode-metrics.out
jobtracker.sink.file.filename=./logs/jobtracker-metrics.out
tasktracker.sink.file.filename=./logs/tasktracker-metrics.out 
```

# php - 允许在 PHP 中裁剪和调整图像大小而不使用太多内存的图像功能

> ID：11071640
> 
> 赞同：0
> 
> 时间：2012-06-17T13:30:23.190
> 
> 标签：php, image, function, resize, gd

我已经在我建立的几个网站上使用了这段代码一段时间，这对画廊来说非常有用，但它会占用大量内存，并且我不断在错误日志中收到内存分配错误。有什么可以改变的以使这个脚本更好吗？

```
<?php
// Smart Image Resizer 1.4.1
// Resizes images, intelligently sharpens, crops based on width:height ratios, color fills
// transparent GIFs and PNGs, and caches variations for optimal performance

// Created by: Joe Lencioni (http://shiftingpixel.com)
// Date: August 6, 2008
// Based on: http://veryraw.com/history/2005/03/image-resizing-with-php/

/////////////////////
// LICENSE
/////////////////////

// I love to hear when my work is being used, so if you decide to use this, feel encouraged
// to send me an email. Smart Image Resizer is released under a Creative Commons
// Attribution-Share Alike 3.0 United States license
// (http://creativecommons.org/licenses/by-sa/3.0/us/). All I ask is that you include a link
// back to Shifting Pixel (either this page or shiftingpixel.com), but don’t worry about
// including a big link on each page if you don’t want to–one will do just nicely. Feel
// free to contact me to discuss any specifics (joe@shiftingpixel.com).

/////////////////////
// REQUIREMENTS
/////////////////////

// PHP and GD

/////////////////////
// PARAMETERS
/////////////////////

// Parameters need to be passed in through the URL's query string:
// image        absolute path of local image starting with "/" (e.g. /images/toast.jpg)
// width        maximum width of final image in pixels (e.g. 700)
// height       maximum height of final image in pixels (e.g. 700)
// color        (optional) background hex color for filling transparent PNGs (e.g. 900 or 16a942)
// cropratio    (optional) ratio of width to height to crop final image (e.g. 1:1 or 3:2)
// nocache      (optional) does not read image from the cache
// quality      (optional, 0-100, default: 90) quality of output image

/////////////////////
// EXAMPLES
/////////////////////

// Resizing a JPEG:
// <img src="/image.php/image-name.jpg?width=100&amp;height=100&amp;image=/path/to/image.jpg" alt="Don't forget your alt text" />

// Resizing and cropping a JPEG into a square:
// <img src="/image.php/image-name.jpg?width=100&amp;height=100&amp;cropratio=1:1&amp;image=/path/to/image.jpg" alt="Don't forget your alt text" />

// Matting a PNG with #990000:
// <img src="/image.php/image-name.png?color=900&amp;image=/path/to/image.png" alt="Don't forget your alt text" />

/////////////////////
// CODE STARTS HERE
/////////////////////

if (!isset($_GET['image']))
{
    header('HTTP/1.1 400 Bad Request');
    echo 'Error: no image was specified';
    exit();
}

define('MEMORY_TO_ALLOCATE',    '100M');
define('DEFAULT_QUALITY',       90);
define('CURRENT_DIR',           dirname(__FILE__));
define('CACHE_DIR_NAME',        '/imagecache/');
define('CACHE_DIR',             CURRENT_DIR . CACHE_DIR_NAME);
define('DOCUMENT_ROOT',         $_SERVER['DOCUMENT_ROOT']);

// Images must be local files, so for convenience we strip the domain if it's there
$image          = preg_replace('/^(s?f|ht)tps?:\/\/[^\/]+/i', '', (string) $_GET['image']);

// For security, directories cannot contain ':', images cannot contain '..' or '<', and
// images must start with '/'
if ($image{0} != '/' || strpos(dirname($image), ':') || preg_match('/(\.\.|<|>)/', $image))
{
    header('HTTP/1.1 400 Bad Request');
    echo 'Error: malformed image path. Image paths must begin with \'/\'';
    exit();
}

// If the image doesn't exist, or we haven't been told what it is, there's nothing
// that we can do
if (!$image)
{
    header('HTTP/1.1 400 Bad Request');
    echo 'Error: no image was specified';
    exit();
}

// Strip the possible trailing slash off the document root
$docRoot    = preg_replace('/\/$/', '', DOCUMENT_ROOT);

if (!file_exists($docRoot . $image))
{
    header('HTTP/1.1 404 Not Found');
    echo 'Error: image does not exist: ' . $docRoot . $image;
    exit();
}

// Get the size and MIME type of the requested image
$size   = GetImageSize($docRoot . $image);
$mime   = $size['mime'];

// Make sure that the requested file is actually an image
if (substr($mime, 0, 6) != 'image/')
{
    header('HTTP/1.1 400 Bad Request');
    echo 'Error: requested file is not an accepted type: ' . $docRoot . $image;
    exit();
}

$width          = $size[0];
$height         = $size[1];

$maxWidth       = (isset($_GET['width'])) ? (int) $_GET['width'] : 0;
$maxHeight      = (isset($_GET['height'])) ? (int) $_GET['height'] : 0;

if (isset($_GET['color']))
    $color      = preg_replace('/[^0-9a-fA-F]/', '', (string) $_GET['color']);
else
    $color      = FALSE;

// If either a max width or max height are not specified, we default to something
// large so the unspecified dimension isn't a constraint on our resized image.
// If neither are specified but the color is, we aren't going to be resizing at
// all, just coloring.
if (!$maxWidth && $maxHeight)
{
    $maxWidth   = 99999999999999;
}
elseif ($maxWidth && !$maxHeight)
{
    $maxHeight  = 99999999999999;
}
elseif ($color && !$maxWidth && !$maxHeight)
{
    $maxWidth   = $width;
    $maxHeight  = $height;
}

// If we don't have a max width or max height, OR the image is smaller than both
// we do not want to resize it, so we simply output the original image and exit
if ((!$maxWidth && !$maxHeight) || (!$color && $maxWidth >= $width && $maxHeight >= $height))
{
    $data   = file_get_contents($docRoot . '/' . $image);

    $lastModifiedString = gmdate('D, d M Y H:i:s', filemtime($docRoot . '/' . $image)) . ' GMT';
    $etag               = md5($data);

    doConditionalGet($etag, $lastModifiedString);

    header("Content-type: $mime");
    header('Content-Length: ' . strlen($data));
    echo $data;
    exit();
}

// Ratio cropping
$offsetX    = 0;
$offsetY    = 0;

if (isset($_GET['cropratio']))
{
    $cropRatio      = explode(':', (string) $_GET['cropratio']);
    if (count($cropRatio) == 2)
    {
        $ratioComputed      = $width / $height;
        $cropRatioComputed  = (float) $cropRatio[0] / (float) $cropRatio[1];

        if ($ratioComputed < $cropRatioComputed)
        { // Image is too tall so we will crop the top and bottom
            $origHeight = $height;
            $height     = $width / $cropRatioComputed;
            $offsetY    = ($origHeight - $height) / 2;
        }
        else if ($ratioComputed > $cropRatioComputed)
        { // Image is too wide so we will crop off the left and right sides
            $origWidth  = $width;
            $width      = $height * $cropRatioComputed;
            $offsetX    = ($origWidth - $width) / 2;
        }
    }
}

// Setting up the ratios needed for resizing. We will compare these below to determine how to
// resize the image (based on height or based on width)
$xRatio     = $maxWidth / $width;
$yRatio     = $maxHeight / $height;

if ($xRatio * $height < $maxHeight)
{ // Resize the image based on width
    $tnHeight   = ceil($xRatio * $height);
    $tnWidth    = $maxWidth;
}
else // Resize the image based on height
{
    $tnWidth    = ceil($yRatio * $width);
    $tnHeight   = $maxHeight;
}

// Determine the quality of the output image
$quality    = (isset($_GET['quality'])) ? (int) $_GET['quality'] : DEFAULT_QUALITY;

// Before we actually do any crazy resizing of the image, we want to make sure that we
// haven't already done this one at these dimensions. To the cache!
// Note, cache must be world-readable

// We store our cached image filenames as a hash of the dimensions and the original filename
$resizedImageSource     = $tnWidth . 'x' . $tnHeight . 'x' . $quality;
if ($color)
    $resizedImageSource .= 'x' . $color;
if (isset($_GET['cropratio']))
    $resizedImageSource .= 'x' . (string) $_GET['cropratio'];
$resizedImageSource     .= '-' . $image;

$resizedImage   = md5($resizedImageSource);

$resized        = CACHE_DIR . $resizedImage;

// Check the modified times of the cached file and the original file.
// If the original file is older than the cached file, then we simply serve up the cached file
if (!isset($_GET['nocache']) && file_exists($resized))
{
    $imageModified  = filemtime($docRoot . $image);
    $thumbModified  = filemtime($resized);

    if($imageModified < $thumbModified) {
        $data   = file_get_contents($resized);

        $lastModifiedString = gmdate('D, d M Y H:i:s', $thumbModified) . ' GMT';
        $etag               = md5($data);

        doConditionalGet($etag, $lastModifiedString);

        header("Content-type: $mime");
        header('Content-Length: ' . strlen($data));
        echo $data;
        exit();
    }
}

// We don't want to run out of memory
ini_set('memory_limit', MEMORY_TO_ALLOCATE);

// Set up a blank canvas for our resized image (destination)
$dst    = imagecreatetruecolor($tnWidth, $tnHeight);

// Set up the appropriate image handling functions based on the original image's mime type
switch ($size['mime'])
{
    case 'image/gif':
        // We will be converting GIFs to PNGs to avoid transparency issues when resizing GIFs
        // This is maybe not the ideal solution, but IE6 can suck it
        $creationFunction   = 'ImageCreateFromGif';
        $outputFunction     = 'ImagePng';
        $mime               = 'image/png'; // We need to convert GIFs to PNGs
        $doSharpen          = FALSE;
        $quality            = round(10 - ($quality / 10)); // We are converting the GIF to a PNG and PNG needs a compression level of 0 (no compression) through 9
    break;

    case 'image/x-png':
    case 'image/png':
        $creationFunction   = 'ImageCreateFromPng';
        $outputFunction     = 'ImagePng';
        $doSharpen          = FALSE;
        $quality            = round(10 - ($quality / 10)); // PNG needs a compression level of 0 (no compression) through 9
    break;

    default:
        $creationFunction   = 'ImageCreateFromJpeg';
        $outputFunction     = 'ImageJpeg';
        $doSharpen          = TRUE;
    break;
}

// Read in the original image
$src    = $creationFunction($docRoot . $image);

if (in_array($size['mime'], array('image/gif', 'image/png')))
{
    if (!$color)
    {
        // If this is a GIF or a PNG, we need to set up transparency
        imagealphablending($dst, false);
        imagesavealpha($dst, true);
    }
    else
    {
        // Fill the background with the specified color for matting purposes
        if ($color[0] == '#')
            $color = substr($color, 1);

        $background = FALSE;

        if (strlen($color) == 6)
            $background = imagecolorallocate($dst, hexdec($color[0].$color[1]), hexdec($color[2].$color[3]), hexdec($color[4].$color[5]));
        else if (strlen($color) == 3)
            $background = imagecolorallocate($dst, hexdec($color[0].$color[0]), hexdec($color[1].$color[1]), hexdec($color[2].$color[2]));
        if ($background)
            imagefill($dst, 0, 0, $background);
    }
}

// Resample the original image into the resized canvas we set up earlier
ImageCopyResampled($dst, $src, 0, 0, $offsetX, $offsetY, $tnWidth, $tnHeight, $width, $height);

if ($doSharpen)
{
    // Sharpen the image based on two things:
    //  (1) the difference between the original size and the final size
    //  (2) the final size
    $sharpness  = findSharp($width, $tnWidth);

    $sharpenMatrix  = array(
        array(-1, -2, -1),
        array(-2, $sharpness + 12, -2),
        array(-1, -2, -1)
    );
    $divisor        = $sharpness;
    $offset         = 0;
    imageconvolution($dst, $sharpenMatrix, $divisor, $offset);
}

// Make sure the cache exists. If it doesn't, then create it
if (!file_exists(CACHE_DIR))
    mkdir(CACHE_DIR, 0755);

// Make sure we can read and write the cache directory
if (!is_readable(CACHE_DIR))
{
    header('HTTP/1.1 500 Internal Server Error');
    echo 'Error: the cache directory is not readable';
    exit();
}
else if (!is_writable(CACHE_DIR))
{
    header('HTTP/1.1 500 Internal Server Error');
    echo 'Error: the cache directory is not writable';
    exit();
}

// Write the resized image to the cache
$outputFunction($dst, $resized, $quality);

// Put the data of the resized image into a variable
ob_start();
$outputFunction($dst, null, $quality);
$data   = ob_get_contents();
ob_end_clean();

// Clean up the memory
ImageDestroy($src);
ImageDestroy($dst);

// See if the browser already has the image
$lastModifiedString = gmdate('D, d M Y H:i:s', filemtime($resized)) . ' GMT';
$etag               = md5($data);

doConditionalGet($etag, $lastModifiedString);

// Send the image to the browser with some delicious headers
header("Content-type: $mime");
header('Content-Length: ' . strlen($data));
echo $data;

function findSharp($orig, $final) // function from Ryan Rud (http://adryrun.com)
{
    $final  = $final * (750.0 / $orig);
    $a      = 52;
    $b      = -0.27810650887573124;
    $c      = .00047337278106508946;

    $result = $a + $b * $final + $c * $final * $final;

    return max(round($result), 0);
} // findSharp()

function doConditionalGet($etag, $lastModified)
{
    header("Last-Modified: $lastModified");
    header("ETag: \"{$etag}\"");

    $if_none_match = isset($_SERVER['HTTP_IF_NONE_MATCH']) ?
        stripslashes($_SERVER['HTTP_IF_NONE_MATCH']) : 
        false;

    $if_modified_since = isset($_SERVER['HTTP_IF_MODIFIED_SINCE']) ?
        stripslashes($_SERVER['HTTP_IF_MODIFIED_SINCE']) :
        false;

    if (!$if_modified_since && !$if_none_match)
        return;

    if ($if_none_match && $if_none_match != $etag && $if_none_match != '"' . $etag . '"')
        return; // etag is there but doesn't match

    if ($if_modified_since && $if_modified_since != $lastModified)
        return; // if-modified-since is there but doesn't match

    // Nothing has changed since their last request - serve a 304 and exit
    header('HTTP/1.1 304 Not Modified');
    exit();
} // doConditionalGet()

// old pond
// a frog jumps
// the sound of water

// —Matsuo Basho
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:35:30.647

是的，您可以切换到使用[IMagick](http://php.net/imagick)扩展，它在内存处理方面要好得多。正如我[在一个老问题中所描述的](https://stackoverflow.com/a/2060324/238978)，GD 使用与图像大小成比例的内存并将其完全未压缩地保存在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T13:50:01.523

如果您的服务器安装了 imagemagick，则可以这样做：

```
exec("convert $filename -quality 60 -resize x100 -gravity center -crop 100x100+0+0 +repage $newfilename"); 
```

别的：

[使用 GD2 调整大小和裁剪](http://geryit.com/blog/resize-crop-image-with-gd2-lib/)

希望能帮助到你

# java - 单元测试最佳实践：空构造函数还是模拟对象？

> ID：11071652
> 
> 赞同：2
> 
> 时间：2012-06-17T13:31:36.673
> 
> 标签：java, unit-testing, testing, junit, mocking

假设我要测试这个`ClassA`依赖于难以实例化的Java `ClassB`：

```
public class ClassA
{
    public ClassA()
    {
        String configFile = "config_file.xml";

        // I have to pass configFile to instantiate ClassB.
        // And for example if configFile does not exists in the testing machine?
        // Wouldn't it be easier to have an empty constructor for classB to test ClassA?
        ClassB classB = new ClassB(configFile);
    }

    // ...
} 
```

`ClassB`：

```
class ClassB
{
    ClassB(String configFile)
    {
        // Set up configs.
    }

    // ...
} 
```

`classB`仅出于测试目的在内部创建一个空的构造函数是不好的做法吗？还是为此重写一个简化的模拟更好`ClassB`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T13:53:26.790

[使用Spring](http://www.springsource.org/)或[Guice](http://code.google.com/p/google-guice/)之类的东西，您的情况似乎适合 IoC 和依赖注入。

这种方式`ClassA`只会声明它“需要” 的实例`ClassB`，并且您的 IoC 容器将连接并构造所需的依赖项。

但是，如果您不想以这种方式获取框架，则可以通过从 中提取接口契约来解决它`ClassB`，并`ClassA`依赖它，并在其构造函数中接收该契约的实现。

例如：

```
interface SomeContract {
    void someBehavior();
} 
```

已经`ClassB`实现它：

```
class ClassB implements SomeContract {
{
    ClassB(String configFile)
    {
        // Set up configs.
    }

    void someBehavior() {
        // ...
    }
} 
```

并使用它，例如：

```
public class ClassA
{
    private SomeContract implementation;
    public ClassA(SomeContract implementation)
    {
        this.implementation = implementation;
    }

    // ...
} 
```

这样，在您的单元测试中，您可以传递您在测试中确定的实例，例如 Mock，并且您可以进行相应的测试，而无需修改`ClassB`.

底线是，您应该尽量避免创建额外的构造函数等仅用于测试目的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T13:54:06.230

实际上，使用无参数构造函数并使用 new 关键字创建依赖项会使您的类无法测试。由于您无法从构造函数中注入 ClassB 依赖项，因此您永远无法模拟它并隔离被测代码。您的所有单元测试都必须测试这两个类，这使得它成为一个糟糕的单元测试。相反，您应该将每个依赖项添加为构造函数参数。

这是一个更好的方法：

```
public class ClassA
{
    // use an abstraction instead of a concrete class
    private IClassB _classB;

    public ClassA(IClassB classB) 
    {
        _classB = classB;
    }
} 
```

这样您就可以模拟 IClassB 而不必担心任何 ClassB 实现细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T13:52:43.337

关于我的意见，如果传递的配置文件丢失或不存在，我将为 B 类提供使用默认配置启动的选项。

编辑：众所周知的工件，如 Weld/CDI、Hibernate 验证器和 Arquilluan，也提供了带有空配置文件的默认配置。如果没有提及，则将应用默认值。

# php - css jquery 只显示一个正在播放的

> ID：11071658
> 
> 赞同：0
> 
> 时间：2012-06-17T13:32:36.507
> 
> 标签：php, jquery, css

我有一个查询。通过while循环，我正在显示数据库中的三首随机歌曲并显示它们，但我不想显示所有三首歌曲。

当用户点击第一首歌曲播放图标时，它开始播放，在播放完第一首歌曲后，它会自动转到第二首歌曲，在第二首歌曲播放完毕后，它会转到第三首歌曲。

但是我只想显示一个正在播放的块，例如将显示第一个块，当用户单击第一个块时它将开始播放，但是当第一个完成时它应该向上滚动并且正在播放的第二首歌曲应该对访问者可见。

这是我的php代码：

```
$res6411 = sql_query("SELECT * from `".tb()."stories` where app='music' order by rand() desc limit 3");
while($row6411 = sql_fetch_array($res6411)) {
    $outputmusic .= ' <div id="playlist"> <div href="'.$row6411['var1'].'" style="width: 520px;" class="item">
        <div>
            <div class="fr duration"></div>
            <div class="btn play"></div>
            <div class="title">'.$row6411['title'].'</div>
        </div>
        <div class="player inactive"></div>
    </div>        </div> 
```

这是CSS

```
b{color:#555;font-weight:bold}.duration{font-size:10px;color:#777}.btn.play{width:16px;height:17px;background-image:url(i/play.gif);display:inline-block}.btn.pause{width:16px;height:17px;background-image:url(i/pause.gif?2)}.btn.paused{width:16px;height:17px;background-image:url(i/play.gif?3);display:inline-block}div.player{width:520px;height:14px;margin-top:5px;padding-left:20px}div.player.inactive{margin-top:0px;margin-bottom:0;border-top:dashed 0px #555}.item .title{-vertical-align:middle}.item .btn{display:inline;float:left;margin-right:5px;cursor:pointer} 
```

这是萤火虫的输出。

它显示三个块。我只想显示正在播放的歌曲，当第一首歌曲播放完毕时，它会自动转到第二首，第一次应该向上滚动，第二首歌曲应该显示

```
<div id="playlist" class="playlist1"> <div class="item" style="width: 520px;" href="uploads/userfiles/201206/1110_27_aslha.[Songs.PK]Blue-05-BlueTheme.mp3">
        <div>
            <div class="fr duration"></div>
            <div class="btn play"></div>
            <div class="title">Blue Theme</div>
        </div>
        <div class="player inactive"></div>
    </div><div class="item current" style="width: 520px;" href="uploads/userfiles/201206/110_48_7jngc.ChaleChalo.mp3">
        <div>
            <div class="fr duration"></div>
            <div class="btn pause"></div>
            <div class="title">Chale Chalo</div>
        </div>
        <div class="player"><embed width="380" height="5" flashvars="url=uploads/userfiles/201206/110_48_7jngc.ChaleChalo.mp3&amp;id=playlist1&amp;backgroundColor=16777215&amp;volumeBarWidth=40&amp;progressBarWidth=320&amp;barSpace=20&amp;volumeBarColor=5592405&amp;volumeBarHeight=1&amp;volumeSliderWidth=10&amp;volumeSliderHeight=5&amp;volumeSliderColor=5592405&amp;progressBarHeight=1&amp;progressSliderWidth=10&amp;progressSliderHeight=5&amp;progressSliderColor=5592405&amp;progressBarColor=10066329&amp;bufferColor=5592405" allowscriptaccess="sameDomain" swliveconnect="true" quality="high" name="playerplaylist1" id="playerplaylist1" style="undefined" src="swf/drplayer.swf" type="application/x-shockwave-flash" wmode="transparent"></div>
    </div><div class="item" style="width: 520px;" href="uploads/userfiles/201206/117_49_6l7ag.01KahonaKaho-AmirJama.mp3">
        <div>
            <div class="fr duration"></div>
            <div class="btn play"></div>
            <div class="title">Kaho na Kaho - murder</div>
        </div>
        <div class="player inactive"></div>
    </div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:43:17.720

看来您已经在当前播放的项目上设置了“当前”css 类。您可以通过仅基于此类为 div 设置动画来利用这一点。如果您希望所有非活动项目不可见，请执行以下操作。

在您的 CSS 中：

```
.item{display:none;} 
```

在您的 jquery 中：

//当文档准备好时

```
$(function(){
    $('.item').slideUp();
    $('.item.current').slideDown(); 
}); 
```

//您可以为此动画设置速度/持续时间。在此处查看更多信息：http: [//api.jquery.com/slideDown/](http://api.jquery.com/slideDown/)

确保你在脑海中也引用了 jquery。您可以从 Google 链接到此：[https ://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)

# excel - 使用 VBA 过滤 Excel 数据透视表

> ID：11071662
> 
> 赞同：14
> 
> 时间：2012-06-17T13:33:04.417
> 
> 标签：excel, filter, pivot-table, vba

我现在一直尝试从互联网上复制和粘贴解决方案，以尝试使用 VBA 在 Excel 中过滤数据透视表。下面的代码不起作用。

```
Sub FilterPivotTable()
    Application.ScreenUpdating = False
    ActiveSheet.PivotTables("PivotTable2").ManualUpdate = True
    ActiveSheet.PivotTables("PivotTable2").PivotFields("SavedFamilyCode").CurrentPage = "K123223"
    ActiveSheet.PivotTables("PivotTable2").ManualUpdate = False
    Application.ScreenUpdating = True
End Sub 
```

我想过滤，所以我看到所有具有 SavedFamilyCode K123223 的行。我不想在数据透视表中看到任何其他行。无论以前的过滤器如何，我都希望它能够正常工作。我希望你能帮我解决这个问题。谢谢！

* * *

根据您的帖子，我正在尝试：

```
Sub FilterPivotField()
    Dim Field As PivotField
    Field = ActiveSheet.PivotTables("PivotTable2").PivotFields("SavedFamilyCode")
    Value = Range("$A$2")
    Application.ScreenUpdating = False
    With Field
        If .Orientation = xlPageField Then
            .CurrentPage = Value
        ElseIf .Orientation = xlRowField Or .Orientation = xlColumnField Then
            Dim i As Long
            On Error Resume Next ' Needed to avoid getting errors when manipulating fields that were deleted from the data source.
            ' Set first item to Visible to avoid getting no visible items while working
            .PivotItems(1).Visible = True
            For i = 2 To Field.PivotItems.Count
                If .PivotItems(i).Name = Value Then _
                    .PivotItems(i).Visible = True Else _
                    .PivotItems(i).Visible = False
            Next i
            If .PivotItems(1).Name = Value Then _
                .PivotItems(1).Visible = True Else _
                .PivotItems(1).Visible = False
        End If
    End With
    Application.ScreenUpdating = True
End Sub 
```

不幸的是，我得到运行时错误 91：对象变量或未设置块变量。是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T22:10:21.797

Field.CurrentPage 仅适用于过滤器字段（也称为页面字段）。
如果要过滤行/列字段，则必须循环浏览各个项目，如下所示：

```
Sub FilterPivotField(Field As PivotField, Value)
    Application.ScreenUpdating = False
    With Field
        If .Orientation = xlPageField Then
            .CurrentPage = Value
        ElseIf .Orientation = xlRowField Or .Orientation = xlColumnField Then
            Dim i As Long
            On Error Resume Next ' Needed to avoid getting errors when manipulating PivotItems that were deleted from the data source.
            ' Set first item to Visible to avoid getting no visible items while working
            .PivotItems(1).Visible = True
            For i = 2 To Field.PivotItems.Count
                If .PivotItems(i).Name = Value Then _
                    .PivotItems(i).Visible = True Else _
                    .PivotItems(i).Visible = False
            Next i
            If .PivotItems(1).Name = Value Then _
                .PivotItems(1).Visible = True Else _
                .PivotItems(1).Visible = False
        End If
    End With
    Application.ScreenUpdating = True
End Sub 
```

然后，您只需调用：

```
FilterPivotField ActiveSheet.PivotTables("PivotTable2").PivotFields("SavedFamilyCode"), "K123223" 
```

自然，该字段中的单个不同项目越多，这就会越慢。如果更适合您的需要，您也可以使用 SourceName 而不是 Name。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-17T20:31:45.703

配置数据透视表，使其如下所示：

![在此处输入图像描述](../Images/dfd663ec455cae4d87fb3e1411ecb102.png)

您的代码现在可以简单地在 range("B1") 上工作，并且数据透视表将被过滤为您所需的 SavedFamilyCode

```
Sub FilterPivotTable()
Application.ScreenUpdating = False
    ActiveSheet.Range("B1") = "K123224"
Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-09-18T06:51:40.280

如果你愿意，你可以检查一下。:)

**如果 SavedFamilyCode 在报告过滤器中，请使用此代码：**

```
 Sub FilterPivotTable()
   Application.ScreenUpdating = False
   ActiveSheet.PivotTables("PivotTable2").ManualUpdate = True

   ActiveSheet.PivotTables("PivotTable2").PivotFields("SavedFamilyCode").ClearAllFilters

   ActiveSheet.PivotTables("PivotTable2").PivotFields("SavedFamilyCode").CurrentPage = _
      "K123223"

  ActiveSheet.PivotTables("PivotTable2").ManualUpdate = False
  Application.ScreenUpdating = True
  End Sub 
```

**但如果 SavedFamilyCode 位于列或行标签中，请使用以下代码：**

```
 Sub FilterPivotTable()
     Application.ScreenUpdating = False
     ActiveSheet.PivotTables("PivotTable2").ManualUpdate = True

      ActiveSheet.PivotTables("PivotTable2").PivotFields("SavedFamilyCode").ClearAllFilters

      ActiveSheet.PivotTables("PivotTable2").PivotFields("SavedFamilyCode").PivotFilters. _
    Add Type:=xlCaptionEquals, Value1:="K123223"

  ActiveSheet.PivotTables("PivotTable2").ManualUpdate = False
  Application.ScreenUpdating = True
  End Sub 
```

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-05T15:37:13.633

我想我理解你的问题。这会过滤列标签或行标签中的内容。代码的最后 2 部分是您想要的，但我粘贴了所有内容，以便您可以准确地看到它是如何运行的，从定义的所有内容开始到结束等等。我肯定从其他站点获取了一些代码，仅供参考。

在代码末尾附近，“WardClinic_Category”是我的数据列，位于数据透视表的列标签中。IVUDDCIndicator 也是如此（它在我的数据中是一列，但在数据透视表的行标签中）。

希望这对其他人有所帮助...我发现很难找到以“正确方式”执行此操作的代码，而不是使用类似于宏记录器的代码。

```
Sub CreatingPivotTableNewData()

'Creating pivot table
Dim PvtTbl As PivotTable
Dim wsData As Worksheet
Dim rngData As Range
Dim PvtTblCache As PivotCache
Dim wsPvtTbl As Worksheet
Dim pvtFld As PivotField

'determine the worksheet which contains the source data
Set wsData = Worksheets("Raw_Data")

'determine the worksheet where the new PivotTable will be created
Set wsPvtTbl = Worksheets("3N3E")

'delete all existing Pivot Tables in the worksheet
'in the TableRange1 property, page fields are excluded; to select the entire PivotTable report, including the page fields, use the TableRange2 property.
For Each PvtTbl In wsPvtTbl.PivotTables
If MsgBox("Delete existing PivotTable!", vbYesNo) = vbYes Then
PvtTbl.TableRange2.Clear
End If
Next PvtTbl

'A Pivot Cache represents the memory cache for a PivotTable report. Each Pivot Table report has one cache only. Create a new PivotTable cache, and then create a new PivotTable report based on the cache.

'set source data range:
Worksheets("Raw_Data").Activate
Set rngData = wsData.Range(Range("A1"), Range("H1").End(xlDown))

'Creates Pivot Cache and PivotTable:
Worksheets("Raw_Data").Activate
ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:=rngData.Address, Version:=xlPivotTableVersion12).CreatePivotTable TableDestination:=wsPvtTbl.Range("A1"), TableName:="PivotTable1", DefaultVersion:=xlPivotTableVersion12
Set PvtTbl = wsPvtTbl.PivotTables("PivotTable1")

'Default value of ManualUpdate property is False so a PivotTable report is recalculated automatically on each change.
'Turn this off (turn to true) to speed up code.
PvtTbl.ManualUpdate = True

'Adds row and columns for pivot table
PvtTbl.AddFields RowFields:="VerifyHr", ColumnFields:=Array("WardClinic_Category", "IVUDDCIndicator")

'Add item to the Report Filter
PvtTbl.PivotFields("DayOfWeek").Orientation = xlPageField

'set data field - specifically change orientation to a data field and set its function property:
With PvtTbl.PivotFields("TotalVerified")
.Orientation = xlDataField
.Function = xlAverage
.NumberFormat = "0.0"
.Position = 1
End With

'Removes details in the pivot table for each item
Worksheets("3N3E").PivotTables("PivotTable1").PivotFields("WardClinic_Category").ShowDetail = False

'Removes pivot items from pivot table except those cases defined below (by looping through)
For Each PivotItem In PvtTbl.PivotFields("WardClinic_Category").PivotItems
    Select Case PivotItem.Name
        Case "3N3E"
            PivotItem.Visible = True
        Case Else
            PivotItem.Visible = False
        End Select
    Next PivotItem

'Removes pivot items from pivot table except those cases defined below (by looping through)
For Each PivotItem In PvtTbl.PivotFields("IVUDDCIndicator").PivotItems
    Select Case PivotItem.Name
        Case "UD", "IV"
            PivotItem.Visible = True
        Case Else
            PivotItem.Visible = False
        End Select
    Next PivotItem

'turn on automatic update / calculation in the Pivot Table
PvtTbl.ManualUpdate = False

End Sub 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-10T04:12:26.677

最新版本的 Excel 有一个名为 Slicers 的新工具。在 VBA 中使用切片器实际上比 .CurrentPage 更可靠（在循环多个过滤器选项时有错误报告）。这是一个简单示例，说明如何选择切片器项目（请记住取消选择所有不相关的切片器值）：

```
Sub Step_Thru_SlicerItems2()
Dim slItem As SlicerItem
Dim i As Long
Dim searchName as string

Application.ScreenUpdating = False
searchName="Value1"

    For Each slItem In .VisibleSlicerItems
        If slItem.Name <> .SlicerItems(1).Name Then _
            slItem.Selected = False
        Else
            slItem.Selected = True
        End if
    Next slItem
End Sub 
```

还有像 SmartKato 这样的服务可以帮助您设置仪表板或报告和/或修复您的代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-14T11:04:42.930

在 Excel 2007 及更高版本中，您可以使用更简单的代码和更精确的参考：

```
dim pvt as PivotTable
dim pvtField as PivotField

set pvt = ActiveSheet.PivotTables("PivotTable2")
set pvtField = pvt.PivotFields("SavedFamilyCode")

pvtField.PivotFilters.Add xlCaptionEquals, Value1:= "K123223" 
```

# android - 为 EditText 设置高度不超过中心屏幕的坐标

> ID：11071663
> 
> 赞同：0
> 
> 时间：2012-06-17T13:33:22.473
> 
> 标签：android, android-edittext

我是安卓新手。

现在我需要`EditText`它不超过一定的大小。现在我尝试使用这段代码：

```
 <EditText
        android:id="@+id/editText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="top"
        android:inputType="text|textMultiLine"
        android:minLines="3" /> 
```

layout_height="wrap_content" - 在这种情况下，我的`EditText`高度等于其中的字母数。

但我需要对高度进行限制，例如将高度设置为`EditText`不超过中心屏幕。

我知道我们有一些问题，因为 Android 使用许多不同的屏幕。

我们有没有办法计算这个高度。我的意思是底部边框`EditText`不应该超过屏幕的中心。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:43:59.017

您可以通过添加其他值来限制 EditText

```
android:maxLines 
```

此外，您可以添加

```
android:maxHeight 
```

具有某种 dp 值。

我不会使用其他技术来限制高度。

# sql - SQL 连接查询

> ID：11071664
> 
> 赞同：-1
> 
> 时间：2012-06-17T13:33:24.053
> 
> 标签：sql, join

我是 SQL 初学者，请你帮我写一个查询：

*   查找同时参加一门课程的讲师的姓名
*   找到参加人数最多的 4 门课程

这些表是：

```
- Lecturer [LecturerID (PK), name]
- Course [CourseId (PK), LecturerID, name]
- Participant [ParticipantID (PK), CourseID(PK)] 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:12:27.823

```
select L.name from lecture L join participant P on L.id=P.id 

select C.cid from course C join participant P
ORDER BY P.cid DESC
LIMIT 4; 
```

希望它可以帮助你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T13:48:12.940

如果您想了解连接的工作原理，那么我们帮助您自己创建 SQL 会更有益。连接的基本格式是这样的：

```
SELECT *
FROM table1
JOIN table2 ON table1.joinID = table2.joinID 
```

我会分三个步骤来解决这个问题：

1.  编写将返回连接表数据的基本 SELECT 语句
2.  修改 SQL 只显示“同时参加一门课程的讲师姓名”
3.  再次从步骤 1 中的基本 SELECT 语句开始，修改 SQL 以仅显示“参与者最多的 4 门课程”

这些最终将成为 2 个不同的查询。

如果您想开始使用它并遇到困难，我们可以帮助您，但如果我们只是给您 SQL，它不会帮助您学习它。试着写一点，当你被卡住的时候把你有的东西贴出来。

# objective-c - 用于 iPad 行为的 SplitViewController

> ID：11071665
> 
> 赞同：0
> 
> 时间：2012-06-17T13:33:25.623
> 
> 标签：objective-c, ios, ipad, uisplitviewcontroller, cell

我正在使用 iPad 应用程序中的 UISplitViewController。目前我发现了两个问题： 1.我无法修改主视图的宽度 2.我尝试在主视图中使用自定义单元格，但似乎无法调整单元格的宽度和高度。

您对标准 UISplitViewController 的两个问题有什么想法吗？

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:31:07.647

1) 您不能更改详细视图的大小。请检查以下链接，从该链接您会得到很多信息： [Change the width of Master in UISplitViewController](https://stackoverflow.com/questions/2949067/change-the-width-of-master-in-uisplitviewcontroller)

2) 使用 heightForRowAtIndex 委托方法。从该方法返回 60

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
 {
   return 60.0;
 } 
```

# http - 使用 Restful HTTP API 一次创建两个资源

> ID：11071668
> 
> 赞同：4
> 
> 时间：2012-06-17T13:33:30.497
> 
> 标签：http, rest

我正在为我的应用程序设计一个宁静的 HTTP API。

该应用程序具有包含产品的类别。

我希望用户能够在一个类别中创建产品，如果该类别不存在，那么它将自动创建。因此将没有用于单独创建类别的 API（因为我不希望人们在没有任何产品的情况下创建类别）。

我不太明白我应该如何为此设计 API。通常的方法是：

```
1\. Create a category:
   POST /categories {"name": "Movies"}
2\. Use the new category's id to create a product:
   POST /categories/:id/products {"name": "The Matrix"} 
```

既然我不想把第一个暴露给用户，我应该如何让他们直接创建产品呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T14:07:46.877

产品可能不应该是类别的从属资源。只需使用它所属的类别列表创建新产品，然后使用 /categories 资源来浏览类别。当新类别出现在产品的类别列表中时，会添加新类别作为副作用。

```
1\. Create product:
PUT /product/the_matrix {"name":"The Matrix","category_list":["movies","science fiction"]}

2\. Browse categories:
GET /categories 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T14:15:02.890

看起来您陷入了[RMM](http://martinfowler.com/articles/richardsonMaturityModel.html)的第 2 级。在第 3 级中，超媒体控件允许您定义与资源的有效交互。例如

```
GET / HTTP/1.1 
```

可能会回应

```
HTTP/1.1 200 OK
<catalogue href="/">
    <products href="/products"/>
    <categories href="/categories"/>
</catalogue> 
```

然后你可以点击`products`链接

```
GET /products HTTP/1.1 
```

这可能会回应

```
HTTP/1.1 200 OK

<products href="/products">
    ...
    <create href="/products" method="post">
        <input name="name" type="string" cardinality="required"/>
        <input name="category" type="string" cardinality="required"/>
    </create>
</products> 
```

然后您可以`create`按如下方式创建新产品

```
POST /products HTTP/1.1
Content-Type: application/x-www-form-urlencoded

name=The+Matrix&category=Movies 
```

当服务器收到时，它会创建 Movies`category`如果它不存在，然后将 The Matrix 添加`product`到 Movies `category`。同时，`categories`点击初始响应中的链接可能会提供一种搜索和浏览类别的机制，但它不会包含`create`表单，因为您的业务规则不允许用户创建空类别。

有关更多详细信息，请参阅[实践中的 REST](https://rads.stackoverflow.com/amzn/click/com/0596805829)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T14:05:21.507

是的，您可以让他们直接创建产品

> 我希望用户能够在一个类别中创建产品，如果该类别不存在，那么它将自动创建。因此将没有用于单独创建类别的 API（因为我不希望人们在没有任何产品的情况下创建类别）。

因此，不可能明确地创建类别。但是您需要一些 id 才能在其中创建产品。我建议您遵循解决方案。

您需要一些类别的 id。在某种程度上，客户应该了解类别。因此，您可以选择获取类别列表。

```
GET /categories 
```

无论如何，无论有没有类别列表，您都可以向用户公开 URL 以创建产品：

```
POST /categories/{catIdOrName}/products 
```

在此操作中，您应该检查 {catIdOrName} 是否存在，如果不存在，则在其中创建它和产品。但说真的，类别创建并不清楚。但这样的行为可能是。

我看到的更好的方式：

1.  获取类别列表的操作。
2.  在产品对象中 - 具有类别的属性/字段。无论如何，您应该在类别产品之间建立联系，
3.  在类别对象字段/属性“bool isNew”中
4.  当用户将产品创建到新类别中时，isNew 将为真，并且在 URL 中将使用新类别的特殊 ID 或“新”字符串 ID。

    发布/类别/新/产品

5.  当有请求时，类别已经存在但标记为新的。比返回 409 冲突。

6.  当产品涉及现有类别时，将使用 URI 中的真实类别 ID。

    发布/类别/运动/产品

或者作为替代方案，通过 URI 使类别和产品独立。并且仅通过 POST /products 创建产品，其中设置了 Product 对象类别，并且在执行时将根据需要创建它。在类别资源上，它只能通过 GET 获取类别列表。

# c - C中的结构细节

> ID：11071669
> 
> 赞同：4
> 
> 时间：2012-06-17T13:33:31.433
> 
> 标签：c, structure

我是 C 的新手。我用谷歌搜索了很多关于下面代码的输出。但没有太多帮助。

这是代码：

```
struct str
{
    int i: 1;
    int j: 2;
    int k: 3;
    int l: 4;
};

struct str s;

s.i = 1;
s.j = 2;
s.k = 5;
s.l = 10;

printf(" i: %d \n j: %d \n k: %d \n l: %d \n", s.i, s.j, s.k, s.l);
Output:
i: -1
j: -2
k: -3
l: -6 
```

谁能解释为什么输出如此？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T13:39:32.877

因为您的字段不是`unsigned`，因此它们已签名。

如果您有一个带符号的字段，它的最高有效位表示负数。这意味着负值总是比正值多一个 - 至少在您使用的实现中，它似乎使用二进制补码表示负数。

如果将 a`10`放入 4 位的位字段中，则有`1010`，这是负数 (`-6` )。

如果将 a`5`放入 3 位的位字段中，则有`101`，这是负数 (`-3` )。

如果将 a`2`放入 2 位的位字段中，则有`10`，这是负数 (`-2` )。

如果将 a`1`放入 1 位的位域中，则有`1`，它是负数 ( `-1`)。

和

```
struct str
{
    unsigned int i: 1;
    unsigned int j: 2;
    unsigned int k: 3;
    unsigned int l: 4;
}; 
```

你应该能够实现你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:39:21.397

您使用了一个位域，但没有考虑到符号需要一个位来表示这一事实，从而将范围缩小到您分配给它们的值以下。如果要存储该大小的有符号整数，则需要扩大字段的存储空间。

# java - AbstractMap 对 hashcode 的覆盖是有问题的

> ID：11071673
> 
> 赞同：2
> 
> 时间：2012-06-17T13:33:44.983
> 
> 标签：java, map, hashcode

在阅读 Java 中 AbstractMap 的源代码时，我遇到了这个问题：

```
440      /** 
441       * Returns the hash code value for this map.  The hash code of a map is 
442       * defined to be the sum of the hash codes of each entry in the map's 
443       * <tt>entrySet()</tt> view.  This ensures that <tt>m1.equals(m2)</tt> 
444       * implies that <tt>m1.hashCode()==m2.hashCode()</tt> for any two maps 
445       * <tt>m1</tt> and <tt>m2</tt>, as required by the general contract of 
446       * {@link Object#hashCode}. 
447       * 
448       * <p>This implementation iterates over <tt>entrySet()</tt>, calling 
449       * {@link Map.Entry#hashCode hashCode()} on each element (entry) in the 
450       * set, and adding up the results. 
451       * 
452       * @return the hash code value for this map 
....  
456       */ 
457      public int hashCode() { 
458      int h = 0; 
459      Iterator<Entry<K,V>> i = entrySet().iterator(); 
460      while (i.hasNext()) 
461          h += i.next().hashCode(); 
462      return h; 
463      } 
```

这很有趣，因为它 - 看似偶然 - 排除了哈希码的方式。

如果此方法要按书面方式工作，它会排除使用哈希码，这些哈希码加起来超过 Integer.MAXINT。如果您正在编写自己的哈希码，您可能想知道这一点。

我可以想到至少一个有用的哈希码定义可能会与此冲突，而且它似乎对哈希图中的数据量很敏感。具体来说，map中的数据越多，entrySet越大，hashcode的运行总和也越大。

这似乎真的是一个无证的副作用，也只是一个普通的老坏主意。其目的似乎是利用加法交换律 (a+b == b+a) 来产生具有相同条目的映射所需的相等性，但是哇，多么糟糕的实现啊。

这需要任何覆盖哈希码的人——即任何不想要仅仅对象实例品牌平等的人（== 即大多数人），知道他们不能或不可能知道的事情。第一个是它们的哈希码的累积总和（谁曾想到过这个？？），另一个是将输入到地图中的最大项目数以及如何影响累积总和。

这只是乱七八糟的。任何人有任何见解？hashcode() 派生自类 Object 如果它很重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T13:47:35.813

`int`将[环绕/溢出](http://javapapers.com/core-java/java-overflow-and-underflow/)，因此*超过*Integer.MAX_VALUE**不会**在这里引发异常或导致问题。

这里的主要概念是`hashCode`应该为被认为相同的对象（在程序的特定运行中）产生相同的（整数）值。此代码满足该要求。

请注意，哈希码冲突可能并且偶尔会发生，那就是您在覆盖时总是需要提供有意义的`equals`覆盖`hashcode`。

# c++ - 为什么#include 是在 .h 文件中还是在 .cpp 文件中很重要？

> ID：11071678
> 
> 赞同：0
> 
> 时间：2012-06-17T13:34:54.190
> 
> 标签：c++, xcode

我有一个包含以下内容的 cpp 文件：

```
#include "twitServer.h" 
```

在 twitServer.h 我有：

```
#ifndef twitServer_twitServer_h
#define twitServer_twitServer_h
#include <string>
#include <map>
#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <iostream>
#include <list>
#include <sys/socket.h>
#include <sys/time.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <cstring>
#include <netdb.h>
#include <errno.h>
#include <sstream>
#include <algorithm>
#include <ctime>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
#include "twitUser.h"

using namespace std;

void startServer(string port);

#endif 
```

但是 Xcode 对这一行说：

```
if ((rv = getaddrinfo(NULL, port, &hints, &ai)) != 0) {
    fprintf(stderr, "selectserver: %s\n", gai_strerror(rv));
    exit(1);
} 
```

没有`getaddrinfo`定义...为什么？

如果包含在 cpp 文件中，它工作正常怎么来

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:08:42.660

不知道如何解决你的问题，但按照惯例，你永远不应该包含在头文件中，因为你可能有一天会编写代码，需要你的头文件，但不是所有的包含。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:51:50.833

尝试包含 Ws2tcpip.h 并查看是否可以解决问题。这就是 MSDN 不得不说的（参见需求部分）

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms738520%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738520%28v=vs.85%29.aspx)

另外，让我说这似乎包含了很多头文件，除非你真的知道你在做什么，否则有些不应该匹配。有相当多的 C++ 头文件（iostream（顺便包括两次）、cstdio、cstdlib、算法、列表、字符串、ctime...）与 C 头文件（stdio.h、stdlib.h string.h ）。也许是时候在那里进行一些春季大扫除:)

# c# - 未分配的局部变量之谜

> ID：11071682
> 
> 赞同：-1
> 
> 时间：2012-06-17T13:36:10.193
> 
> 标签：c#, clr

```
 int x;
    if (Q())
        x = 123;
    if (R())
        Console.WriteLine(x); // illegal

    int x;
    if (Q())
        x = 123;
    if (false)
        Console.WriteLine(x); // legal!! 
```

我可以知道为什么第二个是合法的，而前一个是抛出“使用未分配的局部变量”编译时异常吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T13:38:13.783

这告诉编译器下面给出的语句中的 if 条件将永远不会执行，因此未使用变量的约束不适用于它。

```
if (false)
        Console.WriteLine(x); // legal!! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T13:37:22.597

因为第二个被编译器消除为从未执行过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T13:39:19.393

如果 Q() == FALSE 且 R() == true，则 x 未设置，它将尝试使用它。

# login - 无法在 SQL Azure 上打开数据库“master”

> ID：11071685
> 
> 赞同：4
> 
> 时间：2012-06-17T13:36:21.400
> 
> 标签：login, azure-sql-database

标题：连接到服务器

无法连接到 tcp:ohimryXusa.database.windows.net,1433。

附加信息：

你好，

我有一个 SQL Azure 数据库。这个数据库有一个我想用来访问它的用户名/登录名。当我尝试通过 SQL Server Database Management Studio 连接到数据库时，我收到一条错误消息：

```
Cannot open database "master" requested by the login. The login failed.
Login failed for user 'mydbusername'.
This session has been assigned a tracing ID of '00000000-0000-0000-0000-000000000000'.  Provide this tracing ID to customer support when you need assistance. (Microsoft SQL Server, Error: 4060) 
```

我还有其他可以成功连接到数据库的登录名。我尝试在我的数据库上执行以下命令，以确保有一个用户：

```
CREATE USER mydbusername 
```

我收到一条错误消息：

```
Msg 15023, Level 16, State 1, Line 1
User, group, or role 'mydbusername' already exists in the current database 
```

我通过登录主数据库验证了用户的存在。在那里，我运行： SELECT * FROM sys.sql_logins;

我想确保“mydbusername”可以访问数据库。所以我用一个更有特权的帐户登录到我的数据库并运行：

```
EXEC sp_addrolemember 'db_datareader', 'mydbusername'
EXEC sp_addrolemember 'db_datawriter', 'mydbusername'
EXEC sp_addrolemember 'db_owner', 'mydbusername' 
```

消息说：命令成功完成。

此时，我们知道 a) 有一个名为“mydbusername”的用户。b) 有一个名为“mydbusername”的登录名。c) 我们知道“mydbusername”对数据库具有“db_datareader”、“db_datawriter”和“db_owner”权限。

我尝试通过网络上的管理屏幕登录。我能够成功登录并执行查询。但是，当我尝试通过 SQL Server Management Studio 登录时，我收到了上面的消息。我在用

mydbusername@ohimryXusa 用于“登录”字段。我已验证密码正确。我还验证了服务器名称是正确的。我究竟做错了什么？我真的需要这个，因为我从我的代码中得到了错误。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T06:01:45.450

登录失败很可能是由错误的**登录**名/密码组合引起的。请确保您在尝试登录时使用的是现有的**LOGIN**，而不是**USER ！**请注意，当您要使用 SQL Server 进行身份验证时，您必须使用创建的 LOGIN 而不是 USER。您必须找出与您的“mydbusername”关联的登录名。拥有用户很好，并且该用户被添加到不同的角色，但是没有关联登录的 USER 什么都不是。

您可能需要参考[此文档](http://msdn.microsoft.com/en-us/library/windowsazure/ee336235.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-17T19:28:54.873

我知道这是旧线程，但我可能会帮助面临同样问题的其他人......我在 master 数据库中创建了用户而没有授予任何特殊权限 - 这解决了问题。看起来在 Azure 中，属于用户数据库的所有用户也应该出现在主数据库中？？！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-11T16:26:33.090

因为 Azure 为多个数据库使用数据库服务器，所以您不能只登录 Management Studio（连接到对象资源管理器）

这将使您可以查看同一服务器上的每个人的数据库。

为避免这种情况，只需关闭启动时显示的初始登录提示对话框，并在关闭后单击“新查询”。

系统将提示您连接 - 但如果您转到连接设置并选择您的数据库作为初始目录，您将能够从那里编写您的（并且只有您的）数据库的脚本。

没有对象资源管理器 - 但至少您可以直接编写数据库脚本。

# javascript - 对于 SEO，在 HTML 的开头或结尾包含 JS 文件

> ID：11071686
> 
> 赞同：-1
> 
> 时间：2012-06-17T13:37:01.040
> 
> 标签：javascript, html, seo, meta-tags

对于 SEO，我在阅读许多关于是否在页面开头或结尾包含我的 JS 和 CSS 文件的博客时感到困惑？另外，在哪里包含 META 标签？哪个是最好的方法？目前，我编写如下代码：

```
<html>
///meta tags
//include CSS files
<head>
.....
</head>
<body>
....
....
....
//include JS files
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:34:37.250

为了使页面正确呈现，我认为这些文件应始终在正文标记之前声明，以便在实际页面加载之前加载并缓存所有内容。

至于它对 SEO 的影响，我认为唯一会影响的是页面加载速度（假设您调用的文件不返回 404 错误）。CSS文件被缓存，所以它们只需要加载一次，但不确定JS文件是否......

至于你的第二个问题，我很确定哪种方式可以帮助更快地加载页面将是你最好的选择，运行一些测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:47:03.790

你这样做是最好的方式，因为。为什么？让我告诉你

* * *

**CSS 文件：**这些应该在 body 之前加载，因为不应该向用户呈现没有样式的 body-content

* * *

**JS 文件：**这些应该放在最后，因为每个用户在页面加载后都会对页面进行操作，这会使页面更快地对用户可见。

* * *

**元标签**：它们非常适合头部标签。但我个人不使用它们。

# css - CSS 选择器可以引用另一个选择器属性吗？

> ID：11071689
> 
> 赞同：9
> 
> 时间：2012-06-17T13:37:16.000
> 
> 标签：css, css-selectors

我刚刚注意到 Webkit 现在对[CSS Values and Units Module Level](http://www.w3.org/TR/2012/WD-css3-values-20120308)规范有一些支持。我想知道是否有人知道是否有办法从 CSS 选择器中引用另一个 CSS 选择器（或 DOM 样式）属性？

我期待这样[的](https://stackoverflow.com/questions/10751966/import-css-selector-styles-in-another-selector-not-import)事情成为这里的答案。我知道这很可能是当前浏览器实现的情况；但请继续阅读...

例如，在动画可能调整元素大小的情况下（**注意**这`${.element2.width}`是虚构的语法）：

```
<style type="text/css">
.element1 {
  .width: /*-webkit-,-o-,-moz-*/calc(80% - ${.element2.width});
}
.element2 {
  .width: 100px;
}
.element2:hover {
  width: 200px;
  transition: all 0.4s ease-in-out;
}
</style> 
```

在这种情况下，我希望根据 .element2 上的悬停事件触发的过渡重新评估 .element1 的宽度。

我意识到上述规范。只是一个工作草案，但可能引用这种“引用选择器属性”的语法在另一个规范中定义。我还没有发现？或者根本不值得关注（多亏了一个被忽视的解决方法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:31:48.450

我为您链接的问题添加了答案：[https ://stackoverflow.com/a/11071806/137626](https://stackoverflow.com/a/11071806/137626)

*   您可以通过对它们进行分组来将相同的声明块与任意数量的选择器一起使用（选择器用逗号分隔）
*   如果不重写此选择器前面的整个声明块或使用将为您执行此操作的预处理器/宏，您将无法稍后使用不同的 CSS 选择器重用相同的声明块。或者将其添加到上面的现有声明块中

现在，通过 CSS 本身调整元素大小的示例：您可以使用**[CSS3 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)**及其`@media`包含任意数量声明块的规则。这些媒体查询将适应此处的视口宽度。
通过动画和媒体查询混合扩展元素会产生相反的效果，很快就会变得非常复杂（我想知道你在玩什么内容）；如果你想保持简单，那么 JS 是要走的路。有变量、循环、事件；），您可以通过从元素（或任何 CSS 选择器）中添加或删除单个类来启动 CSS3 动画。
CSS3 不会取代 JS（而且你不应该使用 JS 来设置 HTML 样式，因为 JS 没有被激活或无处不在，而且已经有一个很好的后备名为 CSS）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:17:57.013

除了使用诸如[sass/scss](http://sass-lang.com/)或[less](http://lesscss.org/)之类的预编译器之外，我相信您所能做的就是等待或对其进行硬编码。

# glsl - 在 Three.js 着色器上启用扩展

> ID：11071693
> 
> 赞同：11
> 
> 时间：2012-06-17T13:37:45.080
> 
> 标签：glsl, shader, webgl, three.js

如何在 Three.js 着色器上启用扩展？

到目前为止我的代码：

获得扩展：

```
var domElement = document.createElement( 'canvas' );
var gl = domElement.getContext('webgl') || domElement.getContext('experimental-webgl');
gl.getExtension('OES_standard_derivatives'); 
```

在我的着色器上：

```
fragmentShader: [
    "#extension GL_OES_standard_derivatives : enable",
    "code..."
]... 
```

控制台输出：
警告：0:26：不支持扩展“GL_OES_standard_derivatives”
错误：0:32：“dFdx”：找不到匹配的重载函数
错误：0:32：“=”：无法从“const mediump float”转换到“浮动的 2 分量向量”
错误：0:33：“dFdy”：找不到匹配的重载函数
错误：0:33：“=”：无法从“const mediump float”转换为“浮动的 2 分量向量” '

[在github 上](https://github.com/mrdoob/three.js/issues/1621)阅读此问题后，我尝试了以下示例：来自[http://jsfiddle.net/VJca4/](http://jsfiddle.net/VJca4/)我得到了这些错误

警告：0:27：不支持扩展“GL_OES_standard_derivatives”
错误：0:30：“=”：无法从“const mediump float”转换为“float 的 2 分量向量”
错误：0:31：“dFdx”：找不到匹配的重载函数
错误：0:31：'='：无法从'const mediump float'转换为'2-component vector of float'

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T20:43:43.557

您还应该能够做到这一点：

```
renderer.context.getExtension('OES_standard_derivatives'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T14:32:02.327

发现错误。您必须使用渲染器的 dom 元素：

```
var gl = renderer.domElement.getContext('webgl') ||
            renderer.domElement.getContext('experimental-webgl');
gl.getExtension('OES_standard_derivatives'); 
```

# android - 从android上的服务器下载的图像返回null

> ID：11071695
> 
> 赞同：1
> 
> 时间：2012-06-17T13:38:06.487
> 
> 标签：android, image, null, download

我想从服务器下载图像，我可以下载一些图像但不是全部，我不明白为什么。我搜索了整个网络，但没有找到任何解决方案。我的代码是

```
HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection();
drawable= Drawable.createFromStream(conn.getInputStream(), ""); 
```

我也试过这段代码：

```
bitmap = BitmapFactory.decodeStream(new URL(url).openConnection().getInputStream()); 
```

位图和可绘制对象似乎都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:46:34.087

[您是否使用getResponseCode](http://developer.android.com/reference/java/net/HttpURLConnection.html#getResponseCode%28%29)方法检查了 HttpURLConnection 的返回码？可能找不到资源或它包含重定向。

# http - 支持Http的视频服务器

> ID：11071696
> 
> 赞同：0
> 
> 时间：2012-06-17T13:38:11.353
> 
> 标签：http, video, video-streaming

我想设置一个支持 Http 协议的视频点播服务器。就像 Youtube 一样，它托管了很多视频，最终用户可以通过浏览器播放它们（使用 Flash 或 Html 5）。

两个快速的问题，

*   对于大视频文件，我应该将它们放在磁盘还是内存中？Youtube 或其他大型视频网站是如何做到的？不确定将所有视频放入内存是否太贵，将视频放入磁盘是否太慢？
*   是否有任何开源视频托管服务器可供我使用？如果支持蒸汽，那就太好了。

提前谢谢，乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:53:26.007

如果您只想拥有一个链接到视频文件的 HTML 页面 - 没问题，但大多数浏览器会在您的系统甚至考虑播放之前下载整个文件。

如果您想流式传输文件（像 YouTube 和其他人一样），那么您实际上并没有将 HTTP 用于视频本身。HTTP 用于获取有关流的信息，因此您的播放器可以直接流式传输和播放，而无需先下载整个文件。

流式视频使用 RTSP（或其他一些流式协议）来处理音频和视频数据。

最接近“流式传输”视频的 HTTP 协议是使用单个图像帧的服务器推送，每个帧都标记为替换前一帧。并非所有浏览器都可以直接处理此问题，但可能需要 ActiveX 控件或 Java Applet。最初的 QuickTime 是在服务器上实现流式传输协议之前完成的。

**回复：YouTube 如何处理大视频文件**

我怀疑它们在磁盘上，直到需要它们为止。仅在需要时才移入内存。不再需要时从内存中刷新。

**回复：是否有适合我的开源视频服务器**

是的！查看[http://www.videolan.org/](http://www.videolan.org/)

-杰西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:38:22.890

另一种方法是使用 HTTP Live Streaming - HLS - Web 服务器只是一个标准的 httpd 服务器 - 视频/音频在服务器端被预处理为一组比特率播放列表。客户端的逻辑是根据带宽适当的播放列表将媒体检索为一系列 6 秒的文件。

所以 : - 使用文件而不是内存 - 有开源 HLS 分段器 (ffmpeg)

# objective-c - 根据条件分离字符串

> ID：11071699
> 
> 赞同：-1
> 
> 时间：2012-06-17T13:38:19.433
> 
> 标签：objective-c, ios, string, chars, chemistry

我正在为学校创建一个 iOS 项目，它适用于化学反应。

用户将有一个文本字段来插入如下等式：

Fe3O4 + CO = 3FeO + CO2

我的目标是根据某些条件将其分成几部分：

- 查找大写字母，然后测试下一个字符是否也是大写字母（例如：Fe）。- 查找每个元素的最后一个字符后是否有数字。- 找到 + 号表示不同的组件。

当然，我不是要代码，但我会很感激一些帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:50:29.863

您可以用“=”和“+”分隔字符串，然后检查字符是小写字母还是大写字母

检查此代码

```
NSString *str = @"Fe3O4 + CO = 3FeO + CO2";
NSArray *arr = [str componentsSeparatedByString:@"="];

NSMutableArray *allComponents = [[NSMutableArray alloc] init];

for (NSString *component in arr) {
    NSArray *arrComponents = [component componentsSeparatedByString:@"+"];
    [allComponents addObjectsFromArray:arrComponents];
}

for (NSString *componentInEquation in allComponents) {
    for (int i = 0 ; i < componentInEquation.length ; i++) {
        char c = [componentInEquation characterAtIndex:i];
        if ('A' < c && c < 'Z') {
            //Small letter
            NSLog(@"%c, Capital letter", c);
        }
        else if ('0' < c && c < '9') {
            NSLog(@"%c, Number letter", c);
        }
        else if ('a' < c && c < 'z') {
            NSLog(@"%c, Small letter", c);
        }
        else {
            NSLog(@"%c Every other character", c);
        }
    }
} 
```

现在您将不得不进行自己的计算和字符串操作，但您有一个良好的开端，祝您好运 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:33:49.103

参考这个：[isdigit，](http://www.tutorialspoint.com/ansi_c/c_isdigit.htm) [isupper，](http://www.tutorialspoint.com/ansi_c/c_isupper.htm)[islower](http://www.tutorialspoint.com/ansi_c/c_islower.htm)
试试这个：

```
NSString *str = @"Fe3O4 + CO = 3FeO + CO2";
NSArray *allComponents =[str componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"+="]];

for (NSString *componet in allComponents) {
    for (int i=0; i<componet.length; i++) {
        if (isdigit([componet characterAtIndex:i])) {
            NSLog(@"%c is Digit",[componet characterAtIndex:i]);
        }else if(isupper([componet characterAtIndex:i])) {
            NSLog(@"%c is uppercase",[componet characterAtIndex:i]);
        }else if (islower([componet characterAtIndex:i])) {
            NSLog(@"%c is lowercase",[componet characterAtIndex:i]);
        } else{
            NSLog(@"Every other character ");
        }

    }
} 
```

# javascript - 循环通过 jquery data() 对象获取键和值

> ID：11071700
> 
> 赞同：2
> 
> 时间：2012-06-17T13:38:31.487
> 
> 标签：javascript, jquery, json, each

我有一个`data()`包含一些 json 的对象。

有没有办法可以遍历对象并获取每个部分的键和值？

这是我到目前为止所拥有的：

```
function getFigures() {

var propertyValue = getUrlVars()["propertyValue"];

$.getJSON(serviceURL + 'calculator.php?value=' + propertyValue, function(data) {

    figures = data.figures;
    $.each(figures, function(index, figure) {

        $('#figureList').append('<li> index = ' + data.figures.figure + '</li>');

    });

});

$('#figureList').listview('refresh');

} 
```

json 看起来像这样：

```
{"figures":{"value":"150000","completion":"10.00","coal":"32.40","local":"144.00","bacs":"35.00","landRegistry":"200.00","solFee":"395.00","vatOnSolFees":79,"stampDuty":1500,"total":2395.4}} 
```

抱歉，如果它很简单，我是 jQuery 新手，在 SO 上找不到任何有帮助的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T13:42:52.193

你可以像这样得到`key`and`value`

```
$.each(data.figures, function(key, val) {

        console.log('Key: ' + key + '  Val: ' + val)

    });​ 
```

因此，将您的代码更改为

```
 $('#figureList').append('<li>'+ index + ' = ' + figure + '</li>'); 
```

**演示：http:** [//jsfiddle.net/joycse06/ERAgu/](http://jsfiddle.net/joycse06/ERAgu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:43:20.447

参数`index`和`figure`包含参数名称和值。我认为您想将参数连接到字符串中：

```
$('#figureList').append('<li>' + index + ' = ' + figure + '</li>'); 
```

* * *

另一种方法是创建列表项元素并设置它的文本，如果文本包含任何需要编码的字符，这也可以工作：

```
$('#figureList').append($('<li/>').text(index + ' = ' + figure)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T13:50:49.320

```
function getFigures() {

   var propertyValue = getUrlVars()["propertyValue"];

   $.getJSON(serviceURL + 'calculator.php?value=' + propertyValue, function(data) {

       $.each(data['figures'], function(index, val) {

          here grab "val" is key 

          $.each(data['figures'][index], function(col, valc) {

           here grab "col" is value

          }
       }

   } 
```

再见

# python - emacs 中的 python 3

> ID：11071701
> 
> 赞同：15
> 
> 时间：2012-06-17T13:38:34.907
> 
> 标签：python, emacs, python-3.x, emacs23

两天前我换了 Emacs 23，最近让我很头疼，特别是因为我安装了两个 Python 版本，旧的 2.7 和 3。因为我通常想启动 python 3 解释器，如果我可以以某种方式告诉 Emacs 使用 python 3 而不是 2.7。

此外，我找不到有助于突出显示 python3 语法的模块。我目前正在使用 python-mode.el 进行突出显示。

另外，如果有人对哪个模块最适合显示 pydoc 有一个很好的提示，我将非常感激。

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-17T14:31:55.260

如果您正在使用`python-mode.el`，则可以通过设置变量来指定要作为劣等进程执行的二进制文件`py-python-command`，即：

```
(setq py-python-command "python3") 
```

当然，如果二进制文件不同，您需要提供系统上存在的二进制文件的名称来代替`"python3"`。在`python.el`中，要设置的类似变量是`python-python-command`。

就使用而言`pydoc`，有几种可能性。首先，您可以简单地`help()`在 Python 劣质进程内部执行。如果您确实选择了该选项，您可能会发现将以下代码添加到文件中很有用`.emacs`：

```
(setenv "PAGER" "cat") 
```

这是必要的，因为交互式寻呼机（例如 、、`less`等）在劣质进程缓冲区内不能特别好地工作。其次，您可以安装包含文档的 Texinfo 包并使用 Emacs 的浏览器（qv， Emacs 中的[Python 编程](http://www.emacswiki.org/emacs/PythonProgrammingInEmacs)）。最后，如果您选择使用，它包括一个名为的交互式功能，可以按需查找帮助（我怀疑应该有类似的东西）。如果您搜索一下，我相信您也可以找到其他方法和/或第三方包。`more``most``info``python.el``python-describe-symbol``pydoc``python-mode.el`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-06-03T10:56:51.600

*   [RET] = 输入或返回键。
*   M = Meta 或 Alt 键。

如果您想让 Emacs 为您完成繁重的工作，请通过 Emacs 设置对话框让 Emacs 自动设置它。

```
M-x customize-variable [RET] python-shell-interpreter [RET] 
```

应该会出现一个新缓冲区，您可以在其中自定义正在使用的 python 解释器。

右侧的字段`Python Shell Interpreter:`将是您正在使用的当前解释器。在我的情况下，`python`我将其更改为`python3`. 然后移动固化器以选择`Apply and Save`上面的按钮并点击 [RET] 以使 Emacs 尊重新设置。或者，您可以用鼠标单击按钮。

下次打开 Emacs python 解释器时，它将使用您在设置对话框中设置的新 python。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-01T17:05:37.640

在我做了以下事情之后，我得到了这样的行为：在 emacs 中编辑 Python 文件时，Cc Cp 使用 Python3 解释器创建一个新缓冲区。

将以下内容添加到您的 .emacs 文件中：

```
(defcustom python-shell-interpreter "python3"
  "Default Python interpreter for shell."
  :type 'string
  :group 'python) 
```

我之所以尝试这个，是因为我发现

```
(defcustom python-shell-interpreter "python"
  "Default Python interpreter for shell."
  :type 'string
  :group 'python) 
```

在 python.el 中。我假设（i）“python”可以用“python3”代替，（ii）这将覆盖python.el中的定义。

这很可能是有原因的，为什么这是不雅的、粗暴的或其他不好的。我是一个emacs新手。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T17:45:09.900

启动一个 python 解释器

MX python RET

（默认解释器）

MX python版本

其中 VERSION 表示任何已安装的版本

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-15T13:19:07.730

现在是 2020 年 12 月，我使用的是 EMACS 25，否则未针对 python 进行配置，我发现：

```
(setq python-shell-interpreter "python3") 
```

添加到我的 .emacs 文件中完成了这项工作，并导致了一种使用 python3 的相当直观的方式。`C-c C-c`将我的文件发送给解释器（或要求我启动一个新的解释器，并告诉我如何）。

当然，现在 python3 解释器对任何 python 文件都运行，所以 python 2 程序不起作用。

我正在想象一个更美好的世界，emacs 会查看`#!/usr/bin/env python2`我文件顶部的行，并通过某种疯狂的高科技魔法找出应该启动哪个解释器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T11:46:26.393

注意 python-mode.el 知道如何检测所需版本的层次结构

shebang 在 py-execute-THING-PYTHONVERSION 的设置之前 py-shell-name

也将在 shebang 之前，因为命令是

见菜单 PyExec

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-15T11:55:55.520

受@serv-inc 回答的启发，您也可以将

```
(setq python-shell-interpreter "python3") 
```

到您`./.emacs.d/init.el`或您存储配置的位置。

# ruby-on-rails-3 - 如何为特定验证闪烁错误

> ID：11071702
> 
> 赞同：1
> 
> 时间：2012-06-17T13:38:44.773
> 
> 标签：ruby-on-rails-3

当消息不符合验证要求但不知道如何实现时，我正在尝试在表单中闪烁消息。

我有以下设置：

模型/item.rb

```
class Item < ActiveRecord::Base
  attr_accessible :condition, :day, :description, :subtitle, :title

  validates :user_id, presence: true
  validates :title, presence: true
  validates :description, presence: true, length: { minimum: 20 }

  belongs_to :user
end 
```

控制器/items_controller.rb

```
class ItemsController < ApplicationController
before_filter :authenticate_user!

def new
    @item = Item.new
end

def show
    @item = Item.find(params[:id])
end

def create
    @item = current_user.items.build(params[:item])
    if @item.save
        flash[:success] = "Your item has been saved"
        redirect_to root_path
    else

        render 'new'
        end
    end

    def destroy
        @item.destroy
        redirect_back_or root_path
    end

end 
```

最后是views/items/new.html.erb

```
<h1>Items Base</h1>

<div class="row">
    <div class="span6 offset3">

        <%= form_for(@item) do |f| %>

        <%= f.label :title, "Title" %>
        <%= f.text_field :title %>

        <%= f.label :subtitle, "Subtitle" %>
        <%= f.text_field :subtitle %>

        <%= f.label :condition, "Condition" %>
        <%= f.number_field :condition %>

        <%= f.label :description, "Description" %>
        <%= f.text_field :description %>

        <%= f.label :day, "Day" %>
        <%= f.text_field :day %>

        <%= f.submit "List", class: "btn btn-large btn-primary" %>
        <% end %>

    </div>
</div> 
```

本质上，我希望能够显示“描述太短！”的消息。当用户将其留空或少于 20 个字符时，如果留空，则闪烁消息“需要标题”。关于如何最好地实现这一目标的任何想法。此外，如果有人有任何关于使用闪存的良好资源，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T16:27:20.990

这是我的做法：

这是表格：

```
<%= form_for(@client) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <%= f.label :company_name %>
  <%= f.text_field :company_name %> 
  <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
 <% end %> 
```

这是我的 error_messages 部分：

```
<% if object.errors.any? %>
  <div id="error_explanation">
    <div class="alert alert-error">
      The form contains <%= pluralize(object.errors.count, "error") %>.
    </div>
    <ul>
    <% object.errors.full_messages.each do |msg| %>
      <li>* <%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %> 
```

# c# - 尝试写链表

> ID：11071703
> 
> 赞同：-2
> 
> 时间：2012-06-17T13:38:55.847
> 
> 标签：c#

我正在尝试编写链表并遇到一些问题：

这是 intNode 类：

```
public class IntNode
{
    private int _value;
    private IntNode _next;

    public IntNode(int v, IntNode n)
    {
        _value = v;
        _next = n;

    }
    public int getValue()
    {
        return _value;
    }

    public IntNode getNext()
    {
        return _next;
    }

    public void setValue(int v)
    {
        _value = v;
    }

    public void setNext(IntNode n)
    {
        _next = n;
    }
} 
```

我的链表类：

```
public class Set
{
    private IntNode _head;
    private IntNode _current;
    private IntNode _lastNode;

    /**
     * create a new empty Set object
     */
    public Set()
    {
        _head = null;
        _current = null;
        _lastNode = null;
    }

    /**
     * check if the object empty
     * @return true if Set object contain elements, false otherwise
     */
    public bool isEmpty()
    {
        return (_head == null);
    }

    /**
     * add number to Set object
     * @param x - the number to be add 
     */
    public void addToSet(int x)
    {
        if (isEmpty())
        {
            _head = new IntNode(x, _current);
            _head.setNext(_current);
        }
        else
        {
            _current = new IntNode(x, _lastNode);
            _current.setNext(_lastNode);
        }
    }

    /**
     * return a string representation of this Set 
     */
    public String toString()
    {
        String temp = "";

        for (IntNode currentNode = _head; currentNode != null; currentNode.getNext())
        {
            temp += currentNode.getValue() + ",";
        }

        return temp;
    } 
```

我的 addToSet 和 toString 方法有问题，我找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:02:14.587

改变：

```
 /**
     * add number to Set object
     * @param x - the number to be add 
     */
    public void addToSet(int x)
    {
        if (isEmpty())
        {
            _head = new IntNode(x, _current);
            _head.setNext(_current);
        }
        else
        {
            _current = new IntNode(x, _lastNode);
            _current.setNext(_lastNode);
        }
    } 
```

至：

```
 /**
     * add number to Set object
     * @param x - the number to be add 
     */
    public void addToSet(int x)
    {
        if (isEmpty())
        {
            _head = new IntNode(x, null);
        }
        else
        {
            _current = new IntNode(x, null);
            _lastNode.setNext = _current;
            _lastNode = current;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:56:42.470

```
for (IntNode currentNode = _head; currentNode != null; currentNode.getNext())
{
   temp += currentNode.getValue() + ",";
} 
```

您的方法中的 for 循环的问题`toString()`（在旁注中为什么不覆盖`ToString()`？）是您没有重新分配`currentNode`：`currentNode.getNext()`返回一个您没有使用的*新*对象 - 而是将其重新分配给`currentNode`：

```
for (IntNode currentNode = _head; currentNode != null; currentNode = currentNode.getNext())
{
   temp += currentNode.getValue() + ",";
} 
```

这段代码看起来更像 Java 而不是 C# - 研究使用属性，遵守命名约定并使用特定于语言的习语。

# amazon-ec2 - 快速 AWS 自动扩展

> ID：11071708
> 
> 赞同：7
> 
> 时间：2012-06-17T13:39:45.280
> 
> 标签：amazon-ec2, amazon-web-services, puppet, ec2-ami, autoscaling

您如何配置 AWS 自动扩展以快速扩展？我已经使用 ELB 设置了一个 AWS 自动缩放组。一切运行良好，只是在添加新实例并上线之前需要几分钟时间。我在一篇关于 Puppet 和自动缩放的帖子中遇到了以下内容：

> 如果您用于一组节点的 AMI 已经是最新的，则扩展时间可以从几分钟减少到几秒钟。

[http://puppetlabs.com/blog/rapid-scaling-with-auto-generated-amis-using-puppet/](http://puppetlabs.com/blog/rapid-scaling-with-auto-generated-amis-using-puppet/)

这是真的？扩展时间可以减少到几秒钟吗？使用 puppet 会增加性能吗？

我还读到较小的实例比较大的实例启动得更快：

> 小型实例 1.7 GB 内存、1 个 EC2 计算单元（1 个虚拟内核和 1 个 EC2 计算单元）、160 GB 实例存储、32 位平台，基本安装 CentOS 5.3 AMI
> 
> 从实例启动到可用性的时间量：5 到 6 分钟 us-east-1c
> 
> 大型实例 7.5 GB 内存，4 个 EC2 计算单元（2 个虚拟内核，每个内核有 2 个 EC2 计算单元），850 GB 实例存储，64 位平台，基本安装 CentOS 5.3 AMI
> 
> 从启动实例到可用的时间：
> 11 到 18 分钟 us-east-1c
> 
> 两者都是使用亚马逊工具通过命令行启动的。

[http://www.philchen.com/2009/04/21/how-long-does-it-take-to-launch-an-amazon-ec2-instance](http://www.philchen.com/2009/04/21/how-long-does-it-take-to-launch-an-amazon-ec2-instance)

我注意到这篇文章很旧，我的 c1.xlarge 实例肯定不会花费 18 分钟来启动。尽管如此，配置具有 50 个微型实例的自动扩展组（具有 100% 容量增加的扩展策略）是否比具有 20 个大型实例的组更有效？或者可能创建两个自动缩放组，一个用于快速启动时间的微型实例和一个用于在几分钟后添加 CPU grunt 的大型实例？在其他条件相同的情况下，t1.micro 上线速度比 c1.xlarge 快多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:30:02.277

您可以通过使用“--cooldown”值（以秒为单位）来增加或减少自动扩缩器的反应时间。关于要使用的实例类型，这主要取决于应用程序类型，并且应该在密切的性能监控和生产调整之后做出关于这个主题的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T00:59:14.650

> 如果您用于一组节点的 AMI 已经是最新的，则扩展时间可以从几分钟减少到几秒钟。这样，当 Puppet 在启动时运行时，它只需很少（如果有的话）使用节点分配的角色配置实例。

这里的建议是让您的 AMI（操作系统的快照）尽可能保持最新。这样，当自动缩放启动一台新机器时，Puppet 不必像通常在空白 AMI 上那样安装大量软件，它可能只需要拉一些更新的应用程序文件。

根据您的 Puppet 脚本所做的工作量（apt-get 安装、编译软件等），这可以为您节省 5-20 分钟。

您必须担心的另外两个因素是：

*   您的负载均衡器需要多长时间才能确定您需要更多资源（例如，规定“当 CPU 超过 90% 超过 5 分钟时应添加新机器”的策略）响应速度较慢，并且更有可能导致超时“当 CPU 超过 60% 超过 1 分钟时，应添加新机器”）
*   预置一个新的 EC2 实例需要多长时间（较小的实例类型往往需要较短的预置时间）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-13T18:04:58.670

ASG 的响应速度取决于三件事：

**1\. 步**长——增加多少%或固定数字——大步长——可以快速增加。ASG 将一次性启动整个 Step

**2\. 冷却期**- 这适用于*下一次增加可能发生的“***多快**” 。如果之前的增加步骤仍在定义的冷却时间（秒）内，ASG 将等待并且不采取行动进行下一次增加。有一个小的冷却时间将使下一步更快。

 ***3 AMI 类型 -** AMI 启动需要多长时间，这取决于 AMI 的类型 - 许多因素都在起作用。一切都一样 完全烘焙的 AMI 启动速度更快*

# .htaccess - 使用查询处理重定向 404 url

> ID：11071709
> 
> 赞同：0
> 
> 时间：2012-06-17T13:40:07.787
> 
> 标签：.htaccess, http-status-code-404

处理所有查询`site.com/p/QUERY`，但有些用户错误地使用`site.com/QUERY`请求，他们看到 404 错误页面。

如何重定向`site.com/QUERY`到`site.com/p/QUERY`避免 404 错误？

在 htaccess 教程和问题中没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:44:59.407

用这个

```
<Files index.php>
order allow,deny
deny from all
</Files>
# Turn on URL rewriting
RewriteEngine On
Options +FollowSymLinks
# Installation directory
RewriteBase /
# Allow these directories and files to be displayed directly:
RewriteCond $1 !^(index\.php|robots\.txt|favicon\.ico|img|js|css|media)
# Rewrite all other URLs to /p/URL
RewriteRule ^([^/]+)$ /p/$1  [PT,L]
# Rewrite all other URLs to /p/URL or /p/some.html?var=1&var2=2
RewriteRule ^(.*)$ /p/$1  [PT,L] 
```

# google-apps-script - 检查复选框是否被选中

> ID：11071711
> 
> 赞同：1
> 
> 时间：2012-06-17T13:40:25.743
> 
> 标签：google-apps-script

我还没有找到任何用于检查复选框是否设置为真或假的内置函数，isChecked() 不可用是应用程序脚本（如果我是对的）。关于如何找到它的任何想法，或者我们将有一个值更改处理程序来计算值更改的次数并查找它是否被检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:07:31.667

我可能是错的，但是我相信复选框状态存在问题，即使它的状态看起来像布尔值，它的行为不像布尔值而是像字符串

1.  如果您在电子表格 e.parameter.myCheckBox 中打印，您将得到 TRUE 或 FALSE

2.  如果您在电子表格中打印 e.parameter 您将获得整个对象并看到 myCheckBox=true 或 myCheckBox=false

3.  但是， if (e.parameter.myCheckBox) 将始终返回 True

4.  我正在使用的解决方法是： if (e.parameter.myCheckBox == "true") 将返回实际的 myCheckBox 状态

以防万一，我正在问题跟踪器中打开一张新票，希望这会对您有所帮助

附言。经谷歌确认，e.parameter.myCheckBox 是一个字符串，而不是布尔值

如果你想将它用作布尔值，它就像 (e.parameter.myCheckBox == "true")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T16:00:43.910

您应该为您的复选框指定一个名称，以便您可以使用 e.parameter.checkboxname 在处理程序函数中检索其值：该值是布尔值。

```
var chkmode = app.createCheckBox("description").setName("chk1").setId("chk1") 
```

如果需要，您可以使用 ID 从处理函数（或任何其他函数）修改其状态（getElementbyId()）

请注意，根据您的需要，处理程序可以位于复选框本身（更改处理程序）或 UI 中的任何其他元素上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T13:46:26.800

```
var handler = app.createServerClickHandler('tellStatus'); 
```

然后（例如在标签中显示它）

```
function tellStatus(e){
  var app = UiApp.getActiveApplication();
  app.getElementById('yourStatusLabel').setText('Checkbox checked: ' + e.parameter.yourCheckbox)
  return app;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-21T03:58:28.023

您应该使用如下所示的处理程序函数。

我从[https://sites.google.com/site/scriptsexamples/learn-by-example/uiapp-examples-code-snippets/check-box找到了示例](https://sites.google.com/site/scriptsexamples/learn-by-example/uiapp-examples-code-snippets/check-box)

```
if(e.parameter['checkbox_isChecked_'] == 'true'){
      itemsSelected+= e.parameter['checkbox_value_']+',';
    } 
```

# r - 格子中的`coplot`替代品

> ID：11071712
> 
> 赞同：2
> 
> 时间：2012-06-17T13:40:35.790
> 
> 标签：r, lattice

我正在尝试复制*S 中的统计模型中*给出的示例。这是书中给出的代码。

```
data(ethanol)
attach(ethanol)
E.intervals <- co.intervals(E, number = 9, overlap = 1/4)
coplot(NOx ~ C | E, given.values = E.intervals,
                    panel = function(x,y) panel.smooth(x,y,degree = 1, span = 1)) 
```

此代码仅适用于`S`，因为`panel.smooth`函数没有`degree`参数。所以我用

```
coplot(NOx ~ C | E, given.values = E.intervals,
                    panel = function(x,y,...) panel.smooth(x,y, iter = 1, span = 1)) 
```

我想使用`lattice`图形包，因为它具有`panel.loess`类似于`panel.smooth`from`S`的功能，但我没有找到类似于`coplot`. 我认为是`xyplot`。如果是的话，你能建议我等效于的参数`given.values`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:07:30.143

这是它的完成方式，它并不完全相同，但非常接近。

```
require(gridExtra)
require(lattice)
data(ethanol)
E.intervals <- equal.count(E, number = 9, overlap = 1/4)
plot1 <- plot(E.intervals)
plot2 <- xyplot(NOx ~ C | E.intervals, data = ethanol, span = 1, layout = c(3,3),
                panel = function(x,y,span){
                panel.xyplot(x, y);
                panel.loess(x, y, span);
               })
grid.arrange(plot1,plot2, nrow=2) 
```

不同的是上图的高度，它应该更小。

# ajax - 如何为启用 Ajax 的 WCF Web 服务配置 HTTPS 和 HTTP 绑定

> ID：11071714
> 
> 赞同：3
> 
> 时间：2012-06-17T13:41:08.430
> 
> 标签：ajax, wcf, sharepoint-2010, https, wcf-binding

我在访问 https 站点中的 Web 服务时遇到了错误。我认为这是一个配置错误，因为它正在寻找一个 https 绑定。

这是 Web 服务的 web.config：

```
<?xml version="1.0"?>
<configuration>
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
<services>
  <service name="WebService.ListViewWebService" behaviorConfiguration="WebService.ListViewWebServiceBehavior">
    <endpoint address=""
              behaviorConfiguration="WebService.ListViewWebServiceAjaxBehavior"
              binding="webHttpBinding"
              contract="WebService.IListViewWebService"/>
    <endpoint address="https://win-d741qhlbivf:13241/services/DPT/_vti_bin/DPT.WebService/ListViewWebService.svc"
              behaviorConfiguration="WebService.ListViewWebServiceAjaxBehavior1"
              binding="webHttpsBinding"
              contract="WebService.IListViewWebService2"/>
     <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />         
  </service>
</services>
<bindings>
    <basicHttpBinding>
        <binding name="webHttpBinding">
            <security mode="None" />
        </binding>
        <binding name="webHttpsBinding">
            <security mode="Transport" />
        </binding>
    </basicHttpBinding>
</bindings>
<behaviors>
  <endpointBehaviors>
    <behavior name="WebService.ListViewWebServiceAjaxBehavior">
      <webHttp/>
    </behavior>

  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="WebService.ListViewWebServiceBehavior">
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <serviceMetadata httpGetEnabled="true" />
    </behavior> 

  </serviceBehaviors>
</behaviors>
</system.serviceModel>
</configuration> 
```

我在这里先向您的帮助表示感谢。

另外，我不确定这是否与问题有关，但托管在云环境中的 Web 应用程序...我需要为此进行特殊配置吗？...

再次感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T17:31:38.677

此配置将响应 HTTP 和 HTTPS 中的请求，请注意端口是不同的，并且必须与主机的期望相匹配（在这种情况下，它恰好是 iis）

```
<appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
</appSettings>
<system.web>
    <compilation debug="true" />

        <customErrors mode="Off"/>
    </system.web>

<system.serviceModel>
    <serviceHostingEnvironment minFreeMemoryPercentageToActivateService="0" />

    <services>
        <service name="KPIGetter_Library.KPIGetter">

            <endpoint address="" 
                    behaviorConfiguration="restfulBehaviour"
                    binding="webHttpBinding" 
                    bindingConfiguration="webHttpBindingWithJsonP"
                    contract="KPIGetter_Library.IKpiGetter" />

            <endpoint address="" 
                    behaviorConfiguration="restfulBehaviour"
                    binding="webHttpBinding" 
                    bindingConfiguration="webHttpsBindingWithJsonP"
                    contract="KPIGetter_Library.IKpiGetter" />

            <host>
                <baseAddresses>
                    <add baseAddress="http://hodbd05:8000/kpigetter" />
                    <add baseAddress="https://hodbd05:8001/kpigetter" />
                </baseAddresses>
            </host>
        </service>
    </services>

    <behaviors>
        <endpointBehaviors>

            <behavior name="restfulBehaviour">
                <webHttp/>
            </behavior>
        </endpointBehaviors>

        <serviceBehaviors>
            <behavior>
                <serviceDebug includeExceptionDetailInFaults="true" />
            </behavior>
        </serviceBehaviors>
    </behaviors>

    <protocolMapping>
        <add binding="webHttpBinding" scheme="http" />
    </protocolMapping>

    <bindings>
        <webHttpBinding>
                <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true">
                     <security mode="None" />
                </binding>

                <binding name="webHttpsBindingWithJsonP" crossDomainScriptAccessEnabled="true">
                     <security mode="Transport" />
                </binding>
        </webHttpBinding>

    </bindings>
</system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:57:44.590

我的教程之一将帮助您：

[http://netpl.blogspot.com/2010/05/how-to-programmatically-configure-ssl.html](http://netpl.blogspot.com/2010/05/how-to-programmatically-configure-ssl.html)

本教程从声明性配置开始，然后展示如何以编程方式创建绑定/端点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T15:33:52.373

一个重要的问题是您应该为启用 ajax 的 WCF 服务使用 webHttpBinding 而不是 basicHttpBinding。

在这里可以找到一个简单的工作示例：[Scott 在 asp.net 上的博客](http://weblogs.asp.net/srkirkland/wcf-bindings-needed-for-https)

# java - 两个类之间的 ActionListener

> ID：11071722
> 
> 赞同：4
> 
> 时间：2012-06-17T13:42:41.793
> 
> 标签：java, swing, model-view-controller, actionlistener, japplet

导入 javax.swing.*；

类标签扩展 JFrame{ JPanel pnl = new JPanel();

```
ImageIcon duke = new ImageIcon("duke.png");

JLabel lbl1 = new JLabel(duke);
JLabel lbl2 = new JLabel("Duke is the friendly mascot of Java technology.");
JLabel lbl3 = new JLabel ("Duke", duke, JLabel.CENTER);

public Labels(){

    super("Swing Labels");
    setSize(1000 , 800);
    setDefaultCloseOperation( EXIT_ON_CLOSE);
    add(pnl);
    setVisible(true);

    lbl1.setToolTipText("Duke - the Java Mascot");

    lbl3.setHorizontalTextPosition(JLabel.CENTER);
    lbl3.setVerticalTextPosition(JLabel.BOTTOM);

    pnl.add(lbl1);
    pnl.add(lbl2);
    pnl.add(lbl3);

}
    public static void main(String [] args){
        Labels gui = new Labels();
    } 
```

}

如果我想把它用作 JApplet 怎么办？必须做什么？很难改变吗？

在 JFrame 上运行的东西与在 JApplet 上运行的东西是一样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T13:48:54.263

正如我在[您之前的一个问题](https://stackoverflow.com/a/11064580/522444)中建议的那样，您应该重新组织您的程序以符合[模型-视图-控制器](http://www.leepoint.net/notes-java/GUI/structure/40mvc.html)模式或其变体之一，因为这将允许您干净地分离出控制代码（由来自 GUI 的 ActionListener）。有关 MVC 程序的示例，请查看我在[这个最近的答案](https://stackoverflow.com/a/11066221/522444)中的建议和代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T13:58:40.317

好吧，首先检查一下：[另一个类中的动作侦听器 - java](https://stackoverflow.com/questions/4985507/action-listener-in-another-class-java)

现在您所要做的就是根据您的需要对其进行编辑，`actionPerformed(ActionEvent ae)`然后您将通过使用访问器/获取方法访问数据来获取 controlB.java 类中的值，或者使 Actionlistener 类扩展 ControlB 以便它可以访问到它的所有公共数据，然后一旦你有了这些值，在启动期间或使用 mutator/set 方法将它们传递给 Graph.java？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-17T14:09:32.813

某些类，如果您只允许来自 JPanel B 的输入，最好是 B 的内部类，必须实现 ActionListener。必须将 ActionListener 添加到 JTextField：

```
myInputTextField.addActionListener(theActionListenerIAmGoingToWrite). 
```

那 ActionListener 必须定义 actionPerformed() 像这样：

```
String text = inputTextField.getText();
Integer inputInteger = Integer.getInteger(text).toInt(); 
graph.doStuffWithIntegerInput(inputInteger); 
```

要回答的设计问题是：

ActionListener 是匿名内部类吗？如果您只想将它​​与相互了解的 graph 和 B 的特定实例一起使用，那么就这样吧。如果是这样，它必须从其包含的类中获取对 Graph 实例的引用，这意味着 B 有这样一个实例来提供它。

ActionListener 的动作是否可以在其他地方重用？“输入数字”小部件会出现在其他 JPanel 的其他地方吗？如果是这样，让它成为一个独立的类。您仍然需要对图形的引用，因此要么将图形作为 constrcutor 参数和/或具有 setGraph 方法，因为它需要以某种方式了解图形实例，以便它可以向其发送消息。

完毕！

**编辑 2**

好的，让我们将您拥有的内容映射到 MVC 框架。因此，您的视图由 Graph 类和您的 B 类以及您的 textFields 组成。

现在包含在您的图表类中，您还拥有要绘制图表的数据。这就是您定义的 start、finish、x 和 y 变量。要成为 MVC 领域的好公民，您必须将它们拉出并将它们包含在单独的对象 b/c 中，它们构成了您的图形**模型**。基本上，模型是您希望呈现的一组事实，无论它们将如何呈现，而**视图**则是与将内容绘制到屏幕上有关的所有代码。

因此，此模型对象将是一个简单的数据对象，其中包含您定义的所有变量的 getter 和 setter，并将在构造函数中或通过 Graph 对象上的 setter 传递给 Graph 对象。

通过创建这个 GraphData 对象，您已经将视图、Graph 从它的模型 GraphData 对象中分离出来。

对于更复杂的 Graph，您实际上会在 GraphModel 中指定要创建的 Graph 对象的“类型”、轴名称、要绘制的线类型，诸如此类，但这对于你有什么。

好的，现在您有了 Graph 和 GraphData 对象以及将它们组合在一起的某种方法。

接下来让我们看看你的 B 类。因为它是一个 JPanel，一个视图，它本质上是一个聚合器和它所包含的视图的呈现器。这些将是 Graph 和 JTextFields。因此，您可以按原样添加它们，指定布局。

所以一个假设的重构是这样的：

创建主程序。在那个主要创建：JTextFields、ActionListener、JPanel (B)、Graph 和 GraphModel。

将 GraphModel 与 Graph 关联。

将 Graph 与 JPanel 关联。

将 ActionListener 与 JJtextField 关联

将 JTextField 与 JPanel 关联

就编写 ActionListener 而言，只需使其成为自己的类，这是最容易编写和理解的。因此：

```
public class MyTextFieldListener implements ActionListener
{
   private Graph graph;
   public   MyTextFieldListener(Graph graph)
   {   
      this.graph = graph;
   }// construtor

   public void actionPerformed (ActionEvent ae) 
  {
      String text =  ((JTextField)ae.getSource()).getText();
      Integer inputInteger = Integer.getInteger().(text).toInt();
      graph.doStuffWithIntegerInput(inputInteger); 
  } // actionPerformed
}// class 
```

现在一个复杂的问题可能是，在您获得所有四个文本字段的信息之前，您无法更新图表。有不同的方法可以更改此代码以适应它，但这是您需要去哪里的基本想法。

高温高压

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T23:20:59.033

好的。让我们谈谈您的 RangeXY 对象。它的目的是什么？我问是因为它似乎不需要来自 JTextFields 的任何东西，即来自用户输入。

实际上，在您调用 graph.doStuffWithIntegerInput() 的地方，您没有使用来自用户的整数输入，这是来自文本字段的输入。您正在使用（这是错误的）传入 RangeXY 的构造函数的 int。然后你（这里是“完全错误”的部分）将该 int 提供给 Integer 静态方法 getInteger()。实际上，这不会编译，因为 getInteger 接受一个字符串并将其转换为一个整数。

好的，让我们这样做。一次做一件事。首先，编写一个符合此描述的类：

它实现了 ActionListener；它有一个Graph的成员变量；Graph 的成员变量在 setter 中设置或传递给构造函数。它有一个 EMPTY actionPerformed 方法（现在）

只要这样做，我们就会从那里拿走它。

# php - SQL 转换为 html 单元格和行

> ID：11071723
> 
> 赞同：0
> 
> 时间：2012-06-17T13:42:44.893
> 
> 标签：php, mysql, html-table

我有一些代码在表格中显示结果

现在它将每行显示 3 个单元格。问题是第一行显示 2 然后创建一个具有预期行为的新行。如何让第一行显示 3 个单元格

```
 if(++$cnt == 0) {
        echo '<tr>';
    } elseif($cnt % 3 == 0) {
    echo '</tr><tr>';
    }

  echo "<td bgcolor='#009933'><a href='" . $row['local_link'] . ".m4v'    name='video'>" . $row['local_link'] . "</a></td>";
  echo "<td><video width='320' height='240' controls='controls'>
  <source src='" . $row['local_link'] . ".m4v" . "' type='video/mp4' />
  Your browser does not support the video tag.
</video></td>";

  }
  }
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:53:28.393

您在`$cnt`第一行进行预增量，这意味着它永远不会为零 - 除非您从`-1`. 尝试将您的第一行更改为：

```
if($cnt++ == 0) {
  echo '<tr>';
} // etc 
```

这样，在将其与零进行比较*之后*`$cnt`，值就会增加，而不是之前。

# html - 使用 Twitter Bootstrap 的 HTML 布局

> ID：11071725
> 
> 赞同：0
> 
> 时间：2012-06-17T13:42:46.873
> 
> 标签：html, css, twitter-bootstrap

我试图在 Twitter 引导程序中获得两列，左侧导航和右侧我的新闻。现在我的第一篇新闻帖子在正确的位置，但我的第二篇新闻帖子在导航下方。你可以在这里看到它：http: [//i.stack.imgur.com/HQnHV.png](http://i.stack.imgur.com/HQnHV.png)

HTML：

```
<div class="container">

        <div class="row">
          <div class="span4 leftsidebar"><!--SPAN4-->
            <div class="navigation">
              <ul>
                <li><a href='#'>Nieuws</a></li>
                <li><a href='#'>Duiken</a></li>
                <li><a href='#'>Duikplaatsen</a></li>
                <li><a href='#'>Duikverslagen</a></li>
                <li><a href='#'>Forum</a></li>
                <li><a href='#'>Galerij</a></li>
                <li><a href='#'>FAQ</a></li>
                <li><a href='#'>Contact</a></li>
              </ul>
            </div>
          </div><!--/SPAN4-->
          <div class='row'>
            <div class='span4'>
              <p>Titel</p>
            </div>
            <div class='span4'>
              <p>Lorem ipsum Excepteur nostrud pariatur minim esse dolore anim est eu eiusmod esse cillum irure in aliqua ut minim dolor fugiat irure laborum culpa labore dolore ad ut nostrud magna deserunt pariatur est non est pariatur anim laboris consectetur commodo ut do voluptate quis dolore sunt incididunt velit magna veniam deserunt exercitation nisi ad dolore deserunt proident ut laboris quis officia proident tempor dolor sint id ad Excepteur sed Excepteur occaecat Duis ut sed cillum sunt fugiat fugiat do enim nulla ut dolore sint incididunt magna eiusmod quis consequat nisi consequat dolor in Excepteur ut adipisicing occaecat occaecat esse aliqua ullamco ea non anim anim dolore nulla ea ullamco aliqua occaecat adipisicing deserunt dolore esse fugiat sunt dolor ut quis enim voluptate labore occaecat amet pariatur culpa sit id amet irure cupidatat in enim commodo cupidatat et ut irure enim laborum fugiat consequat dolor dolore laborum eu commodo aliquip in ea Duis consequat dolore sunt nisi quis aute ullamco consectetur nostrud in dolore sit deserunt dolore sint cillum dolor ut dolor est aliqua adipisicing labore voluptate deserunt cillum sed nostrud pariatur aliqua consectetur amet culpa aliqua elit cillum quis dolore deserunt consectetur aliqua ut. </p>
            </div>

          </div>
          <div class='row'>
            <div class='span4'>
              <p>Titel</p>
            </div>
            <div class='span4'>
              <p>Lorem ipsum Excepteur nostrud pariatur minim esse dolore anim est eu eiusmod esse cillum irure in aliqua ut minim dolor fugiat irure laborum culpa labore dolore ad ut nostrud magna deserunt pariatur est non est pariatur anim laboris consectetur commodo ut do voluptate quis dolore sunt incididunt velit magna veniam deserunt exercitation nisi ad dolore deserunt proident ut laboris quis officia proident tempor dolor sint id ad Excepteur sed Excepteur occaecat Duis ut sed cillum sunt fugiat fugiat do enim nulla ut dolore sint incididunt magna eiusmod quis consequat nisi consequat dolor in Excepteur ut adipisicing occaecat occaecat esse aliqua ullamco ea non anim anim dolore nulla ea ullamco aliqua occaecat adipisicing deserunt dolore esse fugiat sunt dolor ut quis enim voluptate labore occaecat amet pariatur culpa sit id amet irure cupidatat in enim commodo cupidatat et ut irure enim laborum fugiat consequat dolor dolore laborum eu commodo aliquip in ea Duis consequat dolore sunt nisi quis aute ullamco consectetur nostrud in dolore sit deserunt dolore sint cillum dolor ut dolor est aliqua adipisicing labore voluptate deserunt cillum sed nostrud pariatur aliqua consectetur amet culpa aliqua elit cillum quis dolore deserunt consectetur aliqua ut. </p>
            </div>

          </div>

        </div><!--/ROW-->
      </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:53:21.517

显然，您可以使用 bootstrap-responsive css 轻松完成此操作，因此我已经修复了此问题，只需将容器行替换为：

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span2">
      <!--Sidebar content-->
    </div>
    <div class="span10">
      <!--Body content-->
    </div>
  </div>
</div> 
```

# java - 如何在java中的netbeans平台中制作半透明窗口类？

> ID：11071727
> 
> 赞同：-1
> 
> 时间：2012-06-17T13:42:58.680
> 
> 标签：java, netbeans, platform

我正在用java的netbeans平台制作​​应用程序。我在我的模块中创建了作为扩展 TopComponent 的窗口类。现在我希望它作为半透明窗口。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:57:48.000

[自 AWT 以来，窗口半透明](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html)功能已可用。按照链接查找几个示例。

万一链接死了，有问题的包是：

```
java.awt.GraphicsDevice.WindowTranslucency 
```

# sql - 将其他日期的数据除以某一特定日期的数据

> ID：11071728
> 
> 赞同：0
> 
> 时间：2012-06-17T13:43:03.420
> 
> 标签：sql, oracle, analytic-functions

我现在在一个问题上卡住了几个小时。

假设我有一个包含以下数据的表：

```
month          outstanding
01/05/2012     35 678 956
02/05/2012     33 678 956
03/05/2012     31 678 956
04/05/2012     27 678 956
05/05/2012     24 678 956 
```

我需要得到比方说，2012 年 5 月 5 日结果与该月第一天的 EG 未偿还 05/05/2012 除以 01/05/2012 未偿还（24 678 956/35 678 956）

我应该使用什么功能？尝试按 to_char(trunc(trunc(a.date_,'MM'), 'MM'),'DD-MM-YYYY') 的结果对 / 进行分区

似乎对我不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T14:58:16.430

```
create table temp (month date , outstanding number);
insert into temp values(to_date('01/05/2012','dd/mm/yyyy'),35678956);
insert into temp values(to_date('02/05/2012','dd/mm/yyyy'),33678956);
insert into temp values(to_date('03/05/2012','dd/mm/yyyy'),31678956);
insert into temp values(to_date('04/05/2012','dd/mm/yyyy'),27678956);
insert into temp values(to_date('05/05/2012','dd/mm/yyyy'),24678956);
insert into temp values(to_date('01/06/2012','dd/mm/yyyy'),44678956);
insert into temp values(to_date('02/06/2012','dd/mm/yyyy'),41678956); 
```

`FIRST_VALUE`分析函数在`first record`执行完之后从分区中选择`ORDER BY`

```
SELECT month
      ,outstanding
      ,outstanding/(FIRST_VALUE(outstanding)
             OVER (PARTITION BY to_char(month,'mm') 
             ORDER BY month
        )) as ratio
FROM temp
ORDER BY month; 
```

**输出**

```
MONTH     OUTSTANDING      RATIO
--------- ----------- ----------
01-MAY-12    35678956          1
02-MAY-12    33678956 .943944548
03-MAY-12    31678956 .887889096
04-MAY-12    27678956 .775778193
05-MAY-12    24678956 .691695015
01-JUN-12    44678956          1
02-JUN-12    41678956 .932854295 
```

选择了 7 行。

*SQLFIDDLE* [链接](http://www.sqlfiddle.com/#!4/53412/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:22:45.560

试试这个：

```
SELECT t1.month,
       t1.outstanding / t2.outstanding o2
FROM your_table t1
INNER JOIN
  (SELECT *
   FROM your_table
   WHERE trunc(MONTH, 'mm') = MONTH) t2 ON trunc(t1.MONTH, 'mm') = t2.MONTH 
```

# php - phpseclib $ssh->read() 循环基于结果

> ID：11071730
> 
> 赞同：1
> 
> 时间：2012-06-17T13:43:23.563
> 
> 标签：php, ssh, phpseclib

我正在尝试使用 phpseclib（使用 apt-get）安装应用程序，并希望处理我可能收到的不同输出结果......但是我不确定如何让它工作。我目前有以下内容：

```
$first = $ssh->read('root@DMZ-Server:~#');
$ssh->write("sudo apt-get install emacs\n");
echo "<br />";
echo "sudo apt-get install emacs";
echo str_repeat(' ',1024*64);
if ($unexpected_output = $ssh->read('root@DMZ-Server:~#')){
  echo "<pre>$unexpected_output</pre>";
  echo str_repeat(' ',1024*64);
}   elseif ($continue = $ssh->read('Do you want to continue [Y/n]?')){
    echo "<pre>$continue</pre>";
    echo str_repeat(' ',1024*64);
    $ssh->write("Y\n");
    $continue_end = $ssh->read('root@DMZ-Server:~#');
    echo "<pre>$continue_end</pre>";
    echo str_repeat(' ',1024*64);
} 
```

这个 if 循环只适用于第一个“if”......也就是说，如果有意外的输出（你回到 shell 没有被问到“你想继续”，这意味着已经安装等）那么这个脚本将工作得很好。

但是如果应用程序没有安装，它永远不会进入 elseif 循环。我很确定原因是因为第一个 ssh->read 将继续，直到 php 超时，等待结果......我如何编写它以便它同时查看两个选项，并选择正确的一个。

我正在考虑为此使用 CASE，但不知道如何写...

使用 phpseclib 也可能有更好的方法来做到这一点......但不知道如何做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:09:51.943

你为什么不改变你调用 apt-get 的方式，`apt-get install -y emacs`这样它就不会提示是或否？您可能还想使用 -q 这样它就不会打印进度。

见[apt-get(8)](http://linux.die.net/man/8/apt-get)

您的解决方案的问题是 $ssh->read 等到找到给定的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T20:43:53.287

您也可以执行 $ssh->setTimeout(10) 或其他任何操作，然后在连接超时时执行 $ssh->getLog() 以查看实际发送的内容。

# erlang - 如何在 Erlang 客户端中将额外的参数传递给 RabbitMQ 连接

> ID：11071732
> 
> 赞同：1
> 
> 时间：2012-06-17T13:43:48.587
> 
> 标签：erlang, rabbitmq, ejabberd

我为 eJabberd 编写了一些扩展模块，其中大部分出于各种原因将信息片段传递给 RabbitMQ。一切都很好，直到我们将服务器启动到我们有一个 Rabbit 集群而不是一个盒子的地方。

为了利用集群，您需要将“x-ha-policy”参数与“all”或“nodes”值一起传递给 Rabbit。这适用于 Java 和 Python 生产者和消费者，但 eJabberd（当然使用 Erlang AMQP 客户端）让我有点难过。x-ha-policy 参数需要传递到“client_properties”参数中，该参数只是额外参数的“catchall”。

在带有 pika 的 Python 中，我可以这样做：

```
client_params = {"x-ha-policy": "all"}
queue.declare(host, vhost, username, password, arguments=client_params) 
```

那行得通。然而，Erlang 客户端的文档说参数应该作为列表传递：

```
[{binary(), atom(), binary()}] 
```

如果它只是 [{binary(), binary()}] 我可以看到与键/值的关系，但不确定原子会在那里。

为了清楚起见，我是一名新手 Erlang 程序员，所以这可能是我不熟悉的常见结构，所以没有答案会太明显。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:31:37.643

我在 中找到了这个`amqp_network_connection.erl`，它看起来像一个设置一些默认值的包装器：

```
client_properties(UserProperties) ->
    {ok, Vsn} = application:get_key(amqp_client, vsn),
    Default = [{<<"product">>,   longstr, <<"RabbitMQ">>},
               {<<"version">>,   longstr, list_to_binary(Vsn)},
               {<<"platform">>,  longstr, <<"Erlang">>},
               {<<"copyright">>, longstr,
                <<"Copyright (c) 2007-2012 VMware, Inc.">>},
               {<<"information">>, longstr,
                <<"Licensed under the MPL.  "
                  "See http://www.rabbitmq.com/">>},
               {<<"capabilities">>, table, ?CLIENT_CAPABILITIES}],
    lists:foldl(fun({K, _, _} = Tuple, Acc) ->
                    lists:keystore(K, 1, Acc, Tuple)
                end, Default, UserProperties). 
```

显然原子描述了值类型。我不知道可用的类型，但有可能`longstr`适用于您的情况。

# java - java图像卷积

> ID：11071735
> 
> 赞同：2
> 
> 时间：2012-06-17T13:44:26.060
> 
> 标签：java, awt

我正在尝试将平滑过滤器应用于图像。但我得到了这个错误：

```
java.awt.image.ImagingOpException: Unable to convolve src image
at java.awt.image.ConvolveOp.filter(ConvolveOp.java:180)
at ocr.Resolution.smoothing(Resolution.java:102)
at ocr.Interface$ButtonListener.actionPerformed(Interface.java:332)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
at java.awt.Component.processMouseEvent(Component.java:6038)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3260)
at java.awt.Component.processEvent(Component.java:5803)
at java.awt.Container.processEvent(Container.java:2058)
at java.awt.Component.dispatchEventImpl(Component.java:4410)
at java.awt.Container.dispatchEventImpl(Container.java:2116)
at java.awt.Component.dispatchEvent(Component.java:4240)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4322)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:3986)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:3916)
at java.awt.Container.dispatchEventImpl(Container.java:2102) 
```

我已经研究过，但找不到任何确切的解决方案。要查看问题的根源，我将图像加载为图标。他们都还好。此问题的原因可能是图像稍后加载，因此无法应用过滤器吗？

此外，我还将应用细化算法和其他一些过滤器。你认为如果在处理而不是 Java 中做更好。感谢您的任何帮助。

```
 filter = new float[] { 1.0f/121.0f,  2.0f/121.0f,   3.0f/121.0f,   2.0f/121.0f,   1.0f/121.0f,
                            2.0f/121.0f,  7.0f/121.0f,  11.0f/121.0f,   7.0f/121.0f,   2.0f/121.0f,
                            3.0f/121.0f, 11.0f/121.0f,  17.0f/121.0f,  11.0f/121.0f,   3.0f/121.0f,
                            2.0f/121.0f,  7.0f/121.0f,  11.0f/121.0f,   7.0f/121.0f,   2.0f/121.0f,
                            1.0f/121.0f,  2.0f/121.0f,   3.0f/121.0f,   2.0f/121.0f,   1.0f/121.0f};
    kernelWidth = 5;
    kernelHeight = 5;
    BufferedImageOp bufOp ;
    BufferedImage bufImg;
    Image img;

    img = Toolkit.getDefaultToolkit().getImage(Interface.picPath); //load image        
    ImageSize size = new ImageSize(img);// instance to get image dimensions
    bufImg = new BufferedImage (size.getwidth(),size.getheight(),BufferedImage.TYPE_INT_RGB); 
    try {
    bufImg = ImageIO.read(new File(Interface.picPath) );

    } catch (IOException ex) {
    Logger.getLogger(Resolution.class.getName()).log(Level.SEVERE, null, ex);
    }

    kernel = new Kernel( kernelWidth, kernelHeight, filter);
    bufOp = new ConvolveOp(kernel); 
    bufImg = bufOp.filter(bufImg, null); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T15:17:05.503

我找到了解决方案。我没有使用 URl 创建 BufferedImage(bufImg)，而是将图像本身 (img) 转换为 BufferedImage 并且它现在运行。

```
public void smoothing(){
     filter = new float[] { 1.0f/121.0f,  2.0f/121.0f,   3.0f/121.0f,   2.0f/121.0f,   1.0f/121.0f,
                            2.0f/121.0f,  7.0f/121.0f,  11.0f/121.0f,   7.0f/121.0f,   2.0f/121.0f,
                            3.0f/121.0f, 11.0f/121.0f,  17.0f/121.0f,  11.0f/121.0f,   3.0f/121.0f,
                            2.0f/121.0f,  7.0f/121.0f,  11.0f/121.0f,   7.0f/121.0f,   2.0f/121.0f,
                            1.0f/121.0f,  2.0f/121.0f,   3.0f/121.0f,   2.0f/121.0f,   1.0f/121.0f};
    kernelWidth = 5;
    kernelHeight = 5;
    kernel = new Kernel( kernelWidth, kernelHeight, filter);
    op = new ConvolveOp(kernel); 

    img = Toolkit.getDefaultToolkit().getImage(Interface.picPath);
    imageToBufferedImage(img);
    bufImg = op.filter(bufImg, null);

    icon = new ImageIcon(img.getScaledInstance(175, 175, Image.SCALE_DEFAULT));
    icon2 = new ImageIcon(img.getScaledInstance(300, 300, Image.SCALE_DEFAULT));
    Interface.label3.setIcon(icon);
    Interface.label8.setIcon(icon2);

}

public  void imageToBufferedImage(Image im) {
    ImageSize size = new ImageSize(im);
    bufImg = new BufferedImage (size.getwidth(), size.getheight(),BufferedImage.TYPE_INT_RGB);
    Graphics graph = bufImg.getGraphics();
    graph.drawImage(im, 0, 0, null);
    graph.dispose(); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-06T01:57:22.100

我只是遇到了“相同”的错误，并深入研究了源代码以找出问题所在。我最终阅读了[https://github.com/frohoff/jdk8u-dev-jdk/blob/master/src/share/native/sun/awt/medialib/awt_ImagingLib.c](https://github.com/frohoff/jdk8u-dev-jdk/blob/master/src/share/native/sun/awt/medialib/awt_ImagingLib.c)

如您所见，方法 Java_sun_awt_image_ImagingLib_convolveRaster 有十几种返回 0 或 -1 的方式（实际上有 13 种方式）。

每当该方法返回非正数时，这种情况就会以 Ecrin 发布的异常结束，并且没有具体信息是什么出了问题，因为该方法一开始就没有提供任何信息。

你能做的最好的事情就是从一个工作示例开始，就像 Ecrin 提供的那样，希望它也对你有用。然后一步步改。

# mysql - 需要 Rails 项目解决方案吗？

> ID：11071739
> 
> 赞同：0
> 
> 时间：2012-06-17T13:44:35.043
> 
> 标签：mysql, ruby-on-rails, database-design

我正在 Rails 中创建一个具有主数据库和从数据库的在线 Web 项目。当主数据库上更新一行时，它也应该在从数据库上更新。

在编写更新主从的例程程序时，我应该实现什么样的设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:14:20.960

根据[迈克尔](https://stackoverflow.com/users/541091/michael)的建议：

[复制的原因介绍](http://www.mysql.com/products/enterprise/replication.html)

[MySQL 复制文档](http://dev.mysql.com/doc/refman/5.0/en/replication.html)

[如何设置 MySQL 复制](http://dev.mysql.com/doc/refman/5.0/en/replication-howto.html)

# mysql - 在表中按时间顺序查询多个表

> ID：11071741
> 
> 赞同：1
> 
> 时间：2012-06-17T13:45:08.923
> 
> 标签：mysql, union

实际上我被困在一些mysql代码的中间。谁能提出一个简单的问题。我在数据库中有 6-10 个（多个）表，它们都有不同的数据意味着彼此不相关。

表之间没有关系，但在所有表的每一列中都插入了发布时间。我想要的只是查询按时间列排序的所有表。

例如：
表1：

```
recipename | cook | timetocook | dated (auto posted time - php time())
-----------+------+------------+------
abc        | def  |        100 | 10
zxy        | orp  |        102 | 16 
```

表2：

```
bookname | author | dated (auto posted time - php time())
---------+--------+------
ab       | cd     | 11
ef       | nm     | 14 
```

如您所见，表之间没有关系（我已经阅读过有关联接的信息），我想根据发布的时间从升序到降序，一一显示数据。

像这样：

```
abc  def  100  10
ab   cd   11
ef   nm   14
zxy  orp  102  16 
```

所以任何帮助......实现这一目标？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T14:10:23.007

```
SELECT recipename, cook, timetocook, dated 
FROM table1
UNION 
SELECT bookname, author, dated, NULL
FROM table2
ORDER BY dated 
```

您必须添加**NULL**值以确保列计数与订单表相同。

# orm - Doctrine\ORM\Proxy\ProxyFactory::getProxy() 中的致命错误

> ID：11071743
> 
> 赞同：3
> 
> 时间：2012-06-17T13:45:29.757
> 
> 标签：orm, symfony, annotations, doctrine-orm

嘿，我正在处理 symfony2 项目并尝试使用注释创建路由，但出现错误，但是当我使用从 routes.yml 文件定义路由时，一切正常，但导致注释出现问题错误是

> 致命错误：Doctrine\ORM\Proxy\ProxyFactory::getProxy() [function.require]：打开失败需要'C:/wamp/www/idp_svn/app/cache/dev/doctrine/orm/Proxies\MunichInnovationGroupPatentBundleEntityUmUsersProxy.php' (include_path='.;C:\php\pear') 在第 85 行的 C:\wamp\www\idp_svn\vendor\doctrine\lib\Doctrine\ORM\Proxy\ProxyFactory.php

我的 app/congig/route.yml 是

```
 MunichInnovationGroupPatentBundle:
  resource: "@MunichInnovationGroupPatentBundle/Controller/"
  type:     annotation
  prefix:   /
  defaults:  { _controller: "MunichInnovationGroupPatentBundle:Default:index" }

  MunichInnovationGroupBundle:
   resource: "@MunichInnovationGroupBundle/Controller/"
   type:     annotation
   prefix:   /v1
   defaults:  { _controller: "MunichInnovationGroupBundle:Patent:index" }

   login_check:
    pattern:   /login_check

   logout:
    pattern:   /logout 
```

在我的控制器中

```
 <?php
  namespace MunichInnovationGroup\PatentBundle\Controller;

  use Symfony\Component\HttpFoundation\Response;
  use Symfony\Component\HttpFoundation\Request;
  use JMS\SecurityExtraPatentBundle\Annotation\Secure;
  use Symfony\Component\Security\Core\Exception\AccessDeniedException;
  use Symfony\Bundle\FrameworkBundle\Controller\Controller;
  use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
  use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
  use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
  use Symfony\Component\Security\Core\SecurityContext;

  use MunichInnovationGroup\PatentBundle\Entity\Log;
  use MunichInnovationGroup\PatentBundle\Entity\UserPatent;
  use MunichInnovationGroup\PatentBundle\Entity\PmPortfolios;
  use MunichInnovationGroup\PatentBundle\Entity\UmUsers;
  use MunichInnovationGroup\PatentBundle\Entity\PmPatentgroups;
  use MunichInnovationGroup\PatentBundle\Form\PortfolioType;
  use MunichInnovationGroup\PatentBundle\Util\SecurityHelper;
  use Exception;
  /**
   * Portfolio controller.
   * @Route("/portfolio")
 */
 class PortfolioController extends Controller {
 /**
  * Index action.
  *
  * @Route("/", name="v2_pm_portfolio")
  * @Template("MunichInnovationGroupPatentBundle:Portfolio:index.html.twig")
*/
public function indexAction(Request $request) {
$em = $this->getDoctrine()->getEntityManager("pp_userdata");
$em->getRepository('MunichInnovationGroupPatentBundle:PmPortfolios')
->findBy(array('user' => '$user_id'));

       // rest of the method
} 
```

有任何想法吗？我做错了什么？

提前致谢

# javascript - HTML5 Circle防止在画布外拖动并防止碰撞

> ID：11071746
> 
> 赞同：0
> 
> 时间：2012-06-17T13:46:09.583
> 
> 标签：javascript, jquery, html, html5-canvas, drag

我有 HTML 5 圆形拖放示例，

[http://jsfiddle.net/eGjak/503/](http://jsfiddle.net/eGjak/503/)

我想关注事情

1.  防止在画布外拖动圆圈

2.  在圆圈上隐藏线条

3.  防止拖过另一个圆圈

我玩了一些代码，但没有运气。任何人都可以通过逻辑或一些有用的资源帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T23:26:37.200

1.  这是个简单的。它只是检查 x 不会离开屏幕的左侧或右侧， y 不会离开屏幕的顶部或底部

    如果 (x>0 || x<(canvas.width - circle.width) && y>0 || y<(canvas.height - circle.height)) {

    ```
    ...update... 
    ```

    }

2.  在这里，您需要进行线/圆碰撞检查。[见这里](https://stackoverflow.com/q/10957689/577306)。

3.  为此，您需要圆/圆碰撞检测。如果发生碰撞，以下将返回 true，否则返回 false：

    ```
    this.isIntersecting = function(c1center, c1radius, c2center, c2radius)
    {

        var dX = Math.pow(c1center.x - c2center.x, 2);
        var dY = Math.pow(c1center.y - c2center.y, 2);
        var r2 = Math.pow(c1radius.radius() + c2radius.radius(), 2);
        return (dX + dY <= r2);
    } 
    ```

c1center 和 c2center 是具有 x, y 属性的对象（例如`c1center = {x:0, y:0 }`：）

# java - 为什么我的 .smd 模型导入器中的框架被弄乱了？

> ID：11071752
> 
> 赞同：2
> 
> 时间：2012-06-17T13:47:29.007
> 
> 标签：java, opengl

我错过了什么或者我的代码有什么问题吗？

以下链接可能会有所帮助：

*   [贴片文件结构](https://developer.valvesoftware.com/wiki/Studiomdl_Data)

*   [源代码](https://bitbucket.org/vkuchalskis/for-gajet/src/a7371332834e/SDMimport)

我写了一个 .smd 模型导入器，由于某种原因，除了静止帧之外的所有帧都搞砸了。

首先，我从文件中加载所有信息并将其存储到数组列表中。然后我调用这个方法并计算所有的渲染：

```
private void CalculateMatrices(Model model) {
    for(Bone bone : model.bones){
        if(bone.boneParentsID >= 0) {
            bone.parent = model.bones.get(bone.boneParentsID);
        }
        Matrix4f defaultBoneTransform = new Matrix4f();
        defaultBoneTransform.rotate(bone.defaultRotation.x, new Vector3f(1.0f, 0.0f, 0.0f)); 
        defaultBoneTransform.rotate(bone.defaultRotation.y, new Vector3f(0.0f, 1.0f, 0.0f)); 
        defaultBoneTransform.rotate(bone.defaultRotation.z, new Vector3f(0.0f, 0.0f, 1.0f)); 
        defaultBoneTransform.translate(bone.defaultPosition);
        bone.defaultBoneTransform = defaultBoneTransform;

        for(Frame frame : bone.frames){
            Matrix4f boneTransform = new Matrix4f();
            boneTransform.rotate(frame.rotation.x, new Vector3f(1.0f, 0.0f, 0.0f)); 
            boneTransform.rotate(frame.rotation.y, new Vector3f(0.0f, 1.0f, 0.0f)); 
            boneTransform.rotate(frame.rotation.z, new Vector3f(0.0f, 0.0f, 1.0f)); 
            boneTransform.translate(frame.position);
            bone.boneTransforms.add(boneTransform);
        }
    }
    for(Bone bone : model.bones){
        Matrix4f atRestTransform = new Matrix4f();
        if(bone.boneParentsID == -1) {
            atRestTransform = new Matrix4f(bone.defaultBoneTransform);
        } else {
            for (Bone current = bone; current != null; current = current.parent) {
                Matrix4f.mul(current.defaultBoneTransform, atRestTransform, atRestTransform);
            }
        }
        bone.boneToWorldDefault = new Matrix4f(atRestTransform);
        atRestTransform.invert();
        bone.atRestTransform = new Matrix4f(atRestTransform);

        for(Frame frame : bone.frames){
            Matrix4f boneToWorldTransform = new Matrix4f();
                if(bone.boneParentsID == -1) {
                    boneToWorldTransform = new Matrix4f(bone.boneTransforms.get(frame.time));
                } else {
                    for (Bone current = bone; current != null; current = current.parent) {
                        Matrix4f.mul(current.boneTransforms.get(frame.time), boneToWorldTransform, boneToWorldTransform);
                        }
            }
        bone.boneToWorldTransforms.add(new Matrix4f(boneToWorldTransform));
        }
    }
    for (Vertex vertex : model.vertices) {
        for (Frame frame : model.bones.get(0).frames) { 
        List<Vector4f> vertexPosAnimatedList = new ArrayList<Vector4f>();
        for (float boneID : vertex.boneIDs) {
        Vector4f vertexPosAnimated = new Vector4f();
        Bone bone = model.bones.get((int) boneID);
        Matrix4f mul = new Matrix4f();
        Matrix4f.mul(bone.boneToWorldTransforms.get(frame.time), bone.atRestTransform, mul);

        Vector4f vecPosMod = new Vector4f(vertex.position.x, vertex.position.y, vertex.position.z, 1f);
        Matrix4f.transform(mul, vecPosMod, vertexPosAnimated);
        vertexPosAnimated.scale(vertex.boneW.get(vertex.boneIDs.indexOf(boneID)));
        vertexPosAnimatedList.add(vertexPosAnimated);
        }
        Vector4f vertexPosAnimated1 = new Vector4f();
        for(int i = 0; i < vertexPosAnimatedList.size(); i++) {
            if(i == 0) {
                vertexPosAnimated1 = vertexPosAnimatedList.get(0);
            } else {
                Vector4f.add(vertexPosAnimated1, vertexPosAnimatedList.get(i), vertexPosAnimated1);
            }
        }
        Vector3f animatedPos = new Vector3f(vertexPosAnimated1.x, vertexPosAnimated1.y, vertexPosAnimated1.z);
        vertex.positionOnFrames.add(animatedPos);
        }
    }
} 
```

和渲染：

```
 GL11.glBegin(GL11.GL_TRIANGLES);
    for (Vertex vertex : model.vertices) {
        Vector3f pos = vertex.positionOnFrames.get(curFrame);
        GL11.glNormal3f(model.normals.get(model.vertices.indexOf(vertex)).x, model.normals.get(model.vertices.indexOf(vertex)).y, model.normals.get(model.vertices.indexOf(vertex)).z);
        GL11.glTexCoord2f(model.textures.get(model.vertices.indexOf(vertex)).x, model.textures.get(model.vertices.indexOf(vertex)).y);
        GL11.glVertex3f(pos.x, pos.y, pos.z);
    }
    GL11.glEnd(); 
```

我想问题出在`CalculateMatrices`方法的某个地方。

在那个方法中：

1.  为每个骨骼和每个帧创建一个变换矩阵，其中包括骨骼旋转和平移。
2.  计算骨骼atrestposition，以及它在每一帧上的世界位置。
3.  做更多的计算，比如为一个顶点设置多个骨骼。
4.  将每个顶点及其动画位置存储到数组列表中。

# iphone - 捕获 iPhone/iPad 的页数

> ID：11071753
> 
> 赞同：-1
> 
> 时间：2012-06-17T13:47:35.047
> 
> 标签：iphone, ios, ipad

我是 iOS 开发的新手，我试图了解是否有可能在我的代码中捕获 iPhone/iPad 的页面数......我指的是用户创建的页面作为更多应用程序已安装在设备上...干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:51:36.197

如果您指的是 iphone home dashboard 上的页数，那么不，您将无法合法查询该信息

# javascript - 如何使用主干js将一个集合的单击项目的ID设置为另一个集合的属性

> ID：11071757
> 
> 赞同：0
> 
> 时间：2012-06-17T13:48:14.843
> 
> 标签：javascript, backbone.js

我是骨干新手，我遇到了一个问题

**简而言之问题**

我有两个要显示的列表。

1.课程

2.所选课程的学生

我现在可以展示。

现在在**StudentList 视图**中（它使用**“学生”集合**）我有一个添加按钮，它为所选课程项目添加学生（**在单独的视图中**）。为此，我需要知道我在**StudentList 视图**中单击了哪个课程项目。为此，我在单击课程时将 courseId 存储在隐藏字段中，稍后在**StudentList 视图**中，我已获取该隐藏字段值以添加新学生。

我想要做的**不是将 courseId 存储在隐藏字段中**，**而是可以在单击课程时将 courseId 作为属性添加到“Students”集合中**。

**尝试的方法**

在 StudentList 视图中，我写了这样的东西

```
var StudentList = Backbone.View.extend({
 initialize: function () {
    this._meta = {};       
},  

put: function (prop, value) {
    this._meta[prop] = value;
},
get: function (prop) {
    return this._meta[prop];
},   
events: {
    "click    #btnAddStudent": "createNewStudent"
},

createNewStudent: function () {      
    var some =  this.get("someProp");       
    this.collection.create({ Name: this.$el.find('#txtNewStudent').val(), 
    CourseId: some  });       
}
}); 
```

在“courseClicked”函数中我已经这样做了（“courseClicked”函数在**CourseItem 视图**内）

```
var CourseItem = Backbone.View.extend({  
events: {        
    'click': 'courseClicked'
},
initialize: function () {
    this.students = this.options.students;
},  
courseClicked: function () {
    var courseId = this.model.id;
    this.students.put('someProp',courseId);
    this.students.fetch({ data: { courseId: courseId} });
}   
}); 
```

以上不起作用，因为 put 和 get 函数在 courseitem 视图上下文中不可用，它们是在 StudentList 视图中定义的。任何人都可以指导我如何完成我的需求。

这个问题是我之前在**SO**上发布的问题 的延续[Using Event Aggregator to load a view with different model in bone js](https://stackoverflow.com/questions/10959267/using-event-aggregator-to-load-a-view-with-different-model-in-backbone-js/10961588#10961588) 这个链接可能有助于了解我的问题的更多细节。

谢谢你的耐心

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:15:00.170

这应该是一个部分答案，它可能会引导你走向正确的道路或进入战壕。就这样吧。

1.  最好有 2 个视图，一个用于学生列表，一个用于课程列表。提供一个复选框列表应该对课程列表有好处，因为学生 -> 课程是一对多的关系。

2.  Course(model) 应该有一个选定的属性（仅在客户端，对服务器端没有意义），您可以在单击复选框时切换该属性。课程（收藏）应该用亮点等重绘改变的课程

3.  Courses(Collection) 应该可以通过 window 对象访问。就像`window.App.Students.Courses`Courses 是 Courses 集合的一个**实例**。前任：`window.App.Students.Courses = new window.App.Students.Collection.Courses;`

4.  现在选择课程并选择学生。您可以全局访问已选择的课程（可以使用 underscore.js 方法检索），然后将课程 ID 设置为所选学生的数组。类似的东西`for each selectedstudent ( foreach selectedCourse selectedStudent.course.push(selectedCourse))`。学生的 json 将如下所示

`{ id: 1, name: "Jack Keane", courses: [1, 2, 5, 6, 7] }`

### 代码

在学生视图中，执行以下操作以获取学生的所选课程。

```
window.courses.filter(function(course){
  return course.get("selected");
}); 
```

使用[筛选](http://documentcloud.github.com/underscore/#filter)方法获取所选课程。然后将课程分配给学生，如 #4 所示。

```
var selectedCourses =     window.courses.filter(function(course){
      return course.get("selected");
    });

this.collection.forEach(function(student){

student.set("courses") = selectedCourses;

}); 
```

通过执行上述操作，每个学生现在都具有`courses`为您提供该学生所选课程的属性。

# java - 线程突然停止，没有异常或错误消息

> ID：11071760
> 
> 赞同：1
> 
> 时间：2012-06-17T13:48:44.140
> 
> 标签：java, multithreading, network-programming

我有一个读取和写入网络套接字的线程。

```
public void run() {
    try {
        Socket socket = new Socket("10.0.1.11", 19456);
        out = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

        String message = "13" + seperator + "0" + seperator + "userdata";
        out.write(message);
        out.flush();

        while (listen) {
            String input = "";

            for (int letter = in.read(); letter != -1; letter = in.read()) {
                System.out.println((char)letter);
                input += (char)letter;
            }

            System.out.println(input);
            displayText(input);
        }

        socket.close();
    } catch (UnknownHostException e) {
        displayText("Could not connect to server!");
    } catch (IOException e) {
        displayText("Could not open IO to server!");
    }
} 
```

但是，for 循环之后的所有内容都不会执行。for 循环内的 System.out.println 打印出它应该打印的所有字母，但是 for 循环后的 System.out.println 和 displayText 函数永远不会执行（用断点检查）......我错过了什么这里？:S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:04:21.823

根据[http://www.docjar.com/docs/api/java/io/Reader.html#read](http://www.docjar.com/docs/api/java/io/Reader.html#read)

```
This method will block until a character is available,
an I/O error occurs, or the end of the stream is reached. 
```

他们的代码示例确实表明他们 -1 在 EOF 上返回。

因此，您的 for 循环被阻塞，因为**in.read()**无法识别 EOF 条件。

直到套接字服务器关闭其发送方向，它才能做到这一点，这会关闭客户端的接收部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:23:26.603

1.  在调试器中启动程序
2.  重现错误
3.  检查线程是否仍然存在（在eclipse中，调试视图列出了所有进程，它们的线程）
    *   如果线程存在：挂起它（在 Eclipse 中，通过单击线程并按下暂停图标）。调试器现在将显示该线程的堆栈，因此您可以检查它在做什么。
    *   如果线程不再存在，则它必须已正常或突然终止（由于未处理的异常）。您可以通过在 run() 中的最后一条语句上设置断点来区分这一点。如果它突然完成，则必须调用线程的未捕获异常处理程序。

# login - Joomla 2.5 后端登录，前端编辑篇

> ID：11071761
> 
> 赞同：0
> 
> 时间：2012-06-17T13:48:47.697
> 
> 标签：login, joomla, admin

当我在 Joomla 的前端使用我的管理员凭据登录时，我在所有页面上都看到了一个漂亮的编辑图标。但是当我只在后端以管理员身份登录时，我看不到那个漂亮的编辑图标（我只能通过文章管理器进行编辑）。我必须（再次）登录网站本身。

当我登录后端时，是否有可能看到这些图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:19:21.283

Not unless there is a plugin out there somewhere. It's by design....the nice icons are there for the convenience of non-technical/non-administrators. The backend generally exists for altogether different reasons (config, setup, etc.), so it's not geared towards the author/editor type of user.

# mysql - 无法将时间戳列添加到 sql 表的末尾

> ID：11071766
> 
> 赞同：0
> 
> 时间：2012-06-17T13:49:37.667
> 
> 标签：mysql

我试图在表格末尾添加一列`assestbl`

```
ALTER TABLE  `assestbl` ADD  `timestamp` VARCHAR NOT NULL DEFAULT CURRENT_TIMESTAMP 
```

但它显示一个错误

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“NOT NULL DEFAULT CURRENT_TIMESTAMP”附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:01:17.660

你有两个错误：

1) 数据类型中的语法错误，`varchar`需要定义长度：`VARCHAR(LEN)`

一旦你修复它，你会得到类似的东西`invalid default value for 'timestamp'`：

2)`DEFAULT CURRENT_TIMESTAMP`只能应用于时间数据类型（DATE、TIME、DATETIME、TIMESTAMP 和 YEAR）。

# http - 从 Wireshark 捕获中提取 GET URI 或其响应到单独的文件

> ID：11071768
> 
> 赞同：2
> 
> 时间：2012-06-17T13:49:51.340
> 
> 标签：http, video-streaming, wireshark, network-monitoring

## 问题

我使用 Wireshark 捕获 HTTP 视频流，并使用以下过滤器过滤掉相关的 GET 请求。

```
http.request.uri contains "identifier" && http.request.method == "GET" && ip.addr == xxx.xxx.xxx.xxx 
```

## 问题

1.  是否可以提取所有获取 GET URL 以分隔 .txt 文件？

2.  或者是否可以提取与上面的过滤器匹配的原始响应数据包（没有标头）以分离文件，以便我最终拥有一堆单独的视频文件？

我希望我让自己足够清楚;-)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T10:52:08.360

虽然这对于 Wireshark 可能是可行的，但对于[Bro](http://www.bro-ids.org)来说要容易几个数量级。

# 提取 URI

只需使用您的跟踪文件运行它：

```
bro -r <trace> 
```

此调用在当前目录中生成一堆日志文件。您感兴趣的是`http.log`. 您可以过滤输出以仅获取 GET 请求：

```
bro-cut id.orig_h id.resp_h method host uri < http.log | awk '$3 == "GET"' 
```

示例输出：

```
192.168.1.104   212.96.161.238  GET update.avg.com  /softw/90/update/avg9infowin.ctf
192.168.1.104   77.67.44.206    GET backup.avg.cz   /softw/90/update/u7avi1777u1705ff.bin
192.168.1.104   198.189.255.75  GET aa.avg.com  /softw/90/update/u7iavi2511u2510ff.bin
192.168.1.104   77.67.44.206    GET backup.avg.cz   /softw/90/update/x8xplsb2_118c8.bin 
```

如您所见，最后两列构成了完整的 URL。要删除中间的空格，您可以使用 awk 连接最后两个字段。

# 提取文件

注意：即将发布的 Bro 2.1 版本将对文件提取进行重大改进。在此之前，您可以通过指定要存储的文件的 MIME 类型从 HTTP 流中提取所有文件：

```
bro -r <trace> 'HTTP::extract_file_type = /video\/avi/' 
```

Bro 嗅探 HTTP 正文的 MIME 类型，如果它与正则表达式匹配`/video\/avi/`，它会创建一个带有前缀的文件`http-item`。`HTTP::extraction_prefix`您可以通过重新定义变量来更改前缀名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T11:08:59.713

问题1的解决方案：-

使用 tshark 实用程序。易于安装，只需“ **sudo apt-get install tshark** ”

我使用的命令是：-

```
tshark  -R 'tcp.port==80 && (http.request.method == "GET" || http.request.method=="HEAD" || http.request.method=="POST" )'  -r eth2uplink_00001    -Tfields -e ip.dst -e http.request.method -e http.request.full_uri > requests_eth2_00001 
```

请参阅此处的所有 Wireshark 显示过滤器：- [https://www.wireshark.org/docs/dfref/](https://www.wireshark.org/docs/dfref/)

这是比使用 Bro 更好的方法，因为 Bro 安装起来非常复杂，因为它具有特定的依赖项并且很难满足它们。

我目前没有问题 2 的解决方案，但我相信它可以在类似的线路上构建一些东西。以下选项可能对您正在尝试的内容有用。

***-O 仅显示这些协议的数据包详细信息，逗号分隔***

**-x 添加十六进制和 ASCII 转储的输出（数据包字节）** 您可以参考 tshark --help 了解更多信息。

希望这可以帮助。谢谢。

# java - 手动签名时 Android 应用程序挂起

> ID：11071771
> 
> 赞同：1
> 
> 时间：2012-06-17T13:50:06.557
> 
> 标签：java, android, keytool, jarsigner

我有一个 android 应用程序，它在手动签名后似乎挂起。

但它并不总是挂起：

*   当我用 eclipse 签名时 -> 工作得很好
*   当我使用调试密钥（ant debug）签名时-> 工作得很好
*   访问不加载 .so 文件的活动 (System.loadLibrary(xyz.so); ) -> 很好
*   使用下面的代码片段手动签名-> 应用程序挂起，logcat 中没有任何提及

现在我正在使用以下行来构建和签署应用程序

```
ant release -f dir/build.xml

jarsigner -signedjar Hedgeroid-signed.apk -keystore /path/to/keystore/hedgewars.keystore -storepass "password1" -keypass "password2" -sigalg MD5withRSA -digestalg SHA1 -verbose path/to/project/bin/MainActivity-release-unsigned.apk hedgeroid 
```

keytool 输出：

```
adding: META-INF/MANIFEST.MF
adding: META-INF/HEDGEROI.SF
adding: META-INF/HEDGEROI.RSA
signing: assets/Data/Fonts/DejaVuSans-Bold.ttf
signing: assets/Data/Forts/LegoL.png
... (summing up all the files) ..
signing: lib/armeabi/libhwengine.so
signing: lib/armeabi/liblua5.1.so 
```

之后我压缩它，但有或没有它都不会改变结果。

任何帮助将不胜感激。

附言。

这是从它开始挂起的点的logcat：

```
D/dalvikvm(12755): Added shared lib /data/data/org.hedgewars.hedgeroid/lib/liblua5.1.so 0x410a4110
D/dalvikvm(12755): No JNI_OnLoad found in /data/data/org.hedgewars.hedgeroid/lib/liblua5.1.so 0x410a4110, skipping init
D/dalvikvm(12755): Trying to load lib /data/data/org.hedgewars.hedgeroid/lib/libhwengine.so 0x410a4110
W/ActivityManager(  192): Launch timeout has expired, giving up wake lock!
W/ActivityManager(  192): Activity idle timeout for ActivityRecord{4182f1c0  org.hedgewars.hedgeroid/.StartGameActivity}
D/dalvikvm(12711): GC_CONCURRENT freed 434K, 9% free 6659K/7239K, paused 2ms+2ms
D/TaskWidgetDataUtils(12711): In trigger refresh list utils 
```

# c# - 单击时按住Shift？

> ID：11071781
> 
> 赞同：0
> 
> 时间：2012-06-17T13:51:25.200
> 
> 标签：c#, api, mouse

我想知道是否可以在单击鼠标时按住 shift 键。

它看起来与此类似： - 如果您可以使用 SendKeys.SendWait 函数模拟鼠标点击 -`SendKeys.SendWait(+{Mouseclick});` 到目前为止，我已经调用了 API“User32.dll”来调用鼠标点击：

```
public const int MOUSEEVENTF_LEFTDOWN = 0x2;
public const int MOUSEEVENTF_LEFTUP = 0x4;
public const int MOUSEEVENTF_MIDDLEDOWN = 0x20;
public const int MOUSEEVENTF_MIDDLEUP = 0x40;
public const int MOUSEEVENTF_RIGHTDOWN = 0x8;
public const int MOUSEEVENTF_RIGHTUP = 0x10;
[DllImport("User32.dll")]
public static extern int mouse_event(int dwFlags, int dx, int dy, int cButton, int dwExtra);

 mouse_event(MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0);
mouse_event(MOUSEEVENTF_LEFTUP, 0, 0, 0, 0); 
```

然而; 是否可以同时按住Shift键？

问候， DotTutorials

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T13:56:09.563

您应该能够使用该[`keybd_event`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646304%28v=vs.85%29.aspx)功能来模拟 Shift 键。就像是：

```
public const int MOUSEEVENTF_LEFTDOWN = 0x2;
public const int MOUSEEVENTF_LEFTUP = 0x4;
public const int MOUSEEVENTF_MIDDLEDOWN = 0x20;
public const int MOUSEEVENTF_MIDDLEUP = 0x40;
public const int MOUSEEVENTF_RIGHTDOWN = 0x8;
public const int MOUSEEVENTF_RIGHTUP = 0x10;
public const byte KEYBDEVENTF_SHIFTVIRTUAL = 0x10;
public const byte KEYBDEVENTF_SHIFTSCANCODE = 0x2A;
public const int KEYBDEVENTF_KEYDOWN = 0;
public const int KEYBDEVENTF_KEYUP = 2;
[DllImport("User32.dll")]
public static extern int mouse_event(int dwFlags, int dx, int dy, int cButton, int dwExtra);
[DllImport("user32.dll", EntryPoint="keybd_event", CharSet=CharSet.Auto, ExactSpelling=true)]
public static extern void keybd_event(byte vk, byte scan, int flags, int extrainfo);

// shift down
keybd_event(KEYBDEVENTF_SHIFTVIRTUAL, KEYBDEVENTF_SHIFTSCANCODE, KEYBDEVENTF_KEYDOWN, 0);
mouse_event(MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0);
mouse_event(MOUSEEVENTF_LEFTUP, 0, 0, 0, 0);
// shift up
keybd_event(KEYBDEVENTF_SHIFTVIRTUAL, KEYBDEVENTF_SHIFTSCANCODE, KEYBDEVENTF_KEYUP, 0); 
```

# eclipse - 尝试从 Eclipse 初始化 Android 1.6 模拟器时出错

> ID：11071784
> 
> 赞同：1
> 
> 时间：2012-06-17T13:51:36.380
> 
> 标签：eclipse, android-emulator, initialization

我是一名自学 Java 大佬。

参考我之前提出的类似问题：

[早期关于从 Eclipse 加载 Android VD 时出错的问题](https://stackoverflow.com/questions/11050576/error-when-trying-to-load-android-1-6-virtual-device-from-eclipse)

在提出之前的类似问题之后 @alextsc 建议我将安装的 jdk 版本从 JDK1.7.0_03 更改为 jdk 6 版本，因为 Android 工具仅适用于版本 jdk 6 (1.6)

我已经这样做了，然后更改了项目设置：我检查了项目设置下 Java 编译器中的默认合规性设置为 1.6，并更改了项目的运行配置 - 确保 jre 设置为版本 jre6 Plus 我更改了windows 环境变量到 ...java\jdk1.6.0_04

希望这可以让我的项目编译 - 但它没有！

现在我的问题是：

如何让项目使用 jdk 1.6 编译？

我还需要配置什么？

*   归根结底，我只想在 Android 1.6 Emulator 上安装一个 HelloWorld 测试程序——从 Eclipse IDE 环境运行。

我确实再次尝试运行默认代码，如下所示：

```
package com.leigh.namespace;

import android.app.Activity;
import android.os.Bundle;

public class HelloWorldActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

我已经从 AVD 管理器成功启动了 Android 1.6 VM，所以 VM 软件似乎没问题

并且源代码似乎没问题 - 并且是应该初始化 VM 的默认代码：这次我收到了不同的错误消息，如下所示：

```
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (classFileParser.cpp:3494), pid=5904, tid=3496
#  Error: ShouldNotReachHere()
#
# JRE version: 6.0_27-b07
# Java VM: Java HotSpot(TM) Client VM (20.2-b06 mixed mode windows-x86 )
# An error report file with more information is saved as:
# C:\Users\leighman\workspace\HelloWorld\hs_err_pid5904.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# 
```

日志文件在这里：

> - - - - - - - - 线 - - - - - - - -
> 
> 当前线程 (0x018a9c00): JavaThread "未知线程" [_thread_in_vm, id=3516, stack(0x00350000,0x003a0000)]
> 
> 堆栈：[0x00350000,0x003a0000]，sp=0x0039f86c，可用空间=318k 本机帧：（J=编译的 Java 代码，j=解释，Vv=VM 代码，C=本机代码）V [jvm.dll+0x1335ba] V [ jvm.dll+0x12e56b] V [jvm.dll+0x1639e] V [jvm.dll+0x17bdf] V [jvm.dll+0x26cc5] V [jvm.dll+0x27506] V [jvm.dll+0x278b5] V [jvm. dll+0x27949] V [jvm.dll+0x27a0c] V [jvm.dll+0x27a8a] V [jvm.dll+0x27b6d] V [jvm.dll+0x27e39] V [jvm.dll+0x6c383] V [jvm.dll+ 0x6c75c] V [jvm.dll+0xf9b4c] V [jvm.dll+0x11848b] V [jvm.dll+0x9eb60] C [javaw.exe+0x1657] C [javaw.exe+0x1e2c] C [javaw.exe+0x8614] C [kernel32.dll+0x4ed6c] BaseThreadInitThunk+0x12 C [ntdll.dll+0x6377b] RtlInitializeExceptionChain+0xef C [ntdll.dll+0x6374e] RtlInitializeExceptionChain+0xc2
> 
> - - - - - - - - 过程 - - - - - - - -
> 
> Java 线程：（=> 当前线程）
> 
> 其他主题：
> 
> => 0x018a9c00（已退出）JavaThread“未知线程”[_thread_in_vm，id=3516，堆栈（0x00350000,0x003a0000）]
> 
> VM 状态：不在安全点（未完全初始化）
> 
> VM Mutex/Monitor 当前由一个线程拥有：无
> 
> 动态库： 0x00400000 - 0x00424000 C:\Program Files\Java\jre6\bin\javaw.exe 0x77bf0000 - 0x77d2c000 C:\windows\SYSTEM32\ntdll.dll 0x77410000 - 0x774e4000 C:\windows\system32\kernel0032-dl​​l 0x77d2c000 C:\windows\system32\KERNELBASE.dll 0x76220000 - 0x762c0000 C:\windows\system32\ADVAPI32.dll 0x776c0000 - 0x7776c000 C:\windows\system32\msvcrt.dll 0x76370000 - 0x76370000 - 0x7638039000 C:\windows\SYSTEMa\SYSTEMa.dll - 0x76141000 C:\windows\system32\RPCRT4.dll 0x775f0000 - 0x776b9000 C:\windows\system32\USER32.dll 0x77340000 - 0x7738e000 C:\windows\system32\GDI32.dll 0x77d800000 - 0x77d38C:\windows\system2a dll 0x774f0000 - 0x7758d000 C:\windows\system32\USP10.dll 0x77390000 - 0x773af000 C:\windows\system32\IMM32.DLL 0x76150000 - 0x7621c000 C:\windows\system32\MSCTF。dll 0x7c340000 - 0x7c396000 C:\Program Files\Java\jre6\bin\msvcr71.dll 0x6d7f0000 - 0x6da9f000 C:\Program Files\Java\jre6\bin\client\jvm.dll 0x73fb0000 - 0x73fe2000 C:\windows\system32\WINMM .dll 0x75c80000 - 0x75ccc000 C:\windows\system32\apphelp.dll 0x6d7a0000 - 0x6d7ac000 C:\Program Files\Java\jre6\bin\verify.dll 0x6d320000 - 0x6d33f000 C:\Program Files\Java\jre6\bin\java。 dll 0x6d370000 - 0x6d399000 C:\Program Files\Java\jre6\bin\jdwp.dll 0x6d690000 - 0x6d696000 C:\Program Files\Java\jre6\bin\npt.dll 0x6d7e0000 - 0x6d7ef000 C:\Program Files\Java\jre6\ bin\zip.dll 0x76090000 - 0x76095000 C:\windows\system32\PSAPI.DLL\windows\system32\WINMM.dll 0x75c80000 - 0x75ccc000 C:\windows\system32\apphelp.dll 0x6d7a0000 - 0x6d7ac000 C:\Program Files\Java\jre6\bin\verify.dll 0x6d320000 - 0x6d33f000 C:\Program Files\Java\ jre6\bin\java.dll 0x6d370000 - 0x6d399000 C:\Program Files\Java\jre6\bin\jdwp.dll 0x6d690000 - 0x6d696000 C:\Program Files\Java\jre6\bin\npt.dll 0x6d7e0000 - 0x6d7ef000 C:\Program文件\Java\jre6\bin\zip.dll 0x76090000 - 0x76095000 C:\windows\system32\PSAPI.DLL\windows\system32\WINMM.dll 0x75c80000 - 0x75ccc000 C:\windows\system32\apphelp.dll 0x6d7a0000 - 0x6d7ac000 C:\Program Files\Java\jre6\bin\verify.dll 0x6d320000 - 0x6d33f000 C:\Program Files\Java\ jre6\bin\java.dll 0x6d370000 - 0x6d399000 C:\Program Files\Java\jre6\bin\jdwp.dll 0x6d690000 - 0x6d696000 C:\Program Files\Java\jre6\bin\npt.dll 0x6d7e0000 - 0x6d7ef000 C:\Program文件\Java\jre6\bin\zip.dll 0x76090000 - 0x76095000 C:\windows\system32\PSAPI.DLL\Program Files\Java\jre6\bin\zip.dll 0x76090000 - 0x76095000 C:\windows\system32\PSAPI.DLL\Program Files\Java\jre6\bin\zip.dll 0x76090000 - 0x76095000 C:\windows\system32\PSAPI.DLL
> 
> VM 参数：jvm_args:-agentlib:jdwp=transport=dt_socket,suspend=y,address=localhost:1554 -Dfile.encoding=Cp1252 -Xbootclasspath:C:\Program Files\Android\android-sdk\platforms\android-4\ android.jar java_command: com.leigh.namespace.HelloWorldActivity 启动器类型：SUN_STANDARD
> 
> 环境变量：CLASSPATH=.;.. PATH=C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C:/Program Files/Java/jre7/lib/i386 ;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\windows\system32;C:\windows;C:\windows\System32\Wbem;C:\windows\System32\WindowsPowerShell\v1.0\ ;C:\Program Files\Broadcom\Broadcom 802.11 Network Adapter\Driver;C:\Program Files\Windows Live\Shared;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\QuickTime\QTSystem\; C:\Program Files\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;c:\Profram Files\Java\jdk1.7.0 _03\bin;C:\Eclipse\eclipse; USERNAME=leighman OS=Windows_NT PROCESSOR_IDENTIFIER=x86 Family 6 Model 28 Stepping 10, GenuineIntel
> 
> - - - - - - - - 系统 - - - - - - - -
> 
> 操作系统：Windows 7 Build 7601 Service Pack 1
> 
> CPU：共 4 个（每个 cpu 2 个内核，每个内核 2 个线程）系列 6 型号 28 stepping 10、cmov、cx8、fxsr、mmx、sse、sse2、sse3、ssse3、ht
> 
> 内存：4k 页，物理 1037616k（107780k 空闲），交换 2086192k（357112k 空闲）
> 
> vm_info：适用于 windows-x86 JRE (1.6.0_27-b07) 的 Java HotSpot(TM) 客户端 VM (20.2-b06)，由“java_re”和 MS VC++ 7.1 (VS2003) 于 2011 年 7 月 19 日 01:04:42 构建
> 
> 时间：Sun Jun 17 12:41:45 2012 经过时间：0 秒

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:41:35.317

您是否尝试过重新安装java（当然是先卸载）

# json - 使用 Json.NET 使用自定义对象数组反序列化 JSON

> ID：11071785
> 
> 赞同：1
> 
> 时间：2012-06-17T13:51:39.350
> 
> 标签：json, serialization, json.net, root

我收到了一个 JSON 文件，其中包含一个根元素“用户”和一个“用户”项目列表。

我正在尝试将 json 反序列化为一个`List`名为 的自定义类`User`，但我不断得到一个`JsonSerializationException`，它无法覆盖它。

我尝试了以下方法：

代码：

```
 public class User
{
    public int ID { get; set; }
    public bool Active { get; set; }
    public string Name { get; set; }
}

public class Response
{
    public List<User> Users { get; set; }
    public JObject Exception { get; set; }
} 
```

和 -

```
public Response DeserializeJSON(string json)
    {
        Response deserialized = JsonConvert.DeserializeObject<Response>(json);
        return deserialized;
    } 
```

JSON：

```
 {
  "Users": {
        "User": [
          {
            "id": "1",
            "active": "true",
            "name": "Avi"
          },
          {
            "id": "2",
            "active": "false",
            "name": "Shira"
          },
          {
            "id": "3",
            "active": "false",
            "name": "Moshe"
          },
          {
            "id": "4",
            "active": "false",
            "name": "Kobi"
          },
          {
            "id": "5",
            "active": "true",
            "name": "Yael"
          }
        ]
      }
} 
```

造型不好见谅！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:55:55.037

在您的 Response 类中，尝试在构造函数中初始化集合。

```
public class Response
{
    public Response()
    {
        Users = new List<User>();
    }
    public IEnumerable<User> Users { get; set; }
    public JObject Exception { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:22:20.043

啊，我需要开始更好地阅读 JSON... :) 我的问题是这个 JSON 字符串实际上有 2 个“包装器”：

根元素是“Users”，其中包含一个名为“User”的元素。这修复了它：

```
public class User
{
    public int id { get; set; }
    public bool active { get; set; }
    public string name { get; set; }
}

public class Response
{
    public ResponseContent users { get; set; }
}

public class ResponseContent
{
    public List<User> user;
} 
```

谢谢！:)

# java - 如何使用 ContentProvider 处理对文件系统的实际数据读取和写入？

> ID：11071787
> 
> 赞同：1
> 
> 时间：2012-06-17T13:52:09.257
> 
> 标签：java, android, filesystems, android-contentprovider

我正在尝试开发一个程序，该程序可以使实际上不在设备上存储的文件中的数据看起来像是**存储在设备上的文件**。我得到的印象是我需要调整以适应我的目的的 ContentProvider 的一部分是 openFile 命令。当然，openFile 会生成一个 ParcelFileDescriptor。这是我碰壁的地方，因为我在 ParcelFileDescriptor 中找不到任何接收或返回字节或字节数组或文件数据的命令。

例如，假设我想创建一个在后台运行的应用程序，并欺骗我的默认 Android 文件资源管理器，让我认为我的“文档”文件夹中有一个名为“Phantom.txt”的文件，即使实际上没有这样的文件存在于存储空间。然后，当用户打开这个不存在的文件时，后台应用程序提供的数据应该包含（但显然不能包含，因为它甚至不存在）。此应用程序的代码必须包含以下代码：

```
public class myContentProvider extends ContentProvider {

    public ParcelFileDescriptor openFile(Uri uri, String mode) {
        if(uri.toString()=="file:\\\\Documents\\Phantom.txt") {
            return new myPFD();
        } else {
            return super.openFile(uri, mode);
        }
    }
}

public class myPFD extends ParcelFileDescriptor {

    private final String filedata = "This file doesn't really exist!\nThis text is actually part of an application!\nIt isn't saved to your flash memory!\nWeird, isn't it?";
    private int readPosition;

    public myPFD() {
        super(ParcelFileDescriptor.open(File.createTempFile("uselessParameterFiller", ".tmp"), ParcelFileDescriptor.MODE_READ_ONLY));
        readPosition = 0;
    }

    //NOTE: There is no actual read(byte [] b) command in ParcelFileDescriptor,
    //But this illustrates the kind of functionality I'm looking to achieve.
    //I just need to replace the nonexistant ParcelFileDescriptor.read(byte [] b)
    //with whatever Android actually uses to read the actual data of the file.

    public int read(byte [] b) {
        byte [] dataAsBytes = filedata.getBytes();
        if(readPosition<dataAsBytes.length) {
            int x = readPosition;
            for(x=readPosition;x<Math.min(readPosition + b.length, dataAsBytes.length);x++){
                b[x - readPosition] = dataAsBytes[x];
            }
            int output = x - readPosition;
            readPosition = x;
            return output;
        } else {
            return -1;
        }
    }

    //For simplicity's sake, I have forgone writing customizations of other reading
    //commands such as "int read()", and "int read(byte [], int, int)". Also the
    //command "seek(long)", for assigning a reading position.
    //I have also neglected to show any commands that would allow me to recieve and
    //handle any data that an external app might try to write to this nonexistant
    //file. Though I would also like to know how to do this.
} 
```

# android - 【安卓界面】是什么？我可以创建它吗？

> ID：11071791
> 
> 赞同：-4
> 
> 时间：2012-06-17T13:52:48.320
> 
> 标签：android, android-layout, android-widget

[图片链接](http://i.stack.imgur.com/zAqrE.png)

我想创建这个管，但我不知道（方法、类、视图或其他）来创建它。

你能通过链接，方法，其他回答我吗？

谢谢你的每一个回答

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T13:55:47.213

那是一个`ProgressBar`小部件，带有`style="?android:attr/progressBarStyleHorizontal"`. 第一个使用适用于 Android 1.x/2.x 的平台标准图像。底部的两个用他们自己的替换背景，`LevelListDrawable`用绿色替换黄色。

# git - Wiki - 文件版本控制

> ID：11071810
> 
> 赞同：4
> 
> 时间：2012-06-17T13:55:35.587
> 
> 标签：git, svn, version-control, version, wiki

我正在构建一个类似 wiki 的网站，并且想知道如何实现文件版本控制以创建文章历史记录。当有人编辑文件时，我希望能够显示哪些部分已被编辑，并在必要时恢复到以前的文件。

编辑：感谢您的回复。我开始浏览它们，然后我意识到我的帖子不是很精确。所以我可以补充一点，我正在使用 Java 作为开发语言（准确地说是通过 Grails 进行的 Groovy）。此外，我正在构建的应用程序不仅仅是一个 Wiki。它做了很多其他的事情，但有些部分应该可以由几个用户编辑。因此，我正在为该特定工作寻找最佳人选。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T21:11:06.520

我只想看看[ikiwiki](http://ikiwiki.info)或[gitit](http://gitit.net)是如何实现的（分别是 Perl 和 Haskell），因为它们都能够使用 Git 作为后端。

至于 ikiwiki（我在工作中将它用于我的 Intranet wiki），它将页面源（wiki 格式）保存为纯文件，并在每次保存（或`git push`从外部）后将站点“编译”为一组静态页面. 它使用`make`-style 方法来编译站点，但只重建更改的页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T12:01:02.843

你可能想看看[Gollum](https://github.com/github/gollum)，Github 的 git 驱动的 wiki 引擎。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T14:11:20.740

说到 Git，你所需要的已经以[`git blame`](http://www.kernel.org/pub/software/scm/git/docs/git-blame.html)和的形式实现了[`git checkout`](https://stackoverflow.com/questions/215718/how-do-i-reset-revert-a-specific-file-to-a-specific-revision-using-git)。

即使您*可以*使用这些命令来完成工作，您可能会更好地使用[`libgit2`](http://libgit2.github.com/)它基本上是您需要的所有功能，但作为库而不是可执行文件。

# windows-phone-7 - 不使用 pin 的 Twitter 身份验证

> ID：11071817
> 
> 赞同：5
> 
> 时间：2012-06-17T13:56:39.320
> 
> 标签：windows-phone-7, authentication, twitter

我正在尝试对 Windows Phone 中的用户帐户进行身份验证。我为这项工作找到了这个 C# 库（tweetsharp）。

他们的例子很清楚，但他们使用 pin 码来验证用户。

```
using TweetSharp;

// Pass your credentials to the service
TwitterService service = new TwitterService("consumerKey", "consumerSecret");

// Step 1 - Retrieve an OAuth Request Token
OAuthRequestToken requestToken = service.GetRequestToken();

// Step 2 - Redirect to the OAuth Authorization URL
Uri uri = service.GetAuthorizationUri(requestToken);
Process.Start(uri.ToString());

// Step 3 - Exchange the Request Token for an Access Token
string verifier = "123456"; // <-- This is input into your application by your user
OAuthAccessToken access = service.GetAccessToken(requestToken, verifier);

// Step 4 - User authenticates using the Access Token
service.AuthenticateWith(access.Token, access.TokenSecret);
IEnumerable<TwitterStatus> mentions = service.ListTweetsMentioningMe(); 
```

我想知道是否可以在没有密码的情况下执行此操作？我尝试过不需要代码的应用程序。这是否意味着 tweetsharp 已经过时了？

知道我是否仍然可以在不使用 pin 部分的情况下使用 tweetsharp 进行身份验证吗？或者有没有其他适用于 Windows Phone 的 SDK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:11:11.277

在[TweetSharp](https://github.com/danielcrenna/tweetsharp)页面上还提到[`xAuth`](https://dev.twitter.com/docs/oauth/xauth)：

> 如果您正在构建移动应用程序并希望从无缝的身份验证体验中受益，而无需为用户执行额外步骤，则需要将您的应用程序注册到 Twitter 的 xAuth 支持中。您必须完成此步骤才能使 xAuth 正常运行。

```
using TweetSharp;

// OAuth Access Token Exchange
TwitterService service = new TwitterService("consumerKey", "consumerSecret");
OAuthAccessToken access = service.GetAccessTokenWithXAuth("username", "password"); 
```

回应您的评论，另一种选择是在您的移动应用程序中使用在 WebBrowser 控件中打开的配套 Web 应用程序，请参阅[https://github.com/danielcrenna/tweetsharp#authenticating-a-browser-application](https://github.com/danielcrenna/tweetsharp#authenticating-a-browser-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:49:19.520

除了 Tweetsharp，您还可以使用[Hammock](http://nuget.org/packages/Hammock)库来访问 Twitter API。这是一个[博客](http://sudheerkovalam.wordpress.com/2010/08/28/a-windows-phone-7-twitter-application-part-1/)，它解释了如何使用 Hammock 为 twitter 实现 OAuth。

希望对您有所帮助。

# cdi - Flyway 的 CDI 扩展

> ID：11071821
> 
> 赞同：22
> 
> 时间：2012-06-17T13:57:17.550
> 
> 标签：cdi, ejb-3.1, flyway

在休眠连接到我的 JBoss AS 7.1 之前，我尝试在我的应用程序中运行 flyway。我尝试使用`@javax.ejb.Startup`注释，但这会在初始化 Hibernate 并检查数据库方案后执行。

据我了解，我们可以使用在 Hibernate 初始化之前挂钩的 CDI 扩展。flyway开箱即用是否有一些支持？如果没有，有没有人尝试过这样做？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-19T09:57:20.977

好的，我终于知道了如何做到这一点：我必须使用 Hibernate Integration API。这是我必须编写的全部代码：

```
public class FlywayIntegrator implements Integrator {

  @Override
  public void integrate(final Configuration configuration, final SessionFactoryImplementor sessionFactoryImplementor, final SessionFactoryServiceRegistry sessionFactoryServiceRegistry) {
    final Flyway flyway = new Flyway();

    flyway.setDataSource(....);
    flyway.migrate();
  }

  @Override
  public void integrate(final MetadataImplementor metadataImplementor, final SessionFactoryImplementor sessionFactoryImplementor, final SessionFactoryServiceRegistry sessionFactoryServiceRegistry) {
    //no-op
  }

  @Override
  public void disintegrate(final SessionFactoryImplementor sessionFactoryImplementor, final SessionFactoryServiceRegistry sessionFactoryServiceRegistry) {
    //no-op
  }
} 
```

如果有人对更多细节感兴趣，我创建了一个 github 项目来证明：[https ://github.com/dobermai/Hibernate-Flyway-Integration](https://github.com/dobermai/Hibernate-Flyway-Integration)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T20:17:53.783

CDI 定义了自己的生命周期，在应用程序启动/停止时执行。（你不应该已经知道了吗：[这](http://docs.jboss.org/weld/reference/latest/en-US/html/extend.html#d0e4876)是了解基本机制的好地方。）

问题 - 据我所知 - 是 Hibernate 初始化过程没有直接链接到 CDI 启动。这意味着我不确定依赖 Hibernate 和 CDI“事件”之间的关系是否安全。当然，没有什么比 CDI-Event 更胜一筹了`HibernateInitialized`。

话虽如此，我会试一试 :) 您应该实现一个简单的扩展，该扩展连接到`BeforeBeanDiscovery`，这是最早的。

[此在线演示文稿](http://prezi.com/hsbhnxd4t3by/cdi-extensions/)概述了不同的 CDI 事件及其顺序。不幸的是，它是德语的。

# java - 为什么要选择使用 finally 语句而不是 catch 语句？（爪哇）

> ID：11071822
> 
> 赞同：3
> 
> 时间：2012-06-17T13:57:23.043
> 
> 标签：java, exception-handling, try-catch, try-catch-finally

我相对较新`Java`，我仍在努力了解基本面。`try-catch`我一直在以语句的形式学习异常处理。这些很好，我明白我应该如何以及为什么要使用它们。让我感到困惑的是这些`try-finally`陈述。

更具体地说，我不明白为什么我不能只使用`catch`语句来做同样的事情。选择将一些命令放在`finally`语句中而不是在语句中放置相同的语句有什么好处`catch`？语句不会仍然以完全相同的方式执行吗？

对不起，如果这是一个愚蠢或幼稚的问题。我只是无法弄清楚使用该`finally`语句的好处。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T14:00:01.673

`catch`: 当出现问题时。
`finally`: 当某事/没有出错时。
就像如果你想关闭数据库连接而不管是否抛出异常，在这种情况下`finally`将是放置代码的最佳位置。
此外，如果您有多个带有一些冗余代码的 catch 块，您可以将冗余部分移动到`finally`块中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T13:59:10.720

catch 语句不会总是运行。finally 语句保证运行。例如：如果您需要关闭流。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T14:05:01.117

`finally`无论是否抛出异常，都会执行分支。仅当`catch`从`try`块中引发指定的异常时，才会执行分支。

`finally`当您想确保在块的 and 处正确释放资源（例如关闭打开的文件）时，通常会使用`try`，无论是否`try`完全成功 - 这不仅可以确保块中的代码`finally`如果`try`块成功或任何`catch`分支被执行，但也当抛出未在块中列出的`catch`异常时（例如未经检查的异常或运行时错误） ，则执行

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T14:06:11.917

```
try {
    //...
} catch(SomeException ex) {
    //code to execute if exception occurs
} finally {
    //code to execute no matter whether the exception occured or not
    //usually you put code to close resources here so that in any condition the
    //resources are released back to the system
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-17T14:10:52.430

finally 块**总是被执行**，无论是否发生异常。而 catch 块**只有在发生或抛出可捕获的*异常***时才会执行。

如果异常的类与 catch 语句中的定义匹配（其中之一），则异常是“*可捕获的”。*例如：

`catch(AnException ex | AnOtherException ex2) {}`

只会捕获类型的异常`AnException`or `AnOtherException` *（请注意，它是 JSE7 错字）*。

我建议你阅读 JSL 关于 的执行顺序[**`try-catch-finally statement`**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20.2)，它包含所有细节。

请注意，自JDK7以来`finally`通常用于释放资源（即使用`close()`方法），您可以使用[try-with-ressource](http://www.oracle.com/technetwork/articles/java/trywithresources-401775.html) [语句](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)自动为您关闭资源，它适用于实现[AutoCloseable](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)的类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-17T14:01:05.677

*Try*是针对*Catch(Exception e)*的特定异常并执行*finally*语句。

# ruby-on-rails - 动态切换到另一个表单部分时如何保存表单字段值？

> ID：11071828
> 
> 赞同：0
> 
> 时间：2012-06-17T13:58:11.687
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有一个名为的页面`/index`，您可以添加一个`House`and `Dog`。该页面一开始是空白的，但侧面有链接，您可以单击这些链接以动态调出其中一个表单。这些形式是它们自己的部分。

对于这个问题/示例，我将使用 Dog 模型。A`Dog`属于`House`。

```
class Dog
 attr_accessible :name, :primary_color, :secondary_color, :house_id......... 
 belongs_to :house
end 
```

狗控制器

```
def new
 @dog = Dog.new

 respond_to do |format|
  format.js
 end
end 
```

狗/_form.html.erb

```
<%= simple_form_for(@dog, :remote => true) do |f| %>
  <%= render :partial => "shared/error_message", :locals => { :f => f } %>
    <%= f.input :name %>
    <%= f.input :primary_color %>
    <%= f.input :secondary_color %>
    <%= f.association :house, :prompt => "Select a House" %>      
  <%= f.button :submit, 'Done' %>
<% end %> 
```

页面控制器

```
def index

  respond_to do |format|
    format.html
  end
end 
```

页面/index.html.erb

```
<li><%= link_to "Dog", new_dog_path, :remote => true %></li>

<div id="generate-form">
</div> 
```

狗/new.js.erb

```
$("#generate-form").html("<%= escape_javascript(render(:partial => 'dogs/form', locals: { dog: @dog })) %>"); 
```

但现在有时，您可能正在添加一只狗，但需要先添加它所在的房子，然后才能继续。现在，如果您这样做，它只会删除整个 Dog 表格。切换到其他表单时如何保存这些字段的进度？当用户退出页面时怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:49:50.943

有很多方法可以做到这一点，这是我的。

首先，我将删除从您的 jQuery 中加载部分内容的调用。这就是你的问题所在。因为每次加载表单时，它都会编写一个新版本的表单。

相反，我会将它们都加载到 html 本身中，而不依赖于 jQuery 调用。然后允许 jQuery 调用只是切换隐藏/显示。像这样：

```
<div class="dog-form">
  <%= render(:partial => 'dogs/form', locals: { dog: @dog }) %>
</div>
<div class="house-form">
  <%= render(:partial => 'house/form', locals: { house: @house }) %>
</div> 
```

然后，您的 jQuery 可以如下所示：

```
$("#toggle-dog-form").click(function(){ $(".dog-form").toggle() };
$("#toggle-house-form").click(function(){ $(".house-form").toggle() }; 
```

**更新**

如果你真的需要确保这些表格在那个电话中因为一些我没有听说过的外部原因而被重新加载。然后，您可以在原始 jQuery 调用中添加一个条件，以查看这些输入字段中的任何一个是否已被填充。

# android - 在 Eclipse 中运行的 AVD 几乎从未运行过应用程序

> ID：11071830
> 
> 赞同：0
> 
> 时间：2012-06-17T13:58:23.913
> 
> 标签：android, eclipse, runtime-error, avd

我是 android 开发的新手，目前没有 android 设备，所以我依靠 avd 来运行我的应用程序，但它是高度不可预测的。

我目前处于设置应用程序菜单屏幕的阶段，并已按如下方式逐步对其进行测试：

*   我将所有图形放在屏幕上，应用程序运行良好。

*   我添加了一个功能来按下声音按钮以禁用声音并将“声音激活”按钮更改为“声音停用”按钮。

*   当我尝试在 avd 中运行应用程序时，它会打开并显示标题栏和顶部栏。通常它会像这样打开，但在短暂的暂停后，这些栏会被隐藏并且应用程序会运行。但这一次它只是显示了标题栏，并没有进一步说明。

*   重新启动 Eclipse 后，应用程序运行良好，我的更改工作。

*   我添加了 2 行代码（一个 if 语句和一个播放声音语句）以使按钮在激活声音时播放声音。

*   现在应用程序只会显示标题，不会进一步前进。我已经重新启动了 eclipse 和我的电脑几次，问题仍然存在。自从上次完美运行以来，我没有修改菜单文件以外的任何文件，并且 logCat 没有显示任何错误，除了几分钟后的活动空闲超时。

在网上寻找问题只会让我对根本没有启动的应用程序提出问题。我已经尝试了这些问题的解决方案，即使它们与我的问题不同。

编辑：

它现在无需我更改任何代码即可工作。在我的电脑一夜之间关闭后，它运行得很好。尽管如果再次发生任何事情，我可以解决问题的任何答案都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:03:02.917

您的 logCat 输出中是否有任何错误？

我在 MapView 上遇到了类似的问题 - 我解决了将 GooleAPI 设置为目标而不是 Android 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:51:43.497

它认为最好先查看 LogCat 结果。如果应用程序不想加载是有原因的，它可能会在那里。在 Eclipse 中打开 LogCat 结果：Window > Show View > LogCat

您可以尝试的另一件事（有时可以解决问题）是清理您的项目。特别是经过一些开发/测试时间之后，这是一个好主意。在 Eclipse 中：项目 > 清理..

# java - javascript 在wicket 1.5 中引用顺序

> ID：11071838
> 
> 赞同：1
> 
> 时间：2012-06-17T13:59:54.667
> 
> 标签：java, javascript, wicket-1.5

自从迁移到 wicket 1.5 后，我的页面中的 javascript 引用出现问题。我从检票口页面向标题贡献了一些 js 文件，然后在页面的组件中使用它们。

问题是，如果我使用 wicket 1.5 方式贡献 js - 在其 renderHead 方法中添加贡献 js 的行为，则在页面的 renderHead 或页面添加的行为之前调用使用 js 的组件的 renderHead ，这当然会导致 Uncaught ReferenceError。

知道如何控制js的顺序吗？先感谢您

更新：

经过深入搜索，我发现我愿意做的事情在 wicket 1.5 中几乎是不可能的。正如[这里](https://issues.apache.org/jira/browse/WICKET-2693)所解释的那样， wicket 家伙决定颠倒 js 和 css 的呈现顺序——首先是最深的组件，然后是容器（而不是相反——这是 1.5 之前的行为）。渲染策略无论如何都不可配置。

我不希望他们进行这样的更改，尤其是在不让选项覆盖此配置的情况下。例如，在我的情况下，我有数十个使用 jquery 的组件，到目前为止，这些组件都是从页面中添加的。现在看来，我必须更改所有现有组件才能贡献 jquery（以及任何其他必需的 js）。相当苛刻，绝对不向后兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:16:00.770

根据[Wicket 文档](https://cwiki.apache.org/WICKET/creating-a-behavior-to-use-a-javascript-library.html)：

[引用]

*   在 head 标签中，您将在 renderHead 中提供您的实现
*   就在我们的组件渲染之后，您将覆盖 onRendered 或按照上面的代码示例进行渲染
*   就在我们的组件渲染之前，您将覆盖 onComponentTag

[/引用]

# c# - 如何针对空引用验证 lambda 表达式？

> ID：11071842
> 
> 赞同：0
> 
> 时间：2012-06-17T14:00:15.647
> 
> 标签：c#, lambda, nullreferenceexception

我有一个接受泛型委托作为参数的方法，并将其插入列表中：

```
public void AddFilterMember<T>(Func<T, bool> filterMember)
{
    filter.Add(filterMember);
} 
```

**稍后，所有的委托都在T**类型的实例上被调用，以查明这个实例是否通过了过滤器，即是否为每个调用的**filterMember返回****true**。

 **我注意到可以传递一个无效的 lambda 表达式，如下所示：

```
string str = null;
AddFilterMember(x => str.Contains((string)x)); 
```

这显然会在调用时抛出异常，因为**str**字符串为空。所以我想知道在定义 lambda 表达式时针对空引用（除了它的参数）验证它的最佳方法吗？

我想一种选择是使用 T 的默认实例来调用它，但有时这是不可行的，因为 T 可能没有默认的无参数构造函数。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:04:57.010

我通常这样做：

```
AddFilterMember(
     x => {
           if(str == null) 
             throw new ArgumentNullException("str cannot be null");                     
           str.Contains((string)x)
          }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:10:57.683

这是一个可能的解决方案：

```
public bool AddFilterMember<T>(Func<T, bool> filterMember, T checkValue = default(T))
{
    try
    {
        filterMember(checkValue);
    }
    catch
    {
        return false;
    }
    filter.Add(filterMember);
    return true;
} 
```

如果调用者知道这`default(T)`不起作用，但希望所有实际使用的值都起作用，他们可以指定 为`checkValue`示例。从那里，您只需尝试运行委托并查看它是否有效。返回A`bool`让调用者知道它是否成功完成。

请注意，调用委托可能会导致副作用。这种行为应该被记录下来，这样调用者就不会感到惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T14:19:15.817

相关问题和可能的答案：

[反射 - 获取 lambda 表达式中的方法调用列表](https://stackoverflow.com/questions/717091/reflection-get-the-list-of-method-calls-inside-a-lambda-expression)

但是如果没有 try..catch 围绕实际执行，决定 lambda 表达式稍后是否会抛出是一个 NP 完全问题。

特别是如果，就像在您的示例中一样，lambda 引用的变量在每次执行表达式时可能为空，也可能不为空。如果 lambda 没有检查，那么它可能会抛出。

**回复：一些 T 没有默认值。**

也许是演员表：`(T)null`对于`try..catch`lambda 的测试，因为您专门询问`NullReferenceException`.

-杰西**

# python - 如何提取序列中的第一个和最后一个字符串？

> ID：11071845
> 
> 赞同：-1
> 
> 时间：2012-06-17T14:01:00.420
> 
> 标签：python

我是 python 编程的新手。有人可以建议一些方法来执行以下操作：

整个数据存储在一个文件中并来自 . 而且我不能打乱顺序。

我想提取链的第一个和最后一个节点。有几个这样的链。数据内容以千兆字节为单位。

我对如何在 python 中进行处理一无所知。有人可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:17:29.973

我不确定您的序列是如何工作的，尤其是如何选择开始和结束元素。所以我所做的基本上是我设置了一个起始值，然后匹配一次，然后它试图一遍又一遍地找到相同的值。

首先，我为数据制作了一个生成器。正如您所提到的，您有很多数据，因此您可能会有某种用于行的顺序生成器。我用产生示例行的静态生成器模拟了这一点：

```
>>> def dataReader():
        yield 'a1=hi'
        yield 'b1=hello'
        yield 'a1=how'
        yield 'b1=to'
        yield 'a1=hello'
        yield 'b1=python'
        yield 'a1=format'
        yield 'b1=computer'
        yield 'a1=python'
        yield 'b1=good programming language' 
```

然后我设置了一个空列表，它将保存结果和最后一个元素，该元素被初始化为起始值

```
>>> lst = []
>>> last = 'hi' # as we want to begin with 'hi' which does not have a duplicate? 
```

接下来我遍历数据，用等号分割并比较最后一个值。我正在使用该值`None`来标记先前的值已经找到它的重复项。为了让它更简单一点，我`key`现在完全忽略了，但是如果您需要确保在匹配新值时前一个键与当前键不同，您可以轻松添加更多条件。

```
>>> for line in dataReader():
        key, value = line.split('=')
        if last == None:
            lst.append(line)
            last = value
        elif last == value:
            lst.append(line)
            last = None
>>> lst
['a1=hi', 'b1=hello', 'a1=hello', 'b1=python', 'a1=python', 'b1=good programming language'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:09:28.950

首先查看“列表”是什么，例如。

```
data[0]=hi
data[1]=hello
data[2]=how
data[3]=to
data[4]=hello
data[5]=python
data[6]=format
data[7]=computer
data[8]=python
data[9]=good programming language 
```

或者

多维列表，具体取决于您的数据。

```
data[0][0]=hi
data[0][1]=hello
data[0][2]=how
data[0][3]=to

data[1][0]=hello
data[1][1]=python
data[1][2]=format
data[1][3]=computer
data[1][4]=python
data[1][5]=good programming language 
```

# c# - 拨打wp7的联系电话

> ID：11071849
> 
> 赞同：0
> 
> 时间：2012-06-17T14:01:28.767
> 
> 标签：c#, windows-phone-7

在我的联系人应用程序（对于 wp7）中，我根本无法纠正这个错误。我还在下面添加了一张图片。当我**点击**联系人号码时，我无法拨打该号码。我收到以下错误**- NullReferenceException**。我也使用过PhoneCallTask​​。

![在此处输入图像描述](../Images/08616b3a3959f21dc1154dcfba4e2c9b.png)

在 xaml-

```
<StackPanel x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">

        <TextBlock Text="{Binding Path=DisplayName, Mode=OneWay}" Foreground="{StaticResource PhoneAccentBrush}" FontSize="{StaticResource PhoneFontSizeExtraLarge}" />

        <Border BorderThickness="2" HorizontalAlignment="Left" BorderBrush="{StaticResource PhoneAccentBrush}" >
            <Image Name="Picture" Height="175" Width="175" HorizontalAlignment="Left" />
        </Border>
        <TextBlock Height="50" Name="textBlock1" Text="call mobile" FontSize="40" Margin="0,30,0,0"/>
        <ListBox x:Name="ListBox" ItemsSource="{Binding Path=PhoneNumbers}" FontSize="64" Height="100"  Margin="0,0,0,0" SelectionChanged="ListBox_SelectionChanged">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <!--TextBlock Grid.Column="0" Text="{Binding Path=Kind, Mode=OneWay}" />
                        <TextBlock Grid.Column="1" Text=":  " /-->
                        <TextBlock Grid.Column="2" Text="{Binding Path=PhoneNumber, Mode=OneWay}" />
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </StackPanel> 
```

在 xaml.cs-

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

        //Set the data context for this page to the selected contact
        this.DataContext = App.con;

        try
        {
            //Try to get a picture of the contact
            BitmapImage img = new BitmapImage();
            img.SetSource(App.con.GetPicture());
            Picture.Source = img;
        }
        catch (Exception)
        {
            //can't get a picture of the contact
        }
    }

    private void ListBox_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
    {
        SampleData data = (sender as ListBox).SelectedItem as SampleData;
        ListBoxItem selectedItem = this.ListBox.ItemContainerGenerator.ContainerFromItem(data) as ListBoxItem;
        PhoneCallTask PhoneTask = new PhoneCallTask();
        PhoneTask.PhoneNumber = data.PhoneNumbers;
        PhoneTask.Show();
    }

    public class SampleData
    {
        public string PhoneNumbers { get; set; }
    } 
```

有人可以帮我吗？提前感谢您的辛勤工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:42:53.750

我很确定该`SelectedItem`属性不是 type `SampleData`，因此强制转换将失败并返回 null：

```
SampleData data = (sender as ListBox).SelectedItem as SampleData; 
```

因此，这一行抛出了一个空引用异常，因为`data`是空的：

```
PhoneTask.PhoneNumber = data.PhoneNumbers; 
```

使用调试器，应该很容易证实这个结论——如果你没有使用调试器解决问题的习惯，我真诚地敦促你开始使用它;-)

# mysql - MySQL：RANGE 和 ORDER BY 上的松散索引扫描 - 如何解决？

> ID：11071851
> 
> 赞同：2
> 
> 时间：2012-06-17T14:02:14.400
> 
> 标签：mysql, database, performance, indexing

## 用于`index`范围扫描和`ORDER BY`

为简单起见：我将用户的生日作为时间戳存储在列`birthdate`中`timestamp_registered`，`timestamp_updated`并且`timestamp_lastlogin`我想将其用于`ORDER BY`.

我读到的是，只有当范围列是索引的最后一部分时，mysql才能在范围扫描的情况下使用完整索引。使用索引排序也是一样，排序的列必须是最后一列。如果两者都需要，这是矛盾的。

范围扫描似乎有解决方法，例如使用`IN (...)`，如果没有使用太多参数，或者`UNION SELECT...`

链接：
- [http://www.mysqlperformanceblog.com/2006/08/10/using-union-to-implement-loose-index-scan-to-mysql/](http://www.mysqlperformanceblog.com/2006/08/10/using-union-to-implement-loose-index-scan-to-mysql/)和
- [http://www.mysqlperformanceblog.com/2006 /08/14/mysql-followup-on-union-for-query-optimization-query-profiling/](http://www.mysqlperformanceblog.com/2006/08/14/mysql-followup-on-union-for-query-optimization-query-profiling/)

但是，这些解决方案（在我的情况下使用`IN`或`UNION SELECT...`不起作用，因为几年的生日范围会导致在`IN`or中出现数百或数千个参数`UNION SELECTs`。

因此，无论在数据库中测试 40.000 或 200 万用户，一个查询 ( `LIMIT 20`) 都需要几秒钟。如果我`index`用于快速排序，则过滤速度很慢。如果`index`用于快速过滤，则排序很慢。当然，一旦应用更多过滤（例如，具有`country`或任何其他要应用的参数），过滤将缩小结果并且排序再次变得更快。

但是，有些网站也面临同样的问题，并且解决得非常好……我想知道怎么做？有什么办法可以解决这个问题？

任何提示或想法将不胜感激！非常感谢您！

# perl - 将我自己的编译指示添加到旧的 perl sw 的正确方法

> ID：11071853
> 
> 赞同：6
> 
> 时间：2012-06-17T14:02:21.793
> 
> 标签：perl

我有一个非常旧的 perl 系统（大约 8-10 年），但是一个很大（100+ pm 文件）。现在由于某种原因需要“重新现代化”它 - 一步一步。

我想做的第一件事就是将我的编译指示插入每个模块：

```
use MySw::PerlDefs; 
```

什么将包含[Modern::Perl](https://metacpan.org/module/Modern::Perl)和/或这个问题中的内容：[How to make "use My::defaults" with modern perl & utf8 defaults?](https://stackoverflow.com/questions/6412799/perl-how-to-make-use-mydefaults-with-modern-perl-utf8-defaults)

QST1：推荐的方式是什么？

1.  添加`use MySw::PerlDefs;`所以会得到

    ```
    包 MySw::SomePackage;
    使用 MySw::PerlDefs；#我的新“语用”

    ```

2.  或者在包声明之后添加包含在 BEGIN 块中的 PerlDefs？例如：

    ```
    包 MySw::SomePackage;
     BEGIN {use MySw::PerlDefs;} #my new "pragma" in the BEGIN block

    ```

问题：

*   首选方法是什么？
*   有什么区别和/或缺点？

*Ps：我理解比编译时执行的BEGIN，但是在上面的上下文中-它不比“简单使用”更好吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T16:12:59.187

在 BEGIN 块中包装使用是行不通的；lexical pragma 的效果不会超出块的末尾。

比较：

```
$ perl -e'BEGIN{ use Modern::Perl; } $x=42; print "$x\n"'
42
$ perl -e'use Modern::Perl; $x=42; print "$x\n"'
Global symbol "$x" requires explicit package name at -e line 1.
Global symbol "$x" requires explicit package name at -e line 1.
Execution of -e aborted due to compilation errors. 
```

# php - mysql用户统计

> ID：11071854
> 
> 赞同：0
> 
> 时间：2012-06-17T14:02:22.900
> 
> 标签：php, mysql

快速方法说明：

我有两个表，我们将它们命名为表一和表二。每个表记录都有其作者（用户）的 id。每个用户的记录没有限制。

我想为每个用户运行一个统计页面。

例如，当 John 登录时：

约翰 | 20 个（列表）| B 150（列表）

**演示代码**

```
$a = mysql_query("SELECT * FROM A WHERE userID='$userID'");
$b = mysql_query("SELECT * FROM B WHERE userID='$userID'");

$a_num=mysql_num_rows($a);
$b_num=mysql_num_rows($b);

$echo "$userID | $a_num of A <a href='/a/$userID'>(list)</a> | $b_num of B <a href='/b/$userID'>(list)</a> "; 
```

**问题：**

那么，当表记录数达到几百或几千时，检查记录数（每次用户访问他的统计页面）是否是最佳解决方案？有没有更好的方法来运行统计数据？也许是一个单独的表来计算每个用户的记录？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:10:28.993

由于您似乎没有使用结果集本身，

```
$a = mysql_query("SELECT COUNT(*) FROM A WHERE userID='$userID'"); 
```

将在 1 步中为您提供所需的计数。此外，它很可能比你正在做的要快得多。

其次，您正在考虑的那种优化绝对是可能的（`group by userID`您只需要一个，并且每小时或每天或其他任何时间运行该脚本，具体取决于所需的准确性）但我真的会等待那种东西直到你确定你需要它，因为这意味着服务器需要额外的工作和额外的代码来维护。

第三也是最后，摆脱不推荐使用的 mysql_query 调用，并查找准备好的语句。一旦你习惯了它们，就会更安全，也不会更难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:09:44.130

您可以告诉 MySQL 为您计算它们：

```
SELECT COUNT(*) AS a_num FROM A WHERE userID='$userID' 
```

这最大限度地减少了应用程序和 MySQL 服务器之间的 I/O。自己对此进行基准测试。

# c# - 在 aspx 页面中使用 OnInit 属性

> ID：11071857
> 
> 赞同：0
> 
> 时间：2012-06-17T14:02:46.293
> 
> 标签：c#, asp.net, user-controls

我在 MyDashboards.aspx 页面中添加了一个用户控件；

```
<uc:dlUC ID="dashboardListUserControl" runat="server" OnInit="ConfigureDashboardList" /> 
```

在 MyDashboards.aspx.cs 即代码页中，我有以下功能：

```
public void ConfigureDashboardList(EventArgs e)
{} 
```

我收到以下错误：

```
No overload for 'ConfigureDashboardList' matches delegate 'System.EventHandler' 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:05:42.343

您应该添加 sender 参数

```
public void ConfigureDashboardList(object sender,EventArgs e){} 
```

# javascript - 使用表单隐藏字段将 javascript 数组发布到 RoR 控制器

> ID：11071861
> 
> 赞同：0
> 
> 时间：2012-06-17T14:03:36.503
> 
> 标签：javascript, jquery, json, ruby-on-rails-3.1

在浏览了许多不适合或解决我的问题的解决方案后，我在这里发布了这个问题：

我使用 javascript 在表单中填充数据的隐藏字段并将其发送到 rails 控制器。这适用于普通变量，但我无法让它适用于数组。这就是我所做的：

Javascript（jQuery）：

```
$("#my_form").submit(function() {
    var testvar = 5;
    var testarr = [];
    testarr[0] = "test data";
    testarr[1] = "other data";

    $('input[name=testvar]').val(testvar);
    $('input[name=testarr]').val(JSON.stringify(testarr));
}) 
```

RoR 控制器：

```
def create
    testvar = params[:testvar]
    data = params[:testarr]
    testarr = ActiveSupport::JSON.decode(data)
    // other commands
end 
```

它适用于 testvar 但对于数组它总是会产生错误

```
can't convert nil into String 
```

我究竟做错了什么？

请求如下所示：

```
{"utf8"=>"✓",
 "authenticity_token"=>"1qFA3NTqUxoI1jusbwrVi5AWIpJz9tbUGR0KuCtNKTs=",
 "testvar"=>"5",
 "testarr"=>"[\"test data\",
 \"other data\"]",
 "commit"=>"Submit my form data"} 
```

提前致谢，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T17:16:47.563

如果您在末尾使用 [] 命名输入字段，rails 会将其作为数组映射到 params

```
<input type="hidden" name="testarr[]" />

$(....).val(testarr.join(",")) 
```

或者为每个添加一个新输入而不是加入，它们都具有相同的输入名称

```
$(....).submit(....
  $form = $(this)
  testarr.each
    $form.append('<input type="hidden" name="testarr[]" value="...itemValue..." />') 
```

在控制器中

```
params[:testarr].each do .... 
```

在ipad上输入，请原谅不完整的代码，希望它能给你一些想法

# android - 如何从库代码中通知 App 中的服务？

> ID：11071862
> 
> 赞同：0
> 
> 时间：2012-06-17T14:03:49.343
> 
> 标签：android, service

在我的一个应用程序中，我确实在库项目中有一个 FileCache。当库中的 FileCache 缓存了一个新文件时，App 本身有一个 Service 等待通知。

该库是一个 Android 库项目，包含在 App 中。

将通知从库发送到应用服务的最佳方式是什么？

*   发送广播需要知道服务中的接收者。这在库项目中是不可能的。

*   从库代码调用服务中的函数也是不可能的。

这是一个代码框架：

```
// This is in the App
public class MyService extends Service implements OnBufferingUpdateListener, OnCompletionListener, OnErrorListener, OnInfoListener, OnPreparedListener {

    public class MyBroadcastReceiver extends BroadcastReceiver {

        public static final String BROADCASTRECEIVER = "xx.yyy.zzzzz.MyService.MyBroadcastReceiver";

        @Override
        public void onReceive(final Context context, final Intent intent) {
        }
    }
}

// This is in a library project that's included in the App
public class FileCache {

    private void doThread() {
        final Handler handler = new Handler() {

            @Override
            public void handleMessage(final Message message) {

                try {
                    if (processed.size() > 0) {
                        //TODO: Notification to Service
                        processed.clear();
                    }
                } catch (NullPointerException nullPointerException) {
                    //TODO:
                }

                if (queue.size() > 0) {
                    doThread();
                } else {
                    running = false;
                }
            }
        };

        new Thread() {

            @Override
            public void run() {
                for (Map.Entry<String, QueueElement> entry : queue.entrySet()) {
                    QueueElement element = entry.getValue();
                    if (element != null) {
                        File file = fetch(element.url);
                        if (file != null) {
                            ProcessedElement processedElement = new ProcessedElement();
                            processedElement.file = file; 
                            processedElement.url = element.url; 
                            processed.put(entry.getKey(), processedElement);
                        }
                    }

                    deleteFromQueue(entry.getKey());
                }

                handler.sendEmptyMessage(0);
            }
        }.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:24:08.187

> 发送广播需要知道服务中的接收者。这在库项目中是不可能的。

是的。让您的图书馆项目的客户通过某种方法的参数向图书馆提供足够的信息：

*   识别服务（例如，服务`Class`对象），在这种情况下，您可以`startService()`向服务发送命令，或者

*   识别`BroadcastReceiver`（例如，其使用的操作字符串`IntentFilter`），在这种情况下您使用`sendBroadcast()`

# javascript - 使用 AJAX 自动刷新内容

> ID：11071865
> 
> 赞同：0
> 
> 时间：2012-06-17T14:04:05.817
> 
> 标签：javascript, ajax, function, refresh

我正在尝试创建一个显示股票报价的窗格，但它每 10 秒自动刷新一次并且系统地发生变化（所以说 goog 十，然后 aapl 等等。）

这就是我得到的。

```
function stocksUpdate(latest){
 if (window.XMLHttpRequest)
 {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
 }
 else
 {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
 }
 xmlhttp.onreadystatechange=function()
 {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
 {
  document.getElementById("stocks").innerHTML=xmlhttp.responseText;
 }
 }
 xmlHttp.open("GET","stock.php?latest="+latest+"&x="+Math.random(),true);
 xmlHttp.send();
 }

function stockShow() {
 var symbol = document.getElementById('stocksymbol');
 setInterval(stocksUpdate(symbol), 15);
 }
} 
```

然后

```
<body onload="stockShow()">

<div id="stocks">

<h3 id="stocksymbol"></h3> 
```

所以它应该首先获取股票符号，看到它为空并获取第一个股票报价，然后在 15 秒后获取该股票报价并返回下一个，依此类推。

stock.php 页面运行良好，但没有显示任何内容。我是否正确启动了这个？我应该让第一个节目然后设置 setInterval 吗？

请注意，h3 标记是故意为空的，并且在 stock.php 中进行了说明，所以不要担心它是空的

非常感谢。尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:09:40.527

你应该更换

```
setInterval(stocksUpdate(symbol), 15); 
```

和

```
setInterval(function(){
    stocksUpdate(symbol);
}, 15); 
```

到目前为止，您正在评估函数stockUpdate(symbol)，然后再将其传递给setInterval。

此外，15 是以毫秒为单位的时间，如果您不希望服务器内爆，请考虑将其提高到更大的值，并且可能不使用 setInterval（这可能导致 2 个响应以错误的顺序到达）在stockUpdate 函数结束

# php - 将 XML 上的数据与 MySQL 表进行比较

> ID：11071869
> 
> 赞同：0
> 
> 时间：2012-06-17T14:04:45.173
> 
> 标签：php, xml, compare

我正在通过 Web 服务获取 xml 数据

```
<ITEMS>
     <item id="uilldmduw"/>
     <item id="wl2323ldsaw"/>
</ITEMS> 
```

我需要将此列表与我的数据库中的“项目”表进行比较，并仅返回其中一个 xml 节点中也存在 id 的行。

XML 可以包含几百个节点，items 表包含 100k 行

什么是最好的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:27:12.950

解析 XML（例如使用[SimpleXML](http://php.net/manual/en/book.simplexml.php)）并将所有 id 收集到一个数组中。然后在数据库查询中使用该数组：

```
$query = sprintf('SELECT id, field, field2
                  FROM table
                  WHERE
                    id IN(%s)',
                 implode(',', $id_array)); 
```

（请注意，此代码假定 中的所有元素`$id_array`都保证为整数或正确 SQL 转义。在使用此代码之前，您需要自己确保这一点，否则您将面临 SQL 注入的风险）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:32:08.240

以下将为您提供 xml 文件中存在 id 的所有行的列表。

```
<?php
$xml = '<ITEMS>
        <item id="uilldmduw"/>
        <item id="wl2323ldsaw"/>
    </ITEMS>';
$xml = simplexml_load_string($xml);

// do an xpath query and get all item id's 
$result = $xml->xpath( '//item[@id]' );

$idList = array();
foreach($result as $node) {
    $idList[] = '"' . (string)$node[ 'id' ] . '"';
}

// all id's are now in a string sequence
$idList = implode( ',', $idList );

$results = array();

// select all rows which have an id in the sequence
$sql = 'SELECT * FROM `table` WHERE `id` IN (' . $idList . ')';
$run = mysql_query( $sql, $db_conn );

if($run && mysql_num_rows($run)) {
    while(($fetch=mysql_fetch_assoc($run))!=false) {
        $result[] = $fetch;//store the results the way you want.
    }
}

//$results now contains the desired result
?> 
```

希望这可以帮助。

# javascript - 这两个命令有什么区别？

> ID：11071871
> 
> 赞同：0
> 
> 时间：2012-06-17T14:04:57.993
> 
> 标签：javascript, jquery

```
 $('.nav').bind('click',alert(0));  and:
    $('.nav').bind('click',function(){alert(0)}) 
```

为什么只有第二个命令有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T14:06:42.370

`jQuery.bind`需要 a`function`作为它的第二个参数。`alert`返回`void`，所以没有函数可以调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T14:08:08.653

您在第二个命令中看到的是将命令包装在匿名函数中。单击“事件”的处理程序需要一个函数，以便一旦触发“事件”就可以执行它。

你也可以做这样的事情 -

```
$('.nav').bind('click',showAlert);
function showAlert(){
  alert(0);
} 
```

这里我们传递函数的名称。

这基本上与 -

```
$('.nav').bind('click',function(){
  alert(0);
}); 
```

# wpf - 在 XAML 中绑定到窗口事件

> ID：11071875
> 
> 赞同：0
> 
> 时间：2012-06-17T14:05:23.537
> 
> 标签：wpf, xaml, mvvm, window

我已经阅读了几篇关于如何在使用 MVVM 模型时从属性中获取窗口设置并在 Window XAML 中“双向”绑定它们的文章。但是，作者总是将它们保存在后面的代码中

```
void MainWindow_Closing(object sender, System.ComponentModel.CancelEventArgs e) 
{ 
    Properties.Settings.Default.Save(); 
} 
```

我想将 MainWindow XAML 设置为绑定到保存属性的类例程。我认为应该有类似的东西：

```
WindowClosing="{Binding MyClosingEventRoutine}" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T06:26:54.660

您可以使用 blend SDK 或 MVVM Light 中的 EventTrigger 行为。在窗口关闭您的视图模型中的命令被调用。

```
<Window xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity">
<i:Interaction.Triggers>
    <i:EventTrigger EventName="Closing" >
        <i:InvokeCommandAction Command="{Binding MyClosingEventRoutine}" />
    </i:EventTrigger>
</i:Interaction.Triggers>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:55:32.150

很难从您的帖子中看出，但我猜您正在做 MVVM，因为您不喜欢背后的旧代码？如果是这样，您可以从 MVVM 框架中获取一些对命令执行事件的代码。然后，这将允许您按照以下[链接将窗口关闭事件绑定到视图模型中的命令](http://geekswithblogs.net/HouseOfBilz/archive/2009/08/27/adventures-in-mvvm-ndash-binding-commands-to-any-event.aspx)

# css - 为什么 css .hover div 会“闪烁”？

> ID：11071878
> 
> 赞同：2
> 
> 时间：2012-06-17T14:05:45.080
> 
> 标签：css, hover

我的网站上有一些“标签”（包含文本），当悬停时，标签会展开并显示更多文本。出于我们的意图和目的，选项卡是一种菜单。

但问题是，当鼠标悬停时，选项卡会像悬停一样正确展开，但很快就会“闪烁”回到原来的大小，然后立即恢复到悬停大小（只要鼠标还在原始 div）。它是这样发生的：用户悬停和选项卡展开/（鼠标仍在选项卡上）选项卡保持 .hover 属性约 1 秒/（鼠标仍在选项卡上）选项卡默认为原始属性可能为 1/10 秒/（鼠标仍在选项卡上）选项卡返回 .hover 属性约 1 秒。
这会在鼠标悬停在选项卡上时持续。

我几乎一直在 Chrome 中遇到这种情况，有时在 Safari 中，最不频繁，几乎从不，但有时仍然在 FF 中。

我清除了缓存，清除了浏览数据（cookies 和其他站点和插件数据），但仍然没有改善。然后我检查了我的计算机是否有更新，重新启动它，仍然是同样的问题。我也有超过 6 GB 的可用内存，运行在 2.5ghz 双核处理器上。

任何想法可能是什么问题以及如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T14:11:19.480

如果显示的元素`:hover`移动周围元素或更改受影响元素的大小，则可能导致您的鼠标不再指向原始元素，从而删除`:hover`. 由于所有元素将再次移动，因此将产生`:hover`所示效果。

这将导致闪烁，直到达到稳定`:hover`状态。请注意，某些浏览器将`:hover`仅检查鼠标移动，而不检查布局更改 (FF)。

为防止此类行为，您不应更改网站的布局`:hover`，或使用`absolute`定位来防止这些元素影响其他元素。

## 例子

### 不稳定版本

```
#blipper {
  position: absolute;
  width: 200px;
  border: 1px solid;
  background-color: #ccc;
}

#blipper:hover {
  left: 150px;
  /* the hover effect is only stable in the rightmost 50 px */
}
```

```
<div id="blipper">Hover me</div>
```

### 稳定版

```
#blipper_stab {
  /* fixed layout element wrapper */
  width: 200px;
  height: 2em;
  /* needs height, since it contains only `position:absolute` elements*/
  position: relative;
  border: 1px solid green;
}

#blipper {
  height: 2em;
  position: absolute;
  width: 200px;
  border: 1px solid;
  background-color: #ccc;
}

#blipper_stab:hover #blipper {
  /* now based on the wrapper instead of the */
  left: 150px;
  /* blipper */
}
```

```
<div id="blipper_stab">
  <div id="blipper">Hover me</div>
</div>
```

# emacs - 在 Emacs 中记录数据的好方法是什么？

> ID：11071879
> 
> 赞同：2
> 
> 时间：2012-06-17T14:05:54.517
> 
> 标签：emacs

我是一个新的 Emacs 用户，我正在尝试找到一种很好的方法来跟踪我感兴趣的各种信息：我每晚睡多长时间，我跑了多远，我读了什么书，等等。是有一个很好的模式来处理这个问题，并以可用的形式保存数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T14:59:13.547

[Org-mode](http://orgmode.org/) 笔记记录者/组织者的老大。众所周知，人们涌向 Emacs 只是为了使用 org-mode

# android - 单击菜单中的选项后返回程序

> ID：11071883
> 
> 赞同：0
> 
> 时间：2012-06-17T14:06:16.597
> 
> 标签：android, menu

我有以下菜单选项，它只是*Mute/Unmute*、*Exit*和*显示 about page*。

第三种情况会加载一张图片。单击第三种情况后单击返回按钮后如何返回程序？

```
switch (item.getItemId()) {

    case R.id.mute:
        if(toggle) {
            mMediaPlayer.setVolume(0,0f);
            Toast.makeText(SingoActivity.this, "Mute ON",  Toast.LENGTH_LONG).show();  
            toggle=!toggle;
        } else {
            mMediaPlayer.setVolume(1,0f);
            Toast.makeText(SingoActivity.this, "MUTE OFF",  Toast.LENGTH_LONG).show();  
            toggle=!toggle;
        }
        return true;

    case R.id.exit:             
        finish(); 
        System.exit(0);                 
        return true;                

    case R.id.about:
        setContentView(R.layout.help);                  
        return true;

    default:   return super.onOptionsItemSelected(item);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:20:12.633

是否有理由在自定义对话框或其自己的活动中没有帮助图片？

使用当前的实现，您将不得不覆盖 onKeyDown 并拦截后退按钮单击事件。如果当前布局是 R.layout.help，则必须加载旧布局。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        if(current layout is R.layout.help) {
            setContentView(R.layout.oldlayout);
            return true;
        }
    }
    return super.onKeyDown(keyCode, event);
} 
```

我宁愿使用自定义对话框、单独的活动或 FrameLayout 来实现我认为您想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:57:27.703

```
dialog = new Dialog(this); 
dialog.setContentView(R.layout.help); 
```

对不起，我是菜鸟，我的自学能力真的很有限。对话框会这样吗？

我尝试编译，没有错误，但是当我点击菜单上的帮助时，没有弹出对话框。

# jquery - Jquery悬停和动画

> ID：11071884
> 
> 赞同：1
> 
> 时间：2012-06-17T14:06:28.483
> 
> 标签：jquery, performance, css, jquery-animate

[我的代码](http://jsfiddle.net/Kyomu/5RbXJ/1/)

我有一个 div，当您将鼠标悬停在它上面时会显示不同的浏览器，如果支持它们，则在 css 中完成。但是，我也想让它们使用我正在工作的 jquery 进行动画处理。

但是，如果您将鼠标快速移动到悬停区域上，然后将其悬停在其上，该动画将不会重新触发。您必须将鼠标移到很远的地方，然后将鼠标悬停在它上面。我发现重现此问题的最佳方法是将鼠标放在其上方并快速将鼠标悬停在其上并再次悬停几次。

我怀疑原因是 jquery 仍然认为鼠标已经结束，即使 css 隐藏它并说它不是。我还认为必须将鼠标移远是时间相关而不是距离，但再次不确定。我还尝试了 .mouseover()、.hover() 和 .mouseenter()，其中 .mouseenter() 似乎表现最好。

这是可疑的行为吗？这并不完全是“破坏”，但我希望这种效果能够发挥作用。如果这是预期的行为，css3 动画是否能够复制我想要的效果？

另外作为旁注，如果您查看了小提琴，我应该考虑添加任何其他浏览器吗？（个人观点还可以，但如果有任何浏览器偷偷地变得更受欢迎，则更多）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:16:30.757

您可以通过添加 stop() 来解决此问题

```
$(this).stop().animate({'width':'25px'},500); 
```

更多信息在这里：[http ://api.jquery.com/stop/](http://api.jquery.com/stop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:34:51.047

我认为如果您没有停止最后一个动画，这种情况经常发生，我认为您可以使用这样的方式解决该问题。

```
 $(this).stop().animate( /*your animation*/ ); 
```

有时，您应该检查所有元素，而不仅仅是动画，因为我记得有一些用户遇到了问题，他们只是按 Enter 键就停止了 javascript 验证（那是我使用 VTiger 的时候）。

这个链接有一些关于它的信息[http://www.learningjquery.com/2009/01/quick-tip-prevent-animation-queue-buildup](http://www.learningjquery.com/2009/01/quick-tip-prevent-animation-queue-buildup)

总结一下，我认为有一堆未知的浏览器，如 midori、maxthon，以及一些在 linux 中使用的其他浏览器，如 konqueror 和其他一些浏览器。

# google-apps-script - 在 google docs 中使用脚本添加现有单元格值

> ID：11071886
> 
> 赞同：0
> 
> 时间：2012-06-17T14:06:42.053
> 
> 标签：google-apps-script, google-sheets

我正在 Google Docs 中制作一个电子表格，我可以在其中跟踪我的数据。我已经在单元格中输入了一些起始值，还有一些带有函数的单元格。我想制作一个脚本，将这些值添加到以前记录的列表中。

为了更清楚地解释它。

我有一个包含值的表：

[A1] [B1] [C1] [D1] 等等。

[24.52] [12.84] [=A1-B1] [=(100/A1)*B1] 等等。

按下按钮后，我希望将这些值添加到另一张表（首选）或同一张表中的列表中，就在我已经拥有的所有内容下。编辑主表后，列表中的这些值不应再更改。

列表应该是这样的：

[.....] [.....] [.....] [......] <--- [...] 这就是添加先前值的地方

[24.52] [12.84] [11.68] [52.36%] <--- 最后添加的值

新数据将添加到新行中。

我有一个脚本，但是向单元格添加值时出现问题。当我按下该按钮时，它会添加#NAME？在带有注释“未知范围名称 A16”的单元格中不是它们的实际值。

我使用这个脚本 - 这个脚本只向同一张表添加新值：

`function AddRecord() {`

```
 var doc = SpreadsheetApp.getActiveSpreadsheet();
  var lastRow = doc.getLastRow();
  var cell = doc.getRange('A1').offset(lastRow, 0);
  cell.setValue('=A16');
  cell.offset(0, 1).setValue('=B16');
  cell.offset(0, 2).setValue('=C16');
  cell.offset(0, 3).setValue('=D16');
} 
```

=A16、=B16、=C16、=D16 是包含我需要的那些值的单元格，但是我应该如何编写这段代码才能正确添加它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:26:52.857

不确定，如果我完全理解你的问题。要将“Tabellenblatt1”中最后一行的值复制到“Tabellenblatt2”中的新行，您可以使用以下简单函数：

```
function myFunction() {
  var doc = SpreadsheetApp.getActiveSpreadsheet();
  var sheetFrom = doc.getSheetByName("Tabellenblatt1");
  var sheetTo = doc.getSheetByName("Tabellenblatt2");  
  var lastRow = sheetFrom.getLastRow();
  var cell = sheetFrom.getRange('A1').offset(lastRow, 0);
  var rowTo = sheetTo.getLastRow() + 1;
  for( var i = 1; i < 5; i++) {
     sheetTo.getRange(rowTo, i).setValue( sheetFrom.getRange(lastRow, i).getValue());
  }
} 
```

# php - PHP 在标题页中打开现有的 csv/文本文件

> ID：11071888
> 
> 赞同：1
> 
> 时间：2012-06-17T14:06:52.383
> 
> 标签：php, excel, header, save

我可以在页眉中打开现有的文本文件或 csv 文件吗？（即当我将下面的标头参数设置到 php 页面时：

```
header('Content-Type: application/vnd.ms-excel; charset=UTF-8;');
header('Content-Disposition: attachment;filename='.$document);
header('Cache-Control: max-age=0'); 
```

该文件将直接以模式警报（打开/保存）打开。但是如果我有带有它的名称的文件（test.xls），我如何设置标题参数以在标题页中打开它？？？

假设：一个名为：'test.xls'的文件，我想输出一个php页面来打开/保存这个文件

```
$file='/temp/test.xls';// file existed and created previously.

header('Content-Type: application/vnd.ms-excel; charset=UTF-8;');
header('Content-Disposition: attachment;filename='.$file);
header('Cache-Control: max-age=0'); 
```

如何继续这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:06:11.083

1.  如果该文件是公开可用的，您可以简单地重定向到它：

    ```
    header('Location: /path/to/file.xls'); 
    ```

2.  否则，只需发送您已有的标头并输出文件：

    ```
    echo file_get_contents('file.xls'); 
    ```

# java - 替换 Weblogic Jsp 编译器

> ID：11071894
> 
> 赞同：-1
> 
> 时间：2012-06-17T14:08:32.473
> 
> 标签：java, eclipse, jsp, compiler-construction, weblogic

我们最近将我们的项目从 IAS OJDBC 迁移到 Oracle Weblogic 10.3.3。我们正在使用 Eclipse Indigo。

我们遇到的问题是，一些 JSP 被解释为比以前大得多的 java 文件，其中一些“服务”函数在编译后大于 64K，这显然大于函数允许的最大大小在JVM中。

我们注意到一个 JSP 文件，在 OJDBC 服务器中编译的 JSP 的旧 java 文件的大小（大约 5000 行“服务”功能的代码）大约是新文件大小的一半。

我在网上找到的一种解决方案是将 JSP “切割”成小块，然后使用“jsp:include”指令将它们作为一页查看。

但我想告诉 Eclipse 或 Weblogic（或两者）使用不同的 JSP 解释器（将 JSP 转换为 java 的部分），因为差别太大了。

有没有办法做到这一点？

谢谢，马尔基。

**编辑-**

我找到了这个文档：[使用 WebLogic JSP 编译器](http://docs.oracle.com/cd/E13222_01/wls/docs81/jsp/reference.html#65756)。在“预编译 JSP”下，他们解释了一个名为“compilerclass”的参数，它允许您定义 JSP 编译器类。

问题是这是 BEA WebLogic Server 8.1 的文档，但我使用的是 Oracle WebLogic Server 10.3.3。我在 10.3.3 的文档中查找了相同的参数，但找不到。有谁知道这个版本是否还存在？我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:11:23.647

您真的应该考虑如何重写这些 JSP。当我发现自己接近 64K 限制时，我会感到震惊。

# javascript - Meteor 应用程序是否可以被搜索引擎索引？

> ID：11071895
> 
> 赞同：7
> 
> 时间：2012-06-17T14:08:46.330
> 
> 标签：javascript, search-engine, meteor

据我所知，如果页面至少满足以下两个条件之一，Google 会将其编入索引：

1.  关闭 javascript 加载的页面有内容。
2.  如果页面需要 javascript，它位于 hashbang 下的 url。像这样：`http://www.example.com/#!/page-name`

如果我有这个权利，那么[流星](http://meteor.com)应用程序（如meteor.com，当javascript关闭时缺少内容）将不会被谷歌索引。

我错过了什么？是否有其他机制正在发挥或计划使流星应用程序可索引？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T22:39:00.727

我制作了一个 smartpackage 来准备一些爬行的基础知识。 [https://github.com/lvbreda/meteor_seo_smartpackage](https://github.com/lvbreda/meteor_seo_smartpackage)
看看，fork，随便你。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T23:32:17.677

**tl;dr** : 简单索引现在包含在可爬取包中，计划在即将发布的版本中提供更多功能。

最近添加到[流星](http://meteor.com)常见问题解答：

> ## Meteor 可以提供静态 HTML 吗？流星网站可以被谷歌索引吗？
> 
> 是的。添加“spiderable”智能包以支持向搜索引擎发送静态 HTML，并提供有效链接。spiderable 包实现了 Google 的 AJAX Crawling Specification。有关详细信息，请参阅可[抓取的文档](http://docs.meteor.com/#spiderable)。
> 
> 这个版本的spiderable是专门为搜索引擎设计的。Meteor 的未来版本还将在初始页面加载时将 HTML 发送到 Web 浏览器。Meteor 模板系统是专门为支持这个用例而设计的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-17T14:43:28.030

不，他们不是因为他们返回一个空页面并且他们不执行 sockjs 的东西。开发人员计划进行服务器端渲染，该渲染为页面提供初始数据，以便搜索引擎可以存储此类数据。它比 Google 处理的 AJAX 有点棘手……

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-20T05:41:45.603

查看 DerbyJS 和 Yahoo Mojito。这两个框架都是 SEO 友好的。

[Javascript 框架的 SEO 和延迟问题](http://www.phamcom.com/2012/07/ultimate-javascript-framework.html)

# c# - 在 Azure 表中存储十进制数据类型

> ID：11071899
> 
> 赞同：16
> 
> 时间：2012-06-17T14:09:09.293
> 
> 标签：c#, azure, azure-table-storage

Windows Azure 表存储[不支持](http://msdn.microsoft.com/en-us/library/windowsazure/dd179338)十进制**数据**类型。

建议的[解决方法](http://blogs.msdn.com/b/avkashchauhan/archive/2011/12/16/how-you-can-store-decimal-data-in-windows-azure-table-storage.aspx)是使用自定义属性将小数属性序列化为字符串：

```
[EntityDataType(PrimitiveTypeKind.String)]
public decimal Quantity { get; set; } 
```

如何实现这个 EntityDataType 自定义属性，以便可以从 Windows Azure 表中存储和检索十进制属性？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-08T04:08:42.393

覆盖`ReadEntity`和`WriteEntity`在基类中对此有好处。不必在`EntityResolver`每次检索实体时都编写一个。

```
public class CustomTableEntity : TableEntity
{
    public override void ReadEntity(IDictionary<string, EntityProperty> properties, OperationContext operationContext)
    {
        base.ReadEntity(properties, operationContext);

        foreach (var thisProperty in
            GetType().GetProperties().Where(thisProperty =>
                thisProperty.GetType() != typeof(string) &&
                properties.ContainsKey(thisProperty.Name) &&
                properties[thisProperty.Name].PropertyType == EdmType.String))
        {
            var parse = thisProperty.PropertyType.GetMethods().SingleOrDefault(m =>
                m.Name == "Parse" &&
                m.GetParameters().Length == 1 &&
                m.GetParameters()[0].ParameterType == typeof(string));

            var value = parse != null ?
                parse.Invoke(thisProperty, new object[] { properties[thisProperty.Name].StringValue }) :
                Convert.ChangeType(properties[thisProperty.Name].PropertyAsObject, thisProperty.PropertyType);

            thisProperty.SetValue(this, value);
        }
    }

    public override IDictionary<string, EntityProperty> WriteEntity(OperationContext operationContext)
    {
        var properties = base.WriteEntity(operationContext);

        foreach (var thisProperty in
            GetType().GetProperties().Where(thisProperty =>
                !properties.ContainsKey(thisProperty.Name) &&
                typeof(TableEntity).GetProperties().All(p => p.Name != thisProperty.Name)))
        {
            var value = thisProperty.GetValue(this);
            if (value != null)
            {
                properties.Add(thisProperty.Name, new EntityProperty(value.ToString()));
            }
        }

        return properties;
    }
} 
```

使用时，只需让您的实体扩展自`CustomTableEntity`，插入或检索实体时它将是透明的。它支持`DateTime`, `TimeSpan`,`decimal`和那些有`Parse`方法或实现`IConvertible`接口的类型。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-20T02:38:08.513

您可以覆盖 TableEntity 中的 WriteEntity 方法并使用 EntityResolver

```
public class CustomTableEntity : TableEntity
{
    private const string DecimalPrefix = "D_";

    public override IDictionary<string, EntityProperty> WriteEntity(OperationContext operationContext)
    {
        var entityProperties = base.WriteEntity(operationContext);
        var objectProperties = GetType().GetProperties();

        foreach (var item in objectProperties.Where(f => f.PropertyType == typeof (decimal)))
        {
            entityProperties.Add(DecimalPrefix + item.Name, new EntityProperty(item.GetValue(this, null).ToString()));
        }

        return entityProperties;
    }
} 
```

我们将使用的实体

```
public class MyEntity : CustomTableEntity
{
    public string MyProperty { get; set; }

    public decimal MyDecimalProperty1 { get; set; }
    public decimal MyDecimalProperty2 { get; set; }
} 
```

**包括创建表/插入/检索的**用法****

 **```
#region connection

CloudStorageAccount account = CloudStorageAccount.DevelopmentStorageAccount;
CloudTableClient client = account.CreateCloudTableClient();
CloudTable table = client.GetTableReference("mytable");
table.CreateIfNotExists();

#endregion

const string decimalPrefix = "D_";

const string partitionKey = "BlaBlaBla";
string rowKey = DateTime.Now.ToString("yyyyMMddHHmmss");

#region Insert

var entity = new MyEntity
    {
        PartitionKey = partitionKey,
        RowKey = rowKey,
        MyProperty = "Test",
        MyDecimalProperty1 = (decimal) 1.2,
        MyDecimalProperty2 = (decimal) 3.45
    };

TableOperation insertOperation = TableOperation.Insert(entity);
table.Execute(insertOperation);

#endregion

#region Retrieve

EntityResolver<MyEntity> myEntityResolver = (pk, rk, ts, props, etag) =>
    {
        var resolvedEntity = new MyEntity {PartitionKey = pk, RowKey = rk, Timestamp = ts, ETag = etag};

        foreach (var item in props.Where(p => p.Key.StartsWith(decimalPrefix)))
        {
            string realPropertyName = item.Key.Substring(decimalPrefix.Length);
            System.Reflection.PropertyInfo propertyInfo = resolvedEntity.GetType().GetProperty(realPropertyName);
            propertyInfo.SetValue(resolvedEntity, Convert.ChangeType(item.Value.StringValue, propertyInfo.PropertyType), null);

        }

        resolvedEntity.ReadEntity(props, null);

        return resolvedEntity;
    };

TableOperation retrieveOperation = TableOperation.Retrieve(partitionKey, rowKey, myEntityResolver);
TableResult retrievedResult = table.Execute(retrieveOperation);
var myRetrievedEntity = retrievedResult.Result as MyEntity;

// myRetrievedEntity.Dump(); 

#endregion 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T19:57:33.230

您是否尝试过使用[Lokad.Cloud FatEntities](http://code.google.com/p/lokad-cloud/wiki/FatEntities)产品？

我认为他们只是对要存储在表中的整个对象使用二进制序列化程序。看看“Object-to-Cloud mapper”项目可能也是值得的：

[https://github.com/Lokad/lokad-cloud](https://github.com/Lokad/lokad-cloud)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-02T03:18:44.303

@EUYUIL 提出了一个很好的通用解决方案，我使用它效果很好，但是按照他的回答，使用 Nullable 类型时它会失败。

```
 // Get the underlying types 'Parse' method
       if (curType.IsGenericType && curType.GetGenericTypeDefinition() == typeof(Nullable<>))
       {
            curType = Nullable.GetUnderlyingType(curType);
       } 
```

万一它对任何人有帮助，foreach 中的 ReadEntity 覆盖方法的内容。可能有更好的方法来写这个，但为了说明目的，这将是可行的。

```
 var curType = thisProperty.PropertyType;

        // Get the underlying types 'Parse' method
        if (curType.IsGenericType && curType.GetGenericTypeDefinition() == typeof(Nullable<>))
        {
            curType = Nullable.GetUnderlyingType(curType);
        }

        var parse = curType.GetMethods().SingleOrDefault(m =>
            m.Name == "Parse" &&
            m.GetParameters().Length == 1 &&
            m.GetParameters()[0].ParameterType == typeof(string));

        var value = parse != null ?
            parse.Invoke(thisProperty, new object[] { properties[thisProperty.Name].StringValue }) :
                  Convert.ChangeType(properties[thisProperty.Name].PropertyAsObject, thisProperty.PropertyType);

        thisProperty.SetValue(this, value); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-12T13:42:19.327

您可以将属性的类型更改为`double`。`decimal`然后，您必须`double`通过将表实体映射到您自己的域类型来进行转换。另一种选择是在由单个`decimal`字段支持的实体上具有两个属性。但是，您可能希望继续使用该属性的`Quantity`名称，`decimal`因为它是`double`存储在表中的属性，您必须`Quantity`通过覆盖`ReadEntity`和重命名该属性`WriteEntity`。那么你不妨使用这里提出的其他一些解决方案。

现在，您可能认为将 a 存储`decimal`为 a`double`会导致某些值无法正确往返。虽然肯定有一些值不会因为两种类型的范围和精度非常不同而往返，但大多数“正常”值（例如不是天文数字大且具有人类可读精度的货币值）将毫无问题地往返。这样做的原因是，从`double`to`decimal`执行的转换[`Convert.ToDouble`](https://docs.microsoft.com/en-us/dotnet/api/system.convert.todecimal?view=netframework-4.7.1#System_Convert_ToDecimal_System_Double_)具有一个特殊的属性：

> 此方法返回的 Decimal 值最多包含 15 个有效数字。

以下是一个示例，说明如何将其他有问题的数字进行往返：

```
var originalValue = 2.24M;
var doubleValue = (double) originalValue; 
```

问题是没有使用浮点数的十进制数 2.24 的精确表示，就像没有使用十进制数的有理数 1/3 的精确表示一样（2.24 是有理数 224/100）。0.3333333333333333 不等于 1/3。`doubleValue`您可以通过足够精确的打印来验证这一点。`Console.WriteLine($"{doubleValue:G17}")`产量

```
2.2400000000000002 
```

但是，往返值仍然有效：

```
var roundTripValue = (decimal) doubleValue; 
```

现在`Console.WriteLine(roundTripValue)`产量

```
2.24 
```

因此，只要您不对这些`double`值进行任何计算，您就可以使用它们来存储`decimal`值，前提是之间的转换`double`符合`decimal`上面引用的 .NET 规则。**

# python - 坚持在 Python 中使用 Megam (nltk.classify.MaxentClassifier)

> ID：11071901
> 
> 赞同：6
> 
> 时间：2012-06-17T14:09:17.837
> 
> 标签：python, ubuntu, installation, nltk

我正在使用 ubuntu x64，两天后搜索了所有网络，仍然无法安装 Megam，我已阅读此页面中的所有信息[http://www.cs.utah.edu/~hal /megam/并从](http://www.cs.utah.edu/~hal/megam/)[http://packages.ubuntu.com/precise/ocaml](http://packages.ubuntu.com/precise/ocaml) 安装了 x64 版本的 o'calm 但是当我想在 python 中使用“megam”作为分类器时，它说：

> “NLTK 无法找到 megam 文件！使用软件特定的配置参数或设置 MEGAM 环境变量。

谁能告诉我如何在 python 中安装和使用它？

我已经下载了“ `ocaml-3.12.1.tar.gz`”，但是“make”命令不起作用（正如它在自述文件中所说的那样）。我也下载了“ `megam_i686.opt`”，但它不是可执行的，我无法运行它

有什么帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-24T14:35:50.267

对于未来的用户：

现在可以通过 brew 在 MAC 上使用 megam：

```
$brew tap homebrew/science
$brew install megam 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:40:23.390

使用 config_megam() 告诉 NLTK Megam 可执行文件的位置。有关详细信息和文档，请参阅：[http ://nltk.googlecode.com/svn/trunk/doc/api/nltk.classify.megam-module.html。](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.classify.megam-module.html)

您还需要为您的系统构建具有正确 32/64 位设置的 MEGAM。“megam_i686.opt”适用于 x86 iirc，因此您应该将其编译为 64 位。我这样做已经有一段时间了，但是我只需要在 x64 系统上进行简单构建：“Make doesn't work”不是很有用：我确定它给了你一些错误消息......？可能路径未设置或只读？

* * *

编辑：看起来上面的链接目前已损坏。主要的 Megam 网站可以在以下位置找到：

[http://www.umiacs.umd.edu/~hal/megam/](http://www.umiacs.umd.edu/~hal/megam/)

虽然它已经有一段时间没有更新了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-14T05:18:39.157

Hugh Perkins 给出的答案帮助我解决了这个问题（由于声誉低，无法对该答案添加评论）。下载 zip 文件（来自[http://thinknook.com/wp-content/uploads/2012/11/MEGAM.zip](http://thinknook.com/wp-content/uploads/2012/11/MEGAM.zip)）后，我需要告诉 python 它在哪里，这是通过将它添加到 os.environ作为：

os.environ["MEGAM"] = '<<完整路径后跟文件名>>/megam-64'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-14T16:21:32.633

我从[http://thinknook.com/wp-content/uploads/2012/11/MEGAM.zip](http://thinknook.com/wp-content/uploads/2012/11/MEGAM.zip)下载，它是从[http://thinknook.com/nltk-megam-maximum-entropy-library-on-64链接的-bit-linux-2012-11-27/](http://thinknook.com/nltk-megam-maximum-entropy-library-on-64-bit-linux-2012-11-27/) 这对我来说没问题，在 ubuntu 14.04 上

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-15T17:36:50.837

按照以下步骤，我设法让 megam 在运行 debian 9.7 的 docker 实例上运行。[基于 Jack Hong在此处](https://groups.google.com/forum/#!topic/nltk-users/k3T6BzAsOJc)建议的 MacOS 安装步骤。

1.  apt-get 安装
2.  apt-get install ocaml-nox（或者 apt-get install ocaml，如果你想要 x 窗口支持）
3.  [从这里](http://hal3.name/megam/megam_src.tgz)下载源代码
4.  解压源代码创建一个 megam_0.92 目录
5.  编辑 megam_0.92 中的 Makefile 并进行以下更改。（第一个更改已经在我的特定实例中完成）：
    *   WITHCLIBS=-I /usr/local/lib/ocaml/caml
    *   WITHSTR =str.cma -cclib -lcamlstr
6.  保存更改并在您的 megam_0.92 目录中运行 make
7.  将 nltk.config_megam('//megam_0.92/megam') 添加到您的脚本中，一切都应该很好。

# c# - DateTime类常见错误再次显示

> ID：11071903
> 
> 赞同：2
> 
> 时间：2012-06-17T14:09:28.700
> 
> 标签：c#, asp.net, wpf, silverlight

我在 datetime 类中遇到了一个小问题，我不知道如何解决。

我不知道错误是什么，但我看到故障排除提示显示为

> 将字符串转换为 DateTime 时，在将每个变量放入 DateTime 对象之前解析字符串以获取日期。确保您的方法参数格式正确。

这是我从程序中提取的一段代码，

```
public IEnumerable<CONTACT_INFO> GetContactInfo(string tableName)
{
    DataTable dt = GetUserInfo(tableName);
    List<CONTACT_INFO> lst = new List<CONTACT_INFO>();

    foreach (DataRow row in dt.Rows)
    {              
        string sDate = "";
        if(!string.IsNullOrEmpty(row["birthday"].ToString()))
        {
            sDate = row["birthday"].ToString();
        }
        string format = "yyyyMMdd";

        System.Globalization.CultureInfo provider =CultureInfo.InvariantCulture;
        string datetime = DateTime.Now.ToShortDateString();

        if (!string.IsNullOrEmpty(sDate))
        {
            datetime = DateTime.ParseExact(sDate, format, provider).ToShortDateString();
        }

        if (row["companyname"].ToString().CompareTo("companylogo") != 0)
        {
            string profile_time = row["profile_timestamp"].ToString();

            if (!string.IsNullOrEmpty(profile_time))
            {
                CSTimeZone time = new CSTimeZone();
                profile_time = time.FromUnix(Convert.ToDouble(profile_time)).ToShortDateString()+" "+
                                 time.FromUnix(Convert.ToDouble(profile_time)).ToLongTimeString();
             }

             string lastUseNetTime = row["last_used_networktime"].ToString();
             if (!string.IsNullOrEmpty(lastUseNetTime))
             {

                 CSTimeZone time = new CSTimeZone();
                 double sec = Convert.ToDouble(lastUseNetTime) * 60;
                 lastUseNetTime = time.FromUnix(Convert.ToDouble(sec)).ToShortDateString() + " " +
                        time.FromUnix(Convert.ToDouble(sec)).ToLongTimeString();
             }
             string lastOnlineTime = row["lastonline_timestamp"].ToString();
             if (!string.IsNullOrEmpty(lastOnlineTime))
             {
                 CSTimeZone time = new CSTimeZone();
                 lastOnlineTime = time.FromUnix(Convert.ToDouble(lastOnlineTime)).ToShortDateString() + " " +
                        time.FromUnix(Convert.ToDouble(lastOnlineTime)).ToLongTimeString();
             }
             lst.Add(new CONTACT_INFO()
             {
                 gender=Convert.ToInt32(row["gender"].ToString()),
                 timezone=row["timezone"].ToString(),                        
                 fullName = row["fullname"].ToString(),
                 profile_timestamp = profile_time,
                 last_used_networktime = lastUseNetTime,
                 lastonline_timestamp = lastOnlineTime,
                 birthday = string.IsNullOrEmpty(sDate) ? "" : datetime
             });
         }
     }
     return lst;
 } 
```

FromUnix 函数写为

```
public DateTime FromUnix(double seconds)
{
    DateTime datetime = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc).ToLocalTime();
    return datetime.AddSeconds(seconds);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:25:23.060

我很确定这是一个解析问题 如果 sDate 的值不是 yyyyMMdd 的定义格式，以下行将引发异常

```
datetime = DateTime.ParseExact(sDate, format, provider).ToShortDateString(); 
```

我会首先使用 TryParseExact 而不是简单的 Parse，因为您似乎没有使用 try/catch 子句。使用调试器准确查看程序失败的位置可能是个好主意。

代码中潜在故障的其他示例是

```
double sec = Convert.ToDouble(lastUseNetTime) * 60; 
```

使用 double.tryParse

```
Convert.ToInt32(row["gender"].ToString() 
```

如果性别不是数字，则会抛出另一个异常

ETC...

# jquery - 聚焦文本字段时打开 struts2-jquery 对话框

> ID：11071906
> 
> 赞同：0
> 
> 时间：2012-06-17T14:09:43.220
> 
> 标签：jquery, ajax, struts2

我正在使用 struts2-jquery 插件。我有一个包含文本字段的 < sj:dialog >。我希望该文本字段在获得焦点时启动另一个对话框。这个新对话框也应该呈现为 < sj:dialog > 标记。这项任务的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:57:45.280

可能您可以尝试使用 a`<sj:textfield>`及其`onFocusTopics`属性来触发焦点事件，以便随后打开`<sj:dialog>`具有相同主题的主题。`openTopics`

顺便说一句，您无法使用`.dialog()`，因为 struts2jquery仅在页面上存在这些现有组件`requirejs`时才使用在运行时检索所需的 js 库。`sj`

`<sj:dialog>`您可以通过在页面中包含一个虚拟对象来克服它，将其`display`样式设置为`none`.

# php - php sqlite 检查行是否存在

> ID：11071908
> 
> 赞同：0
> 
> 时间：2012-06-17T14:09:55.753
> 
> 标签：php, sqlite

我正在尝试查看我的 sqlite 数据库中是否存在现有行，如果没有则添加它。但是我的查询有问题。我希望有人能发现我的错误。

具体来说，我认为错误在查询行中：

```
$query = 'SELECT * FROM plant WHERE common_Name = '. $commonName . ' AND latin_Name = '. $latinName . 'AND  url = '. $URL ; 
```

谢谢你，托德

```
// set path of database file
$file = "db/plants.db";

// create database object
$db = new SQLiteDatabase($file) or die("Could not open database");

// see if the EXACT same tag exists
$query = 'SELECT * FROM plant WHERE common_Name = '. $commonName . ' AND latin_Name = '. $latinName . 'AND  url = '. $URL ;
$result = $db->query($query) or die("Error in query");
$rows = sqlite_num_rows($result);

if($rows>0) return; //do not add it

// generate query string
$query = 'INSERT INTO plant (common_Name, latin_Name, url) VALUES("'.$commonName.'","'. $latinName.'","'.$URL.'")';

// execute query
// return result object
$result = $db->query($query) or die("Error in query");

// destroy database object
unset($db); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:36:21.560

您在 SELECT 查询中缺少引号，因此它失败了。

```
$query = "SELECT * FROM plant WHERE common_Name = '$commonName' AND latin_Name = '$latinName' AND  url='$URL'";
         ^                                        ^           ^ etc... 
```

请注意指示的报价更改和格式差异。同样，除非您在代码片段之外的其他地方完成此操作，否则请注意这种类型的查询构造容易受到[SQL 注入攻击](http://bobby-tables.com)，并且您应该在进一步使用此代码之前阅读并了解这些内容。

下次你放入错误处理程序时（顺便说一句，检查返回值的荣誉），不要只输出静态的“出错了”错误消息。这对诊断毫无用处。数据库可以准确地告诉您出了什么问题，因此请输出数据库的错误消息，例如`sqlite_error_message()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:36:47.437

我讨厌回答我自己的问题，但是......

我错过了参数周围的双引号。这是一个有效的查询。

```
$query = 'SELECT * FROM plant WHERE common_Name ="'. $commonName .'" AND latin_Name = "'.$latinName .'" AND url = "'.$URL.'"'; 
```

托德

# windows-8 - 如何让 Windows8.Identity.AccessControl 与 Windows 8 RP 一起工作？

> ID：11071913
> 
> 赞同：1
> 
> 时间：2012-06-17T14:10:51.837
> 
> 标签：windows-8, acs

我正在使用[ACS LoginControl Nuget Package](http://watwindows8.codeplex.com/) `Windows8.Identity.AccessControl`，更具体地说是`Windows8.CSharp.Identity.AccessControl`，但我无法让它在 Windows 8 RP 上运行。

我尝试了几种不同的 ACS 端点和命名空间，但我得到的只是：

> 无法连接到服务。我们现在无法连接到您需要的服务。检查您的网络连接或稍后再试一次。

尝试连接时。（获取身份提供者列表有效）。尝试 Windows Phone 7 的配套 ACS 控件可以正常工作，因此我确信 ACS 部分设置正确。

有人对我如何解决这个问题有任何想法吗？

# google-bigquery - BigQuery 双重导入

> ID：11071916
> 
> 赞同：1
> 
> 时间：2012-06-17T14:11:16.940
> 
> 标签：google-bigquery

我正在使用应用引擎中的 Google BigQuery。我有一个每 15 分钟运行一次的 cron 作业来导出到 BigQuery。不过，导入会随机运行两次。但是，appengine 日志没有反映这一点。我有一组我维护的 blob 用于将数据写入 bigquery，并且不会将重复的数据写入它们。有没有其他人遇到过重复导入的 bigquery 问题？同样，我的 appengine 日志显示导入只发生一次，我有点不知所措如何进行故障排除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:19:48.383

解决问题的一种方法是查看您的导入作业。您可以使用 bq 工具来执行此操作，方法是运行`bq ls -j`以列出您已运行的作业，并`bq show -j <job_id>`显示有关特定作业的详细信息。

我们还没有听说过任何其他重复加载的情况。防止这种情况的一种方法是为您的导入作业提供一个 id ... 默认情况下会为您创建一个（它看起来像 job_）。作业 ID 在项目中被强制要求是唯一的，因此如果您为每次要执行的导入生成一个 ID，如果触发了双重导入，则第二个导入将立即失败，因为该作业 ID 已经存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T18:41:17.247

我面临着同样的问题，即使我们的日志显示它只提交了一次，但这些作业似乎已经导入了两次。

还查看了作业，上面的命令显示它只成功处理了一次。

请注意，由于作业只提交了一次，因此不确定在这种情况下控制 job_id 会有什么帮助。似乎是 BigQuery 内部的某些东西可能导致作业重复？

让我知道您是否需要我的任何东西进行调查。

谢谢，

# python - 从python中的超类打印元素

> ID：11071919
> 
> 赞同：1
> 
> 时间：2012-06-17T14:11:21.820
> 
> 标签：python, class, inheritance, python-3.x

嗨，我有以下超级类

```
class Room:
    def __init__(self,building,floor,number):
        self.building=building
        self.floor=floor
        self.number=number
    def __str__(self):
        return (str(self.building)+'.'+str(self.floor)+'.'+str(self.number)) 
```

和以下子类

```
class Occupant(Room):
    def __init__(self,familyname,givenname,building,floor,number):
        self.familyname=familyname
        self.givenname=givenname
        Room.__init__(self,building,floor,number)
    def __str__(self):
        return (str(self.familyname)+', '+str(self.givenname)+......) 
```

子类如何打印超类中的元素。当我从类 Occupant 打印对象时，我应该添加到（.....）以获取正确的输出。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T14:20:11.267

An`Occupant`似乎是一个人，而 a`Room`是一个位置。`Occupant`如果是这样，那么说 an是 的类型是没有意义的`Room`。所以`Occupant`不应该是`Room`. 相反， an`Occupant` *有一个* `Room`：

```
class Room:
    def __init__(self, building, floor, number):
        self.building = building
        self.floor = floor
        self.number = number
    def __str__(self):
        return (str(self.building)+'.'+str(self.floor)+'.'+str(self.number))

class Occupant:
    def __init__(self, familyname, givenname, room):
        self.familyname = familyname
        self.givenname = givenname
        self.room = room

    def __str__(self):
        return '{f}, {g} -- {r}'.format(f = self.familyname, g = self.givenname, r = self.room)

room = Room('Building', 'Floor', 'Num')
occ = Occupant('Family', 'Given', room)
print(occ)
# Family, Given -- Building.Floor.Num 
```

# python - 将十进制转换为十六进制，反之亦然 无功能

> ID：11071921
> 
> 赞同：-3
> 
> 时间：2012-06-17T14:11:25.550
> 
> 标签：python, hex

我需要一些帮助，将十进制转换为十六进制，python 上没有函数。

我在弄清楚算法时遇到了麻烦，不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:25:58.860

扩展对问题的评论 - 找出算法的最简单方法是忘记您正在使用的编程语言。如果你有一个数学问题说：

> 写下以下各项的十六进制：
> 
> 20 8 16 100

你会怎么办？想想你会采取的步骤。给自己写出一系列指令——一个人可以遵循的东西。有你的算法。一旦你有了它，*然后*，而不是之前，将它翻译成 Python。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:26:39.317

算法从右到左工作。

1.  将数字除以 16。保留下一次迭代的商，余数是您要查找的数字。它显然会在 0 到 15 之间，将其转换为 0..F
2.  只要商 >= 16，重复。

# c - 使用回溯递归的自我避免行走

> ID：11071922
> 
> 赞同：-1
> 
> 时间：2012-06-17T14:11:36.387
> 
> 标签：c, recursion, backtracking

给定：网格 m×n
我需要使用回溯和递归枚举所有不超过一个交叉点并且在右上角结束的路径！？有什么建议么 。？
[自我避免的步行](http://mathworld.wolfram.com/Self-AvoidingWalk.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:30:02.633

非递归方式是保留一堆先前的位置以及需要在该位置做出决定的信息。每次做出决定时，将需要保存的信息推送到堆栈顶部。

然后，当您的向前搜索发现问题时，它会弹出堆栈并跳回最近的决策点并做出不同的决策。最终，您要么成功，要么将所有可能的路径视为不可能的路径。

对于递归解决方案，它是相同的，除了不是将信息压入堆栈，而是在递归调用中做出决定后传递新位置。如果递归调用返回失败，则在当前位置尝试下一个可能的决定。如果您在当前位置没有选择，则将失败返回到上述级别。只有当递归调用返回成功时，此级别才会返回成功。

同样，最终成功返回整个调用链，或者消除所有可能的路径。

而且由于这是家庭作业，您必须自己决定哪些信息需要从一个级别传递到下一个级别，以及您的最终成功路径如何返回到应用程序。

您需要的所有新想法都在上面的段落中。实施仍取决于您。

-杰西

# java - 模式匹配器替换全部

> ID：11071925
> 
> 赞同：0
> 
> 时间：2012-06-17T14:11:50.583
> 
> 标签：java, android, regex

我只是尝试（徒劳地）在循环期间删除单词“at”的所有实例。

```
Pattern atPattern = Pattern.compile(".*\\bat\\b.*");
String input = "at Pat's attic a fat cat catcher at patted at"

// required output "Pat's attic a fat cat catcher patted"

output = input.replace(atPattern.pattern(), " ");

output= input.replaceAll(".*\\bat\\b.*", " ");

Matcher atMatcher = atPattern.matcher(input);

output = atMatcher.replaceAll(" ");

// Starting to clutch at straws now...

Matcher atMatcher = Pattern.compile(".*\\bat\\b.*").matcher(input);

output = atMatcher.matcher(input).replaceAll(" ");

output = atPattern.matcher(input).replaceAll(" "); 
```

我也尝试了上述许多其他组合，但我无法获得我想要的输出......

请你能让我摆脱我的痛苦..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:19:03.967

A single `replaceAll(...)` is sufficient, and you'll need to remove some optional spaces after such `at`'s:

```
String input = "at Pat's attic a fat cat catcher at patted at";
String expected = "Pat's attic a fat cat catcher patted";

System.out.println(input.replaceAll("\\bat\\b\\s*", "").trim());
System.out.println(expected.trim()); 
```

The above will print:

```
Pat's attic a fat cat catcher patted
Pat's attic a fat cat catcher patted 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:17:12.113

可以简单地通过以下方式完成：

```
"at Pat's attic a fat cat catcher at patted at"
    .replaceAll("\\bat\\b","").trim().replaceAll(" +", " ") 
```

`trim()`和第二个用于`replaceAll()`删除空格。

可能还有其他方法可以一步完成所有这些（可能更快？），但是将它们分开更容易考虑逻辑。

**编辑**

以防万一，这是一个一步解决方案：

```
.replaceAll("(?i)(\\bat\\b | ?\\bat\\b)","") 
```

添加 是为了`(?i)`不区分大小写。如果不需要，您可以将其删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T14:24:49.147

You could do this

```
.replaceAll("(\\s|^)(at)(\\s|$)", " ").trim() 
```

# sqlite - 无法在文档目录中复制 .sqlite 文件

> ID：11071926
> 
> 赞同：2
> 
> 时间：2012-06-17T14:12:01.037
> 
> 标签：sqlite, ios5

我无法在文档目录中复制此 sqlite 文件：没有复制任何内容....请有人知道我错过了什么吗？谢谢！

```
BOOL success;
//documents path
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
NSString *dbPath = [documentsDir stringByAppendingPathComponent:@"verbi2.sqlite"];
NSFileManager *fileManager=[NSFileManager defaultManager];
success = [fileManager fileExistsAtPath:dbPath];
if (success) return;
//bundle path
NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"verbi2.sqlite"];
[fileManager copyItemAtPath:databasePathFromApp toPath:dbPath error:nil]; 
```

我已经解决了创建一个新的 .sqlite 文件（verbi5.sqlite）；可能有什么东西被破坏了。

# javascript - JqueryUi splitButton 未在浏览器中显示

> ID：11071927
> 
> 赞同：0
> 
> 时间：2012-06-17T14:12:18.623
> 
> 标签：javascript, jquery, html, jquery-ui

大家好，我是 jquery noobie，刚开始 jqueryUI

**问题概述：** 我正在尝试使用其中有一个 JqueryUI 拆分按钮（未呈现）的 jqueryUI 选项卡。Cheddar 、Mushrooms 和 Bocon 应该被渲染为拆分按钮。我已经从网站复制了标记和 jquery，所以我不会犯任何错误，但它仍然不起作用。 *火狐快照* ![在此处输入图像描述](../Images/0a6a4ce812e78c896e7389c9d8186718.png)

**代码：**
我为你们创建了一个[jsfiddle](http://jsfiddle.net/OwaisQureshi/MnGzM/)，但它不像在我的浏览器中那样工作。
*jQuery*

```
 <link href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.10/themes/redmond/jquery-ui.css"
    rel="Stylesheet" />
<script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
<script src="Scripts/jquery-ui-1.8.21.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#tabs").tabs(); //Vstudio intellisense shows .tabs() and .buttonset()
        $('#Toppings').buttonset(); //this means JqueryUi is attached.
    }
    ); 
```

*HTML*

```
<div id="MainBox">
    <!--MainBox-->
    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">Step 1: Your Background</a></li>
            <li><a href="#tabs-2">Step 2: Your Finances</a></li>
            <li><a href="#tabs-3">Step 3: Your Results</a></li>
        </ul>
        <div id="tabs-1">
            <div class="subBox">
                <div class="smallBox">
                    fgggghgh</div>
                <div class="smallBox">
                    fgggghgh</div>
                <div class="smallBox">
                    fgggghgh</div>
                <div class="smallBox">
                    fgggghgh</div>
            </div>
            <div class="subBox">
            </div>
            <div class="subBox">
            </div>
            <div class="subBox">
            </div>
        </div>
        <div id="tabs-2">
            <div id="Toppings">
                <input type="checkbox" id="checkbox1" />
                <label for="check1">
                    Cheddar
                </label>
                <input type="checkbox" id="checkbox2" />
                <label for="check2">
                    Mushrooms
                </label>
                <input type="checkbox" id="checkbox3" />
                <label for="check3">
                    Bacon
                </label>
            </div>
        </div>
        <div id="tabs-3">
            <p>
                Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate,
                pede vel vehicula accumsan, mi neque rutrum erat,Really dummy text.</p>
            <p>
                Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam
                ac lacus. Nulla facilisi. Praesent viverra justo vitae neque.Really dummy text twoS.</p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:25:04.043

I think it will work, if you change your labels to point to the correct input elements. The for="" attribute has to equal the id of the input.

example:

```
<input type="checkbox" id="checkbox1" />
<label for="checkbox1">Cheddar</label> 
```

# php - 在缓存文件中存储密码和其他敏感信息是否安全？

> ID：11071929
> 
> 赞同：0
> 
> 时间：2012-06-17T14:12:38.820
> 
> 标签：php, security, caching

我有一个缓存库，它将缓存数据存储在普通的 php 文件中，数据存储在数组中。

缓存文件示例：

**缓存用户ID.php：**

```
$userCache['userID']=2354654654;
$userCache['userName']=foo;
$userCache['userPass']=salted-and-hashed-pass; 
```

它就像一个魅力。所以我正在考虑使用它来存储用户数据（如上面的示例）以保存数据库查询。我已经对其进行了测试，它确实导致页面加载时间明显更快，然后从数据库中获取（这就是我想要这样做的原因）。

我不确定这是否真的安全。密码和其他敏感信息被加盐和散列。任何人都可以窃取这些数据吗？除了他们是否拥有访问源代码的 FTP 详细信息（情况并非如此）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T14:44:40.917

## 不！

您存储密码（或仍然敏感的密码哈希）的每个额外位置都是他们可以泄漏的另一个位置。这也是 SSL 页面不被缓存的原因之一：因为敏感信息不应该被缓存。

良好的身份验证代码（如您在 SSH 中找到的那种）甚至会努力将存储密码的内存区域标记为*不可交换*，因此操作系统无法将其写入磁盘。

敏感数据从该缓存中泄漏的风险可能很低，但这样做会*增加*风险。通过将此数据放在本地 PHP 文件中，任何本地文件包含漏洞现在都可以访问它。将密码实际回显到屏幕上可能需要的不仅仅是本地文件包含。在此缓存存在之前，甚至可能需要 SQL 注入漏洞或完整的服务器入侵才能访问密码哈希，现在这些*和*本地文件包含可以访问哈希。

可以将其他不太敏感的数据存储在多个位置以提高页面加载速度，但密码和密码哈希应该是禁止的。

通过存储身份验证令牌，您可以避免在每个页面加载时为经过身份验证的用户计算和查找密码哈希。这应该在登录时随机生成（因此很难预测）并且应该是短暂的。这正是 PHP 会话 ID 的含义，在第一次检查您比较密码的位置后验证您的用户是否已正确验证是完全足够的。

* * *

我突然想到，如果您在每次页面加载时查询数据库并计算密码哈希，您*必须*将密码（或可能的密码哈希）与客户端一起存储在某个地方，可能在 cookie 中，并且正在发送这些敏感数据在互联网上为每个页面请求。这通常是不好的做法，并且会导致密码（或密码哈希）保存在用户的硬盘驱动器和潜在的中间代理上，除非您对每个页面都使用 SSL。

* * *

附言

我很好奇为什么包含本地文件比从数据库中进行简单的键值查找要快得多*。*我的猜测是，您的网络要么存在可怕的延迟，要么存在用户表上的争用。任何一个都需要修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T14:17:31.240

只要文件包含`<?php`数据，用户就无法看到 PHP 源代码，除非他们具有 FTP 访问权限或存在允许他们读取任意文件的安全漏洞。

然而，你应该保护你的缓存文件夹，要么将它移到文档根目录之外，要么阻止任何通过网络服务器配置（例如`deny from all`你`.htaccess`的 .

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T14:20:54.410

As long as your cache files aren't in a www-accessible location then it should be secure enough (assuming your code doesn't have any flaws!). Don't rely on PHP tags hiding your content... the engine can fail and expose this data (although it is rare, it DOES happen).

But... if this was a good idea, wouldn't everyone be doing it? Do you really need ALL the data of a user, every time you want to know ANYTHING at all? It must be a very simple application if you think this is more efficient. I wonder why your database would be so slow. Have you set up proper indexes etc.?

# mysql - SQL 'COUNT' 没有返回我期望的结果，并且以某种方式将结果限制为一行

> ID：11071932
> 
> 赞同：1
> 
> 时间：2012-06-17T14:13:14.320
> 
> 标签：mysql, sql, count

一些背景：“图像”是一个“照片”的一部分，可能是零个或许多“画廊”的一部分。我的桌子：

“射击”表：

```
+----+--------------+
| id | name         |
+----+--------------+
|  1 | Test shoot   |
|  2 | Another test |
|  3 | Final test   |
+----+--------------+ 
```

“图像”表：

```
+----+-------------------+------------------+
| id | original_filename | storage_location |
+----+-------------------+------------------+
|  1 | test.jpg          | store/test.jpg   |
|  2 | test.jpg          | store/test.jpg   |
|  3 | test.jpg          | store/test.jpg   |
+----+-------------------+------------------+ 
```

'shoot_images' 表：

```
+----------+----------+
| shoot_id | image_id |
+----------+----------+
|        1 |        1 |
|        1 |        2 |
|        3 |        3 |
+----------+----------+ 
```

'gallery_images' 表：

```
+------------+----------+
| gallery_id | image_id |
+------------+----------+
|        1   |        1 |
|        1   |        2 |
|        2   |        3 |
|        3   |        1 |
|        4   |        1 |
+------------+----------+ 
```

我想回来，所以我可以说'对于这张照片，总共有 X 张图片，这些图片在 Y 画廊中精选：

```
+----+--------------+-------------+---------------+
| id | name         | image_count | gallery_count |
+----+--------------+-------------+---------------+
|  3 | Final test   |           1 |             1 |
|  2 | Another test |           0 |             0 |
|  1 | Test shoot   |           2 |             4 |
+----+--------------+-------------+---------------+ 
```

我目前正在尝试下面的 SQL，它似乎工作正常，但只返回一行。我无法弄清楚为什么会这样。奇怪的是，即使 'shoots' 为空，下面也会返回一行。

```
SELECT shoots.id,
       shoots.name,
       COUNT(DISTINCT shoot_images.image_id) AS image_count,
       COUNT(DISTINCT gallery_images.gallery_id) AS gallery_count
FROM shoots
LEFT JOIN shoot_images ON shoots.id=shoot_images.shoot_id
LEFT JOIN gallery_images ON shoot_images.image_id=gallery_images.image_id
ORDER BY shoots.id DESC 
```

感谢您花时间看这个:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:18:11.787

您缺少以下`GROUP BY`条款：

```
SELECT
     shoots.id,
     shoots.name,
     COUNT(DISTINCT shoot_images.image_id) AS image_count,
     COUNT(DISTINCT gallery_images.gallery_id) AS gallery_count
FROM shoots
LEFT JOIN shoot_images ON shoots.id=shoot_images.shoot_id
LEFT JOIN gallery_images ON shoot_images.image_id=gallery_images.image_id
GROUP BY 1, 2 -- Added this line
ORDER BY shoots.id DESC 
```

注意：SQL 标准允许`GROUP BY`给定列名或列号，因此在这种情况下`GROUP BY 1, 2`等价于。`GROUP BY shoots.id, shoots.name`有很多人认为这种“糟糕的编码实践”并主张始终使用列名，但我发现它使代码更具可读性和可维护性，并且在该站点上的许多用户出生之前，我就一直在编写 SQL，并且使用这种语法永远不会给我带来问题。

仅供参考，您之前获得一行而不是错误的原因是，在 mysql 中，与我所知道的任何其他数据库不同，您可以`group by`在使用聚合函数时省略该子句。在这种情况下，mysql 不会抛出语法异常，而是为非聚合列的每个唯一组合返回*第一行。*

虽然起初这对 SQL 纯粹主义者来说似乎很可恶，但它可以非常方便！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:15:27.163

您应该查看 MySQL 函数组。

# hadoop - 我的猪 UDF 在本地模式下运行，但在我的集群上因“反序列化错误：无法实例化”而失败

> ID：11071934
> 
> 赞同：0
> 
> 时间：2012-06-17T14:13:20.690
> 
> 标签：hadoop, apache-pig

我有一个猪 UDF，它在本地模式下完美运行，但失败：当我在集群上尝试它时，无法使用参数“null”实例化“com.bla.myFunc”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:16:29.253

*我的错误是在任务日志*中挖掘得不够努力。当您通过 jobTracker UI 进行挖掘时，您可以看到根本原因是：

```
Caused by: java.lang.ClassNotFoundException: com.google.common.collect.Maps
at java.net.URLClassLoader$1.run(URLClassLoader.java:202) 
```

所以，除了通常的：

```
 pigServer.registerFunction("myFunc", new FuncSpec("com.bla.myFunc")); 
```

我们应该补充：

```
 registerJar(pigServer, Maps.class); 
```

对于 UDF 使用的任何 jar，依此类推。

另一种选择是使用 build-jar-with-dependencies，但是您必须将 pig.jar 放在类路径中，否则您将解决这个问题：[嵌入式 hadoop-pig：使用的正确方法是什么UDF 的自动 addContainingJar？](https://stackoverflow.com/questions/8636222/embedded-hadoop-pig-whats-the-correct-way-to-use-the-automatic-addcontainingja)

# c# - 实体数据源自定义Where参数，获取NullReferenceException

> ID：11071936
> 
> 赞同：1
> 
> 时间：2012-06-17T14:13:49.053
> 
> 标签：c#, asp.net, entity-framework-4, membership

我正在尝试实现自定义 Where 参数，因此我只能显示当前登录用户的数据。我使用 EF4 和 SQL 成员资格。我收到一个指向我的代码隐藏的错误。

错误是：“System.NullReferenceException：对象引用未设置为对象的实例。”

```
 protected void Page_Load(object sender, EventArgs e)
{
    CleaningGridViewEDS.WhereParameters["Username"].DefaultValue = User.Identity.Name;
} 
```

和

```
<asp:EntityDataSource ID="ShowAllTasksEDS" runat="server"  ConnectionString="name=HmsEntitiesConnectionString"
            DefaultContainerName="HmsEntitiesConnectionString" EnableFlattening="False" EntitySetName="CleaningDatas"
            EnableDelete="true" EnableInsert="true" EnableUpdate="true" OrderBy="it.[DueDate]" AutoGenerateWhereClause="false"
            Where="it.[SubmittedByUserName] == @UserName" >
            <WhereParameters>
                <asp:Parameter Name="UserName" Type="String" /> 
```

有谁知道如何解决这个问题？

# java - Android 中的 XMPP 聊天

> ID：11071939
> 
> 赞同：0
> 
> 时间：2012-06-17T14:14:17.577
> 
> 标签：java, android, xmpp, ejabberd

这是我的名册课。

```
public class RosterList extends Activity {
/** Called when the activity is first created. */
Variables var = new Variables();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.roster);

    Roster roster = var.connection.getRoster();
    Collection<RosterEntry> entries = roster.getEntries();
    TextView tv;

    for (RosterEntry r : entries) {
        tv = (TextView)findViewById(R.id.rosterString);
        tv.append(r.getUser().toString()+ "\n");
    }
  }
} 
```

我为保持变量创建了一个单独的类，即`Variables`. 在那里，我创建了我的`XMPPConnection`-variable 和其他变量。但是这段代码中有一些运行时错误。

创建 -object时发生错误`roster`。我怎样才能访问`XMPPConnection`这个类？为什么我不能创建变量类的实例并访问连接变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:21:04.143

静态变量解决了这个问题。:)

# entity-framework - EF 4.3（代码优先） - 自定义 ICollection 无法捕获新项目

> ID：11071942
> 
> 赞同：1
> 
> 时间：2012-06-17T14:14:55.033
> 
> 标签：entity-framework, ef-code-first

这是参考我提出的关于[如何确定何时将项目添加到虚拟 ICollection 属性](https://stackoverflow.com/questions/11062910/ef-4-3-code-first-determine-when-items-are-added-to-the-virtual-icollection)的问题。如建议的那样，我创建了一个继承自 Collection 的自定义集合，如下所示

```
public class EntityCollection<T> : Collection<T>
{
    protected override void InsertItem(int index, T item)
    {
        base.InsertItem(index, item);
    }
} 
```

这被用作

```
public class DbAppointment
{
    public DbAppointment()
    {
        exceptionOcurrences = new EntityCollection<DbExceptionOcurrence>();
    }

    public virtual int AppointmentId { get; set; }
    public virtual string Subject { get; set; }
    public virtual string Body { get; set; }
    public virtual DateTime Start { get; set; }
    public virtual DateTime End { get; set; }

    private ICollection<DbExceptionOcurrence> exceptionOcurrences;
    public virtual ICollection<DbExceptionOcurrence> ExceptionOcurrences
    {
        get { return exceptionOcurrences; }
        set { exceptionOcurrences = value; }
    }
} 
```

问题是唯一一次似乎调用了被覆盖的 InsertItem 方法是如果我使用自定义初始化程序（下面的示例代码）初始化数据库并覆盖种子方法！我究竟做错了什么？

干杯腹肌

```
public class ContextInitializer : DropCreateDatabaseAlways<Context>
{
    protected override void Seed(Context context)
    {
        new List<DbAppointment>
        {
            new DbAppointment{ Subject = "hello", Body="world", Start=DateTime.Now,  End=DateTime.Now.AddMinutes(30)},

        }.ForEach(a => context.Appointments.Add(a));

        new List<DbExceptionOcurrence>
        {
            new DbExceptionOcurrence{ExceptionDate=DateTime.Now}
        }.ForEach(eo => context.ExceptionOcurrences.Add(eo));

        base.Seed(context);
    }
} 
```

# php - 使用 twitter api 时返回的奇怪字符

> ID：11071943
> 
> 赞同：0
> 
> 时间：2012-06-17T14:14:59.037
> 
> 标签：php, api, twitter

我正在使用 abraham 库查询 twitter api，用户的简历是用阿拉伯语编写的，但显示如下：

Ø§Ù†Ø§Ø²Ù‡Ù，Øª！

如何对此进行编码或显示正确的字符？

谢谢！

```
$twitterOAuth = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET,
        $_SESSION['access_token'], $_SESSION['access_token_secret']);

$user = $twitterOAuth->get('account/verify_credentials');
$user->description; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T00:24:54.270

使用`utf8_encode()`方法！

[http://php.net/manual/en/function.utf8-encode.php](http://php.net/manual/en/function.utf8-encode.php)

# silverlight - Silverlight 5 中的自定义反序列化

> ID：11071946
> 
> 赞同：0
> 
> 时间：2012-06-17T14:15:18.193
> 
> 标签：silverlight, serialization, deserialization, silverlight-5.0, iserializable

我试图弄清楚如何在 Silverlight 应用程序中实现自定义序列化/反序列化逻辑。在标准的 .NET 应用程序中，我可以简单地实现 ISerializable 来控制对象的序列化方式，并提供“反序列化构造函数”（SerializationInfo、StreamingContext）来处理反序列化时的传入数据。

因为 Silverlight 不支持 ISerializable，有没有其他方法可以做到这一点？

# c# - 转换 ObservableCollection 到 ObservableCollection

> ID：11071947
> 
> 赞同：1
> 
> 时间：2012-06-17T14:15:22.607
> 
> 标签：c#, collections, generic-collections

我有一个`ObservableCollection<T>`. T 有一个 ToString() 方法。我想做的是`ObservableCollection<T>`将`ObservableCollection<string>`. 快速搜索后，我发现了一些建议使用 foreach 方法的文章 - 还有其他方法吗？例如：

```
myCollection.ToObservableCollection(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T14:18:09.303

```
var newCollection = new ObservableCollection<string>(myCollection.Select(x => x.ToString())); 
```

# java - Play Framework 运行应用程序问题

> ID：11071950
> 
> 赞同：17
> 
> 时间：2012-06-17T14:15:49.713
> 
> 标签：java, frameworks, playframework

每当我尝试运行使用[Play](http://www.playframework.org/)创建的新 Web 应用程序时，都会出现以下错误。

```
Error occurred during initialization of VM
Could not reserve enough space for object heap

Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit. 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-22T02:57:20.540

在 Play framework 2.0.3 中，`<play framework install dir>\framework\build.bat`您需要将脚本替换为以下命令的命令行参数

```
java -Xms512M -Xmx1024M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=256M %DEBUG_PARAM% -Dfile.encoding=UTF8 -Dplay.version="%PLAY_VERSION%" -Dsbt.ivy.home="%~dp0..\repository" -Dplay.home="%~dp0." -Dsbt.boot.properties="file:///%p%sbt/sbt.boot.properties" -jar "%~dp0sbt\sbt-launch.jar" %* 
```

进入

```
java -XX:+CMSClassUnloadingEnabled %DEBUG_PARAM% -Dfile.encoding=UTF8 -Dplay.version="%PLAY_VERSION%" -Dsbt.ivy.home="%~dp0..\repository" -Dplay.home="%~dp0." -Dsbt.boot.properties="file:///%p%sbt/sbt.boot.properties" -jar "%~dp0sbt\sbt-launch.jar" %* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T22:42:58.023

刚刚在我的 Windows 8 计算机上下载并解压缩了 2.2.1。

遵循 Play Framework 网站上的文档，最终遇到了与您相同的问题。调整构建文件中的各种参数并没有做任何事情，但是：

```
java -XX:+CMSClassUnloadingEnabled %DEBUG_PARAM% -Dfile.encoding=UTF8 -Dplay.version="%PLAY_VERSION%" -Dsbt.ivy.home="%~dp0..\repository" -Dplay.home="%~dp0." -Dsbt.boot.properties="file:///%p%sbt/sbt.boot.properties" -jar "%~dp0sbt\sbt-launch.jar" %* 
```

...解决了这个问题。我不知道其他人在哪里找到了这个解决方案，但是 Play Framework 网站上没有提到这个解决方案。事实上，没有任何迹象表明任何事情都可能出错。毕竟，它只是一个您需要解压缩的文件。

它现在正在运行，但是很难相信一个早早搞砸的框架。似乎作者除了 Linux 之外没有测试任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T10:50:15.753

在 2.3 播放框架中：

```
 GO to : 
```

C://Play2.3/framework/build.bat 并打开此文件并进行这些更改。将此行替换为以下行。

java -Xms512M -Xmx1024M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=256M %DEBUG_PARAM% -Dfile.encoding=UTF8 -Dplay.version="%PLAY_VERSION%" -Dsbt.ivy.home="%~dp0.. \repository" -Dplay.home="%~dp0." -Dsbt.boot.properties="file:///%p%sbt/sbt.boot.properties" -jar "%~dp0sbt\sbt-launch.jar" %*

java -XX:+CMSClassUnloadingEnabled %DEBUG_PARAM% -Dfile.encoding=UTF8 -Dplay.version="%PLAY_VERSION%" -Dsbt.ivy.home="%~dp0..\repository" -Dplay.home="%~dp0 。” -Dsbt.boot.properties="file:///%p%sbt/sbt.boot.properties" -jar "%~dp0sbt\sbt-launch.jar" %*

然后在命令提示符上键入此命令：

```
 C:\Users\k.ashish\Downloads\play-2.2.3\play-2.2.3\yourapp>play

        C:\Users\k.ashish\Downloads\play-2.2.3\play-2.2.3\yourapp>run 
```

如果您无法执行此命令，请在 windows 中的环境变量中设置 play2.3 框架路径，如 java path 。

# c# - 如果我的数据库是在线主机，而不是在我的本地计算机中，连接字符串是什么？

> ID：11071952
> 
> 赞同：0
> 
> 时间：2012-06-17T14:15:52.083
> 
> 标签：c#, php, .net, wpf, wcf

> **可能重复：**
> [WCF 如何使用数据库 phpmyadmin 中的数据？](https://stackoverflow.com/questions/11064300/how-can-wcf-consuming-data-from-database-phpmyadmin)

我想问一下我应该在 WCF 上写的连接字符串。我的数据库是 phpmyadmin 的主机。我应该如何编写连接字符串？如果数据库使用的是在我的计算机上运行的 microsoft access 或 sqlserver，我已经完成了。现在，我很好奇我的数据库是否位于 phpmyadmin。

## 老实说，我昨天已经在这个论坛上问过这个问题。我非常感谢谁回答了我的问题，但我认为这不是答案。对不起，我很愚蠢，不明白你昨天说的话。如果你生气了，你不需要回答。谢谢。

超出主题，这是我的 WCF 代码。

```
public class Jobs : IJobs
{
    SqlConnection conn = new SqlConnection("Data Source=127.0.0.1; Initial Catalog=mydatabase;User=ael;Password=123456;Integrated Security=False");

    SqlDataAdapter da;
    DataSet ds;
    Data data = new Data();
    List<Data> listdata = new List<Data>();

    public DataSet Details()
    {
        conn.Open();
        ds = new DataSet();
        da = new SqlDataAdapter("Select * from data", conn);
        da.Fill(ds);
        conn.Close();
        return ds;
    }

    public Data GetDetails(int jobid)
    {
        conn.Open();
        ds = new DataSet();
        da = new SqlDataAdapter("Select * from data where id = " + jobid, conn);
        da.Fill(ds);
        if (ds.Tables[0].Rows.Count > 0)
        {
            data.userid = Convert.ToInt32(ds.Tables[0].Rows[0][0]);
            data.firstname = ds.Tables[0].Rows[0][1].ToString();
            data.lastname = ds.Tables[0].Rows[0][2].ToString();
            data.location = ds.Tables[0].Rows[0][3].ToString();
            ds.Dispose();
        }
        conn.Close();
        return data;
    }

    public List<Data> GetAllDetails()
    {
        conn.Open();
        ds = new DataSet();
        da = new SqlDataAdapter("Select * from data", conn);
        da.Fill(ds);
        foreach (DataRow dr in ds.Tables[0].Rows)
        {
            listdata.Add(
                new Data
                {
                    userid = Convert.ToInt32(dr[0]),
                    firstname = dr[1].ToString(),
                    lastname = dr[2].ToString(),
                    location = dr[3].ToString()
                }
            );
        }
        conn.Close();
        return listdata;
    }
} 
```

这是wpf

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        if (textbox1.Text.Trim().Length != 0)
        {
            ServiceReference1.JobsClient jc = new ServiceReference1.JobsClient();
            var x = jc.GetDetails(Convert.ToInt32(textbox1.Text));
            if (x.userid != 0)
            {
                textbox2.Text = x.userid.ToString();
                textbox3.Text = x.firstname;
                textbox4.Text = x.lastname;
                textbox5.Text = x.location;
            }
            else
                MessageBox.Show("RecordNotFound ... !", "Message", MessageBoxButton.OK, MessageBoxImage.Information);
        }
        else
            MessageBox.Show("EnterID", "Message", MessageBoxButton.OK, MessageBoxImage.Warning);
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
        ServiceReference1.JobsClient jc = new ServiceReference1.JobsClient();
        dataGrid1.ItemsSource = jc.Details().Tables[0].DefaultView;
    }

    private void button3_Click(object sender, RoutedEventArgs e)
    {
        ServiceReference1.JobsClient jc = new ServiceReference1.JobsClient();
        dataGrid1.ItemsSource = jc.GetAllDetails() ;
    }

} 
```

我已经在 phpmyadmin 创建了一个用户，并在我的 WCF 中使用它。但是每当我运行时，它都会显示“用户 ael 登录失败”。我需要在连接字符串中更改什么吗？之前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:04:07.667

如果我理解正确，您需要一个连接字符串的示例。因此，对于连接字符串格式，请参阅[ConnectionsStrings.com](http://www.connectionstrings.com/mysql)

例如，如果您使用的是标准端口并且没有更改它：

```
Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword; 
```

然后，您可以使用 MySQL 连接器（`MySql.Data.MySqlClient` [可在此处下载](http://dev.mysql.com/downloads/dotnet.html)命名空间）并按照本教程的详细说明以编程方式连接到 MySQL 数据库：[连接到 MySQL 服务器](http://www.functionx.com/mysqlnet/csharp/Lesson02.htm)。

# xcode - 从 XCode 调用 make 时的 PATH 变量

> ID：11071953
> 
> 赞同：1
> 
> 时间：2012-06-17T14:15:59.053
> 
> 标签：xcode, makefile, environment-variables

对于 iPad 应用程序，我需要将一些 CoffeeScript 文件转换为 JavaScript 文件，然后再将它们与应用程序捆绑在一起。

我尝试使用以下代码将 Makefile 添加到我的 XCode 项目中：

```
MANUAL_ROOT=IOS12BSH/manual
SCRIPTS_ROOT=$(MANUAL_ROOT)/scripts

COFFEE_SOURCES=$(SCRIPTS_ROOT)/*.coffee $(SCRIPTS_ROOT)/guides/*.coffee
JAVASCRIPT_TARGETS=$(COFFEE_SOURCES:.coffee=.js)

all: build

build: coffeescript

clean: clean_coffeescript

coffeescript: $(JAVASCRIPT_TARGETS)

clean_coffeescript:
    rm -f $(JAVASCRIPT_TARGETS)

$(JAVASCRIPT_TARGETS): $(COFFEE_SOURCES)
    coffee -c $(COFFEE_SOURCES) 
```

从 shell 运行这个 Makefile 没有问题。但是，在我将 Makefile 添加为 XCode 中的目标后，我遇到了问题。

Makefile 产生以下错误：

```
coffee -c IOS12BSH/manual/scripts/*.coffee IOS12BSH/manual/scripts/guides/*.coffee
/bin/sh: coffee: command not found
make: *** [IOS12BSH/manual/scripts/*.js] Error 127
Command /Applications/Xcode.app/Contents/Developer/usr/bin/make failed with exit code 2 
```

这很奇怪，因为该`coffee`命令安装在我的机器上（它安装在`/opt/local/bin/coffee`并`/opt/local/bin`添加到我`$PATH`的 in下`~/.profile`）。

所以我在我的 Makefile 中添加了一个，当 Makefile 由 XCode 执行时`echo $(PATH)`，它似乎有所不同。`$PATH`XCode 似乎没有从中读取设置`~/.profile`，因此`/opt/local/bin`不在`$PATH`.

这是什么原因，我该如何解决这个问题，以便`coffee`找到命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T08:41:41.950

好吧，似乎通过 Dock 或 Spotlight 启动的程序无法执行`.profile`，因此`$PATH`设置不正确。

所以一种方法是设置`$PATH`in `~/.MacOSX/environments.plist`。那显然可以工作，但是您需要重新启动才能工作。

另一种方法是始终从命令行使用`open projectfile`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T06:40:57.197

这个答案详细解释了这个问题： [https ://stackoverflow.com/a/14285335/751061](https://stackoverflow.com/a/14285335/751061)

最终对我来说效果最好的就是从命令行启动 Xcode。我编写了一个简单的 bash 脚本，如下所示：

```
source ~/.bash_profile  # This is the trick that gets us our environment variables.
open -a "Xcode" 
```

然后我从一个 Applescript 应用程序中调用它，只是为了给它一个我可以放在 Dock 上的包：

```
do shell script "~/xcode_launcher" 
```

在 bash 脚本中获取您的配置文件是必要的，因为从 Applescript 运行脚本永远不会从配置文件中获取，因此您仍然没有默认环境变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T11:47:42.663

与`ant`命令相同。它适用于终端，而不是 Xcode 必须这样做。让它工作的唯一方法：`sudo open project.xcodeproj`在终端。

# twitter - Twitter OAuth 中的 oauth_token_secret 有什么用？

> ID：11071955
> 
> 赞同：1
> 
> 时间：2012-06-17T14:16:04.083
> 
> 标签：twitter, oauth

[我按照https://dev.twitter.com/docs/auth/implementing-sign-twitter](https://dev.twitter.com/docs/auth/implementing-sign-twitter)上的教程`OAuth`在我的主页上使用。一切正常，在最后一步之后，我有一个`oauth_token`（将其转换为访问令牌后）和一个`oauth_token_secret`. 现在我想在 Twitter 上发布一个新状态。所以我在这个页面[https://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request)上做了所有事情，这只是对 /1/statuses/update.json 的发布请求。在那个页面上没有提到关于 的`oauth_token_secret`，所以我没有在我的请求中使用它，只是把`oauth_token`它放进去。提交发布请求后，twitter 给了我状态码 401 Unauthorized。为什么？我必须使用`oauth_token_secret`某个地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:29:56.510

令牌秘密用于散列签名库。密码之类的东西。您不发送密码，而是使用它来计算服务发送给您的内容的安全哈希。您发送该安全哈希，然后服务根据您发送的请求检查该安全哈希。如果它们匹配，则您已获得授权。

[OAuth 规范RFC 5849](https://www.rfc-editor.org/rfc/rfc5849)中描述了血淋淋的细节。

Twitter 使用 OAuth1.0a，但与该规范基本一致。

这是相关的位：

[https://www.rfc-editor.org/rfc/rfc5849#section-3.4.2](https://www.rfc-editor.org/rfc/rfc5849#section-3.4.2)

![在此处输入图像描述](../Images/683fd1044146166a531c7a0f218dd5ec.png)

# bash - 在运行另一个命令之前，我将如何阅读日志以检查命令是否已完成执行？

> ID：11071956
> 
> 赞同：0
> 
> 时间：2012-06-17T14:16:09.520
> 
> 标签：bash

这是我编写的一个 bash 脚本，它以 crontab 中指定的时间间隔自动修剪我的世界服务器的所有世界。它将在每个世界上一一执行“/wb $WORLD trim”命令和“/wb trim confirm”命令，其中$WORLD 是它当前正在处理的世界。通过将文件列表中的每个世界加载到 for 循环中，它将按顺序修剪每个世界。现在，由于世界修剪可能需要不同的时间，我不确定如何告诉它在尚未完成的情况下不要停止，因为每个世界只分配了 30 秒。我认为读取日志文件以获取命令的状态可能会起作用，但我不确定如何去做。我认为像“grep”和“awk”这样的东西可能会完成这项工作，但我不确定这是否会奏效，因为这似乎是一个相当复杂的障碍。有任何想法吗？我有一个日志文件的一部分，它在修剪发布的世界时打印[这里](http://pastebin.com/M6Y314SS)是pastebin。另外，除了我可以做些什么来改进这个脚本之外，还有什么可以做的吗？我只写了几个月的代码，而且不是那么频繁，所以我通常是编程/脚本的新手。

```
#!/bin/bash
# Title: World Border Trim Automator
# Author: Jonathan Bondhus

######### CONFIG STARTS HERE #########

# Location of the init script
INIT_SCRIPT="/etc/init.d/minecraft"

# Name to use for the screen instance
SCREEN="minecraft"

# User that should run the server
USERNAME="minecraft"

# Path to minecraft server directory 
MCPATH="/home/${USERNAME}/minecraft"

# Where the worlds are located on the disk
WORLDSTORAGE="${MCPATH}/worlds"

######### CONFIG ENDS HERE #########

## Start of script, don't edit anything below this line unless you know what you are doing

as_user() {
    if [ $ME == $USERNAME ] ; then
        bash -c "$1"
    else
        su $USERNAME -s /bin/bash -c "$1"
    fi
}

my_trim() {
    a=1
    for NAME in $(ls $WORLDSTORAGE)
    do
        if [ -d $WORLDSTORAGE/$NAME ]
        then
            WORLDNAME[$a]=$NAME
            a=$a+1
            # Run the /wb trim command
            echo "Running /wb $NAME trim..."
            as_user "screen -p 0 -S $SCREEN -X eval 'stuff \"wb $NAME trim\"\015'"
            sleep 2     # Wait 2 seconds
            clear
            echo "Running /wb trim confirm..."
            as_user "screen -p 0 -S $SCREEN -X eval 'stuff \"wb trim confirm\"\015'"
            sleep 1
            clear
            echo "Waiting 30 seconds for trim to complete..."
            sleep 30    # Wait 30 seconds
        fi
    done
}

my_is_running(){
    # Checks for the minecraft servers screen session
    # returns true if it exists.
    if ps ax | grep -v grep | grep "$SCREEN $INVOCATION" > /dev/null
    then
        return 0
    fi
    return 1
}

my_main(){
    ME=`whoami`     # Sets $ME to equal the current user's username
    my_is_running
    if my_is_running
        then
            my_trim
        else
            echo "Server is not running... Starting..."
            my_as_user "$INIT_SCRIPT start"
            wait 100
    fi
}

my_as_user() {
    if [ $me == $username ] ; then
        bash -c "$1"
    else
        su $USERNAME -s /bin/bash -c "$1"
    fi
}

my_main
exit 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T13:25:38.253

下面假设变量`MCLOGFILE`设置为日志文件名。

```
my_trim() {
    cd $WORLDSTORAGE
    for NAME in *
    do
        if [ -d $NAME ]
        then
            # Run the /wb trim command
            echo "Running /wb $NAME trim..."
            as_user "screen -p 0 -S $SCREEN -X eval 'stuff \"wb $NAME trim\"\015'"
            sleep 2     # Wait 2 seconds
            clear
            echo "Running /wb trim confirm..."
    kill `((tail -f $MCLOGFILE -n0& echo $! >&3
            as_user "screen -p 0 -S $SCREEN -X eval 'stuff \"wb trim confirm\"\015'"
            sleep 1
            clear >&2
            echo "Waiting for trim to complete..." >&2
           )|grep -q 'task successfully completed!'
          ) 3>&1|head -1
         `
        fi
    done
} 
```

这些`kill`东西在那里，因为否则将继续在后台运行，直到将其写入日志文件`tail`之后的一行。`task successfully completed!`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:44:42.387

你有什么理由在“屏幕”内运行“东西”？

如果你删除它，'stuff' 将同步执行，并在命令完成后返回。

```
my_trim() {
    a=1
    for NAME in $(ls $WORLDSTORAGE)
    do
        if [ -d $WORLDSTORAGE/$NAME ]
        then
            WORLDNAME[$a]=$NAME
            a=$a+1
            # Run the /wb trim command
            echo "Running /wb $NAME trim..."
            as_user "stuff \"wb $NAME trim\"\015" # will block here until stuff returns
            #sleep 2     # no reason this any more
            clear
            echo "Running /wb trim confirm..."
            as_user "stuff \"wb trim confirm\"\015"
            #sleep 1
            clear
            echo "Done"
            #sleep 30
        fi
    done
} 
```

# android - 在android中Mime多部分NoSuchMethodError异常

> ID：11071961
> 
> 赞同：1
> 
> 时间：2012-06-17T14:16:46.810
> 
> 标签：android, mime, multipartentity

我正在尝试使用`Mime`在 2 个 Android 设备之间传输文件。我有一个`sendFile()`（令人惊讶的）发送请求文件的方法。

这是代码：

```
public void sendFile(File f) throws IOException {
    BufferedOutputStream out = new BufferedOutputStream(s.getOutputStream());
    String filename = 
        f.getAbsolutePath().substring(f.getAbsolutePath().lastIndexOf("/") + 1);

    MultipartEntity multipartContent = new MultipartEntity();

    // send the file thorugh inputstream
    InputStreamBody isb = 
        new InputStreamBody(new FileInputStream(f), filename);

    multipartContent.addPart("sentFile", isb);

    multipartContent.writeTo(out);
    out.flush();
    out.close();
} 
```

现在，我正在使用 apache-mime4j-0.5.jar 和 httpmime-4.0-alpha3.jar 文件来支持“MultipartEntity”的使用。现在，jar 位于我的 android（app）项目的“libs”文件中，并且没有导入问题（项目编译......）。不过，我收到了这个运行时错误：

```
06-17 14:06:29.900: E/AndroidRuntime(22251): FATAL EXCEPTION: Thread-11
06-17 14:06:29.900: E/AndroidRuntime(22251): java.lang.NoSuchMethodError: org.apache.james.mime4j.message.Multipart.<init>
06-17 14:06:29.900: E/AndroidRuntime(22251): at org.apache.http.entity.mime.HttpMultipart.<init>  (HttpMultipart.java:64)
06-17 14:06:29.900: E/AndroidRuntime(22251): at org.apache.http.entity.mime.MultipartEntity.<init>(MultipartEntity.java:76)
06-17 14:06:29.900: E/AndroidRuntime(22251): at org.apache.http.entity.mime.MultipartEntity.<init>(MultipartEntity.java:99)
06-17 14:06:29.900: E/AndroidRuntime(22251): at com.cdp.controller.Connection.sendFile(Connection.java:71)
06-17 14:06:29.900: E/AndroidRuntime(22251): at com.cdp.controller.Controller.handleRequest(Controller.java:41)
06-17 14:06:29.900: E/AndroidRuntime(22251): at com.cdp.service.ServerService$SenderThread.run(ServerService.java:109) 
```

这个问题的根源可能是什么？我该如何解决？应用程序在尝试实例化新`MultipartEntity()`对象时崩溃，如代码所示。我已经浏览了很多帖子，但我尝试过的都没有。我会感谢你的帮助！

谢谢。

# hibernate - Hibernate jpa初始化对象中的所有代理

> ID：11071962
> 
> 赞同：1
> 
> 时间：2012-06-17T14:16:51.657
> 
> 标签：hibernate, jpa

我正在尝试序列化一个对象映射，该映射又可以包含休眠代理。JPA 或休眠是否有可以初始化所有代理的东西，或者我必须跟踪每个对象并专门初始化它们然后序列化。

该地图包含 15 个键，因此跟踪每个键并初始化它们有点大

# c# - Windows 8 Metro 应用程序中的 WFC 数据服务。如何cad相关对象？

> ID：11071963
> 
> 赞同：0
> 
> 时间：2012-06-17T14:16:57.973
> 
> 标签：c#, windows-8, odata, microsoft-metro, azure-sql-database

您好，我已经创建了简单的 WFC 数据服务并将实体模型与我的数据库连接起来。这是托管在 Azure 上的数据库

我创建了数据库表，添加了一些数据。我有两张桌子：

类别，标志。它们处于 m:n 关系

当我从我收到以下 xml 的 Sign(1) 数据时

```
 <link rel="edit" title="Sign" href="Sign(1)" /> 
 <link rel="http://schemas.microsoft.com/ado/2007/08/dataservices/related/Category" type="application/atom+xml;type=feed" title="Category" href="Sign(1)/Category" />
<category term="signdictionaryModel.Sign" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" />
<content type="application/xml">
<m:properties>
<d:ID m:type="Edm.Int32">1</d:ID> 
<d:title>A</d:title> 
<d:description>Litera a</d:description> 
</m:properties>
</content> 
```

我可以从中看出这个对象与某个类别的对象有关。但是我怎样才能得到这些对象。我知道它与类别的 2 个对象有关。我是否需要进行第二次查询才能获得它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:38:41.370

您可以进行第二个查询，例如 ~/Sign(1)/Category （取决于您使用的客户端库，可能内置对此的支持）。

或者，如果您知道您将始终需要每个标志的类别，那么您可以请求像这样扩展它们： ~/Sign(1)?$expand=Category 这将为您提供标志及其所有类别。（同样取决于库，它可能以比手动构建 URI 更好的方式支持这一点）。

# java - JUnit 测试 - 我做错了什么

> ID：11071967
> 
> 赞同：0
> 
> 时间：2012-06-17T14:17:37.910
> 
> 标签：java, junit

我对 JUnit 测试很陌生，我正在尝试测试以下非常简单的类

```
public interface IItemsService extends IService {

    public final String NAME = "IItemsService";

    /** Places items into the database
     * @return 
     * @throws ItemNotStoredException 
    */
    public boolean storeItem(Items items) throws ItemNotStoredException;

    /** Retrieves items from the database
     * 
     * @param category
     * @param amount
     * @param color
     * @param type
     * @return
     * @throws ItemNotFoundException 
     */
    public Items getItems (String category, float amount, String color, String type) throws ItemNotFoundException;

} 
```

这是我用于测试的内容，但我不断收到空指针，以及另一个关于它不适用于参数的错误......显然我在做一些愚蠢的事情，但我没有看到它。有人能指出我正确的方向吗？

```
public class ItemsServiceTest extends TestCase {

    /**
     * @throws java.lang.Exception
     */

    private Items items;

    private IItemsService itemSrvc;

    protected void setUp() throws Exception {
        super.setUp();

        items = new Items ("red", 15, "pens", "gel");

    }

    IItemsService itemsService;
    @Test
    public void testStore() throws ItemNotStoredException {
            try {
                Assert.assertTrue(itemSrvc.storeItem(items));
            } catch (ItemNotStoredException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                System.out.println ("Item not stored");
            }
    }

    @Test
    public void testGet() throws ItemNotStoredException {
            try {
                Assert.assertFalse(itemSrvc.getItems(getName(), 0, getName(), getName()));
            } catch (ItemNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();

            }
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T14:22:33.000

You're not creating an instance of the class under test, you're only declaring it as the interface. In each of your tests you should create an instance of the class under test and test it's implementation of the method. Note also, your tests should not be dependent on one another. You shouldn't rely on them running in particular order; any set up for a test should be done in the test set up method, not by another test.

Generally you want to use the AAA (Arrange, Act, Assert) pattern in your tests. The setUp (arrange) and tearDown (assert) can be part of this, but the pattern should also be reflected in each test method.

```
@Test
public void testStore() throws ItemNotStoredException {
    // Arrange
    ISomeDependency serviceDependency = // create a mock dependency
    IItemsService itemSvc = new ItemsService(someDependency);

    // Act
    bool result = itemSrvc.storeItem(items);

    // Assert
    Assert.assertTrue(result);
    // assert that your dependency was used properly if appropriate
} 
```

# android - 从 ListView 启动一个活动，从字符串中获取额外数据并将图片添加到布局中

> ID：11071968
> 
> 赞同：-1
> 
> 时间：2012-06-17T14:17:43.233
> 
> 标签：android, eclipse, listview, android-intent

我正在创建的应用程序是一个简单的问答应用程序。问题（在字符串数组中）位于自定义 listView 中。

我想要发生的是，当我单击一个问题时，它会将我带到一个布局，并且将出现与单击的问题相关的相应答案（来自字符串数组），即如果单击问题 3，将出现答案 3。此外，每个答案下方会出现不同的图片，例如 pic1、pic2、pic3。我相信 Main 类应该实现一个 onItemClickListener 并使用 switch/case。我认为我应该使用意图附加功能，但找不到如何编写代码以使此过程发生。

* * *

*问题字符串数组：*

```
<resources>
    <string-array name="questions">
        <item >q1</item>
        <item >q2</item>
        <item >q3</item>
    </string-array> 
</resources> 
```

* * *

*listView 问题的主要布局：*

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Questions" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

list_View 布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

</LinearLayout> 
```

* * *

*主要java类：*

> 公共类 Main 扩展 ListActivity {
> 
> public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState);
> 设置内容视图（R.layout.main）；
> 
> ```
>  setListAdapter(new MyAdapter(this, android.R.layout.simple_list_item_1,
>           R.id.textView1, getResources()
>                   .getStringArray(R.array.questions)));   } 
> ```
> 
> 私有类 MyAdapter 扩展 ArrayAdapter {
> 
> ```
>  public MyAdapter(Context context, int resource, int textViewResourceId,
>           String[] strings) {             
>               super(context, resource, textViewResourceId, strings);
> 
>   }
> 
>   public View getView(int position, View convertView, ViewGroup parent) {
> 
>       LayoutInflater inflater = (LayoutInflater) 
> ```
> 
> 获取系统服务（上下文。LAYOUT_INFLATER_SERVICE）；查看行 = inflater.inflate(R.layout.list_view, parent, false); String[] items = getResources().getStringArray(R.array.questions);
> 
> ```
>  TextView tv = (TextView) row.findViewById(R.id.textView1);
>       tv.setText(items[position]);
> 
>       return row;         }   } 
> ```
> 
> }

* * *

*答案字符串数组*

```
<resources>
    <string-array name="answers">
        <item>a1</item>
        <item>a2</item>
        <item>a3</item>
    </string-array>
</resources> 
```

* * *

*答案布局*

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

* * *

*回答类*

```
public class Answer extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.answer);
    }
} 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:43:23.557

您好，您可以在 getview 方法中为视图“行”实现 onclick 侦听器，并将附加内容中所需的问题详细信息传递给您的回答活动。

添加额外的意图：

```
yourintent.putExtra("myquestionref","Question 1"); 
```

从意图中获取额外信息：

```
getIntent().getStringExtra("myquestionref"); 
```

[Android Intent 额外示例](http://www.vogella.com/articles/AndroidIntent/article.html)

如果您有任何疑问，请告诉我。

# java - java中基于密码的加密/解密：即使密码相同也无法解密文件

> ID：11071975
> 
> 赞同：0
> 
> 时间：2012-06-17T14:18:36.373
> 
> 标签：java, encryption

`text file`我为加密和解密编写了以下代码。

加密过程工作正常，但我无法解密创建的文件。出于某种原因，即使我使用相同的密码，具有相同的长度和相同的填充，解密输出是一个与原始文件不同的编码文件......

在其他尝试中，我在单独运行中运行加密和解密时失败了。但是现在它们都在一个接一个地运行（即使它们使用不同的密钥规范，这是原因吗？如果是这样 - 我该如何绕过它？）

```
public static void main(String[] args) throws Exception {
    encrypt("samplePassword", new FileInputStream("file.txt"), new FileOutputStream("enc-file.txt"));
    decrypt("samplePassword", new FileInputStream("enc-file.txt"), new FileOutputStream("file-from-enc.txt"));
}

public static void encrypt(String password, InputStream is, OutputStream os) throws Exception {

    SecretKeySpec keySpec = new SecretKeySpec(password(password), "TripleDES");
    Cipher cipher = Cipher.getInstance("TripleDES");
    cipher.init(Cipher.ENCRYPT_MODE, keySpec);
    byte[] buf = new byte[8096];
    os = new CipherOutputStream(os, cipher);
    int numRead = 0;
    while ((numRead = is.read(buf)) >= 0) {
        os.write(buf, 0, numRead);
    }
    os.close();
}

public static void decrypt(String password, InputStream is, OutputStream os) throws Exception {

    SecretKeySpec keySpec = new SecretKeySpec(password(password), "TripleDES");
    Cipher cipher = Cipher.getInstance("TripleDES");
    cipher.init(Cipher.ENCRYPT_MODE, keySpec);

    byte[] buf = new byte[8096];
    CipherInputStream cis = new CipherInputStream(is, cipher);
    int numRead = 0;
    while ((numRead = cis.read(buf)) >= 0) {
        os.write(buf, 0, numRead);
    }
    cis.close();
    is.close();
    os.close();
}

private static byte[] password(String password) {

    byte[] baseBytes = { (byte) 0x38, (byte) 0x5C, (byte) 0x8, (byte) 0x4C, (byte) 0x75, (byte) 0x77, (byte) 0x5B, (byte) 0x43,
            (byte) 0x1C, (byte) 0x1B, (byte) 0x38, (byte) 0x6A, (byte) 0x5, (byte) 0x0E, (byte) 0x47, (byte) 0x3F, (byte) 0x31,
            (byte) 0xF, (byte) 0xC, (byte) 0x76, (byte) 0x53, (byte) 0x67, (byte) 0x32, (byte) 0x42 };
    byte[] bytes = password.getBytes();
    int i = bytes.length;
    bytes = Arrays.copyOf(bytes, 24);
    if(i < 24){
        for(;i<24; i++){
            bytes[i] = baseBytes[i];
        }
    }
    return bytes;
} 
```

谁能给我一个提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:54:43.807

乍一看，

```
cipher.init(Cipher.ENCRYPT_MODE, keySpec); 
```

应该是

```
cipher.init(Cipher.DECRYPT_MODE, keySpec); 
```

在解密方法中。

看看[文档](http://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html#DECRYPT_MODE)。

# django - Django 表单 is_valid() 失败

> ID：11071983
> 
> 赞同：13
> 
> 时间：2012-06-17T14:21:07.727
> 
> 标签：django, forms, post

我是 Web 开发的真正初学者。以下代码在`is_valid()`检查时失败。但我不明白为什么：表单是否应该从 POST 数据中获取数据？

模型：

```
class Statement(models.Model):
    text = models.CharField(max_length=255)
    user = models.ForeignKey(User)
    time = models.DateField()
    views = models.IntegerField() 
```

模型形式：

```
class StatementForm(ModelForm):
    class Meta: 
        model = Statement
        widgets = {
                   'time':forms.HiddenInput(),
                   'user':forms.HiddenInput(), 
                   'views':forms.HiddenInput(), 
        } 
```

查看功能：

```
def new(request):  
    if request.method == 'POST': # If the form has been submitted...
        form = StatementForm(request.POST) # A form bound to the POST data
        if form.is_valid():
            stmt = form.save()
            path = 'stmt/' + stmt.id
            return render_to_response(path, {'stmt': stmt})
    else:  
        c = {}
        c.update(csrf(request))
        loggedin_user = request.user 
        d = datetime.now()
        form = StatementForm(request.POST, initial={'time': d.strftime("%Y-%m-%d %H:%M:%S"), 'user':loggedin_user, 'views':0})
        return render_to_response('new_stmt.html', {'form': form, },context_instance=RequestContext(request)) 
```

我找到了类似的主题并尝试了很多。这就是我认为它应该工作的方式。我真的需要建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-17T14:36:53.067

模型的所有字段都是必需的。因此，`form.is_valid()`如果所有字段都填充了正确的值并且没有空白，则为 True。您已将 fields `time`、`user`、声明`views`为隐藏字段。您确定已将它们填写在您的模板表格中吗？此外，您可能想要自动标记字段`time = models.DateField()`。修改您的模型字段，例如

```
time = models.DateField(auto_now=True)`. 
```

在此之后，您不必自己填写模板表格。

**在所有情况下，您的视图都必须返回 HttpResponse 对象**。如果您的表单无效，即如果`form.is_valid()`将返回 False，那么`HttpResponse`您的视图将不会返回任何对象。这可能是你失败的根源。添加`else`声明`if form.is_valid()`：

```
from django.http import Http404
def new(request):  
    if request.method == 'POST': # If the form has been submitted...
        form = StatementForm(request.POST) # A form bound to the POST data
        if form.is_valid():
            stmt = form.save()
            path = 'stmt/' + stmt.id
            return render_to_response(path, {'stmt': stmt})
        else:
            # Do something in case if form is not valid
            raise Http404 
    else: 
        # Your code without changes 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T14:31:16.520

更改此行：

```
 form = StatementForm(request.POST, initial={'time': d.strftime("%Y-%m-%d %H:%M:%S"), 'user':loggedin_user, 'views':0}) 
```

为了这：

```
 form = StatementForm(initial={'time': d.strftime("%Y-%m-%d %H:%M:%S"), 'user':loggedin_user, 'views':0}) 
```

# iphone - Can we get page style without using UIpageviewcontoller?

> ID：11071986
> 
> 赞同：0
> 
> 时间：2012-06-17T14:21:22.703
> 
> 标签：iphone, xcode, ios5, ios4, uipageviewcontroller

I am creating an app that have to work on iPhone3G which supports ios4..I need a bundle of images that have to be view as page style.But i came to know that ios4 doesn't support UIPageViewController..Is there a way to get that programmatically?..

If u share any tutorial or link regarding this it will be greatful...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:37:09.017

你不能做同样的动画，但你可以使用类似的东西[检查这个项目它有自己的演示](https://github.com/brow/leaves)

请注意，我做了一个与您类似的项目，我所做的是在 iOS4 中为 ios4 和 iOS5 呈现不同的读者，我使用了我给你的链接，在 iOS 5 中我使用了`UIPageViewController`

# android - Eclipse Contacting Software Sites

> ID：11071987
> 
> 赞同：0
> 
> 时间：2012-06-17T14:21:27.370
> 
> 标签：android, eclipse, eclipse-plugin, installation

I have installed the latest version of Eclipse IDE for Java Developers, Version: Indigo Service Release 2\. I am trying to develop Android Apps using Eclipse. But when I go to Install New Software I get the following error:

> "Contacting Software Sites" has encountered a problem No repository found at [http://download.eclipse.org/tools/mylyn/update/weekly/extras](http://download.eclipse.org/tools/mylyn/update/weekly/extras).

Also under Available Software Sites I have 2 Names:-

1) Mylyn Extras (deprecated) and Location is [http://download.eclipse.org/tools/mylyn/update/extras](http://download.eclipse.org/tools/mylyn/update/extras)

2) No Name but the Location is: [http://download.eclipse.org/tools/mylyn/update/weekly/extras](http://download.eclipse.org/tools/mylyn/update/weekly/extras)

What do I do? I suspect it's probably a different link.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:47:29.750

您需要的所有信息都在 Mylyn 官方网站上。访问[下载页面](http://www.eclipse.org/mylyn/downloads/)和/或[其他存储库位置](http://wiki.eclipse.org/Mylyn/Repositories)站点并更新您的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:24:16.097

If you are not using any plugins from tha site you can just remove it from the list.

# python - 音乐播放器播放列表

> ID：11071992
> 
> 赞同：2
> 
> 时间：2012-06-17T14:22:05.940
> 
> 标签：python, tkinter, python-2.6, playlist, audio-player

我制作了一个带有播放列表的音乐播放器，但播放列表中的歌曲无法播放，因为播放列表中只有歌曲的名称，而不是完整的 mp3 文件。你能告诉我如何处理这个问题吗？这是我的代码：

```
from Tkinter import *
import mp3play
import tkFileDialog
import Tkinter
import tkFont
import Tkinter as tk
#from PIL import ImageTk,Image

def open_file():                                #Opens a dialog box to open .mp3 file
    global music                                #then sends filename to file_name_label.
    global mp3
    global play_list
    filename.set (tkFileDialog.askopenfilename(defaultextension = ".mp3", filetypes=[("All Types", ".*"), ("MP3", ".mp3")]))
    playlist = filename.get()
    playlist_pieces = playlist.split("/")
    play_list.set (playlist_pieces[-1])
    playl = play_list.get()
    play_list_display.insert(END, playl)
    mp3 = filename.get()
    print mp3
    music = mp3play.load(mp3)
    pieces = mp3.split("/")
    name.set (pieces[-1])

def play():                                     #Plays the .mp3 file
    music.play()

def stop():                                     #Stops the .mp3 file
    music.stop()                

def pause():                                    #Pauses or unpauses the .mp3 file
    if music.ispaused() == True:
        music.unpause()
    elif music.ispaused() == False:
        music.pause()

def vol(event):                                 #Allows volume to be changed with the slider
    v = Scale.get(volume_slider)
    music.volume(v)

def tune_changed(event):
    idx = event.widget.curselection()[0]
    print ("Now playing %s" % event.widget.get(idx))

def Exit():
    exit()

root = tk.Tk()
root.title("EmoPlayer")

root.configure(background='black')

#root = Tk()

root.geometry('300x100+750+300')

filename = Tkinter.StringVar()
name = Tkinter.StringVar()
play_list = Tkinter.StringVar()
menubar = Menu(root)
filemenu = Menu(menubar, tearoff=0, bg="black", fg="Orange")
menubar.add_cascade(label='File', menu = filemenu)
filemenu.add_command(label='Open', command = open_file)
filemenu.add_separator()
filemenu.add_command(label='Exit', command = Exit)
root.config(menu=menubar)
open_file = Button(root, width = 6, height = 1, text = 'Mood',fg='Orange', bg='black')
open_file.grid(row=0, column=3)
play_button = Button(root, width = 5, height = 1, text='Play', fg='Orange', command = play, bg="black")
play_button.grid(row=0, column=0, sticky = W)
stop_button = Button(root, width = 5, height = 1, text='Stop',fg='Orange', command = stop, bg="black")
stop_button.grid(row=0, column=1, sticky = W)
pause_button = Button(root, width = 5, height = 1, text='Pause',fg='Orange', command = pause, bg="black")
pause_button.grid(row=0, column=2)
volume_slider = Scale(root, label='Volume', orient = 'horizontal', fg = 'Orange', command = vol, bg="black")
volume_slider.grid(row=0, column=4)
file_name_label = Label(root, font=('Comic Sans', 8), fg = 'Orange', wraplength = 300, textvariable=name, bg="black" )
file_name_label.grid(row=3, column=0, columnspan=8)

play_list_window = Toplevel(root, height = 150, width = 100)
play_list_window.title("Playlist")
play_list_display = Listbox(play_list_window, selectmode=EXTENDED, width = 50, bg="Dark Slate grey", fg="Orange")
play_list_display.bind("<Double-Button-1>", tune_changed)

play_list_display.pack()

play_list_window.mainloop()

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T05:12:47.903

我查看了您的代码，因为我以前没有使用过 mp3play，并且认为它很有趣。

这是我更改的内容：

1.  我将您的代码放在一个类中，以便在方法之间共享变量更容易和更清晰。它还消除了使用`global`. 通常会稍微清理一下代码，例如，分解过长的行。我尽量不要在没有必要的地方更改您的代码。
2.  添加了`trackLocations`保留实际文件路径的列表。
3.  添加了一行，在播放列表中双击加载新文件

这是结果，我希望它有帮助：

```
from Tkinter import *
import mp3play
import tkFileDialog
import Tkinter
import tkFont
import Tkinter as tk

class musicplay:
    def __init__(self):
        self.music = None
        self.play_list = []
        self.trackLocations = []

        self.root = tk.Tk()
        self.root.title("EmoPlayer")

        self.root.configure(background='black')
        self.root.geometry('300x100+750+300')

        self.filename = Tkinter.StringVar()
        self.name = Tkinter.StringVar()
        self.play_list = Tkinter.StringVar()

        menubar = Menu(self.root)
        filemenu = Menu(menubar, tearoff=0, bg="black", fg="Orange")
        menubar.add_cascade(label='File', menu = filemenu)
        filemenu.add_command(label='Open', command = self.open_file)
        filemenu.add_separator()
        filemenu.add_command(label='Exit', command = self.Exit)
        self.root.config(menu=menubar)

        open_file = Button(self.root, width = 6, height = 1,
                           text = 'Mood',fg='Orange', bg='black')
        open_file.grid(row=0, column=3)

        play_button = Button(self.root, width = 5, height = 1, text='Play',
                             fg='Orange', command = self.play, bg="black")
        play_button.grid(row=0, column=0, sticky = W)

        stop_button = Button(self.root, width = 5, height = 1, text='Stop',
                             fg='Orange', command = self.stop, bg="black")
        stop_button.grid(row=0, column=1, sticky = W)

        pause_button = Button(self.root, width = 5, height = 1, text='Pause',
                              fg='Orange', command = self.pause, bg="black")
        pause_button.grid(row=0, column=2)

        self.volume_slider = Scale(self.root, label='Volume',
                              orient = 'horizontal', fg = 'Orange', 
                              command = self.vol, bg="black")
        self.volume_slider.grid(row=0, column=4)

        file_name_label = Label(self.root, font=('Comic Sans', 8),
                                fg = 'Orange', wraplength = 300,
                                textvariable=self.name, bg="black")
        file_name_label.grid(row=3, column=0, columnspan=8)

        play_list_window = Toplevel(self.root, height = 150, width = 100)
        play_list_window.title("Playlist")
        self.play_list_display = Listbox(play_list_window, selectmode=EXTENDED,
                                    width = 50, bg="Dark Slate grey",
                                    fg="Orange")
        self.play_list_display.bind("<Double-Button-1>", self.tune_changed)
        self.play_list_display.pack()
        play_list_window.mainloop()

        self.root.mainloop()        

    def open_file(self):                                
        """
        Opens a dialog box to open .mp3 filemusic,
        then sends filename to file_name_label.
        """
        self.filename.set(tkFileDialog.askopenfilename(
            defaultextension = ".mp3",
            filetypes=[("All Types", ".*"), ("MP3", ".mp3")]))
        self.playlist = self.filename.get()
        playlist_pieces = self.playlist.split("/")
        self.play_list.set (playlist_pieces[-1])
        playl = self.play_list.get()
        self.play_list_display.insert(END, playl)
        print self.filename.get()
        self.music = mp3play.load(self.filename.get())
        pieces = self.filename.get().split("/")
        self.trackLocations += [self.filename.get()]
        self.name.set(pieces[-1])

    def play(self):
        """Plays the .mp3 file"""
        self.music.play()

    def stop(self):
        """Stops the .mp3 file"""
        self.music.stop()                

    def pause(self):
        """Pauses or unpauses the .mp3 file"""
        if self.music.ispaused():
            self.music.unpause()
        else:
            self.music.pause()

    def vol(self, event):
        """Allows volume to be changed with the slider"""
        v = Scale.get(self.volume_slider)
        try:
            self.music.volume(v)
        except:
            pass

    def tune_changed(self, event):
        idx = event.widget.curselection()[0]
        self.music = mp3play.load(self.trackLocations[int(idx)])
        print ("Now playing %s" % event.widget.get(idx))

    def Exit(self):
        exit()

if __name__ == "__main__":
    musicplay() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:50:35.987

ValueError: int() 基数为 10 的无效文字：“指定的设备未打开或未被 MCI 识别。”

经过长时间的谷歌搜索后，我也遇到了这个错误，我在一些德国论坛上发现了一些 c++ 人的帖子，他说这是因为带有女巫 MCI 的 ID3v2 标签有问题。

然后我使用 mutagen - Python 多媒体标记库，在播放之前从 mp3 中去除标记，从那以后我再也没有遇到过这个错误。此外，如果使用诱变剂，请确保 mp3 文件在剥离其标签之前具有写入权限。

# php - shell_exec() and exec() not working in PHP

> ID：11071995
> 
> 赞同：2
> 
> 时间：2012-06-17T14:22:36.027
> 
> 标签：php, shell, shell-exec

Like many others I have problem with shell_exec() function in PHP. I have safe mode disabled and disabled_functions deleted from php.ini.

If I run php script from terminal (php print.php) it's working perfectly but if I run it from web browser nothing happens.

Here is the scipt:

```
<?php

$output = shell_exec('lp print.php');
echo "<pre>$output</pre>";

?> 
```

Please help me. I'm running PHP 5.3.10 on Apache2\. My OS is Ubuntu Server 12.4\. Here is the phpinfo page: [http://testni-server.info/info.php](http://testni-server.info/info.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:35:18.410

编程语言 PHP 允许通过配置指令 safe_mode_exec_dir 限制外部命令的执行。该指令应包含包含 PHP 脚本可以运行的程序的目录的完整路径。如果脚本尝试执行不在此目录中的命令，则不会执行该命令。此配置指令仅在启用安全模式时才有效，这意味着对用户的限制更多，有时甚至是不需要的限制。PHP 没有已知的可能性来限制禁用安全模式的外部命令的执行。因此，这是一个将特殊指令 exec_dir 直接添加到 PHP 中的补丁。该指令与 safe_mode_exec_dir 非常相似，但不必启用安全模式。

此补丁限制或纠正了这些函数的行为：

```
exec()
passthru()
proc_open()
shell_exec()
system()
popen()
is_executable() 
```

创建该补丁的目的是为了限制用户在多域 apache 服务器上执行外部命令，首先是针对 PHP 4.2.1 版本。该补丁被发送给 PHP 开发人员，因此它可以成为 PHP 的一部分，但没有一个 PHP 开发人员对此感兴趣。另一方面，一些 PHP 用户想要这个补丁，因此创建了这个站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:32:23.413

您的命令行 (CLI) PHP 可能使用与 CGI 不同的工作目录和/或路径。尝试在调用之前`lp`明确定义工作目录（包含命令）。`chdir()``shell_exec()`

# filesystems - 什么是 inode 世代数？

> ID：11071996
> 
> 赞同：11
> 
> 时间：2012-06-17T14:22:36.370
> 
> 标签：filesystems, linux-kernel, fuse, inode, vfs

我计划使用低级 API 实现 FUSE 文件系统，目前正在尝试理解该`fuse_entry_param`结构。

我想知道`unsigned long fuse_entry_param::generation`实际上是什么意思。[文档](https://web.archive.org/web/20150910165818/http://fuse.sourceforge.net/doxygen/structfuse__entry__param.html#a6481786ffc9fcf968df41953d3f0bf98)只是说`ino`/`generation`对在文件系统的生命周期内应该是唯一的，但没有详细说明。

inode 生成的语义是什么以及它们是如何使用的？

例如，我是否可以将`generation`其视为附加位`ino`（如某种命名空间）并自由使用它们将任意生命周期唯一的 128 位（`2*sizeof(unsigned long)`在 x86_64 上）值映射到 inode？还是世代仅按顺序递增？当 inode 编号发生冲突但它们的世代编号不同时会发生什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T09:02:09.347

如果您的 inode 编号生成器可能在不同时间为同一对象生成不同的 inode 编号，则“generation”字段很重要。这对于磁盘文件系统来说并不常见，但对于网络文件系统（如 NFS，参见[1](https://web.archive.org/web/20100109210802/http://old.nabble.com/fuse_entry_param-td26661841.html)）可能会发生。

在[1](https://web.archive.org/web/20100109210802/http://old.nabble.com/fuse_entry_param-td26661841.html)中提到，服务器在重新启动后可能会使用一组不同的（熔断）inode 编号/（nfs）文件句柄。如果发生这种情况，新的 inode 编号可能以与服务器重新启动之前给出的 inode 编号不同的方式映射到对象。

客户端可以为重启*前的 inode 集和重启**后*的inode 集使用不同的代号，以明确表示哪个 inode。

如果你的文件系统有一个 inode 的静态生成方案（其中一个 inode 编号总是指向同一个对象），则不需要使用生成编号，它可以用于扩展 inode 编号。

# c++ - Using ARPACK++ on Windows with Visual Studio

> ID：11071998
> 
> 赞同：1
> 
> 时间：2012-06-17T14:22:43.217
> 
> 标签：c++, linker

in my [quest](https://stackoverflow.com/questions/11064670/c-eigenvalue-vector-decomposition-only-need-first-n-vectors-fast) to solve eigenvector problems of symmetric, real matrices quickly (I only need the first N eigenvalues and vectors, where "first" refers to the one with largest (real) value), I'm trying to get ARPack++ running on Windows. I use MSVS 2010 for development.

I'm currently in linker hell. I'm also not a 99 years C++ professional who eats bits for breakfast.

First, ARPACK++ is a header-only library, that's good! It depends on ARPACK, and ARPACK again has required dependencies on BLAS and LAPACK. Luckily, for windows users, the .lib and .dll files [are available](http://www.stanford.edu/~vkl/code/libs.html) for BLAS, LAPACK and ARPACK, and ARPACK++ has been [patched](http://reuter.mit.edu/software/arpackpatch/) such that it works with modern compilers (and includes some bug-fixes).

As it seems, ARPACK++ introduces the **required** dependency to the **SuperLU** library. This is because, in my case I need to use the

```
ARluSymStdEig<ARFLOAT> prob(nev, matrix, which, ncv, tol,
                          maxit, resid, AutoShift); 
```

class/CTOR, which has "lu" in its name, and I do indeed get missing symbols. The next thing I tried was to grab the SuperLU library from around that time (2000ish), which is SuperLU 2.0\. This one can be compiled using MSVS2010 directly (compared to ARPACK for example which has to be compiled with MinGW/MSys, unless you pay for Intel's FORTRAN compilers). I included the static superlu2.lib I created, but it seems SuperLU itself has methods that are just declared but not implemented, particularly

```
void cusolve(int, int, complex*, complex*);
void clsolve(int, int, complex*, complex*);
void cmatvec(int, int, int, complex*, complex*, complex*); 
```

in **cgstrs.c**. Now I'm stuck and don't know how to continue :/ It seems like SuperLU has dependencies again, but they're not mentioned.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:02:48.953

事实证明，我忘记做的只是将 SuperLU 的“src”中的所有 .c 和 .h 文件添加到 VS 项目中，而且还添加了“cblas”目录中的文件。因此，所有依赖关系都得到了解决。