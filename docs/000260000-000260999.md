# StackOverflow 问答 000260000-000260999

# vb.net - 从 DataBound 控件更新数据库

> ID：260000
> 
> 赞同：1
> 
> 时间：2008-11-03T21:19:09.703
> 
> 标签：vb.net, winforms, data-binding

我目前正在创建绑定到访问数据库的 VB.NET 中的 WinForm。

基本上我有两种形式：一种是用于搜索数据库的搜索表，另一种是详细信息表。您在 searchForm 上运行搜索，它会返回主键列表和一些其他标识值。然后双击要查看的条目，它会加载详细信息表单。

详细信息表单有一组数据绑定控件来显示数据：主要是文本框和复选框。我设置它的方式是我使用 UI 构建表单，然后将每个控件的 DataBindings 属性设置为“TblPropertiesBindingSource -”，其中值名称是表中的值之一（例如 PropertyID 或 HasWoodFloor）。

然后，当您双击搜索表单中的条目时，我会通过从所选行中解析主键 (PropertyID) 来处理该事件，然后将其存储到详细信息表单中：

注意：详细信息是打开以显示信息的详细信息表单

```
Private Sub propView_CellDoubleClick(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles propView.CellDoubleClick
        Dim detail As frmPropertiesDetail = New frmPropertiesDetail
        detail.id = propView.Rows(e.RowIndex).Cells(0).Value
        detail.Show()
    End Sub 
```

然后，在加载详细信息表单时，它在 BindSource 上设置过滤器，如下所示：

```
TblPropertiesBindingSource.Filter() = "PropertyID=" & id 
```

到目前为止，这很好用。详细信息表单上的所有控件都将显示正确的信息。问题是更新更改。

场景：如果我让用户加载属性 10001 的详细信息，它将在名为 descriptionBox 的文本框中显示描述，该描述与数据库中该条目的描述值的值相同。我希望用户能够更改文本框的文本（他们目前可以这样做）并单击保存按钮（saveBut）并让表单将控件中的所有值更新到数据库。

从理论上讲，它应该这样做，因为控件是 DataBound，因此我可以避免编写告诉数据库行中的每个条目获取对齐控件的值的代码。

我试过调用 PropertiesTableAdapter.Update(PropertiesBindingSource.DataSource)，但这似乎没有做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-03T23:10:24.880

好的，我能够弄清楚我从朋友那里窃取的一些代码。

一切正常，问题是更新

当我保存数据时，我只是在打电话：

```
Me.TblProptertiesTableAdapter.Update(Me.TblPropertiesBindingSource.DataSource) 
```

正确的代码，无需更改任何其他内容是：

```
Me.Validate()
Me.TblPropertiesBindingSource.EndEdit()
Me.TblPropertiesTableAdapter.Update(Me.RentalPropertiesDataSet.tblProperties)
Me.RentalPropertiesDataSet.AcceptChanges() 
```

其中 RentalPropertiesDataSet 是 TblProperties 来自的数据库。为了使其正常工作，请确保 TblPropertiesBindingSource.DataSource 是 RentalPropertiesDataSet.Properties 这是 VS08 在创建 BindingSource 时为我自动设置的。

基本上，我需要告诉 BindingSource 停止允许编辑字段。然后我们将更改保存到数据库中，最后我们告诉数据库接受更改。

# .net - 从 XSD 生成类

> ID：260001
> 
> 赞同：2
> 
> 时间：2008-11-03T21:19:14.977
> 
> 标签：.net, web-services, xsd, code-generation

您正在 SOA 世界中进行 Web 服务的合同优先开发。

编辑 XSD 文件后，从 XSD 文件自动（重新）生成 .net 类的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-03T21:26:35.477

xsd.exe 将为您生成新的类。

根据 Visual Studio 的设置方式，将 xsd.exe 添加到“属性/构建事件/构建后事件”将在您每次进行重建时强制重新生成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-03T22:12:42.687

如果使用 .net 1.1 或 2.0，xsd.exe。如果使用 3.0 或 3.5，svcutil.exe。如果您不介意使用不受支持的代码，LINQ-to-XSD ( [http://blogs.msdn.com/xmlteam/archive/2008/02/21/linq-to-xsd-alpha-0-2\. aspx](http://blogs.msdn.com/xmlteam/archive/2008/02/21/linq-to-xsd-alpha-0-2.aspx)）很酷。使用任何工具时，请注意某些模式不能很好地自动转换为 .NET 类。如果您发现是这种情况，请手动编写类代码并实现 IXmlSerializable。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-06T03:35:30.770

我们正在使用Thinktecture 的 WSCF [**- Web Services Contract First**](http://www.thinktecture.com/resourcearchive/tools-and-software/wscf)工具进行 Web 服务开发，首先创建 XSD 模式，然后使用该工具生成服务接口。我们已经使用这个工具 2 年了，我强烈推荐它。

同样的人还启动了[**WSCF.blue**](http://www.codeplex.com/WSCFblue)项目，该项目是他们原始工具的继承者，并允许合同优先开发（首先阅读 XSD）。WSCF.blue 旨在支持 Windows Communication Foundation (WCF)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-05-05T05:58:27.937

我为此使用了[http://xsd2code.codeplex.com/releases/view/22222](http://xsd2code.codeplex.com/releases/view/22222) VS addin。

# svn - 带有 mod_ldap 的 Apache 备份 LDAP 存储库

> ID：260004
> 
> 赞同：3
> 
> 时间：2008-11-03T21:20:38.860
> 
> 标签：svn, apache, ldap, mod-ldap

我目前正在为我的 Subversion 存储库使用 Apache 前端，以便进行 LDAP 身份验证。

我的设置相当普通，但是我希望能够指定一个“备份”LDAP URL，以防主 URL 出现故障。除了使用第二个位置或指向辅助 LDAP 服务器的虚拟主机之外，我目前看不到这样做的方法。

虽然这在技术上可行，但它不是最佳解决方案。我想要一些不需要用户手动选择备份 URL 的东西。

这目前是 CentOS 5 上的 Apache 2.2.3。

httpd.conf 中的示例条目：

```
<VirtualHost *:80>
 ServerName svn.example.com
 ServerAlias svn.example.com svn

 <Location /erx>
  DAV svn
  SVNPath "/usr/local/svn/repos"
  Require valid-user
  AuthzSVNAccessFile "/usr/local/svn/conf/svnaccess.conf"
  AuthName "SVN Repository"
  AuthBasicProvider ldap
  AuthType Basic
  AuthzLDAPAuthoritative off
  AuthLDAPURL "ldap://ldapserver:389/searchstring" NONE
  AuthLDAPBindDN "bind"
  AuthLDAPBindPassword password
 </Location>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-03T21:29:06.080

OpenLDAP 使用空白分隔的服务器列表。假设 mod_ldap 正在使用 OpenLDAP，这可能有效：

```
ldap://primary.server backup.server:389/searchstring 
```

如果这不起作用，请尝试包含两个空格分隔的 URL：

```
ldap://primary.server:389/searchstring ldap://backup.server:389/searchstring 
```

编辑：[mod_authnz_ldap](http://httpd.apache.org/docs/2.2/mod/mod_authnz_ldap.html#authldapurl)似乎正式支持这一点。

# firebug - 在 Firebug 中增加字体大小？

> ID：260008
> 
> 赞同：54
> 
> 时间：2008-11-03T21:22:21.883
> 
> 标签：firebug, font-size

有没有办法增加Firefox 扩展 Firebug 中**的字体大小？**

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2008-11-03T21:33:06.243

1.  右键单击状态栏中的错误图标。
2.  选择“在新窗口中打开 Firebug”
3.  选择“查看”>“文本大小”>“增加文本大小”

如果您恢复到在同一窗口中打开 Firebug，这些更改应该会保留。

**更新**

在新版本中，您只需单击代码导航器中的错误图标并选择“文本大小”。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2008-11-03T22:04:15.497

无需在自己的窗口中打开 Firebug，您只需单击 Firebug 窗格左上角的错误图标，就会出现“文本大小”选项。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-31T12:57:51.157

您可以按如下方式在 Firefox 扩展 Firebug 中增加字体大小。

1.  按 F12 打开萤火虫。
2.  单击 Firebug 的错误图标（Firebug 窗口平面左侧的错误图像。）
3.  单击错误图标时，将打开一个菜单栏。在菜单栏中，将找到“文本大小”选项。
4.  从那里选择所需的文本大小。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-02-04T21:21:17.937

在 Firebug 1.9.1 中，您只需单击代码导航器中的错误图标，然后选择“文本大小”。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-10-22T02:42:09.073

适用于我的 mac

⌘ + Alt + 鼠标滚轮

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-27T02:27:02.753

![增加 Firebug 的文本大小](https://i.stack.imgur.com/84Xbk.png)

1.  F12 打开 FireBug
2.  点击错误图标
3.  文字大小--->增加文字大小（**Ctrl** + **+**）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-02-10T18:28:46.810

只需在 FireBug 窗口内单击并使用 [Control][+] 或 [Control][-] 组合键。

使用这些热键可以更轻松地工作，因为可以根据需要使用它们。

你可能会说“这不是字体大小......”但效果是完全一样的，只是在运行中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-31T14:41:18.170

另一种方式：您可以编辑`extensions.firebug.textSize`in的值`about:config`。将值设置为`0`将字体大小重置为默认值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-06-29T12:35:34.220

Ctrl,Shift,+ 和 Ctrl,Shift,- 放大和缩小萤火虫。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-01T08:01:46.293

```
1.open firebug
2.on the right side there are three icons select open firebug in new window(option)
3.click left side firebug option on new window
4.mouse over to text size you find
  a.increase text size ctrl++
  b.decrease text size ctrl+-
  c.normal text size   ctrl+0
5.lastly right side there are three icons select open firebug in new window(option) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-08-01T08:10:56.333

试试 Ctrl + 和 Ctrl - 它也很有用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-11-14T10:14:10.583

你需要专注于萤火虫。

- 按**Ctrl**加**-**键**减少**。

- 按**Ctrl**加**Shift**加**+**键**增加**。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-02-10T11:39:23.700

尝试 Ctrl + 和 Ctrl - 不会总是有效。

最佳选项如下： 按 F12 打开 firebug。单击 Firebug 的错误图标（Firebug 窗口平面左侧的错误图像。）单击错误图标后，将打开一个菜单栏。在菜单栏中，将找到“文本大小”选项。从那里选择所需的文本大小。

# sql - 是否可以从 SQL 查询中获取匹配的字符串？

> ID：260010
> 
> 赞同：2
> 
> 时间：2008-11-03T21:22:59.103
> 
> 标签：sql

如果我有一个查询要返回数据库中在可搜索列（即`SELECT * FROM table WHERE column LIKE %news%`）中具有“新闻”的所有匹配条目，并且一个特定的行有一个以“最近的世界新闻，索马里被...入侵”开头的条目，我可以返回 SQL 条目的特定“块”吗？有点像预告片，如果你愿意的话。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-03T21:28:56.533

```
select substring(column,
                 CHARINDEX ('news',lower(column))-10,
                 20)
FROM table 
WHERE column LIKE %news% 
```

基本上是在“新闻”一词之前的 10 个字符开始的列的子串，并持续 20 个字符。

编辑：您需要确保“新闻”不在前 10 个字符中，并相应地调整开始位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-03T21:27:44.307

您可以在 SELECT 部分中使用子字符串函数。就像是：

```
SELECT SUBSTRING(column, 1,20) FROM table WHERE column LIKE %news% 
```

这将从列中返回前 20 个*字符*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-03T21:29:56.780

我遇到了同样的问题，我最终将整个字段加载到 C# 中，然后重新搜索文本以查找搜索字符串，然后在任一侧选择 x 个字符。

这适用于 LIKE，但不适用于使用 FORMS OF INFLECTION 的全文查询，因为当您搜索“woman”时，它可能匹配“women”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-03T21:28:12.103

如果您使用 MSSQL，您可以在查询中执行各种类似于 VB 的子字符串函数。

# c# - 帮助 winform treeview isSelected 怪异

> ID：260032
> 
> 赞同：2
> 
> 时间：2008-11-03T21:30:16.797
> 
> 标签：c#, winforms, treeview

在 NodeMouseClick 事件中，我试图从 Node.Tag 加载一些对象。在我这样做之前，我检查了 e.Node.IsSelected。定期运行时，IsSelected 为假....如果我在那里设置一个断点并检查 e.node.Isselected，则值会在我身上发生变化并变为真。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-03T21:49:04.810

在选择实际更改之前引发 NodeMouseClick 事件。（当您两次单击同一节点时，第二次 e.Node.IsSelected 肯定会为真。）

您可以尝试处理 AfterSelect 事件，尽管在使用键盘导航树视图时也会引发该事件，这甚至可能更适合您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-03T21:52:49.620

我试图重现您的问题，但不能。当我第一次单击节点时，无论我是否设置断点，此值始终为 false。如果我第二次单击一个节点，则该值为 true。

如果默认选择节点，则该值将为 true，否则在第一次单击时将始终返回 false。

# c++ - 如何使组框文本背景透明

> ID：260040
> 
> 赞同：2
> 
> 时间：2008-11-03T21:33:27.023
> 
> 标签：c++, visual-studio-2005, mfc

我想做一个透明的对话框。我在 CDialog 派生类中捕获 OnCtlColor 消息...这是代码：

```
HBRUSH CMyDialog::OnCtlColor(CDC* pDC, CWnd* pWnd, UINT nCtlColor) 
{
   HBRUSH hbr = CDialog::OnCtlColor(pDC, pWnd, nCtlColor);
   if(bSetBkTransparent_)
   {
      pDC->SetBkMode(TRANSPARENT);
      hbr = (HBRUSH)GetStockObject(NULL_BRUSH);        
   }

   return hbr;
} 
```

它适用于除组框（CStatic）之外的所有控件。所有标签 (CStatic) 都涂有透明文本背景，但组框的文本不透明。

我已经用谷歌搜索了这个，但我没有找到解决方案。有人知道如何制作一个真正透明的组合框吗？

顺便说一句，我在 Windows XP 中工作。而且我不想完全绘制控件以避免在应用程序迁移到另一个操作系统时更改代码。

谢谢，

哈维尔

注意：我最终更改了对话框，因此我不需要使其透明。无论如何，我添加此信息是因为也许有人仍在尝试这样做。组框不是 CStatic 而是 CButton（我知道这不是新的）。我将 Windows XP 主题更改为 Windows 经典，然后 groupbox 背景是透明的。坏消息是，在这种情况下，框架线在文本下方可见......所以如果有人遵循这种方法，我认为也许他/她会更好地遵循 Adzm 的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-06T18:43:17.397

你有两个选择。

您不能使用 Common Controls v6（XP-Styled 控件），这将使您的应用程序失去新 Windows 版本的花哨。但是 IIRC 组框将尊重 CTLCOLOR 问题。如果您仍然不使用它，并且仍然不尊重您的颜色，那么您只有一个选择...

也就是自己画。我知道你说过你不想这样做，但有时你不得不这样做。幸运的是，组框是一个非常简单的绘制控件。此页面有一个绘制经典样式分组框的示例：http: [//www.codeguru.com/cpp/controls/controls/groupbox/article.php/c2273/](http://www.codeguru.com/cpp/controls/controls/groupbox/article.php/c2273/) 您也可以使用 UxTheme 库非常简单地绘制它附带 XP+。

如果应用程序将被迁移到另一个操作系统，通常您将有很多事情需要处理通过 MFC 应用程序进行的迁移。如果这是您的目标，那么您应该真正考虑使用跨平台 UI 工具包进行开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:09:28.377

只需为组框设置 WS_EX_TRANSPARENT 扩展窗口样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-07T07:17:36.310

我知道这是一个有 12 年历史的问题，但让我感到沮丧的是，到目前为止没有人正确回答它。

您所要做的就是处理[WM_CTLCOLORSTATIC](https://docs.microsoft.com/en-us/windows/win32/controls/wm-ctlcolorstatic)：

```
case WM_CTLCOLORSTATIC: 
{
    HDC hDC = (HDC)wParam;
    SetTextColor(hDC, RGB(255, 255, 255));
    SetBkMode(hDC, TRANSPARENT);
    return (INT_PTR)GetStockObject(HOLLOW_BRUSH);
}
break; 
```

# apache - Apache .htaccess mod_rewrite 和清理 url

> ID：260041
> 
> 赞同：0
> 
> 时间：2008-11-03T21:34:11.530
> 
> 标签：apache, .htaccess, clean-urls

行。所以我正在构建这个可以通过两个不同域访问的站点。所以我不能在我的 .htaccess 中使用 RewriteBase。我用来解决这个问题的规则（如下）似乎工作正常。但是，当我在具有干净 URL（WAMP）的本地机器上使用以下 .htaccess 设置时，它一切正常，但是当我在实时服务器（共享托管 LAMP）上使用它时，我导航到的每个页面都显示主页（我猜是索引下的一个），即使浏览器中的 URL 显然正在更新。

```
<IfModule mod_rewrite.c>
  RewriteEngine On

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} ^/domain1.com/(.*)$
  RewriteRule ^(.*)$ /domain1.com/index.php?q=$1 [L,QSA]

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} ^/domain2.com/(.*)$
  RewriteRule ^(.*)$ /domain2.com/index.php?q=$1 [L,QSA]
</IfModule> 
```

非常感谢任何帮助或想法。

*   卢克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-03T22:27:26.680

最好的办法可能是在本地机器上重现问题并打开 RewriteLogLevel 以便您可以看到发生了什么。（因为您通常无法更改共享主机上的日志级别）

您可以通过在 Apache 主配置中进行目录重写来“模拟”问题。（共享主机显然在到达 .htaccess 之前会进行自己的重写！）如果无法重现问题，则可能必须在远程服务器上开始试错调试。这很难看，但如果这是你唯一的选择：

在替换中使用 R（重定向）标志将任何重写的 URL 发送回您的浏览器。使用 TELNET（或适当的浏览器插件）检查 HTTP 响应。

不要忘记在正则表达式中转义点！

附带说明一下，RewriteRule 模式在其上方的 RewriteConds 之前匹配。这种设置可能对性能更好：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/domain1\.com/(.*)$ /domain1.com/index.php?q=$1 [L,QSA]
#                     ^ should be escaped 
```

请注意，我没有对此进行测试。

# javascript - 如何使用 JavaScript 检测我是否在缓存页面上

> ID：260043
> 
> 赞同：23
> 
> 时间：2008-11-03T21:34:50.453
> 
> 标签：javascript

我想从缓存中显示很长时间，并且我希望页面渲染与从缓存加载页面的行为略有不同。有没有一种简单的方法可以用 JavaScript 确定这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-11-05T13:26:29.393

我从上面给出的“丹尼尔”的答案开始，但我担心通过慢速连接我可能会遇到一些延迟问题。

这是最终对我有用的解决方案。在服务器端，我添加了一个 cookie refCount 并将其值设置为 0。在 javascript 中加载文档时，我首先检查 refCount，然后将其递增。当检查 refCount 是否大于 1 时，我知道该页面已被缓存。所以这就像一个魅力。

感谢大家引导我找到这个解决方案。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-11-03T21:44:38.547

一种方法是在页面中包含页面的生成时间，然后使用一些 javascript 将本地时间与生成页面的时间进行比较。如果时间相差一个阈值，则该页面来自缓存。这样做的问题是，如果客户端机器的时间设置不正确，尽管您可以通过让客户端在生成页面的请求中包含其当前系统时间然后将该值发送回客户端来解决这个问题。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-08-13T07:44:00.297

使用新的 Resource Timing Level 2 规范，您可以使用传输大小属性来检查页面是否从缓存加载：

```
var isCached = performance.getEntriesByType("navigation")[0].transferSize === 0; 
```

*   规格：[https ://www.w3.org/TR/resource-timing-2/#dom-performanceresourcetiming-transfersize](https://www.w3.org/TR/resource-timing-2/#dom-performanceresourcetiming-transfersize)
*   浏览器支持：[https ://developer.mozilla.org/en-US/docs/Web/API/PerformanceNavigationTiming#Browser_compatibility](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceNavigationTiming#Browser_compatibility)
    *   请注意，在撰写本文时，它显示 Safari 不支持，而实际上最新版本支持。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-15T02:20:45.317

虽然这个问题已经有 4 年历史了。我想我会使用 jQuery 和[History](https://github.com/balupton/history.js)插件添加我的 2 美分。

```
$(document).ready(function()
{
    $('body').append('<div class="is_cached"></div>');
});

History.Adapter.bind(window,'statechange',function(){
   if($('.is_cached').length >= 1)
   {
      alert('this page is cached');
   }
}); 
```

首次加载文档时。附加了一个新的 div.is_cached。加载缓存页面时没有兼容的方式来执行 javascript，但您可以监视历史更改。当历史记录发生变化并且 div.is_cached 存在时，用户正在查看缓存的分页。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-03T21:52:37.673

使用 XmlHttpRequest 您可以拉出当前页面，然后检查响应的 http 标头。

最好的情况是只做一个 HEAD 请求，然后检查标题。

有关这样做的一些示例，请查看[http://www.jibbering.com/2002/4/httprequest.html](http://www.jibbering.com/2002/4/httprequest.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-03T21:51:48.267

不是直接的，一些浏览器可能有一些自定义命令。

有一种解决方法可以满足您的需求。使用 cookie 存储`timestamp`第一次访问，然后使用 META HTTP-EQUIV 设置文件缓存的时间长度（`cacheLength`）。`timestamp`如果当前时间在从到的时间段内，`timestamp+cacheLength`则将它们视为从缓存中加载。缓存过期后，重置 cookie 时间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-22T04:36:18.037

1.  在创建时将唯一数据添加到服务器上的页面。例如一个随机数，或者创建时间：

```
 window.rand = {{ rand() }} 
```

2.  使用本地存储将 url 与数字一起保存，并在需要时进行比较：

```
 reloadIfCached() {
            var cached = localStorage.getItem(window.location.href) == window.rand;
            if (cached) {
                window.location.reload();
            }
            localStorage.setItem(window.location.href, window.rand);
       } 
```

# sharepoint - SharePoint：我可以在 ItemAdding() 事件处理程序中查看文档的内容吗？

> ID：260048
> 
> 赞同：1
> 
> 时间：2008-11-03T21:35:32.433
> 
> 标签：sharepoint

我想在文件上传到 SharePoint 文档库之前检查文件的内容。
我为事件连接了一个处理程序，`ItemAdding()`但不知道如何获取文件的内容。
注意：我知道在`ItemAdded()`我可以使用`properties.ListItem.File`但为时已晚。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-03T21:53:01.477

是的，此时该文件尚未创建。

尝试使用 properties.AfterProperties 或 properties.BeforeProperties。

编辑：只有*在*添加文件后才会创建列表属性。一旦创建项目，但在 ItemAdded 事件之前，SharePoint 会将列表元数据的默认值添加到文件（仅限 Office 2007）。臭虫。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-04T07:04:35.653

不，你不能。
在添加项目期间，您可以访问 Nat 所说的文档/项目属性，但您无权访问文件内容。

# image-processing - 足迹识别的最佳语言是什么？

> ID：260051
> 
> 赞同：5
> 
> 时间：2008-11-03T21:36:31.497
> 
> 标签：image-processing, computer-vision, image-manipulation

我有一个项目来识别动物的足迹。它类似于面部识别。
需要将足迹图像存储在数据库中，并将它们与相机捕获的图像进行比较。

什么是合适的编程语言来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-03T22:03:17.183

任何语言都可以用于图像处理、模式识别和对象检测，这就是您在这里尝试做的事情。但是您最好找到一个库甚至一个应用程序，然后根据该选择选择语言。

如果您熟悉 Matlab，它就很好，除非您计划提供一个可供其他人用来添加或注释数据的工作系统。在这种情况下，您将需要一些更容易在您自己的工作站之外部署的东西。

[OpenCV](http://sourceforge.net/projects/opencvlibrary/)可能是一个很好的起点，[这里有一个 OpenCV 教程。](http://www.cs.iit.edu/~agam/cs512/lect-notes/opencv-intro/opencv-intro.html#SECTION00021000000000000000)

由于这是一个类似的问题，您可能需要查看[人脸识别主页](http://www.face-rec.org/)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-03T21:42:18.193

我认为问题在于您如何表示数据并确定相似度/相同性/距离测量，而不是实现语言。

Lisp 是一个强有力的候选者，C/C++ 也是如此——但实际上，使用你/你的团队最了解的任何语言可能会更好。

再次，首先弄清楚数据表示。

另外 - 找到另一种成像/匹配解决方案。已经有用于车牌、指纹等的——也许只是使用那个来源。问题基本解决了……

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-03T21:50:20.157

如果您需要快速运行某些东西，我建议您使用[Matlab](http://www.mathworks.com/)或一些类似的数学包。有很多内置算法可用于图像处理和快速原型制作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-04T19:15:12.543

您最大的问题是开发算法，而不是选择语言。如果您可以访问它，我的建议是在 Matlab 中为您的项目制作原型。您正在尝试做的是一个活跃的研究领域，许多研究人员更喜欢 Matlab 并发布他们的 Matlab 代码。这意味着您可能能够在网络上找到至少可以完成一些您需要的工作的 Matlab 代码，例如图像分割。

我建议不要使用 C++，除非你真的让你的算法工作，并且速度变得很重要。Matlab 将允许您快速尝试想法，并避免将大部分时间花在实现细节上。一旦您将算法开发到您对结果感到满意的程度，您就可以考虑将它作为一个可用的系统以“真正的”编程语言来实现。

# python - 使用正则表达式进行哈希表/字典/地图查找

> ID：260056
> 
> 赞同：21
> 
> 时间：2008-11-03T21:39:38.883
> 
> 标签：python, regex, dictionary, hash

我试图弄清楚是否有一种相当有效的方法来在字典（或哈希、映射或任何你喜欢的语言调用它）中执行查找，其中键是正则表达式，字符串是针对组键。例如（在 Python 语法中）：

```
>>> regex_dict = { re.compile(r'foo.') : 12, re.compile(r'^FileN.*$') : 35 }
>>> regex_dict['food']
12
>>> regex_dict['foot in my mouth']
12
>>> regex_dict['FileNotFoundException: file.x does not exist']
35 
```

（很明显，上面的例子不能像用 Python 写的那样工作，但这是我想做的事情。）

我可以想到一种天真的方法来实现这一点，其中我遍历字典中的所有键并尝试将传入的字符串与它们匹配，但随后我失去了哈希映射的 O(1) 查找时间和取而代之的是 O(n)，其中 n 是我的字典中的键数。这可能是一件大事，因为我预计这本字典会变得非常大，我需要一遍又一遍地搜索它（实际上我需要为我在文本文件中读取的每一行迭代它，并且文件的大小可以是数百兆字节）。

有没有办法做到这一点，而不诉诸 O(n) 效率？

或者，如果您知道一种在数据库中完成此类查找的方法，那也很棒。

（任何编程语言都可以——我使用的是 Python，但我对这里的数据结构和算法更感兴趣。）

有人指出，不止一场比赛是可能的，这是绝对正确的。理想情况下，在这种情况下，我想返回一个包含所有匹配项的列表或元组。不过，我会满足于第一场比赛。

在那种情况下，我看不到 O(1) 是可能的；不过，我会满足于小于 O(n) 的任何东西。此外，底层数据结构可以是任何东西，但我想要的基本行为是我上面写的：查找一个字符串，并返回与正则表达式键匹配的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-03T21:44:41.197

这对于任何语言的常规哈希表都是不可能的。您要么必须遍历整个键集，尝试将键与正则表达式匹配，要么使用不同的数据结构。

您应该选择适合您要解决的问题的数据结构。如果您必须匹配任意正则表达式，我不知道有什么好的解决方案。如果您将要使用的正则表达式类更具限制性，您可以使用诸如[trie](http://en.wikipedia.org/wiki/Trie)或[suffix tree](http://en.wikipedia.org/wiki/Suffix_tree)之类的数据结构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-03T21:53:03.880

在一般情况下，您需要的是词法分析器生成器。它需要一堆正则表达式并将它们编译成识别器。如果您使用 C，“lex”将起作用。我从未在 Python 中使用过词法分析器生成器，但似乎有一些可供选择。谷歌展示了[PLY](http://www.dabeaz.com/ply/)、[PyGgy](http://www.lava.net/~newsham/pyggy/)和[PyLexer](http://margolis-yateley.org.uk/python/various/index.php)。

如果正则表达式在某些方面都彼此相似，那么您可以采取一些捷径。我们需要更多地了解您试图解决的最终问题，以便提出任何建议。你能分享一些示例正则表达式和一些示例数据吗？

另外，您在这里处理多少个正则表达式？你确定天真的方法*行不通*吗？正如 Rob Pike[曾经说过](http://www.lysator.liu.se/c/pikestyle.html)的那样，“当 n 很小时，花哨的算法很慢，而 n 通常也很小。” 除非你有成千上万的正则表达式，以及数以千计的东西要匹配它们，而且这是一个用户在等待你的交互式应用程序，否则你最好还是用简单的方法来循环使用正则表达式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-04T06:30:01.667

只要您使用“真正的”正则表达式，这绝对是可能的。教科书正则表达式是可以被[确定性有限状态机](http://en.wikipedia.org/wiki/Deterministic_finite_state_machine)识别的东西，这主要意味着你不能在那里有反向引用。

正则语言的一个属性是“两种正则语言的联合是正则的”，这意味着您可以使用单个状态机一次识别任意数量的正则表达式。相对于表达式的数量，状态机在 O(1) 时间内运行（相对于输入字符串的长度，它在 O(n) 时间内运行，但哈希表也是如此）。

一旦状态机完成，您将知道哪些表达式匹配，并且从那里很容易在 O(1) 时间内查找值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-05T20:52:08.743

您要做的与 xrdb 支持的非常相似。然而，它们只支持相当少的通配概念。

在内部，您可以通过将正则表达式存储为字符树来实现比他们更大的正则语言系列。

*   单个字符只是成为特里节点。
*   .' 成为覆盖当前 trie 节点的所有子节点的通配符插入。
*   * 成为前一个项目开头的节点的尝试中的反向链接。
*   [az] 范围在范围内的每个字符下重复插入相同的后续子节点。小心，虽然插入/更新可能有点昂贵，但搜索可以是字符串大小的线性。使用一些占位符的东西，可以控制常见的组合爆炸案例。
*   (foo)|(bar) 节点变为多次插入

这不处理出现在字符串中任意点的正则表达式，但可以通过在任一侧用 .* 包装正则表达式来建模。

Perl 有几个类似 Text::Trie 的模块，您可以从中寻找灵感。（哎呀，我想我什至在很久以前就写过其中一个）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-03T21:46:56.810

如果你有一本字典，比如

```
regex_dict = { re.compile("foo.*"): 5, re.compile("f.*"): 6 } 
```

在这种情况下`regex_dict["food"]`，可以合法地返回 5 或 6。

即使忽略这个问题，使用 regex 模块也可能无法有效地做到这一点。相反，您需要的是内部有向图或树结构。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-03T01:18:14.650

以下情况如何：

```
class redict(dict):
def __init__(self, d):
    dict.__init__(self, d)

def __getitem__(self, regex):
    r = re.compile(regex)
    mkeys = filter(r.match, self.keys())
    for i in mkeys:
        yield dict.__getitem__(self, i) 
```

它基本上是 Python 中 dict 类型的子类。有了这个，你可以提供一个正则表达式作为键，并且所有匹配这个正则表达式的键的值都使用 yield 以可迭代的方式返回。

有了这个，您可以执行以下操作：

```
>>> keys = ["a", "b", "c", "ab", "ce", "de"]
>>> vals = range(0,len(keys))
>>> red = redict(zip(keys, vals))
>>> for i in red[r"^.e$"]:
...     print i
... 
5
4
>>> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-06-01T18:20:58.337

这是一种通过将键组合成单个编译的正则表达式的有效方法，因此不需要对键模式进行任何循环。它滥用`lastindex`找出匹配的密钥。（遗憾的是，正则表达式库不允许您标记正则表达式编译到的 DFA 的终端状态，否则这将不是一个黑客攻击。）

该表达式编译一次，将生成一个无需顺序搜索的快速匹配器。与其他一些建议的解决方案不同，公共前缀在 DFA 中一起编译，因此键中的每个字符匹配一次，而不是多次。您正在为您的键空间有效地编译一个迷你词法分析器。

如果不重新编译正则表达式，此映射不可扩展（无法定义新键），但在某些情况下它可能很方便。

```
# Regular expression map
# Abuses match.lastindex to figure out which key was matched
# (i.e. to emulate extracting the terminal state of the DFA of the regexp engine)
# Mostly for amusement.
# Richard Brooksby, Ravenbrook Limited, 2013-06-01

import re

class ReMap(object):

    def __init__(self, items):
        if not items:
            items = [(r'epsilon^', None)] # Match nothing
        key_patterns = []
        self.lookup = {}
        index = 1
        for key, value in items:
            # Ensure there are no capturing parens in the key, because
            # that would mess up match.lastindex
            key_patterns.append('(' + re.sub(r'\((?!\?:)', '(?:', key) + ')')
            self.lookup[index] = value
            index += 1
        self.keys_re = re.compile('|'.join(key_patterns))

    def __getitem__(self, key):
        m = self.keys_re.match(key)
        if m:
            return self.lookup[m.lastindex]
        raise KeyError(key)

if __name__ == '__main__':
    remap = ReMap([(r'foo.', 12), (r'FileN.*', 35)])
    print remap['food']
    print remap['foot in my mouth']
    print remap['FileNotFoundException: file.x does not exist'] 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-11-04T04:31:23.857

有一个 Perl 模块可以做这个[Tie::Hash::Regex](http://search.cpan.org/~davecross/Tie-Hash-Regex-1.02/lib/Tie/Hash/Regex.pm)。

```
use Tie::Hash::Regex;
my %h;

tie %h, 'Tie::Hash::Regex';

$h{key}   = 'value';
$h{key2}  = 'another value';
$h{stuff} = 'something else';

print $h{key};  # prints 'value'
print $h{2};    # prints 'another value'
print $h{'^s'}; # prints 'something else'

print tied(%h)->FETCH(k); # prints 'value' and 'another value'

delete $h{k};   # deletes $h{key} and $h{key2}; 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-06-01T23:32:46.203

@rptb1 您不必避免捕获组，因为您可以使用 re.groups 来计算它们。像这样：

```
# Regular expression map
# Abuses match.lastindex to figure out which key was matched
# (i.e. to emulate extracting the terminal state of the DFA of the regexp engine)
# Mostly for amusement.
# Richard Brooksby, Ravenbrook Limited, 2013-06-01

import re

class ReMap(object):
    def __init__(self, items):
        if not items:
            items = [(r'epsilon^', None)] # Match nothing
        self.re = re.compile('|'.join('('+k+')' for (k,v) in items))
        self.lookup = {}
        index = 1
        for key, value in items:
            self.lookup[index] = value
            index += re.compile(key).groups + 1

    def __getitem__(self, key):
        m = self.re.match(key)
        if m:
            return self.lookup[m.lastindex]
        raise KeyError(key)

def test():
    remap = ReMap([(r'foo.', 12),
                   (r'.*([0-9]+)', 99),
                   (r'FileN.*', 35),
                   ])
    print remap['food']
    print remap['foot in my mouth']
    print remap['FileNotFoundException: file.x does not exist']
    print remap['there were 99 trombones']
    print remap['food costs $18']
    print remap['bar']

if __name__ == '__main__':
    test() 
```

遗憾的是，很少有 RE 引擎实际上将正则表达式编译为机器代码，尽管这并不是特别难做。我怀疑有一个数量级的性能改进等待某人制作一个非常好的 RE JIT 库。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-11-03T21:54:01.337

正如其他受访者指出的那样，不可能在恒定时间内使用哈希表来做到这一点。

一种可能有帮助的近似方法是使用一种称为[“n-gram”](http://en.wikipedia.org/wiki/Ngram#n-grams_for_approximate_matching)的技术。创建从单词的 n 个字符块到整个单词的倒排索引。当给定一个模式时，将其拆分为 n 个字符的块，并使用索引来计算匹配单词的评分列表。

即使您不能接受近似值，在大多数情况下，这仍然会提供准确的过滤机制，因此您不必将正则表达式应用于每个键。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-11-04T05:02:57.570

这个问题的一个特例出现在 70 年代以演绎数据库为导向的 AI 语言中。这些数据库中的键可能是带有变量的模式——比如没有 * 或 | 的正则表达式。运营商。他们倾向于对索引使用花哨的 trie 结构扩展。[请参阅 Norvig 的人工智能编程范式中的](http://norvig.com/paip/)krep*.lisp 以了解总体思路。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-11-04T12:39:42.000

如果您有一小部分可能的输入，则可以缓存匹配项，因为它们出现在第二个字典中，并为缓存的值获取 O(1)。

如果可能的输入集太大而无法缓存但不是无限的，您可以将最后 N 个匹配项保留在缓存中（查看 Google 的“LRU 地图” - 最近最少使用）。

如果你不能这样做，你可以尝试通过检查前缀或类似的东西来减少你必须尝试的正则表达式的数量。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-11-06T05:55:42.780

我曾经为一个项目创建过这个精确的数据结构。正如你所建议的，我天真地实现了它。我确实做了两个非常有用的优化，这对你来说可能可行，也可能不可行，具体取决于你的数据大小：

*   记忆哈希查找
*   预先播种 memoization 表（不知道怎么称呼这个......预热缓存？）

为了避免多个键匹配输入的问题，我给每个正则表达式键一个优先级，并使用最高优先级。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-11-03T21:44:21.870

我认为，基本假设是有缺陷的。您不能将哈希映射到正则表达式。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-11-03T21:44:49.247

我什至认为这在理论上是不可能的。如果有人传入一个匹配超过 1 个正则表达式的字符串会发生什么。

例如，如果有人这样做会发生什么：

```
>>> regex_dict['FileNfoo'] 
```

这样的事情怎么可能是 O(1)？

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-11-04T00:13:40.163

通过将搜索表达式连接成一个大的正则表达式，由“|”分隔，可以让正则表达式编译器为您完成大部分工作*。*在这种情况下，一个聪明的正则表达式编译器可能会搜索备选方案中的共性，并设计一种比简单地依次检查每个选项更有效的搜索策略。但我不知道是否有编译器可以做到这一点。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-11-04T01:57:30.657

这真的取决于这些正则表达式的样子。如果您没有很多正则表达式几乎可以匹配“ `.*`”或“ `\d+`”之类的任何内容，而是您的正则表达式主要*包含*单词和短语或任何长度超过 4 个字符的固定模式（例如 ' `a*b*c`' in `^\d+a\*b\*c:\s+\w+`），如您的例子。您可以使用这个可以很好地扩展到数百万个正则表达式的常用技巧：

为正则表达式构建倒排索引（rabin-karp-hash('fixed pattern') -> 包含'fixed pattern'的正则表达式列表）。然后在匹配时，使用 Rabin-Karp 散列计算滑动散列并查找倒排索引，一次推进一个字符。您现在有 O(1) 查找倒排索引不匹配和一个合理的 O(k) 匹配时间，k 是倒排索引中正则表达式列表的平均长度。对于许多应用程序，k 可能非常小（小于 10）。倒排索引的质量（误报意味着更大的 k，误报意味着错过匹配）取决于索引器对正则表达式语法的理解程度。如果正则表达式是由人类专家生成的，它们也可以为包含的固定模式提供提示。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2011-04-29T17:50:33.013

好的，我有一个非常相似的需求，我有很多不同语法的行，基本上是用一些代码来注释行和行，以便在智能卡格式的过程中使用，还有密钥和密码的描述符行，在在每种情况下，我认为“模型”模式/动作是识别和处理大量线条的野兽方法。
我正在使用`C++/CLI`for 开发名为 的程序集`LanguageProcessor.dll`，该库的核心是一个 lex_rule 类，它基本上包含：

*   正则表达式成员
*   活动成员

构造函数加载正则表达式字符串并调用必要的代码来动态构建事件`DynamicMethod`，`Emit`并且`Reflexion`......在程序集中还存在其他类，如构建 ans 的元和对象，并通过发布者的简单名称和接收器类，接收器类为每个匹配的规则提供动作处理程序。

晚了，我有一个名为的类`fasterlex_engine`，它构建了一个字典，该字典`<Regex, action_delegate>` 从数组中加载定义以供运行。

该项目处于高级阶段，但我今天仍在建设中。我将尝试通过使用一些直接使用正则表达式查找字典的机制来提高围绕对每一对 foreach 行输入的顺序访问的运行性能，例如：

```
map_rule[gcnew Regex("[a-zA-Z]")]; 
```

在这里，我的代码的一些片段：

```
public ref class lex_rule: ILexRule
{
private:
    Exception           ^m_exception;
    Regex               ^m_pattern;

    //BACKSTORAGE delegates, esto me lo aprendi asiendo la huella.net de m*e*da JEJE
    yy_lexical_action   ^m_yy_lexical_action; 
    yy_user_action      ^m_yy_user_action;

public: 
    virtual property    String ^short_id; 
private:
    void init(String ^_short_id, String ^well_formed_regex);
public:

    lex_rule();
    lex_rule(String ^_short_id,String ^well_formed_regex);
    virtual event    yy_lexical_action ^YY_RULE_MATCHED
    {
        virtual void add(yy_lexical_action ^_delegateHandle)
        {
            if(nullptr==m_yy_lexical_action)
                m_yy_lexical_action=_delegateHandle;
        }
        virtual void remove(yy_lexical_action ^)
        {
            m_yy_lexical_action=nullptr;
        }

        virtual long raise(String ^id_rule, String ^input_string, String ^match_string, int index) 
        {
            long lReturn=-1L;
            if(m_yy_lexical_action)
                lReturn=m_yy_lexical_action(id_rule,input_string, match_string, index);
            return lReturn;
        }
    }
}; 
```

现在执行大量模式/动作对的 fasterlex_engine 类：

```
public ref class fasterlex_engine 
{
private: 
    Dictionary<String^,ILexRule^> ^m_map_rules;
public:
    fasterlex_engine();
    fasterlex_engine(array<String ^,2>^defs);
    Dictionary<String ^,Exception ^> ^load_definitions(array<String ^,2> ^defs);
    void run();
}; 
```

并且为了装饰这个主题..我的 cpp 文件的一些代码：

此代码通过参数符号创建构造函数调用程序

```
inline Exception ^object::builder(ConstructorInfo ^target, array<Type^> ^args)
{
try
{
    DynamicMethod ^dm=gcnew DynamicMethod(
        "dyna_method_by_totem_motorist",
        Object::typeid,
        args,
        target->DeclaringType);
    ILGenerator ^il=dm->GetILGenerator();
    il->Emit(OpCodes::Ldarg_0);
    il->Emit(OpCodes::Call,Object::typeid->GetConstructor(Type::EmptyTypes)); //invoca a constructor base
    il->Emit(OpCodes::Ldarg_0);
    il->Emit(OpCodes::Ldarg_1);
    il->Emit(OpCodes::Newobj, target); //NewObj crea el objeto e invoca al constructor definido en target
    il->Emit(OpCodes::Ret);
    method_handler=(method_invoker ^) dm->CreateDelegate(method_invoker::typeid);
}
catch (Exception ^e)
{
    return  e;
}
return nullptr; 
```

}

此代码附加任何处理程序函数（静态或非静态）以处理通过匹配输入字符串引发的回调

```
Delegate ^connection_point::hook(String ^receiver_namespace,String ^receiver_class_name, String ^handler_name)
{
Delegate ^d=nullptr;
if(connection_point::waitfor_hook<=m_state) // si es 0,1,2 o mas => intenta hookear
{ 
    try 
    {
        Type ^tmp=meta::_class(receiver_namespace+"."+receiver_class_name);
        m_handler=tmp->GetMethod(handler_name);
        m_receiver_object=Activator::CreateInstance(tmp,false); 

        d=m_handler->IsStatic?
            Delegate::CreateDelegate(m_tdelegate,m_handler):
            Delegate::CreateDelegate(m_tdelegate,m_receiver_object,m_handler);

        m_add_handler=m_connection_point->GetAddMethod();
        array<Object^> ^add_handler_args={d};
        m_add_handler->Invoke(m_publisher_object, add_handler_args);
        ++m_state;
        m_exception_flag=false;
    }
    catch(Exception ^e)
    {
        m_exception_flag=true;
        throw gcnew Exception(e->ToString()) ;
    }
}
return d;       
} 
```

最后是调用词法分析引擎的代码：

```
array<String ^,2> ^defs=gcnew array<String^,2>  {/*   shortID    pattern         namespc    clase           fun*/
                                                    {"LETRAS",  "[A-Za-z]+"     ,"prueba",  "manejador",    "procesa_directriz"},
                                                    {"INTS",    "[0-9]+"        ,"prueba",  "manejador",    "procesa_comentario"},
                                                    {"REM",     "--[^\\n]*"     ,"prueba",  "manejador",    "nullptr"}
                                                }; //[3,5]

//USO EL IDENTIFICADOR ESPECIAL "nullptr" para que el sistema asigne el proceso del evento a un default que realice nada
fasterlex_engine ^lex=gcnew fasterlex_engine();
Dictionary<String ^,Exception ^> ^map_error_list=lex->load_definitions(defs);
lex->run(); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2012-04-17T11:51:38.903

这个问题与正则表达式无关 - 你会遇到与作为 lambda 函数的键的字典相同的问题。因此，您面临的问题是确定是否有一种方法可以对您的函数进行分类以计算是否返回真值，这不是搜索问题，因为通常事先不知道 f(x)。

假设有共同的 x 值，分布式编程或缓存答案集可能会有所帮助。

-- DM

# html - 在单个存档中保存完整网页（图像等）的最佳“文件格式”是什么？

> ID：260058
> 
> 赞同：35
> 
> 时间：2008-11-03T21:40:35.217
> 
> 标签：html, standards, webpage, archive

我正在做一个项目，它将单个图像和文本文件存储在一个地方，就像一个时间胶囊。现在，几乎每个项目都可以保存为一个文件，如 DOC、PPT 和 ODF。但是完整的网页*不能*——它们被保存为单独的 HTML 文件和数据文件夹。**我想将网页保存在一个存档中，虽然有多种解决方案，但没有“标准”。HTML 档案的最佳格式是什么？**

*   微软有**[MHTML——](http://en.wikipedia.org/wiki/MHTML)**基本上是一个完全编码为 MIME HTML 电子邮件的文件。它已经基于现有的标准，并且作为自己的 MHTML 被提议为[rfc2557](https://www.rfc-editor.org/rfc/rfc2557)。这是一个好主意，它一直存在，除了它自 1999 年以来一直是“提议的标准”。另外，除了 IE 之外的实现也很麻烦。IE和Opera支持；带有繁琐扩展的 Firefox 和 Safari。

*   Mozilla 有**[Mozilla 存档格式](https://addons.mozilla.org/en-US/firefox/addon/212)**——基本上是一个带有标记和图像的 ZIP 文件，元数据保存为 RDF。这是一个很棒的想法——Winamp 为皮肤做这个，ODF 和 OOXML 为他们的嵌入图像做这个。我喜欢这个，除了 1\. 除了 Mozilla 没有其他人使用它， 2\. 自 Firefox 1.5 以来唯一支持它的扩展没有更新。

*   **[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)**正变得越来越流行。您无需像 MHTML 或 MAF 那样引用外部位置，而是将文件直接编码为 base64 的 HTML 标记。根据您的观点，它被简化了，因为文件*就*在标记所在的位置。然而，支撑仍然有些弱。Firefox、Opera 和 Safari 毫无瑕疵地支持它；*市场领导者*IE仅在 IE8 时才开始支持它，即使在那时也有限制。

*   当然，还有**“保存完整网页”**，其中 HTML 标记保存为`"savedpage.html"`，文件保存在单独的`"savedpage_files"`文件夹中。Afaik，每个人都这样做。它得到了很好的支持。*但是必须处理两个独立的*元素一点也不简单和精简。我的项目需要将它们放在一个*存档*中。

考虑到**浏览器支持**和**易于编辑页面**，**您认为将网页保存在单个存档中的最佳方式是什么？**什么是最好的“标准”？还是我应该只管处理 HTML 文件和单独的文件夹？为了我的项目，我*可以*支持它，但*我最好避免它。*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-11-03T21:54:44.843

我最喜欢的是 ZIP 格式。因为：

*   它非常适合这个目的
*   有据可查
*   有很多实现可用于创建或读取它们
*   用户可以轻松提取单个文件、更改它们并将它们放回存档中
*   几乎每个主要操作系统（Windows、Mac 和大多数 linux）都内置了 ZIP 程序

替代品都有一些缺陷：

*   使用 MHTMl，您无法轻松编辑。
*   使用数据 URI，我不知道实现会有多困难。（使用 ZIP，甚至我可以在 3 年前用 PHP 做到这一点......）
*   将内容存储为单独文件的选项有太多可能出错并弄乱您的存档的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-03T21:51:11.403

几乎所有平台上的几乎所有浏览器都支持 PDF，并将内容和图像存储在一个文件中。它们可以使用正确的工具进行编辑。这几乎绝对不是理想的，但它是一个可以考虑的选项。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-21T18:26:43.813

这不仅仅是文件格式的问题。另一个关键问题是**您到底想存储**什么？是吗：

1.  将整个页面与所有引用的资源（图像、CSS 和 javascript）保持原样存储？

2.  在某个时间点呈现页面时捕获页面；网页 DOM 的某些渲染状态的静态图像？

浏览器中大多数当前的“将页面另存为”功能，无论是 MAF 或 MHTML 还是文件+目录，都尝试第一种方式。这最终是有缺陷的方法。

不要忘记网页有时更像是本地应用程序，而不是您可以轻松存储的静态文档。潜在问题：

1.  一页实际上是由JS动态构建的几个页面，需要用户交互才能使其达到所需状态

2.  AJAX 应用程序可以与远程服务进行远程通信，使其无法用于离线查看。

3.  javascript 代码中的隐藏链接。这样的资源就不是存储页面的一部分。即使解析 JS 代码也可能不会发现它们。您需要运行代码。

4.  甚至可以重新计算基本 html 元素的位置，也可以由 JS 动态计算，并且在本地重新创建它并不总是可能/容易。

5.  您需要某种 JS 内存转储并加载它以使页面达到您希望存储的所需状态

还有更多的问题......

检查 Chrome [SingleFile](https://chrome.google.com/webstore/detail/singlefile/mpiodijhokgodhhofbcjdecpffjipkle)扩展。它将网页存储到一个 html 文件中，其中包含使用已经提到的数据 URI 内联的图像。我没有对它进行太多测试，所以我不能说它处理“易失性”ajax 页面的效果如何。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-03T22:09:19.540

使用 zip 文件。

您始终可以制作一个程序/脚本，将 zip 文件提取到临时目录并在浏览器中加载 index.html 文件。您甚至可以使用 index.ini/txt 文件来指定提取时应加载的文件。

基本上，您需要类似 Mozilla Archive 格式的东西，但没有不必要的 rdf 废话，只是为了指定要加载的文件。

MHT 文件很好，但它们通常使用 base64 来嵌入文件，这会使文件大小超出应有的大小（数据 URI 也是如此）。您可以将附件添加为二进制文件，但您必须使用十六进制编辑器手动执行此操作，或者创建一个工具，并且客户端对它的支持可能不太好。

当然，如果您想使用浏览器生成的内容，MHT（至少是 Opera 和 IE）可能会更好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-03T21:51:13.540

我认为没有任何借口可以使用 zipfile 以外的任何东西

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-03T21:54:58.307

好吧，如果浏览器支持和易于编辑是最大的担忧，我认为你会坚持使用文件+目录的方法，除非你愿意为单一文件格式提供编辑器并且在浏览器中没有很好的支持。

您可以通过压缩内容来创建单个文件。您还可以创建父目录以简化处理。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-10-21T00:39:44.480

问题是html是自下而上而不是自上而下。查看您保存在我的盒子上的文件名“在单个存档中保存完整网页（图像等）的最佳“文件格式”是什么？ - Stack Overflow.html”

只需添加一个'|' 并且一个人在将备份复制和粘贴到备用驱动器时遇到了麻烦。最后你结束了。砍文件名以保存它。数十个/也许数百个相同的 index.html 或 index.php 使我的驱动器杂乱无章。

部分解决方案是编写您自己的 CMS 并使用脚本将所有相关文件映射到平面文件数据库 - 然后使用 fileName、size、mtime 和 md5 为每个文件获取唯一的 Id。创建一个允许 100k 或 1000k 记录的平面文件索引。目标是一次编写，多次使用。因此，您需要一个真正的 CMS，您需要一个基于 files_archive 中内容的唯一 ID（例如 index8765432.html）。其他人也一样。然后，您可以从保存的原始 html 到 files_archive 的非破坏性符号链接，并在需要时使用 php 或替代脚本重新创建文件。不知道它是否会像我一样在您所处的位置起作用-也许一周后肯定会知道。更有用的方法是根据您的业务或个人需求和相关任务建立自上而下的结构。因此，您的文件可能自上而下组织，而外部文件自下而上以保留原始内容。我的兴趣在于 Web 3.0 服务，越接近机器对机器交互，就越需要结构化信息。也许是时候重新考虑将所有内容捆绑到一个文件中的想法了。所以你有数百个 main.css 为什么捆绑时自上而下的解决方案可能会让你修改一个文件而不是数百个文件。

# c# - 如何在 Silverlight 中创建弹出对话框？

> ID：260062
> 
> 赞同：16
> 
> 时间：2008-11-03T21:41:21.157
> 
> 标签：c#, .net, silverlight, silverlight-2.0

我想在 silverlight 中创建一个弹出对话框，我可以在其中操作控件、输入数据并返回一个值。我希望它是模态的，这样当它打开时，“下面”页面是不可访问的。我还没有找到一个简单的方法来做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-04T08:38:17.867

我知道这个问题要求使用 Silverlight 2 解决方案，但在 Silverlight 3（现在是测试版，2009 年 7 月的 RTW）中，有一个内置的 ChildWindow 可以做你正在寻找的一切。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-03T22:19:13.407

我也没有找到完美的解决方案。我见过的最接近的是： [Using Popup to create a Dialog class](http://blogs.msdn.com/devdave/archive/2008/06/08/using-popup-to-create-a-dialog-class.aspx)

如果可以是非模态的，您可以使用 HtmlPage.PopupWindow() 尝试此提示。 [如何弹出浏览器窗口](http://silverlight.net/blogs/msnow/archive/2008/09/30/silverlight-tip-of-the-day-52-how-to-popup-a-browser-window.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-11T01:24:58.830

我是 Sliverlight 框架的新手，刚刚开始弄清楚，但我对弹出模式对话框也有类似的需求。我刚刚尝试了一个看起来很有希望的想法：

1.  我创建了一个覆盖整个应用程序区域的矩形（名为“Shield”）。它存在于主应用程序中的所有内容之上。我将填充画笔设置为白色，将不透明度画笔设置为 81%，以便主应用程序内容显示出来，但轻微（如禁用）。然后确保“盾牌”是可命中测试的。现在，当“屏蔽”可见时，它实际上也会阻止对下面控件的所有输入（至少来自鼠标，还没有尝试过键盘）。当应用程序初始化时，将“Shield”可见性设置为 Collapsed。在这种状态下，它不会阻止对主应用程序的输入。
2.  然后在屏蔽顶部的 z 顺序中存在的另一个画布元素上构建对话框。通常对话框是不可见的，但是当我需要它时，我只需将“屏蔽”设置为可见，并将对话框设置为可见。由于对话框位于“Shield”之上，因此我得到了一种非常类似于模态的行为。关闭对话框后，使对话框画布和“屏蔽”画布再次不可见，并且主应用程序再次处于活动状态。

我确信这是最暴力的方式，并且我最终会在一个更优雅的结构上归零，但它现在有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-26T16:10:31.550

一个更优雅的解决方案在这里：http: [//community.devexpress.com/blogs/theonewith/archive/2008/08/06/custom-silverlight-controls-creating-a-reusable-messagebox-dialog-part-i.aspx](http://community.devexpress.com/blogs/theonewith/archive/2008/08/06/custom-silverlight-controls-creating-a-reusable-messagebox-dialog-part-i.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-25T07:38:16.630

我有同样的要求，[ScottGu 的使用用户控件构建基本模式对话框](http://weblogs.asp.net/scottgu/pages/silverlight-tutorial-part-6-using-user-controls-to-implement-master-detail-scenarios.aspx)是符合我要求的最佳解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-03-08T02:35:18.590

这是一个免费的图书馆，提供一个：[http ://www.vectorlight.net/demos/popup_dialogs.aspx](http://www.vectorlight.net/demos/popup_dialogs.aspx)

# php - PHP 转换 HTML 格式的日期

> ID：260064
> 
> 赞同：2
> 
> 时间：2008-11-03T21:41:25.573
> 
> 标签：php, date, atom-feed

从 Twitter Search API Atom Feed 返回的发布日期为 2008-11-03T21:30:06Z，需要将其转换为“X 秒/分钟/小时/天前”以显示 Twitter 消息发布的时间。

认为这可以通过使用 DATE_ATOM 值的 php date() 函数来完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-03T22:20:38.037

```
function time_since($your_timestamp) {
    $unix_timestamp = strtotime($your_timestamp);
    $seconds = time() - $unix_timestamp;
    $minutes = 0;
    $hours = 0;
    $days = 0;
    $weeks = 0;
    $months = 0;
    $years = 0;
    if ( $seconds == 0 ) $seconds = 1;
    if ( $seconds> 60 ) {
        $minutes =  $seconds/60;
    } else {
        return add_s($seconds,'second');
    }

    if ( $minutes >= 60 ) {
        $hours = $minutes/60;
    } else {
        return add_s($minutes,'minute');
    }

    if ( $hours >= 24) {
        $days = $hours/24;
    } else {
        return add_s($hours,'hour');
    }

    if ( $days >= 7 ) {
        $weeks = $days/7;
    } else {
        return add_s($days,'day');
    }

    if ( $weeks >= 4 ) {
        $months = $weeks/4;
    } else {
        return add_s($weeks,'week');
    }

    if ( $months>= 12 ) {
        $years = $months/12;
        return add_s($years,'year');
    } else {
        return add_s($months,'month');
    }

}

function add_s($num,$word) {
    $num = floor($num);
    if ( $num == 1 ) {
        return $num.' '.$word.' ago';
    } else {
        return $num.' '.$word.'s ago';
    }
}

echo time_since('2008-11-03T21:30:06Z'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T21:48:27.977

[strtotime](http://uk3.php.net/strtotime)将处理该日期格式，为您提供 unix 时间戳。然后，您可以按照[如何计算相对时间？](https://stackoverflow.com/questions/11/how-do-i-calculate-relative-time)得到你的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:27:51.467

使用PHP 5.2 中引入的[DateTime](http://www.php.net/manual/en/book.datetime.php)功能很容易：

```
$posted   = new DateTime('2008-11-03T21:30:06Z');
$now      = new DateTime();
$interval = $posted->diff($now);
echo $interval->format('%a days'); // You can change this to be whatever format you like 
```

[例子](http://codepad.viper-7.com/qFgHZM)

# jquery - jQuery - 打开页面上的所有链接

> ID：260072
> 
> 赞同：4
> 
> 时间：2008-11-03T21:43:28.267
> 
> 标签：jquery

我正在尝试学习 jQuery，以弥补我贫乏的 javascript 技能。

作为一个测试项目，我有一个充满链接的页面，我希望`button`在页面上打开新选项卡中的所有链接。链接都有`target="_blank"`属性。

我正在使用这个

```
 $('button').click(function() {
    $('a').click();
  );} 
```

我已经`selector`通过修改`css`链接测试了语法，所以我确定没问题。我需要更改什么才能打开链接？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-03T21:49:33.387

您不能通过 javascript 操作标签（您可以要求在新窗口中打开链接，只是不能告诉它在标签中打开）。如果你想尝试，你可能想尝试的是这样的：

```
$('button').click(function() {
  $('a').each(function() {
     window.open($(this).attr('href') );
  });
}); 
```

本质上，当`<button>`被单击时，对于每个`<a>`元素，将`href`值传递给 window.open。或者基本上，假设您没有弹出窗口阻止程序，一堆打开的窗口:)

您当前的代码基本上说，当您按下 时`<button>`，激活`onclick()`所有`<a>`元素的处理程序。

**编辑**：作为对评论的回应，比较模仿 OP 功能的代码：

```
$('a').click(function() {
// assign an event to a.onclick
  window.open($(this).attr('href') );
});

$('button').click(function() {
// when we press <button>, trigger a.onclick
  $('a').click();
}); 
```

因为我们`onclick()`首先声明了一个功能，所以我们现在的行为与我的原始代码相同。（成堆的打开的窗户）

# winforms - 下载具有 Windows 服务器恢复功能的文件

> ID：260090
> 
> 赞同：2
> 
> 时间：2008-11-03T21:48:03.483
> 
> 标签：winforms, auto-update, resume-download

我正在为 winforms 桌面应用程序构建自动更新程序。

下载更新时，如果客户的 Internet 连接中断，我如何提供**恢复下载功能？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-04T09:14:25.610

如果您正在做一个仅限 Windows 的应用程序，并且您的目标是 Windows XP 和更高版本的操作系统，您可以使用 BITS：后台智能传输服务。

*   [BITS 上的 MSDN 页面](http://msdn.microsoft.com/en-us/library/bb968799%28v=VS.85%29.aspx)
*   [将 BITS 与 .NET 连接](http://msdn.microsoft.com/en-us/magazine/cc188766.aspx)

它与 WindowsUpdate 使用的服务相同。

否则，使用 HTTP 自动恢复功能在 C# 中推出您的解决方案应该不会太难（使用 HTTP 请求中的 Accept-Range 指令）

*   [如何：使用 HTTP 获取网页](http://www.csharp-station.com/HowTo/HttpWebFetch.aspx)
*   [下载大文件](http://bytes.com/forum/thread446201.html)

# jsf - JSF getValue() 与 getSubmittedValue()

> ID：260094
> 
> 赞同：22
> 
> 时间：2008-11-03T21:48:55.933
> 
> 标签：jsf

我最近一直在开发一些 JSF 应用程序，并且对 Web 组件 API 的不一致感到不安。

我注意到在服务器端代码中的 JSF 组件对象上调用 .getValue() 或 .getSubmittedValue() 时会出现极其不可预测的行为。有时，当我在下拉列表框上调用 .getValue() 时，我注意到我得到的值是在我选择我的值之前的值（所以来自最后一页刷新的值），其中 .getSubmittedValue() 得到我是正确的值，例如：

```
UIInput name = new UIInput(); // This is the control I have in a bean.

public void submit(ActionEvent ae)
{
    someMethod(name.getValue().toString());          // Retrieves the "old" value
    someMethod(name.getSubmittedValue().toString()); // Retrieves the correct value 
} 
```

另外，我注意到在表单字段上调用 ​​.getSubmittedValue() 有时会导致空指针异常，因为该值尚未在组件对象中实例化，在这种情况下，当我在这种情况下调用 .getValue() 时，我得到正确的值，例如：

```
HtmlInputText name = new HtmlInputText(); // This is the control I have in a bean.

public void submit(ActionEvent ae)
{
    someMethod(name.getValue().toString());          // Retrieves the correct value
    someMethod(name.getSubmittedValue().toString()); // Throws NullPointerException 
} 
```

这只是 JSF 框架的“怪癖”，还是我完全错误地使用了**API**？对这两种方法的任何见解将不胜感激。干杯。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-07-17T20:48:47.803

由于这是在 Google 中搜索 getValue 与 getSubmittedValue 的第一结果，我想补充一点，它们之间的区别在验证中至关重要（即在编写自定义验证器时）

引用 getSubmittedValue() 的 API 文档：

> 这仅在解码和验证阶段之间或组件验证未成功时为非空值。一旦转换和验证成功，（转换后的）值将存储在该组件的本地“value”属性中，并且提交的值重置为 null。

来源：[http://myfaces.apache.org/core11/myfaces-api/apidocs/javax/faces/component/UIInput.html#getSubmittedValue()](http://myfaces.apache.org/core11/myfaces-api/apidocs/javax/faces/component/UIInput.html#getSubmittedValue())

这意味着如果您尝试访问的绑定已经进行了验证/转换，您应该调用 getValue() 否则您将不得不调用 getSubmittedValue() 并自己处理解析它。这些发生的顺序似乎是由它们在 UI 中出现的顺序决定的，但我认为这不能保证。即使是这样，您也不应该指望这一点，因为 UI 中的更改字段不应该破坏您的代码。

您可以通过查看 isLocalValueSet() 返回的内容来检测验证/转换是否已完成。如果它返回 true，那么验证/转换已经完成，所以你应该调用 getValue()。否则，您需要调用 getSubmittedValue() ，这将为您提供用户输入的原始输入，您可能希望将其解析为更有意义的内容。

例如，当调用 getValue() 时，日历对象将返回 Date 对象，而在调用 getSubmittedValue() 时将返回 String 对象。由您的转换器将字符串解析为 Date 以便对其进行验证。

如果 JSF 规范有一种方法可以为我们做到这一点，那就太好了，但 AFAIK 没有。如果某些日期需要在其他日期之前，并且某些仅在某些情况下需要，则需要编写几个验证器来处理这个问题。所以它很容易成为一个问题。这类似于您不能对空白字段进行任何类型的验证，这意味着您不能有条件地要求该字段。如果对所有字段（甚至是空白字段）都运行了验证，则可以编写自定义验证器来抛出异常（如果它应该被要求而不是）。JSF 有一些东西只是一种痛苦。除非/直到它们被修复，我们只需要处理它们。

在原始帖子中谈论问题的细节：这里的区别在于您在生命周期中所处的位置。该`submit`方法看起来像是一个按钮的动作监听器，将其置于生命周期的末尾；动作和动作监听器在渲染响应之前但在验证之后的“调用应用程序”阶段触发。如果您打算使用 JSF 进行编程，您应该学习并理解生命周期。值得花时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-04T00:23:34.293

引用[EditableValueHolder.getSubmittedValue](http://java.sun.com/javaee/javaserverfaces/1.2/docs/api/javax/faces/component/EditableValueHolder.html#getSubmittedValue())上的文档：

> 返回该组件的提交值。此方法应仅由该组件的 encodeBegin() 和/或 encodeEnd() 方法或其对应的 Renderer 使用。

通常，您甚至不会调用*getValue*。相反，组件的*value*属性应该绑定到您的模型（也许是一个 bean）。您的业​​务逻辑将与模型交互，而不是与组件交互。

如果提交的值没有被设置为值，那么我猜想某些验证失败了。唯一的问题是你的事件被触发了。这里有两个问题的猜测：

*   您对组件对象有一个过时的引用。
*   您已经在*UICommand上设置了**immediate*属性，这意味着在组件处于不适当状态的阶段触发事件。

 *无法确定所提供的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T18:16:34.380

我在基于 JSF 的 xpage 上工作，所以.. 可能是一样的...

无论如何，getSubmittedValue(); 始终返回您在 firebug/chrome 开发人员网络选项卡中看到的内容。那是发送数据包中的值。我在标题选项卡中显示（chrome），在表单数据部分中，名为 $$xspsubmitvalue。

另一方面，getValue() 是特定于组件的。<-- 这里不是 100% 确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-10T21:20:58.253

**TL;DR**答案：

 ~~~~```
UIViewRoot viewRoot = context.getViewRoot();
UIInput input = (UIInput)viewRoot.findComponent(":form:inputID");

String inputValueString;

if (input.isLocalValueSet()) {
  inputValueString = (String)input.getValue(); //validated and converted already
} else {
  inputValueString = (String)input.getSubmittedValue(); //raw input
} 
```~~ 

~~或者至少这就是其他答案所说的......~~

只需使用`.getSubmittedValue()`并处理必须转换原始输入的后果（如有必要，如果该原始输入需要转换）。`.getValue()`即使使用上面的代码，在这方面也被破坏了。如果您使用它，它会延迟提交的值，这是不可接受的。

# c++ - 非托管 C++ 库 - VS2005 和 VS2008 之间的区别？

> ID：260096
> 
> 赞同：1
> 
> 时间：2008-11-03T21:49:14.340
> 
> 标签：c++, visual-studio-2008, visual-studio-2005

我会先说我是一个 C# 程序员，他继承了没有文档的可怕代码。我有一个用托管代码包装的非托管 C++ 库，该库在带有 .Net 1.1 框架的 VS2003 中运行良好。我正在尝试将其升级到至少 .Net 2.0。

我有使用“MSVC 8.x”编译的非托管 C++ 库（因此相当于 VS 2005，我假设）。我一直在尝试将所有内容迁移到 VS2008，但在运行时这个库仍然存在一些问题。

我的问题是：这个库应该与 VS2008 一起使用吗？或者如果库是用 VC8.x 编译的，我应该在 VS2005 中开发吗？

任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-03T22:07:32.570

它应该可以工作，我希望您在编组方面遇到问题。它可能是为 PInvoking 错误地声明的东西，它设法在 .NET 1.1 中工作，但在更高版本中没有。

你没有说你在运行时遇到了什么样的问题，也没有说明你如何访问你的库。例如，您是否将您的库与您的项目一起编译？如果是这样，您能否在 C# 项目中打开非托管调试并单步执行您遇到问题的代码？你如何调用非托管代码？是通过 PInvoke，还是您管理 C++ 包装器？

根据我的经验，调用旧版非托管库的最佳解决方案是为使用托管 C++ 编写的旧版库添加托管包装器库。这样，您就可以为您的库提供一个托管接口，供所有 .NET 语言使用，而且您不必担心 PInvoke 签名是否正确。

你的项目应该是这样的。

C# 应用程序 -> 管理 C++ Wrapper DLL -> 旧版 DLL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T22:08:08.500

它可以取决于 lib 还依赖什么。例如，如果您在跨库接口使用 STL，那么使用与客户端不同的版本编译库将是一个坏主意。但是，如果该库提供了一个简单的 C 风格函数接口，那么您应该没有问题。

如果您有该库的源代码，那么我建议您尝试将其移植到 VS2008。一般来说，从长远来看，将所有东西都放在同一个开发环境中会少很多麻烦。

你如何包装非托管库......如果它可以追溯到 VS2003，大概使用 C++ 的托管扩展。从 VS2005 开始，它现在已被弃用，并已被 C++/CLI 取代。虽然较新的编译器支持 /clr:oldSyntax 开关以仍然编译旧代码，但它肯定存在问题。我们有旧代码无法使用此开关在 VS2005(8) 上编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-04T04:53:19.007

--Rob Prouse：
包装器使用托管 C++，没有 PInvoke。包装器被编译成一个 DLL，然后由另一个应用程序使用（如您所示）。

遗留代码生成图形对象。当我尝试获取图像的句柄时，我得到了一个空异常。调试器不允许我更深入地了解代码以找出原因。其他一切似乎运行正常 - 创建图像所需的其他数据对象存在并且似乎是正确的。（抱歉，我知道这仍然是一个非常模糊的描述。）

--Rob Walker：
很遗憾，我没有源代码。不确定“跨库接口使用 STL”。图形是否属于该类别？

我可以使用 /clr:oldSyntax 开关让我的应用程序运行，但这就是我获得图像的空句柄的地方。我尝试进行所有修改，以便它可以使用 /clr 进行编译，但是我不断收到无法解决的链接错误。（链接器一直抱怨无法找到文件，即使这些文件位于它正在查找的文件夹中。）

# wpf - 任何免费的 WPF 主题？

> ID：260098
> 
> 赞同：197
> 
> 时间：2008-11-03T21:49:41.390
> 
> 标签：wpf, themes

我不是设计师，所以我正在寻找一些免费的 WPF 主题。

有什么建议么？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2008-11-04T00:11:21.637

我发现（出售）的唯一一个是[reuxables](http://www.nukeation.com/reuxables.aspx)。有点贵，如果你问我，但你确实得到了 9 个主题/61 个变体。

### 更新 1：

一个 WPF Contrib 项目......确实有 1 个他们从未发布过的[主题](http://www.codeplex.com/wpfcontrib/Wiki/View.aspx?title=Themes&referringTitle=Home)。

### 更新 2：

Rudi Grobler（上图）刚刚为此创建了 CodePlex[社区](http://www.codeplex.com/wpfthemes)……从他上面提到的转换主题开始。有关更多信息，请参阅他的博客[文章](http://dotnet.org.za/rudi/archive/2008/11/06/wpf-themes-released.aspx)。鲁迪加油！

### 更新 3：

正如下面的另一个答案所提到的，自从编写了这个问题和我的答案以来，WPF 工具包已经合并了一些免费[主题](http://wpf.codeplex.com/wikipage?title=WPF%20Themes&referringTitle=Home)，特别是 Silverlight 工具包中的主题。Rudi 的[项目](http://wpfthemes.codeplex.com/)走得更远，并添加了更多……但根据您的情况，WPF Toolkit 可能就是您所需要的（并且您可能已经安装了它）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-04T07:08:44.503

不是纯粹的主题，而是[MahApps.Metro](http://mahapps.com/MahApps.Metro/ "MahApps.Metro")提供 Windows 8 外观和一些变体，例如深色和浅色基本主题，带有绿色、蓝色等文本和其他内容。它非常酷，可以开箱即用。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-11-04T06:29:10.173

我从[www.xamltemplates.net](http://www.xamltemplates.net)购买了一个主题。主题附带源代码，因此您可以调整它们。他们还提供免费主题（包括源代码）。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-04-11T19:43:16.333

我还发现了那些：http: [//xceed.com/ProThemes_WPF_Features.html](http://xceed.com/ProThemes_WPF_Features.html)

当然，还有许多用于 WPF 的 Metro UI 实现： [https ://github.com/MahApps/MahApps.Metro](https://github.com/MahApps/MahApps.Metro) [http://mosaicproject.codeplex.com/](http://mosaicproject.codeplex.com/)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-07-13T16:45:50.743

CodePlex 上的 WPF 页面中有一些**Microsoft 主题：**

[CodePlex - Windows 演示基础](http://www.codeplex.com/wpf)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-11-04T07:05:44.950

阅读[这篇](http://dotnet.org.za/rudi/archive/2008/10/29/silverlight-love-for-wpf.aspx)关于如何将 Silverlight 主题转换为 WPF 的文章...看看[Silverlight 工具包](http://www.codeplex.com/Silverlight)，你发布了大量免费的 silverlight 主题！！！

*   表达黑暗
*   表情灯
*   雷尼尔紫
*   雷尼尔橙
*   闪亮的蓝色
*   闪亮的红色

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-08-02T13:18:05.323

WPF 主题项目的直接链接在这里：[WPF 主题](http://www.codeplex.com/wpfthemes)

下载源代码（目前没有二进制版本）并查看随附的演示以了解功能。

您需要安装[WPF 工具包](http://www.codeplex.com/wpf/Release/ProjectReleases.aspx)才能编译和使用主题。

这是一个正在进行的项目，所以我认为将来会添加更多主题。它可能会破坏试图向您出售主题的网站，但对于不能预先投资太多的单人商店来说，这非常有用。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2010-08-19T11:07:36.557

[您可以从http://www.nukeation.com/free.aspx](http://www.nukeation.com/free.aspx)下载 7 个免费的 WPF 主题。我发现它们非常有用。你一定要试试看。它们是由设计官方 WPF 和 Silverlight 主题的人设计的。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-11-04T00:41:44.087

这是 Silverlight 的[另一个](http://blogs.msdn.com/dave/archive/2008/10/06/dave-s-glossy-controls-for-silverlight-2-released.aspx)。[以及使用的漂亮渐变](http://geekswithblogs.net/Silverlight2/archive/2008/10/21/more-xaml-gradients.aspx)列表。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-11-19T17:28:47.847

[这](http://www.hightech.ir/SeeSharp/expression-clone)是我的 WPF 控件的表达黑暗主题。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-03-02T05:46:30.873

[阳光橙 WPF 主题](http://jobijoy.blogspot.com/2009/03/sunny-orange-wpf-theme-1.html)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-08-01T15:37:38.110

[Amazings WPF Controls](http://amazingwpfcontrols.codeplex.com/)包括 WPF 的 Jetpack 主题。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-11-04T09:16:14.610

我们使用 Assergs Application Framework 主题：

[http://www.codeplex.com/appfx](http://www.codeplex.com/appfx)

他们有一个漂亮的办公室外观和感觉:)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-04-16T06:31:01.203

您可能想试试 www.reuxables.com - 我们既有商业主题也有免费主题，它是 WPF 最大和最多样化的主题库。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-11-06T19:05:13.833

Viblend [WPF 主题](http://www.viblend.com/Products/NET/WPF/Controls/WPFProducts.aspx)是免费的。

# vb.net - 通过 LINQ 将节点添加到树会在运行时创建“不支持查询运算符”

> ID：260116
> 
> 赞同：2
> 
> 时间：2008-11-03T21:53:26.813
> 
> 标签：vb.net, linq, linq-to-sql

我正试图解决一个 LINQ 问题。最终目标是使用从 LINQ 获取的数据加载树视图到 SQL（视图）。问题是当我尝试访问获取的数据时，它会不断抛出“运行时不支持的查询运算符”。涉及的代码不外乎：

```
 Dim tasklistdata As New lqDataContext
    Dim UserID As Integer

    UserID = (From vwUser In tasklistdata.Operators _
             Where vwUser.UserName Is Login.txtUsername.Text _
             Select vwUser.OperatorID).Single

    Dim lqHospitalList = From vwHospitalList In tasklistdata.SPM_Accounts _
                          Where vwHospitalList.OperatorID = UserID _
                          Order By vwHospitalList.CustomerName, vwHospitalList.Class _
                          Select vwHospitalList.CustomerName, vwHospitalList.Class, vwHospitalList.ClassCount, vwHospitalList.Charges

    tvHospitalSelect.Nodes.Add(lqHospitalList(0).CustomerName) 
```

如果我将代码更改为 lqHospitalList.First.CustomerName 它按预期工作，但是将其更改为数组位置是问题出现的地方。请指导我指出我的逻辑缺陷在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-03T22:14:51.060

Linq 查询不是列表，因此它们没有索引。要遍历所有项目，您可以像这样使用 foreach：

```
For Each hospital In lqHospitalList
    tvHospitalSelect.Nodes.Add(hospital.CustomerName)
Next 
```

如果要将查询转换为列表：

```
lqHospitalList.ToList 
```

或数组：

```
lqHospitalList.ToArray 
```

# c# - Silverlight 2 中的 LINQ to Array

> ID：260121
> 
> 赞同：1
> 
> 时间：2008-11-03T21:54:20.883
> 
> 标签：c#, .net, xml, linq, silverlight-2.0

我的代码有问题，或者我只是不完全理解这一点。我有以下代码运行一个查询，该查询可能包含多个 RIGHT 属性，并希望将每个属性存储在一个数组中以供以后获取：

```
 var members = from myList in o_data.Descendants(bp + "Reaction")
                            select new
                            {
                                participant = myList.Element(bp + "RIGHT").Attribute(rdf + "resource").Value,
                            };

        return members.ToArray(); // I this the right conversion (to store all attributed values to array)? 
```

因为他们在 Silverlight 中没有集合，所以我试图只返回一个数组......当我这样调用函数时：

FunctionName.GetValue(0).ToString();

它返回 { 参与者 = #(ValueOfAttribute) }

我只想返回实际值，而不是花括号或“particpant =”这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-03T22:05:46.333

大括号在那里，因为您在 linq 查询中创建的匿名类型的 ToString 实现将它们放在那里。

这是来自匿名类型的 ToString 实现：

```
public override string ToString()
{
    StringBuilder builder = new StringBuilder();
    builder.Append("{ test = ");
    builder.Append(this.<test>i__Field);
    builder.Append(" }");
    return builder.ToString();
} 
```

如果您只想返回“参与者”的值，请删除所有匿名类型的东西并选择该值：

```
var members = from myList in o_data.Descendants(bp + "Reaction")
  select myList.Element(bp + "RIGHT").Attribute(rdf + "resource").Value;
return members.ToArray(); 
```

最后，如果您想为每个元素选择多个值（您的示例代码有一个悬空的逗号表示这一点），请定义一个命名类型并在您的查询中创建该类型的实例。然后，您可以在查询方法之外引用该类型的属性，因为该数组将是该类型的实例数组，而不是对象数组。

# java - 如何在 Java 1.4 中添加 xml 元素

> ID：260122
> 
> 赞同：3
> 
> 时间：2008-11-03T21:54:37.230
> 
> 标签：java, jdk1.4

我正在尝试添加“标题”元素，但收到 NO_MODIFICATION_ALLOWED_ERR 错误...

```
private static void saveDoc(String f) throws Exception {

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document doc = db.parse(f);

    // create DOMSource for source XML document
    DOMSource xmlSource = new DOMSource(doc);

    Node nextNode = xmlSource.getNode().getFirstChild();

    while (nextNode != null) {
        System.out.print("\n node name: " + nextNode.getNodeName() + "\n");
        if (nextNode.getNodeName().equals("map")) {
            nextNode.appendChild(doc.createElement("title")); 
```

**上面的行抛出错误：**

> 线程“main”中的异常 org.w3c.dom.DOMException: `NO_MODIFICATION_ALLOWED_ERR`: 尝试修改不允许修改的对象。在 com.sun.org.apache.xerces.internal.dom.ParentNode.internalInsertBefore(Unknown Source) 在 com.sun.org.apache.xerces.internal.dom.ParentNode.insertBefore(Unknown Source) 在 com.sun.org .apache.xerces.internal.dom.NodeImpl.appendChild(Unknown Source) 在 myProject.Main.saveDoc(Main.java:171) 在 myProject.Main.main(Main.java:48)

```
 break;
        }

        nextNode = nextNode.getNextSibling();             
    }
} 
```

我的 xml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<?dctm xml_app="LOPackage"?>
<!DOCTYPE map PUBLIC "-//OASIS//DTD DITA Map//EN" "file:C:/Documents%20and%20Settings/joe/Desktop//LOPackage/map.dtd">
<map xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" class="- map/map " ditaarch:DITAArchVersion="1.1" domains="(map mapgroup-d) (topic indexing-d)">
    <topicref class="- map/topicref " href="dctm://ai/0501869e80002504?DMS_OBJECT_SPEC=RELATION_ID" type="Le"/>
    <topicref class="- map/topicref " href="dctm://ai/0501869e80002505?DMS_OBJECT_SPEC=RELATION_ID" type="Pr"/>
    <topicref class="- map/topicref " href="dctm://ai/0501869e80002506?DMS_OBJECT_SPEC=RELATION_ID" type="Pr"/>
</map> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-04T11:12:27.683

不确定这是否是原因，但请检查您的 DOM 实现是否验证了对 DOM 的所有更改。因为在你的代码中，

```
nextNode.appendChild(doc.createTextNode("title")); 
```

将尝试创建一个文本节点作为`map`元素的子节点，而 DITA Map 不允许这样做。相反，尝试

```
Element title = doc.createElement("title");
title.appendChild(doc.createTextNode("title content"))
nextNode.appendChild(title); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-03T22:13:19.237

由于某种原因，父节点似乎是只读的。使用以下命令克隆文档：

```
Document newDoc = doc.cloneNode(true); 
```

通过以下方式将其设置为读写：

```
newDoc.setReadOnly(false,true);
//                       ^^^^ also sets children 
```

然后做你的事。不过，我会在保存后返回新文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-04T04:43:48.823

原始文件来自哪里？

这就是问题的原因 - 在文档中读取的代码正在构建一个只读文档。在不知道你是如何阅读它的情况下，很难弄清楚如何改变它。

我刚刚使用 JDK 1.4.2-11 在 Windows 上进行了快速测试，我可以确认使用 DocumentBuilderFactory（XML 内容来自阅读器）不会创建只读文档。

# c++ - 如何在c ++中使用宽字符串文字而不将L放在每个文字前面

> ID：260125
> 
> 赞同：13
> 
> 时间：2008-11-03T21:55:10.007
> 
> 标签：c++, string, literals

您将不得不原谅我的无知，但我不习惯在 c++ 中使用宽字符集，但是有没有一种方法可以在 c++ 中使用宽字符串文字，而无需在每个文字前面放一个 L？

如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-11-03T21:59:19.577

不，没有。您必须使用 L 前缀（或 _T() 之类的宏和 VC++，在为 Unicode 编译时无论如何都会扩展为 L）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-11-03T22:40:48.730

新的 C++0x 标准定义了另一种方法：
[http ://en.wikipedia.org/wiki/C%2B%2B0x#New_string_literals](http://en.wikipedia.org/wiki/C%2B%2B0x#New_string_literals)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-26T15:35:39.407

在相关说明..我正在尝试执行以下操作

```
#define  get_switch( m )   myclass::getSwitch(L##m) 
```

这是一个将扩展的宏

```
get_switch(isrunning) 
```

进入

```
myclass::getswitch(L"isrunning") 
```

这在 c++ visualstudio 2008 中运行良好

但是当我在 mac Xcode (for iphone) 下编译相同的代码时，我得到了错误：

```
error: 'L' was not defined in this scope. 
```

编辑：解决方案

```
#define  get_switch( m )   myclass::getSwitch(L ## #m) 
```

这适用于 vc++ 和 mac xcode (gcc)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-03T21:58:46.990

为什么你不想用 L 作为字符串文字的前缀？这很简单——不带 L 的字符串是 ANSI 字符串 ( `const char*`)，带 L 的字符串是宽字符串 ( `const wchar_t*`)。有一个`TEXT()`宏，它根据当前项目设置为使用 Uncode 将字符串文字转换为 ANSI 或宽字符串：

```
 #ifdef UNICODE
#define TEXT(s) L ## s
#else
#define TEXT(s) s
#endif 
```

还有`_T()`宏，相当于`TEXT()`.

# asp.net - 防止机器人向您的博客发送垃圾邮件的最佳方法是什么？

> ID：260128
> 
> 赞同：6
> 
> 时间：2008-11-03T21:57:27.677
> 
> 标签：asp.net, asp.net-mvc, spam-prevention

我的博客有问题。我得到了善良的机器人的访问，他们在我的博客文章中留下了“好”的评论:(

除了使用验证码模块之外，我想知道是否有更聪明的方法可以将它们拒之门外。我对验证码模块的问题是我认为它们对用户来说很烦人:(

我不知道这是否对任何人有帮助，但我的网站在 asp.net mvc beta 中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-03T21:59:28.407

你有没有想过使用这个？

**[http://akismet.com/](http://akismet.com/)**

从他们的常见问题

> 当新的评论、引用或 pingback 出现在您的博客上时，它会被提交到 Akismet 网络服务，该服务对评论运行数百次测试并返回赞许或反对。

这是一个非常易于使用的系统，我强烈推荐。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-03T22:37:45.723

我在[Honeypots 和 Hashes](http://nedbatchelder.com/text/stopbots.html)方面运气不错。

通过使机器人难以成功发布，您可以让用户在没有注册、验证码或来自 akismet 的误报的情况下发布。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-03T22:08:44.910

拥有一个非常简单的验证码。也许让它总是“橙色”？我认为以前没有人这样做过。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-03T22:11:08.023

Akismet 绝对是我所知道的限制垃圾评论的第一方法。也很高兴将其卸载给第 3 方（以合理的价格）.. 这样如果客户抱怨，就“转移责任”

另一种选择是合并诸如 mod_security 的垃圾邮件发送者签名文件之类的内容。他们有一个关键字列表，您可以扫描评论并在匹配时放置要审核的消息。尽管如果您有一个留言板，实际上讨论了包含这些关键字的主题，您将需要很多版主。:-)

还可能需要考虑扫描 IP 并将它们与 SpamHaus 或 DCShield 的阻止列表进行匹配。我们最近开始使用这种方法，它创造了奇迹。

不起作用的事情：需要注册、简单的验证码、用户代理……这些可以自动化或用廉价劳动力打败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-03T22:03:08.337

我想你有几个选择...

1.  需要注册才能发表评论 - 但这比验证码更烦人，所以可能不是最好的主意

2.  检查海报的用户代理（请参阅[此处](http://www.user-agents.org/)）是否有看起来真实的东西或排除那些看起来可疑的东西

3.  使用漂亮的验证码。尽管它们很烦人，但如果使用得当，它们并没有那么糟糕。前几天我花了 7 次尝试注册一个 gmail，因为我只是看不懂它说什么。一个不错的验证码虽然真的没有那么糟糕，但要简短易读

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-03T22:07:59.513

如果您收到的垃圾邮件包含大量链接，您可以假设任何包含 >= 2 个链接的评论都是垃圾邮件评论，除非博客作者批准，否则不要将其发布到博客上。这是大多数评论垃圾邮件插件所做的。我目前正在开发一个博客软件，我在过渡期间采用了这个解决方案，直到我可以完全集成 akismet。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-04T03:20:54.640

[通过使用Disqus](http://www.disqus.com/)运行我的博客评论，我将垃圾邮件变成了别人的问题。自从切换以来没有垃圾邮件，Disqus 一直在处理它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-01-25T09:03:58.447

一些答案建议 Akismet，但[我不同意](https://stackoverflow.com/questions/1762189/blacklist-ip-database/4790734#4790734)并认为[动态验证码方法是最好的方法](https://stackoverflow.com/questions/3613023/if-i-use-captcha-will-i-be-able-to-stop-the-spam-completely-in-my-blog/4790395#4790395)

# silverlight - Silverlight - 保护网络内的内容（DRM？）

> ID：260129
> 
> 赞同：2
> 
> 时间：2008-11-03T21:57:36.943
> 
> 标签：silverlight, drm

我想设置一些 WMV 视频流，使用 Windows 2003 的流媒体服务器和 Silverlight。

现在，不幸的是 Silverlight 只支持 HTTP，这意味着人们可以下载视频。虽然这本身不是问题，但我想知道有哪些选项可以防止它们在网络之外播放。

当然，我想到了 DRM。有没有简单的方法来获取和设置它？我不想有一些复杂的用户方案，它本质上归结为“如果你可以到达服务器（仅在内部网络中），你会得到一个许可证，否则不会”。

在该领域有 WMV DRM 或内容保护方面的经验吗？除了 Windows 2003 Server 和 Silverlight 2，我还需要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-03T22:04:49.003

DRM 是一种负和游戏。您在实施它时会损失金钱和时间，而您本可以花在对用户有用的东西上，并且您的内容对您的用户来说变得不那么有价值。也无法有效实施。我不打算讨论任何特定的 DRM 方案，但论点的核心是，为了向用户显示内容，用户的计算机必须能够解密它。因此，解密代码和解密密钥必须存在于用户的计算机上。加密只能保护数据免受两个安全端点之间的拦截和篡改。如果其中一个端点遭到破坏（并且您在不信任用户的情况下假设这一点），那么加密技术将毫无用处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T23:15:23.730

迈克尔：你可以做一些事情。您可以使用 IIS7 并创建一个可以受 SSL 证书保护的网络播放列表以保护流。此外，Silverlight 确实支持我们称为 PlayReady 的非接触式（从最终用户的角度来看）DRM 方案。它确实涉及让服务器颁发许可证，因此可能会违反您对无/低成本解决方案的渴望（但 DRM 解决方案很少）。这是两个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-03T22:16:37.983

在[本次会议](http://channel9.msdn.com/pdc2008/BB07/)中，棒球小哥谈到了使 URL 只能使用一次。我认为这不是 100% 的解决方案，但它可能会阻止用户复制粘贴 url。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-26T19:52:59.683

内部 DRM 的替代方案是托管 DRM。我们“EZDRM.com”提供了一个低成本的解决方案，并且仍然为您提供 DRM 的所有功能。

# c# - 有没有办法免费使用office2007工具栏创建桌面应用程序？

> ID：260132
> 
> 赞同：4
> 
> 时间：2008-11-03T21:58:10.593
> 
> 标签：c#, .net, ribbon

我为漂亮的功能区找到了几个控件集（DotNetBar、DivElements、...），但都需要至少 100 美元的许可证。有没有看起来和商业版一样漂亮的免费控件集？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-03T22:08:01.587

您可以通过 Office 开发人员 UI 许可证下载 Microsoft WPF 功能区控件。

它原定于上周发布。

[http://windowsclient.net/wpf/wpf35/wpf-35sp1-ribbon-walkthrough.aspx](http://windowsclient.net/wpf/wpf35/wpf-35sp1-ribbon-walkthrough.aspx)

我看看能不能找到下载链接。

编辑：

认为这就是您正在寻找的 [Office Fluent 用户界面开发人员门户](http://msdn.microsoft.com/en-us/office/aa905530.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-03T22:03:54.450

可能想看看[http://arstechnica.com/journals/linux.ars/2007/08/30/mono-developer-brings-the-ribbon-interface-to-linux](http://arstechnica.com/journals/linux.ars/2007/08/30/mono-developer-brings-the-ribbon-interface-to-linux)

它适用于单声道，但可能值得一看。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-03T22:08:55.580

在 codeproject 上试试这个：

[http://www.codeproject.com/KB/toolbars/WinFormsRibbon.aspx](http://www.codeproject.com/KB/toolbars/WinFormsRibbon.aspx)

# excel - Microsoft_Office Excel 工作表类的 CoCreateInstance 失败。0x80040514 "类未注册"

> ID：260142
> 
> 赞同：0
> 
> 时间：2008-11-03T22:00:37.110
> 
> 标签：excel, com, ole

我正在处理的示例调用 Microsoft_Office Excel 工作表类的 CoCreateInstance。它失败，HRESULT 为 0x80040514（“类未注册”）。系统上注册了其他 Excel 类（Excel.Application），但没有为 Worksheet 注册的类.....可以注册这个类吗？

更新：我正在使用 Microsoft 的 DSOFramer 示例项目。它首先尝试使用 IMoniker 类进行绑定。如果失败，它会为 clsid 调用 CoCreateInstance。这可能适用于其他 MS Office 对象，但当它是 Excel 时，该类适用于工作表。我将示例修改为 CoCreateInstance _Application，然后获取工作簿，然后为目标文件调用 Workbooks::Open，它返回一个 Worksheet 对象。然后我返回该指针并与原始示例代码路径合并。现在都在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-04T15:28:29.617

我相信你的安装可能很糟糕。我发现当我的 progIds 像这样损坏时，如果我修复安装，它将注册该类。

尽管我向您提出的问题是，您为什么要尝试创建工作表对象？似乎您可以从 Workbook 对象中获得一个。事实上，我觉得这可能是你无论如何都需要做的。

# perl - 我应该如何处理 XML::RPC 和 Drupal 中的数字字符串？

> ID：260150
> 
> 赞同：2
> 
> 时间：2008-11-03T22:03:36.963
> 
> 标签：perl, drupal, xml-rpc

我正在尝试在我的 Drupal (PHP) 后端使用 XML-RPC 服务器，以使我的 Perl 后端更容易与之通信。但是，我遇到了一个问题，我不确定哪些部分（如果有的话）是错误。本质上，我需要传递给 Drupal 的一些变量是字符串，有时是充满数字的字符串，并且 Drupal XML-RPC 服务器返回一个错误，即当字符串充满数字时，它的格式不正确。

我的 Perl 代码现在看起来像这样。

```
use strict;
use warnings;
use XML::RPC;
use Data::Dumper;
my $xmlrpc = XML::RPC->new(URL);
my $result = $xmlrpc->call( FUNCTION, 'hello world', '9876352345');
print Dumper $result; 
```

输出是：

```
$VAR1 = {
      'faultString' => 'Server error. Invalid method parameters.',
      'faultCode' => '-32602'
}; 
```

当我让 Drupal XML-RPC 服务器打印出它接收到的数据时，我注意到第二个参数的类型为 i4：

```
<param>
<value>
<i4>9876352345</i4>
</value> 
```

我认为当 Drupal 完成对项目的处理时，它会将变量键入为 int 而不是字符串。这意味着当 Drupal 稍后尝试检查字符串的变量值是否正确形成时，is_string PHP 函数返回 false。

```
foreach ($signature as $key => $type) {
  $arg = $args[$key];
  switch ($type) {
    case 'int':
    case 'i4':
      if (is_array($arg) || !is_int($arg)) {
        $ok = FALSE;
      }
      break;
    case 'base64':
    case 'string':
      if (!is_string($arg)) {
        $ok = FALSE;
      }
      break;
    case 'boolean':
      if ($arg !== FALSE && $arg !== TRUE) {
        $ok = FALSE;
      }
      break;
    case 'float':
    case 'double':
      if (!is_float($arg)) {
        $ok = FALSE;
      }
      break;
    case 'date':
    case 'dateTime.iso8601':
      if (!$arg->is_date) {
        $ok = FALSE;
      }
      break;
  }
  if (!$ok) {
    return xmlrpc_error(-32602, t('Server error. Invalid method parameters.'));
  }
} 
```

我不确定问题在分歧的哪一边，或者我是否应该使用其他东西。Perl 端的请求是否应该将内容键入为字符串而不是 i4，或者请求的 Drupal 端是否对字符串类型过于严格？我的猜测是问题出在后者，但我对 XML-RPC 服务器应该如何工作的了解还不够，无法确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-03T23:05:45.713

该数字`9876352345`太大而无法放入 32 位整数。这可能会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T23:09:45.537

你在使用前沿吗？也许您可以明确声明字符串？

```
my $result =
  $xmlrpc->call( FUNCTION, 'hello world', $xmlrpc->string('9876352345') ); 
```

来自[客户文档](http://search.cpan.org/~kmacleod/Frontier-RPC-0.07b4/lib/Frontier/Client.pm)的信息：

> 默认情况下，您可以传递普通的 Perl 值（标量）进行编码。如果它们看起来像整数、浮点数或字符串，RPC2 会自动将它们转换为 XML-RPC 类型。当你想要传递一个看起来像“0096”的字符串时，这个假设会导致问题，RPC2 会将它转换为一个，因为它看起来像一个整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-04T11:28:04.797

我对 XML::RPC 包没有任何经验，但我是[RPC::XML](http://search.cpan.org/dist/RPC-XML) CPAN 模块的作者。与 Frontier 包一样，我提供了一种将值强制为特定类型的方法，否则它会默认为其他类型。

如果我不得不猜测，我会说您使用的包 simple 对数据进行正则表达式匹配以决定如何键入它。我的包也有类似的问题，考虑到 Perl 处理标量值的方式，唯一真正的解决方法是通过显式声明来强制它。正如之前的回答者所指出的，所讨论的值实际上超出了 <i4> 类型的范围（这是一个有符号的 32 位值）。因此，即使您希望它是一个整数值，它对于 XML-RPC 规范也是无效的。

我建议切换到其他 XML-RPC 包之一，它具有更清晰的显式键入数据的方式。根据 XML::RPC 的文档，可以强制输入数据，但我发现它不清楚并且没有很好地解释。

# java - jython 的 PyObject.__tojava__ 方法有什么限制？

> ID：260154
> 
> 赞同：4
> 
> 时间：2008-11-03T22:04:22.407
> 
> 标签：java, jython

Jython 的[PyObject](http://www.jython.org/docs/api/org/python/core/PyObject.html)提供了一种将 python 对象转换为 java 的方法。Jython Monthly上有一些旧文章描述了使用`__tojava__`创建[jython对象工厂](http://wiki.python.org/jython/JythonMonthly/Articles/October2006/3)

除了需要接口之外，使用 Jython 创建“java”对象是否还有其他限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-06T17:44:47.513

Jython 对象不能很好地与 javas 序列化系统配合使用，并且过去存在自省的严重问题。我还没有在最新的 jython 版本中测试过自省问题，所以这可能是一个过时的问题。但除了这些小事之外，根据我的经验，其他一切都很好。

# asp.net - 替换 NUnitAsp

> ID：260158
> 
> 赞同：3
> 
> 时间：2008-11-03T22:06:10.593
> 
> 标签：asp.net, nunit, webautomation

是否有任何人知道的用于测试 ASP.NET 页面的 NUnitAsp 替代品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-03T22:12:26.523

您可以使用[WatiN](http://watin.sourceforge.net/)或[IEUnit](http://code.google.com/p/ieunit/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-03T22:17:47.417

你可以试试[Selenium](http://selenium.openqa.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-22T16:25:20.600

请注意，IeUnit 和 WatiN 都已停产。

直接在测试中使用 Selenium 不是一个好主意，因为您可能需要[封装页面对象](http://toolsqa.com/selenium-webdriver/c-sharp/encapsulation-oops-principle/)。

我建议使用[Playwright for .NET](https://playwright.dev/dotnet/)作为 Web UI 自动化测试工具。

您也可以考虑使用以下工具之一：

*   [阿塔塔框架](https://github.com/atata-framework/atata)
*   [天篷](http://lefthandedgoat.github.io/canopy/)(F#)
*   [海狸鼠](https://github.com/featurist/coypu)
*   [测试自动化](https://github.com/ObjectivityLtd/Test.Automation)
*   [测试堆栈.Seleno](http://seleno.teststack.net/)

# 也可以看看

另请参阅维护和最新的 .NET Web 应用程序测试框架列表：

*   [.NET 的自动化测试工具和框架列表：Web 应用程序测试](https://github.com/dariusz-wozniak/List-of-Testing-Tools-and-Frameworks-for-.NET/blob/master/README.md#web-application-testing)。

# python - 从 Python 源代码生成 UML 图的最佳方法是什么？

> ID：260165
> 
> 赞同：343
> 
> 时间：2008-11-03T22:08:10.293
> 
> 标签：python, uml, diagram

一位同事正在寻找从大量 Python 源代码生成 UML 类图。他主要对继承关系感兴趣，对组合关系稍微感兴趣，不太关心只是 Python 原语的类属性。

源代码非常简单明了，也不是很邪恶——例如，它没有做任何花哨的元类魔法。（它主要来自 Python 1.5.2 的时代，还有一些“现代”2.3ish 的东西。）

推荐的最佳现有解决方案是什么？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2011-09-26T11:36:35.200

您可能听说过[Pylint](http://www.pylint.org/)有助于静态检查 Python 代码。很少有人知道它带有一个名为[Pyreverse](http://www.logilab.org/blogentry/6883)的工具，它可以从它读取的 Python 代码中绘制 UML 图。Pyreverse 使用 Graphviz 作为后端。

它是这样使用的：

```
pyreverse -o png -p yourpackage . 
```

其中`.`也可以是单个文件。

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2008-11-03T23:26:37.467

[Epydoc](http://epydoc.sourceforge.net/)是一个从 Python 源代码生成 API 文档的工具。它还以奇特的方式使用[Graphviz生成 UML 类图。](http://www.graphviz.org/)这是从 Epydoc 本身的源代码生成[的图表示例。](http://epydoc.sourceforge.net/api/epydoc.apidoc.VariableDoc-class.html)

因为 Epydoc 执行对象自省和源解析，它可以收集更多关于静态代码分析器（例如 Doxygen）的信息：它可以检查大量动态生成的类和函数，但也可以使用注释或未分配的字符串作为文档源，例如用于变量和类公共属性。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2011-07-07T19:51:00.583

检查此[python 的七个 uml 工具列表](http://modeling-languages.com/uml-tools/#python)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2008-11-03T22:19:02.690

某些类表现良好的程序可能是图表化的，但在一般情况下，它是做不到的。Python 对象可以在运行时扩展，任何类型的对象都可以分配给任何实例变量。弄清楚一个对象可以包含哪些类的指针（组合）需要全面了解程序的运行时行为。

Python 的元类功能意味着对继承结构的推理还需要全面了解程序的运行时行为。

为了证明这些是不可能的，您争辩说，如果存在这样的 UML 图表，那么您可以使用任意程序，将“暂停”语句转换为会影响 UML 图的语句，并使用 UML 图表来解决停止问题，我们知道这是不可能的。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-11-04T13:12:13.853

值得一提的是[加佛](https://github.com/gaphor/gaphor)。Python 建模/UML 工具。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-11-03T22:15:10.823

如果您使用 Eclipse，也许[是 PyUML](http://sourceforge.net/projects/eclipse-pyuml)。不过没用过。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2011-07-07T06:43:18.260

Umbrello 也是这样做的。在菜单中转到代码 -> 导入项目，然后指向项目的根目录。然后它为你反转代码......

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-11-04T02:37:07.130

[SPE](http://pythonide.blogspot.com) IDE 具有内置的 UML 创建器。只需在 SPE 中打开文件并单击 UML 选项卡。

我不知道它对您的需求有多全面，但它不需要任何额外的下载或配置即可使用。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2011-12-09T12:21:10.140

vipera 是一个小型应用程序设计器，并且包含 uml。您可以在以下位置看到它：

[蝰蛇](https://sourceforge.net/projects/pythonvipera/)

此致。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-11-04T21:53:54.017

Sparx 的[Enterprise Architect](http://www.sparxsystems.com)执行 Python 源代码的往返。他们有免费的限时试用版。

# java - 在哪里可以找到 Java 和/或 C++ 的快速回顾？

> ID：260169
> 
> 赞同：5
> 
> 时间：2008-11-03T22:10:07.713
> 
> 标签：java, c++

我在不到 2 小时的时间内与 Microsoft 进行了简短的初步面试。我被告知他们可能会用 Java 和/或 C++ 提问。在哪里可以找到两种语言的快速概览？我不需要完整的教程，只需要介绍特定于语言的功能和复习语义即可。我也只有 1.5 小时的学习时间，所以......有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-03T22:14:27.377

80 分钟内自学编程？

我会在快速参考卡上打赌：

[C 参考卡](http://users.ece.utexas.edu/~adnan/c-refcard.pdf)、 [Java 参考卡](http://www.dcs.gla.ac.uk/~pd/JavaRefCard/)、 [C++ 参考卡](http://gufsc.das.ufsc.br/tiki-download_file.php?fileId=11)、Google 参考卡。

祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-03T22:12:31.780

我的建议是告诉他们你不懂 C++ 和 Java。在匆忙学习 1 1/2 小时后试图吹嘘它可能会给人留下更糟糕的印象，因为他们会开始探索你知道多少。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-03T22:16:04.207

甚至不要尝试。任何“假”的 C++ 程序员都可以在面试的前 10 秒内被识别出来。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-03T22:12:24.340

一个半小时学一门语言有点快。您可以尝试 Wikipedia，但如果您不了解任何一种语言，您可能希望避免讨论它们。而是专注于你知道的语言。学习一门新语言并不难，但你不应该急于求成，然后听起来你比你知道的更多。他们会很快弄清楚这一点，如果你不承认自己缺乏知识，情况会更糟。我们有人和我的公司一起尝试过，他持续了不到一周的时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-03T23:12:46.450

这可能有点晚了，但是[可以在此处找到用于比较语言和一些功能的 Wikipedia 链接](http://en.wikipedia.org/wiki/Comparison_of_Java_and_C%2B%2B)

# .net - 如何在 Visual Basic 中使用 LINQ to Entities？

> ID：260179
> 
> 赞同：3
> 
> 时间：2008-11-03T22:13:23.917
> 
> 标签：.net, vb.net, linq, entity-framework, linq-to-entities

我创建了一个包含两个项目的 .NET 解决方案：

1.  ToyData（Visual Basic 类库）

2.  ToyOne（Visual Basic WPF 应用程序）

ToyData 项目包含*Toy.edmx*，这是一个从名为 Toy 的数据库生成的 ADO.NET 实体数据模型。

ToyOne 项目包含此*Window1.xaml.vb*文件：

```
1 进口玩具数据
2   
3类窗口1
4   
5 私有子窗口1_Loaded(_
6 ByVal 发送者作为 System.Object, _
7 ByVal e 作为 System.Windows.RoutedEventArgs) _
8 句柄 MyBase.Loaded
9   
10 Dim dc 作为新的玩具实体
11 Label1.Content =（来自 c 作为客户端在 dc.ClientSet _
12 选择 c).First
13  
14 结束子
15  
16 结束类

```

它在自动生成的*Toy.Designer.vb*文件中引发此运行时异常：

```
在配置中找不到指定的命名连接，  
不打算与 EntityClient 提供程序一起使用，或者无效。

```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-04T03:04:02.940

我之前在服务项目和测试项目（使用服务中定义的数据对象）之间看到过这个问题。

* * *

如果您右键单击“new *ToyEntities* ”并转到定义，并继续深入...您将获得一些自动生成的代码，该代码从配置文件中获取连接字符串。

检查 ToyData 项目以获取配置文件。将值复制到另一个项目的 App.Config 文件（它可能尚不存在）中。

# sql-server-2005 - 如何为 SQL Server 2005 证明更多内存的合理性

> ID：260180
> 
> 赞同：1
> 
> 时间：2008-11-03T22:13:25.493
> 
> 标签：sql-server-2005

我们有在 Win2003/64 上运行的 SQL Server 2005，我们努力推动它。我们使用 asp.net 3.5 生成具有几百万条记录的多个表的实时报告，它们会定期超时。

我想将我们的内存从 8GB 增加到 16GB 甚至 32GB，看看这有什么帮助，但我需要在他们花钱之前向铅笔推手证明这一点。有人可以向我指出一些资源，这些资源将帮助我提出我的观点并让我得到一些难以使用的数字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-03T22:17:16.780

首先找出真正的问题以及服务器是否针对您正在运行的查询进行了适当的调整。将钱浪费在 RAM 上以发现您受 I/O 限制是非常可悲的。

收集有关超时原因的数据后，您应该能够轻松说服铅笔使用者。

一些调整/监控链接：

[http://www.brentozar.com/archive/2008/03/sql-server-2005-setup-checklist-part-1-before-the-install/](http://www.brentozar.com/archive/2008/03/sql-server-2005-setup-checklist-part-1-before-the-install/)（查看两篇文章）

[http://www.sql-server-performance.com/](http://www.sql-server-performance.com/)

关于 I/O 具体：

[http://www.microsoft.com/technet/prodtechnol/sql/bestpractice/pdpliobp.mspx](http://www.microsoft.com/technet/prodtechnol/sql/bestpractice/pdpliobp.mspx)

[http://searchsqlserver.techtarget.com/generic/0,295582,sid87_gci1307990,00.html](http://searchsqlserver.techtarget.com/generic/0,295582,sid87_gci1307990,00.html)

[http://www.novicksoftware.com/Articles/sql-server-io-statistics.htm](http://www.novicksoftware.com/Articles/sql-server-io-statistics.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T22:22:32.073

我会从尽可能多地分析和优化查询开始。

我将构建一个测试系统并使用 1GB 的 RAM、2GB 的 RAM、4GB 的 RAM 和最后 8GB 的​​ RAM 运行查询。

我会计算查询在 16 或 32 GB RAM 下的表现（并显示实际时间值和百分比增加 - 他们会理解的）并构建一个漂亮的彩色图表（像这样的铅笔推杆）。

他们不会理解技术方面，但他们会理解百分比增加和漂亮的图表。

但我会再次通过查询尝试先优化它们。

# c - 用于 fortran 程序的 mtrace

> ID：260192
> 
> 赞同：5
> 
> 时间：2008-11-03T22:17:53.737
> 
> 标签：c, gcc, memory-leaks, fortran, mtrace

我正在尝试用于`mtrace`检测 fortran 程序中的内存泄漏。我正在使用 gfortran 编译器。有关 mtrace 的（工作）C 示例，请参阅维基百科条目：[http ://en.wikipedia.org/wiki/Mtrace](http://en.wikipedia.org/wiki/Mtrace)

我尝试了两种方法，即包装 mtrace() 和 muntrace() 并从 fortran 程序中调用它们，以及创建一个直接调用 mtrace() 和 muntrace() 的 C 程序，除了中间的泄漏 fortran 代码。这两种方法都无法检测到内存泄漏，但这里我只介绍后者。

例子.c

```
#include <stdlib.h>
#include <mcheck.h>

extern void leaky_();  // this might be different on your system
    // if it doesn't work, try to run:
    // 1) gfortran leaky.f90 -c
    // 2) nm leaky.o
    // and then change this declaration and its use below

void main() { 
    mtrace();
    leaky_();
    muntrace();
} 
```

泄漏的.f90

```
subroutine leaky()
  real, allocatable, dimension(:) :: tmp
  integer :: error
  allocate (tmp(10), stat=error)
  if (error /= 0) then
    print*, "subroutine leaky could not allocate space for array tmp"
  endif
  tmp = 1
  !of course the actual code makes more...
  print*, ' subroutine leaky run '
  return
end subroutine leaky 
```

我编译：

```
gfortran -g example.c leaky.f90 
```

然后我运行：

```
export MALLOC_TRACE=`pwd`/raw.txt; ./a.out 
```

然后我解析`raw.txt` `mtrace`输出：

```
mtrace a.out raw.txt 
```

并得到：

没有内存泄漏。

有什么我做错了，或者我可以做些什么来`mtrace`找到泄漏的fortran内存分配？我猜 gfortran 正在使用不同的`malloc`调用，它`mtrace`不会跟踪......事实上，正如我在上面所写的，如果我编写一个调用 (wrapped)`mtrace()`和`muntrace()`.

已编辑：我考虑了其他选项（包括此处尚未提及的一些选项），但正在调试的实际代码在 P6/AIX 上运行，因此 Valgrind 将“只是”不方便（它需要在不同的机器上运行），而 Forcheck 将是不方便（它需要在不同的机器上运行）和昂贵的（〜3k $）。目前 mtrace 将是最好的解决方案，如果它有效的话。

再次编辑：我的猜测

> 我猜 gfortran 正在使用不同的`malloc`调用，它`mtrace`不会跟踪......

是正确的。查看可执行文件（使用`nm`或`readelf`）没有任何`malloc()`调用，而是调用`_gfortran_allocate_array`- 可能会调用 malloc）。还有其他想法吗？

再次编辑：我发布了答案，但我不能接受（访问[http://stackoverflow.uservoice.com/pages/general/suggestions/39426](http://stackoverflow.uservoice.com/pages/general/suggestions/39426)并请求该功能，它确实需要 - 不需要获得声誉）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-04T07:46:03.027

我不是 mtrace 方面的专家，所以对此我无能为力。如果您使用受支持的系统，我建议您尝试使用[valgrind工具来查找内存泄漏。](http://valgrind.org/)使用 valgrind 查找内存泄漏就像调用`valgrind --leak-check=full ./a.out`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-04T15:29:29.597

Valgrind 仅适用于 Linux。对于 Windows 产品，请查看 Forcheck。 [http://www.forcheck.nl/features.htm](http://www.forcheck.nl/features.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-11T18:46:39.150

Steve Kargl 给出了答案，简单来说，mtrace 没有发现任何泄漏，因为如果编译器符合标准，则没有任何泄漏：参见[http://gcc.gnu.org/ml/fortran/2008-11 /msg00163.html](http://gcc.gnu.org/ml/fortran/2008-11/msg00163.html)了解详情。

事实上，我不是一个大的 fortran 专家（我主要是 C/C++/java 人），而且我也在使用另一个编译器，它在这种情况下确实会泄漏（我没有提到这一点是为了让问题更容易）。因此，我错误地认为 gfortran 也存在泄漏，但事实并非如此（我检查了顶部）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-02-16T16:03:50.180

我有调试 Fortran 程序的经验，但老实说，我无法真正理解你的问题。我认为这是因为我没有太多与 Fortran 不同的 C/C++ 调试经验。不过，我认为这将使您受益：

使用带有以下编译选项的英特尔编译器将检测到几乎所有内存泄漏、错误地址访问或在运行时使用未初始化的指针/变量。

英特尔：-O0 -debug -traceback -check -ftrapuv

对于 Gfortran，您几乎可以使用这些编译器选项获得上述任何错误。

gfortran：-g -O0 -fbounds-check -Wuninitialized

它将打印子程序调用的回溯，直到发生错误为止。使用两种不同的编译器进行编译总是有帮助的，根据我的经验，在此之后您几乎不会有内存泄漏。

# sql - SQL：让 DATEDIFF 不返回负值

> ID：260195
> 
> 赞同：3
> 
> 时间：2008-11-03T22:18:56.480
> 
> 标签：sql, sql-server-2005, tsql, datediff

我有一个查询，我在其中提取可执行文件的运行时。数据库包含它的开始时间和结束时间。我想获得跑步的总时间。到目前为止，我有：

```
SELECT startTime, endTime,
cast(datediff(hh,starttime,endtime) as varchar)
+':'
+cast(datediff(mi,starttime,endtime)-60*datediff(hh,starttime,endtime) as varchar) AS RUNTIME
FROM applog
WHERE runID = 33871
ORDER BY startTime DESC 
```

当我执行此操作时，我会得到预期值和一些意外值。例如，如果 starttime = 2008-11-02 15:59:59.790 和 endtime = 2008-11-02 19:05:41.857，则运行时间 = 4:-54。在这种情况下，如何在 MS SQL SMS 中获得查询以返回值 3:06？

谢谢。

我选择的 Eoin Campbell 的答案是最能满足我需求的。大卫 B 的也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-03T22:43:41.343

试试这些

假设 2 个声明的日期。

```
declare @start datetime
set @start = '2008-11-02 15:59:59.790'

declare @end datetime
set @end = '2008-11-02 19:05:41.857' 
```

这将返回小时/分钟/秒

```
select 
    (datediff(ss, @start, @end) / 3600), 
    (datediff(ss, @start, @end) / 60) % 60,
    (datediff(ss, @start, @end) % 60) % 60

--returns

----------- ----------- -----------
3           5           42 
```

这是零填充的串联字符串版本

```
select
RIGHT('0' + CONVERT(nvarchar, (datediff(ss, @start, @end) / 3600)), 2) + ':' +
RIGHT('0' + CONVERT(nvarchar, (datediff(ss, @start, @end) / 60) % 60), 2) + ':' +
RIGHT('0' + CONVERT(nvarchar, (datediff(ss, @start, @end) % 60) % 60), 2)

--------
03:05:42 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T22:27:47.007

[这是](http://www.sqlservercurry.com/2008/04/find-hours-minutes-and-seconds-in.html)一种方法：

```
-- Find Hours, Minutes and Seconds in between two datetime
DECLARE @First datetime
DECLARE @Second datetime
SET @First = '04/02/2008 05:23:22'
SET @Second = getdate()

SELECT DATEDIFF(day,@First,@Second)*24 as TotalHours,
DATEDIFF(day,@First,@Second)*24*60 as TotalMinutes,
DATEDIFF(day,@First,@Second)*24*60*60 as TotalSeconds 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-03T22:54:04.803

您需要与对 datediff() 的调用保持一致。它们都应该使用相同的 datepart 参数。

请参阅[MSDN 的 DATEDIFF (Transact-SQL) 文章](http://msdn.microsoft.com/en-us/library/ms189794.aspx)。

在您的示例中，您同时使用“mi”和“hh”并进行连接。

为您的持续时间选择最小的公分母（可能是 ss 或 s）并基于此进行任何数学运算（正如其他答案所说明的那样，但不是真正描述的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-03T22:36:53.137

您应该将计算和表示逻辑分开：

```
DECLARE @applog TABLE
(
  runID int,
  starttime datetime,
  endtime datetime
)

INSERT INTO @applog (runID, starttime, endtime)
SELECT 33871, '2008-11-02 15:59:59.790', '2008-11-02 19:05:41.857'
-------------------
SELECT
  SUBSTRING(convert(varchar(30), DateAdd(mi, duration, 0), 121),
  12, 5) as prettyduration
FROM
(
SELECT starttime, DateDiff(mi, starttime, endtime) as duration
FROM @applog
WHERE runID = 33871
) as sub 
```

如果您需要表示超过 24 小时，您将使用不同的表示逻辑。这只是我能想到的最快的。

# oracle - 有人在使用 OBIEE（以前的 Siebel Analytics）吗？你的经验是什么

> ID：260200
> 
> 赞同：7
> 
> 时间：2008-11-03T22:20:42.467
> 
> 标签：oracle, business-intelligence, siebel, obiee, microstrategy

我们正在为我们的数据仓库选择 BI 堆栈。最佳竞争者是 OBIEE = Oracle BI Enterprise Edition（以前称为 Siebel Analytics）和 Microstrategy。

有人与 OBIEE 合作过吗？得到教训？一般印象？缺点，优点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-11-06T03:17:45.580

在过去的 6 年中，我参与了 20 个 OBIEE 项目。这是一个很好的 ROLAP 产品。它具有最终用户通常喜欢的灵活、直观的 UI。HTML、Javascript 和一些 Flash（图表）用于演示。在 Web 服务器（或应用程序服务器）下运行的演示服务器和工具的核心，分析引擎单独运行。一般来说，该工具会生成高效的 SQL。总体性能通常不错，但取决于源数据结构和尝试的报告类型。

元数据层设计得很好，而且非常灵活（几乎是错误的），尽管它可以被更好地记录下来。该工具希望与传统的星型模式一起使用。它适用于所有主要的 RDBMS。它具有多级缓存，并且在身份验证、功能访问和数据安全方面非常灵活。它并没有做我想做的所有事情，但总的来说，它是一流的应用程序。它的缺点大多是小事，真的没有什么大不了的。我想说从演示的角度来看，它的提示远比它可能的弱。

它不是一个多维数据集工具（尽管它可以从多维数据集获取数据），也不是用于生成大量报告（呈现给最终用户的长列表和大量数据集）的工具，尽管它确实以这种方式使用。如果有的话，它最大的缺陷可能是成本，但它可能与所有其他企业参与者相当。

我对 Microstrategy 了解不多，但一位曾与这两家公司合作过的朋友说，它的前端很棒，后端却很弱。尽管他偏向于开发人员，但他更喜欢 OBIEE。在该工具中构建物理、逻辑和表示元数据确实非常容易。与所有仓库一样，艰苦的工作主要是在 ETL 中，其次是良好的 BA 工作和数据库中的良好性能调优。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-02-10T11:54:45.777

如果您要选择 OBIEE，请选择 11g 版本，它比 10g 有很多优点，高级功能。10g 版本基于 OC4J，而 11g 版本基于 weblogic 服务器。我在管理部分和 BI Answers 部分都工作过，工具似乎都很简单。在管理部分构建存储库或在答案部分创建仪表板和报告。

好吧，谈谈缺陷，我们在安装时遇到了很多问题，非常简单的知识，当然在 Weblogic 服务器和 OBIEE 上都是如此。但如果你有足够好的资源来做这件事，那应该不是问题。另一个主要要求是硬件，对于 OBIEE 11g，专家说 8gb RAM 是最低要求。好吧，我们也使用了 2GB RAM，但它真的很慢。因此，如果您拥有出色的硬件和训练有素的员工，那么它是一个很好的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-03T23:40:35.287

我过去曾使用过它。我真的很喜欢这个架构，但你可以看看这个链接，看看人们如何使用它的更详细的描述：[http ://www.rittmanmead.com/blog/](http://www.rittmanmead.com/blog/)

# javascript - 单击第 n 个元素后，如何操作另一个第 n 个元素？

> ID：260210
> 
> 赞同：2
> 
> 时间：2008-11-03T22:29:10.267
> 
> 标签：javascript, jquery

我正在使用 jQuery，并希望在单击第 n 个链接后定位列表中的第 n 个 <li>。

```
<ul id="targetedArea">
  <li></li>
  <li></li>
  <li></li>
  <li></li>
</ul>
<div id="clickedItems">
  <a></a>
  <a></a>
  <a></a>
  <a></a>
</div> 
```

我可以单独定位它们，但我知道通过传递我单击的 <a> 元素必须有一种更快的方法。

```
$("#clickedItem a:eq(2)").click(function() {
  $("#targetedArea:eq(2)").addClass('active');
  return false;
}); 
```

干杯，
史蒂夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-03T22:44:50.610

像这样的东西怎么样：

```
$('#clickedItems a').click(function() {
// figure out what position this element is in
   var n = $('#clickedItems a').index($(this) );
// update the targetedArea
   $('#targetedArea li:eq('+n+')').html('updated!');
   return false;
}); 
```

`<a>`假设您和元素之间存在 1:1 的关系`<li>`，它将更新适当的`<li>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T22:46:22.463

我知道这不是直接回答你的问题，但也许你让它变得更加困难。

给每个 A 和 LI 元素一个 ID，并制作 ID，以便您可以相互推断它们。只要点击一个A，你立即知道LI的ID并且可以直接引用它。

作为一个副作用，这比任何可能做同样事情的聪明的 jQuery 都更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-03T23:03:55.093

我不知道 jquery 在 mootools 中是否有类似的东西

```
$$('a.clickedItems').addEvent('click', function(e){
  e.preventDefault();
  $('targetedArea').getChildren()[this.getAllPrevious().length].addClass('selected');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-03T23:05:56.713

```
$('#clickedItems a').click(function() {
    // you probably want to turn off the currently active one
    $('#targetedArea li.active').removeClass("active");

    // count the links previous to this one and make the corresponding li active
    $('#targetedArea li:eq(' + $(this).prevAll('a').length + ')').addClass("active");

    // prevent the browser from going to the link
    return false;
}); 
```

# objective-c - STAssertEqualStrings 中的转义序列

> ID：260214
> 
> 赞同：0
> 
> 时间：2008-11-03T22:31:14.257
> 
> 标签：objective-c, cocoa, unit-testing

我正在编写一个针对 Cocoa API 的发现测试，因为我正在增加所有与 Mac 相关的东西。我目前正在尝试发现对字符串进行 URL 编码的最佳方法。使用适用于 Mac 的 Google 工具箱我有一个单元测试，我*故意*导致失败：

```
 NSString* expected = @"ab%%20c";
 NSString* encoded = @"ab c";
 STAssertEqualStrings(expected, encoded, @"Expected [%s] actual [%s]", [expected UTF8String], [encoded UTF8String]); 
```

它抱怨“ab P！= ab c”它在输出中倾倒的垃圾正在扔给我。就好像百分号没有正确转义，但我知道它是。我的主要问题是如何获得格式正确的错误消息，以便我可以确定我处理的是苹果而不是橙子？

***更新** Stackoverflow 正在删除我原来帖子中的垃圾。上述失败是为了说明失败消息的问题。我担心失败消息中显示的垃圾，因为它并没有详细说明实际字符串中的内容。失败说类似“断言失败ab [apple-symbol] c！= ab c”，我在消息中得到一个苹果字符而不是百分号。实际上，编码将是方法调用的返回，我想使用断言失败消息检查字符串的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-04T09:38:51.583

您将反斜杠转义（在编译时应用）与百分号转义（通过`printf`类似函数和方法应用于格式化字符串）混淆了。由于`expected`没有被这样的函数处理，百分号没有转义任何东西。

也就是说，除非 StackOverflow 正在破坏您的消息，否则百分号应该出现在“ab%%c！= ab c”中。

# winforms - HOWTO：在 .NET (WinForms) 中绘制虚线

> ID：260217
> 
> 赞同：14
> 
> 时间：2008-11-03T22:34:37.900
> 
> 标签：winforms

如何在 .NET/WinForms/GDI+ 中绘制虚线？

```
Pen p = new Pen (Color.Black) 
```

只给我实线笔。

我正在尝试使用虚线（或虚线）；似乎无法成功谷歌搜索。

非常感谢对此提供的任何帮助。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-11-03T22:37:22.900

```
p.DashStyle = DashStyle.Dash; 
```

我相信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-03T22:37:57.533

在 Pen 对象上设置 DashStyle 属性。

# delphi - 这是 Delphi 2009 中的错误吗？

> ID：260226
> 
> 赞同：1
> 
> 时间：2008-11-03T22:39:01.900
> 
> 标签：delphi, generics, interface, delphi-2009

它确实看起来像一个错误，但我只有试用版，所以它可能已经修复。

```
ITestInterface = interface
  ['{9445CED8-4DBA-4EDB-9897-60980B438BE4}']
  procedure Foo1;
  procedure Foo2;
end;

TTest = class(TInterfacedObject, ITestInterface)

end; 
```

以上内容将无法编译。但以下是！

```
ITestInterface<t> = interface
  ['{9445CED8-4DBA-4EDB-9897-60980B438BE4}']
  procedure Foo1;
  procedure Foo2;
end;

TTest<T> = class(TInterfacedObject, ITestInterface<T>)

end; 
```

编辑：我刚刚发现如果您尝试实例化 TTest，它将失败。所以有点不一致，但没那么糟糕！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-04T01:24:18.663

是的，一个错误。[http://qc.codegear.com/](http://qc.codegear.com/)是报告错误的地方。

# php - 如何在 Propel 中使用 MySQL 函数

> ID：260229
> 
> 赞同：5
> 
> 时间：2008-11-03T22:41:19.523
> 
> 标签：php, orm, symfony1, criteria, propel

我想选择 1 个月或更新的记录。

查询是：SELECT * FROM foobar WHERE created_at > DATE_SUB(curdate(), INTERVAL 1 MONTH)

在 Symfony 中使用 Propel，我这样做：

> $c = 新标准
> $c->add(FoobarPeer::CREATED_AT, "DATE_SUB(curdate(), INTERVAL 1 MONTH)", Criteria::GREATER_THAN);

Propel 生成的是： SELECT * FROM foobar WHERE created_at > 'DATE_SUB(curdate(), INTERVAL 1 MONTH)' - 换句话说，它将 MySQL 函数放在单引号中，这使它成为一个（无意义的）字符串，我没有记录。

我现在所做的是：

> $c->add(FoobarPeer::CREATED_AT, "created_at > DATE_SUB(curdate(), INTERVAL 1 MONTH)", Criteria::CUSTOM);

但除非必须，否则我不想使用自定义解决方法。除了使用 Criteria::CUSTOM 之外的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-03T22:58:31.190

我认为除了使用 Criteria::CUSTOM 或像这样执行自定义 SQL 查询之外别无选择：

```
$con = Propel::getConnection(DATABASE_NAME);

$sql = "SELECT foobar.* FROM foobar WHERE created_at > DATE_SUB(curdate(), INTERVAL 1 MONTH)";  
$stmt = $con->prepare($sql);
$stmt->execute();

$books = FoobarPeer::populateObjects($stmt); 
```

这是因为 Propel 尝试与 DBMS 无关，通过简单的配置值更改来帮助迁移，因此它没有内置任何 DBMS 特定功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T23:40:49.043

只需将您在其中使用的 mysql 日期代码替换为已经包含该日期的预先计算的 php 变量。

IE

```
$monthAgo = '2008-10-03';
$c = new Criteria
$c->add(FoobarPeer::CREATED_AT, $monthAgo, Criteria::GREATER_THAN); 
```

显然，您应该在 php 中动态计算日期，而不是对其进行硬编码，但您得到了图片。

# .net - 如何使用部分类扩展 ADO.NET Entity Framework 对象？

> ID：260233
> 
> 赞同：5
> 
> 时间：2008-11-03T22:42:24.593
> 
> 标签：.net, vb.net, linq, entity-framework, linq-to-entities

我创建了一个包含 Toy.edmx 的 Visual Basic WPF 应用程序项目，这是一个从名为 Toy 的数据库生成的 ADO.NET 实体数据模型。

它的*Window1.xaml.vb*文件如下所示：

```
1个班级窗口1
2   
3 私有子窗口1_Loaded(_
4 ByVal 发送者作为 System.Object, _
5 ByVal e 作为 System.Windows.RoutedEventArgs) _
6 句柄 MyBase.Loaded
7   
8 Dim dc 作为新的 ToyEntities1
9 Label1.Content =（来自 c 作为客户端在 dc.ClientSet _
10 选择 c).First.FirstName
11  
12 结束子
13  
14 结束类

```

那运行得很好。

但是，如果我添加文件*Client.vb* ...

```
1 部分公开课客户端
2 函数 IsWashington() 作为布尔值
3 Return Me.LastName = "华盛顿"
4 结束功能
5 结束类

```

...并将 WHERE 子句添加到我的*Window1.xaml.vb*查询中...

```
9 Label1.Content =（来自 c 作为客户端在 dc.ClientSet _
10 在哪里 c.IsWashington _
11 选择 c).First.FirstName

```

...然后我得到这个 NotSupportedException：

> LINQ to Entities 无法识别“Boolean IsWashington()”方法，并且该方法无法转换为存储表达式。

如何使用部分类扩展 ADO.NET Entity Framework 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-04T03:34:17.403

这是你想要做的 - 创建一个将过滤器应用于客户端查询的方法。

我不知道 vb.net，所以不要 100% 相信这个徒手代码。

```
Partial Public Class Client
  Public Shared Function IsWashington(query As IQueryable(Of Client)) As IQueryable(Of Client)
    Return query.Where(Function(someClient) someClient.LastName = "Washington")
  End Function
End Class 
```

后来，一些调用代码。

```
IQueryable(Of Client) someQuery = dc.ClientSet.AsQueryable
someQuery = Client.IsWashington(someQuery)

Label1.Content = someQuery.First.FirstName 
```

希望这有效！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T01:39:14.983

问题是您正在编写代码，并期望实体框架将其转换为 SQL ......它不能这样做。就像 LINQ to SQL 不能那样做。

想象一下，如果您的财产从“C:\”驱动器中读取文件……您认为它会如何处理？- 不可能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-03T23:35:56.513

客户端类是什么类型？

您可能需要将名称空间（与定义客户端“实体类”的名称相同）添加到包含“IsWashington”的文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-05T19:33:28.810

您可以通过从视图中提供客户端对象来解决此特定问题。使用 SQL CASE 语句设置位列值：

SELECT col1, col2, col3, LastName CASE LastName WHEN 'Washington' THEN 1 ELSE 0 AS IsWashington FROM Client

如果您使用视图作为客户端实体对象的基础，则 IsWashington 列应与所有其他列一起成为该类的成员。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-20T05:39:34.287

shahkalpesh 是正确的，您需要在扩展类周围添加命名空间以匹配生成的命名空间。

# c - 为什么我的简单 C 程序向标准输出显示垃圾？

> ID：260235
> 
> 赞同：10
> 
> 时间：2008-11-03T22:43:55.353
> 
> 标签：c, file-io

考虑以下简单的 C 程序，它将文件读入缓冲区并将该缓冲区显示到控制台：

```
#include<stdio.h>

main()
{
  FILE *file;
    char *buffer;
    unsigned long fileLen;
    //Open file
    file = fopen("HelloWorld.txt", "rb");
    if (!file)
    {
        fprintf(stderr, "Unable to open file %s", "HelloWorld.txt");
        return;
    }
    //Get file length
    fseek(file, 0, SEEK_END);
    fileLen=ftell(file);
    fseek(file, 0, SEEK_SET);
    //Allocate memory
    buffer=(char *)malloc(fileLen+1);
    if (!buffer)
    {
        fprintf(stderr, "Memory error!");
        fclose(file);
        return;
    }
    //Read file contents into buffer
    fread(buffer, fileLen, 1, file);
    //Send buffer contents to stdout
    printf("%s\n",buffer);    
    fclose(file);
} 
```

它将读取的文件仅包含：

> 你好世界！

输出是：

> 世界你好！²²²²▌▌▌▌▌▌▌↔☺</p>

自从我在 C/C++ 中做任何重要的事情以来已经有一段时间了，但通常我会假设缓冲区被分配的比必要的大，但情况似乎并非如此。

fileLen 最终为 12，这是准确的。

我现在在想，我必须只是错误地显示缓冲区，但我不确定我做错了什么。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-11-03T22:45:52.823

您需要 NUL 终止您的字符串。添加

```
buffer[fileLen] = 0; 
```

在打印之前。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-11-03T23:14:40.737

JesperE 的方法会奏效，但您可能想知道还有另一种处理方法。

即使没有 NUL 终止符，您也可以始终打印已知长度的字符串，方法是提供长度 to`printf`作为字符串字段的精度：

```
printf("%.*s\n", fileLen, buffer); 
```

这允许您在不修改缓冲区的情况下打印字符串。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-11-03T23:13:40.643

JesperE 在您的示例中关于 nul 终止问题是正确的，我只是补充一点，如果您正在处理文本文件，最好使用 fgets() 或类似的东西，因为这将正确处理跨不同平台的换行符序列并且总是为您终止字符串。如果您真的在使用二进制数据，那么您不想使用 printf() 来输出数据，因为 printf 函数需要字符串，并且数据中的 nul 字节会导致输出截断。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-01-16T03:06:35.710

您通过查找文件末尾然后使用来确定文件大小的方法`ftell()`是错误的：

*   如果它是一个文本文件，没有`"b"`在`fopen()`调用的第二个参数中打开，那么`ftell()`可能不会告诉您可以从文件中读取的字符数。例如，windows 使用两个字节作为行尾，但读取时，它是一个`char`。事实上，`ftell()`在文本模式下打开的流的返回值仅在调用时有用`fseek()`，而不是确定文件大小。
*   如果它是一个二进制文件，`"b"`在第二个参数 to 中打开`fopen()`，那么 C 标准有这样的说法：

    > 将文件位置指示符设置为文件结尾，与 一样`fseek(file, 0, SEEK_END)`，对于二进制流（因为可能出现尾随空字符）或任何具有状态相关编码但不能确保在初始移位状态结束的流具有未定义的行为。

所以，你所做的不一定能在标准 C 中工作。你最好的选择是使用`fread()`阅读，如果你碰巧需要更多内存，使用`realloc()`. 您的系统可能会提供`mmap()`或保证将文件位置指示符设置为二进制流的文件结尾——但依赖这些是不可移植的。

另请参阅此 C-FAQ：[文本和二进制 I/O 有什么区别？](http://c-faq.com/stdio/textvsbinary.html).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-16T02:56:06.120

您可以使用`calloc`而不是`malloc`分配已初始化的内存。`calloc`承担额外的论点。它对于分配数组很有用；的第一个参数`calloc`表示要为其分配内存的数组中元素的数量，第二个参数是每个元素的大小。由于 a 的大小`char`始终为 1，我们可以将`1`其作为第二个参数传递：

```
 buffer = calloc (fileLen + 1, 1); 
```

在 C 中，不需要强制转换`malloc`or的返回值`calloc`。以上将确保即使文件读取因任何原因提前结束，字符串也会以空值终止。`calloc`确实需要更长的时间，`malloc`因为它必须在给你之前将你要求的所有内存清零。

# php - MySQL 哈希函数实现

> ID：260236
> 
> 赞同：15
> 
> 时间：2008-11-03T22:43:59.190
> 
> 标签：php, mysql, hash, passwords

我知道 php 有 md5()、sha1() 和 hash() 函数，但我想使用 MySQL PASSWORD() 函数创建一个散列。到目前为止，我能想到的唯一方法就是查询服务器，但我想要一个函数（最好在 php 或 Perl 中），它可以在不查询 MySQL 的情况下做同样的事情。

例如：

MySQL 哈希 -> 464bb2cb3cf18b66

MySQL5 哈希 -> *01D01F5CA7CA8BA771E03F4AC55EC73C11EFA229

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-10-09T13:45:13.430

我最初在自己搜索两个 MySQL 密码散列函数的 PHP 实现时偶然发现了这个问题。我找不到任何实现，所以我从 MySQL 源代码 (sql/password.c) 中改编了自己的实现。以下内容在 PHP 5.2 中经过测试和工作：

```
// The following is free for any use provided credit is given where due.
// This code comes with NO WARRANTY of any kind, including any implied warranty.

/**
 * MySQL "OLD_PASSWORD()" AKA MySQL323 HASH FUNCTION
 * This is the password hashing function used in MySQL prior to version 4.1.1
 * By Defines Fineout 10/9/2009 9:12:16 AM
**/
function mysql_old_password_hash($input, $hex = true)
{
  $nr = 1345345333; $add = 7; $nr2 = 0x12345671; $tmp = null;
  $inlen = strlen($input);
  for ($i = 0; $i < $inlen; $i++) {
    $byte = substr($input, $i, 1);
    if ($byte == ' ' || $byte == "\t") continue;
    $tmp = ord($byte);
    $nr ^= ((($nr & 63) + $add) * $tmp) + (($nr << 8) & 0xFFFFFFFF);
    $nr2 += (($nr2 << 8) & 0xFFFFFFFF) ^ $nr;
    $add += $tmp;
  }
  $out_a = $nr & ((1 << 31) - 1);
  $out_b = $nr2 & ((1 << 31) - 1);
  $output = sprintf("%08x%08x", $out_a, $out_b);
  if ($hex) return $output;
  return hex_hash_to_bin($output);
} //END function mysql_old_password_hash

/**
 * MySQL "PASSWORD()" AKA MySQLSHA1 HASH FUNCTION
 * This is the password hashing function used in MySQL since version 4.1.1
 * By Defines Fineout 10/9/2009 9:36:20 AM
**/
function mysql_password_hash($input, $hex = true)
{
  $sha1_stage1 = sha1($input, true);
  $output = sha1($sha1_stage1, !$hex);
  return $output;
} //END function mysql_password_hash

/**
 * Computes each hexidecimal pair into the corresponding binary octet.
 * Similar to mysql hex2octet function.
**/
function hex_hash_to_bin($hex)
{
  $bin = "";
  $len = strlen($hex);
  for ($i = 0; $i < $len; $i += 2) {
    $byte_hex = substr($hex, $i, 2);
    $byte_dec = hexdec($byte_hex);
    $byte_char = chr($byte_dec);
    $bin .= $byte_char;
  }
  return $bin;
} //END function hex_hash_to_bin 
```

希望其他人也会发现这很有用:)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-11-03T23:06:26.790

如果您对这个函数的算法感兴趣，请下载源代码并查看文件 sql/password.c，或查看[此](http://www.sfr-fresh.com/unix/privat/tpop3d-1.5.5.tar.gz:a/tpop3d-1.5.5/password.c)实现。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-12-26T10:00:53.180

是的，为时已晚，但我刚刚在该页面上提出了这个实现：http: [//dev.mysql.com/doc/refman/5.1/en/password-hashing.html](http://dev.mysql.com/doc/refman/5.1/en/password-hashing.html)

这是与mysql密码等效的php函数；

```
function mysql_41_password($in) {
    $p = sha1($in, true);
    $p = sha1($p);
    return '*'. strtoupper($p);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-03T23:04:53.050

为什么要使用mysql password() 函数？甚至 Mysql 文档也建议不要这样做：

[http://dev.mysql.com/doc/refman/5.0/en/encryption-functions.html#function_password](http://dev.mysql.com/doc/refman/5.0/en/encryption-functions.html#function_password)

> MySQL Server 中的身份验证系统使用 PASSWORD() 函数；你不应该在你自己的应用程序中使用它

例如，您可以使用 md5()，它几乎存在于所有编程语言中，包括 php 和 perl。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-02-09T09:58:50.177

坏男孩用 sha1sum 在 bash 中做到这一点；）

```
PHRASE="password"; P1=`echo -n "${PHRASE}"|sha1sum`; P2="*`echo -en $(echo -n ${P1%% *}|sed -E 's/([0-9a-f]{2})/\\\x\1/g')|sha1sum -b`"; PASS="${P2%% *}"; echo "${PASS^^}" 
```

OT，但无论如何... :)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-04-07T05:23:02.697

基于上面的 PHP 实现，这是一个有效的 Perl 示例。

```
use Digest::SHA1 qw(sha1 sha1_hex);
sub password { "*".uc(sha1_hex(sha1($_[0]))) } 
```

密码函数返回与 MySQL5 PASSWORD() 函数相同。

在回答“为什么有人要这样做？”时，我使用它来生成不包含纯文本密码的 SQL“CREATE USER”语句。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-22T16:19:04.690

基于 PHP 示例的 old_password() 的 Perl 5 实现。

```
sub old_hash_password {
    my ($password) = @_;

    my $nr = 1345345333;
    my $nr2 = 0x12345671;
    my $add = 7;

    for (my $i = 0; $i < length($password); $i++) {
        my $byte = substr($password, $i, 1);

        next if ($byte eq ' ' || $byte eq "\t");

        my $ord_b = ord($byte);
        $nr ^= ((($nr & 63) + $add) * $ord_b) + (($nr << 8) & 0xFFFFFFFF);
        $nr2 += (($nr2 << 8) & 0xFFFFFFFF) ^ $nr;
        $add += $ord_b;
    }

    my $out_a = $nr & ((1 << 31) - 1);
    my $out_b = $nr2 & ((1 << 31) - 1);

    return sprintf("%08x%08x", $out_a, $out_b);
} 
```

# java - 重写 HttpServletRequest 中的 getContextPath（用于 URL 重写）

> ID：260252
> 
> 赞同：3
> 
> 时间：2008-11-03T22:52:16.943
> 
> 标签：java, jakarta-ee, url-rewriting, servlet-filters

我有一个网络应用程序，我想扩展它以支持具有新 URL 的多种语言。例如，www.example.com/home.do 保持英语，但 www.example.com/es/home.do 是西班牙语。我的第一个想法是创建一个过滤器，它将 /es/home.do 之类的传入 url 重写为 /home.do （并在请求中设置区域设置）；这很好用。Filter 使用 HttpServletRequestWrapper 包装 ServletRequest，该 HttpServletRequestWrapper 覆盖 getContextPath() 以返回语言：

```
class FakeContextRequest extends HttpServletRequestWrapper {

  private String context = "";
  FakeContextRequest(HttpServletRequest request, String context) {
    super(request);
    // snip some validation code
    this.context = request.getContextPath() + context;
  }
  @Override
  public String getContextPath() {
    return this.context;
  }
} 
```

我的过滤器转发到相应的请求，如下所示：

```
FakeContextRequest fr = new FakeContextRequest(request, lang);
fr.getRequestDispatcher(newResourceName).forward(fr, response); 
```

我的问题是下一个 servlet 没有正确转发。下一个 servlet（通常是 Struts ActionServlet）转发到 JSP（通常使用 Struts Tiles）；当我到达 JSP 时，HttpServletRequest 已经被包装了好几次，并且有问题的对象报告上下文为空（根上下文，这是实际部署应用程序的位置）。

我希望重写上下文，以便我所有已经存在的上下文感知代码可以自动将语言插入到编写的 URL 中。这可能吗？

**编辑：**我通过使用包装的 HttpServletResponse 而不是包装的 HttpServletRequest 解决了我的问题；我在 response.encodeURL() 方法中重写了 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-03T23:50:25.563

我不确定覆盖`getContextPath()`是否足以解决您的问题。如果 Struts 在幕后调用`ServletContext.getContextPath()`，或者使用`getRequestURI()`等怎么办？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-03T23:12:11.427

据我所知，执行此操作的常规方法是使用接受语言 HTTP 标头。表示语言是一种表示细节，不应由一组 URL 表示以在应用程序中导航。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-13T20:10:28.023

我通过在 response.encodeURL() 和朋友中进行 URL 重写解决了我的问题。请求对象在整个请求链中被包装和替换，但响应对象似乎不受干扰。这非常可靠。

# delphi - 使用泛型时如何处理 Delphi 简单类型？

> ID：260253
> 
> 赞同：4
> 
> 时间：2008-11-03T22:52:38.270
> 
> 标签：delphi, generics

一个小例子

```
TTest<T> = class
private
  f : T;
public
  function ToString : string;
end; 
```

如果是一个对象，那么这应该工作

```
TTest<T>.ToString;
begin
  Result := f.ToString;
end; 
```

但是当是整数时会发生什么？这在.net中没问题。当然。

我知道它行不通，但我如何编写代码以使用对象和简单类型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-03T23:40:14.040

Delphi 不允许您在第二个示例中执行您想要执行的操作的三个原因 - 对无约束类型参数类型的值调用 ToString 方法（或者至少这是我认为您试图显示的，因为 TObject.ToString 是一个实例方法，而不是类方法，所以 T.ToString 即使对 TObject 也不起作用）。

1.  Delphi 没有根深蒂固的类型系统，很少有所有类型通用的操作。这些操作——复制、赋值、创建位置（字段、局部变量、参数、数组）——是唯一保证对类型参数的所有可能值可用的操作。

2.  从 1 开始，为什么操作仅限于这些？为什么不允许泛型类中的操作，而只在实例化时给出错误？嗯，第一部分原因是该设计最初旨在最大限度地与 .NET 和 dccil 兼容，因此 .NET 泛型不允许的东西在 Win32 泛型设计中没有显着的可供性。

3.  设计的第二个理由是仅在实例化时检查是有问题的。使用这种方法的最著名的参数多态性实现是 C++ 模板，它还以其神秘的错误消息而闻名，例如，当您尝试将错误类型的迭代器传递给算法时，会收到关于未找到重载运算符的奇怪抱怨. 多态性越深，问题越严重。事实上，很糟糕的是，C++ 本身正在以 C++ 0x Concepts 的形式来纠正这个错误。

希望您现在明白为什么不能使用通过约束不能保证可用的操作。但是，您可以相对轻松地摆脱这种限制，方法是按照 Gamecat 的建议，以方法引用或接口实现的形式提供操作。

将来，Win32 的 Delphi 中的泛型可能会沿着类似的路线扩展到 C++ 0x 概念或 Haskell 类型类，这样类型参数可能会被限制为具有某些可用的方法、函数和运算符。如果它遵循类型类路线，那么类型推断也可能以这种方式进行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-03T22:59:40.907

最后一个例子不起作用。您需要添加约束才能使用方法。在这种情况下， TObject 就足够了：

```
TTest<T: TObject>.ToString;
begin
  Result := T.ToString;
end; 
```

您可以将简单类型与无限制的泛型一起使用，但您的使用非常有限。因为唯一有效的操作是赋值和比较（相等和不相等）。

在 Delphi 中，简单类型没有类，所以它们没有方法。但您可以执行以下操作：

```
type
  TToString<T> = reference to function(const AValue: T): string;
  TGenContainer<T> = class
  private
    FValue: T;
    FToString : TToString<T>;
  public
    constructor Create(const AToString: TToString<T>);

    function ToString: string;

    property Value: T read FValue write FValue;
  end;

constructor TGenContainer<T>.Create(const AToString: TToString<T>);
begin
  FToString := AToString;
end;

function TGenContainer<T>.ToString: string;
begin
  Result := FToString(FValue);
end;

procedure TForm2.Button1Click(Sender: TObject);
var
  gen : TGenContainer<Integer>;
begin
  gen := TGenContainer<Integer>.Create(
    function(const AValue: Integer): string
    begin
      Result := IntToStr(AValue);
    end);
  try
    gen.Value := 17;
    Memo1.Lines.Add(gen.ToString);
  finally
    gen.Free;
  end;
end; 
```

这工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-03T23:03:41.443

我想我可以将我的简单类型包装在对象中，并覆盖 ToString 函数，但这确实违背了泛型的目的。

# c++ - 将 URL 编码为安全的文件名字符串

> ID：260254
> 
> 赞同：3
> 
> 时间：2008-11-03T22:53:15.957
> 
> 标签：c++, url, caching, hash, filenames

我正在编写一个简单的 C++ 类，我想在其中缓存从网络下载的图像的图片缩略图版本。因此，我想使用一个哈希函数，它接收 URL 字符串并输出一个适合作为文件名的唯一字符串。

有没有一种简单的方法可以做到这一点而无需自己重新编写函数？我四处寻找一个简单的图书馆，但找不到任何东西。当然，这是一个普遍的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-03T23:22:17.880

在类似的情况下，我将密钥的字节编码为十六进制（在您的情况下，密钥是 URL 的哈希）。这使大小翻了一番，但很简单，避免了文件系统破坏字符时可能出现的任何问题，并且按照与原始键相同的顺序进行排序。

（最初我尝试了一种稍微花哨、更有效的编码，我认为它可以避免任何有问题的字符，但 OS X 的文件系统结果比我想象的还要疯狂。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T22:57:42.110

一种更简单的方法是用下划线替换不是字符或数字的所有内容。

编辑：这是 C 中的一个幼稚实现：

```
#include <cctype>

char *safe_url(const char *str) {
    char *safe = strdup(str);
    for (int i = 0; i < strlen(str); i++) {
        if (isalpha(str[i]))
            safe[i] = str[i];
        else
            safe[i] = '_';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-03T23:00:16.240

怎么样[`boost::hash`](http://www.boost.org/doc/libs/1_37_0/doc/html/hash.html)？

# java - 有人使用 OSGi 的 OBR 吗？

> ID：260256
> 
> 赞同：8
> 
> 时间：2008-11-03T22:54:47.920
> 
> 标签：java, osgi, obr

有人使用 OSGi Bundle Repository 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-29T09:25:29.423

我在 apache felix 中尝试过，我认为它很棒。你可以将你的 osgi 容器指向多个 obrs，当你安装一个包时，容器会自动安装所有需要的依赖项。

这就像应用程序服务器的*apt-get install*。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-05T23:23:13.697

我正在使用它！

当您开发 osgi 包并且目标平台不包含您的包所依赖的库（jar/bundle）时，需要将其添加到目标平台。您可以重新打包您的 jar 以使其成为 osgi 包，或者只从 OBR 下载该包。

Eclipse 还提供了一个 OBR 调用[Orbit](http://www.eclipse.org/orbit/)，而 springsource 一个称为[Enterprise Bundle Repository](http://www.springsource.com/repository/app/)。

# visual-studio-2008 - 好的开发显卡和一般的游戏显卡有区别吗？

> ID：260258
> 
> 赞同：1
> 
> 时间：2008-11-03T22:55:24.627
> 
> 标签：visual-studio-2008, hardware, video-card

作为参考，这适用于 Visual Studio 2008，其中有相当数量的 WinForms 与 VS 设计器一起工作。

在相同的价格范围内，您是否会在开发设备中寻找某些规格，而不是在游戏机中获得什么规格？

编辑：我问的原因是在我的笔记本电脑上我可以正常运行中低端游戏，有时在应用程序之间切换时仍有相当长的时间重绘。（我在浏览器上平均打开大约 20 个标签，并且喜欢一次打开 10-15 个应用程序），并且与 VS 设计器一起处理诸如 TableLayoutPanel 之类的事情需要 10-15 秒进行更改等等。我想要一个非常流畅的体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-03T22:58:50.097

您今天可以购买的任何新视频卡都足以用于非 3D 软件开发。事实上，无论您的系统附带什么集成视频都可以。唯一的例外是多显示器支持，在这种情况下，您需要额外购买 50 美元的显卡，因为大多数（全部？）主板只有一个显示器输出。

编辑：作为对编辑的回应，您所描述的延迟听起来像是您的机器内存不足并正在交换到磁盘，而不是您受到视频卡的限制。如果您正在运行 vs2008 以及 20 个其他应用程序，您的系统中至少需要 2-3GB 的内存。这大约是最大值。如果您运行的是 32 位操作系统，则可以安装。如果您想要更多，则需要使用 64 位操作系统，并且需要确保所有硬件都有 64 位驱动程序。也很少有笔记本电脑支持超过 4GB 的 RAM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T23:01:20.030

实际的开发过程（为您使用 VS2008）对任何现代显卡都没有真正的负担。市场上几乎所有的卡都支持 2D 卡——您不会遇到任何视频卡性能成为瓶颈的情况。系统内存和处理器性能是您所关心的。

一个有能力的游戏机几乎肯定是一个有能力的开发平台，而一个有能力的开发平台可能不是一个很好的游戏机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-03T23:20:08.383

听起来您可能会遇到其他问题，例如内存问题和交换问题。多年来，显卡的速度已经足以满足 Windows 的 2D 要求。重绘窗口的任何延迟都将是操作系统，而不是显卡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-03T22:59:47.193

任何 100 美元的显卡都可以很好地用于软件开发，尽管这可能是您在 Vista 上看到 Aero 图形效果所需要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-03T23:16:04.103

显卡不是一个重要因素......我宁愿投资CPU和快速硬盘而不是显卡......至少双核cpu时钟@ 3GHz和7200RPM驱动器......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-04T00:30:30.537

快速磁盘会有所作为，还有大量的 RAM（尽可能多）。笔记本电脑磁盘不是那么快，但如果你感觉很潮，你可以考虑使用 SSD。否则，具有快速磁盘（如 WD Velociraptors 或 10K 或 15K SAS/SCSI 单元）的台式机将比使用笔记本电脑实际实现的速度要快得多。2D 的显卡性能不是问题。任何现代视频卡都将具有足够快的 2-D。

如果您使用的是 32 位操作系统，超过 4GB（实际上略小于 4GB）是一种浪费，因为操作系统不会使用它。如果您想使用 64 位，您可以在机器上放置更多 RAM。我没有尝试过，但是这个[站点 (www.windows2008workstation.com)](http://www.win2008workstation.com/)描述了使用 Windows 2008 Server 作为桌面操作系统。如果您感觉很兴奋，这会为您提供一种更精简、更简陋的 Vista 版本，它将使用 Vista 驱动程序，但不会像 Vista 那样被踩在脚下。

它还带有一个内置的管理程序，并支持当前 CPU 的虚拟化功能（嵌套页表等）。像 Sun Ultra 20M2 或 HP XW4550（即基于第二代 Opteron），具有 4-8GB 的​​ RAM 和几个快速磁盘将尽可能快，并且可以快速运行 VM。它们也没有*那么*贵——即使购买品牌内存，它们也并不比高规格的游戏 PC 贵。

# excel - 从网页导入数据到excel

> ID：260260
> 
> 赞同：0
> 
> 时间：2008-11-03T22:57:17.790
> 
> 标签：excel

我需要一个宏，它将数据输入网页搜索字段，然后将结果复制到 Excel。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-03T23:13:20.973

这只是一个简单的“文件打开”。不需要宏。

Excel 可以直接打开 URL。如果 URL 包含任何表格，这些表格将被适当地格式化。

尝试这个：

*   运行 Excel
*   文件 | 打开
*   键入`http://finance.yahoo.com/q?s=MSFT`作为文件名
*   忽略警告

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T04:39:57.880

这就是我将如何处理它

1.  找出 URL 结构，即手动搜索并查看答案的 URL。如果它包含搜索词，例如 ?c=123456，则说明您在做生意。
2.  开始录制宏
3.  选择数据、导入外部数据、WebQuery，然后粘贴步骤 1 中的 URL，以便将结果粘贴到工作表中
4.  停止录制，并编辑 VBA 代码，以便您可以 (a) 以编程方式更改搜索编号 (b) 刷新查询 (c) 捕获您想要的值并将它们放在某处

这确实需要一些 VBA 技能，但只要 URL 包含搜索词就不会太难。如果没有（例如，如果它作为 Web 表单发送），您仍然可以使用上面的方法，因为 Excel 可以处理基于表单的 Web 查询，但有点困难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-03T23:24:14.693

如果在您的问题中使用 excel 不是一个限制因素.. 即您可以使用其他软件来完成工作.. 您应该查看 Google 电子表格.. 它对网络更加友好...具有可以检索某些页面的功能..或者 google 一些东西然后把结果放在你的表中.. [http://spreadsheets.google.com/](http://spreadsheets.google.com/)
之后你可以将文件保存为 .xls 格式并将其带到任何其他平台

# frameworks - 桌面软件开发选项

> ID：260265
> 
> 赞同：6
> 
> 时间：2008-11-03T22:58:57.227
> 
> 标签：frameworks, desktop

来自一个困在网络世界的程序员......

目前用于桌面应用程序开发的最常见的桌面开发“框架”有哪些？

1.  为 Windows 和 OS X 编写桌面软件是否现实？

2.  使用相同的基本代码为具有部分 Web UI 和桌面 UI 的应用程序编写业务/数据层是否现实？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-03T23:01:33.540

1.  是的。您可以将 Java、Python/Ruby 等与跨平台 UI 框架、AIR 等一起使用。

2.  是的，这是现实的。在客户端/服务器模型上构建它，大多数代码都适合桌面或 Web UI 模型。

如果您使用 .NET 根目录，则可以将 Silverlight 用于 Web 应用程序，将 .NET 服务器代码用于后端，甚至可以使用 Mono 来为 OS X 进行开发。

如果你走 Java 路线，Java 在浏览器中运行，JavaFX 即将推出，它是一个类似 Flash 的小型浏览器版本。它几乎可以在所有操作系统上运行，并且可以很好地处理后端。

Flex/ AIR 提供了一种为 OS X、Windows 和 Linux 开发桌面和基于 Web 的应用程序的绝佳方式，但您需要另一种语言作为后端。.NET、Java、PHP 等都可以作为后端正常工作。

**编辑**
应 MrJeepster 的要求，以下是有关连接 AIR 前端和 .NET 后端的详细信息：

您可以通过两种方式将 AIR 连接到 .NET 后端：DIY 方式和远程处理方式。

DIY 方式将涉及定义您自己的（可能是 XML）数据格式并使用低级 HTTP 请求对象与 HTTP 服务器进行通信，甚至使用较低级别的套接字类与其他一些服务器进行通信。

由于好人编写了一系列免费的远程处理包，因此远程处理方式更加容易：

[http://www.adobe.com/devnet/flashremoting/articles/intro_flremoting_net.html](http://www.adobe.com/devnet/flashremoting/articles/intro_flremoting_net.html)
[http://www.themidnightcoders.com/flashorb/gettingStarted.htm](http://www.themidnightcoders.com/flashorb/gettingStarted.htm)
[http://www.fluorinefx.com/](http://www.fluorinefx.com/)

远程处理涉及在客户端和服务器之间共享对象。因此，您在 AIR 客户端上创建一些对象，让远程处理框架对其进行序列化，将其传输到服务器并将其反序列化为 .NET 对象。然后服务器对其进行处理并通过相同的路由将其或新对象再次发送回来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-03T23:13:14.840

虽然跨平台桌面开发是可能的，但这并不容易。至少，您必须在每个受支持的平台上进行测试。而且你必须做出艰难的妥协：你是让你的软件在每个平台上看起来都完全相同（因此在任何地方看起来都不像原生应用程序），还是你使用原生控件并在各种平台上处理不同的对齐方式等？除了外表，你还使用什么行为？例如，UNIX 软件区分大小写，但 Windows 软件不区分大小写。您是在两个平台上选择一个排序顺序，还是在每个平台上进行不同的排序？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-03T23:03:10.573

1.  是的，想想[QT](http://en.wikipedia.org/wiki/Qt_(toolkit))
2.  是的，想想[SOA](http://en.wikipedia.org/wiki/Service-oriented_architecture)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-03T23:03:16.983

Qt（在 C++ 或 python 上）在 mac/win/linux 之间是完全可移植的。它还包括 QtWebKit，因此很容易在您的应用程序中嵌入一个真正的现代浏览器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-03T23:04:35.920

1.  如果您正在寻找跨平台，我可能会建议 Qt。几年前我们在这里使用过它。它的许可证是每个开发人员的，而且价格昂贵（至少当时是这样）。

2.  当然，您可以使用网络服务。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-03T23:15:33.213

使用 .NET 和[mono](http://mono-project.com)是一个不错的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-04T20:49:55.363

我们已经使用 Java 构建了许多多层、跨平台的应用程序。在桌面 Swing 上对我们来说真的很有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-05T12:18:25.503

我们正在使用 Java (Swing) 自己构建一个小型跨平台应用程序，它真的很棒。至少到目前为止。:D

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-18T20:54:46.607

我使用 REALbasic 为 Mac OS X 和 Windows 创建各种各样的桌面应用程序。它工作得很好。

但是，它不适合创建单独的层以与桌面/Web UI 共享。

# html - 在 Actionscript 3 项目中显示 HTML

> ID：260270
> 
> 赞同：8
> 
> 时间：2008-11-03T23:01:12.370
> 
> 标签：html, flash, actionscript-3, xhtml

伙计们，

我正在从 Drupal 后端提取我所有的 Flash（纯 AS3 项目，而不是 Flash CS3）内容以用于 SEO。这很好用，除了 TextField 对象中内置的 HTML 呈现还有很多不足之处。任何人都可以推荐任何允许我显示 HTML 元素的库吗？在这个阶段，欢迎商业或开源库。

谢谢，马库斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-05T15:22:05.353

您可能还想尝试： [http ://code.google.com/p/htmlwrapper/](http://code.google.com/p/htmlwrapper/)

我没有使用它，但它看起来像你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-01T03:03:37.123

AIR 引入了一个`DisplayObject`名为`flash.html.HTMLLoader`. 它由 WebKit 提供支持，因此如果您的内容与 Safari 兼容，它将与`HTMLLoader`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-10T09:31:43.860

有一个非常好的可用的[Flex HTML 组件。](http://drumbeatinsight.com/htmlcomponent)它使用浏览器来呈现内容。

然而它不是免费的。您将需要投资 149 美元。

[您可以在此处](http://drumbeatinsight.com/examples/htmlcomponent/iframe/HTMLFrameInApplication.html)测试此组件的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-07-07T07:55:19.693

2Synthmax [http://as3htmlparser.sourceforge.net/](http://as3htmlparser.sourceforge.net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-14T00:21:16.957

只要您的项目是在 Web 浏览器中查看的，最好的办法就是使用 JavaScript 工具（例如[JQery 的 ThickBox）将 HTML 内容覆盖在 Flash 内容上方的 DIV 或 iFrame 中](http://jquery.com/demo/thickbox/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-08T20:35:04.253

您的 swf 是否需要填充所有网页？为什么不让您的 swf 调用一些将填充 DIV 或其他内容的 javascript。或者只是让 PHP 生成它。我想我需要更多信息你想要做什么......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-04T17:55:39.740

尝试使用这个 Flex iFrame，它是在它的 HTML iframe 对应物之后建模的。我还没有在我的 Flex 应用程序中使用这个解决方案，但它看起来很有希望。

[http://deitte.com/archives/2006/08/finally_updated.htm](http://deitte.com/archives/2006/08/finally_updated.htm)

但是，请注意，同一作者现在建议**不要**使用它。

与往常一样，您的里程可能会有所不同，Randy Stegbauer

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-09T00:06:48.107

你可以试试这个[AS3 HTML Parser Library](http://as3htmlparser.sourceforge.net/) ... 非常适合我的需要，它目前支持大多数元素（包括 img、span、div）。

# python - 搜索文件最后 X 行的最有效方法？

> ID：260273
> 
> 赞同：32
> 
> 时间：2008-11-03T23:01:50.200
> 
> 标签：python, file, search

我有一个文件，但我不知道它会有多大（它可能很大，但大小会有很大差异）。我想搜索最后 10 行左右，看看它们是否与字符串匹配。我需要尽可能快速有效地执行此操作，并且想知道是否有比以下更好的方法：

```
s = "foo"
last_bit = fileObj.readlines()[-10:]
for line in last_bit:
    if line == s:
        print "FOUND" 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-11-03T23:40:34.803

```
# Tail
from __future__ import with_statement

find_str = "FIREFOX"                    # String to find
fname = "g:/autoIt/ActiveWin.log_2"     # File to check

with open(fname, "r") as f:
    f.seek (0, 2)           # Seek @ EOF
    fsize = f.tell()        # Get Size
    f.seek (max (fsize-1024, 0), 0) # Set pos @ last n chars
    lines = f.readlines()       # Read to end

lines = lines[-10:]    # Get last 10 lines

# This returns True if any line is exactly find_str + "\n"
print find_str + "\n" in lines

# If you're searching for a substring
for line in lines:
    if find_str in line:
        print True
        break 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2008-11-04T00:19:26.393

这是一个类似于 MizardX 的答案，但没有明显的问题，即在添加块时重复重新扫描工作字符串以查找换行符，在最坏的情况下花费二次时间。

与 Active State 解决方案（也似乎是二次的）相比，这不会在给定一个空文件的情况下崩溃，并且每个块读取一次而不是两次。

与产卵“尾巴”相比，这是自给自足的。（但如果你有'尾巴'是最好的。）

与从末尾抓取几 kB 并希望它足够的情况相比，这适用于任何行长。

```
import os

def reversed_lines(file):
    "Generate the lines of file in reverse order."
    part = ''
    for block in reversed_blocks(file):
        for c in reversed(block):
            if c == '\n' and part:
                yield part[::-1]
                part = ''
            part += c
    if part: yield part[::-1]

def reversed_blocks(file, blocksize=4096):
    "Generate blocks of file's contents in reverse order."
    file.seek(0, os.SEEK_END)
    here = file.tell()
    while 0 < here:
        delta = min(blocksize, here)
        here -= delta
        file.seek(here, os.SEEK_SET)
        yield file.read(delta) 
```

按要求使用它：

```
from itertools import islice

def check_last_10_lines(file, key):
    for line in islice(reversed_lines(file), 10):
        if line.rstrip('\n') == key:
            print 'FOUND'
            break 
```

**编辑：**在 head() 中将 map() 更改为 itertools.imap()。**编辑 2：**简化的 reversed_blocks()。**编辑 3：**避免重新扫描尾部换行符。**编辑 4：**重写 reversed_lines() 因为 str.splitlines() 忽略了最终的 '\n'，正如 BrianB 注意到的（谢谢）。

请注意，在非常旧的 Python 版本中，此处循环中的字符串连接将花费二次时间。至少最近几年的 CPython 自动避免了这个问题。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-11-03T23:21:29.723

我认为阅读文件的最后 2 KB 左右应该确保你得到 10 行，并且不应该占用太多资源。

```
file_handle = open("somefile")
file_size = file_handle.tell()
file_handle.seek(max(file_size - 2*1024, 0))

# this will get rid of trailing newlines, unlike readlines()
last_10 = file_handle.read().splitlines()[-10:]

assert len(last_10) == 10, "Only read %d lines" % len(last_10) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-11-04T00:04:13.990

如果您在 POSIX 系统上运行 Python，则可以使用 'tail -10' 检索最后几行。这可能比编写自己的 Python 代码来获取最后 10 行要快。不要直接打开文件，而是从命令“tail -10 filename”打开管道。但是，如果您确定日志输出（例如，您知道**从来没有**任何很长的行有数百或数千个字符长），那么使用列出的“读取最后 2KB”方法之一就可以了。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-11-04T05:21:41.790

这是一个使用`mmap`似乎非常有效的版本。最大的优点是它`mmap`会自动为您处理文件到内存的分页要求。

```
import os
from mmap import mmap

def lastn(filename, n):
    # open the file and mmap it
    f = open(filename, 'r+')
    m = mmap(f.fileno(), os.path.getsize(f.name))

    nlcount = 0
    i = m.size() - 1 
    if m[i] == '\n': n += 1
    while nlcount < n and i > 0:
        if m[i] == '\n': nlcount += 1
        i -= 1
    if i > 0: i += 2

    return m[i:].splitlines()

target = "target string"
print [l for l in lastn('somefile', 10) if l == target] 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-03T23:35:00.647

我想我记得当我不得不做类似的事情时，我[从 Manu Garg 的这篇博客文章中](http://manugarg.blogspot.com/2007/04/tailing-in-python.html)改编了代码。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-04T00:08:58.940

如果你在一个unix盒子上，`os.popen("tail -10 " + filepath).readlines()`可能是最快的方法。否则，这取决于您希望它有多强大。到目前为止提出的方法都会以一种或另一种方式失败。对于最常见情况下的稳健性和速度，您可能需要类似对数搜索：使用 file.seek 转到文件末尾减去 1000 个字符，读入，检查它包含多少行，然后到 EOF 减去 3000 个字符，读入 2000 个字符，计算行数，然后 EOF 减去 7000，读入 4000 个字符，计算行数，等等，直到你有你需要的行数。但是，如果您确定它总是会在具有合理行长的文件上运行，那么您可能不需要它。

您可能还会在 unix命令的[源代码](http://www.koders.com/c/fid8DEE98A42C35A1346FA89C328CC3BF94E25CF377.aspx)中找到一些灵感。`tail`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-11-04T02:37:04.073

我遇到了这个问题，解析了最后一小时的 LARGE syslog 文件，并从 activestate 的配方站点使用了这个功能......（[http://code.activestate.com/recipes/439045/](http://code.activestate.com/recipes/439045/)）

```
!/usr/bin/env python
# -*-mode: python; coding: iso-8859-1 -*-
#
# Copyright (c) Peter Astrand <astrand@cendio.se>

import os
import string

class BackwardsReader:
    """Read a file line by line, backwards"""
    BLKSIZE = 4096

    def readline(self):
        while 1:
            newline_pos = string.rfind(self.buf, "\n")
            pos = self.file.tell()
            if newline_pos != -1:
                # Found a newline
                line = self.buf[newline_pos+1:]
                self.buf = self.buf[:newline_pos]
                if pos != 0 or newline_pos != 0 or self.trailing_newline:
                    line += "\n"
                return line
            else:
                if pos == 0:
                    # Start-of-file
                    return ""
                else:
                    # Need to fill buffer
                    toread = min(self.BLKSIZE, pos)
                    self.file.seek(-toread, 1)
                    self.buf = self.file.read(toread) + self.buf
                    self.file.seek(-toread, 1)
                    if pos - toread == 0:
                        self.buf = "\n" + self.buf

    def __init__(self, file):
        self.file = file
        self.buf = ""
        self.file.seek(-1, 2)
        self.trailing_newline = 0
        lastchar = self.file.read(1)
        if lastchar == "\n":
            self.trailing_newline = 1
            self.file.seek(-1, 2)

# Example usage
br = BackwardsReader(open('bar'))

while 1:
    line = br.readline()
    if not line:
        break
    print repr(line) 
```

它工作得非常好，并且比 fileObj.readlines()[-10:] 之类的任何东西都要高效得多，它使 python 将整个文件读入内存，然后将最后十行删除。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-07-24T17:43:52.237

我接受了 mhawke 的建议，`mmap`并编写了一个使用的版本`rfind`：

```
from mmap import mmap
import sys

def reverse_file(f):
    mm = mmap(f.fileno(), 0)
    nl = mm.size() - 1
    prev_nl = mm.size()
    while nl > -1:
        nl = mm.rfind('\n', 0, nl)
        yield mm[nl + 1:prev_nl]
        prev_nl = nl + 1

def main():
    # Example usage
    with open('test.txt', 'r+') as infile:
        for line in reverse_file(infile):
            sys.stdout.write(line) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-08-08T15:50:56.617

感谢 18 Darius Bacon 的解决方案，但实现速度提高了 30%，并包装到 io.BaseIO 类中。

```
class ReverseFile(io.IOBase):
    def __init__ (self, filename, headers=1):
        self.fp = open(filename)
        self.headers = headers
        self.reverse = self.reversed_lines()
        self.end_position = -1
        self.current_position = -1

    def readline(self, size=-1):
        if self.headers > 0:
            self.headers -= 1
            raw = self.fp.readline(size)
            self.end_position = self.fp.tell()
            return raw

        raw = next(self.reverse)
        if self.current_position > self.end_position:
            return raw

        raise StopIteration

    def reversed_lines(self):
        """Generate the lines of file in reverse order.
        """
        part = ''
        for block in self.reversed_blocks():
            block = block + part
            block = block.split('\n')
            block.reverse()
            part = block.pop()
            if block[0] == '':
                block.pop(0)

            for line in block:
                yield line + '\n'

        if part:
            yield part

    def reversed_blocks(self, blocksize=0xFFFF):
        "Generate blocks of file's contents in reverse order."
        file = self.fp
        file.seek(0, os.SEEK_END)
        here = file.tell()
        while 0 < here:
            delta = min(blocksize, here)
            here -= delta
            file.seek(here, os.SEEK_SET)
            self.current_position = file.tell()
            yield file.read(delta) 
```

一个例子

```
rev = ReverseFile(filename)
for i, line in enumerate(rev):
        print("{0}: {1}".format(i, line.strip())) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-11-03T23:06:54.963

您可以从文件末尾读取大约 1,000 字节的块到缓冲区中，直到您有 10 行。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-11-04T19:03:35.063

您还可以在反向浏览文件时计算行数，而不是猜测字节偏移量。

```
lines = 0
chunk_size = 1024

f = file('filename')
f.seek(0, 2)
f.seek(f.tell() - chunk_size)

while True:
    s = f.read(chunk_size)
    lines += s.count('\n')
    if lines > NUM_OF_LINES:
        break
    f.seek(f.tell() - chunk_size*2) 
```

现在该文件处于运行的好位置`readlines()`。您还可以缓存您第一次读取的字符串，以消除两次​​读取文件的相同部分。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-11-03T23:05:34.793

读取文件的最后几 K，并将其分成几行以仅返回最后 10 个。

该块的开头不太可能落在行边界上，但无论如何您都会丢弃第一行。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-11-03T23:27:11.070

就个人而言，我很想突破到 shell 并调用 tail -n10 来加载文件。但是我并不是真正的 Python 程序员；）

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-11-03T23:43:06.403

首先，一个返回列表的函数：

```
def lastNLines(file, N=10, chunksize=1024):
    lines = None
    file.seek(0,2) # go to eof
    size = file.tell()
    for pos in xrange(chunksize,size-1,chunksize):
        # read a chunk
        file.seek(pos,2)
        chunk = file.read(chunksize)
        if lines is None:
            # first time
            lines = chunk.splitlines()
        else:
            # other times, update the 'first' line with
            # the new data, and re-split
            lines[0:1] = (chunk + lines[0]).splitlines()
        if len(lines) > N:
            return lines[-N:]
    file.seek(0)
    chunk = file.read(size-pos)
    lines[0:1] = (chunk + lines[0]).splitlines()
    return lines[-N:] 
```

其次，一个以相反顺序遍历行的函数：

```
def iter_lines_reversed(file, chunksize=1024):
    file.seek(0,2)
    size = file.tell()
    last_line = ""
    for pos in xrange(chunksize,size-1,chunksize):
        # read a chunk
        file.seek(pos,2)
        chunk = file.read(chunksize) + last_line
        # split into lines
        lines = chunk.splitlines()
        last_line = lines[0]
        # iterate in reverse order
        for index,line in enumerate(reversed(lines)):
            if index > 0:
                yield line
    # handle the remaining data at the beginning of the file
    file.seek(0)
    chunk = file.read(size-pos) + last_line
    lines = chunk.splitlines()
    for line in reversed(lines):
        yield line 
```

对于您的示例：

```
s = "foo"
for index, line in enumerate(iter_lines_reversed(fileObj)):
    if line == s:
        print "FOUND"
        break
    elif index+1 >= 10:
        break 
```

**编辑：**现在自动获取文件大小
**Edit2：**现在只迭代 10 行。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-11-04T18:50:40.533

此解决方案将只读取文件一次，但使用 2 个文件对象指针能够在不重新读取文件的情况下获取文件的最后 N 行：

```
def getLastLines (path, n):
    # return the las N lines from the file indicated in path

    fp = open(path)
    for i in range(n):
        line = fp.readline()
        if line == '':
            return []

    back = open(path)
    for each in fp:
        back.readline()

    result = []
    for line in back:
        result.append(line[:-1])

    return result

s = "foo"
last_bit = getLastLines(r'C:\Documents and Settings\ricardo.m.reyes\My Documents\desarrollo\tail.py', 10)
for line in last_bit:
    if line == s:
        print "FOUND" 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2010-03-12T23:30:58.217

也许这可能有用：

```
import os.path

path = 'path_to_file'
os.system('tail -n1 ' + path) 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2021-09-29T04:50:22.763

这将返回最后 10 行作为列表，然后您可以轻松搜索您的行。（兼容 Python 3）

```
def read_last_n_lines_new(lines_need=10):

    with open('Log.txt', 'rb') as f:
        f.seek(0, 2)
        data = []
        lines_found = 0
        while True:
            try:
                f.seek(-1, 1)
            except:
                break
            finally:
                c = f.read(1)
                f.seek(-1, 1)
            if c == b'\n':
                lines_found = lines_found+1
            if lines_found > lines_need or not c:
                break
            data.insert(0, c.decode('utf-8'))

        lines = []
        cur = ""
        for l in data:
            if(l == '\n'):
                lines.append(cur)
                cur = ''
            else:
                cur = cur + l
        return lines 
```

# c# - WPF中的生涩运动

> ID：260285
> 
> 赞同：1
> 
> 时间：2008-11-03T23:06:01.127
> 
> 标签：c#, key, keypress

我在一个 300x300 的窗口内有一个 800x600 的画布。当我按下某个键时，我希望画布朝那个方向移动。
我在后面的窗口代码中完成了这个：

```
受保护的覆盖无效 OnKeyDown(KeyEventArgs e)
{
    base.OnKeyDown(e);
    键 keyPressed = e.Key;

    if (keyPressed == Key.W)
    {
        gcY += 5;
    }
    if (keyPressed == Key.S)
    {
        gcY-= 5；
    }
    if (keyPressed == Key.A)
    {
        gcX += 5;
    }
    if (keyPressed == Key.D)
    {
        gcX-= 5；
    }

    gameCanvas.RenderTransform = new TranslateTransform(gcX, gcY);
}

```

嗯，它有效，但动作很生涩。例如，如果我按住一个键，`W`它会在移动之前暂停片刻。
有没有办法让移动更顺畅，并在你按住一个键时摆脱停顿？
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-06T00:15:34.747

目前，您的设置正在接受垃圾邮件输入（按住一个键）。我在大多数基于事件输入的游戏中看到的方法是使用布尔数组`keydown[256]`，映射键盘（索引是键值）；所有值初始化为`false`.

按下键时，您`true`在 keydown 方法和游戏/渲染循环中设置适当的索引，`gameCanvas.RenderTransform = new TranslateTransform(gcX, gcY);`根据数组中的键是`true`. 您将键值设置为`false`在 keyrelease 事件方法中释放键的时间（我不确定它在 C# 中是什么）。

这样，您将获得平滑的滚动，并且不会延迟启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T23:12:49.460

是的，您可以将时间纳入您的计算中。目前，每当事件触发时，您都会添加/减去 5，这并不是真正可预测的。

要使运动平滑，请确保使用 DateTime 的频率不超过每秒 X 次。

像：

```
private static DateTime nextUpdate

if (nextUpdate <= DateTime.Now)
{
//Move
nextUpdate = DateTime.Now.AddMilliseconds(100);
} 
```

我现在没有 VS，所以我不太确定语法，但你明白了。

# javascript - iPhone上的AJAX？

> ID：260302
> 
> 赞同：3
> 
> 时间：2008-11-03T23:15:25.413
> 
> 标签：javascript, iphone, ajax

我有一个我开发的网站，它充分利用了 Javascript，并且在一些事情上最少使用了 AJAX。该站点在 iPhone 上运行良好，直到我添加了[创建 HttpRequest 句柄的函数](http://www.w3schools.com/Ajax/ajax_server.asp)，此时 iPhone 上的所有 Javascript 现在都静默失败。所以，我有几个问题。

(1) 似乎 AJAX 在 iPhone 上根本不起作用。这是真的？如果没有，如何修改 HttpRequest 创建函数以适应 iPhone？

(2) 如果 AJAX 在 iPhone 上确实不可能，有没有办法可以修改给定的功能，使其在 iPhone 上正常失败，而页面上的其他脚本仍然可以运行？

(3) 如果这不是真的，我需要在服务器端做什么（这甚至可能吗？）检测 iPhone，以便在 iPhone 请求页面时完全删除 AJAX 代码？

还*可以*很好地工作的是使用 CSS 将 iPhone 检测为显示设备并采取相应措施的能力，类似于您在 Opera Show 中使用的功能。当然，这不会解决 AJAX 问题，但它会很整洁。^_^

感谢您的回答。我的一些客户定期从 iPhone 访问该站点，我希望我的页面尽可能多地工作，因此我愿意为它修改我的代码，即使我没有要测试的代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-03T23:29:06.587

当然 iPhone 支持 ajax，请查看[http://developer.apple.com/webapps/](http://developer.apple.com/webapps/)以获取用于开发 iPhone webapps 的大量资源。我建议使用框架（例如[jQuery](http://www.jquery.com/)或[iUI](http://code.google.com/p/iui/)（用于 ui））而不是滚动您自己的 ajax 功能，它已经解决了许多浏览器的怪癖并进行了优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T23:24:46.037

AJAX 没有理由不能在 iPhone 上运行，谷歌的许多网站/facebook 等都很好地使用它。

您的 AJAX 在 Safari/Mac 中是否工作？这是您在非移动环境中获得的最接近的近似值。

我想在你的 javascript 中的某个地方有一些你没有发现的错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T06:36:02.873

调试控制台是解决设备上此类 JavaScript 错误的一个有用资源。它应该报告任何解析错误，也可以用来记录消息和异常。您可以从“设置”>“Safari”>“开发人员”（滚动到底部）打开它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-20T08:36:04.193

Aax 在 iPhone 上完美运行，即使是我们最先进的东西，例如[Ajax Calendar Starter-Kit](http://ra-ajax.org/samples/Viewport-Calendar-Starter-Kit.aspx)，至少在我的 iPhone (3G) 上也能完美运行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-06T23:29:11.610

AJAX 工作得很好。如果您想要一个小型、简单易用的 AJAX 包装器，您应该查看[https://sourceforge.net/projects/quickconnect/](https://sourceforge.net/projects/quickconnect/)。它包含一个名为 ServerAccessObject 的包装器，可在 ServerAccessObject.js 文件中找到。

QuickConnectiPhone 的开发博客位于[http://tetontech.wordpress.com](http://tetontech.wordpress.com)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-12-26T23:51:04.320

我最近在使用 jQuery 时遇到了同样的问题，但问题在于 Safari Mobile 的行为。也许你的情况也是如此。

将 ajax url 从“ [http://the/full/url](http://the/full/url) ”缩短为“/just/the/relative/to/root/part”

顺便说一句，最初在这里找到解决方案的是@pillsbur：

[http://www.webmasterworld.com/javascript/3382262.htm](http://www.webmasterworld.com/javascript/3382262.htm)

# sql - 匿名客户数据以进行开发或测试

> ID：260307
> 
> 赞同：24
> 
> 时间：2008-11-03T23:17:36.267
> 
> 标签：sql, data-scrubbing

我需要使用真实客户信息（姓名、地址、电话号码等）获取生产数据并将其移动到开发环境中，但我想删除任何*真实*客户信息的表象。

[这个问题](https://stackoverflow.com/questions/157600/data-generators-for-sql-server)的一些答案可以帮助我生成新的测试数据，但是如何替换生产数据中的这些列，但保留其他相关列？

假设我有一张包含 10000 个假名的表。我应该使用 SQL 更新进行交叉联接吗？或者做类似的事情

```
UPDATE table
SET lastname = (SELECT TOP 1 name FROM samplenames ORDER By NEWID()) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-11-04T00:20:43.347

如果您了解数据库，这比听起来容易。必要的一件事是了解个人信息未标准化的地方。例如，客户主文件将具有名称和地址，但订单文件也将具有可能不同的名称和地址。

我的基本流程：

1.  标识数据（即列）以及包含这些列的表。
2.  标识这些列的“主”表，以及这些列的非规范化实例。
3.  调整主文件。与其尝试将它们随机化（或使它们变得虚假），不如将它们连接到文件的密钥。对于客户 123，将名称设置为 name123，将地址设置为 123 123rd St, 123town, CA, USA，电话 1231231231。这还有一个额外的好处，就是让调试变得非常容易！
4.  *通过从主文件更新或*进行相同类型的去个性化来更改非正常实例

它看起来并不漂亮，但它确实有效。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-11-03T23:24:45.503

匿名化数据可能很棘手，如果做得不正确，可能会给您带来麻烦，就像[AOL 不久前发布搜索数据时](http://en.wikipedia.org/wiki/AOL_search_data_scandal)发生的事情一样。在尝试转换现有客户数据之前，我会不惜一切代价尝试从头开始创建测试数据。事情可能会导致您能够使用诸如行为分析和其他您可能不认为敏感的数据点之类的东西来确定数据属于谁。我宁愿安全也不愿后悔。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-09T13:30:59.290

有几个工具可以从我发现的数据库中删除敏感数据。请注意，我自己没有尝试过任何一个：

*   [Data::Anonymization](http://sunitparekh.github.io/data-anonymization/)，一个 RubyGem。
*   [Mysql Anonymous](https://github.com/davedash/mysql-anonymous)，一个 Python 脚本。

这里还有一组清理数据库脚本可能会有所帮助：[https ://gist.github.com/Tyriar/d3635c6b6e32ac406623](https://gist.github.com/Tyriar/d3635c6b6e32ac406623)

# sql - 如何在 SQL 2005 中获取分区范围

> ID：260320
> 
> 赞同：2
> 
> 时间：2008-11-03T23:24:51.933
> 
> 标签：sql, sql-server, sql-server-2005, partitioning

我在 SQL Enterprise 2005 中有一个分区表。我需要查询 PARTITION FUNCTION 以找到它的分区范围。什么 SQL 查询会给我这些值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-03T23:37:58.303

从 SQL 分析器中得到这个，观察管理工作室生成用于创建函数的脚本

```
SELECT sprv.value AS [Value],
       sprv.boundary_id AS [ID]
FROM sys.partition_functions AS spf
     INNER JOIN sys.partition_range_values sprv 
        ON sprv.function_id=spf.function_id
WHERE (spf.name=N'fnPartitionLast30Days')
ORDER BY [ID] ASC 
```

# security - Interdev 需要 WebDav 吗？

> ID：260327
> 
> 赞同：0
> 
> 时间：2008-11-03T23:29:25.840
> 
> 标签：security, webdav, windows-server-2000

我们有一个启用了 WebDAV 的 Windows 2000 服务器，并被告知它不安全，所以我们应该删除它。但是，我们有几个开发人员使用 Interdev 和支持 Interdev 的站点，所以我们担心他们将无法再工作。

是否有替代方案可以让他们安全地使用 Interdev，或者我们必须禁用 WebDav 并使站点仅 FTP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-04T00:05:08.467

已经有一段时间了，但我相信 WebDav（或我记得的 Front Page Server Extensions）仅用于部署。回到我们使用 Interdev 的时候，我们通常会使用 Interdev 在本地开发并通过 FTPS 部署，所以如果您没有明确使用 WebDAV 做任何事情，我认为您不应该运行您的应用程序。

# php - 邻近搜索

> ID：260335
> 
> 赞同：21
> 
> 时间：2008-11-03T23:33:14.410
> 
> 标签：php, mysql, proximity

应用程序如何执行邻近搜索？例如，用户输入邮政编码，然后应用程序会按邻近度排序列出 20 英里内的所有企业。

我想在 PHP 和 MySQL 中构建类似的东西。这种方法正确吗？

1.  获取我感兴趣的位置的地址并存储在我的数据库中
2.  使用 Google 的地理编码服务对所有地址进行地理编码
3.  编写一个包含 Haversine 公式的数据库查询来进行邻近搜索和排序

这个可以吗？在第 3 步中，我将计算每个查询的接近度。有一个 PROXIMITY 表来列出每个企业和几个参考位置之间的距离会更好吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-03T23:38:23.043

如果有足够的记录对速度很重要，这里有一种方法可以提前对它们进行索引。

定义一个边长约 20 英里的垃圾箱网格。将 bin 编号与每个商店的记录一起存储。在搜索时，计算与搜索点 20 英里半径相交的所有 bin 的数量。然后检索任何这些垃圾箱中的所有商店，并像以前一样继续。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-11-04T00:18:12.573

我们用它来做成千上万的点。如果您在 SQL 中执行此操作以在纬度和经度列上建立索引，这一点很重要。我们尝试在 SQL 2008 中使用空间索引执行此操作，但我们确实没有看到我们预期的性能提升。尽管如果您想在距邮政编码一定距离内进行计算，您需要考虑是否要使用邮政编码的质心或多边形表示。

[Haversine forumla](http://en.wikipedia.org/wiki/Haversine_formula)是一个很好的起点。

我们在计算飞行距离时没有遇到性能问题，对于一些我们提前知道点并且将有数百万条记录的应用程序，我们确实提前计算了它。

```
SELECT
        [DistanceRadius]=
        69.09 *
        DEGREES(
          ACOS(
            SIN( RADIANS(latitude) )*SIN( RADIANS(@ziplat) ) 
           +
            COS( RADIANS(latitude) )*COS( RADIANS(@ziplat) ) 
           *
            COS( RADIANS(longitude - (@ziplon)) )
          )
        )
        ,*
        FROM
            table

    ) sub
WHERE
    sub.DistanceRadius < @radius 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-04T00:03:28.720

我们为大约 1200 个地点执行此操作。我会即时使用 Haversine 公式，尽管取决于您的应用程序，将其存储在 PHP 而不是 SQL 中可能会更好。（我们的实现是在 .net 中，因此您的里程可能会有所不同）。

实际上，我们实现它的方式最大的缺点是，每次计算（直到最近）都必须在数据层上进行计算，这非常慢（当我说慢时，我的意思是非瞬时的，它需要一秒钟左右的时间)，但这是因为它必须根据提供的邮政编码计算所有 1200 个位置的距离。

根据您选择的路线，有一些方法可以加快数字距离计算，方法是查看经度和纬度并删除预定义范围之外的那些（例如，如果您正在查看 20 英里内的所有地址，则有经度范围，您可以计算出所有地址必须落在 20 英里之外。）如果需要，这可以加快您的查询速度。

我们实际上考虑将所有可能的组合存储在我们的数据库中。实际上，它听起来可能是一个大型数据存储，但它实际上不在大范围内。使用索引它可以非常快，而且您不必担心算法优化等。我们决定不使用它，因为我们在 C# 中有方程，它允许我们缓存执行所有计算所需的信息业务层。两者都可以正常工作，这只是您的偏好的问题。

# java - 为什么 notifyAll() 在 Integer 上同步时会引发 IllegalMonitorStateException？

> ID：260337
> 
> 赞同：41
> 
> 时间：2008-11-03T23:33:55.393
> 
> 标签：java, synchronization, notify, illegalmonitorstateexcep

为什么这个测试程序会导致`java.lang.IllegalMonitorStateException`?

```
public class test {
    static Integer foo = new Integer(1);
    public static void main(String[] args) {
        synchronized(foo) {
            foo++;
            foo.notifyAll();
        }
        System.err.println("Success");
    }
} 
```

结果：

```
Exception in thread "main" java.lang.IllegalMonitorStateException
        at java.lang.Object.notifyAll(Native Method)
        at test.main(test.java:6) 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2008-11-03T23:37:04.700

您已经正确地注意到`notifyAll`必须从同步块中调用。

但是，在您的情况下，由于自动装箱，您同步的对象与您调用的实例`notifyAll`不同。事实上，新的、递增的`foo`实例仍然被限制在堆栈中，并且不可能在`wait`调用时阻塞其他线程。

您可以实现自己的可变计数器，在该计数器上执行同步。根据您的应用程序，您可能还会发现[AtomicInteger](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/atomic/AtomicInteger.html)满足您的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-03T23:47:41.807

您还应该警惕锁定或通知可以由 JVM 实习的对象（如 String 和 Integer）（以防止创建大量表示整数 1 或字符串“”的对象）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-03-18T21:28:03.613

递增 Integer 会使旧的 foo 消失，并被一个与前一个 foo 变量不同步的全新对象 foo 替换。

这是埃里克森在上面建议的 AtomicInteger 的实现。在这个例子中 foo.notifyAll(); 不会产生 java.lang.IllegalMonitorStateException 因为 AtomicInteger 对象在 foo.incrementAndGet() 时没有刷新；正在运行。

```
import java.util.concurrent.atomic.AtomicInteger;

public class SynchronizeOnAPrimitive {
    static AtomicInteger foo = new AtomicInteger(1);
    public static void main(String[] args) {
        synchronized (foo) {
            foo.incrementAndGet();
            foo.notifyAll();
        }
        System.out.println("foo is: " + foo);
    }
} 
```

输出：

```
foo is: 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-03T23:43:57.243

正如埃里克森所指出的，没有后增量运算符的代码可以正常工作：

```
static Integer foo = new Integer(1);

public static void main(String[] args) {
    synchronized (foo) {
        foo.notifyAll();
    }
    System.out.println("Success");
} 
```

输出：

> 成功

# java - Java 基准测试工具

> ID：260338
> 
> 赞同：9
> 
> 时间：2008-11-03T23:34:23.113
> 
> 标签：java, performance, benchmarking

我编写了一个小型 Java 应用程序，我需要为其获取性能指标，例如内存使用情况、运行时间等，是否有任何简单易用的性能测量工具可用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-03T23:39:20.017

[Yourkit](http://yourkit.com/)非常好（30 天免费试用）。Eclipse 还内置了[TPTP 工具](http://www.eclipse.org/tptp/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-03T23:37:25.917

[Apache JMeter](http://jakarta.apache.org/jmeter/)有很多特性，用于对 http 请求、JDBC 调用、Web 服务、JMS、邮件、常规 Java 请求等进行基准测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-04T00:14:29.773

对于运行时指标，请使用任何分析器，例如[VisualVM](https://visualvm.dev.java.net/)、Netbeans Profiler 或 Eclipse TPTP 工具。分析器通常会为您提供更细粒度的指标，例如单个函数的运行时间、热点等。

您还可以查看[开源 JMX](http://java-source.net/open-source/jmx)工具列表。

将这些与 JMeter 和其他此类负载生成器工具结合使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-04T01:34:21.250

一个没有被提及的程序是 Oracle 的 (BEA) Mission Control。它带有 JRockit JVM（应该是英特尔平台上最快的 JVM），可从[http://www.oracle.com/technology/software/products/jrockit/index.html](http://www.oracle.com/technology/software/products/jrockit/index.html)免费获得。

Mission Control 本质上是 Oracle/BEA 与 JConsole 的对应物，但提供的功能要多得多。它甚至可以与其他 JVM 一起使用，尽管您需要 JRockit 来利用更高级的特性（例如，方法分析）。

# database - 您使用哪些最佳实践来测试数据库查询？

> ID：260342
> 
> 赞同：12
> 
> 时间：2008-11-03T23:36:19.287
> 
> 标签：database, tdd, integration-testing, end-to-end

我目前正在测试我们的解决方案，该解决方案具有整个“范围”层：UI、Middle 和无所不在的数据库。

在我加入我现在的团队之前，查询测试是由测试人员手动制作的查询完成的，理论上这些查询会返回一个结果集，存储过程应该根据各种相关性规则、排序、你有什么来返回。

这会产生副作用，即针对测试人员的查询提交的错误比针对有问题的实际查询更频繁。

我建议实际使用已知结果集，您可以推断它应该如何返回，因为您控制存在的数据 - 以前，数据是从生产中提取、清理，然后填充到我们的测试数据库中。

人们仍然坚持创建自己的查询来测试开发人员创建的内容。我怀疑很多人仍然是。我认为这根本不理想，只会不必要地增加我们的测试足迹。

所以，我很好奇，您使用哪些实践来测试这样的场景，以及在不引入混乱数据的情况下，什么是您可以获得的最佳端到端覆盖的理想选择？

我遇到的问题是在哪里进行测试的最佳地点。我是否只是直接戳服务，并将该数据集与我可以从存储过程中提取的数据集进行比较？我有一个粗略的想法，并且到目前为止已经足够成功，但我觉得我们在这里仍然缺少一些重要的东西，所以我正在寻找社区，看看他们是否有任何有价值的见解可能有助于制定我的测试方法更好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-03T23:42:38.247

测试存储过程将要求每个测试人员都有一个单独的数据库实例。这是一个要求。如果您共享环境，您将无法依赖测试结果。他们将一文不值。

您还需要确保在每次测试后将数据库回滚到之前的状态，以使结果可预测且稳定。由于需要在每次测试后回滚状态，因此这些测试将比标准单元测试花费更长的时间来完成，因此它们可能是您想要在夜间运行的东西。

有一些工具可以帮助您解决这个问题。DbUnit 就是其中之一，我也相信微软有一个工具 Visual Studio for Database Professionals 包含一些对 DB 测试的支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-03T23:55:11.387

以下是一些指导方针：

1.  使用独立的数据库进行单元测试（例如，没有其他测试运行或活动）
2.  始终在同一测试中插入您打算查询的所有测试数据
3.  编写测试以随机创建不同数量的数据，例如随机插入数量在 1 到 10 行之间
4.  随机化数据，例如布尔字段随机插入和真或假
5.  在变量的测试中保持计数（例如行数，真数）
6.  对于断言执行查询并与本地测试变量进行比较
7.  使用 Enterprises Services 事务将数据库回滚到以前的状态

有关 Enterprises Services Transaction 技术，请参见以下链接：

[http://weblogs.asp.net/rosherove/articles/DbUnitTesting.aspx](http://weblogs.asp.net/rosherove/articles/DbUnitTesting.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-03T23:48:30.543

作为我们持续集成的一部分，我们每晚运行数据库查询的“构建”。这涉及一组数据库调用，这些调用会根据代码中的实际调用以及任何预期的临时查询定期更新。

这些调用是定时的，以确保：

1/ 他们不会花太长时间。

2/ 他们与前一天晚上没有太大的不同（以一种糟糕的方式）。

通过这种方式，我们可以快速捕获错误查询或数据库更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-04T00:02:14.150

查询计划器是您的朋友，尤其是在这种情况下。最好的做法是检查索引是否在您期望的时候被使用，并且查询不需要完成额外的工作。即使您的套件中包含压力测试，在您的应用程序开始停止运行之前捕获昂贵的查询仍然是一个好主意。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-04T00:38:55.700

我们为每个开发人员和测试人员预留了一个空白数据库。

运行测试时 - 每个测试都会清除数据库并加载它期望使用的数据。这给了我们任何时候一个已知的状态。

然后我们可以在同一个数据库上测试几个不同的场景（一个接一个），我们永远不会踩到另一个测试人员的脚趾。

这包括测试数据访问本身。对于服务测试，我们做了很多相同的事情，但我们只测试服务的内部——我们实际上并没有点击服务，而是创建了一个服务处理类的实例并传递了我们需要的一切。这样我们测试的是代码而不是基础设施（消息等）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-04T02:18:41.083

Django 提供了数据库单元测试功能。您可以借用他们的设计理念并在其他环境中进行复制。

Django 人员提供了 Python 标准 unittest`TestCase`类的子类，该类使用已知的固定装置（一组已知的数据行）填充数据库。

对于 Django（和 Python），从 JSON 数据提取中填充数据库是最简单的。夹具的其他文件格式可用于其他框架。例如，如果您在 Oracle 中工作，您可能会发现 CSV 文件更易于使用。

这个`TestCase`子类允许编写一个典型的测试用例，用已知的数据夹具来测试数据库。

此外，Django 测试运行程序会为测试目的创建一个临时模式。这对 Django 来说很容易，因为它们有一个完整的对象关系管理组件，其中包括 DDL 创建。如果您没有这个可用的，您仍然需要 DDL 脚本，以便您可以创建和处置用于单元测试目的的测试模式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-04T22:43:04.433

[SQLServerCentral在这里](http://www.sqlservercentral.com/articles/TSQLUnit/64357/)有一篇关于称为 tsqlUnit 的 TSQL 单元测试框架的文章（您可能需要注册，但它是免费的且没有字符串）。它是开源的，并且沿袭了 xUnit 框架的传统。

它遵循 SEAT TDD 模式：

设置 - 通过操作对象、表格和/或数据来准备测试条件

练习 - 调用生产代码

断言 - 检查实际结果是否等于预期结果

拆解 - 将所有内容恢复到测试开始前的状态。这实际上是通过回滚事务来完成的，它使一切保持整洁。

虽然我没有使用它，但它看起来很有希望，而且我肯定会更详细地研究它。

该框架可以在[这里](http://tsqlunit.sourceforge.net/)下载。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-04T00:31:18.723

我发现测试发送到数据库的 SQL 而不是查询数据库的结果很有用。

并不是说我不这样做，但我发现测试它比让数据库过多地提升要快得多。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-31T22:28:36.020

这是一个繁重的设置，但我推荐 TDDing 容器。

运行测试脚本后，构建一个新容器，在其中运行您的数据库，使用模拟数据为其播种，然后运行查询并测试返回的内容以及查询是否成功。

通过这种方式，您可以控制测试环境与生产的接近程度。

[思想工厂](https://www.thoughtworks.com/radar/techniques/tdd-ing-containers)

# html - CSS 布局技巧

> ID：260356
> 
> 赞同：0
> 
> 时间：2008-11-03T23:41:47.030
> 
> 标签：html, css, layout

我是第一次尝试 CSS 布局，我的 CSS 经验非常基础。我想要实现的是 2 列布局：左面板和内容。
我发现了这个：

```
#leftcontent
{
    position: absolute;
    left: 10px;
    top: 10px;
    width: 170px;
    border: 1px solid #C0C0C0;
    padding: 2px;
}

#centercontent 
{
    position: absolute;
    margin-left: 181px;
    border:1px solid #C0C0C0;
    top: 10px;
    //fix IE5 bug
    voice-family: "\"}\"";
    voice-family: inherit;
    margin-left: 181px;
} 
```

这在 Firefox 中显示效果很好，但 IE8 中的内容离开屏幕右侧，我假设`#leftcontent`. 我怎样才能解决这个问题？

这可能是一个非常简单的修复，但我已经尝试并寻找修复，但这应该可以工作。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-03T23:46:34.180

我建议将 #leftcontent 元素浮动到左侧，然后设置 #centercontent 元素的边距以进行补偿：

```
#leftcontent {
        float: left;
        width:170px;
        border:1px solid #C0C0C0;
        padding: 2px;
}

#centercontent {
        margin-left: 181px;
        border:1px solid #C0C0C0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T23:48:02.883

在#centercontent 上设置宽度。无论是百分比还是像素大小，都将是您要寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-03T23:59:42.470

使用该`float`属性来执行此操作。一个优秀的浮动教程是[Floatutorial](http://css.maxdesign.com.au/floatutorial/)。下面是你的 CSS 使用浮点数的样子：

```
#leftcontent {
    float: left;
    margin-left: 10px;
    margin-top: 10px;
    width: 170px;
    border: 1px solid #C0C0C0;
    padding: 2px;
}

#centercontent {
    float: left;
    margin-left: 10px;
    border: 1px solid #C0C0C0;
    margin-top: 10px;
} 
```

然后，如果您希望 div 出现在这些 div 下方，则必须使用以下 CSS：

```
#contentbelow {
    clear: both;
} 
```

此外，您应该为#centercontent 设置宽度，因为浮动元素总是需要明确的宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-04T02:27:46.743

我最喜欢的列布局方法是使用 float:left 和 right。

`colwrapper`设置为 40em 宽度，`margin-...:auto`使 div 居中（出于某种原因，除了 IE4 或 IE5 之外的所有内容）

`footer`由于 . 出现在两列之后`clear:both`。

`ctrl and + or -`当您增加字体大小（)

```
#colwrapper{
    width:40em;
    margin-left:auto;
    margin-right:auto;
}
#colleft{
    float:left;
    width:10em;
}
#colright{
    float:right;
    width:30em
}
#footer{
    clear:both
} 
```

和 HTML：

```
<div id="colwrapper">
    <div id="colleft">
        left column!
    </div>
    <div id="colright">
        right column!
    </div>
    <div id="footer">
        footer!
    </div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-04T00:43:42.430

其他人所说的`float`应该有所帮助。 *此外*，还有两件事需要检查：

*   您是否尝试过`overflow`为左侧内容设置 ，以便浏览器更好地了解当某些内容不适合您允许的空间时该怎么做。
*   您是否寻找过导致左侧溢出的元素？有些元素不能被包裹，如果它们太宽，它们会迫使整个 div 的宽度拉伸以适应它们。

* * *

## 回答 #6

> 赞同：-8
> 
> 时间：2008-11-03T23:43:38.837

使用一张桌子。它更适合这项任务，更容易实现并且跨不同浏览器更可靠。

# ms-access - Jet(Access) DB 和基于表达式的列？

> ID：260372
> 
> 赞同：0
> 
> 时间：2008-11-03T23:50:56.387
> 
> 标签：ms-access, jet, expression

我偶尔会在一个旧项目上工作，它使用经典的 asp 作为前端，使用 access 数据库作为后端。

我想在其中一个表中创建一个新列，其中包含从行中的其他列计算其值的逻辑。

我知道如何在更现代的 DBMS 中做到这一点，但我认为访问不支持它。请记住，我没有使用访问前端，只是通过 ODBC 使用 Jet DB 引擎。

任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-04T02:29:22.513

你能做一个计算列吗？

```
SELECT Table1.Col_1, Table1.Col_2, [Col_1]*[Col_2] AS Col_3
FROM Table1; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-11-07T04:58:10.900

乔纳森·霍兰德在评论中问道：

> 我想知道 Jet DB 是否可以像在 Access 中那样在其中嵌入 VBscript

为什么你想在后端而不是在你的 ASP 前端做这样的事情？Access 已保存查询，这些查询类似于视图，但通过 ODBC 使用时，它们不能在其中包含 VBA 函数（尽管 Jet 直接支持的一些命令*可以*通过 ODBC 访问，例如 IIf() 和 Nz() - 但这是一个很大的*if*）。

在 ASP 中检索您的记录集并执行逐行计算。如果您通过 ODBC 使用 Jet，这是唯一的方法（顺便说一句，我认为 ADO 不会更好地工作）。

# delphi - 查找应用程序并在它们之间迭代的 Ant 构建

> ID：260375
> 
> 赞同：2
> 
> 时间：2008-11-03T23:53:49.033
> 
> 标签：delphi, ant, build, build-automation

我使用 Ant 构建 Delphi 应用程序（从 CruiseControl 调用）。

我希望 ant 递归搜索目录树以查找文件 *.dpr，并在找到时调用第二个 build.xml，或者最好是宏或目标，将找到的每个文件名作为“参数”传递。我发现我可以使用 subant 查找 build.xml 文件并按顺序运行它们，但这不是我想要的，因为我想避免为每个应用程序创建一个 build.xml。

我要避免的是必须在我的 build.xml 中逐项列出我的应用程序，而是让 ant 找到它们。

请不要告诉我使用不同的构建工具，因为我们已经在使用 Ant 方面进行了大量投资。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-03T23:59:28.260

如果你使用[ant-contrib](http://ant-contrib.sourceforge.net/)，你可以使用 for 循环：

```
<for param="file">
  <fileset dir="${process.dir}" includes="**/*.dpr" />
  <sequential>
    <ant antfile="subbuild.xml">
      <property name="in" value="@{file}"/>                            
    </ant>
  </sequential>
</for> 
```

您还可以使用此方法调用宏或目标。

# c++ - 带有参数的非纯虚函数是不好的做法吗？

> ID：260380
> 
> 赞同：9
> 
> 时间：2008-11-03T23:56:21.697
> 
> 标签：c++, polymorphism

我有一个带有可选虚函数的基类

```
class Base {
    virtual void OnlyImplementThisSometimes(int x) {}
}; 
```

当我编译这个时，我收到一个关于未使用的参数 x 的警告。还有其他一些我应该实现虚拟功能的方法吗？我已经像这样重写了它：

```
class Base {
    virtual void OnlyImplementThisSometimes(int x) 
    {
        x = 0;
    }
}; 
```

我还有一个问题，如果我不小心，我制作的子类可能会实现错误的功能，然后由于重载而我没有注意到：例如

```
class Derived : public Base {
    void OnlyImplementThisSometimes(int x, int y) { // some code }
};

Derived d;
Base *b = dynamic_cast<Base *>(&d);
b->OnlyImplementThisSometimes(x); // calls the method in the base class 
```

之所以调用基类方法，是因为我使用“int y”参数实现了派生函数，但对此没有任何警告。这些只是 C++ 中的常见缺陷还是我误解了虚函数？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-11-04T00:09:54.463

忽略设计问题，您可以通过省略变量名称来绕过编译器警告未使用的变量，例如：

```
virtual void OnlyImplementThisSometimes(int ) { } 
```

在尝试覆盖虚函数时错误地实现了错误的方法签名只是您在 C++ 中需要小心的事情。像 C# 这样的语言使用 'override' 关键字来解决这个问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-11-04T00:53:03.843

我们将宏定义`_unused`为：

```
#define _unused(x) ((void)x) 
```

然后将函数定义为：

```
virtual void OnlyImplementThisSometimes(int x) { _unused( x );} 
```

这不仅使编译器不会抱怨，而且让任何维护代码的人都清楚你没有忘记 x —— 你*故意*忽略它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-04T00:04:02.057

为什么要在基类中定义它？如果基类不打算使用该方法，那么只需将其定义为派生类中的虚拟方法。

或者默认实现可能会抛出异常

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-04T00:04:38.390

如果您提供虚函数的默认实现，它应该是所有不覆盖该函数的派生类的正确实现。如果您无法提供*正确*的实现，那么我的建议是制作一个纯虚函数并将其留给派生类来提供实现。不允许调用方法的派生类可以抛出异常，以确保不被误用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-04T00:14:39.523

除了简单地省略变量名之外，在许多编译器中，您可以告诉编译器，您知道它是未使用的，并且通过这样做 SHUTUP

```
int func(int x)
{
   (void) x;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-04T00:12:33.473

这在我的代码中有些常见。例如，我有专为单线程操作和多线程设计的类。有很多常见的套路和数据。我把所有这些都放在基类中（它也有几个纯虚拟的）。

我在基类中实现了两个空虚函数：Init() 和 Cleanup()。单线程派生类不隐含它们，但多线程派生类可以。

我有一个工厂函数创建适当的派生类，然后返回一个指针。客户端代码只知道基类类型，它调用 Init() 和 Cleanup()。这两种情况都是正确的。

当然，关于如何做到这一点，可能还有其他好的建议，但是这个习惯用法适用于我的很多代码。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-04T00:18:23.133

这不是一个不好的做法，它是指定类中可选实现的部分的常见习惯用法。

目前我将它用于用户输入系统，因为该类的用户实现每一个方法都会很乏味，即使他很可能不会使用它。

```
class mouse_listener{
public:
    virtual ~mouse_listener() {}

    virtual void button_down(mouse_button a_Button) {}
    virtual void button_up(mouse_button a_Button) {}
    virtual void scroll_wheel(mouse_scroll a_Scroll) {}
    virtual void mouse_move_abs(math::point a_Position) {}
    virtual void mouse_move_rel(math::point a_Position) {}
}; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-11-04T00:50:10.700

顺便说一句，如果你知道你的基类，就永远不需要做动态*向上*转换，即从派生到基类。

```
Base *b = &d; 
```

也可以，`dynamic_cast<>`应该在你向下转换时使用，即从基础到派生：

```
if((Derived *d = dynamic_cast<Derived *>(b)) != 0)
{
  // use d
} 
```

（当然，在向下投射的情况下，`static_cast<>`通常也会起作用。）

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-11-05T20:51:04.737

试试这个：

```
class Base {
    virtual void OnlyImplementThisSometimes(int x) = 0;
}; 
```

我已经有一段时间没有做过这样的事情了，但我相信这就是你声明虚函数的方式。

也正如其他人所说，变量名在这样的函数声明中是可选的。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2008-11-04T09:30:44.237

最简单的答案如下所示：

```
class Base {
    virtual void OnlyImplementThisSometimes(int x) { x;}
}; 
```

对绝对不执行任何操作的变量的简单引用将删除所有警告（无论如何来自最高级别的 VC++）。

# c# - 如何使用视觉样式绘制任务栏按钮？

> ID：260386
> 
> 赞同：0
> 
> 时间：2008-11-04T00:00:42.953
> 
> 标签：c#, winapi, pinvoke, taskbar, visual-styles

我创建了一个 DeskBand 工具栏，我想在工具栏上显示一个按钮，该按钮具有作为任务栏按钮的样式视觉样式。

在 .NET 中，您可以使用 VisualStyleRenderer 来呈现任务栏背景，但也可以使用呈现按钮的方法。

是否有任何 Win32 API 可以用来使用视觉样式绘制按钮，而不是通过绘制路径或图像来模拟按钮的外观？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-08-05T13:46:39.413

我知道这个话题很老，但是，...：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.visualstyleelement.taskband.flashbuttongroupmenu.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.visualstyleelement.taskband.flashbuttongroupmenu.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-04T02:47:25.703

到目前为止，根据链接的论坛讨论，我只能找到[一个据称适用于 Vista 的解决方案。](https://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=1761337&SiteID=1)XP 的 UxTheme.dll 似乎不支持检索子类，这是您可靠地获取当前主题的 TaskBand 按钮视觉样式元素所需要的，它会出现。

# php - 使用 php 对文件夹中的文件列表进行排序

> ID：260387
> 
> 赞同：1
> 
> 时间：2008-11-04T00:01:31.467
> 
> 标签：php, sorting

我正在使用下面的代码在下拉菜单中显示目录中的所有文件。有谁知道如何使这个按字母顺序排列？我认为它与排序功能有关，我只是不知道怎么做！

```
<?php
$dirname = "images/";
$images = scandir($dirname);
$dh = opendir($dirname);

while ($file = readdir($dh)) {
if (substr($file, -4) == ".gif") {
print "<option value='$file'>$file</option>\n"; }
}
closedir($dh);
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-04T00:06:27.917

为什么要使用 scandir() 读取所有文件名，然后使用 readdir() 方法遍历它们？你可以这样做：

```
<?php

$dirname = "images/";
$images = scandir($dirname);

// This is how you sort an array, see http://php.net/sort
sort($images);

// There's no need to use a directory handler, just loop through your $images array.
foreach ($images as $file) {
    if (substr($file, -4) == ".gif") {
        print "<option value='$file'>$file</option>\n"; }
    }
}

?> 
```

此外，您可能想使用[natsort()](http://php.net/natsort)，它的工作方式与[sort()](http://php.net/sort)相同，但按“自然顺序”排序。（而不是排序，因为`1,10,2,20`它将排序为`1,2,10,20`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-04T00:31:20.207

[扫描目录](http://php.net/scandir)

```
array scandir ( string $directory [, int $sorting_order [, resource $context ]] ) 
```

> 从目录返回文件和目录的数组。参数
> 
> directory 将被扫描的目录。
> 
> sort_order **默认情况下，排序顺序是按字母升序排列的。**如果使用了可选的排序顺序（设置为 1），那么排序顺序是按字母降序排列的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T01:30:52.943

```
$matches = glob("*.gif");
if ( is_array ( $matches ) ) {
   sort($matches);
   foreach ( $matches as $filename) {
      echo '<option value="'.$filename.'">.$filename . "</option>";
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-04T08:00:11.580

正如[威廉麦克唐纳在](https://stackoverflow.com/users/2725/william-macdonald)[这里](https://stackoverflow.com/questions/260387/ordering-a-list-of-files-in-a-folder-using-php#260451) 指出的那样， [scandir()](http://de3.php.net/scandir)实际上会根据其`$sorting_order`参数（或其默认值：“默认情况下，排序顺序是按字母升序排列。”）对返回的数组进行排序。您的代码的问题是，您在目录中生成了文件数组，`$images = scandir($dirname);`但您没有在代码中进一步使用返回的数组。相反，您使用另一种方法迭代目录内容：

```
$dh = opendir($dirname);
while ($file = readdir($dh)) {
    if (substr($file, -4) == ".gif") {
        print "<option value='$file'>$file</option>\n"; 
    }
}
closedir($dh); 
```

这就是您的结果未排序的原因。

# iphone - 为什么在 iPhone 应用程序中调用 glMatrixMode(GL_PROJECTION) 会给我 EXC_BAD_ACCESS？

> ID：260391
> 
> 赞同：5
> 
> 时间：2008-11-04T00:03:12.090
> 
> 标签：iphone, opengl-es

我有一个 iphone 应用程序，我在 appDidFinishLaunching 中调用这三个函数：

```
glMatrixMode(GL_PROJECTION);
glOrthof(0, rect.size.width, 0, rect.size.height, -1, 1);
glMatrixMode(GL_MODELVIEW); 
```

当我使用调试器单步执行时，我在执行第一行时得到 EXC BAD ACCESS。任何想法为什么会发生这种情况？

顺便说一句，我有另一个应用程序，我做同样的事情，它工作正常。因此，我尝试复制该应用程序中的所有内容（#imports、添加 OpenGLES 框架等），但现在我被卡住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-05T17:42:19.593

如果两个线程试图一次绘制到 OpenGL 场景，我会在 OpenGL 调用中遇到这种情况。但是，这听起来不像你在做什么。

在此调用之前，您是否正确初始化了显示上下文和帧缓冲区？例如，在进行 OpenGL 绘图的 UIView 子类中，我在其 initWithCoder: 方法中调用以下内容：

```
context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1];

if (!context || ![EAGLContext setCurrentContext:context] || ![self createFramebuffer]) 
{
    [self release];
    return nil;
} 
```

createFramebuffer 方法如下所示：

```
- (BOOL)createFramebuffer 
{   
    glGenFramebuffersOES(1, &viewFramebuffer);
    glGenRenderbuffersOES(1, &viewRenderbuffer);

    glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);
    glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
    [context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(CAEAGLLayer*)self.layer];
    glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, viewRenderbuffer);

    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight);

    if (USE_DEPTH_BUFFER) {
        glGenRenderbuffersOES(1, &depthRenderbuffer);
        glBindRenderbufferOES(GL_RENDERBUFFER_OES, depthRenderbuffer);
        glRenderbufferStorageOES(GL_RENDERBUFFER_OES, GL_DEPTH_COMPONENT16_OES, backingWidth, backingHeight);
        glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_DEPTH_ATTACHMENT_OES, GL_RENDERBUFFER_OES, depthRenderbuffer);
    }

    if(glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES) != GL_FRAMEBUFFER_COMPLETE_OES) 
    {
        return NO;
    }

    return YES;
} 
```

这几乎是样板代码，由 XCode 中的 OpenGL ES 应用程序模板生成。也许在调用 glMatrixMode() 之前没有初始化事物，你会崩溃。

另外，为什么要在 applicationDidFinishLaunching: 中进行 OpenGL 绘图？视图或视图控制器不是比 UIApplicationDelegate 更适合 OpenGL 调用的地方吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-02-04T19:08:00.573

考虑到您提交错误的日期，这不太可能是问题，但如果您使用 Apple 示例代码并在支持 ES 2.0 的设备上运行，您也会看到类似的内容，因为它从规范中删除了矩阵堆栈，尽管由于该设备还支持 ES 1.1，因此编译器仍然可以看到函数定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-04T16:07:43.187

我在许多不同的情况下都看到过这个错误，但从来没有在你的情况下特别出现过。它通常是由于应用程序试图访问已释放的内存而出现的。

你能确认 rect 仍然被分配吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-20T03:50:02.980

在调用 glOrthof 之前，您需要将当前矩阵替换为单位矩阵。这可以通过 glLoadIdentity() 来完成

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-05-23T18:56:27.590

重新启动 iPhone 模拟器。此问题肯定是由于未正确设置 OpenGL 上下文。我发现有时 iPhone 模拟器会出现问题，需要重新启动 OpenGL 上下文才能通过 [EAGLContext setCurrentContext:] 正确设置。

# sql - SQL中的最大和

> ID：260398
> 
> 赞同：8
> 
> 时间：2008-11-04T00:05:59.417
> 
> 标签：sql, subquery, sum, max

我有一个商店列表、商店中的部门以及每个部门的销售额，就像这样（在子查询中使用 max(sales) 创建，但我认为这并不是非常重要）：

```
toronto    baskets 500
vancouver  baskets 350
halifax    baskets 100
toronto    noodles 275
vancouver  noodles 390
halifax    noodles 120
halifax    fish    200 
```

我想询问每家商店中销量最高的部门。结果应如下所示：

```
toronto    baskets 500
vancouver  noodles 275
halifax    fish    200 
```

每当我使用 GROUP BY 时，它都会包含我的子查询中的所有列表。在没有临时表的情况下，有没有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-04T00:45:39.087

这适用于 Sql Server（肯定是 2000 及更高版本）

```
SELECT a.Store, a.Department, a.Sales
FROM temp a
INNER JOIN 
(SELECT store, max(sales) as sales
FROM temp
GROUP BY Store) b
ON a.Store = b.Store AND a.Sales = b.Sales; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T00:12:31.167

这在 Oracle 中有效，其他实现可能对分析函数有不同的语法（或完全没有它们）：

```
select store
     , max(department) keep(dense_rank last order by sales)
     , max(sales)
  from (
        ...query that generates your results...
       )
 group by store 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-04T12:44:09.197

我对 SQL 2005 的 2 个解决方案如下。如果两个销售数据相同，那么到目前为止我可以看到的其他数据可能不会返回正确的数据。不过，这取决于您的需求。

第一个使用 Row_Number() 函数，所有行从最低到最高销售额排名（然后是一些平局规则）。然后每个商店选择最高排名以获得结果。

您可以尝试将 Partion By 子句添加到 Row_Number 函数（请参阅 BOL）和/或使用内部联接而不是“in”子句进行调查。

第二个，借用Turnkey的思路，再次对它们进行排名，但是是按商店分区，所以我们可以选择排名第一的。Dense_Rank 可能会给两个相同的行提供相同的排名，因此如果 store 和 department 不是唯一的，它可以返回两行。使用 Row_number 编号在分区中是唯一的。

需要注意的一些事情是，这可能会很慢，但对于大多数数据集来说，它会比其他解决方案之一中的子查询更快。在该解决方案中，查询必须每行运行一次（包括排序等），这可能会导致大量查询。

其他查询选择每个商店的最大销售额并以这种方式返回数据，如果两个部门碰巧有相同的销售额，则返回商店的重复行。最后一个查询显示了这一点。

```
DECLARE @tbl as TABLE (store varchar(20), department varchar(20), sales int)

INSERT INTO @tbl VALUES ('Toronto', 'Baskets', 500)
INSERT INTO @tbl VALUES ('Toronto', 'Noodles', 500)
INSERT INTO @tbl VALUES ('Toronto', 'Fish', 300)
INSERT INTO @tbl VALUES ('Halifax', 'Fish', 300)
INSERT INTO @tbl VALUES ('Halifax', 'Baskets', 200)

-- Expect Toronto/Noodles/500 and Halifax/Fish/300

;WITH ranked AS -- Rank the rows by sales from 1 to x
(
    SELECT 
        ROW_NUMBER() OVER (ORDER BY sales, store, department) as 'rank', 
        store, department, sales
    FROM @tbl
)

SELECT store, department, sales
FROM ranked
WHERE rank in (
    SELECT max(rank) -- chose the highest ranked per store
    FROM ranked
    GROUP BY store
)

-- Another way
SELECT store, department, sales
FROM (
    SELECT 
        DENSE_RANK() OVER (PARTITION BY store ORDER BY sales desc, 
store desc, department desc) as 'rank',
        store, department, sales
    FROM @tbl
) tbl
WHERE rank = 1

-- This will bring back 2 rows for Toronto
select tbl.store, department, sales
from @tbl tbl
    join (
        select store, max(sales) as maxSales from @tbl group by store
    ) tempTable on tempTable.store = tbl.store 
           and tempTable.maxSales = tbl.sales 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-04T00:42:21.650

从 2005 年起，这将在 SQL Server 中工作：

```
with data as
(select store, department, sales
from <your query>),
 maxsales as
(select store,  sales = max(sales)
from data
group by store)
select store, (select top 1 department from data where store = t.store and sales = t.sales order by [your criteria for ties]), sales
from maxsales m 
```

我假设您只想在出现联系时显示 1 个部门，因此前 1 个和 [您的联系标准] 可以区分它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-04T00:42:39.967

也许这可以工作。不过没试过，可能有更好的解决方案...

```
select yourTable.store, dept, sales
from yourTable
join (
  select store, max(sales) as maxSales from yourTable group by store
) tempTable on tempTable.store = yourTable.store 
           and tempTable.maxSales = yourTable.sales 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-04T01:13:06.817

这将在没有临时表的 SQL Server 中工作：

```
SELECT Store, Department, Sales FROM
(SELECT Store, Department, Sales,
DENSE_RANK()  OVER (PARTITION BY Store
ORDER BY Sales DESC) AS Dense_Rank
FROM Sales) A WHERE Dense_Rank = 1 
```

WHERE "Sales" = 您的原始查询

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-04T01:16:17.260

这将起作用

```
Select Store, Department, Sales
From yourTable A
Where Sales = (Select Max(Sales)
               From YourTable
               Where Store = A.Store) 
```

# sql - 在 ms-sql 2000 的 where 子句中使用别名列

> ID：260399
> 
> 赞同：11
> 
> 时间：2008-11-04T00:06:13.020
> 
> 标签：sql, sql-server, tsql

我知道您不能在 T-SQL 的 where 子句中使用别名列；但是，Microsoft 是否为此提供了某种解决方法？

> **相关问题：**
> 
> *   [Where 子句中的未知列](https://stackoverflow.com/questions/200200/can-you-use-an-alias-in-the-where-clause-in-mysql)
> *   [你可以在mysql的WHERE子句中使用别名吗？](https://stackoverflow.com/questions/153598/unknown-column-in-where-clause)
> *   [OpenQuery 结果中的 SQL 语句出现“无效的列名”错误](https://stackoverflow.com/questions/46354/invalid-column-name-error-on-sql-statement-from-openquery-results)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-11-04T00:23:19.863

一种解决方法是使用派生表。

例如：

```
select *
from 
   (
   select a + b as aliased_column
   from table
   ) dt
where dt.aliased_column = something. 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T01:52:16.317

根据您的别名，您可以将其转换为用户定义的函数并在两个地方引用它。否则，您在多个位置复制别名代码，这往往会变得非常难看，如果您也在该列上订购，则意味着更新 3+ 个点。

# database - 跨分片搜索？

> ID：260403
> 
> 赞同：9
> 
> 时间：2008-11-04T00:06:34.813
> 
> 标签：database, scalability, sharding

**精简版**

如果我将用户分成碎片，我如何提供“用户搜索”？显然，我不希望每次搜索都击中每个碎片。

**长版**

通过分片，我的意思是有多个数据库，每个数据库都包含总数据的一小部分。对于（一个天真的）示例，数据库 UserA、UserB 等可能包含名称以“A”、“B”等开头的用户。当一个新用户注册时，我简单地检查他的名字并将他放入正确的数据库。当返回的用户登录时，我会再次查看他的姓名以确定从中提取信息的正确数据库。

分片与读取复制的优势在于读取复制不会扩展您的写入。所有发送到主服务器的写入都必须发送到每个从服务器。从某种意义上说，它们都承载相同的写入负载，即使读取负载是分布式的。

同时，分片不关心彼此的写入。如果 Brian 在 UserB 分片上注册，则 UserA 分片不需要听到它。如果 Brian 向 Alex 发送消息，我可以在 UserA 和 UserB 分片上记录该事实。这样，当 Alex 或 Brian 登录时，他可以从自己的分片中检索所有发送和接收的消息，而无需查询所有分片。

到目前为止，一切都很好。搜索呢？在此示例中，如果 Brian 搜索“Alex”，我可以检查 UserA。但是，如果他用姓氏“史密斯”搜索亚历克斯呢？每个碎片都有史密斯。从这里，我看到两个选项：

1.  让应用程序在每个分片上搜索 Smiths。这可以缓慢（连续查询每个分片）或快速（并行查询每个分片）完成，但无论哪种方式，每个分片都需要参与每次搜索。就像读取复制不会扩展写入一样，搜索命中每个分片也不会扩展您的搜索。您可能会遇到搜索量高到足以压倒每个分片的时间，而添加分片对您没有帮助，因为它们都获得相同的量。
2.  某种本身可以容忍分片的索引。例如，假设我要搜索的字段数量恒定：名字和姓氏。除了 UserA、UserB 等之外，我还有 IndexA、IndexB 等。当新用户注册时，我会将他附加到我希望找到他的每个索引上。所以我把 Alex Smith 放到 IndexA 和 IndexS 中，他可以在 "Alex" 或 "Smith" 上找到，但没有子字符串。通过这种方式，您不需要查询每个分片，因此搜索可能是可扩展的。

那么搜索可以缩放吗？如果是这样，这种索引方法是否正确？还有其他的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-06T02:20:21.373

没有灵丹妙药。

连续搜索每个分片是不可能的，显然，由于您将产生难以置信的高延迟。

因此，如果必须，您希望并行搜索。

有两个现实的选项，您已经列出了它们——索引和并行搜索。请允许我更详细地说明您将如何设计它们。

您可以使用的关键见解是，在搜索中，您很少需要完整的结果集。您只需要结果的第一页（或第 n 页）。因此，您可以使用相当多的回旋空间来减少响应时间。

**索引**

如果您知道搜索用户的属性，您可以为他们创建自定义的、单独的索引。您可以构建自己的[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)，它将指向每个搜索词的 (shard, recordId) 元组，也可以将其存储在数据库中。懒惰地、异步地更新它。我不知道您的应用程序要求，甚至可能只在每晚重建索引（这意味着您在任何一天都不会拥有最新的条目——但这对您来说可能没问题）。确保优化此索引的大小，使其适合内存；请注意，如果需要，您可以对该索引进行分片。

自然，如果人们可以搜索类似的东西`"lastname='Smith' OR lastname='Jones'"`，您可以读取 Smith 的索引，读取 Jones 的索引，然后计算并集——您不需要存储所有可能的查询，只需要存储它们的构建部分。

**并行搜索**

对于每个查询，向每个分片发送请求，除非您知道要查找哪个分片，因为搜索恰好在分布键上。使请求异步。获得第一页结果后立即回复用户；收集其余的并在本地缓存，这样如果用户点击“下一步”，您就可以准备好结果，而无需重新查询服务器。这样，如果某些服务器比其他服务器花费的时间更长，则您无需等待它们为请求提供服务。

当您使用它时，记录分片服务器的响应时间，以观察不均匀数据和/或负载分布的潜在问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T00:32:18.037

我假设您正在谈论分片：http: [//highscalability.com/unorthodox-approach-database-design-coming-shard](http://highscalability.com/unorthodox-approach-database-design-coming-shard)

如果您阅读那篇文章，他会详细介绍您的问题，但回答很短，您可以编写自定义应用程序代码来将不同的分片组合在一起。您可以进行一些智能哈希来查询单个分片并将数据插入分片。您需要提出更具体的问题才能获得更具体的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T00:37:56.433

实际上，您确实需要每次搜索都命中每个分片，或者至少每次搜索都需要针对包含来自所有分片的数据的索引执行，这归结为同一件事。

假设您基于用户的单个属性进行分片，可能是用户名的哈希。如果您的搜索功能允许用户根据用户的其他属性进行搜索，那么很明显没有单个分片或分片子集可以满足查询，因为任何分片都可能包含与查询匹配的用户。您不能在执行搜索之前排除任何分片，这意味着您必须针对所有分片运行查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-06T20:42:45.563

您可能想查看 Sphinx ( [http://www.sphinxsearch.com/articles.html](http://www.sphinxsearch.com/articles.html) )。它支持分布式搜索。GigaSpaces 具有并行查询和合并支持。这也可以通过 MySQL 代理 ( [http://jan.kneschke.de/2008/6/2/mysql-proxy-merging-resultsets](http://jan.kneschke.de/2008/6/2/mysql-proxy-merging-resultsets) ) 来完成。

构建非分片索引类型首先破坏了分片的目的 :-) 如果需要分片，集中式索引可能不起作用。

我认为所有的碎片都需要同时被击中。结果需要过滤、排序、排序、分组，并从所有分片中合并结果。如果分片本身不堪重负，您必须执行通常的操作（重新分片、扩大规模等）以再次使它们不堪重负。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-02-11T01:40:25.343

RDBM 不是文本搜索的好工具。看看[Solr](http://lucene.apache.org/solr/)会好很多。Solr 和数据库之间的性能差异将达到 100X 的数量级。

# c - 如何在 C 程序中编译 Perl 代码？

> ID：260406
> 
> 赞同：7
> 
> 时间：2008-11-04T00:08:16.307
> 
> 标签：c, perl, embedded-language

我有一个带有嵌入式 Perl 解释器的 C 程序。我希望能够从程序中预编译一些 Perl 代码。我怎么做？

基本原理（如果有人感兴趣的话）是能够编译一次，存储解析树，并执行多次（只要编译后的代码不变）。

谢谢！马杜

PS：我正在使用 Perl-5.8，不过如果 Perl-6.0 以任何方式让这变得更容易，我会很高兴。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-04T00:15:28.383

[这是在 C 程序中嵌入 Perl 解释器](http://perldoc.perl.org/perlembed.html)时的默认行为。在您运行 perl_parse() 来解析 Perl 程序之后，您可以在同一个解析的 Perl 程序中反复使用 perl_run() 和 call_argv()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-06T08:51:21.943

您可以使用[perlcc](http://search.cpan.org/dist/B-C/script/perlcc.PL)创建可执行文件或 C 源代码。

要编译您的 C 代码，您需要使用 perl 的库（可以是`-lperl`or `-llibperl`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-06T06:29:52.150

参考 Perl 6，它并不完整。但是 5.10.0 可能会修复 5.8 以上的一些错误。

# session - 在会话中存储用户 ID？

> ID：260408
> 
> 赞同：4
> 
> 时间：2008-11-04T00:08:59.143
> 
> 标签：session

为了呈现用户特定的数据，我在哪里存储当前登录用户的用户 ID？会议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-04T00:12:25.050

是的，会议将是提供该信息的合适场所。假设您正在使用嵌入到 ASP.NET 框架中的身份验证功能，您将要么从 HttpContext.Current.User.Identity.Name 加载用户 ID，要么从该值中查找它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T00:11:23.460

是的。会话用于存储用户特定的数据。

# ms-access - 如何在 Microsoft Access 中打印动态表单？

> ID：260411
> 
> 赞同：2
> 
> 时间：2008-11-04T00:09:20.780
> 
> 标签：ms-access

我有一个访问表单，其中每条记录都有一些动态计算的信息。我正在使用 Form_Current() 事件；每次选择记录时，我都会根据记录的 ID 计算一些信息并更改一些表单控件以反映它。

我想打印一堆这样的记录。但是，在这种情况下，Form_Current() 事件不会被触发，并且打印的记录缺少该动态信息。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-04T02:06:40.357

进行查询以计算您需要作为报告来源的信息。如果需要进行复杂计算，您可以使用 vba 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-07T04:47:45.413

Luis Oliveira 在评论中问道：

> 我的函数在表单本身中，这就是为什么我不能从 SQL 查询中调用它的原因，我想？

默认情况下，表单中的函数是私有的。如果公开，则只能在表单打开时调用它们，如 Forms!MyForm.PublicFunction()。我建议不要这样做。相反，将函数移动到公共模块（可能需要修改以删除对表单控件/字段的引用）。

# amazon-ec2 - Amazon EC2 中的负载平衡？

> ID：260413
> 
> 赞同：47
> 
> 时间：2008-11-04T00:10:24.600
> 
> 标签：amazon-ec2, load-balancing, scaling, haproxy

我们已经在 Amazon EC2 中与[HAProxy](http://haproxy.1wt.eu/)斗争了几天；到目前为止，体验非常好，但我们一直坚持从软件负载平衡器中挤出更多性能。我们并不完全是 Linux 网络专家（我们通常是一家 .NET 商店），但到目前为止，我们一直坚持自己的想法，尝试设置适当的 ulimit，检查内核消息和 tcpdump 是否存在任何违规行为。到目前为止，我们已经达到了大约 1,700 个请求/秒的稳定期，此时客户端超时比比皆是（我们一直在使用和调整[httperf](http://www.hpl.hp.com/research/linux/httperf/)以此目的）。我和一位同事正在收听最新的 Stack Overflow 播客，其中 Reddit 的创始人注意到他们的整个网站都运行在一个 HAProxy 节点上，并且到目前为止还没有成为瓶颈。确认！要么不知何故看不到那么多并发请求，要么我们做错了什么，要么 EC2 的共享特性限制了 Ec2 实例的网络堆栈（我们使用的是大型实例类型）。考虑到 Joel 和 Reddit 的创始人都同意网络可能是限制因素这一事实，这可能是我们看到的限制吗？

任何想法都非常感谢！

**编辑**看起来实际问题实际上不是负载均衡器节点！在这种情况下，罪魁祸首实际上是运行 httperf 的节点。当 httperf 为每个请求构建和拆除一个套接字时，它会在内核中花费大量的 CPU 时间。当我们提高请求率时，TCP FIN TTL（默认为 60 秒）使套接字保持的时间过长，而 ip_local_port_range 的默认值对于这种使用场景来说太低了。基本上，在客户端（httperf）节点不断创建和销毁新套接字的几分钟后，未使用的端口数用完，随后的“请求”在此阶段出错，产生低请求/秒数和大量的错误。

我们也看过 nginx，但我们一直在使用 RighScale，他们有 HAProxy 的插入式脚本。哦，除非证明绝对必要，否则我们 [当然] 的最后期限太紧了，无法更换组件。幸运的是，在 AWS 上允许我们并行使用 nginx 测试另一个设置（如果有必要的话），并在稍后一夜之间进行切换。

[本页](https://www.frozentux.net/ipsysctl-tutorial/chunkyhtml/variablereference.html#AEN234)很好地描述了每个 sysctl 变量（在这种情况下，调整了 ip_local_port_range 和 tcp_fin_timeout）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-18T12:32:59.337

没有直接回答这个问题，但 EC2 现在支持通过[Elastic Load Balancing](http://aws.amazon.com/elasticloadbalancing/)进行负载平衡，而不是在 EC2 实例中运行您自己的负载平衡器。

**编辑：**亚马逊的 Route 53 DNS 服务现在提供了一种将顶级域指向具有“别名”记录的 ELB 的方法。由于 Amazon 知道 ELB 的当前 IP 地址，因此它可以为该当前 IP 返回一条 A 记录，而不必使用 CNAME 记录，同时仍然可以不时地自由更改 IP。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-04T15:29:48.880

不是您问题的真正答案，但 nginx 和 pound 作为负载平衡器都享有盛誉。Wordpress 刚刚[切换到 nginx](http://barry.wordpress.com/2008/04/28/load-balancer-update/)，效果很好。

但更具体地说，要调试您的问题。如果您没有看到 100% 的 cpu 使用率（包括 I/O 等待），那么您是网络绑定的，是的。EC2 内部使用千兆网络，尝试使用 XL 实例，这样您就拥有自己的底层硬件，并且不必共享该千兆网络端口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-10-02T21:44:11.483

是的，您可以使用异地负载均衡器。在裸机上 LVS 是一个不错的选择，但是您的延迟会很糟糕！有传言称亚马逊将解决 CNAME 问题。然而，他们不太可能添加 https、深度或自定义健康检查、反馈代理、url 匹配、cookie 插入（一些具有良好架构的人也会说得很对。）但这就是为什么 Scalr、RightScale 和其他人通常使用 HAProxy 的两个他们在循环 DNS 条目后面。在 Loadbalancer.org，我们即将推出我们自己的 EC2 负载平衡设备：http: [//blog.loadbalancer.org/ec2-load-balancer-appliance-rocks-and-its-free-for-now-anyway/](http://blog.loadbalancer.org/ec2-load-balancer-appliance-rocks-and-its-free-for-now-anyway/) 我们正计划使用 SSH 脚本以与 rightscale 相同的方式与自动缩放集成，欢迎在博客上发表任何评论。谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-05T17:26:18.597

我会考虑切换到场外负载均衡器，而不是在云中，并在其上运行类似 IPVS 的东西。[它离开亚马逊云的原因是因为内核的东西]如果亚马逊不限制来自亚马逊云的数据包的源 IP，你可以使用单向负载平衡机制。我们做了这样的事情，它让我们同时收到了大约 800,000 个请求[尽管我们不处理延迟问题]。我还会说使用“ab2”（apache bench），因为它对用户更友好，并且在我的拙见中更易于使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-17T21:28:27.960

即使你的问题解决了。KEMP Technologies 现在拥有一个成熟的 AWS 负载均衡器。可能会为您省去一些麻烦。

# wpf - 优秀 UI 设计师的特点

> ID：260415
> 
> 赞同：8
> 
> 时间：2008-11-04T00:11:17.783
> 
> 标签：wpf, silverlight, user-interface

优秀的 UI 设计师的特点是什么？如今，与交互设计能力相比，一个人必须具备多少图形设计能力。随着 WPF 和 Silverlight 的出现，我看到这一点变得越来越重要。

我个人认为自己擅长交互设计，但想加强我在图形设计领域的技能。甚至有可能学习这些技能，还是你与生俱来？任何人都可以推荐任何有帮助的好书或资源吗？

谢谢，

克雷格

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-04T00:14:31.270

试试[非设计师的设计书](https://rads.stackoverflow.com/amzn/click/com/1566091594)。

根据我的经验，界面设计本身就是一项技能。平面设计师擅长制作精美但完全令人困惑和无法使用的界面。

我使用了一些技巧，但它们主要涉及从设计良好的应用程序和网站中窃取设计元素。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-04T00:42:47.627

根据我的经验，优秀 UI 设计师的标志不一定是时髦的、全能的、不是那么酷的解决方案，而是通常几乎不可见的解决方案，因为它只需要用户很少的帮助即可*工作*：

*   控制和信息布局合理、直观且一致。
*   访问功能的难易程度与其使用频率成正比。
*   用户发现几乎不可能*不*正确使用产品。
*   这样做时它打破了“规则”，增加了它的可用性。
*   它以“邻家女孩（或男人）”的方式很有吸引力。令人愉悦，但不会分散注意力。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-04T00:14:25.107

我会看任何爱德华·塔夫特的书。

Jakob Nielson 也是一位好作家。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-04T00:15:07.807

以我的经验，找到一个制作漂亮页面的人比找到一个能做真正令人惊叹的、微妙的、非显而易见的用例的人容易得多。根本不是表维护输入表单的用例。

如果你已经在那里，我建议你可以考虑找一个 gui 艺术家来结对编程。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-04T02:18:33.343

大多数人可以查看用户界面（就像他们查看任何图形一样）并说“看起来不错”或“看起来不太好”。通常使图形人员能够制作出*好看*的材料的原因是愿意几乎无休止地改变和调整事物，甚至放弃整条线的努力，直到出现看起来不错的东西。大多数程序员对这种事情没有耐心，所以他们的用户界面看起来像是由一个不太关心他们长什么样的人设计的。

在更深层次上，“天赋”或“先天能力”的概念最常被用作不尝试某事的借口（例如，“我没有音乐天赋，所以我什至不会尝试弹钢琴”）。如果你想擅长某件事，你必须经常练习——别无选择。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-08T06:57:03.407

出色的用户界面意味着：

*   您看到的所有工具/数据都是**可操作的**

也就是说，屏幕上的一切都是有意义的。如果它没有意义或不影响你*接下来*要做的事情，它就不应该存在。

*   **理解和使用约定**

这是大多数时候。有时，一位出色的 UI 设计师会发明一种新的界面模型（发明标签是为了更好地处理照片共享）。

*   让一切**无摩擦**

如果你想做某事，你想用尽可能少的步骤来做。

*   **让**一切都变得清晰易懂

 **你不能减少对好的 UI 设计的需求，至少要让人赏心悦目。如果你不能在很短的时间内直观地消化一些东西，那么它可能不是一个好的 UI 的好例子。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-04T05:49:12.640

这完全取决于最终用户的心智模型——他们在脑海中形成的抽象结构，使他们在探索您的 UI 设计时“知道”要尝试什么。作为一名 UI 开发人员，您需要清楚地理解并为他们创建这种心理模型——而且很多时候它几乎与底层软件系统的组成无关。因此，如果某些 UI 难以开发，请不要感到惊讶。

一旦用户开始可视化并接受这种心理模型，他们就会开始根据逻辑填充缺失的部分来探索和尝试事物。好的 UI 设计会给他们带来预期的结果，糟糕的 UI 会阻碍和混淆，他们会想追捕你。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-11-04T01:15:00.960

另一方面，如果我发现某些内容布局不佳、框不对齐、使用笨拙、语法差，我会认为程序员的内部代码同样马虎。我预计 UI 不佳的应用程序中会出现更多错误。

它有点过时了，但我喜欢“日常事物的设计”。好的 UI 会让用户在没有注意到的情况下感觉良好。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-11-04T03:07:38.847

绝对有可能学习这些技能。

很多人感到困惑的是艺术和设计之间的区别。在许多方面，艺术和设计之间的区别在于艺术没有低调的功能。看起来不错……因为确实如此。设计通常是有理由存在的。要成为一名优秀的设计师，必须了解什么是优秀的设计，以及如何有效地打破逻辑界限，以尽可能少的认知负荷创造出作品。如果新的 UI 设计允许我以两倍于旧的速度执行任务，那就更好了。如果我喜欢使用新的体验，那就更好了。

当然，设计也有艺术的一面，通过运用天赋和创造力，设计师可以做出更好的设计。

如果您想在设计方面变得更好，那么您可以做两件事：

1.  尽可能阅读有关设计的所有内容。找到最好的设计博客并将它们粘贴到您的 RSS 提要中。阅读所有关于设计的内容。
2.  设计一些东西，然后再设计一次，再一次，然后停止！现在，设计别的东西...
3.  尽可能多地了解 HCI。那里有一些很棒的人机交互书籍，甚至超越了明显的选择。阅读尽可能多的书。
4.  加入设计社区并监督人们的工作。如果您有机会，请与比您更好的人合作，看看他们的表现如何。

我对艺术的了解还不够，不能说你是否可以学习如何成为一名艺术家。我所知道的是，每个人都天生具有创造力。你只需要学习如何在你的工作中释放它，这意味着学习如何有效地使用你的工具。一旦你能做到这一点，你就可以进行实验。

我喜欢认为，我们今天使用的许多常规 HCI 概念不仅仅是来自计算思维；更多的艺术愿景变得栩栩如生。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-04T14:25:42.550

这里有很多好的指南链接，但最初的问题仍然存在：“好的 UI 设计师的特征是什么？”

查看流程、系统或实践并设计对其进行最大改进的界面的能力。

这不是关于漂亮的界面，而是关于在那种确切情况下最有效的方法。我对成为更好的用户界面设计师的建议是更好地把自己置于用户的位置。我们都可以改进。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-25T20:01:27.350

你可以找到很多能够画出漂亮图片的设计师，但最好有界面设计的工作知识。内在的能力是预测用户将如何与应用程序交互，而不会因应用程序应该如何工作的知识而受到偏见。

关于你的第二个问题 - 在我看来，WPF 和 Silverlight 的编程模型允许更清晰地分离设计师和编码器（即 Microsoft Expression Design 是为设计师设计的，.NET 3.5 是为编码器设计的，而 Microsoft Epxression Blend 则处于中间位置）。话虽这么说，最好有一个既能处理设计又能处理代码的 UI 设计师。

只需在其中放一本我喜欢的书[——Luke Wroblewski 的 Web 表单设计](http://www.rosenfeldmedia.com/books/webforms/)——你可以以低于 20 美元的价格获得该书的 PDF 版本。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-11-04T02:56:24.297

作为在 Windows 中设计用户界面的资源，我想说[Windows Vista 用户体验指南](http://msdn.microsoft.com/en-us/library/aa511258.aspx)为设计用户界面提供了很好的提示和示例。

它提供了来自实际 Microsoft 产品的用户界面的好坏示例，因此我认为它实际上是非常客观且有价值的指南，可在学习用户界面设计时用作参考。

由于它是作为 Windows Vista 应用程序的指南而设计的，因此它非常适合 WPF 的 UI 设计，但所提供的技巧足够通用，它们也可以应用于不基于 Windows 的用户界面。

我将添加一个指向相关问题的指针：[Java User Interface Specification](https://stackoverflow.com/questions/113464/java-user-interface-specification)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-11-04T03:00:39.017

Joel Spolsky 在“Hallway Usability Test”以及[一系列关于 UI 设计的帖子中](http://www.joelonsoftware.com/uibook/chapters/fog0000000057.html)得到了一个简单而优雅的想法。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-11-04T03:01:33.087

我想我建议的第一本书是“囚犯正在经营庇护”。这需要一点时间才能进入，但结果证明这是一本很棒的书。

在线...
w3 有一些关于如何设计网页的好主意。
pda 设计师的 gui 设计应该需要阅读掌上编码的禅宗。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-11-04T03:06:19.723

这可以争论到最后，我个人认为交互设计和图形设计是两个完全不同的东西。

但他们都可以学习，至少达到令人满意的水平。除非你有“天赋”，否则你可能永远不会真正擅长它。

我自己没有读过但我听到很多人推荐的一本书是史蒂夫克鲁格的[“不要让我思考”](http://en.wikipedia.org/wiki/Don't_Make_Me_Think)。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-11-04T03:11:29.493

我专门为 UI 和设计推荐的网站是：

1.  [警报框](http://www.useit.com/alertbox/)，特别是关于网页设计的。那里有很好的例子、用例和研究。
2.  [人性化](http://humanized.com/about/)，设计原则。检查博客，特别是[这个](http://humanized.com/weblog/2006/07/22/know_when_to_stop_designing_quantitatively/)和它的[设置](http://humanized.com/weblog/2006/05/12/interface_math_1/)文章。
3.  [阿扎拉斯金的](http://www.azarask.in/blog/)博客。他是 Humanized（现在是 Mozilla）的一员，他的个人博客是对界面设计的深刻评论。

这些网站的有趣之处在于，它们不仅提供了 UI“注意事项”的示例，而且还提供了具体的指标和方法来支持这些示例，您可以实际使用这些指标和方法来衡量 UI 的“好”程度。Aza 的博客特别有趣，因为他在他参与的几个项目中进行了设计迭代，并讨论了许多 UI 决策的“原因”。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-11-04T02:38:10.777

[About Face](http://www.cooper.com/insights/books/)也是一本不错的书。

**微妙之处**总是值得警惕的。苛刻的渐变和一些颜色组合只是一种痛苦。

# visual-studio - 运行 Visual Studio ASP.NET 单元测试时出现 500 错误

> ID：260432
> 
> 赞同：16
> 
> 时间：2008-11-04T00:19:12.883
> 
> 标签：visual-studio, visual-studio-2008, unit-testing

我的单元测试项目中有以下方法：

```
 [TestMethod]
    [HostType("ASP.NET")]
    [UrlToTest("http://localhost:3418/Web/SysCoord/ChooseEPA.aspx")]
    [AspNetDevelopmentServerHost("%PathToWebRoot%")]
    public void TestMethod1()
    {
        Page page = TestContext.RequestedPage;
        Assert.IsTrue(false, "Test ran, at least.");
    } 
```

我得到了这个例外：

测试适配器“WebHostAdapter”在运行测试“TestMethod1”时引发异常。网站无法正确配置；获取 ASP.NET 进程信息失败。请求“ [http://localhost:3418/SysCoord/VSEnterpriseHelper.axd](http://localhost:3418/SysCoord/VSEnterpriseHelper.axd) ”返回错误：远程服务器返回错误：（404）未找到。远程服务器返回错误：(404) Not Found。

该页面在 url 的浏览器中正常工作：[http://localhost:3418/Web/SysCoord/ChooseEPA.aspx](http://localhost:3418/Web/SysCoord/ChooseEPA.aspx)。

此物理路径为：C:\ESI\HR_Connect2\BenefitChangeSystem\Application_DEV\Web\SysCoord。

任何想法，将不胜感激。

**更新 1**

根据本文将以下内容添加到我的 web.config 文件中。还使 web.config 可写并杀死/重新启动了开发 Web 服务器。行为没有变化。

```
<location path="VSEnterpriseHelper.axd">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

**更新 2**

将 AspNetDevelopmentServerHost 属性更改为等效于 [AspNetDevelopmentServerHost("%PathToWebRoot%\solutionfolder\webfolder", "/webfolder")] 解决了 404 问题。

不幸的是，测试开始返回 500 错误。进步，但不多。对干净项目的反复试验得出的结论是，对 web.config 中自定义类的引用导致了问题。

例如：

```
 <profile enabled="true" defaultProvider="MyProfileProvider">
        <providers>
            <add name="MyProfileProvider" connectionStringName="ProfileConnectionString" applicationName="/MyApp" type="System.Web.Profile.SqlProfileProvider"/>
        </providers>
        <properties>
            <add name="Theme" type="String" defaultValue="Default"/>
            <add name="LastLogon" type="DateTime"/>
            <add name="LastLogonIp" type="String"/>
            <!--
            <add name="EmployeeSearchCriteria" type="MyApplicationFramework.Profile.EmployeeSearchCriteria"/>
            <add name="DocumentSearchCriteria" type="MyApplicationFramework.Profile.DocumentSearchCriteria"/>
            -->
        </properties>
    </profile> 
```

使用上面注释掉的标准类型，测试运行良好。未注释它们，返回 500 错误。

过去有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2010-10-21T04:48:51.070

我之前遇到过这个问题，在阅读了所有我可以用谷歌搜索的内容（包括这个线程）之后，我放弃了。

就我而言，解决方案很简单。我所要做的就是不使用 ASP.NET 测试属性，而只是将 MVC 项目作为 DLL 进行测试。

### 步骤1

从测试中删除额外的属性。

```
[TestMethod]
public void TestMethod1()
{
    Page page = TestContext.RequestedPage;
    Assert.IsTrue(false, "Test ran, at least.");
} 
```

### 第2步

在代码覆盖率中，取消选中 MVC 项目并手动添加 MVC 项目的 DLL。

![替代文字](https://i.stack.imgur.com/A9H6t.png)

瞧，它被检测为普通程序集，没有错误，不会启动开发服务器，也不会使团队构建失败。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-08-18T19:14:24.967

我发现使用 vs2010 并不仅限于 4.0 应用程序。但是，我发现如果测试 Web 应用程序并且您使用的是旧的 System.Web.Extensions 版本重定向，您可能会收到错误消息。**从Web.config**文件中删除以下部分解决了我的问题：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1" appliesTo="v2.0.50727">
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
      <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
      <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-27T20:15:44.553

我遇到了和你一样的问题，但是我的经历有点不同。

我在 vista x64 上，我的开发人员在 xp x64 上……他们根本没有遇到任何问题。我刚刚升级，无法为 asp.net MVC 项目运行任何单元测试。我收到了与您收到的相同的 500 错误。

我关闭了代码覆盖，一切都神奇地开始工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-06T15:15:48.250

根据您的证据，我猜想`MyApplicationFramework.Profile.EmployeeSearchCriteria`单元测试项目或 Web 项目中都缺少对包含的任何程序集的引用-尽管我真的认为您只需要 Web 项目中的引用，但我不了解VS Web 服务器在用作单元测试的一部分时的行为方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-01-17T00:07:14.430

在使用 Visual Studio 2010 对 Web 应用程序进行单元测试时，我收到了相同的错误消息。唯一的区别是我使用的是 IIS，即我省略了该 `[AspNetDevelopmentServerHost("%PathToWebRoot%")]`指令。

我怀疑问题在于我使用的是 IIS 5.1 版。更多在这里：

[http://ibsta.blogspot.com/2011/01/unit-testing-fun-under-visual-studio.html](http://ibsta.blogspot.com/2011/01/unit-testing-fun-under-visual-studio.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-08-31T23:52:33.430

我在测试项目为 .NET 3.51 的 Web 服务时遇到了类似的问题。我收到 IIS 500 错误。根据 Hal Diggs 的评论，我删除了旧的程序集绑定，它起作用了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-10-12T13:12:28.310

我设置了一个默认的单元测试，它弹出了错误，把我带到了这里。我刚刚删除了以下内容（下）。然后点击调试当前上下文和繁荣，很好：S。

```
 [HostType("ASP.NET")]
    [AspNetDevelopmentServerHost("C:\\Inetpub\\....] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-07-23T07:43:47.600

确保您的 Web 应用程序面向 Framework 4.0。如果您尝试测试 2.0、3.0 或 3.5 项目，您将收到 (500) Internal Server Error。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-19T08:25:08.997

I have faced same problem with unit testing. And found the problem reason and also solve it. The problem is only with access rights for the directory.

In my case I have installed VSTS on the different drive(d) then default. So only to give the full access rights to the user **PCNAME\ASPNET** for whole directory **\Program Files\Microsoft Visual Studio 9.0**.

I m using the windows XP but if u are using window server then give access rights to the user **NetworkServices**.

By this solution i have solved my problem. Hope u find something useful from this Answer.

Thanks, Priyesh Patel

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-17T17:30:45.833

像这样注释掉整个 web.config

```
<!-- <location path="VSEnterpriseHelper.axd">
    <system.web>
      <authorization>
        <allow users="?" />
      </authorization>
    </system.web>   </location>   --> 
```

它对我有用

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-08T10:45:53.323

我遇到了同样的问题。然后我检查了 web 项目和单元测试项目的属性。并发现目标框架设置不同。我将两个项目的目标框架都设置为 .Net 框架 4（在我的例子中）。最后再次运行测试方法，它工作。

谢谢。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-25T13:33:29.873

对我来说，是 Resharper 导致了这个问题。一旦我暂停它（工具 -> 选项 -> Resharper -> 常规 -> 暂停），一切正常。（使用 VS2010SP1 和 Resharper Ultimate 2016.1.2）

# xml - 保留属性空白

> ID：260436
> 
> 赞同：11
> 
> 时间：2008-11-04T00:22:01.007
> 
> 标签：xml, xslt, whitespace

免责声明：以下是针对 XML 的一种罪过。这就是为什么我试图用 XSLT 来改变它:)

我的 XML 目前看起来像这样：

```
<root>
    <object name="blarg" property1="shablarg" property2="werg".../>
    <object name="yetanotherobject" .../>
</root> 
```

是的，我将所有文本数据放入属性中。我希望 XSLT 可以拯救我；我想朝着这样的方向发展：

```
<root>
    <object>
        <name>blarg</name>
        <property1>shablarg</name>
        ...
    </object>
    <object>
        ...
    </object>
</root> 
```

到目前为止，我实际上已经完成了所有这些工作，除了我对 XML 的罪过更加……特别。一些标签如下所示：

```
<object description = "This is the first line

This is the third line.  That second line full of whitespace is meaningful"/> 
```

我在linux下使用xsltproc，但它似乎没有任何选项来保留空格。我尝试使用 xsl:preserve-space 和 xml:space="preserve" 无济于事。我发现的每个选项似乎都适用于在元素本身内保留空格，但不适用于属性。每次，上面的内容都会更改为：

```
这是第一行 这是第三行。充满空格的第二行是有意义的

```

所以问题是，我可以保留属性空白吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-04T00:42:37.487

这实际上是一个原始 XML 解析问题，不是 XSLT 可以帮助您解决的问题。根据 XML 标准中的“3.3.3 属性值规范化”，XML 解析必须将该属性值中的换行符转换为空格。因此，当前读取您的描述属性并保留换行符的任何内容都是错误的。

您可以通过预处理 XML 以将换行符转义为 & #10; 来恢复换行符。字符引用，只要您还没有在不允许使用 charrefs 的地方换行，例如在标签正文中。Charrefs 应该作为控制字符一直存在到属性值，然后您可以将它们转换为文本节点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-04T00:35:16.830

根据[Annotated XML Spec](http://www.xml.com/axml/testaxml.htm)，属性值中的空格由 XML 处理器规范化（参见 3.3.3 上的 (T) 注释）。所以，看起来答案可能是否定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T03:28:38.477

正如其他人指出的那样，XML 规范不允许在属性中保留空格。事实上，这是属性和元素之间为数不多的区别之一（另一个主要区别是元素可以包含其他标签，而属性则不能）。

您必须首先在 XML 之外处理文件以保留空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-21T20:19:28.547

如果您可以控制您的 XML 处理器，那么您就可以做到。

从我的[其他答案](https://stackoverflow.com/a/29780972/611007)（链接了许多参考资料）：

如果您有类似的 XML

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE elemke [
<!ATTLIST brush wood CDATA #REQUIRED>
]>

<elemke>
<brush wood="guy&#xA;threep"/>
</elemke> 
```

和一个像 XSL

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet  version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template name="split">
  <xsl:param name="list"      select="''" />
  <xsl:param name="separator" select="'&#xA;'" />
  <xsl:if test="not($list = '' or $separator = '')">
    <xsl:variable name="head" select="substring-before(concat($list, $separator), $separator)" />
    <xsl:variable name="tail" select="substring-after($list, $separator)" />

    <xsl:value-of select="$head"/>
    <br/><xsl:text>&#xA;</xsl:text>
    <xsl:call-template name="split">
        <xsl:with-param name="list"      select="$tail" />
        <xsl:with-param name="separator" select="$separator" />
    </xsl:call-template>
  </xsl:if>
</xsl:template>

<xsl:template match="brush">
  <html>
  <xsl:call-template name="split">
    <xsl:with-param name="list" select="@wood"/>
  </xsl:call-template>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

你可以得到一个像这样的html：

```
<html>guy<br>
   threep<br>

</html> 
```

使用像这个[撒克逊](http://sourceforge.net/projects/saxon/files/Saxon-HE/)命令行这样的处理器测试/生产：

```
java -jar saxon9he.jar -s:in.xml -xsl:in.xsl -o:out.html 
```

# wpf - 将一个元素绑定到两个源

> ID：260439
> 
> 赞同：39
> 
> 时间：2008-11-04T00:25:18.317
> 
> 标签：wpf, binding

我目前有两个接受任何数字的文本框。我有一个文本块，它接受输入的两个数字并计算平均值。

我想知道是否有一种方法可以将此文本块绑定到两个文本框并使用自定义转换器来计算平均值？我目前正在两个文本框中捕获文本更改事件并以这种方式计算平均值，但我假设数据绑定会更有效和更容易。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2008-11-04T00:30:20.257

你正在寻找[`MultiBinding`](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx).

你的`XAML`会看起来像这样：

```
<TextBlock>
  <TextBlock.Text>
    <MultiBinding Converter="{StaticResource myConverter}">
      <Binding Path="myFirst.Value" />
      <Binding Path="mySecond.Value" />
    </MultiBinding>
  </TextBlock.Text>
</TextBlock> 
```

合理替换`myConverter`,`myFirst.Value`和`mySecond.Value`.

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2008-11-04T00:55:32.810

创建一个实现 IMultiValueConverter 的转换器。它可能看起来像这样：

```
class AverageConverter : IMultiValueConverter
{
    #region IMultiValueConverter Members
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        int total = 0;
        int number = 0;
        foreach (object o in values)
        {
            int i;
            bool parsed = int.TryParse(o.ToString(), out i);
            if (parsed)
            {
                total += i;
                number++;
            }
        }
        if (number == 0) return 0;
        return (total/number).ToString();
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

多值转换器接收一个对象数组，每个绑定一个对象数组。您可以根据需要处理这些，具体取决于您是否打算将其用于 double 或 int 或其他。

如果这两个文本框是数据绑定的，您可以在文本块的多重绑定中使用相同的绑定（请记住在属性更改时通知以便更新平均值），或者您可以通过 ElementName 引用文本框来获取文本值。

```
<TextBox Text="{Binding Value1}" x:Name="TextBox1" />
<TextBox Text="{Binding Value2}" x:Name="TextBox2" />

<TextBlock>
   <TextBlock.Text>
      <MultiBinding Converter="{StaticResource AverageConverter}">
         <Binding ElementName="TextBox1" Path="Text" />
         <Binding ElementName="TextBox2" Path="Text" />
         <!--  OR  -->
         <!-- <Binding Path="Value1" />  -->
         <!-- <Binding Path="Value2" />  -->

      </MultiBinding>
   </TextBlock.Text>
</TextBlock> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-04T00:59:56.547

或者，您可以在后面的代码中创建一个属性，并将 TextBlock 绑定到该属性……我一直这样做，这比制作转换器要简单一些，然后在那里执行相同的代码。

示例：（在 xaml 后面的代码中）：

```
public double AvgValue
{
    get { return (valueA + valueB) / 2.0; }
} 
```

然后，在您的 XAML 中：

```
<TextBlock Text="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=AvgValue}" /> 
```

这比自定义转换器简单得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T19:42:44.500

只是将分步程序添加到蒂莫西的答案中：

1.  设置 View.TextBlock.Text 属性以绑定到 ViewModel.AvgValue 属性。
2.  捕获 TextBox 控件的 TextChanged 事件，然后在该 TextChanged 事件的处理程序中设置 AvgValue。
3.  作为步骤 2 中该处理程序的一部分，请确保引发属性更改，以便更新 TextBlock。

# mysql - 如何在 MySQL 中创建关系

> ID：260441
> 
> 赞同：108
> 
> 时间：2008-11-04T00:25:31.140
> 
> 标签：mysql, sql, foreign-keys, relational-database

在课堂上，我们都在“学习”数据库，每个人都在使用 Access。对此感到厌烦，我正在尝试做其他班级正在做的事情，但使用 MySQL 的原始 SQL 命令而不是使用 Access。

我已经设法创建了数据库和表，但是现在我如何在两个表之间建立关系？

如果我有两个这样的表：

```
CREATE TABLE accounts(
    account_id INT NOT NULL AUTO_INCREMENT,
    customer_id INT( 4 ) NOT NULL ,
    account_type ENUM( 'savings', 'credit' ) NOT NULL,
    balance FLOAT( 9 ) NOT NULL,
    PRIMARY KEY ( account_id )
) 
```

和

```
CREATE TABLE customers(
    customer_id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(20) NOT NULL,
    address VARCHAR(20) NOT NULL,
    city VARCHAR(20) NOT NULL,
    state VARCHAR(20) NOT NULL,
    PRIMARY KEY ( customer_id )
) 
```

如何在两个表之间创建“关系”？我希望为每个帐户“分配”一个 customer_id（以指示谁拥有它）。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2008-11-04T00:32:48.270

如果表是 innodb，您可以像这样创建它：

```
CREATE TABLE accounts(
    account_id INT NOT NULL AUTO_INCREMENT,
    customer_id INT( 4 ) NOT NULL ,
    account_type ENUM( 'savings', 'credit' ) NOT NULL,
    balance FLOAT( 9 ) NOT NULL,
    PRIMARY KEY ( account_id ), 
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id) 
) ENGINE=INNODB; 
```

您必须指定表是 innodb 因为 myisam 引擎不支持外键。[在这里](http://dev.mysql.com/doc/refman/5.0/en/innodb-foreign-key-constraints.html)查看更多信息。

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2008-11-04T00:37:52.223

正如 ehogue 所说，把它放在你的 CREATE TABLE 中

```
FOREIGN KEY (customer_id) REFERENCES customers(customer_id) 
```

或者，如果您已经创建了表，请使用 ALTER TABLE 命令：

```
ALTER TABLE `accounts`
  ADD CONSTRAINT `FK_myKey` FOREIGN KEY (`customer_id`) REFERENCES `customers` (`customer_id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

开始学习这些命令的一种好方法是使用[MySQL GUI 工具](http://dev.mysql.com/downloads/gui-tools/5.0.html)，它为您提供了一个更“可视化”的界面来处理您的数据库。这样做的真正好处（通过 Access 的方法）是，在通过 GUI 设计表之后，它会向您显示它将运行的 SQL，因此您可以从中学习。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-03-06T01:21:51.983

```
CREATE TABLE accounts(
    account_id INT NOT NULL AUTO_INCREMENT,
    customer_id INT( 4 ) NOT NULL ,
    account_type ENUM( 'savings', 'credit' ) NOT NULL,
    balance FLOAT( 9 ) NOT NULL,
    PRIMARY KEY ( account_id )
)

and

CREATE TABLE customers(
    customer_id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(20) NOT NULL,
    address VARCHAR(20) NOT NULL,
    city VARCHAR(20) NOT NULL,
    state VARCHAR(20) NOT NULL,
)

How do I create a 'relationship' between the two tables? I want each account to be 'assigned' one customer_id (to indicate who owns it). 
```

你必须问自己这是一对一的关系还是一对一的关系。也就是说，是否每个帐户都有一个客户，每个客户都有一个帐户。或者会有没有账户的客户。你的问题暗示后者。

如果你想有一个严格的 1 对 1 关系，只需合并两个表。

```
CREATE TABLE customers(
    customer_id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(20) NOT NULL,
    address VARCHAR(20) NOT NULL,
    city VARCHAR(20) NOT NULL,
    state VARCHAR(20) NOT NULL,
    account_type ENUM( 'savings', 'credit' ) NOT NULL,
    balance FLOAT( 9 ) NOT NULL,
) 
```

在另一种情况下，在两个表之间创建关系的正确方法是创建关系表。

```
CREATE TABLE customersaccounts(
    customer_id INT NOT NULL,
    account_id INT NOT NULL,
    PRIMARY KEY (customer_id, account_id),
    FOREIGN KEY customer_id references customers (customer_id) on delete cascade,
    FOREIGN KEY account_id  references accounts  (account_id) on delete cascade
} 
```

然后，如果您有 customer_id 并想要帐户信息，则加入 customersaccounts 和帐户：

```
SELECT a.*
    FROM customersaccounts ca
        INNER JOIN accounts a ca.account_id=a.account_id
            AND ca.customer_id=mycustomerid; 
```

由于索引，这将非常快。

您还可以创建一个 VIEW，它为您提供合并的 customersaccounts 表的效果，同时保持它们分开

```
CREATE VIEW customeraccounts AS 
    SELECT a.*, c.* FROM customersaccounts ca
        INNER JOIN accounts a ON ca.account_id=a.account_id
        INNER JOIN customers c ON ca.customer_id=c.customer_id; 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-11-04T00:36:10.650

通过 ehogue 添加到评论中，您应该使两个表上的键的大小匹配。而不是

```
customer_id INT( 4 ) NOT NULL , 
```

做了

```
customer_id INT( 10 ) NOT NULL , 
```

并确保客户表中的 int 列也是 int(10) 。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-11-04T01:02:30.503

某些 MySQL 引擎支持外键。例如，InnoDB 可以基于外键建立约束。如果您尝试删除一个表中的条目，而该条目在另一个表中有依赖项，则删除将失败。

如果您在 MySQL 中使用不支持外键的表类型，例如 MyISAM，则除了图表和查询之外，您不会将表链接到任何地方。

例如，在查询中，您使用连接将 select 语句中的两个表链接起来：

```
SELECT a, b from table1 LEFT JOIN table2 USING (common_field); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-21T06:37:34.857

以下是一些有助于入门的资源：[http](http://www.anchor.com.au/hosting/support/CreatingAQuickMySQLRelationalDatabase) ://www.anchor.com.au/hosting/support/CreatingAQuickMySQLRelationalDatabase和[http://code.tutsplus.com/articles/sql-for-beginners-part- 3-数据库关系--net-8561](http://code.tutsplus.com/articles/sql-for-beginners-part-3-database-relationships--net-8561)

也正如其他人所说，使用 GUI - 尝试下载并安装在您的计算机上运行服务器软件（Apache 和 mySQL）的 Xampp（或 Wamp）。然后，当您在浏览器中导航到 //localhost 时，选择 PHPMyAdmin 以开始可视化地使用 mySQL 数据库。如上所述，使用 innoDB 允许您按照您的要求建立关系。使查看您对数据库表所做的事情变得更加容易。请记住在完成后停止 Apache 和 mySQL 服务 - 这些可能会打开端口，从而使您面临黑客/恶意威胁。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-26T10:30:49.323

您必须知道的规则之一是您要引用的表列必须与引用表具有相同的数据类型。2 如果您决定使用 mysql ，则必须使用 InnoDB Engine 因为根据您的问题，该引擎支持您想要在 mysql 中实现的目标。

Bellow 是代码尝试它，尽管第一批回答这个问题的人 100% 提供了很好的答案，请大家考虑一下。

```
CREATE TABLE accounts(
    account_id INT NOT NULL AUTO_INCREMENT,
    customer_id INT( 4 ) NOT NULL ,
    account_type ENUM( 'savings', 'credit' ) NOT NULL,
    balance FLOAT( 9 ) NOT NULL,
    PRIMARY KEY (account_id)
)ENGINE=InnoDB;

CREATE TABLE customers(
    customer_id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(20) NOT NULL,
    address VARCHAR(20) NOT NULL,
    city VARCHAR(20) NOT NULL,
    state VARCHAR(20) NOT NULL,
     PRIMARY KEY ( account_id ), 
FOREIGN KEY (customer_id) REFERENCES customers(customer_id) 
)ENGINE=InnoDB; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-16T05:13:54.917

```
create table departement(
    dep_id      int primary key auto_increment,
    dep_name    varchar(100) not null,
    dep_descriptin      text,
    dep_photo       varchar(100) not null,
    dep_video       varchar(300) not null
);

create table newsfeeds(
    news_id         int primary key auto_increment,
    news_title      varchar(200) not null,
    news_description    text,
    news_photo          varchar(300) ,
    news_date           varchar(30) not null,
    news_video          varchar(300),
    news_comment        varchar(200),
    news_departement    int foreign key(dep_id) references departement(dep_id)
); 
```

# java - Java的线性编程工具/库

> ID：260442
> 
> 赞同：24
> 
> 时间：2008-11-04T00:27:47.140
> 
> 标签：java, linear-programming

我想建立一个大型线性规划模型来解决一个有趣的问题。我会在 Java 中最舒服。有哪些工具/库可用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-04T03:40:52.087

[我发布的一个较早的问题](https://stackoverflow.com/questions/143020/mathematical-optimization-library-for-java-free-or-open-source-recommendations)有几个建议：

*   [CPLEX](http://www.ilog.com/products/cplex)
*   [短跑](http://www.dashoptimization.com/home/cgi-bin/example.pl#bcl_java)
*   [优化](http://www.ateji.com/optimj.html)
*   [硬币或](http://www.coin-or.org/)
*   [lp_solve](http://sourceforge.net/projects/lpsolve)

可能还有更多……

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-11-04T00:34:14.227

我成功使用[了 lp_solve](http://lpsolve.sourceforge.net/5.5/)。看起来有一个本机 Java API，但我只使用了文本文件接口。它支持半标准的 MPS 和 LP 文件格式，我发现它们更便于尝试不同的求解器（例如[glpsol](http://www.gnu.org/software/glpk/)）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-04T08:58:17.767

目前，谷歌挖掘了这个 Java 线性编程库：

*   [http://scpsolver.org/](http://scpsolver.org/)
*   [http://javailp.sourceforge.net/](http://javailp.sourceforge.net/)
*   [http://www.joptimizer.com/linearProgramming.html](http://www.joptimizer.com/linearProgramming.html)
*   [http://www.win-vector.com/blog/2012/11/yet-another-java-linear-programming-library/](http://www.win-vector.com/blog/2012/11/yet-another-java-linear-programming-library/)
*   [http://commons.apache.org/math/userguide/optimization.html](http://commons.apache.org/math/userguide/optimization.html)
*   [http://ojalgo.org/](http://ojalgo.org/)

# .net - 使用 WebServiceHostFactory 的优点和缺点

> ID：260455
> 
> 赞同：5
> 
> 时间：2008-11-04T00:33:41.450
> 
> 标签：.net, wcf, performance

在 IIS 上托管 WCF 服务时，您可以选择手动配置端点或通过 WebServiceHostFactory 以声明方式配置。手动创建端点似乎并不难，所以我想我会问。

*   使用 WebServiceHostFactory 有什么好处？
*   动态创建端点是否有任何性能影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-04T08:59:39.027

您能否澄清一下：您是否专门询问**Web** ServiceHostFactory（emph：“Web”）？或者只是 IIS 托管它与通过代码启动您自己的服务器之间的区别？

WebServiceHostFactory 是 .NET 3.5 中的新功能，支持一些较新的 AJAX/JSON 内容。

实际上，在 IIS（使用 .svc）中，您已经在使用 ServiceHostFactory - 只是 WCF 附带的默认设置。如果需要，您可以编写自己的工厂，我过去曾这样做过创建一个**仅**侦听 https 的工厂（我在托管多个站点的农场上遇到问题，无法识别正确的站点http，但 https 很好 - 所以我通过工厂完全禁用了 http）。

只要您不发疯并在 200 个端点上收听，性能应该不会有任何不同...

通常，当您在（例如）Windows 服务中托管服务器时，会使用手动创建服务器。IIS 在某些方面很好，但应用程序池会被回收，因此对于需要保持长期状态的服务器来说并不理想。IIS 具有更容易配置的优点，尤其是在安全性（SSL 等）和压缩方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T07:37:12.590

我绝对不是专家（还），但我想到的缺点是：

*   您一次只能有一种身份验证方法（即不能同时使用 Windows 和匿名）cf。 [WebServiceHostFactory 和 IIS 身份验证](https://stackoverflow.com/questions/575021/webservicehostfactory-and-iis-authentication)
*   错误处理很难以通用方式进行（没有 Application_OnError，因此您必须手动设置端点）

临：

*   从头开始轻松设置 REST 服务。

# c++ - 使用 GDB 和 C++ 调试内存错误

> ID：260464
> 
> 赞同：4
> 
> 时间：2008-11-04T00:41:20.140
> 
> 标签：c++, memory, gdb

我在 gdb 中运行我的 C++ 程序。我对 gdb 没有真正的经验，但我收到如下消息：

```
warning: HEAP[test.exe]:
warning: Heap block at 064EA560 modified at 064EA569 past requested size of 1 
```

我怎样才能找到发生这种情况的地方？查看内存并没有给我任何线索。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-04T01:01:31.550

所以你正在破坏你的堆。这是一个很好的[GDB 教程](http://www.cs.princeton.edu/courses/archive/spring99/cs126/help/gdbtut.html)，请牢记。

我通常的做法是在代码的已知良好部分设置中断。一旦它到达那里，直到你出错。通常，您可以通过这种方式确定问题。

因为你遇到了堆错误，我认为它与你放在堆上的东西有关，所以要特别注意变量（我认为你可以在 GDB 中使用 print 来确定它的内存地址，这可能将您与出错的位置同步）。您还应该记住，输入函数和从函数返回与堆有关，因此它们可能是您的问题所在（特别是如果您在从函数返回之前弄乱了堆）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-05T11:03:09.027

您可能可以使用称为“观察点”的功能。这就像一个断点，但调试器在修改内存时停止。

我对如何在另一个问题的[答案](https://stackoverflow.com/questions/7525/of-memory-management-heap-corruption-and-c#71983)中使用它给出了一个粗略的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-05T11:06:32.843

如果您可以使用其他工具，我强烈建议您尝试[Valgrind](http://valgrind.org/)。它是一个检测框架，可以以允许它通常在导致错误的确切指令处停止的方式运行您的代码。通过这种方式，通常很容易找到堆错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-14T02:31:22.890

您可以尝试一件事，因为这与标准 libc 相同，配置了 MALLOC_CHECK_ 环境变量 (man libc)。

如果您不退出 gdb（如果您的应用程序退出，只需使用“r”重新运行它），您可以在该地址设置内存断点“hbreak 0x64EA569”，也可以使用“help hbreak”来配置条件或其他断点启用/禁用选项以防止过度进入该断点....

您可以只配置一个日志文件，设置日志...在每个中断时设置一个堆栈跟踪，“display/bt -4”，然后按 r，然后按住 enter 键并让它滚动“或使用 c# # to continue x times... etc.."，最终您将看到相同的断言，然后您现在将拥有（由于显示/bt）一个堆栈跟踪，您可以将其关联到该地址上正在修改的代码.. .

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-07T18:33:23.543

当我尝试重新分配指向我的结构的指针数组时，我遇到了类似的问题，但是我重新分配为整数数组（因为我从教程中获得了代码并忘记更改它）。编译器没有纠正我，因为它无法检查大小参数中的内容。我的变量是：

`itemsetList_t ** iteration_isets;`

所以在 realloc 中而不是：

`iteration_isets = realloc(iteration_isets, sizeof(itemsetList_t *) * max_elem);`

我有：

`iteration_isets = realloc(iteration_isets, sizeof(int) * max_elem);`

这导致了我的堆问题。

# optimization - 编译器优化：我在哪里/如何了解不同优化的回报？

> ID：260472
> 
> 赞同：5
> 
> 时间：2008-11-04T00:44:04.533
> 
> 标签：optimization, compiler-construction

在我对各种编译器书籍和网站的独立研究中，我了解了编译器可以优化正在编译的代码的许多不同方法，但我无法弄清楚每种优化会带来多少好处。

大多数编译器编写者如何决定首先实现哪些优化？或者哪些优化值得努力或不值得努力？我意识到这在代码类型甚至单个程序之间会有所不同，但我希望大多数程序之间有足够的相似性，例如，一种给定的技术通常会给你带来比另一种技术更好的性能增益。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-04T10:42:28.007

我在实施教科书编译器优化时发现，其中一些往往会逆转其他优化所带来的改进。这需要大量工作来试图在它们之间找到适当的平衡。

所以你的问题真的没有很好的答案。一切都是权衡。许多优化在一种类型的代码上效果很好，但对其他类型却是悲观的。这就像设计一所房子——如果你把厨房弄大，储藏室就会变小。

构建优化器的真正工作是尝试各种组合，对结果进行基准测试，并像大厨一样挑选正确的配料组合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-04T01:02:27.150

舌在脸颊：

1.  狂妄自大
2.  基准
3.  尴尬

更严重的是，这取决于编译器的架构和目标。这是一个人的经历...

追求“大回报”：

*   本机代码生成
*   寄存器分配
*   指令调度

去寻找剩下的“低悬的果实”：

*   强度降低
*   持续传播
*   复制传播

继续进行基准测试。

查看输出；修复任何看起来很愚蠢的东西。

通常情况下，组合优化，甚至重复优化传递，比您预期的更有效。好处大于部分的总和。

您可能会发现引入一种优化可能需要另一种优化。例如，具有 Briggs-Chaitin 寄存器分配的 SSA 确实受益于复制传播。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-04T00:54:50.347

从历史上看，在大多数情况下，代码应该受益于“算法”优化，比如[循环展开](http://en.wikipedia.org/wiki/Loop_unwinding)（编译器编写者应该首先实现那些“记录的”和“测试的”优化）。

然后有一些优化类型可以从所使用的处理器类型中受益（比如在现代 CPU 上使用 SIMD 指令）。

请参阅Wikipedia 上的[编译器优化](http://en.wikipedia.org/wiki/Compiler_optimization)以获取参考。

最后，可以测试各种类型的优化，分析代码或准确计时重复执行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-04T00:51:26.173

我不是编译器编写者，但为什么不只是增量优化部分代码，一直进行分析呢？

我的优化方案通常是：

1）确保程序正常运行

2）找一些东西来优化

3）优化它

4）将测试结果与1的结果进行比较；如果它们不同，那么优化实际上是一个突破性的变化。

5）比较时序差异

逐渐地，我会更快地得到它。

我使用分析器选择要关注的部分。我不确定通过询问编译器作者会获得哪些额外信息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-04T01:03:48.283

这实际上取决于您正在编译的内容。最近在 LLVM 邮件列表上对此进行了相当不错的[讨论](http://lists.cs.uiuc.edu/pipermail/llvmdev/2008-May/014770.html)，这当然是针对他们可用的优化器的。他们在很多优化过程中使用缩写词，如果您不熟悉他们折腾的任何首字母缩略词，您可以查看他们的过程[页面](http://llvm.org/docs/Passes.html)以获取文档。最终，您可以花费数年时间阅读有关该主题的学术论文。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-04T00:49:36.503

这是学术论文（也许是 ACM？）可能是更好的最新信息来源之一的主题之一。如果您真的想知道，最好的办法是创建一些未优化形式的代码和一些优化将采取的形式（循环展开等），并实际找出可能使用编译器的收益关闭优化。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-04T03:24:08.690

值得注意的是，在许多情况下，编译器编写者不会花太多时间（如果有的话）来确保他们的库得到优化。基准倾向于不强调甚至忽略库差异，大概是因为您可以只使用不同的库。例如，GCC 中的置换算法在尝试置换复杂数据时的效率会渐近*。这与在调用交换函数期间错误地进行深度复制有关。这可能会在大多数编译器中通过引入右值引用（C++0x 标准的一部分）得到纠正。将 STL 重写得更快是非常容易的。

*这假设被置换的类的大小是可变的。例如，如果整数向量较大，则排列整数向量的向量会减慢速度。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-19T02:29:28.497

一种可以大大提高速度但很少这样做的方法是插入内存预取指令。诀窍是提前足够远地弄清楚程序需要什么内存，永远不要请求错误的内存，也永远不要溢出 D-cache。

# jquery - rails: 如何通过 jQuery 更新 has_many :through 关系？

> ID：260476
> 
> 赞同：2
> 
> 时间：2008-11-04T00:47:59.813
> 
> 标签：jquery, ruby-on-rails, ajax, has-many, renderpartial

抱歉，如果这是一个无聊的问题，但我刚刚开始使用 Rails 和 jQuery。我有以下情况：

我有 3 个课程：`contacts`和`companies`( `contact_company_joins`ccj)。对于我创建的所有三个类`models`，`controller`和`views`。显然，联系人和公司是通过连接表 ccj 连接的（使用`has_many :through`）。

`contacts <-> contact_company_joins <-> companies`

在我的联系人的“显示”视图中，我想显示一个表格，列出联系人所连接的所有公司（以及公司本身的一些附加信息，例如电话号码）。在我的公司看来，我也想做同样的事情，但这次是员工（联系人）的详细信息。表格的每一行最后都有一个典型的“删除”链接，我现在已经将它的函数连接到我的一个 jQuery 函数：

```
$('.edit_contact_join_delete').livequery('click', function() {
    var $deleteButton = $(this);
    var answer = confirm("Sure?");
    var dataloc = "&_method=delete";
    if (answer) {
     $.ajax({
          type : "POST",
          url  : this.href,
          data : dataloc,
          success: function(result) {
          }
        });
    }
    return false;
  }); 
```

在两个视图（联系人和公司）中，删除操作将我带到 ccj 控制器的销毁功能。我现在要做的是更新或重新呈现调用删除函数的单个站点（联系人或公司）的表，但只更新表的一部分。我想我必须在上面的“成功”功能中实现它？但是话又说回来，即使我从 ccj 的控制器返回一些东西（呈现的部分？）......对于联系人和公司视图来说，这将是相同的，对吗？如何确保在我的 Ajax 调用销毁 ccj 对象之后，我为我的联系人视图（这将是一个新的公司表）获得一个新的 DOM 对象，但在我从我公司的看法？

希望这一切都有意义:-)

问候，

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-04T21:30:07.950

您所需要的只是删除操作返回成功或失败（即使只是 true 或 false 也可以），然后您的 javascript 可以处理任一响应。

如果失败则返回一条消息，如果成功并且关系已删除，您可以找到您单击的删除链接的 <tr> 父级并将该行淡出，最终将其从页面中删除。例如（假设您的控制器在删除成功时返回 true，否则返回 false）：

```
$('.edit_contact_join_delete').livequery('click', function() {
    var $deleteButton = $(this);
    var answer = confirm("Sure?");
    var dataloc = "&_method=delete";
    if (answer) {
     $.ajax({
          type : "POST",
          url  : this.href,
          data : dataloc,
          success: function(result) {
            if (result) {
              // handle successful delete
              $deleteButton.parent('tr').fadeOut().remove()
            } else {
              // handle failed delete
              alert('Delete failed');
            }
          } 
        });
    }
    return false;   
  }); 
```

# iphone - 如何查询 iPhone 当前的 IP 地址？

> ID：260484
> 
> 赞同：12
> 
> 时间：2008-11-04T00:53:19.633
> 
> 标签：iphone, networking

如何查询 iPhone 当前的 IP 地址？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2010-05-26T13:24:08.080

如果您想要**外部**IP地址（用于从本地网络外部连接的地址），您需要查询外部网络上的服务器。快速搜索得到以下结果：[http](http://checkip.dyndns.org) ://checkip.dyndns.org、http : [//www.whatismyip.com](http://www.whatismyip.com)。使用例如加载页面非常简单

```
[NSData dataWithContentsOfURL:url]
```

并进行一些字符串操作以检索 IP 地址。

如果您想要**内部**IP 地址（例如由 DHCP 分配给您的设备的地址），您通常可以做的是解析设备的主机名，即

```
 /*
Returns the local IP, or NULL on failure.
*/
const char* GetLocalIP() {
  char buf[256];
  if(gethostname(buf,sizeof(buf)))
    return NULL;
  struct hostent* he = gethostbyname(buf);
  if(!he)
    return NULL;
  for(int i=0; he->h_addr_list[i]; i++) {
    char* ip = inet_ntoa(*(struct in_addr*)he->h_addr_list[i]);
    if(ip != (char*)-1) return ip;
  }
  return NULL;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-05-26T13:09:13.550

您可以尝试使用类似于此服务： [Whatismyip](http://automation.whatismyip.com/n09230945.asp)并捕获字符串 :)

归功于 Erica Sadun 的 iPhone Developer's Cookbok，第 2 版，第 555 页。

# visual-studio - Visual Studio - 如何在发布模式下删除引用

> ID：260491
> 
> 赞同：19
> 
> 时间：2008-11-04T00:58:17.813
> 
> 标签：visual-studio, msbuild, release, release-management

我正在开发一个用于其他应用程序的库，并且由于 NLog，这个库有很多调试和日志记录语句。

切换到发布模式时是否可以排除对 NLog.dll 的引用？

干杯，

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-13T21:49:20.600

您可以手动编辑 csproj 文件，并执行以下操作：

```
<Reference Include="NLog" Condition="'$(Configuration)' == 'Debug'" /> 
```

这只使它在调试中引用该程序集。不过，我不建议经常这样做，因为当您更改配置时，此行为不会反映在 Visual Studio 的引用列表中。它在编译时确实有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T01:19:03.200

我知道的唯一方法是完全取出引用并通过反射调用程序集。然后，您应该仅在程序集加载时记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-04T01:15:41.443

我想不出一个好的方法来做到这一点。除非您为 NLog.dll 编写了存根引用。由于您在代码中使用了引用，因此我看不出如何在发布中将其删除。

现在可能为时已晚，但将来您可以编写一个类来包装 NLog.dll，然后在一个地方更改它，这样它就不会真正登录发布版本。或者有某种标志。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-11-04T01:27:57.083

如果您确定不会使用该 DLL 中的任何代码，则没有理由删除引用。在这种情况下，您可以简单地删除 DLL。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-11-04T01:37:58.980

你为什么想这么做？

如果要停止记录，可以通过编程方式关闭记录。性能损失将是最小的。（即使在记录跨进程时，我在 NLog 方面也取得了巨大的成功。）

否则，您需要如上所述包装它。

-斯科特

# asp.net - 如何更新 ASP.NET Web 应用程序？

> ID：260503
> 
> 赞同：4
> 
> 时间：2008-11-04T01:04:48.487
> 
> 标签：asp.net, deployment

简单的问题。如果您有一个在服务器上运行的已编译和发布的 ASP.NET Web 应用程序，并且您需要更新，例如，其中一个代码隐藏文件中的一行。您是否关闭了整个站点，重新发布，然后重新加载站点？或者您是否直接发布到您的实时站点，用户仍在使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-04T01:14:53.770

对于我自己，将~~app.offline~~ app_offline.htm 文件放入网站，然后用最新发布的构建覆盖整个网站。

构建站点时有几个选项 -> 站点一个 dll 或每页一个 dll。如果您刚刚在后面的代码中更新了一行，并且您选择了每页一个的构建选项，那么您只需复制/粘贴该新页面 dll。

我个人不喜欢这种方法。我觉得 app_offline.htm 网站很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-04T02:43:07.663

如果它是一个使用 app_code 文件夹存储代码的单个文件和一个简单站点，我只需 xcopy 新文件即可。如果我使用 http 过期标头，我可能需要做一些更好的安排，以确保 javascript 文件和 css 表之类的内容与更新的站点的其余部分相匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-05T00:28:42.270

对于紧急补丁：

如果它只是一个代码隐藏文件，我将整个 /bin/ 复制出来并替换所有 DLL（主要是出于习惯）

如果它是一个aspx，我只是复制aspx。

对于实际部署，我有一个自动化系统，可以从源代码管理中检查代码，构建一个干净的发布版本，使站点脱机，然后将其自动复制到部署目标。它是一个单击过程（感谢 CruiseControl！）。

# apache-flex - ActionScript/Flex：按位与/或超过 32 位

> ID：260504
> 
> 赞同：4
> 
> 时间：2008-11-04T01:05:16.270
> 
> 标签：apache-flex, actionscript, bit-manipulation

问：有没有简单的方法（库函数）在 ActionScript 中对大于 32 位的数字执行按位与或或？

来自文档：“按位运算符在内部操作浮点数以将它们更改为 32 位整数。执行的确切操作取决于运算符，但所有按位运算分别评估 32 位整数的每个二进制数字（位）以计算一个新值。”

无赖...

我不能使用 & 或 | ops - AS 是否公开了一个库函数来为 Numbers 执行此操作？

细节：我将一堆 java 移植到 flex 并且 java 维护一堆“长”掩码。我知道我可以在 flex 端将 Java 掩码拆分为两个整数。由于我所有的面具操作都是本地化的，这不会太痛苦。但是，我想尽可能保持端口为 1-1。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-05T14:31:21.367

如果您不介意移植一些 Javascript，Leemon Baird 在这里编写了一个用于处理大整数的公共域 Javascript 库：

[http://www.leemon.com/crypto/BigInt.html](http://www.leemon.com/crypto/BigInt.html)

您将无法明确使用 & 和 | 运算符，但您应该能够使用 bitwiseAnd 和 bitwiseOr 方法来扩充现有代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-06T02:35:46.553

我认为您最直接的选择是将掩码（如果可能的话，将被掩码的数据）分成两部分。您正在与功能差距对接，因此如果您能提供帮助，那么棘手是没有意义的。如果您不需要真正的 BigNum 支持，最好不要考虑它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-10T09:01:27.327

`

```
public class NumberUtils
{
  public static const MSB_CONV : Number = Math.pow(2, 32);

  public static function bitwiseAND(num1 : Number, num2 : Number) : Number {
    var msb1 : int = num1 / MSB_CONV;
    var msb2 : int = num2 / MSB_CONV;

    return (msb1 & msb2) * MSB_CONV + (num1 & num2);
  }
..OR..shiftRight..
} 
```

`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-05T14:05:09.737

根据[http://livedocs.adobe.com/flex/3/html/help.html?content=03_Language_and_Syntax_11.html](http://livedocs.adobe.com/flex/3/html/help.html?content=03_Language_and_Syntax_11.html)，没有 64 位整数（有符号或无符号）......只有 32 位。

如上所述，Number 类型有一个 53 位尾数，这对您来说太短了。

我搜索了一个 BigNum FLEX 实现，但找不到。

我猜您将不得不使用整数数组或具有高整数和低整数的类来模拟这一点。

祝你好运，兰迪·施泰格鲍尔

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-23T09:15:17.720

```
public function readInt64():Number
{
    var highInt:uint = bytes.readUnsignedInt();
    var lowerInt:uint = bytes.readUnsignedInt();
    return highInt * Math.pow(2,32) + lowerInt;
}

public function writeInt64(value:Number):void
{
    this.writeUnsignedInt(int(value / 0xffffffff));
    this.writeUnsignedInt(int(value));
} 
```

# sharepoint - 尽管所有操作都已完成，Sharepoint 工作流仍“进行中”

> ID：260506
> 
> 赞同：4
> 
> 时间：2008-11-04T01:08:03.563
> 
> 标签：sharepoint, workflow

我们有几个工作流程，都是默认的 Sharepoint 工作流程 - 批准/反馈等。

一旦完成所有操作（并标记为已完成），文档工作流程的状态将保持为“进行中”。

我在网上找到了几次提到这一点 - 但没有解决方案。

任何帮助都会非常有帮助 - 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-04T04:09:21.903

我删除了库并重新创建，问题就消失了。

# c# - 使用 XmlDataProvider 和绑定的 TextBox 检测对源数据的更改

> ID：260507
> 
> 赞同：-1
> 
> 时间：2008-11-04T01:08:07.433
> 
> 标签：c#, wpf, binding, textbox, xmldataprovider

我有一个[绑定到 XmlDataProvider 的 TreeView](https://stackoverflow.com/questions/188001/two-way-binding-of-xml-data-to-the-wpf-treeview)。节点的名称反映在树中，节点的数据在 TextBox 中。当您单击树项时，它会将数据加载到 TextBox 中。

确定用户何时更改 XmlDataProvider 引用的源数据的最佳方法是什么。

我想在文件名旁边放一个星号 (*) 表示该文档很脏，应该保存。这也将决定退出程序时是否提醒用户保存。

不幸的是，当双向绑定更新 TextBox 时，它会触发 TextChanged 事件。

有没有办法确定 TextChanged 事件是由双向绑定代码而不是由用户触发的？

我还尝试在 XmlDataProvider 上使用 DataChanged 事件，但此事件仅在最初加载数据时才会触发。

我想我可以直接在 TextBox 中捕获按键，但它看起来很乱。

**[编辑]**看来 PreviewTextInput 似乎为此目的工作......有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-04-15T22:03:02.957

PreviewTextInput 成功了。

# c - 俄罗斯农民乘法

> ID：260511
> 
> 赞同：3
> 
> 时间：2008-11-04T01:11:24.447
> 
> 标签：c, algorithm, optimization, multiplication

[这是我对俄罗斯农民乘法](http://en.wikipedia.org/wiki/Ancient_Egyptian_multiplication)的简短实现。如何改进？

*限制*：仅在 a>0,b>0 时有效

```
for(p=0;p+=(a&1)*b,a!=1;a>>=1,b<<=1); 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2008-11-04T04:36:03.503

可以通过添加空格、适当的缩进和适当的函数体来改进它：

```
int peasant_mult (int a, int b) {
  for (p = 0;
       p += (a & 1) * b, a != 1;
       a /= 2, b *= 2);
  return p;} 
```

看？现在很清楚`for`声明的三个部分是如何使用的。请记住，程序主要是为人眼编写的。不可读的代码总是坏代码。

现在，为了我个人的乐趣，一个尾递归版本：

```
(defun 农民-mult (ab &optional (sum 0))
  "返回 a 和 b 的乘积，
   通过农民的繁殖来实现。”
  （如果（= 1）
      (+ b 总和)
      （农民-mult（地板（/ a 2））
                    (* b 2)
                    (+ sum (* b (logand a 1))))))

```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-11-04T01:28:53.553

我认为这很糟糕从编译器的角度来看，这是完全相同的代码，并且（希望）更清晰

```
int sum = 0;
while(1)
{
    sum += (a & 1) * b;
    if(a == 1)
       break;

    a = a / 2;
    b = b * 2;
} 
```

现在我已经写出来了，我明白了。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-11-13T10:36:32.540

有一个非常简单的方法可以改善这一点：

```
p = a * b; 
```

它甚至具有 a 或 b 可以小于 0 的优点。

如果你看看它是如何工作的，你会发现它只是正常的手动乘法执行二进制。您的计算机以这种方式（1）在内部进行操作，因此使用俄罗斯农民方法的最简单方法是使用内置乘法。

(1) 也许它有一个更复杂的算法，但原则上你可以说，它适用于这个算法

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-11-04T01:38:12.803

循环中仍然存在乘法。如果你想降低乘法的成本，你可以使用它来代替：

```
for(p=0;p+=(-(a&1))&b,a!=1;a>>=1,b<<=1); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-11-04T10:12:35.773

正如其他人所说，我并不觉得它特别糟糕、模糊或不可读，而且我不理解所有这些反对意见。这就是说，这就是我将如何“改进”它：

```
// Russian Peasant Multiplication ( p <- a*b, only works when a>0, b>0 )
// See http://en.wikipedia.org/wiki/Ancient_Egyptian_multiplication
for( p=0; p+=(a&1)*b, a!=1; a>>=1,b<<=1 ); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-11-04T01:27:34.383

`p`未初始化。

如果`a`为零会怎样？

如果`a`是负数会怎样？

**更新：**我看到您已更新问题以解决上述问题。虽然您的代码现在似乎可以正常工作（溢出问题除外），但它的可读性仍然低于应有的水平。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-11-04T01:38:48.027

这是为了代码混淆比赛？我认为你可以做得更好。首先，使用误导性的变量名而不是无意义的变量名。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-11-04T01:18:49.097

我认为它不完整，而且很难阅读。你在寻找什么样的具体反馈？

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-11-04T02:44:24.667

```
int RussianPeasant(int a, int b)
{
    // sum = a * b
    int sum = 0;
    while (a != 0)
    {
        if ((a & 1) != 0)
            sum += b;
        b <<= 1;
        a >>= 1;
    }
    return sum;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-07-23T15:30:54.160

没有乘法或除法的答案：

```
function RPM(int a, int b){
    int rtn;
    for(rtn=0;rtn+=(a&1)*b,a!=1;a>>=1,b<<=1);
    return rtn;
} 
```

# n-tier-architecture - 具有网站和后端事务处理器的 n 层设计

> ID：260512
> 
> 赞同：1
> 
> 时间：2008-11-04T01:12:12.247
> 
> 标签：n-tier-architecture

我们有一个网站，可以在其中输入交易并通过工作流程。对于分层应用程序，我们将遵循标准 BLL（业务逻辑层）、DTO（数据传输对象）、DAL（数据访问层）等。我们需要将所有内容分开，因为某些事务将跨越具有不同业务逻辑的多个应用程序。

我们还有一个后端处理器。一旦工作流程完成，它就会处理我们的交易。它适用于各种第三方系统，其中一些不稳定，或者与它们的接口不稳定，然后报告交易状态。每个网站都有自己的后端处理器版本。

现在的问题是，对于 N 层，他们为每个应用程序建议一个新的 BLL。从上面的应用程序布局来看，后端处理器和网站可以说是一个应用程序一致行动，或者是两个具有不同业务逻辑的应用程序。处理这个问题的理想方法是什么？它像一个系统还是两个系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-04T02:28:01.580

如果您将关注点分开，那么我认为您将能够将它们视为具有单个业务逻辑层的同一个应用程序，两次编写相同的代码是没有意义的。诀窍将强制分离网站的用户界面部分和 BLL 库中的业务逻辑之间的关注点。

性能也将成为一个问题，您必须确保您的批处理不会阻止您的网站执行由于您的资源而需要执行的任务。这可能是让它们更加独立的一个论点，但是因为它们可能无论如何都共享一个数据库（或其他一些基于文件的资源），那么无论如何这可能是一个问题。

我会保留一个为接口编程的通用业务逻辑库，并与您的其他问题完全分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-04T02:30:46.753

您可能会考虑对功能进行分区以反映利益相关者的组织。通常，如果您有两个不同的组织组，那么如果功能被类似地划分，那么开发和管理需求就更容易管理。反之亦然。

我们中的大多数人不会花太多时间来编写探索硬件和软件功能外部边界的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T04:39:14.857

我在过去几年学习 MVC 时学到的一件事是我所说的应用程序逻辑和域逻辑之间的区别。我不再喜欢业务逻辑这个术语，因为它有太多的包袱来自所有相互冲突的理论和实践，这些理论和实践过于松散地使用了这个术语。

领域逻辑是“传统”业务逻辑，事情应该如何行动，他们需要什么（验证）等。应用程序逻辑是特定于您的领域的给定表示的任何内容，即当用户单击此提交按钮时的 IE您的网络应用程序，然后他们将被定向到此处的此网页（请注意，这与 WinForms 应用程序或后台处理器的工作方式*无关）。*应用程序逻辑应该存在于您的应用程序中。域逻辑应该存在于您的 BLL 和更低版本中，并且可以在可能使用您的通用“业务逻辑”的不同应用程序中重用。

有点笼统的答案，但我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-04T02:22:52.650

执行此操作的“理想”方式取决于手头的项目和系统的各种要求。

我的默认设计是让它充当一个应用程序。但是，如果有更多重量级进程正在发生，我喜欢创建一个批处理进程，其中请求作业的参数被存储并由一个单独的进程执行。

# user-interface - 去掉没有所有者绘制的Win32公共控件上的虚线

> ID：260516
> 
> 赞同：1
> 
> 时间：2008-11-04T01:14:17.717
> 
> 标签：user-interface, winapi

有没有办法在 Win32 公共控件上删除表示键盘焦点的虚线矩形，而不需要所有者绘制或子类化它们？

好像在WPF下可以控制焦点矩形的视觉风格，但是我在一个Win32常用控件上没找到对应的API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-04T01:32:10.863

我不相信有一种简单的样式可以让您关闭列表视图控件上的焦点矩形。我见过的唯一方法是使用所有者绘制控件。我知道这不是您要寻找的答案，但是有一些所有者绘制控件的示例可以执行此操作……这样您就不必完成所有工作。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-26T19:47:41.660

您可以向它发送[WM_CHANGEUISTATE 消息](http://msdn.microsoft.com/en-us/library/ms646342)或对其进行子类化并伪造参数以响应 WM_UPDATEUISTATE

# macos - 在 Mac OS X 上以编程方式查找 DNS 服务器设置

> ID：260518
> 
> 赞同：5
> 
> 时间：2008-11-04T01:14:20.493
> 
> 标签：macos, dns, macos-carbon

我有一些跨平台 DNS 客户端代码，用于执行端到端 SMTP，在 Windows 上，我可以通过查看注册表找到当前的 DNS 服务器 IP 地址。在 Mac 上，我可能可以使用第一个答案中提到的 SystemConfiguration 框架，但是这样做的确切方法并不是很明显。

例如 SCDynamicStoreCopyDHCPInfo 返回一些动态 DHCP 相关数据，但不返回 DNS 服务器地址。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-17T21:19:30.160

我知道你需要这个已经很长时间了，但没有什么比一个旧的未解决的答案更糟糕的了。由于权限问题，您无法从“/etc/resolv.conf”访问它们。经过大量搜索，幸运的是，我发现您可以通过 res_ninit() 函数获得它。

```
// Get native iOS System Resolvers
res_ninit(&_res);
res_state res = &_res;

for (int i = 0; i < res->nscount; i++) {
  sa_family_t family = res->nsaddr_list[i].sin_family;
  int port = ntohs(res->nsaddr_list[i].sin_port);
  if (family == AF_INET) { // IPV4 address
    char str[INET_ADDRSTRLEN]; // String representation of address
    inet_ntop(AF_INET, & (res->nsaddr_list[i].sin_addr.s_addr), str, INET_ADDRSTRLEN);
  } else if (family == AF_INET6) { // IPV6 address
    char str[INET6_ADDRSTRLEN]; // String representation of address
    inet_ntop(AF_INET6, &(res->nsaddr_list [i].sin_addr.s_addr), str, INET6_ADDRSTRLEN);
  }
}
res_ndestroy(res); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-22T07:03:02.510

我知道回答这个问题很晚，但可能对其他人有帮助。

该代码将帮助完成这项任务..

```
SCPreferencesRef prefsDNS = SCPreferencesCreate(NULL, CFSTR("DNSSETTING"), NULL);
CFArrayRef services = SCNetworkServiceCopyAll(prefsDNS);
long servicesCount = CFArrayGetCount(services);
for (long i = 0; i < servicesCount; i++) {
    const SCNetworkServiceRef service = (const SCNetworkServiceRef)CFArrayGetValueAtIndex(services, i);
    CFStringRef interfaceServiceID = SCNetworkServiceGetServiceID(service);
    CFStringRef primaryservicepath = CFStringCreateWithFormat(NULL,NULL,CFSTR("State:/Network/Service/%@/DNS"),interfaceServiceID);
    SCDynamicStoreRef dynRef = SCDynamicStoreCreate(kCFAllocatorSystemDefault, CFSTR("DNSSETTING"), NULL, NULL);
    CFPropertyListRef propList = SCDynamicStoreCopyValue(dynRef,primaryservicepath);
    if (propList) {
        CFDictionaryRef dict = (CFDictionaryRef)propList;
        CFArrayRef addresses = (CFArrayRef)CFDictionaryGetValue(dict, CFSTR("ServerAddresses"));
        long addressesCount = CFArrayGetCount(addresses);
        for (long j = 0; j < addressesCount; j++) {
            CFStringRef address = (CFStringRef)CFArrayGetValueAtIndex(addresses, j);
            // Print address
            CFShow(address);
        }
        CFRelease(propList);
    }
    CFRelease(dynRef);
    CFRelease(primaryservicepath);
}
CFRelease(services);
CFRelease(prefsDNS); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-04T01:22:31.447

您可以使用[SystemConfiguration 框架](http://developer.apple.com/documentation/Networking/Conceptual/SystemConfigFrameworks/SC_Intro/chapter_1_section_1.html)。它在 C 中。

更新：显然网络的其余部分比我想象的更难使用。搜索键“State:/Network/Service/ServiceID/DNS”，其中 ServiceID 是服务的 ID。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-07T01:14:30.883

它们也可以从 /etc/resolv.conf 获得

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-11-07T01:17:11.500

您可以从 /etc/resolv.conf 中读取。

# delphi - 从 DBExpress TSQLQuery 获取字段列表

> ID：260521
> 
> 赞同：4
> 
> 时间：2008-11-04T01:15:39.103
> 
> 标签：delphi, dbexpress, fieldlist

我在从程序用户在运行时定义的查询中获取字段列表时遇到问题。我让我的用户将 SQL 查询输入到备忘录控件中，然后我想让他们遍历将返回的字段并执行诸如格式化输出、汇总列值等操作。所以，我必须获取列名，以便他们有一个输入附加信息的地方。

如果没有参数我会做得很好，但我也必须让他们为查询定义过滤器参数。所以，如果我想将参数设置为null，我必须知道参数的数据类型是什么。

我使用的是 Delphi 2006。我使用 DBExpress 组件 TSQLConnection 和 TSQLQuery 连接到 Firebird 2.1 数据库。以前，我成功使用：

for i := 0 to Qry.Params.Count - 1 do Qry.Params[i].value := varNull;

当我尝试使用日期参数时，我发现我遇到了问题。直到那时我的所有参数都是整数（记录 ID）只是一个巧合。事实证明 varNull 只是一个值为 1 的枚举常量，所以我得到了可接受的结果（没有记录）工作正常。

我只需要一个字段列表。也许我应该只解析 SQL 语句的 SELECT 子句。我认为将 Qry.Prepared 设置为 True 会给我一个字段列表，但没有这样的运气。它需要参数的值。

如果你有想法，我肯定很想听听。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-04T10:01:31.147

尽管数据集类型略有不同，但这是我与 TClientDataset 一起使用的简单而有效的方法:)

```
for i := 0 to FilterDataSet.Params.Count -1 do  
begin  
 Case FilterDataSet.Params.Items[i].Datatype of  
    ftString:  
    ftSmallint, ftInteger, ftWord:  
    ftFloat, ftCurrency, ftBCD:  
    ftDate:  
    ftTime:  
    ftDateTime:  
    .  
    .  
    . 
end; 
```

结尾;
你不能对查询做类似的事情吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T13:19:17.083

你们这样做**太难**了：

```
for i := 0 to Qry.Params.Count - 1 do begin
    Qry.Params[i].Clear;
    Qry.Params[i].Bound := True;
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-05T14:43:15.853

再次回复'因为我很感兴趣。我的方法有效（与我的查询一起使用），因为它们已使用参数的数据类型预定义为正确的类型:)

我不确定您如何期望查询知道或派生参数的数据类型，因为您甚至没有选择它所针对的字段。

所以我认为你的查询设置和用户输入法需要更多的关注。我刚刚查了一下我是如何做到这一点的。我不使用参数化查询——我只是从用户那里获取“参数值”并将它们直接放入 SQL 中。因此，您的 sql 将显示为：

SELECT s.hEmployee, e.sLastName
FROM PR_Paystub s
INNER JOIN PR_Employee e ON e.hKey = s.hEmployee
WHERE s.dtPaydate > '01/01/2008'

因此不需要参数类型知识。不会阻止您的用户输入垃圾，但会回到输入控制:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-04T01:49:52.670

我不确定您使用的是什么版本的 Delphi。在 Variant Types 下的 Delphi 2006 帮助中，它说：

> 特殊的转换规则适用于在 System 单元中声明的 Borland.Delphi.System.TDateTime 类型。当一个 Borland.Delphi.System.TDateTime 被转换为任何其他类型时，它被视为一个普通的 Double。当整数、实数或布尔值转换为 Borland.Delphi.System.TDateTime 时，它​​首先转换为 Double，然后作为日期时间值读取。当字符串转换为 Borland.Delphi.System.TDateTime 时，它​​会被解释为使用区域设置的日期时间值。当 Unassigned 值转换为 Borland.Delphi.System.TDateTime 时，它​​被视为实数或整数值 0。将 Null 值转换为 Borland.Delphi.System.TDateTime 会引发异常。

最后一句话对我来说似乎很重要。我会读到，因为 varNull 无法转换为 TDateTime 以放入该字段，因此您会遇到遇到的异常。

这也意味着这是唯一的特殊情况。

你不能做这样的事情：

```
for i := 0 to Qry.Params.Count - 1 do 
begin
  if VarType(Qry.Params[i].value) and varTypeMask = varDate then
  begin
    Qry.Params[i].value := Now; //or whatever you choose as your default
  end
  else
  begin
    Qry.Params[i].value := varNull;
  end;
end; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T20:40:23.277

我最终做的是：

```
sNull := 'NULL';
Qry.SQL.Add(sSQL);
for i := 0 to Qry.Params.Count - 1 do begin
  sParamName := Qry.Params[i].Name;
  sSQL := SearchAndReplace (sSQL, ':' + sParamName, sNull, DELIMITERS);
end; 
```

我不得不写 SearchAndReplace 但这很容易。分隔符只是表示单词结尾的字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T13:13:50.637

```
TmpQuery.ParamByName('MyDateTimeParam').DataType := ftDate;
TmpQuery.ParamByName('MyDateTimeParam').Clear;
TmpQuery.ParamByName('MyDateTimeParam').Bound := True; 
```

# iphone - 如何将 UITableViewCellSelectionStyle 属性设置为一些自定义颜色？

> ID：260523
> 
> 赞同：35
> 
> 时间：2008-11-04T01:15:50.383
> 
> 标签：iphone, cocoa-touch, uitableview

我正在开发一个 iPhone 应用程序，在我的表格视图中，我想要单元格选择样式的自定义颜色，我阅读了*UITableViewCell 类参考*，但是为选择样式定义了三个常量（蓝色、灰色、无）。我看到一个应用程序使用了与参考中定义的颜色不同的颜色。

我们如何使用参考中定义的颜色以外的颜色？

提前致谢。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-04-16T23:52:28.577

设置选择的最佳方法是`selectedBackgroundView`在构建单元格时设置它。

IE

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
        cell.selectedBackgroundView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"SelectedCellBackground.png"]] autorelease];
    }

    // configure the cell
} 
```

使用的图像应该有一个很好的渐变（如默认选择）。如果你只想要一个平面颜色，你可以使用 UIView 而不是 a`UIImageView`并将 设置为`backgroundColor`你想要的颜色。

然后在选择行时自动应用此背景。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-12-04T01:05:26.337

当设置为时，设置`selectedBackgroundView`似乎没有效果。当我不设置样式时，只使用默认的灰色。 `cell.selectionStyle``UITableViewCellSelectionStyleNone`

使用将自定义插入单元格的第一个建议`UIView`确实会操纵单元格，但是当单元格被触摸时它不会显示，只有在选定的操作完成后才显示，因为我正在推动新视图，所以为时已晚。如何在选定操作开始之前显示单元格中的选定视图？

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-24T14:34:33.493

如果您已将 UITableViewCell 子类化，则可以通过覆盖以下内容来自定义单元格的各种元素：

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated {
    if(highlighted) {
        self.backgroundColor = [UIColor redColor];
    } else {
        self.backgroundColor = [UIColor clearColor];
    }

    [super setHighlighted:highlighted animated:animated];
} 
```

iOS7 的编辑：正如 Sasho 所说，你还需要

```
cell.selectionStyle = UITableViewCellSelectionStyleNone 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-22T12:02:16.180

我尝试了上面的一些方法，**实际上我更喜欢创建自己的 UITableViewCell 子类，然后覆盖 touchesBegan/touchesCancelled/touchesEnded 方法**。为此，请忽略单元格上的所有 selectedBackgroundView 和 highlightColor 属性，而是在调用上述方法之一时手动设置这些颜色。例如，如果您想将单元格设置为具有红色文本的绿色背景，请尝试以下操作（在您的自定义单元格子类中）：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    //Set backgorund
    self.backgroundColor = [UIColor themeBlue];

    //Set text
    self.textLabel.textColor = [UIColor themeWhite];

    //Call super
    [super touchesBegan:touches withEvent:event];
} 
```

请注意，要使其正常工作，您需要设置：

```
self.selectionStyle = UITableViewCellSelectionStyleNone; 
```

否则，您将首先获得当前的选择样式。

编辑：我建议使用 touchesCancelled 方法恢复到原始单元格颜色，但忽略 touchesEnded 方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-04T02:56:11.427

覆盖 didSelectRowAtIndexPath: 并绘制您选择的颜色的 UIView 并将其插入单元格内的 UILabel 后面。我会这样做：

```
UIView* selectedView; //inside your header

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

  UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];
  selectedView = [[UIView alloc] initWithFrame:[cell frame]];
  selectedView.backgroundColor = [UIColor greenColor]; //whatever

  [cell insertSubview:selectedView atIndex:0]; //tweak this as necessary
  [selectedView release]; //clean up

} 
```

您可以选择在取消选择此视图时对其进行动画处理并满足您的要求。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T14:31:56.260

子类 UITableViewCell 和覆盖`setHighlighted:animated:`

您可以通过设置 backgroundColor 来定义自定义选择颜色颜色（请参阅 WIllster 的答案）：

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated {
    if(highlighted) {
        self.backgroundColor = [UIColor redColor];
    } else {
        self.backgroundColor = [UIColor clearColor];
    }

    [super setHighlighted:highlighted animated:animated];
} 
```

您可以通过设置 backgroundView 属性来定义自定义背景图像：

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated {
    if( highlighted == YES )
        self.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"seasonal_list_event_bar_default.png"]];
    else
        self.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"seasonal_list_event_bar_active.png"]];

    [super setHighlighted:highlighted animated:animated];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-04T11:59:11.007

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated {  
// Set Highlighted Color  
if (highlighted) {  
self.backgroundColor = [UIColor colorWithRed:234.0f/255 green:202.0f/255 blue:255.0f/255 alpha:1.0f];
    } else {  
        self.backgroundColor = [UIColor clearColor];  
  }   
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-29T12:58:18.160

```
- (BOOL)tableView:(UITableView *)tableView shouldHighlightRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

- (void)tableView:(UITableView *)tableView didHighlightRowAtIndexPath:(NSIndexPath *)indexPath {
    // Add your Colour.
    SocialTableViewCell *cell = (SocialTableViewCell *)[tableView cellForRowAtIndexPath:indexPath];
    [self setCellColor:Ripple_Colour ForCell:cell];  //highlight colour
}

- (void)tableView:(UITableView *)tableView didUnhighlightRowAtIndexPath:(NSIndexPath *)indexPath {
    // Reset Colour.
    SocialTableViewCell *cell = (SocialTableViewCell *)[tableView cellForRowAtIndexPath:indexPath];
    [self setCellColor:Ripple_Colour ForCell:cell]; //normal color

}

- (void)setCellColor:(UIColor *)color ForCell:(UITableViewCell *)cell {
    cell.contentView.backgroundColor = color;
    cell.backgroundColor = color;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-05T13:25:40.913

要添加自定义颜色，请使用以下代码。并使其透明使用`alpha: 0.0`

```
cell.selectedBackgroundView = UIView(frame: CGRect.zero)
cell.selectedBackgroundView?.backgroundColor = UIColor(red:0.27, green:0.71, blue:0.73, alpha:1.0) 
```

如果您使用自定义颜色并希望给它圆角外观，请使用：

```
cell.layer.cornerRadius = 8 
```

此外，使用它以获得更好的动画和感觉

```
func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {

    tableView.deselectRow(at: indexPath, animated: true)
} 
```

# asp.net - ASP.NET 网站“发布”与 Web 部署项目

> ID：260525
> 
> 赞同：14
> 
> 时间：2008-11-04T01:17:06.167
> 
> 标签：asp.net, visual-studio

如果我决定为我的 ASP.NET 网站使用“发布”选项，而不是 Web 部署项目，我可以做自定义 msbuild 的事情吗？或者如果我想在编译/部署期间做自定义 msbuild 的东西，我是否需要坚持使用 WDP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-04T02:18:29.740

我认为发布选项是 VS.NET 工具集的一部分，供开发人员用来在开发机器上发布网站。它并不是真正为真正的部署而构建的。

如果您需要自定义操作，Web 部署项目将更适合开发人员以外的多人定期运行并且您希望在每个构建中创建的实际部署。

我还会考虑其他三个选项：

*   **PowerShell：**一种针对 IIS**编写脚本**、设置网站等的好方法。您甚至可以从脚本可以调用的 OO 代码（如 C#）构建 cmdlet。许多专业的 IT 公司使用它来部署大型网站。

*   **MSDeploy：**一种新的网站**部署工具**，可以在多台服务器上复制 vroot。非常适合拥有您的黄金形象，然后将其爆破到各个地方。

*   **C# 应用程序：**如果您是更**高级的开发人员**，您可以随时编写自己的应用程序来复制文件（通过进程）并使用 WMI 配置 IIS。更难，但你有完全的控制权。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T14:15:50.497

您*可以*使用自定义 MSBuild 选项。实际上，您可以在配置为发布为网站的 sln 文件上执行 MSBuild，然后将预编译的网站文件复制到 Web 服务器。我们在内部使用来自 Thoughtworks 的 Cruise Control.net 来做到这一点。

sln 文件包含有关预编译网站所在位置的信息：

```
Release.AspNetCompiler.VirtualPath = "/PrecompiledWeb"
Release.AspNetCompiler.PhysicalPath = "..\Web\"
Release.AspNetCompiler.TargetPath = "..\..\PrecompiledWeb\"
Release.AspNetCompiler.Updateable = "true"
Release.AspNetCompiler.ForceOverwrite = "true"
Release.AspNetCompiler.FixedNames = "true"
Release.AspNetCompiler.Debug = "False" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-04T20:01:57.583

我们不使用发布来部署我们的 Web 项目，但我们曾经使用 Web 部署项目。当我们切换到 Visual Studio 2008 时，我们遇到了一堆问题，所以我们摆脱了它们。

我可以告诉你的是，我们能够用 aspnet_merge.exe 替换我们正在使用的 WDP 功能。我们在脚本中结合使用 msbuild 和 aspnet_merge.exe 来完成我们的部署。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-04T04:34:16.893

看起来您可以通过 _CopyWebApplication MSBuild 目标自定义发布任务。或者您至少可以创建一个将调用该目标的批处理文件，您可以对其进行自定义。

更多细节[在这里](http://forums.asp.net/t/1063636.aspx)和[这里](http://www.driebier.net/post/Using-MSBuild-to-deploy-visual-studio-2005-web-applications-(2).aspx)。

# iis-7 - NAntContrib/NAnt mkiisdir 在 IIS 7.0 / windows 2008 上失败

> ID：260526
> 
> 赞同：5
> 
> 时间：2008-11-04T01:17:33.123
> 
> 标签：iis-7, permissions, nant

我正在尝试使用 NAnt/NAntContrib 构建脚本在 Windows 2008 (IIS 7.0) 上构建 Web 应用程序。

在构建文件中，有 mkiisdir 任务，它失败了：

[mkiisdir] 'localhost' 的 web 服务不存在或无法访问。

到目前为止我发现的所有文档/帖子（非 w2k8，仅 Vista）都说要安装 IIS 6 兼容性服务（所有这些，包括脚本工具等）所以我做了，但它仍然抛出这个错误。

知道还需要更改什么，以便 NAnt 能够在 IIS 7.0 上创建/删除虚拟目录吗？

编辑：新数据 - 当我以本地管理员身份登录此服务器时，nant 任务成功，但当我以域管理员身份登录时它失败。我已经在本地管理员组中添加了域管理员组，但它仍然失败。知道我需要检查/更改哪些其他权限才能使我的域管理员用户能够执行此任务吗？我可以毫无问题地手动创建虚拟文件夹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-02-10T21:32:29.397

为了让 iis nantcontrib 任务正常工作，您需要安装 IIS6 管理兼容性工具。这是描述如何在 Vista 中执行此操作的博客：

[http://thoughtworker.in/2008/01/15/nant-the-webservice-at-localhost-does-not-exist-or-is-not-reachable/](http://thoughtworker.in/2008/01/15/nant-the-webservice-at-localhost-does-not-exist-or-is-not-reachable/)

以下是如何在 Windows Server 2008 中执行此操作的屏幕截图：

[替代文字 http://img407.imageshack.us/img407/699/iis6tools.png](http://img407.imageshack.us/img407/699/iis6tools.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T23:02:37.280

为了回答我自己的问题 - 我已经隔离了 NantContrib 中导致问题的部分代码，并制作了一个示例应用程序进行测试。

我已将其作为一个单独的问题发布[在这里](https://stackoverflow.com/questions/263552/directoryentrynativeobject-throws-access-denied-for-a-user-in-administrators-gr)，并且也有[解决方案](https://stackoverflow.com/questions/263552/directoryentrynativeobject-throws-access-denied-for-a-user-in-administrators-gr#263784)。

干杯

# arrays - 向程序员解释嵌套数组

> ID：260531
> 
> 赞同：5
> 
> 时间：2008-11-04T01:19:54.867
> 
> 标签：arrays, language-agnostic, multidimensional-array

你是如何向程序员解释嵌套数组的。我认为有人对编程有入门级的理解，但正在尝试进行更复杂的编码。

带有数组的数组有效，但他们无法完全理解这个想法。

**编辑：**嵌套数组的示例：

```
array(
    'array1' => array(
        'key1' => 'val1',
        'key2' => 'val2',
    ),
    'array2' => array(
        'key1' => 'val1',
        'key2' => 'val2',
    ), 
); 
```

当然，它们通常比这更复杂，也许这就是问题所在。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-04T01:24:16.887

告诉他们把数组想象成一个列表——这有助于给他们一些不那么抽象的东西，比如购物清单。然后，嵌套数组只是列表的列表。

也许我在 amazon.com 上有一份待办事项清单、一份购物清单和一份愿望清单。现在我有了所有列表的列表，我可以通过逐步查看每个列表中的所有元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-04T01:36:58.577

嵌套数组是集合中的集合。所以，图书馆有一套书，一本书有一套章节。一章有一组段落，一个段落有一组句子。一个句子有一组词。

```
For each book in library

    For each chapter in book

        For each paragraph in chapter 
```

ETC...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-04T01:26:24.697

你是怎么解释的？对于理解一维数组的人来说，能够理解每个数组元素包含另一个数组而不是 int 或字符串的概念似乎并不是一个很大的飞跃。

也许比较目录的类比会有所帮助，一维数组类似于包含一堆文件的目录，二维数组类似于包含其他几个目录的目录，每个目录都包含一堆文件，等等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-04T01:52:15.987

画出来。

变量是一个盒子
一维数组是一排盒子。
二维数组是一个盒子网格。
3维数组是一个立方体。

如果他们对一般概念有疑问，请不要尝试直观地解释 4 个维度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-04T01:28:43.210

以位图为例。在 C 中，您可以制作这样的位图`X`：

```
int x[5][5] = {
    { 1,0,0,0,1 },
    { 0,1,0,1,0 },
    { 0,0,1,0,0 },
    { 0,1,0,1,0 },
    { 1,0,0,0,1 }
}; 
```

然后向他们展示如何使用嵌套`for`循环来显示位图。

示例总是有帮助的，这也让他们将嵌套数组视为多维数组。实际上，在学习 Python 等语言中的“嵌套”数组之前，最好先了解 C 等语言中的多维数组，在这种语言中，您可以在同一个数组中进行不同级别的嵌套。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-04T01:29:12.993

运动可以提供适当的类比来描述应用嵌套数组。一个团队是一群人，一场比赛是一群相互对抗的团队。

然而，这是一个找到与学习者相符的类比的案例。找到正确的类比，即使是最慢的学习者也能理解。只要确保你的类比是水密的。像抽象一样，它们是有漏洞的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-04T01:41:16.057

一个具体的例子是书后的索引。单词列表，每个单词都与页码列表相关联。

苹果 - 1, 2, 3-4
熊 - 32-35, 79, 83
猫 - 14, 15

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-04T01:27:44.680

如果您正在查看 C 类型、非参差不齐的数组，将其与数字、以 10 为底的部分进行比较，那么数字可能会有所帮助。同样效果的另一个好来源是时间，因为它有一个非统一的基础 60s = 1m, 60m = 1h, 24h = 1day, 7day = 1week

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-04T01:49:01.923

2维很容易解释。想想一张桌子。3 维只是想一个立方体或其他 3d 图像。4 维将一系列图像想象成电影，第 4 维是时间。

使用该模型很难可视化 4+ 维度。但是把它想象成一个文件柜，里面有另一个文件柜会有所帮助。你打开抽屉，弹出一个文件柜。你找到你想要的抽屉并打开那个抽屉，然后弹出另一个文件柜......一遍又一遍，直到最后你得到你的文件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-04T03:35:10.617

也许您是从了解数组数组的人的上下文中解释它。我会试图欺骗他们，让他们意识到他们已经从最小的（读取内部数组）开始......然后慢慢扩展，让他们有足够的时间提问，直到他们完成。

绘图会有所帮助，但是在这种情况下，您需要给学生一些信息并慢慢进行，我认识的大多数程序员倾向于快速并喜欢解释事情，即使听众不再跟踪正在说的内容。

我是一个比喻人，所以我可能会编造一些关于一系列盒子的东西，每个盒子都有编号，然后每个盒子都包含一个类似的（但更小的系列）也有编号。我会认为这只有两个层面得到理解，然后也许会谈论 3 个维度来确认。但我会避免使用 4 维，因为他们可能会认为没有 4 维这样的东西，或者你无法测量时间，或者其他诸如此类的隐喻地雷/分心……因为那是另一个问题，程序员往往是 ADD 并且喜欢被跟踪。

另外，您为什么不使用散列的散列，更容易参考。:)

底线，婴儿步骤。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-04T05:29:30.480

数组只是一个对象 - 一个东西。一旦他们明白了一切都应该很容易理解

# debugging - 错误分布

> ID：260535
> 
> 赞同：1
> 
> 时间：2008-11-04T01:23:33.127
> 
> 标签：debugging, statistics, scheduling

我有一个程序要从一种语言移植到另一种语言。我正在使用我自己开发的翻译程序来做这件事。这样做的相关结果是，我预计我的系统中存在许多我需要查找和修复的错误。每个错误都可能出现在许多地方，修复它会修复它出现的所有地方的错误。（我觉得有一个非常大的杠杆，我在短端推动，我非常努力，但是当事情移动时，它们会移动很多。）

我有能力运行执行日志差异，所以我通过测试套件在偏离原始程序执行之前可以运行它多远来衡量我的进度。（感谢 BeyondCompare 的 [whatever you want]，它适用于 ~1M 行文件：D）

问题是：*如果我将运行长度绘制为时间的函数，我应该期望看到什么形状？*（更多时间 == 删除更多错误）

我的第一个想法是类似于[泊松分布](http://en.wikipedia.org/wiki/Poisson_distribution)。然而，因为修复每个错误也会删除所有其他出现的错误，这不应该是完全正确的。

（顺便说一句，这可能对估计程序何时完成调试具有现实意义。）

*编辑：* 问题的更抽象的陈述：

给定从范围 [0,M]（其中 N>>M）中选择的 N 个整数的有序列表，该列表沿列表中的位置均匀分布，但不一定具有数字的均匀分布。最后一个“新”号码的预期位置是什么？倒数第二个呢？ETC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-04T02:26:11.737

工程师总是受过训练以寻找指数曲线：

> 错误（*t*） = ceil [ c [1] *e* ^(–c [2] *t*) ] + R（*t*）

其中 c [1]和 c [2]是常数，取决于测试用例的数量和您的编码技能。R( ) 是一个随机函数，其幅度和分布取决于[蝴蝶效应](http://en.wikipedia.org/wiki/Butterfly_effect)、昨晚的睡眠量以及截止日期和经理的距离。

*   在开始编码之前，在 *t* = 0 时，所有测试用例都将失败，产生至少 c [1 个]错误。

*   随着您编写代码并且*t*增加，指数逐渐向零减小，导致计算出的错误数最终达到 1。这是因为我们都知道“总会有一个错误”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-04T02:53:05.833

一般来说，作为时间函数发现的*新*错误的数量应遵循类泊松分布。假设 bug 在发现时基本上已修复，那么打开的 bug 的数量应该遵循相同的分布。

实际上，我在职业生涯的早期就使用它来向我的业务部门“证明”某个特定的功能集还没有准备好发布。我为当前项目以及前两个版本绘制了新的和打开的错误作为时间函数的图表。两个较旧的数据集显示出最初的急剧上升、峰值和逐渐下降，直到它们的发布日期。当前数据显示*线性增长*，一直持续到我创建图表的那一天。

我们又进行了几天的测试，测试人员接受了有关如何更有效地测试产品的培训。由于这两个决定，该版本相对没有缺陷。

# ajax - 你如何抓取 AJAX 页面？

> ID：260540
> 
> 赞同：55
> 
> 时间：2008-11-04T01:25:26.493
> 
> 标签：ajax, web-scraping

请告知如何抓取 AJAX 页面。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2008-11-04T02:24:00.243

**概述：**

所有屏幕抓取首先需要手动查看您要从中提取资源的页面。在处理 AJAX 时，您通常只需要分析一些内容，而不仅仅是 HTML。

在处理 AJAX 时，这仅意味着您想要的值不在您请求的初始 HTML 文档中，而是将执行 javascript，它会向服务器询问您想要的额外信息。

因此，您通常可以简单地分析 javascript 并查看 javascript 发出的请求，然后从一开始就调用此 URL。

* * *

**例子：**

以此为例，假设您要从中抓取的页面具有以下脚本：

```
<script type="text/javascript">
function ajaxFunction()
{
var xmlHttp;
try
  {
  // Firefox, Opera 8.0+, Safari
  xmlHttp=new XMLHttpRequest();
  }
catch (e)
  {
  // Internet Explorer
  try
    {
    xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
    }
  catch (e)
    {
    try
      {
      xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    catch (e)
      {
      alert("Your browser does not support AJAX!");
      return false;
      }
    }
  }
  xmlHttp.onreadystatechange=function()
    {
    if(xmlHttp.readyState==4)
      {
      document.myForm.time.value=xmlHttp.responseText;
      }
    }
  xmlHttp.open("GET","time.asp",true);
  xmlHttp.send(null);
  }
</script> 
```

然后，您需要做的就是向同一服务器的 time.asp 发出 HTTP 请求。 [来自 w3schools 的示例](http://www.w3schools.com/Ajax/ajax_server.asp)。

* * *

**使用 C++ 进行高级抓取：**

对于复杂的用法，如果您使用 C++，您还可以考虑使用 firefox javascript 引擎[SpiderMonkey](http://www.mozilla.org/js/spidermonkey/)在页面上执行 javascript。

**使用 Java 进行高级抓取：**

对于复杂的使用，如果您使用 Java，您还可以考虑使用适用于 Java [Rhino的 firefox javascript 引擎](http://www.mozilla.org/rhino/)

**使用 .NET 进行高级抓取：**

对于复杂的使用，如果您使用的是 .Net，您还可以考虑使用 Microsoft.vsa 程序集。最近替换为 ICodeCompiler/CodeDOM。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-09T00:25:13.060

在我看来，最简单的解决方案是使用[Casperjs](http://casperjs.org/)，这是一个基于 WebKit 无头浏览器 phantomjs 的框架。

整个页面加载完毕，很容易抓取任何与 ajax 相关的数据。您可以查看这个基本教程来学习[使用 PhantomJS 和 CasperJS 进行自动化和抓取](http://www.youtube.com/watch?v=Kefil5tCL9o)

您还可以查看此示例代码，了解如何抓取 google 建议的关键字：

```
/*global casper:true*/
var casper = require('casper').create();
var suggestions = [];
var word = casper.cli.get(0);

if (!word) {
    casper.echo('please provide a word').exit(1);
}

casper.start('http://www.google.com/', function() {
    this.sendKeys('input[name=q]', word);
});

casper.waitFor(function() {
  return this.fetchText('.gsq_a table span').indexOf(word) === 0
}, function() {
  suggestions = this.evaluate(function() {
      var nodes = document.querySelectorAll('.gsq_a table span');
      return [].map.call(nodes, function(node){
          return node.textContent;
      });
  });
});

casper.run(function() {
  this.echo(suggestions.join('\n')).exit();
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-11-04T01:31:18.400

如果可以，请尝试检查 DOM 树。[Selenium](http://selenium.openqa.org/)将其作为测试页面的一部分。它还具有单击按钮和跟踪链接的功能，这可能很有用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-09T18:21:02.240

使用 Ajax 或一般使用 Javascript 抓取网页的最佳方法是使用浏览器本身或无头浏览器（没有 GUI 的浏览器）。目前[phantomjs](http://phantomjs.org/)是一个使用 WebKit 的很好的无头浏览器。我成功使用的替代方法是[HtmlUnit](http://htmlunit.sourceforge.net/)（在 Java 或 .NET 中通过[IKVM](http://www.ikvm.net/)，这是一个模拟浏览器。另一个已知的替代方法是使用 Web 自动化工具，如[Selenium](http://docs.seleniumhq.org/)。

我写了很多关于这个主题的文章，比如[网页抓取 Ajax 和 Javascript 站点](http://blog.databigbang.com/web-scraping-ajax-and-javascript-sites/)以及[Twitter 的自动无浏览器 OAuth 身份验证](http://blog.databigbang.com/automated-browserless-oauth-authentication-for-twitter/)。在第一篇文章的最后，有很多我从 2011 年开始编译的额外资源。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-16T15:27:39.067

我喜欢[PhearJS](https://github.com/Tomtomgo/phearjs/)，但这可能部分是因为我构建了它。

也就是说，它是您在后台运行的服务，它使用 HTTP(S) 并将页面呈现为 JSON，包括您可能需要的任何元数据。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-04T01:31:07.387

取决于ajax页面。屏幕抓取的第一部分是确定页面的工作方式。是否有某种变量可以迭代以从页面请求所有数据？就我个人而言，我使用[Web Scraper Plus](http://www.velocityscape.com/)完成了很多与屏幕抓取相关的任务，因为它价格便宜，上手不难，非程序员可以相对快速地使用它。

旁注：使用条款可能是您在执行此操作之前可能要检查的地方。根据站点的不同，遍历所有内容可能会引发一些标志。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-14T09:09:12.280

我认为当源代码易于阅读时，Brian R. Bondy 的回答很有用。我更喜欢使用 Wireshark 或 HttpAnalyzer 等工具来捕获数据包并从“Host”字段和“GET”字段获取 url 的简单方法。

例如，我捕获如下数据包：

```
GET /hqzx/quote.aspx?type=3&market=1&sorttype=3&updown=up&page=1&count=8&time=164330 
 HTTP/1.1
Accept: */*
Referer: http://quote.hexun.com/stock/default.aspx
Accept-Language: zh-cn
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: quote.tool.hexun.com
Connection: Keep-Alive 
```

然后网址是：

```
http://quote.tool.hexun.com/hqzx/quote.aspx?type=3&market=1&sorttype=3&updown=up&page=1&count=8&time=164330 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-04-11T15:04:13.267

作为低成本解决方案，您还可以尝试[SWExplorerAutomation](http://webiussoft.com) (SWEA)。该程序为使用 HTML、DHTML 或 AJAX 开发的任何 Web 应用程序创建自动化 API。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-12-07T13:17:42.830

Selenium WebDriver 是一个很好的解决方案：您编写浏览器并自动执行需要在浏览器中完成的操作。浏览器（Chrome、Firefox 等）提供了自己的与 Selenium 一起使用的驱动程序。由于它作为一个自动化的**REAL 浏览器**工作，因此页面（包括 javascript 和 Ajax）会像使用该浏览器的人一样被加载。

缺点是它很慢（因为您很可能希望在对单个页面进行抓取之前等待所有图像和脚本加载）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-06-26T12:49:09.703

我以前链接到 MIT 的溶剂和 EnvJS 作为我刮掉 Ajax 页面的答案。这些项目似乎不再可用。

出于绝对必要，我发明了另一种实际刮掉 Ajax 页面的方法，它适用于像 findthecompany 这样具有查找无头 javascript 引擎并且不显示数据的方法的棘手网站。

该技术是使用 chrome 扩展来进行抓取。Chrome 扩展是删除 Ajax 页面的最佳位置，因为它们实际上允许我们访问 javascript 修改的 DOM。技术如下，我一定会在某个时候开源代码。创建一个 chrome 扩展（假设您知道如何创建一个，以及它的架构和功能。这很容易学习和实践，因为有很多示例），

1.  通过使用 xpath 使用内容脚本来访问 DOM。几乎可以将整个列表或表格或使用 xpath 动态呈现的内容作为字符串 HTML 节点放入变量中。（只有内容脚本可以访问 DOM，但它们不能使用 XMLHTTP 联系 URL）
2.  从内容脚本，使用消息传递，将整个剥离的 DOM 作为字符串发送到后台脚本。（后台脚本可以与 URL 对话，但不能接触 DOM）。我们使用消息传递来让这些对话。
3.  您可以使用各种事件循环浏览网页并将每个剥离的 HTML 节点内容传递给后台脚本。
4.  现在使用后台脚本与外部服务器（在 localhost 上）对话，这是一个使用 Nodejs/python 创建的简单服务器。只需将整个 HTML 节点作为字符串发送到服务器，服务器会将发布到它的内容保存到文件中，并使用适当的变量来识别页码或 URL。
5.  现在您已经抓取了 AJAX 内容（HTML 节点作为字符串），但这些是部分 html 节点。现在，您可以使用您最喜欢的 XPATH 库将这些加载到内存中，并使用 XPATH 将信息抓取到表格或文本中。

如果您看不懂，请发表评论，我可以写得更好。（ 第一次尝试 ）。另外，我正在尝试尽快发布示例代码。

# asp.net - 在 Asp.net 中 POST 后清除表单

> ID：260561
> 
> 赞同：4
> 
> 时间：2008-11-04T01:32:50.567
> 
> 标签：asp.net, post, webforms, postback

POST 后清除表单的正常程序是什么？只需遍历文本框并清除所有文本？我有一个包含多个表单的 ASP.NET 应用程序，我试图避免它们发送数据两次？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-04T01:39:57.650

您可以通过将代码放在 if(!isPostBack) 块中来避免重复发送/执行。这将告诉页面在发布时不要执行指定的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-04T01:39:10.943

您可以在回发后注入一些 JavaScript 代码来执行。

```
document.forms[0].reset();
document.forms[1].reset(); 
```

在服务器端，除了遍历循环内的控件或执行[Server.Transfer](http://support.microsoft.com/?kbid=839521)回到同一页面之外，我还没有找到一种简单的方法来重置表单内容。

# java - Eclipse 中的马蒂斯

> ID：260574
> 
> 赞同：6
> 
> 时间：2008-11-04T01:40:27.213
> 
> 标签：java, eclipse, swing, eclipse-3.4, matisse

我刚刚安装了 Eclipse 3.4，发现还没有创建 Swing 应用程序的插件。我还发现 MyEclipse IDE 中有一个 Matisse 实现，但我现在想知道是否有这样的 Matisse 插件是免费的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-04T21:03:52.713

Instatiations Swing Designer 在我看来是最好的。在尝试了可能不同的 Eclipse 插件后，我们选择了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T01:50:29.470

没有免费的。myeclipse 是在 eclipse 中运行 matisse 的唯一方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-04T07:39:11.093

尽管这不是您问题的真正答案，但您不妨看看布局管理方面的替代解决方案：Matisse 和 GroupLayout 既不是定义 GUI 表单的唯一方法，也不是最好的方法。

我建议你看看：

*   MigLayout（非常强大且非常简单）
*   和 DesignGridLayout（相当强大而且非常简单）

两者都是开源的并且有一个友好的许可证（不是 GPL）。在 Google 上快速搜索会立即为您提供链接。

免责声明：我是 DesignGridLayout 的项目所有者之一，但我指出它是因为我相信它提供了一种更好的方式来定义 Swing 布局。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-04T02:36:54.337

我做了一个快速的谷歌搜索，发现你可以并行使用 Netbeans Matisse 和 Eclipse：

[NetBeans Wiki：使用 NetbeansMatisseAndEclipseInParallel](http://wiki.netbeans.org/UsingNetbeansMatisseAndEclipseInParallel)

它似乎基本上涉及在 Netbeans 中构建 Swing GUI 并在 Eclipse 中执行其他编码任务。

# perl - 如何安装一组 Perl 模块的特定版本？

> ID：260593
> 
> 赞同：73
> 
> 时间：2008-11-04T02:03:26.683
> 
> 标签：perl, version, module, cpan

我的任务是复制生产环境以创建许多测试/坐席环境。

我需要做的一件事是构建 Perl，以及多年来已安装的所有模块（包括内部和外部模块）。我可以只使用 CPAN.pm autobundle，但这将导致测试环境具有生产环境中的外部模块的更新版本。

获取和安装（大量）特定于版本的 Perl 模块的最简单/最佳方法是什么。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2008-11-06T06:27:50.423

bdfoy 拥有最好的大规模解决方案，但如果您只想安装几个模块，您可以通过引用 tarball 的路径（相对于 CPAN 树的顶部）来要求 CPAN shell 安装特定的发行版。

```
cpan> install MSCHWERN/Test-Simple-0.62.tar.gz 
```

将 BackPAN 的 URL 放入您的 URL 列表中，您可以安装任何旧版本。

```
cpan> o conf urllist push http://backpan.perl.org/ 
```

这在[CPAN.pm 常见问题解答](https://metacpan.org/pod/CPAN#pod12)中的“如何安装模块的 'DEVELOPER RELEASE'？”

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2008-11-04T03:41:01.400

完全按照您的要求制作您自己的 CPAN 镜像。[Stratopan.com](http://www.stratopan.com)是一项服务，而[Pinto](http://www.metacpan.org/module/Pinto)是建立在其之上的工具，可以帮助您做到这一点。

CPAN 工具仅安装任何发行版的最新版本，因为 PAUSE 仅索引最新版本。但是，您可以创建自己的私有 CPAN，它具有您想要的分布。一旦您拥有自己的 CPAN 镜像，只包含您想要的内容，您只需将您的 CPAN 工具指向该镜像，以便它只安装这些版本。稍后会详细介绍。

现在，你想要有几个版本。您可以根据需要创建任意数量的镜像，也可以将镜像置于源代码管理中，以便查看您喜欢的任何版本的镜像。

CPAN::Mini::Inject 等工具可以帮助您设置自己的 CPAN。查看[我在 Slideshare 上](http://www.slideshare.net/brian_d_foy)的演讲以获取基本示例，以及[我在 Vimeo 上的一些视频以](http://vimeo.com/user493904/videos)获取一些演示。查看标题中包含“CPAN”或“BackPAN”的任何内容。[我想我可能在The Perl Review](http://www.theperlreview.com)中也有一些关于它的内容，或者应该在下一期。:)

最近，我一直在开发一个名为 dpan（用于 DarkPAN）的程序，它可以查看随机目录，在其中找到 Perl 发行版，并创建您需要的结构和索引文件。你运行 dpan，你会得到一个指向你的 CPAN 客户端的 URL，然后你就走了。它是我在[Github](http://github.com/briandfoy/mycpan-indexer/tree/master)中的 MyCPAN-Indexer 项目的一部分。它还没有完全准备好供无人监督的公共使用，因为我主要与企业客户合作定制他们的设置。如果您对此感兴趣，请随时问我问题。

此外，我最近发布了[CPAN::PackageDetails](http://search.cpan.org/dist/CPAN-PackageDetails)，它可以帮助您构建正确的索引文件。它也仍然有点年轻，但同样，如果你需要一些特别的东西，尽管问。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-05-30T00:32:55.127

```
cpan install App::cpanminus
cpanm Your::Module@1.23 
```

（如其他答案中所引用的，Carton 在`cpanm`下面使用来解决明确的版本要求。）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-06-14T05:44:55.730

*[已经快五年了，这是一个问得好、回答得好的问题，有很多观点。由于此页面仍必须出现在 Google 搜索中，因此更新不会有什么坏处。]*

[`Carton`](https://metacpan.org/module/Carton)这里值得一提。是一个相对较新的工具，与, , , *et*`Carton`风格相同。*人。*作者 (Miyagawa) 称其为“alpha”质量，但即使在其当前状态下，carton 也有助于简化跨机器的版本调整模块的多个环境的维护。`App::cpanminus``App::cpanoutdated``perlbrew`

 *[`Pinto`](https://metacpan.org/release/Pinto)另一个与某些回复相关的最新工具也是（事实上，其中一位受访者是贡献者）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-12-05T21:01:30.683

[Stratopan.com](https://stratopan.com)是另一种选择。Stratopan 在云中提供私有 CPAN。您可以使用特定版本的模块（及其依赖项）填充您的 Stratopan 存储库，然后使用标准 Perl 工具链安装它们。存储库仅在*您*决定更改时才会更改，因此您将始终获得所需的模块版本。

*免责声明：我经营 Stratopan。*

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-22T15:18:41.303

似乎创建一个`cpanfile`列出所有模块和所需版本的列表（使用`== <version>`语法将其锁定到特定版本）在这里也可以很好地发挥作用。这意味着使用`Carton`或`cpanm`安装模块。

这样做的好处是能够快速/轻松地调整文件以测试在开发或登台环境中升级特定模块 - 这是私有 CPAN 镜像不允许您做的事情（无需创建多个镜像）。

# java - 带有数据源的消息驱动 Bean

> ID：260594
> 
> 赞同：2
> 
> 时间：2008-11-04T02:05:29.767
> 
> 标签：java, ejb, jms, message-driven-bean

我的问题是如何配置 EJB 3.0 样式的消息驱动 bean 以在 jboss 中使用已配置的 JMS 数据源。

例如，我的 MDB 看起来像：

```
@MessageDriven(mappedName = "ExampleMDB", activationConfig = {

        @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Topic"),
        @ActivationConfigProperty(propertyName = "destination", propertyValue = "MyTopic"),
        @ActivationConfigProperty(propertyName = "channel", propertyValue = "MyChannel"),

})
@ResourceAdapter(value = "wmq.jmsra.rar")
@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
@TransactionManagement(TransactionManagementType.BEAN)
public class MyMDB implements MessageListener {
 .....
} 
```

但我希望 bean 附加到给定的 JMS 数据源（对于 jboss 4.2.2，这是在 deploy/jms/jms-ds.xml 中）。也许这甚至是不可能的，但值得一问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-05T12:09:37.317

如果我正确理解了您的问题，`MyMDB`在 WebLogic 上收听一个主题，并且您想使用 JBoss 提供的附加 JMS 目标，该目标在已部署的配置文件中定义并由其 JNDI 名称标识（默认情况下，`deploy/jms/jms-ds.xml`仅包含 JMS 的配置提供者和连接工厂——没有数据源）。

最简单的方法是让容器通过其 JNDI 名称注入 JMS 目的地和连接工厂（在 JBoss 中，JMS 目的地是通过[部署 xxx-service.xml 文件](http://docs.jboss.org/jbossas/getting_started/v4/html/mdb.html#d0e1617)来配置的）。在启动时，您可以初始化连接，并在 MDB 释放后立即执行清理。

以下示例显示了注入 ( `@Resource`) 和资源管理 ( `@PostConstruct`and `@PreDestroy`)。JMS 连接和目的地用于`useJmsDestination(String)`发送文本消息。

```
public class MyMDB implements MessageListener {

    @Resource(mappedName = "queue/YourQueueName") // can be topic too
    private Queue targetDestination;

    @Resource(mappedName = "QueueConnectionFactory") // or ConnectionFactory
    private QueueConnectionFactory factory;

    private Connection conn;

    public void onMessage(Message m) {
        // parse message and do what you need to do
        ...
        // do something with the message and the JBoss JMS destination
        useJmsDestination(messageString);     
    }

    private void useJmsDestination(String text) {
        Session session = null;
        MessageProducer producer = null;

        try {
            session = conn.createSession(true, Session.AUTO_ACKNOWLEDGE);
            producer = session.createProducer(targetDestination);
            TextMessage msg = session.createTextMessage(text);
            producer.send(msg);
        } catch (JMSException e) {
            throw new RuntimeException(e);
        } finally {
            try {
                if (producer != null) {
                    producer.close();
                }
                if (session != null) {
                    session.close();
                }
            } catch (JMSException e) {
                // handle error, should be non-fatal, as the message is already sent.
            }
        }
    }

    @PostConstruct
    void init() {
        initConnection();
        // other initialization logic
        ...
    }

    @PreDestroy
    void cleanUp() {
        closeConnection();
        // other cleanup logic
        ...
    }

    private void initConnection() {
        try {
            conn = factory.createConnection();
        } catch (JMSException e) {
            throw new RuntimeException("Could not initialize connection", e);
        }
    }

    private void closeConnection() {
        try {
            conn.close();
        } catch (JMSException e) {
            // handle error, should be non-fatal, as the connection is being closed
        }
    }
} 
```

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-05T12:29:20.367

我想您要问的是“*如何指定 JMS 数据源的 JNDI 位置以用于 MDB*？”

在这种情况下，答案是：

```
@ActivationConfigProperty(propertyName = "providerAdapterJNDI", propertyValue = "java:/DefaultJMSProvider") 
```

此外，请查看以下页面，该页面提供了大量有关在 jBoss 中配置 MDB 的有用详细信息： [http ://www.jboss.org/community/docs/DOC-9352](http://www.jboss.org/community/docs/DOC-9352)

# php - 在 CodeIgniter 中，如何通过电子邮件将 PHP 错误消息发送给我？

> ID：260597
> 
> 赞同：13
> 
> 时间：2008-11-04T02:07:50.217
> 
> 标签：php, email, codeigniter, error-logging

我想通过电子邮件接收错误日志。例如，如果出现`Warning-level`错误消息，我想收到一封关于它的电子邮件。

我怎样才能让它在 CodeIgniter 中工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-11-04T02:40:08.730

您可以扩展 Exception 核心类来做到这一点。

可能需要调整对 CI 电子邮件类的引用，不确定是否可以从这样的库中实例化它。我自己不使用 CI 的电子邮件类，我一直在使用 Swift Mailer 库。但这应该让你走上正确的道路。

制作一个文件 MY_Exceptions.php 并将其放在 /application/libraries/ （或 CI 2 的 /application/core/ ）

```
class MY_Exceptions extends CI_Exceptions {

    function __construct()
    {
        parent::__construct();
    }

    function log_exception($severity, $message, $filepath, $line)

    {   
        if (ENVIRONMENT === 'production') {
            $ci =& get_instance();

            $ci->load->library('email');
            $ci->email->from('your@example.com', 'Your Name');
            $ci->email->to('someone@example.com');
            $ci->email->cc('another@another-example.com');
            $ci->email->bcc('them@their-example.com');
            $ci->email->subject('error');
            $ci->email->message('Severity: '.$severity.'  --> '.$message. ' '.$filepath.' '.$line);
            $ci->email->send();
        }

        parent::log_exception($severity, $message, $filepath, $line);
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-07-31T17:23:10.317

解决方案中遗漏的一件事是您必须获取 CodeIgniters 超级对象才能加载和使用电子邮件库（或任何 CodeIgniters 其他库和本机函数）。

```
$CI =& get_instance(); 
```

完成后，您使用`$CI`而不是`$this`加载电子邮件库并设置所有参数。有关更多信息，[请单击此处](http://codeigniter.com/user_guide/general/creating_libraries.html)并查看**在您的库中使用 CodeIgniter 资源**部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-04T02:43:16.977

哦，另一种选择是获取支持电子邮件摘要的 logrotation 应用程序。不确定你在哪个平台上，但你可以让一些东西监视 error_log 文件并向你发送更新，可能不那么整洁，当然你会仅限于 error_log 中的信息。（error_log 是 Apache，CI 在系统中有 /logs/ 文件夹，IIS 有 Windows 事件）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-11-16T20:10:21.410

我正要发布一个开源项目来做这件事，还有更多。它收集错误，将它们发送到问题跟踪器，检测重复项，将它们变成问题并通过电子邮件发送给员工。

详细信息见[https://sourceforge.net/news/?group_id=317819&id=293422](https://sourceforge.net/news/?group_id=317819&id=293422)，它提到的 0.1.7 版本将在几天后发布。

开源跟踪器位于[http://elastik.sourceforge.net/](http://elastik.sourceforge.net/)

欢迎任何反馈，谢谢

# xml - 初级 ASP/XML 测试的建议

> ID：260602
> 
> 赞同：0
> 
> 时间：2008-11-04T02:12:41.330
> 
> 标签：xml, asp-classic

我正在寻找有关初级 ASP/XML 测试的建议。本质上，我正在尝试聘请一位非常初级的程序员。我正在尝试聘请一名初级程序员来帮助维护一个包含一些重复的 ASP 页面的大型代码库。我正在慢慢地制作更多模块化、可维护的代码，但在此之前，我正试图避免过于频繁地更改“一件小事”。

无论如何，我正在寻找有关测试处理这些任务能力的方法的建议。我得到的应用程序是那些希望“闯入 IT”的技术经验最少的人。我完全是为了给别人一个机会，但我也想测试一些基础水平的能力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-04T02:55:22.147

听起来是一份糟糕的工作，而且我敢肯定你的薪水不高（“我正在尝试雇佣一个非常初级的程序员”）。只需雇用他或她的简历中拼写错误最少的人。不要测试太难。一旦有更好的事情出现，一些资格过高的人可能会离开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T04:01:28.973

告诉他们你有一个巨大的遗留 asp/xml 代码库，并询问他们将如何帮助你提高它的可维护性

应立即聘用第一个没有惊慌失措并提出好建议的候选人

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T02:20:10.893

我会问一些基本的数学问题，包括集合、统计等。这类问题可能有点难，因为它们不依赖于 IT 背景。

如果你想包括一些编程问题，我会问一些问题：

“如何在不使用除法运算符的情况下实现整数除法”

另一个想法是当场教他们一种虚构的语言，比如[logo](http://en.wikipedia.org/wiki/Logo_(programming_language))，有四个基本命令和一些循环指令，然后要求他们画出正方形、圆形和其他不可用的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-04T02:50:35.730

作为一个绝对基础，您可以尝试根据[此 Coding Horror 帖子中](http://www.codinghorror.com/blog/archives/000635.html)链接[的学术文章测试他们在心理建模方面的一致性。](http://www.cs.mdx.ac.uk/research/PhDArea/saeed/).

下一步是[FizzBu​​zz](http://www.codinghorror.com/blog/archives/000781.html)

在那之后，也许是更具体的领域，也许看看他们是否可以对你谈论的现有代码进行一些小改动？

也不要粉饰最后一个 - 给他们一些现有的代码，使其看起来像意大利面条一样的荣耀，以进行微小的改变。

# php - PHP CSS 选择器库？

> ID：260605
> 
> 赞同：32
> 
> 时间：2008-11-04T02:17:43.470
> 
> 标签：php, screen-scraping, css-selectors

是否有允许我使用 CSS 选择器查询 XHTML 文档的 PHP 类/库？如果我能以某种方式使用 CSS 选择器（jQuery 宠坏了我！），我需要抓取一些非常容易访问的数据页面。有任何想法吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2008-11-04T02:19:38.053

进一步谷歌搜索后（最初的结果不是很有帮助），似乎实际上有一个 Zend Framework 库，以及其他一些库：

*   [DOM-查询](https://github.com/PHPPowertools/DOM-Query)
*   [查询](http://code.google.com/p/phpquery/)
*   [查询](https://github.com/tburry/pquery)
*   [查询路径](http://querypath.org/)
*   [简单的 HTML DOM 解析器](http://simplehtmldom.sourceforge.net/)
*   [Ultimate Web Scraper 工具包](https://github.com/cubiclesoft/ultimate-web-scraper/)
*   [Zend-Dom](https://github.com/zendframework/zend-dom)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-04T02:23:14.660

XPath 是访问 XML（和 XHTML）节点的一种相当标准的方法，并且提供比 CSS 更高的精度。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-06-20T00:58:42.047

另一个：http:
[//querypath.org/](http://querypath.org/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2010-07-12T09:13:54.767

一个很棒的是 symfony 2 的一个组件，[CssSelector\Parser ^(*Introduction*)](http://fabien.potencier.org/article/42/parsing-xml-documents-with-css-selectors) 。它将 CSS 选择器转换为 XPath 表达式。看看 =)

[源代码](https://github.com/symfony/symfony/tree/master/src/Symfony/Component/CssSelector)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-01-22T16:00:48.227

对于[jQuery](http://jquery.com/)用户来说，最感兴趣的可能是**jQuery 到 PHP 的移植**，即**[phpQuery](http://code.google.com/p/phpquery/)**。库的几乎所有部分都已移植。此外，它包含**WebBrowser**插件，可用于 Web Scraping 整个站点的路径/进程（例如访问登录后可用的数据）。它只是模拟服务器上的网络浏览器（事件和 cookie）。**最新版本具有对 XML命名空间**和 CSS3 ***“|”***的实验性支持 **选择器**。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-02-08T19:08:34.993

我最终使用了[PHP Query Lite](http://pqlite.com/)，它非常简单并且拥有我所需要的一切。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-19T06:22:36.973

对于文档解析，我使用[DOM](http://us.php.net/dom)。如果您知道标签名称（在本例中为“div”），这可以很容易地解决您的问题：

```
 $doc = new DOMDocument();
 $doc->loadHTML($html);

 $elements = $doc->getElementsByTagName("div");
 foreach ($elements as $e){
  if ($e->getAttribute("class")!="someclass") continue;

  //its a div.classname
 } 
```

不确定 DOM 是否允许您一次获取文档的所有元素……您可能需要进行树遍历。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-07-28T14:27:38.403

我基于 Mootools CSS 选择器引擎[http://selectors.svn.exyks.org/](http://selectors.svn.exyks.org/)编写了我的。它依赖于 simplexml 扩展能力（所以，它是只读的）

# asp.net - Asp.net 取消按钮

> ID：260615
> 
> 赞同：1
> 
> 时间：2008-11-04T02:25:01.990
> 
> 标签：asp.net, webforms

我正在我的表单加载事件中尝试这个

```
 cmdCancel.Attributes.Add("onClick", "document.forms[0].reset();return false;") 
```

但它并没有清除我的表格。我的表单是一个“ContentPage”，是母版页的一部分。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-04T02:28:06.320

试试这个：

```
 cmdCancel.Attributes.Add("onClick","document.getElementById('" + this.Page.ClientId + "').reset(); return false;"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-04T02:38:49.997

在表单上调用“重置”会将值重置为页面标记中提供的值。因此，如果提供了任何值（通过 ViewState 或任何其他机制），那么字段将被重置，而不是空白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-04T02:28:04.060

不应该取消带您离开表单输入页面吗？听起来您正在尝试编写“重置”代码，但您在功能上尝试“取消”。

就个人而言，我总是有一个在“清理”时触发的事件，并且会执行我需要做的所有表单清理（不仅仅是重置表单字段）。

# performance - ORM 解决方案（JPA；Hibernate）与 JDBC

> ID：260618
> 
> 赞同：18
> 
> 时间：2008-11-04T02:25:33.457
> 
> 标签：performance, hibernate, spring, jpa, jdbc

我需要能够在内存 HSQL 数据库中以每 5 秒至少 8000 个对象的一致速率插入/更新对象。

我在 Spring/Hibernate/JPA 和纯 JDBC 之间做了一些比较性能测试。我发现使用 HSQL 在性能上有显着差异。使用 Spring/Hib/JPA，我可以在 5 秒内插入 3000-4000 个 1.5 KB 对象（具有一对多和多对多关系），而直接JDBC 调用我可以插入 10,000-12,000 个相同的对象。

我无法弄清楚为什么会有如此巨大的差异。我已经调整了 Spring/Hib/JPA 设置很多，试图在没有运气的情况下接近性能。我想将 Spring/Hib/JPA 用于未来用途、可扩展性，并且因为外键关系（一对多和多对多）难以手动维护；但性能要求似乎指向使用纯 JDBC。

关于为什么会有如此巨大的差异的任何想法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-11-04T02:54:20.027

我们在批处理模式（Statement#executeBatch()）中比较 Hibernate 和 JDBC 有类似的经验。基本上，Hibernate 似乎在批量操作方面做得不好。在我们的例子中，Hibernate 实现在我们的生产硬件上已经足够快了。

您可能想要做的是将数据库调用包装在 DAO 中，为您的应用程序提供一种一致的方式来访问您的数据。在方便的地方使用 Hibernate 和在性能要求需要的地方使用 JDBC 来实现您的 DAO。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-11-04T11:10:36.220

作为最低要求，您需要在 Hibernate 中进行批量插入：[http](http://www.hibernate.org/hib_docs/reference/en/html/batch.html) : //www.hibernate.org/hib_docs/reference/en/html/batch.html 节省大量往返时间。

而且，正如Justice 所说，Hib 的主要目标不是计算机性能，而是开发人员性能。话虽如此，通常可以实现与 JDBC 结果相当（不等于，但也不会差很多）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-04T02:47:18.093

Hibernate 维护对象的一级缓存以用于脏检查以及充当工作单元和身份映射。这增加了开销，尤其是在批量类型操作中。对于批量操作，您可能需要调查不保持此状态的[StatelessSession 。](http://www.hibernate.org/hib_docs/v3/reference/en-US/html/batch-statelesssession.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-04-20T08:39:12.660

永远不要用一种技术解决所有问题。根据问题决定使用什么技术。当然 jpa 或 hibernate 比 jdbc 慢。jdbc 的级别低于 jpa。使用 jdbc 的 db 专业人员也可以编写比 jpa 更优化的 sql。如果您给出了需要速度的临界点，那么 jpa 不是您的选择。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-04T02:59:36.273

所有这些映射......它可能会变得有点昂贵，所有神秘的逻辑以及它必须做的所有反射和一致性检查。

当然，映射的目的不是提高性能。通常，您会受到性能影响。但是你在性能上损失了什么，你（*可以*）在开发人员的生产力、一致性、可测试性、可靠性和更多令人垂涎的属性方面获得了很多倍的收益。通常，当您需要额外的性能并且不想放弃映射时，您需要增加一些硬件。

# http - HTTP Watch Pro 的用途是什么？

> ID：260625
> 
> 赞同：2
> 
> 时间：2008-11-04T02:27:46.913
> 
> 标签：http

这个软件的目的是什么？

[**http://www.httpwatch.com/**](http://www.httpwatch.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-05T16:32:22.763

我更喜欢 FireFox 的 HTTPFox 插件：
[https ://addons.mozilla.org/en-US/firefox/addon/6647](https://addons.mozilla.org/en-US/firefox/addon/6647)

和 IE 的提琴手：
[http ://www.fiddlertool.com/fiddler/](http://www.fiddlertool.com/fiddler/)

两者都提供与 httpwatch 类似的功能（但它们是免费的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T05:27:31.607

它可以帮助您分析/调试/监控服务器和浏览器之间的 HTTP 通信。它在浏览器上运行并跟踪所有 HTTP 流量。

这个任务的一小部分也是由 firefox 插件[Live HTTP Headers完成的](https://addons.mozilla.org/de/firefox/addon/3829)

# language-agnostic - 什么是类型安全？

> ID：260626
> 
> 赞同：314
> 
> 时间：2008-11-04T02:27:48.023
> 
> 标签：language-agnostic, programming-languages, computer-science, terminology, type-safety

“类型安全”是什么意思？

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2008-11-04T02:33:08.400

类型安全意味着编译器将在编译时验证类型，如果您尝试将错误的类型分配给变量，则会引发错误。

一些简单的例子：

```
// Fails, Trying to put an integer in a string
String one = 1;
// Also fails.
int foo = "bar"; 
```

这也适用于方法参数，因为您将显式类型传递给它们：

```
int AddTwoNumbers(int a, int b)
{
    return a + b;
} 
```

如果我尝试使用以下方法调用它：

```
int Sum = AddTwoNumbers(5, "5"); 
```

编译器会抛出一个错误，因为我正在传递一个字符串（“5”），并且它需要一个整数。

在松散类型的语言（例如 javascript）中，我可以执行以下操作：

```
function AddTwoNumbers(a, b)
{
    return a + b;
} 
```

如果我这样称呼它：

```
Sum = AddTwoNumbers(5, "5"); 
```

Javascript 自动将 5 转换为字符串，并返回“55”。这是由于 javascript 使用 + 号进行字符串连接。要使其具有类型感知能力，您需要执行以下操作：

```
function AddTwoNumbers(a, b)
{
    return Number(a) + Number(b);
} 
```

或者，可能：

```
function AddOnlyTwoNumbers(a, b)
{
    if (isNaN(a) || isNaN(b))
        return false;
    return Number(a) + Number(b);
} 
```

如果我这样称呼它：

```
Sum = AddTwoNumbers(5, " dogs"); 
```

Javascript 自动将 5 转换为字符串，并附加它们，以返回“5 dogs”。

并不是所有的动态语言都像 javascript 一样宽容（事实上，动态语言并不隐含一种松散的类型语言（参见 Python）），其中一些实际上会给你一个无效类型转换的运行时错误。

虽然它很方便，但它会给您带来很多很容易被遗漏的错误，并且只能通过测试正在运行的程序来识别。就个人而言，如果我犯了那个错误，我更喜欢让我的编译器告诉我。

现在，回到 C#...

C# 支持一种称为[covariance](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29#C.23)的语言功能，这基本上意味着您可以用基本类型替换子类型而不会导致错误，例如：

```
 public class Foo : Bar
 {
 } 
```

在这里，我创建了一个子类 Bar 的新类 (Foo)。我现在可以创建一个方法：

```
 void DoSomething(Bar myBar) 
```

并使用 Foo 或 Bar 作为参数调用它，两者都可以正常工作而不会导致错误。这是因为 C# 知道 Bar 的任何子类都将实现 Bar 的接口。

但是，您不能反过来：

```
void DoSomething(Foo myFoo) 
```

在这种情况下，我不能将 Bar 传递给这个方法，因为编译器不知道 Bar 实现了 Foo 的接口。这是因为子类可以（并且通常会）与父类有很大不同。

当然，现在我已经脱离了深层次，超出了原始问题的范围，但知道这些都是好东西:)

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2014-08-06T09:57:10.623

类型安全不应与静态/动态类型或强/弱类型混淆。

类型安全语言是一种可以对数据执行的唯一操作是数据类型所允许的操作。也就是说，如果你的数据是类型的`X`并且`X`不支持操作`y`，那么语言将不允许你执行`y(X)`。

此定义未设置检查*时*的规则。它可以在编译时（静态类型）或运行时（动态类型），通常通过异常。它可以是两者兼而有之：一些静态类型语言允许您将数据从一种类型转换为另一种类型，并且必须在运行时检查转换的有效性（想象一下您正在尝试将 an`Object`转换为 a `Consumer`- 编译器没有知道它是否可以接受的方法）。

类型安全也不一定意味着强类型——有些语言是出了名的弱类型，但仍然可以说是类型安全的。以 Javascript 为例：它的类型系统很弱，但仍然严格定义。它允许自动转换数据（例如，将字符串转换为整数），但要遵循明确定义的规则。据我所知，Javascript 程序不会以未定义的方式运行，如果你足够聪明（我不是），你应该能够预测阅读 Javascript 代码时会发生什么。

类型不安全的编程语言的一个示例是 C：在数组边界之外读取/写入数组值具有*规范*未定义的行为。无法预测会发生什么。C 是一种具有类型系统但不是类型安全的语言。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2018-01-09T20:28:26.890

类型安全不仅仅是编译时约束，而是**运行时**约束。我觉得即使经过了这么长时间，我们也可以进一步澄清这一点。

有两个与类型安全相关的主要问题。内存**和数据类型（及其相应的操作）。

## 记忆**

A`char`通常每个字符需要 1 个字节或 8 位（取决于语言、Java 和 C# 存储需要 16 位的 unicode 字符）。An`int`需要 4 个字节或 32 位（通常）。

视觉上：

`char: |-|-|-|-|-|-|-|-|`

`int : |-|-|-|-|-|-|-|-| |-|-|-|-|-|-|-|-| |-|-|-|-|-|-|-|-| |-|-|-|-|-|-|-|-|`

类型安全语言不允许在*运行时*将 int 插入到 char 中（这应该会引发某种类强制转换或内存不足异常）。但是，在类型不安全的语言中，您将覆盖另外 3 个相邻内存字节中的现有数据。

`int >> char:`

`|-|-|-|-|-|-|-|-| |?|?|?|?|?|?|?|?| |?|?|?|?|?|?|?|?| |?|?|?|?|?|?|?|?|`

在上述情况下，右侧的 3 个字节被覆盖，因此任何指向该内存的指针（比如 3 个连续的字符）希望获得可预测的 char 值现在将有垃圾。这会导致`undefined`您的程序中的行为（或者更糟，可能在其他程序中，具体取决于操作系统如何分配内存 - 现在不太可能）。

***虽然第一个问题在技术上与数据类型无关，但类型安全语言本身就解决了这个问题，并且它直观地向那些不知道内存分配“外观”的人描述了这个问题。*

## 数据类型

更微妙和直接的类型问题是两种数据类型使用相同的内存分配。取一个 int 与一个 unsigned int。两者都是 32 位。（就像 char[4] 和 int 一样容易，但更常见的问题是 uint 与 int）。

`|-|-|-|-|-|-|-|-| |-|-|-|-|-|-|-|-| |-|-|-|-|-|-|-|-| |-|-|-|-|-|-|-|-|`

`|-|-|-|-|-|-|-|-| |-|-|-|-|-|-|-|-| |-|-|-|-|-|-|-|-| |-|-|-|-|-|-|-|-|`

类型不安全的语言允许程序员引用正确分配的 32 位跨度，但是当将 unsigned int 的值读入 int 的空间（或反之亦然）时，我们再次有`undefined`行为。想象一下这可能在银行项目中引起的问题：

> “老兄！我透支了 30 美元，现在我还剩 65,506 美元！！”

...'当然，银行程序使用更大的数据类型。;） 哈哈！

正如其他人已经指出的那样，下一个问题是类型的计算操作。这已经足够覆盖了。

## 速度与安全

今天的大多数程序员不需要担心这些事情，除非他们使用 C 或 C++ 之类的东西。尽管编译器已尽最大努力将风险降至最低，但这两种语言都允许程序员在运行时轻松违反类型安全（直接内存引用）。然而，这并不全是坏事。

这些语言计算速度如此之快的一个原因是它们不会在运行时操作（例如 Java）期间验证类型兼容性。他们认为开发人员是一个很好的理性人，不会将字符串和 int 加在一起，为此，开发人员会获得速度/效率的回报。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2008-11-04T05:26:54.417

这里的许多答案将类型安全与静态类型和动态类型混为一谈。动态类型语言（如 smalltalk）也可以是类型安全的。

一个简短的回答：如果没有操作导致未定义的行为，则认为语言是类型安全的。许多人认为对于*严格*类型化的语言来说，显式类型转换的要求是必要的，因为自动转换有时会导致定义明确但意外/不直观的行为。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-07-31T05:20:53.693

“类型安全”的编程语言意味着以下内容：

1.  您无法从未初始化的变量中读取
2.  您不能索引数组超出其范围
3.  您不能执行未经检查的类型转换

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-11-04T02:38:19.763

来自文科专业而非计算机科学专业的解释：

当人们说一种语言或语言特性是类型安全的时，他们的意思是该语言将帮助您防止，例如，将不是整数的东西传递给一些需要整数的逻辑。

例如，在 C# 中，我将函数定义为：

```
 void foo(int arg) 
```

然后编译器会阻止我这样做：

```
 // call foo
  foo("hello world") 
```

在其他语言中，编译器不会阻止我（或者没有编译器......），所以字符串将被传递给逻辑，然后可能会发生一些不好的事情。

类型安全语言尝试在“编译时”捕获更多内容。

不利的一面是，对于类型安全的语言，当你有一个像“123”这样的字符串并且你想像 int 一样对其进行操作时，你必须编写更多的代码来将字符串转换为 int，或者当你有一个 int 时像 123 并想在“答案是 123”之类的消息中使用它，您必须编写更多代码将其转换/转换为字符串。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-01-15T17:22:19.407

为了更好地理解，请观看以下视频，该视频以类型安全语言 (C#) 演示代码，而不是类型安全语言 (javascript)。

[http://www.youtube.com/watch?v=Rlw_njQhkxw](http://www.youtube.com/watch?v=Rlw_njQhkxw)

现在是长文本。

类型安全意味着防止类型错误。当一种类型的数据类型在不知不觉中分配给另一种类型时，就会发生类型错误，并且我们会得到不希望的结果。

例如，JavaScript 不是一种类型安全的语言。在下面的代码中，“num”是数字变量，“str”是字符串。Javascript 允许我做“num + str”，现在 GUESS 会做算术或连接。

现在对于下面的代码，结果是“55”，但重要的一点是它会产生什么样的操作造成的混乱。

发生这种情况是因为 javascript 不是一种类型安全的语言。它允许将一种类型的数据设置为另一种类型而不受限制。

```
<script>
var num = 5; // numeric
var str = "5"; // string
var z = num + str; // arthimetic or concat ????
alert(z); // displays  “55”
</script> 
```

C# 是一种类型安全的语言。它不允许将一种数据类型分配给另一种数据类型。下面的代码不允许在不同的数据类型上使用“+”运算符。

![在此处输入图像描述](https://i.stack.imgur.com/0XOpK.png)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-11-04T02:50:05.513

类型安全意味着以编程方式，变量、返回值或参数的数据类型必须符合特定标准。

实际上，这意味着 7（整数类型）与“7”（字符串类型的引号字符）不同。

PHP、Javascript 和其他动态脚本语言通常是弱类型的，因为如果您尝试添加“7”+3，它们会将（字符串）“7”转换为（整数）7，尽管有时您必须这样做显式（并且 Javascript 使用“+”字符进行连接）。

C/C++/Java 不会理解这一点，或者会将结果连接成“73”。类型安全通过明确类型要求来防止代码中的这些类型的错误。

类型安全非常有用。上述 "7" + 3 的解决方案是键入 cast (int) "7" + 3（等于 10）。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-11-28T08:03:01.730

**概念：**

为了非常简单的类型安全，就像含义一样，它确保变量的类型应该是安全的

1.  没有错误的数据类型，例如不能用整数保存或初始化字符串类型的变量
2.  超出范围的索引不可访问
3.  只允许特定的内存位置

因此，就变量而言，这完全是关于存储类型的安全性。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-11-04T02:41:41.147

试试这个解释...

TypeSafe 意味着在编译时静态检查变量是否有适当的赋值。例如，考虑一个字符串或一个整数。这两种不同的数据类型不能交叉分配（即，您不能将整数分配给字符串，也不能将字符串分配给整数）。

对于非类型安全的行为，请考虑：

```
object x = 89;
int y; 
```

如果您尝试这样做：

```
y = x; 
```

编译器会抛出一个错误，指出它无法将 System.Object 转换为 Integer。你需要明确地这样做。一种方法是：

```
y = Convert.ToInt32( x ); 
```

上面的赋值不是类型安全的。类型安全分配是类型可以直接相互分配的地方。

ASP.NET 中有大量非类型安全的集合（例如，应用程序、会话和视图状态集合）。关于这些集合的好消息是（最小化多个服务器状态管理考虑）您可以将几乎任何数据类型放在三个集合中的任何一个中。坏消息：因为这些集合不是类型安全的，所以当您将它们取回时，您需要适当地转换这些值。

例如：

```
Session[ "x" ] = 34; 
```

工作正常。但是要重新分配整数值，您需要：

```
int i = Convert.ToInt32( Session[ "x" ] ); 
```

阅读泛型，了解该工具帮助您轻松实现类型安全集合的方式。

C# 是一种类型安全的语言，但请注意有关 C# 4.0 的文章；有趣的动态可能性迫在眉睫（C# 本质上获得 Option Strict: Off 是一件好事吗……我们拭目以待）。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-10-27T14:10:01.583

类型安全是只访问它被授权访问的内存位置的代码，并且只能以明确定义的、允许的方式访问。类型安全代码无法对对该对象无效的对象执行操作。C# 和 VB.NET 语言编译器总是生成类型安全的代码，这些代码在 JIT 编译期间被验证为类型安全的。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-11-04T03:25:56.487

类型安全意味着可以分配给程序变量的一组值必须符合明确定义和可测试的标准。类型安全的变量导致程序更健壮，因为操纵变量的算法可以相信变量只会采用一组明确定义的值中的一个。保持这种信任可确保数据和程序的完整性和质量。

对于许多变量，可以分配给变量的一组值是在编写程序时定义的。例如，可以允许名为“color”的变量取值“red”、“green”或“blue”，而绝不允许取其他值。对于其他变量，这些标准可能会在运行时发生变化。例如，一个名为“颜色”的变量可能只允许在关系数据库中的“颜色”表的“名称”列中取值，其中“红色”、“绿色”和“蓝色”是三个值对于“颜色”表中的“名称”，但计算机程序的某些其他部分可能能够在程序运行时添加到该列表中，并且变量可以在添加到颜色表后采用新值.

许多类型安全语言通过坚持为变量严格定义类型并且只允许为变量分配相同“类型”的值，从而产生“类型安全”的错觉。这种方法有几个问题。例如，一个程序可能有一个变量“yearOfBirth”，它是一个人的出生年份，并且很容易将其类型转换为一个短整数。但是，它不是一个短整数。今年，这是一个小于 2009 年且大于 -10000 的数字。但是，随着程序的运行，这个集合每年都会增长 1。将其设为“short int”是不够的。使该变量类型安全所需的是运行时验证功能，以确保该数字始终大于 -10000 并且小于下一个日历年。

使用动态类型（或鸭子类型或清单类型）的语言，如 Perl、Python、Ruby、SQLite 和 Lua，没有类型变量的概念。这迫使程序员为每个变量编写一个运行时验证例程，以确保它是正确的，或者忍受无法解释的运行时异常的后果。根据我的经验，使用静态类型语言（如 C、C++、Java 和 C#）的程序员经常会误以为静态定义的类型就是他们获得类型安全的好处所需要做的一切。对于许多有用的计算机程序来说，这根本不是真的，而且很难预测它是否适用于任何特定的计算机程序。

长短......你想要类型安全吗？如果是这样，则编写运行时函数以确保为变量赋值时，它符合明确定义的标准。不利的一面是，它使大多数计算机程序的域分析变得非常困难，因为您必须明确定义每个程序变量的标准。

# php - 下拉列表中的选定条目 选择 HTML 表单元素

> ID：260627
> 
> 赞同：0
> 
> 时间：2008-11-04T02:27:58.553
> 
> 标签：php, html, html-select, selected

这个下拉列表，显示一个文件夹中的所有文件，其中一个将被选中使用。有没有办法显示加载页面时选择了哪个文件？目前它每次都说“选择一个文件”。

```
<select name="image" type="text" class="box" id="image" value="<?=$image;?>">
<option value='empty'>Select a file</option> 
<?php

$dirname = "images/";
$images = scandir($dirname);

// This is how you sort an array, see http://php.net/sort
natsort($images);

// There's no need to use a directory handler, just loop through your $images array.
foreach ($images as $file) {
    if (substr($file, -4) == ".gif") {
        print "<option value='$file'>$file</option>\n"; }
    }
?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-04T15:25:01.853

与 Zak 和 NickF 的答案类似，您可以使用

```
selected="selected" 
```

如果您喜欢使用 XHTML，请在您的选项标签中。

（顺便说一句，我的新声誉还不允许我对答案添加评论。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-04T02:32:19.387

我觉得 SO 正在一点一点地为你编写你的应用程序......

反正，

```
<?php
foreach ($images as $file) {
    if (substr($file, -4) == ".gif") {
        print "<option value='$file'"
            . ($file == $image ? " selected" : "")
            . ">$file</option>\n";
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T02:35:06.400

对所选文件使用选项上的“选定”标签

首先检查从帖子中选择或获取哪个文件（尚不清楚表单从您的帖子中采取的操作..假设获取）

在循环中使用三元运算符：

```
$selected = $_GET['image'] == $file ? "selected" : "";

print "<option $selected value='$file'>$file</option>\n"; 
```

# winapi - Win32：计算多核/多处理器系统中的线程 CPU 利用率

> ID：260636
> 
> 赞同：4
> 
> 时间：2008-11-04T02:32:11.587
> 
> 标签：winapi, cpu, multicore

我目前正在开发一个需要了解 CPU 利用率的 MFC 应用程序。它可能在不同的时间点有多个线程，但大部分工作都是由主线程完成的。

我正在尝试找到一种方法来计算该主线程使用的 CPU 百分比。但是，我遇到了一些问题，即如何在多 CPU / 多核环境中准确地完成此任务。问题是大多数系统调用似乎都提供了系统信息，而我需要特定于我的主线程正在其上执行的处理器的信息。

我看过 WMI，但它似乎对这项任务来说太过分了。GetThreadTimes() 能满足我的需要吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-04T05:23:31.660

您的主线程可能在不同的时间在不同的 CPU 上执行，因此“特定于我的主线程正在执行的处理器的信息”可能毫无意义——它很可能是所有处理器。Windows 不会跟踪线程在哪个 CPU 上执行了多少时间，所以你不能问“给我这个线程每个 CPU 的执行时间列表”。唯一的例外是当您将线程关联掩码设置为单个 CPU 时，您可以确定如果线程完全执行，它会在该单个 CPU 上运行。

对于计算运行时间，GetThreadTimes 是正确的 API，是的。如果您想要进程使用的（理论）CPU 的百分比，请计算

```
(kerneltime+usertime) / (now - starttime) / numberofcpus 
```

当然，这个公式假设所有 CPU 都具有相同的速度。如果要显示线程最近消耗的 CPU 部分，每秒采样一次 GetThreadTimes，然后计算

```
(usedtimenow - usedtimeprevious) / (now - previous) / numberofcpus 
```

如果您每秒采样一次，现在-之前大约为 1，但无论如何您都应该记录采样时间 - 系统可能不会让您在采样之间准确睡眠 1 秒。

# svn - 在 SVN 中，如何仅将目录的子目录复制到另一个目录？

> ID：260658
> 
> 赞同：23
> 
> 时间：2008-11-04T02:42:27.290
> 
> 标签：svn, copy

通过命令行，我通常这样做：

```
cp -rRp /path/to/a\_folder/. /path/to/another\_folder 
```

这仅将**a_folder**下的内容复制到**another_folder**。在 SVN 中我需要做同样的事情，但无法弄清楚。我总是这样结束：

```
/path/to/another\_folder/a\_folder 
```

即使我尝试这个，SVN也会抛出：

```
svn copy file:///path/to/a\_folder/* file:///path/to/another\_folder 
```

它说它不存在。

**编辑：**

这可能会有所帮助。我的项目的目录结构如下所示：

```
my_project
  /branches
  /tags
  /trunk
  /vendor
    /1.1 
```

我需要将 vendor 下的 1.1 的内容放入主干，而无需实际复制 1.1 文件夹。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-11-04T06:17:20.633

正如您肯定发现的那样，**复制到已经存在的目标目录是**行不通的：

```
svn cp svn://my_project/vendor/1.1 svn://my_project/trunk
```

因为主干已经存在，所以你最终会得到：

```
svn://my_project/trunk/1.1
```

使用**合并**有一个不幸的属性，即在引入合并跟踪的 1.5 之前的版本中不保留供应商 1.1 标记的历史记录。你可能不在乎。在这种情况下，合并将是正确的解决方案：

```
svn co svn://my_project/trunk trunk-wc
svn merge svn://my_project/trunk svn://my_project/vendor/1.1 trunk-wc

```

阅读此合并的最佳方法是：首先确定与`trunk`相同所需的更改`vendor/1.1`，然后将这些更改应用于给定的工作副本（在这种情况下也是主干）。

我应该指出，这种合并将有效地吹走之前在树干中的任何东西。因此，如果您已经在主干上进行了本地（非供应商）修改，您将只想应用 1.1 和之前的供应商丢弃之间的更改：

```
svn co svn://my_project/trunk trunk-wc
svn merge svn://my_project/vendor/1.0 svn://my_prjoect/vendor/1.1 trunk-wc

```

如果**trunk存在，但是是空**的，你有两个选择：替换trunk，或者写一个小shell循环：

**更换后备箱**如下所示：

```
svn rm svn://my_project/trunk
svn cp svn://my_project/vendor/1.1 svn://my_project/trunk

```

**利用外壳**（bash）：

```
svn co svn://my_project/trunk trunk
svn co svn://my_project/vendor/1.1 1.1
( 光盘 1.1
  对于 x in * ; 做
    svn cp $x ../trunk
  完毕
)
svn ci 主干

```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-04T02:58:30.317

你考虑过使用 svn merge 吗？

给定这样的回购：

```
trunk/a_folder/foo
trunk/a_folder/bar
trunk/new_folder/baz 
```

使用这些命令来合并 foo 和 bar 目录：

```
cd trunk/new_folder
svn merge -r1:HEAD http://svn/repo/trunk/a_folder . 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-03T16:37:43.200

此链接解释了一种解决方法。

[http://svn.haxx.se/users/archive-2004-12/1537.shtml](http://svn.haxx.se/users/archive-2004-12/1537.shtml)

基本上它所说的是，如果目标文件夹在存储库中不存在，您将在目标文件夹中获得源文件夹的内容。

请参见下面的示例。您的存储库中不存在文件夹 07-03-2012。执行以下命令后，您将获得 2012 年 7 月 3 日 HEAD 文件夹的内容。

```
svn cp <URL>/HEAD/ <URL>/branches/07-03-2012 -m "test" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-04T22:26:25.177

我认为您想要的是主干的内容最终出现在`/tags/version-1.0/`文件夹中，而那里没有额外的`/trunk`文件夹。即这很糟糕： `/tags/version-1.0/trunk/stuff`。这很好：`/tags/version-1.0/stuff`。

为了得到这个，我做了一个两步的过程：

```
svn copy http://localhost/MyProject/trunk    http://localhost/MyProject/tags/

# now I have /MyProject/tags/trunk

svn rename http://localhost/MyProject/tags/trunk  http://localhost/MyProject/tags/version-1.0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-04T03:11:01.447

你非常非常接近：

```
svn copy -m"Copy Directory" file:///path/to/a_folder file:///path/to/another_folder 
```

`/*`只需从第一个参数中删除。

# java - 如何让 Java 后端开发更快？或者我可以吗？

> ID：260663
> 
> 赞同：1
> 
> 时间：2008-11-04T02:44:38.410
> 
> 标签：java, jakarta-ee

我开始使用原始 PHP 进行 Web 编程，逐渐转向其各种框架，然后转向 Django 和 Rails。在我使用的每个框架中，我需要对数据库执行的几乎所有操作（甚至涉及相对复杂的事情，例如多对多关系）都可以由自动生成的数据库 API 处理，而无需太多工作。那些更复杂的少数操作可以使用直接 SQL 或通过将多个 API 调用捆绑在一起来完成。

现在我开始学习 Java，这让我感到困惑的是，这种语言以对后端基础设施如此健壮而著称，需要更多的代码（这不意味着更难维护吗？）来做简单的事情。教程中的示例：假设您想按姓氏搜索。您使用 Hibernate 查询语言在 DAO 中编写方法，然后在 Service 中编写一个方法来调用它（这不能自动化吗？），然后您从控制器调用 Service 方法。而在我使用过的任何其他框架中，你可以调用一些东西来实现

```
Person.find_by_last_name(request.POST['last_name']) 
```

直接从控制器中取出 - 您无需编写任何自定义内容即可执行此类操作。

是否有某种我还没有找到的代码生成？Eclipse中的东西？在我看来，这种被重新分级为复杂后端的最佳选择之一的语言很难使用。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-04T03:08:42.823

[为胜利](http://grails.org)而战。Groovy 与 Java 非常相似，但有很多不错的动态语言添加/简化。Grails 有 GORM，这正是您正在寻找的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-04T03:15:03.417

在您提到的示例中，看起来他们使用的分层架构比您习惯的要多。

```
Controller -> Service -> DAO 
```

这提供了应用程序内的分离。这也完全取决于您的应用程序的体系结构，而不是真正的 Java 作为一种语言。从技术上讲，Java 中没有任何东西可以阻止您在控制器中调用 Hibernate 查询。它只是不构成好的设计。

要考虑的另一件事是“服务”可能类似于 EJB，它可能具有事务管理的作用，因此对 DAO/Hibernate 的多次调用可以包装在一个事务中，该事务将自动提交或成功回滚/ 例外。

不过，这一切都在您使用的架构/框架中，而不是 Java 作为一种语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T02:49:05.357

我建议您查看 Java 的[Spring](http://www.springframework.org/)框架。

我没有亲自使用它，但我听说过它的好东西。据我了解，它提供了与 Django 和 Rails 相同的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-04T06:22:20.060

我建议你使用Seam。它是一个非常好的控制器，不会强迫您拥有完全多层的应用程序。它与执行 ORM 的 JPA（Java Persistence Api）完全集成。

特征

1.  具有非常好的范围 - 您可以将对象范围限定为会话、页面加载、对话（从用户的角度来看，对话是一个工作单元）。
2.  不需要太多的 XML。
3.  不需要太多样板代码！
4.  易于学习（您甚至可以从实体类或数据库模式生成框架项目；它仍然需要大量工作，但它至少会减少样板代码）
5.  非常好的安全性（您可以使用基于角色的安全性，或使用规则框架）

编写网页时，您使用 bean（普通的 java 对象）。

你可以写：

```
 #{PersonHome.instance.name} 
```

这将评估一个人的名字的价值。如果在请求参数中有人员 ID，它将被传递给 PersonH​​ome 组件（如果它被正确注释），并且人员 bean 将从数据库中透明地加载。

你甚至可以写：

```
<h:commandLink action="#{PersonHome.delete(person}"> 
```

其中controllerBean 是java bean，并`delete`接受person 对象。它将被透明地转换为具有 person id 参数的链接，在触发 action 方法之前将透明地转换为 bean。

现在唯一需要注意的是，它在某种程度上限制了您对视图框架的选择：它仅适用于 RichFaces、GWT 以及我现在不记得的其他东西；）。

PS。

是的，我是接缝的忠实粉丝:)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-09T14:32:34.997

*在我看来，这种被重新分级为复杂后端的最佳选择之一的语言很难使用。有什么我想念的吗？*

其原因是 Java 在企业中部署的时间量。

并不是说 Java 比 Ruby 更成熟，只是 Java 的使用时间更长，并且已经被规避风险的 IT 部门证明。

因此，一种推荐的方法是通过 JRuby (+Rails)，因为它在 Java VM 上运行，IT 部门不需要安装或重新配置任何东西......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-04T02:57:10.083

获取适用于 Java 的[iBatis](http://ibatis.apache.org/)。它不像 Django 的 ORM 那样健壮（什么都不是），但它比 JDBC 迈出了一大步。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-04T03:26:24.223

嗯，是的，但我关心的不是分离。使用这些其他数据库 API，关注点是分开的 - 自定义数据库逻辑不是写在控制器中（我知道这是不好的形式），而是它是自动生成的。从控制器来看，调用看起来完全一样，不同之处在于，使用 Java/Hibernate 我必须自己编写它，而使用 Django/Rails/Symfony/Cake 它已经为我准备好了。

Grails 看起来很有趣。不过，我学习 Java 的主要原因是因为我希望至少能够使用我可以专业使用的东西。我不确定 Grails 是否符合这个要求，但因为它是 Java，企业可能会比 Rails 更喜欢它。

Django 是我用过的最漂亮的代码，但它不受那些能够负担得起定制 Web 应用程序的企业的信任，这是我想进入的市场。

iBATIS 看起来非常有前途 - 查看 JPetStore 代码，它似乎更自动地执行了一些操作。但是所有这些 SQL 都必须手动编码吗？因为那时我会回到我开始的地方。

Spring 有一个很好且相当容易使用的接口层（MVC），它把组件很好地联系在一起。尽管它可用于将 ORM 集成到应用程序中，但据我所知，它不是一个。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-04T04:57:42.807

您没有在 Java 中获得自动生成的数据库 API 的部分原因是，作为一种没有宏的编译语言（如 Lisp），它无法进行运行时代码生成。像 Ruby 这样的动态类型脚本语言具有这种能力。

另一个原因是文化方面的：在过去的十年里，J2EE 世界更倾向于配置而不是约定。这种偏好的主要原因是企业应用程序通常必须处理许多粗鲁的假设，这些假设会带来各种“奇怪”的边缘情况。就是这样。这些假设与 Rails 等新框架的假设形成鲜明对比。

也就是说，我认为没有什么可以阻止 Java ORM API 在编译时生成数据库 API。我的猜测是[Naked Objects](http://www.nakedobjects.org/home/index.shtml)更适合你。

# php - 以可逆形式存储密码

> ID：260664
> 
> 赞同：17
> 
> 时间：2008-11-04T02:44:55.070
> 
> 标签：php, passwords, storage

我有一个 PHP 应用程序需要运行 bash 脚本，并提供用户名和密码（用于远程系统）。我需要将这些凭据存储在我的 PHP（Web）应用程序可以访问的地方。逻辑位置是数据库（目前是 MySQL，但将是不可知的）。散列和存储凭据的“标准”方式的问题在于它是不可逆的。我*必须*能够以未加密的明文形式获取凭据，才能将数据插入 bash 脚本。

有人对解决此问题的安全方法有任何建议吗？

我想也许 PKI'ing 凭据，并将结果存储在数据库中。然后使用私钥解密（PHP 可以做到）。将执行此操作的脚本存储在 Web 根目录之外。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-11-04T03:53:43.653

首先，要说明（希望）显而易见，如果您可以以任何方式避免存储用户名和密码，请这样做；这是一项重大责任，如果您的凭据存储遭到破坏，它可能会为同一用户提供对许多其他地方的访问权限（由于密码共享）。

其次，如果您必须存储凭证而不是使用不可逆的加盐加密哈希存储密码，因此如果您的数据被泄露，则密码不能轻易被逆向工程，并且根本不需要存储解密密钥。

如果您必须存储可解密的凭据：

1.  选择一个好的加密算法——AES-256、3DES（过时的）或公钥密码（尽管我认为这对于这种用途来说是不必要的）。使用来自信誉良好的可信赖来源的加密软件 - 不要试图自己动手，你可能会弄错。
2.  使用*安全*的随机生成器来生成您的密钥。弱随机性是与加密相关的安全失败的第一大原因，而不是密码算法。
3.  将加密/解密密钥与您的数据库分开存储在一个操作系统安全文件中，该文件只能由您的应用程序运行时配置文件访问。这样，如果您的数据库被破坏（例如通过 SQL 注入），您的密钥不会自动受到攻击，因为这通常需要访问 HDD。如果您的操作系统支持与配置文件绑定的文件加密，请使用它——它只会提供帮助，而且通常是透明的（例如 NTFS 加密）。
4.  如果可行，请存储使用主密码加密的密钥本身。这通常意味着您的应用程序。将需要在启动时键入该密码 - 在脚本的参数中提供它没有好处，因为如果您的 HDD 被破坏，您必须假设可以查看密钥文件和脚本。
5.  对于每个凭证集，将*盐*（未加密）与加密数据一起存储；这用于“启动”加密密码，以使两个相同的密码不会产生相同的密文——因为这表明密码是相同的。
6.  如果用户名不是查找帐户记录所必需的（在您的情况下不是），请加密用户名和密码。如果您同时加密两者，请将它们加密为一次加密运行，例如

    userAndPass=(user+":"+pass);
    加密初始化（）；
    加密（盐）；
    加密（用户和密码）；
    密文=加密最终（）；

    并存储单数blob，这样短密文的出现较少，更容易破解，用户名进一步加盐密码。

PS：我不使用 PHP 编程，因此无法评论该环境中合适的加密软件。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-11-04T02:49:58.117

您需要研究好的 2 路加密方法，我的一般经验法则是：

# 如果您实现自己的加密代码，您将失败。

因此，找到一个经过充分验证的良好实现，并加以利用。

这里可能有一些很好的信息：

[http://phpsec.org/library/](http://phpsec.org/library/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-04T02:50:52.547

检查这个库：[PECL gnupg](http://pecl.php.net/package/gnupg/)它为您提供与 gnupg 交互的方法。*您可以使用安全*的公钥加密算法轻松[加密和解密](http://cvs.php.net/viewvc.cgi/pecl/gnupg/tests/gnupg_res_encrypt.phpt?revision=1.1&view=markup)数据。

 ** * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-04T03:43:32.347

我建议您不要存储密码，而是通过生成 ssh 密钥并将您的公钥存储在远程系统的 authorized_keys 文件中来使用从主机到远程系统的无密码 ssh 连接。然后您只需要在配置期间建立连接。诚然，不能完全回答您的问题，但是以可逆的形式存储密码是安全漏洞恕我直言的滑坡，尽管我确信比我更聪明的大脑可以保证它的安全。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-04T02:59:39.517

一种简单的入门方法是使用 mysql 的 ENCODE() 和 DECODE() 函数。我不知道下面使用的是什么算法，但它很容易使用：

```
INSERT INTO tbl_passwords SET encoded_pw = ENCODE('r00t', 'my-salt-string'); 
```

和

```
SELECT DECODE(encoded_pw, 'my-salt-string') FROM tbl_passwords; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-04T07:57:00.370

正如许多人所说，您的场景要求您加密用户名和密码。我建议您查看 php 的[mcrypt](http://www.php.net/manual/en/book.mcrypt.php)扩展以进行加密/解密。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-24T00:46:19.647

只是为了跟进使用 MySQL 编码和解码功能的建议，该手册对这些功能的工作方式[含糊不清：](http://dev.mysql.com/doc/refman/5.0/en/encryption-functions.html#function_encode)

> 加密的强度取决于随机发生器的好坏。对于短字符串应该足够了。

但我建议您可以改用内置的 MySQL 5.0 [AES 函数](http://dev.mysql.com/doc/refman/5.0/en/encryption-functions.html#function_aes-encrypt)；`AES_ENCRYPT()`和`AES_DECRYPT()`

```
SELECT AES_ENCRYPT('secret squirrel', '12345678') AS encoded

=> ØA;J×ÍfOU»] É8

SELECT AES_DECRYPT('ØA;J×ÍfOU»] É8', '12345678') AS decoded

=> secret squirrel 
```

这些使用 128 位 AES，对于大多数用途来说应该足够强大。正如其他人评论的那样，使用盐值和具有高熵的键是一种很好的做法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-04T02:53:33.383

如果你去 PKI，我会，确保你保护好你的私钥！PKI 提供的强加密仅与您的密钥一样安全。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-04T02:55:44.267

我认为你的目标。查看[GPG](http://en.wikipedia.org/wiki/GNU_Privacy_Guard)以获得良好的开放加密库

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-04T02:56:44.423

看起来你几乎有两种方法可以做到这一点：

1）就像你建议的那样，使用一种或多种加密算法，然后可以在你的脚本中解密并用于身份验证。您可以使用 PHP 中的 MCrypt 库来完成此操作。

2) 根据所需的安全级别和脚本的漏洞级别，您可以使用安全哈希、密钥或其他一些难以猜测的唯一标识符，您可以使用这些标识符在脚本范围内劫持每个用户的帐户。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-16T23:49:46.113

我想我将研究从 Web 应用程序中即时编译嵌入凭据的 PHP 脚本。

我会要求提供凭据（用于给定用途），然后创建并编译一个新的 PHP 脚本，仅用于此用途。这样，脚本*只会*做我需要的，不应该是“可读的”。我认为这听起来是最安全的方法。

将尝试使用 Roadsend。[http://www.roadsend.com/](http://www.roadsend.com/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-08-04T04:34:55.663

对于 PHP，重要的是要注意 AES 加密***是***通过 MCRYPT_RIJNDAEL 函数实现的。当 PHP 提供非开放实现时，不要为它们付费。

有关更多信息，请参阅[讨论可用密码的 PHP 页面](http://us.php.net/manual/en/mcrypt.ciphers.php)。

# silverlight - 在 Silverlight 中使用 SoapClient 调用 WebServices 时如何处理 TimeoutException？

> ID：260665
> 
> 赞同：2
> 
> 时间：2008-11-04T02:45:38.203
> 
> 标签：silverlight, web-services, soap-client, timeoutexception

您如何处理使用 SoapClient 调用 WebServices 时生成的 TimeoutException？

似乎不需要处理任何事件来捕获调用 Web 服务时生成的任何异常。

是否可以捕获任何抛出的异常，尤其是 TimeoutException？

我还将这个问题发布到 Silverlight.net 论坛：[http ://silverlight.net/forums/p/46029/124010.aspx](http://silverlight.net/forums/p/46029/124010.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-05T16:56:57.423

显然，[没有](http://silverlight.net/forums/p/46029/124010.aspx)。在 Silverlight 2 中调用 Web 服务方法时，无法处理引发的任何异常。当然，除非您创建自己的修改版 SoapClient，Visual Studio 会自动为您生成。这是一个可怕的设计缺陷！

# java - 抽象类可以有构造函数吗？

> ID：260666
> 
> 赞同：696
> 
> 时间：2008-11-04T02:46:21.807
> 
> 标签：java, constructor, abstract-class

抽象类可以有构造函数吗？

如果是这样，它如何使用以及用于什么目的？

* * *

## 回答 #1

> 赞同：717
> 
> 时间：2008-11-04T03:19:37.777

是的，抽象类可以有一个构造函数。考虑一下：

```
abstract class Product { 
    int multiplyBy;
    public Product( int multiplyBy ) {
        this.multiplyBy = multiplyBy;
    }

    public int mutiply(int val) {
       return multiplyBy * val;
    }
}

class TimesTwo extends Product {
    public TimesTwo() {
        super(2);
    }
}

class TimesWhat extends Product {
    public TimesWhat(int what) {
        super(what);
    }
} 
```

超类`Product`是抽象的并且有一个构造函数。具体类`TimesTwo`有一个只硬编码值 2 的`TimesWhat`构造函数。具体类有一个允许调用者指定值的构造函数。

抽象构造函数将经常用于强制类约束或不变量，例如设置类所需的最小字段。

> 注意：由于父抽象类中没有默认（或无参数）构造函数，子类中使用的构造函数必须显式调用父构造函数。

* * *

## 回答 #2

> 赞同：173
> 
> 时间：2008-11-04T07:30:30.063

如果您处于以下情况之一，您将在抽象类中定义构造函数：

*   您想在子类的实例化实际发生之前执行一些初始化（对抽象类的字段）
*   您已经在抽象类中定义了 final 字段，但您没有在声明本身中初始化它们；在这种情况下，您必须有一个构造函数来初始化这些字段

注意：

*   您可以定义多个构造函数（具有不同的参数）
*   您可以（应该？）定义所有受保护的构造函数（无论如何，将它们公开毫无意义）
*   您的子类构造函数可以调用抽象类的一个构造函数；它甚至可能**必须**调用它（如果抽象类中没有无参数构造函数）

无论如何，不​​要忘记，如果你不定义构造函数，那么编译器会自动为你生成一个（这个是公共的，没有参数，什么也不做）。

* * *

## 回答 #3

> 赞同：75
> 
> 时间：2008-11-04T02:59:52.247

是的，它可以有一个构造函数，它的定义和行为就像任何其他类的构造函数一样。除了抽象类不能直接实例化，只能扩展，因此使用总是来自子类的构造函数。

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2013-05-18T10:37:55.233

**是的**！**抽象类可以有构造函数**！

是的，当我们将一个类定义为抽象类时，它不能被实例化，但这并不意味着抽象类不能有构造函数。每个抽象类都必须有一个具体的子类，该子类将实现该抽象类的抽象方法。

当我们创建任何子类的对象时，相应继承树中的所有构造函数都会以自上而下的方式调用。同样的情况也适用于抽象类。虽然我们不能创建抽象类的对象，但是当我们创建一个具体类的对象和抽象类的子类时，会自动调用抽象类的构造函数。因此我们可以在抽象类中有一个构造函数。

注意：非抽象类不能有抽象方法，但抽象类可以有非抽象方法。Reason 类似于构造函数，不同之处在于我们可以调用 super()，而不是自动调用。此外，没有什么比抽象构造函数更好的了，因为它根本没有意义。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-09-12T02:46:22.320

不仅可以，而且总是可以。如果你没有指定一个，那么它有一个默认的无参数构造函数，就像任何其他类一样。事实上，所有的类，包括嵌套类和匿名类，如果没有指定一个默认构造函数，就会得到一个默认构造函数（在匿名类的情况下，不可能指定一个，所以你总是会得到默认构造函数）。

具有构造函数的抽象类的一个很好的例子是[Calendar](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)类。您可以通过调用 Calendar.getInstance() 获得一个 Calendar 对象，但它也有受保护的构造函数。它的构造函数受到保护的原因是只有它的子类可以调用它们（或同一个包中的类，但由于它是抽象的，所以不适用）。[GregorianCalendar](http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html#GregorianCalendar%28%29)是扩展 Calendar 的类的一个示例。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-11-30T08:07:51.247

一个抽象类可以有一个构造函数，但是你不能创建抽象类的对象，那么你如何使用这个构造函数呢？

问题是当您在子类中继承该抽象类时，您可以通过子类中的 super(value) 方法将值传递给它的（抽象的）构造函数，并且不，您不会继承构造函数。

所以使用 super 你可以在抽象类的构造函数中传递值，据我所知，它必须是你的方法或构造函数中的第一个语句。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-07-21T04:56:45.503

可以，抽象类构造函数通常用于对所有子类共有的初始化事件的超级调用

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-05-20T04:33:01.527

当然抽象类也可以有构造函数。一般类构造函数是用来初始化字段的。所以，抽象类的构造函数是用来初始化抽象类的字段的。如果您想在子类的实例化发生之前初始化抽象类的某些字段，您将为抽象类提供构造函数。抽象类构造函数也可用于执行与每个子类相关的代码。这可以防止代码重复。

我们不能创建抽象类的实例，但我们可以创建派生自抽象类的类的实例。因此，当创建派生类的实例时，会自动调用父抽象类的构造函数。

参考：[本文](http://csharp-video-tutorials.blogspot.com/2013/10/part-8-can-abstract-class-have.html)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-09-06T12:36:35.057

虽然有很多好的答案，但我想给我的 2 美分。

构造函数**不构建对象**。它用于初始化对象。

是的，抽象类总是有一个构造函数。如果你没有定义自己的构造函数，编译器会给抽象类一个默认的构造函数。以上适用于所有类 - 嵌套、抽象、匿名等。

抽象类（与接口不同）可以具有需要初始化的非最终非静态字段。您可以在抽象类中编写自己的构造函数来做到这一点。但是，在这种情况下，不会有任何默认构造函数。

```
public abstract class Abs{
    int i;
    int j;
    public Abs(int i,int j){
        this.i = i;
        this.j = j;
        System.out.println(i+" "+j);
    }
} 
```

在扩展抽象类时要小心，你必须从每个构造函数显式调用 super。任何构造函数调用 super() 的第一行。如果您没有显式调用 super()，Java 会为您执行此操作。下面的代码将无法编译：

```
public class Imp extends Abs{

public Imp(int i, int j,int k, int l){
    System.out.println("2 arg");
}
} 
```

你必须像下面的例子一样使用它：

```
public class Imp extends Abs{

public Imp(int i, int j,int k, int l){
    super(i,j);
    System.out.println("2 arg");
}
} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-04-21T19:26:54.027

**是的，抽象类可以有构造函数！**

这是在抽象类中使用构造函数的示例：

```
abstract class Figure { 

    double dim1;        
    double dim2; 

    Figure(double a, double b) {         
        dim1 = a;         
        dim2 = b;         
    }

    // area is now an abstract method 

   abstract double area(); 

}

class Rectangle extends Figure { 
    Rectangle(double a, double b) { 
        super(a, b); 
    } 
    // override area for rectangle 
    double area() { 
        System.out.println("Inside Area for Rectangle."); 
        return dim1 * dim2; 
    } 
}

class Triangle extends Figure { 
    Triangle(double a, double b) { 
        super(a, b); 
    } 
    // override area for right triangle 
    double area() { 
        System.out.println("Inside Area for Triangle."); 
        return dim1 * dim2 / 2; 
    } 
}

class AbstractAreas { 
    public static void main(String args[]) { 
        // Figure f = new Figure(10, 10); // illegal now 
        Rectangle r = new Rectangle(9, 5); 
        Triangle t = new Triangle(10, 8); 
        Figure figref; // this is OK, no object is created 
        figref = r; 
        System.out.println("Area is " + figref.area()); 
        figref = t; 
        System.out.println("Area is " + figref.area()); 
    } 
} 
```

所以我想你得到了答案。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-11-04T02:52:55.663

考虑一下：

```
abstract class Product { 
    int value;
    public Product( int val ) {
        value= val;
    }
    abstract public int multiply();
}

class TimesTwo extends Product {
    public int mutiply() {
       return value * 2;
    }
} 
```

超类是抽象的并且有一个构造函数。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-07-18T05:04:03.583

正如 javafuns[在这里](http://www.geekinterview.com/question_details/77988)所描述的，这是一个例子：

```
public abstract class TestEngine
{
   private String engineId;
   private String engineName;

   public TestEngine(String engineId , String engineName)
   {
     this.engineId = engineId;
     this.engineName = engineName;
   }
   //public gettors and settors
   public abstract void scheduleTest();
}

public class JavaTestEngine extends TestEngine
{

   private String typeName;

   public JavaTestEngine(String engineId , String engineName , String typeName)
   {
      super(engineId , engineName);
      this.typeName = typeName;
   }

   public void scheduleTest()
   {
     //do Stuff
   }
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-12-06T00:21:00.603

在具体类中，为具体类型 Fnord 声明构造函数有效地公开了两件事：

*   一种代码可以请求创建 Fnord 实例的方法

*   *一种从 Fnord 派生的类型*的实例（正在构建中）可以请求初始化所有基类特性的方法。

虽然也许应该有一种方法可以分别控制这两种能力，但对于每一种具体类型，一个定义将同时启用这两种能力。虽然第一个能力对抽象类没有意义，但第二个能力对抽象类和其他任何抽象类一样有意义，因此它的声明同样必要和有用。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-09-16T06:39:07.450

是的。并且在创建继承类的实例时调用抽象类的构造函数。例如，以下是一个有效的 Java 程序。

```
// An abstract class with constructor
abstract class Base {
Base() { System.out.println("Base Constructor Called"); }
abstract void fun();
    }
class Derived extends Base {
Derived() { System.out.println("Derived Constructor Called"); }
void fun() { System.out.println("Derived fun() called"); }
    }

class Main {
public static void main(String args[]) { 
   Derived d = new Derived();
    }

} 
```

这是上面代码的输出，

基构造函数调用 派生构造函数调用

参考： [在此处输入链接描述](http://www.geeksforgeeks.org/abstract-classes-in-java/)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-02-17T11:07:58.390

是的，你当然可以添加一个，正如已经提到的抽象类变量的初始化。但是，如果您没有明确声明一个，它无论如何都有一个隐式构造函数供“构造函数链接”工作。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-06-24T03:03:26.107

抽象类可以有一个构造函数，尽管它不能被实例化。但是抽象类中定义的构造函数可以用来实例化这个抽象类的具体类。检查[JLS](https://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.1.1)：

> **如果尝试使用类实例创建表达式创建抽象类的实例，则会出现编译时错误**。
> 
> 可以实例化本身不是抽象的抽象类的子类，从而导致执行抽象类的构造函数，并因此执行该类的实例变量的字段初始值设定项。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-07-14T11:20:26.190

为了实现构造函数链接，抽象类会有一个构造函数。编译器将 Super() 语句保留在子类构造函数中，它将调用超类构造函数。如果抽象类没有构造函数，则违反了 java 规则，我们无法实现构造函数链接。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-08-30T11:36:10.623

是的，抽象类可以有一个构造函数。您可以在抽象类中重载任意数量的构造函数。这些承包商可用于初始化扩展抽象类的对象的初始状态。正如我们所知，我们不能创建抽象类的对象，因为对象是由“new”关键字而不是构造函数创建的……它们只是为了初始化子类对象的状态。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-04-24T13:15:32.187

由于**抽象类**可以具有所有访问修饰符的变量，因此必须将它们初始化为默认值，因此构造函数是必要的。当您实例化子类时，将调用抽象类的构造函数并初始化变量。

相反，**接口**确实只包含常量变量，这意味着它们已经初始化。所以接口不需要构造函数。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-01-24T19:03:39.003

类中构造函数的目的是用于**初始化字段**，而不是“构建对象”。当你试图创建一个抽象超类的新实例时，编译器会给你一个错误。但是，我们可以继承一个抽象类 Employee 并通过设置它的变量来使用它的构造函数见下面的例子

```
public abstract class Employee {
  private String EmpName;
  abstract double calcSalary();

  Employee(String name) {
    this.EmpName = name;// constructor of abstract class super class
  }
}

class Manager extends Employee{
 Manager(String name) {
    super(name);// setting the name in the constructor of sub class
 }
double calcSalary() {
    return 0;
 }
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-09-03T19:48:53.147

```
package Test1;

public class AbstractClassConstructor {

    public AbstractClassConstructor() {

    }

    public static void main(String args[]) {
       Demo obj = new Test("Test of code has started");
       obj.test1();
    }
}

abstract class Demo{
    protected final String demoValue;

    public Demo(String testName){
        this.demoValue = testName;
    }

    public abstract boolean test1();
}

class Test extends Demo{

    public Test(String name){
        super(name);
    }

    @Override
    public boolean test1() {
       System.out.println( this.demoValue + " Demo test started");
       return true;
    }

} 
```

* * *

## 回答 #22

> 赞同：-5
> 
> 时间：2014-04-20T22:01:45.080

是的..它就像任何其他课程一样。它可以有一个构造函数，并在为基类创建对象后调用它。

# ruby-on-rails - 使用 ActiveRecord::Serialization.to_xml 构建动态字段

> ID：260668
> 
> 赞同：3
> 
> 时间：2008-11-04T02:46:51.947
> 
> 标签：ruby-on-rails, xml, ruby, serialization, activerecord

我很好奇人们使用 AR 的 to_xml() 从控制器构建非实体字段的经验（例如，不是您正在序列化的模型的属性，但可能是利用过程中的属性）。

to_xml 似乎为此提供了一些选项。

一种是通过传递对正在操作的对象上的方法的引用：在序列化过程中，调用这些方法并将它们的结果添加到生成的文档中。我想避免这条路径，因为某些生成的数据虽然取决于对象的属性，但可能超出模型本身的范围——例如，构建特定项目“显示”操作的 URL。另外，它需要太多的深谋远虑。我希望能够通过调整控制器中的 to_xml 代码来更改结果文档。我也不想在对象中声明一个方法的麻烦。

在每个对象中覆盖 to_xml 也是如此。

其他两个选项似乎更符合要求：一个是通过在生成这些字段的序列化选项中传递 procs，另一个是通过传递一个在序列化对象属性后将产生的块。这些提供了我正在寻找的那种调用点自定义，此外，它们的声明将范围绑定到控制器，以便它们可以访问与控制器相同的东西，但是这些方法似乎受到严重限制：AFAICT 它们不包含对正在序列化的对象的引用。它们包含对构建器对象的引用，当然我猜你可以在块/过程中解析并找到已经序列化的属性并使用它们，但这是一种长篇大论，或者至少是不安和次优的。

如果我在这里错了，请纠正我，但是如果您必须访问对象本身，那么在序列化一个或多个对象时使用 procs/blocks 有什么意义。

无论如何，请告诉我我错了，因为我似乎必须在这里忽略一些东西。

哦，是的，我知道我可以写出我自己的观点。我正在尝试利用 respond_to 和 to_xml 来实现最少的额外文件/行。（不过，当我无法弄清楚如何使用 AR 的序列化来做到这一点时，我就采用了这种方法。）

**EDIT 3.29.09——我刚刚向 Rails 提交了一个补丁。如果您有兴趣，请提供一些支持:) [https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/2373-record-sensitive-procs-for-to_xml](https://rails.lighthouseapp.com/projects/8994-ruby-on-rails/tickets/2373-record-sensitive-procs-for-to_xml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-04T19:38:05.867

实际上，Proc 传递了您传递给 to_xml 的相同选项哈希（减去 procs 选项）。因此，您可以传入 Proc 完成工作所需的任何额外对象：

```
proc = Proc.new {|options| options[:builder].tag!('reverse-name', options[:object].name.reverse)}
object.to_xml :object => object, :procs => [ proc ] 
```

由于您获得的 proc 正在获得与 to_xml 相同的选项，因此这允许您传递所需的任何选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-23T14:35:45.817

哇！我处理这种情况的补丁被接受了：http: [//github.com/rails/rails/commit/c39151a84768397d3bb025c6e8f877eac59ebbf9](http://github.com/rails/rails/commit/c39151a84768397d3bb025c6e8f877eac59ebbf9) 现在它是 ActiveModel 的一部分，我不确定它的发布时间表是什么；我在想Rails 3。

# task - 是否有您认为非常重要的编程任务，以至于您总是深思熟虑地缓慢地完成它们？

> ID：260672
> 
> 赞同：4
> 
> 时间：2008-11-04T02:48:34.237
> 
> 标签：task

有一些任务，尤其是那些涉及将文件夹删除为 SU 的任务，在我按下 Enter 键之前，我会仔细而缓慢地完成这些任务。我想如果其他人看到我以我谨慎的速度做这些事情，他们会畏缩的。是否有您认为值得深思熟虑的关键编程任务？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-04T02:49:36.217

更改实时数据库，实际上我先做一个备份，以防万一知道我特别小心:)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-11-04T02:51:55.913

这是一项编程任务，因为如果我做错了，它会影响我获得编程报酬的能力：写关于敏感主题或敏感人的电子邮件。

我可能需要一个小时才能让一段电子邮件的语气恰到好处。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-04T21:03:19.953

任何不可恢复地改变重要数据的东西。我已经多次吸取教训。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-04T02:50:03.640

发布过程对我来说通常是有条不紊的事情。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-11-04T03:48:18.373

一切。我从来都不是一个“深入研究”的程序员。永远有，永远都会。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-04T20:41:19.547

提交 - 因为如果我打破测试会很尴尬。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-04T20:45:58.897

用于评估我正在开发的东西的准确性的代码。否则，我把所有这些时间都花在了其他代码的生产准备上，结果却发现它根本计算不正确。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-04T03:06:41.500

通用代码。即更改用于多个独立程序的旧共享代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-04T03:51:54.467

确实从SourceSafe**获取**— 很容易按错按钮并丢失您一直在处理的本地版本。/我讨厌SS，但不得不使用它。/

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-04T05:26:20.393

内核驱动程序的东西 - 导致那些蓝屏是一种痛苦！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-04T20:48:30.313

任何收集杂耍，尤其是在 C 语言中（只需要一个接一个的错误来霰弹你的堆）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-11-04T20:59:28.560

在数据库方面，如果我运行更新/插入/删除并且我不想备份整个数据库，我总是`select * into myTable_backup from myTable`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-10-25T01:43:09.503

如果在 Visual Studio 中进行重大更改，例如进行大重构或重新组织解决方案\项目结构，我将首先在解决方案的副本上进行操作，看看是否有任何问题，并且该死的东西仍然可以编译并运行良好。一旦满足这种情况，我将在源代码控制下的代码上执行此操作。

我这样做是因为我遇到过这样的情况，即您使用的任何源代码控制的“回滚”功能都不会让您按要求回滚并且\或无法获得 %100。

# java - 有没有一种简单的方法可以在 Oracle 中克隆表的结构？

> ID：260679
> 
> 赞同：3
> 
> 时间：2008-11-04T02:50:13.157
> 
> 标签：java, database, oracle

如果我有一张这样的桌子：

```
CREATE TABLE FRED
(
recordId number(18) primary key,
firstName varchar2(50)
); 
```

有没有一种简单的方法可以将其结构（不是数据）克隆到另一个给定名称的表中。基本上我想创建具有完全相同结构但名称不同的表，以便我可以对其执行一些功能。我显然想在代码中做到这一点。Java 最好，但大多数其他语言应该是相似的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-04T03:27:47.013

如果您正在寻找一种方法来找到重新创建表的确切 DDL，包括存储子句，您可以使用

```
select dbms_metadata.get_ddl('TABLE', 'TABLE_NAME', 'SCHEMA_NAME') from dual 
```

[如此处](http://www.troygeek.com/articles/ExtractingOracleDDLCommandLine/)所述。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-04T02:53:27.347

CREATE TABLE 表名 AS SELECT * FROM orginaltable WHERE 1=2;

编辑： WHERE 子句禁止任何行符合条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-19T12:32:06.823

```
SELECT INTO TARGET_TABLE FROM SOURCE_TABLE;
OR

CREATE TABLE TARGET_TABLE_NAME AS SELECT * FROM SOURCE_TABLE; 
```

如果您只想复制结构，请添加 Where 子句`WHERE 1=2`。

我希望它会有所帮助。

# lisp - 通过 SICP 工作的最佳方案实施是什么？

> ID：260685
> 
> 赞同：69
> 
> 时间：2008-11-04T02:52:31.140
> 
> 标签：lisp, scheme, sicp

我一直在使用[PLT Scheme](http://www.plt-scheme.org/)，但它有一些问题。有谁知道通过 SICP 工作的更好实施？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2008-11-04T18:43:23.187

使用[Racket](http://racket-lang.org/)（以前的 PLT 方案）。

DrRacket IDE 是所有方案（包括 SICP）的绝佳起点。

要在文档中查找关键字，请将光标放在关键字上并按`F1`。在 DrRacket 中，您现在可以直接在 REPL（读取评估打印循环）中查看图像。

Neil van Dyke[对 DrRacket 的 SICP 支持。](http://www.neilvandyke.org/racket-sicp/)

更新（2016 年）：新的 SICP 包位于[http://pkgs.racket-lang.org/#[sicp]](http://pkgs.racket-lang.org/#[sicp]) 使用包管理器（在 DrRacket 中）下载它或使用`raco`. [手动的](http://docs.racket-lang.org/sicp-manual/index.html)

Update2 (2016)：另外，如果您想尝试 SICP 图片语言的新实现，请下载[sicp-pict2.rkt](https://github.com/sicp-lang/sicp/tree/master/sicp-pict2)。

* * *

Update3 (2020)： sicp-lang 包包括 sicp 语言和 sicp 图片语言的实现。

文档：[SICP 支持 DrRacket](https://docs.racket-lang.org/sicp-manual/)
源代码：[GitHub](https://github.com/sicp-lang/sicp/)
Racket 上的 sicp-lang 包：[sicp-lang 包信息](https://pkgs.racket-lang.org/package/sicp)

注意：图片语言比书中描述的图片语言有更多的特点（例如颜色和更大的尺寸）。源代码包含示例：[https ://github.com/sicp-lang/sicp/blob/master/sicp-pict/main.rkt](https://github.com/sicp-lang/sicp/blob/master/sicp-pict/main.rkt)

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2008-11-04T02:58:28.193

使用[**麻省理工学院方案**](http://www.gnu.org/software/mit-scheme/)。

它由 SICP 的作者推荐，并在 MIT 用于**6.001：计算机程序的结构和解释**课程。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-11-04T03:03:02.617

[MIT/GNU Scheme](http://www.gnu.org/software/mit-scheme/)，只要确保你加载了 SICP 兼容[包](http://www.gnu.org/software/mit-scheme/documentation/mit-scheme-user/Basics-of-Starting-Scheme.html#Basics-of-Starting-Scheme)（是的，它们提供了特定的库来增强保证 SICP 练习的工作）。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-11-12T10:26:21.033

这在 macOS 上完成令人惊讶地烦人。假设你有 Homebrew，这是它今天的工作方式。（可能想`brew update`偶尔运行一次）。

```
brew cask install racket
raco setup  # might be optional
raco pkg install sicp 
```

现在您可以`(require sicp)`或简单地运行

```
racket -l sicp --repl 
```

您可能想要缩写为`scheme`. 在bash中

```
alias scheme='racket -l sicp --repl' 
```

您可以添加到您的`~/.bashrc`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-06-30T03:52:42.670

我这周刚开始做SICP。

目前，MIT 方案在 Ubuntu Linux（9.04 “jaunty”）中被破解。它可能在未来起作用。

DrScheme 正在运行，并且运行良好。您可以使用上面列出的 soegard 的包或 Neil Van Dyke 的包，它基于 soegard 的包，可从[http://www.neilvandyke.org/sicp-plt/](http://www.neilvandyke.org/sicp-plt/)获得。这个包的好处是，安装后，您可以使用 Language|Choose Language.... 菜单项来选择 SICP。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-18T18:08:16.793

[CHICKEN Scheme](https://www.call-cc.org/)有一个为 SICP提供支持的[sicp 库。](http://wiki.call-cc.org/eggref/4/sicp)`chicken-install sicp`您可以通过在源代码的开头运行并编写它来安装它： `(use sicp)`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-04T03:03:52.007

[PLT Scheme](http://plt-scheme.org/)运行良好，或者Keparo 建议的[MIT Scheme 。](http://www.gnu.org/software/mit-scheme/)你有什么问题？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-27T23:50:59.937

我现在正在使用[Chez Scheme](https://cisco.github.io/ChezScheme/)通过 SICP 工作。这是一个相当古老的 Scheme 方言，所以大概它与 SICP 的写法相距不远。

请注意，Chez Scheme 项目页面链接了可以在类 Unix 平台上构建的 Windows 二进制文件和源代码。但如果你在 Mac 上，你可能想要做

```
brew chezscheme
man chez 
```

假设你有[homebrew](http://brew.sh)，你真的应该这样做。

为什么不是麻省理工学院计划？因为交互式前端是 Edwin，一个使用 EMACS 约定的编辑器。（目前，它是一个实际的 EMACS 模式，它曾经在 Scheme 中实现。）我曾经了解基本的 EMACS，但我的技能因废弃而萎缩，这告诉我重新学习这个编辑器是不值得的。

为什么不 DrRacket？如果我看过 @frederick-squid 的 brew 说明，我可能会尝试一下。相反，我尝试遵循严重过时的 scheme 和 sicp 的官方说明。然后我试图让 IDE 进入方案模式，这似乎很直观，但不是。

就是太麻烦了。而且我不确定我是否想进入一个花哨的语言设计 IDE，尤其是一个对 Scheme 支持不佳的 IDE 引发了最初的问题。

# asp.net - ASP.NET 刷新更新面板

> ID：260699
> 
> 赞同：8
> 
> 时间：2008-11-04T02:56:38.540
> 
> 标签：asp.net, updatepanel

我在更新面板中有一个 ListView，想从按钮单击事件触发的代码中更改 Select Query，然后在更新面板中重新加载 ListView。有谁知道如何使更新面板从后面的代码中刷新？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-11-04T03:00:16.413

做就是了：

```
YourUpdatePanelId.Update(); 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.update.aspx)：

> 如果页面启用了部分页面呈现，当您调用 Update 方法时，UpdatePanel 控件的内容会在浏览器中更新。如果您有必须执行以确定是否应更新 UpdatePanel 控件的服务器代码，请调用 Update 方法。如果您计划使用 Update 方法，请将 UpdateMode 属性设置为 Conditional。如果您希望在服务器逻辑中确定更新面板的决定，请确保 ChildrenAsTriggers 属性为 false，并且没有为面板定义显式触发器。
> 
> 在典型的页面开发场景中，如果您定义了触发器，或者如果 UpdatePanel 控件的 ChildrenAsTriggers 属性为 true，则在页面生命周期中会自动调用 Update 方法。
> 
> 如果没有为 UpdatePanel 控件定义 ContentTemplate 属性，则不会发生面板更新。

# md5 - MD5各种语言的一行代码示例

> ID：260701
> 
> 赞同：3
> 
> 时间：2008-11-04T02:56:46.387
> 
> 标签：md5

我正在寻找各种语言的一行代码示例以获得有效的 MD5 结果（作为字符串，而不是 bytehash 或你有什么）。例如：

PHP: $token = md5($var1 . $var2);

我发现 VB 在一行中做起来特别麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-04T03:01:51.480

**Python**

```
token = __import__('md5').new(var1 + var2).hexdigest() 
```

或者，如果`md5`已经导入：

```
token = md5.new(var1 + var2).hexdigest() 
```

*感谢格雷格·休吉尔*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T03:02:15.893

如何实现这一点有一种普遍性。通常，定义一个称为`md5_in_one_line`(or `Md5InOneLine`) 的例程一次，并在所有地方使用它，就像使用库例程一样。

因此，例如，一旦`Md5InOneLine`在 C# 中定义，就可以轻松获得正确的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-04T03:05:25.950

C＃：

```
string hash = System.Web.Security.FormsAuthentication.HashPasswordForStoringInConfigFile(input, "md5"); 
```

VB几乎是一样的。

这里它没有使用 System.Web 命名空间：

```
string hash = Convert.ToBase64String(new System.Security.Cryptography.MD5CryptoServiceProvider().ComputeHash(System.Text.Encoding.UTF8.GetBytes(input))); 
```

或以可读形式：

```
string hash =
     Convert.ToBase64String
     (new System.Security.Cryptography.MD5CryptoServiceProvider()
          .ComputeHash
              (System.Text.Encoding.UTF8.GetBytes
                  (input)
              )
     ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-04T03:10:56.343

您不是真的只是在问“哪些语言有标准库支持 MD5？” 正如Justice所说，在任何支持它的语言中，它只是一个函数调用，将结果存储在一个字符串变量中。即使没有内置支持，您也可以用任何语言编写该函数！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-04T03:31:03.510

以防万一您需要 VBScript：从 webdevbros 下载[MD5 类](http://www.webdevbros.net/2007/12/29/using-gravatar-in-classic-asp/)，然后使用一行：

```
hash = (new MD5).hash("some value") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-04T03:04:19.633

是否可以在一行中执行 MD5 真的很重要。如果你在VB中无法在1行中完成那么麻烦，那么编写你自己的函数。然后，当您需要在VB中一行执行MD5时，只需调用该函数即可。

如果在 1 行代码中完成所有操作非常重要，那么这里是 1 行 VB。不使用 System.Web 命名空间。

```
Dim MD5 As New System.Security.Cryptography.MD5CryptoServiceProvider() : Dim HashBytes() As Byte : Dim MD5Str As String = "" : HashBytes = MD5.ComputeHash(System.Text.Encoding.UTF8.GetBytes("MyString")) : For i As Integer = 0 To HashBytes.Length - 1 : MD5Str &= HashBytes(i).ToString("x").PadLeft(2, "0") : Next 
```

这将散列“MyString”并将 MD5 和存储在 MD5Str 中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-04T03:46:34.057

Coldfusion 有一堆散列算法，MD5 是默认的。

cfset var md5hashresult = hash("字符串到哈希")

# perl - Perl 什么时候自动初始化变量？

> ID：260703
> 
> 赞同：8
> 
> 时间：2008-11-04T02:57:09.820
> 
> 标签：perl, warnings, initialization

这是一些简单的 Perl 来计算一个值在数组中出现的次数。这运行没有任何警告。

```
use warnings;
use strict;

my @data = qw(1 1 2 3 4 5 5 5 9);
my %histogram;
foreach (@data)
{
    $histogram{$_}++;
} 
```

当循环体更改为

```
$histogram{$_} = $histogram{$_} + 1; 
```

Perl 警告“另外使用未初始化的值”。

引擎盖下发生了什么？为什么将值作为操作数提供给 ++ 运算符并使用 + 运算符未初始化时进行初始化？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-04T03:05:05.047

+ 运算符计算左边的形式和右边的形式，然后返回两者的总和。哈希调用评估没有看到任何特殊的上下文。

++ 运算符内置了一些特殊的魔法。引用 perlop 联机帮助页，关于 ++ 运算符：

> “undef”始终被视为数字，特别是在递增之前更改为 0（因此 undef 值的后递增将返回 0 而不是“undef”）。

*编辑*：为了详细说明差异， ++ 更改了适当的值，而 + 只是将其参数作为输入。当 + 看到未定义的值时，通常会出现问题，但对于 ++，您的哈希操作示例非常典型——用户希望将 undef 视为 0，而不是每次都检查和初始化。因此，以这种方式对待这些运算符似乎是有意义的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-04T03:22:02.390

不是 Perl 必须初始化值，而是它并不总是警告它们。不要试图为此考虑一个规则，因为你总是会发现异常，而且当你认为你已经弄清楚时，下一个版本的 Perl 会改变你的警告。

在这种情况下，正如 Harleqin 所说，自增运算符有一个特殊情况。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-11-04T04:52:55.170

某些运算符为了您的方便而故意忽略“未初始化”警告，因为它们通常用于左侧或唯一操作数的默认值 0 或“”有意义的情况。

它们是：++ 和 --（前或后）、+=、-=、.=、|=、^=、&&=、||=。

请注意，其中一些在绑定变量上使用时会错误地发出警告：请参阅[http://perl5.git.perl.org/perl.git/blob/HEAD:/t/op/assignwarn.t](http://perl5.git.perl.org/perl.git/blob/HEAD:/t/op/assignwarn.t)中标记为 TODO 的测试.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-04T04:14:25.577

正如布赖恩所说：它仍然会这样做，它只是警告你。警告会告诉您某些操作可能会产生您意想不到的效果。

您特别*要求*的值`$histogram{$_}`，向其添加 1，然后将其分配给同一个插槽。这与我不希望自动生存在这里工作的方式相同：

```
my $hash_ref = $hash_for{$key_level_1};
$hash_ref->{$key_level_2} = $value; 
```

就像这里一样：

```
$hash_for{$key_level_1}{$key_level_2} = $value; 
```

魔术可能不像优化那样起作用。优化编译器会注意到这与汇编语言中有一个增量运算符是`a = a + 1`一样`a++`的，它可以使用该优化指令而不是假装它需要保留第一个值，然后覆盖它，因为它不是实际需要。

优化是一次额外的审查和开销，以提高每次运行的性能。但是在动态语言中不能保证您不会以与您试图减少它的速度相同的速度增加开销。

# c# - 覆盖 .NET RichTextBox 上的快捷键

> ID：260716
> 
> 赞同：2
> 
> 时间：2008-11-04T03:02:10.153
> 
> 标签：c#, winforms, richtextbox

我正在使用`RichTextBox`（.NET WinForms 3.5）并且想覆盖一些标准的快捷键......例如，我不希望`Ctrl`+`I`通过 RichText 方法使文本斜体，而是运行我的自己处理文本的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-04T04:13:07.607

`Ctrl`+`I`不是 ShortcutsEnabled 属性影响的默认快捷方式之一。

下面的代码拦截了KeyDown 事件中的`Ctrl`+ `I`，因此您可以在 if 块中执行任何您想做的事情，只需确保像我展示的那样抑制按键。

```
private void YourRichTextBox_KeyDown(object sender, KeyEventArgs e)
{
    if ((Control.ModifierKeys & Keys.Control) == Keys.Control && e.KeyCode == Keys.I)
    {
        // do whatever you want to do here...
        e.SuppressKeyPress = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-04T03:52:26.400

将 RichtTextBox.ShortcutsEnabled 属性设置为 true，然后使用 KeyUp 事件自行处理快捷方式。例如

```
using System;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            this.textBox1.ShortcutsEnabled = false;
            this.textBox1.KeyUp += new KeyEventHandler(textBox1_KeyUp);
        }

        void textBox1_KeyUp(object sender, KeyEventArgs e)
        {
            if (e.Control == true && e.KeyCode == Keys.X)
                MessageBox.Show("Overriding ctrl+x");
        }
    }
} 
```

# java - 有没有一种简单的方法可以将“选择”选项添加到 Tapestry PropertyModel 下拉列表中

> ID：260723
> 
> 赞同：2
> 
> 时间：2008-11-04T03:04:55.123
> 
> 标签：java, tapestry

我有一个用于性别的 Tapestry PropertyModel。现在下拉列表只显示男性和女性，因为这些是我模型中唯一的值。我想添加一个“选择一个选项”选项。有没有一种标准方法可以做到这一点，而不必为我的模型添加假值？我还希望它足够聪明，知道如果该字段是必需的，他们不能将其设置为“选择一个选项”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-12T16:01:19.593

在 Tapestry 5 上，您只需设置 blankLabel 属性。

在 Tapestry 4 上，更容易将该功能添加到您的 PropertyModel 或将其包装在 Brian 已经提到的 LabeledPropertySelectionModel 上（您可以在 JavaDoc 中查找您的 Tapestry 版本的该类）。

在 Tapestry 3 上，您必须将该功能添加到您的模型中，因为 LabeledPropertySelectionModel 是在版本 4 中引入的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-04T05:18:04.683

一种解决方案是使用 LabeledPropertySelectionModel 来包装真实模型，例如：

```
new LabeledPropertySelectionModel(new GenderModel(), "Choose an Option") 
```

该类的 JavaDoc 说：

> 装饰基础 IPropertySelectionModel 添加初始属性。标签选项和初始属性的值是可配置的。

# internet-explorer - Watin - 浏览到 HTTPS 页面

> ID：260726
> 
> 赞同：2
> 
> 时间：2008-11-04T03:05:54.340
> 
> 标签：internet-explorer, watin

当尝试 GoTo(url) 时出现“正在重定向此页面”弹出窗口时，如何让 Watin 绕过（或单击“确定”）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-04T11:22:47.817

对于管理对话框，watin 有 WatiN.Core.DialogHandlers，（如 AlertDialogHandler、ConfirmDialogHandler、FileUploadDialogHandler、PrintDialogHandler 和 LogonDialogHandler。）我认为对于您的示例，我认为应该使用 AlertDialogHandler。

```
AlertDialogHandler popUp = new AlertDialogHandler();
ie.DialogWatcher.Add(popUp);
ie.GoTO(URL);
if( popUp.Exists())
           {
           popUp.OKButton.Click();
           }
ie.WaitForComplete(); 
```

# c# - 在.Net中，在键盘、上键或下键中编码按键的更好选择是什么？

> ID：260729
> 
> 赞同：4
> 
> 时间：2008-11-04T03:06:44.993
> 
> 标签：c#, .net, vb.net, winapi

这两个事件是相同的还是我们在编写键盘按键时应该注意的区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-04T03:12:38.523

我在这里的回答只是基于对不同应用程序的试验，而不是编程本身。

处理按键。让它成为你逻辑的触发器。这就是用户基于与其他应用程序交互所期望的。

例如，尝试在记事本中按下一个键，您会看到 DOWN 触发了记事本中的反应。它不等待UP。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-04T03:13:03.563

是否是 .Net 并不重要，重要的是用户的期望。Keydown 是响应四个箭头键的好时机。字符输入是响应可见字符输入的好时机。Keyup 通常是响应任何将对文档产生影响的操作的好时机，但如果它是用户希望立即生效的游戏，keydown 会更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-04T03:10:56.157

这并不是真正的“对于 .NET 来说这是一个更好的选择”。

您确实必须考虑如何响应按键。如果您想了解某人在文本框中输入的内容，通常最好等到他们发布后再尝试决定他们在做什么。但是，如果它类似于游戏，您想在按下它的瞬间做出响应，那么您将使用 KeyDown。

KeyDown 是按键被按下的那一刻。KeyUp 是在密钥释放之后。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-04T03:25:37.093

需要考虑的一件事是我以前遇到过问题：

如果您在按键按下时处理了更改窗口或更改 UI 组件焦点的操作，那么新的 UI 元素*有时可能会*获得按键按下事件。

这发生在我上一份工作中。我们在一个表单上有一个控件，在按下键时，它会加载一个新表单。如果新表单加载得足够快，那么新表单将在用户释放键之前获得焦点，并且新表单将获得按键事件。我们在第二个表单上有一个 UI 控件，它对按键做出反应，它有时会被无意触发。

这个故事的寓意是；保持一致。选择其中一个并坚持下去:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-04T03:10:31.353

key down 事件在用户按下一个键时发生，key up 事件在用户按下后释放键时发生。

因此，如果您使用 key up 事件，并且用户按下一个键并按住它 5 秒钟，那么在他们放开它之前什么都不会发生。

*（注意：我对 .net 一无所知，我只是在其他库中使用了“key up”和“key down”事件。）*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-04T16:55:46.273

另一件需要考虑的事情：当持有修饰符时，使用 keydown 很重要。我通常使用 keydown 来设置一个变量，比如`ctrlPressed=true`; 然后使用 keyup 取消设置该变量`ctrlPressed=false;`

我通常对所有字母数字字符使用 keyPressed。

这种系统允许你启用像`CTRL`++ `K`ala `C`Visual Studio这样的东西

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-06T15:53:38.020

我几乎总是使用 KeyDown，因为这样我就可以使用 e.Handled=True 并停止 keyevent 从文本框到容器并在我想要的事件中向下移动。您也可以在 KeyUp 中使用 e.Handled ，但是它“迟到了”，因为用户输入的密钥将在文本框中看到，如果您想阻止用户在其中输入数字，则必须手动将其取走文本框。

# excel - Excel中的内存泄漏

> ID：260734
> 
> 赞同：1
> 
> 时间：2008-11-04T03:10:33.317
> 
> 标签：excel

我在 excel 中有一个宏，它在 vba 中调用了一些其他函数。问题是似乎有很多循环引用并且内存没有被释放。我试图通过将对象设置为空来显式释放内存，但仍然无法插入它。而且，即使宏停止运行，内存也不会被释放。我必须关闭 excel 的实例来回收内存。我怎样才能摆脱这种泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-04T04:24:09.817

如果您在代码模块的顶部定义了任何变量或数组或集合或任何其他对象（即不在子或函数内），那么当宏停止运行时它们将保留其值，除非您明确清除它们。

只有在子或函数中声明的变量会在退出子或函数时自动清除。

# python - 使用 Python 播放音频

> ID：260738
> 
> 赞同：128
> 
> 时间：2008-11-04T03:11:03.520
> 
> 标签：python, audio

如何从 Python 脚本播放音频（就像 1 秒的声音）？

如果它是独立于平台的，那将是最好的，但首先它需要在 Mac 上工作。

我知道我可以`afplay file.mp3`在 Python 中执行命令，但是可以在原始 Python 中执行吗？如果它不依赖外部库，我也会更好。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2008-11-04T04:40:50.157

您最好的选择可能是使用[pygame/SDL](http://www.pygame.org)。它是一个外部库，但它具有跨平台的强大支持。

```
pygame.mixer.init()
pygame.mixer.music.load("file.mp3")
pygame.mixer.music.play() 
```

[您可以在pygame.mixer.music 文档](http://www.pygame.org/docs/ref/music.html)中找到有关音频混音器支持的更具体的文档

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2017-11-27T13:57:00.860

试试[playsound](https://github.com/TaylorSMarks/playsound)，它是一个纯 Python、跨平台、单一功能模块，不依赖于播放声音。

通过 pip 安装：

```
$ pip install playsound 
```

安装后，您可以像这样使用它：

```
from playsound import playsound
playsound('/path/to/a/sound/file/you/want/to/play.mp3') 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-03-29T12:17:17.980

看看[Simpleaudio](http://simpleaudio.readthedocs.org/en/latest/index.html)，这是一个相对较新的轻量级库，用于此目的：

```
> pip install simpleaudio 
```

然后：

```
import simpleaudio as sa

wave_obj = sa.WaveObject.from_wave_file("path/to/file.wav")
play_obj = wave_obj.play()
play_obj.wait_done() 
```

确保使用未压缩的 16 位 PCM 文件。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2008-11-04T03:27:13.457

您可以在此处找到有关 Python 音频的信息：[http ://wiki.python.org/moin/Audio/](http://wiki.python.org/moin/Audio/)

它看起来不像没有外部库就可以播放 .mp3 文件。您可以将 .mp3 文件转换为 .wav 或其他格式，或者使用[PyMedia 之](http://pymedia.org/)类的库。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-12-23T15:54:08.293

在[pydub 中](http://pydub.com)，我们最近[选择使用 ffmpeg](https://github.com/jiaaro/pydub/blob/master/pydub/playback.py)工具套件中的 ffplay（通过子进程），该套件在内部使用 SDL。

它适用于我们的目的——主要是为了更容易在交互模式下测试 pydub 代码的结果——但它也有缺点，比如导致新程序出现在 mac 上的 Dock 中。

我已经链接了上面的实现，但是一个简化的版本如下：

```
import subprocess

def play(audio_file_path):
    subprocess.call(["ffplay", "-nodisp", "-autoexit", audio_file_path]) 
```

该`-nodisp`标志阻止 ffplay 显示新窗口，并且该`-autoexit`标志导致 ffplay 退出并在音频文件播放完毕时返回状态代码。

**编辑**： pydub 现在在安装时使用 pyaudio 进行播放，并回退到 ffplay 以避免我提到的缺点。上面的链接也显示了该实现。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2015-12-09T12:37:18.297

抱歉回复晚了，但我认为这是为我的图书馆做广告的好地方......

AFAIK，标准库只有一个用于播放音频的模块：[ossaudiodev](https://docs.python.org/3/library/ossaudiodev.html)。遗憾的是，这只适用于 Linux 和 FreeBSD。

更新：还有[winsound](https://docs.python.org/3/library/winsound.html)，但显然这也是特定于平台的。

对于更独立于平台的东西，您需要使用外部库。

我的推荐是[sounddevice](http://python-sounddevice.rtfd.org/)模块（但请注意，我是作者）。

该软件包包括用于 Mac OS X 和 Windows 的预编译[PortAudio](http://www.portaudio.com/)库，并且可以通过以下方式轻松安装：

```
pip install sounddevice --user 
```

它可以播放来自 NumPy 数组的声音，但它也可以使用普通的 Python 缓冲区（如果 NumPy 不可用）。

要播放一个 NumPy 数组，这就是你所需要的（假设音频数据的采样频率为 44100 Hz）：

```
import sounddevice as sd
sd.play(myarray, 44100) 
```

有关更多详细信息，请查看[文档](http://python-sounddevice.rtfd.org/)。

它不能读/写声音文件，你需要一个单独的库。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-12-24T07:48:54.450

你可以看到这个：[http ://www.speech.kth.se/snack/](http://www.speech.kth.se/snack/)

```
s = Sound() 
s.read('sound.wav') 
s.play() 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-01-25T02:24:09.093

[Aaron 的答案](https://stackoverflow.com/a/34568298/901641)似乎比必要的复杂 10 倍。如果您只需要适用于 OS X 的答案，请执行此操作：

```
from AppKit import NSSound

sound = NSSound.alloc()
sound.initWithContentsOfFile_byReference_('/path/to/file.wav', True)
sound.play() 
```

一件事......这会立即返回。因此，如果您希望阻止呼叫直到声音播放完毕，您可能也想这样做。

```
from time import sleep

sleep(sound.duration()) 
```

编辑：我采用了这个功能并将它与 Windows 和 Linux 的变体结合起来。结果是一个纯 python 跨平台模块，没有称为[playsound](https://pypi.python.org/pypi/playsound)的依赖项。我已经将它上传到pypi。

```
pip install playsound 
```

然后像这样运行它：

```
from playsound import playsound
playsound('/path/to/file.wav', block = False) 
```

MP3 文件也适用于 OS X。WAV 应该适用于所有平台。我不知道平台/文件格式的其他组合是否有效 - 我还没有尝试过。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-10-05T21:40:14.880

这是我发现的最简单和最好的。它支持 Linux/pulseaudio、Mac/coreaudio 和 Windows/WASAPI。

```
import soundfile as sf
import soundcard as sc

default_speaker = sc.default_speaker()
samples, samplerate = sf.read('bell.wav')

default_speaker.play(samples, samplerate=samplerate) 
```

有关大量其他超级有用的功能，请参阅[https://github.com/bastibe/PySoundFile](https://github.com/bastibe/PySoundFile)和[https://github.com/bastibe/SoundCard](https://github.com/bastibe/SoundCard)。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-01-31T05:45:03.183

同样在 OSX - 来自[SO](https://stackoverflow.com/questions/3498313/how-to-trigger-from-python-playing-of-a-wav-or-mp3-audio-file-on-a-mac)，使用 OSX 的[afplay](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/afplay.1.html)命令：

```
import subprocess
subprocess.call(["afplay", "path/to/audio/file"]) 
```

更新：所有这一切都是指定*如何*做 OP 想要避免做的事情。我想我在这里发布这个是因为 OP 想要避免的是我正在寻找的信息。哎呀。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-01-02T16:53:43.613

可以使用以下代码的模拟在 OS X 中播放音频而无需任何 3rd 方库。可以使用 wave_wave.writeframes 输入原始音频数据。此代码从输入文件中提取 4 秒的音频。

```
import wave
import io
from AppKit import NSSound

wave_output = io.BytesIO()
wave_shell = wave.open(wave_output, mode="wb")
file_path = 'SINE.WAV'
input_audio = wave.open(file_path)
input_audio_frames = input_audio.readframes(input_audio.getnframes())

wave_shell.setnchannels(input_audio.getnchannels())
wave_shell.setsampwidth(input_audio.getsampwidth())
wave_shell.setframerate(input_audio.getframerate())

seconds_multiplier = input_audio.getnchannels() * input_audio.getsampwidth() * input_audio.getframerate()

wave_shell.writeframes(input_audio_frames[second_multiplier:second_multiplier*5])

wave_shell.close()

wave_output.seek(0)
wave_data = wave_output.read()
audio_stream = NSSound.alloc()
audio_stream.initWithData_(wave_data)
audio_stream.play() 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-12-20T00:31:10.147

使用安装`playsound`包：

```
pip install playsound 
```

用法：

```
from playsound import playsound
playsound("file location\audio.p3") 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-05-28T17:30:18.083

尝试使用 PortAudio 进行播放的[PySoundCard ，它在许多平台上都可用。](https://github.com/bastibe/PySoundCard)此外，它还可以识别具有大量通道的“专业”声音设备。

这是自述文件中的一个小示例：

```
from pysoundcard import Stream

"""Loop back five seconds of audio data."""

fs = 44100
blocksize = 16
s = Stream(samplerate=fs, blocksize=blocksize)
s.start()
for n in range(int(fs*5/blocksize)):
    s.write(s.read(blocksize))
s.stop() 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-11-19T21:15:05.530

Mac OS 我尝试了很多代码，但这对我有用

```
import pygame
import time
pygame.mixer.init()
pygame.init()
pygame.mixer.music.load('fire alarm sound.mp3') *On my project folder*
i = 0
while i<10:
    pygame.mixer.music.play(loops=10, start=0.0)
    time.sleep(10)*to protect from closing*
    pygame.mixer.music.set_volume(10)
    i = i + 1 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-02-16T15:08:37.603

[Pypi](https://wiki.python.org/moin/PythonInMusic)有一个音乐中的 python 模块列表。我最喜欢的是[jython](https://jythonmusic.me/download/)，因为它有更多的音乐资源和库。[作为从教科书](https://rads.stackoverflow.com/amzn/click/com/1439867917)中播放单个音符的代码示例：

```
# playNote.py 
# Demonstrates how to play a single note.

from music import *   # import music library
note = Note(C4, HN)   # create a middle C half note 
Play.midi(note)       # and play it! 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-06-10T15:13:01.010

在 Colab 笔记本中，您可以执行以下操作：

```
from IPython.display import Audio
Audio(waveform, Rate=16000) 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-11-13T12:29:33.283

这很简单。我是这样做的。

对于 wav 文件

```
from IPython.display import Audio
from scipy.io.wavfile import read

fs, data = read('StarWars60.wav', mmap=True)  # fs - sampling frequency
data = data.reshape(-1, 1)
Audio(data = data[:, 0], rate = fs) 
```

对于 mp3 文件

```
import IPython.display import Audio

Audio('audio_file_name.mp3') 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-09-11T13:43:52.790

该库旨在简单、跨平台并具有许多功能：[https ://github.com/libwinmedia/libwinmedia-py](https://github.com/libwinmedia/libwinmedia-py)

它需要一个[libwinmedia](https://github.com/harmonoid/libwinmedia)共享库，您可以在 Releases 选项卡中下载它。

您可以使用安装它`pip install libwinmedia`

例子：

```
import libwinmedia

player = libwinmedia.Player(True)

player.set_position_callback(lambda position: print(f"{position} ms."))
media = libwinmedia.Media("test.mp3")

player.open(media) 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-11-11T22:16:02.483

把它放在你正在编写的 python 脚本的顶部：

```
import subprocess 
```

如果 wav 文件位于 python 脚本的目录中：

```
f = './mySound.wav'
subprocess.Popen(['aplay','-q',f) 
```

如果 wav 文件不在 python 脚本的目录中：

```
f = 'mySound.wav'
subprocess.Popen(['aplay','-q', 'wav/' + f) 
```

如果您想了解更多关于 aplay 的信息：

```
man aplay 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-02-22T13:10:47.130

要使用 python 播放通知声音，请调用音乐播放器，例如 vlc。*VLC 提示我改用它的命令行版本 cvlc。*

```
from subprocess import call
call(["cvlc", "--play-and-exit", "myNotificationTone.mp3"]) 
```

它需要在设备上预装 vlc。在 Linux 上测试（Ubuntu 16.04 LTS）；运行 Python 3.5。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-04-11T17:42:01.837

**试试声音设备**

如果您没有模块 `pip install sounddevice`，请在终端中输入。

然后在您首选的 Python 脚本（我使用 Juypter）中，输入

```
import sounddevice as sd 
```

`sd.play(audio, sr)`将通过 Python 播放您想要的内容

获得所需音频和采样率的最佳方法是使用 librosa 模块。如果您没有 librosa 模块，请在终端中输入。

```
pip install librosa

audio, sr = librosa.load('wave_file.wav') 
```

无论您想播放什么 wav 文件，只要确保它与您的 Python 脚本位于同一目录中即可。这应该允许您通过 Python 播放所需的 wav 文件

干杯，查理

附言

一旦音频是一个“librosa”数据对象，Python 将其视为一个 numpy 数组。作为一个实验，尝试播放一个长的（尝试 20,000 个数据点）随机 numpy 数组的东西。Python 应该把它当作白噪声来播放。sounddevice 模块也播放 numpy 数组和列表。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-08-03T22:21:55.327

我最近让我的音乐播放器支持本地的所有音频文件。我通过找出一种使用 vlc python 模块以及 VLC dll 文件的方法来做到这一点。你可以看看： [https ://github.com/elibrovtw/music-caster/blob/master/audio_player.py](https://github.com/elibroftw/music-caster/blob/master/audio_player.py)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-12-26T23:34:36.157

对于那些使用 Linux 和其他软件包没有处理 MP3 文件的人，`audioplayer`对我来说工作得很好：

[https://pypi.org/project/audioplayer/](https://pypi.org/project/audioplayer/)

```
from audioplayer import AudioPlayer
AudioPlayer("path/to/somemusic.mp3").play(block=True) 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2014-03-27T13:33:35.500

如果你在 OSX 上，你可以使用“os”模块或“subprocess”等来调用 OSX 的“play”命令。从 OSX 外壳来看，它看起来像

播放“bah.wav”

它开始在我的机器上播放大约半秒。

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2016-03-20T14:41:10.187

简单地你可以在 cvlc 的帮助下做到这一点——我是这样做的：

```
import os
os.popen2("cvlc /home/maulo/selfProject/task.mp3 --play-and-exit") 
```

/home/maulo/selfProject/task.mp3。这是我的 mp3 文件的位置。在“--play-and-exit”的帮助下，您将能够在不结束 vlc 进程的情况下再次播放声音。

# html - 阻止嵌入式 Windows Media Player 循环播放？

> ID：260742
> 
> 赞同：1
> 
> 时间：2008-11-04T03:13:45.510
> 
> 标签：html, audio, audio-streaming, wmp, embedded-control

我在 HTML 页面中有一个嵌入式 Windows Media 播放器，当音频播放到结尾时，它又从头开始。

根据文档，有一个`autorewind`参数/属性，还有一个`loop`.

问题是，我已经将这两个都设置为`false`（和/或零），它似乎没有任何区别。

这可能是一个错误吗？我的客户是 WMP 10.00.00.4058。*也许服务器*上有某种设置告诉文件循环，这是一个疯狂的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-03T00:16:49.563

哇！参数名称=播放计数值=1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T06:07:34.557

我认为，问题在于您在不同浏览器之间的不同嵌入方法。这是一些经过测试的代码，其中不会发生循环。

IE

```
<object id="contentPlayer" classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" width="300" height="60"><!-- <param name='fileName' value=''> -->
<param name='animationatStart' value='false'>
<param name='transparentatStart' value='true'>
<param name='autoStart' value='true'>
<param name='playState' VALUE='1'>
<param name='loop' value='false'>
</OBJECT> 
```

火狐

```
<object id="contentPlayer" name='contentPlayer' type="application/x-ms-wmp" data="" width="300" height="60"><!-- <param name='fileName' value=''> -->
<param name='animationatStart' value='false'>
<param name='transparentatStart' value='true'>
<param name='autoStart' value='true'>
<param name='playState' VALUE='1'>
<param name='loop' value='false'>
</OBJECT> 
```

主要区别在于，在 IE 中我有一个 classid，但在 Firefox 中我有一个“类型”分类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-16T04:02:21.860

将您的 html 代码与此进行比较：

[从http://www.programmingforums.org/post147977.html](http://www.programmingforums.org/post147977.html)被盗

> ```
> <object width="320" height="290"
> classid="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95"
> id="mediaplayer1">
> <param name="Filename" value="kids.mpg">
> <param name="AutoStart" value="True">
> <param name="ShowControls" value="True">
> <param name="ShowStatusBar" value="False">
> <param name="ShowDisplay" value="False">
> <param name="AutoRewind" value="True">
> <embed
> type="application/x-mplayer2"
> pluginspage="http://www.microsoft.com/Windows/Downloads/Contents/MediaPlayer/"
> width="320" height="290" src="/support/dreamweaver/ts/documents/kids.mpg"
> filename="kids.mpg" autostart="True"
> showcontrols="True" showstatusbar="False"
> showdisplay="False" autorewind="True">
> </embed>
> </object> 
> ```

# java - 抽象类构造函数访问修饰符

> ID：260744
> 
> 赞同：29
> 
> 时间：2008-11-04T03:14:43.357
> 
> 标签：java

抽象类只能用作由其他类扩展的基类，对吗？抽象类的构造函数可以具有通常的访问修饰符（public、protected 和 private（供内部使用））。哪一个是正确`protected`的`public`访问修饰符，因为抽象类型似乎表明技术上公共构造函数将受到非常保护？我应该在所有构造函数上使用 protected 吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-11-04T03:30:15.510

> > 因为抽象类型似乎表明从技术上讲，公共构造函数将非常受保护
> 
> 这是不正确的。抽象类不能通过调用其构造函数直接实例化，但是，任何具体实现*都将继承抽象类的方法和可见性*
> 
> 所以抽象类当然可以有公共构造函数。

实际上，抽象类的构造函数只能从实现的构造函数中调用，所以它是public还是protected没有区别。例如：

```
public class Scratch
{
    public static abstract class A
    {
        public A( int i ) {}
    }

    public static class B extends A
    {
        private B() { super(0); };
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-04T03:17:11.743

如果这种行为是真的，而且我不确定它是否是真的，那么您应该始终使用最受限制的范围来让您的应用程序运行。所以在这种情况下，我建议使用受保护的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T03:53:15.430

> 因为抽象类型似乎表明从技术上讲，公共构造函数将非常受保护

嗯......对于抽象类，这个构造函数范围[公共或受保护]没有太大区别，因为不允许实例化[即使是公共的]。由于它是由子类调用的，它可以无缝调用公共或受保护的构造函数。

它完全取决于选择使用什么。我通常更喜欢公开，因为在大多数情况下都是如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-04T05:05:34.147

至少，抽象类应该有一个受保护的构造函数。这不是绝对必要的，因为无论如何都不可能使用构造函数，但它使合同明确。

另一种选择是将构造函数设为私有。如果类的所有实现都是私有内部类，这只是一个好主意。一个罕见但有用的例子。

# javascript - 使用 jQuery，如何禁用当前选项卡上的点击效果？

> ID：260745
> 
> 赞同：6
> 
> 时间：2008-11-04T03:15:00.453
> 
> 标签：javascript, jquery

我有一个正在播放动画的菜单，但我想在动画播放时禁用点击。

```
<div></div>
<div></div>
<div></div>

$("div").click(function() { 
  $(this).animate({height: "200px"}, 2000); 
  return false;
}); 
```

但是，我想在事件发生时禁用所有按钮，并禁用被点击的 div。

我正在考虑向单击的 div 添加一个类，并将单击仅放在没有该类的 div 上：

```
$("div").not("clicked").click(function() { 
  $(this).animate({height: "200px"}, 2000).addClass("clicked"); 
  return false;
}); 
```

但这似乎不起作用（我认为它在逻辑上起作用）？

任何帮助表示赞赏。

干杯，
史蒂夫

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-04T03:38:23.263

```
$("div").click(function() {
    if (!$(this).parent().children().is(':animated')) {
        $(this).animate({height: "200px"}, 2000); 
    }
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-04T03:39:29.080

你可以做这样的事情......

```
$(function() {          
    $("div").click(function() {                 

        //check to see if any of the divs are animating
        if ($("div").is(":animated")) { 
            alert("busy"); 
            return; 
        }

        //whatever your animation is        
        var div = $(this);
        div.slideUp(3000, function(){ div.slideDown(1000); });

    });

}); 
```

只要任何 div 当前未设置动画，这将为点击设置动画。我很可能将所有这些 div 放在一个容器中，而不仅仅是指 div，因为它可能会影响页面上的更多内容，而不仅仅是您的菜单，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-04T22:42:55.213

动画发生后如何禁用单击的 <div> ？我已向已单击的 div 添加了一个类，但执行以下操作似乎不起作用：

```
<div></div>
<div class="active"></div>
<div></div>

$("div").not('active').click(function() {
  if (!$(this).parent().children().is(':animated')) {
    $(this).animate({height: "200px"}, 2000); 
  }
  return false;
}); 
```

我怀疑我在 .not 工作方式方面遗漏了一些东西

# javascript - 使用 JavaScript 获取和设置单个 cookie 值的“最佳”方法是什么

> ID：260749
> 
> 赞同：19
> 
> 时间：2008-11-04T03:15:33.060
> 
> 标签：javascript, cookies

我想在每次引用页面时增加一个 cookie 值，即使该页面是从缓存中加载的。实现这一点的“最佳”或最简洁的方法是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-11-04T04:24:54.243

从[http://www.quirksmode.org/js/cookies.html#script窃取](http://www.quirksmode.org/js/cookies.html#script)

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toUTCString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

使用它：

```
var oldCount = parseInt(readCookie('hitCount'), 10) || 0;
createCookie('hitCount', oldCount + 1, 7); 
```

正如评论中所指出的，您应该转换为 int，因为 cookie 是作为字符串存储和返回的。使用`foo++`or`++foo`实际上会为您投射，但确切地知道您正在使用什么会更安全：

```
var x = "5";  // x = "5" (string)
x += 1;       // x = "51" (string!)
x += 5;       // x = "515" (string!)
++x;          // x = 516 (number) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-04T04:17:19.113

我见过的大多数旧的 cookie 处理函数都使用简单的字符串操作来存储检索值，就像[这个](http://www.w3schools.com/JS/js_cookies.asp)例子一样，你可以使用其他库，比如[cookie-js](http://code.google.com/p/cookie-js/)，一个用于 cookie 访问的小型*（< 100 行）*实用程序。

我个人在我的项目中使用 jQuery，并且我使用[jQuery Cookie Plugin](http://plugins.jquery.com/cookie/)，它使用起来非常简单：

```
var cookieName = "increment";

if ($.cookie(cookieName) == null){
  $.cookie(cookieName, 1, { expires: 10 });
}else{
  var newValue = Number($.cookie(cookieName)) + 1;
  $.cookie(cookieName, newValue, { expires: 10 });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:30:46.750

最好的方法总是最简单的：

```
function getCookie(name) {
  return (name = (document.cookie + ';').match(new RegExp(name + '=.*;'))) && name[0].split(/=|;/)[1];
}

// the default lifetime is 365 days
function setCookie(name, value, days) {
  var e = new Date;
  e.setDate(e.getDate() + (days || 365));
  document.cookie = name + "=" + value + ';expires=' + e.toUTCString() + ';path=/;domain=.' + document.domain;
} 
```

这些函数期望值是一个简单的字符串，但如果你愿意，你总是可以 JSON.stringify 它，或者用它做其他事情......

# web-services - WebService上有什么好的资源吗？

> ID：260754
> 
> 赞同：1
> 
> 时间：2008-11-04T03:19:16.733
> 
> 标签：web-services

MSDN 上的 Web 服务现在全都与 Windows Communication Foundation 有关。有没有只处理 WebService 的网站？（。网）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-04T03:44:29.787

我确实在[MSDN](http://msdn.microsoft.com/en-us/library/ms950421.aspx)下找到了此部分的 Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-04T05:17:59.753

查看[http://www.xml.com/](http://www.xml.com/)

# linux - 除了 iptables 之外的数据包处理工具？

> ID：260757
> 
> 赞同：14
> 
> 时间：2008-11-04T03:20:40.037
> 
> 标签：linux, networking, iptables, packet-mangling

我正在寻找一个 linux 实用程序，它可以根据一组规则更改网络数据包的有效负载。理想情况下，我会使用`iptables`和`netfilter`内核模块，但它们不支持通用有效负载修饰：`iptables`会改变各种*标头*字段（地址、端口、TOS 等），它可以*匹配*数据包中的任意字节，但显然是无法*更改*数据包中的任意数据。

内核模块将是一个很大的优势，因为效率是一个问题，但我很高兴探索可以完成工作的任何其他选项。

谢谢你的想法！

* * *

**久违的更新：**

我们选择使用该`NFQUEUE`模块，这是 Robert Gamble 建议的 QUEUE 模块的最新实现。它看起来相当简单，并且允许我们的代码在用户空间而不是内核空间中运行具有安全奖励。

如果我们只是想改变有效载荷而不改变其大小，那么实现几乎是微不足道的。在这种情况下，我们会定义一个[`iptables`](http://netfilter.org/projects/iptables/index.html)规则来为我们选择“有趣”的数据包并向它们发送`NFQUEUE`目标。我们将编写一个回调函数来检查来自`NFQUEUE`的数据包，根据需要修改数据，并重新计算其 TCP 和 IP 标头中的校验和。

但是，我们的用例涉及向数据流中注入额外的字符。这有一些明显的副作用，即增加 TCP 流中相应的 SEQ/ACK 编号，以及不那么明显的副作用，即混淆[`conntrack`](http://kalamazoolinux.org/presentations/20010417/conntrack.html)模块足以完全破坏 NAT。经过*大量*的研究、摸索和实验，最方便的解决方案是禁用这些特定数据包的连接跟踪（`NOTRACK`目标在`raw`表中）并在我们的回调中处理它。 *保存你的西红柿和讨厌的邮件；我一点也不自豪让你了解情况，但这是在下一个冰河时代之前为客户提供可靠产品的唯一途径。这是一个好故事。但我真的很欣赏并分享你的衷心感受。*

`iptables`版本 2 将通过用自定义 NAT 和/或[`conntrack`helper](http://www.netfilter.org/documentation/HOWTO/netfilter-hacking-HOWTO-4.html#ss4.4)替换我们的回调和一些规则来利用我们新发现的启示。我们相信当前的练习已经给了我们足够的经验来创建一个内核模块，该模块将有机地融入 netfilter 架构，以解决我们遇到的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-04T03:30:10.487

我没有使用它，但[QUEUE](http://www.wallinfire.net/files/netfilter-packets-alter.html) netfilter 目标看起来可能会起作用。它使用 nflink 套接字和注册到套接字的用户空间应用程序来执行有效负载修改。

[libipq](http://linux.die.net/man/3/libipq)手册页包含有关如何使用它的详细信息并提供了一个简单的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T14:50:05.413

## 解析度：

我们最终得到了一个用于 netfilter 的自定义模块，这显然是这项工作的“正确”工具。

# javascript - Javascript外壳？

> ID：260787
> 
> 赞同：4
> 
> 时间：2008-11-04T03:37:14.497
> 
> 标签：javascript, shell

我知道这个问题已经在[这里](https://stackoverflow.com/questions/41207/javascript-interactive-shell-with-completion)被问过，但遗憾的是没有一个答案表明一个具有自动完成功能的 javascript 独立 shell。我再次重新提出这个问题，希望可以找到一些新的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-04T04:18:41.653

根据[这篇博](http://blog.norrisboyd.com/2008/03/better-line-editing-for-rhino-shell.html)文，只要包含[JLine](http://jline.sourceforge.net/)库， [Rhino](https://developer.mozilla.org/en/Rhino_Shell)现在就可以使用自动补全功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-11-02T00:54:08.063

**编辑**：在使用节点 REPL 多一点之后，我发现这个评估过于积极了。它的实现存在一些严重的问题，包括无法提取已删除的文本、编辑行长于终端宽度的问题以及其他一些问题。只使用犀牛可能会更好。

[node.js](http://nodejs.org/) [REPL](http://en.wikipedia.org/wiki/REPL)（在安装了节点的`node-repl`系统上）是迄今为止我见过的最好的基于终端的系统上下文 shell。我将它与 rhino 和内置的 v8 shell 进行比较。它提供制表符完成和行编辑历史，以及评估的语法着色。您还可以导入[CommonJS](http://commonjs.org/)模块，或者至少是那些由 node.js 实现的模块。

缺点是您必须构建节点。这并不是什么大不了的事情，就像构建应用程序一样，但如果你通常不做这些事情，这可能是一个挑战。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T03:42:59.977

[http://www.faqts.com/knowledge_base/view.phtml/aid/1438](http://www.faqts.com/knowledge_base/view.phtml/aid/1438)列出了一些 JavaScript 解释器。我不打算下载它们以确认它们已经（标签？）完成。

[我不确定您所说的自动完成是什么意思，因为这意味着更多的是 IDE 类型的方法]。

这是用于基于 Web 的开发/调试吗？如果是这样，我真的可以推荐用于 Firefox 的 squarefree [JS shell](http://www.squarefree.com/shell/)书签，它在链接的帖子中列出。没错，它不是独立的，但确实有制表符补全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-04T08:41:13.743

[Jash](http://www.billyreisinger.com/jash/)是一个基于 DHTML 的窗口，可让您通过命令行 JavaScript 访问当前浏览器窗口。使用此控制台，您可以快速运行调试脚本。它使用 TAB 键自动完成：http: [//www.billyreisinger.com/jash/](http://www.billyreisinger.com/jash/)

[Firebug](http://getfirebug.com/)是一个带有高级命令行的 Firefox 扩展。它还具有单行模式下的自动完成功能。查看完整的命令行 API： http: [//getfirebug.com/commandline.html](http://getfirebug.com/commandline.html)

如果您想在您的操作系统环境中使用 shell，请尝试 Mozilla 的[Rhino Shell](https://developer.mozilla.org/en/Rhino_Shell)。这个 JavaScript shell 提供了一种简单的方法来以批处理模式运行脚本或用于探索性编程的交互式环境。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-04T03:55:23.993

如果您正在查看客户端 Javascript，您是否查看过[Firebug](http://getfirebug.com/)？它为您提供当前窗口的命令完成 - 包括任何拉入的库等？

您可以将其作为 Firefox 的插件运行，或将其包含在其他浏览器的任何网页中（不确定完成是否适用于 firebug lite）

# sql-server-2008 - SQL Server 2008 报告服务权限

> ID：260794
> 
> 赞同：2
> 
> 时间：2008-11-04T03:40:47.343
> 
> 标签：sql-server-2008, reporting-services, permissions

我在使用 SQL Server 2008 (Express with Advanced Services) Reporting Services 权限时遇到问题。我在家里的 Vista Ultimate 上运行它——没有服务器、没有域或活动目录的独立机器。

当我访问 ReportServices 站点时，我得到以下信息：

> 授予用户“ *localmachine* \Scott”的权限不足以执行此操作。(rsAccessDenied)

我不记得在办公室使用 Windows 2008 上的 SQL Standard 时遇到问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-04T04:13:45.017

尝试以管理员身份运行 IE，然后转到该页面。然后在设置下添加您的用户并授予其权限。之后您应该能够以管理员身份运行 IE。这对我在 vista 下使用 SSRS 2005 有效。

如果不是这样，请检查该服务正在以哪个用户帐户运行。

请参阅有关[如何在 Vista 和 Server 2008 上配置 Reporting Services的 MSDN 页面](http://technet.microsoft.com/en-us/library/bb630430.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-09T18:07:27.487

Phillip Wells 说：“我也有同样的问题。我尝试以管理员身份运行 IE，然后转到该页面，但我仍然收到拒绝访问错误。有什么建议吗？”

我也有这个问题。我以管理员身份运行 IE，但仍然收到拒绝访问错误。看来 IE 仍然没有以管理员身份运行。

然后我尝试使用另一个浏览器（我试过谷歌浏览器）作为管理员。然后轰隆隆！SQL Server Reporting Services Manager 的主页显示为带有选项卡属性。我点击它。我添加我的帐户成为内容管理员。然后我像往常一样打开 IE（不是以管理员身份），然后我可以浏览和管理 SSRS Manager 站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:44:13.527

尝试使用管理员权限，以管理员身份运行 Internet Explorer，我附上了三张带有该问题和解决方案的图片。我在 w8 中遇到了同样的问题。好看。

# berkeley-db - BerkeleyDB 的替代品？

> ID：260804
> 
> 赞同：41
> 
> 时间：2008-11-04T03:44:47.150
> 
> 标签：berkeley-db, dbm, okvs

我正在寻找一个类似 dbm 的库，可以用来代替我目前正在使用的 Berkeley DB。我切换的主要原因是 BDB 的许可费用非常高（开源应用程序免费，但我的雇主出于各种原因不想开源这个特定的应用程序）。

我已经简要地查看了 qdbm，但它看起来并不能满足我的需求——很多键（数百万）和大数据项（> 1-5 兆字节）。在我继续搜索之前，我想我会问，因为那里似乎有很多类似 dbm 的库。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-08-08T09:59:21.567

# C/C++

*   [http://sphia.org/](http://sphia.org/)一个键/值存储，用 C 语言编写并获得 BSD 许可。
*   [https://code.google.com/p/leveldb/](https://code.google.com/p/leveldb/)用 C++ 编写，也是 BSD 许可的
*   [http://luxio.sourceforge.net/](http://luxio.sourceforge.net/)用 C++、LGPL 编写，比 Berkeley DB 快
*   [http://symas.com/mdb/](http://symas.com/mdb/)用 C 编写，许可证是*OpenLDAP Public License* (BSD-Like)
*   [https://github.com/davidar/sdbm](https://github.com/davidar/sdbm) 用 C 语言编写，公共领域，“ndbm”的重新实现
*   [http://repetae.net/computer/vsdb/](http://repetae.net/computer/vsdb/)用 C 编写，许可证未知，实验性
*   [https://github.com/stevedekorte/skipdb](https://github.com/stevedekorte/skipdb)用 C 语言编写，BSD 许可，使用 Skip-List 索引的键值存储
*   [http://unqlite.org/](http://unqlite.org/) 用 C/C++ 编写，嵌入式 NoSQL 数据库引擎，BSD 许可，类似于 SQLite。
*   [http://hamsterdb.com/](http://hamsterdb.com/) 用 C/C++ 编写，嵌入式 NoSQL 数据库引擎，Apache 许可证 2.0。

# 爪哇

*   [https://github.com/dain/leveldb](https://github.com/dain/leveldb) LevelDB 的 Java 端口，Apache License 2.0
*   [https://github.com/jingwei/krati](https://github.com/jingwei/krati)前LinkedIn项目，Apache License 2.0
*   [http://www.mapdb.org/](http://www.mapdb.org/)一个嵌入式Java数据库，Apache License 2.0，支持键值存储，非常高效的对象序列化
*   [https://github.com/OpenHFT/Chronicle-Map](https://github.com/OpenHFT/Chronicle-Map)，LGPL v3，嵌入式纯Java键值存储，[比Berkeley DB更快](http://jetbrains.github.io/xodus/#features)
*   [https://github.com/jetbrains/xodus](https://github.com/jetbrains/xodus)，Apache License 2.0，Java 事务模式少的嵌入式数据库，[比 Berkeley DB 更快](http://jetbrains.github.io/xodus/#features)
*   [https://github.com/lmdbjava/lmdbjava](https://github.com/lmdbjava/lmdbjava)，用于 LMDB 的 JNI 绑定，Apache 许可证 2.0

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-11-14T15:16:12.220

你可以看看[东京内阁](http://fallabs.com/tokyocabinet/)。它是 qdbm/gdbm 的继任者，如果你决定扩展，它有一个不错的网络前端可用。

**编辑：**

另一个变体是[京都内阁](http://fallabs.com/kyotocabinet/)；由同一个人开发，但据说更易于使用。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-11-04T03:46:34.790

[SQLite](http://www.sqlite.org/)是公共领域，这意味着您可以将它用于任何目的，并且被广泛使用和支持。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-11-14T16:00:07.717

您可以从任何 dbm（甚至 qdbm）中获得显着改进的性能，并通过简单的间接级别改进并行性：只需获取您的密钥并将它们散列，然后`data_dir/H(key)/`用作存储这些密钥的数据库。将散列输出限制为一个较小的值（例如）255 以获得最佳结果。

这种方法有很多好处，很容易总结：

*   概念简单
*   易于实施和测试
*   不锁定整个数据库以进行更新
*   可以支持更大的数据库
*   易于更换 DBM 组件

哈希可能甚至不需要加密安全；只是大多是统一的。DJB 的[cdb 哈希](http://cr.yp.to/cdb/cdb.txt)在大多数情况下运行良好。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-15T17:26:08.983

如果您在 Windows 上，那么您可以使用内置的 esent 数据库引擎。[http://blogs.msdn.com/windowssdk/archive/2008/10/23/esent-extensible-storage-engine-api-in-the-windows-sdk.aspx](http://blogs.msdn.com/windowssdk/archive/2008/10/23/esent-extensible-storage-engine-api-in-the-windows-sdk.aspx)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-02-26T15:28:32.407

你可以试试[JDBM](https://github.com/jankotek/JDBM3)。它是具有磁盘持久性的免费 (Apache 2) 键值存储。简单的 API 和高性能

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-14T15:22:47.777

[Postgres](http://www.postgresql.org/)或[HSQLDB](http://hsqldb.org/)甚至可能是[H2 数据库](http://www.h2database.com/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-04T03:47:06.957

db4o 非常便宜和快速，但它只能与 java 或 .net 一起使用

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-04T04:05:22.850

[火鸟](http://www.firebirdsql.org/)是你最好的朋友。

# asp.net-mvc - 如何在 IIS/ASP.NET 网站上使用 varnish/squid？

> ID：260814
> 
> 赞同：5
> 
> 时间：2008-11-04T03:48:13.243
> 
> 标签：asp.net-mvc, reverse-proxy

我正在一个有很多图像的网站上工作（想想 smugmug/flickr），从我读到的内容来看，flickr 使用 squid 作为图像缓存。我的图像将存储在 Amazon S3 上，因此缓存服务器也有助于节省托管费用。我想听听关于它的想法，它可以通过以下配置来实现。

1.  我的 ASP.NET/MVC 应用程序在专用 Windows 服务器上运行。
2.  varnish 在来自 SliceHost.com 或 Linode.com 的单独 linux 服务器上运行（很可能我想缓存较小尺寸的缩略图，因此小型 VPS 应该很好）。

这是可行的吗？我应该将域名指向运行 varnish 的服务器吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-04T15:45:39.580

我们只是在我们的 IIS/Windows 服务器前面放置了一个 Fedora linux 服务器。它运行 Varnish 和 Nginx 的组合，它的工作就像一个梦想。

在 Varnish 上，您可以选择性地缓存不同的文件类型、目录，或者直接通过。

唯一的缺点是它不支持 SSL。所以我们安装了 Nginx 来处理 SSL 的反向代理。没有缓存，但效果很好！

所以，这是非常可行的，根据我的指标，我们的容量增加了 66%。

我唯一的建议是测试测试测试并与 VCL 亲密接触。

# c# - C# 中的“按合同设计”

> ID：260817
> 
> 赞同：39
> 
> 时间：2008-11-04T03:50:30.197
> 
> 标签：c#, design-by-contract

我想在我最新的 C# 应用程序中尝试一些按合同约定的设计，并希望语法类似于：

```
public string Foo()
{
    set {
        Assert.IsNotNull(value);
        Assert.IsTrue(value.Contains("bar"));
        _foo = value;
    }
} 
```

我知道我可以从单元测试框架中获得这样的静态方法，但我想知道这样的东西是否已经内置到语言中，或者是否已经存在某种框架。我可以编写自己的 Assert 函数，只是不想重新发明轮子。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2008-11-06T04:48:31.903

> ## C# 4.0 代码契约

Microsoft 在 .net 框架的 4.0 版中发布了一个按合同设计的库。该库最酷的功能之一是它还附带了一个静态分析工具（我猜类似于 FxCop），该工具利用了您放置在代码上的合约的详细信息。

以下是一些微软资源：

*   [微软研究院的主要站点](http://research.microsoft.com/en-us/projects/contracts/)
*   [用户手册](http://research.microsoft.com/en-us/projects/contracts/userdoc.pdf)
*   [2008 年 PDC 演示文稿](http://channel9.msdn.com/pdc2008/TL51/)
*   [2009 年 PDC 演示文稿](http://microsoftpdc.com/Sessions/VTL01)

以下是一些其他资源：

*   [.NET 4.0 的代码合同 - Spec# 生效](http://codebetter.com/blogs/matthew.podwysocki/archive/2008/11/08/code-contracts-and-net-4-0-spec-comes-alive.aspx)
*   [.NET 代码合同和 TDD 是互补的](http://codebetter.com/blogs/matthew.podwysocki/archive/2008/11/14/net-code-contracts-and-tdd-are-complementary.aspx)
*   [代码合同入门 - 第 5 部分：利用对象不变量](http://devlicio.us/blogs/derik_whittaker/archive/2009/07/01/code-contracts-primer-part-5-utilizing-object-invariants.aspx)
*   [代码合同入门 - 第 6 部分接口合同](http://devlicio.us/blogs/derik_whittaker/archive/2010/05/14/code-contracts-primer-part-6-interface-contracts.aspx)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-11-04T03:55:50.420

[Spec#](http://en.wikipedia.org/wiki/Spec_sharp)是一个流行的[微软研究项目](http://research.microsoft.com/SpecSharp/)，它允许一些 DBC 构造，例如检查后置条件和前置条件。例如，可以使用前置条件和后置条件以及循环不变量来实现二进制搜索。[这个例子和更多：](http://www.rosemarymonahan.com/specsharp/)

```
 public static int BinarySearch(int[]! a, int key)
    requires forall{int i in (0: a.Length), int j in (i: a.Length); a[i] <= a[j]};
    ensures 0 <= result ==> a[result] == key;
    ensures result < 0 ==> forall{int i in (0: a.Length); a[i] != key};
 {
   int low = 0;
   int high = a.Length - 1;

   while (low <= high)
     invariant high+1 <= a.Length;
     invariant forall{int i in (0: low); a[i] != key};
     invariant forall{int i in (high+1: a.Length); a[i] != key};
   {
     int mid = (low + high) / 2;
     int midVal = a[mid];

     if (midVal < key) {
       low = mid + 1;
     } else if (key < midVal) {
       high = mid - 1;
     } else {
       return mid; // key found
     }
   }
   return -(low + 1);  // key not found.
 } 
```

请注意，使用 Spec# 语言会产生对 DBC 结构的*编译时检查*，这对我来说是利用 DBC 的最佳方式。通常，依赖运行时断言成为生产中的一个令人头疼的问题，人们通常选择[使用异常](https://stackoverflow.com/questions/117171/design-by-contract-tests-by-assert-or-by-exception)来代替。

还有[其他语言](http://en.wikipedia.org/wiki/Design_by_contract#Language_support)将 DBC 概念作为一流的结构，即[Eiffel](http://en.wikipedia.org/wiki/Eiffel_(programming_language))，它也可用于 .NET 平台。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-11-04T03:54:48.580

除了使用外部库之外，您在 System.Diagnostics 中有一个简单的断言：

```
using System.Diagnostics

Debug.Assert(value != null);
Debug.Assert(value == true); 
```

不是很有用，我知道。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2010-07-01T07:07:29.697

.net Fx 4.0 中有一个答案：

System.Diagnostics.Contracts

[http://msdn.microsoft.com/en-us/library/dd264808.aspx](http://msdn.microsoft.com/en-us/library/dd264808.aspx)

```
Contract.Requires(newNumber > 0, “Failed contract: negative”);
Contract.Ensures(list.Count == Contract.OldValue(list.Count) + 1); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-04T05:03:03.310

[查看 Moq 的代码，我看到他们使用了一个名为“Guard”的类，它提供了用于检查前置条件和后置条件的静态方法](http://code.google.com/p/moq/source/browse/trunk/Source/Guard.cs)。我认为那很整洁，很清楚。它表达了我在代码中通过合同检查实现设计时的想法。

例如

```
public void Foo(Bar param)
{
   Guard.ArgumentNotNull(param);
} 
```

我认为这是通过合同检查来表达设计的一种巧妙方式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-04T05:00:41.567

您可能想查看[nVentive Umbrella](http://www.codeplex.com/umbrella)：

```
using System;
using nVentive.Umbrella.Validation;
using nVentive.Umbrella.Extensions;

namespace Namespace
{
    public static class StringValidationExtensionPoint
    {
        public static string Contains(this ValidationExtensionPoint<string> vep, string value)
        {
            if (vep.ExtendedValue.IndexOf(value, StringComparison.InvariantCultureIgnoreCase) == -1)
                throw new ArgumentException(String.Format("Must contain '{0}'.", value));

            return vep.ExtendedValue;
        }
    }

    class Class
    {
        private string _foo;
        public string Foo
        {
            set
            {
                _foo = value.Validation()
                    .NotNull("Foo")
                    .Validation()
                    .Contains("bar");
            }
        }
    }
} 
```

我希望验证扩展是构建器，所以你可以这样做`_foo = value.Validation().NotNull("Foo").Contains("bar").Value;`，但它就是这样（幸运的是它是开源的，所以让它成为一个构建器是一个微不足道的改变）。

作为替代解决方案，您可以[考虑域验证](http://www.codethinked.com/post/2008/10/12/Thoughts-On-Domain-Validation-Part-1.aspx)。

最后，[作为 Oslo 的一部分，](http://msdn.microsoft.com/en-us/oslo/default.aspx)[新的 M 语言](http://msdn.microsoft.com/en-us/library/dd129617.aspx)支持对其范围和字段的限制，这些限制可以转换为 T-SQL 验证和具有功能验证测试的 CLR 类（尽管 Oslo 距离发布还有很长时间）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-02-26T01:25:40.597

对于我当前的项目（2010 年 2 月，VS 2008），我选择了[http://lightcontracts.codeplex.com/](http://lightcontracts.codeplex.com/)

简单，它只是运行时验证，没有任何奇怪的复杂性，你不需要从一些“奇怪的”基类派生，没有 AOP，在某些开发人员工作站上不起作用的 VS 集成等。

简单大于复杂。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-03-04T10:54:54.270

最直接的方法，以及 .NET Framework 本身使用的方法是：

```
public string Foo()
{
    set {
        if (value == null)
            throw new ArgumentNullException("value");
        if (!value.Contains("bar"))
            throw new ArgumentException(@"value should contain ""bar""", "value");

        _foo = value;
    }
} 
```

# java - 访问另一个 Web 应用程序的会话

> ID：260823
> 
> 赞同：7
> 
> 时间：2008-11-04T03:53:06.057
> 
> 标签：java, session, war, httpsession

是否可以在 J2EE 应用程序 (EAR) 中配置两个单独的 Web 应用程序 (WAR) 以访问共享会话上下文？

更多信息：

我最终从 EAR 创建了一个共享类，它将所需的信息存储在静态成员中。这成功了，即使它看起来像一个肮脏的黑客。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-04T04:10:33.680

不是直接的。大多数容器将每个 WAR 放在一个单独的类加载器中，并将 EAR 类加载器作为其父类。每个应用程序的会话都是独立的。您可以在每个会话中放入父 EAR 提供的内容。如果您需要他们共享某些内容，请将其设为 EAR 功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-04T04:11:00.093

据我所读和所见，不可能在不同的 web 应用程序之间共享会话。您只能序列化会话以在同一 web 应用程序的实例之间传输。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-12T09:31:44.253

对此没有“标准”解决方案。但是，许多应用服务器对此都有自己的扩展。例如，WebSpere 有一个“共享会话上下文”选项。

请参阅此处： http: [//publib.boulder.ibm.com/infocenter/wasinfo/v6r0/index.jsp ?topic=/com.ibm.websphere.base.doc/info/aes/ae/tprs_sharing_data.html](http://publib.boulder.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/tprs_sharing_data.html)

# uac - 即使不需要特权，应用程序也不会在 UAC 下运行

> ID：260825
> 
> 赞同：1
> 
> 时间：2008-11-04T03:53:09.533
> 
> 标签：uac

我们在长期启用 UAC 的情况下运行我们开发的应用程序时遇到了严重问题。

安装后（安装程序几乎立即与 UAC 一起失败）似乎可以打开 UAC 并使应用程序工作。但是，一段时间后，它将停止工作，出现关于找不到刚刚创建的文件的奇怪错误。

只是为了弄清楚这一点：

```
XP作为管理员：很好  
XP 作为受限用户：很好
Vista 没有 UAC 管理员：很好
Vista无UAC限制：很好
Vista UAC 管理员：失败
Vista UAC 有限：失败

```

该软件在任何地方都没有权限检查。如果我正确理解文档，任何作为受限用户工作的东西都应该使用 UAC；然而事实证明并非如此。

编辑：我必须为提出比最初出现的问题更难的问题道歉。事实上，我们在文件夹虚拟化中发现了至少一个错误，并且认为还有更多错误。此时，让它运行的唯一合理希望是找到一个可以作为受限用户执行的 API 调用，该调用禁用调用进程及其产生的任何进程的文件夹虚拟化（递归）。我们不能只添加清单的原因是软件调用第三方软件实际上可能因机器而异。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-04T08:44:46.437

在 Windows Vista 上查找文件系统和注册表的虚拟化。如果您的应用程序使用文件系统和/或注册表的某些部分，您会发现您的应用程序“工作” - 也就是说，API 成功且没有错误 - 但数据并未存储在您期望的位置。特别是，许多本来可以在一台机器上的多个用户之间共享的区域现在已经越界了，数据实际上进入了特定于当前用户的一些存储中。稍后您会发现用户实际上并没有共享相同的数据。

有一种方法可以阻止这种虚拟化的发生。为您的应用程序提供一个清单文件，说明它知道 UAC，如此处所述... [http://msdn.microsoft.com/en-us/library/bb756929.aspx](http://msdn.microsoft.com/en-us/library/bb756929.aspx)。

您在清单文件中要求的特权级别并不重要。它的存在表明您的应用程序理解 UAC，并且操作系统不会尝试聪明并虚拟化对文件系统或注册表的“特权”区域的访问。如果您没有必要的权限来访问这些东西，API 调用将简单地失败，这将使您更容易调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-11T21:26:40.460

经过这么长时间，我找到了一个可行的解决方案。

1.  安装在程序文件之外的其他地方。这巧妙地避开了似乎导致所有问题的文件系统虚拟化。

2.  在应用程序的 HLKM 注册表项上禁用虚拟化。这修复了涉及系统更新的一个剩余故障。

参考资料：[http://msdn.microsoft.com/en-us/library/aa965884%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa965884%28VS.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T04:01:12.937

应用程序在哪里尝试写入文件？如果它试图在 Program Files 下写入它的安装位置，您可能会遇到奇怪的错误，因为在 Vista 下不允许在此处写入，并且此处创建的任何文件实际上都是在其他地方的虚拟文件夹中创建的 - 尽管对于应用程序来说，它们（通常）似乎是在它期望的地方。

您可能想尝试在 XP 兼容模式下运行该应用程序。

# c# - 单元测试 MSBuild 自定义任务，没有“任务在初始化之前尝试记录”错误

> ID：260847
> 
> 赞同：28
> 
> 时间：2008-11-04T04:05:33.737
> 
> 标签：c#, msbuild, msbuild-task, invalidoperationexception

我编写了一些运行良好的 MSBuild 自定义任务，并在我们的 CruiseControl.NET 构建过程中使用。

我正在修改一个，并希望通过调用任务的 Execute() 方法对其进行单元测试。

但是，如果它遇到包含

```
Log.LogMessage("some message here"); 
```

它抛出一个 InvalidOperationException：

*任务在初始化之前尝试记录。消息是...*

有什么建议么？（过去，我在自定义任务中主要使用单元测试内部静态方法来避免此类问题。）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-11-20T14:12:07.433

您需要设置您正在调用的自定义任务的 .BuildEngine 属性。

您可以将其设置为当前任务使用的相同 BuildEngine 以无缝包含输出。

```
Task myCustomTask = new CustomTask();
myCustomTask.BuildEngine = this.BuildEngine;
myCustomTask.Execute(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-11-13T17:57:37.637

我发现除非任务在 msbuild 中运行，否则日志实例不起作用，因此我通常将我对 Log 的调用包装起来，然后检查 BuildEngine 的值以确定我是否在 msbuild 中运行。如下。

蒂姆

```
private void LogFormat(string message, params object[] args)
{
    if (this.BuildEngine != null)
    {
        this.Log.LogMessage(message, args);
    }
    else
    {
        Console.WriteLine(message, args);
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2011-04-10T10:09:16.727

@Kiff 对 mock/stub IBuildEngine 的评论是个好主意。这是我的 FakeBuildEngine。提供了 C# 和 VB.NET 示例。

**VB.NET**

```
Imports System
Imports System.Collections.Generic
Imports Microsoft.Build.Framework

Public Class FakeBuildEngine
    Implements IBuildEngine

    // It's just a test helper so public fields is fine.
    Public LogErrorEvents As New List(Of BuildErrorEventArgs)
    Public LogMessageEvents As New List(Of BuildMessageEventArgs)
    Public LogCustomEvents As New List(Of CustomBuildEventArgs)
    Public LogWarningEvents As New List(Of BuildWarningEventArgs)

    Public Function BuildProjectFile(
        projectFileName As String, 
        targetNames() As String, 
        globalProperties As System.Collections.IDictionary, 
        targetOutputs As System.Collections.IDictionary) As Boolean
        Implements IBuildEngine.BuildProjectFile

        Throw New NotImplementedException

    End Function

    Public ReadOnly Property ColumnNumberOfTaskNode As Integer 
        Implements IBuildEngine.ColumnNumberOfTaskNode
        Get
            Return 0
        End Get
    End Property

    Public ReadOnly Property ContinueOnError As Boolean
        Implements IBuildEngine.ContinueOnError
        Get
            Throw New NotImplementedException
        End Get
    End Property

    Public ReadOnly Property LineNumberOfTaskNode As Integer
        Implements IBuildEngine.LineNumberOfTaskNode
        Get
            Return 0
        End Get
    End Property

    Public Sub LogCustomEvent(e As CustomBuildEventArgs)
        Implements IBuildEngine.LogCustomEvent
        LogCustomEvents.Add(e)
    End Sub

    Public Sub LogErrorEvent(e As BuildErrorEventArgs)
        Implements IBuildEngine.LogErrorEvent
        LogErrorEvents.Add(e)
    End Sub

    Public Sub LogMessageEvent(e As BuildMessageEventArgs)
        Implements IBuildEngine.LogMessageEvent
        LogMessageEvents.Add(e)
    End Sub

    Public Sub LogWarningEvent(e As BuildWarningEventArgs)
        Implements IBuildEngine.LogWarningEvent
        LogWarningEvents.Add(e)
    End Sub

    Public ReadOnly Property ProjectFileOfTaskNode As String
        Implements IBuildEngine.ProjectFileOfTaskNode
        Get
            Return "fake ProjectFileOfTaskNode"
        End Get
    End Property

End Class 
```

**C＃**

```
using System;
using System.Collections.Generic;
using Microsoft.Build.Framework;

public class FakeBuildEngine : IBuildEngine
{

    // It's just a test helper so public fields is fine.
    public List<BuildErrorEventArgs> LogErrorEvents = new List<BuildErrorEventArgs>();

    public List<BuildMessageEventArgs> LogMessageEvents = 
        new List<BuildMessageEventArgs>();

    public List<CustomBuildEventArgs> LogCustomEvents = 
        new List<CustomBuildEventArgs>();

    public List<BuildWarningEventArgs> LogWarningEvents =
        new List<BuildWarningEventArgs>();

    public bool BuildProjectFile(
        string projectFileName, string[] targetNames, 
        System.Collections.IDictionary globalProperties, 
        System.Collections.IDictionary targetOutputs)
    {
        throw new NotImplementedException();
    }

    public int ColumnNumberOfTaskNode
    {
        get { return 0; }
    }

    public bool ContinueOnError
    {
        get
        {
            throw new NotImplementedException();
        }
    }

    public int LineNumberOfTaskNode
    {
        get { return 0; }
    }

    public void LogCustomEvent(CustomBuildEventArgs e)
    {
        LogCustomEvents.Add(e);
    }

    public void LogErrorEvent(BuildErrorEventArgs e)
    {
        LogErrorEvents.Add(e);
    }

    public void LogMessageEvent(BuildMessageEventArgs e)
    {
        LogMessageEvents.Add(e);
    }

    public void LogWarningEvent(BuildWarningEventArgs e)
    {
        LogWarningEvents.Add(e);
    }

    public string ProjectFileOfTaskNode
    {
        get { return "fake ProjectFileOfTaskNode"; }
    }

} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-11-08T12:12:28.637

如果你已经实现了 ITask 接口，你将不得不自己初始化 Log 类。

否则，您应该只从Microsoft.Build.Utilities.dll中的**Task**继承，它实现了**ITask**并为您做了大量的工作。

这是构建自定义任务的参考页面，它解释了很多。

[构建自定义 MSBuild 任务参考](http://msdn.microsoft.com/en-us/library/t9883dzc.aspx)

另外值得一看的是

[如何调试自定义 MSBuild 任务](http://blogs.msdn.com/msbuild/archive/2005/09/28/474951.aspx)

除此之外，您可以发布用于调用自定义任务的 MSBuild XML。代码本身显然是最有帮助的:-)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-03-04T22:14:31.953

我有同样的问题。我通过存根构建引擎来解决它。像这样（AppSettings 是 MsBuild 任务名称）：

```
using Microsoft.Build.Framework;
using NUnit.Framework;
using Rhino.Mocks;

namespace NameSpace
{
    [TestFixture]
    public class Tests
    {
        [Test]
        public void Test()
        {
            MockRepository mock = new MockRepository();
            IBuildEngine engine = mock.Stub<IBuildEngine>();

            var appSettings = new AppSettings();
            appSettings.BuildEngine = engine;
            appSettings.Execute();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-01T07:47:27.817

In assembly `System.Web`in`namespace` `System.Web.Compilation`是一个以描述 Tim Murphy 的方式`MockEngine`实现的类。`IBuildEngine` `interface`

# astronomy - 交互式数据语言，IDL：有人关心吗？

> ID：260851
> 
> 赞同：14
> 
> 时间：2008-11-04T04:09:09.563
> 
> 标签：astronomy, idl-programming-language

有人使用称为交互式数据语言（IDL）的语言吗？它很受科学家欢迎。我认为它是一种糟糕的语言，因为它是专有的（运行它的每个终端都必须购买昂贵的许可证）并且它的支持很少（尝试搜索 IDL，这种语言，现在在堆栈上）。我试图说服我的同事停止使用它并学习 C/C++/Python/Fortran/Java/Ruby。有没有人足够了解甚至关心 IDL 并对此发表意见？你怎么看呢？我应该告诉我的同事现在不要再在这上面浪费时间了吗？我怎样才能说服他们？

编辑：人们得到的印象是我不知道或不使用 IDL。另外，我说 IDL 的支持很少，这在某种意义上是正确的，所以我必须澄清一下，科学图书馆确实很大。我一直使用 IDL，但这正是问题所在：我只使用 IDL，因为同事使用它。IDL 使用了一种文件格式，即 .sav，它只能在 IDL 中打开。所以我必须使用 IDL 来处理这些数据并将数据传回给同事，但我知道我使用另一种语言会更有效率。这就像有人在电子邮件附件中向您发送了一个 microsoft word 文件，如果您不明白这是多么错误，那么您可能写了太多单词而没有足够的代码，然后您购买了 microsoft word。

编辑：作为 IDL Python 的替代品很受欢迎。这是来自[AstroBetter](http://www.astrobetter.com/)[的 IDL 的优点](http://www.astrobetter.com/idl/idl-vs-python/)（和缺点）列表：

IDL 的优点

*   成熟的许多数值和天文库可用
*   广泛的天文用户群
*   数字方面与语言本身很好地结合在一起
*   许多本地用户经验丰富
*   小阵列更快
*   安装更简单
*   好的，统一的文档
*   标准 GUI 运行/调试工具 (IDLDE)
*   单一小部件系统（无需担心选择或学习）
*   保存/恢复功能
*   使用关键字参数作为标志更方便

IDL 的缺点

*   适用性窄，不太适合一般编程
*   大型阵列较慢
*   阵列功能不太强大
*   表支持差
*   使用 C 或 Fortran 扩展的能力有限，此类扩展难以分发和支持
*   与没有或负担不起许可证的其他人合作昂贵，有时会出现问题。
*   闭源（只有 RSI 可以修复错误）
*   与 IRAF 任务集成非常尴尬
*   内存管理更尴尬
*   单个小部件系统（如果在另一个框架中工作则无用）
*   绘图：
    *   对符号和数学文本的尴尬支持
    *   许多字体系统，可移植性问题（v5.1有所缓解）
    *   不灵活或可扩展
    *   绘图窗口本质上不是交互式的（例如，平移和缩放）

Python的优点

*   非常通用且功能强大的编程语言，但易于学习。强大但可选的面向对象编程支持
*   非常大的用户和开发者社区，非常广泛的图书馆基础
*   使用 C、C++ 或 Fortran 非常可扩展，提供可移植的分发机制
*   自由; 非限制性许可；开源
*   成为天文学的标准脚本语言
*   易于使用 IRAF 任务
*   STScI 应用工作的基础
*   更通用的阵列功能
*   对大数组更快，更好地支持内存映射
*   许多书籍和在线文档资源可用（用于语言及其库）
*   更好地支持表结构
*   绘图
    *   框架（matplotlib）更具扩展性和通用性
    *   更好的字体支持和可移植性（也只有一种方法）
    *   可用于许多窗口框架（GTK、Tk、WX、Qt…）
    *   独立于所用框架的标准绘图功能
    *   绘图可嵌入其他 GUI
    *   更强大的图像处理（多个同步 LUTS、可选的重新采样/重新缩放、alpha 混合等）
*   支持许多小部件系统
*   对 Python 开发能力的强大本地影响

Python的缺点

*   更多需要单独安装的项目
*   在天文学界不太被接受（但支持明显增长）
*   科学图书馆不那么成熟：
    *   文档不完整，不统一
    *   没有那么深入的天文图书馆和实用程序
    *   并非所有 IDL 数值库函数在 Python 中都有相应的功能
*   一些数字结构与语言不太一致（或不如 IDL 方便）
*   数组索引约定“向后”</li>
*   小阵列性能较慢
*   没有标准的 GUI 运行/调试工具
*   支持许多小部件系统（担心选择哪个）
*   当前缺少相当于 IDL 中的 SAVE/RESTORE 的功能
*   matplotlib 还没有所有 IDL 2-D 绘图功能的等效项（例如，曲面图）
*   使用用作标志的关键字参数不太方便
*   绘图：
    *   比较不成熟，还有很大的发展空间
    *   缺少一些绘图类型（例如，表面）
    *   3-d 能力需要 VTK（尽管 matplotlib 有一些基本的 3-d 能力）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2011-10-03T19:05:51.810

这里有这么多 IDL 粉丝！我也是一名天文学家，我广泛使用 IDL 和 Python。我只能说，IDL 之所以能幸存至今，是因为天文学家同行的懒惰，他们不能或不想学习新的更好的编程语言。除了 Fortran 或 IDL，我的大多数同事都没有使用过其他任何东西。对他们来说，全世界只有 IDL。顺便说一句，许多年轻的天文学学生也都在研究 IDL，甚至不想检查 Fortran，或者上帝禁止 Python 或 C/C++。这些是程序员和数学家的语言，而不是天文学家的语言。

关于许可费。您的大学已经购买了多少个 IDL 版本，以及其中多少个？估计很多...

是的，继续购买新的 IDL 8.x 版本。我听说它的新绘图包允许您在生成绘图后修改部分绘图。哇！这太酷了！

ps IDL 中没有什么不能在 Python 中以更好、更简洁的方式完成。其中的大多数科学工具都是广泛且非常稳定的。在 matplotlib 中绘制各种图我没有任何问题。它的 GUI 工具非常出色且直观，与蹩脚的 IDL“小部件”没有什么不同。

这和我以前大学的情况很像，老教授有点被时间难住了，因为他们拒绝学习编程方面的任何新东西。他们变得没有竞争力并停止做任何重要的工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T18:24:35.710

我是辛辛那提儿童医院的 fMRI 研究员，多年来，这里的放射学研究人员一直使用 IDL 开发图像处理包（称为 CCHIPS）。这是一个非常完善的软件包，多年来已经有很多人扩展了它的实用性。尽管我几乎是 MATLAB 的铁杆用户，因此倾向于使用 SPM 之类的软件包进行 fMRI 图像处理，但我最终还是经常使用 CCHIPS 并编写/编辑一些 IDL 脚本。它不像 MATLAB 那样对我来说“舒适”（毕竟我们都有最喜欢的“空白”！），但它相当容易学习。

我想我的意思是……如果一个编程资源运行良好、建立良好、被许多人很好地使用，并且（最重要的是！）您的组织内仍有人愿意维护/调试/修改/扩展资源，那么就没有必要采取危言耸听的立场，即必须立即更换新的东西。如果您所在的机构中根本没有人愿意再维护一项资源，那可能会引起紧急关注。否则，我建议对你不喜欢的东西再熟悉一点，然后施加温和的压力来介绍你认为更好的选择，并用明确的改变理由来支持它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-11-09T04:57:16.310

我是一名气候科学家，我每天都使用 IDL。这是一种爱恨交织的关系。但我要在这里为 IDL 辩护，因为我认为你没有为与你合作的科学家们做出转变的充分理由。

该列表中唯一可行的 IDL 替代品是 Python 和全套科学库。即便如此，python 中的许多事情都比 IDL 更难或更冗长。像 C 和 Fortran 这样的语言对于分析数据集或制作一些数字的工具来说太低级了，而且它们缺乏交互式外壳。

大多数科学家都对获得问题的答案感兴趣，IDL、Matlab 和 NCL 等工具旨在帮助我们更快地获得答案。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-04T04:27:03.850

要打败你的敌人[，你必须学会​​它](http://en.wikipedia.org/wiki/IDL_(programming_language))，但不一定掌握它。

我会采用您最喜欢的语言并将其与 IDL 进行比较和对比。IDL有什么优势？有什么缺点？请您的同事向您展示一些他们最喜欢的用 IDL 编写的代码，并将其与您最喜欢的一些代码片段进行比较。这可能并不全是坏事——毕竟人们正在花大价钱使用它。

试图替换最喜欢的东西可能不是赢得朋友或赢得争论的好方法。如果您断定 IDL 仅提供微弱优势或没有优势，那么请尝试构建从较新的语言（例如 Ruby）到 IDL 的网关，以便人们可以结合使用其中任何一种。您可能正在尝试消除一种根深蒂固的文化，这种文化对 IDL 非常满意，非常感谢，但如果他们采用混合方法并最终用另一种语言替换他们的 IDL，因为另一种语言实际上更优越你会产生积极的影响。

无论如何，[我从来都不是范式转变的粉丝，而将](https://stackoverflow.com/questions/260769/converting-to-open-source#260813)时间和金钱浪费在一个工具上以获取另一个工具的意识形态利益是一个糟糕的商业决策。然而，在有意义的情况下，必须逐步淘汰旧的专有技术——尽管分阶段的方法是关键。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-05T10:21:58.470

作为博士 天文学专业的学生我大约一年前开始使用 IDL。我也不完全相信这种语言，并且肯定对它是专有的感到非常恼火（但请查看开源变体 GDL： http: [//gnudatalanguage.sourceforge.net/](http://gnudatalanguage.sourceforge.net/)）。然而，它是一种非常强大的语言，内置了许多科学家经常使用的工具和功能，例如，它可以开箱即用地进行各种拟合，并具有大量可供使用的图形绘图工具。此外，还有许多基于 IDL 的工具，例如 IDL 天文学用户库 ( [http://idlastro.gsfc.nasa.gov/](http://idlastro.gsfc.nasa.gov/)）。因此，虽然在一开始将所有这些工具实现为一种开放语言可能会更好，但恐怕现在有这么多人正在使用并且已经习惯了它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-05-23T05:14:20.547

如果成本是主要问题，并且您只需要 IDL 语言解释器本身，而不需要花哨的软件包，那么您可能会对 IDL 的免费克隆 Fawlty Language 感到满意。

（链接现在死了！）[http://fl.net23.net/](http://fl.net23.net/)

实际上，我已经用这个而不是 IDL 完成了向公众发布的实际工作，没有告诉老板，作为测试，并且成功了，但是我主要运行非 GUI 程序并进行交互式命令行工作。我上次检查时 GUI 小部件不完整。然而，就直接编程而言，Fawlty 远远领先于 GDL。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-06-11T20:28:47.203

我是一名天文学家，使用 IDL 已经很多年了。它有一些非常好的东西——例如，包括字符串数组的数组处理——并且有很多与天文学相关的例程可用。另一方面，作为一种语言，我更喜欢 python。成本是 IDL 许可证的一个问题——即使对于单个用户来说也不便宜。还有其他烦恼。IDL 默认制作的 PostScript 绘图不是很好。每次都指定粗线很烦人，而且字体有点难看。我已经开始使用 matplotlib python 模块，它有很多值得推荐的地方。例如，无需重新绘制绘图即可更改轴标题。我只希望我拥有所有用 python 为 matplotlib 编写的方便的 IDL 天文学库例程。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-03T20:45:44.187

好吧，我确实在堆栈上搜索了 IDL，这就是我到达这里的原因！:-)

我已经编程了将近 30 年，并且正在学习 IDL。到目前为止，我承认我并不太喜欢它。然而，它确实具有许多其他语言所没有的一些东西（例如，数学数组运算可以用一个命令完成，而不是循环或其他一些设备）。

正如其他人所说，IDL 的受欢迎程度在某种程度上是文化和根深蒂固的问题。大约 20 年前，我第一次听说 IDL。那时，我觉得 Stallman 有一些不错的想法和一些有用的工具，而 Linus 还没有发布他著名的 comp.os.minix 消息。因此，IDL 在任何具有竞争力的开源项目上都处于领先地位。据我所知，开源社区中还没有任何东西具有竞争力（我知道 GDL，但如果我没记错的话，它落后于 IDL ——我很乐意在这方面得到纠正）。最终，它可能会被取代，但我预计这不会很快发生。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-02T13:04:27.630

如果我错了，请纠正我，但你是否应该告诉你的同事“停止浪费他们的时间”在一种语言上，你不知道，但不喜欢，因为它是专有的？？？？

好吧，我认为这有点短视。首先，你应该问你的同事“他们为什么使用 IDL”。我已经断断续续地使用 IDL 大约十五年了，我想他们会告诉你“因为我可以快速完成我必须做的事情”。我用 IDL/C++/LabVIEW/Python/Pascal 编程已经 20 年了，我认为你应该使用最适合这份工作的语言/环境。我不会将 IDL 用于华而不实的用户界面应用程序，但对于千兆字节数据的分析和可视化，它很难被击败。（我当然不会为此使用 Python 或 Ruby！）

关于 IDL 是专有软件。没错（尽管您*不需要*昂贵的许可证来运行 IDL 应用程序。您可以使用虚拟机来运行应用程序，但您需要昂贵的（真正的）许可证来开发应用程序）。但是，专有性有什么问题？我的车是专有产品（我猜你的也是:-)），我的电视机、电话等也是如此。所以 IDL 是专有的，这意味着你不能更改语言（除了要求 ITTVIS 进行更改)，但你甚至不懂语言！所以有什么问题？（顺便说一句，提到了开源版本 GDL，还有其他（开源）替代方案）。你为 C++/Python/Ruby 等做出了多少贡献？

我希望专有论点不会（错误）使用，因为您不喜欢（高）许可费？确实有免费的（阅读：没有钱被转移）C++/Python/Java 编译器，但 ITTVIS 是一家商业公司，想要赚钱。好吧，我是一名专业程序员，虽然我支持开源思想，但我确实喜欢在月底获得报酬（猜猜这笔钱必须从哪里来：-））。（顺便说一句，我不是 ITTVIS 的员工。）

所以，简而言之。如果您认为 IDL 太昂贵，那没关系（但不要使用专有参数）。有替代品，您可以自由选择！但是在你（要求你的同事）转换之前，问问自己这对你的生产力有什么影响！您可能会节省几千美元的许可费，但如果完成一项工作需要 10 倍的时间............

亲切的问候

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-07-22T20:11:29.153

我在医学影像研究实验室使用 IDL 已经 8 年了。我还使用 MATLAB、LabVIEW 和 Visual C++。

IDL 成本：编程终端确实需要 IDL 许可证。但是，如果您可以忍受启动画面，您可以在任何终端上的免费“虚拟机”下运行您的 IDL 应用程序。此外，许多其他语言/开发环境的成本与 IDL 一样多（如果您合法使用它们）。在这所大学，Visual Studio 的每个许可证比 IDL 更贵。

IDL/MATLAB 与 Visual C++/etc：您可以在 IDL 中用一天时间编写程序或 GUI 应用程序，而用 C++/Visual C++ 编写需要一周时间——这是我们专业的 Visual C++ 程序员的一句话。IDL 只需要两周的时间来学习，并且有一本很棒的书可以学习。当然，如果添加 Visual GUI，C++ 程序会运行得更快，并且可以使用更多控件。但是，如果您想通过用户界面对算法或应用程序进行原型分析以分析数据，IDL（或 MATLAB）将为您节省大量时间。

IDL vs MATLAB：IDL 比 MATLAB 稍微冗长一些，并且没有用户群或工具箱的数量，但它确实拥有的主要用户论坛非常好，有许多响应专家。过去，IDL GUI 编程接口非常出色，尽管 MATLAB 可能已经赶上了——我仍然更喜欢编写 IDL“小部件”。此外，IDL 的内置功能有时似乎有更多的“内置”功能，这可能会弥补其较小的用户群。一个很好的例子是 convolve 命令：IDL 中的“convol”与 MATLAB 中的“conv”。该命令在 IDL 中是一个较长的单词，但也包含用于规范化结果以及处理无效数据和边缘效应的标志。MATLAB 语法更加优雅简洁，而且它'

相信我：如果您想花更多时间处理数据而不是处理代码，那么学习 IDL 和 MATLAB 等“科学数据”语言是值得的。我不会说一种比另一种更好，但是像这样的语言在实验室中是不可或缺的，尤其是成像实验室。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-07-23T15:19:04.433

当我开始学习 IDL 时，我也有类似的想法——我仍然不喜欢它，但我现在有一些我在 SolarSoft（太阳物理学的软件分发系统......大多数软件都在 IDL 中）。

IDL 擅长处理大型数据立方体和数字图像，如果您了解 Fortran，则相当容易学习。（大多数年长的科学家都是这样做的，我不得不以非 CompE 的工科学生的身份上大学）

问题是——IDL 中有很多代码。将其全部转换为其他语言并对其进行必要测试的成本简直是天文数字。我老板的估计是这需要十几个人年，我们需要了解 IDL、任何新语言和实际科学的人，这样他们才能理解代码的逻辑存在的原因（而不仅仅是一些奇怪的东西语言）。...然后您必须考虑对所有科学家进行再培训。在我们目前的资金水平上，这不会发生。

综上所述，我希望*他们*的 Regex 引擎使用 PCRE 或至少支持零宽度断言。他们终于做到了，所以我可以将一个字符串传递给 XML 解析器，而不必先将其写入文件，但我仍在等待真正的 SOAP 支持，而不是我的 hack 尝试。我必须解决一些限制，比如没有零元素数组（我使用指向数组的指针，所以我可以留下一个空指针）、命名空间（我用对象伪造它）和缺乏 XPath 支持（当我看到一些奇怪的问题时）在遍历 DOM 树之后，树中元素每翻一番，清理时间就会翻四倍……我不得不将大型记录集作为税分隔符返回，而不是 XML，但希望测试他们的 VOTable 实现是否有相同的问题）

在这一点上，我并不是建议人们停止使用 IDL——但我*正在*努力让人们停止将他们的数据目录作为 IDL 保存文件存储和分发，因为限制使用 IDL 以外的任何东西读取它们。而且我知道一些努力为科学家提供服务以运行他们的数据准备，希望他们可以摆脱要求科学家拥有 IDL 才能使用数据的要求。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-08-03T19:18:45.903

我是地球科学的博士后，并且广泛使用 IDL 来处理大型数据集。我不得不说它很容易使用（对我和其他许多人来说），如果它为我节省了数百小时调试 c 内存错误的时间，那么它很容易值得支付许可费用（我也有 CS 学位） ，所以我知道“真正的”编程语言）。

听起来您的问题不在于 IDL，而在于文件格式。与其说服您的同事使用不同的语言，不如说服他们使用不同的文件格式。我几乎从未使用过 .sav 文件，我总是使用常见的数据格式，例如 geotiff、HDF、netCDF，甚至适当的简单二进制或 ASCII。这样，我所有的同事都可以使用他们选择的语言来阅读它。

我来到这里寻找有关使用 IDL 和 SOAP 的信息，遗憾的是，上面的评论赢得了 google 竞赛。现在，如果我能找到一些关于它的实际信息就好了:)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2010-02-09T09:56:22.573

也许这可能对某人有所帮助：GDL 确实处理（读取和写入）IDL .sav 文件。SAVE 和 RESTORE 例程是在免费的 CMSV 库（用 IDL 编写）的帮助下实现的。

此外，GDL 可以构建为 Python 模块——然后也可以使用 Python 中的 .sav 文件。GDL 中的 Python 支持仍然使用 numarray 包，因此它可能不是很方便。

# javascript - 动态更改网站图标

> ID：260857
> 
> 赞同：426
> 
> 时间：2008-11-04T04:11:55.643
> 
> 标签：javascript, html, dom, favicon

我有一个根据当前登录的用户标记的 Web 应用程序。我想将页面的 favicon 更改为私有标签的徽标，但我找不到任何代码或任何示例去做这个。有没有人成功地做到过这一点？

我正在想象一个文件夹中有十几个图标，并且对要使用的 favicon.ico 文件的引用只是与 HTML 页面一起动态生成的。想法？

* * *

## 回答 #1

> 赞同：502
> 
> 时间：2008-11-04T04:21:38.243

为什么不？

```
var link = document.querySelector("link[rel~='icon']");
if (!link) {
    link = document.createElement('link');
    link.rel = 'icon';
    document.getElementsByTagName('head')[0].appendChild(link);
}
link.href = 'https://stackoverflow.com/favicon.ico'; 
```

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2010-06-08T07:46:30.603

这是一些适用于 Firefox、Opera 和 Chrome 的代码（与此处发布的所有其他答案不同）。这是[在 IE11 中](http://www.enhanceie.com/test/favicon/dynamic.htm)也可以使用的不同代码演示。以下示例可能不适用于 Safari 或 Internet Explorer。

```
/*!
 * Dynamically changing favicons with JavaScript
 * Works in all A-grade browsers except Safari and Internet Explorer
 * Demo: http://mathiasbynens.be/demo/dynamic-favicons
 */

// HTML5™, baby! http://mathiasbynens.be/notes/document-head
document.head = document.head || document.getElementsByTagName('head')[0];

function changeFavicon(src) {
 var link = document.createElement('link'),
     oldLink = document.getElementById('dynamic-favicon');
 link.id = 'dynamic-favicon';
 link.rel = 'shortcut icon';
 link.href = src;
 if (oldLink) {
  document.head.removeChild(oldLink);
 }
 document.head.appendChild(link);
} 
```

然后，您将按如下方式使用它：

```
var btn = document.getElementsByTagName('button')[0];
btn.onclick = function() {
 changeFavicon('http://www.google.com/favicon.ico');
}; 
```

[分叉](http://gist.github.com/428626)或[查看演示](http://mathiasbynens.be/demo/dynamic-favicons)。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2008-11-04T04:22:06.183

如果您有以下 HTML 片段：

```
<link id="favicon" rel="shortcut icon" type="image/png" href="favicon.png" /> 
```

例如，您可以通过更改此链接上的 HREF 元素来使用 Javascript 更改网站图标（假设您使用的是 JQuery）：

```
$("#favicon").attr("href","favicon2.png"); 
```

您还可以创建一个 Canvas 元素并将 HREF 设置为画布的 ToDataURL()，就像[Favicon Defender](http://www.p01.org/releases/DHTML_contests/files/DEFENDER_of_the_favicon/)所做的那样。

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2014-06-14T19:49:21.687

**jQuery版本：**

```
$("link[rel='shortcut icon']").attr("href", "favicon.ico"); 
```

甚至更好：

```
$("link[rel*='icon']").attr("href", "favicon.ico"); 
```

**香草 JS 版本：**

```
document.querySelector("link[rel='shortcut icon']").href = "favicon.ico";

document.querySelector("link[rel*='icon']").href = "favicon.ico"; 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2016-03-12T16:43:57.523

更现代的方法：

```
const changeFavicon = link => {
  let $favicon = document.querySelector('link[rel="icon"]')
  // If a <link rel="icon"> element already exists,
  // change its href to the given link.
  if ($favicon !== null) {
    $favicon.href = link
  // Otherwise, create a new element and append it to <head>.
  } else {
    $favicon = document.createElement("link")
    $favicon.rel = "icon"
    $favicon.href = link
    document.head.appendChild($favicon)
  }
} 
```

然后你可以像这样使用它：

```
changeFavicon("http://www.stackoverflow.com/favicon.ico") 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2008-11-04T04:20:50.243

favicon 在 head 标记中声明，如下所示：

```
<link rel="shortcut icon" type="image/ico" href="favicon.ico"> 
```

您应该能够在视图数据中传递您想要的图标的名称并将其放入 head 标记中。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2010-05-27T09:10:42.467

这是我用来向 Opera、Firefox 和 Chrome 添加动态网站图标支持的一些代码。我无法让 IE 或 Safari 正常工作。基本上Chrome允许动态网站图标，但`iframe`据我所知，它仅在页面位置（或其中的等）发生变化时更新它们：

```
var IE = navigator.userAgent.indexOf("MSIE")!=-1
var favicon = {
    change: function(iconURL) {
        if (arguments.length == 2) {
            document.title = optionalDocTitle}
        this.addLink(iconURL, "icon")
        this.addLink(iconURL, "shortcut icon")

        // Google Chrome HACK - whenever an IFrame changes location 
        // (even to about:blank), it updates the favicon for some reason
        // It doesn't work on Safari at all though :-(
        if (!IE) { // Disable the IE "click" sound
            if (!window.__IFrame) {
                __IFrame = document.createElement('iframe')
                var s = __IFrame.style
                s.height = s.width = s.left = s.top = s.border = 0
                s.position = 'absolute'
                s.visibility = 'hidden'
                document.body.appendChild(__IFrame)}
            __IFrame.src = 'about:blank'}},

    addLink: function(iconURL, relValue) {
        var link = document.createElement("link")
        link.type = "image/x-icon"
        link.rel = relValue
        link.href = iconURL
        this.removeLinkIfExists(relValue)
        this.docHead.appendChild(link)},

    removeLinkIfExists: function(relValue) {
        var links = this.docHead.getElementsByTagName("link");
        for (var i=0; i<links.length; i++) {
            var link = links[i]
            if (link.type == "image/x-icon" && link.rel == relValue) {
                this.docHead.removeChild(link)
                return}}}, // Assuming only one match at most.

    docHead: document.getElementsByTagName("head")[0]} 
```

要更改网站图标，只需`favicon.change("ICON URL")`使用上述内容即可。

（我基于此的代码归功于[http://softwareas.com/dynamic-favicons 。）](http://softwareas.com/dynamic-favicons)

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2021-03-06T08:24:05.313

这是使网站图标成为表情符号或文本的片段。当我在stackoverflow时，它在控制台中工作。

```
function changeFavicon(text) {
  const canvas = document.createElement('canvas');
  canvas.height = 64;
  canvas.width = 64;
  const ctx = canvas.getContext('2d');
  ctx.font = '64px serif';
  ctx.fillText(text, 0, 64);

  const link = document.createElement('link');
  const oldLinks = document.querySelectorAll('link[rel="shortcut icon"]');
  oldLinks.forEach(e => e.parentNode.removeChild(e));
  link.id = 'dynamic-favicon';
  link.rel = 'shortcut icon';
  link.href = canvas.toDataURL();
  document.head.appendChild(link);
}

changeFavicon('❤️'); 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2018-12-10T10:25:38.673

或者如果你想要一个表情:)

```
var canvas = document.createElement("canvas");
canvas.height = 64;
canvas.width = 64;

var ctx = canvas.getContext("2d");
ctx.font = "64px serif";
ctx.fillText("☠️", 0, 64); 

$("link[rel*='icon']").prop("href", canvas.toDataURL()); 
```

支持[https://koddsson.com/posts/emoji-favicon/](https://koddsson.com/posts/emoji-favicon/)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2011-01-24T16:19:50.057

使 IE 工作的唯一方法是设置您的 Web 服务器以处理对 *.ico 的请求以调用您的服务器端脚本语言（PHP、.NET 等）。还设置 *.ico 以重定向到单个脚本并让此脚本提供正确的网站图标文件。我敢肯定，如果您希望能够在同一个浏览器中的不同网站图标之间来回切换，那么缓存仍然会有一些有趣的问题。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2011-06-25T04:52:17.100

我会使用 Greg 的方法并为 favicon.ico 制作一个自定义处理程序这是一个有效的（简化的）处理程序：

```
using System;
using System.IO;
using System.Web;

namespace FaviconOverrider
{
    public class IcoHandler : IHttpHandler
    {
    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "image/x-icon";
        byte[] imageData = imageToByteArray(context.Server.MapPath("/ear.ico"));
        context.Response.BinaryWrite(imageData);
    }

    public bool IsReusable
    {
        get { return true; }
    }

    public byte[] imageToByteArray(string imagePath)
    {
        byte[] imageByteArray;
        using (FileStream fs = new FileStream(imagePath, FileMode.Open, FileAccess.Read))
        {
        imageByteArray = new byte[fs.Length];
        fs.Read(imageByteArray, 0, imageByteArray.Length);
        }

        return imageByteArray;
    }
    }
} 
```

然后，您可以在 IIS6 的 web 配置的 httpHandlers 部分中使用该处理程序，或使用 IIS7 中的“处理程序映射”功能。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-09-02T15:24:50.257

对于那些使用 jQuery 的人来说，有一个单行解决方案：

```
$("link[rel*='icon']").prop("href",'https://www.stackoverflow.com/favicon.ico'); 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-05-13T23:54:33.520

我在开发站点时一直使用此功能......所以我可以一目了然地看到哪个选项卡在其中运行本地、开发或产品。

现在 Chrome 支持 SVG favicon，这让它变得容易多了。

## Tampermonkey 脚本

在[https://gist.github.com/elliz/bb7661d8ed1535c93d03afcd0609360f 看一下指向我在 https://elliz.github.io/svg-favicon/](https://elliz.github.io/svg-favicon/)[上](https://gist.github.com/elliz/bb7661d8ed1535c93d03afcd0609360f)的演示站点的 tampermonkey 脚本

## 基本代码

从另一个答案改编而来......可以改进但足以满足我的需求。

```
(function() {
    'use strict';

    // play with https://codepen.io/elliz/full/ygvgay for getting it right
    // viewBox is required but does not need to be 16x16
    const svg = `
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
      <circle cx="8" cy="8" r="7.2" fill="gold" stroke="#000" stroke-width="1" />
      <circle cx="8" cy="8" r="3.1" fill="#fff" stroke="#000" stroke-width="1" />
    </svg>
    `;

    var favicon_link_html = document.createElement('link');
    favicon_link_html.rel = 'icon';
    favicon_link_html.href = svgToDataUri(svg);
    favicon_link_html.type = 'image/svg+xml';

    try {
        let favicons = document.querySelectorAll('link[rel~="icon"]');
        favicons.forEach(function(favicon) {
            favicon.parentNode.removeChild(favicon);
        });

        const head = document.getElementsByTagName('head')[0];
        head.insertBefore( favicon_link_html, head.firstChild );
    }
    catch(e) { }

    // functions -------------------------------
    function escapeRegExp(str) {
        return str.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
    }

    function replaceAll(str, find, replace) {
        return str.replace(new RegExp(escapeRegExp(find), 'g'), replace);
    }

    function svgToDataUri(svg) {
        // these may not all be needed - used to be for uri-encoded svg in old browsers
        var encoded = svg.replace(/\s+/g, " ")
        encoded = replaceAll(encoded, "%", "%25");
        encoded = replaceAll(encoded, "> <", "><"); // normalise spaces elements
        encoded = replaceAll(encoded, "; }", ";}"); // normalise spaces css
        encoded = replaceAll(encoded, "<", "%3c");
        encoded = replaceAll(encoded, ">", "%3e");
        encoded = replaceAll(encoded, "\"", "'"); // normalise quotes ... possible issues with quotes in <text>
        encoded = replaceAll(encoded, "#", "%23"); // needed for ie and firefox
        encoded = replaceAll(encoded, "{", "%7b");
        encoded = replaceAll(encoded, "}", "%7d");
        encoded = replaceAll(encoded, "|", "%7c");
        encoded = replaceAll(encoded, "^", "%5e");
        encoded = replaceAll(encoded, "`", "%60");
        encoded = replaceAll(encoded, "@", "%40");
        var dataUri = 'data:image/svg+xml;charset=UTF-8,' + encoded.trim();
        return dataUri;
    }

})(); 
```

只需将您自己的 SVG（如果您使用工具，可以使用 Jake Archibald 的 SVGOMG 清理）放入顶部的 const 中。确保它是方形的（使用 viewBox 属性），你就可以开始了。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-11-04T04:23:13.827

根据[WikiPedia](http://en.wikipedia.org/wiki/Favicon)`link` ，您可以使用该部分中的标签指定要加载哪个网站图标文件，`head`参数为`rel="icon"`.

例如：

```
 <link rel="icon" type="image/png" href="/path/image.png"> 
```

我想如果您想为该调用编写一些动态内容，您将可以访问 cookie，以便您可以通过这种方式检索会话信息并呈现适当的内容。

您可能会遇到文件格式（据报道 IE 仅支持它的 .ICO 格式，而大多数其他人都支持 PNG 和 GIF 图像）以及可能存在缓存问题，无论是在浏览器上还是通过代理。这可能是因为 favicon 的初衷，特别是用于标记带有站点迷你徽标的书签。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-07-25T11:33:22.697

**是的，完全有可能**

*   在 favicon.ico 之后使用**查询字符串**（和其他文件链接 - 请参阅下面的答案链接）
*   只需确保服务器使用正确的图像文件（可能是**静态**路由规则或 **动态**服务器端代码）响应“someUserId”。

例如

```
<link rel="shortcut icon" href="/favicon.ico?userId=someUserId"> 
```

然后，*无论您使用什么服务器端语言/框架*，都应该能够轻松地*根据 userId 找到该文件，*并*根据该请求提供*该文件。

**但是要正确地制作网站图标**（它实际上是一个***非常****复杂的主题*），请在此处查看答案[https://stackoverflow.com/a/45301651/661584](https://stackoverflow.com/a/45301651/661584)

**比自己解决所有细节**要容易得多。****

 **享受。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-12-13T04:32:57.393

我在我的项目中使用[favico.js](http://lab.ejci.net/favico.js/)。

它允许将 favicon 更改为一系列预定义的形状以及自定义形状。

在内部，它`canvas`用于渲染和`base64`用于图标编码的数据 URL。

该库还具有不错的功能：图标徽章和动画；据称，您甚至可以将网络摄像头视频流式传输到图标中 :)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2021-07-21T08:43:17.807

在大多数情况下，favicon 是这样声明的。

```
<link rel="icon" href"...." /> 
```

这样，您就可以通过 this 获得对它的引用。

```
const linkElement = document.querySelector('link[rel=icon]'); 
```

你可以用这个改变图片

```
linkElement.href = 'url/to/any/picture/remote/or/relative'; 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-11-19T19:49:02.430

在 Chrome 上测试 2021 年提出的解决方案，我发现有时浏览器会缓存 favicon 并且不显示更改，即使链接已更改

此代码有效（类似于之前的提议，但添加了一个随机参数以避免缓存）

```
let oldFavicon = document.getElementById('favicon')
var link = document.createElement('link')
link.id = 'favicon';
link.type = 'image/x-icon'
link.rel = 'icon';
link.href = new_favicon_url +'?=' + Math.random();
if (oldFavicon) {
    document.head.removeChild(oldFavicon);
}
document.head.appendChild(link); 
```

[从https://gist.github.com/mathiasbynens/428626#gistcomment-1809869](https://gist.github.com/mathiasbynens/428626#gistcomment-1809869)复制 ，以防其他人有同样的问题

# image - 如何将 BYTE* 转换为 gdi+ 图像对象？

> ID：260869
> 
> 赞同：2
> 
> 时间：2008-11-04T04:18:00.937
> 
> 标签：image, gdi+, byte, istream

我想将 BYTE* 转换为 gdi+ Image 对象。

我怎样才能做到这一点？

BYTE* 似乎是一个 Dib 点。

我发现 Image 有一个名为 Image::FromStream() 的方法可能会有所帮助，但我找不到任何关于如何将 BYTE* 转换为 IStream 对象的参考。我怎样才能做到这一点？

提前致谢！

**实际上，很难相信 MS 提供了 IStream 接口，但没有提供任何实现该接口的 c++ MemoryStream 类。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-04T09:52:40.057

[CreateStreamOnHGlobal](http://msdn.microsoft.com/en-us/library/aa378980(VS.85).aspx)将采用 HGLOBAL 并为您提供 IStream 指针。您需要使用 GlobalAlloc 分配足够的内存，然后将 BYTE 数组复制到 HGLOBAL 中。

如果你知道你得到的图像数据是一个 GDI DIB，你可以使用[GdipCreateBitmapFromGdiDib](http://msdn.microsoft.com/en-us/library/ms533971(VS.85).aspx)或相应的 Bitmap::Bitmap 构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-04T07:48:12.807

你知道`BYTE`指针指向的图像数据的格式吗？要使 Image 能够从流中构建自身，数据必须采用受支持的标准图像格式之一（GIF、PNG、JPEG 等）。

如果没有合适的“内存流”或类似的东西，IStream 接口看起来很简单，可以自己实现[。](http://msdn.microsoft.com/en-us/library/aa380034(VS.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-24T07:47:06.767

使用[`SHCreateMemStream`](https://docs.microsoft.com/en-us/windows/win32/api/shlwapi/nf-shlwapi-shcreatememstream),

```
IStream* stream = ::SHCreateMemStream({your BYTE array}, {size of the array});
Gdiplus::Image *img = Gdiplus::Image::FromStream(stream); 
```

# data-structures - 在磁盘上存储大量不同大小的对象

> ID：260885
> 
> 赞同：2
> 
> 时间：2008-11-04T04:30:30.693
> 
> 标签：data-structures, storage

我需要开发一个系统来存储大量（10 到 100 的数千个）对象。每个对象都类似于电子邮件 - 有一个主要文本正文和几个有限大小的辅助文本字段。正文的大小从几个字节到几个 KB。

每个项目都有一个唯一的 ID（可能是 GUID）来标识它。

仅当向其中添加对象时才会写入存储。会经常阅读。删除将是罕见的。数据几乎都是人类可读的文本，因此很容易压缩。

一个让我发出 I/O 并管理内存和缓存的系统将是理想的。

我将把索引保存在内存中，使用它将索引映射到对象的单个（和主）键。获得密钥后，我将从磁盘或缓存中加载它。

数据管理系统需要成为我的应用程序的一部分——我不想依赖操作系统服务。或单独安装的软件包。本机 (C++) 最好，但管理 (C#) 就可以了。

我相信数据库是一个显而易见的选择，但这需要超快的查找和加载到对象的内存中。我对数据库技术没有经验，我担心一般的关系系统无法有效地处理所有这些可变大小的数据。

（注意，这与我的工作无关——这是一个个人项目。）

根据您的经验，传统关系数据库的可行替代方案是什么？或者数据库会为此工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-04T07:54:40.653

我会尝试 PFS：http: [//blog.sensenet.hu/post/2008/05/Portal-File-System- (PFS)-an-open-source-content-repository-for-Net.aspx](http://blog.sensenet.hu/post/2008/05/Portal-File-System-(PFS)-an-open-source-content-repository-for-Net.aspx)

太糟糕了，你在 c/.Net 上，因为 Jackrabbit 本来是一个完美的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T08:14:45.450

查看[SQLite](http://www.sqlite.org)，它具有许多可用编程语言和环境的绑定，并且与[Berkeley DB](http://en.wikipedia.org/wiki/Berkeley_DB)一样，是磁盘上的数据库，无需安装数据库引擎。

如果您只是添加正确的索引，查找将非常快，并且由于它本质上是一个基于集合的数据库，您仍然可以进行批量查询和类似的查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T04:55:01.330

您并没有真正说明您将如何搜索这些数据。我已经对一些文本挖掘应用程序进行了一些类似的工作，其中主要数据存储在 MySQL 中，但我在 Ferret 中维护了一个文本搜索索引（该项目在 Ruby 中），以根据关键字搜索在消息表中找到适当的行。我认为这种混合方法也适用于您。SQLServer 和 Lucene.Net 在 C# 环境中可能很适合您。我敢肯定，如果您环顾四周，您可以在 C++ 领域找到类似的解决方案。

我不推荐使用 SQLServer 全文搜索——Lucene 及其衍生产品似乎是一个更好的选择。

我认为与基于文件的解决方案相比，几乎任何数据库解决方案都会让您有更好的运气。几乎任何现代数据库都应该能够处理您的数据需求，至少在空间方面是这样。在您的大字段上构建索引是另一回事，这就是为什么如果您需要搜索它，我会推荐一种文本挖掘方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-04T05:05:22.073

听起来就像 Berkeley DB 的设计目的。不过我没用过。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-04T05:15:52.830

也许你应该考虑一下像 Apache+mod-dav 这样的 WebDav-Server。这会将内容和元数据存储在磁盘上。对于搜索，您可以在此 WebDav 服务器上放置一个现有的搜索引擎，例如 Lucene。

通过这种方式，您可以将自己的开发保持在最低限度，并从一系列强大的功能开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-11T13:28:20.713

你看过[db4o](http://www.db4o.com/)或[Karvonite](http://code.msdn.microsoft.com/karvonite)吗？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-11-04T08:00:30.707

看看[一瞥](http://webglimpse.net/)。

# java - Canoo WebFunctionalTest / Selenium，功能比较

> ID：260889
> 
> 赞同：5
> 
> 时间：2008-11-04T04:33:47.300
> 
> 标签：java, selenium, webtest, canoo, canoo-webtest

对于 Web Canoo Web Functional Test 和 Selenium 软件的功能比较，最好有一个评估，包括与 Java 平台应用程序的集成、速度、部署测试、执行和分析结果的速度、JavaScript 支持等方面。我正在使用 Canoo 项目，它非常好。

塔季扬娜

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-05T15:09:42.227

我没有使用过 Canoo，但我已经使用 Selenium 好几年了。

Selenium 的方法与 Canoo 的不同之处在于 Selenium 不会尝试模拟浏览器，它会自动化/编写现有浏览器的脚本。这样您就不必担心特定浏览器中的 JavaScript 兼容性或渲染引擎的细节。

[Selenium 远程控制](http://selenium-rc.seleniumhq.org/)是一个启动浏览器、通过网络套接字获取 Selenium 命令并在浏览器中执行这些命令的进程。

我同意 Daniel 上面的回答，[Selenium IDE](http://selenium-ide.seleniumhq.org/)是一个杀手级功能！在 Firefox 中安装插件后，您可以快速构建单元测试套件、右键单击网页并选择断言等等。

Selenium Remote Control 与其他语言的集成非常简单，您可以从您选择的语言向远程控制过程发送命令。

到目前为止，我已经使用了来自 Haskell、Python、Java 和 C# 的 Selenium RC，它运行良好。

我认为您可以通过打开 Selenium RC 套接字权限从 Linux 构建服务器运行 MSIE 测试。请注意，这是一个潜在的安全问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T04:41:37.207

所以我最初追求 Canoo 作为功能测试的方向。我最终选择了 Selenium，因为我们发现在浏览器中运行 selenium 比使用 HTTPUnit 运行测试的 Canoo 更适合我们。

如果您在构建时使用 selenium 运行测试，您将需要在构建服务器上安装您希望使用的浏览器软件。例如，我们不可能在我们的构建服务器上测试 IE....所以我们只在 Firefox 中运行测试。

Selenium IDE 是我们的杀手锏。我们有使用 selenium IDE 的人，他们不是真正的开发人员，这是一个很大的帮助。开发团队与他们合作以确保测试正常运行。

Canoo 有其自身的优势，一个相当有偏见的博客条目在这里： http: [//mguillem.wordpress.com/2007/10/29/webtest-vs-selenium-webtest-wins-13-5/](http://mguillem.wordpress.com/2007/10/29/webtest-vs-selenium-webtest-wins-13-5/)

请注意，尽管有所有这些事情，我仍然更喜欢 Selenium ......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T16:30:27.047

Canoo webtest 报告功能非常丰富，不确定 selenium 是否具有这样的内置报告功能，或者 Selenium + TestNG 是否提供等效功能。

Canoo 脚本编写更加简单易行。

# ruby - Ruby 最好/最简单的 GUI 库是什么？

> ID：260905
> 
> 赞同：138
> 
> 时间：2008-11-04T04:43:12.180
> 
> 标签：ruby, user-interface

Ruby 最好/最简单的 GUI 库是什么？

我更喜欢跨平台的 GUI 库，但目前我只关心 Windows (Win32)。我很难找到任何似乎易于使用的东西。有吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2008-11-04T04:47:19.317

Ruby [Shoes](http://shoesrb.com/) (by why) 旨在成为一个*非常*简单的 GUI 框架。不过，我不知道它的功能有多齐全。

[在教程](http://shoesrb.com/tutorials/)中可以找到一些好的代码示例。

另外，我认为鞋子为[hackty hack](http://www.hackety.com/)提供了强大的动力，为年轻人提供了一个引人入胜的编程学习环境。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-03-18T00:14:56.393

这是一个很好的资源：

[http://en.wikibooks.org/wiki/Ruby_Programming/GUI_Toolkit_Modules](http://en.wikibooks.org/wiki/Ruby_Programming/GUI_Toolkit_Modules)

有链接比较基本上所有这些。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2008-11-04T04:53:02.330

我从[FXRuby](http://www.fxruby.org/)开始，因为它有一[本书](https://rads.stackoverflow.com/amzn/click/com/1934356077)。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-11-04T10:53:42.837

我最近开始使用[Qt](https://www.qt.io/)作为 Ruby 应用程序的 GUI 框架。有一个名为[QtRuby](http://techbase.kde.org/Development/Languages/Ruby)的绑定。有关快速入门教程（仅涵盖 Windows），请参阅[此](http://tom.paschenda.org/blog/?p=38)帖子

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2008-11-04T15:30:48.487

[聚光灯](https://github.com/slagyr/limelight)我真的很喜欢剧院的比喻。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-11-04T21:47:11.347

[Glimmer](http://rubyforge.org/projects/glimmer/)对 JRuby 用户来说是一个有趣的选项，它为 SWT 工具包提供了一个非常 Ruby 风格的界面。（SWT 是 Eclipse 背后的用户界面框架，它通过在其支持的各种平台（Windows、OS X、Linux 等）上使用本机小部件来提供快速的性能和熟悉的 UI 隐喻。）作为 Java 开发人员，SWT 总是吸引我，但是编码它是极端痛苦的。Glimmer 通过强调约定而不是配置，并重视 DRYness 和所有其他正常的 Ruby 优点，使这个过程变得更加简单。

另一个不错的选择是[SproutCore](http://www.sproutcore.com/)，这是一个基于 Javascript 的 GUI 工具包，由 Apple 开发，带有 Ruby 绑定。至少，它的演示看起来很棒，并且 otherinbox 在它之上构建了一个非常漂亮的[应用程序](http://joshuabaer.blogs.com/photos/uncategorized/2008/09/09/ebay_2.png)。就个人而言，我花了好几个小时试图让它在两个系统上运行——一个 Windows 和一个 Linux——但在任何一个系统上都没有成功——我一直遇到 Merb 或其他部分的依赖问题SproutCore 堆栈。但这很有趣，几周后我会回去再试一次，希望问题能在那个时候得到解决。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-11-07T07:51:17.790

[wxWidgets](http://www.wxwidgets.org/)值得一试。它通过[wxRuby](http://wxruby.rubyforge.org/wiki/wiki.pl?WxRuby)在 Ruby 上得到很好的支持。对于示例应用程序，请查看[wxRIDE](http://wxride.ruby-im.net/)。将其[与其他工具包进行比较](http://wiki.wxwidgets.org/WxWidgets_Compared_To_Other_Toolkits)。您可能还想查看[Anvil](http://anvil.rubyforge.org/)，这是一种用于使用 wx 的 Rails 框架。不过，它现在看起来垂死了。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2008-11-04T18:06:47.300

如果您正在寻找一个跨平台的 GUI，那么我强烈建议您使用 JRuby 和 Swing。

另外，看看[monkeybars](http://monkeybars.rubyforge.org/)库，这是一个使用 JRuby 和 Swing 构建 MVC 应用程序的 Ruby 库，您还可以在其中使用出色的 Netbeans IDE 以可视方式构建您的 GUI。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2010-01-04T17:28:15.977

如果您正在为 Mac 开发，[MacRuby](http://www.macruby.org/)拥有最好的库，毫无疑问。除了超快之外，它还有一个非常漂亮的 GUI 界面，名为 hotcocoa。此外，该库由 Apple 开发，使用 Core Foundation 类作为其基础，并使用 LLVM 在 Objective-C 运行时之上运行。用两个词来说，它的速度非常快。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-11-04T19:31:28.610

有用于 QT 和 GTK 的 Ruby 绑定，所以这些绑定不会出错（它们也是可移植的）。

Pragmatic Programmers 出版了一本关于 Ruby with QT 的迷你书和一本关于 FXRuby 的完整书，所以我认为后者是另一个不错的选择。

鞋子，虽然容易学习和可爱，但非常适合情境，并没有像其他任何控件那样提供尽可能多的控件选项，所以如果你想构建任何超越简单 UI 的东西（不是讨厌鞋子，但它还不成熟够了），我建议您使用更成熟和经过测试的工具包之一。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-04-19T21:33:59.877

尝试[使用 visualruby](http://visualruby.net)，您可以使用[glade 界面设计](http://glade.gnome.org/)器轻松构建表单，然后编写纯 ruby​​ 代码来为它们设置动画。它比上面提到的选项容易得多，因为您不必手动编码所有内容。

您可以在 visualruby 网站上查看示例视频。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-11-12T11:08:09.030

我对 Qt 有过一些非常好的经验，所以我肯定会推荐它。

不过，您应该注意许可模式。如果您正在开发开源应用程序，您可以免费使用开源许可版本。如果您正在开发商业应用程序，则必须支付许可费。而且您不能在开源软件中进行开发，然后在开始销售之前将许可证切换为商业许可证。

PS我只是快速浏览了一下鞋子。我真的很喜欢 UI 元素的声明性定义，所以这绝对值得研究......

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-11-16T13:57:26.653

如果您有兴趣，[RubyLearning](http://www.rubylearning.org/class/)提供有关 FXRuby 和鞋子的课程。实际上，鞋类课程目前正在进行中。

可能最简单的是鞋子。作为RubyLearning的助教，希望我们能为学习者提供更好的课程。

有些人在安装 FXRuby 时遇到了麻烦。但 Shoes 有一个适用于任何平台（Windows、Mac 和 Linux）的安装程序。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-11-30T06:35:07.120

使用[ironRuby](http://ironruby.net/) interperter，您拥有完整的 .net 平台，这意味着您可以编写 Winforms 和 WPF（我只尝试过 Winforms）。由于存在单平台，因此它可能是跨平台的

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-11-04T04:48:05.867

试[鞋](http://shoesrb.com/)。不幸的是，我还没有机会使用它，但我有一个即将进行的项目，我打算在其中使用它。它是跨平台的。此外，API 看起来非常 Rubyish，所以我会试一试。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-11-04T09:24:51.190

[这里](http://www.phwinfo.com/forum/comp-lang-ruby/214147-tk-ruby-fx-ruby-wx-ruby.html)有一个可能有用的讨论。

从我自己（有限的）曝光来看，我会说鞋子是最有趣的，并且可能是“最容易”进入的。但是，请注意，当出现问题时找出问题所在可能很棘手（至少，对我来说是这样）。

对于我计划部署给真实世界用户的真实世界应用程序，我想我会选择[wxruby](http://wxruby.rubyforge.org/wiki/wiki.pl)。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-11-05T18:06:23.760

Tk 可用于 Ruby。可以在[http://www.tkdocs.com/找到一些很好的示例（在 Ruby、Perl 和 Tcl 中）](http://www.tkdocs.com/)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2008-11-10T15:10:51.600

Wxruby 是一个很棒的框架，简单而干净。尝试一下或将 glade 与 ruby​​ 一起使用（最简单的选择）

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2012-10-03T21:13:48.833

使用 Watir 将浏览器用作 GUI，就像在这个问题和答案中一样：

[在 Ruby 中使用浏览器作为 GUI](https://stackoverflow.com/questions/11724201/use-browser-as-gui-in-ruby)

# c - 如何创建动态大小的结构数组？

> ID：260915
> 
> 赞同：59
> 
> 时间：2008-11-04T04:48:39.127
> 
> 标签：c, dynamic, memory-management

我知道如何创建一个结构数组但具有预定义的大小。但是，有没有办法创建一个动态的结构数组，使数组变得更大？

例如：

```
 typedef struct
    {
        char *str;
    } words;

    main()
    {
        words x[100]; // I do not want to use this, I want to dynamic increase the size of the array as data comes in.
    } 
```

这可能吗？

* * *

我研究过这个：`words* array = (words*)malloc(sizeof(words) * 100);`

我想摆脱 100 并在数据进入时存储数据。因此，如果有 76 个数据字段进入，我想存储 76 而不是 100。我假设我不知道有多少数据即将到来进入我的程序。在我上面定义的结构中，我可以将第一个“索引”创建为：

```
 words* array = (words*)malloc(sizeof(words)); 
```

但是我想在之后动态地将元素添加到数组中。我希望我足够清楚地描述了问题区域。主要挑战是动态添加第二个字段，至少这是目前的挑战。

* * *

但是，我取得了一些进展：

```
 typedef struct {
        char *str;
    } words;

    // Allocate first string.
    words x = (words) malloc(sizeof(words));
    x[0].str = "john";

    // Allocate second string.
    x=(words*) realloc(x, sizeof(words));
    x[1].FirstName = "bob";

    // printf second string.
    printf("%s", x[1].str); --> This is working, it's printing out bob.

    free(x); // Free up memory.

    printf("%s", x[1].str); --> Not working since its still printing out BOB even though I freed up memory. What is wrong? 
```

我做了一些错误检查，这就是我发现的。如果在我为 x 释放内存之后，我添加以下内容：

```
 x=NULL; 
```

那么如果我尝试打印 x 我会得到一个我想要的错误。那么是不是免费功能不起作用，至少在我的编译器上？我正在使用开发人员？？

* * *

谢谢，我现在明白了，原因是：

> FirstName 是一个指向 char 数组的指针，它没有被 malloc 分配，只有指针被分配，在你调用 free 之后，它不会擦除内存，它只是将它标记为在堆上可用结束后来写的。- 马特·史密斯

## 更新

我正在尝试模块化并将我的结构数组的创建放在一个函数中，但似乎没有任何效果。我正在尝试一些非常简单的事情，我不知道还能做什么。它与以前的思路相同，只是另一个函数 loaddata 正在加载数据，并且在我需要进行一些打印的方法之外。我怎样才能让它工作？我的代码如下：

```
 # include <stdio.h>
    # include <stdlib.h>
    # include <string.h>
    # include <ctype.h>

    typedef struct
    {
        char *str1;
        char *str2;
    } words;

    void LoadData(words *, int *);

    main()
    {
        words *x;
        int num;

        LoadData(&x, &num);

        printf("%s %s", x[0].str1, x[0].str2);
        printf("%s %s", x[1].str1, x[1].str2);

        getch();
    }//

    void LoadData(words *x, int * num)
    {
        x = (words*) malloc(sizeof(words));

        x[0].str1 = "johnnie\0";
        x[0].str2 = "krapson\0";

        x = (words*) realloc(x, sizeof(words)*2);
        x[1].str1 = "bob\0";
        x[1].str2 = "marley\0";

        *num=*num+1;
    }// 
```

这个简单的测试代码崩溃了，我不知道为什么。错误在哪里？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-11-04T05:26:00.580

您已将其标记为 C++ 和 C。

如果您使用的是 C++，事情会容易得多。标准模板库有一个名为 vector 的模板，它允许您动态构建对象列表。

```
#include <stdio.h>
#include <vector>

typedef std::vector<char*> words;

int main(int argc, char** argv) {

        words myWords;

        myWords.push_back("Hello");
        myWords.push_back("World");

        words::iterator iter;
        for (iter = myWords.begin(); iter != myWords.end(); ++iter) {
                printf("%s ", *iter);
        }

        return 0;
} 
```

如果您使用的是 C 语言，事情会变得更加困难，是的，malloc、realloc 和 free 是可以帮助您的工具。您可能要考虑使用链表数据结构。这些通常更容易增长，但不便于随机访问。

```
#include <stdio.h>
#include <stdlib.h>

typedef struct s_words {
        char* str;
        struct s_words* next;
} words;

words* create_words(char* word) {
        words* newWords = malloc(sizeof(words));
        if (NULL != newWords){
                newWords->str = word;
                newWords->next = NULL;
        }
        return newWords;
}

void delete_words(words* oldWords) {
        if (NULL != oldWords->next) {
                delete_words(oldWords->next);
        }
        free(oldWords);
}

words* add_word(words* wordList, char* word) {
        words* newWords = create_words(word);
        if (NULL != newWords) {
                newWords->next = wordList;
        }
        return newWords;
}

int main(int argc, char** argv) {

        words* myWords = create_words("Hello");
        myWords = add_word(myWords, "World");

        words* iter;
        for (iter = myWords; NULL != iter; iter = iter->next) {
                printf("%s ", iter->str);
        }
        delete_words(myWords);
        return 0;
} 
```

哎呀，对不起世界上最长的答案。所以WRT到“不想使用链表评论”：

```
#include <stdio.h>  
#include <stdlib.h>

typedef struct {
    char** words;
    size_t nWords;
    size_t size;
    size_t block_size;
} word_list;

word_list* create_word_list(size_t block_size) {
    word_list* pWordList = malloc(sizeof(word_list));
    if (NULL != pWordList) {
        pWordList->nWords = 0;
        pWordList->size = block_size;
        pWordList->block_size = block_size;
        pWordList->words = malloc(sizeof(char*)*block_size);
        if (NULL == pWordList->words) {
            free(pWordList);
            return NULL;    
        }
    }
    return pWordList;
}

void delete_word_list(word_list* pWordList) {
    free(pWordList->words);
    free(pWordList);
}

int add_word_to_word_list(word_list* pWordList, char* word) {
    size_t nWords = pWordList->nWords;
    if (nWords >= pWordList->size) {
        size_t newSize = pWordList->size + pWordList->block_size;
        void* newWords = realloc(pWordList->words, sizeof(char*)*newSize); 
        if (NULL == newWords) {
            return 0;
        } else {    
            pWordList->size = newSize;
            pWordList->words = (char**)newWords;
        }

    }

    pWordList->words[nWords] = word;
    ++pWordList->nWords;

    return 1;
}

char** word_list_start(word_list* pWordList) {
        return pWordList->words;
}

char** word_list_end(word_list* pWordList) {
        return &pWordList->words[pWordList->nWords];
}

int main(int argc, char** argv) {

        word_list* myWords = create_word_list(2);
        add_word_to_word_list(myWords, "Hello");
        add_word_to_word_list(myWords, "World");
        add_word_to_word_list(myWords, "Goodbye");

        char** iter;
        for (iter = word_list_start(myWords); iter != word_list_end(myWords); ++iter) {
                printf("%s ", *iter);
        }

        delete_word_list(myWords);

        return 0;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-11-04T04:55:22.140

如果要动态分配数组，可以使用[`malloc`](http://en.wikipedia.org/wiki/Malloc)from `stdlib.h`。

如果要使用`words`结构分配 100 个元素的数组，请尝试以下操作：

```
words* array = (words*)malloc(sizeof(words) * 100); 
```

您要分配的内存大小被传入`malloc`，然后它将返回一个类型为`void`( `void*`) 的指针。在大多数情况下，您可能希望将其转换为所需的指针类型，在本例中为`words*`.

此处使用`sizeof`关键字来找出`words`结构的大小，然后将该大小乘以要分配的元素数。

完成后，请务必使用`free()`释放您使用的堆内存以防止[内存泄漏](http://en.wikipedia.org/wiki/Memory_leak)：

```
free(array); 
```

如果你想改变分配数组的大小，你可以尝试`realloc`像其他人提到的那样使用，但请记住，如果你做很多`realloc`s 可能最终会[导致内存碎片化](http://en.wikipedia.org/wiki/Fragmentation_(computer)#External_fragmentation)。如果您想动态调整数组大小以保持程序的低内存占用，最好不要做太多`realloc`s。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-04T05:53:20.073

这看起来像一个学术练习，不幸的是，因为你不能使用 C++，所以它变得更难了。基本上，您必须管理分配的一些开销，并在以后需要调整内存大小时跟踪已分配的内存量。这就是 C++ 标准库的亮点所在。

对于您的示例，以下代码分配内存并稍后调整其大小：

```
// initial size
int count = 100;
words *testWords = (words*) malloc(count * sizeof(words));
// resize the array
count = 76;
testWords = (words*) realloc(testWords, count* sizeof(words)); 
```

请记住，在您的示例中，您只是分配一个指向 char 的指针，您仍然需要分配字符串本身，更重要的是在最后释放它。因此这段代码分配了 100 个指向 char 的指针，然后将其大小调整为 76，但不分配字符串本身。

我怀疑您实际上想要分配与上述非常相似的字符串中的字符数，但是将 word 更改为 char。

编辑：还请记住，创建函数来执行常见任务并强制执行一致性非常**有意义，这样您就不会到处复制代码。**例如，您可能有 a) 分配结构，b) 为结构分配值，以及 c) 释放结构。所以你可能有：

```
// Allocate a words struct
words* CreateWords(int size);
// Assign a value
void AssignWord(word* dest, char* str);
// Clear a words structs (and possibly internal storage)
void FreeWords(words* w); 
```

编辑：就调整结构的大小而言，它与调整 char 数组的大小相同。然而不同的是，如果你使结构数组更大，你可能应该将新的数组项初始化为 NULL。同样，如果您使结构数组更小，则需要在删除项目之前进行清理——即在调整结构数组大小之前已分配的空闲项目（并且仅是分配的项目）。这是我建议创建辅助函数来帮助管理它的主要原因。

```
// Resize words (must know original and new size if shrinking
// if you need to free internal storage first)
void ResizeWords(words* w, size_t oldsize, size_t newsize); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-04T05:08:20.927

您的另一个选择是[链表](http://en.wikipedia.org/wiki/Linked_list)。您需要分析您的程序将如何使用数据结构，如果您不需要随机访问，它可能比重新分配更快。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-04T05:07:07.560

在 C++ 中，使用[向量](http://www.cplusplus.com/reference/stl/vector/)。它就像一个数组，但您可以轻松添加和删除元素，它会为您分配和释放内存。

我知道问题的标题是 C，但你用 C 和 C++ 标记了你的问题......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-05T19:18:24.767

您在上次更新中的代码不应该编译，更不用说运行了。您将 &x 传递给 LoadData。&x 具有 **words 的类型，但 LoadData 需要 words* 。当然，当您在指向堆栈的指针上调用 realloc 时，它会崩溃。

修复它的方法是将 LoadData 更改为接受 words** 。这样摇摆，你实际上可以修改 main() 中的指针。例如， realloc 调用看起来像

```
*x = (words*) realloc(*x, sizeof(words)*2); 
```

这与“num”中的原则相同，即 int* 而不是 int。

除此之外，您还需要真正弄清楚单词中的字符串是如何存储的。允许将 const 字符串分配给 char *（如 str2 = "marley\0"），但它很少是正确的解决方案，即使在 C 中也是如此。

另一点：除非你真的需要在字符串末尾有两个 0，否则不需要有 "marley\0"。编译器在每个字符串文字的末尾添加 0。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-11-04T14:45:59.600

对于测试代码：如果要修改函数中的指针，则应将“指向指针的指针”传递给函数。更正后的代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

typedef struct
{
    char *str1;
    char *str2;
} words;

void LoadData(words**, int*);

main()
{
    words **x;
    int num;

    LoadData(x, &num);

    printf("%s %s\n", (*x[0]).str1, (*x[0]).str2);
    printf("%s %s\n", (*x[1]).str1, (*x[1]).str2);
}

void LoadData(words **x, int *num)
{
    *x = (words*) malloc(sizeof(words));

    (*x[0]).str1 = "johnnie\0";
    (*x[0]).str2 = "krapson\0";

    *x = (words*) realloc(*x, sizeof(words) * 2);
    (*x[1]).str1 = "bob\0";
    (*x[1]).str2 = "marley\0";

    *num = *num + 1;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-03T13:51:53.063

每个编码员都需要简化他们的代码以使其易于理解......即使对于初学者也是如此。

因此，如果您了解这些概念，那么**动态使用的结构数组很容易。**

```
// Dynamically sized array of structures

#include <stdio.h>
#include <stdlib.h>

struct book 
{
    char name[20];
    int p;
};              //Declaring book structure

int main () 
{
    int n, i;      

    struct book *b;     // Initializing pointer to a structure
    scanf ("%d\n", &n);

    b = (struct book *) calloc (n, sizeof (struct book));   //Creating memory for array of structures dynamically

    for (i = 0; i < n; i++)
    {
        scanf ("%s %d\n", (b + i)->name, &(b + i)->p);  //Getting values for array of structures (no error check)
    }          

    for (i = 0; i < n; i++)
    {
        printf ("%s %d\t", (b + i)->name, (b + i)->p);  //Printing values in array of structures
    }

    scanf ("%d\n", &n);     //Get array size to re-allocate    
    b = (struct book *) realloc (b, n * sizeof (struct book));  //change the size of an array using realloc function
    printf ("\n");

    for (i = 0; i < n; i++)
    {
        printf ("%s %d\t", (b + i)->name, (b + i)->p);  //Printing values in array of structures
    }

    return 0;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-04T05:05:23.587

如果要动态增长数组，则应使用 malloc() 动态分配一些固定数量的内存，然后在用完时使用 realloc()。一种常见的技术是使用指数增长函数，这样您分配一些小的固定数量，然后通过复制分配的数量使数组增长。

一些示例代码是：

```
size = 64; i = 0;
x = malloc(sizeof(words)*size); /* enough space for 64 words */
while (read_words()) {
    if (++i > size) {
        size *= 2;
        x = realloc(sizeof(words) * size);
    }
}
/* done with x */
free(x); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-07-13T21:58:19.383

这是我在 C++ 中的做法

```
size_t size = 500;
char* dynamicAllocatedString = new char[ size ]; 
```

对任何结构或 c++ 类使用相同的主体。

# php - 你用什么程序远程编辑php然后上传到你的服务器？

> ID：260923
> 
> 赞同：4
> 
> 时间：2008-11-04T04:52:03.457
> 
> 标签：php, linux, ide

因此，我刚刚开始开发 PHP Web 应用程序，并已使用以下内容完成了我的服务器的设置：

*   Ubuntu 服务器
*   阿帕奇2
*   PHP
*   MySQL
*   VSFTPD
*   和所有其他的好东西...

目前，当我编辑文件时，我有两种方法可以将它们更新/上传到服务器。我可以在服务器上使用 vi 进行小的更改，或者我可以使用 NetBeans 6.5 RC2，然后使用 VSFTPD 将它们上传到我的主目录并将文件“mv”到正确的位置 (/var/www)。

**我的问题：**我应该使用什么方法来编辑 PHP 并将它们上传到服务器？NetBeans 是理想的吗？vi 的功能真的和我发现的一样少吗（没有 PHP IDE 功能的基本文本编辑器命令）。我错过了什么？从我刚开始编写 PHP 应用程序时发现的大量材料来看，我知道肯定有更好的解决方案，但还没有找到。

（注意：我在设置方面有所干预，`chroot_local_user=NO`但意识到如果我上传的内容最终破坏了我的网站，我就没有备份副本。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-04T04:59:15.657

我不太喜欢直接在服务器上进行更改的想法，我可以向您推荐另一种方法：使用版本控制系统，在那里您签入您对代码所做的所有更改，然后您可以轻松签出或部署时导出所有修改，这样您就可以了解对每个文件所做的所有更改的完整历史记录，您可以完全控制您的代码...

我使用[Subversion](http://subversion.tigris.org/)，很容易将您的版本化源代码部署到生产服务器......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-04T05:18:11.610

您基本上可以使用任何具有您想要的功能集的东西。这里有几个选项：

*   完整的 IDE
    *   [网豆](http://www.netbeans.org/)
    *   [蚀](http://www.eclipse.org/pdt/)
*   较小的 IDE
    *   [安茹塔](http://anjuta.sourceforge.net/)
    *   [gPHP编辑](http://www.gphpedit.org/)
*   图形文本编辑器
    *   [G编辑](http://www.gnome.org/projects/gedit/)
*   终端编辑器
    *   [虚拟机](http://www.vim.org/)
    *   [Emacs](http://www.gnu.org/software/emacs/)

您需要决定您想要哪些功能集，以及您更喜欢哪个编辑器。

VI 功能**非常**丰富，但学习曲线陡峭。[阅读](http://www.scribd.com/doc/263139/VIM-for-PHP-Programmers) （PDF）[，](http://www.digilife.be/quickreferences/QRC/Vi%20Reference%20Card.pdf)[然后](http://www.vim.org/tips/tip.php?tip_id=305) 再试一次[。](http://www.vim.org/6k/features.en.txt)

我个人使用 Anjuta，因为我不使用 / 喜欢完整 IDE 的所有功能。如果我想快速编辑某些东西，我有时会使用 gedit，如果我在终端中想要做某事，我有时会使用 VI。

并且喜欢源代码控制是一个***非常***好的主意！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T05:11:06.460

在我使用的 Mac 上：

Cyber​​Duck（免费）作为自动 ftp 程序 TextMate（51 美元）作为文本编辑器

当您在 TextMate 中保存时 Cyber​​Duck 会自动上传到服务器。

但是请注意，您不应该编辑您的实时代码。我有一个实时部署，然后在服务器上有一个单独的开发环境。我在开发环境中进行更改、测试，然后有一个脚本来存档当前部署的版本，然后在我想要部署时复制到开发环境。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-04T05:17:02.517

[PsPad](http://www.pspad.com/)是一个基于 Windows 的本地代码编辑器，具有所有的花里胡哨，此外它还允许将远程 FTP 文件夹配置为与“本地”文件夹相同 - 因此您可以打开“远程”文件夹，编辑文件然后保存它......它保存在远程服务器上。

非常便利。:-)

我还衷心推荐像 SubVersion 或 CVS 之类的代码存储库，使用 TortoiseSVN 或 TortoiseCVS 来启用对存储库命令的访问使它们也显示在 PsPad 编辑器文件树中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-04T21:25:52.093

原谅我，我知道这是错的，但我一直这样做。

为了回答这个问题，我使用[jedit](http://www.jedit.org/ "杰迪特")和 ftp 插件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-05T08:47:04.107

正如另一位评论者所说，我使用颠覆，但我曾经在 Windows 上使用[WinSCP](https://winscp.net/)通过远程服务器上的 SSH2 进行连接。

WinSCP 有一个自动同步选项，只要本地计算机上的文件发生更改，它就会上传到服务器。这对于在您处理更改以进行测试时上传更改非常有用。

当然，它还有一个传统的同步功能，可以将您的本地文件（和子文件夹）推送到服务器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-04T05:09:51.330

我使用 Zend Studio。我在本地机器（Linux/Mac/Win）上获得了 IDE 的好处，当我保存它时，它会远程保存在服务器上。它有点像旧的 HomeSite，有一些 PHP 特有的功能（代码完成等）。我相信它也适用于版本控制，但由于我是一个单独工作的人，所以我不使用它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-04T05:12:40.793

我不需要分阶段部署，因为我的网站非常简单.. 因此，我使用[WebDrive](http://www.webdrive.com/products/webdrive/index.html) .. 将远程服务器映射到驱动器号并使用 Notepad++（通常）编辑文件。然后我使用 Bazaar 来管理变更历史

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-04T13:26:03.060

对于真正的设置，我至少建议拥有一个或多个开发服务器（每个开发人员一个）、一个中央存储库和一个生产服务器。生产服务器和开发服务器都有一个从存储库中签出的工作副本。您可以扩展此设置，但这是一个很好的基准。

你可以在你用来工作的机器上安装你的开发服务器，或者你可以远程访问它。如果您使用后者，您可能希望使用 ssh 来获取开发服务器上的 shell 访问权限，并将其与[sshfs](http://fuse.sourceforge.net/sshfs.html)结合使用，以便您可以轻松地编辑远程服务器上的文件，就好像它们是本地文件一样。如果您在客户端卡在 Windows 上，您将不得不使用其他工具，例如[WebDrive](http://www.southrivertech.com/products/webdrive/winindex.html "将驱动器映射到 FTP、SFTP、WebDAV 和 S3")。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-05T08:40:13.060

您还可以使用 Komodo Edit 远程编辑文件。使用“文件->打开->远程文件”选项。您可以通过 FTP、FTPS、SFTP、SCP 编辑文件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-13T09:28:15.373

我已经使用 Zend Studio 有一段时间了，但今晚我转向了 Komodo。

Zend 具有内置的远程文件夹集成，但它并不总是有效。有时它会挂起，而您只剩下上传了一半的文件和一个损坏的站点。有时它只是停止保存到服务器，并且没有警报，它会继续保存，但只是保存到本地缓存。我以这种方式保存了文件，并认为一切都已完成，关闭了zend，丢失了缓存的文件，然后才意识到它实际上并没有保存。

虽然以上是我的方法而不是程序的错误，例如没有使用 cvs 或 subversion，但并非所有站点都值得配置 cvs 或 subversion。一个简单的远程 ftp 编辑并保存到服务器是构建 www 的基本 Web 开发。我很惊讶很少有所谓的“IDE”表明它们是互联网开发环境，而大多数人都忽略了这种 Web 开发方式。

Komodo 有一个插件，您甚至需要在以允许简单浏览、指向和单击、编辑和保存功能的方式访问远程文件夹之前实际添加。默认情况下 Komodo（没有插件[http://community.activestate.com/xpi/remote-drive-tree](http://community.activestate.com/xpi/remote-drive-tree)）它只有添加远程“文件”的空间。只有一个文件。添加单个文件进行处理是多么方便和及时

所以如果你去 Komodo，抓住那个插件，否则你会挠头想知道为什么你可以添加一个文件，而不是一个远程文件夹来处理。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-04-07T18:31:19.480

在 Mac OS X 上，TextWrangler 是一个简单的解决方案

从这篇详细的文章：

*   [http://www.cnet.com/how-to/how-to-use-textwrangler-as-a-remote-file-editor/](http://www.cnet.com/how-to/how-to-use-textwrangler-as-a-remote-file-editor/)

> 在“文件”菜单中选择“从 FTP/SFTP 服务器打开”，您将看到程序的 FTP 浏览器窗口出现。输入远程计算机的 IP 地址或 URL，然后选中“SFTP”选项

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-04-07T18:34:44.270

PhpStorm 好几天！你可以在[这里查看](http://en.m.wikipedia.org/wiki/PhpStorm)。它内置了对部署和编辑远程 php 文件的支持。我肯定用过最好的。

它还具有开箱即用的版本控制和同步选项，支持多服务器部署。

您可以获得 30 天的免费试用期，并经常免费使用他们的早期访问版本。它具有惊人的代码智能，就像这里提到的许多 ide 一样。

# objective-c - 通过将另一个字符串重复给定次数来创建 NSString

> ID：260945
> 
> 赞同：58
> 
> 时间：2008-11-04T05:03:51.890
> 
> 标签：objective-c, cocoa, string

这应该很容易，但我很难找到最简单的解决方案。

我需要一个`NSString`等于另一个与自身连接给定次数的字符串。

为了更好地解释，请考虑以下 python 示例：

```
>> original = "abc"
"abc"
>> times = 2
2
>> result = original * times
"abcabc" 
```

有什么提示吗？

* * *

编辑：

在从 OmniFrameworks 中查看了这个实现之后，我将发布一个类似于[Mike McMaster 的答案的解决方案：](https://stackoverflow.com/questions/260945/create-nsstring-by-repeating-another-string-a-given-number-of-times#260969)

```
// returns a string consisting of 'aLenght' spaces
+ (NSString *)spacesOfLength:(unsigned int)aLength;
{
static NSMutableString *spaces = nil;
static NSLock *spacesLock;
static unsigned int spacesLength;

if (!spaces) {
spaces = [@"                " mutableCopy];
spacesLength = [spaces length];
    spacesLock = [[NSLock alloc] init];
}
if (spacesLength < aLength) {
    [spacesLock lock];
    while (spacesLength < aLength) {
        [spaces appendString:spaces];
        spacesLength += spacesLength;
    }
    [spacesLock unlock];
}
return [spaces substringToIndex:aLength];
} 
```

从文件中复制的代码：

```
Frameworks/OmniFoundation/OpenStepExtensions.subproj/NSString-OFExtensions.m 
```

[来自The Omni Group的](http://www.omnigroup.com/)[Omni Frameworks](http://www.omnigroup.com/developer/)的OpenExtensions 框架。

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2011-01-05T19:03:57.537

有一种方法叫做`stringByPaddingToLength:withString:startingAtIndex:`：

```
[@"" stringByPaddingToLength:100 withString: @"abc" startingAtIndex:0] 
```

请注意，如果您想要 3 个 abc，则使用 9 ( `3 * [@"abc" length]`) 或创建如下类别：

```
@interface NSString (Repeat)

- (NSString *)repeatTimes:(NSUInteger)times;

@end

@implementation NSString (Repeat)

- (NSString *)repeatTimes:(NSUInteger)times {
  return [@"" stringByPaddingToLength:times * [self length] withString:self startingAtIndex:0];
}

@end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-04T05:19:11.797

```
NSString *original = @"abc";
int times = 2;

// Capacity does not limit the length, it's just an initial capacity
NSMutableString *result = [NSMutableString stringWithCapacity:[original length] * times]; 

int i;
for (i = 0; i < times; i++)
    [result appendString:original];

NSLog(@"result: %@", result); // prints "abcabc" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-07-25T03:13:25.590

为了性能，您可以使用以下内容进入 C：

```
+ (NSString*)stringWithRepeatCharacter:(char)character times:(unsigned int)repetitions;
{
    char repeatString[repetitions + 1];
    memset(repeatString, character, repetitions);

    // Set terminating null
    repeatString[repetitions] = 0;

    return [NSString stringWithCString:repeatString];
} 
```

这可以写为 NSString 类的类别扩展。可能应该在那里进行一些检查，但这是它的直截了当的要点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-07-25T04:05:32.893

上面的第一种方法是针对单个字符的。这是一个字符串。它也可以用于单个字符，但开销更大。

```
+ (NSString*)stringWithRepeatString:(char*)characters times:(unsigned int)repetitions;
{
    unsigned int stringLength = strlen(characters);
    unsigned int repeatStringLength = stringLength * repetitions + 1;

    char repeatString[repeatStringLength];

    for (unsigned int i = 0; i < repetitions; i++) {
        unsigned int pointerPosition = i * repetitions;
        memcpy(repeatString + pointerPosition, characters, stringLength);       
    }

    // Set terminating null
    repeatString[repeatStringLength - 1] = 0;

    return [NSString stringWithCString:repeatString];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-04T05:24:13.050

如果您在 Python 中使用 Cocoa，那么您可以这样做，因为 PyObjC 充满`NSString`了 Python`unicode`类的所有功能。

否则，有两种方法。

一种是创建一个包含相同字符串的数组`n`，然后使用`componentsJoinedByString:`. 像这样的东西：

```
NSMutableArray *repetitions = [NSMutableArray arrayWithCapacity:n];
for (NSUInteger i = 0UL; i < n; ++i)
    [repetitions addObject:inputString];
outputString = [repetitions componentsJoinedByString:@""]; 
```

另一种方法是以空开头`NSMutableString`并将字符串附加到它的`n`时间，如下所示：

```
NSMutableString *temp = [NSMutableString stringWithCapacity:[inputString length] * n];
for (NSUInteger i = 0UL; i < n; ++i)
    [temp appendString:inputString];
outputString = [NSString stringWithString:temp]; 
```

如果您可以在`stringWithString:`此处返回可变字符串，则您可以取消调用。否则，您可能应该返回一个不可变字符串，`stringWithString:`这里的消息意味着您在内存中有两个字符串副本。

因此，我推荐`componentsJoinedByString:`解决方案。

[编辑：借用[Mike McMaster 回答中的](https://stackoverflow.com/questions/260945/create-nsstring-by-repeating-another-string-a-given-number-of-times#260969)`…WithCapacity:`方法的想法。]

# c - strlmove 与 strmove 在 C 中的优势是什么？

> ID：260962
> 
> 赞同：0
> 
> 时间：2008-11-04T05:15:32.693
> 
> 标签：c

为了修剪前导空格，我们使用 strmove。但我们被建议使用 strlmove 而不是 strmove。我已经阅读并使用了 strlcpy 和 strlcat。strlmove 是否具有类似的功能，它的优点是什么？

编辑 1：谢谢 Mike B 和 Chris Young。这就是我们使用 strlcpy 的方式。

```
size_t strlcpy(char *dst, const char *src, size_t size)
{
    strncpy(dst, src, size - 1);
    dst[size - 1] = '\0';
    return(strlen(src));
} 
```

所以我只是想以同样的方式使用 strlmove() 。我想确认是否定义了有关 strlmove() 实现的任何规范。我知道这是我能问的最好的地方之一。

编辑 2：strlmove() 的实现方式与 strlcpy() 和 strlcat() 使用 memmove() 相同。

```
size_t strlmove(char *dst, const char *src, size_t size)
{
    //Error if the size is 0
    //If src length is greater than size; 
    //   memmove(dst, src, size-1) and dst[size] = \0;
    //Otherwise
    //   memmove(dst, src, length(src));
    return source len;
} 
```

感谢提供的帮助和支持。

谢谢， 马修 Liju

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-04T05:21:13.507

strmove、strlmove、strlcpy、strlcat 都不是**标准**的C 函数，所以如果不知道您使用的是哪个特定的非标准库，我无法评论它们的作用。标准 C 提供 strcpy、strcat、strncat、strncpy、memmove、memcpy 等。

如果您不知道源字符串是否适合目标缓冲区，则使用 strncpy 而不是 strcpy 是有意义的。然而，strncpy 有一个主要的性能问题，它**总是**写入为大小指定的字节数。那是：

```
char buf[4096];
strncpy(buf, "Hello", sizeof buf); 
```

将写入'H'、'e'、'l'、'l'、'o'并用'\0'填充buf的剩余4091字节。strncpy 需要注意的另一件事是，如果 size 参数小于源字符串长度加上它的 null，它不会以 null 终止字符串。例如：

```
char buf[5];
strncpy(buf, "Hello", sizeof buf); 
```

会将 'H', 'e', 'l', 'l', 'o' 写入 buf 并且不会以 null 结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-04T05:39:17.747

正如[Chris Young 所提到](https://stackoverflow.com/questions/260962/what-is-the-advantage-of-strlmove-vs-strmove-in-c#260972)的，这些例程不是标准的（或者据我所知，在广泛的、常用的情况下），所以我不能 100% 确定更多细节，但是：

通常，例程的`strl()`变体`str()`采用指示目标缓冲区大小的附加参数。该例程保证它不会将数据写入缓冲区末尾（因为它知道大小）。通常`strl()`函数还会保证它们会在字符串的末尾或缓冲区的末尾放置一个终止空字符（可能会截断在那里创建的任何字符串），这样您也可以保证有一个通常可以的终止字符串传递给其他`str()`函数。请注意，如果缓冲区的长度被指定为 0（零），该函数将*不会*放置终止的空字符（因为缓冲区中没有任何空间）。

在我看来，使用`strl()`（或`strn()`）函数而不是相应的`str()`例程来防止缓冲区溢出几乎总是更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-04T07:36:30.893

快速谷歌搜索显示 strlmove 函数的唯一提及是在 stackoverflow :)。所以它可能不是很常见的功能。
但是如果我们假设这个函数本质上与[strlcpy](http://www.manpagez.com/man/3/strlcpy/)很接近，那么这个函数与[strmove](http://sancho.ccd.uniroma2.it/cgi-bin/man/man2html?strmove+3)的不同之处在于它使用 size 参数移动有限数量的字节**并使目标字符串 NULL 终止**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-04T19:36:36.433

至少在 Theo de Raadt 的版本中，strncpy 和 strlcpy 之间有一个很大的区别，这是您在实现中遗漏的。如果给定字符串的长度小于缓冲区大小，则 strncpy 用空字节填充缓冲区的其余部分。在许多情况下，这可能只是很小的区别，但是由于许多 c 程序员倾向于使用超大缓冲区来位于安全站点上，因此它可以产生影响。

```
 strncpy(buffer, "bla", 1024); 
```

将 1021 '\0' 写入缓冲区，尽管一个就足够了。strlcpy 只写入一个'\0'。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-04T22:13:16.193

正如克里斯所说，您当前使用的功能是非标准的。...更糟糕的是，它们仍然非常低效并且仍然容易出错。您应该能够轻松地创建几个使用 memcpy/memmove 并采用 (char *)s 的 API，它们可以在任何地方工作，并且可能比非标准更快。您当前使用的变体。

但是，如果您希望其他人完成繁重的工作并免费获得安全性/可用性，您可以查看类似[ustr](http://www.and.org/ustr)的东西……这意味着易于集成，是 std。C、安全、快速，可以处理常量/自动/utf8/动态字符串。还有其他选择。

# perl - 如何在 Perl 中搜索特定列？

> ID：260986
> 
> 赞同：0
> 
> 时间：2008-11-04T05:28:52.057
> 
> 标签：perl, search, csv

我有一个包含一些数据的文本文件。我正在尝试 **仅在 ID 列**中搜索 EA并打印整行。但代码识别所有 EA 并打印所有行。我应该添加什么代码来满足条件？再次感谢：-）！

数据：
姓名 年龄 ID
---------------------
KRISTE,22, **EA** 2008
J **EA** N,21,ES4567
JAK,45, **EA** 2008

代码打印：
KRISTE ,22, **EA** 2008
J **EA** N,21,ES4567
JAK,45, **EA** 2008

期望输出：
KRIS,22, **EA** 2008
Kane,45, **EA** 2008,

```
file='save.txt';
open(F,$file)||die("Could not open $file");
while ($line=<F>){
if ($line=~ m/$EA/i) {
my @cells=($f1,$f2,$f3)= split ',',$line;
print "<TD>f1</TD>";
print "<TD>f2</TD>";
print "<TD>f3</TD>";
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-04T07:35:11.287

brian 和 Jeremy 的代码组合解决了所有问题：

```
use strict;
use warnings;

my $file = 'save.txt';
open my $fh, "<", $file or die "Could not open $file: $!";

while ($line = <$fh>)
{
    my($f1, $f2, $f3) = split ',', $line;
    if ($f3 =~ m/EA/i)
    {
        print "<TD>$f1</TD>";
        print "<TD>$f2</TD>";
        print "<TD>$f3</TD>";
    }
} 
```

布赖恩用 and 概括了匹配模式，`use CGI;`但`my $EA = param('keyword');`我取消了它，因为我认为它不适用于这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-04T07:21:21.020

您应该发布您正在使用的实际示例程序来说明问题。这是您的清理程序：

```
use strict;
use warnings;

use CGI;

my $EA = param('keyword');

my $file = 'save.txt';
open my $fh, "<", $file or die "Could not open $file: $!";

while( $line=<$fh> ) {
   if( $line=~ m/$EA/i ) {
       my( $f1, $f2, $f3 ) = split ',', $line;
       print "<TD>$f1</TD>";
       print "<TD>$f2</TD>";
       print "<TD>$f3</TD>";
       }
   } 
```

这里有几件事可以帮助你。

*   你的变量需要它们的印记。没有他们，他们什么都做不了。
*   当您尝试打开文件并想报告错误时，请包含 $! 变量，以便您看到错误是什么。
*   您可以直接拆分为标量变量。这只是一个列表作业。您不需要额外的 @cell 变量。
*   通过使用一些空格，给你的陈述一些喘息的空间。毕竟，它是免费的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-04T05:35:30.810

你几乎拥有它，我认为这应该工作：

```
file='save.txt';
open(F,$file)||die("Could not open $file");

while ($line=<F>){
  my @cells=($f1,$f2,$f3)= split ',',$line;
  if ($f3=~ m/$EA/i) {
    print "<TD>f1</TD>";
    print "<TD>f2</TD>";
    print "<TD>f3</TD>";
  }
} 
```

*这首先*将行拆分为列，然后仅在第三列上执行正则表达式。

顺便说一句，您的代码可能还有其他问题（例如，那些打印语句看起来不像打印变量的值）但我不太了解 perl，所以我只回答了您的主要问题......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-06T06:23:15.003

与其尝试自己进行 CSV 解析，不如使用出色而高效的[Text::CSV_XS](http://search.cpan.org/perldoc?Text::CSV_XS)。这将处理转义和引用。

```
#!/usr/bin/perl -w

use Text::CSV_XS;

my $csv = Text::CSV_XS->new();

# Skip to the data.
while(<DATA>) {
    last if /^-{10,}$/;
}

while( my $row = $csv->getline(*DATA) ) {
    print "@$row\n" if $row->[2] =~ /EA/;
}

__DATA__
Name Age ID
---------------------
KRISTE,22,EA2008
J**EA**N,21,ES4567
JAK,45,EA2008 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-04T16:01:49.360

或者，您可以更改您的正则表达式以匹配列表中的第三项：

```
/[^,]*,[^,]*,.*EA/ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-04T17:17:48.130

您的正则表达式对于您要执行的操作不正确。Ben 的解决方案有效，尽管开头也应该有一个 ^，这确保了正则表达式将从字符串的开头开始匹配：

/^。*?,。*?,.*EA/

此外，从 perl 的角度来看，您的代码有点嘈杂。如果你想让你的代码更容易阅读，你可以这样做（我正在使用 Ben 的正则表达式）：

`$f = 'save.txt';`

 `open( F, $file );` 

`@matches = grep { /^.*?,.*?,.*EA/ } <F>;`

现在@matches 将保存你所有匹配的记录，你可以用它们做你想做的事。

# mainframe - 大型机 JCL 中的 DPRTY 是什么？

> ID：260987
> 
> 赞同：4
> 
> 时间：2008-11-04T05:29:09.327
> 
> 标签：mainframe, jcl

当我们提交作业时，会按顺序执行以下步骤。

那么DPRTY的重要性是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-16T04:59:55.603

`DPRTY`是一个非常古老的 JCL 关键字，可以追溯到 MVS/ESA 时代。调度优先级向 JES 规定了在作业中应给予各个步骤的优先级。

在我可以访问的所有 z/OS 版本（所有受支持的版本）上，它都没有效果。这是因为 WLM（工作负载管理器）目标模式是 z/OS 1.3 及更高版本中使用的唯一模式。我相信这个关键字在 MVS/ESA V5R1M0 中已被弃用（参见 INFO APAR II09592）。

您可以放心地忽略它，因为 JES 本身会忽略它 - 您的所有作业步骤都将在您的 JCL 作业卡中以自上而下的方式执行，调度优先级由`IEAIPSxx`PARMLIB 成员指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-02T02:47:12.503

`DPRTY`用于为作业步骤分配调度优先级。它与类优先级不同，因为类优先级适用于整个作业，而`DPRTY`适用于特定的作业步骤。

# 句法：

`DPRTY(value1, value2) value1 = 0-15 value2 = 0-15`

`DPRTY`计算为

`DPRTY = (value1*16) + value2`******~~*