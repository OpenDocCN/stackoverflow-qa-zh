# StackOverflow 问答 11596000-11596999

# python - 我可以在没有 for 循环的情况下搜索对象列表中的项目吗？

> ID：11596002
> 
> 赞同：1
> 
> 时间：2012-07-21T21:31:38.653
> 
> 标签：python, sqlalchemy

不确定这是否可能，但我使用的是 sqlalchemy，我的查询将所有项目作为对象返回。我想在该对象列表中搜索项目，但不必每次都进行 for 循环。

以下是我现在知道如何做到这一点：

```
for x in objects_from_query:
    print x.name, ' - ', x.age 
```

如果我想知道我的列表中是否有名为“bob”的用户的数据，我必须：

```
for x in objects_from_query:
    if x.name == 'bob':
        print 'bob exists!' 
```

因为我必须经常这样做，所以我想知道是否有更快的方法来查找 bob 是否存在而不必每次都进行 for 循环？通常对于列表，我会执行类似 objects_from_query.index("bob") 的操作，但是当它不是普通列表而是对象列表时，是否有类似的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T21:40:34.377

如果您使用的是 sqlalchemy，则可以使用[Query](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html)[`.filter`](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.filter)对象上的方法，该方法将转换为 SQL 作为 where 子句。像下面这样的东西会起作用： -

```
 import sqlalchemy as sql

    session = sql.orm.sessionmaker( bind=sql.create_engine( 'sqlite:///sql.db' ) )
    Bob = session.query( Names ).filter( Names.name == "bob" ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T21:34:20.307

答案：没有。无论您使用什么数据结构，您都需要一个循环，来自 van Emde Boas、数组、堆等。

这就是你应该学习编程的原因：为了能够找到一种数据结构，使得 for 循环尽可能快地找到你需要的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-21T21:39:46.013

过滤器如何获取所有名称为 bob 的对象，例如：

```
filter(lambda x: x.name == 'bob', objects_from_query) 
```

这仍然可能在下面运行一个循环，但是如果您正在寻找一种更简洁的编写方式，这很好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-21T21:40:02.540

我不能真正谈论第一个，但对于第二个，这样的事情真的可以加快方法

```
print(x.name == 'bob' in objects_from_query) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-21T21:45:11.417

```
>>> class thing():
...   name = ""
...   age = 0
...
>>> [x.age for x in l if x.name == "bob"]
[1] 
```

[列表理解。](http://www.secnetix.de/olli/Python/list_comprehensions.hawk)

# javascript - D3 行为缩放手动调整

> ID：11596004
> 
> 赞同：1
> 
> 时间：2012-07-21T21:31:57.567
> 
> 标签：javascript, d3.js

我正在尝试在我正在开发的一个相当简单的 d3 可视化中手动调整缩放级别。见：http: [//jsfiddle.net/TXPcM/](http://jsfiddle.net/TXPcM/)

缩放和平移后（使用 shift+click 缩小）按“默认缩放”按钮，然后尝试再次平移。您会注意到一个不和谐的转变，因为它“重置”到按下按钮之前的状态。

代码有点原型而且相当冗长——但请寻找 applyZoom 函数。这里的目的是重新应用缩放行为，因此希望清除它可能使用的任何缓存值。似乎不起作用。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-11T11:31:58.330

这样做的方法是修改您的缩放对象，而不仅仅是修改（或在您的情况下重新创建缩放）。

所以抓住你的`zoom`对象并执行以下操作：

```
zoom.translate([x,y])
    .scale(scale); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:46:42.580

i did not look at your code but this d3 google group thread has the answer you're looking for, i think: [https://groups.google.com/d/topic/d3-js/-qUd_jcyGTw/discussion](https://groups.google.com/d/topic/d3-js/-qUd_jcyGTw/discussion)

# oracle - 如何选择性地导出 oracle 到转储 - 减去一些程序或包

> ID：11596005
> 
> 赞同：1
> 
> 时间：2012-07-21T21:31:59.700
> 
> 标签：oracle, select, export, packages, procedures

我们需要导出一个 11g 的数据库以将其导入 10g 系统。但是我们需要省略一个包，或者至少是一些功能和过程，它们是使用 11g-only 特性意外实现的。

值得庆幸的是，10g 只是一个报告数据库，我们只需要在 10g 中实现的几个过程。

有什么想法吗？我已经看到了一些仅表导出或选择性导出某些表的选项。但是我们确实需要一些程序来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:14:42.847

我建议在指定 VERSION 和 INCLUDE 参数的 11g 数据库上使用 expdp （[数据泵导出）：](http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_export.htm)

```
expdp dumpfile=10g.dmp directory=data_pump_dir version=10.2 INCLUDE=PROCEDURE:"LIKE '%XXX'" 
```

这将生成一个与 10g 版本的数据泵导入兼容的数据泵导出文件，并包含以 XXX 结尾的过程。

或者，如果您只有几个要排除的对象，您可以使用 EXCLUDE 参数而不是 include to。

如果您使用 INCLUDE，则只会导出您指定的那些项目。

通过 INCLUDE/EXCLUDE 参数使用数据泵导出/导入[过滤对象](http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_export.htm#i1009903)有很多选项。

# objective-c - Objective C UIAlertView 队列

> ID：11596006
> 
> 赞同：1
> 
> 时间：2012-07-21T21:32:09.857
> 
> 标签：objective-c, ios

我想在 iOS 上一一显示多条消息，但问题是显示 UIAlertView 是非阻塞的。我试图处理警报关闭`clickedButtonAtIndex`并在内部显示相同的警报。这是一些代码：

```
@interface ViewController : UIViewController <UIAlertViewDelegate>
...
@property UIAlertView *alert;
...
@end

...
[alert show]; //somewhere in code, starts chain of messages
...

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    // Some changes in alert object
    [alert show];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:59:24.683

我会有一个 UIAlertView 并在单击按钮时更改它的消息......也许也会增加它的标签

尝试覆盖

```
-(void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex 
```

代替`clickedButtonAtIndex`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T23:57:53.437

我更喜欢在警报视图上设置标签：

```
#define ALERT_1   1
#define ALERT_2   2

...
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:...];
alert.tag = ALERT_1;
[alert show]; //somewhere in code, starts chain of messages
...

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    switch (alertView.tag) {

        case ALERT_1: {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:...];
            alert.tag = ALERT_2;
            [alert show];
        } break;

        case ALERT_2: {
           ....
        } break;
    }

} 
```

这样您就不必为警报视图使用变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T21:43:27.410

You need one property for each alert view you want to show. In the delegate function check which one finished and start the next one:

```
@interface ViewController : UIViewController <UIAlertViewDelegate>
...
@property UIAlertView *alert1;
@property UIAlertView *alert2;
@property UIAlertView *alert3;

@end

...
alert1 = [[UIAlertView alloc] initWithTitle:...];
[alert1 show]; //somewhere in code, starts chain of messages
...

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (alertView == alert1) {
        alert2 = [[UIAlertView alloc] initWithTitle:...];
        [alert2 show];
    } else if (alertView == alert2) {
        alert3 = [[UIAlertView alloc] initWithTitle:...];
        [alert3 show];
    }

} 
```

# emacs - 保存限制中的“缓冲区限制”是什么意思？

> ID：11596010
> 
> 赞同：5
> 
> 时间：2012-07-21T21:33:07.360
> 
> 标签：emacs, elisp

当我在 Emacs 中搜索“save-restriction”的描述时，它有一个关于“缓冲区限制”的句子——我在下面包含了完整的描述。这个词是什么意思？保存限制是如何工作的，考虑到这一点，何时应该使用它？

```
(save-restriction &rest BODY) 

Execute BODY, saving and restoring current buffer's restrictions.
The buffer's restrictions make parts of the beginning and end invisible. 
(They are set up with `narrow-to-region' and eliminated with `widen'.)
This special form, `save-restriction', saves the current buffer's restrictions
when it is entered, and restores them when it is exited.
So any `narrow-to-region' within BODY lasts only until the end of the form.
The old restrictions settings are restored
even in case of abnormal exit (throw or error).

The value returned is the value of the last form in BODY. 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T22:24:53.950

除非您的代码的目的是修改限制、当前缓冲区、点或窗口配置，否则您应该使用适当的保存方法来记住状态并自动为您恢复它。

*   `save-current-buffer`保存当前缓冲区，以便您可以切换到另一个缓冲区而无需记住切换回来。
*   `save-excursion`保存当前缓冲区及其当前点和标记，因此您可以移动点而无需记住恢复它。
*   `save-restriction`保存限制，以便您可以缩小或`widen`不必记住恢复它。
*   `save-window-excursion`保存框架上所有窗口的完整配置，除了当前缓冲区中的点值。

（旁注：我上次使用`save-window-excursion`时没有`window-configuration-p`方法。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T21:37:42.257

narrow-* 函数使用 save-restriction 来保存当前缓冲区，然后再隐藏它，以便能够恢复它。

'save-restriction' 记住所有的 'buffer' 数据结构，特别是 point-min、point-max、point-max-marker 等。例如，在窄函数修改缓冲区的可见性之前，它会记住旧配置，以便能够使用 widen() 恢复它。

# python - 从函数定义外部向 Python 类添加数据成员

> ID：11596015
> 
> 赞同：7
> 
> 时间：2012-07-21T21:34:30.307
> 
> 标签：python, class

我对 Python 很陌生，我似乎无法理解这一点。考虑一下这个简单的 Python 代码。

```
class point:
   i = 34

test = point()
test.y = 45

print test.y 
```

如您所见，我的点实例称为测试，但是`test.y = 45`当`y`它不是点类的数据成员时执行了。没有引发错误，并且 y 属性似乎已自动添加到类中。

为什么会这样？这不是误会吗？或者我错过了一些非常基本的东西。C++ 不能做同样的事情，它会引发编译器错误。这个奇怪的功能有什么原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T21:37:30.323

因为这是 Python，而不是 C++（或 Java）。将其称为错误功能是对 Python 工作原理的**根本**误解。

在 Python 中，您不需要声明变量或属性。没有“点类的数据成员”这样的东西。你`i`只是一个类级别的变量，但无论你将该属性与类关联起来，它都是一样的。您可以动态地将属性添加到类、实例、模块，无论您喜欢什么。这就是动态类型语言的意义所在。

事实上，这样做是定义实例变量的*唯一方法。*正如我所说，您的`i`above 是一个类属性，由该类的所有成员共享。获得实例级变量的唯一方法是“动态地”添加它，通常在`__init__`方法中，但您可以在任何您喜欢的地方添加。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T22:19:35.120

这只是脚本语言的常见问题。Python 可以让你做到这一点，Ruby 也可以，事实上，你不必预先定义你的局部变量。为什么不在你的课上？不仅如此，您还可以选择新插入的变量/函数是只影响一个对象还是该类的所有实例。

在 TDD 和 UnitTesting 中做大量工作的人*喜欢*这种*错误功能*。实际上，我什至会说 C++ 静态类型不会减少我的程序错误，其减少我的程序错误的程度几乎不亚于一种可以简化我的单元测试的语言。

但是，如果您担心，您可以随时使用 _____slots_____

[https://stackoverflow.com/a/3603624/253098](https://stackoverflow.com/a/3603624/253098)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T21:36:04.647

这就是 Python 的工作原理。您可以随意在类或实例上创建新属性。它的缺点是在编译时无法捕获许多错误，但它的优点是允许更灵活的动态编程。

如果您对这种行为感到惊讶，您应该阅读[Python 教程](http://docs.python.org/tutorial/)以熟悉 Python 基础知识。

# java - 使用 CachedRowSet 插入行失败

> ID：11596022
> 
> 赞同：2
> 
> 时间：2012-07-21T21:35:58.187
> 
> 标签：java, derby, cachedrowset

我正在使用 CachedRowSetImpl，我可以从数据库中获取数据，但我无法插入。

这是代码：

```
public class NewClass {

    static final String DATABASE_URL = "jdbc:derby://localhost:1527/TaskDB;create=true";
    static final String USERNAME = "user";
    static final String PASSWORD = "user";

    public static void main (String [] agr) throws SQLException
    {
        CachedRowSetImpl rs = new CachedRowSetImpl();
        rs.setUrl(DATABASE_URL);
        rs.setUsername(USERNAME);
        rs.setPassword(PASSWORD);

        rs.setCommand("SELECT * FROM TASKTABLE");
        rs.execute();

        rs.moveToInsertRow();
        rs.updateString("Column_Name","DataString");

        rs.insertRow();
        rs.moveToCurrentRow();
        rs.updateRow();
    }

} 
```

它抛出异常：

> 线程“主”java.sql.SQLException 中的异常：在 NewClass.main(NewClass.java:32) 的 com.sun.rowset.CachedRowSetImpl.insertRow(CachedRowSetImpl.java:5462) 插入行失败

我试过 JdbcRowSetImpl 而不是 CachedRowSetImpl ，它工作正常

更新：我使用此代码来捕获有关异常的更多详细信息：

```
 catch(SQLException e) {
     do {
        System.out.println("SQLState:" + e.getSQLState());
        System.out.println("Error Code:" + e.getErrorCode());
        System.out.println("Message:" + e.getMessage());
        Throwable t = e.getCause();
        while(t != null) {
            System.out.println("Cause:" + t);
            t = t.getCause();
        }
        e = e.getNextException();
    } while (e != null);
} 
```

输出是：

> SQL 状态：空
> 
> 错误代码：0
> 
> 消息：插入行失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:43:23.437

我遇到了和你一样的问题，但我把`acceptChanges(cnnt)`抛出异常的地方放在最后，如 API 所述。

……

```
cachedSet.moveToInsertRow();
cachedSet.updateInt(1,12);
cachedSet.updateString(2,"Joe");
cachedSet.updateString(3,"abcde");
cachedSet.insertRow();
cachedSet.moveToCurrentRow();
cachedSet.acceptChanges(cnnt); 
```

......

如果我在没有最后一个的情况下运行它`row(acceptChanges(cnnt))`，则不会抛出任何异常，但不会更新数据库。

如果我用最后一个运行它，则会出现与您相同的异常。我检查了，并`acceptChanges()`从 API 获得了文档：

```
SQLException - if the cursor is on the insert row 
```

我检查了以下文件`insertRow()`：

> SQLException - 如果发生数据库访问错误；结果集并发为 CONCUR_READ_ONLY，在关闭的结果集上调用此方法，如果在光标不在插入行上时调用此方法，或者如果插入行中的所有非可空列都没有被赋予非-空值

也许你可以从中得到一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:38:27.957

您需要调用 rs.acceptChanges(); 而不是 rs.updateRow();

尝试替换 rs.updateRow(); 具有以下内容：

```
try{
   jrs.acceptChanges();
}catch(SyncProviderException spe){
  //Conflict handling code.
} 
```

# ruby-on-rails - Capistrano：部署开发中未使用的文件

> ID：11596025
> 
> 赞同：2
> 
> 时间：2012-07-21T21:36:05.970
> 
> 标签：ruby-on-rails, deployment, capistrano

我有一个 Rails 应用程序，它使用一些具有不同值（路径）的 bash 脚本进行开发和生产。我想使用 capistrano 使用适合生产的值来部署应用程序。例如在#{Rails.root}+'script.sh' 中：

```
 #!/bin/bash
 /usr/local/bin/convert  -colorspace sRGB -background transparent -font Myriad-Pro-Condensed -fill grey0 -stroke yellow -strokewidth 2 -size 640x480 -gravity $3 label:"$2" $1.png 
```

对于生产，我需要：

```
 #!/bin/bash
 /usr/bin/convert  -colorspace sRGB -background transparent -font Myriad-Pro-Condensed -fill grey0 -stroke yellow -strokewidth 2 -size 640x480 -gravity $3 label:"$2" $1.png 
```

是否有涉及在部署时动态更改文件的解决方案（使用一些 gsub 命令更改值）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T00:25:29.423

ERB 模板可能是最直接的。在模板中，您可以访问所有 Capistrano 变量，以便了解您所处的阶段等。上限代码如下所示：

```
template = File.read(File.join(File.dirname(__FILE__), "templates/script.sh.erb"))
result = ERB.new(template).result(binding)
put result, "#{release_path}/script.sh" 
```

# mobile - 有多少百分比的移动浏览器支持 CSS 媒体查询？

> ID：11596031
> 
> 赞同：6
> 
> 时间：2012-07-21T21:36:37.890
> 
> 标签：mobile, css, responsive-design, media-queries

我正在开发一个支持移动设备的新网站，我想尝试使用“响应式设计”/“自适应设计”/CSS 媒体查询。我想知道最近是否有支持媒体查询的移动浏览器的报告。如果不是，那么合理的近似值是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:37:48.463

当我需要查看跨浏览器支持时，我一直使用这个网站： [caniuse.com](http://caniuse.com/#feat=css-mediaqueries)这个网站说对媒体查询的支持（跨所有浏览器）为 78.37%

对移动浏览器的支持率为 100%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T02:25:14.873

大约 87.14% 的支持和 0.01% 的部分支持。查看更多：[http ://caniuse.com/css-mediaqueries](http://caniuse.com/css-mediaqueries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T02:31:40.563

大约 80%。你不需要担心 Android、Opera Mini 和 iOS，但是还有另外 20% 是 Bada、旧的黑莓手机、Windows Mobile ......所以你应该添加一个 polyfill life [respond.js](https://github.com/scottjehl/Respond/)这将有助于桌面浏览器比不支持像 IE8 和波纹管这样的媒体查询。

# php - First Parameter in Mysqli functions

> ID：11596038
> 
> 赞同：1
> 
> 时间：2012-07-21T21:38:07.723
> 
> 标签：php, mysqli

I'm starting to transition towards Mysqli on my website project and am noticing that for several different functions such as `mysqli_query` or `mysqli_select_db` it is requiring the first parameter to be `$link`, `$link` being `mysqli_connect()`.

Is this necessary for every function? If I leave out the parameter can I expect the function to go to the default `mysqli_connect()` I put at the beginning of my code?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:43:52.067

It is only required if you use the procedural interface.

If you are using the object oriented interface it isn't necessary because all of your calls use the `$mysqli` object to call functions.

See [Dual procedural and object-oriented interface](http://www.php.net/manual/en/mysqli.quickstart.dual-interface.php) for more explanation.

# jpa - JPA 中的 M:N 关系（包装给定的表）

> ID：11596041
> 
> 赞同：5
> 
> 时间：2012-07-21T21:38:56.560
> 
> 标签：jpa, many-to-one

我有一个**m:n**关系**book-borrow-user**，借用的是连接表。

给出的表格（不能更改）：

*   一方面，它们也被 jdbc 应用程序使用。
*   另一方面，我想通过 jpa 使用它们

书（book_id）-借（book_id，used_id）-用户（user_id）

```
 used jpa annotations:
 User:
 @OneToMany(targetEntity=BorrowEntity.class, mappedBy="user")
 @JoinColumn(name="USER_ID", referencedColumnName="USER_ID")    
 private List<BorrowEntity>borrowings;

 Book: 
 @OneToMany(targetEntity=BorrowEntity.class, mappedBy="book")
 @JoinColumn(name="BOOK_ID", referencedColumnName="BOOK_ID")
 private List<BorrowEntity>borrowings; 
```

*我的问题是，通过上面的设置，它向借用表添加了一些额外的（不需要的）字段：*

'user_USER_ID' 和 'book_BOOK_ID'

**如何配置 jpa 注释以仅保留 Borrow:user_id,book_id 这足以多对一？**

看一下图片，它说明了更多：

![借书](../Images/fa51cfca8cb8a4bc8202aa6eea7df722.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T08:49:04.703

首先，由于借用表是一个纯连接表，所以根本不需要映射它。您所需要的只是使用此借用表作为 JoinTable 的 ManyToMany 关联。

```
@ManyToMany
@JoinTable(name = "borrow",
           joinColumns = @JoinColumn(name = "USER_ID"),
           inverseJoinColumns = @JoinColumn(name = "BOOK_ID"))
private List<Book> borrowedBooks;
...

@ManyToMany(mappedBy = "borrowedBooks")
private List<User> borrowingUsers; 
```

如果你真的想将连接表映射为一个实体，那么它应该包含两个 ManyToOne 关联（每个外键一个关联）。所以以下是错误的：

```
@OneToMany(targetEntity=BorrowEntity.class, mappedBy="user")
@JoinColumn(name="USER_ID", referencedColumnName="USER_ID")    
private List<BorrowEntity>borrowings; 
```

实际上，`mappedBy`意味着：此关联是双向 OneToMany/ManyToOne 关联的反面，后者已由实体`user`中的字段映射。`BorrowEntity`请查看此字段的注释以了解如何映射关联。

所以`@JoinColumn`没有意义。与 相矛盾`mappedBy`。您只需要以下内容：

```
@OneToMany(mappedBy="user")
private List<BorrowEntity>borrowings; 
```

targetEntity 也是多余的，因为它是一个`List<BorrowEntity>`: JPA 可以从列表的泛型类型推断目标实体。

# wordpress - jQuery - Ajax 显示空响应/成功：与 WordPress 帖子和页面一起使用时未触发

> ID：11596042
> 
> 赞同：1
> 
> 时间：2012-07-21T21:39:02.437
> 
> 标签：wordpress, jquery

任何帮助，将不胜感激。

我创建了一个小脚本，它在与简单的 php 页面一起使用时效果很好。现在我只是尝试将此脚本添加到我的 WordPress 帖子和页面中。所以我使用“exec-php”插件来调用 php 脚本。

一切正常。但是当用户填写数据并提交表单时，数据实际上被提交了（我可以在 firebug 中看到发布的变量），但是当与 wordpress 一起使用时，响应不会显示在表单下，因为它在使用 plain 时工作正常php页面。

我的 jQuery 代码是这样的：

```
var dataString = 'name=' + name + '&country=' + country + '&lang=' + language;

$("#paypal-submit").click(function () {

    $.ajax({
        type: "POST",
        url: "get.php",
        data: dataString,
        dataType: 'html',
        success: function (gotresponse) {
            $('#response-id').html("<div id='id-message'><p>Got Response</p></div>");
            $('#id-message').html(gotresponse).fadeIn(1500, function () {
                $('#id-message');
            });
            $('#name').attr('onchange', 'resetForm()');
            $('#country').attr('onchange', 'resetForm()');
        }
    });
}); 
```

当我实际在firebug中查看整个过程时，可以看到数据实际上是发布到服务器上的。

```
200 OK               2.03s 
```

**但是当我在萤火虫控制台中看到响应选项卡时，它是空的。我认为与 WordPress 一起使用时不会触发成功消息。**

我无法弄清楚可能是什么问题？有人可以帮我解决这个问题吗？

*注意：相同的脚本按原样使用时可以正常工作，但与 WordPress 一起使用时，不会触发 jQuery - Ajax 成功。*

第一次编辑：

我刚刚包含了错误：在 ajax 函数中

```
error:function(x,e){
            if(x.status==0){
            alert('You are offline!!\n Please Check Your Network.');
            }else if(x.status==404){
            alert('Requested URL not found.');
            }else if(x.status==500){
            alert('Internel Server Error.');
            }else if(e=='parsererror'){
            alert('Error.\nParsing JSON Request failed.');
            }else if(e=='timeout'){
            alert('Request Time out.');
            }else {
            alert('Unknow Error.\n'+x.responseText);
            }
        } 
```

现在，当我提交表单时，我收到“您离线！请检查您的网络”的警报。触发此错误。所以现在请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:45:08.377

On you success:function() , it should success:function(data) then change .html(gotresponse) to .html(data)

# makefile - Ubuntu LDFLAGS——按需

> ID：11596044
> 
> 赞同：4
> 
> 时间：2012-07-21T21:39:32.160
> 
> 标签：makefile

我有一个无法正确链接的 C 项目，我怀疑这是因为 gcc 传递给 ld 程序的 --as-needed 标志。由于该标志，gcc 将 *.c 文件之前作为选项列出的任何链接库视为不必要的，并且不会链接它们。

```
 PREFIX?=/usr/local
CFLAGS=-D_LARGEFILE64_SOURCE=1 -g -Wall -I${PREFIX}/apr/include/apr-1  -I${PREFIX}/apr/include/apr-util-1
LDFLAGS=-lapr-1 -pthread -laprutil-1

all: devpkg
devpkg: bstrlib.o db.o shell.o commands.o 
install: all
    install -d $(DESTDIR)/$(PREFIX)/bin/
    install devpkg $(DESTDIR)/$(PREFIX)/bin/

clean:
    rm -f *.o
    rm -f devpkg
    rm -rf *.dSYM 
```

当我运行这个makefile时，我得到以下信息。

```
 cc -D_LARGEFILE64_SOURCE=1 -g -Wall -I/usr/local/apr/include/apr-1  -I/usr/local/apr/include/apr-util-1   -c -o bstrlib.o bstrlib.c
cc -D_LARGEFILE64_SOURCE=1 -g -Wall -I/usr/local/apr/include/apr-1  -I/usr/local/apr/include/apr-util-1   -c -o db.o db.c
cc -D_LARGEFILE64_SOURCE=1 -g -Wall -I/usr/local/apr/include/apr-1  -I/usr/local/apr/include/apr-util-1   -c -o shell.o shell.c
cc -D_LARGEFILE64_SOURCE=1 -g -Wall -I/usr/local/apr/include/apr-1  -I/usr/local/apr/include/apr-util-1   -c -o commands.o commands.c
cc -D_LARGEFILE64_SOURCE=1 -g -Wall -I/usr/local/apr/include/apr-1  -I/usr/local/apr/include/apr-util-1  -lapr-1 -pthread -laprutil-1  devpkg.c bstrlib.o db.o shell.o commands.o   -o devpkg
/tmp/ccZcAm9b.o: In function `main':
/home/zach/Desktop/devpkgzed/devpkg.c:14: undefined reference to `apr_pool_initialize'
/home/zach/Desktop/devpkgzed/devpkg.c:15: undefined reference to `apr_pool_create_ex'
/home/zach/Desktop/devpkgzed/devpkg.c:29: undefined reference to `apr_getopt_init'
/home/zach/Desktop/devpkgzed/devpkg.c:31: undefined reference to `apr_getopt' 
```

我的问题是我真的不明白如何`make`通过设置的 CFLAGS 提出这些命令。我怎样才能让链接器选项跟随编译部分而不是相反，这会触发这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T17:36:33.937

Make 具有编译源文件和链接可执行文件和库的内置规则。您列出的命令由这些规则生成。

这对您来说失败的原因是，在链接时，库应该列在目标文件之后，因为链接器只通过它的参数一次，并且会丢弃在看到它们时未解析的任何符号。要更正它，请将您的库放在`LDLIBS`变量中，而不是`LDFLAGS`变量中（即只需替换`LDFLAGS`为`LDLIBS`）。该`LDFLAGS`变量用于链接器的非库选项，例如`-L`或`-shared`等

# c# - I miss Visual Basic's "On Error Resume Next" in C#. How should I be handing errors now?

> ID：11596045
> 
> 赞同：13
> 
> 时间：2012-07-21T21:39:32.573
> 
> 标签：c#, error-handling, error-suppression

In Visual Basic I wrote just `On Error Resume Next` in the head of my program and errors were suppressed in the entire project.

Here in C# I miss this feature very much. The usual `try-catch` handling for every single procedure is not only very time-intensive, it brings undesired effects. If an error is encountered, even if handled, the code doesn't *continue* from the point it occurred. With `On Error Resume Next`, the code continued from the point of error, skipping just the function call that caused the error.

I am not deeply involved with C# yet, but maybe there exists in C# a better error handling than the primitive `try-catch`.

I also would like to have the module or function name where the error occured as well as the the line number in my error message. The `Exception` class doesn't provide that features as far I know. Any ideas (managed, of course, without involving any process classes on my own application)?

How do you handle the errors in bigger projects? I hope I do not have to add a `try-catch` to each method. Somehow C# throws many errors - that seems to be typical of the language.

**My Solution which I found to re-solve several of my problems:**

```
public partial class Form1 : Form
{

    public Form1()
    {
        InitializeComponent();
    }

    [STAThread]
    static void Main()
    {
      Application.ThreadException += new System.Threading.ThreadExceptionEventHandler(Application_ThreadException); //setup global error handler
      Application.Run(new Form1());
    }

    private static void Application_ThreadException(object sender, System.Threading.ThreadExceptionEventArgs e)
    {   
            MessageBox.Show("Unhandled exception: " + e.Exception.ToString()); //get all error information with line and procedure call
            Environment.Exit(e.Exception.GetHashCode()); //return the error number to the system and exit the application
    }

    private void button1_Click(object sender, EventArgs e)
    {
        string s = ""; s.Substring(1, 5); //Produce an error
    }

   } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-21T21:42:49.330

Continuing after errors as if nothing's happened is a *terrible* way of programming.

Can't work out the new balance of the account? That's okay, let's just store it as 0\. No-one will ever know, right?

`try`/`catch` blocks should actually be relatively rare, because there are relatively few errors you can really recover from. Typically you should have one try/catch block at the top of some logical operation, so that if it fails you can inform the user and continue with other entirely separate operations - or terminate the app completely, depending on the kind of application you're writing. (Web apps are a good example here: you can fail the request, hopefully taking care that you don't have nasty persistent side-effects, and continue to handle other requests.)

Where there are places you legitimately expect errors you can recover from, catch those specific exceptions and handle them appropriately (e.g. falling back to writing to a file if writing to a database fails). Again, these are relatively few and far between. If you find yourself writing a `try`/`catch` block in every method (or even every class) then you're probably handling exceptions inappropriately.

> I also would like to have the module or function name where the error occured as well the line number in my error message. The Exception class doesn't provide that features as far I experienced.

Yes it does. The stack trace shows the type, method and line number (where available) for each frame in the stack... as well as a (hopefully useful) message, of course. Oh, and potentially a nested exception too, if one failure was caused by another.

> Somehow C# throws many errors on execution always, that's language typical.

Nope, that just suggests you're Doing It Wrong.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-21T21:43:16.653

No.

Speaking as an ex-VB programmer, please let me assure you: that is the worst and most abused feature ever added to any language ever. Here's the idea instead:

1.  write code that doesn't error ... unless something happens that is *actually a problem*. This may involve *checking your assumptions* before you do things; great: do that
2.  only catch problems you were expecting; swallowing all errors is just asking for massive problems

As already noted by Jon, it is actually pretty rare to need exception handling all over the place. Usually you just let an exception bubble up to a higher caller, because **something bad just happened**. And when I *do* have a `try`, it is more commonly `try`/`finally` (not `try`/`catch`) - with `using` and `lock` (etc) being special-cases of those for convenience.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-21T21:55:10.603

不，你不能。这在 C# 中是不可能的（也不应该在任何其他语言中）。

在 VB 中这样做的真正用途是在代码的某些部分进行错误处理，就像`try / catch`. 您启用它、检查、执行您的工作并使用或重定向到遵循不同路径的标签来`Err.Number <> 0`恢复错误流以处理错误或继续执行。`On Error GoTo 0``On Error GoTo someErrorCase:`

您一定已经学会了独自编程或与不正确的人一起编程。忽略错误是一个坏习惯，不仅如此，仅仅遵循代码是一件可怕的事情。毕竟，错误是可能的。

相信我。我是一名 VB 程序员，当我停下来阅读最佳实践时，这很有启发性。

只是添加一些，也尝试使用`Option Explicit`，它可能听起来更多的工作声明所有变量，但它会让你对代码更有信心，因为类型检查会限制一些常见的错误。

此外，C# 异常非常有用，并且包含您可能想要的所有信息。如果您没有遇到异常本身的问题，只需打开它并查看其内部异常（我发现我在为 Web 开发时总是在查看内部异常，因为所有代码都处于更高级别）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-21T21:42:18.180

Actually, exceptions are rather the exception, they don't happen all the time. When they do happen, you want to know they happened, and either handle them or shut down your process. Most of the times letting an exception go unhandled is going to lead to very unexpected results.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-21T22:06:08.970

你一直在错误地使用那个 VB 特性，你很幸运不能像在 C# 中那样使用它。

在 VB 中使用该功能时，您应该在每次可能导致错误的操作后检查错误状态。如果使用得当，它的代码量不亚于`try...catch`在每个可能导致错误的操作周围都有块。

因此，如果您认为必须在 C# 中进行更多的错误处理，那么您之前所做的错误处理就太少了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-12T19:54:20.763

“On Error Resume Next”允许“内联错误处理”，这是 VB 中的专家级错误处理。这个概念是逐行处理错误，或者根据错误执行操作，或者在有益时忽略错误 - 但按照编写代码的顺序运行代码而不使用代码跳转。

不幸的是，许多新手使用“On Error Resume Next”通过忽略所有错误来隐藏他们的能力不足或懒惰。Try/catch 是块级错误处理，在 .NET 之前的世界中，它在设计和实现上是中间的。

VB.NET 中“On Error Resume Next”的问题在于，它在执行代码的每一行都加载了 err 对象，因此比 try/catch 慢。

[https://msdn.microsoft.com/en-us/library/aa242093(v=vs.60).aspx](https://msdn.microsoft.com/en-us/library/aa242093(v=vs.60).aspx)

据说没有真正 VB 经验的中级 C# 程序员不应该因为他们对另一种“Microsoft Net”语言的奇怪蔑视而试图让 C# 变得愚蠢和功能受限，请考虑以下代码：

```
//-Pull xml from file and dynamically create a dataset.
 string strXML = File.ReadAllText(@"SomeFilePath.xml");
 StringReader sr = new StringReader(strXML);
 DataSet dsXML = new DataSet();
 dsXML.ReadXml(sr);

string str1 = dsXML.Tables["Table1"].Rows[0]["Field1"].ToString();
string str2 = dsXML.Tables["Table2"].Rows[0]["Field2"].ToStrin();
string str3 = dsXML.Tables["Table3"].Rows[0]["Field3"].ToStrin();
string str4 = dsXML.Tables["Table4"].Rows[0]["Field4"].ToString();
string str5 = dsXML.Tables["Table5"].Rows[0]["Field5"].ToString(); 
```

如果 xml 通常具有 Field3 的值但有时没有；我将收到一个恼人的错误，即表格不包含该字段。如果不是，我可以不在乎，因为它不是必需的数据。在这种情况下，ON Error Resume Next 将允许我忽略错误，并且我不必围绕每一行代码编写代码，设置变量检查表、行和列组合是否存在包含方法。这是一个小例子；我可能会从大文件中提取数千个表、列、行组合。此外，这里假设必须以这种方式填充字符串变量。这是未处理的代码，会有麻烦。

考虑一个 VB.NET 和 ON 错误恢复下一个实现：

```
 On Error Resume Next

        Dim strXML As String = File.ReadAllText("SomeNonExistentFileCausingAnErrorCondition.xml")
        If String.IsNullOrEmpty(strXML) Then
            strXML = strSomeOtherValidXmlThatIUseWhenTheFileIsEmpty
        End If
        Dim srXmL As StringReader = New StringReader(strXML)
        Dim dsXML As DataSet = New DataSet()
        dsXML.ReadXml(srXmL)
        If Err.Number <> 0 Then
            MsgBox(Err.Number & Space(1) & Err.Description)
            Exit Sub
        End If

        Dim str1 As String = dsXML.Tables("Table1").Rows(1)("Field1").ToString()
        Dim str2 As String = dsXML.Tables("Table2").Rows(2)("Field2").ToString()
        Dim str3 As String = dsXML.Tables("Table3").Rows(3)("Field3").ToString()
        Dim str4 As String = dsXML.Tables("Table4").Rows(4)("Field4").ToString() 
```

在上面的代码中，只需要处理一种可能的错误情况；即使加载文件时出错。On Error Resume Next 实际上允许我按预期恢复，这允许我检查字符串条件并使用我的备用字符串（我很清楚我也可以检查文件是否存在并避免文件错误，但如果这是一个没有任何内容的好文件，strXML 将是一个空字符串）。处理了对其余代码至关重要的错误并退出了该方法，因为加载的数据集对于它之外的其余处理至关重要（如果需要，可以通过忽略任何错误来运行处理）。文件错误可以被忽略，因为我忽略了它，或者我可以检查错误情况并记录它。

RAD 开发需要 On Error Resume Next。C# 是我选择的语言，但由于许多原因，它不像 VB 那样是一种 RAD 语言。我希望所有的程序员都意识到几种主要的语言（即C）只是运行并且不会因为未处理的错误而停止执行；在他们认为必要的地方检查他们是开发人员的工作。On Error Resume Next 是微软世界中最接近该范式的东西。

幸运的是，.NET 确实提供了许多高级选择来处理这些情况。我避开了包含。因此，在 C# 中，您必须提高语言知识水平，并且根据 C# 语言规范正确地解决此类问题。考虑一种处理大量重复代码行的解决方案，这些代码行可能包含恼人的丢弃错误：

```
try
            {
                if (!File.Exists(@"SomeFilePath.xml")) { throw new Exception("XML File Was Not Found!"); }
                string strXML = File.ReadAllText(@"SomeFilePath.xml");
                StringReader sr = new StringReader(strXML);
                DataSet dsXML = new DataSet();
                dsXML.ReadXml(sr);

                Func<string, string, int, string> GetFieldValue = (t, f, x) => (dsXML.Tables[t].Columns.Contains(f) && dsXML.Tables[t].Rows.Count >= x + 1) ? dsXML.Tables[t].Rows[x][f].ToString() : "";

                //-Load data from dynamically created dataset into strings.
                string str1 = GetFieldValue("Table1", "Field1", 0);
                string str2 = GetFieldValue("Table2", "Field2", 0);
                string str3 = GetFieldValue("Table3", "Field3", 0);
                //-And so on.

            }
            catch (Exception ex)
            {
                Debug.WriteLine(ex.Message);
            } 
```

尽管在 try/catch 块中，lambda 函数正在检查从由 xml 动态填充的数据集中提取的每个表、行、列组合是否存在。这可以逐行检查，但需要大量多余的代码（这里我们有相同数量的执行代码，但要维护的书面代码要少得多）。不幸的是，这可能被认为是“单线功能”的另一种不良做法。在 lambdas 和匿名函数的情况下，我打破了这条规则。

由于 .NET 提供了很多方法来检查对象的状态；On Error Resume Next 对 VB 专家来说并不像在 .NET 之前那样重要，但仍然很好用；尤其是当您编写的代码会浪费时间而不是快速和肮脏的代码时。没有一个曾经在专家级别上使用过 VB 的人会声称 On Error Resume Next（内联错误处理）是一种语言中添加的最糟糕的功能。但是，它已被新手广泛滥用。

# android - sdk target for barcode scanner library and main cordova android app project

> ID：11596046
> 
> 赞同：1
> 
> 时间：2012-07-21T21:39:43.317
> 
> 标签：android, cordova, barcode-scanner, phonegap-plugins

I am working on a Cordova Android project with barcode scanning ability. I find the detailed steps on this blog helpful: [http://simonmacdonald.blogspot.ca/2011/12/installing-barcode-plugin-for-phonegap.html](http://simonmacdonald.blogspot.ca/2011/12/installing-barcode-plugin-for-phonegap.html)

However, I am a bit concerned about the mismatch of SDK target of barcodeScanner library (Android 4.0) and that of main project being 2.x. As 2.x is still dominant Android OS in the market, it makes sense to build main project targeting 2.x.

Will that barcodeScanner library targeting 4.0 work well on 2.x handset?

Am I missing something here?

Any pitfalls to watch out for? especially considering future code changes to adapt to fast changing Android handsets.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:32:50.007

别担心。您总是希望针对最新版本的 Android SDK 构建您的应用程序。SDK 可以处理向后兼容性方面的问题。如果您想从 Android 2.1 和更高版本开始，请将 AndroidManifest.xml 中的最低 SDK 设置为 7。

# ios - -webkit-overflow-scrolling Problems With Objects Inserted Into DOM

> ID：11596047
> 
> 赞同：4
> 
> 时间：2012-07-21T21:39:45.627
> 
> 标签：ios, mobile-safari

I'm using -webkit-overflow-scrolling:touch for native scrolling capabilities on my iPad. But I've come into quite an odd problem:

I have one `div` with various children. If these children are big enough to create the need for scrolling, the device properly scrolls correctly, with momentum and all. However, if this div is not big enough to require scrolling, and suddenly has elements inserted into it and now does require scrolling, you will not be able to scroll the element at all.

I hope that wasn't too incredibly confusing, but if someone could shed some light on what to do in this situation, that would be fantastic. There isn't much documentation about this property out there.

EDIT: Tried testing this a lot, and it seems now it's just a generally intermittent problem. Every 1 out of 5 times or so, scrolling just fails for my entire web app, no matter the contents.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T04:07:36.723

我有同样的问题，似乎在添加新的 DOM 元素后分配 CSS 类似乎工作正常：

```
// your code to add a div to the DOM
// the div contains a scrollable div with the content class
setTimeout(function(){
  // this is using JQuery
  div.find(".content").addClass("overflowScroll");
}, 1);

// CSS class
.overflowScroll {
  overflow: hidden;
  overflow-y: scroll;
  -webkit-overflow-scrolling: touch;
}

// The HTML for the div
// I am adding a dynamic list to the content div
// which should use the overflow scroll
<div class="panel">
  <div class="header">

  </div>
  <div class="content"></div>
</div> 
```

# bash - 如何读取 Bash 中的任何一个键？

> ID：11596059
> 
> 赞同：7
> 
> 时间：2012-07-21T21:42:16.607
> 
> 标签：bash, keyboard

我`read -n 1 KEY`可以获得大多数键，但由多个字符表示的键除外。例如，如果我按向上箭头键：

```
$ read -n 1; echo
^[[A
$ [A 
```

正如你所看到的，`read`只需要`Esc`和`[A`剩下的。

我希望能够在脚本中做的是：

1.  使用箭头键浏览列表并按下`Enter`以对其进行操作
2.  对于其他操作，请按不同的键。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T21:57:25.697

您最好使用上面提到的 jm666 对话框，但是还有其他方法可以给猫剥皮。

```
read -n 1 x; while read -n 1 -t .1 y; do x="$x$y"; done 
```

基本上等到你读到一个字符，然后旋转消耗输入，直到 0.1 秒没有输入。

警告，快速打字员可能会生气。您可能需要调整该超时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-21T21:46:51.853

不是您问题的直接答案-而是解决方法：

您可能应该检查“对话框”实用程序以从外壳创建“ncurses”（面向屏幕）对话框。见：[http ://hightek.org/dialog/](http://hightek.org/dialog/)

谷歌形成一些例子，或检查：[http ://unstableme.blogspot.sk/2009/12/linux-dialog-utility-short-tutorial.html](http://unstableme.blogspot.sk/2009/12/linux-dialog-utility-short-tutorial.html)

# javascript - Jquery ajax发布请求不起作用

> ID：11596065
> 
> 赞同：6
> 
> 时间：2012-07-21T21:42:49.617
> 
> 标签：javascript, jquery, python, pyramid

我有一个简单的 ajax 表单提交，但它一直给我一个错误。所有错误都是“错误”。没有代码，没有描述。没有什么，当我在它失败时提醒它。

带有 jQ​​uery 的 Javascript：

```
$(document).ready(function(){

        $(".post-input").submit(function(){
            var postcontent = $(".post-form").val();

            if (postcontent == ""){
                return false;
            }

            $(".post-form").attr("disabled", "disabled");

            $.ajax({
                url: '/post',
                type: 'POST',
                data: {"post-form": postcontent},
                dataType: json,
                success: function(response, textStatus, jqXHR) {
                    alert("Yay!");
                },
                error: function(jqXHR, textStatus, errorThrown){
                    alert(textStatus, errorThrown);
                }
            });
        });
    }); 
```

HTML：

```
<form class="post-input" action="" method="post" accept-charset="utf-8">
                <textarea class="post-form" name="post-form" rows="1" cols="10" onFocus="this.value='';return false;">What are you thinking about...</textarea>
                <p><input class="post-submit" type="submit" name = "post.submitted" value="Post"></p>
            </form> 
```

如果那里没有问题，那么服务器端（金字塔）：

```
def post(request):
    session = Session()
    user = authenticated_userid(request)
    postContent = request.POST['post-form']
    if not postContent == '':
        session.add(Activity(user.user_id, 0, postContent, None, None))
        return {}
    return HTTPNotFound() 
```

更新：在使用 firebug 进行更多调试后，我发现 post 请求正文仅包含 post.submitted=Post，而不是 {"post-form": postcontent} 的预期结果。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-21T21:54:32.200

根据[jQuery](http://api.jquery.com/jQuery.post/)文档，您必须声明数据类型：

```
$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

此外，查看您的服务器端代码，您实际上并不想发布 JSON 格式的数据。这`{"post-form":postcontent}`是 JSON 格式的数据。您真正想要做的是发送 TEXT 或 HTML。看起来它是表单数据，我猜是 TEXT。

**试试这个：**

```
$.ajax({
   url: '/post',
   type: 'POST',
   data: 'post-form='+postcontent,
   dataType: 'text',
   success: function(response, textStatus, jqXHR) {
     alert("Yay!");
   },
   error: function(jqXHR, textStatus, errorThrown){
     alert(textStatus, errorThrown);
  }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T21:54:42.857

由于您要发布`JSON`-data，您必须声明数据类型“JSON”：

```
$.ajax({
  url: '/post',
  type: 'POST',
  dataType: "json",
  data: {"post-form": postcontent},
  success: function(response, textStatus, jqXHR) {
    alert("Yay!");
  },
  error: function(jqXHR, textStatus, errorThrown){
    alert(textStatus, errorThrown);
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T21:49:21.600

我认为问题在于您传递的数据没有正确写入。

尝试改变这一点：

```
data: {"post-form": postcontent}, 
```

对此：

```
data: 'post-form='+ $('.post-form').val(), 
```

# visual-studio-2010 - 带有 Visual Studio 2010 问题的 opencv 2.4.2 配置？

> ID：11596071
> 
> 赞同：2
> 
> 时间：2012-07-21T21:44:31.877
> 
> 标签：visual-studio-2010, opencv

最近我决定从 OpenCV 2.1 切换到 OpenCV 2.4。我在使用 opencv 配置它时遇到问题。详细情况如下：-

1.  在文件夹（opencv2.4）中安装并提取opencv。
2.  在里面创建了一个新文件夹“BIN”（opencv2.4）。使用 CMAKE 提取 BIN 中的所有数据。
3.  在使用 CMAKE 时，我没有选择 QT、TBB、IPP 选项。
4.  我添加了系统环境的路径，即 C:\opencv2.4\build\x64\vc10\bin;
5.  我在“BIN”文件夹中使用了解决方案，并首先使用 Debug 编译，然后使用 Release 选项编译。
6.  现在我开始了一个新的 VS2010 项目。
7.  在项目属性中；C++ -> 通用![在此处输入图像描述](../Images/7a8446ace4acf3be4145ea580c34696c.png)
8.  在项目属性中；链接器-> 一般我做了![在此处输入图像描述](../Images/862733e1a6509e9dfd50f60a3e4ee550.png)
9.  在项目属性中；链接器-> 输入我做了![在此处输入图像描述](../Images/ef2300a14cfa69e8af379ba5c1ead94f.png)
10.  我终于在我的调试文件夹中复制了所有 .dll 文件。
11.  当我运行程序时，我收到以下错误。![在此处输入图像描述](../Images/0326a4c6a453c4b5730774b5570f2979.png)
12.  我不知道我在做什么错。不知何故，我认为我没有正确链接图书馆。请在这方面指导我。. .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:13:33.813

官方 OpenCV 安装附带大量教程。他们通过大量屏幕截图详细解释了如何使用 OpenCV 配置 Visual Studio。您可以在线阅读文档。我将链接与此问题相关的两个教程：

*   **在 Windows 中安装**
    *   [http://docs.opencv.org/doc/tutorials/introduction/windows_install/windows_install.html](http://docs.opencv.org/doc/tutorials/introduction/windows_install/windows_install.html)
*   **如何在 Microsoft Visual Studio 中使用 OpenCV 构建应用程序**
    *   [http://docs.opencv.org/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html](http://docs.opencv.org/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:58:45.557

你错过了 opencv_legacy242.. 库。添加并重试。某些功能在最新版本中已转移到旧版

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T21:40:17.713

您也可以尝试关注有关此主题的视频。他们帮助很大。当然，那些来自可靠来源。我知道在 opencv.org 网站上有一个。

# c# - Scraping data using HTMLAgilityPack

> ID：11596072
> 
> 赞同：0
> 
> 时间：2012-07-21T21:44:44.880
> 
> 标签：c#, html-parsing, web-scraping, html-agility-pack

In HTMLAgailityPack, how to get the data from the website which is not coming in the innerhtml method of it. For example, if in the link below:

[https://www.theice.com/productguide/ProductSpec.shtml?specId=1496#expiry](https://www.theice.com/productguide/ProductSpec.shtml?specId=1496#expiry)

The table starting with contract symbol is not coming in the innerhtmltext. Please let me know how to get this table data through HTMLAgailityPack?

Regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:57:02.840

请使用此 XPath 获取您想要的表 `//*[@id="right"]/div/table`

例如

```
HtmlNode node = doc.DocumentNode.SelectSingleNode("//*[@id="right"]/div/table"));
string html = node.InnerHtml; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:47:59.723

您需要向[https://www.theice.com/productguide/ProductSpec.shtml?expiryDates=&specId=1496&_=1342907196619发送 GET 请求](https://www.theice.com/productguide/ProductSpec.shtml?expiryDates=&specId=1496&_=1342907196619)

内容正在通过 javascript 动态加载。也许您可以解析 innerhtmltext 以查看 javascript 会将 GET 请求发送到哪个链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T21:49:23.620

如果它不是“进入innerhtml”，则意味着它是由脚本放入其中的。我自己无法查看此页面，所以我不确定。

如果它来自脚本，你就不能很容易地得到它。您可以查看 javascript 并可能能够在数据传入时读取数据。

基本上在您的浏览器上安装 Firebug，然后查看正在进行的数据传输。有时你很幸运，有时你不是。

或者您可以采用简单的方法并使用 winforms WebBrowser 控件，将其加载到其中，让它运行脚本然后从那里抓取。请注意，这将像疯了一样泄漏内存和 GDI 句柄。

# vb.net - Binding Custom object to Checkbox in VB.NET

> ID：11596079
> 
> 赞同：1
> 
> 时间：2012-07-21T21:45:22.253
> 
> 标签：vb.net, winforms, data-binding

I am trying to bind a checkbox to a custom object boolean property as follows:

```
chkTableIsReadonly.DataBindings.Add(New Binding("Checked", objectBindingSource, "ApplyforVisa", True, DataSourceUpdateMode.OnPropertyChanged, False)) 
```

The custom class supports the INotifyPropertyChanged interface.

Everything works find when I initially bind the checkbox to a new object:

`objectBindingSource.Datasource = new objectToBindTo`

Here is the odd part:

1.  If I check the box, the property Set gets called and the INotifyPropertyChanged event gets called and everyone is happy.
2.  If I uncheck the same box, the property Set doesn't get called, the INotifyPropertyChanged event never gets called and (the worse part), I cannot navigate to another record.

I have tried capturing the CheckedChanged event to set the object.ApplyForVisa property manually, but no success. The property Set gets called and the INotifyPropertyChanged event gets called, but I am still locked on control and can't navigate.

I have tried calling bindingsource.endedit in the CheckedChanged event, no success.

It only matters if I uncheck the box. The checkbox is two-state - true or false.

All of my other bindings work just fine - text boxes, combo boxes, datagrid. Just not checkbox.

My only thought is that is seems to act like a binding source data error, but no error is thrown. If I add the data error event handler for the binding source, it never gets called.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T15:42:35.347

假设该`ApplyForVisa`属性是一个布尔值，您可以通过将`formattingEnabled`参数设置为`Binding`False 来解决这个问题。

```
chkTableIsReadonly.DataBindings.Add( _
    New Binding("Checked", objectBindingSource, "ApplyforVisa", _
                False, DataSourceUpdateMode.OnPropertyChanged, False)) 
```

# language-agnostic - 这个布尔表达式是如何进一步简化的？

> ID：11596080
> 
> 赞同：0
> 
> 时间：2012-07-21T21:45:53.180
> 
> 标签：language-agnostic, boolean, boolean-logic, boolean-expression, boolean-operations

```
(ab+cd)(a'b'+c'd') = 1+ abc'd' + a'b'cd +1 
```

所以我被困在

```
abc'd'+a'b'cd 
```

但最终的答案是

```
(a+b)(c+d)+(a'+b')(c'+d') 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:11:14.923

在我看来，这两个表达式是互补的，即只有两个`(a+b)(c+d)+(a'+b')(c'+d')`为假的情况是`abc'd'`和`a'b'cd`。

**编辑：**在某个地方，我认为您已经丢失了 a`'`并且您实际上正在寻找其中之一：

```
((ab+cd)(a'b'+c'd'))'
(ab+cd)'+(a'b'+c'd')'
((ab)'(cd)')+((a'b')'(c'd')')
(a'+b')(c'+d')+(a+b)(c+d)
(a+b)(c+d)+(a'+b')(c'+d')

(ab+cd)(a'b'+c'd')
(a'b'+c'd')(ab+cd)
((a+b)'+(c+d)')((a'+b')'+(c'+d')')
((a+b)(c+d))'((a'+b')(c'+d'))'
((a+b)(c+d)+(a'+b')(c'+d'))' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:54:58.717

你无法证明这一点，`(ab+cd)(a'b'+c'd') = (a+b)(c+d)+(a'+b')(c'+d')`因为它不是真的。

采取`a=b=1, c=d=0`：

`(ab+cd)(a'b'+c'd') = (1+0)(0+1) = 1`

但

`(a+b)(c+d)+(a'+b')(c'+d') = (1*0)+(0*1) = 0`

（假设`x'`是“不是”）

# javascript - Javascript 数组中未定义的值是否使用任何内存或在 for-in 循环中迭代？

> ID：11596081
> 
> 赞同：1
> 
> 时间：2012-07-21T21:45:57.977
> 
> 标签：javascript, arrays, memory, object

我正在为游戏构建一个实体系统，基本上我不确定是否应该使用简单的对象（字典）或数组来通过它们的 id 来存储实体/组件。

我最大的问题是我不想要动态实体 ID。如果 id 只是一个字符串（使用字典存储实体），那么它总是有效的，我可以使用 storage[id] 来获取该实体。

如果我使用数组，我想，表示存储数组中*索引*的实体的 id会改变。考虑这个实体数组：

```
[
    Entity,
    Entity, //This one is being removed.
    Entity
]; 
```

如果我要删除该数组中的第二个实体，我认为访问第三个数组所需的 id 必须更改为（现已删除）第二个实体的 id（索引）。那是因为我考虑过删除`splice()`ing。

但是，我可以使用`delete`表达式将元素（实体）转换为`undefined`! 而且，如果 Javascript 中的数组实际上只是对象，并且对象在逻辑上具有无限多的未定义值，这是否意味着数组中的未定义值不会占用内存？

最初，我认为数组的实现方式是它们在内存中对齐，并且索引只是从第一个元素的偏移量，并且按照这种逻辑，我认为未定义的值至少会使用指针的内存（因为我*实际上*认为指向元素的指针是对齐的，而不是元素本身）。

那么，如果我在这个数组中存储了 10k+ 个实体，并`delete`编辑了其中的一半，那么 5k`undefined`会使用任何内存吗？

另外，当我做一个`for entity in array`循环时，这些未定义的元素会被传递吗？

另外，我在哪里可以找到资源来查看数组*实际上*应该如何在 Javascript 中实现？我所能找到的只是数组的一般解释和有关如何使用它们的教程，但我想了解这些在某些情况下可能很重要的小怪癖。像“Javascript quirks”这样的网站会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:04:10.060

数组不仅仅是对象。尤其是`length`属性非常神奇。

当然，只要外部 API 保持不变，JavaScript 引擎就可以在内部以它选择的任何方式表示数组。例如，如果您设置随机分隔的值，则它们可能会存储为哈希，但如果您设置连续值，则它们可能会优化为数组。

`for ... in`不枚举未设置的属性。这包括一个跳过值的数组文字，例如`[true, , false]`，它只会枚举索引 0 和 2。

# php - PHP Session class similar to CodeIgniter Session Class?

> ID：11596082
> 
> 赞同：1
> 
> 时间：2012-07-21T21:46:20.877
> 
> 标签：php, codeigniter, session

PHP session class similar to CodeIgniter session class? Exists?

I tried to search, but I did not get useful results. I was using CodeIgniter session class, that have several features a like so much:

Store user's unique Session Id, user's IP Address, user's User Agent data, last activity and other informations manually provided. Those informations are stored in a database (MySql). The class create a cookie to match the unique session id with the session id at the database. In my opnion, this class is very secure.

I want to use this class outside CodeIgniter (without using CodeIgniter). Can anyone recommend me a class with those features?

Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T23:09:32.717

实际上这是两双鞋：PHP Sessions 和 codeigniter 会话。很高兴了解主要差异，这基本上就是在 codeigniter 中的所有内容，会话确实为大型部件重新发明了轮子，并添加了一些功能。

因此，在您继续之前，可能值得看一下[PHP 手册中的 Session 章节](http://www.php.net/manual/en/book.session.php)，PHP 的内置会话支持非常强大 - 但没有对象接口。

例如，将 PHP 会话存储到数据库中（默认是文件系统），这是由所谓的[*会话保存处理程序*](http://www.php.net/manual/en/session.configuration.php#ini.session.save-handler)支持的。一些 PHP 扩展提供了一个保存处理程序（例如 memcache）。只是为了让您放松一下，这适用于任何与 memchache 协议兼容的东西，例如[MySQL](http://schlueters.de/blog/archives/152-Not-only-SQL-memcache-and-MySQL-5.6.html)。但这*只是一个*例子。如果您正在寻找与本机 PHP 会话无关的会话类，请将“PHP 3”添加到您的搜索中，因为在版本 4 之前，PHP 没有本机会话，当然，其他人需要会话，所以他们编写了自己的库。

好吧，老实说，今天使用 PHP，寻找会话并说不想接触 PHP 会话是：愚蠢。您可能不想接触文件系统，然后存储到 cookie。您可能不想存储到 cookie，存储到任何快速且服务器端的存储：memcached、mysql、couchdb、ssd 文件系统。任何。PHP 原生会话在这里非常灵活：

您也可以编写自己的用户级会话保存处理程序并将您的会话存储到数据库中。实际上任何键值存储都可以：键是会话 id，值是编码（序列化）的会话数据。那是一个二进制字符串。

正如车轮代码点火器的重新发明旁边所写的那样，您可能正在寻找一些功能。基本上你可以随时查看[codeiginiter 的会话组件](https://github.com/EllisLab/CodeIgniter/blob/2.1-stable/system/libraries/Session.php)的源代码，它并不复杂。有了一个好的 IDE，您可以选择您想要检查的东西，或者只是将其视为灵感。

一个特点是元数据代码点火器分配给一个会话，例如远程地址、会话开始时间（非常有用）和最后一个活动（也很有用）。你可以很容易地模仿你自己的，每次开始时将它存储到会话中（下面的示例）。为此，您可以创建自己的会话对象。以下只是一个简单的示例，但它已经具有一些不错的功能：

*   创建会话
*   元数据，如远程 IP、创建和上次活动时间戳。
*   如果适用，销毁 cookie。

用法：

```
$session = new Session();
$session['foo'] = 'bar';
$session->destroy(); // yes, full destroy 
```

编码：

```
/**
 * Session class
 *
 * @license MIT
 * @license-year 2012
 * @license-copyright-holder hakre <http://hakre.wordpress.com>
 */
class Session implements ArrayAccess
{
    private $meta = '__meta';
    private $started;

    public function __construct()
    {
        if (ini_get('session.auto_start')) {
            $this->started = true;
            $this->start();
        }
    }

    public function start()
    {
        $this->started || session_start();
        (isset($_SESSION[$this->meta]) || $this->init())
            || $_SESSION[$this->meta]['activity'] = $_SERVER['REQUEST_TIME'];
        $this->started = true;

    }

    /**
     * write session data to store and close the session.
     */
    public function commit()
    {
        session_commit();
    }

    public function destroy()
    {
        $_SESSION = array();
        if (ini_get("session.use_cookies")) {
            $params = session_get_cookie_params();
            setcookie(session_name(), '', time() - 42000,
                $params["path"], $params["domain"],
                $params["secure"], $params["httponly"]
            );
        }
        session_destroy();
    }

    public function get($name, $default = NULL)
    {
        return isset($_SESSION[$name]) ? $_SESSION[$name] : $default;
    }

    /**
     * @return string
     */
    public function getName()
    {
        return session_name();
    }

    private function init()
    {
        $_SESSION[$this->meta] = array(
            'ip'       => $_SERVER['REMOTE_ADDR'],
            'name'     => session_name(),
            'created'  => $_SERVER['REQUEST_TIME'],
            'activity' => $_SERVER['REQUEST_TIME'],

        );
        return true;
    }

    /**
     * Whether a offset exists
     * @link http://php.net/manual/en/arrayaccess.offsetexists.php
     * @param mixed $offset
     * @return boolean true on success or false on failure.
     * The return value will be casted to boolean if non-boolean was returned.
     */
    public function offsetExists($offset)
    {
        $this->started || $this->start();
        return isset($_SESSION[$offset]);
    }

    /**
     * Offset to retrieve
     * @link http://php.net/manual/en/arrayaccess.offsetget.php
     * @param mixed $offset
     * @return mixed Can return all value types.
     */
    public function offsetGet($offset)
    {
        $this->started || $this->start();
        return $this->get($offset);
    }

    /**
     * Offset to set
     * @link http://php.net/manual/en/arrayaccess.offsetset.php
     * @param mixed $offset
     * @param mixed $value
     * @return void
     */
    public function offsetSet($offset, $value)
    {
        $this->started || $this->start();
        $_SESSION[$offset] = $value;
    }

    /**
     * Offset to unset
     * @link http://php.net/manual/en/arrayaccess.offsetunset.php
     * @param mixed $offset
     * @return void
     */
    public function offsetUnset($offset)
    {
        unset($_SESSION[$offset]);
    }
} 
```

总结一下：如果您使用 PHP 会话，那么您将使用 PHP 会话。它们功能强大，但您可能希望在顶部添加处理。上面的示例`Session`类关注会话生命周期：初始化、更新和销毁。PHP 本身负责启动事实会话并保存它。当然，您也可以为会话存储添加一个类，但如果您关心性能和简单性，通常这都可以在 php.ini 中进行配置。

除此之外，还有更高级的东西：

*   重新生成会话 ID（PHP 支持，很容易添加到类或调用 PHP 的函数）
*   将数据从一个会话复制到另一个会话（PHP 不容易支持这一点，*如果*需要，值得将这样的功能包装到会话类中 - codeigniter 也没有）
*   获取会话当前是否运行的状态（全局 PHP 会话）。当*且仅当*您需要它时`Session`，该类是添加它的好地方 。您可以在相关问题中找到代码：[如何判断会话是否处于活动状态？](https://stackoverflow.com/a/7656468/367456)

 *所以，找出你需要什么。像这样实现，它可能非常简单。明智地编写您自己的 Session 类，[随意使用上面的那个作为基础](http://spdx.org/licenses/MIT)并添加您需要的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T15:27:02.173

在这个链接上掠夺

[http://stevedecoded.com/blog/custom-php-session-class](http://stevedecoded.com/blog/custom-php-session-class)

例子

```
 $session = new Session();

 $session->__destruct(); 
```*

# javascript - Flex Project Include SWFAddress.js

> ID：11596083
> 
> 赞同：0
> 
> 时间：2012-07-21T21:46:35.713
> 
> 标签：javascript, html, flash, apache-flex, swfaddress

Is there a way that I can configure my Flex 4 project to include the JavaScript portion of the SWFAddress library? I have the AS included no problem, but in order to test its functionality, I have to open `Main.html` and include `swfaddress.js` each time I compile the Flex project, which is a tad tiring.

Thank you for your time.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:52:20.593

您希望在构建时保留的更改应在 html 模板中实现：

![在此处输入图像描述](../Images/f319e1060b13c013bde2e8edacc442bf.png)

通过更新文件夹中的`index.template.html`项目`html-template`，您发布的 html 将包含更新。

# image - Redirect 301 in Nginx (images and dynamic pages)

> ID：11596085
> 
> 赞同：1
> 
> 时间：2012-07-21T21:46:56.723
> 
> 标签：image, redirect, dynamic, nginx

I am changing my site address and I am having difficulty in two types of 301 redirects on the server Nginx. I've tried MANY ways to do this, but everything went wrong so far.

I want to change the:

```
^/downs/pafiledb.php?action=download&id=(NUMBER) 
```

to other site:

```
http://www.newsite.com/downloads/NUMBER 
```

And also a problem with the redirect with the pictures, see below.

I want to change the entire folder to another site:

```
^/images/ 
```

to

```
http://www.newsite.com/images/ 
```

How can I do this? I've tried every way possible in Nginx and nothing works.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:16:52.617

```
location = /downs/pafiledb.php {
    if ($arg_action = download) {
        return 301 http://www.newsite.com/downloads/$arg_id;
    }
}

location /images/ {
    return 301 http://www.newsite.com$request_uri;
} 
```

*   [http://nginx.org/r/location](http://nginx.org/r/location)
*   [http://nginx.org/en/docs/http/ngx_http_core_module.html#variables](http://nginx.org/en/docs/http/ngx_http_core_module.html#variables)
*   [http://nginx.org/r/return](http://nginx.org/r/return)
*   [http://nginx.org/r/if](http://nginx.org/r/if)
*   [http://nginx.org/en/docs/http/request_processing.html](http://nginx.org/en/docs/http/request_processing.html)

# android - Android USB 驱动程序可以互换吗？

> ID：11596090
> 
> 赞同：3
> 
> 时间：2012-07-21T21:48:00.380
> 
> 标签：android, windows, sdk, 64-bit, drivers

我是一名初学者程序员，我正在尝试使用 android 开始编码。我已经设置了我的 IDE(Eclipse)、SDK 和所有这些，但是我找不到我的设备的驱动程序。这是一款 Kocaso 平板电脑，型号 M760。我的问题是，某些平板电脑上的硬件是否足够相似，驱动程序是否可以互换？哦，如果有人知道我在哪里可以找到该平板电脑的 USB 驱动程序，请给我一个链接？我保证我已经搜索了很多地方）：

在此先感谢，如果这不是正确的网站，我很抱歉，但我认为它会比 android 高级用户更好:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T12:58:49.590

您可以使用这些说明对平板电脑进行根植；

[http://www.androidtablets.net/forum/ice-cream-sandwich/44223-rooting-kocaso-m760.html](http://www.androidtablets.net/forum/ice-cream-sandwich/44223-rooting-kocaso-m760.html)

希望这会帮助你推进你的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:23:59.700

In my experience the drivers are fairly generic, and therefore interchangeable. There is a USB driver in the SDK that will suit most needs, but there is a gotcha. You have to install it in the SDK, and then go in to the android SDK folder to install it in Windows.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T22:25:58.440

I had a similar problem with my tablet. After some research, I found the company that produces your tablet is [Global Phoenix Computer Technologies Solutions](http://www.globalpct.com). The website for their mid-size tablets (yours) is [http://www.mymidpad.com](http://www.mymidpad.com). I found the User Manual for your tablet there under Downloads, but nothing else. Here is their contact information: [http://mymidpad.com/contactus.html](http://www.mymidpad.com/contactus.html). Send off an email or give them a call, and hopefully they can help you. Sorry I couldn't be of more help.

Edit: I doubt the Google USB drivers will work for you. They didn't for my Archos tablet. [This website](http://developer.android.com/sdk/win-usb.html) lists the short list of supported devices, mainly big names. Your device is definitely not one of these big names, so you'll probably need drivers from GPCTS directly.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T18:56:39.230

在我的 M752 上，我能够强制它使用 Motorola 的“Android Sooner Single ADB Interface”，v 1.2.14.0，日期为 2012 年 11 月 25 日。到目前为止，对于 USB 设备 ID = USB\VID_18D1&PID_0007&REV_0230&MI_01，这似乎工作正常

这是一个 Google USB 供应商 ID，所以我很惊讶在最新的 Google USB 驱动程序包 [Android SDK Manager tool, extras, Google USB Driver revision 7 中找不到 USB 设备 ID 的匹配项。]

对于许多 OEM 驱动程序，请参阅以下页面：

[http://developer.android.com/tools/extras/oem-usb.html#Drivers](http://developer.android.com/tools/extras/oem-usb.html#Drivers)

# javascript - jQuery Masonry 在我的脚本中不起作用

> ID：11596093
> 
> 赞同：1
> 
> 时间：2012-07-21T21:48:28.893
> 
> 标签：javascript, jquery

我什至无法让丝毫的砌体工作。我脑洞大开！这是代码：

```
<LINK rel="Stylesheet" href="App_Themes/Theme1/Style.css"  type="text/css">
<script type="text/javascript" src="Scripts/jquery-1.7.1.min.js" />
<script src="Scripts/jquery.masonry.min.js" />
<script src="Scripts/modernizr-transitions.js" />
<script src="Scripts/box-maker.js" />
<script>
    $(function () {
        var $container = $('#container');
        $('#mini-container').masonry({
            columnWidth: 20
        });
        $container.masonry({
            itemSelector: '.w1',
            columnWidth: 120,
            isAnimated: true,
            gutterWidth: 2,

            animationOptions: {
                durantion: 750,
                easing: 'linear',
                queue: false
            }
        });

        $container.masonry({
            itemSelector: '.mini',
            columnWidth: 120
        });

        $container.masonry({
            itemSelector: '.myImages',
            columnWidth: 120,
            isAnimated: true
        });
    });
</script> 
```

这里只是 html 的一个片段，因此您可以看到 div id 和类 - 但没有任何效果。

```
 <div id="container">
    <div class="mini">
    <p class="w1 h1">Lorem etc.... you know the text</p>
     <div class="myImages">
     <img id="image1" src="Images/green1.jpg" />
     </div>
 <p class="w1 h1">Lorem etc.... you know the text</p>
    <div class="myImages">
     <img id="Img1" src="Images/Marcia_02.jpg" />
     </div>
     <p class="w1 h1">Lorem etc.... you know the text </p>
</div> 
```

我剪掉了很多文字，所以你可以看到标签名称。根据我的 JavaScript 源文件，这些文件位于正确的位置。但什么也没有发生 - 这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:52:30.280

[你的问题的例子](http://jsbin.com/odafog/2/edit#javascript,html,live)

您应该正确关闭脚本标签，例如：`<script src=""></script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T23:26:56.113

当您在页面中包含 JavaScript 文件时，它应该如下所示：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
      <script src="/path/to/jquery.masonry.min.js"></script> 
```

如果您打算按照您的方式进行操作（不是来自 Google），您必须确保`src`路径实际上指向 JavaScript 文件。

# sqlite - 导入到 SQLite 的 CSV 文件修剪行

> ID：11596099
> 
> 赞同：1
> 
> 时间：2012-07-21T21:49:15.240
> 
> 标签：sqlite, csv

我有一个包含 2999 行的 CSV 文件，但在将其导入 sqlite3 中的表时，我只得到 1363 行。以下是我正在使用的一组命令/查询。不幸的是，出于保密原因，我无法在此处链接到原始数据。鉴于此，任何人都可以指出我可能缺少什么或者导入大小是否有任何限制（抱歉，谷歌没有帮助我）？提前致谢。

```
sqlite> CREATE TABLE test (var1 integer, var2 integer, var3 varchar(50));
sqlite> .separator ","
sqlite> .import data-v1.csv test                                                           
sqlite> select count(*) from test; 
```

输出是 1363，而应该是 2999。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:01:49.710

我很愚蠢......在一堆行中有一个 ^M 而不是换行符（不是到处都是）。

# javascript - 奇怪的 node.js 需要行为

> ID：11596100
> 
> 赞同：0
> 
> 时间：2012-07-21T21:49:17.727
> 
> 标签：javascript, node.js

我已经使用 node.js 大约一年了，而且我总是做那种事情。但是由于某种原因（也许它与 0.8.x 有关）现在当我这样做时，它不再起作用了。

这是一些代码：

假设我有`test.js`：

```
var test = {
    datFunction: function(){ return 'oh yeah'; }
}
module.exports = test; 
```

我有`test2.js`：

```
var test = require('./test');

// should output:
// { datFunction: [function] }
console.log(test);

// but outputs:
// {} 
```

正如我在那里评论的那样，它通常会记录该对象以及其中的所有内容，但现在它只给了我`{}`.

知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:59:12.170

您需要`test`导出`test.js`

```
module.exports = test; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:57:03.447

我不知道 node.js 但您似乎重新声明了`var test`.

# javascript - HTML5 两种形式分别打印出来

> ID：11596106
> 
> 赞同：0
> 
> 时间：2012-07-21T21:50:05.150
> 
> 标签：javascript, html

因此，为了方便起见，我正在开发一个只有一页的项目，该页面上有两种形式。

现在我尝试了一些东西，但它们似乎对我不起作用。我需要做的是打印销售人员表格，然后打印客户部分。

如果我可以直接在 HTML5 中执行此操作，他们是否可以使用 JavaScript 或更好地实现此目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:55:16.460

我想我有一个想法，打开一个带有内容 Customer div 的新弹出窗口，然后打印出来。当窗口关闭*时 - 使用 'a timer' 进行无限循环检查 -*，这次打开另一个包含内容 Sales div 的弹出窗口并将其打印出来。

# backbone.js - 主干中的选项卡

> ID：11596107
> 
> 赞同：2
> 
> 时间：2012-07-21T21:50:24.210
> 
> 标签：backbone.js, tabs

我是 Backbone 的新手，我正在制作一个示例应用程序，我必须在其中包含选项卡。问题是我有一组城市，我想为每个城市创建一个选项卡（该集合从服务器获取）。我创建了一个名为 TabsView 的视图，它在渲染函数中将集合传递给模板，然后这个视图循环遍历集合并呈现选项卡。

我想要做的是第一个选项卡显示为“活动”。我目前所做的是，每个选项卡都有一个指向路由器中的路由的 href，该路由使用 jquery 将其类更改为活动。不知道这是否是最好的方法，但它有效。也许有更好的方法。此外，当用户单击选项卡时，我希望能够呈现其他视图。

希望我说清楚了。谢谢，干杯，

马丁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T23:03:28.037

好的，我通过以下方式解决了这个问题：

```
var Tabs = Backbone.View.extend({
  template: JST['tabs'],

  events: {
    'click li' : 'switchTab'
  },

  tagName: 'ul',

  className: 'nav-tabs',

  render: function() {
    this.renderTabs();
    return this;
  },

  renderTabs: function() {
    this.$el.html(this.template({ cities: this.cities }));
    this.$('li:first').addClass('active');
  },

  switchTab: function(event) {
    var selectedTab = event.currentTarget;
    this.$('li.active').removeClass('active');
    this.$(selectedTab).addClass('active');
  }
}); 
```

它工作正常，也许可以改进。

# batch-file - 使用批处理文件编辑 xml 配置

> ID：11596121
> 
> 赞同：0
> 
> 时间：2012-07-21T21:53:23.277
> 
> 标签：batch-file

我的配置文件（.exe.config）中有一行

```
 <appSettings configSource="Configuration\local.config" /> 
```

我需要使用批处理文件将其更改为

```
 <appSettings configSource="Configuration\production.config" /> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:35:57.613

这将非常脆弱且容易出错，但如果您仍想这样做，请继续：

1.  我们需要延迟扩张

    ```
    setlocal enabledelayedexpansion 
    ```

2.  遍历文件中的行

    ```
    for /f "delims=" %%L in (foo.exe.config) do ( 
    ```

3.  存储线路

    ```
     set "Line=%%L" 
    ```

4.  进行更换

    ```
     set "Line=!Line:Configuration\local.config=Configuration\production.config!" 
    ```

5.  再次输出该行

    ```
     echo !Line!
    ) 
    ```

# string - 使用 C 从字符串中获取某些部分

> ID：11596123
> 
> 赞同：0
> 
> 时间：2012-07-21T21:54:03.040
> 
> 标签：string, search

晚上每个人都希望你们大师能提供帮助。我试图找到这个问题的答案，我需要通过搜索标签从下面的字符串中读取数据。即 IZTAG UKPART 等，但是我使用的代码并不好，因为它只存储它的第一部分，例如 UKPART = 12999 并且错过了 -0112。有没有更好的方法来搜索字符串？

到目前为止更新。

```
#include <stdio.h>  
#include <string.h>  
#include <windows.h>  

int main ()  
{  
    // in my application this comes from the handle and readfile 
    char buffer[255]="TEST999.UKPART=12999-0112...ISUE-125" ;     
    // 
    int i;  
    int codes[256];   
    char *pos = buffer;   
    size_t current = 0;   
    //   
       char buffer2[255];
   if ((pos=strstr(pos, "UKPART")) != NULL) {   
        strcpy (buffer2, pos); // buffer2 <= "UKPART=12999-0112...ISUE-125"
   }

        printf("%s\n", buffer2);  
    system("pause"); 
    return 0;  
} 
```

现在可以工作，但返回整个字符串作为输出，我只需要返回 UKPART 作为示例，谢谢到目前为止 :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:57:59.597

1.  strstr() 绝对是搜索子字符串的正确方法。凉爽的 ：）

2.  听起来您想要与“sscanf()”不同的东西来复制子字符串。

问：为什么不直接使用“strcpy()”呢？

```
EXAMPLE:
   char buffer[255]="IZTAG-12345...UKPART=12999-0112...ISUE-125" ;     
   char buffer2[255];
   if ((pos=strstr(pos, "UKPART")) != NULL) {   
        strcpy (buffer2, pos); // buffer2 <= "UKPART=12999-0112...ISUE-125" 
```

# ios - 如何从 iOS 5 中的 NSArray 中的文件列表中删除文件扩展名

> ID：11596131
> 
> 赞同：5
> 
> 时间：2012-07-21T21:54:57.473
> 
> 标签：ios

在 iOS 5 中工作我已经从我的文档目录中读取了一个文件名列表，该数组称为“文件列表”。我正在尝试获取不带扩展名的文件名列表。只有我列表中的姓氏已删除扩展名。有任何想法吗？

```
- (IBAction)getFile:(id)sender
{  
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory =[paths objectAtIndex:0];
    NSArray *fileList = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirectory error:nil];
    NSString *names = [[[fileList valueForKey:@"description"]componentsJoinedByString:@"\n"]stringByDeletingPathExtension];

    NSLog(@"File Name Is \n%@",names);    
    showFile.text = names; 
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T22:04:21.547

```
- (IBAction)getFile:(id)sender
{  
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory =[paths objectAtIndex:0];
    NSArray *fileList = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirectory error:nil];
    NSString *names = nil;
    for (NSString *name in fileList){
        if (!names) names = [[name lastPathComponent] stringByDeletingPathExtension];
        else names = [names stringByAppendingFormat:@" %@",[[name lastPathComponent] stringByDeletingPathExtension]];
    }
    NSLog(@"File Name Is \n%@",names
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T22:13:24.683

看起来您正在使用数组的描述来获取完整的数组内容，然后您正在删除整个文件的文件扩展名，而不是从每个单独的文件中删除。首先尝试删除文件扩展名：

```
NSMutableArray *newArray = [NSMutableArray arrayWithCapacity:[fileList count]];
[fileList enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    [newArray addObject:[obj stringByDeletingPathExtension]];
}];
NSString *names = [newArray componentsJoinedByString:@"\n"];
showFile.text = names; 
```

该`enumerateObjectsUsingBock`方法遍历数组中的每个项目。在代码块中，您获取该对象，删除路径扩展名，并将其添加到新数组中。处理完完整数组后，您可以使用它们`componentsJoinedByString`在每个文件名之间添加换行符。

# visual-studio-2012 - 如何从 Visual Studio 2012 起始页中删除“连接到 TFS”？

> ID：11596136
> 
> 赞同：0
> 
> 时间：2012-07-21T21:55:56.760
> 
> 标签：visual-studio-2012

当我启动 Visual Studio 2012 RC 时，开始页面有以下项目：

*   连接到 TFS...
*   新项目...
*   打开项目...

我不使用 TFS。我使用 Git。有没有办法可以删除“连接到 TFS”，这样我就不必每次运行 VS 2012 时都看到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:58:29.000

~~您可能可以转到 Tool\Options，选择左侧的 Source Control 项，然后将 Current source control 插件更改为“None”。~~

看来这是一个设计决策——一种为 Express 版本功能带来光明的方式。有人将此记录为 Connect 问题，您可以对其进行投票：[http ://connect.microsoft.com/VisualStudio/feedback/details/750913/start-page-shows-connect-to-tfs-server](http://connect.microsoft.com/VisualStudio/feedback/details/750913/start-page-shows-connect-to-tfs-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:39:31.563

您可以创建[自定义起始页](http://msdn.microsoft.com/en-us/library/aa991992%28VS.110%29.aspx)。

# python - 检测错误以改进 Google App Engine Python 中的错误日志记录

> ID：11596138
> 
> 赞同：1
> 
> 时间：2012-07-21T21:56:07.363
> 
> 标签：python, google-app-engine, python-2.7

有没有一种优雅的方法来检测我的谷歌应用程序引擎应用程序在向应用程序请求期间是否有错误，并在出现错误时写出更详细的日志？

我有相当多的“调试”级别日志记录，但我想删除所有这些，只在发生错误时显示调试信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:52:01.917

如果您使用的是 webapp2，我建议在使用下一个代码的请求期间执行此操作：

```
app = webapp2.WSGIApplication(debug = os.environ['SERVER_SOFTWARE'].startswith('Dev'), config=config.webapp2_config)

app.error_handlers[404] = handle_error
app.error_handlers[500] = handle_error
routes.add_routes(app) 
```

您可以在此处查看该 handle_error 的示例： [https ://github.com/coto/gae-boilerplate/blob/master/boilerplate/lib/basehandler.py#L70](https://github.com/coto/gae-boilerplate/blob/master/boilerplate/lib/basehandler.py#L70)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:02:01.340

您需要从[LogService API](https://developers.google.com/appengine/docs/python/logservice/overview)文档开始；获取并过滤一些 request_logs（记得包含 app_logs）；对于任何 req_log，您都可以获得相关的 app_logs。任何 app_log 都具有三个属性（时间、级别和消息）。你要找的是消息属性。

```
req_logs = logservice.fetch(start_time=time.time() - 3600,
                            end_time=time.time(),
                            minimum_log_level=logservice.LOG_LEVEL_ERROR,
                            include_app_logs=True)
for req_log in req_logs:
    for app_log in req_log.app_logs:
        print app_log.message 
```

# vba - 在用户宏之前自动运行好的宏？

> ID：11596139
> 
> 赞同：0
> 
> 时间：2012-07-21T21:56:20.203
> 
> 标签：vba, excel

> **可能重复：**
> [如何保护 Excel 中的单元格，但允许通过 VBA 脚本修改这些单元格](https://stackoverflow.com/questions/125449/how-to-protect-cells-in-excel-but-allow-these-to-be-modified-by-vba-script)

有没有机会在用户触发的任何 marco [UserMarco] 之前运行特定的 marco [GodMarco]？

案例一

我有一个工作表，其中有很多按钮可以让用户执行不同的操作。

我有正常的单元格让用户输入数据，并有隐藏的单元格来做脏活。

而且由于用户可以使用 [箭头] 或 [标签] 来循环，我必须保护工作表。

并使它们无法选择。

现在 VBA 停止了。

我知道我可以添加 vba 代码来一次又一次地取消保护和保护，但我认为将它们添加到每个 marco 是愚蠢的。

那么是否可以像GODMODE一样在用户触发每个marco之前运行GODMARCO1，在用户marco之后运行GODMARCO2？

[完成，谢谢。] 案例二

或者我们可以得到一些用户不能选择但 VBA 可以选择的单元格？

非常感谢您。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-22T00:51:22.293

打开 VBA 窗口 (Alt + F11)。在您要保护的工作表的属性窗口中，您将看到“ScrollArea”属性，它将限制用户可以选择的区域，将其设置为您希望用户可以访问的任何范围。

# android - Android：使用 R.java 从 APK 文件中获取源代码

> ID：11596141
> 
> 赞同：0
> 
> 时间：2012-07-21T21:56:56.330
> 
> 标签：android, apk

我在这里使用了说明： [有没有办法从 APK 文件中获取源代码？](https://stackoverflow.com/questions/3593420/android-getting-source-code-from-an-apk-file) 真的很好。我几乎得到了丢失项目的所有内容，但没有 R.java 文件。将项目导入eclipse是必要的。如何从 apk 文件中提取此文件？我在哪里可以找到它？

tnx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:01:53.837

R.java 是在 Eclipse 和其他 IDE 上自动创建的。从我的主要活动中删除表示 import R.java 的行通常有助于我的 IDE 识别它不存在，并在您尝试运行程序时重新创建它。如果这不起作用，请尝试 Project、Clean... 并尝试再次运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-05T07:02:39.387

您不能直接提取`r.java`文件，但可以使用“aapt”工具提取 r.java 文件的内容。以下命令列出了`r.java`文件中存在的所有资源及其各自的 ID：

```
aapt d resources name_of_apk 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T21:59:51.657

您不需要该`R.java`文件。当您尝试运行您的 android 应用程序时，它会由 Android SDK 自动生成。

# haskell - 使用可变状态计算的惰性列表？

> ID：11596151
> 
> 赞同：5
> 
> 时间：2012-07-21T21:58:00.920
> 
> 标签：haskell, state, lazy-evaluation, mutable

我想大致了解如何在惰性列表的计算中使用可变状态。

例如，这是一个使用可变数组（[source](http://mukeshiiitm.wordpress.com/2011/11/07/project-euler-357/)）实现的 Eratosthenes 的幼稚筛子：

```
import Control.Monad.ST
import Data.Array.ST
import Data.Array.Unboxed
import Control.Monad
import Data.List

prime :: Int -> UArray Int Bool
prime n = runSTUArray $ do
    arr <- newArray ( 2 , n ) True :: ST s ( STUArray s Int Bool )
    forM_ ( takeWhile ( \x -> x*x <= n ) [ 2 .. n ] ) $ \i -> do
        ai <- readArray arr i
        when ( ai  ) $ forM_ [ i^2 , i^2 + i .. n ] $ \j -> do
            writeArray arr j False
            -- yield i ??? 
```

`prime n`返回一个布尔数组，表示哪些数字是素数。

有没有办法使用这种方法来创建这些素数的惰性列表？这就像在声明`yield i`之后添加一个权利。`writeArray`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T22:19:07.047

实现惰性的程序的最小修改可能是切换到*惰性*ST monad ( [http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad-ST-Lazy.html](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad-ST-Lazy.html) )，这段代码可以工作的地方：

```
import Control.Monad.ST.Lazy
import Data.Array.ST
import Data.Array.Unboxed
import Control.Monad
import Data.List
import Data.Maybe

prime :: Int -> [Int]
prime n = catMaybes $ runST $ do
    arr <- strictToLazyST $ newArray ( 2 , n ) True :: ST s ( STUArray s Int Bool )
    forM ( takeWhile ( \x -> x <= n ) [ 2 .. n ] ) $ \i -> do
        if i == 83 then error "Reached 83" else return ()
        ai <- strictToLazyST $ readArray arr i
        if ai
          then do
            strictToLazyST $ forM_ [ i^2 , i^2 + i .. n ] $
                 \j -> writeArray arr j False
            return (Just i)
          else return Nothing 
```

错误调用只是为了展示结果的真正惰性：

```
*Main> prime 10000
[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79*** Exception: Reached 83 
```

如果要避免 的中间列表`Maybes`，例如，可以使用以下代码：

```
import Control.Monad.ST.Lazy
import Data.Array.ST
import Data.Array.Unboxed
import Control.Monad
import Data.List
import Data.Functor

prime :: Int -> [Int]
prime n = runST $ do
    arr <- strictToLazyST $ newArray ( 2 , n ) True :: ST s ( STUArray s Int Bool )
    let primesFrom i | i > n = return []
                     | otherwise = do
            ai <- strictToLazyST $ readArray arr i
            if ai then do
                strictToLazyST $ forM_ [ i^2 , i^2 + i .. n ] $
                   \j -> writeArray arr j False
                (i:) <$> primesFrom (i + 1)
              else primesFrom (i + 1)
    primesFrom 2 
```

# perl - 这些 perl 变量是什么意思？

> ID：11596152
> 
> 赞同：-4
> 
> 时间：2012-07-21T21:58:05.797
> 
> 标签：perl, variables, coding-style, string-matching, slash

我对 perl 编码约定有点讨厌，有人可以帮忙解释一下：

*   为什么perl变量前面 有`/`and ？`/<`
*   是什么意思`\=`，`=~`有什么区别？
*   为什么代码需要在例如 `/`之前结束？`;``/start=\'([0-9]+)\'/`

**第 3 个子问题实际上是由 perldocs 解决的，但是以下行在代码中意味着什么？**

`push(@{$Start{$start}},$features);`

**我知道我们正在将 $features 推送到 @Start 数组中，但这是什么`@$Start{$start}`意思？是否与以下内容相同：** `@Start = ($start);`

在代码中有这样的东西：

```
use FileHandle;

sub open_infile {
  my $file = shift;
  my $in = FileHandle->new($file,"<:encoding(UTF-8)")
      or die "ERROR: cannot open $file: $!\n" if ($Opt_utf8);
  $in = new FileHandle("$file")
      or die "ERROR: cannot open $file: $!\n" if (!$Opt_utf8);
  return $in;
}

$uamf = shift @ARGV;
$uamin = open_infile($uamf);

while (<$uamin>) {
    chomp;
    if(/<segment /){
        /start=\'([0-9]+)\'/;
        /end=\'([0-9]+)\'/;
        /features=\'([^\']+)\'/;
        $features =~ s/annotation;//;

    push(@{$Start{$start}},$features); 
    push(@{$End{$end}},$features); 
    }
} 
```

**已编辑**

因此，在对 perl 文档进行了深入阅读之后，这是我得到的一些东西

*   这`/<segment /`是一个正则表达式检查，检查 readline in 是否`while (<$uamin>)`包含以下字符串：`<segment`.
*   同样`/start=\'([0-9]+)\'/`，这与实例化任何变量无关，它是一个正则表达式检查，以查看 readline 中是否`while (<$uamin>)`包含`start=\'([0-9]+)\'`引用 `\'([0-9]+)\'`数字字符串。
*   在is`$features =~ s/annotation;//`中`=~`使用是因为字符串替换正在测试正则表达式匹配。请参阅 [=~ 在 Perl 中做了什么？](https://stackoverflow.com/questions/10019049/what-does-this-do-in-perl)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:04:15.097

您在哪里看到这种语法（或者更重要的是：您是否根据您所看到的内容编辑了内容）？ `/foo/`表示使用正则表达式的匹配运算符，而不是变量。换句话说，第一行是检查输入字符串是否`$_`包含字符序列`<segment`。

接下来的三行基本上没有任何用处，因为它们运行正则表达式匹配然后丢弃结果（有副作用，但后续正则表达式也会丢弃副作用）。

最后一行进行替换，将第一次出现的字符替换`annotation;`为 string 中的空字符串`$features`。

运行命令[perldoc perlretut](http://p3rl.org/retut)以了解 Perl 中的正则表达式。

# c# - 无法删除多个网格视图记录

> ID：11596153
> 
> 赞同：0
> 
> 时间：2012-07-21T21:58:24.043
> 
> 标签：c#, asp.net, gridview, checkbox

我正在尝试删除多个网格视图记录。我尝试如下所示。

```
 public void btnDelete_Click(object sender, EventArgs e)
        {
            StringCollection orderNumberCollection = new StringCollection();
            if (gridOrders.Rows.Count > 0)
            {
                 foreach (GridViewRow gvrow in gridOrders.Rows)
                    {
                         if (gvrow.RowType == DataControlRowType.DataRow) {
                             CheckBox cbx = (CheckBox)gvrow.Cells[0].FindControl("chkdelete");
                            Label lblOrderNumner = (Label)gvrow.FindControl("labelOrderNumber");
                            Label lastName = (Label)gvrow.FindControl("LabelLastName");
                            if (cbx.Checked && lblOrderNumner != null)
                            {
                                orderNumberCollection.Add(lblOrderNumner.Text);
                            }
                         }
                    }
            }
        if (orderNumberCollection.Count > 0)
        {
            DeleteMultipleOrders(orderNumberCollection);
        }
} 
```

但始终显示“Checked = false”的复选框控件。为什么即使我选中了某些复选框，复选框控件也总是显示错误？

这是我的网格视图代码：

```
 <asp:TemplateField> 
    <HeaderTemplate>
    <table><tr><td ><asp:CheckBox ID="chkAll" runat="server" /></td><td><asp:Button ID="btnDelete" runat="server" Text="Delete" OnClick="btnDelete_Click" /></td></tr></table>   
    </HeaderTemplate>
        <ItemTemplate>
            <asp:CheckBox ID="chkdelete" runat="server" Text='<%# Bind("OrderNumber") %>' Font-Bold="false" />
        </ItemTemplate>

    </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T01:27:08.100

我和蒂姆在一起，听起来你是从内部加载你的网格视图`Page_Load`，这很好。但在您的情况下，您需要确保您的 gridview 加载代码如下所示：

```
if(!Page.IsPostBack)
{
  //gridview loading code
} 
```

当您单击删除按钮时，这可以防止您的 gridview 被重新加载（并丢失选中的框）

# android - 如何为包含 ScrollView 的布局添加触摸事件

> ID：11596157
> 
> 赞同：2
> 
> 时间：2012-07-21T21:59:02.993
> 
> 标签：android, layout, scrollview, touch-event

问题是滚动将拦截触摸事件已设置为 parent `layout`。我可以`onTouch`通过滚动保持活动`ScrollView`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T22:54:34.597

这是一个非常棘手的部分。有一个被覆盖的方法`Activity`是：`public boolean onTouchEvent(MotionEvent event)`

这是从整个屏幕解释所有触摸事件的通用方法。你可以说，“好的，我可以实现这个，我很高兴......”。这里是关于 android 如何工作的困难部分。

如您所知，每个`View`都有自己的`onTouchEvent()`方法，您可以实现这些方法以添加一些自定义实现。那么哪种方法会听呢？`ScrollView`还是`Activity`？_ 这些触摸事件似乎从“内部”元素传递到“外部”元素。我说的是亲子关系。

要考虑的另一件事是 onTouchEvent 方法返回一个布尔值。这个布尔参数决定了触摸事件是向上一级还是由当前的`View`. 这意味着如果您有一个`CustomViewA`实现 onTouchEvent() 并`CustomViewB`实现自己的触摸事件的 a，并且 A 是 B 中的一个孩子，那么触摸事件将首先通过 A，如果未处理，它将转到 B。

所以基本上是的，它可以做到。这取决于您想要执行的触摸事件。

所以在我们的例子中，当触摸事件是水平的时`ScrollView`返回。只有当触摸事件不是自己`true`处理时才会处理活动的触摸事件，那么你就可以了。`ScrollView`否则，您必须覆盖并实现滚动视图的触摸事件，并且在某些情况下，您必须返回 false 以便整个布局来实现它。最后一部分祝你好运。我开始实现投掷效果，但遇到了一些困难，所以我实现了一个带有滚动视图的 2 指移动，它就像一个魅力。

这是大约一周的研究和实验，它是我想出的一个概述。如果您发现其他任何东西，请告诉我。希望它有所帮助。

# c# - TextBox.Text 绑定到 ViewModel 的属性

> ID：11596161
> 
> 赞同：2
> 
> 时间：2012-07-21T21:59:46.347
> 
> 标签：c#, wpf, binding, properties, textbox

我有两种方式将 TextBox 内容绑定到另一个类中的属性的问题。搜索 stackoverflow 提供了很多提示/解决方案，但似乎没有一个有效。

在我的 XAML 代码中，我有：

```
< TextBox ... Width="336" IsReadOnly="True"
 Text="{Binding Path=AssignedClearProgram, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/> 
```

（......我删除了所有不重要的项目）

在随附的cs代码中，我有：

```
public CombiWindow(Combi combi)
{
    ViewModel = new CombiViewModel(combi);
    DataContext = ViewModel;
} 
```

在 CombiViewModel 中：

```
 [UsedImplicitly]
    public string AssignedClearProgram { get; set; } 
```

似乎我第一次分配 AssignedClearProgram 时，文本框充满了我设置的文本，但是在显示窗口并从代码更新 AssignedClearProgram 后（即调用 set 方法），数据未在屏幕。

更改此变量时，是否有人有更新文本框的解决方案？

亲切的问候，

米歇尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T22:01:55.093

您的视图模型类需要实现 INotifyPropertyChanged 并且您需要在更改属性时引发该接口的事件。然后绑定将发现更改并更新文本框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T22:07:26.433

您的视图模型类应该实现该`INotifyPropertyChanged`接口。

您的财产将如下所示：

```
private string assignedClearProgram;

public string AssignedClearProgram
{
   get { return assignedClearProgram; }
   set
   {
       if (assignedClearProgram != value)
       {
           assignedClearProgram = value;

           // Notify property has changed here using PropertyChanged event from INotifyPropertyChanged.
       }
   }
} 
```

阅读[本文](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)，了解如何实现`INotifyPropertyChanged`接口并利用其`PropertyChanged`事件的示例。

# jquery - 使用 Jquery 将带有关闭按钮的 DIV 动态添加到另一个 DIV

> ID：11596164
> 
> 赞同：3
> 
> 时间：2012-07-21T22:00:30.340
> 
> 标签：jquery

我想在右上角添加 4 个带有关闭按钮的 div，与父 DIV 水平对齐。单击关闭按钮时，应从父 DIV 中删除 div。Jquery 可以做到这一点吗？如果有人可以发布示例代码，我将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T22:19:13.157

让我们来帮助你。

`**[jsBin demo](http://jsbin.com/uvabux/edit#javascript,html,live)**`

```
<div class="box">
    <div class="close_box">X</div>

    <h2>Box title</h2>
    <p>Merol muspi rolod tis tema...</p>

</div> 
```

问：

```
$(document).on('click','.close_box',function(){
    $(this).parent().fadeTo(300,0,function(){
          $(this).remove();
    });
}); 
```

或者简单地说：

```
$(document).on('click','.close_box',function(){
    $(this).parent().remove();
}); 
```

看看文档（**总是！**）：

[http://api.jquery.com/on/](http://api.jquery.com/on/)
[http://api.jquery.com/parent/](http://api.jquery.com/parent/)
[http://api.jquery.com/remove](http://api.jquery.com/remove)

# javascript - 与“new”关键字一起使用时，Object 函数在 Javascript 中的作用是什么？

> ID：11596166
> 
> 赞同：2
> 
> 时间：2012-07-21T22:00:35.123
> 
> 标签：javascript, object

在[这个](https://gamedev.stackexchange.com/a/31386/9736)答案中，我指示提问者不要`Object`在 Javascript 中覆盖本机函数，因为我认为它会弄乱对象创建过程。

但是后来，我想了想，发现*所有*对象都不太可能实际上是使用这个函数和`new`关键字创建的。

例如，当使用文字符号 ( `var a = {...}`) 创建对象时是否使用它？或者它只是这样做`this = {}`？是否可以实际分配值`this`？

我看到了[这个](https://stackoverflow.com/q/5717863/924313)问题，很相似，并且`Object`在没有关键字的情况下使用时显然表现不同`new`......该功能实际上是如何实现的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:24:24.277

使用文字表示法获得的对象与使用功能表示法获得的对象相同。证明：

```
> ({}).__proto__ === new Object().__proto__
true
> new Object().__proto__ === Object.prototype
true 
```

这意味着左侧和右侧的对象是从同一个原型创建的，即 Object.prototype

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T22:24:42.297

对象函数是用来尝试成为对象的，如果你不传递任何参数，它将构造一个带有 null 的对象，因此它是一个空对象。

```
var a = new Object(); // a is {}
var b = new Object("1"); // b is an object which store 1 as a string.
/* 
  JS console says:
  String
    0: "1"
    length: 1
*/
var c = new Object(1); // c is an object which store 1 as an integer.
/* 
  JS console says:
  Number
  //There is no other property or method here.
*/ 
```

**我在没有new**关键字的情况下尝试了它，但没有任何改变。所有对象与上述对象相同。

希望这能解决你的好奇心。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T22:29:59.843

你可以覆盖 Chrome/V8 中的 Object，如果你这样做了，就会发生不好的事情。键入以下内容将获得这些响应。

```
> Object
 function Object() { [native code] }
> Number
 function Number() { [native code] } 
```

查看 Number.prototype 我们可以看到一整套方法和 Object 作为 Number 的原型：

```
Number
constructor: function Number() { [native code] }
toExponential: function toExponential() { [native code] }
toFixed: function toFixed() { [native code] }
toLocaleString: function toLocaleString() { [native code] }
toPrecision: function toPrecision() { [native code] }
toString: function toString() { [native code] }
valueOf: function valueOf() { [native code] }
__proto__: Object
  __defineGetter__: function __defineGetter__() { [native code] }
  __defineSetter__: function __defineSetter__() { [native code] }
  __lookupGetter__: function __lookupGetter__() { [native code] }
  __lookupSetter__: function __lookupSetter__() { [native code] }
  constructor: function Object() { [native code] }
  hasOwnProperty: function hasOwnProperty() { [native code] }
  isPrototypeOf: function isPrototypeOf() { [native code] }
  propertyIsEnumerable: function propertyIsEnumerable() { [native code] }
  toLocaleString: function toLocaleString() { [native code] }
  toString: function toString() { [native code] }
  valueOf: function valueOf() { [native code] } 
```

但是如果我们覆盖 Object

```
Object = {} 
```

Number 的原型有点奇怪：

```
Number.prototype
   > Number

  ...empty... 
```

由于 Object 是层次结构的根，因此如果将其重新分配给另一个对象，则会出现一些悖论。

# html - jQuery Mobile 内容高度：100%

> ID：11596167
> 
> 赞同：5
> 
> 时间：2012-07-21T22:00:51.983
> 
> 标签：html, css, jquery-mobile

我正在使用 JQuery Mobile 开发应用程序。

[这](http://pastie.org/4297199)是我的html代码。

我的页面里面是全屏的`<iframe>`。`width:100%; height:100%; border:0%`我已经为我设置了样式，`iframe`但它给出的高度超过了内容的高度，并且出现了主页的滚动条。

我该如何避免这个问题？（我想要`height:100%`我的`iframe`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T11:00:40.760

谢谢大家的解答！

最后，我找到了解决方案。我的解决方案有点混乱，但没关系。

这是我的CSS：

```
 html,body{overflow-y:hidden}
    .frame {
        height: 100% ;
        width: 100% ;
        border: 0  ;
        background-color: green ;
    }

    .content {
        height: 100%;
        width: 100%;
        overflow-y: hidden;
    }

    .ui-content {
        margin: 0   !important ;
        padding: 0   !important ;
        border: 0   !important ;
        outline: 0   !important ;
        height: 100%  ;
        overflow: hidden  ;
    } 
```

但是如果我使用 JQuery Mobile 标头，将会有一个额外的空间（几乎等于标头大小。）也可以使用下面的 Javascript 来解决：

```
function correctFrameSize() {
    document.getElementById('content').style.height = (window.innerHeight-40)+"px";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T22:08:00.447

我猜浏览器在 and/or 上设置了一点边距和/或`body`填充`html`。

尝试[经典的 CSS 重置。](http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/)

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-weight: inherit;
    font-style: inherit;
    font-size: 100%;
    font-family: inherit;
    vertical-align: baseline;
}
/* remember to define focus styles! */
:focus {
    outline: 0;
}
body {
    line-height: 1;
    color: black;
    background: white;
}
ol, ul {
    list-style: none;
}
/* tables still need 'cellspacing="0"' in the markup */
table {
    border-collapse: separate;
    border-spacing: 0;
}
caption, th, td {
    text-align: left;
    font-weight: normal;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: "";
}
blockquote, q {
    quotes: "" "";
} 
```

此外，您可以通过执行以下操作确保滚动条不出现：

```
html, body {overflow-y: hidden;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T00:16:11.757

@Mahdi 试试这个，

```
<iframe id="cnt" width="100%" height="100%" frameborder="0" allowfullscreen>Your browser doesn't support iframes.</iframe> 
```

**希望这可以帮助。:)**

# java - java: Object1 & Object2 与 Object2 & Object1 相同

> ID：11596171
> 
> 赞同：1
> 
> 时间：2012-07-21T22:01:53.883
> 
> 标签：java, unique, hashcode

我尝试在不同的 GridPositions(x,y) 之间画线。每个 GridPos 都有 4 个连接，北、东、南、西。问题是如果我画一条从 GridPos(1,1) 到 GridPos(2,2) 的线，程序稍后还会在 GridPos(2,2) 和 GridPos(1,1) 之间画一条反向线。

我试图用这个类来解决问题（WarpGate 和 GridPos 一样）：

```
public class GateConnection {

private WarpGate gate1 = null;
private WarpGate gate2 = null;

public GateConnection(WarpGate gate1, WarpGate gate2) {
    super();
    this.gate1 = gate1;
    this.gate2 = gate2;
}

@Override
public int hashCode() {
    final int prime = 31;

    int result = prime * ((gate1 == null) ? 0 : gate1.hashCode());
    result += prime * ((gate2 == null) ? 0 : gate2.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj) {
        return true;
    }
    if (obj == null) {
        return false;
    }
    if (getClass() != obj.getClass()) {
        return false;
    }
    GateConnection other = (GateConnection) obj;
    if ((gate1.equals(other.gate1) || gate1.equals(other.gate2)) && (gate2.equals(other.gate2) || gate2.equals(other.gate1))) {
        return true;
    }
    return false;
}

} 
```

可以将此类添加到 HashSet 并且双重绘画将消失，但我不知道 hashValue 是否始终是唯一的。

WarpGate的HashCode（由eclipse自动生成）：

```
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + gridX;
    result = prime * result + gridY;
    return result;
} 
```

现在我使用一个 ArrayList。我看看 GateConnection 是否存在，如果不存在则添加。但是这个版本比使用 HashSet 需要更多的资源。

**编辑：**

白色矩形是绘制的连接，数字是 GridPositions(x|y)，红色箭头是绘制矩形的两个方向，因为 GridPos(2|2) 与 GridPos(4|2) 和(4|2) 至 (2|2) ![在此处输入图像描述](../Images/0ddfa412e9ee00787a6a10b393b96ec4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:23:51.807

A`TreeSet`既不使用`hashCode()`也不使用`equals()`。它使用`compareTo()`，但您应该确保它与`equals()`尊重`Set`语义一致。

对于 a `HashSet`，`hashCode()`存储对象的 不必*是*唯一的。`equals()`事实上，如果您愿意，您可以为每个项目返回相同的代码，并且如果您的实施正确，它们仍将被存储而不会丢失任何项目。好的`hashCode()`只会提高性能。

**唯一的关键规则是两个相等的项目必须生成相同的哈希码。**

只要您可以保证`gate1`并且`gate2`在同一个`GateConnection`对象中永远不会相等，您的实现看起来就可以了。如果它们相等，则两个`GateConnection`对象可能具有不同的哈希码，但报告为相等。如果将它们存储在`HashSet`.

例如 GateConnection((1,1), (1,1))*等于*GateConnection((1,1), (7,9)) 但哈希码不同。

# android - 重发：通知（NPE 问题）

> ID：11596175
> 
> 赞同：0
> 
> 时间：2012-07-21T22:03:08.467
> 
> 标签：android, nullpointerexception

我将代码重新编写到我的通知类中。每次我去运行它时，它都会向我吐出一个空指针异常。所以这里再一次是代码：

```
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.widget.RemoteViews;

public class kickStart extends Activity {
NotificationManager nm;
Context context = this;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Notification notification = new Notification();
    RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.note);
    contentView.setImageViewResource(R.id.icon, R.drawable.ic_launcher);
    contentView.setTextViewText(R.id.title, "Custom notification");
    contentView.setTextViewText(R.id.text, "This is a custom layout");
    notification.contentView = contentView;
    Intent notificationIntent = new Intent(this, MainActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
    notification.contentIntent = contentIntent;
    notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    int CUSTOM_VIEW_ID = 10;
    nm.notify(CUSTOM_VIEW_ID, notification);
}
} 
```

现在的问题是：为什么我会得到 NPE……以及如何解决它。

这是 LOGCAT

```
07-21 17:58:33.360: W/dalvikvm(6511): threadid=1: thread exiting with uncaught exception (group=0x40018560)
07-21 17:58:33.360: E/AndroidRuntime(6511): FATAL EXCEPTION: main
07-21 17:58:33.360: E/AndroidRuntime(6511): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.this/com.example.this.kickStart}: java.lang.NullPointerException
07-21 17:58:33.360: E/AndroidRuntime(6511):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
07-21 17:58:33.360: E/AndroidRuntime(6511):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-21 17:58:33.360: E/AndroidRuntime(6511):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-21 17:58:33.360: E/AndroidRuntime(6511):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-21 17:58:33.360: E/AndroidRuntime(6511):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-21 17:58:33.360: E/AndroidRuntime(6511):     at android.os.Looper.loop(Looper.java:130)
07-21 17:58:33.360: E/AndroidRuntime(6511):     at android.app.ActivityThread.main(ActivityThread.java:3683)
07-21 17:58:33.360: E/AndroidRuntime(6511):     at java.lang.reflect.Method.invokeNative(Native Method)
07-21 17:58:33.360: E/AndroidRuntime(6511):     at java.lang.reflect.Method.invoke(Method.java:507)
07-21 17:58:33.360: E/AndroidRuntime(6511):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
07-21 17:58:33.360: E/AndroidRuntime(6511):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
07-21 17:58:33.360: E/AndroidRuntime(6511):     at dalvik.system.NativeStart.main(Native Method)
07-21 17:58:33.360: E/AndroidRuntime(6511): Caused by: java.lang.NullPointerException
07-21 17:58:33.360: E/AndroidRuntime(6511):     at com.example.this.kickStart.onCreate(kickStart.java:29)
07-21 17:58:33.360: E/AndroidRuntime(6511):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-21 17:58:33.360: E/AndroidRuntime(6511):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-21 17:58:33.360: E/AndroidRuntime(6511):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T22:05:52.857

你还没有初始化`nm`：

```
nm.notify(CUSTOM_VIEW_ID, notification); 
```

您应该添加：

```
nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE); 
```

在尝试使用之前`nm`。希望有帮助！

**来自 LogCat**

为了将来参考这两行：

```
Caused by: java.lang.NullPointerException
    at com.example.this.kickStart.onCreate(kickStart.java:29) 
```

告诉我们 NPE 在 kickStart.java 的第 29 行，特别是 kickStart.onCreate()。使用此信息，您应该能够比我们任何人更快地找到您的 NPE，因为我们没有行号。**:)**

# php - 当前浏览器版本检测

> ID：11596176
> 
> 赞同：2
> 
> 时间：2012-07-21T22:03:13.663
> 
> 标签：php, javascript, browser

我正在构建一个小型应用程序来确定您的浏览器是否是最新的。我在 PHP 和 javascript 中找到了获取用户代理的方法，但如果您的浏览器是最新版本，我正在寻找某种 API 或服务来获得响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:43:23.453

您可以通过每周或每天的 cron 作业保持最新浏览器版本的 APC（或文件或其他）缓存更新，该作业从各个网站抓取最新版本号。然后，您可以创建一个 PHP 脚本，该脚本利用该缓存并将其与用户代理进行比较，以返回浏览器是否是最新的。

话虽如此，更有用和可持续的方法是确定您需要哪些功能，然后使用[modernizr](http://modernizr.com/)，它实际上是您可以用来确保兼容性的最有用的 JS 库之一。如果您查看[下载页面](http://modernizr.com/download/)，您可以看到使用脚本可以检测到哪些功能，因此您可以适当地定制您的网站。

# ubuntu - neo4j 和最大打开文件

> ID：11596177
> 
> 赞同：14
> 
> 时间：2012-07-21T22:03:33.833
> 
> 标签：ubuntu, neo4j

我在 ubuntu 上使用 neo4j 1.8M06。当我启动它时，我收到以下警告：

```
WARNING: Max 1024 open files allowed, minimum of 40 000 recommended. 
```

这是什么意思？如果需要，如何调整此设置？

我已经在这个问题上看到[了这个线程](https://groups.google.com/forum/#!topic/neo4j/7-H8Or1PJg4)，但仍然无法理解。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-24T06:39:16.203

这意味着您只能打开“1024”（默认）文件进行写入。但`NEO4J`推荐这个值为`40K`。这可以通过如下所述的修复来实现。

编辑`/etc/security/limits.conf`并添加这两行：

```
root   soft    nofile  40000
root   hard    nofile  40000 
```

neo4j 在这里推荐使用“neo4j”代替“root”。那是行不通的。

您还需要编辑`/etc/pam.d/common-session*`以下行并将其添加到末尾：

```
session required pam_limits.so 
```

是的，最后你必须重新启动 NEO4J。

```
sudo service neo4j-service restart 
```

参考：[NEO4J 服务器设置](http://www.codiply.com/blog/standalone-neo4j-server-setup-on-ubuntu-14-04/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-24T03:58:50.133

目前（neo4j 3.1.1），neo4j 有官方的解决方案。

大多数 Neo4j 配置进入 neo4j.conf。在 /etc/default/neo4j 中设置了一些特定于软件包的选项。

将此配置添加到 /etc/default/neo4j

```
NEO4J_ULIMIT_NOFILE=40000 
```

然后重新启动 neo4j 服务以使其工作。

```
sudo service neo4j start 
```

看

*   [https://neo4j.com/docs/operations-manual/current/installation/linux/debian/#debian-operation](https://neo4j.com/docs/operations-manual/current/installation/linux/debian/#debian-operation)
*   [https://neo4j.com/developer/kb/how-do-i-set-max-open-files-for-debian-installs/](https://neo4j.com/developer/kb/how-do-i-set-max-open-files-for-debian-installs/)

# templates - Express 和 Jade 的模板继承

> ID：11596179
> 
> 赞同：2
> 
> 时间：2012-07-21T22:03:58.297
> 
> 标签：templates, node.js, express, pug

我很难让模板继承正常工作。我发现我可以让索引/布局运行良好，但它不包括其他扩展块。例如，这是我的 layout.jade 文件：

```
#wrapper
      block tester

      // Side bar
      #list
        ul#friend-list.browser
          li#friends.label Friends
          li#following.label Following

      // Content
      block content 
```

在同一个目录中，我有 index.jade 和 tester.jade。index.jade 包含以下内容，并且有效：

```
extends layout

block content
  .content
        .row-fluid
          .span12
            .row-fluid
              #browser-toolbar.span12.toolbar
            .row-fluid
              .span12
                #bento 
```

tester.jade 看起来像这样，*但*不起作用：

```
extend layout

block tester
  h1 hello world 
```

我目前正在使用 Express v.3.0b4。谁能帮助解释为什么这不起作用？它不会抛出错误——它根本不会渲染 tester.jade 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:20:57.207

这只是`extends`与 's' vs 一起使用的问题`extend`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T23:41:56.960

Express 3.x 显着改变了视图处理，不再自动引用布局。检查迁移指南。

# javascript - 如何通过 JavaScript 链接到 web 根目录上方的目录？

> ID：11596182
> 
> 赞同：0
> 
> 时间：2012-07-21T22:04:09.403
> 
> 标签：javascript

我正在尝试链接到 web 根目录上方的目录，但它在 JavaScript 中不起作用。不管我使用多少`../`，它不会超过两次，这是到达网络根目录所必需的。（不过，使用 PHP 可以正常工作）我认为这应该是可能的吧？会不会是权限问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:08:24.710

JavaScript 是客户端——它运行在浏览器上，而不是服务器上。正确设置的服务器不会让客户端访问指定区域之外的内容，无论是在地址栏中输入 URL、HTML 页面中包含的链接还是由 JavaScript 创建的 URL。无论如何，对于服务器来说都是一样的——它只是一个 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:09:47.747

如果您想访问网站根名称，它在这里：

```
var root = location.protocol + '//' + location.host; 
//For a url, let say 'http://google.com/ig', it will return 'http://google.com' 
```

但是，如果您想访问服务器的任何文件，Christian Stieber 的回答是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T22:10:22.713

Javascript 在客户端工作。客户端对服务器的文件系统一无所知，因此无法知道或访问那里的任何内容 - 客户端的根是域名，再添加一个 '..' 意味着尝试跳入域名之上，而不是文件系统中的一层之上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T22:37:30.603

您无法链接到 Web 根目录上方的文件夹，因为它根本不存在。

您链接到 Web 资源，而不是物理文件夹。此资源通常对应于物理存储在服务器上的文件或文件夹，但并非必须如此。当它确实对应于文件系统中的文件或文件夹时，只有与 web 根目录对应的文件夹下的文件夹是该 web 中资源的一部分。文件夹上方的任何内容都不是网络的一部分。尽管它存在于文件系统中，但它并不作为 Web 资源存在。

# perl - Perl：“半”无限循环？

> ID：11596185
> 
> 赞同：1
> 
> 时间：2012-07-21T22:04:22.883
> 
> 标签：perl

我这里有一个工作代码，它适用于 8 或 10 封电子邮件，但如果你只放 20 封电子邮件，它永远不会完成计算。也就是说，它不是一个无限循环，否则它永远不会计算任何东西。此外，如果您只使用 10 封电子邮件，但要求它列出超过 2 封电子邮件，同样的事情也会发生。是的，正如所指出的，有一段时间（@address），并且在某个地方，推入地址，这就是原因。我试图用另一个名字替换它被推送到的那个数组，但是我得到了奇怪的错误，比如它从列表中选择了一封电子邮件，它会抱怨虽然严格引用是打开的，但我不能使用它......我理解 100%直到'map'行的代码。之后就没那么多了...

如果我们看这部分：

```
push @addresses, $address;
    $moved{$address}++;
#     say "pushing $address to moved"; # debug 
```

有人会说变量 $address 必须被推入，而不是推入@addresses，因为那是数据的来源（因此指出了循环），而是推到 ..'moved' 但是，对不起，'moved' 是一个哈希。您不能将变量推送到哈希中，可以吗？那么“移动”实际上应该是一个数组而不是一个散列吗？这就是我迷路的地方

我正在考虑这个，但是......这只是直觉，而不是真正的知识

```
push @{ $moved[$i] }, $address 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:50:28.013

我想我已经解决了它，以“Konerak”的评论为出发点。事实上，这个问题是一个从未减少的清单。因为我对参考数组不了解，所以我有点迷茫，但是以某种方式阅读了我试图在预期行为中找到相似性的代码。

因此，我创建了另一个名为 @reserva 的数组并写了这个：

```
push @ {$reserva [$i]}, $address 
```

代替

```
 push @addresses, $address; 
```

现在，无论我输入多少封电子邮件，我都会得到所需大小的列表。我尝试了 1000 次，不到一秒钟就没有问题。

所以，这是完整的代码

```
use strict;
use warnings;
use feature 'say';
use Data::Dumper;

my $only_index = 3; # Read from command line with $ARGV[0] or use Getopt::Long

my %blacklist = (       # Each key in this hash represents one index/day
  '2' => [ 'a', 'b' ],  # and has an arrayref of domains that have replied on
  '3' => [ 'c' ],       # that day. We look at all keys smaller than the current
);                      # index in each iteration and ignore all these domains 

my @domains; # holds the domains we have already seen for each list
my @lists = ([]); # Holds all the lists
my %moved; # the addresses we moved to the back
my $i = 0;
my @addresses = <DATA>;

while (@addresses) {
  my $address = shift @addresses;
  chomp $address;
  $address =~ m/@([a-zA-Z0-9\-.]*)\b/;
  my $domain = $1;

  # If the domain has answered, do not do it again 
  next if 
    grep { /$domain/ } 
    map { exists $blacklist{$_} ? @{ $blacklist{$_} } : () }  (0..$i);
  $i++ if (@{ $lists[$i] } == 2 
           || (exists $moved{$address} && @addresses < 1));
  if (exists $domains[$i]->{$domain}) {
    push @addresses, $address;
    $moved{$address}++;
#     say "pushing $address to moved"; # debug
  } else {
    $domains[$i]->{$domain}++;
    # send the email
#     say "added $address to $i";      # debug
    push @{ $lists[$i] }, $address;
  }
}
# print Dumper \@lists;           # Show all lists
print Dumper $lists[$only_index]; # Only show the selected list
1;

__DATA__
1@a
2@a
3@a
1@b
2@b
1@c
2@c
3@c
1@d
2@d
3@d
4@d
1@e
1@f
1@g
1@h
4@a
5@a
4@c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:24:51.073

那是一些曲折的代码，难怪您在遵循它时遇到了麻烦。我实际上不确定代码的主体应该完成什么，但您至少可以通过不使用`while (@array)`- use`foreach my $item (@array)`来避免无限循环，您将对其进行迭代并避免因修改而产生的奇怪行为循环内的数组。

```
chomp(@addresses);  # chomp called on an array chomps each element 
foreach my $address (@addresses) {
    # Do work here
} 
```

# jquery - 在 URL 参数中存储表单值

> ID：11596193
> 
> 赞同：0
> 
> 时间：2012-07-21T22:06:20.890
> 
> 标签：jquery

我有一个 d3 图表，其中包含一些`<input>`配置元素。我希望这些配置选项在更改 URL 参数时更新它们，并且显然在加载页面时这些 URL 参数应该用作默认值。

这似乎是很多网站上的一项基本功能，是否有一个 jQuery 库（我找不到）我可以直接加入？还是我需要自己动手。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:10:11.880

检查 Ben Allmans jQuery BBQ，[http: //benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

或者，您可以通过观察 hashchange 事件并将内容存储在哈希标签中来为简单的情况滚动。

> jQuery BBQ 利用 HTML5 hashchange 事件来实现简单但功能强大的可书签 #hash 历史记录。此外，jQuery BBQ 提供了完整的 .deparam() 方法，以及散列状态管理以及片段/查询字符串解析和合并实用程序方法。

# eclipse - 如何在 Eclipse 中显示尾随空格？

> ID：11596194
> 
> 赞同：27
> 
> 时间：2012-07-21T22:06:40.790
> 
> 标签：eclipse, ide, whitespace

我在 emacs 中寻找类似 (setq show-trailing-whitespace t) 的东西，其中所有尾随空格都非常清晰，即突出显示。我对这种选项的搜索大多出现了删除所有尾随空格的示例，这根本不是我想要的。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-21T22:11:48.407

点击：

```
Window > Preferences > General > Editors > Text Editors 
```

然后单击链接“空白字符”以指定应显示的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-20T23:16:07.790

我为此决定的需要一个插件，但还不错。然后，您的尾随空格将在文件中显示为 eclerror/warning。

1: eclipse checkstyle 插件 2: 让 checkstyle 配置随心所欲。如果您只想要尾随空格：

```
<module name="Checker">
  <module name="TreeWalker">
    <module name="Regexp">
      <property name="format" value="[ \t]+$"/>
      <property name="illegalPattern" value="true"/>
      <property name="message" value="Trailing whitespace"/>
    </module>
  </module>
</module> 
```

# asp.net - 如何向表单添加其他字段并仍然使用 MVC？

> ID：11596197
> 
> 赞同：1
> 
> 时间：2012-07-21T22:07:32.257
> 
> 标签：asp.net, asp.net-mvc

我想显示一个允许用户输入最多 10 行信息的表单。如果他们需要过去，我将使用“添加附加行”按钮一次添加一行。对于这样的事情，我的模型类会是什么样子？当我使用 javascript 添加新行时，如何将该新行也绑定到模型中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T22:13:45.890

[Phil Haack 的这篇](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)文章向您展示了如何绑定到集合。您需要使用 javascript 创建具有正确名称的新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:18:27.463

可能此行包含相关值，因此您可以为 html 中的所有这些输入赋予相同的名称，并声明您的操作接收一个值数组。

假设你有这个

```
<form method="post" action="/Controller/YourAction">
    <input type="text" name="row" value="1" />
    <input type="text" name="row" value="2" />
    <input type="text" name="row" value="3" />
    <input type="text" name="row" value="4" />
    <input type="text" name="row" value="5" />
    <input type="text" name="row" value="6" />
    <input type="submit" />
</form> 
```

您需要做的就是在 Controller 中声明它

```
public ActionResult YourAction(int[] row)
{ 
//put your code here
} 
```

你将拥有行数组中的所有值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T06:39:16.263

您可以查看[以下博客文章](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)，其中解释了如何实现这一目标。它使用一个自定义帮助器 ( `Html.BeginCollectionItem`)，它允许使用非顺序作为集合索引而不是数字，这使得添加/删除新项目更加容易。

# iphone - 打开和关闭其他 UIViewControllers - 除了使用协议和委托之外的任何其他方法？

> ID：11596200
> 
> 赞同：1
> 
> 时间：2012-07-21T22:07:59.910
> 
> 标签：iphone, ios, uiviewcontroller, delegates

从 FirstVC 屏幕中打开另一个屏幕以便再次关闭它的正常方法是这样的：

```
 SecondVC *secondVC = [[SecondVC alloc] initWithNibName:@"SecondVC" bundle:nil];
    secondVC.delegate = self; //needed to dismiss
    [self presentModalViewController: secondVC animated: YES]; 
```

而`SecondVC.m`必须导入一个协议，该协议声明调用关闭 SecondVC 的方法

所以我总是必须创建一个`SecondVCProtocol.h`基本上如下所示的协议文件：

```
@protocol SecondVCProtocol <NSObject>
-(void)secondVCDidFinish;
@end 
```

然后在`SecondVC.m`我需要导入这个`SecondVCProtocol.h`文件，现在终于可以调用

```
 [self.delegate    secondVCDidFinish] 
```

我刚刚完成了另一个 Android 应用程序并回到了 iOS 世界，我觉得这相当麻烦。- 需要在单独的文件中定义这样的协议并需要使用委托 - 只是为了完成最正常的任务，比如关闭屏幕......

**没有更简单的不太复杂的方法，还是必须这样做？**

例如，就像`[self dismiss]`在 SecondVC 中一样——没有委托，没有协议——他不是很好吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T22:31:15.387

你可以打电话

```
dismissViewControllerAnimated:completion: 
```

在呈现的视图控制器上，尽管这并不是最佳实践。

来自 Apple 的文档：

> 呈现视图控制器负责关闭它呈现的视图控制器。如果您在呈现的视图控制器本身上调用此方法，它会自动将消息转发到呈现的视图控制器。

也来自Apple的文档（[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)）

> 当需要关闭呈现的视图控制器时，首选的方法是让呈现的视图控制器关闭它。换句话说，只要有可能，呈现视图控制器的同一个视图控制器也应该负责解除它。尽管有几种技术可以通知呈现视图控制器其呈现的视图控制器应该被解除，但首选技术是委托。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T22:28:48.923

你描述的不是最简单的模式。实际上，您应该做一些与您建议的非常相似的事情。当 SecondVC 准备好被解雇时，它只会调用，例如：

```
[self dismissViewControllerAnimated:YES completion:NULL]; 
```

从[UIViewController 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)：

> 呈现视图控制器负责关闭它呈现的视图控制器。*如果您在呈现的视图控制器本身上调用此方法，它会自动将消息转发到呈现的视图控制器。*

# perl - 如何多线程查看 Perl 中是否存在网页？

> ID：11596203
> 
> 赞同：3
> 
> 时间：2012-07-21T22:08:23.240
> 
> 标签：perl, networking

我正在编写一个 Perl 脚本，它接收一个 URL 列表并检查它们是否存在。（请注意，我只关心它们是否存在；我*不*关心它们的内容是什么。这是程序的重要部分。

```
use LWP::Simple qw($ua head);

if (head($url))
{
    $numberAlive ++;
}
else
{
    $numberDead ++;
} 
```

现在程序运行良好；但是，我希望它运行得更快。因此，我正在考虑将其设为多线程。我假设我的程序的缓慢部分是为每个 URL 联系服务器；因此，我正在寻找一种在等待第一个响应时可以向列表中其他网页的 URL 发送请求的方法。我怎样才能做到这一点？据我所知，该`head`例程没有可以在服务器响应后调用的回调。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T00:55:40.600

从熟悉的前题开始。

```
#! /usr/bin/env perl

use strict;
use warnings;

use 5.10.0;  # for // (defined-or)

use IO::Handle;
use IO::Select;
use LWP::Simple;
use POSIX qw/ :sys_wait_h /;
use Socket; 
```

全局常量控制程序执行。

```
my $DEBUG = 0;
my $EXIT_COMMAND = "<EXIT>";
my $NJOBS = 10; 
```

要检查的 URL 每行到达一个套接字的工作者端。对于每个 URL，worker 调用`LWP::Simple::head`以确定资源是否可获取。*然后，worker 将格式为url* 的一行写回套接字**：*****status* 其中 *status* 是`"YES"`or`"NO"`和***表示空格字符。***

 ***如果 URL 是`$EXIT_COMMAND`，则工作人员立即退出。

```
sub check_sites {
  my($s) = @_;

  warn "$0: [$$]: waiting for URL" if $DEBUG;

  while (<$s>) {
    chomp;
    warn "$0: [$$]: got '$_'" if $DEBUG;
    exit 0 if $_ eq $EXIT_COMMAND;
    print $s "$_: ", (head($_) ? "YES" : "NO"), "\n";
  }

  die "NOTREACHED";
} 
```

要创建一个工作者，我们首先创建一个[`socketpair`](http://perldoc.perl.org/functions/socketpair.html). 父进程将使用一端，每个工人（子）将使用另一端。我们禁用两端的缓冲并将父端添加到我们的 IO::Select 实例。我们还记录了每个孩子的进程 ID，以便我们可以等待所有工作人员完成。

```
sub create_worker {
  my($sel,$kidpid) = @_;

  socketpair my $parent, my $kid, AF_UNIX, SOCK_STREAM, PF_UNSPEC
    or die "$0: socketpair: $!";
  $_->autoflush(1) for $parent, $kid;

  my $pid = fork // die "$0: fork: $!";
  if ($pid) {
    ++$kidpid->{$pid};
    close $kid or die "$0: close: $!";
    $sel->add($parent);
  }
  else {
    close $parent or die "$0: close: $!";
    check_sites $kid;
    die "NOTREACHED";
  }
} 
```

为了分派 URL，父级获取尽可能多的可用阅读器，并从作业队列中分发相同数量的 URL。在作业队列为空后剩余的任何工作人员都会收到退出命令。

请注意，`print`如果底层工作人员已经退出，则会失败。父母必须忽略`SIGPIPE`以防止立即终止。

```
sub dispatch_jobs {
  my($sel,$jobs) = @_;

  foreach my $s ($sel->can_write) {
    my $url = @$jobs ? shift @$jobs : $EXIT_COMMAND;
    warn "$0 [$$]: sending '$url' to fd ", fileno $s if $DEBUG;
    print $s $url, "\n" or $sel->remove($s);
  }
} 
```

到时间控制达到`read_results`时，工人已经创建并接受了工作。现在父母用来[`can_read`](http://perldoc.perl.org/IO/Select.html#can_read-%28-[-TIMEOUT-]-%29)等待一个或多个工人的结果到达。定义的结果是当前工作人员的回答，未定义的结果意味着孩子已经退出并关闭了套接字的另一端。

```
sub read_results {
  my($sel,$results) = @_;

  warn "$0 [$$]: waiting for readers" if $DEBUG;
  foreach my $s ($sel->can_read) {
    warn "$0: [$$]: reading from fd ", fileno $s if $DEBUG;
    if (defined(my $result = <$s>)) {
      chomp $result;
      push @$results, $result;
      warn "$0 [$$]: got '$result' from fd ", fileno $s if $DEBUG;
    }
    else {
      warn "$0 [$$]: eof from fd ", fileno $s if $DEBUG;
      $sel->remove($s);
    }
  }
} 
```

父母必须跟踪现场工作人员以收集所有结果。

```
sub reap_workers {
  my($kidpid) = @_;

  while ((my $pid = waitpid -1, WNOHANG) > 0) {
    warn "$0: [$$]: reaped $pid" if $DEBUG;
    delete $kidpid->{$pid};
  }
} 
```

运行池执行上面的 subs 以调度所有 URL 并返回所有结果。

```
sub run_pool {
  my($n,@jobs) = @_;

  my $sel = IO::Select->new;
  my %kidpid;
  my @results;

  create_worker $sel, \%kidpid for 1 .. $n;

  local $SIG{PIPE} = "IGNORE";  # writes to dead workers will fail

  while (@jobs || keys %kidpid || $sel->handles) {
    dispatch_jobs $sel, \@jobs;

    read_results $sel, \@results;

    reap_workers \%kidpid;
  }

  warn "$0 [$$]: returning @results" if $DEBUG;
  @results;
} 
```

使用示例主程序

```
my @jobs = qw(
  bogus
  http://stackoverflow.com/
  http://www.google.com/
  http://www.yahoo.com/
);

my @results = run_pool $NJOBS, @jobs;
print $_, "\n" for @results; 
```

输出是

```
假的：没有
http://www.google.com/：是的
http://stackoverflow.com/：是的
http://www.yahoo.com/：是的
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T07:58:03.813

另一种选择是 HTTP::Async。

```
#!/usr/bin/perl
use strict;
use warnings;

use HTTP::Request;
use HTTP::Async;

my $numberAlive = 0;
my $numberDead  = 0;
my @urls = ('http://www.perl.com','http://www.example.xyzzy/foo.html');

my $async = HTTP::Async->new;

# you might want to wrap this in a loop to deal with @urls in batches
foreach my $url (@urls){   
  $async->add( HTTP::Request->new( HEAD => $url ) );
  }

while ( my $response = $async->wait_for_next_response ) {
  if ($response->code == 200){$numberAlive ++;}
  else{$numberDead ++;}
  }

print "$numberAlive Alive, $numberDead Dead\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T06:36:06.387

基于 Worker 的并行化（使用您选择的线程或进程）：

```
use strict;
use warnings;
use feature qw( say );
use threads;  # or: use forks;

use LWP::Simple        qw( head );
use Thread::Queue::Any qw( );

use constant NUM_WORKERS => 10;  # Or whatever.

my $req_q  = Thread::Queue::Any->new();
my $resp_q = Thread::Queue::Any->new();

my @workers;
for (1..NUM_WORKERS) {
   push @workers, async {
      while (my $url = $req_q->dequeue()) {
         my $is_alive = head($url) ? 1 : 0;
         $resp_q->enqueue($is_alive);
      }
   };
}

$req_q->enqueue($_) for @urls;

my ($alive, $dead);
for (1..@urls) {
   my $is_alive = $resp_q->dequeue();
   ++( $is_alive ? $alive : $dead );
}

$req_q->enqueue(undef) for @workers;
$_->join for @workers;

say $alive;
say $dead; 
```***

# r - R参考类问题

> ID：11596213
> 
> 赞同：7
> 
> 时间：2012-07-21T22:09:58.463
> 
> 标签：r, oop, reference-class

我正在尝试在 R 中创建一个简单的参考类。这是我的代码（R 初学者）：

```
MyClass <- setRefClass("MyClass",
                       fields = list(a = "numeric",
                                     b = "numeric"),

                       methods = list(
                         initialize <- function(){
                           print("Initializing")
                           a <<- 1
                           b <<- 2
                         },

                         printValues <- function(){
                           print(a)
                           print(b)
                         }
                         )
                       )

a <- MyClass$new()
a$printValues() 
```

这会为最后一行 a$printValues 产生以下错误：

```
Error in envRefInferField(x, what, getClass(class(x)), selfEnv) : 
  "printValues" is not a valid field or method name for reference class “MyClass” 
```

另外，没有调用初始化方法？

有人可以指出问题出在哪里吗？提前谢谢了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T22:33:46.860

to的`methods`参数`setRefClass`需要是一个命名列表。问题是您在定义列表时使用的是分配运算符`<-`而不是。`=`查看两者之间的区别

```
list(a = 1, b = 2)
# $a
# [1] 1
# 
# $b
# [1] 2 
```

它返回一个命名列表和

```
list(a <- 1, b <- 2)
# [[1]]
# [1] 1
# 
# [[2]]
# [1] 2 
```

它在您的环境中创建`a`and`b`并返回一个未命名的列表。

因此，在传递您的方法时，您需要使用`=`：

```
methods = list(initialize = function [...],
               printValues = function [...] 
```

# django - 根据到点的距离从数据库中获取元素

> ID：11596214
> 
> 赞同：0
> 
> 时间：2012-07-21T22:10:03.843
> 
> 标签：django, geolocation, reverse-geocoding

我对后端网页设计很陌生，但我正在构建一个 web 应用程序，并且将拥有一个位置数据库。随着数据库变得越来越大，我意识到如果我希望人们能够访问数据库并说，例如，查看他们周围的点，则需要很长时间才能遍历每个元素并检查它们与任何元素的距离。给定点。

有谁知道快速检查数据库的方法，但可能只知道相关位置？

如果这有什么不同，我正在使用 python、django 和 SQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:27:20.577

快速访问数据库中数据的方法是添加键。但是“常规”键在可能值的严格排序上运行，即一维域。地理位置需要二维访问。基本上有两种方法可以使用：

*   使用您的 DBMS 提供的特定 2D 功能，例如MySQL 的[空间扩展](http://dev.mysql.com/doc/refman/5.6/en/spatial-extensions.html)。
*   对索引使用[Z 阶曲线](http://en.wikipedia.org/wiki/Z-order_curve)等[空间填充曲线](http://en.wikipedia.org/wiki/Space-filling_curve)，以便闭合点对应于索引空间中的少量小区间。

您可能还想查看相关标签，例如[地理信息](/questions/tagged/geographical-information "显示标记为“地理信息”的问题")和[最近邻](/questions/tagged/nearest-neighbor "显示标记为“最近邻”的问题")，或者查看相关问题，例如关于[K-Nearest neighbors](https://stackoverflow.com/q/9530970/1468366)的问题。您可能想提供有关您正在使用的数据库系统的更多详细信息。

# ios - iOS 蓝牙 LE kCBAdvDataServiceUUID 的格式是什么？

> ID：11596217
> 
> 赞同：3
> 
> 时间：2012-07-21T22:10:21.003
> 
> 标签：ios, core-bluetooth

在 centralManager:didDiscoverPeripheral:advertisementData:RSSI（下面的完整代码）中，我在 NSDictionary 中找到了一个名为 kCBAdvDataServiceUUIDs 的键。我正在尝试读取这些数据以确定设备上可用的服务。这个数据是什么格式的？类描述很简单

```
Unknown (<fff0>) 
```

这是来源：

```
- (void) centralManager: (CBCentralManager *) central
  didDiscoverPeripheral: (CBPeripheral *) aPeripheral
      advertisementData: (NSDictionary *) advertisementData
                   RSSI: (NSNumber *) RSSI
{
printf("Discovered %s\n", [[aPeripheral name] cStringUsingEncoding: NSUTF8StringEncoding]); // TODO: Remove printfs
    printf("  RSSI: %s\n", [[RSSI stringValue] cStringUsingEncoding: NSUTF8StringEncoding]);
    NSArray *keys = [advertisementData allKeys];
    for (int i = 0; i < [keys count]; ++i) {
        id key = [keys objectAtIndex: i];
        NSString *keyName = (NSString *) key;
        NSObject *value = [advertisementData objectForKey: key];
        if ([value isKindOfClass: [NSArray class]]) {
            printf("   key: %s\n", [keyName cStringUsingEncoding: NSUTF8StringEncoding]);
            NSArray *values = (NSArray *) value;
            for (int j = 0; j < [values count]; ++j) {
                NSObject *aValue = [values objectAtIndex: j];
                printf("       %s\n", [[aValue description] cStringUsingEncoding: NSUTF8StringEncoding]);
                printf("       is NSData: %d\n", [aValue isKindOfClass: [NSData class]]);
            }
        } else {
            const char *valueString = [[value description] cStringUsingEncoding: NSUTF8StringEncoding];
            printf("   key: %s, value: %s\n", [keyName cStringUsingEncoding: NSUTF8StringEncoding], valueString);
        }
    }
} 
```

以下是 TI CC2250 迷你开发套件中密钥卡的输出：

```
Discovered (null)
  RSSI: -36
   key: kCBAdvDataServiceUUIDs
       Unknown (<fff0>)
       is NSData: 0
Discovered SimpleBLEPeripheral
  RSSI: -37
   key: kCBAdvDataServiceUUIDs
       Unknown (<fff0>)
       is NSData: 0
   key: kCBAdvDataLocalName, value: SimpleBLEPeripheral
   key: kCBAdvDataTxPowerLevel, value: 0 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T17:53:06.120

经过一番挖掘，这就是我发现的：

作为参数传递给 centralManager:didDiscoverPeripheral:advertisementData:RSSI 的广告数据是一个 NSDictionary，它似乎总是包含至少一个名为 kCBAdvDataServiceUUIDs 的键。与此键关联的值是 CBUUID 类型的对象的 NSArray。

CBUUID is not documented in the iOS 5 documentation, despite the fact that it is used in many places, including every Apple sample for Bluetooth LE I've seen. Among it's methods is one called `data` that returns an NSData object. This NSData object has the UUID encoded as a series of bytes.

So, to get and, in this case, view the bytes in the UUIDs of a BLE advertisement, you can use code such as the following:

```
- (void) centralManager: (CBCentralManager *) central
  didDiscoverPeripheral: (CBPeripheral *) aPeripheral
      advertisementData: (NSDictionary *) advertisementData
                   RSSI: (NSNumber *) RSSI
{
    printf("Discovered %s\n", [[aPeripheral name] cStringUsingEncoding: NSUTF8StringEncoding]); // TODO: Remove printfs
    printf("  RSSI: %s\n", [[RSSI stringValue] cStringUsingEncoding: NSUTF8StringEncoding]);
    NSArray *keys = [advertisementData allKeys];
    for (int i = 0; i < [keys count]; ++i) {
        id key = [keys objectAtIndex: i];
        NSString *keyName = (NSString *) key;
        NSObject *value = [advertisementData objectForKey: key];
        if ([value isKindOfClass: [NSArray class]]) {
            printf("   key: %s\n", [keyName cStringUsingEncoding: NSUTF8StringEncoding]);
            NSArray *values = (NSArray *) value;
            for (int j = 0; j < [values count]; ++j) {
                if ([[values objectAtIndex: j] isKindOfClass: [CBUUID class]]) {
                    CBUUID *uuid = [values objectAtIndex: j];
                    NSData *data = uuid.data;
                    printf("      uuid(%d):", j);
                    for (int j = 0; j < data.length; ++j)
                        printf(" %2X", ((UInt8 *) data.bytes)[j]);
                    printf("\n");
                } else {
                    const char *valueString = [[value description] cStringUsingEncoding: NSUTF8StringEncoding];
                    printf("      value(%d): %s\n", j, valueString);
                }
            }
        } else {
            const char *valueString = [[value description] cStringUsingEncoding: NSUTF8StringEncoding];
            printf("   key: %s, value: %s\n", [keyName cStringUsingEncoding: NSUTF8StringEncoding], valueString);
        }
    }
} 
```

# c++ - 'INPUT' 未在此范围内声明

> ID：11596219
> 
> 赞同：2
> 
> 时间：2012-07-21T22:10:30.537
> 
> 标签：c++, winapi

我正在尝试编译我几年前编写的一个模拟鼠标点击和击键的程序。我已将其简化为这个最小的示例：

```
#include "Windows.h"

int main(){
    INPUT foo;
    return 0;
} 
```

它给了我这个错误：

```
C:\projects\clicker>g++ minimaltest.cpp
minimaltest.cpp: In function 'int main()':
minimaltest.cpp:4:2: error: 'INPUT' was not declared in this scope
minimaltest.cpp:4:8: error: expected ';' before 'foo' 
```

MSDN 在[INPUT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646270%28v=vs.85%29.aspx)上的页面说它是在 Windows.h 中定义的，所以我不知道为什么它不能识别类型。

[另一个 stackoverflow 用户在这里](https://stackoverflow.com/questions/3268252/strange-compiler-errors-with-codeblocks)遇到了类似的问题，但他们的解决方案添加`#define _WIN32_WINNT 0x0500`，并没有修复错误。

几年前，我能够在 Windows XP 上构建该程序。会不会是 INPUT 在 Windows 7 上不像在 XP 上那样工作？或者也许我忘了向编译器提供一个标志？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T22:25:03.123

在. `#define`_ `#include`这样做的结果是`windows.h`未定义`_WIN32_WINNT`，因此`INPUT`未声明。`INPUT`然后在' 存在的机会过去之后定义它。

```
#define _WIN32_WINNT 0x0500 //RIGHT
#include "Windows.h"
#define _WIN32_WINNT 0x0500 //WRONG

int main(){
    INPUT foo;
    return 0;
} 
```

附带说明，除非`windows.h`与源文件位于同一目录中，否则通常应使用`#include <>`而不是`#include ""`.

# c++ - 理解删除字符串中重复字符的代码（来自破解编码面试）

> ID：11596220
> 
> 赞同：0
> 
> 时间：2012-07-21T22:10:33.987
> 
> 标签：c++, string, algorithm

这是来自“破解编码面试”Q1.3 的问题“设计一种算法并编写代码以在不使用任何额外缓冲区的情况下删除字符串中的重复字符。注意：一个或两个额外的变量很好。一份额外的副本数组不是。” 我编写了一个似乎运行良好的程序，但我对自己的程序感到困惑。这是附加的代码。

```
string remove_duplicates(string &s1)
{
   int n=s1.size();
   for(int i=n-1; i!=-1; --i)
        for(int j=0; j<i; ++j)
        {
            if(s1[i]==s1[j])
            {
                int k=i;
                while(k!=n)
                {
                    s1[k]=s1[k+1];
                    k++;
                }
            }
        }
    return s1;
} 
```

如果 s1=abcdeafg，使用此代码输出将是 abcdefg，（如果输入是 abababab，输出将是 ab）但我的想法是因为 s1 的长度没有改变，所以输出应该是 abcdefga，因为我只是将第二个“a”移动到 s1 的末尾。大家能帮我解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:14:25.263

s1 的长度实际上是在变化的。当您找到重复字符并使用 while(k!=n) 循环将重复字符移向 s1 的末尾时，在循环的最后一次迭代中，当 k == n-1 时，代码正在评估 s1[ n-1] = s1[n] 实际上是 s1[n-1] = '\0'，所以 s1 的长度缩短了 1。

# php - 在链接php中获取uniqe值不起作用

> ID：11596223
> 
> 赞同：0
> 
> 时间：2012-07-21T22:10:50.817
> 
> 标签：php, regex, arrays

我有一个文本字符串，然后我使用 php 正则表达式从中获取一个 URL。可以有任意数量的链接，所以我正在使用

```
 preg_match_all 
```

问题是，由于某种原因，当我放入一个链接时，它认为有 3 个。当我做数组唯一时，它会过滤掉中间值，而不是最后一个。

这是下面的代码

```
 $bodyMessage = imap_body($hMail,$idxMsg);
 $bodyMessage = quoted_printable_decode($bodyMessage);

 preg_match_all('((https?|ftp|gopher|telnet|file|notes|ms-help):((//)|(\\\\))+[\w\d:#@%/;$()~_?\+-=\\\.&]*)', $bodyMessage, $matches, PREG_PATTERN_ORDER);
 $links = array_unique($matches[0]);
 print_r($links); 
```

print_r($links) 的输出是：

```
 Array ( [0] => http://usnews.msnbc.msn.com/_news/2012/07/20/12861792-6-year-old-girl-confirmed-to-have-been-killed-in-colorado-theater-shootings?lite 
 [2] => http://usnews.msnbc.msn.com/_news/2012/07/20/12861792-6-year-old-girl-confirmed-to-have-been-killed-in-colorado-theater-shootings?lite 
```

它解析的电子邮件正文是：

```
 --20cf300e4d7d02c34004c55e1489 Content-Type: text/plain; charset=ISO-8859-1 @bill http://usnews.msnbc.msn.com/_news/2012/07/20/12861792-6-year-old-girl-confirmed-to-have-been-killed-in-colorado-theater-shootings?lite --20cf300e4d7d02c34004c55e1489 Content-Type: text/html; charset=ISO-8859-1 Content-Transfer-Encoding: quoted-printable @bill 
```

有任何想法吗？谢谢！

编辑：

我遵循了建议，通过修剪，返回一个空数组

```
 function trims($l){
                    trim($l);   
                }
                $links = $matches[0];
                $trimmedLinks = array_map("trims", $links);
                $trimmedLinks = array_unique($trimmedLinks);
                print_r($trimmedLinks); // = Array ( [0] => ) 
```

编辑：

我认为这可能与从 imap 获取正文消息有关。当我从 imap 复制并粘贴文本字符串并将 = 设置为 $bodyMessage 时，它​​就可以工作了……建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:18:34.583

你应该有这样的模式

```
((?:https?|ftp|gopher|telnet|file|notes|ms-help):(?:(?://)|(?:\\\\))+[\w\d:#@%/;$()~_?\+-=\\\.&]*) 
```

与非捕获组。如果你把 ?: 放在括号里，你会得到非捕获组。然后一个数组将是：

```
Array ( [0] => http://usnews.msnbc.msn.com/_news/2012/07/20/12861792-6-year-old-girl-confirmed-to-have-been-killed-in-colorado-theater-shootings?lite ) 
```

编辑：这个问题的答案是使用 imap_fetchbody 代替

# linux - 有谁知道操作系统发行版、编辑器以及他是如何分屏的？

> ID：11596224
> 
> 赞同：0
> 
> 时间：2012-07-21T22:10:58.220
> 
> 标签：linux, archlinux

如果您查看[http://bambuser.com/v/2846316](http://bambuser.com/v/2846316)，您会看到一个拥有两台显示器的开发人员，在视频中，此人将屏幕拆分为编辑器的多个输出。并切换它们的内容......有谁知道如何做这样的事情？或者他/她正在使用的编辑器？我认为发行版是 Archlinux，电影的网站是[http://japh.se](http://japh.se)

**编辑：**啊啊啊找到了。取决于 Windows 管理器的类型！:DI 正在寻找平铺窗口管理器 :D

[https://wiki.archlinux.org/index.php/Window_manager](https://wiki.archlinux.org/index.php/Window_manager)

谁能给我推荐一个？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T23:05:14.173

对我来说看起来[很棒](http://awesome.naquadah.org/)，这非常好，并且是我在 Arch linux 上的 Windows 管理器。您还可以查看[xmonad](http://xmonad.org/)，它非常等效但较​​旧。

对于编辑来说，我不清楚，因为我没有看到他使用它，所以我无法区分 vim 和 emacs。

# core-audio - 关于 Core Audio 的公共实用程序类的任何文档？

> ID：11596229
> 
> 赞同：2
> 
> 时间：2012-07-21T22:12:32.313
> 
> 标签：core-audio

我最近开始学习很多关于核心音频的知识，但我只是不了解公共实用程序类是什么以及如何使用它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:03:52.597

几个 Apple 示例项目使用这些，搜索：aurioTouch2 或 ConvertFile

这些“CoreAudio 实用程序类”包括：

```
CADebugMacros.h
CADebugPrintf.h
CAMath.h
CAStreamBasicDescription.cpp
CAStreamBasicDescription.h
CAXException.cpp
CAXException.h 
```

另外 - 有两本非常有用的书：

Chris Adamson 的《Learning Core Audio》 开始由 Apress 出版的 iPhone 游戏开发

通常，这些实用程序类可以简化故障排除/显示错误消息

这是 CAStreamBasicDescription.h 的摘录

```
//=============================================================================
//  CAStreamBasicDescription
//
//  This is a wrapper class for the AudioStreamBasicDescription struct.
//  It adds a number of convenience routines, but otherwise adds nothing
//  to the footprint of the original struct.
//============================================================================= 
```

严格来说，您根本不需要这些实用程序。如果您查看上述 Learning CA 书籍的在线源代码项目，Adamson 会根据需要推出自己的 consise 替代品。

# facebook - haskell 脸书示例

> ID：11596234
> 
> 赞同：3
> 
> 时间：2012-07-21T22:13:13.127
> 
> 标签：facebook, haskell

我坚持使用haskell类型。

```
{-# LANGUAGE OverloadedStrings #-}

module Main (
    main
) where

import qualified Facebook as FB
import Network.HTTP.Conduit (withManager)
import Control.Monad.IO.Class (liftIO)
import System.IO

app :: FB.Credentials
app = FB.Credentials "localhost" "249348058430770" "..."

url :: FB.RedirectUrl
url = "http://localhost/fb"

perms :: [FB.Permission]
perms = ["user_about_me", "email"]

main :: IO ()
main = do
    fbAuthUrl <- FB.getUserAccessTokenStep1 url perms
    liftIO $ print fbAuthUrl
    argument <- readLn
    token <- FB.getUserAccessTokenStep2 url [argument]
    withManager $ \manager -> do
        FB.runFacebookT app manager $ do
            u <- FB.getUser "me" [] token
            liftIO $ print (FB.userEmail u) 
```

错误

```
src/Main.hs:23:18:
    Couldn't match expected type `IO t0'
                with actual type `FB.FacebookT
                                    FB.Auth m0 text-0.11.2.0:Data.Text.Internal.Text'
    In the return type of a call of `FB.getUserAccessTokenStep1'
    In a stmt of a 'do' block:
      fbAuthUrl <- FB.getUserAccessTokenStep1 url perms
    In the expression:
      do { fbAuthUrl <- FB.getUserAccessTokenStep1 url perms;
           liftIO $ print fbAuthUrl;
           argument <- readLn;
           token <- FB.getUserAccessTokenStep2 url [argument];
           .... } 
```

包[http://hackage.haskell.org/package/fb](http://hackage.haskell.org/package/fb)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T09:29:47.043

首先，让我以我从未真正使用过 Facebook API 或`Conduits`库的免责声明作为这个答案的序言，所以我不确定这段代码是否真的做了任何明智的事情，但只使用类型信息，我认为这是你想要做的

```
main :: IO ()
main = withManager $ \manager -> FB.runFacebookT app manager $ do
    fbAuthUrl <- FB.getUserAccessTokenStep1 url perms
    liftIO $ print fbAuthUrl
    argument <- liftIO $ readLn
    token <- FB.getUserAccessTokenStep2 url [argument]
    u <- FB.getUser "me" [] (Just token)
    liftIO $ print (FB.userEmail u) 
```

主要的缺陷是`main`在 Haskell 中必须*始终*具有 type `IO a`，但您试图使用 type 的值`FacebookT Auth m ()`作为您的`main`. 您的实现是在正确的轨道上，但`runFacebookT`and`withManager`需要成为函数中的第一件事。

就类型而言，实际的 do-block 具有 type `FacebookT Auth (ResourceT IO) ()`。该`runFacebookT`函数用于解开`FacebookT`转换器，产生一个`ResourceT IO ()`值，然后由它处理`withManager`以产生一个普通的 old `IO ()`。

另一个问题是您最初`readLn`在 do-block 中没有`liftIO`，这会混淆类型推断。我还在通话中添加了缺失`Just`的`FB.getUser`内容。

# grails - Grails 将动态 javascript（从 gsp 输出）作为资源处理

> ID：11596236
> 
> 赞同：2
> 
> 时间：2012-07-21T22:13:23.737
> 
> 标签：grails, plugins, resources

我的 GSP 模板中包含一个 JS 文件，如下所示：

```
<r:script type="text/javascript">
    <g:render template="/javascript/common"/>
</r:script> 
```

输出一些动态 JS ，`/javascript/common`例如预填充列表客户端。它是每次服务器重新启动时动态的，即它不需要根据请求生成，而是在重新部署时更常见。

我想知道如何使用资源插件将其作为资源处理并获得缩小和压缩它的能力等。

有时可能需要刷新它。是否可以支持以与其他资源类似的方式刷新它，即当底层文件被修改时，插件会重新加载它。

谢谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:47:04.200

确保它与资源插件合作的最佳方法是创建[一个自定义 ResourceMapper](http://grails-plugins.github.com/grails-resources/guide/6.%20Creating%20custom%20mappers.html)

过于简化的版本：

1.  在文件夹中创建一个以 ResourceMapper.groovy 作为文件后缀的`grails-app/resourceMappers`文件。
2.  使用装饰类`def phase = MapperPhase.GENERATION`
3.  实施`def map(resource, config) {}`以在请求时生成您的资源。

您的自定义映射器将在每次部署时运行一次，然后使用静态生成的文件。当然，您使用的所有缩小/压缩都将在 GENERATION 阶段*之后运行。*

更新：看起来 Gsp Resources 插件@Ruben 建议可以满足您的需求。您可以查看其自定义映射器的[源代码。](https://github.com/mckenfra/gsp-resources/blob/master/grails-app/resourceMappers/org/grails/plugin/gspresources/GspResourceMapper.groovy)

# com - COM 内存布局和方法指针大小

> ID：11596238
> 
> 赞同：2
> 
> 时间：2012-07-21T22:13:33.503
> 
> 标签：com

假设我以完全无类型的方式获得指向 COM 接口的指针，就像原始地址一样

```
void *p 
```

如何找到方法的地址并访问它们？*p 是虚拟表的地址，然后 **p 是第一种方法的地址吗？是否所有涉及 32 位的指针总是在 COM 中？因此，要找到一个特定的方法，我只需要将 4 字节的倍数索引到 **p 中，假设我知道该方法将出现在哪个索引处。BIG endian vs LITTLE endian 有什么潜在的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:37:53.110

是的，从技术上讲，它应该指向 vtable。vtable 中的方法按照它们声明的顺序出现，从 IUnknown 方法开始。但是使用索引调用方法会使您的代码类型不安全。编译器无法确保您将传递的参数是否正确。如果您的 COM 对象不在 proc 和其他主机上，则大端与小端很重要。代理对象负责处理这些内容，因此它对客户端是透明的。

# r - R语言——定时器

> ID：11596239
> 
> 赞同：3
> 
> 时间：2012-07-21T22:13:44.703
> 
> 标签：r, timer, background

R语言是否有任何简单的方法来设置定时器功能？计时器函数是指位于会话后台并每隔一段时间执行一次的函数。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T23:33:23.777

`tcltk2`包中包含可用于执行您想要的功能`tclTaskSchedule`（和其他功能）。请注意，这通常会违反函数没有副作用的想法，如果计划函数使用您正在使用的任何相同对象，您真的会搞砸事情。如果任务只是将数据读入局部变量并绘制最新版本（只需确保它绘制到正确的图形设备并且不会弄乱您正在处理的其他东西），那就没问题了。

如果您只想定期更新某些内容，您可以使用`repeat`循环（或`while`）和 Sys.sleep 来等待给定的时间，然后做任何您想做的事情。您将无法将该 R 会话用于其他任何事情，但您可以轻松地同时运行多个 R 会话，这样就不会妨碍您在另一个 R 会话中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T18:10:55.563

检查函数 ?txtProgressBar。问候

# android - Android - 位图上的 setColorFilter 不起作用

> ID：11596243
> 
> 赞同：2
> 
> 时间：2012-07-21T22:14:18.123
> 
> 标签：android, canvas, colors, bitmap

下面的代码没有对源位图 mBitmap 进行任何更改是有原因的吗？mBitmap 是一个灰度图像，我想对其应用颜色过滤器。滤镜本身并不重要，但我应用的任何颜色滤镜都没有效果。绘制到屏幕上的是原始位图，就好像我没有对其应用过滤器一样。

我可以对其应用不同的滤色器，例如：

```
mPaint.setColorFilter(new LightingColorFilter(Color.RED, 100)); 
```

但是当我从颜色矩阵创建滤色器时，我什么也得不到。

我使用的是安卓 2.3。

我的代码：

```
float[] mat = new float[] {
        1f, 0f, 0f, 0f, 1f,
        2f, 0f, 2f, 1f, 0f,
        1f, 1f, 0f, 0f, 0f,
        0f, 0f, 0f, 1f, 0f,
        2f, 0f, 0f, 0f, 1f };

ColorMatrix colorMatrix = new ColorMatrix(mat);
ColorMatrixColorFilter colorFilter = new ColorMatrixColorFilter(colorMatrix);

mPaint.setColorFilter(colorFilter);

mCanvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);
mCanvas.drawBitmap(mBitmap, 0, 0, mPaint); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:27:25.447

很抱歉问这个问题。由于我缺乏理解，它的形成很差。据我所知，上面的 ColorMatrix*实际上什么也没做*。

简而言之，我最初的问题源于我试图对灰度图像进行色调调整。事实证明：对灰度图像进行色调调整没有任何意义，因此我没有看到任何变化。

困惑来自这个（优秀的）问题：

[了解使用 ColorMatrix 和 ColorMatrixColorFilter 修改 Drawable 的色调](https://stackoverflow.com/questions/4354939/understanding-the-use-of-colormatrix-and-colormatrixcolorfilter-to-modify-a-draw)

我假设提问者只是对灰度图像进行色调调整，正如他最初要求的那样。现在我知道他必须对一些**以前彩色的**图像进行色调调整。

呃，好吧。最好的学习形式来自被迫真正思考你想要做什么！

# ruby-on-rails - 使用 MathJax 和 wkhtmltopdf 在 Rails 中生成 PDF

> ID：11596249
> 
> 赞同：2
> 
> 时间：2012-07-21T22:14:58.740
> 
> 标签：ruby-on-rails, pdf, wkhtmltopdf, wicked-pdf

我正在使用 Rails 3.2.6 编写一个网站，它需要能够在网站上显示数学格式。为了完成这项工作，我使用了 mathjax-rails gem，它可以完美地渲染数学，例如，questions/1。但是，我希望用户能够以 PDF 格式下载包含数学内容的问题。我已经对我的应用程序进行了大量搜索和摆弄，最接近解决方案的是 wkhtmltopdf 和 wicked_pdf gem。这是可行的，因为创建了一个 PDF 并将其保存到用户的计算机上。但是，数学没有正确呈现，因为我认为 mathjax 实际上并没有处理它。

做了一些阅读后，我想我在其他地方找到了答案，它说要向控制器添加延迟，让 mathjax 有机会发挥它的魔力：

```
format.pdf do
    render :pdf => 'filename',
          :javascript_delay=>5000
  end 
```

但是，这也不起作用，我最终得到了一个包含以下内容的 PDF：

[itex]3H_{2~(g)} + 2N_{2~(g)} ⇌ NH_{3~(g)}[/itex]

而不是格式化的数学。有没有人知道我如何才能让它工作？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T09:43:24.757

这甚至有点傻，但是您尝试过更长的延迟吗？

使用 wkhtmltopdf 这有效：

```
wkhtmltopdf.exe --javascript-delay 15000 http://www.mathjax.org/demos/mathml-samples/ MML.pdf && MML.pdf 
```

这不起作用

```
wkhtmltopdf.exe --javascript-delay 5000 http://www.mathjax.org/demos/mathml-samples/ MML.pdf && MML.pdf 
```

TeX 样本也一样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-07T03:49:19.817

我终于这样解决了，唯一的问题是我使用了cdn而不是gem：

这是我在控制器中的显示操作：

```
def show
  @example = Exam.find(params[:id])
  respond_to do |format|
    format.html
    format.pdf do
      render pdf: @exam.name,
                  template: "exams/show.pdf.erb", // The template that you want to convert to pdf
                  :javascript_delay=>5000,
                  locals: {:exam => @exam},
                  layout: "application-pdf.html.erb"
    end
  end
end 
```

在 app/views/layouts/application-pdf.html.erb 内部：

```
<!DOCTYPE html>
<html>
<head>
  <title>MathTest</title>
  <meta charset='utf-8' />
  <%= stylesheet_link_tag "https://fonts.googleapis.com/icon?family=Material+Icons" %>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      extensions: ["tex2jax.js"],
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
      },
      "HTML-CSS": { availableFonts: ["TeX"] }
    });
  </script>
  <script type="text/javascript" async
          src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
</head>
<body>

<%= yield %>

</body>
</html> 
```

关键是包装你的pdf模板，在我的例子中，“exams/show.pdf.erb”在为你的pdf设计的应用程序布局中，cdn被加载到布局中，你只需要给wickedpdf选项来延迟javascript处理，因此 mathjax 有足够的时间来处理页面。

希望能帮助到你。

**更新**

正如 Peter Krautzberger 所说，cdn.mathjax.org 由于预算问题正在关闭。解决方案将保持不变，您只需在内部从项目中加载 mathjax 或使用另一个 cdn。你可以在这里找到一些cdn替代品：[https ://www.mathjax.org/cdn-shutting-down/](https://www.mathjax.org/cdn-shutting-down/)

# objective-c - iOS SDK 3.0 - 带有 FBCacheDescriptor 的 FBFriendPickerViewController - 有限的朋友列表

> ID：11596253
> 
> 赞同：2
> 
> 时间：2012-07-21T22:15:57.667
> 
> 标签：objective-c, ios, xcode, facebook, facebook-ios-sdk

我想使用[FBFriendsPickerViewController](https://developers.facebook.com/docs/sdk-reference/iossdk/3.0/class/FBFriendPickerViewController/)提供有限的朋友列表（例如，由特定 FQL 生成） 。文档提示可以使用[FBCacheDescriptor](https://developers.facebook.com/docs/sdk-reference/iossdk/3.0/class/FBCacheDescriptor/)预取好友列表，但后者的文档很差。我在 SDK 示例中没有找到任何示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T03:32:54.770

据我了解，FBCacheDescriptor 是用来预取你需要的数据，提高表视图的响应能力。例如，如果您想缓存好友选择器列表，您可以执行类似...

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions {  
    if (FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded) {
        [FBSession sessionOpen];

        FBCacheDescriptor *cacheDescriptor = [FBFriendPickerViewController cacheDescriptor];
        [cacheDescriptor prefetchAndCacheForSession:FBSession.activeSession];
    }
   return YES;
} 
```

Facebook 提供的 Scrumptious 演示应用程序有一个很好的例子。

您可以使用新的 API 执行 FQL，但就像我说的那样，将它与缓存绑定在任何地方都没有记录。以下是使用新 SDK 运行 FQL 的方法...

```
- (void)getFacebookFriends {
    NSMutableDictionary * params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                    @"Your FQL Query goes here", @"query",
                                    nil];

    FBRequestConnection *connection = [FBRequestConnection new];

    FBRequestHandler handler =
    ^(FBRequestConnection *connection, id result, NSError *error) {        
        ........
        //Process the result or the error
        NSLog(@"%@", result);
    };

    FBRequest *request = [[FBRequest alloc] initWithSession:FBSession.activeSession 
                                                 restMethod:@"fql.query" 
                                                 parameters:[params mutableCopy] 
                                                 HTTPMethod:HTTP_GET];

    [connection addRequest:request completionHandler:handler];

    [self.requestConnection cancel];    
    self.requestConnection = connection;  

    [connection start];  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T03:19:12.587

见[FBFriendPickerDelegate](https://developers.facebook.com/docs/sdk-reference/iossdk/3.0/protocol/FBFriendPickerDelegate/#//api/name/friendPickerViewController%3ashouldIncludeUser%3a)：

```
- (BOOL)friendPickerViewController:(FBFriendPickerViewController *)friendPicker shouldIncludeUser:(id<FBGraphUser>)user 
```

# regex - SQL 正则表达式搜索全名

> ID：11596254
> 
> 赞同：1
> 
> 时间：2012-07-21T22:15:58.370
> 
> 标签：regex

这可能真的很简单。所以，我有这张表，用户有一个字段'full_name'

说我有类似的条目

```
"John Doe"
"Jane Doe"
"Colby Smith Jr"
"Apple Smith" 
```

我需要一个适合这些条件的正则表达式搜索：

```
query = John => return 'John Doe'
query = Doe => return 'John Doe', 'Jane Doe'
query = Apple => return 'Apple Smith'
query = Smith => return 'Colby Smith Jr', 'Apply Smith'
query = Apple Smith => return 'Apple Smith'
query = Smith Jr => return 'Colby Smith Jr' 
```

所以基本上，我需要一个正则表达式函数来搜索查询*（* 是通配符？）

或（结果字符串中空格后的第一个字符）查询

那有意义吗？
基本上，我试图模仿 instagram 搜索中的功能。如果可以，请检查一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T22:39:58.687

*您本身*不需要正则表达式。翻译您的要求：

```
... WHERE (full_name LIKE 'Doe%'    -- query + "wildcard" (that is, starts with query)
           OR                       -- or
           full_name LIKE '% Doe%)  -- space + query anywhere 
```

如果你正在使用参数化查询——你应该这样做——LIKE 模式操作数的构造会变得有点复杂： `... LIKE (? || '%') OR ... LIKE ('% ' || ? || '%')`.

请注意，您的数据库可能会以不同的方式拼写字符串连接。（例如，MySQL 使用函数 CONCAT() 而不是 ANSI 双管道。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:22:23.123

Use the SQL LIKE command, with the '%' operator. Something like:-

```
 SELECT * FROM Names WHERE name LIKE "%Doe%"; 
```

# c++ - C++ 模板不接受迭代器

> ID：11596257
> 
> 赞同：1
> 
> 时间：2012-07-21T22:16:08.457
> 
> 标签：c++, templates, iterator, quicksort

我正在重新学习 C++，并开始尝试应该是一个简单的算法：快速排序。我的函数有这个签名：

```
template <class T>
void QSort(typename std::vector<T>::iterator begin, typename std::vector<T>::iterator end) 
```

它在我的主要功能中被调用：

```
int main()
{
    std::vector<int> unsort({56,32,11,45,67,81,12,5});
    std::vector<int>::iterator b=unsort.begin();
    std::vector<int>::iterator e=unsort.end();
    QSort(b, e);
    return 0;
} 
```

并给出此错误：

```
C:\Users\Deus\Projects\QSort\main.cpp||In function 'int main()':|
C:\Users\Deus\Projects\QSort\main.cpp|49|error: no matching function for call to 'QSort(__gnu_cxx::__normal_iterator<int*, std::vector<int, std::allocator<int> > >&, __gnu_cxx::__normal_iterator<int*, std::vector<int, std::allocator<int> > >&)'|
||=== Build finished: 1 errors, 0 warnings ===| 
```

似乎编译器无法解决 T 应该是什么。有没有办法做我想做的事情，或者我应该将参数声明为 T 类型，并处理由此产生的不确定性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T22:19:18.237

编译器无法`T`从您的函数调用中推断出。想想当`std::vector<T>::iterator`is时会发生什么`T*`：

```
int *b = ...;
int *e = ...;
QSort(b, e); 
```

一般来说，如果你写`typename Something<TemplateParameter>::anotherThing`，则`TemplateParemter`不能在调用中推断出 。必须明确提供

```
QSort<int>(b, e); 
```

我建议仅用`T`作参数类型。这将使您不仅可以接受向量迭代器，还可以接受`T*`, or`std::deque<T>::iterator`和任何其他随机访问迭代器。

# passwords - 对用户密码设置限制 - 是否合适？

> ID：11596258
> 
> 赞同：0
> 
> 时间：2012-07-21T22:16:30.600
> 
> 标签：passwords

这里的理论问题：

人们如何看待注册表对用户密码的限制？意思是，设置用户必须有大写字母、数字和特殊字符的条件是否明智？我认识到这些条件通常会要求用户设置更安全的密码，但这会让大多数用户感到烦恼（网站假设我没有能力创建安全密码，这让我很恼火）？有任何意见吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T22:18:11.607

是的，差不多。您还应该制作一个 JS 脚本来在用户输入密码时检查密码强度。只是为了通知用户，不要让他在达到一定强度级别之前提交它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T22:23:59.300

I would recommend some sort of password requirement to ensure basic security. However, making the requirements too stringent will hurt usability and, if they're encountering a rule they're not familiar with, could force them to create a new password which they could later forget. My advice would be to look over the requirements for popular websites such as Google, Facebook, etc. to get an idea of common requirements. If they've already encountered whatever requirements your website uses, they're less likely to get upset and can reuse memorized passwords.

Note: I know password reuse is a bad idea, but the majority of internet users don't want to memorize a new password for each site they create an account for, and it's therefore best from a usability perspective to allow them to do so.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T22:22:37.197

You should also be careful about what characters you are going to allow in the password. Some secure input controls only allow ascii.

# excel - 如何使用来自 excel、MapPoint 和 VBA 的数据打印多页地图？

> ID：11596260
> 
> 赞同：0
> 
> 时间：2012-07-21T22:16:52.960
> 
> 标签：excel, vba, printing, gis, mappoint

我有一个 Excel 文件，其中包含有关我公司客户的信息，包括地址、纬度和经度。我需要生成打印的街道地图，以显示合理的细节水平，并使用显示客户的图钉和显示他们信息的气泡。本质上，我需要创建一些看起来像托马斯指南的东西，除了我们的客户信息分层到街道地图上。我一直在寻找 DAYS 并且找不到任何软件来自动化这个过程。

目前我正在将数据导入 Microsoft MapPoint，它可以很好地生成包含所有必要数据的地图。但是 MapPoint 只能打印屏幕上当前显示的内容。所以我被困在一个接近缩放级别的打印，滚动，再次打印，并继续这个过程，令人作呕。

有没有办法在 MapPoint 中使用 VBA 自动执行此操作？我在网上几乎找不到关于 MapPoint 的 VBA 的信息。

或者，也许有一个软件可以通过按一下按钮来做到这一点。打印一个区域的多页地图似乎并不是一个疯狂的需求。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:14:00.457

MapPoint 的 API 实际上在 MapPoint 帮助文件中有很好的记录，并且大多数示例都使用 VB6，它应该适用于 VBA - 您需要添加对 MapPoint 对象模型的引用。

是的，您可以自动打印。其他方法包括复制到剪贴板；保存到网页（并提取地图的 GIF 图像）；或使用 GetPictureFromObject()。我最近写了一篇关于在 C# 中使用后者的文章（从 VB6 或 VBA 会更简单）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:30:14.197

您还可以打印到一个非常大的 PDF，请参阅此时事通讯中的提示 -- [http://www.mp2kmag.com/update/mappoint.newsletter/2013-02-18/](http://www.mp2kmag.com/update/mappoint.newsletter/2013-02-18/)
这是文章的直接链接 --
[http ://www.mapforums.com/print-large-multiple-sheet-maps-any-printer-27603.html](http://www.mapforums.com/print-large-multiple-sheet-maps-any-printer-27603.html)
埃里克

# c# - “广播”到 TCP 客户端列表的最快方法

> ID：11596263
> 
> 赞同：3
> 
> 时间：2012-07-21T22:17:03.393
> 
> 标签：c#, performance, concurrency, asyncsocket

我目前正在用 C# 编写一个自下而上的聊天服务器。

就像一个单独的大房间，所有客户都在里面，然后你也可以发起私人聊天。我还为将来集成多个房间（但现在没有必要）制定了代码。

写它主要是为了好玩，但也因为我要为像我这样的年轻人创建一个新的聊天网站，因为丹麦已经没有人了。

我刚刚用 170 个客户端测试了它（用 Javascript 编写，带有 JQuery 和 Flash 桥接套接字连接）。本地网络上从消息发送到传递的响应时间不到 1 秒。但现在我正在考虑我能够从中挤出什么样的表现。

我可以看到我是否连接了两个客户端，然后连接了 168 个其他客户端，并在客户端 2 上写入并观察客户端 1，它立即出现在客户端 1 上。CPU 使用率和 RAM 使用率根本没有显示服务器压力的迹象。它处理得很好，我认为它可以扩展到至少 1000 - 1500 没有丝毫问题。

然而，我注意到了一些事情，那就是如果我再次打开 170 个客户端并在客户端 1 上发送一条消息并在客户端 170 上观看，则会有大约 750 毫秒左右的日志。我知道问题所在，也就是说，当服务器接收到聊天消息时，它会将其广播给服务器上的每个客户端。然而，它确实需要枚举所有这些客户端，这需要时间。现在的延迟对于聊天来说是可以接受的，但我担心客户端 1 发送到客户端 750 可能（尚未测试）需要 2 - 3 秒。当我开始每秒收到 2 到 3 条消息时，我也很担心。

所以总结一下，我想加快服务器广播过程。我已经在使用并行 foreach 循环，并且还在使用异步套接字。

这是广播代码：

```
 lock (_clientLock)
        {
            Parallel.ForEach(_clients, c =>
            {
                c.Value.Send(message);
            });
        } 
```

这是在每个客户端上调用的发送函数：

```
try {
        byte[] bytesOut = System.Text.Encoding.UTF8.GetBytes(message + "\0");
        _socket.BeginSend(bytesOut, 0, bytesOut.Length, SocketFlags.None, new AsyncCallback(OnSocketSent), null);
        }
        catch (Exception ex) { Drop(); } 
```

我想知道是否有任何方法可以加快速度？我考虑过编写某种辅助类来接受队列中的消息，然后使用大约 20 个线程来拆分广播列表。

但我想知道你对这个话题的看法，我是学生，我想学习！（：

顺便提一句。我喜欢你在发布到堆栈溢出时如何发现代码中的问题。我现在制作了一个重载函数，以便在使用广播时接受来自服务器类的字节数组，因此 UTF-8 转换只需要发生一次。同样为了安全起见，字节数组长度的计算现在只发生一次。请参阅下面的更新版本。但我仍然对改进这一点的方法感兴趣！

更新广播功能：

```
 lock (_clientLock)
        {
            byte[] bytesOut = System.Text.Encoding.UTF8.GetBytes(message + "\0");
            int bytesOutLength = bytesOut.Length;
            Parallel.ForEach(_clients, c =>
            {
                c.Value.Send(bytesOut, bytesOutLength);
            });
        } 
```

更新了客户端对象的发送功能：

```
 public void Send(byte[] message, int length)
    {
        try
        {
            _socket.BeginSend(message, 0, length, SocketFlags.None, new AsyncCallback(OnSocketSent), null);
        }
        catch (Exception ex) { Drop(); }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T22:27:50.797

~1s对于本地网络来说听起来**真的很慢。**平均 LAN 延迟为 0.3 毫秒。Nagle 是启用还是禁用？我猜它已启用......所以：改变那个（`Socket.NoDelay`）。当然，这*确实*意味着您必须负责不以过于分散的方式写入套接字 - 所以不要逐个字符地滴下消息。在内存中组装要发送的消息（或者更好的是：多个未完成的消息），并将其作为一个单元发送。

# dart - 当对象在 Dart 上准备好时如何调度事件？

> ID：11596264
> 
> 赞同：3
> 
> 时间：2012-07-21T22:17:14.673
> 
> 标签：dart, dart-html, dart-async

我正在 Dart 中试验一些 WebGL，我创建了一个从单独文件加载着色器的类，我想在对象准备好时抛出一个事件（函数），所以我可以继续我的应用程序，知道我的着色器已正确加载. 有人知道这样做的简单方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T03:12:11.343

一种方法是使用 Future 模式来实现这一点：

```
Future<SomeType> initMyObject(){
   final c = new Completer();

   // Do my object init stuff
   // and when it is complete:
   c.complete(instanceOfSomeType);

   // Return the Future object to any subscribers.
   return c.future;
} 
```

然后在其他地方你可以得到这样的通知：

```
initMyObject().then((SomeType t){
   //executes when future completes
}); 
```

# c++ - QTableWidget：个人小部件作为标题？

> ID：11596267
> 
> 赞同：4
> 
> 时间：2012-07-21T22:17:24.007
> 
> 标签：c++, qt, qwidget, qtablewidget

将个人 Widget （在我的情况下是一组 QPixmap + QLabel + QComboBox ）作为 QTableWidget 中的标题的最简单方法是什么（如果可能，不子类化 QTableWidget ）？

因为我们有函数`QTableWidget::setCellWidget(int row, int column, QWidget * widget)`，所以对数组内容做起来相对容易，但是对于标题，我们只有`QTableWidget::setHorizontalHeaderItem (int column, QTableWidgetItem * item)`

非常感谢你 ！

编辑：也许我找到了一种非常不雅的方法来做到这一点，它可能会奏效：

1）我用一个空的 QString 标题初始化每一列

2）我用和提取标题的每个部分的大小和`_table->horizontalHeader()->sectionPosition(index)`位置`_table->horizontalHeader()->sectionSize(index)`

3）然后我在每个部分上画一个 QFrame 并留有一点边距

4）最后，我将我的 QWidgets 加载到这些 QFrame 中

如果其他人有更好的解决方案，我很感兴趣......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:33:17.397

我想`setCellWidget()`会完成这项工作。我没有看到更简单的方法。如果你不使用 QFrame 的附加功能，你也可以使用 QWidget 来代替 QFrame。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-08T09:25:54.243

我做了很多研究来创建一个类似过滤器标题的excel。

更换标头没有简单快捷的方法。

最后我找到了这篇博文：[Qt Support Weekly #27 – Widgets on a header](https://blog.qt.io/blog/2012/09/28/qt-support-weekly-27-widgets-on-a-header/)。根据其指南，这里是创建 QHeaderView 和 QTableWidget 子类的完整代码，该子类可以接受自定义小部件作为标题项：

customtableheader.h：

```
#ifndef CUSTOMTABLEHEADER_H
#define CUSTOMTABLEHEADER_H

#include <QWidget>
#include <QHeaderView>

class CustomTableHeader : public QHeaderView
{
    public:
        struct Margins
        {
            int left;
            int right;
            int top;
            int buttom;

            Margins(int left = 2, int right = 2, int top = 2, int buttom = 2);
        };

        CustomTableHeader(Qt::Orientation orientation,
                          QWidget         *parent = nullptr);

        void FixComboPositions();

        void SetItemWidget(int index, QWidget * widget);
        void SetItemMargins(int index, Margins margins);

    private:
        struct Item
        {
            QWidget * item;
            Margins margins;

            Item();
        };

        QMap<int, Item> mItems;

        void showEvent(QShowEvent * e);
        void HandleSectionResized(int i);
        void HandleSectionMoved(int logical, int oldVisualIndex, int newVisualIndex);
};
#endif // CUSTOMTABLEHEADER_H 
```

customtableheader.cpp：

```
#include "customtableheader.h"

CustomTableHeader::CustomTableHeader(Qt::Orientation orientation, QWidget * parent) :
    QHeaderView(orientation, parent)
{
    connect(this, &CustomTableHeader::sectionResized, this, &CustomTableHeader::HandleSectionResized);
    connect(this, &CustomTableHeader::sectionMoved,   this, &CustomTableHeader::HandleSectionMoved);
}

void CustomTableHeader::showEvent(QShowEvent *e)
{
    for (int i = 0; i < count(); i++)
    {
        if (!mItems[i].item)
            mItems[i].item = new QWidget(this);
        else
            mItems[i].item->setParent(this);

        mItems[i].item->setGeometry(sectionViewportPosition(i) + mItems[i].margins.left,
                                    mItems[i].margins.top,
                                    sectionSize(i) - mItems[i].margins.left - mItems[i].margins.right - 1,
                                    height() - mItems[i].margins.top - mItems[i].margins.buttom - 1);
        mItems[i].item->show();
    }

    QHeaderView::showEvent(e);
}

void CustomTableHeader::HandleSectionResized(int i)
{
    int logical;

    for (int j = visualIndex(i); j < count(); j++)
    {
        logical = logicalIndex(j);
        mItems[logical].item->setGeometry(sectionViewportPosition(logical) + mItems[i].margins.left,
                                          mItems[i].margins.top,
                                          sectionSize(logical) - mItems[i].margins.left - mItems[i].margins.right - 1,
                                          height() - mItems[i].margins.top - mItems[i].margins.buttom - 1);
    }
}

void CustomTableHeader::HandleSectionMoved(int logical, int oldVisualIndex, int newVisualIndex)
{
    Q_UNUSED(logical);

    for (int i = qMin(oldVisualIndex, newVisualIndex); i < count(); i++)
    {
        int logical = logicalIndex(i);
        mItems[logical].item->setGeometry(sectionViewportPosition(logical) + mItems[i].margins.left,
                                          mItems[i].margins.top,
                                          sectionSize(logical) - mItems[i].margins.left - mItems[i].margins.right - 1,
                                          height() - mItems[i].margins.top - mItems[i].margins.buttom - 1);
    }
}

void CustomTableHeader::FixComboPositions()
{
    for (int i = 0; i < count(); i++)
        mItems[i].item->setGeometry(sectionViewportPosition(i) + mItems[i].margins.left,
                                    mItems[i].margins.top,
                                    sectionSize(i) - mItems[i].margins.left - mItems[i].margins.right - 1,
                                    height() - mItems[i].margins.top - mItems[i].margins.buttom - 1);
}

void CustomTableHeader::SetItemWidget(int index, QWidget * widget)
{
    widget->setParent(this);
    mItems[index].item = widget;
}

void CustomTableHeader::SetItemMargins(int index, CustomTableHeader::Margins margins)
{
    mItems[index].margins = margins;
}

CustomTableHeader::Margins::Margins(int left, int right, int top, int buttom) :
    left(left),
    right(right),
    top(top),
    buttom(buttom)

{
}

CustomTableHeader::Item::Item() :
    item(nullptr)
{
} 
```

customheaderedtable.h：

```
#ifndef CUSTOMHEADEREDTABLE_H
#define CUSTOMHEADEREDTABLE_H

#include <QtCore/qglobal.h>
#include <QTableWidget>

#include "customtableheader.h"

class CustomHeaderedTable : public QTableWidget
{
    public:
        CustomHeaderedTable(QWidget * parent = Q_NULLPTR);

        void scrollContentsBy(int dx, int dy);

        void SetHorizontalHeaderItemWidget(int column, QWidget * widget);
        void SetHorizontalHeaderItemMargins(int column, CustomTableHeader::Margins margins);

    private:
        CustomTableHeader * mHorizontalHeader;
};
#endif // CUSTOMHEADEREDTABLE_H 
```

customheaderedtable.cpp：

```
#include "customheaderedtable.h"

CustomHeaderedTable::CustomHeaderedTable(QWidget * parent) :
    QTableWidget(parent)
{
    mHorizontalHeader = new CustomTableHeader(Qt::Orientation::Horizontal, this);
    setHorizontalHeader(mHorizontalHeader);
}

void CustomHeaderedTable::scrollContentsBy(int dx, int dy)
{
    QTableWidget::scrollContentsBy(dx, dy);

    if (dx != 0)
        mHorizontalHeader->FixComboPositions();
}

void CustomHeaderedTable::SetHorizontalHeaderItemWidget(int column, QWidget * widget)
{
    mHorizontalHeader->SetItemWidget(column, widget);
}

void CustomHeaderedTable::SetHorizontalHeaderItemMargins(int column, CustomTableHeader::Margins margins)
{
    mHorizontalHeader->SetItemMargins(column, margins);
} 
```

样品用途：

```
QComboBox * combo = new QComboBox();
combo->addItem("1");
combo->addItem("2");
combo->addItem("3");

CustomHeaderedTable table = new CustomHeaderedTable(this);
table->setRowCount(70);
table->setColumnCount(70);
table->SetHorizontalHeaderItemWidget(1, combo); 
```

# c++ - 默认参数值中的 static_cast

> ID：11596269
> 
> 赞同：0
> 
> 时间：2012-07-21T22:17:41.957
> 
> 标签：c++, casting, static-cast

我想要一个带有默认参数 static_cast 的构造函数，例如：

```
generate_word_spot(func_double_double_t& cost_f = static_cast<func_double_double_t&>(func_const_t(1))) :
      cost_f_(cost_f)
      {}; 
```

在哪里

```
class func_const_t : public func_double_double_t 
{ 
   ...
   virtual double operator()(double x){ ... }; 
} 
```

并且`func_double_double_t`是许多与此类似的函数对象的基类。

GCC`static_cast`对上述构造函数说“无效”。有没有办法实现这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T22:23:23.957

Are you sure you need a non-const reference in your case? If you can use a const reference then just do

```
generate_word_spot(const func_double_double_t& cost_f = func_const_t(1)) :
  cost_f_(cost_f)
  {} 
```

No cast necessary. (Neither is the `;` after the definition.)

Otherwise, for non-const reference binding temporary object is out of question. You'd need to declare a standalone non-temporary object to use as default argument

```
func_const_t def_const(1);
...
class generate_word_spot {
  ...
  generate_word_spot(func_double_double_t& cost_f = def_const) :
    cost_f_(cost_f)
    {}
}; 
```

It makes sense to make it static member of the class

```
class generate_word_spot {
  ...
  static func_const_t def_const;
  ...
  generate_word_spot(func_double_double_t& cost_f = def_const) :
    cost_f_(cost_f)
    {}
};

func_const_t generate_word_spot::def_const(1); 
```

# android - Android App 显示与 ICS 4.0.4 设备 Google Play 不兼容

> ID：11596271
> 
> 赞同：4
> 
> 时间：2012-07-21T22:17:50.297
> 
> 标签：android, google-play, android-market-filtering

这是我的 Android App Manifest 文件中重要的内容。我正在考虑支持 Android API Level 4 及更高版本，target = 14 支持所有屏幕。

开发者控制台显示 API 级别：4-16+ 支持的屏幕：small-xlarge OpenGL 纹理：all

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_UPDATES" />
    <uses-permission android:name="android.permission.WIFI_CHANGE_STATE"/>

    <uses-sdk android:minSdkVersion="4" android:targetSdkVersion="14"/>

    <supports-screens 
            android:largeScreens="true"
            android:normalScreens="true" 
            android:smallScreens="true"
            android:anyDensity="true" /> 
```

这是[Google Play 应用程序链接](https://web.archive.org/web/20140316104611/https://play.google.com/store/apps/details?id=com.tooyoou.android&feature=search_result)

以下是当我转到 Google Play 时我的应用程序显示不兼容的设备的设备详细信息。

摩托罗拉 DROID 仿生 Android Vs 4.0.4 Verizon 无线 CDMA

系统版本 6.7.230.XT875.Verizon.en.US（用于 DROID Bionic 的泄漏 ICS 版本）内部版本号 6.7.2-223

我曾尝试从 Google Play 打开/关闭复制保护，但结果相同。

我无法弄清楚是什么导致我的应用程序和设备不兼容，因为 Google Play Publishing 显示我的发行版 apk 支持此设备。

我为仿生使用泄露的 ICS 构建是否有任何可能与它有关？如果任何拥有 4.0.4 或（运行任何 ICS 版本的 Android 设备）的人都可以尝试从 Google Play 下载该应用程序并查看该应用程序是否也与他们的设备不兼容或仅与我不兼容，这将非常有帮助。除了有关解决此问题的建议之外，这将非常有帮助。

非常感谢。

**更新：我在我的应用程序中使用了两个 SDK - Flurry SDK 和 Skyhook Wireless SDK jar 文件，它们都与 Android 4.0 兼容。我还添加了 Android 支持库并针对 Android 4.0.3 编译了代码库，并且该应用程序仍然与运行 Android v 4.0.4 的设备和构建不兼容**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T23:38:35.977

问题解决了！

首先，Manifest 或 Android SDK 版本没有任何问题，我编译了 Android 4.1 的代码库。

当我从 Google Play 开发者控制台关闭复制保护并等待 30 分钟到 1 小时以使新的复制保护设置生效时，我可以搜索并安装该应用程序。这里的关键是，更改复制保护设置后，您必须等待。这不会立即生效。

以前，Tooyoou 的复制保护是开启的，在我写信给 Android 开发人员支持后，我在他们的回复电子邮件中得到了如下线索。

> 如果您的应用在启用复制保护后不再出现在 Google Play 中，请注意我们的复制保护依赖于能够信任安装该应用的 Android 版本。因此，我们只向已知良好的 Android 版本展示受版权保护的应用程序。如果 Android 的特定端口不是已知的良好构建（例如某些“自定义 ROM”）或设备已植根，Google Play 将不会向这些设备显示受版权保护的应用程序。如果用户切换到 Android 的正式版本，他们将能够再次看到您的应用程序。

由于我在我的 DROID BIONIC 上运行自定义未发布的 ROM，这就是导致问题的原因。库存 ASOP ICS 和 Jelly Bean 设备即使在复制保护开启时也能够下载和安装该应用程序。付费应用程序的复制保护有点棘手，但由于 Tooyouou 是免费的，所以没有太多需要关心的。

另请注意，复制保护据说很快就会被弃用，Android SDK 中的许可功能是付费应用复制保护的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:00:55.310

您是否尝试将 android:xlargeScreens="true" 添加到支持屏幕？

# shell - crontab 作业即服务

> ID：11596275
> 
> 赞同：1
> 
> 时间：2012-07-21T22:18:37.363
> 
> 标签：shell, service, cron, crontab

我有一个脚本，可以从 Web 服务中提取一些数据并填充 mysql 数据库。这个想法是每分钟运行一次，所以我添加了一个 cron 作业来执行脚本。

但是，我希望能够在不修改我的 crontab 的情况下偶尔暂停和重新开始工作。

实现这一目标的最佳实践是什么？或者我真的不应该使用 crontab 来安排我想偶尔暂停的事情吗？

我正在考虑设置全局变量并在脚本内部检查的实现。但我想我会先寻找更合适的解决方案。越简单越好——我对脚本和红宝石都是新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:40:17.323

如果我是你，我的脚本会查看一个静态开关，就像你对全局变量所说的那样，但测试文件是否存在而不是全局变量。这对我来说似乎很干净。

另一种解决方案是让服务不使用 crontab，而是每分钟调用一次您的脚本。该服务将与`/etc/init.d`or 中的其他服务（`/etc/rc.d`取决于您的发行版）类似，并具有`start`,`stop`和`restart`命令作为其他服务。

这两种解决方案可以混合使用：

1.  该服务仅创建或删除切换文件，并且 crontab 行始终处于活动状态。
2.  或者您的服务直接像[这样](http://www.linuxquestions.org/questions/linux-general-1/adding-a-job-to-crontab-via-shell-script-107526/)编辑 crontab ，但我不喜欢通过脚本编辑 crontab，并且文章中描述的技术不是原子的（如果您在脚本的读取和写入之间更改您的 crontab，您的更改就会丢失） .

所以在你的地方，我会选择 1。

# java - 从字符串加载二叉树（父左右）

> ID：11596285
> 
> 赞同：4
> 
> 时间：2012-07-21T22:19:30.057
> 
> 标签：java, tree

我有一个看起来像这样的二叉树

![在此处输入图像描述](../Images/5a13fdb48d24f19a60040023c031fdd2.png)

代表它的对象看起来像这样（java）

```
 public class node {
   private String value = "";
   private TreeNode aChild;
   private TreeNode bChild;
 ....
 } 
```

我想读取数据并从字符串构建树。
所以我写了一些小方法来序列化它，我有这样
的 (parent-left-right)
0,null,O@1,left,A@2,left,C@3,left,D@4,left, E@4,右,F@1,右,B@

然后我读了它，我把它作为一个列表 - 按 O、A、C、D、E、F、B 顺序排列的对象

现在我的问题是 - 我如何构建树？
迭代并将其放入堆栈，队列？
我应该以不同的顺序序列化吗？

（基本上我想学习从字符串数据构建树的最佳实践）
你能推荐我到那个主题的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T23:59:36.853

您的序列化没有得到很好的解释，特别是关于您如何表示缺失的节点。有几种方法，例如用 () 表示树结构或在数组技术中使用二叉树。这两个都可以很容易地序列化。查看[二叉树的高效阵列存储以](https://stackoverflow.com/questions/2675756/efficient-array-storage-for-binary-tree)获得进一步的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T23:44:44.013

鉴于您的第二个字符串表示，没有办法检索原始树。因此，除非*任何*具有该序列的树都是可接受的，否则您必须在字符串中包含 mor 信息。一种可能的方法是以某种方式表示`null`引用。另一个将使用括号或类似的。

鉴于您的第一个表示，恢复数据仍然是可能的。一种解释级别信息的算法如下：

*   保持对树中当前位置的引用*x*
*   对于要添加的每个节点*n*，只要*x*的级别不小于*n的级别，就在树中将该引用**x向上移动*
***   检查现在*x*的水平正好比*n的水平小一**   使*x成为**n*的父级，并且*n成为**x*的下一个子级**   将*x*移动到现在指向*n****

 **如果您的节点中有*父链接*，则此方法有效。如果您不这样做，那么您可以维护每个级别的最新节点列表。*然后x*将对应于该列表的最后一个元素，并且将*x*向上移动意味着从列表中删除最后一个元素。*x*的级别将是列表的长度。**

# python - SQLAlchemy 中的位运算符

> ID：11596293
> 
> 赞同：16
> 
> 时间：2012-07-21T22:21:07.143
> 
> 标签：python, sqlalchemy

我将如何在 SQLAlchemy 中编写以下涉及按位与的 SQL 查询？

```
select * from table where flags & 1 = 1; 
```

表名在哪里`table`，并且`flags`是该表中的列名。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-21T22:21:07.143

您想像这样使用按位运算符：

```
session.query(User).filter(somecolumn.op('&')(1) == 1) 
```

您可以为 OR 编写类似的内容：

```
session.query(User).filter(somecolumn.op('|')(4) > 4) 
```

# php - Getting MySQL Error with Array Select

> ID：11596296
> 
> 赞同：1
> 
> 时间：2012-07-21T22:21:46.213
> 
> 标签：php, mysql

I am having trouble with one of my arrays. For some reason, whenever I test it I get this error:

*   `Unknown column 'ext_token' in 'where clause'` if I have the or die mysql error on,
*   or I get `Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given`, if I take it out.

I’m not sure whether it has something to do with the fact that the first columnName in the array is ext_token, but I thought I would get rid of that by the if below.

Here is the code for the array:

```
 $mat_total = array();

foreach ($result_array1 as $columnName => $columnData){

   if($columnName != "ext_token" || "ext_token_child"){
           var_dump($columnName);
           $mat_sql = mysql_query("SELECT * FROM materials WHERE mat_token = $columnName");
           $mat_array = mysql_fetch_assoc($mat_sql);
           $material_tok = $mat_array['mat_token'];
           $material_price_unit = $mat_array['material_price_per_unit'];

           $total_mat_price = $material_price_unit * $columnData;

           array_push($mat_total, "$material_tok => $total_mat_price");

   }
   else{
       echo "hello";    
   }

} 
```

Thanks for any and all help.

Edit: in terms of the array here is a clearer version of it

```
Column name: ext_token Column data: roof
Column name: ext_token_child Column data: felt
Column name: concrete Column data: 4
Column name: cement Column data: 3
Column name: sand Column data: 2
Column name: wood_4_2 Column data: 4
Column name: wood_8_2 Column data: 2
Column name: felt Column data: 2 
```

or there is this:

```
array(8) { ["ext_token"]=> string(4) "roof" ["ext_token_child"]=> string(4) "felt" ["concrete"]=> string(1) "4" ["cement"]=> string(1) "3" ["sand"]=> string(1) "2" ["wood_4_2"]=> string(1) "4" ["wood_8_2"]=> string(1) "2" ["felt"]=> string(1) "2" } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T22:24:08.800

This expression seems wrong:

```
$columnName != "ext_token" || "ext_token_child" 
```

I think you mean

```
$columnName != "ext_token" && $columnName != "ext_token_child" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T22:51:47.133

您忘记用单引号将值括起来。它应该像

WHERE mat_token = '$columnName'"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T22:24:48.800

`if($columnName != "ext_token" || "ext_token_child"){`

Should be `if($columnName != "ext_token" && $columnName != "ext_token_child"){`

Or use `==`, whichever you're shooting for.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T22:29:19.100

尝试这个：

```
$mat_total = array();

foreach ( $result_array1 as $columnName => $columnData ) {

  if( $columnName != "ext_token" || $columnName == "ext_token_child" ) {

    var_dump( $columnName );
    $mat_sql = mysql_query( "SELECT * FROM materials WHERE mat_token = '$columnName'" );

    $mat_array = mysql_fetch_assoc( $mat_sql );
    $material_tok = $mat_array[ 'mat_token' ];
    $material_price_unit = $mat_array[ 'material_price_per_unit' ];

    $total_mat_price = $material_price_unit * $columnData;

    array_push( $mat_total, "$material_tok => $total_mat_price" );

  } else {
    echo "hello";   
  }

} 
```

# html - Why is my input bumping to the next line after the first one?

> ID：11596301
> 
> 赞同：0
> 
> 时间：2012-07-21T22:22:58.700
> 
> 标签：html, css

I have been playing with this trying to get a layout i like for this form.. and i thought i had something i liked, but after the first row of input the formatting gets messed up and im not sure what im doing wrong..

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Add Company</title>
<style>
    /* Style for add_client form */
    fieldset#add_field {
        width:830px;
    }

    fieldset#Basic_Info, fieldset#Address {
        width: 46%;
        float:left;
    }

    fieldset lebel {
        float: left;
        width: 45%;
    }

    fieldset label, label span { 
        display: block; 
        padding-bottom: .25em;
    }

    fieldset#add_field span {
        float: left;
        text-align: right;
        width: 44%;
    }

    fieldset#add_field input {
        float: right;
        width: 44%;
        border-width: 1px;
        border-style: solid;
    }

    fieldset#add_field select {
        float: right;
        width: 45%;
    }
</style>
</head>
<body>
<div id='content'>
    <fieldset id='add_field'>
        <legend>Add Company</legend>

        <fieldset id='Basic_Info'>
            <legend>Basic Info</legend>

            <label for="name"><span>Company Name</span><input id="name" /></label>
            <label for="phone"><span>Phone Number</span><input id="phone" /></label>
            <label for="status"><span>Status</span>
                <select id='status'>
                    <option>1\. Lead</option>
                    <option>2\. Initial Contact</option>
                    <option>3\. Negotiation</option>
                    <option>4\. Client</option>
                    <option>5\. Previous Client</option>
                </select>
            </label>
        </fieldset>

        <fieldset id='Address'>
            <legend>Address</legend>

            <label for="county"><span>Street Address</span><input id="county" /></label>
            <label for="city"><span>City</span><input id="city" /></label>
        </fieldset>

    </fieldset> 
    <input style='margin-top: 20px;' type="submit" value="Submit" id='jqxSubmitButton' />
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:10:00.180

我认为您的 CSS 中有错字：

```
fieldset lebel {
    float: left;
    width: 45%;
} 
```

`lebel`应该是`label`。看看这是否解决了浮动问题。（我无法复制/粘贴您的代码。下次尝试链接到[jsfiddle设置）](http://jsfiddle.net)

# java - Encrypting retrieved data from Selenium/Watir

> ID：11596302
> 
> 赞同：1
> 
> 时间：2012-07-21T22:23:18.583
> 
> 标签：java, ruby, encryption, selenium, watir

When using Selenium (or Watir) as a Web data extractor, is there a way to encrypt each circulating flow between Websites and extractor in order to avoid any kind of "man-in-the-middle" attacks?

# xcode - Xcode 基础：声明具有整数属性的自定义类并在另一个类中使用它

> ID：11596307
> 
> 赞同：3
> 
> 时间：2012-07-21T22:23:53.480
> 
> 标签：xcode, class, properties, integer

试图做一些非常简单的事情，但无法弄清楚语法。

我有一个名为 Word.h 的类，它有 8 个属性、字符串和整数。为了简单起见，我将在这里坚持使用 2：

```
#import <UIKit/UIKit.h>
@interface Word : NSObject
@property (nonatomic, strong) NSString *word; 
@property (nonatomic, strong) NSNumber *wordLevel;
@end 
```

这两个属性都在 .m 文件中合成

然后我想在另一个文件（UIViewController）中创建一些对象。在 .h 文件中，我有这个：

```
#import "Word.h" 
```

在 .m 文件中，这是：

```
Word *newWord = [[Word alloc] init];
   [newWord setWord:@"theorise"];
   [newWord setWordLevel:6];

Word *newWord1 = [[Word alloc] init];
   [newWord setWord:@"implicit"];
   [newWord setWordLevel:7];

Word *newWord2 = [[Word alloc] init];
   [newWord setWord:@"incredible"];
   [newWord setWordLevel:9]; 
```

我现在收到一条错误消息“ARC 不允许将 'int' 隐式转换为 'NSNumber *'”

我在做什么错......类文件中的属性定义不正确？我如何访问此属性。它适用于字符串。

我还想稍后访问这些属性 - 我该怎么做......例如：

```
cell.label1.text = [newWord2 wordLevel]; 
```

这是正确的语法吗？？？

希望有人可以帮助我，在这里撕掉一团团的头发！米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:34:05.263

你声明`wordLevel`是一个`NSNumber`，一个对象。您在代码中将其视为普通的 C `int`。你必须决定你想要它是什么，并始终如一地对待它。例如，对于一个普通的 C`int`属性，您将改为声明：

```
@property (nonatomic, assign) int wordLevel; 
```

另一方面，如果你真的想`wordLevel`成为一个，`NSNumber`你需要像这样使用 setter：

```
[newWord setWordLevel:[NSNumber numberWithInt:6]]; 
```

# eclipse - Eclipse autobuilder on certain file extensions

> ID：11596314
> 
> 赞同：1
> 
> 时间：2012-07-21T22:24:30.433
> 
> 标签：eclipse, build-process, build-automation, auto-build

I'm setting up an Eclipse autobuilder to run the closure template compiler. I've already got an ant task setup and running automatically whenever any file changes. How can I set it up so that it only runs when I change a *.soy file?

I see that I can use a directory as a set of "relevant files," but my *.soy files may be scattered throughout the whole project.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:18:40.420

您无法使用基于 Ant 的构建器执行此操作。相反，您需要实现自己的增量构建器，扩展扩展点`org.eclipse.core.resources.builders`。但由于这将是一项巨大的工作，因此更有效的解决方法可能是仅过滤 Ant 脚本本身。

# javascript - 检查全局变量是否存在的正确方法是什么？

> ID：11596315
> 
> 赞同：74
> 
> 时间：2012-07-21T22:24:31.197
> 
> 标签：javascript, global-variables, jslint

JSLint 没有将此作为有效代码传递：

```
/* global someVar: false */
if (typeof someVar === "undefined") {
    var someVar = "hi!";
} 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-07-21T22:39:26.203

```
/*global window */

if (window.someVar === undefined) {
    window.someVar = 123456;
}

if (!window.hasOwnProperty('someVar')) {
    window.someVar = 123456;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-21T22:30:01.857

```
/**
 * @param {string} nameOfVariable
 */
function globalExists(nameOfVariable) {
    return nameOfVariable in window
} 
```

使用 var foo 还是 window.foo 创建全局变量都没有关系——在全局上下文中使用 var 创建的变量会写入到 window。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-21T22:43:10.170

如果您只想分配一个不存在的全局变量，请尝试：

```
window.someVar = window.someVar || 'hi'; 
```

或者

```
window['someVar'] = window['someVar'] || 'hi'; 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-21T22:35:07.163

尝试

```
variableName in window 
```

或者

```
typeof window[variableName] != 'undefined' 
```

或者

```
window[variableName] !== undefined 
```

或者

```
window.hasOwnProperty(variableName) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-07-21T22:37:18.127

我认为这实际上是 JSLint 的一个问题。它将发出以下错误：

> 意外的“类型”。直接与“未定义”进行比较。

我相信这是个坏建议。在 JavaScript 中，`undefined`是一个全局变量，通常是未定义的。但有些浏览器允许脚本对其进行修改，例如：`window.undefined = 'defined'`. 如果是这种情况，直接比较`undefined`可能会导致意想不到的结果。幸运的是，当前兼容 ECMA 5 的浏览器不允许分配到`undefined`（并且会在严格模式下抛出异常）。

我更喜欢`typeof someVar === "undefined"`，正如你发布的那样，或者`someVar in window`像 Susei 建议的那样。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-07-21T22:34:03.883

> ```
> if (typeof someVar === "undefined") {
>     var someVar = "hi!";
> } 
> ```

将检查`someVar`（本地或全局）是否未定义。

如果要检查全局变量，可以使用

```
if(window['someVar'] === undefined) {
    ...
} 
```

假设这是在浏览器中:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-24T11:44:36.123

bfavaretto 不正确。

将全局 undefined 设置为一个值不会改变对象针对 undefined 的测试。在你最喜欢的浏览器 JavaScript 控制台中试试这个：

```
var udef; var idef = 42;
alert(udef === undefined); // Alerts "true".
alert(idef === undefined); // Alerts "false".
window.undefined = 'defined';
alert(udef === undefined); // Alerts "true".
alert(idef === undefined); // Alerts "false". 
```

这仅仅是因为 JavaScript 忽略了所有试图在未定义变量上设置的值。

```
window.undefined = 'defined';
alert(window.undefined); // Alerts "undefined". 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-13T06:39:38.080

这将是一种执行检查的简单方法。

但是如果`variableName`声明并分配了`boolean value: false`

```
if(window.variableName){

} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-24T14:27:53.463

从 ES6 开始，大多数其他答案，包括已接受的答案，都是不正确的，因为由`let`or定义的全局变量`const`或由声明产生的全局变量在全局对象（在浏览器或node.js 中）`class`上没有相应的属性。其中一些——主要是那些使用的——也可能被存在但设置为的全局变量所欺骗。`window``global``typeof``undefined`

测试全局变量是否存在的唯一完全通用的方法——不管它是使用`var`,`let`还是`const`通过`function`or`class`声明创建的，还是通过赋值创建的（即，`myVar = value`在没有任何声明的程序的顶层`myVar`）或者通过在全局对象上创建一个属性（即，`window.myVar = value`）——尝试通过全局访问它`eval`并查看是否抛出了 TypeError。

（这建立[在 Ferran Maylinch 提出的一个想法之上](https://stackoverflow.com/a/36432729/4969945)，但有一个技巧可以确保即使封装在函数中也能正常工作。）

```
function globalExists(varName) {
  // Calling eval by another name causes evalled code to run in a
  // subscope of the global scope, rather than the local scope.
  const globalEval = eval;
  try {
    globalEval(varName);
    return true;
  } catch (e) {
    return false;
  }
}

undeclared = undefined;
const myConst = undefined;
let myLet;
var myVar;

globalExists('undeclared')    // => true
globalExists('myConst')       // => true
globalExists('myLet')         // => true
globalExists('myVar')         // => true
globalExists('nonexistent')   // => false
globalExists('globalExists')  // => true - can see itself.
globalExists('varName')       // => false - not fooled by own parameters.
globalExists('globalEval')    // => false - not fooled by local variable. 
```

请注意，这使用了`eval`，因此所有常见的警告都适用：您不应提供不受信任的值作为参数，如果必须使用不受信任的值，则应检查以确保它`varName`是有效的 JavaScript 标识符。这样做超出了这个问题的范围，但可以使用[（相当复杂的）正则表达式](https://mathiasbynens.be/demo/javascript-identifier-regex)来完成 - 请注意正确的正则表达式取决于您使用的 ECMAScript 版本，无论代码是脚本还是（ES6）模块，是否在异步函数中等等。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-24T21:39:02.400

我认为最好的解决方案如下：

```
if(window.hasOwnProperty('foo')) {
    console.log('Variable is not declared');
} 
```

如果变量已声明但未分配 (var foo;)，则以下解决方案将不起作用。

```
typeof foo === 'undefined' 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-13T11:32:29.867

如果您不确定是否定义了全局变量，您可以随时尝试访问它并查看会发生什么。

```
function node_env(name) {
    try {
        return process.env[name];
    } catch (ignore) {}
} 
```

# jquery-validate - Validate register form

> ID：11596327
> 
> 赞同：1
> 
> 时间：2012-07-21T22:26:03.493
> 
> 标签：jquery-validate, registration

I am trying make a register form adn using jquery validation. I have a problem.

I want only one "warning message" for "birthday select box"..I couldnt manage this and it look terrible when i get 3x warning for each bday select box. How can i give "one" warning message if at least one box not choosed?

And my codes are below, i made it short and working for test:

```
<script language="JavaScript" type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
<script language="JavaScript" type="text/javascript" src="js/jquery.validate.js"></script>
 <script>
  $(document).ready(function(){
    $.validator.addMethod("username", function(value, element) {
        return this.optional(element) || /^[a-z0-9\_]+$/i.test(value);
    }, "Username must contain only letters, numbers, or underscore.");

    $("#regForm").validate();
  });

  </script>

</head>
<body>

<div>
        <form method="post" id="regForm" action="register.php">
            <div>
                Name<br>
                <input id="user_name" name="name" type="text" minlength="5" class="required username"/><br>

            </div>
            <div>
                E-mail<br>
                <input id="usr_email3" name="email" type="text" class="required email"/><br>

            </div>
            <div>
                Password<br>
                <input name="pass1" type="password" class="required password" minlength="5" id="pwd" /><br>

            </div>
            <div>
                Confirm Password<br>
                <input id="pwd2" name="pass2" class="required password" type="password" minlength="5" equalto="#pwd" /><br>

            </div>

            <div>
            Birthday: 
            <select name="birthday_day" class="required">
            <option value="">Day</option>
            <option value="1" >1</option>
            <option value="2" >2</option>
            </select> 
            <select name="birthday_month" class="required">
            <option value="">Month</option>
            <option value="1" >January</option>
            </select> 
            <select name="birthday_year" class="required">
            <option value="">Year</option>
            <option value="1900" >1900</option>
            </select>

            </div>
            <div>
            Gender:
            <select name="gender" class="required">
            <option value="">Choose</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option><br /></div>
            <br>
            <div>       
            <input id="doRegister" name="doRegister" type="submit" value="Send"/>
            </div>
        </form>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T23:33:54.913

给生日标签周围的 div 一个 id：

```
<div id="required">
            Birthday: 
            <select name="birthday_day" class="required">
            <option value="">Day</option>
            <option value="1" >1</option>
            <option value="2" >2</option>
            </select> 
            <select name="birthday_month" class="required">
            <option value="">Month</option>
            <option value="1" >January</option>
            </select> 
            <select name="birthday_year" class="required">
            <option value="">Year</option>
            <option value="1900" >1900</option>
            </select>

            </div> 
```

如果未选择任何选择标签，请使用以下代码应用红色边框：

```
$('#doRegister').click(function(){

var a = $('select[name="birthday_day"]').val();
var b = $('select[name="birthday_month"]').val();
var c = $('select[name="birthday_year"]').val();

if(a == '' || b == '' || c == '')
{
  $('div#required').css('border', '1px solid f60f60');
}
else
{
 $('div#required').css('border', 'none');
}

}); 
```

当然，这避免了使用您正在使用的验证器插件

# javascript - 有两个按钮时如何使用回车键提交

> ID：11596334
> 
> 赞同：3
> 
> 时间：2012-07-21T22:27:39.870
> 
> 标签：javascript, html, asp.net-mvc-3

我有两个不同的输入字段，它们有各自的提交按钮，我希望用户能够将他们的输入输入到任何一个文本框中，然后按回车键并具有与单击提交相同的效果按钮。目前，在文本框中输入一些内容并按回车键没有任何作用。我正在使用 HTML 和 JavaScript 以及 ASP .NET MVC3。我的代码如下所示：

的HTML

```
<table>
<tr>
    <td><span class="labelText">Text1</span></td> <td><input id="text1" type="text" placeholder="Enter Text1"/> </td> <td style="width: 110px; text-align: left; margin-left: 5px"><button class="medium awesome blue" id="sendText1">Send Text1</button></td>
</tr>
<tr>
   <td> <span class="labelText">Text2</span> </td> <td><input id="text2" type="text" placeholder="Enter Text2"/> </td>   <td style="width: 110px; text-align: left; margin-left: 5px"> <button class="medium awesome blue" id="sendText2">Send Text2</button> </td>
</tr> 
```

JavaScript

```
$('#sendText1').click(function () {
        $('#text2').val("");
        var text1 = $("#text1").val();
        $('#loadingUsageInfo').css({ 'visibility': 'visible' });
        if (text1 == "" || text1 == 'Enter Text1') {
            alert('Enter Text First');
            return;
        }
        $.ajax({
            url: '@Url.Action("ShowResult1", "Folder")',
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify({ input1: text1 }),
            traditional: true,
            success: function (result) {
                $('#info').html(result);
            }
        });
    });

    $('#sendText2').click(function () {
        $('#text2').val("");
        var text2 = $("#text2").val();
        $('#loadingUsageInfo').css({ 'visibility': 'visible' });
        if (text2 == "" || text2 == 'Enter Text2') {
            alert('Enter Text First');
            return;
        }

        $.ajax({
            url: '@Url.Action("ShowResult2", "Folder")',
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify({ input2: text2 }),
            traditional: true,
            success: function (result) {
                $('#info').html(result);
            }
        });
    }); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:02:59.227

在你的 js 代码下面添加这个

```
$('#text1, #text2').keypress(function(e) {
  if (e.which == 13) {
    $('#sendText1, #sendText2').trigger('click');
  }       
}​​​​​​); 
```

[触发器](http://api.jquery.com/trigger/)- 执行附加到给定事件类型的匹配元素的所有处理程序和行为。

因此，我们在按键上绑定两个文本输入并调用按钮的所有绑定。

另请参阅[jsFiddle上的工作原理](http://jsfiddle.net/qTf79/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:46:45.567

您的文本字段不知道它们应该在某处提交值。`form`您可以通过标签包围它们来让他们知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-18T18:54:16.463

我最终做了这样的事情。

```
$("#textbox").keypress(function (e) {
    var code = (e.keyCode ? e.keyCode : e.which);
    if (code === 13) {
        e.preventDefault();
        $("#btn").trigger("click");
    }
}); 
```

# ios - UIAlertView 报错

> ID：11596336
> 
> 赞同：0
> 
> 时间：2012-07-21T22:28:11.520
> 
> 标签：ios, uialertview

我的 alertview 给出了这个问题..它与 sqlite 无关..它给出了一些信息..

我怎样才能解决这个问题？

```
UIAlertView *infoShow = [[UIAlertView alloc] initWithTitle: @"info"
                                                       message: @"info."
                                                      delegate: nil
                                             cancelButtonTitle: @"OK"
                                             otherButtonTitles: nil];

    [infoShow show];
    [infoShow release];

Unable to load persistent store at URL 'file://localhost/Users/Mac/Library/Application%20Support/iPhone%20Simulator/5.0/Library/Keyboard/UserDictionary.sqlite' ({
    metadata =     {
        NSPersistenceFrameworkVersion = 409;
        NSStoreModelVersionHashes =         {
            UserDictionaryEntry = <f0c9025b 602122f9 37a4e274 bdaacec1 b9a66f83 fca5c43b bed5e80a 6baee338>;
        };
        NSStoreModelVersionHashesVersion = 3;
        NSStoreModelVersionIdentifiers =         (
            ""
        );
        NSStoreType = SQLite;
        NSStoreUUID = "5D722675-4764-4953-9508-7CBA29078E68";
        "_NSAutoVacuumLevel" = 2;
    };
    reason = "The model used to open the store is incompatible with the one used to create the store";

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T22:55:56.617

这实际上不是问题。这似乎最近发生在新版本的 SDK 中。这是 iPhone 模拟器内部的事情，通常在您打开键盘时发生（发现有关键盘的错误）。

这应该不会影响您的应用程序的运行，但如果是，请尝试重置您的模拟器 - 有一个菜单选项。那应该解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:32:34.800

你是对的——它与你的 UIAlertView 无关。您对 Core Data 模式进行了更改，现在正尝试打开使用旧模式保存的早期版本。删除（或迁移）旧的 Core Data 存储，你应该没问题。

祝你好运。

# javascript - 复选框不运行选定的项目，而是运行所有

> ID：11596338
> 
> 赞同：0
> 
> 时间：2012-07-21T22:28:40.577
> 
> 标签：javascript, dom

jQuery 脚本，在特定时间一个一个地在新窗口中打开选定的框。但是无论我是否检查任何内容，它都会在单击按钮上运行所有框，我很困惑。

我的 jQuery 代码：

```
function bon()
{
    var field = document.getElementsByName('list');
    var len = field.length;     
    var j=0;
    for (i = 0; i < field.length; i++)
    {
        lk[j] = document.getElementById('addlink_'+i).value;    
        j++;    
    }
 win = window.open("","myWindow","height=500,width=500,menubar=no,status=no"); 
 process();
 var interval  =  document.getElementById('interval').value;
window.setInterval(function(){ process();}, interval);      
}
function process()
{
        if(oldval<lk.length)
        {
                 var ln =lk[oldval];
                 win.location.href =ln; 
                 //$.post("updateclick.php",{dbid:recordid},function(data) {  document.getElementById(countid).innerHTML = data; });                 
                 oldval =oldval+1;
        }
        else
        {
             window.location.href=location.href;
        }
}
function process1(a,b)
{
    if(document.getElementById('chkbox_'+a).checked==true)
    {

    }
    else
    {
        thisimg(a,b);
    }
} 
```

我的 HTML 代码是：

```
<div class='posts'>
    <input style='float:left; height:85px;' type='checkbox' name='list' value='chck_".$counter."' id='chkbox_".$counter."'/>
    <div class='title box' onclick='process1(".$counter.",".$row['id'].")'>
        <div style='float:left;' onclick='thisimg(".$counter.",".$row['idDiv1'].")'>
            <img src='".$imgpath."' height='50' width='50' />
        </div>
        <div class='click' style='float:right;'>
            <b>Clicks <br/>
                <div id='count_".$counter."'> ".$click." </div>
                <input type='hidden' id='addlink_".$counter."' value='".$app_link."' rel='nofollow'/></b>
        </div>
        <div style='float:left; width:100px; overflow:hidden; white-space: pre;'>
             <b> ".$title."</b>
            <br/>".$beforetime."
        </div>
    </div>
</div> 
```

这是我的按钮代码：

```
<select id="interval">
    <option value="5000"> 5 Seconds</option>
    <option value="10000"> 10 Seconds</option>
  </select>
  <input class="butn" type="button" value="Collect" onclick="bon()" /> 
```

工作：用户必须在特定时间（在我的选项框中提供）一一选择他们想要在新窗口中打开的复选框。但是无论我是否选中任何一个，它都会像选中所有复选框一样一一执行。

好的，这是打印的实际 HTML

```
<div class=posts>
  <input style='float:left; height:85px;' type=checkbox name=list value=chck_0 id=chkbox_0 />
   <div class='title box' onclick='process1(0,190757)'>
    <div style='float:left;' onclick='thisimg(0,190757)'>
      <img src='/images/3c59e768eefb1d5d4a0bfdf0ae23cf5a.png' height=50 width=50 />
    </div>
   <div class=click style='float:right;'><b>Clicks <br/> 
    <div id=count_0> 0 
    </div>
    <input type=hidden id=addlink_0 value='/link/zqdba3' rel=nofollow></b>
   </div>
  <div style='float:left; width:100px; overflow:hidden; white-space: pre;'> <b> Title</b><br/>2 Hs 31 Ms ago
  </div>
 </div>
</div> 
```

请帮助我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:19:02.080

您正在迭代所有`addlink_`输入而不查看复选框。如果选中了`i`th 复选框，则将相应的输入元素的值推送到数组中。

```
var field = document.getElementsByName('list');
var len = field.length;     
lk = [];
for (i = 0; i < len; i++) {
    if(field[i].checked) {
        lk.push(document.getElementById('addlink_'+i).value);
    }
} 
```

# r - 提高 ggplot2 r 中 geom_text 条目的分辨率

> ID：11596340
> 
> 赞同：18
> 
> 时间：2012-07-21T22:29:16.483
> 
> 标签：r, ggplot2

关于如何提高 geom_text 的分辨率以使分辨率与轴标签的分辨率相当的任何建议？谢谢

```
df <- data.frame("x" = c(1,2,3,4),"y" = c(15,19,35,47))

p<-ggplot(df,aes(x,y))
p<- p + geom_point(size=1)

p<- p + geom_smooth(method="lm", se=FALSE, formula=y~x)
p<- p + xlab("Better Resolution")
p<- p +ylab("Better Resolution")

p<- p +opts(axis.title.x = theme_text(family="Times",face="bold", size=25, colour = "Black",vjust=0)) 

p<- p +opts(axis.title.y = theme_text(family="Times",face="bold", size=25, angle =90, colour ="Black",vjust=0.4))

p<- p + geom_text(aes(x = 3.5, y = 37, label ="123456789"),size=12, parse = TRUE)
p

#The zoomed in text looks like this after saving using ggsave 
```

![在此处输入图像描述](../Images/44ec1b32838628d8dbcacb5e0dead989.png)

```
#Information about my version of R and OS

sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

R.version
           _                            
platform       x86_64-apple-darwin9.8.0     
arch           x86_64                       
os             darwin9.8.0                  
system         x86_64, darwin9.8.0          
status                                      
major          2                            
minor          15.1                         
year           2012                         
month          06                           
day            22                           
svn rev        59600                        
language       R                            
version.string R version 2.15.1 (2012-06-22)
nickname       Roasted Marshmallows  

##############
#The actual code I am using looks like this:

#function that creates the line equation
lm_eqn = function(df){
m = lm(y ~ x, df)
eq <- substitute(italic(y) == a + b %.% italic(x)*","~~italic(r)^2~"="~r2,
list(a = format(coef(m)[1], digits = 2),
b = format(coef(m)[2], digits = 2),
r2 = format(summary(m)$r.squared, digits = 3)))
as.character(as.expression(eq))
}

#creates basic plot and adds a line
p<-ggplot(df, aes(x,y))
p<- p + geom_point(alpha=1/10, colour="blue", size=5)

#controls background colours
p<-p + theme_bw()

#adds the labels, titles and makes them pretty

p<- p + geom_smooth(method="lm", se=FALSE, formula=y~x,colour="black")
p<- p + xlab("Species similarity for site pair (Tsim variable 'a')")
p<- p +ylab("Trait similarity for site pairs (Tsim)")
p<- p +opts(title="Species vs. Trait combination similarity 2-5m")
p<- p +opts(plot.title = theme_text(family="Times",face="bold", size=18, colour =   "Black",vjust=1)) 
p<- p +opts(axis.title.x = theme_text(family="Times",face="bold", size=15, colour = "Black",vjust=0)) 
p<- p +opts(axis.title.y = theme_text(family="Times",face="bold", size=15, angle =90, colour =  "Black",vjust=0.4))

#adds the equation
p<- p + geom_text(aes(x = 0.015, y = 0.08, label = lm_eqn(df)),size=6,  family="Times",face="italic", parse = TRUE)

ggsave(p,file="tsim.a.0-2.pdf") 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-22T06:38:23.803

为什么不使用`ggsave`. 您在屏幕上看到的不一定是使用 pdf 或 ps 设备在输出图形中呈现的内容。在使用 ggplot 0.9.1 的 Windows 7 上使用 R2.15.1 的未编辑代码时，我没有看到任何问题。

`ggsave`我使用并放大保存了您的屏幕图，并且 pdf 看起来很棒：

![geom_text 渲染的缩放](../Images/b4f9c41b0d8d2bc7a958c5937d7897cd.png)

使用`ggsave("plot.pdf")`（您可以设置其他几个可选参数，包括另存为 eps）。这会将最后一个图（默认情况下）保存到当前工作目录。检查情节。如果文字看起来仍然很有趣，我建议您的 Times 字体安装可能有问题。

在这种情况下，您应该尝试省略字体规范，以便 R 选择它的默认字体系列。

您还应该切换到`theme`代替`opts`和`element_text`代替`theme_text`（目前！）。

# **编辑**

[好的，我想我在这里](https://stackoverflow.com/a/9081281/1478381)找到了解决您问题的方法，这要归功于[kohske](https://stackoverflow.com/users/314020/kohske)和[mbask](https://stackoverflow.com/users/1079872/mbask)。显然，通过为您的标签创建一个数据框并将其传递给 geom_text 可以实现更好的结果。

尝试使用：

```
df <- data.frame("x" = c(1,2,3,4),"y" = c(15,19,35,47))

lm_eqn = function(df){
m = lm(y ~ x, df)
eq <- substitute(italic(y) == a + b %.% italic(x)*","~~italic(r)^2~"="~r2,
list(a = format(coef(m)[1], digits = 2),
b = format(coef(m)[2], digits = 2),
r2 = format(summary(m)$r.squared, digits = 3)))
as.character(as.expression(eq))
}

### NEW ###
# Create a data frame to hold your label variables
data.label <- data.frame(
x = 0.015,
y = 0.08,
label = c(lm_eqn(df))
)

#creates basic plot and adds a line
p<-ggplot(df, aes(x,y))
p<- p + geom_point(alpha=1/10, colour="blue", size=5)

#controls background colours
p<-p + theme_bw()

#adds the labels, titles and makes them pretty

p<- p + geom_smooth(method="lm", se=FALSE, formula=y~x,colour="black")
p<- p + xlab("Species similarity for site pair (Tsim variable 'a')")
p<- p +ylab("Trait similarity for site pairs (Tsim)")
p<- p +opts(title="Species vs. Trait combination similarity 2-5m")
p<- p +opts(plot.title = theme_text(family="Times",face="bold", size=18, colour =   "Black",vjust=1)) 
p<- p +opts(axis.title.x = theme_text(family="Times",face="bold", size=15, colour = "Black",vjust=0)) 
p<- p +opts(axis.title.y = theme_text(family="Times",face="bold", size=15, angle =90, colour =  "Black",vjust=0.4))

### NEW
####   Change your call to geom_text ####
p<- p + geom_text(data = data.label, aes(x = x , y = y , label = label ) , size=6,  family="Times" , face="italic" , parse = TRUE)

ggsave(p,file="tsim.a.0-2.pdf") 
```

我在 Mac OS X 10.7.4 和 R 2.15.1 上得到了这个：

![全尺寸pdf](../Images/65135686858eec559a09f30c0f57e408.png)

![方程注释的缩放](../Images/6e17d1ec27129892e20802c8f2a68f49.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-08T12:36:27.263

使用`annotate()`而不是`geom_text()`用于图形上的单个注释。否则，`ggplot()`将尝试为每个数据点绘制相同的文本，从而导致奇怪的分辨率。

# css - 如何在按钮内垂直居中对齐文本？

> ID：11596341
> 
> 赞同：2
> 
> 时间：2012-07-21T22:29:16.783
> 
> 标签：css, button

我认为`line-height`会垂直居中对齐文本。但这不会发生在我的按钮上。为什么？

FF、Opera 和 Safari 中的文本底部对齐。

[她是我的小提琴](http://jsfiddle.net/FFf8Y/2/)。

```
<button class="get_discount_rate">Button</button> 
```

```
button {
  font-family: Arial, Helvetica, sans-serif;
  font-weight: normal;
  color: #444;
  min-width: 90px;
  height: 24px;
  line-height: 24px;
  margin: 5px 10px;
  background-color: #fdfdfd;
  border: 1px solid #cdcdcd;
  cursor: pointer;
  border-radius: 3px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T23:09:30.147

内部垂直居中对齐文本`button`（在 Chrome、FF、Safari、Opera 和 IE8 中测试）

```
button {
    font-family: Arial, Helvetica, sans-serif;
    font-weight: normal;
    color: #444;
    min-width: 90px;
    padding:5px;
    margin: 5px 10px;
    background-color: #fdfdfd;
    border: 1px solid #cdcdcd;
    cursor: pointer;
    border-radius: 3px;
}​ 
```

[**演示。**](http://jsfiddle.net/heera/FFf8Y/6/)

# java - 运行线程java

> ID：11596348
> 
> 赞同：-3
> 
> 时间：2012-07-21T22:30:00.057
> 
> 标签：java

```
Thread thread = new Thread("New Thread") 
{
    public void run(){ 
       //instructions A,B and C
    }
};

thread.start();
//instructions D, E 
```

我想知道为什么 D 和 E 在指令 A、B 和 C 终止后不运行。如何让 D 和 E 在指令 A、B 和 C 完成后运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T22:32:01.300

> 如何让 D 和 E 在指令 A、B 和 C 终止后运行

嗯，不要在新线程中运行A，B和C？启动一个新线程的全部意义在于当前线程*可以*在新线程上的方法运行时运行其他代码`run()`。

你*可以*在 D 和 E 之前打电话`thread.join()`……但你为什么要这么做？

如果您只想按 A、B、C、D、E 的顺序运行代码，那么只需在当前线程中执行所有操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T22:37:16.807

**1.**如果你想让 D 和 E 在 A、B 和 C 完成后运行，那么你必须使用 `join()`.

**2.**当在线程上调用join() 时，**它会等待该线程死亡（即完成其run() 方法），然后执行join() 之后的行。**

**3.**最好使用`CountDownLatch from java.util.concurrent`包装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T22:32:23.280

线程并行运行（至少大致如此）。因此，当您的线程启动指令 A、B 和 C 时，指令与指令 D 和 E 并行运行。如果您不希望这样做，请不要首先使用另一个线程（至少这是最简单的选择）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T02:34:00.690

如果您希望它们在之后运行，请不要使用线程来执行 A、B 和 C。

如果你想要一个特定的顺序，你为什么要使用一个线程？

# javascript - 使用jquery将数字传递给函数for循环

> ID：11596351
> 
> 赞同：2
> 
> 时间：2012-07-21T22:30:09.060
> 
> 标签：javascript, jquery, function, parameter-passing

我想知道如何将数字传递给我为循环创建的函数。例如，我有一个循环，它在运行时只是将一个值加 1。我将如何传递我希望循环在函数中运行的次数？像这样：

```
var i = 0;
function blahBlah (i ?){
for (i=0,i>10(this is what I want to pass to the function),i++){
i++;
}

Then call the function:

blahBlah(number of times I want it to run); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T22:38:41.463

我不确定我是否理解这个问题，但是怎么样

```
function blahBlah(n) {
    for(var i=0; i < n; i++) {
        //do something
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T22:38:16.613

您的意思是每次迭代都调用该函数？

```
function blahBlah( i ) {
    // do something with i
}

for ( var i = 0; i < 10; i++ ) {
    blahBlah( i );
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T22:38:56.300

也许是这样的：

```
function runLoop(length) {
    for (var i=0; i < length; i++) {
        {loop actions}
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-21T22:53:05.743

```
function blahBlah (noOfTimes){
  for (var i=0 ;i < noOfTimes ;i++){
    //i++; you already incremented i in for loop
    console.log(i);//alert(i);
    }
  }

blahBlah(10);// call function with a loop that will iterate 10 times 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-21T22:39:24.990

首先，您使用 , 而不是 ; 在 for 循环中。

其次，这里需要两个变量：第一个是重复的次数（`i`，参数），第二个是计数器（`a`，现在是哪个迭代）

```
function blah(i) {
    for (var a=0; a<i; a++) {
        doStuff();
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-21T22:44:57.263

在函数中使用循环：

```
function BlahBlah(n) {
   for (i=0; i < n; ++i) {
      // do something...
   }
} 
```

或者只是在 for 循环中调用该函数：

```
function Blahblah() { /* do something */ }

// elsewhere:
n = 42;
for (i=0; i < n; ++i) BlahBlah(); 
```

# asp.net-mvc-3 - 解析器错误：“/”应用程序中的服务器错误

> ID：11596352
> 
> 赞同：38
> 
> 时间：2012-07-21T22:30:16.687
> 
> 标签：asp.net-mvc-3, code-behind

我收到以下错误：“解析服务此请求所需的资源时发生错误。请查看以下特定的解析错误详细信息并适当地修改您的源文件。”

```
Parser Error Message: `Could not load type 'nadeem.MvcApplication'`.
Source Error:  Line 1:  <%@ Application Codebehind="Global.asax.cs" Inherits="nadeem.MvcApplication" Language="C#" %> 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-21T22:39:21.933

右键单击您的`Global.asax`文件，然后单击`View Markup`。您将看到属性`Inherits="nadeem.MvcApplication"`。这意味着您的`Global.asax`文件正在尝试从 type 继承`nadeem.MvcApplication`。

现在双击您的`Global.asax`文件并查看`Global.asax.cs`文件中指定的类名是什么。它应该看起来像这样：

```
namespace nadeem
{
    public class MvcApplication: System.Web.HttpApplication
    {
    .... 
```

如果没有，那么您将收到您收到的错误。`Inherits`文件属性中的值`Global.asax`必须与派生自`System.Web.HttpApplication`.

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-02-10T08:04:06.307

当我将项目源下载到两个位置时，我遇到了完全相同的问题。问题原来是通过下载源它改变了站点的虚拟目录位置，因为我没有重建第二个源，所以那里没有 DLL。

1.  要解决此问题，请打开您要构建的项目并转到网站属性（项目菜单）
2.  为项目创建虚拟目录。
3.  重建项目。

固定的

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-29T21:54:58.670

在我的解决方案中完成我的所有项目以将编译设置为输出到**bin\debug**和**bin\release 之后**，这个问题对我来说就开始了。我终于意识到启动项目（即带有global.asax的项目）只需要输出到**bin**。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-21T22:38:40.010

由于通常您创建一个 MVC 项目，因此 Global.asax 标记具有以下内容：

```
<%@ Application Codebehind="Global.asax.cs" Inherits="StackOverflow.MvcApplication" Language="C#" %> 
```

您是否将 Global.asax.cs 放在另一个项目中？如果您已从 Global.asax 中删除 CodeBehind="..." 声明并更改 Inherits="..." 声明以引用 Global.asax.cs 文件中定义的正确命名空间和类名。

如果您尚未移动它，请尝试使用 Web 项目上的上下文菜单在 Visual Studio 中清理然后重建项目。当我收到此错误时，这对我有用。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-01-13T06:00:31.403

1.  转到项目属性
2.  在页面底部查看输出路径
3.  将路径更改为：bin\
4.  保存并运行项目

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-06-10T17:50:51.973

该案例已解决，但如果您的项目正在构建到与 IIS_Virtual_Directory\bin 不同的目录并且缺少 dll，您也可能会收到此错误。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-12-19T22:43:26.903

正如凯文回答的那样。我正在更改我的 MVC 项目中的项目名称和命名空间。当我运行应用程序时，我得到了同样的错误“第 1 行：<% .....”。

为了解决这个问题，我需要更新`Global.asax`（`Right Click`-> `View Markup`）中的命名空间，然后在`Inherits`属性中将其更新为“ `<correct root namespace for MVC project>.MvcApplication`”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-26T04:21:20.060

只需将项目复制到另一个位置并运行它就可以了

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-01T02:57:49.170

当我收到此错误时，是在我删除并重新克隆了一个 Git 文件夹之后；发生的事情是我忘记在 VS2010 中构建解决方案。一旦我建立它，一切都很好。有时它真的很简单。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-14T18:40:31.337

在我的情况下，我遇到了同样的错误。我正在使用 git 和 Source Tree 进行版本控制。在我的情况下，项目中启用了 git，但我没有使用 Visual Studio 来暂存我的提交等。我使用的是 Source Tree。这并不重要我使用的是什么问题是visual studio已将以下行放入我的**gitignore**文件中：

```
#Build Results
[Bb]in/ 
```

那是忽略 bin 文件夹，因此我的 bin 文件夹永远不会被推送到服务器，一旦我删除了该行并提交了整个 bin 目录并将其推送到服务器，然后转到服务器并执行了 git pull。bin 文件夹出现了，一切都开始工作了！

顺便说一句，我最终的 gitignore 文件（#Build 结果）部分最终看起来像这样：

```
# Build results

[Dd]ebug/
[Rr]elease/
x64/
build/
[Oo]bj/ 
```

我仍然不确定是否需要将 Obj 文件夹推送到服务器，但现在一切正常。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-13T16:06:16.310

当我尝试合并两个解决方案时，这发生在我身上。问题是没有在所有文件中正确配置命名空间。故事的一部分用@Kevin Aenmey 的回答解决了，但很多其他的......不是！

所以对我来说唯一的方法是在整个解决方案中搜索旧的命名空间并将它们全部替换为新的命名空间。也许不是最好的选择，但如果运气不好，效果很好

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-23T22:02:33.520

对我来说，从 BIN 文件夹中删除 dll，然后构建项目工作

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-22T07:03:13.367

在我的情况下，它会有所帮助：如果您使用默认项目以外的文件夹（D 驱动器上的 naprmer，在 Windows 的情况下），则更改为默认文件夹，创建项目，运行它。然后，您可以在您想要的文件夹中创建项目。奇怪的。但这对我有帮助。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-07-25T14:44:01.167

我正在从视频资源中学习，并在被告知在视图中按 Ctrl-F5 以直接加载它时遇到此错误。通过这样做，我遇到了您发布的相同错误消息。

为了解决这个问题，我构建了解决方案（构建 > 构建解决方案或 Ctrl+Shift+B），然后重试。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-09-01T14:47:09.133

我曾经在服务器`FTP`上上传`DLL`我的网站，但有时当`DLL`网站的主要内容没有在服务器上正确上传时会发生此错误。

所以我建议你**重建**你的项目并再次在服务器上**重新上传 main `DLL`。**

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-06-10T17:24:22.263

在我的解决方案中添加一个新项目后，我遇到了这个问题。解决方案已构建，没问题 - 但随后在运行时被轰炸。

事实证明，新项目默认设置为以 .NET 4.6.1 为目标，而我的解决方案中的其他所有内容都以 .NET 4.5 为目标。

将新项目中的目标框架更改为 .NET 4.5 以匹配其他框架解决了该问题。

（感谢没有警告那个微软人）

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-05-12T15:12:20.460

我遇到了同样的问题，那是因为我没有构建解决方案。菜鸟失误。只是：构建解决方案（Ctrl + shift + b）

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-01-18T18:18:56.027

重命名命名空间时会导致此错误。

-

> 1.  转到文件夹探索**（不要使用解决方案探索）**。查找**Global.asax**文件

.

[![在此处输入图像描述](../Images/4bb3ef28cf227a9a3d0054e4525f40d6.png)](https://i.stack.imgur.com/kEv50.png)

> 2.  打开文件（在记事本/任何编辑器中）并更改替换**旧命名空间**名称**新命名空间**

. [![在此处输入图像描述](../Images/76a9723d9b8cbf2ea60e0d6ab1fb18df.png)](https://i.stack.imgur.com/JsuLF.png)

> 3.  **保存**它现在应该可以工作了..

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-12-15T14:29:39.840

在我的情况下，解决方案是下一个：

1.  验证 Global.asax 的标记，在属性**Inherits**我有这个 Inherits="NameOfMyProject.Global"
2.  然后，验证 Global.asax.cs，我发现了这个：

    公共类 Global_asax : System.Web.HttpApplication

3.  因此，我更改了 Global.asax 中的属性**Inherits**，最后标记为下一个：

    Inherits="NameOfMyProject.Global_asax"

4.  另外，我在管理工具中启动了：ASP.NET 状态服务。然后，我的应用程序运行正常。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-03-14T17:05:24.300

在我们的例子中 - 删除已发布的 Intranet 站点的所有内容，并重新发布在调试中运行良好的项目解决了该问题。

# java - phpmyadmin 中用户 'Admin'@'localhost 的访问被拒绝

> ID：11596353
> 
> 赞同：0
> 
> 时间：2012-07-21T22:30:55.300
> 
> 标签：java

我收到以下错误

```
Access denied for user 'Admin'@'localhost (using password: YES) 
```

每次我尝试从 java 代码连接时，我都创建了一个新用户并授予了完全权限，但我仍然得到同样的错误。

下面是用于从 java 连接的代码

```
String userName = "svp01m";
String password = "svp01m";
String url = "jdbc:mysql://localhost/project";
Class.forName("com.mysql.jdbc.Driver").newInstance();
conn = DriverManager.getConnection(url, userName, password); 
```

错误信息

```
java.sql.SQLException: Access denied for user 'admin'@'localhost' (using password: YES  
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:943)
at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:4113)
at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1308)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2336)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at CourseWork.TestFrame2.checkDatabase(TestFrame2.java:169)
at CourseWork.TestFrame2.main(TestFrame2.java:30)

Cannot connect to database server 
```

# css - background-image 不会在现场显示，但会在 Dreamweaver 中显示

> ID：11596355
> 
> 赞同：1
> 
> 时间：2012-07-21T22:31:15.947
> 
> 标签：css, background-image

我有一个问题，我有一个背景图像，当我在 Dreamweaver 中使用它时，它会显示得非常好，但是一旦我上传了我的网站和 CSS 文件以及它不会显示的所有内容。

这是我的 CSS 代码：

```
.ELSsubbg {
    background-image: url('../images/NTG_images.jpg');
    background-repeat:no-repeat;
    background-position:top left;
} 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:55:11.640

因为您在 CSS 中使用相对路径，所以样式表查找图像的位置可能与您直接在浏览器中查看图像的位置不同。

尝试使用图像目录的绝对路径而不是相对路径。假设您可以在浏览器中看到图像，`http://www.website-name.com/images/NTG_images.jpg`尝试删除点以使路径从您网站的根目录变为绝对路径。

```
background-image: url('/images/NTG_images.jpg'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:40:03.977

你上传图片了吗？你上传到正确的地方了吗？CSS 是否在您认为它应该在的地方寻找它？

回答这些问题的最简单方法是使用浏览器的开发工具（例如 Firebug）来观察您的页面产生的网络流量。查找它尝试加载图形的请求。它是否给出404错误？大概。

如果您收到 404，请查看它调用的 URL 以找出原因。答案应该很清楚。

# php - 无法将字段添加到我的用户类 (Fos_UserBundle)

> ID：11596364
> 
> 赞同：0
> 
> 时间：2012-07-21T22:33:03.800
> 
> 标签：php, symfony, fosuserbundle

我正在尝试修改我的用户类 (FOS_UserBundle)。我有一个单独的公司表，当创建用户时，我希望它与其中一家公司相关联。最终我将不得不发现在公司表中创建条目时如何自动创建用户，但现在我只是尝试提供测试数据。

```
/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 */
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
    * @var object BizTV\BackendBundle\Entity\company
    *  
    * @ORM\ManyToOne(targetEntity="BizTV\BackendBundle\Entity\company")
    * @ORM\JoinColumn(name="company", referencedColumnName="id")
    */
    protected $company; 
```

在我的构造中，我尝试设置

```
$this->company = 1; 
```

但这行不通，因为它需要一个对象，所以我实例化了公司对象并用虚拟数据填充它......

```
$dummy = new company;
$dummy->setActive(true);
$dummy->setCompanyName('myCompany');
$dummy->setId(1);

$this->company = $dummy; 
```

然后我收到一条关于找到新实体的错误消息......

通过关系“BizTV\UserBundle\Entity\User#company”找到了一个新实体，该关系未配置为对实体进行级联持久操作：BizTV\BackendBundle\Entity\company@0000000018a5279000000000049c7b23。显式持久化新实体或在关系上配置级联持久化操作。如果您无法找出导致问题的实体，请执行 'BizTV\BackendBundle\Entity\company#__toString()' 以获得线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:23:53.510

将级联持久选项添加到 User::$company 属性注释：

```
/**
 * @ORM\ManyToOne(targetEntity="BizTV\BackendBundle\Entity\company", cascade={"persist"})
 * @ORM\JoinColumn(name="company", referencedColumnName="id")
 */
protected $company; 
```

您可以在此处找到相关文档：http: [//docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#transitive-persistence-cascade-operations](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#transitive-persistence-cascade-operations)

# vbscript - 在 vbscript 中将变量参数传递给 ShellExecute

> ID：11596365
> 
> 赞同：4
> 
> 时间：2012-07-21T22:33:20.840
> 
> 标签：vbscript

我正在尝试学习如何在提升模式下运行 vbscript。如果我试图提升运行的 vbscript 有参数，我无法完全让它工作。

这是一个简单的例子：

操作系统版本.vbs

```
' Return a string indicating the operating system
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
   & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")

Set colOperatingSystems = objWMIService.ExecQuery _
   ("Select * from Win32_OperatingSystem")

'Wscript.echo Wscript.Arguments(0)
For Each objOperatingSystem in colOperatingSystems
   Wscript.StdOut.Write objOperatingSystem.Caption
   Wscript.StdOut.WriteBlankLines(1)
   Wscript.StdOut.Write "Version " & objOperatingSystem.Version
Next 
```

RunElevated.vbs

```
' Run the script in elevated mode
'
' This will be needed to install programs into Program Files
prgName      = Wscript.Arguments.Item(0)
prgArgs      = ""
If Wscript.Arguments.Count > 1 Then
   For i = 1 To Wscript.Arguments.Count - 1
      prgArgs = prgArgs & " " & Wscript.Arguments.Item(i)
   Next
End If
Wscript.echo "Running: " & prgName & prgArgs
Set objShell = CreateObject("Shell.Application")
Set fso      = CreateObject("Scripting.FileSystemObject")
strPath      = fso.GetParentFolderName (WScript.ScriptFullName)
If fso.FileExists(strPath & "\" & prgName) Then
   objShell.ShellExecute "wscript.exe", _
     Chr(34) & strPath & "\" & prgName & Chr(34), _
     "", "runas", 1
Else
   Wscript.echo "Script file not found"
End If 
```

OSVersion.vbs 脚本运行良好：

> cscript OSVersion.vbs Microsoft (R) Windows Script Host 版本 5.8 版权所有 (C) Microsoft Corporation。版权所有。
> 
> 微软视窗 7 家庭高级版
> 
> 版本 6.1.7601

问题 #1 当我尝试运行此提升程序时，stdout 上什么也没有出现

> C:\Users\ChemModeling\Documents\FreeThink\Java\install>cscript RunElevated.vbs OSVersion.vbs Microsoft (R) Windows Script Host Version 5.8 版权所有 (C) Microsoft Corporation。版权所有。
> 
> 运行：OSVersion.vbs

问题 #2 我无法弄清楚如何在传递给 RunElevated 的脚本中包含参数。我读到你应该使用像“我的参数在这里”这样的语法，所以我尝试了这个：

```
' Run the script in elevated mode
'
' This will be needed to install programs into Program Files
prgName      = Wscript.Arguments.Item(0)
prgArgs      = ""
If Wscript.Arguments.Count > 1 Then
   For i = 1 To Wscript.Arguments.Count - 1
      prgArgs = prgArgs & " " & Wscript.Arguments.Item(i)
   Next
End If
Wscript.echo "Running: " & prgName & prgArgs
Set objShell = CreateObject("Shell.Application")
Set fso      = CreateObject("Scripting.FileSystemObject")
strPath      = fso.GetParentFolderName (WScript.ScriptFullName)
If fso.FileExists(strPath & "\" & prgName) Then
   objShell.ShellExecute "wscript.exe", _
     Chr(39) & Chr(34) & strPath & "\" & prgName & prgArgs & Chr(34) & Chr(39), _
     "", "runas", 1
Else
   Wscript.echo "Script file not found"
End If 
```

如果我运行：

> cscript RunElevated.vbs OSVersion.vbs 测试 Microsoft (R) Windows 脚本宿主版本 5.8 版权所有 (C) Microsoft Corporation。版权所有。
> 
> 运行：OSVersion.vbs 测试

然后我收到一个错误“没有文件扩展名“.vbs Test”的引擎。

谁能建议我需要改变什么？

我在解决这个问题上取得了一些进展——

我将第一个脚本更改为：

操作系统版本.vbs

```
' Return a string indicating the operating system
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
   & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")

Set colOperatingSystems = objWMIService.ExecQuery _
   ("Select * from Win32_OperatingSystem")

'Wscript.echo Wscript.Arguments(0)
For Each objOperatingSystem in colOperatingSystems
   Wscript.Echo objOperatingSystem.Caption
   Wscript.Echo "Version " & objOperatingSystem.Version
Next 
```

所以我实际上可以看看是否发生了什么事。

我将第二个脚本更改为：

```
' Run the script in elevated mode
'
' This will be needed to install programs into Program Files
prgName      = Wscript.Arguments.Item(0)
prgArgs      = ""
If Wscript.Arguments.Count > 1 Then
   For i = 1 To Wscript.Arguments.Count - 1
      prgArgs = prgArgs & " " & Wscript.Arguments.Item(i)
   Next
End If
Wscript.echo "Running: " & prgName & prgArgs
Set objShell = CreateObject("Shell.Application")
Set fso      = CreateObject("Scripting.FileSystemObject")
strPath      = fso.GetParentFolderName (WScript.ScriptFullName)
If fso.FileExists(strPath & "\" & prgName) Then
   objShell.ShellExecute "wscript.exe", _
     Chr(34) & strPath & "\" & prgName & Chr(34) & prgArgs, _
     "", "runas", 1
Else
   Wscript.echo "Script file not found"
End If 
```

并使用： wscript RunElevated.vbs OSVersion.vbs 测试

现在，当脚本运行时，我看到了我在弹出窗口中回显的信息。

所以我回到问题 #1，我正在启动一个新的 shell 以在管理员模式下运行，所以如果我切换到 cscript 并尝试将信息写入标准输出或使用 Wscript.StdOut.Write，它将出现在新的 shell 中而且我永远不会看到它，或者至少我认为这就是问题所在。

有没有解决这个问题的标准方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T17:16:54.473

问题 1：

当您运行提升的脚本时，您看不到任何输出，因为 RunElevated.vbs 脚本使用 WScript.exe 重新启动您的 OSVersion.vbs 脚本。OSVersion.vbs 使用只能从控制台获得的标准输入和输出。将 RunElevated.vbs 中的命令行更改为使用 cscript.exe 而不是 wscript.exe 可以解决此问题。有关更多信息，请查看我的文章[WSH 中的错误捕获和捕获第三方输出](http://www.aspfree.com/c/a/Windows-Scripting/Error-Trapping-and-Capturing-ThirdParty-Output-in-WSH/ "WSH 中的错误捕获和捕获第三方输出")。

问题 #2

看起来你的问题是你混合了不同类型的引号。命令应如下所示：

"C:\path with spaces\command.exe" "parameter with spaces" "and another"

试试这些脚本。

RunElevated.vbs

```
' Run a script in Elevated Mode
strName      = WScript.Arguments.Item(0)
strArgs      = ""
If WScript.Arguments.Count > 1 Then
    For i = 1 To WScript.Arguments.Count - 1
        strArgs = strArgs & " " & WScript.Arguments.Item(i)
    Next
End If
WScript.echo "Running: ", strName, strArgs
Set objShell = CreateObject("Shell.Application")
Set objFso   = CreateObject("Scripting.FileSystemObject")
strPath      = objFso.GetParentFolderName(WScript.ScriptFullName)
strParams    = Chr(34) & strPath & "\" & strName & Chr(34)
If strArgs <> "" Then
    strParams = strParams & " " & Chr(34) & strArgs & Chr(34)
End If
If objFso.FileExists(strPath & "\" & strName) Then
     objShell.ShellExecute "cscript.exe", strParams, "", "runas", 1
Else
    WScript.echo "Script file not found"
End If 
```

操作系统版本.vbs

```
'Test passing arguments to launched script
If WScript.Arguments.Count > 0 Then
    For i = 0 To WScript.Arguments.Count - 1
        strArgs = Trim(strArgs & " " & WScript.Arguments.Item(i))
    Next
End If

' Return a string indicating the operating system
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")

Set colOperatingSystems = objWMIService.ExecQuery _
    ("Select * from Win32_OperatingSystem")

For Each objOperatingSystem in colOperatingSystems
    WScript.StdOut.Write objOperatingSystem.Caption
    WScript.StdOut.WriteBlankLines(1)
    WScript.StdOut.Write "Version " & objOperatingSystem.Version
    WScript.StdOut.WriteBlankLines(2)
Next

' Print out any passed arguments
WScript.StdOut.WriteBlankLines(2)
WScript.StdOut.Write strArgs
WScript.StdOut.WriteBlankLines(2)

' Keep the window from closing before you get a chance to read it
WScript.StdOut.Write "Press any key to continue "
strInput = WScript.StdIn.Read(1) 
```

为了捕获输出，我可能会尝试使用 WshShell 方法的不同`Execute`方法。有可用的命令行工具，例如[Elevate](http://wintellect.com/cs/blogs/jrobbins/archive/2007/03/27/elevate-a-process-at-the-command-line-in-vista.aspx)或[HStart](http://www.ntwind.com/software/hstart.html)，可以使用提升的权限启动命令行。以下是我使用 Elevate 的方法。

```
' Run a script in Elevated Mode
strName      = WScript.Arguments.Item(0)
strArgs      = ""
If WScript.Arguments.Count > 1 Then
    For i = 1 To WScript.Arguments.Count - 1
        strArgs = strArgs & " " & WScript.Arguments.Item(i)
    Next
End If
WScript.echo "Running: ", strName, strArgs
Set WshShell = CreateObject("WScript.Shell")
Set objFso   = CreateObject("Scripting.FileSystemObject")
strPath      = objFso.GetParentFolderName(WScript.ScriptFullName)
strParams    = Chr(34) & strPath & "\" & strName & Chr(34)
If strArgs <> "" Then
    strParams = strParams & " " & Chr(34) & strArgs & Chr(34)
End If
If objFso.FileExists(strPath & "\" & strName) Then
    Set WshShellExec = WshShell.Exec("elevate cscript.exe " & strParams)

    Select Case WshShellExec.Status
        Case WshFinished
            strOutput = WshShellExec.StdOut.ReadAll
        Case WshFailed
            strOutput = WshShellExec.StdErr.ReadAll
    End Select
Else
    WScript.echo "Script file not found"
End If

WScript.echo strOutput 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:49:53.127

我发现了两件有趣的事情；首先，我必须获得正确数量的引号和空格，其次，我必须先调用一个临时脚本，然后再调用提升的最终脚本。

初始调用脚本片段：

```
If objFSO.FileExists("C:\Windows\System32\elevate.vbs") Then
     objWSHShell.ShellExecute "wscript.exe", Chr(34) & Chr(34) & "C:\Windows\System32\elevate.vbs" & Chr(32) & strCampus & Chr(32) & strLocation & Chr(32) & strAssetTag & Chr(34) & Chr(34), "", "", 1
Else
     MsgBox "Regbrand script file not found",0,"Error Message"
End If 
```

注意 Chr() 语句和从原始脚本传递到临时脚本的 3 个变量。

临时脚本片段：

```
If Args.Count = 0 Then
    MsgBox "Missing arguments to UAC permissions script.",0,"Missing Parameters"
Else
    strCampus = Args.Item(0)
    strLocation = Args.Item(1)
    strAssetTag = Args.Item(2)

    strFilePath = objFSO.GetParentFolderName (WScript.ScriptFullName)
    If objFSO.FileExists("C:\Windows\System32\regbrand.vbs") Then
         objWSHShell.ShellExecute "wscript.exe", Chr(34) & Chr(34) & "C:\Windows\System32\regbrand.vbs" & Chr(32) & strCampus & Chr(32) & strLocation & Chr(32) & strAssetTag & Chr(34) & Chr(34), "", "runas", 1
    Else
         MsgBox "Script file not found",0,"Error Message"
    End If
End If 
```

在临时脚本中，我们将相同的参数传递给最终脚本。再次注意 Chr() 语句。

第一个脚本传递 3 个参数并调用临时脚本，后者又以提升的权限调用第三个脚本“regbrand.vbs”。它就像它应该的那样工作。如果您删除临时脚本，它就不起作用。我还没有弄清楚，但相信这与从网络位置调用原始脚本有关。但是，我希望调用和传递参数的语法会有所帮助。

# java - 设置剪贴板内容

> ID：11596368
> 
> 赞同：5
> 
> 时间：2012-07-21T22:33:48.493
> 
> 标签：java, linux

我试图弄清楚为什么设置系统剪贴板的内容对我不起作用。我以编程方式设置剪贴板内容。当我使用代码的输出部分时，它可以工作。但是，当我尝试在任何文本编辑器中复制/粘贴时，它是空白的。

* * *

气垫船编辑，来自github的代码：

```
import java.awt.HeadlessException;
import java.awt.Toolkit;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.StringSelection;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.io.IOException;

public class Test {
   public static void main(String[] args) throws HeadlessException,
         UnsupportedFlavorException, IOException {

      Toolkit.getDefaultToolkit().getSystemClipboard()
            .setContents(new StringSelection("hi there"), null);

      System.out.println(((String) Toolkit.getDefaultToolkit()
            .getSystemClipboard().getData(DataFlavor.stringFlavor)));

   }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-26T20:04:56.827

```
import java.awt.Toolkit;
import java.awt.datatransfer.StringSelection;
import java.awt.datatransfer.Clipboard;

public class tester{

 public static void main(String[] args){

     // from string to clipboard
    StringSelection selection = new StringSelection("hi");
    Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
    clipboard.setContents(selection, selection);
 }
} 
```

这个程序做到了。它将字符串“hi”设置为剪贴板。您可以将其更改为变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T03:55:13.770

如今，Linux 剪切和粘贴有点奇怪，因为至少有两种不同的方法。简而言之，有时最好用中间按钮粘贴，有时最好用control-v，有时似乎两者都不起作用。

将 autocutsel 作为后台进程运行似乎有帮助。 [http://www.nongnu.org/autocutsel/](http://www.nongnu.org/autocutsel/)

# python - Python 内存管理是如何工作的？

> ID：11596371
> 
> 赞同：20
> 
> 时间：2012-07-21T22:34:26.023
> 
> 标签：python

好的，我得到了一个类的概念，它允许其他类作为基础导入类，而如果使用它，则必须导入它。我将如何实施它？或者，Python 解释器是否已经以某种方式做到了这一点？它是否会从内存中销毁未使用的类，以及如何销毁？

我知道 C++/C 是非常面向内存的指针等等，但是 Python 是什么？我并不是说我有问题。我或多或少想为我的程序设计对其进行修改。我想编写一个使用数百个类和模块的大型程序。但是我担心如果我这样做，我会让应用程序陷入困境，因为我不了解 Python 如何处理内存管理。

我知道这是一个模糊的问题，但如果有人能将我链接或指向正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-21T22:40:57.367

Python - 与 C#、Java、Perl、Ruby、Lua 和许多其他语言一样 - 使用垃圾收集而不是手动内存管理。您只需自由地创建对象，并且语言的内存管理器会定期（或当您专门指定它时）查找程序不再引用的任何对象。

因此，如果您想保留一个对象，只需保留对它的引用。如果您希望（最终）释放对象，请删除对它的任何引用。

```
def foo(names):
  for name in names:
    print name

foo(["Eric", "Ernie", "Bert"])
foo(["Guthtrie", "Eddie", "Al"]) 
```

这些调用中的每一个`foo`都会创建一个`list`用三个值初始化的 Python 对象。在`foo`调用期间，它们被变量引用`names`，但是一旦该函数退出，就没有变量持有对它们的引用，并且垃圾收集器删除它们是公平的游戏。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-03-27T17:46:37.633

```
x =10
print (type(x)) 
```

内存管理器 (MM)： *x 指向 10*

```
y = x
if(id(x) == id(y)):
        print('x and y refer to the same object') 
```

(MM): *y 指向同一个 10 对象*

```
x=x+1
if(id(x) != id(y)):
    print('x and y refer to different objects') 
```

(MM): *x 指向另一个对象是 11，之前指向的对象被销毁*

```
z=10
if(id(y) == id(z)):
    print('y and z refer to same object')
else:
    print('y and z refer different objects') 
```

*   Python内存管理分为两部分。
    1.  堆栈内存
    2.  堆内存
*   方法和变量在堆栈内存中创建。
*   对象和实例变量值在堆内存中创建。
*   在堆栈内存中 - 每当创建方法和变量时都会创建堆栈帧。
*   每当函数/方法返回时，这些堆栈帧就会自动销毁。
*   Python有垃圾收集器的机制，一旦变量和函数返回，垃圾收集器就会清除死对象。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-21T22:38:44.550

阅读以下有关 Python 内存管理的文章：

[Python：内存管理](https://docs.python.org/3/c-api/memory.html)（更新到版本 3）

摘录：（示例可以在文章中找到）：

> Python 中的内存管理涉及一个包含所有 Python 对象和数据结构的私有堆。这个私有堆的管理由 Python 内存管理器在内部确保。Python 内存管理器具有处理各种动态存储管理方面的不同组件，例如共享、分段、预分配或缓存。
> 
> 在最低级别，原始内存分配器通过与操作系统的内存管理器交互来确保私有堆中有足够的空间来存储所有与 Python 相关的数据。在原始内存分配器之上，几个特定于对象的分配器在同一个堆上运行，并实施适应每种对象类型特性的不同内存管理策略。例如，整数对象在堆内的管理方式与字符串、元组或字典不同，因为整数意味着不同的存储要求和速度/空间权衡。因此，Python 内存管理器将一些工作委托给特定于对象的分配器，但确保后者在私有堆的范围内运行。
> 
> 重要的是要理解 Python 堆的管理是由解释器本身执行的，并且用户无法控制它，即使她经常操作指向堆内内存块的对象指针。Python 内存管理器通过本文档中列出的 Python/C API 函数按需执行 Python 对象和其他内部缓冲区的堆空间分配。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-11T04:27:18.793

我的 5 美分：

1.  最重要的是，python 只为引用的对象释放内存（不为类释放内存，因为它们只是容器或自定义数据类型）。同样，在 python 中一切都是对象，所以 int、float、string、[]、{} 和 () 都是对象。这意味着如果您的程序不再引用它们，它们就会成为垃圾收集的受害者。

2.  尽管 python 使用“引用计数”和“GC”来释放内存（对于未使用的对象），但这些空闲内存不会返回给操作系统（尽管在 Windows 中是不同的情况）。这意味着空闲内存块只返回到 python 解释器而不是操作系统。所以最终你的 python 进程将拥有相同的内存。但是，python 将使用此内存分配给其他一些对象。

对此给出了很好的解释：http: [//deeplearning.net/software/theano/tutorial/python-memory-management.html](http://deeplearning.net/software/theano/tutorial/python-memory-management.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-21T04:15:29.057

是的，它在 python3 中的行为也是一样的

# c# - C# RCon - 替换随机数量的空格？

> ID：11596373
> 
> 赞同：0
> 
> 时间：2012-07-21T22:34:34.807
> 
> 标签：c#, regex, random, split, spaces

我目前遇到了 RCon 的问题。
我基本上是在发送一个请求以接收所有玩家的列表。
服务器以所有玩家的列表回答，如下所示：

```
#     IP:Port      Ping    ID          Name
0     127.0.0.1    0       3523523     Bob
12    192.168.0.1  120     342525523   Anna
320   192.168.0.2  240     63463634634 Chuck Norris
   ^^^           ^^   ^^^^^           ^ 
```

问题是，我不知道不同标签之间有多少空格，这取决于#/IP/ping 和ID 的长度。
空格可以从 1 个空格到 5 个空格不等。
名称中也可以有空格，所以我不能只用一个空格分隔。

我想从列表中读取 IP、ping、id 和名称。
我目前尝试做一些混乱的替换和拆分东西，但是当空间不同时它就行不通了。
我想过用正则表达式做点什么，但我对正则表达式不太擅长。
我已经将这些行拆分为 1 行。
类 Player 可以存储所有信息

这是应该发生的事情：

```
 // List to store all the players
        List<Player> players = new List<Player>();
        // Using a StringReader to split up every line
        StringReader reader = new StringReader(result);

        string line;
        int row = 0;
        // Processing every line one after another
        while ((line = reader.ReadLine()) != null)
        {
            row++;
            // Doing some filtering to prevent empty lines and other stuff
            if (row > 3 && !line.StartsWith("(") && line.Length > 0)
            {
                // Getting all the stuff I need here
                // Then adding a player object to save the informations, ignore status
                players.Add(new Player(ip, ping, id, name, status));
            }
        } 
```

任何人都有一个可以解决这个问题的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T22:40:20.573

> 我想从列表中读取 IP、ping、id 和名称。

我很少这么说，但是……这听起来像是正则表达式的工作。如果您目前不擅长它们，请以此为契机学习:)

使用正则表达式匹配所有内容，捕获组中的每个值，然后获取组。

示例代码：

```
using System;
using System.IO;
using System.Linq;
using System.Text.RegularExpressions;

class Test
{
    static void Main()
    {
        var regex = new Regex(@"^(?:\d+)\s+(?<ip>[\d.]+)\s+(?<ping>\d+)\s+(?<id>\d+)\s+(?<name>.*)$");
        var query = File.ReadLines("data.txt")
                        .Skip(1)
                        .Select(line => regex.Match(line))
                        .Select(match => new {
                                    IP = match.Groups["ip"].Value,
                                    Ping = match.Groups["ping"].Value,
                                    Id = match.Groups["id"].Value,
                                    Name = match.Groups["name"].Value
                                });

        foreach (var entry in query)
        {
            Console.WriteLine(entry);
        }
    }
} 
```

样本输出：

```
{ IP = 127.0.0.1, Ping = 0, Id = 3523523, Name = Bob }
{ IP = 192.168.0.1, Ping = 120, Id = 342525523, Name = Anna }
{ IP = 192.168.0.2, Ping = 240, Id = 63463634634, Name = Chuck Norris } 
```

显然，您可以解析 ping、IP 地址等的文本。这只是为了让您入门。（另外，你可能应该检查比赛是否成功......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T23:25:27.983

最简单的方法是将你`line`分成5个部分

```
var items = line.Split(new char[] {' '}, 5, StringSplitOptions.RemoveEmptyEntries);
players.Add(new Player(items[1], items[2], items[3], items[4], "status?")); 
```

# asp.net - ASP.NET：当用户点击浏览器的后退按钮时如何重新加载页面

> ID：11596376
> 
> 赞同：1
> 
> 时间：2012-07-21T22:35:44.647
> 
> 标签：asp.net, .net

我有一个带有订单列表的网格，当用户单击该行中的图标时，它会将他带到订单详细信息。问题是如果他想用返回按钮返回到订单列表然后按钮不起作用，因为事件没有绑定到他们的方法，正如我发现的那样......所以当他返回并想要点击另一个订单时，它会加载他收到的第一个订单详细信息：S

如何捕获“返回”以重新加载网站？

我现在有它，但没有成功：

```
protected override void OnInit(EventArgs e)
{
    base.OnInit(e);
    this.Load += new EventHandler(Page_Load);
} 
```

在 Page_Load 方法中，我做了我想做的事情：

```
protected void Page_Load(object sender, EventArgs e)
{
    this.GridView1.RowDataBound += 
         new GridViewRowEventHandler(GridView1_RowDataBound);
    this.GridView2.RowDataBound += 
         new GridViewRowEventHandler(GridView1_RowDataBound);
    this.GridView1.Sorting += 
         new GridViewSortEventHandler(OnProductsSorting);
    this.GridView1.PageIndexChanging += 
         new GridViewPageEventHandler(OnProductsPageIndexChanging);
    this.GridView2.PageIndexChanging += 
         new GridViewPageEventHandler(OnProductsPageIndexChanging2); 
```

有任何想法吗？

谢谢！

# c# - 发送 POST 变量后获取页面源

> ID：11596378
> 
> 赞同：0
> 
> 时间：2012-07-21T22:36:10.137
> 
> 标签：c#, http, post, web

我有一些代码可以将我登录到 Facebook，它可以正常工作，因为它可以在您登录后立即返回您看到的页面。但我试图在登录后请求我的实际个人资料，而不仅仅是我的新闻提要。所以我必须将我的电子邮件和密码发送到登录页面，然后请求我的个人资料。在请求我的个人资料时如何保留登录数据？

这是我所拥有的

```
 public static string logIn()
    {
        //get the cookies before you try to log in
        CookieCollection cookies = new CookieCollection();
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://www.facebook.com"); 
        request.CookieContainer = new CookieContainer();
        request.CookieContainer.Add(cookies);
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        cookies = response.Cookies;
        response.Close();

        //logging in
        HttpWebRequest getRequest = (HttpWebRequest)WebRequest.Create("https://www.facebook.com/login.php?login_attempt=1");
        getRequest.CookieContainer = new CookieContainer();
        getRequest.CookieContainer.Add(cookies);
        getRequest.Method = WebRequestMethods.Http.Post;
        getRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2";
        getRequest.AllowWriteStreamBuffering = true;
        getRequest.ProtocolVersion = HttpVersion.Version11;
        getRequest.AllowAutoRedirect = true;
        getRequest.ContentType = "application/x-www-form-urlencoded";

        //sending the email/password
        byte[] byteArray = Encoding.ASCII.GetBytes("email=myemail@yahoo.com&pass=mypassword");
        getRequest.ContentLength = byteArray.Length;
        Stream newStream = getRequest.GetRequestStream();
        newStream.Write(byteArray, 0, byteArray.Length); 
        newStream.Close();

        //returns the source of the page after logging in
        HttpWebResponse getResponse = (HttpWebResponse)getRequest.GetResponse();
        StreamReader sr = new StreamReader(getResponse.GetResponseStream());
        string source = sr.ReadToEnd();
        cookies.Add(getResponse.Cookies);

        //tries to get my profile source
        //everything works fine until here
        getRequest = (HttpWebRequest)WebRequest.Create("http://www.facebook.com/myprofile");
        getRequest.CookieContainer = new CookieContainer();
        getRequest.CookieContainer.Add(cookies);
        getRequest.Method = WebRequestMethods.Http.Get;
        getRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2";
        getRequest.AllowWriteStreamBuffering = true;
        getRequest.ProtocolVersion = HttpVersion.Version11;
        getRequest.AllowAutoRedirect = true;
        getRequest.ContentType = "application/x-www-form-urlencoded";

        getResponse = (HttpWebResponse)getRequest.GetResponse();
        sr = new StreamReader(getResponse.GetResponseStream());
        source = sr.ReadToEnd();
        getResponse.Close();
        return source;
    } 
```

我已经尝试了几种方法，我已经让它返回我的个人资料，但它返回它就好像我没有登录并且你实际上无法查看我的个人资料（因为它被设置为私人）所以我需要在请求我的个人资料时以某种方式包含我的登录信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:12:49.800

当我在做类似的事情时，这让我难倒了一段时间。登录后，您需要确保为您的请求设置了正确的 cookie。在将新 cookie`CookieCollection`应用到上一个请求之前，尝试将它们添加到对象中。

```
// ^ previous code ^
HttpWebResponse getResponse = (HttpWebResponse)getRequest.GetResponse();
StreamReader sr = new StreamReader(getResponse.GetResponseStream());
string source = sr.ReadToEnd();

Uri facebookPage = new Uri("http://www.facebook.com"); // .GetCookies() only accepts a Uri
cookies.Add(request.CookieContainer.GetCookies(facebookPage));

getResponse.Close(); // Always make sure you close your responses

// V requesting your profile code V 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:33:26.803

您必须在开始时启动 CookieCollection 并将其用于所有请求。每当您发出请求时，CookieCollection 都会使用新的 cookie 更新自身，因此使用 cookies.Add() 也会将其搞砸。但我现在可以正常工作了。

# wcf - WCF 远程 MSMQ - 我可以写入远程队列，但无法接收

> ID：11596382
> 
> 赞同：3
> 
> 时间：2012-07-21T22:37:10.603
> 
> 标签：wcf, msmq

作业服务器：Windows Server 2008 R2 .NET 版本：4.5

我正在使用 WCF 连接两台服务器 - **app**和**queue**。我希望**应用程序**能够从**queue**发送/接收消息。由于某种原因，应用程序可以发送消息，但不能接收它们。

netMsmq 绑定如下所示：

```
<binding name="JobExecutionerBinding" receiveErrorHandling="Move">
  <security>
    <transport msmqAuthenticationMode="None" msmqProtectionLevel="None" />
  </security>
</binding> 
```

服务绑定看起来像：

现在，客户端绑定如下所示：

```
<endpoint   address="net.msmq://queue/private/jobs" 
            binding="netMsmqBinding" 
            bindingConfiguration="JobExecutionerBinding" 
            contract="JobExecution.Common.IJobExecutionService" 
            name="SimpleEmailService" 
            kind="" 
            endpointConfiguration=""/> 
```

为了安全起见，我改了几个名字。

因此，WC 客户端可以毫无问题地发送到远程队列。它甚至可以正确地对传出消息进行排队，并在远程队列服务器关闭的情况下稍后将其转发。但是每次我启动 WCF 服务时，我都会得到这个：

> 打开队列时出错。确保 MSMQ 已安装并正在运行，队列存在并且具有适当的读取权限。内部异常可能包含附加信息。---> System.ServiceModel.MsmqException：打开队列时出错：队列不存在或您没有足够的权限执行该操作。(-1072824317, 0xc00e0003)。无法从队列发送或接收消息。确保 MSMQ 已安装并正在运行。还要确保可以使用所需的访问模式和授权打开队列。在 System.ServiceModel.Channels.MsmqQueue.OpenQueue() 在 System.ServiceModel.Channels.MsmqQueue.GetHandle() 在 System.ServiceModel.Channels.MsmqQueue.SupportsAccessMode(String formatName, Int32 accessType, MsmqException&

我已经在 StackOverflow 和互联网上待了 8 个小时。这是我所做的：

*   确保匿名登录，每个人，网络，网络服务和本地服务都有完全控制权
*   停止远程 MSMQ 服务器并观察 WCF 服务的作用，我得到一个不同的错误 - 所以我确定启动时 WCF 服务正在与 MSMQ 服务器通话
*   在两个盒子上禁用 Windows 防火墙并通过 EC2 安全组打开所有端口
*   在注册表中将 AllowNauthenticatedRpc 和 NewRemoteReadServerAllowNoneSecurityClient 设置为 1
*   在两台服务器上配置了 MS DTC（队列是事务性的，但无论队列是否是事务性的，我都会收到相同的错误）
*   确认如果我使用本地队列，WCF 服务器启动正常，并且接收没有问题

帮助！！！如果没有远程排队解决方案，我无法扩展我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T04:40:05.463

从您的帖子中不清楚*哪个层无法读取*，更重要的*是哪个队列*。

但是，不支持以事务方式读取远程队列：

> *消息队列支持**将**事务消息发送到远程队列，**但不支持从事务中的远程队列读取消息**。这意味着无法从远程队列中获得可靠的一次性接收。*请参阅 [从远程队列中读取消息](http://msdn.microsoft.com/en-us/library/ms699854%28v=vs.85%29.aspx)

我怀疑您的系统在某个地方仍在执行事务性远程读取，即使您提到您禁用了它。

从最佳实践的角度来看，即使你让它工作，你的设计也不会扩展，这是一种耻辱，因为它是你提到的你想要的东西。

> *远程阅读是一个高开销的过程，因此效率低下。在应用程序中包含远程读取操作会限制扩展。* [1](http://msdn.microsoft.com/en-us/library/ms699854%28v=vs.85%29.aspx)

您应该始终*远程写入* **而不是**远程读取。

更好的方法是插入充当消息传递中心点的[消息代理](http://www.eaipatterns.com/ramblings/03_hubandspoke.html)或*路由器服务。*您的**应用程序**和**队列**服务（顺便说一下令人困惑的名称）应该仅以*事务方式从其本地队列中读取*。

IE

*   **应用程序**应该事务性地读取它的**本地队列**
*   **应用程序**应以事务方式发送到远程**代理**
*   **代理以**事务方式读取本地队列
*   **代理**以事务方式发送到远程**队列**

同样，如果您的**队列**层想要回复上述相反的过程，则会发生。

稍后，如果您希望提高性能，您可以引入[动态路由器](http://www.eaipatterns.com/DynamicRouter.html)，该路由器根据动态规则集或环境条件（例如压力水平）将消息重定向到另一台机器上的不同远程队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-16T09:16:35.257

从 MSMQ 4.0 (Windows server 2008) 开始支持远程事务读取。如果您遇到此问题，请务必查看[https://msdn.microsoft.com/en-us/library/ms700128(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/ms700128(v=vs.85).aspx)

# ios - Xcode 本地化设置中没有加号或减号按钮

> ID：11596386
> 
> 赞同：53
> 
> 时间：2012-07-21T22:37:55.080
> 
> 标签：ios, xcode, button, localization

我需要在两天内翻译一个 iOS 应用程序，但我的 XCode 版本（4.4 和 4.5 开发者预览版）都没有给我添加另一种语言的选项。我只能选择单击“本地化..”，但我只能选择英语，选择它后，Xcode 的实用程序检查器中没有加号和减号按钮 - 我没有尝试过任何文件或项目。

我在这里错过了什么吗？

**编辑：** 这就是它的样子：

![在此处输入图像描述](../Images/f6f4f4a5cad131f84ed22847710fbb03.png)

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-07-30T02:58:31.573

它从 Xcode 4.4 开始。

![在此处输入图像描述](../Images/6a583e9a9bdedd9005f3b3df5d68744e.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T01:14:55.083

我刚遇到这个问题，我使用的是 xcode 4.5 预览版 3。不敢相信苹果犯了这种错误，即使在预览版 3 时也没有修复它。因此我相信他们只是改变了本地化的工作方式，所以我在 UI 上四处寻找，直到我终于找到它。

他们已经改变了它。您首先必须先将您想要的语言添加到项目中。然后它将在您显示的 UI 中显示为复选框项目。要添加您需要的语言，请单击转到**项目**->**信息**，然后单击*“+”*以添加新的本地化。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T22:33:36.027

Xcode 4.5 DP3 似乎完全错过了本地化窗格中的 +/- 按钮。我尝试了 Nyon 解决方案来添加一种额外的语言（实际上是在看到这篇文章之前）。这样做，我可以在项目中添加一种语言，但我不能使用这种新语言来本地化我的文件。但多亏了他，我现在知道这是 Xcode DP3 的问题。

所以，所做的非常简单：**我使用旧的 Xcode 4.3 来本地化我的文件**（在本地化窗格中使用 + 按钮）。然后，我有两个版本的文件（每种语言一个，很好地组织到适当的 lproj 中）。然后我切换回 Xcode 4.5 DP3。现在，两种语言（英语和新语言）都出现在本地化窗格中。而这一次，对于我所有的文件！

也就是说，您只需在 Xcode 4.3 中添加一次语言，之后，新语言将按原样出现在您的语言列表中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T04:06:45.320

当“+”用于扩展列表时，按钮会滚动到视图之外。使用鼠标抓住本地化列表正下方的栏并将其向下拖动以腾出更多空间，按钮将再次可见。然后您可以单击“+”以查看其他本地化菜单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T06:09:28.267

![在此处输入图像描述](../Images/e634e7f439983b6914d2658e18ba0dec.png)

您可以像上面一样在 Xcode 4.5 中添加语言。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-01T17:41:33.490

我认为答案并不完整！...如果您开始一个非英语、日语、法语或德语的项目（在 xCode 4.6 中），那么您会在如何本地化您的资源方面有点迷失。

如果您只是按照上面的 kamesh 所述尝试添加一种新语言，您会发现如果您没有首先将您的至少一个资源本地化为 xcode 提供的默认语言，那么您将无法做到这一点。

因此，至少本地化您需要本地化的一个资源，然后，将您需要添加的语言添加为 kamesh，然后 xcode 提供的下一个模式将允许您将任何资源添加到该新语言。（不是很直观，而且苹果绝对没有记录。）

# javascript - 获取redis列表中特定字符串的索引？

> ID：11596387
> 
> 赞同：2
> 
> 时间：2012-07-21T22:38:04.873
> 
> 标签：javascript, node.js, redis

我有一个包含游戏当前玩家的列表容器，并且我用另一个整数跟踪当前回合。当一名球员离开时，我将他们从球员名单中删除。但是，在某些情况下，我还需要调整回合值（当玩家离开时）。

我发现如果某个特定玩家的索引小于转弯值，那么我需要减少转弯变量。例如

```
1) A B C(t=2) D E => B leaves
2) A C(t=1) D E 
```

由于 B 的索引在转弯之前，因此转弯递减。反过来

```
1) A B C(t=2) D E => D leaves
2) A B C(t=2) E 
```

在这里，我们不必更改转弯值，因为离开的玩家在转弯后。

所以我的问题是，如何确定列表中特定字符串的索引？（非阻塞）。如果这不可能，是否有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T23:03:52.113

没有办法用非阻塞算法来做到这一点。您必须遍历第一项到第一项的列表。

因为，您无法在这样的列表中找到任何具有其价值的项目，所以我现在只能看到这种方法。

# c++ - 是否应该为每个操作传递或创建 SSE 数据类型？

> ID：11596389
> 
> 赞同：5
> 
> 时间：2012-07-21T22:38:16.220
> 
> 标签：c++, sse

我目前正在尝试制作自己的 C++ 矢量数学库，并且对使用 SSE 优化它很感兴趣。对于我的 vec2 和 vec3 数据类型，我不能直接存储 __m128 类型，因为它们必须是预期的大小，但是 vec4 呢？假设我的 vec4 类型看起来像这样（为了讨论简单，忽略 16 字节对齐要求）：

```
union vec4 {
  struct {float x, y, z, w;};
  __m128 sse;
}

vec4 operator+(const vec4& left, const vec4& right) {
  vec4 result;
  result.sse = _mm_add_ps(left.sse, right.sse);
  return result;
} 
```

这是建议的方法还是有一些我想不出的重要理由？即，我应该这样做：

```
struct vec4 {
  float x, y, z, w;
};

vec4 operator+(const vec4& left, const vec4& right) {
  __m128 leftSSE = _mm_load_ps(reinterpret_cast<const float*>(&left));
  __m128 rightSSE = _mm_load_ps(reinterpret_cast<const float*>(&right));
  __m128 resultSSE = _mm_add_ps(leftSSE, rightSSE);
  vec4 result;
  _mm_store_ps(reinterpret_cast<float*>(&result), resultSSE);
  return result;
} 
```

当我们讨论它的时候，我的理论 vec2 和 vec3 类型呢？先将它们转换为 vec4 然后使用 SIMD 指令还是单独处理它们的标量元素会更快吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T20:54:52.897

你应该避免像瘟疫一样的第二个版本，因为如果你所有的小/原始操作都有加载/存储指令，那么使用这些操作的整体表达式将与加载/存储指令的开销相形见绌，并且完全超过实际工作做完了。

您的所有向量操作/函数都应该以一种假设并强制执行已加载到 sse 寄存器中的参数的方式编写，并且只处理这些参数。加载/存储操作应该在这些函数的上下文之外显式编写，这样您只需要在每次循环迭代时执行一次或非常不频繁地执行此操作。

另外，Mystical 试图指出的是，当您访问 SSE 内在类型的单个元素时，会导致生成加载/存储指令，因此您应该再次避免访问/修改单个元素。注意生成的程序集。

对于 vec2/3，我只会将它们设为 vec4 的强类型别名，并在首次创建时将其他组件清零。SSE 也有大多数操作的变体，它们只适用于第一个组件，因此这是另一件值得牢记的事情。

为了从 SSE 中获得最大的吞吐量，您需要处理 SoA、混合 SoA-AoS 或在运行中进行混编/改组为 SoA 形式。

看看[这个](http://www.gdcvault.com/play/1014645)视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:47:21.710

在 Visual C++（我假设您正在使用 - 如果您正在使用其他内容，请指定）`__m128`中[定义](http://msdn.microsoft.com/en-us/library/ayeb3ayc%28v=vs.71%29.aspx)如下：

```
typedef struct __declspec(intrin_type) __declspec(align(16)) __m128 {
   float m128_f32[4];
} __m128; 
```

它的表示应该与四个浮点数的结构相同，除了它是 128 位对齐的 - 这也应该转移到您的联合中。特别是，这意味着您的第二个示例不正确，除非您使用它`_mm_loadu_ps`，因为结构可能未对齐。

因此，以这种方式在联合中使用`__m128`有助于确保您的结构正确对齐以实现快速对齐的负载，因此这不是一个坏主意。

# php - 复杂的 MySQL 数据库

> ID：11596403
> 
> 赞同：0
> 
> 时间：2012-07-21T22:39:58.203
> 
> 标签：php, mysql

我有一个美术馆项目。

每隔一小时就有一组人参观画廊，这意味着`24 hours = 24 groups`。

有时超过 24 组访问，例如 25、28、30、40...
每个组有 50 到 60 或 70 名访问者，每个访问者都有系统生成的唯一 ID。
我必须设计一个数据库，我可以根据访问的时间在其中插入所有组 ID。
例子：

```
1 hour = 1, 34, 3, 6, 67, 53, 57, ... up to 60 or 70 total IDs
2 hours = 2, 35, 4, 7, 68, 54, 58 ... up to 60 or 70 total IDs
...and so on. 
```

对于一天和第二天，使用其他唯一 ID 重复相同的过程。

如果我为几个小时创建一个表，那么我有`NULL`其他几个小时的值，这会导致无用的空间！
如果我为不同的时间创建不同的表，那么如果我的小时数比我拥有的小时表数多怎么办？

谁能建议如何设计一个完美的表格或其他方式来插入没有值的`NULL`值？

我正在使用 PHP 和 MySQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T22:49:00.107

您应该创建数据库来模拟您的业务问题。

为每个访客创建一个表。该表将有一个主键，它们正在调用 UniqueId。

为每个组创建一个表。每组将有一行。将其称为 TourGroup，而不是“组”，因为“组”是 SQL 中的保留字。该表将有一个 TourGroupId 和有关该组的信息。根据您的描述，每个小组只访问一次，因此访问时间将在此表中。

创建一个将访问者分配到组的表。将其称为 VisitGroup。它将有两个重要的列，TourGroupId 和 UniqueId。

这个过程称为标准化。通常，在使用数据库时，最好使用模拟真实世界情况的数据结构。

还有一条建议。在每个表中，将 id 作为主键和表中的第一列。它应该是自动递增的。此外，在表的末尾包括两列 CreatedBy 和 CreatedAt。这些应该具有创建每一行的人员和时间的默认值。这在数据库中占用了一些额外的空间，但在将来帮助解决问题时将非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:50:26.953

你通常在一个 1:N 的[实体关系](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)前面

*   参观时间
*   自每小时多个访客可以访问画廊以来的唯一 ID。

这个问题通过有一个 2 列的表来解决

*   访问时间（例如，将小时和日期存储在 DATETIME 列中）
*   唯一 ID（将访问者的唯一 ID 存储为 UNSIGNED INT 或其他数据类型，具体取决于您的唯一 ID 的形成方式）。

然后，编写良好的 SQL 查询有责任按照用户的需要呈现数据，例如： `SELECT `unique id` FROM `yourtable` WHERE `visit time` = '2012-07-22 15'`可以向您显示今天 15 小时的唯一 ID 列表。

# python - 从 JIRA 问题中提取信息的最佳策略是什么？

> ID：11596405
> 
> 赞同：0
> 
> 时间：2012-07-21T22:40:08.983
> 
> 标签：python, jira

我正在开发[FreedomSponsors——](http://www.freedomsponsors.org)一个开源项目的众筹平台。

我想通过基于问题的 URL 预先填写一些信息来改进“赞助新问题”屏幕。

我的第一个“目标”是 JIRA。给定一个像[https://hibernate.onjira.com/browse/HHH-1050](https://hibernate.onjira.com/browse/HHH-1050)这样的 URL ，提取信息的最佳方法是：

*   1.  发行密钥：HHH-1050
*   1.  项目问题跟踪器 URL：[https ://hibernate.onjira.com/browse/HHH](https://hibernate.onjira.com/browse/HHH)

（好的，前两个很容易）

*   1.  问题标题：“HQL 联合”
*   1.  项目名称：“休眠 ORM”

我正在使用蟒蛇

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:43:58.043

我会使用[XML 视图](https://hibernate.onjira.com/si/jira.issueviews%3aissue-xml/HHH-1050/HHH-1050.xml)，它可能 (a) 比 HTML 呈现更稳定，并且 (b) 更容易从中提取信息。

至少对于此位置的此问题跟踪器，您可以获得 XML URL

```
https://hibernate.onjira.com/si/jira.issueviews:issue-xml/HHH-1050/HHH-1050.xml 
```

可以从原始问题 URL 轻松获得的问题密钥。

# android - GCM 和应用程序更新：我应该在每个活动中重新注册还是只在主要活动中重新注册？

> ID：11596411
> 
> 赞同：0
> 
> 时间：2012-07-21T22:41:11.260
> 
> 标签：android, android-notifications, google-cloud-messaging

好的，所以我知道如果应用程序更新，我应该重新注册 GCM，因为此时旧密钥可能无效。我的问题是，当应用程序更新时，是否所有打开的活动都关闭了，我可以指望再次启动主要活动（即我可以只在该活动的 onCreate 中进行版本检查和重新注册），还是全部开放的活动将继续运行，我必须在这些活动的所有 onStarts 中进行重新注册检查？（对不起，我没有安卓手机来测试这个，模拟器也没有连接到谷歌播放）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:04:56.467

是的。更新任何应用程序时，如果该应用程序已在运行，操作系统将强制关闭它，然后继续安装更新。更新完成后，您有机会“打开”它。这是您的主要活动或家庭活动将进行版本检查并重新注册到 GCM 服务器的时间。

# mysql - Windows 上的 Mysql 5.5.25a 缺少寻呼机命令

> ID：11596412
> 
> 赞同：2
> 
> 时间：2012-07-21T22:42:05.177
> 
> 标签：mysql, windows, pager

我不确定这是否是我特定的 mysql 5.5.26a 安装，或者 mysql 在 Windows 机器上是否有不同的命令集。我不在 Windows 机器上工作，在 mysql 中找不到 pager/nopager 命令。实际上，我还缺少一些命令（例如 edit、system、pager、nopager）。这是特定于 Windows 上的 mysql 的吗？

我尝试使用 pager > /dev/null 禁用标准输出。这不适用于 Windows 机器，但在我测试的另外两台服务器上（Linux，Bsd）。有人知道如何在 Windows 服务器上的 mysql 上执行此操作吗？有什么建议么？

谢谢！

# c - C - 'sizeof' 对不完整类型'struct ipheader' 和其他错误的无效应用

> ID：11596413
> 
> 赞同：1
> 
> 时间：2012-07-21T22:42:20.130
> 
> 标签：c, pointers, struct, compiler-errors

由于这些错误消息，我在编译代码时遇到了一些麻烦（我怀疑它们有些相关）

```
In function ‘forgepacket’:
error: expected specifier-qualifier-list before ‘send_tcp’

In function ‘send_tcp’:
error: invalid application of ‘sizeof’ to incomplete type ‘struct ipheader’
error: invalid application of ‘sizeof’ to incomplete type ‘struct tcpheader’ 
```

和

```
error: dereferencing pointer to incomplete type 
```

每次我尝试访问`ip->iph`或`tcp->tcph`。现在我已经收集到问题在于 and 的定义`struct ipheader`，`struct tcpheader`但我无法真正弄清楚是什么。

我一直在查看与上述类似的错误消息问题，但我无法弄清楚。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <getopt.h>
#include <sys/socket.h>
#include <netinet/ip.h>
#include <netinet/tcp.h>

#define VERSION "1.0"
#define PCKT_LEN 8192

/* Prototypes */    

void forgepacket (unsigned int, unsigned int, unsigned short, unsigned short);
int send_tcp(); 
void usage(); 

/* Checksum */
unsigned short checksum (unsigned short *pac, int len)
{ 
    unsigned long sum;
    for (sum = 0; len > 0; len--)
            sum += *pac++;
    sum = (sum >> 16) + (sum & 0xffff);
    sum += (sum >> 16);
    return(~sum);
}               

in_addr_t sip;
in_addr_t dip;
int sport;
int dport;                  

int main(int argc,char **argv)
{
int c;

/* Are we in root? */   
if(geteuid() !=0)
    {
        printf("Root access is required to run this program.\n\n");
        exit(0);        
    }   

while (1)
    {
        static struct option long_options[] =
            {
                /* Options */
            {"send",       no_argument,       0, 's'}, /* args s and r have no function yet */
            {"recieve",    no_argument,       0, 'r'},
            {"file",       required_argument, 0, 'f'}, 
            {"destip",     required_argument, 0, 'i'},
            {"destport",   required_argument, 0, 'p'},
            {"sourceip",   required_argument, 0, 'o'},
            {"sourceport", required_argument, 0, 't'},
            {0, 0, 0, 0}
            };

           int option_index = 0;

           c = getopt_long (argc, argv, "srf:d:i:p:o:t:",
                        long_options, &option_index);

                      /* Detect the end of the options. */
           if (c == -1)
             break;

           switch (c)
             {
             case 0:
               /* If this option set a flag, do nothing else now. */
               if (long_options[option_index].flag != 0)
             break;
               printf ("option %s", long_options[option_index].name);
               if (optarg)
             printf (" with arg %s", optarg);
               printf ("\n");
               break;

             case 's':
               puts ("option -s\n");
               break;

             case 'r':
               puts ("option -r\n");
               break;

             case 'f':
               printf ("option -f with value `%s'\n", optarg);
               break;

             case 'i':
               dip = inet_addr(optarg);
               break;

             case 'p':
               dport = htons(atoi(optarg)); 
               /* Add handling of bad/non number input here */
               break;

             case 'o': 
               sip = inet_addr(optarg);
               break;

             case 't': 
               sport = htons(atoi(optarg));
               break;

             case '?':
               /* Error message printed */
               break;

             default:
               abort ();
             }
         }

           /* Print any remaining command line arguments (not options). */
        if (optind < argc)
    {
        printf ("\nNon-option ARGV-elements: ");
        while (optind < argc)
        printf ("%s ", argv[optind++]);
        putchar ('\n');
    }

            /* check if all mandatory options are set and for unknown arguments */
            /* This really needs changing... */
     if (dip, sip, dport, sport == 0)
        {
            usage();
            return (-1);
        }

    forgepacket(dip, sip, dport, sport);

    getchar ();
    exit (0);

}

void forgepacket(unsigned int sourceip, unsigned int destip, unsigned short sourceport,
                 unsigned short destport)
{           
    /* IP header structure */
    struct ipheader {

        unsigned char      iph_ihl:5, 
                           iph_ver:4;
        unsigned char      iph_tos;
        unsigned short int iph_len;
        unsigned short int iph_id;
        unsigned char      iph_flags;
        unsigned short int iph_offset;
        unsigned char      iph_ttl;
        unsigned char      iph_protocol;
        unsigned short int iph_chksum;
        unsigned int       iph_sourceip;
        unsigned int       iph_destip;

        };

    /* TCP header structure */      
    struct tcpheader {

        unsigned short int tcph_sourceport;
        unsigned short int tcph_destport;
        unsigned int       tcph_seqnum;
        unsigned int       tcph_acknum;
        unsigned char      tcph_reserved:4, tcph_offset:4;
        unsigned int

            tcp_res1:4,       
            tcph_hlen:4,      
            tcph_fin:1,       
            tcph_syn:1,       
            tcph_rst:1,       
            tcph_psh:1,       
            tcph_ack:1,       
            tcph_urg:1,       
            tcph_res2:2;

        unsigned short int tcph_win;
        unsigned short int tcph_chksum;
        unsigned short int tcph_urgptr;

        send_tcp();
        };
}           

    int send_tcp()
        {
            int sock, one = 1;
            char buffer[PCKT_LEN];
            struct sockaddr_in sin, din;
            const int *val = &one;

            sock = socket(PF_INET, SOCK_RAW, IPPROTO_TCP);
            if (sock < 0)
                {
                    printf("\nError: socket()\n\n");
                    exit (-1);
                }
            else
                    printf ("\nsocket() - Using SOCK_RAW and TCP protocol is OK.\n\n");

            /* Size of the headers */           
            struct ipheader *ip = (struct ipheader *) buffer;
            struct tcpheader *tcp = (struct tcpheader *) (buffer + sizeof (struct ipheader));
            memset (buffer, 0, PCKT_LEN);

            /* IP attributes */
            ip->iph_ihl = 5;
            ip->iph_ver = 4;
            ip->iph_tos = 16;
            ip->iph_len = sizeof(struct ipheader) + sizeof(struct tcpheader);
            ip->iph_id = htons(54321);
            ip->iph_offset = 0;
            ip->iph_ttl = 64;
            ip->iph_protocol = 6;
            ip->iph_chksum = 0; 

            ip->iph_sourceip = sip;
            ip->iph_destip = dip;

            /* TCP attributes */
            tcp->tcph_sourceport = sport;
            tcp->tcph_destport = dport;

            tcp->tcph_seqnum = htonl(1);
            tcp->tcph_acknum = 0;
            tcp->tcph_offset = 5;
            tcp->tcph_syn = 1;
            tcp->tcph_ack = 0;
            tcp->tcph_win = htons(32767);
            tcp->tcph_chksum = 0; 
            tcp->tcph_urgptr = 0;

            ip->iph_chksum = checksum ((unsigned short *) buffer, (sizeof (struct ipheader )+ sizeof (struct tcpheader)));

            /* Address family */ 
            sin.sin_family = AF_INET;
            din.sin_family = AF_INET;

            /* Source port */
            sin.sin_port = sport;
            din.sin_port = dport;

            /* Source IP */
            sin.sin_addr.s_addr = sip;
            din.sin_addr.s_addr = dip;      

            /* Tell the Kernel we're building our own packet */
            if ((setsockopt(sock, IPPROTO_IP, IP_HDRINCL, (char *)&one, sizeof (one))) < 0)
                {
                    printf("\nError: Can't set socketoptions\n\n");
                    return (-1);
                }

            /* Send */
            if (sendto(sock, buffer, ip->iph_len, 0, (struct sockaddr *)&sin, sizeof(sin)) < 0)
                {
                    printf("\nError: Can't send packet\n\n");
                    return (-1);
                }

            else
                    printf("Packet sent to %d", dip); 

            close(sock);
    }           

void usage() 

{
 /* This is the user manual */  

    printf("\nTCP project %s\n\n", VERSION);

    printf("Usage:  -s -f <file> -i <destip> -p <destport> -o <sourceip> -t <sourceport>\n\n"); 

    printf("-s, --send,         Puts program in send mode\n");
    printf("-r, --recieve,      Puts program in recieve mode\n"); 
    printf("-f, --file,         Specify file containing steganographic message\n");         
    printf("-i, --destip,       Destination IP address\n"); 
    printf("-p, --destport,     Destination port\n"); 
    printf("-o, --sourceip          Source IP address\n"); 
    printf("-t, --sourceport        Source port\n"); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:01:52.410

1) 对 send_tcp 的调用应该移到 sturct 定义之外，当然：

```
};
send_tcp(); 
```

2) struct tcpheader 和 ipheader 应该移出 forgepacket

代码现在编译得很好。

如果我可以补充，我建议您学习 C 并正确缩进您的代码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-21T16:29:35.653

只需添加此头文件。它会起作用的。

```
/* Ethernet header */
struct ethheader {
    u_char  ether_dhost[6];    /* destination host address */
    u_char  ether_shost[6];    /* source host address */
    u_short ether_type;                     /* IP? ARP? RARP? etc */
};

/* IP Header */
struct ipheader {
  unsigned char      iph_ihl:4, //IP header length
                     iph_ver:4; //IP version
  unsigned char      iph_tos; //Type of service
  unsigned short int iph_len; //IP Packet length (data + header)
  unsigned short int iph_ident; //Identification
  unsigned short int iph_flag:3, //Fragmentation flags
                     iph_offset:13; //Flags offset
  unsigned char      iph_ttl; //Time to Live
  unsigned char      iph_protocol; //Protocol type
  unsigned short int iph_chksum; //IP datagram checksum
  struct  in_addr    iph_sourceip; //Source IP address
  struct  in_addr    iph_destip;   //Destination IP address
};

/* ICMP Header  */
struct icmpheader {
  unsigned char icmp_type; // ICMP message type
  unsigned char icmp_code; // Error code
  unsigned short int icmp_chksum; //Checksum for ICMP Header and data
  unsigned short int icmp_id;     //Used for identifying request
  unsigned short int icmp_seq;    //Sequence number
};

/* UDP Header */
struct udpheader
{
  u_int16_t udp_sport;           /* source port */
  u_int16_t udp_dport;           /* destination port */
  u_int16_t udp_ulen;            /* udp length */
  u_int16_t udp_sum;             /* udp checksum */
};

/* TCP Header */
struct tcpheader {
    u_short tcp_sport;               /* source port */
    u_short tcp_dport;               /* destination port */
    u_int   tcp_seq;                 /* sequence number */
    u_int   tcp_ack;                 /* acknowledgement number */
    u_char  tcp_offx2;               /* data offset, rsvd */
#define TH_OFF(th)      (((th)->tcp_offx2 & 0xf0) >> 4)
    u_char  tcp_flags;
#define TH_FIN  0x01
#define TH_SYN  0x02
#define TH_RST  0x04
#define TH_PUSH 0x08
#define TH_ACK  0x10
#define TH_URG  0x20
#define TH_ECE  0x40
#define TH_CWR  0x80
#define TH_FLAGS        (TH_FIN|TH_SYN|TH_RST|TH_ACK|TH_URG|TH_ECE|TH_CWR)
    u_short tcp_win;                 /* window */
    u_short tcp_sum;                 /* checksum */
    u_short tcp_urp;                 /* urgent pointer */
};

/* Psuedo TCP header */
struct pseudo_tcp
{
        unsigned saddr, daddr;
        unsigned char mbz;
        unsigned char ptcl;
        unsigned short tcpl;
        struct tcpheader tcp;
        char payload[1500];
}; 
```

# foursquare - 增加 Foursquare API 请求的半径参数会忽略附近的场地

> ID：11596415
> 
> 赞同：1
> 
> 时间：2012-07-21T22:42:38.560
> 
> 标签：foursquare

我正在使用[场地平台](https://developer.foursquare.com/docs/venues/search)在给定纬度和经度的“食物”类别下搜索场地。

这是我开始的请求：

[https://api.foursquare.com/v2/venues/search?ll=37.783207,-122.441673&limit=50&categoryId=4d4b7105d754a06374d81259&intent=checkin&radius=520&client_id=CLIENT_ID&client_secret=CLIENT_SECRET&v=20120721](https://api.foursquare.com/v2/venues/search?ll=37.783207,-122.441673&limit=50&categoryId=4d4b7105d754a06374d81259&intent=checkin&radius=520&client_id=CLIENT_ID&client_secret=CLIENT_SECRET&v=20120721)

这给了我想要的结果，但是，如果我将半径从 520 增加到 5200，我会得到场地，但会失去附近的场地。

我认为这是因为我将结果限制在 50 个场地（Foursquare 允许的最大值），并且在 5200 米半径范围内有超过 50 个场地。在这种情况下，Foursquare 似乎给了我 50 个最受欢迎的地方，其中省略了一些场地。我想要这个更大的半径，但要确保我回到离我最近的场地。

我是否需要包含其他参数才能做到这一点？我怎样才能确保我回到大半径范围内最近的场馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:32:22.133

如果您只想要物理上靠近用户的合理质量场所，则根本不要为 intent=checkin 指定半径——默认值是基于附近场所密度的动态。

intent=browse 将为您提供一个区域中的顶级场所，而不会出现邻近偏差。

# c# - 将 ObservableCollection 绑定到 ListView

> ID：11596418
> 
> 赞同：1
> 
> 时间：2012-07-21T22:43:12.510
> 
> 标签：c#, wpf, listview

我一直在学习[本教程](http://www.dreamincode.net/forums/topic/34745-creating-your-own-rss-reader-in-c%23/)以尝试理解 XML、WPF 和 C#（来自 Fortran）。我已经使功能正常工作（感谢教程），但是我在修改它以使用 WPF 而不是 WinForms 时遇到了麻烦。

本质上，当我单击“获取 RSS”按钮时，会发生以下情况：

```
RssManager reader = new RSSManager();
ObservableCollection<Rss.Items> _list = new ObservableCollection<Rss.Items>();
reader.Url = txtFeed.Text;
reader.GetFeed();
_list = (ObservableCollection<Rss.Items>)reader.RssItems; 
```

列表视图只是空白。它的代码如下。此外，使用列表框尝试此操作会导致为列表中的每个项目而不是我的数据填充类的名称：

```
<ListView ItemsSource="_rssItems">
    <ListView.View>
        <GridView>
            <GridViewColumn DisplayMemberBinding="{Binding Title}"/>
        </GridView>
    </ListView.View>
</ListView> 
```

是否有可能做类似的事情（再次原谅我的无知，在这里）：

```
_list.Add( new Rss.Items()); 
```

列表 (_list) 包含我需要的所有信息，我只是想弄清楚如何将它正确绑定（或添加）到 ListView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:28:18.550

看起来你有点迷路了。

最终，您希望将视图（WPF 表单）绑定到视图模型，并将视图模型绑定到模型（RSSManager）。

现在让我们将视图直接绑定到模型。

在您的构造函数中，您创建模型的新实例并将其分配给数据上下文。

这个模型会随着形式存在——

```
 public MainWindow()
    {
        InitializeComponent();
        _model = new RssManager();
        DataContext = _model;

    } 
```

然后在您的 XAML 中将项目源绑定到您的集合属性：

```
 <ListView ItemsSource="{Binding Path=RssItems}">
            <ListView.View>
                <GridView>
                    <GridViewColumn DisplayMemberBinding="{Binding Title}"/>
                </GridView>
            </ListView.View>
        </ListView> 
```

请注意，“Path=RssItems”中的内容与您分配给 DataContext 的内容相关。

然后在您的刷新按钮逻辑中调用：

```
_model.Url = txtFeed.Text;
_model.GetFeed(); 
```

您最终想要做的是在中间放置另一层。这是视图模型。View 模型是您可能已经猜到的视图模型。

视图模型的工作是收集有关视图状态的信息，并从模型中公开要由视图呈现的数据。它还可以保存当前的 ui 状态信息 - fe 选择表中的哪一行，因为稍后可能会有一些命令对其进行操作。本质上，它允许从代码中抽象出视图的所有逻辑。您的命令对诸如选择哪一行之类的操作进行操作 - 无论选择哪种类型的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:35:30.720

正如 Lee 在他的评论中所建议的那样，ListView 的 ItemsSource 属性的绑定似乎不正确。有多种方法可以解决此问题，具体取决于您的项目的设计/结构方式。

为了 Da​​taBind，ListView 需要某种 DataContext（顾名思义）是一种用于 Binding 的 Context。如果您使用的是 MVVM，那么整个 Window/Control 的 DataContext 很可能是一个 ViewModel。在这种情况下，您可以像这样绑定到 ViewModel 的属性：

```
<ListView ItemsSource="{Binding RssItems}">...</ListView> 
```

这假设您有一个具有公共 RssItems 属性（某种 List/Enumerable）的 ViewModel，并且 ViewModel 是 DataContext。

如果您不使用 MVVM，有很多方法可以使用和不使用 DataBinding 来分配 ItemsSource。如果您对 DataBinding 不完全满意，我建议的最简单方法是手动分配 ItemsSource，如下所示：

xml:

```
<ListView x:Name="MyRssList">...</ListView> 
```

后面的代码（在 UI 加载之后以及创建/填充 _list 之后的某个地方）：

```
MyRssList.ItemsSource = _list; 
```

这不使用 DataBinding，但它会完成工作。如果您想从 DataBinding 开始，您可以执行以下操作：

XAML：

```
<ListView x:Name="MyRssList" ItemsSource="{Binding}>...</ListView> 
```

代码背后：

```
MyRssList.DataContext = _list; 
```

这会将 List 分配为 ListView 的 DataContext，然后将 ItemsSource 属性 DataBind 到 DataContext。

总的来说，你走在正确的轨道上。我建议阅读一些有关[DataBinding](http://msdn.microsoft.com/en-us/library/ms750612.aspx)和[MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)的内容。MVVM 是利用 WPF 强大的 DataBinding 功能的一种非常好的方法，对 DataBinding 的深入了解对于设计和构建出色的 WPF 应用程序非常有价值。

希望这可以帮助。祝你好运！

# php - 外部镜像漏洞

> ID：11596419
> 
> 赞同：7
> 
> 时间：2012-07-21T22:43:12.540
> 
> 标签：php, image, security, xss, csrf

通过`img`标签包含外部图像会在我的网站上出现哪些安全漏洞以及如何避免它们？

我目前只在提交时检查扩展名和`mime-type`图像（可以在提交后更改`URL`），并`URL`在将其放入`src`属性之前对其进行清理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T23:12:12.690

这里可能需要区分*谁*处于危险之中。

如果您所做的只是存储 URL，而不是将图像上传到您的服务器，那么您的站点*可能是*安全的，并且任何潜在的风险都是针对查看您站点的用户。

从本质上讲，您信任浏览器制造商的可靠性。事情*可能*没问题，但如果您的用户使用的某个浏览器出现安全漏洞，涉及错误解析包含恶意代码的图像，那么最终将由您的用户为此付费（您可能会发现[GIFAR](http://en.wikipedia.org/wiki/Gifar)很有趣）。

这取决于您是否信任浏览器制造商制作安全软件，以及您是否信任您的用户不会将 URL 上传到可能包含某些浏览器漏洞的图像。现在可能安全的东西在下一个版本中可能不安全。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T23:02:06.937

可以暴露的主要漏洞是损坏的图像导致浏览器内的缓冲区溢出，从而允许执行任意代码。

如果您只是将图像放入`<img>`标签中，*则不*应该存在与发送替代 MIME 类型相关的任何漏洞，但永远不要低估某些 Web 浏览器开发人员的愚蠢......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-21T23:02:08.137

好吧，很明显，您没有对数据进行任何检查，因此数据可以是任何东西（远程服务器报告的 mime 类型不一定是真话）。另外，正如您所说，远程服务器上的数据可以更改，因为您在提交后从不查看它。

因此，如果将链接放入让我们说 <img src="..."/>，那么浏览器在图像处理中可能存在的任何漏洞都可以被利用。

“清理” URL 对任何事情都没有帮助：提交指向“坏”图像的链接的人不会攻击他自己的服务器。

# node.js - 带有 nodejs 的 CLI

> ID：11596420
> 
> 赞同：3
> 
> 时间：2012-07-21T22:43:14.337
> 
> 标签：node.js, command-line-interface, npm

我正在节点中开发一个将发布到 NPM 的 CLI。由于它是一个 CLI 应用程序，我希望它在安装后包含在路径中，因此不需要键入“node my-app.js”来运行它。我希望它只运行“我的应用程序”。

在 package.json 中，我包括：

```
"bin": { 
    "my-all" : "./my-app.js" 
 }, 
```

但这会导致通过 NPM 安装失败并出现此错误

**错误：ENOENT，chmod '/home/user1/node_modules/my-app/my-app'**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T22:49:09.403

假设您使用的是某种 unix（linux、osx），请将这一行放在脚本的顶部：

```
#!/usr/bin/env node 
```

还要确保将文件设置为可执行文件 ( `chmod a+x my-all`)。

这应该照顾到需要键入`node my-app.js`，并且使您能够只键入`./my-app.js`。

至于 npm 打包的东西，我不确定它为什么会失败，但我猜这是 my-app.js 的路径或位置的问题。

如果将可执行脚本放在 PATH 中的任何位置，那么它将像其他任何东西一样运行。如果您运行`which npm`，您将看到 npm 可执行脚本所在的位置。在我的系统上，大多数节点可执行文件（或可执行的 npm 脚本）进入 /usr/local/bin。我假设您`package.json`可以将其设置为将其放在路径中的某个位置。如果您需要更改路径，请修改您的`.profile`，或者您的系统路径。

# operating-system - 请求分页中是否保留在磁盘上的数据？

> ID：11596421
> 
> 赞同：0
> 
> 时间：2012-07-21T22:43:28.740
> 
> 标签：operating-system, paging

在请求分页中，数据是从磁盘复制到主存中，还是转移到主存中，在磁盘中什么也没有留下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:51:09.807

没有什么是“移动”的。数据不是一张纸，一次只能在一个地方；它被复制到内存中，然后它仍然在磁盘上。在磁盘上擦除它意味着用不同的数据覆盖它，这在读取后需要额外的时间。

它最终可能会被覆盖，因为系统当然会知道交换的哪些部分仍然有效和需要的数据，以及哪些部分被认为是“未使用的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:58:17.667

其实以上都没有。传统上，进程和文件在被请求时都会将其内容复制到内存中。然而，对于请求分页，情况并非如此。当请求将文件加载到内存中时，操作系统会在进程的虚拟地址空间内标记该文件的位置，但实际上并不分配内存或复制文件。一旦进程读取或写入该内存区域，处理器就会抛出操作系统捕获的错误。然后操作系统*只将文件的内容复制到页面*然后。这具有节省内存的效果，因为仅分配了实际访问的页面。对于堆分配也是如此。如果一个程序请求一大块内存，它实际上直到程序使用该内存才被分配。

# python - 从 mysqldump 备份执行相互依赖的视图

> ID：11596423
> 
> 赞同：3
> 
> 时间：2012-07-21T22:44:03.230
> 
> 标签：python, mysql, database, scripting, mysqldump

*mysqldump*使用按字母顺序列出的表（和视图）创建转储。当表之间存在外键关系时，这不是很方便，但是，通过运行可以轻松解决问题：

```
SET FOREIGN_KEY_CHECKS=0; 
```

我有一种情况，即视图 vwapple 依赖于视图 vworange，比如说。使用 mysqldump，vwapple 在 vworange 之前列出并执行，这是有问题的，因为我们会收到“查看 vworange 不存在”错误消息。

这种情况如何解决？视图是否具有与表类似的解决方案？还是让每个视图独立来解决这个问题更好？

注意
我正在使用 python 脚本恢复数据库。每个视图和表都在其单独的 .sql 文件中，因为我想独立地对每个数据库对象进行源代码控制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T23:51:33.650

最近的版本`mysqldump`，在转储整个数据库时，以这种方式解决问题：对于数据库中的每个视图，他们首先创建一个具有相同结构的空表，然后创建视图，在创建视图之前删除每个占位符表。似乎用视图替换表不会损害依赖它的视图。

我知道这一点是因为这种方法有另一个[缺陷](http://bugs.mysql.com/bug.php?id=44939)，这让我很苦恼：视图中的行可能包含比表中的行更多的数据，因此无法创建一些占位符表，导致某些转储在没有人工干预的情况下无法恢复。出于这个原因，视图的拓扑排序会更可取，尽管它可能需要一些工作。

# c - WM_MOUSEMOVE 消息处理

> ID：11596424
> 
> 赞同：1
> 
> 时间：2012-07-21T22:44:03.977
> 
> 标签：c, winapi, wndproc

我有以下内容`WndProc`：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM w, LPARAM l)
{
    switch (message)
    {
    case WM_DESTROY:
        PostQuitMessage(0);
        return 0;
    case WM_MOUSEMOVE:
            return 0;
    default:
        return DefWindowProc(hWnd, message, w, l);
    }
} 
```

我想阻止鼠标移动，所以我试图丢弃移动消息。问题是鼠标还在移动。我也试过`WM_NCHITTEST`和`WM_MOUSEHOVER`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T23:08:45.417

该`WM_MOUSEMOVE`消息只是窗口管理器告诉您*鼠标已移动*，如果您的应用程序想要使用该信息执行某些操作，它可以这样做。它*不是*一种可以拦截鼠标移动并随意取消它们的机制。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T01:30:01.460

如果您试图限制光标移动，请查看 Windows API 中的[ClipCursor](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648383%28v=vs.85%29.aspx)函数。

# c# - FormsAuthentication 如何跨请求上下文持久化会话以及持久化哪些信息？

> ID：11596425
> 
> 赞同：0
> 
> 时间：2012-07-21T22:44:28.423
> 
> 标签：c#, asp.net, asp.net-mvc

所以，我打电话`FormsAuthentication.SetAuthCookie(model.UserName, true)`并重定向到`[Authorize]`品牌行动。现在`HttpContext.Current.User.Identity`是`FormsIdentity`其属性告诉我我确实已登录。太好了。

现在我改造我的数据库，删除表并重新生成它们。FormsAuthentication 保留的名称甚至不再存在。但是当我刷新安全网站时，愚蠢的逻辑仍然向我打招呼：Hello *UserName*。好吧……这很酷。

FormsAuthentication 显然与我的数据存储无关。它是否在进程中存储会话信息？还是将所有相关数据编码到身份验证票中并让客户端将其保存在 cookie 中？

最后，门票是否与我的会员平台绑定？或者`HttpContext.Current.User.Identity.Name`只是一个任意值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:51:31.610

所有相关数据都存储在身份验证票证中，并保存在客户端的 cookie 中。并且 HttpContext.Current.User.Identity.Name 也存储在另一个 cookie 中。您可以通过单击查看页面信息然后单击安全来使用 Firefox 查看 cookie。您将看到 2 个 cookie。其中之一是 .ASPXAUTH（负责身份验证），另一个是 .ASPXROLES（负责成员资格）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T07:12:28.610

使用默认的表单身份验证配置，成功登录后会将 cookie 发送到客户端。（有无cookie选项）

“每次在身份验证后收到后续请求时，FormsAuthenticationModule 类都会从身份验证 cookie 中检索身份验证票证，对其进行解密，计算哈希值，并比较 MAC 值以帮助确保 cookie 未被篡改。”

您看到的是 FormsAuthenticationModule 发现请求具有 cookie。

以下链接是我刚刚描述的过程的非常详细的概述。活动图对于理解每个请求会发生什么特别重要。

我希望这会有所帮助。

[解释：ASP.NET 2.0 中的表单身份验证](http://msdn.microsoft.com/en-us/library/ff647070.aspx)

克里斯

# ios - iOS - 如何在手机上的 ssh 会话中查看 NSLog 和 printf 输出？

> ID：11596435
> 
> 赞同：0
> 
> 时间：2012-07-21T22:47:15.487
> 
> 标签：ios, xcode, printf, nslog, syslog

我有一个简单的 iPhone 应用程序，它使用一个`NSLog`和几个`printf`语句。该应用程序是我创建的一个简单的测试应用程序，用于测试 iPhone (3GS) 上的串行通信。`Run`显然，我无法使用 iOS 模拟器测试串行 com，因此在 Xcode 中单击后，我将设备从计算机上拔下。我从 Cydia 安装了 syslogd，并`tail /var/log/syslog`允许我监视某些日志消息。

但是，当我打开我的应用程序并到达`NSLog`代码的一部分时，我看不到消息出现在`/var/log/syslog`我也看不到应用程序文件中的`printf`语句输出。`syslog`

iPhone 本身是否存在包含这些语句的输出的文件，或者我是否需要指定我的应用程序输出到`/var/log/syslog`？

如果手机上存在包含日志消息内容的另一个文件，我对打开另一个文件感到满意。基本上，我希望能够`sshed`在打电话时看到日志消息的内容，这样我就可以看到发生了什么。显然，在 Xcode 中使用控制台输出不是一个选项，因为手机没有连接到计算机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T22:56:35.660

您写入[syslog](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/syslog.3.html#//apple_ref/doc/man/3/syslog)，您应该调用 syslog 函数。

可以看到 NSLog 输出，如[这个 SO question](https://stackoverflow.com/questions/5318342/what-happens-to-nslog-info-when-running-on-a-device)所示。

printf 只会转到标准输出。

我会尽量不使用 NSLog 和 stdout 来登录同一个应用程序 - 使用 NSLog 来记录那里的所有日志。或者通过更多的工作使用像[CocoaLumberjack](https://github.com/robbiehanson/CocoaLumberjack/wiki/CustomLoggers)这样的日志框架，它允许更大的灵活性，包括其他可能包含 syslog 的记录器，因此具有一个日志功能，您可以在运行时重定向到不同的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T22:59:22.440

你在用`tail /var/log/syslog`吗？它只显示日志的最后 15 行。也许尝试使用`tail -f /var/log/syslog`. 我刚刚测试了它，它记录了我的简单`NSLog(@"LOL");`。我能够通过 ssh 和一切看到它。

# javascript - 如何将计数器添加到像 Twitter 一样计数的 javascript 文本区域，但不是向下，而是最多 150 个字符

> ID：11596440
> 
> 赞同：2
> 
> 时间：2012-07-21T22:49:04.117
> 
> 标签：javascript, character, countdown, max

我对javascript和实现它知之甚少，但我发现了这一点：

```
<script language="javascript" type="text/javascript">
function limitText(limitField, limitCount, limitNum) {
    if (limitField.value.length > limitNum) {
        limitField.value = limitField.value.substring(0, limitNum);
    } else {
        limitCount.value = limitNum - limitField.value.length;
    }
}
</script> 
```

然后这块来实现它：

```
<form name="myform">
<textarea name="limitedtextarea" onKeyDown="limitText(this.form.limitedtextarea,this.form.countdown,100);" 
onKeyUp="limitText(this.form.limitedtextarea,this.form.countdown,100);">
</textarea><br>
<font size="1">(Maximum characters: 100)<br>
You have <input readonly type="text" name="countdown" size="3" value="100"> character left.</font>
</form> 
```

我如何使它而不是倒计时而是最多计数 150 个字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T22:54:05.617

这是您需要的代码：

Javascript部分：

```
<script language="javascript" type="text/javascript">
function limitText(limitField, limitCount, limitNum) {
    if (limitField.value.length > limitNum) {
        limitField.value = limitField.value.substring(0, limitNum);
    } else {
        // notice I set the value of the count to the length of the field
        // rather than setting it to the max chars - the length of the field
        limitCount.value = limitField.value.length;
    }
}
</script> 
```

HTML部分：

```
<!-- changed all occurrences of 100 to 150 to match your specified max characters -->
<form name="myform">
<textarea name="limitedtextarea" onKeyDown="limitText(this.form.limitedtextarea,this.form.countdown,150);" 
onKeyUp="limitText(this.form.limitedtextarea,this.form.countdown,150);">
</textarea><br>
<font size="1">(Maximum characters: 150)<br>
<!-- here I changed "You have x characters left" to "You have used x characters." -->
You have used <input readonly type="text" name="countdown" size="3" value="0"> characters.</font>
</form> 
```

工作示例：http: [//jsfiddle.net/EcDBE/](http://jsfiddle.net/EcDBE/)

我建议尝试真正理解我所做的更改，而不是简单地复制和粘贴提供的代码。为了帮助您，我在代码中添加了注释以显示我所做的更改。

# java - 查找随机数组的中值

> ID：11596443
> 
> 赞同：0
> 
> 时间：2012-07-21T22:49:27.313
> 
> 标签：java, median

> **可能重复：**
> [查找数组的中值？](https://stackoverflow.com/questions/3691940/finding-the-median-value-of-an-array)
> [如何从一组数字中计算均值、中位数、众数和范围](https://stackoverflow.com/questions/4191687/how-to-calculate-mean-median-mode-and-range-from-a-set-of-numbers)
> [结合快速排序和中位数选择算法](https://stackoverflow.com/questions/10609602/combine-quicksort-and-median-selection-algorithm)

如何找到随机生成的数组的中值？

例如：它会给我一个像 88,23,93,65,22,43 这样的数组。我正在使用的代码找到中间数字，但它没有排序。

这是我到目前为止使用的代码：

```
double Median()
{
    int Middle = TheArrayAssingment.length / 2;
       if (TheArrayAssingment.length%2 == 1)
        {
           return TheArrayAssingment[Middle];
        }
    else {
        return (TheArrayAssingment[Middle-1] + TheArrayAssingment[Middle]) / 2.0;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T22:55:34.930

您的代码看起来不错，但*它假定数组已排序。*只需排序：

```
Arrays.sort(TheArrayAssignment); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:54:32.617

```
public static double median(int[] a) {
    int[] b = new int[a.length];
    System.arraycopy(a, 0, b, 0, b.length);
    Arrays.sort(b);

    if (a.length % 2 = 0) {
        return (b[(b.length / 2) - 1] + b[b.length / 2]) / 2.0;
    } else {
        return b[b.length / 2];
    }
} 
```

# .htaccess - 用连字符重写 URL 在 GoDaddy 上不起作用

> ID：11596448
> 
> 赞同：0
> 
> 时间：2012-07-21T22:51:30.140
> 
> 标签：.htaccess, url, mod-rewrite

我的测试服务器上有这个网站，它工作得很好，但是当我把它上传到 GoDaddy 服务器上时，重写似乎失败了。

这是 .htaccess 的相关部分

```
 RewriteRule ^([A-Za-z0-9\-]+)$ $1.php

    RewriteRule ^([A-Za-z0-9\-]+)/?$ $1.php

    RewriteRule ^([A-Za-z0-9\-]+)/([0-9\-]+)$ $1.php?v=$2

    RewriteRule ^([A-Za-z0-9\-]+)/([0-9\-]+)/?$ $1.php?v=$2 
```

所以基本上，URL：**www.site.com/page-one**应该打开页面**www.site.com/page-one.php**。但事实并非如此。它抛出以下错误：

```
Not Found

The requested URL /page-one was not found on this server.

Additionally, a 404 Not Found error was encountered while trying 
to use an ErrorDocument to handle the request. 
```

任何和所有的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:29:59.307

我最终为各个页面编写了独立的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T23:01:08.007

确保 ModRewrite 模块在服务器配置中被激活并且`AllowOverride`设置为`all`.

您是否将 RewriteEngine 激活到您的`.htaccess`文件中？你可以这样做：

```
RewriteEngine on 
```

# html - CSS padding-top：100％使用父级的宽度？

> ID：11596450
> 
> 赞同：5
> 
> 时间：2012-07-21T22:51:38.410
> 
> 标签：html, css, padding, styling

我对这个发现有点迷茫，无法向自己解释这背后的原因。

附加的[小提琴](http://jsfiddle.net/tNsPH/)显示了两个 DIV，一个嵌套在另一个中。外部 DIV 具有设置的高度和宽度以及相对位置。内部 DIV 也有设置的高度和宽度。除此之外，它的顶部、右侧和底部填充设置为 100%。\

据我了解，填充将基于父级的高度和宽度得出。但是，结果显示所有填充（顶部、右侧和底部）仅参考父级的宽度。似乎所有浏览器都呈现相同的结果。因此，它必须是某些标准的一部分。

我的问题是为什么以这种方式实现这一点，以及是否有办法让我参考父级的高度而不是父级的宽度来进行顶部和底部填充。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T23:35:11.710

是的，关于宽度的填充百分比是正确的。它是 W3 CSS Box 模型规范的一部分：

[http://www.w3.org/TR/CSS2/box.html#padding-properties](http://www.w3.org/TR/CSS2/box.html#padding-properties)

您将无法使用填充百分比来参考高度。它总是指宽度。对不起 =(

# php - 如果不存在则跳过该行。MySQL/PHP

> ID：11596458
> 
> 赞同：0
> 
> 时间：2012-07-21T22:52:38.177
> 
> 标签：php, mysql, row

我正在做一个个人网站。我被困在博客上。我有它，所以它每页显示 5 个，当我的 MySQL 表中的 id 没有中断时很好。
但是，我有删除博客的能力，这搞砸了一切，因为我的循环包含丢失的 id，并且什么也没显示，所以每页只有 3 个或 4 个。 ![在此处输入图像描述](../Images/cce9208c613d804a508dc04281153a67.png)

（id=10的博客被删除了）

我不会展示所有代码，但这里有一些。

```
$i = $blog_count-(($currentpage*$maxperpage)-$maxperpage);
while ($i >$blog_count-(($currentpage*$maxperpage)-$maxperpage)-$maxperpage){
//render the blogs
$i--;
} 
```

$blog_count 等于表中有多少行。我还有另一个变量是 $maxid。它只是最大的id号。

任何帮助，将不胜感激。我有一种感觉，我应该知道如何做到这一点，但我很难过。

编辑：我将代码更改为

```
$start = $currentpage*$maxperpage-$maxperpage;
$query = "SELECT * FROM blogs ORDER BY id DESC LIMIT $start,$maxperpage";
$result=mysql_query($query) or die(mysql_error());
while ($blog = mysql_fetch_array($result)) 
```

它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:11:28.690

您的问题似乎是您没有正确使用数据库。

您应该让数据库返回根据您的需要过滤和排序的行集合。在典型的博客场景中（文章可能处于非活动状态/尚未公开），您会要求数据库返回按日期排序的活动文章集合。阅读基本 SQL 并帮自己一个忙，并使用体面的 ORM（一个数据库抽象层，使执行查询变得容易，将您与原始 SQL 隔离开来）。

正如已经提到的，您可以使用 LIMIT 来获取行的子集，以防您想要进行分页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T23:21:39.607

正如其他人所提到的，您不应该依赖博客文章的任意 id 字段。从数据库中按排序顺序提取您的帖子，然后循环输出。下面是一些示例代码，可帮助您入门：

```
$results = $connection->query("SELECT * FROM Posts LIMIT 5, 5 ORDER BY id DESC");
while ($row = $result->fetch_assoc())
{
//Pull data from the row and display it
} 
```

因此，此代码将从数据库中提取第 6 到第 10 个帖子，无论哪些帖子已被删除。LIMIT 的第一个参数是要跳过的行数（因此，第一页为 0，第二页为 5，等等），第二个参数是结果的最大数量（您希望它始终为 5）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T23:04:30.053

好的 2 件事我会建议...

使用 MySQL 限制子句，这将限制返回的结果数量。

IE

```
SELECT * FROM `table1` LIMIT 10; 
```

或者使用另一个字段`deleted`来确定该行是否被“删除”，所以它仍然在数据库中，但不是活动的。

# maven - Maven 本地存储库无法解析工件

> ID：11596463
> 
> 赞同：0
> 
> 时间：2012-07-21T22:54:07.867
> 
> 标签：maven, repository, local

我正在尝试重建开发环境，以对 2009 年开发的 Web 应用程序进行一些更改。我在本地存储库中遇到了 maven 和 Crystal 报告工件的问题。jar 文件肯定在本地存储库中。我有一份旧 pom 文件的副本，还有一份 .m2 本地 repo 的备份。当我运行 mvn clean compile 时，我得到以下输出： 注意：下划线停止 url。

```
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/ReportViewer/1.0/ReportViewer-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/webreporting/1.0/webreporting-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/jrcerom/1.0/jrcerom-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/serialization/1.0/serialization-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/developer/crystalreportsforeclipse/doc_1.0.6.v1371/1.0/doc_1.0.6.v1371-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/developer/crystalreportsforeclipse/nl1_1.0.6.v1371/1.0/nl1_1.0.6.v1371-1.0.pom
[INFO] [compiler:compile] [INFO] Compiling 168 source files to C:\WorkSpaces\CKDProject\CKDProject\core-domain\target\classes
[INFO] ------------------------------------------------------------------------
[INFO] Building web [INFO]    task-segment: [clean, compile]
[INFO] ------------------------------------------------------------------------
[INFO] [clean:clean] [INFO] Deleting directory C:\WorkSpaces\CKDProject\CKDProject\web\target
[INFO] [resources:resources]
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 5 resources

Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/CrystalContentModels/1.0/CrystalContentModels-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/CrystalDatabaseConnectors/1.0/CrystalDatabaseConnectors-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/CrystalExporters/1.0/CrystalExporters-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/CrystalExportingBase/1.0/CrystalExportingBase-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/CrystalFormulas/1.0/CrystalFormulas-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/CRDBJavaServerCommon/1.0/CRDBJavaServerCommon-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/CRDBXMLExternal/1.0/CRDBXMLExternal-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/CRDBXMLServer/1.0/CRDBXMLServer-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/CrystalCharting/1.0/CrystalCharting-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/CrystalCommon/1.0/CrystalCommon-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/CrystalReportingCommon/1.0/CrystalReportingCommon-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/CrystalQueryEngine/1.0/CrystalQueryEngine-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/CrystalReportEngine/1.0/CrystalReportEngine-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/keycodeDecoder/1.0/keycodeDecoder-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/MetafileRenderer/1.0/MetafileRenderer-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/rpoifs/1.0/rpoifs-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/Concurrent/1.0/Concurrent-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/ebus405/1.0/ebus405-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/icu4j/1.0/icu4j-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/URIUtil/1.0/URIUtil-1.0.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/jrcadapter/1.0/jrcadapter-1.0.pom
Downloading: http://repo1.maven.org/maven2/jmaki/ajax-wrapper-comp/1.8.1/ajax-wrapper-comp-1.8.1.pom
Downloading: http://repo1.maven.org/maven2/local/sun/java/net/jaxws-spring/1.8/jaxws-spring-1.8.pom
Downloading: http://repo1.maven.org/maven2/local/xbean-spring/2.8/xbean-spring-2.8.pom
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/Concurrent/1.0/Concurrent-1.0.jar
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/ebus405/1.0/ebus405-1.0.jar
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/icu4j/1.0/icu4j-1.0.jar
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/URIUtil/1.0/URIUtil-1.0.jar
Downloading: http://repo1.maven.org/maven2/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/jrcadapter/1.0/jrcadapter-1.0.jar
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Failed to resolve artifact. Missing:
----------
1) com.businessobjects.sdks.jrc_11_8_0_11_8_6_v1371:Concurrent:jar:1.0  
Try downloading the file manually from the project website.   Then,
install it using the command: 
      mvn install:install-file -DgroupId=com.businessobjects.sdks.jrc_11_8_0_11_8_6_v1371 -DartifactId=Concurrent -Dversion=1.0 -Dpackaging=jar -Dfile=/path/to/file   Alternatively, if you host your own repository you can deploy the file there: 
      mvn deploy:deploy-file -DgroupId=com.businessobjects.sdks.jrc_11_8_0_11_8_6_v1371 -DartifactId=Concurrent -Dversion=1.0 -Dpackaging=jar -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id]   Path to dependency:        1) root.project:web:war:1.0     2)
com.businessobjects.sdks.jrc_11_8_0_11_8_6_v1371:Concurrent:jar:1.0 
```

我的 pom 文件有以下几行水晶报告所需的各种 jar 文件：

```
<dependency>
    <groupId>com.businessobjects.sdks.jrc_11_8_0_11_8_6_v1371</groupId>
    <artifactId>rasapp</artifactId>
    <version>1.0</version> 
</dependency> 
```

任何帮助，将不胜感激。

谢谢，杰森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:10:49.667

您绝对确定您拥有正确的存储库备份吗？

> jar 文件肯定在本地存储库中

除非您将 Maven 配置为在别处查找，否则丢失的文件应位于此处：

```
$HOME/.m2/repository/com/businessobjects/sdks/jrc_11_8_0_11_8_6_v1371/Concurrent/1.0/Concurrent-1.0.jar 
```

# 解释

显然 Maven 报告缺少依赖项。

[以下依赖项是一个商业 jar，它解释了为什么它在默认的Maven 中央存储库](http://search.maven.org/)中不存在。

```
<dependency>
<groupId>com.businessobjects.sdks.jrc_11_8_0_11_8_6_v1371</groupId>
<artifactId>Concurrent</artifactId>
<version>1.0</version> 
</dependency> 
```

在某个遥远的时间点，使用类似以下命令的东西将这种依赖关系嵌入到本地存储库中：

```
mvn install:install-file -DgroupId=com.businessobjects.sdks.jrc_11_8_0_11_8_6_v1371 -DartifactId=Concurrent -Dversion=1.0 -Dpackaging=jar -Dfile=Concurrent.jar 
```

使用这种机制来管理 3rd 方依赖项，是保证在不同机器上复制构建时获得很多乐趣的最佳方式......

根据我的经验，使用 Maven 存储库管理器是无可替代的：

*   [关系](http://www.sonatype.org/nexus/)
*   [神器](http://www.jfrog.com/home/v_artifactory_opensource_overview)
*   [档案](http://archiva.apache.org/)。

事实上，如果这不止一次的活动可能是为这些缺失的依赖项设置适当管理的存储库的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:22:22.313

您需要首先找出您的“rasapp”jar 位于哪个存储库中，然后在您的 settings.xml 中添加该存储库 url，这个 jar 将被下载。

# sql - 获取用户 MySQL/PHP 的私信组

> ID：11596464
> 
> 赞同：0
> 
> 时间：2012-07-21T22:54:26.430
> 
> 标签：sql, phpmyadmin

我尝试制作一个 SQL，它会从每个发送给我的用户那里给我带来最后一条消息。我正在使用 phpmyadmin。

我有两张桌子

**用户**

```
编号 | 用户名
6 6666
7 8888

```

**消息**

```
message_id | 发件人 ID | 接收者 ID | 主题 | 正文 | 日期
1 6 3 aaa bbb 2012-07-22 00:14:41
2 6 3 aaa1 bbb1 2012-07-22 00:15:41
3 7 3 vvv vvv 2012-07-22 00:19:41

```

所以结果必须是（按日期（时间）排序）

```
3 7 3 vvv vvv 2012-07-22 00:19:41
2 6 3 aaa1 bbb1 2012-07-22 00:15:41

```

我已经在查询下方进行了这个查询（我测试了我的 id = 3），但我认为它不是那么好（优化）并且有更简单的方法来选择这些数据

```
SELECT u.username, m.sender_id , m.subject, m.message
                FROM users u
                LEFT JOIN messages m ON m.sender_id = u.id OR m.message_id = (SELECT b.message_id FROM messages b WHERE b.receiver_id = 3 ORDER BY b.date DESC LIMIT 0,1)
                WHERE m.receiver_id = 3
                GROUP BY m.sender_id
                ORDER BY m.date DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:08:54.030

```
select * from messages 
where message_id in(select max(msg.message_id) from messages msg
                    where msg.receiver_id = 3 group by sender_id ) 
```

# objective-c - 触摸单元格时，表格视图不会推送到新视图

> ID：11596467
> 
> 赞同：1
> 
> 时间：2012-07-21T22:54:55.070
> 
> 标签：objective-c, ios5, uistoryboard, uistoryboardsegue

我正在尝试从表格视图导航到另一个 UIViewController。我在新的 UIViewController 中控制拖动我的 TableCell。然后我输入了以下代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    // Configure the cell...
    if (cell == nil) {
        cell = [[ UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
    if ([indexPath section] == 0) {
        Tips *tipy = [arr objectAtIndex:indexPath.row];
        cell.textLabel.text = [tipy tipdescription];
        cell.detailTextLabel.text = [tipy.tipnumber stringValue];
        NSString *imagefile = [[ NSBundle mainBundle] pathForResource:@"unlikeico" ofType:@"png"];
        UIImage *image = [[UIImage alloc] initWithContentsOfFile:imagefile];
        [[cell imageView]setImage:image];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
            } else {
                Tips *tipy = [arr2 objectAtIndex:indexPath.row];
                cell.textLabel.text = [tipy tipdescription];
                cell.detailTextLabel.text = [tipy.tipnumber stringValue];
                NSString *imagefile = [[ NSBundle mainBundle] pathForResource:@"likeico" ofType:@"png"];
                UIImage *image = [[UIImage alloc] initWithContentsOfFile:imagefile];
                [[cell imageView]setImage:image];
                cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
                    }

    return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([segue.identifier isEqualToString:@"showtext"]) {

        DisplayViewController *dvc = [segue destinationViewController];
        NSIndexPath *path = [self.tableView indexPathForSelectedRow];
        Tips *tipy = [arr2 objectAtIndex:[path row]];  
        [dvc setCurrenttext:tipy];
    }

} 
```

该表将显示数据，但不会移动到新的 UIViewController。Xcode 不显示任何警告或错误。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:10:08.773

该`prepareForSegue`方法没有被调用。要调用它，必须有以下方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"showtext" sender:self];
} 
```

# jsf - JSF 复合组件支持 bean EL 表达式作为必需属性的默认值失败，方法未知

> ID：11596470
> 
> 赞同：2
> 
> 时间：2012-07-21T22:55:13.527
> 
> 标签：jsf, jsf-2, default, composite-component

我有一个 JSF 复合组件 util_primefaces:inplace_name，它需要一个“管理器”支持 bean，它在编辑实体的“名称”字段时执行持久性更新（使用 p:inplace）：

```
<cc:interface>
  <cc:attribute name="manager" type="com.example.web.AbstractManager" required="false" default="#{blockManager}"/>
  <cc:attribute name="element" type="com.example.entity.Element" required="true"/>
  <cc:attribute name="elid" required="true"/>
  <cc:attribute name="update" required="false" default="@parent"/>
 ..
</cc:interface>

<cc:implementation>
 ..
 <p:inplace id="#{cc.attrs.elid}" editor="true" emptyLabel="UNDEF" >
  <p:ajax 
   event="save" 
   listener="#{cc.attrs.manager.onInplaceNameSaveEvent}"
   process="@this #{cc.attrs.elid}-name"
   update="#{cc.attrs.update}"
  />
 <h:inputText id="#{cc.attrs.elid}-name" value="#{cc.attrs.element.name}"/>
 .. 
```

例如，@ViewScoped @ManagedBean BlockManager 最终扩展了一个 AbstractManager，它有一个监听器方法：

```
public void onInplaceNameSaveEvent(AjaxBehaviorEvent ae). 
```

[旁白：这里描述了不寻常的“elid”属性的原因，它在这个问题中没有进一步的作用：[Primefaces p：inplace：如何更优雅地传播实体合并的 EL 表达式](https://stackoverflow.com/questions/11405613/jsf-primefaces-pinplace-how-to-more-elegantly-propagate-the-el-expression-for)]

当我调用传入显式 #{blockManager} （或 AbstractManager 的其他子类）的复合组件时，它工作正常：

```
<util_primefaces:inplace_name 
 element="#{tenancy}" 
 elid="tenancy"
 manager="#{blockManager}"
/> 
```

但是，如果我没有传入 #{blockManager}，在执行就地编辑和保存时，我会收到一个错误，即方法 onInplaceNameSaveEvent(AjaxBehaviorEvent) 未知：

```
<util_primefaces:inplace_name 
 element="#{tenancy}" 
 elid="tenancy"
/> 
```

错误是：

```
WARNING: Method not found: com.example.web.BlockManager@71396a88.onInplaceNameSaveEvent(javax.faces.event.AjaxBehaviorEvent)
javax.el.MethodNotFoundException: Method not found: com.example.web.BlockManager@71396a88.onInplaceNameSaveEvent(javax.faces.event.AjaxBehaviorEvent)
at com.sun.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:155) 
```

问：为什么在复合组件属性中使用 default="#{blockManager}" 没有正确获取 backing bean？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T02:55:15.957

根据[标签的文档`cc:attribute`](http://javaserverfaces.java.net/nonav/docs/2.0/pdldocs/facelets/composite/attribute.html)，值`default`必须评估为 a `java.lang.String`。

这就是为什么`#{blockManager}`表达式不能按预期工作的原因，您只能为`String`属性设置默认值。

要查看会发生什么，您可以测试在 taglib 中注册以下函数（[如这里所示](https://stackoverflow.com/questions/2192759/concatenate-strings-in-jsf-jsp-el-and-javascript)）：

```
public static String typeOf(Object o) {
    return o == null ? null : o.getClass().toString();
} 
```

并在这样的复合组件中使用它：

```
<ui:composition>
    <cc:interface>
        <cc:attribute name="param" type="java.lang.Integer" required="true"
            default="1" />
    </cc:interface>
    <cc:implementation>
        <h:outputText value="#{fnc:typeOf(cc.attrs.param)}" />
    </cc:implementation>
</ui:composition> 
```

现在，如果您在不指定 的情况下使用组件`param`，如下所示：

```
<my:comp /> 
```

...它将输出`class java.lang.String`，因为它使用 ValueExpression 的结果作为*默认*属性，即 String `"1"`。

当您指定参数时：

```
<my:comp param="1" /> 
```

...它输出`class java.lang.Integer`，因为现在它是强制转换为为`cc:attribute`.

# actionscript-3 - AS3 - 如何获得一个类的常量数组？

> ID：11596475
> 
> 赞同：6
> 
> 时间：2012-07-21T22:56:07.497
> 
> 标签：actionscript-3, flash, actionscript

```
static public const CONST_1 :String = "CONST_1";
static public const CONST_A :String = "CONST_A";

public var constantsArr :Array; 
```

是否可以在不手动添加类常量值的情况下获得一个数组，如下所示：

```
 constantsArr = [ CONST_1, CONST_A ]; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-21T23:03:35.340

使用 describeType 应该是可能的：

```
public class Constants
{
    static public const CONST_1 :String = "CONST_1";
    static public const CONST_A :String = "CONST_A";
}

var xmlList:XMLList = describeType(Constants).child("constant");

var constantsArray:Array = [];
for each(var key:XML in xmlList)
{
   constantsArray.push(key.attribute("name"));
} 
```

# ajax - Soundcloud 的自定义播放器在 Ajax 调用后消失

> ID：11596476
> 
> 赞同：0
> 
> 时间：2012-07-21T22:56:25.843
> 
> 标签：ajax, soundcloud

[我使用soundcloud 的自定义 javascript 插件](http://developers.soundcloud.com/docs/custom-player)创建了一个自定义播放器，到目前为止一切正常。自定义播放器与单个链接一起工作，该链接提供了您想要包含到页面中的混音或歌曲的链接，例如：

```
<a href="http://soundcloud.com/matas/hobnotropic" class="sc-player">My new dub track</a> 
```

但是现在我正在使用 Ajax 处理最终页面以动态加载页面，播放器（在加载的内容中）在页面加载后消失。

由于我不熟悉自定义播放器如何捕获它的数据，这是第一次尝试使用 Ajax 和 pushstate，我试图找出我必须额外添加到我的 Ajax 的内容，以便该播放仍然有效.

这是我正在使用的ajax：

```
 $(function(){
        var replacePage = function(url) {
            $.ajax({
                url: url,
                type: 'get',
                dataType: 'html',
                success: function(data){
                    var dom = $(data);
                    var title = dom.filter('title').text();
                    var html = dom.filter('#content').html();
                    $('title').text(title);
                    $('#content').html(html);
                }
            });
        }

        $('nav a').live('click', function(e){
            history.pushState(null, null, this.href);
            replacePage(this.href);
            e.preventDefault();
        });

        $(window).bind('popstate', function(){
            replacePage(location.pathname);
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T23:59:20.073

好的，这就是答案。当然，在ajax调用成功后，我必须在调用后再次调用播放器：

```
$('a.sc-player, div.sc-player').scPlayer(); 
```

# html - 高度溢出问题：100%；

> ID：11596477
> 
> 赞同：0
> 
> 时间：2012-07-21T22:56:30.450
> 
> 标签：html, css

[**实时代码**](http://designobvio.us/css/)
我试图让我的 maincontent div`class="mc"`只出现在屏幕底部的 10% 上。允许用户查看尽可能多的背景图像，同时仍然允许用户看到文章的标题。

我的解决方案是将 a 设置`.mc`为 100% 高度并从视口大小的底部减去它。全部在 css 中完成

**CSS**

```
.mc { 
    height:100%; 
    width:100%; 
    background:#fff; 
    z-index:1; 
    position:absolute; 
    bottom:-90%;
} 
```

我的问题：当内容变得大于 100% 高度时，它就会陷入空白。我试过最小高度；不幸的是，它更糟糕地破坏了代码。滚动到[**LIVE CODE**](http://designobvio.us/css/)底部 以查看问题

或者

错误的图片（你可以告诉它从 .box-shadow(); 结束）

![在此处输入图像描述](../Images/00e7efc06bd28efd7eb8a21ca04c91ca.png)

* * *

**这是它应该看起来的样子** ![这是一个简单的模型](../Images/f339f06f09a3013f4510cc20fff9c92e.png)

**HTML**

```
<article class="mc">
<section class="cc">
    <div class="margin_wrapper">
        <header>
            <hgroup>
                <h1 class="at">rocking grass out styles for everyone.</h1>
                <h2 class="ast">The you mice structure for to of almost ability an trying the when designer
                    dissolute that constructing in quickly distinct...</h2>
            </hgroup>
        </header>
        <h3 class="title_header">the good</h3>
        <p>...</p>
        <h3 class="title_header">the bad</h3>
        <p>...</p>
        <h3 class="title_header">the ugly</h3>
        <p>...</p>
    </div>
</section>
<aside></aside> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:20:27.220

您可以将文本容器放在图像下方，并使用负上边距或负上边距`position: relative`来定位内容：

```
margin-top: -10%; 
```

或者

```
position: relative;
top: -10%; 
```

最后一种方法将在内容下方留下一个空白空间以重新定位的大小。

# c# - Unity 2.0：如何解决构造函数依赖关系

> ID：11596480
> 
> 赞同：0
> 
> 时间：2012-07-21T22:57:15.977
> 
> 标签：c#, unity-container

我有一个解析为**RequestManager类的****IRequestManager**类，但我得到 System.IO.FileLoadException 未被用户代码处理 Message=给定的程序集名称或代码库无效。（来自 HRESULT 的异常：0x80131047）

 **```
public class RequestManager : IRequestManager
{
    private IRepository<Request> _requestRepository;
    public RequestManager(IRepository<Request> requestRepository)
    {
        _requestRepository = requestRepository;
    }
    // ...
} 
```

我在 web.config 中注册 IRequestManager 时遇到问题；我需要在 web.config 中创建显式注册 IRepository 吗？

这是我的 web.config

```
<unity xmlns="http://schemas.microsoft.com/practices/2010/unity">
    <alias alias="PerOperationContext" type="UnityWcfExtensions.UnityOperationContextLifetimeManager, UnityWcfExtensions" />
    <container>
      <register type="MRF.Repository.IDbContext, MRF.Repository" mapTo="MRF.Repository.EntityFrameworkCodeFirst.MRFDbContext, MRF.Repository.EntityFrameworkCodeFirst">
        <lifetime type="PerOperationContext" />
        <constructor>
          <param name="nameOrConnectionString" value="MRFContext" type="string" />
        </constructor>
      </register>

      <register type="MRF.Repository.IUnitOfWorkFactory, MRF.Repository" mapTo="MRF.Repository.EntityFrameworkCodeFirst.MRFDbContext, MRF.Repository.EntityFrameworkCodeFirst">
        <lifetime type="PerOperationContext" />
        <constructor>
          <param name="nameOrConnectionString" value="MRFContext" type="string" />
        </constructor>
      </register>

      <register type="MRF.Repository.IRepository`1, MRF.Repository" mapTo="MRF.Repository.EntityFrameworkCodeFirst.GenericRepository`1, MRF.Repository.EntityFrameworkCodeFirst" />
      <register type="MRF.Business.Interfaces.IRequestManager, MRF.Business.Interfaces" mapTo="MRF.Business.RequestManager, MRF.Business">
        <constructor>
          <param name="requestRepository" type="MRF.Repository.IRepository`1[[MRF.Entities.Request, MRF.Entities]]">
            <dependency />
          </param>
        </constructor>

      </register>
      <register type="MRF.Mapping.IMapper`2[[MRF.Entities.Region, MRF.Entities],[MRF.Service.DataContract.Region, MRF.Service.DataContract]], MRF.Mapping" mapTo="MRF.Mapping.AutoMapper.RegionMapper, MRF.Mapping.AutoMapper" />
      <register type="MRF.Mapping.IMapper`2[[MRF.Entities.User, MRF.Entities],[MRF.Service.DataContract.User, MRF.Service.DataContract]], MRF.Mapping" mapTo="MRF.Mapping.AutoMapper.UserMapper, MRF.Mapping.AutoMapper" />
      <register type="MRF.Mapping.IMapper`2[[MRF.Entities.UserPreference, MRF.Entities],[MRF.Service.DataContract.UserPreference, MRF.Service.DataContract]], MRF.Mapping" mapTo="MRF.Mapping.AutoMapper.UserPreferenceMapper, MRF.Mapping.AutoMapper" />
      <register type="MRF.Mapping.IMapper`2[[MRF.Entities.Status, MRF.Entities],[MRF.Service.DataContract.Status, MRF.Service.DataContract]], MRF.Mapping" mapTo="MRF.Mapping.AutoMapper.StatusMapper, MRF.Mapping.AutoMapper" />
      <register type="MRF.Mapping.IMapper`2[[MRF.Entities.Request, MRF.Entities],[MRF.Service.DataContract.Request, MRF.Service.DataContract]], MRF.Mapping" mapTo="MRF.Mapping.AutoMapper.RequestMapper, MRF.Mapping.AutoMapper" />
      <register type="MRF.Mapping.IMapper`2[[MRF.Entities.Series, MRF.Entities],[MRF.Service.DataContract.Series, MRF.Service.DataContract]], MRF.Mapping" mapTo="MRF.Mapping.AutoMapper.SeriesMapper, MRF.Mapping.AutoMapper" />
    </container>
  </unity> 
```

我目前的工作是在我的 WCF 服务中手动创建 RequestManager 的新实例，并传入解析的构造函数参数，如下所示：

```
public DC.Request GetRequest(int requestId)
{
    var requestRepository = this.Container.Resolve<IRepository<BE.Request>>();
    var requestManager = new RequestManager(requestRepository);
    var request = requestManager.GetRequest(requestId);
    var userMapper = this.Container.Resolve<IMapper<BE.User, DC.User>>();
    var seriesMapper = this.Container.Resolve<IMapper<BE.Series, DC.Series>>();
    var statusMappger = this.Container.Resolve<IMapper<BE.Status, DC.Status>>();
    var mapper = this.Container.Resolve<IMapper<BE.Request, DC.Request>>();
    return mapper.Map(request);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T23:32:28.750

结果证明这是一个愚蠢的错误......在 MRF.Interfaces.IRequestManager 的 web.config 中的注册节点中，我使用的是命名空间而不是项目名称！

在我更正了 web.config 之后，我不必添加任何额外的配置，下面的代码就可以正常工作了！

```
public DC.Request GetRequest(int requestId)
{
    var requestManager = this.Container.Resolve<IRequestManager>();
    var request = requestManager.GetRequest(requestId);
    var userMapper = this.Container.Resolve<IMapper<BE.User, DC.User>>();
    var seriesMapper = this.Container.Resolve<IMapper<BE.Series, DC.Series>>();
    var statusMappger = this.Container.Resolve<IMapper<BE.Status, DC.Status>>();
    var mapper = this.Container.Resolve<IMapper<BE.Request, DC.Request>>();
    return mapper.Map(request);
} 
```

所以，而不是

```
<register type="MRF.Business.Interfaces.IRequestManager, MRF.Business.Interfaces" mapTo="MRF.Business.RequestManager, MRF.Business" /> 
```

我必须执行以下操作：

```
<register type="MRF.Business.Interfaces.IRequestManager, MRF.Business" mapTo="MRF.Business.RequestManager, MRF.Business" /> 
```**

# r - 重新计算神经网络的预测值

> ID：11596481
> 
> 赞同：2
> 
> 时间：2012-07-21T22:57:27.543
> 
> 标签：r, neural-network

我在 R 中有以下代码，使用 nnet 包来获取权重和预测值：

```
test <- read.csv('ScaledData.csv',header=TRUE,sep = ",")

ANNtrain <- nnet(Price ~ Sqft + Bedrooms + Bathrooms,test[1:650,],size=2, maxit=5000, linout=TRUE)

ANNtrain$wts

ANNtrain$fitted.values 
```

所以我最终得到了这些权重：

```
b->h1   2.3681687
i1->h1  -0.3898256
i2->h1  1.3565967
i3->h1  -1.8423163
b->h2   1.4826518
i1->h2  0.6584391
i2->h2  0.8964167
i3->h2  -1.3290192
b->o    1.0835755
h1->o   -4.977095
h2->o   4.2466241 
```

我正在尝试重新计算拟合值，例如第一笔交易的拟合值是 0.025014924。

我在每个隐藏节点上使用 sigmoid 函数，我理解为 1/(1+exp(-a)) 其中 a=每个输入变量的加权值的总和。

我已经玩了几个小时了，我很困惑。无论我做什么，我都无法重新计算拟合值。有任何想法吗？linout 参数是否会改变计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:36:40.957

[sigmoid 函数](http://en.wikipedia.org/wiki/Sigmoid_function)不是一个特定的函数。它是一类函数。此类的实例是[逻辑函数](http://en.wikipedia.org/wiki/Logistic_function) `1/(1+exp(-a))`或[双曲正切](http://en.wikipedia.org/wiki/Tanh)。

当您设置时，`linout=TRUE`您选择恒等函数 ( `f(a) = a`) 作为输出层的激活函数，即您实际上在输出层中没有激活函数。

# javascript - 使用 javascript 获取 HttpOnly cookie

> ID：11596485
> 
> 赞同：0
> 
> 时间：2012-07-21T22:59:31.850
> 
> 标签：javascript, cookies, httponly

您知道使用 javascript 访问 HttpOnly cookie 的任何方法吗？我知道这些 cookie 的重点是您将无法以这种方式获取它们（出于安全原因）。但是，现在绝对有办法实现这一目标吗？世界各地的一些黑客没有找到实现这一目标的方法吗？我真的需要通过javascript（而不是任何其他方式）获取这些cookie。如果你知道怎么做，那将非常有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T23:12:57.133

从 javascript 中只有 HttpOnly-cookies 的加密版本可用，并且由于密钥是为每台计算机唯一生成的，因此 cookie 不能在其他计算机上使用（除非被破解）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T23:25:07.883

不，如果有办法，它将是特定于浏览器的，并且可能很快就会被修补。您正在寻找的是一个安全漏洞，一旦被发现就不会持续很长时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-29T21:51:12.187

它可以通过小程序或 npapi 插件

请求服务器建立连接，它将以 httpOnly cookie 响应

将它从小程序传递给 JavaScript

这是一个安全漏洞，这就是 chrome 和 Firefox 停止支持 npapi 的原因

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-03-05T17:56:29.883

我找到了一种访问纯 HTML cookie 的方法。获取 EditTThisCookie 扩展，然后打开您想要的页面。单击顶部的扩展名（又名 cookie）查找所需的 cookie，单击它，然后取消选中 http only 按钮，现在可以通过`document.cookie`.

# html - 样式 css 标签会在正文中呈现吗？

> ID：11596486
> 
> 赞同：6
> 
> 时间：2012-07-21T22:59:38.503
> 
> 标签：html, css, document-body, html-head

我正在使用 CMS，显然它有一个错误，不允许我向`<head>`博客文章添加任何内容。它将所有内容插入到主体中，在大多数情况下可以正常工作，但在这样的代码实例中：

```
<style type="text/css">
 .slideshow img { display: none }
 .slideshow img.first { display: block }
</style> 
```

如果将这种类型的代码放在`<body>`所有主要浏览器的标签中，会运行吗？（IE8+、Firefox、Chrome 和 Safari。）通常它总是在`<head>`页面中。

注意：这似乎在 FF 15 中有效，但我不确定其他浏览器。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T23:22:59.303

正文中有样式标签是无效代码。

每个浏览器都会尝试以一种有意义的方式使用无效代码。某些浏览器似乎无论如何都使用样式规则，但您不能依赖于所有当前和未来浏览器的行为。另一个也很有意义的行为是忽略无效的样式标签。

请注意，即使在同一个浏览器中，行为也可能会有所不同，具体取决于页面是以标准兼容模式还是怪癖模式呈现。在标准遵从模式（这是首选模式）下，浏览器往往更加严格并忽略无效代码，而不是试图猜测作者对代码的意图。

* * *

### 2014 年更新：

在 HTML5 中，您可以在 body 元素中使用样式标签。在任何不支持 HTML5 的旧浏览器中，或者如果您没有 HTML5 文档类型，它仍然是无效代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T23:13:46.207

Javascript 是另一个想法，因为`<script>`元素可能出现在正文中。当然，这取决于用户是否允许使用 Javascript。

我看不到另一种选择（当然，除了`style`到处都是属性）。

或者只是在体内使用它，即使这会让@Cole 大喊大叫？当`script`元素[在 HTML 3.2 中作为占位符引入](http://www.w3.org/TR/REC-html32#script)时，规范说“用户代理应该隐藏这些元素的内容”。所以至少有一些希望所有浏览器都会隐藏它（即使他们不解释 is as style）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T23:14:27.310

如果您可以修改由 CMS 加载的 CSS 文件（即主题类型样式表），则将该代码放在 CSS 文件的底部并使用注释来表示自定义样式（供您将来参考），或使用[**CSS Import**](http://www.cssnewbie.com/css-import-rule/)使用主题搭载 CSS 的[**规则。**](http://www.cssnewbie.com/css-import-rule/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-22T05:02:41.247

`style`是的，即使在内部，浏览器也会识别并应用元素`body`。他们甚至“向后”应用它，即您可以对出现在元素之前的`style`元素进行样式设置。

这很容易检查出来，但更难预测未来。您并不孤单（在 CMS 中存在这样的限制是相当普遍的——不是真正的错误，而是故意的限制），并且有很多 Web 内容必须使用这样的功能。因此，浏览器不太可能停止支持它，尽管有一天他们可能会想到以“标准模式”拒绝它。

HTML5 草案目前不建议对此进行标准化。相反，他们的想法是允许`style`进入，`body`但仅在使用`scoped`属性时才允许，这意味着`style`元素的效果仅限于封闭块。这很奇怪，但与*没有*属性的`style`元素在.*`scoped``body`*

 *当然，如果有合理的处理方式，则不应使用此功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T23:14:36.623

答案是不，它不应该在任何主要浏览器中呈现。

正如一些评论指出的那样，您不应该这样做。您将违反标准，这意味着结果未定义——即它应该可以工作，但您无法确定。

我很欣赏在某些情况下（即使用设计不佳的 CMS 时）它可能是唯一可用的选项，但通常这样做是一件坏事。

如果您确实需要这样做，并且您对此感到担心，一种解决方案是将内容放入 HTML 注释中：

```
<style type="text/css">
<!--
 .slideshow img { display: none }
 .slideshow img.first { display: block }
-->
</style> 
```

这应该阻止它被不喜欢`<style>`在正文中的浏览器看到。

另一种选择是将其放入外部样式表文件中，并使用`<style>`标签包含它。这应该仍然有效，但由于该元素不会有任何直接内容，因此对于表现不佳的浏览器来说，它不会显示任何内容。

希望有帮助。*

# objective-c - '+entityForName: nil 不是合法的 NSManagedObjectContext 参数 - 核心数据

> ID：11596487
> 
> 赞同：73
> 
> 时间：2012-07-21T22:59:47.433
> 
> 标签：objective-c, ios, xcode, exception, core-data

我已将所有相关代码添加到 App Delegate，并且能够添加到数据模型并从 applicationDidFinishLaunchingWithOptions 中的数据模型中获取。

当我试图在我的视图控制器中写入数据模型时，我的问题就出现了。我已将此代码添加到头文件中：

```
NSFetchedResultsController *fetchedResultsController;
NSManagedObjectContext *managedObjectContext;

@property (nonatomic, retain) NSFetchedResultsController *fetchedResultsController;
@property (nonatomic, retain) NSManagedObjectContext *managedObjectContext; 
```

并将此代码添加到我的实现文件中：

```
NSManagedObjectContext *context = [self managedObjectContext];
NSManagedObject *model = [NSEntityDescription
                          insertNewObjectForEntityForName:@"Events" 
                          inManagedObjectContext:context];
[model setValue:@"Sample Event" forKey:@"eventName"];

NSError *error;
if (![context save:&error]) {
    NSLog(@"Couldn't save: %@", [error localizedDescription]);
} 
```

但是，我收到以下错误：

```
'NSInvalidArgumentException', reason: '+entityForName: nil is not a legal NSManagedObjectContext parameter searching for entity name 'Events'' 
```

有谁知道发生了什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-21T23:26:23.127

我忘记将上下文传递给视图控制器。菜鸟错误。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-11-24T05:53:50.623

在开始从数据库中获取数据之前，您可以通过包含以下代码来传递上下文：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate];
context = [appDelegate managedObjectContext]; 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-12-26T16:09:32.530

如果你使用 segues，如果你不将上下文传递下去，你会遇到同样的问题。在启动 segue 的类的 prepareForSegue 方法中使用此代码：

```
[[segue destinationViewController] setManagedObjectContext:self.managedObjectContext]; 
```

当然，这假设您将上下文保存在一个名为“managedObjectContext”的属性中。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-01-20T07:53:40.290

你应该把它添加到你的viewController：

```
 id delegate = [[UIApplication sharedApplication] delegate];
    self.managedObjectContext = [delegate managedObjectContext]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-27T17:31:14.003

我遇到了这个问题，一位同事帮助我解决了这个问题。如果您收到此错误消息：“entityForName：nil 不是搜索实体名称的合法 NSManagedObjectContext 参数”。您在 coredata 模型中进行了更改。我认为问题**可能不在于代码**。

解决方案可以很简单。尝试以下选项之一：

*   只需从您正在测试的设备中删除应用程序，它应该具有旧版本的模型。
*   使用 Xcode 创建另一个数据库版本，>Editor>Add Model Version。

希望能帮助到你。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-15T17:06:55.893

在我的情况下，`.xcdatamodeld`在 AppDelegate 中被贴错标签：

```
 let container = NSPersistentContainer(name: "name of data model") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-14T17:08:04.063

如果目标视图控制器嵌入在 NavigationController 中，则需要适当地设置上下文，如下所示 -

```
 self.mydetailViewController = [[[segue destinationViewController] viewControllers] objectAtIndex:0];
 [self.mydetailViewController setManagedObjectContext:self.managedObjectContext]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-20T15:09:02.960

我是惰性初始化的粉丝。这样，如果您需要注入一个新的上下文进行测试，您可以，或者如果您在那里设置您的 MOC，它将从应用程序委托中获取它的上下文。

```
class.h
@property (strong, nonatomic,getter=getManagedObjectContext) NSManagedObjectContext *managedObjectContext;

class.m
    -(NSManagedObjectContext *)getManagedObjectContext {
        if (_managedObjectContext) {
            return _managedObjectContext;
        }
        _managedObjectContext = [[(AppDelegate *)[[UIApplication sharedApplication]delegate]sharedDataModel]managedObjectContext];
        return _managedObjectContext;
    } 
```

# django - 出现在 URL 参数中的签名/过期/访问密钥 ID。Django/博托/S3

> ID：11596488
> 
> 赞同：21
> 
> 时间：2012-07-21T22:59:57.637
> 
> 标签：django, amazon-s3, boto

缩略图 URL 中包含参数。我不确定为什么。我认为它们与我们正在使用的 sorl-thumbnail 或 boto 存储有关。如何从 URL 中删除附加参数？它们是来自 boto/s3 还是 sorl。我不知道如何调试。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-23T17:24:07.520

使用：AWS_QUERYSTRING_AUTH = False

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T23:37:09.473

添加的额外参数用于实现[Query String Authentication](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth)。这允许您对存储在 S3 中的私有资源的 URL 进行预签名。只要有人拥有预签名的 URL（并且尚未过期），他们就可以访问这些资源，即使它们不是公开可读的。

如果没有额外的参数，就无法提供对这些私有 S3 资源的公共访问。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-20T01:22:47.917

对我有用：AWS_QUERYSTRING_AUTH = False

使用这个[https://github.com/mstarinteractive/django-s3storage](https://github.com/mstarinteractive/django-s3storage)

```
from myapp.s3storage import S3BotoStorage
from django.contrib.staticfiles.storage import CachedFilesMixin

class CachedStaticS3BotoStorage(CachedFilesMixin, S3BotoStorage):

    """Extends S3BotoStorage to save static files with hashed filenames."""
    pass
StaticRootS3BotoStorage = lambda: CachedStaticS3BotoStorage(location='static') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-11T11:03:27.393

这是奇怪的行为：Google Docs 预览器将工作并显示没有参数的预览，但如果 boto 附加签名会说没有可用的预览。

`<iframe src="{% trans "https://docs.google.com/viewer?embedded=true&amp;url=" %}{{ document.file.url }}" width="451" height="390" style="border: none;"></iframe>`

我肯定错过了什么。

# python - 以编程方式登录 OKC

> ID：11596490
> 
> 赞同：1
> 
> 时间：2012-07-21T23:00:08.633
> 
> 标签：python, urllib2

我正在尝试以编程方式登录 OKCupid ( [www.okcupid.com/login](http://www.okcupid.com/login) ) 以获取一些用户数据。我试图组合一个 python 脚本来执行此操作，但似乎做错了什么。

我希望从这个示例脚本中获得的行为是登录，然后重定向到主页，然后打印 HTML 响应。这是我到目前为止所拥有的：

```
import urllib, urllib2, cookielib

# cookie storage
cj = cookielib.CookieJar()
opener = urllib2.build_opener(
    urllib2.HTTPCookieProcessor(cj),
    urllib2.HTTPRedirectHandler
    )
# Useragent
opener.addheaders.append(('User-agent','Mozilla/4.0'))

url = 'http://www.okcupid.com/login'
login_data = urllib.urlencode({
    'username':'myusername',
    'password':'mypassword',
    })

req = urllib2.Request(url,login_data)
resp = urllib2.urlopen(req)
the_page = resp.read()

print the_page 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-09T16:01:19.290

根据您正在做的事情，这是我正在做的登录示例，然后转到消息并保存所有用户名

```
import urllib, urllib2, cookielib
import re
# cookie storage
cj = cookielib.CookieJar()
opener = urllib2.build_opener(
    urllib2.HTTPCookieProcessor(cj),
    urllib2.HTTPRedirectHandler
    )
# Useragent
opener.addheaders.append(('User-agent','Mozilla/4.0'))

url = 'http://www.okcupid.com/login'
login_data = urllib.urlencode({
    'username':'Mobius1',
    'password':'raptor22',
    })

urllib2.install_opener(opener)

res = opener.open(url, login_data)

print res.url #should be http://www.okcupid.com/home if successful
res.close()

#navigate profile after successful login
res = opener.open('http://www.okcupid.com/messages')
the_page = res.read() #read content at URL

#find all usernames from page content with pattern /profile/username?
UserNameList = re.findall(r'/profile/([\w\.-]+)?', the_page)
print UserNameList

with open('OkC_messages.html', 'w') as fid: #save the_page as html
    fid.write(the_page) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:20:46.807

想通了错误。我做了开瓶器，然后没有使用它。这是修复：

```
import urllib, urllib2, cookielib

# cookie storage
cj = cookielib.CookieJar()
opener = urllib2.build_opener(
    urllib2.HTTPCookieProcessor(cj),
    urllib2.HTTPRedirectHandler
    )
# Useragent
opener.addheaders.append(('User-agent','Mozilla/4.0'))

url = 'http://www.okcupid.com/login'
login_data = urllib.urlencode({
    'username':'myusername',
    'password':'mypassword',
    })

req = urllib2.Request(url,login_data)
resp = opener.open(req)
the_page = resp.read()

print the_page 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T21:55:14.047

查看[https://github.com/IvanMalison/okcupyd](https://github.com/IvanMalison/okcupyd)。它完全符合您的需要，并且提供了一些不错的抽象。

# http - 协议相对 URL 方法在 Chrome 中不起作用

> ID：11596491
> 
> 赞同：3
> 
> 时间：2012-07-21T23:00:15.563
> 
> 标签：http, google-chrome, ssl, https, protocol-relative

喜欢在 Stackoverflow 上搜索答案，但这是我的第一篇文章。希望其他人也觉得这很有用！

我有一个需要 https 的网站，因为它托管 facebook 应用程序。我已经设置了它（专用 IP 和 SSL 证书），但是当我通过 https 访问它时，我收到以下警告：

此页面包含不安全的内容。

我做了一些研究，发现这是一个普遍的问题。修复我们的内部文件并不是什么大问题，但我们严重依赖外部资源，例如 jquery 库（它是 http 而不是 https）。我使用了协议相对 URL 方法（无法发布链接，因为我仅限于两个超链接，所以请参阅下面的评论）这似乎适用于很多人。但是，当我在 Chrome 中进行更改时，我仍然收到此警告：[阻止] [https://www.greetfeet.com/上的页面运行来自](https://www.greetfeet.com/)[http://code.jquery.com/mobile/1.1](http://code.jquery.com/mobile/1.1.0/jquery.mobile.structure-1.1.0.min.css)的不安全内容。 [0/jquery.mobile.structure-1.1.0.min.css](http://code.jquery.com/mobile/1.1.0/jquery.mobile.structure-1.1.0.min.css)

如果我遇到这个问题，我只能假设我的客户也会遇到。知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:28:39.920

Google 在 HTTP 和 HTTPS 上托管常用库（包括 jQuery 和 jQueryUI），例如：

[https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js)

（尽可能使用它，您的用户可能已经在他们的浏览器缓存中拥有它，从而使您的网站加载速度更快。）

除非通过 HTTPS 可靠地向公众提供，否则您可能需要自己托管其他东西。

仅当某些人通过 HTTP 访问您的站点而其他人通过 HTTPS 访问您的站点时才需要协议相对 URL：使资源引用“协议相对”将使人们使用与检索引用页面本身相同的协议来请求资源。如果您的站点是 HTTPS-only，那么您甚至不需要使用协议相对 URL，您可以在任何地方硬编码 https://。但它不会受到伤害，因此您仍然可以使用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-22T08:31:05.697

一个指向 JQuery 的 https URL？如果它不起作用，则问题出在站点上，而不是在您的代码中。如果该站点使用非相对的 http: URL 发送页面，并且您通过 https 访问它，则您从事的是混合内容检索。要么不访问这些站点，要么不使用 HTTPS。

# multithreading - 如何限制perl中的最大并行线程数

> ID：11596493
> 
> 赞同：7
> 
> 时间：2012-07-21T23:00:41.697
> 
> 标签：multithreading, perl

我有一个程序（Perl）启动大量线程（每个线程负责基于数据处理创建图形）。我开始使用的每个线程：

```
my @threads //list to store threads that have been launched

push @threads,threads->create(\mySubName,params...); 
```

线程正确触发，但过了一会儿，在我打开其中几个之后，Perl 解释器崩溃（我认为它与内存有关？）。所以我的解决方案是限制我一次打开的线程数，我选择了 15 个。我想在每个创建行之前添加一个子程序，以检查是否可以在我等待时触发下一个线程或执行睡眠一个完成。这就是我尝试做到的方式。

```
sub checkThreads{
    my $addThread = 0;
    until($addThread){
        my $totalThreads = 0;
        foreach my $task (@threads){
            if($task->is_running()){$totalThreads++;}
        }
        if($totalThreads <= 15 ){
            print "Ok to add new thread, carry on!\n";
            $addthread = 1;
        }else{
            print "Waiting for $totalThreads threads to fire next one...\n";
            sleep 2;
        }
    }
} 
```

所以每次我想创建一个新线程时，我都会调用

```
&checkThreads; 
```

在我等待一些线程清理时，这会造成延迟。问题是，当我调用那个 sub 时，我点击了我检查的那一行：

```
$task->is_running() 
```

程序退出并停止运行，没有任何错误或警告。我只想要一个计算正在运行的线程来限制它们的子程序。

如何成功执行此计数？

我尝试过的其他事情正在评估以下行：

```
scalar(threads->list()); 
```

但这给了我一个奇怪的价值，就像它是一个我认为看起来像这样的无福参考：

```
threads=SCALAR(0x80fea8c) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T01:55:32.060

[Thread::Semaphore](https://metacpan.org/module/Thread::Semaphore)提供了一个[计数信号量](http://en.wikipedia.org/wiki/Counting_semaphore)来限制并发：

```
my $sem = Thread::Semaphore->new(15); # max 15 threads
my @threads = map {
    # request a thread slot, waiting if none are available:
    $sem->down;
    threads->create(\&mySubName, @params)
} 0..100;
$_->join for @threads; 
```

在你的功能中：

```
sub mySubName {
    do_stuff();
    # release slot:
    $sem->up;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T01:28:02.123

看文档，

```
my $count = threads->list(); 
```

应该工作，与你所说的相反。*您*正在使用的线程版本的文档说什么？好吧，您可以使用以下方法作为解决方法。

```
my $count = () = threads->list(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T00:50:46.950

```
man perlthrtut

What Threads Are Running?
   "threads->list()" returns a list of thread objects, one for each thread
    that's currently running and not detached.  Handy for a number of 
```

换句话说，找出threads->list() 返回的列表中有多少项目，然后你就知道了。

您可能想调查[Thread::Pool](http://search.cpan.org/~elizabeth/Thread-Pool-0.33/lib/Thread/Pool.pm)或其他 cpan 包，看看是否其他人已经为您完成了繁重的工作。

# java - 管理 Java EE Web 应用程序工件版本是否值得？

> ID：11596494
> 
> 赞同：0
> 
> 时间：2012-07-21T23:00:51.057
> 
> 标签：java, jakarta-ee, maven

我有几个基于 Maven 的 Java Web 应用程序，我不发布，只部署。

我已经意识到很长一段时间以来，我都没有更改**生成的工件的****版本**，因为它只会增加工作 - 更改所有依赖项等的版本。

 **即使我在一个团队中工作，我们也不太关心版本，并且一直有 1.0.0-SNAPSHOT，而是共享代码并全部重建。

我的问题：我将使用工件版本做什么？我错过了一些利用它的好方法吗？

更新：这个问题**不是**关于证明 Maven 和依赖关系的合理性。这是关于**我的网络应用程序的版本**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:43:19.047

仅根据自己的经验，我决定不跟踪 Web 应用程序工件的版本。由于它不公开并且我们是一个小团队，我们只使用 git 标签进行版本控制，并将 maven 工件始终保持为 1.0-SNAPSHOT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:47:37.503

我假设这个问题真的是为了证明使用 Maven 的开销是合理的？在这种情况下，它与以下内容有关：

*   [使用源代码签入依赖 jar 时使用 Maven 是否仍然有意义？](https://stackoverflow.com/questions/11438980/does-it-still-make-sense-to-use-maven-when-dependent-jars-are-checked-in-with-so/11440495)

在我看来，对二进制文件进行版本控制与对源代码进行版本控制一样重要：

*   如果您依赖第 3 方软件库，它们会随着时间而改变。这些库反过来又依赖于其他库。开源世界发展迅速，虽然它并不有趣，但至少像 Maven/ivy 这样的工具为我们提供了管理它的工具。
*   您发布的软件会随着时间而变化。假设您有多个开发人员，是否曾经注意到在您部署的环境中发生了无法重现的奇怪事情？如果没有二进制版本控制，您如何回滚或重新创建问题？
*   假设最坏的情况，如果直接从开发人员的 PC 上进行部署，您如何确定他/她实际上已经提交了更改？

为了获得 Maven 的全部功能，我强烈建议您在本地使用[Nexus等 Maven 存储库管理器。](http://www.sonatype.org/nexus/)除了帮助处理 3rd 方依赖项之外，它也是存储应用程序版本的理想场所。即使您继续生成 1.0.0-SNAPSHOT，Nexus 也会确保每个应用程序构建都存储为存储库中唯一的时间戳修订。随着时间的推移，可以将 Nexus 配置为清除您的旧 SNAPSHOTS。**

# javascript - HTML 多文件上传队列

> ID：11596496
> 
> 赞同：3
> 
> 时间：2012-07-21T23:01:34.130
> 
> 标签：javascript, html

我正在寻找某种方法来为文件上传按钮创建各种队列。使用以下代码：

```
<input type = 'file' name = 'file[]' multiple = 'multiple' /> 
```

现代浏览器允许您一次选择多个文件进行上传。但是，如果您再次单击该按钮并选择更多文件（例如从不同的文件夹中），则会删除当前选择的文件。有没有办法让新选择的文件集不覆盖旧集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:10:32.377

虽然我不确定 HTML5，但出于安全原因，以前版本的 JS 不允许您这样做。您不能更改用户选择上传的文件，否则您可以更改文件路径并从他们的硬盘驱动器上传您想要的任何文件（例如，包括密码文件）。

对此的一种解决方案是拥有多个文件输入，而不是一个需要多个文件的输入。在用户选择要上传的文件时动态添加它们。例如，您可以将 onchange 侦听器添加到最新的文件输入，当用户选择了一个文件时，删除该侦听器，然后添加另一个文件输入（将 onchange 侦听器附加到此新文件输入）。当然，对于这些输入，您需要某种增量命名方案，并且您的服务器将需要处理生成的上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T23:09:15.607

是的，我使用了一种方法。

听听这个; 当用户选择文件时，使用 CSS 隐藏此输入并生成另一个具有不同名称的输入。您将需要一个信息，其中有多少，因此您可以添加一个初始值为 1 的隐藏输入，并且每次都可以 +1。

希望这可以帮助。

# ruby-on-rails - Heroku Rails 设置 ActionView::Template::Error （未预编译）：

> ID：11596498
> 
> 赞同：0
> 
> 时间：2012-07-21T23:01:48.580
> 
> 标签：ruby-on-rails, heroku

我正在尝试设置我的第一个 Heroku 托管的 rails 应用程序，并且遇到了我认为是预编译/管道问题。

我已遵循所有适当的步骤：

```
bundle exec rake assets:precompile    
git add public/assets
git commit -m "vendor compiled assets"git push heroku 
```

但我收到以下错误：

```
ActionView::Template::Error ( isn't precompiled): 
```

请注意，错误消息文本中的“未预编译”之前有一个空白（“”） - 因此它没有指定丢失的预编译文件的名称！

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T23:44:35.563

这是由于 Carrierwave 和我的一个模型没有默认图像。不知道我理解为什么这是一个问题 - 但添加它解决了它：

```
https://github.com/jnicklas/carrierwave#providing-a-default-url 
```

请参阅上一个线程：

```
http://stackoverflow.com/questions/11068190/actionviewtemplateerror-isnt-precompiled?lq=1 
```

# extjs3 - extjs 3.4中按钮内的formPanel

> ID：11596500
> 
> 赞同：0
> 
> 时间：2012-07-21T23:01:53.563
> 
> 标签：extjs3

在互联网上搜索后，我不明白我的代码中的窍门在哪里。我想要做的是将表单面板放在按钮内。看起来很简单，但基本上不知道我错过了什么。我使用 ext js 3.4。我在这里找到了这个很酷的代码：http: [//jsfiddle.net/ErnestoRR/bYMP5/](http://jsfiddle.net/ErnestoRR/bYMP5/)。这基本上是我需要的，但它在 ext js 4.0 中。在这里，我向您发送我所拥有的：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="ext/resources/css/ext-all.css"></link>
<link rel="stylesheet" type="text/css" href="ext/resources/css/xtheme-gray.css"></link>
<link rel="stylesheet" type="text/css" href="ext/examples/shared/examples.css"></link>
<script type="text/javascript" src="ext/adapter/ext/ext-base.js"></script>
<script type="text/javascript" src="ext/ext-all.js"></script>
<script type="text/javascript" src="geoext/lib/GeoExt.js"></script>

</head>
<body>
<script type="text/javascript">

Ext.onReady(function() {

// Print
        var formPanel = new Ext.form.FormPanel(
        {
                id: "myformpanel",
//                collapsed: true,
                width: 200,
                bodyStyle: "padding:5px",
                labelAlign: "top",
                defaults:
                {
                        anchor: "100%"
                },
                items:
                [
                {
                        xtype: "textarea",
                        name: "comment",
                        value: "",
                        fieldLabel: "Comment"
                },
                {
                        xtype: "combo",
                        displayField: "name",
                        fieldLabel: "Layout",
                        typeAhead: true,
                        mode: "local",
                        triggerAction: "all"
                },
                {
                        xtype: "combo",
                        displayField: "name",
                        fieldLabel: "Resolution",
                        tpl: '<tpl for="."><div class="x-combo-list-item">{name} dpi</div></tpl>',
                        typeAhead: true,
                        mode: "local",
                        triggerAction: "all",

                        // the plugin will work even if we modify a combo value
                        setValue: function(v)
                        {
                                v = parseInt(v) + " dpi";
                                Ext.form.ComboBox.prototype.setValue.apply(this, arguments);
                        }
                },
                {
                        xtype: "combo",
                        displayField: "name",
                        fieldLabel: "Scale",
                        typeAhead: true,
                        mode: "local",
                        triggerAction: "all",
                },
                {
                        xtype: "textfield",
                        name: "rotation",
                        fieldLabel: "Rotation"
                }
                ],
                buttons:
                [
                {
                        text: "Create PDF",
                        handler: function()
                        {
                                // convenient way to fit the print page to the visible map area
                                printPage.fit(true)
                        }
                }
                ]
        }
        );

/*
        var displayPanel = new Ext.Panel({
                id: "myformpanel",
                width    : 300,
                height   : 500,
                layout: 'fit',
                items    : [formPanel]
  });
*/

        var action = new Ext.Action({
            text: 'toggle print panel',
            handler: function(){
                var winPanel = Ext.getCmp("myformpanel");
                if(!winPanel)
                function showWindow()
                { 
                        winPanel.show(); 
                }

                function hideWindow()
                { 
                        Ext.getCmp("myformpanel").hide(); 
                }
                }
        });

        var mapPanelTbar = new Ext.Toolbar({
            height: 30,
            items: [
                new Ext.Button(action)
            ]
        });

        var mapPanel = {
                region: 'center',
                html: 'map panel content',
                tbar: mapPanelTbar
            };

        var viewport = new Ext.Viewport({
            layout: 'border', // main viewport 
            items: [
                mapPanel // center part of the main region
            ]
        });

});
</script> 

</body>
</html> 
```

感谢您的支持，在此先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:23:23.447

因为没有人回答我，我回答自己=）这里是解决方案：

```
Ext.onReady(function() {

PanelMain = Ext.extend(Ext.Panel, {
    height: 300,
    width: 500,
    title: 'My Panel',

    initComponent: function() {
        Ext.applyIf(this, {

            tbar: {
                xtype: 'toolbar',
                items: [
                {
                    xtype: 'button',
                    text: 'Impresora',
                    menu: {
                        xtype: 'menu',
                        items: [{
                            xtype: 'container',
                            items: [{
                                xtype: 'form',
                                bodyPadding: 5,
                                items: [{
                                    xtype: 'textfield',
                                    fieldLabel: 'Titulo'
                                }, {
                                    xtype: 'textfield',
                                    fieldLabel: 'Comentario'
                                }, {
                                    xtype: 'combo',
                                    fieldLabel: 'Resolucion'

                                }, {
                                    xtype: 'button',
                                    text: 'boton'
                                }]
                            }]
                        }]
                    }
                }]
            }

        });

        PanelMain.superclass.initComponent.call(this);
    }

});

Ext.reg( 'panelmain', PanelMain ); // register xtype

var panel = new PanelMain({
    renderTo: Ext.getBody()
});

}); 
```

# android - 如何在android相机图像上运行原型算法？

> ID：11596501
> 
> 赞同：1
> 
> 时间：2012-07-21T23:01:57.793
> 
> 标签：android, jpeg, android-camera, augmented-reality

我有一个 Android 应用程序的想法，它依赖于我实时处理来自手机摄像头的图像（想想[Word Lens](http://questvisual.com/us/)必须做的处理）。我想通过在静态图像上运行它来在 Python 中对我的算法进行原型设计，但我希望静态图像与通常从 Android 手机摄像头接收的格式相匹配（我不想为 RGB 制作工作算法然后找出 Android 的相机 API 为您提供 HSV 字节数组）。两个问题：

1.  格式是什么？（或者至少是最常见的，因为 Android 硬件各不相同）
2.  如何在 Linux 上将我的 jpg 测试图像转换为这种格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:16:18.420

所有 Android 相机都需要支持两种 YUV 格式，NV21 和 YV12（请参阅[setPreviewFormat 文档），用于](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setPreviewFormat%28int%29)[setPreviewCallback](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewCallback%28android.hardware.Camera.PreviewCallback%29 "设置预览回调")启用的应用程序绑定回调。

有些设备可能支持其他格式（RGB、YUYV2 等），但这两种是强制性的，所以最好选择其中一种。YV12 的效率更高，尽管这取决于所讨论的硬件。

至于第二个，您可能可以使用某种实用程序（如[ImageMagick](http://www.imagemagick.org/script/index.php) ）进行颜色转换，但关于这些格式的另一点是它们是针对色度（颜色）平面进行子采样的；NV21 和 YV12 在两个维度上都将颜色格式降低了 2 倍。例如，如果图像尺寸为 640x480，则 Y（亮度）通道将为 640x480，但 U 和 V 通道都只有 320x240。您可能需要自己进行二次采样，因为大多数图像库不公开这种格式（JPEG 图像实际上通常以类似的二次采样 YUV 格式存储，但大多数库在给您之前转换回全 RGB数据）。

编辑：附加说明

或者，如果您的算法在 GPU 上运行良好，您可以使用相机外的[setPreviewTexture](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewTexture%28android.graphics.SurfaceTexture%29)路径，这样您就可以在 GPU 着色器中处理图像数据。在这种情况下，数据将始终为 RGB，在具有 OpenGL 2.0 的 GLSL 着色器中作为纹理访问。

# php - Mysql PDO准备执行计数（PHP）

> ID：11596505
> 
> 赞同：1
> 
> 时间：2012-07-21T23:02:13.673
> 
> 标签：php, mysql, pdo

当前我正在尝试使用用户输入查询 COUNT(*)，所以我想准备它，但是当我这样做时没有响应，我也使用了这个： [Row count with PDO](https://stackoverflow.com/questions/883365/count-with-pdo) as example，（准备和查询) 但它们似乎都不起作用。为什么？没有理由...

```
$count = $con->query("SELECT COUNT(*) FROM $table WHERE senha='$senha' AND var='{$ar[$i]}'")->fetchColumn();
    if($count!=0){
        $q = $con->prepare("UPDATE $table SET value=':value' WHERE senha=':senha' AND var=':var'");
        $q->execute(array(':senha' => $senha, ':value' => $ar[$i+1], ':var' => $ar[$i]));
    }else{
        $q = $con->prepare("INSERT INTO $table (id,senha,var,value) VALUES (NULL, ':senha', ':var', ':value')");
        $q->execute(array(':senha' => $senha, ':var' => $ar[$i], ':value' => $ar[$i+1]));
    } 
```

当我使用他的第一个示例时（使用准备而不是查询使用数组传递值）根本不起作用，查询返回一个数字但不起作用`if`（`update`或`insert`）部分我已经尝试了一堆东西和输出，没有任何工作...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T01:07:46.190

当您使用与 PDO 绑定的参数时，不应包含单引号。因此将您的 UPDATE 和 INSERT 查询更正为以下内容：

```
$q = $con->prepare("UPDATE $table SET value=:value WHERE senha=:senha AND var=:var"); 
```

和

```
$q = $con->prepare("INSERT INTO $table (id,senha,var,value) VALUES (NULL, :senha, :var, :value)"); 
```

# php - 如何在 Agile Toolkit 中使用模型字段或表达式进行数学运算

> ID：11596506
> 
> 赞同：0
> 
> 时间：2012-07-21T23:02:30.743
> 
> 标签：php, user-interface, frameworks, atk4

atk4.2.1

我有这个模型：

```
class Model_Cargo extends Model_Table {
public $table='cargo';
function init(){
    parent::init();

    $this->hasOne('Alumno');
    $this->hasOne('Plan');

    $this->addField('fecha')->type('date');
    $this->addField('fechaCreacion')->type('date');
    $this->addField('fechaVencimiento')->type('date');
    $this->addField('name');
    $this->addField('monto')->type('money');
    $this->addField('cancelado')->type('boolean')->defaultValue(false);

    $this->hasMany('Abono');
    $this->addExpression('abonos')->set($this->refSQL('Abono')->sum('monto'));
   }
} 
```

我想用两个字段进行数学运算 + 或 -：我实际上想用表达式 'abonos' 减去字段 'monto' 我该怎么做？

让我们这样说：

```
$this->addExpression('balance')->set('monto'-'abonos');
//this does not work 
```

我也想在这些字段相等的地方添加条件......我可以这样做吗？

比如：

```
$this->addCondition('monto','abonos');
//this does not work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:15:20.307

我创建了一个示例来说明如何在表达式中使用计算字段：

[http://agiletoolkit.org/codepad/model/def](http://agiletoolkit.org/codepad/model/def)

对于您的问题，您需要这样的东西：

```
$this->addExpression('balance')->set(function($m,$q){
    return $q->expr('[f1] - [f2]')
        ->setCustom('f1',$m->getElement('monto'))
        ->setCustom('f2',$m->getElement('abonos'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:50:06.070

`$this->addExpression("balance")->set("monto - abonos");`就是这样 - sql 表达式。

那么你也能：

`$this->addCondition("balance", ">", 0);`或任何你需要的。

# php - 创建数组php的问题

> ID：11596508
> 
> 赞同：0
> 
> 时间：2012-07-21T23:03:00.367
> 
> 标签：php

我正在编写一个 PHP 应用程序，其中一个功能是能够查询我们所有表中的基因交互`(gene_r, genes_newL_dn, genes_newL_up, genes_oldL_up, genes_oldL_dn)`。所以我有以下`PHP`功能可以一次查询所有这些数据库。

```
public function getAllInteractions($input){
    $data = array();

    $sql_list = (
        "SELECT * FROM genes_r JOIN drugs_r ON drugs_r.id = genes_r.id WHERE drug_name='$input' OR gene_name='$input'",
        "SELECT * FROM genes_newL_dn JOIN drugs_newL_dn ON drugs_newL_dn.id = genes_newL_dn WHERE drug_name='$input' OR gene_name='$input'",
        "SELECT * FROM genes_newL_up JOIN drugs_newL_up ON drugs_newL_up.id = genes_newL_up WHERE drug_name='$input' OR gene_name='$input'",
        "SELECT * FROM genes_oldL_dn JOIN drugs_oldL_dn ON drugs_oldL_dn.id = genes_oldL_dn WHERE drug_name='$input' OR gene_name='$input'",
        "SELECT * FROM genes_oldL_up JOIN drugs_oldL_up ON drugs_oldL_up.id = genes_oldL_up WHERE drug_name='$input' OR gene_name='$input'"
    );

    foreach($sql_list as $sql){
        $query = $this->db->query($sql);
        // case 1 : SQL Query invalid / empty results
        if(!$query || $query->num_rows() == 0) {
            continue;   
        }
        else {
            $id = $query->row()->id;
            $sql = "SELECT interaction from matrix_r WHERE id='$id'";
            $query = $this->db->query($sql);
            array_push($data, $query->row());
        }   
    }

    return $data;
} 
```

但是，我收到以下错误：

```
PHP Parse error:  syntax error, unexpected ',' in 
/chemicalgenomics/ci/application/models/search_model.php on line 81 
```

我不明白为什么不喜欢'，'。它应该是一个字符串数组。有人可以帮我吗？谢谢

PS：`Line 81`是数组的第一行：`"SELECT * FROM ...`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T23:05:48.793

您初始化数组错误，您需要将 放在`array`开头：

```
$sql_list = array(
    "SELECT * FROM genes_r JOIN drugs_r ON drugs_r.id = genes_r.id WHERE drug_name='$input' OR gene_name='$input'",
    "SELECT * FROM genes_newL_dn JOIN drugs_newL_dn ON drugs_newL_dn.id = genes_newL_dn WHERE drug_name='$input' OR gene_name='$input'",
    "SELECT * FROM genes_newL_up JOIN drugs_newL_up ON drugs_newL_up.id = genes_newL_up WHERE drug_name='$input' OR gene_name='$input'",
    "SELECT * FROM genes_oldL_dn JOIN drugs_oldL_dn ON drugs_oldL_dn.id = genes_oldL_dn WHERE drug_name='$input' OR gene_name='$input'",
    "SELECT * FROM genes_oldL_up JOIN drugs_oldL_up ON drugs_oldL_up.id = genes_oldL_up WHERE drug_name='$input' OR gene_name='$input'"
); 
```

如果您有 PHP 5.4 或更高版本（但不是很多 web 主机这样做），您可以使用您接近的新短数组语法，但字符是方括号 ( `[`) 而不是圆括号 ( `(`)：

```
$sql_list = [
    "SELECT ...",
    "SELECT ...",
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T23:06:22.953

`$sql_list = array(x, y, z);`是 PHP 数组的正确语法。因此，在您的代码中，它应该是：

```
$sql_list = array(
    "SELECT * FROM genes_r JOIN drugs_r ON drugs_r.id = genes_r.id WHERE drug_name='$input' OR gene_name='$input'",
    "SELECT * FROM genes_newL_dn JOIN drugs_newL_dn ON drugs_newL_dn.id = genes_newL_dn WHERE drug_name='$input' OR gene_name='$input'",
    "SELECT * FROM genes_newL_up JOIN drugs_newL_up ON drugs_newL_up.id = genes_newL_up WHERE drug_name='$input' OR gene_name='$input'",
    "SELECT * FROM genes_oldL_dn JOIN drugs_oldL_dn ON drugs_oldL_dn.id = genes_oldL_dn WHERE drug_name='$input' OR gene_name='$input'",
    "SELECT * FROM genes_oldL_up JOIN drugs_oldL_up ON drugs_oldL_up.id = genes_oldL_up WHERE drug_name='$input' OR gene_name='$input'"
); 
```

如果您使用的是 PHP 5.4，则可以使用缩短的语法：

```
$sql_list = [
    "SELECT * FROM genes_r JOIN drugs_r ON drugs_r.id = genes_r.id WHERE drug_name='$input' OR gene_name='$input'",
    "SELECT * FROM genes_newL_dn JOIN drugs_newL_dn ON drugs_newL_dn.id = genes_newL_dn WHERE drug_name='$input' OR gene_name='$input'",
    "SELECT * FROM genes_newL_up JOIN drugs_newL_up ON drugs_newL_up.id = genes_newL_up WHERE drug_name='$input' OR gene_name='$input'",
    "SELECT * FROM genes_oldL_dn JOIN drugs_oldL_dn ON drugs_oldL_dn.id = genes_oldL_dn WHERE drug_name='$input' OR gene_name='$input'",
    "SELECT * FROM genes_oldL_up JOIN drugs_oldL_up ON drugs_oldL_up.id = genes_oldL_up WHERE drug_name='$input' OR gene_name='$input'"
]; 
```

# ios - iOS 中的 Google Analytics EasyTracker 不报告

> ID：11596509
> 
> 赞同：0
> 
> 时间：2012-07-21T23:03:18.663
> 
> 标签：ios, sdk, google-analytics

我不是这个应用程序的开发人员，但他告诉我他已经在 iOS 应用程序中正确安装了 Google Analytics 的 EasyTracking 功能。

我在 Google Analytics 中创建了一个全新的帐户并将其设置为“应用程序”。我还在同一个帐户上创建了第二个配置文件，它只是一个标准的“Web”配置文件，尽管没有附加特定的 URL。

在多个设备上运行该应用程序超过 24 小时后，我在应用程序报告中没有得到任何信息 - 没有屏幕，没有事件，什么都没有。

但是，在网络报告中，我可以看到视图控制器在内容下返回“点击”，就像它在网页上注册点击一样。

除了基本的 EasyTracker 集成之外，是否还有其他需要完成的“应用程序”报告才能被捕获？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:21:36.867

似乎您的页面浏览量正在触发，但您的事件通知却没有。如果您的帐户收到一个而不是另一个，则问题很可能是由于代码或您在错误的位置寻找，这似乎不正确。您是否有机会发布页面视图和事件代码示例来查看？

# json - SuperObject - 从带有“.”的字段名中解析数据 文字

> ID：11596510
> 
> 赞同：4
> 
> 时间：2012-07-21T23:03:27.653
> 
> 标签：json, delphi, firemonkey, cloudflare, superobject

我最近在解析 JSON 时碰壁了。你看，在使用 CloudFlare 客户端接口 API 时，我想查找特定 IP 的“威胁等级”。问题是由于 API 的设计，格式是这样的；

```
{
 response: {
            xxx.xxx.xxx.xxx: <value>,
            calls_left: 299
            },
 result: "success",
 msg: null
} 
```

`xxx.xxx.xxx.xxx`表示我需要从中检索数据的字段名称。立即，您可能会看到我面临的问题；解析字符串中的点字符被假定为当前路径中的子级别。

`<value>`代表IP的实际评级。但是，从它返回的格式和数据类型会有所不同。在不构成威胁或没有威胁等级的 IP 上，它`false`以布尔值形式返回。在搜索引擎爬虫上，它以字符串的形式返回`"SE:<var>"`（其中`<var>`是数值）。对于已知威胁，它会返回`"BAD:<var>"`（其中`<var>`是一个数值）。因此，我不能依赖返回的已知数据类型。

然而，主要问题是尝试从该字段读取值显然会由于字段名称中的点而失败。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T09:29:54.133

不需要黑客。您只需要通过 AsObject。然后使用名称，包括嵌入的点，而不将其视为路径说明符。

```
const Line1 = '{'
      + #13#10' response: {'
      + #13#10'            xxx.xxx.xxx.xxx: "somestring",'
      + #13#10'            calls_left: "299"'
      + #13#10'            },'
      + #13#10' result: "success",'
      + #13#10' msg: null'
      + #13#10'}';

var
  super: ISuperObject;
  res: ISuperObject;
begin
  super := SO(Line1);
  res := super.O['response'];

  writeln('S[calls_left''] on res: ', res.S['calls_left']);
  writeln('S[''xxx.xxx.xxx.xxx''] on res: ', res.S['xxx.xxx.xxx.xxx']);

  writeln('Names: ', res.AsObject.GetNames.AsString);
  writeln('Values: ', res.AsObject.GetValues.AsString);

  writeln('S[''xxx.xxx.xxx.xxx''] on res: through AsObject: ',
    res.AsObject.S['xxx.xxx.xxx.xxx']); 
```

给出以下结果：

```
S[calls_left'] on res: 299
S['xxx.xxx.xxx.xxx'] on res:
Names: ["calls_left","xxx.xxx.xxx.xxx"]
Values: ["299","somestring"]
S['xxx.xxx.xxx.xxx'] on res: through AsObject: somestring 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T23:03:27.653

解决这个问题的技巧在某种程度上是这种“限制”的粗略解决方法。可能还有其他方法——在 SuperObject 中甚至可能有一个函数来实现这一点——但这是大多数新编码人员可能会感到满意的方法（无论是 Delphi 新手、Coding 新手还是 SuperObject 新手）。它利用`StringReplace`函数替换“.”。具有对字段名称更友好的字符的实例（在这种情况下，我使用`*`）。正如我所说，这是一种粗略的方法，并且可能有一种更简单的方法，但是新编码人员可以从中学习的简单解决方案具有它的位置。

**细节**

请注意，此特定示例适用于当前的 CloudFlare API，因此建议对其进行扩展。它需要[SuperObject](http://code.google.com/p/superobject/)才能工作。

`MyJSON`将已经检索到的 JSON 表示为`string`. 这可以是`TMemo.text`,`TEdit.text`或只是一个标准字符串。

`MyIP`代表您要查找的 IP。

```
Function GetValue(MyJson, MyIP : String) : String;
var
  ISO : ISuperObject;
  FmIP, FmJSON : String;
begin  
  FmJSON := StringReplace(MyJSON,'.','*',[rfReplaceAll]);
  FmIP := StringReplace(MyIP,'.','*',[rfReplaceAll]);
  ISO := SO(FmJSON);
  Result := iso.s['response'+'.'+FmIP];
end; 
```

这会将结果作为字符串返回，无论它是 JSON 中的布尔值、整数还是字符串。如您所见，在完美实现目标的同时非常容易理解。潜在的问题是，如果结果中有 a `.`，那么您的输出值将有 a `*`。你可以很容易地用 包装结果`StringReplace`，像这样；

```
StringReplace(iso.s['response'+'.'+FmIP],'*','.',[rfReplaceAll]); 
```

**从此展开**

您可以通过使用`Pos`或`AnsiPos`查找 IP 本身的位置来扩展此功能。从中扩展，获得最终字符的位置相对容易，因此，您可以找到一个可以在这种特定情况之外使用的函数。但是，讨论这将更好地作为一般的“有用的字符串函数”答案，而不是针对这个特定的讨论。

当然欢迎任何其他答案！

# c# - 如何将 Dotfuscator 与 VSTO 一起使用？

> ID：11596514
> 
> 赞同：0
> 
> 时间：2012-07-21T23:03:35.467
> 
> 标签：c#, visual-studio-2010, excel, vsto, dotfuscator

现在，我在所有 c# 程序中都使用 Dotfuscator，但是，如果我在 VSTO 中使用它，当我尝试在目标计算机中部署时，VSTO 总是提示我：“文件的计算哈希值与清单中指定的不同”

我的问题是，如何以正确的方式将 Dotfuscator 与 VSTO 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:58:57.737

您需要在编译/构建程序集后立即执行混淆 - 这将确保新的混淆程序集用于计算哈希/清单等。

不确定 Dotfuscator 是否支持这一点，但[Crypto Obfuscator](http://www.ssware.com/cryptoobfuscator/obfuscator-net.htm)支持- Crypto Obfuscator 有一个向导，您可以在 VS 项目上运行，然后每次都会自动执行混淆，然后立即构建您的项目。

# 3d - XNA & Lidgren 3d 网络游戏不吸引其他模型/玩家

> ID：11596518
> 
> 赞同：2
> 
> 时间：2012-07-21T23:04:59.740
> 
> 标签：3d, xna, lidgren

我正在使用 xna 游戏引擎和 Lidgren 库进行网络连接。我已经测试并制作了一个 2d 游戏，其中客户端连接到服务器并且客户端可以看到其他玩家。但是我已经开始尝试创建一个 3D 游戏，并且客户端连接到服务器并传递 X、Y 和 Z 坐标。所以我有每个模型的位置，但我似乎无法让客户绘制其他玩家/模型。我错过了什么？我假设这是我的绘制逻辑，但我只是难住了。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:23:36.147

更改了客户端以加载、重新定位和绘制其他模型。:)

# h2 - h2 数据库上的声纳

> ID：11596530
> 
> 赞同：2
> 
> 时间：2012-07-21T23:08:13.140
> 
> 标签：h2, sonarqube

我想知道是否可以使用 h2 数据库运行声纳 3.1.1？我尝试部署配置了 h2 数据库的声纳并得到以下异常：

```
21-Jul-2012 23:32:45 org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.sonar.server.platform.PlatformLifecycleListener
org.sonar.api.utils.SonarException: Unable to determine database dialect to use within sonar with dialect null jdbc url jdbc:h2:tcp://localhost:9092/~/sonar 
```

我搜索了一下，最可能的原因是 3.1.1 不支持 h2。是否有任何解决方法可以使用 h2 运行 3.1.1？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T12:22:09.107

H2 数据库未在[Sonar 先决条件](http://docs.codehaus.org/display/SONAR/Requirements)中列出。很遗憾，因为和您一样，我认为它优于 Apache Derby。

Sonar 团队强烈反对在生产环境中使用 Derby。我在发行说明中读到，现在禁用了 Derby 升级。除了不喜欢 Derby 之外，您还有使用 H2 的好用例吗？:-)

最初使用嵌入式数据库设置 Sonar 可能很诱人。问题是在您的组织中采用 Sonar 可能会像病毒一样传播，最终会有人开始询问备份和 DR 的那一天......这就是拥有适当的数据库将使这种过渡更容易的地方。

# 更新

[SONAR-3622](http://jira.codehaus.org/browse/SONAR-3622)：报告支持的 H2 数据库。此支持将在 Sonar 3.2 中提供：

> David Gageot 添加了评论 - 04/Jul/12 5:06 AM
> 
> 最新版本更智能。h2 是 sonar>=3.2 的默认值，而 derby 是 sonar<3.2 的默认值

# sublimetext - Sublime Text 可以跳转到里面吗 富 有捷径？

> ID：11596535
> 
> 赞同：1
> 
> 时间：2012-07-21T23:09:14.827
> 
> 标签：sublimetext, sublimetext2

我想不出在 Sublime Text 2 中跳转到 html 括号内的方法。例如，我想在下面的示例中从 * 跳转到 $。

我试过使用 ctrl+m 和 ctrl+shift+m​​ ，但它们似乎没有工作。
目前我必须点击 opt+leftArrow + leftArrow + leftArrow

```
<ul>
    <li>one</li>
    <li>two</li>
    <li>three</li>
    <li>$</li*>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T23:21:47.140

我能想到的就是`Command+Shift+A`哪个会跳转到`$`并选择它。您可以在“选择”>“扩展选择以标记”下找到它

# c# - 我的 Web 应用程序在哪个端口上运行 asp.net C#

> ID：11596539
> 
> 赞同：4
> 
> 时间：2012-07-21T23:09:49.883
> 
> 标签：c#, port

有没有办法使用 C# 代码找出我的 Web 应用程序在哪个端口上运行，因为我喜欢将它写在整数变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T23:16:09.733

您可以通过这种方式获取它，[MSDN](http://msdn.microsoft.com/en-us/library/system.web.httprequest.url.aspx)，如果您在 url 中看不到端口，则表示端口是 80。

```
int port =  Request.Url.Port; 
```

或者你可以从 url

```
Uri uri = new Uri("http://www.mywebsite.com:80/pages/page1.aspx");
int port  = uri.Port; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T23:14:35.593

如果您从 Visual Studio 运行，那么每次它都会选择一个新的端口号，一旦您部署了应用程序，它就会选择为您的网站提供的端口。

默认端口是`80`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T23:14:50.753

如果您使用 Visual Studio Development Server 或在 IIS 设置中选择端口，则可以在项目设置中选择端口。

# c# - 在 Windows 上唯一标识文件

> ID：11596540
> 
> 赞同：0
> 
> 时间：2012-07-21T23:09:51.800
> 
> 标签：c#, winapi, dropbox, ntfs

我需要在 Windows 上唯一标识一个文件，这样即使它被移动或重命名，我也可以始终获得该文件的引用。我做了一些研究，发现问题[Unique file identifier in windows](https://stackoverflow.com/questions/1866454/unique-file-identifier-in-windows) with a way that using the Method GetFileInformationByHandle with C++，但显然这只适用于 NTFS 分区，但不适用于 FAT 分区。

我需要编写类似于 DropBox 上的行为：如果您在计算机上关闭它，重命名文件并再次打开它，它会检测到更改并正确同步。我想知道这种技术是什么，如果你们知道的话，DropBox 可能是怎么做的。

例如 FileSystemWatcher 可以工作，但如果使用它的程序已关闭，则无法检测到任何更改。

我将使用 C#。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T23:15:07.800

下一个最好的方法（但涉及完全读取每个文件的方法，如果有帮助，我会避免这种方法）是比较文件大小和文件内容的哈希值（例如 SHA-256）。两者发生碰撞的可能性很小，尤其是在正常情况下。

我会在 NTFS 上使用 GetFileInformationByHandle 方式并回退到 FAT 卷上的散列。

不过，在 Dropbox 的情况下，我认为有一个服务或进程在后台运行，观察文件系统的变化。这是最可靠的方法，即使如果您停止所述服务/进程，它也会停止工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-16T14:57:49.210

用户正在寻找的很可能是 Windows 更改日志。这些跟踪更改，例如持久地重命名文件，无需让观察者一直观察文件系统事件。取而代之的是，只需要维护上次查看日志的时间并从该点开始再次查看。在某些时候，具有已知 ID 的文件将具有类型为 RENAME 的事件，并且对该事件感兴趣的任何人都可以对该文件的自己版本执行相同的操作。当然，重要的是要跟踪文件的使用 ID。

> 自动备份应用程序是必须检查卷状态更改以执行其任务的程序的一个示例。检查目录或文件更改的暴力方法是扫描整个卷。但是，这通常不是一种可接受的方法，因为它会导致系统性能下降。另一种方法是应用程序为要备份的目录注册一个目录通知（通过调用 FindFirstChangeNotification 或 ReadDirectoryChangesW 函数）。这比第一种方法更有效，但是，它要求应用程序始终运行。此外，如果必须备份大量目录和文件，此类应用程序的处理量和内存开销也可能导致操作系统性能下降。

> 为避免这些缺点，NTFS 文件系统维护更新序列号 (USN) 更改日志。当对卷中的文件或目录进行任何更改时，该卷的 USN 更改日志会更新，其中包含更改的描述和文件或目录的名称。

[https://docs.microsoft.com/en-us/windows/win32/fileio/change-journals](https://docs.microsoft.com/en-us/windows/win32/fileio/change-journals)

# asp.net - 如何登录加载了 mx.controls.HTML 的外部 HTML 页面 (.aspx)

> ID：11596542
> 
> 赞同：1
> 
> 时间：2012-07-21T23:10:04.510
> 
> 标签：asp.net, apache-flex, air

我必须使用登录表单加载外部页面（.aspx）。我使用 html.location 我的代码：

```
protected function btn_clickHandler(event:MouseEvent):void {
  html_container.setVisible(false); 
  frm.url = "https://externalserver/user_mngmnt/login.aspx"; 
  var params:Object = {}; 
  params["ctl00$PageContent$txtUserId"] = "USER";
  params["ctl00$PageContent$txtPassword"] = "PASS"; 
  frm.resultFormat = "text" frm.send(params);
  frm.addEventListener(ResultEvent.RESULT,frm_onResult);
  frm.addEventListener(FaultEvent.FAULT,onFault); 
} 
protected function frm_onResult(evt:ResultEvent):void 
{ 
  html_container.location = "https://externalserver/logged.aspx";
  html_container.setVisible(true); 
} 
```

当我尝试登录时，我回到了登录页面。

有什么方法可以传递参数（登录名/密码）并从 aspx 页面保存所有其他参数（包括 SESSION、__EVENTVALIDATION、...）？

如果没有，也许有可能将值从 AIR 应用程序传递到 aspx 表单字段，然后在 html_container 中加载的页面内调用按钮单击？

提前致谢

# python - Django：第一个测试通过，但在添加第二个测试时失败

> ID：11596546
> 
> 赞同：0
> 
> 时间：2012-07-21T23:10:15.357
> 
> 标签：python, django, unit-testing, django-models

我的`models`样子

```
class PlaylistVideoManager(models.Manager):
    def add_video_to_playlist(self, video, playlist):
        """
        if video is already added to playlist, don't add it again
        """
        search_video = self.get_video_for_playlist(playlist, video)
        if search_video:
            logging.info('video is already added to playlist, will not re-add - ' + repr(playlist) + ', ' + repr(video))
        else:
            playlist_video = PlaylistVideo(video=video, playlist=playlist)
            playlist_video.save()
        return video

    def get_all_videos_for_playlist(self, playlist):
        videos_queryset = self.get_query_set().filter(playlist=playlist)
        videos = []
        if videos_queryset:
            for video in videos_queryset:
                videos.append(video)
        return videos

    def get_video_for_playlist(self, playlist, video):
        all_videos = self.get_all_videos_for_playlist(playlist)
        if all_videos:
            for vid in all_videos:
                if vid.pk == video.pk:
                    return video    

class PlaylistVideo(models.Model):
    playlist = models.ForeignKey(Playlist)
    video = models.ForeignKey(Video)
    objects = PlaylistVideoManager()

    class Meta:
        db_table = 'playlists_videos' 
```

我的`first test`样子

```
def test_add_same_video_twice_to_one_playlist(self):
    """
    desired: same video added twice to one playlist should not add it twice in database
    """
    video = Utility.create_video()
    playlist = Utility.create_playlist()
    PlaylistVideo.objects.add_video_to_playlist(video, playlist)
    PlaylistVideo.objects.add_video_to_playlist(video, playlist)
    self.assertEqual(PlaylistVideo.objects.count(), 1, msg='playlist video count is not 1, it is ' + str(PlaylistVideo.objects.count()))
    self.assertEqual(len(PlaylistVideo.objects.get_all_videos_for_playlist(playlist)), 1, msg='videos count in playlist is not 1, it is ' + str(len(PlaylistVideo.objects.get_all_videos_for_playlist(playlist)))) 
```

当我运行这个测试时，它运行良好

```
Creating test database for alias 'default'...
....INFO:root:adding video title - title, url - url
INFO:root:video is already added to playlist, will not re-add - <Playlist id:7, name:playlist, date_created:2012-07-21 23:08:23.677941+00:00, deleted:False>, <Video id:1, title:title, url:url>
.INFO:root:adding video title - title, url - url 
```

但是一旦我运行另一个测试，相同的测试就会失败

```
def test_add_same_video_twice_to_different_playlist(self):
    video = Utility.create_video()
    playlist1 = Utility.create_playlist('playlist1')
    playlist2 = Utility.create_playlist('playlist2')
    PlaylistVideo.objects.add_video_to_playlist(video, playlist1)
    PlaylistVideo.objects.add_video_to_playlist(video, playlist2)
    self.assertEqual(PlaylistVideo.objects.count(), 2, msg='playlist video count is not 2, it is ' + str(PlaylistVideo.objects.count()))
    self.assertEqual(len(PlaylistVideo.objects.get_all_videos_for_playlist(playlist1)), 1, msg='videos count in playlist1 is not 1, it is ' + str(len(PlaylistVideo.objects.get_all_videos_for_playlist(playlist1))))
    self.assertEqual(len(PlaylistVideo.objects.get_all_videos_for_playlist(playlist2)), 1, msg='videos count in playlist2 is not 1, it is ' + str(len(PlaylistVideo.objects.get_all_videos_for_playlist(playlist2))))

======================================================================
FAIL: test_add_same_video_twice_to_one_playlist (App.apps.playlists.tests.PlaylistVideoTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/hhimanshu/code/p/Apps/App/apps/playlists/tests.py", line 96, in test_add_same_video_twice_to_one_playlist
    self.assertEqual(PlaylistVideo.objects.count(), 1, msg='playlist video count is not 1, it is ' + str(PlaylistVideo.objects.count()))
AssertionError: playlist video count is not 1, it is 2

----------------------------------------------------------------------
Ran 10 tests in 1.315s

FAILED (failures=1)
Destroying test database for alias 'default'... 
```

我的`Utility`课看起来像

```
PLAYLIST = 'playlist'
class Utility():
    @staticmethod
    def create_playlist(playlist_name=PLAYLIST):
        return Playlist.objects.add_playlist(playlist_name)

    @staticmethod
    def create_user(name='test', email='test', passwd='test'):
        return User.objects.create_user(name, email, passwd)

    @staticmethod
    def create_video(title='title', url='url'):
        return Video.objects.get_or_create_video(title, url) 
```

*   这里应该有什么问题？它的代码相同吗？
*   每次测试后我都应该重置我的数据库吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T23:26:03.927

问题是**每次测试后测试数据库都没有重置**

在阅读了 Django test 和 SO 之后，我意识到我需要`TransactionTestCase`

**相关链接**
[Django Doc](https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs#django.test.TransactionTestCase)
[SO question](https://stackoverflow.com/questions/11040557/django-unit-test-database-not-being-torn-down)

这样做之后，我所有的测试都很开心:)

```
Creating test database for alias 'default'...
....INFO:root:adding video title - title, url - url1
.INFO:root:adding video title - title, url - myurl
INFO:root:video is already added to playlist, will not re-add - <Playlist id:1, name:playlist, date_created:2012-07-21 23:25:15.411728+00:00, deleted:False>, <Video id:1, title:title, url:myurl>
.INFO:root:adding video title - title, url - url
.INFO:root:playlist created: <Playlist id:1, name:playlist, date_created:2012-07-21 23:25:15.904582+00:00, deleted:False>, <User: test>
INFO:root:playlist created: <Playlist id:2, name:playlist1, date_created:2012-07-21 23:25:15.912512+00:00, deleted:False>, <User: test>
.INFO:root:playlist created: <Playlist id:1, name:playlist, date_created:2012-07-21 23:25:16.230842+00:00, deleted:False>, <User: test>
INFO:root:Playlist already exists: <Playlist id:1, name:playlist, date_created:2012-07-21 23:25:16.230842+00:00, deleted:False>, <User: test>
.INFO:root:playlist created: <Playlist id:1, name:playlist, date_created:2012-07-21 23:25:16.861322+00:00, deleted:False>, <User: user1>
INFO:root:playlist created: <Playlist id:2, name:playlist, date_created:2012-07-21 23:25:16.866924+00:00, deleted:False>, <User: user2>
.
----------------------------------------------------------------------
Ran 10 tests in 2.427s

OK
Destroying test database for alias 'default'... 
```

# javascript - Rails 控制器操作可以同时处理 html 和 javascript 请求吗？

> ID：11596553
> 
> 赞同：1
> 
> 时间：2012-07-21T23:12:27.213
> 
> 标签：javascript, ruby-on-rails, ajax

我有一个链接，允许用户通过该链接在我的应用中声明虚构位置

```
<%= link_to("Claim this location!", loc_claim_path(@loc.id), :id => "loc_claim") %> 
```

它通过我的声明控制器路由请求，如下所示：

```
def claim

    @loc = Location.find(params[:loc_id])

    if !@user
        flash[:notice] = "You need to be logged in to claim a location!"
        redirect_to(@loc)
    else
        flash[:notice] = "Location claimed!"
        render("claim.js")
    end

end 
```

如果用户没有登录（即@user 为假），它会将他们重定向回位置页面。

但是，如果用户已登录，则需要触发 javascript claim.js，然后在完成后还会重定向回位置页面。

我的问题是，如果设置：remote => true，它将启动 javascript，但不会启动 html，反之亦然，当我不设置：remote 时。

有没有办法让我两全其美？或者，除此之外，有没有更好的方法来设置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T23:19:49.290

是的，您可以使用 respond_to 块来执行此操作

```
 respond_to do |format|
    format.html
    format.js
  end 
```

为了进行测试，请尝试禁用 JavaScript 并确保 HTML 路径有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T23:41:07.667

找到了适合我的解决方案。

我在 link_to 上设置了 :remote => true，它将一个 JS 请求发送到我使用的声明控制器

```
render js: "window.location.pathname='/locations/#{@location.id}'" 
```

它完成与 redirect_to(@loc) 相同的事情

然后我就正常渲染了 claim.js 请求，即

```
render "claim" 
```

# spring - 无法在 Spring Roo 中使用 JSF 设置 Spring Security

> ID：11596555
> 
> 赞同：2
> 
> 时间：2012-07-21T23:13:34.997
> 
> 标签：spring, jsf, spring-security, spring-roo

我正在使用 spring roo 中的脚本命令来创建我正在处理的应用程序。

这是我正在使用的 roo 脚本。

```
 project --topLevelPackage is.kdh.cyberdojo --projectName cyberdojo --java 6 --packaging WAR
    jpa setup --provider HIBERNATE --database HYPERSONIC_IN_MEMORY

    entity jpa --class ~.domain.Attendance --testAutomatically --table ATTENDANCE
    field date --fieldName attended --type java.util.Date --notNull --column ATTENDED

    entity jpa --class ~.domain.BarCode --testAutomatically --table BARCODE

    entity jpa --class ~.domain.Person --testAutomatically --table PERSON
    field string --fieldName socialSecurityNumber --sizeMax 10 --notNull --column SOCIAL_SECURITY_NUMBER --unique true
    field string --fieldName name --sizeMax 128 --notNull --column NAME
    field string --fieldName address --sizeMax 128 --notNull --column ADDRESS
    field string --fieldName city --sizeMax 128 --notNull --column CITY
    field string --fieldName phone --sizeMax 128 --notNull --column PHONE
    field string --fieldName mobile --sizeMax 24 --notNull --column MOBILE
    field string --fieldName email --sizeMax 128 --notNull --column EMAIL
    field date --fieldName created --type java.util.Date --notNull --column CREATED
    field date --fieldName modified --type java.util.Date --notNull --column MODIFIED
    field boolean --fieldName active --column ACTIVE --notNull --value true
    field string --fieldName registrationNumber --column REGISTRATION_NUMBER --notNull --sizeMax 10
    field string --fieldName comments --column COMMENTS --sizeMax 4096
    field reference --fieldName parent --type is.kdh.cyberdojo.domain.Person --cardinality MANY_TO_ONE
    field reference --fieldName barCode --type is.kdh.cyberdojo.domain.BarCode --cardinality ONE_TO_ONE

    entity jpa --class ~.domain.Course --testAutomatically --table COURSE
    field string --fieldName name --sizeMax 128 --notNull --column NAME
    field string --fieldName description --sizeMax 2048 --notNull --column DESCRIPTION
    field boolean --fieldName active --notNull --column ACTIVE
    field date --fieldName validFrom --type java.util.Date --notNull --column VALID_FROM
    field date --fieldName validTo --type java.util.Date --notNull --column VALID_TO
    field number --fieldName occurrence --type int --notNull --column OCCURRENCE
    field set --fieldName instructors --type is.kdh.cyberdojo.domain.Person

    entity jpa --class ~.domain.UserType --testAutomatically --table USERTYPE
    field string --fieldName name --sizeMax 128 --notNull --column NAME

    test integration
    perform tests

    web jsf setup --implementation APACHE_MYFACES --theme  EGGPLANT
    web jsf all --package ~.jsf

    logging setup --level WARN --package WEB
    perform eclipse
    security setup
    quit 
```

一切都很好，直到我得到安全设置命令 - 然后脚本执行被中止。

消息 roo 打印出来是

```
 Command 'security setup' was found but is not currently available (type 'help' then ENTER to learn about this command) 
```

我知道可以一起使用spring security和jsf。我设置 roo 脚本的方式有什么问题吗？

顺便说一句：如果我使用 mvc 而不是 jsf，那么 spring security 设置得很好，一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-30T12:56:15.353

这个问题在[这里](https://jira.springsource.org/browse/ROO-2997)讨论。您所指的修复包括仅禁用 JSF 和 GWT 插件的安全命令。我们必须等到 1.3.0。:(

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T09:37:35.780

您是否在执行安全设置命令时检查了 roo shell 焦点？它应该在根。

我建议您在 jpa 设置后立即设置安全性。希望有帮助。

# javascript - 使用 Dropbox 的 zxcvbn 密码强度估计器

> ID：11596556
> 
> 赞同：8
> 
> 时间：2012-07-21T23:13:42.717
> 
> 标签：javascript, jquery, dropbox

我正在尝试让[Dropbox 的密码强度估计器 zxcvbn](http://tech.dropbox.com/?p=165)正常工作……但我遇到了一些问题！

我已经包含了异步加载器。

我的下一个问题是我对 JS 了解的不够多，无法弄清楚如何实际使用这个东西......

```
<input id="password" name="password" size="35" class="textInput required" type="password"> 
```

它在那个领域被用作某种监视器吗？

感谢您的帮助，我还在学习 JS/jQuery ......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-21T23:30:40.483

```
<input id="password" name="password" size="35" class="textInput required" type="password"/>
<div id="result">
Laaa laa laa...
</div> 
```

* * *

```
$('#password').keyup(function() {
  var textValue = $(this).val();
  var result = zxcvbn(textValue);
  $('#result').html("cracktime : " + result.crack_time);
  //use this result as you like
    /*
    result.entropy            # bits

result.crack_time         # estimation of actual crack time, in seconds.

result.crack_time_display # same crack time, as a friendlier string:
                          # "instant", "6 minutes", "centuries", etc.

result.score              # [0,1,2,3,4] if crack time is less than
                          # [10**2, 10**4, 10**6, 10**8, Infinity].
                          # (useful for implementing a strength bar.)

result.match_sequence     # the list of patterns that zxcvbn based the
                          # entropy calculation on.

result.calculation_time   # how long it took to calculate an answer,
                          # in milliseconds. usually only a few ms.
    */
}); 
```

为你提琴，[http://jsfiddle.net/MhZ4p/](http://jsfiddle.net/MhZ4p/)

将 traverse 函数替换为仅破解时间

```
traverse(result); 
```

至：

```
$('#result').html("cracktime : " + result.crack_time); 
```

# xslt - XSLT - 如何用特定属性包装相邻元素

> ID：11596564
> 
> 赞同：3
> 
> 时间：2012-07-21T23:14:48.410
> 
> 标签：xslt

我是 xsl 的新手。我发现了类似的东西，但不能完全适应我的使用。

输入：

```
<section>
  <heading>some heading text</heading>
  <amendment chapter="1">
    <foo/>
  </amendment>
  <amendment chapter="2">
    <bar/>
  </amendment>
  <amendment chapter="3">
    <baz/>
  </amendment>
  <heading>some heading text</heading>
  <amendment chapter="1">
    <baz/>
  </amendment>
</section> 
```

用属性“chapter='1' or chapter='2'”包装元素。输出：

```
<section>
  <heading>some heading text</heading>
  <newwrapper>
    <amendment chapter="1">
      <foo/>
    </amendment>
    <amendment chapter="2">
      <bar/>
    </amendment>
  </newwrapper>
  <amendment chapter="3">
    <baz/>
  </amendment>
  <heading>some heading text</heading>
  <newwrapper>
    <amendment chapter="1">
      <baz/>
    </amendment>
  </newwrapper>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:33:09.350

**I. 这个 XSLT 2.0 转换**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
   <section>
    <xsl:for-each-group select="*" 
                        group-adjacent="self::amendment and @chapter =(1,2)">
     <xsl:choose>
       <xsl:when test="current-grouping-key()">
         <newwrapper>
           <xsl:sequence select="current-group()"/>
         </newwrapper>
       </xsl:when>
       <xsl:otherwise>
         <xsl:sequence select="current-group()"/>
       </xsl:otherwise>
     </xsl:choose>
    </xsl:for-each-group>
  </section>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<section>
    <heading>some heading text</heading>
    <amendment chapter="1">
        <foo/>
    </amendment>
    <amendment chapter="2">
        <bar/>
    </amendment>
    <amendment chapter="3">
        <baz/>
    </amendment>
    <heading>some heading text</heading>
    <amendment chapter="1">
        <baz/>
    </amendment>
</section> 
```

**产生想要的正确结果：**

```
<section>
   <heading>some heading text</heading>
   <newwrapper>
      <amendment chapter="1">
               <foo/>
         </amendment>
      <amendment chapter="2">
               <bar/>
         </amendment>
   </newwrapper>
   <amendment chapter="3">
            <baz/>
      </amendment>
   <heading>some heading text</heading>
   <newwrapper>
      <amendment chapter="1">
               <baz/>
         </amendment>
   </newwrapper>
</section> 
```

**说明**：

正确使用**[`xsl:for-each-group`](http://www.w3.org/TR/xslt20/#xsl-for-each-group)**with`group-adjacent`属性。

* * *

**二、XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kFollowing" match="amendment[not(@chapter >2)]" use=
 "generate-id(preceding-sibling::*
                [not(self::amendment and @chapter &lt;= 2)][1])"/>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "*[not(self::amendment and @chapter &lt;= 2)
  and
    following-sibling::*[1][self::amendment and not(@chapter >2)]
    ]">
  <xsl:call-template name="identity"/>
  <newwrapper>
   <xsl:apply-templates mode="inGroup"
                        select="key('kFollowing', generate-id())"/>
  </newwrapper>
 </xsl:template>

 <xsl:template match="*" mode="inGroup">
  <xsl:call-template name="identity"/>
 </xsl:template>
 <xsl:template match="amendment[not(@chapter >2)]"/>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（上图）时，会产生相同的、正确的结果**。

**说明**：

正确使用：

1.  使用和覆盖**[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**。

2.  用于定义属性不大于的一组相邻`amendment`元素**[的键](http://www.w3.org/TR/1999/REC-xslt-19991116#key)**，作为该组的前一个兄弟元素的函数`chapter``2`**[`generate-id()`](http://www.w3.org/TR/1999/REC-xslt-19991116#function-generate-id)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:08:20.613

Dimitre Novatchev，我将属性修改为字符串并且 xslt 有效。谢谢。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>
    <xsl:key name="kFollowing" match="amendment[(@chapter='1' or @chapter='2')]" use="generate-id(preceding-sibling::*[not(self::amendment and (@chapter='1' or @chapter='2'))][1])"/>
    <xsl:template match="node()|@*" name="identity">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="*[not(self::amendment and (@chapter='1' or @chapter='2')) and following-sibling::*[1][self::amendment and (@chapter='1' or @chapter='2')]]">
        <xsl:call-template name="identity"/>
        <newwrapper>
            <xsl:apply-templates mode="inGroup" select="key('kFollowing', generate-id())"/>
        </newwrapper>
    </xsl:template>
    <xsl:template match="*" mode="inGroup">
        <xsl:call-template name="identity"/>
    </xsl:template>
    <xsl:template match="amendment[(@chapter='1' or @chapter='2')]"/>
</xsl:stylesheet> 
```

# iphone - 如何将附近的设备索引到 UITableView 并与所选设备配对？

> ID：11596566
> 
> 赞同：1
> 
> 时间：2012-07-21T23:15:05.473
> 
> 标签：iphone, xcode, uitableview, bluetooth

如何找到附近运行相同应用程序的 iPhone 和 iPod 并将它们索引到 UITableView 中？那么我将如何通过蓝牙与所选设备配对以执行未公开的过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T02:12:04.670

GKSession 是我见过的最简单的，虽然我花了大约 4 到 5 个小时来做​​这件事，而且只是直接打字并不麻烦，你需要一个客户端模型一个服务器模型 hostTableView 和一个 joingameTableView，更不用说很多代表了在服务器模型和客户端模型之间以及在主机和客户端（joingameTableView）之间来回传输信息，他们都来回交谈以实现这一目标。您可以使用 bonjour 和其他方法，但我没有使用任何其他方法。我会尽快发布一个编译为 git 的示例，我可以在帖子中解释很多逻辑！希望我帮助至少引导您朝着正确的方向前进。

# php - zend php 多数组 json_encoding

> ID：11596573
> 
> 赞同：3
> 
> 时间：2012-07-21T23:17:13.247
> 
> 标签：php, javascript, json, zend-framework

我在 zend 和 js 中的 json 功能有问题。

我尝试对包含一些模型的单个数组进行编码，如下所示：

```
echo json_encode(Application_Model_Marker::getMarkers());

var mark = JSON.parse(jsonVal); //in js 
```

其中 getMarkers 是一个返回标记模型数组的静态方法。

这工作正常，当我在 js 脚本中解析它并尝试访问 json 对象的值时，它工作正常。

但是，如果我尝试创建并发送这样的数组数组：

```
$allData = array();
$allData['info'] = Application_Model_Marker::getMarkers();
$allData['openingHours'] = Application_Model_Openinghours::getOpeningHours();
$allData['happyHours'] = Application_Model_Happyhour::getHappyHours();

echo json_encode($allData); 
```

当我尝试 alert(jsonVal.responseText); 时，它仍然发送所有正确的信息；在js中。

它有三个数组，每个数组都包含一些对象数组。

但是，当我尝试像第一个示例中那样将变量初始化为已解析的 json 对象时，我无法访问这些值，并且当我尝试它时程序停止时似乎会发生某种错误。

我不太明白，因为当我尝试从编码的 json 对象打印响应文本时，它具有所有正确的信息。

任何想法如何进行这种多维 json 编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:41:01.203

试试这个，希望它会工作：

```
<sctript>
var mark;
eval("mark = "+jsonVal+";");
</sctrip> 
```

# executable-format - 什么可执行格式通常会导致文件更小？

> ID：11596574
> 
> 赞同：-1
> 
> 时间：2012-07-21T23:17:29.447
> 
> 标签：executable-format

什么可执行格式通常会导致文件更小？例如，我听说 a.out 格式比 ELF 的要小。这个问题是跨平台的，所以 MS-DOS 也是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T23:20:54.080

扩展名和格式无关。a.out 在 linux 系统上通常是 ELF 格式，而在 BSD 中会是其他一些格式；“.out”只是默认扩展名，与格式无关。

除了格式之外，原始语言还会使二进制文件的大小以及使用的编译标志有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T23:21:27.063

我用十六进制编辑器生成的最小 PE 文件大约 380 字节，能够存储我喜欢的任何资源。（好吧，有了资源，它就更大了）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T23:23:32.597

你是对的：ELF 比旧的（在 Linux 下不推荐使用？）“a.out”格式携带更多信息。但是对于任何桌面应用程序来说，“开销”（实际上是非常有用的元数据）都很小。

**对于 MS-DOS**，COM 文件比 EXE 文件更小（也更受限制）。

# google-apps - Google 应用程序 - 裸别名 redir

> ID：11596578
> 
> 赞同：4
> 
> 时间：2012-07-21T23:18:51.930
> 
> 标签：google-apps

我有 www.somedomain.com.uy 和 somedomain.com.uy。因为我在我的谷歌应用面板上为此域使用谷歌应用，所以我设置了一个从 somedomain.com.uy 到 www 的裸重定向。

所以，我目前在域选项卡上拥有的是：

> somedomain.com.uy（主域）。将裸重定向设置为 www.somedomain.com.uy somdomain.uy。（别名域）

在我的谷歌应用程序面板上，我去了添加域，并将 www.somedomain.uy 添加到我的应用程序中。

由于这一切，我可以从以下位置访问此应用程序：

> somedomain.com.uy www.somedomain.com.uy www.somedomain.uy

正如我所说，我无法仅使用简单明了的访问：somedomain.uy：尝试此结果：404。这是一个错误。（谷歌消息）。

我找不到解决此问题的方法，我的问题是：有没有办法将裸域重定向设置到别名域？或者关于如何让它发挥作用的任何其他想法？

感谢阅读，请原谅我简单的英语。

# php - 如何在用户类 fos_userBundle 中访问我自己的变量

> ID：11596580
> 
> 赞同：1
> 
> 时间：2012-07-21T23:19:47.283
> 
> 标签：php, symfony, fosuserbundle

我是 symfony 的新手，我正在尝试学习如何访问用户变量。

这是我可以检索用户名的方式：

```
$this->container->get('security.context')->getToken()->getUser()->getUsername(); 
```

但是如何检索我自己创建的变量，在我的例子中是 $company(int)？我试过做

```
 $this->container->get('security.context')->getToken()->getUser()->getCompany(); 
```

然后它返回给我一个似乎是无限大小的对象，如果我在其上执行 var_dump，chrome 永远不会停止加载该页面！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:47:27.423

我假设公司是您通过外键链接到用户的另一个实体？

如果是这样，执行 var_dump 几乎会转储大量您不需要的信息。要么输出公司的特定变量，所以 $this->container->get('security.context')->getToken()->getUser()->getCompany()->getName(); 或尝试将其转换为像 $this->container->get('security.context')->getToken()->getUser()->getCompany()->__toString(); 这样的字符串

无论如何，您都必须实现 toString 方法，但这样做总是好的，因为这意味着在树枝模板中您可以获得类似 {{ app.user.company }} 而不是 {{ app.user.company.name}} 的东西

# c++ - 使用变量参数列表为传递的引用赋值（VS2010 中的错误）

> ID：11596583
> 
> 赞同：0
> 
> 时间：2012-07-21T23:20:26.943
> 
> 标签：c++, visual-studio-2010, pointers, variadic-functions

以下代码在 Code::Blocks 中编译和运行，但在 VS2010 中出现问题和错误：“test2.exe 中 0x770815de 处的未处理异常：0xC0000005：写入位置 0x00000002 的访问冲突。”

我意识到代码有点危险，它基本上是对我为另一个项目的想法进行原型设计。我想要做的是传递对任何给定数量的整数的引用，后跟一个值。然后将此值放入引用的整数中，鲍勃就是你的叔叔。它有效，这很好。但不是在困扰我的 VS2010 中。我不是最有经验的指针，所以不知道是我做错了什么还是只是这种操作不是VS2010喜欢的。这是一个问题，因为我正在测试的项目都在 VS2010 中！所以我需要这个来工作！

编辑：对不起，我是 Code:Blocks 的新手。我想我应该指定我在 Code::Blocks 中使用的编译器？:DI 使用 GNU GCC 编译器（或类似的东西）的 miniGW（或其他东西）实现。我希望它对您体验 Code::Blocks 用户有意义！

```
#include <iostream>
#include <stdarg.h>

using namespace std;

void getMonkey(int Count, ... )
{
   int test;
   va_list Monkeys;
   va_start(Monkeys, Count );

   for(int i = 0; i < (Count / 2); i++ )
   {
      *va_arg(Monkeys, int*) = va_arg(Monkeys, int);
   }

   va_end(Monkeys);
}

int main()
{
   int monkey1 = 0;
   int monkey2 = 0;
   int monkey3 = 0;

   getMonkey(6, &monkey1, 2, &monkey2, 4, &monkey3, 5);

   cout << monkey1 << " " << monkey2 << " " << monkey3;
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:05:15.097

原来左值和右值不是按照我假设的顺序计算的！TY 堆栈溢出！

更新了 getMonkey 方法：

```
void getMonkey(int Count, ... )
{
   int test;
   va_list Monkeys;
   va_start(Monkeys, Count );

   for(int i = 0; i < (Count / 2); i++ )
   {
      int* tempMonkeyPtr = va_arg(Monkeys, int*); //herp
      *tempMonkeyPtr = va_arg(Monkeys, int);      //derp
   }

   va_end(Monkeys);
} 
```

耶！我正在掌握我认为的指针业务！

# asp.net - 通过 localhost asp.net 发送电子邮件

> ID：11596593
> 
> 赞同：0
> 
> 时间：2012-07-21T23:23:11.213
> 
> 标签：asp.net

```
 public ActionResult Index(EmailModel model)
    {

        MailMessage message = new MailMessage();
        message.From = new MailAddress("sheikh.abm@gmail.com");
        message.To.Add(new MailAddress(model.To));

        message.Subject = model.Subject;
        message.Body = model.Message;

        return View();
    } 
```

这是我的控制器动作。在 web.config 中。

```
 <system.net>
    <mailSettings>
      <smtp from="sheikh.abm@gmail.com">
        <network host="\localhost:"/>
      </smtp>
    </mailSettings>
  </system.net> 
```

我遇到的问题是邮件没有发送，也没有显示任何错误，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:27:22.087

为了发送邮件，您需要调用 send 方法

例如

```
message.Send(); 
```

# c++ - EnumDisplaySettings 最大模式数

> ID：11596594
> 
> 赞同：0
> 
> 时间：2012-07-21T23:23:11.743
> 
> 标签：c++, winapi, gdi

如何确定 EnumDisplaySettings 可返回的最大显示模式数，而不增加第二个参数，直到函数失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T23:37:34.673

根据 MSDN 关于[EnumDisplaySettings](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162611%28v=vs.85%29.aspx)的文档。看起来你唯一的选择是增加`IModeNum`

来自链接：

> 图形模式索引从零开始。要获取所有显示设备的图形模式的信息，请对 EnumDisplaySettings 进行一系列调用，如下所示： 第一次调用时将 iModeNum 设置为零，并为每个后续调用将 iModeNum 加一。继续调用该函数，直到返回值为零。

# ajax - 将 AJAX 和 php 与 Google 地图一起使用时，页面不断刷新

> ID：11596597
> 
> 赞同：0
> 
> 时间：2012-07-21T23:24:28.343
> 
> 标签：ajax, google-maps

大家好，

我有一个如下的 html 文件，它显示了一个谷歌地图（在 window.onload 函数中初始化）并有一个表单来输入要搜索的地方的名称。单击提交按钮时，用户输入应该被发送到一个 php 文件，该文件获取要在地图上显示的坐标。但是，在测试中，现在返回的所有 php 文件都是相同的用户输入。

我遇到的问题是，这一系列事件发生了：

我输入一些文本，然后单击提交。p 元素 innerHTML 已更改并出现警报（如在 onreadystatechange 函数中）但是，当我关闭警报时，p 元素会丢失其数据。

我添加了警报，因为当我刚刚使用

```
document.getElementById("msg").innerHTML=xmlhttp.responseText; 
```

p 元素在消失之前短暂地接受了它的新数据。

我注意到，当警报出现在屏幕上时，地址栏显示“filename.html”。但是当我关闭它时，p数据消失了，地址栏显示

```
filename.html?searchterm=user+input+stuff 
```

即使我在文本输入为空的情况下单击提交，我也会短暂出现“未输入文本”，在页面“刷新”之前，该文本消失，地址栏显示

```
filename.html?searchterm= 
```

我很感激我能得到的任何帮助。

```
<html>
<head> 
<title>Map</title> 
<link rel="stylesheet" type="text/css" href="stylue.css" />   

<script type="text/javascript"      
src="http://maps.googleapis.com/maps/api/js? 
key=AIzaSyBksQ7NlV6eXk6w5w8222lolqdPHsN_8ls&sensor=false">    
</script> 

<script type="text/javascript">

var panorama;
var map;

function initialize() {

//create Google Map   
}

//other Google Maps functions   

function searchdb(userInput){

    var xmlhttp;    
    if (userInput==""){
        document.getElementById("msg").innerHTML="No Text Entered";
    }else{
        if (window.XMLHttpRequest){
    xmlhttp=new XMLHttpRequest();
        }
  else{
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

  xmlhttp.onreadystatechange=function(){
  if (xmlhttp.readyState==4 && xmlhttp.status==200){
    document.getElementById("msg").innerHTML=xmlhttp.responseText;
    alert(xmlhttp.responseText);
  }
        }
        xmlhttp.open("GET","searchpageajax.php?searchterm="+userInput,true);
        xmlhttp.send();
   }

}

window.onload= function () { 
    initialize(); 
} 

</script>

</head>
<body >

<h1>Map</h1>

<p>Enter a room code or building name to search.</p>

<form name="inputform" >
<input type="text" name="searchterm" /> 
<input type="submit" value="Search" onclick="searchdb(searchterm.value)"/>
<input type="reset" value="Clear" />
<br/>
<p id ="msg"></p>
<br/>
</form>

<div id="container">
    <div id="map_canvas"></div>
    <div id="streetview_canvas"></div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T23:33:19.820

页面已刷新，因为您的 onsubmit 函数不返回 false。

[请参阅此帖子](https://stackoverflow.com/questions/3384960/want-html-form-submit-to-do-nothing)（可能还有其他帖子）。

# android - 如何将服务绑定到正确的活动实例？

> ID：11596598
> 
> 赞同：0
> 
> 时间：2012-07-21T23:24:30.307
> 
> 标签：android, android-service, android-handler

由于各种原因，我无法让我的应用程序正常工作。

设计概述：我的目标是一个具有两个按钮（连接、断开连接）和一个显示从连接接收到的数据的文本视图的活动。我编写了一个“MySocket”服务来处理 WebSocket 连接（Gottox 的 Java 实现），每当 tit 从服务器接收到某些内容时，该服务就会向活动发布一条消息，然后活动将该数据附加到 textview 上。该服务必须从活动接收连接/断开连接提示，并能够将消息传递给活动。MySocket 还需要作为前台服务运行，以便无限期地保持连接，并向用户提供粘性通知。

我在各个地方都遇到了重大问题。首先，我注意到我可以启动另一个活动实例，而原始实例仍在更新中。`android:launchMode="singleInstance">` 我通过在清单中指定来解决这个问题。我遇到的问题是，当活动被销毁并创建新活动时，服务继续发布更新，但重点活动没有收到它们。如果原始活动被破坏并且服务处理程序没有更新，那么一旦活动被破坏，它肯定会抛出空指针异常，但应用程序继续运行。然后我尝试`unbindService(mConnection)`在我的 onDestroy 方法中运行，但这抛出了`java.lang.IllegalArgumentException: Service not registered:`The service is messing *something*这应该是重点活动，但似乎没有收到它。我怀疑我的前台服务执行不力是罪魁祸首，但我真的不知道。

有问题的两个类很长，所以我删除了 Logcat 行、全局变量和一些我确定是不相关的方法。我意识到架构是可怕的，但这已经接近我的工作了。如果代码太可怕而无法阅读，我很乐意有人提出替代结构，只要它达到预期的结果。

活动类：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
      ...
      mMessenger = new Messenger(mHandler);
      connect.setOnClickListener(new View.OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            messageSocket("ACTION", "CONNECT");
        }
    });

     @Override
    protected void onDestroy()
    {
      super.onDestroy();
      doUnbindService();
    }

    private ServiceConnection conn = new ServiceConnection() 
    {
    public void onServiceConnected(ComponentName className, IBinder binder) 
    {
        Log.d(debug, "Service Connected");
        messenger = new Messenger(binder);
        boundToService = true;
    }

    public void onServiceDisconnected(ComponentName className) 
    {
        Log.d(debug, "Service Disconnected");
        messenger = null;
        boundToService = false;
    }
    };

    void doBindService() 
    {
    final Intent intent = new Intent(this, MySocket.class);
    intent.putExtra("MESSENGER", messenger);
    Thread t = new Thread()
    {
        public void run()
        {
        boundToService =
                getApplicationContext().bindService(
                intent,
                conn,
                Context.BIND_AUTO_CREATE
            );
        }
    };
    t.start();
} 
```

和 MySocket 类：

```
class IncomingHandler extends Handler 
{
    @Override
    public void onCreate() 
{...}

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        startForeground( id, showNotification() );
    connect();
        return START_STICKY;
}

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        startForeground( id, showNotification() );
        connect();
        return START_STICKY;
}

private Notification showNotification()
{
    nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    CharSequence text = "WebSocket currently active";
    Notification notification = new Notification(R.drawable.ic_launcher,
            text, System.currentTimeMillis());
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, SocketTester.class), 0);
    notification.setLatestEventInfo(this, "WebSocket Test", text,
            contentIntent);
    notification.flags = Notification.FLAG_FOREGROUND_SERVICE;
    return notification;
}
        @Override
    public IBinder onBind(Intent intent)
    {
        Bundle extras = intent.getExtras();
        Log.d(debug, "onBind called");
        if (intent.getExtras() != null)
        {   
            Log.d(debug, "Setting messenger");
            outMessenger = (Messenger) extras.get("MESSENGER");
        }
        return inMessenger.getBinder();
        }   

    @Override
    public void handleMessage(Message msg) 
            {           
        Bundle data = msg.getData();            
        Message backMsg = Message.obtain();
        Bundle bundle = new Bundle();
        backMsg.setData(bundle);

        if ("CONNECT".equals(data.getString(ACTION)))
        {   
            Log.d(debug, "Connecting");
            startService(new Intent(MySocket.this, MySocket.class));
            /*startService now calls connect();*/
        }
        else if ("DISCONNECT".equals(data.getString(ACTION)))
        {
            if (socket != null)
            {   
                socket.disconnect();
            }
            stopForeground( true );
            stopSelf();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-22T18:28:47.613

“如果您使用 startService(..) 启动一个 android 服务，该服务将一直运行，直到您明确调用 stopService(..)。系统可以运行服务有两个原因。如果有人调用 Context.startService()然后系统将检索服务（创建它并在需要时调用其 onCreate() 方法）然后使用客户端提供的参数调用其 onStartCommand(Intent, int, int) 方法。此时服务将继续运行，直到Context.stopService() 或 stopSelf() 被调用。请注意，多次调用 Context.startService() 不会嵌套（尽管它们确实会导致多次相应地调用 onStartCommand()），因此无论启动多少次调用 Context.stopService() 或 stopSelf() 后，服务将停止；但是，服务可以使用他们的 stopSelf(int) 方法来确保服务在启动的意图被处理之前不会停止。

客户端还可以使用 Context.bindService() 来获得到服务的持久连接。如果服务尚未运行（在执行此操作时调用 onCreate()），这同样会创建服务，但不会调用 onStartCommand()。客户端将接收服务从其 onBind(Intent) 方法返回的 IBinder 对象，然后允许客户端调用回服务。只要建立连接，服务就会保持运行（无论客户端是否保留对服务的 IBinder 的引用）。通常返回的 IBinder 是针对一个用aidl 编写的复杂接口。

服务既可以启动，也可以绑定连接。在这种情况下，只要服务已启动或有一个或多个使用 Context.BIND_AUTO_CREATE 标志的连接，系统就会保持服务运行。一旦这两种情况都不成立，就会调用服务的 onDestroy() 方法并有效地终止服务。从 onDestroy() 返回后，所有清理（停止线程、注销接收器）都应该完成。”

我希望这将有助于完成您的工作。

谢谢 ：）

# c++ - 读者作家 - 作家线程总是卡在多个读者线程

> ID：11596599
> 
> 赞同：1
> 
> 时间：2012-07-21T23:24:42.527
> 
> 标签：c++, windows, multithreading, writers

新人来了 我一直在研究读者/作家的问题解决方案。它适用于 1 位读者和 1 位作者。但是当我将 reader 修改为 2 时；作家线程总是饿死。帮我！

似乎 Writer 线程卡在某处等待 wrt 互斥锁。

```
#include <stdio.h>
#include <conio.h>
#include <windows.h>

HANDLE mutex, wrt;
int g_ReadCount = 0;
int g_GlobalData=0;

const int max = 2;
HANDLE reader[max], writer[max];
CRITICAL_SECTION rSect, wSect;
bool bTerminate = true;

DWORD Readers(LPVOID lpdwThreadParam ) 
{
  while(bTerminate)
  {
    WaitForSingleObject(mutex, INFINITE);
    g_ReadCount++;
    if(g_ReadCount == 1)
    {      
      WaitForSingleObject(wrt, INFINITE);
    }
    ReleaseMutex(mutex);

    EnterCriticalSection(&wSect);
    printf("ThreadId : %d --> Read data : %d  ReaderCount %d\n", GetCurrentThreadId(), g_GlobalData, g_ReadCount);
    LeaveCriticalSection(&wSect);

    WaitForSingleObject(mutex, INFINITE);
    g_ReadCount--;
    if(g_ReadCount == 0)
    {
        ReleaseMutex(wrt);
        printf("ThreadId : %d Realesed Mutex wrt\n", GetCurrentThreadId());
    }
    printf("ThreadId : %d ReaderCount %d\n", GetCurrentThreadId(), g_ReadCount);
    ReleaseMutex(mutex);
    printf("Reader ThreadId : %d Realesed Mutex mutex\n", g_ReadCount);
    Sleep(0);
   }
  return 0;
}

DWORD Writers(LPVOID lpdwThreadParam ) 
{
  int n = GetCurrentThreadId();
  int temp = 1;
  while(bTerminate)
  {  
    printf("ThreadId : %d Waiting for WRT\n", GetCurrentThreadId());
    WaitForSingleObject(wrt, INFINITE);
    printf("WRITER ThreadId : %d ***Got  WRT\n", GetCurrentThreadId());
    ++n;
    temp++;

    if(temp == 100)
    {
      //bTerminate = false;
    }

    EnterCriticalSection(&wSect);
    printf("Write by ThreadId : %d Data : %d   Temp %d\n", GetCurrentThreadId(), n, temp);
    g_GlobalData = n;
    LeaveCriticalSection(&wSect);
    ReleaseMutex(wrt);
  }

  printf("***VVV***Exiting Writer Thread\n");
  return 0;
}

void main()
{
  mutex = CreateMutex(NULL, false, "Writer");
  wrt = CreateMutex(NULL, false, "wrt");

  InitializeCriticalSection(&rSect);
  InitializeCriticalSection(&wSect);
  DWORD dwThreadId = 0;

  for(int i=0; i < max; i++)
  {
    reader[i] = CreateThread(NULL, //Choose default security
      0, //Default stack size
      (LPTHREAD_START_ROUTINE)&Readers,
      //Routine to execute
      (LPVOID) 0, //Thread parameter
      0, //Immediately run the thread
      &dwThreadId //Thread Id
      );
  }

  for(int i=0; i < 1; i++)
  {
    writer[i] = CreateThread(NULL, //Choose default security
      0, //Default stack size
      (LPTHREAD_START_ROUTINE)&Writers,
      //Routine to execute
      (LPVOID) 0, //Thread parameter
      0, //Immediately run the thread
      &dwThreadId //Thread Id
      );
  }

  getchar();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:32:00.580

如果有 1 个以上的读取线程，很可能`g_ReadCount`永远不会为零，因此`wrt`互斥锁永远不会被释放（从而使写入器挨饿）。您可能需要某种指标来表明编写器线程正在等待。然后读者线程需要在某些时候优先考虑作者。

例如，在我编写的一个实现中（不是说这是一种好方法，但它确实有效）我使用了一个通过原子递增/递减操作设置/清除的标志，该标志指示写入器线程是否正在等待锁定。如果是这样，读者会推迟。当然，在这种情况下，您还需要注意相反的情况，即编写器线程（如果有多个）可能会使读者饿死。读/写锁很棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T19:49:03.200

在解决这个问题时；我发现了有趣的问题。

学习期间；我们告诉最大计数 = 1 的信号量等于互斥量。这并不完全正确。

1) Mutex 不能被任何其他线程释放。2）在这种情况下可以使用信号量。

# shell - 在 shell 中使用管道执行变量

> ID：11596606
> 
> 赞同：2
> 
> 时间：2012-07-21T23:26:04.253
> 
> 标签：shell, variables, pipe

我有一个命令需要在 shell 脚本中重复使用。该命令包含一个管道，整个命令的输出将通过管道传输到其他命令。

例如，为了简单起见，假设命令是`ls | tee`. 然后我可能会将它通过管道传递给其他命令，says`ls | tee | someprogram`或`ls | tee | anotherprogram`.

所以我自然会想保留`ls | tee`一个变量。问题是我似乎无法执行带有管道的变量。

```
#!/bin/sh
TEST="ls | tee"
$TEST 
```

给出以下输出

```
ls: cannot access |: No such file or directory
ls: cannot access tee: No such file or directory 
```

如何执行像`$TEST`上面这样的变量，同时能够将输出传递给其他命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T23:29:58.550

简短的回答是`eval`。

```
eval $TEST somefile

eval $TEST otherfile | more 
```

但是，您需要注意这`eval`意味着引用特殊字符和空格等问题。如果一切都很简单（`TEST="ls -l | tee"`），那么很容易。如果你在参数或 shell 元字符中有空格，那么很难——非常难以——正确地做到这一点。那时，您最好创建一个函数或单独的 shell 脚本。

即便如此，使用函数或 shell 脚本可能会更好。

如果你的字符串`eval`来自用户，你就更担心了！

# c++ - 模板类中派生类中不可访问的成员

> ID：11596608
> 
> 赞同：1
> 
> 时间：2012-07-21T23:26:28.820
> 
> 标签：c++, templates

这是代码：

```
template <typename T>
struct Outer {
  struct InnerBase {
    int n;
    InnerBase() : n(42) { }
  };
  struct InnerChild : InnerBase {
    int getN() { return n; }
  };
}; 
```

这就是问题所在：

```
In member function 'int Outer<T>::InnerChild::getN()':
error: 'n' was not declared in this scope 
```

如果`Outer`不是模板，一切正常。怎么会这样？如何在模板中修复它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T23:41:29.060

`InnerBase`不是一个独立的类型，而是一个依赖类，因为它真的是`Outer<T>::InnerBase`. 因此`InnerChild`不知道它究竟是从谁那里继承的（想想专业化*！），因此它不知道这`n`实际上是一个名字。

要断言它`n`确实是一个类成员的名称，比如说`this->n`or `InnerBase::n`，或者`using InnerBase::n;`在`InnerChild`.

[*) 例如`template <> struct Outer<int>::InnerBase { typedef int n; };`]

# php - PHP变量作为Javascript弹出窗口不起作用

> ID：11596609
> 
> 赞同：-2
> 
> 时间：2012-07-21T23:26:36.280
> 
> 标签：php, javascript, session, popup

我正在使用一个名为 LeagueLink 的 PHP 变量。当用户未登录时，我希望变量读取文本（已经有一个联赛......），然后是一个指向弹出窗口的链接。到目前为止，它显示正确，除非我单击链接时没有任何反应。我想我只是因为混合了这么多的 PHP 和 JS 而出现了语法错误，但我不知道在哪里。如果可以，请帮助使弹出窗口链接正常工作...

```
<?php 
 // this starts the session 
 session_start();
 $_SESSION['userid'];
 $message = "";
 if ($_SESSION['userid'] == "") {
    $message = "You must create an account or sign in to play!";
    $LeagueLink = "Already have a league...<a href='JavaScript:newPopup(\"http://www.yourfantasyfootballreality.com/signin.php\");' class='two'>Sign In</a>";
 } else {
    $message = "Hello, " .$_SESSION['userid'] . " make your picks!";
 }

 ?> 

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script type="text/javascript" src="js/jquery-1.2.6.min.js"></script>
        <script type="text/javascript" src="js/jquery-easing-1.3.pack.js"></script>
        <script type="text/javascript" src="js/jquery-easing-compatibility.1.2.pack.js"></script>
        <script type="text/javascript" src="js/coda-slider.1.1.1.pack.js"></script>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="icon" href="http://www.indiana.edu/favicon.ico" />
        <title>YourFantasyFootballReality</title>
        <link rel="stylesheet" type="text/css" href="mystyle.css" />

    </head>
        <body>
            <?=$message?>
            <?=$LeagueLink?>
            <?=$ActionLink?>
        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T23:32:55.250

`JavaScript:newPopup`是一个需要定义的函数。

我认为您正在寻找的是以下内容：您不需要 javascript 在新窗口中打开页面。只需将`target`链接的属性设置为`_blank`.

```
$LeagueLink = "Already have a league...<a href='http://www.yourfantasyfootballreality.com/signin.php' target='_blank' class='two'>Sign In</a>"; 
```

**编辑**：如果您希望它弹出，而不是在新选项卡中打开，您可以在它生成后立即调整它的大小。将以下内容添加到您的 javascript。

```
function newPopup()
{
var url='http://www.yourfantasyfootballreality.com/signin.php';
windowProperties = "toolbar=no,menubar=no,scrollbars=no,statusbar=no,height=500px,width=500px,left=50%,top=50%";
popWin = window.open(url,'newWin',windowProperties);
} 
```

并保持你的 PHP 和以前一样。

# java - 我的代码有什么问题？为什么我有错误？

> ID：11596613
> 
> 赞同：-6
> 
> 时间：2012-07-21T23:27:52.050
> 
> 标签：java, syntax-error, runtime-error

所以我使用这段代码对一个数字数组进行排序，但它给了我一个错误，我需要一个“}”。我错过了一些“}”吗？任何帮助，将不胜感激！

```
double Median()
{
    int k,Hide;

    boolean IsThereASwap;
    IsThereASwap = false;

    while(IsThereASwap == false )
    {
        for ( k = 0 ; k < TheArrayAssingment.length - 1; k++)
        {
            if( TheArrayAssingment[k] > TheArrayAssingment[k+1] )
            {
                Hide = TheArrayAssingment[k+1];
                TheArrayAssingment[k+1] = TheArrayAssingment[k];
                TheArrayAssingment[k]   = Hide;
                IsThereASwap = true;
            }
        }
        if ( IsThereASwap == true)
        {
            IsThereASwap = false;
        }
        else
        {
            IsThereASwap = true;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T23:32:27.663

你没有返回一个值。该方法被声明为返回 a `double`，但是您在方法结束时没有返回任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T23:56:40.043

我发现您的代码存在太多问题，无法回答您的问题。

首先学习并遵循 Sun Java 编码标准。

一个好的 IDE 将使诸如括号不匹配和无法返回值之类的错误成为过去。尝试 IntelliJ；这是最好的。

这将比你的工作得更好：

```
package cruft;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

/**
 * StatisticsUtil has statistics utility methods
 * @author Michael
 * @link
 * @since 7/21/12 7:30 PM
 */
public class StatisticsUtil {

    public static void main(String[] args) {
        List<Double> values = new ArrayList<>();
        for (String arg : args) {
            values.add(Double.valueOf(arg));
        }
        System.out.println(String.format("median: %10.4f", getMedian(values)));
    }

    public static double getMedian(List<Double> values) {
        double median = 0.0;
        if (values != null) {
            int numValues = values.size();
            if (numValues > 0) {
                Collections.sort(values);
                if ((numValues%2) == 0) {
                    median = (values.get((numValues/2)-1)+values.get(numValues/2))/2.0;
                } else {
                    median = values.get(numValues/2);
                }
            }
        }
        return median;
    }

    public static double getMedian(double [] values) {
        double median = 0.0;
        if (values != null) {
            int numValues = values.length;
            if (numValues > 0) {
                Arrays.sort(values);
                if ((numValues%2) == 0) {
                    median = (values[(numValues/2)-1]+values[numValues/2])/2.0;
                } else {
                    median = values[numValues/2];
                }
            }
        }
        return median;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T23:33:29.690

你声明方法“Median()”返回一个双精度值，但你不返回任何东西。

# android - 锁定屏幕时如何让我的应用程序在 Android 上运行？

> ID：11596615
> 
> 赞同：4
> 
> 时间：2012-07-21T23:28:47.440
> 
> 标签：android, screen-lock

我正在开发一个 Android 应用程序。怎样才能让应用在锁屏时不被杀死，这样当我解锁手机时，我的应用就可以使用了？

就像游戏一样。当我解锁屏幕时，游戏仍然在线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:58:05.500

当您按下锁定屏幕时，基本上会发生游戏进入活动生命周期的暂停状态。您可以通过在 onPause 方法中添加一些日志来验证这一点。

此外，当 Activity 处于暂停状态并且占用大量内存时，Android 系统有权终止您的应用程序。您还可以在 Activity 生命周期的 onResume 方法中添加一些日志。

我强烈建议您参考下面的链接以了解 android 活动生命周期。另请注意，游戏的一般模式是在 onPause 方法中保存游戏状态，然后在 onResume 方法中检索游戏的保存状态。

还要确保您在 onPause 方法中释放对象，因为它们占用内存系统似乎正在杀死您的应用程序。例如：-如果您使用的是位图对象之类的东西，oyu 可以释放该对象。

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# python - 我不懂 Python (2.7.3) 中的编码和解码

> ID：11596623
> 
> 赞同：16
> 
> 时间：2012-07-21T23:30:09.630
> 
> 标签：python, string, unicode, decode, encode

我试图通过自己`encode`和`decode`Python 来理解，但对我来说没有什么是真正清楚的。

1.  `str.encode([encoding,[errors]])`
2.  `str.decode([encoding,[errors]])`

首先，我不明白这两个函数中“编码”参数的必要性。

每个函数的输出是什么，它的编码是什么？每个函数中的“编码”参数有什么用？我不太了解“字节字符串”的定义。

我有一个重要的问题，有没有办法从一种编码传递到另一种编码？我在 ASN.1 上阅读了一些关于“八位字节字符串”的文本，所以我想知道它是否与“字节字符串”相同。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-21T23:42:16.993

它在 Python 2 中稍微复杂一点（与 Python 3 相比），因为它将“字符串”和“字节字符串”的概念混为一谈，但请参阅[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最小值](http://www.joelonsoftware.com/articles/Unicode.html). 从本质上讲，您需要了解的是，“字符串”和“字符”是计算机无法直接表示的抽象概念。字节串是直接来自磁盘的原始字节流（或者可以直接从磁盘写入）。`encode`从抽象到具体（你最好给它一个 unicode 字符串，它会给你一个字节字符串）；`decode`反其道而行之。

编码规则是“a”应该用字节表示`0x61`，“α”应该用两字节序列表示`0xc0\xb1`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-22T00:04:50.050

我在 PyCon、[Pragmatic Unicode 或 How Do I Stop The Pain](https://nedbatchelder.com/text/unipain.html)的演讲涵盖了所有这些细节。

简而言之，Unicode 字符串是称为代码点的整数序列，而字节串是字节序列。编码是一种将 Unicode 代码点表示为一系列字节的方法。所以`unicode_string.encode(enc)`将返回用“enc”编码的Unicode字符串的字节串，`byte_string.decode(enc)`并将返回用“enc”解码字节串创建的Unicode字符串。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-21T23:59:22.390

Python 2.x 有两种类型的字符串：

*   `str`= “字节串” = 八位字节序列。这些用于“遗留”字符编码（例如[windows-1252](http://en.wikipedia.org/wiki/Windows-1252)或[IBM437](http://en.wikipedia.org/wiki/Code_page_437)）和原始二进制数据（例如`struct.pack`输出）。
*   `unicode`= "Unicode 字符串" = [UTF-16](http://en.wikipedia.org/wiki/UTF-16)或[UTF-32](http://en.wikipedia.org/wiki/UTF-32)序列，具体取决于 Python 的构建方式。

此模型已[针对 Python 3.x 进行了更改](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#text-vs-data-instead-of-unicode-vs-8-bit)：

*   2.x`unicode`变成 3.x `str`（并且`u`前缀从文字中删除）。
*   引入了一种`bytes`类型来表示二进制数据。

[字符编码](http://www.joelonsoftware.com/articles/Unicode.html)是 Unicode 字符串和字节字符串之间的映射。要将 Unicode 字符串转换为字节字符串，请使用以下`encode`方法：

```
>>> u'\u20AC'.encode('UTF-8')
'\xe2\x82\xac' 
```

要转换另一种方式，请使用以下`decode`方法：

```
>>> '\xE2\x82\xAC'.decode('UTF-8')
u'\u20ac' 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-21T23:42:03.330

是的，字节串是八位字节串。输入/输出文本（从/到控制台、文件、网络……）时发生编码和解码。您的控制台可能在内部使用 UTF-8，您的 Web 服务器提供 latin-1，并且某些文件格式需要奇怪的编码，例如 Bibtex 的重音符号：`fran\c{c}aise`. 您需要在输入/输出上从/到它们进行转换。

这些`{en|de}code`方法可以做到这一点。它们通常在幕后调用（例如，`print "hello world"`将字符串编码为终端使用的任何内容）。

# java - Java DOM：Evaluate 方法中的错误；在特定位置添加元素

> ID：11596624
> 
> 赞同：2
> 
> 时间：2012-07-21T23:30:23.933
> 
> 标签：java, xml, dom, xml-parsing

我正在尝试使用 DOM 在 XHTML 文件的特定位置（在 id="123" 的 div 标记之后）添加一个元素（javascript），我正在使用 getElementById()。因此，为了定位元素的位置，我使用了两种方法。1：不使用 XPath（我在我的代码中评论过） 2：使用 XPath（在论坛中提出建议后）从第一种方法我能够获得相应类的值，其中 id="123" 但它也抛出 NullPointer 异常。所以我使用了 XPath，但是在使用 evaluate(String, Object) 方法时它显示错误。谁能告诉我我需要在这里传递什么参数以及 'sxp' --> NodeList nodes = xPath.evaluate(sxp); 感谢您！

我的 XHTML：

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
<script></script>
</head>
<body>
<div id="outer">
<div id="main">
<div id="nD">
<p id="nT">XSD</p>
</div>

<div class="TF" id="123">
<!--HERE I NEED TO INCLUDE ONE JAVASCRIPT-->

<div class="iDevice">
<img/>
<span>XYZ</span><br/>
<div>
<div>
</div>

<div class="q">
<br/><br/>
<div>1<span> ABC</span> 
</div>
<br/>T <input/> F <input/>
<div></div>
</div></div></div>
</div></div></div>
</body></html> 
```

Java 代码：

```
 public class Dom {
        protected static final String XML_FILE_NAME = "C:\\tmp\\part_1.html";
        protected static final String XML_FILE_NAME_COPY = "C:\\tmp\\part_1_copy.html";

        public static void main(String args[]) throws XPathExpressionException {
       try {
        File file = new File(XML_FILE_NAME);

        //Create instance of DocumentBuilderFactory
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setValidating(false);
        factory.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false);
        factory.setNamespaceAware(true);
        //Get the DocumentBuilder
        DocumentBuilder docBuilder = factory.newDocumentBuilder();

        //Using existing XML Document
        Document doc = docBuilder.parse(file);

        // Get the head element by tag name directly
            Node head = doc.getElementsByTagName("head").item(0);

            //WITHOUT XPATH

        /*    NodeList nodelist=doc.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","div");  
            for (int i=0; i<nodelist.getLength(); i++) {  
                Element elem=(Element)nodelist.item(i);  
                if (elem.getAttributeNode("id").getValue().equals("123")) {
                    //Printing the value for testing
                    System.out.println(elem.getAttributeNode("class").getValue());  
                }  
            } */

            //WITH XPATH
            String sxp="/x:html/x:body/x:div/x:div/x:div[@id = '123']";  
            XPath xPath = XPathFactory.newInstance().newXPath();  
            xPath.setNamespaceContext(new NamespaceContext() {  
                  public String getNamespaceURI(String prefix) {      
                      if (prefix.equals("x")) {  
                          return "http://www.w3.org/1999/xhtml";  
                      }  
                      return XMLConstants.NULL_NS_URI;  
                  }  

                  public String getPrefix(String namespaceURI) {  
                      if (namespaceURI.equals("http://www.w3.org/1999/xhtml")) {  
                          return "xhtml";  
                      }  
                      return null;  
                  }  

                  public Iterator <String> getPrefixes(String namespaceURI) {  
                      return null;  
                  }
            });
    //Before editing 
      //       NodeList nodes = xPath.evaluate(sxp); 
//After Editing but now I get the exception at this line
             NodeList nodes=(NodeList)xPath.evaluate(sxp,doc,XPathConstants.NODESET); 

            for (int i=0; i<nodes.getLength(); i++) {  
                Element elem=(Element)nodes.item(i);  
                //each one is the searched div element with id attribute 123 
                elem.setIdAttribute("id", true);
                Element found = doc.getElementById("123");

                Element script2 = doc.createElement("script");
                script2.setAttribute("src", "cal.js");
                script2.setAttribute("type","text/javascript");
                script2.setAttribute("xml:space","preserve");
                found.appendChild(script2);
          } 

        //set up a transformer
        ....
        .....
      } 
    } 
```

我得到的错误 -

> 线程“主”javax.xml.transform.TransformerException 中的异常：错误引用的文字...预期的单引号！在 com.sun.org.apache.xpath.internal.compiler.XPathParser.error(Unknown Source) 在 com.sun.org.apache.xpath.internal.compiler.Lexer.tokenize(Unknown Source) 在 com.sun.org .apache.xpath.internal.compiler.Lexer.tokenize(Unknown Source) at com.sun.org.apache.xpath.internal.compiler.XPathParser.initXPath(Unknown Source) at com.sun.org.apache.xpath.internal .XPath.(Unknown Source) at com.sun.org.apache.xpath.internal.XPath.(Unknown Source) at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.eval(Unknown Source) at com .sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate(Unknown Source) at org.dom.Dom.main(Dom.java:78) ---------------链接到 ------------------ javax.xml.xpath。XPathExpressionException at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate(Unknown Source) at org.dom.Dom.main(Dom.java:78) 原因：javax.xml.transform.TransformerException：引用错误字面意思...预期的单引号！在 com.sun.org.apache.xpath.internal.compiler.XPathParser.error(Unknown Source) 在 com.sun.org.apache.xpath.internal.compiler.Lexer.tokenize(Unknown Source) 在 com.sun.org .apache.xpath.internal.compiler.Lexer.tokenize(Unknown Source) at com.sun.org.apache.xpath.internal.compiler.XPathParser.initXPath(Unknown Source) at com.sun.org.apache.xpath.internal .XPath.(Unknown Source) at com.sun.org.apache.xpath.internal.XPath.(Unknown Source) at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.eval(Unknown Source) .. . 2 更多 internal.jaxp.XPathImpl.evaluate(Unknown Source) at org.dom.Dom.main(Dom.java:78) 原因：javax.xml.transform.TransformerException：错误引用的文字...预期的单引号！在 com.sun.org.apache.xpath.internal.compiler.XPathParser.error(Unknown Source) 在 com.sun.org.apache.xpath.internal.compiler.Lexer.tokenize(Unknown Source) 在 com.sun.org .apache.xpath.internal.compiler.Lexer.tokenize(Unknown Source) at com.sun.org.apache.xpath.internal.compiler.XPathParser.initXPath(Unknown Source) at com.sun.org.apache.xpath.internal .XPath.(Unknown Source) at com.sun.org.apache.xpath.internal.XPath.(Unknown Source) at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.eval(Unknown Source) .. . 2 更多 internal.jaxp.XPathImpl.evaluate(Unknown Source) at org.dom.Dom.main(Dom.java:78) 原因：javax.xml.transform.TransformerException：错误引用的文字...预期的单引号！在 com.sun.org.apache.xpath.internal.compiler.XPathParser.error(Unknown Source) 在 com.sun.org.apache.xpath.internal.compiler.Lexer.tokenize(Unknown Source) 在 com.sun.org .apache.xpath.internal.compiler.Lexer.tokenize(Unknown Source) at com.sun.org.apache.xpath.internal.compiler.XPathParser.initXPath(Unknown Source) at com.sun.org.apache.xpath.internal .XPath.(Unknown Source) at com.sun.org.apache.xpath.internal.XPath.(Unknown Source) at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.eval(Unknown Source) .. . 2 更多 transform.TransformerException：错误引用的文字...预期的单引号！在 com.sun.org.apache.xpath.internal.compiler.XPathParser.error(Unknown Source) 在 com.sun.org.apache.xpath.internal.compiler.Lexer.tokenize(Unknown Source) 在 com.sun.org .apache.xpath.internal.compiler.Lexer.tokenize(Unknown Source) at com.sun.org.apache.xpath.internal.compiler.XPathParser.initXPath(Unknown Source) at com.sun.org.apache.xpath.internal .XPath.(Unknown Source) at com.sun.org.apache.xpath.internal.XPath.(Unknown Source) at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.eval(Unknown Source) .. . 2 更多 transform.TransformerException：错误引用的文字...预期的单引号！在 com.sun.org.apache.xpath.internal.compiler.XPathParser.error(Unknown Source) 在 com.sun.org.apache.xpath.internal.compiler.Lexer.tokenize(Unknown Source) 在 com.sun.org .apache.xpath.internal.compiler.Lexer.tokenize(Unknown Source) at com.sun.org.apache.xpath.internal.compiler.XPathParser.initXPath(Unknown Source) at com.sun.org.apache.xpath.internal .XPath.(Unknown Source) at com.sun.org.apache.xpath.internal.XPath.(Unknown Source) at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.eval(Unknown Source) .. . 2 更多

# java - 在 JDBC 中运行教程示例时出错：UnsupportedClassVersionError

> ID：11596625
> 
> 赞同：3
> 
> 时间：2012-07-21T23:30:26.760
> 
> 标签：java, jdbc, ant, compilation, versions

**关于我：**

我是一个新程序员，不太确定 Apache-Ant 的工作原理以及它的作用

* * *

**目标：**

运行[javaconnector jcdb 教程中的示例程序](http://docs.oracle.com/javase/tutorial/jdbc/basics/gettingstarted.html)

* * *

**平台背景：**

我的机器是 OSX 10.5.8 32 位

“ `which java`”给出“ `/usr/bin/java`”，链接到“ `/System/Library/Frameworks/JavaVM.frameworks/Versions/A/Commands/java`”

“ `which javac`”给出“ `/usr/bin/javac`”，链接到“ `/System/Library/Frameworks/JavaVM.frameworks/Versions/A/Commands/javac`”

" `echo $JAVA_HOME`" 给出一个空行

Applications/Utilities 中的 Java Preferences 应用列出了 Java 的四个版本：1.6.0_26_b03-385（64 位）、1.5.0_30-b03（32 位）、1.5.0_30-b03（64 位）、1.4.2_22（32 位） . 目前检查 1.6.0 和两个 1.5.0 版本。

注意：32 位 OSX 10.5.8 没有 Java 1.6

* * *

**我做了什么：**

首先我下载了[​​ connector/j](http://www.mysql.com/downloads/connector/j)解压它，将它移动到`/usr/local/mysql-connector-java`，按照 README.txt 第 3.1 和 3.2 节安装它，包括修改 CLASSPATH。我已经拥有并使用 mysql

接下来，我得到了 1.8.4 版本的 ant 二进制[发行](http://ant.apache.org/bindownload.cgi)版，并按照[手册](http://ant.apache.org/manual/install.html)进行了安装。值得注意的是，该手册指出 apache ant 可与 Java 1.5 一起使用。" `ant -version`" 返回了正确的版本，1.8.4

然后我下载了[教程文件](http://docs.oracle.com/javase/tutorial/jdbc/basics/examples/zipfiles/JDBCTutorial.zip)，将文件解压缩到一个目录中，并`build.xml`按照[教程的说明](http://docs.oracle.com/javase/tutorial/jdbc/basics/gettingstarted.html)`properties/mysql-build-properties.xml`修改了文件。

最后，我使用“”编译了包和示例`ant jar`，并使用“”创建了数据库、表和填充表`ant create-mysql_database`。我也跑了“ `ant setup`”为了好

根据教程，我现在应该能够通过将我的 shell 放在教程目录并运行 " `ant <<sample_name>>`" 来运行示例。因此，我尝试运行教程建议的示例“ `ant runct`”。

在这个过程的中间，我从未在应用程序/实用程序的 Java 首选项中更改我使用的 Java；我确实尝试了使用 1.5.0_30 和 1.6.0_26 的过程，如下所述

* * *

**我的问题：**

运行“ `ant <<sample_name>>`”（例如“ `ant runct`”）后，出现以下错误：

> 构建文件：/Users/adam/Desktop/JDBCTutorial/build.xml
> 
> runct：[java] 线程“main”中的异常 java.lang.UnsupportedClassVersionError：com/oracle/tutorial/jdbc/JDBCTutorialUtilities：在 java.lang.ClassLoader.defineClass1（本机方法）[java] 中不受支持的 major.minor 版本 51.0 [java] ] 在 java.lang.ClassLoader.defineClassCond(ClassLoader.java:631) [java] 在 java.lang.ClassLoader.defineClass(ClassLoader.java:615) [java] 在 java.security.SecureClassLoader.defineClass(SecureClassLoader.java: 141) [java] 在 java.net.URLClassLoader.defineClass(URLClassLoader.java:283) [java] 在 java.net.URLClassLoader.access$000(URLClassLoader.java:58) [java] 在 java.net.URLClassLoader$1。在 java.security.AccessController.doPrivileged(Native Method) [java] 在 java.net.URLClassLoader 运行（URLClassLoader.java:197）[java]。findClass(URLClassLoader.java:190) [java] at java.lang.ClassLoader.loadClass(ClassLoader.java:306) [java] at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) [java] at java.lang.ClassLoader.loadClass(ClassLoader.java:247) [java] Java 结果：1
> 
> 构建成功总时间：1秒

* * *

**我的自我纠正尝试：**

据我从谷歌搜索得知，出现错误是因为我为教程下载并尝试运行的文件是使用 java 编译的，而不是我试图用来运行文件的 java。因此，我尝试使用 1.6.0 版本，将其放在列表顶部`Applications/Utilities/Java_Preferences`，并使用“”确认它正在使用`java -version`，然后执行上述过程。同样的错误。

我还尝试重新解压缩教程并修改与上述相同的 .xml 文件，但将`$JAVA`and`$JAVAC`属性更改`mysql-sample-properties.xml`为指向中的文件`/System/Library/Frameworks/JavaVM.framwork/Versions/1.5.0/Home/bin`，即我知道其编号的版本，而不是指向文件的“ `/usr/bin`”中的文件在`/System/Library/Frameworks/JavaVM.framwork/Versions/A/Home/bin`. 然后我重新运行“ `ant jar`”，“ `ant create-mysql_database`”和“ `ant setup`”；据我了解，这应该使用我指定的编译器重新编译 .java 文件（正确吗？）。但是，当我运行“ `ant runct`”时，我遇到了同样的错误

我还尝试了以下方法，都将 $JAVA 和 $JAVAC 重新设置为`mysql-sample-properties.xml`默认值 ( `i.e. /usr/bin/java and /usr/bin/javac`)，并且没有重新设置。我`$JAVA_HOME`在我的 .profile 中设置为，通过运行返回上述路径并返回 1.5.0_30`/System/Library/Frameworks/JavaVM.framwork/Versions/1.5.0/Home`测试正确的 java 使用，然后重新运行“ ”、“ ”和“ ”。当我运行“ ”时，我得到了同样的错误。`which java``java -version``ant jar``ant create-mysql_database``ant setup``ant runct`

注意：本教程中的 .java 文件似乎使用了 Java 1.6 中添加的一些对象/语法

一个重要的问题是我不知道使用的是哪个 Java Ant。

* * *

**附加问题：**

为什么“ `usr/bin/java(c)`”指向版本“A”？

什么是Java版本A？？？

如何在 32 位机器上安装 64 位 java？它只是以某种方式模拟64位机器吗？如果是这样，对于某些任务，它的运行速度是否比 32 位版本慢？

为什么我有 64 位 1.5 Java？

ant 使用哪个 Java 编译器和 Java？

当我更改列表顶部的 Java 时`Applications/Utilties/Java_Preferences`，我可以通过执行“java -version”确认机器正在使用正确的默认 Java，并且可以通过执行“”检查正在使用的 Java 的路径`which java`。无论哪个Java在列表的顶部，即正在使用，“ `which java`”指向“ `usr/bin/java`”，这是“”的快捷方式`/System/Library/Frameworks/JavaVM.frameworks/Versions/A/Commands/java`；无论根据`Applications/Utilities/Java_Preferences`和“ `java -version`”使用哪个版本的Java，这都是相同的；机器在指向同一个目录/文件时如何使用不同版本的 Java？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T23:51:57.583

来自[蚂蚁手册](http://ant.apache.org/manual/running.html)：

```
Environment Variables

The wrapper scripts use the following environment variables (if set):

JAVACMD - full path of the Java executable. Use this to invoke a different JVM than JAVA_HOME/bin/java(.exe). 
```

因此，您应该`JAVA_HOME`设置正确的 Java > 1.5 JDK。但是，由于您`JAVA_HOME`的未设置，因此我不清楚当前正在使用哪一个 Ant。如果您在 32 位系统上，您应该卸载 64 位版本的 Java，我认为它们无法工作。

我不是 OSX 专家，所以我也对`java`可执行文件的完整路径感到困扰，通常它应该在一个`bin`文件夹中，其父文件夹是你应该为`JAVA_HOME`环境变量设置的文件夹（如 Ant 手册中所述）。你可以在你的系统上搜索 java 可执行文件`find -name java -perm +x`，也许你可以通过这种方式找到一个干净的 java 安装。

否则，您的解决方案之一是从 oracle 网站下载 JDK，将其解压缩到类似的文件夹中`/opt/java_xxx`并将其用作`JAVA_HOME`. 它是我所做的，例如在我的系统上并排安装 java 6 和 7。

# css - 如何通过将鼠标悬停在另一个 div 上来更改 div 的背景？

> ID：11596626
> 
> 赞同：1
> 
> 时间：2012-07-21T23:30:31.107
> 
> 标签：css, background, background-image, background-color

我正在尝试更改整个页面的`body`背景颜色，当用户将鼠标悬停在该页面上的缩略图上时（缩略图位于`div`inside `body`）。有没有办法只使用 CSS 来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T23:34:09.920

答案：没有。

您必须上去，选择`div`' 的父级，然后选择`div`' 的父级父级...直到到达`body`. 没有办法只使用 CSS 来选择元素的父级（如果您想知道原因，[这篇文章可能会很有用）......但是（在](http://snook.ca/archives/html_and_css/css-parent-selectors)[CSS4](http://dev.w3.org/csswg/selectors4/)中会有一个父级选择器）。

如果您想这样做，JavaScript 是您的最佳选择，而且非常简单。

如果你有这样的事情：

```
<div class='change-bg'></div>​ 
```

在您的 HTML 中，JavaScript 很简单：

```
var el = document.querySelector('.change-bg');
el.addEventListener('mouseover', function(){
    document.body.style.backgroundColor = 'red';
}, true);
el.addEventListener('mouseout', function(){
    document.body.style.backgroundColor = 'black';
}, true); 
```

演示：http: [//jsfiddle.net/thebabydino/TDSUL/](http://jsfiddle.net/thebabydino/TDSUL/)

如果您使用的是 jQuery，它会变得更加容易：

```
$('.change-bg').hover(function(){
    $('body').css({'background': 'red'})},
function(){
    $('body').css({'background': 'black'})
});​​ 
```

演示：http: [//jsfiddle.net/thebabydino/YWDeA/](http://jsfiddle.net/thebabydino/YWDeA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T23:36:13.167

这是不可能的。只需使用 JS，例如：

```
<div data-bgcolor="red"><div>    

$("div").mouseover(function(){
  $("body").css("background-color", $(this).attr("data-bgcolor"));
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T23:34:32.260

不是这样的，不。您可以通过 CSS 选择器更改后代的属性，但不能更改祖先的属性。XPath 将允许这样的事情，但这在 CSS 中是不可能的。所以我想在这种情况下你需要求助于 JavaScript。

# iphone - 是否在 ScrollView 后面查看？以及如何使用情节提要

> ID：11596628
> 
> 赞同：1
> 
> 时间：2012-07-21T23:31:09.943
> 
> 标签：iphone, xcode, uiview, uiscrollview, storyboard

我对一些视图使用 UIScrollView 来显示一些长文本视图。我正在使用 XCode 4，在 Storyboard 中，我已将 UIScrollView 直接放置到 ViewController 场景中。

现在我在教程和资料中看到人们在视图控制器和滚动视图之间有一个常规视图。有这样做的理由吗？

我已经尝试按照[本](http://www.geekylemon.com/WEBPROTECT-xcodescroll.htm)教程在我的应用程序中执行相同的操作，但我无法使其与情节提要一起使用，找不到连接等。

看起来它在模拟器中按我的方式工作得很好，但我是否应该找到一种方法在它后面放置一个视图？如果是这样，我怎样才能用故事板正确地做到这一点？

这是我如何完成它的代码，+ 建立了从 Outlet 到 Storyboard 中的 ScrollView 的连接。

InfoViewController.h

```
#import <UIKit/UIKit.h>

@interface InfoViewController : UIViewController{
    IBOutlet UIScrollView *theScroller;
}

@end 
```

InfoViewController.m

```
#import "InfoViewController.h"

@interface InfoViewController ()

@end

@implementation InfoViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [theScroller setScrollEnabled:YES];
    [theScroller setContentSize:CGSizeMake(320,750)];

    self.navigationItem.title = @"Title";
}
@end 
```

PS。我找不到在情节提要中向下滚动滚动视图的方法，如果那样的话，用鼠标滚动它是行不通的，有我的设置方法可能禁用了这个..？

并且在考虑时：如果我希望滚动视图小于视图本身，我应该将它放在情节提要的视图中，对吗？因此，如果您知道有关如何执行此操作的教程，或者您可以描述该过程，请随意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T23:46:29.877

因为视图对象是您的应用程序与用户交互的主要方式，所以它们有许多职责。这里仅仅是少数：

**绘图和动画**

视图使用 UIKit、Core Graphics 和 OpenGL ES 等技术在其矩形区域中绘制内容。某些视图属性可以设置为新值。

**布局和子视图管理**

一个视图可能包含零个或多个子视图。每个视图都定义了与其父视图相关的自己的默认大小调整行为。视图可以根据需要手动更改其子视图的大小和位置。

**事件处理**

[视图是一个响应者，可以处理UIResponder 类](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/cl/UIResponder)定义的触摸事件和其他事件。视图可以使用[addGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/addGestureRecognizer%3a) : 方法来安装手势识别器来处理常见的手势。

如果您决定使用 UIScrollView 而不是 UIView 则不能覆盖这些方法，以防您将来需要相同的应用程序。

我希望我的回答可以帮助您了解 UIView 的需求。

这是一个非常好的教程，它将指导您。 [iPhone 中的 ScrollView 示例](http://www.edumobile.org/iphone/iphone-programming-tutorials/scrollview-example-in-iphone-2/)

这是另一个非常好的教程以及故事板。 [如何使用 UIScrollView 滚动](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)

谢谢 ：）

# eclipse - Eclipse 设置观察点而不是断点

> ID：11596630
> 
> 赞同：1
> 
> 时间：2012-07-21T23:31:25.630
> 
> 标签：eclipse, debugging, breakpoints

这曾经发生在我身上。右键单击边距并切换断点或 Ctrl Shift B 或双击边距通常会给出一个带有蓝色圆圈的断点。但今天 Eclipse 只使用眼镜和铅笔图标设置观察点。这种情况以前发生在我身上一次，我认为它就这样消失了。有谁知道如何解决这一问题。我想要断点而不是观察点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T18:57:34.047

当您切换字段时会发生这种情况。（Eclipse 通常会自动设置适当类型的断点）

在某些情况下，Eclipse 似乎无法注册您选择了一个方法而不是一个字段。发生这种情况时，只需将光标放在适当的单词上（例如 getX() ），直到 eclipse 注意到它。（在这种情况下，您会在左侧看到一个蓝色条，选择该方法的每一行）

# database - 为存储在数据库中的新闻文章提供格式的最佳方式

> ID：11596631
> 
> 赞同：0
> 
> 时间：2012-07-21T23:31:46.497
> 
> 标签：database, database-design, web

我正在开发一个新闻网页，我想知道将新闻文章存储到数据库中的最佳实践是什么。问题是，如果我以纯文本形式存储新闻文章，当我在页面上显示新闻正文时，我将无法插入链接或为新闻正文提供任何 HTML 格式。另一方面，我已经看到将已经格式化为 HTML 或 XML 或任何其他格式化语言的数据存储可以将数据库信息耦合到 HTML 环境。

那么，有没有办法做到这一点呢？我一直在考虑以两种方式将新闻存储到数据库中。有没有更好的方法来解决这个问题？

我正在使用 php（Symfony2 更具体），如果标记语言是这样做的方法，你推荐哪一种？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T00:12:54.677

我开发/工作过的大多数系统都存储了标记的内容和原始的基本内容。存储原始基础内容的主要原因是布局（Css、样式、Html 设计等）通常会频繁更改。

当升级网站设计然后不得不编写自定义解析器来去除标记时，它可能会给迁移/升级项目增加大量开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T16:40:25.010

您应该使用 ckEditor 作为您的链接标记或 HTML，如 --- namelink, www.example.com --- 然后您的 php 格式它。

# c# - 如何从android连接到FTP服务器？

> ID：11596636
> 
> 赞同：0
> 
> 时间：2012-07-21T23:32:12.633
> 
> 标签：c#, java, android, ftp

我想从我的 android 程序以编程方式将包含一些信息的文本文档添加到我的 Windows FTP 服务器。我该怎么做呢？总的来说，我对网络编程和 Android 还是很陌生，所以如果有人可以给我一个分步指南或指点我一个，那将非常有帮助。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T01:59:48.183

您需要一个 ftp 客户端库。在java中，Commons Net库支持ftp客户端，请看博文：[在Android中使用apache commons Ftp库](http://lavalatwork.blogspot.tw/2010/09/using-apache-commons-ftp-library-in.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T19:59:13.877

您可以使用的另一个是 ftp4j ( [http://www.sauronsoftware.it/projects/ftp4j/manual.php](http://www.sauronsoftware.it/projects/ftp4j/manual.php) )

这是一个例子：

```
FTPClient ftpClient = new FTPClient();
ftpClient.connect(serverName);
ftpClient.login(username, password);
ftpClient.setPassive(true);
ftpClient.setType(FTPClient.TYPE_BINARY);
final FTPFile[] remoteFiles = ftpClient.list(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T23:41:12.877

我还没有这样做，但你可以尝试/检查

java.net.URLCONnection 和 java.net.URL，它们也支持 FTP

# javascript - 使用 XhrIo 填充 Object 的变量

> ID：11596640
> 
> 赞同：2
> 
> 时间：2012-07-21T23:32:32.457
> 
> 标签：javascript, google-closure-library

我正在尝试将 AJAX 调用中的字典单词列表放入我在 JavaScript 中定义的 Dictionary 对象中。我正在使用 Google Closure Toolkit 进行如下调用：

```
frankenstein.app.Dictionary = function(dictionaryUrl) {
  /** @private */ this._words = new goog.structs.Set();
  log("sending request");
  goog.net.XhrIo.send(dictionaryUrl, this.initDictionary);
}

frankenstein.app.Dictionary.prototype.initDictionary = function(e) {
    var xhr = e.target;
    this._words.addAll(xhr.getResponseText().split('\n'));
    log('Received dictionary file with ' + this._words.size());
} 
```

不幸的是，在 initDictionary 方法内部，“this”指的是 goog.net.XhrIo 而不是 Dictionary 对象。有没有一种方法可以让我在 initDictionary 中获取引用为 this 的 Dictionary 对象？或者其他一些设置变量的方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:00:23.873

回调`frankenstein.app.Dictionary.prototype.initDictionary`可以绑定到以下实例`frankenstein.app.Dictionary`：

```
/** @constructor */
frankenstein.app.Dictionary = function(dictionaryUrl) {
  /** @private */ this._words = new goog.structs.Set();
  log("sending request");

  var xhr = new goog.net.XhrIo();
  goog.events.listenOnce(xhr, goog.net.EventType.COMPLETE, this.initDictionary,
      false /* capture phase */, this);
  xhr.send(dictionaryUrl);
};

frankenstein.app.Dictionary.prototype.initDictionary = function(e) {
  var xhr = /** @type {goog.net.XhrIo} */ (e.target);
  this._words.addAll(xhr.getResponseText().split('\n'));
  log('Received dictionary file with ' + this._words.size());
  xhr.dispose(); // Dispose of the XHR if it is not going to be reused.
}; 
```

`goog.events.listenOnce`（或者， ）的第五个参数`goog.events.listen`是一个可选对象，监听器将在其范围内被调用。

# javascript - JavaScript 等价于 PHP 传递参数

> ID：11596652
> 
> 赞同：-9
> 
> 时间：2012-07-21T23:36:01.680
> 
> 标签：javascript

在 PHP 中，我使用了这个：

```
do_it( $var2 = 'something_cool' );

function do_it( $var1, $var2 ) {
// does something
} 
```

在 JavaScript 中，我不太确定这种表示法。

```
do_it( var2 = 'something_cool' ); // This isn't right, I don't think.

function do_it( var1, var2 ) {
// does something
} 
```

我想定义 var2 但将 var1 留空。对于有问题的行，我的 do_it 应该是什么样的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T23:39:14.780

两者都不对。在 PHP`var1`中将在函数中获取该值。在 JS 中，如果你不想给第一个参数赋值，就让它`null`.

```
do_it(null, 'something_cool'); 
```

然后在函数内部，检查它是否为空，如果是，则可能给它一个默认值。或者只是重新排序它们，这样你就不必了。在 JS 中，您可以将任意数量的参数传递给函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T23:39:09.903

PHP 版本将打印缺少第二​​个参数的错误。对于 Javascript 中的可选变量：

```
function A(var1, var2)
{
     if (!var2)
          var2 = "default";
}

A(1); 
```

# python - 将 C/C++ 代码“typedef struct”迁移到 python

> ID：11596654
> 
> 赞同：1
> 
> 时间：2012-07-21T23:36:17.613
> 
> 标签：python

我有个问题：

我尝试在 python 上编写一个 ANT 算法，但我有一个 C++ 代码，我不知道如何编写这部分：

```
typedef struct {
    int x;
    int y;
} cityType;

typedef struct {
    int curCity;
    int nextCity;
                       //MAX_CITIES
    unsigned char tabu[15];
    int pathIndex;
                       //MAX_CITIES
    unsigned char path[15];
    double tourLength;
} antType; 
```

我对此进行编程，但我不确定

```
class CityType:
    def __init__(self):
        self.x = arange(MAX_CITIES)
        self.y = arange(MAX_CITIES)

# Class AntType
class AntType:
    def __init__(self):
        self.curCity = arange(MAX_ANTS)
        self.nextCity = arange(MAX_ANTS)
        self.tabu = arange(MAX_ANTS)
        self.pathIndex = arange(MAX_ANTS)
        self.path = arange(MAX_ANTS)
        self.tourLength = arange(MAX_ANTS) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T23:48:27.007

这并没有什么错。但是在尝试逐字翻译时，您并没有使用 Python 提供的全部功能和便利性。

例如，如果 CityType 只有两个成员，`x`并且`y`，可能只是长度为 2 的元组更符合 Python 风格。[NamedTuple](http://docs.python.org/dev/library/collections.html#collections.namedtuple)提供对元组成员“按名称”的访问。

# android - 获取用户的 Android Play/Market ID

> ID：11596656
> 
> 赞同：0
> 
> 时间：2012-07-21T23:36:57.417
> 
> 标签：android

是否有可能以某种方式获取他们当前在 Andoid Play 上登录的用户的 ID？

这对开发人员来说真的很有用。他们不需要让用户注册每个应用程序。他们可以通过他们的 Android Play ID 来识别用户。

# python - 使用结构和管道脚本文本运行 shell 脚本到 shell 的标准输入

> ID：11596657
> 
> 赞同：14
> 
> 时间：2012-07-21T23:37:23.193
> 
> 标签：python, fabric

有没有办法通过将多行 shell 脚本通过管道传输到[fabric](http://fabfile.org)中的远程 shell 的标准输入来执行？或者我必须总是将它写入远程文件系统，然后运行它，然后删除它？我喜欢发送到标准输入，因为它避免了临时文件。如果没有fabric API（而且似乎没有基于我的研究），大概我可以直接使用该`ssh`模块。基本上，我希望`fabric.api.run`不限于作为命令行参数传递给 shell 的 1 行命令，而是采用完整的多行脚本并将其写入远程 shell 的标准输入。

为了澄清我想要这个命令行的结构等价物：

```
ssh somehost /bin/sh < /tmp/test.sh 
```

除了在 python 中，脚本源代码不会来自本地文件系统上的文件，它只是内存中的多行字符串。请注意，这是一个单一的逻辑操作，并且远程端没有临时文件，这意味着意外失败和崩溃不会留下孤立文件。如果fabric 中有这样的选项（这就是我要问的），则任何一方都不需要临时文件，而这只需要一个ssh 操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-21T21:50:58.790

您可以使用 Fabric 操作。您可以使用 `fabric.operations.put(local_path, remote_path, use_sudo=False,mirror_local_mode=False,mode=None)`

将脚本文件复制到远程路径，然后执行它。

或者，

您可以使用`fabric.operations.open_shell`，但这仅适用于一系列简单命令，对于涉及逻辑流的脚本，最好使用 put 操作并像在本地服务器上一样执行脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T18:29:05.227

如果脚本在文件中，您可以读取它，然后将其内容传递给`run`. 重写 Jasper 的例子：

```
from fabric.api import run

script_file = open('myscript.sh')
run(script_file.read())
script_file.close() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-23T06:09:32.180

对于它的价值，这工作得很好。它使用 python 的多行字符串表示法`'''`和 bash 的换行符（`\`在换行符之前）。您可以使用分号来分隔独立的行或只是管道操作，如`&&`

```
run('''echo hello;\
  echo testing;\
  echo is this thing on?;''')
run('''echo hello && \
  echo testing && \
  echo is this thing on?''') 
```

这是我得到的输出：

```
[root@192.168.59.103:49300] run: echo hello;      echo testing;      echo is this thing on?;
[root@192.168.59.103:49300] out: hello
[root@192.168.59.103:49300] out: testing
[root@192.168.59.103:49300] out: is this thing on?
[root@192.168.59.103:49300] out: 

[root@192.168.59.103:49300] run: echo hello &&       echo testing &&      echo is this thing on?
[root@192.168.59.103:49300] out: hello
[root@192.168.59.103:49300] out: testing
[root@192.168.59.103:49300] out: is this thing on?
[root@192.168.59.103:49300] out: 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T11:37:36.153

没有内置的方法可以做到这一点。您可以对其进行编程：

```
from fabric.api import run

scriptfilehandle = open('myscript.sh')
for line in scriptfilehandle:
    run(line) 
```

# objective-c - Objective-C 中的 AES 加密和 ColdFusion 中的解密

> ID：11596659
> 
> 赞同：2
> 
> 时间：2012-07-21T23:37:56.370
> 
> 标签：objective-c, coldfusion, aes, encryption

首先，我要感谢大家对我阅读本网站的帮助。非常感谢你。

**我面临的问题是我必须使用objective-c（Iphone）加密字符串并在Web服务器中使用ColdFusion对其进行解密。**我想使用的算法是 AES-128。

目前，我设法在两个站点中分别加密/解密。我在objective-c 中加密的所有内容都可以在objective-c 中解密，但不能在ColdFusion 中解密。基本上，**加密的结果是不一样的。**

我有尽可能简单和干净的代码，可以在这里发布。

我的objective-c输出是这个：

> 加密数据：BHmXSHXWOH6McXsttNTgpL5EQmfPCebjVShkZOeHBC8=

我的 ColdFusion 输出是这个：

> 加密数据：G+tdEOfQTtVCQGxW3N5uzlu0mGabRKNxuIdAXArQE8​​0=

如您所见，它们是不同的:(我认为问题可能出在Objective-C代码中，因为ColdFusion代码非常简单。但是老实说，我现在有点迷茫。非常感谢任何帮助。

* * *

这是我正在使用的代码的副本：

**Objective-C 代码：**

```
// Starting point of the application.
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    NSString *strData = @"This is a plain string.";
    NSString *strKey = @"12345678123456781234567812345678";
    NSString *strIv = @"1234567812345678";

    NSData *data = [NSData dataWithData:[strData dataUsingEncoding:NSUTF8StringEncoding]];
    NSData *iv = [NSData dataWithData:[strIv dataUsingEncoding:NSUTF8StringEncoding]];
    NSData *key = [NSData dataWithData:[strKey dataUsingEncoding:NSUTF8StringEncoding]];

    NSData *encryptedData = [self doCipher:data iv:iv key:key context:kCCEncrypt];
    NSLog(@"Encrypted data: %@",[self base64forData:encryptedData]);
}

// Method to encrypt/decrypt data
- (NSData *)doCipher:(NSData *)dataIn
                  iv:(NSData *)iv
                 key:(NSData *)symmetricKey
             context:(CCOperation)encryptOrDecrypt
{
    CCCryptorStatus ccStatus   = kCCSuccess;
    size_t          cryptBytes = 0;    // Number of bytes moved to buffer.
    NSMutableData  *dataOut    = [NSMutableData dataWithLength:dataIn.length + kCCBlockSizeAES128];

    ccStatus = CCCrypt( encryptOrDecrypt,
                       kCCAlgorithmAES128,
                       kCCOptionPKCS7Padding,
                       symmetricKey.bytes, 
                       kCCKeySizeAES128,
                       iv.bytes,
                       dataIn.bytes,
                       dataIn.length,
                       dataOut.mutableBytes,
                       dataOut.length,
                       &cryptBytes);

    if (ccStatus != kCCSuccess) {
        NSLog(@"CCCrypt status: %d", ccStatus);
    }

    dataOut.length = cryptBytes;

    return dataOut;
}

// Method to base64 encode data
- (NSString*)base64forData:(NSData*)theData {

    const uint8_t* input = (const uint8_t*)[theData bytes];
    NSInteger length = [theData length];

    static char table[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

    NSMutableData* data = [NSMutableData dataWithLength:((length + 2) / 3) * 4];
    uint8_t* output = (uint8_t*)data.mutableBytes;

    NSInteger i;
    for (i=0; i < length; i += 3) {
        NSInteger value = 0;
        NSInteger j;
        for (j = i; j < (i + 3); j++) {
            value <<= 8;

            if (j < length) {
                value |= (0xFF & input[j]);
            }
        }

        NSInteger theIndex = (i / 3) * 4;
        output[theIndex + 0] =                    table[(value >> 18) & 0x3F];
        output[theIndex + 1] =                    table[(value >> 12) & 0x3F];
        output[theIndex + 2] = (i + 1) < length ? table[(value >> 6)  & 0x3F] : '=';
        output[theIndex + 3] = (i + 2) < length ? table[(value >> 0)  & 0x3F] : '=';
    }

    return [[[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding] autorelease];
} 
```

**冷融合代码。**我从[这里](https://stackoverflow.com/questions/10301041/php-coldfusion9-aes-encryption-different-results)得到它：

```
<cfcontent type="text/html; charset=utf-8">
<cfset thePlainData = "This is a plain string." />
<cfset theKey = toBase64("12345678123456781234567812345678") />
<cfset theAlgorithm = "AES/CBC/PKCS5Padding" />
<cfset theEncoding = "base64" />
<cfset theIV = "1234567812345678" />

<cfset encryptedString = encrypt(thePlainData, theKey, theAlgorithm, theEncoding, theIV) />

<cfoutput>Encrypted data: #encryptedString#</cfoutput> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T03:07:00.470

如果那是您使用的实际密钥，则看起来它的大小错误。它适用于 AES 256，而不是 128。此密钥在 CF 中产生相同的结果：

```
 <cfset theKey = toBase64("1234567812345678")> 
```

**结果：**

```
 BHmXSHXWOH6McXsttNTgpL5EQmfPCebjVShkZOeHBC8= 
```

# java - 在 Java 中，从方法内部查找调用方法的静态对象

> ID：11596663
> 
> 赞同：0
> 
> 时间：2012-07-21T23:39:02.403
> 
> 标签：java

我有类似于这些的课程：

```
class MyClass1 {

  static MyObject obj = new MyObject();

  public static void doSomething()
  { 
    MyClass1.obj.print();
    MyClass2.obj.print();
  } 

}    

class MyClass2 {

  static MyObject obj = new MyObject();

  public static void doSomething()
  {
    MyClass1.obj.print();
    MyClass2.obj.print();
  }

}

public class MyObject {

  public void print()
  {
    System.out.println("Which object called me?");
  }

} 
```

从 MyObject 中的 print 函数，我如何确定哪个对象调用了 print 函数，是 MyClass1 中的那个，还是 MyClass2 中的那个？

使用堆栈跟踪，我只能找到 print 方法所在的函数以及 print 方法所在的函数的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T23:57:57.033

只是

```
public void print()
{
    System.out.println("Which object called me?");
    if (MyClass1.obj == this) {
        System.out.println("MyClass1");
    } else if (MyClass2.obj == this) {
        System.out.println("MyClass2");
    }
} 
```

...只要两个 obj 字段都已初始化。

但是，嗯，我不会这样做。`MyObject`最好在构造时告诉这一点，在and和 override中给出`print`参数或子类。`MyObject``MyClass1``MyClass2``print`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:13:49.057

你为什么不把它作为你的对象模型中的一流概念呢？

```
class MyClass1 {
    private static MyObject obj = new MyObject("MyClass1");
    public static void doSomething() {
        MyClass1.obj.print();
        MyClass2.obj.print();
    }
}

class MyClass2 {
    private static MyObject obj = new MyObject("MyClass2");
    public static void doSomething() {
        MyClass1.obj.print();
        MyClass2.obj.print();
    }
}

class MyObject {
    private final String name;
    MyObject(String name) {
        this.name = name;
    }

    public void print() {
        System.out.println("Q: Which object called me?");
        System.out.println("A: " + name);
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-21T23:57:56.697

以下代码应该可以工作：

```
public class MyObject {
    public static void main(String... args){
        MyClass2.doSomething();
    }

  public void print()
  {
    System.out.println(Thread.currentThread().getStackTrace()[2].getClassName() + " has me called.");
  }
} 
```

在以下位置查看更多信息：http: [//download.oracle.com/javase/6/docs/api/java/lang/StackTraceElement.html](http://download.oracle.com/javase/6/docs/api/java/lang/StackTraceElement.html)或[在 Java 中获取当前堆栈跟踪](https://stackoverflow.com/questions/1069066/get-current-stack-trace-in-java)

# ruby-on-rails - 没有路线匹配 [GET] "/new_user_registration_path"

> ID：11596664
> 
> 赞同：0
> 
> 时间：2012-07-21T23:39:09.007
> 
> 标签：ruby-on-rails, devise

我正在制作一个简单的网站，用户可以在其中创建帐户并登录。从设计教程开始，我在 application.html.haml 中有这个：

```
%ul.nav
    -if user_signed_in?
        %li= link_to "Log out", "destroy_use_session_path", :method => :delete
        %li= link_to "Edit registration", "new_user_registration_path"
    -else
        %li= link_to "Log in", "new_user_session_path"
        %li= link_to "Register", "new_user_registration_path" 
```

当我点击注册时，我得到这个错误：

```
No route matches [GET] "/new_user_registration_path" 
```

我对 Rails 很陌生，这是我第一次使用 devise，所以我确信这很简单，但我可以使用一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T00:05:06.283

路径应该不带引号：

```
%ul.nav
  -if user_signed_in?
    %li= link_to "Log out", destroy_use_session_path, :method => :delete
    %li= link_to "Edit registration", new_user_registration_path
  -else
    %li= link_to "Log in", new_user_session_path
    %li= link_to "Register", new_user_registration_path 
```

# automatic-ref-counting - CgImageRef 作为弧下对象的一部分

> ID：11596677
> 
> 赞同：1
> 
> 时间：2012-07-21T23:42:43.233
> 
> 标签：automatic-ref-counting, cgimageref

使用 Arc，我有一个 CgImageRef 作为对象（形状）的属性。最终我会将 CgImageRef 分配给 1 层或更多层的内容，但最初我只是将其保留在形状中。如果我这样做，一切都会很好：

```
CgImageRef cgImageRef = CGImageCreateWithImageInRect(....);
someLayer.contents = (__bridge id)cgImageRef;
CFRelease(cgImageRef); 
```

但如果我说

```
myShape.cgImageRef = CGImageCreateWithImageInRect(...); 
```

分析器报告潜在的内存泄漏。
我尝试在 ShapeObject 中添加一个在 cgImageRef 上使用 CFRelease 的 dealloc 方法，但随后分析器说我正在释放一个我不拥有的对象。桥接似乎不适用，因为我没有将指针分配给另一个对象。我到底应该在这里做什么？

# c# - 发送主 jqgrid 的 row_id 以添加子网格的事件

> ID：11596678
> 
> 赞同：0
> 
> 时间：2012-07-21T23:42:58.557
> 
> 标签：c#, jquery, asp.net-mvc, jqgrid, jqgrid-inlinenav

我正在使用 jqgrid 4.4 的 inlineNav 功能为我的子网格提供添加/编辑功能。但是我不知道如何调用 Add 事件。当我“添加”记录时，只会调用更新事件。

我也不知道如何将父网格行中的 row_id 获取到子网格中，以便可以将其传递给 Add 事件。

这是我的代码

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#jqgFactors').jqGrid({
            //url from wich data should be requested
            url: '@Url.Action("GetFactors")',
            //type of data
            datatype: 'json',
            //url access method type
            mtype: 'POST',
            //columns names
            colNames: ['id', 'category', 'question type', 'question', 'tooltip text', 'xdata', 'warningexception'],
            //columns model
            colModel: [
                        { name: 'id', index: 'id', align: 'left', editable: false, width: '40px', fixed: true, key: true },
                        { name: 'categoryid', index: 'categoryid', align: 'left', editable: true, edittype: 'select', width: '80px', fixed: true, editoptions: { value: { 1: 'Departure', 2: 'Pilot', 3: 'Product', 4: 'Flight', 5: 'Destination'} }, editrules: { required: true} },
                        { name: 'type', index: 'type', align: 'left', editable: true, edittype: 'select', width: '100px', fixed: true, editoptions: { value: { 1: 'RadioButton List', 2: 'DatePicker'} }, editrules: { required: true} },
                        { name: 'questiontext', index: 'questiontext', align: 'left', editable: true, edittype: 'textarea', width: '200px', fixed: true, editoptions: { rows: '5', cols: '40' }, editrules: { required: true} },
                        { name: 'tooltip', index: 'tooltip', align: 'left', editable: true, edittype: 'textarea', width: '300px', fixed: true, editoptions: { rows: '5', cols: '40' }, editrules: { required: true} },
                        { name: 'x', index: 'x', align: 'left', editable: true, edittype: 'select', width: '60px', fixed: true, editoptions: { value: { 1: 'true', 0: 'false'} }, editrules: { required: true} },
                        { name: 'warningexception', index: 'warningexception', align: 'left', editable: true, edittype: 'select', width: '60px', editoptions: { value: { 1: 'true', 0: 'false'} }, editrules: { required: true} }
                      ],
            //pager for grid
            pager: $('#jqgpFactors'),
            rowNum: 60,
            sortname: 'id',
            sortorder: 'asc',
            viewrecords: true,
            height: '100%',
            width: 900,
            subGrid: true,
            subGridRowExpanded: function (subgrid_id, row_id) {
                var subgrid_table_id;
                var subgrid_pager_id;
                subgrid_table_id = subgrid_id + "_t";
                subgrid_pager_id = "p_" + subgrid_table_id;
                $("#" + subgrid_id).html("<table id='" + subgrid_table_id + "' class='scroll'></table><div id='" + subgrid_pager_id + "' class='scroll'></div>");
                $("#" + subgrid_table_id).jqGrid({
                    url: '@Url.Action("GetFactorDetails")',
                    postData: { QuestionId: function () { return row_id; } },
                    datatype: "json",
                    mtype: "POST",
                    colNames: ['id', 'questionid', 'text', 'influence', 'weight'],
                    colModel: [
                                { name: "id", index: "id", key: true, hidden: true },
                                { name: "questionid", index: "questionid", hidden: true },
                                { name: "text", index: "text", width: 700, editable: true, edittype: 'text' },
                                { name: "influence", index: "influence", width: 80, editable: true, edittype: 'text', editrules: { required: true, integer: true} },
                                { name: "weight", index: "weight", sortable: false, width: 80, editable: true, edittype: 'text', editrules: { required: true, integer: true} }
                              ],
                    height: '100%',
                    rowNum: 5,
                    sortname: 'id',
                    sortorder: 'asc',
                    pager: subgrid_pager_id,
                    editurl: 'clientArray',
                    width: 860
                });
                $("#" + subgrid_table_id).jqGrid('navGrid', '#' + subgrid_pager_id, { edit: false, add: false, del: false });
                $("#" + subgrid_table_id).jqGrid('inlineNav', '#' + subgrid_pager_id, {
                    addParams: {
                        addRowParams: {
                            keys: true,
                            url: '@Url.Action("AddFactorDetail")'
                        }
                    },
                    editParams: {
                        url: '@Url.Action("UpdateFactorDetail")'
                    },
                    add: true,
                    edit: true,
                    save: true,
                    cancel: true
                }
                });
            }
        });

        $.jgrid.nav.addtext = "Add Record";
        $.jgrid.nav.edittext = "Edit Record";
        $.jgrid.nav.deltext = "Delete Record";
        $('#jqgFactors').jqGrid('navGrid', '#jqgpFactors',
            { add: true, del: true, edit: true, search: false },
            { width: 'auto', url: '@Url.Action("UpdateFactor")' },
            { width: 'auto', url: '@Url.Action("UpdateFactor")' },  //insert
            { width: 'auto', url: '@Url.Action("DeleteFactor")' });
        $('#dlgFactor').dialog({ autoOpen: false, bgiframe: true, resizable: false, title: 'Factor' });
        $('a[data-supplier-id]').live('click', function (e) {
            if (e.preventDefault)
                e.preventDefault();
            else
                e.returnValue = false;

            var dialogPosition = $(this).offset();
            $.post('@Url.Action("Factor")', { FactorId: $(this).attr('data-supplier-id') }, function (data) {
                $('#dlgFactor').empty();
                $('#tmplFactor').tmpl(data).appendTo('#dlgFactor');
                $('#dlgFactor').dialog('option', 'position', [dialogPosition.left, dialogPosition.top]);
                $('#dlgFactor').dialog('open');
            });
        });
    }); 
```

这就是我希望控件的样子：更新工作正常。

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult UpdateFactorDetail(FactorDetailModel model, int Id)
    {
            model.QuestionId = Id;
            FactorManager fm = new FactorManager();
            return Json(fm.UpdateDetail(model));
    }

    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult AddFactorDetail(FactorDetailModel model, int QuestionId)
    {
            model.QuestionId = QuestionId;
            FactorManager fm = new FactorManager();
            return Json(fm.AddDetail(model));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:30:58.373

我不确定您的第一个问题，但对于您的第二个问题，我认为以下链接会对您有所帮助..

[wiki-subgrid 事件检查示例](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:subgrid)

[Rick 和 Eric 的回答](https://stackoverflow.com/questions/3559856/jqgrid-how-to-add-row-to-subgrid-or-how-to-get-primary-key-from-parent-row)- 我假设您在编辑帖子时已经知道这一点。

[访问父网格 ID](http://pastebin.com/XMK4uYak)

希望能帮助到你。

# java - Java 7 中对象静态方法的原因

> ID：11596680
> 
> 赞同：4
> 
> 时间：2012-07-21T23:43:31.847
> 
> 标签：java, java-7

似乎在 Java 7 中，`Objects`类提供了该语言其他部分已经涵盖的许多功能。

举个`toString()`例子。以下将产生相同的结果：

```
Objects.toString(12);
String.valueOf(12); 
```

其实`Objects.toString`定义为：

```
public static String toString(Object o) {
    return String.valueOf(o);
} 
```

假设我们正在处理实际的课程。一个比另一个更受欢迎吗？

```
Objects.toString(o);
o.toString(); 
```

语言设计师在这里告诉我们什么？我们是否应该开始更喜欢 Objects 的解决方案而不是现有的解决方案？这样的事情的长期理由是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T23:47:35.947

请参阅[该类的文档](http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html)：

> 此类包含`static`用于操作对象的实用方法。这些实用程序包括用于计算对象的哈希码、返回对象的字符串以及比较两个对象的`null`安全或容错方法。`null`

所以主要是为了让你免于额外的`null`守卫。

# ruby-on-rails - 阅读带有回形针的文件——没有这样的文件或目录

> ID：11596682
> 
> 赞同：0
> 
> 时间：2012-07-21T23:44:04.887
> 
> 标签：ruby-on-rails

为什么我在路径中使用符号时没有得到这样的文件或目录？Paperclip 显示 :rails_root/public/system/:class/:attachment/:id_partition/:style/:filename 作为默认路径。该文件位于 public/system/attachments/email.txt 中，但我希望能够添加任何名称的文件。

```
 has_attached_file :email,
  :url => "public/system/attachments/:filename",
  :path => "public/system/attachments/:filename"

def read_original_header
@original_email = File.read("public/system/attachments/:filename")
end 
```

没有这样的文件或目录 - public/system/attachments/:filename

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:19:29.863

您的问题是“符号”插值是回形针约定，标准 Ruby File 类不共享此约定。

# mysql - 多个表，同一列，使用 where

> ID：11596690
> 
> 赞同：0
> 
> 时间：2012-07-21T23:46:57.723
> 
> 标签：mysql

我遇到了这个查询的问题。它返回正确的 total_names、total_events 和 total_misc，但其他三个总数（待定名称、事件和 misc）是相同的数字，并且完全是错误的数字。所有三个表都有 created_by 列。我究竟做错了什么？

```
SELECT
    COUNT(DISTINCT names_revisions.id) AS total_names,
    COUNT(DISTINCT events_revisions.id) AS total_events,
    COUNT(DISTINCT misc_revisions.id) AS total_misc,
    SUM(if(names_revisions.status = "Pending", 1, 0)) AS total_pending_names, 
    SUM(if(events_revisions.status = "Pending", 1, 0)) AS total_pending_events, 
    SUM(if(misc_revisions.status = "Pending", 1, 0)) AS total_pending_misc
FROM 
    names_revisions,
    events_revisions,
    misc_revisions
WHERE 
    :user_id IN (names_revisions.created_by, events_revisions.created_by, misc_revisions.created_by) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T23:55:46.280

该`IN()`子句不会按照您尝试使用它的方式工作。您需要`JOIN`三个表之间的条件，然后是三个表`<table> = :user_id`中的条件`WHERE`：

```
SELECT
    COUNT(DISTINCT names_revisions.id) AS total_names,
    COUNT(DISTINCT events_revisions.id) AS total_events,
    COUNT(DISTINCT misc_revisions.id) AS total_misc,
    SUM(if(names_revisions.status = "Pending", 1, 0)) AS total_pending_names, 
    SUM(if(events_revisions.status = "Pending", 1, 0)) AS total_pending_events, 
    SUM(if(misc_revisions.status = "Pending", 1, 0)) AS total_pending_misc
FROM 
    names_revisions,
    JOIN events_revisions ON names_revisions.created_by = events_revisions.created
    JOIN misc_revisions ON names_revisions.created_by = misc_revisions.created
WHERE 
  names_revisions.created_by = :user_id
  OR events_revisions.created_by = :user_id
  OR misc_revisions.created_by = :user_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T00:00:43.413

您正在加入表格，而不仅仅是单独选择计数。对 3 个表使用单独的查询而不是连接会更快

```
SELECT
    names.total as toal_names,
    names.pending as total_pending_names,
    misc.total as total_misc,
    misc.pending as total_pending_misc,
    events.total as total_events,
    events.pending as total_pending_events
FROM 
    (
        SELECT 
            COUNT(names_revisions.id) AS total,
            SUM(if(names_revisions.status = "Pending", 1, 0)) AS pending
        FROM names_revisions
        WHERE names_revisions.created_by = :user_id
    ) as names,
    (
        SELECT 
            COUNT(misc_revisions.id) AS total,
            SUM(if(misc_revisions.status = "Pending", 1, 0)) AS pending
        FROM misc_revisions
        WHERE misc_revisions.created_by = :user_id
    ) as misc,
    (
        SELECT 
            COUNT(events_revisions.id) AS total,
            SUM(if(events_revisions.status = "Pending", 1, 0)) AS pending
        FROM events_revisions
        WHERE events_revisions.created_by = :user_id
    ) as events 
```

# android - Android LocationListener 停止接收位置更新

> ID：11596691
> 
> 赞同：1
> 
> 时间：2012-07-21T23:47:24.077
> 
> 标签：android, android-location

我已经注册了一个`location listener`，它将使用 接收位置更新`NETWORK_PROVIDER`。如果`activity`在前台，侦听器会接收位置更新。如果我离开应用程序，一段时间后它会停止接收位置更新。这有点奇怪......即使堆栈上没有任何活动，它不应该接收位置更新吗？如果我返回我的应用程序，侦听器将再次开始接收位置更新。

还是我做错了什么？即使我的所有活动都没有处于活动状态（既不在前台，也不在堆栈上），建议使用哪种编程模型来接收位置更新？

还有其他一些接收位置更新的方法（使用待定意图），但如果我不打开 GPS，这些方法不会触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:25:19.377

后台的活动最终将被销毁，您无法保证一旦停止它会继续接收位置更新。Android 中的活动不应该这样使用。

您可以按照建议使用带有唤醒锁的服务，但保持设备唤醒会很快耗尽电池电量。

我向您推荐Reto Meier（IO 2011）的[演讲](http://www.youtube.com/watch?v=twmuBbC_oB8)，他在其中谈到了拥有新位置的不同策略。这是[代码](http://code.google.com/p/android-protips-location/)。

# php - 注意：数组到字符串的转换

> ID：11596693
> 
> 赞同：28
> 
> 时间：2012-07-21T23:48:16.777
> 
> 标签：php, mysql, sql-server, arrays, select

我正在尝试从数据库中选择一个值并使用 SELECT 将其显示给用户。但是我不断收到此错误：

```
Notice: Array to string conversion in (pathname) on line 36. 
```

我认为这`@mysql_fetch_assoc();`会解决这个问题，但我仍然收到通知。这是我收到错误的代码部分：

```
 {
  $loggedin = 1;

  $get = @mysql_query("SELECT money FROM players WHERE username = 
 '$_SESSION[username]'");
  $money = @mysql_fetch_assoc($get);

  echo '<p id= "status">'.$_SESSION['username'].'<br>
  Money: '.$money.'.
  </p>';
  } 
```

我究竟做错了什么？我对 PHP 很陌生。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-21T23:51:20.143

问题是 $money 是一个数组，您将其视为字符串或可以轻松转换为字符串的变量。你应该这样说：

```
 '.... Money:'.$money['money'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-18T20:14:14.270

更简单：

```
$get = @mysql_query("SELECT money FROM players WHERE username = '" . $_SESSION['username'] . "'"); 
```

**请注意$_SESSION**参考中*用户名*周围的引号。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-07T03:48:01.647

您会收到此通知的原因之一：数组到字符串的转换...是您正在组合数组组。例如，整理出几个名字和姓氏。

要正确回显数组的元素，您可以使用该函数，`implode(separator, array)` 例如：

```
implode(' ', $var) 
```

结果：

```
first name[1], last name[1]
first name[2], last name[2] 
```

[来自W3C](https://www.w3schools.com/php/func_string_implode.asp)的更多示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-15T01:29:59.177

将 $_SESSION['username'] 的值存储到 $username 等变量中

```
$username=$_SESSION['username'];

$get = @mysql_query("SELECT money FROM players WHERE username = 
 '$username'"); 
```

它应该工作！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-28T06:59:43.440

mysql_fetch_assoc 返回一个数组，所以你不能回显一个数组，需要 print_r() 否则特定的字符串 $money['money']。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-14T17:03:20.590

您不能回显数组。必须改用 print_r。

```
<?php
$result = $conn->query("Select * from tbl");
$row = $result->fetch_assoc();
print_r ($row);
?> 
```**

# entity-framework - EF 4.1 如何获取实体的第一个键 - 复合

> ID：11596696
> 
> 赞同：1
> 
> 时间：2012-07-21T23:48:50.127
> 
> 标签：entity-framework, entity-framework-4

我有一个类，我有 2 个键（复合键），然后我有我的审计日志功能，我曾经在其中获取这样的实体的主键：

```
string keyName = dbEntry.Entity.GetType().GetProperties().Single(p => p.GetCustomAttributes(typeof(KeyAttribute), false).Count() > 0).Name; 
```

问题是我试图保存的模型之一有一个复合键：

```
 [Key,Column("paymentdetailid", TypeName = "int", Order=0)]
    public Int32 PaymentDetailId { get; set; }

    [Key,Column("chargedetailid", TypeName = "int", Order=1)]
    public Int32 ChargeDetailId { get; set; } 
```

尝试获取 keyName 时出现以下错误：

```
Sequence contains more than one matching element 
```

关于如何解决这个问题的任何线索？我只想拿到第一把钥匙。

谢谢，

**解决方案**

解决方案是这个：

var keyNames = dbEntry.Entity.GetType().GetProperties().Where(p => p.GetCustomAttributes(typeof(KeyAttribute), false).Count() > 0).ToList();

字符串 keyName = keyNames[0].Name;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T14:47:56.073

您可以替换`Single`为`First`以获取具有关键属性的第一个属性：

```
string keyName = dbEntry.Entity.GetType().GetProperties().First(
    p => p.GetCustomAttributes(typeof(KeyAttribute), false).Any()).Name; 
```

也`Any()`比`Count() > 0`它只是说“检查属性*是否*具有关键属性”要干净一些。或者`FirstOrDefault`，如果您想捕获该类型根本没有键属性并抛出适当的异常的情况（`FirstOrDefault`将返回`null`然后`First`将抛出“序列不包含元素”异常）：

```
var property = dbEntry.Entity.GetType().GetProperties().FirstOrDefault(
    p => p.GetCustomAttributes(typeof(KeyAttribute), false).Any());

if (property == null)
    throw new InvalidOperationException(string.Format(
        "Entity {0} has no [Key] attribute.", dbEntry.Entity.GetType().Name));

string keyName = property.Name; 
```

# android - 使用蓝牙鼠标/演示器控制 Android 应用程序

> ID：11596697
> 
> 赞同：1
> 
> 时间：2012-07-21T23:48:50.643
> 
> 标签：android, bluetooth

这不是一个容易搜索的问题，因为大多数回复都涉及使用手机作为指针，但我想做的是使用鼠标/演示器/指针来控制 Android 平板电脑。我买了这个 Targus Bluetoogh Presenter [（亚马逊）](https://rads.stackoverflow.com/amzn/click/com/B001HQDFGC)，我想在我的 7 英寸平板电脑上连接一个应用程序。现在我花了两个小时搜索 Google 和 stackoverflow 都没有成功，我想我应该寻求帮助。

蓝牙演示器工作正常。它就像鼠标一样，我可以滚动并单击并运行我的应用程序。但这是一个应用程序，其中平板电脑将在光天化日之下安装在移动的船上，并且使用鼠标指针的这种精细增益调整不起作用。我敢肯定，即使我可以控制指针，我也可能看不到它。这是一个高生存能力的应用程序，黑色背景上有 1 英寸高的白色字母。你只是看不到一个微小的鼠标指针。

我需要的是让演示者上的两个可编程按钮将焦点推进到应用程序上的几个按钮上，然后让另一个按钮按下它们。现在，演示者上的一个可编程按钮突出显示了我的应用程序上的一个按钮，但使用右键单击只会触发鼠标指针下方的任何一个按钮。我想我需要两个可编程按钮来前进和输入，但这只是一个猜测。我对任何可行的解决方案持开放态度。

我什至不知道从哪里开始。我应该在我的应用程序中编程吗？我需要一个界面应用程序来对按钮进行编程吗？Play 商店中有什么东西可以满足我的需求吗？当我在蓝牙鼠标上搜索时，我看到的只是使用手机控制计算机的应用程序。不是我想要的方向。我需要一些帮助或指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:15:09.987

好的，我想我已经为您找到了可行的解决方案。原来我做错了一些事情。一个`dispatchKeyEvent()`比`onKeyDown()`因为它阻止按下音量按钮进入系统要好（在我的设备上，它们会发出哔哔声，但没有音量变化）。而且事实证明，您需要使用[Instrumentation](http://developer.android.com/reference/android/app/Instrumentation.html)类来发送欺骗 KeyEvents 而不是手动调用`dispatchKeyEvent()`. Instrumentation 类也不会从主线程进行方法调用，因此您必须将调用包装在它们自己的线程中。

我还了解了为什么您设备上的某些按钮会发送两个关键事件 117 和 71。这些与`shift`+匹配。`[`出于我们的目的，我们可以忽略 shift 按下并仅使用`[`为我们采取行动。

这是一个似乎对我有用的被覆盖的 dispatchKeyEvent() 方法。

```
@Override
public boolean dispatchKeyEvent(KeyEvent ke){
int keyCode = ke.getKeyCode();
if(ke.getAction() == KeyEvent.ACTION_DOWN){
    if(keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) 
    { 
        /************************************** 
         * What ever code snippet you put 
         * here will run whenever you press the
         * volume down button on your presenter
         * device
         **************************************/
        return true;
    }else if(keyCode == KeyEvent.KEYCODE_VOLUME_UP) 
    { 
        /************************************** 
         * What ever code snippet you put 
         * here will run whenever you press the
         * volume up button on your presenter
         * device
         **************************************/
        return true;
    }else if (keyCode == 30){ 
        /************************************** 
         * What ever code snippet you put 
         * here will run whenever you press the
         * left programmable button on your 
         * presenter device
         **************************************/
         return true;
        }
    else if (keyCode == 59){
        /************************************** 
         * This was an attempt to get it to ignore
         * the shift keypress coming from the
         * left/right arrow keys on the devices
         * ignoring that would in theory make
         * those keys function as up/down focus
         * movers. Didn't seem to work though.
         * you could probably remove this branch
         * of the if statement if you want.
         * However since those buttons do send 
         * key events to the device it should 
         * should still be possible override these
         * buttons somehow.
         **************************************/
        return true;
    }
}else if(ke.getAction() == KeyEvent.ACTION_UP){
    /************************************** 
     * This section will catche the "release"
     * events from all of the keys we are using
     * and tell the system that we've handled
     * them. So that the system will not pass
     * the events along to anything else.
     **************************************/
    if(keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) 
    { 
        /************************************** 
         * If you had any reason / desire to
         * you could put a code snipet here and it
         * would be run when you let go after 
         * pressing the volume down button on your
         * presenter device.
         **************************************/
        return true;
    }else if(keyCode == KeyEvent.KEYCODE_VOLUME_UP) 
    { 
        return true;
    }else if (keyCode == 59){
        return true;
    }else if (keyCode == 30) {
        return true;
    }
}

/************************************** 
 * The following line is needed so that
 * the system will treat any key events 
 * that we aren't interested in normally.
 * i.e. the back button on the tablet, by
 * by calling super.dispatchKeyEvent(), we
 * ensure that the back button still behaves
 * like normal.
 **************************************/
return super.dispatchKeyEvent(ke);
} 
```

这将允许您控制演示者设备上的 3 个按钮（Vol Up、Vol Down 和 Left 可编程按钮），通过将您的代码片段放在 if 语句的适当分支中，您可以使这 3 个按钮中的任何一个执行无论你想要什么。

我创建了一个测试项目来实现这一点，如果您想查看整个内容，可以[在此处下载压缩的项目文件夹。](https://dl.dropbox.com/u/5724095/Android%20Apps/VolumeOverride.zip)在这个测试项目中，我进行了设置，以便 vol up/down 将用作 d-pad up/down，这将允许您将焦点移动到活动中的不同视图。

这是您可以放在 if 语句的一个分支中以欺骗 d-pad 箭头按钮的代码：

```
new Thread(new Runnable() {         
    @Override
    public void run() {                 
        new Instrumentation().sendKeyDownUpSync(KeyEvent.KEYCODE_DPAD_DOWN);
    }   
}).start(); 
```

you can replace the `KeyEvent.KEYCODE_DPAD_DOWN`with any other key event that you want for instance `KeyEvent.KEYCODE_DPAD_UP`or `KeyEvent.KEYCODE_DPAD_CENTER`the latter of which would act as a select button which will send a click event to the button that currently has focus.

# sql - 使用 Ninject 在 MVC3 中将 SQL 转换为 LINQ

> ID：11596699
> 
> 赞同：1
> 
> 时间：2012-07-21T23:49:30.080
> 
> 标签：sql, asp.net-mvc-3, linq, entity-framework

我正在使用 MVC3 并且仍在学习 LINQ。我在尝试将查询转换为 LINQ to Entities 时遇到了一些麻烦。我想返回一个员工对象。

```
SELECT E.EmployeeID, E.FirstName, E.LastName, MAX(EO.EmployeeOperationDate) AS "Last Operation"
FROM Employees E 
INNER JOIN EmployeeStatus ES ON E.EmployeeID = ES.EmployeeID
INNER JOIN EmployeeOperations EO ON ES.EmployeeStatusID = EO.EmployeeStatusID
INNER JOIN Teams T ON T.TeamID = ES.TeamID
WHERE T.TeamName = 'MyTeam'
GROUP BY E.EmployeeID, E.FirstName, E.LastName
ORDER BY E.FirstName, E.LastName 
```

我有几张表，但我只需要根据 EmployeeOperationDate 获取最新状态。这似乎在 SQL 中运行良好。我也在使用 Ninject 并将我的查询设置为返回 Ienumerable。我玩了按选项分组，但它随后返回 IGroupable。任何有关转换和返回属性对象类型的指导将不胜感激。

编辑：我开始在 LINQ 中写出来，但我不确定如何正确返回正确的类型或强制转换它。

```
public IQueryable<Employee> GetEmployeesByTeam(int teamID)
    {

        var q = from E in context.Employees
                join ES in context.EmployeeStatuses on E.EmployeeID equals ES.EmployeeID
                join EO in context.EmployeeOperations on ES.EmployeeStatusID equals EO.EmployeeStatusID
                join T in context.Teams on ES.TeamID equals T.TeamID
                where T.TeamName == "MyTeam"
                group E by E.EmployeeID into G
                select G;
        return q;
    } 
```

编辑2：

这似乎对我有用

```
public IQueryable<Employee> GetEmployeesByTeam(int teamID)
    {

        var q = from E in context.Employees
                join ES in context.EmployeeStatuses on E.EmployeeID equals ES.EmployeeID
                join EO in context.EmployeeOperations.OrderByDescending(eo => eo.EmployeeOperationDate) on ES.EmployeeStatusID equals EO.EmployeeStatusID
                join T in context.Teams on ES.TeamID equals T.TeamID
                where T.TeamID == teamID
                group E by E.EmployeeID into G
                select G.FirstOrDefault();
        return q;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:58:46.970

杰夫，您的“Edit2”也为我提供了帮助和工作！我是这样做的：

```
public IEnumerable<ListCases> GetListCases(int? customerId, int? languageId, int? userGroupId) 
{    
    var query = from cfs in this.DataContext.CaseFieldSettings
            join cfsl in this.DataContext.CaseFieldSettingLanguages on cfs.Id equals cfsl.CaseFieldSettings_Id  
            join cs in this.DataContext.CaseSettings on cfs.Name equals cs.Name
            where cfsl.Language_Id == languageId && cfs.ShowOnStartPage == 1 && cfs.Customer_Id == customerId && cs.UserGroup == userGroupId && cs.Name != null  
            group cfs by new  {  
                                    cfs.Id, cfs.Customer_Id, cfsl.CaseFieldSettings_Id, cfsl.Label, cfsl.Language_Id, cfs.ShowOnStartPage, cs.Name  
                              } into grouped  

            select new ListCases  
            {  
                Id = grouped.Key.Id, CFS_Id = grouped.Key.CaseFieldSettings_Id, Label = grouped.Key.Label, Language_Id = grouped.Key.Language_Id, Customer_Id = grouped.Key.Customer_Id, Show = grouped.Key.ShowOnStartPage, CSName = grouped.Key.Name  
            };

    return query;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:25:32.410

我不太清楚你的 SQL 查询应该如何工作，但我试图塑造你的 LINQ 查询以匹配它正在做的事情并且它也返回 type `Employee`。这应该可以帮助您获得所需的确切解决方案：

```
var q = from E in context.Employees
         join ES in context.EmployeeStatuses on E.EmployeeID equals ES.EmployeeID
         join EO in context.EmployeeOperations
             .OrderByDescending (x => x.EmployeeOperationDate) 
                 on ES.EmployeeStatusID equals EO.EmployeeStatusID
         join T in context.Teams on ES.TeamID equals T.TeamID
         where T.TeamName == "MyTeam"
         group new { E.EmployeeID, E.FirstName, E.LastName, EO.EmployeeOperationDate } 
             by new {E.EmployeeID, E.FirstName, E.LastName } into G
         orderby G.Key.LastName,G.Key.FirstName
         select new Employee
         {
             EmployeeID = G.Key.EmployeeID,
             FirstName = G.Key.FirstName,
             LastName = G.Key.LastName,
             LastOperation = G.First ().EmployeeOperationDate
         }; 
```

# c# - 控制台 rPogram 和程序集参考

> ID：11596702
> 
> 赞同：1
> 
> 时间：2012-07-21T23:50:02.017
> 
> 标签：c#, .net

当我使用 Visual Studio 创建 C# 控制台应用程序时，我可以轻松使用`Console`该类，因为它是在`System`命名空间（`mscorlib`程序集）中定义的。我假设`machine.config`文件中添加了对 mscorlib 的引用。

但是，在 VS 中，我可以看到文件中还自动添加了更多引用`*.csproj`（如 System.Core 和 System.Data）。为什么微软不`machine.config`直接添加这些引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:15:05.530

据我了解，mscorlib 是必需的，它是.Net 不可或缺的一部分，它具有 System.Object 等。但是，如果您不需要访问数据库，则可以从控制台应用程序的引用中删除 System.Data .

# c# - 通过 LAN C# 流式传输视频

> ID：11596703
> 
> 赞同：3
> 
> 时间：2012-07-21T23:50:08.470
> 
> 标签：c#, video, streaming, networkstream

我最近了解了数据流和 C#。我已经练习构建一个简单的服务器客户端登录程序，如下所示：

```
public static TcpClient SocketCLiente = new TcpClient(); 
NetworkStream _serverStream = default(NetworkStream);
public static string IPServer="127.0.0.1";

byte[] outStream = System.Text.Encoding.ASCII.GetBytes(this._txtUserName.Text + "%" + this.txtPassword.Text + "$");
_serverStream.Write(outStream, 0, outStream.Length); 
```

这适用于文本，但如果我想将视频流式传输到客户端怎么办？如何通过 LAN 将实时视频从我的网络摄像头流式传输到 ac# 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:19:02.467

就像提到的评论一样，您应该查看[如何使用 C# 流式传输网络摄像头视频？](https://stackoverflow.com/questions/342774/how-can-i-stream-webcam-video-with-c). 通常，您流出的所有内容都是字节。只要这些字节以播放器（例如 flash、silverlight 或其他任何东西）可以理解的方式格式化，它就可以播放视频。

现在我认为这篇文章并没有真正涵盖互联网流媒体方面。它确实更多地涉及在本地捕获和播放。这就是directshow擅长的。它抽象出您过去必须处理以捕获视频和音频帧数据的所有驱动程序废话。

流式传输到互联网，而不是滚动您自己的流式服务器，通常是通过连接到[red-5](http://www.red5.org/)、[wowza](http://www.wowza.com/)、 [adobe FMS](http://www.adobe.com/products/adobe-media-server-family.html)、[rtsp](http://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol)、[silverlight 流](http://www.iis.net/learn/media/smooth-streaming/live-and-on-demand-video-with-silverlight-and-iis-smooth-streaming)等来完成的。

我会使用其中一种解决方案来连接您从哪里获取视频数据。要点是您从 directshow 捕获视频/音频数据包，然后将这些数据包（格式为解决方案所需的格式）汇集到这些流媒体平台之一。

另一种选择，虽然它更“hackish”，但将您的视频流式传输为[motion jpeg](http://en.wikipedia.org/wiki/Motion_JPEG)。但是，这不会让您发送音频。Motion jpeg 基本上告诉客户端保持连接打开并不断下载新图像并替换旧图像。这就像一本用于网络的翻书。这里的优势是你可以很容易地滚动你自己的运动 jpeg 代码，这将是一个有趣的小项目。

# objective-c - NSOpenSavePanelDelegate 协议中的方法 panelSelectionDidChange 被调用了两次

> ID：11596706
> 
> 赞同：1
> 
> 时间：2012-07-21T23:51:00.253
> 
> 标签：objective-c, cocoa, nsopenpanel

我有一个实现`NSOpenSavePanelDelegate`协议并与 NSOpenPanel 相关联的类。

我`NSLog()`在`- (void)panelSelectionDidChange:(id)sender`方法中加入了 a 并注意到以下内容：

当我第一次选择一个文件时，`panelSelectionDidChange`它被调用，并检查`[sender URL]`我得到所选文件的 URL，但是当我选择另一个文件时， `panelSelectionDidChange`被调用两次，第一次`[sender URL]`有最后一个 URL，第二次调用`[sender URL]`它的 URL新选择的文件。

但是，如果我使用键盘箭头选择文件而不是单击它，`panelSelectionDidChange`则只会使用正确的 URL 调用一次。

这是正常行为还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:10:30.027

我也遇到了这个问题，我注意到这只发生在打开面板处于浏览器模式时，而不是列表、图标或预览（不确定这些是官方名称）。用户可以使用面板左上角的按钮更改此设置。

我相信第一次调用发生在您第一次选择项目时，第二次调用发生在浏览器右侧显示预览时。

不完全是我知道的解决方案，但可能这些信息会有所帮助。

# jquery - 为什么我的图标在图像上的“src”属性后没有改变？

> ID：11596707
> 
> 赞同：2
> 
> 时间：2012-07-21T23:51:01.313
> 
> 标签：jquery, html, src, mailto

当我单击 ID 为“mailToTechOwner”的图像时，我有以下代码

```
$('#mailToTechOwner').live('click', function (e) {
    e.preventDefault();

    var origSource = $(this).attr("src");
    var objDiv = $(this);

      //change image to ajax loader
    objDiv.attr("src", "/Content/Images/ajax-loader.gif");

    $.get("/Project/MailMessage/" + projectId, function (data) {

        //change image back to original
        objDiv.attr("src", origSource);
        window.location = 'mailto:' + data.Email+ '?subject=Alert' + data.Name;
    });
}); 
```

当我单步执行 firebug 中的代码时，它工作正常，但是当我运行它时，我的电子邮件客户端会弹出（在我的情况下是 Outlook），但图像仍然是 ajax 加载程序。. 即使这条线已经运行：

```
objDiv.attr("src", origSource); 
```

无论如何在图像更改完成之前不弹出电子邮件？更改 src 属性是异步操作吗？在运行其他代码之前是否有一些回调来确保其完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:01:50.043

不要替换图像源，而是尝试在 HTML 中包含这两个图像，然后最初隐藏加载器。

在 GET 请求中，只需隐藏原始图像并显示加载器，并在完成时重做它。您还可以执行以下操作：

```
$(document).on('click', '#mailToTechOwner', function(e) {
    e.preventDefault();
    var loader = $('<img src="/Content/Images/ajax-loader.gif" />'),
        img = $(this)

    img.hide().after(loader);

    $.get("/Project/MailMessage/" + projectId, function (data) {
        loader.remove();
        img.show(1, function() {
            window.location = 'mailto:' + data.Email+ '?subject=Alert' + data.Name;
        });
    });
}); 
```

在`show()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T00:46:19.030

```
$('#mailToTechOwner').on('click', function (e) {
    var objDiv = $(this);
    var origSource = objDiv.attr("src");

      //change image to ajax loader
    objDiv.attr("src", "/Content/Images/ajax-loader.gif");
    $.get("/Project/MailMessage/" + projectId, function (data) {
        //change image back to original
        objDiv
            .load(function(){
                console.log('image load triggered',$(this).attr("src"));
                setTimeout(function(){//give some time to see what happens
                    window.location = 'mailto:' + data.Email+ '?subject=Alert' + data.Name;
                    $(this).unbind('load');
                    },1000);
                })
            .attr("src", origSource);
    });

    return false;//prevent default + stop propogation
}); 
```

正如您所说，它在 firebug 中跟踪时正在工作，原因可能是 window.location 在图像加载后和浏览器重排之前被触发。

您最初的问题是，是的，更改图像源是异步的，无法保证立即加载图像。更改任何外部链接（）都是异步的，可以通过“加载”事件进行跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T23:55:45.607

我尚未对此进行测试，但您可以尝试[`load`](http://api.jquery.com/load-event/)在图像上进行事件。

```
$('#mailToTechOwner').live('click', function (e) {
    e.preventDefault();

    var origSource = $(this).attr("src");
    var objDiv = $(this);

    //change image to ajax loader
    objDiv.attr("src", "/Content/Images/ajax-loader.gif");

    $.get("/Project/MailMessage/" + projectId, function (data) {

         objDiv.load(function() {
            window.location = 'mailto:' + data.Email+ '?subject=Alert';
         });

         //change image back to original
         objDiv.attr("src", origSource);
    });
}); 
```

# java - 在创建线程后将值从活动传递到线程

> ID：11596708
> 
> 赞同：7
> 
> 时间：2012-07-21T23:51:11.987
> 
> 标签：java, android, multithreading, android-activity

在我的 android 程序中，一个 Activity 调用一个新的表面视图类，然后它又调用一个新的线程类。我希望能够从活动的 onPause 和 onResume 方法将值传递给线程类，这样我就可以暂停和恢复线程。我知道传递这些数据的唯一方法是创建一个新实例，它只会创建一个不同的线程。我应该如何在不创建新线程实例的情况下解决这个问题？

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new GameSurface(this));
}

@Override
protected void onResume() {
    super.onResume();
            //Would like to pass this value
            int state = 1;
}

@Override
protected void onPause() {
    super.onPause();
            //Would like to pass this value
            int state = 2;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T23:59:15.080

**关于并发的一点背景**

并发传递值是容易的部分。查看`AtomicInteger`数据类型（[此处](http://download.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)有更多信息）。原子性也意味着`All or nothing`。这种数据类型不一定是在线程或处理器之间发送数据（就像你会使用的那样`mpi`），但它只是在其共享内存上共享数据。

**但是什么是原子动作？......**

> 原子操作是作为单个工作单元执行的操作，不会受到其他操作的干扰。
> 
> 在 Java 中，语言规范保证读取或写入变量是原子的（除非变量是 long 或 double 类型）。Long 和 double 只有在声明为 volatile 时才是原子的......
> 
> *学分（[Java 并发/多线程 -](http://www.vogella.com/articles/JavaConcurrency/article.html#memorymodel_atomic) Lars Vogel 的教程）*

我强烈建议您阅读这篇文章，它涵盖了从`atomicity`、`thread pools`和.`deadlocks``the "volatile" and "synchronized" keyword`

* * *

**Start Class** *这将执行一个新线程*（也可以称为我们的`Main Thread`）。

```
import java.util.concurrent.atomic.AtomicInteger;
/**
 * @author Michael Jones
 * @description Main Thread
 */
public class start {
    private AtomicInteger state;
    private Thread p;
    private Thread r;
    /**
     * constructor
     * initialize the declared threads
     */
    public start(){
        //initialize the state
        this.state = new AtomicInteger(0);
        //initialize the threads r and p
        this.r = new Thread(new action("resume", state));
        this.p = new Thread(new action("pause", state));
    } //close constructor

    /**
     * Start the threads
     * @throws InterruptedException 
     */
    public void startThreads() throws InterruptedException{
        if(!this.r.isAlive()){
            r.start(); //start r
        }
        if(!this.p.isAlive()){
            Thread.sleep(1000); //wait a little (wait for r to update)...
            p.start(); //start p
        }
    } //close startThreads

    /**
     * This method starts the main thread
     * @param args
     */
    public static void main(String[] args) {
         //call the constructor of this class
        start s = new start();
        //try the code
        try {
            s.startThreads();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } //start the threads
    } //close main

} //close class start 
```

*因为整数是原子的，所以你也可以`main method`在除**Start Class**之外的任何地方检索它`System.out.println("[run start] current state is... "+state.intValue());`。*（如果您希望从 中检索它`main method`，则必须设置一个 Setter/Getter，就像我在**Action Class**中所做的那样）

**Action Class** *这是我们的线程*（也可以称为 our `Slave Thread`）。

```
import java.lang.Thread.State;
import java.util.concurrent.atomic.AtomicInteger;

/**
 * @author Michael Jones
 * @description Slave Thread
 */
public class action implements Runnable {

    private String event = "";
    private AtomicInteger state;

    /**
     * The constructor (this represents the current instance of a thread).
     * 
     * @param event
     * @param state
     */
    public action(String event, AtomicInteger state) {
        this.event = event; // update this instance of event
        this.state = state; // update this instance of state
    } // constructor

    /**
     * This method will be called after YourThreadName.Start();
     */
    @Override
    public void run() {
        if (this.event == "resume") {
            this.OnResume(); // call resume
        } else {
            this.OnPause(); // call pause
        }
    } // close Runnable run() method

    /**
     * The resume function Use the auto lock from synchronized
     */
    public synchronized void OnResume() {
        System.out.println("[OnResume] The state was.." + this.getAtomicState()
                + " // Thread: " + Thread.currentThread().getId());
        this.setAtomicState(2); // change the state
        System.out.println("[OnResume] The state is.." + this.getAtomicState()
                + " // Thread: " + Thread.currentThread().getId());
    } // close function

    /**
     * The pause function Use the auto lock from synchronized
     */
    public synchronized void OnPause() {
        System.out.println("[OnPause] The state was.." + this.getAtomicState()
                + " // Thread: " + Thread.currentThread().getId());
        this.setAtomicState(1); // change the state
        System.out.println("[OnPause] The state is.." + this.getAtomicState()
                + " // Thread: " + Thread.currentThread().getId());
    } // close function

    /**
     * Get the atomic integer from memory
     * 
     * @return Integer
     */
    private Integer getAtomicState() {
        return state.intValue();
    }// close function

    /**
     * Update or Create a new atomic integer
     * 
     * @param value
     */
    private void setAtomicState(Integer value) {
        if (this.state == null) {
            state = new AtomicInteger(value);
        } else
            state.set(value);
    } // close function

} // close the class 
```

**控制台输出**

```
[OnResume] The state was..0 // Thread: 9
[OnResume] The state is..2 // Thread: 9
[OnPause] The state was..2 // Thread: 10
[OnPause] The state is..1 // Thread: 10 
```

如您所见，`AtomicInteger state`我们的线程`r`和`p`.

* * *

**解决方案和要寻找的东西...**

做并发时唯一需要注意的是`Race Conditions`// `Deadlocks`。`Livelocks`有些`RaceConditions`发生是因为`Threads`是按随机顺序创建的（并且大多数程序员都认为顺序是顺序的）。

*由于线程的随机顺序，*我有这条线`Thread.sleep(1000);`，以便我`Main Thread`给从属线程`r`一点时间来更新`state`（在允许`p`运行之前）。

 *> 1）保持对线程的引用并使用方法传递值。 *学分 ( [SJuan76](https://stackoverflow.com/users/598289/sjuan76) , 2012)*

在我发布的解决方案中，我将我的`Main Thread`（又名`class start`）作为我的主要沟通者，以跟踪`Atomic Integer`我的奴隶使用（又名`class action`）。我的主线程也是我`updating`的从属线程**（内存缓冲区的更新发生在应用程序的后台并由****类处理）**。`memory buffer``Atomic Integer`**`AtomicInteger`**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T23:54:53.057

1）保持对线程的引用并使用方法传递值。

2）在线程创建期间，传递一个与Activity共享的对象。将要传递的值放入对象中，让线程定期检查它，直到找到值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T00:31:33.090

我使用我命名的参考类`Share Class`。它具有带`volatile`类型的变量。

> **volatile**用于表示一个变量的值将被不同的*线程*修改。

```
public class Share {
   public static volatile type M_shared;
} 
```

要更改此变量，您应该锁定它并在更改值后释放锁定。您可以使用`Share.M_shared`.*

# python - 部署到 Heroku 时找不到“站点”模块

> ID：11596710
> 
> 赞同：4
> 
> 时间：2012-07-21T23:51:21.013
> 
> 标签：python, django, heroku

我正在尝试将 django 应用程序部署到 Heroku，但我不断收到错误消息

```
ImportError: no module named site 
```

我正在使用来自[https://github.com/jiaaro/heroku-buildpack-django的自定义构建包](https://github.com/jiaaro/heroku-buildpack-django)

这似乎不是问题，pip 或我的 virtualenv 设置也没有任何问题，我认为错误源于我的主 urls.py 文件。该文件的设置如下：

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
from CentsLess import settings

admin.autodiscover()

urlpatterns = patterns('',
    # BASICS #
    url(r'^admin/', include(admin.site.urls)), 
. . . 
```

一些帮助学习如何更好地解释 Heroku 的错误日志或 urls.py 中可能出现的错误将不胜感激。在我的本地设置上一切正常，即使使用 gunicorn 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T00:27:33.247

```
SITE_ID = 1
INSTALLED_APPS = (
    ...
    'django.contrib.sites',
    ...
} 
```

确保在数据库（表“django_site”）中添加与 .id 相同的站点`SITE_ID`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:21:14.900

你有完整的错误日志吗？您收到该错误是因为您尝试在某处执行“导入站点”而 python 找不到“站点”。可以在任何地方，在views/urls/etc中——尝试在你的项目目录中对'import site'进行文本搜索，看看是否有任何东西出现。

[http://docs.python.org/library/exceptions.html#exceptions.ImportError](http://docs.python.org/library/exceptions.html#exceptions.ImportError)

# h2 - h2 数据库主页

> ID：11596717
> 
> 赞同：2
> 
> 时间：2012-07-21T23:52:14.600
> 
> 标签：h2

我正在查看 derby 数据库并找到设置 derby 主目录的属性。

h2 数据库中是否有`derby.system.home`设置主目录的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:21:40.500

是的，H2 支持系统属性[`h2.baseDir`](http://h2database.com/javadoc/org/h2/constant/SysProperties.html)，即使我认为我实际上并不推荐使用它。相反，我建议在数据库 URL 中使用硬编码路径，例如，`jdbc:h2:/data/dbs/test`或者使用相对于用户主目录的路径，例如`jdbc:h2:~/dbs/test`.

# iphone - 如何在某种数据库中拥有 mp3 文件并在 ios 中访问？

> ID：11596718
> 
> 赞同：3
> 
> 时间：2012-07-21T23:52:18.030
> 
> 标签：iphone, sql, ios, audio, mp3

我是 iOS 新手，我正在尝试编写一个使用 mp3 文件的应用程序。事实上，这个应用程序会有很多 mp3 文件，为了避免一个巨大的应用程序占用大量空间并且永远下载，我想把它放到某种数据库或文件服务器中，当用户点击歌曲名称，应用程序访问数据库并加载文件。我该怎么做呢？是使用 SQLite 数据库吗？

谢谢，加根

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T00:16:30.480

我会确保您对Apple 的持久性框架[CoreData](http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)非常熟悉。我会远离进行原始 SQLite 访问，因为 CoreData 将为您完成所有繁重的工作。作为一个指针，我不会将 MP3 文件本身存储在 CoreData 中，而是存储对它们的文件系统引用。

如果 Apple 文档对您来说有点枯燥，那么来自 Apress 的[Pro Core Data](http://www.apress.com/9781430233558)是学习 CoreData 基础知识以及逐步深入了解框架复杂性的出色入门读物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T00:08:07.543

您必须创建 NSData 并将其插入模型中。这里有另一篇文章，其中包含可能对您有用的代码片段：[Download, save, and play mp3 on an iPhone](https://stackoverflow.com/questions/2377787/download-save-and-play-mp3-on-an-iphone)

如果您还没有体验过 CoreData，它可能会令人生畏，但实际上它非常易于使用。如果您不熟悉 CoreData，我建议您查看 Apple 的文档并花几个小时在谷歌上搜索和创建“测试”应用程序，以了解如何创建、插入和删除托管对象。这是苹果文档：http: [//developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

希望这可以帮助

# ios - iOS 延迟一个动作再次发生

> ID：11596719
> 
> 赞同：1
> 
> 时间：2012-07-21T23:52:28.710
> 
> 标签：ios

所以我在一个带有 arc4random 的论坛中构建了一个随机数生成器。所以论坛有3个变量

```
Variable 1 > User enters it
Variable 2 > User enters it
Variable 3 > arc4random 
```

我的问题是如果变量 1&2 相同，我如何告诉 arc4random 创建相同的数字

```
So if
V1 = 5
V2 = 4
V3 = 68 and the user enters 5&4 it shall create 68 again, BUT after 10 minutes it may use another random number 
```

Sry 不得不把它作为代码，否则它不会让我上传这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:11:01.787

这就是我所理解的：您想询问 2 个数字和另一个由 arc4random 生成的数字，但是如果用户在接下来的十分钟内引入了相同的 2 个数字，则 arc4random 数字必须相等。

我将尝试将数字保存在其他变量中（例如 saveV1、saveV2 和 saveV3），并以 600 秒的时间间隔启动一个 NSTimer。NSTimer 的选择器将清除 saveVX 变量。所以这是结构：

```
 1\. Ask V1 
    2\. Ask V2
    3\. Check if there are saved numbers and check if they are V1 == saveV1 and V2 == saveV2
    4A. If they are the same: V3 = saveV3 
    4B. If they aren't: Generate V3
    5\. Save V1, V2, V3 in saveV1, saveV2 and saveV3. 
```

这是你要求的吗？

编辑：这是代码：

```
//v1, v2, v3, saveV1, saveV2, saveV3 declared in the .h file
-(void) function
{
  v1 = [[v1TextField text] intValue];
  v2 = [[v2TextField text] intValue];

if(v1 == saveV1 && v2 == saveV2) 
{
  v3 = saveV3;
}
else
{
  v3 = arc4random()%100; //This line generates a random number between 0 and 99.
  [NSTimer scheduledTimerWithTimeInterval:600.0f target:self selector:@selector(deleteVs)   userInfo:nil repeats:NO];
}

saveV1 = v1;
saveV2 = v2;
saveV3 = v3;

NSLog(@"V1: %d, V2: %d, V3: %d",v1,v2,v3);

}

-(void)deleteVs
{
saveV1 = 0;
saveV2 = 0;
saveV3 = 0;
//You can change this and put -1 to have 0 as a valid value of v1 and v2.
} 
```

# google-maps - 更改 Google 地图切片图层的不透明度 - API V3

> ID：11596722
> 
> 赞同：2
> 
> 时间：2012-07-21T23:53:44.427
> 
> 标签：google-maps, google-maps-api-3

有没有人有一个很好的例子或建议的策略来控制谷歌地图 api V3 中自定义切片图层的动态不透明度？如果这有助于说明我的目标或激发一些解决方案，这里有一些相关的例子：

谷歌地图，但有错误的 api (v2) [http://crf.casa.ucl.ac.uk/screenRoute.aspx?s=386&d=105&w=False](http://crf.casa.ucl.ac.uk/screenRoute.aspx?s=386&d=105&w=False)

等效的开放层 [http://gemma.casa.ucl.ac.uk/apps/canvas/](http://gemma.casa.ucl.ac.uk/apps/canvas/)

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-21T02:13:18.927

我已经在 github 上发布了一些代码来做到这一点：

[https://github.com/gavinharriss/google-maps-v3-opacity-control/](https://github.com/gavinharriss/google-maps-v3-opacity-control/)

# objective-c - NSFetchedResultsController 委托方法未针对这些更改触发

> ID：11596724
> 
> 赞同：1
> 
> 时间：2012-07-21T23:54:01.290
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller, nsfetchrequest

我认为这会起作用，但我不确定为什么我做错了。我有一个使用以下代码中的谓词获取的结果控制器：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription * entity = [NSEntityDescription entityForName:@"SearchResult" inManagedObjectContext:[[DataInterfaceObject sharedAlloc] managedObjectContext]];    
[fetchRequest setEntity:entity];    
[fetchRequest setFetchBatchSize:10];

// Results Table predicate
NSPredicate *predicate_Results = [NSCompoundPredicate andPredicateWithSubpredicates:[NSArray arrayWithObjects: [ResultsTableVC resultsPredicate], [NSPredicate predicateWithFormat:@"searchUsed.isCollapsedView == NO"], nil]];

// Favorites Table predicate
NSPredicate *predicate_Favorites = [NSCompoundPredicate andPredicateWithSubpredicates:[NSArray arrayWithObjects: [FavoritesTableVC favoritesPredicate], [NSPredicate predicateWithFormat:@"favoritesInfoLink.isCollapsedView == NO"], nil]];

// Full predicate
NSPredicate *predicate = 
[NSCompoundPredicate orPredicateWithSubpredicates: [NSArray arrayWithObjects: 
                                                    predicate_Results, predicate_Favorites, nil]];

[NSFetchedResultsController deleteCacheWithName:@"resultsCache"];
[fetchRequest setPredicate:predicate]; 
```

目的是获取`SearchResult`与谓词匹配的所有实体。SearchResult 实体具有`searchUsed`如下关系：SearchResult <<--> SearchTerms。SearchTerms 有一个属性`isCollapsedView`。

用户可以点击一个视图并导致相应的对象视图折叠，此时 searchUsed.isCollapsedView 的值被更新并保存到 moc。我已经证实这正在发生。

我希望获取的结果控制器能够识别此更改，然后委托方法会触发，但它们不会。

插入、删除或更新搜索实体时会触发委托方法。

是我设置错了，还是我的期望错了？我能做些什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T00:01:30.037

你的期望是错误的。它只会在`SearchResult`实体的属性或关系发生变化时触发，而不是在**关系***属性*发生变化时触发。

 **如果您要对数据进行非规范化，并将折叠状态布尔值（或使用位字段等）拉入`SearchResult`模型，那么您将获得委托调用的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:30:22.107

`entity`我发现只需触摸分配中提到的类型的实体的属性就足够了。然后实体被 moc 标识为更改/更新。显然，此时 frc 会将谓词（包括关系）应用于那些更改的实体，以确定是否存在插入、删除或更新。（通过触摸，我的意思是只分配一个与现有值相同的值，然后将其保存到 mod。）这样做可以避免添加已经在关系实体中捕获的属性。**

# python - 在 Python 中创建“热图”彩色表

> ID：11596728
> 
> 赞同：7
> 
> 时间：2012-07-21T23:55:44.627
> 
> 标签：python, plot, heatmap, tabular

我正在寻找一种以表格格式（使用 Python）绘制二维表格数据的方法，表格单元格的颜色类似于热图。像这样的东西：

![http://www.r-bloggers.com/wp-content/uploads/2011/01/heat_copy.png.scaled.1000.jpg](../Images/241883caffb0b5f0677042f8fa8a6792.png)

我发现了很多使用 matplotlib 的常规热图示例——但并不是像这个链接那样产生输出的东西。任何提示表示赞赏。

# asp.net - 发送电子邮件时出现异常

> ID：11596734
> 
> 赞同：0
> 
> 时间：2012-07-21T23:57:22.797
> 
> 标签：asp.net

我复制该代码 MailMessage mail = new MailMessage();

```
 mail.To.Add(model.To);

        mail.From = new MailAddress("sheikh.abm@gmail.com");

        mail.Subject = model.Subject ;

        mail.Body = model.Message;

        mail.IsBodyHtml = true;

        SmtpClient client = new SmtpClient("localhost:");
        client.UseDefaultCredentials = false;
        client.EnableSsl = true;
        client.Host = "localhost:";
        client.Port = 25;

        NetworkCredential credentials = new NetworkCredential(model.To, "abc");

        client.Credentials = credentials;

        try
        {
            client.DeliveryMethod = SmtpDeliveryMethod.PickupDirectoryFromIis;
            client.Send(mail);
        }
        catch
        {

        }
        return View("Index");
    } 
```

我得到的例外是“不得为拾取目录交付方法启用 SSL”。

# php - PHP如何检查MySQL结果是否包含值

> ID：11596742
> 
> 赞同：-2
> 
> 时间：2012-07-21T23:59:05.130
> 
> 标签：php, mysql, arrays

我有以下代码：

```
$getfreq = mysql_query("SELECT wp_term_relationships.term_taxonomy_id FROM wp_term_relationships WHERE wp_term_relationships.object_id = '1737'"); 
```

以上结果 phpymyadmin 返回 5 个值：345 456 569 634 723

现在，使用 PHP 我想检查 $getfreq 的内容，看看它是否包含 569。

我试过这样做：

```
if (in_array(569,$getfreq,TRUE) {
    echo "Success!";
} else if (in_array(654,$getfreq,TRUE) {
    echo "Not good";
} else {
    echo "Failure";
} 
```

但这不起作用。

这样做：

```
print_r($getfreq); 
```

结果：Array()。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:01:22.947

`$getfreq`不是一个数组，它是一个结果资源。为了获取数组中的实际行，您需要对结果调用其中一个 fetch 函数，例如：

`$row = mysql_fetch_assoc($getfreq)`

然后`in_array`在`$row`.

> 这不起作用。如果我使用 print_r($row)，我只会得到 Array ([term_taxonomy_id] => 345)。在 phpmyadmin 中，我的查询返回上述 5 个结果。其余的发生了什么？

那是因为您需要遍历整个结果集。这是单行的结果：

```
while ( false !== ($row = mysql_fetch_assoc($getfreq))) {
   // make your comparison for each row   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T00:02:33.177

尝试：

```
$res = mysql_fetch_array($getfreq); 
```

然后

```
if (in_array(569,$res,TRUE) {.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T00:46:13.627

```
while ($row = mysql_fetch_assoc($getfreq)) {
    if ($row[term_taxonomy_id] == 345) {
        echo "WORKS!";
    }
} 
```

# mvvm - 是否应该通过构造函数、属性或方法调用来初始化 ViewModel

> ID：11596744
> 
> 赞同：11
> 
> 时间：2012-07-21T23:59:17.670
> 
> 标签：mvvm, constructor, initialization, viewmodel

我在 MVVM 的上下文中与一些不同的设计概念作斗争，这些概念主要源于何时初始化 ViewModel 的问题。更具体地说，在“初始化”方面，我指的是加载值，例如选择值、安全上下文以及在某些情况下可能导致几秒钟延迟的其他内容。

可能的策略：

1.  将参数传递给 ViewModel 构造函数并在构造函数中加载。
2.  仅支持 ViewModel 上的无参数构造函数，而是支持采用参数并执行加载的初始化方法。
3.  选项 1 和 2 的组合，其中将参数传递给 ViewModel 构造函数，但加载延迟到调用 Initialize 方法。
4.  选项 3 的变体，不是将参数传递给 ViewModel 构造函数，而是直接在属性上设置。

**对 ViewModel 属性 getter 和 setter 的影响**

在延迟初始化的情况下，需要知道 ViewModel 是否处于被认为可用的状态，IsBusy 属性通常用于该状态，就像它用于其他异步和耗时的操作一样。这也意味着，由于 ViewModel 上的大多数属性都公开了从模型对象中检索到的值，因此我们必须不断编写以下类型的管道来确保模型可用。

```
public string Name
{
    get 
    {  
        if (_customerModel == null) // Check model availability
        {
            return string.Empty;
        }

        _customerModel.Name;
    }
} 
```

虽然检查很简单，但它只是增加了 INPC 的管道和其他类型的必需品，这使得 ViewModel 的编写和维护变得有些麻烦。在某些情况下，它变得更加成问题，因为可能并不总是从属性 getter 返回合理的默认值，例如布尔属性 IsCommercialAccount 的情况，如果没有可用的模型，则返回 true 或false 对一系列其他设计问题（例如可空性）提出质疑。在上面的选项 1 的情况下，我们将所有内容传递给构造函数并加载它，然后我们只需要关注 View 中的 NULL ViewModel，并且当 ViewModel 不为 null 时，它保证被初始化。

**支持延迟初始化**

使用选项 4，还可以依赖[ISupportInitialize](http://msdn.microsoft.com/en-us/library/system.componentmodel.isupportinitialize.aspx)，它可以在 ViewModel 的基类中实现，以提供一致的方式来指示 ViewModel 是否已初始化，并通过标准方法[BeginInit](http://msdn.microsoft.com/en-us/library/system.componentmodel.isupportinitialize.begininit.aspx)启动初始化。这也可以用于选项 2 和 3 的情况，但如果所有初始化参数都设置在一个原子事务中，则意义不大。至少以这种方式，上面显示的条件可能会变成类似

**设计如何影响 IoC**

在 IoC 方面，我知道选项 1 和 3 可以使用通常首选的构造函数注入来完成，而选项 2 和 4 可以分别使用方法和属性注入来完成。然而，我关心的不是 IoC 或如何传递这些参数，而是整体设计以及它如何影响 ViewModel 实现及其公共接口，尽管我想成为一个好公民，以便在必要时让 IoC 更容易一些未来。

**可测试性**

所有三个选项似乎都同样支持可测试性的概念，这对在这些选项之间做出决定没有多大帮助，尽管可以说选项 4 可能需要更广泛的测试集以确保属性的正确行为，而该行为取决于初始化状态.

**指挥能力**

选项 2、3 和 4 都有副作用，即需要 View 中的代码调用 ViewModel 上的初始化方法，但是如果必要，这些可以作为命令公开。在大多数情况下，可能会在构造之后直接加载调用这些方法，如下所示。

```
var viewModel = new MyViewModel();
this.DataContext = viewModel;
// Wrap in an async call if necessary
Task.Factory.StartNew(() => viewModel.InitializeWithAccountNumber(accountNumber)); 
```

**其他一些想法**

我在使用 MVVM 设计模式时尝试了这些策略的变体，但还没有得出最佳实践的结论。我很想听听社区的想法，并尝试就初始化 ViewModel 或以其他方式在它们处于不可用状态时处理它们的属性的最佳方式达成合理共识。

一个理想的情况可能是使用状态模式，其中 ViewModel 本身被替换为表示不同状态的不同 ViewModel 对象。因此，我们可以有一个表示繁忙状态的通用 BusyViewModel 实现，它消除了对 ViewModel 上 IsBusy 属性的需求之一，然后当下一个 ViewModel 准备好时，它在 View 上被换出，从而允许 ViewModel 遵循概述的状态在选项 1 中，它在构造过程中完全初始化。这留下了一些关于谁负责管理状态转换的问题，例如，可能是 BusyViewModel 负责抽象类似于 BackgroundWorker 或 Task 本身正在执行初始化并在准备好时呈现内部 ViewModel 的责任。另一方面，在视图上交换 DataContext 可能需要处理 View 中的事件或将 View 的 DataContext 属性的有限访问权限授予 BusyViewModel，以便可以在传统的状态模式意义上进行设置。如果人们在这些方面做类似的事情，我肯定想知道，因为我的谷歌搜索还没有出现太多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T05:50:52.687

我的面向对象设计的一般方法是，无论我是创建视图模型还是其他类型的类；可以传递给构造函数的所有东西都*应该**传递*给构造函数。这减少了对某种`IsInitialized`状态的需求，并使您的对象不那么复杂。有时某些框架很难遵循这种方法，例如 IoC 容器（尽管它们应该允许构造函数注入），但我仍然坚持作为一般规则。

# r - xts::to.period 的问题导致 R 崩溃

> ID：11596747
> 
> 赞同：1
> 
> 时间：2012-07-21T23:59:23.323
> 
> 标签：r, xts

我正在使用 xts 并循环加载 100 到 1000 个文件。每个文件在 50k 到 300k 行之间。我在 Windows 7 64 位上使用最新版本的 R 2.15.1。我在带有 R 版本 2.14.X 的 Ubuntu Linux 上遇到了同样的问题。

下面的代码会定期使 R 崩溃：

```
library(xts)
N <- 1e6
for(i in 1:1000) {
  allTimes <- Sys.time()-N:1
  x <- NULL
  x <- xts(,allTimes)
  sampTimes <- allTimes[seq(1,length(allTimes),by=2)]
  y <- merge(xts(seq_along(sampTimes), sampTimes), allTimes)
  y <- na.locf(y)
  y <- to.period(y, 'seconds', 10)
  index(y) <- index(to.period(x, 'seconds', 10))
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:47:35.033

这是[在 R-devel 上回答的](https://stat.ethz.ch/pipermail/r-devel/2012-July/064478.html)。问题是调用`to.period`零宽度 xts 对象将返回随机内存位置的 OHLC 数据。例如：

```
library(xts)
x <- xts(,Sys.time()-10:1)
y <- to.period(x)
y
#                           x.Open       x.High         x.Low       x.Close
# 2012-07-23 15:47:30 4.25426e-314 2.36246e-300 1.428936e-316 1.428936e-316 
```

由于聚合“无数据”没有意义，我已经修补`to.period`以在零宽度/长度对象上运行时抛出错误（R-Forge 上的修订版 690）。

无需`to.period`在零宽度对象上运行，只需创建一个充满 1 的临时 xts 对象并`to.period`在其上运行。这将适用于当前在 CRAN 上的 xts。

```
library(xts)
N <- 1e6
for(i in 1:100) {
  allTimes <- Sys.time()-N:1
  x <- NULL
  x <- xts(,allTimes)
  sampTimes <- allTimes[seq(1,length(allTimes),by=2)]
  y <- merge(xts(seq_along(sampTimes), sampTimes), allTimes)
  y <- na.locf(y)
  y <- to.period(y, 'seconds', 10)
  tmp <- xts(rep(1,length(allTimes)), allTimes)
  index(y) <- index(to.period(tmp, 'seconds', 10))
} 
```

# mysql - MySQL SUM 在包含多个连接的查询中输出错误值

> ID：11596749
> 
> 赞同：0
> 
> 时间：2012-07-22T00:00:12.740
> 
> 标签：mysql, join, sum

我正在使用以下查询获取有关这些表的信息，但是 defenderhit 和 deferdamage SUM 值与第一个连接的行号的行数相乘。

表'**战斗**'：

```
battle_id   city_id     attacker    defender    battle_time 
1           07          6           0           1342918014 
```

表'**战斗打击**'：

```
battle_id   family_id   user_id     hits    damage 
1           0           0           1000    50000
1           6           15          108     3816
1           6           2           81  2046
1           6           1           852 1344 
```

**MySQL 查询**：

```
SELECT b.battle_id, b.city_id, b.attacker, b.defender, b.battle_time,
SUM(COALESCE(bh1.damage,0)) AS attackerdamage, SUM(COALESCE(bh2.damage,0)) AS defenderdamage,
SUM(COALESCE(bh1.hits,0)) AS attackerhit, SUM(COALESCE(bh2.hits,0)) AS defenderhit
FROM battles AS b
LEFT JOIN battlehits AS bh1 ON b.attacker = bh1.family_id
LEFT JOIN battlehits AS bh2 ON b.defender = bh2.family_id
WHERE b.battle_id=1
GROUP BY b.battle_id LIMIT 1 
```

该查询的结果如下：

```
battle_id   city_id     attacker    defender    battle_time     attackerdamage  defenderdamage  attackerhit     defenderhit 
1           07          6           0           1342918014      7206            150000          1041            3000 
```

正如您在表数据中看到的，defenderhit 和 deferdamage SUM 值应该是 1000 和 50000，但它们乘以 3。我在这里做什么？有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:20:21.277

在 group by/sum 之前，您将获得三行。战斗命中的三个攻击者行中的每一行都有一个行。这些中的每一个都与来自战斗命中的相同防御者行配对，导致防御者数据增加三倍。要看到这一点，请删除 group by 和 limit 子句并取出 sum()s。您正在有效地创建所有防御者 X 所有攻击者的叉积，然后求和。

这显示了包含重复防守者数据的三行。这是在一对多对多的关系上进行连接的结果，而不是一对一的关系。

```
SELECT b.battle_id, b.city_id, b.attacker, b.defender, b.battle_time,
COALESCE(bh1.damage,0) AS attackerdamage, COALESCE(bh2.damage,0) AS defenderdamage,
COALESCE(bh1.hits,0) AS attackerhit, COALESCE(bh2.hits,0) AS defenderhit
FROM battles AS b
LEFT JOIN battlehits AS bh1 ON b.attacker = bh1.family_id
LEFT JOIN battlehits AS bh2 ON b.defender = bh2.family_id
WHERE b.battle_id=1; 
```

输出：

```
battle_id   city_id attacker    defender    battle_time attackerdamage  defenderdamage  attackerhit defenderhit
1   7   6   0   1342918014  3816    50000   108 1000
1   7   6   0   1342918014  2046    50000   81  1000
1   7   6   0   1342918014  1344    50000   852 1000 
```

您需要将其拆分为单独的查询。一个用于攻击者的总和，另一个用于防御者的总和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T00:06:24.783

您可以使用模拟不同行的 SUM

```
(SUM(t.field_to_sum) / COUNT(t.primary_key) * COUNT(DISTINCT t.primary_key)) 
```

# c# - System.Threading.Task 什么时候有用？

> ID：11596753
> 
> 赞同：19
> 
> 时间：2012-07-22T00:00:49.557
> 
> 标签：c#, multithreading, parallel-processing, task-parallel-library, task

我已经广泛使用了大部分 Threading 库。我非常熟悉创建新线程、创建 BackgroundWorker 和使用内置的 .NET ThreadPool（这些都非常酷）。

但是，我从未找到使用[Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)类的理由。我可能看到过一两个使用它们的例子，但是这些例子不是很清楚，也没有给出一个高级概述，说明为什么应该使用任务而不是新线程。

问题 1：从高层次上看，在 .NET 中使用任务与其他方法之一相比何时有用？

问题 2：有没有人有一个简单和/或中等难度的例子来演示如何使用任务？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-22T09:19:45.790

`Task`使用s有两个主要优点：

1.  `Task`可以表示将来可用的任何结果（一般概念并不特定于.Net，它被称为[future](http://en.wikipedia.org/wiki/Futures_and_promises)），而不仅仅是计算。这对于`async`-尤其重要`await`，它使用`Task`s 进行异步操作。由于获得结果的操作可能会失败，因此`Task`s 也可以表示失败。
2.  `Task`有很多方法可以对它们进行操作。您可以同步等待它完成（`Wait()`），等待它的结果（`Result`），在完成时设置一些操作`Task`（`ContinueWith()`）以及一些在多个`Task`s 上工作的方法（`WaitAll()`, `WaitAny()`, `ContinueWhenAll()`）。所有这些都可以使用其他并行处理方法实现，但您必须手动完成。

使用还有一些较小的优势`Task`：

1.  您可以使用自定义`TaskScheduler`来决定`Task`运行的时间和地点。[例如，如果您想在 UI 线程上](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx)[运行 a`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx)、 [限制并行度](http://blogs.msdn.com/b/pfxteam/archive/2010/04/09/9990424.aspx)或[拥有一个`Task`级别的 reader-writer 锁](http://msdn.microsoft.com/en-us/library/system.threading.tasks.concurrentexclusiveschedulerpair%28v=vs.110%29.aspx)，这可能很有用。
2.  `Task`支持通过合作取消[`CancellationToken`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.aspx)。
3.  `Task`表示计算的 s 有一些性能改进。例如，它们使用工作窃取队列来进行更有效的处理，并且它们还支持内联（`Task`在同步等待它的线程上执行尚未开始的线程）。

# mysql - 在日期范围内加入 MySQL

> ID：11596757
> 
> 赞同：0
> 
> 时间：2012-07-22T00:01:24.687
> 
> 标签：mysql, join

我正在尝试查询 MySQL。假设我有 3 个表并想象数据看起来像这样：

```
apples_sold
+--------+------------+----------+------+
| tranID | date       | apple_id | sold |
+--------+------------+----------+------+
|    101 | 2012-07-01 |      a01 |    2 |
|    102 | 2012-07-02 |      a01 |    5 |
|    103 | 2012-07-03 |      a01 |    1 |
|    104 | 2012-07-04 |      a01 |    0 |
|    105 | 2012-07-05 |      a01 |    2 |
+--------+------------+----------+------+

price_history
+---------+------------+----------+-------+
| priceID | date       | apple_id | price |
+---------+------------+----------+-------+
|     p01 | 2012-07-01 |      a01 | $0.25 |
|     p02 | 2012-07-03 |      a01 | $0.10 | <- price change
+---------+------------+----------+-------+

apple_name
+----------+----------+
| apple_id | name     |
+----------+----------+
|      a01 | McIntosh |
+----------+----------+ 
```

尝试创建一个输出以下内容的查询：

```
apple_prices
+------------+----------+-------+
| date       | name     | price |
+------------+----------+-------+
| 2012-07-01 | McIntosh | $0.25 |
| 2012-07-02 | McIntosh | $0.25 |
| 2012-07-03 | McIntosh | $0.10 | <- price change
| 2012-07-04 | McIntosh | $0.10 |
| 2012-07-05 | McIntosh | $0.10 |
+------------+----------+-------+ 
```

不想将价格与 apples_sold 记录、标准化等一起存储。问题是我不确定以价格加入已售记录的最佳方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T01:30:23.847

您可以使用：

```
SELECT a.date, d.name, c.price
FROM apples_sold a
INNER JOIN
(
    SELECT a.date, MAX(b.date) AS maxdate
    FROM apples_sold a
    INNER JOIN price_history b ON a.date >= b.date
    GROUP BY a.date
) b ON a.date = b.date
INNER JOIN price_history c ON b.maxdate = c.date
INNER JOIN apple_name d ON a.apple_id = d.apple_id 
```

* * *

[SQLFiddle 演示](http://www.sqlfiddle.com/#!3/580b5/10/0)

# android - 普通软件书中的 ActionBarsherlock 问题

> ID：11596759
> 
> 赞同：1
> 
> 时间：2012-07-22T00:01:39.037
> 
> 标签：android, actionbarsherlock, commonsware

在 commonsware 书，教程 #6 中，我按照信中的说明进行操作。我从 zip 下载中创建了包含 \library 目录内容的并行目录。我确保 empublite 项目处于合规级别 1.6。我将 ActionBarSherlock 添加到工作区，我得到“找不到标记 ID 170”，我注意到 AndroidManifest.xml 文件的内容已被清除为零。

我在这里阅读了另一篇文章并重新阅读了所有说明。控制台错误消息是...

```
2012-07-21 16:53:32 - ActionBarSherlock] Parser exception for /ActionBarSherlock/AndroidManifest.xml: Premature end of file. 
```

我究竟做错了什么？谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:05:07.870

是的，说明书有问题。

如果您打算使用 Eclipse，请*不要*将 ActionBarSherlock 的源代码直接放在您的工作区中，这是说明所暗示的。当您将代码带入 Eclipse 时，将出现一个复选框，您可以选中该复选框以“将文件复制到工作区”——改为使用它。

Eclipse 不喜欢将不在 Eclipse 项目中的代码加载到 Eclipse 工作区*中，而代码在工作区目录中开始*。只需在`library/`其他地方临时解压缩（例如，您的桌面）。

我很抱歉。

* * *

引用[我刚刚提交的勘误通知](http://commonsware.com/Android/errata)：

> 页面 211 有不正确的 Eclipse 说明添加 ActionBarSherlock。跳过第 1 步的第二段（“出于目的……”）。相反，将`library/`目录解压缩到远离 Eclipse 工作区的某个地方（例如，在您的桌面上）。

# html - 我的 div 没有向左堆叠？

> ID：11596762
> 
> 赞同：0
> 
> 时间：2012-07-22T00:02:08.963
> 
> 标签：html, css

我想要的只是让我的两个 div 彼此相邻堆叠。它们位于容器内。为什么它不起作用？

这是我的 CSS：

```
#housecontainer {
    height: 420px;
    width: 1000px;
    padding-left: 110px;
    padding-top: 80px;
}

#houseimage {
    float: left;
    height: 388px;
    width: 516px;
}

#rose {
    width:200px;
    height:100px;
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:08:24.327

您有几个结构错误。

尝试像这样构建您的 HTML：

[http://jsfiddle.net/bGyV4/](http://jsfiddle.net/bGyV4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T00:12:34.730

从您在评论中发布的 HTML 来看，您的页面结构是：

```
#devcontainer
  #develbox
    #housecontainer
      #houseimage
        p
          a
            img
        #rose 
```

由于`#rose`是 的子级`#houseimage`，它不会跟随与它相同的浮动。由于`#houseimage`宽度为 516，图像也是如此，因此没有剩余空间`#rose`，它被强制在下方。

只需`</div>`在前面再放一个`<div id="rose">`，这样它就在里面`#housecontainer`和*旁边* `#houseimage`，就像你想要的那样。然后添加`</div>`您缺少的另外两个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T00:18:48.560

你的 html 错误，一些`DIV`标签没有关闭，试试这个：

```
<div id="devcontainer">
    <div id="develbox">
        <div id="housecontainer">
            <div id="houseimage">
                <p>
                    <a href="images/rosebrook.pdf" target="_blank">
                        <img src="images/rosebrookthumb.png" width="516" height="388" />
                    </a>
                </p>
            </div>
            <div id="rose">THIS ISNT WORKING!!!</div></div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T00:14:25.417

这是您在评论中发布的 HTML：

```
<div id="housecontainer">
    <div id="houseimage">
        <p>
            <a href="images/rosebrook.pdf" target="_blank">
                <img src="images/rosebrookthumb.png" width="516" height="388" />
            </a>
            <div id="rose">
                <div id="rose">THIS ISNT WORKING!!!</div>
            </div>
        </p>
    </div>
</div> 
```

这有很多问题：

1.  元素的`id`必须是唯一的。它用于*标识*元素。在您的标记中有两个`div`带有`id="rose"`.
2.  `#houseimage`从您的问题来看，您似乎想要`#rose`并肩作战。这不会发生，因为`#rose`在*里面* `#houseimage`。也就是说，它是 的孩子`#houseimage`。您需要将它移到 之外，`div`以便它`#rose`是 的兄弟`#houseimage`。

将您的 HTML 更改为如下所示：

```
<div id="housecontainer">
    <div id="houseimage">
        <p>
            <a href="images/rosebrook.pdf" target="_blank">
                <img src="images/rosebrookthumb.png" width="516" height="388" />
            </a>
        </p>
    </div>
    <div id="rose">
        <div id="roseChild">THIS ISNT WORKING!!!</div>
    </div>
</div> 
```

**[jsFiddle 演示](http://jsfiddle.net/bGyV4/1/)**

# javascript - 在页面加载时动态加载选择框

> ID：11596763
> 
> 赞同：2
> 
> 时间：2012-07-22T00:02:27.247
> 
> 标签：javascript, jquery

当我的应用程序首次打开时，我正在通过 ajax 调用动态填充几个选择框。然而，当页面加载时，我注意到我的选择框一开始是空的，然后一旦填充它们就会相应地调整它们的大小。这很烦人，而且有点让人分心。

我的 document.ready 方法中确实有填充方法，但也许我处理不正确？

```
$(document).ready( function(){

populateOptions(); // Populate our select box upon page load.

});

// Builds a select list and binds it to a class
function populateOptions(){

    var optionList = getOptions();
    var myList = "";

    // Loop over our returned result set and build our options
   for(i=0; optionList.length; i++){
       myList += "<option>"+optionList[i][1]+"</option>";
    }

    // Now take our myList and append it to our select
    $("#myOptionList").append(myList);
}

Options: <select id="myOptionList"></select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T00:25:37.867

您可以通过css为选择设置宽度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T00:09:17.300

添加一个虚拟选项以在通过 AJAX 加载时显示：

```
<select id="myOptionList">
    <option>Loading...</option>
</select> 
```

* * *

清除“加载”选项并在可用时添加新列表

```
$("#myOptionList").html('');
$("#myOptionList").append(myList); 
```

* * *

用css设置宽度：

```
#myOptionList{
width:150px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T00:07:02.343

一种简单的解决方案是在调用 ajax 函数时直接创建您的孩子。

在完成您的 populateOptions() 函数之前，将选择附加到您的 .

我记得有这个问题，可以解决它，但这是一种非常简单的处理方法。

希望这有帮助。

# php - PHP/JavaScript MP3 播放器采样和销售歌曲

> ID：11596765
> 
> 赞同：-4
> 
> 时间：2012-07-22T00:02:34.957
> 
> 标签：php, javascript, jquery, paypal

我使用 jPlayer 为我的一个朋友的网站制作了一个定制的 MP3 播放器，但现在他希望能够隐藏链接（你可以在 JavaScript 中看到它们）并让歌曲只能通过 Paypal 购买来下载。换句话说，他希望让播放器在他的网站上保持原样，但只购买他的歌曲的任何下载。我完全不知道从哪里开始进行这样的冒险。任何人都可以给一些方向吗？

只是为了澄清，我知道我不能“隐藏脚本”，但我希望有人可能知道一种让 jPlayer 从服务器读取的方法（php 返回）或同样易于设置样式的替代播放器。我想我可以很容易地设置贝宝链接，但不确定要如何防止 m3 在 javascript 中被找到，而不用绞尽脑汁（没有得到报酬）来寻找服务器端解决方案。

我没有得到报酬，所以我试图找到一个快速、简单、免费的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T00:20:55.127

你真的无法在 JavaScript 中真正*隐藏*任何东西，当然，任何知道打开 Firebug 或 IE9 开发者工具的网络选项卡的人都无法做到。您可能需要服务器提供一些帮助，以降低从预览播放器下载的可行性。

最简单的选择是**根本不**通过网络播放器提供要购买的曲目。许多网站成功地只提供了 30 秒的样本，或者做一些事情，比如在轨道上添加周期性的音调。下载的 mp3 文件只能使用购买时的验证码访问。PHP 脚本会确认代码，从 Web 根目录外的文件夹中读取 MP3 并将其传递给浏览器（使用正确的 Content-type 和文件处理标题）。

如果在不允许下载的情况下提供未经更改的音频绝对是关键任务，jPlayer 似乎确实对流式 mp3 有一些支持……谷歌一下流式 mp3 服务器，看看是否有任何可用的东西在你的服务器。

无论哪种方式，您都可以将要购买的 MP3 保存在 wwwroot/htdocs 文件夹之外，并在确认购买时提供它们。

编辑：

有免费/开源的流媒体 mp3 服务器，但我不知道您的主机是否足够灵活，可以让您安装一台。将 mp3 流式传输到 jPlayer 的优势在于 jPlayer 实际上并没有下载 mp3……您将其保留给付费粉丝！谷歌提供了这些你可能会觉得有用的链接（我自己没试过）：

[http://www.icecast.org/](http://www.icecast.org/)

[http://www.vibestreamer.com/](http://www.vibestreamer.com/)

[http://www.yolinux.com/TUTORIALS/LinuxTutorialAudioStreaming.html](http://www.yolinux.com/TUTORIALS/LinuxTutorialAudioStreaming.html)

# ios - iOS arc4random 不是从 0 开始

> ID：11596767
> 
> 赞同：0
> 
> 时间：2012-07-22T00:03:41.687
> 
> 标签：ios

我使用 arc4random 创建一个随机数，有没有办法告诉 arc4random 从例如 -5 而不是 0 开始？因为我想创建一个-3,4到4,3范围内的随机数，我在iOS开发中还没有那么好，所以如果它不适用于arc4random，我还有什么其他可能性（如果有指南或类似的东西）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T00:08:15.790

首先，`arc4random_uniform`用于获取所需绝对范围内的随机数（对于 -3 到 4，它将是 7）`arc4random_uniform(7)`：.

您可能还会看到形式`arc4random() % max`，但这会引入模偏差，使分布不那么随机，`arc4random_uniform`这是首选。

之后，调整你的下限：

```
arc4random_uniform(7) - 3 
```

[苹果文档](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/arc4random.3.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:07:48.923

因为`arc4random() % n`从 0..n-1 返回一个整数，`arc4random() % (n - k) + k`所以从 k..n-1 返回一个。插入 k=-5。那是你需要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T00:07:58.117

如果您希望它从 -5 而不是 0 开始，只需减去 5。

如果要创建-3到4范围内的随机数，只需创建一个从0到7的数字并从中减去3。

该`arc4random`函数为您提供一个从零到 4,294,967,295 的数字。要将其更改为从 0 到 7 的数字，只需除以 613,566,756。（或用于`arc4random_uniform`避免任何偏见。）

# c# - 读取 Ctrl + 直到从键盘找到一个非数字

> ID：11596774
> 
> 赞同：0
> 
> 时间：2012-07-22T00:05:18.320
> 
> 标签：c#, c, windows, keyboard-shortcuts, key

有可能一旦`Ctrl`按下，在找到非数字之前按下所有键？有效输入：

`Ctrl`+`1` `// do something with 1`

`Ctrl`+`2` `// do something with 2`

`//..`

`Ctrl`+`30` `// do something with 30`

这是一个将作为`FN`键工作的遗嘱，但不是它，我想使用`Ctrl`和扩展范围 from `0-9`to `0-50`。我希望这是干净的。提前致谢。

注意：我标记了`C#`和`C`语言，因为这些语言中的任何一种都对我的用例有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:35:53.677

一个低级的键盘钩子应该能够做到这一点。[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)与 一起使用`WH_KEYBOARD_LL`。您可以在 Internet 上找到一些 C# 实现。

由于其全局副作用，我通常不鼓励使用键盘钩子，但我想不出其他任何可以满足您要求的东西。

# asp.net - 可以将 OAuth 访问令牌保留在用户的 cookie 中吗？

> ID：11596775
> 
> 赞同：4
> 
> 时间：2012-07-22T00:05:19.633
> 
> 标签：asp.net, security, oauth

我认为这没关系，但我想我会看看其他人的想法。

具体来说，令牌字符串将是 asp.net FormsAuthentication 票证的用户数据字符串的一部分，因此将被加密。当然，相关的秘密不会存储在任何 cookie 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:35:16.237

在某些情况下，将 OAuth 访问令牌存储在用户的 cookie 中没有技术问题。诸如您仅在会话生命周期内访问受保护资源并且不期望访问受保护资源的能力将保留在用户会话中的情况。

# python - 烧瓶不提供图片

> ID：11596777
> 
> 赞同：22
> 
> 时间：2012-07-22T00:06:03.357
> 
> 标签：python, html, flask

我创建了一个小型 Flask 应用程序，用于在本地计算机上处​​理和呈现数据以供本地使用。My Flask 应用程序处理子文件夹中的数据，然后打开网页以显示处理后的数据。一切看起来都很棒，只是没有提供图像。例如，生成的 HTMl 源将具有以下内容：

```
<img src="/Users/username/Desktop/datafolder/pics/pic1.png" alt="pic1"> 
```

但是不会有图像。路径是正确的，所以我猜这与图像如何传递或不传递给`render_template`. 也许有一种方法可以指定媒体目录，正如我在这个[django 帖子](https://stackoverflow.com/questions/5532572/problem-with-serving-pictures-in-django)中看到的那样？

任何关于我如何能够包含图像的建议都将非常受欢迎。

最好的问候，扎克cp

编辑：如答案和评论中所述，所有静态文件都必须位于指定的静态目录中。我对“file://”结构的使用触发了浏览器给出错误消息： `"Not allowed to load local resource: file:///Users/username/Desktop/datafolder/pics/pic1.png"` 这就是我看不到图像的原因。我可以使用下面的任何解决方案来生成我想要在指定静态文件夹中提供的图像。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-22T07:06:05.613

Flask 应用程序将尝试提供静态文件的文件默认为应用程序根目录中的“静态”路径。因此，如果您在...中运行程序

`C:\Users\username\Desktop\MyApp`

静态文件夹将是

`C:\Users\username\Desktop\MyApp\Static`

因此，当尝试发球时

`/Users/username/Desktop/datafolder/pics/pic1.png`

Flask 将尝试提供的文件实际上是......

`C:\Users\username\Desktop\MyApp\Static\Users\username\Desktop\datafolder\pics\pic1.png`

这恐怕是不对的。

因此，您可以做一些事情：

1.  将正在处理的文件更改为运行 Flask 应用程序的“静态”文件夹，并使 HTML src 值相对于该目录

2.  [在Flask 构造](http://flask.pocoo.org/docs/api/#application-object)函数上设置`static_folder`参数。这允许您专门设置静态文件的提供位置。

    ```
    app = Flask(static_folder='C:\\Some\\Directory') 
    ```

3.  正如一些评论所建议的，更改为使用 file:// 类型。如果它不起作用，请发布您正在尝试的内容，因为它应该可以工作:)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-22T09:16:18.943

好吧，你最好看看这个： http: [//flask.pocoo.org/docs/quickstart/#static-files](http://flask.pocoo.org/docs/quickstart/#static-files) 你需要做什么：

```
cd path/to/your/flask/app
mkdir static
mv /Users/username/Desktop/datafolder/pics/pic1.png /static 
```

`<img src="/static/pic1.png" alt="pic1">`在您的模板中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-02T04:47:58.053

Flask 应用程序将尝试提供静态文件的文件默认为应用程序根目录中的“静态”路径。

创建静态文件夹并在其中粘贴图像并将路径指定为 \Static\Img.png

# android - 如何在 android 中的 glSurfaceView 之上构建 GUI/HUD

> ID：11596778
> 
> 赞同：1
> 
> 时间：2012-07-22T00:06:08.697
> 
> 标签：android, android-layout, glsurfaceview

我有一个`glSurfaceView`看起来像这样的：

```
public class GLLayer extends GLSurfaceView implements SurfaceHolder.Callback, Camera.PreviewCallback, Renderer {

    private Context context;

    private Circle cRing;
    private CompassNeedle cNeedle;

    private MarkerNorth mNorth;
    private MarkerEast mEast;
    private MarkerSouth mSouth;
    private MarkerWest mWest;
    private MarkerSouthWest mSWest;
    private MarkerSouthEast mSEast;
    private MarkerNorthWest mNWest;
    private MarkerNorthEast mNEast;
    private MarkerWest mGod;
    private MarkerCustom userTag;
    ArrayList <MarkerCustom> locationTags;

    private PhoneOrientation phoneOri;
    private boolean randomSelection[][][]=new boolean[10][10][10];
    ArrayList<double[]> tags = new ArrayList<double[]>();
    double tempOr[] = new double[3];
    ARLaunch _parent;

    RelativeLayout rel;

    public GLLayer(Context context, int orientation, ArrayList<MarkerCustom> custMarkers,ARLaunch parent) {
        super(context);

        locationTags = custMarkers;
        _parent = parent;

        this.context = context;

        this.mGod = new MarkerWest();
        this.cRing = new Circle();
        this.cNeedle = new CompassNeedle();

        this.mNorth = new MarkerNorth();
        this.mEast = new MarkerEast();
        this.mSouth = new MarkerSouth();
        this.mWest = new MarkerWest();

        this.mSWest = new MarkerSouthWest();
        this.mSEast = new MarkerSouthEast();
        this.mNWest = new MarkerNorthWest();
        this.mNEast = new MarkerNorthEast();

        phoneOri=new PhoneOrientation(context); // sensor manager and interpreter

        // settings for translucent glView
        this.setEGLConfigChooser(8, 8, 8, 8, 16, 0);
        this.getHolder().setFormat(PixelFormat.TRANSLUCENT);

        // set render to inline 
        this.setRenderer(this);

        phoneOri.start(context, orientation);

    }

    @Override
    public void onDrawFrame(GL10 gl) {

        gl.glEnable(GL10.GL_TEXTURE_2D);

        // clear Screen and Depth Buffer
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        // Reset the Modelview Matrix
        gl.glLoadIdentity();

        //GLU.gluLookAt(gl, eyeX, eyeY, eyeZ, centerX, centerY, centerZ, upX, upY, upZ);
        GLU.gluLookAt(gl,0, 0, 0, 0, 0, 0, 0, 0, 0);

        float floatMat[]=phoneOri.getMatrix();

        gl.glMatrixMode(GL10.GL_MODELVIEW);

        gl.glLoadMatrixf(floatMat, 1);
        //ArrayList<Square[]> squares = new ArrayList<Square[]>();

        gl.glPushMatrix();
        gl.glTranslatef(0,0,-10.0f);
        cNeedle.draw(gl);
        gl.glLoadMatrixf(floatMat,0);

        gl.glTranslatef(0,0,10.0f);
        cRing.draw(gl);

        //Draw South
        gl.glTranslatef(0.0f,-150.0f,-10.0f);
        mSouth.draw(gl); 

        //Draw West
        gl.glTranslatef(-150.0f,150.0f,0.0f);
        mWest.draw(gl);

        //DrawNorth
        gl.glTranslatef(150.0f,150.0f,0.0f);
        mNorth.draw(gl); 

        //DrawEast
        gl.glTranslatef(150.0f,-150.0f,0.0f);
        mEast.draw(gl);

        //SW
        gl.glTranslatef(-225.0f, -75.0f, 0.0f);
        mSWest.draw(gl);

        // NW
        gl.glTranslatef(0.0f,150.f,0);
        mNWest.draw(gl);

        gl.glTranslatef(150.0f, 0f, 0f);
        mNEast.draw(gl);

        gl.glTranslatef(0.0f,-150.0f,0.0f);
        mSEast.draw(gl);

         gl.glPushMatrix();

    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
      if(height == 0) {                    //Prevent A Divide By Zero By
        height = 1;                         //Making Height Equal One
        }
        float ratio = (float) width / height;
        gl.glViewport(0, 0, width, height);     //Reset The Current Viewport
        gl.glMatrixMode(GL10.GL_PROJECTION);    //Select The Projection Matrix
        gl.glLoadIdentity();                    //Reset The Projection Matrix
                                                //Calculate The Aspect Ratio Of The Window

        //gl.glFrustumf(-ratio, ratio, -1, 1, 1, 100);
        GLU.gluPerspective(gl, 35.0f, (float)width / (float)height, 5.0f, 200.0f);
        gl.glMatrixMode(GL10.GL_MODELVIEW);     //Select The Modelview Matrix
        gl.glLoadIdentity();                    //Reset The Modelview Matrix

        GLU.gluLookAt(gl, 0, 1.0f, 5.0f, 0, 0, 0, 0, 1.0f, 0);

    }

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig arg1) {
        // Load the texture for the square
        //square.loadGLTexture(gl, this.context);

        for(int i=0;i<locationTags.size();i++){
            userTag=locationTags.get(i);
            userTag.loadGLTexture(gl, this.context);
            //Figure out how to load textures for each
        }
        cRing.loadGLTexture(gl, this.context);
        cNeedle.loadGLTexture(gl, this.context);
        mNorth.loadGLTexture(gl, this.context);
        mEast.loadGLTexture(gl, this.context);
        mSouth.loadGLTexture(gl, this.context);
        mWest.loadGLTexture(gl, this.context);
        mSWest.loadGLTexture(gl, this.context);
        mNWest.loadGLTexture(gl, this.context);
        mSEast.loadGLTexture(gl, this.context);
        mNEast.loadGLTexture(gl, this.context);

        gl.glEnable(GL10.GL_TEXTURE_2D);            //Enable Texture Mapping ( NEW )
        gl.glShadeModel(GL10.GL_SMOOTH);            //Enable Smooth Shading
        gl.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);    //Black Background
        gl.glClearDepthf(1.0f);                     //Depth Buffer Setup
        gl.glEnable(GL10.GL_DEPTH_TEST);            //Enables Depth Testing
        gl.glDepthFunc(GL10.GL_LEQUAL);             //The Type Of Depth Testing To Do

        //Really Nice Perspective Calculations
        //gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_SMOOTH);

    }

    @Override
    public void onPreviewFrame(byte[] data, Camera camera) {
        // TODO Auto-generated method stub

    } 
```

在我的主要活动中，我将它添加到视图中，如下所示：

```
 setContentView(frame);

                frame.addView(camPreview, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
                frame.addView(glView, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
                frame.addView(lin);
                lin.addView(rel);

RelativeLayout.LayoutParams pNav = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);

            pNav.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM,1);
            pNav.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
            pNav.rightMargin = 20;

            rel.addView(imageView,pNav);
            lin.bringToFront();
            ;

            imageView.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODOn Auto-generated method stub
                    glView.newTag();

                }
            }); 
```

问题是`glSurfaceView`出现在最顶层，覆盖了 ，`imageView`但仍然允许用户点击`imageView`. 如何让 ImageView 像 HUD 或 GUI 一样保持在视图的顶部

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-21T14:29:01.230

将近一年后，我回到了这个问题，发现以下解决方案可以像魅力一样工作。我知道很多人都在与同样的问题作斗争，所以我想我会分享以拯救任何人我所忍受的恶化。

简单：在将视图添加到框架布局之前，我将 glView 的 zOrderMediaOverlay 设置为 TRUE，如下所示：

```
glView.setZOrderMediaOverlay(true);
rel.addView(camPreview, camParams);
rel.addView(glView, glParams);
rel.addView(imageView, imageParams); 
```

# php - PHP ini_set php.net 手册 display_errors 示例说明

> ID：11596779
> 
> 赞同：1
> 
> 时间：2012-07-22T00:06:19.467
> 
> 标签：php, error-reporting

阅读[php.net 的](http://php.net/manual/en/function.ini-set.php)`display_errors`设置示例`ini_set`：

```
<?php
echo ini_get('display_errors');

if (!ini_get('display_errors')) {
    ini_set('display_errors', '1');
}

echo ini_get('display_errors');
?> 
```

是否有充分的理由说明为什么我们在`display_errors`将其设置为真之前检查是否为假？如果这是我们的意图，那么不打扰检查并将其设置为 true 肯定会更快吗？

如果有人能就此启发我，我将不胜感激；我也应该做类似的`error_reporting(-1);`事情吗？

谢谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T00:08:38.617

> 是否有充分的理由说明为什么我们在将 display_errors 设置为 true 之前检查它是否为 false？

这是一个例子。不，没有更深层的原因。用“true”覆盖“true”也是有效的。

> 当然，如果这是我们的意图，那么不用检查并将其设置为 true 会更快吗？

我想你很少会感觉到任何不同，不管你先检查还是不检查。

但是：您应该`php.ini`为此使用，更重要的是：*永远不要*`display_errors`在实时系统上启用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T00:22:57.693

好吧，我在我的本地主机上做了一个快速测试，它实际上似乎表明如果`display_errors`已经设置，那么检查它是否已经设置实际上比设置它*要快*。

这是相当微不足道的，因为我必须运行一百万次循环才能真正注意到差异，即使这样也并不多（大约 10%），但它似乎确实存在。我想这表明它`set_ini`比`get_ini`.

也许其他人可以确认？

我想在实践中这没什么用，因为你真的不想`display_errors`在实时站点上设置为 true，所以微性能优化不是那么重要。

除此之外，想不出你为什么要预先检查的原因。

# windows-phone-7 - 平铺计数背景

> ID：11596782
> 
> 赞同：1
> 
> 时间：2012-07-22T00:06:36.843
> 
> 标签：windows-phone-7, notifications

我有 WCF 服务，它向 Windows Phone 模拟器发送带有 Count 的 Tile 通知，但我认为这个 Count 有白色，这个数字的背景在模拟器中也有白色，所以我只看到空白。有没有可能设置数字或背景不同的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:21:57.733

此问题仅出现在没有`DirectX 10`. 在设备`Count`上将可见，没有任何问题

# iphone - UILabel 在 UITextView 中没有正确覆盖

> ID：11596783
> 
> 赞同：0
> 
> 时间：2012-07-22T00:06:56.133
> 
> 标签：iphone, objective-c, uilabel, uitextview

我正在尝试向我的程序添加语法高亮。
我正在使用此代码添加亮点：

```
-(void)highlightWord:(NSString *)word: (UIColor *)color {
    int amount = textDisplay.text.length;
    NSString *newString = textDisplay.text;
    NSUInteger count = 0, length = amount;
    NSRange range = NSMakeRange(0, length); 
    while(range.location != NSNotFound)
    {
        range = [textDisplay.text rangeOfString: word options:NSLiteralSearch range:range];
        if(range.location != NSNotFound)
        {
            range = NSMakeRange(range.location + range.length, length - (range.location + range.length));
            count++; 
        }
    }
    while (count != 0) {
        count--;
        NSRange highlight = [newString rangeOfString:word];
        newString = [textDisplay.text stringByReplacingCharactersInRange:highlight withString:@" "];
        UILabel *view1 = [[UILabel alloc] initWithFrame:[self frameOfTextRange:highlight inTextView:textDisplay]];
        view1.text = word;
        view1.textColor = color;
        view1.font = [UIFont fontWithName:@"System" size: 14.0];
        view1.backgroundColor = [UIColor clearColor];
        view1.textAlignment = UITextAlignmentLeft;
        [textDisplay addSubview:view1];
    }

}

- (IBAction)highlighString:(id)sender {

    for (UIView *subview in [textDisplay subviews]){
        if ([subview isKindOfClass:[UILabel class]]){
            [subview removeFromSuperview];
        }
    }

    [self highlightWord:@"test" :[UIColor blueColor]];
    [self highlightWord:@"this" :[UIColor redColor]];
    [self highlightWord:@"is" :[UIColor grayColor]];
    [self highlightWord:@"a" :[UIColor greenColor]];
}
@end 
```

但这似乎会导致奇怪的结果：
![...](../Images/4148dabbdb3ea393fd9d930c7b369708.png)

期望的结果是它无缝地覆盖到彩色标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:13:10.440

混合`UILabel`并且`UITextView`不太可能让您轻松复制和粘贴。这是一个有趣的想法，但如果它无缝运行，我会感到惊讶。在所有非 beta 版本的 iOS 中，Apple 对这个问题的通常解决方案是使用`UIWebView`, 可怕的是。Cocoanetics 有一个名为[DTRichTextEditor](http://www.cocoanetics.com/parts/dtrichtexteditor/)的工具，我没有评论过，但基于他们在 DTCoreText 上的工作质量（我对此印象非常深刻），我对 iOS 5 寄予厚望。测试版在 NDA 下，但你可以有兴趣观看 WWDC 2012 的第 220 场会议，以获取更多前瞻性信息。

您的特定错误是您将标签作为子视图添加到文本视图中。您应该将它们作为对等点放在文本视图的顶部。将它们放在 textview 中会使您受制于 text view 的绘图系统，这会咬您一口。当然，当您将它们放在文本视图的顶部时，将难以处理复制和粘贴。您需要以某种方式通过触摸，然后正确绘制选择。见上一段。

如果一个完全可编辑的富文本视图很容易用一些标签来破解，那么你会在 GitHub 上找到几个实现。不幸的是，实际上很难做好。我向 Cocoanetics 低头接受它；我很快就放弃了。如果您可以将问题简化为非一般文本视图，那么这种方式可能是可行的，但我建议您进行调查`DTRichTextEditor`或使用`UIWebView`. 请参阅 WWDC 2011 的第 511 节“iOS 上 Safari 中的富文本编辑”。

# r - R - read.table 和 write.table 中的列名以数字开头并包含空格

> ID：11596785
> 
> 赞同：7
> 
> 时间：2012-07-22T00:07:10.657
> 
> 标签：r

我将股票数据的 csv 导入 R，股票代码的列名以数字开头并包含空格，例如“5560 JP”。读入 R 后，列名添加“X”，空格替换为“.”，例如“X5560.JP”。在 R 中完成所有工作后，我想将处理后的数据写回新的 csv，但是使用原始列名，例如“5560 JP”而不是“X5560.JP”，我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-22T02:31:26.710

当您使用 write.csv 或 write.table 将数据保存到 CSV 文件时，您可以通过设置`col.names`参数将列名设置为您喜欢的任何名称。

但这假设您有可用的列名。一旦你读入数据并且 R 已经转换了名称，你就丢失了这些信息。为了解决这个问题，您可以禁止转换以获取列名：

```
df <- read.csv("mydata.csv", check.names=FALSE)
orig.cols <- colnames(df)
colnames(df) <- make.names(colnames(df))

[your original code]

write.csv(df, col.names=orig.cols) 
```

# django - Django：信号接收器可以返回数据吗？

> ID：11596799
> 
> 赞同：7
> 
> 时间：2012-07-22T00:08:50.973
> 
> 标签：django

在Django中，信号可以用作回调函数吗？换句话说，信号的“发送者”是否可以通过 ? 的返回值使用它从另一个应用程序收集数据`send()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T00:14:40.580

[是的。](https://docs.djangoproject.com/en/dev/topics/signals/#sending-signals)

> 两者都`send()`返回`send_robust()`一个元组对`[(receiver, response), ... ]`列表，表示调用的接收函数列表及其响应值。

请注意，这是一个相当非正统的机制；如果需要函数的返回值，直接调用即可。

# hadoop - MapReduce：标准输出和标准错误的日志文件位置

> ID：11596801
> 
> 赞同：1
> 
> 时间：2012-07-22T00:09:14.343
> 
> 标签：hadoop, mapreduce

如果我在 Mapper 和 Reducer 中通过 stdout（Java 中的 System.out）和 stderr（Java 中的 System.err）输出一些消息，我在哪里可以在任务跟踪器节点中看到它们？我猜目录位置也可以通过一些参数进行配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:11:15.103

这可能取决于您使用的发行版，但使用我们的 cdh3 设置，我们可以在任务运行的节点上的 /usr/lib/hadoop-0.20/logs/userlogs// 下找到它们。例如，stderr 将位于：

```
/usr/lib/hadoop-0.20/logs/userlogs/job_201207010432_5284/attempt_201207010432_5284_m_000214_0/stderr 
```

如果您可以访问集群的作业跟踪器 UI，您也可以通过那里访问它们（这是我通常做的）。

# c# - 如何启动 WCF 语音聊天应用程序？

> ID：11596804
> 
> 赞同：4
> 
> 时间：2012-07-22T00:10:18.507
> 
> 标签：c#, wcf

我正在寻找开发 WCF 语音聊天应用程序。

我想使用 WCF 服务来构建应用程序

```
|             Invite                | 

| --------------------------------> |

|               OK                  |

| <-------------------------------- |

|                                   |

| --------------------------------> |

|            Audio flow             |

| <-------------------------------- |

|               Bye                 | 

| --------------------------------> |

A                                   B 
```

换句话说，同一个应用程序应该有监听服务，所以它接收调用并将调用发送到另一台机器上的另一个相同应用程序。（无需额外的服务主机应用程序来接收呼叫）。

我知道也许我应该使用特定的协议（如套接字或其他协议）来传输语音，但我稍后会检查。

那么我应该使用哪种 WCF 服务，以及哪种类型的绑定最适合此目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T06:39:14.827

正如对您问题的评论所说，通常首选 UDP 或其他流协议。但是随着 WCF 提供更多的抽象，做这样的事情会更容易。话虽如此，我已经使用 WCF 在我们以前的一个软件（该软件被 LAN 中的多个客户端使用）实现了语音聊天功能`netTcpBinding`，并且运行良好（我在 LAN 中使用 5 个客户端对其进行了测试），你可以并不是真的觉得 WCF 阻碍了架构。随着支持 UDP 传输的 WCF 4.5 的发布，这将变得有趣。

对于这样的事情，您应该真正了解 WCF 中双工通信的要点。我这样做的方式是，我的服务上有一个`SendVoice()`操作合同，每次客户端将他们的音频流发送到服务时，该`SendVoice()`方法将遍历订阅者列表（连接的客户端）并`SendVoiceCallback()`在每个客户端上调用。你可以从这样的事情开始：

```
public void SendVoice(byte[] audio)
{
    //Keep a list of connected clients in a dictionary called subscribers
    //lock your subscribers list so that it's not modified when you're in the middle of sending the stream              
        lock (subscribers)
        {
        //send the received voice stream to each client
            foreach (var _subscriber in subscribers)
            {
                if (OperationContext.Current.GetCallbackChannel<IVoiceChatCallback>() == subscriber.Key)
                {
            //if the person who sent the video is the current subscriber then don't send the video to THAT subscriber
                            continue;
                }
                try
                {
                 //Send the received stream to the client asynchronously
                            _subscriber.Key.BeginOnVoiceSendCallback(audio, onNotifyCompletedVoiceSend, _subscriber.Key);
                 }
                 catch (Exception)
                 {
                            //fault handling
                 }
            }
        }
} 
```

然后，您的客户会定期调用上述方法，在我的实现中，我将其设置为每 250 毫秒，它运行得非常好（显然有一个小的延迟）。

在上面的代码`IVoiceChatCallback`中是回调合约。回调使服务能够在客户端上调用某些操作，因此例如客户端的行为就像服务器一样。异步服务调用意味着您`SendVoice()`将异步发布音频到每个客户端，而不是在发送新流之前等待前一个流到达客户端。

上面的代码只是您入门的一个想法。您应该向服务中添加一些故障处理代码，以检查客户端何时断开连接并将它们从您的订阅者字典中删除。同样，您应该熟悉 WCF 中的异步操作调用以及回调。此外，如果您希望在 LAN 中使用它，那么`netTcpBinding`就是要走的路，您应该配置您的服务以优化其吞吐量和并发性。在 Internet 上，您需要使用支持双工的 Http 绑定。

# c# - 隐式转换为 Func 或 Action 代表？

> ID：11596808
> 
> 赞同：4
> 
> 时间：2012-07-22T00:11:17.857
> 
> 标签：c#, casting, delegates, implicit, func

C# 允许您将隐式强制转换定义为委托类型：

```
class myclass
{
    public static implicit operator Func<String, int>(myclass x)
    {
        return s => 5;
    }
    public static implicit operator myclass(Func<String, int> f)
    {
        return new myclass();
    }
} 
```

但不幸的是，我们不能使用它来使对象看起来像一个函数：

```
var xx = new myclass();
int j = xx("foo");    // error
Action<Func<String, int>> foo = arg => { };
foo(xx);              // ok 
```

有没有一种很好的方法可以让自己的类的对象直接在其基实例上接受函数式参数（参数）？有点像索引器，但用括号而不是方括号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T00:29:00.840

不，C# 不允许将其作为语言的一部分。在幕后，CLI 使用`call`and`callvirt`指令调用方法或间接调用委托。

因此，与可以`callable`通过声明`def __call__`方法来创建类实例的 Python 不同，C# 没有类似的特性。

# html - 如何配置我的网站，以便 URL 中不需要尾随的“.html”？

> ID：11596809
> 
> 赞同：1
> 
> 时间：2012-07-22T00:11:48.620
> 
> 标签：html

> **可能重复：**
> [如何从 URL 中删除 .html](https://stackoverflow.com/questions/5730092/how-to-remove-html-from-url)

我在我拥有的软件中创建了一个网站。该软件通过 FTP 服务器上传站点。出于某种原因，所有页面都`.html`在末尾。我的问题是，如果用户说`www.mydomain.com/live`而不是`www.mydomain.com/live.html`，他们会收到 404 错误。我该如何解决这个问题，他们不必`.html`在页面末尾添加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:13:56.133

你可以用一个简单的`.htaccess`文件来做到这一点：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T00:16:44.140

另一种可能性是：将内容放入`live/index.html`. 然后，请求`/live`通常被重定向到`/live/`，然后从`live/index.html`.

# java - D2L Valance：使用 Java 对成绩进行 PUT

> ID：11596816
> 
> 赞同：0
> 
> 时间：2012-07-22T00:12:54.043
> 
> 标签：java, desire2learn

我很好奇是否有人在 Java 中使用 Valance 成功实现了 D2L 中的路由，如下所示：

PUT /d2l/api/le/(D2LVERSION: 版本)/(D2LID: orgUnitId)/grades/(D2LID:gradeObjectId)/values/(D2LID: userId)

当我彻底检查所需的 ID 是否与我在 D2L 中的记录相匹配时，我一直在努力从这个电话中收到 404。当我使用我在 Java 中使用的讲师级别帐户登录 D2L 时，我看到课程、测试和参与者都在那里。这些 ID 在 Java 代码中用于调用上述路由，但我收到 404 并且成绩未更新。

这是代码的片段：

```
HttpURLConnection  connection = null ;

    try {
        uri = userContext.createAuthenticatedUri ("/d2l/api/le/1.0/"+courseId+"/grades/"+gradeId+"/values/"+ userId, "PUT");

        connection= (HttpURLConnection)uri.toURL().openConnection();
        connection.setDoOutput(true);
        connection.setRequestMethod("PUT");
        connection.setRequestProperty("Content-Type", "application/json");

        OutputStream os = connection.getOutputStream();
        String updatedScore = "{\"GradeObjectType\":1,\"PointsNumerator\":\"5\"}";
        os.write(updatedScore.getBytes());
        os.flush();

    }catch(Exception e){
        e.printStackTrace();
    } 
```

courseID、gradeID 和 userID 正在传入并已在 D2L Web UI 中进行验证。如您所见，我为 GradeObjectType 为 1 和 PointsNumerator 为 5 创建了一个 JSON 字符串。除了默认的 Instructor 帐户权限之外，是否还有特殊权限才能允许此类调用？

任何想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:57:03.867

1.  （如果您还没有）您可以尝试调用 get 来检索这些值，以确保它们存在并且您的基本逻辑正常工作。
2.  如果您有权访问一个非常特权的帐户，您可以使用该帐户来尝试排除权限问题。可以在 UI 中设置成绩的教师*应该*能够通过 API 设置成绩。

*更新：*

下面是一个成功请求和响应的示例，也许您可​​以找出差异：

```
REQUEST:

PUT https://valence.desire2learn.com/d2l/api/le/1.0/7574/grades/4852/values/3902?x_b=xDaPHeptaw9syoI1EGdeJ1&x_a=L2Hd9WvDTcyiyu5n2AEgpg&x_d=6U5NTYnTswz4gnu-vZHT3bajswsp3jvxYtwzoeOWKUs&x_c=a6f5hEMrvAxC6PS5UlSUOusVpj-XKnOBwxqhYg5pNtg&x_t=1343070852 HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: application/json

{
                "GradeObjectType": 1,
                "PointsNumerator": 9
}

RESPONSE:

HTTP/1.1 200 OK
Cache-Control: private
Content-Length: 0
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 2.0.50727
Date: Mon, 23 Jul 2012 19:14:48 GMT 
```

# objective-c - b2PolygonShape::TestPoint(p1, p2) 中的变换参数是什么？

> ID：11596817
> 
> 赞同：0
> 
> 时间：2012-07-22T00:13:11.570
> 
> 标签：objective-c, c, cocos2d-iphone, box2d

我对 box2d 很陌生，我只想做一个简单的检查，看看一个点是否在 cocos2d 的多边形内。

```
b2PolygonShape polygon;
b2Vec2 vertices[] =
{ 
    b2Vec2(300, 400),
    b2Vec2(350, 400),
    b2Vec2(300, 500),
    b2Vec2(350, 500)
};

polygon.Set(vertices, 4);
if(polygon.TestPoint(b2Transform(), b2Vec2(301, 405)))
{
    CCLOG(@"Point is inside");
} 
```

我不明白期望 b2transform 的第一个参数是什么。为什么需要这个，我应该把它设置成什么？有什么我忘记了吗？我试图做到这一点而不做任何复杂的事情，比如拥有一个世界对象等等。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:39:19.797

```
bool TestPoint(const b2Transform& transform, const b2Vec2& p) const; 
```

变换允许您在局部坐标中指定多边形，然后将其变换（平移和旋转）到所需的位置/方向。如果您希望多边形顶点成为世界空间坐标，请使用恒等式（如乘以 1）变换：

```
btTransform identity; identity.SetIdentity();
polygon.TestPoint(identity, ... 
```

您需要将其显式设置为标识，因为 b2Transform 及其两个成员 b2Vec 和 b2Rot 中的默认构造函数不执行任何操作，因此将在发布版本中包含随机垃圾（调试通常将所有非整数值设置为 0 ）。

有关详细信息，请参见 b2Math.h 和 b2PolygonShape.cpp。

# c - 解析 const char * 返回一个向上的三角形。是哪个角色？

> ID：11596821
> 
> 赞同：1
> 
> 时间：2012-07-22T00:13:48.090
> 
> 标签：c, parsing, utf-8, character-encoding

嗨，我正在编写一个函数，该函数将 const char * 变量的元素和

然后我将每个字符都写在一个txt文件中。它识别所有这些

但我有一些问题。当它换行并且不显示识别的字符时，这意味着该字符是'\n'？？？

cons char * 变量中的最后一个字符向我显示了一个小三角形，向上看。它没有颜色，只有 3 条线形成一个小三角形。我正在使用 UTF-8 编码。

三角形代表哪个字符？？欢迎任何建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T00:50:09.043

（我不确定我是否理解小三角形的来源。但这似乎无关紧要。）这个链接**会让你高兴**：要按形状查找未知的 Unicode 字形，请参阅[shapecatcher.com](http://shapecatcher.com/)。只需绘制角色，shapecatcher 就会查找看起来相似的字形。

内部使用被奴役的猿类大脑。

* * *

**编辑：根据您的评论，**您实际上是在向文件输出一个 '\0' 字符。这如何显示为小三角形尚不清楚 - 也许您正在通过以这种方式显示 '\0' 的编辑器查看文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T01:03:06.900

您可以“od -x”生成文件以查看字符的十六进制表示。

# c# - Silverlight 应用程序 UI 更新

> ID：11596829
> 
> 赞同：0
> 
> 时间：2012-07-22T00:15:15.130
> 
> 标签：c#, wpf, silverlight, oop, asynchronous

您好，我在使用 Windows Phone silverlight C# 应用程序时遇到问题。

所以我想做这样的事情

1.  按第一页上的一个按钮。按钮单击处理程序调用`MakeRequest`其他类中的异步方法来检索数据。async 方法将触发一个事件`DataReadyEvent`并将结果包装为`DataEventArgs`. 该事件的处理程序将在 Page2 中。因此，在向此事件添加处理程序后，我从当前页面导航到 Page2。
2.  我想通过页面 2 代码后面的事件处理程序检索数据并在 UI 上更新它。但是事件处理程序是静态的（因此我可以通过`Page2.handler_method_name`在 page1 代码中使用来添加它，而无需创建页面的新实例。）。由于处理程序方法是静态的，因此我无法使用 Dispatcher.Invoke 并返回 UI 线程并更新 UI。

所以在这种情况下，有人知道吗？我只想在 page1 中调用一个异步方法，并将结果更新到 page2 中的 UI。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T01:52:11.443

这是一个想法：不要让它成为静态的。不要试图通过破坏简单的 OOP 规则（如封装等）以及围绕您使用的框架寻找一些疯狂的解决方法来为自己制造问题。

当你处于这种情况时，你应该停下来，回头想想，因为这表明你做错了事。不要试图通过寻找黑客和解决方法来进一步推动它。相反，您应该重构和重用正确的范例。

例如，如果您想在 Page2 上显示结果，则有一个 Page2 ALREADY。所以有一个例子。那你为什么要使用静态处理程序呢？可能是因为您没有对此页面的引用。没关系，通常你不应该。

但是当你完成你的计算时，你可以发布一个事件说“嘿，任务完成了”。那时你不应该关心谁对这个结果感兴趣，那不是工人关心的问题。这意味着计算本身的逻辑可能应该从 Page1 中移出。实际上，页面关注的是圆顶表示逻辑，仅此而已。Page1 应该提出需要进行一些计算的请求。这里将有一个外部组件（可能是您的 ViewModel 中的某些东西）来实际实现它。

因此，当结果准备好被使用时，您可以简单地将其推送到 ViewModel 中（更新一些可观察的属性或集合等），因此如果有任何 UI（或其中许多，或其他组件）对此数据感兴趣，它会自动通知并显示数据。

但请不要乱来，以后会招来更大的痛苦。

# ubuntu - Capistrano 在从本地机器部署到服务器时要求输入 SSH 密码

> ID：11596830
> 
> 赞同：5
> 
> 时间：2012-06-23T07:49:29.517
> 
> 标签：ubuntu, ssh, ruby-on-rails, deployment

当我尝试 ssh 到服务器时，我可以这样做，因为我的`id_rsa.pub`密钥已添加到服务器中的授权密钥中。

现在，当我尝试通过 Capistrano 将代码从本地项目文件夹部署到服务器时，服务器会要求输入密码。

如果我能够 ssh 并且无法部署到同一台服务器，我无法理解可能是什么问题。

$上限部署：设置

```
"no seed data"
triggering start callbacks for `deploy:setup'
* 13:42:18 == Currently executing `multistage:ensure'
*** Defaulting to `development'
* 13:42:18 == Currently executing `development'
* 13:42:18 == Currently executing `deploy:setup'
triggering before callbacks for `deploy:setup'
* 13:42:18 == Currently executing `db:configure_mongoid'
* executing "mkdir -p /home/deploy/apps/development/flyingbird/shared/config"
 servers: ["dev1.noob.com", "176.9.24.217"]
 Password: 
```

帽脚本：

```
# gem install capistrano capistrano-ext capistrano_colors
 begin; require 'capistrano_colors'; rescue LoadError; end
 require "bundler/capistrano"

 # RVM bootstrap
 # $:.unshift(File.expand_path('./lib', ENV['rvm_path']))
 require 'rvm/capistrano'
 set :rvm_ruby_string, 'ruby-1.9.2-p290'
 set :rvm_type, :user # or :user

 # Application setup
default_run_options[:pty] = true # allow pseudo-terminals
ssh_options[:forward_agent] = true # forward SSH keys (this will use your SSH key to get the code from git repository)
ssh_options[:port] = 22
 set :ip, "dev1.noob.com" 
set :application, "flyingbird"

 set :repository, "repo-path"
 set :scm, :git
 set :branch, fetch(:branch, "master")

 set :deploy_via, :remote_cache
 set :rails_env, "production"
 set :use_sudo, false
 set :scm_username, "user"
 set :user, "user1"

 set(:database_username) { application }
 set(:production_database) { application + "_production" }
 set(:staging_database) { application + "_staging" }
 set(:development_database) { application + "_development" }

 role :web, ip                        # Your HTTP server, Apache/etc
 role :app, ip                          # This may be the same as your `Web` server
 role :db,  ip, :primary => true # This is where Rails migrations will run

 # Use multi-staging
 require "capistrano/ext/multistage"
 set :stages, ["development", "staging", "production"]
 set :default_stage, rails_env

 before "deploy:setup", "db:configure_mongoid"

 # Uncomment if you use any of these databases
 after "deploy:update_code", "db:symlink_mongoid"
 after "deploy:update_code", "uploads:configure_shared"
 after "uploads:configure_shared", "uploads:symlink"

 after 'deploy:update_code', 'bundler:symlink_bundled_gems'
 after 'deploy:update_code', 'bundler:install'
 after "deploy:update_code", "rvm:trust_rvmrc" 

 # Use this to update crontab if you use 'whenever' gem
 # after "deploy:symlink", "deploy:update_crontab"

 if ARGV.include?("seed_data")
    after "deploy", "db:seed"
 else
     p "no seed data"
 end

   #Custom tasks to handle resque and redis restart
   before "deploy", "deploy:stop_workers"
   after "deploy", "deploy:restart_redis"
   after "deploy", "deploy:start_workers"
   after "deploy", "deploy:cleanup"

   'Create symlink for public uploads'
    namespace :uploads do 
      task :symlink do
        run <<-CMD
          rm -rf #{release_path}/public/uploads &&
          mkdir -p #{release_path}/public &&
          ln -nfs #{shared_path}/public/uploads #{release_path}/public/uploads
         CMD
      end
    task :configure_shared do 
    run "mkdir -p #{shared_path}/public"
    run "mkdir -p #{shared_path}/public/uploads"
  end
 end

     namespace :rvm do
       desc 'Trust rvmrc file'
        task :trust_rvmrc do
        run "rvm rvmrc trust #{current_release}"
       end
     end

        namespace :db do

         desc "Create mongoid.yml in shared path"
          task :configure_mongoid do
            db_config = <<-EOF
             defaults: &defaults
            host: localhost

         production:
           <<: *defaults
            database: #{production_database}
         staging:
            <<: *defaults
            database: #{staging_database}
          EOF

          run "mkdir -p #{shared_path}/config"
          put db_config, "#{shared_path}/config/mongoid.yml"
         end

          desc "Make symlink for mongoid.yml"
            task :symlink_mongoid do
            run "ln -nfs #{shared_path}/config/mongoid.yml #{release_path}/config/mongoid.yml"
           end

            desc "Fill the database with seed data"
             task :seed do
               run "cd #{current_path}; RAILS_ENV=#{default_stage}  bundle exec rake                   db:seed"
              end

            end

            namespace :bundler do
             desc "Symlink bundled gems on each release"
             task :symlink_bundled_gems, :roles => :app do
             run "mkdir -p #{shared_path}/bundled_gems"
             run "ln -nfs #{shared_path}/bundled_gems #{release_path}/vendor/bundle"
           end

            desc "Install bundled gems "
              task :install, :roles => :app do
                run "cd #{release_path} && bundle install --deployment"
              end
            end

             namespace :deploy do
               task :start, :roles => :app do
               run "touch #{current_path}/tmp/restart.txt"
             end

             desc "Restart the app"
               task :restart, :roles => :app do
                 run "touch #{current_path}/tmp/restart.txt"
             end

             desc "Start the workers"
              task :stop_workers do
                run "cd #{current_path}; RAILS_ENV=#{default_stage}  bundle exec rake                                   resque:stop_workers"
             end

             desc "Restart Redis server"
               task :restart_redis do
                 "/etc/init.d/redis-server restart" 
             end

             desc "Start the workers"
               task :start_workers do
                  run "cd #{current_path}; RAILS_ENV=#{default_stage}  bundle exec rake  resque:start_workers"
             end

         end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:01:06.150

您需要同时指定 SSH 用户和私钥进行身份验证：

IE：

```
 set :user,    "deploy"
 set :ssh_key, "deploy.pem" 
```

如果您正在使用 capistrano 多级（看起来就是这样），请在该环境的 stages.yml 文件中添加键：

```
 user:     "deploy"
 ssh_key:  "deploy.pem" 
```

# c# - c# - 使用来自另一个字符串数组的字符串搜索一个字符串数组

> ID：11596835
> 
> 赞同：2
> 
> 时间：2012-07-22T00:16:45.577
> 
> 标签：c#, arrays, string, search

就像在标题中一样。我得到了一个字符串数组和第二个字符串数组。我想以这种模式显示结果：第一个数组的第一个元素 - 然后是第二个数组中出现在第一个数组的第一个元素中的所有元素。在第一个数组的第二个元素和第二个数组中出现在第一个数组的第二个元素中的所有元素之后。等等。例如：

```
string[] arrayA = {"Lorem ipsum dolor sit amet, justo", "notgin like good cold beer"};
string[] arrayB = {"justo","beer","lorem"}
for (int i = 0; i < arrayA.Length; i++)
   {
      Console.WriteLine(arrayA[i]);

       for (int j = 0; j < arrayB.Length; j++)
       {
          int controlIndex = arrayA[i].IndexOf(arrayB[j]);
          if (controlIndex != -1)
          {
               Console.Write(" :--contains-->" + arrayB[j]);
          }

    } 
```

}

所以结果应该是这样的：

*   Lorem ipsum dolor sit amet, justo :--包含--> **justo,lorem**
*   notgin 喜欢好的冰镇啤酒：--包含-->**啤酒**。

但我的结果是： - Lorem ipsum dolor sit amet, justo :--contains--> ***justo*** - notgin like good cold beer :--contains--> **beer**。

所以你可以看到没有**列出lorem**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T00:36:14.010

如果您将问题分解一些，这一点也不难。首先，远离处理数组和索引。只需使用`IEnumerable<T>`，它会让您的生活更轻松。

这是我的看法：

首先，您想从数组中查找所有字符串`needles`，它们是字符串的一部分`haystack`。

```
public static IEnumerable<string> MatchingStrings(string haystack, IEnumerable<string> needles)
{
    return needles.Where(needle => haystack.Contains(needle));
} 
```

这将返回一个 IEnumerable，`needles`其中包含`haystack`.

然后，您想简单地遍历所有搜索字符串，我将其称为`haystacks`.

```
 static void Main(string[] args)
    {
        var haystacks = new[] {
            "Lorem ipsum dolor sit amet, justo",
            "notgin like good cold beer"
        };

        var needles = new[] {"justo", "beer", "lorem"};

        foreach (var haystack in haystacks) {
            Console.Write(haystack + "  contains --> ");
            var matches = MatchingStrings(haystack, needles);

            Console.WriteLine(String.Join(",", matches));
        }

        Console.ReadLine();
    } 
```

注意`String.Contains()`区分**大小写**。所以“Lorem”不会匹配“lorem”。如果您想要这种行为，您必须先将它们转换为小写。

```
public static IEnumerable<string> MatchingStringsCaseInsensitive(string haystack, IEnumerable<string> needles)
{
    var h = haystack.ToLower();
    return needles.Where(needle => h.Contains(needle.ToLower()));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T00:30:20.417

```
string[] arrayA = {"Lorem ipsum dolor sit amet, justo", "notgin like good cold beer"};
string[] arrayB = {"justo","beer","lorem"};

foreach (var s in arrayA)
{
    Console.Write(s + " contains: " +
                  string.Join(",", arrayB.Where(s.Contains)));
} 
```

如果你想忽略大小写：

```
foreach (var s in arrayA)
{
    Console.Write(s + " contains: " +
                  string.Join(",", arrayB.Where(x =>
                      s.IndexOf(x, StringComparison.OrdinalIgnoreCase) != -1)));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T00:33:11.320

```
foreach(var a in arrayA)
{
    Console.WriteLine("a: " + a);
    Console.WriteLine("bs: " + 
        String.Join(", ", arrayB.Where(b => a.IndexOf(b) > -1)));
} 
```

另外，如果您的意思是不关心大小写，那`a.IndexOf(b)`就是`a.IndexOf(b, StringComparison.OrdinalIgnoreCase)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T00:37:40.477

这是 Linq 解决方案：

```
var result = arrayA.Select(a => new{
    A = a,
    bContains = arrayB.Where(b => a.IndexOf(b, 0, StringComparison.CurrentCultureIgnoreCase) > -1)            
});

foreach(var x in result)
{
    Console.WriteLine("{0}:--contains-->{1}", x.A, string.Join(",", x.bContains));
} 
```

这是一个演示：http: [//ideone.com/wxl6I](http://ideone.com/wxl6I)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-22T00:38:46.277

这是我的尝试

```
string[] arrayA = {"lorem ipsum dolor sit amet, justo", "notgin like good cold beer"};
string[] arrayB = {"justo", "beer", "lorem"};

foreach (var item in from a in arrayA from b in arrayB where a.Contains(b) select new {a, b})
{
    Console.WriteLine(item.a);
    Console.WriteLine(item.b);
} 
```

注意：`Contains`是区分大小写的比较，您需要编写自定义比较器（正如其他答案已经完成的那样）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-22T00:39:29.210

Lorem 大写。尝试使用不区分大小写的搜索： `.indexOf(string, StringComparison.CurrentCultureIgnoreCase)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-12T14:12:22.413

我已经给了你所有可能的答案，但是 contains 方法会产生一个问题，在下面提到的情况下它也会返回 true。

```
reference_string = "Hello Stack Overflow"
test_string = "Over" 
```

所以尽量避免包含，因为包含方法会

**“返回一个值，指示指定的 System.String 对象是否出现在此字符串中”**

注意：添加 StringComparer.OrdinalIgnoreCase 是为了不区分大小写。

```
/// <summary>
        /// Compares using binary search
        /// </summary>
        /// <param name="input"> search input</param>
        /// <param name="reference"> reference string</param>
        /// <returns> returns true or false</returns>
        public bool FatMan(string input, string reference)
        {
            string[] temp = reference.Split();
            Array.Sort(temp);
            List<string> refe = new List<string> { };
            refe.AddRange(temp);

            string[] subip = input.Split();
            foreach (string str in subip)
            {
                if (refe.BinarySearch(str, StringComparer.OrdinalIgnoreCase) < 0)
                {
                    return false;
                }
            }

            return true;
        }

        /// <summary>
        /// compares using contains method
        /// </summary>
        /// <param name="input"> search input</param>
        /// <param name="reference"> reference string</param>
        /// <returns> returns true or false</returns>
        public bool Hiroshima(string input, string reference)
        {
            string[] temp = reference.Split();
            Array.Sort(temp);
            List<string> refe = new List<string> { };
            refe.AddRange(temp);
            string[] subip = input.Split();

            foreach (string str in subip)
            {
                if (!refe.Contains(str, StringComparer.OrdinalIgnoreCase))
                {
                    return false;
                }
            }

            return true;
        }

        public bool Nakashaki(string input, string reference)
        {
            string[] temp = reference.Split();
            Array.Sort(temp);
            List<string> refe = new List<string> { };
            refe.AddRange(temp);
            string[] subip = input.Split();

            int result = (from st in subip where temp.Contains(st, StringComparer.OrdinalIgnoreCase) select st).Count();

            if (result <= 0)
            {
                return false;
            }

            return true;
        }

        /// <summary>
        /// compares using contains method
        /// </summary>
        /// <param name="input"> search input</param>
        /// <param name="reference"> reference string</param>
        /// <returns> returns true or false</returns>
        public bool LittleBoy(string input, string reference)
        {
            string[] subip = input.Split();
            foreach (string str in subip)
            {
                if (!reference.Contains(str))
                {
                    return false;
                }
            }

            return true;
        } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-09-06T23:02:18.077

```
 bool oupt ;
 string[] strarray1 = new string[3]{"abc","def","ghi" };
 string[] strarray2 = new string[4] { "648", "888", "999", "654" };
 if (strarray1.All(strarray.Contains))
    oupt = true;
 else
    oupt = false; 
```

# jquery - 如何在单击切换选中/未选中状态时更改复选框标签的颜色

> ID：11596837
> 
> 赞同：4
> 
> 时间：2012-07-22T00:17:02.160
> 
> 标签：jquery, css, checkbox

当我选中或取消选中时，我正在尝试更改复选框标签的字体颜色和背景颜色。我在此站点上找到了一个 javascript 解决方案，但无法使代码正常工作。这是我到目前为止所尝试的。现在它正在将“突出显示”类附加到父 div，我只想改变标签。谢谢你的时间。

**HTML**：

```
<div class="checkboxes">
    <input type="checkbox" name="1" id="option one" value="orange"><label for="1" class="highlight">Orange</label>
    <input type="checkbox" name="2" id="option two" value="apple"><label for="1" class="highlight">Apple</label>
</div> 
```

**JavaScript**：

```
$( '.checkboxes' ).on( 'click', 'input:checkbox', function () {
    $( this ).parent().toggleClass( 'highlight', this.checked );
}); // end checkbox style​ 
```

**CSS**：

```
.checkboxes label {
    font-family:Open Sans Italic;
    font-size: 12px;
    color: #666;
    border-radius: 20px 20px 20px 20px;
    background: #f0f0f0;
    padding: 3px 10px;
    text-align: left;
}
.highlight {
    font-family:Open Sans Italic;
    font-size: 12px;
    color: white;
    border-radius: 20px 20px 20px 20px;
    background: #86b3c1;
    padding: 3px 10px;
    text-align: left;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T00:33:25.587

你可以只使用 CSS 来做到这一点：

```
input[type=checkbox]:checked + label { /* styles that get changed */ } 
```

演示[http://dabblet.com/gist/3157721](http://dabblet.com/gist/3157721)

此外，在制作演示时，我注意到了几个问题：

*   `id="option one"`- id 必须只有一个并且不能有空格
*   的`for`属性值`label`应该是对应的`id`（不是`name`）`input`；这还允许您通过单击标签而不是复选框本身来选中/取消选中复选框

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T00:19:54.760

标签出现在复选框之后，您的代码似乎适用于包装复选框的标签，如下所示：

```
<label for="1" class="highlight">Orange
    <input type="checkbox" name="1" id="option one" value="orange">
</label> 
```

更改 html 或更改 JS 以定位下一个元素而不是最近的父元素：

```
$( '.checkboxes' ).on( 'click', 'input[type="checkbox"]', function () {
    $( this ).next('label').toggleClass( 'highlight', this.checked );
}); 
```

此外，您的 CSS 有问题，直接定位标签将优先于高亮类，因此即使应用了该类，它也永远不会改变颜色。

这是一个小提琴，我在针对 highligth 类时更具体地修复了它：

[小提琴](http://jsfiddle.net/UdN7D/2/)

Raminson 是正确的，您应该使用括号和 type="" 来定位复选框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T00:21:55.920

`closest()`找不到最接近所选元素的元素。它找到最近的父母，您可以使用`next()`方法，尝试以下操作：

> 获取与选择器匹配的第一个元素，从当前元素开始，向上遍历 DOM 树。

```
$('.checkboxes').on('click', 'input[type="checkbox"]', function () {
     $(this).next('label').toggleClass('highlight', this.checked);
}); 
```

*请注意`:checkbox`选择器是[`deprecated`](http://api.jquery.com/category/deprecated/).*

# python - 在 Ubuntu 上安装 PyCrypto - 构建时出现致命错误

> ID：11596839
> 
> 赞同：66
> 
> 时间：2012-07-22T00:17:37.873
> 
> 标签：python, pycrypto

查看了其他类似的线程后，我仍然无法运行 pycrypto。

我正试图让它在我的 Ubuntu 笔记本电脑上运行——但我也无法在我的 Windows PC 上管理它。

我下载了 pycrypto-2.6，解压，然后运行

```
 python setup.py build 
```

但后来发生了

```
warning: GMP or MPIR library not found; Not building Crypto.PublicKey._fastmath.
building 'Crypto.Hash._MD2' extension
gcc -pthread -fno-strict-aliasing -fwrapv -Wall -Wstrict-prototypes -fPIC -std=c99 -O3 - fomit-frame-pointer -Isrc/ -I/usr/include/python2.7 -c src/MD2.c -o build/temp.linux-i686-?2.7/src/MD2.o
src/MD2.c:31:20: fatal error: Python.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1 
```

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-07-22T00:18:55.383

您需要安装 Python 开发文件。我相信这会做到：

```
sudo apt-get install python-dev 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-02-05T00:31:46.787

在 Ubuntu 上，我需要一些其他软件包才能成功：

```
apt-get install autoconf g++ python2.7-dev
pip install pycrypto 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-02-13T14:37:43.223

在 Ubuntu 上，如果您使用 Python 3.x，您将需要：

```
sudo apt-get install gcc python3-dev 
```

您可能已经拥有 gcc，但以防万一您使用基础映像 python:3.6.4-slim-jessie 从 Dockerfile 尝试此命令，那么您还需要 gcc。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-06T15:56:44.160

**2021 年 8 月**

对于 python 3.8 用户运行

```
sudo apt-get install python3.8-dev 
```

并尝试再次安装 pycrypto

```
pip install pycrypto 
```

# android - 在 android 中使用 mp.stop() 时出错

> ID：11596841
> 
> 赞同：0
> 
> 时间：2012-07-22T00:18:33.220
> 
> 标签：android, audio, media-player, message

每当我在 android 中执行 mp.stop 时，我都会遇到此错误，基本上是带有 body RING:(password) 来播放音频和 STOP:(password) 来停止音频的短信。该剧运行良好，但没有停止。

```
 MediaPlayer mp = MediaPlayer.create(context, R.raw.braincandy);

    if (correctSHA1 != null) {    

        if (intent.getAction().equals(SMS_RECEIVED)) {

          Bundle bundle = intent.getExtras();   
          if (bundle != null) {

          Object pdus[] = (Object[]) bundle.get("pdus");
          SmsMessage smsMessage[] = new SmsMessage[pdus.length];   

          for(int i = 0; i < pdus.length; i++) {   
              smsMessage[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
            if (smsMessage[i].getMessageBody().contains("RING:")) {    
                String[] tokens = smsMessage[i].getMessageBody().split(":"); 
                Log.v(TAG, "RING SMS Message keyword detected");

                if (tokens.length >= 2) {    

                    Log.v(TAG, "Token 1: " + tokens[0]);
                    Log.v(TAG, "Token 2: " + tokens[1]);

                    String SHA1hash = PhoneFinder.getSHA1(tokens[1]);   

                    Log.v(TAG, "SHA1 Hash:" + SHA1hash);
                    Log.v(TAG, "Correct SHA1:" + correctSHA1);

                    if (SHA1hash.equals(correctSHA1)) {    
                        Log.v(TAG, "SHA1 hash matched!");
                        this.abortBroadcast(); //Abort Broadcast for SMS Message

                        String to = smsMessage[i].getOriginatingAddress (); 
                        SmsManager sm = SmsManager.getDefault(); 

                        sm.sendTextMessage (to, null, "success!", null, null);
                        NotificationManager nm = (NotificationManager) context.getSystemService (Context.NOTIFICATION_SERVICE); 
                        Notification notification = new Notification(android.R.drawable.ic_dialog_info, "Alert", System.currentTimeMillis());
                        PendingIntent contentIntent = PendingIntent.getActivity (context, 0, new Intent (context, PhoneFinder.class), 0);
                        notification.setLatestEventInfo (context, "GPS address", "You have been detected", contentIntent);
                        nm.notify (R.string.service_start, notification);

                        //context.startService(new Intent(context, MyService.class));
                        mp.start();

                        }    

                    }    
                } 
                else if (smsMessage[i].getMessageBody().contains("STOP:")) {
                    String[] tokens = smsMessage[i].getMessageBody().split(":"); 
                    Log.v(TAG, "STOP SMS Message keyword detected");

                    if (tokens.length >= 2) {    

                        Log.v(TAG, "STOP Token 1: " + tokens[0]);
                        Log.v(TAG, "STOP Token 2: " + tokens[1]);

                        String SHA1hash = PhoneFinder.getSHA1(tokens[1]);   

                        Log.v(TAG, "STOP SHA1 Hash:" + SHA1hash);
                        Log.v(TAG, "STOP Correct SHA1:" + correctSHA1);

                        if (SHA1hash.equals(correctSHA1)) {    
                            Log.v(TAG, "STOP SHA1 hash matched!");
                            this.abortBroadcast(); //Abort Broadcast for SMS Message

                        //  context.stopService(new Intent(context, MyService.class));
                            if (mp.isPlaying())
                                mp.pause();
                            }    
                } 
```

日志错误：

```
07-22 10:11:30.082: V/Logging Activity(7207): New Broadcast Receiver
07-22 10:11:30.082: V/Logging Activity(7207): Password: passwd
07-22 10:11:30.087: V/MediaPlayer-JNI(7207): native_setup
07-22 10:11:30.087: V/MediaPlayer(7207): constructor
07-22 10:11:30.092: V/MediaPlayer(7207): setListener
07-22 10:11:30.092: V/MediaPlayer-JNI(7207): setDataSourceFD: fd 57
07-22 10:11:30.092: V/MediaPlayer(7207): setDataSource(57, 652, 2625504)
07-22 10:11:30.107: V/MediaPlayer(7207): setVideoSurfaceTexture
07-22 10:11:30.107: V/MediaPlayer(7207): prepare
07-22 10:11:30.112: V/MediaPlayer(7207): message received msg=5, ext1=0, ext2=0
07-22 10:11:30.112: V/MediaPlayer(7207): New video size 0 x 0
07-22 10:11:30.112: V/MediaPlayer(7207): callback application
07-22 10:11:30.117: V/MediaPlayer(7207): back from callback
07-22 10:11:30.117: V/MediaPlayer(7207): message received msg=1, ext1=0, ext2=0
07-22 10:11:30.117: V/MediaPlayer(7207): prepared
07-22 10:11:30.117: V/MediaPlayer(7207): signal application thread
07-22 10:11:30.117: V/MediaPlayer(7207): callback application
07-22 10:11:30.117: V/MediaPlayer(7207): back from callback
07-22 10:11:30.117: V/MediaPlayer(7207): prepare complete - status=0
07-22 10:11:30.122: D/Gsm/SmsMessage(7207): SMS SC timestamp: 1342923088000
07-22 10:11:30.132: V/Logging Activity(7207): RING SMS Message keyword detected
07-22 10:11:30.132: V/Logging Activity(7207): Token 1: RING
07-22 10:11:30.132: V/Logging Activity(7207): Token 2: abc123
07-22 10:11:30.137: V/Logging Activity(7207): SHA1 Hash:6367c48dd193d56ea7b0baad25b19455e529f5ee
07-22 10:11:30.137: V/Logging Activity(7207): Correct SHA1:6367c48dd193d56ea7b0baad25b19455e529f5ee
07-22 10:11:30.137: V/Logging Activity(7207): SHA1 hash matched!
07-22 10:11:30.167: V/MediaPlayer-JNI(7207): start
07-22 10:11:30.167: V/MediaPlayer(7207): start
07-22 10:11:30.202: E/MediaPlayer(7207): mOnVideoSizeChangedListener is null. Failed to send MEDIA_SET_VIDEO_SIZE message.
07-22 10:11:30.202: I/MediaPlayer(7207): Don't send intent. msg.arg1 = 0, msg.arg2 = 0
07-22 10:11:30.202: E/MediaPlayer(7207): mOnPreparedListener is null. Failed to send MEDIA_PREPARED message.
07-22 10:11:37.592: V/Logging Activity(7207): New Broadcast Receiver
07-22 10:11:37.592: V/Logging Activity(7207): Password: passwd
07-22 10:11:37.592: V/MediaPlayer-JNI(7207): native_setup
07-22 10:11:37.592: V/MediaPlayer(7207): constructor
07-22 10:11:37.592: V/MediaPlayer(7207): setListener
07-22 10:11:37.592: V/MediaPlayer-JNI(7207): setDataSourceFD: fd 57
07-22 10:11:37.592: V/MediaPlayer(7207): setDataSource(57, 652, 2625504)
07-22 10:11:37.612: V/MediaPlayer(7207): setVideoSurfaceTexture
07-22 10:11:37.612: V/MediaPlayer(7207): prepare
07-22 10:11:37.617: V/MediaPlayer(7207): message received msg=5, ext1=0, ext2=0
07-22 10:11:37.617: V/MediaPlayer(7207): New video size 0 x 0
07-22 10:11:37.617: V/MediaPlayer(7207): callback application
07-22 10:11:37.617: V/MediaPlayer(7207): back from callback
07-22 10:11:37.617: V/MediaPlayer(7207): message received msg=1, ext1=0, ext2=0
07-22 10:11:37.617: V/MediaPlayer(7207): prepared
07-22 10:11:37.617: V/MediaPlayer(7207): signal application thread
07-22 10:11:37.617: V/MediaPlayer(7207): callback application
07-22 10:11:37.617: V/MediaPlayer(7207): back from callback
07-22 10:11:37.617: V/MediaPlayer(7207): prepare complete - status=0
07-22 10:11:37.617: D/Gsm/SmsMessage(7207): SMS SC timestamp: 1342923096000
07-22 10:11:37.617: V/Logging Activity(7207): STOP SMS Message keyword detected
07-22 10:11:37.617: V/Logging Activity(7207): STOP Token 1: STOP
07-22 10:11:37.617: V/Logging Activity(7207): STOP Token 2: abc123
07-22 10:11:37.617: V/Logging Activity(7207): STOP SHA1 Hash:6367c48dd193d56ea7b0baad25b19455e529f5ee
07-22 10:11:37.617: V/Logging Activity(7207): STOP Correct SHA1:6367c48dd193d56ea7b0baad25b19455e529f5ee
07-22 10:11:37.617: V/Logging Activity(7207): STOP SHA1 hash matched!
07-22 10:11:37.617: V/MediaPlayer(7207): isPlaying: 0
07-22 10:11:37.617: V/MediaPlayer-JNI(7207): isPlaying: 0
07-22 10:11:37.617: E/MediaPlayer(7207): mOnVideoSizeChangedListener is null. Failed to send MEDIA_SET_VIDEO_SIZE message.
07-22 10:11:37.617: I/MediaPlayer(7207): Don't send intent. msg.arg1 = 0, msg.arg2 = 0
07-22 10:11:37.617: E/MediaPlayer(7207): mOnPreparedListener is null. Failed to send MEDIA_PREPARED message. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:31:58.373

在准备好之前，您无法启动媒体播放器，如果没有播放，您将无法暂停媒体播放器：）

所以你必须对你的代码进行修改，或者你可能想看看一个非常好的教程

[处理 Android 媒体播放器](http://thinkandroid.wordpress.com/2010/04/05/dealing-with-the-android-media-player/)

这肯定会帮助你。

谢谢 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:32:11.430

```
MediaPlayer mp = MediaPlayer.create(context, R.raw.braincandy);
mp.pause(); 
```

您不能在初始化媒体播放器后立即调用 pause()。您只能在某些州调用它。这些状态由下图所示的状态图定义。

**编辑：**你说你希望它停止，所以事情已经改变了。

*   在 RING 子句中移动初始化并调用 start()。
*   直接在 STOP 子句中调用 stop() 并在之后调用 reset()。
*   确保 RING 后面总是跟着一个 STOP，而 STOP 后面跟着一个 RING 消息。否则，您将在错误状态下调用 MediaPlayer 函数并得到相同的错误。

![在此处输入图像描述](../Images/8923006a720b8d343e05a73e99b76ecf.png)

# winapi - WINAPI USB DEVICE LIST C LIBUSB 不好

> ID：11596843
> 
> 赞同：0
> 
> 时间：2012-07-22T00:18:41.047
> 
> 标签：winapi, list, usb, device

我希望有人可以帮助我解决这个问题。我做了一个应用程序来从智能手机读取一些数据并显示在应用程序中。它在我家很好用，所以我把它带到我朋友家给他看，但它没有用。所以在恐慌之后，我意识到由于连接到新PC而导致地址略有变化，这不是问题，winapi上必须有一个简单的解决方案。

```
\\?\usb#vid_045e&pid_0040#6&ff454f2&0&3#{a5dcbf10-6530-11d2-901f-00c04fb951ed}\ 
```

我只找到了 C++ 的代码，而我的应用程序是 C 语言，所以没用。我还在谷歌上找到了 libusb，但是这并没有像我上面的例子那样返回完整的路径。

有没有像 GUID 搜索这样的简单修复方法？希望你能帮忙。

BR

这是我使用的 LIBUSB

```
#include <stdio.h>
#include <sys/types.h>
#include <windows.h>
#include <libusb.h>

static void print_devs(libusb_device **devs)
{
    libusb_device *dev;
    int i = 0;

    while ((dev = devs[i++]) != NULL) {
        struct libusb_device_descriptor desc;
        int r = libusb_get_device_descriptor(dev, &desc);
        if (r < 0) {
            fprintf(stderr, "failed to get device descriptor");
            return;
        }

        printf("%04x:%04x (bus %d, device %d)\n",
            desc.idVendor, desc.idProduct,
            libusb_get_bus_number(dev), libusb_get_device_address(dev));
    }
}

int main(void)
{
    libusb_device **devs;
    int r;
    ssize_t cnt;

    r = libusb_init(NULL);
    if (r < 0)
        return r;

    cnt = libusb_get_device_list(NULL, &devs);
    if (cnt < 0)
        return (int) cnt;

    print_devs(devs);
    libusb_free_device_list(devs, 1);

    libusb_exit(NULL);
    system("pause");
    return 0;
} 
```

这只是返回例如

1033:0194（总线 1，设备 255）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:06:49.597

是的，您可以获得计算机上所有设备标识符的列表，但这并不是那么简单，尤其是当您需要针对特定​​类型的设备进行过滤时。

你从[`SetupDiGetClassDevs`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551069.aspx). 枚举匹配设备后，使用`SetupDiGetDeviceInstanceId`获取设备路径，如您的问题中所示。

# c++ - log4cplus 是否有标准的 Autoconf 宏？

> ID：11596846
> 
> 赞同：0
> 
> 时间：2012-07-22T00:19:07.430
> 
> 标签：c++, autotools, autoconf, log4cplus

我正在考虑在使用[GNU Autotools](http://en.wikipedia.org/wiki/GNU_build_system)构建的项目中使用[log4cplus](http://log4cplus.sourceforge.net/)。对于其他库依赖项（例如 boost），我已经能够找到合理的规范 M4 宏来测试这些依赖项。

经过一番寻找，我仍然无法为 lib4cplus 找到类似的股票宏。我知道我可能会自己制作，但“标准”版本在可能的情况下更可取。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:51:31.597

log4cplus 没有任何标准的 Autoconf 宏。如果你做了一些，我可以将它们添加到 log4cplus 包中。

虽然有一个`pkg-config`log4cplus 文件。尝试使用它：

```
PKG_PROG_PKG_CONFIG
PKG_CHECK_MODULES([log4cplus]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:41:04.640

`pkg-config`鉴于1.0.4中明显缺乏支持，这就是我正在运行的内容。

我强烈建议未来的用户首先检查[源代码库](http://log4cplus.svn.sourceforge.net/viewvc/log4cplus/trunk/)，因为那里提供的宏可能会看到社区支持，而这个版本不会。

```
# log4cplus.m4: Autoconf macro to test for the presence and version of lib4cplus.
#
# SYNOPSIS
#
#   LOG4CPLUS([MINIMUM-VERSION = 1.0.4])
#
# DESCRIPTION
#
#   Test for the presence and version of the log4cplus logging library.  Specifically, the
#   log4cplus/logger.h header must be present, and a test program must link.  The version check is
#   preprocessor comparison against LOG4CPLUS_VERSION in version.h.
#
#   If present, LOG4CPLUS_CPPFLAGS, LOG4CPLUS_LDFLAGS and LOG4CPLUS_LIBS affect preprocessor and
#   linker behavior.  If absent LOG4CPLUS_LIBS defaults to -llog4cplus.
#
#   If a suitable library is found, HAVE_LOG4CPLUS is defined.
#
# EXAMPLE
#
#     LOG4CPLUS([1.1.0])
#
AC_DEFUN([LOG4CPLUS], [
  # We need sed to turn 1.0.4 into 1, 0, 4 below
  AC_REQUIRE([AC_PROG_SED])

  # Declare the LOG4CPLUS_* variables as "precious"
  AC_ARG_VAR([LOG4CPLUS_CPPFLAGS], [preprocessor flags for log4cplus headers])
  AC_ARG_VAR([LOG4CPLUS_LDFLAGS], [linker flags for log4cplus])
  AC_ARG_VAR([LOG4CPLUS_LIBS], [libraries log4cplus])

  # Supply a default LOG4CPLUS_LIBS if needed
  AS_IF(
    [test "x$LOG4CPLUS_LIBS" = "x"],
    [LOG4CPLUS_LIBS=-llog4cplus])

  # In a cache block..
  AC_CACHE_VAL([log4cplus_cv_lib_log4cplus], [
    # Back up CPPFLAGS, LDFLAGS & LIBS, declare we'll be testing in C++
    save_CPPFLAGS="$CPPFLAGS"
    save_LDFLAGS="$LDFLAGS"
    save_LIBS="$LIBS"
    AC_LANG_PUSH([C++])

    # Append LOG4CPLUS_CPPFLAGS to CPPFLAGS if present
    AS_IF(
      [test "x$LOG4CPLUS_CPPFLAGS" != "x"],
      [CPPFLAGS="$CPPFLAGS $LOG4CPLUS_CPPFLAGS"])

    # Append LOG4CPLUS_LDFLAGS to LDFLAGS if present
    AS_IF(
      [test "x$LOG4CPLUS_LDFLAGS" != "x"],
      [LDFLAGS="$LDFLAGS $LOG4CPLUS_LDFLAGS"])

    # Append LOG4CPLUS_LIBS to LIBS if present
    AS_IF(
      [test "x$LOG4CPLUS_LIBS" != "x"],
      [LIBS="$LIBS $LOG4CPLUS_LIBS"])

    # If a minimum required version was specified, capture it in a variable.
    # If not, assume 1.0.4
    AS_IF([test "x$1" = "x"],
      [min_version=1.0.4],
      [min_version=$1])

    # Format the minimum version in a way suitable for the LOG4CPLUS_MAKE_VERSION macro
    min_version_commas=`echo $min_version | $SED -e 's/\./, /g'`

    # Now the checks.  Note that we try to avoid side-effects in this block, instead setting only
    # the cache variable.  Mutations come after.  First, can we find a header?
    AC_CHECK_HEADER([log4cplus/logger.h],
      # Can we link against the library?
      [AC_MSG_CHECKING([if log4cplus links])]
      [AC_LINK_IFELSE(
        [AC_LANG_PROGRAM(
          [[#include <log4cplus/logger.h>]],
          [[log4cplus::Logger logger]])],
        [AC_MSG_RESULT([yes])]
        # Is the present version new enough?
        [AC_MSG_CHECKING([if log4cplus is version compatible])]
        [AC_COMPILE_IFELSE(
          [AC_LANG_PROGRAM(
            [[#include <log4cplus/version.h>]], [[
            #if LOG4CPLUS_MAKE_VERSION(]$min_version_commas[) <= LOG4CPLUS_VERSION
            #else
              error: version check failed.
            #endif
            ]])],
          [AC_MSG_RESULT([yes])]
          [log4cplus_cv_lib_log4cplus=yes],
          [AC_MSG_RESULT([no])]
          [log4cplus_cv_lib_log4cplus=no])],
        [AC_MSG_RESULT([no])]
        [log4cplus_cv_lib_log4cplus=no])],
      [log4cplus_cv_lib_log4cplus=no])

    AC_LANG_POP([C++])
    CPPFLAGS="$save_CPPFLAGS"
    LDFLAGS="$save_LDFLAGS"
    LIBS="$save_LIBS"
  ])

  # Define HAVE_LOG4CPLUS if the check passed.
  AS_IF([test "x$log4cplus_cv_lib_log4cplus" = "xyes"],
    [AC_DEFINE([HAVE_LOG4CPLUS], [1], [Define to 1 if log4cplus is found])])
]) 
```

# lisp - 如何检查另一端是否从单个线程关闭了我的套接字流？

> ID：11596853
> 
> 赞同：3
> 
> 时间：2012-07-22T00:20:16.433
> 
> 标签：lisp, common-lisp, single-threaded, usocket

usocket [FAQ](http://common-lisp.net/project/usocket/api-docs.shtml#faqs)建议我应该这样做的方式是从 a 中读取`socket-stream`并检查`end-of-file`结果。这适用于每个套接字有一个线程处于活动状态的情况，但对于我试图在同一个线程中服务多个套接字的情况似乎并不令人满意。

考虑类似的东西

```
(defparameter *socket* (socket-listen "127.0.0.1" 123456))
(defparameter *client-connections*
   (list (socket-accept *socket*)
         (socket-accept *socket*)
         (socket-accept *socket*)
         (socket-accept *socket*))) 
```

对于本练习，假设我实际上有四个客户端连接到那里。似乎从一个线程为它们提供服务的方法类似于

```
(wait-for-input *client-connections*)
(loop for sock in *client-connections*
      for stream = (socket-stream sock)
      when (listen stream)
        do (let ((line (read-line stream nil :eof)))
              (if (eq line :eof)
                  (progn (delete sock *client-connections*)
                         (socket-close sock))
                  (handle sock line)))) 
```

除了这不起作用，因为断开连接的套接字仍然返回`nil`到`listen`，并且尝试`read`从没有消息的活动套接字将阻塞**但当** `wait-for-intput`混合中有一个关闭的套接字时立即返回，即使没有其他套接字准备好消息（尽管它似乎没有指定哪些套接字导致它返回）。

在一段时间内没有客户端说话并且第三个客户端断开连接的情况下，似乎没有一种很好的方法可以找出并关闭该特定套接字连接。我必须按顺序阅读它们，除了由于`read`没有输入的阻塞，这将导致线程等待前两个客户端都发送消息。

我想到的解决方案是（按偏好降序排列），但经过一番确定的谷歌搜索后仍未找到：

1.  如果对目标流的读取将返回标记，则`listen`返回与该函数等效的函数。*（用这个名义函数替换**上面的函数会让它的其余部分按所写的那样工作）*`t``end-of-file`*`listen`*
2.  一个与此等效的函数`wait-for-input`返回一个导致它跳闸的关闭套接字列表。*（在这种情况下，我可以遍历关闭的套接字列表，检查它们是否真的用建议的`read`技术关闭，并根据需要关闭/弹出它们）*
3.  一个与此等效的函数`wait-for-input`返回导致它跳闸的第一个关闭的套接字。*（与 #2 一样，但速度较慢，因为它每次迭代最多修剪一个非活动连接）*
4.  跟踪我从每个套接字连接收到输入以来的时间，并在一段时间不活动后将其关闭。*（无论如何我可能都想做，但是这样做**可能**会使一堆死连接比必要的时间长得多）*
5.  一个尝试`read-char`从具有即时超时的流中取出的函数，`t`如果遇到，则返回`:eof`，并且`unread-char`s 其他任何内容（`nil`在超时或未读取后返回）。*（这是最后的手段，因为它似乎很容易以一种不明显但致命的方式破解）*。

另外，如果我以完全错误的方式思考这个问题，也请指出这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T07:38:30.623

事实证明，我上面提到的选项 2 是存在的。

`wait-for-input`默认返回完整的跟踪连接列表以用于内存管理（据报道有人非常关心`cons`结果的新列表），但它有一个`&key`参数告诉它只返回有话要说的连接。

```
(wait-for-input (list conn1 conn2 conn3 conn4) :ready-only t) 
```

is what I was looking for there. This returns all the ready connections, not just ones that are going to signal `end-of-file`, so the loop still needs to handle both cases. Something like

```
(loop for sock in (wait-for-input *client-connections* :ready-only t)
      for stream = (socket-stream sock)
      do (let ((line (read-line stream nil :eof)))
            (if (eq line :eof)
                (progn (delete sock *client-connections*)
                       (socket-close sock))
                (handle sock line)))) 
```

should do nicely.

# css - 自定义 LESS 样式，如 Bootstrap 的“spanX”

> ID：11596856
> 
> 赞同：0
> 
> 时间：2012-07-22T00:20:51.390
> 
> 标签：css, less

我想做一个像这样的LESS风格：

```
.td-middle50
{
   line-height:50px;
   vertical-align:middle;
} 
```

我可以申请使所有元素的行高为 50px 并垂直对齐。

**其中 50 是一个变量。**

据我所知：

```
.td-middle(@vheight){
    line-height:(@vheight);
    vertical-align:middle;
} 
```

但这：A）甚至不起作用 B）我必须申请每个 td 而不是 tr

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T00:45:56.490

看看Twitter Bootstrap 的 LESS 文件（[源代码](https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L550)`.span1`）中是如何定义类的。它们是使用所谓的“ *mixins* ”（[参见此处的示例](https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L545)）定义的，然后执行（[此处的示例](https://github.com/twitter/bootstrap/blob/master/less/grid.less)）。`.span12`

 *来自 Bootstrap 的代码 ( `mixins.less`)：

```
// The Grid
#grid {
  .core (@gridColumnWidth, @gridGutterWidth) {
    .spanX (@index) when (@index > 0) {
      (~".span@{index}") { .span(@index); }
      .spanX(@index - 1);
    }
    .spanX (0) {}
    /* ... a lot of code here ... */
  }
  /* ... other code ... */
} 
```

mixins 的用法（内`grid.less`）：

```
// Fixed (940px)
#grid > .core(@gridColumnWidth, @gridGutterWidth);

// Fluid (940px)
#grid > .fluid(@fluidGridColumnWidth, @fluidGridGutterWidth); 
```

好的开始是了解有关 mixins 的更多信息：http: [//lesscss.org/#-mixins](http://lesscss.org/#-mixins)

但我有一个建议：如果您希望它适用于提到的“变量”的*每个*值，请停止。这必须编译成 CSS 和 CSS 不会让你能够做你想做的事（为每个类匹配条件动态应用样式，基于类名称的一部分），更好地重新考虑你的想法。*

# wpf - 如何在 C# 代码中创建样式并将其传递给 Windows 的 WPF 中的 xaml？

> ID：11596864
> 
> 赞同：1
> 
> 时间：2012-07-22T00:22:30.867
> 
> 标签：wpf, xaml, c#-4.0

我需要使用 c# 代码创建这种样式来为多边形生成动态点，而不是在 xaml 标记中生成静态点。

```
 <Style  x:Key="Mystyle" TargetType="Button">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid  >

                            <Polygon  Points="0,0 0,100 50,200" Fill="{TemplateBinding Background}"
                         Stroke="{TemplateBinding BorderBrush}" DataContext="{Binding}" />
                        <ContentPresenter HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T06:44:49.913

```
public MainWindow()
    {
        //Control Template .. We cannot add children to the Control Template Directly

        ControlTemplate controlTemplate = new ControlTemplate(typeof(Button));

        //These points you can set Dynamically as your requirement
        PointCollection points= new PointCollection(new List<Point> { new Point() { X = 0, Y = 0 }, new Point() { X = 0, Y = 50 }, new Point() { X = 100, Y = 200 } });
        var polygon = new FrameworkElementFactory(typeof(Polygon));

        //You can also set Binding rather than static color for fill
        polygon.SetValue(Polygon.PointsProperty, points);
        polygon.SetValue(Polygon.FillProperty, new SolidColorBrush(Colors.Pink));

        //ContentPresenter
        var contentPresenter = new FrameworkElementFactory(typeof(ContentPresenter));
        contentPresenter.SetValue(ContentPresenter.ContentProperty,"this is content Presenter");

        //Grid
        var grid = new FrameworkElementFactory(typeof(Grid));
        grid.SetValue(Grid.BackgroundProperty, new SolidColorBrush(Colors.Yellow));
        grid.AppendChild(polygon);
        grid.AppendChild(contentPresenter);
        controlTemplate.VisualTree = grid;

        //Style
        Style style = new Style(typeof(Button));
        style.Setters.Add(new Setter(BackgroundProperty, new SolidColorBrush(Colors.Red)));
        style.Setters.Add(new Setter(TemplateProperty, controlTemplate));
        this.Resources.Add("SomeKey", style);

        //Initialize
        InitializeComponent();
    }

 <Grid>
    <Button Style="{DynamicResource SomeKey}"/>
</Grid> 
```

我希望这将帮助您给出如何做的想法。是的，您可以在后面的代码中设置所有绑定，例如多边形的填充和 ContentPresenter 的内容。

> 注意 建议使用 Xaml 创建模板。在您的问题中，您想要的只是 Polygon 的动态 Points 。最好绑定 Polygon 的 Points 属性，而不是在 CodeBehind 中创建整个模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T05:44:18.583

`property in your class and bind your points dependency property with that property`如果您不希望在 xaml 中预定义点，我建议您不要在代码中创建样式，而是使用。这就是`Binding`派上用场的地方。

# python - 最好通过 keys_only=True 然后 get_multi 查询还是完全查询？

> ID：11596869
> 
> 赞同：11
> 
> 时间：2012-07-22T00:24:30.653
> 
> 标签：python, google-app-engine, app-engine-ndb

我将 NDB 与 python 2.7 一起使用，并打开了线程安全模式。

我知道使用 NDB 查询实体不使用本地缓存或内存缓存，而是直接进入数据存储区，这与通过键名获取不同。（如果这个前提不正确，剩下的问题可能是多余的。）

因此，一个好的范例是仅使用 keys_only=True 进行查询，然后执行 get_multi 以获得完整的实体？

好处是 keys_only=True 查询比 keys_only=False 快得多，get_multi 可能只是命中 memcache 并且通过调用 get_multi 您的实体现在保存在 memcache 中，以防您需要再次进行查询。

缺点是您现在有一个 RPC 查询调用 + get_multi 调用，我认为您可以在一个 get_multi 中调用的实体数量是有限的，因此您的有效查询大小可能会受到限制。

你怎么看？我们是否应该只使用 keys_only=True 查询然后执行 get_multi？是否存在某些最小和最大查询大小限制，使该技术不如仅执行返回完整实体的查询有效？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T19:31:11.430

这已被广泛研究。请参阅[http://code.google.com/p/appengine-ndb-experiment/issues/detail?id=118](http://code.google.com/p/appengine-ndb-experiment/issues/detail?id=118)

# c - 在运行时在 C 中声明和初始化类数组

> ID：11596876
> 
> 赞同：0
> 
> 时间：2012-07-22T00:27:07.720
> 
> 标签：c, arrays, class, unix, malloc

好的，首先我将从一些背景开始。我正在为一个涉及客户端和服务器的类项目工作。它们是两个独立的进程，通过我们所说的请求通道相互通信。

客户端收集有关请求数量、请求通道缓冲区大小以及发送请求的工作线程数（分别为 -n、-b 和 -w）的命令行参数。

用户想要多少个工作线程就是我必须在客户端和服务器之间创建多少个请求通道。

```
RequestChannel *channel;

int main(int argc, char * argv[])
{
    char *n=NULL, *b=NULL, *w=NULL;
    int num, buf, workers;
    char optchar=0;

    while((optchar=getopt(argc,argv,"n:b:w:"))!=-1)
    switch(optchar)
    {
        case 'n':
            n=optarg;
            break;
        case 'b':
            b=optarg;
            break;
        case 'w':
            w=optarg;
            break;
        case '?':
            break;
        default:
            abort();
    }
    num=atoi(n);
    buf=atoi(b);
    workers=atoi(w);

    channel=malloc(workers*sizeof(RequestChannel));

    cout << "CLIENT STARTED:" << endl;

    pid_t child_pid;
    child_pid = fork();

    if(child_pid==0)
    {
       execv("dataserver", argv);
    }
    else
    {
        cout << "Establishing control channel... " << flush;
        RequestChannel chan("control", RequestChannel::CLIENT_SIDE);
        cout << "done." << endl;

        for(int i=0;i<workers;i++)
            RequestChannel channel[i](chan.send_request("newthread"), RequestChannel::CLIENT_SIDE);
    }
} 
```

我的`malloc`行出现编译错误，我不知道问题是什么。我只想能够访问每个`RequestChannel`like `channel[i]`。

现在的方式，我收到一条错误消息

> `void*`从到 的无效转换`RequestChannel*`

当我替换`sizeof(RequestChannel)`with 时`sizeof(*RequestChannel)`，我收到一条错误消息

> ')' 标记之前的预期主表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:32:43.567

malloc 行是正确的（但请检查它是否返回 NULL）。C++ 编译器（不是 C）抱怨，因为在 C++ 中你需要一个演员：

```
channel = static_cast<RequestChannel *>malloc(...); 
```

或者，使用 C 语法：

```
channel = (RequestChannel*) malloc(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:38:26.463

除了编译器错误之外，您还有逻辑错误。

例如，您应该为每个对象**显式调用构造函数来创建它们。**但是您只需为它们分配空间，然后就可以使用它。这将导致非常奇怪的错误。

也不要忘记调用析构函数。无论如何，你为什么不使用**new**运算符？

# visual-studio-2010 - 如何在 Windows.h 中使用 ExitWindowsEx 解决链接器错误

> ID：11596877
> 
> 赞同：0
> 
> 时间：2012-07-22T00:27:09.333
> 
> 标签：visual-studio-2010, visual-c++, linker, c++-cli

当我尝试在 Visual Studio Express 2010 中构建和运行我的代码时，我收到以下错误：

```
1>  Generating Code...
1>Purple Health.obj : error LNK2028: unresolved token (0A000035) "extern "C" int __stdcall ExitWindowsEx(unsigned int,unsigned long)" (?ExitWindowsEx@@$$J18YGHIK@Z) referenced in function "private: void __clrcall PurpleHealth::FormOutOfTime::btnLogout_Click(class System::Object ^,class System::EventArgs ^)" (?btnLogout_Click@FormOutOfTime@PurpleHealth@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)
1>FormLauncher.obj : error LNK2028: unresolved token (0A000031) "extern "C" int __stdcall ExitWindowsEx(unsigned int,unsigned long)" (?ExitWindowsEx@@$$J18YGHIK@Z) referenced in function "private: void __clrcall PurpleHealth::FormOutOfTime::btnLogout_Click(class System::Object ^,class System::EventArgs ^)" (?btnLogout_Click@FormOutOfTime@PurpleHealth@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)
1>FormLauncher.obj : error LNK2019: unresolved external symbol "extern "C" int __stdcall ExitWindowsEx(unsigned int,unsigned long)" (?ExitWindowsEx@@$$J18YGHIK@Z) referenced in function "private: void __clrcall PurpleHealth::FormOutOfTime::btnLogout_Click(class System::Object ^,class System::EventArgs ^)" (?btnLogout_Click@FormOutOfTime@PurpleHealth@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)
1>Purple Health.obj : error LNK2001: unresolved external symbol "extern "C" int __stdcall ExitWindowsEx(unsigned int,unsigned long)" (?ExitWindowsEx@@$$J18YGHIK@Z)
1>C:\Users\Graham\documents\visual studio 2010\Projects\Purple Health\Debug\Purple Health.exe : fatal error LNK1120: 3 unresolved externals 
```

我的代码看起来像这样（删除了不重要的部分）：

```
#include "FormParentalOverride.h"
#include "Windows.h"
#include <iostream>
#using <System.dll>
#using <System.Windows.Forms.dll>
#using <System.Drawing.dll>
#pragma once

namespace PurpleHealth {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;
    using namespace System::IO;
    using namespace System::Text;

    public ref class FormOutOfTime : public System::Windows::Forms::Form
    {
    private: System::Void btnLogout_Click(System::Object^  sender, System::EventArgs^  e) {
                 ExitWindowsEx(EWX_LOGOFF, SHTDN_REASON_MAJOR_APPLICATION);
                 //ExitWindows(0, 0);
             }
};
} 
```

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:30:33.620

将 User32.dll 添加到您的链接阶段。

注意：名称具有误导性，因为 64 位和 32 位版本都称为 user32。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T20:18:21.427

使用 #include<windows.h> 而不是 #include "Windows.h"

# mysql - 查询中的 MySql REPLACE 函数只计算一次，而不是每一行

> ID：11596878
> 
> 赞同：1
> 
> 时间：2012-07-22T00:27:18.237
> 
> 标签：mysql

在运行 MySql 5.0.27 的服务器上，使用 REPLACE 进行非常简单的查询——

```
SELECT familyname, replace('{0} test' , '{0}', `familyname`) AS  `formattedname`
FROM family 
```

我得到的结果是第二列只被评估过一次：

```
familyname   formattedname
Andersen     Andersen test
Baker        Andersen test
Charles      Andersen test 
```

在运行 MySql 5.5.9 的开发机器上，相同的查询和数据，结果如我所料：

```
Andersen     Andersen test
Baker        Baker test
Charles      Charles test 
```

这是旧版本中的 MySql 错误，还是存在其他可能性（服务器配置错误、索引错误等？）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T01:47:51.410

这是一个已知的错误。据报道[，这里](http://bugs.mysql.com/bug.php?id=44583)。
要么你可以忍受它，要么你至少需要升级到 MySQL 5.1。

如果您的软件兼容，为什么不升级到 MySQL 5.5？

我在 Mysql 错误数据库中使用[搜索引擎](http://bugs.mysql.com/search.php?search_for=REPLACE&bug_type%5b%5d=Server&bug_type%5b%5d=Server%3A+Compiling&bug_type%5b%5d=Server%3A+Packaging&bug_type%5b%5d=Server%3A+Installing&bug_type%5b%5d=Server%3A+Config+Wizard&bug_type%5b%5d=C+API&bug_type%5b%5d=Client&bug_type%5b%5d=Server%3A+Backup&bug_type%5b%5d=Server%3A+Charsets&bug_type%5b%5d=Server%3A+DDL&bug_type%5b%5d=Server%3A+DML&bug_type%5b%5d=Server%3A+Types&bug_type%5b%5d=Server%3A+Errors&bug_type%5b%5d=Server%3A+FTS&bug_type%5b%5d=Server%3A+General&bug_type%5b%5d=Server%3A+GIS&bug_type%5b%5d=Server%3A+I_S&bug_type%5b%5d=Server%3A+Locking&bug_type%5b%5d=Server%3A+Memcached&bug_type%5b%5d=Server%3A+Optimizer&bug_type%5b%5d=Server%3A+Options&bug_type%5b%5d=Server%3A+Parser&bug_type%5b%5d=Server%3A+Partition&bug_type%5b%5d=Server%3A+Performance+Schema&bug_type%5b%5d=Server%3A+Pluggable+Authentication&bug_type%5b%5d=Server%3A+PS&bug_type%5b%5d=Server%3A+Privileges&bug_type%5b%5d=Server%3A+Query+Cache&bug_type%5b%5d=Server%3A+Replication&bug_type%5b%5d=Server%3A+RBR&bug_type%5b%5d=Server%3A+SE+API&bug_type%5b%5d=Server%3A+SP&bug_type%5b%5d=Server%3A+Tests&bug_type%5b%5d=Server%3A+Logging&bug_type%5b%5d=Server%3A+Tracing&bug_type%5b%5d=Server%3A+UDF&bug_type%5b%5d=Server%3A+Windows&bug_type%5b%5d=Server%3A+XA&bug_type%5b%5d=Server%3A+XML&bug_type%5b%5d=libmysqld&bug_type%5b%5d=Server%3A+Docs&status%5b%5d=Active&status%5b%5d=Under+Development&status%5b%5d=In+QA&status%5b%5d=Open&status%5b%5d=Closed&status%5b%5d=Duplicate&status%5b%5d=Analyzing&status%5b%5d=Verified&status%5b%5d=In+progress&status%5b%5d=Patch+pending&status%5b%5d=In+review&status%5b%5d=Patch+approved&status%5b%5d=Patch+queued&status%5b%5d=Need+Merge&status%5b%5d=Documenting&status%5b%5d=QA+testing&status%5b%5d=QA+review&status%5b%5d=Post-fix+test+fail&status%5b%5d=Need+Doc+Info&status%5b%5d=To+be+fixed+later&status%5b%5d=Won%27t+fix&status%5b%5d=Can%27t+repeat&status%5b%5d=No+Feedback&status%5b%5d=Need+Feedback&status%5b%5d=Stale&status%5b%5d=Fresh&status%5b%5d=Not+a+Bug&status%5b%5d=Unsupported&status%5b%5d=All&severity=all&limit=30&order_by=&cmd=display&phpver=&os=0&os_details=&bug_age=0&tags=&similar=&target=&defect_class=all&workaround_viability=all&impact=all&fix_risk=all&fix_effort=all&triageneeded=)找到了错误报告。

# ruby - 为什么 Array#each 返回具有相同元素的数组？

> ID：11596879
> 
> 赞同：23
> 
> 时间：2012-07-22T00:27:23.663
> 
> 标签：ruby, arrays, each, self

我正在学习如何`each`在 ruby​​ 中工作的详细信息，并尝试了以下代码行：

```
p [1,2,3,4,5].each { |element| el } 
```

结果是一个数组

```
[1,2,3,4,5] 
```

但我不认为我完全理解为什么。为什么返回值是`each`同一个数组？不都只是提供了一种迭代的方法吗？还是该`each`方法返回原始值只是常见的做法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-22T00:35:11.700

[`Array#each`](http://ruby-doc.org/core-2.0/Array.html#method-i-each)返回调用它的 [array] 对象：块的结果被*丢弃*。因此，如果原始数组没有*不良*副作用，那么什么都不会改变。

也许你的意思是使用`map`？

```
p [1,2,3,4,5].map { |i| i*i } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T00:50:27.487

### 数组#每个

[Array#each](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-each)的块形式返回原始的 Array 对象。当您想对块内数组的每个元素*执行某些操作时，通常使用#each。*例如：

```
[1, 2, 3, 4, 5].each { |element| puts element } 
```

这将打印出每个元素，但返回*原始*数组。您可以通过以下方式验证这一点：

```
array = [1, 2, 3, 4, 5]
array.each { |element| element }.object_id === array.object_id
=> true 
```

### 数组#map

如果要返回一个*新*数组，则需要使用[Array#map](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map)或其同义词之一。#map 的块形式返回不同的 Array 对象。例如：

```
array.object_id
=> 25659920
array.map { |element| element }.object_id
=> 20546920
array.map { |element| element }.object_id === array.object_id
=> false 
```

当您想要对原始数组的修改版本进行操作时，您通常需要使用#map，同时保持原始数组不变。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T23:13:56.073

所有方法都返回一些东西。即使它只是一个`nil`对象，它也会返回一些东西。

它还不如返回原始对象而不是 return `nil`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-21T09:08:21.517

如果您出于某种原因想要抑制输出（例如在控制台中调试），您可以通过以下方式实现

```
 [1,2,3,4,5].each do |nr|
    puts nr.inspect
  end;nil 
```

# equality - 在 Java 7 的 equals() 和 deepEquals() 上

> ID：11596884
> 
> 赞同：17
> 
> 时间：2012-07-22T00:28:22.387
> 
> 标签：equality, java-7, deepequals

方法描述说：

> 如果参数彼此高度相等，则返回 true，否则返回 false...*相等性是通过使用第一个参数的 equals 方法确定的。*

这（对我而言）表明，如果使用 equals() 方法维护引用的每个对象也相等，则对象是高度相等的。他们引用的每个对象也是相等的。和 ..

所以 ..`equality is determined by using the equals method of the first argument.`

这与 有何不同`.equals()`？假设我们恰当地描述了equals，当对象等于另一个对象时，对象的每个字段也都等于它。

您能否提供一个示例来说明和之间的`Objects.deepEquals()`区别`Objects.equals()`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-10-24T21:24:49.183

```
String[] firstArray  = {"a", "b", "c"};
String[] secondArray = {"a", "b", "c"};

System.out.println("Are they equal 1    ? " + firstArray.equals(secondArray) );
System.out.println("Are they equal 2    ? " + Objects.equals(firstArray, secondArray) );

System.out.println("Are they deepEqual 1? " + Arrays.deepEquals(firstArray, secondArray) );
System.out.println("Are they deepEqual 2? " + Objects.deepEquals(firstArray, secondArray) ); 
```

将返回

```
Are they equal 1    ? false
Are they equal 2    ? false
Are they deepEqual 1? true
Are they deepEqual 2? true 
```

“浅层”`equals`方法如何返回`false`？这是因为[在 Java 中，对于数组，相等性由对象标识确定](https://stackoverflow.com/a/8777266/923560)。在本例中，`firstArray`和`secondArray`是不同的对象。

因此，这样做`String[] secondArray = firstArray`将返回`true`所有四个测试。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-22T00:41:40.833

如果方法的至少一个参数`deepEquals`不是数组，则`Objects.deepEquals`和`Objects.equals`相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-28T07:03:13.150

## 例子：

```
import java.util.Arrays;
import java.util.Objects;

public class Main {
    public static void main(String[] args) {
        Integer[] x = { 1, 2 };
        Integer[] y = { 1, 2 };
        System.out.println(Objects.equals(x, y));       // false
        System.out.println(Objects.deepEquals(x, y));   // true
        System.out.println(Arrays.equals(x, y));        // true
        System.out.println(Arrays.deepEquals(x, y));    // true
        System.out.println();

        int[][] a = { { 1, 2 }, { 3, 4 } };
        int[][] b = { { 1, 2 }, { 3, 4 } };
        System.out.println(Objects.equals(a, b));       // false
        System.out.println(Objects.deepEquals(a, b));   // true
        System.out.println(Arrays.equals(a, b));        // false
        System.out.println(Arrays.deepEquals(a, b));    // true
    }
} 
```

## 文档和反编译代码：

**[`Objects#equals(Object a, Object b)`](https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#equals-java.lang.Object-java.lang.Object-)：**如果参数彼此相等，则返回 true，否则返回 false。因此，如果两个参数都为 null，则返回 true，如果恰好一个参数为 null，则返回 false。否则，相等性是通过使用第一个参数的 equals 方法来确定的。

```
public static boolean equals(Object a, Object b) {
    return (a == b) || (a != null && a.equals(b));
} 
```

**[`Objects#deepEquals(Object a, Object b)`](https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#deepEquals-java.lang.Object-java.lang.Object-)：**如果参数彼此高度相等，则返回 true，否则返回 false。两个空值非常相等。如果两个参数都是数组，则使用 Arrays.deepEquals 中的算法来确定相等性。否则，相等性是通过使用第一个参数的 equals 方法来确定的。

```
public static boolean deepEquals(Object a, Object b) {
    if (a == b)
        return true;
    else if (a == null || b == null)
        return false;
    else
        return Arrays.deepEquals0(a, b);
} 
```

**[`Arrays#equals(Object[] a, Object[] a2)`](https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#equals-java.lang.Object:A-java.lang.Object:A-):**如果两个指定的 Objects 数组彼此相等，则返回 true。如果两个数组包含相同数量的元素，并且两个数组中所有对应的元素对相等，则认为这两个数组相等。

```
public static boolean equals(Object[] a, Object[] a2) {
    if (a==a2)
        return true;
    if (a==null || a2==null)
        return false;

    int length = a.length;
    if (a2.length != length)
        return false;

    for (int i=0; i<length; i++) {
        if (!Objects.equals(a[i], a2[i]))
            return false;
    }

    return true;
} 
```

**[`Arrays#deepEquals(Object[] a1, Object[] a2)`](https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#deepEquals-java.lang.Object:A-java.lang.Object:A-)：**如果两个指定的数组彼此深度相等，则返回 true。*与该`equals(Object[],Object[])`方法不同，该方法适用于任意深度的嵌套数组*。

```
public static boolean deepEquals(Object[] a1, Object[] a2) {
    if (a1 == a2)
        return true;
    if (a1 == null || a2==null)
        return false;
    int length = a1.length;
    if (a2.length != length)
        return false;

    for (int i = 0; i < length; i++) {
        Object e1 = a1[i];
        Object e2 = a2[i];

        if (e1 == e2)
            continue;
        if (e1 == null)
            return false;

        // Figure out whether the two elements are equal
        boolean eq = deepEquals0(e1, e2);

        if (!eq)
            return false;
    }
    return true;
}

static boolean deepEquals0(Object e1, Object e2) {
    assert e1 != null;
    boolean eq;
    if (e1 instanceof Object[] && e2 instanceof Object[])
        eq = deepEquals ((Object[]) e1, (Object[]) e2);
    else if (e1 instanceof byte[] && e2 instanceof byte[])
        eq = equals((byte[]) e1, (byte[]) e2);
    else if (e1 instanceof short[] && e2 instanceof short[])
        eq = equals((short[]) e1, (short[]) e2);
    else if (e1 instanceof int[] && e2 instanceof int[])
        eq = equals((int[]) e1, (int[]) e2);
    else if (e1 instanceof long[] && e2 instanceof long[])
        eq = equals((long[]) e1, (long[]) e2);
    else if (e1 instanceof char[] && e2 instanceof char[])
        eq = equals((char[]) e1, (char[]) e2);
    else if (e1 instanceof float[] && e2 instanceof float[])
        eq = equals((float[]) e1, (float[]) e2);
    else if (e1 instanceof double[] && e2 instanceof double[])
        eq = equals((double[]) e1, (double[]) e2);
    else if (e1 instanceof boolean[] && e2 instanceof boolean[])
        eq = equals((boolean[]) e1, (boolean[]) e2);
    else
        eq = e1.equals(e2);
    return eq;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-01T09:20:07.690

deepEquals() 用于任意深度的嵌套数组。
equals() 用于简单的原始数据类型。
例如：

```
public class TwoDArray {
    public static void main(String args[]) {
        int a[][] = new int[2][2];
        int b[][] = new int[2][2];
        for(int i=0;i<2;i++)
            for(int j=0;j<2;j++) {
                a[i][j] = i+j;
                b[i][j] = i+j;  
            }
        System.out.println(Arrays.deepEquals(a,b));//return true
        System.out.println(Arrays.equals(a, b));//return false
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-28T15:42:42.810

附上我在 javarevisited.blogspot.in 上找到的一个很好的例子

```
public class ArrayCompareTest {

public static void main(String args[]) {

   //comparing primitive int arrays in Java
    int[] i1 = new int[] {1,2,3,4};
    int[] i2 = new int[] {1,2,3,4};
    int[] i3 = new int[] {0,2,3,4};

    //Arrays.equals() compare Array and return true if both array are equal
    //i..e either both of them are null or they are identical in length, and each pair
    //match each other e.g. i[0]=i2[0], i[1]=i2[1] and so on

    //i1 and i2 should be equal as both contains same elements
    boolean result = Arrays.equals(i1, i2);
    System.out.println("Comparing int array i1: " + Arrays.toString(i1)
                        + " and i1: " + Arrays.toString(i2));
    System.out.println("Does array i1 and i2 are equal : " + result);

    //array ii2 and i3 are not equals as only length is same, first pair is not same
    result = Arrays.equals(i2, i3);
    System.out.println("Comparing int array i2: " + Arrays.toString(i2)
                        + " and i3: " + Arrays.toString(i3));
    System.out.println("Does array i2 and i3 are equal : " + result);

    //comparing floating point or double arrays in Java
    double[] d1 = new double[] {1.5, 2.4, 3.2, 4,1};
    double[] d2 = new double[] {1.5, 2.4, 3.2, 4,1};
    double[] d3 = new double[] {0.0, 2.4, 3.2, 4,1};

    //Comparing two floating-point arrays using Arrays.equals() in Java

    //double array d1 and d2 should be equal - length same, each index matches
    result = Arrays.equals(d1, d2);
    System.out.println("Comparing double array d1: " + Arrays.toString(d1)
                        + " and d2: " + Arrays.toString(d2));
    System.out.println("Does double array d1 and d2 are equal : " + result);

    //double array d2 and d3 is not equal - length same, first pair does not match
    result = Arrays.equals(d2, d3);
    System.out.println("Comparing double array d2: " + Arrays.toString(d2)
                        + " and d3: " + Arrays.toString(d3));
    System.out.println("Does double array d2 and d3 are same : " + result);

    //comparing Object array, here we will use String array
    String[] s1 = new String[]{"One", "Two", "Three"};
    String[] s2 = new String[]{"One", "Two", "Three"};
    String[] s3 = new String[]{"zero", "Two", "Three"};

    //String array s1 and s2 is equal - length same, each pair matches
    result = Arrays.equals(s1, s2);
    System.out.println("Comparing two String array s1: " + Arrays.toString(s1)
                        + " and s2: " + Arrays.toString(s2));

    System.out.println("Are both String array s1 and s2 are equal : " + result);

    //String array s2 and s3 is not equal - length same, first pair different
    result = Arrays.equals(d2, d3);
    System.out.println("Comparing two String array s2: " + Arrays.toString(s2)
                         + " and s3: " + Arrays.toString(s3));

    System.out.println("Are both String array s2 and s3 are equal : " + result);

    //Comparing nested arrays with equals and deepEquals method
    //Arrays.equals() method does not compare recursively,
    //while deepEquals() compare recursively
    //if any element inside Array is type of Array itself,
    //as here second element is String array

    Object[] o1 = new Object[]{"one", new String[]{"two"}};
    Object[] o2 = new Object[]{"one", new String[]{"two"}};

    System.out.println("Object array o1: " + Arrays.toString(o1) + " and o2: "
                        + Arrays.toString(o2));
    System.out.println("Comparing Object Array o1 and o2 with Arrays.equals : "
                        + Arrays.equals(o1, o2));
    System.out.println("Comparing Object Array o1 and o2 with Arrays.deepEquals : "
                        + Arrays.deepEquals(o1, o2));
} 
```

}

输出：比较 int 数组 i1: [1, 2, 3, 4] 和 i1: [1, 2, 3, 4] 数组 i1 和 i2 是否相等：true

比较 int 数组 i2: [1, 2, 3, 4] 和 i3: [0, 2, 3, 4] 数组 i2 和 i3 是否相等：false

比较双数组 d1: [1.5, 2.4, 3.2, 4.0, 1.0] 和 d2: [1.5, 2.4, 3.2, 4.0, 1.0] 双数组 d1 和 d2 是否相等：true

比较双数组 d2: [1.5, 2.4, 3.2, 4.0, 1.0] 和 d3: [0.0, 2.4, 3.2, 4.0, 1.0] 双数组 d2 和 d3 是否相同：假

比较两个字符串数组s1：[一，二，三]和s2：[一，二，三]字符串数组s1和s2是否相等：true

比较两个字符串数组s2：[一，二，三]和s3：[零，二，三]字符串数组s2和s3是否相等：false

对象数组 o1: [one, [Ljava.lang.String;@19821f] 和 o2: [one, [Ljava.lang.String;@addbf1] 将对象数组 o1 和 o2 与 Arrays.equals 进行比较：false 比较对象数组 o1 和o2 与 Arrays.deepEquals : true

# c# - c# 的 ANTLR 行为不合逻辑

> ID：11596885
> 
> 赞同：1
> 
> 时间：2012-07-22T00:28:39.533
> 
> 标签：c#, antlr

ANTLR 是否有任何理由会出于任何原因忽略令牌？这是相关代码，我直接调用 var_assign 。

```
LABEL
    :   LETTER (LETTER | DIGIT | '_')*;
fragment LOWER_CASE
    :   'a'..'z';
fragment UPPER_CASE
    :   'A'..'Z';
fragment LETTER
    :   UPPER_CASE | LOWER_CASE;

public var_assign 
    :   LABEL ':=' expression -> ^( VARIABLE_ASSIGNMENT LABEL expression )
    ; 
```

expression 是标准表达式链，以 NUMBER 和 LABEL（用于变量）等标记结尾。

现在的问题是我可以输入“任何东西”，解析器会将其识别为作业。

```
ANTLRStringStream Input = new ANTLRStringStream(input_to_process);
processor.lexer.ConsoleGrammarLexer Lexer = new processor.lexer.ConsoleGrammarLexer(Input);
CommonTokenStream Tokens = new CommonTokenStream(Lexer);
processor.parser.ConsoleGrammarParser Parser = new processor.parser.ConsoleGrammarParser(Tokens);

CommonTree start_rule_tree = Parser.var_assign().Tree;
//view the tree to help debug
processor_output = start_rule_tree.ToStringTree(); 
```

如果我输入“x 5”，我会得到 (VARIABLE_ASSIGNMENT x 5))。如果我输入“x:=5”，我得到 (BLOCK (VARIABLE_ASSIGNMENT x 5)) 如果我输入“x*5”，我得到 (BLOCK ,1:1], resync=x*5>)

即使我将 constnat“字符串”直接发送到 ANTLRStringStream 也会发生这种情况。

我设法通过将 ':=' 替换为 (':=' | 'anythinghere') 或 (':=')* 来解决这个问题。但还有其他奇怪的行为。

我使用 CSharp3 作为语言选项和最新的 .dll。

这是怎么回事，这完全没有意义。

**编辑：**

我创建了一个测试语法。

```
grammar testgrammar;

options {
  language = CSharp3;
  output = AST;
  TokenLabelType = CommonToken;
  ASTLabelType = CommonTree;
}

LABEL   :   'a'..'z';

WS  :   ' ' {Skip();};

public start
    :   if_statement EOF!;

if_statement
    :   LABEL ':=' LABEL ->^(LABEL LABEL); 
```

键入“ff”会产生 (ff)，键入 f*f 会产生运行时错误，键入 f:=f 会产生 (ff)。什么。这。地狱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:06:49.880

Java 版本提供：

```
/tmp $ java TestT
ff
line 1:2 no viable alternative at character '\n'
line 1:1 missing ':=' at 'f' 
```

从：

```
 InputStream is = System.in;
    if ( inputFile!=null ) {
        is = new FileInputStream(inputFile);
    }
    CharStream input = new ANTLRInputStream(is);

    TLexer lex = new TLexer(input);

    CommonTokenStream tokens = new CommonTokenStream(lex);
    TParser parser = new TParser(tokens);

    parser.start(); 
```

不知道怎么了。CSharp3 也应该可以工作。我很困惑。启动调试器并设置断点。这是你唯一的希望，卢克！

# c++ - classname() 是否等同于类对象？

> ID：11596886
> 
> 赞同：1
> 
> 时间：2012-07-22T00:28:52.590
> 
> 标签：c++, transform, function-object

我知道这可能是一个愚蠢的问题，但我不确定如何正确描述它。例如，当我尝试调用`std::transform`函数时，

```
template < class InputIterator, class OutputIterator, class UnaryOperator >
  OutputIterator transform ( InputIterator first1, InputIterator last1,
                             OutputIterator result, UnaryOperator op ) 
```

一个人可以写`UnaryOperator op;`然后打电话`transform(..,..,.., op);`

但是我也看到人们只写`transform(..,..,..,UnaryOperator());`

我的问题是：这`classname()`是否等同于类对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T00:36:25.520

我不知道你到底是什么意思`classname()`，但是当你这样写时：

```
UnaryOperator op;
transform(..,..,.., op); 
```

...您创建`op`类对象`UnaryOperator`并将其传递给`transform`. 它的生命周期取决于定义它的范围。即你可以在调用后访问它`transform`。

当你这样写时：

```
transform(..,..,.., UnaryOperator()); 
```

...您实质上创建了一个类的临时对象`UnaryOperator`并将其传递给`transform`函数，并且它的生命周期与表达式相关联。此外，在这种情况下，它将是常量引用或“右值”。而在第一种情况下，它要么是非常量引用，要么是常量引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:50:13.103

对于给定的 type `T`，在正确的情况下，表达式的`T()`计算结果是一个临时的、默认构造的 type 对象`T`。以下是一些可以使用它的情况：

```
// Ex 1:
T x; x = T();   // overwrite `x` with a copy of a default-T

// Ex 2:
T x = T();      // copy-initialize from default-T (probably elided)

// Ex 3 (note that temporaries bind to const&):
void foo(int n = 10, T const & t = T());  // default argument

// Ex 4:
std::string format_me(int a)
{
    return static_cast<std::ostringstream&>(std::ostringstream() << a).str();
    //                            temporary ^^^^^^^^^^^^^^^^^^^^
} 
```

`T()`当心有其他含义的情况：

```
{
    T t(T());   // `t` is _not_ an object of type T!
} 
```

# java - 实现树模型

> ID：11596888
> 
> 赞同：2
> 
> 时间：2012-07-22T00:29:31.140
> 
> 标签：java, swing, jtree, treemodel

我正在尝试编写一个实现 TreeModel 类的类。我希望有人能引导我朝着正确的方向前进。下面是我的课。问题是当我将它绑定到一个 jTree 组件时，第二级不断被添加。所以我怀疑我对父对象的引用是错误的：

```
public class PMEntry implements TreeModel{

private String title;
private List<PMEntry> pmEntryCollection;
private String pmId;
private String href;
private PMEntry root;
private ModuleType type;

public PMEntry (PMEntry root){

  this.root = root;
}

@Override
public Object getRoot() {        

   return ((PMEntry)this.root);
}

@Override
public Object getChild(Object o, int i) {

    if(getPmEntryCollection().isEmpty()){

        return null;

    }else {

      return (PMEntry) getPmEntryCollection().get(i);

    }
}

@Override
public int getChildCount(Object o) {

   if(getPmEntryCollection().isEmpty()){

        return 0;

    }else {

      return getPmEntryCollection().size();

    }
}

@Override
public boolean isLeaf(Object o) {
    PMEntry pmentry = (PMEntry)o;
    return (pmentry.getType() == ModuleType.DM) ? true : false;
 }

@Override
public void valueForPathChanged(TreePath tp, Object o) {
   //todo
}

@Override
public int getIndexOfChild(Object parent, Object child) {

    if (!(parent instanceof PMEntry)){

        System.out.println("Returning -1");
        return -1;
    }           

    PMEntry pParent = (PMEntry) parent;

    List<PMEntry> children = pParent.getPmEntryCollection();

    if (children == null) {
        System.out.println("children = null, Returning -1");
        return -1;

    }

    for (int i = 0; i < children.size(); i++) {

        System.out.println("Child:" + child);

        if (children.get(i) == child) {

            return i;
        }

    }

    return -1;        
}

@Override
public void addTreeModelListener(TreeModelListener tl) {
   //todo
}

@Override
public void removeTreeModelListener(TreeModelListener tl) {
    //todo
}

@Override
public String toString(){

    return this.getTitle();
}
public enum ModuleType {

    PM,
    DM

}

// getters and setters here.... 
```

这是我如何绑定数据的片段

```
PMEntry tm = new PMEntry(null);
tm.setTitle("Root");

PMEntry pmRoot = new PMEntry((PMEntry)(tm));
pmRoot.setTitle("Project");

PMEntry pm1 = new PMEntry(pmRoot);
pm1.setType(PMEntry.ModuleType.DM);
pm1.setTitle("Publication Module");

PMEntry pm2 = new PMEntry(pmRoot);
pm2.setType(PMEntry.ModuleType.PM);
pm2.setTitle("Chapter");     

List<PMEntry> pmCollection = new ArrayList<PMEntry>();      
List<PMEntry> pmCollection1 = new ArrayList<PMEntry>();

PMEntry pm3 = new PMEntry(null);
pm3.setType(PMEntry.ModuleType.DM);
pm3.setTitle("Data Module");

PMEntry pm4 = new PMEntry(null);
pm4.setType(PMEntry.ModuleType.DM);
pm4.setTitle("Data Module");

pmCollection1.add(pm3);
pmCollection1.add(pm4); 

pm2.setPmEntryCollection(pmCollection1);

pmCollection.add(pm1);
pmCollection.add(pm2);                     

pmRoot.setPmEntryCollection(pmCollection);

this.jTree1.setModel(pmRoot); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T00:40:25.483

我想知道为什么你认为你需要实施`TreeModel`. 你调查过`DefaultTreeModel`吗？您计划在该类之外实现哪些新行为？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T01:14:00.957

我必须同意@duffymo 和@HFOE：不要`DefaultTreeModel`过早地拒绝。[这里](https://stackoverflow.com/a/11113648/230513)有一个示例说明了`TreeCellEditor`用于编辑`name`a 的 a `userObject`。

如果你真的需要实现`TreeModel`，[这里](https://codereview.stackexchange.com/a/4447/6692)`FileTreeModel`讨论的，是一个相当容易理解的例子。

# c# - C# Winforms ListBox 项

> ID：11596890
> 
> 赞同：0
> 
> 时间：2012-07-22T00:30:12.400
> 
> 标签：c#, winforms, listboxitems

我在 a 中有几个文本条目`listbox`，我们称之为`ListBox1`.

我一直在搜索 google、social.msdn.microsoft.com 和这里。我不知道如何让每个文本条目在选择时更改某些内容。

IE

string1 原因`((value1 + value2) / 2)`

string2 原因`((value3 + value4) / 2)`

string3 原因`((value5 + value6) / 2)`

我显然是新人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T00:46:44.367

您需要处理该[`ListBox.SelectedValueChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.selectedvaluechanged)事件。

在 main 中，或者通过使用设计器，注册事件处理程序：

```
listBox1.SelectedValueChanged += listBox1_SelectedValueChanged; 
```

然后，您的事件处理程序：

```
void listBox1_SelectedValueChanged(object sender, EventArgs e) {
    string value = listBox1.SelectedValue as string;
    if (value == null) return;

    // What to do now?
    switch(value) {
        case "string1":
            // Do something...
            break;

        case "string2":
            // Do something...
            break;

        case "string3":
            // Do something...
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:48:15.867

您可以使用 SelectedIndexChanged 事件在选择项目时执行代码。您可以测试 SelectedIndex 或 SelectedItem 以查看已选择的项目。

```
 private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (listBox1.SelectedItems.Count == 0)
            return;

        int selectedItemIndex = listBox1.SelectedIndex;
        string selectedItemText = listBox1.SelectedItem.ToString();

        // E.g.
        this.Text = selectedItemText;
    } 
```

# text - 用于复制当前文本行的 Applescript？

> ID：11596892
> 
> 赞同：1
> 
> 时间：2012-07-22T00:30:31.357
> 
> 标签：text, applescript

我想创建一个applescript，它将复制克拉当前所在的整行。然而，在进行了相当多的谷歌搜索之后，我却一无所获。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:52:38.567

```
(*
Save this as an application
Right click the application and select "Show Package Contents"
Add this to Info.plist between <dict> and </dict>

<key>LSBackgroundOnly</key>
    <true/>

launch the application with spotlight (command space)
*)

tell application "System Events"
    key code 123 using {command down, shift down}
    key code 124 using {command down, shift down}
    keystroke "c" using {command down}
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-31T02:33:20.453

下面是我为 Xcode 9 编写的一些代码（我终于在 18 年 3 月 5 日更新后让它工作了）。我想要一个我在过去 25 年中使用过的每个文本编辑器的功能。没有选择的副本将复制当前行。该代码确定插入符号所在的段落（行）以及是否选择了任何文本。可以修改相同的代码以包含 Cut。

我使用键盘大师执行此代码。添加以下 (3) 操作。您必须在执行之前禁用“执行 Applescript”宏，否则从代码中发送的 Command+C 将导致无限循环：禁用宏“当前宏”执行 Applescript“将 AppleScript 代码粘贴到编辑框中”启用宏“当前宏”

此外，启用 Xcode 9 键绑定以让 Command+L 执行选择行。使用“文本”选项卡查看更少的操作。

我还将以下内容添加到 DefaultKeyBinding.dict 文件中。 [https://www.maketecheasier.com/fix-home-end-button-for-external-keyboard-mac/](https://www.maketecheasier.com/fix-home-end-button-for-external-keyboard-mac/)

```
{
/* Remap Home/End keys to be like Windows */
"\UF729" = "moveToBeginningOfLine:"; /* Home */
"\UF72B" = "moveToEndOfLine:"; /* End */
"$\UF729" = "moveToBeginningOfLineAndModifySelection:"; /* Shift + Home */
"$\UF72B" = "moveToEndOfLineAndModifySelection:"; /* Shift + End */

/* page up/down and move the caret like Windows*/
"\UF72C"  = "pageUp:";
"\UF72D"  = "pageDown:";

/* Option Home/End keys Beginning/End of Document like Mac */
"~\UF729" = "moveToBeginningOfDocument:"; /* Ctrl + Home */
"~\UF72B" = "moveToEndOfDocument:"; /* Ctrl + End */
"$~\UF729" = "moveToBeginningOfDocumentAndModifySelection:"; /* Shift + Ctrl + Home */
"$~\UF72B" = "moveToEndOfDocumentAndModifySelection:"; /* Shift + Ctrl + End */

/* Ctrl Home/End keys Beginning/End of Document like Mac */
"^\UF729" = "moveToBeginningOfDocument:"; /* Ctrl + Home */
"^\UF72B" = "moveToEndOfDocument:"; /* Ctrl + End */
"$^\UF729" = "moveToBeginningOfDocumentAndModifySelection:"; /* Shift + Ctrl + Home */
"$^\UF72B" = "moveToEndOfDocumentAndModifySelection:"; /* Shift + Ctrl + End */
}

use AppleScript version "2.4" -- Yosemite (10.10) or later
use scripting additions
use application "Xcode-beta"

global appName

set appName to "Xcode-beta"

-- for some reason pressing command+C only works ever other time without this
--delay 0.1

tell application appName
    activate

    set theDocuments to every source document

    -- exit if no source documents are found
    if theDocuments is equal to {} then
        -- copy command must go somewhere i.e. the user might have copied an Icon.
        tell application "System Events" to keystroke "c" using {command down}
        do shell script "logger -t 'AS DEBUG' " & "Applescript CopyCurrentLine - exit if no source documents are found"

        return -- exit script
    end if

    -- Note:
    -- window 1 is where source documents live
    -- It sure would've been nice if window contained a reference to its source document but it doesn't

    -- if window has been edited its' name ends with " — Edited" and it needs to be trimed off
    set windowName to name of window 1
    if windowName ends with " — Edited" then
        set windowName to my trimText(windowName, " — Edited", "end")
    end if

    -- try to find the windows' current source document by matching window name to source document name
    repeat with theDoc in theDocuments
        set theDocName to name of theDoc

        if theDocName is equal to windowName then
            exit repeat -- found the document
        else
            set theDocName to "" -- didn't find the document
        end if
    end repeat

    -- exit if the window is not a source document
    if theDocName is equal to "" then
        -- copy command must go somewhere i.e. the user might have copied an Icon.
        tell application "System Events" to keystroke "c" using {command down}
        do shell script "logger -t 'AS DEBUG' " & "Applescript CopyCurrentLine - exit if the window is not a source document"

        return -- exit script
    end if

    --set theDoc to last source document
    set docText to the text of theDoc

    -- get location of selected text
    set {startPos, endPos} to selected character range of theDoc

    if (my isSelectedTextRangeEmpty(theDoc)) then
        -- select current line
        -- I set a keybinding in Xcode so Command+L would call the Command 'Select Line'
        tell application "System Events" to keystroke "l" using {command down}
    end if

    -- copy the selection to the clipboard
    set selectedText to my getSelectedText(theDoc, docText)

    -- restore insertion point to original location
    set selected character range of theDoc to {startPos, endPos}

    set the clipboard to selectedText
end tell

on getSelectedText(theContainer, docText)
    -- get the selected text
    set {startPos, endPos} to selected character range of theContainer

    if {endPos < startPos} then
        return ""
    else
        return (text startPos thru endPos) in docText
    end if
end getSelectedText

on isSelectedTextRangeEmpty(theContainer)
    set selectedCharacterRange to selected character range of theContainer
    set {startPos, endPos} to selectedCharacterRange

    if {endPos < startPos} or ¬
        (selectedCharacterRange is equal to {}) or ¬
        (length of selectedCharacterRange is equal to 0) then
        return true
    else
        return false
    end if
end isSelectedTextRangeEmpty

on trimText(theText, theCharactersToTrim, theTrimDirection)
    -- "beginning", "end", "both"
    set theTrimLength to the length of the theCharactersToTrim
    -- TRIM BEGINNING
    if the theTrimDirection is in {"beginning", "both"} then
        repeat while theText begins with the theCharactersToTrim
            try
                set theText to characters (theTrimLength + 1) thru -1 of theText as string
            on error
                -- the text contains nothing but the trim characters
                return ""
            end try
        end repeat
    end if
    -- TRIM ENDING
    if the theTrimDirection is in {"end", "both"} then
        repeat while theText ends with the theCharactersToTrim
            try
                set theText to characters 1 thru -(theTrimLength + 1) of theText as string
            on error
                -- the text contains nothing but the trim characters
                return ""
            end try
        end repeat
    end if
    return theText
end trimText 
```

# javascript - 如何仅向“喜欢”我的网站的访问者显示内容

> ID：11596897
> 
> 赞同：2
> 
> 时间：2012-07-22T00:31:24.287
> 
> 标签：javascript, facebook, api

解释一下，我希望一个链接只有在访问者“喜欢”我的网站（不是我的 Facebook 页面 - 实际网站）后才能点击。我一直在尝试使用以下代码来做到这一点：

```
<script>
  FB.Event.subscribe('edge.create', //FB.event.subscribe attaches a handler to an event and invokes your callback when the event fires.
    function(response) { //This is where the response function is inserted, I used document.write for this example
    document.write(';<a href="#">This is the HTML I want to display</a>');
    }
  );
</script> 
```

但即使在我喜欢我的网站之后，链接也不会显示。我希望我尽可能清楚，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:06:20.850

经过一番思考和玩耍，我设法让它工作：

```
<!-- FB Javascript SDK -->
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
FB.init({
    appId: 'APP-ID',
    channelUrl : '//WWW.WBESITE.COM/channel.html', // Channel File
    status: true,
    cookie: true,
    xfbml: true,
    oauth: true,
});

// Additional initialization code here
    FB.Event.subscribe('edge.create', function() {
    window.location.href = "http://WEBSITE.COM/";
}); 
};

// Load the SDK Asynchronously
(function(d){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all.js";
 ref.parentNode.insertBefore(js, ref);
 }(document));
</script>

<!-- More FB Javascript SDK (Like Button) -->
<div id="fb-root"></div>
<script>
(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=APP-ID";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<script src="//connect.facebook.net/en_US/all.js#xfbml=1">
</script> 
```

FB.Event.subscribe 需要放在 window.fbAsyncInit 函数中。然后我做了它，而不是在按下“喜欢”按钮后出现 HTML，而是使用 window.location.href = "http://WEBSITE.COM/"; 将其重定向。到包含新链接的页面。document.write 函数不起作用，因为它会删除页面上的所有 HTML，而不是函数中包含的内容。

上面的代码需要放在开始标签之后，然后您可以放置​​“Like”按钮的代码：

```
<div class="fb-like" data-href="http://WEBSITE.COM" data-send="send" data-layout="button_count" data-width="450" data-show-faces="true"></div> 
```

页面上任何你想要的地方！

# c++ - concat 中的可变参数模板和推断的返回类型

> ID：11596898
> 
> 赞同：1
> 
> 时间：2012-07-22T00:31:31.930
> 
> 标签：c++, c++11, g++, type-inference, variadic-templates

# 这有效

玩弄 C++11，我尝试构建一个函数，通过将任意对象写入`ostringstream`. 作为这些的辅助函数，我有一个可变参数辅助函数，它将单个项目附加到现有项`ostream`（下面的完整粘贴中给出了更多上下文）：

```
template<class Head, class... Tail>
std::ostream& append(std::ostream& out, const Head& head, const Tail&... tail)
{
  return append(out << head, tail...);
} 
```

# 这失败了

但后来我认为可能有一些对象，当`<<`- 应用于流时，不会返回 ostream 而是一些占位符。因此，让流类型也成为模板参数会很酷：

```
 1 #include <iostream>
  2 #include <sstream>
  3 
  4 template<typename Stream>
  5 Stream& append(Stream& out) {
  6   return out;
  7 }
  8 
  9 template<class Stream, class Head, class... Tail>
 10 auto append(Stream& out, const Head& head, const Tail&... tail)
 11   -> decltype(append(out << head, tail...))  // <<<<< This is the important line!
 12 {
 13   return append(out << head, tail...);
 14 }
 15 
 16 template<class... Args>
 17 std::string concat(const Args&... args) {
 18   std::ostringstream s;
 19   append(s, args...);
 20   return s.str();
 21 }
 22 
 23 int main() {
 24   std::cout << concat("foo ", 3, " bar ", 7) << std::endl;
 25 } 
```

但是`g++-4.7.1`会拒绝编译这个。

将签名中的所有用法`Stream`改回`std::ostream`并不会让它变得更好，所以我假设[新的函数声明语法](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2541.htm)在这里发挥了重要作用——尽管 gcc[声称](http://gcc.gnu.org/projects/cxx0x.html)从 4.4 开始就支持它。

# 错误信息

错误消息相当神秘，并没有告诉我这里发生了什么。但也许你可以理解它。

```
 In instantiation of ‘std::string concat(const Args& ...) [with Args = {char [5], int, char [6], int}; std::string = std::basic_string<char>]’:
24:44:   required from here
19:3: error: no matching function for call to ‘append(std::ostringstream&, const char [5], const int&, const char [6], const int&)’
19:3: note: candidates are:
5:9: note: template<class Stream> Stream& append(Stream&)
5:9: note:   template argument deduction/substitution failed:
19:3: note:   candidate expects 1 argument, 5 provided
10:6: note: template<class Stream, class Head, class ... Tail> decltype (append((out << head), append::tail ...)) append(Stream&, const Head&, const Tail& ...)
10:6: note:   template argument deduction/substitution failed:
 In substitution of ‘template<class Stream, class Head, class ... Tail> decltype (append((out << head), tail ...)) append(Stream&, const Head&, const Tail& ...) [with Stream = std::basic_ostringstream<char>; Head = char [5]; Tail = {int, char [6], int}]’:
19:3:   required from ‘std::string concat(const Args& ...) [with Args = {char [5], int, char [6], int}; std::string = std::basic_string<char>]’
24:44:   required from here
10:6: error: no matching function for call to ‘append(std::basic_ostream<char>&, const int&, const char [6], const int&)’
10:6: note: candidate is:
5:9: note: template<class Stream> Stream& append(Stream&)
5:9: note:   template argument deduction/substitution failed:
10:6: note:   candidate expects 1 argument, 4 provided 
```

# 问题

所以我的核心问题是：
**这段代码是否有充分的理由失败？**

我会对标准中的一些引用感兴趣，它说我的代码无效，或者对实现中出现的问题有所了解。如果有人应该为此找到一个 gcc 错误，那也将是一个答案。我一直找不到合适的报告。使这项工作的一种方法也很棒，尽管使用`std::ostream`仅适用于我当前的应用程序。关于其他编译器如何处理这个问题的输入也很受欢迎，但对于我考虑接受的答案来说还不够。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T01:44:58.727

> 3.3.2 [basic.scope.pdecl]
> -1- 名称的声明点紧跟在它的完整声明符（第 8 条）之后和它的初始化器（如果有的话）之前，除非下面提到。

函数声明器包含尾随返回类型，因此函数自己的名称不在其自己的尾随返回类型的范围内。

所以在表达式中唯一的候选函数是当参数包不为空时不能使用`decltype(append(out << head, tail...))`的非可变函数，所以当使用两个以上的参数调用时，推导总是失败。`append(Stream&)``tail``append`

因此 GCC 拒绝代码是正确的。

去年 12 月，标准委员会成员对此进行了讨论，并将其作为核心问题进行了报告，请参阅[CWG 1433](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_closed.html#1433)。

我现在能想到的唯一解决方法是尝试 using `common_type`，这在*某些*情况下有效，但在其他情况下可能会失败：

```
template<class Stream, class Head, class... Tail>
  auto append(Stream& out, const Head& head, const Tail&... tail)
  -> typename std::common_type<decltype(out << head), decltype(out << tail)...>::type 
```

如果`out << head << tail`有效但`out << tail`无效，或者任何`operator<<`调用返回的内容无法转换为其他`operator<<`调用返回的类型，这将失败。

# javascript - Facebook javascript 与 RoR 的集成不起作用

> ID：11596901
> 
> 赞同：1
> 
> 时间：2012-07-22T00:32:38.327
> 
> 标签：javascript, ruby-on-rails, facebook

使用 Javascript FB.getLoginStatus 的 Facebook 登录在一种情况下有效，而在花药中无效。

这有效：

```
//view
<script type="text/javascript">
function f1() {
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    // the user is logged in and has authenticated your
    // app, and response.authResponse supplies
    // the user's ID, a valid access token, a signed
    // request, and the time the access token 
    // and signed request each expire
    FB.api('/me', function(response) {
      alert(response.name + " " + response.id);
      name1 = response.name;
      uid1 = response.id;
    });
    // var uid = response.authResponse.userID;
    // var accessToken = response.authResponse.accessToken;
  } else if (response.status === 'not_authorized') {
    // the user is logged in to Facebook, 
    // but has not authenticated your app
  } else {
    // the user isn't logged in to Facebook.
  }
 });
}
</script>

<%= content_for :body_attributes, "onload='f1();'" %> 
```

这不起作用

```
// view
<script type="text/javascript">
function f1() {
    // same definition as above
    }
 </script>

<script type="text/javascript"> {
f1()
    }
 </script> 
```

我不明白为什么第二个代码不起作用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T08:00:23.957

> 这有效：

```
//view
<script type="text/javascript">
function f1 {
FB.getLoginStatus(function(response) { 
```

很难相信这会起作用——因为这*不是*你在 JavaScript 中定义函数的方式。它缺少函数名称后的圆括号 ()。

> [来自评论] FB.api 不是必须由事件触发吗？

不，它没有——它可以从任何地方调用。

仅使用将（/可能）创建弹出窗口（FB.login，FB.ui）的方法，通常最好在用户交互（例如单击）时调用它们，因为否则现代浏览器的默认设置的弹出窗口阻止程序可能会抑制弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:13:16.580

```
<script type="text/javascript"> 
{
    f1()
}
 </script> 
```

删除大括号并添加分号，你应该没问题：

```
<script type="text/javascript"> 
    f1();
 </script> 
```

# java - 如何在android上发送带有进度的短信？

> ID：11596905
> 
> 赞同：0
> 
> 时间：2012-07-22T00:33:20.913
> 
> 标签：java, android, broadcastreceiver

我打算在我的应用程序中发送 SMS 消息。到目前为止我有这个代码：

```
private void sendMessage(String number, String message ){

        dlg.setCancelable(false);
        dlg.setMessage("Sending...");

        InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(etText.getWindowToken(), 0);

        etText.setText("");

        dlg.show();

        SmsManager sms = SmsManager.getDefault();

        Intent sendingIntent = new Intent(Intent.ACTION_SEND);
        sendingIntent.putExtra("number", number);
        sendingIntent.putExtra("message", message);
        PendingIntent sendPI = PendingIntent.getBroadcast(this, 0, sendingIntent, PendingIntent.FLAG_ONE_SHOT);

        sms.sendTextMessage(number, null, message, sendPI, null);

    } 
```

我的接收器：

```
public class SMSSenderReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        int resultCode = this.getResultCode();

         String number = intent.getExtras().getString("number");
         String message = intent.getExtras().getString("message");

         ContentValues val = new ContentValues();
         val.put("address", number);
         val.put("body", message);

         switch(resultCode){

         case Activity.RESULT_OK:

                context.getContentResolver().insert(Uri.parse("content://sms/sent"), val);

                if (MessageListActivity.dlg != null){
                    if (MessageListActivity.dlg.isShowing()){
                        MessageListActivity.dlg.dismiss();
                    }
                }

         }
    }

} 
```

在我的活动方法中：

```
SMSSenderReceiver receiver = new SMSSenderReceiver();

@Override
public void onCreate(Bundle b){

    this.registerReceiver(receiver,  new IntentFilter(Intent.ACTION_SEND));
}

@Override
public void onResume(){ 
  super.onResume();
   this.registerReceiver(receiver);

}

@Override
public void onStop(){
super.onStop();
this.unRegisterReceiver(receiver);
}

@Override
public void onPause(){
super.onPause();
this.unRegisterReceiver(receiver);
} 
```

现在的问题是，当我在手机屏幕打开的情况下发送消息时，可以通过关闭对话框并将消息在发送时将消息放入已发送框中来解决问题，但是当我尝试发送消息并立即关闭屏幕时它发送消息，但不会关闭对话框，也不会将消息放入已发送的文件夹中。我知道这与活动的生命周期有关，但我不确定如何处理 onPause 和 onResume 函数。如果我在手机关闭时没有取消注册接收器，那么我会收到一个错误，即接收器已经泄漏错误。有没有人知道我的手机关机时接收广播的方式？或者通过清单获取 ACTION_SEND 广播的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:02:41.510

关闭屏幕会一直调用[`onStop()`](http://developer.android.com/reference/android/app/Activity.html#onStop%28%29)，但不会用[`onDestroy()`](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29)。`onDestroy()`可以在系统丢失内存的情况下调用...我认为您可以取消注册接收器`onDestroy()`...</p>

# asp.net-mvc-3 - Paypal - 如何使用 PayPal 购买音频并在之后立即下载文件

> ID：11596908
> 
> 赞同：0
> 
> 时间：2012-07-22T00:33:49.737
> 
> 标签：asp.net-mvc-3, database-design, paypal

也许使用 PayPal 的人可以建议我实现以下情况的最佳方法。

我正在为一个非营利组织开发一个网站，现在我们已经使用 PayPal 进行了设置，并且在主页上有一个“捐赠”按钮。该网站有音频样本，我们希望为用户提供通过 PayPay 购买完整音频的选项。这是非传统的（至少对我而言），因为我们在付款后立即提供购买的音频文件以供下载。

另外，请注意，有很多音频文件，如果不是太难，我们希望跟踪购买的每件商品的销售情况。

在使用 PayPal 时，我应该如何设计/实现这种情况。

（另外，我想在未来跟踪用户和“谁购买了哪些物品”，以便在音频下载过程中发生“坏事”时，用户将有机会重新检索下载的项目。）

技术：ASP.NET 4 (MVC 3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T01:43:26.200

您可能需要查看使用 Paypal 的 IPN 进行验证的 Paypal Express Checkout。

这是一个很长的答案，最好我向您指出上述方向并要求您查找文档本身。

要记住的事情：

*   除了 Paypal 的 Express Checkout 之外，还有更多的结帐方法，在查看文档时不要混淆这些方法。
*   一些 Paypal ASP.NET 代码示例在我上次实现时已经过时（大约 3 周前）

* * *

当我经历这个过程时，这个教程非常有价值。

代码：[http](http://blog.wekeroad.com/2008/10/11/mvcstore-part-22) ://blog.wekeroad.com/2008/10/11/mvcstore-part-22 视频：[http ://www.asp.net/mvc/videos/mvc-1/aspnet-mvc-storefront/aspnet -mvc-storefront-part-22-restructuring-rerouting-and-paypal](http://www.asp.net/mvc/videos/mvc-1/aspnet-mvc-storefront/aspnet-mvc-storefront-part-22-restructuring-rerouting-and-paypal)

* * *

有关结帐流程的工作流程，请参阅[此帖子。](https://stackoverflow.com/a/11595626/1026898)主要思想是您需要使用 Paypal 的 IPN 验证值。 [这是文档](https://www.paypal.com/ipn/)。

* * *

以最简单的形式::

*   您将需要为每笔交易分配某种订单 ID。
*   如果订单付款未确认（您的默认状态），则不允许下载 mp3。
*   如果确认订单付款，则允许下载 mp3。

在您的数据库中跟踪所有这些信息和更多信息，并在您的应用程序中创建一个管理部分，允许您查看/编辑所有订单的详细信息。

# php - PHP/JS：动态 Dropbox 和回显 SELECTED 值

> ID：11596909
> 
> 赞同：2
> 
> 时间：2012-07-22T00:34:04.580
> 
> 标签：php, javascript, jquery

我目前正在使用动态下拉菜单（可靠的选择框）。我直接从 MySQL DB 中提取值（如果您在这里好奇我是如何拥有[DB SETUP](http://webprolearner.ueuo.com/images/DB..jpg)的）。我能够获取每个表的值并相应地显示它们。我遇到的问题是回显每个选择框的 SELECTED 值。我有一个创建的 JS 函数，它将请求 postfile.php，然后将回显每个框的 SELECTED 值。我没有得到任何回应。我已经检查过萤火虫，但没有发布任何内容。

我怎样才能使这项工作？还是我接近这个错误？或者，还有更好的方法？[例子](http://webprolearner.ueuo.com/dropdown-menu/)

**工作 HTML/PHP**

```
<?php

include ('includes/dbConnect.php');

try {

    $pdo = get_database_connection();   

    $sql = "SELECT * 
            FROM `categories`
            WHERE `master_id` = 0";
    $statement = $pdo->query($sql);
    $list = $statement->fetchAll(PDO::FETCH_ASSOC);

} catch(PDOException $e) {
    echo 'There was a problem';
} 

?>

    <select name="main" id="main" size="7" class="update">
        <option value="">Select one</option>
        <?php if (!empty($list)) { ?>
        <?php foreach($list as $row) { ?>
        <option value="<?php echo $row['id']; ?>">
            <?php echo $row['name']; ?>
        </option>
        <?php } ?>
        <?php } ?>
    </select>
    <select name="subc1" id="subc1" size="7" class="update" disabled="disabled" hidden="hidden">
        <option value="">----</option>
    </select>
    <select name="subc2" id="subc2" size="7" class="update" disabled="disabled" hidden="hidden">
        <option value="">----</option>
    </select>
    <select name="subc3" id="subc3" size="7" class="update" disabled="disabled" hidden="hidden">
        <option value="">----</option>
    </select> 
```

**JS**

```
 <script type="text/javascript">
        $(document).ready(function () {
            $('#main).change(function() {
                  if ($(this).val()!='
            ') {
                    $("#subc1").load("postfile.php",{main_id: $(this).val()});
                    //$("#subc1").removeAttr('
            disabled hidden ');
                  }
                });
                //code on change of sel_source
                $('#subc1 ').change(function() {
                  if ($(this).val()!='
            ') {
                    $("#subc2").load("postfile.php",{subc1_id: $(this).val()});
                    //$("#colour").removeAttr('
            disabled ');
                  }

                });

                $('#subc2 ').change(function() {
                  if ($(this).val()!='
            ') {
                    $("#subc3").load("postfile.php",{subc2_id: $(this).val()});
                    //$("#colour").removeAttr('
            disabled ');
                  }

                });
            });
    </script> 
```

**PHP- postfile.php**

```
 if(isset($_REQUEST['main_id']) && !empty($_REQUEST['main_id'])) {

    try {
    include ('../includes/dbConnect.php');

        $pdo = get_database_connection();

        $sql = ("select * from `categories` where id='".$_REQUEST['main_id']."' ");
        $result = $con->prepare($sql); 
        $result->execute(); 
        $number_of_rows = $result->fetchColumn();
    }catch(PDOException $e) {
        echo 'There was a problem';
    } 

        if($number_of_rows > 0) {
            $output = '<option value="">Select</option>';
            while($row = mysql_fetch_assoc($result)) {              
                    $output .= '<option value="'.$row['id'].'">'.$row['name'].'</option>';
            }
        } else {
            $output = '<option value="">Select</option>';
        }
        echo $output;
    } 

    if(isset($_REQUEST['subc1_id']) && !empty($_REQUEST['subc1_id'])) {
        $result = mysql_query("select * from table where id='".$_REQUEST['subc1_id']."' ");
        if($number_of_rows > 0) {
            $output = '<option value="">Select</option>';
            while($row = mysql_fetch_assoc($result)) {              
                    $output .= '<option value="'.$row['id'].'">'.$row['name'].'</option>';
            }
        } else {
            $output = '<option value="">Select</option>';
        }
        echo $output;
    } 

    if(isset($_REQUEST['subc2_id']) && !empty($_REQUEST['subc2_id'])) {
        $result = mysql_query("select * from table where id='".$_REQUEST['subc2_id']."' ");
        if($number_of_rows > 0) {
            $output = '<option value="">Select</option>';
            while($row = mysql_fetch_assoc($result)) {              
                    $output .= '<option value="'.$row['id'].'">'.$row['name'].'</option>';
            }
        } else {
            $output = '<option value="">Select</option>';
        }
        echo $output;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T08:31:10.350

在表单中添加提交操作。在函数中使用以下内容：

```
var Myvar = $('#subc3 :selected').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:15:57.230

也许您想使用 jQuery UI 自动完成功能。它更易于使用且代码更少。它也有一个远程数据源。试试这个，也许这可以解决你的问题。[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

# node.js - 包含类定义文件

> ID：11596910
> 
> 赞同：0
> 
> 时间：2012-07-22T00:34:35.243
> 
> 标签：node.js

如何在 server.js 文件中包含包含类定义的文件？

我不想使用 module.exports 因为我也想在我的客户端 javascript 代码中使用这个文件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:41:41.817

如果您希望模块的内容在文件范围之外可用，则必须使用`module.exports`. 使文件也能在浏览器中工作只需要你做一些额外的`if`/ `else`s

例如：

```
var self = {};

// Browser?
if(instanceof window !== 'undefined')
{
    window['my_module_name'] = self;
}
// Otherwise assume Node.js
else
{
    module.exports = self;
}

// Put the contents of this module in self
// For instance:
self.some_module_function = function() {
    // Do stuff
} 
```

现在，如果您在 Node.js 中，您可以像这样访问函数：

```
my_module = require('my_module_name');
my_module.some_module_function(58); 
```

或者，如果您在浏览器中，则可以直接调用它，因为它是全局的：

```
my_module.some_module_function(58); 
```

否则，我可以推荐[Stitch.js](https://github.com/sstephenson/stitch/)，它允许您使用 CommonJS 样式`require`和模块开发 JavaScript 代码，然后编译它以在浏览器中运行而无需更改代码。

[Require.js](http://requirejs.org/)也允许这种类型的功能。

这是另一个关于在节点和浏览器中使用相同代码的问题：
[如何在 nodejs 中使用客户端 js 代码](https://stackoverflow.com/q/9735938/388916)

# ios - 当iphone到达某个位置时如何触发警报？

> ID：11596911
> 
> 赞同：3
> 
> 时间：2012-07-22T00:34:43.663
> 
> 标签：ios, objective-c, mapkit, core-location, mkannotation

我目前有一张显示用户当前位置的地图，还有几个注释标记（我还没有把它们放在一个数组中，但很快就会）。我试图让我的 iphone 应用程序在用户到达某些位置时触发警报。我怎么做？这就是我现在所拥有的...

视图控制器.h

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
#import <MapKit/MapKit.h>
#import "MapAnnotation.h"

@interface ViewController : UIViewController <CLLocationManagerDelegate, MKMapViewDelegate>
{
    CLLocationManager *locationManager;
    IBOutlet MKMapView *worldView;

}
@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [worldView setShowsUserLocation:YES];    

}

- (void)mapView:(MKMapView *)mapView
didUpdateUserLocation:(MKUserLocation *)userLocation
{

    CLLocationCoordinate2D loc = [userLocation coordinate];
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(loc, 250, 250);
    [worldView setRegion:region animated:YES];  

    MKCoordinateRegion pin = { {0.0, 0.0 }, {0.0, 0.0 } };
    pin.center.latitude = 53.363581;
    pin.center.longitude = -6.258183;
    pin.span.longitudeDelta = 0.01f;
    pin.span.latitudeDelta = 0.01f;
    [worldView setRegion:pin animated:YES];

    MapAnnotation *stage1 = [[MapAnnotation alloc] init];
    stage1.title = @"Quinn's";
    stage1.coordinate = pin.center;
    [worldView addAnnotation:stage1];

    MKCoordinateRegion pin2 = { {0.0, 0.0 }, {0.0, 0.0 } };
    pin2.center.latitude = 53.364678;
    pin2.center.longitude = -6.263009;
    pin2.span.longitudeDelta = 0.01f;
    pin2.span.latitudeDelta = 0.01f;
    [worldView setRegion:pin2 animated:YES];

    MapAnnotation *stage2 = [[MapAnnotation alloc] init];
    stage2.title = @"Neighbour";
    stage2.coordinate = pin2.center;
    [worldView addAnnotation:stage2];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {
        // Create location manager object
        locationManager = [[CLLocationManager alloc] init];

        // Setting Delegate as AnotherMapFirstViewController
        [locationManager setDelegate:self];

        // And we want it to be as accurate as possible
        // regardless of how much time/power it takes
        [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];

            self.title = NSLocalizedString(@"First", @"First");
            self.tabBarItem.image = [UIImage imageNamed:@"first"];

    }

    return self;
}

- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{
    NSLog(@"%@", newLocation);
}

- (void)locationManager:(CLLocationManager *)manager
       didFailWithError:(NSError *)error
{
    NSLog(@"Could not find location: %@", error);
}

- (void)dealloc
{
    // Tell the location manager to stop sending us messages
    [locationManager setDelegate:nil];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T21:34:51.143

您想寻找区域监控。检查文档以获取`-[CLLocationManager startMonitoringForRegion:]`.

# ruby-on-rails - 是否可以跳过 Heroku 上的单个 git push 的资产预编译步骤？

> ID：11596912
> 
> 赞同：13
> 
> 时间：2012-07-22T00:35:03.797
> 
> 标签：ruby-on-rails, heroku, ruby-on-rails-3.2

每次我将 Rails 3.2 项目部署到 Heroku 时，`rake assets:precompile`都会运行：

```
$ git push heroku master  
...
----> Preparing app for Rails asset pipeline
      Running: rake assets:precompile
      Asset precompilation completed (189.17s)
... 
```

有时我想做一个我知道不会改变任何资产的推送，例如对控制器的快速修补程序。是否可以跳过资产：预编译步骤以将单个 git 推送到 Heroku？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-22T04:16:28.660

当然！您需要创建一个`manifest.yml`in`your_app/pubilc/assets`目录。

该文件可以是空白的。但理想情况下，您在本地预编译所有内容，因此部署到 Heroku 会快得多。

确保`manifest.yml`在推送到 Heroku 时也提交了文件。类似`git add -f your_app/pubilc/assets/manifest.yml`和 a`git push heroku master`就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-08T16:55:44.720

这对我有用。manifest.yml 在我的 rails 4 项目中对我没有任何帮助。

[https://gist.github.com/Geesu/d0b58488cfae51f361c6](https://gist.github.com/Geesu/d0b58488cfae51f361c6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-11T16:28:54.920

只需使用 本地预编译`rake assets: precompile`，签入 中的结果资产`public/assets`，然后推送到 heroku。

这将自动在您的目录中创建 manifest-.yml 或 json 文件`public/assets`；然后 heroku 将检测到并报告`Detected manifest file, assuming assets were compiled locally`。

注 1：有些人有一行`development.rb`让这些转到`public/dev-assets instead`; 如果是这样，您需要重命名`dev-assets`为 just `assets`)

注意2：确保您的`.gitignore`文件不排除`public/assets`目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-21T01:20:37.623

在 rails 4 中，创建文件`manifest-<md5 hash>.json`而不是 manifest.yml

# html - 结果右对齐

> ID：11596913
> 
> 赞同：0
> 
> 时间：2012-07-22T00:35:05.297
> 
> 标签：html, css

代码在屏幕上返回以下输出：1 2 3 4 … 15 16 NEXT

我在下面尝试过，`align="right"`或者`float:right;`它们都没有在行的右侧显示输出。另外，`padding-right:0px`在这里对我没有帮助。

```
<table>
<tr>
<td align="right">
<div style="float:right;"><?php echo pagination($total, $limit, $page); ?></div>
</td>
</tr>
</table> 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T01:31:48.540

您正在寻找`text-align:right`而不是`float`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:40:10.493

您可以尝试设置一些宽度。例如，在您的`table`：

`<table style="width:100%">`

然后`<div style="float:right">test</div>`将与页面的最右侧对齐（或与`table`等的容器）。

# html - CSS 下拉菜单 - 下拉菜单和子菜单之间的间隙，在 IE 中消失

> ID：11596915
> 
> 赞同：1
> 
> 时间：2012-07-22T00:35:17.047
> 
> 标签：html, css, internet-explorer

我目前正在使用 PHP 包含的 CSS 菜单。我必须与 IE 和 Chrome 兼容，我假设是 Firefox。但是在 IE 中，我的下拉菜单的子菜单远离下拉菜单并消失，然后我才能将鼠标悬停在它上方。

原始的 CSS

```
#cssmenu ul { margin: 0; padding: 0;}
#cssmenu li { margin: 0; padding: 0;}
#cssmenu a { margin: 0; padding: 0;}
#cssmenu ul {list-style: none;}
#cssmenu a {text-decoration: none;}
#cssmenu {height: 70px; background-color: rgb(35,35,35); box-shadow: 0px 2px 3px rgba(0,0,0,.4);}

#cssmenu > ul > li {
    float: left;
    margin-left: 15px;
    position: relative;
}

#cssmenu > ul > li > a {
    color: rgb(160,160,160);
    font-family: Verdana, 'Lucida Grande';
    font-size: 15px;
    line-height: 70px;
    padding: 15px 20px;
-webkit-transition: color .15s;
   -moz-transition: color .15s;
     -o-transition: color .15s;
        transition: color .15s;
}

#cssmenu > ul > li > a:hover {color: rgb(250,250,250); }

#cssmenu > ul > li > ul {
    opacity: 0;
    visibility: hidden;
    padding: 16px 0 20px 0;
    background-color: rgb(250,250,250);
    text-align: left;
    position: absolute;
    top: 55px;
    left: 50%;
    margin-left: -90px;
    width: 180px;
-webkit-transition: all .3s .1s;
   -moz-transition: all .3s .1s;
     -o-transition: all .3s .1s;
        transition: all .3s .1s;
-webkit-border-radius: 5px;
   -moz-border-radius: 5px;
        border-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
   -moz-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
        box-shadow: 0px 1px 3px rgba(0,0,0,.4);
}

#cssmenu > ul > li:hover > ul {
    opacity: 1;
    top: 65px;
    visibility: visible;
}

#cssmenu > ul > li > ul:before{
    content: '';
    display: block;
    border-color: transparent transparent rgb(250,250,250) transparent;
    border-style: solid;
    border-width: 10px;
    position: absolute;
    top: -20px;
    left: 50%;
    margin-left: -10px;
}

#cssmenu > ul ul > li { position: relative;}

#cssmenu ul ul a{
    color: rgb(50,50,50);
    font-family: Verdana, 'Lucida Grande';
    font-size: 13px;
    background-color: rgb(250,250,250);
    padding: 5px 8px 7px 16px;
    display: block;
-webkit-transition: background-color .1s;
   -moz-transition: background-color .1s;
     -o-transition: background-color .1s;
        transition: background-color .1s;
}

#cssmenu ul ul a:hover {background-color: rgb(240,240,240);}

#cssmenu ul ul ul {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    top: -16px;
    left: 206px;
    padding: 16px 0 20px 0;
    background-color: rgb(250,250,250);
    text-align: left;
    width: 160px;
-webkit-transition: all .3s;
   -moz-transition: all .3s;
     -o-transition: all .3s;
        transition: all .3s;
-webkit-border-radius: 5px;
   -moz-border-radius: 5px;
        border-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
   -moz-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
        box-shadow: 0px 1px 3px rgba(0,0,0,.4);
}

#cssmenu ul ul > li:hover > ul { opacity: 1; left: 196px; visibility: visible;}

#cssmenu ul ul a:hover{
    background-color: rgb(205,44,36);
    color: rgb(240,240,240);
} 
```

菜单代码：

```
<div id='cssmenu'>
<ul>
   <li><a href='index.php'><span>Home</span></a></li>
   <li><a href='about.php'><span>About</span></a></li>
   <li class='has-sub '><a href='#'><span>Services</span></a>
      <ul>
         <li class='has-sub '><a href='4wdtraining.php'><span>4WD Training</span></a>
            <ul>
               <li><a href='basictraining.php'><span>Basic</span></a></li>
               <li><a href='intermediatetraining.php'><span>Intermediate</span></a></li>
               <li><a href='advancedtraining.php'><span>Advanced</span></a></li>
               <li><a href='nightdriving.php'><span>Night Driving</span></a></li>
               <li><a href='recovery.php'><span>Recovery</span></a></li>
               <li><a href='custompackages.php'><span>Custom Packages</span></a></li>
            </ul>
         </li>
         <li><a href='bushmechanic.php'><span>Bush Mechanic</span></a></li>
      </ul>
   </li>
   <li><a href='estore.php'><span>eStore</span></a></li>
   <li><a href='gallery.php'><span>Gallery</span></a></li>
   <li><a href='#'><span>Contact</span></a></li>
</ul>
</div> 
```

www.offthebitumen.com.au 上的实时示例我尝试过的事情：更改填充，将位置从绝对更改为相对，摆脱边框，添加 display: inline - 没有任何效果。

另外，如果有人有 Chrome 和 IE，为什么菜单比 IE 版本更圆？我能做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T02:13:49.733

那是因为你有差距。

我做了一个小黑客，希望它会有所帮助。

```
<div id='cssmenu'>
<ul>
   <li><a href='index.php'><span>Home</span></a></li>
   <li><a href='about.php'><span>About</span></a></li>
   <li class='has-sub '><a href='#'><span>Services</span></a>
      <ul>
         <li class='has-sub '><a href='4wdtraining.php'><span>4WD Training</span></a>
            <ul>
               <li><a href='basictraining.php'><span>Basic</span></a></li>
               <li><a href='intermediatetraining.php'><span>Intermediate</span></a></li>
               <li><a href='advancedtraining.php'><span>Advanced</span></a></li>
               <li><a href='nightdriving.php'><span>Night Driving</span></a></li>
               <li><a href='recovery.php'><span>Recovery</span></a></li>
               <li><a href='custompackages.php'><span>Custom Packages</span></a></li>
            </ul>
            <!-- THIS IS THE FIX --> <div class="hack"></div> <!-- end FIX -->
         </li>
         <li><a href='bushmechanic.php'><span>Bush Mechanic</span></a></li>
      </ul>
   </li>
   <li><a href='estore.php'><span>eStore</span></a></li>
   <li><a href='gallery.php'><span>Gallery</span></a></li>
   <li><a href='#'><span>Contact</span></a></li>
</ul>
</div> 
```

只有 2 位 css：

```
#cssmenu ul ul > li:hover > ul { opacity: 1; left: 196px; visibility: visible;}
#cssmenu ul ul ul {
   z-index: 5;
} 
```

祝你好运 ！

# api - 从 Etsy 商店获取所有列表图像

> ID：11596917
> 
> 赞同：11
> 
> 时间：2012-07-22T00:35:34.803
> 
> 标签：api, etsy

**情况**

我一直在 Etsy 沙盒 API 中使用工具，试图为想要在所有 Etsy 列表中显示默认图像和标题的客户找出解决方案。单击后，他们希望它引导他们离开网站并进入该 Esty 列表的页面。

现在，弄清楚如何获取他们所有列表的名称和 url 很容易，并且可以在一个公共 API 调用中完成：

> [http://openapi.etsy.com/v2/shops/:shop_id/listings/active?method=GET&api_key=:api_key](http://openapi.etsy.com/v2/shops/:shop_id/listings/active?method=GET&api_key=:api_key)

此调用不仅会返回列表的名称和列表的 url，还会返回有关该特定项目的大量其他信息。我想我应该把我的电话限制在我需要的领域，但为了举例，我离题了......

最让我吃惊的是，我希望在其中找到的大量信息中没有包含的内容：与列表相关联的图像或**至少**是主图像。但是，我可以进行单独的 API 调用来获取单个列表的图像，但这需要获取 listing_id 并为每个项目进行单独的 API 调用。现在，这将我期望的对 Etsy API 的一次（或地狱，甚至两次）调用变成了 1 次以及您返回的许多项目。如果您在商店里销售 100 件商品，那么您只需几秒钟就可以调用 101 次 API！说我疯了，但我觉得必须有比我发现的更好的方法来做到这一点。

**问题**

进行 Etsy API 调用以返回商店中所有列表的所有图像（甚至主图像）的最简单方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-22T02:48:24.833

我最终使用以下代码将我需要的所有内容都包含在一个 API 调用中：

```
http://openapi.etsy.com/v2/shops/:shop_id/listings/active?method=GET&api_key=:api_key&fields=title,url&limit=100&includes=MainImage 
```

这样我定义了我的字段，所以我没有不必要的信息，但我也对结果设置了限制并用作`includes=MainImage`查询字符串。 [这是 Etsy 开发者社区成员的建议。](https://groups.google.com/forum/?fromgroups#!topic/etsy-api-v2/AiGFYOCRF7w)

# iphone - 后台 iOS 应用程序是否会收到显示器将要休眠的通知？

> ID：11596918
> 
> 赞同：3
> 
> 时间：2012-07-22T00:35:45.140
> 
> 标签：iphone, ios, cocoa

我的具体要求是一个在后台的应用程序，被通知显示器即将进入睡眠状态或者设备已经或即将达到它的空闲超时 - 然后醒来并执行一些（简短的）代码.

我在这里找到了有关应用程序被置于后台或暂停的通知的参考：http: [//developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

似乎有一种在 OSX 上检测的方法：http: [//developer.apple.com/library/mac/#qa/qa1340/_index.html](http://developer.apple.com/library/mac/#qa/qa1340/_index.html)

那么，后台 iOS 应用程序能否在它之前接收到显示器将要休眠并执行的通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T00:37:51.567

不，这在 iOS 上是不可能的。[我建议你在bugreport.apple.com](http://bugreport.apple.com)上提交一份错误报告并向他们解释你为什么需要这样的功能，尽管这并不能保证这样的事情会发生。但是，如果有更多人要求此功能，则它实现的可能性就越大。

# jdbc - ActiveRecord 与 Derby 如何设置 Derby 架构

> ID：11596929
> 
> 赞同：1
> 
> 时间：2012-07-22T00:38:29.293
> 
> 标签：jdbc, jruby, derby, jrubyonrails

请参阅下面的“更新”，了解我现在知道的问题的症结所在。

我有一个遗留的 Derby 数据库，我想制作一个 Rails 应用程序与之交互。
我正在使用 RVM，所以这里是我采取的步骤：

```
1\. rvm install jruby (installed 1.6.7.2)

2\. rvm use jruby

3\. gem install rails 

4\. rails new myapp

5\. add "gem 'activerecord-jdbcderby-adapter'" to Gemfile of new rails app

6\. bundle

7\. copied my derby db folder (named 'perm') under db in the rails app

8\. changed database.yml as follows:

  development:
    adapter: jdbcderby
    database: db/perm 
```

然后我制作了一个模型文件并使用 set_table_name 将其设置为一个表名，当我运行 rails c 时，我得到一个表不存在的异常。

当我这样做时也在控制台中

```
ActiveRecord::Base.connection.tables 
```

返回的唯一表是“schema_migrations”。

我知道数据库没有任何问题，因为我可以连接到这个确切的副本并使用 SquirrelSQL 查看所有表。此外，rails 应用程序正在以某种方式连接，因为当我打开控制台时，我无法在控制台运行时使用 SquirrelSQL 连接到同一个实例，反之亦然。

有人对为什么活动记录看不到表格有任何建议吗？

更新：

该问题与 derby 如何将表“组织”成同一文件中的多个“模式”有关。当我从rails（即迁移）创建一个新表时，该表最终以“SA”模式结束。我所有的旧表都在“APP”模式中（也许我可以移动它们，但如果可以避免的话，我不想这样做......其他应用程序会中断）。因此，当我以这种方式从 rails 访问数据库时，就好像只存在“SA”模式。我如何告诉 Rails '使用'“应用程序”模式（早期我尝试在表名前加上前缀但没有用）？

我相应地重新命名了这个问题。

更新#2：

显然 jdbcderby gem 支持“模式”设置。猜测我尝试将我的 database.yml 更改为以下内容：

```
development:
  adapter: jdbcderby
  database: db/perm
  schema: app (also tried APP) 
```

当我在控制台中执行 ActiveRecord::Base.connection.tables 时拥有应用程序（或 APP）架构设置时，我会从应用程序架构中获取表列表（该列表显示的表名全部小写，没有架构名）。

但我仍然无法访问表格。当我在现有表上创建模型文件并尝试访问它时，我收到 JDBCError：“Schema 'SA' 不存在”。我尝试了各种 set_table_name 调用，但均未成功。

据我所知，我的数据库没有什么异常。但是没有任何关于如何做到这一点的信息。我是世界上唯一一个曾尝试将旧版 Derby 数据库与 Rails 一起使用的人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:19:59.527

数据库名称“db/perm”是相对于您当前的工作目录进行解释的，这可能不是您认为的目录。尝试 (1) 在硬盘上搜索文件“derby.log”，该文件可能是在 Rails 应用程序的**实际**当前工作目录中创建的，或者 (2) 指定 derby 数据库的绝对文件路径，而不是相对文件路径。

如果问题是架构，Derby 支持 SET SCHEMA 语句：[http ://db.apache.org/derby/docs/10.8/ref/rrefsqlj32268.html](http://db.apache.org/derby/docs/10.8/ref/rrefsqlj32268.html)

如果您没有显式设置架构，则默认为您连接的用户名，因此您也可以通过以所需用户名登录来间接设置架构。

# mysqli - mysqli 无法调用存储过程

> ID：11596930
> 
> 赞同：0
> 
> 时间：2012-07-22T00:38:31.297
> 
> 标签：mysqli, procedure

程序

```
delimiter $$
drop procedure if exists db1.test;
create procedure db1.test()
deterministic
begin
    select * from table1;
end$$
delimiter ; 
```

php代码：

```
$conn = new mysqli('localhost','username','passwd','db1');
$query1 = 'select * from table1';
$query2 = 'call test()'; 
```

然后`$conn->query($query1)`在`$conn->query($query2)`返回 bool(false) 时工作​​。但是在 mysql 中，query1 和 query2 都可以工作。

我在这里错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:53:41.417

您确定正在创建程序吗？MySQL Workbench 和 phpMyAdmin 都告诉我 select * from table 中有语法错误；--- 可能是因为 table 是保留字？这在 MySQL Workbench 中有效：

```
USE `db1`;
DROP procedure IF EXISTS `test`;
DELIMITER $$
USE `db1`$$
CREATE PROCEDURE `db1`.`test` ()
BEGIN
    select * from `table`;
END
$$

DELIMITER ; 
```

请注意在表格中添加了反引号。在我的系统上进行该更改后， $query2 成功但 $query1 失败（当然，无论是否更改过程）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:03:34.543

好的，如果不是语法，可能是权限。您是否为此数据库授予用户执行权限？

编辑：

这是执行此操作的 SQL：

```
GRANT EXECUTE ON `db1` . * TO 'user'@'localhost'; 
```

（即使用户拥有在存储过程中作为单独查询执行 SQL 所需的所有权限，您仍然需要 EXECUTE 权限才能实际调用该过程。）

# knockout.js - 如何扩展淘汰赛 observables 以从绑定中读取默认值？

> ID：11596933
> 
> 赞同：17
> 
> 时间：2012-07-22T00:39:25.767
> 
> 标签：knockout.js, asp.net-mvc-4

我终于有时间在构建新的 MVC4 应用程序时开始学习 KnockoutJS。我试图找出从视图中已设置的默认值初始化可观察值的最佳方法。

这是一个人为的示例，但我想将 observable 的默认值直接呈现给视图，如下所示：

```
<input type="hidden" 
       value="@Model.SomeValue"
       data-bind="value: myObservableReference"/> 
```

我知道默认值通常通过以下方式初始化：

```
model.myObservableReference = ko.obervable("SomeValue"); 
```

但是，我想找到一种方法来扩展初始化，这样：

```
model.myObservableReference = ko.obervable(); 
```

如果值存在，将从绑定中读取现有值。

到目前为止，我已经设法让我的 KnockoutJS 代码完全不了解剃刀世界，我想避免以下马虎：

```
model.myObservableReference = ko.obervable(@Model.SomeValue); 
```

我猜这将通过扩展器或自定义活页夹来处理，但如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-22T01:16:18.640

您可以尝试创建自己的自定义绑定处理程序来实现这一点：

```
ko.bindingHandlers.initializeValue = {
    init: function(element, valueAccessor) {
        valueAccessor()(element.getAttribute('value'));
    },
    update: function(element, valueAccessor) {
        var value = valueAccessor();
        element.setAttribute('value', ko.utils.unwrapObservable(value))
    }
};

<input type="hidden" value="@Model.SomeValue"
       data-bind="initializeValue:myObservableReference, value: myObservableReference"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T15:50:43.600

对于您的 googlers，这里是将 initializeValue 绑定扩展到选择框和输入框的代码

```
ko.bindingHandlers.initializeValue = {
    init: function(element, valueAccessor) {
        if (element.getAttribute('value')) {
            valueAccessor()(element.getAttribute('value'));
        } else if (element.tagName === 'SELECT') {
            valueAccessor()(element.options[element.selectedIndex].value);
        }
    },
    update: function(element, valueAccessor) {
        var value = valueAccessor();
        element.setAttribute('value', ko.utils.unwrapObservable(value));
    }
} 
```

**注意：initializeValue 绑定应该出现在您选择的数据绑定属性中的值绑定之前，否则它将不起作用。**

```
<select data-bind='initializeValue: layout_id, value: layout_id, options: layouts, optionsText: "text", optionsValue: "id"'></select> 
```

# ruby-on-rails - 从回形针获取完整的图片网址

> ID：11596938
> 
> 赞同：0
> 
> 时间：2012-07-22T00:40:49.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我正在尝试为我正在制作的应用程序制作一个 API，并且我正在使用回形针 gem 将图像上传到 S3。

在管理方面一切都很好，但是对于 api，我想尽可能有效地返回结果，将回形针图像 url 加入每个测验。

我有一个图标模型（这显然是使用回形针的地方）和一个测验模型。一个测验属于一个图标。

这是我返回所有已发布测验的 API 方法

```
def quizzes
    @quizzes = Quiz.published.joins('INNER JOIN icons ON icons.id = quizzes.icon_id').select('icons.image_file_name, quizzes.updated_at, quizzes.description, quizzes.id, quizzes.title')

    respond_to do |format|
        format.json { render :json => @quizzes }
        format.xml { render :xml => @quizzes }
    end
end 
```

这只会给我图像名称，而不是图像的完整网址，例如。只是`love.png`代替`http://s3.amazonaws.com/myapp-dev/icons/images/000/000/001/original/love.png?1342586714`

如何获得完整的网址？它没有存储在我可以看到的 Icon 模型的任何字段中？

- - 编辑 - -

这是返回的记录之一在 xml 中的样子

```
<quiz>
  <description>Voluptatem inventore voluptatibus provident et officia. Consequatur voluptate alias. Laboriosam sit et. Non ea aut doloremque odit officiis. Unde mollitia asperiores omnis eaque at.</description>
  <id type="integer">5</id>
  <image-file-name type="NilClass">love.png</image-file-name>
  <title>Corrupti ea qui veniam et praesentium.</title>
  <updated-at type="datetime">2012-07-21T23:26:48Z</updated-at>
</quiz> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:01:12.580

我认为您可以使用其他模型方法作为参数显式调用转换：

```
format.json { render @quizzes.to_json(:methods => :icon_url) }
format.xml { render @quizzes.to_xml(:methods => :icon_url) } 
```

您需要在 Quiz 模型中定义的 icon_url 这样做：

```
def icon_url
  icon.url
end 
```

# jquery - 如何获得包含最少孩子的父母？

> ID：11596939
> 
> 赞同：2
> 
> 时间：2012-07-22T00:41:37.477
> 
> 标签：jquery, dom

我们有两个相邻的容器，里面有容器。

```
<ul class="containers">
    <li>Matt</li>
    <li>John</li>
    <li>Mark</li>
</ul>
<ul class="containers">
    <li>Roger</li>
    <li>Bill</li>
    <li>Lara</li>
    <li>Miriam</li>
    <li>Dylan</li>
    <li>Harry</li>
</ul> 
```

什么是最**优化**的方法，用于理解和检索“容器”，其中的孩子最少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T00:49:05.400

```
var $el = $('ul.containers:first');

$('ul.containers').each(function(){
  if( $(this).children().length < $(this).next('ul.containers').children().length ){
    $el = $(this);
  }
});

console.log( $el ); //$el is now the parent with the least children. 
```

或者在以下情况下使用单行稍短的版本：

```
var $el = $('ul.containers:first');

$('ul.containers').each(function(){
  $el = $(this).children().length < $(this).next('ul.containers').children().length ? $(this) : $el ;
});

console.log( $el ); //$el is now the parent with the least children. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T00:59:39.420

避免不必要的闭包并使用 for 循环进行迭代，这应该可以很好地执行。我很确定这个解决方案比 Moin Zaman 的代码更快。虽然不那么漂亮 - 取决于您是否需要最高性能。

```
var containers = $('.containers');
var least_children = null;
var smallest_container = null;

for(var i = 0; i < containers.length; i++)
{
    var container = containers[i];

    if(least_children === null)
    {
        least_children = container.childElementCount;
        smallest_container = container;
    }
    else if(container.childElementCount < least_children)
    {
        least_children = container.childElementCount;
        smallest_container = container;
    }
};

// smallest_container now contains the UL with the least children as a
// HTMLElement 
```

在 JSFiddle：http: [//jsfiddle.net/BXnnL/3/](http://jsfiddle.net/BXnnL/3/)

# matlab - 如何使用（或不使用）LibSVM 执行支持向量回归

> ID：11596942
> 
> 赞同：0
> 
> 时间：2012-07-22T00:41:49.953
> 
> 标签：matlab, vector, regression, libsvm

我正在写一篇需要应用支持向量回归 (SVR) 的论文，最好使用高斯核。经过一番搜索，我发现 LibSVM 可以帮助完成这项任务。

但是，我面临很多困难：我不确定如何使用这个或任何其他类似的库，如何凭经验确定 SVR 参数（内核带宽、成本和 epsilon（松弛变量）），如以及如何绘制训练和测试错误。

欢迎所有建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T01:03:17.937

最佳参数将取决于您的数据。您最好的（也许是唯一的）选择是连续尝试多个参数集，并根据您选择的任何指标查看哪个参数集为您提供最佳性能。

至于绘制训练和测试错误 - 评估分类器的一个好方法是使用 F 度量作为性能指标。这使您可以同时考虑误报和误报错误，并根据您的特定域对它们进行加权。如果您通过绘制训练和测试错误来表示其他意思，请澄清。

编辑：回应您的评论

LibSVM 也不知道如何优化它自己的参数——这就是为什么你需要为它提供参数作为 svm_train 函数的参数。您需要通过实验优化自己的参数，为此您需要对性能进行一些单一的定量测量。我不确定你所说的 30 值问题是什么意思，但你应该能够通过创造性地重新定义真阳性、假阳性、真阴性和假阴性来使用 F 度量。

您有两种选择：一种更全面，另一种计算成本更低。您可以使用三层嵌套循环来测试 gamma、C 和 epsilon 的各种可能组合，选择导致测试数据性能最高的参数（我建议使用交叉验证以避免过度拟合特定测试数据），或者您可以连续优化每个 - 首先，给定一些平淡无奇的默认 C 和 epsilon，遍历许多伽马值，直到找到最佳值；然后对 C 和 epsilon 执行相同的操作。

如果要增强第二种方法，请使其在优化每个参数时，对所有其他参数使用最佳值而不是某些默认值，并多次优化每个参数（以便它们可以连续运行其他参数中的更好值）。

为了使任一方法更精确（尽管总是以潜在的过度拟合为代价，请记住这一点），请使用伸缩搜索 - 假设您第一次从 1 搜索到 101，步长为 10，因此您搜索 1、11 , 21...101\. 在您获得最佳值（假设为 51）之后的下一次运行中，搜索 46、47、48、49、50、51、52、53、54、55、56，以便您重复使用相同的信息，但变得更加精确。

为了使这两种方法对随机波动不那么敏感（比如在您为交叉验证生成的随机折叠中），使用默认参数运行多个交叉验证测试（我想说，好的默认值可能是 C 的 1.0，并且1E-9 对于 epsilon，我不确定 gamma）并获得您使用的性能测量的平均值和标准差。然后，您可以判断给定的性能度量在统计上是否明显优于次优，或者仅使用默认参数。

# lightbox - 灯箱显示页面末尾的加载框

> ID：11596943
> 
> 赞同：3
> 
> 时间：2012-07-22T00:42:22.327
> 
> 标签：lightbox

我是第一次使用 Lightbox，它适用于我的图像。但是，由于某种原因，我在页面末尾出现了一个显示加载图标的奇怪框，即使那里不应该有图像。

图片：http: [//i.imgur.com/ACImB.png](http://i.imgur.com/ACImB.png)

检查元素后，我得到以下 HTML 代码。

```
<div id="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image"><div class="lb-nav"><a class="lb-prev"></a><a class="lb-next"></a></div><div class="lb-loader"><a class="lb-cancel"><img src="/z/styles/images/loading.gif"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"><img src="/z/styles/images/close.png"></a></div></div></div></div> 
```

这段代码的奇怪之处在于我没有制作那个 div，它似乎只是被脚本插入的。有谁知道这可能是什么以及如何摆脱它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T02:12:07.390

这很容易成为您的 css 或脚本路径的问题。

如果您查看 lightbox2 演示，它会显示您看到的加载页面，然后将其删除以显示加载的图像。当 javascript 或样式表未正确链接时，它将无法正常工作。

Lightbox2 网站： http: [//lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)

您可以尝试使用（在 chrome 中，对于 firefox 有 firebug）右键单击检查元素，转到资源选项卡并展开框架框，直到您在列表中看到所有图像、脚本和样式表。如果找不到其中之一，它会通知您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-03T11:24:16.633

当我将 Lightbox 与 MVC 站点集成时，我遇到了同样的问题。问题是我同时提到了`lightbox.js`和`lightbox.min.js`文件。我通过删除一个引用解决了这个问题。

# iphone - 如何合并两个 mp3 文件 iOS？

> ID：11596945
> 
> 赞同：3
> 
> 时间：2012-07-22T00:42:50.093
> 
> 标签：iphone, objective-c, ios, ipad, audio

我的应用程序中有一个用户录音和另一个 mp3 文件，我希望用户能够将这两个文件作为一个文件导出，这意味着这两个文件将以某种方式合并或相互叠加。

如果不理解，两个 mp3 文件将同时播放，就像用户可以通过乐器录制歌曲的任何应用程序一样。

录音和乐器是两个独立的 mp3 文件，需要作为一个文件导出。

我该怎么做呢？根据我的阅读，我找不到解决方案。我在连接两个音频文件时看到了很多，但我不希望它们一个接一个地播放，而是同时播放。

谢谢。

编辑：我知道这已经很晚了，但如果有人偶然发现并正在寻找示例代码，我的答案在这里：[如何在 Xcode 中重叠音频文件并为 iPhone 组合？](https://stackoverflow.com/questions/12628554/how-can-i-overlap-audio-files-and-combine-for-iphone-in-xcode/12630437#12630437)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T04:44:11.600

如果我猜对了，您是在要求音频混音器功能。这不是一项微不足道的任务。看看[核心音频](http://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/CoreAudioOverview/WhatisCoreAudio/WhatisCoreAudio.html)。一本好书就是[这本](https://rads.stackoverflow.com/amzn/click/com/0321636848)。一种解决方案是创建一个无 GUI 的音频单元（混音器单元），它可以播放、混合和渲染两种信号（mp3）。

除了编程方面，这里还有一个音频工程方面：您应该注意信号的电平。想象一下，您有 2 个相同的 0dB 级别的 mp3。如果你把它们加起来，你的水平将是+3dB。这在数字世界中不存在（最大为 0dB）。因此，您必须在混音前降低输入电平。

编辑：抱歉输入迟了，但也许这对未来的人有帮助：[Apple 有一个](http://developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010210)我刚刚偶然发现的音频混合器的例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-12T18:02:01.170

如果你在 2016 年阅读这篇文章，并且正在寻找 swift 2.x 中的解决方案——我知道了。我的解决方案实现了一个闭包以在写入后返回输出文件，以避免立即读取零字节的文件，因为操作是异步的。这尤其适用于通过使用第一个轨道的持续时间作为总输出持续时间来重叠两个音轨。

```
func setUpAndAddAudioAtPath(assetURL: NSURL, toComposition composition: AVMutableComposition, duration: CMTime) {
let songAsset: AVURLAsset = AVURLAsset(URL: assetURL, options: nil)
let track: AVMutableCompositionTrack = composition.addMutableTrackWithMediaType(AVMediaTypeAudio, preferredTrackID: kCMPersistentTrackID_Invalid)
let sourceAudioTrack: AVAssetTrack = songAsset.tracksWithMediaType(AVMediaTypeAudio)[0]
var error: NSError? = nil
var ok: Bool = false
let startTime: CMTime = CMTimeMakeWithSeconds(0, 1)
let trackDuration: CMTime = songAsset.duration
//CMTime longestTime = CMTimeMake(848896, 44100); //(19.24 seconds)
let tRange: CMTimeRange = CMTimeRangeMake(startTime, duration)
//Set Volume
let trackMix: AVMutableAudioMixInputParameters = AVMutableAudioMixInputParameters(track: track)
trackMix.setVolume(1.0, atTime: kCMTimeZero)
audioMixParams.append(trackMix)

//Insert audio into track
try! track.insertTimeRange(tRange, ofTrack: sourceAudioTrack, atTime: CMTimeMake(0, 44100))}

func saveRecording(audio1: NSURL, audio2:  NSURL, callback: (url: NSURL?, error: NSError?)->()) {
let composition: AVMutableComposition = AVMutableComposition()

//Add Audio Tracks to Composition
let avAsset1 = AVURLAsset(URL: audio1, options: nil)
var track1 =  avAsset1.tracksWithMediaType(AVMediaTypeAudio)
let assetTrack1:AVAssetTrack = track1[0]
let duration: CMTime = assetTrack1.timeRange.duration
setUpAndAddAudioAtPath(audio1, toComposition: composition, duration: duration)
setUpAndAddAudioAtPath(audio2, toComposition: composition, duration: duration)

let audioMix: AVMutableAudioMix = AVMutableAudioMix()
audioMix.inputParameters = audioMixParams
//If you need to query what formats you can export to, here's a way to find out
NSLog("compatible presets for songAsset: %@", AVAssetExportSession.exportPresetsCompatibleWithAsset(composition))

let format = NSDateFormatter()
format.dateFormat="yyyy-MM-dd-HH-mm-ss"
let currentFileName = "recording-\(format.stringFromDate(NSDate()))-merge.m4a"

let documentsDirectory = NSFileManager.defaultManager().URLsForDirectory(.DocumentDirectory, inDomains: .UserDomainMask)[0]
let outputUrl = documentsDirectory.URLByAppendingPathComponent(currentFileName)

let assetExport = AVAssetExportSession(asset: composition, presetName: AVAssetExportPresetAppleM4A)
assetExport!.outputFileType = AVFileTypeAppleM4A
assetExport!.outputURL = outputUrl
assetExport!.exportAsynchronouslyWithCompletionHandler({
    audioMixParams.removeAll()
    switch assetExport!.status{
    case  AVAssetExportSessionStatus.Failed:
        print("failed \(assetExport!.error)")
        callback(url: nil, error: assetExport!.error)
    case AVAssetExportSessionStatus.Cancelled:
        print("cancelled \(assetExport!.error)")
        callback(url: nil, error: assetExport!.error)
    default:
        print("complete")
        callback(url: outputUrl, error: nil)
    }

})           } 
```

# ruby-on-rails - 使用 Elasticsearch 和 Tire 的灵活模型

> ID：11596946
> 
> 赞同：0
> 
> 时间：2012-07-22T00:42:57.123
> 
> 标签：ruby-on-rails, elasticsearch, tire

在 Rails 应用程序中，我希望能够存储无模式对象——JSON 数据结构，它可以在对象之间具有不同的结构，或者在不同时间对于相同的对象。

使用 ElasticSearch，我可以做到这一点。但是，我想为此使用某种带有 Rails 的 ORM。

尝试使用轮胎教程进行一些测试，在 Rails 控制台中执行此操作：

```
>>> c = Article.new :title =>'New article', :content => { :a => 'a', :b => 'b'} 
```

我可以看到存储为序列化 YAML 的内容数据：

```
>> Article.last.content
=> "---\n:a: a\n:b: b\n" 
```

这将需要将搜索结果解析为 JSON，这不是问题。但主要问题是：我能否在序列化数据中进行搜索？有没有办法从任意结构化数据（如 Object.keys）中返回属性名称？

如果不是轮胎，是否有其他解决方案可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:25:28.510

不太确定你在这里做什么，但轮胎确实`include Tire::Model::Persistence`在你的课堂上提供了一个替代 ActiveRecord 集成的插件。您还可以定义属性（使用映射、类型转换、默认值等）：

```
class Article

  include Tire::Model::Persistence

  property :title
  property :published_on, type: 'date'
  property :tags,         analyzer: 'keyword', default: []

end 
```

*轮胎*自述文件和集成[测试](https://github.com/karmi/tire/blob/master/test/models/persistent_article_with_casting.rb)包含所有信息。

当然，您可以在`content`属性内部进行搜索——这只是正确映射的问题。

如果您有某些特定行为，请更新您的问题...

# c++ - 简单的引用变量赋值导致指向对象的全局指针中的段错误？

> ID：11596948
> 
> 赞同：0
> 
> 时间：2012-07-22T00:44:00.000
> 
> 标签：c++, vector, segmentation-fault, global-variables, pass-by-reference

我的 .cpp 文件的第 15 行出现段错误。我不确定为什么。各种代码片段：explosionhandler.h：

```
 class explosionhandler {
        public:
    struct explosion {
    ...
    };
    vector<struct explosion> explosions;
    struct explosion_type {
    ...
    };
    vector<struct explosion_type> type;
    int num_types;

    explosionhandler();
    ~explosionhandler();
    void registerexplosion(int& ttype,ALLEGRO_BITMAP*& b,int seq, float a, float m,float e);

    void createexplosion(int ttype,float x,float y);
    void drawexplosions(ALLEGRO_BITMAP* screen);

    void gettype(explosion_type& a,ALLEGRO_BITMAP*& b,int& nseq, float& aa, float& ee, float& mm);

        };#endif 
```

爆炸处理程序.cpp：

```
 explosionhandler::explosionhandler()
    {
        num_types=0;
    }
    void explosionhandler::registerexplosion(int& ttype,ALLEGRO_BITMAP*& b,int seq, float a, float m,float e)
    {
        explosion_type n;
        ....
        ttype = num_types;     /*********** right here *******************/
        num_types++;
        type.push_back(n);
    } 
```

爆炸处理程序作为指向对象火箭的指针传递：

火箭.h：

```
...
class explosionhandler;
class rocket {
public:
        ...
        void setrocket(ALLEGRO_BITMAP*& a,ALLEGRO_BITMAP*& b, explosionhandler*& h);
        ...
        int exptype;
        ...
}; #endif 
```

火箭.cpp：

```
rocket::rocket()
{
        ...
        exptype=-1;
}
void rocket::setrocket(ALLEGRO_BITMAP*& a,ALLEGRO_BITMAP*& b, explosionhandler*& h)
{
    handler = h;
    area.sethitboundaries(a);
    fprintf(stdout,"setrocket, # of rockets in vector: %i\n",(int)rockets.size());
h->registerexplosion(exptype,b,3,(float)al_get_bitmap_width(b),(float)0,(float)-18); //called function
} 
```

最后是 main.cpp（缩写）：

```
#include "rocket.h"
#include "explosionhandler.h"
#include <allegro5/allegro.h>
#include <allegro5/allegro_image.h>
#include <stdio.h>
#include <cstdlib>
#define PI 3.14159265
...
rocket rock(bullet_speed+2,width,height);
explosionhandler *handler;
...
int setup()
{
        ...
        rock.setrocket(rk,exp,handler);
        rock.setlimit(5);
        al_set_target_bitmap(al_get_backbuffer(display));
        ...
}
... 
```

好的，是的，现在很清楚问题是处理程序没有初始化。哎呀。

当然，explosionhandler 是 main.cpp 中的指针，rocket 是 main.cpp 中声明的对象，两者都是全局变量。

祝福我的小菜鸟心，我不知道我在做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T00:55:01.833

我的心理感觉告诉我，您使用`rocket::setrocket`NULL 指针作为参数进行调用`h`（或者更具体地说，是对 NULL 指针的引用），然后您调用`h->registerexplosion()`的是 NULL 指针。

不要那样做。而是传入一个有效的指针，或者分配一个新对象（确保稍后正确删除它）。

# php - MySQL事务 - 查询更改数据库而不提交？

> ID：11596950
> 
> 赞同：3
> 
> 时间：2012-07-22T00:44:51.143
> 
> 标签：php, mysql

我正在尝试执行一系列不同的查询。简而言之，我需要它们全部成功执行，或者我不需要它们都执行。

目前，我做

```
mysql_query("SET autocommit=0;");
mysql_query("BEGIN;");
mysql_query("QUERY A");
if(mysql_error()){
    mysql_query("rollback;");
    die();
}
mysql_query("QUERY B");
if(mysql_error()){
    mysql_query("rollback;");
    die();
}else{
    mysql_query("commit;");
 } 
```

问题是，如果我强制查询 B 失败，我在 phpmyadmin 中查看数据库时仍然可以看到查询 A 的结果。当然不应该将查询结果添加到数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:01:43.360

问题是您使用的是 MyISAM。
从 的输出可以看出`SHOW ENGINES`。

MyISAM 不支持事务，也不支持外键约束。
您需要将 MySQL 版本升级到支持 InnoDB 的版本。
这将解决您的问题。

我猜您的 ISP 没有帮助您，也许客户支持可以提供帮助。

# ruby - 升级ruby后无法连接redis

> ID：11596956
> 
> 赞同：0
> 
> 时间：2012-07-22T00:46:38.847
> 
> 标签：ruby, redis

我正在尝试将我的应用程序升级到 Mongoid 3 和 ruby​​ 1.9.3。我之前在 1.9.2 上。我的应用程序还使用 Redis 作为临时数据存储。没有发生任何代码更改，这在之前运行良好......现在当我运行连接到 Redis 的任务时出现以下错误：

```
Can't assign requested address - connect(2)
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis/connection/ruby.rb:113:in `connect_nonblock'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis/connection/ruby.rb:113:in `connect'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis/connection/ruby.rb:170:in `connect'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis/client.rb:257:in `establish_connection'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis/client.rb:63:in `connect'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis/client.rb:276:in `ensure_connected'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis/client.rb:167:in `block in process'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis/client.rb:242:in `logging'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis/client.rb:166:in `process'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis/client.rb:78:in `call'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis.rb:912:in `block in rpop'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis.rb:36:in `block in synchronize'
/Users/kevin/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis.rb:36:in `synchronize'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/redis-3.0.1/lib/redis.rb:911:in `rpop'
/Users/kevin/myapp/app/models/tweet.rb:34:in `block (3 levels) in load_from'
/Users/kevin/myapp/app/models/tweet.rb:33:in `times'
/Users/kevin/myapp/app/models/tweet.rb:33:in `block (2 levels) in load_from'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0.rc.4/lib/eventmachine.rb:959:in `call'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0.rc.4/lib/eventmachine.rb:959:in `block in run_deferred_callbacks'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0.rc.4/lib/eventmachine.rb:956:in `times'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0.rc.4/lib/eventmachine.rb:956:in `run_deferred_callbacks'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0.rc.4/lib/eventmachine.rb:187:in `run_machine'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/eventmachine-1.0.0.rc.4/lib/eventmachine.rb:187:in `run'
/Users/kevin/myapp/app/models/tweet.rb:30:in `load_from'
/Users/kevin/myapp/lib/tasks/tweet.rake:11:in `block (2 levels) in <top (required)>'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/kevin/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/kevin/myapp/.bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/kevin/myapp/.bundle/ruby/1.9.1/bin/rake:23:in `load'
/Users/kevin/myapp/.bundle/ruby/1.9.1/bin/rake:23:in `<main>'
Tasks: TOP => tweet:load 
```

我的 Redis 正在运行，我检查了端口号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:53:43.437

您使用的是 Redis 3.0.1 吗？尝试使用 Redis 2.2.2

# java - Linux (Ubuntu 12.04) 获得可怕的多线程性能？

> ID：11596958
> 
> 赞同：1
> 
> 时间：2012-07-22T00:46:57.103
> 
> 标签：java, multithreading, ubuntu-12.04

我有一个正在开发的多线程文件转换器。在 Windows 上，它将每个正在转换的文件放在自己的线程中，并始终使用 100% 的 CPU（在所有内核上）。这很棒！在 Ubuntu 上，我在第一个内核上得到 100%，在其余所有内核上得到约 10%。表现很差，令人失望。

我在 SwingWorker 中使用线程，所以我不会冻结 GUI。我在所有线程上使用 thread.join，所以当所有线程都完成时我执行某个任务。我没有更改操作系统之间的代码。有没有可行的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:58:45.693

这是非常愚蠢的，我不太明白为什么，但在我发布后不久，我将所有文件转移到我的 Ubuntu 分区，它和 Windows 一样快（如果不是更快的话）。不知道为什么移动文件会使它运行得更快？也许我真正的问题是，由于它们位于不同的文件系统上，我的瓶颈是 I/O。仅从 NTFS 分区转换一个文件所用的时间是我将其移动到 ext4 分区时的 3 倍。（是的，这些都在同一个 SSD 上）

# c++ - 使用单个 Boost 库进行编译，无需安装 Boost

> ID：11596959
> 
> 赞同：5
> 
> 时间：2012-07-22T00:47:10.193
> 
> 标签：c++, boost, c++11, installation, portability

我正在实现一些我希望尽可能便携的 C++ 代码。我想*避免*依赖需要 root 访问权限才能安装的库。此外，我宁愿避免在我的存储库中保留大型库的副本，并且我也不希望对库进行用户级安装（仅仅是因为我必须在多台计算机上手动安装它们。）

我想`normal_distribution`在我的项目中使用 Boost 的功能。我了解安装 Boost 的典型方法需要一个`sudo apt-get`或`sudo yum`类型的命令，但我在运行此代码的系统上没有 root 访问权限。为了解决这个问题，我想知道是否可以简单地将 Boost 的[normal_distribution.cpp](http://www.boost.org/doc/libs/1_50_0/doc/html/boost/random/normal_distribution.html)和[normal_distribution.hpp](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_random/reference.html#header.boost.random.normal_distribution_hpp)的副本放在我的代码目录中，然后用这些文件编译/链接我的代码。这行得通吗？

读者可能想知道为什么我不只是使用`normal_distribution`TR1 或 C++11 中的实现。答案是我需要与一些仍然运行 g++ 4.1.x 的大学管理的集群保持兼容性，这些集群（至少根据我的经验）不支持`<TR1/random>`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T00:59:34.983

我想[BCP（Boost Copy）](http://www.boost.org/tools/bcp/index.html)是根据您的情况准确编写的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T20:27:12.980

您应该查看[ryppl](http://www.ryppl.org)项目，因为这正是它希望实现的目标。如果你点击 github 的链接，你会发现模块化的 boost，然后你可以从那里继续尝试完整的 ryppl 安装。无论如何，有一个中途的房子，那就是[模块化的 boost](https://svn.boost.org/trac/boost/wiki/CMakeModularizationStatus)。还有一个模块化的 boost/cmake 使其更简单。这是 ryppl 寻求提升的方向，它应该非常有帮助。我能看到的唯一缺点是零安装安装程序倾向于使用 python 脚本。

如前所述，BCP 也是为此目的而开发的，因此有一个选择。请注意，尽管 boost 正在经历 svn->git 更改，这似乎正在影响某些结构，这反映在与当前模块化 boost 的一些不一致之处，但我不确定这如何/是否会影响 BCP，因为我不知道系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T22:32:19.570

我在让 BCP 正常工作时遇到了一些麻烦。我[在这篇 StackOverflow 帖子中记录了与 BCP 相关的问题](https://stackoverflow.com/questions/11604285/boost-bcp-doesnt-output-any-files)。

在短期内，我只是`normal_distribution`在我的代码库中添加了一个函数。我把它从过去的几篇 StackOverflow 帖子中整理出来。这个实现没有做任何花哨的模板的东西，但它在其他方面看起来非常类似于`normal_distribution`.

```
#include "math.h"
double normal_distribution(double mean, double stdDev)
{
    //scale the number to appropriate distribution 
    return mean + (sampleNormal()*stdDev);
}

//get a number from normal distribution (mean=0, stdDev=1). 
double sampleNormal() {
    double u = ((double) rand() / (RAND_MAX)) * 2 - 1;
    double v = ((double) rand() / (RAND_MAX)) * 2 - 1;
    double r = u * u + v * v;
    if (r == 0 || r > 1) return sampleNormal(); //recursively re-generate number if doesn't meet criteria
    double c = sqrt(-2 * log(r) / r);
    return u * c;
} 
```

感谢[这个 StackOverflow 帖子](https://stackoverflow.com/questions/2325472/generate-random-numbers-following-a-normal-distribution-in-c-c)（用户 Pete855217）的`sampleNormal()`函数，感谢[这个](https://stackoverflow.com/questions/75677/converting-a-uniform-distribution-to-a-normal-distribution)StackOverflow 帖子（用户 5084）我命名的函数`normal_distribution()`。

# windows - Windows 是否会在启动时加载使用 OsrLoader 加载的驱动程序？

> ID：11596960
> 
> 赞同：0
> 
> 时间：2012-07-22T00:47:21.440
> 
> 标签：windows, drivers

我开始学习 Windows 驱动程序开发，并编写了我的第一个驱动程序。我使用[OsrLoader](http://www.osronline.com/article.cfm?article=157)加载和卸载驱动程序。到目前为止一切都很好。但是，众所周知，如果驱动程序崩溃，整个系统就会崩溃。可能发生的最糟糕的事情是 Windows 在系统启动时加载了那个有问题的驱动程序。

我的问题是，Windows 是否会在启动时加载使用 OsrLoader 加载的驱动程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T00:52:27.283

不，OsrLoader 只加载当前会话的驱动程序。它不会导致它在您下次重新启动时被加载。

# php - 逐步进行倒计时，不确定如何执行此操作

> ID：11596971
> 
> 赞同：0
> 
> 时间：2012-07-22T00:50:17.423
> 
> 标签：php

我已经有一个有点工作的倒计时脚本，已经定义了时间（使用新的 DateTime），但还没有弄清楚如何每天自动交换时间。

我希望每天在世界标准时间下午 5:10、5:50 和 6:15 进行倒计时。如果 5:10:00 过去，则将倒计时换成 5:50:00。如果是 6:16，那么明天会显示 5:10

我将如何对此进行比较？当我尝试在 > <

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T00:53:27.033

您可以比较它们的时间戳，而不是比较对象本身。例如：

```
if($dateTime1->getTimestamp() > $dateTime2->getTimestamp()) {
    // ...
} 
```

# asp.net - ssl 在第一次登录时获取 null 我的会话

> ID：11596978
> 
> 赞同：0
> 
> 时间：2012-07-22T00:51:04.087
> 
> 标签：asp.net, visual-studio-2010, c#-4.0, ssl, ssl-certificate

我的电子商务网站中有 ssl。起初，浏览器总是在所有页面中询问“您是否要显示此网站的内容”，当我重定向到 mycart 页面时，浏览器会显示相同的警报，例如“此网页包含不会使用安全 HTTPS 连接传递的内容，这可能包括整个网页的安全......是......不......”。单击“是”后，我的所有会话都为空。你对我有什么建议吗？

韩国,

恰格恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T03:06:22.297

问题是您的安全页面正在访问来自不安全页面的信息（脚本、图像等）。例如，如果您从不安全的站点（例如 Google）引用 javascript 文件（例如 jQuery），那么某些浏览器（例如 IE）将显示此消息。您需要搜索您的参考资料并找到这些。换句话说，搜索`src="http`或类似的东西会拉出不安全的引用。

根据您引用的内容，您可以将这些项目移动到您的站点，以便它们现在是“安全的”。此外，在某些情况下，将您的参考从 更改`src="http`为`src="https`可以解决问题。

解决此警报后，您可以再次检查是否有会话问题，因为您可能还有其他问题需要解决。

# javascript - 为什么 setTimeout 在 Chrome 中会触发两次，而不是 IE 或 Firefox？

> ID：11596982
> 
> 赞同：3
> 
> 时间：2012-07-22T00:52:12.750
> 
> 标签：javascript, google-chrome

有人能告诉我为什么 javascript 函数**“GenerateNewNumber”**在 Chrome 中触发两次，但不适用于 IE 或 Firefox？使用 Chrome 20.0.1132.57、IE9 和 Firefox 13。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" src="/App_JScript/jquery-1.4.4.min.js"></script>
    <script type="text/javascript" language="javascript">

        $(document).ready(function () {
            $('a#RandomNumber').click(function () { initiateNewNumber(); });
        });

        function initiateNewNumber() {

            setTimeout('GenerateNewNumber();', 3000);
        }

        function GenerateNewNumber() {
            var randomnumber = Math.floor(Math.random() * 1123);
            document.getElementById('RandomNumber').innerHTML += '<br>' + 'Random Number is ' + randomnumber;
        }
    </script>
</head>
<body>
    <a id="RandomNumber" href="#">Click for Random Number</a>
</body>
</html> 
```

我已经通过 Stackoverflow 进行了搜索，但找不到任何有用的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T01:05:44.400

setTimeout 需要一个函数作为第一个参数：

```
setTimeout(function() { GenerateNewNumber(); }, 3000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T01:07:53.643

尝试这个

window.setTimeout(GenerateNewNumber, 3000);

# php - 多列，一串

> ID：11596983
> 
> 赞同：0
> 
> 时间：2012-07-22T00:52:19.420
> 
> 标签：php, mysql, mysqli

好吧，好吧。我正在制作一个哈希/去哈希网站，用于哈希 MD5、SHA1、SHA512 等。在制作时，我决定做这个表结构：

```
hash_id int(11)
plain_text varchar(100)
hash_md5 varchar(32)    
hash_base64 varchar(500)
hash_sha1 varchar(50)   
hash_sha512 varchar(128)
hash_mysql varchar(50) 
```

在`Dehash()`我的课堂上创建函数时，我发现我不能只使用 OR OR OR OR OR “搜索”字符串而不会遇到性能问题，所以我问，是否有某种 MySQL 函数可以提供帮助我这样做没有性能问题？

另外，有了这个，另一个问题可能是我必须获取哈希所在的列名，例如：

如果我要使用 OR OR OR OR OR，我的查询将是：

```
$Query = $this->DB->prepare("SELECT plain_text, hash_md5, hash_base64, hash_sha1, hash_sha512, hash_mysql FROM hashes WHERE hash_md5 = ? OR hash_base64 = ? OR hash_sha1 = ? OR hash_sha512 = ? OR hash_mysql = ?");
$Query->bind_param("sssss", $Hash, $Hash, $Hash, $Hash, $Hash);
$Query->execute();
$Query->bind_result($pt,  $md5, $b64, $sha1, $sha512, $mysql);
$Query->fetch();
$Query->close(); 
```

但是你没看到这可能会造成多大的问题吗？当我这样做时，我还必须执行一个 if 语句来检查列是否包含哈希，如果是，那就是带有哈希的列，但是其他列会占用内存，使我的网站变慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T01:00:43.277

假设您在所有 hash_something 字段上都有索引，这应该很快

```
SELECT plain_text, 'md5' as hash_type,
FROM hashes WHERE hash_md5 = ?
UNION 
SELECT plain_text, 'sha1' as hash_type,
FROM hashes WHERE hash_sha1 = ?
UNION 
SELECT plain_text, 'sha512' as hash_type,
FROM hashes WHERE hash_sha512 = ?
UNION 
... 
```

如果您使用 OR-s 选择它，mysql 有时会将其优化为等效的东西，但不能保证

更好的方法是有一张像

```
CREATE TABLE `hashes` (
    `plaintext` VARCHAR(255) NOT NULL,
    `hash_type` VARCHAR(10) NOT NULL,
    `hash_value` VARCHAR(255) NOT NULL,
    PRIMARY KEY (`plaintext`, `hash_type`),
    INDEX `hash_value` (`hash_value`)
); 
```

# mysql - 查询返回错误的输出

> ID：11596987
> 
> 赞同：1
> 
> 时间：2012-07-22T00:53:14.110
> 
> 标签：mysql, sql

**表报价**

```
id_offer  offer   state    

600         A       0
629         B       0 
```

**标签**

```
id_tags     tags        

561         PHP
562         JAVA
589         MySQL
917         python 
```

**offer_has_tags**

```
offer_id_offer      tags_id_tags 
 600                    561     
 600                    562
 600                    917
 629                    562
 629                    589
 629                    917 
```

我需要的输出：

```
600     PHP
600     JAVA
600     python
629     JAVA
629     MySQL
629     python 
```

我正在尝试什么（没有成功）：

```
 SELECT A.id_offer, A.tags
    FROM 
      ( SELECT *
        FROM offer
        WHERE id_offer IN (600, 629)
        AND state = 0  
        ORDER BY date_post DESC
        LIMIT ?, ?
      ) A, tags A
    INNER JOIN offer_has_tags B
        ON A.id_tags = B.tags_id_tags
    INNER JOIN offer C
        ON C.id_offer = B.offer_id_offer
    GROUP BY id_tags 
```

任何的想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T01:13:13.193

试试这个

```
SELECT A.id_offer, t.tags
from 
  (Select * from offer o
    Where o.id_offer IN (600, 629)
    AND o.State=0
    ORDER BY ? DESC
    Limit ?,?) A
INNER JOIN offer_has_tags B
    ON A.id_offer = B.offer_id_offer
INNER JOIN tags t
    ON b.tags_id_tags = t.id_tags 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T01:02:43.417

使用旧 SQL 风格（但我认为更容易理解）：

```
 SELECT id_offer, tags.tags
   FROM tags,offer_has_tags,offer
  WHERE offer_id_offer = offer.id_offer
    AND tags_id_tags = id_tags
    AND id_offer IN (600, 629)
    AND state = 0
  GROUP BY id_offer, tags.tags
  ORDER BY date_post DESC 
```

有限制：

```
 SELECT A.id_offer, tags.tags
   FROM tags,( SELECT *
                 FROM offer
                WHERE id_offer IN (600, 629)
                  AND state = 0  
                ORDER BY date_post DESC
                LIMIT ?, ?
              ) A,offer_has_tags
  WHERE offer_id_offer = A.id_offer
    AND tags_id_tags = id_tags
  GROUP BY A.id_offer, tags.tags 
```

# javascript - Javascript 全局变量始终未定义 onmouseup

> ID：11596989
> 
> 赞同：2
> 
> 时间：2012-07-22T00:53:36.003
> 
> 标签：javascript, variables, undefined, global

我有几个全局变量被设置为`$(this)`在小 1 或 2 按钮的 mouseup 上。基于 mouseup 上全局变量的比较，我的代码应该做一些事情。当我单步执行 Firebug 中的代码时，变量被设置，然后当我单步执行几行时，我得到以下信息：

> ReferenceError: little_r 未定义。

我用一个`alert`来查看全局的值及其始终未定义。为什么全局变量不保存值？

[我在这里有一个演示](http://jsfiddle.net/froze1906/aSyUE/12/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T01:01:06.640

little_r （等）始终为 null 的原因是因为您已将 little_r 作为参数添加到：

```
$('.small_r').on(mouseup, function(evt, little_r) {
    alert (little_r);
if (little_r == null) { 
```

因此创建一个局部变量。当您尝试访问 little_r 时，您正在访问本地（未定义）版本。

我看不到您最终要实现的目标，但您的问题在于局部变量会影响您的全局版本

# html - 如何使用 CSS 和 JavaScript 构建动态菜单？

> ID：11596991
> 
> 赞同：3
> 
> 时间：2012-07-22T00:25:09.957
> 
> 标签：html, css, javascript, jquery

我正在为我的网球俱乐部建立一个网站，并且我一直在寻找各种俱乐部网站以获取一些灵感。

我之前已经阅读过一些关于我的问题的解决方案，但从未从网站管理员论坛获得具体建议。

我怎样才能实现类似的目标：

菜单：

```
 - Home
       - About the Club 
```

然后说用户点击“关于俱乐部”，菜单如下所示：

```
 - Home
       - About the Club
            Members
            Prices
            Tournaments 
```

我希望这足够清楚，如果不是，我可以提供一张图片来进一步解释我需要的结果。

Ps 我发誓这是可以实现的，仅使用 CSS 和 JavaScript（可能是像 JQuery 这样的框架）只是无法具体确定解决方案。不能在没有 PHP/MySQL 支持的服务器上使用 PHP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T00:57:35.307

网络上到处都是垂直导航菜单教程和资源。我建议您对该主题进行一些研究。

这是一个示例教程： [http ://www.noupe.com/css/multilevel-drop-down-navigation-menus-examples-and-tutorials.html](http://www.noupe.com/css/multilevel-drop-down-navigation-menus-examples-and-tutorials.html)

这是一个示例资源： [http ://codecanyon.net/item/jquery-vertical-dropdown-menu/161210](http://codecanyon.net/item/jquery-vertical-dropdown-menu/161210)

但是，这里有一些非常简单的代码可以帮助您入门：

```
<ul>
    <li><a href="#">Home</a></li>
    <li>
        <a href="#">About the Club</a>
        <ul>
            <li><a href="#">Members</a></li>
            <li><a href="#">Prices</a></li>
            <li><a href="#">Tournaments</a></li>
        </ul>
    </li>
</ul>
<style>
ul ul { display:none; }
</style>
<script src="jquery-1.7.2.min.js"></script> 
<script>
$("li").click(function() {
    $(this).find("ul").css("display", "block");
    return false;
});
</script> 
```

这使用 jQuery，因此您必须从[http://jquery.com/](http://jquery.com/)下载它并包含它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T00:26:35.417

我会使用一个 CSS 菜单生成器，这对于刚入门的人来说是最简单的。一个很好的使用是[http://purecssmenu.com/](http://purecssmenu.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-13T11:39:56.427

Same here, free menu generator uses the following CSS3 and HTML5;
[Free HTML CSS Menu Generator On-line](http://www.blended-menu.com)

# c++ - 为什么这个 C++ 代码会产生分段错误？

> ID：11596999
> 
> 赞同：2
> 
> 时间：2012-07-22T00:55:41.720
> 
> 标签：c++

我专门讲的代码函数是getCount()。还有其他几个我没有在这里包含的函数（例如查找此二叉树的高度和总节点数），它们工作得很好，结果正确。另一方面，getCount() 会产生分段错误，但第一个节点（树的顶部，第一个节点）除外。有任何想法吗？

```
#include <string> 
#include <algorithm>
#include <iostream>

class Word {
    public:
        std::string keyval;
        long long count;
        Word() {
            keyval = "";
            count = 0;
        }
        Word(std::string S) {
            keyval = S;
            count = 1;
        }
};

class WordBST {
    public:
        Word node;
        WordBST* left_child;
        WordBST* right_child;
        WordBST(std::string key);        
        void add(std::string key){
            if (key == node.keyval){
                node.count++;
            }
            else if (key < node.keyval){
                if (left_child == NULL){
                    left_child = new WordBST(key);
                }else {
                    left_child->add(key);
                }
            }else {
                if (right_child == NULL){
                    right_child = new WordBST(key);
                }else {
                    right_child->add(key);
                }
            }
        }
        long long getCount(std::string key){
            if (key == node.keyval){
                return (node.count);
            }
            else if (key < node.keyval){
                left_child->getCount(key);
            }else if(key > node.keyval){
                right_child->getCount(key);
            }else return 0;
            /*else {
                if (key < node.keyval){
                    left_child->getCount(key);
                }else{
                    right_child->getCount(key);
                }
            }*/
        }
};

WordBST::WordBST(std::string key) {
    node = Word(key);
    left_child = NULL;
    right_child = NULL;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T00:58:24.400

这是因为你让你的代码跑到最后而没有碰到 return 语句。

```
long long getCount(std::string key){
    if (key == node.keyval){
        return (node.count);
    } else if (left_child && key < node.keyval){
        return left_child->getCount(key); // Added return
    } else if(right_child && key > node.keyval){
        return right_child->getCount(key); // Added return
    }
    return 0;
} 
```

您还需要在整个代码中的多个位置添加空检查。你的`add`方法有它们，但你`getCount`没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T01:09:02.773

我认为你应该这样写 getCount() ：

```
 long long getCount(std::string key){
    if (key == node.keyval){
        return (node.count);
    }
    else if (key < node.keyval && left_child != NULL){
        return left_child->getCount(key);
    }else if(key > node.keyval && right_child != NULL){
        return right_child->getCount(key);
    }else return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T00:59:02.213

在调用它们的方法之前，您不会检查节点的子节点是否存在。