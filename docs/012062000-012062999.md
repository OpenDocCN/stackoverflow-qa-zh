# StackOverflow 问答 12062000-12062999

# c++ - 我可以将参数传递给 SIGINT 吗？

> ID：12062001
> 
> 赞同：1
> 
> 时间：2012-08-21T19:49:16.953
> 
> 标签：c++, arguments, sigint

我正在尝试传递一些额外的参数，以便它们可以在我的程序的 SIGINT 调用中使用，但是我得到一个编译错误，这实际上是可以实现的还是我被误导了？

如果可以实现，有人可以在这里解释我的错误吗？

```
void signal_handler(bool &txMode, char* &txData, int &sendresult, int &sockFD,_
char* &txBuffer, struct sockaddr_ll &socket_address);

int main(int argc, char *argv[]) {
    unsigned char sourceMAC[6];
    unsigned char destMAC[6] = {0xff, 0xff, 0xff, 0xff, 0xff, 0xff};
    bool txMode = true;
    char* txBuffer = (char*)operator new(ETH_FRAME_LEN);
    unsigned char* txEtherhead = (unsigned char*)txBuffer;
    struct ethhdr *eh = (struct ethhdr *)txEtherhead;
    int sockFD;
    char* txData = txBuffer + headersLength;
    struct sockaddr_ll socket_address;
    int sendresult = 0;

    signal (SIGINT,signal_handler(txMode, txData, sendresult, sockFD, txBuffer,_
    socket_address));

    return 0;
}

void signal_handler(bool &txMode, char* &txData, int &sendresult, int &sockFD,_
char* &txBuffer, struct sockaddr_ll &socket_address) {

  if(txMode==true) {
    std::string param;
    std::stringstream ss;
    ss << "etheratedeath";
    param = ss.str();
    strncpy(txData,param.c_str(), param.length());
    sendresult = sendto(sockFD, txBuffer, ETH_FRAME_LEN, 0, 
             (struct sockaddr*)&socket_address, sizeof(socket_address));
  }
  cout << "You killed me!" << endl;
} 
```

我在编译时收到以下错误；

```
user@machine:~/c/ethernet1$ gcc -o ethernet1 ethernet1.cpp -lrt
ethernet1.cpp: In function ‘int main(int, char**)’:
ethernet1.cpp:358: error: invalid use of void expression 
```

指 main() 中的这一行；

```
signal (SIGINT,signal_handler(txMode, txData, sendresult, sockFD, txBuffer, socket_address)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:59:35.463

> 这实际上可以实现还是我被误导了？

为此，您需要一个称为*闭包*的构造，C 和 C++ 都没有内置闭包。但是，您可以使用[ffcall](http://www.gnu.org/software/libffcall/)库实现闭包行为。这个想法是从通用处理程序和要传递给该函数的参数构建一个原位函数。即使离开了范围，参数当然也必须保持有效，这意味着，要么让它们成为全局变量，要么在堆上分配它们。

> 我在编译时收到以下错误；(...)
> 
> ```
> signal (SIGINT,signal_handler(txMode, txData, sendresult, sockFD, txBuffer, socket_address)); 
> ```

现在请考虑一下您在那里写了什么以及编译器如何解释它。函数参数按值传递。所以表达式 signal_handler(...) 被评估并将结果传递给信号。这不是您想要的，您希望使用您在 SIGINT 到达时传递的参数调用 signal_handler。但这不是这条线所表达的。它表达的意思是：*现在用参数调用signal_handler，并将this的结果作为handler参数传递给signal，以便稍后在SIGINT到达时调用。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:59:35.687

当您调用时`signal`，您不会*调用*信号处理程序，而是将给定信号与适当的处理程序*相关联。*

所以你的电话应该是

```
signal(SIGINT,&signal_handler); 
```

那么，signal_handler 应该被定义为

```
typedef void (*sighandler_t)(int); 
```

它是一个函数，只需要一个参数 - 信号编号。此外，由于信号是从程序外部发出的，因此您无法传递其他参数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T19:50:58.207

据我所知，signal 需要一个指向带有 int 参数的 void 函数的指针。我不知道任何超载会让你。

[http://www.cplusplus.com/reference/clibrary/csignal/signal/](http://www.cplusplus.com/reference/clibrary/csignal/signal/)

# python - 基本 Python For 循环

> ID：12062002
> 
> 赞同：0
> 
> 时间：2012-08-21T19:49:19.247
> 
> 标签：python, list, for-loop

我很抱歉提出愚蠢的问题。

我正在通过视频和书籍学习 Python，真的没有其他帮助。

无法弄清楚基本 python 编程的简单差异。

#######################################AAAAAA

```
 costs = [5,10,15,20]

    def sum_cart(item):
        total_cost = 0
        for this in costs:
            this = this + total_cost
        return total_cost
    print sum_cart(costs) 
```

#######################################BBBBBB

```
 def sum_cart(item):
        total_cost = 0
        for this in costs:
            total_cost = this + total_cost
        return total_cost
    print sum_cart(costs) 
```

########################################CCCCCC

```
 def sum_cart(item):
        total_cost = 0
        for this in costs:
            total_cost = this + total_cost
            return total_cost
    print sum_cart(costs) 
```

- - - - - -问题 - - - - - -

结果是 A --> 0, B --> 50, C --> 5

我仍然很困惑为什么结果显示为原样。

如果我的理解是正确的，在 A 中，'this' 从列表中获取 5，并将 5 添加到 total_cost，即 0。'this' 然后分别调用 10、15 和 20，'this' 得到一个新值。但是，因为 total_cost 还是 0，所以结果是 0。我说的对吗？

然后在 B 中，当调用 'this' = 5 并添加到当前的 'total_cost' = 0 时更新总成本，即 5。循环返回并分别引入 10、15 和 20 以及 'total_cost'已更新到 50。到目前为止，我认为还不错。

但是在 C 中，我不确定发生了什么，因为当 'this' 从列表中引入 5 值时，'total_cost' 会更新。然后它应该将'total_cost'返回到5。for循环不应该返回并执行total_cost = this（假定为10）+total_cost（当前为5）并再次执行循环吗？我对“返回”功能缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:53:09.723

You are correct in your first two assumptions.

In C, `return` exits the function immediately. The loop is aborted at that point, returning `total_cost` (which is 5, at that point).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:06:53.447

这三个人都写错了。你应该写一些更像这样的东西：

```
costs = [5,10,15,20]

def sum_cart(items):
    total = 0
    for item in items:
        total = total + item
    return total

print sum_cart(costs) 
```

即使您的示例 B，虽然它得到了正确的答案，但它是错误的，因为您正在传递参数`item`，但是在您的循环中，您正在循环全局变量`costs`（因此您实际上并没有使用您传递给函数的参数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:52:59.677

`return` returns from the entire function and ends it. In your third example, the for loop only gets to run once. At the end of its first run, the function returns and the rest of the for loop never happens.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T19:53:47.743

`return`总是结束它所在函数的执行。

因此，在您的最后一个示例中，一旦函数到达`return`，`sum_cart()`函数就会结束并返回`total_cost`（第一次遇到它时，它将等于 5\.

请注意，在其他两个示例中，该`return`语句位于您的 for 循环*之外*，这就是为什么它们在完成对您的数组的迭代之前不返回值的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T19:56:15.127

在样本 A 中，total_cost 从来都不是零。您从 total_cost 中取零值并将其添加到其他内容中 - 这也不会更改该值。

在示例 B 中，您`this`每次都将 的值添加到 total_cost 中。因此，它会随着你的前进而积累价值。python中等号左边的任何东西都取右边表达式的值。

在示例 C 中，您的缩进不同，并且 return 语句位于 for 循环内。这将导致函数 sum_cart 在到达这行代码后立即返回 total_cost 的当前值（第一次通过 for 循环）。Return 不仅将您从循环的当前迭代中引导出来，它还将您从内部的任何函数中引导出来，因为 return 字面意思是“回到最初调用我（我是这里的函数）的任何地方。你可以选择返回一个值，就像你在这里做的那样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T19:56:21.733

不应该拼音吗

```
for this in item: 
```

代替

```
for this in costs: 
```

?

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-15T06:38:20.627

**在示例 A**中 - 您在 this 中对 this 的值求和**并**返回**total_cost**，它仍然为 0。

**在示例 B** - 它在语义上是正确的。您在**total_cost**中对 list 的值求和并返回**total_cost**。

**在示例 C**中 - 返回在 for 循环中，因此列表的第一个值在**total_cost**中求和，并返回**total_cost**。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-26T18:07:03.993

在 C 中，一旦循环返回部分，它就会退出函数并打印 total_cost 收到的第一个值。但是您的所有三个选项都存在一个主要问题。您将成本列表作为参数（项目）传递，但您仍在循环中使用全局变量成本。

```
def sum_cart(item):
     total_cost = 0
     for i in items:
          total_cost += i
return total_cost 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-12T13:27:49.507

情况 C：

一旦循环中的第一次迭代命中'return'，函数就结束了。循环是在函数内部构建的，函数已经结束。因此，循环停止。

返回的值是第一次迭代结束时的总成本：5。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-15T06:22:21.767

实际上，代码 A 看起来接近正确答案，只是函数中的参数是“项目”并且您正在迭代列表“成本”。并且逻辑可以更正为 total_cost+=this，因为我们有兴趣增加 total_cost 而不是 'this' 变量。你可以试试这个代码；

```
costs = [5,10,15,20]

def sum_cart(costs):
    total_cost = 0
    for this in costs:
        total_cost += this
    return total_cost
print sum_cart(costs) 
```

希望这个答案有帮助...

# asp.net - How do populate gridview itemtemplate from stored procedure

> ID：12062005
> 
> 赞同：0
> 
> 时间：2012-08-21T19:49:21.523
> 
> 标签：asp.net, ado.net

How would you populate the gridview itemtemplate textbox using a drop down box to toggle the data from a stored procedure?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:54:11.303

为什么在选择项目时不让下拉列表的值成为您想要的值？为什么要打电话给数据库来获取这个？

# javascript - jsfiddle 的结果面板中的萤火虫

> ID：12062015
> 
> 赞同：2
> 
> 时间：2012-08-21T19:49:55.597
> 
> 标签：javascript, firebug, jsfiddle

如何在 jsfiddle 中启用 firebug 并将其显示在结果面板中？

看看我的意思：http: [//cl.ly/image/262F3O2A3x1h](http://cl.ly/image/262F3O2A3x1h)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:09:06.193

您必须将[firebug lite](https://getfirebug.com/firebuglite)作为资源加载。在左侧的“管理资源”选项卡下，上传文件“firebug-lite-debug.js”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:44:39.707

或者，如果您选择 jQuery 框架，您可以从框架选择下的选项中选中“firebug lite”复选框。

# .net - PaintEventArgs.ClipRectangle 和 PaintEventArgs.Graphics.ClipBounds 有什么区别

> ID：12062019
> 
> 赞同：10
> 
> 时间：2012-08-21T19:50:00.933
> 
> 标签：.net, winforms

在 System.Windows.Forms.Control 的继承者中重写 OnPaint 或 OnPaintBackground 方法时，一个参数始终是 System.Windows.Forms.PaintEventArgs 对象。部分对象结构：

*   PaintEventArgs
    *   ClipRectangle *(System.Drawing.Rectangle)*
    *   图形*（System.Drawing.Graphics）*
        *   剪辑*（System.Drawing.Region）*
        *   ClipBounds *(System.Drawing.RectangleF)*
        *   VisibleClipBounds *(System.Drawing.RectangleF)*

**Graphics.Clip**似乎是适用像素的 1 位图，以影响后续绘制操作。

> *MSDN：“获取或设置限制此 Graphics 的绘图区域的区域。”*

**Graphics.ClipBounds**是一个只读矩形，似乎是完全包含剪辑区域的最小矩形。

> *MSDN：“获取限制此图形的剪切区域的 RectangleF 结构。”*

**Graphics.VisibleClipBounds**似乎是一个更“智能”的剪辑，虽然我不明白它是如何运作的。

> *MSDN：“获取此图形的可见剪切区域的边界矩形。”*

**ClipRectangle**似乎在所有情况下都复制了 Graphics.ClipBounds 属性。

> *MSDN：“获取要在其中绘制的矩形。”*

有人可以回答主要问题并可能阐明所有各种边界对象的用途吗？

**编辑：**根据 Dan-o 的回答添加了 MSDN 的描述。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T20:45:03.217

PaintEventArgs.ClipRectangle 是您的 Paint 事件实际需要绘制的矩形。通常等于控件客户区的大小。当只有一部分被另一个窗口重叠时，它会更小。或者当你调用它的 Invalidate(Rectangle) 方法时。您可以使用它来跳过绘制超出该矩形的昂贵对象。这是非常罕见的，Windows 本身已经很好地剪辑了您绘制的内容。

Graphics.Clip 是一个*区域*，您可以在绘图代码中指定该区域以剪辑您自己绘制的内容。它允许各种效果，例如绘制被圆圈剪裁的图像。或者使用转换为区域的 GraphicsPath 的真正复杂的剪辑效果。

Graphics.ClipBounds 是 Graphics.Clip 周围的矩形，它可以更快地计算出一个点是否在 Graphics.Clip 之外。如果您从未分配 Clip 属性 (X=-4194304,Y=-4194304,Width=8388608,Height=8388608)，您将获得毫无意义的“无限”剪辑边界

Graphics.VisibleClipBounds 与 Graphics.ClipBounds 相同，但也被控制窗口裁剪。测试一个点是否*在*剪辑区域内*并对*用户可见非常有用。如果您从不分配 Clip 属性，那么您只会得到窗口的大小。

所以是 Windows 设置了 PaintEventArgs.ClipRectangle。其余部分由您通过分配 Graphics.Clip 属性来设置。

# vb6 - 尝试运行 .vbs 文件以更新 QB 中的信息时出现 QODBC 错误 80004005

> ID：12062022
> 
> 赞同：1
> 
> 时间：2012-08-21T19:50:12.127
> 
> 标签：vb6, odbc, 32bit-64bit, quickbooks

我已经设置了 QODBC 驱动程序并且能够连接到我的 QB 文件并在 VB Demo 32 中运行查询。

我正在查看此处的示例文件之一 - [http://support.flexquarters.com/esupport/index.php?/Default/Knowledgebase/Article/View/506/57/examples-of-how-to-使用-qodbc-via-visual-basic](http://support.flexquarters.com/esupport/index.php?/Default/Knowledgebase/Article/View/506/57/examples-of-how-to-use-qodbc-via-visual-basic)

我做了这篇文章所说的 - 将所有文本复制到一个文本文件中，将其保存为“Customer.vbs”。我创建了一个名为“Kim Garland”的客户，关闭对话框，双击文件。msgbox 从未显示，并且出现此错误消息 - “[Microsoft][ODBC Driver Manager] The specified DSN contains a architecture mismatch between the Driver and Application; Code: 80004005; Source: Microsoft OLE DB Provider for ODBC Drivers”

知道这里发生了什么吗？在浏览了知识库之后，我认为这可能与 64 位与 32 位有关……但这似乎并没有让我有所了解。我确实安装了 Visual Studio，但对 VB6 应用程序不太了解，无法知道我在做什么。

**编辑**
顺便说一句，给出错误的行是：

```
oConnection.Open "DSN=Ben Test 2;OLE DB Services=-2" 
```

我最初使用的是与我链接到的文章中完全相同的行，但这也不起作用。我使用 c:\windows\syswow64\odbcad32.exe 创建了一个名为“Ben Test 2”的 32 位 DSN。它似乎没有改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:57:50.207

请查看他们谈论它的 Microsoft 网站。这不是 VB 问题，而是您怀疑的 32/64 位问题。

[http://social.msdn.microsoft.com/Forums/en/sqlgetstarted/thread/702f0d9b-6cb9-49cf-9953-80d059711e60](http://social.msdn.microsoft.com/Forums/en/sqlgetstarted/thread/702f0d9b-6cb9-49cf-9953-80d059711e60)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:40:58.367

由于您使用的是 64 位系统，因此您的 VBS 将作为 64 位执行（默认情况下）。

QODBC 是 32 位驱动程序，可以与 32 位应用程序一起使用。64 位应用程序无法与 32 位驱动程序通信，64 位应用程序与 32 位驱动程序通信也是如此。

对于 64 位应用程序，请使用 QRemote（它是一个 64 位驱动程序驱动程序）。

解决方案 1 您可以尝试使用 QRemote 来桥接 QODBC 和您的应用程序。这是一篇关于如何使用 QRemote 的文章： [http ://www.qodbc.com/qremoteconnect.htm](http://www.qodbc.com/qremoteconnect.htm)

解决方案 2，还有另一个解决方案可以解决您的问题。请将您的 VBS 称为 32 位。请按照以下步骤操作：

1) 点击 Windows 开始

2) 点击运行，在窗口中输入“%windir%\SysWoW64\cmd.exe”

3）点击确定，然后在cmd窗口中输入“cscript vbscriptfile.vbs”

这将使您的 VBS 在 32 位模式下运行，即使您在 64 位机器上

-问候拉金德拉·德瓦尼

# jquery - jquery：获取 slimbox2（灯箱克隆）以在 iframe 之外打开图像？

> ID：12062023
> 
> 赞同：2
> 
> 时间：2012-08-21T19:50:15.940
> 
> 标签：jquery, css, html

我一直在努力想办法让它工作好几个小时，当然没有灵丹妙药，因为我的设置不同于我在那里看到的所有示例，而且我是 javascript/jquery 的新手，所以我我迷路了。

以下是 slimbox2 的源代码：[http ://code.google.com/p/slimbox/source/browse/trunk/js/slimbox2.js](http://code.google.com/p/slimbox/source/browse/trunk/js/slimbox2.js)

我需要帮助，因为我的 CMS 和博客内容位于我的主站点的 iframe 内，并且单击时的图片帖子显然会在 iframe 内显示它们的叠加层，而不是在我喜欢的 iframe 之外。

由于生成最终输出所涉及的不同 php 页面导致的专有代码量会令人困惑，但如果有帮助，我可以发布我发现的所有涉及的片段。

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:07:23.523

嘿，在第 25 行（http://code.google.com/p/slimbox/source/browse/trunk/js/slimbox2.js#25）替换：

```
$("body") 
```

和

```
$('body', window.parent.document) 
```

并更换线号。57 [http://code.google.com/p/slimbox/source/browse/trunk/js/slimbox2.js#57](http://code.google.com/p/slimbox/source/browse/trunk/js/slimbox2.js#57)

```
overlayOpacity: 0.8 
```

和

```
overlayOpacity: 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T04:14:13.763

好的，感谢 Ashirvad 的回答，我想出了其余的……

只需要修改两行代码即可：

首先，替换第 10 行：`var win = $(window)`

和

`var win = $('body', window.parent.document)`

然后，第 25 行，只需替换：

`$("body")`

和

`$('body', window.parent.document)`

这使我可以从 iframe 内部查看父框架上的图像。

# .net - 从字符串中读取二进制字节

> ID：12062027
> 
> 赞同：0
> 
> 时间：2012-08-21T19:50:40.917
> 
> 标签：.net, binary-data

我有一个带有文本内嵌二进制数据的 csv 文件（即文本，0xFF00）。我需要读取这两个值并将它们保存到数据库中。目前我正在使用 StreamReader 在行中读取并用逗号分隔它。我遇到的问题是我需要将二进制数据转换为等效的字节 []（即 0xFF00 转到 {255,0}）。任何类型的编码转换都会改变二进制文件。

```
byte[] data= System.Text.Encoding.ASCII.GetBytes(SplitString[1]); 
```

如果整个文件是二进制文件，我可以使用`File.ReadAllBytes(file)`有没有办法在内存中执行此操作而无需将二进制部分写入临时文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:54:33.443

> 我有一个带有文本内联二进制数据的 csv 文件

这是一个糟糕的开始。你有机会改变它吗？

基本上，您首先不应该尝试将二进制数据作为文本读取。这样做几乎肯定会丢失数据。（您可以使用 ISO-Latin-1，但对于一个讨厌的问题来说，这是一个令人讨厌的解决方法。）

相反，您可能希望以二进制形式读取所有数据，并使用`Encoding.GetString`.

您如何知道文件的哪些位是您文件中的内容？（即哪些位是二进制，哪些位是文本）

> 我遇到的问题是我需要将二进制数据转换为等效的字节 []（即 0xFF00 转到 {255,0}）。

只是检查一下，您的文件确实包含二进制数据，而不是二进制数据的十六进制表示，对吗？如果它*实际上*都是文本数据，但其中一些是使用十六进制编码成文本的二进制数据，那会让生活变得更轻松。

# keyboard - 诺基亚 SDK 2.0 模拟器不接受来自键盘的输入

> ID：12062030
> 
> 赞同：0
> 
> 时间：2012-08-21T19:50:51.993
> 
> 标签：keyboard, emulation, nokia-s40

我第一次为诺基亚开发应用程序。我已经下载`Nokia SDK 2.0 for Java`（适用于 s40 系列）。软键盘可以正常打开，但是当我尝试从我的 PC 键盘输入时，模拟器不接受任何键。

谁能告诉我需要从哪里更改设置？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:44:12.707

不幸的是，我刚刚确认的 beta SDK 不允许从 PC 键盘进行按键输入。目前诺基亚正在研究解决方案。所以最好的解决方案是在设备上进行测试。

确认链接在[这里](http://www.developer.nokia.com/Community/Discussion/showthread.php?237244-Nokia-SDK-2.0%28Beta%29-Emulator-Won-t-Accept-Inputs-from-Keyboard&p=902053#post902053)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:11:11.020

如果诺基亚 SDK 2.0(Beta) 无法运行，则通过设备调试来测试您的应用程序。

# r - R中的多个文件

> ID：12062031
> 
> 赞同：0
> 
> 时间：2012-08-21T19:50:56.143
> 
> 标签：r, file

我正在尝试在 R 中管理多个文件，但遇到了困难。我想获取每个文件中的数据并通过一系列步骤操作它们（所有文件都接受相同的处理）。我认为我正在以一种非常愚蠢的方式去做。有没有办法在不使用 900 个应用语句的情况下管理许多文件（每个文件都相同）？例如，何时建议您合并所有数据框，而不是单独处理每个数据框？有没有办法合并两个以上或不确定的数字，就像这里输入文件的方式一样？还是有更好的方法来处理这么多文件？

我以标准方式获取文件：

```
chosen<-(tk_choose.files(default="", caption="Files:", multi=TRUE, filters=NULL, index=1)) 
```

但在那之后，我想对数据做几件事。到目前为止，我只是应用不同的东西，但它变得越来越混乱。看：

```
ytrim<-lapply(chosen, function(x) strtrim(y, width=11))
chRead<-lapply(chosen,read.table,header=TRUE)
tmp<-lapply(inputFiles, function(x) stack(fnctn)) 
```

等等，等等。这肯定不是推荐的方法。有没有更好的方法来处理大量文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:00:40.593

您可以编写一个包含所有操作的函数，并将其应用于您的所有文件，如下所示：

```
doSomethingWithFile <- function(filename) {
    ytrim <- strtrim(filename, width=11))
    chRead<- read.table(filename,header=TRUE)
    # Return some result
    chRead
}

result<-lapply(chosen, doSomethingWithFile) 
```

您只需要考虑如何返回结果，因为 lapply 需要返回与输入长度相同的列表（`chosen`在本例中为 ）。您还可以查看包的应用功能之一以`plyr`获得更大的灵活性。

（顺便说一句：这段代码并非没有错误，但你的例子也不是......如果你给出一个[正确的例子](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)，我会更新我的）

# r - 基于具有不同列名的 2 列合并 2 个数据框

> ID：12062035
> 
> 赞同：5
> 
> 时间：2012-08-21T19:51:15.467
> 
> 标签：r

我有 2 个非常大的数据集，如下所示：

```
merge_data <- data.frame(ID = c(1,2,3,4,5,6,7,8,9,10), 
                         position=c("yes","no","yes","no","yes", 
                                    "no","yes","no","yes","yes"),
                         school = c("a","b","a","a","c","b","c","d","d","e"),
                         year1 = c(2000,2000,2000,2001,2001,2000,
                                   2003,2005,2008,2009), 
                         year2=year1-1)

 merge_data

 ID position school year1 year2
 1   1  support   a  2000  1999
 2   2   oppose   b  2000  1999
 3   3  support   a  2000  1999
 4   4   oppose   a  2001  2000
 5   5  support   c  2001  2000
 6   6   oppose   b  2000  1999
 7   7  support   c  2003  2002
 8   8   oppose   d  2005  2004
 9   9  support   d  2008  2007
 10 10  support   e  2009  2008

merge_data_2 <- data.frame(year=c(1999,1999,2000,2000,2000,2001,2003
                                  ,2012,2009,2009,2008,2002,2009,2005,
                                  2001,2000,2002,2000,2008,2005),
                           amount=c(100,200,300,400,500,600,700,800,900,
                                    1000,1100,1200,1300,1400,1500,1600,
                                    1700,1800,1900,2000), 
                           ID=c(1,1,2,2,2,3,3,3,5,6,8,9,10,13,15,17,19,20,21,7))

  merge_data_2
   year amount ID
1  1999    100  1
2  1999    200  1
3  2000    300  2
4  2000    400  2
5  2000    500  2
6  2001    600  3
7  2003    700  3
8  2012    800  3
9  2009    900  5
10 2009   1000  6
11 2008   1100  8
12 2002   1200  9
13 2009   1300 10
14 2005   1400 13
15 2001   1500 15
16 2000   1600 17
17 2002   1700 19
18 2000   1800 20
19 2008   1900 21
20 2005   2000  7 
```

我想要的是：

```
 ID position school year1 year2 amount
 1    yes    a      2000  1999  300
 2    no     b      2000  1999  1200
10    yes    e      2009  2008  1300 
```

对于 merge_data_2 中的 ID=1，我们的金额 =300，因为有 2 种情况 ID=1，并且它们的 year1 或 year1 等于 merge_data 中 ID=1 的年份

所以基本上我想要的是根据 ID 和年份执行合并。2个条件：

1.  来自 merge_data 的 ID 与来自 merge_data_2 的 ID 匹配
2.  merge_data 中的 year1 和 year2 之一也与 merge_data_2 中的年份匹配。然后根据每个 ID 的金额总和进行合并。

我认为代码将如下所示：

```
merge_data_final <- merge(merge_data, merge_data_2, 
                          merge_data$ID == merge_data_2$ID && (merge_data$year1 || 
                            merge_data$year2 == merge_data_2$year))

Then somehow to aggregate the amount by ID. 
```

显然我知道代码是错误的，并且我一直在考虑 plyr 或 reshape 库，但很难掌握它们。

任何帮助都会很棒！多谢你们！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T20:10:07.673

如上所述，我认为您的示例输入和输出数据之间存在一些差异。这是基本方法 - 你在正确的轨道上使用`reshape2`. 您可以`melt()`将数据简单地转换为长格式，这样您就可以加入单个列，而不是之前进行的非此即彼的位。

```
library(reshape2)
#melt into long format
merge_data_m <- melt(merge_data, measure.vars = c("year1", "year2"))
#merge together, specifying the joining columns
merge(merge_data_m, merge_data_2, by.x = c("ID", "value"), by.y = c("ID", "year"))
#-----
  ID value position school variable amount
1  1  1999      yes      a    year2    100
2  1  1999      yes      a    year2    200
3  2  2000       no      b    year1    500
4  2  2000       no      b    year1    300
5  2  2000       no      b    year1    400 
```

# twitter - How can i aggregate tweets into local database with twitter public streams API?

> ID：12062037
> 
> 赞同：0
> 
> 时间：2012-08-21T19:51:30.493
> 
> 标签：twitter, stream

I want to collect lots of tweets into local database for my research. I dont want to use Search API cause it is for the past tweets. I may need some programs runing for 3 months to collect sufficient tweets. Is there any way i can do it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:38:01.600

您可以使用流 api 并收集实时推文。 [公共信息流](https://dev.twitter.com/docs/streaming-apis/streams/public)也可以帮助您！

# java - JPA Criteria API and type safety

> ID：12062038
> 
> 赞同：11
> 
> 时间：2012-08-21T19:51:37.430
> 
> 标签：java, jpa, criteria-api, type-safety

I seem to have missed something in JPA's criteria API and its type safety. Consider the following code:

```
@Entity
@Access(FIELD)
class User(

  @Id
  Long id;

  @Column(unique=true)
  String email;

  String password;
} 
```

Here the meta model:

```
@StaticMetamodel(User.class)
public static class User_ {
  public static volatile SingularAttribute<User, Long> id;
  public static volatile SingularAttribute<User, String> email;
  public static volatile SingularAttribute<User, String> password;
} 
```

Then some code to exercise the class, built using pages from [the Java EE Tutorial](http://docs.oracle.com/javaee/6/tutorial/doc/gjiup.html):

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<User> cq = cb.createQuery(User.class);
Root<User> user = cq.from(User.class);
cq.select(user);
cq.where(cb.equal(user.get(User_.email), "john@google.com")); //this line is my problem

TypedQuery<User> q = em.createQuery(cq);
List<User> allUsers = q.getResultList();

assertEquals(1, allUsers.size()); 
```

It works fine. However, if I change the "where" clause to use an Integer instead of a String ("john@google.com"), I expected the code to not compile. Yet it compiles fine.

I thought the criteria API was supposed to be type safe? That is hardly more type safe than the following, using standard JPQL. I mean, what is the purpose of the meta model in the above code?? I have gained nothing from it.

```
User u = em.createQuery("select u from User u where u.email = :email", User.class)
           .setParameter("email", "john@google.com")
       .getSingleResult(); 
```

So the question is: can I make the criteria API query more type safe, so that I can only pass a String to the "from" clause?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T21:59:39.350

类型安全仅限于接口泛型类型的上限`Expression<T>`，而不是元模型中定义的确切类型。所以，因为 `CriteriaBuilder.equal(Expression<?> x, java.lang.Object y)`接受一个类型的参数，`Expression<?>`它允许传递任何对象进行比较。

其他`CriteriaBuiler`方法更安全，例如`CriteriaBuilder.ge(Expression<? extends java.lang.Number> x, Expression<? extends java.lang.Number> y)`只允许数字。但是例如允许将整数字段与浮点数进行比较。

你不能做得比这更好。这些方法应该类似于`CriteriaBuilder.equal(Expression<T> x, T y)`T 是元模型中的字段类型。

当然，这是标准 API 类型安全中的一个漏洞。我不知道为什么 JPA API 创建者选择这些方法的通配符版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-20T23:06:38.100

如果您真的想要严格的类型匹配，您可以使用[in()](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#in%28javax.persistence.criteria.Expression%29)并且您的查询将如下所示：

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<User> cq = cb.createQuery(User.class);
Root<User> user = cq.from(User.class);
cq.select(user);
cq.where(cb.in(user.get(User_.email)).value("john@google.com"));

TypedQuery<User> q = em.createQuery(cq);
List<User> allUsers = q.getResultList();

assertEquals(1, allUsers.size()); 
```

或者你甚至可以写

```
cq.where(cb.in(user.get(User_.email)).value(cq.literal("john@google.com"))); 
```

`equal()`虽然 using和只有一个值的 -clause之间存在差异，`in()`但这可以根据您的静态类型模型实现严格的类型化。大多数数据库引擎将以相同的方式优化`=`并`in()`使用一个值。

如果您不喜欢切换`equal()`，`in()`您也可以编写这样的函数，以确保您的编译器提醒您可能的错误输入

```
static <T> Predicate equal(CriteriaBuilder cb, Expression<T> left, T right) {
    return cb.equal(left, right);
}

static <T> Predicate equal(CriteriaBuilder cb, Expression<T> left, Expression<T> right) {
    return cb.equal(left, right);
} 
```

最后，您是否喜欢使用自己的`equal()`-wrapper 或切换到`in()`您可能需要更频繁的`toLong()`,... 函数，因为-objects 不是很兼容强制转换，通常最好让数据库处理整数宽度的变化.`CriteriaBuilder``Number`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:17:45.817

cq.where(booelan , String) Java 提交**“将数字隐式类型转换为字符串”。** 整数直接用于初始化方法 String 类型参数，因此它是合法字符串。语言中唯一可能出现问题的地方和方式。您将只需要首先检查地址语法的有效性，并考虑在发生此类问题时如何处理。

# c# - Why is DateTime.Now.Subtract(DateTime.UtcNow) not (close to) zero?

> ID：12062044
> 
> 赞同：3
> 
> 时间：2012-08-21T19:52:24.613
> 
> 标签：c#, .net

If I try:

```
DateTime.Now.Subtract(DateTime.UtcNow) 
```

I would expect the result to be very close to zero. But it's not, instead it's the time zone difference, in my case, -4 hours. There is a .Kind -- the DateTime KNOWS the timezones are different. Why doesn't it track this for me? Is there a flavor of Subtract that DOES use Kind correctly?

(For reference, a good rundown of what each one outputs can be seen at: [https://stackoverflow.com/a/3229429/237091](https://stackoverflow.com/a/3229429/237091))

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T19:54:13.170

诶？该`Kind`属性不会更改日期数学。它仅由时区方法使用。

你得到的结果正是我期望你得到的。不知道我理解你为什么期待零。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T19:56:42.760

> 有一个 .Kind - DateTime 知道时区不同。为什么它不为我跟踪这个？

因为[`DateTime`从根本上被破坏了](http://noda-time.blogspot.co.uk/2011/08/what-wrong-with-datetime-anyway.html)（[还有更多......](http://msmvps.com/blogs/jon_skeet/archive/2012/05/02/more-fun-with-datetime.aspx)）。如果您尝试从另一种值中减去一种值，IMO 应该会抱怨。但不，它只是在每个值中使用未解释的日期/时间。`Kind`不幸的是，实际上很少有操作会注意到. （如果您使用`TimeZoneInfo`，这些操作*会*注意到它。）

`Kind`被入侵.NET 2.0；在此之前，一个`DateTime`值甚至不知道它是什么类型 - 如果你使用：

```
dt = dt.ToLocalTime().ToLocalTime().ToLocalTime(); 
```

它将多次应用相同的偏移更改。BCL 团队在二进制表示中找到了几个备用位，并将其用于`Kind`.

基本上，我能感觉到你的痛苦。如果这样的操作引发异常，我个人更喜欢它 -`DateTime`从本地减去 UTC，`DateTime`反之亦然，IMO 没有什么意义。

作为一个完全有偏见的插件，您可以使用[Noda Time](http://noda-time.googlecode.com)来区分 、 、 、 和 的概念`Instant`，`LocalDate`并且`LocalTime`不会让`LocalDateTime`您执行无意义的算术。我们的目标是提供一种比 BCL 更健全的 API。当然，这并不一定意味着我们已经成功了：）`OffsetDateTime``ZonedDateTime`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:56:47.750

每个`DateTime`对象代表一个本地时间（而不是 UTC 时间加上时区偏移）。即使该`Kind`属性等于 UTC，它也只是将本地时间存储在零时区。如果不是当地时间，就没有`UtcNow`财产的理由。

DateTime 甚至不存储时区。如果`Kind`等于 UTC，那么至少您知道它的时区为零，但如果`Kind`是本地或未指定，则无法知道时区（该`Kind`属性默认为等于`Unspecified`）。

因此，该`Subtract`方法不能将时区纳入其计算，因为时区是未知的。

# c# - Using configurationmanager to read from multiple web.config files

> ID：12062045
> 
> 赞同：9
> 
> 时间：2012-08-21T19:52:29.870
> 
> 标签：c#, asp.net, web-config, configurationmanager

**Background:**

I have some data thats stored in the web.config files of about 100 web applications. This data is getting moved to a database gradually. The webpages will show the web.config data until somebody clicks on an "edit" link in which case they'll be redirected to a webpage which will allow them to update this data where it will be saved in a database instead.

**Problem:**

Not all of the data will be changed on this page that will save it to the database. When somebody clicks the "edit" link I want the form to populate with the data from the web.config file and when they click "save" have it save to the database. However, using the configurationmanager I can only get it to pull data from the web.config file on current application.

**Questions:**

1.  Is there a way to use configurationmanager to select the web.config file from lets say `../{dynamic_app_id}/web.config` ?
2.  is reading them as plain xml files my only option?
3.  Are there any pitfalls to this approach?
4.  Is there another solution that would work better perhaps?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-21T20:01:15.583

您可以轻松读取任何配置文件。请查看我从外部 app.config 文件中读取应用程序设置的示例代码：

```
 System.Configuration.KeyValueConfigurationCollection settings;
        System.Configuration.Configuration config;

        System.Configuration.ExeConfigurationFileMap configFile = new System.Configuration.ExeConfigurationFileMap();
        configFile.ExeConfigFilename = "my_file.config";
        config = System.Configuration.ConfigurationManager.OpenMappedExeConfiguration(configFile, System.Configuration.ConfigurationUserLevel.None);
        settings = config.AppSettings.Settings; 
```

快乐的编码和最好的问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:04:05.653

您可以在 web.config 中添加以下部分

然后，在您的项目中添加“env”文件夹并将您的环境设置添加到 EnvironmentalSettings.config 中。您仍然可以使用 ConfigurationManager 从 EnvironmentalSettings 文件中获取设置。

这是否回答你的问题？

# jquery - jQuery losing selecting when dialog box is opened

> ID：12062051
> 
> 赞同：0
> 
> 时间：2012-08-21T19:52:39.840
> 
> 标签：jquery, jquery-ui

```
 $(document).ready(function () {

            var $dialog = $("#dialog-box").dialog({
                autoOpen: false,
                modal: true,
                position: "center",
                draggable: true,
            });

            var $optionsdialog = $("#optionsdialog").dialog({
                autoOpen: false,
                modal: true,
                position: "center",
                draggable: true,
            });

            $(function () {
                $("#column1, #column2, #column3").sortable({
                    connectWith: $(".column"),
                    placeholder: 'widget-placeholder',
                    forcePlaceholderSize: true,
                    revert: 300,
                    delay: 100,
                    opacity: 0.8,
                    containment: 'document',
                    cancel: '.header',
                    stop: function (event, ui) {
                        $optionsdialog.dialog("open")
                    },
                })
            });

            $(".widget-content").bind("contextmenu", function (e) {
                $("#dropmenu").css({
                    top: e.pageY + 'px',
                    left: e.pageX + 'px'
                }).show();
                return false;
            });

            $(".widget-content").hover(function () {
                $(this).addClass("selected");
            });

            $(".optitemlist").click(function () {
                $(".widget-content").empty();
                $(".widget-content").append('<img class="listimg" src="img/list.png" alt="#" />');
                $optionsdialog.dialog("close");
            });

            $(".optitemwimage").click(function () {
                $(".widget-content").empty();
                $(".widget-content").append('<img class="listimg" src="img/listimage.png" alt="#" />');
                $optionsdialog.dialog("close");
            });

            $(".itemlist").click(function () {
                var $selectedContent = $(".selected");
                $selectedContent.empty();
                $selectedContent.append('<img class="listimg" src="img/list.png" alt="#" />');
                var selected = $("#columns").find("div").hasClass(".selected");
                $(selected).removeClass("selected");
            });

            $(".itemwimage").click(function () {
                $(".widget-content").empty();
                $(".widget-content").append('<img class="listimg" src="img/listimage.png" alt="#" />');
            });

            $(".editproperties").click(function () {
                $dialog.dialog("open");
            });

            $('#dropmenu').click(function () {
                $('#dropmenu').hide();
            });

            $(document).click(function () {
                $('#dropmenu').hide();
            });

            $(".remove").click(function () {
                $(this).parents(".sort").clone().appendTo("#column1");
                $(this).parents(".sort").animate({
                    opacity: 0
                }, function () {
                    $(this).wrap('<div/>').parent().slideUp(function () {
                        $(this).remove();
                    });
                });
            });

            $("#saveButton").click(function () {
                if ($("#checkBox").is(":checked")) {
                    $(".sort h3").show();
                }
                else {
                    $(".sort h3").hide();
                }
            });

        });

    </script> 
```

```
<div id="columns">

    <ul id="column1" class="column">
        <li class="widget header" id="column1title">
            <div class="widget-title">
                <h3>Channels:</h3>
            </div>               
        </li>

        <li class="widget sort">  
            <div class="widget-head">
                <h3 class="title">Widget title 1</h3>
                <a href="#" class="remove">[ x ]</a>
            </div>
            <div class="widget-content">
                <img class="listimg" src="img/list.png" alt="#" />
            </div>
        </li>

        <li class="widget sort">  
            <div class="widget-head">
                <h3 class="title">Widget title 2</h3>
                <a href="#" class="remove">[ x ]</a>
            </div>
            <div class="widget-content">
                <img class="listimg" src="img/list.png" alt="#" />
            </div>
        </li>

        <li class="widget sort">  
            <div class="widget-head">
                <h3 class="title">Widget title 3</h3>
                <a href="#" class="remove">[ x ]</a>
            </div>
            <div class="widget-content">
                <img class="listimg" src="img/list.png" alt="#" />
            </div>
        </li>

    </ul>

    <ul id="column2" class="column">
        <li class="widget header" id="column2title">  
            <div class="widget-title">
                <h3>ROW 0 COLUMN 0</h3>
            </div>
        </li>
    </ul>

    <ul id="column3" class="column">
        <li class="widget header" id="column3title">  
            <div class="widget-title">
                <h3>ROW 0 COLUMN 1</h3>
            </div>
        </li>   
    </ul>

    <ul id="dropmenu" class="contextMenu">    
        <li class="itemlist">
            <a href="#">Item List</a>

        </li>            
        <li class="itemwimage">
            <a href="#">Featured Item w/ full image</a>
        </li>      

        <li class="editproperties">
            <a href="#">Edit Properties</a>
        </li>                    
    </ul>

    <ul id="optionsdialog">    
        <li class="optitemlist">
            <a href="#">Item List</a>

        </li>            
        <li class="optitemwimage">
            <a href="#">Featured Item w/ full image</a>
        </li>                         
    </ul>

<div id="dialog-box" class="dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable ">
   <div class="ui-corner-all ui-helper-clearfix">
       <span id="ui-dialog-title-dialog" class="ui-dialog-title">Edit Properties</span>
       <a class="ui-dialog-titlebar-close ui-corner-all" href="#"></a>
       </div>
        <div style="height: auto; min-height: 300px; width: auto;" class="ui-dialog-content ui-widget-content" id="dialog">
                <p>Change the title?</p>  <input id="title" value=" "/><br /><br />
                <p> Show title?</p>  <input id="checkBox" type="checkbox" /><br /><br />
                <p> # of Items To Display?</p>  <select name="choice" size="1"><option value="">1</option><option value="">2</option><option value="">3</option><option value="">4</option><option value="">5</option><option value="">6</option><option value="">7</option><option value="">8</option><option value="">9</option><option value="">10</option></select><br /><br />
                <p> More Link Title</p><input value="More Usability Items"/><br /><br />
                <p> More Link Url</p><input value="/tag/usability.aspx"/><br /><br />
                <p> CSS Class</p><input value="WebUsabiltiyCssClass"/><br /><br />
                <input id="saveButton" class="ui-button" type="button" value="Save" />
        </div> 
</div>  

<div id="saveDiv">
<br /><br /><input type="button" class="savebutton" value="Save Template and Close" />  <input type="button" class="savebutton" value="Save Template and Continue" />&nbsp;&nbsp; or <a href="#" class="cancel">Cancel</a>
</div>

    </div> 
```

This is my first jQuery project and the issue I'm having is whenever I open the dialog box or right click, it's obviously lost the selection for the widget.

For example, when I move one of the .sort widgets it prompts whether I want an itemlist or an itemlistwimage. Instead of just changing the option for one widget, it's changing all of them. How do I select just one since I'm no longer focused on that element?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:17:52.863

您可能需要传递相关信息：http: [//jsfiddle.net/umxzw/1/](http://jsfiddle.net/umxzw/1/)

我添加了

```
$optionsdialog.data('content', $(ui.item).find('.widget-content')); 
```

到 sortable.stop 函数并修改“.optitemlist”和“.optitemwimage”的点击处理程序以使用该数据。

# javascript - Backbone.js router and redirection problems with Internet Explorer

> ID：12062056
> 
> 赞同：12
> 
> 时间：2012-08-21T19:53:09.870
> 
> 标签：javascript, backbone.js

bit of a weird one and I'm a little baffled...

I have a page, on that page is the following (well, with a few name changes):

```
$(document).ready(function() {
  var router = new App.Routers.ExampleRouter();
  Backbone.history.start({pushState: true});
}) 
```

The router goes on its way to instantiate some collections, views etc. Everything is working absolutely fine in Chrome, Safari, Firefox and Opera. But not in IE 8 or 9 (maybe 10 too, I haven't tested).

In IE8 or 9 when the page is first requested it starts to load, but as soon as the document is ready (and the router therefore instantiated and History started) the page redirects to the site root.

There's nothing in the console that I can see prior to the redirect. There's no code anywhere else that could be somehow doing it - I mean, we have a large codebase, so it's always a possibility, but there's nothing that deals with routing or the History API that could be conflicting.

The weird part is if the `pushState: true` option is removed, the page doesn't redirect, it loads fully as it should - the router doesn't go on its way to do anything as it's now expecting hashbang style routes, but it at least doesn't kick you back to the site's root. Add the option back in, and it breaks again...

So, my first thought was obviously "Well...the History API isn't supported in IE8 or 9...must be it" but then Backbone.js is supposed to revert back to hashbang style URLs for those older browsers, so it can't be that.

What on earth is causing just IE to redirect back to the homepage when dealing with a Backbone.js router?

**EDIT**

(The below can probably be ignored now as EDIT 2 proves it did nothing, although yay for removing trailing commas)

Okay, so after a little debugging and really clutching at straws I found that the router wasn't actually being instantiated - no initialize method being called, no ability to call custom methods on the router (I'd just made a silly method to `alert` and `console.log`) and called it just after `var router = new App.Routers.ExampleRouter();`.

Calling the method was returning an error along the lines of: "object doesn't support that property or method" (all of this is just IE again, fine in other browsers). This wasn't unique to the router though, I invoked a new model too and did the same things, same thing...just wasn't being "seen". A Google of the object error suggested trailing-commas. Right enough there were some in the codebase, I removed all of them and it seemed like things were going well. All of a sudden the router (and model) were very much there - initialize method called, custom method called etc. I figured the commas may have stopped all of the JS being parsed (we concatenate multiple files).

I'd obviously been doing all of this with the `pushState` option removed. I then added `pushState: true` back in genuinely thinking that would fix it what with the above having happened. I'd thought at the time "Ah, the router never actually 'existed' so maybe `Backbone.History.Start({pushState: true})` being called sent it looking for a route, and none existed due to the router not being instantiated, and the kick-back to the homepage was just some sort of side-effect" but alas, no, the exact same thing is still happening. Add in the `pushState: true` option and the page just doesn't load, and kicks you back to the homepage.

**EDIT 2**

Okay, so I've tried some further things to no avail. I made a completely separate blank page that pulls in jQuery, Backbone.js and Underscore.js via a CDN and contains some barebones JavaScript for creating a router, instantiating it and calling Backbone.History.Start(). The code in it's entirety for that page is:

```
<!DOCTYPE html>
<html>
  <head>
    <title>Test IE</title>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.0/jquery-1.8.0.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
    <script>
      $(document).ready(function(){

        App = {
          Routers: {

          }
        };

        App.Routers.RouterTest = Backbone.Router.extend({
          routes: {
            "ietest.html" : "helloWorld"
          },

          initialize: function() {
            console.log("router init");
          },

          helloWorld: function() {
            alert("helloWorld!")
          }
        });
        router = new App.Routers.RouterTest();
        Backbone.history.start({pushState: true});
      });
    </script>

  </head>
  <body>

  </body>
</html> 
```

That's it, completely barebones, no influence from any other site assets etc. The exact same thing still happens. All browsers do what is expected, except IE (tested on 8 and 9) which again starts to load the page, then executes the route and all of a sudden redirected back to the homepage. If I turn pushState off and use hashbangs everything works as expected - so routing does 'work' for me in IE, just not with pushState set to true.

I can't see that this is a front-end thing anymore as I've stripped away everything I can? Is there any way this is a server related thing? The back-end is Ruby on Rails and the problem is exhibited locally and on staging / live servers. Or have I grossly misunderstood the way that Backbone.js degrades pushState to hashbangs with IE?

**EDIT 3**

I've [uploaded a video of the problem](http://www.screencast.com/t/ylQFhKvqLrZ)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T11:28:38.367

Internet Explorer 在 IE 10 之前不支持 pushState，请参阅

[http://caniuse.com/#search=pushState](http://caniuse.com/#search=pushState)

编辑：

要使用可选的 pushState 启动 History，您可以使用以下命令：

```
Backbone.history.start({pushState: "pushState" in window.history}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-23T10:08:28.820

在我看来，您的应用程序没有从根 URL ( `/`) 提供服务。

您正在请求`http://example.com/sub/ietest.html`，并且 Backbone 重定向到`http://example.com/#sub/ietest.html`.

您可能希望初始化`Backbone.history`指定根 URL：

```
Backbone.history.start({pushState: true, root: '/sub/'}); 
```

我还没有真正深入研究您页面的源代码（并且 JS 被缩小了），但这似乎是这种情况。也许`root: '/bible/'`？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-27T23:10:09.417

尝试评论所有 console.log() 调用。就我而言，这就是 ie9 的问题。是的，我也在问为什么:-)，很奇怪

（我没有使用 pushState，但我猜这不重要）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T18:51:28.640

在让 IE8/9（我们不支持 7 在工作中）正确使用哈希方面，这似乎对我有用：

```
var pushState = !!(window.history && window.history.pushState),
    settings = { pushState: pushState, silent: true, hashChange: !pushState ? true : false };
Backbone.history.start(settings); 
```

我将设置对象分开，因为我在工作中使用的服务存在问题，并且无论出于何种原因都没有返回结果。结果问题是否来自添加此更改仍有待辩论。这也仅限于我的用例。

IE 还需要注意的是，您现在需要处理深度链接的哈希值。

我使用`"silent": true`b/c 我在页面加载时呈现初始结果，这将防止发生任何调用。来自主干文档：

> 如果服务器已经渲染了整个页面，并且您不希望在启动历史记录时触发初始路由，则传递静默：true。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-22T11:00:06.640

不确定最初发布问题时此选项是否可用...

我通过在调用 start 时添加 {hashChange: false} 选项解决了浏览器 < IE 10（不支持 pushState）的这个问题，详见此处 - [http://backbonejs.org/#History-start](http://backbonejs.org/#History-start)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-04T13:59:17.627

看一下这个：

```
if(!(window.history && history.pushState)) {
        Backbone.history.start({ pushState: false, silent: true });
        var fragment = window.location.pathname.substr(
            Backbone.history.options.root.length);
        Backbone.history.navigate(fragment, { trigger: true });
    }
    else {
        Backbone.history.start({ pushState: true });
    } 
```

学分转到[http://blog.isotoma.com/2014/01/backbone-history-and-ie9/](http://blog.isotoma.com/2014/01/backbone-history-and-ie9/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-02T16:34:17.803

这对我有用：Backbone.history.start({root: '/my_app_dir_here/'});

# ruby-on-rails - Nginx + Unicorn 配置问题

> ID：12062058
> 
> 赞同：1
> 
> 时间：2012-08-21T19:53:19.853
> 
> 标签：ruby-on-rails, nginx, amazon-web-services, unicorn

我正在从Passenger迁移到Unicorn，并且在配置工作时遇到了一些麻烦。

我看到的问题是我的所有连接似乎都超时了，但是 stderr.log 和 stdout.log 文件中没有记录错误。我已验证我的端口在 AWS sec 组上已打开。

这就是我在 stderr.log 中看到的

```
I, [2012-08-21T19:26:36.462776 #7989]  INFO -- : unlinking existing socket=/data/test/staging/current/tmp/sockets/unicorn.sock
I, [2012-08-21T19:26:36.463048 #7989]  INFO -- : listening on addr=/data/test/staging/current/tmp/sockets/unicorn.sock fd=3
I, [2012-08-21T19:26:36.463466 #7989]  INFO -- : Refreshing Gem list
I, [2012-08-21T19:27:50.293399 #7989]  INFO -- : master process ready
I, [2012-08-21T19:27:50.687491 #8083]  INFO -- : worker=0 ready
I, [2012-08-21T19:27:50.751790 #8086]  INFO -- : worker=1 ready
cache: [GET /] miss 
```

这是我当前的配置结构：

**nginx.conf**

```
user www-data;
worker_processes  2;
daemon off;

error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;

events {
  worker_connections  1024;
}

http {
  include       /etc/nginx/mime.types;
  default_type  application/octet-stream;

  access_log    /var/log/nginx/access.log;

  sendfile on;
  tcp_nopush on;
  tcp_nodelay on;

  keepalive_timeout  65;

  gzip  on;
  gzip_http_version 1.0;
  gzip_comp_level 2;
  gzip_proxied any;
  gzip_types text/plain text/html text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript application/javascript application/json;

  server_names_hash_bucket_size 64;

  include /etc/nginx/conf.d/*.conf;
  include /etc/nginx/sites-enabled/*;
} 
```

**独角兽.rb**

```
worker_processes 2
working_directory "/data/test/staging/current"

preload_app true

timeout 30
listen "/data/test/staging/current/tmp/sockets/unicorn.sock", :backlog => 64

pid "/data/test/staging/current/tmp/pids/unicorn.pid"

# Set the path of the log files inside the log folder of the testapp
stderr_path "/data/test/staging/current/log/unicorn.stderr.log"
stdout_path "/data/test/staging/current/log/unicorn.stdout.log"

before_fork do |server, worker|
  defined?(ActiveRecord::Base) and
    ActiveRecord::Base.connection.disconnect!
end

after_fork do |server, worker|
  defined?(ActiveRecord::Base) and
    ActiveRecord::Base.establish_connection
end 
```

**000-默认**

```
upstream test_server {
 #This is the socket we configured in unicorn.rb
 server unix:/data/test/staging/current/tmp/sockets/unicorn.sock »
 fail_timeout=0;
}
server {
listen 80;
client_max_body_size 4G;
server_name http://ec2-23-22-53-139.compute-1.amazonaws.com;

keepalive_timeout 5;

# Location of our static files
root /data/test/staging/current/public;

location / {
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header Host $http_host;
  proxy_redirect off;

  # If you don't find the filename in the static files
  # Then request it from the unicorn server
  if (!-f $request_filename) {
    proxy_pass http://test_server;
    break;
  }
}

error_page 500 502 503 504 /500.html;
location = /500.html {
  root /data/test/staging/current/public;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:22:58.090

我首先将 Socket 和 Pid 文件放在共享目录中。例如，

```
/data/test/staging/shared/sockets
/data/test/staging/shared/pids 
```

当应用程序被部署并且“当前文件夹”更改为下一个版本（假设您使用 capistrano 进行部署）时，这将有所帮助。

# c# - 使用 C# 将文件/文件夹添加到 Program Files x86 文件夹

> ID：12062062
> 
> 赞同：1
> 
> 时间：2012-08-21T19:53:32.367
> 
> 标签：c#, file-permissions, program-files

我正在尝试在 32 位 Program Files 文件夹中创建一个文件目录（文件夹）来存储用户将在程序中创建的数据。但是，当我尝试这样做时，它一直说访问被拒绝。无论如何，是否允许程序访问 32 位程序文件文件夹并向其添加后续文件夹和文件？这是我下面的代码，由于没有权限而产生运行时错误。

```
string mainDirectory=Environment.GetFolderPath(Environment.SpecialFolder.ProgramFilesX86)+"\\UKC Trial Reporter Files";
if (!Directory.Exists(mainDirectory))
{
    Directory.CreateDirectory(mainDirectory);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T20:00:22.113

将您的数据存储在[`Environment.SpecialFolder.ApplicationData`](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx),`Environment.SpecialFolder.LocalApplicationData`或`Environment.SpecialFolder.CommonApplicationData`（如果数据必须可供任何用户访问）。

切勿将其存储在 %ProgramFiles% 中。%ProgramFiles% 用于... 程序文件：可执行文件、dll、app.config 文件。

除了安全原因之外，还有另一个永远不要这样做的原因：卸载时，应用程序的安装程序**必须**扫描它创建的所有文件和文件夹。这是不可能的，当 installdir 中的文件列表在应用程序生命周期内发生更改时。

幸运的是，自从 Windows Vista 发布以来，我们就有了 UAC。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T19:57:22.800

## **不要那样做**。

程序文件正是如此；它应该包含 EXE 和静态资源。

相反，您需要写入用户的`SpecialFolder.ApplicationData`文件夹。

# android - 在 onDestory() 中停止/释放 Mediaplayer 会导致 NullPointerException

> ID：12062066
> 
> 赞同：6
> 
> 时间：2012-08-21T19:54:05.590
> 
> 标签：android, media-player

我试图在 onDestroy() 中停止并释放 MediaPlayer 对象，但应用程序不断崩溃。这是代码：

```
void StartSound(final String ReaderPath) {
    mediaplayer = MediaPlayer.create(test2.this, Uri.parse(ReaderPath));

    try {
        mediaplayer.start();
        mediaplayer.setOnCompletionListener(new OnCompletionListener() {
            @Override
            public void onCompletion(MediaPlayer mp) {
                current++;
                try {
                    mp.reset();
                    mp.setDataSource(ReaderPath);
                    mp.prepare();

                } catch (Exception e) {
                    e.printStackTrace();
                }
                mp.start();

            }
        });

    } catch (Exception e) {

    }
}

@Override
    protected void onPause() {
        if (mediaplayer != null && mediaplayer.isPlaying())
            mediaplayer.pause();
        super.onPause();

    }

    @Override
    protected void onStop() {
        if (mediaplayer != null && mediaplayer.isPlaying()) {
            mediaplayer.release();
            mediaplayer.stop();
        }
        super.onDestroy();

    } 
```

日志猫：

```
08-21 22:52:26.512: E/AndroidRuntime(16410): java.lang.RuntimeException: Unable to destroy activity {com.example.test/com.example.test.test2}: java.lang.NullPointerException
08-21 22:52:26.512: E/AndroidRuntime(16410):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3235)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3253)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at android.app.ActivityThread.access$1200(ActivityThread.java:132)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1190)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at android.os.Looper.loop(Looper.java:137)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at android.app.ActivityThread.main(ActivityThread.java:4575)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at java.lang.reflect.Method.invokeNative(Native Method)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at java.lang.reflect.Method.invoke(Method.java:511)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at dalvik.system.NativeStart.main(Native Method)
08-21 22:52:26.512: E/AndroidRuntime(16410): Caused by: java.lang.NullPointerException
08-21 22:52:26.512: E/AndroidRuntime(16410):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1406)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at android.support.v4.app.FragmentManagerImpl.dispatchDestroy(FragmentManager.java:1876)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at android.support.v4.app.FragmentActivity.onDestroy(FragmentActivity.java:316)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at android.app.Activity.performDestroy(Activity.java:4629)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1079)
08-21 22:52:26.512: E/AndroidRuntime(16410):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3222)
08-21 22:52:26.512: E/AndroidRuntime(16410):    ... 11 more 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:09:49.640

你为什么从你的 onStop() 方法调用 super.onDestroy() ？你应该调用 super.onStop()。或者这是一个打字错误？

答案可能是您在`stop()`调用`MediaPlayer` *后*调用`release()`。一旦你调用`release()`了`MediaPlayer`它就会失效并且不再可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-06T06:31:37.747

停止和释放`MediaPlayer`内部`onDestroy()`方法的控制的正确方法是：

```
@Override
protected void onDestroy() {
    if (mediaplayer != null) {
        mediaplayer.stop();
         mediaplayer = null;
    }
    super.onDestroy();

} 
```

# c++ - 仅从具有重复键的多重映射中删除一个元素

> ID：12062067
> 
> 赞同：4
> 
> 时间：2012-08-21T19:54:06.123
> 
> 标签：c++, for-loop, iterator, multimap

我有一个带有 Note 对象的多图，我只想从中删除一个对象。可以有多个 Note 对象具有相同的键。问题是现在还有一些不在我指定的键范围内的对象被删除：

```
long key = note.measureNumber * 1000000 + note.startTime; // = 2000001
multimap<long, Note>::iterator it;
for (it = noteList.lower_bound(key); it != noteList.end() && it->first < (key + 1); it++) {
    if(it->second.frequency == note.frequency){
        noteList.erase(it);
    }
} 
```

当我使用 key 对象运行此代码时，`2000001`我能够擦除正确的对象，但另一个带有 key 的对象`1000017`也会被擦除。不过，这两个物体的频率相同。

知道我的 for 循环有什么问题吗？

*编辑：为了清楚起见，我只想检查具有一个特定键的对象（在这种情况下`2000001`），迭代器不需要查看具有不同键的对象。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:04:22.220

用迭代器调用 erase() 会使它失效，所以你不能继续使用它。

请参阅[从 std::multimap<> 中删除项目后我可以继续使用迭代器吗](https://stackoverflow.com/questions/446205/can-i-continue-to-use-an-iterator-after-an-item-has-been-deleted-from-stdmulti)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:05:30.533

一旦你删除了一个迭代器，它就会变得无效。如果您希望在遍历地图时从地图中删除，则您的代码需要更改。尝试这个：

```
multimap<long, Note>::iterator it;
for (it = noteList.lower_bound(key); it != noteList.end() && it->first < (key + 1);) {
    if(it->second.frequency == note.frequency){
        noteList.erase(it++);
    }
    else
    {
        ++it;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:23:37.120

正如这里已经指出的，擦除迭代器会使它失效。我想指出您拥有的代码效率低下：您不需要迭代直到循环结束。考虑一下：

```
for (it = noteList.lower_bound(key); it != noteList.upper_bound(key) && it->first == key; it++)
{
    if(it->second.frequency == note.frequency)
    {
       noteList.erase(it++);
    }
    else
    {
        ++it;
    }
} 
```

# lua - 在lua中将诸如'a'之类的字符串转换为数字

> ID：12062071
> 
> 赞同：-1
> 
> 时间：2012-08-21T19:54:17.693
> 
> 标签：lua, type-conversion

无论如何我可以获得Lua中'a'等字符的ASCII码吗？tonumber 似乎不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T20:08:00.423

[`string.byte(...)`](http://www.lua.org/manual/5.1/manual.html#pdf-string.byte)这样做：

```
print(string.byte("a")) --> 97 
```

# atk4 - 连接多个数据库

> ID：12062079
> 
> 赞同：1
> 
> 时间：2012-08-21T19:54:41.927
> 
> 标签：atk4

我正在使用 4.1.4 是否可以定义与另一个数据库的连接并将其与 dsql 一起使用？我的意思是使用这两个连接。

我可以在 config-default.php 中定义第二个连接吗？当我需要查询其他数据库时如何引用它？

```
$config['dsn']='mysql://user:user@localhost/test';
$config['dsn']='mysql://user:user@localhost/test1'; 
```

可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:58:40.927

它在此页面上进行了解释：[https ://agiletoolkit.org/doc/dsql/how](https://agiletoolkit.org/doc/dsql/how)

您可能可以通过配置文件定义它，但使用不同的键。

*配置.php：*

```
$config['dsn2']='mysql://user:user@localhost/test1'; 
```

*应用类：*

```
$this->api->db2=$this->api->add('DB')
    ->connect($this->api->getConfig('dsn2')); 
```

因为您使用的是 4.1，所以您应该改用“DBlite”类，但除此之外它的语法相同。

# javascript - 在 javascript 中捕获 X-Frame-Options 错误

> ID：12062081
> 
> 赞同：9
> 
> 时间：2012-08-21T19:54:49.077
> 
> 标签：javascript, html, error-handling, dom-events

从另一个域加载 iframe 时，有什么方法可以捕获错误。这是 jsfiddle 中的一个示例。[http://jsfiddle.net/2Udzu/](http://jsfiddle.net/2Udzu/)。如果我收到错误消息，我需要显示一条消息。

这是我想做的，但它不起作用：

```
$('iframe')[0].onerror = function(e) {
   alert('There was an error loading the iFrame');
} 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T18:45:41.310

`onerror`仅适用于脚本错误。必须使用任何其他方法进行帧内容错误检查。这是一个例子。

```
<script>
  function chkFrame(fr) {
    if (!fr.contentDocument.location) alert('Cross domain');
  }
</script>
<iframe src="http://www.google.com/" onload="chkFrame(this)"></iframe> 
```

由于跨域限制，无法检测页面是否加载成功，或者页面是否由于客户端错误（HTTP 4xx 错误）和服务器错误（HTTP 5xx 错误）而无法加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-07T11:39:33.840

我正在使用以下代码来检测是否发生了 x-frame-option 错误或另一个与 jquery

```
$(iframe).load(function (e) {
  try
    {
    // try access to check
    console.log(this.contentWindow.document);
    // Access possible ...
    }
  catch (e)
    {
    // Could not access. Read out error type 
    console.log(e);
    var messageLC = e.message.toLowerCase();
    if (messageLC.indexOf("x-frame-options") > -1 || messageLC.indexOf('blocked a frame with origin') > -1 || messageLC.indexOf('accessing a cross-origin') > -1)
      {
      // show Error Msg with cause of cross-origin access denied
      }
    else
      {
      // Shoe Error Msg with other cause
      }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-02T20:49:47.650

如果您可以访问父站点和 iframe-url，则了解页面已完全加载（没有“相同来源”问题）的一种方法是从子站点向父站点发送消息*（[postMessage](https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage)）*，如下所示；

**父网站（包含 iframe）**

```
//Listen for message
window.addEventListener("message", function(event) {
    if (event.data === "loading_success") {
        //Yay
    }
});

//Check whether message has come through or not
iframe_element.onload = function () {
    //iframe loaded...
    setTimeout(function() {
        if (!iframeLoaded) {
            //iframe loaded but no message from the site - URL not allowed
            alert("Failure!");
        }
    }, 500);
}; 
```

**子网站（来自 iframe 的 URL）**

```
parent.postMessage("loading_success", "https://the_origin_site.url/"); 
```

如果您想要多个来源的可能性，您可以`the_origin_site.url`使用像 PHP 这样的服务器端语言

* * *

仅当您尝试放入 iframe 的域与您请求的域相同时，接受的答案才有效 - 此解决方案适用于您可以访问两个域上的脚本的跨域。

# jquery - jQuery 的 .hover() 事件处理程序中的某些代码不执行

> ID：12062086
> 
> 赞同：1
> 
> 时间：2012-08-21T19:55:54.907
> 
> 标签：jquery, workflow-foundation-3

我正在尝试实现一个简单的交互：当鼠标光标悬停在特定`<li>`元素上时，隐藏元素会显示在悬停元素的顶部。隐藏元素只是一个出现的小按钮栏，以便用户可以进一步交互。我有一个`<ul>`包含一堆元素的`<li>`元素，这些元素使用 Zurb 的 Foundation 进行样式设置，以便项目显示为块网格 - 因此嵌套`<ul>`的 's.

悬停处理程序似乎工作得很好，因为无论我移动光标多快或它落在哪里，调试日志都完美地写入控制台。但是，.show() 和 .hide() 的切换从来都不是一致的。在某些情况下，当光标进入有`<li>`问题的项目时，按钮栏会出现，而在其他情况下，则不会。有时当光标退出`<li>`元素时，按钮栏永远不会隐藏。最令人费解的是，调试日志按预期调用，但处理程序中的其他代码行却没有。有人知道解决方法吗？我试过hoverIntent，但结果仍然存在。我认为这可能是因为`<li>`'s 是水平排列的，这可能会导致这个问题，但我不确定。如何确保 .hover() 方法的行为一致？

这是问题的一个jsfiddle：http: [//jsfiddle.net/DdWrD/6/](http://jsfiddle.net/DdWrD/6/)

我从一些 PHP 构建标记：

```
<div id="grids" class="twelve columns">

<!-- begin "all templates" category tab -->
<li class="active" id="allTab">
    <ul class="block-grid three-up">
        <?php

        foreach ($templates as $t) {

            echo '<li class="catItem" id="'.$t['title'].'">';
            echo '  <ul class="button-group radius"><li><a class="button small" href="#">Preview</a><li><a class="button small" href="#">Personalize</a></li></ul>';
            echo '  <img src="../images/posters/hires/'.$t['poster'].'">';
            echo '  <h6>'.$t['section'].' &nbsp;>&nbsp; '.$t['category'].'</h6>';
            echo '  <h5>'.$t['title'].'</h5>';
            echo '</li>';

            }

        ?>
    </ul>
</li>
<!-- end "all templates" tab -->

</div> 
```

在我希望出现在悬停上的按钮栏的 SCSS 样式中

```
#grids{
>li{
    >ul{
        >li{
            >ul{
                padding-bottom: 0px;
                margin-bottom: 0px;
                width: 150px;
                position: absolute;
                display: none;
                >li{
                    padding: 0px;
                    width: 50%;
                    border-right: 0px none;
                }
            }
            border-top: 1px dotted $light-dotted-border;
            border-left: none;
            border-right: 1px dotted $light-dotted-border;
            border-bottom: none;
            padding: 10px;
            cursor: pointer;
         }
      }
   }
} 
```

这是驱动悬停事件的 Javascript：

```
function initCatalog()
{
$('.catItem').hover(hoverCatItem, exitCatItem);
}

function hoverCatItem(e)
{
    debug.log("[CATALOG]    :   Hovering over catalog item.");
    $(e.target).children('ul').show();
}

function exitCatItem(e)
{
    debug.log("[CATALOG]    :   Exit catalog item.");
    $(e.target).children('ul').hide();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:22:20.773

而不是使用`e.target`，使用`this`

```
function hoverCatItem(e)
{

    var bar = $(this).children('.button-group');
    bar.stop(true, true).show();
}

function exitCatItem(e)
{

    var bar = $(this).children('.button-group');
    bar.stop(true, true).hide();
} 
```

# git - 用于 repo 的 Github 存储库名称和本地文件夹名称

> ID：12062088
> 
> 赞同：12
> 
> 时间：2012-08-21T19:55:59.783
> 
> 标签：git, github

我已将我的应用程序源（git repo）存储在文件夹中：

```
MyProject/front_app 
```

但是在 GitHub 上，我希望将 repo 命名为 not `front_app`but rather `my_project_front_app`，有可能吗？

这是一个好方法还是更好地`my_project_front_app`为这个 git repo 提供本地文件夹？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-21T19:59:34.027

你可以做你想做的。本地和远程存储库可以有不同的名称。

如果您已经有一个本地存储库，则可以添加一个远程（根据需要命名）：

```
git remote add origin http://distant/a_remote_repository 
```

如果你已经有一个 GitHub 存储库，你可以将它克隆到你想要的本地文件夹中：

```
git clone http://distant/a_remote_repository a_different_local_folder 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:59:30.233

没有理由不能以不同的方式命名 GitHub 存储库、您的本地克隆和任何其他代码副本。除了您和您​​的合作者保持直截了当的能力之外，它没有真正的优势或劣势。

```
git clone <url> <path> ;# path is a variable; it's the url that's well-defined
git remote add <name> <url> ;# as can be seen in the 'git remote add' command 
```

# parsing - 使用 ocamllex/ocamlyacc 解析部分语法

> ID：12062094
> 
> 赞同：3
> 
> 时间：2012-08-21T19:56:20.910
> 
> 标签：parsing, ocaml, ocamlyacc, ocamllex

我一直在使用正则表达式来检查一堆 Verilog 文件并提取某些语句。目前，正则表达式对此很好，但是，我开始意识到需要一个真正的解析器来处理嵌套结构，所以我正在研究 ocamllex/ocamlyacc。我想首先复制我在正则表达式实现中得到的内容，然后慢慢地在语法中添加更多内容。

现在我主要对提取模块声明和实例感兴趣。为了让这个问题更简短，让我们只看一下模块声明。

在 Verilog 中，模块声明如下所示：

```
module modmame ( ...other statements ) endmodule; 
```

我当前的正则表达式实现只是检查是否有一个使用特定名称声明的模块（检查我感兴趣的名称列表 - 我不需要找到所有模块声明，只是具有特定名称的模块声明）。所以基本上，我得到了我想要解析的 Verilog 文件的每一行并进行这样的匹配（带有 Pythonish 和 Rubyish 元素的伪 OCaml）：

```
foreach file in list_of_files:
  let found_mods = Hashtbl.create 17;
  open file 
  foreach line in file:
    foreach modname in modlist
    let mod_patt=  Str.regexp ("module"^space^"+"^modname^"\\("^space^"+\\|(\\)") in 
    try
      Str.search_forward (mod_patt) line 0
      found_mods[file] = modname; (* map filename to modname *)
    with Not_found -> () 
```

这很好用。模块声明可以出现在 Verilog 文件中的任何位置；我只是想知道该文件是否包含该特定声明，我不在乎该文件中可能还有什么。

我第一次尝试将其转换为 ocamllex/ocamlyacc：

verLexer.mll:

```
rule lex = parse
  | [' ' '\n' '\t']               { lex lexbuf }
  | ['0'-'9']+ as s               { INT(int_of_string s) }
  | '('                           { LPAREN }
  | ')'                           { RPAREN }
  | "module"                      { MODULE }
  | ['A'-'Z''a'-'z''0'-'9''_']+ as s  { IDENT(s) }
  | _                             { lex lexbuf }
  | eof 
```

verParser.mly：

```
%{ type expr =  Module of expr | Ident of string | Int of int %}

%token <int> INT
%token <string> IDENT
%token  LPAREN RPAREN MODULE EOF

%start expr1
%type <expr> expr1

%%

expr:   
| MODULE IDENT LPAREN    { Module( Ident $2) };

expr1:   
| expr EOF { $1 }; 
```

然后在 REPL 中尝试一下：

```
# #use "verLexer.ml" ;; 
# #use "verParser.ml" ;; 
# expr1 lex (Lexing.from_string "module foo (" ) ;;
- : expr = Module (Ident "foo") 
```

太好了，它有效！

然而，一个真正的 Verilog 文件将不止包含一个模块声明：

```
# expr1 lex (Lexing.from_string "//comment\nmodule foo ( \nstuff" ) ;;
Exception: Failure "lexing: empty token". 
```

我并不真正关心该模块定义之前或之后出现的内容，有没有办法只提取语法的那部分以确定Verilog文件包含'module foo（'语句？是的，我意识到正则表达式是工作正常，但是，如上所述，我计划慢慢地发展这个语法并添加更多元素，正则表达式将开始分解。

编辑：我在 lex 规则中添加了一个 match any char：

```
 | _                             { lex lexbuf } 
```

认为它会跳过迄今为止不匹配的任何字符，但这似乎不起作用：

```
 # expr1 lex (Lexing.from_string "fof\n module foo (\n" ) ;;
 Exception: Parsing.Parse_error. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T05:35:48.700

`ocamlyacc`第一个广告分钟：您应该考虑使用 François Pottier 的[Menhir](http://gallium.inria.fr/~fpottier/menhir/)代替，它就像“yacc，升级版”，在所有方面都更好（更易读的语法，更强大的构造，更容易调试......），但仍然非常相似。它当然可以与`ocamllex`.

您的`expr1`规则只允许以规则开始和结束`expr`。您应该放大它以允许“东西”之前或之后`expr`。就像是：

```
junk:
| junk LPAREN
| junk RPAREN
| junk INT
| junk IDENT

expr1:
| junk expr junk EOF 
```

请注意，此语法不允许`module`标记出现在`junk`节中。这样做会有点问题，因为它会使语法模棱两可（您要查找的结构可能嵌入到`expr`or中`junk`）。如果您可能`module`在您正在查看的表单之外有一个标记，您应该考虑更改词法分析器以`module ident (`在单个标记中捕获整个感兴趣的结构，以便可以从语法中原子地匹配它。然而，从长远来看，拥有更细粒度的令牌可能会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T21:02:28.873

正如@gasche 所建议的那样，我尝试了menhir，并且已经获得了更好的结果。我将 verLexer.ml 更改为：

```
{
  open VerParser
}
rule lex = parse
  | [' ' '\n' '\t']               { lex lexbuf }
  | ['0'-'9']+ as s               { INT(int_of_string s) }
  | '('                           { LPAREN }
  | ')'                           { RPAREN }
  | "module"                      { MODULE }
  | ['A'-'Z''a'-'z''0'-'9''_']+ as s  { IDENT(s) }
  | _  as c                       { lex lexbuf }
  | eof                           { EOF } 
```

并将 verParser.mly 更改为：

```
%{ type expr =  Module of expr | Ident of string | Int of int
           |Lparen | Rparen  | Junk %}

%token <int> INT
%token <string> IDENT
%token  LPAREN RPAREN MODULE EOF

%start expr1
%type <expr> expr1

%%

expr:
  | MODULE IDENT LPAREN    { Module( Ident $2) };

junk: 
  |  LPAREN {  }
  |  RPAREN {  }
  |  INT {  }
  |  IDENT {  } ;

expr1:
| junk* expr junk* EOF { $2 }; 
```

这里的关键是 menhir 允许使用“*”对规则进行参数化，如上一行中我在规则中使用“垃圾*”表示匹配垃圾 0 次或更多次。ocamlyacc 似乎不允许这样做。

现在，当我在 REPL 中尝试它时，我得到：

```
# #use "verParser.ml" ;;
# #use "verLexer.ml" ;;
# expr1 lex (Lexing.from_string "module foo ( " ) ;;
- : expr = Module (Ident "foo")
# expr1 lex (Lexing.from_string "some module foo ( " ) ;;
- : expr = Module (Ident "foo")
# expr1 lex (Lexing.from_string "some module foo (\nbar " ) ;;
- : expr = Module (Ident "foo")
# expr1 lex (Lexing.from_string "some module foo (\n//comment " ) ;;
- : expr = Module (Ident "foo")
# expr1 lex (Lexing.from_string "some module fot foo (\n//comment " ) ;;
Exception: Error.
# expr1 lex (Lexing.from_string "some module foo (\n//comment " ) ;; 
```

这似乎完全按照我的意愿工作。

# c# - 另一台电脑的 SQL 连接字符串

> ID：12062096
> 
> 赞同：1
> 
> 时间：2012-08-21T19:56:27.037
> 
> 标签：c#, database, sql-server-2008, connection-string

我开发了一个应用程序。它使用以下连接字符串在我的电脑上加载 sql 数据库：

```
Data Source=.\SQLEXPRESS;AttachDbFilename=D:\Database\Books.mdf;Integrated Security=True;User Instance=True

private void Window_Loaded(object sender, RoutedEventArgs e)
    {

        DataSet ds = new DataSet();
        SqlConnection con = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=D:\Database\Books.mdf;Integrated Security=True;User Instance=True");
        SqlDataAdapter da = new SqlDataAdapter();
        da.SelectCommand = new SqlCommand("SELECT * FROM Lessons", con);
        da.Fill(ds);
        grdPersonnel1.DataContext = ds.Tables[0];
        con.Open();
    } 
```

但是，我的数据库数据没有加载到另一台电脑中！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T23:33:10.633

您是否在该计算机上运行 SQL 服务器实例？

尝试在调试模式下在另一台 PC 上运行您的应用程序/解决方案，您将看到究竟是什么错误...确保您尝试并捕获每个方法/事件。

检查这个SO帖子：

[是否可以在没有 SQL Server 程序的情况下运行 mdf 数据库？（C＃）](https://stackoverflow.com/questions/10366586/is-it-possible-to-run-a-mdf-database-without-sql-server-program-c)

[连接到 sql server 数据库 mdf 文件而不在客户端计算机上安装 sql server？](https://stackoverflow.com/questions/2054905/connecting-to-sql-server-database-mdf-file-without-installing-sql-server-on-clie)

问候

# cakephp - cakephp render-false 动作仍然与 html 模板相呼应

> ID：12062097
> 
> 赞同：4
> 
> 时间：2012-08-21T19:56:29.473
> 
> 标签：cakephp, layout

对于我的控制器中不需要视图的操作，我将禁用布局和模板，如下所示：

```
$this->autoRender = false; 
```

这一切都很好。然而，在同一个动作中，我正在呼应“通过”或“失败”以表明我对结果的看法。问题是还回显了一堆文本：（最后是我的“失败”或“通过”）

```
 <!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
</head>
<body>
        </body>
</html>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head> .... 
```

这被重复了 8 到 9 次。

我怎样才能摆脱这种情况，所以只有我的“通过”或“失败”才会得到回应？你能帮我吗？

我试过了

```
$this->layout = false; and
$this->render(false); 
```

非常感谢。

****更新：**** 刚刚注意到它还突然出现了一堆 javascrip 代码，（已删除 < 用于粘贴此处）例如：pre class="cake-error" a href="javascript:void(0);" onclick="document.getElementById('cakeErr5035af14add0c-trace').style.display = (document.getElemen..**

 ******这是整个动作******

 **```
//This action is called via:
//mysite/qcas/loadProdFromFile/dirId:76
// or
//mysite/qcas/loadProdFromFile/dirId:76/filePath:J:\ep12219 - Air Pollution\Load\prodValues.csv

function loadProdFromFile() {
    $this->autoRender = false;

    // here we get dir info based on first (and perhaps sole) param received: dirId
    $dirName = $this->Qca->Dir->find('first', array(
        'recursive' => 0,
        'fields' => array('Dir.name'),
        'conditions' => array('Dir.id' => $this->request->params['named']['dirId']),
            )
    );

    //if used did not provide filePath param, we use a default location based on dir info
    if ((is_null($this->request->params['named']['filePath']))) {
        $basedir = '/disk/main/jobs/';
        $dirs = scandir($basedir);

        $found = 0;
        foreach ($dirs as $key => $value) {
            if (strpos($value, $dirName['Dir']['name']) > -1) {
                $found = 1;
                break;
            }
        }
        if (!$found) {
            echo 'failfile';
            exit;
        }
        $loadDir = '/disk/main/jobs/' . $value . '/Load/';
        $thefiles = glob($loadDir . "*.csv");
        $prodFile = $thefiles[0];
    } else {
        // if user provided a path, we build a unix path
        // for some reason the extension is not posted, so we append it: only csv can be processed anyways
        $prodFile = AppController::BuildDirsFile($this->request->params['named']['filePath']) . ".csv";
    }

    // we get here with a working file path
    $fileHandle = fopen($prodFile, 'r');

    if ($fileHandle) {
        // start processing file to build $prodata array for saving to db
        $counter = 0;
        while (!feof($fileHandle)) {
            $line = fgets($fileHandle);
            if (strlen($line) == 0) {
                break;
            }

            $values = explode(',', $line);
            $prodata[$counter]['dir_id'] = $this->request->params['named']['dirId'];
            $prodata[$counter]['name'] = $dirName['Dir']['name'];
            $prodata[$counter]['employee_id'] = $values[1];

            $a = strptime($values[0], '%m/%d/%Y');
            $timestamp = mktime(0, 0, 0, $a['tm_mon'] + 1, $a['tm_mday'], $a['tm_year'] + 1900);
            $prodata[$counter]['qca_start'] = $timestamp;

            $end = $timestamp + ($values[2] * 60);
            $prodata[$counter]['qca_end'] = $end;

            $prodata[$counter]['qca_tipcode'] = $values[3] * -1;

            $prodata[$counter]['qca_durint'] = 0;
            $prodata[$counter]['qca_durtel '] = 0;
            $prodata[$counter]['qca_durend'] = 0;
            $prodata[$counter]['qca_signal'] = 0;
            $prodata[$counter]['qca_restart'] = 0;
            $prodata[$counter]['qca_stop'] = 0;
            $prodata[$counter]['qca_prevtipc'] = 0;
            $prodata[$counter]['qca_respid'] = 0;
            $prodata[$counter]['qca_lastq'] = 0;
            $prodata[$counter]['qca_smskey'] = 0;
            $prodata[$counter]['qca_telconta'] = 0;
            $prodata[$counter]['qca_execuqoc'] = 0;
            $counter++;
        }
    } else {
        // file was just no good
        echo 'fail';
        exit;
    }
    if (count($prodata) > 0) {
        $this->Qca->saveMany($prodata);
        echo count($prodata);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T12:28:53.233

[首先，我将在http://api.cakephp.org/class/controller](http://api.cakephp.org/class/controller)下粘贴来自 cakeapi 的片段，了解 autoRender 的工作原理：

autoRender boolean设置为 true 以在操作逻辑**之后**
自动渲染视图。

 **所以这：

```
 $this->autoRender = false ; 
```

通常会在操作逻辑完成后关闭渲染视图。所以这就是为什么你会从你的动作逻辑中得到回声。您可以是否从代码中删除回声以防止显示它们或尝试此模式，

如果有问题：

```
$this->Session->setFlash('Error');
$this->redirect(array('action' => 'your_error_page')); 
```

这会将您移动到带有错误字符串作为 Flash 文本的错误页面，或者当一切正常时：

```
$this->Session->setFlash('Its fine dude!');
$this->redirect(array('action' => 'your_ok_page')); 
```******

# javascript - 任何免费服务可用作 HTML5 离线缓存链接？

> ID：12062098
> 
> 赞同：0
> 
> 时间：2012-08-21T19:56:36.507
> 
> 标签：javascript, html, dropbox, html5-audio

我尝试在我的缓存清单中使用 Dropbox 链接，但它不起作用。

我尝试不使用缓存清单，并且简单地：

```
<audio src="dropbox url" autoplay="true"></audio> 
```

它也不播放声音。如果我指向`src`项目中或硬盘上的文件，它就可以工作。有没有免费的服务来托管这些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:48:33.320

我不知道任何托管音频内容的免费和合法服务。我建议研究基于云的存储选项（AWS S3、Rackspace Cloud Files 等）。他们通常会根据您存储的文件数量和每月的数据传输量来收取费用。

您应该能够[在缓存清单中使用外部 URL](http://html5doctor.com/go-offline-with-application-cache/)。但是，您尝试使用的 URL 可能具有阻止它以这种方式使用的响应标头。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T23:10:02.627

您的意思是简单且**免费**的东西，通过 ftp-access 提供*100gb 存储和 100gb 流量*？
请参阅[http://www.100gb.co/](http://www.100gb.co/)等网站。这类服务还有很多，只需使用 GOOGLE！想想看.. 什么样的 $%^&* 会支付 2012 年的费用？！？

您还可以使用 sound-cloud 之类的服务。主要区别在于您不再链接到裸 *.mp3 文件，而是链接到 flash 文件。

警告：只要确保您合法拥有您发布的内容即可。例如，当我从我们的乐队中撕下专辑并将它们发布到网上时，我可以这样做，我共同编写/拥有这些材料。就像录音一样：mp3 的音质永远不如真正的完整 cd。不可能的。

祝你好运！！

# javascript - jQuery - 数据提取问题（html遍历）

> ID：12062100
> 
> 赞同：0
> 
> 时间：2012-08-21T19:56:42.493
> 
> 标签：javascript, jquery, html

在我的页面中有一个名为“手风琴”的标签。这是它的内部html：

```
<DIV class="group section" jQuery18007183007327795561="8">
    <H3 aria-expanded=false class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role=tab tabIndex=-1 aria-selected=false jQuery18007183007327795561="5">
        <SPAN class="ui-icon ui-icon-triangle-1-e">
        </SPAN>
        <A tabIndex=-1 href="#">
            1\. section name
        </A>
    </H3>
    <DIV style="DISPLAY: none" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" role=tabpanel jQuery18007183007327795561="31">
        <DIV id=accordion1 class="ui-accordion ui-widget ui-helper-reset ui-accordion-icons ui-sortable" role=tablist jQuery18007183007327795561="11">
            <DIV class=group jQuery18007183007327795561="14">
                <H3 aria-expanded=true class="ui-accordion-header ui-helper-reset ui-state-default ui-state-active ui-corner-top" role=tab tabIndex=0 aria-selected=true jQuery18007183007327795561="12">
                    <SPAN class="ui-icon ui-icon-triangle-1-s">
                    </SPAN>
                    <A tabIndex=-1 href="#">
                        item name
                    </A>
                </H3>
                <DIV class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" role=tabpanel>
                    <A href="#">
                        Edit Item
                    </A>
                    <BR>
                    <SPAN style="DISPLAY: none">
                        4900bc3b-a086-4d0c-89b8-09e3724aac8e
                    </SPAN>
                </DIV>
            </DIV>
            <DIV class=group jQuery18007183007327795561="15">
                <H3 aria-expanded=false class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role=tab tabIndex=-1 aria-selected=false jQuery18007183007327795561="13">
                    <SPAN class="ui-icon ui-icon-triangle-1-e">
                    </SPAN>
                    <A tabIndex=-1 href="#">
                        item name
                    </A>
                </H3>
                <DIV style="DISPLAY: none" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" role=tabpanel>
                    <A href="#">
                        Edit Item
                    </A>
                    <BR>
                    <SPAN style="DISPLAY: none">
                        0d59f87e-a294-4f85-beae-a0e266ab6a7e
                    </SPAN>
                </DIV>
            </DIV>
        </DIV>
    </DIV>
</DIV>
<DIV class="group section" jQuery18007183007327795561="9">
    <H3 aria-expanded=false class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role=tab tabIndex=-1 aria-selected=false jQuery18007183007327795561="6">
        <SPAN class="ui-icon ui-icon-triangle-1-e">
        </SPAN>
        <A tabIndex=-1 href="#">
            2\. section name
        </A>
    </H3>
    <DIV style="DISPLAY: none" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" role=tabpanel>
        <DIV id=accordion2 class="ui-accordion ui-widget ui-helper-reset ui-accordion-icons ui-sortable" role=tablist jQuery18007183007327795561="16">
            <DIV class=group jQuery18007183007327795561="20">
                <H3 aria-expanded=true class="ui-accordion-header ui-helper-reset ui-state-default ui-state-active ui-corner-top" role=tab tabIndex=0 aria-selected=true jQuery18007183007327795561="17">
                    <SPAN class="ui-icon ui-icon-triangle-1-s">
                    </SPAN>
                    <A tabIndex=-1 href="#">
                        item name
                    </A>
                </H3>
                <DIV class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" role=tabpanel>
                    <A href="#">
                        Edit Item
                    </A>
                    <BR>
                    <SPAN style="DISPLAY: none">
                        1cbd8a6b-3a90-4ee7-8072-68663b42e937
                    </SPAN>
                </DIV>
            </DIV>
            <DIV class=group jQuery18007183007327795561="21">
                <H3 aria-expanded=false class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role=tab tabIndex=-1 aria-selected=false jQuery18007183007327795561="18">
                    <SPAN class="ui-icon ui-icon-triangle-1-e">
                    </SPAN>
                    <A tabIndex=-1 href="#">
                        item name
                    </A>
                </H3>
                <DIV style="DISPLAY: none" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" role=tabpanel>
                    <A href="#">
                        Edit Item
                    </A>
                    <BR>
                    <SPAN style="DISPLAY: none">
                        5a02ebe6-41cd-441c-9b4e-7c40e4e6d8f9
                    </SPAN>
                </DIV>
            </DIV>
            <DIV class=group jQuery18007183007327795561="22">
                <H3 aria-expanded=false class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role=tab tabIndex=-1 aria-selected=false jQuery18007183007327795561="19">
                    <SPAN class="ui-icon ui-icon-triangle-1-e">
                    </SPAN>
                    <A tabIndex=-1 href="#">
                        item name
                    </A>
                </H3>
                <DIV style="DISPLAY: none" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" role=tabpanel>
                    <A href="#">
                        Edit Item
                    </A>
                    <BR>
                    <SPAN style="DISPLAY: none">
                        f4408171-033b-454c-9fc1-5849e7c0c65b
                    </SPAN>
                </DIV>
            </DIV>
        </DIV>
    </DIV>
</DIV>
<DIV class="group section" sizset="true" sizcache006684201465290301="0.0.5" jQuery18007183007327795561="10">
    <H3 aria-expanded=true class="ui-accordion-header ui-helper-reset ui-state-active ui-corner-top" role=tab tabIndex=0 aria-selected=true jQuery18007183007327795561="7">
        <SPAN class="ui-icon ui-icon-triangle-1-s">
        </SPAN>
        <A tabIndex=-1 href="#">
            3\. section name
        </A>
    </H3>
    <DIV style="PADDING-BOTTOM: 11px; DISPLAY: block; OVERFLOW: auto; PADDING-TOP: 11px" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" role=tabpanel sizset="false" sizcache006684201465290301="0.0.5" jQuery18007183007327795561="30">
        <DIV id=accordion3 class="ui-accordion ui-widget ui-helper-reset ui-accordion-icons ui-sortable" role=tablist sizset="false" sizcache006684201465290301="0.0.5" jQuery18007183007327795561="23">
            <DIV class=group jQuery18007183007327795561="27">
                <H3 aria-expanded=true class="ui-accordion-header ui-helper-reset ui-state-default ui-state-active ui-corner-top" role=tab tabIndex=0 aria-selected=true jQuery18007183007327795561="24">
                    <SPAN class="ui-icon ui-icon-triangle-1-s">
                    </SPAN>
                    <A tabIndex=-1 href="#">
                        item name
                    </A>
                </H3>
                <DIV class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" role=tabpanel>
                    <A href="#">
                        Edit Item
                    </A>
                    <BR>
                    <SPAN style="DISPLAY: none">
                        a45a589c-e829-4ea7-b615-a7975b1dcf31
                    </SPAN>
                </DIV>
            </DIV>
            <DIV class=group jQuery18007183007327795561="28">
                <H3 aria-expanded=false class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role=tab tabIndex=-1 aria-selected=false jQuery18007183007327795561="25">
                    <SPAN class="ui-icon ui-icon-triangle-1-e">
                    </SPAN>
                    <A tabIndex=-1 href="#">
                        item name
                    </A>
                </H3>
                <DIV style="DISPLAY: none" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" role=tabpanel>
                    <A href="#">
                        Edit Item
                    </A>
                    <BR>
                    <SPAN style="DISPLAY: none">
                        20f03252-bad2-4016-9bab-b8be5b07761e
                    </SPAN>
                </DIV>
            </DIV>
            <DIV class=group jQuery18007183007327795561="29">
                <H3 aria-expanded=false class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role=tab tabIndex=-1 aria-selected=false jQuery18007183007327795561="26">
                    <SPAN class="ui-icon ui-icon-triangle-1-e">
                    </SPAN>
                    <A tabIndex=-1 href="#">
                        item name
                    </A>
                </H3>
                <DIV style="DISPLAY: none" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" role=tabpanel>
                    <A href="#">
                        Edit Item
                    </A>
                    <BR>
                    <SPAN style="DISPLAY: none">
                        4ab593fd-cf32-4eb0-814a-29b1486ee121
                    </SPAN>
                </DIV>
            </DIV>
        </DIV>
    </DIV>
</DIV> 
```

我希望能够提取文本，但只能提取某些文本。结构如下：

```
1\. <section name>
    <item>
    <item>
    .
    .
    .
2\. <section name>
3\. <section name>
.
.
. 
```

我需要提取部分名称和项目 ID 号（例如 4900bc3b-a086-4d0c-89b8-09e3724aac8e）。

根据提取，我需要创建一个包含所有数据组合的字符串（以一种以后易于阅读且没有任何缺陷的方式），例如： `<section name>~~<item ID>,<item ID>^^<section name>~~<item ID>,<item ID>`...等

如何编写 jquery 选择代码？我不知道...

注意：请注意，该部分的类是“组部分”，而项目的类是“组”，也许这会有所帮助？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:44:52.607

我建议阅读 jquery 的选择器文档。[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T05:31:57.260

您可以按如下方式修改此 Html：

```
<DIV class="group section" jQuery18007183007327795561="8">
    <H3 aria-expanded=false class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role=tab tabIndex=-1 aria-selected=false jQuery18007183007327795561="5">
        <SPAN class="ui-icon ui-icon-triangle-1-e">
        </SPAN>
        <A class="SelectThis" tabIndex=-1 href="#">
            1\. section name
        </A>
    </H3>
    <DIV style="DISPLAY: none" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" role=tabpanel jQuery18007183007327795561="31">
        <DIV id=accordion1 class="ui-accordion ui-widget ui-helper-reset ui-accordion-icons ui-sortable" role=tablist jQuery18007183007327795561="11">
            <DIV class=group jQuery18007183007327795561="14">
                <H3 aria-expanded=true class="ui-accordion-header ui-helper-reset ui-state-default ui-state-active ui-corner-top" role=tab tabIndex=0 aria-selected=true jQuery18007183007327795561="12">
                    <SPAN class="ui-icon ui-icon-triangle-1-s">
                    </SPAN>
                    <A class="SelectThis" tabIndex=-1 href="#">
                        item name
                    </A>
                </H3>
                <DIV class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" role=tabpanel>
                    <A href="#">
                        Edit Item
                    </A>
                    <BR>
                    <SPAN style="DISPLAY: none">
                        4900bc3b-a086-4d0c-89b8-09e3724aac8e
                    </SPAN>
                </DIV>
            </DIV>
            <DIV class=group jQuery18007183007327795561="15">
                <H3 aria-expanded=false class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role=tab tabIndex=-1 aria-selected=false jQuery18007183007327795561="13">
                    <SPAN class="ui-icon ui-icon-triangle-1-e">
                    </SPAN>
                    <A class="SelectThis" tabIndex=-1 href="#">
                        item name
                    </A>
                </H3>
                <DIV style="DISPLAY: none" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" role=tabpanel>
                    <A href="#">
                        Edit Item
                    </A>
                    <BR>
                    <SPAN style="DISPLAY: none">
                        0d59f87e-a294-4f85-beae-a0e266ab6a7e
                    </SPAN>
                </DIV>
            </DIV>
        </DIV>
    </DIV>
</DIV>
....... 
```

现在在类名“SelectThis”上使用 jquery 选择器函数， `.each()`遍历它们中的每一个并读取值。这能解决吗？如果不是，请分享您面临的问题。

# ruby-on-rails - Rails 3 Linkedin API 宝石

> ID：12062105
> 
> 赞同：0
> 
> 时间：2012-08-21T19:57:06.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, linkedin

我正在尝试使用linkedin gem在rails 3应用程序中设置linkedin api。我不希望用户必须验证我的应用才能让 API 获取他们的信息。我只需要他们的一份公开资料（标题）。所以，也许我应该只使用 xml 或 json 来实现这一点（也不完全确定如何使用linkedin 来实现）。

我在助手中有以下内容，以便我可以在用户循环中调用linkedin_header()。在调试时，我只有“客户端”作为以下代码的最后一行。它按预期输出（#）。看来我离成功只有一步之遥。如何访问给定的用户标题？我尝试使用“client = client.profile(:url => 'linkedin_user_url')”，但返回“必须代表成员进行呼叫”。

```
 def linkedin_header(account_user) 
      user = User.find(account_user)
      account = Account.where(:user_id => user, :external_id => 1)
      api_key = 'aaaaaaaa'
      api_secret = 'bbbbbbbb'

      client = LinkedIn::Client.new(api_key, api_secret)
      rtoken = client.request_token.token # this returns correctly
      rsecret = client.request_token.secret # this returns correctly
      client
    # client = client.profile(:url => 'linkedin_user_url')
 end 
```

所以，我想我有两个问题。对于上述内容，我的请求（任何用户的公共标题）是否过于简单……我应该使用 XML 还是 JSON。而且，如果我关闭...我可以让 API 为我工作，而无需用户通过linkedin 进行身份验证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T21:40:01.770

根据我从 LinkedIn API 参考 (http://developer.linkedin.com/documents/authentication) 中读到的内容

只有在通过身份验证后，您才必须向他们的 API 发出请求。（使用 OAuth 密钥）而不仅仅是获取公开可用的信息。

似乎因为您想要一小段信息（任何用户的公共标题），您需要某种实现，例如 Facebook 的 OpenGraph。在 LinkedIn 上环顾四周后，我没有看到任何类似的公开实施。

我建议检查一下这个宝石：

[https://github.com/yatishmehta27/linkedin-scraper](https://github.com/yatishmehta27/linkedin-scraper)

这似乎是您正在寻找的解决方案类型。

# javascript - jquery mouseenter - mouseleave 不工作

> ID：12062106
> 
> 赞同：1
> 
> 时间：2012-08-21T19:57:17.910
> 
> 标签：javascript, jquery, session

我想更改不同表 td 中的图像。我想用 javascript 更改它，因为我使用 PHP Session 变量用于 4 种不同的语言。这意味着，一个表格单元格将有 8 个不同的图像（1 个语言的 2 个图像，一个普通图像和悬停图像）。

我有以下代码：

```
var jsGlobalLang = "<?php echo $_SESSION['lang'];?>";

$(".menu-item").mouseenter(function(){

    var item_id = "";

    switch(this.id)
    {
        case 'home' : { item_id = "acasa";break; }
        case 'proiectaredecasa' : { item_id = "proiectare";break; }
        case 'caseconstruite' : { item_id = "case_construite";break; }
        case 'avantaje' : { item_id = "avantaje";break; }
        case 'oferte' : { item_id = "oferte";break; }
    }

    $(this).html("<img src='images/lang/"+ jsGlobalLang +"_" + item_id + "_hover.gif' alt='' />");
}); 
```

它可以工作，但是当我移出鼠标时，该功能不起作用。我试图调用 alert(); 检查警报框是否弹出的功能，但没有。

```
$(".menu-item").mouseout(function(){
   alert('TEST !');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:37:17.690

您使用哪个版本的 jQuery？我用的是最新的，mouseout/mouseleave 好像有问题

[http://bugs.jquery.com/ticket/12366](http://bugs.jquery.com/ticket/12366)

让我们等他们解决这个问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:07:50.767

我相信你需要`mouseleave`在这种情况下使用，而不是`mouseout`

```
$(".menu-item").mouseleave(function(){
   alert('TEST !');
}); 
```

或使用`mouseover`代替`mouseenter`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:05:54.513

好吧，我认为如果您替换 td 的 html

```
 $(this).html("<img src='images/lang/"+ jsGlobalLang +"_" + item_id + "_hover.gif' alt='' />"); 
```

`$(".menu-item")`由于没有 class = 的元素，因此没有 mouseout`.menu-item`

我没有对此进行测试，但可能是这种情况

# javascript - Javascript 不会在生成的页面上晃动

> ID：12062108
> 
> 赞同：1
> 
> 时间：2012-08-21T19:57:20.487
> 
> 标签：javascript, jquery-mobile

我是 html5 & js 的新手，我在开发[jQuery Mobile 示例](http://tutorialzine.com/2011/08/jquery-mobile-product-website/)时遇到了一些麻烦。

From this, i'm just calling another header (partial) when a product is selected to render.

**_header2.php**：

```
<!DOCTYPE html>
<head> 
<title>h2: <?php echo $_GET['product']; ?> </title>
<meta charset="UTF-8" />
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;' name='viewport' />
<link rel='stylesheet' href='assets/css/styles_mob.css'/>
<link rel='stylesheet' href='assets/css/styles.css' />
<link href='assets/css/jquery-mobile.css?<?php echo filemtime("assets/css/jquery-mobile.css");?>' type='text/css' rel='stylesheet' />
<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.min.js'></script>
<script type='text/javascript' src='http://code.jquery.com/mobile/1.0rc2/jquery.mobile-1.0rc2.min.js'></script>
</script>

<script type='text/javascript'>
function mymessage(msg)
{
if(!msg) msg="?";
alert(msg);
}

</script>

</head>

<body onload="mymessage('onload !')">

<div data-role="page" id="Home"> 
<div data-role="header" data-theme="b">
<a href="./" data-icon="home" data-iconpos="notext" data-transition="fade">Home</a>
<h1> <?php echo $title?></h1>
</div>

<div data-role="content"> 
```

标题代码在生成的页面上正确显示，但在 body 标记中调用**mymessage()**的 js不起作用。当我尝试从另一个部分代码（_product.php）调用它时，同样的问题：

```
<li><a href='#Gallery1' onClick='mymessage(\"press gallery\")' >...</li> 
```

...concole 返回：**referenceError：mymessage 未定义**

一切都只有在刷新当前页面时才会摇滚！！

我骑过一些有类似问题的帖子（[1、2、3](https://stackoverflow.com/questions/12022027/javascript-or-jquery-doesnt-work-in-dynamically-generated-content) [）](https://stackoverflow.com/questions/8867194/jquery-on-not-working-with-dynamic-dom-html)，但我还是迷路了。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:59:19.303

你错过了`<html>`标签。您还有一个额外的`</script>`结束标签。这可能会导致您的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:43:02.153

有各种奇怪的编码样式和错误，例如缺少`<html>`标记、额外的`</script>`结束标记、缺少锚点上的结束标记 in`<li><a href='#Gallery1' onClick='mymessage(\"press gallery\")' >...</li>`以及列表项应该在 inside `<ul></ul>`。

试试这个代码，它应该可以工作。然后分析并学习！

```
<!DOCTYPE html>
<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8">

<title>h2: <?php echo $_GET['product'];?></title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;">

<link rel="stylesheet" type="text/css" href="assets/css/styles_mob.css">
<link rel="stylesheet" type="text/css" href="assets/css/styles.css">
<!-- this next line makes me wonder.. why?!  -->
<link rel="stylesheet" type="text/css" href="assets/css/jquery-mobile.css?<?php echo filemtime('assets/css/jquery-mobile.css');?>">

<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.0rc2/jquery.mobile-1.0rc2.min.js"></script>

<script type="text/javascript">//<![CDATA[ 
function mymessage(msg){
    msg=msg||'?'; //the usual way to provide defaults
    alert(msg);
}

window.onload=function(){ //setting your onload event.
    mymessage('onload !');
};
//]]>  
</script>

</head><body>

<div data-role="page" id="Home"> 
<div data-role="header" data-theme="b">
<a href="./" data-icon="home" data-iconpos="notext" data-transition="fade">Home</a>
<h1><?php echo $title;?></h1>
</div>

<div data-role="content">  

<ul> <!-- Here is your link, working -->
    <li><a href="#Gallery1" onclick="mymessage('press gallery');">...</a></li>
</ul>

<!-- added some closing tags for demo-sake -->
</div></div>
</body></html> 
```

PS：由于所有初学者错误以及这只是您代码的一部分这一事实，我强烈认为您的其余代码有如此奇怪的错误。

祝你好运！！

* * *

**更新：**
根据您希望在页面加载时完成的任务，jQuery Mobile 可能会彻底改变球场。
可以[在 jQuery Mobile 的文档中阅读](http://jquerymobile.com/test/docs/pages/page-navmodel.html)：

> 默认情况下，jQuery Mobile 中的所有导航都基于 location.hash 的更改和更新。只要有可能，页面更改将使用当前“页面”和下一个“页面”之间的平滑过渡，无论它已经存在于 DOM 中，还是通过 Ajax 自动加载。

文档中的另一个[引用](http://jquerymobile.com/test/docs/api/events.html)：

> **使用 $(document).bind('pageinit')，而不是 $(document).ready()**
> 
> 在 jQuery 中学习的第一件事是调用 $(document).ready() 函数中的代码，以便在加载 DOM 后立即执行所有内容。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到 pageinit 事件。

这意味着所描述的常规技术只会在您第一次访问页面时触发，而不是在导航页面 ajax 样式时触发。

因此，在 jQuery mobile 中，您必须使用`pageinit`或[文档](http://jquerymobile.com/test/docs/api/events.html)中解释的适合您确切目的`pageshow`的其他事件之一。

示例如何为每个页面触发 pageinit（在您的网站上进行了现场测试）：

```
$(document).on('pageinit','[data-role=page]', function(){
    mymessage('hihi');    
}); 
```

或者，您也可以在 jQuery Mobile 中关闭 ajax，如下所示（取决于版本）：

```
$(document).bind("mobileinit", function(){
    $.mobile.ajaxEnabled = false;
}); 
```

# c# - 使用 Async 框架进行网络调用

> ID：12062110
> 
> 赞同：1
> 
> 时间：2012-08-21T19:57:25.073
> 
> 标签：c#, visual-studio-2012, c#-5.0

我正在使用该`async`框架进行网络通话。我在下面的代码中收到一个错误

```
class Program
{
    static void Main(string[] args)
    {
        TestAsync async = new TestAsync();
        await async.Go();//Error:  the await operator can only be used with an async method.  Consider markign this method with the async modifier.  Consider applying the await operator to the result of the call
    }
}

class TestAsync
{
    public async Task Go()
    {
        using (WebClient client = new WebClient())
        {
            var myString =  await client.DownloadStringTaskAsync("http://msdn.microsoft.com");
            Console.WriteLine(myString);
        }    
    }
} 
```

我已经尝试了此代码的几种变体。它要么在运行时失败，要么无法编译。在这种情况下，该方法在我的异步调用被允许触发之前完成。我究竟做错了什么？

我的目标是以异步方式使用 WebClient 执行对网站的调用。我想将结果作为字符串返回并使用`Console.WriteLine`. 如果您从执行的代码开始感觉更舒服，只需更改

`await async.Go();`to`async.Go();`代码将运行，但不会命中 Console.WriteLine。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:25:31.693

错误消息正确地告诉您`await`只能在`async`方法中使用。但是，你不能 make `Main()` `async`，C# 不支持。

但是`async`方法返回`Task`s，这与`Task`自 .Net 4.0 以来在 TPL 中使用的相同。并且`Task`s 确实支持使用同步等待[的`Wait()`方法](http://msdn.microsoft.com/en-us/library/dd235635.aspx)。因此，您可以像这样编写代码：

```
class Program
{
    static void Main(string[] args)
    {
        TestAsync async = new TestAsync();
        async.Go().Wait();
    }
} 
```

在这里使用`Wait()`是正确的解决方案，但在其他情况下，混合使用同步等待`Wait()`和异步等待`await`可能很危险，并且可能导致死锁（尤其是在 GUI 应用程序或 ASP.NET 中）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T20:16:02.800

该程序在 Web 请求完成之前就结束了。这是因为 Main 不会等待异步操作完成，因为它无事可做。

我敢打赌，如果你让 Main 持续更长时间，那么`Console.WriteLine`就会被跟注。

我会尝试在调用异步方法后添加睡眠`Thread.Sleep(500)`- 任何足够长的时间以允许 Web 请求完成都应该有效。

# ruby - 如何在新行之间拆分字符串并保留空白行？

> ID：12062126
> 
> 赞同：39
> 
> 时间：2012-08-21T19:58:25.427
> 
> 标签：ruby, string, split

给定红宝石代码：

```
"aaaa\nbbbb\n\n".split(/\n/) 
```

这输出：

```
["aaaa", "bbbb"] 
```

我希望输出包含由`\n\n`-- 我希望结果为：

```
["aaaa", "bbbb", ""] 
```

获得这个确切结果的最简单/最好的方法是什么？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-21T20:51:47.743

我建议使用`lines`而不是`split`执行此任务。`lines`将保留尾随换行符，这样您就可以看到所需的空行。用于`chomp`清理：

```
"aaaa\nbbbb\n\n".lines.map(&:chomp)
[
    [0] "aaaa",
    [1] "bbbb",
    [2] ""
] 
```

* * *

其他更复杂的到达方式有：

```
"aaaa\nbbbb\n\n".split(/(\n)/).each_slice(2).map{ |ary| ary.join.chomp }
[
    [0] "aaaa",
    [1] "bbbb",
    [2] ""
] 
```

它利用了使用捕获组 in `split`，它返回分割文本，中间文本被分割。`each_slice`然后将元素分组为两个元素的子数组。`map`获取每个二元素子数组，`join`然后执行`chomp`.

或者：

```
"aaaa\nbbbb\n\n".split(/(\n)/).delete_if{ |e| e == "\n" }
[
    [0] "aaaa",
    [1] "bbbb",
    [2] ""
] 
```

这`split`是返回的内容：

```
"aaaa\nbbbb\n\n".split(/(\n)/)
[
    [0] "aaaa",
    [1] "\n",
    [2] "bbbb",
    [3] "\n",
    [4] "",
    [5] "\n"
] 
```

我们看不到它经常使用，但它可能很有用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-21T20:02:33.510

您可以为 split 的第二个参数提供一个否定参数，以避免剥离尾随的空字符串；

```
"aaaa\nbbbb\n\n".split(/\n/, -1) 
```

请注意，与您想要的相比，这将为您提供一个额外的空字符串。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-21T20:03:38.033

您可以使用数字参数，但 IMO 有点棘手，因为 (IMO) 它与我的期望不太一致，并且 AFAICT 您想要修剪最后一个空字段：

```
jruby-1.6.7 :020 > "aaaa\nbbbb\n\n".split(/\n/, -1)[0..-2]
 => ["aaaa", "bbbb", ""] 
```

# android - 如何在 Galaxy S3 上的溢出菜单中添加操作？

> ID：12062133
> 
> 赞同：4
> 
> 时间：2012-08-21T19:59:03.373
> 
> 标签：android, android-actionbar, galaxy

当 Galaxy S3 上没有打算在操作栏中的溢出菜单中显示的操作时，我遇到了问题。因此，用户体验有些混乱——我在 Galaxy S3 上的操作栏只显示应用程序徽标和名称，但不提供额外功能。

我希望在运行 Android 4.x 的所有设备上拥有相同的 UX，并在溢出菜单中执行操作。如果不使用 ActionBarSherlock 等第三方组件，这是否可行？

坦尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-04T21:05:06.077

有一种快速而肮脏的方法可以使用反射在应用程序`ViewConfiguration`实例中设置字段来伪造硬件菜单按钮的缺失。

以下代码片段可以添加到您的活动中并在`onCreate()`.

```
private void enableActionBarOverflow() {
    try {
        ViewConfiguration config = ViewConfiguration.get(this);
        Field menuKeyField = ViewConfiguration.class
                .getDeclaredField("sHasPermanentMenuKey");
        if(menuKeyField != null) {
            menuKeyField.setAccessible(true);
            menuKeyField.setBoolean(config, false);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

不是一个干净的解决方案，因为 ViewConfiguration 的实现可能会在未来的某个时候发生变化，并且由于该`sHasPermanentMenuKey`字段是私有的，因此不能保证该字段将始终存在。

但是，如果您绝对必须在具有菜单键的设备上使用溢出菜单，我只会将其用作最后的手段。

假设您的最低 API 为 11（Honeycomb）或更高，更好的解决方案是制作您自己的溢出菜单，如下所示：

1.  在 menu.xml 中为溢出添加一个菜单项，将其设置为始终显示并在您的`onCreateOptionsMenu()`

    ```
    <menu xmlns:android="http://schemas.android.com/apk/res/android" >
        ...
        <item
            android:id="@+id/action_overflow"
            android:icon="@drawable/ic_action_settings"
            android:title="@string/settings"
            android:showAsAction="always">
        </item>
    </menu> 
    ```

    ,

    ```
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
            MenuInflater mi = getMenuInflater();
            mi.inflate(R.menu.menu, menu);
            return super.onCreateOptionsMenu(menu);
    } 
    ```

2.  在溢出菜单中为您想要的选择创建一个单独的overflow_menu.xml 资源

    ```
    <menu xmlns:android="http://schemas.android.com/apk/res/android" >
        <item
            android:id="@+id/overflow_action1"
            android:title="@string/overflow_action1">
        </item>
        <item
            android:id="@+id/overflow_action2"
            android:title="@string/overflow_action2">
        </item>
    </menu> 
    ```

3.  在您的`onOptionsItemSelected()`方法中，处理溢出菜单的选择

    ```
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
            ...
            case R.id.action_overflow:
                    PopupMenu popup = new PopupMenu(
                            this, findViewById(R.id.action_overflow));
                    MenuInflater inflater = popup.getMenuInflater();
                    inflater.inflate(R.menu.overflow_menu, popup.getMenu());
                    popup.setOnMenuItemClickListener(this);
                    popup.show();
                    return true;
            default:
                    return super.onOptionsItemSelected(item);
            }
    } 
    ```

4.  在您的活动中实现`PopupMenu.OnMenuItemClickListener`接口以处理溢出项的点击

    ```
    @Override
    public boolean onMenuItemClick(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.overflow_action1:
            //do stuff
            return true;
        case R.id.overflow_action2:
            //do stuff
            return true;
        default:
            return false;
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T08:23:34.483

这是一些制造商做出的决定，如果你真的想这样做，就需要一些“坏”的解决方案。溢出菜单只是所有 android 设备曾经拥有的“常规”旧菜单按钮。当 Google 在 Honeycomb 和 ICS 中删除菜单按钮时，一些制造商决定保留菜单按钮。这导致人们对菜单按钮是什么以及做什么感到非常困惑。

您应该记住，尽管使用 S3 的用户希望有一个功能菜单按钮，因为他们不习惯看到 3 点菜单。所有使用内置菜单系统的应用程序都应该以他们期望的方式呈现给用户。因此，在这件事上，我强烈建议不要让你的应用在所有设备上看起来完全相同，因为这很可能会让用户感到困惑，而不是帮助他们。但是，如果您愿意，应该可以同时实现“正确的”菜单系统和“自定义/假”的 3 点菜单。

这篇文章似乎有一些很好的指导方针： [https ://stackoverflow.com/a/10713860/1068167](https://stackoverflow.com/a/10713860/1068167)

# php - json_encode 是否足以提供 XSS 保护？

> ID：12062146
> 
> 赞同：22
> 
> 时间：2012-08-21T20:00:02.353
> 
> 标签：php, javascript, json

我`stdClass`在 PHP 中有一个对象，例如

```
$o = new stdClass;
$o->foo = $bar 
```

该变量`$bar`包含不受信任的字符串。

下面的PHP模板代码是否足够XSS防护

```
<script type="text/javascript">
    var o = <?php echo json_encode($o); ?>;
</script> 
```

我最初的直觉反应是这**是**安全的，因为将对象编码为 JSON 将确保任何潜在的 javascript 漏洞通过被包含为 JSON 字符串属性对象而变得惰性。像这样的东西

```
$o = new stdClass;
$o->foo = "<script type=\"text/javascript\">alert(document.cookie)</script>";
?>
<script type="text/javascript">
    var o = <?php echo json_encode($o) ?>;    
</script> 
```

导致这样的输出

```
<script type="text/javascript">
    var o = {"foo":"<script type=\"text\/javascript\">alert(document.cookie) <\/script>"};    
</script> 
```

如果这被认为是不安全的，那么是否有一种标准、成熟的方法可以将简单`stdClass`对象序列化为 JSON 字符串，以便在`<script/>`HTML 文档的一部分中使用。

期待第一个快速答案，我意识到剥离任何 HTML 标记，或者以其他方式过滤 JSON 对象的每个元素的 XSS 都可以，但我正在寻找一种简洁的方法来做到这一点。类似于这个

```
//$eBar = addslashes($bar);
$sql = sprintf("SELECT * FROM table WHERE foo = '%s'",mysql_real_escape_string($bar)); 
```

还有这个

```
$sql = $db->select('SELECT * from table where foo = ?', $bar); 
```

（在大多数情况下）在功能上是等效的，但后者被认为是更好、更安全的代码，因为最终程序员用户不需要担心转义方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T15:34:40.233

似乎通过这个问题的最佳答案在于[另一个问题](https://stackoverflow.com/a/6817147/4668)。

总而言之，PHP 的 JSON 编码器会转义所有非 ASCII 字符，因此不能插入换行符/回车符来填充 JSON 属性的 Javascript 字符串部分。这可能不适用于其他 JSON 编码器。

但是，将原始字符串传递给 JSON 编码可能会导致通常的 XSS 攻击，建议使用以下常量组合。

```
var v= <?php echo json_encode($value, JSON_HEX_QUOT|JSON_HEX_TAG|JSON_HEX_AMP|JSON_HEX_APOS); ?>; 
```

**或**确保传递给的变量`json_encode`确实是一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:06:36.587

XSS 非常广泛，实际上不可能随时知道您发出的不受信任的数据是否安全。

答案真的是视情况而定。 `json_encode`不会自行转义——您只是将它用于序列化目的。您要使用的转义函数是`htmlspecialchars`.

*但是*，您是否甚至要使用`htmlspecialchars`取决于。例如，您会插入`o.foo`using `innerHTML`or的值`textContent`吗？后者会导致双重转义，但前者会插入脚本。如果你打算使用`eval`（在 JS 中）呢？

顺便说一句，在功能`addslashes`上**不**等同于 mysql 转义。

一开始我不会以这种方式混合 JavaScript 和 PHP，但那是另一回事了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-27T16:46:17.760

这将工作;）

```
...?payload=<img%20src=x%20onerror=alert(document.cookie);> 
```

用 json_encode ...

```
<?php echo json_encode($_GET['payload']); ?> 
```

;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T20:13:05.797

我所做的是在假设它是安全的之前评估 json 对象。我认为该方法是原型中的 evalJSON(true) ，而 jquery 具有类似的实现。我对 JSON 的 xss 标准了解不多，但这对我有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-21T22:07:40.593

正如其他答案所说；json_encode 不是为反 xss 保护而构建的。除非您专门对不安全的字符串进行编码（或正确清理），否则您将遇到潜在问题。

此外，一旦从 JSON 对象中提取了该字符串，如果在任何时候注入到页面中，它仍然具有潜在的危险。例如：

```
<?php $a->foo = "<script>alert(1)</script>"; ?>
var v = <?php echo json_encode($a); ?> 
```

不太可能执行（尽管您不能确定）。但如果你这样做：

```
$('#some-element').html(v.foo); 
```

你绝对会遇到一个漏洞。

# wpf - 后台工作人员无法访问对象

> ID：12062148
> 
> 赞同：1
> 
> 时间：2012-08-21T20:00:09.110
> 
> 标签：wpf, multithreading, backgroundworker

我有以下设置：

```
BackgroundWorker backgroundInstancesWorker = new BackgroundWorker();
backgroundInstancesWorker.DoWork += new DoWorkEventHandler(EnumerateInstances);
backgroundInstancesWorker.WorkerReportsProgress = false;
backgroundInstancesWorker.WorkerSupportsCancellation = false;
backgroundInstancesWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundInstancesWorker_RunWorkerCompleted);

// Create temporary tuple to hold the argument information
// X is type IEnumerable<Foo>, Y is type Bar
object arguments = new object[2] { X, Y };
backgroundInstancesWorker.RunWorkerAsync(arguments); 
```

线程工作者函数：

```
private static void EnumerateInstances(object sender, DoWorkEventArgs e)
{
     object[] arguments = e.Argument as object[];
     var queryCounterSets = arguments[0] as IEnumerable<Foo>;
     var sourceItem = arguments[1] as Bar;
     e.Result = sourceItem;
} 
```

终于完成的功能：

```
private static void backgroundInstancesWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
      if (e.Result != null && e.Result is Bar)
      {
          // Do stuff
      }
} 
```

但是，在 RunWorkerCompleted 函数中，当我尝试访问 e.Result 对象时，它给了我 TargetInvocationException 并说调用线程无权访问该对象，因为另一个线程拥有它。任何人都对为什么这是一个问题有任何见解？我只想在后台线程完成后将 Bar 对象传递给 RunWorkerCompleted 。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:07:13.477

> 在访问[RunWorkerCompletedEventArgs.Result](http://msdn.microsoft.com/en-us/library/system.componentmodel.runworkercompletedeventargs.result.aspx)属性之前，您的**RunWorkerCompleted**事件处理程序应始终检查[AsyncCompletedEventArgs.Error](http://msdn.microsoft.com/en-us/library/system.componentmodel.asynccompletedeventargs.error.aspx)和[AsyncCompletedEventArgs.Cancelled](http://msdn.microsoft.com/en-us/library/system.componentmodel.asynccompletedeventargs.cancelled.aspx)属性。如果引发异常或取消操作，则访问[RunWorkerCompletedEventArgs.Result](http://msdn.microsoft.com/en-us/library/system.componentmodel.runworkercompletedeventargs.result.aspx)属性会引发异常。

该错误可能发生在您的后台功能中。有关处理线程仿射对象的跨线程访问的一些信息，请参阅[此问题。](https://stackoverflow.com/questions/11923865/how-to-deal-with-cross-thread-access-exceptions)

# c# - Visual Studio 说名称在当前上下文中不存在

> ID：12062149
> 
> 赞同：21
> 
> 时间：2012-08-21T20:00:11.483
> 
> 标签：c#, visual-studio-2010

我在像这样的类上调用静态方法

```
Foo.bar() 
```

Visual Studio 的智能感知识别 Foo 并为我自动完成栏（它突出显示 Foo 和所有类似的东西都可以正常工作）。在我开始构建项目之前，一切看起来都很好，它会抛出一个错误，指出名称 Foo 在当前上下文中不存在。

我在其他文件中使用这个静态方法调用，所以我知道这个类没问题。这种情况太大而无法发布代码，所以我主要是在寻找开始调查的原因，这会导致智能感知正常运行，但在编译时会出现这样的错误。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-06-06T14:45:19.607

我已经看到这个错误是由不同项目中不同版本的 .NET 框架引起的。我构建的类库是 4.5，应用程序是 4.0，但它给出的唯一错误是命名空间错误。更改类库上的框架版本并重建它，然后应用程序解决了错误。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-21T21:53:16.857

当命名空间、类和变量在同名时变得复杂时，就会发生这种情况。我以前也受过这种痛苦。Intellisense 告诉我我是对的，编译器告诉我我错了！我信任编译器！

你有两个我能想到的选择

1.  在您的代码中搜索 Foo，并查看它是否用于静态类以外的其他内容。

2.  完全限定 Foo.bar() 调用。`MyApplication.This.That.Foo.bar();`

按此顺序执行...最好优雅地解决问题，这样您就可以调用 Foo.bar() 因为这比到处都更具可读性和可维护性`MyApplication.This.That.Foo.bar();`！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-14T00:37:26.550

在我的情况下，我`}`在代码中间的一个方法的末尾错过了一个，这导致程序看不到其余的代码，并抱怨我在那之后定义的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-24T07:31:33.937

我知道这是一个有点老的话题，但我刚刚经历过同样的事情，对我来说这是因为该文件实际上并未包含在解决方案中。

我正确地发生了，因为我已经重命名了类，然后是文件，这导致 Visual Studio 仍然知道类和命名空间，但是编译器没有得到文件，因为重命名的文件不包括在内。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-26T13:56:17.193

我知道的旧线程，但是我在从单元测试项目中引用静态方法时遇到了这个问题-intellisense 说该方法在那里，但是当我尝试构建/运行测试时（在调试模式下）我得到了错误'名称在当前上下文中不存在'。为了修复它，我必须在调试配置中重建包含引用的静态方法的项目（它以前只是在发布配置中构建的）——在此之后，测试构建并运行正常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-21T19:45:45.267

考虑对有问题的项目进行清理然后构建。编辑器和 Intellisense 可以正确发现类，而编译器则处理过期的文件。（我遇到了同样的问题，这就是我解决它的方法。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-26T17:54:07.567

这是我知道的一篇旧文章，但我刚遇到这个问题，困扰了我几天，最终得到它：在解决方案资源管理器中单击类文件，然后查看属性选项卡；确保构建操作设置为“编译”。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-25T07:07:27.563

调整相关文件。如果错误代码在 中`Default.aspx.cs`，您需要更改文件中的第一行，`Default.aspx`如下所示：

替换`"CodeFile="`为`"CodeBehind"`

希望这能有所帮助。

-谢谢， Thai_FUV

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-07T16:08:34.020

我已经遇到过几次这个问题，所以当我这样做时，我首先检查的是无法识别的程序集是否有任何 Nuget 包。在我的情况下，他们总是有，我只是忘记在引用未识别程序集的程序集中安装相同的包。重新构建命令和问题已修复。我希望这可以帮助别人。可以为多个事物提供相同的错误消息，因此这种特殊情况可能不适用。如果您没有使用过 Nuget，我建议您尝试其他答案

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-11T20:04:37.913

我在创建数据访问层时也遇到了这个问题，并且调用了具有相同症状的静态方法：Intellisense 找到了它，但没有找到编译器。我尝试了上述许多方法，包括修复 .Net 版本。

将源文件添加到项目时，我还更改了命名空间。对于有问题的文件，我忘记更改命名空间以在其他时间导入时匹配。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-03T20:36:08.557

关闭 MonoDevelop 的所有选项卡。然后关闭 MonoDevelop。最后再次打开 MonoDevelop 为我解决了这个问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-02-07T23:51:41.567

我的解决方案有点复杂。项目 A 引用了项目 B 和 C：两个引用都将 Copy Local 设置为 true，并且都生成了具有相同名称的程序集。在构建引用项目时，项目 B 和 C 的输出程序集被复制，其中一个覆盖了另一个，因为它们具有相同的名称。VS 然后在构建目录中寻找引用，只找到了“获胜”的程序集。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-04-29T21:16:11.847

我对这个不时出现的问题的解决方案：

1.  在解决方案资源管理器和“从项目中排除”中找到给您带来问题的类
2.  重建该程序集（我们称其为“A”）
3.  使用文件（“B”）的项目会要求您“重新加载”项目，等待
4.  将文件重新添加到您刚刚从中删除的程序集 A 中，然后重新构建
5.  现在，重新加载项目 B

然后在VS中找到了文件，一切都很好。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-09-07T12:12:14.800

就我而言，我不得不重新加载标记为“丢失”的项目。

1.  项目 > 卸载项目
2.  项目 > 加载项目
3.  清洁，构建解决方案

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-12-13T09:47:33.360

更改控件的 ID 为我解决了这个问题。显然，控件的 id 存在于解决方案的另一部分中。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-12-16T12:25:11.827

就我而言，我的 csproj 文件中缺少以下几行

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
<DefineConstants>TRACE</DefineConstants>
<DebugType>full</DebugType>
<DebugSymbols>true</DebugSymbols>
</PropertyGroup> 
```

添加后，我可以在调试时看到变量

# jquery - 谷歌天气解析 XML

> ID：12062150
> 
> 赞同：-1
> 
> 时间：2012-08-21T20:00:11.783
> 
> 标签：jquery, xml, xml-parsing

尝试使用 jQuery 解析 XML，但我无法让它终生工作。

```
var geoCity = "Aberdeen"
$.ajax({  
        type: "GET",  
        url: "http://www.google.com/ig/api?weather="+geoCity,  
        dataType: "xml",  
        success: parseXml 
    });
    function parseXml(xml) {  
            $(xml).find("weather").each(function() {  
                $("body").append($(this).find("current_conditions").text() );  
                    });  
            }  
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:05:13.680

标签 current_conditions 没有文本。它的所有孩子都有属性。

此外，您的功能应该是：

```
function parseXml(xml) {  
        $(xml).find("weather").each(function() {  
            $("body").append($(this).find("current_conditions").text() );  
        });
    }; 
```

# python - 使用python根据特殊字符将1个字符串分成2个字符串

> ID：12062151
> 
> 赞同：3
> 
> 时间：2012-08-21T20:00:15.590
> 
> 标签：python, string, character, substring

我正在使用 python，我是新手。我正在寻找一种方法来获取一个字符串并将其分成两个较小的字符串。字符串的示例如下

```
wholeString = '102..109' 
```

我想要得到的是：

```
a = '102'
b = '109' 
```

信息将始终由两个句点分隔，如上所示，但前后字符数的长度范围为 1 到 10 个字符。我正在编写一个循环来计算句点前后的字符，然后根据这些计数进行切片，但我想知道是否有更优雅的方式有人知道。谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T20:01:38.440

试试这个：

```
a, b = wholeString.split('..') 
```

它将每个值放入相应的变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:01:54.367

看[`string.split`](http://docs.python.org/library/stdtypes.html#str.split)方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T20:03:05.357

```
split_up = [s.strip() for s in wholeString.split("..")] 
```

此代码还将去除前导和尾随空格，因此您只剩下要查找的值。split_up 将是这些值的列表。

# mysql - MySQL Group By & 返回最大组

> ID：12062160
> 
> 赞同：0
> 
> 时间：2012-08-21T20:00:48.403
> 
> 标签：mysql, group-by

我正在寻找一种方法来运行一个查询，该查询执行一个分组，然后给我最大的组是什么。

例如，如果我有一个包含一堆水果类型的表，并且我使用按水果查询的组查询该表，并且大多数实例是苹果，那么最大的组将是苹果，它会返回苹果。

说得通？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:03:06.857

这是你想要的吗？

```
select fruit
from fruits f
group by fruit
order by count(*) desc
limit 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:03:15.187

也许尝试类似：

```
SELECT fruit FROM (
    SELECT fruit, COUNT(*) AS `count`
    FROM fruits
    GROUP BY fruit
) sub
ORDER BY `count` DESC
LIMIT 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:07:57.503

无需使用子选择

```
SELECT fruit, COUNT(fruit) as `count`
FROM fruits
GROUP BY fruit
ORDER BY `count` DESC 
```

# objective-c - 带有指针的辅助变量是否对性能/内存有任何影响？

> ID：12062162
> 
> 赞同：2
> 
> 时间：2012-08-21T20:01:00.203
> 
> 标签：objective-c, performance, variables

可以？

我通常会选择这个，

```
NSArray * monthsForChosenYear = [self monthsForYear:newChosenYear];
[self setMonths: monthsForChosenYear]; 
```

对此，

```
[self setMonths: [self monthsForYear:newChosenYear]]; 
```

主要是因为乍一看很容易理解。第二种方法，没有那么多。

但这究竟意味着什么？monthsForChosenYear，只是一个指针，但它必须以某种方式存储。

我不是在问影响是否小到我不需要担心。但我对此非常好奇。

即使重定向到一些更详细解释的文档也会很好。

先感谢您！

努诺

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T20:31:17.330

希望能缓解你的好奇心的长答案，有好奇心是件好事！性能和内存影响为零或微乎其微。你想知道指针是如何存储的。当您键入：

```
NSArray * monthsForChosenYear; 
```

您要求`monthsForChosenYear`在本地存储中分配一个由 name 引用的框（变量）。当封闭方法退出时，这个框将被自动回收，如果编译器发现不再需要它，可能会更早。此框可以保存 type 的值`NSArray *`。

当您键入：

```
NSArray * monthsForChosenYear = [self monthsForYear:newChosenYear]; 
```

你要求两件事，它只是一个简写：

```
NSArray * monthsForChosenYear;
monthsForChosenYear = [self monthsForYear:newChosenYear]; 
```

第二行调用一个方法并将返回的值存储在名为`monthsForChosenYear`. 最后当你输入：

```
[self setMonths: monthsForChosenYear]; 
```

存储在您的盒子中的值`monthsForChosenYear`被传递给一个方法。如果您不再使用该框`monthsForChosenYear`，编译器可能会回收它，或者它可能会等到封闭方法结束或其他合适的点。

编译器分析盒子的使用并进行优化，有时如果确定不需要一个盒子，他们甚至不会分配一个盒子。分配一个盒子的成本是无限小的。

*[注：实际上通常有两种本地框。第二个，通常称为*寄存器*，具有通常比无穷小的分配成本。使用哪种盒子由编译器决定。]*

当您键入：

```
[self setMonths: [self monthsForYear:newChosenYear]]; 
```

您要求在一行中调用*两种*`[self monthsForYear:newChosenYear]`方法，并且必须将内部调用 ( ) 返回的值传递给外部调用。编译器将这个结果存储在哪里？编译器实际上将上述内容转换为：

```
NSArray *compilerTemporaryBox = [self monthsForYear:newChosenYear];
[self setMonths:compilerTemporaryBox]; 
```

从上面你知道这是怎么回事。*编译器*有一个小优势，它知道需要多长时间`compilerTemporaryBox`，因此不需要计算出来，但这不会影响编译后的代码。

所以毕竟总体答案是不管你怎么写。

此外，您使用的内存管理类型：MRC、ARC 或 GC；不会影响答案 - 编译器最终会将您的两个变体视为相同。

所以选择你认为最适合你的风格。HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:04:07.823

几乎可以肯定，Clang 足够聪明，可以将这两段代码编译成相同的机器代码。在速度或内存问题方面没有区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:04:12.907

你在用ARC吗？没有 ARC，使用不错的优化器就没有区别，但是使用 ARC，它可能会使用额外的保留/释放。

# sql - SQL Order By Within A Count(Distinct)

> ID：12062164
> 
> 赞同：2
> 
> 时间：2012-08-21T20:01:01.113
> 
> 标签：sql, sql-server, count, sql-order-by, distinct

我有以下表格：

```
filetype1
F1_ID | F1_ORDR | FILENAME
1     | 1        | file1.txt
2     | 2        | file2.txt
3     | 3        | file3.txt
4     | 2        | file4.txt
5     | 4        | file5.txt

filetype2
F2_ID | F2_ORDR | FILENAME
1     | 1        | file6.txt
2     | 2        | file7.txt
3     | 4        | file8.txt

ordr
OR_ID | OR_VENDOR
1     | 1
2     | 1
3     | 1
4     | 1

vendor
VE_ID | VE_NAME
1     | Company1 
```

我的目标是有一个供应商列表和每个类型的文件连接的订单数量。例如，此数据的最终结果应该是：

```
VENDOR   | OR_CT | F1_CT | F2_CT
Company1 | 4        | 4        | 3 
```

因为至少 1 个 type1 文件附加到 4 个不同的订单，至少 1 个 type2 文件附加到 3 个不同的订单。目前我的 SQL 代码如下所示：

```
SELECT vendor.ve_id, vendor.ve_name,
       (SELECT COUNT(or_id)
        FROM ordr
        WHERE ordr.or_vendor = vendor.ve_id) as OR_COUNT, 
       (SELECT COUNT(DISTINCT f1_order)
        FROM filetype1 INNER JOIN ordr ON filetype1.f1_ordr = ordr.or_id
        WHERE ordr.or_vendor = vendor.ve_id) as F1_CT,
       (SELECT COUNT(DISTINCT f2_ordr)
        FROM filetype2 INNER JOIN ordr ON filetype2.f2_ordr = ordr.or_id
        WHERE ordr.or_vendor = vendor.ve_id) as F2_CT
FROM vendor
ORDER BY vendor.ve_name 
```

不幸的是，这会产生以下结果：

```
VENDOR   | OR_COUNT | F1_COUNT | F2_COUNT
Company1 | 4        | 5        | 3 
```

我唯一的猜测是，因为我正在使用`COUNT(DISTINCT)`is`COUNT`自动假设`DISTINCT`是 order by`F1_ID`而不是 by`F1_ORDR`

如果有人可以帮助我如何告诉`COUNT(DISTINCT)`订购，`F1_ORDR`那将是最有帮助的。我在广阔的互联网上搜索了一个解决方案，但很难向搜索引擎、论坛等解释我想要什么。我的数据库使用 Microsoft SQL Server。我的数据库管理知识几乎完全是自学的，所以我很高兴自己能做到这一点。我的专长是网页设计。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:14:32.927

您的 SQL 会产生您想要的结果。

两条忠告

1.  订单是表的坏名称 - 它与保留字冲突，并且会给您带来无穷无尽的麻烦

2.  你应该像这样加入你的桌子

    `FROM filetype1 inner join [order] on filetype1.f1_order = or_id`

而不是使用 where 子句

也许试试这个

```
select 
    vendor.VE_ID, vendor.VE_NAME,   
    count(distinct or_id),
    count(distinct f1_order),
    count(distinct f2_order)

from 
    vendor
        left join [order]
            on vendor.VE_ID = [order].OR_VENDOR
        inner join filetype1 
            on [order].OR_ID = filetype1.F1_ORDER
        left join filetype2
            on [order].OR_ID = filetype2.F2_ORDER
group by
    vendor.VE_ID, vendor.VE_NAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:19:31.837

我会建议你：

将 filetype1 和 filetype2 表合并到一个表（文件类型）中，并添加另一个名为 - f_type（例如）类型为 INT 或 TINTYINT 的字段来存储文件类型（1 或 2）。这具有稍后轻松添加另一个文件类型的好处现在查询将如下所示：

```
SELECT 
vendor.ve_name,
count(DISTINCT filetype.f_order),
filetype.f_type
FROM 
   filetype
       INNER JOIN `order`
           ON filetype.f_order = `order`.or_id
       INNER JOIN vendor
           ON `order`.or_vendor = vendor.ve_id
   GROUP BY vendor.ve_id,filetype.f_type 
```

这将给出文件类型的订单计数。

对于总订单，只需添加另一个查询：

```
SELECT count(*) FROM `order` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:49:20.230

尝试这个：

```
SELECT
vdr.VE_NAME   
,COUNT(DISTINCT OR_ID) AS OR_ID 
,COUNT(DISTINCT ft1.F1_ORDER) AS FT1_COUNT
,COUNT(DISTINCT ft2.F2_ORDER) AS FT2_COUNT
FROM
    vendor vdr
    LEFT OUTER JOIN [order] odr
        ON vdr.VE_ID = odr.OR_VENDOR
    INNER JOIN filetype1 ft1
        ON  odr.OR_ID = ft1.F1_ORDER
    LEFT OUTER JOIN filetype2 ft2
        ON odr.OR_ID = ft2.F2_ORDER
GROUP BY
    vdr.VE_ID
    ,vdr.VE_NAME 
```

# sql - 使多行一行具有附加列

> ID：12062165
> 
> 赞同：0
> 
> 时间：2012-08-21T20:01:02.397
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一张看起来像的桌子

```
Customer_id     Order_id   Action    Time_Stamp
abc             123         placed     8/1/2012 10:00AM
abc             123         processed  8/1/2012 10:30AM
abc             123         shipped    8/1/2012 11:00AM

xyz             456         recieved   8/1/12 12:00PM 
```

我想要得到的是

```
Customer ID     Order_id   Placed             Processed           Shipped            recieved
abc              123       8/1/2012 10:00Am    8/1/2012 10:30AM   8/1/2012 11:00AM   null
xyz              456       null                null               null               8/1/2012 12:00PM 
```

如果这使查询更容易，我知道我需要的最大列数（换句话说，操作数）。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:04:36.537

您可以将 a[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)用于此类查询。

```
SELECT *
FROM 
(
    SELECT Customer_id, Order_id, Action, Time_Stamp
    FROM yourTable
) x
PIVOT
(
   max(Time_Stamp)
   for action in ([Placed], [Processed], [Shipped], [received])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/14416/3)

如果您知道要创建的列的值，则上述查询非常有用。但如果你不这样做，那么你可以使用动态枢轴：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(action) 
                    from test
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
      = 'SELECT Customer_id, Order_id,' + @cols + ' from 
         (
            select Customer_id, Order_id, Action, Time_Stamp
            from test
         ) x
         pivot 
         (
            max(Time_Stamp)
             for action in(' + @cols + ')
         ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/14416/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:10:57.490

如果您需要一组固定的状态，而不是每个订单的多个状态，那么这样的事情可能对您有用：

```
SELECT customer_id, order_id
      ,MIN(CASE WHEN action = 'placed' THEN time_stamp ELSE NULL END) AS placed
      ,MIN(CASE WHEN action = 'processed' THEN time_stamp ELSE NULL END) AS processed
      ,MIN(CASE WHEN action = 'shipped' THEN time_stamp ELSE NULL END) AS shipped
      ,MIN(CASE WHEN action = 'received' THEN time_stamp ELSE NULL END) AS received
  FROM activity
  GROUP BY customer_id, order_id 
```

# xamarin.ios - 如何为 MonoTouch.Dialog RootElement 添加字幕？

> ID：12062169
> 
> 赞同：0
> 
> 时间：2012-08-21T20:01:28.253
> 
> 标签：xamarin.ios, monotouch.dialog

MonoTouch.Dialog`RootElement`似乎没有添加字幕的方法。我想在标题下方显示一个副标题。

我是否必须对元素进行子类化并在 GetCell 方法中添加自定义视图？

有没有更简单的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T01:15:25.667

实现这一点的最简单方法是继承 RootElement 并覆盖 GetCell 方法，创建一个新单元格并设置 LabelText 和 DetailLabelText。这会给你一个很好的字幕

```
public override MonoTouch.UIKit.UITableViewCell GetCell(MonoTouch.UIKit.UITableView tv) {
        var baseCell = base.GetCell(tv); 
        var cell = new UITableViewCell(UITableViewCellStyle.Subtitle, "cellId");
        cell.TextLabel.Text = Caption;
        cell.DetailTextLabel.Text = _subtitle;
        cell.Accessory = baseCell.Accessory;
        return cell;
    } 
```

注意单元格样式。不幸的是，看起来单元格样式仅在单元格构建期间可用，而在之后则不可用。所以你不能只调用 base.GetCell(tv) 并设置它的样式。那将是一个更好的选择。

_subTitle 是通过自定义构造函数设置的类级别变量

```
private string _subtitle = string.Empty;

    public ChartSectionRootElement(string caption, string subTitle) : base(caption) {
        this._subtitle = subTitle;
    } 
```

# c# - C# 将 REST 调用的响应写入文本文件

> ID：12062172
> 
> 赞同：1
> 
> 时间：2012-08-21T20:01:42.017
> 
> 标签：c#, rest, encoding, text-files, messagebox

我很难将我的请求内容从我的休息呼叫写入 txt 文件。

我得到一个响应，我可以将它输出到控制台，但我真的很想把它写到一个文本文件中。我倾向于它是一个编码问题，但我只是不确定在哪里设置或配置它。

我写的 Messagebox 和文件的内容是空的。

```
static void Main(string[] args)
        {

            // Create the web request  
            HttpWebRequest request = WebRequest.Create("http://finance.yahoo.com/q/ecn") as HttpWebRequest;

            // Set type to POST  
            request.Method = "POST";
            request.ContentType = "application/x-www-form-urlencoded";

            string query = "?s=PVSW";

            StringBuilder data = new StringBuilder();
            data.Append("&query=" + HttpUtility.UrlEncode(query));

            System.Windows.Forms.MessageBox.Show("Data = " + data.ToString());

            // Create a byte array of the data we want to send  
            byte[] byteData = UTF8Encoding.UTF8.GetBytes(data.ToString());

            // Set the content length in the request headers  
            request.ContentLength = byteData.Length;

            // Write data  
            using (Stream postStream = request.GetRequestStream())
            {
                postStream.Write(byteData, 0, byteData.Length);
            }

            // Get response  
            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            {
                // Get the response stream  
                StreamReader reader = new StreamReader(response.GetResponseStream());

                // Console application output  
                Console.WriteLine(reader.ReadToEnd());
                System.Windows.Forms.MessageBox.Show(reader.ReadToEnd());

                TextWriter tw = new StreamWriter("C:/Response.txt");

                // write a line of text to the file
                tw.WriteLine(reader.ReadToEnd());

                // close the stream
                tw.Close();

            }

        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T20:11:23.600

您正在调用`reader.ReadToEnd()`写入控制台，然后`reader.ReadToEnd()`再次调用 MessageBox 和文件输出。您需要将数据收集`reader.ReadToEnd()`到临时变量（`char[]`或其他）中，然后将其提供给所有三个输出。

# vim - 如何在 Vim 备份文件名前添加字符？

> ID：12062175
> 
> 赞同：5
> 
> 时间：2012-08-21T20:02:02.170
> 
> 标签：vim, backup

默认情况下，Vim`~`会在备份文件中附加一个波浪号。我知道有一个自定义备份文件扩展名的配置选项：如果您`backupext=.bak`在 .vimrc 文件中设置，您的备份文件将`.bak`附加到它们而不是波浪号。

我想知道让 Vim 自动将字符添加到备份文件名的最佳方法是什么。具体来说，我希望 Vim`.`在继续附加波浪号的同时添加句点`~`。

（如果您想知道为什么，我使用 KDE 并且不喜欢 Dolphin 显示备份文件 - 请参阅[http://forum.kde.org/viewtopic.php?f=17&t=82350](http://forum.kde.org/viewtopic.php?f=17&t=82350)）。

我也查看了[这个线程](https://stackoverflow.com/questions/4331776/change-vim-swap-backup-undo-file-name?answertab=active#tab-top)，但我不想创建自定义备份目录，我只想在备份文件名前添加一个字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:29:52.083

一种潜在的解决方案是

```
mkdir ~/.vim/backup 
```

然后添加

```
set backupdir=~/.vim/backup 
```

在你的 ~/.vimrc 中，这样你就不必看它们了。

但是，如果您想将它们保存在同一个目录中，您可以在编写它们时重命名它们，如下所示：

```
au BufWritePost * exe "silent !mv ".expand("%:p").&bex." ".expand("%:p:h")."/.".expand("%:t").&bex 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:08:02.887

您可以使用 vim 的 backupdir 选项将备份写入特定目录（甚至是工作目录中的特定目录，请参阅[http://vim.wikia.com/wiki/Remove_swap_and_backup_files_from_your_working_directory](http://vim.wikia.com/wiki/Remove_swap_and_backup_files_from_your_working_directory)）另一个选项是删除 vim 自己的备份文件功能并自己更换。我对 Vimscript 的熟悉程度比我希望的要低，但据我所知：

```
:au BufWritePre * exe 'write! ' expand("%:h") . "." . expand("%:t") 
```

如果您想使用 backupdir 但避免覆盖文件，请使用类似

```
:au BufWritePre * let &backupext ='@'.substitute(substitute(substitute(expand('%:p:h'), '/', '%', 'g'), '\', '%', 'g'),  ':', '', 'g').'~' 
```

[（从https://stackoverflow.com/a/9528517/49047](https://stackoverflow.com/a/9528517/49047)窃取）

# javascript - jQuery：如何 在不同的字符串中添加换行符以分隔 2 中的句子？

> ID：12062179
> 
> 赞同：3
> 
> 时间：2012-08-21T20:02:20.593
> 
> 标签：javascript, jquery, text, split, line-breaks

我有不同的句子，其中都有双引号，例如：

```
<h3 class="myClass">Sentence one "ends like this"</h3>
<h3 class="myClass">Sentence two"ends like that"</h3>
<h3 class="myClass">Sentence three "another ending"</h3> 
```

全部在一个页面上。基本上所有的值都是不同的，我试图在双引号之前换行，所以它会像

```
<h3 class="myClass">Sentence one <br/>"ends like this"</h3>
<h3 class="myClass">Sentence two <br/>"ends like that"</h3>
<h3 class="myClass">Sentence three <br/>"another ending"</h3> 
```

老实说，在 split 和 text 之间应该使用哪个 jQuery 函数，我有点困惑？任何帮助将不胜感激，我需要了解如何做到这一点......非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:12:47.787

您可以匹配`<h3>`元素，然后将函数传递给[html()](http://api.jquery.com/html/)。将为每个元素调用该函数，将传递当前元素的内部 HTML 标记，并且必须返回新标记。

从那里，您可以使用[replace()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)在第一个双引号字符之前插入一个`<br />`元素：

```
$("h3.myClass").html(function(index, currentHtml) {
    return currentHtml.replace('"', '<br />"');
}); 
```

[你可以在这个 fiddle](http://jsfiddle.net/yXUcw/)中测试这个解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:11:09.907

看看[这里](http://jsbin.com/uwihow/3/)看看这个代码工作：

```
$(".myClass").each(function() {
    var text = $(this).text();
    var q = text.indexOf('"');
    $(this).html(text.substr(0, q) + "<br />" + text.substr(q));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T20:15:22.327

创建一个接受 jQuery 对象、获取其 html 并对其进行更改的函数

```
function addBR($el) { 
```

获取元素的html

```
var originalhtml = $el.html(); 
```

用引号分割html，并用新的<br />加入它们

```
var newhtml = originalhtml.split('"').join('<br />"'); 
```

应用新的 html

```
$el.html(newhtml); 
```

就是这样。
调用它

```
addBR(jQuery element); 
```

示例：http: [//jsfiddle.net/XFC5u/](http://jsfiddle.net/XFC5u/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T20:17:22.957

我会看看[Javascript split() 方法](http://www.w3schools.com/jsref/jsref_split.asp)，但本质上你有正确的想法。您想根据双引号（\"）进行拆分，这将返回一个包含双引号出现的所有拆分的数组。

所以会发生这样的事情：

`var array = $(".myClass").text().split("\"");` `//array = [Sentence one, ends like this, ];`

（不是 100% 确定代码是否正确，所以请检查><）

然后从那里你可以重新创建包含的文本
。至少这是我将如何去做的过程。

还要记住 split 方法确实从数组中删除了 \" （因为它使用它作为拆分它们的限制器），因此请确保在重新创建文本时读取它们。

至于 Jquery 是否作为这样做的特定方式，我不确定。如果有人想改进我的答案，请随意。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T20:19:36.360

只需一些基本的javascript（在jQuery循环外）

```
​$(".myClass").each(function() {   // for each item of myClass 
   var text = $(this).text();     // temp store the content
   var pos = text.indexOf('"');   // find the position of the "
   $(this).html(text.slice(0,pos) + '</br>' + text.slice(pos));    // slice before + <br> + slice after = new content
});​​​​​​​​​​ 
```

小提琴：http:
[//jsfiddle.net/JaPdT/](http://jsfiddle.net/JaPdT/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T20:12:31.757

```
$('.myClass').each(function(){ 
    if($(this).text().indexOf('"') >=0 ){  
        $(this).text( $(this).text().replace('"', '<br/>"')  )   
    }
}) 
```

# perl - 如何读取包含我不想在 perl 中使用 Lingua::Stem 的 add_exceptions($exceptions_hash_ref) 进行词干处理的单词的可编辑文件？

> ID：12062182
> 
> 赞同：0
> 
> 时间：2012-08-21T20:02:29.500
> 
> 标签：perl, stemming

我正在使用 Perl 的 Lingua::Stem 模块 ( [Lingua::Stem](http://search.cpan.org/~snowhare/Lingua-Stem-0.84/lib/Lingua/Stem.pod) )，并且我想要一个文本文件或其他可编辑的文件格式来包含我不想要词干的单词列表。我希望能够随时向文件中添加单词。

他们的例子表明：

```
add_exceptions($exceptions_hash_ref); 
```

做这个的最好方式是什么？

我使用他们的方法对一些异常进行硬编码，但我想用一个文件来做到这一点。

```
# adding default exceptions
Lingua::Stem::add_exceptions({ 'emily' => 'emily',
                            'driven' => 'driven',
                        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:13:23.147

您可以定义一个函数来从给定文件中加载异常：

```
sub load_exceptions {
  my $fname = shift;
  my %list;
  open (my $in, "<", $fname) or die("load_exceptions: $fname");
  while (<$in>) {
    chomp;
    $list{$_} = $_; 
  }
  close $in;
  return \%list;
} 
```

并使用它：

```
Lingua::Stem::add_exceptions(load_exceptions("notstem.txt")); 
```

示例输入文件：

```
emily 
driven 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:16:03.523

假设您的“可编辑”文件是空格分隔的，如下所示：

```
emily emily
driven driven 
```

您的代码可能是：

```
open my $fh, "<", "excep.txt" or die $!;
my $href = { map split, <$fh> };
Lingua::Stem::add_exceptions($href); 
```

# jquery - HoverIntent jQuery 和调用 jQuery 脚本

> ID：12062188
> 
> 赞同：1
> 
> 时间：2012-08-21T20:02:51.880
> 
> 标签：jquery, hoverintent

我正在努力将 hoverintent jQuery 集成到我的网站中。我已将其插入我的代码，但我从 Chrome 调试器收到错误消息。错误读取`Uncaught TypeError: Cannot use in operator to search for display in undefined`。我不确定出了什么问题。这是我的代码。

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">  

<script type="text/javascript" src="http://cherne.net/brian/resources

/jquery.hoverIntent.js"></script>

</script> 

<script type="text/javascript" >

$(document).ready(function() {

var config = {    

  sensitivity: 3,
  interval: 200,   
  over: $(this).animate({opacity: 1}, 500), 
  timeout: 500, 
  out: $(this).animate({opacity: 0}, 500) 

};

var config_1 = {    

  sensitivity: 3, 
  interval: 200,    
  over: $(this).animate({opacity: 1}, 500),
  timeout: 500,    
  out: $(this).animate({opacity: 0}, 500) 

};

$('#form1').hoverIntent(config);

$('#form2').hoverIntent(config_1);

});

</script> 
```

这是html代码

```
<div id="div1">

<form action="" id="form1" method="post">

<textarea id="inputbox1"  name="what_i_do" maxlength="160" value=""><?php echo   

$profile_data['what_i_do']; ?></textarea>

<input type="submit" id="button1" value="Edit">

</form>

</div>

<div id="div2">

<form action="" id="form2" method="post">

<textarea id="inputbox2" name="fait_accompli"  maxlength="160" value=""><?php echo 

$profile_data['fait_accompli']; ?></textarea>

<input type="submit" id="button2" value="Edit">

</form>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:07:02.383

`document.ready`这是因为您缺少函数的右花括号和括号

```
$('#form1').hoverIntent(config);

$('#form2').hoverIntent(config_1);
}); // <-----  here to close the document.ready function 
```

更改您的配置以包含 function()

```
var config = {       
  sensitivity: 3,
  interval: 200,   
  over: function(){
         $(this).animate({opacity: 1}, 500)
  }, 
  timeout: 500, 
  out: function(){
         $(this).animate({opacity: 0}, 500)
  }    
}; 
```

此外，如果两个配置相同，您可以删除其中一个

# wpf - WPF 应用程序和 Windows 8 的对齐问题

> ID：12062189
> 
> 赞同：2
> 
> 时间：2012-08-21T20:02:55.663
> 
> 标签：wpf, windows

我刚刚将我的 WPF 应用程序部署到 Windows 8 上，震惊地发现我的所有标签都没有与它们各自的文本框对齐！在 Visual Studio 2010 和 2012 中，它们在设计视图中完美对齐并对齐。当应用程序在 Windows 7 和 XP 中运行时，它们也可以完美排列。我对两种部署都使用相同的分辨率/DPI 设置。有没有其他人注意到这个问题？有没有人知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:04:36.317

您是否在应用程序中操纵文本框或标签的大小？

# jquery - jquery - mousemove：如何防止 div 停止跟随鼠标

> ID：12062195
> 
> 赞同：2
> 
> 时间：2012-08-21T20:03:22.467
> 
> 标签：jquery, html, mousemove

我有2个div。一个大黄盒和一个小红盒。我使用 jQuery 将 mousemove 效果附加到黄色框上。当鼠标悬停在黄色框上时，鼠标悬停会使红色框跟随鼠标。当鼠标到达“in”黄框内的红框时，在黄框上不再有mousemove，红框停止跟随鼠标。当鼠标再次进入黄色框时，它再次随着鼠标移动——当然。只要红框越过黄框，红框就必须跟随鼠标，并且不会因为移动越过红框本身而停止。有没有办法防止这种情况？

谢谢

代码在这里：http: [//jsfiddle.net/Illum/pPn3v/](http://jsfiddle.net/Illum/pPn3v/)

```
<html>
<head>
<title></title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<style type="text/css">
#box1 {width: 500px; height: 500px; background-color: Yellow; border: 2px solid Blue;}
#box2 {width: 100px; height: 100px; background-color: red; border: 2px solid pink; z-index: 100; position: absolute;}    
</style>
</head>
<body>
<div id="box1"></div>
<div id="box2"></div>

<script type="text/javascript">
    $("#box1").bind('mousemove', function (e) {
        $("#box2").css("left", e.pageX);
        $("#box2").css("top", e.pageY);
    });
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:19:57.857

我在[这里 (jsfiddle)](http://jsfiddle.net/pPn3v/12/)为您的问题写了一个解决方案。它可能不是最干净的解决方案，但这是我能想到的在不将 div 相互嵌入的情况下完成任务的唯一方法。

我基本上在“红色”框中添加了另一个侦听器，以检查它是否仍在黄色框中。

```
var yellow = $('#yellow');
var offset = yellow.offset();
var offsetWidth = offset.left + yellow.width();
var offsetHeight = offset.top + yellow.height();

var red = $('#red');

yellow.on('mousemove', function (e) {
    red.css("left", e.pageX);
    red.css("top", e.pageY);
});

red.on('mousemove', function (e) {
    if(e.pageX >= offset.left && e.pageY >= offset.top &&
       e.pageX <= offsetWidth && e.pageY <= offsetHeight) {
        red.css("left", e.pageX);
        red.css("top", e.pageY);  
    }               
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:21:47.840

你做了两个独立的div。如果您将红色 div 作为黄色的一部分，它将为您工作。更改`<div id="box1"></div><div id="box2"></div>`为`<div id="box1"><div id="box2"></div></div>`

# entity-framework - 代码优先外键配置

> ID：12062202
> 
> 赞同：0
> 
> 时间：2012-08-21T20:04:01.997
> 
> 标签：entity-framework

我很难维持父类与其子类之间的多重关系。谁能告诉我为什么我可以在父级中创建两个子引用而不是第三个？下面的代码仅在第三个引用被注释掉时才有效。

```
public class Parent
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int Child1Id { get; set; }
    public Child Child1 { get; set; }
    public int Child2Id { get; set; }
    public Child Child2 { get; set; }
    //public int Child3Id { get; set; }
    public Child Child3 { get; set; }
    public ICollection<Child> Children { get; set; }
}
public class Child
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int ParentId { get; set; }
    public Parent Parent { get; set; }
}
public class CFContext : DbContext
{
    public DbSet<Parent> Parents { get; set; }
    public DbSet<Child> Children { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Child>()
            .HasRequired(c => c.Parent)
            .WithRequiredPrincipal(p => p.Child1)
            .WillCascadeOnDelete(false);

        modelBuilder.Entity<Child>()
         .HasRequired(c => c.Parent)
         .WithRequiredPrincipal(p => p.Child2)
         .WillCascadeOnDelete(false);

        //modelBuilder.Entity<Child>()
        // .HasRequired(c => c.Parent)
        // .WithRequiredPrincipal(p => p.Child3)
        // .WillCascadeOnDelete(false);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:48:32.000

看起来您正在尝试建立从父实体到子实体的一对多关系。在这种情况下，代码应如下所示：

```
public class Parent
{
    public int Id { get; set; }
    public string Name { get; set; }
    public ICollection<Child> Children { get; set; }
}
public class Child
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int ParentId { get; set; }
    public Parent Parent { get; set; }
} 
```

只要您遵循有关导航属性和外键命名的默认约定，就不必在 Fluent API 中指定关系。您将不得不使用 Fluent API 和/或属性来配置您使用非常规名称的关系，例如重命名 ParentId 其他一些东西需要您在 [ForeignKey("Parent")] 属性中标记它。

使用 Fluent API 的最常见用例是禁用级联删除（无法使用属性执行此操作）。

# android - 防止微调器下拉显示

> ID：12062207
> 
> 赞同：9
> 
> 时间：2012-08-21T20:04:14.587
> 
> 标签：android, android-spinner

我正在使用一个微调器，其适配器是动态填充的。

*   当有多个项目时，微调器行为是标准的。单击时，将显示下拉菜单，允许用户选择一个项目
*   当只有一个项目时，我想阻止下拉菜单出现并捕获单击事件以执行操作。

我找不到阻止默认行为的解决方案（即单击时仅显示一个项目的下拉列表）。关于如何做到这一点的任何想法？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T20:09:49.497

嗯...尝试使用`setClickable(fasle)`或者`setEnabled(false)`如果只有一项在`spinner`.

**试试这个**

```
public class SpinnerActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Spinner spinner = (Spinner) findViewById(R.id.spinner1);
        List<String> list = new ArrayList<String>();
        list.add("list 1");
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(dataAdapter);

        if (list.size() < 2) {
            spinner.setClickable(false);
            spinner.setOnTouchListener(new View.OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    if (event.getAction() == MotionEvent.ACTION_UP) {
                        Toast.makeText(SpinnerActivity.this, "Catch it!", Toast.LENGTH_SHORT).show();
                    }
                    return true;
                }
            });
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-04T08:14:54.297

为了防止微调器显示下拉列表，我只在 onTouch(...) 中返回 true，如下所示：

```
 spinner.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            return true;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-13T22:34:06.220

在科特林我是这样做的

```
 <string-array name="coins_array">
    <item>USD</item>
    <item>USDT</item>       
  </string-array>

import android.os.Bundle
import android.view.View
import android.widget.AdapterView
import android.widget.ArrayAdapter
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity
import kotlinx.android.synthetic.main.main_activity.*

class MainActivity: AppCompatActivity(), AdapterView.OnItemSelectedListener{
    private var touchEvent = false
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.main_activity)

        ArrayAdapter.createFromResource(this, R.array.coins_array, android.R.layout.simple_spinner_item
        ).also { adapter ->
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)
            coin_choice.adapter = adapter
        }
        coin_choice.onItemSelectedListener = this

    }

    override fun onItemSelected(parent: AdapterView<*>, view: View, position: Int, id: Long) {
        if(touchEvent){
            val coin: String = parent.getItemAtPosition(position).toString()
            Toast.makeText(this, coin, Toast.LENGTH_SHORT).show()
        }
        touchEvent = true
    }

    override fun onNothingSelected(parent: AdapterView<*>?) {
    }
} 
```

# c# - 如何使用 NHibernate 从存储过程中填充实体的子集合/关联

> ID：12062214
> 
> 赞同：2
> 
> 时间：2012-08-21T20:04:48.900
> 
> 标签：c#, nhibernate, stored-procedures, nhibernate-mapping, nhibernate-criteria

我想知道是否有办法从 NHibernate 中的存储过程中填充递归实体（子集合/关联）。假设我有下一节课：

```
public class Category
{
  public int category_id { set; protected get; }
  public string category_description { set; get; }
  public IEnumerable<Category> SubCategories { set; get; }

  ....
} 
```

有没有办法从获取一组类别及其整个子树的存储过程中获取根类别列表，每个类别在 SubCategories 属性中都有其各自的子级？我想得到与“[急切加载递归关系](https://stackoverflow.com/questions/1223163/eagerly-load-recursive-relation)”中提出的解决方案相同的结果，但从存储过程而不是表中获取结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T02:39:04.967

这可以通过命名查询来实现。在此处查看有关命名查询的官方 NHibernate 文档：http: [//nhibernate.info/doc/nh/en/index.html#querysql-namedqueries](http://nhibernate.info/doc/nh/en/index.html#querysql-namedqueries)

您想要做的是使用命名查询的功能，它允许您加入关联：`<return-join />`

NHibernate 博客上还有一个关于同一主题的示例：http: [//nhibernate.info/blogs/nhibernate/archive/2008/11/24/populating-entities-with-associations-from-stored-procedures-with -nhibernate.aspx](http://nhibernate.info/blogs/nhibernate/archive/2008/11/24/populating-entities-with-associations-from-stored-procedures-with-nhibernate.aspx)

复杂的例子：

```
<sql-query name="GetCategory">
    <return alias="Category" class="Category"/>
    <return-join alias="Subcategory" property="Category.SubCategories">
        <return-property column="Subcategory.SubcategoryId" name="Id" />
    </return-join>
    EXEC someStoredProcedureName :CategoryId
</sql-query> 
```

# jquery - jquery中的双标题

> ID：12062217
> 
> 赞同：0
> 
> 时间：2012-08-21T20:04:56.540
> 
> 标签：jquery, jqgrid

我正在为一个`jqgrid`要求而苦苦挣扎。我希望它做这样的双标题：

![用户界面样机](../Images/d8a18e2d23cb17e88bb7f60833874c94.png)

这可能吗，有一个标题，下面有另一个标题，即最小值/最大值，所以就像有平均温度，然后下面有一个标题，最小值和最大值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T02:06:03.623

是的，有可能。看看这些例子：

[http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)

点击最后一个demo：

`Frozen Cols.Group Header(new) --> Group Header - with colspan style`

然后在代码中，你会看到它是这样配置的：

```
 groupHeaders:[
  {startColumnName: 'amount', numberOfColumns: 3, titleText: '<em>Price</em>'},
  {startColumnName: 'closed', numberOfColumns: 2, titleText: 'Shiping'}
  ] 
```

# datatable - 如何在 primefaces 3.3 中实现 rowToggle？

> ID：12062218
> 
> 赞同：0
> 
> 时间：2012-08-21T20:04:59.257
> 
> 标签：datatable, primefaces

我现在使用的是 primefaces 3.3，但是这个版本不支持数据`event="rawToggle"`表。所以我选择使用`onExpandStart`而不是`rowToggle`，但我遇到了另一个问题。在这里，我想将另一个数据表作为扩展行，所以每次我切换一行时`nodetable`，我都需要传递该`nodeId`行的`backingbean`以获取该节点的所有内容。如果我有`event="rowToggle`“，我可以毫无问题地做到！但是如果我使用`onExpandStart`dataTable的属性，我就无法进入`somenode.nodeId`，`backingbean`有谁知道如何解决它？我也试过在`<input type="hidden" name="hidden" value="#{somenode.nodeId}"/>`里面放一个隐藏的输入标签`rowToggler`，但是我得到的值`backingbean`是空的。已经工作了几天，但仍然没有想法。请帮助请！

```
<p:dataTable id="nodetable" value="#{nodeedit.list}" var="somenode"
             styleClass="datatable" editable="true" 
             onExpandStart="#{nodeedit.toggle(somenode.nodeId)}" >
   <p:ajax event="rowEdit" listener="#{nodeedit.save('node')}"/>

       <p:column style="width:4%">
          <p:rowToggler>
             <h:form>
               <input type="hidden" name="hidden" value="#{somenode.nodeId}"/>
             </h:form>
          </p:rowToggler>
       </p:column> 

       <p:column>
          <f:facet name="header">ID</f:facet>
             <h:form>
                <h:commandLink action="nodeedit">#{somenode.norder}</h:commandLink>
             </h:form>
       </p:column>

       <p:column headerText="Name">
           <p:cellEditor> 
              <f:facet name="output"> 
                <h:outputText value="#{somenode.title}" /> 
              </f:facet> 
              <f:facet name="input"> 
                 <p:inputTextarea value="#{somenode.title}" style="width:100%"/> 
              </f:facet> 
           </p:cellEditor> 
       </p:column>

       <p:column headerText="Edit" style="width:50px"> 
           <p:rowEditor /> 
       </p:column>

       <p:rowExpansion>
               <p:dataTable id="contentId" var="content" 
                            value="#{nodeedit.contents}" id="contents" editable="true"> 
                  <p:ajax event="rowEdit" listener="#{nodeedit.save('content')}"/>

                  <p:column headerText="Text" style="width:450px"> 
                     <p:cellEditor> 
                        <f:facet name="output"> 
                            <h:outputText value="#{content.text}" escape="false" /> 
                        </f:facet> 
                        <f:facet name="input"> 
                            <p:inputTextarea value="#{content.text}" style="width:100%"/> 
                        </f:facet> 
                     </p:cellEditor> 
                   </p:column> 

                   <p:column headerText="Edit" style="width:50px"> 
                      <p:rowEditor /> 
                   </p:column> 

          </p:dataTable> 
       </p:rowExpansion>
  </p:dataTable> 
```

我也尝试过另一种方式。节点的内容也是一个对象，在我定义的节点类中

```
 List<LibContent> contents = new ArrayList<LibContent>(); 
```

所以，就像 siebzOr 所说的那样，我在我的 jsf 中写道：

```
 <p:rowExpansion>
         <p:dataTable var="content" value="#{somenode.content}">

            **<p:ajax event="rowEdit" listener="#{nodeedit.save()}"/>**

            <p:column>
               <h:outputText value="#{content.someValue}" />
            </p:column>

            <!-- Other columns -->

         </p:dataTable>
    </p:rowExpansion> 
```

在backingbean nodeedit中，我有

```
 public void save() {
            for (Content content : node.contents)
                  System.out.println("content.text");
        } 
```

我发现无论我在页面中做什么，content.text 都不会改变。但是如果我`List<Content> contents = new ArrayList<Content>()`直接在 中定义`nodeedit`，它可以得到新的值！！这就是为什么我`nodeId`每次切换节点表然后更新`backingbean`. 我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:18:07.610

`p:rowExpansion`是动态的并使用 AJAX 加载它的数据。像这样的东西应该工作：

```
<h:form>
    <p:dataTable value="#{nodeedit.list}" var="somenode" styleClass="datatable">
        <p:column>
            <p:rowToggler />
        </p:column>

        <!-- Your columns here -->

        <p:rowExpansion>
            <p:dataTable var="content" value="#{nodeedit.contentOf(somenode)}">

                <p:column>
                    <h:outputText value="#{content.someValue}" />
                </p:column>

                <!-- Other columns -->

            </p:dataTable>
        </p:rowExpansion>
    </p:dataTable>
</h:form> 
```

在您的支持 bean 中，您应该有一个获取节点内容的方法，在我的示例中`contentOf(Node node)`

```
@Named // or @ManagedBean
@ViewScoped // or some other scope
public class Nodeedit
{
    private List<Node> list;

    //Getters and Setters

    public List<SomeClass> contentOf(Node node)
    {
        // get and return the content of the node
    }
} 
```

如果您`Node`有一种方法来获取，`Content`您可以改为执行以下操作：

```
<p:rowExpansion>
    <p:dataTable var="content" value="#{somenode.content}">

        <p:column>
            <h:outputText value="#{content.someValue}" />
        </p:column>

        <!-- Other columns -->

    </p:dataTable>
</p:rowExpansion> 
```

如果 a`Node`的内容不是`Collection`某种类型的，我不确定它是否会`p:dataTable`作为值起作用。

我不知道您的课程是什么样的，所以以上只是一个想法。

另请注意，我在`h:form`周围放置了 a 而`p:dataTable`不是在其`p:dataTable`本身中放置多个表单。这对于 AJAX、选择等多种事物是必需的。您不能嵌套表单。

# playframework - 在 Play 2 中如何进行实例级模型验证？

> ID：12062227
> 
> 赞同：4
> 
> 时间：2012-08-21T20:05:44.680
> 
> 标签：playframework, playframework-2.0, ebean

我需要一些跨多个字段的复杂验证逻辑。每次调用模型上的 save() 或 update() 时，有没有办法做到这一点？我目前使用 Ebean 作为我的 ORM。我现在能想到的唯一方法是覆盖 save() ，例如：

```
public class User extends Model {
  @Override
  public void save(){
    if(this.validate()){
      super.save();
    }
  }
 ..
} 
```

有没有更标准化的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T15:07:41.970

您可能想在 ebean 中观看 BeanPersistAdapter。

您可以覆盖方法，例如 preUpdate。

# jquery - 疯狂的 jquery 选择器行为

> ID：12062232
> 
> 赞同：0
> 
> 时间：2012-08-21T20:06:02.173
> 
> 标签：jquery, jquery-selectors, each

我正在使用 jquery 1.8，并且我正在使用这种和平的代码：

```
jQuery('body.fb_tab-resizable:not(.fb_tab-processed)').each(function () {
      jQuery(this).addClass('fb_tab-processed');
      if (typeof(FB) == 'undefined') {
        // FB not yet initialized.
        jQuery(document).bind('fb_init', FB_Tab.setAutoResize);
      }
      else {
        // FB already initialized.
        FB_Tab.setAutoResize();
      }
      jQuery(document).bind('fb_init', FB_Tab.setAutoResize);
    }); 
```

它不起作用，所以我做了一个console.log：

```
jQuery('body.fb_tab-resizable:not(.fb_tab-processed)') 
```

这给出了一个空结果“[]”。

但是当我这样做时：

```
jQuery('body.fb_tab-resizable:not(.fb_tab-processed)').addClass('fb_tab-processed'); 
```

该类已添加到正文中，并且一切正常。

谁能告诉我一些关于这种行为的事情？

你可以在这里找到一个 JSFiddle：http: [//jsfiddle.net/ettun/3/](http://jsfiddle.net/ettun/3/)

**编辑：它似乎在 JSFiddle 中有效，但不在我的网站上，我将尝试在 fiddle 中更新我的代码

# c# - Asp.net ajax - 丢失会话变量 - Internet Explorer 8 和早期版本

> ID：12062233
> 
> 赞同：1
> 
> 时间：2012-08-21T20:06:06.243
> 
> 标签：c#, asp.net, ajax

我一直在处理一个遗留项目（尽管是 C#），并试图解决一个多年来一直存在的会话问题。它发生在 IE8 和以前的版本上。在 IE9 上，Google Chrome、Firefox 和 Safari 运行良好。

换句话说，我们有一个可以在所有浏览器上正常运行的管理软件。但是有一个特定的页面会发出大量的 Ajax 请求，并且在某些时候它会丢失会话数据。

我已经检查了 Fiddle 的 cookie 问题，但它们总是被发送并且相同。

这些线索让我们认为问题出在应用程序内部。但如果我们记得问题仅出现在 IE8 和之前的版本中，我们认为问题可能出在浏览器中。

我们还使用一个遗留的 Ajax 库。而且问题一定不存在，因为我们的许多应用程序都使用它，并且它们没有相同的问题。

*   我们正在使用带有状态服务器的 IIS7

我几乎没有想法。我希望你有一些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T00:00:38.393

我知道了！

使用 Fiddler，我看到一个非常可疑的“/”请求。有东西请求站点基本 URL。我记得这个特定 Web 应用程序的默认页面会杀死会话数据，换句话说，调用登录页面也意味着注销用户。

经过几个小时的调试和嗅探，我发现了发出这样的请求的原因。

有一个 javascript 函数可以创建一些图像标签。有时这些标签是用一个空地址创建的，换句话说，img 标签的 src 属性是一个长度为 0 的字符串。

它必须是**IE8 和旧版本的错误**，因为它们请求网站根目录而不是不请求任何内容。也许这不是一个错误，但这种行为肯定是出乎意料的。

呸！我仍然不敢相信我找到了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:27:22.157

丢失会话状态可能是应用程序错误的结果。但是，如果您声称这仅发生在 IE8 和旧版本上，则情况并非如此……所以我建议您使用页面 ViewState 而不是会话状态。让我知道是否对你有用？

以下是如何根据页面视图状态创建属性的示例，只需确保您已在页面级别启用视图状态：

```
 public string MyProperty
    {
        get
        {
            return ViewState["MyProperty"] as string;
        }
        set
        {
            ViewState["MyProperty"] = value;
        }
    } 
```

# linux - Linux 清理目录脚本

> ID：12062236
> 
> 赞同：1
> 
> 时间：2012-08-21T20:06:21.717
> 
> 标签：linux, bash, scripting, ls

我需要为 Web 服务器编写一个脚本，该脚本将清除超过 14 天的文件/文件夹，但保留最后 7 个文件/目录。到目前为止，我一直在做我的研究，这就是我想出的（我知道语法和命令是不正确的，但只是为了让你明白）：

```
ls -ldt /data/deployments/product/website.com/*/ | tail -n +8 | xargs find /data/deployments/product/website.com/ -type f -type d -mtime +14 -exec rm -R {} \; 
```

这是我关于脚本应该如何表现的思考过程（我更像是一个 Windows 批处理人）：

**列出目录内容**

```
 If contents is less than or equal to 7, goto END
 If contents is > 7 goto CLEAN
:CLEAN
ls -ldt /data/deployments/product/website.com/*/
keep last 7 entries (tail -n +8)
output of that "tail" -> find -type f -type d (both files and directories) -mtime +14 (not older than 14 days) -exec rm -R (delete) 
```

我看过一堆例子，使用 xargs 和 sed 但我就是不知道如何把它们放在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:00:32.957

```
#!/bin/bash

find you_dir -mindepth 1 -maxdepth 1 -printf "%T@ %p\n" | \
sort -nrk1,1 |sed '1,7d' | cut -d' ' -f2 | \
xargs -n1 -I fname \
find fname -maxdepth 0 -mtime +14 -exec echo rm -rf {} \; 
```

`echo`如果您对输出感到满意，请删除...

解释（逐行）：

1.  `find`in并在单独的行上为每个文件/目录`your_dir`打印 seconds_since_Unix_epoch ( `%T@`) 和文件 (/dir)name
2.  按第一个字段（seconds_since_Unix_epoch）降序排序，丢弃前七行 - 从其余部分中提取名称（第二个字段）
3.  `xargs``find`逐个参数传递到新进程 ( `-n1`) 并用于`fname`表示参数
4.  `-maxdepth 0`仅限`find`于`fname`

您可以将 minNrOfFiles 和 ageLimit 存储在 Bash-Variables 中，或者只需进行少量更改即可传递给脚本：

```
minNrOfFiles=7 # or $1
ageLimit=14    # or $2 
```

改变：`sed '1,'"$minNrOfFiles"'d'`和`-mtime +"$ageLimit"`

# javascript - 用于验证元素值和复选框的 Javascript

> ID：12062238
> 
> 赞同：0
> 
> 时间：2012-08-21T20:06:23.837
> 
> 标签：javascript, forms, validation

如果我的复选框都没有被选中并且输入字段没有被填写，我想使用js来检查表单。在这种情况下，用户应该收到一条消息，告诉他们至少做出一个选择或制定自己的选择。

表单元素...

```
<input type="checkbox" name="checkboxA" id="checkboxA" value="X" />
<input type="checkbox" name="checkboxB" id="checkboxB" value="Y" />
<input type="checkbox" name="checkboxC" id="checkboxC" value="Z" />

<input type="text" id="Text" class="textfield" value="please enter text." maxlength="100" size="40" onblur="if (this.value == '') {this.value = 'please enter text';}"  onfocus="if (this.value == 'please enter text') {this.value = '';}" /> 
```

...在执行 POST 方法时由此 js 函数检查：

```
function checkFormElement() {
if ((document.getElementById("text").value == "please enter text.")
    && (document.getElementById("checkboxA").checked == false)
    && (document.getElementById("checkboxB").checked == false)
    && (document.getElementById("checkboxC").checked == false)){
        alert("Please choose out of X Y Z or formulate your own choice .");
        document.getElementById("checkboxA").focus();
    return false;
    }
return true; 
```

}

我想使用 jQuery 应该更容易，但我仍然很想知道如何在纯 js 中解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:10:24.753

大小写对 ID 值很重要，因此请更改：

```
document.getElementById("text").value 
```

为此以匹配您在 HTML 中的内容：

```
document.getElementById("Text").value 
```

一旦我解决了案例问题并输入了实际调用的代码`checkFormElement()`，它似乎在这里工作正常：http: [//jsfiddle.net/jfriend00/9DHxF/](http://jsfiddle.net/jfriend00/9DHxF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:16:05.630

您缺少`submit`将运行的按钮\选项或类似类型`checkFormElement()`。一旦你包含了调用这个函数的东西，你应该不会遇到任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:18:56.130

您的代码中有一些错误。主要是不匹配的ID等。

这里的工作示例：http: [//jsfiddle.net/E8SBq/](http://jsfiddle.net/E8SBq/)

这应该适合你：

```
<input type="checkbox" name="checkboxA" id="checkboxA" value="X" />
<input type="checkbox" name="checkboxB" id="checkboxB" value="Y" />
<input type="checkbox" name="checkboxC" id="checkboxC" value="Z" />

<input type="text" id="Text" class="textfield" value="please enter text" maxlength="100" size="40" onblur="if (this.value == '') {this.value = 'please enter text';}"  onfocus="if (this.value == 'please enter text') {this.value = '';}" />
<input type="submit" value="Submit" onClick="checkFormElement()" /> 
```

以及 JS 函数：

```
function checkFormElement() {
if (document.getElementById("Text").value != null  
    && document.getElementById("checkboxA").checked == false
    && document.getElementById("checkboxB").checked == false
    && document.getElementById("checkboxC").checked == false) {
        alert("Please choose out of X Y Z or formulate your own choice .");
        document.getElementById("checkboxA").focus();
    return false;
    }
return true;

} 
```

# ruby-on-rails - 构建和存储复杂的 SQL 查询以供以后编辑

> ID：12062251
> 
> 赞同：5
> 
> 时间：2012-08-21T20:07:20.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, arel, rails-postgresql, hstore

我正在使用 Rails 3.2.8 构建一个反映 Google Analytics 的自定义配置文件构建器的“产品集”构建器。例如，用户可以如下定义产品集：

（类别='打印机'）和（（名称包含'无线'）或（名称包含'Wifi'））

我的产品数据存储在 Postgres (9.1.4) 中，使用 HStore 列来存储动态产品属性。我已经构建了一个可以使用 Arel 构造查询的表单，但我坚持以下要求：
1\. 查询必须序列化到数据库。我可以存储 .to_sql 字符串，但随后卡住了......
2\. 我必须能够重建用户表单以供以后编辑，因为这些不是一次性搜索，而是共享查询。

如何以可以轻松重构用户定义查询的方式进行序列化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:26:12.263

难道你不能序列化 rails 从表单中获取的参数吗？

您将拥有来自用户输入表单的键和值的散列，并且可以轻松地将其反馈到您用于从所述表单查询数据库或进一步处理它的任何逻辑中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-23T22:30:52.407

1.  您可以使用持久模型来保存用户关于搜索的选项。
2.  当您需要运行查询时，您将获得用户保存的选项并将它们传递给使用`ransacker`. 您可以像这样访问值`hstore`：

```
Arel::Node::InfixOperator.new('->>', 'hstore_column_name', Arel::Nodes::Quoted.new('key_in_hstore')) 
```

# java - 如何使用 StaX 获取特定 XML 标记的值

> ID：12062255
> 
> 赞同：2
> 
> 时间：2012-08-21T20:07:31.697
> 
> 标签：java, xml, tags, stax

> **可能重复：**
> [如何使用 StaX](https://stackoverflow.com/questions/12061125/how-to-use-stax)

嘿伙计们，我有一个 XML 文件，我希望 Java 吐出特定标签的值。例如，这是我的 XML：

```
<?xml version="1.0"?>
    <dennis>
        <hair>brown</hair>
        <pants>blue</pants>
        <gender>male</gender>
    </dennis> 
```

所以假设我想让 Java 吐出“性别”的价值，有没有我可以使用的代码

```
XMLStreamReader.goToTag("gender");
System.out.println(XMLStreamReader.getLocalName()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:21:19.090

您可以执行以下操作：

```
StreamSource xml = new StreamSource("input.xml");
XMLStreamReader xsr = xif.createXMLStreamReader(xml);
xsr.nextTag();
while(!xsr.getLocalName().equals("gender")) {
    xsr.nextTag();
} 
```

**XPath API**

您还可以使用`javax.xml.xpath`API：

```
package forum12062255;

import java.io.StringReader;
import javax.xml.xpath.*;
import org.xml.sax.InputSource;

public class XPathDemo {

    private static final String XML = "<dennis><hair>brown</hair><pants>blue</pants><gender>male</gender></dennis>";

    public static void main(String[] args) throws Exception {
        XPathFactory xpf = XPathFactory.newInstance();
        XPath xPath = xpf.newXPath();

        InputSource inputSource = new InputSource(new StringReader(XML));
        String result = (String) xPath.evaluate("//gender", inputSource, XPathConstants.STRING);
        System.out.println(result);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:10:15.603

吉他罗卡。

当我开始学习使用 Java 进行 XML 解析时，我遵循[了本教程](http://www.vogella.com/articles/JavaXML/article.html)。

使用 STaX 你将需要这样的东西（不会发布完整的代码列表）：

```
 if (event.asStartElement().getName().getLocalPart().equals("gender")) 
```

如果您坚持获取一个特定的标签值，您应该查看 DOM 解析器，它从 XML 文档构建一棵树，因此您将能够访问元素“性别”（DOM 的示例在下面的[链接中列出](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)）。好的

# django - django：管理员中的模型继承和验证器

> ID：12062258
> 
> 赞同：1
> 
> 时间：2012-08-21T20:07:41.767
> 
> 标签：django

我有一个由 2 个孩子继承的抽象模型。在孩子们中，一个是设置一个验证器。当我运行代码时，我看到两个孩子都有验证器。

这是伪代码：

```
class myAbstract(models.Model):
    Intro         = models.TextField(blank=True, null=True, )

    class Meta:
        abstract = True

class child1(myAbstract):
    class Meta:
         verbose_name = 'child 1'

class child2(myAbstract):
    def __init__(self, *args, **kwargs):
        super(child2, self).__init__(*args, **kwargs)

        intro = self._meta.get_field('Intro')
        intro.validators.append(MaxLengthValidator(60))

     class Meta:
         verbose_name = 'child 2' 
```

在管理员中，如果我添加一个 child1，然后添加一个 child2，则验证器会为 child2 启动并限制字符数。如果我从 child2 开始，那么 child2 不会得到验证器。

这是预期的行为吗？如果有，建议的编码方式是什么？我考虑将 Intro 移至子类。

**已解决：** 正如 Alasdair 指出的那样，验证器是一个类变量，因此这是预期的行为。

我尝试将 Intro 字段移至孩子，但这没有用。我使用了这个解决方案：
[https://stackoverflow.com/a/3209550/757955](https://stackoverflow.com/a/3209550/757955)在模型表单中设置 forms.CharField 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:12:13.163

我并没有真正预料到这种行为，但是在模型的背景中有很多神奇的事情发生。我看到了 2 个解决方案：

1.  更改实例，而不是类。_meta 是一个类变量，因此 _meta.get_field 将返回类属性。我宁愿尝试像这样操作实例字段

    def **init** (...): self.intro.validators.append(MaxLengthValidator(60))

2.  如果 1 不起作用，或者您不喜欢它，请不要理会模型，即不要添加验证器，而是将[验证器](https://docs.djangoproject.com/en/dev/ref/forms/validation/#using-validators)添加到您用于模型的表单中。在那里你有更多的灵活性，可以做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:12:21.920

`validators`不是为每个模型实例设置的。附加 时`MaxLengthValidator`，您正在更改`intro`父类的字段。

我不认为有一个简单的方法来解决这个问题。您可以为每个子模型编写一个`clean()`方法，并在那里执行验证。但是，我认为将`intro`字段移到子类中可能是最好的选择。

# c++ - std::iterator、指针和 VC++ 警告 C4996

> ID：12062262
> 
> 赞同：11
> 
> 时间：2012-08-21T20:08:03.210
> 
> 标签：c++, algorithm, stl, iterator

```
int *arr = (int*) malloc(100*sizeof(int));
int *arr_copy = (int*) malloc(100*sizeof(int));
srand(123456789L);
for( int i = 0; i < 100; i++) {
    arr[i] = rand();
    arr_copy[i] = arr[i];
}

// ------ do stuff with arr ------

// reset arr...
std::copy(arr_copy, arr_copy+100,  arr); 
```

在编译这个时，我收到以下警告`std::copy()`：

```
c:\program files (x86)\microsoft visual studio 10.0\vc\include\xutility(2227):
warning C4996: 'std::_Copy_impl': Function call with parameters that may be
unsafe - this call relies on the caller to check that the passed values are 
correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See 
documentation on how to use Visual C++ 'Checked Iterators' 
```

我知道如何禁用/忽略警告，但是是否有一种简单的单行解决方案可以从未检查的指针中创建“检查的迭代器”？类似的东西（我知道 cout 不是像 int* 这样的未经检查的指针，而只是例如）：

```
ostream_iterator<int>  out(cout," ");

std::copy(arr_copy, arr_copy+numElements,  out); 
```

我不想写一个全新的专业`class my_int_arr_output_iterator : iterator...`。但是我可以使用现有的迭代器之一吗？

- -编辑 - -

由于我使用 c 样式数组和 malloc 而不是 STL 容器有很多问题，所以我只想说我正在编写一个小程序来测试不同排序算法的性能和内存使用情况。您在上面看到的代码片段是特定于问题的专用版本（原始代码是具有多种方法的模板类，针对不同类型数组中不同数量的元素测试一种算法）版本。

换句话说，我确实知道如何使用 STL 容器（vector）及其迭代器（vector::begin/end）来做到这一点。我不知道的是**我问**了什么。

不过谢谢，如果不是我，希望其他人能从答案中受益。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-21T21:17:08.920

您正在寻找的直接答案是[stdext::checked_array_iterator](http://msdn.microsoft.com/en-us/library/aa985928%28v=vs.80%29.aspx)。这可用于将指针及其长度包装到 MSVC checked_iterator 中。

`std::copy(arr_copy, arr_copy+100, stdext::checked_array_iterator<int*>(arr, 100) );`

他们还提供了一个[stdext::checked_iterator](http://msdn.microsoft.com/en-us/library/aa985943%28v=vs.80%29.aspx)可以包装一个非检查容器。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-22T00:18:03.503

这是一个“妈妈，我可以”警告：代码是正确的，但库作者认为你不够聪明，无法处理它。关闭愚蠢的警告。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-21T20:11:10.857

这是一个：

```
std::vector<int> arr(100);
std::vector<int> arr_copy(100);
srand(123456789L);
for( int i = 0; i < 100; i++) {
    arr[i] = rand();
    arr_copy[i] = arr[i];
}

//do stuff

std::copy(arr_copy.begin(), arr_copy.end(), arr.begin()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-15T12:51:06.207

这个问题有一个有限的便携式解决方案。它可以在[boost::filter_iterator](http://www.boost.org/doc/libs/1_44_0/libs/iterator/doc/filter_iterator.html)适配器的帮助下完成。

有两个限制：

1.  迭代器是双向的，没有随机访问。`it++`和`it--`工作，但`it+=10`没有。
2.  `it=end(); int val = *it;`未检查并将垃圾分配给 val。它仅适用于最后一个元素。将检查其他迭代器值。为了解决这个限制，我总是在使用它的值之后推进迭代器。因此，在消耗完最后一个值后，它将指向 end()。然后`it=end()-1; int val1 = *it++; int val2 = *it++; // segfault or failing assert on this line`。以太方式错误不会被忽视。

解决方案：

**filter_iterator**使用用户定义的谓词来控制跳过哪些元素。我们可以定义我们的谓词，它不会跳过元素，但如果迭代器在调试模式下超出范围，它将断言。不会对性能造成任何损失，因为在发布模式下，谓词只会返回 true，并且会被编译器简化。下面是代码：

```
// only header is required
#include "boost/iterator/filter_iterator.hpp"

// ...

const int arr[] = {1, 2, 3, 4, 5};
const int length = sizeof(arr)/sizeof(int);
const int *begin = arr;
const int *end = arr + length;

auto range_check = [begin, end](const int &t)
{ 
    assert(&t >= begin && &t < end ); 
    return true; 
};

typedef boost::filter_iterator<decltype(range_check), const int *> CheckedIt;

std::vector<int> buffer;
std::back_insert_iterator<std::vector<int>> target_it(buffer);
std::copy(CheckedIt(range_check, begin, end), CheckedIt(range_check, end, end), target_it);
for(auto c : buffer)
    std::cout << c << std::endl;

auto it = CheckedIt(range_check, begin, end);

it--; // assertion fails

auto it_end = CheckedIt(range_check, end-1, end);
it ++;

std::cout << *it; // garbage out
it ++; // assertion fails. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-16T10:02:15.110

为了便携性，您可以使用

```
template <class T>
T* cloneArray(T *a, int length) {
  T *b = new T[length];
  for (int i = 0; i < length; i++) b[i] = a[i];
  return b;
} 
```

您可以对其进行调整以更改将一个数组复制到另一个数组的行为。

# iphone - iOS - 移植 C 程序：在 NSOperation 作业中调用 pthread_exit()

> ID：12062264
> 
> 赞同：1
> 
> 时间：2012-08-21T20:08:29.700
> 
> 标签：iphone, objective-c, ios, pthreads, nsoperation

我正在尝试将 C 控制台程序移植到 iPhone。我已将所有代码导入到我的项目中，当用户单击 UI 上的按钮时，我在 NSOperation 中将其称为 main()。

无论如何，这个程序很复杂，并且创建了许多自己的线程。该程序也多次调用“exit()”——这会使整个 iPhone 应用程序崩溃，但我真的希望用户能够重新启动 C 程序，如果它这样做的话。

我一直在努力清理这些退出条件，并且在 C 程序创建的一些子线程中使用了 pthread_exit()。但是，当我在从 NSOperation 对象创建的线程中调用 pthread_exit() 时，应用程序的主线程得到一个 SIGABRT 信号，整个应用程序崩溃。

我是否正确评估了情况？我是 iOS 编程新手，所以这个信号可能来自其他地方......如果我是正确的，解决这个问题的最佳方法是什么？

（哦，关于使用“return 0”退出这个 NSOperation 线程：我想退出的条件嵌套在 C 程序函数的深处，我想尽可能避免改变程序的结构，因为它已经很复杂了)

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:15:34.480

`NSOperationQueue`在 GCD 队列上执行它的操作。虽然这些线程在 pthreads 上执行他们的工作，但这些线程是 GCD 私有的，并且不允许您使用 pthread API 修改或退出它们。有关于[Compatibility with POSIX Threads](https://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/ThreadMigration/ThreadMigration.html#//apple_ref/doc/uid/TP40008091-CH105-SW18)的文档，其中明确说明了允许哪些 pthread 函数，哪些不允许。

要解决您的问题，您可能不应该让您的 pthread 代码在 a 上运行，`NSOperationQueue`而是在您为此创建的新 POSIX 线程上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:34:13.480

不要杀死你的 pthreads - 让它们自然退出。同样，`exit`!= `pthread_exit`。作者在打电话时显然没有考虑清理`exit`。所以你真的只是通过杀死线程来吞下致命的错误。

如果它不能导致未定义的行为或其他令人讨厌的事情，如泄漏或死锁，那将是一个奇迹。

简而言之，图书馆被滥用了。如果您打算继续执行，您应该优雅地处理错误。这可能需要大量工作。

# python - 在重置之前从 Google 群组下载帖子

> ID：12062265
> 
> 赞同：0
> 
> 时间：2012-08-21T20:08:29.653
> 
> 标签：python, screen-scraping, google-groups

我想重置我的一个小组（课堂讨论），但我想保留讨论以供参考。帖子不多（可能 50 个），我可以手动完成，但是有没有办法通过谷歌应用程序脚本或 python 来做到这一点？

我发现了一些可能性，但都不是我熟悉的语言（尽管我可能能够翻译）：

此链接：[http ://saturnboy.com/2010/03/scraping-google-groups/](http://saturnboy.com/2010/03/scraping-google-groups/)

这个 Perl 代码：

```
#!/usr/bin/perl
# groups2csv.pl
# Google Groups results exported to CSV suitable for import into Excel.
# Usage: perl groups2csv.pl < groups.html > groups.csv

# The CSV Header.
print qq{"title","url","group","date","author","number of articles"\n};

# The base URL for Google Groups.
my $url = "http://groups.google.com";

# Rake in those results.
my($results) = (join '', <>);

# Perform a regular expression match to glean individual results.
while ( $results =~ m!<a href=(/groups[^\>]+?rnum=[0-9]+)>(.+?)</a>.*?
<br>(.+?)<br>.*?<a href="?/groups.+?class=a>(.+?)</a> - (.+?) by 
(.+?)\s+.*?\(([0-9]+) article!mgis ) {
    my($path, $title, $snippet, $group, $date, $author, $articles) =
        ($1||'',$2||'',$3||'',$4||'',$5||'',$6||'',$7||'');
    $title =~ s!"!""!g; # double escape " marks
    $title =~ s!<.+?>!!g; # drop all HTML tags
    print qq{"$title","$url$path","$group","$date","$author","$articles"\n\n};
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:21:18.327

看看这个[webapps 问题](https://webapps.stackexchange.com/questions/15433/backup-archive-of-google-groups-messages)和这个[论坛讨论](http://forums.whirlpool.net.au/archive/611518)中提到的[HTTrack 实用程序](http://www.httrack.com/)。

请注意，我假设您实际上并不想筛选抓取和处理数据，而只是拥有讨论的副本以供将来参考。

编辑：如果你真的想要屏幕抓取，你也可以这样做，但编写一个脚本来做到这一点可能会耗费大量时间。屏幕抓取更多的是从 html 文档中提取特定的数据，而不是抓取整个 html 文档。您可能需要筛选抓取的一个示例是，如果您正在查看危险网站并想要获取单个问题、它们的点值、谁回答正确、它们发生在哪个游戏中，等等以插入数据库。

# jquery - 如何使用 JQuery 根据另一组复选框检查一组复选框

> ID：12062267
> 
> 赞同：1
> 
> 时间：2012-08-21T20:08:40.250
> 
> 标签：jquery, checkbox

我在页面上有两个单独的表单，它们都有一组复选框。

```
<body>
   <form name="form1" id="form1" ...>
        <input type="checkbox" name="check1" value="Person"  />
        <input type="checkbox" name="check1" value="Dog"  />
        <input type="checkbox" name="check1" value="Cat"  />
   </form>
    <form name="form2" id="form2" ...>
        <input type="checkbox" name="check1" value="Person"  />
        <input type="checkbox" name="check1" value="Dog"  />
        <input type="checkbox" name="check1" value="Cat"  />
      </form>
  </body> 
```

我需要的是，一旦用户选中/取消选中 form2 中的任何复选框，我想对 form1 中的相应复选框执行相同操作。如果用户在 form2 中选择了“dog”和“cat”，则自动对 form1 进行检查。我已经尝试了几件事，但我无法找到一种基于值字段设置选中属性的方法。

我能做的最好的事情是为所有复选框设置唯一的 ID，并根据 ID 选择/取消选择。但我试图找出是否有更好的选择器方式。

另外，如果有人能建议我更好的方法来做我在这里尝试的事情，我会很高兴。

——我还没试过，但这是我打算做的——

```
 <form name="form1" id="form1" ...>
        <input type="checkbox" name="check1[]" id="form1_Person" value="Person"  />
        <input type="checkbox" name="check1[]" id="form1_Dog" value="Dog"  />
        <input type="checkbox" name="check1[]" id="form1_Cat" value="Cat"  />
   </form>
    <form name="form2" id="form2" ...>
        <input type="checkbox" name="check1[]" id="form2_Person" value="Person"  />
        <input type="checkbox" name="check1[]" id="form2_Person" value="Dog"  />
        <input type="checkbox" name="check1[]" id="form2_Person" value="Cat"  />
      </form> 
```

单击 form2 复选框后，获取值，然后在 form1 中查找复选框。如果选择了狗，请检查 $('#form1_'[dog]).checked('checked',checked)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:13:07.130

你可以做

```
​$('#form1').on('click', 'input:checkbox', function(e) {
    var checked = $(this).is(':checked');
    var val = this.value;
    $('#form2 input:checkbox[value=' + val + ']').prop('checked', checked);
})​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

在这里摆弄[http://jsfiddle.net/gpsax/](http://jsfiddle.net/gpsax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:16:09.947

**一种方式**：

```
$('#form2 input[type="checkbox"]').change(function() {
    var val = $(this).val();
    $('#form1 [value="' + val + '"]').prop('checked', this.checked);
}); 
```

**两种方式**：

```
$('form input[type="checkbox"]').change(function() {
    var $element = $(this);
    var $form = $element.parent('#form1').length ? $('#form2') : $('#form1');
    var val = $element.val();
    $('[value="' + val + '"]', $form).prop('checked', this.checked);
}); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/n2dpz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T20:17:19.400

你可以这样做

```
$('input[type=checkbox]').change(function(){ // <-- bind to all checkboxes
    var $this = $(this);
    var x = $this.index();  // store index
    var $otherForm = $('form').not($this.parent()); // need this to synch other form
    $otherForm.find('input').eq(x).prop('checked',this.checked); // change other forms checkbox accordingly
});​ 
```

[http://jsfiddle.net/wirey00/ewfrV/](http://jsfiddle.net/wirey00/ewfrV/)

# javascript - JavaScript 和其他使用定义模糊的变量的语言

> ID：12062270
> 
> 赞同：0
> 
> 时间：2012-08-21T20:08:47.757
> 
> 标签：javascript, variables

嘿，任何在专业环境中使用 JavaScript 的人。我想知道使用 == 和 === 运算符比较值时的标准。我在看一个视频，解释说如果你比较一个值为 '5' 的 sting 和一个值为 5 的 int ，它使用 == 运算符返回 true 。然后他们建议对所有内容都使用 ===。我知道这是错误的，因为如果你想比较嵌套在一些具有不同类型定义的多态对象中的一些值，比如一个是学生，另一个是教师，那么 === 总是会返回 false。

经过深思熟虑后，我得出结论，最好尽可能使用 === 并在必要时使用 ==。

你能给我一些关于专业环境中的经验法则的见解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:13:55.237

规则很简单：

始终使用`===`and`!==`除非您明确希望允许进行类型转换并且已经考虑过该类型转换的后果。换句话说，您应该几乎一直使用`===`and 。`!==`

* * *

您对多态对象的例外不适用，因为在比较两个对象时`==`，`===`两者都要求两个对象是完全相同的对象。在这种情况下没有类型转换。如果您正在比较多态对象的两个属性，那么只查看属性的类型，而不是包含对象的类型。

* * *

类型转换的详细规则`==`见[http://es5.github.com/#x11.9.3](http://es5.github.com/#x11.9.3)。有一些奇怪的是这样的：

```
var x;              // x is undefined
alert(x == null);​   // alerts true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:25:29.450

查看 [http://jshint.com](http://jshint.com)，它有助于实施这些最佳实践。他们（以及几乎所有其他人）推荐使用`===`.

我很少想到使用`==`over的理由`===`。

`===`这是一个即使`==`感觉更容易使用的奇特示例。

```
var person = {
    name: "Cody",
    age: "44"
}

var targetAge = 40;

// explicit type conversion, no wonder what's happening
if (parseInt(person.age, 10) === targetAge) {
    alert("You won!")
} else {
    alert("Sorry You Lost!");
} 
```

另请参阅：[JavaScript：好的部分](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CFsQFjAA&url=http://www.amazon.com/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742&ei=Ze4zULqKE-aIiAKrm4HIDQ&usg=AFQjCNE3W3qcv768n0-H0LtIEf9laimwcA&sig2=NGT6Gambm-Kbk8_wAKuwTg)和可[维护的 JavaScript](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CF8QFjAA&url=http://www.amazon.com/Maintainable-JavaScript-Nicholas-C-Zakas/dp/1449327680&ei=ge4zUPqmFuioiAKdsYDoAg&usg=AFQjCNEfqA_-tOi0qp3I-AGhQhxn4oSXGg&sig2=ZahGhMQVsRbouT5dljHteA)，也推荐了这种做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:15:06.720

它通常用于此类语句：

```
var x = 0;
if(x == false) {
   // this will be executed   
}
if(x === false) {
   // this not
}
if(false == '') {
  // this will be executed
}
if(false === '') {
  // this not
} 
```

另一个例子 - 返回`FALSE`错误或`string`成功的函数

```
function foo(bar) {
   // magic
   return ''; // this is SUCCESS
}
var result = foo(123);
if(result === false) {
  // omg error!!
}else{
  // some string returned, event empty one is OK
} 
```

老实说，`===`在语句中使用它真的很少见

# fluent-nhibernate - 执行 AVG 时 NHibernate 转换为十进制

> ID：12062271
> 
> 赞同：9
> 
> 时间：2012-08-21T20:08:48.727
> 
> 标签：fluent-nhibernate

我使用带有流畅映射和 MySQL5Dialect 的 nhibernate 3。我进行分组并尝试获得平均值：

```
var group = new TotalStatistic();
        SelectList(s => s
            .SelectGroup(t => t.RegistryName).WithAlias(() => group.Name)
            .SelectAvg(t => t.Value).WithAlias(() => group.Average))
            .TransformUsing(Transformers.AliasToBean<TotalStatistic>()); 
```

但它会生成包含强制转换为十进制的 sql 查询，我在结果中只得到零，而不是我想得到的“0.0035”之类的东西。

```
SELECT ... avg(cast(this_.Value as DECIMAL)) as y1_ ... 
```

# magento - 在哪里上传字体和 PIE.htc 以用于自定义 Magento 主题？

> ID：12062273
> 
> 赞同：0
> 
> 时间：2012-08-21T20:08:51.520
> 
> 标签：magento, themes

我正在创建我的第一个自定义 Magento 主题，并且在我的模型中我使用了几种非标准字体。我在哪里上传这些包含这些字体的 /fonts 文件夹？另外，我在哪里上传 PIE.htc？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T05:15:01.270

我建议你把所有字体和 PIE.htc 放在下面，

```
skin/frontend/default/[Your Theme]/ 
```

# javascript - davis.js 在页面加载/重新加载时生成两个请求

> ID：12062274
> 
> 赞同：0
> 
> 时间：2012-08-21T20:08:53.543
> 
> 标签：javascript, pushstate

在 davis.js 中，当我在 chrome/safari 中重新加载或加载页面时，它将生成两个对我的路由的请求。当我单击一个链接时，它只会生成一个请求。在 Firefox 加载中，重新加载和单击链接只会生成一个请求。我只希望触发一个请求，因此我不会重绘内容并制作两次动画。

有没有办法解决这个问题，所以我只收到一个请求？我是否应该在我的路由上设置一个超时，以便它每 x 毫秒只能发送一个请求？不过，这听起来像个黑客。

我在做什么的解释：我有一个索引页面，它使用路由来加载不同的内容。它从 API 中获取数据并加载下划线模板，然后将其放置在内容容器中。

我正在使用最新版本的 davis.js 0.9.2。

.htaccess 设置：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ /catalog/index.php [QSA,L] 
```

戴维斯设置：

```
var app = Davis(function(){
    this.configure(function(){
      this.generateRequestOnPageLoad = true;
    });

    this.get(directory, function(){
      RenderPage('index');
    });

    this.get(directory+':id', function(req){
      RenderPage(req.params['id']);
    });

    this.get(directory+':id/:page', function(req){
      RenderPage(req.params['id'], req.params['page']);
    });
}); 
```

火狐控制台：

```
[Tue Aug 21 2012 16:02:01 GMT-0400 (EDT)] application started
[Tue Aug 21 2012 16:02:01 GMT-0400 (EDT)] runRoute: GET /catalog/users 
```

铬控制台：

```
[Tue Aug 21 2012 16:01:59 GMT-0400 (EDT)] application started
[Tue Aug 21 2012 16:01:59 GMT-0400 (EDT)] runRoute: GET /catalog/users
[Tue Aug 21 2012 16:01:59 GMT-0400 (EDT)] runRoute: GET /catalog/users 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T21:59:32.757

我已经为 Davis (0.9.3) 推送了一个修复程序，应该可以解决这些问题。

问题的根源在于 webkit 浏览器（特别是 Chrome 和 Safari）和其他浏览器处理 onpopstate 事件的方式不同。

当前版本的 Chrome 和 Safari 都会触发`onpopstate`初始页面加载事件，Firefox 和 Opera（可能还有其他版本）都不会这样做。在历史 API 之上实现跨浏览器库时，这种差异会导致相当头疼。

这会导致 Davis 出现奇怪的跨浏览器问题，包括在 Chrome 中触发的路由两次运行，如果您使用后退按钮导航，则第一个路由没有在 Firefox 中运行。

解决方案是跟踪浏览器是否发出了 popstate 事件，以及它是否是用于初始页面加载的事件。

# php - 无法返回 MySQL 查询的结果

> ID：12062282
> 
> 赞同：1
> 
> 时间：2012-08-21T20:09:15.083
> 
> 标签：php, mysql

我的目标是只显示尚未收到所有产品的采购订单。

我有一个名为的主表`test_po`和另外两个表`test_po_bom`。和表是我存储产品列表的地方 `test_rog_bom`。是我订购的产品列表，是我收到的产品列表。`test_po_bom``test_rog_bom``test_po_bom``test_rog_bom`

基本上：`loop purchase_orders WHERE products_received < products_ordered`

**表结构：**

```
table `test_po`: `ID`, `vendor_ID`
table `test_po_bom`: `ID`, `po_ID`, `product_ID`, `quantity`
table `test_rog_bom`: `ID`, `po_ID`, `product_ID`, `quantity` 
```

**代码：**

```
$SQL = "SELECT
        *,
        test_po.ID AS test_po_ID
      FROM
        test_po
      LEFT JOIN test_po_bom ON test_po_bom.po_ID=test_po.ID
      LEFT JOIN test_rog_bom ON test_rog_bom.po_ID=test_po.ID
      WHERE
        (SELECT SUM(quantity) FROM test_rog_bom WHERE po_ID=test_po.ID) < (SELECT SUM(quantity) FROM test_po_bom WHERE po_ID=test_po.ID)";

$result = mysql_query($SQL) or die(mysql_error());
while($row = mysql_fetch_array($result))
{
  echo $row['test_po_ID'].'<br>';
} 
```

它不会吐出任何东西，我尝试了许多不同的变化，但我就是想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:49:22.780

**这是未经测试的代码。**对于发布未经测试的代码，我深表歉意，但我现在无法对其进行测试，而且我认为它展示了一些让您尝试不同的东西，即使它不完全正确。

尝试这个：

```
select po.ID, po_bom.quant n_ordered, rog_bom.quant n_received
from test_po po
left join (select po_ID, sum(quantity) as quant from test_po_bom group by po_ID) po_bom
  on po.ID = po_bom.po_ID
left join (select po_ID, sum(quantity) as quant from test_rog_bom group by po_ID) rog_bom
  on po.ID = rog_bom.po_ID
where coalesce(rog_bom.quant, 0) < coalesce(po_bom.quant, 0); 
```

这会改变您的操作方式：

*   使用表别名来明确指定哪些引用引用同一表行。
*   使用 group by 按 ID 聚合总和。
*   使用合并来处理至少一个表（可能是 test_rog_bom）没有 ID 行的情况。我怀疑这实际上是您问题的根源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:49:49.540

问题似乎与您的查询有关。不要使用`*`而是指定所需的列。以下解决方案使用别名来帮助您的代码更具可读性，尤其是名称相似的代码。您还会注意到[HAVING](http://dev.mysql.com/doc/refman/5.5/en/select.html)而不是 WHERE。

```
SELECT 
    p.ID as PO_ID
     ,p.VENDOR_ID
     ,pb.product_ID as PRODUCT_ID
     ,SUM(pb.quantity) as QUANTITY_ORDERED
     ,SUM(rb.quantity) as QUANTITY_RECEIVED
FROM test_po as p
LEFT JOIN test_po_bom as pb ON pb.po_ID = p.ID
LEFT JOIN test_rog_bom as rb ON rb.po_ID = p.ID
GROUP BY
    p.ID
     ,p.VENDOR_ID
     ,pb.product_ID
HAVING SUM(rb.quantity) < SUM(pb.quantity) 
```

# javascript - Shopify Liquid：如果存在价格比较，如何仅显示产品变体的价格比较？

> ID：12062285
> 
> 赞同：1
> 
> 时间：2012-08-21T20:09:35.663
> 
> 标签：javascript, mootools, shopify, liquid

我正在尝试显示某些产品变体的价格比较，但我无法弄清楚如何仅在变体的价格比较大于零时才显示它。它以 0.00 美元的价格显示比较。

它使用 javascript 来动态更新价格。这是代码：

```
<script type="text/javascript">
<!--
// mootools callback for multi variants dropdown selector
var selectCallback = function(variant, selector) {
if (variant && variant.available == true) {
// selected a valid variant
$('purchase').removeClass('disabled'); // remove unavailable class from add-to-cart button
$('purchase').disabled = false;           // reenable add-to-cart button
$('price-field').innerHTML = Shopify.formatMoney(variant.price, "{{shop.money_with_currency_format}}");  // update price field
$('compare-price').innerHTML = Shopify.formatMoney(variant.compare_at_price, "{{shop.money_with_currency_format}}");  // update compare at price
} else {
// variant doesn't exist
$('purchase').addClass('disabled');      // set add-to-cart button to unavailable class
$('purchase').disabled = true;              // disable add-to-cart button      
$('price-field').innerHTML = (variant) ? "Sold Out" : "Unavailable"; // update price-field message
}
};

// initialize multi selector for product
window.addEvent('domready', function() {
new Shopify.OptionSelectors("product-select", { product: {{ product | json }}, onVariantSelected: selectCallback }); 
});
-->
</script> 
```

当我有原始的`<div id="compare-price"></div>`. 每个变体的价格动态比较被添加到该 div。但是，当没有比较价格时，它仍然会增加 0.00 美元。

当变体没有价格比较时，如何隐藏 div？我正在尝试做这样的事情：

```
{% if product.variant.compare_at_price %}
    <div id="compare-price"></div>
{% endif %} 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:16:38.747

好的，这就是我要工作的。可能不是最优雅的解决方案，但它正在工作：

```
<script type="text/javascript">
<!--
// mootools callback for multi variants dropdown selector
var selectCallback = function(variant, selector) {
if (variant && variant.available == true) {
// selected a valid variant
$('purchase').removeClass('disabled'); // remove unavailable class from add-to-cart button
$('purchase').disabled = false;           // reenable add-to-cart button
$('price-field').innerHTML = Shopify.formatMoney(variant.price, "{{shop.money_with_currency_format}}");  // update price field
if(variant.compare_at_price > 0.0) {
$('compare-price').innerHTML = Shopify.formatMoney(variant.compare_at_price, "{{shop.money_with_currency_format}}");  // update compare at price
} else {
$('compare-price').innerHTML = "";
}
} else {
// variant doesn't exist
$('purchase').addClass('disabled');      // set add-to-cart button to unavailable class
$('purchase').disabled = true;              // disable add-to-cart button      
$('price-field').innerHTML = (variant) ? "Sold Out" : "Unavailable"; // update price-field message
}
};

// initialize multi selector for product
window.addEvent('domready', function() {
new Shopify.OptionSelectors("product-select", { product: {{ product | json }}, onVariantSelected: selectCallback }); 
});
-->
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:30:13.213

你为什么不在回调中检查价格比较？您已收到变体，因此您可以检查价格......并适当地处理它们。

```
if(variant.compare_at_price > 0.0) {
    $('compare-price').show().innerHTML = Shopify.formatMoney(variant.compare_at_price, "{{shop.money_with_currency_format}}");
} else {
    $('compare-price').hide();
} 
```

# asp.net-mvc - 从 HTML.Action 调用 PostMethod 链接

> ID：12062292
> 
> 赞同：0
> 
> 时间：2012-08-21T20:09:56.257
> 
> 标签：asp.net-mvc, sorting, html.actionlink

嗨，我对 MVC 相当陌生并且面临一个问题。

*   我有一个视图列出了所有只有 2 列的国家
*   我希望列标题可点击，并且应该点击它进行排序
*   我在下面显示了我的控制器和视图代码，我希望当我单击列标题时，它应该会点击用 [HttpPost] 装饰的索引操作方法
*   当我单击标题链接页面时，它会刷新而不点击 Action 方法，我希望它会点击

任何帮助，将不胜感激。

**这是我的控制器代码**

[HttpPost] public ActionResult Index(string sortcolumn) { return View(SortedList(sortcolumn)); }

```
private List<Country> SortedList(string sortcol)
{
    List<Country> sortedlist = new List<Country>();
    switch (sortcol)
    {
        case "idCountry":
            if ((SortOrder)ViewData["sortorder"] == SortOrder.Ascending)
            {
                sortedlist = db.Countries.OrderByDescending(c => c.idCountry).ToList<Country>();
                ViewData["sortorder"] = SortOrder.Descending;
            }
            else
            {
                sortedlist = db.Countries.OrderBy(c => c.idCountry).ToList<Country>();
                ViewData["sortorder"] = SortOrder.Ascending;
            }
            break;
        case "Countryname":
            if ((SortOrder)ViewData["sortorder"] == SortOrder.Ascending)
            {
                sortedlist = db.Countries.OrderByDescending(c => c.Countryname).ToList<Country>();
                ViewData["sortorder"] = SortOrder.Descending;
            }
            else
            {
                sortedlist = db.Countries.OrderBy(c => c.Countryname).ToList<Country>();
                ViewData["sortorder"] = SortOrder.Ascending;
            }
            break;
    }
    return sortedlist;
} 
```

这是我的看法

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<IEnumerable<eduSmart.Data.Entities.Country>>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Index
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <h2>
        List of Countries</h2>
    <p>
        Manage list of countries on this page. You can choose your action creating, editing,
        removing the country data.
    </p>
    <% using (Html.BeginForm("Index","Country")) { %>
    Total Countries : <%: Model.Count() %>
    <table>
        <tr>
            <th>
                <%: Html.ActionLink("CountryID","Index",new { sortcolumn = "CountryID" }) %>
            </th>
            <th>
                <%: Html.ActionLink("CountryName ", "Index", new { sortcolumn = "CountryName" })%>
            </th>
            <th>
            </th>
        </tr>
        <% if (Model != null)
           {  %>
        <% foreach (var item in Model)
       { %>
        <tr>
            <td>
                <%: item.idCountry%>
            </td>
            <td>
                <%: item.Countryname%>
            </td>
            <td>
                <%: Html.ActionLink("Edit", "Edit", new { id = item.idCountry })%>
                |
                <%: Html.ActionLink("Details", "Details", new { id = item.idCountry })%>
                |
                <%: Html.ActionLink("Delete", "Delete", new { id = item.idCountry })%>
            </td>
        </tr>
        <% }
           }%>
    </table>
    <%} %>
    <p>
        <%: Html.ActionLink("Create New", "Create") %>
    </p>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:32:51.297

您不能使用 Action 链接点击 post 方法。如果您要做的只是在这里排序，您可以做的一件事是将您的 post 方法更改为 get 并更改名称

代替

```
[HttpPost] 
public ActionResult Index(string sortcolumn) 
```

有类似的东西

```
public ActionResult Sort (string sortColumn) 
```

并将您的操作链接指向排序。

# ruby-on-rails-3 - 更改另一个表的属性

> ID：12062296
> 
> 赞同：0
> 
> 时间：2012-08-21T20:10:22.653
> 
> 标签：ruby-on-rails-3, model

我有表格“工具”和“借出”。

我使用 Rails3，当我创建借出时，我希望它将工具的属性状态更改为“U”。

这可能吗？

我试过模型借

```
 after_save :change_status

  def change_status
      tools.update_attribute(status, 'U')
  end 
```

我也试过，在同一型号上：

```
 after_save :change_status

  def change_status
      self.tool.update_attribute(status, 'U')
  end 
```

调试日志上没有成功或警告。

建议？

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:52:25.550

借贷和工具是什么关系？如果 Lend has_many 工具，你将不得不做这样的事情：

```
def change_status
  tools.each { |tool| tool.update_attributes(status: 'U') }
end 
```

另请注意，我正在使用 update_attributes 因为 update_attribute （单数）将很快被弃用。

顺便说一句，您应该在 Tool 中创建一个方法来更新属性，Lend 模型不应该知道如何将工具设置为借出。就像是

```
def loaned!
  update_attributes status: 'U'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:37:14.207

首先，我假设您的 Lend 模型 has_many :tools

为了能够做类似的事情，`tool.update_attribute`你需要使用`accepts_nested_attributes_for`

看看这些链接，它们可能会让你走上正确的道路：
[RailsCasts #196 Nested Model Form Part 1](http://railscasts.com/episodes/196-nested-model-form-part-1)
[Active Record Nested Attributes](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

希望这可以帮助。

# android - Eclipse 错误：解析 XML 时出错：格式不正确（令牌无效）

> ID：12062299
> 
> 赞同：0
> 
> 时间：2012-08-21T20:10:25.537
> 
> 标签：android, eclipse

**这是我的代码：**

```
 <?xml version="1.0" encoding="utf-8"?>
LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message";
        </EditText>
     <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send";
       </Button>
</LinearLayout> 
```

第一个 EditText 和第一个 Button 行有一个错误，第一个错误是标题中的错误，第二个错误是：'元素类型'EditText'必须后跟属性规范，'>'或'/>'

怎么了？整个代码（几乎）完全按照此处所示[http://developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)

（如果我拼写错误或忘记了什么，我很抱歉，我是这里的菜鸟......）

编辑：谢谢，伙计们，但我试着把你的代码粘贴到我的上面。虽然没有 X 标志，但调试工具仍然说有一些错误...

编辑：是的，我有所需的字符串，因为我按照教程进行操作。但我不明白...如果我将教程网站上给出的代码粘贴到 Eclipse 中，仍然会出现错误！我将尝试在另一个程序中打开 .xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:14:36.063

您必须使用`/>`in`<EditText key="value" />`或`>`in关闭标签`<EditText key="value"></EditText>`。不要使用`;`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" >
    </EditText>
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send" />
</LinearLayout> 
```

**编辑：**之后，如果您仍然有错误，请删除：

> android:hint="@string/edit_message"

和

> android:text="@string/button_send"

除非您的 values/strings.xml 文件中有相应的条目：

```
<string name="edit_message">Enter a text</string>
<string name="button_send">Button text</string> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:17:38.993

这是它的外观（注意以“<”符号结尾且没有“;”）

```
<?xml version="1.0" encoding="utf-8"?> 
LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"           

android:layout_width="match_parent" 
android:layout_height="match_parent" 
android:orientation="horizontal">
<EditText android:id="@+id/edit_message"  
android:layout_weight="1"
android:layout_width="0dp"
android:layout_height="wrap_content"
android:hint="@string/edit_message"
</EditText>
<Button
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/button_send"
</Button> 
</LinearLayout> 
```

# sql-server - 还原后 EncryptByKey 功能不起作用

> ID：12062300
> 
> 赞同：0
> 
> 时间：2012-08-21T20:10:45.510
> 
> 标签：sql-server, sql-server-2008, encryption

我已将数据库恢复到新服务器，现在 EncryptByKey 功能无法正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:27:54.473

您可能破坏了[加密密钥层次结构](http://msdn.microsoft.com/en-us/library/ms189586.aspx)，因为您的数据库主密钥的服务主密钥加密现已消失。使用原始加密密码打开数据库主密钥并添加新的服务器服务主密钥加密：

```
OPEN MASTER KEY DECRYPTION BY PASSWORD = 'password';
ALTER MASTER KEY ADD ENCRYPTION BY SERVICE MASTER KEY; 
```

# jquery - 在jquery中隐藏子div

> ID：12062305
> 
> 赞同：0
> 
> 时间：2012-08-21T20:11:06.933
> 
> 标签：jquery, html

所以我有一串 Jquery 的东西，但我不确定为什么其中一部分不起作用。

我有这样的结构

```
<div id="wrapper">
    <span class="UnlikelyHeader"> Title Here</span>
    <div id="unlikely">
        <div class="blah"></div>
        <div class="blah"></div>
        <div class="blah"></div>
    </div> 
```

我的目标是默认隐藏 div“不太可能”，并在单击跨度时使用滑动切换。这是我迄今为止的代码（注意，隐藏/奇数/偶数是这个的工作实现）

```
 jQuery(document).ready(function() {
            jQuery(".Hidden").hide();
            jQuery("#Unlikely.hide()");
            jQuery(".Even").click(function()
            {
                jQuery(this).next(".Hidden").slideToggle(500);
            });
            jQuery(".Odd").click(function()
            {
                jQuery(this).next(".Hidden").slideToggle(500);
            });
            jQuery(".UnlikelyHeader").click(function()
            {
                jQuery(this).next("#Unlikely").slideToggle(500);
            });
        }); 
```

另请注意：我尝试使用 #Unlikely.children().hide() 和其他方法来隐藏我不希望默认显示的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:14:53.993

这应该可以解决问题：

```
jQuery("#unlikely").hide(); 
```

您也可以像这样从一开始就隐藏它：

```
<div id="unlikely" style="display:none"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:15:20.663

对于初学者：

```
jQuery("#Unlikely.hide()"); 
```

应该

```
jQuery("#unlikely").hide(); 
```

-edit- 另外，你的情况在你的切换上是错误的。您在 html 中有一个小写的“u”，在 javascript 中有一个大写：

```
jQuery(this).next("#Unlikely").slideToggle(500); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T20:18:21.423

仅供参考“$”是“jQuery”的简写版本，更易于阅读。

```
 $(document).ready(function() {
        $(".Hidden").hide();
        $("#unlikely").hide(); <-------- You had your hide() method inside of the
        $(".Even").click(function()  --- selector and Unlikely should be unlikely
        {
            $(this).next(".Hidden").slideToggle(500);
        });
        $(".Odd").click(function()
        {
            $(this).next(".Hidden").slideToggle(500);
        });
        $(".UnlikelyHeader").click(function()
        {
            $(this).next("#unlikely").slideToggle(500); <---- changed Unlikely to
        });                                              ---- unlikely   
    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T20:18:34.330

我非常喜欢这样做 -

```
$('.UnlikelyHeader').click(function() {
 $('#unlikely').slideDown(500);   
}); 
```

`display:none`并在 CSS 中赋予它的属性。

**工作示例**- [http://jsfiddle.net/ne7MU/](http://jsfiddle.net/ne7MU/)（无切换） [http://jsfiddle.net/ne7MU/1/](http://jsfiddle.net/ne7MU/1/)（有切换）

希望我的解释是正确的......

# c - C - 程序冻结；futex_wait_queue_me

> ID：12062306
> 
> 赞同：3
> 
> 时间：2012-08-21T20:11:08.250
> 
> 标签：c, sockets, network-programming, freeze, futex

根据要求，我已将代码全部包含在内，以便您对其进行测试。请记住，这还远未完成，但应该能够通过稳定的 tcp 连接发送和接收数据包。

当我运行它时，我得到：

```
./bunny -i 84.49.76.98 -p 80 -o 79.161.200.48 -t 80

Raw packet reader created
Waiting 1 second for packet reader thread to settle down...

socket() - Using SOCK_RAW and TCP protocol is OK.
Socketoptions OK. 
```

然后它就挂了。我也使用了 strace ，这给了我（只包括它停止的最后一点）：

```
setsockopt(4, SOL_IP, IP_HDRINCL, [1], 4) = 0
write(1, "Socketoptions OK.\n", 18Socketoptions OK.
)     = 18
sendto(4, "", 0, 0, {sa_family=AF_INET, sin_port=htons(63239), sin_addr=inet_addr("84.49.76.98")}, 16) = 0
close(4)                                = 0
futex(0x7f4c07bf89d0, FUTEX_WAIT, 3278, NULLsendto(4, "", 0, 0, {sa_family=AF_INET, sin_port=htons(63239), sin_addr=inet_addr("84.49.76.98")}, 16) = 0
close(4)                                = 0 
```

并且系统监视器说程序正在休眠，并给出 futex_wait_queue_me。

这可能是由于某处的内存泄漏导致对 futex 的调用过多吗？

```
#define _BSD_SOURCE
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <getopt.h>
#include <errno.h>
#include <pcap.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/ip.h>
#include <netinet/tcp.h>

#define VERSION "1.0"
#define PCKT_LEN 8192

/* Prototypes */    
int sock;   
void run();
void capture();
void usage(); 
in_addr_t sip;
in_addr_t dip;
char *dstip = 0;
int s_seq;
int sport;
int dport;              

struct pseudo {
struct in_addr sourceip;
struct in_addr destip;
unsigned char placeholder;
unsigned char protocol;
unsigned char tcp_len;
struct tcphdr tcp;
};

struct ipheader {

unsigned char       iph_ihl:5, 
                    iph_ver:4;
unsigned char       iph_tos;
unsigned short int  iph_len;
unsigned short int  iph_id;
unsigned char       iph_flags;
unsigned short int  iph_offset;
unsigned char       iph_ttl;
unsigned char       iph_protocol;
unsigned short int  iph_chksum;
unsigned int        iph_sourceip;
unsigned int        iph_destip;
};

struct tcpheader {
unsigned short int  tcph_sourceport;
unsigned short int  tcph_destport;
unsigned int        tcph_seqnum;
unsigned int        tcph_acknum;
unsigned char       tcph_reserved:4, tcph_offset:4;
unsigned char       tcph_flags;
unsigned short int  tcph_win;
unsigned short int  tcph_chksum;
unsigned short int  tcph_urgptr;
};

/* Checksum */
unsigned short checksum (unsigned short *pac, int len)
{ 
unsigned long sum;
for (sum = 0; len > 0; len--)
    sum += *pac++;
sum = (sum >> 16) + (sum & 0xffff);
sum += (sum >> 16);
return(~sum);
}               

/* Checksum TCP */
unsigned short checksum_tcp (unsigned short len, unsigned short sourceip[], 
                            unsigned short destip[], unsigned short buf[])
{
unsigned char protocol = 6;
unsigned long sum;
int nleft;
unsigned short *w;

sum = 0;
nleft = len;
w=buf;

while(nleft > 1)
    {
        sum += *w++;
        nleft -= 2;
    }
if(nleft > 0)
    {
        sum += *w&ntohs(0xFF00);
    }

sum += sourceip[0];
sum += sourceip[1];
sum += destip[0];
sum += destip[1];
sum += htons(len);
sum += htons(protocol);

sum = (sum >> 16) + (sum & 0xFFFF);
sum += (sum >> 16);

sum = ~sum;
return ((unsigned short) sum);
}

int main(int argc,char **argv)
{
int c;

/* Are we in root? */   
if(geteuid() !=0)
    {
        printf("Root access is required to run this program.\n\n");
        exit(0);        
    }   

while (1)
    {
        static struct option long_options[] =
            {
                /* Options */
            {"send",       no_argument,       0, 's'}, /* args s, r and f have no function yet */
            {"receive",    no_argument,       0, 'r'},
            {"file",       required_argument, 0, 'f'}, 
            {"destip",     required_argument, 0, 'i'},
            {"destport",   required_argument, 0, 'p'},
            {"sourceip",   required_argument, 0, 'o'},
            {"sourceport", required_argument, 0, 't'},
            {0, 0, 0, 0}
            };

           int option_index = 0;

           c = getopt_long (argc, argv, "srf:d:i:p:o:t:",
                        long_options, &option_index);

                      /* Detect the end of the options. */
            if (c == -1)
                break;

            switch (c)
                {
                    case 0: /* If this option set a flag, do nothing else now. */
                            if (long_options[option_index].flag != 0)
                            break;
                                printf ("option %s", long_options[option_index].name);
                            if (optarg)
                                printf (" with arg %s", optarg);
                                printf ("\n");
                            break;

                    case 's': puts ("option -s\n");
                              break;
                    case 'r': puts ("option -r\n");
                              break;
                    case 'f': printf ("option -f with value `%s'\n", optarg);
                              break;
                    case 'i': dip = inet_addr(optarg);
                              dstip = optarg;
                              break;
                    case 'p': dport = htons(atoi(optarg)); 
                              /* Add handling of bad/non number input here */
                              break;
                    case 'o': sip = inet_addr(optarg);
                              break;
                    case 't': sport = htons(atoi(optarg));
                              break;
                    case '?': /* Error message printed */
                              break;
                    default:  abort ();
                }
    }

/* Print any remaining command line arguments (not options). */
if (optind < argc)
    {
        printf ("\nNon-option ARGV-elements: ");
while (optind < argc)
        printf ("%s ", argv[optind++]);
        putchar ('\n');
    }

/* check if all mandatory options are set and for unknown arguments */
/* This really needs changing... */
if (dip, sip, dport, sport == 0)
    {
        usage();
        return (-1);
    }

/* change */

pthread_t tid_pr;

if (pthread_create(&tid_pr, NULL, capture, NULL) != 0) {
    fprintf(stderr, "can't create raw packet reader: %s\n", strerror(errno));
    exit(1);
}
printf("\nRaw packet reader created\nWaiting 1 second for packet reader thread to settle down...\n\n");
sleep(1);

run();  

pthread_join(tid_pr, NULL);

getchar ();
exit (0);

}

int send_syn(unsigned int sourceip, unsigned int destip, unsigned short sourceport,
            unsigned short destport)
{
const int one = 1;
char buffer[PCKT_LEN];
struct sockaddr_in sin;
struct ipheader *ip;
struct tcpheader *tcp;

ip = (struct ipheader *) buffer;
tcp = (struct tcpheader *) buffer + ip->iph_ihl *4;

/* IP attributes */
ip->iph_ihl = 5;
ip->iph_ver = 4;
ip->iph_tos = 16;
ip->iph_len = sizeof(struct ipheader) + sizeof(struct tcpheader);
ip->iph_id = htons(54321);
ip->iph_offset = 0;
ip->iph_ttl = 64;
ip->iph_protocol = IPPROTO_TCP;
ip->iph_chksum = 0;                     
ip->iph_sourceip = sip;
ip->iph_destip = dip;
ip->iph_chksum = checksum ((unsigned short *) buffer, (sizeof (struct 
                            ipheader )+ sizeof (struct tcpheader)));            
/* TCP attributes */
tcp->tcph_sourceport = sport;
tcp->tcph_destport = dport;         
tcp->tcph_seqnum = htonl(1);        /* ADD SEQ NUM THINGY */
tcp->tcph_offset = 5;
tcp->tcph_flags = TH_SYN;
tcp->tcph_win = htons(32767);
tcp->tcph_chksum = 0; 
tcp->tcph_urgptr = 0;
tcp->tcph_chksum = (unsigned short) checksum_tcp((unsigned short) (ip->iph_len - ip->iph_ihl *4), (unsigned short *) &ip->iph_sourceip,
                    (unsigned short *) &ip->iph_destip, (unsigned short *) &tcp);       

/* Address family */ 
sin.sin_family = AF_INET;
sin.sin_addr.s_addr = ip->iph_destip;

/* Send */
if (sendto(sock, buffer, ip->iph_len, 0, (struct sockaddr *)&sin, sizeof(sin)) < 0)
    {
        fprintf(stderr, "\nCan't send packet\n");
        return (-1);
    }               
else
        printf("Packet sent to %d", dip); 

        close(sock);
}           

int send_syn_ack(unsigned int sourceip, unsigned int destip, unsigned short sourceport,
            unsigned short destport, unsigned long s_seq)   
{
const int one = 1;
char buffer[PCKT_LEN];
struct sockaddr_in sin;
struct ipheader *ip;
struct tcpheader *tcp;

ip = (struct ipheader *) buffer;
tcp = (struct tcpheader *) buffer + ip->iph_ihl *4;

/* IP attributes */
ip->iph_ihl = 5;
ip->iph_ver = 4;
ip->iph_tos = 16;
ip->iph_len = sizeof(struct ipheader) + sizeof(struct tcpheader);
ip->iph_id = htons(54321);
ip->iph_offset = 0;
ip->iph_ttl = 64;
ip->iph_protocol = IPPROTO_TCP;
ip->iph_chksum = 0;                     
ip->iph_sourceip = sip;
ip->iph_destip = dip;
ip->iph_chksum = checksum ((unsigned short *) buffer, (sizeof (struct 
                            ipheader )+ sizeof (struct tcpheader)));            
/* TCP attributes */
tcp->tcph_sourceport = sport;
tcp->tcph_destport = dport;         
tcp->tcph_seqnum = htonl(1 + 1);                        /* ADD SEQ NUM THINGY */
tcp->tcph_acknum = htonl (s_seq + 1);               /* ADD ACK NUM THINGY */
tcp->tcph_offset = 5;
tcp->tcph_flags = TH_ACK;
tcp->tcph_win = htons(32767);
tcp->tcph_chksum = 0; 
tcp->tcph_urgptr = 0;
tcp->tcph_chksum = (unsigned short) checksum_tcp((unsigned short) (ip->iph_len - ip->iph_ihl *4), (unsigned short *) &ip->iph_sourceip,
                    (unsigned short *) &ip->iph_destip,    (unsigned short *) &tcp);        

/* Address family */ 
sin.sin_family = AF_INET;
sin.sin_addr.s_addr = ip->iph_destip;

/* Send */
if (sendto(sock, buffer, ip->iph_len, 0, (struct sockaddr *)&sin, sizeof(sin)) < 0)
    {
        fprintf(stderr, "\nCan't send packet\n");
        return (-1);
    }               
else
        printf("Packet sent to %d\n", dip); 

        close(sock);
}       

void run()
{
const int one = 1;
char buffer[PCKT_LEN];
struct sockaddr_in sin; 
struct ipheader *ip;
struct tcpheader *tcp;

ip = (struct ipheader *) buffer;
tcp = (struct tcpheader *) buffer + ip->iph_ihl *4;

sock = socket(PF_INET, SOCK_RAW, IPPROTO_TCP);
if (sock < 0)
    {
        fprintf(stderr, "\nSocket()\n\n");
        exit (-1);
    }
else
        printf ("socket() - Using SOCK_RAW and TCP protocol is OK.\n");

if ((setsockopt(sock, IPPROTO_IP, IP_HDRINCL, (char *)&one, sizeof (one))) < 0)
    {
        fprintf(stderr, "Can't set socketoptions\n");
        exit (-1);
    }
else
        printf("Socketoptions OK.\n");  

send_syn(dip, sip, dport, sport);
}

void receive(u_char *args, const struct pcap_pkthdr *pkthdr, const u_char *buffer)
{
const int one = 1;
int LEN = strtol(args, NULL, 0);        /* LEN = strtol(args, NULL, 0)   ----  int LEN = *args;*/
struct ipheader *ip;
struct tcpheader *tcp;

ip = (struct ipheader *)(buffer + LEN);
tcp = (struct tcpheader *)(buffer + LEN + sizeof (struct ipheader));

printf("%d\n", LEN);

printf("Packet received. ACK number: %d\n", ntohl (tcp->tcph_seqnum));
printf("Packet received. SEQ number: %d\n", ntohl (tcp->tcph_acknum));
s_seq = ntohl (tcp->tcph_seqnum);

send_syn_ack(s_seq, dip, sip, dport, sport);    

sleep(100);
}

void capture()
{
pcap_t *pd;
bpf_u_int32 netmask;
bpf_u_int32 localnet;
char filterbuf[64];
snprintf(filterbuf, sizeof(filterbuf), "ip dst host %s", dstip); 
char *filter = filterbuf;       
char *dev = NULL;
char errbuf[PCAP_ERRBUF_SIZE];
struct bpf_program filterprog;
int dl = 0, dl_len = 0;

if ((pd = pcap_open_live(dev, 1514, 1, 500, errbuf)) == NULL)       /* Look into snaplen size */
    {           
        fprintf(stderr, "can't open device %s: %s\n", dev, errbuf);
        exit(1);
    }

pcap_lookupnet(dev, &localnet, &netmask, errbuf);
pcap_compile(pd, &filterprog, filter, 0, localnet);
if (pcap_setfilter(pd, &filterprog) == - 1)
    {
        fprintf(stderr, "can't set pcap filter: %s %s\n", filter, errbuf);
        exit(1);
    }

pcap_freecode(&filterprog);
dl = pcap_datalink(pd);

switch(dl) {
    case 1:
        dl_len = 14;
        break;
    default:
        dl_len = 14;
        break;
}       

if (pcap_loop(pd, -1, receive, (u_char *) &dl_len) < 0) 
    {
        fprintf(stderr, "can't get raw packet: %s\n", pcap_geterr(pd));
        exit(1);
    }
}

void usage() 

{
/* This is the user manual (CHANGE) */  
printf("\nChannelBunny %s, created 2012\n\n", VERSION);

printf("ChannelBunny Usage:  -s -f <file> -i <destip> -p <destport> -o <sourceip> -t <sourceport>\n\n"); 

printf("-s, --send,             Puts program in send mode\n");
printf("-r, --receive,          Puts program in receive mode\n"); 
printf("-f, --file,             Specify file\n");       
printf("-i, --destip,           Destination IP address\n"); 
printf("-p, --destport,         Destination port\n"); 
printf("-o, --sourceip          Source IP address\n"); 
printf("-t, --sourceport        Source port\n");    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:33:54.780

您的代码的主要问题是您没有正确处理***LINK-LAYER TYPE***，您正在使用：

`pcap_open_live`将第一个参数设置为`NULL`，这意味着内核将选择**“任何”**接口来嗅探和注入 RAW 数据包，在这种情况下，您使用的是“ `LINKTYPE_LINUX_SLL`”而不是`ETHERNET`您想要的（LINK_TYPE 1）。

因此，您需要正确处理链接层（在此处查看列表：[http](http://www.tcpdump.org/linktypes.html) ://www.tcpdump.org/linktypes.html ）。我修改了你的代码，它现在可以工作了（用`eth0`你想要的替换设备）：

```
#define _BSD_SOURCE
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <getopt.h>
#include <errno.h>
#include <pcap.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/ip.h>
#include <netinet/tcp.h>
#include <pthread.h>
#include <netinet/in.h>
#include <arpa/inet.h>

#define VERSION "1.0"
#define PCKT_LEN 8192

/* Prototypes */
int sock;
void run();
void* capture(void *);
void usage();
in_addr_t sip;
in_addr_t dip;
char *dstip = 0;
int s_seq;
unsigned short sport;
unsigned short dport;

struct pseudo {
    struct in_addr sourceip;
    struct in_addr destip;
    unsigned char placeholder;
    unsigned char protocol;
    unsigned char tcp_len;
    struct tcphdr tcp;
};

struct ipheader {

    unsigned char       iph_ihl:5,
        iph_ver:4;
    unsigned char       iph_tos;
    unsigned short int  iph_len;
    unsigned short int  iph_id;
    unsigned char       iph_flags;
    unsigned short int  iph_offset;
    unsigned char       iph_ttl;
    unsigned char       iph_protocol;
    unsigned short int  iph_chksum;
    unsigned int        iph_sourceip;
    unsigned int        iph_destip;
};

struct tcpheader {
    unsigned short int  tcph_sourceport;
    unsigned short int  tcph_destport;
    unsigned int        tcph_seqnum;
    unsigned int        tcph_acknum;
    unsigned char       tcph_reserved:4, tcph_offset:4;
    unsigned char       tcph_flags;
    unsigned short int  tcph_win;
    unsigned short int  tcph_chksum;
    unsigned short int  tcph_urgptr;
};

/* Checksum */
unsigned short checksum (unsigned short *pac, int len)
{
    unsigned long sum;
    for (sum = 0; len > 0; len--)
        sum += *pac++;
    sum = (sum >> 16) + (sum & 0xffff);
    sum += (sum >> 16);

    return(~sum);
}

/* Checksum TCP */
unsigned short checksum_tcp (unsigned short len, unsigned short sourceip[],
    unsigned short destip[], unsigned short buf[])
{
    unsigned char protocol = 6;
    unsigned long sum;
    int nleft;
    unsigned short *w;

    sum = 0;
    nleft = len;
    w=buf;

    while(nleft > 1)
    {
        sum += *w++;
        nleft -= 2;
    }
    if(nleft > 0)
    {
        sum += *w&ntohs(0xFF00);
    }

    sum += sourceip[0];
    sum += sourceip[1];
    sum += destip[0];
    sum += destip[1];
    sum += htons(len);
    sum += htons(protocol);

    sum = (sum >> 16) + (sum & 0xFFFF);
    sum += (sum >> 16);
    sum = ~sum;

    return ((unsigned short) sum);
}

int main(int argc,char **argv)
{
    int c;

    /* Are we in root? */
    if(geteuid() !=0)
    {
        printf("Root access is required to run this program.\n\n");
        exit(0);
    }

    while (1)
    {
        static struct option long_options[] =
        {
        /* Options */
            {"send",       no_argument,       0, 's'}, /* args s, r and f have no function yet */
            {"receive",    no_argument,       0, 'r'},
            {"file",       required_argument, 0, 'f'},
            {"destip",     required_argument, 0, 'i'},
            {"destport",   required_argument, 0, 'p'},
            {"sourceip",   required_argument, 0, 'o'},
            {"sourceport", required_argument, 0, 't'},
            {0, 0, 0, 0}
        };

        int option_index = 0;
        c = getopt_long (argc, argv, "srf:d:i:p:o:t:",
        long_options, &option_index);

        /* Detect the end of the options. */
        if (c == -1)
            break;
        switch (c)
        {
            case 0: /* If this option set a flag, do nothing else now. */
            if (long_options[option_index].flag != 0)
                break;
            printf ("option %s", long_options[option_index].name);
            if (optarg)
                printf (" with arg %s", optarg);
            printf ("\n");
            break;

            case 's': puts ("option -s\n");
                break;
            case 'r': puts ("option -r\n");
                break;
            case 'f': printf ("option -f with value `%s'\n", optarg);
                break;
            case 'i': dip = inet_addr(optarg);
                dstip = optarg;
                break;
            case 'p': dport = htons(atoi(optarg));
                /* Add handling of bad/non number input here */
                break;
            case 'o': sip = inet_addr(optarg);
                break;
            case 't': sport = htons(atoi(optarg));
                break;
            case '?': /* Error message printed */
                break;
            default:  abort ();
        }
    }

    /* Print any remaining command line arguments (not options). */
    if (optind < argc)
    {
        printf ("\nNon-option ARGV-elements: ");
        while (optind < argc)
            printf ("%s ", argv[optind++]);
        putchar ('\n');
    }

    /* check if all mandatory options are set and for unknown arguments */
    /* This really needs changing... */
    if ((dip && sip && dport && sport) == 0)
    {
        usage();
        return (-1);
    }

    fprintf(stdout, "SPORT : %d, DPORT : %d\n", sport, dport);

    /* change */

    pthread_t tid_pr;
    if (pthread_create(&tid_pr, NULL, capture, NULL) != 0) {
        fprintf(stderr, "can't create raw packet reader: %s\n", strerror(errno));
        exit(1);
    }
    printf("\nRaw packet reader created\nWaiting 1 second for packet reader thread to settle down...\n\n");
    sleep(1);
    run();
    pthread_join(tid_pr, NULL);
    getchar ();

    exit (0);
}

int send_syn(unsigned int sourceip, unsigned int destip, unsigned short sourceport,
    unsigned short destport)
{
    //const int one = 1;
    char buffer[PCKT_LEN];
    struct sockaddr_in sin;
    struct ipheader *ip;
    struct tcpheader *tcp;

    ip = (struct ipheader *) buffer;
    tcp = (struct tcpheader *) buffer + ip->iph_ihl *4;

    /* IP attributes */
    ip->iph_ihl = 5;
    ip->iph_ver = 4;
    ip->iph_tos = 16;
    ip->iph_len = sizeof(struct ipheader) + sizeof(struct tcpheader);
    ip->iph_id = htons(54321);
    ip->iph_offset = 0;
    ip->iph_ttl = 64;
    ip->iph_protocol = IPPROTO_TCP;
    ip->iph_chksum = 0;
    ip->iph_sourceip = sip;
    ip->iph_destip = dip;
    ip->iph_chksum = checksum ((unsigned short *) buffer, (sizeof (struct
        ipheader )+ sizeof (struct tcpheader)));
    /* TCP attributes */
    tcp->tcph_sourceport = sport;
    tcp->tcph_destport = dport;
    tcp->tcph_seqnum = htonl(1);        /* ADD SEQ NUM THINGY */
    tcp->tcph_offset = 5;
    tcp->tcph_flags = TH_SYN;
    tcp->tcph_win = htons(32767);
    tcp->tcph_chksum = 0;
    tcp->tcph_urgptr = 0;
    tcp->tcph_chksum = (unsigned short) checksum_tcp((unsigned short) (ip->iph_len - ip->iph_ihl *4), (unsigned short *) &ip->iph_sourceip,
        (unsigned short *) &ip->iph_destip, (unsigned short *) &tcp);

    /* Address family */
    sin.sin_family = AF_INET;
    sin.sin_addr.s_addr = ip->iph_destip;
    /* Send */
    if (sendto(sock, buffer, ip->iph_len, 0, (struct sockaddr *)&sin, sizeof(sin)) < 0)
    {
        fprintf(stderr, "\nCan't send packet\n");
        return (-1);
    }
    else
        printf("Packet sent to %d", dip);
    close(sock);

    return 0;
}

int send_syn_ack(unsigned int sourceip, unsigned int destip, unsigned short sourceport,
    unsigned short destport, unsigned long s_seq)
{
    //const int one = 1;
    char buffer[PCKT_LEN];
    struct sockaddr_in sin;
    struct ipheader *ip;
    struct tcpheader *tcp;

    ip = (struct ipheader *) buffer;
    tcp = (struct tcpheader *) buffer + ip->iph_ihl *4;
    /* IP attributes */
    ip->iph_ihl = 5;
    ip->iph_ver = 4;
    ip->iph_tos = 16;
    ip->iph_len = sizeof(struct ipheader) + sizeof(struct tcpheader);
    ip->iph_id = htons(54321);
    ip->iph_offset = 0;
    ip->iph_ttl = 64;
    ip->iph_protocol = IPPROTO_TCP;
    ip->iph_chksum = 0;
    ip->iph_sourceip = sip;
    ip->iph_destip = dip;
    ip->iph_chksum = checksum ((unsigned short *) buffer, (sizeof (struct
        ipheader )+ sizeof (struct tcpheader)));
    /* TCP attributes */
    tcp->tcph_sourceport = sport;
    tcp->tcph_destport = dport;
    tcp->tcph_seqnum = htonl(1 + 1);                        /* ADD SEQ NUM THINGY */
    tcp->tcph_acknum = htonl (s_seq + 1);               /* ADD ACK NUM THINGY */
    tcp->tcph_offset = 5;
    tcp->tcph_flags = TH_ACK;
    tcp->tcph_win = htons(32767);
    tcp->tcph_chksum = 0;
    tcp->tcph_urgptr = 0;
    tcp->tcph_chksum = (unsigned short) checksum_tcp((unsigned short) (ip->iph_len - ip->iph_ihl *4), (unsigned short *) &ip->iph_sourceip,
        (unsigned short *) &ip->iph_destip,    (unsigned short *) &tcp);

    /* Address family */
    sin.sin_family = AF_INET;
    sin.sin_addr.s_addr = ip->iph_destip;
    /* Send */
    if (sendto(sock, buffer, ip->iph_len, 0, (struct sockaddr *)&sin, sizeof(sin)) < 0)
    {
        fprintf(stderr, "\nCan't send packet : %s\n", strerror(errno));
        return (-1);
    }
    else
        printf("Packet sent to %d\n", dip);
    close(sock);

    return 0;
}

void run()
{
    const int one = 1;
    //char buffer[PCKT_LEN];
    //struct sockaddr_in sin; 
    //struct ipheader *ip;
    //struct tcpheader *tcp;

    //ip = (struct ipheader *) buffer;
    //tcp = (struct tcpheader *) buffer + ip->iph_ihl *4;

    sock = socket(PF_INET, SOCK_RAW, IPPROTO_TCP);
    if (sock < 0)
    {
        fprintf(stderr, "\nSocket()\n\n");
        exit (-1);
    }
    else
        printf ("socket() - Using SOCK_RAW and TCP protocol is OK.\n");

    if ((setsockopt(sock, IPPROTO_IP, IP_HDRINCL, (char *)&one, sizeof (one))) < 0)
    {
        fprintf(stderr, "Can't set socketoptions\n");
        exit (-1);
    }
    else
        printf("Socketoptions OK.\n");
    send_syn(dip, sip, dport, sport);
}

void receive(u_char *args, const struct pcap_pkthdr *pkthdr, const u_char *buffer)
{
    //const int one = 1;
    //int LEN = strtol(args, NULL, 0);        /* LEN = strtol(args, NULL, 0)   ----  int LEN = *args;*/
    int LEN = atoi((char *)args);
    //struct ipheader *ip;
    struct tcpheader *tcp;

    //ip = (struct ipheader *)(buffer + LEN);
    tcp = (struct tcpheader *)(buffer + LEN + sizeof (struct ipheader));

    printf("LEN = %d\n", LEN);

    printf("Packet received. ACK number: %d\n", ntohl (tcp->tcph_seqnum));
    printf("Packet received. SEQ number: %d\n", ntohl (tcp->tcph_acknum));
    s_seq = ntohl (tcp->tcph_seqnum);

    send_syn_ack(s_seq, dip, sip, dport, sport);

    sleep(100);
}

void* capture(void *unused_arg)
{
    pcap_t *pd;
    bpf_u_int32 netmask;
    bpf_u_int32 localnet;
    char filterbuf[64];
    snprintf(filterbuf, sizeof(filterbuf), "ip dst host %s", dstip);
    char *filter = filterbuf;
    //char *dev = NULL;
    char dev[] = "eth0";
    char errbuf[PCAP_ERRBUF_SIZE];
    struct bpf_program filterprog;
    int dl = 0, dl_len = 0;
    /* TODO : SET THE INTERFACE CORRECTLY */
    //if ((pd = pcap_open_live(dev, 1514, 1, 500, errbuf)) == NULL)       /* Look into snaplen size */
    if ((pd = pcap_open_live(dev, 1514, 1, 500, errbuf)) == NULL)       /* Look into snaplen size */
    {
        fprintf(stderr, "can't open device %s: %s\n", dev, errbuf);
        exit(1);
    }

    pcap_lookupnet(dev, &localnet, &netmask, errbuf);
    pcap_compile(pd, &filterprog, filter, 0, localnet);
    if (pcap_setfilter(pd, &filterprog) == - 1)
    {
        fprintf(stderr, "can't set pcap filter: %s %s\n", filter, errbuf);
        exit(1);
    }

    pcap_freecode(&filterprog);
    dl = pcap_datalink(pd);

    switch(dl) {
        /* TODO : HANDLE THIS PART CORRECTLY */
        case 1:
            dl_len = 14;    /* Ethernet header */
            fprintf(stdout, "\nDL = %d (ETHERNET)\n", dl);
            break;
        default:
            dl_len = 14;
            fprintf(stdout, "\nDL = %d (if you are here please handle correctly)\n", dl);
            break;
    }
    if (pcap_loop(pd, -1, receive, (u_char *) &dl_len) < 0)
    {
        fprintf(stderr, "can't get raw packet: %s\n", pcap_geterr(pd));
        exit(1);
    }

    return NULL;
}

void usage()

{
    /* This is the user manual (CHANGE) */
    printf("\nChannelBunny %s, created 2012\n\n", VERSION);
    printf("ChannelBunny Usage:  -s -f <file> -i <destip> -p <destport> -o <sourceip> -t <sourceport>\n\n");
    printf("-s, --send,             Puts program in send mode\n");
    printf("-r, --receive,          Puts program in receive mode\n");
    printf("-f, --file,             Specify file\n");
    printf("-i, --destip,           Destination IP address\n");
    printf("-p, --destport,         Destination port\n");
    printf("-o, --sourceip          Source IP address\n");
    printf("-t, --sourceport        Source port\n");
} 
```

**编辑：设置界面**

设置接口`pcap_open_live`，使用`ifconfig`命令检查你想使用哪个接口，如果是ETHERNET以外的接口，你需要改变你的代码，因为**header**会改变。

要调试您的代码，您可以使用旧的 printf （它总是有用的），将其添加到您怀疑是问题原因的所有部分中：

```
fprintf(stdout, "Function : %s, Line : %d\n", __FUNCTION__, __LINE__); 
```

**EDIT2**：传递给`receive`函数的 ETHERNET 标头的值是错误的

利用 ：

```
int LEN = *(int *)args; 
```

代替：

```
int LEN = strtol(args, NULL, 0); 
```

然后您可以清楚地看到`LEN`现在是 14（以太网标头长度）。

另一件事：我真的不明白你认为全局变量`sock`会如何表现！您的套接字是在`run`线程启动后在函数中创建的！并且您尝试将其关闭两次：内部`send_syn_ack`和`send_syn`. 您需要考虑代码的设计（需要一些时间）。我认为您应该在 main 函数内创建主套接字并在需要时关闭它（在 main 函数内或发生某些错误时）。最后一件事请使用 :`strerror(errno)`进行所有调用，以便轻松跟踪错误。希望这有帮助。

# android - 为 Android 片段设置自定义字体

> ID：12062309
> 
> 赞同：21
> 
> 时间：2012-08-21T20:11:11.063
> 
> 标签：android, fonts, android-fragments

我一直在使用[Jake Wharton 的 ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)，目前正在尝试在我的一个片段上实现自定义字体。我试过使用这段代码：

```
 TextView txt = (TextView) findViewById(R.id.Zipcode);
    Typeface font = Typeface.createFromAsset(getAssets(), "fonts/customfont.ttf");
    txt.setTypeface(font); 
```

在`onCreate`导致 logcat 中出现空指针异常的主要活动中，偶尔`typeface cannot be made`. 我还尝试在片段本身中设置字体，`onCreate`然而`onCreateView`，`findViewById`并且`getAssests()`是片段范围内的未知方法。

我无法确定字体是问题还是我试图设置字体的位置不是问题。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-21T21:08:54.687

你可以试试这个

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle     savedInstanceState) {
       View v = inflater.inflate(R.layout.fragment_layout, container, false);
       TextView txt = (TextView) v.findViewById(R.id.Zipcode);
       Typeface font = Typeface.createFromAsset(getActivity().getAssets(), "fonts/customfont.ttf");
       txt.setTypeface(font); 
       return v;
} 
```

有了这个，您可以在片段范围内获得上下文并获取视图和资产

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T21:18:55.563

在 yourViewHolder 类中定义字体`

```
Typeface customFontBold= Typeface.createFromAsset(getActivity().getAssets(),"fonts/JosefinSans-Bold.ttf"); 
```

像这样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-27T21:38:57.060

> 我的简单代码是在片段中使用“getContext()”更改方法调用“上下文”；//getContext 和 getActvity 在片段中是否相同？？

```
**result**.setText("Value Expenses = " +expenses);
Typeface supercell = Typeface.createFromAsset(**getContext()**.getAssets(), "fonts/Supercell.ttf");**
**result.setTypeface(supercell);**
}catch (Exception e) 
{
Toast.makeText(getActivity(), "SUCCEED, VALUES RESULT", Toast.LENGTH_SHORT)
.show();
}
break; 
```

# c# - 双数格式

> ID：12062311
> 
> 赞同：0
> 
> 时间：2012-08-21T20:11:26.333
> 
> 标签：c#, formatting, double

全部，

我正在尝试从初始化文件中读取 1.5 的值，并在 Windows 窗体的文本控件中将其显示为 1.50000。

这是代码：

```
string value = ini.Read( "Form", "value" );
this.textcontrol.Text = String.Format( "{0:F5}", value ); 
```

“值”变量确实包含 1.5，但文本控件也显示 1.5 而不是 1.50000。

我究竟做错了什么？

谢谢你。

[编辑]

正如建议的那样，我尝试执行以下操作：

```
var doublevar = double.Parse( value, CultureInfo.InvariantCulture );
this.textcontrol.Text = doublevar.ToString( "{0:F5}" ); 
```

但我在控件中看到的是 {1:F5}。

任何想法？

[/编辑]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:15:01.960

您正在将值读取为字符串。您想将其转换为双倍以使此类格式正常工作。

```
string valueText = ini.Read( "Form", "value" );
var value  = double.Parse(valueText); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:18:08.673

应该是这样的

```
string value = ini.Read( "Form", "value" );
this.textcontrol.Text = String.Format("{0:0.00000}",  double.Parse(value)); 
```

这是[Double [C#] 的更多详细信息字符串格式](http://www.csharp-examples.net/string-format-double/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T20:18:12.463

您应该将该值分配给十进制变量。

下面的代码示例将起作用。

```
decimal value = 1.5m;
this.txtEditAcquisitionUpb.Text = String.Format( "{0:F5}", value ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T22:30:07.303

结合其他答案以使其正确：

```
string valueString = ini.Read("Form", "value");
double valueDouble = double.Parse(valueString);
this.textcontrol.Text = valueDouble.ToString("F5"); 
```

如果有可能这将在具有变量 的机器上运行，`CultureInfo`那么请考虑使用包含.`Parse``ToString``IFormatProvider`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T20:16:09.937

你可以看看。 [http://msdn.microsoft.com/en-us/library/s8s7t687.aspx](http://msdn.microsoft.com/en-us/library/s8s7t687.aspx)

也试试：

```
double.Parse(value); 
```

# c# - MVVM Light - 多个 ViewModel（并将它们连接起来）

> ID：12062313
> 
> 赞同：8
> 
> 时间：2012-08-21T20:11:37.593
> 
> 标签：c#, .net, wpf, mvvm, views

我正在尝试学习 MVVM 模式（C#），来自 Windows 窗体背景。我正在使用 MVVM Light 工具包，到目前为止我认为它很棒。我已经做了几个小应用程序，但是我正在努力解决的一件事是引入第二个视图。

我想（例如）在我的 MainViewModel 上有一个按钮，它通过 RelayCommand 打开一个新窗口 - 让我们说一个“关于”窗口。我已经为此在网络上进行了数小时的研究，但似乎我无法让我的 AboutViewModel 与/显示我的 AboutView 进行通信。

我在 AboutView.xaml 的代码隐藏构造函数中放置了一个接收信使 - 但是我无法让它接收来自 AboutViewModel 的任何消息，因此无法使其成为“Show()”。

如果有人有一个使用多个视图的 Mvvm Light WPF 应用程序示例，那就太好了:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:09:16.027

我认为有两种方法可以轻松做到这一点

第一种是使用 a`Popup`而不是 new `Window`。例如，我经常将属性放在我`ViewModel`的 for`PopupContent`和`IsPopupVisible`中，并在我想显示我的`Popup`控件的任何时候设置这些值。例如，一个`ShowAboutPopup`中继命令可能会像这样运行：

```
void ShowAboutPopup()
{
    PopupContent = new AboutViewModel();
    IsPopupVisible = true;
} 
```

您可以使用`Popup`对象或自定义来显示它`UserControl`。我更喜欢使用我自己的[自定义 Popup UserControl](http://rachel53461.wordpress.com/2011/08/20/popup-panel-for-wpf/)，它通常最终看起来像这样：

```
<Window>
    <Canvas x:Name="RootPanel">
        <SomePanel>
            <!-- Regular content goes here -->
        </SomePanel>

        <local:PopupPanel Content="{Binding PopupContent}"
            local:PopupPanel.IsPopupVisible="{Binding IsPopupVisible}"
            local:PopupPanel.PopupParent="{Binding ElementName=RootPanel}" />
    </Canvas>
</Window> 
```

`PopupContent`属性是 a `ViewModel`（如 a ）`AboutViewModel`，`DataTemplates`用于告诉 WPF 以特定的方式绘制特定`ViewModels`的`Views`

```
<Window.Resources>
    <DataTemplate DataType="{x:Type local:AboutViewModel}">
        <local:AboutView />
    </DataTemplate>
</Window.Resources> 
```

另一种方法是让某种`ApplicationViewModel`在启动时运行，并负责整个应用程序状态，包括打开哪些窗口。

通常我更喜欢有一个`ApplicationView`包含 a`ContentControl`来显示当前页面

```
<Window>
    <ContentControl Content="{Binding CurrentViewModel}" />
</Window> 
```

但是它也可以用来管理多个窗口。如果您确实使用它来管理多个`Window`对象，请注意这将不是纯粹的`ViewModel`，因为它需要访问一些特定于视图的对象，并且引用 UI 对象不是`ViewModel`应该做的事情。例如，它可能订阅接收`ShowWindow`消息，并且在接收到这些消息后，它会创建指定的视图并显示它，并可能隐藏当前窗口。

就个人而言，我尽量避免使用多个窗口。我常用的方法是拥有一个包含任何页面的一致应用程序对象的单个视图，以及一个`ContentControl`包含变化的动态内容。如果您有兴趣，我在我的博客上有一个[使用这种导航样式的示例](http://rachel53461.wordpress.com/2011/12/18/navigation-with-mvvm-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:06:19.133

如我所见，您想在**MVVM**应用程序中进行导航吗？

Word 转到`MVVM Light`- *Laurent Bugnion*的创建者 -他[的帖子](http://blog.galasoft.ch/archive/2011/01/06/navigation-in-a-wp7-application-with-mvvm-light.aspx)关于使用**导航服务**进行切换`Views`。它实际上是关于**Windows Phone**和**Silverlight**的，但同样适用于**WPF**。

相关问题中的这个[答案也使用了这种方法。](https://stackoverflow.com/a/9361548/1048468)

# html - 如何将页脚推到页面底部但避免滚动条？

> ID：12062314
> 
> 赞同：0
> 
> 时间：2012-08-21T20:08:55.623
> 
> 标签：html, css

这是我正在开发的网站：

[http://uber.imu.uiowa.edu/isa/](http://uber.imu.uiowa.edu/isa/)

由于没有足够的内容，页脚浮动到页面顶部，所以我使用这个技巧将页脚推到底部：

[http://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

问题是，空间太大，它添加了一个滚动条。如何修复它，使页脚位于页面底部，但不添加该滚动条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:41:16.040

页脚的图像太大，我认为您必须在 Photoshop 中调整图像大小，然后在页脚中使用它，或者将图像放在页脚上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:21:25.043

好吧，保持你目前的方法，我只是减少高度`.push`：

```
.push{
    height:50px;
} 
```

但这不是最好的方法。

[http://jsfiddle.net/VFqTv/](http://jsfiddle.net/VFqTv/)

在此示例中，您为`body`标签提供与页脚相同的背景颜色（或图像），然后内容将根据需要填充尽可能多的空间。页脚就在它的正下方，而它下方的剩余部分则翻转了屏幕的其余部分，起到了某种填充物的作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:27:32.103

目前的方法很棒，我一直在使用它。您只是忘记将包装器的负下边距设置为与页脚和页脚推送相同的高度。`.wrapper`将您的css更新为此`margin: 0 auto -300px;`在 chrome 检查器中对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T20:30:03.840

您网页中的内容太多，无法在单个屏幕上显示。因此，如果要删除滚动条，要么必须减小字体和内容大小，要么必须删除一些内容。

但是如果你想减少网页中的一些垂直空间，请删除`height:200px;`并`.push {}`添加`margin-top:100px;`

# html - 解析 HTML 的最佳正则表达式是什么（即使您不应该这样做）？有完美的吗？

> ID：12062315
> 
> 赞同：5
> 
> 时间：2012-08-21T20:12:06.723
> 
> 标签：html, regex, html-parsing, theory

好的，我们都知道尝试使用 Regex 解析 HTML[会招致 Cthulhu 的愤怒](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。很好。[*对于为什么*不应该这样](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)做，有一些很好的回应。我接受这些，并且不止一次地在问题上发布了这些链接。

但是让我们把这个问题放在以下范围内：除了正则表达式之外，我们别无选择来解析 HTML。为什么？*没关系。* 但是暂时假设我们的开发人员想对小马托尼失去理智，并尽最大努力完成不可能的事情。如果这让你大吃一惊，那么假设这个问题是理论上的。无论你的船漂浮。只需考虑使用正则表达式解析 HTML 的想法，即使您不应该这样做。

[在这里](https://stackoverflow.com/a/590789/1222420)，我们看到了一种不可能做到的主张，至少在完美的情况下是不可能的。但是@NikiC 在它下面有一个非常明智的评论：

> 这个答案从错误的论点（“因为 HTML 不是常规语言”）中得出了正确的结论（“用正则表达式解析 HTML 是个坏主意”）。现在大多数人说“正则表达式”（PCRE）时所指的东西不仅能够解析上下文无关的语法（实际上这很简单），而且还能够解析上下文相关的语法（参见[https://stackoverflow.com/一个/7434814/1222420](https://stackoverflow.com/a/7434814/1222420)）

事实是，你可以用现代正则表达式做一些非常强大的事情，[即使相当冗长](http://ex-parrot.com/~pdw/Mail-RFC822-Address.html)。但是很多人认为这个问题听起来像停止问题：你可以尝试，但总会有另一种情况导致你的解决方案失效。

**所以这是一个问题**，它有点两部分。

*   是否可以生成完美的正则表达式来解析 HTML？
    *   如果是这样，证明是建设性的吗？我们只*知道*我们可以，还是已经做到了？
*   如果不可能，那么最准确的方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T00:38:58.900

# c++ - C ++可以setw和setfill填充字符串的末尾吗？

> ID：12062318
> 
> 赞同：19
> 
> 时间：2012-08-21T20:12:15.347
> 
> 标签：c++, formatting, setw

有没有办法制作`setw`和`setfill`填充字符串的末端而不是前面？

我有一种情况，我正在打印这样的东西。

```
 CONSTANT TEXT variablesizeName1 .....:number1 

 CONSTANT TEXT varsizeName2 ..........:number2 
```

我想`'.'`在末尾添加可变数量

`"CONSTANT TEXT variablesizeName#"`这样我就可以`":number#"`在屏幕上排好队了。

注意：我有一个数组，`"variablesizeName#"`所以我知道最广泛的情况。

或者

我应该通过`setw`这样的设置手动完成吗

```
for( int x= 0; x < ARRAYSIZE; x++)
{
string temp = string("CONSTANT TEXT ")+variabletext[x];
cout <<  temp;
cout << setw(MAXWIDTH - temp.length) << setfill('.') <<":";
cout << Number<<"\n";
} 
```

我想这可以完成这项工作，但感觉有点笨拙。

想法？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-21T20:13:36.237

您可以使用操纵器[`std::left`、`std::right`和`std::internal`](http://en.cppreference.com/w/cpp/io/manip/left)来选择填充字符的位置。

对于您的具体情况，这样的事情可以做：

```
#include <iostream>
#include <iomanip>
#include <string>

const char* C_TEXT = "Constant text ";
const size_t MAXWIDTH = 10;

void print(const std::string& var_text, int num)
{
    std::cout << C_TEXT
              // align output to left, fill goes to right
              << std::left << std::setw(MAXWIDTH) << std::setfill('.')
              << var_text << ": " << num << '\n';
}

int main()
{
    print("1234567890", 42);
    print("12345", 101);
} 
```

输出：

```
Constant text 1234567890: 42
Constant text 12345.....: 101 
```

**编辑**：如链接中所述，`std::internal`仅适用于整数、浮点和货币输出。例如对于负整数，它会在负号和最左边的数字之间插入填充字符。

这个：

```
int32_t i = -1;
std::cout << std::internal
          << std::setfill('0')
          << std::setw(11)  // max 10 digits + negative sign
          << i << '\n';
i = -123;
std::cout << std::internal
          << std::setfill('0')
          << std::setw(11)
          << i; 
```

将输出

```
-0000000001
-0000000123 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:19:33.937

就像是：

```
cout << left << setw(MAXWIDTH) << setfill('.') << temp << ':' << Number << endl; 
```

产生类似的东西：

```
derp..........................:234
herpderpborp..................:12345678 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:19:09.030

```
#include <iostream>
#include <iomanip>

int main()
{
   std::cout
      << std::setiosflags(std::ios::left) // left align this section
      << std::setw(30)                    // within a max of 30 characters
      << std::setfill('.')                // fill with .
      << "Hello World!"
      << "\n";
}

//Output:
Hello World!.................. 
```

# java - 破解原始文件后如何重新创建jar文件？

> ID：12062321
> 
> 赞同：0
> 
> 时间：2012-08-21T20:12:46.003
> 
> 标签：java, android

这可能是一个菜鸟问题，但请帮助我。我找到了一个名为 Graphview for android 的库，我想定制一点并在我的项目中使用它。我知道 .jar 是一个 zip 文件，所以在我提取它之后我看到了 2 个文件夹，一个包含一些 .class 文件和 .java 文件，我的问题是，我只需要更改 .java 文件中我想要的代码吗？那些 .class 文件呢？以及如何将所有更改的文件放回以重新创建一个新的 .jar 文件，以便在我的项目中使用它？

这是来自 Github 的库：**https ://github.com/jjoe64/GraphView/downloads**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:16:12.677

我会

*   fork 原始的 git 库。
*   修改它。
*   建造它。
*   考虑提供对原始版本的改进。

我不会尝试破解现有的库，即使你真的必须这样做（因为你无权访问原始版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:16:04.990

您可以克隆原始项目，在那里进行更改，然后 jar 更改的项目。

# c# - NHibernate 父/子映射不填充包

> ID：12062332
> 
> 赞同：0
> 
> 时间：2012-08-21T20:13:24.207
> 
> 标签：c#, nhibernate, nhibernate-mapping

我环顾四周，发现了许多关于如何绘制儿童地图的示例，但我遗漏了一些东西。我无法使以下映射工作

表格1：

```
ORDERID RAW No
HISTORYID   RAW No 
```

映射：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping auto-import="false" xmlns="urn:nhibernate-mapping-2.2">
  <class name="Order" lazy="false" table="Orders" polymorphism="explicit" dynamic-insert="true">
    <id name="OrderId" column="OrderId" type="Guid">
      <generator class="GuidGenerator" />
    </id>
    <bag name="OrderHistoryBag" lazy="false" table="OrderHistory" cascade="none">
      <key column="HistoryId" />
      <one-to-many class="OrderHistory" not-found="ignore" />
    </bag>
  </class>
</hibernate-mapping> 
```

类属性：

```
public virtual IList<OrderHistory> OrderHistoryBag { get; set; }
public virtual Collection<OrderHistory> OrderHistory { get; set; } 
```

表 2：

```
HISTORYSEQ  NUMBER(6,0) No
HISTORYID   RAW Yes 
```

映射：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="OrderHistory" lazy="false" table="OrderHistory" polymorphism="explicit">
    <id name="HistorySequence" column="HistorySeq" type="Int32">
      <generator class="sequence">
        <param name="sequence">S_Hist</param>
      </generator>
    </id>
    <many-to-one name="Order" class="Order" column="HistoryId" not-null="true" cascade="none" lazy="false" />
  </class>
</hibernate-mapping> 
```

类属性：

```
public virtual Order Order { get; set; } 
```

除了 OrderHistoryBag 及其关联的 OrderHistorycollection 始终是一个空集合之外，一切都编译并运行良好。

我想这个简短的故事是我试图将父类中的 HistoryId 映射到子类中的 HistoryId ，这两者都不是实体上的主键。我的 NHibernate 程序集是 v1.2.1.400（不要问）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:18:40.107

您需要使用 property-ref 指定用于加入 historyItems 的属性

```
<property name="HistoryId" />
<bag name="OrderHistoryBag" lazy="false" table="OrderHistory" cascade="none">
  <key column="HistoryId" property-ref="HistoryId"/>
  <one-to-many class="OrderHistory" not-found="ignore" />
</bag> 
```

# iphone - 将 IBOutlet 链接到 iPhone 和 iPad 故事板

> ID：12062334
> 
> 赞同：3
> 
> 时间：2012-08-21T20:13:37.087
> 
> 标签：iphone, interface-builder, iboutlet

我正在编写一个通用应用程序。据我所知，不可能使用 Interface Builder 将已经链接到 iPhone 故事板的 IBOutlet 链接到 iPad 故事板？

有什么可能的解决方法？我应该只通过文本编辑器编辑故事板吗？

如果完全相同的元素以完全相同的方式表现，那么为每个设备设置一个 IBOutlet 似乎并不明智。

干杯-

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:24:06.837

您应该完全有能力并且能够将 IBOutlet 添加到 iPhone_Storyboard 文件以及 iPad_Storyboard 文件上的相同 IBOutlet。它似乎在做什么，只是在另一个 Storyboard 文件中分离您以前的连接？

我已经在多个通用应用程序上做到了这一点，没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-19T15:08:14.280

我也遇到了这个问题。我的问题是我忘记确保 UIView 的自定义类在 iPhone 和 iPad 版本的故事板中是相同的。修复后，Xcode 立即让我连接插座。

# cluster-analysis - 在 SPSS 中使用什么样的分析来找出组/分组？

> ID：12062335
> 
> 赞同：1
> 
> 时间：2012-08-21T20:13:44.537
> 
> 标签：cluster-analysis, spss

我的研究问题是关于老年人的，我必须找出潜在的群体。数据来自问卷调查。我曾考虑过聚类分析，但问题是我想搜索感知健康以及哪些事物会影响感知健康，例如哪些老年人群体将他们的健康列为不良。

我想通过分析检查大约 30 个问题，例如寡妇的健康状况是否比平均水平更好或更差。我的数据中也有权重，所以我需要使用复杂的样本。

如何使用已经存在的函数，或者我应该使用什么分析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:03:32.247

如果您想使用 SPSS 生成聚类，标准选项包括：k-means、分层聚类分析或 2-step。我[在这里有一些关于 SPSS 中聚类分析的一般说明](http://web.psych.unimelb.edu.au/jkanglim/03clusterandfactoranalysis.pdf)。见幻灯片 34。

如果您想查看寡妇的健康状况是否存在差异，那么您需要形成一个健康指标，并比较寡妇和非寡妇之间该指标的平均值（大概使用组间 t 检验）。如果您有 30 个与健康相关的问题，那么您可能需要进行因子分析以查看这些项目是如何组合在一起的。

如果您正在尝试开发一个预测感知健康的通用模型，那么可以使用多种建模选项。多元回归将是一个明显的起点。如果您有许多潜在的预测因素，那么您将有很多选择来决定您是要测试特定模型还是进行更多数据驱动的模型构建方法。

更一般地说，听起来您需要澄清分析的目的以及要测试的特定假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:37:19.893

您必须首先解决的关键挑战是指定相似性度量。一旦可以测量相似性，就可以使用各种聚类算法。

但是问卷数据并不能形成一个很好的向量空间，所以不能只使用欧几里得距离。

# php - 通过我的网络服务器提供的 .docx 文件在打开时已损坏

> ID：12062337
> 
> 赞同：1
> 
> 时间：2012-08-21T20:13:53.770
> 
> 标签：php, mime-types

我虽然在这里找到了答案： [Serving .docx files through Php](https://stackoverflow.com/questions/4602678/serving-docx-files-through-php) 但是当我尝试通过 php 下载和打开 docx 服务器时，我仍然收到文件损坏的错误 也许你可以看到我的代码有问题。.doc 工作正常，失败的是 docx。

```
$parts = pathinfo($doc);
$docFile = $userDocRoot.$doc;
if ( !file_exists($docFile) ){
    throw new Exception("Can not find ".$parts ['basename']." on server");
}
if ( $parts['extension'] == 'docx' ){
    header('Content-type: application/vnd.openxmlformats- officedocument.wordprocessingml.document');
    header('Content-Disposition: attachment; filename="'.$parts['basename'].'"');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    ob_clean();
    flush();
    readfile($docFile);
}else{
   header('Content-type: application/msword');
   header('Content-Disposition: attachment; filename="'.$parts['basename'].'"');
   readfile($docFile);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:44:03.320

我的解决方案是添加

```
 $fsize = filesize($docFile);
 header("Content-Length: ".$fsize); 
```

感谢大家的帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:23:25.543

您的代码中有一些额外的空格会导致它失败。

尝试使用此代码：

```
$parts = pathinfo($doc);
$docFile = $userDocRoot . $doc;
if(!file_exists($docFile)){
    throw new Exception('Can not find ' . $parts['basename'] . ' on server');
}
if($parts['extension'] == 'docx') {
    header('Content-type: application/vnd.openxmlformats-officedocument.wordprocessingml.document');
    header('Content-Disposition: attachment; filename="' . $parts['basename'] . '"');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    ob_clean();
    flush();
    readfile($docFile);
} else {
    header('Content-type: application/msword');
    header('Content-Disposition: attachment; filename="' . $parts['basename'] . '"');
    readfile($docFile);
} 
```

如果还是不行，试着注释掉`header`和`readfile`行，然后你会看到是否有任何错误。

另外，我建议您根据白名单检查文件名，这样人们就无法下载带有密码的 PHP 文件等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T15:44:55.847

我刚刚花了一段时间研究为什么我的 DOCX 文件被损坏并偶然发现了这个……但我也在其他地方找到了答案……

```
$fsize = filesize($docFile);
header("Content-Length: ".$fsize); 
```

这给了我寻找的工具......关键是`filesize()`需要文件的基本名称才能获得准确的文件大小！

调整我的代码：

```
header("Content-Length: ".filesize(basename($file))); 
```

这现在按预期提供 DOCX（我已将 Content-type 设置为“application/vnd.openxmlformats-officedocument.wordprocessingml.document”），并且我不必像其他人报告的那样“修复”文档......（我也发现修复工作）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-17T12:47:50.367

这是一个对我有用的代码（经过大约 5 个小时的混乱）：

```
 // headers to send your file
           header('Content-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document');
           header("Content-Length: " . filesize($original_file));
           header('Content-Disposition: attachment; filename="' . $new_filename . '"');
           ob_clean();
           flush();
           readfile($original_file);
           exit; 
```

我希望它有帮助:)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-02-08T14:58:41.590

我遇到过同样的问题。

原因是，在我的*php 文件*中某处隐藏了两个空格。

删除它们解决了这个问题。

1.  在和`//`前面加“ ”`header``readfile-statements`
2.  写`echo "test";`在后面`readfile-statement.`
3.  **然后查看 HTML 源代码，如果“ test** ”前面有空格。

# javascript - While循环只返回最终结果

> ID：12062340
> 
> 赞同：5
> 
> 时间：2012-08-21T20:14:05.570
> 
> 标签：javascript

```
while (counterInc < counter) {
  window.setTimeout(function () {
    $('#results').text(counterInc);
    }, 3000);
  counterInc++;
} 
```

此代码应每 3000 毫秒增加带有 ID 结果的标记，而不是 while 循环正在运行并返回最终结果。例如，不是将文本更改为 1、2、3、4、5、..n，而是将文本更改为 n。如何让循环每 1000 毫秒更新一次文本字段，每次增量，而不是只更新最终结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T20:17:48.243

试试这个

```
var counterInc = 0;
var counterMax = 10;

var timeoutId = window.setInterval(function() {
    $('#results').text(counterInc++);
    if (counterInc >= counterMax) {
        window.clearInterval(timeoutId);
    }
}, 500);​ 
```

[http://jsfiddle.net/GufCs/4/](http://jsfiddle.net/GufCs/4/)

发生的事情是你每三秒超时更新一次单元格，但是，你的循环可以在 3 秒内运行大量的数字，所以在 setTimeout 中的函数运行时它已经完成了很长时间。

这将每 500 毫秒触发一次函数（根据您的目的更改为 3000 毫秒），然后才会增加 counterInc。添加它会在达到 counterMax 时清除 Interval。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:19:02.380

问题是 setTimeout() 充当“独立线程”。您设置它并在指定的时间后执行一次。与此同时，“主线程”继续运行：因此您的计数器将同时增加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T20:38:45.517

要了解问题，您需要了解闭包是什么。在这里，您希望每次都传递一个特定的值，而不是在循环范围结束时计算的值。

因此，在声明 setTimout 时而不是在调用时计算值，您可以执行以下操作：http: [//jsfiddle.net/lechevalierd3on/jhYm3/](http://jsfiddle.net/lechevalierd3on/jhYm3/)

```
var counter = 10;
var counterInc= 0;

while (counterInc < counter) {
  window.setTimeout(function () {
      var inc = counterInc;
      return function(){
          $('#results').text(inc);
      }
  }(counterInc), 1000 * counterInc);   

  counterInc++;
}​ 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-21T20:19:00.337

```
while (counterInc < counter) {
  window.setTimeout(function () {
    $('#results').text(counterInc);
    }, 3000 * counterInc++);
} 
```

# python - 打印 python 和 csv 行

> ID：12062341
> 
> 赞同：0
> 
> 时间：2012-08-21T20:14:08.327
> 
> 标签：python, csv, print-module

所以我有一个生成的列表，例如missingfromauthoratative，我想做两件事。1.在屏幕上打印结果；2\. 将结果写入 csv 文件。

有了我所拥有的，它会做一个或另一个，有时甚至是一个组合。下面的代码是我所拥有的。

```
#Find what is missing or new
    missingFromAuthoritative = dBase.execute('SELECT url, mapindex, mapname, layerid, layername FROM authoritative EXCEPT SELECT url, mapindex, mapname, layerid, layername FROM current;')
    newToAuthoritative = dBase.execute('SELECT url, mapindex, mapname, layerid, layername FROM current EXCEPT SELECT url, mapindex, mapname, layerid, layername FROM authoritative;')

    #Print missing services (-) and new services (+)
    for missing in missingFromAuthoritative:
            print '-', missing[0], '\n  Map:  ', missing[2], '\n  Layer:', missing[4], '\n'
            self.inconsistency += 1
            outcsv = csv.writer(open('missing.csv', "wb"))
            header = ("Map Service","Map Index","Data Frame","Layer ID","Layer Name")
            outcsv.writerow(header)
            outcsv.writerows(missingFromAuthoritative) 
```

它有时还会将一行写入屏幕，将另外三行写入 csv。这就是我想要在屏幕上显示的内容 *- MapServer 地图：图层图层：提议的发电站点 - MapServer 地图：图层图层：现有基础设施 - MapServer 地图：图层图层：现有公用设施站点 - MapServer 地图：图层图层：现有传输线 4 不一致在 81.28 秒内找到。*

这就是我在 csv *地图服务地图索引数据框图层 ID 图层名称中想要的 MapServer 0 图层 0 拟议发电站点 MapServer 0 图层 1 现有基础设施 MapServer 0 图层 2 现有公用设施站点 MapServer 0 图层 3 现有传输线*

我不知道为什么将它们放在 for 迭代器之后不起作用。让凋灵开始工作的唯一方法是评论对方。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:22:14.670

你有几个问题。您在每次循环迭代时都重新打开文件，因此每次都将其截断。您还在`missingFromAuthoritative`每次迭代中编写标题和整个列表，掩盖第一个错误。此外，每次遍历列表时，都会消耗查询中的一行，所以当你到达末尾时，就没有什么可写的了。

您应该在循环之前打开文件一次，在循环之前写入标题，在每次迭代时将一行写入 csv，然后关闭文件。你可以用一个`with`块来做到这一点：

```
with open('missing.csv', "wb") as outFile:
    outCsv = csv.writer(outFile)
    outCsv.write(header)
    for missing in missingFromAuthoritative:
        # do your other stuff with inconsistencies, etc., here
        print missing
        outCsv.writerow(missing) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:18:24.823

您的写作正在消耗迭代器。您需要重新架构您的代码。

伪代码：

```
Perform query
Open CSV file
Write header to CSV file
For each row in the query:
  Display row to screen
  Write row to CSV file
Close CSV file 
```

# ruby-on-rails - Ruby 未定义方法错误 - 我以为我已经定义了它？

> ID：12062342
> 
> 赞同：0
> 
> 时间：2012-08-21T20:14:12.427
> 
> 标签：ruby-on-rails

我正在用 Ruby 编写一个课程管理程序，以帮助管理大学的课程、与每门课程相关的模块以及在每个课程和模块上注册的学生。

每个学生只能注册一门课程（或计划），并且只能参加他们计划中可用的模块。

目前，我有两个类：Application.rb，这是我用作菜单的类，用于与用户交互，以及 CourseModules.rb，这是我正在做所有工作的类

应用程序.rb：

```
class Application
# To change this template use File | Settings | File Templates.
require './courseModules.rb'
def initialize
  mainMenu
end

=begin
  def navigateTo(what)
  what.new(v).display
  mainMenu
  end
=end

def mainMenu
  puts "What would you like to do?
      1: Add module to a scheme
      2: Remove module from a scheme
      3: Query modules
      4: Modify module
      5: Register a student on a scheme
      6: Remove a student from a scheme
      7: Register a student on a module
      8: Remove a student from a module"
  case gets.strip
    when "1"
      CourseModules.add_module
    when "2"
      CourseModules.removeModuleFromScheme
    when "3"
      navigateTo CourseModules
    when "4"
      navigateTo CourseModules
    when "5"
      navigateTo Student
    when "6"
      navigateTo Student
    when "7"
      navigateTo Student
  end
end
Application.new
end 
```

课程模块.rb：

```
class CourseModules
# To change this template use File | Settings | File Templates.
@@moduleScheme = nil
@@moduleYear = nil
#@moduleTitle = ""
@noOfModulesInScheme = 0

def self.moduleYear
  @@moduleYear
end

def initialize(v)
  @val = v
end
# Set and get the @val object value
def set (v)
  @val = v
end
def get
  return @val
end

# Attempt at add_module method on 21/08/2012 at 16:30
def self.add_module
  schemes = {}
  scheme_exists = false
  add_another_scheme = true
  add_another_module = true

  while add_another_scheme
    print "Enter scheme name: "
    scheme_name = gets
    @schemes.has_key?(scheme_name.chop) ? scheme_exists = true : scheme_exists = false

    if !scheme_exists
      @schemes[scheme_name.chop] = []
      puts "Scheme #{scheme_name.chop} has been added to the system"
    else
      scheme_exists = false
      puts "This scheme has already been added"
    end

    while add_another_module
      print "Enter module name: "
      module_name = gets
      @schemes[scheme_name.chop].include?(module_name.chop) ? true : @schemes[scheme_name.chop] << module_name.chop
      print "Add another module? "
      ask_if_user_wants_to_add_another_module = gets
      if(!ask_if_user_wants_to_add_another_module.chop == "y" or ask_if_user_wants_to_add_another_module == "yes")
      add_another_scheme = false
    end

 end

 print "Add another scheme? "
 ask_if_user_wants_to_add_another_scheme = gets
 if !(ask_if_user_wants_to_add_another_scheme.chop == "y" or ask_if_user_wants_to_add_another_scheme.chop == "yes")
   add_another_scheme = false
 end
 puts @schemes

end

 while add_another_module
   print "Enter scheme name: "
   scheme_name = gets
   schemes.has_key?(scheme_name.chop) ? scheme_exists = true : scheme_exists = false

   if !scheme_exists
     print "Enter module name: "
     module_name = gets
     schemes[scheme_name.chop] = module_name.chop
     puts "Scheme #{scheme_name.chop} with module #{module_name} has been added to the system"
   else
     scheme_exists = false
     puts "This scheme has already been added"
     puts "Enter module name: "
     module_name = gets
     schemes[scheme_name.chop] = module_name.chop
     puts "Scheme #{scheme_name.chop} with module #{module_name} has been added to the system"
   end

   print "Add another module? "
   ask_if_user_wants_to_add_another_module = gets
   if !(ask_if_user_wants_to_add_another_module.chop == "y" or ask_if_user_wants_to_add_another_module.chop == "yes")
     add_another_module = false
   end
 end
 puts schemes
 end

end 
```

目前，当我从 Application.rb 运行程序时，会显示菜单，然后选择选项 1（将模块添加到方案中）。然后我被要求输入方案名称，我这样做了，然后按 Enter。

但是，然后我在“has_key”的“add_module”中得到一个“未定义的方法”错误。它说它是'nil：NilClass（NoMethodError）

谁可以给我解释一下这个？我该怎么说呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:18:00.287

您正在参考，`@schemes`但您将其定义为`schemes = {}`，因此`nil:NilClass (NoMethodError)`.

# java - 有没有办法设置泽西资源返回的 ArrayList 的名称

> ID：12062354
> 
> 赞同：1
> 
> 时间：2012-08-21T20:15:12.107
> 
> 标签：java, rest, jersey

我在 Jersey Web 服务资源中有一个方法，它返回对象的 ArrayList

```
@GET
@Path("/GetMyObjects")
public List<MyObjectDTO> getMyObject() {
    List<MyObjectDTO> myObjects = new ArrayList<MyObjectDTO>();
    // ... fill the list ...
    return myObects;
} 
```

这可行，但是当**ACCEPT**标头设置为**application/xml**时，表示 ArrayList 的根 XML 对象是`<myObjectDTOes>`. 我猜测框架通过参数化类型的反射来命名列表，并应用一些基本的语法规则使其成为复数。我的问题是如何将其覆盖为类似`<myObjectList>`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:29:13.653

您可以[`@XmlRootElement(name="yourName")`](http://jersey.java.net/nonav/documentation/latest/xml.html#d4e820)在 POJO 上使用来命名 Jersey 响应中返回的 XML 元素。

**根据第一条评论更新**

据我所知，使用 Jersey + JAXB 解决此问题的最佳方法是定义一个包装类，这听起来像是不必要的重复：

```
@XmlRootElement(name="yourName")
class JaxbCollectionWrapper<T> {

  private Collection<T> objects;

  @XmlElement(name="singleObjectName")
  public Collection<T> getObjects() {/* BLAH */}

} 
```

另请注意，`@XmlElementWrapper`不能与 Jersey 一起使用。

如果您要使用 RESTEasy，有一个直接的解决方案可以提供您想要的；`@Wrapped`这是描述[here](http://docs.jboss.org/resteasy/docs/2.0.0.GA/userguide/html_single/index.html#JAXB_Collections)。

# ios - iOS：哪一个区分 SOAP 或 REST

> ID：12062358
> 
> 赞同：1
> 
> 时间：2012-08-21T20:15:23.047
> 
> 标签：ios

我知道 iOS 开发中 SOAP 和 Restful 服务的使用。SOAP 只能使用 XML 消息传递，但 REST 可以使用任何一种。使用 NSURLConnection initWithURLRequest 异步调用我可以实现对这两个服务的工作，两者都可以使用 POST、GET 和 PUT。但是，我真的很想知道我们如何才能真正确定我的 iOS 代码是使用 SOAP 还是 REST 服务，我对此表示怀疑，因为即使 REST 也可以使用 XML 消息传递。哪一个（代码）真正区分了我在我的 iOS 程序上使用 SOAP 或 REST Web 服务调用。请有人澄清我的疑问。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T21:25:34.830

您可以在两者（SOAP 和 REST 服务）上使用 POST 或 GET。这取决于服务是做什么的！当服务器提供 SOAP 服务时，您必须手动创建一个肥皂信封并将其添加到您的请求中。这有点棘手，您最好尽可能使用 REST。

此外，正如您已经提到的，SOAP 响应是 XML，而 REST 支持 JSON，这在 iOS 中绝对更容易使用！

# c++ - 在 C++ 中使用 assert() 是不好的做法吗？

> ID：12062365
> 
> 赞同：104
> 
> 时间：2012-08-21T20:15:59.470
> 
> 标签：c++, coding-style, assert

我倾向于在我的 C++ 代码中添加大量断言，以便在不影响发布版本的性能的情况下更轻松地进行调试。现在，`assert`是一个没有考虑 C++ 机制的纯 C 宏。

另一方面，C++ 定义了`std::logic_error`，这意味着在程序逻辑出现错误的情况下抛出（因此得名）。抛出一个实例可能只是`assert`.

问题是`assert`两者`abort`都立即终止程序而不调用析构函数，因此跳过清理，而手动抛出异常会增加不必要的运行时成本。解决这个问题的一种方法是创建一个自己的断言宏`SAFE_ASSERT`，它的工作方式与 C 对应的一样，但在失败时抛出异常。

**关于这个问题，我能想到三个观点：**

*   *坚持 C 的断言。*由于程序会立即终止，因此更改是否正确展开并不重要。此外，`#define`在 C++ 中使用 s 也同样糟糕。
*   *抛出异常并在 main() 中捕获它*。允许代码在程序的任何状态下跳过析构函数是不好的做法，必须不惜一切代价避免，对 terminate() 的调用也是如此。如果抛出异常，则必须捕获它们。
*   *抛出异常并让它终止程序。* 终止程序的异常是可以的，并且由于`NDEBUG`，这将永远不会在发布版本中发生。捕获是不必要的，它会将内部代码的实现细节暴露给`main()`.

这个问题有确定的答案吗？有什么专业的参考吗？

**编辑：**当然，跳过析构函数没有未定义的行为。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-08-21T20:21:45.450

*   断言用于*调试*。您的交付代码的用户不应该看到它们。如果一个断言被命中，你的代码需要被修复。

    [CWE-617：可达断言](https://cwe.mitre.org/data/definitions/617.html)

> 该产品包含可由攻击者触发的 assert() 或类似语句，这会导致应用程序退出或其他比必要更严重的行为。
> 
> 虽然断言有助于捕获逻辑错误并减少达到更严重漏洞条件的机会，但它仍然可能导致拒绝服务。
> 
> 例如，如果服务器同时处理多个连接，并且在一个连接中发生 assert() 导致所有其他连接被丢弃，则这是导致拒绝服务的可达断言。

*   例外是针对*特殊情况*。如果遇到一个，用户将无法做她想做的事，但可能能够在其他地方恢复。

*   错误处理适用于正常的程序流程。例如，如果您提示用户输入数字并得到无法解析的内容，这是*正常*的，因为用户输入不受您的控制，您必须始终理所当然地处理所有可能的情况。（例如循环直到你有一个有效的输入，在两者之间说“对不起，再试一次”。）

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-08-21T20:18:51.990

断言在 C++ 代码中是完全合适的。异常和其他错误处理机制并不是真正用于与断言相同的事情。

错误处理适用于当有可能很好地恢复或向用户报告错误时。例如，如果尝试读取输入文件时出错，您可能需要对此做一些事情。错误可能是由错误引起的，但它们也可能只是给定输入的适当输出。

断言用于检查 API 的要求是否在通常不会被检查的情况下得到满足，或者用于检查开发人员认为他通过构造来保证的事情。例如，如果一个算法需要排序的输入，你通常不会检查它，但你可能有一个断言来检查它，以便调试构建标记这种错误。断言应始终指示错误操作的程序。

* * *

如果您正在编写一个程序，其中不正常的关闭可能会导致问题，那么您可能希望避免断言。严格按照 C++ 语言的未定义行为在这里不属于这样的问题，因为命中断言可能已经是未定义行为的结果，或者违反了其他可能阻止某些清理正常工作的要求。

此外，如果您根据异常实现断言，那么它可能会被捕获并“处理”，即使这与断言的目的相矛盾。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-21T20:35:44.897

断言可用于验证内部实现不变量，例如执行某些方法之前或之后的内部状态等。如果断言失败，则实际上意味着程序的逻辑已损坏，您无法从中恢复。在这种情况下，您能做的最好的事情就是尽快中断而不向用户传递异常。断言的真正好处（至少在 Linux 上）是核心转储是进程终止的结果，因此您可以轻松地调查堆栈跟踪和变量。这对于理解逻辑故障比异常消息更有用。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-08-21T20:35:16.367

由于 abort() 而没有运行析构函数不是未定义的行为！

如果是这样，那么调用`std::terminate()`也是未定义的行为，那么提供它有什么意义呢？

`assert()`在 C++ 中和在 C 中一样有用。断言不是用于错误处理，而是用于立即中止程序。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-12-16T18:37:57.027

恕我直言，断言用于检查如果违反的条件，则使其他一切变得无稽之谈。因此，您无法从它们中恢复，或者更确切地说，恢复是无关紧要的。

我会将它们分为两类：

*   开发者罪过（例如返回负值的概率函数）：

> 浮动概率（）{返回-1.0；}
> 
> 断言（概率（）> = 0.0）

*   机器坏了（例如，运行你的程序的机器非常错误）：

> 诠释 x = 1;
> 
> 断言（x > 0）；

这些都是微不足道的例子，但与现实相差不远。例如，考虑使用向量返回负索引的朴素算法。或定制硬件中的嵌入式程序。或者更确切地说，因为*sh*t 发生了*。

如果有这样的开发错误，你不应该对实施的任何恢复或错误处理机制有信心。这同样适用于硬件错误。

# winforms - Winform ComboBox 绑定未按预期工作

> ID：12062368
> 
> 赞同：1
> 
> 时间：2012-08-21T20:16:03.483
> 
> 标签：winforms, binding, combobox

我是 VS2010 和 C# 的新手，我正在尝试将 VB6 应用程序转换为 .net，但我遇到了让 ComboBox 正常工作的问题。我试图在“数据绑定模式”中绑定一个组合框，但它不起作用。当运行我的测试时，ComboBox 仅显示与记录关联的整数，但不会显示与下级 ComboBox 数据源关联的“显示成员”。下拉列表正确显示（绿色、蓝色、黄色），如果我从列表中选择项目并单击保存，我会收到格式异常“输入字符串格式不正确”。但我的数据似乎正确。我已经阅读并尝试了所有内容，但对于我的生活，我似乎无法弄清楚我做错了什么。

希望有人能对此有所了解……</p>

我创建了一个测试，我从我的主表数据源中选择我的“ChoiceID”字段作为组合框类型。使用图形界面，我将“数据源”设置为“choiceBindingSource”。我将“显示成员”设置为“选择”。我将我的“价值成员”设置为“ChoiceID”。

注意：我以编程方式完成了此操作，结果相同。

**主**表：ID（整数），ChoiceID（整数）

数据：

*   1,1

*   2,1

*   3,2

**选择**表：ChoiceID(Integer)、Choice(Text)

数据：

*   1、绿色

*   2、蓝色

*   3、黄色

当我运行测试时，我的组合框显示 1 **NOT** “Green”。

**问题**：

首先，为什么 ComboBox 在 ComboBox binging 中没有正确地将 Master 表中的“ChoiceID”绑定到 Choice 表的“ChoiceID”？其次，当我的数据似乎采用正确的格式时，为什么我从下拉列表中选择和项目时会出现格式异常。

谢谢，JC

```
 public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    private void masterBindingNavigatorSaveItem_Click(object sender, EventArgs e)
    {
        this.Validate();
        this.masterBindingSource.EndEdit();
        this.tableAdapterManager.UpdateAll(this.tabTestDataSet);

    }

    private void Form2_Load(object sender, EventArgs e)
    {
        this.choiceComboBox.DataSource = choiceBindingSource;
        this.choiceComboBox.DisplayMember = "Choice";
        this.choiceComboBox.ValueMember = "ChoiceID";

       // TODO: This line of code loads data into the 'tabTestDataSet.Master' table. You can move, or remove it, as needed.
        this.masterTableAdapter.Fill(this.tabTestDataSet.Master);
        // TODO: This line of code loads data into the 'tabTestDataSet.Choice' table. You can move, or remove it, as needed.
        this.choiceTableAdapter.Fill(this.tabTestDataSet.Choice);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T00:50:28.010

您将需要与此 ( `Form2.Designer.cs`) 类似的行：

```
//
// choiceIdComboBox
//

//this.choiceIdComboBox.DataBindings.Add("SelectedValue", this.masterBindingSource, "choiceId", true);
this.choiceIdComboBox.DataBindings.Add("SelectedItem", this.masterBindingSource, "Choice", true); 
```

# magento - Magento：PDF 中的付款交易（如何）

> ID：12062371
> 
> 赞同：0
> 
> 时间：2012-08-21T20:16:08.747
> 
> 标签：magento, pdf, transactions, payment

在 admin/sales_order/view 我可以打印订单。现在我想将交易 ID 添加到 pdf 中。但是如何做到这一点？我知道它应该在 app/code/local/Mage/Sales/Model/Order/Pdf 中的某个地方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:24:19.017

像这样的东西可以帮助..

```
$orderData = $order->getPayment()->getData();
$additional = $orderData['additional_information']['authorize_cards'];
$keys = array_keys($additional);
$transactionId = $additional[$keys[0]]['last_trans_id']; 
```

# emma - 运行艾玛的麻烦

> ID：12062378
> 
> 赞同：0
> 
> 时间：2012-08-21T20:16:25.567
> 
> 标签：emma

作为 Android 系统研究和测试的一部分，我目前正在尝试覆盖 SDK 中的 Android 库（特别是 android.database.sqlite）。我正在关注[本](http://emma.sourceforge.net/userguide_single/userguide.html)使用 Emma 的指南，希望将 Emma 用作覆盖工具。但是，仅仅遵循本指南并运行示例程序似乎并不能很好地工作。我可以跑

```
java -cp out Main 
```

很好，但在我尝试跑步的那一刻

```
java emmarun -cp out Main 
```

它给了我以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: emmarun
Caused by: java.lang.ClassNotFoundException: emmarun
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: emmarun.  Program will exit. 
```

也许这只是我对艾玛问题缺乏经验，但谁能向我解释我应该如何做到这一点？顺便说一下，我有emma.jar文件当前保存在/usr/lib/jvm/java-1.6.0-sun-1.6.0.33.x86_64/jre/lib/（指南说放在jre/lib /ext/，但这不起作用，所以我工作的支持将它放在 lib/ 中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T01:13:33.353

也许你使用了错误的**emma.jar**

android的构建系统中有2个**emma.jar**。

一个用于**主机**（*在 PC 上运行*），另一个用于**目标**（*在电话上运行*）。

您的问题是使用**目标**执行**emmarun**命令。

* * *

在 /system/framework/emma.jar 下构建的一个是用于手机的。

构建系统 /external/emma/lib/emma.jar 中的一个用于执行命令。

# digital-certificate - 开发组的单一数字证书？

> ID：12062381
> 
> 赞同：0
> 
> 时间：2012-08-21T20:16:28.973
> 
> 标签：digital-certificate

我们有一个小型开发小组，需要使用 ClickOnce 来部署一些 Intranet 应用程序。小组是否应该为这些部署使用单个数字证书，或者每个开发人员都应该拥有自己的证书？（我还没有找到关于这个主题的任何明确的东西。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:26:26.200

不确定您的范围是什么，但专业应用程序通常由受信任的第三方签名，例如`Verisign`.

# git - git clone 所有远程仓库的地址

> ID：12062382
> 
> 赞同：0
> 
> 时间：2012-08-21T20:16:36.233
> 
> 标签：git

有没有办法用多个远程仓库克隆一个 git 项目？例如，除了“origin”之外，我还想有一些其他的远程仓库来推送和获取数据。是否可以从克隆的 git 项目中获取所有远程地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:26:14.210

> 例如，除了“origin”之外，我还想有一些其他的远程仓库来推送和获取数据。

是的，你可以拥有这个。

> 是否可以从克隆的 git 项目中获取所有远程地址？

如果您对原始存储库具有本地访问权限，则以下命令将为您工作。

```
git remote -v 
```

# webserver - 一个简单的投资组合网站需要多少 RAM？

> ID：12062384
> 
> 赞同：2
> 
> 时间：2012-08-21T20:16:38.757
> 
> 标签：webserver, vps

我正在尝试为自己和我的编程项目制作一个投资组合网站。因为我还将为朋友和家人制作一些其他网站，所以我选择了 VPS。

但是，我想知道 - 我需要多少 RAM？这些网站都不会运行任何特别繁重的软件，我也不希望有大量用户。（我正在查看的主机的基本计划是 300 MB，我猜这已经足够了。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:23:08.773

通常你需要的比你想象的要少。提供一个页面，尤其是一个只有一点业务逻辑的简单页面，对于大多数服务器来说并不需要太多的 RAM。当您开始提供计算繁重的页面、电影、高质量声音文件等时，您可能会注意到服务器负载增加。

我的建议是选择最小/最便宜的可用计划。首先监控您的使用情况，以衡量典型的流量和使用情况。届时，您可以根据自己的情况决定是否需要升级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:22:43.740

我目前在 VPS 上托管 10 个 WordPress 和其他网站，这些网站曾经有 256MB 的 RAM，但最近被主机升级到 512。这些网站每天获得 10 到 500 次点击，我确实在 WP 网站上运行了一些缓存。我正在运行的 VPS 上的 256MB RAM 没有问题。根据你的描述，听起来你会没事的。如果您确实看到自己的资源耗尽，对象缓存之类的东西会让您的生活更轻松，而无需为更强大的 VPS 支付更多费用。

# jquery - 奇怪的悬停事件问题

> ID：12062386
> 
> 赞同：0
> 
> 时间：2012-08-21T20:17:00.663
> 
> 标签：jquery

我对悬停事件有一个奇怪的问题。当我将鼠标悬停在元素 (.helpImg) 上时，它将在悬停函数内运行我的代码的 4-6 次。我不确定如何调试它。有人有想法吗？？非常感谢。

```
function test(){

console.log('testcall'); //this will only output 1 time

$('.helpImg').hover(function(){

         console.log('call'); //when hover the class, this will output multiple times (4~6 times randomly).          

         //the animation below will play multiple times too
          tooltip.css('display', 'block');
          tooltip.animate({ opacity: 0 }, 0);

          tooltip.animate({'opacity':'1','top':'-=10'},500);

        },function (){            
          $instance = $(this).css({'cursor': 'auto'});
          $('#tooltip-' + $instance.attr('id') ).hide(50);
          $(".js-tutorialTooltips").hide(50);
        })

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:21:45.217

您很可能多次注册悬停事件，请尝试此快速修复：

```
$('.helpImg').not('.registered').addClass('registered').hover(function() { 
  //... your code 
```

这会过滤掉具有 class 的 helpImg 节点，将 class`registered`添加`registered`到其他节点并在其他节点上注册`hover`函数。

然而，更好的解决方案是找出为什么您的悬停事件会被多次注册。在您的代码中，您似乎有一个 function `test`，其中包括注册悬停事件。如果您`test`多次调用，悬停将被多次注册。

所以解决这个问题的最好方法是`console.log('register hover')`在你的悬停事件处理程序之前，让它只被调用 1 次。

# xpages - 在 XPiNC 中使用对象标签和 pdf 时，Notes 客户端崩溃

> ID：12062388
> 
> 赞同：1
> 
> 时间：2012-08-21T20:17:17.763
> 
> 标签：xpages, xpinc

我的数据库中有一个 PDF 文件作为文件资源（test.pdf），下面的 xpage 将其显示为嵌入式对象：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

<xp:panel tagName="object">
    <xp:this.attrs>
        <xp:attr name="data" value="test.pdf"></xp:attr>
        <xp:attr name="type" value="application/pdf"></xp:attr>
        <xp:attr name="width" value="600"></xp:attr>
        <xp:attr name="height" value="600"></xp:attr>
    </xp:this.attrs>

    It appears your Web browser is not configured to display PDF files. No worries, just <a href='test.pdf'>click here to download the PDF file.</a>
</xp:panel>
</xp:view> 
```

它在网络浏览器（Firefox）中运行良好。当我第一次在 Notes 客户端 (XPiNC) 中打开 xpage 时，PDF 也显示为嵌入的。但是当我打开 xpage 几次时，客户端崩溃了。

我使用版本 8.5.3FP1。

你有什么建议吗？XPiNC 中是否禁止使用对象标签？

* * *

正如 Simon O'Doherty 的回答中所建议的那样，我检查了“IBM_TECHNICAL_SUPPORT”和“workspace\logs”文件夹中的所有文件，这些文件在客户端崩溃之后/之后被修改。

nsd 文件中没有 FATAL。

错误日志 1.xml：

```
<CommonBaseEvent creationTime="2012-08-21T22:08:27.093+02:00" globalInstanceId="ELc0a808f50001394acb55ed00000009" msg="Project facet jst.web has not been defined. It is used in plugin org.eclipse.wst.jsdt.web.core." severity="50" version="1.0.1">
<extendedDataElements name="CommonBaseEventLogRecord:level" type="noValue">
    <children name="CommonBaseEventLogRecord:name" type="string"> 
        <values>SCHWERWIEGEND</values>
    </children>
</extendedDataElements>
<sourceComponentId component="Expeditor 6.2" componentIdType="ProductName" instanceId="1327306362466" location="MBS-86" locationType="Hostname" subComponent="org.eclipse.wst.common.project.facet.core" threadId="4" componentType="http://www.w3.org/2001/XMLSchema-instance"/>
<situation categoryName="ReportSituation">
    <situationType xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ReportSituation" reasoningScope="INTERNAL" reportCategory="LOG"/>
</situation>
</CommonBaseEvent>´ 
```

控制台_MBS-86_2012_08_21@22_06_40.log：

```
[0548:0002-1230] 21.08.2012 22:27:14,34 DeskClientOpenInt> Calling CreateProgramRCP     pszRCPCmdLine[/authenticate ] bDeskProvisioningRestart [0]
[0548:0002-1230] 21.08.2012 22:27:14,37 DeskClientOpenInt> Executed CreateProgramRCP
[0548:0002-1230] 21.08.2012 22:27:21,35 DeskClientOpenInt> Calling CreateProgramRCP pszRCPCmdLine[/authenticate ] bDeskProvisioningRestart [0]
[0548:0002-1230] 21.08.2012 22:27:21,38 DeskClientOpenInt> Executed CreateProgramRCP
[0548:0002-1230] 21.08.2012 22:27:27,27 DeskClientOpenInt> Calling CreateProgramRCP pszRCPCmdLine[/authenticate ] bDeskProvisioningRestart [0]
[0548:0002-1230] 21.08.2012 22:27:27,29 DeskClientOpenInt> Executed CreateProgramRCP
[0548:000E-0D34]  Thread=[0548:000E-0D34]
[0548:000E-0D34] Stack base=0x05F70084, Stack size = 2560 bytes
[0548:000E-0D34] PANIC: The notes2 process (pid=2052) exited unexpectedly. 
```

* * *

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:53:27.287

处理崩溃。

1.  在数据文件夹下的 IBM_TECHNICAL_SUPPORT 文件夹中应该有一个 NSD 文件。打开该文件并搜索 FATAL 并发布致命线程。

2.  如果没有 FATAL 堆栈，则检查 workspace\logs 文件夹中的任何 Javacore 或错误日志。对于错误日志，您需要查找 SEVERE 参考，因为这些最有可能导致崩溃。

3.  还要检查 IBM_TECHNICAL_SUPPORT 文件夹中的 XPages 日志是否有任何错误。

如果没有这些细节，就不可能诊断出根本原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T08:27:18.057

从 Adob​​e Reader 8.1.4 升级到 Adob​​e Acrobat X/ Reader 10.1.4 解决了这个问题，更新后没有发生崩溃。

# asp.net - OCIEnvCreate 失败，返回代码 -1，但错误消息文本不可用。

> ID：12062390
> 
> 赞同：0
> 
> 时间：2012-08-21T20:17:19.810
> 
> 标签：asp.net, oracle, iis-7

我有一个连接到远程 oracle 数据库的 asp.net 应用程序。当我在 iis7 中将应用程序配置为自己的单独应用程序时，一切正常。由于我希望应用程序与 iis 中的默认网站在同一端口 (80) 上运行，因此我通过右键单击 iis7 中的“默认网站”并单击添加应用程序来配置应用程序，然后选择路径我的申请是。我应该能够通过转到“localhost/ *applicationName* ”进行连接，但我收到以下错误：

OCIEnvCreate 失败，返回代码 -1，但错误消息文本不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:19:00.613

尝试连接到 Oracle 数据库时，您收到以下错误：“OCIEnvCreate failed with return code -1 but error message text was not available”

原因：

1) 您在 Windows 7 上使用不受支持的 Oracle 客户端版本（早于 11.2）。

2) 以前安装 Oracle 客户端的 DLL 留在系统上，导致冲突。

解决方案：

1) 安装受支持的 Oracle 客户端版本。

2) 在本地机器上搜索“OCI.DLL”。如果您在 ORACLE_HOME 以外的任何位置发现此文件的任何实例，请重命名或删除它。如果有疑问，请卸载 Oracle 客户端，然后再次执行搜索。剩下的任何东西都是罪魁祸首。

# php - Apk 到 Bar Repackaging：远程调用时出现 batchbar-signer 错误

> ID：12062402
> 
> 赞同：1
> 
> 时间：2012-08-21T20:17:51.393
> 
> 标签：php, iis, command-prompt, blackberry-playbook, blackberry-android

我已经为此困扰了几个小时，并且想知道是否有人能够阐明这一点。

我正在使用 Blackberry 的 APK 重新打包命令行工具将 apk 重新打包为 bar 文件。 [https://developer.blackberry.com/android/documentation/preparing_android_apps_for_bbtos_1729415_11.html](https://developer.blackberry.com/android/documentation/preparing_android_apps_for_bbtos_1729415_11.html)

我创建了 .bat 文件以一次性执行重新打包和代码签名。我在运行 Windows server 2008 R2 标准版的机器上创建并运行了它。每次我运行它时，它都能完美运行。给我一个漂亮的、签名的、Playbook App World 就绪的 bar 文件。这是脚本：

```
echo %USERDOMAIN%\%USERNAME%
call apk2bar <apk_location> <android sdk location>
call batchbar-signer <bar_location> <developer_certificate> <keystore_password> <csk_password> 
```

当我使用 PHP exec 命令通过 PHP 远程运行此脚本时，问题就出现了。它创建了条形图，但在代码签名部分死亡。这是错误：

```
 Error: Certificate chain not found for: RDK.  RDK must reference a valid KeyStore key entry containing a private key and corresponding public key certificate chain. 
```

我觉得这很奇怪，因为它表明我的密钥库（我猜是 .p12 文件？）不存在或无效。但是，为什么当我从命令行本地运行 .bat 文件时它会不断工作呢？

我认为这可能是因为我没有为脚本的 apk2bar 部分指定 <-a author_name> 参数，但即使在我填写之后它仍然不起作用。

可能有用的额外信息：

- 此 PHP 文件位于 bat 脚本所在的同一台 Windows 机器上。我通过远程机器上的网络浏览器调用它。

*   Windows 机器正在运行 IIS 6.0

*   在运行 PHP 脚本时回显 %USERNAME% 时，它会在末尾显示带有美元符号 ($) 的机器名称。当我从命令行调用脚本时，%USERNAME% 是我当前登录的用户。

*   从命令行运行时，我登录的帐户是管理员帐户。

任何帮助将不胜感激！

# c# - 带有表类型参数的存储过程返回数据但 SqlDataAdapter 不会填充

> ID：12062413
> 
> 赞同：0
> 
> 时间：2012-08-21T20:18:09.310
> 
> 标签：c#, sql-server-2008, stored-procedures, sqldatatypes, sqldataadapter

我将数据表传递给存储过程（使用表类型）以一次更新多条记录。SQL profiler 显示存储过程的执行和记录的更新；但是，我还将数据集返回到 SqlDataAdapter。当我在 SSMS 中执行此操作时，我得到了结果。当我在代码中运行它时，没有收到行。

有任何想法吗？我不知道为什么 SqlDataAdapter 没有被填充。奇怪的是，我可以得到一个表数，但没有任何表的行。

```
CREATE PROCEDURE [dbo].[SGT_UpdateSGT]
 @SGT_GuidelinesTbl As [dbo].[SGT_GuidelinesTbl] Readonly
AS
BEGIN
 SET NOCOUNT ON;
 update g set Disposition=sgt.Disposition, DispositionDate=GETDATE() from SGTGuidelineRequests g inner join @SGT_GuidelinesTbl sgt on g.pkid=sgt.pkid

 select u.ForeName, u.Email, g.* 
 from @SGT_GuidelinesTbl sgt
 inner join SGTGuidelineRequests g on g.pkid=sgt.pkid
 inner join Users u on u.NBID=g.SubmittedBy
END
GO 
```

c#代码。会话正在填充

```
DataSet dataSet = new DataSet();
DataTable queue = (DataTable)Session["SGTKeepDeleteQueue"];
using (SqlConnection sqlConnection = new SqlConnection(SQLConn.CWFMO()))
{
  sqlConnection.Open();
  SqlCommand sqlCommand = new SqlCommand("SGT_UpdateSGT", sqlConnection);
  sqlCommand.CommandType = CommandType.StoredProcedure;

  SqlParameter guidelinesTblParam = new SqlParameter();
  guidelinesTblParam.ParameterName = "@SGT_GuidelinesTbl";
  guidelinesTblParam.SqlDbType = SqlDbType.Structured;
  guidelinesTblParam.Value = queue;
  sqlCommand.Parameters.Add(guidelinesTblParam);

  SqlDataAdapter sqlDataAdapter = new SqlDataAdapter(sqlCommand);
  sqlDataAdapter.Fill(dataSet);
} 
```

这就是 SQL Profiler 收到的内容。当我执行这个时，我得到至少 1 行数据。

```
declare @p1 dbo.SGT_GuidelinesTbl
insert into @p1 values(1,N'Approved',N'8/23/2012 12:00:00 AM')

exec SGT_UpdateSGT @SGT_GuidelinesTbl=@p1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T21:50:30.830

我更改了 SqlDataAdapter 的名称，它可以工作。我不知道为什么，我没有在文件的其他任何地方命名它。清洗溶液也没有解决这个问题。至少它有效。

感谢您的建议和反对票。

# firefox - 判断 HTTP 请求/响应是否是主框架

> ID：12062419
> 
> 赞同：2
> 
> 时间：2012-08-21T20:18:36.627
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在使用“http-on-modify-request”上的观察者来分析 HTTP 请求（以及与相应的其他观察者的响应）。

是否可以确定 HTTP 请求/响应是否是主框架加载（实际页面 DOM）？与其他资源（图像、css、sub_frame 等）相反。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:14:05.333

文档有您在[此处](https://developer.mozilla.org/en-US/docs/Code_snippets/Tabbed_browser#Getting_the_browser_that_fires_the_http-on-modify-request_notification)寻找的大部分答案，我在下面对其进行了修改以与 addon-sdk 一起使用。

您可以通过将位置与位置进行比较来查看 IFRAME `top.document`。

我认为没有一种简单的方法可以检测图像的加载等，因此您可能只想注意不是 IFRAME 的第一次点击，并将其他所有内容视为 css/image/script 内容加载。

```
var chrome = require("chrome");

var httpmods = {
  observe : function(aSubject, aTopic, aData) {
    console.log("observer", aSubject, aTopic, aData);
      aSubject.QueryInterface(chrome.Ci.nsIHttpChannel);
      var url = aSubject.URI.spec;

      var dom = this.getBrowserFromChannel(aSubject);
      if (dom) { 
        if (dom.top.document && dom.location === dom.top.document.location) {
          console.log("ISN'T IFRAME");
        } else {
          console.log("IS IFRAME");
        }
      }
  },
  getBrowserFromChannel: function (aChannel) {
    try {
      var notificationCallbacks =
        aChannel.notificationCallbacks ? aChannel.notificationCallbacks : aChannel.loadGroup.notificationCallbacks;

      if (!notificationCallbacks)
        return null;

      var domWin = notificationCallbacks.getInterface(chrome.Ci.nsIDOMWindow);
      return domWin;
    }
    catch (e) {
      dump(e + "\n");
      return null;
    }
  }
}

require("observer-service").add("http-on-modify-request", httpmods.observe, httpmods); 
```

# php - 将源模型添加到magento中的属性

> ID：12062423
> 
> 赞同：1
> 
> 时间：2012-08-21T20:18:52.713
> 
> 标签：php, magento

我创建了一个安装脚本，使用下面的脚本向客户添加两个字段。

但我得到这个错误。

```
Source model "" not found for attribute "dob_month" 
```

我不是在第一行定义模型吗？那实际上是做什么的？解决此问题的最佳方法是什么？

```
$setup = new Mage_Eav_Model_Entity_Setup('core_setup');

$setup->addAttribute('customer', 'dob_month', array(
    'label'     => 'Month',
    'type'      => 'varchar',
    'input'     => 'dropdown',
    'visible'   => true,
    'required'  => true,
    'position'  => 1,
    'option'    => array (
        'value' => array (
            'optionone'    => array('January'),
            'optiontwo'    => array('February'),
            'optionthree'  => array('March'),
            'optionfour'   => array('April'),
            'optionfive'   => array('May'),
            'optionsix'    => array('June'),
            'optionseven'  => array('July'),
            'optioneight'  => array('August'),
            'optionnine'   => array('September'),
            'optionten'    => array('October'),
            'optioneleven' => array('November'),
            'optiontwelve' => array('December')
        )
    )
));

$setup->addAttribute('customer', 'dob_year', array (
    'label'     => 'Year',
    'type'      => 'varchar',
    'input'     => 'text',
    'visible'   => true,
    'required'  => true,
    'position'  => 1
)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T01:24:02.027

如果您已经添加了该属性，您将希望用于`updateAttribute`在`eav_attribute`表中设置源模型值。

```
<?php

$installer = Mage::getResourceModel('customer/setup','default_setup');
/***
 * When working with EAV entities it's important to use their module's setup class.
 * See Mage_Customer_Model_Resource_Setup::_prepareValues() to understand why.
 */

$installer->startSetup();

$installer->updateAttribute(
    'customer',
    'dob_month',
    'source_model', //a.o.t. 'source'
    'whatever/source_model',
)

$installer->endSetup(); 
```

如果没有，那么您可以使用`addAttribute()`，由于`Mage_Eav`设置类的`_prepareValues()`方法，它需要 source_model 列的别名，如 Alexei 的回答中所示（'source' 而不是 'source_model'）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T21:45:58.030

当 Magento 需要知道您的属性的可能值时，使用源模型。例如，在为您的属性呈现下拉列表时。所以不，你没有定义它。如果我的记忆没有让我失望，您可以通过将“源”添加到属性定义数组来做到这一点。就像是：

```
...
'source' => 'eav/entity_attribute_source_table'
... 
```

这意味着所有可能的选项都存储在表 eav_attribute_option 和 eav_attribute_option 中。因此，如果您的安装脚本选项成功添加到这些表中，那应该可以工作。或者您可以编写自己的源模型，我更喜欢它。

# iphone - BAD ACCESS 异常 performSelector:WithObject: 方法

> ID：12062428
> 
> 赞同：1
> 
> 时间：2012-08-21T20:19:10.023
> 
> 标签：iphone, objective-c, ios, exc-bad-access

当我从一个确实实现了我试图调用的方法的对象中调用 performSelector:withObject: 时，我得到了一个 EXC_BAD_ACCESS 异常。这是我的代码

```
SEL newSelector = NSSelectorFromString(@"mySelector:withCustomObject:");
[self performSelector:newSelector withObject:myCustomObject]; 
```

这会导致崩溃。但是，当我这样做时

```
[self performSelector:@selector(mySelector:withCustomObject:) withObject:myCustomObject]; 
```

有用。

关于为什么会发生这种情况的任何想法？PS：没有一个参数是零。

更多代码：

```
// My code to call this method
SEL newSelector = NSSelectorFromString(@"mySelector:withCustomObject:");
[self performSelector:newSelector withObject:self withObject:myCustomObject];

// this code is NOT called.
- (void) mySelector:(jObject *)sender withCustomObject:(jEvent *)customObject
{
    NSDictionary *handlerData = [aProperty objectAtIndex:[event positionInMethodStack]];
    NSString *newTitle = [handlerData objectForKey:@"newTitle"];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T20:41:19.207

`"mySelector:withCustomObject:"`是带有 2 个参数的方法的签名，例如

```
- (void)mySelector:(id)firstArgument withCustomArgument:(id)secondArgument { ... } 
```

但是你打电话`performSelector:withObject:`，它发送一条只有一个参数的消息`mySelector`。第二个参数是未定义的，这可能会导致崩溃。

因此，如果`mySelector`实际上有 2 个参数，请使用`performSelector:withObject:withObject:`，否则修复选择器的签名。

# version-control - 我们可以在基本清晰案例项目的配置规范中省略元素 * /main/LATEST 吗？

> ID：12062431
> 
> 赞同：2
> 
> 时间：2012-08-21T20:19:15.393
> 
> 标签：version-control, clearcase, config-spec

在我拥有的一个基本明确的案例项目中，交给我的配置规范如下所示：

```
element * CHECKEDOUT
element * .../PROJ_1.5.0/LATEST
element * .../main/LATEST -mkbranch PROJ_1.5.0
element * /main/LATEST 
```

我在他的指南中阅读了一些配置规范： [http](http://www.philforhumanity.com/ClearCase_Support_17.html) : //www.philforhumanity.com/ClearCase_Support_17.html 在我看来，在我的配置规范中，最后一行没有任何价值。因为 `element * /main/LATEST`已经在倒数第二行了。我的理解正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:22:54.093

最后一行是选择规则**停止器**：如果所有其他规则都失败，它将始终被选中。
（那是因为总是有一个名为`main`-- 除非你重命名它的分支，但这种情况很少见 -- 并且总是[至少有一个版本`0`-- 占位符 -- 对于](https://stackoverflow.com/a/5309714/6309)在 ClearCase 中添加到源代码控制的每个元素）

所以拥有它*很*重要。

假设根本没有选择一个目录（通过任何其他规则），所有目录内容都将不可见，即使子目录及其内容可能已被其中一个规则选择。
但是使用`element * /main/LATEST`，您可以确定*所有*元素都将是可见的，在您的规则选择的版本中，或者默认情况下，在`/main/LATEST`。

* * *

话虽如此，重新阅读您的配置规范，您可以将最后两行替换为：

```
element * /main/LATEST -mkbranch PROJ_1.5.0 
```

`.../main/LATEST`没有意义：它的意思是“主要来自任何其他分支”，这不是您在正常配置规范中看到的：所有其他分支都来自主要，而不是相反。

因此，使用最后一条规则，您不仅可以确定您会看到所有元素，而且如果您签出它们，您将创建并进入分支`PROJ_1.5.0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T12:17:30.153

如果您不想查看分支中不存在的 main/LATEST 文件，请使用

```
element -directory * /main/LATEST 
```

然后只有来自 main/LATEST 的目录和来自您的分支的文件是可见的。

# objective-c - 退出应用程序后，如何返回到我离开的完全相同的屏幕？

> ID：12062433
> 
> 赞同：1
> 
> 时间：2012-08-21T20:19:22.807
> 
> 标签：objective-c, ios

将应用程序置于后台模式后，是否有一种快速简便的方法可以让应用程序返回同一屏幕？

我知道有专门针对这些东西的框架，但是有没有人毫不费力地完成它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:31:32.240

多任务处理应该启用此功能，而设备有足够的内存来保持您的应用程序打开。否则如何使用[NSUserDefaults](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)存储对您的视图的字符串引用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:35:03.093

从 iOS 5.1 开始，没有快速简便的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T21:38:48.953

在您的应用程序委托中，向`applicationDidenterBackground:`通过 NSUserDefaults 存储当前页面的方法添加一行。

然后在该`applicationWillEnterForeground:`方法中，加载保存的值并恢复页面。

# tfs - 如果我安装 VS2010，TFS 2012 Express 似乎无法开箱即用？

> ID：12062439
> 
> 赞同：0
> 
> 时间：2012-08-21T20:19:49.443
> 
> 标签：tfs, permissions

当我尝试在全新安装后将新项目添加到源代码管理时出现此错误......似乎当我没有安装 VS2010 时我没有得到这个..

任何人都可以帮忙吗？我想我需要权限..但谁需要权限到底是什么？

TF206018: 无法将项目添加到源代码管理，因为尚未设置任何团队项目，或者因为您无权访问当前集合中的任何团队项目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T20:35:35.490

对不起..我是一个假人..一个集合..需要一个团队项目，然后你将项目添加到源代码管理中。

# jquery - jQuery 从外部页面获取特定内容

> ID：12062442
> 
> 赞同：0
> 
> 时间：2012-08-21T20:20:14.937
> 
> 标签：jquery, jquery-ui, jquery-selectors

所以我有类似的东西

```
<ul>
<li> <a href="123.html">123</a></li>
<li> <a href="abc.html">abc</a></li>
</ul> 
```

这个站点在我的 INDEX.HTML 文件中。除了加载更多列表和列表项。链接到的每个 HTML 页面都有这样的部分：

```
<ul>
<li><strong>Time: </strong>12:00</li>
</ul> 
```

我想要的是当用户看到 INDEX.HTML 页面时，时间被添加到末尾（来自相对链接）所以它看起来像

*   123 - 12:00
*   美国广播公司 - 13:00

有人可以帮忙吗？我意识到我可能需要 contents() 和 fine() 但没有快速得到。所以基本上对于每个链接，我们都会转到有问题的 URL，抓住时间并将其添加到 INDEX.HTML 上的原始行

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:40:46.197

如果我理解你的问题，我相信你想加载每个内页的内容来显示主菜单中的信息。如果是这种情况，这对性能来说是个坏主意。

如果您想这样做，您首先需要使用该[`$.get`](http://api.jquery.com/jQuery.get/)函数加载 HTML 内容。然后使用结果，搜索所需的元素。

**更新**

我在这里更新了[示例](http://jsbin.com/acagif/2/)。它只有一个链接，但现在与您的代码结构一起显示。

基于它，我相信您的`index.html`代码将是这样的：

```
$("li a").each(function() {
    var src = $(this).attr("href");
    $.get(src, function(data) {
      var element = $("<div>").html(data);
      var time = element.find("li").contents().last().text();
      $("li").append(" - " + time);
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:44:30.730

这个想法可能如下：

1.  遍历`li`s。
2.  获取孩子的`href`属性。`a`
3.  向该页面发送 ajax 请求。
4.  使用 jQuery 解析响应并找到适当的文本。
5.  将该文本附加到`li`.

在 jsFiddle 上生成单独的页面并不容易，因此您必须根据自己的情况对其进行一些更改。此外，您可能希望使选择器更严格（`ul strong`这是我可以用您的示例弥补的最佳选择）。

[http://jsfiddle.net/3JQDz/](http://jsfiddle.net/3JQDz/)

```
$("li").each(function() {
    var $li = $(this);
    var href = $li.find("a").attr("href");  // use this in your real case

    $.ajax({
        type: "POST",
        url: "/echo/html/",  // this is just the way to use ajax on jsFiddle
        data: {
            html: "<ul><li><strong>Time: </strong>12:00</li></ul>"
        },
        success: function(html) {
            // full document -> only the li -> its child nodes -> the last one (the text node) -> its text
            var time = $(html).find("li").contents().last().text();
            $li.append(" - " + time);
        }
    });
}); 
```

# dns - 将两组私有名称服务器指向一对 IP

> ID：12062444
> 
> 赞同：0
> 
> 时间：2012-08-21T20:20:37.260
> 
> 标签：dns, bind, named, nameservers

由于可靠性问题，我正在将服务器从一个提供商迁移到另一个提供商。

无论如何，我拥有域名 jeffkee.com 已经有一段时间了，所以

```
ns1.jeffkee.com -> xxx.xxx.xxx.x (whatever the previous IP is.. is irrelevant)
ns2.jeffkee.com -> xxx.xxx.xxx.x (whatever the previous IP is.. is irrelevant) 
```

它们都连接到服务器**I**（我们将其称为**I**用于 Inmotion 托管）。我有几十个网站，这些网站都为这些名称服务器设置了域。

在迁移时，我设置了另一个域，sonika.ca，这样我就可以分阶段迁移，以确保我所有的 PHP 应用程序的服务器合规性等。所以现在我有

```
ns1.sonika.ca -> 64.207.177.33
ns2.sonika.ca -> 64.207.177.100 
```

指向位于**M**的新服务器（我们将其称为**M**表示媒体殿堂），指向服务器 M 上的两个 IP 地址。

所以我的问题是.. 如果我迁移所有文件和数据库等并将它们设置在新服务器**M**上，然后只需在 Netfirms（域注册商）更新我的域 jeffkee.com 以便 ns1.jeffkee.com /ns2.jeffkee.com 指向服务器 M 上的新 IP，这可行吗？或者这是否会导致一些我不知道的奇怪 DNS 问题？

本质上，这是我提出的最终结果：

```
ns1.sonika.ca & ns1.jeffkee.com -> 64.207.177.33
ns2.sonika.ca & ns2.jeffkee.com -> 64.207.177.100 
```

这样，我就不必引导数十人了解如何为他们的域一个一个更新他们的名称服务器......这可能是一项乏味的任务。

谷歌搜索返回了一些模棱两可的结果，其中大多数都在讨论 ns1 和 ns2 是否应该都具有相同的 IP 或不同的 IP 等，所以我转向这里寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:13:08.617

您可能会遇到胶水记录的一些问题，因为注册商的名称服务器的 IP 地址与您迁移到的不同，因此任何查询层次结构的人都可能获得旧的 IP 地址。

我的建议是迁移数据并确保正确配置新提供商上的所有 DNS。然后更新旧提供商上的区域记录以指向新托管服务提供商上的资源。然后您可以逐步浏览每个区域并更新注册商以指向新的提供商。迁移所有内容后，请放弃旧的提供程序。

希望这可以帮助。

# unix - 在 Cygwin 中使用 SSH - 调用本地程序

> ID：12062445
> 
> 赞同：0
> 
> 时间：2012-08-21T20:20:40.210
> 
> 标签：unix, scripting, ssh, grep, cygwin

我正在执行一项任务，我需要远程连接到我公司的 UNIX 机器并解析出一组特定的日志条目。我已经找到了一种使用 Grep 和 -C 标志的方法，但是安装在这些机器上的 UNIX 版本不支持该功能。我考虑过的一种替代方法是通过 Cygwin 在我的本地计算机上完成工作，并使用本地版本的 Grep 来处理此任务。但是，这些日志特别大，超过 50 兆字节，并且与盒子的连接非常慢，因此需要几个小时才能完成下载。

我的主要问题是，是否可以通过 SSH 远程连接到远程服务器，但能够调用某些程序的本地安装版本？例如，如果我通过 SSH 连接到服务器，是否可以使用本地版本的 Grep 而不是远程系统的 Grep 版本？

我尝试过使用 Awk 和 Sed 做类似的事情，但没有取得太大的成功。在这一点上，除了长时间的下载之外，我不确定我还有什么其他选择。有什么建议吗？提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:24:34.593

即使您可以将远程文件与本地应用程序一起使用，您仍然会下载整个日志文件 - ssh 允许输出/输入在框之间传递，但您实际上并没有在本地机器上运行本地 grep - 它将是远程机器将其文件发送到您的本地 grep。

一种替代方法是在通过 ssh 发送日志文件之前对其进行 gzip 压缩，例如

```
ssh user@remotebox 'gzip -9 - logfile'|gzcat -|grep whatever 
```

您仍然会发送整个日志文件，但日志文件往往压缩得非常好，因此您只会发送原始数据的一小部分（例如，几兆与 50 未压缩）。

或者，您可以尝试在远程机器上从源代码编译 gnu grep，假设这些机器上有适当的编译器工具链。

# ios - OS X：将 .dylib 转换为 .a/.o（动态到静态）？

> ID：12062451
> 
> 赞同：6
> 
> 时间：2012-08-21T20:21:12.410
> 
> 标签：ios, static-libraries, dylib, tbb, dynamic-library

假设我已经阅读[了这个警告](http://threadingbuildingblocks.org/wiki/index.php?title=Using_TBB#Is_there_a_version_of_TBB_that_provides_statically_linked_libraries.3F)，并且我仍然想使用 TBB 作为静态链接库。（假设我在不允许用户创建自己的 dylib[的环境](https://stackoverflow.com/questions/3723856/difference-between-static-and-dynamic-libraray-in-xcode-for-iphone)中工作。）但我真的不想重写 TBB makefile 来生成 libtbb.a 而不是 libtbb.dylib。

是否有一种简单的命令行方法可以将 libtbb.dylib 转换为具有相同入口点的 libtbb.o？

*我听到了一个*很好的论据，不能从静态到动态。即：动态库需要是PIC，将非PIC静态库转换为PIC是不可行的。但据我所知，这个论点并不适用于另一个方向。

[有人说在 Windows 上将 .dll 转换为 .a 是不可能的，但我](https://stackoverflow.com/questions/2576910/how-to-convert-a-dynamic-dll-to-static-lib)认为他们只是在谈论不可能将 .dll 或 .exe 破坏回其原始 .o 文件，不一定说这是不可能的创建具有相同内容的可链接 .o 文件。此外，Windows 上的情况[比“真实” PIC 稍微奇怪](http://msdn.microsoft.com/en-us/magazine/bb985014.aspx)，尽管我认为这无关紧要。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T11:21:22.103

英特尔线程构建模块 (TBB)[以二进制形式提供，](http://threadingbuildingblocks.org/download.php)适用于 Windows、Mac 和 Linux。如果您希望`libtbb.dylib`在 iOS 上使用 Mac 发行版，那么您就不走运了。Mac 发行版面向 Intel（32 位和 64 位）。由于 iOS 在 ARM 处理器上运行，因此即使您找到了将动态库转换为静态库的方法，您也无法使用它。

如果您在`libtbb.dylib`其他地方找到了针对 ARM 的文件，那么您可能可以在 iOS 上使用它。实际上可以在 iOS 上加载动态库。查看[dlopen(3)](http://developer.apple.com/library/ios/documentation/system/conceptual/manpages_iphoneos/man3/dlopen.3.html)手册页。

最后，您应该阅读有关[Grand Central Dispatch (GCD)](http://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)的内容，它是对 iOS 和 OS X 中多核硬件上并发代码执行的内置*支持。*

# mongodb - 如何在 Mongo Shell CLI 中使用脚本

> ID：12062461
> 
> 赞同：7
> 
> 时间：2012-08-21T20:21:49.387
> 
> 标签：mongodb

我希望能够导入一个常用工具库，以便更轻松地使用 MongoDB。但是，我还没有发现一个容易将外部脚本导入 Mongo CLI 的方法。理想情况下，这将类似于 Node.js 要求。

默认情况下，我怎样才能在 Mongo CLI 中工作？

或者，有没有其他方法可以解决外部库依赖？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T20:43:01.393

`mongo`将 JavaScript 加载到shell中有几个选项：

1) 将 JavaScript 保存到`.mongorc.js`您的主目录中。

2) 将 JavaScript 保存到[全局`mongorc.js`](http://docs.mongodb.org/manual/reference/program/mongo/#mongo-global-mongorc-file)文件 (MongoDB 2.6+) 中，该`.mongorc.js`文件在您的主目录中的文件之前进行评估。

3）`load('filename.js')`从外壳（或其中一个`mongorc.js`文件）中使用。

4)使用集合[将您的 JavaScript 存储在服务器上，](http://docs.mongodb.org/manual/tutorial/store-javascript-function-on-server/)并且.`system.js``db.loadServerScripts()`

对于常见的 JavaScript 函数，第一个选项是最典型的方法。

# mongodb - MongoDB 匹配 2 标准

> ID：12062462
> 
> 赞同：1
> 
> 时间：2012-08-21T20:21:54.887
> 
> 标签：mongodb

鉴于我的图像示例中的集合，是否可以通过 ID 检索以及是否“元素在数组中”？

如您所见，我可以找到数组中包含该元素的所有记录，但是当我向下钻取并通过 ID 找到记录时，它会引发错误，我怀疑我的语法错误

* * *

这是我在 SO [https://chat.stackoverflow.com/transcript/message/5006697#5006697上聊天的链接](https://chat.stackoverflow.com/transcript/message/5006697#5006697)

提前致谢

*   凸轮 ![在此处输入图像描述](../Images/af07606bf71fbd3cd6c4b85a82e1a6dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:50:49.647

您基本上`$in`在投影字段中（您想要返回的内容），因为您提前关闭了标准文档（您想要找到的内容）。试试这个：

```
db.users.find( {'_id':1, 'companies-visited': { $in:["stocktwits"]}}) 
```

# linux - linux强制文件锁

> ID：12062466
> 
> 赞同：4
> 
> 时间：2012-08-21T20:22:33.057
> 
> 标签：linux, locking, protection

在 Linux`dd`上，我可以在硬盘驱动器上创建一个文件，然后在 dd 仍在进行时在 Nautilus 中将其删除。

Linux 可以强制强制文件锁定来保护 R/W 吗？

[编辑] 最初的问题不是关于 linux 文件锁定功能，而是关于 linux 中的一个假定错误，在这里复制它，因为它在下面得到回应，其他人可能有同样的问题。

> 人们一直告诉我 Linux/Unix 是更好的操作系统。我现在在 Linux 上编写 Java 并遇到一个问题，我可以很容易地重现：我可以在我的硬盘驱动器上 dd 一个文件并在 dd 仍在进行时在 Nautilus 中删除它。为什么linux不能强制强制文件锁来保护R/W？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T11:29:58.730

要在 Linux 上进行强制锁定，必须使用该`-o mand`选项挂载文件系统，并且您必须设置`g-x,g+s`文件的权限。也就是说，您必须禁用组执行，并启用 setgid。一旦执行此操作，所有访问都将根据文件描述符`EAGAIN`上的值阻塞或出错。`O_NONBLOCK`但请注意：“在所有已知版本的 Linux 中强制锁定的实现都受到竞争条件的影响，这使其不可靠……因此，不建议依赖强制锁定。” 见`fcntl(2)`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-21T20:45:29.703

你不需要锁定。这不是错误，而是选择，您的假设是错误的。

文件系统使用引用计数，只有当文件的所有硬链接都被删除并且所有文件描述符都关闭时，它才会将文件标记为空闲。

这种方法允许安全的文件系统操作，例如，Windows 不允许。删除、移动和重命名正在使用的文件等操作，无需锁定或破坏任何内容。

尽管删除了文件，您的`dd`操作仍将成功，这实际上将推迟到`dd`完成。

[http://en.wikipedia.org/wiki/Reference_counting#Disk_operating_systems](http://en.wikipedia.org/wiki/Reference_counting#Disk_operating_systems)

[编辑]我的回答现在没有多大意义，因为问题是由其他人编辑的。最初的问题是关于 linux 中的一个假定错误，而不是关于 linux 是否可以锁定文件：

> 人们一直告诉我 Linux/Unix 是更好的操作系统。我现在在 Linux 上编写 Java 并遇到一个问题，我可以很容易地重现：我可以在我的硬盘驱动器上 dd 一个文件并在 dd 仍在进行时在 Nautilus 中删除它。为什么linux不能强制强制文件锁来保护R/W？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T20:31:27.650

Linux 和 Unix 操作系统可以强制执行文件锁定，但默认情况下不会这样做，因为它的多用户设计。`flock`尝试阅读和的手册页`fcntl`。这可能会让你开始。

# perl - `perl -ane`，抓取所有参数直到结束（可变数量的参数）？

> ID：12062468
> 
> 赞同：1
> 
> 时间：2012-08-21T20:22:37.550
> 
> 标签：perl, bash

我有一个非常凌乱的 perl 脚本（我不是 Perl 大师），就是这个：

```
perl -ane '($h,$m,$s) = split /:/, $F[0];
           $pid = $F[1];
           $args = $F[2]." ".$F[3]." ".$F[4]." ".$F[5]." ".$F[6]." ".$F[7]." ".$F[8]." ".$F[9]." ".$F[10]." ".$F[11]." ".$F[12]." ".$F[13]; 
    if(($h == 1 && $m > 30) || ($h > 1)) {
        print "$h :: $m $kb $pid\nArguments:\n$args\n\n "; kill 9, $pid }' 
```

我正在寻找一种方法，而不是使用所有这些连接`$arg`来表示类似`$arg=$F[2-end]`

我很想得到任何帮助:)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T20:24:50.573

```
$args = join " ", @F[2..$#F]; 
```

`$#arrayname`是 的最后一个元素的索引`@arrayname`；`@arrayname[$start..$end]`为您提供一个以 开头`$arrayname[$start]`和结尾的子数组`$arrayname[$end]`，并包含其间的所有元素。把它们放在一起，你就得到了“从数组到数组末尾的`@F[2..$#F]`所有元素”。`@F``$F[2]`

然后，您可以`join`将所有这些数组元素连接成一个字符串；第一个参数告诉 Perl 在其余参数之间添加什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T20:48:46.830

不要使用**-a** utosplit，而是首先考虑限制要拆分的字段数量。

```
($t, $pid, $args) = split " ", $_, 3;
($h, $m, $s) = split /:/, $t; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T20:52:58.133

您也可以在 bash 中执行此操作：

```
while read -r time pid args; do
    IFS=: read -r h m s <<< $time
    (( $h*60 + $m > 90 )) && {
        # I don't see where $kb was defined in the original code
        cat <<EOF
$h:$m $kb $pid
ARGUMENTS
$args

EOF
        # Are you sure a more gentle kill won't work?
        # kill -9 should be the last resort for buggy code
        kill "$pid"
    }
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T00:32:11.243

你总是可以写一个*程序*。没有人会因此而恨你，你可能会从能读懂你代码的人那里得到感谢。

它看起来像这样，虽然你没有说`$kb`从哪里来

```
use strict;
use warnings;

while (<>) {
  my ($time, $pid, @args) = split;
  my ($h, $m) = split /:/, $time;
  if ( $h > 1 or $h == 1 and $m > 30 ) {
    print "${h}::$m $kb $pid\n";
    print "Arguments:\n";
    print "@args\n\n";
    kill 9, $pid
  }
} 
```

# android - 适用于安卓设备的蓝牙应用

> ID：12062473
> 
> 赞同：-1
> 
> 时间：2012-08-21T20:23:03.743
> 
> 标签：android, bluetooth

我想为android设备开发一个apk，这样当我将apk推送到设备中时，它会使蓝牙处于开启状态，并且由于我没有蓝牙耳机，我希望我的apk自动与虚拟配对蓝牙耳机。

有人可以帮忙吗？？任何帮助将不胜感激。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:30:06.980

你有很多工作要做..

顺便说一句，这更适用于具有特定答案的特定问题。你想要的是从头开始构建一个应用程序......尝试从这里开始：http: [//developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

# c# - 使用对象名称作为与 ActionLink 的链接，而不是硬编码文字

> ID：12062474
> 
> 赞同：0
> 
> 时间：2012-08-21T20:23:05.620
> 
> 标签：c#, javascript, asp.net-mvc

我试图让我的 WebGrid 使用我的实体名称作为链接。如果我这样做：

```
grid.Column("Name"), 
```

网格在网格的每一行中显示实体的名称：

![在此处输入图像描述](../Images/a8e31aec0b3e73f541c7a7f0ceb86a50.png)

但是，我希望名称显示为链接。我最接近这项工作的是这样做：

```
grid.Column("Name", format: (item) => @Html.ActionLink("Edit", "Edit", new { id = item.Id })), 
```

![在此处输入图像描述](../Images/3f38c4e53d1592ef2a1593418dab39be.png)

但是，如您所见，每个名称都是 Edit。我怎样才能在那里获得实际的对象名称？我试过这个，但我得到一个错误（唯一的区别是我试图使用 item.Name 代替“Edit”作为 ActionLink 方法的第一个参数）：

```
grid.Column("Name", format: (item) => @Html.ActionLink(item.Name, "Edit", new { id = item.Id })), 
```

错误：`TrackerJob>>' has no applicable method named 'ActionLink' but appears to have an extension method by that name. Extension methods cannot be dynamically dispatched. Consider casting the dynamic arguments or calling the extension method without the extension method syntax.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:19:10.873

格式是具有动态类型的输入参数和作为项目的结果类型的函数。名称在编译时也是动态的。正如错误所说，使用以下代码：

```
grid.Column("Name", format: (item) => @Html.ActionLink((string)item.Name, "Edit", new { id = item.Id }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:25:45.423

尝试交换论点？

```
grid.Column("Name", format: (item) => @Html.ActionLink("Edit", item.Name, new { id = item.Id })) 
```

*第一次评论后*

尝试使用带有更多参数的 ActionLink 重载（[来自此处](http://msdn.microsoft.com/en-us/library/dd493068%28v=vs.108%29.aspx)）：

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    RouteValueDictionary routeValues,
    IDictionary<string, Object> htmlAttributes
) 
```

因为仅使用字符串，重载就会变得模棱两可。或者在定义 ActionLink 时使用命名参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:38:53.040

试过调查[GetSelectLink()](http://msdn.microsoft.com/en-us/library/system.web.helpers.webgridrow.getselectlink%28VS.99%29.aspx)吗？更多信息在这里：[http ://weblogs.asp.net/andrebaltieri/archive/2010/11/02/asp-net-mvc-3-working-with-webgrid-part-2.aspx](http://weblogs.asp.net/andrebaltieri/archive/2010/11/02/asp-net-mvc-3-working-with-webgrid-part-2.aspx)

就个人而言，我会坚持自己制作表格 - 当它们变得更加定制时，我发现它不那么令人困惑，但这是我的观点。

编辑：你可以做这样的事情，但我再次强调你有点远离这个“简单”的点：

```
item.GetSelectLink(String.Format("<a href='{0}'>{1}</a>", Url.Action("Edit", new { id = item.Id }), item.Name)) 
```

# ios - iPad 作为 WiFi 路由器

> ID：12062478
> 
> 赞同：0
> 
> 时间：2012-08-21T20:23:24.927
> 
> 标签：ios, ipad, wifi

我的任务是让 iPad 以便宜的价格与外部设备进行无线通信。我尝试了蓝牙路由（不是 LE - 需要更高的数据传输率），但我们不愿意通过 MFi。

所以现在我在看WiFi。可以将我的外部设备配置为 WiFi 路由器，但让 iPad 充当路由器可能更容易。这就是我想在这里弄清楚的。

因此，我想到了两种可能性，但我都无法在 Google 或 SO 中找到任何答案。有谁知道其中任何一个的答案？

*   是否可以让 iPad 充当 WiFi 路由器，以便其他设备连接到 iPad 并可以与 iPad 上的应用程序通信？

*   当 iPad 上的内置网络共享处于活动状态时，iPad 是否具有对连接到 iPad 的 WiFi 热点的任何设备可见的 IP 地址？

*   当 iPad 的内置网络共享处于活动状态时，iPad 有没有办法获得连接到热点的通知并获取这些设备的 IP 地址？

更具体地说，我需要一种设备与 iPad 上的应用程序进行无线通信的方法。我已经通过了蓝牙路由，我希望有一个 WiFi 答案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:54:32.083

为了不让问题悬而未决，我将回答我的发现：

不

据我在研究和实验中所言，没有办法做到我所希望的。感谢 Brad Larson 竭尽全力为我提供选择。

# mobile - 域和子域之间的代码冲突

> ID：12062480
> 
> 赞同：0
> 
> 时间：2012-08-21T20:23:25.490
> 
> 标签：mobile, dns, subdomain

我有一个使用 App_Code 文件夹的常规网站和一个移动网站。问题是这些网站共享很多功能。我尝试了以下技术

1.  从子域引用常规站点 App_Code 文件夹。这不起作用。我得到一个编译错误

2.  复制常规站点 App_Code 文件夹并在子域中使用它。这会导致命名空间冲突

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:56:03.450

我最终改变了所有的命名空间，所以它们不会冲突......

# java - 为什么我不能在方法之外进行赋值？

> ID：12062481
> 
> 赞同：22
> 
> 时间：2012-08-21T20:23:27.657
> 
> 标签：java, variables, variable-assignment

如果我尝试将值分配给类中的变量，但在方法之外，则会出现错误。

```
class one{
 Integer b;
 b=Integer.valueOf(2);
} 
```

但是，如果我在创建过程中对其进行初始化，它就可以工作。

```
class one{
 Integer b=Integer.valueOf(2);
} 
```

在方法内部，它在两种情况下都有效。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-21T20:27:44.330

你需要做

```
class one{
 Integer b;
 {
    b=Integer.valueOf(2);
 }
} 
```

as 语句必须出现在代码块中。

在这种情况下，该块是一个初始化程序块，它被添加到每个构造函数（或在这种情况下为默认构造函数）。它`super()`在对任何构造函数中的主代码块的任何调用之后和之前运行。

顺便说一句：您可以有一个静态初始化程序块，`static { }`在初始化类时调用它。

例如

```
class one{
 static final Integer b;

 static {
    b=Integer.valueOf(2);
 }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-21T20:27:37.493

因为**赋值**是**语句**并且**语句**只允许**在**代码块内（方法、构造函数、静态初始化器等）

在这些之外，只允许声明。

这个 ：

```
 class one{
        Integer b=Integer.valueOf(2);
  } 
```

是一个带有初始化器的声明。这就是为什么被接受

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T20:26:15.010

在 Java 中，定义类时，可以定义具有默认值的变量并添加方法。任何可执行代码（例如赋值）都必须包含在方法中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T20:26:21.017

这就是 java 的工作方式，你不能在类中添加非声明代码（对不起，我不知道正确的术语），该代码应该在方法中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T20:58:49.427

更一般的答案是类主体是关于**声明**，而不是**声明**。对类主体中出现的语句有特殊规定，但它们必须明确标记为**类初始化器**或**实例初始化器**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-24T18:31:31.257

我认为在术语方面，其他几个答案略有偏差。声明也是陈述。实际上，它们被称为“声明语句”，是三种语句之一。赋值语句是“表达式语句”的一种形式，只能用于方法、构造函数和初始化程序等构造中。查看此[Oracle 教程链接](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/expressions.html)中的语句部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-25T03:03:01.770

方法有责任对成员变量执行突变。如果成员变量需要初始化，java提供了在构造时做的方式，类定义（后一种情况）。但是在定义期间不能执行突变。（前一种情况）。它通常在方法级别完成。

对象是用来保存状态的，而方法是用来操作那个状态的。

# javascript - Javascript有效的代码结构

> ID：12062483
> 
> 赞同：1
> 
> 时间：2012-08-21T20:23:29.997
> 
> 标签：javascript, oop, javascript-objects

什么是最好的（性能，内存方面），以实现一种干净的方式来创建一个类或以某种方式正确地构造代码，共享 2 个变量（req，res），它们具有合适的对象大小。

是的，对于那些使用 Node.js 的人来说，它是 req 和 res 变量，但这无关紧要。

这是我到目前为止所尝试的：

```
function Client(req, res){
  var self = this;

  self.req = req;
  self.res = res;

  route.call(self);
  handleRoute.call(self);
  handleRequestData.call(self);
}

function route(){
  var self = this;

  self.req.route = // ...
}

function handleAuth(){
  var self = this;

  self.req.auth = // ...
}

function handleRequestData(){
  var self = this;

  self.req.data = // ...
} 
```

我想知道它是否可以改进，因为我提到 req 和 res 是具有方法、属性的相当不错的对象。由于 .call(self) 您通过实例，这会是最有效的方法吗？

我也不喜欢使用“var self = this;” 一直以来，它都是无用的。

顺便说一句，我不想​​使用 Coffeescript。

解决方案1.（由于大量通过req和res而失败）

假设我们到了文件***1.client.js***

```
var Client = {
  route: function(req, res){},
  auth: function(req, res, callback){ callback(req, res); },
  getData: function(req, res, callback){ callback(req, res); } // async
} 
```

文件***2\. main.js***

```
var client = require('./client.js');

client.route(req, res); // fine because this is syncronous.

// This is where the problem is, massive passing through req and res parameters.
client.auth(req, res, function(req, res){
  client.getData(req, res, function(req, res){
    // Do something...
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:34:20.513

我不知道您*为什么*不断将上下文 ( `this`) 保存在局部变量 ( `self`) 中。你不妨`this`一路使用，除非你需要将它带入不同范围的本地对象中。

此外，您可以链接 Prototype 中的其他方法以访问其中的上下文：

```
function Client(req, res){

  this.req = req;
  this.res = res;

  this.route();
  this.handleRoute();
  this.handleRequestData();
}

Client.prototype.route = function(){
  this.req.route = // ...
}

Client.prototype.handleAuth = function(){
  this.req.auth = // ...
}

Client.prototype.handleRequestData = function(){
  this.req.data = // ...
} 
```

如果您不想要“公共”方法，只需执行以下操作：

```
function Client(req, res){

  this.req = req;
  this.res = res;

  route.call(this);
  handleRoute.call(this);
  handleRequestData.call(this);
}

function route(){
  this.req.route = // ...
}

function handleAuth(){
  this.req.auth = // ...
}

function handleRequestData(){
  this.req.data = // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:37:22.853

您是否打算重用`route`、`handleAuth`和`handleRequestData`函数？它们可能是 Client 构造函数的“私有”：

```
function Client(req, res) {
    function route() {
        //...
    }

    function handleAuth() {
        //...
    }

    function handleRequestData() {
        //...
    }

    route();
    handleRoute();
    handleRequestData();
} 
```

看到我没有设置`req`和`res`作为`this`成员。我不知道在你的情况下这是否是强制性的。此外，这只是可以做的事情的开始；如对此答案的评论中所述，每次`Client`创建新的时，也会创建私有函数的新实例，从而浪费资源。

更复杂的方法可以定义`Client`使用自调用函数表达式：

```
var Client = (function() {
    function route(req, res) {
        //...
    }

    function handleAuth(req, res) {
        //...
    }

    function handleRequestData(req, res) {
        //...
    }

    // This is the constructor function:
    return function(req, res) {
        route(req, res);
        handleRoute(req, res);
        handleRequestData(req, res);
    }
})(); 
```

在这里，`Client`定义为最外圆括号中的函数表达式的乘积。函数表达式返回构造函数，它可以访问闭包函数`route`、`handleRoute`和`handleRequestData`。请注意，这些函数中的每一个都是使用`req`和`res`参数定义的。这样，它们的行为就像静态私有函数一样，您可以编码和使用它们，而不管`this`.

**关于 self = this：**众所周知，JavaScript 可能对`this`关键字非常困惑。[这里有一些信息](https://stackoverflow.com/questions/3127429/javascript-this-keyword)。`this`因此，有时分配给一个名为 like`self`或的闭包变量会很方便`me`。不过，它不应该盲目地做……毕竟。

# jquery - 带有动态 html 的 jQuery 微型滚动条

> ID：12062485
> 
> 赞同：1
> 
> 时间：2012-08-21T20:23:32.637
> 
> 标签：jquery, asp.net, dynamic-html, tinyscrollbar

我使用 jQuery 和 Web 服务创建了一个树结构。我通过动态 html 创建树的子节点，动态 html 在需要时动态创建。这棵树对我来说很好。

现在我的第二个任务是在其中添加一个自定义滚动条（类似于 facebook/gmail 所拥有的）。我为此使用了 JQuery Tiny Scrollbar 插件，它在第一步运行良好，但无法应对动态添加的 html。

我的树如下所示：

```
- Asia
   India
   China
+ Europe
+ South America 
```

上面的 Html 如下所示：

```
<ul>
   <li><span>-</span><span>Asia</span></li>
   <li><span></span><span>India</span></li>
   <li><span></span><span>China</span></li>
   <li><span>+</span><span>Europe</span></li>
   <li><span>+</span><span>South America</span></li>
</ul> 
```

当用户单击“+”图标时，会即时创建欧洲和南美洲国家的 Html

现在这个动态创建的 HTML 出现了问题，因为这个小滚动条插件无法处理这个动态 HTML。它只是忽略了这个 HTML。请提出任何建议来纠正这个问题。

谢谢，拉维古普塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:35:29.617

我认为您所要做的就是在加载内容后调用滚动条插件的更新功能：

```
//some operation that changes the viewport content...

oScrollbar5.tinyscrollbar_update(); 
```

该示例来自插件的主页：http: [//baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)

在动态内容更改后，您将调用此（或类似）代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:33:55.257

由于元素一开始并不存在，因此无法通过传统的 document.ready 绑定对其进行绑定。您要做的是使用 .on() 方法 ( [http://api.jquery.com/on/](http://api.jquery.com/on/) ) 绑定到容器并指定一个元素来执行附加的函数。例如：

```
$('ul').on('click', 'li', function(e){
  $(this).doStuffWithChildLIElement();
}); 
```

这样，在 DOM 就绪后创建的任何新的 LI 元素仍将绑定到您创建的点击处理函数。

# vim - 如何在 Vim 拆分窗口中获得不同的配色方案？

> ID：12062491
> 
> 赞同：3
> 
> 时间：2012-08-21T20:24:23.443
> 
> 标签：vim, color-scheme

我更喜欢`colorscheme`对 python 使用不同的文件，对其余文件使用不同的文件。

所以，我所做的是在我的 : 中添加以下两行`vimrc`：

```
"for python file
autocmd! BufEnter,BufNewFile *.py colo badwolf
autocmd! BufLeave *.py colo badwolf

"for rest of the files
colo molokai 
```

`new/pre-exixting`当我在 vim 中打开文件时一切正常，`vim test.py`但是当我将 vim 窗口分成两个时出现问题`:split .scripts/test.sh`。

当我的光标移动到新拆分窗口（.sh）时，拆分窗口后会发生什么，我得到`molokai`了 python 文件的颜色方案，当我将光标移动到旧窗口（.py）`badwolf`时，我在`.sh window`. 因此，正如您最终看到的那样，我的窗口中有相同的颜色方案，具体取决于焦点所在的文件类型。

如果`Vim-Tab`我打开一个具有预定义颜色方案的文件（通过 autocmd），所有选项卡都会应用该颜色方案。

那么，有什么方法可以让我`colorschemes`在 vim 拆分窗口和选项卡中有所不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:26:28.140

我认为不可能同时可靠地激活不同的颜色方案。

事实上，我**很惊讶**你能够为不同的窗口加载不同的颜色方案。`:colorscheme molokai`是适用于每个缓冲区的全局命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T16:03:48.720

这不完全是你想要的，但是这个[标签页配色方案 vim 插件](https://github.com/ujihisa/tabpagecolorscheme)允许你为每个标签分配不同的配色方案`:Tcolorscheme`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T21:28:07.000

这实际上是一个不受欢迎的非 vim 解决方法，但您可以使用[tmux](http://tmux.sourceforge.net/)或[屏幕](http://www.slac.stanford.edu/grp/cd/soft/epics/extensions/iocConsole/screen.1.html)窗格来分隔具有不同颜色方案的两个 vim 实例。

# django - 使被引用实体上的 ForeningKey 可编辑

> ID：12062492
> 
> 赞同：0
> 
> 时间：2012-08-21T20:24:25.487
> 
> 标签：django, django-admin

我必须具有 FK 关系的模型：

```
class Restaurant(models.Model):
   # ...
   pass

class Address(models.Model):
   # ...
   restaurant = models.ForeingKey(Restaurant) 
```

在管理员上，我想在餐厅表单上添加地址。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:26:47.757

您想使用[内联模型](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#inlinemodeladmin-objects)。

# php - 在 WampServser 调试菜单上列出 xDebug

> ID：12062494
> 
> 赞同：0
> 
> 时间：2012-08-21T20:24:35.053
> 
> 标签：php, xdebug, wampserver

好吧，这几天又把我的头撞在墙上了。尝试在此处遵循关于 SO 的另一个答案的建议：[https](https://stackoverflow.com/questions/11955822/php-file-caching-vs-cache-through-htaccess) ://stackoverflow.com/questions/11955822/php-file-caching-vs-cache-through-htaccess 。在尝试使用 xDebug 设置本地测试环境时，我下载了 WampServer，因为它说它是一个包含 xDebug 的完整软件包。我在 PHP.ini 中尝试了各种设置，但无法让 xDebug 出现在 WampServer 的调试菜单上。我看到了一个 Wamp 菜单的图像，它在 Debug 菜单中列出，以及我确实拥有的 WebGrind，但无法完成相同的壮举。

这是我当前针对 xDebug 的 PHP.ini 设置（包括一些已删除的内容）：

```
; XDEBUG Extension

;zend_extension = "c:/wamp/bin/php/php5.3.13/zend_ext/php_xdebug-2.2.0-5.3-vc9.dll"

zend_extension = c:\wamp\bin\php\php5.3.13\ext\php_xdebug-2.2.1-5.3-vc9.dll

[xdebug]
xdebug.default_enable = On ;added
xdebug.remote_enable = On ;Off
xdebug.remote_port = 9000 ;added
xdebug.remote_handler="dbgp" ;added
xdebug.remote_host="localhost" ;added
xdebug.profiler_enable = On
xdebug.profiler_enable_trigger = On ;Off
xdebug.profiler_output_name = cachegrind.out.%t.%p
xdebug.profiler_output_dir = "c:/wamp/tmp"
xdebug.trace_output_dir = "c:/wamp/tmp" ;added

;xdebug.show_local_vars=On
;xdebug.dump.SERVER=HTTP_HOST, SERVER_NAME
;xdebug.dump_globals=On
;xdebug.collect_params=4

;xdebug.show_local_vars=1 
```

是的，我知道 Wamp 中有两个单独的 PHP.ini 文件，但是对这两个文件进行更改没有任何作用。

我已经尝试过 xDebug 网站上的“自定义安装”说明，但这并没有做任何事情。

phpinfo 文件将其列为已安装。

我可以在 Wamp 工具的文件夹中找到 xDebug 客户端并打开它，但是 xDebug 菜单上的打开文件选项显示为灰色并且不起作用。

我已经探索并尝试了在 SO 网站上找到的各种解决方案，但仍然没有乐趣。

[我什至在这里http://www3.ntu.edu.sg/home/ehchua/programming/howto/WampServer_HowTo.html](http://www3.ntu.edu.sg/home/ehchua/programming/howto/WampServer_HowTo.html)找到了一个不错的 WampServer 和 xDebug 分步安装网页，但我所做的只是下载另一个非常大的名为eclipse的程序，安装和配置它，但仍然没有。这看起来确实是一个看起来不错的程序，但是在进行配置之后，它似乎也没有与 wampserer 关联。

xDebug 和 wampserver 确实似乎是在 SO 上提出的非常常见的问题......所以任何实际可行的想法？

顺便说一句：有什么方法可以增加这个问题和评论框中的字体大小，所以我不必使用放大镜来查看我输入的内容？？？我知道它在下面重复了，但更容易看到你在输入什么，你在哪里输入......只是我的两分钱......

感谢您的任何帮助，

斯坦...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:44:52.367

**尝试按照以下步骤操作**

1.  打开您的 Wamp Server phpinfo() 页面。
2.  使用 Big Control+A 复制其中的所有内容并将其粘贴到 xDebug 向导中。链接在这里

[http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)

现在下载向导提供的 DLL 文件并将其放在您的 wamp/bin/php/php/ext 文件夹中。

将以下代码粘贴到您的 php.ini 文件的最后...

**注意：在 wamp/bin/apache/apache/bin/php.ini 下使用 php.ini**

```
zend_extension="C:/Softwares/wamp/bin/php/php5.3.8/ext/php_xdebug-2.2.0-5.3-vc9.dll"

[xdebug]
xdebug.remote_enable=on
xdebug.remote_host=localhost
xdebug.remote_port=9000
xdebug.remote_handler=dbgp 
```

希望这对你有用。在工作了 3 到 4 天后，我得到了这些信息，以便在 NetBeans 上获得 xDebug。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:05:40.013

1.  **从*zend_extension***中删除 ""
***   消除 ; zend_extension**前面****

 **最后在 PHP.ini 两个文件中使用此代码。

[xdebug]

```
xdebug.profiler_enable = off
xdebug.profiler_enable_trigger = off
xdebug.profiler_output_name = cachegrind.out.%t.%p
xdebug.profiler_output_dir = "c:/wamp/tmp"

xdebug.remote_enable=1
xdebug.remote_host="localhost"
xdebug.remote_port=9000
xdebug.remote_handler="dbgp" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-22T18:54:38.927

要使用`xdebugclient`，您需要将`XDEBUG_SESSION_START=session_name`参数添加到 URL，其中`session_name`是调试会话的名称。**

# c# - 使用 HtmlAgilityPack 向 Html 添加样式属性的更好方法

> ID：12062495
> 
> 赞同：5
> 
> 时间：2012-08-21T20:24:35.160
> 
> 标签：c#, html, html-agility-pack

我正在使用 HtmlAgilityPack。我正在搜索所有 P 标签并在 P 标签内的样式中添加“margin-top：0px”。

如您所见，这有点“强制”margin-top 属性。似乎必须有更好的方法来使用 HtmlAgilityPack 但我找不到它，而且 HtmlAgilityPack 文档不存在。

有人知道更好的方法吗？

```
HtmlNodeCollection pTagNodes = node.SelectNodes("//p[not(contains(@style,'margin-top'))]");

if (pTagNodes != null && pTagNodes.Any())
{
    foreach (HtmlNode pTagNode in pTagNodes)
    {
        if (pTagNode.Attributes.Contains("style"))
        {
            string styles = pTagNode.Attributes["style"].Value;
            pTagNode.SetAttributeValue("style", styles + "; margin-top: 0px");
        }
        else
        {
            pTagNode.Attributes.Add("style", "margin-top: 0px");
        }
    }
} 
```

**更新**：我已经根据 Alex 的建议修改了代码。仍然想知道 HtmlAgilityPack 中是否有一些内置功能可以以更“DOM”的方式处理样式属性。

```
const string margin = "; margin-top: 0px";

HtmlNodeCollection pTagNodes = node.SelectNodes("//p[not(contains(@style,'margin-top'))]");

if (pTagNodes != null && pTagNodes.Any())
{
    foreach (var pTagNode in pTagNodes)
    {
        string styles = pTagNode.GetAttributeValue("style", "");
        pTagNode.SetAttributeValue("style", styles + margin);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:02:16.223

您可以通过使用方法稍微简化代码`HtmlNode.GetAttributeValue`，并将*“margin-top”*魔术字符串设为常量：

```
const string margin = "margin-top: 0";
foreach (var pTagNode in pTagNodes)
{
    var styles = pTagNode.GetAttributeValue("style", null);
    var separator = (styles == null ? null : "; ");
    pTagNode.SetAttributeValue("style", styles + separator + margin);
} 
```

不是一个非常显着的改进，但这段代码对我来说更简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T21:36:23.593

首先，你确定你需要的比你要求的多吗？亚历克斯解决方案应该可以很好地解决您当前的问题，如果它总是那么“简单”，为什么还要麻烦并增加更多复杂性呢？

无论如何，AgilityPack 没有这种功能，但 .Net 框架肯定有。请注意，这仅适用于 .Net 4，如果您使用的是早期版本，情况可能会有所不同。首先，System.Web.dll 附带[`CssStyleCollection Class`](http://msdn.microsoft.com/en-us/library/system.web.ui.cssstylecollection%28v=vs.100%29.aspx)，这个类已经包含了解析内联 css 所需的所有内容，只有一个问题，它的构造函数是内部的，所以解决方案有点“hacky”。[首先，要构造一个类的实例，您只需要一点反射，这里](http://bart-at-work.blogspot.de/2008/11/create-cssstylecollection-instance.html)的代码已经完成。请记住，这现在有效，但可能会在未来版本的 .Net 中中断。剩下的一切真的很容易

```
CssStyleCollection css = CssStyleTools.Create();
css.Value = "border-top:1px dotted #BBB;margin-top: 0px;font-size:12px";
Console.WriteLine(css["margin-top"]); //prints "0px" 
```

如果由于某种原因您不能添加对 System.Web 的引用（如果您使用的是 .Net 4 客户端配置文件，就会出现这种情况），总有可能使用 Reflector。

就我个人而言，我会选择亚历克斯的解决方案，但这取决于你自己的决定。:)

# android - 绘制到画布 onDraw 有效，绘制 onTouchEvent 无效

> ID：12062497
> 
> 赞同：1
> 
> 时间：2012-08-21T20:24:40.240
> 
> 标签：android, canvas

我在 Android SDK 中玩弄 2D 图形，但我对应该是一个简单的例子感到困惑。

我假设我只是误解了一些基本/基本的东西。

```
public class DrawView extends View {
    Paint paint = new Paint();
    Canvas canvas = new Canvas();

    public DrawView(Context context) {
        super(context);
        paint.setColor(Color.BLACK);
    }

    @Override
    public void onDraw(Canvas canvas) {
        this.canvas = canvas;
        this.canvas.drawLine(0,0, 500, 500, paint);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        Log.d("DrawView", "onTouchEvent: " + event.getX() + "," + event.getY() );

        canvas.drawLine(0,500, 500, 0, paint);

        return true;
    }
} 
```

上面的代码在应用程序启动时`0,0`画了一条线。`500,500`那部分工作得很好。

![](../Images/8ce64304b552db094803cf7565fb54b4.png)

问题是第二行没有绘制在触摸事件上。`onTouchEvent`肯定会被调用，因为我在日志中看到了坐标调试消息。

有人可以指出我做错了什么愚蠢的事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T20:28:32.040

你应该在 onTouchEvent() 结束时调用 invalidate() 来告诉系统更新屏幕。调用 invalidate() 将调用 onDraw()。

此外，根本上的错误是你在这个类中创建了一个画布。这对你绝对没有任何作用。要绘制的画布是您从 onDraw() 方法获得的画布。onTouchevent 中对 canvas.drawLine() 的调用没有为您做任何事情，也不应该在那里。那是一张空白的画布，不会被“张贴”。

在 onTouchEvent() 中，您应该只收集触摸事件数据，如果需要，还可以对其进行一些处理。你不应该在那里调用绘图方法。但是，正如我所说，如果您想从 onTouchEvent() 触发绘制，则调用 invalidate()。如果要根据触摸的位置绘制线条，则需要创建 X 和 Y 坐标的类变量。您在 onTouchEvent() 中更新这些 X 和 Y 变量，然后在 onDraw() 中使用它们根据这些 X 和 y 变量绘制您需要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T23:56:18.110

你可以在你的类中声明一个 bool 变量，这样你就可以将它传递给`ondraw()`用户已经触摸过的方法，也可以将 X 和 Y 与其他浮点变量一起传递给`ondraw()`methode ！但是您必须使无效，`onTouchEvet()`以便系统使用您的新触摸命令重绘画布！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:55:24.337

调用 postInvalidate() 函数。此函数通知应该重绘视图（事件循环调用 onDraw() 函数）。

# php - 尝试使用 PHP 在电子邮件主题行中显示两个连接变量

> ID：12062498
> 
> 赞同：1
> 
> 时间：2012-08-21T20:24:41.847
> 
> 标签：php, forms

我试图通过 mailer.php 页面在主题行中显示两个连接变量，但电子邮件中的主题行始终为空白。下面是相关代码。

```
/* Subject and To */

$to = 'nnorman@dimplexthermal.com';
$subject = $company . ' ' . $name;

/* Gathering Data Variables */

$name = $_POST['name'];
$email = $_POST['email'];
$company = $_POST['company'];

$body = <<<EOD
<br><hr><br>
Email: $email <br>
Name: $name <br>
Company: $company <br>

EOD;

$headers = "From: $email\r\n";
$headers .= "Content-type: text/html\r\n";
$success = mail($to, $subject, $body, $headers); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:25:41.267

```
$to = 'nnorman@dimplexthermal.com';
$subject = $company . ' ' . $name;

/* Gathering Data Variables */

$name = $_POST['name'];
$email = $_POST['email'];
$company = $_POST['company']; 
```

你没有设置`$company`，`$name`直到你使用它们之后`$subject`

尝试换行：

```
/* Gathering Data Variables */

$name = $_POST['name'];
$email = $_POST['email'];
$company = $_POST['company'];

$to = 'nnorman@dimplexthermal.com';
$subject = $company . ' ' . $name; 
```

# c# - 将树结构转换/转换为不同的类型

> ID：12062499
> 
> 赞同：4
> 
> 时间：2012-08-21T20:24:46.183
> 
> 标签：c#, data-structures, casting, tree

如果我有课：

```
class NodeA
{
      public string Name{get;set;}
      public List<NodeA> Children {get;set;}
      // etc some other properties
} 
```

和其他一些类：

```
class NodeB
{
      public string Name;
      public IEnumerable<NodeB> Children;
      // etc some other fields;
} 
```

如果我需要将 NodeB 对象转换为 NodeA 类型，那么最好的方法是什么？创建一个包装类？如果我必须创建一个包装类，我该如何创建它以便所有 wpf 控件仍然能够成功绑定到属性？

*   我需要创建这样的演员表的原因：

    在程序中使用了一种旧算法，该算法在已编译的程序中返回符号列表 (IMemorySymbol)。我们已经工作并创建了一个新算法，并且字段和属性有些不同（ISymbolElem）。为了在 wpf 应用程序的视图中显示属性，我们需要执行临时转换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T20:42:12.260

一对夫妇接近...

**复制构造函数**

有一个 NodeA 和 NodeB 包含一个相反的构造函数：

```
class NodeA 
{ 
    public string Name{get;set;} 
    public List<NodeA> Children {get;set;} 

    // COPY CTOR
    public NodeA(NodeB copy)
    {
        this.Name = copy.Name;
        this.Children = new List<NodeA>(copy.Children.Select(b => new NodeA(b));
        //copy other props
    }
} 
```

**显式或隐式运算符**

*   [http://msdn.microsoft.com/en-us/library/xhbhezf4.aspx](http://msdn.microsoft.com/en-us/library/xhbhezf4.aspx)
*   [http://msdn.microsoft.com/en-us/library/z5z9kes2.aspx](http://msdn.microsoft.com/en-us/library/z5z9kes2.aspx)

显式的你会转换 like `NodeA a = (NodeA)b;`，而隐式的你可以跳过括号。

```
public static explicit operator NodeA(NodeB b)
{
    //if copy ctor is defined you can call one from the other, else
    NodeA a = new NodeA();
    a.Name = b.Name;
    a.Children = new List<NodeA>();

    foreach (NodeB child in b.Children)
    {
        a.Children.Add((NodeA)child);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:42:12.053

如果您不关心耦合 to 的实现`NodeA`，`NodeB`则添加一个复制构造函数，如下所示：

```
class NodeA
{
    public NodeA() { }
    public NodeA(NodeB node)
    {
        Name = node.Name;
        Children = node.Children.Select(n => new NodeA(n)).ToList();
    }

    public string Name{get;set;}
    public List<NodeA> Children {get;set;}
    // etc some other properties
} 
```

如果耦合是一个问题，那么您可以创建一个[`Convert`](http://msdn.microsoft.com/en-us/library/system.convert.aspx)为您进行转换的 -style 类。请注意，[Automapper](http://automapper.codeplex.com/)框架通过对源类型和目标类型使用反射来为您生成这些类型的转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T20:57:51.910

从通用接口继承如何？

```
interface INode {
  public string Name{get;set;}
  public IEnumerable<INode> Children {get;set;}
}

class NodeA : INode {
  public string Name{get;set;}
  public List<NodeA> Children {get;set;}
  // etc some other properties
}

class NodeB : INode {
  public string Name;
  public IEnumerable<NodeB> Children;
  // etc some other fields;
}

void myMethod() {
  INode nodeB = new NodeB();
  INode nodeA = nodeB;
} 
```

# drupal - Drupal Ubercart 建议

> ID：12062503
> 
> 赞同：-1
> 
> 时间：2012-08-21T20:24:58.327
> 
> 标签：drupal, drupal-7, crm, sugarcrm, ubercart

## 我需要从 Drupal 专家那里借一些智慧。

我们正在聘请一家营销公司来建立我们的网站。他们正在使用 Drupal 7 构建前端，并聘请另一家公司进行编程。前端完成后，他们将把它交给我来实现购物车和电子商务，以及集成到我们的 CRM 和 ERP 中

根据我与 Drupal 的少量合作，我知道它通常将所有内容都作为内容块进行管理。我还知道您可以创建自定义内容类型，我们可以构建它来制作产品模型。我在几个地方读到 Ubercart 可以使用它来构建产品目录。

那么，如果我允许他们以这种方式继续，我是否有办法通过 API（SOAP 或其他方式）提取或更新有关产品的信息？有更好的选择吗？

我担心将产品作为内容处理似乎有点脆弱，我担心当需要将我们的 CRM 和 ERP 链接在一起时，我将没有任何方法（除非直接使用数据库）来更新或拉信息。最终，目标是让 Drupal 只处理布局和实际内容，而我们的 ERP/CRM 二人组将负责维护产品信息。对于我们想要做的事情，是否有既定的方法或最佳实践？

++ 我对数据库结构比其他任何事情都更感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:08:24.120

我认为这取决于您要销售哪种类型的产品，您是否要在线销售它们，以及关于这一点，要了解哪些软件将是主要的（主），哪些将是次要的（从属）。

如果您只是打算告诉人们您有几种产品，您可以将这些产品存储在 ERP 中，然后每天导出 ERP/CRM 产品数据并将它们导入 Drupal。ERP/CRM 将成为您的主存储。

如果您打算在线销售商品并且必须管理库存水平，那么您可以遵循以下解决方案之一（或制作另一个解决方案）：

1.  ERP/CRM 是所有内容（产品、客户、库存水平）的主存储。Drupal 仅用于身份验证过程和您的产品存储“网关”，因此您的站点访问者将浏览您的站点，并且该浏览不会影响您的 ERP/CRM，但如果有人会购买某些东西，您将让 Drupal 获取有关记录的所有信息客户，让他对您的库存水平有所了解。

2.  Drupal 是一切的主存储。我认为这不是一个好主意，因为您已经拥有 ERP/CRM、产品、描述等，因此您需要使它们同步，而这总是很辛苦。

3.  ERP+CRM是针对线下的产品和客户，Drupal只针对电子商务。您只需要每天从您的 ERP 系统中导出您的产品并将它们导入您的 Drupal 站点。然后，如果有人想在线购买东西，他将与 Drupal 网站（购物车、结帐等）进行交互。

从技术上讲，导入/导出节点并没有想象中那么困难。例如，您只需创建一个 stdClass() 对象，填充其值（$node->title、$node->body 等）然后调用 node_prepare()、node_save() 即可。

如果您可以提供更多关于您的业务以及您打算如何处理您的 Drupal 站点的信息，也许您会得到更多的答案。也对不起我的英语，我不是本地人。

# iphone - 处理 iPhone 方向横向/纵向

> ID：12062506
> 
> 赞同：0
> 
> 时间：2012-08-21T20:25:12.393
> 
> 标签：iphone, ios

我有一个 iPhone 应用程序，它有几个不同的视图控制器。一个登录屏幕，然后是其他三个包含表视图的视图控制器。我正在使用情节提要，而不是 NIB 文件，并且在情节提要上以纵向设计了每个视图。当我运行我的应用程序时，当我转动设备时，登录屏幕会在横向/纵向之间切换，看起来还不错。但是，其他屏幕并没有改变……嗯，实际上它们会从横向变为纵向，但不会从纵向变为横向。如果我在登录视图中，然后导航到其他视图，我可以横向看到它们，但是一旦我转动设备并切换到纵向，它就会卡住，直到我返回登录屏幕。

我已经搜索并找到了涉及 NIB 文件的答案，但没有关于在使用情节提要时如何处理设备方向的问题。我是否缺少要在视图上设置的一些属性？如何让我的表格视图像我的登录视图一样工作并自动切换方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:29:06.403

如果您想在代码中锁定视图方向，请使用以下命令将其锁定：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

# c# - C# backgroundworkers + timer：跨线程问题

> ID：12062514
> 
> 赞同：0
> 
> 时间：2012-08-21T20:25:54.537
> 
> 标签：c#, exception, backgroundworker, multithreading

**背景**

[根据我在这里](https://stackoverflow.com/questions/12044421/c-sharp-background-worker-to-update-status-label)收到的宝贵建议，我现在已将所有数据库密集型代码移至后台工作程序，特别是对数据库的直接调用。该代码在后台工作人员的 DoWork 事件期间执行。如果在 DoWork 事件期间返回 DataTable，我将该 DataTable 设置为类范围的变量。这样做是为了避免每次运行此代码时都必须调用需要 DataTable 的控件。

在执行该代码时，我在主 UI 线程中更新了一个标签，以让用户知道正在发生某些事情。为了更新标签，我使用了一个计时器，例如每 750 毫秒一个“。” 附加到标签的字符串中。

我注意到的第一件事是 backgroundworker 的 RunWorkerCompleted 事件没有触发。为了解决这个问题，我`Application.DoEvents();`在每次打电话给后台工作人员之前都做了一个。这很丑陋，但它导致了事件的触发。如果有人有替代方法来解决这个问题，我会全力以赴。

然后我遇到了一个有趣的困境。如果我在 Visual Studio 2010 中运行程序，在调试模式下，我会收到一个 InvalidOperationException 错误，指出“跨线程操作无效：控制 'lblStatus' 从创建它的线程以外的线程访问”。在后台工作人员的 RunWorkerCompleted 事件期间发生此错误，我在主 UI 线程中设置标签的文本。但是，当我通过可执行文件直接启动应用程序时，它完全可以按预期工作（即标签的文本设置正确）。

**问题**

谁能解释正在发生的事情/就如何改进这一点提供建议？

**代码**

我不能发布所有涉及的代码，但这里有一些相关的东西：

```
namespace Test
{
    public partial class frmMain : Form
    {
        public static Boolean bStatus = false;
        static Boolean bTimer = false;
        System.Timers.Timer MyTimer = new System.Timers.Timer();

        public frmMain()
        {
            InitializeComponent();
            MyTimer.Elapsed += new System.Timers.ElapsedEventHandler(MyTimer_Elapsed);
            MyTimer.Interval = 750; // Every 3/4 of a second
            ExampleTrigger();
        }

        /// <Insert>Lots of unshown code here</Insert>

        private void ExampleTrigger()
        {
            // This is used to simulate an event that would require the backgroundworker
            Application.DoEvents();
            bgw.RunWorkerAsync(0);
            WaitText("Example - 1");
        }

        private static void MyTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
        {
            bTimer = true;
        }

        // Update status text
        private void WaitText(string txt)
        {
            MyTimer.Enabled = true;
            lblStatus.Text = txt;
            bStatus = false;
            while (!bStatus)
            {
                if (bTimer)
                {
                    txt = txt + ".";
                    lblStatus.Text = txt;
                    lblStatus.Update();
                    bTimer = false;
                }
            }
            MyTimer.Enabled = false;
        }

        private void bgw_DoWork(object sender, DoWorkEventArgs e)
        {
            int iSelect = (int)e.Argument;
            switch (iSelect)
            {
                case 0:
                    // Hit the database
                    break;
                /// <Insert>Other cases here</Insert>
                default:
                    // Do something magical!
                    break;
            }
        }
        private void bgw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            bStatus = true;
            lblStatus.Text = "Ready!";  // This is where the exception occurs!
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:27:58.370

永远不要在 UI 线程中运行这样的`while()`循环。
您正在冻结 UI，直到循环终止；这违背了目的。

此外，`System.Timers.Timer`不在 UI 线程中运行回调。
请改用 WinForms 计时器。

一旦切换到 WinForms 计时器，您可以简单地附加到计时器回调内的标签，并在操作完成时禁用计时器。

# visual-studio-2015 - 我可以在 Visual Studio 2012/2013/2015/2017/2019 中录制/播放宏吗？

> ID：12062515
> 
> 赞同：200
> 
> 时间：2012-08-21T20:25:58.400
> 
> 标签：visual-studio-2015, visual-studio-2013, visual-studio-2017, macros, visual-studio-2019

显然，宏已从 Visual Studio 2012 中删除。

是否有插件/扩展/工具可以让我录制和播放键盘宏（很像 Visual Studio 2010 中的录制/播放临时宏）？

例如，在将代码从一种语言转换为另一种语言或从文本列表快速生成属性等时，我通常会使用宏。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-11-12T23:31:22.973

您可以尝试[Visual Studio 2012-2019](http://visualstudiogallery.msdn.microsoft.com/8e2103b6-87cf-4fef-9410-a580c434b602)扩展的文本宏（我是作者）。它基本上和 Notepad++ 宏做同样的事情（文本编辑，没有 UI 自动化）。

代码是开源的（[GitHub](https://github.com/xps/VSTextMacros)），所以随时贡献改进:-)

* * *

## 回答 #2

> 赞同：161
> 
> 时间：2012-08-22T01:11:36.553

> 在这个版本的 Visual Studio 中，虽然实际上有数百个功能，但我们实际上已经删除了一些功能。其中之一是宏自动化功能，包括宏录制/回放、宏项目和宏 IDE。虽然我们知道宏对使用它们的人来说很有价值，但不幸的是，我们的使用数据显示，只有不到 1% 的 Visual Studio 开发人员利用了此功能。因此，我们发现自己在每天都在使用的 Visual Studio 领域进行了更深入的投资，并且没有为多个版本更新宏。

来源：*[Visual Studio 11 开发者预览版中的宏](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/d8410838-085b-4647-8c42-e31b669c9f11)*

我已经开始通过剪切/粘贴到[Notepad++](http://en.wikipedia.org/wiki/Notepad%2B%2B)来解决这个问题（虽然不方便） ，在那里记录并运行宏，然后将其剪切/粘贴回 Visual Studio 2012。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2013-01-20T13:45:12.983

Stand out and vote for bringing macros back!

[http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2650757-bring-back-macros](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2650757-bring-back-macros)

UPDATE (10/4/2013):

Yay! Thank to your votes the macros are now considered for return! Keep pushing!

> We are currently reviewing the feasibility of delivering a scripting capability in a future version of Visual Studio. Please continue to offer your comments on what scripting capability we should offer while we research this suggestion.
> 
> Tony Goodhew, Program Manager, VS Pro.

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2012-11-19T21:14:24.803

由于使用了[Sublime Text](http://www.sublimetext.com/)，我发现实际上有比使用宏更好的方法来编辑文本。

**Sublime 允许您一次使用多个光标编辑文本。**这很难解释，但在[http://www.sublimetext.com上有几个动画展示了它](http://www.sublimetext.com)

![崇高的截图](../Images/c58c274b190532d9510d1ed37f762752.png)

我还添加了 Sublime 作为 Visual Studio 的外部工具：

*   打开工具/外部工具
*   添加：Sublime，选择 exe 并使用以下参数：$(ItemPath):$(CurLine):$(CurCol)
*   （也将它移到顶部，因为这使下一步更容易，否则记住它的位置）
*   然后转到自定义/键盘，搜索 Tools.ExternalCommand1 并添加您喜欢的键盘快捷键。

这将在 Sublime 中打开与您在 VS 中相同的光标位置的当前文档。

（另外，Sublime 可以做宏，以防你仍然需要它们）

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2016-05-12T08:40:29.100

[**宏又回来了！**](https://visualstudiogallery.msdn.microsoft.com/d3fbf133-e51b-41a2-b86f-9560a96ff62b)

> 审核中 → 已完成
> 
> 我们清楚地听到了您的反馈，我们一直在努力寻找解决方案。因此，我们非常高兴地宣布，我们现在发布了支持 Visual Studio 2015 和 Visual Studio 2013 的宏版本。
> 
> 在此期间，我们借此机会修复了几个错误并改进了键盘快捷键。我们希望你喜欢它。
> 
> 有关详细信息，请参阅此处的博客文章：http: [//aka.ms/vsmacros](http://aka.ms/vsmacros)
> 
> 我们还在 MIT 许可下开源了代码。如果您有任何建议或贡献，请随时在新的 GitHub 存储库中创建问题或拉取请求：http: [//github.com/Microsoft/VS-Macros](http://github.com/Microsoft/VS-Macros)
> 
> Justin Clareburt 高级项目经理

[Visual Studio 的宏](https://visualstudiogallery.msdn.microsoft.com/d3fbf133-e51b-41a2-b86f-9560a96ff62b)

Visual Studio 的宏是 Visual Studio 2013 和 Visual Studio 2015 的扩展，它允许使用宏来自动执行 IDE 中的重复性任务。该扩展可以记录 Visual Studio 中的大部分命令，包括文本编辑操作。特征

*   记录和回放活动文档操作和 Visual Studio IDE 命令
*   多次播放
*   使用宏资源管理器管理和保留宏
*   将键盘绑定分配给任何宏
*   记录为调用 VS DTE API 的 JavaScript 文件的宏
*   使用 DTE IntelliSense 在 Visual Studio 中进行宏编辑
*   停止播放
*   示例宏

[![在此处输入图像描述](../Images/ccca5b03c373e347ad1c0482f6ac1866.png)](https://i.stack.imgur.com/QOkfP.gif)

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2013-11-13T04:03:44.873

[Visual Commander](http://visualstudiogallery.msdn.microsoft.com/deda8ac1-75e6-4068-89ab-b607cee38f2d)扩展（由我开发）支持在 Visual Studio 2015/2017/2019 中进行代码编辑宏录制和播放。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-10-07T08:46:50.793

我刚刚注意到微软发布了 Visual Studio 2013 的扩展以再次支持宏：

[https://visualstudiogallery.msdn.microsoft.com/d3fbf133-e51b-41a2-b86f-9560a96ff62b](https://visualstudiogallery.msdn.microsoft.com/d3fbf133-e51b-41a2-b86f-9560a96ff62b)

我建议仍然投票支持该功能，以鼓励他们也为 Visual Studio 2015 提供扩展： [https ://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2650757-bring-back-宏](https://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2650757-bring-back-macros)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-06-22T18:25:33.213

使用**[Visual Studio 2013 + 2015 的宏](https://visualstudiogallery.msdn.microsoft.com/d3fbf133-e51b-41a2-b86f-9560a96ff62b)**

**宏开源网址：** [https ://github.com/Microsoft/VS-Macros](https://github.com/Microsoft/VS-Macros)

MSDN博客公告：*[宏扩展：支持VS 2015并开源](https://blogs.msdn.microsoft.com/visualstudio/2016/05/11/macros-extension-open-sourced-in-visual-studio-2015/)*

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-08-29T16:48:50.203

[VSScript允许在](http://www.softerg.com/vsscript/vssHome.htm)[Lua](http://en.wikipedia.org/wiki/Lua_%28programming_language%29)中录制、编写和编辑宏，尽管我还不能让它与 Visual Studio 2015 一起工作（命令按钮是灰色的；文档说支持 Visual Studio 2005 到 2015 RC）。

它目前作为免费软件发布。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-03-17T07:42:29.330

[Visual Commander](http://componentwanted.com/visual-commander-professional-includes-1-year-of-software-updates-and-technical-support/)扩展允许您在 Visual Studio 中自动执行重复性任务。

# asp.net-mvc-3 - 重定向会阻止 Google Analytics 中的页面跟踪吗？

> ID：12062523
> 
> 赞同：0
> 
> 时间：2012-08-21T20:26:23.967
> 
> 标签：asp.net-mvc-3, google-analytics

我有一个使用大量重定向的 mvc3 应用程序，因此不会向用户显示 URL 路径。当他们浏览应用程序时，他们看不到 url 的任何变化。

谷歌分析是否仍会跟踪单独的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:31:18.783

Google Analytics 跟踪是 javascript，它需要在 GA 文档提供的传统设置中在浏览器中的页面上运行。

如果重定向不包含 GA js 或者离开页面太快以至于 GA js 无法运行，那么不，它不会跟踪单独的页面。当然，假设这是一个传统的重定向。

除非正在进行 URL 重写，否则重定向通常会显示在浏览器中。

您可以安装[GA 调试器](https://chrome.google.com/webstore/detail/jnkmfdileelhofjcijamephohjechhna)和 Chrome 并运行该页面以查看是否发送了跟踪信标。

# python - 围绕 QLabel HTML 内容绘制边框

> ID：12062527
> 
> 赞同：0
> 
> 时间：2012-08-21T20:26:35.880
> 
> 标签：python, html, css, pyqt, qlabel

如何在下面的 HTML 代码中围绕`blockquote`内容绘制边框？`QLabel`（我尝试了几种方法，`html_`包含一个应该工作的变体）。

```
from PyQt4.QtGui import QApplication, QLabel
import sys

html_ = '<p style="border: 1px dotted black;"> hassan </p>'
html = '''
<table cellspacing="5" border="0" cellpadding="0">
<tr valign="top" align="left">
<td style="padding-right: 10px;" width="150">
  <p>#%s<br>
  <b>User:</b> %s<br>
  <b>posted at:</b> %s </p>
</td>
<td width="1" bgcolor="#00FFFF"><BR></td>
<td style="padding-left: 10px;" width="400" valign="top" align="left">
  <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum. </p>
<blockquote >
 <em>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat,</em>
 <p style="border:1px dotted black;"><b> posted by: </b>hassan</p>
</blockquote>
<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum. </p>
</td>
</tr>
</table>
''' % (1, "hassan", "sunday")

app = QApplication(sys.argv)
l = QLabel(html)
l.setWordWrap(True)
l.show()
app.exec_()
sys.exit() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:24:00.830

诸如`QLabel`并且`QTextBrowser`仅支持有限[的 html/css 子集的](http://doc-snapshot.qt-project.org/4.8/richtext-html-subset.html)小部件。

在这种特殊情况下，边框仅由`table`元素直接支持。

所以你可以尝试这样的事情：

```
<table border="1" style="border-style: dotted; border-color: black"><tr><td>
<blockquote>
...
</blockquote>
</td></tr></table> 
```

或者：

```
<table bgcolor="black"><tr><td>
<blockquote style="background-color: palette(window)">
...
</blockquote>
</td></tr></table> 
```

# ruby - 为什么我的实例变量不指向 Watir::Browser 实例？

> ID：12062532
> 
> 赞同：0
> 
> 时间：2012-08-21T20:27:24.200
> 
> 标签：ruby, oop, attr-accessor

我真的很困惑。我在自动化测试套件中使用下面的 Ruby 类：

```
class FlightSearchPage

  attr_accessor :page_title

  def initialize(browser, page)
    @browser      = browser
    @start_url    = page
  end

  def method_missing(sym, *args, &block)
    @browser.send sym, *args, &block
  end

  @page_title   = @browser.title

  #def page_title
  #  @browser.title
  #end

end 
```

我将其子类化为：

```
class BrandFlightsPage < FlightSearchPage

    def initialize(browser, page, brand)
      super(browser, page)
      [...snip...]
    end
end 
```

当我实例化子类时，传入 @browser，一个 watir-webdriver 对象，@browser.title 抛出：

nil:NilClass (NoMethodError) 的未定义方法“标题”

但是，如果我取消注释 FlightSearchPage 中的 page_title 方法，它会按预期工作。我也尝试过构造函数中的变量赋值。

我绕着圈子试图追踪它，但我就是看不到它。

这是堆栈跟踪：

```
undefined method `title' for nil:NilClass (NoMethodError)
/Users/Dazzla/Dropbox/src/Projects/over_the_watir/pages/flight_search_page.rb:13:in `<class:FlightSearchPage>'
/Users/Dazzla/Dropbox/src/Projects/over_the_watir/pages/flight_search_page.rb:1:in `<top (required)>'
/usr/local/rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
/usr/local/rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
/Users/Dazzla/Dropbox/src/Projects/over_the_watir/pages/brand_flight_search_page.rb:1:in `<top (required)>'
/usr/local/rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
/usr/local/rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
/Users/Dazzla/Dropbox/src/Projects/over_the_watir/features/step_definitions/steps.rb:1:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p0/gems/cucumber-1.2.1/lib/cucumber/rb_support/rb_language.rb:129:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p0/gems/cucumber-1.2.1/lib/cucumber/rb_support/rb_language.rb:129:in `load_code_file'
/usr/local/rvm/gems/ruby-1.9.3-p0/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:171:in `load_file'
/usr/local/rvm/gems/ruby-1.9.3-p0/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:83:in `block in load_files!'
/usr/local/rvm/gems/ruby-1.9.3-p0/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:82:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p0/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:82:in `load_files!'
/usr/local/rvm/gems/ruby-1.9.3-p0/gems/cucumber-1.2.1/lib/cucumber/runtime.rb:175:in `load_step_definitions'
/usr/local/rvm/gems/ruby-1.9.3-p0/gems/cucumber-1.2.1/lib/cucumber/runtime.rb:40:in `run!'
/usr/local/rvm/gems/ruby-1.9.3-p0/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:43:in `execute!'
/usr/local/rvm/gems/ruby-1.9.3-p0/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:20:in `execute'
/usr/local/rvm/gems/ruby-1.9.3-p0/gems/cucumber-1.2.1/bin/cucumber:14:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p0/bin/cucumber:19:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p0/bin/cucumber:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:47:18.380

这是因为

```
 attr_accessor :page_title 
```

已经创建了一个 getter**和**一个 setter。

我会把这个

```
@page_title   = @browser.title 
```

在您的初始化方法中..

```
class FlightSearchPage

  attr_accessor :page_title

  def initialize(browser, page)
    @browser      = browser
    @page_title   = @browser.title
    @start_url    = page
  end

  def method_missing(sym, *args, &block)
    @browser.send sym, *args, &block
  end

end 
```

或（更好）删除**attr_accessor**并添加一个方法

```
 class FlightSearchPage

      def initialize(browser, page)
        @browser      = browser
        @start_url    = page
      end

      def method_missing(sym, *args, &block)
        @browser.send sym, *args, &block
      end

      def page_title
        return @browser.title unless @browser
        "browser not set, no title"
      end

    end 
```

实例化浏览器：

这被放置在一个名为 env.rb 的文件中，该文件在每次测试之前运行：

```
Before do
  @browser = Watir::Browser.new
end 
```

它在黄瓜世界的当前实例的上下文中运行

我不明白的是，当使用除此之外的访问器实现时，所有其他浏览器方法都按预期工作。

# jquery - 使用谷歌浏览器时的jquery xml问题

> ID：12062543
> 
> 赞同：2
> 
> 时间：2012-08-21T20:28:05.800
> 
> 标签：jquery, xml, json

当我使用 FF 和 IE 时，我可以看到图库中的所有[图像](http://damacanapaleti.gen.tr/urunler/)。但是当我使用谷歌浏览器时，我看不到任何图像。我想这个问题起源于 jquery 和 xml 文件。有我的[config.xml](http://www.damacanapaleti.gen.tr/urunler/config.xml)有什么问题，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:10:46.400

首先，作为健全性检查：不，您的 XML 配置文件没有任何明显错误。

检查 Chrome 和 Safari 中提供的页面显示（a）您的问题是可重现的（哇！）和（b）在 Chrome 中，`img`图库中的第一个元素带有一个属性读取

```
style="width: 0px; height: 0px; opacity: 0.6;" 
```

我看到第二个`img`没有`opacity`设置，但确实有`width`and`height`设置为 0px。

找到为图像设置高度和宽度的代码；它似乎很可能是罪魁祸首。

# sql-server-2008 - 使用参数和like word的SQL查询

> ID：12062545
> 
> 赞同：0
> 
> 时间：2012-08-21T20:28:44.547
> 
> 标签：sql-server-2008

我有一个要求，我必须将参数 @ClientName 传递给查询，并且我必须使用 @ClientName 才能在 like 过滤器中使用。

请看下文。

```
DECLARE @ClientName VARCHAR(20) = 'abc'
SELECT ID,ClientName
FROM    ClientTable
WHERE   ClientName LIKE '%@ClientNAme%' 
```

请让我知道，如果还有其他替代方法可以实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:30:42.050

您可以使用简单的串联内联：

```
WHERE ClientName LIKE '%' + @ClientName + '%' 
```

或者，您可以通过允许通配符是可选的来更直接地控制此行为。如果您的查询是这样的：

```
WHERE ClientName LIKE @ClientName 
```

然后，您可以使用以下方法之一强制执行不同的行为（开头、包含或结尾）：

```
SET @ClientName = 'abc%';
SET @ClientName = '%abc%';
SET @ClientName = '%abc'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:30:49.743

```
DECLARE @ClientName VARCHAR(20) = 'abc' 

SELECT ID,ClientName 
FROM    ClientTable 
WHERE   ClientName LIKE '%'+@ClientName+'%' 
```

# webserver - auto_prepend_file 多个文件

> ID：12062546
> 
> 赞同：3
> 
> 时间：2012-08-21T20:28:48.583
> 
> 标签：webserver, php

我试图在*服务器范围*内包含多个文件，所以`etc/php.ini`我有几行：

```
;Blowfish password
auto_prepend_file="/plugins/phpass-0.3/PasswordHash.php"

;WhoIs lookup
auto_prepend_file="/plugins/phpwhois-4.2.2/whois.main.php"

;IP database
;auto_prepend_file="/plugins/GeoIP/geoip.inc"
auto_prepend_file="/plugins/GeoIP/geoipcity.inc" 
```

似乎只有最后一个`auto_prepend_file`被接受，或者它正在覆盖其他。

如何包含多个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:38:02.090

创建一个单独的加载器文件，它需要您需要的文件，然后添加该文件。

```
auto_prepend_file="/path/to/loader.php" 
```

在 loader.php 中：

```
require '/plugins/phpass-0.3/PasswordHash.php';
require '/plugins/phpwhois-4.2.2/whois.main.php';
require '/plugins/GeoIP/geoipcity.inc'; 
```

# javascript - 视图之前的 Backbone.js 模型？先鸡后蛋？

> ID：12062549
> 
> 赞同：4
> 
> 时间：2012-08-21T20:28:57.667
> 
> 标签：javascript, model-view-controller, backbone.js

我正在重写我的 App 框架以供将来重用，我遇到了一个有趣的问题：

将应用程序与模型或视图一起线程化更好吗？

**例如**

将应用程序与视图一起线程化可能看起来像（请忽略任何语法错误）

```
....
//inside of AppView() or something

 var somepage = new PageView({model:new PageModel({url:"whatever"}),some more stuff..}), some more..});
 // then in PageView's initialize, listen for the model's load to call render().. 
```

还是这样做会更好：

```
....

 var somepage = new PageModel({url:"whatever",view:new PageView({}),some more stuff..}), some more..});
 // then in PageModel's parse() function call this.view.render().. 
```

就我个人而言，我倾向于在 View 流行的情况下对其进行编码，但我已经看到它以两种方式完成，并且想知道是否有任何主要优势支持其中任何一种。

顺便说一句，用例基本上是一个框架，它在 JSON 中使用一种“站点地图”来设置整个站点（类似于 AS3 Gaia 框架对 XML 所做的），然后它会启动如下内容：

![在此处输入图像描述](../Images/a809c9096b8ae5b21dba894dd05e9f7f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T21:01:29.660

模型有 2 个典型用例

1.  表示某种数据，通常参考服务器上的某种 rest Api。在这种情况下，视图管理和控制模型和模型中的数据。
2.  表示应用程序的状态或视图的状态（它是应用程序的一部分）。在这种情况下，模型反映了视图的状态，但它自己没有任何任务。视图只对状态和状态变化做出反应。

在这两种情况下，模型都应该是视图的一部分或附加到视图，反之亦然。很明显选项1。

# jquery - 如何用jquery交换元素？

> ID：12062555
> 
> 赞同：0
> 
> 时间：2012-08-21T20:29:18.863
> 
> 标签：jquery

我的 HTML 文档中有以下设置...

```
<div id="logo"><h2>my top logo</h2></div>
<div id="one"><p>this is the first section with stuff in it</p></div>
<div id="two"><h1>this is the section section with stuff in it</h1></div>
<script>//this script associates to stuff in div id=two</script> 
```

有没有办法告诉 < div id = one >，以这种方式进入 < script > 标签下，它看起来像这样......

```
<div id="logo"><h2>my top logo</h2></div>
<div id="two"><h1>this is the section section with stuff in it</h1></div>
<script>//this script associates to stuff in div id=two</script>
<div id="one"><p>this is the first section with stuff in it</p></div> 
```

我不能依赖包含所有这些的父 div 元素 id。我只需要依靠你在这里看到的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:32:34.717

你可以这样做，虽然我不知道这样做的目的是什么。它不应该改变页面布局的任何内容。

```
$("#one").insertAfter( $("#one").nextAll("script").eq(0) ); 
```

你应该修复上面的 html，你有未打开的 p 标签和未关闭的 h1 标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:33:43.267

试试这个：

```
$('#two').next().after($('#one')) 
```

[小提琴](http://jsfiddle.net/KANh2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T20:33:45.967

```
$('#two').next('script').after( $('#one') ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T20:33:05.053

您可以使用以下内容来移动它们

`jQuery("#one").after(jQuery("#two"));`

你也可以使用

`jQuery("#two").before(jQuery("#one"));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T20:37:35.027

你可以这样做

```
$("#one").insertAfter($('script')); 
```

鉴于这是您代码中唯一的脚本标记。您可以实施进一步的检查和平衡，以确保它直接位于您需要的脚本标签之后。

# php - 这个时间戳是什么意思

> ID：12062558
> 
> 赞同：1
> 
> 时间：2012-08-21T20:29:29.897
> 
> 标签：php, time, timestamp, google-api

所以我从 Google API 得到了一个时间戳，格式如下：

```
2012-08-21T20:19:08.452Z 
```

我的问题是……Z 前面的 .452 是什么？我相信 Z 表示祖鲁时间又名 UTC，但 0.452 是什么......是几分之一秒？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T20:31:26.373

是的，这些只是几分之一秒。顺便说一下，这是 ISO 8601 日期格式（特别是它的 RFC 3339 子集）。

如果要将其转换为 Unix 时间戳，可以使用 PHP 的[strtotime](http://php.net/manual/en/function.strtotime.php)函数（因为您标记了这个问题`php`）。

# javascript - 使用 D3.js 计算 SVG 路径质心

> ID：12062561
> 
> 赞同：22
> 
> 时间：2012-08-21T20:29:56.433
> 
> 标签：javascript, svg, d3.js

我在项目中使用位于[http://upload.wikimedia.org/wikipedia/commons/3/32/Blank_US_Map.svg](http://upload.wikimedia.org/wikipedia/commons/3/32/Blank_US_Map.svg)的 SVG并与 d3.js 进行交互。我想创建一个点击缩放效果，如[http://bl.ocks.org/2206590](http://bl.ocks.org/2206590)，但是该示例依赖于存储在 JSON 对象中的路径数据来计算质心。有没有办法从现有的 SVG 加载 d3 中的路径数据以获取质心？

到目前为止，我的（骇人听闻的）尝试：

```
 function get_centroid(sel){
    var coords = d3.select(sel).attr('d');
    coords = coords.replace(/ *[LC] */g,'],[').replace(/ *M */g,'[[[').replace(/ *z */g,']]]').replace(/ /g,'],[');
    return d3.geo.path().centroid({
      "type":"Feature",
      "geometry":{"type":"Polygon","coordinates":JSON.parse(coords)}
    });
  } 
```

这似乎适用于某些州，例如密苏里州，但其他州（例如华盛顿州）却失败了，因为我的 SVG 数据解析非常初级。d3 是否本机支持这样的东西？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-21T21:53:28.960

D3 函数似乎都假设您从 GeoJSON 开始。但是，我实际上并不认为您需要质心 - 您真正需要的是边界框，幸运的是，这可以直接从 SVG DOM 界面获得：

```
function getBoundingBoxCenter (selection) {
  // get the DOM element from a D3 selection
  // you could also use "this" inside .each()
  var element = selection.node();
  // use the native SVG interface to get the bounding box
  var bbox = element.getBBox();
  // return the center of the bounding box
  return [bbox.x + bbox.width/2, bbox.y + bbox.height/2];
} 
```

就缩放而言，这实际上比真正的质心略好，因为它避免了您可能会遇到的一些投影问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-30T10:32:25.233

接受的答案对我来说非常有用，直到我在 Edge 中进行测试。我无法发表评论，因为我没有足够的业力或其他任何东西，但正在使用此解决方案并发现 Microsoft Edge 存在问题，它不使用 x 或 y，仅使用上/左/下/右等。

所以上面的代码应该是：

```
function getBoundingBoxCenter (selection) {
  // get the DOM element from a D3 selection
  // you could also use "this" inside .each()
  var element = selection.node();
  // use the native SVG interface to get the bounding box
  var bbox = element.getBBox();
  // return the center of the bounding box
  return [bbox.left + bbox.width/2, bbox.top + bbox.height/2];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-02T20:24:40.763

从[这里](https://dillieodigital.wordpress.com/2013/02/13/quick-tip-getting-the-centroid-of-an-individual-svg-path-selection-in-d3/)

解决方案是对选择使用 .datum() 方法。

```
var element = d3.select("#element");
var centroid = path.centroid(element.datum()); 
```

# python - 从文件中提取行的子集

> ID：12062562
> 
> 赞同：2
> 
> 时间：2012-08-21T20:30:00.880
> 
> 标签：python, string

我有一些文件，其中有随机顺序的不同数量的标题行，然后是我需要的数据，这些数据跨越了相应标题给定的行数。前任`Lines: 3`

```
from: blah@blah.com
Subject: foobarhah
Lines: 3
Extra: More random stuff

Foo Bar Lines of Data, which take up
some arbitrary long amount  characters on a single line, but no  matter how long 
they still only take up the number of lines as specified in the header 
```

如何在一次读取文件中获取该数据？PS 数据来自 20Newsgroups 语料库。

编辑：我猜只有在我放松对只读一次的限制时才有效的快速解决方案是：

*   [第一次阅读] 找出`total_num_of_lines`并匹配第一个`Lines:`标题，
*   [第二次阅读]我丢弃第一个`(total_num_of_lines- header_num_of_lines)`，然后阅读文件的其余部分

不过，我仍然不知道有一种方法可以一次性读取数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:56:33.797

我不太确定您甚至需要文件的开头才能获取其内容。考虑使用拆分：

```
_, contents = file_contents.split(os.linesep + os.linesep) # e.g. \n\n 
```

但是，如果 lines 参数确实很重要 - 您可以使用上面建议的技术以及解析文件头：

```
headers, contents = file_contents.split(os.linesep + os.linesep)

# Get lines length
headers_list = [line.split for line in headers.splitlines()]
lines_count = int([line[1] for line in headers_list if line[0].lower() == 'lines:'][0])

# Get contents
real_contents = contents[:lines_count] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T21:04:58.753

假设我们有一般情况下可能有多个消息相互跟随，也许是这样的

```
from itertools import takewhile
def msgreader(file):
    while True:
        header = list(takewhile(lambda x: x.strip(), file))
        if not header: break
        header_dict = {k: v.strip() for k,v in (line.split(":", 1) for line in header)}
        line_count = int(header_dict['Lines'])
        message = [next(file) for i in xrange(line_count)] # or islice..
        yield message 
```

会工作，在哪里

```
with open("53903") as fp:
    for message in msgreader(fp):
        print message 
```

将给出所有列出的消息。对于这个特定的用例，上面的内容可能有点过头了，但坦率地说，提取所有标题信息并不比仅提取一行更难。不过，如果还没有解析这些消息的模块，我会感到惊讶。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T20:53:07.317

您需要存储标头是否已完成的状态。就这样。

# mysql - 在 MySQL 查询中使用第二个 ORDER

> ID：12062565
> 
> 赞同：7
> 
> 时间：2012-08-21T20:30:17.020
> 
> 标签：mysql, sql, sql-order-by

我正在使用以下查询来选择与指定纬度和经度最近的行。然后按距离对结果进行排序，返回所选数据集中最近的行。

但是，我想然后按`expiry_date`字段对返回的最近的行进行排序以对该数据集进行排序，以便我将最快的结束（最近的到期日期）在顶部和最远的底部。

请你能告诉我我该怎么做吗？

```
SELECT * , ( 6371 * ACOS( COS( RADIANS( latitude ) ) * COS( RADIANS( 51.61062 ) ) * COS( RADIANS( - 0.236952 ) - RADIANS( longitude ) ) + SIN( RADIANS( latitude ) ) * SIN( RADIANS( 51.61062 ) ) ) ) AS distance
FROM  `questions` 
WHERE  `expiry_date` > 
CURRENT_TIMESTAMP HAVING distance <=50000
ORDER BY distance
LIMIT 0 , 15 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-21T20:31:13.310

`ORDER BY`可以是逗号分隔的列表。只需按出现顺序列出它们：

```
SELECT * , ( 6371 * ACOS( COS( RADIANS( latitude ) ) * COS( RADIANS( 51.61062 ) ) * COS( RADIANS( - 0.236952 ) - RADIANS( longitude ) ) + SIN( RADIANS( latitude ) ) * SIN( RADIANS( 51.61062 ) ) ) ) AS distance
FROM  `questions` 
WHERE  `expiry_date` > 
CURRENT_TIMESTAMP HAVING distance <=50000
ORDER BY distance
, expiry_date DESC
LIMIT 0 , 15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:32:10.410

你需要一个子查询：

```
select t.*
from (<your query here>) t
order by expiry_date desc 
```

# jquery - 使用 jQuery UI Sortable 拖动多个项目

> ID：12062568
> 
> 赞同：1
> 
> 时间：2012-08-21T20:30:23.227
> 
> 标签：jquery, html, jquery-ui, jquery-ui-sortable

我正在尝试使用 jQuery UI Sortable 组件来排列表格中的行。（代码和标记发布在[http://jsfiddle.net/LpyXh/](http://jsfiddle.net/LpyXh/)。）

但我希望能够拖动多组行。在我的示例中，每当我拖动一行时，我还想拖动所有以当前行为父行的行（data-parent 属性）。结果是孩子将永远和他们的父母在一起。请注意，我要拖动的行将始终组合在一起。

但它看起来不像 Sortable 支持这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:43:18.797

将您的父/子组分解为他们自己的表怎么样。然后你可以拖动表格。那不是更干净吗？

# python - 用于 Git 的 Web API

> ID：12062574
> 
> 赞同：-2
> 
> 时间：2012-08-21T20:30:51.530
> 
> 标签：python, ruby, perl, git, asp.net-web-api

我正在寻找用 Perl、Python、Ruby 或 Erlang 编写的 Git 的 Web API（不是 HTML Web 界面）。我需要对存储库的只读访问权限以获取日志和提交信息。有人知道吗？

Web API 是什么意思？Web API 是[Wikipedia](http://en.wikipedia.org/wiki/Web_service)中描述的 Web 服务。我想通过 SOAP、XML-RPC、JSON-RPC 或任何其他协议发送请求，并且只接收返回数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:33:50.317

不确定您所指的“Web API”是什么，但在[http://libgit2.github.com/](http://libgit2.github.com/)上有许多语言的 libgit2 绑定。此外，如果您尝试访问 GitHub 存储库上的信息，请查看[http://developer.github.com/](http://developer.github.com/)。

# qt4 - QTranslator 仅适用于我的程序的某些部分

> ID：12062577
> 
> 赞同：0
> 
> 时间：2012-08-21T20:31:09.680
> 
> 标签：qt4, translation, netbeans-7, qmainwindow, qtranslate

我在翻译我的 qt 应用程序（Windows 上的 qt 4.7.4）时遇到了一个奇怪的问题。会发生以下情况：

1.- 我执行 lupdate 并生成一个 .ts 文件。

2.- 我用 qt linguist 编辑生成的 .ts 文件。

3.- 我使用之前的 .ts 文件执行 lrelease。

4.- 从 Netbeans，我清理并构建项目，然后运行它。

当我的应用程序运行时，大多数小部件（标签、按钮、标题、菜单操作、菜单）都会根据我之前生成的翻译文件进行翻译。问题是一些元素没有被翻译，尽管我在翻译文件中为它们提供了翻译（Qt Linguist 识别它们）。

我的问题是：为什么有些文本被翻译而其他文本被忽略是有原因的吗？

我确保每个文本都在 tr() 中。（正如我之前所说，它们都出现在 Qt Linguist 中）。

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T07:45:24.887

所以它只适用于 Linux 而不是 mingw32/mingw64

主文件

```
#include <QtGui/QApplication>
#include "test_w32.h"
#include <QTranslator>
#include <QLocale>

int main(int argc, char** argv)
{
    QApplication app(argc, argv);
    QString locale = QLocale::system().name();
    QTranslator translator;
    translator.load(QString("test_w32_") +locale);
    app.installTranslator(&translator);
    test_w32 foo;
    foo.show();
    return app.exec();
} 
```

test_w32.h

```
#ifndef test_w32_H
#define test_w32_H

#include <QtGui/QMainWindow>

class test_w32 : public QMainWindow
{
Q_OBJECT
public:
    test_w32();
    virtual ~test_w32();
};

#endif // test_w32_H 
```

test_w32.cpp

```
#include "test_w32.h"

#include <QtGui/QLabel>
#include <QtGui/QMenu>
#include <QtGui/QMenuBar>
#include <QtGui/QAction>

test_w32::test_w32()
{
    QLabel* l = new QLabel( this );
    l->setText(trUtf8( "Hello World!" ));
    setCentralWidget( l );
    QAction* a = new QAction(this);
    a->setText(trUtf8( "Quit" ));
    connect(a, SIGNAL(triggered()), SLOT(close()) );
    menuBar()->addMenu(trUtf8( "File" ))->addAction( a );
}

test_w32::~test_w32()
{}

#include "test_w32.moc" 
```

有什么问题 ？谢谢

# weka - 使用 Weka J48 和朴素贝叶斯多项式分类器改进分类结果

> ID：12062578
> 
> 赞同：0
> 
> 时间：2012-08-21T20:31:10.847
> 
> 标签：weka, bayesian, decision-tree

我一直在使用 Weka 的 J48 和朴素贝叶斯多项式 (NBM) 分类器根据 RSS 提要中的关键字频率将提要分类为目标类别。

例如，我的 .arff 文件之一包含以下数据提取：

```
@attribute Keyword_1_nasa_Frequency numeric
@attribute Keyword_2_fish_Frequency numeric
@attribute Keyword_3_kill_Frequency numeric
@attribute Keyword_4_show_Frequency numeric
…
@attribute RSSFeedCategoryDescription {BFE,FCL,F,M, NCA, SNT,S}

@data
0,0,0,34,0,0,0,0,0,40,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,13,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,BFE
0,0,0,12,0,0,0,0,0,20,0,0,0,0,0,0,0,0,0,0,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,BFE
0,0,0,10,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,BFE
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,BFE
…
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,FCL
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,F
…
20,0,64,19,0,162,0,0,36,72,179,24,24,47,24,40,0,48,0,0,0,97,24,0,48,205,143,62,7
8,0,0,216,0,36,24,24,0,0,24,0,0,0,0,140,24,0,0,0,0,72,176,0,0,144,48,0,38,0,284,
221,72,0,72,0,SNT
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,SNT
0,0,0,0,0,0,11,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,0,0,0,0
,0,0,0,0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,0,0,0,0,0,20,0,S 
```

依此类推：总共有 570 行，其中每一行都包含一天中某个关键字在提要中的频率。在这种情况下，有 10 天的 57 个提要，总共有 570 条要分类的记录。每个关键字都以代理编号为前缀，并以“频率”为后缀。

我在“黑盒”的基础上对 J48s 和 NBM 分类器使用 10 倍 x 验证。使用的其他参数也是默认值，即 J48 的置信度为 0.25，最小对象数为 2。

到目前为止，我对不同天数、日期范围和实际关键字频率的实例的分类率，J28 和 NBM 结果在 50-60% 范围内是一致的。但是，如果可能的话，我想改进它。

我降低了决策树的置信水平，有时低至 0.1，但改进非常有限。

任何人都可以提出任何其他改进我的结果的方法吗？

为了提供更多信息，这里的基本过程涉及各种 RSS 提要集合，其中每个提要属于一个类别。

对于给定的日期范围，例如 2011 年 9 月 1 日至 10 日，每个提要的项目元素的文本都会合并。然后验证文本以删除带有数字、重音符号等的单词和停用词（使用来自 MySQL 的 500 个停用词列表）。然后在 Lucene 中对剩余的文本进行索引，以计算出最流行的 64 个单词。

然后在给定日期范围内的每一天的提要的描述元素中搜索这 64 个单词中的每一个。作为其中的一部分，描述文本也以与标题文本相同的方式进行验证，并再次被 Lucene 索引。因此，标题中的流行关键字（例如“declines”）被归结为“declin”：那么如果在描述元素中发现任何类似的词也源自“declin”，例如“declined”，则“declin”的频率取自 Lucene 对描述元素中的单词的索引。

.arff 文件中显示的频率在此基础上匹配，即在上面的第一行中，“nasa”、“fish”、“kill”在当天 BFE 类别中特定提要的描述项中找不到，但 'show' 被找到了 34 次。每行代表一天中所有 64 个关键字在提要的描述项中出现的次数。

所以我认为低频不是由于词干。相反，我认为这是某些关键字在某一类别的提要中流行但根本没有出现在其他提要中的必然结果。因此，结果中显示了备用性。通用关键字在这里也可能是相关的。

其他可能性是每个类别的提要数量不同，其中 NCA 等类别中的提要多于 S，或者关键字选择过程本身有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:04:01.977

你没有提到任何关于[stemming](http://en.wikipedia.org/wiki/Word_stem)的事情。在我看来，如果您执行词干提取并且 WEKA 评估基于**关键字 stems** ，您可以获得更好的结果。

例如，假设您的 WEKA 模型是在给定关键字*surfing*的情况下构建的，并且新的 rss 提要包含单词*surf*。这两个词之间应该有一个匹配。

有多种语言的许多免费可用词干分析器。

对于英语，一些可用的词干提取选项是：

*   搬运工的[词干分析器](http://tartarus.org/martin/PorterStemmer/)
*   基于[WordNet](http://wordnet.princeton.edu/)字典的词干提取

如果您想使用 WordNet 的字典执行词干提取，可以使用与 WordNet 集成的库和框架。

您可以在下面找到其中一些：

*   麻省理工学院 Java WordNet 接口 ( [JWI](http://projects.csail.mit.edu/jwi/) )
*   [丽塔](http://www.rednoise.org/rita/)
*   Java WorNet 库 ( [JWNL](http://sourceforge.net/projects/jwordnet/) )

**提供更多信息后**编辑****

 **我认为指定案例中的关键点是“最流行的64个词”的选择。选择的单词或短语应该是关键字或关键短语。所以这里的挑战是关键字或关键短语的提取。

有几本关于关键字/关键短语提取的书籍、论文和算法。怀卡托大学在 JAVA 中实现了一种著名的算法，称为[关键字提取算法 (KEA)](http://www.nzdl.org/Kea/)。KEA 从文本文档中提取关键短语，既可用于免费索引，也可用于使用受控词汇表进行索引。该实现是根据 GNU 通用公共许可证分发的。

另一个应该考虑的问题是（词性）POS 标记。名词比其他词性标签**包含更多信息。**因此，如果您检查 POS 标签并且选择的 64 个单词大部分是名词，可能会得到更好的结果。

此外，根据 Anette Hulth 发表的论文《[Improved Automatic Keyword Extraction Given More Linguistic Knowledge](http://acl.ldc.upenn.edu/acl2003/emnlp/pdf/Hulth.pdf)》，她的实验表明，关键词/关键短语大多具有或包含在以下五种模式之一中：

*   形容词（单数或质量）
*   NOUN NOUN（无论是唱歌还是大众）
*   形容词（复数）
*   NOUN (sing. or mass) NOUN (pl.)
*   名词（唱歌或弥撒）

总之，我认为可以改善您的结果的一个简单操作是找到每个单词的 POS 标签并主要选择名词以评估新的 RSS 提要。您可以使用 WordNet 来查找每个单词的 POS 标签，正如我上面提到的，网络上有许多库可以与 WordNet 的字典进行集成。当然，词干提取对于分类过程也是必不可少的，并且必须加以维护。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T14:31:08.410

尝试完全关闭词干。Stanford Intro to IR 作者[提供了一个粗略的理由](http://nlp.stanford.edu/IR-book/html/htmledition/features-for-text-1.html)，说明为什么词干会在文本分类上下文中造成伤害，并且至少没有帮助。

我已经在自定义多项式朴素贝叶斯文本分类工具上测试了自己的词干（我得到了 85% 的准确率）。我尝试了 org.apache.lucene.analysis.en 版本 4.4.0 提供的 3 个 Lucene 词干分析器，它们是 EnglishMinimalStemFilter、KStemFilter 和 PorterStemFilter，加上没有词干提取，并且我对小型和大型培训文档语料库进行了测试。 **当训练语料库较小时，Stmming 会显着降低分类准确率，而对于较大的语料库则保持准确率不变**，这与 Intro to IR 语句一致。

还有一些事情要尝试：

*   为什么只有64个字？我会把这个数字增加很多，但最好你根本没有限制。
*   试试[tf-idf（词频，逆文档频率）](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)。您现在使用的只是 tf. 如果将其乘以 idf，则可以缓解由“show”等常见且无信息的词引起的问题。鉴于您使用的热门词很少，这一点尤其重要。
*   增加训练语料库的大小。
*   尝试将二元组、三元组等以及不同[N 元组的](http://en.wikipedia.org/wiki/N-gram)组合（你现在只使用一元组）。

您可以转动许多其他旋钮，但我将从这些开始。你应该能够做得比 60% 好很多。80% 到 90% 或更高是常见的。**

# html - Safari中具有边框半径的965像素以上的杂散垂直线

> ID：12062582
> 
> 赞同：7
> 
> 时间：2012-08-21T20:31:19.583
> 
> 标签：html, safari, css

我注意到，如果我有一个宽度大于 965 像素且边框半径小于所有 4 个角的 div，则 div 中有一条杂散的垂直线。这是一个 jsFiddle 链接... [http://jsfiddle.net/Z3vFp/4/](http://jsfiddle.net/Z3vFp/4/)。请注意，这只发生在 Safari 中。有什么想法吗？另请注意，jsFiddle 中的 965 像素阈值可能略有不同。

编辑：我在配备 Retina 显示屏的 Macbook Pro 上。我猜这是一个rMBP的东西？

编辑 2：这是一个 jsFiddle 屏幕截图。[http://i.imgur.com/0rqSS.png](https://i.imgur.com/0rqSS.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T20:11:58.433

添加`-webkit-background-clip: padding-box;`

```
.foo {
    width: 966px;
    height: 50px;
    background-color: lightgray;
    padding: 25px;
    border-bottom-right-radius: 12px;
    border-bottom-left-radius: 12px;
    -webkit-background-clip: padding-box;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:22:09.423

我在 Safari 版本 6.0 (8536.25) 的 13" Mac Book Pro (OSX 10.8) 上观察到了这个问题。所以它与视网膜显示无关。当您仅将边框半径应用于一个、两个或三个角时会发生此问题。解决方案是将边界半径应用于所有四个角。

此代码显示一条杂散的垂直线：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
body {background-color:red}
#myBox {
  width: 960px;
  height: 300px;
  background-color: white;
  border-top-left-radius: 20px;
  border-bottom-left-radius: 20px;
  border-bottom-right-radius: 20px;
  margin: auto;
}
</style>
</head>
<body>
<div id="myBox">
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T14:41:58.337

即使所有四个角都设置为例如：5px，我也可以打开它

问题是 - 我不使用边界半径是因为苹果野生动物园有一个错误 - 还是等待苹果解决它

我估计要等苹果来解决 - 为富人服务，而我们农民不得不遭受 PC 的折磨

~（这是第三次世界大战爆发前的笑话）

# mongodb - 即使在添加索引后，mongodb groupby 也很慢

> ID：12062585
> 
> 赞同：3
> 
> 时间：2012-08-21T20:31:26.280
> 
> 标签：mongodb

我有一个简单的集合：

```
{
    "_id" : ObjectId("5033cc15f31e20b76ca842c8"),
    "_class" : "com.pandu.model.alarm.Alarm",
    "serverName" : "CDCAWR009 Integration Service",
    "serverAddress" : "cdcawr009.na.convergys.com",
    "triggered" : ISODate("2012-01-28T05:09:03Z"),
    "componentName" : "IntegrationService",
    "summary" : "A device which is configured to be recorded is not being recorded.",
    "details" : "Extension<153; 40049> on CDCAWR009 is currently not being recorded
    properly; recording requested for the following reasons: ",
    "priority" : "Major"
} 
```

集合中将有大约数百万份此类文件。我正在尝试按服务器名称分组并获取所有服务器名称的计数。从 RDBMS 查询的角度来看，这听起来很简单。

```
The query that I have come up with is 
    db.alarm.group( {key: { serverName:true }, reduce: function(obj,prev) { prev.count++ }, initial: { count: 0 }}); 
```

另外，我在 serverName 上添加了一个索引。

```
> db.alarm.getIndexes()
[
        {
                "v" : 1,
                "key" : {
                        "_id" : 1
                },
                "ns" : "test.alarm",
                "name" : "_id_"
        },
        {
                "v" : 1,
                "key" : {
                        "serverName" : 1
                },
                "ns" : "test.alarm",
                "name" : "serverName_1"
        }
] 
```

但是，我在 13 秒后在 mongodb 中得到响应。而在 sql server 中，类似的查询在没有索引的情况下也会在 4 秒内返回。

有什么我想念的吗？

感谢期待。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T21:23:37.800

从您编写的查询中可以看出，2.0 中的这种类型的聚合需要您运行 Map/Reduce。MongoDB 上的 Map/Reduce 有一些性能损失，之前在 SO 上已经介绍[过](https://stackoverflow.com/a/3951871/1148648)——基本上除非你能够跨集群并行化，否则你将通过 Spidermonkey 运行单线程 javascript——这不是一个快速的提议。由于您没有选择性，因此索引并没有真正的帮助-您只需要扫描整个索引以及可能的文档即可。

随着即将发布的 2.2（目前在撰写本文时的 rc1 中），您有一些选择。2.2 中引入的[聚合框架](http://docs.mongodb.org/manual/reference/aggregation)（它是原生的，不是基于 JS 的 Map/Reduce）有一个内置的[group 操作符](http://docs.mongodb.org/manual/reference/aggregation/#_S_group)，是专门为加速 MongoDB 中的这种操作而创建的。

我建议试一试 2.2，看看你的分组表现是否有所提高。我认为它看起来像这样（注意：未经测试）：

```
db.alarm.aggregate(
    { $group : {
        _id : "$serverName",
        count : { $sum : 1 }
    }}
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T21:25:44.237

另一种选择，也许是目前最高效的解决方案，可能是使用 distinct() 命令并在客户端计算结果。 [http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)

# javascript - 在每个列表中使用 javascript 增加一个数字，但继续增加扩展多个列表、行等

> ID：12062587
> 
> 赞同：0
> 
> 时间：2012-08-21T20:31:33.570
> 
> 标签：javascript, jquery, list

我有以下小提琴： http: [//jsfiddle.net/mauricederegt/mjdyW/17/](http://jsfiddle.net/mauricederegt/mjdyW/17/)它包含几个列表，使用javascript自动生成。所有工作都按预期进行。

现在在`<a>`标签中，我希望有不同的属性，每个属性都根据不同的值递增，但都从 0 开始。我在谷歌和这个网站上搜索了一些关于如何做到这一点的教程，但没有一个有效。

我有 5 个属性（已经在小提琴中注释掉了）：

1.  '数据-i': ,
2.  '数据-t': ,
3.  '数据-f': ,
4.  '数据-r': ,
5.  '数据-c': i++,

那么目标是什么？（我会分别解释每个属性需要，但都应该在同一个`<a>`）

**data-i:**应该从 0 计数到最后一个，`<a>`甚至扩展列表，所以：

```
<ul>
  <li>
    <a data-i="0">test</a>
    <a data-i="1">test</a>
    <a data-i="2">test</a>
  </li>
  <li>
    <a data-i="3">test</a>
    <a data-i="4">test</a>
    <a data-i="5">test</a>
  </li>
</ul>
<ul>
  <li>
    <a data-i="7">test</a>
    <a data-i="8">test</a>
    <a data-i="9">test</a>
  </li>
  <li>
    <a data-i="10">test</a>
    <a data-i="11">test</a>
  </li>
</ul> 
```

**data-f:**应该从 0 开始计数，并且计数必须在下一个`<ul>`甚至扩展列表中增加，所以：

```
<ul>
  <li>
    <a data-f="0">test</a>
    <a data-f="0">test</a>
    <a data-f="0">test</a>
  </li>
  <li>
    <a data-f="0">test</a>
    <a data-f="0">test</a>
    <a data-f="0">test</a>
  </li>
</ul>
<ul>
  <li>
    <a data-f="1">test</a>
    <a data-f="1">test</a>
    <a data-f="1">test</a>
  </li>
  <li>
    <a data-f="1">test</a>
    <a data-f="1">test</a>
  </li>
</ul> 
```

**data-r:**应该从 0 开始计数，并且计数必须在下一个`<li>`不扩展列表中增加，所以：

```
<ul>
  <li>
    <a data-r="0">test</a>
    <a data-r="0">test</a>
    <a data-r="0">test</a>
  </li>
  <li>
    <a data-r="1">test</a>
    <a data-r="1">test</a>
    <a data-r="1">test</a>
  </li>
</ul>
<ul>
  <li>
    <a data-r="0">test</a>
    <a data-r="0">test</a>
    <a data-r="0">test</a>
  </li>
  <li>
    <a data-r="1">test</a>
    <a data-r="1">test</a>
  </li>
</ul> 
```

**data-c：**应该从 0 开始计数，并且计数必须在下一个`<a>`不扩展任何东西：**注意：我已经使用 `i++' 解决了这个问题**

```
<ul>
  <li>
    <a data-c="0">test</a>
    <a data-c="1">test</a>
    <a data-c="2">test</a>
  </li>
  <li>
    <a data-c="0">test</a>
    <a data-c="1">test</a>
    <a data-c="2">test</a>
  </li>
</ul>
<ul>
  <li>
    <a data-c="0">test</a>
    <a data-c="1">test</a>
    <a data-c="2">test</a>
  </li>
  <li>
    <a data-c="0">test</a>
    <a data-c="1">test</a>
  </li>
</ul> 
```

**EXTRA：data-t：**不应从 0 开始计数，但应包含与其所在类相同的数据，例如：

```
<ul>
  <li>
    <a class="a" data-t="a">test</a>
    <a class="b" data-t="b">test</a>
    <a class="c" data-t="c">test</a>
  </li>
  <li>
    <a class="a" data-t="a">test</a>
    <a class="b" data-t="b">test</a>
    <a class="c" data-t="c">test</a>
  </li>
</ul>
<ul>
  <li>
    <a class="a" data-t="a">test</a>
    <a class="b" data-t="b">test</a>
    <a class="c" data-t="c">test</a>
  </li>
  <li>
    <a class="a" data-t="a">test</a>
    <a class="b" data-t="b">test</a>
  </li>
</ul> 
```

我知道这很多，希望一切皆有可能。最终目标应类似于：

```
<a class="j" data-i="0" data-t="j" data-f="0" data-r="0" data-c="0"></a>
<a class="f" data-i="1" data-t="f" data-f="0" data-r="0" data-c="1></a>
etc 
```

非常感谢

亲切的问候

ps我的英语不是很完美，所以我希望这些例子能说明我需要什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:47:11.640

我认为这应该有效（未经测试）

```
var i_count=0;
$('ul a').each(function(){
    $(this).attr('data-t', $(this).attr('class'));
    $(this).attr('data-i',i_count);
    i_count++;
});

var f_count=0;
$('ul').each(function(){
    $(this).find('a').each(function(){
        $(this).attr('data-f', f_count);
    });
    f_count++;
});
r_count=0;
$('ul').each(function(){
    $(this).find('li').each(function(){
        $(this).find('a').each(function(){
            $(this).attr('data-r',r_count);
        });
        r_count++;
    });
    r_count=0;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:38:59.200

试试这个：http: [//jsfiddle.net/mjdyW/18/](http://jsfiddle.net/mjdyW/18/)

# c# - 创建自己的应用程序项目文件

> ID：12062588
> 
> 赞同：-3
> 
> 时间：2012-08-21T20:31:38.463
> 
> 标签：c#, project, project-files

是否有任何指南将数据从**C** **# 应用程序**保存到其自己的*外部*项目文件，例如嵌入图像等，以便稍后加载？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:36:13.697

您可以在 .NET 程序集中嵌入几乎任何类型的数据并从中读取，但您不能修改自己的可执行文件，即使可以，那也是个坏主意。一方面，想想一个防病毒程序在运行时看到一个 EXE 突然变化是多么令人毛骨悚然。

如果您有需要读写的元数据（图像或任何其他类型的文件）*，*只需使用文件系统。该类`Environment`的函数将返回众所周知的每个应用程序和每个用户的位置，您可以在其中存储任何您想要的东西。

**编辑**

我不确定这是否是你要问的，但它就是这样。假设您有一个名为的类`Document`，其中包含一些文本和一些图像，它们以某种未指定的方式呈现。所以基本上它看起来像这样：

```
[Serializable]
class Document
{
    public string Text { get; set; }
    public Image[] Images { get; set; }
} 
```

不知道是什么`Image`，我只是编的。使用 .NET 序列化函数，您可以将其转换为字节流：

```
Document doc = GetDocumentFromUI();

MemoryStream stm = new MemoryStream(1024);
BinaryFormatter fmt = new BinaryFormatter();
fmt.Serialize(stm, doc);
byte[] data = stm.ToArray(); 
```

然后您可以将其保存到文件中。然后您可以加载文件并将其转换为文档：

```
byte[] data = LoadDocumentFromDisk();

BinaryFormatter fmt = new BinaryFormatter();
MemoryStream stm = new MemoryStream(data);
stm.Position = 0;
Document doc = fmt.Deserialize(stm) as Document; 
```

这显然很粗糙，但是您可以序列化和反序列化 .NET 中的大多数对象，包括一些内置类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:33:17.263

不可能做你想做的事。您只能读取嵌入式资源，不能修改它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:27:33.907

只需序列化您要保存的数据并在加载时对其进行反序列化。如果您想编写更具体的数据，则必须确定自己的文件格式。

# dart - 如何保存文本输入框中的值并稍后在 Dart 中加载它？

> ID：12062593
> 
> 赞同：3
> 
> 时间：2012-08-21T20:32:07.840
> 
> 标签：dart

（来自邮件列表）

如何创建某种文本输入框以允许我保存该文本并稍后在代码中使用它？我正在使用飞镖。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T20:32:07.840

结合使用 InputElements 和 HTML5 本地存储。Dart 中的 Storage 接口实现了 Map，因此您可以将键/值对存储为字符串。

的HTML：

```
<p>
From local storage: <output id="username-output"></output>
</p>

<label for="username">Username:</label>
<input type="text" name="username" id="username">
<input type="submit" id="save" value="Save"> 
```

飞镖：

```
import 'dart:html';

void main() {
  InputElement username = query('#username');
  InputElement submit = query('#save');
  Element output = query('#username-output');
  Storage localStorage = window.localStorage;

  String savedUsername = localStorage['username'];
  if (savedUsername != null) {
    output.text = savedUsername;
  }

  submit.onClick.listen((Event e) {
    output.text = username.value;
    localStorage['username'] = username.value;
  });
} 
```

# cocos2d-x - 在 cocos2dx 中的 touchbegan 上调用 CCMenuuiItem 函数

> ID：12062596
> 
> 赞同：0
> 
> 时间：2012-08-21T20:32:14.693
> 
> 标签：cocos2d-x

我想在 Touch Begin 上调用 CCMenuItem 但它在 touch end 上调用如何解决这个问题？

我的代码是这样的

CCMenuItemImage* rld=CCMenuItemImage::itemFromNormalImage("bomb.png","bomb.png",this,menu_selector(MyScene::boom));

我想在 touchbegin 上调用繁荣功能....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:58:39.317

在你的触摸开始

```
CCCallFuncN* functionCall = CCCallFuncN::actionWithTarget(this,callfuncN_selector(MyScene::boom));
this->runAction(functionCall); 
```

或者只是

```
this->boom(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T06:57:57.300

**MyLayer.cpp**

MyLayer::MyLayer()

{

this->setTouchEnabled(true);

}

```
 void MyLayer::registerWithTouchDispatcher(void)
 {
     CCDirector::sharedDirector()->getTouchDispatcher()->addStandardDelegate(this,0);

 } 
```

无效 MyLayer::boom()

{

CCLog("Smart is the new Sexy")

}

```
 void MyLayer::ccTouchesBegan(CCSet *pTouches, CCEvent *pEvent)
{ 
```

CCMenuItemImage* menuItemImage = CCMenuItemImage::itemFromNormalImage("bomb.png","bomb.png", this,menu_selector(MyLayer::boom));

}

# opengl - 变换反馈输入输出大小

> ID：12062599
> 
> 赞同：0
> 
> 时间：2012-08-21T20:32:38.643
> 
> 标签：opengl, transform, feedback, vertex-shader

我有一个关于 OpenGL 中的变换反馈的小问题。

我的输出是否可能与我的输出不同？让我们说一个像这样的VS：

```
in vec3 pos;
in vec3 move;

out vec3 newPos;

void main()
{
  newPos = pos + move;
} 
```

所以我的输出缓冲区只是新的位置！

或者反过来说，输出多于输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T00:36:02.397

当然。变换反馈保存顶点着色器的输出值。在传递给几何或片段着色器时，它们不需要匹配类型或数字的输入，因此也不需要匹配变换反馈。

OpenGL SuperBible 有一个很好的关于变换反馈的部分。

# php - 全文搜索在 mysql 5.5 中不起作用

> ID：12062600
> 
> 赞同：-1
> 
> 时间：2012-08-21T20:32:41.373
> 
> 标签：php, mysql, full-text-search

下面的代码在 MySQL 5.0.24a 中工作，但在 MySQL 5.5 中不再工作。

`$q`是 UTF8 字符。

```
SELECT *,MATCH(p.name,p.keywords) AGAINST('$q') AS pscore 
FROM products as p 
WHERE MATCH(p.name,p.keywords) AGAINST('$q') ORDER BY pscore DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:09:51.800

从 MySQL 5.5（或准确地说是 5.5.5）开始，InnoDB 是默认的存储引擎，任何没有指定存储引擎的表，例如 Engine=MyISAM 都会自动创建为 InnoDB，造成很多麻烦。:(

我怀疑这是您的问题，因为许多生产站点都遇到过这个问题！

# database - 如何将二叉树存储到文件 - C 语言

> ID：12062606
> 
> 赞同：0
> 
> 时间：2012-08-21T20:33:28.097
> 
> 标签：database, serialization, tree, storage, deserialization

我正在用 C 语言维护一个复杂结构树。结构如下。现在我想要一些库或源代码，可以让我从文件中保存和检索复杂结构的二叉树。非常感谢您的帮助。

```
typedef struct rb_red_blk_node {
    int isdataNode; /* if isdataNode=0 then the node is not the one carrying data */
    int red; /* if red=0 then the node is black */
    int Maxnodecount;

    // For hash nodes only.
    off_t heighestnodeleftsubtree;
    char* hash;
    int filecounter;
    //void* key;

    // For datanodes nodes only.
    off_t startkey; // Starting bytes of file.
    off_t endkey;   // Ending bytes of file.
    char *filename;
    void* info;

    struct rb_red_blk_node* left;
    struct rb_red_blk_node* right;
    struct rb_red_blk_node* parent;
} rb_red_blk_node; 
```

# python - 使用最少内存开销的最佳 GUI 制造商

> ID：12062608
> 
> 赞同：1
> 
> 时间：2012-08-21T20:33:39.087
> 
> 标签：python, c++, graphics

所以我正在考虑制作一个带有多个选项卡的数据可视化器——我的第一个任务是在所有变量（一个选项卡）之间建立相关性。

我正在考虑在 wxPython 中执行此操作并在 Numpy/Scipy 中进行计算。

我的问题是，您认为使用 Qt 和 C++ 执行此操作会更快/使用更少的资源吗？我更喜欢使用 Numpy，因为它通常具有显着的优化？让它比简单的 C 代码更好。

是否有可能在 Qt 中制作前端并在 Python 中编写后端 - 如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:44:34.987

我很**清楚**你需要什么！

你应该看看[PySide](http://www.pyside.org "PySide")。

来自网站：“ *PySide 项目为 Qt 跨平台应用程序和 UI 框架提供 LGPL 许可的 Python 绑定。PySide Qt 绑定允许免费开源和专有软件开发，最终旨在支持所有平台作为 Qt 本身。* "

有关 PySide 的教程，您可以[查看 PySide 文档](http://developer.qt.nokia.com/wiki/PySideDocumentation/)或 PySide 上的[ZetCode](http://zetcode.com "ZetCode 网站") [教程](http://zetcode.com/gui/pysidetutorial/ "ZetCode PySide 教程")。

# android - 这些片段可以在 android 2.3 项目中使用吗？

> ID：12062612
> 
> 赞同：0
> 
> 时间：2012-08-21T20:33:51.637
> 
> 标签：android, layout, android-fragments

For`fragments`和其他较新的 UI 组件，可以在已构建的项目中使用`target 2.3`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:40:04.090

当然，还有[支持库](http://developer.android.com/tools/extras/support-library.html)和其他项目，例如[Action Bar Sherlock](http://actionbarsherlock.com/)

# asp.net - 将整数值传递给 .net 中的 SqlParameter

> ID：12062614
> 
> 赞同：0
> 
> 时间：2012-08-21T20:33:55.387
> 
> 标签：asp.net, sqldatareader, sqlparameter

我想将整数值传递给正在执行 SqlDataReader 的 SqlParameter，但是当我传递整数值时，它说，没有提供参数，下面是我的代码：

```
Common SqlDataReader Function

public static SqlDataReader ExecuteReader(string procedure, SqlParameter[] parameters, CommandType commandType)
    {
        SqlDataReader reader = null;
        SqlConnection connection = new SqlConnection(connectionString);
        using (SqlCommand command = new SqlCommand(procedure, connection))
        {
            if (connection.State == ConnectionState.Closed)
            {
                connection.Open();
            }
            if (parameters != null)
            {
                if (commandType == CommandType.StoredProcedure)
                    command.Parameters.AddRange(parameters);
            }
            reader = command.ExecuteReader(CommandBehavior.CloseConnection);
        }
        return reader;
    } 
```

调用代码：

```
SqlDataReader obj = SqlHelper.ExecuteReader("sp_TheWireUser", new SqlParameter[] { new SqlParameter("@USERID", Convert.ToInt32(1)), new SqlParameter("@ROLEID", Convert.ToInt32(6)) }, System.Data.CommandType.StoredProcedure);
        Response.Write(obj.HasRows); 
```

我也尝试`1`作为参数输入，`"1"`但都不起作用

```
ALTER PROCEDURE [dbo].[sp_TheWireUser]
    @USERID INT,
    @RoleID INT
AS
BEGIN
    SELECT USR.USERID FROM Users USR
    INNER JOIN UserRoles UR
    ON USR.UserID = UR.UserID
    INNER JOIN Roles R
    ON UR.RoleID = R.RoleID
    WHERE R.RoleID = @RoleID
    AND USR.UserID = @USERID
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:46:05.820

为什么要`1`通过调用 Convert.ToInt32() 转换为整数。`1`已经是整数了。所以你不需要这样做。

```
SqlDataReader obj = ExecuteReader("sp_TheWireUser", 
                new SqlParameter[] { 
                    new SqlParameter("@USERID", 1),
                    new SqlParameter("@ROLEID", 6)
                },
                System.Data.CommandType.StoredProcedure); 
```

此代码不应引发任何编译时错误。如果您遇到运行时异常，可能的原因是您的 Stored Procs 参数的***数据类型与***您在此处传递的数据类型不同。它应该`Integer`根据您的代码。

*注意：希望您`DataReader`在使用后关闭。*

**编辑：**你必须告诉**`CommandType`**

```
 using (SqlCommand command = new SqlCommand(procedure, connection))
 {
    command.CommandType = commandType; //passed from your method parameter
    //your remaining code
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:59:56.870

看看我过去问过的一个类似问题。 [通过对 DataTable、SqlConnection、SqlCommand 和 SqlDataAdapter 使用 Statement & Dispose 清理资源](https://stackoverflow.com/questions/11158602/cleaning-up-resources-via-using-statement-dispose-for-datatable-sqlconnection)

它将向您展示如何清理数据以及如何添加参数。另外，等到最后一分钟打开连接，即先添加参数。

# c# - 从自定义序列化类调用原始反序列化方法？

> ID：12062616
> 
> 赞同：2
> 
> 时间：2012-08-21T20:34:05.583
> 
> 标签：c#, serialization, deserialization

好的，可以说我有一个如下所述的课程：

```
[serializable]
class foobar
{
    const int version =1;
    List<Object> Bar;

    <methods etc n stuff>
} 
```

好的，这么直截了当。

现在，让我们在版本 2 中添加一个新成员。

```
[serializable]
class foobar
{
    const int version =2;
    List<Object> Bar;  
    public string NickName;

    <methods etc n stuff>
} 
```

好的，所以现在我做了一件非常顽皮的事情。我决定实际上，我不希望 Bar 成为一个列表，而是一个自定义列表之类的东西，具有一些额外的功能或隐藏的功能。所以我这样做：

```
[serializable]
class foobar
{

    const int version =3;
    FooList BarList;  

    public string NickName;

    <methods etc n stuff>
} 
```

好的，这不起作用，照原样。因此，我实现了自定义序列化并将新的 barlist 手动设置为反序列化列表，并手动读取昵称。到目前为止一切顺利，一切正常。

但是，现在，版本 4 出现了，我添加了另一个成员参数。我现在必须手动序列化和手动恢复所有参数，使用越来越复杂的序列化和反序列化方法集，只是为了支持一个（可能）永远不会真正使用的古老错误

我的问题是：

是否可以在序列化时调用原始的获取对象数据方法？也就是说，据我了解，有一些逻辑可以做到这一点

```
If(object implements ISerializable)
   object.serialize
else
   SerialzeUsingReflection(object) //The "original" way 
```

然后，我可以根据版本决定自定义反序列化，或者，如果我知道不会有“丢失”数据属性调用原始反序列化方法？

在我的荒芜中，例如

```
if(version ==2)
{
    ... //do all the deserialise manually
}
else
{
    CallFrameworkOriginalMethod();
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T05:33:15.057

您可以执行您描述的版本控制，但您需要牢记两件重要的事情：

首先，您不应该使用 OptionalFieldAttribute 的“VersionAdded”属性。在[msdn](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.optionalfieldattribute.versionadded.aspx)上，他们清楚地声明“此属性未使用且已保留”。这是重要的信息，因为首先，当框架文档说某些内容被保留时，您应该避开它。其次，框架文档说它没有被使用，所以即使你继续使用它，你也不应该期望它能够工作。我知道，[msdn上还有一个页面](http://msdn.microsoft.com/en-us/library/ms229752.aspx)这解释了“版本容忍序列化”的工作原理以及您应该如何使用 VersionAdded 属性。然而，这是他们首先编写它应该如何工作的规范但从未真正解决实现的情况 - 根据页面 VersionAdded 应该已经添加了 .NET 2.0 版。这发生了，但没有逻辑与序列化框架中的该属性相关联。现在我们使用的是 4.5 版，但该逻辑仍未实现。避开并使用其他东西，这取决于您是否打算使用第三方实用程序，如“sharpserializer”，或者您是否要自己编写。

其次，您问是否可以调用原始的获取对象数据方法。答案是否定的，当您序列化一个对象时，唯一写入的是字段中证实的状态。不包括来自方法体的 IL。

# asp.net - 我如何使用和 asp:linkbutton 与事件

> ID：12062618
> 
> 赞同：2
> 
> 时间：2012-08-21T20:34:16.007
> 
> 标签：asp.net, vb.net

我用这个使用 asp:button

```
Private Sub cmdSignOut_ServerClick(ByVal sender As Object, ByVal e As System.EventArgs) Handles cmdSignOut.ServerClick
   FormsAuthentication.SignOut()
   FormsAuthentication.RedirectToLoginPage()
End Sub 
```

但是我怎样才能使用这个事件，所以我可以从 asp:linkbutton 调用它！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:37:54.867

隔离您的代码：

```
Private Sub cmdSignOut_ServerClick(ByVal sender As Object, ByVal e As System.EventArgs) Handles cmdSignOut.ServerClick
    DoSomeStuff()
End Sub   

Private Sub DoSomeStuff()
    FormsAuthentication.SignOut()
    FormsAuthentication.RedirectToLoginPage()
End Sub 
```

现在你可以打电话`DoSomeStuff`了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:58:33.953

使用链接按钮的`OnCommand`属性。

```
<asp:LinkButton
   id="lb_sign_out"
   runat="server"
   Text="Sign Out"
   CommandArgument='<%# Container.DataItem("User_ID") %>' 
   CommandName="Delete" 
   OnCommand="cmdSignOut_ServerClick" /> 
```

我不确定您如何存储用户的 id - 您可能需要更改（或简单地删除）命令参数和命令名称。

# fortran - '写; 没有很多空格的语句

> ID：12062619
> 
> 赞同：2
> 
> 时间：2012-08-21T20:34:16.693
> 
> 标签：fortran

该`write`函数确实打印了列之间有很多空格的参数，这最终给了我一个非常大的文件。所以我如何修剪输出，喜欢一个空格。

```
open(unit=1,file='gfortran.txt')
write(1,ERR=1001)1,2,3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T21:21:54.533

您需要使用 Fortran 的*编辑描述符*来控制输出格式。如果您只想在一行上写 3 个整数，那么您可以使用

```
write(1,fmt='(3i2)',err=1001) 1, 2, 3 
```

这会将整数写入输出文件中的 2 个字符宽的字段中。您应该熟悉许多编辑描述符的变体。几个例子：

```
fmt='(i4.2)'  ! 1 integer is written into a 4-character wide field, with at least 2 digits so a leading 0 is written if necessary
fmt='(6f9.4)' ! 6 reals are written into 9-character fields, with 4 digits after the decimal point 
```

除此之外还有很多，您的编译器文档将解释一切。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T07:06:53.860

除了 High Performance Mark 所写的内容之外，这只是一个解释性评论。如果您没有在`WRITE`语句中提供显式格式说明符，则使用所谓的*列表定向输出*。每个 Fortran 处理器（编译器的 Fortran 词）都可以自由选择一种输出格式，以保证列表中的每个元素都将被完整打印。这通常会导致使用非常广泛的（和编译器相关的）字段。

# java - xna 中的尺寸

> ID：12062623
> 
> 赞同：0
> 
> 时间：2012-08-21T20:34:28.837
> 
> 标签：java, xna, dimension

在 java 中有一个名为的变量类型`Dimension`，您可以在其中存储宽度和高度 ex: `Dimension dimension = new Dimension(900,600)`。我知道我在 xna 中需要这样的东西，`Vector2`但`Point`那些是用于存储坐标而不是维度的。有人可以告诉我xna中类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:45:10.637

虽然 tom502 的回答在技术上是正确的，但它需要您参考`System.Drawing.dll`，仅在 Windows 平台上可用。

如果你想坚持直接的 XNA，你应该只使用`Vector2`或实现你自己的`Dimension`结构。您是正确的，因为 a`Vector2`应该表示空间坐标，而不是对象的大小，但 XNA 本身也使用它来表示大小 - 例如，在测量字符串时。除了名称之外，拥有两个基本相同的结构并没有多大意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:39:48.673

C# 中有`Size`结构 - 它包含高度和宽度

[http://msdn.microsoft.com/en-us/library/system.drawing.size.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.size.aspx)

# ruby-on-rails - 具有用户权限的 ActiveRecord 角色

> ID：12062625
> 
> 赞同：0
> 
> 时间：2012-08-21T20:34:29.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, mass-assignment

对rails相当陌生，如果我误解了什么，请原谅我。我有一个如下所示的用户模型。理想情况下，我想做的是让普通用户只能更新他们的密码，但让管理员能够更改他们的用户名、电子邮件等......

```
class User < ActiveRecord::Base
  # Default auths
  attr_accessible :password, :password_confirmation, :remember_me
  # Admin auths
  attr_accessible :login, :username, :email, :password, :password_confirmation, :remember_me, :role_ids, :as => :admin
end 
```

要以管理员身份更新记录，我执行以下操作：

```
@user.update_attributes(params[:user], :as => :admin) 
```

但是可以说我想以非管理员身份更新用户记录：

```
@user.update_attributes(params[:user]) 
```

我收到以下异常：

```
ActiveModel::MassAssignmentSecurity::Error in UsersController#update
Can't mass-assign protected attributes: email, username 
```

我想要发生的是忽略不可访问的参数，只更新可访问的属性，而目前整个更新失败。这可能吗？更重要的是，这是推荐的做事方式吗？在调用 update_attributes 之前手动去除不可访问的参数会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:57:12.013

您可以做的一件事是设置

```
config.active_record.mass_assignment_sanitizer = :logger 
```

这将记录过滤后的属性而不是 throwing `ActiveModel::MassAssignmentSecurity::Error`。

或者，您可以编写自己的 sanitizer 扩展[`ActiveModel::MassAssignmentSecurity::Sanitizer`](https://github.com/rails/rails/blob/aa2639e746d8af5d7673bbbbbccbe868edeb0161/activemodel/lib/active_model/mass_assignment_security/sanitizer.rb)，自定义`process_removed_attributes`以静默失败。

至于你的其他问题

> ...这是推荐的做事方式吗？在调用 update_attributes 之前手动去除不可访问的参数会更好吗？

我认为您应该研究为什么允许提交包含字段的表单，这些字段在提交给某些角色而不是其他角色时会被 Rails 拒绝。例如，如果普通用户的角色省略了该属性，那么让普通用户查看/更改`Username`表单中的文本字段是没有意义的。`attr_accessible`

相反，您应该为非管理员用户隐藏非管理员字段，并将`:strict`消毒剂留在原处。唯一`ActiveModel::MassAssignmentSecurity::Error`会引发的情况是，如果有人正在修改 DOM，试图提交他们未提供的字段，因此不允许修改相关模型。

# jquery - 在 div 中加载内容并且不显示样式和脚本

> ID：12062633
> 
> 赞同：1
> 
> 时间：2012-08-21T20:35:08.237
> 
> 标签：jquery, ajax

我有一个使用 ajax 加载不同页面的页面。但另一种使用一些脚本来转换灰度图像效果。[灰度图像悬停](http://webdesignerwall.com/tutorials/html5-grayscale-image-hover) 问题是当它尝试加载时不显示效果例如：

在我的主页中：

```
$(function(){
$("#family").click(function () {
    $("#proyects").load('family.html');
});
}); 
```

把内容放在这里

```
<div class="ten columns content" id="proyects">

</div> 
```

另一个页面加载灰度效果，单独工作正常但是用ajax加载时不显示效果

```
<script src="js/jquery.min.js" type="text/javascript"></script> 
<script src="js/gray.js" type="text/javascript"></script>

    <section id="content">
        <article class="item">
        <a href="#"><img src="images/proyecto1.jpg" height="223" width="327"></a>
         </article>
             </section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:00:14.033

`#family`根据您的代码示例，加载页面时没有标签，因此`click()`调用不会绑定到任何东西。如果`#family`在页面加载后填充，则应`on('click')`在 DOM 元素实际加载到页面上时使用执行正确事件绑定的调用。我还建议使用[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)方法`load()`来正确处理 AJAX 请求。

换句话说...

```
$(function(){
    $(document).on('click', '#family', function (event) {
        $.ajax({
            url: '/path/to/family.html'
          , dataType: 'html'
        }).done(function (data) {
            $('#proyects').append(data);
        }); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:44:18.223

我不熟悉这个类，但听起来 gray.js 脚本是在页面加载之后加载的，但在通过 ajax 加载图像之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:48:16.187

我对加载 AJAX 不太熟悉[一点也不熟悉]，但我有一些理论。

可能是 gray.js 没有加载到 family.html 正在加载的页面上吗？或者，如果 jQuery 被多次调用（一次在加载 family.html 的页面上，一次在 family.html 中），可能会导致一些问题。

# jquery - 如何使用 Jquery 将 HTML5 画布对象分配给变量？

> ID：12062634
> 
> 赞同：2
> 
> 时间：2012-08-21T20:35:08.127
> 
> 标签：jquery, html, canvas

为什么在下面的代码中，只有显式的 Javascript 版本有效，而 Jquery 版本无效（已注释掉）？

```
 <html>
     <head>
         <title>Canvas Tutorial</title>
         <script type="text/javascript" src="./jquery-1.6.3.min.js"></script>
     </head>
     <body>
         <canvas id="can" width="150" height="150">Fallback</canvas>
         <script type="text/javascript">
             //var can = $("#can").get();
             var can = document.getElementById("can");
             var ctx = can.getContext('2d');
         </script>
     </body>
 </html> 
```

我不断收到通知

```
TypeError: 'undefined' is not a function (evaluating 'can.getContext('2d')') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:39:15.210

因为[`.get`](http://api.jquery.com/get/)不传递任何参数返回一个类似数组的结构。你应该使用：

```
var can = $("#can").get(0); 
```

或简写：

```
var can = $("#can")[0]; 
```

获取 DOM 元素引用。

[**小提琴**](http://jsfiddle.net/ult_combo/cM2Fj/1/)

从[文档](http://api.jquery.com/get/)中：

> 如果没有参数， .get() 会返回所有元素。[...]
> 
> 此调用返回所有匹配的 DOM 节点，包含在标准数组中。

[**测试**](http://jsfiddle.net/ult_combo/cM2Fj/2/)：

```
>>> var can = $("#can").get(); console.log(can instanceof Array);
true
>>> var can = $("#can").get(0); console.log(can instanceof Array);
false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:41:38.723

使用[jQuery ID 选择器](http://api.jquery.com/id-selector/)选择带有 ID 的画布元素`can`。这将为您提供一个 jQuery 对象。每个 jQuery 对象都伪装成一个数组，因此您可以使用标准数组解引用来获取底层 DOM 元素。（见：[http](http://api.jquery.com/get/) ://api.jquery.com/get/ ）

```
var can = $("#can")[0];
var ctx = can.getContext('2d'); 
```

[试试看！](http://jsfiddle.net/adamzr/8Q3vG/)

# mysql - 内连接 3 个表以获得权限

> ID：12062636
> 
> 赞同：2
> 
> 时间：2012-08-21T20:35:22.667
> 
> 标签：mysql, sql

嘿，我正在尝试使用表用户中的所有记录填充我的查询，并让每个人检查他们从其他 2 个表（user_permission 和权限）中的权限。

我当前的查询是这样的：

```
SELECT user.id, user.email,  
CONCAT(' ', user.name, user.username) AS theNameUserName,
IF(user.opted_in = 0, 'NO', 'YES') AS optedIn  
FROM user AS user, user_permission AS userPerm
INNER JOIN permission AS Perm ON Perm.id = userPerm.permission_id; 
```

它执行没有问题，但一遍又一遍地只有相同的数据。它只**返回1000条记录，每个人重复3次**。我在**用户表中有****470 个用户**，所以我应该返回**所有 470 条记录**，这些记录也告诉我他们的许可。

 ****我需要对上面的查询做什么才能做到这一点？**User.id**将与**user_permission user_id**匹配。

user_permission 表布局：

```
 user_id  permission_id
       1        1
       2        3
       3        3
       8        4
       9        4
      10        4
      11        4
      12        4
      13        4
       ....etc etc 
```

权限表：

```
 id            name
    4      registered users
    3      editor
    2      developer
    1      administrator
    5      registered builders 
```

用户表：

```
 id      name         email                username           opted_in
   11   David Dxxxx     dxxxxx@exxxx.com    dxxxxxx@exxxxx.com      0
   12   Michael Lxx     sx@sprintmail.com   sxxxxxx@sxxxxx.com      0
   13   Jon Fxxxxxx     jxxxxxxx@xxx.com    jxxxxxx@sxxxxx.com      0
        etc etc ....... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:39:12.137

你有一个不寻常的隐式（逗号分隔）`INNER JOIN`和显式混合，最终你没有条件加入`user`，`user_permission`这就是你得到两者的笛卡尔积的原因。你`JOIN`的 s 应该看起来像：

```
SELECT
  user.id,
  user.email,  
  CONCAT_WS(' ', user.name, user.username) AS theNameUserName,
  IF(user.opted_in = 0, 'NO', 'YES') AS optedIn  
FROM 
  user
  LEFT JOIN user_permission AS userPerm ON user.id = userPerm.user_id
  INNER JOIN permission AS Perm ON Perm.id = userPerm.permission_id; 
```

我用`LEFT JOIN`between`user`和替换了`user_permission`没有相关权限的用户作为`NULL`. 如果应该从结果中省略它们，请改用 an `INNER JOIN`。

我也替换了你的`CONCAT()`，`CONCAT_WS()`因为你首先有空间——你只是在字符串的前面加上一个空格，而不是把两者分开（如果这是你想要的）。

最后一点：您的`IF()`条件`SELECT`对 MySQL 和其他一些 RDBMS 非常有效，但最便携的版本将使用 a`CASE`代替：

```
CASE WHEN user.opted_in = 0 THEN 'NO' ELSE 'YES' END AS theNameUserName 
```

...如果您希望需要在不同的 RDBMS 上运行它，这只是一个建议。****

# iphone - Cordova EmailComposer 选项

> ID：12062645
> 
> 赞同：0
> 
> 时间：2012-08-21T20:36:14.243
> 
> 标签：iphone, cordova

嗨，我正在使用 Cordova EmailComposer 插件，其中包含以下内容

```
Cordova.exec(null, null, "EmailComposer", "showEmailComposer", [args]); 
```

我正在努力设置主题行和类似的信息。当我更改`null`值时，它会破坏插件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:52:40.157

用法：

```
// Define the arguments
var args = {
toRecipients : string,
ccRecipients : string,
bccRecipients : string,
subject : string,
body : string,
bIsHtml : boolean
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T05:35:36.543

尝试在 HTML 页面的正文中使用此示例代码。

```
<body>
        <div class="app">
            <h1>Apache Cordova</h1>
            <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Device is Ready</p>
                        <center><button onclick="cordova.exec(null, null, 'EmailComposer', 'showEmailComposer', [args]);">Compose Email</button></center>
            </div>
        </div>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript" src="js/EmailComposer.js"></script>

        <script type="text/javascript">
            app.initialize();
            var args = {
                toRecipients :["xyz@yahoo.co.in"],
                ccRecipients :["abc@gmail.com"],
                bccRecipients :["abc@gmail.com"],
                subject :"Hello",
                body : "HI",
                bIsHtml : true
            };

        </script>

    </body> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T15:02:38.607

我找到了以下问题的答案

```
window.plugins.emailComposer.showEmailComposer("Subject","PlainTextBody", "recipient,recipient", "ccRecipient", "bccRecipient",false); 
```

# c# - 从另一个可执行文件调用内部类中的函数

> ID：12062646
> 
> 赞同：8
> 
> 时间：2012-08-21T20:36:18.983
> 
> 标签：c#, .net, reflection

我想从我自己的代码中调用 .net 可执行文件中的函数。我使用了反射器并看到了这个：

```
namespace TheExe.Core
{
    internal static class AssemblyInfo
    internal static class StringExtensionMethods
} 
```

在命名空间 TheExe.Core 是我感兴趣的函数：

```
internal static class StringExtensionMethods
{
    // Methods
    public static string Hash(this string original, string password);
    // More methods...
} 
```

使用此代码我可以看到哈希方法，但我该如何调用它？

```
Assembly ass = Assembly.LoadFile("TheExe");
Type asmType = ass.GetType("TheExe.Core.StringExtensionMethods");
MethodInfo mi = asmType.GetMethod("Hash", BindingFlags.Public | BindingFlags.Static);
string[] parameters = { "blabla", "MyPassword" };

// This line gives System.Reflection.TargetParameterCountException
// and how to cast the result to string ?
mi.Invoke(null, new Object[] {parameters}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T20:38:05.213

您正在使用当前代码将字符串数组作为单个参数传递。

由于`string[]`可以强制转换为`object[]`，因此您只需将`parameters`数组传递给`Invoke`.

```
string result = (string)mi.Invoke(null, parameters); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T20:46:45.220

如果您需要此用于测试目的，请考虑使用 InternalsVisibleTo 属性。这样，您可以使您的测试程序集成为主程序集的“朋友”并调用内部方法/类。

如果您没有控制（或无法签署）程序集 - 如果必须，反射是执行此操作的方法。当程序集以任何形式发生变化时，调用第三方程序集的内部方法是一种让人头疼的好方法。

# java - Tomcat 7 + Maven 3 部署插件 - 一步一步

> ID：12062648
> 
> 赞同：0
> 
> 时间：2012-08-21T20:36:32.587
> 
> 标签：java, plugins, maven-3, tomcat7, web-deployment

我研究了很多关于 tomcat-maven-plugin 的信息。我没有关于如何进行集成的确切步骤。

我尝试更改 tomcat-users.xml、pom.xml、settings.xml 并在配置中添加了一个目标。

谁能逐步解释该怎么做？

我正在使用 Maven 3 和 Tomcat 7 以及 Eclipse。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:30:02.597

最简单的方法是使用 ant run 插件，它将 WAR 文件复制到 tomcat 的 webapps 目录。 [http://www.itutities.com/tools/maven-3-deploy-war-package/](http://www.itcuties.com/tools/maven-3-deploy-war-package/)

# java - 为什么我的 JComboBox 中的字符串返回为 null

> ID：12062649
> 
> 赞同：0
> 
> 时间：2012-08-21T20:36:35.850
> 
> 标签：java, string, nullpointerexception, lwjgl, slick2d

**瓷砖选择**

```
protected void myBox(ActionEvent evt) {
    if (patternList.getSelectedItem() != null) {
        System.out.println(patternList.getSelectedItem().toString());
        getImagePath();
    }

public String getImagePath(){
    jk = patternList.getSelectedItem().toString();
    System.out.println(jk);
    return jk;
} 
```

**盒子**

```
 public void TexDefine() throws SlickException, FileNotFoundException{
    TileSelection t = new TileSelection();
    Tex[171]= new Image(t.newSelection);
    textureCollecter();
}

    public int getN(int px, int oy){
    int n;
    if(p==0&&o==0){
        n = 0;
    }else if(p==0){
        n=oy*42;
    }else{
        n=(oy*42)+px;
    }
    return n;
}
if(in.isKeyPressed(Input.KEY_G)){
        TileSelection t = new TileSelection();
        System.out.println(t.jk);
        /*TexTileRenderer(getN(p, o), returnImagePth());*/
    } 
```

我为 bieng 混乱而道歉，但我是新手，并且是 java 的业余爱好者，但是你能不能请你启发我，当在类之间转移时 String jk 是如何变为空的。为什么是这样？

PS 我使用 slick 和 lwjgl 库只是提醒一下。它很乱，因为我一直在摆弄它并试图找到解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:52:49.570

```
 TileSelection t = new TileSelection();
    System.out.println(t.jk); 
```

此时，如果您尚未选择值/默认值，则 selectedItem 将返回 null。

在构造函数中设置默认选定项，`TileSelection`并`jk`在分配默认选定项后在构造函数中分配：

```
patternList.setSelectedIndex(0);//sets first option in combobox to default value
jk=(String) patternList.getSelectedItem(); 
```

编辑（这也是关于您编辑代码之前的代码`TileSelection`）：

另请注意**，这不是构造函数**：

```
public void TileSelection(){
} 
```

**构造函数不使用`void`关键字**，因此**调用`TileSelection t = new TileSelection();`将不会执行您要**创建框架和组合框等的方法，因此当然`jk`会`null`删除`void`以使其成为有效的构造函数或执行以下操作：

```
TileSelection t = new TileSelection().TileSelection(); 
```

虽然我会说使用构造函数，而不是这样：

```
TileSelection t = new TileSelection(); 
```

对创建新实例的有效调用`TileSelection`。

如果您在我编辑之前遵循了建议，那么您可以：

```
System.out.println(t.jk); 
```

尽管将实例变量公开为 不是一个好习惯`public`，但那是另一次了。:)

# javascript - ExternalInterface 为我提供了在使用多个参数时停止脚本的选项。为什么？

> ID：12062651
> 
> 赞同：3
> 
> 时间：2012-08-21T20:36:42.173
> 
> 标签：javascript, actionscript-3, flash, actionscript, externalinterface

第一个版本：

```
ExternalInterface.call("$(document).trigger", "opened_file_chooser"); 
```

第二个版本：

```
ExternalInterface.call("$(document).trigger('opened_file_chooser')"); 
```

如果我使用第一个版本，它会比第二个版本慢得多。此外，浏览器阻塞，几秒钟后，Firefox 向我显示“脚本没有响应......”的对话框，它为我提供了停止它的可能性。如果我使用第二个版本，对 Javascript 的调用是即时的。有没有办法让第一个和第二个一样好用？我认为它更干净（从代码的角度来看）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:54:56.463

尝试设置一个超时，让 ExternalInterface “返回”到 Flash，这应该有助于阻止：

```
ExternalInterface.call("setTimeout","$(document).trigger('opened_file_chooser')","100"); 
```

# php - PHP登录功能脚本不起作用

> ID：12062653
> 
> 赞同：-4
> 
> 时间：2012-08-21T20:37:07.597
> 
> 标签：php

看起来我对这段代码有一些问题。我需要通过`$uid`并`$password`检查用户。我以为我做对了，但它仍然无法正常工作，我无法弄清楚。我是编程新手，非常感谢您的帮助！

更新..

以下功能工作正常，但是当我如下修改它时，它给了我一堆错误..

```
public function getUser($uid, $password) {
    $result = mysql_query("SELECT * FROM users WHERE id = '$uid' AND pswd = '$password'") or die(mysql_error());

    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {

        $result = mysql_fetch_array($result);
        return $result;    

    } else {

        return false;
    }
} 
```

**用户函数.php**

```
<?php

class DB_Functions {

    private $db;

    function __construct() {

        require_once 'db_connect.php';

        $this->db = new DB_Connect();
        $this->db->connect();
    }

    public function getUser($uid, $password) {
        $stmt = $db->prepare("SELECT * FROM users WHERE id=? AND pswd=?");
        $stmt->execute(array($uid, $password));
        return $stmt->fetch();
    }

}

?> 
```

**索引.php**

```
<?php

if (isset($_POST['tag']) && $_POST['tag'] != '') {

    $tag = $_POST['tag'];

    require_once 'include/db_functions.php';
    $db = new DB_Functions();

    $response = array("tag" => $tag, "success" => 0, "error" => 0);

    if ($tag == 'login') {

        // check for user
        $user = $db->getUser($_POST['id'], $_POST['pswd']);

        if ($user != false) {

            $response["success"] = 1;
            $response["user"]["id"] = $user["id"];

            echo json_encode($response);

        } else {

            $response["error"] = 1;
            $response["error_msg"] = "Incorrect email or password!";
            echo json_encode($response);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:41:23.350

在类中，未正确引用属性 $db。尝试改变

```
public function getUser($uid, $password) {
    $stmt = $db->prepare("SELECT * FROM users WHERE id=? AND pswd=?");
    $stmt->execute(array($uid, $password));
    return $stmt->fetch();
} 
```

到

```
public function getUser($uid, $password) {
    $stmt = $this->db->prepare("SELECT * FROM users WHERE id=? AND pswd=?");
    $stmt->execute(array($uid, $password));
    return $stmt->fetch();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T20:42:08.530

我认为您的数据库连接不在范围内；尝试：

```
public function getUser($uid, $password) {
    $stmt = $this->db->prepare("SELECT * FROM users WHERE id=? AND pswd=?");
    $stmt->execute(array($uid, $password));
    return $stmt->fetch();
} 
```

但是请参阅有关检查返回值和错误消息的评论，以了解数据库实际返回的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T20:41:48.577

我不确定如何获取您的数据库连接句柄，但您可能需要从存储它的类属性中引用您的数据库，如下所示：

```
$this->db->prepare("SELECT * FROM users WHERE id=? AND pswd=?"); 
```

# asp.net - SQL Server 与 Visual Studio 的集成

> ID：12062655
> 
> 赞同：1
> 
> 时间：2012-08-21T20:37:20.540
> 
> 标签：asp.net, sql-server, visual-studio-2010, visual-studio, ssis

我将开始使用 Microsoft Visual Studios 10 将 SQL Server 与 Asp.net 一起使用。
我遇到的问题是，首先当我安装 Visual Studio 10 并尝试制作示例 Web 应用程序时，它运行良好，但随后我继续“添加新项目”然后是“SQL Server 数据库”，然后它告诉我你应该首先安装 SQL Server 2005/2008 Express。

当我现在安装它时，SQL 数据库已添加到我的 Web 应用程序中，但是当我单击表并单击“添加新表”时，它会显示一个弹出窗口，提示“找不到库 Microsodt.sqlserver.Management.sdk 的程序集。 sfc , version-10.0.0.0 ...“
我正在使用 Windows 7 32 位操作系统
，请在这方面帮助我，我陷入了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:42:21.180

只是一个想法-您是否只安装了数据库服务器，或者您是否也安装了 SQL Management Studio 部分。如果您还没有安装 SSMS，那么最简单的做法可能是安装 SSMS。（你可能想确保你选择了任何额外的东西。）

如果这不包括它，可能值得在[MSDN](http://www.microsoft.com/en-us/download/details.aspx?id=30440)上查看此链接。它不是我曾经需要安装的东西。

# asp.net - 使用 web 服务 wcf 和未找到状态 404 错误

> ID：12062657
> 
> 赞同：0
> 
> 时间：2012-08-21T20:37:23.207
> 
> 标签：asp.net, wcf

我已将两个文件：clientaccesspolicy.xml 和 crossdomain.xml 复制到我的 web asp.net 应用程序的根文件夹中，并从 Visual Studio 以调试模式运行。VS上的调试链接是这样的：`http://localhost:4801/`当我打开链接到Web服务的silverlight页面时，我收到了这些错误：

```
> Failed to load resource: the server responded with a status of 404
> (Not Found) 
>     http://localhost/clientaccesspolicy.xml
>     
>     Failed to load resource: the server responded with a status of 404 (Not Found) 
>     http://localhost/crossdomain.xml 
```

如何在 localhost 上调试 Web 服务？我已经将网站上传到服务器上，看起来还不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:43:40.940

我在调试 ASP.NET 网站时遇到了类似的问题，但我的路由无法正确处理特殊端口，例如登录到应用程序需要重定向。现在，我的下一个目标是想办法让网站与端口无关，这就是我解决端口问题的方法

由于您的应用程序试图访问标准端口 80 上的资源，因此它失败了，因为它正在端口 4801 上侦听 http。我对 https 有同样的问题（标准是 443）。对此的解决方案是检查哪些程序正在占用 localhost 上的这些端口，并将它们更改为不同的端口或在调试时停止它们。这个答案有一个很好的工具来检查这个：

[https://stackoverflow.com/a/105487/943432](https://stackoverflow.com/a/105487/943432)

我似乎记得 Skype 是我的问题。由于 http.sys，您可能在 Windows 7 上清除 localhost 上的端口 80 时遇到问题。请参阅此问题以了解如何解决该问题：

[http://localhost/ 在 Windows 7 上不起作用。有什么问题？](https://stackoverflow.com/questions/813347/http-localhost-not-working-on-windows-7-whats-the-problem)

# android - 防止活动被破坏。youtube 播放器般的行为

> ID：12062666
> 
> 赞同：2
> 
> 时间：2012-08-21T20:38:17.363
> 
> 标签：android

我已经实现了一个播放器活动，但我不能让它像 youtube 一样工作。问题是，当我点击通常位于设备右侧的显示关闭按钮时，会重新创建整个活动。Youtube 播放器以某种方式阻止了这种行为 - 我敢打赌这是基本的东西。你能告诉我应该在我的清单上写什么吗？:)

谢谢。

# android - Android 4.0 显示通过 CDO 发送的 Outlook 日历项目的时区错误

> ID：12062667
> 
> 赞同：1
> 
> 时间：2012-08-21T20:38:19.450
> 
> 标签：android, calendar, exchange-server

通过 Microsoft CDO 发送的日历项目的格式与直接通过 Exchange 发送的日历项目不同。CDO 格式导致约会在 Android 4.0 中打开时的时间错误。

下面的示例是从运行 ICS 的 Droiz Razr 上收到的 .ics 文件中提取的。

这两个约会都是从 Outlook 2011 客户端发送的。我尝试了原生 Android 邮件客户端和 K-9 邮件客户端。邮件客户端（通常）似乎不处理该文件，只是将其传递给操作系统。似乎该对象是由日历应用程序打开的。（我不清楚为什么有些 Outlook 客户端是通过 CDO 连接的，为什么有些是直接通过 Exchange 连接的，因为所有桌面都在同一个 LAN 上。）

示例 1，CDO：

产品：Microsoft Exchange 的 Microsoft CDO ...

DTSTART;TZID="(GMT-08.00) 太平洋时间（美国和加拿大）":20120921T110000 ...

示例 2，2007 年交易所：

产品：Microsoft Exchange Server 2007 ...

DTSTART;TZID=太平洋标准时间：20120921T110000 ...

在这两种情况下，我都位于 CST，而服务器位于 PST。但是，示例 1 在日历中提前 2 小时显示（似乎忽略或不理解 TZID 设置），而示例 2 正确显示。

这似乎与时区的不同格式有关。似乎 Android 无法识别来自 CDO 的 DTSTART 格式，并假定它是本地时间。

是否有补丁或方法来修补 Android 以便正确解释时区？

提前致谢

DJ

# grails - 带有 g 标签的 Spring 安全核心和 grails

> ID：12062668
> 
> 赞同：1
> 
> 时间：2012-08-21T20:38:21.250
> 
> 标签：grails, spring-security

我在用

```
<sec:username/> 
```

在 gsp 中返回当前登录用户的用户名。

但是如何使用当前登录用户的一些属性呢？例如：

```
 <p>Name: ${user?.firstname}</p> 
```

我以为`user?`会返回当前登录的用户，但它似乎不起作用。我实际上想要使用它的内容如下：

```
 <g:each var="child" in="${user?.children}">
    <p>Name: ${child.firstname}</p>
    <p>Author: ${child.lastname}</p>
 </g:each> 
```

`user?`当前登录的用户在哪里。我也试过没有'？'。(user.children) 和 (User.children) 都不起作用。

仅供参考，我的 Spring 安全类是**User**和**UserRole**。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:51:16.287

看看[SPRING SECURITY WITH GRAILS](http://blog.springsource.com/2010/08/11/simplified-spring-security-with-grails/)。多关注SpringSecurityService。要获取登录用户，您需要在控制器中写入并将实例传递给查看：

```
User.get(springSecurityService.principal.id) 
```

# c++ - 与 C++11 lambda 相比，bind() 是否有任何优势（除了兼容性）？

> ID：12062672
> 
> 赞同：14
> 
> 时间：2012-08-21T20:38:43.520
> 
> 标签：c++, lambda, c++11, boost-lambda, boost-phoenix

我正在考虑将我的代码迁移到使用 C++11 风格的 lambda，而不是`bind`到处都有 s 。但我不确定这是否是个好主意。

与 C++11 风格的 lambda 相比，使用 eg `boost::lambda`(or `boost::phoenix`) 有什么实际优势吗？

转移到 lambdas 是个好主意吗？我是否应该迁移我的代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T20:49:14.927

主要优点是多态函子。目前，C++11 lambdas 是单态的，即它们只接受单个参数类型，而`bind()`允许您创建接受任何参数类型的仿函数，只要绑定的仿函数可以用它调用。

```
#include <functional>

struct X{
  template<class T, class U>
  void operator()(T, U) const{}
};

int main(){
  X x;
  auto l_with_5 = [x](int v){ return x(v, 5); };
  auto b_with_5 = std::bind(x, std::placeholders::_1, 5);
  l(4);
  b("hi"); // can't do that with C++11 lambdas
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T20:50:49.403

是的，Boost lambdas 是多态的，C++11 lambdas 不是。这意味着，例如，您不能使用 C++11 lambda 来做到这一点：

```
template<class T>
void f(T g)
{
    int x = 123;
    const char* y = "hello";
    g(x); // call with an integer
    g(y); // call with a string
}

int main() {
    f(std::cout << _1);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T20:38:43.520

### 是：它可以（有时）显着影响输出大小。

如果您的 lambdas 以***任何***方式彼此不同，它们将生成不同的代码，并且编译器可能无法合并相同的部分。（内联使这变得更加困难。）

当你第一次看到它时，这看起来没什么大不了的，直到你注意到：
当你在模板函数中使用它们时`std::sort`，编译器会*为**每个**不同的 lambda*生成新代码。

这可能会不成比例地增加代码大小。

`bind`但是，它通常对此类更改更具弹性（尽管不能对它们免疫）。

为了说明我的意思...

1.  以下面的示例为例，使用 GCC（或 Visual C++）对其进行编译，并注意输出的二进制大小。
2.  尝试更改`if (false)`为`if (true)`，并查看输出二进制大小如何更改。
3.  在注释掉每个部分中*除了一个*`stable_sort`s之外的所有内容后重复 #1 和 #2。

请注意，*第*一次，C++11 lambda 略小；在那之后，它们的大小在每次使用后都会爆炸（使用 VC++ 的每种排序大约需要 3.3 KB 的代码，与 GCC 类似），而`boost::lambda`基于 - 的二进制文件几乎不会改变它们的大小（当*所有*四个都是包括，到最接近的半千字节）。

```
#include <algorithm>
#include <string>
#include <vector>
#include <boost/lambda/bind.hpp>
#include <boost/lambda/lambda.hpp>   // can also use boost::phoenix

using namespace boost::lambda;

struct Foo { std::string w, x, y, z; };

int main()
{
    std::vector<Foo> v1;
    std::vector<size_t> v2;
    for (size_t j = 0; j < 5; j++) { v1.push_back(Foo()); }
    for (size_t j = 0; j < v1.size(); j++) { v2.push_back(j); }
    if (true)
    {
        std::stable_sort(v2.begin(), v2.end(), bind(&Foo::w, var(v1)[_1]) < bind(&Foo::w, var(v1)[_2]));
        std::stable_sort(v2.begin(), v2.end(), bind(&Foo::x, var(v1)[_1]) < bind(&Foo::x, var(v1)[_2]));
        std::stable_sort(v2.begin(), v2.end(), bind(&Foo::y, var(v1)[_1]) < bind(&Foo::y, var(v1)[_2]));
        std::stable_sort(v2.begin(), v2.end(), bind(&Foo::z, var(v1)[_1]) < bind(&Foo::z, var(v1)[_2]));
    }
    else
    {
        std::stable_sort(v2.begin(), v2.end(), [&](size_t i, size_t j) { return v1[i].w < v1[j].w; });
        std::stable_sort(v2.begin(), v2.end(), [&](size_t i, size_t j) { return v1[i].x < v1[j].x; });
        std::stable_sort(v2.begin(), v2.end(), [&](size_t i, size_t j) { return v1[i].y < v1[j].y; });
        std::stable_sort(v2.begin(), v2.end(), [&](size_t i, size_t j) { return v1[i].z < v1[j].z; });
    }
} 
```

请注意，这是“以交易规模换取速度”；如果你处于一个***非常*****紧凑***的循环中，它可能涉及一个额外的变量（因为现在它使用指向成员的指针）。
但是，这*与*引入的开销`std::function`（这是一个虚拟调用）完全不同，*即使*在许多情况下也是无法测量的，因此这不应该引起关注。*

# javascript - 使用Javascript动态读取和显示txt文件

> ID：12062674
> 
> 赞同：3
> 
> 时间：2012-08-21T20:38:45.070
> 
> 标签：javascript

我试图读取一个 txt 文件并在我的网页中显示它的内容，因为它的内容会随着时间而变化，我想定期更新它。这是我的代码，它首先显示内容，但在我更改文件内容后它不会改变。有什么建议么？谢谢。

```
<script type="text/javascript">
        setTimeout(read(),3000);
    function read(){
    setTimeout(jQuery.get('now.txt',function(data){
    document.write(data);}),1000);
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:40:12.917

就快到了。改变：

```
setTimeout('read', 3000);
           ^^^^^ here 
```

和这里：

```
function read(){
    jQuery.get('now.txt',function(data){document.write(data);});
} 
```

如果您希望它每 3 秒刷新一次，请使用`setInterval`

文档：

*   [http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:45:08.013

函数名不需要关闭。它也不需要是字符串。

改变这个

```
setTimeout(read(),3000); 
```

对此

```
setTimeout(read, 3000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T20:46:27.333

您的 ajax 结果可能会被缓存尝试设置`$.ajaxSetup({cache: false})`。另外，我不确定您要使用`setTimeout`s 实现什么，您是否尝试在 3+1 秒后加载页面？

```
<script type="text/javascript">
    $.ajaxSetup({cache: false})
    setTimeout(read, 3000);
    function read(){
        jQuery.get('now.txt',function(data){
        document.write(data);});
    }
</script> 
```

# spring - 记住我重定向到“/”而不是请求的 url

> ID：12062676
> 
> 赞同：2
> 
> 时间：2012-08-21T20:38:49.090
> 
> 标签：spring, spring-security

我在使用成功处理程序时遇到问题，请记住我。我需要在用户登录后执行一些功能并设置一些会话变量。所以我在remember-me的身份验证成功处理程序中编写了这个逻辑。

现在，当我尝试访问深层链接时，例如[http://mySite.com/about.com](http://mySite.com/about.com)，它被重定向到根目录“/”。

我提到了这个线程[remember-me 和 authentication-success-handler](https://stackoverflow.com/questions/11575860/remember-me-and-authentication-success-handler)因为我的问题完全相同。

目前我正在使用两种不同的成功处理程序，一种用于表单登录，另一种用于记住我，因为卢克指出，使用 SavedRequestAwareAuthenticationSuccessHandler 来记住我不是一个好主意。所以现在我的表单登录使用了一个扩展 SavedRequestAwareAuthenticationSuccessHandler 的成功处理程序，而我的记住我实现了 AuthenticationSuccessHandler。为了在关闭和打开浏览器后获取最初请求的 url，我没有按照 Luke 的建议在记住我的成功处理程序中提供任何重定向或转发。但这行不通。它没有重定向或没有从服务器返回任何内容。有人可以帮我吗？谢谢。

# activemq - ActiveMQ 从 java 中删除队列

> ID：12062677
> 
> 赞同：6
> 
> 时间：2012-08-21T20:38:48.787
> 
> 标签：activemq

如何从 java 程序中删除 activemq 中的队列？有没有类似 session.deleteQueue() 的东西？

谢谢M。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-10T16:53:04.330

不使用 JMX 将连接转换为 ActiveMQConnection 并使用其 destroyDestination() 方法的简单解决方案。使用该方法的简单实用程序：

```
import org.apache.activemq.ActiveMQConnection;
import org.apache.activemq.ActiveMQConnectionFactory;
import org.apache.activemq.command.ActiveMQQueue;
import javax.jms.JMSException;

/**
* simple class to delete a queue form the activeMQ broker
* @author josef.
*/
public class QueueDeleter {
  public static void main(String[] args) {
    if (args.length != 2) {
     System.out.println("please specify broker URL and queue name, \nexample:    tcp://localhost:61616 queue1");
     System.exit(2);
    }
    ActiveMQConnection conn = null;
    try {
     conn = (ActiveMQConnection) new    ActiveMQConnectionFactory(args[0]).createConnection();
     conn.destroyDestination(new ActiveMQQueue(args[1]));
    } catch (JMSException e) {
     System.out.println("Error connecting to the browser please check the URL" + e);
    } finally {
     if (conn != null) {
        try {
           conn.close();
        } catch (JMSException e) {
           System.out.println("Error closing connection" + e);
        }
     }
   }
  }
} 
```

Maven的依赖

```
 <dependency>
        <groupId>org.apache.activemq</groupId>
        <artifactId>activemq-core</artifactId>
        <version>5.7.0</version>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T21:51:07.003

如果您不介意使用非 JMS API 调用，那么您可以将 Connection 对象强制转换为 ActiveMQConnection 并调用 destroyDestination 向其传递您要删除的目标实例。如果该目的地上没有活动的消费者，它将被删除，否则您将收到一个异常，表明您无法删除具有活动消费者的目的地。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T23:17:44.463

您可以通过“removeQueue”操作使用 JMX 执行此操作...

请参阅此页面以获取程序示例：

[http://www.consulting-notes.com/2010/08/monitoring-and-managing-activemq-with.html](http://www.consulting-notes.com/2010/08/monitoring-and-managing-activemq-with.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T19:24:17.113

```
 DefaultHttpClient client = new DefaultHttpClient();

    Config config = Config.getInstance();
    //CONSTRUCT the GET-url to access the queues on the SOI admin site
    HttpGet httpGetQueues = new HttpGet("http://" + config.get(Config.Key.host) + ":" + config.get(Config.Key.port) + "/queue.jsp");  //CHANGE TO VAR THIS IS THE BROKERURL
    String userName = config.get(Config.Key.user);
    String password = config.get(Config.Key.password);
    //add Authentication
    httpGetQueues.addHeader(BasicScheme.authenticate(new UsernamePasswordCredentials(userName, password), "UTF-8", false));

    //ACCESS the queues page and SAVE the response  
    HttpResponse httpResponse = client.execute(httpGetQueues);
    HttpEntity entity = httpResponse.getEntity();
    String htmlResponse = EntityUtils.toString(entity);
//System.out.println(htmlResponse);

    //PARSE the response for 'jessioniD'
    String[] parseTemp = htmlResponse.split("css;jsessionid=");
    String temp = parseTemp[1];
    //System.out.println(temp); 
    parseTemp = temp.split("\\)");
    String jsessionID = parseTemp[0];
    System.out.println("JsessionID: " + jsessionID);

    //PARSE the response for 'secret'
    parseTemp = htmlResponse.split("secret=");
    temp = parseTemp[1];
    //System.out.println(temp);     
    parseTemp = temp.split(">");
    temp = parseTemp[0].replace("\"", "");
    parseTemp = temp.split(" ");
    String secret = parseTemp[0];
    System.out.println("Secret: " + secret);
    String consumerQ = config.get(Config.Key.consumerQueue);
    //CONSTRUCT the GET-url to delete the outound queue on the SOI admin site (use 'secret' parsed from response above)
    HttpGet httpDeleteQueue = new HttpGet("http://usatl-s-ssvm08:8161/deleteDestination.action"
            + "?JMSDestination=" + consumerQ
            + "&JMSDestinationType=queue&secret=" + secret);
    //add Authentication
    httpDeleteQueue.addHeader(BasicScheme.authenticate(new UsernamePasswordCredentials(userName, password), "UTF-8", false));
    //add cookie using 'jsessionId' parsed from response above
    httpDeleteQueue.addHeader("Cookie", "JSESSIONID=" + jsessionID);

    //Execute deletion url
    client.execute(httpDeleteQueue); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T20:48:58.247

Java 本身不支持会话。那么，你到底想做什么？停止访问队列的会话？然后不要访问它并删除（null）对它的引用。

# algorithm - 批量地理定位数百万个 IP

> ID：12062681
> 
> 赞同：2
> 
> 时间：2012-08-21T20:39:14.410
> 
> 标签：algorithm, postgresql, geolocation, mapping, ip

我获得了 200 万个 IP 地址和 2500 万个 IP 范围，其中起始 IP、结束 IP 和地理位置存储在 PostgreSQL 中。有没有一种有效的方法可以从 2500 万个数据库中查找这 200 万个 IP 的地理位置？我所做的是比较一个IP地址是否在Start IP和End IP之间，并查找相应的位置。然而，这似乎需要永远。大概这更像是从一组范围中查找一堆整数，例如从以下位置搜索 {7, 13, 31, 42}：

```
Start End Loc
1     10  US
11    20  US
21    26  CN
29    32  SE
33    45  CA 
```

并返回：

```
7  US
13 US
31 SE
42 CA 
```

请注意，范围可能不一定连接，并且大小可能不同。谢谢！

**编辑**

作为一个具体的例子，这是我正在处理的数据：

```
 start_ip     |      end_ip      | country |  region   |   city    | 
------------------+------------------+---------+-----------+-----------+-
 1.33.254.73/32   | 1.33.254.73/32   | jpn     | 33        | kurashiki | 
 1.39.1.0/32      | 1.39.4.255/32    | ind     | mh        | mumbai    | 
 1.40.144.0/32    | 1.40.145.255/32  | aus     | ns        | fairfield | 
 1.40.235.0/32    | 1.40.242.255/32  | aus     | ns        | sydney    | 
 1.44.28.0/32     | 1.44.29.255/32   | aus     | vi        | melbourne | 
 1.44.82.0/32     | 1.44.83.255/32   | aus     | vi        | melbourne | 
 1.44.92.0/32     | 1.44.93.255/32   | aus     | vi        | melbourne | 
 1.44.128.0/32    | 1.44.129.255/32  | aus     | vi        | melbourne | 
 1.44.220.0/32    | 1.44.221.255/32  | aus     | vi        | melbourne | 
 ......
 ...... 
```

查询类似于：

```
 75.149.219.61/32
 68.239.61.29/32
 96.41.50.165/32
 183.62.126.7/32
 ...... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:15:04.037

我认为最好和更优雅的解决方案是将 IP 和范围存储为 inet 格式。IP 范围通常以网络/掩码格式发布，而不是作为开始/结束。这允许编写一个基于 JOIN

```
ON (ip.addr << geoloc.range) 
```

当然，ip 表应该由 addr 和 geoloc 索引（范围，位置），如果您没有 CIDR 格式并且需要从 Start/End 构建它，那可能会很昂贵（但是，表会更容易之后使用）。

看

[http://www.postgresql.org/docs/9.0/static/functions-net.html](http://www.postgresql.org/docs/9.0/static/functions-net.html)

**编辑**：不幸的是，这些开始/结束值看起来像“优化”的 CIDR 范围。换句话说，例如

```
1.40.235.0     1.40.242.255 
```

实际上是四个独立的连续范围的合并：

```
11101011   235.0-235.255
    11101100   236.0-239.255
    11101111   
    11110000   240.0-241.255   
    11110001
11110010   242.0-242.255 
```

因此将行分解为 CIDR 操作所需的四行是不切实际的。

Start/End 在 cidr 数据类型中查找，因此将它们转换为 inet（它们都是 /32 无论如何......）并将查询值也保留在 inet 数据类型中，在 Start、End 上进行索引*应该*给出合理的结果：

```
 SELECT query.ip, geoloc.country, geoloc.region, geoloc.city
     FROM query JOIN geoloc
     ON (query.ip >= geoloc.start_ip AND query.ip <= geoloc.end_ip); 
```

另一种**不是很优雅**（*实际上是 hack*）的替代方法是基于例如 addr 和 range 的第一个字节将 ip 和 geoloc 表“分解”成单独的子表（我不希望你有一个具有不同首字节的 IP 范围）。

```
 SELECT * FROM geoloc
     WHERE start_ip >= inet '5.0.0.0' and end_ip <= inet '5.255.255.255'
     INTO TABLE geoloc_5;

 SELECT * FROM query
     WHERE start_ip >= inet '5.0.0.0' and end_ip <= inet '5.255.255.255'
     INTO TABLE query_5;

 Remember to CREATE INDEX on geoloc_5 start_ip, end_ip 
```

这种方法*在*几年前确实有效，用于大量 PostgreSQL 批处理，但我希望从那时起，一个更聪明的索引管理器 - 连同专用数据类型 - 将发展到与这种 DIY 分区相匹配的程度。因此，如果不能使用 << CIDR 运算符，则只能将朴素的 Jordan 分区用作最后的解决方案。

也就是说，假设两个表都有一个平坦的分布（只是为了得到一个大概的数字）。

然后，在 2M x 25M 记录上运行 256 个 2M/256 x 25M/256 的 SELECT，而不是一个 SELECT。因此，您可以进行 256 x 2M/256 x 25M/256 = 192G 的比较，而不是 1 x 2M x 25M = 50 T，这应该比直接 JOIN 快 200 倍左右。

但我再说一遍，我希望 PostgreSQL 看到一个正确索引的 CIDR 字段，将不再真正执行“直接”JOIN，而是使用这个技巧（*然后是一些*）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:46:44.357

如果要查询该`Loc`列，则应为其[添加索引](http://www.postgresql.org/docs/9.1/static/sql-createindex.html)。此外，由于这是一个 3 列的表，最好将 and 组合起来`StartIP`，`EndIP`将其用作键，并将 the`Geolocation`用作值，然后从[Redis](http://redis.io/)或[Memcached](http://memcached.org/)等键值存储中读取所有内容。NoSQL/无表数据存储专为此类事情而设计，您在其中读取数百万个数据点。

编辑：在阅读了一些评论之后，我想到另一个解决方案是通过 MapReduce 之类的东西来并行化您的搜索。在 Map 步骤中分配线程来查询一系列 IP（例如 Thread1：1-10、Thread2：11-20 等），然后在 Reduce 步骤中分配线程以将碎片查询减少为一个结果。您显然需要一种单独的编程语言来编写脚本，但并发性将有助于减少您的整体加载时间，尽管缺点是对数据库的多次查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T21:26:09.030

您必须提供您的查询和查询计划，以便对此进行有意义的输入。例如：

```
explain select hits.ip, locations.loc
 from hits left outer join locations
   on (hits.ip >= locations.start and hits.ip <= locations.stop);
                                  QUERY PLAN                                   
-------------------------------------------------------------------------------
 Nested Loop Left Join  (cost=0.00..245.06 rows=2400 width=36)
   Join Filter: ((hits.ip >= locations.start) AND (hits.ip <= locations.stop))
   ->  Seq Scan on hits  (cost=0.00..34.00 rows=2400 width=4)
   ->  Materialize  (cost=0.00..1.07 rows=5 width=40)
         ->  Seq Scan on locations  (cost=0.00..1.05 rows=5 width=40)
(5 rows) 
```

我不确定您是否要像其他答案之一所建议的那样将位置数据添加到索引中。那只是死数据增加了膨胀，对查找行没有好处。

即使您使用支持仅索引扫描的 pg 版本（9.2，仍处于测试阶段），较小的精简索引可能仍会通过每行额外的元组查找提供更快的结果。

# java - Spring MVC 不会从链接更改语言环境

> ID：12062690
> 
> 赞同：0
> 
> 时间：2012-08-21T20:40:07.920
> 
> 标签：java, spring, jsp, spring-mvc, servlets

我是 Spring MVC 的新手，我正在尝试在我的网站中添加 i18n。我有以下配置：

**servlet-context.xml**：

```
<beans:bean id="localeChangeInterceptor"
    class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
    <beans:property name="paramName" value="language" />
</beans:bean>

<beans:bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" >
    <beans:property name="interceptors">
       <beans:list>
        <beans:ref bean="localeChangeInterceptor" />
       </beans:list>
    </beans:property>
</beans:bean>

<beans:bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    <beans:property name="basename" value="messages" />
</beans:bean> 
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean> 
```

和一个控制器：

```
@Controller
public class HomeController {

@RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Locale locale, Model model) {        
    return "home";
}

@RequestMapping(value = "/welcome", method = RequestMethod.GET)
public String welcome(Locale locale, Model model) {
    return "WelcomePage";
}
} 
```

WelcomePage.jsp**包含**以下内容：

```
Language : <a href="?language=en">English</a>|<a href="?language=de_DE">German</a>

<h3>
    <spring:message code="welcome.springmvc" text="default text" />
</h3> 
```

当我点击上面显示的链接时，区域设置不会改变，尽管链接的 URL 变成`../welcome?language=de_DE`了例如。如果我添加如下所示的控制器，WelcomePage.jsp 会正确更改语言环境。

```
public class WelcomeController extends AbstractController{

@Override
protected ModelAndView handleRequestInternal(HttpServletRequest request,
    HttpServletResponse response) throws Exception {

    ModelAndView model = new ModelAndView("WelcomePage");
    return model;
} 
} 
```

当我使用第一种类型的控制器（使用 RequestMappping）时，如何更改语言环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:37:09.460

本地更改拦截器应该与请求参数一起正常工作，首先检查您的语言环境，它在您的 Jsp 中，使用像这样的 JSTL 标记。

```
${locale} 
```

我认为问题在于它在 ControllerClassNameHandlerMapping 中找不到任何控制器。手动定义映射：

```
<bean id="viewShoppingCart" class="x.y.z.ViewShoppingCartController"> 
```

或者使用组件扫描和 AnnotationMethodHandlerAdapter，因为您使用的是 @Controller 注释。

```
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>
<context:component-scan base-package="com.example.springmvc"/> 
```

更好地检查以下示例配置文件，以便使用**MVC 简化**进行配置。

然后，如果您的默认设置不是英语，那么我建议您在 xml 配置文件中声明默认区域设置，并使用 cookie 来存储区域设置。

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

...

  <!-- Configures Handler Interceptors -->
  <mvc:interceptors>
    <!-- Changes the locale when a 'locale' request parameter is sent; e.g. 
    /?locale=de -->
    <bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor" />
  </mvc:interceptors>
  <bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
    <property name="cookieName" value="myCookie" />
    <property name="defaultLocale" value="de" />
  </bean>
....
</beans> 
```

还要将**ResourceBundleMessageSource**与消息的有效路径一起放置，例如：/WEB-INF/messages 和**ViewResolver**作为你的。

查看官方文档：[mvc 简化](http://blog.springsource.org/2009/12/21/mvc-simplifications-in-spring-3-0/)和[官方 mvc 3.0 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-localeresolver)

# python - 如何使用 ElementTree 将类添加到 HTML 元素？

> ID：12062701
> 
> 赞同：1
> 
> 时间：2012-08-21T20:41:29.690
> 
> 标签：python, html, elementtree

我正在尝试使用 ElementTree 创建一个带有类的 html 元素，如下所示：

```
nextLink = ElementTree.SubElement(root_element, "a", class="bah",href="www.bah.com") 
```

但是，我收到以下错误消息：

```
SyntaxError: invalid syntax 
```

我认为这是因为“类”是 Python 中的保留关键字。如果我更改类的拼写或大小写，它可以工作，但这并不能解决我的问题，因为我需要输出为“类”。

有解决方法吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:50:34.630

传入 'attrib': 'value' 对的字典

```
nextLink = ElementTree.SubElement(
    root_element, 'a',
    {
        'class': 'bah',
        'href': 'www.bah.com'
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:47:19.840

例如：

```
nextLink.set('class', 'bah') 
```

# python - 如何dbchange mongo烧瓶？

> ID：12062704
> 
> 赞同：1
> 
> 时间：2012-08-21T20:41:43.747
> 
> 标签：python, mongodb

我有一个基于烧瓶的应用程序，我正在配置如下：

```
from flask import Flask
from flask.ext.mongoengine import MongoEngine

app = Flask(__name__)
app.config["MONGODB_DB"] = "my_tumble_log"
app.config["SECRET_KEY"] = "KeepThisS3cr3t"

db = MongoEngine(app)

if __name__ == '__main__':
    app.run() 
```

我有一个 models.py 文件，其中包含我所有的模型，例如：import datetime

```
from flask import url_for
from tumblelog import db

class Post(db.Document):
    created_at = db.DateTimeField(default=datetime.datetime.now, required=True)
    title = db.StringField(max_length=255, required=True)
    slug = db.StringField(max_length=255, required=True)
    body = db.StringField(required=True)
    comments = db.ListField(db.EmbeddedDocumentField('Comment'))

    def get_absolute_url(self):
        return url_for('post', kwargs={"slug": self.slug})

    def __unicode__(self):
        return self.title

    meta = {
        'allow_inheritance': True,
        'indexes': ['-created_at', 'slug'],
        'ordering': ['-created_at']
    } 
```

我想定义一条新路线，以便我可以在那里使用另一个数据库及其集合：

```
@app.route('/sampleroute')
def sample_route():
    #Insert Code to use another database of a specific name
    #Query Out a particular "OtherClass" that would be in models.py 
```

我需要做什么才能将“db”设置为等于“db1”之类的其他数据库，而不是“/sampleroute”中的“my_tumble_log”？我可以像 Post 在同一个 models.py 文件中那样在自己的类中声明“OtherClass”吗？还是我想用 MongoEngine 做不到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:20:13.943

要使用多个数据库，您可以使用 connect() 并为连接提供别名。

然后，在`model.py`添加一个元标记来指定数据库：

```
meta = {"db_alias": "user-db"} 
```

有关更多信息，请参阅文档中的[连接到 MongoDB](http://mongoengine-odm.readthedocs.org/en/latest/guide/connecting.html#multiple-databases)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T17:51:58.860

只需在 Document 类中使用 {"db_alias": alias_name}

只是为了确保您注册了别名 register_connect(alias_name,db,host,port) 您可以注册任意数量的别名。这是 register_connect 的文档： [https ://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.register_connection](https://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.register_connection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-12T07:27:15.460

我的工作是这样的：1，在我的models.py中：

```
meta = {'db_alias': 'user-db'} 
```

2，在我的应用程序/ **init** .py 中：

```
from flask.ext.mongoengine import MongoEngine
db = MongoEngine()
db.register_connection('user-db', name='user-db') 
```

3，那是工作。

# css - 使用css，z-index定位背景图像悬停另一个图像？

> ID：12062707
> 
> 赞同：1
> 
> 时间：2012-08-21T20:41:49.083
> 
> 标签：css, positioning, background-image

我制作了这个[jsfiddle](http://jsfiddle.net/gableroux/SzGe8/#base)来准确说明我想要完成的事情。基本上我想让一个背景图像显示悬停另一个使用 css。我尝试了 z-index 但它不起作用。我尝试使用 img 标签插入顶部图像，但这不是一个好主意，因为它是设计的一部分，而不是页面的元素。

注意：我不希望图像也隐藏文本；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T23:30:32.977

这行不通吗？

[http://jsfiddle.net/SzGe8/6/](http://jsfiddle.net/SzGe8/6/)

您需要将 footer-top-image 放在页脚内。

# ios - 是否支持在 CalDAV 或 ical (icalendar) 中将事件标记为只读

> ID：12062708
> 
> 赞同：4
> 
> 时间：2012-08-21T20:41:49.773
> 
> 标签：ios, webdav, icalendar, caldav, rfc5545

我搜索了 iCalendar 规范[https://www.rfc-editor.org/rfc/rfc5545](https://www.rfc-editor.org/rfc/rfc5545)和 CalDAV 规范[https://www.rfc-editor.org/rfc/rfc4791](https://www.rfc-editor.org/rfc/rfc4791)寻找有关如何标记事件的见解当 iPhone 使用 CalDAV 协议连接到我们的服务器时，它作为“只读”（不可编辑）从我们的日历服务器发送到 iPhone。但答案不是突然出现在我身上。

换句话说，iPhone 用户正在通过 CalDAV 帐户接收一系列事件。通常，他们可以编辑任何这些事件。但是，我们希望能够将一些标记为只读。我知道我们可以使用 iPhone 的功能添加一个 .ics 订阅帐户，但我们并不想这样做，因为它需要 iPhone 用户同时添加一个 CalDAV 和一个 .ics 订阅帐户。

我们使用 SabreDAV 作为我们的 CalDAV 服务器。

我的技术同事要求我对此进行调查，因此我向 Stackoverflow 社区寻求帮助。

任何帮助或提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:53:09.233

一旦您将文件发送给用户，就由他们来处理......

我想说没有办法保护约会/事件不被修改。

但是，您可以自己托管整个日历，如果用户有 Outlook 或类似设备，则订阅该 RSS 提要。

这是一个想法……但是为了保护你发送给他们的东西？高度怀疑。请放心，他们只是在修改他们的数据副本，而不是源数据本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-01T09:39:52.713

**1/**您可以使用共享日历并以只读方式邀请用户。但是，用户将有 2 个日历：它自己的日历和共享日历。尽管如此，它仍然是同一个 CalDAV 帐户，因此用户只需单击一个复选框即可选择加入。

**2/**我没有尝试过 ACL，但也许你可以使用它。

**3/**作为最后的手段，您可以编辑`Sabre\CalDAV\Backend\PDO::updateCalendarObject`和`deleteCalendarObject`添加您的条件。但在这一点上这是非常低级的（这个类甚至不知道谁在做改变）。我不推荐它。

# firefox - Href 链接在 Firefox 中不起作用

> ID：12062711
> 
> 赞同：0
> 
> 时间：2012-08-21T20:42:01.557
> 
> 标签：firefox, hyperlink, cross-browser, html

请帮忙！我曾尝试使用 Firebug 来查看为什么我的 href 不能点击，但我无法弄清楚。我不使用桌子。该网站是[http://spiritfestcorpus.com/](http://spiritfestcorpus.com/)

大圆形图像包裹在href中

我真的很感激任何建议。

如果您在 Firefox 中查看源代码，这是第 357 行的代码

```
<div id="slideshow_wrapper" )">
            <div id="frame"></div>
            <div id="slideshow_container">
                <div id="slideshow">

                            <a style="z-index:9999999; position: absolute;" id="cdImage1" href="concertsbuy.aspx?eventId=53"><img id="Repeater1_ctl00_cdImage" src="images/slideshow/home/albums/2012/SPIRIT_Fest_Corpus/LMG_DC12Circle.png" style="border-width:0px;" /></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:48:46.273

`position: absolute`您*必须*指定宽度和高度。如果要在`a`标签上指定宽度和高度，则需要使用`display: block`

# python - 阅读 | 分隔符文件并在 Python 中提取变量

> ID：12062715
> 
> 赞同：0
> 
> 时间：2012-08-21T20:42:09.590
> 
> 标签：python

我正在尝试使用分隔符“|”读取 txt 文件，然后提取第二个和第三个变量。所以数据看起来像这样：

```
a|bb|cc|   
aaa|b|cccc| 
```

我想创建一个只有第二个和第三个变量的数据：

```
bb  cc
b cccc 
```

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:53:37.203

使用`csv`模块

```
import csv
input = csv.reader(open('your_file.txt', 'rb'),delimiter="|")
for row in input:
    print row[1:] 
```

这将打印出每行中除第一个值之外的每个其他值。你当然会做任何你想做的处理，而不是我打印的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:43:59.080

```
with open("data.txt") as f:
    for line in f:
        col2, col3 = line.split('|')[1:3] # get 2nd and 3rd column
        print col2, col3 # this could be written to a file if needed 
```

会给你

```
bb cc 
b cccc 
```

`data.txt`你的数据文件在哪里。

*说明*：

您逐行读取文件，用分隔符[分割](http://docs.python.org/library/stdtypes.html?highlight=split#str.split)每一行`|`，并在每一行打印第二个和第三个元素。这些数据也可以写入文件，或进一步操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:44:43.117

将[`csv`](http://docs.python.org/library/csv.html)模块与适当的方言一起使用，然后将结果列表每行切片并输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T20:46:30.233

您可以使用[csv](http://docs.python.org/library/csv.html)模块。简单而优雅。

# jquery - 如何从 Google Drive 电子表格中读取单元格值？

> ID：12062724
> 
> 赞同：0
> 
> 时间：2012-08-21T20:42:36.303
> 
> 标签：jquery, google-apps-script

我想使用 Google Apps Script API 从 Google Drive 电子表格中读取一些简单的参数，然后将该值作为 GAS 脚本中 doPost() 响应的一部分返回给我从本地网站调用的 javascript 函数。

我知道如何写电子表格

```
function doPost(e) {
  var app = UiApp.getActiveApplication();

  SpreadsheetApp.openById(SPREADSHEET_ID).getSheetByName('RequestInvites').appendRow([e.parameter.emailAddress, 'hash123']);

  app.add(app.createLabel("Form submitted. Your email address is: '" + e.parameter.emailAddress));

  return app;
} 
```

但我不知道如何从电子表格中读取值并返回对我网站上调用脚本的响应（使用 jQuery 的`$.ajax()`函数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:17:30.000

您无法按照此处的说明直接发送响应：

[将 ContentService 与 doPost 一起使用](https://stackoverflow.com/questions/11935420/how-to-use-contentservice-and-dopost-to-create-a-rest-api)

如果您再次调用 doGet，ContentService 将起作用。问题是将输出连接到 doPost 中发送的内容具有挑战性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T00:34:58.383

范围.getValue() ？

[https://developers.google.com/apps-script/class_range#getValue](https://developers.google.com/apps-script/class_range#getValue)

返回一个值。我怀疑 HTML 服务是最干净的方式。尽管我遇到了一篇文章，显示了如何通过抛出错误来处理它。

# ios - iPhone 将字节写入套接字

> ID：12062732
> 
> 赞同：-1
> 
> 时间：2012-08-21T20:43:20.437
> 
> 标签：ios, sockets

我的应用程序中有一个输出流，我只想向该流写入 3 个字节。有没有人看到一个很好的例子？字节是：

```
Byte command1 = 254;
Byte command2 = 108;
Byte command3 = 1; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:50:46.143

感谢您对杰克货车的投票。

我从另一个程序员发布的一些示例软件中找到了我的问题的答案。这是示例代码：

```
Byte *commandBytes = malloc(3);
commandBytes[0] = (Byte)254;
commandBytes[1] = (Byte)108;
commandBytes[2] = (Byte)1;
[outputStream write:(uint8_t *)commandBytes maxLength:3]; 
```

希望这对将来的人有所帮助。

# javascript - 尝试扩展 jQuery

> ID：12062733
> 
> 赞同：1
> 
> 时间：2012-08-21T20:43:27.890
> 
> 标签：javascript, jquery-plugins, jquery, jquery-hover

我正在使用我编写的名为 bindHoverEvents 的函数扩展 jQuery：

```
$.fn.bindHoverEvents = function () {
    this.hover ( function () {
            // mouseenter function
        }, function () {
            // mouseleave function
        }
     );
}; 
```

问题是当我在一个对象上调用这个函数时，悬停事件并没有绑定到它：

```
$(object).bindHoverEvents(); 
```

我知道 bindHoverEvents 被调用了，因为当我在函数的开头放置一个警报时，就在 this.hover(...) 之前，警报出现了。但是，当我在 mouseenter 函数中放置相同的警报时，当我将鼠标悬停在对象上时它不会显示。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:48:26.813

刚刚想通了。当我调用 $(object).bindHoverEvents() 时，object 只是 javascript 对象的一个​​实例，而不是 DOM 中的一个元素。

哎呀...

# c# - C# 中的列表列表 - 将多种数据类型组合成一个主列表？

> ID：12062734
> 
> 赞同：3
> 
> 时间：2012-08-21T20:43:28.273
> 
> 标签：c#, nested-lists

我试图将 11 种不同的数据类型组合到一个列表中，我可以添加和删除该列表，以及搜索特定值。这些数据类型范围涉及 bool、string、int 和 double。

目标是将更新的值添加到此主列表中，因为它们每分钟都会出现。例如...在下午 5:45，将从系统中捕获 11 个新值。如果通过 if/else if 挑战，这 11 个值将被添加到主列表中。这 11 个值将是：

*   插槽 1 - Time[0].ToString("HH:mm"); （显示为示例）
*   插槽 2 -（数据类型双）
*   插槽 3 - （数据类型双）
*   插槽 4 - （数据类型双）
*   插槽 5 - （数据类型双）
*   插槽 6 -（数据类型双）
*   插槽 7 -（数据类型双）
*   插槽 8 - （数据类型双）
*   插槽 9 -（数据类型 bool）
*   插槽 10 -（数据类型字符串）
*   插槽 11 - （数据类型双）

如果传入数据没有通过 if/else if 挑战，则相应的列表将被重置，所有现有数据都从列表中删除。

我在这里以及通过几个网络搜索解决了不同的问题，但我要么不理解如何正确声明列表或列表结构，如果我应该使用类或数组等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T20:48:34.337

您列出的那 11 个插槽似乎正在描述一个`class`. 您应该创建一个具有 11 个属性的类，每个属性对应一个插槽。它应该具有适当的数据类型，以及一个有意义的名称（不要只称它为 slot1、slot2）。

该类应该有一个 IsValid 方法，因为您似乎需要能够验证该类的数据单元。

然后，您可以收集`List`可以添加（如果有效）、从中删除和搜索。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T10:55:42.887

只需使用这个：

```
List<IList> yourList = new List<IList>(){
    //you'll able to add different types of list there
}
//dont forget to use this:
using System.Collections 
```

或者

```
List<System.Collections.IList> yourList = new List<System.Collections.IList>(){
    //you'll able to add different types of list there
} 
```

经过测试和工作：D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T21:09:48.467

有不止一种可能性，这是您的选择，具体取决于您的问题的特征。您可以创建一个`Object`来表示之前帖子中提到的内容，甚至可以使用`DataTable`您的插槽作为列的位置，如果您的“if/else if 挑战”（如您所说）通过，它将创建一个新行。

请参阅以下参考：

[System.Data.DataTable 文档](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)

亲切的问候，
赫伯特·沃尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-18T09:00:49.120

```
List<object> Slots = new List<object>();

To Add Slot:
Slots.Add((double)23.45); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T20:53:36.653

虽然我建议创建一个类来保存您的数据，例如

```
public class SlotData
{
    public DateTime Slot1 { get; set; }
    public Double Slot2 { get; set; }
    public Double Slot3 { get; set; }
    public Double Slot4 { get; set; }
    public Double Slot5 { get; set; }
    public Double Slot6 { get; set; }
    public Double Slot7 { get; set; }
    public Double Slot8 { get; set; }
    public Boolean Slot9 { get; set; }
    public String Slot10 { get; set; }
    public Double Slot11 { get; set; }
} 
```

只要确保在使用数据之前检查类型，您也可以使用对象列表。

```
List<object> SlotData = new List<object>();

if (SlotData[0] != null && SlotData[0] is DateTime)
{
  Do something
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-21T21:11:48.333

解决方案应该是使用对象列表列表。所以存储任何值来列出是没有问题的。当你想从列表中获取一些值时，你可以根据需要进行转换。

或者其他更好的解决方案是创建一个类，该类将包含具有对象类型的成员和第二个成员，该成员将是存储在对象成员中的值的类型。参见示例：

```
 // class for storing values
    public class SlotItem
    {

        public object Val { get; private set; }
        public Type ValType { get; private set; }

        public SlotItem(object o, Type valType)
        {
            Val = o;
            ValType = valType;
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        // store values to List
        List<SlotItem> list = new List<SlotItem>();
        list.Add(new SlotItem("sometext", typeof(String))); // store text
        list.Add(new SlotItem(100, typeof(Int32)));         // store number

        // read values from List
        foreach (SlotItem slot in list)
        {
            var val = Convert.ChangeType(slot.Val, slot.ValType);
            Response.Write(val);
        }
    } 
```

# c# - Chrome 字体未加载本地字体

> ID：12062742
> 
> 赞同：0
> 
> 时间：2012-08-21T20:43:54.637
> 
> 标签：c#, css, font-face, google-webfonts

我遇到了一个奇怪的问题。通过谷歌的 webfonts api 使用 webfont 链接可以正常工作并加载字体，但是......我正在创建的应用程序仅是本地的，因此在第一次渲染字体时，连接到互联网的任何类型的开销都是显而易见的, 如果没有互联网连接，则不会加载任何字体。

```
@font-face {
font-family: Pt Sans;
font-style: normal;
font-weight: 400;
src: url(http://themes.googleusercontent.com/static/fonts/ptsans/v4/jduSEW07_j4sIG_ERxiq4Q.woff);
} 
```

以上是工作代码。

```
@font-face {
font-family: Pt Sans;
font-style: normal;
font-weight: 400;
src: url(fonts/ptsans.woff);
} 
```

这在本地直接从浏览器运行时有效，但是我使用的框架将 chrome webview 嵌入到我的 C# 应用程序中，称为 CefSharp。不同之处在于，我正在模拟指向站点的链接，而不是直接加载页面。就好像我创建了自己的 http:// 字体链接，就像 webfont 一样。

如果我打开 Chromes 开发工具 > 资源选项卡 > 字体并单击本地加载的字体，它会显示默认字体，但是如果我单击通过谷歌的 api 加载的字体，它会呈现正确的字体。

谷歌 api 发送到浏览器的我不是什么？我尝试了许多 mimeTypes 无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:43:44.183

你知道字体跨域策略吗？您可以尝试发送`Access-Control-Allow-Origin "*"`字体的 http 标头。

# javascript - javascript中的动画.png文件

> ID：12062743
> 
> 赞同：0
> 
> 时间：2012-08-21T20:43:55.170
> 
> 标签：javascript, animation, png

我正在编写一个游戏，我希望能够为我的一些 .png 图像设置动画。我的世界生成器可以放置静态图像，有没有办法让 javascript 在页面上搜索图像，然后用其他东西或类似的东西替换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:47:35.627

你听说过[APNG](http://en.wikipedia.org/wiki/APNG)吗？

![动画](../Images/f810e3c0410caa84825851f8ad40ed5e.png)

> 有没有办法让javascript在页面上搜索图像，然后用其他东西替换它

使用 jQuery 非常简单：

```
$('img[src="http://foo.bar/image.jpg"]').attr('src', 'http://foo.bar/flower.jpg'); 
```

# php - 解析错误...根本找不到？（第 86 行）

> ID：12062748
> 
> 赞同：0
> 
> 时间：2012-08-21T20:44:29.160
> 
> 标签：php, syntax, syntax-error

我是这个编码游戏的新手，但我在这段代码中找不到我的语法/解析错误。错误是说第 86 行是代码的结尾。我试图添加括号，但没有运气。这可能是一个基本问题，但我一直在努力解决它，所以我想我会在这里拍摄它，看看我是否可以获得一些明确的指导并停止只是扔东西。

```
 <html>
    <head>
<title>View Guestbook</title>
<link rel="stylesheet" type="text/css" href="css/king.css" />
  </head>

   <body>
  <img src="images/KingLogo.jpg"><br>

    <?php
include "king_common_functions.php";

viewGuestbook();

     //****************************************************************
     //Display Admin Guestbook Data (All Submissions)
    //****************************************************************

function viewGuestbook()
{
    $outputDisplay = "";
    $myrowcount = 0;

    $statement  = "SELECT lastname, firstname, contact_type, contact_info,";
    $statement  = "city, comments, date_added";
    $statement .= "FROM u1585_Guestbook ";
    $statement .= "ORDER BY lastname ";

    $sqlResults = selectResults($statement);

    $error_or_rows = $sqlResults[0];

    if (substr($error_or_rows, 0 , 5) == 'ERROR')
    {
        print "<br />Error on DB";
        print $error_or_rows;
    } else {
        $arraySize = $error_or_rows;

            for ($i=1; $i <= $error_or_rows; $i++)
            {
                $lastname = $sqlResults[$i]['lastname'];
                $firstname = $sqlResults[$i]['firstname'];
                $contact_type = $sqlResults[$i]['contact_type'];
                $contact_info = $sqlResults[$i]['contact_info'];
                $city = $sqlResults[$i]['city'];
                $comments = $sqlResults[$i]['comments'];
                $date_added = $sqlResults[$i]['date_added'];

                $outputDisplay  = "<h3>View Guestbook:</h3>";
                $outputDisplay .= '<table border=1 style="color: black;">';
                $outputDisplay .= '<tr><th>Last Name</th><th>First Name</th><th>Contact Type</th><th>Contact Info</th>';
                $outputDisplay .= '<th>City</th><th>Comments</th><th>Date Added</th></tr>';

                $numresults = mysql_num_rows($sqlResults);

                for ($j = 0; $j < $numresults; $j++)
                {
                    if (!($j % 2) == 0)
                    {
                        $outputDisplay .= "<tr style=\"background-color: #F5DEB3;\">";
                    } else {
                        $outputDisplay .= "<tr style=\"background-color: white;\">";
                    }

                $myrowcount++;

                $outputDisplay .= "<td>".$lastname."</td>";
                $outputDisplay .= "<td>".$firstname."</td>";
                $outputDisplay .= "<td>".$contact_type."</td>";
                $outputDisplay .= "<td>".$contact_info."</td>";
                $outputDisplay .= "<td>".$city."</td>";
                $outputDisplay .= "<td>".$comments."</td>";
                $outputDisplay .= "<td>".$date_added."</td>";
                $outputDisplay .= "</tr>";
            }
    }
    $outputDisplay .= "</table>";
    $outputDisplay .= "<br /><br /><b>Number of Rows in Results: $myrowcount </b>    <br /><br />";
    print $outputDisplay;
    }
    ?>
    </p>

     </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:47:01.133

我认为您的`for`循环没有正确关闭：

```
for ($j = 0; $j < $numresults; $j++)
    {
    if (!($j % 2) == 0)
       {
       $outputDisplay .= "<tr style=\"background-color: #F5DEB3;\">";
    } else {
       $outputDisplay .= "<tr style=\"background-color: white;\">";
    }

$myrowcount++; 
```

缩进代码可以更容易地发现缺少大括号的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:46:02.117

您的函数缺少右括号。一个不错的 IDE 或文本编辑器会很快为您发现这一点。

# symfony - guzzle php http 客户端 cookie 设置

> ID：12062759
> 
> 赞同：4
> 
> 时间：2012-08-21T20:45:18.003
> 
> 标签：symfony, cookies, guzzle, symfony-2.1, zend-http-client

我正在尝试从 Zend Http Client 迁移到 Guzzle Http Client。我发现 Guzzle 的功能很好并且在大多数情况下易于使用，但我认为在使用 Cookie 插件时没有很好的文档记录。所以我的问题是如何在 Guzzle 中为要对服务器发出的 HTTP 请求设置 cookie。

使用 Zend Client，您可以做一些简单的事情：

```
$client = new HttpClient($url);   // Zend\Http\Client http client object instantiation
$cookies = $request->cookies->all();   // $request Symfony request object that gets all the cookies, as array name-value pairs, that are set on the end client (browser) 
$client->setCookies($cookies);  // we use the above client side cookies to set them on the HttpClient object and,
$client->send();   //finally make request to the server at $url that receives the cookie data 
```

那么，你如何在 Guzzle 中做到这一点。我看过[http://guzzlephp.org/guide/plugins.html#cookie-session-plugin](http://guzzlephp.org/guide/plugins.html#cookie-session-plugin)。但我觉得这并不简单，我无法理解它。可能有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T23:33:01.590

此代码应实现所要求的，即在发出 guzzle 客户端请求之前在请求上设置 cookie

```
$cookieJar = new ArrayCookieJar();  // new jar instance
$cookies = $request->cookies->all(); // get cookies from symfony symfony Request instance
foreach($cookies as $name=>$value) {  //create cookie object and add to jar
  $cookieJar->add(new Cookie(array('name'=>$name, 'value'=>$value)));
}

$client = new HttpClient("http://yourhosturl");
$cookiePlugin = new CookiePlugin($cookieJar);

// Add the cookie plugin to the client object
$client->addSubscriber($cookiePlugin);

$gRequest = $client->get('/your/path');

$gResponse = $gRequest->send();      // finally, send the client request 
```

当响应从带有 set-cookie 标头的服务器返回时，您可以在 $cookieJar 中使用这些 cookie。

Cookie jar 也可以从 CookiePlugin 方法中获取

```
$cookiePlugin->getCookieJar(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-17T08:48:17.423

或者没有 cookie 插件

```
$client = new HttpClient();

$request = $client->get($url);

foreach($cookies as $name => $value) {
    $request->addCookie($name, $value);
}

$response = $request->send(); 
```

# c++ - 指向槽函数的指针

> ID：12062764
> 
> 赞同：2
> 
> 时间：2012-08-21T20:45:32.857
> 
> 标签：c++, qt, signals-slots

我在我的类中定义了一些槽函数来执行一些操作。我想创造一种可能性，允许我的班级的用户定义他自己的插槽函数（将我班级中的函数替换为他自己的函数）。我试图通过这种方式通过指向插槽函数的指针来实现它：

```
class asd {
    Q_OBJECT

private:
    void ( asd::*m_funcTrigger )( QAction* );

public:
    asd();
    // and some method to pass the pointer

private slots:
    void actionTrigger( QAction* );

}; 
```

构造函数：

```
asd::asd() {
    // set the slot function from class as default
    m_funcTrigger = &asd::actionTrigger;

    // m is a QMenu object
    connect(m, SIGNAL(triggered(QAction*)), this, SLOT(m_funcTrigger(QAction*)));
} 
```

我认为 actionTrigger 的实现并不重要。

因此，当我将 actionTrigger 放入 SLOT() 时，它可以正常工作。当我把 m_funcTrigger 放在那里时，它没有 - 没有任何反应（Qt 找不到插槽）。我确信这是因为指针不在类的插槽部分中，所以我把它放在那里：

```
private slots:
    void ( asd::*m_funcTrigger )( QAction* );
    void actionTrigger( QAction* ); 
```

但我得到了奇怪的错误：

> > C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(151,5): error MSB6006: "cmd.exe" exited with code 1.

我完全不知道该如何处理。

**编辑：**

我认为 Qt 没有找到它的原因：根据我在 Internet 上阅读的内容，SLOT() 只返回一个简单的 const char*，其中包括传递给 SLOT 的方法的标识符名称，因此 Qt 完全没有不知道指针指向什么。它只关注 m_funcTrigger( QAction* ) 函数。

我创建了另一个解决方案（我稍后将把它放在这里，我现在正在工作），它要求类的用户将 SLOT(hisOwnFunction()) 传递给设置槽函数的函数。因为该类使用信号槽的想法，所以它依赖于 Qt，因此我认为可以在那里传递 SLOT 而不是指针。你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:51:37.617

1.  您可以使您的插槽虚拟，因此派生类可以覆盖它。

2.  您可以自己调用`m_funcTrigger`您的插槽：

    ```
    private slots:
        void actionTrigger_slot( QAction* a)
        {
         m_funcTrigger(a);
        } 
    ```

# javascript - 如何编写 jQuery 代码

> ID：12062765
> 
> 赞同：-1
> 
> 时间：2012-08-21T20:45:34.097
> 
> 标签：javascript, jquery

我一直在编写 Javascript 代码并广泛使用 jQuery 库。我的代码不是很大，尽管对我来说现在是一个网格。我想知道是否有与您编写代码的方式以及如何构建代码相关的 jQuery 最佳实践，而不仅仅是与性能相关。

我问这个是因为从我的角度来看，使用 jQuery 配置了一种不同的代码编写方式，我认为习惯于编写大量 jQuery + Javascript 代码的人有组织代码的方法。

我还想知道是否有像 Javadoc 一样记录 jQuery 代码的“通用且良好”的方式。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:53:35.380

这个问题很难回答，因为它太宽泛了。如果您想要一个指南来设置您的代码样式，请看这里。

[http://javascript.crockford.com/code.html](http://javascript.crockford.com/code.html)

至于如何构建它，这实际上取决于您使用的框架。每一个都有不同的风格。jQuery 插件和模块具有特定的结构。[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)。Backbone 或 Ember JS 的结构不同。

至于文档。JSDoc 效果很好。这是文档创建工具的链接。[https://github.com/jsdoc3/jsdoc](https://github.com/jsdoc3/jsdoc)。您可以在线查找其他文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:50:55.577

听起来您已经准备好继续使用诸如骨干网之类的东西了。Backbone 是一个框架，可以帮助您编写更结构化的代码。

我喜欢这个介绍： [https ://github.com/kjbekkelund/writings/blob/master/published/understanding-backbone.md/](https://github.com/kjbekkelund/writings/blob/master/published/understanding-backbone.md/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:48:45.460

听起来您正在寻找将代码拆分为模块的东西？[requirejs](http://requirejs.org)允许您将代码拆分为单独的文件，这可以使其更容易推理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T20:56:41.837

我也是 jQuery 的新手（一周前才开始 :)）。我被要求编写一个完全基于 jQuery 和 HTML 的 web-front。

在我看来，如果我使用这个 jQuery 的东西，我会写得尽可能接近它。我的意思是，javascript 中任何可以被 jQuery 的函数和方法替换的东西，我都会替换它。像 getelementid 将被 $("id") 替换。事实上，它确实使代码更简单。

我曾经编写过 C++ 和 Java 代码。因此，当我使用这些语言进行编码时，我可能会有一些使用这种风格的意图。即将每个类、对象、函数分开到不同的文件中。接口和执行代码永远不会在一个文件中，而是加载到 HTML 的头部。我不认识所有人，尤其是专业人士可能不会使用这种方式编写代码，但我觉得这种方式很有条理。此外，它易于调试和更改。

# jekyll - Jekyll 在 HTML 中使用 config.yml 值

> ID：12062766
> 
> 赞同：27
> 
> 时间：2012-08-21T20:45:40.300
> 
> 标签：jekyll

是否可以在 config.yml 文件中设置配置值并将它们打印在 Jekyll 的 HTML 页面中？我想在 config.yml 文件中设置我的网站的默认标题和描述，并将它们打印在我所有布局的标题中。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-21T20:48:33.863

每个模板都有一个`site`变量，其中包含来自`_config.yml`. 例如，如果您有类似`my_setting: "string"`in 的`_config.yml`内容，则可以使用 访问模板中的值`{{ site.my_setting }}`。

**注意：**如果您使用的是`jekyll serve`，则需要重新启动该过程才能进行更改。确实，`_config.yml`没有重新加载手表选项。

# sql - nodes() 或 openxml 返回行的顺序是否与在 xml 中找到的顺序相同？

> ID：12062768
> 
> 赞同：6
> 
> 时间：2012-08-21T20:45:50.980
> 
> 标签：sql, sql-server, sql-server-2008, openxml

我有一个需要使用openxml 或nodes() 解析的xml。xml 包含几个以不同值重复的子标签，如下所示。

```
<root>
    <value>10</value>
    <value>12</value>
    <value>11</value>
    <value>1</value>
    <value>15</value>
<root> 
```

对于我的代码，让所有这些行以与 xml 中相同的顺序返回是非常重要的。我用谷歌搜索和搜索，但没有告诉我@mp:id 是否总是以与 xml 中相同的顺序返回。或者，如果 nodes() 以与遇到它们相同的顺序返回值。

我只想知道我是否可以信任这两种方法中的任何一种并对正确的行顺序感到满意。

PS 请原谅以上文本中的任何错误或错误，我也不喜欢在 android 窗口中输入代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:32:06.670

您可以`row_number`像这样在粉碎的 XML 上使用。

```
declare @XML xml= 
'<root>
    <value>10</value>
    <value>12</value>
    <value>11</value>
    <value>1</value>
    <value>15</value>
</root>'

select value
from
  (
  select T.N.value('.', 'int') as value,
         row_number() over(order by T.N) as rn 
  from @xml.nodes('/root/value') as T(N)
  ) as T
order by T.rn 
```

[使用 DENSE_RANK 唯一标识 XML 节点](http://sqlblog.com/blogs/adam_machanic/archive/2009/08/03/uniquely-identifying-xml-nodes-with-dense-rank.aspx)

更新：

您也可以使用这样的数字表；

```
declare @XML xml= 
'<root>
    <value>10</value>
    <value>12</value>
    <value>11</value>
    <value>1</value>
    <value>15</value>
</root>';

with N(Number) as
(
  select Number
  from master..spt_values
  where type = 'P'
)
select @XML.value('(/root/value[sql:column("N.Number")])[1]', 'int')
from N
where N.Number between 1 and @XML.value('count(/root/value)', 'int')
order by N.Number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:22:13.913

XPath 允许您通过序数显式选择节点：`'/root[1]/value[1]'`是第一个元素，`'/root[1]/value[2]'`是第二个元素等。也可以使用`'(/root/value)[1]'`and `'(/root/value[2])'`。这样您就可以准确地选择您想要的元素，然后选择元素 1 然后选择元素 2 然后选择元素 3 等将为您提供受控顺序。缓慢，但受到控制。

*更新*PS 这不是很好吗？

```
declare @x xml = '<root>
    <value>10</value>
    <value>12</value>
    <value>11</value>
    <value>1</value>
    <value>15</value>
<root>';

select x.value(N'position()', N'int') as position,
  x.value(N'.', 'int') as value
  from @x.nodes(N'//root/value') t(x) 
```

不幸的是，不是...

```
Msg 2371, Level 16, State 1, Line 9
XQuery [value()]: 'position()' can only be used within a predicate or XPath selector 
```

而这个错误的存在让我担心*有时*会破坏秩序……

# nosql - 如何在 CouchDB / NoSQL 中实现多态对象？

> ID：12062769
> 
> 赞同：0
> 
> 时间：2012-08-21T20:45:58.823
> 
> 标签：nosql, couchdb, polymorphism

我想在 NoSQL / Document DB 中实现多态对象？什么是最佳实践？

示例：大师级 **项目对象**（都应该有 Item.Title、Item.Subtitle、Item.IconURL）

**子类：ItemPhoto、ItemPDF、ItemURL、ItemHTML** （每个子类都有不同的属性）

我想一般地列出所有项目 - 然后在我向下钻取时获取特定数据。

**可能的选项：**

保存两个不同的文档 - 带有主/子类型和 ID 将所有文档保存为带有内部项目对象的子类文档

其他选择？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:46:09.953

CouchDB stores documents (data), not classes (data with code). There's the code in map, validation, list, and show functions which handle documents, but those documents are plain objects that carry data only.

In your example, you can define a library function to check that a given document contains the data of an item, and then use this function to decide what to do. For example:

```
// in a "appTypes" library:
exports.isItem = function(doc) {
  return doc.Title && doc.Subtitle && doc.IconURL;
}

// in a map function
function(doc) {
  var appTypes = require('appTypes');
  if (appTypes.isItem(doc)) {
    // doc is an Item...
  }
} 
```

Obviously you can put all code belonging to an Item in an Item class and create instances of that class initialized with the data in the doc. But that's your choice, and does not change how CouchDB will handle the document.

# mysql - MySQL 每小时一次的结果

> ID：12062772
> 
> 赞同：0
> 
> 时间：2012-08-21T20:46:11.733
> 
> 标签：mysql, datetime

考虑如下表：

```
CREATE TABLE records (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    eventOccured DATETIME NOT NULL,
    eventType INT NOT NULL,
    eventDescription VARCHAR(32)
) 
```

我想从整个表中检索`eventOccured`and`eventType`字段，但如果两个或多个事件在一小时内发生，那么我只想要其中的第一个。如果从 N:00 到 N:59 的所有事件都被认为是同一小时，这将很简单，但在这种情况下，事件类型为“5”的 12:15 的事件将被认为在 11 点后不到一小时内发生： 45 eventType "5"，因此不应返回。这可以在没有存储过程的情况下在 MySQL 中完成吗？我可以编写这样的程序，但我担心它会占用大量资源，我很想了解 MySQL 是否具有这种开箱即用的能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:54:49.977

你的意思是你想要所有事件，在接下来的 60 分钟内没有其他事件。此查询以对 mysql 友好的方式执行此操作：

```
select *
from records r
where not exists (select 1
                  from records r2
                  where r2.eventOccured > r.eventOccured and
                        timestampdiff(minute, r.eventOccured, r2.eventOccured) < 60
                 ) 
```

# python - 如何让 Netcat 显示数据包的有效载荷

> ID：12062781
> 
> 赞同：2
> 
> 时间：2012-08-21T20:46:46.223
> 
> 标签：python, scapy, netcat

我不知道这是否可能，但我想知道？

我正在做一些内部渗透测试并使用 Scapy 和 Netcat，我创建了一个带有有效负载“测试”的 TCP 数据包。我想使用以下示例代码将有效负载内容通过管道传输到 Netcat 的侦听端口：

```
test = IP(src="192.168.4.134")/TCP(dport=1234)/"testing"
send(test) 
```

但所有打印出来的是：

```
.
Sent 1 packets 
```

这是 Scapy 在发送数据包后吐出的内容。我一直在试图弄清楚我需要在我的代码中使用什么来显示这一点。我知道 Netcat 使用标准输入和标准输出，但我还不知道如何用 Python 编码，我只是在练习！

任何人都可以帮忙吗？问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T20:08:10.887

TCP 是基于会话的。想要通信的机器必须首先相互同步（设置会话）。

这个过程就是所谓的 3 次握手，使用以下步骤：SYN、SYN-ACK、ACK。

```
1.) Machine A ====SYN====> Machine B (Machines A, running scapy, tries to synch with B, running netcat)
2.) Machine B ==SYN-ACK==> Machine A (Machine B ACKs and SYNs with Machine A)
3.) Machine A ====ACK====> Machine B (Machine A ACKs the SYN-ACK from Machine B) 
```

机器现在有一个会话（连接）并且可以互相发送数据。

在侦听机器上运行 netcat 并尝试从 scapy 发送单个数据包失败，因为您的机器 (A) 无法与运行 netcat 的机器 (B) 同步。

```
IP 10.22.4.45.20 > 10.1.2.3:1234: Flags [S], seq 0:7, win 8192, length 7
IP 10.1.2.3:1234 > 10.22.4.45:20: Flags [S.], seq 2668993358, ack 1, win 14600, options [mss 1460], length 0
IP 10.22.4.45:20 > 10.1.2.3:1234: Flags [R], seq 1, win 0, length 0 
```

如您所见，机器 B (netcat) 尝试与您的机器同步确认，但是由于您只是向它发送了一个数据包并且没有监听返回的 SYN-ACK，因此您的机器会生成一个 RST（重置）并且尝试的连接在 3 次握手完成之前被关闭。

有两种选择。要么使用无连接且不需要此连接设置的 UDP，要么进行完整的 TCP 握手。如果您选择后者，Scapy 有几种方法可以帮助您管理 TCP 会话创建：http: [//trac.secdev.org/scapy/wiki/TCP](http://trac.secdev.org/scapy/wiki/TCP)

# intellij-idea - 如何摆脱 IntelliJ 中的额外调试信息？

> ID：12062786
> 
> 赞同：3
> 
> 时间：2012-08-21T20:47:14.003
> 
> 标签：intellij-idea, rubymine

我在 IntelliJ 中得到了太多的调试信息，不知道如何摆脱它？？？这是针对 ruby​​+rails 应用程序的。

```
Fast Debugger (ruby-debug-ide 0.4.17.beta14, ruby-debug-base 0.11.30.pre10) listens on 127.0.0.1:12685
Connected from 127.0.0.1
11247: Starting control thread
11247: Processing in control: b /Users/kamilski81/Sites/sc/config/initializers/mongoid.rb:9
11247: <breakpointAdded no="1" location="/Users/kamilski81/Sites/sc/config/initializers/mongoid.rb:9"/>
11247: Processing in control: b /Users/kamilski81/Sites/sc/config/initializers/mongoid.rb:2
11247: <breakpointAdded no="2" location="/Users/kamilski81/Sites/sc/config/initializers/mongoid.rb:2"/>
11247: Processing in control: b /Users/kamilski81/.rvm/gems/ruby-1.9.3-p194@sc/gems/rails_admin-0.0.5/lib/rails_admin/config/model.rb:27
11247: <breakpointAdded no="3" location="/Users/kamilski81/.rvm/gems/ruby-1.9.3-p194@sc/gems/rails_admin-0.0.5/lib/rails_admin/config/model.rb:27"/>
11247: Processing in control: b /Users/kamilski81/.rvm/gems/ruby-1.9.3-p194@sc/gems/rails_admin-0.0.5/lib/rails_admin/config.rb:240
11247: <breakpointAdded no="4" location="/Users/kamilski81/.rvm/gems/ruby-1.9.3-p194@sc/gems/rails_admin-0.0.5/lib/rails_admin/config.rb:240"/>
11247: Processing in control: b /Users/kamilski81/Sites/sc/app/controllers/application_controller.rb:52 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T00:54:38.663

IntelliJ IDEA 和 RubyMine 默认情况下不这样做，很可能会`print_debug`出现带有方法的输出，因为`Debugger.cli_debug=true`它存在于代码中的某处，或者您将`RUBYMINE_DEBUG_VERBOSE`环境变量设置为`true`，或者启用了此选项：

![详细调试器输出](../Images/9054fbdd8129a3ac5cfa3e6130f09dc6.png)

（IntelliJ IDEA 有同样的设置）

# sql - 我在 Access 连接查询中收到 #Error 消息，但我不知道为什么

> ID：12062788
> 
> 赞同：2
> 
> 时间：2012-08-21T20:47:17.847
> 
> 标签：sql, ms-access, join

我正在尝试合并两组单独的数据。在两组数据之间，一些条目可能是重复的。

表格1：

```
 Common Field A | Field 1 | Field 2
 ---------------------------------
       a            a1        a2
       b            b1        b2 
```

表 2：

```
 Common Field B | Field 3 | Field 4
 ---------------------------------
       c            c1        c2
       a            a1        a2 
```

我对公共字段进行了联合查询以获得：

```
 Common Field 
 ---------------
       a
       b
       c 
```

现在我做了2个连接。联合查询和表 1 之间的一次连接，以及联合查询和表 2 之间的一次连接。基本上每个连接都已完成，以便列出联合查询的所有条目，并且表中的公共字段匹配的行将列出联合查询条目。这样做之后，我创建了一个包含所有列的查询（记住上面的两个连接）。这是我的预期：

```
 Common Field | Common Field A | Common Field B | Field 1 | Field 2 | Field 3 | Field 4
 ------------------------------------------------------------------------------------------
       a               a                a            a1        a2        a1        a2
       b               b                             b1        b2
       c                                c                                c1        c2 
```

这是我得到的：

```
 Common Field | Common Field A | Common Field B | Field 1 | Field 2 | Field 3 | Field 4
 ------------------------------------------------------------------------------------------
       a               a                a            a1        a2        a1        a2
       b               b              #Error         b1        b2
       c             #Error             c                                c1        c2 
```

我不确定为什么我会收到#Error 标志，我也很困惑为什么我只将它们用于公共字段条目。如果有的话，我希望至少能像这样得到它们：

```
 Common Field | Common Field A | Common Field B | Field 1 | Field 2 | Field 3 | Field 4
 ------------------------------------------------------------------------------------------
       a               a                a            a1        a2        a1        a2
       b               b              #Error         b1        b2      #Error    #Error
       c             #Error             c          #Error    #Error      c1        c2 
```

有没有办法摆脱它们？我试过使用 IIF(IsError(....)) 但这没有用。我在网上发现了一些尝试，人们试图摆脱 #Error 消息但无法解决它。我知道最好找到问题的根源，但在这一点上，我可以摆脱#Error 消息本身。关于我应该如何处理这个问题的任何想法？

编辑：这是一些示例 SQL：

```
SELECT qryUnion.CommonField, tbl1.CommonFieldA, tbl2.CommonFieldB, tbl1.Field1, tbl1.Field2, tbl2.Field3, tbl2.Field4 
FROM tbl2 RIGHT JOIN ( tbl1 RIGHT JOIN qryUnion ON tbl1.CommonFieldA = qryUnion.CommonField) ON tbl2.CommonFieldB = qryUnion.CommonField; 
```

EDIT2：如果这很重要，这是连接的 SQL：

```
SELECT tbl1.CommonFieldA FROM tbl1 UNION tbl2.CommonFieldB FROM tbl2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T03:22:09.867

鉴于#error 的显示和查询的语法，我猜您已经在查询窗口中完成了此操作。

创建一个新的查询，去掉添加表窗口，把它放到 SQL 视图中，然后把这个逻辑放进去：

```
select c.unique, a.commonfieldA, b.commonfieldB, a.field1, a.field2, b.field3, b.field4
from (
    select distinct u as unique from (
        select commonfieldA as u from tbl1 
        union all
        select commonfieldB as u from tbl2
    ) combined ) c 
    left join tbl1 a on c.unique = a.commonfieldA
    left join tbl2 b on c.unique = b.commonfieldB 
```

这应该有效。我不使用您拥有的 Union 语法，而是从 union-all'd 复合（子查询“combined”）中选择不同的值。左连接意味着数据必须存在于连接条件左边的表中（即c，是在声明tbl1或tbl2之前定义的表），但数据可能存在也可能不存在于右边的表中.

我会将您的问题归结为为您生成的语法访问，因为它试图了解您正在尝试做什么：它显示“#Error”对我说它不理解。

# arrays - 用逗号分隔的数组填充 asp 中的列表框

> ID：12062790
> 
> 赞同：0
> 
> 时间：2012-08-21T20:47:23.880
> 
> 标签：arrays, loops, asp-classic, listbox

```
<html>
<title>Test</title>
<body bgcolor="FFFFFF">
<%
Set conn = Server.CreateObject("ADODB.Connection")
conn.open "Provider=SQLOLEDB.1;Password=123;Persist Security Info=True;User ID=sa;Initial Catalog=123;Data Source=1234"
Set rs = Server.CreateObject("ADODB.Recordset")
SQL = "select * from 1234"
rs.open SQL, conn
response.write("<table border='1'>")
While Not rs.EOF
response.write("<tr><td>" & rs("Name") & "</td><td>" & rs("PID") & "</td><td>" &     rs("Coords") & "</td><td>" & rs("Items") & "<select size='3' name='itemlist'>Array through option tags here????</select></td></tr>")
rs.MoveNext
Wend
response.write("</table>")
rs.close
conn.close
Set rs = Nothing
Set conn = Nothing
%>
</body>
</html> 
```

我的 rs("Items") 包含许多逗号分隔的值，我想将每个项目添加到列表框中。有人可以指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T05:25:13.363

您可以将 while/wend 循环中的 response.write 行更改为此，这将创建一个选择框，其中包含来自 rs("Items") 的逗号分隔值：

```
response.write("<tr><td>" & rs("Name") & "</td><td>" & rs("PID") & "</td><td>" & rs("Coords") & "</td><td><select size='3' name='itemlist'>")
Dim opts, i
opts = Split(rs("Items"), ",")
For i = 0 To UBound(opts)
    response.write("<option>" & opts(i) & "</option>")
Next
response.write("</select></td></tr>") 
```

如果您需要做任何更复杂的事情，比如有单独的选择选项值/文本，或者需要预先选择一个选项，那么您将需要对此进行扩展。

# database - 通过变量更改数据库上下文

> ID：12062792
> 
> 赞同：0
> 
> 时间：2012-08-21T20:47:30.047
> 
> 标签：database, tsql

如何将变量用作数据库上下文？

```
Create Procedure [dbo].[prName] (@dbname varchar(25)) as
begin
use master
some sql
<!--  I need to use master for some functions stored in master -->

use @dbname

exec('SELECT column_name FROM INFORMATION_SCHEMA.COLUMNS WHERE [TABLE_CATALOG] = '+@dbname+' and TABLE_NAME=table123')

end

GO 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:56:26.310

我认为您可能想要使用以下内容：

```
CREATE Procedure [dbo].[prName] (@dbname varchar(25)) as
begin
   exec('select top 5 * from '+@dbname+'.yourSchema.yourTable')
end 
```

`USE`存储过程中不允许使用该语句。如果您传入数据库名称，则不需要该`USE`语句，数据库名称将包含在您的 sql 查询中。

编辑：根据您需要访问master中的项目的编辑，那么您需要做的就是执行您的sql，指定`master`只需要使用完全限定的sql。

```
CREATE Procedure [dbo].[prName] (@dbname varchar(25)) as
begin

    select * from master.INFORMATION_SCHEMA.TABLES

    exec('select top 5 * from '+@dbname+'.yourSchema.yourTable')
end 
```

# safari - Websocket 和 Safari 6.0

> ID：12062799
> 
> 赞同：0
> 
> 时间：2012-08-21T20:47:55.610
> 
> 标签：safari, websocket

我正在使用 Safari 6 和 websockets。我的服务器正在从浏览器接收以下握手：

```
GET / HTTP/1.1
Upgrade: websocket
Connection: Upgrade
Host: nomad.local:1299
Origin: file://
Sec-WebSocket-Key: WhZTuybN4i2ZshDBxco42w==
Sec-WebSocket-Version: 13
Sec-WebSocket-Extensions: x-webkit-deflate-frame 
```

没有包含协议。我的服务器可以处理这个问题，但是当它尝试完成与浏览器客户端的握手时，我收到以下消息：WebSocket 握手期间出错：Sec-WebSocket-Protocol mismatch

发送到服务器的消息中是否有隐含的协议，我需要在握手中返回给客户端？

这在我升级到最新的 Safari 之前有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:28:29.870

如果客户端在握手（Sec-WebSocket-Protocol）中没有发送任何子协议，那么服务器不能发回子协议头（Sec-WebSocket-Protocol）。如果服务器发回“Sec-WebSocket-Protocol:chat”的通用默认值，即使客户端没有包含子协议标头，客户端也必须拒绝连接。一些浏览器对此很草率，最近开始加强合规性。

如果客户端确实发送了子协议列表，则服务器必须选择它支持的单个子协议并将其作为所选子协议发送回客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:55:42.247

好吧，协议是 WebSockets ;-) 有关 Sec-WebSocket-Protocol 的进一步解释，请参阅 RFC：[http ://datatracker.ietf.org/doc/rfc6455/?include_text=1](http://datatracker.ietf.org/doc/rfc6455/?include_text=1)

来自客户端的握手如下所示：

```
 GET /chat HTTP/1.1
    Host: server.example.com
    Upgrade: websocket
    Connection: Upgrade
    Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==
    Origin: http://example.com
    Sec-WebSocket-Protocol: chat, superchat
    Sec-WebSocket-Version: 13 
```

来自服务器的握手如下所示：

```
 HTTP/1.1 101 Switching Protocols
    Upgrade: websocket
    Connection: Upgrade
    Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=
    Sec-WebSocket-Protocol: chat 
```

不知道 Safari 6 的实现是否不同，但来自 RFC 的协议通常是一场噩梦……可能隐含了一个标准？

# python - 在 gae 中安装 pytz 会给出 UnknownTimeZoneError

> ID：12062800
> 
> 赞同：1
> 
> 时间：2012-08-21T20:47:59.057
> 
> 标签：python, google-app-engine, timezone, pytz

[unutbu](https://stackoverflow.com/users/190597/unutbu)在这里很好地回答了我之前的问题[2](https://stackoverflow.com/questions/11925664/what-is-the-local-timezone)，但似乎没有 pytz 可以直接使用我的 SDK 导入。所以我去寻找替代品并找到了，例如这个建议从这里下载的[答案](https://stackoverflow.com/questions/10843148/importerror-using-pytz-in-google-app-engine)[4](http://pypi.python.org/pypi/gaepytz)。

我将以下代码放在本地交互式控制台中。

```
import datetime as dt
import pytz

utc = pytz.utc
western = pytz.timezone('US/Pacific') 
```

我将下载的目录`pytz`放在本地根目录中`scheduler`，然后解压缩包含的文件`scheduler/pytz/zoneinfo.zip`，并在交互式控制台中收到以下错误。我根本没有调整`app.yaml`；那是对的吗？

```
"/Users/brian/googleapps/scheduler/pytz/__init__.py", line 173, in timezone
    raise UnknownTimeZoneError(zone)
UnknownTimeZoneError: 'US/Pacific' 
```

我还在这里找到了一个类似错误的答案[5](https://stackoverflow.com/questions/1718724/how-to-properly-add-pytz-to-a-google-app-engine-application)，它建议对**init** .py 文件进行修补。

现在我在[这里找到了一个答案 6](https://stackoverflow.com/questions/1718724/how-to-properly-add-pytz-to-a-google-app-engine-application)，这表明如果使用 VERSION 2010h 而不是 VERSION 2011h 并且我下载的 pytz 是 2010h，则会发生错误。怎么了？

有没有一种简单的方法可以将 Wooble 的答案与 pytz 一起使用。他的回答是否暗示我必须在`pytz`部署时使用我的 gae 应用程序上传目录，或者那里已经存在 pytz？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:57:43.827

您需要调用`from pytz.gae import pytz`才能使 gae-pytz 工作，否则您将使用常规的 pytz。

# html - css表格双边框在最后关闭单元格

> ID：12062801
> 
> 赞同：-3
> 
> 时间：2012-08-21T20:48:01.840
> 
> 标签：html, css, html-table

我已经创建为具有边框的 css，以便表格看起来像一个 1px 的网格。第一列是双边框。问题是由于双边框，最后一行前 2 个单元格没有关闭。我不能在表格级别使用边框，因为它也关闭了第一行单元格，这不是必需的。第一行单元格上边框设置为白色，这样就没有边框了

我也尝试了 box-layout css 道具，但是这个 & border-top on table level 介绍了表格。我知道我可以将它添加到 div 中，以便 div 可以有边框，但我正在寻找解决此问题的最佳方法，包括无论如何都可以使用设置为 table、tr 或 td 级别的属性来解决它。

下面是表格和 css，或者可以在这里找到：http: [//jsfiddle.net/TcQ2j/](http://jsfiddle.net/TcQ2j/)。

```
<table class="tblplg sty4">
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>5</td>
                        <td>6</td>
                        <td>7</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>9</td>
                        <td>10</td>
                        <td>11</td>
                    </tr>
                    <tr>
                        <td>12</td>
                        <td>13</td>
                        <td>24</td>
                        <td>15</td>
                    </tr>
                </tbody>
            </table> 

<style type="text/css">
/*style4*/
.tblplg.sty4  {
    border-collapse:collapse;
    text-align: center;

}

.sty4 td {
         border: 1px solid black;
}

.sty4 td:first-child {
    text-align: left;   
}

.sty4 tr:first-child td{
    border-bottom: double   
}

.sty4 tr:first-child td:first-child{
    border-left: 0px;   
}

.sty4 tr:first-child td{
    border-top: 0px;    
}

.sty4 td:first-child {
         border-right: double;

}

.sty4 tr:last-child td {
         border-bottom: 0px;

}
/*style4*/
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T02:51:01.787

这不是最干净的答案，但它确实有效。看起来它是导致问题的双边框的浏览器解释，所以我将您的表格设置为相对位置，然后使用 :after 伪元素添加位于表格底部的一行。

[http://jsfiddle.net/xKuJH/5/](http://jsfiddle.net/xKuJH/5/)

# css - 灯箱和“a”属性（需要单独的结果）

> ID：12062802
> 
> 赞同：0
> 
> 时间：2012-08-21T20:48:09.763
> 
> 标签：css, attributes, lightbox

我认为来到这里就像向爱因斯坦询问长除法，但希望有人能提供帮助——我搜索了谷歌和这个网站，但找不到答案。如果我的术语不是很好，我很抱歉 - 我现在正在自学这些东西。

我有, , 等的属性`a`，这些属性应该只适用于文本链接。我想使用灯箱，但不希望灯箱缩略图得到与文本链接相同的处理。`a:link``a:hover`

有没有办法做到这一点？我查看了灯箱网站，发现链接中会有一个“rel”——这会绕过我目前拥有的属性，还是我的灯箱链接在悬停时也会有边框？如果不是，我将如何为灯箱链接创建单独的属性？

我真的很感激任何帮助。我已经找到了我在这个网站上遇到的几乎所有问题的答案，而无需实际询问，但我找不到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:03:57.410

最好的方法是为您的灯箱链接添加一个类名，并专门为该类添加样式。

```
<a href="#" class="lb_link">Lightbox Link</a>

<style>
a.lb_link {
  border: none;
}
</style> 
```

我对样式所做的是以类 lb_link 的链接为目标，并为这些链接添加特定样式。

# visual-studio-2008 - OleCreateFromFile 返回 0x80040154：类未注册

> ID：12062805
> 
> 赞同：0
> 
> 时间：2012-08-21T20:48:15.920
> 
> 标签：visual-studio-2008, com, ms-word, ole

使用 *.docx 文件路径调用[OleCreateFromFile](http://msdn.microsoft.com/en-us/library/windows/desktop/ms690116%28v=vs.85%29.aspx "OleCreateFromFile")返回 0x80040154：未注册类。这是在安装了 Office 2010 和 Visual Studio 2008 的 Windows 7 系统上，但该问题已在各种系统以及 Office 2003 上重现。

如何确定尝试注册的课程？使用相同的文件路径参数调用[GetClassFile](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693715%28v=vs.85%29.aspx "获取类文件")会为 Microsoft Word 生成一个有效的 CLSID，它确实可以从应用程序中实例化。此应用程序的旧版本与 OleCreateFromFile 的调用完全相同，不会出现此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:19:33.380

您可以相对轻松地做的是使用[性能监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来跟踪调用`OleCreateFromFile`API 和`REGDB_E_CLASSNOTREG`返回之间的注册表活动。您将看到查询的注册表项，尤其是。在 下`HKEY_CLASSES_ROOT`，您将能够按照 API 的尝试来实例化对象。

# c++ - 交换指针，删除第二个对象并创建指向第二个的新指针

> ID：12062807
> 
> 赞同：2
> 
> 时间：2012-08-21T20:48:18.170
> 
> 标签：c++, pointers, swap

我正在尝试交换指针，但我得到的只是访问错误，有什么办法可以做到这一点吗？

```
void Swap(someObject *first, someObject *next)
{
     delete first;
     first = next;
     // I'm guessing this delete first pointer as well ?
     delete next;
     next = new someObject();
}; 
```

**对方法的说明：** 它应该首先与第二个交换并在第二个创建一个“someObject”的新实例，它不应该像 = FIRST = SECOND、SECOND = FIRST 那样交换。只是 first 变成了 second ，而 second 变成了一个新的对象或指向一个对象的新指针。

第二 = 下一个。

**解决方案**

```
void Swap(someObject*& first, someObject*& next)
{
    std::swap(first, next);
    next = new someObject();
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:52:23.660

是的，有，但你错过了一些东西。当您传递`someObject *first`时，会发生什么是在您的函数中，有一个您传递的指针的副本，名为`first`。因此，如果你改变 的值`first`，你改变了局部变量的值，它不会传播到原始变量。

您需要做的是通过这种方式传递对指针的引用：

```
void Swap(someObject*& first, someObject*& second)
{
     delete first;    // Will delete whatever first points to
     first = second;
     delete second;   // first will now point to a deallocated object, you'd better set first = nullptr
     second = new someObject();    // Will really set second to something new
}; 
```

如果只需要交换两个指针，还可以使用标准库实用函数`std::swap`。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:50:50.573

该特定片段中不应该有任何访问错误，但您确实删除了两个内存位置。

请注意，在您的函数之外，两个指针都将悬空，因为您不是在修改它们，而是在复制它们。

要使修改在函数之外持久化，您需要通过引用传递指针。

```
void Swap(someObject*& first, someObject*& second) 
```

调用这个版本后，`second`会指向一个有效的位置，`first`不会（因为你删除了内存并且从未重新分配过指针）。

此外，要交换，您只需使用[`std::swap`](http://www.cplusplus.com/reference/algorithm/swap/). 不要重新发明轮子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T20:53:04.217

这肯定会导致访问错误，因为您充其量只是交换指针的*本地副本*。传入的参数必须是对指针的*引用：*

```
void Swap(someObject*& first, someObject*& second)
{
   someObject* temp = first;
   first = second;
   second = temp;
}; 
```

顺便说一句，不要将诸如“swap”之类的知名名称的含义更改为涉及删除和新建的任意交换。交换意味着它的意思。如果你想要一个花哨的操作来完成你花哨的分配/删除/新建，请将其命名为别的。

> 它应该首先与第二个交换并在第二个创建一个“someObject”的新实例，

无论您如何切片，这都不是交换。我将其称为“Shift”，但我们将其称为 MyOperation：

```
void MyOperation(someObject*& first, someObject*& second)
{
   someObject* temp = new someObject;
   delete first;
   first = second;
   second = temp;
}; 
```

请注意 temp 是如何*预先分配*的，因为它最有可能抛出，并且您希望在[发生异常时将事物保持在连贯状态](http://www.gotw.ca/publications/xc++.htm)。删除和简单的指针赋值不能抛出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T20:53:57.947

试试这个交换习语。您的修改了参数（并删除了两个对象），但实际上并未在调用站点交换指针值。

```
template <typename T>
void Swap(T & a, T & b)
{
    T x = a;

    a = b;
    b = x;
} 
```

但是，您可以轻松地使用`std::swap`它；它会有效地做这个模板函数所做的同样的事情。

# xcode4 - 如何将 xcode 项目更新到 Cocos2d- 2.0

> ID：12062814
> 
> 赞同：0
> 
> 时间：2012-08-21T20:48:37.143
> 
> 标签：xcode4, cocos2d-iphone

我刚刚下载了 cocos2d~2.0，但我无法弄清楚如何使用 cocos2d~2.0 启动一个新的 Xcode 项目。我也无法在下载中打开自述文件。做过这件事的人能给我一步一步的帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:17:32.560

您是否尝试按照 cocos2d 网站上的迁移指南进行操作？[http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:migrate_to_v2.0](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:migrate_to_v2.0)

# javascript - 如何在不使用 css 过渡的情况下将 jQuery animate 与 css3 属性结合起来？

> ID：12062818
> 
> 赞同：6
> 
> 时间：2012-08-21T20:48:46.940
> 
> 标签：javascript, jquery, css, animation, rotatetransform

在这个例子中；我正在尝试使用 css3 旋转属性创建一个 jQuery 动画。我可以用 css3`transition`和 jQuery管理这个动画，`css()`但我想用 jQuery`animate()`来根据我的 jQuery variatons 旋转 deg 值。

jQuery 1.8.0 是否可以使用带有 css3 属性值的动画？

**[这是要检查的jsFiddle。](http://jsfiddle.net/prCWc/56/)**

**jQuery：**

```
var rotateVal = 90;

//this method isn't working
$('.red').animate({
    'transform':'rotate('+rotateVal+'deg)'
},500);

//this way works but i don't want to do this with transitions
$('.black').css({
    'transform':'rotate('+rotateVal+'deg)',
    'transition':'1s'
});​ 
```

**html:**

```
<span class="black"></span>
<span class="red"></span> 
```

编辑：移除了供应商前缀，例如`-webkit-`. 感谢凯文 B。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T20:55:12.303

这是可能的，但并不容易。

```
var red = $(".red"),
    rotateVal = 90;
$("<div />").animate({
    height: rotateVal
},{
    duration: 500,
    step: function(now){
        red.css('transform','rotate('+now+'deg)');
    }
}); 
```

这基本上创建了一个分离 div 的假动画，然后在每一步更新目标 div 的旋转。

编辑：哎呀！错误的参数顺序。这是一个演示。[http://jsfiddle.net/qZRdZ/](http://jsfiddle.net/qZRdZ/)

请注意，在 1.8.0 中，我认为您不需要指定所有供应商前缀。

使用这种方法，您几乎可以为任何东西制作动画，只要您记住，`+=`除非经过`-=`编码，否则它们将无法正常工作。

**更新：**这是我的解决方案和 cuzzea 的解决方案在一个函数后面抽象的组合。[http://jsfiddle.net/qZRdZ/206/](http://jsfiddle.net/qZRdZ/206/)

```
$.fn.rotate = function(start, end, duration) {
    console.log(this);
    var _this = this;
    var fakeDiv = $("<div />");
    _this.promise().done(function(){
        _this.animate({"a":end},{duration:duration});
        fakeDiv.css("height", start).animate({
            height: end
        }, {
            duration: duration,
            step: function(now) {
                _this.css("transform", "rotate(" + now + "deg)");
            },
            complete: function() {
                fakeDiv.remove();
            }
        });
    });

    return _this;
};

var red = $('.red');
red.click(function() {
    if ( !$(this).is(':animated') ) {

        red.rotate(45,135,500);
        setTimeout(function(){
            red.rotate(135,190,500);
        },750);
        setTimeout(function(){
            red.rotate(190,45,500);
        },1500);
    }
}); 
```

});

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T19:31:48.803

凯文几乎是正确的。:)

[这是工作的jsFiddle。](http://jsfiddle.net/qZRdZ/17/)

您不必使用其他元素和高度，您可以执行以下操作：

```
var red = $('.red'),
max_rot = 45,
start_from = 90;

red.css({a:0}).animate(
    {'a':1},
    { step: function(value,tweenEvent)
       {
         rotateVal = start_from + max_rot * value;
         red.css({
           'transform':'rotate('+rotateVal+'deg)',
         });
       }
     },
1000);​ 
```

想法很简单。首先我们创建一个虚假的 css 属性“a”并将其设置为 0，然后我们将其设置为 1，因此 step 函数将为您提供一个 0 到 1 的值，您可以使用它来设置自定义变换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:24:10.600

另一种方法是使用 jQuery 将 dom 更改为 css 可以响应的内容。

我们可以将我们的 css 设置为如下所示：

```
.object {
    -webkit-transition:all .4s;
    -moz-transform:all .4s;
    -o-transform:all .4s;
    -ms-transform:all .4s;
    transform:all .4s;
}
.object[data-rotate="false"] {
    -webkit-transform:rotate(0deg);
    -moz-transform:rotate(0deg);
    -o-transform:rotate(0deg);
    -ms-transform:rotate(0deg);
    transform:rotate(0deg);
}
.object[data-rotate="true"] {
    -webkit-transform:rotate(90deg);
    -moz-transform:rotate(90deg);
    -o-transform:rotate(90deg);
    -ms-transform:rotate(90deg);
    transform:rotate(90deg);
} 
```

我们的 jQuery 看起来像这样：

```
$('#trigger').live('click',function(){
    if($('.object').attr('data-rotate') = true) {
        $('.object').attr('data-rotate',false);
    }
    else {
        $('.object').attr('data-rotate', true);
    }
}); 
```

显然，浏览器必须支持转换您想要运行的任何动画的能力，因此它的命中或未命中取决于动画的类型，但如果您有大量的东西正在进行或您有一些东西，它会更好地工作您想要同时制作动画的孩子。

小提琴示例：http: [//jsfiddle.net/ddhboy/9DHDy/1/](http://jsfiddle.net/ddhboy/9DHDy/1/)

# java - 找出构造了哪个枚举值

> ID：12062820
> 
> 赞同：2
> 
> 时间：2012-08-21T20:48:56.640
> 
> 标签：java, reflection, enums

我不知道我想做的事情是否可行，但无论如何我都会问。

我想找出在这个枚举的构造函数中构造了哪个枚举值。这是伪代码：

```
enum SomeEnum {
    VALUE_ONE, VALUE_TWO;

    private SomeEnum() {
        System.out.print(*some-reflection-magic*);
    }
} 
```

所以当我打电话给`SomeEnum.VALUE_ONE`其他地方时，我的`System.out`.

不要问为什么，只是为了好玩:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:54:49.683

`System.out.println(this);`在构造函数中打印`enum`被实例化的常量。

例子：

```
public enum EnumExcersise {

    RED(5) {

        @Override
        public String getHexVal() {
            return "Red Value";
        }
    }, BLUE(4) {

        @Override
        public String getHexVal() {
            return "Blue Value";
        }
    }, GREEN(3) {

        @Override
        public String getHexVal() {
            return "Green Value";
        }
    }, YELLOW(8) {

        @Override
        public String getHexVal() {
            return "Yellow Value";
        }
    };

    public abstract String getHexVal();

    public int getVal() {
        return value;
    }
    private int value;

    private EnumExcersise(int ipValue) {
        System.out.println(this);
        this.value = ipValue;
    }
} 
```

印刷：

```
RED BLUE GREEN YELLOW 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T21:03:39.663

*如果您希望每次*使用枚举常量时都打印一些内容，那么答案是否定的。枚举值被实例化一次（并且在许多方面构成了 JVM 上典型的单例实现），通常是在`enum`加载类型时。这就是为什么在`enum`'s 构造函数中打印时，您会观察到所有值都被实例化了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T21:15:01.947

枚举成员遵循`static`常规类成员的逻辑。它们都是在类初始化时初始化的，这发生在运行代码第一次引用类的那一刻。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T20:57:17.290

**所有**枚举对象值仅在初始加载到 JVM 时自动创建一次：

```
enum SomeEnum {
    VALUE_ONE, VALUE_TWO;

    private SomeEnum() {
        System.out.println("Constructing SomeEnum " + name());
    }

    public static void main(String[] args) {
        System.out.println(VALUE_ONE);
    }
} 
```

输出：

```
Constructing SomeEnum VALUE_ONE
Constructing SomeEnum VALUE_TWO
VALUE_ONE 
```

# javascript - 如何创建执行 AJAX 调用的函数？

> ID：12062822
> 
> 赞同：2
> 
> 时间：2012-08-21T20:49:03.650
> 
> 标签：javascript, ajax

我正在尝试创建一个生成 AJAX 调用并返回响应的函数。

```
function msg(message)
{
    send = new XMLHttpRequest();
    send.open("POST", "msghandler.php", false);
    send.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    send.send("msg="+encodeURI(message));
    return send.responseText;
} 
```

正如您所看到的，现在我正在使用同步调用，但这不是最佳解决方案，因为在我的调试中很常见服务器端出现问题并最终冻结我的浏览器。有没有办法使调用异步*并*让函数返回响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:03:30.047

你不能返回不存在的东西。但是如果你害怕在永恒中缩进回调，你可以返回一个 promise 对象。这是一个非常简单的例子：

```
function msg(message) {
    var done = function(){};
    send = new XMLHttpRequest();
    send.open("POST", "msghandler.php", true);
    send.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    send.send("msg="+encodeURI(message));
    send.onreadystatechange = function() {
        if(send.readyState == 4){
            done(send.responseText);
        }
    });
    return {
        ready: function(fn) { done = fn; }
    };
};

msg('foo').ready(function(response) {
    alert(response);
}); 
```

许多框架已经实现了延迟对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:54:57.057

这是不可能的，因为浏览器中的 JavaScript 引擎（除了网络工作者）本质上是单线程的。如果您希望您的`msg()`函数从服务器返回响应，则调用该函数将花费至少与 HTTP 请求所需的时间一样多的时间。此外，由于 JavaScript 引擎是单线程的，到那时没有其他代码可以运行。因此浏览器*必须*在同步 HTTP 调用期间冻结。

您无法解决它，也没有图书馆可以提供帮助，这就是 cookie 崩溃的方式。您要么有阻塞呼叫**，要么**使用回调（我想您可以这样做）。

# 也可以看看

*   [jQuery 同步非阻塞 ajax 调用](https://stackoverflow.com/questions/11639467)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T20:56:29.823

完全异步并将回调作为参数传递给函数。这是使用 JavaScript 的正确方法。做这样的事情：

```
function msg(message, callback)
{
    var xmlhttp;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            // asynchronously call the callback with the result
            callback(xmlhttp.responseText);
        }
    }
    xmlhttp.open("POST", "msghandler.php", true);
    xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xmlhttp.send("msg="+encodeURI(message));
} 
```

# python - 计算其中一个引用的三个项目的最快方法（使用python）？

> ID：12062830
> 
> 赞同：4
> 
> 时间：2012-08-21T20:49:29.437
> 
> 标签：python, hash, dictionary

我有一个多列（13 列）以空格分隔的文件（大约 500 万行），如下所示：

```
 1\. W5 403  407 P Y 2 2 PR 22  PNIYR 22222 12.753 13.247
 2\. W5 404  408 N V 2 2 PR 22  PIYYR 22222 13.216 13.247
 3\. W3 274  276 E G 1 1 EG 11  EPG 121 6.492 6.492
 4\. W3 275  277 P R 2 1 PR 21  PGR 211 6.365 7.503
 5\. W3 276  278 G Y 1 1 GY 11  GRY 111 5.479 5.479
 6\. W3 46  49 G L 1 1 GY 11  GRY 111 5.176 5.176
 7\. W4 47  50 D K 1 1 DK 11  DILK 1111 4.893 5.278
 8\. W4 48  51 I K 1 1 IK 11  ILKK 1111 4.985 5.552 
```

等等，等等，

我对这些列中的 2 列（第 8 列和第 11 列）感兴趣，并想用后面的字符串（在第 11 列中）计算特定对（第 8 列）的出现次数。

例如，参考键“GY”：“111”的出现次数：2 键“PR”：“22222”的出现次数：2 键“DK”：“1111”的出现次数：1 键“EG” ：“121”的出现次数：1

我有一个基于字典的基本实现。

```
countshash={}
for l in bigtable:
          cont = l.split()
          if cont[7] not in countshash: countshash[cont[7]] = {}
          if cont[11] not in countshash[cont[7]]: countshash[cont[7]][cont[10]] = 0
          countshash[cont[7]][cont[10]]+= 1; 
```

我也有一个简单的基于 awk 的计数（非常快），但想知道在 python 中一种高效且更快的方法。感谢您的投入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T21:20:55.663

```
from collections import Counter
Counter(tuple(row.split()[8:12:3]) for row in bigtable) 
```

使用`itemgetter`更灵活，可能比切片更有效

```
from operator import itemgetter
ig = itemgetter(8, 11)
Counter(ig(row.split()) for row in bigtable) 
```

使用`imap`也可以让事情变得更快

```
from itertools import imap
Counter(imap(ig, imap(str.split, bigtable))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T21:02:00.250

我不确定这是否有助于提高速度，但是您正在创建大量`defaultdict`-like 对象，我认为您可以使它们更具可读性：

```
from collections import defaultdict

countshash = defaultdict(lambda: defaultdict(int))

for l in bigtable:
    cont = l.split()
    countshash[cont[7]][cont[10]] += 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T21:31:46.233

```
from collections import defaultdict

countshash = defaultdict(int)
for l in bigtable:
    cont = l.split()
    countshash[cont[7], cont[10]] += 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T21:03:33.700

那么你正在做双重查找。你可以这样做`countshash[(cont[7],count[10])]+=1`，这可能会更快，但取决于python如何实现它。内存占用应该稍大一些。

像这样简单的东西：

```
countshash=defaultdict(int)
for l in bigtable:
          cont = l.split()
          countshash[(cont[7],cont[10])]+= 1; 
```

# android - 使用 Django REST API 对用户进行身份验证

> ID：12062832
> 
> 赞同：1
> 
> 时间：2012-08-21T20:49:31.993
> 
> 标签：android, django, api, rest, authentication

使用 Django REST API 对用户进行身份验证的最佳方法是什么？

1) 发送在每个请求中加密的用户名/密码 2) 获取会话 cookie

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:35:25.807

session cookie 通常是最好的方法。或者，如果您喜欢，可以尝试 oauth。

# android - openRawResource：APK中的压缩文件是否完全解压缩？

> ID：12062834
> 
> 赞同：1
> 
> 时间：2012-08-21T20:49:39.053
> 
> 标签：android, inputstream, apk

我在 res/raw 中有一个自定义文件格式，这意味着它将在 APK 中被压缩。

假设我的应用程序安装在设备上。当我通过打开文件时`openRawResource()`，它是否完全解压缩内存中的文件？

例如，如果它是一个 3MB 的文件，它会在内存中解压缩它吗？如果我只需要来自某个偏移量的 10KB 数据（并且我通过 到达它），它在调用`BufferedInputStream.skip()`时还会消耗 3MB吗？`openRawResource()`

**更新**：除非我忽略了某些东西，否则它似乎并没有解压缩整个文件。考虑以下测试。

我在 res/raw 中添加了一个 30MB 的随机数据文件。它的扩展名不是ogg、mp3、png或类似的，所以它会被压缩在APK中。在下面的代码中，我寻找大约 19MB 的位置，并读取 cca. 文件中的 117KB。它工作，即使未压缩的长度是 30MB。（据我所知，1MB 的限制仅适用于资产，不适用于原始资源。）

```
is = context.getResources().openRawResource(R.raw.test); // test is a 30MB test.txt
DataInputStream dis = new DataInputStream(new BufferedInputStream(is, 8192));

dis.skip(19555125);
byte[] testArr = new byte[117412];
dis.readFully(testArr);
for (int i = 0; i < testArr.length - 117000; i++) {
    Log.w("LOG_TAG", "" + testArr[i]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:51:52.073

与此同时，在 Android 邮件列表中，Dianne Hackborn 回答了这个问题。引用戴安娜的话：

> 在我认为 Gingerbread 之前，它会在内存中完全解压缩，并限制它使用的内存量（我认为是 1MB），超过该内存量会导致打开失败。在当前版本的平台上，它会在您阅读时流式传输，没有大小限制。

我的测试证实了这一点。我刚刚在**Gingerbread**和**ICS**设备上对其进行了测试，它运行良好。在接下来的几天里，我还将在**Froyo** (Android 2.2) 设备上对其进行测试，并将更新这篇文章。

当然，Dianne 肯定是对的，我敢肯定，但她说她认为“Gingerbread”是第一个支持它的版本，所以我会在 Froyo 上测试它不会有什么坏处。

PS：感谢 CommonsWare 发现 Dianne 的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:25:12.230

是的，所有“可压缩”文件都被压缩了。“不可压缩”文件是某些图像文件、zip 文件等，它们已经处于压缩形式并且不会从压缩中受益。

请记住，如果您的文件大于 1M，压缩可能会成为问题。该文件会很好地压缩，Android 工具包会很乐意将其打包，但在手机上，当您尝试检索它时会出错，因为手机拒绝解压缩大于 1M 的文件。解决方法是给文件一个 jpg 或类似的扩展名，这样它就不会被压缩

# bash - 将 Expect 与 ant 构建文件一起使用

> ID：12062835
> 
> 赞同：1
> 
> 时间：2012-08-21T20:49:44.017
> 
> 标签：bash, ant, sh, expect

我有一个命令行程序，我正在尝试使用 Expect 自动与该程序交互。该程序是通过在构建文件上运行命令“ant runco​​nsole”来启动的。

我还在 bash 脚本中嵌入了 Expect 脚本。目前我的代码如下所示：

```
#!/bin/bash

cd $HOME/myProj/build

/usr/bin/expect - << EndMark

spawn ant runconsole

EndMark

exit 0 
```

构建这个只是将 spawn ant runco​​nsole 打印到终端。并将“ant runco​​nsole”放在引号中返回“无法执行”ant runco​​nsole：执行“spawn”ant runco​​nsole时没有这样的文件或目录“

这是我第一次使用 Expect，所以我确定这是一个非常愚蠢的问题，但我在网上找不到解决方案。我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:58:06.583

那里发生的情况是您正在使用 Ant 创建一个 Expect 会话，但没有与之交互，因此它终止了。

您可以稍微修改您的脚本：

```
/usr/bin/expect - << EndMark
spawn ant -v runconsole
expect
EndMark 
```

运行它，您应该会看到来自 Ant 的一些输出返回。有关如何设置 Expect 脚本以及与 Ant 交互的信息，请参阅[spawn wiki 页面](http://wiki.tcl.tk/10045)或[Expect 手册页](http://www.tcl.tk/man/expect5.31/expect.1.html)。

# javascript - 页面刷新后如何保持div隐藏？

> ID：12062836
> 
> 赞同：1
> 
> 时间：2012-08-21T20:49:45.457
> 
> 标签：javascript, jquery, wordpress

我有一个简单的显示和隐藏 div。

div 会在加载页面时自动加载，然后您可以通过单击关闭来关闭 div。

刷新页面后，div 再次显示，我如何将其编码为一旦关闭，一个月内不再打开。

提前致谢。

本

这是我到目前为止的代码；

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script src="http://innosite.s3.amazonaws.com/cookie/jquery.cookie.js"></script>
<script type="text/javascript">

$(document).ready(function() {
 // hides the slickbox as soon as the DOM is ready
  $('#slickbox').show();
 // shows the slickbox on clicking the noted link  
  $('#slick-show').click(function() {
    $('#slickbox').show('slow');
    return false;
  });
 // hides the slickbox on clicking the noted link  
  $('#slick-hide').click(function() {
    $('#slickbox').hide('fast');
    return false;
  });

 // toggles the slickbox on clicking the noted link  
  $('#slick-toggle').click(function() {
    $('#slickbox').toggle(400);
    return false;
  });
});

</script>
<script type="text/javascript">
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

//user closes your box
createCookie('mybox',1,30);

//check if the box should be hidden
if (readCookie('mybox')) 
    $('#slickbox').hide();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:52:26.763

这是一个参考。有了这个小代码，重新开始可能更容易。

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:58:33.203

有一条评论“使用 cookie”，然后它消失了，尽管它完全符合要求：您可以在客户端设置和阅读它。只需在服务器上忽略它。甚至还有一个 jQuery 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:02:47.900

你总是可以只使用本地存储：

```
$(function() {

    if (localStorage) { //if local storage
        if (!localStorage.getItem('visited')) { // if not site is visited before
            $('#slickbox').show(); //show element
        }
    } else { //if not local storage use cookies or just show element in old browsers
        $('#slickbox').show();
    }

    // shows the slickbox on clicking the noted link  
    $('#slick-show').click(function() {
        $('#slickbox').show('slow');
        return false;
    });
    // hides the slickbox on clicking the noted link  
    $('#slick-hide').click(function() {
        $('#slickbox').hide('fast');
        localStorage.setItem('visited', true); //set flag, site now visited and element hidden
        return false;
    });

    // toggles the slickbox on clicking the noted link  
    $('#slick-toggle').click(function() {
        $('#slickbox').toggle(400);
        return false;
    });
});​ 
```

# ms-access - 如何在 Access 2010 中根据连接表编辑子表单

> ID：12062842
> 
> 赞同：1
> 
> 时间：2012-08-21T20:50:41.537
> 
> 标签：ms-access, join, ms-access-2010

我正在设计一个 Access 2010 Web 数据库，并且我正在尝试创建一个子表单来显示基于连接表的数据。它显示正常，但我无法修改数据。这两个表称为 Consortiums 和 PrincipleInvestigators。它们之间有一个多对多的链接，所以我有一个 ConsortiumsPrincipleInvestigators 连接表。

我有一个“联盟”表单，它显示与特定联盟相关的数据，并在该表单中有一个子表单，显示该联盟的主要调查人员。我能够成功完成所有 PI，但是当我尝试在该子表单中添加一个主要调查员时，它给了我一个错误：“无法添加记录；表 'PrincipleInvestigatorsConsortiums' 的连接键不在记录集中。什么给出？我想这是因为我需要更新 PrincipleInvestigators 表和连接表。（另外，MS，为什么我不能只使用标准关系数据库的东西而不是这个愚蠢的查找字段业务？）这是我的表格布局的一些屏幕截图和我的连接表：

[http://i.imgur.com/j4RJQ.png](http://i.imgur.com/j4RJQ.png)

呜呜。尽管我已经完成了大量的数据库项目，但我觉得自己很笨，但是查找字段和查询构建器让我失望。有谁知道任何关于如何设计查询的好教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T20:34:08.303

在建立两个表之间的关系方面确实没有什么改变。您使用 GUI、SQL DLL 命令或现在一些关系向导的事实并没有改变任何东西。

我的意思是谁在乎在两个表之间建立关系的过程是什么？

我的意思是，在基于客户端的情况下，您可以输入如下内容：

```
ALTER TABLE Cars
   ADD CONSTRAINT MyColorIDRelationship
   FOREIGN KEY (ColorID) REFERENCES Colors (ColorID) 
```

那么，现在您使用一些单击鼠标的向导，这很重要吗？真的，谁在乎！这里没什么大不了的，我们只关心你执行一些命令，或者一些向导，或者这里的一些东西，你在一天结束时，结果是你在两张表之间的心爱的关系。

查看我的以下视频，其中我将一些现有的相关数据“连接”到 Web 数据库中。我还分享了如何使用 Web 数据库的访问关系窗口打印出相关表：

[http://www.youtube.com/playlist?list=PL27E956A1537FE1C5&feature=plcp](http://www.youtube.com/playlist?list=PL27E956A1537FE1C5&feature=plcp)

因此，归根结底，不必纠结于必须使用某些 DDL sql 命令、某些 GUI 关系窗口或某些向导的一些细节。正如上面的视频所示，您所做的只是连接一些表格并建立关系——仅此而已，无需担心。

至于如何添加要与父记录相关的子记录？好吧，在过去的 18 年中，几乎所有使用 Access 的鸟、狗和甲虫都会这样做：

a) 基于 ONE 主父记录表创建主窗体。这里不需要构建查询，实际上也不需要构建两个表的连接查询——这从来都不是必需的，也不是必需的。您所做的只是基于一个简单的表格构建一个表格。我们完成了这部分“a”。

b) 基于 ONE 子表创建一个表单。这里不需要构建查询，实际上也不需要构建两个表的连接查询——这从来都不是必需的，也不是必需的。您所做的只是基于一个简单的表格构建一个表格。

c) 打开第一个表单（基于父记录表的表单），然后在布局模式下，现在从导航窗格中拖放子表单。

上面的 a、b、c 步骤是我在 Access 中看到的几乎每个父子设置的完成方式，并且很长一段时间以来，设置 CONTINUES 继续在基于 Web 的应用程序中 100% 工作。

在这两种情况下（网络或非网络），设置保持不变，设置不涉及构建要求，并且设置不需要您进行任何编码。

只要子表单控件中的链接/主子设置正确，您就可以自由地将子记录添加到子表单，Access 将通过设置为您完成其余的设置和维护关系的繁琐工作该子表单中的 FK 列为您服务。

因此，在使用 Access 的 18 年中，基本设置的工作方式没有改变，因此在此处构建 Web 表单时也没有改变。

您不需要基于多个表的查询，实际上就像过去一样，这两种表单通常将仅基于一个表的数据源。

因此，在大多数情况下，甚至不需要对表单将基于的那个表使用查询。这种长期以来的基本方法和设置对于 Web 表单也没有改变。

在您的情况下，我假设主要形式是 Consortium。您的子表单可以是基于 Principleinvegiartors 的连续表单。您无需手动输入一些 PrincipleInvetigaor ID，而是使用基于表 PrincipleInvetgioars 的组合框。但是，在所有情况下，我们只是在构建基于单个基表的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:52:58.570

对于这种情况，您应该为主窗体选择一个表，为子窗体选择连接表。

例如：

```
Main Table
Consortiums 

Subform
ConsortiumsPrincipleInvestigators 

Link Child and Master Fields ConsortiumID

ComboBox on subform
Principal investors
Row source: SELECT InvestorID, InvestorDetails FROM PrincipalInvestors
Control Source: InvestorID
Bound Column: 1
Column Count: 2
Column Widths: 0,2 
```

不在列表中的一些注释

```
 DoCmd.OpenForm "AddSomething", , , , , acDialog, AddData

        If Forms!AddSomething.Tag <> "" Then
            frm(cbo).Undo
            frm(cbo).Requery
            frm(cbo) = Forms!AddSomething.Tag

            AddCombo = acDataErrAdded
        Else
            AddCombo = acDataErrContinue
        End If

        DoCmd.Close acForm, "AddSomething" 
```

# r - 在 R 中选择最大列值

> ID：12062843
> 
> 赞同：4
> 
> 时间：2012-08-21T20:50:47.353
> 
> 标签：r

我对 R 很陌生，并且对选择列中的最大值有疑问。

我有以下数据框：

```
 X      Y
 [1,]     1     10
 [2,]     1     12
 [3,]     1     NA
 [4,]     2     5
 [5,]     2     6
 [6,]     2     7
 [7,]     2     8
 [8,]     3     NA
 [9,]     3     NA
[10,]     3     1 
```

我想选择 Y 列的最大值，并用该值替换每组中 Y 的所有值。我的输出数据框如下所示：

```
 X      Y
 [1,]     1     12
 [2,]     1     12
 [3,]     1     12
 [4,]     2     8
 [5,]     2     8
 [6,]     2     8
 [7,]     2     8
 [8,]     3     1
 [9,]     3     1
[10,]     3     1 
```

任何帮助，将不胜感激。谢谢！

这是数据

```
Data <- structure(list(X = c(1L, 1L, 1L, 2L, 2L, 2L, 2L, 3L, 3L, 3L), 
                     Y = c(10L, 12L, NA, 5L, 6L, 7L, 8L, NA, NA, 1L)), 
                .Names = c("X", "Y"), class = "data.frame",
                row.names = c("[1,]", "[2,]", "[3,]", "[4,]", "[5,]", "[6,]", "[7,]", "[8,]", "[9,]", "[10,]")) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T20:53:52.940

您可以使用`ave`wraps 的自定义函数`max`，因此您可以删除`NA`值：

```
Data$Y <- ave(Data$Y, Data$X, FUN=function(x) max(x, na.rm=TRUE)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T16:09:36.047

使用`dplyr`or`data.table`包，您可以获得一种简单的方法 group 来计算分组操作。

**dplyr 解决方案**

```
require(dplyr)
Data %>% group_by(X) %>% mutate(Y = max(Y, na.rm=TRUE)) 
```

**data.table 解决方案**

```
require(data.table)
setDT(Data)[, Y:=max(Y, na.rm=TRUE), by=X][] 
```

# asp.net-mvc - 来自一个原始 MVC 代码库的两个网站

> ID：12062850
> 
> 赞同：0
> 
> 时间：2012-08-21T20:51:11.617
> 
> 标签：asp.net-mvc, asp.net-mvc-3, active-directory

我有一个为所有用户运行 AD 身份验证的网站。我正在向网站添加一个模块，该模块作为主页上的选项卡存在。有一个新的想法是最新的标签可以是它自己的网址/网站。但无需任何AD认证，对公众开放。由于到目前为止所有内容最初都构建在一个代码库中，因此仅为一个标签内容创建一个新网站是否容易。选项卡/模块有自己的控制器、自己的视图，但有一些共享引用/服务层代码。处理这种情况的最佳方法是什么。由于安全问题，将变成新网址/网站的新标签将托管在单独的服务器上。

> 1.  是否需要两个代码库，一个是旧网站代码，一个是新模块添加代码？或者我们可以只用一个代码库来做这两个网站吗？
> 2.  如果我将新模块代码分离到新服务器的新代码库中，我猜我需要复制原始项目并修剪掉任何不需要的旧模块/控制器/视图等。这是推荐的方法吗？
> 3.  一般来说，有人如何处理这种情况，特别是两部分身份验证方式的差异（一个有 AD，一个没有身份验证）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:41:49.473

为什么不将这些模块与 ASP.NET MVC 区域分开。将现有代码放在一个区域，将新的公共内容放在第二个区域。您现在可以在两个区域的控制器中使用公共服务层代码，因为它（区域）属于同一个 UI 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:22:56.700

如果该模块不需要身份验证，它本身就可以正常运行，您可以将其包含在需要身份验证的站点中。

但是我从您的问题中得到的信息是，该模块并不是那么模块化，因为它依赖于确实需要身份验证的模块。所以改变依赖关系，使它们也能独立存在。

# java - org.apache.jasper.JasperException：无法添加一个或多个标签库

> ID：12062851
> 
> 赞同：2
> 
> 时间：2012-08-21T20:51:14.177
> 
> 标签：java, eclipse, jsp, jetty, osgi

我有一个由我的一些同学开发的 OSGi 应用程序，我尝试让它在 OS X 10.8 下的 Eclipse Juno 4.2 和 Java 1.6 中运行。此应用程序的捆绑包之一负责使用 JSP 和 Jetty 提供 Web 界面。当我尝试在 Eclipse 中运行项目时，当我尝试访问 Web 界面时，Equinox 控制台给了我以下异常：

```
2012-08-21 16:15:30.574:WARN:oejs.ServletHandler:/ner/ner
org.apache.jasper.JasperException: /WEB-INF/ner.jsp(5,68) PWC6226: Could not add one or more tag libraries.

at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:81)
at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:376)
at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:133)
at org.apache.jasper.compiler.JspDocumentParser.parse(JspDocumentParser.java:258)
at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:229)
at org.apache.jasper.compiler.ParserController.parse(ParserController.java:145)
at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:212)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:451)
at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:625)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.equinox.jsp.jasper.JspServlet.service(JspServlet.java:155)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.equinox.http.servlet.internal.ServletRegistration.service(ServletRegistration.java:61)
at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:128)
at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:68)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.equinox.http.jetty.internal.HttpServerManager$InternalHttpServiceServlet.service(HttpServerManager.java:384)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:598)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:486)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:413)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:271)
at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:98)
at org.eclipse.equinox.http.servlet.internal.RequestDispatcherAdaptor.forward(RequestDispatcherAdaptor.java:30)
at de.uni_sb.coli.nep.webui.NerServlet.doGet(NerServlet.java:150)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.equinox.http.servlet.internal.ServletRegistration.service(ServletRegistration.java:61)
at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:128)
at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:60)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.equinox.http.jetty.internal.HttpServerManager$InternalHttpServiceServlet.service(HttpServerManager.java:384)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:598)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:486)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:413)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
at org.eclipse.jetty.server.Server.handle(Server.java:350)
at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)
at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:890)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:944)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:630)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:77)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:606)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:46)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:603)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)
at java.lang.Thread.run(Thread.java:722) 
```

Web界面相关的文件夹结构如下：

```
WebContent
|----> WEB-INF
       |----> ner.jsp     # This is the template
              lib
              |----> commons-fileupload-1.2.2.jar
                     commons-io-2.0.1.jar
              tld
              |----> c-1_0-rt.tld
                     c-1_0.tld
                     c.tld
                     fmt-1_0-rt.tld
                     fmt-1_0.tld
                     fmt.tld
                     fn.tld
                     permittedTaglibs.tld
                     scriptfree.tld
                     sql-1_0-rt.tld
                     sql-1_0.tld
                     sql.tld
                     x-1_0-rt.tld
                     x-1_0.tld
                     x.tld 
```

Web 界面应该可以访问，`http://localhost:8080/ner/ner`但 Jetty 只给了我一个 HTTP 500，与上述相同的例外。在终端中，一切正常，但在 Eclipse 中却不行。似乎 Eclipse 期待不同的文件夹结构或其他东西。

你知道什么可能导致这个问题吗？如果您需要查看某些文件的内容，请告诉我，我会将它们添加到此帖子中。提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:08:00.510

我发现这个错误是一个皇家 PITA - 不幸的是它可能来自多个来源。对于几种不同的情况，错误消息似乎有点笼统。

首先，您需要确保您在 war 文件中使用的库都“正确对齐”。[我发现这个问题在](https://stackoverflow.com/questions/6094329/tomcat-7-and-jstl)这个问题中得到了最好的回答。

但这仍然可能无法解决问题 - 它没有在这里！因此，如果您有自己的标签库并使用保留字，那似乎也会导致错误。

例如：

```
 <jsp:directive.attribute
            name="minimize"
            type="java.lang.Boolean"
            required="true"
            description="Compress something"/> 
```

在这种情况下，“最小化”会导致冲突，并且可以通过此错误消息进行报告。

# regex - 正则表达式在 MXML 中的引号之间查找特定单词

> ID：12062854
> 
> 赞同：1
> 
> 时间：2012-08-21T20:51:28.260
> 
> 标签：regex

我在网上某个地方找到了这个正则表达式，它在我的文件中找到了可能呈现给用户进行本地化清理的字符串。但是，我有一个新任务来查找两个单词的特定实例，我认为我可以使用相同的正则表达式。我尝试了几种组合，但我在正则表达式方面做得还不够好。

当前用于查找字符串的正则表达式：

```
(?<=text=|label=|prompt=|toolTip=|title=|icon=|String=|Error=|Separator=|Symbol=)(("(?:\.|(\\\")|[^\""\n])*")|('(?:\.|(\\\')|[^\''\n])*')) 
```

但现在我希望它也能捕捉到：***目录***或***库存***是否存在于引号之间的任何位置。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:15:17.307

好的，这应该可以，我相信：

```
(?<=text=|label=|prompt=|toolTip=|title=|icon=|String=|Error=|Separator=|Symbol=)((?:"(?:\.|(\\\")|[^\""\n])*\b(?:catalog|in stock)\b(?:\.|(\\\")|[^\""\n])*")|(?:'(?:\.|(\\\')|[^\''\n])*\b(?:catalog|in stock)\b(?:\.|(\\\')|[^\''\n])*')) 
```

我所做的只是`\b(?:catalog|in stock)\b`在报价部分添加。例如，对于双引号部分，它曾经是这样的：

```
"(?:\.|(\\\")|[^\""\n])*" 
```

即任意数量的非引号（除非转义），双引号之间的非返回字符。

现在是这样的：

```
"(?:\.|(\\\")|[^\""\n])*\b(?:catalog|in stock)\b(?:\.|(\\\")|[^\""\n])*" 
```

这是一个双引号，任意数量的上述合法字符，“目录”或“库存”，任意数量的更多合法字符，以及一个引号。

# objective-c - iOS：更改自我的内容（UIImage）

> ID：12062857
> 
> 赞同：2
> 
> 时间：2012-08-21T20:51:49.200
> 
> 标签：objective-c, ios, uiimage, cgcontextref

我在 UIImage 类别中编写了一些代码，该类别采用 UIImage (self)，然后使用 CGContextRef 重新绘制它。有没有办法在使用 CGBitmapContext 时重写 UIImage (self)？目前，我让它返回通过 CGContextRef 创建的图像，但是否可以在该方法中重写图像本身？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T21:04:52.533

从`UIImage`文档中：

> 图像对象是不可变的，因此您无法在创建后更改它们的属性。...因为图像对象是不可变的，它们也不提供对其底层图像数据的直接访问。

因此不可能改变`UIImage`创建后的图像数据。

# java - Java合并排序，“合并”步骤应该用队列还是数组完成？

> ID：12062861
> 
> 赞同：6
> 
> 时间：2012-08-21T20:52:07.087
> 
> 标签：java, algorithm

这不是家庭作业，我没有钱上学，所以我一边在高速公路上的收费站轮班工作，一边自学（长夜，顾客很少）

*我试图通过首先思考*来实现一个简单的“合并排序”，如果你喜欢一些实际的学习，请稍微伸展一下我的大脑，*然后*查看我正在使用的手册上的解决方案：“2008-08-21 | 算法设计手册 | Springer | Steven S. Skiena | ISBN-1848000693"。

我想出了一个解决方案，它使用数组作为缓冲区来实现“合并”步骤，我将它粘贴在下面。作者使用队列，所以我想知道：

*   应该使用队列吗？
*   一种方法与另一种方法相比有什么优势？（显然他的方法会更好，因为他是顶级算法家，而我是初学者，但我无法确定它的优势，请帮助我）
*   支配他的选择的权衡/假设是什么？

这是我的代码（为了完整起见，我也包括了拆分功能的实现，但我认为我们只是在`merge`这里审查了这一步；顺便说一下，我不相信这是一篇代码审查帖子，因为我的问题很具体仅一种方法及其与另一种方法相比的性能）：

```
package exercises;
public class MergeSort {
  private static void merge(int[] values, int leftStart, int midPoint,
      int rightEnd) {
    int intervalSize = rightEnd - leftStart;
    int[] mergeSpace = new int[intervalSize];
    int nowMerging = 0;
    int pointLeft = leftStart;
    int pointRight = midPoint;
    do {
      if (values[pointLeft] <= values[pointRight]) {
        mergeSpace[nowMerging] = values[pointLeft];
        pointLeft++;
      } else {
        mergeSpace[nowMerging] = values[pointRight];
        pointRight++;
      }
      nowMerging++;
    } while (pointLeft < midPoint && pointRight < rightEnd);
    int fillFromPoint = pointLeft < midPoint ? pointLeft : pointRight;
    System.arraycopy(values, fillFromPoint, mergeSpace, nowMerging,
        intervalSize - nowMerging);
    System.arraycopy(mergeSpace, 0, values, leftStart, intervalSize);
  }
  public static void mergeSort(int[] values) {
    mergeSort(values, 0, values.length);
  }
  private static void mergeSort(int[] values, int start, int end) {
    int intervalSize = end - start;
    if (intervalSize < 2) {
      return;
    }
    boolean isIntervalSizeEven = intervalSize % 2 == 0;
    int splittingAdjustment = isIntervalSizeEven ? 0 : 1;
    int halfSize = intervalSize / 2;
    int leftStart = start;
    int rightEnd = end;
    int midPoint = start + halfSize + splittingAdjustment;
    mergeSort(values, leftStart, midPoint);
    mergeSort(values, midPoint, rightEnd);
    merge(values, leftStart, midPoint, rightEnd);
  }
} 
```

这是教科书中的参考解决方案：（它在 C 中，所以我添加了标签）

```
merge(item_type s[], int low, int middle, int high)
{
  int i; /* counter */
  queue buffer1, buffer2; /* buffers to hold elements for merging */
  init_queue(&buffer1);
  init_queue(&buffer2);
  for (i=low; i<=middle; i++) enqueue(&buffer1,s[i]);
  for (i=middle+1; i<=high; i++) enqueue(&buffer2,s[i]);
  i = low;
  while (!(empty_queue(&buffer1) || empty_queue(&buffer2))) {
    if (headq(&buffer1) <= headq(&buffer2))
      s[i++] = dequeue(&buffer1);
    else
      s[i++] = dequeue(&buffer2);
  }
  while (!empty_queue(&buffer1)) s[i++] = dequeue(&buffer1);
  while (!empty_queue(&buffer2)) s[i++] = dequeue(&buffer2);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:58:53.703

抽象地说，队列只是一些支持入队、出队、窥视和空操作的对象。它可以以多种不同的方式实现（使用循环缓冲区、使用链表等）

从逻辑上讲，合并算法最容易用队列来描述。您从两个保存要合并的值的队列开始，然后在这些队列上重复应用 peek、is-empty 和 dequeue 操作以重建单个排序序列。

在您使用数组的实现中，您实际上是在做与使用队列相同的事情。您刚刚选择使用数组来实现这些队列。不一定比使用队列“更好”或“更差”。使用队列使合并算法的高级操作更清晰，但可能会引入一些低效率（尽管如果没有基准测试很难确定）。使用数组可能会稍微高效一些（同样，你应该测试一下！），但可能会掩盖算法的高级操作。从 Skienna 的角度来看，使用队列可能会更好，因为它使算法的高级细节变得清晰。从您的角度来看，由于性能问题，数组可能会更好。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T01:09:11.337

您担心主要取决于编译器质量的次要常量因素。鉴于您*似乎对此*感到担心，因此数组是您的朋友。下面是我对整数合并排序的 C# 实现，我认为它接近于你所能得到的。[编辑：修复了一个小号。]

如果你想在实践中做得更好，你需要像自然合并排序这样的东西，在这种情况下，你只需合并输入的相邻非递减序列，而不是以 2 的幂次合并。这当然不比二次幂差，但是当输入数据包含*一些*排序的序列（即，除了纯粹的降序输入序列之外的任何东西）时肯定更快。这是留给学生的练习。

```
int[] MSort(int[] src) {
    var n = src.Length;
    var from = (int[]) src.Clone();
    var to = new int[n];
    for (var span = 1; span < n; span += span) {
        var i = 0;
        for (var j = 0; j < n; j += span + span) {
            var l = j;
            var lend = Math.Min(l + span, n);
            var r = lend;
            var rend = Math.Min(r + span, n);
            while (l < lend && r < rend) to[i++] = (from[l] <= from[r] ? from[l++] : from[r++]);
            while (l < lend)             to[i++] = from[l++];
            while (r < rend)             to[i++] = from[r++];
        }
        var tmp = from; from = to; to = tmp;
    }
    return from;
} 
```

# .net - 在 silverlight 应用程序 childWindow 中找不到类型 XmlDataProvider

> ID：12062862
> 
> 赞同：1
> 
> 时间：2012-08-21T20:52:09.853
> 
> 标签：.net, xml, silverlight, xaml, silverlight-5.0

您好，提前感谢您的帮助。如果这个问题是一个明显的答案，我很抱歉，我一直在谷歌搜索并寻找答案但无济于事。我想在我的 silverlight 子窗口中使用 xml 数据源。我尝试在网格控件资源中使用 xaml 声明，如下所示：

```
<Grid.Resources>
    <XmlDataProvider x:Key="WatchListData"></XmlDataProvider>
</Grid.Resources> 
```

希望我能够在后面的代码中设置数据源。但是，我收到错误“找不到 XmlDataProvider 类型”。是否有名称空间或包含您需要才能使用它？如果是这样，那会是什么？再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T09:33:18.313

Silverlight 不支持 XmlDataProvider

# bash - 在 bash/对话中显示文本

> ID：12062863
> 
> 赞同：3
> 
> 时间：2012-08-21T20:52:15.303
> 
> 标签：bash

如何在图片中显示要喜欢的文本“Selected Item x”？

![在此处输入图像描述](../Images/37064fc8ff8f019540d704506e5d97d5.png)

```
 ITM=$(dialog --stdout --menu "\nSelect Items...\n " 20 120 0 \
                \
                "item_1" "Item 1" \
                "item_2" "Item 2" \
                "item_3" "Item 3") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:11:19.490

这似乎更进一步

```
#!/usr/bin/env bash
items=(
    item_1 "Item 1" "Selected Item 1"
    item_2 "Item 2" "Selected Item 2"
    item_3 "Item 3" "Selected Item 3"
)

dialog --item-help --menu '\nSelected Items...\n' 20 120 0 "${items[@]}" 
```

它看起来不像 dialog(1) 允许您定位帮助文本。

# c# - 有没有办法在“if”语句中“鼠标悬停”条件以在 VS2010 中查看真假？

> ID：12062871
> 
> 赞同：8
> 
> 时间：2012-08-21T20:52:51.900
> 
> 标签：c#, visual-studio-2010, debugging

在调试时，是否有办法在“if”语句中“将鼠标悬停在”条件上，以查看它在 VS2010 中的计算结果是真还是假？我本可以发誓有，但我似乎无法让它发挥作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T20:57:30.787

是的。将鼠标悬停在运算符上。对于`if(a || b)`，只需将鼠标悬停在`||`.

您甚至可以分解复杂的表达式。因为`if(a || !(b is string))`您可以将鼠标悬停在该`!(`部分上以查看否定的结果是什么。

不过，请确保您知道您的操作顺序。对于`if(a || b && c)`，`||`将为您提供最终结果，而`&&`将为您提供仅`b && c`部分的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:55:31.713

突出显示条件并键入 Ctrl-Alt-Q（快速观看）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T20:55:57.613

是的，如果您选择/突出显示表达式，然后将鼠标悬停在所选文本上，它将显示对所选内容的评估。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T21:10:30.660

作为一个选项，您可以将条件值设置为布尔变量，在调试期间您可以看到它的值......例如：

```
bool condition = a > b;
if (condition)
{
   // Do some stuff
} 
```

在调试“鼠标悬停”时`condition`。

# jquery - 为什么在 iOS 全屏模式下运行时，jquery ajax 在基于 Coldfusion/Apache 的 Web 应用程序中不起作用？

> ID：12062872
> 
> 赞同：3
> 
> 时间：2012-08-21T20:52:51.960
> 
> 标签：jquery, ajax, apache, jquery-mobile, httpd.conf

我的应用程序`Jquery/Jquery Mobile/RequireJS`在前端和`Coldfusion8/MySQL 5.0.88/Apache`后端运行。

我在用着

```
 <meta name="apple-mobile-web-app-capable" content="yes" /> 
```

在我的页眉中，它允许在 iOS 上以全屏模式运行应用程序。

但是，这会破坏 Jquery Mobile 用于从页面 A 更改到页面 B 的 AJAX 导航（页面是通过 AJAX 调用拉入的）。AJAX 请求失败（`error loading page`短暂闪烁）并且要加载的页面正在加载，从而重新启动我的应用程序。

我这两天一直在前端寻找原因，可以排除以下所有情况：

*   requireJS 缓存文件（使用 cache-bust 配置）
*   一般的requireJS（完全删除它）
*   离线设置（没有使用清单文件，添加了 isLocal:true 以获得良好的衡量标准）

我已经通过 Jquery Mobile ( `loadPage function fails`) 通过 Jquery.Ajax 将错误追踪到在 Jquery 中发出 AJAX 请求的行：

```
 xhr.send( ( s.hasContent && s.data ) || null ); 
```

如果我在全屏模式下运行应用程序，则此`xhr.send`ajax 请求返回`readystate=0`与`readystate=200`在任何桌面或移动浏览器上运行的情况相比。

**问题：**
我很确定我可以排除前端的东西是罪魁祸首。我的问题是从哪里开始查看服务器端。我没有使用任何 Coldfusion 代码来处理 AJAX 页面请求，所以我想知道从哪里开始寻找或测试可能的原因。所以我的问题是：在全屏模式下失败的原因可能是什么？这一定与Coldfusion有关还是我必须看apache？我会错过一些设置`httpconfig`吗？

谢谢指点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T02:07:14.823

这看起来完全是客户端。Apache 和 CF 甚至会知道（或关心）应用程序是否在全屏模式下运行。

您可以尝试的一项测试是以全屏模式查看网站页面时转储并记录发送的 http 标头，也许它正在发送一些让 Apache 关闭的东西。我不知道它会是什么，但这就是我可能开始的地方。

# magento - Bulk update magento attribute based on category. How?

> ID：12062881
> 
> 赞同：1
> 
> 时间：2012-08-21T20:53:09.630
> 
> 标签：magento

I have more than 1000 products in my website.

I would like to add tier price based on category.. I mean each category has different tier price... Is there a way in magento to edit product attributes based on category?

So i can mass update those product attributes by adding tier price?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:34:14.063

you can do a Module to do this. Create one observer to look for youmodule_core_block_abstract_prepare_layout_before, and in your observer method you do this:

```
 $block = $observer->getEvent()->getBlock();
    if(get_class($block) =='Mage_Adminhtml_Block_Widget_Grid_Massaction'
        && $block->getRequest()->getControllerName() == 'catalog_product') //change catalog_product to others grids.
    {
        $block->addItem('yourmodule', array(
            'label' => 'Price by Category',
            'url' => Mage::app()->getStore()->getUrl('yourmodule/controller/update'),
        ));
    } 
```

And then, you get selected product in your updateAction() with $_post, and change their price.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:09:25.197

Following from Guerra's answer you need a way to update the tier pricing on the products once you are inside the updateAction.

You can use the api functions on Mage_Catalog_Model_Product_Attribute_Tierprice_Api_V2 to create or update tier pricing. Have a look at the implementation in Mage_Catalog_Model_Product_Attribute_Tierprice_Api::update to get an idea of how to use the API.

It's tempting to do inserts into the database instead, which would obviously be faster but has risks and is never a good idea.

You also need a method to specify the tier prices - other than hard coding into your module.

May I suggest having a look at some commercial bulk price update extensions that will do all of this for you. You could modify them to filter based on category. For example - our Price Updater is 90% there.

# windows - 是否可以通过监控 IDT 来了解异常的发生？

> ID：12062883
> 
> 赞同：0
> 
> 时间：2012-08-21T20:53:23.360
> 
> 标签：windows, exception, exception-handling, kernel, usermode

是否可以通过监视 IDT（中断描述符表）来了解异常发生（在用户模式和内核模式下）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:59:27.400

是的，这是可能的。但是，实际实现只能在*内核模式下*完成。

监视*硬件异常*需要挂钩到*IDT*中的中断。这将需要对*IDT*的写访问。在*Windows*中，包括任何受保护模式的操作系统，必须使用*设备驱动程序在**内核模式下*完成。

 *在*用户模式下*，必须在*设备驱动程序*的帮助下完成，向*用户模式应用程序**报告*异常。因此可以在*用户模式下*间接监控异常。这意味着*用户模式*应用程序不是实际监视异常的应用程序。*

# ruby-on-rails - 如何从 RSpec 中的 Rails 控制器传入表单参数？

> ID：12062884
> 
> 赞同：1
> 
> 时间：2012-08-21T20:53:24.227
> 
> 标签：ruby-on-rails, forms, rspec, controller, param

我正在尝试为我的 Rails 3 控制器之一编写规范。我想走的路是：

```
GET /:user_id/photos/shared_photos?page=:page 
```

该 :page 参数通常通过来自浏览器中的 JQuery 单击处理程序的 AJAX 请求来实例化。但是，在 RSpec 中，我正在尝试直接测试控制器，并且在传递该 :page 值的语法方面遇到了问题。我试过了：

```
get :shared_photos, :id => user.id, :page => 2 
```

但这不起作用。我得到一个路由错误，大概是因为没有 /:page/ 部分路由，所以 Rails 不明白。我的问题是，如何从我的控制器规格之一传递该页面参数？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:37:20.267

添加任意参数不`get`应该导致路由错误（本身），所以我认为你在错误的地方寻找问题。

如果您正在测试 AJAX 响应，也许您应该尝试：

```
xhr :get, :shared_photos, :id => user.id, :page => 2 
```

还要确保格式与您的控制器所期望的匹配（如果 JSON 则添加`:format => :json`）。

另请参阅我之前对此问题的回答：[如何在 RSpec 中测试此代码？](https://stackoverflow.com/questions/11858499/how-do-i-test-this-code-in-rspec/11858852#11858852)

# iphone-web-app - iScroll 搞砸了 iWebkit 框架

> ID：12062887
> 
> 赞同：0
> 
> 时间：2012-08-21T20:53:35.567
> 
> 标签：iphone-web-app, iscroll, iwebkit

我正在使用 iWebKit 框架开发一个 Web 应用程序。我正在尝试修复顶部栏。所以我尝试使用 iScroll。我按照 iScroll 的说明进行操作，但不知何故它弄乱了 iWebkit。我不确定我做错了什么。有什么帮助或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T00:54:10.863

您不再需要 iScroll。

1.  `position:fixed`在标题上使用。
2.  添加`overflow:scroll;-webkit-overflow-scrolling:touch`到内容 div
3.  给内容 div 一个固定的高度！纵向 440px + 40px 上边距（顶栏）
4.  对横向的内容 div 执行相同的操作

# android - 如何将信息从 BroadcastReceiver 传递到 Android 中的 Activity

> ID：12062890
> 
> 赞同：0
> 
> 时间：2012-08-21T20:53:48.057
> 
> 标签：android, android-intent

我正在尝试编写类似于自定义应用商店的内容，但我很难听到安装的结果。

我尝试了很多东西，但没有一个能发挥应有的作用。

在我的主要活动类中，我的安装代码如下：

```
Intent intent = new Intent(Intent.ACTION_INSTALL_PACKAGE);
intent.setDataAndType(Uri.fromFile(apkFile),
"application/vnd.android.package-archive");
intent.putExtra(Intent.EXTRA_RETURN_RESULT, true);
intent.putExtra(Intent.EXTRA_NOT_UNKNOWN_SOURCE, true);
intent.putExtra(Intent.EXTRA_INSTALLER_PACKAGE_NAME, getApplicationInfo().packageName);
startActivityForResult(intent, resultIndex); 
```

这很简单。我试图获得结果的第一件事是在我的主要活动中覆盖 onActivityResult 函数。该函数永远不会被调用（第一行的记录器语句永远不会打印）。

因此，我尝试在清单中创建一个接收器。

```
<receiver android:name=".PackageReceiver">
    <intent-filter>
        <action android:name="android.intent.action.PACKAGE_ADDED" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="package" />
    </intent-filter>
</receiver> 
```

然后在 PackageReceiver 类中，我覆盖了 onReceive 函数。从某种意义上说，PackageReceiver 的函数确实被调用了，但我现在遇到了如何通知主要活动发生了某些事情的问题（为了我的项目，我需要知道）。我无法实例化 PackageReciever；Android 为我这样做是因为它在清单中。

我尝试创建一个新的广播，所以我的 PackageReceiver 的 onReceive 函数如下所示：

```
@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    if (action.equals(Intent.ACTION_INSTALL_PACKAGE) ||
            action.equals(Intent.ACTION_PACKAGE_ADDED) ||
            action.equals(Intent.ACTION_PACKAGE_CHANGED) ){
        logger.debug("Caught action of type " + action);

        Intent i2 = new Intent();
        i2.setAction("MY.CUSTOM.ACTION");
        context.sendBroadcast(i2);
    }

} 
```

然后，在我的主要活动中，我创建了一个新的 BroadcastReceiver：

```
BroadcastReceiver myReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        logger.warn("I made it!!!! HOORAY!!");
    }
}; 
```

并在 onResume 中注册该接收器（并在 onPause 中取消注册）函数，如下所示：

```
@Override
protected void onResume() {
    IntentFilter filter = new IntentFilter();
    filter.addAction("MY.CUSTOM.ACTION");
    registerReceiver(myReceiver, filter);
    logger.debug("Registering receiver in onResume.");
    super.onResume();
} 
```

这听起来像是一个不错的解决方案，但“myReceiver”从来没有调用过它的 onRecieve 函数。我已经尝试通过简单地删除取消注册，将注册移动到活动的 onCreate 方法来确保在我不想取消注册时不会取消注册，但这些都不起作用。最终结果是在记录器中抛出异常，说我泄露了一个 IntentFilter，“你忘记取消注册了吗？” （不，我非常有目的地没有取消注册……但是……没关系）。

关于如何弥合这一差距，我已经没有想法了。此外，我不能只轮询已安装的应用程序并检查版本号。由于我无法进入这里的原因，我们不使用版本号。我需要知道用户是否完成了我开始的安装。

如何将信息从 PackageReceiver 发送到主要活动？或者，我怎样才能在主要活动本身中捕捉到安装的结果？

感谢所有给予它的人。我检查了其他 stackoverflow 问题，但似乎都没有我正在寻找的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T17:56:22.363

如果您`myReceiver`在其中注册`onResume()`和注销它，`onPause()`它将永远不会被调用，因为当安装包时您的应用程序会暂停。

您需要注册`MyReceiver`，`onCreate()`直到`onDestroy()`.

此外，您不需要这么多组件来执行此操作。在您的主要活动中，就在您开始安装软件包之前，您可以注册接收器以侦听软件包安装程序的结果：

```
IntentFilter filter = new IntentFilter();
filter.addAction(Intent.ACTION_PACKAGE_ADDED);
filter.addAction(Intent.ACTION_PACKAGE_CHANGED);
filter.addAction(Intent.ACTION_PACKAGE_REMOVED);
filter.addCategory(Intent.CATEGORY_DEFAULT);
filter.addDataScheme("package"); 
registerReceiver(myReceiver, filter);

// Now launch the package installer... 
```

# javascript - JSF ui:include 和 getElementById

> ID：12062893
> 
> 赞同：0
> 
> 时间：2012-08-21T20:53:53.523
> 
> 标签：javascript, jsf

我正在编写 ui:composition xhtml 文件以使用 ui:include 包含在不同的页面中。看起来我无法使用 getElementById 在此文件中引用来自 javascript 的标签，因为标签 ID 可能会在父页面的表单 ID 前面添加。有解决方法吗？

在我发布问题后找到了这个答案。它有帮助！
[使用 JSF 2.0 在命名容器中获取组件 clientId 的完整前缀](https://stackoverflow.com/questions/3501022/acquire-full-prefix-for-a-component-clientid-inside-naming-containers-with-jsf-2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:58:54.420

你可以这样做：

```
var elem = document.querySelector( '[id$="-test"]' ); 
```

其中`test`是不带前缀的 ID，`-`是前缀分隔符。

上面的代码将选择“id”属性以`"-test"`（例如`<div id="form1-test">...</div>`）结尾的元素。

**现场演示：http:** [//jsfiddle.net/8kyb2/](http://jsfiddle.net/8kyb2/)

请注意，`querySelector()`与 attribute-ends-with 选择器配对的执行速度比`getElementById()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:48:58.417

如果您碰巧使用[Apache 的 Tomahawk Components](https://myfaces.apache.org/tomahawk/index.html)并指定`forceId="true"`，则标签 ID 将保持不变。例如：

`<t:inputText id="name" forceId="true" value="#{myBean.property}" />`

将导致`<input type="text" id="name" ... / >`.

# objective-c - 使用未声明的标识符：矩形的面积和周长

> ID：12062894
> 
> 赞同：0
> 
> 时间：2012-08-21T20:53:56.107
> 
> 标签：objective-c, ios, xcode

我是 Objective-C 的新手，不完全确定我哪里出错了。我试图让程序打印正方形的面积和周长。程序告诉我，我正在向周界和区域方法发送一个未声明的标识符

```
#import <Foundation/Foundation.h>

@interface Rectangle : NSObject
{
int width;
int height;
}

-(void) setWidth: (int) w;
-(void) setHeight: (int) h;
-(int) width;
-(int) height;
-(int) area;
-(int) perimeter;

@end

@implementation Rectangle

-(void) setWidth:(int)w   
{
width = w;
}

-(void) setHeight: (int)h
{
height = h;
}

-(int) width
{
return width;
}

-(int) height
{
return height;
}

-(int) area
{
return width*height;
}

-(int) perimeter
{
return (2*width + 2*height);
}

@end
int main(int argc, const char * argv[])
{

@autoreleasepool {

    Rectangle *rect1 = [[Rectangle alloc] init];

    [rect1 setWidth:2];
    [rect1 setHeight:7];

    NSLog(@"The perimeter of rect1 is: %i and the area is: %i", area, area);

}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:10:42.093

出于好奇，您正在使用哪些学习资源？

我强烈推荐斯坦福大学 Paul Hegarty 的 iOS 开发课程。全部免费，它真正指导您完成一切（ObjC 语法；iOS SDK 等）

[http://www.stanford.edu/class/cs193p/cgi-bin/drupal/](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:59:16.760

没有名为 area 的变量，它是一种方法。尝试一下`[rect1 area];`，`[rect1 perimeter];`您已经创建了对象并正确使用了两种方法，您在该区域滑倒了:(祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:20:54.237

我将行更改为：

```
NSLog(@"The perimeter of rect1 is: %i and the area is: %i", [rect1 area], [rect1 perimeter]); 
```

它给了我正确的结果，感谢您的帮助！

# html - 李过浮动div

> ID：12062896
> 
> 赞同：0
> 
> 时间：2012-08-21T20:54:00.040
> 
> 标签：html, css, position, html-lists

我有**div.content**包含**div.images**浮动，旁边是一个包含几个项目的列表。

问题是**li 出现在 div.images**元素上。我试图制作列表内联块，但在这种情况下，出现在 div.images 下的项目位于 div.images 的右边缘旁边。

[http://jsfiddle.net/kmZ3X/](http://jsfiddle.net/kmZ3X/)

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:58:05.643

试试`list-style-position: inside`li 元素。

例如：http: [//jsfiddle.net/mqchen/psJyh/](http://jsfiddle.net/mqchen/psJyh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:58:22.937

添加

```
ul{
float: left
} 
```

应该这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T22:28:37.623

```
<div class="content">
 <img alt="Desert" src="images/Desert.jpg"/>
 <p>sth.</p>
</div> 
```

```
div.content img
   {display: block;float: left; margin-right: 10px;border: solid 1px #999;padding: 5px; } 
```

如果您有一个列表而不是段落，它将是相同的。如果您有任何问题，您可以再次问我。谢谢你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T20:58:40.320

这将使它出现在图像
css 下方：

```
 .content p, .content ul {clear:both} 
```

# java - Maintain sessionscope between pages redirect?

> ID：12062899
> 
> 赞同：0
> 
> 时间：2012-08-21T20:54:20.927
> 
> 标签：java, jsf, jakarta-ee, servlets

How can I maintain a `SessionScoped` object between redirects? I have a main page which accesses a `Stateless` bean.

I also have a button which is doing a redirect (`FacesContext.getCurrentInstance().getExternalContext().redirect("/to/my/sevlet");`) to a specific path, and by this invoking the webservlet. The webservlet itself creates some contition-based response, but that should not matter at the moment.

The problem is: when I'm redirected to the servlet, I lose my session scoped bean property that was set during the initial access of the stateless bean..

How can I maintain a sessionscope between pages switch/redirect?

```
@Stateless
class myStateless {
    @Inject
    MySessionBean sessionBean;

    private doSomething() {
        sessionBean.setSessionProperty(true);
    }
}

@SessionScoped
class MySessionBean {

    Boolean sessionProperty = false;
}

@WebServlet
class MyWebServlet {
    doGet(..) {
        out.println("session property status is" + String.valueOf(sessionBean.isSessionProperty()); //always false
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:29:22.607

I found out that the setup is fine. I just made a reference call to a no-session scoped var.

# sql-server - 将 MVC3 VS2010 应用程序移植到 MVC4 VS 2012 - 成员资格失败

> ID：12062901
> 
> 赞同：1
> 
> 时间：2012-08-21T20:54:29.803
> 
> 标签：sql-server, asp.net-mvc, asp.net-membership

我正在拼凑来自 MVC3 2010 的新 MVC4、VS 2012 应用程序。

我运行应用程序，登录（不记得登录凭据）运行应用程序，对成员资格类进行各种调用以获取用户详细信息。一切正常，我关闭应用程序并重新运行，再次登录而不记住凭据，一切仍然运行良好。

我的问题是当我选择记住我选项时。登录后一切正常。当我关闭应用程序并重新启动时，每当我的代码请求时，我都会收到“无法找到 SQL Server”错误`Membership.GetUSer()`。我很困惑，有人可以帮忙吗？

PS 意思是说，My Web.config 指向 SQL Server 2008 R2。我通过最初创建一个用户来创建成员表。

# mkmapview - 如何使用叠加层将 UIBezierPath 添加到 MKMapView

> ID：12062902
> 
> 赞同：1
> 
> 时间：2012-08-21T20:54:32.017
> 
> 标签：mkmapview, overlay, uibezierpath

我一直在尝试使用自定义 MKOverlayPathView 子类和确认的自定义类向地图视图添加半圈，但我无法在地图视图上显示任何内容。我使用 UIBezierPath 来创建圆圈的路径，但无论我尝试什么，我都看不到我的路径...有没有人有一个示例程序，其中 UIBezierPath 被用作覆盖？

谢谢！

蒂姆

编辑：回答安娜的问题：

我可以毫无问题地绘制 MKCircleViews，但我似乎在为 MKOVerlay(Path)View 的自定义子类上苦苦挣扎。委托已设置，并且 NSLog 确认我的叠加层实际上已添加，仅缺少 View 部分......

在我的覆盖类的头文件下方。注释和变量是荷兰语，如果有人想要翻译，我可以提供，但我认为一切都应该清楚。我创建了一个具有中心坐标和半径的叠加层。

boundingMapRect 是从中心坐标计算的。原点是中心减去 x 和 y 的半径，宽度 + 高度是半径的两倍。

```
@interface PZRMijnOverlay : NSObject <MKOverlay>
{

}
//een property die een bezierpath beschrijft, naar de 2 standaard overlay properties
@property (nonatomic, strong) UIBezierPath *bezierPath;
@property (nonatomic) CLLocationDistance straal;

//class method
+(PZRMijnOverlay *)bezierCirkelMetCenterCoordinate: (CLLocationCoordinate2D)coordinaat enStraal: (CLLocationDistance)eenStraal;

//een eigen designated init
-(id)initWithCenterCoordinate: (CLLocationCoordinate2D)coordinaat enStraal: (CLLocationDistance)eenStraal;

@end 
```

这是 de viewForOverlay 方法的实现：

```
PZROverlayView *overlayView = [[PZROverlayView alloc] initWithOverlay:(PZRMijnOverlay *)overlay];

overlayView.strokeColor = [UIColor redColor];
overlayView.lineWidth = 10;
//overlayView.strokeColor = [UIColor blackColor];

return overlayView; 
```

现在我想我应该覆盖我的 PZROverlayView 类中的 createPath 方法，但我不知道需要什么代码去那里。我尝试创建一个 UIBezierPath，将其转换为 CGPath 并将其分配给 MKOverlayPathView 超类的 path 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:26:35.850

好吧，我终于发现我做错了什么！它实际上比我想象的要容易得多！

解决方案：

1.  添加 MKCircle 叠加层
2.  在 viewForOverlay 中：创建一个 bezierPath（CG 或 UI）并将其添加到标准 MKOverlayPathView 实例的路径属性中

通过使用自定义类，我让自己变得太难了......

# python - Python增加一个xml解析

> ID：12062910
> 
> 赞同：1
> 
> 时间：2012-08-21T20:54:57.027
> 
> 标签：python, xml-parsing, increment

你好我是一个用python编程来进行xml解析的程序。虽然我可以让它解析出第一个 xml 标签。我希望能够在文件中完成所有操作。但我不知道该怎么做。这是我确定我错过了一些我知道我必须用可以计算但似乎无法弄清楚我错过了什么的东西替换 0 的代码。任何帮助，将不胜感激。这是我无法真正写在这里的代码，看起来很有趣。希望有帮助。

这是我的代码：

```
from xml.dom import minidom

def xml_data ():
    f = open('C:/opidea.xml','r')
    data = f.read()
    f.close()

    dom = minidom.parseString(data)
    list(data) = ic

    xmlTag = dom.getElementsByTagName('author')[0].toxml()

    xmlData=xmlTag.replace('<author>','Changes by: ').replace('</author>','')

    xmlDate = dom.getElementsByTagName('date')[0].firstChild.nodeValue

    xmlPath = dom.getElementsByTagName('path')[0].toxml()   

    xmlPathm =xmlPath.replace('<kind>',' What Changed: ').replace('</path>','') 

    xmlMsg = dom.getElementsByTagName('msg')[0].toxml()

    xmlMsgm =xmlMsg.replace('<msg>','Comments: ').replace('</msg>','')

    content = ''
    content += xmlData + '\n'
    content += xmlDate + '\n'
    content += xmlPathm + '\n'
    content += xmlMsgm + '\n'

    send_email(content)

def send_email(content):
    print content 
```

这是 xml 数据的样子。

```
<log>
<logentry
 revision="33185">
 <author>glv</author>
<date>2012-08-06T21:01:52.494219Z</date>
<paths>
<path
  action="M"
  kind="dir">/branches/somefolder</path>
</paths>
  <msg>PATCH_BRANCH:N/A
    BUG_NUMBER:N/A
   FEATURE_AFFECTED:N/A
OVERVIEW:N/A
    Adding the SVN log size requirement to the branch 
</msg>
</logentry>
</log> 
```

# c - 在 C 中打印十六进制的前导零

> ID：12062916
> 
> 赞同：56
> 
> 时间：2012-08-21T20:55:20.417
> 
> 标签：c, linux, formatting

我正在尝试将 MD5 哈希的结果打印到控制台，并且它大部分都在工作。为了确保正确性，我使用了在线 MD5 计算器来比较结果。大多数字符是相同的，但我的中缺少一些字符，它们都是前导零。

让我解释。结果是一个 16 字节的 unsigned char *。我逐个打印这些字节。每个字节在屏幕上打印两个字符。但是，如果这两个字符中的第一个字符是零，则它不会打印零。

```
printk("%x", result); 
```

结果是 unsigned char* 类型。我是否正确格式化它或者我错过了什么？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-08-21T20:58:29.723

使用`"%02x"`.

这两个意味着您总是希望输出为（至少）两个字符宽。

零表示如果需要填充，则使用零而不是空格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T20:58:51.720

`result`是一个指针，使用循环打印所有数字：

```
int i;
for (i = 0; i < 16; i++) {
   printf("%02x", result[i]);
} 
```

# python - 如何使用 RGB 元组列表在 PIL 中创建图像？

> ID：12062920
> 
> 赞同：40
> 
> 时间：2012-08-21T20:55:30.833
> 
> 标签：python, python-imaging-library

假设我在一个看起来像这样的列表中有一个像素列表（表示为具有 3 个 RGB 值的元组）`list(im.getdata())`，如下所示：

```
[(0,0,0),(255,255,255),(38,29,58)...] 
```

如何以这种格式使用 RGB 值（每个元组对应一个像素）创建新图像？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-21T21:23:53.153

你可以这样做：

```
list_of_pixels = list(im.getdata())
# Do something to the pixels...
im2 = Image.new(im.mode, im.size)
im2.putdata(list_of_pixels) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-07-24T09:12:25.693

您也可以`scipy`为此使用：

```
#!/usr/bin/env python

import scipy.misc
import numpy as np

# Image size
width = 640
height = 480
channels = 3

# Create an empty image
img = np.zeros((height, width, channels), dtype=np.uint8)

# Draw something (http://stackoverflow.com/a/10032271/562769)
xx, yy = np.mgrid[:height, :width]
circle = (xx - 100) ** 2 + (yy - 100) ** 2

# Set the RGB values
for y in range(img.shape[0]):
    for x in range(img.shape[1]):
        r, g, b = circle[y][x], circle[y][x], circle[y][x]
        img[y][x][0] = r
        img[y][x][1] = g
        img[y][x][2] = b

# Display the image
scipy.misc.imshow(img)

# Save the image
scipy.misc.imsave("image.png", img) 
```

给

[![在此处输入图像描述](../Images/60785e8298ec91da9b9c392f550f73c4.png)](https://i.stack.imgur.com/x16Gw.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-10-14T19:26:17.573

这是一个完整的例子，因为我一开始没有得到诀窍。

```
from PIL import Image

img = Image.new('RGB', [500,500], 255)
data = img.load()

for x in range(img.size[0]):
    for y in range(img.size[1]):
        data[x,y] = (
            x % 255,
            y % 255,
            (x**2-y**2) % 255,
        )

img.save('image.png') 
```

[![输出](../Images/0decd95be8fb027887b22d44937be761.png)](https://i.stack.imgur.com/dVgfl.png)

如果你只寻找灰度，你可以做`Image.new('L', [500,500], 255)`然后`data[x,y] = <your value between 0 and 255>`

# .net - 除了 Visual Studio，我们还可以使用哪些设计器来创建 Windows 工作流活动？

> ID：12062922
> 
> 赞同：1
> 
> 时间：2012-08-21T20:55:46.307
> 
> 标签：.net, c#-4.0, workflow, workflow-foundation-4

我们可以使用任何其他可用于创建 Windows 工作流活动的设计器（可能基于 Web）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T00:07:47.633

目前，.Net Framework 具有重新托管 WF 设计器的功能。它相对容易，您会在网上找到大量示例。但是，它不是基于网络的。

有一些基于 Web 的设计师，比如[这个](http://archive.msdn.microsoft.com/wfxbap/Release/ProjectReleases.aspx?ReleaseId=4668)，但我不知道他们的可靠性。

我的建议是坚持使用 WPF 版本。并且也许使用像单击一次这样的东西来使其易于安装和更新。

# php - 根据代码创建两个缩略图而不是一个

> ID：12062929
> 
> 赞同：-5
> 
> 时间：2012-08-21T20:56:29.983
> 
> 标签：php

我有这个代码可以生成一个缩略图，nw，我需要它来生成我两个...只是为了加倍功能，你能告诉我如何根据这个来做吗？

谢谢..

```
function tamano_nuevo_foto($im_or, $ancho_nv, $dir_nv) {
    $img   = imagecreatefromjpeg($im_or);
    $datos = getimagesize($im_or);
    $ancho = $datos[0];
    $alto  = $datos[1];

    if ($ancho > $ancho_nv) { //Si la imagen no lelga al máximo no la tocamos.
        $prop    = $alto / $ancho;
        $alto_nv = round($ancho_nv * $prop);
    } else {
        $ancho_nv = $ancho;
        $alto_nv  = $alto;
    }
    $im_nv    = imagecreatetruecolor($ancho_nv, $alto_nv);
    imagecopyresampled($im_nv, $img, 0, 0, 0, 0, $ancho_nv, $alto_nv, $ancho, $alto);
    imagejpeg($im_nv, $dir_nv);
    imagedestroy($im_nv);
}

if (!empty($_FILES)) {
    $tempFile   = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
    $targetPath = str_replace('//', '/', $targetPath);
    $targetFile = $targetPath . basename($_FILES['Filedata']['name'], '.' . $ext) . '_s.';
    tamano_nuevo_foto($tempFile, 120, $targetFile);
    echo str_replace($_SERVER['DOCUMENT_ROOT'], '', $targetFile);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:00:50.157

你能像下面这个例子那样调用这个函数两次吗？

```
if (!empty($_FILES)) {
    $tempFile   = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
    $targetPath = str_replace('//', '/', $targetPath);
    $targetFile = $targetPath . basename($_FILES['Filedata']['name'], '.' . $ext) . '_s.';
    $newTargetFile = // define whatever you want to call your second copy of thumbnail here
    tamano_nuevo_foto($tempFile, 120, $targetFile);
    tamano_nuevo_foto($tempFile, 120, $newTargetFile);
    echo str_replace($_SERVER['DOCUMENT_ROOT'], '', $targetFile);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:59:39.023

只需调用该函数两次，或复制文件[`copy()`](http://php.net/manual/en/function.copy.php)

# scala - Scala：不可变的 Set 和不可变的 Map 键成为协变的吗？

> ID：12062933
> 
> 赞同：2
> 
> 时间：2012-08-21T20:57:10.853
> 
> 标签：scala, scala-collections

[我在StackOverflow](https://stackoverflow.com/questions/676615/why-is-scalas-immutable-set-not-covariant-in-its-type)和其他地方读过Scala 的不可变 Set 和不可变 Map 中的 Key 是不变的。

然而，以下编译并在 2.10.0M5 中运行良好

```
type MapCanvT <: Component with VistaIn
def newMapCanv: MapCanvT
val canv1 = newMapCanv
var vistas = Set[VistaIn](canv1)// Map[VistaIn, Option[CSplit]]((canv1, None)) 
```

被注释掉的 Map 版本也可以编译并运行良好。这将是一个非常有用且重要的更改，我没有注意到任何文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T22:15:48.337

协方差意味着您可以这样做：

```
var vistas: Set[VistaIn] = Set[MapCanvT](canv1) 
```

（你不能）

```
var vistas = Set[VistaIn](canv1) 
```

推断为

```
var vistas = Set[VistaIn](canv1: VistaIn) 
```

因此非常`canv1`适合，因为`VistaIn`它是`MapCanvT`.

* * *

回答您的问题：Scala 2.10.0 里程碑版本[仍然具有不变的 Set](http://www.scala-lang.org/api/milestone/index.html#scala.collection.immutable.Set)。（注意：没有稳定的链接。）

# c# - 从 prism 中的另一个模块导航到一个模块的视图

> ID：12062936
> 
> 赞同：1
> 
> 时间：2012-08-21T20:57:17.910
> 
> 标签：c#, wpf, navigation, prism

我正在构建一个有点复杂的棱镜应用程序。客户要求迫使我使用 ModuleB 中的 ModuleA 功能。

我的问题是，当我在 ModuleB 中引用 ModuleA 命名空间并导航到它的视图时，它是否打破了 prism 的解耦目的。如果是，那么我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:26:59.713

该方法的[两个](http://msdn.microsoft.com/en-us/library/gg418957%28v=pandp.40%29.aspx) [化身](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.regions.region.requestnavigate%28v=pandp.40%29)`RequestNavigate`（这是开始导航的推荐方式）有意将视图指定为 URI，以便不需要在模块代码中指定视图的实际类型。

从名称解析实际类型和从类型解析实例分别由区域管理器和容器完成，两者都是在应用程序的引导序列期间配置的，不属于任何特定模块。

您目前如何跨模块边界导航？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:22:31.117

您需要通过它使用`IEventAggregator`和发布/订阅弱事件（`CompositePresentationEvent<TPayload>`）。

[这是一个示例。](http://www.codeproject.com/Articles/355473/Prism-EventAggregator-Sample)

[这是相关的 msdn 链接。](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)

# email - phpmailer 无名附件

> ID：12062939
> 
> 赞同：3
> 
> 时间：2012-08-21T20:57:37.157
> 
> 标签：email, attachment, phpmailer

我正在使用 phpmailer 发送电子邮件。但是我所有的电子邮件都是以无名附件发送的。在我使用 addAttachemnt 函数之前，我已经检查过是否设置了变量，它们是。它看起来像这样：

```
$fname = $_FILES['file']['name'];
$fTmpName = $_FILES['file']['tmp_name'];

            $mail = new PHPMailer();
            $mail->From = "mymail@mymail.com";  
            $mail->FromName = "mymail.com"; //moje meno 
            $mail->IsHTML(true);
            $mail->IsSMTP();
            $mail->Host = "smtp.mymail.com";
            $mail->Subject = "Subject";
            $mail->AddAddress($email);
            echo $fnameZivotopis;
            $mail->AddAttachment($fTmpName,$fname);
            $mail->Body = $msg;
            $mail->Send(); // send message 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:56:26.730

尝试使用 AddStringAttachment(string $att_file_data, string $att_file_name, ...)。

# java - 在 Heroku 上部署 Java 应用程序，这取决于我自己的 Maven 工件

> ID：12062941
> 
> 赞同：7
> 
> 时间：2012-08-21T20:57:39.270
> 
> 标签：java, maven, deployment, heroku, artifactory

Heroku 支持[基于 Maven 部署 Java 应用](https://devcenter.heroku.com/articles/java#deploy-to-heroku)

如果需要公共 maven 存储库中不可用的库，他们还会为应用程序部署[提供建议](https://devcenter.heroku.com/articles/local-maven-dependencies)

但是：我有两个 Maven 项目，其中一个依赖于另一个。当我在本地 mvn 安装依赖工件时，我可以 mvn 打包另一个并且一切正常。但是，我无法将其推送到 heroku，因为 heroku 无法访问我的本地 mvn 存储库。

我能做些什么？是否有必要在 web 上设置一个可供 heroku 访问的私有 maven 存储库（例如 artifactory），或者是否有任何其他方法可以部署这样一个自定义依赖于 heroku 的应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T00:09:38.803

Heroku 有一个替代部署路径，称为[Anvil](https://github.com/ddollar/heroku-anvil)，这可能会有所帮助。使用此路径，您可以使用所需的任何私有库在本地构建所有内容，[并将所有依赖项复制到目标目录](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)中，然后使用 Anvil 构建并将整个内容发布到您的 Heroku 应用程序。默认情况下，Anvil 会将您的应用程序检测为 Java 并尝试再次构建它，但您可以通过指定[null buildpack](https://github.com/ryandotsmith/null-buildpack)来覆盖它，这会告诉它按原样获取您的文件，因为您已经在本地进行了构建。用一个例子可能会更好地说明这一点：

1.  安装铁砧：

    `heroku plugins:install https://github.com/ddollar/heroku-anvil`

2.  克隆已经`copy-dependencies`在其`pom.xml`. 您需要在自己的应用程序中进行配置：

    `git clone git://github.com/heroku/template-java-jaxrs.git`

3.  进入目录并构建应用程序，它将运行`copy-dependencies`. 这很关键，因为您需要应用程序`target`目录中的所有依赖项，而不是`~/.m2/repository`Heroku 将能够找到它们：

    `mvn package`

4.  创建 Heroku 应用程序：

    `heroku create`

5.  使用 Anvil 使用 null buildpack 构建并发布到应用程序：

    `heroku build -b https://github.com/ryandotsmith/null-buildpack.git -r`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:58:55.723

看看我们如何使用实时开源 Web 应用程序：[pom.xml](https://github.com/yegor256/s3auth/blob/master/s3auth-rest/pom.xml)。该应用程序使用 Maven 和 Ant 部署到 Heroku。我们自动执行`git clone`，然后将新文件复制到文件夹中，然后执行`git commit && git push`. 重要的是我们使用`maven-invoker-plugin`它来下载 Heroku slug 中的工件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-16T09:54:41.437

截至 2018 年 8 月，我建议使用[Heroku Maven 插件](https://devcenter.heroku.com/articles/deploying-java-applications-with-the-heroku-maven-plugin)

它允许在本地构建应用程序，然后将 artefact 推送到 Heroku。它解决了我与本地 Maven 依赖项有关的问题。

Spring Boot 应用程序的示例配置：

```
<build>
    <plugins>
        <plugin>
            <groupId>com.heroku.sdk</groupId>
            <artifactId>heroku-maven-plugin</artifactId>
            <version>2.0.5</version>
            <configuration>
                <appName>${heroku.appName}</appName>
                <processTypes>
                    <web>java -Dserver.port=$PORT $JAVA_OPTS -jar target/${project.build.finalName}.jar</web>
                </processTypes>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

如果您使用的是[Heroku CLI](https://devcenter.heroku.com/articles/heroku-cli)，那么`${heroku.appName}`将自动解析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-28T15:54:21.810

您需要一个 Maven 存储库。如果你的项目在 GitHub 上，那么你可以使用[JitPack](https://jitpack.io)。它将构建您的代码并发布一个 jar。

网站上有说明和文档。基本上将 JitPack 添加为存储库，然后将您的项目添加为依赖项。

# php - 如何使用 Yii 框架从数据库中检索图像文件？

> ID：12062944
> 
> 赞同：0
> 
> 时间：2012-08-21T20:57:45.323
> 
> 标签：php, yii

我们的 Yii 框架应用程序将以下内容定义为 UserProfileImages 模型的一部分：

```
public function getProfileImages($param, $user_id) {
        if(isset($param['select']) && $param['select']=='all'){
            $profile_images = UserProfileImages::model()->findAllByAttributes( array( 'user_id'=>$user_id) );

        } else {
            $profile_images = UserProfileImages::model()->findByAttributes( array( 'user_id'=>$user_id) );
        }
        return $profile_images;
    } 
```

我如何将上面的代码片段连接到我视图中的小部件以返回给定用户的所有图像？
额外问题：您建议使用哪个图像旋转器来渲染上述内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:03:49.287

在您的视图文件中，添加类似这样的内容，假设您的控制器指定了 $user_id：

```
$this->widget('UserProfileImagesWidget', array(
    "userProfileImages" => UserProfileImages::getProfileImages(
        array("select" => "all"), 
        $user_id
     ),
     "user_id" => $user_id
)); 
```

根据您的 MVC 理念，您还可以在控制器中检索 userProfileImages 数据并将该数据传递给您的视图。

像这样定义一个小部件：

```
class UserProfileImagesWidget extends CWidget {
    public $user_id;
    public $userProfileImages = array();

    public function run() {
        $this->render("userProfileImage");
    }
} 
```

最后，在 userProfileImages.php 视图文件中，您可以执行以下操作：

```
if(!empty($this->userProfileImages)) {
    // Your display magic
    // You can access $this->user_id
} 
```

附带说明：您可能希望更改 getProfileImages 中参数的顺序。如果 $user_id 是第一个参数，您可以完全省略 $params 以防您不想指定任何参数。

# android - 为什么我要避免片段中的非默认构造函数？

> ID：12062946
> 
> 赞同：174
> 
> 时间：2012-08-21T20:57:50.337
> 
> 标签：android, android-fragments

我正在使用`Fragments`其中一个创建一个应用程序，我创建了一个非默认构造函数并收到此警告：

```
Avoid non-default constructors in fragments: use a default constructor plus Fragment#setArguments(Bundle) instead 
```

有人能告诉我为什么这不是一个好主意吗？

你能否建议我如何做到这一点：

```
public static class MenuFragment extends ListFragment {
    public ListView listView1;
    Categories category;

    //this is my "non-default" constructor
    public MenuFragment(Categories category){
        this.category = category;
    }.... 
```

不使用非默认构造函数？

* * *

## 回答 #1

> 赞同：278
> 
> 时间：2013-04-16T16:53:58.417

似乎没有一个答案真正回答“为什么使用 bundle 来传递参数而不是非默认构造函数”

您应该通过 bundle 传递参数的原因是因为当系统恢复 a `fragment`（例如在配置更改时）时，它会自动恢复您的`bundle`.

回调喜欢`onCreate`或`onCreateView`应该从中读取参数`bundle`- 这样您可以保证将状态`fragment`正确恢复到初始化时使用的相同状态`fragment`（注意此状态可能与`onSaveInstanceState bundle`传递给的状态不同`onCreate/onCreateView`）

使用静态`newInstance()`方法的建议只是一个建议。您可以使用非默认构造函数，但请确保在`bundle`该构造函数的主体内部填充初始化参数。`onCreate()`并在or`onCreateView()`方法中读取这些参数。

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2012-08-21T22:08:50.620

制作一个捆绑对象并插入您的数据（在本例中为您的`Category`对象）。请注意，您不能将此对象直接传递到包中，除非它是可序列化的。我认为最好在片段中构建你的对象，并且只将一个 id 或其他东西放入包中。这是创建和附加捆绑包的代码：

```
Bundle args = new Bundle();
args.putLong("key", value);
yourFragment.setArguments(args); 
```

之后，在您的片段访问数据中：

```
Type value = getArguments().getType("key"); 
```

就这样。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2013-03-25T09:58:20.000

你`Fragment`不应该有构造函数，因为它是如何`FragmentManager`实例化的。您应该`newInstance()`使用所需的参数定义一个静态方法，然后将它们捆绑并将它们设置为片段的参数，稍后您可以使用`Bundle`参数访问它。

例如：

```
public static MyFragment newInstance(int title, String message) {
    MyFragment fragment = new MyFragment();
    Bundle bundle = new Bundle(2);
    bundle.putInt(EXTRA_TITLE, title);
    bundle.putString(EXTRA_MESSAGE, message);
    fragment.setArguments(bundle);
    return fragment ;
} 
```

并在以下位置阅读这些论点`onCreate`：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    title = getArguments().getInt(EXTRA_TITLE);
    message = getArguments().getString(EXTRA_MESSAGE);

    //...
} 
```

这样，如果分离并重新附加，对象状态可以通过参数存储，就像`bundles`附加到`Intent`s。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-01-16T05:07:59.910

如果您对某些类使用参数。尝试这个

```
SomeClass mSomeInstance;
public static final MyFragment newInstance(SomeClass someInstance){
    MyFragment f = new MyFragment();
    f.mSomeInstance = someInstance;
    return f;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-26T11:07:01.087

我认为，静态构造函数和两个构造函数（将参数存储到 Fragment 的参数包中的空且参数化的构造函数）之间没有区别，最有可能的是，创建此经验法则是为了减少忘记在 Java 中实现无参数构造函数的可能性，在存在过载时不会隐式生成。

在我的项目中，我使用 Kotlin，并使用主要的无参数构造函数和辅助构造函数来实现片段，这些构造函数只是将它们存储到一个包中并将其设置为片段参数，一切正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-15T21:02:38.637

如果片段在配置更改后使用非默认构造函数，片段将丢失所有数据。

# javascript - 在基于 Strophe.js 的聊天应用程序中处理存在

> ID：12062950
> 
> 赞同：8
> 
> 时间：2012-08-21T20:58:07.287
> 
> 标签：javascript, xmpp, strophe

是否有任何现有的解决方案可以为基于 Strophe.js 的聊天应用程序提供状态处理？

我有一个基于 Strophe.js 的简单聊天应用程序。我只想显示在线并动态更改列表的用户。我想知道是否有任何现有的解决方案（可能是 Strophe 插件）来处理这个问题。如果没有这样的事情，实现它的最佳/最简单的方法是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-22T13:56:58.967

通过使用 Strophe，您可以将 IQ 发送到您的服务器，要求您提供花名册列表，如下所示：

```
iq = $iq({type: 'get'}).c('query', {xmlns: 'jabber:iq:roster'});
App.connection.sendIQ(iq, your_roster_callback_function); 
```

这将向您的服务器查询您的花名册，并返回一个包含您的花名册列表的对象。然后，您可以遍历您的花名册，例如：

```
your_roster_callback_function(iq){
  $(iq).find('item').each(function(){
    var jid = $(this).attr('jid'); // The jabber_id of your contact
    // You can probably put them in a unordered list and and use their jids as ids.
  });
  App.connection.addHandler(App.on_presence, null, "presence");
  App.connection.send($pres());
} 
```

请注意，我添加了一个`on_presence`回调和`connection.send($pres())`. 其目的是让您可以在联系人的状态发生变化时从他们那里获得更新。您的出席回调将如下所示：

```
on_presence(presence){
  var presence_type = $(presence).attr('type'); // unavailable, subscribed, etc...
  var from = $(presence).attr('from'); // the jabber_id of the contact
  if (presence_type != 'error'){
    if (presence_type === 'unavailable'){
      // Mark contact as offline
    }else{
      var show = $(presence).find("show").text(); // this is what gives away, dnd, etc.
      if (show === 'chat' || show === ''){
        // Mark contact as online
      }else{
        // etc...
      }
    }
  }
  return true;
} 
```

您可以查看 Strophe.js[文档](http://strophe.im/strophejs/doc/1.0.2/files2/strophe-js.html#Strophe.Connection.sendIQ)以获取更多信息。使用 sendIQ，您可以添加更多参数，例如错误回调等。

希望这可以帮助！

编辑：

原谅我，我犯了一个错误。`$(presence).attr('type')`如果联系人在线或不在线，则不会告诉您，但会为您提供在线类型。状态类型实际上是一个信号，它告诉您联系人是否不可用，或者您是否订阅、取消订阅等。

在[XMPP 文档](http://xmpp.org/rfcs/rfc3921.html)中：

> **2.2.1。存在类型**
> 
> 存在节的“类型”属性是可选的。不具有“类型”属性的存在节用于向服务器发出信号，表明发送者在线并且可用于通信。如果包含，'type' 属性指定缺乏可用性、管理订阅另一个实体的存在的请求、对另一个实体当前存在的请求或与先前发送的存在节相关的错误。如果包含，“类型”属性必须具有以下值之一：
> 
> *   不可用——表示实体不再可用于通信。
> *   subscribe -- 发件人希望订阅收件人的出席信息。
> *   subscribed -- 发件人已允许收件人收到他们的出席信息。
> *   unsubscribe -- 发件人正在取消订阅另一个实体的存在。
> *   unsubscribed -- 订阅请求已被拒绝或先前授予的订阅已被取消。ETC...

它为`$(presence).find("show")`您提供联系人的状态。从文档：

> **2.2.2.1。显示**
> 
> OPTIONAL 元素包含非人类可读的 XML 字符数据，用于指定实体或特定资源的特定可用性状态。一个存在节不能包含一个以上的元素。元素不得具有任何属性。如果提供，XML 字符数据值必须是以下之一（可以通过存在节的适当命名空间的子元素定义其他可用性类型）：
> 
> *   away -- 实体或资源暂时离开。
> *   聊天——实体或资源对聊天很感兴趣。
> *   dnd -- 实体或资源正忙（dnd = “请勿打扰”）。
> *   xa -- 实体或资源长时间离开 (xa = "eXtended Away")。
> 
> 如果未提供显示元素，则假定实体在线且可用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-23T00:31:59.707

需要注意的重要一点是[，Strophe.addHandler 仅从响应中读取第一个节点是否正确？](https://stackoverflow.com/questions/2912530/is-it-right-that-strophe-addhandler-reads-only-first-node-from-response)说，如果您想读取的不仅仅是第一个存在节点，请确保在最后返回true，因为：“如果要再次调用处理程序，则应返回true；返回false将在处理程序返回后将其删除。 "

所以我使用的解决方案应该是这样的：

```
on_presence(presence){
   var presence_type = $(presence).attr('type'); // unavailable, subscribed, etc...
   var from = $(presence).attr('from'); // the jabber_id of the contact
   if (presence_type != 'error'){
     if (presence_type === 'unavailable'){
        // Mark contact as offline
     }else{
       var show = $(presence).find("show").text(); // this is what gives away, dnd, etc.
       if (show === 'chat' || show === ''){
         // Mark contact as online
       }else{
         // etc...
       }
     }
   }
   //RETURN TRUE!!!!!!!!!
   return true;
} 
```

# winrar - 在 Winrar 中排除文件夹

> ID：12062952
> 
> 赞同：12
> 
> 时间：2012-08-21T20:58:17.153
> 
> 标签：winrar

**与 Winrar 的一天**

我想做的就是使用通配符排除文件夹及其内容，即使在阅读了文档之后，它也变成了一个猜谜游戏......

所以我的测试床看起来像：

```
C:\!tmp1\f1
C:\!tmp1\f1\f1.txt
C:\!tmp1\f1\a
C:\!tmp1\f1\a\a.txt
C:\!tmp1\f2
C:\!tmp1\f2\f2.txt
C:\!tmp1\f2\a
C:\!tmp1\f2\a\a.txt 
```

我正在执行：

```
C:\>"c:\program files\winrar\winrar.exe" a -r !tmp1.rar !tmp1 
```

这给了我一个以 !tmp1 为根的 rar（唯一的顶级文件夹）。

排除开关`-x<filepathpattern>`被包含并且可能被包含多次。

因此，鉴于我们要排除 f2 及其所有子内容...

```
-x*\f2\* 
```

删除内容，但留下 f2

```
-xf2 
```

什么都不做 - 包括所有

```
-x\f2 
```

什么都不做 - 包括所有

```
-x*\f2 
```

什么都不做 - 包括所有（现在我很生气），所以肯定是..

```
-x\f2\ 
```

不，什么都不做 - 包括所有。所以它必须是...

```
-x*\f2\ 
```

地狱不，什么都不做 - 包括所有。我已经知道了

```
-x*\f2\* 
```

删除内容，但留下 f2。继续我们去...

```
-x*f2\ 
```

什么都不做 - 包括所有。呸呸呸。啊哈！怎么样...

```
-x!tmp1\f2\ 
```

不，什么都不做 - 包括所有。哇。好吧，所以它必须是......

```
-x!tmp1\f2 
```

天哪，它奏效了！嗯，那怎么会……

```
-x*\f2 
```

不工作？***正是这个小恶魔让我一开始就走上了这条疯狂的道路，而且应该奏效！***

鉴于这一切，我敢尝试去寻找`*/a/*`目录，删除内容和目录吗？

```
-x*\a 
```

不起作用，当然，什么也不做。

```
-x*\*\a 
```

不起作用，当然，什么也不做。

```
-x!tmp1\*\a 
```

不。但...

```
-x*\a\* 
```

删除两个目录的内容，但保留文件夹。所以，在绝望中我可以使用`-ed`不会存储空文件夹的开关，但这是一个广泛的黑客，我想消除指定的文件夹而不是所有空文件夹。

随着我对 winrar 的仇恨与日俱增，我正在传递信息的指挥棒，着眼于那个辉煌的日子，那时我们将知道如何使用通配符而不是使用`-ed`开关来专门排除文件夹及其内容。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-19T12:07:15.097

（很老的问题，但仍然可能相关）

也许您只需要这样：

`-x*\f2 -x*\f2\*`

两个排除开关，应删除目录 f2 及其所有内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-02T20:13:10.550

现在是一个更老的问题，但遇到了这个问题，所以我复制了你的文件夹结构，至少现在（Winrar 5.11，不是最新的，但很新），这有效：

```
-x*\f2 
```

所以整个命令行是：

```
"C:\Program Files\WinRAR\Rar.exe" a -m5 -s !tmp1.rar !tmp1 -x*\f2 
```

这是存储在 .rar 文件中的内容：

```
!tmp1\f1\a\a.txt
!tmp1\f1\f1.txt
!tmp1\f1\a
!tmp1\f1
!tmp1 
```

同样，如果您使用`-x*\a`，则排除所有`a`文件夹，并存储以下内容：

```
!tmp1\f1\f1.txt
!tmp1\f2\f2.txt
!tmp1\f1
!tmp1\f2
!tmp1 
```

最后，结合两个参数 ( `-x*\f2 -x*\a`)，您将得到：

```
!tmp1\f1\f1.txt
!tmp1\f1
!tmp1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-04T02:17:43.357

要管理要排除的文件的大列表，您可以创建文本文件并写入相对于源文件夹的所有排除文件/文件夹：

1）创建文件list.txt，写上排除文件/文件夹的名称注意：*参考源，所有文件/文件夹都是相对于源文件夹

*\f2 *\f3

2）运行命令

```
 rar a -r  -x@list.txt target.rar source-folder 
```

# android - 使用 sqlite3 将 csv 导入 sqlite 给我一行

> ID：12062953
> 
> 赞同：1
> 
> 时间：2012-08-21T20:58:18.630
> 
> 标签：android, sql, database, sqlite, csv

所以我无法将 csv 导入我的 sqlite 表。我的文件看起来很好：我在（我的文件的结构）中指定`.separator`了`,\n`。但是当我导入时，似乎只有一行，其中包含来自 csv 的所有内容。我希望它导入文件并让 sqlite3 将每个值放在自己的行中。我究竟做错了什么？

**桌子**

```
$ sqlite3 test
SQLite version 3.6.12
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> create table test (name text);
sqlite> .separator ,\n
sqlite> .import sqlite.csv test
sqlite> select * from test;
Biohazard,
Bird,
Black-Star,
Black-Truck,
Blog,
Boardwalk,
...
sqlite> select * from test where name="Bird";
sqlite> //notice here that nothing comes up for 'Bird'
//But what I want it to do is to return 'Bird' like so:
sqlite> select * from test where name="Bird";
Bird
sqlite> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:26:28.293

将您的分隔符设置为`,`...，`\n`它会为每个字段分隔符查找逗号后跟换行符。

```
.separator , 
```

# javascript - 使用 jQuery 选择所有引用引用

> ID：12062954
> 
> 赞同：0
> 
> 时间：2012-08-21T20:58:20.547
> 
> 标签：javascript, jquery, html

假设我有以下 HTML：

```
<html>
    <head>
        <title>My Test Page</title>
    </head>
    <body>
        I liked the book <cite>Catcher In The Rye</cite>.
        I also liked the book <cite>The Great Gatsby</cite>.
    </body>
</html> 
```

我想知道的是是否有办法选择`<cite>`和`</cite>`标签之间的所有字符串？我想要做的是在`cite`标签之间的所有文本中添加一个 CSS 样式。我知道我可以`class`为每个属性添加一个公共属性并使用类名选择它们，但是有很多，我不想将它添加到每个属性中。jQuery 有`cite`标签选择器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:01:35.667

这个选择器应该选择`cite`文档中的所有标签；`$('cite')`

你可以这样使用它； `$('cite').addClass('myCustomCssClass');`

见[http://api.jquery.com/element-selector/](http://api.jquery.com/element-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:11:19.967

```
one liner

$('cite').addClass('yourclass').css({'height':'20px','width':'10px'}); 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:00:15.093

`$("cite")`应该得到所有实例。

在 jQuery 中，有三个主要的选择器：

1.  按标签名称：$("cite")
2.  按类别：$(".someClass")
3.  按 ID：$("#SomeID")

思考它的一个好方法是“我将如何定义 CSS 定义来设置一个或多个元素的样式”？通常，该答案将为您提供在 jQuery 中使用的良好选择器。

在您的情况下，您可以遍历每个 CITE 元素并像这样获取 text/html：

```
$("cite").each(function() {
  var theText = $(this).text();  // example to get text
  var theHtml = $(this).html();  // example to get html
  // do whatever you want with these values
}); 
```

# java - 如何启用地图旋转？

> ID：12062956
> 
> 赞同：2
> 
> 时间：2012-08-21T20:58:23.900
> 
> 标签：java, android, google-maps, google-maps-api-3

在谷歌地图应用程序中，我可以通过在显示屏上滑动两根手指来旋转地图。我想将此功能添加到我的应用程序中，但我找不到这样做的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:14:19.867

在 Android 示例项目 (API Demo) 中有一个名为 MapsDemo 的地图示例项目，您可以在其中找到地图旋转的解决方案

# c# - 当我没有引用程序集中的任何类型时，为什么 .NET 会加载该程序集？

> ID：12062961
> 
> 赞同：1
> 
> 时间：2012-08-21T20:58:36.540
> 
> 标签：c#, .net, .net-assembly

我有一个代码库，其中包含一个 MVC 项目、两个 WCF 项目和一个服务层（业务对象、存储库等）。我还有一个通用代码的程序集（我将称之为 common），其中包含的代码是

a) 在代码库之间共享，b) 旨在在其他项目中重用的代码。

这个通用代码的一部分是我称为 Common.Web 的命名空间，其中包含在我当前的 MVC 应用程序中使用的 MVC 属性，以及我编写的打算在未来的应用程序中使用的属性（例如审计日志等）。

无论如何，我的 WCF 服务几个月来一直在愉快地引用我的通用程序集。他们显然不使用任何需要引用 System.Web.Mvc.dll 的类，因为，好吧，他们不引用这些类中的任何内容，因此 .NET 不会尝试加载 System.Web.Mvc .dll。

然而，今天我遇到了一个问题。我将代码添加到从我的 WCF 服务之一调用的 Common 程序集中。此代码通过 EF Code First 写入数据库。它是一个简单的类（和 DbContext），如下所示：

```
using System.Data.Entity;
using System;
using System.ComponentModel.DataAnnotations;

namespace Rsts.Common.Clients.Transcend
{
    public class TransactionAuditContext : DbContext
    {

        public TransactionAuditContext(string connString)
            : base(connString)
        {

        }

        /// <summary>
        /// DbSet of AuditEventTypes
        /// </summary>
        public DbSet<TransactionDetails> Transactions { get; set; }

    }

    public class TransactionDetails
    {

        [Key()]
        public Int64 TransactionID { get; set; }

        public Int64 PageRequestID { get; set; }

        public string TransactionRequestData { get; set; }

        public string TransactionReturnData { get; set; }

    }
} 
```

一旦我执行这样的代码：

```
context.Transactions.Add(new TransactionDetails()); 
```

我得到一个 ReflectionTypeLoadException ，原因是没有找到 System.Web.Mvc.dll。我确实在我的 Common dll 中引用了 System.Web.Mvc.dll，但是这段代码没有引用 System.Web.Mvc.dll 中的任何类型，所以我知道 .NET 没有理由尝试加载 MVC .

当我查看 ReflectionTypeLoadException 的 Types 属性时，似乎 .NET 正在尝试在我的 Common 程序集中加载每个类型，无论我是否使用它。那么，是否有任何情况会导致 .NET 在程序集中加载每种类型？是否存在多次引用程序集以至于 .NET 只会在程序集中加载每种类型的点？（记住这是我的通用程序集，所以它被引用了很多）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:39:40.640

加载额外程序集（并非全部引用一次）的一种情况是 Assembly.GetTypes() 并且您的类型派生自不存在的程序集中的类型。通常，如果您不使用这些类型，这样的代码会运行正常，但是一旦调用 GetTypes()，它就会失败。

# c - 字符串比较的空格问题

> ID：12062968
> 
> 赞同：0
> 
> 时间：2012-08-21T20:59:01.320
> 
> 标签：c, linux

我写了一个比较字符串的简单应用程序。我的问题是空格。这是示例代码：

```
int main(int argc,char *argv[]) {  

    if(strcmp(argv[1], "go up")==0){
        printf("up up and away\n");
    } 

    if(strcmp(argv[1], "down")==0){
        printf("down you go\n");
    }
    return 0;
} 
```

现在用 编译后`gcc -o try try.c`，我在终端中运行它：

```
./try go up  // doesn't show anything
./try down //prints down you go 
```

是否可以在 Linux 终端中使用空格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T21:01:15.590

是的，你只需要逃避它。在您的情况下，程序将“上升”视为两个参数。

试试这个：

```
./try go\ up 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T21:01:20.690

> 是否可以在 linux 终端中使用空格？

尝试引用空格：

```
./try 'go up' 
```

* * *

旁注：您应该`argc`在使用`argv`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T21:07:59.087

可以从 Linux 终端使用空白。

尝试以下操作：

```
./try "go up"
./try go\ up 
```

对于这两种情况，系统都应该按照您的预期做出响应。

`argv`标准外壳会根据空格自动将行拆分为数组。引号告诉解析器将文本视为单个字符串，从而允许访问诸如“程序文件”之类的目录。反斜杠转义空格，告诉解析器将其视为特殊字符，而不是用于分割行的空格。

# ruby - 数组排列和比较：这个数组是否包含这些数组中的任何一个？

> ID：12062970
> 
> 赞同：1
> 
> 时间：2012-08-21T20:59:06.787
> 
> 标签：ruby, arrays, permutation

我已经到处寻找答案，虽然我发现了一些类似的问题，但我一直无法解决我的问题。

我正在开发一个 Mastermind 游戏。现在我正在研究用于智能计算机猜测的算法。我已经阅读了很多关于这方面的内容，但作为一个对编程相当陌生的人，开发这个算法有点挑战（我正在使用 TDD）。

```
secret_code = %w(blue blue orange orange)
guess = %w(orange blue red yellow)
valid_colors = %w(blue green orange purple red yellow)
possible_secret_codes = valid_colors.repeated_permutation(4).to_a 
```

我想根据猜测后收到的反馈（分数）尽可能多地消除可能的秘密代码。

一种可能的方法（简单，尽管不是最有效的）是首先专注于找到正确的四种颜色，而不管位置如何。

```
score = {exact: 1, close: 1}
total_score = score[:exact] + score[:close]
parts_of_secret_code = guess.repeated_permutation(total_score).to_a.uniq 
```

parts_of_secret_code 将返回一个数组数组。我们可以确定，密码至少包含*这些*数组中的一个。我想从 possible_secret_codes 中删除任何不包含这些数组中的至少一个的代码。

使用我提供的示例信息（假设我提供的密码、我提供的猜测、我提供的分数等），parts_of_secret_code 将是：

```
parts_of_secret_code = [["orange", "orange"],
                        ["orange", "blue"],
                        ["orange", "red"],
                        ["orange", "yellow"],
                        ["blue", "orange"],
                        ["blue", "blue"],
                        ["blue", "red"],
                        ["blue", "yellow"],
                        ["red", "orange"],
                        ["red", "blue"],
                        ["red", "red"],
                        ["red", "yellow"],
                        ["yellow", "orange"],
                        ["yellow", "blue"],
                        ["yellow", "red"],
                        ["yellow", "yellow"]] 
```

我想消除至少没有这些数组之一的代码。这样做将减少通过在有效颜色数组上调用repeat_permutation 找到的可能_secret_codes 的原始列表（总共1,296 个）（如上所示）：

```
possible_secret_codes = valid_colors.repeated_permutation(4).to_a 
```

谁能想到一种方法来做到这一点？我已经尝试了很多东西，但无法弄清楚。

提前感谢您的帮助，如果我没有提供足够的信息，请告诉我！（而且我知道这个标题可能很奇怪......不知道如何措辞。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:51:12.457

“我想消除至少没有这些数组之一的代码。”

```
require 'set' 
possible_secret_codes.select do |ary|
  parts_of_secret_codes.any? {|part| part.to_set.subset? ary.to_set}
end 
```

代码片段所做的是对满足条件的`select`那些数组`possible_secret_codes`

```
parts_of_secret_codes.any? {|part| part.to_set.subset? ary.to_set} 
```

条件表示它`part`是 的真子集`ary`。

# python - 即使预期为“真”，也会继续返回“无”

> ID：12062974
> 
> 赞同：1
> 
> 时间：2012-08-21T20:59:50.143
> 
> 标签：python, file, path

我不知道为什么我`valex.exists(path)`会一直返回`None`，我的意思是它在单独测试时工作正常，但是当另一个模块调用它以供使用时，`None`尽管路径名是有效的，它仍然会继续返回。

这是我的`valex.exists(path)`：

```
def exists(path):
  # I've imported os already
  if os.path.exists(path):
    return "Exists"
  else:
    return None 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:27:24.920

对于这些类型的函数（我同意您的函数没有用并且返回 None 是多余的但通常是多余的事实），我认为使用单行 if 语句更清楚：

```
def exists(path):
    return "Exists" if os.path.exists(path) else None 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:20:42.753

有几种可能性可以解释这一点。

1.  python解释器可能没有文件所在文件夹的权限，因此看不到文件。或者，如果您的系统使用 ACL，则 ACL 中可能有一条规则阻止解释器查看文件。
2.  也许您的代码并没有尝试打开您认为的内容。在打开文件名之前打印或记录文件名以进行验证。
3.  您在文件资源管理器或`ls`命令中看到的文件名或任何可能看起来与您的代码正在查找的内容匹配但实际上并不匹配的文件名。例如，在 Unix 中，退格控件可能会出现在文件名中并扭曲它们在`ls`输出中的显示方式。相似的字符也可能出现在文件名中；例如，西里尔字母“a”与拉丁字母“a”看起来相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:25:22.683

小心你如何传递“路径”：

```
print exists('C:\temp\test.txt')
>>> None

print exists(r'C:\temp\test.txt')
>>> Exists

print exists('C:\\temp\\test.txt')
>>> Exists 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T21:09:51.003

以下代码（您的示例具有显式导入并删除了提到的冗余返回 None Lanaru）在我的互联网端在这里可以正常工作。当我跑步时`exists('C:/Python27')`。`Exists`被退回；当我尝试时也会发生同样的事情`exists('C:\Python27')`。

（上面提到的代码）：

```
import os

def exists(path):
    if os.path.exists(path):
        return "Exists" 
```

关于相对路径的评论可能是正确的。这个代码片段当然没问题。

# android - 我应该为我的 android 应用程序的免费版本创建一个分支吗？

> ID：12062981
> 
> 赞同：4
> 
> 时间：2012-08-21T21:00:31.060
> 
> 标签：android, git, version-control

我有一个 Android 应用程序，它是一个付费应用程序，我想制作一个免费版本。免费版的源代码将有 95% 相同。我正在使用`git`源代码控制，我最初的想法是创建一个`free`分支，`master`以便我可以轻松地将付费版本的更改合并到免费版本中。

`free`考虑到分支中的某些更改永远不会合并回，这是正确的策略`master`吗？

其他选项包括：

1.  为免费版本创建另一个存储库
2.  保留所有内容`master`并创建免费和付费版本都使用的库代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:03:25.827

我更愿意将代码放在一起，并在分支上使用条件编译和/或“付费”插件库。分支应该代表开发过程中源代码树的转移。不应使用分支来维护单独的代码库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:31:44.137

您可以创建付费大师和免费大师。使用[git flow](http://nvie.com/posts/a-successful-git-branching-model/)技术来管理您的新功能和错误修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-02T16:47:51.590

使用[gradle 构建系统](http://developer.android.com/tools/building/configuring-gradle.html#workBuildVariants)，您可以为您的应用程序创建不同的“风格”。

`android { ... defaultConfig { ... } signingConfigs { ... } buildTypes { ... } productFlavors { paid { applicationId "donturner.app.paid" versionName "1.0-paid" } free { applicationId "donturner.app.free" versionName "1.0-free" } } }`

然后，您可以为这些构建风格创建额外的源文件夹，这些文件夹可用于提供不同的实现。例如。`app/src/free/java/ClassWithDifferences.java`将提供“免费”实施`app/src/paid/java/ClassWithDifferences.java`。

注意：代码在`app/src/main/`所有口味之间共享；所以一定没有`app/src/main/java/ClassWithDifferences.java`。并确保正确使用这些风味，例如，只存在于免费风味中的类不得在 main 中引用，也不得在付费中引用。

# c# - CS1501: No overload for method 'ToString' takes 0 arguments?

> ID：12062982
> 
> 赞同：14
> 
> 时间：2012-08-21T21:00:31.090
> 
> 标签：c#, f#

How is it possible for no overload of ToString to take zero arguments? The zero-argument ToString is part of System.Object!

*Edit in response to the close vote:* **Since I'm not in a position to upgrade my build server to .NET 4.5, is there any way to make this code work with the .NET 4.0/VS 2010 compilers?** Short of giving my overload a completely different name, which is just not cool.

*   The object in question is an F# Discriminated Union that overrides the ToString method inherited from System.Object.
*   The overridden ToString is being called by code in a C# project that's part of the same solution.
*   This all worked fine until I added an extra overload of ToString to my discriminated union, which takes one argument.
*   It all builds and runs perfectly on my local machine (VS 2012, all projects targeting .NET 4.0)
*   It fails on the build server (.NET 4.0) - the C# compiler error in the title showed up as soon as I added the 1-argument overload of ToString to my discriminated union.

I guess the simplest workaround would be to rename my ToString overload to something else, but this is bizarre.

Here's a simple reproduction. You can download a zip file of a solution containing this code here: [http://dl.dropbox.com/u/1742470/CS1501_Repro.zip](http://dl.dropbox.com/u/1742470/CS1501_Repro.zip)

Compiling that solution in VS 2010 will fail with "CS1501: No overload for method 'ToString' takes 0 arguments". Compiling it in VS 2012 will work just fine. In both cases we're targeting .NET Framework 4.

**F#**

```
namespace CS1501_Repro.FSharp

open System

[<Serializable>]
type MyDiscriminatedUnion =
    | Foo of int list
    | Bar of string
    | Baz of int
    | Fizz of float
    | Buzz of DateTimeOffset

    override this.ToString() =
        "Zero Arguments"

    member this.ToString(lookup:Func<int,string>) =
        "One Argument" 
```

**C#**

```
using System;
using CS1501_Repro.FSharp;

namespace CS1501_Repro.CSharp
{
    public class Caller
    {
        private MyDiscriminatedUnion _item;

        public Caller(MyDiscriminatedUnion item)
        {
            _item = item;
        }

        public string DoThing()
        {
            return _item.ToString();
        }

        public string DoOtherThing()
        {
            return _item.ToString(i => i.ToString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T23:18:08.347

This is just a partial answer, but I noticed that VS2010 and VS2012 generate different IL for the F# class. If you look at the IL for the `ToString(lookup:Func<int,string>)` method, then you will see that the output in VS2010 is:

```
.method public instance string  ToString(class [mscorlib]System.Func`2<int32,string> lookup) cil managed
{
  // Code size       7 (0x7)
  .maxstack  3
  IL_0000:  nop
  IL_0001:  ldstr      "One Argument"
  IL_0006:  ret
} // end of method MyDiscriminatedUnion::ToString 
```

while the output in VS2012 is:

```
.method public hidebysig instance string 
        ToString(class [mscorlib]System.Func`2<int32,string> lookup) cil managed
{
  // Code size       7 (0x7)
  .maxstack  8
  IL_0000:  nop
  IL_0001:  ldstr      "One Argument"
  IL_0006:  ret
} // end of method MyDiscriminatedUnion::ToString 
```

The difference is the `hidebysig` annotation in the method signature. If `hidebysig` is added, then the method will hide other implementations (in the base class) that share the same name and signature, while if `hidebysig` is omitted, it will hide all other implementations with the same name even if the signature is different. [This stack overflow question](https://stackoverflow.com/questions/656325/what-is-the-purpose-of-hidebysig-in-a-msil-method) contains a good answer that describes `hidebysig`.

So while this answer doesn't solve your problem, it explains why it doesn't compile in VS2010.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T23:08:37.173

I have to admit, this is the first time I have ever used F#, so this solution is probably not the most elegant, however, you mentioned that ToString() is part of System.Object...

I solved this issue by adding a line of code into the DoThing() method which assigns _item to object, and then calls ToString() from the object, giving, in this instance, the desired result:

**F# code (unchanged)**

```
type MyDiscriminatedUnion =
    | Foo of int list
    | Bar of string
    | Baz of int
    | Fizz of float
    | Buzz of DateTimeOffset

    override this.ToString() = "Zero Arguments"
    member this.ToString(lookup:Func<int,string>) = "One Argument" 
```

**C# code (see change in DoThing() method)**

```
 public class Caller
    {
        private Module1.MyDiscriminatedUnion _item;

        public Caller(Module1.MyDiscriminatedUnion item)
        {
            _item = item;
        }

        public string DoThing()
        {
            object result = _item; //assign to object
            return result.ToString(); //call ToString() on object
        }

        public string DoOtherThing()
        {
            return _item.ToString(i => i.ToString());
        }
    } 
```

I do apologize if this is not what you want...but it's all I can think of, and if anyone thinks it's the wrong way to go about it, please do say why!

# sql - SQL Join 与 Group By

> ID：12062992
> 
> 赞同：0
> 
> 时间：2012-08-21T21:01:58.710
> 
> 标签：sql, join, group-by

好的，所以我正在尝试编写一个复杂的查询（至少对我来说很复杂）并且需要一些专业帮助。这是我的数据库设置：

表：制作清单

```
| MakeListId | Make     |
| 1          | Acura    |
| 2          | Chevy    |
| 3          | Pontiac  |
| 4          | Scion    |
| 5          | Toyota   | 
```

表：CustomerMake

```
| CustomerMakeId | CustomerId | _Descriptor |
| 1              | 123        | Acura       |
| 2              | 124        | Chevy       |
| 3              | 125        | Pontiac     |
| 4              | 126        | Scion       |
| 5              | 127        | Toyota      |
| 6              | 128        | Acura       |
| 7              | 129        | Chevy       |
| 8              | 130        | Pontiac     |
| 9              | 131        | Scion       |
| 10             | 132        | Toyota      | 
```

表：客户

```
| CustomerId | StatusId |
| 123        | 1        |
| 124        | 1        |
| 125        | 1        |
| 126        | 2        |
| 127        | 1        |
| 128        | 1        |
| 129        | 2        |
| 130        | 1        |
| 131        | 1        |
| 132        | 1        | 
```

我想要结束的是这个......

期望的结果集：

```
| Make    | CustomerId|
| Acura   | 123       |
| Chevy   | 124       |
| Pontiac | 125       |
| Scion   | 131       |
| Toyota  | 127       | 
```

我想要一个包含一个**活动（StatusId = 1）** CustomerId 的唯一品牌列表。我假设我必须做一些`GROUP BYs`，`JOINS`但我无法弄清楚。任何帮助将不胜感激。如果我没有为我的问题提供足够的信息，请告诉我。谢谢！

更新：脚本不必是高性能的 - 它将用于测试目的一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:15:12.290

像这样的东西：

```
select cm._Descriptor,
       min(cu.customerid)
from CustomerMake cm
  join Customer cu on cuo.CustomerId  = cm.CustomerId and cu.StatusId = 1
group by cm._Descriptor 
```

我省略了 MakeList 表，因为它似乎没有必要，因为`_Descriptor`无论如何您都将完整的品牌名称存储在 CustomerMake 表中（所以问题是 MakeList 表的用途是什么？为什么不在 CustomerMake 表中存储一个 FK ?)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:11:43.103

你想要

(a) 加入 customer 和 customermake 表 (b) 在 customer.statusid 上过滤
(c) 按 customermake._descriptor 分组

根据您的 RDBMS，您可能需要将组函数显式应用于 customer.customerid 以将其包含在选择列表中。由于您不关心显示的是哪个特定的 customerid，因此您可以使用 MIN 或 MAX 来选择一个基本上任意的值。

# php - 如何为 rets 客户端使用 librets.dll 的 php dl 函数

> ID：12062997
> 
> 赞同：0
> 
> 时间：2012-08-21T21:02:06.077
> 
> 标签：php, rets

当我即将离开工作时，我不想跳入所有事情，我只想提出建议或改变一些事情。我有一个centos linux服务器，这是给我错误的代码，我不确定什么是错的，因为我像这样下载它并且它不会工作。

```
if (!extension_loaded('librets')) {
  if (strtolower(substr(PHP_OS, 0, 3)) === 'win') {
    if (!dl('php_librets.dll')) return;
  } else {
    // PHP_SHLIB_SUFFIX gives 'dylib' on MacOS X but modules are 'so'.
    if (PHP_SHLIB_SUFFIX === 'dylib') {
      if (!dl('librets.so')) return;
    } else {
      if (!dl('librets.'.PHP_SHLIB_SUFFIX)) return;
    }
  }
} 
```

我收到以下错误：

```
Fatal error: Call to undefined function dl() in /home/removed/public_html/test/rets2/librets.php on line 22 
```

我不确定怎么了。。

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:17:42.653

dl 不是在某些条件下加载库的好解决方案，这就是为什么该函数已从几个 SAPI-s（服务器 API - PHP 与运行 PHP 的服务器之间的连接）中删除的原因。您要么必须将其添加到 php.ini 中，要么通过您的服务器可用的任何方式加载它。如果您使用的是共享主机，出于安全原因，主机商也可能禁用了 dl()。

# c# - 静态类中的 C# 枚举类型范围

> ID：12062999
> 
> 赞同：0
> 
> 时间：2012-08-21T21:02:31.890
> 
> 标签：c#, class, enums, scope

我在一个*公共类中有一个**枚举*，定义如下：

 *```
namespace NS1
{
    public class MyClass
    {
        public enum ModeEnum { Auto, Manual };
    }
} 
```

我还有一个静态类，我试图在其中使用这个枚举类型（注意它们都属于同一个命名空间）：

```
namespace NS1
{
    public static class MyStaticClass
    {
        public static MyClass.ModeEnum mode = MyClass.ModeEnum.Auto;
    }
} 
```

*MyStaticClass*不会编译。编译器给出以下错误：

*“NS1.MyStaticClass.MyClass.ModeEnum”类型中不存在类型名称“ModeEnum”*

如果我将*模式*的定义更改为以下内容：

```
public static ModeEnum mode = ModeEnum.Auto; 
```

我得到一个稍微不同的错误：

*找不到类型或命名空间名称“ModeEnum”（您是否缺少 using 指令或程序集引用？）*

有谁知道我为什么会收到这个错误？

这第二个错误我有点预料到，因为在过去引用*枚举*类型时，我总是必须先用*类*名限定它，然后是*枚举类型名*。

```
<Class Name>.<Enum Name> myValue = <Class Name>.<Enum Name>.<Enum Value> 
```

这带来了另一个我一直想问的问题。有时当我声明一个*枚举*类型的变量时，我也必须添加*命名空间*名称，即使我的类有正确的*using*语句。例如：

```
<Namespace Name>.<Class Name>.<Enum Name> myValue = <Namespace Name>.<Class Name>.<Enum Name>.<Enum Value> 
```

这会导致一些看起来很奇怪的变量声明。例如，在我的一个类中，我有一个*枚举*变量，如下所示：

```
using namespace NS1;
...
...
NS1.MyClass.ModeEnum myMode = NS1.MyClass.ModeEnum.Auto; 
```

谁能向我指出为什么以及何时需要首先使用命名空间来限定事物？

我试图弄清楚，但坦率地说，我太忙了，无法*了解*发生了什么。我只是简单地添加了命名空间名称。:P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:27:24.570

从您的错误消息看来，您有*两个* `MyClass`，而您没有告诉我们的一个在*里面* `MyStaticClass`。

看起来你被嵌套类型弄糊涂了。除非你有充分的理由，否则不要将类或枚举放在其他类中。将所有类和枚举直接放在命名空间下会更容易。

**编辑**：我只是在评论（问题，而不是下面）中看到问题是名称空间和其中的类型具有相同的名称。*