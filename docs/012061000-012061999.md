# StackOverflow 问答 12061000-12061999

# php - PHP：DateTime 抛出具有合法时间戳的异常

> ID：12061005
> 
> 赞同：0
> 
> 时间：2012-08-21T18:37:08.530
> 
> 标签：php, datetime

我不明白：

```
$ts = strval( $this->get_start_date() ); // retrieve (int) timestamp from database

$time = new DateTime ( $ts ); 
    // throws an exception:  
    //'DateTime::__construct(): Failed to parse time string 
    //(1346284800) at position 7 (8): Unexpected character' 

$time = new DateTime();
$time->setTimestamp( $ts );
//works fine 
```

知道这里发生了什么吗？我正在使用

```
PHP 5.3.10-1ubuntu3.2 with Suhosin-Patch (cli) (built: Jun 13 2012 17:19:58) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:45:30.980

`DateTime`要使用 UNIX_TIMESTAMP进行初始化，请在开头使用**@ ：**

```
$time = new DateTime ('@'.$this->get_start_date()); 
```

请参阅PHP 手册中的[复合格式](http://www.php.net/manual/en/datetime.formats.compound.php)`strtodate()`，了解以及也接受的格式`DateTime()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:40:26.463

检查[DateTime::__construct()](http://www.php.net/manual/de/datetime.construct.php)

DateTime 的构造函数不等待，`unix timestamp`而是使用格式的日期时间字符串`Y-m-d H:i:s`

你的第二种方法很好。

# java - Java正则表达式查找字符串的开头

> ID：12061011
> 
> 赞同：0
> 
> 时间：2012-08-21T18:37:41.503
> 
> 标签：java, regex

你能帮我跟上吗，因为我不想再浪费时间了；

我有以下代码不起作用；

```
String someStr = "C:\SomeDir";
boolean = someStr.matches("(^[A-Z|a-z]:[\\\\:/])*")); 
```

上面的代码返回**false**，但我认为它应该返回 'true'，我错过了什么吗？我只想知道我的字符串是否以 C:\ 或 C:/ 或 :[/|].... 开头

谢谢，

--

SJunejo

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:40:38.847

Match 仅适用于文档中的*完全匹配* 。

你似乎想要的是

```
boolean root = someStr.matches("[A-Za-z]:[\\\\/].*"); 
```

# azure - 由于缺少“NUnit”命名空间，TFSPreview 构建服务器无法构建 NUnit 测试项目

> ID：12061012
> 
> 赞同：0
> 
> 时间：2012-08-21T18:37:45.620
> 
> 标签：azure, nunit, tfsbuild

设置： TFSPreview.com（MS Team Fortress in Cloud）

*   代码库
*   构建服务器（手动构建触发器，自动部署到 Azure 云服务）

VS 2012 解决方案

1.  WCF服务项目
2.  测试 WCF 服务项目（基于 NUnit）
3.  Azure 云项目（仅涵盖上面的#1）

问题：构建失败，因为`stats.cs (7): The type or namespace name 'NUnit' could not be found (are you missing a using directive or an assembly reference?)`

stats.cs 第 7 行是 `using NUnit.Framework;`

`<test project>\lib\nunit.framework.dll`当我转到测试项目-> 引用-> nunit.framework -> 属性时，nunit .dll位于解决方案资源管理`Copy Local`器中`true`（因此它应该手动将 .dll 复制到天蓝色以进行部署）

有谁知道这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:38:48.613

嗬！这是一个超级简单的修复。虽然它是在本地编译，但它没有在 build/TFS 服务器上编译，因为该`<test project>\lib\`文件夹没有检入 TFS ！所以`Copy Local`=`true`无关紧要，因为它是部署阶段设置，我们在编译阶段本身就失败了！发回以防万一它可以帮助其他人...

# javascript - JavaScript：将孩子的原型分配给自己？

> ID：12061015
> 
> 赞同：4
> 
> 时间：2012-08-21T18:37:58.153
> 
> 标签：javascript, jquery, prototype

我对遇到的一行 JavaScript 代码有点困惑，我想了解它的用途：

```
(function ($, window) {

    var example;

    example = function (a, b, c) {
        return new example.fn.init(a, b, C);
    };

    example.fn = example.prototype = {
        init: function (a, b, c) {
            this.a= a;
            this.b= b;
            this.c= c;
        }    
    };

    example.fn.init.prototype = example.fn; //What does this line accomplish?

    $.example = example;

}(window.jQuery, window)); 
```

据我了解，有问题的行是将子对象的原型分配给自身，这实际上是基本示例对象的原型……为什么要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:09:06.693

您问题中的代码示例实现了一个多功能函数/对象，其方式与 jQuery 对其`jQuery`（通常别名为`$`）对象的方式相同。

使用函数创建的对象`example()`实际上是由`example.fn.init()`构造函数实例化的。`example`将' 原型分配给`example.fn.init`' 可确保由 公开的成员`example`也由 由 实例化的对象公开`init()`。

jQuery 源代码的相关部分是：

```
// Define a local copy of jQuery
jQuery = function( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
}

jQuery.fn = jQuery.prototype = {
    constructor: jQuery,
    init: function( selector, context, rootjQuery ) {
        // Actual implementation of the jQuery() function...
    }
    // Other jQuery.fn methods...
};

// Give the init function the jQuery prototype for later instantiation
jQuery.fn.init.prototype = jQuery.fn; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:12:52.943

看起来整个定义`example.fn`完全没用。（也许它是为了模仿[jQuery fn 对象](http://docs.jquery.com/Plugins/Authoring)？）

似乎作者希望以下这些调用会产生相同的结果：

```
var x = $.example(a, b, c); // Build by function call
var y = new $.example.fn.init(a, b, c); // Build by a constructor call 
```

As`example`和`example.fn.init`具有相同的原型，`x`并且`y`上面定义的将具有相同的接口。以一种麻烦的方式，IMO。

可以使用更简单的语法（也称为*自调用构造函数模式*）在函数调用中强制执行“类构造函数”行为：

```
function example(a, b, c) {
    if (!(this instanceof example)) {
        return new example(a, b, c);
    }

    this.a = a;
    this.b = b;
    this.c = c;
}

var x = example(a, b, c); // Constructor invoked by function call
var y = new example(a, b, c); // Constructor invoked explicitly 
```

# php - 将我的登录系统连接到我的好恶系统

> ID：12061021
> 
> 赞同：0
> 
> 时间：2012-08-21T18:38:19.147
> 
> 标签：php, mysql, web-applications

我对整个网络开发很陌生。但是，我正在创建一个非常常见的网站来宣传我的音乐。

我已经有一个登录系统和一个喜欢/不喜欢系统。我遇到的问题是当我有一个虚拟用户登录时，我无法评价喜欢或不喜欢的项目。当我创建喜欢/不喜欢功能时，我没有合并登录系统，因为当时我不知道如何。

除此之外，我想知道如何让会员姓名显示，即使他们在我网站内的博客上发布。任何人都可以为我的问题提供一些建议吗？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:58:27.947

当您点击“喜欢”或“不喜欢”时，您必须调用 AJAX 函数来检查用户是否已登录。其结果将显示在弹出的 DIV 中。如果您想要演示，请告诉我。谢谢。

# svn - SVN 加载 ./myNewRepo < ./myOldRepo.dump -- 无法打开文件“myNewRepo/format”？

> ID：12061024
> 
> 赞同：11
> 
> 时间：2012-08-21T18:38:31.910
> 
> 标签：svn, version-control, svnadmin, version-control-migration, svndump

我正在尝试将旧存储库（我们称之为`myOldRepo`）迁移到新存储库（`myNewRepo`）。

我有一个旧 repo 的 svndump `myOldRepo.dump`，. 我已经检查了我的新存储库，`myNewRepo`. 两者都在同一个目录中。我正在尝试使用以下命令将旧的 repo 转储加载到新的 repo 中：

```
svnadmin load ./myNewRepo < ./myOldRepo.svndump 
```

这给出了以下错误：

```
svnadmin: Can't open file 'myNewRepo/format': No such file or directory 
```

我已经使用 SVN 很长时间了，但`format`在我的任何存储库中都没有看到文件。`format`myNewRepo 中的预期是什么？

我还尝试在 myNewRepo 目录中创建一个空`format`文件 ( )。`touch format`然后，当我执行`svnadmin load`命令时，我得到以下信息：

```
svnadmin: Can't read file 'myNewRepo/format': End of file found 
```

我看过[与此类](https://stackoverflow.com/questions/3843534/merging-svn-repositories-i-loaded-old-repository-onto-an-existing-repository-h)[似的](https://stackoverflow.com/questions/8852361/svn-load-new-repository)[帖子](http://forums.apisnetworks.com/archive/index.php/t-186.html) [，](https://stackoverflow.com/questions/4598254/svn-create-a-dump-file-of-a-folder) [但](https://stackoverflow.com/questions/1579432/svn-dump-format-documentation) 我还没有找到完全回答我的问题的帖子。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-21T20:44:22.133

您需要将转储直接加载到**存储库中，而不是子文件夹**。您必须指定存储库的路径，而不是签出的工作副本。试试这个：

```
svnadmin create ./myNewRepo
svnadmin load ./myNewRepo < ./myOldRepo.svndump 
```

这应该可以解决问题..

# android - android中的浮动列表视图？

> ID：12061027
> 
> 赞同：0
> 
> 时间：2012-08-21T18:38:44.783
> 
> 标签：android

是否可以在 android 中创建一个未固定到特定位置的列表视图，并且用户可以在手势上移动列表视图一些可以在屏幕上任何位置移动的浮动列表视图？我尝试找到它但找不到一些链接。有人对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:57:42.637

我会使用布局中的边距移动列表视图。

大纲：

*   覆盖 OnTouch，并基于`event.getX()`and `event.getY()`，更新 listview 的边距如下：

**如果父级是相对布局：**

```
RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams)mListView.getLayoutParams();
lp.leftMargin = event.getX();
lp.topMargin = event.getY();
mListView.setLayoutParams(lp); 
```

**将 dispatchTouchEvent 添加到您的活动中，以便将来自列表视图的事件传递给 onTouch：**

```
@Override
public boolean dispatchTouchEvent(MotionEvent ev) {
    onTouchEvent(ev);
    return super.dispatchTouchEvent(ev);
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T21:02:44.733

您可以通过在列表视图上设置 OnTouchListener 并覆盖它的 onTouch() 方法来实现此目的。在 onTouch() 方法中，您必须处理触摸事件，例如 (ACTION_DOWN, ACTION_MOVE)。以下是处理触摸事件的方法：

```
@Override
public boolean onTouch (View v, MotionEvent event)
{
    switch(event.getAction() & MotionEvent.ACTION_MASK)
    {
        case MotionEvent.ACTION_DOWN:
            start.set(event.getX(), event.getY());     //saving the initial x and y position
            mode = DRAG;
            break;
        case MotionEvent.ACTION_MOVE:
            if(mode == DRAG) {
                float scrollByX = event.getX() - start.x;    //computing the scroll in X
                float scrollByY = event.getY() - start.y;    //computing the scroll in Y
                v.scrollBy((int)scrollByX/20, 0);            
            }
            break;
    }   
    return false;
} 
```

当用户将手指放在屏幕上时，触发 ACTION_DOWN 事件；当用户在屏幕上拖动手指时，触发 ACTION_MOVE 事件。因此，拖动事件是 ACTION_DOWN 和 ACTION_MOVE 的组合。
一旦有了 scrollX 和 scrollY 值，您就可以通过将这些值传递给 View 类的 scrollBy() 方法来在屏幕上移动视图。

> 在代码中，有两点需要注意：

*   首先是我将 0 作为 scrollY 的值传递，因为它会阻止列表视图同时被拖动和滚动。
*   第二个是返回值为 false，因为您希望 android 处理列表项的滚动

[在这里你可以找到完整的代码](http://pastebin.com/eZARQMCj)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:42:10.340

虽然很难维护，但[AbsoluteLayout](http://developer.android.com/reference/android/widget/AbsoluteLayout.html)允许您在 (x,y) 坐标中指定位置。您只需在 AbsoluteLayout 中声明您的 ListView，在 java 代码中获取它的句柄，您可以在其中拦截点击，然后设置新坐标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T19:05:26.220

在 Android 框架中，“floating”这个词通常是 new 的同义词`Window`（例如 a `Dialog`）。这在某种程度上取决于您的最终目标是什么，但是如果您想创建一个`ListView`浮动在层次结构中的其余内容上的 a ，您可以轻松隐藏和显示，您可能应该考虑将该视图包装在 a`PopupWindow`中，它有方法让您可以轻松地使用 和 显示窗口，`showAsDropdown()`并`shotAtLocation()`在可见时移动它`update()`。

`Spinner`这就是较新版本的 SDK 为和创建弹出列表的方式`Menu`

# php - 为什么我将 .csv 文件的 mime 类型作为“application/octet-stream”？

> ID：12061030
> 
> 赞同：45
> 
> 时间：2012-08-21T18:39:13.727
> 
> 标签：php, csv, http-headers, mime-types, file-format

我正在开发一个必须将 excel 文件导入 MySQL 的 PHP 应用程序。所以我需要将 excel 文件转换为 .csv 格式。但是当我想使用它来获取它的类型时`$_FILE['something']['type']`，我得到`application/octet-stream`它的mime-type；
我认为这里有问题。因为我将下面的列表收集为 .csv 文件 mime 类型：

```
text/comma-separated-values,  
text/csv,  
application/csv, 
application/excel, 
application/vnd.ms-excel, 
application/vnd.msexcel 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-21T19:21:32.077

在这种情况下，官方的 HTTP 规范总是很有帮助的。从[RFC 2616 7.2.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec7.html#sec7)（我的重点补充）：

> 任何包含实体主体的 HTTP/1.1 消息都应该包含定义该主体的媒体类型的 Content-Type 头字段。当且仅当媒体类型不是由 Content-Type 字段给出时，接收者可以尝试通过检查其内容和/或用于识别资源的 URI 的名称扩展来猜测媒体类型。**如果媒体类型仍然未知，接收者应该将其视为类型“application/octet-stream”**。

您的问题的原因是接受文件上传的服务器本身不知道上传的文件类型。为什么？因为它依赖于发送文件的 HTTP 消息来指定一个`Content-Type`标头来确定确切的 mime 类型。浏览器可能没有发送标头，并且服务器已经按照上面的官方 HTTP 规范摘录`Content-Type`进行了假设。`application/octet-stream`上传文件的客户端也可能选择不确定它正在上传的文件的 MIME 类型，并`Content-Type: application/octet-stream`自行发送标头。

现在，当我们结合关于 POST 文件上传[^(*文档*)](http://www.php.net/manual/en/features.file-upload.post-method.php)[的PHP 手册条目](http://www.php.net/manual/en/features.file-upload.post-method.php)*考虑这一点时，我们会看到以下内容：*

 *> `$_FILES['userfile']['type']`
> 
> *文件的 MIME 类型（如果浏览器提供此信息）。一个例子是“image/gif”。然而，这种 mime 类型在 PHP 端没有被检查，因此不要认为它的价值是理所当然的。*

所以可以看到，即使`$_FILES['userfile']['type']`是指定的，也只对应`Content-Type`客户端发送的header。这些信息很容易被伪造，不应依赖。如果您需要*确保*上传的文件属于特定类型，则必须自己验证。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-21T18:41:43.470

`application/octet-stream`如果 mime 类型未知，则始终使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:18:59.147

`$_FILE['something']['type']`由浏览器/用户操作系统填充，因此不可靠。您应该在服务器端自行检查以确定上传的文件是否为所需格式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-21T18:43:40.557

您列出的所有 mime 类型都显示为[http://fileext.com/file-extension/CSV上 csv 文件的常见 mime 类型](http://filext.com/file-extension/CSV)

所以基本上我会说它归结为哪个程序生成了 .csv 文件以及他们决定使用哪种 mime 类型。*

# css - 将文本行底部对齐

> ID：12061034
> 
> 赞同：0
> 
> 时间：2012-08-21T18:39:30.317
> 
> 标签：css

CSS将文本对齐在行的中间，但我想让文本与行的底部对齐。最好用图片解释：

应该是这样： [https ://lh5.googleusercontent.com/-L1TBqTxEVHI/UDPVEOnFY7I/AAAAAAAAAH4/GHZHt776wmg/s145/CD-Manual_Stand_Mai_2011_Verlinkungen.pdf%2520%2528Seite%2520135%2520von%2520248%2529.jpg](https://lh5.googleusercontent.com/-L1TBqTxEVHI/UDPVEOnFY7I/AAAAAAAAAH4/GHZHt776wmg/s145/CD-Manual_Stand_Mai_2011_Verlinkungen.pdf%2520%2528Seite%2520135%2520von%2520248%2529.jpg)

就像这样： [https ://lh6.googleusercontent.com/-0SiQqqkHD9k/UDPVNvTA2NI/AAAAAAAAAIA/2VudybQxnDE/s45/CSSEdit.jpg](https://lh6.googleusercontent.com/-0SiQqqkHD9k/UDPVNvTA2NI/AAAAAAAAAIA/2VudybQxnDE/s45/CSSEdit.jpg)

垂直对齐不起作用，它只适用于嵌套元素而不是整个文本。诀窍在哪里？:)

这是代码：[jsfiddle.net/vmadd](http://jsfiddle.net/vmadd)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:41:11.603

尝试`line-height: 100%`
应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:03:14.123

我真的不明白你在追求什么。没有基线对齐之类的东西或标准css中的东西（据我所知）。我真的不知道布局会发生什么变化。

至于页脚，如果您只想在行和文本之间留出更多空间，有很多方法可以实现这一点。像这样的东西：

```
div.layoutGridBottom p {
    padding-top: 10mm;
} 
```

应该做的伎俩。或者更好的是，为你想要一些顶部填充的东西声明一个特殊的类，并将它应用到你想要的元素上。如前所述，有很多方法可以实现这一点（行高、上边距、插入空白 div、使行底部有填充，...）如果你自己写了那个 css，我很惊讶这会给你带来问题...

# php - 访问 MySQL 查询的各个部分

> ID：12061046
> 
> 赞同：2
> 
> 时间：2012-08-21T18:40:08.773
> 
> 标签：php, mysql

如何访问我的 mysql_query 的特定部分？我正在尝试使用下面的代码执行此操作，但无济于事。非常感激任何的帮助！

```
$rs = mysql_query("SELECT id,type FROM stuff WHERE stuffID = '$stuffID'");

   echo $rs['type']; <------ tried here

   // Add the rows to the array 
   while($obj = mysql_fetch_object($rs)) {
   $arr[] = $obj;
   }
 echo $arr['type']; <----- also tried here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:41:59.330

在获取该行之前，您无法访问该行。

```
while($obj = mysql_fetch_object($rs)) {
    // NOTE: $arr[] = $obj, is the same as array_push($arr, $obj),
    // I dont think you want that
    $arr = $obj; // save the row

    echo $obj->type; // you are fetching an object, not an array
}

echo $arr->type;  // you can access it here too 
```

# javascript - Require.js 不在浏览器中更新

> ID：12061054
> 
> 赞同：4
> 
> 时间：2012-08-21T18:40:45.307
> 
> 标签：javascript, requirejs

我在使用 require.js 开发应用程序时遇到了一些问题。每当我编辑一个 javascript 文件并将其保存在我的代码编辑器中时，浏览器似乎都没有注册更改。我可以刷新页面，但它仍然运行旧代码。通过关闭选项卡并重新打开页面来解决问题，但必须有更简单的方法来做到这一点。有没有其他人遇到过这个问题，你是如何解决的？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T18:41:36.907

将此添加到您指定为的文件中`data-main`（在大多数情况下，`main.js`）。在第一行添加：

```
require.config({
    urlArgs: "ts="+new Date().getTime()
}); 
```

请注意，应将其删除以进行生产。

# wpf - WPF：Horizo ntalAlignment=Stretch、MaxWidth 和 Right 同时对齐？

> ID：12061060
> 
> 赞同：1
> 
> 时间：2012-08-21T18:41:17.410
> 
> 标签：wpf, alignment, stretch, dockpanel

或多或少与此处相同的问题，但右对齐：[Horizo​​ntalAlignment=Stretch、MaxWidth 和左对齐同时？](https://stackoverflow.com/questions/280331/wpf-horizontalalignment-stretch-maxwidth-and-left-aligned-at-the-same-time)

如何让这个蓝色文本框随着窗口的大小而增长，最大宽度为 200 像素，并且右对齐？

这就是我所拥有的，但它居中而不是右对齐。为什么？

```
 <DockPanel Background="LightSteelBlue">
        <TextBox Margin="3 3 3 3" DockPanel.Dock="Right" MaxWidth="200" />
    </DockPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:45:04.150

让我们回答我自己的问题。这行得通，但它不是一个好的代码的例子。必须有更好的解决方案。

```
<Grid Background="LightSteelBlue">
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition Width="1000*" MaxWidth="200"/>
        </Grid.ColumnDefinitions>

        <TextBox Margin="3 3 3 3" Grid.Column="1"  />
    </Grid> 
```

# javascript - 如何在 jquerymobile 和 phonegap 中正确使用快速按钮？

> ID：12061061
> 
> 赞同：0
> 
> 时间：2012-08-21T18:41:18.650
> 
> 标签：javascript, android, iphone, jquery-mobile, cordova

需要在 Phonegap 应用程序中使用 onClick attr 加速链接。

我想使用我在这里找到的快速按钮插件： [https ://developers.google.com/mobile/articles/fast_buttons](https://developers.google.com/mobile/articles/fast_buttons)

但我不知道，如何正确使用这个插件我应该在 pageinit 之后添加它还是在哪里添加？

也许这是一个很愚蠢的问题，但如果我试图找到一些例子，没有运气。

你可以添加一些人在这里添加一些例子，如何解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T19:16:30.473

如果您知道用户不会滚动，则 (or ) 事件非常有用`touchstart`。`touchend`这实际上是`click`事件在移动设备上需要很长时间才能解决的原因，设备正在等待查看用户是否在滚动或单击。

这将执行得非常快，因为调度此事件没有延迟：

```
$('#myButton').on('touchstart', function () {
    //run click code now
}); 
```

您还可以使用 jQuery Mobile 的`vclick`事件来尝试使用本机触摸事件，但它的主要问题是您可以使用调度多个事件，`vclick`因此您应该设置超时以一次只允许单击一次，例如：

```
var clickOk = true;
$('#myButton').on('vclick', function () {
    if (clickOk === true) {
        clickOk = false;
        setTimeout(function () {
            clickOk = true;
        }, 350);
        //run click code now
    }
    return false;
}); 
```

这将允许事件处理程序每​​ 350 毫秒仅运行一次，这将处理正在调度的多个事件，因为第二个事件将被忽略。

我会将这些事件处理程序设置在一个委托事件处理程序中，该事件处理程序在伪页面被初始化时运行：

```
$(document).on('pageinit', '.ui-page', function () {
    //bind "fast-click" event handlers now, use "$(this).find(...)" to only bind to elements of the current pseudo-page
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T20:00:05.073

[快速点击](https://github.com/ftlabs/fastclick)呢？

FastClick 是一个简单易用的库，用于消除移动浏览器上物理点击和点击事件触发之间的 300 毫秒延迟。目的是让您的应用程序感觉更少滞后和更灵敏，同时避免对您当前逻辑的任何干扰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:49:18.200

Jiri 如果还不算太晚，我必须为我的应用程序做同样的事情，并且需要将参数传递给函数。我通过将参数放在按钮的 id 中（用下划线分隔）并使用这个函数从每个单击的按钮中获取 id，类名为“clickbutton”，并将其拆分为单独的参数。

```
$('.clickbutton').live('click', function(event) {
    event.preventDefault();
var id = $(this).attr('id');
var parts = $(this).attr('id').split("_");
    var item = parts[0];
    var button = parts[1];
    var type = parts[2];
console.log(item+button+type);
    getItemCondition(item,type);
return false;
}); 
```

尽管如此，JQM 点击事件仍然存在无响应问题！

# ios - iOS：在“自动 TabBar 切换”方法上

> ID：12061073
> 
> 赞同：0
> 
> 时间：2012-08-21T18:41:45.337
> 
> 标签：ios

我正在尝试以编程方式切换选项卡并确保在切换时将相应的导航控制器弹出到根视图控制器。是否有在手动或以编程方式切换标签栏时调用的方法？

注意： `-(void)tabBarController:didSelectViewController:`仅在手动切换标签栏时调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:52:24.777

您也可以尝试以编程方式调用 didSelectViewController。在这里查看巴比迪的答案：

[如何以编程方式触发方法“tabBarController：didSelectViewController：”？](https://stackoverflow.com/questions/7453530/how-to-trigger-method-tabbarcontrollerdidselectviewcontroller-programmatical)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:52:07.493

FWIW，另一种方法是在 selectedViewController 上使用观察者。

```
// Add Observer
// Note: tabBarController.selectedIndex is not observed as it does not call observeValueForKeyPath on manual switch
[self.tabBarController addObserver:self forKeyPath:@"selectedViewController" options:NSKeyValueObservingOptionNew context:@"changedTabbarIndex"];

// Method for Handling Observations
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    NSString *action = (__bridge NSString*)context;
    if([action isEqualToString:@"changedTabbarIndex"])
    {
        // Stuff to do on selected Tab changed
    }
}

// Change selectedViewController
[self.tabBarController setSelectedViewController:[[self.tabBarController viewControllers] objectAtIndex:kSomeTab]]; 
```

更多信息： [当我触摸标签栏项目时，我没有收到任何通知](https://stackoverflow.com/questions/9293054/i-didnt-get-any-notifications-when-i-touched-on-tabbar-items)

# iphone - Xcode中给UIPickerView添加搜索功能，或者打开UITableView 中的菜单是否可以添加一个搜索栏来查找由 <select>菜单标记生成的 UIPickerView 中的值？我有一个 UIWebView 应用程序，它有一个带有 100 多个 <option>标签的</option></select> 菜单，并且 iPhone 打开一个 UIPickerView，但是很难选择一个选项，我认为搜索栏是最简单的方法！我对数据库详细信息的原始问题： <se< h1="">> ID：12061079
> 
> 赞同：0
> 
> 时间：2012-08-21T18:42:16.313
> 
> 标签：iphone, xcode, search, webview, uipickerview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T22:59:56.397

而不是通过应用程序过滤，我决定使用这个： http: [//www.lessanvaezi.com/filter-select-list-options/](http://www.lessanvaezi.com/filter-select-list-options/)

这种方式使用文本`input`来过滤使用 jQuery 的结果。</se<>

# c# - 这些是正确的正则表达式吗

> ID：12061080
> 
> 赞同：0
> 
> 时间：2012-08-21T18:42:21.557
> 
> 标签：c#, regex

我正在尝试制作一些正则表达式字符串以在我的语法荧光笔中使用，如果我第一次使用它们并且我遇到了很多困难...

前四个是，我将有一个指定的字符后跟任意数量的数字，匹配它。

*   我最好的方法是`"G[0-9]|G[0-9][0-9]|G[0-9][0-9][0-9]"`匹配`G#`, `G##`, 或`G###`

但我想在 G 后面加上任意数量的数字。

接下来的三个是，我将有一个字符（X、Y、Z 或 P），如果后面没有字母或符号，我想匹配它

*   `"[X|Y|Z|P][0-9]"`

接下来的几个更难，匹配`"#11.11=11.11"`其中 1 是一个数字，并且在井号、句点和等号之间可以有任意数量的数字。并且期间不必存在也可以是`"#11=11"`或`" #1.1=11"`或`"#11=1.1"`

*   我不知道...`"#[0-9][ |.] ..."`

`" ' "`换行符之后和之间的任何内容

*   `'[A-Za-z0-9]\n"` 但我知道这只会给我一个角色......

我认为最容易的是介于两者之间`()`或`[]`

*   `"(*) | [*]"`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:46:27.827

1> G[0-9]{1,3}

2> 不，这是错误的。正确的是 [XYZ][0-9] （您不使用 OR 运算符 (|)，而只需将字符并排写在方括号内）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:48:53.080

对于 G 后面有任意位数

```
\b([Gg]\d+)\b 
```

这匹配一个字边界 (\b)，后跟一个较低或较高的 G [Gg]，后跟 1 个或多个 (+) 数字 (\d)，然后是一个字边界 (\b)

> 接下来的三个是，我将有一个字符（X、Y、Z 或 P），如果后面没有字母或符号，我想匹配它

这个有点难

```
\b[XYZP]([\W]|_) 
```

这匹配一个 XYZ 或 P 后跟一个非单词字符 \W，（单词字符通常是 az、0-9 和下划线），所以在说我们不需要单词字符之后，我们添加 _ 是允许。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T18:49:05.250

> 我认为最简单的是两个 () 或 [] 之间的任何东西
> 
> ```
> "(*) | [*]"? 
> ```

`@"\([^(]*\)"`和`@"\[[^\[]*\]"`

这意味着：一个左括号 - 然后是任意数量的不是左括号的字符 - 和一个右括号。

需要斜杠来向正则表达式引擎指示括号应该按字面意思处理。

`@`- 逐字字符串 - 反过来通知 C# 这些斜杠应该按字面意思理解，而不是作为 C# 转义字符。

> `" ' "`换行符之后和之间的任何内容

相似地：`@"'[^']*\n"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T18:49:34.480

对于第一个，您可以使用此 Regex ：

```
^G\d+ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T18:53:34.457

你真的应该看看如何使用正则表达式。话说回来：

> 我将有一个指定的字符后跟任意数量的数字，匹配它

```
G\d+ 
```

> 我将有一个字符（X、Y、Z 或 P），如果它后面没有字母或符号，我想匹配它

```
(?<!\w)[XYZP][0-9] 
```

> 接下来的几个更难，将“#11.11=11.11”设为蓝色

嗯？

> “'”之后和换行符之间的任何内容

```
'(.+?)\n 
```

> 我认为最简单的是两个 () 或 [] 之间的任何东西

```
\(.+?\)|\[.+?\] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T18:54:45.540

快速而肮脏，但使用正则表达式测试

1) G[0-9]{1-3} - '{1-3}' 指定最后一个符号出现一到三次。

2) ((.*|)) - 你在 '(' 和 ')' 之前放置一个 '\' 作为转义字符

3) [0-9]1*(.|)1*=1*(.|)1 - 这符合你的三个例子

4) \'.*\n - 我认为这应该可以工作......'\n' 代表一个新行字符，对吗？

5) ((|[).*()|]) - 这个又有转义字符

再次......又快又脏。Regexpal.com 是您的朋友

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-21T18:54:59.703

1.  `G\d+`
2.  `[XYZP](?=\d)`
3.  `#(\d+(\.\d+)?)=(\d+(\.\d+)?)`
4.  `'.*?\n`
5.  `\(.*?\)|\[.*?\]`

[正则表达式解释在这里。](http://rick.measham.id.au/paste/explain.pl)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-21T18:55:15.973

第一个：

```
G[0-9]+ 
```

在正则表达式`+`中表示至少 1 个或多个（重复前面的“字符”）。您也可以使用`*`无或任意次数的重复。

第二个可能是这样的：

```
^(X|Y|Z|P)$ 
```

这实际上仅在它位于行首并且后面*没有字符时才匹配。*如果您希望它位于任何位置并且仅排除其后面的某些字符，请修改以下内容：

```
[XYZP][^0-9a-z] 
```

这是 X 或 Y 或 Z 或 P 后跟 NOT 0-9 和 NOT az

请注意，我在第一个示例中的括号中使用了 OR 字符`|`，而不是在方括号中。

对于第三个：

```
#[0-9]+\.[0-9]+=[0-9]+\.[0-9]+ 
```

可能不是 100% 正确，我总是混淆何时转义哪些字符。你可能需要逃跑`#`并且`=`.

对于最后一个：

```
(\(.*\)|\[.*\]) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-21T19:04:46.143

我将 perl 用于正则表达式，但希望它应该与您正在寻找的相同。

对于第一个，`G[0-9]+`应该工作。方括号表示正则表达式仅查找括号内的一个字符（字符为 0 到 9），而`+`在它之后的右边表示它查找一个或多个匹配项。

第二个有点棘手，但我会使用`\s[XYPZ]`. 方括号的功能与以前相同，仅匹配 X、Y、P 或 Z 之一。也`\s`匹配任何空白字符（制表符、空格、换行符等）。

对于第三个，我会尝试`#[0-9]+\.?[0-9]+=[0-9]+\.?[0-9]+`。如果我们从左到右走，我们会遇到`\.?`新的。`\.`匹配文字句点（您必须使用反斜杠对其进行转义，因为句点本身意味着它可以匹配任何字符之一）。问号表示句点可以存在或不存在（匹配零个句点或一个句点实例）。

第四个：`'.*\n`。句点本身和星号的组合意味着它将匹配零个或多个字符，字符可以是任何字符。我不太确定您是否需要转义单引号。

对于第五个，`(\(.*\)|\[.*\])`应该做的伎俩。您需要转义`[]()`括号内的内容，因为它们本身就意味着某些东西。此外，`|`表示或，因此正则表达式可以匹配栏左侧或右侧的任何内容。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-21T19:09:06.490

您可以用不同的方式指定重复。术语后的星号“*”表示将该术语重复零次、一次或多次。加号“+”表示将该术语重复一次或多次。您还可以使用 指定数字范围`{n,m}`。在您的情况下，表达式将是

```
G\d{1-3} 
```

哪里`\d`是数字。

* * *

使用此表达式，您可以匹配不位于后缀之前的位置

```
find(?!suffix) 
```

我不确定你所说的符号是什么意思

```
[XYZP](?![a-zA-Z specify your symbols here]) 
```

* * *

对于磅数

```
\#\d+(\.\d+)?=\d+(\.\d+)? 
```

`\#` 英镑符号
`\d+` 至少一位数字 `(\.\d+)?` 可选 ( `?`) 句点后接至少一位数字 最后是等号后接另一个数字

* * *

"'" 和 \n 之间的所有内容。在此处使用此模式，它会在前缀和后缀之间找到一个位置。

```
(?<=prefix)find(?=suffix)

(?<=').*(?=\n) 
```

`.*`尽可能多次表示任何字符。或者你可以使用

```
(?<=').*?(?=\n) 
```

`.*`表示尽可能少的任何字符，如果太多`\n`的话。还要小心 RegexOption.Multiline。根据其设置，您必须使用`$`而不是测试行尾`\n`。

* * *

对于括号 () 或 []，您可以再次使用相同的模式

```
(?<=prefix)find(?=suffix)

(?<=\().*?(?=\))|(?<=\[).*?(?=]) 
```

`|`替代方案在哪里。

# azure - 根目录 Azure 的网络服务权限

> ID：12061081
> 
> 赞同：1
> 
> 时间：2012-08-21T18:42:23.337
> 
> 标签：azure, permissions, azure-web-roles

我想在我的 Azure webrole 启动时授予网络服务帐户修改权限（根项目目录），有人知道这样做的方法吗？修改后，我将重置此值以确保安全。主要目的是我需要修改 webconfig 以根据暂存/生产环境差异在多个节点上更改 wcf 地址。

我已经测试了该例程，一旦授予网络服务帐户权限，它将正确运行。我不介意这是否是首次启动修改，但不幸的是，在部署新版本时目录权限会发生变化，因为它会交换站点所在的 VHD...

任何帮助都是极好的...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:25:09.080

如果您的目标是更新 web.config 以添加/修改与您的 Azure 环境相关的设置，您可以使用 Web 管理模块通过将适当的代码添加到 Role Startup() 例程来执行此操作。我相信这样你会有一个更简单、更干净的解决方案。

该过程在[此博客](http://blog.elastacloud.com/2011/05/13/azure-howto-programmatically-modify-web-config-on-webrole-startup/)中定义，可能还有其他人可能有更好的方法来做到这一点。

# svn - 有没有办法让 global-ignores 指示特定的文件，或者只在特定目录中的文件名模式？

> ID：12061083
> 
> 赞同：0
> 
> 时间：2012-08-21T18:42:54.400
> 
> 标签：svn

我有一个不想删除但不属于 repo 的文件。我不想为它提交一个忽略属性，以免影响其他可能不想忽略它的用户，如果他们在他们的系统上拥有它。我不想只是不提交忽略，因为它只是让我不得不不顾一切地忽略忽略道具。

我在配置文件中使用了 global-ignores，我可以按名称忽略它，即：`file.txt`但是当我有另一个我不想忽略的名为 file.txt 的文件的那一天呢？所以我尝试为它提供一个路径名，就像这样：`folder/file.txt`因为我在 Windows 上`folder\file.txt`并且认为可能正在发生某种正则表达式`folder\\file.txt`

这些似乎都不起作用，即使我一直`c:\repo\folder\file.txt`使用斜杠、反斜杠或转义的反斜杠来驱动字母。

那么有没有办法在不使用属性的情况下专门引用这个文件的忽略？

此外，文档将这些模式称为“空格分隔的 glob”，从这个意义上说 glob 对我来说是一个新术语，任何人都可以阐明定义吗？考虑到 glob 可用的许多非 IT 定义，Google 在这里不是我的朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:42:36.957

让我们一次过一件事情：

忽略某些内容只是一种帮助您不要意外将您不想要的内容放入存储库中的方法。它可以是*全局*的，也可以是特定目录的本地文件。

忽略 Subversion 中的某些内容会做两件事：

*   执行时不会列出`svn status`
*   如果您执行此操作，则不会添加`svn add *`

差不多就是这样。事实上，忽略仅适用于***不在***您的存储库中的文件。您不能忽略已添加到存储库中的文件。

### 为什么要全局忽略某些内容？

假设我做 C 开发。我获取带有 *.c 后缀的文件，并将它们编译成带有 *.o 后缀的文件。我不希望这些 *.o 文件在我的目录中，所以我设置了一个全局忽略。

### 为什么您只想忽略单个目录中的某些内容？

假设我构建并执行一个程序，它会`output.txt`在我的目录中创建一个名为的文件。我不希望将其添加到我的存储库中，因此我`svn:ignore`在该目录中设置了*忽略*该文件。

我用 Maven 构建东西，Maven 创建了一个*目标*目录，在我所有的 Maven 项目中，我告诉 Subversion 忽略那个*目标*目录。

*空格分隔的 glob*是 什么意思？

通配符是一种廉价而简单的正则表达式形式，如语法。你可能一直在使用它。它主要用于命令行。这是使用通配符：

```
$ ls *.txt 
```

因此，所有*以空格分隔*的 glob都意味着是一堆*glob*表达式，例如上面的，无论它在哪里，你都想忽略它。你用空格而不是逗号分隔它们：

对：

```
global-ignores="*.o *~ *.class" 
```

错误的：

```
global-ignores="*.o, *~, *.class" 
```

还有一件事，忽略（无论是 global 还是 by `svn:ignore`）中的 glob（即文件规范）不能有目录前缀。您不能全局忽略目录，但可以忽略`svn:ignore`目录。例如，我使用 Maven，它在名为*target*的目录下构建所有内容。我可以`svn:ignore`在目标目录上设置一个。

所以，回到你的问题。如果每个人都有这个文件，但没有人应该将它添加到 Subversion，那么应该在那个目录中忽略它。所有这一切都是为了防止有人意外地将它添加到 Subversion。它不会在他们的视野中隐藏它。

如果事实上，最后，你可以忽略忽略。即使您之前说过要忽略它们，您也可以通过简单地指定文件来提交和添加文件。

如果你真的想确保不会意外提交不应该提交的文件，你应该使用我的[预提交](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)触发器。这允许您指定不应提交的内容和位置。您可以使用通配符语法或正则表达式语法。例如：

```
[file Don't allow people to add foo files to the bar directory]
file=**/bar/foo.*
access=no-add
users=@ALL

[file Don't allow people to add bar files to the foo directory]
match=/bar/foo.*$
access=no-add
users=@ALL 
```

第一个是通过*glob*设置的。第二个是通过*正则表达式*设置的。

希望这能回答你的问题。

# asp.net - 选中复选框后检索 ASP.net 中的字段值

> ID：12061088
> 
> 赞同：0
> 
> 时间：2012-08-21T18:43:13.070
> 
> 标签：asp.net

![检索字段详细信息](../Images/7d35b1cc62eccdc2fa29c3c8345b22c0.png)

大家好 - 请参考随附的屏幕截图。状态和角色字段包含在每个复选框的面板中。

单击提交按钮时，应仅选取所选复选框的数据。您能否提供一个伪代码帮助如何检索第一个和第三个复选框的数据（状态和角色）。

这些控件保存在一个表中。没有使用网格视图。

谢谢您的帮助。夜叉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:49:15.297

所有数据都将返回到服务器，但这不是问题，只要按照规范进行操作即可。

我假设复选框是硬编码的`<asp:Checkbox />`或`<input type="checkbox" runat="server" />`控件，那么它很简单：

那么假设`<input type="checkbox" runat="server" id="reporting" />`：

```
public override void OnLoad(Object sender, EventArgs e) {
    if( this.reporting.Checked ) {
        String status = this.reportingStatus.Value;
        String role   = this.reportingRole.Value;
        // your logic here
    } else if( this.assignment.Checked ) { 
        // etc
    } else... // and so on
} 
```

# umbraco - 有没有办法添加基本上是现有数据类型的分组的 Umbraco 自定义数据类型？

> ID：12061089
> 
> 赞同：10
> 
> 时间：2012-08-21T18:43:17.233
> 
> 标签：umbraco

在许多不同的文档类型上，我必须添加相同的 3 种原生 Umbraco 数据类型

1.  内容选择器
2.  文本字符串
3.  文本字符串

有人建议我看看是否有一种方法可以创建一个新的自定义数据类型，基本上将这 3 种数据类型包装成一个新的数据类型。

我查看了[nibble.be 的网站](http://www.nibble.be)，发现有几种不同的方法可以创建自定义数据类型（使用 usercontrol 包装器或 3 类方法）。但是，我不确定用于对现有数据类型进行分组的自定义数据类型是否正确。

一方面，我们在 Umbraco 旁边使用 MVC，并大量使用 Razor 视图。由于文档类型属性别名用于从内容页面从 Umbraco 获取值，因此我看不出这仍然是可能的，或者您将如何获取具有嵌入数据类型的自定义数据类型的属性值。

是否有一种*工作*方式或*更好*的方式来完成这个解决方案，因为必须在任何需要的文档类型上添加相同的字段？我虽然关于仅具有这 3 种数据类型（内容选择器和 2 个文本字符串）的文档类型父级的分层方法，但这意味着必须将页面所需的任何文档类型放在此父文档类型下，只是为了继承这一事实这组属性。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T19:31:03.750

**如果您希望将多个属性嵌入到单个数据类型中：**

有许多可用的嵌入式数据类型；[DataType Grid](http://ucomponents.codeplex.com/wikipage?title=MultipleDataTypeContainer)、[Embedded Content](http://our.umbraco.org/projects/backoffice-extensions/embedded-content)和[Repeatable Custom Content](http://our.umbraco.org/projects/backoffice-extensions/repeatable-custom-content)是我所知道的三个。这三个都将他们的信息存储为 xml，这允许通过 xslt 和 razor 轻松访问。

DataType Grid 是[uComponents](http://ucomponents.codeplex.com/)的一部分，因此正在积极开发中。它也是开源的，因此鼓励贡献。嵌入式内容和可重复的自定义内容虽然仍然有用，但似乎没有任何当前支持，因此没有改进计划。我认为它们是作为开源许可的，但据我所知，源不是公开的。

我认为您不能像在嵌入式内容（可能是功能请求）中那样对存储在 DataType 网格中的行/项目数设置限制。

在您计划推出自己的解决方案之前，请先查看其中的一些解决方案。但是，如果您仍然想编写自己的数据类型，我会推荐 Tim Geyssens 关于使用[用户控件包装器](http://www.nibble.be/?p=24)创建自定义数据类型的文章，使用[数据编辑器设置](http://www.nibble.be/?p=93)，并将[数据序列化为 xml](http://www.nibble.be/?p=100)。他的[“数据类型大师”视频](http://www.nibble.be/?p=101)也很有帮助，也涵盖了这些主题。

**如果您希望将您的资产组织成组：**

[Tom Fulton](http://our.umbraco.org/member/7606)最近发布了一种新的包/数据类型，称为[Document Type Fieldsets](http://our.umbraco.org/projects/backoffice-extensions/document-type-fieldsets)，它可能适合您的需求。它允许您在字段集中将字段组合在一起。这是一个屏幕截图：

![在此处输入图像描述](../Images/234cbb8fec0e31248868453dea619981.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-01T15:31:55.463

我意识到这是一个老问题，所以我只是为将来搜索此功能的任何人添加这个：这几乎正是我们在 Umbraco 6 中使用[Widget Builder的目的。](https://github.com/kgiszewski/WidgetBuilder)

Widget Builder 是 Umbraco 7 [Archetype](http://our.umbraco.org/projects/backoffice-extensions/archetype "原型")的前身，其核心团队正在推动它接近普遍使用。我相信它将成为核心的一部分。

在内部，WidgetBuilder 和 Archetype 将他们的数据存储为 JSON，并通过导入/导出功能将自定义数据类型从一个项目复制到另一个项目变得非常容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-13T17:29:17.443

我曾经使用 Archetype 工作了一段时间，直到我发现[嵌套内容](https://github.com/leekelleher/umbraco-nested-content/)做同样的事情但更容易使用，因为它嵌套`Document Types`而不是`Data Types`更容易使用，特别是对于内容编辑器。此外，生成的数据类型是普通的内置 Umbraco 类型，而不是在您的视图中添加新实体映射层的原型对象。

# javascript - 向上滑动跳转到页面顶部

> ID：12061091
> 
> 赞同：0
> 
> 时间：2012-08-21T18:43:27.823
> 
> 标签：javascript, jquery, jquery-ui-accordion

我有一些 jQuery 手风琴滑块，当单击以显示内容时，它们会向下滑动和向上滑动。一切正常，但如果您单击相同的链接向上滑动相同的内容，它将跳转到页面顶部。

我有

```
return false; 
```

为了防止在单击另一个滑块时它跳到页面顶部，所以不太确定要使用什么，以免它跳到页面顶部以向上滑动相同的内容。

我已经绑定添加

```
event.preventDefault(); 
```

这有效，但它在 IE9 和 IE8 中中断。

这是我所拥有的：

```
$(document).ready(function() {
$('.slider').click(function() {  
    $('.internal').slideUp('normal');
    if ($(this).next().is(':hidden') == true) {
        $(this).addClass('on');
        $(this).next().slideDown('normal');
         return false;
    }
});
$('.internal').hide();
}); 
```

HTML 示例：

```
<div class="slider"><a href="#">Slide Link 1</a></div>
<div class="internal">
    Stuff1
</div>
<div class="slider"><a href="#">Slide Link 2</a></div>
<div class="internal">
    Stuff2
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:46:33.317

链接可能有锚标签，例如`<a href="#" ...>`，尝试删除`href="#"`，如果您仍然希望它看起来像带有指针光标的链接，请使用 css：

```
a{
    cursor: pointer;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T18:59:43.773

您将要阻止单击事件的默认操作。尝试这个：

```
$(document).ready(function() {
  $('.slider').click(function(e) {
  e.preventDefault();  
  $('.internal').slideUp('normal');
  if ($(this).next().is(':hidden') == true) {
        $(this).addClass('on');
      $(this).next().slideDown('normal');
       return false;
  }
});
$('.internal').hide();
}); 
```

# iphone - EmailComposer Cordova 插件

> ID：12061098
> 
> 赞同：0
> 
> 时间：2012-08-21T18:43:47.377
> 
> 标签：iphone, xcode, cordova

我已尝试为 Cordova 添加 EmailComposer 插件，可在[此处找到](https://github.com/Molitov/Cordova-EmailComposer)

我一步一步地跟着它，当我来构建项目时，我收到以下错误 -

“_OBJC_CLASS_$_MFMailComposeViewController”，引用自：

我已确保已将 MessageUI.framework 添加到项目中。它当前位于框架文件夹中。

有人可以指出我正确的方向或知道我还需要提供什么才能进一步解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:00:39.883

这只是没有将框架正确添加到项目中的情况，我删除并再次正确执行

# c++ - 允许导航到需要证书 QML 的站点

> ID：12061100
> 
> 赞同：0
> 
> 时间：2012-08-21T18:43:56.690
> 
> 标签：c++, qt, qml

我在我的应用程序 qml 中添加了一个 Web 浏览器，但我无法连接到需要证书的网站。因为当我添加网站时，我得到一个白页。请帮帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:31:21.403

要与使用不受信任证书的网站进行通信，您应该向 QDeclarativeEngine 提供您自己的 NetworkManagerFactory，如下所示。此外，这种技术将帮助您监控在任何其他情况下您的网络请求出了什么问题。

```
class WebViewNetworkManagerFactory
  : public QObject
  , public QDeclarativeNetworkAccessManagerFactory
{
  Q_OBJECT

public:
  explicit WebViewNetworkManagerFactory(QObject *parent = 0)
    : QObject(parent)
  {}

public: // QDeclarativeNetworkAccessManagerFactory
  QNetworkAccessManager *create(QObject *parent) {
    QNetworkAccessManager *networkAccessManager = new QNetworkAccessManager(parent);
    connect(networkAccessManager, SIGNAL(sslErrors(QNetworkReply*,QList<QSslError>)),
            this, SLOT(onSslErrors(QNetworkReply*,QList<QSslError>)));
    connect(networkAccessManager, SIGNAL(finished(QNetworkReply*)),
            this, SLOT(onReplyFinished(QNetworkReply*)));
    return networkAccessManager;
  }

private slots:
  void onSslErrors(QNetworkReply *reply, const QList<QSslError> &errors) {
    qDebug("onSslErrors");
    reply->ignoreSslErrors(errors);
  }

  void onReplyFinished(QNetworkReply *reply) {
    Q_ASSERT(reply); if (!reply) return;
    if (reply->error() == QNetworkReply::NoError) {
      return;
    }
    const int httpStatusCode = reply->attribute(
      QNetworkRequest::HttpStatusCodeAttribute).toInt();
      qDebug(QString("Network error = %1, HTTP code = %2, error description = '%3'")
               .arg(reply->error())
               .arg(httpStatusCode)
               .arg(reply->errorString())
               .toAscii());
  }
}; 
```

在代码中的某处使用，您可以在其中创建根 DeclarativeView：

```
QDeclarativeView *buildRootView() {
  QScopedPointer<QDeclarativeView> view(new QDeclarativeView());
  QObject::connect(view->engine(), SIGNAL(quit()),
                   view.data(), SLOT(close()));
  view->engine()->setNetworkAccessManagerFactory(
    new WebViewNetworkManagerFactory(view.data()));
  // other initialization stuff...
  return view.take();
} 
```

# doctrine - 教义歧视者不歧视

> ID：12061107
> 
> 赞同：0
> 
> 时间：2012-08-21T18:44:37.380
> 
> 标签：doctrine, doctrine-orm

DQL 代码：

```
$dql = "SELECT a, FIELD(a.id, ".$implodedIds.") as HIDDEN field " 
. "FROM \activity\models\Entities\Activity a "
. "WHERE a.id IN (".$implodedIds.") "
. "ORDER BY field ASC ";

$em = \Zend_Registry::get('em');

$doctrineConfig = $em->getConfiguration();
$doctrineConfig->addCustomStringFunction('FIELD', 'DoctrineExtensions\Query\Mysql\Field');

$query = $em->createQuery($dql);
$docResults = $query->getResult(); 
```

实体结构的一般要点：（单表继承）

```
Activity
Opinion extends Activity
Comment extends Activity
Counter extends Activity 
```

此 dql 代码正在返回 Activity 实体，但是我希望它能够自动将它返回的实体区分为 Opinions、Comments 和 Counters。Doctrine 在其他情况下这样做没有任何问题，但由于某种原因在这里没有。（在我查询 Activity 的其他情况下，IE 会为我提供一系列意见、评论和计数器）

谁能告诉我为什么这一次，它没有自动区分它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:03:37.317

你问“活动”，他又回来了！根据您的架构选项是“活动”......如果你问你的选项，你会更具体，而不是得到“活动”的其他孩子......所以要区分，使用“instanceOf”！

# python - 如何在 Python 中使用字典作为字典的键

> ID：12061108
> 
> 赞同：2
> 
> 时间：2012-08-21T18:44:36.260
> 
> 标签：python, reference, dictionary

全部 -

我今天有一个非常基本的问题......但它一直阻止我在我的编程中高效地前进，所以我把它贴在这里。

我想创建一个以字典为键的字典。大概我只能将字典的引用作为键传递......只是我不知道如何在 Python 中做到这一点。这是我正在尝试做的玩具减少：

```
def test( dict ):
    a={}
    b={1:1}
    a[ dict ] = b
    return a

a = {0:0}
print test( a ) 
```

我希望 b 成为 { {0:0} : {1:1} } 形式的字典。

对此的任何帮助都非常感谢。

亲切的问候 -

拍

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:48:16.773

字典的键*必须*是可散列项；不幸的是，字典本身不是可散列的（它们是可变的，这使它们失去了可散列的资格）。

使用他们的项目列表，转换为一个排序的元组，而不是：

```
a[tuple(sorted(dct.items()))] = b 
```

可变对象不可散列，因为它们可以就地更改，导致以后的键查找失败。例如，如果您从用作键的字典中添加或删除项目，预期的结果会是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:48:33.520

字典只能使用可*散列*对象作为键，这意味着它们必须是*不可变*的。默认字典也不是，所以这不起作用。不过，您可以尝试使用[frozendict](https://stackoverflow.com/a/2704866/565635)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T18:50:10.897

[蟒蛇维基](http://wiki.python.org/moin/DictionaryKeys)：

> 要用作字典键，对象必须支持散列函数（例如通过__hash__）、相等比较（例如通过__eq__ 或__cmp__），并且必须满足上述正确性条件。

所以试试这个：

```
a = {0: 0}
hash(a) 
```

产生错误：

```
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    hash(a)
TypeError: unhashable type: 'dict' 
```

基本上只是确认 mgilson 已经说过的话。就使用字典（或列表等）作为字典键而言，您很不走运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T18:53:17.970

dict 不能用作密钥，因为它是不可散列的。

```
hash(a) 
```

所以我会重新考虑你的问题，或者如果你真的需要散列一个你可以表示的字典是一个字符串，或者是元组和散列：

```
hash(tuple(dict.items()))
hash(''.join(["%s%s" %(k, v) for k,v in dict.items()])) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T16:30:28.077

感谢所有回复的人。我知道这是一个相当基本的问题，非常感谢所有关于哈希性和可变性的信息。

我确实会追求将输入向量（字典本身）映射到其项目的排序元组的方法。这明确地表征了给定的字典，并且是一种可散列的数据结构，因此它可以用作字典键。

```
def get_key( dict1, dict2 ):

    list = dict1.items() + dict2.items()
    list.sort()
    return tuple( list )

a,b = {'feature1':0}, {'feature1':1}
print get_key( a, b ) 
```

# vim - Vim、coffeescript 和 windows（可悲）

> ID：12061109
> 
> 赞同：2
> 
> 时间：2012-08-21T18:44:38.187
> 
> 标签：vim, coffeescript

在 Windows 上使用 VIM 时，让咖啡脚本编译成 javascript 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:51:31.913

我建议使用[Live Reload](http://livereload.com/)之类的东西来观察你的咖啡脚本是否有变化。

如果您正在寻找纯 vim 解决方案，您可以设置`makeprg`为 coffeescript 文件。将此添加到您的 vimrc 中：

```
autocmd BufNewFile,BufRead *.coffee setlocal makeprg=coffee\ -c\ % 
```

然后，如果您`:make`在 .coffee 文件中运行，则将编译当前文件。

# algorithm - 带有矢量的碰撞方向检测[包括插图]

> ID：12061111
> 
> 赞同：1
> 
> 时间：2012-08-21T18:44:46.793
> 
> 标签：algorithm, collision-detection

我目前正在 html5 画布中制作一个 jump 'n' 原型。语言实际上并不那么重要，我只需要对算法的提示。

**先看这张图：http: [//i.imgur.com/3CwBI.png](http://i.imgur.com/3CwBI.png)**

如您所见，我有两个相互碰撞的矩形（白色的是玩家，灰色的是静态障碍物）。

在预先计算下一帧时，如果即将发生碰撞，我需要修复玩家的位置。**人脑可以清楚地看出，图像中的白色矩形将落在平台顶部**（考虑线性运动）。但是如何告诉这个程序呢？

我正在使用 2d 向量移动播放器。

**编辑：**我已经可以检测到碰撞，我只需要知道方向，这样我就可以将玩家位置固定在障碍物的对应侧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:00:10.013

对于播放器的每个角，在它现在的位置和下一帧的位置之间画一条线段。

![在此处输入图像描述](../Images/c3ef6622311574b621e9d6b7fa179ef0.png)

对于这些线段中的每一个以及构成平台的每个线段，检查两条线段是否相交。

![在此处输入图像描述](../Images/0924d969d5344e1a1468c04279a1df58.png)

如果出现任何交叉点，那么玩家将在下一帧中与平台发生碰撞。

编辑：

90% 的情况下，红色线段仅与属于平台的单个线段发生碰撞。如果红色线段与平台左侧相撞，则玩家撞到墙壁；如果分段与平台顶部碰撞，则玩家降落在平台上。

![在此处输入图像描述](../Images/ab8912569556bea33c23c45a5e1362a0.png)

一个极端情况是顶部和侧面都发生碰撞。

![在此处输入图像描述](../Images/267277e2d5012c4aa75eae356df49e30.png)

在这种情况下，为了确定哪个碰撞“真正”发生，您需要及时确定哪个碰撞最先发生。最早的交叉点是最接近较早玩家矩形的交叉点。在上图中，如果右上方的玩家是较早的玩家，那么最早的碰撞是与平台的顶部。

# c# - 有没有比这更“干净”的方法来设置一组控件的属性？

> ID：12061119
> 
> 赞同：0
> 
> 时间：2012-08-21T18:45:31.597
> 
> 标签：c#

希望学习一种清理此代码的方法。有没有办法在 c# 中应用定义的“样式”？我是新手，正在寻找方法来加强我的编程。我希望能够以更简洁的方式定义边距、最大值、方向、步进频率、滴答频率、滴答位置以及到每个滑块的过渡。

```
 //Slider 1
        Slider Slider_1 = new Slider();
        Slider_1.SetValue(Grid.ColumnProperty, 0);
        Slider_1.Margin = new Thickness(30, 12, 0, 0);
        Slider_1.Orientation = Orientation.Vertical;
        Slider_1.Maximum = 10;
        Slider_1.StepFrequency = 0.25;
        Slider_1.TickFrequency = 0.25;
        Slider_1.TickPlacement = TickPlacement.Outside;
        Slider_1.Transitions = new TransitionCollection();
        Slider_1.Transitions.Add(new EntranceThemeTransition() { });

        //Slider 2
        Slider Slider_2 = new Slider();
        Slider_2.SetValue(Grid.ColumnProperty, 1);
        Slider_2.Margin = new Thickness(30, 12, 0, 0);
        Slider_2.Orientation = Orientation.Vertical;
        Slider_2.Maximum = 10;
        Slider_2.StepFrequency = 0.25;
        Slider_2.TickFrequency = 0.25;
        Slider_2.TickPlacement = TickPlacement.Outside;
        Slider_2.Transitions = new TransitionCollection();
        Slider_2.Transitions.Add(new EntranceThemeTransition() { });

        //Slider 3
        Slider Slider_3 = new Slider();
        Slider_3.SetValue(Grid.ColumnProperty, 2);
        Slider_3.Margin = new Thickness(30, 12, 0, 0);
        Slider_3.Orientation = Orientation.Vertical;
        Slider_3.Maximum = 10;
        Slider_3.StepFrequency = 0.25;
        Slider_3.TickFrequency = 0.25;
        Slider_3.TickPlacement = TickPlacement.Outside;
        Slider_3.Transitions = new TransitionCollection();
        Slider_3.Transitions.Add(new EntranceThemeTransition() { });

        //Slider 4
        Slider Slider_4 = new Slider();
        Slider_4.SetValue(Grid.ColumnProperty, 3);
        Slider_4.Margin = new Thickness(30, 12, 0, 0);
        Slider_4.Orientation = Orientation.Vertical;
        Slider_4.Maximum = 10;
        Slider_4.StepFrequency = 0.25;
        Slider_4.TickFrequency = 0.25;
        Slider_4.TickPlacement = TickPlacement.Outside;
        Slider_4.Transitions = new TransitionCollection();
        Slider_4.Transitions.Add(new EntranceThemeTransition() { }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T18:48:17.950

```
Slider Slider_1 = new Slider(); 
SetProperties(Slider_1,.....)

public void SetProperties(Slider slider,some other parameters)
{
    slider.SetValue(Grid.ColumnProperty, 0);
    slider.Margin = new Thickness(30, 12, 0, 0);
    slider.Orientation = Orientation.Vertical;
    slider.Maximum = 10;
    slider.StepFrequency = 0.25;
    slider.TickFrequency = 0.25;
    slider.TickPlacement = TickPlacement.Outside;
    slider.Transitions = new TransitionCollection();
    slider.Transitions.Add(new EntranceThemeTransition() { });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T18:48:43.853

如果所有属性都具有完全相同的值，则可以构建一个创建 Slider 对象的函数 .. 类似于

```
private Slider GetSlider()
{
    var slider = new Slider() {            
        Margin = new Thickness(30, 12, 0, 0),
        Orientation = Orientation.Vertical,
        Maximum = 10,
        StepFrequency = 0.25,
        TickFrequency = 0.25,
        TickPlacement = TickPlacement.Outside,
        Transitions = new TransitionCollection()            
    };

    slider.SetValue(Grid.ColumnProperty, 1);
    slider.Transitions.Add(new EntranceThemeTransition() { });

    return slider;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T18:46:56.157

你可以做一个接收滑块并设置参数传递的属性的方法

```
private Slider CreateSlider(int columnProperty, Thickness thickness, short orientation
    int maximum, double stepFrequency, double  tickFrequency, short tickPlacement )
{ Slider slider = new slider
  slider.SetValue(Grid.ColumnProperty, columnProperty);
  slider.Margin = thickness;
  slider.Orientation = orientation;
  slider.Maximum = maximum;
  slider.StepFrequency = stepFrequency;
  slider.TickFrequency = tickFrequency;
  slider.TickPlacement =tickPlacement 
  slider.Transitions = new TransitionCollection();
  slider.Transitions.Add(new EntranceThemeTransition() { });
return slider

} 
```

并使用它传递值

```
Slider slider_1 = CreateSlider(0, new Thickness(30, 12, 0, 0), (short)Orientation.Vertical, 
        10, 0.25, 0.25,  (short)TickPlacement.Outside ) 
```

我假设一些`types`值（`enums`例如），你应该把你的正确`types`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T18:49:11.377

使用工厂方法创建 Slider 对象，一次传递所有需要的属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T18:52:52.523

根据您需要创建这些滑块的位置，[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)的实现将适合此处。这将为您提供一种轻松封装和重用用于创建`Slider`. 它也可以扩展为具有多种创建方法，如果以后需要您称之为不同的“风格”。

例子

```
var sliderFactory = new SliderFactory();
var Slider_1 = sliderFactory.CreateSlider();
var Slider_2 = sliderFactory.CreateSlider(SliderStyle.AnotherSliderStyle); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T18:53:24.223

重构，重构，重构。这都可以提取到一个方法中。参数会像罪恶一样丑陋，但它会完成这项工作。

或者，使用您使用工厂模式，但这可能是矫枉过正。

工厂模式

系统设计的一个重要方面是创建对象的方式。尽管考虑对象模型和实例交互的时间通常要多得多，但如果忽略这个简单的设计方面，它将对整个系统产生不利影响。因此，不仅重要的是对象做什么或它建模什么，而且它是以什么方式创建的。

由于大多数面向对象的语言和运行时都提供对象实例化（例如 new、newobj 等）和初始化（例如构造函数）机制，因此可能倾向于直接使用这些工具而不考虑未来的后果。过度使用此功能通常会在系统中引入大量的不灵活性，因为直接使用语言/运行时对象实例化函数会在创建者和创建的类之间创建显式关联。虽然在面向对象的系统中关联是一种必要的关系类型，但如果需求发生变化（正如它们总是如此），类之间引入的耦合是极难克服的。

> 由于需要减少与跨系统创建实例相关的固有耦合，因此在各种不同的应用程序和框架中使用相同类型的解决方案并不少见。在设计模式中形式化：可重用面向对象软件的元素（Addison-Wesley Publishing Company，1995），这些解决方案被称为创建模式。创建模式描述了对象创建机制，可以在不断发展的系统中实现更高级别的重用。
> 
> 最广泛使用的创建模式之一是工厂。这种模式被恰当地命名，因为它要求使用专门的对象来创建其他对象，就像现实世界的工厂一样。在接下来的部分中，我们将检查这种模式的逻辑和物理模型，并讨论这种模式在 .NET Framework 中的一种使用。

[http://msdn.microsoft.com/en-us/library/ee817667.aspx](http://msdn.microsoft.com/en-us/library/ee817667.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T18:57:12.590

使用列表，使用对象初始化，使用具有默认和命名参数的方法。

```
var sliderList = new List<Slider>() {
   CreateDefaultSlider(),
   CreateDefaultSlider(),
   CreateDefaultSlider(gridCol = 3), //example of customizatiom
};

public Slider CreateDefaultSlider(int gridCol = 0, int max = 10, float stepFreq = 0.25, float tickFreq = 0.25, int tX1 = 30, int tY1 = 12, int tX1 = 0, int tY2 = 0) {
   var slider = new Slider {
      Margin = new Thickness(tX1, tY1, tX2, tY2),
      Orientation = Orientatian.Vertical, //not sure these work with default params
      Maximum = max,
      StepFrequency = stepFreq,
      TickFrequency = tickFreq,
      TickPlacement = TickPlacement.Outside,
      Transitions = new TransitionCollection()
  };
   slider.SetValue(Grid.ColumnProperty, gridCol);
   slider.Transitions.Add(new EntranceThemeTransition());
   return slider;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-21T19:00:42.317

我没有尝试过这段代码，但你可以尝试一个 for...each 循环。对不起Vb，但......

```
 For Each slider as Slider in Controls
            slider.SetValue(Grid.ColumnProperty, 0);
            slider.Margin = new Thickness(30, 12, 0, 0);
            slider.Orientation = Orientation.Vertical;
            slider.Maximum = 10;
            slider.StepFrequency = 0.25;
            slider.TickFrequency = 0.25;
            slider.TickPlacement = TickPlacement.Outside;
            slider.Transitions = new TransitionCollection();
            slider.Transitions.Add(new EntranceThemeTransition() { });

    Next 
```

至少你只需要设置一次属性

# jsf-2 - 在 JSF 中为成员变量设置默认值时遇到问题

> ID：12061121
> 
> 赞同：0
> 
> 时间：2012-08-21T18:45:42.410
> 
> 标签：jsf-2, managed-bean

```
package no.northcreek.mabjo;
import javax.annotation.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.RequestScoped;

@ManagedBean
@RequestScoped
public class indexBean {

    @ManagedProperty(value="defaultValue")
    private String firstName;

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }  
} 
```

所以上面是我希望创建默认值为“defaultValue”的 firstName 成员变量的代码。但是该值为空。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:55:42.007

似乎您误解了*@ManagedProperty的用法*

> @ManagedProperty 注释用于将托管 bean 依赖注入 (DI) 到另一个托管 bean 的属性中。

并注意*value*应该指向一个 ELxpression ，如下所示：`value="#{someBean}"`

在您的情况下，您应该执行以下操作

```
private String firstName = "defaultValue"; 
```

或者

初始化`firstName`你的值`@PostConstruct`

```
@PostConstruct
public void init() {
  firstName = "defaultValue";
} 
```

看看这个例子......

[在 JSF 2.0 中注入托管 bean](http://www.mkyong.com/jsf2/injecting-managed-beans-in-jsf-2-0/)

# javascript - Javascript错误正则表达式不是函数？

> ID：12061123
> 
> 赞同：1
> 
> 时间：2012-08-21T18:45:51.710
> 
> 标签：javascript

我在网上找到了一些代码（stackoverflow [https://stackoverflow.com/a/5774234/150062](https://stackoverflow.com/a/5774234/150062)），这正是我所需要的。但我似乎无法让它运行。我收到一个错误`"'/(\\d+)\\s*(second|min|minute|hour)/g' is not a function (evaluating 'regex(s)')";`

```
var timespanMillis = (function() {
  var tMillis = {
    second: 1000,
    min: 60 * 1000,
    minute: 60 * 1000,
    hour: 60 * 60 * 1000 // etc.
  };
  return function(s) {
    var regex = /(\d+)\s*(second|min|minute|hour)/g, ms=0, m, x;
    while (m = regex(s)) {
      x = Number(m[1]) * (tMillis[m[2]]||0);
      ms += x;
    }
    return x ? ms : NaN;
  };
})(); 
```

我也没听说过这个`regex()`功能？它应该是别的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T18:54:28.503

这曾经是可能的，您可以将调用替换[`exec`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)为完全相同的机制：

```
m = regex.exec(s) 
```

请参阅[http://whereswalden.com/2011/03/06/javascript-change-in-firefox-5-not-4-and-in-other-browsers-regular-expressions-cant-be-called-like-functions /](http://whereswalden.com/2011/03/06/javascript-change-in-firefox-5-not-4-and-in-other-browsers-regular-expressions-cant-be-called-like-functions/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:48:00.587

我想

```
regex.match(value)//or regx.exec(value) 
```

是您正在寻找的功能

regex 是 RegExp 对象，而不是函数。这里列出了[正则表达式方法和函数的方法和用法](http://www.javascriptkit.com/javatutors/redev3.shtml)

如果匹配不起作用而不是像这样的试用 .test() 方法

```
var match = /sample/.test("Sample text") 
```

或者

```
var match = /s(amp)le/i.exec("Sample text") 
```

# java - 如何使用 StaX

> ID：12061125
> 
> 赞同：0
> 
> 时间：2012-08-21T18:45:56.307
> 
> 标签：java, xml, inputstream, stax, fileinputstream

大家好，我是 Java-XML 解析领域的新手，发现 StaX API 可能是我最好的选择，因为我需要读取和写入 XML 文件。好的，所以我有一个非常短（并且应该非常简单）的程序，它（应该）创建一个 XMLInputFactory 并使用它来创建一个 XMLStreamReader。XMLStreamReader 是使用附加到与源文件相同目录中的 XML 文件的 FileInputStream 创建的。然而，即使正确编译了 FileInputStream，XMLInputFactory 也无法访问它，并且如果没有 FileInputStream，它也无法创建 XMLStreamReader。请帮忙，因为我不知道该做什么，并且沮丧到要放弃！

```
import javax.xml.stream.*;
import java.io.*;
public class xml {
    static String status;
    public static void main(String[] args) {
        status = "Program has started";
        printStatus();      
        XMLInputFactory inFactory = XMLInputFactory.newInstance();
            status = "XMLInputFactory (inFactory) defined"; printStatus();
        try { FileInputStream fIS = new FileInputStream("stax.xml"); }
            catch (FileNotFoundException na) { System.out.println("FileNotFound"); }
            status = "InputStream (fIS) declared"; printStatus();
        try { XMLStreamReader xmlReader = inFactory.createXMLStreamReader(fIS); } catch (XMLStreamException xmle) { System.out.println(xmle); }
            status = "XMLStreamReader (xmlReader) created by 'inFactory'"; printStatus();
    }
    public static void printStatus(){ //this is a little code that send notifications when something has been done
        System.out.println("Status: " + status);
    }
} 
```

如果需要，这里还有 XML 文件：

```
<?xml version="1.0"?>
    <dennis>
        <hair>brown</hair>
        <pants>blue</pants>
        <gender>male</gender>
    </dennis> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:53:10.620

您的问题与基本的 java 编程有关，与 stax 无关。您的 FileInputStream 位于 try 块内（一些体面的代码格式会有所帮助），因此对于您尝试创建 XMLStreamReader 的代码不可见。带格式：

```
 XMLInputFactory inFactory = XMLInputFactory.newInstance();
    try {
        // fIS is only visible within this try{} block
        FileInputStream fIS = new FileInputStream("stax.xml");
    } catch (FileNotFoundException na) {
        System.out.println("FileNotFound");
    }
    try {
        // fIS is not visible here
        XMLStreamReader xmlReader = inFactory.createXMLStreamReader(fIS);
    } catch (XMLStreamException xmle) {
        System.out.println(xmle);
    } 
```

另一方面，StAX 是一个不错的 API，并且非常适合在 java 中进行高性能 XML 处理。然而，它并不是*最简单*的XML api。您可能最好从基于 DOM 的 API 开始，并且仅在使用 DOM 遇到性能问题时才使用 StAX。如果您*确实*留在 StAX，我建议您使用`XMLEventReader`而不是`XMLStreamReader`（再次，更简单的 api）。

最后，不要隐藏异常详细信息（例如捕获它们并打印出不包括异常本身的内容）或忽略它们（例如在抛出异常后继续处理而不尝试处理问题）。

# android - Nexus 7 上的 CSS 媒体查询，显示分辨率在代码中不起作用

> ID：12061127
> 
> 赞同：9
> 
> 时间：2012-08-21T18:46:25.313
> 
> 标签：android, css, media-queries

我正在使用 CSS 媒体查询为不同大小的设备加载不同的模板。我创建了一个电子表格，列出了测试设备的显示分辨率和最常见的设备以得出尺寸截止值。我正在测试的设备之一是 Nexus 7，我发现它的显示分辨率为 1280 × 800。但是，当我在代码中使用这些值时，它不起作用。

**我不使用最大值或最小值的唯一原因是因为我试图找到确切的分辨率。如果我用相当大的东西替换 max-device-width ，它可以工作并且我已经做了足够的测试以知道它可以与给定的各种最大值一起工作，但是为了正确完成我的代码以区分 3 个不同大小的设备类别，我必须确保创建正确的截止点。CSS分辨率不同吗？感谢您提前提供的所有帮助！

```
@media only screen and (device-width:1280px) and (orientation:landscape) {
/*style --code removed for sack of space */
} 

@media only screen and (device-width:800px) and (orientation:portrait) {

/*style --code removed for sack of space */

} 
```

这是我的 html 文件中的视口代码

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T01:23:25.423

CSS 像素和设备像素中的屏幕尺寸存在差异。

在 nexus 7 的情况下，本机设备像素为 1280 x 800 像素。

然而，如果这是媒体查询的报告宽度，我们最终会触发传统桌面尺寸的响应式设计。

结果，许多浏览器在高像素密度显示之前选择了更接近于传统像素大小的 CSS 像素大小。几乎是 iPhone 1 - 3 像素大小。

设备像素比率报告（设备像素/CSS 像素）

例如 800 / 600 = 1.3333

更令人困惑的是，这些比率有时会随着操作系统版本的变化而变化。例如，从 Jelly Bean 4.2 开始，我的 nexus 7 报告纵向宽度为 600 像素，低于 603。

这使得很难使用基于宽度的媒体查询来定位精确的设备。我建议您接受您正在为大量设备宽度进行设计，并尝试创建一个响应式设计，以适应您选择支持的设备尺寸范围。

祝你好运:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T00:10:57.807

使用以下视口代码：

```
<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width" /> 
```

或者这个不允许缩放：

```
<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no" /> 
```

Nexus 7 的奇怪之处在于（正如 jpgr 发布的那样）它不允许您使用`1280/800`它所拥有的空间（至少开箱即用）。尽管设置了缩放首选项，但它几乎就像在某种程度上放大了一样。

当我的图形看起来有点模糊时，我注意到了这个问题。我通过javascript测试了窗口大小，它发布的数字`25%`低于预期。你会注意到我已经排除了缩放参数，因为它似乎在很大程度上忽略了它们。

真正的关键是使用`target-densitydpi = device-dpi`...这似乎非常正确。

肯定喜欢与 Nexus 7 一起工作！！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T23:20:20.043

过于务实的答案，但您基本上可以使用 601x880 的屏幕尺寸来定位 Nexus 7。技术上不完整，但如果您尝试在媒体查询中使用断点，应该足以让您入门。

# .net - 如何将一个 IntPtr 分配给另一个 IntPtr

> ID：12061132
> 
> 赞同：2
> 
> 时间：2012-08-21T18:46:57.530
> 
> 标签：.net, bitmapdata, intptr

我正在尝试使用 BitmapData 类？并且在将 IntPtr 值分配给 BitmapData.Scan0 属性时遇到一些问题。这是我的代码：

```
var data = bmp.LockBits(new rectangle(Point.Empty, bmp.Size), ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);
data.Scan0 = rh.data.Scan0HGlobal;
bmp.UnlockBits(data); 
```

但是，解锁图像后，它不会改变。为什么？在调试模式下，我看到 data.Scan0 更改为 rh.data.Scan0HGlobal 值。在 rh.data.Scan0HGlobal 我有指向内存的指针，其中包含像素的原始数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T18:56:35.720

好吧，Scan0 属性设置器不是私有的，这有点令人遗憾。但是，是的，这没有任何作用。您需要自己复制字节以更改图像。使用 Marshal.Copy() 通过 pinvoke memcpy() 的 byte[] 辅助数组进行复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:10:21.350

这是你应该如何做的：

```
// Lock image bits.
// Also note that you probably should be using bmp.PixelFormat instead of
// PixelFormat.Format32bppArgb (if you are not sure what the image pixel
// format is).
var bmpData = bmp.LockBits(new Rectangle(Point.Empty, bmp.Size),
    ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);

// This is total number of bytes in bmp.
int byteCount = bmpData.Stride * bmp.Height;
// And this is where image data will be stored.
byte[] rgbData = new byte[byteCount];

// Copy bytes from image to temporary byte array rgbData.
System.Runtime.InteropServices.Marshal.Copy(
    bmpData.Scan0, rgbData, 0, byteCount);    

// TODO: Work with image data (now in rgbData), perform calculations,
// set bytes, etc.
// If this operation is time consuming, perhaps you should unlock bits
// before doing it.
// Do remember that you have to lock them again before copying data
// back to the image.

// Copy bytes from rgbData back to the image.
System.Runtime.InteropServices.Marshal.Copy(
   rgbData, 0, bmpData.Scan0, byteCount);
// Unlock image bits.
image.UnlockBits(bmpData);

// Save modified image, or do whatever you want with it. 
```

希望能帮助到你！

# java - Spring MVC 处理 dao.EmptyResultDataAccessException

> ID：12061136
> 
> 赞同：3
> 
> 时间：2012-08-21T18:47:31.090
> 
> 标签：java, mysql, spring, spring-mvc, exception-handling

我想知道`org.springframework.dao.EmptyResultDataAccessException`在我的应用程序中处理的最佳方法是什么。

当我尝试从不存在的数据库中选择记录时，会发生此错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:03:29.373

捕获的异常（数据相关）`DAO layer`不应在服务层中传递。您将处理 dao 层中的所有异常，并使用您的自定义异常重新抛出它们，例如：

```
public class SomeDaoImpl implements SomeDaoInterface {

   public void someDaoMethod() throws Exception { 
      // code ...

      try {
         // code
      } catch(EmptyResultDataAccessException dataAccessException) {
         // rethrow exception
         throw new Exception(dataAccessException.toString()); // you can rethrow RuntimeException or Custom exceptions
      }
   }
} 
```

# c++ - C++ SDL 做什么 | 做？

> ID：12061137
> 
> 赞同：1
> 
> 时间：2012-08-21T18:47:35.323
> 
> 标签：c++

```
screen = SDL_SetVideoMode(1000,1000,32, SDL_HWSURFACE | SDL_FULLSCREEN); 
```

`|`做什么`SDL_HWSURFACE | SDL_FULLSCREEN`？（我试过用谷歌搜索，但谷歌不接受特殊字符..）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T18:57:27.353

当可以为给定的函数调用设置许多不同的、非互斥的选项时，C/C++ API 通常会设置位“标志”。每个标志都将在一个值（通常是一个`DWORD`或其他大整数类型）中分配一个位位置。这些位中的一个或多个然后可以通过按位或对一组定义的常量进行设置，这些常量表示选项，并为您提供比原始数字常量更清晰的标签来识别它们。结果值作为单个参数传递给 API 函数，这有助于保持签名的可管理性。

在这种特殊情况下，`SDL_HWSURFACE`并`SDL_FULLSCREEN`表示可以传递给`SDL_SetVideoMode`调用的选项。在这种情况下，可能还有其他几个未设置的可用选项。这个特定的调用通过将标志常量按位或运算来设置这两个选项，并将结果作为最后一个参数传递。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T18:48:24.860

那是`bitwise OR`运营商。它适用于`SDL_HWSURFACE`和`SDL_FULLSCREEN`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T19:07:36.333

`|`运算符表示按位或。这意味着如果设置了左侧或右侧值中的相应位，则设置结果中的每个位。所以`1 | 2 = 3`，因为二进制的 1 是 01，二进制的 2 是 10。所以二进制的结果是 11，即十进制的 3。

在您的示例中，这用于将许多不同的开/关选项传递给函数。每个常量都只有一个位集。然后该函数查看您传递的值并使用按位和运算符`&`检查您指定的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T19:32:20.160

其他答案解释了它是按位或，但您可能想知道它是如何工作的：

标志作为二进制数传递，如 00001000 或 01000000，每个位代表一个单独的标志。所以第一位 (0) 表示 HW_SURFACE 关闭，第二位 (1) 表示 FULLSCREEN 开启。（请注意，这些是示例，我不确定实际位。）

所以按位或函数所做的是通过比较每个位并说“这个位或这个位为 1 吗？”来组合这两个标志。如果其中一个为 1，则将结果设置为 1。这将提供结果 01001000，SDL 可以对其进行解析以设置适当的标志。

# css - 使按钮变为全角？

> ID：12061139
> 
> 赞同：313
> 
> 时间：2012-08-21T18:47:40.957
> 
> 标签：css, twitter-bootstrap, html, responsive-design

我想要一个按钮来占据列的整个宽度，但是遇到了困难......

```
<div class="span9 btn-block">
    <button class="btn btn-large btn-block btn-primary" type="button">Block level button</button>
</div> 
```

**如何使按钮与列一样宽？**

* * *

## 回答 #1

> 赞同：881
> 
> 时间：2013-11-04T21:43:20.423

## 引导 v3 和 v4

`btn-block`在您的按钮/元素上使用类

## 引导程序 v2

`input-block-level`在您的按钮/元素上使用类

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-07-16T23:51:00.670

**为什么不使用`input-block-level`完成这项工作的 Bootstrap 预定义类？**

```
<a href="#" class="btn input-block-level">Full-Width Button</a> <!-- BS2 -->
<a href="#" class="btn form-control">Full-Width Button</a> <!-- BS3 -->

<!-- And let's join both for BS# :) -->
<a href="#" class="btn input-block-level form-control">Full-Width Button</a> 
```

*在[Control Sizing^](http://twitter.github.io/bootstrap/base-css.html)部分了解更多信息。*

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-06-23T05:50:09.990

我只是用这个：

```
<div class="col-md-4 col-sm-4 col-xs-4">
<button type="button" class="btn btn-primary btn-block">Sign In</button>
</div> 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2018-01-31T08:24:40.143

**引导程序/CSS**

使用`col-12`, `btn-block`, `w-100`,`form-control`或`width:100%`

```
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet"/>

         <button class="btn btn-success col-12">
             class="col-12"
         </button>

         <button class="btn btn-primary w-100">
             class="w-100"
         </button>

         <button class="btn btn-secondary btn-block">
             class="btn-block"
         </button>

         <button class="btn btn-success form-control">
             class="form-control"
         </button>

         <button class="btn btn-danger" style="width:100%">
             style="width:100%"
         </button>
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-12-13T14:05:22.323

利用

```
<div class="btn-group btn-group-justified">
  ...
</div> 
```

但它只适用于 <a> 元素而不是 <button> 元素。

见： http: [//getbootstrap.com/components/#btn-groups-justified](http://getbootstrap.com/components/#btn-groups-justified)

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-08-21T19:14:18.097

您应该将这些样式添加到 CSS 表

```
div .no-padding {
  padding:0;
}

button .full-width{
  width:100%;
  //display:block; //only if you're having issues
} 
```

然后更改将类添加到您的代码中

```
<div class="span9 btn-block no-padding">
    <button class="btn btn-large btn-block btn-primary full-width" type="button">Block level button</button>
</div> 
```

我还没有测试过这个，我不是 100% 确定你想要什么，但我认为这会让你接近。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2021-08-29T15:09:56.397

如果有些人注意到`btn-block`引导程序 5.1+ 不再工作：

`btn-block`在 bootstrap 5.1 ( [changelog](https://getbootstrap.com/docs/5.1/migration/#buttons) ) 中被删除：

> 打破实用程序的已删除 .btn 块。不要在 .btn 上使用 .btn-block，而是使用 .d-grid 和 .gap-* 实用程序来包装您的按钮，以便根据需要分隔它们。切换到响应式类以更好地控制它们。阅读文档以获取一些示例。

为 bootstrap 5.1+ 的示例制作一个块按钮，取自官方文档：

```
<div class="d-grid gap-2">
  <button class="btn btn-primary" type="button">Button</button>
  <button class="btn btn-primary" type="button">Button</button>
</div> 
```

来源：[https ://getbootstrap.com/docs/5.1/components/buttons/#block-buttons](https://getbootstrap.com/docs/5.1/components/buttons/#block-buttons)

我看到作者用来使按钮全宽的另一种方法是添加 class `w-100`，就像在他们的官方定价示例页面中一样：

[https://getbootstrap.com/docs/5.1/examples/pricing/](https://getbootstrap.com/docs/5.1/examples/pricing/)

```
<button type="button" class="w-100 btn btn-lg btn-outline-primary">
    Sign up for free
</button> 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-04-03T13:26:46.320

我原以为这将是最引导式的做事方式：

```
<button type='button' class='btn btn-success col-xs-12'> First buttton baby </button> 
```

我所做的就是将类添加`col-xs-12`到按钮中。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2021-02-26T15:16:40.020

在 Bootstrap 5 中，该类`btn-block`不再起作用。但是，您可以将类添加`w-100`到按钮，使其与容器一样宽。

```
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" />

<div class="row"><div class=" col-5 ">
            <a class="btn btn-outline-primary w-100  " href="# "><span>Button 1</span></a> 
</div><div class="col-5 ">

            <a class=" btn btn-primary w-100 weiss " href="# "><span>Button 2</span></a> 
</div></div>
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2014-03-06T11:53:46.037

```
<div class="col-md-9">
    <button class="btn btn-block btn-primary" type="button">Block level button</button>
</div> 
```

在 Bootstrap 3 中，这应该就是您所需要的。我相信`btn-large`是覆盖的宽度`btn-block`。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-05-11T09:35:23.493

```
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet"/>

         <button class="btn btn-success col-12">
             class="col-12"
         </button>

         <button class="btn btn-primary w-100">
             class="w-100"
         </button>

         <button class="btn btn-secondary btn-block">
             class="btn-block"
         </button>

         <button class="btn btn-success form-control">
             class="form-control"
         </button>

         <button class="btn btn-danger" style="width:100%">
             style="width:100%"
         </button>
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-11-11T14:10:38.503

这个问题是几年前提出的，对于旧版本来说有点难以理解......但现在这个问题有一个非常简单的答案。

```
<div class="btn btn-outline-primary btn-block">Button text here</div> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-08-24T10:55:59.070

按钮的宽度由按钮文本定义。因此，如果您想定义按钮的宽度，您可以通过在 css 中使用像素来使用定义的宽度，或者如果您想通过响应使用百分比值。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-08-29T15:53:43.473

1.  我们可以使用块级全宽按钮

2.  通过添加 .btn-block 创建块级按钮（跨越父级的整个宽度的按钮）。

    ```
    <button type="button" class="btn btn-primary btn-lg btn-block">
       Block level button
    </button>

    <button type="button" class="btn btn-secondary btn-lg btn-block">
       Block level button
    </button> 
    ```

# php - Symfony / LDAP 查询返回一个空数组

> ID：12061141
> 
> 赞同：1
> 
> 时间：2012-08-21T18:47:54.877
> 
> 标签：php, ldap, symfony-1.4, ldap-query

我正在使用带有 symfony 框架的 bhLDAP 插件。

我正在对用户登录进行 LDAP 查询，该查询将返回特定结果，然后使用这些结果将用户权限分配给 sfGuargAuth。

我可以从一个特定的组中提取查询，但不能从其他组中提取。所有其他查询都返回一个空查询。

是否存在需要在 LDAP 端解决的安全权限？

这是我用来调用查询的函数：

```
 //grab LDAP info to store into new user table
  public static function user_values($username) {

      $entries = self::getLDAP()->user_values($username);
      return $entries;  
  } 
```

如果需要，我可以提供更多代码。我不确定要提供什么，因为我不在 LDAP 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:12:41.733

虽然这取决于您使用的是哪个 LDAP 后端，但就分配权限的机制而言，它们都具有类似的基本权限概念。

绑定 DN，即您连接到 LDAP 的用户，必须具有足够的权限来查看您正在查询的对象。

通常，该帐户需要对各种对象具有读取权限，并且根据您的后端 LDAP 服务器中继承的工作方式，您可能需要比您想要的更频繁地授予它。

# java - play 2.0模板重用footer模板的正确方法

> ID：12061144
> 
> 赞同：1
> 
> 时间：2012-08-21T18:48:04.417
> 
> 标签：java, playframework-2.0

我有一个页脚模板，它有一个输入并提交电子邮件订阅。每个页面都使用页脚。订阅成功后，将重定向回当前页面。但是，我发现我正在传递一个字符串值来指示当前页面是什么。为 Play 2.0 应用程序提供页脚模板的最佳方式是什么？

**页脚.scala.html**

```
@(page: String)
<div id="footer">
    <div class="input-append">
        <form action="@routes.ApplicationController.saveSubscription(page)"
                                method="post">
        <input type="text" name="emailAddress" placeholder="Your Email" />
        <input class="btn" type="submit" value="Subscribe" />
        </form>
    </div> <!-- /input-append -->  
</div> <!-- /footer --> 
```

**应用控制器.java**

```
public class ApplicationController extends Controller {
    public static Result saveSubscription(String page) {
        ..........
        flash("success", "success message");
        if (page.equals("page1")) {
            return redirect(routes.ApplicationController.page1());
        } else if (page.equals("page2")) {
            return redirect(routes.ApplicationController.page2());
        } 
    }
} 
```

**page1.scala.html**

```
@main("Page 1") {
    <div>
    <p>page 1</p>
    </div>
    @footer("page1")
} 
```

**page2.scala.html**

```
@main("Page 2") {
    <div>
    <p>page 2</p>
    </div>
    @footer("page2")
} 
```

**编辑 1**

我关注@virtualeyes，但似乎从未调用过 subscribe.js。这是新设置。

**main.scala.html**

```
<html>
    <head>
        <script type="text/javascript" src="@routes.Assets.at("javascripts/jquery.min.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/vendor/jquery.validate.min.js")"></script>
    <script src="@routes.Assets.at("javascripts/main.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/subscribe.js")" type="text/javascript"></script>

    </head>
    <body>
       @footer()
    </body>
</html> 
```

**页脚.scala.html**

```
<div id="footer">
    <div class="input-append">                  
      <form id="_form" action="@routes.ApplicationController.simpleSubscription()">
        <input type="text" name="emailAddress" placeholder="Your Email" />
        <input id="_process" class="btn" type="submit" value="Subscribe" />
      </form>
    </div> <!-- /input-append -->  
</div> <!-- /footer --> 
```

**路线**

```
POST    /subscribe  controllers.ApplicationController.simpleSubscription() 
```

**现在我得到了他的错误：** 找不到操作请求'GET /subscribe?emailAddress=fdsaf%40rte.com'

我不确定是不是因为 method="post" 被删除了。如果我把它放回去，那么结果会返回，但会重定向到 /subscribe 页面。我还在 subscribe.js 设置了一个断点，但它似乎根本没有被调用。

**编辑 2 - 工作**

在我对 subscribe.coffee 进行了一些更改并摆脱了 main.coffee 之后，现在它可以工作了。

**订阅.coffee**

```
$('#_process').click (e) ->
  e.preventDefault()

  isValid = $('#_form').validate().form()
  if isValid
    $('#_process').spin()
    $.ajax
      type: "POST"
      url:  $('#_form').attr('action')
      data: $('#_form').serialize()
      success: (data) ->
        $('#_status > div').removeClass('alert-error').addClass('alert-success')
        $('#_status > div').html( data )
        $('#_status').fadeIn()
        fade = () -> $('#_status').fadeOut('slow')
        setTimeout fade, 2000
        $('#_process').spin('stop')

      error: (data) ->
        $('#_status > div').removeClass('alert-success').addClass('alert-error')
        $('#_status > div').html( data.responseText )
        $('#_status').fadeIn()
        fade = () -> $('#_status').fadeOut('slow')
        setTimeout fade, 2000
        $('#_process').spin('stop')

      complete: () -> $('#_process').spin('stop') 
```

**页脚.scala.html**

```
 <div id="_status">
    <div class="alert alert-error"></div>
 </div>
 <div class="input-append">
    <form id="_form" action="@routes.ApplicationController.simpleSubscription">
       <input type="text" name="emailAddress" placeholder="Your Email" />
       <input id="_process" class="btn" type="submit" value="Subscribe" />
    </form>
    <div id="_spin"></div>
  </div> <!-- /input-append --> 
```

> spin() 函数来自 [https://github.com/pshizzle/spin.coffee](https://github.com/pshizzle/spin.coffee)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:05:39.703

AJAX 就是方式™

```
//footer.scala.html
<div id="footer">
  <div class="input-append">
    <form id="_form" action="@routes.ApplicationController.saveSubscription">
      <input type="text" name="emailAddress" placeholder="Your Email" />
      <input id="_process" class="btn" type="submit" value="Subscribe" />
      <img id="spinner" src="/assets/img/loader.gif" alt="loading..." />
    </form>
  </div>
</div>

<div id="status">
  <div class="alert alert-error"></div>
</div>
<style type="text/css">
  #spinner, #status { display: none; }
</style>

//ApplicationController.java
public class ApplicationController extends Controller {
  public static Result saveSubscription() {
    // save subscription
    ...
    // pseudo code
    if(success) 
      Ok( i18n("subscription success").toJson() );
    else
      Conflict( i18n("subscription fail").toJson() );
  }
}

//main.coffee
jQuery ->
  $.ajaxSetup
    type:     "POST"
    cache:    false
    dataType: "json"

  # prevent form submit on keypress
  $('form').find('input').keypress (e) -> e.preventDefault() if(e.which == 13)

  jParse = (data) -> 
    try jQuery.parseJSON(data)
    catch e
      data

  jText = (data) -> jParse(data.responseText)

  toSuccess = (msg) -> 
    $('#status > div').removeClass('alert-error').addClass('alert-success')
    $('#status > div').html( jParse(msg) )
    $('#status').fadeIn()

  toFail = (data) -> 
    $('#status > div').html( jText(data) )
    $('#status').fadeIn()

//subscribe.coffee
jQuery ->
  $('#_process').click (e) ->
    e.preventDefault()

    isValid = $('#_form').validate().form() // assumes jQuery validation plugin
    if isValid
      $('#spinner').show()
      $.ajax
        data: $('#_form').serialize()
        success: (msg) ->
          toSuccess(msg)
          fade = () -> $('#status').fadeOut('slow')
          setTimeout fade, 2000

        error: (data) -> toFail(data)

        complete: () -> $('#spinner').hide() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:17:17.700

在隐藏字段中传递准备使用重定向地址怎么样？

`footer`

```
@(returnPath: String)
<form action="@routes.ApplicationController.saveSubscription()" method="post">
    ...
    <input type="hidden" name="returnPath" value="@returnPath" />
</form> 
```

`page1`

```
@main("Page 1") {
    ...
    <!-- it's important to use toString at the end -->
    @footer(routes.ApplicationController.page1.toString)
} 
```

甚至更好：`path`从当前给出`request()`

```
@main("Page 1") {
    ...
    @footer(request.path)
} 
```

`controller`

```
public static Result saveSubscription() {
    ...
    flash("success", "success message");
    return redirect(form().bindFromRequest().get("returnPath"));
} 
```

顺便说一句：也许使用 AJAX 表单会更容易更好？在这种情况下，您将完全避免多余的重新加载（并一次又一次地查找对象并渲染整个模板等）

# sql - 如何计算查询时间

> ID：12061151
> 
> 赞同：4
> 
> 时间：2012-08-21T18:48:17.893
> 
> 标签：sql, oracle, sql-execution-plan

我有`SQL command`很多`JOIN`和`UNION`声明。

我打开了`Explain Plan Window`，但我不知道是什么`Cost`，`Cardinality`或者是什么`Bytes`意思。

有人可以解释这些条款吗？更低是否一定意味着更快的`query`时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:03:56.347

**成本**是基于成本的查询优化器为选择适当的执行计划所做的*估计；**通常*，较低的成本与更快的查询时间相关联，但并非总是如此。

**基数**是查询返回的*预期*行数，基于数据库统计信息。同样，这只是一个估计。

**Bytes**是数据库在执行查询时期望读取的字节数。

## 参考：

*   [使用解释计划](http://docs.oracle.com/cd/B10500_01/server.920/a96533/ex_plan.htm)；
*   [基数](http://www.oratechinfo.co.uk/cardinality.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:04:23.090

正如我在[oracle 文档中看到的那样](http://docs.oracle.com/cd/B10500_01/server.920/a96533/ex_plan.htm)

> *CARDINALITY：*通过基于成本的方法估计操作访问的行数。
> 
> *BYTES：*通过基于成本的方法估计操作访问的字节数。
> 
> *COST：*优化器基于成本的方法估计的操作成本。对于使用基于规则的方法的语句，此列为空。未确定表访问操作的成本。此列的值没有任何特定的计量单位；它只是一个用于比较执行计划成本的加权值。此列的值是 CPU_COST 和 IO_COST 列的函数。

所以，你还需要知道：

> *CPU_COST:* 优化器基于成本的方法估计的操作的 CPU 成本。对于使用基于规则的方法的语句，此列为空。此列的值与操作所需的机器周期数成正比。
> 
> *IO_COST:* 优化器基于成本的方法估计的操作的 I/O 成本。对于使用基于规则的方法的语句，此列为空。该列的值与操作读取的数据块数成正比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T22:18:38.767

您需要知道，Explain Plan 为您提供了数据库认为它将使用的计划，但实际使用的计划可能会有所不同。

如果您要优化查询，或将其与其他查询进行基准测试（以选择最佳查询），测量执行时间、等待、重做大小和逻辑 I/O 是不错的起点。我不会过分依赖解释计划。

看一下：

[http://www.orafaq.com/wiki/SQL_Trace](http://www.orafaq.com/wiki/SQL_Trace)

和：

[http://www.orafaq.com/wiki/TKProf](http://www.orafaq.com/wiki/TKProf)

# java - 康威的人生游戏不如预期

> ID：12061154
> 
> 赞同：0
> 
> 时间：2012-08-21T18:48:24.980
> 
> 标签：java, conways-game-of-life

我正在尝试创建 conway 的 Java 直播游戏。我的代码没有问题，但是游戏的输出。[静物模式](http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life#Examples_of_patterns)按预期工作，但所有移动的结构都以不同的方式结束。

例如：1是活细胞；0 是死细胞

在 wiki 页面上有一个振荡器，即信号灯。就我而言，它的行为如下：

![人生问题游戏](../Images/f3f2ca75df76f07ee6c261c3445b99dd.png)

我在一个小程序中做所有的事情，我添加到一个jframe中。这是小程序代码（忽略德语注释，除非您是德语：P）：

```
import java.applet.Applet;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

public class Canvas extends Applet implements MouseListener{
    private static final long serialVersionUID = -9195952699213522986L;

    private boolean[][] cells; //True lebt; false ist tod
    private int cellWidth;
    private int margin = 2;
    private int step = 0;
    private boolean isRunning = false;

    public Canvas(int size, int cv){ //size = 50; cv = 10;
        addMouseListener(this);
        cells = new boolean[size][size];
        cellWidth = cv;
        //Zellen Füllen
        for(int i = 0; i < cells.length; i++){
            for(int j = 0; j < cells[0].length; j++){
                cells[i][j] = false;
            }
        }
    }

    @Override
    public void paint(Graphics g){
        //Updaten
        if(isRunning)
            update();
        //Hintergrund
        g.setColor(Color.BLACK);
        g.fillRect(0, 0, getWidth(), getHeight());

        //Punkte zeichnen
        for(int i = 0; i < cells.length; i++){
            for(int j = 0; j < cells[0].length; j++){
                if(cells[i][j]){
                    g.setColor(Color.GREEN);
                    g.fillRect(i * cellWidth + margin, j * cellWidth + margin, cellWidth - margin, cellWidth - margin);
                }
                else if(!cells[i][j]){
                    g.setColor(new Color(0x222222));
                    g.fillRect(i * cellWidth + margin, j * cellWidth + margin, cellWidth - margin, cellWidth - margin);
                }
            }
        }
        repaint();
    }

    private void update(){
        try {
            Thread.sleep(100);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        //Für jede Zelle Spielregeln anwenden ( siehe Wikipedia: http://de.wikipedia.org/wiki/Conways_Spiel_des_Lebens )
        //Wichtig:
        //Die Matrix muss komplett bearbeitet und neu gespeichert werden, deswegen newCells
        boolean[][] newCells = cells.clone();
        for(int i = 0; i < cells.length; i++){
            for(int j = 0; j < cells[0].length; j++){

                //Nachbarn
                int neighbors = countNeighbors(i, j);
                //Lebende Zelle
                if(cells[i][j]){
                    //Einsamkeit
                    if(neighbors < 2){
                        newCells[i][j] = false;
                    }
                    //Überbevölkerung
                    else if(neighbors > 3){
                        newCells[i][j] = false;
                    }
                    //alles ok
                    else if(neighbors == 2 || neighbors == 3){
                        newCells[i][j] = true;
                    }
                }
                //Tote Zelle
                else if(!cells[i][j]){
                    //Neue Zellen wird geboren
                    if(neighbors == 3){
                        newCells[i][j] = true;
                    }
                }
            }
        }
        cells = newCells;
        System.out.println("Step #" + (++step));
    }

    private int countNeighbors(int x, int y){
        int neighbors = 0;
        for(int i = x-1; i <= x+1; i++){
            for(int j = y-1; j <= y+1; j++){
                if(x == i && y == j) //Dieselbe Zelle
                    continue;
                try{
                    if(cells[i][j])
                        neighbors++;

                } catch(java.lang.ArrayIndexOutOfBoundsException e){
                }
            }
        }
        return neighbors;
    }

    //Double Buffering
        @Override
        public void update(Graphics g){
                Graphics offgc;
                Image offscreen = null;
                Dimension d = getSize();

                // create the offscreen buffer and associated Graphics
                offscreen = createImage(d.width, d.height);
                offgc = offscreen.getGraphics();
                // clear the exposed area
                offgc.setColor(getBackground());
                offgc.fillRect(0, 0, d.width, d.height);
                offgc.setColor(getForeground());
                // do normal redraw
                paint(offgc);
                // transfer offscreen to window
                g.drawImage(offscreen, 0, 0, this);
        }

        @Override
        public void mouseClicked(MouseEvent e) {

        }

        @Override
        public void mouseEntered(MouseEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void mouseExited(MouseEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void mousePressed(MouseEvent e) {
            if(e.isMetaDown()){
                isRunning = !isRunning;
            }
            else if(!isRunning){
                int x = e.getX() / cellWidth;
                int y = e.getY() / cellWidth;
                cells[x][y] = !cells[x][y];
            }   
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            // TODO Auto-generated method stub

        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:09:02.090

这是一个复杂的算法，所以我不能保证它会在这之后工作，但其余的代码看起来没问题。

```
boolean[][] newCells = cells.clone(); 
```

好的，clone() 执行了一个适用于图元的卷影副本。但**它不适用于二维数组**（充当一维数组的一维数组）。所以，你还有一个浅拷贝。

这样做之后，您实际上是在所有计算结束之前覆盖了旧数组。对于静态情况（没有新像素死/活），没关系，因为新旧数组应该是相同的，对于其他情况，您会发现错误。

# java - 是否可以使用 WebDriver 在网页上获取所有 WebElement

> ID：12061169
> 
> 赞同：3
> 
> 时间：2012-08-21T18:49:24.637
> 
> 标签：java, webdriver

就像是：

```
WebElement inputs =  driver.findElement(By.tagName("input")); 
```

或者

```
List<WebElement> links = driver.findElementsBy(By.tagName("a")); 
```

我想要的是一个名称/值对之类的结构，它给了我标签名与数量我的目标是列出这些元素并进行一系列与它们相关的测试，因为不同的用户将拥有自己独特的这些元素集页。我希望我能传达我的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T22:21:06.890

您可以执行以下操作：

```
List<WebElement> allElements = driver.findElements(By.xpath("//*")); 
```

或者

```
List<WebElement> allElements = driver.findElements(By.cssSelector("*")); 
```

然后只需使用 getTagName 或其他函数根据需要对列表进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T23:21:27.667

这个[repo](https://github.com/pgrandje)看起来很有前途，作为页面对象生成工具

看看[Paul Grandjean Prototype Tool for Configurable Selenium Code Generation](http://www.youtube.com/watch?v=N833cTfL6Sg)

[https://github.com/pgrandje/pohelper2](https://github.com/pgrandje/pohelper2)

# php - ImageMagick convert 在命令行中工作，但不能通过 PHP exec()

> ID：12061170
> 
> 赞同：3
> 
> 时间：2012-08-21T18:49:26.590
> 
> 标签：php, linux, imagemagick, centos

我正在使用 PHP`exec()`来转换使用 ImagicMagick 的图像`convert`。这是在 CentOS 服务器上运行的。

```
exec(convert http://www.google.com/images/srpr/logo3w.png.jpg 
    -resize 640 /home/mysite/public_html/public/img/posts/original/1414_301a4.jpg); 
```

使用`exec()`不会导致新图像出现在目标文件夹中。但是，如果我要在 shell 中运行相同的命令，它会完美运行！

我相信这是一个 PATH 问题。如果是这样，我如何检查 PHP 正在使用的路径，以及如何在 PHP 中设置正确的路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:03:44.817

```
function execute($command)
{
    # remove newlines and convert single quotes to double to prevent errors
    $command = str_replace(array("\n", "'"), array('', '"'), $command);
    # replace multiple spaces with one
    $command = preg_replace('#(\s){2,}#is', ' ', $command);
    # escape shell metacharacters
    $command = escapeshellcmd($command);
    # execute convert program
    return shell_exec($command); // or whatever you like
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T19:01:00.513

**首先，您应该尝试使用***确实*存在且可检索的输入文件：

```
wget http://www.google.com/images/srpr/logo3w.png.jpg

  --2012-08-21 20:55:24-- http://www.google.com/images/srpr/logo3w.png.jpg
  正在解析 www.google.com (www.google.com)... 173.194.35.179, 173.194.35.177, 173.194.35.178, ...
  正在连接到 www.google.com (www.google.com)|173.194.35.179|:80... 已连接。
  已发送 HTTP 请求，等待响应... 404 Not Found
  2012-08-21 20:55:24 错误 404：未找到。

```

**然后，**查看`convert`您的 PHP 使用的是哪个：

```
exec(which convert 2>/tmp/whichconvert.2 1>whichconvert.1) 
```

和

```
cat /tmp/whichconvert.{1,2} 
```

**最后，**也尝试使用完整路径`convert`：

```
exec(/usr/local/full/path/to/convert logo: 
-resize 640 /home/mysite/public_html/public/img/posts/original/1414_301a4.jpg); 
```

进而

```
identify /home/mysite/public_html/public/img/posts/original/1414_301a4.jpg 
```

* * *

### 更新：

您要检索的文件可能不是`logo3w.png.jpg`，但是`logo3w.png`：

```
  wget http://www.google.com/images/srpr/logo3w.png
  --2012-08-21 21:04:22-- http://www.google.com/images/srpr/logo3w.png
  正在解析 www.google.com (www.google.com)... 173.194.35.180, 173.194.35.177, 173.194.35.179, ...
  正在连接到 www.google.com (www.google.com)|173.194.35.180|:80... 已连接。
  HTTP 请求已发送，等待响应... 200 OK
  长度：7007 (6.8K) [图片/png]
  保存到：'logo3w.png'

  100%[================================================= ======>] 7,007 --.-K/s 在 0.02 秒内   

  2012-08-21 21:04:22 (451 KB/s) - 'logo3w.png' 已保存 [7007/7007]

```

**此外，**如果它仅适用于本地文件（不适用于远程 http-URI），您可能需要检查您使用的*http 委托*`convert`是否确实安装在您的系统上：

```
convert -list delegate | grep http
      https =>          "/opt/local/bin/curl" -s -k -o "%o" "https:%M" 
```

**另外，**检查运行 PHP 的用户帐户是否确实有权写入目标目录：

```
exec(touch /home/mysite/public_html/public/img/posts/original/touchtest); 
```

进而

```
ls -l  /home/mysite/public_html/public/img/posts/original/touchtest 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T22:27:55.033

对我有用的是提供`ImageMagick`二进制文件的完整路径。而不是`convert`，使用`/path/to/convert`.

```
$command = $this->imageMagickFullBinaryPath . ' -resize ' . $dimensions . 
           ' ' . $imageFileToResize . ' ' . $resultingThumbnail; 
exec($command, $output); 
```

# jquery - 了解 Jquery 执行流程的技巧

> ID：12061172
> 
> 赞同：1
> 
> 时间：2012-08-21T18:49:38.363
> 
> 标签：jquery

我是 JQuery 的新手。我写了一小段代码（[小提琴](http://jsfiddle.net/dSL6S/8/)）。我想知道是否有人可以对我写的语句的执行顺序有所了解。

的HTML：

```
<span>I</span>
<span>Love</span>
<span>JQuery</span> 
```

​JavaScript：

```
$(function() {
    $('<a>Url</a>').attr('href', 'http://www.jquery.com').appendTo('body');
    $('<span>More</span>').appendTo('body');
    $('span'.text());
});​ 
```

我期待 Url I Love JQuery More 的输出，但如您所见，输出是 I Love JQuery UrlMore。为什么按这个顺序输出？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:52:03.480

[`appendTo`](http://api.jquery.com/appendTo/)将元素插入到目标的***末尾***。如果要将元素插入到目标的***开头***，请[`prependTo`](http://api.jquery.com/prependTo/)改用：

```
$(function() {
    $('<a>Url</a>').attr('href','http://www.jquery.com').prependTo('body');
    $('<span>More</span>').appendTo('body');  
});​ 
```

这样，`<a>Url</a>`在 的开头`body`和`<span>More</span>`结尾插入，产生您预期的 string `Url I Love JQuery More`。

[**演示**](http://jsfiddle.net/dSL6S/10/)。

在你的小提琴中，还有这条线`$('span'.text());`是错误的。要获取跨度的文本，请`$('span').text()`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:52:39.853

您正在附加到正文，这会将其添加到末尾。Append 意味着，默认情况下，它将添加到文本的末尾。因此，它分为三块。

我喜欢 JQuery --append-- URL --append-- 更多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:55:56.927

加载文档后，将执行 $(function(){}) 部分。您尝试将“Url”和“More”附加到文档正文的末尾，这就是为什么在您的初始 HTML 文档之后显示“UrlMore”的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T19:04:41.877

如前所述， appendTo 在末尾插入。
我个人更喜欢这样工作：

```
$('#mysample').prepend($('<a href="jquery">URL</a>')).append($('<span>More</span>')); 
```

我首先选择我的包装器，然后告诉我要附加到它的内容。这允许您像我在示例中所做的那样链接您的操作。此外，无需在单独的操作中添加属性，您可以像我一样在构建时执行此操作。

小提琴：http: [//jsfiddle.net/dSL6S/11/](http://jsfiddle.net/dSL6S/11/)

# php - 用于数据库查找的 Ajax 请求

> ID：12061173
> 
> 赞同：0
> 
> 时间：2012-08-21T18:49:42.593
> 
> 标签：php, ajax

我有一个网站可以让用户登录并进行数据库查找以查看用户是否已确认他们已读取文件。如果他们没有，他们将被发送到一个页面，其中包含指向需要阅读的文件的链接。一旦他们阅读了文件并单击确认链接，php 脚本就会将此文件名和用户名一起添加到名为 read 的表中。我想要做的是阻止用户在他们没有承认他们阅读了文件的情况下离开这个页面。我将如何使用 javascript onunload 函数并执行 ajax 请求以检查他们是否已读取需要读取的文件。我是 ajax 新手，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:02:49.240

处理这个问题的最好方法是 PHP，而不是 JS。如果你依赖 JS，就太容易绕过它了：

1）将用户数据加载到会话中时，检查他们是否确认。

2）在php中添加一个条件以在每次页面加载时触发（在代码中检查他们是否已登录的相同位置），除非他们已经确认，否则会将他们重定向到该页面。

# html - 有没有办法在没有锚的情况下链接到页面上的特定段落？

> ID：12061174
> 
> 赞同：9
> 
> 时间：2012-08-21T18:49:51.647
> 
> 标签：html, hyperlink, focus, anchor

我正在尝试用表单填写教程写一篇文章。有很多来源，但来源页面不提供页面上的锚点。

* * *

所以我的问题是，如何链接到 html 页面上的具体文本段落？

有可能吗？

url 中是否有任何 JavaScript 技巧来实现这一点？

* * *

**编辑**：

我需要链接到外部来源的特定段落。例如，在[此](http://en.wikipedia.org/wiki/United_States_Navy)Wikipedia 页面上以“海军追溯其起源于”开头的段落

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-05-09T20:16:29.033

截至 2020 年，WICG 有一个**[文本片段](https://wicg.github.io/ScrollToTextFragment/#indicating-the-text-match)**草稿，现在您可以通过将以下内容添加到哈希中来链接到页面上的文本，就好像您正在搜索它一样

`#:~:text=<Text To Link to>`

工作示例`Chrome Version 81.0.4044.138`：

[单击此链接](https://stackoverflow.com/q/12061174/614277#:~:text=Click%20on%20this%20link)应重新加载页面并突出显示链接的文本

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T19:11:21.997

您只能链接到具有 id 的命名锚或元素。如果目标页面两者都没有，那么您就不走运了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T19:12:22.947

我刚刚注意到，您希望在外部来源上使用它。如果有 id，你可以使用这个：http: [//jsfiddle.net/LCgge/](http://jsfiddle.net/LCgge/)

# python - 简单的 Python 类定义不起作用

> ID：12061175
> 
> 赞同：1
> 
> 时间：2012-08-21T18:49:54.220
> 
> 标签：python

在下面的代码中，编译器给了我赋值前引用的错误“Local variable shouldStoreData”。但我先分配它。

```
class MyHTMLParser(HTMLParser):
    shouldStoreData = False
    textPartDoc = ""
    def handle_starttag(self, tag, attrs):
        print "Encountered a start tag:", tag
        if(tag == "title" or tag == "body"):
            shouldStoreData = True
    def handle_endtag(self, tag):
        print "Encountered an end tag :", tag        
    def handle_data(self, data):
        #print "Data is",data
        #print "valus of storeData is:",shouldStoreData
        if(shouldStoreData == True):
            textPartDoc  = textPartDoc + " " + data
            shouldStoreData = False 
```

我在这里要做的是，我只想在标签是标题或正文中的任何标签时存储数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T18:52:51.670

第一个`shouldStoreData`是类属性。里面的`handle_starttag`和`handle_data`是局部变量。在`handle_data`中，您在分配变量之前对其进行测试。方法内的代码不知道类属性的存在，除非您将其作为类/实例属性（例如，`self.shouldStoreData`或`MyHTMLParser.shouldStoreData`）显式访问。

如果你想`shouldStoreData`成为一个实例属性，那么你需要编写一个`__init__`方法并将其创建为一个实例属性：

```
def __init__(self):
    self.shouldStoreData = False 
```

然后`self.shouldStoreData`在您的其他方法中引用它。

您应该阅读[Python 教程](http://docs.python.org/tutorial/)以掌握 Python 中的类、属性和方法的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:00:57.390

一个简单的例子使它更清楚：

```
x='outside'

class A:
    x='inside'
    def __init__(self):
        print x           #prints the global x
    def func1(self):
        x='changed'      #changes the global x
        print x,A.x      #prints the global x and then the class's x 
```

**输出：**

```
>>> a=A()
outside
>>> a.func1()
changed inside
>>> A.x
'inside'
>>> x
'outside' 
```

# function - Haskell 中的隐性函数组合

> ID：12061176
> 
> 赞同：13
> 
> 时间：2012-08-21T18:49:55.063
> 
> 标签：function, haskell, composition, tacit-programming, pointfree

假设我有一个`mean`这样定义的函数：

```
mean xs = sum xs / (fromIntegral $ length xs) 
```

但我希望它以某种默认形式出现，如下所示：

```
mean = sum / (fromIntegral . length) 
```

是否有一种内置的 Haskell 方法可以按照这些方式做一些事情，而不必构建我自己的`tacit`函数（类似这样）：

```
tacit :: (a -> b -> c) -> (d -> a) -> (d -> b) -> d -> c
tacit a b c i = a (b i) (c i) 
```

在这种形式中，函数如下所示：

```
mean = tacit (/) sum (fromIntegral . length) 
```

但感觉可能有一种方法可以避免使用诸如此类的显式函数。我是在想; 有没有内置于 Haskell 中的方法来做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-21T20:10:26.293

应用函子在这里工作得很好。

```
import Control.Applicative

mean = (/) <$> sum <*> (fromIntegral . length) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-21T18:57:21.433

是的，你的`tacit`函数`liftM2`在`(->) r`monad 中（`liftM2`是 in `Control.Monad`，而 Monad 的函数实例是 in `Control.Monad.Instances`）。

我使用`pointfree`程序找到了这个（你可以通过 安装它`cabal install pointfree`），调用如下：

```
$ pointfree '\xs -> sum xs / (fromIntegral $ length xs)' 
```

（在 Unix 终端中）

# objective-c - 视频录制倒置和 AVMutableComposition 旋转视频的问题

> ID：12061185
> 
> 赞同：2
> 
> 时间：2012-08-21T18:50:38.900
> 
> 标签：objective-c, ios, avfoundation, avmutablecomposition

我在录制视频并将所述视频放入合成中时遇到了一个奇怪的问题。如果设备横向向左（左侧的按钮），则视频会倒置录制，然后当它放入合成中时，它会旋转 180 度，使其正面朝上。如果设备面向横向，则视频会正面朝上录制，但随后会在合成中旋转，使其上下颠倒。我不确定是什么原因造成的或如何解决它；我可以强制应用程序仅在左侧横向运行，以便最终产品看起来不错，但这感觉很草率，我更喜欢更好的解决方案。有问题的设备是最新的 iPad，我不确定它在其他设备上是否也有这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:30:25.550

在 iPad 或 iPhone 上录制电影时，实际的视频数据永远不会旋转，但有关方向的信息会与电影一起存储。可以通过`[AVAsset preferredTransform]`属性访问方向数据。或者，您可以从视频轨道 ( `AVAssetTrack`) 中获取它。为了正确播放此类电影，请设置相应合成轨道的 preferredTransform 属性。

# c++ - 提升单元测试 cpp 文件在库中看不到一个目标文件

> ID：12061186
> 
> 赞同：0
> 
> 时间：2012-08-21T18:50:46.063
> 
> 标签：c++, unit-testing, boost, boost-test

我有一个 test.cpp 文件，是为使用 boost 单元测试而编写的。

```
test.cpp :
#define BOOST_TEST_DYN_LINK
#include <boost/test/unit_test.hpp> 
......... 
```

我正在尝试将此 test.cpp 与名为 liba 的库链接。

```
g++ test.cpp -L/liba_directory -la 
```

不断给出错误消息，表明我的 liba 中的一个类未声明。同时，可以找到同一个库中的另一个类。

作为一个积极的控制，我把这个库和我的主文件联系起来，它工作得很好。

```
g++ main.cpp -L/liba_directory -la 
```

通过编译非常好。

看起来我的测试文件看不到我编译的库中一个特定类的文件，但我的主文件完全可以访问。谁能给我一些建议？

# python - 如何优化模型多对多选择？

> ID：12061187
> 
> 赞同：0
> 
> 时间：2012-08-21T18:50:46.247
> 
> 标签：python, django, django-views

我有这段代码，我想优化：

```
articles = Articles.objects.filter(active=True).all().order_by('-added')[start_from:per_page+start_from]
tags = dict()
for article in articles:
    tags[article.id] = Tags.objects.filter(articles=article).all() 
```

我认为该代码可以，但它们返回错误：

```
articles = Articles.objects.filter(active=True).all()[start_from:per_page+start_from]
articles_tags = Tags.objects.filter(articles__in=articles).all()
tags = dict()
for article in articles:
        tags[article.id] = articles_tags.filter(articles=article).all() 
```

错误信息

```
(1235, "This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery'") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:25:25.740

由于您使用的是 Django 1.4，因此请尝试`prefetch_related`在 QuerySet 上使用。这通过运行单独的查询来获取 ManyToMany 字段，然后在 Python 中将两者结合在一起。这样，您将使用 2 个查询而不是 1 + n 个查询来检索所有数据：

```
# Fetch articles
articles = Articles.objects.filter(active=True) \
    .prefetch_related('tags')[start_from:per_page+start_from]

# Eat a donut
logging.info('omnomnomnom') 
```

[https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)

# asp.net - 优化邮政编码距离计算

> ID：12061189
> 
> 赞同：0
> 
> 时间：2012-08-21T18:50:52.000
> 
> 标签：asp.net, sql-server-2008, geolocation, geospatial, computational-geometry

这是我对所有人的问题

我已经有一个执行“邮政编码附近”搜索的现有系统。

这篇文章的目的是看看我是否可以优化这个过程。

目前，我有大约 43k 条邮政编码记录。

我当前算法的工作方式是选择 1 条记录并对 43k 记录进行全表扫描。

有没有办法只取一个子集（纬度范围，长期范围）并以这种方式进行计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:58:58.857

您可以从 google 或 geocoder.us（或您获取地理数据的任何地方）获取所有邮政编码的质心的纬度/经度。在 where 子句中使用它们作为缩小搜索范围的粗略指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:09:16.027

我通常做的是将我的搜索括起来加上和减去一个度数。如前所述，纬度约为 69 英里。有了经度，事情变得有点复杂。离北极越近，从一个经度到另一个经度的距离就越短。例如，在佛罗里达州/乔治亚州边界，经度一度相距约 55 英里，但在加利福尼亚/俄勒冈州边界处，仅相距约 50 英里。

您首先需要获得起始位置的纬度/经度，并且可能需要设置 4 个变量，例如：beglat、endlat、beglong 和 endlong。将 beglat 分配给起始位置的纬度减去 1 度，将 endlat 分配给起始位置的纬度加上 1 度，等等。对于更紧凑的搜索半径，您可以选择半度或其他值。

# ssl - 如何在 azure 中保护内部角色（至少 SSL）

> ID：12061198
> 
> 赞同：2
> 
> 时间：2012-08-21T18:51:37.903
> 
> 标签：ssl, azure, internal, role, worker

我正在开发一个 HIPAA 云项目，并且正在实施一个密钥库作为 PHI（私人健康信息）加密的所有密钥对的中央存储库......我不担心实际数据，因为它会在静止时被加密并在运输途中。

但是，当工作人员或 webrole 需要处理数据时，他们需要对其进行解密和重新加密（如果他们进行更新）。这就是密钥商店发挥作用的地方。但是，我不希望这个内部服务被暴露并且我也需要它被 SSL，因为即使在角色的虚拟网络中以明文方式发送密钥也不会通过安全审计。

那么，关于如何让网络或工作人员角色将 SSL 与内部端点一起使用的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:06:48.237

我不认为你可以。内部端点位于封闭的网络分支上，因此 https 通常是多余的（尽管我了解您的合规性问题）。我发现这个答案（对我的问题）对于确定内部端点的安全性非常有用：[Windows Azure 内部端点的安全性如何？](https://stackoverflow.com/questions/11584163/how-secure-are-windows-azure-internal-endpoints)- 请参阅布伦特链接到的更详细的帖子。

# ruby - 如何在 Ruby 正则表达式中访问同一匹配组的各种出现？

> ID：12061200
> 
> 赞同：2
> 
> 时间：2012-08-21T18:51:41.600
> 
> 标签：ruby, regex, rubular

我有一个有多个匹配项的正则表达式。我发现 $1 、 $2 等 .. 可以用来访问匹配的组。但是如何访问同一匹配组的多次出现？

请看下面的rubular页面。

[http://rubular.com/r/nqHP1qAqRY](http://rubular.com/r/nqHP1qAqRY)

所以现在 1 美元给出 916，2 美元给出 NIL。如何访问 229885 ？有没有类似于 $1[1] 的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:11:15.970

首先，仅使用正则表达式解析基于 xml 的数据并不是一个好主意。而是使用一个库来解析 xml 文件，比如 nokogiri。

但是，如果您确定要使用此方法，则需要了解以下内容。正则表达式引擎在获得（令人愉悦的）匹配后立即停止。因此，您不能期望从一个正则表达式调用中获得字符串中的所有可能匹配项，您需要在每个已经发生的匹配之后应用新的正则表达式匹配来遍历字符串。你可以这样做：

```
# ruby 1.9.x version
regex = /<DATA size="(\d+)"/
str = your_string # Your string to be parsed
position = 0
matches = []
while(match = regex.match(str,position)) do # Until there are no matches anymore
  position = match.end 0 # set position to the end of the last match
  matches << match[1] # add the matched number to the matches-array
end 
```

在此之后，您所有解析的数字都应该在`matches`.

但是由于您的评论表明您使用的是**ruby​​ 1.8.x**，所以我将在此处发布另一个版本，该版本适用于 1.8.x（这些版本中的方法定义不同）。

```
# ruby 1.8.x version
regex = /<DATA size="(\d+)"/
str = your_string # Your string to be parsed
matches = []
while(match = regex.match(str)) do # Until there are no matches anymore
  str = match.post_match # set str to the part which is after the match.
  matches << match[1] # add the matched number to the matches-array
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:02:07.333

要扩展我的评论并回答您的问题：

如果要将值存储在数组中，请修改块并收集而不是迭代：

```
> arr = xml.grep(/<DATA size="(\d+)"/).collect { |d| d.match /\d+/ }
> arr.each { |a| puts "==> #{a}" }
==> 916
==> 229885 
```

这`|d|`是普通的 Ruby 块参数语法；each`d`是匹配的字符串，从中提取数字。它不是最干净的 Ruby，尽管它很实用。

我*仍然*建议使用解析器；请注意，rexml 版本将是这样的（或多或少）：

```
require 'rexml/document'
include REXML
doc = Document.new xml
arr = doc.elements.collect("//DATA") { |d| d.attributes["size"] }
arr.each { |a| puts "==> #{a}" } 
```

将“XML”转换为实际 XML 后，您可以获得更多有用的数据：

```
doc = Document.new xml
arr = doc.elements.collect("//file") do |f|
  name = f.elements["FILENAME"].attributes["path"]
  size = f.elements["DATA"].attributes["size"]
  [name, size]
end

arr.each { |a| puts "#{a[0]}\t#{a[1]}" }

~/Users/1.txt   916
~/Users/2.txt   229885 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:58:57.890

这在大多数正则表达式的实现中是不可能的。（AFAIK 只有 .NET 可以做到这一点。）

您将不得不使用替代解决方案，*例如*使用`scan()`：[等效于 Ruby 中 Python 的 findall() 方法？](https://stackoverflow.com/questions/1063593/equivalent-to-pythons-findall-method-in-ruby).

# apache - 使用 .htaccess 中的自动前置文件启动和访问会话

> ID：12061202
> 
> 赞同：0
> 
> 时间：2012-08-21T18:52:01.353
> 
> 标签：apache, .htaccess, php

我一直在尝试使用“auto-prepend-file”值来设置一个 PHP 脚本，以便在该目录的每个页面之前运行。目前，我正在销毁并创建一个会话，然后设置一个会话变量。

但是，如果我尝试从页面访问会话变量，它们就没有任何价值。

1.  可以防止在 .htaccess 文件中设置此值吗？
2.  当调用非 php 页面时，前置脚本是否也会运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:22:55.917

> 可以防止在 .htaccess 文件中设置此值吗？

可以使用 .htaccess 文件[禁用会话 cookie](https://stackoverflow.com/questions/241715/how-to-disable-php-session-cookie)，但我怀疑这是您的情况的真正问题。您确定该文件实际上是预先添加的吗？尝试更直接的测试，例如添加`die('The prepended file was executed.')`到文件中。

> 当调用非 php 页面时，前置脚本是否也会运行？

auto_prepend_file 指令仅适用于 PHP 解析的文件。在大多数只包含 .php 文件的服务器配置中。但是，您也可以使用[AddHandler 指令](http://httpd.apache.org/docs/2.2/mod/mod_mime.html#addhandler)使 Apache 在其他文件类型中执行 PHP。

例如，如果您使用 AddHandler 将 .html 添加为另一种可以包含 PHP 代码的文件类型，则 auto_prepend_file 也将适用于 .html 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:30:32.570

最终为我解决的问题是在我的 Apache 配置文件上设置“AllowOverride”指令。为了允许给定文件夹的 .htaccess 权限，您应该具有类似...

```
# Allow .htaccess settings
<Directory "/absolute/path/to/htaccessfolder">
    AllowOverride Options
</Directory> 
```

...在 httpd.conf 上，它允许覆盖所选目录中的选项设置。

# c# - Linq C#中派生类类型的动态检查

> ID：12061214
> 
> 赞同：0
> 
> 时间：2012-08-21T18:52:45.797
> 
> 标签：c#, linq, entity-framework, entity-framework-4

我有一个 Platform 类作为基类，还有 2 个类 IOSPlatform 和 AndroidPlatform 是从 Platform 派生的。

除此之外，还有一个具有 Platform 对象作为导航属性的 Device 类。

在查询所有 IOS 平台设备时，下面的 linq 表达式就像一个魅力。

```
devices.Where(t=> t.Platform is IOSPlatform) 
```

我想通过动态检查类类型来改进此查询，例如：

```
Platform p = new IOSPlatform();
devices.Where(t=> t.Platform is /*derived class of p object*/) 
```

有没有办法做到这一点 ？

此致，

凯末尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T18:54:29.773

```
Platform p = new IOSPlatform();
devices.Where(t=> t.Platform.GetType()==p.GetType()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:15:03.190

我不确定我是否理解，但听起来你想要

```
devices.Where(t =>
    p.GetType().IsAssignableFrom(t.Platform.GetType())
    ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T19:01:28.757

关于什么：

```
Platform p = new IOSPlatform();
devices.Where(t=> t.Platform.GetType().BaseType == p.GetType()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T19:00:13.697

您是否尝试验证列表中的对象是否继承自 Platform？"is" 操作符已经验证了 .. 你可以使用这个：

```
devices.Where(d => d.Platform is Platform); 
```

甚至使用 OfType 方法：

```
devices.OfType<IOSPlatform>(); 
```

# ruby-on-rails-3 - 带有fields_for的Rails 3质量分配错误

> ID：12061217
> 
> 赞同：0
> 
> 时间：2012-08-21T18:52:55.167
> 
> 标签：ruby-on-rails-3, mass-assignment

我有以下模型关系：
OrderModel：

```
has_one :credit_card
    accepts_nested_attributes_for :credit_card
    attr_accessible :user_id, :date_updated, :date_finished, :amount, :payment_method, :status, :billing_cycle, :auth_net_subscription_id, :billing_start_date, :credit_card_attributes, :billing_address_id, :cc_id 
```

信用卡型号：

```
belongs_to :order 
```

这是我的订单控制器（orders#checkout）

```
def checkout
  @order = current_order
  @cc = CreditCard.new
  @order.build_credit_card
  respond_with @order
end 
```

这是在订单上输入 CC 的表格：

```
<%= form_for(@order, :url => finish_checkout_path, :html => { :class => 'validate' }) do |f| %>
    <%= f.fields_for @cc do |cc| %>
        <%= cc.text_field :cc_number, :placeholder => "Credit Card Number", :class => "full-width validate[required, creditCard] cc" %>
        <%= cc.text_field :name, :placeholder => "Name as it appears on card", :class => "full-width validate[required]" %>
        <%= select_month(Date.today, {:field_name => 'exp_month', :prefix => "order[credit_card]", :prompt => "EXP. MONTH"}, { :class => "dk half-width validate[required,past] marginRight10" }) %>
        <%= select_year(Date.today, {:field_name => 'exp_year', :prefix => "order[credit_card]", :prompt => "EXP. YEAR", :start_year => Date.today.year, :end_year => Date.today.year + 10}, { :class => "dk half-width validate[required]" }) %>
        <%= link_to "What's this?", "#", :class => 'cvv-help' %>
        <%= cc.text_field :cvv, :class => 'half-width validate[required] marginRight10', :placeholder => "CVV" %>
        <%= cc.text_field :zip_code, :class => 'half-width validate[required]', :placeholder => "Zip Code" %>
    <% end %>
    <%= f.hidden_field :amount, :value => @order.products.collect(&:price).reduce(&:+) %>
    <p class="tos">By clicking the button below you agree to our <a href="#" class="pink">terms of service</a>.</p>
    <p class="align-center"><%= f.submit "Submit", :class => 'btn submit' %></p>
<% end %> 
```

这里是我更新订单的地方（orders#finish）：

```
current_order.update_attributes(params[:order]) 
```

当我这样做时，我收到以下错误：`Can't mass-assign protected attributes: credit_card`

我显然有 credit_card_attributes ，`attr_accessible`所以我不确定为什么会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:11:14.210

不确定，但这可能是因为您的控制器代码：

```
def checkout
   @order = current_order
   @cc = CreditCard.new
   @order.build_credit_card
   respond_with @order
end 
```

这样，您在 fields_for 中使用的信用卡就不会与您的订单相关联。这可能是问题所在。

尝试这样做：

```
def checkout
   @order = current_order
   @order.build_credit_card
   respond_with @order
end 
```

和

```
<%= f.fields_for :credit_card do |cc| %> 
```

# python - 读取 CSV 文件并在 python 中的每个项目上加上双引号

> ID：12061218
> 
> 赞同：3
> 
> 时间：2012-08-21T18:53:03.240
> 
> 标签：python, csv

我对python真的很陌生，我有一个简单的问题。我有一个包含以下内容的 .csv 文件：

```
123,456,789 
```

我想读取它并将其存储到一个名为“number”的变量中，格式如下

```
"123","456","789" 
```

所以当我这样做的时候

```
print number 
```

它将给出以下输出

```
"123","456","789" 
```

有人可以帮忙吗？

谢谢！

更新：以下是我的代码：

```
input = csv.reader(open('inputfile.csv', 'r'))
for item in input:
    item = ['"' + item + '"' for item in item]
print item 
```

它给出了以下输出：

```
['"123"', '"456"', '"789"'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T19:09:33.697

这是如何做到的：

```
import csv
from io import StringIO

quotedData = StringIO()

with open('file.csv') as f:
    reader = csv.reader(f)
    writer = csv.writer(quotedData, quoting=csv.QUOTE_ALL)
    for row in reader:
       writer.writerow(row) 
```

`reader=csv.reader(StringIO('1,2,3'))`输出是：

```
print quotedData.getvalue()
"1","2","3" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:05:03.340

```
import csv
spamReader = csv.reader(open('eggs.csv', 'rb'))
for row in spamReader:
    this_row = ['"' + str(item) + '"' for item in row]
    print this_row 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:56:04.523

如果整个文件只包含数字，您可以将其作为常规文件打开：

```
with open("file.csv") as f:
    for line in f:
        print ','.join('"{}"'.format(x) for x in line.rstrip().split(',')) 
```

最好使用 append 将行追加到数组中。例如：

```
with open("file.csv") as f:
    lines=[line.rstrip().split(',') for line in f] 
```

那里有一个[CSV](http://docs.python.org/library/csv.html)模块也可能对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T19:01:16.857

`.csv`使用 csv 模块，您可以逐行读取文件并处理您获得的元组中的每个元素。然后，您可以将每个元素括在双引号中。

```
import csv
reader = csv.reader(open("file.csv"))
for line in reader:
    # line is a tuple ... 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T19:06:19.880

```
import csv 
csvr = csv.reader(open(<yourfile.csv>,'r'))

def gimenumbers():
   for row in csvr:
     yield '","'.join(row) 
```

# java - jstack -F 如何影响正在运行的 Java 进程？

> ID：12061226
> 
> 赞同：32
> 
> 时间：2012-08-21T18:53:18.250
> 
> 标签：java, jvm, jstack

我正在尝试诊断我正在使用的 Java Web 应用程序（Jenkins）变得无响应的问题。如果我在`jstack`没有`-F`标志的情况下运行它不会给我任何东西，但是如果我将标志放入强制线程转储，我不仅会得到结果，而且应用程序会开始响应并继续运行，就好像什么都没发生一样，直到它最终再次停止响应。

flag会`jstack -F`影响正在运行的 JVM 并导致无响应的应用程序再次开始响应？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-26T14:44:07.750

You can see the source to jstack [here](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/tools/jstack/JStack.java). The -F argument changes how jstack connects to the jvm. With -F (or -m) JStack connects to the jvm using the java debugger interface. If a pid is specified, JStack connects with the [SA PID Attaching Connector](http://docs.oracle.com/javase/6/docs/technotes/guides/jpda/conninv.html#Connectors) which says,

> The process to be debugged need not have been started in debug mode(ie, with -agentlib:jdwp or -Xrunjdwp). It is permissable for the process to be **hung**.

I don't know why it would cause an unresponsive application to start responding again, but the link above also says,

> The process is suspended when this connector attaches and resumed when this connector detaches.

This may have an effect.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-29T13:34:30.840

jstack -F -l pid 类似于（假设工作目录是 JAVA_HOME）

```
bin/java -Dsun.jvm.hotspot.debugger.useWindbgDebugger  -Dsun.jvm.hotspot.debugger.useProcDebugger  -cp lib/sa-jdi.jar;lib/tools.jar  sun.tools.jstack.JStack -F -l pid 
```

在[sun.tools.jstack.JStack 代码中](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/tools/jstack/JStack.java#JStack)

```
 if (arg.equals("-F")) {
       useSA = true;
   }
   .....
   // now execute using the SA JStack tool or the built-in thread dumper
   if (useSA) {
       // parameters (<pid> or <exe> <core>
       ...
       runJStackTool(mixed, locks, params);
   } else {
       // pass -l to thread dump operation to get extra lock info
       String pid = args[optionCount];
        ...
       runThreadDump(pid, params);
    } 
```

由于传入了-F，调用runJStackTool加载sun.jvm.hotspot.tools.JStack，效果和直接调用一样

```
bin\java -Dsun.jvm.hotspot.debugger.useWindbgDebugger  -Dsun.jvm.hotspot.debugger.useProcDebugger  -cp lib/sa-jdi.jar;lib/tools.jar  sun.jvm.hotspot.tools.JStack pid 
```

并且 sun.jvm.hotspot.tools.JStack 将调用[sun.jvm.hotspot.bugspot.BugSpotAgent](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/jvm/hotspot/bugspot/BugSpotAgent.java#BugSpotAgent.attach%28int%29) attach -> go ->setupVM 方法

也许下面的代码是魔法

```
 jvmdi = new ServiceabilityAgentJVMDIModule(debugger, saLibNames);
       if (jvmdi.canAttach()) {
           jvmdi.attach();
           jvmdi.setCommandTimeout(6000);
           debugPrintln("Attached to Serviceability Agent's JVMDI module.");
           // Jog VM to suspended point with JVMDI module
           resume();
           suspendJava();
           suspend();
           debugPrintln("Suspended all Java threads.");
       } 
```

它将挂起目标进程中的所有 Java 线程。如果您的应用程序因线程饥饿而挂起，则挂起方法调用可能会放松它们。

# mobile - 移动站点和常规站点之间的重复代码和文件

> ID：12061227
> 
> 赞同：1
> 
> 时间：2012-08-21T18:53:19.597
> 
> 标签：mobile, dns, subdomain

我正在建立一个移动站点，该站点将位于 m.somesite.com 之类的子域上。问题是移动网站上还需要很多代码、插件等。似乎我正在剪切和粘贴该网站，而它所拥有的只是一个新皮肤......

问题是因为它是一个子域，我无法从主站点访问代码。开发使用大量来自主站点的资源的移动站点的好策略是什么？这似乎是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:57:47.833

尝试使用`[CSS media queries][1]`您可以为移动和桌面网站的不同大小设置不同的 css 样式

# c# - 将数据从 REST WCF 服务流式传输到外部 Web 服务

> ID：12061229
> 
> 赞同：1
> 
> 时间：2012-08-21T18:53:25.710
> 
> 标签：c#, .net, wcf, rest

我正在尝试编写一个 WCF Web 服务，它本质上归结为一个不受我控制的外部 Web 服务的代理（特别是一个主要的视频共享站点）。我需要能够将大约 10-100 MB 的数据从客户端发送到我的 Web 服务，然后将该数据发送到外部服务。

我可以这样做，但是为了能够扩展，我希望它尽可能多地流式传输，而不是将整个请求正文读入内存，然后将其全部发布到一个块中到外部服务。

我在我的配置中有`bindingConfiguration`设置`transferMode="Streamed"`：

```
<bindings>
  <webHttpBinding>
    <binding name="WebHttpBindingConfig" maxReceivedMessageSize="104857600"
             transferMode="Streamed"
             maxBufferSize="104857600"
             maxBufferPoolSize="104857600">
    </binding>
  </webHttpBinding>
</bindings> 
```

该服务将 a`Stream`作为其唯一参数：

```
public abstract class Upload<NetworkID> : IUpload
{
    protected abstract string DatabaseConnection { get; }

    public Stream UploadVideo(Stream stream)
    {
        LogManager.GetLogger("Logger").Trace("Upload starting:");
        try
        {
            HttpWebRequest request;
            request = (HttpWebRequest)WebRequest.Create("http://faketestservice:8800/upload");
            request.Method = "POST";
            request.ContentType = "application/octet-stream";

            request.ContentLength = WebOperationContext.Current.IncomingRequest.ContentLength;
            stream.CopyTo(request.GetRequestStream(), 64 * 1024 * 1024);
        }
        catch (Exception ex)
        {
            LogManager.GetLogger("Logger").Trace("caught: " + ex.ToString());
        }

        return new MemoryStream(Encoding.UTF8.GetBytes("hello upload"));
    }
} 
```

该服务只需获取传入请求流并将其复制到传出请求流，一次 64K。

但是，当我尝试通过 Fiddler 向服务发送一些数据（在我的示例中约为 16MB）时，监视发送到外部服务的内容（在此示例中，在我的家用计算机上运行一个假监听器），没有发送任何数据直到收到所有数据。

我尝试将`SendChunked`传出请求上的属性设置为 true，但这并没有改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:33:30.813

您在 CopyTo 函数中将缓冲区大小设置为太大。通过根本不传递缓冲区大小，将其设置为较小的值或将其保留为默认值 (4096)。您基本上是在告诉它一次传输 64MB。这意味着它将读取 64MB，发送，再读取 64MB，发送等等。

此外，您不需要为此使用“分块”。这是您不需要的 HTTP 的一个特殊功能。

除此之外，请确保 Fiddler 仅在完成后才显示响应。可能是在骗你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:38:13.933

在您的示例中，您仍然有一个 POST 读取传入流并发送多达 64MB 的数据。

如果视频共享站点可以部分获取数据，您（可能）想要做的是让您的服务循环通过传入数据，将其（通过单独的 POST）分成小块发送到最终服务？它是哪个服务？

# highcharts - HighCharts 在点击事件上保持垂直线

> ID：12061230
> 
> 赞同：1
> 
> 时间：2012-08-21T18:53:28.593
> 
> 标签：highcharts, highstock

使用这个例子：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/candlestick-and-volume/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/candlestick-and-volume/)

当您将鼠标悬停在图表上的点上时，您会看到一条漂亮的垂直线，显示您当前所在的点。我想修改单击事件，以便在单击后悬停时垂直线保持不变。单击时更改线条颜色是理想的，但不是必需的。

如果我单击另一个点，我想删除任何以前的行。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:20:45.623

[就像我说的，上面的解决方案](https://stackoverflow.com/a/12061734/1566575)真的很酷，但是有点像破解（获取准星的路径）到 highcharts 的实现细节中，并且可能在未来的版本中停止工作，可能不是完全跨浏览器（尤其是因为 < IE8 不支持 SVG，添加路径可能仍然有效，因为它应该由 highchart 的添加路径方法处理，但是获取十字准线的路径可能不起作用，我可能错了，我是 SVG 菜鸟）。所以在这里我给你[动态添加 plotLines](http://api.highcharts.com/highstock#Axis.addPlotLine%28%29)的替代解决方案。PlotLines 还允许一些附加功能，如 dashStyles、标签等。

获取单击点的轴和 x 值（可能不完全重叠十字准线）

```
 var xValue = evt.xAxis[0].value;
            var xAxis = evt.xAxis[0].axis; 
```

或者

**编辑**如果你想让 plotLine 在十字准线的位置而不是点击位置，你可以使用下面的公式（*没有直接的 API 来得到这个，从源代码获得，因此如果代码更改可能会停止工作*）

```
 var chart = this;
            var index = chart.inverted ? chart.plotHeight + chart.plotTop - evt.chartY : evt.chartX - chart.plotLeft;
            var xValue = chart.series[0].tooltipPoints[index].x; 
```

添加情节线

```
 xAxis.addPlotLine({
                value: xValue,
                width: 1,
                color: 'red',
                //dashStyle: 'dash',                   
                id: myPlotLineId
            }); 
```

您可以清理现有的情节线

```
 $.each(xAxis.plotLinesAndBands,function(){
                if(this.id===myPlotLineId)
                {
                    this.destroy();
                }
            }); 
```

或者

```
 try {
                xAxis.removePlotLine(myPlotLineId);
            } catch (err) {} 
```

把碎片放在一起

```
 var myPlotLineId="myPlotLine";
   ...
           var chart=this;
           index = chart.inverted ? chart.plotHeight + chart.plotTop - evt.chartY : evt.chartX - chart.plotLeft;
           var xValue =  chart.series[0].tooltipPoints[index];

           // var xValue = evt.xAxis[0].value; // To use mouse position and not crosshair's position
           var xAxis = evt.xAxis[0].axis;

            $.each(xAxis.plotLinesAndBands,function(){
                if(this.id===myPlotLineId)
                {
                    this.destroy();
                }
            });
            xAxis.addPlotLine({
                value: xValue,
                width: 1,
                color: 'red',
                //dashStyle: 'dash',                   
                id: myPlotLineId
            });
   ... 
```

[在单击位置添加绘图线@ jsFiddle](http://jsfiddle.net/jugal/wHnnE/)
[Persist 十字准线/光标作为单击@ jsFiddle 时的绘图线](http://jsfiddle.net/jugal/G7v8a/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:30:42.293

你可以通过几种方式做到这一点

Highchart 有一个非常酷的[渲染器](http://api.highcharts.com/highstock#object-Renderer)，它允许您向图表添加各种图形。其中一个选项是添加一条[路径](http://www.w3schools.com/svg/svg_path.asp)，我将在此处进行说明。

我们将重用十字准线的路径并将其添加到图表中，并添加一些其他样式，例如您提到的颜色。可以选择十字准线的路径，因为它是字符串形式，并且可以使用函数`this.tooltip.crosshairs[0].d`轻松转换为数组`Array.split()`

```
click: function() {
    this.renderer.path(this.tooltip.crosshairs[0].d.split(" ")).attr({
        'stroke-width': 2,
         stroke: 'red'
  }).add();
} 
```

这将完成添加行。您可以将返回的对象存储到一个全局变量中，然后当您要添加另一条这样的行时，您可以通过调用来销毁现有的[`Element.destroy()`](http://api.highcharts.com/highstock#Element.destroy%28%29)

```
 var line;
 ...
 chart:{
    events: {
        click: function() {

            if (line) {
                line.destroy();
            }
            line = this.renderer.path(this.tooltip.crosshairs[0].d.split(" ")).attr({
                'stroke-width': 2,
                stroke: 'red'
            }).add();

        }
    }
... 
```

[单击@ jsFiddle 时保持工具提示/十字准线](http://jsfiddle.net/jugal/Jee8R/)

假设您没有太多的元数据要与该行一起显示，这是最简单（或最酷:)）的方法。如果您想使用渲染器的文本对象等，您还可以附加元数据。

另一种方法可能是[将垂直 plotLines 添加到 xAxis](http://api.highcharts.com/highstock#Axis.addPlotLine%28%29)

# 更新

请参阅我对这个问题的其他解决方案，它适用于缩放、滚动等

# java - Intellij 缓存问题 - 需要重建项目

> ID：12061238
> 
> 赞同：1
> 
> 时间：2012-08-21T18:53:56.033
> 
> 标签：java, intellij-idea

我一直遇到 Intellij 的这个问题，当我向一个类添加一个新方法时，编译失败说它找不到那个新方法，可能是因为缓存不包含那个方法签名，虽然我只是添加了新方法.

我必须重建整个项目，大约需要一个小时..

我能做些什么来避免重建并节省时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:05:45.273

尝试`File`| **使缓存无效**并重新启动。如果没有帮助，请[联系 JetBrains 支持](http://www.jetbrains.com/support/support.jsp?pr=IDEA)并提供示例项目和重现步骤。

# java - 将二维数组的索引旋转 90 度

> ID：12061242
> 
> 赞同：3
> 
> 时间：2012-08-21T18:54:28.533
> 
> 标签：java, algorithm

我知道如何将整个二维数组围绕中心旋转 90 度（我的二维数组长度总是奇数），但我需要找到一种算法来旋转已知长度的二维数组的特定索引。例如，我知道 2d 数组是一个 17 x 17 的网格，我希望该方法将索引 [4][5] 围绕中心旋转 90 度，并将新索引作为两个单独的 ints(y,x) 返回；请指出我正确的方向，或者如果你觉得我很慈善，我会非常感谢一些代码——最好是在 java 中。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:00:34.693

假设笛卡尔坐标（即`x`指向右侧，`y`指向上方）并且您的坐标格式`array[y][x]`为 17x17 网格的中心 [cx, cy] 为 [8, 8]。

从那里计算点 [px, py] 的偏移量 [dx, dy] 为 [4, 5]，即 [-4, -3]

对于顺时针旋转，新位置将是 [cx - dy, cy + dx]

如果您的数组使用指向“向下”的 Y 轴，那么您将需要反转公式中的一些符号。

* * *

对于非几何解决方案，请考虑元素 [0][16] 需要映射到 [16][16]，并且 [0][0] 需要映射到 [0][16]。即第一行映射到最后一列，第二行映射到倒数第二列，等等。

如果`n`比网格的大小（即 16）小一，这意味着该点将`[y][x]`映射到`[x][n - y]`

*理论上*，几何解决方案应该提供相同的答案 - 这是等价的：

```
n = 17 - 1;

c = n / 2;

dx = x - c;
dy = y - c;

nx = c - dy = c - (y - c) = 2 * c - y = n - y
ny = c + dx = c + (x - c) = x 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:10:20.707

笛卡尔空间中`x,y`逆时针旋转 90 度的点映射到`-y,x`。

具有 N 列和 M 行的数组将映射到由 M 列和 N 行组成的数组。新的“x”索引将是非正数，并通过添加 M 使其从零开始：

`a[x][y]`映射到`a[M-y][x]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T19:19:50.240

如果您有一个方形数组，`N`每行/列中都有元素，则 90 度逆时针/逆时针旋转发送`(x,y)`到`(N+1-y,x)`不是吗？

也就是说，如果像我一样，您认为方形数组中左上角的元素是`(1,1)`，并且行号向下增加，列号向右增加。我猜想计算的人`0`将不得不稍微调整公式。

# perforce - 在 P4 同步上替换客户端路径

> ID：12061248
> 
> 赞同：0
> 
> 时间：2012-08-21T18:54:37.317
> 
> 标签：perforce

我有一个引用其他文件的 XML 文件。我不能在这个文件中使用相对路径和变量。

是否可以以某种方式将模板和一些脚本添加到 P4 存储库中，以在同步时生成该文件？例如，我可以根据 P4 客户端根目录的位置使用 sed 之类的微不足道的东西来更新路径。

我真的很想让这个透明，所以我知道这个文件总是正确的版本并且包含实际信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T01:29:39.130

Try:

```
p4 info | grep 'Client root' 
```

or:

```
p4 -ztag client -o | grep Root 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:30:18.083

如果您的意思是想要动态根目录，请尝试将“null”（不带引号）放在工作空间的根路径中，工作空间的根目录将是您所在的任何目录。

如果您尝试创建一个动态工作区，您可以创建一个工作区的文本文件（p4 client -o > template_worksapce.txt）并在其上使用 sed 创建一个工作区，然后通过`p4 client -i`

那是你要找的吗？

# javascript - 不执行 applyBindings 后的剔除选项/值绑定 javascript

> ID：12061250
> 
> 赞同：0
> 
> 时间：2012-08-21T18:54:43.213
> 
> 标签：javascript, data-binding, knockout.js

我终于得到了选项和值的绑定，可以在我的下拉组件上工作。我现在的工作除了未执行该值的 applyBinding 之后的所有 javascript 之外。当我一次在页面上只有一个下拉菜单时，这不是问题。

但是，大多数时候，我需要使用多个。当我在这样的页面上单步执行脚本时，它会为第一个下拉菜单执行 applyBinding 并停止。没有进一步的脚本运行，只有第一个下拉菜单有效。

为什么是这样？更重要的是，我该如何解决？

以下是相关的代码行：

```
$(function () {      
  var $thisdd = $("#@ddname");  //the JQuery selector for my dropdown       
  var dropdownItems = getDropdownItemsFromDl("@ddname");       
  var newitem = ko.observable({ cname: ddcname, cvalue: ko.observable($thisdd.val()), cpublishtopic: "" });      
  classificationsViewModel.push(newitem());       
  var viewModel =     
    {         
      dditems : dropdownItems      
    };    
  $("#@ddname").attr("data-bind", "value: classificationsViewModel()[" + classificationsViewModel.indexOf(newitem()) + "].cvalue, options: dditems, optionsText: 'value', optionsValue: 'key'");   
  ko.applyBindings(viewModel);   
  ko.applyBindings(classificationsViewModel()[classificationsViewModel.indexOf((newitem())].cvalue); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:45:25.490

当您调用 时`ko.applyBindings`，Knockout 会将模型应用于整个文档。如果您有一个模型用于整个页面，那就太好了。

似乎每个下拉菜单都需要一个模型。请参阅[http://knockoutjs.com/documentation/observables.html#activating_knockout上的可选参数](http://knockoutjs.com/documentation/observables.html#activating_knockout)

然后，您可以通过类似的方式将单独的模型绑定到每个下拉列表`ko.applyBindings(viewModel, $('#@ddname')[0]);`

我不明白这个简介试图做什么：

```
value: classificationsViewModel()[" + classificationsViewModel.indexOf(newitem()) + "].cvalue 
```

您似乎正在尝试使用两种不同的模型来控制下拉菜单。我相当肯定这不会有好的结局。尝试使用一种模型~~来统治它们~~以处理所有下拉菜单。我认为您会发现它更容易维护和逻辑化。

# python - PyQt Multiple Windows - 如何在模块之间传递函数 Qt Designer

> ID：12061251
> 
> 赞同：3
> 
> 时间：2012-08-21T18:54:44.063
> 
> 标签：python, pyqt, qt-designer

我将从这个问题开始，然后尝试解释：导入的模块有没有办法调用导入它的模块中的函数？

我刚刚学习使用 Qt，并开始使用 Qt Designer 来解决一些基础知识。

我已经弄清楚如何创建多个“.ui”文件以获取多个窗口的代码，并设法通过导入两个窗口的代码从主应用程序调用多个窗口。

例如，从 win1.ui 和 win2.ui 开始，我创建 win1.py 和 win2.py - 从我的主应用程序中导入 win1 和 win2 ...

注意 - 我按照这个简单的教程走了这么远：[http ://www.youtube.com/watch?v=bHsC6WJsK-U&list=PLF4575388795F2531&index=10&feature=plpp_video](http://www.youtube.com/watch?v=bHsC6WJsK-U&list=PLF4575388795F2531&index=10&feature=plpp_video)

好的 - 现在是问题。如果我在 win2 中有一个按钮，我知道如何将该按钮链接到 win2.py 代码中的函数。我不知道该怎么做是将win2中的按钮链接到我的主应用程序中的一个函数。

我唯一的想法是将一个函数作为参数添加到设置第二个窗口的类中，但如果我这样做，那么对 win2.ui 的任何更改都会破坏我更改的代码。

因此，导入的模块有没有办法调用导入它的模块中的函数？

我希望在不添加一堆不相关的代码的情况下清楚这一点......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:10:28.033

Qt 基于事件驱动编程。通常，当您开始构建小部件时，您想要做的是通过随后处理的*信号向接收器小部件提供信息。*您不希望显式地让子小部件知道或要求调用父小部件上的方法（并非**总是**如此，但最好尽可能避免）。

为了方便起见，我将发布一些没有 UI 文件的示例，但假设您可以使用设计器构建相同的小部件并让它以相同的方式工作......

*测试小部件.py*

```
from PyQt4 import QtGui, QtCore

class TestWidget(QtGui.QWidget):
    textSaved = QtCore.pyqtSignal(str)

    def __init__( self, parent = None ):
        super(TestWidget, self).__init__(parent)

        # create the ui (or load it)
        self.__edit   = QtGui.QTextEdit(self)
        self.__button = QtGui.QPushButton(self)
        self.__button.setText('Save')

        layout = QtGui.QVBoxLayout()
        layout.addWidget(self.__edit)
        layout.addWidget(self.__button)
        self.setLayout(layout)

        # create connections
        self.__button.clicked.connect(self.emitTextSaved)

    def emitTextSaved( self ):
        # allow Qt's blocking of signals paradigm to control flow
        if ( not self.signalsBlocked() ):
            self.textSaved.emit(self.__edit.toPlainText()) 
```

*测试窗口.py*

```
from PyQt4 import QtGui, QtCore
import testwidget

class TestWindow(QtGui.QMainWindow):
    def __init__( self, parent == None ):
        super(TestWindow, self).__init__(parent)

        # create the ui (or load it)
        self.__editor = testwidget.TestWidget(self)
        self.setCentralWidget(self.__editor)

        # create connections
        self.__editor.textSaved.connect(self.showMessage)

    def showMessage( self, message ):
        QtGui.QMessageBox.information(self, 'Message', message) 
```

因此，在这里您可以看到，而不是像“当我单击 TestWidget 中的按钮时，我想在 TestWindow 中显示一条消息”并明确链接这两个方法一样思考它，而是公开了一个信号，即 TestWidget 将在何时发出用户执行一个动作，然后将该信号连接到 TestWindow 的 showMessage 插槽。这样，您的较小的小部件变得更加独立，并且更多的是您如何连接到驱动您的应用程序的每个事件。

我本可以在 TestWidget 的 emitTextSaved 方法中执行类似 self.parent().showMessage(self.__edit.toPlainText()) 的操作来直接调用该方法——但这不是一个好的设计。

# javascript - 第一次单击当前编辑行中的 ComboBox 时，Ext 4 RowEditor 编辑取消

> ID：12061254
> 
> 赞同：1
> 
> 时间：2012-08-21T18:54:56.973
> 
> 标签：javascript, extjs, extjs4

我有一个`Ext.grid.Panel`带有 RowEditor 的插件，它包含一个带有组合框编辑器的列：

```
 {
        dataIndex: 'parentId',
        text: 'Parent category',
        editor: {
            store: store,
            valueField: 'categoryId',
            displayField: 'name',
            xtype: 'combobox',
            allowBlank: true
   } 
```

商店长这样：

```
var store = Ext.create('Ext.data.Store', {
    model: 'Category',
    autoLoad: true,
    proxy: {
        type: 'rest',
        url: 'api/categories',
        reader: {
            type: 'json',
            root: 'categories'
        }
    }
}); 
```

和型号：

```
Ext.define('Neopod.model.Category', {
    extend: 'Ext.data.Model',
    fields: ['categoryId', 'name', 'parentId'],
}) 
```

当第一次编辑网格行并单击组合框时，ExtJS 会触发从服务器加载数据，并且 roweditor 会自动取消。所以用户希望看到组合下拉列表，但组合没有打开，而是编辑模式取消。

那么为什么 ExtJS 会这样呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:07:12.300

一个简单的处理是使用：配置您的组合框，`queryMode: 'local'`以便在展开时不会尝试重新加载。

使用您的示例：

```
{
    dataIndex: 'parentId',
    text: 'Parent category',
    editor: {
        store: store,
        valueField: 'categoryId',
        displayField: 'name',
        xtype: 'combobox',
        allowBlank: true,
        queryMode: 'local'
   }
} 
```

您也可以尝试`RowEditing`使用例如配置您的插件`autoCancel: false`：

```
Ext.create('Ext.grid.plugin.RowEditing', {
    pluginId: 'rowediting',
    clicksToEdit: 2,
    autoCancel: false
}); 
```

# python - 将python代码（linux）移植到windows

> ID：12061262
> 
> 赞同：2
> 
> 时间：2012-08-21T18:55:42.877
> 
> 标签：python, linux

我在 Linux（Ubuntu 9.10）下使用 python 和 PyQT4 和其他模块（如 numpy、scipy 等）编写了一个程序。现在我想要这个程序在 Windows 7 下的可执行文件。我不想在 Windows 7 操作系统上安装 Python。

我在 linux 下尝试了 pyinstaller、cx_freeze 和 py2exe，但我只生成了一个 linux 可执行文件，它在 linux 下运行良好，但在 Windows 下无法运行。

现在我的问题是。

1.  我的任务是否可能或需要我在 Windows 7 上安装 Python 和所需的包以使用 pyinstaller 生成可执行文件，例如？

2.  如果可能的话-->解决问题的方法是什么。

问候拉尔斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:06:29.143

我只有 py2exe 和 pyqt4 的经验，但是 py2exe 需要几个只能存在于 Windows 环境中的 dll（如 Visual C 运行时库或 Qt 的 dll）。使用 Wine 可能可以破解它，但拥有用于打包所有内容的 Windows 环境是“受支持”的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:21:19.267

PyInstaller 的[Supported Packages 页面](http://www.pyinstaller.org/wiki/SupportedPackages)将 PyQT4 列为受支持，因此我会尝试一下 - 只需让您的应用程序在 Windows 7 下作为常规 Python 应用程序运行，然后像往常一样运行 PyInstaller。根据个人经验，我知道它可以顺利处理 matplotlib、NumPy 和 SciPy。

# c# - WebControl 中呈现的解析表

> ID：12061263
> 
> 赞同：0
> 
> 时间：2012-08-21T18:55:55.173
> 
> 标签：c#, linq, html-parsing, dom

**HTML 正在使用内置 WebControl 的 WinForm 中显示**

我决定尝试 HTMLAgilityPack。

```
var query = from table in doc.DocumentNode.SelectNodes("//table[@class='TABLEBORDER').Cast<HtmlNode>() 
            from row in table.SelectNodes("tr").Cast<HtmlNode>() 
            from cell in row.SelectNodes("th|td").Cast<HtmlNode>() 
            select new {Table = table.Id, CellText = cell.InnerText}; 

foreach(var cell in query) { 
    Console.WriteLine("{0}: {1}", cell.Table, cell.CellText); 
} 
```

我根据@LB更新了代码我得到以下输出

```
The thread '<No Name>' (0x1e94) has exited with code 0 (0x0).
: 
Target

: 
Triggerenabled?

: 
Account

: 
Passwordchanged?

: 
Error message(if any)

The thread '<No Name>' (0x2564) has exited with code 0 (0x0). 
```

其他数据在 web 控件上清晰可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:47:24.817

> 该页面还有其他表，但我只对类为“TABLEBORDER”的表感兴趣。

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var table = doc.DocumentNode.SelectSingleNode("//table[@class='TABLEBORDER']"); 
```

**编辑**

```
var res = table.Descendants("tr")
               .Select(tr => tr.Descendants("td")
                               .Select(td => td.InnerText)
                               .ToList())
               .ToList(); 
```

**编辑2**

```
foreach (List<string> tr in res)
{
    foreach (string td in tr)
    {
        Console.Write("[{0}] ", td);
    }
    Console.WriteLine();
} 
```

# nsview - NSView 相当于 UIView 剪辑子视图？

> ID：12061265
> 
> 赞同：12
> 
> 时间：2012-08-21T18:55:58.310
> 
> 标签：nsview, subview, bounds, clip

有没有办法禁用 NSView 子视图的剪辑？在 UIView 中有一个“剪辑子视图复选框”和支持`clipToBounds`属性，但我在 Cocoa 中找不到类似的东西。

这是我的场景：我有一个可以在屏幕上拖动的灰点：

![](../Images/baa0a5493c426b389a10ff31c663d1fc.png)

当用户拖动点时，我想显示背景中的上下箭头。向上箭头位于 NSView 的边界之外，其中包含点和箭头。

![](../Images/bdec4311d1f30dfcdcc5aed3a3a26033.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-03T13:24:50.210

您可以使用该`[NSView frameForAlignmentRect:]`方法。它定义了用于基于约束的布局的框架。实际框架可以大得多，以便在移动视图时显示箭头。

Cocoa 正在使用此功能来补偿阴影或视图的其他部分，这些部分不“算”为控件的实际框架。

从文档中：

> 基于约束的布局系统使用对齐矩形来对齐视图，而不是它们的框架。这允许自定义视图根据其内容的位置对齐，同时仍然有一个框架，其中包含他们需要在其内容周围绘制的任何装饰，例如阴影或反射。

# mysql - ZeosLib DataSets 是否需要执行 FetchAll 方法才能返回真实的总行数？

> ID：12061267
> 
> 赞同：0
> 
> 时间：2012-08-21T18:56:03.803
> 
> 标签：mysql, delphi, zeos

在 Firebird/Interbase 数据库中，我们有`TIBQuery`、`TIBTable`和`TIBDataSet`，它们具有`FetchAll`计算数据集有多少行的方法。如果我们不调用该方法，这些数据集只会注册为“总”用户已经通过 a`TDBGrid`或看到的行数`TDBNavigator`。这个“总数”可以通过调用这些数据集的 `RecordCount' 方法来检索。

另一种（更有效）获取实际总行数的方法是获取单独的数据集并执行一些`SELECT COUNT(*) FROM TABLE_NAME`并应用我们喜欢的任何过滤器。到目前为止还可以。

但是现在我正在通过 ZeosLib 使用 MySQL，我想知道是否需要麻烦才能在内存上进行第二次查询。

我们知道 ZeosLib 进行查询，它可能会在内部返回该查询的统计信息，其中包括返回的行数。

ZeosLib 是否将该信息放入其中，`RecordCount`或者它是否与 Interbase 组件完全一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:03:53.483

1.  Zeos 返回已获取记录的数量。它不考虑任何应用的过滤器，并且`FetchAll`在返回之前不考虑`RecordCount`。
2.  `SELECT COUNT(*) ...`不是“更有效率”，因为它会创建额外的服务器工作负载，有时可能等于执行原始查询的工作负载。
3.  一般来说，数据访问库可以提供 3 种记录计数计算模式：获取的行数、可见行数（如第一次，但在应用过滤器之后）和`SELECT COUNT(*)`. FetchAll 或不 FetchAll 将更好地明确控制。这就是在[AnyDAC](http://www.da-soft.com/anydac/)（[更多](http://www.da-soft.com/anydac/docu/uADStanOption_TADFetchOptions_RecordCountMode.html)）中完成此操作的方式。

# asp.net - Asp.Net - 有没有办法为应用程序的所有控件设置属性？

> ID：12061269
> 
> 赞同：0
> 
> 时间：2012-08-21T18:56:16.470
> 
> 标签：asp.net, button, double-click

我有一个系统，今天遇到问题，当用户双击按钮控件时，系统处理了两次操作。我在按钮上找到了使用此代码的解决方案：

```
OnClientClick = "this.disabled = true; this.value = 'submiting ...';" UseSubmitBehavior = "false" 
```

但是，我在系统中有几个页面，有几个按钮......有没有办法将这些属性设置为应用程序的所有按钮？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:01:39.987

我不确定，但似乎可以通过皮肤文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:14:53.707

通过使用 JQuery 并**禁用所有提交控件**（[jsfiddle](http://jsfiddle.net/njBjW/2/)）来使用**客户端方法**怎么样？

 **```
$(document).ready(function () {
  $(' :submit').click(function (event) {
        $(this).attr("disabled","true");
  });
});​ 
```

我对 JQuery 很陌生，所以如果有更好的解决方案或者我完全错了，请告诉我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:08:48.370

您可以创建自定义按钮。在这里，您有示例如何创建在客户端单击时显示确认窗口的按钮。几乎是你不想要的。

[http://dhavalupadhyaya.wordpress.com/2008/07/20/creating-custom-controls-in-asp-net/](http://dhavalupadhyaya.wordpress.com/2008/07/20/creating-custom-controls-in-asp-net/)

比您必须将每个页面上的所有 asp:Buttons 更改为 someTag:YourButton。也许简单的查找/替换。但我认为有可能在 web.config 中进行配置，以便 ASP.NET 每次看到 asp:Button 时都使用 someTag:YourButton。但是现在找不到怎么做。**

# map - 在 RavenDB Map/Reduces 中处理可为空字段的正确方法？

> ID：12061274
> 
> 赞同：3
> 
> 时间：2012-08-21T18:56:38.643
> 
> 标签：map, mapreduce, ravendb, nullable, reduce

我应该如何映射具有可为空字段的对象？我想我必须将可为空的字段转换为不可为空的版本，这就是我偶然发现的那一步。

映射可空属性的正确方法是什么？

```
public class Visit {
    public string Id { get; set; }
    public int? MediaSourceId { get; set; }
}

public class MapReduceResult
{
    public string VisitId { get; set; }
    public int MediaSourceId { get; set; }
    public string Version { get; set; }
    public int Count { get; set; }
}

AddMap<Visit>(
    visits =>
    from visit in visits
    select new
        {
            VisitId = visit.Id,
            MediaSourceId =
                (visit.MediaSourceId.HasValue)
                ? visit.MediaSourceId
                : UNUSED_MEDIASOURCE_ID,
            Version = (string) null,
            Count = 1
        }); 
```

这不行！实际上; 此 Map 被完全忽略，而其他 Map 工作正常，并且它们最终按预期减少。

谢谢你帮助我！

下面是一个新添加的测试用例，失败并显示“无法将 <null> 分配给匿名类型属性”。我应该如何以最少的痛苦让这架飞机飞起来？

```
[TestFixture]
public class MyIndexTest
{
    private IDocumentStore _documentStore;

    [SetUp]
    public void SetUp()
    {
        _documentStore = new EmbeddableDocumentStore {RunInMemory = true}.Initialize();
        _documentStore.DatabaseCommands.DisableAllCaching();

        IndexCreation.CreateIndexes(typeof (MyIndex).Assembly, _documentStore);
    }

    [TearDown]
    public void TearDown()
    {
        _documentStore.Dispose();
    }

    [Test]
    public void ShouldWork()
    {
        InitData();

        IList<MyIndex.MapReduceResult> mapReduceResults = null;
        using (var session = _documentStore.OpenSession())
        {
            mapReduceResults =
                session.Query<MyIndex.MapReduceResult>(
                    MyIndex.INDEX_NAME)
                    .Customize(x => x.WaitForNonStaleResults()).ToArray();
        }
        Assert.That(mapReduceResults.Count, Is.EqualTo(1));
    }

    private void InitData()
    {
        var visitOne = new Visit
                           {
                               Id = "visits/64",
                               MetaData = new MetaData {CreatedDate = new DateTime(1975, 8, 6, 0, 14, 0)},
                               MediaSourceId = 1,
                           };
        var visitPageVersionOne = new VisitPageVersion
                                      {
                                          Id = "VisitPageVersions/123",
                                          MetaData = new MetaData {CreatedDate = new DateTime(1975, 8, 6, 0, 14, 0)},
                                          VisitId = "visits/64",
                                          Version = "1"
                                      };

        using (var session = _documentStore.OpenSession())
        {
            session.Store(visitOne);
            session.Store(visitPageVersionOne);
            session.SaveChanges();
        }
    }

    public class MyIndex :
        AbstractMultiMapIndexCreationTask
            <MyIndex.MapReduceResult>
    {
        public const string INDEX_NAME = "MyIndex";

        public override string IndexName
        {
            get { return INDEX_NAME; }
        }

        public class MapReduceResult
        {
            public string VisitId { get; set; }
            public int? MediaSourceId { get; set; }
            public string Version { get; set; }
            public int Count { get; set; }
        }

        public MyIndex()
        {
            AddMap<Visit>(
                visits =>
                from visit in visits
                select new
                           {
                               VisitId = visit.Id,
                               MediaSourceId = (int?) visit.MediaSourceId,
                               Version = (string) null,
                               Count = 1
                           });
            AddMap<VisitPageVersion>(
                visitPageVersions =>
                from visitPageVersion in visitPageVersions
                select new
                           {
                               VisitId = visitPageVersion.VisitId,
                               MediaSourceId = (int?) null,
                               Version = visitPageVersion.Version,
                               Count = 0
                           });
            Reduce =
                results =>
                from result in results
                group result by result.VisitId
                into g
                select
                    new
                        {
                            VisitId = g.Key,
                            MediaSourceId = (int?) g.Select(x => x.MediaSourceId).FirstOrDefault(),
                            Version = g.Select(x => x.Version).FirstOrDefault(),
                            Count = g.Sum(x => x.Count)
                        };
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:18:39.243

您不需要做任何事情来给予可空值特殊待遇。RavenDB 已经解决了这个问题。

# sql-server - datetime2 存储大小

> ID：12061276
> 
> 赞同：6
> 
> 时间：2012-08-21T18:56:50.907
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

使用 SQL Server 2008 R2，SP2[文档](http://technet.microsoft.com/en-us/library/bb677335.aspx)说**datetime2**需要 6、7 或 8 个字节，具体取决于您使用的女巫精度

我需要以二进制形式（连接值）存储大量数据，并且我喜欢每个日期时间仅使用 6 个字节的想法，但是当我尝试时：

```
declare @_dt_p0 datetime2(0) = '2012-05-18 11:22:33'
select  CONVERT(varbinary, @_dt_p0), LEN(CONVERT(varbinary, @_dt_p0))

declare @_dt_p4 datetime2(4) = '2012-05-18 11:22:33'
select  CONVERT(varbinary, @_dt_p4), LEN(CONVERT(varbinary, @_dt_p4))

declare @_dt_p7 datetime2(7) = '2012-05-18 11:22:33'
select  CONVERT(varbinary, @_dt_p7), LEN(CONVERT(varbinary, @_dt_p7)) 
```

它显然需要一个额外的字节，我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T19:20:41.570

我想我无法解释为什么 varbinary 转换的长度/数据长度是 7 而不是 6（Mikael 后来发现[转换为 varbinary 将精度添加为额外的字节](http://weblogs.sqlteam.com/peterl/archive/2010/12/15/the-internal-storage-of-a-datetime2-value.aspx)），但我不知道为什么你认为那是无论如何，一个有效的测试。我可以确认，当您使用实际列时，页面上存储了 6 个字节（尽管该行的空开销会有所不同，具体取决于该列是否可为空）。我怎样才能证明这一点？

```
USE tempdb;
GO

CREATE TABLE dbo.x
(
 d1 DATETIME2(0)  NULL, 
 v1 VARBINARY(32) NULL,
 d2 DATETIME2(0)  NOT NULL, 
 v2 VARBINARY(32) NOT NULL
);

declare @d datetime2(0) = '2012-05-18 11:22:33';

INSERT dbo.x(d1, v1, d2, v2)
SELECT @d, CONVERT(VARBINARY(32), @d), @d, CONVERT(VARBINARY(32), @d);

SELECT DATALENGTH(d1), DATALENGTH(v1), 
       DATALENGTH(d2), DATALENGTH(v2) FROM dbo.x; 
```

结果：

```
6    7    6    7 
```

因此，datetime2 列是 6 个字节，但 varbinary 列是 7 个字节。不管是否为空。我们可以通过实际检查页面来仔细观察。让我们在堆中查找该表的所有页面：

```
DBCC IND('tempdb', 'dbo.x', 0); 
```

我的系统上的部分结果（你的会有所不同）：

```
PagePID  PageType
283      10
311      1 
```

所以现在让我们看一下第 311 页：

```
DBCC TRACEON(3604, -1);
DBCC PAGE(2, 1, 311, 3); 
```

我们可以看到 datetime2 列确实在页面上占据了 6 个字节：

```
Slot 0 Column 1 Offset 0x4 Length 6 Length (physical) 6

d1 = 2012-05-18 11:22:33            

v1 = [Binary data] Slot 0 Column 2 Offset 0x19 Length 7 Length (physical) 7
v1 = 0x00f99f00b0350b               

Slot 0 Column 3 Offset 0xa Length 6 Length (physical) 6

d2 = 2012-05-18 11:22:33            

v2 = [Binary data] Slot 0 Column 4 Offset 0x20 Length 7 Length (physical) 7
v2 = 0x00f99f00b0350b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-10T08:46:22.990

再会，

首先我想说这是最好的问题：“我不知道你为什么认为这是一个有效的测试”，因为答案是**这不是有效的测试**！

您可以阅读有关该问题的所有内容，包括对 DateTime2 实际存储格式的说明，以及为什么检查“CONVERT to binary”的结果并假设这与实际存储的数据相同是错误的！它在 varchar 或 nvarchar 等可变长度数据中不准确，在 DateTime2 中也不准确。检查和获取真实存储格式的唯一方法是使用 DBCC PAGE 检查数据本身。 [http://ariely.info/Blog/tabid/83/EntryId/162/Examine-how-DateTime2-type-stored-in-the-data-file.aspx](http://ariely.info/Blog/tabid/83/EntryId/162/Examine-how-DateTime2-type-stored-in-the-data-file.aspx)

**我希望这很有用:-)**

# user-interface - 用于 Windows 的 UI 自动化工具（嵌入在 Windows 应用程序中的网页）

> ID：12061278
> 
> 赞同：1
> 
> 时间：2012-08-21T18:57:03.500
> 
> 标签：user-interface, testing, automation, automated-tests

我们在 Outlook 插件中嵌入了一个网页（html）。过去，我们曾尝试使用 AutoIt 和 MS UI 自动化框架自动化 UI 测试，并借助兑换来打开/关闭 Outlook 等。但是我们在访问插件内网页内的元素时遇到了问题（我们能够访问 Windows 元素）。

有人知道任何可以帮助我们的自动化工具/框架吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:02:10.187

试试[西库里](http://sikuli.org/)吧。从[教程](http://sikuli.org/docx/tutorials/index.html)开始。

我想不出任何其他解决方案，因为您在非常自定义的情况下工作。

# coldfusion - cfdocument 防止中间行分页符

> ID：12061281
> 
> 赞同：5
> 
> 时间：2012-08-21T18:57:15.103
> 
> 标签：coldfusion

我知道以前有人问过这个问题，但解决方案是 2.5 年前的，所以我问是否有人设计或知道使用 CF9 解决问题的更优雅的解决方案。谁能确认 CF10 是否支持“page-break-inside：避免”规则？

[如何防止 CFDocument 中的分页出现在内容中间？](https://stackoverflow.com/questions/654630/how-can-i-prevent-page-break-in-cfdocument-from-occuring-in-middle-of-content)

[COLDFUSION：cfdocument 并强制分页](https://stackoverflow.com/questions/2112866/coldfusion-cfdocument-and-forcing-a-pagebreak)

这几乎就是我正在做的事情。我估计，根据它是什么类型的页面，在强制分页之前我可以容纳 9 或 11 行数据。当然，这很容易中断，所以如果有人知道解决方案的任何演变，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:42:53.037

我相信我找到了一个伪解决方案。这基本上就是我在上面的评论中所说的。我做了一个最好的猜测，看看它是否适合使用 cfpdf 的 getInfo.totalPages 的值。如果合适，很好，将其合并到最终文档，如果不合适，请少一行重试。

这样做的缺点是它会减慢它的速度，并且您不能使用一些 cfdocument 使之变得容易的东西，例如弄乱页眉和页脚。话虽如此，该解决方案的第 2 部分可能是在数组中记录适合页面的行数，而不是合并页面并使用 cfdocument 重新构建整个文档，并且这些值作为循环约束强制分页后. 事实上，下面的解决方案已经有点耗时，因此在 cfdocument 标记内再次构建它可能无法在高流量站点中工作。

**错误解决方法：** cfdocument 似乎存在一个错误，即在使用 name 属性将文档保存到内存时会删除背景颜色。解决方法是将 cfdocument 标记删除到外部文件。我看到一位程序员将它放入 cfc，我发现可以使用简单的 cfinclude。

我希望有人觉得这很有帮助，如果您知道更好的方法，请发表评论。

```
<cfset reviewText = "Lorem ipsum dolor sit amet, + lots of characters.">
<cfset estimatedRowsPerPage = 7> <!--- This is the max number of records you want to try on each page.  The larger the gap between max and actual will slow down the process. Used to reset attemptedRowsPerPage if the value changes --->
<cfset attemptedRowsPerPage = estimatedRowsPerPage> <!---- number of rows attempted to add to the page --->
<cfset totalRowsOutput = 0><!--- this is the number of records successfully saved to the final PDF --->
<cfset recordCount = 20> <!--- this is the query's record count --->
<!--- cfpdf cannot create a file from scratch and cfdocument requires some content so a container object cannot be created without at least one page. This page will be deleted later --->
<cfdocument format="pdf" marginbottom=".25" margintop=".25" marginleft=".25" marginright=".25" name = "finalDocument">Delete me</cfdocument>
<cfloop condition="totalRowsOutput lt recordCount">
    <!--- create what *should* be a single page document --->
    <cfdocument format="pdf" marginbottom=".25" margintop=".25" marginleft=".25" marginright=".25" name = "testDocument">
        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <title>A title</title>
            </head>
            <body>
                <table border="1">
                    <tr>
                        <td>Row:</td>
                        <td>Title:</td>
                        <td>Author:</td>
                        <td>Price:</td>
                        <td>Average Rating:</td>
                        <td>Reviews:</td>
                    </tr>
                    <cfoutput>
                    <cfloop from = "1" to = "#attemptedRowsPerPage#" index = "i">
                        <tr>
                            <td>
                                #i#
                            </td>
                            <td nowrap="nowrap">
                                #mid(reviewText,1,randRange(4,10))#
                            </td>
                            <td nowrap="nowrap">
                                #mid(reviewText,20,randRange(8,20))#
                            </td>
                            <td>
                                $10.00
                            </td>
                            <td>
                                #randRange(1,5)#
                            </td>
                            <td>
                                #mid(reviewText,1,randRange(10,700))#
                            </td>
                        </tr>
                    </cfloop>
                    </cfoutput>
                </table>
            </body>
        </html>
    </cfdocument>
    <!--- get the document info to see if the page count = 1 --->
    <cfpdf action="getinfo" source="testDocument" name="testInfo">
    <cfif testInfo.totalPages gt 1>
        <!--- if the page count is greater than 1 we need to try again with one less record. --->
        <cfset attemptedRowsPerPage -= 1>
    <cfelse>
        <!--- merge the new single page to the final document --->
        <cfpdf action = "merge" name = "finalDocument">
            <cfpdfparam source="finalDocument">
            <cfpdfparam source="testDocument">
        </cfpdf>
        <cfset totalRowsOutput += attemptedRowsPerPage>
        <!--- if the page count = 1, we need to increment the startAttempt and reset the attemptedRowsPerPage unless attemptedRowsPerPage = recordCount --->
        <cfif totalRowsOutput lt recordCount>
            <!--- don't try to output more than exist --->
            <cfset attemptedRowsPerPage = estimatedRowsPerPage+totalRowsOutput lt recordCount ? estimatedRowsPerPage : recordCount-totalRowsOutput>
        </cfif>
    </cfif>
</cfloop>
<!--- delete the manditory page needed to create our final document --->
<cfpdf action="deletePages" pages="1" source="finalDocument" name="finalDocument">
<!--- see "http://www.raymondcamden.com/index.cfm/2007/7/12/ColdFusion-8-Working-with-PDFs--A-Problem" to see why you need toBinary --->
<cfcontent type="application/pdf" variable="#toBinary(finalDocument)#"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:14:36.477

特拉维斯 - 我不知道另一种方法可以做到这一点。通常我会创建一个 HTML 表格作为每个“页面”的核心，并在关闭表格、打破页面并打开新表格之前拥有特定数量的行。

# json - 流星在客户端集合中插入日期或时间戳

> ID：12061282
> 
> 赞同：4
> 
> 时间：2012-08-21T18:57:15.850
> 
> 标签：json, mongodb, date, meteor, isodate

我期待具有 Date 属性的对象将作为 ISODate 从客户端或服务器端保存在 Mongo 中，但事实并非如此。

当我做

```
if (Meteor.is_client()){
    Collection.insert({text : "Client", number : 1, date : new Date() });
    Collection.insert({text : "Client", number : 2, date : (new Date()).getTime() });
}
else {
    Collection.insert({text : "Server", number : 1, date : new Date() });
} 
```

在mongo中它像这样保存

```
{_id : "xx-xx-xx-xx-xx", text : "Client", number : 1, date : "2012-08-21T18:40:47.446" }
{_id : "xx-xx-xx-xx-xx", text : "Client", number : 2, date : 1345574805367 }
{_id : "xx-xx-xx-xx-xx", text : "Server", number : 1, date : ISODate(2012-08-21T18:40:47.446) 
```

有没有办法从客户端将具有 Date 属性的对象保存为 ISODate？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T01:24:03.860

对我来说，我不会从客户端发送时间戳。相反，我在通过分支`Collection.allow`下的函数插入时修改了文档。`auth`

我认为这样做有几个好处-

*   客户端无需插入日期字段，节省代码。

*   时间戳是基于服务器时间的，而不是客户端的，应该更准确。

*   最后，字段值是 ISODate，而不是字符串。（讨厌不支持原生日期类型的 JSON）

# php - 修改后的 PHP PDO 登录脚本仍然不起作用

> ID：12061285
> 
> 赞同：-1
> 
> 时间：2012-08-21T18:57:34.803
> 
> 标签：php, sql, pdo, prepared-statement

我在这里学习 php 和 OOP 编程。我正在尝试修改以下工作代码以防止 sql 注入。其他人向我展示了如何使用 PDO 的想法。但我很难让它发挥作用。

基本上这个功能是通过`$uid`和`$password`检查用户。我究竟做错了什么？

用户函数.php

```
<?php

class DB_Functions {

    private $db;

    function __construct() {

        require_once 'db_connect.php';

        $this->db = new DB_Connect();
        $this->db->connect();
    }

    public function getUser($uid, $password) {
        $result = mysql_query("SELECT * FROM users WHERE id = '$uid' AND pswd = '$password'") or die(mysql_error());

        $no_of_rows = mysql_num_rows($result);
        if ($no_of_rows > 0) {

            $result = mysql_fetch_array($result);
            return $result;    

        } else {

            return false;
        }
    }

}

?> 
```

修改代码

```
<?php

class DB_Functions {

    private $db;

    function __construct() {

        require_once 'db_connect.php';

        $this->db = new DB_Connect();
        $this->db->connect();
    }

    public function getUser($uid, $password) {
        $stmt = $db->prepare("SELECT * FROM users WHERE id=? AND pswd=?");
        $stmt->execute(array($uid, $password));
        return $stmt->fetch();
    }

}

?> 
```

检查用户（index.php）

```
require_once 'include/db_functions.php';
$db = new DB_Functions();

if ($tag == 'login') {

    $uid =mysql_real_escape_string($_POST['id']);
    $password =mysql_real_escape_string($_POST['pswd']);

    // check for user
    $user = $db->getUser($uid, $password);

    if ($user != false) {

        $response["success"] = 1;
        $response["user"]["id"] = $user["id"];

        echo json_encode($response);
    } else {

        $response["error"] = 1;
        $response["error_msg"] = "Incorrect email or password!";
        echo json_encode($response);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T18:59:49.280

您完全错过了 PDO 的重点。通过使用占位符正确准备的查询，您不必自己进行任何转义。

同样， mysql_real_escape_string() 依赖于建立的活动数据库连接`mysql_connect()`。没有它，您的 m_r_e_s() 将无法工作，并且会为“失败”返回布尔值 false。然后，您尝试在查询中使用这些错误值。

由 PDO 建立的 DB 连接不能与 mysql_ *()、mysqli_* () 等共享。这些库中的每一个都维护着自己独立的连接池。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:00:17.040

您正在使用 PDO，因此您不能使用`mysql_real_escape_string()`. 您不需要转义参数，因为 PDO 会在您准备好的查询中自动为您转义它们。

因此，只需`getUser()`像这样调用：

```
if ($tag == 'login') {

    // check for user
    $user = $db->getUser( $_POST['id'], $_POST['pswd']);

    ... etc 
```

# java - java邮件 - 处理csv附件

> ID：12061286
> 
> 赞同：0
> 
> 时间：2012-08-21T18:57:35.373
> 
> 标签：java, email, jakarta-mail

我正在接收来自普通 GUI 客户端（如 Thunderbird 或 Outlook）的电子邮件，其中包含字符串形式的消息正文和一个 csv 文件附件。

使用 Java 邮件我想处理附件，即将 csv 文件的内容读入字符串。我可以简单地检查 contet 是否是 Multipart 然后处理索引 1 处的那个（我猜电子邮件正文位于索引 0 处）？或者我应该检查标记哪个部分是附件的处置？我唯一担心的是，如果 oe 使用常规 GUI 客户端发送电子邮件，则不会设置这些标志...

对采取何种方法有何评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:06:56.707

[这个 JavaMail FAQ 条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#readattach)会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:47:41.483

根据[Javamail教程](http://java.sun.com/developer/onlineTraining/JavaMail/contents.html#GettingAttachments)

> 当您的消息有附件时，它的内容是一个 Multipart 对象。然后您需要处理每个部分，以获取主要内容和附件。从 part.getDisposition() 标记为 Part.ATTACHMENT 处置的零件显然是附件...

# hibernate - Hibernate ORM 映射到非类

> ID：12061289
> 
> 赞同：0
> 
> 时间：2012-08-21T18:58:17.320
> 
> 标签：hibernate, dynamic, orm, mapping, metamodel

我正在为应用程序平台构建存储子系统。元模型将是动态的（在运行时可更改）。我有一个元模型来表示模型结构（包含具有属性、关系、层次结构等的伪类）。因为元模型是动态的，所以元模型中没有对应于伪类的 Java 类。

我知道 Hibernate 使用元模型在类和表之间进行映射，基于类模型生成查询并填充对象。我想知道 Hibernate 是否有办法为元类而不是类执行此操作，填充代理对象而不是具体的 POJO。

基本上我想使用我的元模型来定义 O/R 映射而不是 Java 类。这对 Hibernate 可行吗？我已经提出了在运行时使用 CGLib 之类的东西动态生成实际类并映射它们的想法，但我希望有更好的方法。

我希望有一种方法可以为此使用 Hibernate Proxy 之类的东西，只是不子类化 POJO，而只是保留为“纯”代理。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T01:26:11.643

[https://github.com/hibernate/hibernate-orm/tree/master/hibernate-core/src/test/java/org/hibernate/test/dynamicentity](https://github.com/hibernate/hibernate-orm/tree/master/hibernate-core/src/test/java/org/hibernate/test/dynamicentity)中的子文件夹代表了您可以完成此任务的 3 种方式。我会看看 tuplizer2 方法。

# javascript - 分配和删除点击事件

> ID：12061294
> 
> 赞同：4
> 
> 时间：2012-08-21T18:58:40.140
> 
> 标签：javascript, jquery

我提前为我的英语道歉...

我正在创建一个可编辑表格的单元格。在此表中，我想删除单击的单元格 (td) 上的单击事件，但让其他单元格可单击。

```
$("#idTable").on("click", "td", function (e) {

    var oTxtbox = $('<input type="text" value="' + $(this).text() + '"/>');
    $(this).html(oTxtbox);

    // I try to remove the event 
    $(this).off(e);

    // $("#idTable").off("click", $(this) );

    // other code

}); 
```

使用该语句`$(this).off(e)`，我删除了所有单元格的事件，而 `$("#idTable").off("click", $(this) )`不是删除任何内容：所有单元格都是可点击的。

你能帮助我吗？

更新 1：这是我的示例的演示：[示例代码](http://jsfiddle.net/tRNhJ/19/)

**更新 2：** 现在我对事件有另一个问题：如果用户在表外单击，我想在 td 上重新绑定/重新附加事件。这是一个完整代码的链接：[NO RE-BIND EVENT](http://jsfiddle.net/tRNhJ/38/)

我现在做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T19:00:12.520

**编辑**

*我刚刚看到你找到了一个解决方案，亲爱的:)。*

*为了完整起见，我留下了答案，因为我终于找到了如何完全解除绑定事件。*

> 您正在使用动态绑定，因此取消绑定单个元素非常复杂，因为事件总是冒泡到绑定它的静态元素。
> 
> 如另一个答案所示，您可以用新的点击事件覆盖点击事件并停止传播。
> 
> **但是**，这仍然会给您留下一个附加了事件的元素，该事件始终在单击时执行，即使它没有冒泡。

下面的示例真正解除了事件的绑定，让您没有任何剩余，也不需要停止传播，因为事件完全解除了绑定：

```
$(document).one('click', 'div', function(e) {
    $(this).parent().find("div").one('click.NewClick', function() {
        $('#result').append(this.id + " was clicked<br />");
    });

    $(this).click();
});​ 
```

### [DEMO](http://jsfiddle.net/9YXUC/) - 取消绑定动态绑定的单个元素

在上面的演示中，我一直使用[**one()**](http://api.jquery.com/on/)来确保事件的自动解除绑定。

外部`one()`是逻辑所必需的，内部`one()`是您的要求，因为您希望单击未绑定的事件。

我`click`像往常一样将初始事件与动态选择器“div”绑定，使用`one()`.

但是，我在`click`事件中，在单击任何 div 之后，我将单击事件重新绑定到元素，`one()`再次使用，这次使用`static`选择器，尽管元素现在存在。我还使用命名空间`'click.namespace'`来确保外部的解除绑定`one()`不会摆脱新的绑定。

现在我的所有 div 都很好地绑定了`one()`，这意味着它们在被点击后会自动完全解除绑定。

为了防止用户在初始单击后必须单击两次，我会自动触发`$(this).click()`触发初始事件的元素的单击事件 ()，从而使用户无缝。

您的代码应该能够将其与类似于以下的代码一起使用：

```
$("#idTable").one("click", "td", function(e) {
    $(this).parent().find("td").one('click.NewClick', function() {
        var oTxtbox = $('<input type="text" value="' + $(this).text() + '"/>');
        $(this).html(oTxtbox);

        // other code
    });

    $(this).click();
});​ 
```

请注意使用**one()**，而不是**on()**。
当然，内部绑定可以是您需要的任何内容，`one()`仅在您希望在单击元素后取消绑定事件时才选择它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:04:33.370

我不认为`$(this)`是你认为的那样。它是匹配的`<td>`，它不是事件被捕获的地方（它在`$("#idTable")`冒泡时被捕获。

用你的处理程序中的这条线替换这些`.off`线将做你想要的：

```
$this.on('click', function(e) {e.stopPropagation();} ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T19:00:30.847

你试过用`unbind`吗？

```
$("#idTable").on("click", "td", function (e) {
  var item=$(this);

  var oTxtbox = $('<input type="text" value="' + item.text() + '"/>');
  item.html(oTxtbox);

  item.unbind("click")

}); 
```

[http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

> 从元素中删除先前附加的事件处理程序。

**编辑：**当我们需要从自身中删除处理程序时，我们需要执行此方法。

所以代码应该是

```
$("#idTable").on("click", "td", function (e) {
  var item=$(this);

  var oTxtbox = $('<input type="text" value="' + item.text() + '"/>');
  item.html(oTxtbox);

  item.unbind(e)

}); 
```

> 这种情况下的处理程序必须带一个参数，这样我们才能捕获事件对象，并在第三次单击后使用它来解除处理程序的绑定。事件对象包含 .unbind() 知道要删除哪个处理程序所需的上下文。

工作样本：http: [//jsfiddle.net/tRNhJ/24/](http://jsfiddle.net/tRNhJ/24/)

# neo4j - dbpedia 和 neo4j 中节点和边的含义是什么？

> ID：12061296
> 
> 赞同：0
> 
> 时间：2012-08-21T18:58:55.027
> 
> 标签：neo4j, dbpedia

有这个：[链接](https://stackoverflow.com/questions/7645884/how-to-import-dbpedia-into-neo4j)。我的问题是我不明白[Neo4j](http://neo4j.org/)中的边缘和节点代表什么？

任何人都可以向我解释这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:18:42.240

Neo4j 是一个图形数据库，因此它对[图形](https://en.wikipedia.org/wiki/Graph_%28mathematics%29)进行建模。这是一张图表的图片：

![图形](../Images/fbc8981012ac916a7359f5cd84d79adc.png)

带数字的圆圈是节点。在 Neo4j 中，它们可以包含任何值，而不仅仅是数字。边缘是它们之间的线（同样，Neo4j 允许它们具有任意值）。边表示节点之间的关系。

对于 DBpedia，节点可能是文章，而边缘可能是文章之间的链接。不过，我以前从未听说过 DBpedia，所以我不确定。

# java - Java 建立与网络计算机的连接

> ID：12061301
> 
> 赞同：0
> 
> 时间：2012-08-21T18:59:20.323
> 
> 标签：java

我有一个程序需要从网络计算机读取/写入文件。但是，有时程序无法访问网络计算机上的文件夹。目前，为了解决这个问题，我进入 Windows 资源管理器的网络部分，单击计算机，输入我的凭据，然后我的程序能够毫无问题地读取和写入这台计算机。有没有办法让 Java 请求这些凭据或使用 java 自动发送这些凭据？我正在使用嵌入在网络计算机上的 Win7 和 Win7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:09:47.157

您可以使用[http://jcifs.samba.org/](http://jcifs.samba.org/)这是一个用于访问远程 CIFS 共享的库。这允许您设置用户名和密码并在任何平台上工作（不仅仅是 Windows）它无需安装驱动器即可工作。

# javascript - 布置你的 javascript

> ID：12061302
> 
> 赞同：0
> 
> 时间：2012-08-21T18:59:34.147
> 
> 标签：javascript, layout

这就是我的问题，这些天很酷的孩子们是如何布置他们的 javascript 的？我一直在环顾四周，据我所知，每个人似乎都在做不同的事情，有些人将他们的函数包含在对象文字中，有些人似乎只是列出了函数并在上面列出了所有变量。那么每个人都认为我应该如何布置我的代码。

```
var logsomestuff ="somestuff";

function logIt(){ 
   console.log(logsomestuff);
} 
```

或者可能

```
logIt = {
   logsomestuff: "somestuff",
   logIt: function(){
      console.log(this.logsomestuff);  
   }
} 
```

我不知道人们怎么想，最好的方式来布局你的 js？以上只是两个例子，我相信还有很多。谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:06:04.013

所有很酷的孩子都在使用函数闭包来限定他们的变量。

这段代码立即执行，并且在全局范围内没有任何内容，一切都挂在 jQuery $.app 变量上。

```
(function($) {

  $.app = $.app || {};

  $.app = { 
      log : function(stuff) {
        console.log(stuff);
      },
      helpers : { 
          convertJsonDateString = function(date) {
               return "somecrazyregex";
          }
      };

})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:49:28.523

Closure is by far the "cool" kids way of doing things these days, for the reasons Dave mentioned and also because it actually allows Javascript to have some structure. The way I set my modules up is typically like this:

```
var ModuleName = function(sandbox, options) {

    //Class functions
    function someButtonHandlerOrSomething() {

    }

    return {
        init: function() { //Initialization logic }
        load: function() { //Load }
        destroy: function() //On exit }
    }
} 
```

I also use a core function to abstract libraries such as jQuery so my application is not dependent which admittedly forces me to write a lot of vanilla Javascript, but I actually prefer it that way.

This video helped me a lot: [http://www.youtube.com/watch?v=vXjVFPosQHw](http://www.youtube.com/watch?v=vXjVFPosQHw)

# ms-access - 自动编号无法正常工作

> ID：12061307
> 
> 赞同：-1
> 
> 时间：2012-08-21T18:59:54.070
> 
> 标签：ms-access

我正在尝试使用 Number 列中的值读取最后一行，然后将其加一。出于某种原因，下面的代码正在读取表中的第二行而不是最后一行？任何想法为什么？

```
Dim dvProjectName As DataView = DirectCast(AccessDataSource1.Select(DataSourceSelectArguments.Empty), DataView)
    Dim strProjectName As String = DirectCast(dvProjectName.Table.Rows(0)("Number"), Integer) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:28:13.753

自动编号字段由 MS Jet 数据库引擎直接处理。尝试自己更改值通常会导致错误。如果您想自己操作值 - 将字段更改为数字字段并使用 VBA 代码更改数字。否则，请准备好失望，因为 Jet 不会让您更改数字。

# asp.net - 是否建议对 MVC4 项目使用单独的数据库进行表单身份验证？

> ID：12061316
> 
> 赞同：1
> 
> 时间：2012-08-21T19:00:29.373
> 
> 标签：asp.net, asp.net-mvc

一个用于项目的数据库，一个用于 MVC4 模板创建的身份验证。

*回复神秘人：*

我正在关注这个[MVC4 示例](http://www.asp.net/web-api/overview/creating-web-apis/using-web-api-with-entity-framework/using-web-api-with-entity-framework,-part-1)：

它在 web.config 文件中创建两个连接字符串，一个用于表单身份验证，另一个用于产品数据库。

```
 <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-ProductStore-20120829112625;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-ProductStore-20120829112625.mdf"
      providerName="System.Data.SqlClient" />
    <add name="OrdersContext" connectionString="Data Source=(localdb)\v11.0; Initial Catalog=OrdersContext-20120829131625; Integrated Security=True; MultipleActiveResultSets=True; AttachDbFilename=|DataDirectory|OrdersContext-20120829131625.mdf"
      providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:48:43.803

不，不推荐，但也不是“不推荐”。您可以将会员表放在任何您想要的地方。建议将它们放在您想要的位置。

但坦率地说，除了个人喜好之外，我认为没有正当理由使用单独的数据库。我个人认为将它们放在其他地方是没有意义的。现在您必须备份两个数据库并保持备份同步。

# javascript - jQuery 显示带有子 iframe 的 div（所见即所得的文本编辑器）

> ID：12061318
> 
> 赞同：1
> 
> 时间：2012-08-21T19:00:30.543
> 
> 标签：javascript, jquery, css, iframe, jhtmlarea

我有一个带有子所见即所得编辑器的“显示：无”div。[我在jHtmlArea](http://jhtmlarea.codeplex.com/)和[CKEditor](http://ckeditor.com/)上都遇到过这个问题，所以我认为这是一个 iframe 问题。对于此示例，我使用的是 jHtmlArea。没有“显示：无；”，一切正常。然而，当隐藏时，我用子编辑器“显示”了 div，然后它没有完全加载。我前段时间研究过这个问题，但找不到解决方案。我相信我记得找到了一些说隐藏的 iframe 有某种重新加载问题，但找不到帖子的东西。有人有什么建议吗？提前感谢您的时间和专业知识！

```
<script type="text/javascript">
    $(document).ready(function () {
        $("textarea").htmlarea();
    });
</script>

<div id="container" style="display: none;">
    <textarea></textarea>
</div>

<a href="javascript:void(0);" onclick="$('#container').show()">Show me!</a> 
```

我已经尝试过[这种解决方案](https://stackoverflow.com/questions/4249809/reload-an-iframe-with-jquery)，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:42:34.627

一种解决方法是通过 javascript 将显示设置为阻止和隐藏（）它。因此 iframe 将占据加载时可用的全部宽度。看到这个[jsFiddle](http://jsfiddle.net/kswishaq/Fpw9S/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:57:44.273

如果您负担得起，请使用`visibility:hidden`样式而不是`display:none`. 缺点是隐藏元素将完全占据其文档区域，即使在`visibility:visible`设置之前不显示任何内容。

根据@Siwei 的回答，试试[这个](http://jsfiddle.net/hbulhoes/gXF3Q/1/)jsFiddle 。

**编辑：**更新了 jsFiddle 以使编辑器容器的垂直像素为 0，直到用户单击**Show me**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:52:04.787

感谢@Humberto 和@Siwei-Kang 的建议。他们的工作帮助我想出了这个解决方案。

我在按钮单击时实例化 htmlarea，而不是在页面加载时。我还添加了一些附加功能：

*   在 show() 回调函数中实例化 htmlarea
*   textarea 以“可见性：隐藏”开始，以在 show() 上保留空间，同时也减少 htmlarea 出现时的闪烁。
*   在 htmlarea 实例化后将 textarea 设置回可见，以便“html”按钮仍然起作用

看到[这个 jsFiddle](http://jsfiddle.net/Fpw9S/45/)

```
<script type="text/javascript">
    function toggle() {
        $('#container').toggle('blind', function() {
            $('#container textarea').htmlarea().css("visibility", "visible");
        });
    }
</script>

<div id="container" style="display: none;">
    <textarea style="visibility: hidden; width: 300px;"></textarea>
</div>

<a href="javascript:void(0);" onclick="toggle();">Toggle me!</a> 
```

# .net - 如何在css中获取默认样式flex

> ID：12061320
> 
> 赞同：0
> 
> 时间：2012-08-21T19:00:36.393
> 
> 标签：.net, apache-flex, styles

我们需要在 .NET 中创建一些网页，这些网页将托管在现有的 flex 站点中。现在我们需要遵循那个弹性站点的外观和感觉。当我们试图获取样式信息时，我们几乎没有选择。我们被告知没有使用样式表。这只是默认的 flex 样式。现在这是我的问题，有没有办法在 css 文件中获取默认样式的 flex 控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:24:53.110

如果我想在我的机器上查看 mx 的默认值，我会在这里找到它 C:\Program Files (x86)\Adobe\Adobe Flash Builder 4.5\sdks\4.5.1\frameworks\projects\mx

如果您使用的是 Spark 或主题，则需要升级并开始寻找那里。

# firefox-addon - Firefox 插件和线程模型

> ID：12061330
> 
> 赞同：1
> 
> 时间：2012-08-21T19:01:07.060
> 
> 标签：firefox-addon

这不是一个直接的编码问题，但这个问题的答案将有助于对 Firefox 插件进行编码。

1.  所有 JS 插件代码都在主线程上执行吗？
2.  假设上面的问题是“是”，插件代码可以由主线程上的不同 JS 运行时执行吗？
3.  假设对#2 的回答是“否”，那么在同一个 JS 运行时中是否存在多个 JS“执行上下文”？如果“是”，插件代码是否可以由同一 JS 运行时中的不同执行上下文执行？

我在上述问题中可能有问题，但我在插件中看到一个奇怪的行为，导致部分插件代码挂起（当模式对话框启动时，我无法在套接字 #1 上接收数据），但其他部分继续工作（能够从套接字#2 读取数据）。我无法解释这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:02:08.033

> 所有 JS 插件代码都在主线程上执行吗？

是的。AFAIK 这条规则的唯一例外是您通过[网络工作者](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)或[ChromeWorker](https://developer.mozilla.org/en-US/docs/DOM/ChromeWorker)运行的代码。有计划在不同的过程中运行基于附加 SDK 的扩展，我不确定这是否仍然是目标。

> 插件代码可以由主线程上的不同 JS 运行时执行吗？

理论上——是的。例如，扩展可能带有包含不同 JavaScript 引擎的二进制 XPCOM 组件。或者是 带有基于 JavaScript 的 JavaScript 引擎的[Zaphod 扩展。](https://addons.mozilla.org/addon/zaphod/)但这对于在常规 SpiderMonkey 引擎中运行的代码并不重要。

> 我在插件中看到一个奇怪的行为，导致部分插件代码挂起（当模式对话框启动时，我无法在套接字 #1 上接收数据）

JavaScript 执行基于事件队列 - 浏览器将从队列中获取一个事件（例如 DOM 事件、超时、网络事件）并对其进行处理，然后运行相应的 JavaScript 代码。在此 JavaScript 代码完成之前，无法处理其他事件。

但是，当模式对话框打开或执行同步时，JavaScript 代码不会继续运行`XMLHttpRequest`- 但仍需要处理事件。这可以通过模式对话框和`XMLHttpRequest`在它们处于活动状态时进行事件处理来解决（它们旋转自己的事件循环）。

到目前为止的基础。进入套接字的数据是一个常规事件——无论它是由主事件循环还是由模式对话框的循环处理，它都应该工作。

# c++ - libpng：写入 png 失败：在标头写入错误处停止

> ID：12061331
> 
> 赞同：0
> 
> 时间：2012-08-21T19:01:14.700
> 
> 标签：c++, windows, visual-studio-2008, png, libpng

我不知道出了什么问题。当我尝试编写 PNG 时，出现错误：“写入标头时出错”。

我需要包含其他内容吗？我从这里获取了 .lib/.h 文件：[http ://www.eden.net.nz/7/20071024/](http://www.eden.net.nz/7/20071024/)

**编辑：我终于设法完成了这项工作。**

解决方案：

```
#pragma comment(lib, "zlib_s.lib") // must be before libpng!
#pragma comment(lib, "libpng_s.lib") // must be after zlib! 
```

很奇怪吧？

这是**工作**代码，它是一个稍微修改过的版本：[http://zarb.org/~gc/html/libpng.html](http://zarb.org/~gc/html/libpng.html)
未来注意：这必须编译为 C 代码！

```
#pragma comment(lib, "zlib_s.lib") // must be before libpng!
#pragma comment(lib, "libpng_s.lib") // must be after zlib!

#define PNG_DEBUG 0
#include "png.h"

int x, y;

int width, height;
png_byte color_type;
png_byte bit_depth;

png_structp png_ptr;
png_infop info_ptr;
int number_of_passes;
png_bytep *row_pointers;

char *save_png(char *savefile, void *data_in, int w, int h, int BPP){
    unsigned char *data = (unsigned char *)*data_in;
    int p = 0;
    FILE *fp;

    width = w;
    height = h;
    color_type = 2;
    bit_depth = 8;

    // create file 
    fp = fopen(savefile, "wb");
    if(!fp) return "[write_png_file] File %s could not be opened for writing";

    // initialize stuff 
    png_ptr = png_create_write_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);
    if(!png_ptr) return "[write_png_file] png_create_write_struct failed";

    info_ptr = png_create_info_struct(png_ptr);
    if(!info_ptr) return "[write_png_file] png_create_info_struct failed";
    if(setjmp(png_jmpbuf(png_ptr))) return "[write_png_file] Error during init_io";

    png_init_io(png_ptr, fp);
    // write header 
    if(setjmp(png_jmpbuf(png_ptr))) return "[write_png_file] Error during writing header";

    png_set_IHDR(
        png_ptr, info_ptr, width, height,
        bit_depth, color_type, PNG_INTERLACE_NONE,
        PNG_COMPRESSION_TYPE_BASE, PNG_FILTER_TYPE_BASE
    );

    png_write_info(png_ptr, info_ptr);

    row_pointers = (png_bytep*)malloc(sizeof(png_bytep) * height);
    for(y = 0; y < height; y++){
        row_pointers[y] = (png_byte*)malloc(width*BPP);//png_get_rowbytes(png_ptr,info_ptr));
        for(x = 0; x < width; x++){
            row_pointers[y][x*BPP+0] = data[p++];
            row_pointers[y][x*BPP+1] = data[p++];
            row_pointers[y][x*BPP+2] = data[p++];
        }
    }
    // write bytes 
    if(setjmp(png_jmpbuf(png_ptr))) return "[write_png_file] Error during writing bytes";

    png_write_image(png_ptr, row_pointers);

    // end write 
    if(setjmp(png_jmpbuf(png_ptr))) return "[write_png_file] Error during end of write";

    png_write_end(png_ptr, NULL);

    // cleanup heap allocation 
    for(y = 0; y < height; y++){
        free(row_pointers[y]);
    }
    free(row_pointers);

    fclose(fp);

    return "0";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:25:44.473

问题出在图书馆的顺序上：

```
#pragma comment(lib, "zlib_s.lib") // must be before libpng!
#pragma comment(lib, "libpng_s.lib") // must be after zlib! 
```

奇怪，但这解决了问题！

# javascript - 我怎样才能使这个 javascript 表单验证 DRYer？

> ID：12061334
> 
> 赞同：2
> 
> 时间：2012-08-21T19:01:26.550
> 
> 标签：javascript, jquery, forms, radio-button

用户必须从三个输入“类别”中的每一个中选择一个收音机。如果他“提交”而不这样做，他会收到警告：

[http://jsfiddle.net/bqyvS/](http://jsfiddle.net/bqyvS/)

像这样的标记：

```
<form>
    <div id="color">
        <input type="radio" name="color" id="blue">
        <label for="blue">Blue</label>
        <input type="radio" name="color" id="red">
        <label for="red">Red</label>
        <input type="radio" name="color" id="green">      
        <label for="green">Green</label>
    </div>
    <div id="shape">
        <input type="radio" name="shape" id="square">
        <label for="square">Square</label>
        <input type="radio" name="shape" id="circle">
        <label for="circle">Circle</label>
        <input type="radio" name="shape" id="triangle">
        <label for="triangle">Triangle</label>
    </div>
    <div id="size">
        <input type="radio" name="size" id="small">
        <label for="small">Small</label>
        <input type="radio" name="size" id="medium">
        <label for="mediume">Medium</label>
        <input type="radio" name="size" id="large">      
        <label for="large">Large</label>
    </div>
  </form>
<a id="link" href="#">click me to "submit"</a>
<p id="warning"></p>​ 
```

Javascript：

```
$('#link').on('click', function() {
   if (!$('#color input[type=radio]:checked').length) {
      $('#warning').html("Oops! Please choose a color!"); 
   }
   else if(!$('#shape input[type=radio]:checked').length) {
      $('#warning').text("Oops! Please choose a shape!"); 
   }
   else if(!$('#size input[type=radio]:checked').length) {
     $('#warning').text("Oops! Please choose a size!"); 
   } 
}); 
```

这是一段较大代码的简化版本。我怎样才能更有效地重写条件，这样我就不会详细检查每个输入名称？（即使没有检查多个输入名称类别，每次“提交”也应该只显示一个“警告”。）编辑标记是可以的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:15:20.733

将行为应用于类似的组时，您应该开始考虑类而不是 id，在此解决方案中，您不需要单独的数据名称，但我相信将数据与 html id 分开会更好，但您可以使用它。 id 如果你愿意

```
<form>
    <div id="color" class="selection-group" data-name="color">
        <input type="radio" name="color" id="blue">
        <label for="blue">Blue</label>
        <input type="radio" name="color" id="red">
        <label for="red">Red</label>
        <input type="radio" name="color" id="green">      
        <label for="green">Green</label>
    </div>
    <div id="shape" class="selection-group" data-name="square">
        <input type="radio" name="shape" id="square">
        <label for="square">Square</label>
        <input type="radio" name="shape" id="circle">
        <label for="circle">Circle</label>
        <input type="radio" name="shape" id="triangle">
        <label for="triangle">Triangle</label>
    </div>
    <div id="size" class="selection-group" data-name="size">
        <input type="radio" name="size" id="small">
        <label for="small">Small</label>
        <input type="radio" name="size" id="medium">
        <label for="mediume">Medium</label>
        <input type="radio" name="size" id="large">      
        <label for="large">Large</label>
    </div>
  </form>
<a id="link" href="#">click me to "submit"</a>
<p id="warning"></p>​ 
```

Javascript：

```
$('#link').on('click', function() {
   $('.selection-group').each(function() {
      if(!$(this).find('input[type=radio]:checked').length) {
          $('#warning').html("Oops! Please choose a "+ $(this).data('name') +"!"); 
          return false;
      }
   });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:10:01.717

```
function validationCheck() {
    var isValid = true,
        errorText = "";
    $("form div").each(  //get the divs that hold the radios and loop
    //$("#color, #shape, #size").each( //could do it by ids of the divs also
        function(){
            var div = jQuery(this),  //div reference
                isChecked = div.find('input[type="radio"]:checked').length>0;  //see if we have anything selected
            if (!isChecked) {  //if no selections, show error message
                isValid = false;  //set validation to false
                errorText = "Oops! Please choose a " + div.prop("id") + "!";  //build error message
                return false;  //exit each loop
            }
        }
    );
    $('#warning').text(errorText); //set error message
    return isValid;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T19:10:25.640

```
$('#link').on('click', function(){
  $('#color, #shape, #size').each(function(i, ele){
      if($(this).find('input:checked').length == 0)
        $('#warning').text("Oops! Please choose a " + this.id + "!");
  });
}); 
```

[jsFiddle](http://jsfiddle.net/NnFs5/)

您可能需要考虑在用户未选择任何输入或仅选择 1 个输入的情况下生成警告消息。

在此示例中，用户将收到类似于以下内容的消息`Oops! Please choose a color, and shape!`

```
$('#link').on('click', function(){
  var msgs = [];

  $('#color, #shape, #size').each(function(i, ele){
    if($(this).find('input:checked').length == 0)
      msgs.push(this.id);
  });

  if(msgs.length > 0)
    $('#warning').text("Oops! Please choose a " + msgs.join(", and "));
}); 
```

[jsFiddle](http://jsfiddle.net/NnFs5/2/)

# three.js - Three.js 上的更新功能

> ID：12061341
> 
> 赞同：-2
> 
> 时间：2012-08-21T19:01:43.867
> 
> 标签：three.js, webgl, shader

如何在 Three.js 中创建更新函数，就像在 Unity3d 中一样？我的意思是，我创建了一个对象：

var torus = new THREE.Mesh(new THREE.TorusKnotGeometry(60,20,100),反射材料);

当我点击身体时，我改变了反射材料。但是图像没有改变，我看到一个没有改变的反射材料（最后一个图）。总是重绘渲染图像？？？谢谢关注。对不起我的英语（我来自乌克兰）。

PS：我在上网本和（不是我的）笔记本上使用 Three.js。在上网本上我看不到着色器。为什么？？Three.js 是否支持 Shader Model 3 和 0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:23:31.007

如果我理解您的问题，您在单击某些内容后更改材料时遇到问题？您可能需要更改标志，具体取决于您是否已经拥有材料，存在一些依赖关系 - 请查看以下链接：

```
material.needsUpdate = true; 
```

有一篇关于[How to update things in Three.js 的文章](https://github.com/mrdoob/three.js/wiki/Updates)

# php - PHP 邮件程序不能以 HTML 格式工作

> ID：12061347
> 
> 赞同：0
> 
> 时间：2012-08-21T19:02:18.820
> 
> 标签：php, html, email

我正在使用我以前使用过的非常标准的电子邮件创建功能，但由于某种我无法弄清楚的原因它不起作用。无论我在其中放入什么内容，它都会发送一封空白电子邮件。

```
function sendToUser($email,$admin_email,$subject,$content){
    $to=$email;

    $random_hash = md5(date('r', time())); 
    $headers = "From: Site Name <$admin_email>";
    $headers .= "\r\nReply-To: $admin_email";
    $headers .= "\r\nContent-Type: multipart/alternative; boundary=\"PHP-alt-".$random_hash."\""; 
    ob_start(); //Turn on output buffering
    ?>
    --PHP-alt-<?php echo $random_hash; ?> 
    Content-Type: text/plain; charset="utf-8"
    Content-Transfer-Encoding: 7bit

    <?php echo $content; ?>

    --PHP-alt-<?php echo $random_hash; ?>--
    <?
    //copy current buffer contents into $message variable and delete current output buffer
    $message = ob_get_clean();

    mail($to, $subject, $message, $headers);
} 
```

现在，如果我这样称呼它：

```
sendToUser("myprivatemail@yahoo.com","admin@site.com","Testing","E-mail content"); 
```

它发送电子邮件，但它到达时是空的。有人看到这里有什么问题吗？或者可能是我不熟悉的一些服务器设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:05:48.227

`--PHP-alt-<?php echo $random_hash;`前面不能有空格。

尝试这个：

```
function sendToUser($email,$admin_email,$subject,$content){
    $to=$email;

    $random_hash = md5(date('r', time())); 
    $headers = "From: Site Name <$admin_email>";
    $headers .= "\r\nReply-To: $admin_email";
    $headers .= "\r\nContent-Type: multipart/alternative; boundary=\"PHP-alt-".$random_hash."\""; 
    ob_start(); //Turn on output buffering
    ?>
--PHP-alt-<?php echo $random_hash; ?> 
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 7bit

<?php echo $content; ?>

--PHP-alt-<?php echo $random_hash; ?>--
    <?
    //copy current buffer contents into $message variable and delete current output buffer
    $message = ob_get_clean();

    mail($to, $subject, $message, $headers);
} 
```

# android - 如何使用 PID 列出活动应用程序？

> ID：12061350
> 
> 赞同：0
> 
> 时间：2012-08-21T19:02:43.273
> 
> 标签：android, pid

我在这里没有找到答案，希望对你有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:02:43.273

```
ActivityManager mgr = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
for(RunningAppProcessInfo processInfo : mgr.getRunningAppProcesses())
    {
    Toast.makeText(context, Integer.toString(processInfo.pid)+" "+processInfo.processName, Toast.LENGTH_SHORT).show();
    } 
```

# php - 如何在 AgileToolkit4 中将表单验证与 CRUD 组件一起使用？

> ID：12061355
> 
> 赞同：0
> 
> 时间：2012-08-21T19:03:01.563
> 
> 标签：php, user-interface, frameworks, atk4, agiletoolkit

每个人。几周前我开始在个人项目中使用 atk4 并且从那时起一直面临一些困难。我想问的这个具体问题是关于如何在使用 atk4 框架附带的 CRUD 组件时进行表单验证。

我已经尝试了几种不同的解决方案，但都没有解决我的问题。

我有一种感觉，这里的问题可能是表单验证发生在方法的调用中`$form->isSubmitted()`（我正确吗？）。因为当在 Page 中使用 CRUD 组件时，我们不使用那种处理表单提交的方式，所以我们必须找到它的替代方案。例如，假设我有一个具有以下 init() 函数的页面：

```
function init() {
    parent::init();

    // create a CRUD and set a model to it
    $crud = $this->add('CRUD');
    $m = $crud->setModel('Person');

    if ($crud->form) {
        $fn = $crud->form->getField('first_name');
        $fn->validateNotNull('The first name must not be empty.');
    }
} 
```

即使我已将验证添加到名字字段，它也不会被验证。我尝试了几件事，都不成功。我尝试扩展 CRUD 类并重新实现该`formSubmit($form)`函数，在那里添加验证。即使我这样做，它也不起作用。

最初（在 CRUD 类中），有以下功能：

```
function formSubmit($form){
    $form->update();
    $this->api->addHook('pre-render',array($this,'formSubmitSuccess'));
} 
```

我试图遍历表单的字段并调用它的`validate()`方法，但是没有用。另外，如果我尝试更改函数（比如说在 MyCRUD 类中），如下所示，

```
function formSubmit($form){
    if ($form->isSubmitted()) {
        $form->update();
        $this->api->addHook('pre-render',array($this,'formSubmitSuccess'));
    }
} 
```

发生了一个无限循环......有人可以帮我吗？

* * *

[编辑]

最后一个问题与这个问题密切相关。我刚刚尝试执行以下 romanish 提出的完全相同的验证，但是，我没有向页面添加 CRUD，而是添加了一个表单，但它不起作用——尽管 CRUD 确实有效。相反，会出现“AJAX 响应错误：SyntaxError: Unexpected token

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:06:34.113

CRUD 组件尊重您在模型中进行的验证。当数据输入表单并单击按钮时，`$model->update()`将调用。

执行继续进入 beforeUpdate() 钩子，这是您需要拦截的钩子。

[http://agiletoolkit.org/learn/understand/model/actions](http://agiletoolkit.org/learn/understand/model/actions)

```
class Model_Book extends Model_Table {
  function init(){
    parent::init();
    // .... more definitions ...

    $this->addHook('beforeSave',$this);
  }

  function beforeSave(){
    if(strlen($this['book_name']<10))
       throw $this->exception('Name of the book is too short')
            ->setField('book_name');
} 
```

如果模型无法自行保存，会产生异常，Form 会自动将其显示为字段错误。

# actionscript-3 - 检测另一个对象下方的对象的 MouseEvents

> ID：12061356
> 
> 赞同：0
> 
> 时间：2012-08-21T19:03:05.870
> 
> 标签：actionscript-3, mouseevent, rollover, displaylist

所以基本上，我有一个大的movieclip，我们称之为“hit”和一堆较小的“thumb”movieclip。我在用于正确定位拇指的主要“命中”影片剪辑上拥有`ROLL_OVER`和`ROLL_OUT`事件侦听器（该组件是一种自动收报机）。

我在让`ROLL_OVER`、`ROLL_OUT`和`CLICK`事件侦听器触发低于“命中”的“拇指”电影剪辑时遇到问题。

现在我正在使用命中测试，哪种方法有效，但我想要一种更简单的方法。我是一个 actionscript-3 新手，所以任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:16:38.087

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html#!flash/display/InteractiveObject.html#event:rollOver](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html#!flash/display/InteractiveObject.html#event:rollOver)

> 当用户将指针设备移动到 InteractiveObject 实例上时调度。事件目标是指点设备下的对象或该对象的父对象。relatedObject 是先前位于定点设备下的对象。rollOver 事件沿着对象的父链连续调度，从既不是相关对象的根也不是祖先的最高父级开始，到对象结束。

如果对象`hit`不是`hit`. 只有*顶部的对象*才会调度它。鼠标光标必须真正**接触**到对象。如果光标和对象之间有东西，则不会分派事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:08:30.533

[该线程](https://stackoverflow.com/questions/4924558/listen-to-click-event-on-overlapped-sprites "这个线程")似乎在问同样的问题。包括在内的解决方案`getObjectsUnderPoint`似乎是最好的选择。

# jquery - jQuery 中的 Ajax 事件 - 使用 Rails 触发表单提交事件

> ID：12061357
> 
> 赞同：1
> 
> 时间：2012-08-21T19:03:10.310
> 
> 标签：jquery, ruby-on-rails, ajax

我有一个页面上有多个表格。这些表单使用数据属性**data-remote="true** 以便 Rails jquery-ui-rails.js 自动添加事件以通过 javascript 提交这些表单。

当用户提交任何这些表单时，我想添加一个类，以便我可以根据需要对其进行样式设置。由于 Rails 会自动添加 ajax 处理程序以提交表单，因此我不能只在添加处理程序时添加此类 - 我需要自己手动添加代码（我认为）。

下面的代码是我的第一次尝试 - 这可以附加，但由于 ajaxStart 是一个全局事件，它会同时为页面上的每个表单触发它。

```
$('form').ajaxStart(function(e) {
  console.log("element is " + ($(e).attr('id')));
  return $(e).addClass('submitting');
}) 
```

根据[http://docs.jquery.com/Ajax_Events](http://docs.jquery.com/Ajax_Events) ，我也尝试过 beforeSend这是一个本地事件，似乎是唯一相关的事件：

```
$('form').beforeSend(function(e) {
  console.log("element is " + ($(e).attr('id')));
  return $(e).addClass('submitting');
}) 
```

但是，这会引发错误：

```
Uncaught TypeError: Object [object Object] has no method 'beforeSend' 
```

如何将此事件附加到页面上的所有表单，以便每次提交 ajax 时触发一次，并且仅针对正在提交的当前表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:36:23.737

我认为您可以使用`ajax:beforeSend.rails`和`ajax:complete.rails`事件：

[https://github.com/rails/jquery-ujs/blob/8b147fb023f0d13deebea750e7e9827b6d3bc8ba/src/rails.js#L405](https://github.com/rails/jquery-ujs/blob/8b147fb023f0d13deebea750e7e9827b6d3bc8ba/src/rails.js#L405)

# ubuntu - 如何在 Ubuntu 上彻底删除 Exim4 邮件服务器

> ID：12061358
> 
> 赞同：17
> 
> 时间：2012-08-21T19:03:16.133
> 
> 标签：ubuntu, exim, exim4

在我的 Ubuntu 机器上成功使用 Postfix 后，我决定在新服务器上尝试 Exim，因为一些人评论说它更容易设置和使用。

好吧，我马上就遇到了我的 Rails 应用程序的问题，考虑到 Postfix 的易用性，我决定删除 Exim 并安装 Postfix。

但是，如何干净地删除它很难找到......

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-21T19:03:16.133

以下是干净轻松地摆脱 Exim4 所需要做的一切：

```
apt-get remove exim4 exim4-base exim4-config exim4-daemon-light 
```

您可能留下了 exim4 日志目录。如果你这样做，只需手动摆脱它：

```
rm -r /var/log/exim4/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-08T21:41:00.957

我会做什么：

```
apt-get remove exim4* 
```

# microsoft-metro - 代码签名 Windows Metro 应用程序

> ID：12061359
> 
> 赞同：2
> 
> 时间：2012-08-21T19:03:17.690
> 
> 标签：microsoft-metro, digital-certificate

我购买了 Comodo 代码签名证书，当我在 Metro 应用程序中选择它并构建时，我得到了

> 错误 4 文件内容不符合指定架构。`'Publisher'`属性无效 -`'CN=Falafel Software Inc, O=Falafel Software Inc, STREET="512 Capitola Ave,", L=Capitola, S=CA, PostalCode=95010, C=US'`根据其数据类型，该值无效-`'http://schemas.microsoft.com/appx/2010/manifest:ST_Publisher'`模式约束失败。
> 
> ```
> C:\Users\jwaters\documents\visual studio 11\Projects\App1\App1\bin\Debug\AppxManifest.xml
> 10 57  App1 
> ```

我发现了这个更详细的消息

> `'CN=Falafel Software Inc, O=Falafel Software Inc, STREET="512 Capitola Ave,", L=Capitola, S=CA, PostalCode=95010, C=US'`违反 的模式约束`'(CN|L|O|OU|E|C|S|STREET|T|G|I|SN|DC|SERIALNUMBER|(OID\.(0|[1-9][0-9]*)(\.(0|[1-9][0-9]*))+))=(([^,+="<>#;])+|".*")(, ((CN|L|O|OU|E|C|S|STREET|T|G|I|SN|DC|SERIALNUMBER|(OID\.(0|[1-9][0-9]*)(\.(0|[1-9][0-9]*))+))=(([^,+="<>#;])+|".*")))*'`。无法解析`'Publisher'`具有值的属性。`'CN=Falafel Software Inc, O=Falafel Software Inc, STREET="512 Capitola Ave,", L=Capitola, S=CA, PostalCode=95010, C=US'`

看起来正则表达式不理解`PostalCode`，这在我的证书主题中。

有没有办法解决这个问题？

# wpf - 更改 UserControl 中的 Window.Content 值

> ID：12061360
> 
> 赞同：0
> 
> 时间：2012-08-21T19:03:17.687
> 
> 标签：wpf, user-controls

我有一个窗口和一些用户控件。加载 Window 时，UserControls 之一以编程方式托管在 Window.Content 中。假设，用户控件具有按钮，当用户单击此当前用户控件时，此当前用户控件已从 window.Content 中删除并被销毁，并且另一个 userControl 添加到父 Window.Content 中。我像这样使用父母：

```
(Parent as Window).Content =  new MyUserControl; 
```

但是一旦更改了父 userControl，Parent 的结果返回 null 并且之前的 userConrol 没有被破坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:31:16.450

刚刚创建了随附的示例来测试您要执行的操作。请提供有关您拥有的代码的更多详细信息。附加示例完全按照您所说的进行，没有任何空引用。

[样本](http://www.mediafire.com/?1fds82s3bgcu6k6)

# html - 使用 VB.net 查找元素的宽度

> ID：12061364
> 
> 赞同：1
> 
> 时间：2012-08-21T19:03:36.727
> 
> 标签：html, css, vb.net

有没有办法使用 VB.net 访问元素的 css，特别是宽度？我正在尝试将宽度用作 VB 中的变量，但我无法使用我想要的 div 的类属性找到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:55:57.670

如果我正确阅读了您的问题：您需要将 'runat="server"' 属性添加到页面上的 HTML 标记中。例如：

```
<div id="divTest" runat="server">Test Me</div> 
```

在您后面的代码中：

```
dim myDiv = Ctype(Me.Page.FindControl("divTest"), System.Web.UI.HtmlControls.HtmlGenericControl)
myDiv.Style.Add("color", "#ff0000") 
```

您可以添加如图所示的样式，或者只是简单地访问它以查找当前设置值：

```
div.Style("width") 
```

当然，如果您使用母版页，则必须使用 FindControl() 从最上面的母版页向下钻取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:14:55.023

我不确定您如何访问 webElement。我假设这是由 Internet 控件库或 IE 浏览器控件完成的。

对于 Internet 控件库，您可以使用。此接口在 MSHTML 库 DLL 中可用。

您可以通过使用 IHTMLElement::offsetLeft、IHTMLElement::offsetTop、IHTMLElement::offsetHeight 和 IHTMLElement::offsetWidth 属性的组合来确定对象的位置、宽度和高度。这些数字属性指定对象相对于对象的偏移父对象的物理坐标和尺寸。

或者只是去这个地方查找有关测量 WebElements 细节的信息 [Here](http://msdn.microsoft.com/en-us/library/hh781509%28VS.85%29.aspx)

我会要求你更详细地解释你的问题。

# asp.net - SqDataReader 在 .net 中关闭了问题

> ID：12061377
> 
> 赞同：0
> 
> 时间：2012-08-21T19:05:00.890
> 
> 标签：asp.net, sqldatareader, executereader

我已经创建了一个执行查询并返回 SqlDataReader 的函数，现在我在另一个函数中使用它来处理返回的数据，但是我收到错误消息说阅读器已经关闭。这是功能：

```
public static SqlDataReader ExecuteReader(string procedure, SqlParameter[] parameters, CommandType commandType)
    {
        SqlDataReader reader = null;
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            using (SqlCommand command = new SqlCommand(procedure, connection))
            {
                connection.Open();
                if(parameters != null)
                {
                    if (commandType == CommandType.StoredProcedure)
                        command.Parameters.AddRange(parameters);
                }
                reader = command.ExecuteReader();
            }
        }
        return reader;
    } 
```

这是我调用 SqlDataReader 的代码

```
using (SqlDataReader reader = SqlHelper.ExecuteReader("select top 10 username from users", null, System.Data.CommandType.Text))
        {
            Response.Write(reader.IsClosed); //This returns True

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:05:52.780

## 编辑

[**ExecuteReader with CommanBehavior（读取数据后自动关闭连接）**](http://pranayamr.blogspot.ca/2010/11/executereader-with-commanbehavior.html)

要解决连接关闭问题，只需使用 CommandBheviour

```
- CommandBehavior.CloseConnection 
   When you pass above values as argument to ExecuteReader 
     1\. there is no need to close connection explicitly connection get close when you close your reader. 
```

代码将是这样的，无需显式关闭连接

```
public void CreateMySqlDataReader(string mySelectQuery,string myConnectionString) 
{
   SqlConnection myConnection = new SqlConnection(myConnectionString);
   SqlCommand myCommand = new SqlCommand(mySelectQuery, myConnection);
   myConnection.Open();
   SqlDataReader myReader = myCommand.ExecuteReader(CommandBehavior.CloseConnection);
   while(myReader.Read()) 
   {
      Console.WriteLine(myReader.GetString(0));
   }
   myReader.Close();
   //Implicitly closes the connection because CommandBehavior.CloseConnection was specified.
} 
```

* * *

它导致问题，因为您正在关闭连接

SqlReader 总是使用打开的连接，即当你使用它时打开的实时连接

```
using (SqlConnection connection = new SqlConnection(connectionString)) 
        {
} 
```

它处理读取器对象使用的连接对象，这就是为什么它返回 IsColosed 为 true

如果你想要返回值的对象，而不是使用断开连接的数据对象的 DataTable 并且不使用连接

**修改后的代码**

```
 public static DataTable ExecuteReader(string procedure, SqlParameter[] parameters, CommandType commandType)
  {
     DataTable dt = null;
     using (SqlConnection connection = new SqlConnection(connectionString))
     {
         using (SqlCommand command = new SqlCommand(procedure, connection))
         {
              connection.Open();
              if(parameters != null)
              {
            if (commandType == CommandType.StoredProcedure)
            command.Parameters.AddRange(parameters);
              }
                SqlDataAdapter da = new SqlDataAdapter(command);
                da.Fill(dt);
           }
         }
            return dt;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:19:22.617

DataReader 需要一个打开的连接。你可以做什么，要么返回一个 DataTable，要么有一个自定义类来表示你的 SQL 查询的结果并返回一个实例。

创建一个类来代表您的实体

```
public class Customer
{
  public int ID { set;get;}
  public string Name { set;get;}
} 
```

在你的方法里面；

```
public List<Customer> GetCustomer()
{
  List<Customer> custList=new List<Customer>();
  using (SqlConnection connection = new SqlConnection(connectionString))
  {
    using (SqlCommand command = new SqlCommand("yourParameterizedSQLQuery", 
                                                                  connection))
    {
     //Add parameters if needed
     connection.Open();

    using (var reader = cmd.ExecuteReader())
    {
       if (reader.HasRows)
       {
           cust=new Customer();
           while(reader.Read())
           {
             var cust=new Customer();
             // TO DO :Do db null checking before reading 
             cust.ID=reader.GetInt32(reader.GetOrdinal("ID"));
             cust.Name=reader.GetString(reader.GetOrdinal("Name"));
             custList.Add(cust);
           }
       }
     }
    }
  }  
 return custList;   
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:09:07.003

问题是您`using SqlConnection`在离开范围时关闭了与数据库的连接。

`SqlDataReader`需要一个“仍然打开”的连接。将其返回给父级不会保持连接打开。

您的选择基本上是返回一个`DataSet`“未连接”数据源，或者更改管理连接的方式以打开它、使用`SqlDataReader`、关闭连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T19:12:39.943

您可能必须保持连接打开并让调用代码关闭与阅读器关联的连接。

我遇到了这个挑战，所以我将返回类型更改为`DataTable`

```
reader = command.ExecuteReader();
DataTable dt = new DataTable();
dt.Load(reader);
return dt; 
```

这样我就不必担心关闭该方法之外的连接

# solr - 在字段中使用引号搜索/索引 SOLR 文档

> ID：12061378
> 
> 赞同：1
> 
> 时间：2012-08-21T19:05:01.807
> 
> 标签：solr

我正在使用 SOLR 在电子商务网站上进行搜索。

许多产品在描述中包含一个尺寸，使用 " 表示英寸，使用 ' 表示英尺。

所以我有两个问题：

1.  我将使用什么分析器/标记器将其添加到索引中，以及
2.  对 synonyms.txt (inch => " feet => ') 的简单添加会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-08T08:36:36.227

我遇到了同样的问题。我的偏好是使用，`StandardTokenizer`但它剥离了`'`and `"`，我找不到添加异常的方法。这意味着后分词器的同义词对于该任务将毫无用处。我搜索了另一个不会去掉引号和撇号但仍然对“标准”标记有用的标记器。我空空如也。

我最终采用的解决方案是`charFilter`在标记器之前使用 a 将`"`and更改`'`为其他更容易使用的东西。我用`PatternReplaceCharFilter`来实现这一点。

由于我`StandardTokenizer`在索引和查询上使用，我决定同时在两者上进行文本替换。就我而言，我想确保该值后面或前面有空格。您可以根据您的特定需求调整正则表达式。

我应该注意，我也确实设置了同义词（来自我之前的失败努力）。但是，我假设它们在这两个字符的情况下没有发挥作用，因为它们正在被转换为预分词器。

这也`PatternCaptureGroupFilter`有助于更好地索引诸如 1x1mm 或 2.5"x15" 之类的东西

分析仪

```
 <analyzer type="index">
        <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="([\d\.]+)&quot;\s" replacement="$1 inch "/>
        <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="([\d\.]+)&apos;\s" replacement="$1 feet "/>
        <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="\s([\d\.]+)&quot;" replacement=" $1 inch"/>
        <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="\s([\d\.]+)&apos;" replacement=" $1 feet"/>

        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="lang/stopwords_en.txt"
        />
        <filter class="solr.PatternCaptureGroupFilterFactory" pattern=".*(([0-9\.]+([a-z&quot;&apos;]?)x[0-9\.]+)([a-z&quot;&apos;]?))\s*" preserve_original="true"/>           
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.WordDelimiterFilterFactory" splitOnNumerics="1" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1" preserveOriginal="1" types="word-delim-special-chars.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
    </analyzer>
    <analyzer type="query">
        <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="([\d\.]+)&quot;\s" replacement="$1 inch "/>
        <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="([\d\.]+)&apos;\s" replacement="$1 feet "/>
        <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="\s([\d\.]+)&quot;" replacement=" $1 inch"/>
        <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="\s([\d\.]+)&apos;" replacement=" $1 feet"/>

        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="lang/stopwords_en.txt"
        />
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.WordDelimiterFilterFactory" splitOnNumerics="1" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1" preserveOriginal="1" types="word-delim-special-chars.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
    </analyzer> 
```

为了清晰和彻底，我将以下内容包括在内，但我认为它们不会在最终结果中发挥作用（与引用和撇号有关）。

word-delim-special-chars.txt

```
" => ALPHA
' => ALPHA
. => ALPHANUM
_ => ALPHA 
```

同义词.txt

```
",inch,inches,in.
feet,ft,',ft.,foot
oz,ounce,ounces,oz.
mm,millimeter,mm.,millimeters,mms
by,x
gram,g,grams
cm,centimeter,centimeters 
```

# ruby-on-rails - 将多个模型添加到另一个模型

> ID：12061381
> 
> 赞同：0
> 
> 时间：2012-08-21T19:05:18.500
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我目前正在使用 Ruby On Rails 3.2 创建一个包含多个独特模型的数据库的小项目。每个模型都有许多元素，每个元素都有可能属于许多模型。我已经能够通过以下方式设置模型：

```
class Model < ActiveRecord::Base
  has_many :model_elements
  has_many :elements, :through => :model_elements
  attr_accessible :elements, :name, :notes, :ref
end

class Element < ActiveRecord::Base
  has_many :model_elements
  has_many :models, :through => :model_elements
  attr_accessible :elementType, :name, :notes, :ref
  validates_presence_of :name
end

class ModelElement < ActiveRecord::Base
  belongs_to :Model
  belongs_to :element
  attr_accessible :model_id, :created_at, :element_id
end 
```

我的问题是如何将多个元素添加到单个模型中？我试图找到一些文档，但我找不到任何东西。目前我正在尝试执行以下操作：

```
@model.elements = @element 
```

其中@element 是一个预定义的元素，但它会引发以下错误：

```
undefined method `each' for #<Element:0x007ff803066500> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:23:07.203

尝试 `@model.elements << @element`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:24:50.490

```
collection.create(attributes = {}) 
```

返回集合类型的新对象，该对象已使用属性实例化，通过连接表链接到此对象，并且已保存。

```
 @model.elements.create(:name => "example") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:31:51.883

阿马尔的回答是正确的。如果您愿意，可以使用 has_and_belongs_to_many 关联进一步简化模型。

```
class Model < ActiveRecord::Base
  has_and_belongs_to_many :elements, :join_table => :model_elements
end

class Element < ActiveRecord::Base
  has_and_belongs_to_many :models, :join_table => :model_elements
end

@model.elements << @element 
```

# unit-testing - 我可以在单元/集成测试中使用 IoC 容器吗？

> ID：12061383
> 
> 赞同：4
> 
> 时间：2012-08-21T19:05:23.500
> 
> 标签：unit-testing, integration-testing, ioc-container

在解析一些接口时，我有一个 IoC 容器在做一些复杂的对象构造。我想在我的单元/集成测试中使用这些接口的实现。在使用 IoC 容器的测试中解决这些接口有什么问题吗，或者在这种情况下是否应该手动构建实例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T09:05:44.360

当我们对一个类进行单元测试时，我们关心*的是“类是否按照我们的意愿去做”*。我们的出发点是一个完全构造的实例；我们如何到达那里不是单元测试问题，尽管它可能被认为是集成测试问题。

说我们有，

```
A
  A(IB b, IC c)

B : IB
  B(ID d)

C : IC

D : ID 
```

其中：
`IB`是 的接口`B`，
`IC`是 的接口`C`，
`ID`是 的接口`D`。

在进行单元测试`A`时，`B`uses`ID`应该是没有实际意义的（如果不是，那么我们应该查看我们的接口。拥有`A`访问权限`IB.D.xxx()`并不好），我们需要做的就是提供`A`一些实现（模拟/存根）`IB`and `IC`。

就单元测试`A`而言，`A`实例是手动创建还是容器创建并不重要。无论哪种方式，我们都会得到相同的对象。

只要我们将模拟作为第一级依赖项传递，那么在使用容器而不是手动创建对象时就没有保存。仅当我们使用 IOC 创建对象图时才会进行保存，但如果我们这样做，那么我们将进入集成测试。这不一定是坏事，但我们需要明确我们的目标。

当对上述内容进行单元测试时，我们为

```
 D
 C
 B (passing in a mocked/stubbed ID)
 A (passing in mocked/stubbed IC and IB) 
```

在进行单元测试时`A`，我们不需要正确的答案`D`来传递`B`到`A`.
我们只关心 A 中的逻辑是否按预期工作，例如，*使用参数****y****和****z****`A`调用并返回 的结果`IB.x()`****`IB.x()`*********。如果我们正在检查我们是否得到了*正确*的答案（例如，一个取决于逻辑的答案`D`），那么我们已经通过了单元测试并进入了集成测试。****

 ******底线** *只要我们正确隔离了被测单元，被测*
单元是由 IOC 容器创建还是由人工创建都没有关系。如果我们使用容器来创建对象图，那么我们进行集成测试的可能性很大（和/或存在类之间过多耦合的问题 -调用）*`A``IB.D.xxx()`*

 ***模拟集成测试**

警告：以下部分内容取决于使用的 IOC 容器。使用 Unity 时，最后一次注册“获胜”。我不知道这是否适用于其他人。

在所讨论的极简主义系统中，我们有

```
A 
  A (IB b)

B : IB 
```

`B`是我们的“叶子”。它与外界对话（例如，从网络流中读取）。在集成测试时，我们想模拟它。

对于实时系统，我们使用`CreateContainerCore()`. 这包括注册`IB`.

在执行需要模拟版本的集成测试时，`IB`我们设置容器，使用`CreateContainerWithMockedExternalDependencies()`该容器包装`CreateContainerCore()`并为`IB`.

下面的代码被大大简化，但形状可以根据需要扩展到尽可能多的类和依赖项。在实践中，我们有一个基础测试类来帮助设置服务定位器、模拟/存根类、访问模拟以进行验证和其他内务管理（例如，每个测试都不需要显式设置 ServiceLocator 提供者）

```
[TestClass]
public class IocIntegrationSetupFixture {

    [TestMethod]
    public void MockedB() {

        ServiceLocator.SetLocatorProvider(() => new UnityServiceLocator(CreateContainerWithMockedExternalDependencies()));

        var a = ServiceLocator.Current.GetInstance<A>();
        Assert.AreEqual("Mocked B", a.GetMessage());

    }

    [TestMethod]
    public void LiveB() {

        ServiceLocator.SetLocatorProvider(() => new UnityServiceLocator(CreateContainerCore()));

        var a = ServiceLocator.Current.GetInstance<A>();
        Assert.AreEqual("Live B", a.GetMessage());
    }

    private IUnityContainer CreateContainerCore() {
        var container = new UnityContainer();
        container.RegisterType<IB, B>(new ContainerControlledLifetimeManager());
        return container;
    }

    private IUnityContainer CreateContainerWithMockedExternalDependencies() {
        var container = CreateContainerCore();

        var mockedB = new Mock<IB>();
        mockedB.SetupGet(mk => mk.Message).Returns("Mocked B");
        container.RegisterInstance<IB>(mockedB.Object);

        return container;
    }

    public class A  {

        private IB _b;
        public A(IB b) {
            _b = b;
        }

        public string GetMessage() {
            return _b.Message;
        }

    }

    public interface IB {
        string Message { get; }
    }

    private class B : IB {
        public string Message {
            get { return "Live B"; }
        }
    }

} 
```*****

# c# - 将节点添加到 Treeview 控件

> ID：12061388
> 
> 赞同：0
> 
> 时间：2012-08-21T19:05:37.797
> 
> 标签：c#, .net

我正在玩树视图控件并遇到了一个简单的问题。我想将它设置为可以被 10 整除的所有内容作为父节点，然后下面的数字应该是子节点，直到它达到另一个可被 10 整除的数字而没有余数。所以我的方法看起来像这样，需要帮助！谢谢。

```
 private  void countDown(int num)
    {
        tv_NumList.Nodes.Add("topNode");
        while (num != 0)
        {
            if (num % 10 == 0)
            {
                tv_NumList.Nodes.Add(num.ToString());

                int counter = 9;
                while (counter != 0)
                {
                    tv_NumList.Nodes[1].Nodes.Add(num.ToString());
                    counter--;
                }
                num--;
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:24:02.753

也许是我，但我看不到你在找什么......假设你的意思是这个（给定 15）

```
root 
  |--15
  |--14
  |--13
  |--12
  |--11
 [+]-10

root 
  |--15
  |--14
  |--13
  |--12
  |--11
 [-]-10
     |-- 9
     |-- 8
     |-- 7
     |-- 6
     |-- 5
     |-- 4
     |-- 3
     |-- 2
     |-- 1 
```

以下将（未经测试）为您提供此结果。

```
// changed to take TV as a parameter.
private void countDown(TreeView tv, int num)
{
    // Create and remember your root node.
    var root = new TreeNode("root");
    tv.Nodes.Add(root);

    // This to remember the last 'grouping node' created.  Start with
    // the root node to deal with starting values not divisible by 10.
    TreeNode group = root;

    for ( int i=num; i>0; i--)
    {
        // Is it divisble by 10, if so, start a new group 
        if (num % 10 == 0)
        {
            group = new TreeNode(i.ToString());
            root.Nodes.Add(group);
        }
        else
        {  
            // Not divisible, so add to last group (or root if no 
            // group yet started) 
            group.Nodes.Add(i.ToString());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:29:03.743

因此，如果我理解正确，您希望最终结果如下所示：

```
-- ROOT NODE (Divisible by ten)
   +-- 30
   +-- 20
   +-- 10
-- ROOT NODE (everything else)
   +-- 29
   +-- 28
   +-- ...etc... 
```

如果是这样的话：

```
Int32 input = 30;
for (Int32 index = input; index == 0; index--) {
  treeview1.Nodes[0 == index % 10 ? 0 : 1].Nodes.Add(index.ToString());
} 
```

# internet-explorer - 指南针、SASS、渐变和 IE？

> ID：12061393
> 
> 赞同：5
> 
> 时间：2012-08-21T19:05:49.933
> 
> 标签：internet-explorer, sass, compass-sass

所以根据 compass 的说法，在渐变方面，它们只支持 Chrome、Safari、Firefox 3.6 和 Opera。

关于如何在指南针/其他一些解决方法中添加对 IE 的支持的任何想法？

代码在：

```
 @import "compass";    
   .testgradient {
    @include background(
      linear-gradient(top left, #333, #0c0)
    );
  } 
```

代码输出：

```
.testgradient {

  background: -webkit-gradient(linear, 0% 0%, 100% 100%, color-stop(0%, #333333), color-stop(100%, #00cc00));

  background: -webkit-linear-gradient(top left, #333333, #00cc00);

  background: -moz-linear-gradient(top left, #333333, #00cc00);

  background: -o-linear-gradient(top left, #333333, #00cc00);

  background: linear-gradient(top left, #333333, #00cc00);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:14:42.907

对于 IE10 之前的 IE 版本，您必须处理 IE 的[渐变过滤器](http://msdn.microsoft.com/en-us/library/ms532997%28v=VS.85%29.aspx)。

对于 IE10 和更新版本，无前缀`linear-gradient`应该可以工作^([[1]](http://msdn.microsoft.com/en-us/library/ie/hh673532%28v=vs.85%29.aspx))。但是，如果您遇到问题，[其他站点](http://www.colorzilla.com/gradient-editor/)只需使用供应商前缀`-ms-linear-gradient`。这两个版本的语法与所有其他供应商前缀渐变的语法相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-03T17:37:33.080

您可以简单地创建自己的 mixin，因此您的代码如下所示：

```
@import "compass";    
@mixin myBackground ($direction, $colorList) {
    background: -ms-linear-gradient($direction, $colorList);
    @include background(linear-gradient($direction, $colorList));
}

.testgradient {
    @include myBackground(top left, (#333, #0c0));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:31:11.293

如果您不想浏览整个 SASS 文档，请尝试以下操作：

```
filter: e("progid:DXImageTransform.Microsoft.gradient( startColorstr=${topcolor}, endColorstr=${bottomcolor},GradientType=0)"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-24T22:24:01.273

对于简单的线性渐变，请参阅：[http](http://compass-style.org/reference/compass/css3/images/#mixin-filter-gradient) ://compass-style.org/reference/compass/css3/images/#mixin-filter-gradient ，另请参阅：[CSS（可能与 Compass）：跨浏览器渐变](https://stackoverflow.com/questions/5664957/css-perhaps-with-compass-cross-browser-gradient/31620672)

因此，您可以使用如下所示的 SCSS 代码：

```
 @import "compass";
   .testgradient {
    background: #333; /* Old browsers */

    @include background(
      linear-gradient(top left, #333, #0c0)
    );

    @include filter-gradient(#333, #0c0, top left); /* IE 6 - 8 */
  } 
```

上面的代码编译成 CSS 如下：

```
.testgradient {
  background: #333;
  /* Old browsers */
  background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuMCIgeTE9IjAuMCIgeDI9IjEuMCIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzMzMzMzMyIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwY2MwMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');
  background: -webkit-gradient(linear, 0% 0%, 100% 100%, color-stop(0%, #333333), color-stop(100%, #00cc00));
  background: -moz-linear-gradient(top left, #333333, #00cc00);
  background: -webkit-linear-gradient(top left, #333333, #00cc00);
  background: linear-gradient(to bottom right, #333333, #00cc00);
  *zoom: 1;
  filter: progid:DXImageTransform.Microsoft.gradient(gradientType=1, startColorstr='#FF333333', endColorstr='#FF00CC00');
  /* IE 6 - 8 */ } 
```

# c# - 突出显示 StartDate 到 EndDate 日历

> ID：12061396
> 
> 赞同：-6
> 
> 时间：2012-08-21T19:06:10.360
> 
> 标签：c#, asp.net

如何使用 asp Calendar C# 突出显示从 StartDate 到 EndDate 的日期

当我第一次单击日历的日期时，它将是第一个日期，当我单击另一个日期时，我将是最后一个日期并突出显示日期

从开始日期到结束日期

我希望有人能回答我的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:16:36.700

在实际插入数据之前，您应该无法获得下一个自动增量值。想一想，假设您查询下一个 ID，它告诉您“2”，然后其他人进来并插入一行。它应该得到哪个ID？“2”？“3”？

插入数据时，您可以查询`SCOPE_IDENTITY()`以查找范围内最后插入的 ID。

# ruby-on-rails - 使用具有良好路由的 Rspec 和国际化 (current_path.should == new_post_path)

> ID：12061397
> 
> 赞同：1
> 
> 时间：2012-08-21T19:06:14.973
> 
> 标签：ruby-on-rails, internationalization, rspec, rails-routing

我正在使用 Rails、Rspec（用于测试）和 capybara 创建一个多语言 CMS。

当我写这个测试时出现问题

```
it "redirect and create a new post" do
  visit posts_path
  create_new_post = I18n.t('posts.index.create_new_post')
  click_link create_new_post
  current_path.should == new_post_path
end 
```

问题在最后一行，我得到了这个预期：“/posts/new”得到：“/en/posts/new”（使用==）

我想使用“new_post_path”之类的东西，而不是“/en/posts/new”

当我使用这样的东西时描述的主要问题

```
it "redirect to show link" do
  visit posts_path
  page.should have_content 'show'
  click_link 'show'

  current_path.should == post_path(@post)
end 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T13:01:14.390

检查[这个 StackOverflow 问题](https://stackoverflow.com/q/5415158/567863)以获得关于这个主题的一些想法。我的首选方式是对同一问题的[这个答案。](https://stackoverflow.com/a/10671020/567863)但是，使用你当前的代码，为了让你的期望正确，你可能会做这样的事情（假设你想测试你所有的语言环境）：

```
I18n.available_locales.each do |locale|

  it "should redirect and create a new post" do
    visit posts_path(locale)
    create_new_post = I18n.t('posts.index.create_new_post')
    click_link create_new_post
    current_path.should == new_post_path(locale)
  end

  it "should redirect to show link" do
    visit posts_path(locale)
    page.should have_content 'show'
    click_link 'show'

    current_path.should == post_path(locale, @post)
  end
end 
```

# visual-c++ - 如何使 C++ 程序自动最大化运行？

> ID：12061401
> 
> 赞同：3
> 
> 时间：2012-08-21T19:06:30.267
> 
> 标签：visual-c++, window, maximize, maximize-window

我需要知道是否有 C++ 程序的代码来自动最大化程序窗口，因为我在运行程序时总是必须最大化窗口。我正在使用 Windows 7。

我对 C++ 非常陌生。

有人能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T19:23:42.110

试试这个它会工作

```
#include "stdafx.h"
#include "conio.h"
#include "Windows.h"
#include "tchar.h"

int _tmain(int argc, _TCHAR* argv[])
{
 //Write Your Code HERE//
  HWND hWnd;
  SetConsoleTitle(_T("test"));
  hWnd = FindWindow(NULL, _T("test"));
  HANDLE hOut = GetStdHandle(STD_OUTPUT_HANDLE);
  COORD NewSBSize = GetLargestConsoleWindowSize(hOut);
  SMALL_RECT DisplayArea = {0, 0, 0, 0};

  SetConsoleScreenBufferSize(hOut, NewSBSize);

  DisplayArea.Right = NewSBSize.X - 1;
  DisplayArea.Bottom = NewSBSize.Y - 1;

  SetConsoleWindowInfo(hOut, TRUE, &DisplayArea);

  ShowWindow(hWnd, SW_MAXIMIZE);
 _getch();
  return 0;
} 
```

它将在最大化窗口中显示您的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:11:54.253

试试[ShowWindow(SW_MAXIMIZED)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)。您必须运行您创建的程序[FindWindow(your target)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx)，然后在其上调用 ShowWindow(SW_MAXIMIZED)。请注意，这可以通过[AutoHotkey](http://www.autohotkey.com/)而不是 C++ 来实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-18T04:42:07.813

这对我有用。

```
#include <windows.h>

void maximizeWindow(){
    HWND hwnd = GetConsoleWindow();
    ShowWindow(hwnd, SW_SHOWMAXIMIZED);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-01T05:36:34.860

如果您想在程序运行时最大化您的程序，您可以在主窗体中使用此代码

```
 __fastcall TMainForm::TMainForm(TComponent* Owner) : TForm(Owner)
{

           WindowState = wsMaximized;
} 
```

或者，如果您想在代码期间最大化您的程序，例如按下按钮，那么您可以使用此代码（如果它在您的主表单中）：

```
ShowWindow(this->Handle, SW_SHOWMAXIMIZED); 
```

或者这个如果你在一个孩子的话：

```
ShowWindow(Application->Handle, SW_SHOWMAXIMIZED); 
```

# drupal-7 - Drupal 7：节点维护表单

> ID：12061404
> 
> 赞同：0
> 
> 时间：2012-08-21T19:07:04.273
> 
> 标签：drupal-7

我有一个只包含一个节点的内容类型。我需要一个用于维护此节点的表单，其逻辑如下：如果节点存在，则显示一个填充了字段内容的表单和一个“更新”按钮；如果不存在，则显示带有“插入”按钮的清晰表单。Drupal 正确的方法是什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:12:43.010

如果内容类型将包含一个节点，为什么 drupal 需要检查节点是否存在？

Drupal 规则[http://drupal.org/project/rules](http://drupal.org/project/rules)加上核心触发器和动作模块可以帮助您设置系统逻辑事件

# java - 使用 String[] 时出现 ClassCastException

> ID：12061405
> 
> 赞同：3
> 
> 时间：2012-08-21T19:07:04.040
> 
> 标签：java, arraylist, classcastexception

我正在使用 ObjectMapper 将 JSON 字符串转换为 Map，但在尝试检索值时出现 ClassCastException：

```
Map<String,String[]> args = objectMapper.readValue(jsonString, HashMap.class);
String[] array = args.get(paramName); 
```

然后做

```
String x = array[0]; 
```

给

```
java.lang.ClassCastException: java.util.ArrayList cannot be cast to [Ljava.lang.String 
```

当我明确指定 String[] 而不是 ArrayList 并且第二行没有导致任何错误时，这怎么可能......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:14:53.673

`HashMap.class`是运行时唯一可用的信息`objectMapper`。

它不知道您`Map<String, String[]>`在左侧声明了 a ，所以它做了大多数 JSON 映射器会做的事情：它假设您想要一个基于 1:1 映射的 JSON 表示，这会导致`Map<String, ArrayList<String>>`.

只需使用

```
List<String> list = args.get(paramName);
String x = list.get(0); 
```

而不是`String[] array`和`array[0]`。

更好的是，将您的 JSON 映射到实际的模型类，而不是`HashMap`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:59:44.043

你的诊断不正确。抛出的线`ClassCastException`是

```
String[] array = args.get(paramName); 
```

而不是后来的数组访问。我相信，在这一行发生错误的原因很明显：map 值根本**不是**一个数组，但实际上是一个`ArrayList`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:19:04.437

对象映射器不遵守（实际上不能）您使用的参数化类型信息。它只知道您作为参数传入的类。使用泛型类型会好得多。

你实际上得到的是：

```
Map<Object, Object> args = objectMapper.readValue(jsonString, HashMap.class); 
```

我建议更改您的代码以使用某些东西作为您的参数，然后进行类转换并进行相应的检查。

例如：

```
Map<Object, Object> args = new LinkedHashMap<Object, Object>();
Object value = args.get("foo");
String x;
if (value instanceof String[]) {
    String[] array = (String[])value;
    x = array[0];
} else if(value instanceof List) {
    List<Object> list = (List<Object>) value;
    x = String.valueOf(list.get(0));
} else {
    //error handling
}
... 
```

# tfs - TFS 管理控制台设置保存在哪里？

> ID：12061406
> 
> 赞同：0
> 
> 时间：2012-08-21T19:07:08.347
> 
> 标签：tfs, administration

这听起来像是一个愚蠢的问题，但我们的 IT 部门希望我们使用他们认可的备份工具，而不是使用 TFS2010 中打包的标准备份解决方案。我的问题是，是否有一个配置文件包含在 TFS 管理控制台中找到的所有设置，或者是否所有这些值都保存在 TFS_Configuration 表中。

请注意，我们使用的是 TFS2010

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:00:07.670

这些设置确实存储在配置数据库中。

# c# - 正则表达式，MVS 不喜欢我的正则表达式字符串，如何使其符合

> ID：12061407
> 
> 赞同：1
> 
> 时间：2012-08-21T19:07:17.740
> 
> 标签：c#, regex

所以在微软视觉工作室我有一个被编译成正则表达式的字符串。我的字符串是“#(\d+(.\d+)?)=(\d+(.\d+)?)”。我无法编译我的程序，因为我收到一条错误消息，指出 \d 是一个无法识别的转义字符。我如何告诉它闭嘴，让我像专业人士一样进行正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:14:07.247

您还可以使用逐字字符串文字（由于可读性，我更喜欢使用这些文字）。

利用`@"(#\d+(.\d+)?)=(\d+(.\d+)?)"`

该符号表示字符串在到达结束之前`@"`不应解释转义字符（以 a 为前缀的字符） 。`\``"`

`"`注意：您可以通过双引号来匹配搜索模式中的单个`""`。例如，您可以`"Hello"`使用模式匹配`@"""\w+"""`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:14:31.593

以 开头的字符串`@`，这会导致编译器（几乎）将所有字符单独保留，未转义（例外是`"`，可以转义为`""`）：

```
@"#(\d+(.\d+)?)=(\d+(.\d+)?" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T19:14:47.360

问题是c#不喜欢`\d`里面的字符串。改用逐字字符串

```
string pattern = @"#(\d+(.\d+)?)=(\d+(.\d+)?)"; 
```

“@”表示它。C# 不会在字符串中查找转义序列。如果你必须逃避一个`"`使用两个`""`。

当然，您可以使用普通字符串。但是你将不得不逃避反斜杠

```
string pattern = "#(\\d+(.\\d+)?)=(\\d+(.\\d+)?)"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T19:08:51.373

如果您使用的是普通字符串，则需要转义反斜杠，如下所示：

```
"#(\\d+(.\\d+)?)=(\\d+(.\\d+)?)" 
```

基本上，您将文字字符串放入 C#；C# 编译器首先看到字符串，并尝试将其解释`\d`为转义序列（不存在，因此出错）。因此，您使用`\\d`让 C# 编译器将字符串视为`\d`，然后将其传递给正则表达式引擎（它*确实*识别`\d`为有意义的东西）。（是的，如果你想在你的正则表达式模式中匹配一个文字反斜杠，你需要使用`\\\\`）

但是在 C# 中，您可以选择只在字符串前面加上`@`以使编译器不理会字符串（尽管`"`仍然需要转义），所以就像这样：

```
@"#(\d+(.\d+)?)=(\d+(.\d+)?)" 
```

# ios - 在 UITapGestureRecognizer（双击）添加到 UIButton 会减慢将按钮图像设置为选中状态

> ID：12061409
> 
> 赞同：0
> 
> 时间：2012-08-21T19:07:25.527
> 
> 标签：ios, uibutton, uitapgesturerecognizer

我在 UIButton 上有一个双击手势。对于未选择和选择的状态，我有两个不同的背景图像。

所有功能都有效，但是当我触摸按钮时，更改所选状态的背景图像会有延迟。

如果我摆脱双击手势，就没有延迟。

我怎样才能摆脱这种延迟并仍然保持双击手势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:20:26.010

猜测一下，它会一直等到可以确定您没有双击，然后才能识别按钮想要的单击。可能有一些内置的东西`UIView`可以帮助手势识别器消除歧义，并且`UIButton`正在使用识别器来完成它的工作。

`UIControl`考虑到这一点，您是否考虑过基于现有标注合成双击？因此，例如，您将拥有：

```
- (IBAction)buttonWasTapped:(id)sender // wired up to the button
{
    NSTimeInterval timeNow = [NSDate timeIntervalSinceReferenceDate];
    NSTimeInterval difference = timeNow - timeThen;
    timeThen = timeNow; // an instance variable

    if(difference < kYourAllowedTimeBetweenTaps)
    {
        timeThen = 0.0; // to avoid capture of triple taps, etc
        [self buttonWasDoubleTapped:sender];
        return;
    }

    // do normal single tap processing here, if any
} 
```

# path - 如何用sed中的另一个路径替换一个路径？

> ID：12061410
> 
> 赞同：68
> 
> 时间：2012-08-21T19:07:29.127
> 
> 标签：path, sed, csh

我有一个 csh 脚本（尽管如果它有任何相关性，我可以更改语言），我必须：

```
sed s/AAA/BBB/ file 
```

问题是 AAA 和 BBB 是路径，因此包含“/”。AAA 是固定的，所以我可以说：

```
sed s/\\\/A\\\/A\\\A/BBB/ file 
```

但是，BBB 是基于变量的，包括 $PWD。如何转义 $PWD 中的“/”？

或者还有其他方法我应该完全这样做吗？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-08-21T19:12:49.783

`sed`可以使用任何分隔符而不是`/`在`s`命令中。只需使用路径中未遇到的东西：

```
s+AAA+BBB+ 
```

等等。

或者（如果您不想猜测），您可以使用 sed 预处理您的路径以转义斜杠：

```
pwdesc=$(echo $PWD | sed 's_/_\\/_g') 
```

然后用`$pwdesc`.

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-10-28T08:29:37.313

在替换字符串或模式字符串包含斜杠的情况下，您可以利用 GNU sed 允许替换命令的替代分隔符这一事实。分隔符的常见选择是管道字符 | 或哈希 # - 分隔字符的最佳选择通常取决于正在处理的文件类型。在您的情况下，您可以尝试

```
sed -i 's#/path/to/AAA#/path/to/BBB#g' your_file 
```

注意：最后一个 # 后面的 g 是要更改文件中的所有匹配项，如果要更改第一次出现，请不要使用 g

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-11-19T23:36:33.240

```
sed -i "s|$fileWithPath|HAHA|g" file 
```

*编辑 1*

```
sed -i 's|path/to/foo|path/to/bar|g' file 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-21T19:10:43.147

`csh`通常[不推荐](http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/)用于严肃的脚本。然而，这与手头的问题无关。

你可能在追求类似的东西：

```
sed -e "s=$oldpath=$newpath=" 
```

其中shell变量`$oldpath`包含要替换的值并`$newpath`包含替换，并且假定两个变量都不包含等号。也就是说，您可以在模式上选择分隔符，并且避免使用通常的`/`分隔符可以避免路径名中出现斜杠的问题。如果您认为`=`可能会出现在文件名中，请选择不太可能出现的名称，例如 control-A 或 control-G。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-08-18T10:14:29.247

就我而言，以下方法有效。

```
sed -i 's/playstation/PS4/' input.txt 
```

也可以写成

```
sed -i 's+playstation+PS4+' input.txt 
```

*   **sed** : 是流编辑器

*   **-i** : 允许编辑源文件

*   **+**：是分隔符。

我希望以上信息对您有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-12T15:16:01.597

我们只需要从路径中获取 /h/ 网络路径引用。如果我们将它们指向 /c/ 驱动器，它们将映射到不存在的目录但很快就会解决。在我的 .bashrc 中，我使用了

```
PATH=`echo $PATH | sed -e "s+/h/+/c/+g"` 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-12T14:41:47.670

您可以使用括号扩展`${i/p/r}`来转义斜杠。在这种情况下`${i//p/r}`，用于转义所有事件。

```
$p1=${p1//\//\\/}
$p2=${p2//\//\\/}
sed s/$p1/$p2/ file 
```

或者，更简洁，在一行中`sed s/${p1//\//\\/}/${p2//\//\\/}/ file`

两个拳头斜杠`//`是括号展开中的分隔符，表示我们匹配所有出现，然后`\/`是用于转义搜索模板中的斜杠，`/`作为展开中的第二个分隔符，然后`\\/`是替换，在巫婆中必须转义反斜杠.

# java - 在有状态 EJB 3.1 bean 中保持会话？

> ID：12061415
> 
> 赞同：7
> 
> 时间：2012-08-21T19:07:43.790
> 
> 标签：java, jakarta-ee, ejb, java-ee-6, ejb-3.1

我正在开发一个尝试结合以下技术的 Java webapp：

*   Java EE 6
*   CDI
*   JSF 2
*   EJB 3.1
*   春季安全

我为我的 JSF 页面提供基于 CDI 的支持 bean（@ViewScoped、@Named）。

我使用@Stateless EJB bean 来完成实际工作。

我只需要很少的会话信息，例如 jSessionCookie（由容器管理）、内部用户名和其他一些内部 ID。现在，我想知道将这个会话信息放在哪里，以便我可以在 JSF 的支持 bean 中访问它，同时也将它提供给无状态 EJB？我应该使用@Stateful EJB 会话bean 还是应该使用@SessionScoped 和@Named 创建基于CDI 的POJO？

有没有最佳实践？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T21:05:53.330

对于您的特定用例，有状态会话 bean 不是一个好的选择。

请注意，与人们可能声称的相反，有状态会话 bean 肯定不是您通常应该避免的。但是，它们适用于高级用例，例如在处理 JPA 的扩展持久性上下文时。

有状态会话 bean 在这里不起作用的原因是它们不会自动与 HTTP 会话相关联，这似乎是您最关心的问题。您可以向它们添加 @SessionScoped 注释，但是您也可以使用常规托管 bean。您不会使用 SFSB 的任何特定功能。

参见：

*   [我可以使用带有 CDI 的 EJB 无状态 Bean 来维护用户会话吗？](https://stackoverflow.com/questions/6328794/can-i-use-ejb-stateless-bean-with-cdi-to-maintain-user-session/6330358#6330358)
*   [使用有状态会话 Bean 跟踪用户的会话](https://stackoverflow.com/questions/8480096/using-a-stateful-session-bean-to-track-an-users-session/8540181#8540181)
*   [从 EJB 无状态会话 bean 调用 CDI 会话范围的生产者方法](https://stackoverflow.com/questions/6973028/calling-a-cdi-session-scoped-producer-method-from-an-ejb-stateless-session-bean/6973271#6973271)
*   [Java EE 6 中的上下文和依赖注入](http://www.oracle.com/technetwork/articles/java/cdi-javaee-bien-225152.html)

您可以使用会话范围的 CDI bean 注入无状态 EJB，但您必须意识到，在同一个应用程序中，您的 EJB bean 将依赖于 HTTP 会话（有时您希望避免这种情况，例如，如果您的 bean 必须被调用其他情况下也是如此）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:42:56.240

@Stateful EJB 是我试图远离的东西。我相信行为和状态是不应该混为一谈的东西。

我也会寻求 SJuan76 的答案并使用 SessionScoped JSF 支持 bean。

# java - Java中的字符编码

> ID：12061418
> 
> 赞同：3
> 
> 时间：2012-08-21T19:07:56.380
> 
> 标签：java

在eclipse中，我将默认编码更改为ISO-8859-1。然后我写了这个：

```
String str = "Русский язык ";
PrintStream ps = new PrintStream(System.out, true, "UTF-8");
ps.print(str); 
```

它应该正确打印`String`，因为我正在指定`UTF-8`编码。但是，它不打印。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:12:01.180

字符编码只支持0到255之间的`ISO-8859-1`字符，其他的都可能变成'?'

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T19:23:35.067

如果将源文件（`.java`文件）保存为 ISO-8859-1，`str`则 javac 将使用 ISO-8859-1 对其进行编码。您的问题不在于创建`PrintStream`：`str`您正在打印的内容从一开始就是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:35:01.443

您基本上是在告诉 PrintStream 编写器期望输入字符为 UTF-8 编码并将其输出为 UTF-8。没有转换。如果您将 IDE 设置为使用 ISO-8859-1 作为文件的字符编码，该文件又包含输入字符串，而不是将 ISO-8859-1 编码的字符通过管道传输到 UTF-8 预期的写入器。因此作者将接收到的字节视为 UTF 编码字符，这将导致数据垃圾。

将您的 IDE 设置为以 UTF-8 对源文件进行编码，并检查您的字符是否正确显示和存储。或者告诉您的作者将它们视为 ISO-8859-1，无论哪种方式都应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T19:17:47.103

是的，您发送此输出的终端似乎不支持此编码。

如果您正在运行 Eclipse，则可以按如下方式设置编码：

*   在运行配置...->通用->编码->其他
*   选择 UTF-8

# android - 从 GLSurfaceView 转换为 TextureView（通过 GLTextureView）

> ID：12061419
> 
> 赞同：24
> 
> 时间：2012-08-21T19:08:05.490
> 
> 标签：android, opengl-es, google-tv

当 Android 4.0 (Ice Cream Sandwich) 发布时，在 sdk 中引入了一个新视图。这个 View 就是 TextureView。在文档中，它说 TextureView 可用于显示 OpenGL 场景的内容。

当您查找如何执行此操作时，您会发现此链接指向一个示例。

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/U5RXFGpAHPE](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/U5RXFGpAHPE)

但是，我只想用 TextureView 替换 GLSurfaceView，并保持我的其余代码相同，并获得 TextureView 的优势。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-21T19:08:05.490

**回答：**

1）从GLSurfaceView的源代码开始，将文件命名为GLTextureView.java

2）将表头改为： **GLTextureView extends TextureView implements SurfaceTextureListener**

3) 将构造函数重命名为 GLTextureView。从 init() 方法中删除代码。

4）组织进口。始终选择非 GLSurfaceView 选项。

5) 找到 SurfaceHolder 的每个实例并将其更改为 SurfaceTexture

6）为SurfaceTextureListener添加Unimplemented方法，每个方法应该如下：

*   onSurfaceTextureAvailable -surfaceCreated(surface)
*   onSurfaceTextureDestroyed - surfaceDestroyed(surface), (return true)
*   onSurfaceTextureSizeChanged - surfaceChanged(surface, 0, width, height)
*   onSurfaceTextureUpdated - requestRender()

7) 应该有一行调用 getHolder()，将其更改为 getSurfaceTexture()

8) 在 init() 方法中，放入以下行`setSurfaceTextureListener(this)`

然后添加一个`OnLayoutChangeListener`并让它调用`surfaceChanged(getSurfaceTexture(), 0, right - left, bottom - top)`。

有了它，您应该能够将您的 GLSurfaceView 代码替换`GLTextureView`为`GLTextureView`. 还要确保您的应用支持硬件加速并且您的渲染器扩展`GLTextureView`了 .Renderer。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-23T01:04:01.653

杰出的！

对古代尔先生精彩回答的一个小补充：

我认为 GLSurfaceView 的 4.1.1 版本似乎已经过修改，以避免在零宽度/高度表面上渲染。并且在 onSurfaceTextureAvailable 之后似乎没有免费的 onSurfaceTextureChanged 通知。

如果从 4.1.1 源开始，onSurfaceTextureAvailable 需要如下所示：

```
public void onSurfaceTextureAvailable(SurfaceTexture surface, int width,
        int height) 
{
    this.surfaceCreated(surface);
    this.surfaceChanged(surface, 0,width,height);
} 
```

除此之外，我在大约五分钟内就启动并运行了！谢谢。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-11T16:52:47.063

感谢 Goodale 先生和 Davies 先生的回答！

我有一些关于将 GLSurfaceView 转换为 GLTextureView 的额外信息。首先是关于渲染模式。如上所述[，](https://gist.github.com/eleventigers/9545428)只需删除 onSurfaceTextureUpdated 中的 requestRender() 调用。

第二个是关于
mGLESVersion = SystemProperties.getInt("ro.opengles.version", ConfigurationInfo.GL_ES_VERSION_UNDEFINED); 只需使用[link](https://stackoverflow.com/a/5552950/919150)，但您需要 Context 来执行 context.getClassLoader(); 您可以从 init() 调用 getInt 的反射版本并将结果保存在静态字段 sGLESVersion = getInt(getContext(), "ro.opengles.version",ConfigurationInfo.GL_ES_VERSION_UNDEFINED);

最后一个最简单的更改是关于 EGLLogWrapper.getErrorString(error); 只需从 EGLLogWrapper 源中复制 getErrorString 即可。

[在GitHub Gist](https://gist.github.com/andreyice/65dc488152ddd6499cca)上查看我将 GLSurfaceView 转换为 GLTextureView 的最终版本

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-19T02:44:46.630

如果你想复制/粘贴一个现成的类，我在这里写了一个：

[GLTextureView](https://github.com/ykulbashian/LiquidSurface/blob/master/liquidview/src/main/java/com/mycardboarddreams/liquidsurface/GLTextureView.java)

您可以调用 setRenderer(GLSurfaceView.Renderer)，就像使用 GLSurfaceView 一样。

# ruby-on-rails-3 - 使用 Rspec + Timecop + Capybara + Capybara Webkit 的集成规范中的 Capybara::FrozenInTime 错误

> ID：12061421
> 
> 赞同：11
> 
> 时间：2012-08-21T19:08:07.847
> 
> 标签：ruby-on-rails-3, rspec, capybara, capybara-webkit, timecop

我在使用 rspec、capybara、capybara-webkit 和 timecop 的某些集成规范中看到错误。

```
Capybara::FrozenInTime:
   time appears to be frozen, Capybara does not work with libraries which freeze time, consider using time travelling instead 
```

我知道冻结时间的唯一宝石是 Timecop，但我没有在失败的测试用例中使用它。

由于错误仅在某些时候发生，我什至不知道在更改某些内容后它是否消失了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-02T18:17:44.490

错误消息的末尾包含解决方案：

> 考虑使用时间旅行代替

只需更改`Timecop.freeze`为`Timecop.travel`. `Timecop.freeze` [打破 Capybara 的自动等待功能。](https://twitter.com/jonicklas/status/19886877170)

此外，我会调用`Timecop.return`一个 after 块，因为它将与最近的旅行块相关联：

```
after :each do
  Timecop.return
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T20:04:29.283

我找到的解决方案是添加

```
before :each do
  Timecop.return
end 
```

在 spec_helper.rb 中。

这样，我们保证在每次测试之前时间不会被冻结，尽管唯一存在此问题的是在不同于`rack-test`. 就我而言`capybara-webkit`。

# system-calls - 系统调用或函数调用 - 性能方面

> ID：12061422
> 
> 赞同：0
> 
> 时间：2012-08-21T19:08:17.437
> 
> 标签：system-calls, function-calls

在 Linux 中，当您可以在系统调用或函数调用之间进行选择来执行任务时，由于性能更好，哪个选项更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:24:19.097

我们应该注意，在大多数情况下，我们不直接使用系统调用。我们使用glibc提供的接口。

[http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html](http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html)

[http://www.gnu.org/software/libc/manual/html_node/System-Calls.html](http://www.gnu.org/software/libc/manual/html_node/System-Calls.html)

现在，在像文件管理/IPC/进程管理等操作系统的核心资源管理活动中，唯一的选择是系统调用而不是库函数。

在这些情况下，通常我们使用库函数作为系统调用的包装器。也就是说，对于读取文件，我们有许多库函数，例如

```
fgetc/fgets/fscanf/fread -  all should invoke read system call. 
```

那么我们应该使用 read 系统调用吗？或其他库函数？这应该取决于特定的应用程序。如果我们正在使用读取，那么我们再次需要更改代码以在其他一些读取不可用的操作系统上运行它。

我们正在失去一些灵活性。当我们确定平台并且我们可以通过使用只读进行一些优化或者应用程序必须只使用文件描述符而不是文件指针等时，它可能很有用。

```
Now in cases where we need to consider only say user level operations and invoke 
no    service from operating system , like say copying a string.(strcpy).
In this case definitely we shall not use any system call unnecessarily, if at
all something is  there, since it should be an extra overhead due to operating 
system intervention, which is not needed in this case. 
```

所以我觉得只有在我们有一个构建在系统调用之上的库函数的情况下才会在系统调用和库函数之间进行选择。

（就像添加到上面的示例一样，我们可以说**malloc**调用系统调用**brk**）。

这里的选择将取决于特定类型的软件、它应该运行的平台、精确的非功能性要求，如速度（虽然你不能肯定地说如果你使用 brk 而不是 malloc，你的代码会运行得更快），便携性等

# javascript - 如何在此代码中清除Interval()

> ID：12061434
> 
> 赞同：-1
> 
> 时间：2012-08-21T19:09:10.123
> 
> 标签：javascript, jquery

我正在尝试制作像 Facebook 这样的墙贴。我需要每十秒刷新一次内容 div，并且在用户输入评论时不应刷新 div。内容正在重新加载，但并未停止。实际上，我想在单击时停止它`id = 'comments_option'`。

我试过这个并调用函数 reload(uid) 在`$(document).ready`

```
var intervalId = null;

function reload(uid) {
    intervalId = setInterval(function () {
        var ol = $('#home_list');
        var start = ol.children().length;

        $.post('ajax/reloadhome.php', {
            uid: uid,
            start: start
        }, function (data) {
            $('#buzzfetch ul').html(data);
        });
    }, 5000);

    $('#comments_option').click(function () {

        clearInterval(intervalId);

    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:19:50.790

使用`on`相对于`click`：

```
$("#comments_option").on("click", function () {
    clearInterval(intervalId)
}); 
```

因为`#comments_option`是 inside `#buzzfetch ul`，所以 click 事件在使用时只会绑定到 #comments_option 的第一个实例`click`。它不会绑定到任何其他实例。

请参阅[此答案](https://stackoverflow.com/questions/8065305/whats-the-difference-between-on-and-live-or-bind)`bind`以进一步解释和之间的差异`on`

# objective-c - 得到“元素不是编译时”常量错误

> ID：12061435
> 
> 赞同：0
> 
> 时间：2012-08-21T19:09:17.237
> 
> 标签：objective-c

我正在编写以下代码，它给出以下错误

```
@implementation ViewController
NSArray *myArray = [[NSArray alloc]initWithObjects:@"paul",@"cyrus",@"victor",nil ];
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
 } 
```

我在声明“myArray”的行上得到“初始化元素不是编译时常量”。

请注意，我在“.m”文件而不是“.h”文件中初始化数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:31:29.143

如前所述，您已经声明了一个全局变量。

您可以改用一个简单的函数：

```
static NSArray * NamesArray() {
  return [[NSArray alloc]initWithObjects:@"paul",@"cyrus",@"victor",nil];
} 
```

它可能不是您想要的，并且完全没有必要创建一个全局变量，但是`NSArray`如果您将源代码编译为 Objective-C++，您实际上可以使用容器文字表达式初始化一个全局变量：

```
// requires Objective-C++
static NSArray * const arr = @[@"paul",@"cyrus",@"victor"]; 
```

因为这个数组及其元素不难创建，你应该：

*   只使用一个功能
*   或 ivar，如果您需要经常缓存和访问它

如果创建起来*真的*很昂贵，那么您可能会喜欢这种形式：

```
// requires Objective-C++
static NSArray * Names() {
    static NSArray * const arr = @[@"paul",@"cyrus",@"victor"];
    return arr;
} 
```

因为在您需要它之前不会构建它。全局初始化可能会有很大的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:20:37.553

如果初始化全局或静态变量，则必须使用编译时常量。基本上，编译器必须将该值写入目标文件。您的代码正在发送多条消息，这只能在运行时完成。

如果这真的必须是一个全局变量，则必须以某种方法对其进行初始化。`+initialize`经常用于这样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:14:18.233

使 myArray 成为 ivar 并在适当的位置对其进行初始化，或者在您的类中创建一个静态全局并在“initialize”类方法中对其进行初始化。

# javascript - 如何使用 inlineformset_factory 添加自定义字段属性？

> ID：12061438
> 
> 赞同：0
> 
> 时间：2012-08-21T19:09:39.507
> 
> 标签：javascript, html, django, forms, django-forms

我有一个'inlineformset_factory'，我正在尝试弄清楚如何为各个字段设置属性。除了使用 javascript 之外，我还没有想出任何添加它们的方法（这将是 hacky 和坏的）。

最后我想要类似的东西：

```
<input id="id_authorbook_set-0-title" type="text" name="authorbook_set-0-title" maxlength="255" placeholder="Title" autofocus="autofocus"> 
```

我知道在使用普通表单甚至 ModelForms 时可以添加自定义属性`attrs={'foo': 'bar', 'placeholder': 'Username'}`，但无法找到任何方法来对表单集工厂执行相同操作。

有解决办法吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T23:26:01.030

你所描述的工作，`attrs`参数，被传递给一个表单小部件，这意味着你需要表单字段，因此需要一个表单。

`inlineformset_factory`是`formset_factory`ModelForms 的一个。

将两者结合在一起，您需要定义一个自定义并将其作为参数`ModelForm`传递给工厂。`form`

您还可以定义一个自定义表单集，它遍历活动表单，执行相同的覆盖，并将其传递给`inlineformset_factory`.

```
class MyMF(forms.ModelForm):
    class Meta:
        model = Foo

    def __init__(self, *args, **kwargs):
        super(MyMF, self).__init__(*args, **kwargs)
        self.fields['foo'].widget.attrs = {'foo': 'bar'}

inlineformset_factory(form=MyMF) 
```

# algorithm - 将卡片与一组规则匹配的算法

> ID：12061439
> 
> 赞同：2
> 
> 时间：2012-08-21T19:09:42.847
> 
> 标签：algorithm, match, playing-cards

我遇到了一个奇怪的问题，我似乎无法解决这个问题。我会直接进入它。

问题是将一组卡片与一组规则匹配。

可以将一组规则定义为字符串。它由逗号分隔的元组组成`<suit>:<value>`。例如`H:4, S:1`应该匹配红桃四和黑桃 A。也可以使用通配符，例如`*:*`匹配任何卡片，`D:*`匹配任何带有菱形花色的卡片，以及`*:2`匹配任何花色的二。规则可以与逗号结合使用：`*:*,*:*,H:4`如果一组卡片包含 2 张随机卡片和一张红心四，则匹配一组卡片。

到目前为止，一切都很好。用于此的解析器很容易编写。棘手的部分来了。

为了便于组合这些规则，可以使用另外两个结构来表示花色和价值。它们是`<`（对诉讼和价值合法）和`+n`（仅对价值合法），其中 n 是一个数字。`<`表示“与上一场比赛相同”，`+n`意思是“比上一场比赛高n”。一个例子：

```
*:*, <:*, *:< 
```

意思是：匹配任何一张牌，然后匹配与第一次匹配相同花色的卡，然后匹配另一张与第二次匹配相同值的卡。这只手将匹配：

```
H:4,H:8,C:8 
```

因为红桃四和八红心是相同的花色，而红桃八和梅花八是相同的价值。

只要所有规则都匹配，就可以有更多的牌（因此，添加`C:10`到上述手牌仍然符合规则）。

我解决这个问题的第一种方法基本上是采用应该匹配的一组卡片，尝试将第一条规则应用于它。如果匹配，我继续下一个规则并尝试从一组卡片中匹配它，依此类推，直到所有规则都匹配，或者我找到一个不匹配的规则。这种方法（至少）有一个缺陷，考虑上面的例子：`*:*,<:*,*:<`，但是卡片的顺序是：`H:8,C:8,H:4`。

*   它将与第一条规则的 H:8 匹配。`Matched: H:8`
*   接下来，它试图找到一个具有相同西装（红心）的人。有一个红心四。`Matched: H:8, H:4`
*   继续前进，它想找到一张具有相同值（四）的卡，但失败了。

我不希望卡片组的排序方式对结果产生任何影响，就像在上面的示例中那样。如果我能想到任何适用于任何规则的伟大策略，我就可以对这组卡片进行排序。

我不知道卡片的数量或数量规则，所以暴力方法是不可行的。

感谢您阅读本文，感谢您提供任何提示或见解。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-21T19:30:10.597

你的问题实际上是一个排序问题。这是一个简单的版本：

给定一个输入的数字序列和一个模式，重新排序它们以适应模式。该模式可以包含“*”，表示“任何数字”和“>”，表示“大于前一个数字”。

例如，给定模式 [* * > >] 和序列 [10 10 2 1] 存在这样的排序，它是 [10 1 2 10]。有些输入可能没有输出，有些输入 1，而其他输入可能很多（想想输入 [10 10 2 1] 和模式 [* * * *]）。

我想说，一旦你有了这个简化问题的解决方案，切换到你的问题只是添加另一个维度和一些运算符的问题。很抱歉没有提供更多帮助：/。

乐。请记住，如果允许的字符符号是有限的（即 4）以及允许的数字（即 9），事情可能会变得更容易。

# java - 如何在 libgdx 中创建轨道？

> ID：12061451
> 
> 赞同：1
> 
> 时间：2012-08-21T19:10:33.073
> 
> 标签：java, android, geometry, libgdx

我正在制作一款太空游戏，我想制作一艘小型无人机飞船环绕我更大的玩家飞船。我不完全确定如何让它在一个完美的圆圈中运行。到目前为止，我可以让它以菱形移动，但我试图纠正圆形的尝试以失败告终。

基本上，我正在做这样的事情：

```
float centerX = ship.getX() + (ship.getWidth() / 2);
float centerY = ship.getY() + (ship.getHeight() / 2);
float droneX = drone.getX();
float droneY = drone.getY();
float radius = drone.getRadius();
float xDiff = Math.abs(droneX - centerX);
float yDiff = Math.abs(droneY - centerY);
float moveByX = Math.abs(radius / (xDiff == 0 ? 1 : xDiff) / smoother);
float moveByY = Math.abs(radius / (yDiff == 0 ? 1 : yDiff) / smoother); 
```

然后我通过 moveByX 和 moveByY 值移动无人机。正如我所提到的，它在菱形中工作得很好，但是我怎样才能改进它来计算正确的圆形图案呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T20:08:47.833

好的，因为您使用的是 x 和 y 差异，所以它只会走直线，这解释了菱形图案。为了得到圆圈，你必须打破三角学。

```
float angle; //angle in radians
float droneX = drone.getRadius() * Math.sin(angle); 
float droneY = drone.getRadius() * Math.cos(angle); 
```

之后，您可以使用您的移动代码。并且角度可能应该保持在无人机上，并以弧度表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:04:03.657

CBredlow 能够给我足够的信息来解决这个问题 - 我无法接受他的回答，因为这是一个评论，但解决方案是这样的：

```
// this is degrees per second
   float speed = 10f;
   float rate = 5f;
   float circleX = (float) (Math.cos(drone.getAngle()) * 
          (ship.getWidth() / 1.25) + centerX);
   float circleY = (float) (Math.sin(drone.getAngle()) * 
          (ship.getHeight() / 1.25) + centerY);
   float angle = drone.getAngle() + (speed * (rate/1000)) % 360;
   if (angle >= 360) {
      angle = 0;
   }
   drone.setAngle(angle);
   drone.setX(circleX);
   drone.setY(circleY); 
```

谢谢！

# cuda - Cuda内核似乎阻塞，启动超时并被终止

> ID：12061459
> 
> 赞同：0
> 
> 时间：2012-08-21T19:11:10.700
> 
> 标签：cuda

我在 CUDA 中编写了一个加载 JPEG 文件的库和一个显示它们的查看器。这两部分都大量使用了 CUDA，来源在 SourceForge：

cuview & cujpeg

我将图像作为 RGB 数据存储在 GPU 内存中，并且我有一个函数 bitblt，它将 RGB 数据的矩形数组从一个图像复制到另一个图像。

该代码在我的最后一台带有 CUD3.x 的 GTX580 的 PC 上运行良好（无法再恢复）。

现在我有一个 GTX680 并使用 CUDA 4.x。

内核看起来像这样，它在 GTX580 / CUDA 3.x 上运行良好：

```
__global__ void cujpeg_k_bitblt(CUJPEG* dd, CUJPEG* src, int sx, int sy, int tx, int ty, int w, int h)
{
  unsigned char* sb;
  unsigned char* s;
  unsigned char* db;
  unsigned char* d;
  int tid;
  int x, y;
  int xs, ys, xt, yt;
  int ws, wt;

  sb = src->dev_rgb;
  db = dd->dev_rgb;

  ws = src->stride;
  wt = dd->stride;

  for(tid = threadIdx.x + blockIdx.x * blockDim.x; tid < w * h; tid += blockDim.x * gridDim.x) {
    y = tid / w;
    x = tid - y * w;

    xs = x + sx;
    ys = y + sy;

    xt = x + tx;
    yt = y + ty;

    s = sb + (ys * ws + xs) * 3;
    d = db + (yt * wt + xt) * 3;

    d[0] = s[0];
    d[1] = s[1];
    d[2] = s[2];
  }
 } 
```

我想知道这可能与什么有关，也许 GTX680 上多个属性的较高数字会在某处产生溢出？

*   经线 32
*   每个块的最大线程数 1024
*   最大螺纹暗淡 1024 1024 64
*   最大网格暗淡 2147483647 65535 65535

任何提示将不胜感激。

我在 Linux 上开发，使用 OpenSuSE 12.1。

最好的问候，托斯滕。

编辑，2012-08-22：我使用：devdriver_4.0_linux_64_270.40.run cudatools_4.0.13_linux_64.run cudatoolkit_4.0.13_linux_64_suse11.2.run

关于该功能 bitblt 的时间安排：在我最后一台装有 Cuda 3.x 和 GTX580 的 PC 上，该功能需要几毫秒。现在它在几秒钟后超时。还有其他内核正在运行，如果我注释掉对 bitblt 的调用，一切运行正常。同样使用 printf() 我可以看到 bitblt 之前的所有调用都很好，而在 bitblt 之后没有执行任何操作。

我真的不能认为内核本身就是问题，但我不知道什么会影响我看到的行为。

最好的问候，托斯滕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T10:56:53.547

好的，我发现了问题。由于 JPEG 解码器是一个库，因此我在解码时为用户提供了一些灵活性，因此在调用 CUDA 内核时，我没有网格/线程的固定参数，而是使用我在初始化时设置的预初始化值并且用户可以覆盖。我从使用的 GPU 的 CUDA 属性中获得这些默认值，但我使用的值不正确。网格为 2147483647，但 65535 是允许的最大值。

# sql - 如何检查电子邮件附件是否已打开

> ID：12061465
> 
> 赞同：3
> 
> 时间：2012-08-21T19:11:20.140
> 
> 标签：sql, email, pdf, attachment

我正在进行一项研究，该研究向人们发送一份包含健康信息的 PDF 文档。团队想知道这个人是否真的打开了 PDF 文档（这表明他们没有忽略电子邮件）。我知道可以使用指向外部文件的链接来完成此操作，但用户点击 URL 并下载它的可能性要小得多，然后他们只是查看附件，而我们不想做任何可能阻止用户阅读信息的事情（我们已经有人说他们从未收到过信息，经过进一步调查，他们发现他们收到了，他们只是忽略了它）。

另一种选择是请求阅读报告，但这只有在不打扰用户的情况下才有用（即它在打开电子邮件时自动执行，而不是要求他们发送）。我们目前也在对此进行调查，但检查附件是否已打开的能力是一个更好的主意。

电子邮件是在 MS SQL 中生成并使用数据库邮件系统发送的，我们有 adobe acrobat pro，因此可以在 pdf 中创建脚本（尽管我不确定是否允许运行这些脚本）。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T19:58:10.397

1) 不要在电子邮件中包含 PDF，包含指向 PDF 的链接。

或者

2) 在 PDF 中包含一个 javascript 片段，该片段访问每个用户的 URL 或包含 IP 地址或要跟踪的内容。这只有在用户允许 javascript 并且他们的 pdf 阅读器支持它时才有效。

看

[http://ask.metafilter.com/153206/Is-it-possible-to-track-where-a-PDF-file-goes-once-in-the-wild](http://ask.metafilter.com/153206/Is-it-possible-to-track-where-a-PDF-file-goes-once-in-the-wild)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-15T19:53:12.003

自从这最初发布以来，已经有许多消费者工具现在可以让您跟踪通过网络链接发送的 PDF。

[http://docsend.com](http://docsend.com) , [http://attach.io](http://attach.io)

如果您从 Dropbox 共享

[http://orangedox.com](http://orangedox.com)

比自己编写脚本要容易得多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T05:20:54.897

目前有许多工具可以为他们的用户提供附件跟踪服务。我还使用 SalesHandy 进行附件跟踪，并深入分析您的附件何时何地打开。

点击阅读更多：[https ://www.saleshandy.com/document-tracking/](https://www.saleshandy.com/document-tracking/)

# kohana - behat + mink 的问题

> ID：12061469
> 
> 赞同：1
> 
> 时间：2012-08-21T19:11:47.020
> 
> 标签：kohana, behat, mink

我正在尝试安装 behat + mink（在 kohana 框架上，而不是 symfony 上，我将 behat 放入模块文件夹中 - 我写这个以防万一，但我想这不是导致我的问题的原因）。

我拥有与 behat 文档中相同的 search.feature 文件，我将 features/bootstrap 类更改为：

```
<?php

use Behat\Behat\Context\ClosuredContextInterface,
    Behat\Behat\Context\TranslatedContextInterface,
    Behat\Behat\Context\BehatContext,
    Behat\Behat\Exception\PendingException;
use Behat\Gherkin\Node\PyStringNode,
    Behat\Gherkin\Node\TableNode;     

use Behat\MinkExtension\Context\MinkContext;

/**
 * Features context.
 */
class FeatureContext extends MinkContext 
{

} 
```

**当我在 CLI 中键入“behat”时，我收到以下错误：在第 80 行的 .....RawMinkContext.php 中的非对象上调用成员函数 getSession()。**

我在某处读到它是导致此错误的 behat.yml 文件。我认为正确的做法是在已安装的 behat 文件夹的根目录中创建新的 behat.yml 文件并将此代码放入其中：

```
default:
  extensions:
    Behat\MinkExtension\Extension:
      base_url: http://wikipedia.org
      goutte: ~
      selenium2: ~

  paths:
    features:  features
    bootstrap: features/bootstrap

annotations:
  paths:
    features: features/annotations

closures:
  paths:
    features: features/closures 
```

但是当然它给了我同样的错误。我尝试了很多配置：仅复制扩展部分，将默认值更改为上下文，将相同的内容复制到其他三个 behat.yml 文件（vendor/behat/behat、vendor/behat/monk 和 vendor/behat/monk -意图） - 没有工作。

有人能告诉我设置这个的正确方法是什么吗？也许这里的某人也有这个问题......

顺便提一句。当我安装 behat withough goutte 时，仅使用 selenium2 驱动程序，我收到未安装 goutte 的错误。但是当我用 goutte 安装它时，我收到了没有 fabpot/goutte 目录（或 fapbot/，我不记得了，但我想这是第一个 :D）的错误，所以我删除了所有内容并重新安装了 behat下面的 composer.json 文件，也许这也与这个错误有关：

```
{
    "name":         "behat/mink-browserkit-driver",
    "description":  "Symfony2 BrowserKit driver for Mink framework",
    "keywords":     ["Symfony2", "testing", "browser"],
    "homepage":     "http://mink.behat.org/",
    "type":         "mink-driver",
    "license":      "MIT",

    "authors": [
        {
            "name":      "Konstantin Kudryashov",
            "email":     "ever.zet@gmail.com",
            "homepage":  "http://everzet.com"
        }
    ],

    "require": {
        "php":                  ">=5.3.1",
        "symfony/browser-kit":  ">=2.0.0,<2.2.0",
        "symfony/dom-crawler":  ">=2.0.0,<2.2.0",
        "behat/behat": "2.4.*@stable",
        "behat/mink": "1.4.*@stable",
        "behat/mink-extension": "*",
        "behat/mink-goutte-driver": "*",
        "behat/mink-selenium2-driver": "*"
    },

    "minimum-stability": "dev",

    "autoload": {
        "psr-0": {
            "Behat\\Mink\\Driver": "src/"
        }
    },

    "config": {
        "bin-dir": "bin/"
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T06:15:00.217

为任何东西（不仅仅是 Kohana）安装 Behat+Mink 的推荐方法是通过 Composer。有关说明，请参阅[http://docs.behat.org/quick_intro.html](http://docs.behat.org/quick_intro.html)。您在 composer.json 中的自动加载子句不是必需的。

至于您的模块尝试，KO3.2 还没有加载 PSR-0 的能力，因此将其放入模块中将无法正确加载它。

不要随意复制您的 behat.yml - 您只需要在项目根目录中复制一份。如果您担心，可以通过显式加载 behat.yml`bin/behat -c /path/to/behat.yml`

正确设置 composer.json 以具有 mink 依赖项，然后您可以`bin/behat -dl`验证 mink 是否有效。

然后，您可以`bin/behat --init`创建您的功能文件结构。

这将创建一个覆盖 Mink 定义的 FeatureContext，所以添加

```
 require_once __DIR__.'/../../vendor/autoload.php'; 
```

并将类定义更改为：

```
 class FeatureContext extends Behat\MinkExtension\Context\MinkContext 
```

在您的 features/bootstrap/FeatureContext.php 文件中。

现在一切都应该按预期工作。我最近做了一个 Behat+Mink+KO3 设置，随意看看我是怎么做到的：[https ://github.com/Moult/Eadrax/commit/b5dd813c92b82aea29eea13b5a30bae170aa57e6](https://github.com/Moult/Eadrax/commit/b5dd813c92b82aea29eea13b5a30bae170aa57e6)

# selenium - Selenium IDE：检查所有突出显示的元素的命令，计算突出显示的元素，并查看它是否与数字匹配

> ID：12061470
> 
> 赞同：1
> 
> 时间：2012-08-21T19:11:51.760
> 
> 标签：selenium, selenium-ide

这是源代码：当元素被突出显示时，它会在 class= 中添加“ui-state-highlight”

```
<div id="entry_1994" class="entry ui-widget-content ui-state-highlight" onfocusout="a();" onclick="if (window.bIgnoreClick===undefined) { clickHandler('entry_1994'); } else { window.bIgnoreClick=undefined; }" style="border: 1px dashed rgb(119, 119, 119);">
<script type="text/javascript">
<div id="entry_2037" class="entry ui-widget-content" onfocusout="a();" onclick="if (window.bIgnoreClick===undefined) { clickHandler('entry_2037'); } else { window.bIgnoreClick=undefined; }" style="border: 1px dashed rgb(119, 119, 119);"> 
```

这些还有很多。我想检查所有这些元素并查看它们是否突出显示，如果它们突出显示，我想存储或计算这些突出显示的元素并将其与数字进行比较。

例如，这些元素中有 10 个，其中 5 个被突出显示，所以 5 应该将它与我拥有的数字进行比较。这些元素中有 10 个，其中 7 个被突出显示，所以 7 应该将它与我拥有的数字进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:33:07.837

通过部分文本查找 CSS 选择器的元素：http: [//sauceio.com/index.php/2010/01/selenium-totw-css-selectors-in-selenium-demystified/](http://sauceio.com/index.php/2010/01/selenium-totw-css-selectors-in-selenium-demystified/)

对于 xpath：[http ://blog.ianbicking.org/starting-with-selenium.html](http://blog.ianbicking.org/starting-with-selenium.html)

# attributes - 在 capybara 对象上声明属性

> ID：12061479
> 
> 赞同：1
> 
> 时间：2012-08-21T19:12:26.797
> 
> 标签：attributes, find, selector, capybara, assert

我目前正在与 capybara 合作进行集成测试，并作为我们测试框架的一部分。我遇到了一个我似乎无法找到解决方案的问题。所以场景是这样的，我最初为一个 tbody 元素做一个查找。我把物体拿回来了，一切都很好。我面临的问题是，在我的测试中有一点需要断言我正在使用的 tbody 对象的 css 类已经改变。到目前为止，我尝试过的每种方法都失败了。代码看起来像这样：

```
@element = find('tbody')

--tbody css selecor changes to '.is-edit-post'

@element.find('.is-edit-post') 
```

我试图断言水豚对象具有该 css 选择器。我还尝试了以下方法：

```
@element.has_css('.is-edit-post')

@element.assert_selector('.is-edit-post') 
```

现在，我不完全理解#find 方法是如何工作的以及它究竟返回了什么。在这一点上，我推测由于 tbody 对象在 #find 方法找到并返回它时没有那个 css 选择器，这就是它返回 false 或抛出异常说它没有找到的原因。

如果该对象的属性发生变化，任何人都对我如何获得该对象的属性有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-24T21:04:50.230

自从我发布这个问题以来已经有很长时间了，但我认为在这种情况下我正在寻找的答案是：

`@element[:class].include? 'is-edit-post'`

或者如果元素没有更新，我需要再次抓取它，然后检查类：

`find('tbody')[:class].include? 'is-edit-post'`

无论如何，我很久以前就解决了这个问题。

# javascript - jQuery UI DatePicker - 禁用除每个月的第一天和第十五天以外的所有日子

> ID：12061483
> 
> 赞同：6
> 
> 时间：2012-08-21T19:12:32.277
> 
> 标签：javascript, jquery, jquery-ui, datepicker

我想禁用这个日期选择器上的所有日子，除了每个月的 1 号和 15 号。我引用了这个已回答的问题，但我只能返回一个日期。我是 javascript 的新手。[jQuery UI DatePicker - 禁用除每月最后一天以外的所有日期](https://stackoverflow.com/questions/3712294/jquery-ui-datepicker-disable-all-days-except-last-day-of-month)

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T19:28:56.880

这应该可以解决问题：

```
$(function(){
    $("input").datepicker(
        {
        beforeShowDay: function (date) {

        if (date.getDate() == 15 || date.getDate() == 1) {
            return [true, ''];
        }
        return [false, ''];
       }
    });
}); 
```

​查看下面的链接以获取工作示例！

[http://jsfiddle.net/HM83u/](http://jsfiddle.net/HM83u/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-21T19:30:57.877

好像这会工作

```
$('.selector').datepicker({
       beforeShowDay: function (date) {
       //getDate() returns the day (0-31)
       if (date.getDate() == 1 || date.getDate() == 15) {
           return [true, ''];
       }
       return [false, ''];
    }
}); 
```

# ruby-on-rails - 如果评估的最后一个语句是 If 语句，Ruby 会返回什么

> ID：12061485
> 
> 赞同：6
> 
> 时间：2012-08-21T19:12:40.543
> 
> 标签：ruby-on-rails, ruby, function, return

我的理解是 ruby​​ 返回函数中评估的最后一条语句。如果函数以`if`评估为 false 的语句结束怎么办

```
def thing(input)
  item = input == "hi"
  if item
    []
  end
end

puts thing("hi").class #> Array
puts thing("not hi").class #> NilClass 
```

我喜欢这个功能（`nil`如果语句为假则返回），但为什么不`false`返回（从分配到`item`）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T19:19:11.437

如果您的`if`语句没有导致任何代码运行，则返回 nil，否则返回已运行代码的值。Irb 是一个很好的工具来试验这些东西。

```
irb(main):001:0> i = if false then end
=> nil
irb(main):002:0> i = if true then end
=> nil
irb(main):007:0> i = if false then "a" end
=> nil
irb(main):008:0> i = if false then "a" else "b" end
=> "b" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T19:19:03.203

返回值是 if 表达式的值，是被评估的子句的值，而不是条件的值。如果没有评估子句（如果没有 else），则返回 nil：

```
irb(main):001:0> x = if false
irb(main):002:1> []
irb(main):003:1> end
=> nil
irb(main):004:0> x
=> nil
irb(main):005:0> 
```

# erlang - Erlang 容错应用：CAP 的 PA 还是 CA？

> ID：12061487
> 
> 赞同：6
> 
> 时间：2012-08-21T19:12:44.737
> 
> 标签：erlang, couchdb, erlang-otp, mnesia, cap

我已经问过一个[关于](https://stackoverflow.com/questions/11790547/building-a-fault-tolerant-soft-real-time-web-application-with-erlang-otp)披萨外卖店的简单容错软实时 Web 应用程序的问题。

![在此处输入图像描述](../Images/1a6b55abfb79825bbf5e5d01be8c634c.png)

我在那里得到了非常好的评论和答案，但我不同意它是一个真正的网络服务。它不是一个网络服务，它更像是一个实时系统，用于接受客户的订单，控制这些订单的调度，并控制实时交付这些订单的车辆。

此外，与“真正的”网络服务不同，该系统并不打算拥有很多用户——它只是几个调度员（电话接线员）和几个送货司机将使用它（目前我不需要提供直接访问到实际客户的服务；只有调度员和送货司机才能直接访问）。

因此，这个问题更笼统。

我发现，为了为此应用程序的 NoSQL 数据存储选项做出正确的选择，我要做的第一件事就是根据[CAP 定理](http://en.wikipedia.org/wiki/CAP_theorem)在和`CA`之间做出选择。`PA``CP`

现在，《[用 Erlang 构建 Web 应用程序](https://rads.stackoverflow.com/amzn/click/com/1449309968)》一书说“虽然它 [Mnesia] 不是 SQL 数据库，但它是一个类似于 SQL 数据库的 CA 数据库。它不会处理网络分区”。同一本书说 CouchDB 数据库是一个`PA`数据库。

考虑到这一点，我认为我需要对我的应用程序做的第一件事是确定“容错”一词对于 CAP 的含义。

我的简单要求是让应用程序 24/7(R1) 可用。另一个是不需要扩展，应用程序的用户数量非常有限（可能不可能有数千个调度程序）（R2）。

现在，R1 是否要求应​​用程序提供一致性、可用性和分区容错性以及哪些优先级？

哪种类型的数据存储选项将更好地处理以下问题：

1.  为调度员（接听客户电话并使用 CRM 的人）提供 24/7 全天候可用性，以查找客户记录并将订单输入系统；
2.  实时查看当前正在进行的服务订单及其状态（下达、烘焙、派送、交付、交付）；
3.  实时跟踪所有工作车辆的位置及其有效载荷；
4.  在系统崩溃或网络崩溃后恢复系统的任何部分以继续提供1，2和3；

总结一下：*哪种数据存储（CA、PA 或 CP）更适合上述系统？什么样的数据存储能更好地满足 R1 的要求？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:59:06.447

*   对于您的 24/ 要求，您正在搜索具有（高）可用性的数据库，因为您希望您的请求每次都成功（即使它们只是错误结果）。
*   当您没有分区容错时，netsplit 会使您的整个系统崩溃
*   一致性很好，但你只能有 3 个中的 2 个。

您最好的选择是 PA 解决方案。我强烈推荐一个受 Amazon Dynamo 启发的解决方案。最著名的 dynamo 实现是 riak 和 couchdb。Riak 甚至允许您通过调整读写副本将 PA 更改为其他形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:46:16.357

首先，不要将 CAP 的“可用性”与“高可用性”混淆。他们彼此没有任何关系。CAP 中的 A 仅表示“所有数据库节点都可以回答查询”。要获得高可用性，您必须在多个数据中心中，您必须有健壮的维护、扩展等记录程序。这些都不取决于您的 CAP 选择。

其次，对你的要求现实一点。股票交易应用程序可能需要 100% 的正常运行时间，因为每一秒的停机时间都可能损失数百万美元。另一方面，我猜你的比萨店每倒下一分钟就会损失几十美元。因此，花费数百万美元来维持它是没有意义的。尝试计算您的实际成本。

第三，始终评估您的选择与主流。当问题发生时，您可以只使用 CA (MySQL) 并快速故障转移到从属服务器。对建立新技术的成本（和风险）保持现实。如果您*真的*希望您的系统可以运行 5 年而不会停机，请要求提供其他人已经运行该数据库 5 年而不会停机的证明。

如果您使用“AP”并且有远程人员（司机等），那么您需要编写一个应用程序，将他们的数据存储在他们的手机上并在后台发送（重试）。当然，无论您的数据库是 CA 还是 AP，您都可以这样做。

如果您想要更长的正常运行时间，您可以：

*   增加 MTBF（平均故障间隔时间） - 购买冗余电源、购买双以太网卡等。

*   减少 MTTR（平均恢复时间） - 只要确保发生故障时您可以快速恢复。（故障转移到从站）

我见过人们在 MTBF 上花费数万美元，但在他们恢复备份时只停机了 8 个小时。在攻击 MTBF 之前确保 MTTR 较低更有意义。

# redis - 如何解决 nodejitsu 上的hiredis 编译问题？

> ID：12061494
> 
> 赞同：3
> 
> 时间：2012-08-21T19:12:58.487
> 
> 标签：redis, nodejitsu

在nodejitsu上部署后如何解决hiredis编译问题？

部署到 nodejitsu 后，我从`jistu logs`命令中收到以下错误。

```
ld.so.1: node: fatal: relocation error: file /opt/haibu/apps/<user>/<app>/package/node_modules/redis/node_modules/hiredis/build/Release/hiredis.node: symbol redisReaderCreate: referenced symbol not found 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T22:26:31.607

之所以不能开箱即用，是因为 redis 包附带了hiredis，这是redis 用来解析redis 代码的C 库。

Nodejitsu 不保证 C 库可以开箱即用，因为代码必须在它们的服务器上编译，并且不保证它会以与您的开发环境相同的方式执行 makefile。

在 Pavel 的解决方案中，他覆盖了 CPPFLAGS 和 LD_OPTIONS 环境变量，这反过来又强制hiredis 库进行编译。不幸的是，这将对您的包使用的任何其他 C 库产生不利影响。

我建议通过以下方式将 redis 与您的项目捆绑在一起：

```
npm install hiredis
npm install redis
npm uninstall hiredis 
```

Redis 会检测到您已经安装了hiredis，因此它不会将其安装为依赖项。然后，只需在安装 redis 后删除hiredis。Redis 将自动回退到 Javascript 解析器，这有点慢（但团队正在努力改进它）。

然后，将“redis”添加到捆绑的依赖项中：

```
"bundledDependencies": ["redis"] 
```

很简单`jitsu deploy`，你就可以开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:12:58.487

我必须将以下内容添加到 package.json

```
"bundledDependencies": ["redis"] 
```

[https://npmjs.org/doc/json.html#bundledDependencies](https://npmjs.org/doc/json.html#bundledDependencies)

可选择尝试将以下内容添加到 package.json

```
"env": {
    "CXX": "/opt/local/bin/g++ -m64",
    "CPPFLAGS": "-I/opt/local/include",
    "LD_OPTIONS": "-L/opt/local/lib -lsocket -lnsl",
    "PYTHON": "/opt/local/bin/python2.7"
} 
```

在 webchat.jit.su 上获得了来自 'blakmatrix_' 和 '@AvianFlu' 的帮助，[谢谢](http://webchat.jit.su/)！

*   bundleddeps 告诉 npm 将 deps 与项目的其余部分一起打包，通常 node_modules 中的任何内容都不会打包
*   但是，如果您告诉它，通过将 dep 名称放在捆绑的 dep 数组中，它将在打包时将该依赖项包含在您的应用程序中
*   通过这样做，一旦你做了一个`npm i -d`例子，它将使用 bundle dep 而不是重新安装它

# c# - HTMLAgilityPack 如何解析已在 WebControl 中打开的文档

> ID：12061496
> 
> 赞同：0
> 
> 时间：2012-08-21T19:13:02.247
> 
> 标签：c#, html, dom, html-agility-pack

如何解析已在 WebControl 中打开的页面中的表格？（我不想重新加载页面）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:14:56.020

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(webcControl.DocumentText); 
```

# jquery - 将元素定位在另一个具有绝对位置的元素下？

> ID：12061497
> 
> 赞同：2
> 
> 时间：2012-08-21T19:13:11.413
> 
> 标签：jquery, html, css, drop-down-menu

我有一个带有下拉菜单的项目。这是HTML：

```
<div class="body">
        <div class="head"></div>
        <div class="navbar">
            <div>Home</div>
            <div id="items"><p>Items</p>
                <div class="idd">
                    <table class="dd">
                        <tr>
                            <td><a href="./items/weapons.html">Weapons</a></td>
                        </tr>
                        <tr>
                            <td><a href="./items/abilities.html">Abilities</a></td>
                        </tr>
                        <tr>
                            <td><a href="./items/armor.html">Armor</a></td>
                        </tr>
                        <tr>
                            <td><a href="./items/rings.html">Rings</a></td>
                        </tr>
                    </table>
                </div>
            </div>

            <div>Sets</div>
            <div>Contact</div>
            <div>Info</div>
            <div>Donations</div>
        </div>
    </div> 
```

所以，现在这里是 CSS：

```
div.body {
width: 1000px;
margin-left: auto;
margin-right: auto;
margin-top: 15px;
}
div.body div.head {
background-image: url("header.png");
width: 995px;
height: 200px;
margin-left: auto;
margin-right: auto;
}
div.navbar div {
font-size: 13pt;
padding-top: 10px;
display: inline-block;
margin-left: 10px;
padding-left: 8px;
padding-right: 8px;
padding-bottom: 10px;
}
div.navbar div:hover {
background-color: #666;
}
div.navbar {
font-family: 'HelveticaNeue';
background-image: url("../newsdcs/navbarbg.png");
width: 730px;
height: 40px;
margin-top: 15px;
border-radius: 5px;
text-align: center;
margin-left: auto;
margin-right: auto;
color: #F0F0F0;
}
div.navbar div p {
margin-top: 0;
margin-bottom: 0;
}
div.navbar div div.idd {
background-color: #666;
position: absolute;
}
a {
color: white;
text-decoration: none;
} 
```

是的，这是 JQuery：

```
$(document).ready(function(){
            window.onload = function() {
                if(!window.location.hash) {
                    window.location = window.location + '#l';
                    window.location.reload();
                }
            }
            $(".idd").hide();
            var eTop = $('#items').offset().top;
            var eLeft = $('#items').offset().left;
            var eTopA = eTop + 40;
            var eLeftA = eLeft;
            $(".idd").offset({ top: eTopA, left: eLeftA });
            $("#items").hover(function() {
                $(".idd").show();
            }, function() {
                $(".idd").hide();
            });
        }); 
```

在每个人的浏览器和计算机上，他们会得到不同的结果。稍微偏离中心，在错误的地方，刷新，你会得到正确的结果，错误的结果，无论如何。如何制作一致、居中、正确且一致的下拉菜单？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:57:20.640

我认为这样的事情可能会有所帮助。这是一个基本的 jQuery 下拉菜单，应该在所有浏览器中看起来都一样。如果可能的话，我建议将所有定位样式保留在样式表中，在这种情况下就是这样。

[http://jsfiddle.net/UrGfZ/](http://jsfiddle.net/UrGfZ/)

PeterVR 也提出了一个很好的观点。如果您担心用户会阻止 JS，并希望使用老式的 HTML/CSS 设置您的导航，那么下面的小提琴将起作用。我在两个 jsFiddle 项目之间所做的唯一更改是手动将类“hasSubNav”添加到 li 中，并在 CSS 中添加一行以在悬停时显示 sub。

[http://jsfiddle.net/YzPaE/](http://jsfiddle.net/YzPaE/)

两者看起来相同，这仅取决于您想使用菜单走多远。如果您要为下拉列表等设置动画，那么 jQuery 将是您的最佳选择，否则纯 CSS 版本就像一个魅力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:37:56.300

我不想批评你，但我认为你在这里采取了错误的方法。我相信你把事情复杂化了。几点说明：

不要**将表格用于非表格数据**。它会杀死你的搜索引擎优化！菜单是链接列表，应该这样编码。子菜单应编码为嵌套列表。一个小例子：

```
<ul id='nav'>
  <li><a ..>top 1</a></li>
  <li><a ..>top2</a>
    <ul>
      <li><a ..>sub 1</a>
      <li><a ..>sub 2</a>
      ...
    </ul>
  </li>
  ...
</ul> 
```

我强烈建议**不要将 js 用于像主导航这样基本的东西**。那些禁用了 js 的用户呢（是的，他们确实存在 :-s），他们将无法浏览您的网站。始终尝试应用优雅降级的原则。在这种情况下，一个基本的下拉菜单，绝对不需要 js。只需几行适用于所有人的基本 css 即可。尝试一些教程，可能是这样的[http://onwebdev.blogspot.com/2011/04/css-drop-down-menu-tutorial.html](http://onwebdev.blogspot.com/2011/04/css-drop-down-menu-tutorial.html)（只是我在 Google 上的第一个结果，应该有很多好的 tuts 在那里）

希望这能让你走上正确的轨道......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:27:56.090

我看到你可能不需要的大量额外利润等。在我看来，您正在使用 javascript 设置顶部和左侧的表格包装器。我没有这样做，而是设置 position:relative 到该包装器的容器，然后设置 left:0 和 top:35px （或您要查找的任何位置）。这将大大简化您的 JS。

我添加了这些更改，它似乎保持一致。

```
div#items {position:relative;}
div.navbar div div.idd {
    left:0;top:35px;
} 
```

使用 CSS 完成这一切的好处是表格包装器 (div.idd) 将始终相对于 div#items 定位，因此您只需要担心 div#items 的位置。跨浏览器支持本身就是一种艺术形式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T21:44:49.140

我有点不清楚为什么要使用 jQuery 进行简单导航而不是仅使用 CSS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T19:22:42.537

如果你想要跨浏览器的一致性，你有两个选择：

为不同的浏览器加载不同的样式表，使用

`<!-- [if IE]>`
`// Use this stylsheet`
`<![endif]>`

你明白了。

您的另一个选择是去除尽可能多的边距和填充，以及浏览器解释不同的任何其他内容，并尽可能**简化，然后重新定位您的元素。**

也不是如果您将样式应用于不同的标签以使它们看起来相同，则不同的标签在不同的浏览器中看起来不同。

欢迎使用跨浏览器！
-布赖恩

# javascript - 仅对特定的 html 元素启用幻灯片放映

> ID：12061498
> 
> 赞同：0
> 
> 时间：2012-08-21T19:13:12.237
> 
> 标签：javascript, jquery

这是我的 slideshow.js

```
 ; (function ($) {
    "use strict";

    var ver = 'Lite-1.6';

    $.fn.cycle = function (options) {
        return this.each(function () {
            options = options || {};

            if (this.cycleTimeout) clearTimeout(this.cycleTimeout);

            this.cycleTimeout = 0;
            this.cyclePause = 0;

            var $cont = $(this);
            var $slides = options.slideExpr ? $(options.slideExpr, this) : $cont.children();
            var els = $slides.get();
            if (els.length < 2) {
                if (window.console)
                    console.log('terminating; too few slides: ' + els.length);
                return; // don't bother
            }

            // support metadata plugin (v1.0 and v2.0)
            var opts = $.extend({}, $.fn.cycle.defaults, options || {}, $.metadata ? $cont.metadata() : $.meta ? $cont.data() : {});
            var meta = $.isFunction($cont.data) ? $cont.data(opts.metaAttr) : null;
            if (meta)
                opts = $.extend(opts, meta);

            opts.before = opts.before ? [opts.before] : [];
            opts.after = opts.after ? [opts.after] : [];
            opts.after.unshift(function () { opts.busy = 0; });

            // allow shorthand overrides of width, height and timeout
            var cls = this.className;
            opts.width = parseInt((cls.match(/w:(\d+)/) || [])[1], 10) || opts.width;
            opts.height = parseInt((cls.match(/h:(\d+)/) || [])[1], 10) || opts.height;
            opts.timeout = parseInt((cls.match(/t:(\d+)/) || [])[1], 10) || opts.timeout;

            if ($cont.css('position') == 'static')
                $cont.css('position', 'relative');
            if (opts.width)
                $cont.width(opts.width);
            if (opts.height && opts.height != 'auto')
                $cont.height(opts.height);

            var first = 0;
            $slides.css({ position: 'absolute', top: 0 }).each(function (i) {
                $(this).css('z-index', els.length - i);
            });

            $(els[first]).css('opacity', 1).show(); // opacity bit needed to handle reinit case
            if ($.browser.msie) els[first].style.removeAttribute('filter');

            if (opts.fit && opts.width)
                $slides.width(opts.width);
            if (opts.fit && opts.height && opts.height != 'auto')
                $slides.height(opts.height);
            if (opts.pause)
                $cont.hover(function () { this.cyclePause = 1; }, function () { this.cyclePause = 0; });

            var txFn = $.fn.cycle.transitions[opts.fx];
            if (txFn)
                txFn($cont, $slides, opts);

            $slides.each(function () {
                var $el = $(this);
                this.cycleH = (opts.fit && opts.height) ? opts.height : $el.height();
                this.cycleW = (opts.fit && opts.width) ? opts.width : $el.width();
            });

            if (opts.cssFirst)
                $($slides[first]).css(opts.cssFirst);

            if (opts.timeout) {
                // ensure that timeout and speed settings are sane
                if (opts.speed.constructor == String)
                    opts.speed = { slow: 600, fast: 200}[opts.speed] || 400;
                if (!opts.sync)
                    opts.speed = opts.speed / 2;
                while ((opts.timeout - opts.speed) < 250)
                    opts.timeout += opts.speed;
            }
            opts.speedIn = opts.speed;
            opts.speedOut = opts.speed;

            opts.slideCount = els.length;
            opts.currSlide = first;
            opts.nextSlide = 1;

            // fire artificial events
            var e0 = $slides[first];
            if (opts.before.length)
                opts.before[0].apply(e0, [e0, e0, opts, true]);
            if (opts.after.length > 1)
                opts.after[1].apply(e0, [e0, e0, opts, true]);

            if (opts.click && !opts.next)
                opts.next = opts.click;
            if (opts.next)
                $(opts.next).unbind('click.cycle').bind('click.cycle', function () { return advance(els, opts, opts.rev ? -1 : 1); });
            if (opts.prev)
                $(opts.prev).unbind('click.cycle').bind('click.cycle', function () { return advance(els, opts, opts.rev ? 1 : -1); });

            if (opts.timeout)
                this.cycleTimeout = setTimeout(function () {
                    go(els, opts, 0, !opts.rev);
                }, opts.timeout + (opts.delay || 0));
        });
    };

    function go(els, opts, manual, fwd) {
        if (opts.busy)
            return;
        var p = els[0].parentNode, curr = els[opts.currSlide], next = els[opts.nextSlide];
        if (p.cycleTimeout === 0 && !manual)
            return;

        if (manual || !p.cyclePause) {
            if (opts.before.length)
                $.each(opts.before, function (i, o) { o.apply(next, [curr, next, opts, fwd]); });
            var after = function () {
                if ($.browser.msie)
                    this.style.removeAttribute('filter');
                $.each(opts.after, function (i, o) { o.apply(next, [curr, next, opts, fwd]); });
                queueNext(opts);
            };

            if (opts.nextSlide != opts.currSlide) {
                opts.busy = 1;
                $.fn.cycle.custom(curr, next, opts, after);
            }
            var roll = (opts.nextSlide + 1) == els.length;
            opts.nextSlide = roll ? 0 : opts.nextSlide + 1;
            opts.currSlide = roll ? els.length - 1 : opts.nextSlide - 1;
        } else {
            queueNext(opts);
        }

        function queueNext(opts) {
            if (opts.timeout)
                p.cycleTimeout = setTimeout(function () { go(els, opts, 0, !opts.rev); }, opts.timeout);
        }
    }

    // advance slide forward or back
    function advance(els, opts, val) {
        var p = els[0].parentNode, timeout = p.cycleTimeout;
        if (timeout) {
            clearTimeout(timeout);
            p.cycleTimeout = 0;
        }
        opts.nextSlide = opts.currSlide + val;
        if (opts.nextSlide < 0) {
            opts.nextSlide = els.length - 1;
        }
        else if (opts.nextSlide >= els.length) {
            opts.nextSlide = 0;
        }
        go(els, opts, 1, val >= 0);
        return false;
    }

    $.fn.cycle.custom = function (curr, next, opts, cb) {
        var $l = $(curr), $n = $(next);
        $n.css(opts.cssBefore);
        var fn = function () { $n.animate(opts.animIn, opts.speedIn, opts.easeIn, cb); };
        $l.animate(opts.animOut, opts.speedOut, opts.easeOut, function () {
            $l.css(opts.cssAfter);
            if (!opts.sync)
                fn();
        });
        if (opts.sync)
            fn();
    };

    $.fn.cycle.transitions = {
        fade: function ($cont, $slides, opts) {
            $slides.not(':eq(0)').hide();
            opts.cssBefore = { opacity: 0, display: 'block' };
            opts.cssAfter = { display: 'none' };
            opts.animOut = { opacity: 0 };
            opts.animIn = { opacity: 1 };
        },
        fadeout: function ($cont, $slides, opts) {
            opts.before.push(function (curr, next, opts, fwd) {
                $(curr).css('zIndex', opts.slideCount + (fwd === true ? 1 : 0));
                $(next).css('zIndex', opts.slideCount + (fwd === true ? 0 : 1));
            });
            $slides.not(':eq(0)').hide();
            opts.cssBefore = { opacity: 1, display: 'block', zIndex: 1 };
            opts.cssAfter = { display: 'none', zIndex: 0 };
            opts.animOut = { opacity: 0 };
            opts.animIn = { opacity: 1 };
        }
    };

    $.fn.cycle.ver = function () { return ver; };

    // @see: http://malsup.com/jquery/cycle/lite/
    $.fn.cycle.defaults = {
        animIn: {},
        animOut: {},
        fx: 'fade',
        after: null,
        before: null,
        cssBefore: {},
        cssAfter: {},
        delay: 0,
        fit: 0,
        height: 'auto',
        metaAttr: 'cycle',
        next: null,
        pause: false,
        prev: null,
        speed: 1000,
        slideExpr: null,
        sync: true,
        timeout: 4000
    };

})(jQuery); 
```

我的html代码：

```
 <li class="slideshow">

<img src="/Content/Images/Image1" width="470" height="470" alt="ProductName1" />

<img src="/Content/Images/Image2" width="470" height="470" alt="ProductName2" />

<img src="/Content/Images/Image3" width="470" height="470" alt="ProductName3" />

                </li> 
```

我在 html 中的 javascript 初始化代码

```
<script id="scriptInit" type="text/javascript">
    $(document).ready(function () {
$('.slideshow').cycle({
            fx: 'fade', // choose your transition type, ex: fade, scrollUp, shuffle, etc...
            after: onAfter
        });
    });
    </script> 
```

上面的代码工作正常..

我需要对其进行更改，以便只有类幻灯片放映中的那些元素（在本例中为“img”）才应该启用幻灯片放映，并且具有“启用幻灯片放映”的类。

因此，我的 html 代码将变为：

```
<li class="slideshow">
    <span> My non slideshow text goes here</span>               

<img src="/Content/Images/Image1" width="470" height="470" alt="ProductName1" class="slideshow-enabled"/>

<img src="/Content/Images/Image2" width="470" height="470" alt="ProductName2" class="slideshow-enabled"/>

<img src="/Content/Images/Image3" width="470" height="470" alt="ProductName3" class="slideshow-enabled"/>

                </li> 
```

希望我能够解释我需要什么，如果有任何疑问，请询问。

谢谢

阿纳布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:20:35.830

这一行说有一个设置，您可以在其中设置选择器来选择什么

```
var $slides = options.slideExpr ? $(options.slideExpr, this) : $cont.children(); 
```

所以在选项中

```
$('.slideshow').cycle({
    fx: 'fade', // choose your transition type, ex: fade, scrollUp, shuffle, etc...
    after: onAfter,
    slideExpr : "img.slideshow-enabled"
}); 
```

# java - 关于如何在 Java 中解决 Rush Hour Puzzle 的指南，使用 A* 获得最少的移动次数。需要有关如何开始和要遵循的步骤的帮助

> ID：12061499
> 
> 赞同：2
> 
> 时间：2012-08-21T19:13:13.097
> 
> 标签：java, graph, a-star

首先，我已经阅读了可以在 stackoverflow 或其他互联网搜索中找到的所有线程。我确实了解了不同的方面，但这并不是我所需要的。

我需要解决大小不超过 8 X 8 块的高峰时间拼图。

正如我在标题中所说，我想使用 A*，作为我将要使用的启发式方法：阻挡红色汽车（需要取出的那辆）路径的汽车数量应该减少或保持不变。

我已阅读高峰时段的 BFS 解决方案。

我不知道如何开始或更好地说，要遵循哪些步骤。

如果有人需要任何解释，这里是任务的链接：

[http://www.cs.princeton.edu/courses/archive/fall04/cos402/assignments/rushhour/index.html](http://www.cs.princeton.edu/courses/archive/fall04/cos402/assignments/rushhour/index.html)

到目前为止，从我读到的内容（尤其是从 polygenelubricants 的回答中）我需要生成一个阶段图，包括初始阶段和“成功”阶段，并使用 A* 算法确定从初始到最终的最小路径？

我应该创建一个回溯函数来生成所有可能的（有效）移动吗？

正如我之前所说，我需要帮助来概述我需要采取的步骤，而不是在实施方面遇到问题。

编辑：我是否需要生成所有可能的移动，以便将它们转换为图形节点，这不是很耗时吗？我需要在 10 秒内解决一个 8X8 难题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:56:52.697

A* 是一种用于搜索[图](http://en.wikipedia.org/wiki/Graph_%28mathematics%29)的算法。图由[节点](http://en.wikipedia.org/wiki/Node_%28graph_theory%29)和边组成。因此，我们需要将您的问题表示为图表。

我们可以将拼图的每个可能状态称为一个节点。两个节点之间有一条边，如果它们可以通过一次移动彼此到达。

现在我们需要一个开始节点和一个结束节点。 **哪些拼图状态将代表我们的开始节点和结束节点？**

最后，A* 还需要一件事：一个[可接受的距离启发式](http://en.wikipedia.org/wiki/Admissible_heuristic)- 猜测拼图需要多少步才能完成。这个猜测的唯一限制是它*必须*小于实际的移动次数，所以实际上我们正在寻找的是一个最小界限。将启发式设置为 0 将满足这一点，但如果我们能提出更好的最小界限，算法将运行得更快。 **你能想出一个谜题完成移动次数的最低限度吗？**

# spring - 规范中的弹簧数据子查询

> ID：12061502
> 
> 赞同：20
> 
> 时间：2012-08-21T19:13:34.240
> 
> 标签：spring, subquery, criteria-api, spring-data

[Spring-data](http://www.springsource.org/spring-data/jpa)是 Oliver Gierke 的优秀库，有一个称为[规范](http://static.springsource.org/spring-data/data-jpa/docs/current/api/org/springframework/data/jpa/domain/Specification.html)(org.springframework.data.jpa.domain.Specification) 的东西。有了它，您可以生成多个谓词来缩小搜索条件。

有人可以提供在规范中使用子查询的示例吗？

我有一个对象图，搜索条件可能会变得很复杂。我想使用规范来帮助缩小搜索范围，但我需要使用子查询来查看对象图中的某些子元素（集合内）是否满足我的搜索需求。

提前致谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-28T10:37:57.690

```
String projectName = "project1";
List<Employee> result = employeeRepository.findAll(
    new Specification<Employee>() {
        @Override
        public Predicate toPredicate(Root<Employee> root, CriteriaQuery<?> query, CriteriaBuilder cb) {
            Subquery<Employee> sq = query.subquery(Employee.class);
            Root<Project> project = sq.from(Project.class);
            Join<Project, Employee> sqEmp = project.join("employees");
            sq.select(sqEmp).where(cb.equal(project.get("name"),
                    cb.parameter(String.class, projectName)));
            return cb.in(root).value(sq);
        }
    }
); 
```

等效于以下 jpql 查询：

```
SELECT e FROM Employee e WHERE e IN (
    SELECT emp FROM Project p JOIN p.employees emp WHERE p.name = :projectName
) 
```

# ruby-on-rails-3 - 如何在 ActionMailer 中禁用特定电子邮件？

> ID：12061504
> 
> 赞同：0
> 
> 时间：2012-08-21T19:13:50.850
> 
> 标签：ruby-on-rails-3, actionmailer

我只想禁用某些电子邮件。我有一个邮件程序类，它有一个用于发送电子邮件的方法。我无法摆脱该方法本身，因为它是从多个地方调用的。我想更改方法，使对该方法的调用实际上不会发送任何电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:15:47.627

您可以将其放入您的方法中，或者在您不想在生产中发送的电子邮件上调用交付时使用它

```
 unless Rails.env.production? 
```

编辑

如果您只想检查呼叫的类别

```
 if self.is_a?(class) 
```

# javascript - 向 Sammy 注册点击事件

> ID：12061509
> 
> 赞同：0
> 
> 时间：2012-08-21T19:14:15.827
> 
> 标签：javascript, events, click, handlebars.js, sammy.js

我正在尝试使用我的 Sammy 驱动的应用程序创建以下行为：

![在此处输入图像描述](../Images/f955dd79ea0fe1bb47fbf54d0d565829.png)

该图像描述了一个画廊视图，是通过[Sammy](http://sammyjs.org/)和模板框架[Handlebars](http://handlebarsjs.com)创建的。每个元素都有以下模板：

```
<article class="gallery-item">
    <img src="{{url_thumb}}" alt="{{title}}" id="image-{{id}}" />
</article> 
```

左边的酒红色方块 (2) 应该在左边显示它的粉红色双胞胎的大版本。

如何连接事件，以便当我单击具有类“gallery-item”的元素时，右侧的图像会发生变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:20:33.700

如果您按照这篇博文中介绍的方式构建应用程序：[mvc med sammy og handlebars](http://open.bekk.no/mvc-med-sammy-og-handlebars/)。您将创建一个画廊项目视图和一个画廊视图。图库视图将包含图库项目视图和左侧图像的预览视图。然后它需要在 jQuery 的帮助下附加一个点击事件监听器。

像这样的东西：

```
var that = this;
$(".gallery-item").on(function(e) {
   that.previewView.showImage("send in the url to the image that where clicked on, 
   or a model containing the url or whatever you like!:)");
} 
```

有关 jQuery:on 工作原理的更多信息，请查看[jQuery API:ON](http://api.jquery.com/on/)

# opengl - 使用 -1 缩放 Y 时的 OpenGL 面剔除

> ID：12061515
> 
> 赞同：0
> 
> 时间：2012-08-21T19:14:38.010
> 
> 标签：opengl

我有一个简单的楼梯（数组中的顶点）：

```
[]
[][] 
```

我想把这个楼梯倒过来：

```
[][]
[] 
```

为了得到这个形状，我将每个 Y 坐标与 相乘`-1`，所以基本上`-1`在`y-axis`. 这很好用，但不适用于面部剔除，当启用面部剔除时，会显示背面。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:32:24.973

您可以反转正面的一侧（[glFrontFace](http://www.opengl.org/sdk/docs/man/xhtml/glFrontFace.xml)），或者您可以禁用背面剔除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:32:07.567

绘制这些倒置对象时，可以翻转面剔除的方向。

只需`glFrontFace()`用 GL_CW 或 GL_CCW 调用，并在再次绘制普通对象时将其放回。

# c# - 带有 Singleton Logger 类的 DI/IoC

> ID：12061527
> 
> 赞同：3
> 
> 时间：2012-08-21T19:15:05.657
> 
> 标签：c#, .net, design-patterns, singleton

我们正在为我们的应用程序的日志记录任务（.NET 3.5）使用内部简单的 Logger 类。

记录器代码很旧，设计类似于：

```
public class Logger : ILogger
{
     private ILogger instance;

     private static ILogger Instance
     { 
         // Initialized on first use.
         get { return instance; }
     }

     public static void Debug(string msg)
     {
           instance.Debug(msg);
     }

     public static void Error(string msg)
     {
           ....
     }
} 
```

实例本身在第一次使用时被初始化（懒惰地）。

根据其严格的“书本”实现，这不是一个 Singleton，但尽管如此，从所有调用代码对此类的访问都是***静态访问***。

出于测试目的和其他架构原因，我希望能够用其他东西替换内部*实例（注入它）。*

我怎样才能轻松实现这一目标？我们目前没有使用任何 IoC 容器，但我不想将设置器暴露给 Instance 属性，因为这会破坏整个单例式设计。

关于如何为此提出解决方案的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:23:12.250

考虑使用[Fakes Framework](http://msdn.microsoft.com/en-us/library/hh549175.aspx)进行测试。您可以使用类似这样的方法来存根对静态方法的调用

`ShimLogger.Instance = () => new LoggerMock();`

在 .net 3.5 的情况下，您可以使用[Moles 框架](http://research.microsoft.com/en-us/projects/moles/)来存根静态方法调用。配置代码将类似于：

`MLogger.Instance = () => new LoggerMock();`

它需要将静态方法`Instance`公开，但在此配置之后，每次调用静态方法都会返回您的模拟实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:22:49.833

确实，二传手听起来不是一个好的选择。

相反，我会考虑两种可能的方法。一、显式配置方法：

```
public class Logger : ILogger {

  public void ConfigureLogger( ILogger logger ) {
     this.instance = logger;
  }

} 
```

这种方法的一个优点是意图很明确，而且您必须以显式方式调用此方法。

另一种选择是允许在配置中传递一种类型的记录器：

```
<appSettings>
    <add key="loggerType" value="The.Type.From, Some.Assembly" />
</appSettings> 
```

然后，在您的`Logger`类中重写初始化例程，以便如果存在配置参数，您更喜欢配置中提供的类型而不是默认类型。

这种方法的一个优点是您可以使用配置更改重新配置客户端，而无需更改代码。

无论如何，IoC 容器不会咬人。介绍一个，因为它会在长期内得到回报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:38:10.683

另一个想法是`internal`为您的属性创建一个设置器`Instance`并使用[InternalsVisibleTo](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)属性使内部设置器对您的测试程序集可见。请注意，如果包含您的记录器的程序集是强命名的，那么您必须`PublicKey`在`InternalsVisibleTo`属性中指定 。显然，如果您的记录器位于自己的程序集或大多数开发/日志记录未发生的某种基础设施程序集中，这将是最有帮助的（在不让其他开发人员意外或故意将 Instance 设置为其他东西的意义上） .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T19:31:37.090

我会使用 Logger 修改代码。不要通过 Logger.Instance 访问记录器，而是将所需的记录器实例传递到对象中。然后在您的工厂和/或组合根中，您将 Logger.Instance 作为生产代码中记录器的源传递，并且在您的单元测试中使用模拟记录器很容易。

```
public class Foo
{
  private readonly ILogger logger;

  public Foo(ILogger logger)
  {
    if (logger == null)
      throw new ArgumentNullException("logger");
    this.logger = logger;
  }

  public void Func()
  {
    try
    {
      // do something
    }
    catch (Exception ex)
    {
      // call the provided logger dependency
      this.logger.WriteError(ex);

      // not the static singleton property
      Logger.Instance.WriteError(ex);
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T19:21:53.617

我不会滚动你自己的。我使用企业库来满足我几乎所有的日志记录需求。它适用于桌面和 asp.net 项目。Asp.net 可能会有点问题，因为您必须处理服务器上的安全问题，但我已经做到了。

[http://entlib.codeplex.com/](http://entlib.codeplex.com/)

人们也喜欢 Log4Net，但我从未使用过它，所以我无法评论它。

# php - 从完整 URL 中提取第一个 URL 段

> ID：12061528
> 
> 赞同：7
> 
> 时间：2012-08-21T19:15:11.177
> 
> 标签：php, regex, slug

如何从完整的 URL 中提取第一个 URL 段？应清理第一个 URL 段以`-`用空格替换`。`

 `**完整网址**

```
http://www.domain.com/River-Island/River-Island-T-Shirt-with-Triangle-Girl-Print/Prod/pgeproduct.aspx?iid=2516020 
```

**期望的输出**

```
River Island 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T19:18:16.947

您可以使用：

```
$url = 'http://www.domain.com/River-Island/River-Island-T-Shirt-with-Triangle-Girl-Print/Prod/pgeproduct.aspx?iid=2516020';
$parsed = parse_url($url);
$path = $parsed['path'];
$path_parts = explode('/', $path);
$desired_output = $path_parts[1]; // 1, because the string begins with slash (/) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:19:11.050

```
$page = explode('/', substr($_SERVER['REQUEST_URI'], 1), 2);
echo str_replace("-"," ", $page[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T19:18:22.117

试试这个：`/http:\/\/[^\/]+\/([^\/]+)/i`

见这里：[http ://regex101.com/r/lB9jN7](http://regex101.com/r/lB9jN7)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T19:19:18.793

```
$path = parse_url($url, PHP_URL_PATH);
$first = substr($path, 0, strpos($path, '/')); 
```

检查这三个功能的文档。也许你必须从路径的开头去掉一个斜线，我不确定。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-22T11:52:04.190

你有没有使用 CodeIgniter ...???那么它可能是

```
$this->uri->segment(segment number of url); 
```

以及它需要在Controller中加载uri库`

# c# - 有没有办法调用具有更好性能结果的 C# 脚本文件？

> ID：12061530
> 
> 赞同：0
> 
> 时间：2012-08-21T19:15:34.927
> 
> 标签：c#, visual-studio-2010, ironpython

我目前正在使用此方法从 Visual Studio 2010 中的 C# 应用程序调用 C# 脚本文件 ( [http://www.csscript.net )：](http://www.csscript.net)

```
var script = new AsmHelper(CSScript.Load(
             @"C:\temp\CSScriptTest\CSScriptTest\cstest.cs"));
script.Invoke("*.LoopTest"); 
```

但我注意到这方面的性能大约是使用此方法调用类似 IronPython 脚本所需的两倍：

```
var ironPythonRuntime = Python.CreateRuntime();
dynamic loadPython = ironPythonRuntime.UseFile(
                     @"C:\temp\IronPythonTest\IronPythonTest\pytest.py");
loadPython.LoopTest(); 
```

有没有一种方法可以调用性能更好的 C# 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:09:00.773

这是另一种选择；我实际上并不知道 CS-Script 的性能如何，所以我无法比较它们，但是您可以使用[CompilerParameters.GenerateInMemory](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.compilerparameters.generateinmemory.aspx "CompilerParameters.GenerateInMemory")和[CodeDomProvider.CompileAssemblyFromFile 方法](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.compileassemblyfromfile.aspx "CodeDomProvider.CompileAssemblyFromFile 方法")，然后调用它。GenerateInMemory 就像它所说的那样，在进程的内存中生成程序集，而不是将其写入磁盘。您也可以使用 CompileAssemblyFromSource 并使用流式阅读器来读取 .cs 文件中的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:36:13.320

这是我从 Oleg Shilo（CS-Script 的创建者）那里得到的答案：

> 实际上，性能是使用 CS-Script 的强项。
> 
> 在性能方面，重要的是要记住 IronPython 和 CS-Script 执行模型之间的区别。CS-Script（以及 Boo）依赖于 CLR，它在执行之前编译脚本，IronPython 依赖于 DLR，它在执行期间解释脚本。
> 
> 因此，使用 CS-Script 脚本总是会产生一些与脚本编译相关的启动开销。然而，在脚本加载（编译）后，CS-Script 展示了托管代码的最佳性能。这是因为在运行时脚本不再是脚本而是普通程序集，性能与非脚本场景相同。因此，如果您的测试中有多个 LoopTest 调用，那么性能“图片”将非常不同：加载和第一个 LoopTest 调用将相对较慢，但 LoopTest 的后续调用将闪电般快速。
> 
> 为了帮助解决启动开销，CS-Script 使用缓存机制（默认启用），如果自上次执行后脚本未更改，则不会再次重新编译，但会重用先前的编译结果。
> 
> 因此，为了获得最佳性能：
> 
> ![截屏](../Images/db8067d4468d93454fe3338740c95da0.png)
> 
> *   尝试（如果可能）避免在执行之间修改脚本。
> *   通过 CSScript.CacheEnabled = true 使用缓存（默认启用）
> *   调用的调度风格 (Invoke(string methodName)) 对于单个调用是可以的，但对于多个调用，使用 GetStaticMethod 甚至更好的 AlignToInterface。与所有其他约定相比，Invoke 依赖于反射，因此性能优势非常显着。这是 performance.cs 示例脚本的分析结果

# css - 字体大小在 IE9 中根本不起作用

> ID：12061532
> 
> 赞同：0
> 
> 时间：2012-08-21T19:15:42.283
> 
> 标签：css, internet-explorer, font-size

使用 CSS 更改字体大小在 IE9 中不起作用。字体会改变，但字体大小不会。它在 chrome 和 firefox 中完美运行。我尝试使用 em,pt 而不是 px。我试过字体大小：40px。我什么都试过了。

字体大小不会改变。

```
<!DOCTYPE html>
<html lang="en">
<head>
<title>test</title>
<meta charset="utf-8">
<style type="text/css">
body{
    font: 40px Arial;
}
</style>
</head>
<body>
    font size test
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:28:37.623

我认为您的 CSS 已被您的浏览器设置覆盖。检查浏览器的可访问性设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:20:30.317

```
body {
    font-size: 40px;
    font-family: Arial;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:27:21.717

如果您使用发布的确切文档对此进行了测试，那么显然您的 IE 9 已损坏。重新安装它。否则，请发布完整的示例代码或演示问题的 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T19:38:59.453

1.  确保您在 IE9 中的缩放设置为 100%。为此，在浏览器中按`CTRL`+ 。`0`

2.  制作另一个 CSS 定义不会覆盖您的 font-size 语句。您甚至可以通过使用 !important 属性来强制字体大小，如下所示：

    ```
    body {
      font-size: 40px !important;
    } 
    ```

3.  确保在刷新页面时清除缓存。要对页面进行无缓存重新加载，请在浏览器中点击`CTRL`+ 。`F5`这将刷新缓存并完全重新加载页面。

至于您发布的代码，我按原样复制/粘贴它，它在 IE9 中按预期工作。如果仍然无法正常工作，您可能需要在计算机上重新安装 IE。

# ios - IBAction 和普通程序调用 iOS 的区别

> ID：12061534
> 
> 赞同：0
> 
> 时间：2012-08-21T19:16:04.973
> 
> 标签：ios

我已经观察到几次点击 UIButton 和调用

```
 -(IBAction) action:(id)sender     Method1
  {
    do something....
   } 
```

与以编程方式调用它 Method2

```
 -(void) action
   {
    do something....
   } 
```

当动作被这样调用时，方法 1 是正确的。Method2显示了不同的错误效果。

在这两个例程中，做某事是完全相同的。

为什么会有这样的差异？以及我可以做些什么来以编程方式模仿 IBAction？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:31:28.687

`IBAction`只是 Interface Builder 的一个标签，它能够定位您打算连接到 UI 元素操作的操作。事实上，它是 的同义词`void`：

#define IBAction 无效

除此之外，您还有 2 个不同的方法签名。一个接受争论，一个不接受。在接受参数的方法中，`sender`将是一个指向触发该操作的 UI 元素的指针——您将其定义为`IBOutlet`最有可能的。

如果您有一个方法将作为 UI 交互（例如触摸）的结果而被调用，那么方法签名需要允许 sender 参数。

在触发动作的对象不一定包含在方法调用中的某些情况下，无参数方法签名很有用。但是你必须保持一致；如果该方法需要一个参数，那么您必须确保 SDK 知道要发送一个参数。这可以像在选择器名称中包含或排除冒号 (:) 一样简单。手势识别器就是一个很好的例子。您可以为手势识别器定义一个动作，如下所示：

```
-(void)handleTap
{
    ...
} 
```

然后设置手势识别器以使用此方法：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap)]; 
```

请注意`@selector(handleTap)`. 另一方面，如果你定义了这样的方法：

```
-(void)handleTap:(UITapGestureRegognizer *)tap
{
    ...
} 
```

您必须像这样创建手势识别器：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)]; 
```

看到不同？这样一来，当手势识别器调用您的方法时，它会将自己作为参数传递给您的方法。

老实说，我不确定这种细微差别是否适用于您可以指定选择器的所有地方。我认为这是特定于上下文的。例如，NSTimer 的选择器必须能够在其参数中接受指向 NSTimer 对象的指针。文档通常会根据具体情况明确说明这一点。

# c - 内联函数是否应该在调用之前定义？

> ID：12061536
> 
> 赞同：6
> 
> 时间：2012-08-21T19:16:12.613
> 
> 标签：c, optimization, inline

C 语言允许在不向前看的情况下一次性读取源文件；在任何时候，编译器只需要考虑出现在文件当前位置*之前的声明、原型、宏定义等。*

这是否意味着要内联函数调用，编译器可能需要在调用之前定义函数？例如：

```
int foo(void);
int bar(void) { return foo(); }
inline int foo(void) { return 42; } 
```

`foo`如果将内联定义移到 的定义前面，调用是否更有可能被内联`bar`？

我是否应该在我的代码中安排内联定义，以便它们出现在最好内联的调用之前？或者我可以假设任何足够先进的优化编译器都可以进行内联，即使它出现在调用之后（这似乎是 gcc 的情况），也能够找到定义？

**编辑：**我注意到在带有该`/Ob1`选项的 Pelles C 中确实需要定义可见，然后才能内联调用。Compiler 还提供了一个`/Ob2`选项来消除此限制（并且还允许编译器在没有 inline 说明符的情况下内联函数，类似于 gcc 所做的），但文档指出使用第二个选项可能需要更多内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:15:54.020

在实践中应该没有任何区别。因为，它的编译器选择内联函数或不内联函数，即使它被明确告知`inline`. 编译器也可以内联一个函数，即使它是使用`inline`关键字定义的。

首先，我在`gcc 4.6.3`没有任何优化的情况下运行了您的代码：

```
$ gcc -fdump-ipa-inline test.c 
```

从生成的程序集中`foo`，`bar`即使`foo`是内联的，也不是内联的。当我更改将定义`inline foo`放在顶部时，编译器仍然没有内联两者。

接下来我做了同样的事情`-O3`：

```
$ gcc -fdump-ipa-inline -O3 test.c 
```

现在这两个函数都是内联的。即使只有一个有`inline`声明。

基本上编译器可以在它认为合适的时候内联一个函数。

# ios - 如何将用户直接发送到 App Store 的评论页面？

> ID：12061538
> 
> 赞同：11
> 
> 时间：2012-08-21T19:16:16.610
> 
> 标签：ios, ios6, app-store, review

到目前为止（iOS < 6.0），我使用以下 URL 和代码将用户直接发送到我的应用程序的评论页面（给它评分 5 星并发表友好评论:)）：

```
NSString *stringUrl = @"http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=XXXXXXXX&pageNumber=0&sortOrdering=1&type=Purple+Software&mt=8";
NSURL *url = [NSURL URLWithString:stringUrl];
[[UIApplication sharedApplication] openURL:url]; 
```

当我在装有 iOS 6（以及 iOS 6 的新应用商店）的设备上运行我的应用程序时，此代码不再起作用。应用商店打开，但随后我收到“无法连接到应用商店”的警报。

有人知道如何在 iOS 6 上将用户直接发送到 Appstore 的评论页面吗？（请注意，我知道如何通过这不是我想要的方式向用户发送我的应用程序的描述！）

谢谢 ！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T08:13:23.210

像这样使用网址

> `https://userpub.itunes.apple.com/WebObjects/MZUserPublishing.woa/wa/addUserReview?type=Purple+Software&id=561892747&mt=8&o=i`

我在 Apple 收据电子邮件中的“写评论”链接上找到了它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T22:36:09.223

我猜苹果几乎解决了这个问题，因为它可以再次使用相同的地址直接进入评论页面。用户在被引导到评论页面后仍然需要在 iOS6 上点击评论按钮。

# java - Java - 使用 java Desktop 在 Internet Explorer 中打开 URL

> ID：12061541
> 
> 赞同：4
> 
> 时间：2012-08-21T19:16:31.667
> 
> 标签：java, swing, internet-explorer, desktop-application, runtime.exec

我想知道是否有一种方法可以使用 java 桌面实用程序专门在 Internet Explorer 中打开网页。我公司同时使用firefox和IE，但是需要打开的url，只能在IE中兼容。因此，无论默认浏览器是什么，我的 java 类都需要在 IE 中打开该 url。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T19:19:51.623

当然：

```
Runtime.getRuntime().exec("iexplore.exe www.stackoverflow.com"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-09T06:11:16.710

这可能会迟到回答这个问题，但我仍然会尝试添加我的 2 美分。提出的问题是“*如何使用 java Desktop 在 Internet Explorer 中打开 URL* ”前面的答案中提到的以下代码行是正确的，但只有在路径设置为它时才会在 IE 中打开。如果没有设置路径，它将不起作用并抛出错误 `Runtime.getRuntime().exec("iexplore.exe www.stackoverflow.com");`

强制 Java 在 IE 中打开 Webpae 下面是对我有用的代码行，即使我的默认浏览器是 Edge 并且 IE 的路径是“未”设置的。

```
Runtime.getRuntime().exec("C:\\Program Files\\Internet Explorer\\iexplore.exe https://carelink.minimed.eu/"); 
```

谢谢

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-04-10T13:13:57.863

尝试这个：

```
//e.g. myURL=www.google.ch
public void openBrowser(String myURL) {

    //open default OS browser
    URI myURI;
    try {
        myURI = new URI(myURL);
        Desktop my = Desktop.getDesktop();
        if (!Desktop.isDesktopSupported()) {
            System.out.println("[WARNING] NOT SUPPORTED");
        }
        my.browse(myURI);
    } catch (URISyntaxException | IOException e1) {
        e1.printStackTrace();
    }
} 
```

# ruby-on-rails - Hartl Rails 教程测试在第 9.2.3 节末尾失败

> ID：12061544
> 
> 赞同：0
> 
> 时间：2012-08-21T19:16:43.487
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

在[本节](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#sec-friendly_forwarding)中，我应该限制用户只能编辑和更新他自己的个人资料。到目前为止，我所有的测试都通过了，除了这个：

```
 describe "as wrong user" do
       let(:user) { FactoryGirl.create(:user) }
       let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
       before { sign_in user }

       describe "visiting Users#edit page" do
         before { visit edit_user_path(wrong_user) }
         it { should_not have_selector('title', text: full_title('Edit user')) }
       end

       describe "submitting a PUT request to the Users#update action" do
         before { put user_path(wrong_user) }
         specify { response.should redirect_to(root_path) }
       end
     end 
```

特别是最后一部分，重定向，这是我在运行测试时得到的：

```
 1) Authentication authorization as wrong user submitting a PUT request to the Users#update action 
     Failure/Error: specify { response.should redirect_to(root_path) }
       Expected response to be a redirect to <http://www.example.com/> but was a redirect to <http://www.example.com/signin>
     # ./spec/requests/authentication_spec.rb:86:in `block (5 levels) in <top (required)>' 
```

但是在网站中，当我尝试做同样的事情时它工作得很好，用户被重定向到应用程序的 root_path。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:27:27.570

[我从你的 Github repo](https://github.com/8vius/sample_app)中检查了你的代码，你对**app/helpers/sessions_helper.rb**的修改似乎是你测试失败的原因。将[您的文件](https://github.com/8vius/sample_app/blob/master/app/helpers/sessions_helper.rb)与[教程的文件](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/app/helpers/sessions_helper.rb)进行比较。您在方法中使用`session`哈希而不是`cookies`哈希。我通过更改代码修复了您的错误`"submitting a PUT request to the Users#update action"`和错误：`"submitting a DELETE request to the Users#destroy action"`

**应用程序/helpers/sessions_helper.rb**

```
module SessionsHelper
  # ...

  def sign_in(user)
    # session[:remember_token] = user.remember_token
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def sign_out
    self.current_user = nil
    # session.delete(:remember_token)
    cookies.delete(:remember_token)
  end

  def current_user
    # @current_user ||= User.find_by_remember_token(session[:remember_token])
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  # ...
end 
```

在 Rails 教程的 Rails 3.0 版本中有一个练习，[您将`cookies`hash 完全替换为`session`hash](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial?version=3.0#sec%3asign_in_out_exercises)，但我记得从来没有能够正确地做到这一点，而且它[似乎不在 3.2 版本中](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#sec-updating_deleting_exercises)，所以它会似乎你`cookies`在这个文件中坚持使用哈希是最安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T23:41:25.640

清单 9.6 中的这段代码是用您的代码编写的吗？

```
# Sign in when not using Capybara as well.
cookies[:remember_token] = user.remember_token 
```

1.  Capybara 的行为类似于浏览器，因此它可以从 rails 应用程序接收一些 cookie。

2.  Capybara 可以像使用“fill_in”和“visit”操作浏览器一样测试应用程序。

3.  要在 Capybara 中发出“PUT /users/1”请求，它需要进入“/users/1/edit”，然后单击“edit”链接。但是您的 rails 应用程序不允许用户访问其他用户，这在前面的测试示例中已通过。

4.  我们不能直接在 Capybara 中发出“PUT /users/1”。相反，我们需要使用“put”。Rspec 无法从应用程序接收任何 cookie。所以我们需要像清单 9.6 那样设置 cookie。

5.  如果测试示例发出“PUT /users/1”请求，而 cookie 中没有 remember_token，它将被重定向到以未登录用户身份登录页面。但是此测试旨在将其重定向到根页面，因为登录用户直接向其他用户的资源发送放置请求。

# c - 来自 C 中控制台的用户输入

> ID：12061553
> 
> 赞同：1
> 
> 时间：2012-08-21T19:17:40.807
> 
> 标签：c, console, user-input

我是 C 编程的初学者，所以请耐心等待。我正在尝试在控制台中输入用户的文件名，并且我想打印一条有用的消息，提示用户输入他想要打开的文件名。但是当我在命令提示符下运行它时，光标首先等待输入，在我输入一些文本并按回车后，我看到了我想在输入之前打印的有用提示。这是代码片段。

```
 char filename[40];
 fputs("enter the file name: ", stdout);
 fflush(stdout); 
 fgets(filename, sizeof(filename), stdin); 
```

我看不出我哪里出了问题。如果有人能解释为什么会发生这种情况，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:06:10.847

我没有看到您粘贴的代码有任何问题，可以正常使用 gcc。它必须与未刷新标准输出有关，这可能特定于您正在使用的编译器......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:27:36.643

这对我有用`gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)`：

```
char path[100];

printf("Give a path: ");

// Max length of 99 characters; puts a null terminated string in path, thus 99 chars + null is the max
scanf("%99s", path);

printf("This is your path: %s\n", path); 
```

在 *nix 机器上，在汇编中，读取和写入：

```
read:   mov $0x03, %rax # Syscall Read
        mov $0x00, %rbx # Stdin
        mov $Buff, %rcx # Address to read to
        mov $BuffLen, %rdx  # Bytes to read
        int $0x80           # Call

write:  mov $0x04, %rax # Syscall Write
        mov $0x01, %rbx # Stdout
        mov $Buff, %rcx # Address to write from
        mov $BuffLen, %rdx  # Bytes to write
        int $0x80           # Call 
```

这是我从老师那里得到的一些 Windows 程序集：

```
.386
.MODEL FLAT

ExitProcess PROTO NEAR32 stdcall, dwExitCode:DWORD

GetStdHandle PROTO NEAR32 stdcall, nStdHandle:DWORD

ReadFile PROTO NEAR32 stdcall, hFile:DWORD, lpBuffer:NEAR32, NumberOfCharsToRead:DWORD,
     lpNumberOfBytesRead:NEAR32, lpOverlapped:NEAR32

WriteFile PROTO NEAR32 stdcall, hFile:DWORD, lpBuffer:NEAR32, NumberOfCharsToWrite:DWORD,
     lpNumberOfBytesWritten:NEAR32, lpOverlapped:NEAR32

STD_INPUT  EQU -10
STD_OUTPUT EQU -11

cr  EQU 0dh
Lf  EQU 0ah

.STACK
.DATA

InMsg   BYTE    14 dup (?)
msgLng  DWORD   $ - InMsg ;
read    DWORD   ?
written DWORD   ?
hStdIn  DWORD   ?
hStdOut DWORD   ?

.CODE
_start:
        INVOKE GetStdHandle, STD_INPUT
        mov     hStdIn, eax
        INVOKE ReadFile, hStdIn, NEAR32 PTR InMsg, msgLng, NEAR32 PTR read, 0
    INVOKE GetStdHandle, STD_OUTPUT
    mov hStdOut, eax
        INVOKE WriteFile, hStdOut, NEAR32 PTR InMsg, msgLng, NEAR32 PTR written, 0
    INVOKE ExitProcess, 0

PUBLIC  _start
END 
```

# bundle - 在 Symfony 2 之上构建一个小部件管理器（一个页面中的多个控制器）

> ID：12061555
> 
> 赞同：4
> 
> 时间：2012-08-21T19:17:47.323
> 
> 标签：bundle, symfony-2.1

**用例**
我正在 Symfony2 之上开发一个 CMF。其中一项功能将是对“小部件”的支持：最终用户可以向页面添加小“块”或“模块”。例子：

*   一个小的登录表单
*   产品清单
*   一些照片来自画廊
*   一个购物车

这个想法是大多数这些小部件将链接到正常的整页路由/控制器。

例如：用户想要在内容页面的侧边栏中列出热门产品。这些项目将链接到 ProductController 的正常 /product/{name} 路由。但在这种情况下，列表将是一个小部件。最终用户可以定义必须放置的位置，例如，必须显示多少项目。

'widgets' 的行为与常规 Symfony2 控制器相同，它有路由、动作、渲染视图等等。有一个带有包罗万象的路由的 WidgetManager 来加载小部件、配置它们并将它们呈现在正确的位置。

我对 Symfony2 没有太多经验，但我现在玩了 3 个月以上。我肯定想继续使用 Symfony2，但需要添加一些魔法来实现我的一些想法。

**问题**
支持在一个请求中呈现多个控制器（小部件）的最佳方式是什么？

**研究**
Symfony 的 TwigExtension “ActionExtension” 包含一个 “render” 方法，其中包含基本思想：

```
<div id="sidebar">
    {% render "AcmeArticleBundle:Article:recentArticles" with {'max': 3} %}
</div> 
```

（文档：[http](http://symfony.com/doc/current/book/templating.html#embedding-controllers) ://symfony.com/doc/current/book/templating.html#embedding-controllers ）

但它是相当有限的。这种方法的一些问题：

*   我无法在渲染它们之前配置“小部件”（例如：）`$myWidget->set('show_toolbar', false)`，我不想将所有选项作为控制器操作参数传递。
*   不能使用模板继承。例如，我需要这个来“注入”基本`<HEAD>`块中的资产引用（javascript/css）。

**我想要的是**

我希望下面的代码工作（这是一个简化的例子）：

```
// Serius\PageBundle\Controller\PageController.php

// executed by a catch-all route
public function indexAction($url) {
    // load CMS page, etc

    $widgets = $this->loadWidgets($page); // widgets configuration is stored in database
    // at this point, $widgets is an array of Controller *instances*
    // meaning, they are already constructed and configured

    return $this->render("SeriusPageBundle:Page:content.html.twig", array(
        'widgets' => $widgets
    ));   
} 
```

**Serius\PageBundle\Resources\views\Page\content.html.twig**

```
{% extends 'SeriusPageBundle::layout.html.twig' %}

{% block content %}
    {% for widget in widgets %}
    <div>
        {% render widget %}
        <!-- Of course, this doesn't work, I would have to create my own Twig extension -->
    </div>
    {% endfor %}
{% endblock %} 
```

小部件模板的示例：

```
{% extends '::base.html.twig' %}
{% block stylesheets %}
  My stylesheets
{% endblock %}

{% block body %}
    This is a shoppingcart widget!
{% endblock %} 
```

我怎样才能做到这一点？有人有这样的经验吗？我已经看过 Symfony CMF 项目，但它不支持这个（据我所知）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:28:58.753

我有类似的事情发生，我认为这段代码会对你有所帮助。在选择的模板中，您将获得带有块名称的变量。

```
public function render()
{       
    $modules = $this->moduleService->getModules();

    foreach($modules as $m){
        $templateName = $m->getTemplateName();

        $template = $this->twig->loadTemplate($templateName);
        $blockNames = $template->getBlockNames();

        foreach($blockNames as $b){
            if(isset($this->blocks[$b]) == false)
                $this->blocks[$b] = '';
            $this->blocks[$b] .= $template->renderBlock($b, array('a' => 'aaa', 'b' => 'bbb'));
        }

    }
    $content = $this->twig->render('Admin/index.html.twig',$this->blocks);
    return new \Symfony\Component\HttpFoundation\Response($content);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T20:40:25.613

我知道这是旧的，但如果有人正在寻找这样的东西 SonataBlockBundle 可能是你的解决方案。

[https://github.com/sonata-project/SonataBlockBundle](https://github.com/sonata-project/SonataBlockBundle)

# php - 将 PDF 嵌入到没有 SRC 属性的网站中

> ID：12061559
> 
> 赞同：0
> 
> 时间：2012-08-21T19:18:05.637
> 
> 标签：php, pdf, mime-types

目前正在研究这里更充分地解决的想法的一个分支。 [为 PDF 创建安全文件托管服务器](https://stackoverflow.com/questions/10743850/creating-a-secure-file-hosting-server-for-pdfs)

我正在开发一个安全的 PDF 托管网站，某些用户可以在其中下载我存储在 webroot 之外的某些 PDF，以防止人们访问他们不应该访问的文档。

我已经使用第一个解决方案进行了下载，但我也想实现“查看/预览”功能。我仍然没有得到我应该得到的内容标题，但我相信导致我的大部分问题的原因是我不能在 embed/object/iframe/whatever 上放置“src”属性。这就是系统的重点。

我的问题是，有没有办法将文件（而不是 url）提供给嵌入/对象？我想保留我当前的系统，我现在为了简单起见，所以越容易越好。

我看到了[在 HTML 中嵌入 PDF 的推荐方式？](https://stackoverflow.com/questions/291813/best-way-to-embed-pdf-in-html)如果我正在尝试一些不可行的东西，可能会检查 pdf.js。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:28:22.107

`PDF2SWF`- 将 PDF 转换为 SWF（1 页 = 1 SWF）。

使用其他 SWF（阅读器）通过 XML 或其他方式加载 SWF 页面。

用于`$_SESSION`存储应通过例如提供的 PDF 文档的 ID `/preview`（用于预览所有文档的相同链接）

不要提供原始 PDF、添加水印或将其设为低分辨率。否则，您的 PDF 将永远不会“安全”。

**[http://www.swftools.org/](http://www.swftools.org/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:20:20.063

我还没有机会玩 pdf.js，但它要么是那个，要么是某种 Flash 播放器。

或者你依靠浏览器来显示它有一个网页，你可以 iframe 它，但这太蹩脚了......它只适用于你的一小部分用户。

# objective-c - 带有 fmdbdatabase 错误的 xcode 数据库

> ID：12061560
> 
> 赞同：0
> 
> 时间：2012-08-21T19:18:06.523
> 
> 标签：objective-c, xcode, uitableview, fmdb

我正在尝试开发一个简单的应用程序，它显示在 sqlite3 中制作的数据库中的名称。

它返回一个错误：

> 2012-08-21 21:10:43.182 NameDatabase[1325:c07] -[UITableView _createPreparedCellForGlobalRow:withIndexPath:] 中的断言失败；/SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:6061 2012-08-21 21:10:43.184 NameDatabase[1325:c07] 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“UITableView 数据源必须从表视图：cellForRowAtIndexPath：'

我已经尝试了很多方法来解决这个问题，但我没有想法。

这是我认为导致问题的方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomerCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    NameClass *name_class = [self.name_vc objectAtIndex:[indexPath row]];
    cell.textLabel.text = name_class.name;
    //[[cell textLabel] setText:[NSString stringWithFormat:@"%@ ,@%d",name_class.name, name_class.id]];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:19:59.183

您需要分配 tableViewCell 以防 dequeueReusableCellWithIdentifier:CellIdentifier 没有为您提供非零值

```
 if (!cell) {
    cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
} 
```

# android - 内部类 MyLicenseCheckerCallback 的 noclassdeferror

> ID：12061565
> 
> 赞同：0
> 
> 时间：2012-08-21T19:18:39.383
> 
> 标签：android, android-lvl

我正在尝试做[本教程](http://www.droidforums.net/forum/android-app-developers/69899-market-license-easy-implementation-protect-your-apps.html) 但不断收到此错误：

> 08-21 14:12:49.599: E/AndroidRuntime(714): java.lang.NoClassDefFoundError: com.akiraapps.LicenseCheck$MyLicenseCheckerCallback

```
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.provider.Settings.Secure;
import android.view.View;
import android.view.Window;
import android.widget.Button;
import android.widget.TextView;

import com.google.android.vending.licensing.AESObfuscator;
import com.google.android.vending.licensing.LicenseChecker;
import com.google.android.vending.licensing.LicenseCheckerCallback;
import com.google.android.vending.licensing.Policy;
import com.google.android.vending.licensing.ServerManagedPolicy;

public class LicenseCheck extends Activity {

    private static final String BASE64_PUBLIC_KEY = "no";

    private static final byte[] SALT = new byte[] { no};

    private TextView mStatusText;
    private Button mCheckLicenseButton;

    private LicenseCheckerCallback mLicenseCheckerCallback;
    private LicenseChecker mChecker;
    // A handler on the UI thread.
    private Handler mHandler;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setContentView(R.layout.main);

        mStatusText = (TextView) findViewById(R.id.status_text);
        mCheckLicenseButton = (Button) findViewById(R.id.check_license_button);
        mCheckLicenseButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                doCheck();
            }
        });

        mHandler = new Handler();

        // Try to use more data here. ANDROID_ID is a single point of attack.
        String deviceId = Secure.getString(getContentResolver(), Secure.ANDROID_ID);

        // Library calls this when it's done.
        mLicenseCheckerCallback = new MyLicenseCheckerCallback();
        // Construct the LicenseChecker with a policy.
        mChecker = new LicenseChecker(
            this, new ServerManagedPolicy(this,
                new AESObfuscator(SALT, getPackageName(), deviceId)),
            BASE64_PUBLIC_KEY);
        doCheck();
    }

    protected Dialog onCreateDialog(int id) {
        final boolean bRetry = id == 1;
        return new AlertDialog.Builder(this)
            .setTitle(R.string.unlicensed_dialog_title)
            .setMessage(bRetry ? R.string.unlicensed_dialog_retry_body : R.string.unlicensed_dialog_body)
            .setPositiveButton(bRetry ? R.string.retry_button : R.string.buy_button, new DialogInterface.OnClickListener() {
                boolean mRetry = bRetry;
                public void onClick(DialogInterface dialog, int which) {
                    if ( mRetry ) {
                        doCheck();
                    } else {
                        Intent marketIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(
                                "http://market.android.com/details?id=" + getPackageName()));
                            startActivity(marketIntent);                        
                    }
                }
            })
            .setNegativeButton(R.string.quit_button, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    finish();
                }
            }).create();
    }

    private void doCheck() {
        mCheckLicenseButton.setEnabled(false);
        setProgressBarIndeterminateVisibility(true);
        mStatusText.setText(R.string.checking_license);
        mChecker.checkAccess(mLicenseCheckerCallback);
    }

    private void displayResult(final String result) {
        mHandler.post(new Runnable() {
            public void run() {
                mStatusText.setText(result);
                setProgressBarIndeterminateVisibility(false);
                mCheckLicenseButton.setEnabled(true);
            }
        });
    }

    private void displayDialog(final boolean showRetry) {
        mHandler.post(new Runnable() {
            public void run() {
                setProgressBarIndeterminateVisibility(false);
                showDialog(showRetry ? 1 : 0);
                mCheckLicenseButton.setEnabled(true);
            }
        });
    }    

    private class MyLicenseCheckerCallback implements LicenseCheckerCallback {
        public void allow(int policyReason) {
            System.out.println("Allow");
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            // Should allow user access.
            displayResult(getString(R.string.allow));
        }

        public void dontAllow(int policyReason) {
            System.out.println("dontAllow");
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            displayResult(getString(R.string.dont_allow));
            // Should not allow access. In most cases, the app should assume
            // the user has access unless it encounters this. If it does,
            // the app should inform the user of their unlicensed ways
            // and then either shut down the app or limit the user to a
            // restricted set of features.
            // In this example, we show a dialog that takes the user to Market.
            // If the reason for the lack of license is that the service is
            // unavailable or there is another problem, we display a
            // retry button on the dialog and a different message.
            displayDialog(policyReason == Policy.RETRY);
        }

        public void applicationError(int errorCode) {
            System.out.println("applicationError");
            if (isFinishing()) {
                // Don't update UI if Activity is finishing.
                return;
            }
            // This is a polite way of saying the developer made a mistake
            // while setting up or calling the license checker library.
            // Please examine the error code and fix the error.
            String result = String.format(getString(R.string.application_error), errorCode);
            displayResult(result);
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        mChecker.onDestroy();
    }

} 
```

我按照将 LVL 设置为库项目的教程进行操作，这些导入似乎没问题。

为什么我会收到此错误？为什么找不到内部类？如果我右键单击并说显示定义它会跳转到内部类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-29T20:47:20.627

我有同样的问题。

以下步骤解决了问题

1.  以标准库为例
2.  将 library.jar 文件从库项目复制到您的 libs 文件夹中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T02:02:21.500

所以这个[SO Answer](https://stackoverflow.com/a/2456660/530933)解决了这个问题 我创建了一个名为 libs 的文件夹，并从管理器下载的许可包中包含的库项目中复制了 library.jar 文件

我不明白的是根据[这个答案](https://stackoverflow.com/a/8001414/530933)，这应该为我完成，因为我正在使用 ADT 20.0.3

基本上它归结为一个示例，我直接从 android 下载并卡住了几个小时试图找出问题所在，这似乎这一步应该在自述文件/帮助文档中，或者我做错了什么。

如果您知道为什么这是答案以及如何做得更好，请回答并将答案更改为您的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-17T09:22:39.700

我有完全相同的例外，上述建议都不适合我。

但是，我通过确保您的 LVL 项目是一个库项目（右键单击项目 -> 属性 -> android 并勾选“是库”复选框）来让我的工作。

要将其包含在您的应用程序项目中，请删除对此的任何其他引用并应用更改。然后如果还没有导航到（右键单击应用程序项目--> 属性--> android）并在库部分单击添加并选择您的 LVL 项目。应用更改。好的和干净的项目。

希望这可以帮助某人。

# javascript - 调试器；在 Chrome 控制台中

> ID：12061566
> 
> 赞同：1
> 
> 时间：2012-08-21T19:18:41.227
> 
> 标签：javascript, google-chrome

在 Chrome 中打开一个页面，进入 JavaScript 控制台，然后输入`debugger;`. 我们立即在以下代码的第 2 行遇到了断点：

```
with ((window && window.console && window.console._commandLineAPI) || {}) {
debugger;
} 
```

任何人都可以理解这一点吗？为什么要`with`声明？为什么断点在`debugger;`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:27:51.770

你知道[调试器](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/debugger)是什么吗？

“调用任何可用的调试功能。如果没有可用的调试功能，则此语句无效。”

该代码基本上是说如果此浏览器有可用的控制台并且它具有“_commandLineAPI”功能，则启动调试器。

“ [with](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/with) ”语句基本上是一个确保没有错误的方法。实际上，他们应该只使用 if。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-21T20:09:26.750

调试 javascript Chrome 不需要“调试器”命令。Ctrl+Shift+J 打开开发者工具。在“来源”中，您可以在 html 中找到您的 js 文件或 javascript。然后点击行号在左侧打断点。断点将在执行时触发。您在命令控制台中，Chrome 将尝试执行您输入的任何命令行。

# jsf - javax.el.PropertyNotFoundException：该类没有属性

> ID：12061568
> 
> 赞同：5
> 
> 时间：2012-08-21T19:18:54.440
> 
> 标签：jsf, jsf-2, primefaces

我无法呈现肯定在数据库中的数据。我所有的 DAO 方法都工作并经过测试。也许这并不重要，但无论如何：我正在使用 Primefaces、Java ee 6、glassfish 3.1。

这是错误：`/edit.xhtml @59,45 value="#{b.orderNum}": The class 'com.boatmanagement.domain.BoatOrder' does not have the property 'orderNum'.`

我的域类。

```
@Entity
@Table(name="BOAT_ORDR_TB")
public class BoatOrder implements Serializable
{
    @Id
    @GeneratedValue
    @Column(name="ORDER_PK")
    private int orderId;

    @Column(name="ORDER_NUM")
    private String orderNum;

    @Temporal(TemporalType.DATE) 
    @Column(name="ORDER_DATE")
    private Date orderDate;

    public int getBoatOrderId() {
        return orderId;
    }
    public void setBoatOrderId(int orderId) {
        this.orderId = orderId;
    }
    public String getBoatOrderNum() {
        return orderNum;
    }
    public void setBoatOrderNum(String orderNum) {
        this.orderNum = orderNum;
    }
    public Date getBoatOrderDate() {
        return orderDate;
    }
    public void setBoatOrderDate(Date orderDate) {
        this.orderDate = orderDate;
    }
} 
```

这是我的 JSF 页面的一部分。

```
 <h:form class="displayTable">
            <p:dataTable id="boatTable" autoUpdate="true"
                var="b" value="#{filterbean.btOrderlist}">

                <p:column headerText="res. num" width="50">
                    <h:outputText value="#{b.orderNum}" />
                </p:column>

                <p:column headerText="Date" width="50">
                    <h:outputText value="#{b.orderDate}" />
                </p:column>

                <p:column headerText="Yacht name" width="100">
                    <h:outputText value="" />
                </p:column>

            </p:dataTable>
        </h:form>
    </ui:define> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-21T19:23:13.343

属性的存在基本上由公共 getter 方法的存在确定，该方法根据 Javabeans 规范命名。因此， 的属性`orderNum`基本上需要一个名为的公共 getter `getOrderNum()`（对于输入组件，还需要一个名为 的公共 setter `setOrderNum()`）。

你没有它们。你给了他们不同的名字。修复类中的方法名，或者 EL 中的属性名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-04T19:55:24.260

顺便说一句，知道这是 8 岁，我在处理布尔/布尔值时发现了一个问题。

假设我有一个对象成员“活动”，Eclipse 创建一个作为 isActive() 而不是 getActive() 的 getter。JBOSS/Tomcat 似乎不认识这个吸气剂。我没有在 Glassfish 中尝试过这个，但我发布它以防其他人发现这个问题......

# ruby-on-rails-3 - Rails 3 Sunspot 全文搜索用法

> ID：12061573
> 
> 赞同：1
> 
> 时间：2012-08-21T19:19:03.427
> 
> 标签：ruby-on-rails-3, solr, sunspot

因此，我在我的应用程序中实现了 sunspot_rails gem，以利用强大的 Solr 搜索引擎。我最近查看了 Ryan关于全文搜索的[railscast ，我注意到他在搜索查询中使用了其他参数，例如](http://railscasts.com/episodes/278-search-with-sunspot)**“-”**来表示不应包含在全文搜索中的内容。

直到现在我才听说过这个，我想知道是否有一个用户友好的使用指南，我和我的用户都可以参考，以最大限度地发挥我的搜索功能。

我认为理想情况下，我想为我的搜索表单制作一个类似于 Github 的 markdown 备忘单的精简版本，以便用户可以快速参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:19:34.777

Sunspot 使用 Solr 的[DisMax Query Parser](http://wiki.apache.org/solr/DisMaxQParserPlugin#Overview)，它具有非常简单的查询语法。在大多数情况下，它旨在灵活地解析用户创建的查询。

DisMax 可识别三个特殊字符：`+`、`-`和`"`。从文档中：

> [DisMax] 旨在支持用户提供的原始输入字符串，无需特殊转义。`'+'`和`'-'`字符被视为后续术语的“强制”和“禁止”修饰符。包含在平衡引号字符中的文本`'"'`被视为短语，任何包含奇数个引号字符的查询都被评估为好像根本没有引号字符。

还有一些其他“幕后”选项可以调整匹配文档的相关性。例如，“最小匹配”指定必须存在的“可选”字段（即，不以`-`or为前缀）的数量或比例。`+`以及增强特定领域中的术语匹配或彼此靠近的术语匹配的选项，等等。

在 Sunspot 中，这些都暴露在方法的`options`参数中`fulltext`，或者作为提供给该方法的块中的方法。

# objective-c - 是否有必要在 iOS 设备上“优化”类型？

> ID：12061576
> 
> 赞同：2
> 
> 时间：2012-08-21T19:19:09.770
> 
> 标签：objective-c, ios, arm

在这里，我只是编写了一些处理整数值 -24/+24 的代码，并且我让我的方法返回一个 int ......我心想——在这种情况下我真的应该使用 short 吗？我知道在某个东西的内存为 48k 的时代，这可能很重要——但在当今的现代世界，这真的很重要吗？

即使我知道我的人数会很少，也可以“开心”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T19:25:01.970

所有 ARM CPU 都有 32 位整数寄存器和至少 32 位宽的 L1 总线，因此使用 a`short`绝对不会带来任何优势 [1]，并且在某些情况下可能会损害性能。

将变量保留为 an`int`并确保无论您在何处运行代码，您都将获得最佳寄存器宽度。

[1] 此规则的例外情况是使用 NEON 单元时 - 在这种情况下，16 位操作比 32 位操作提供更多的并行性。

# javascript - javascript（但不是jQuery）在x轴上固定位置但不是y？

> ID：12061581
> 
> 赞同：1
> 
> 时间：2012-08-21T19:19:25.843
> 
> 标签：javascript, scroll

我到处寻找，到目前为止还没有找到一个非 jQuery js 来处理这个问题。我想避免只为这一项简单的任务使用库。

我想将三个导航 div（“#header”、“#tabs”和“#footer”）修复到左侧视口（或者，使用“位置：固定；左侧：固定到 div“#helper”的 x 位置： 0; top: 0;") -- 但不修复 y。它们不能垂直固定。

我创建了一个工作 js，它强制 div 基于滚动重新定位，但它在真实页面中并不平滑（动态和图形元素太多） - 我希望它能够流畅地动画，或者模仿固定左和似乎根本没有重新定位。

任何人都可以指点或快速脚本，或查看和修改我制作的脚本？我注意到人们倾向于问为什么不使用明显的解决方案而不是回答问题......我很乐意回答，但更愿意帮助解决实际问题。

这是一个有问题的jsFiddle：http: [//jsfiddle.net/BMZvt/6/](http://jsfiddle.net/BMZvt/6/)

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:33:29.547

平滑动画示例：

```
var box = document.getElementById('box');

var moveTo = function(obj, target) {
    // start position
    // you should obtain it from obj.style
    var cpos = {
        x: 0,
        y: 0
    }        
    var iv = setInterval(function(){
        cpos.x += (target.x - cpos.x) * 0.3; // 0.3 is speed
        cpos.y += (target.y - cpos.y) * 0.3; // 0.3 is speed
        obj.style.left = Math.floor(cpos.x) + 'px';
        obj.style.top = Math.floor(cpos.y) + 'px';
        var dist = Math.abs(cpos.y - target.y); // distance (x+y) from destination
        dist += Math.abs(cpos.x - target.x); // < 1 = object reached the destination

        if(dist < 1) { // here we are checking is box get to the destination 
           clearInterval(iv);
        }
    }, 30); // this is also the speed
}

box.onclick = function(){
    moveTo(box, {x: 90, y: 75}); // fire this function to move box to specified point
} 
```

*   **演示**：http: [//jsfiddle.net/Qwqf6/5/](http://jsfiddle.net/Qwqf6/5/)

您的脚本是您的工作，但这是解决动画问题的快速入门

你也可以用速度做一些花哨的东西，例如`sin(x)`用来设置速度

*   **演示#2** [http://jsfiddle.net/Qwqf6/6/](http://jsfiddle.net/Qwqf6/6/)（非常流畅）

* * *

*   **完整的脚本在这里** [https://gist.github.com/3419179](https://gist.github.com/3419179)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:40:06.147

这是为查看这篇文章的人准备的——我最终选择了我最初放在[jsFiddle](http://jsfiddle.net/BMZvt/6/)中的解决方案，该解决方案使用简单的 javascript 来模仿固定的 x。

第一个答案中的 javascript 很重，而且有问题，第二个答案听起来不错，但在实践中不起作用。因此，我推荐来自 jsFiddle（如下）的 javascript 作为没有 javascript 库的固定 x 和流体 y 的最佳答案。它并不完美，延迟最小，但这是我找到的最佳答案。

```
function fixLeft() {

            function getScrollX() {
                var x = 0, y = 0;
                if( typeof( window.pageYOffset ) == 'number' ) {
                    x = window.pageXOffset;
                } else if( document.body && ( document.body.scrollLeft) ) {
                    x = document.body.scrollLeft;
                } else if( document.documentElement && ( document.documentElement.scrollLeft) ) {
                    x = document.documentElement.scrollLeft;
                }
                return [x];
            }

            var x = getScrollX();
            var x = x[0];

        // have to get and add horizontal scroll position px
        document.getElementById('header').style.left = x + "px";
        document.getElementById('tabs').style.left = x + "px";
        document.getElementById('footer').style.left = x + "px";
    }

    window.onscroll = fixLeft; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:09:08.373

我认为没有直接的方法可以做到这一点......

但这里有一个方法。

首先，您需要能够在 window.onscroll 事件发生时检测滚动的方向。您可以通过在滚动事件发生时将当前页面偏移量与新获取的页面偏移量进行比较来做到这一点。（http://stackoverflow.com/questions/1222915/can-one-use-window-onscroll-method-to-include-detection-of-scroll-direction）

现在假设您知道滚动的方向，您想根据滚动的方向更改 div 的样式。

让**FixAtX**成为您想要修复 div 的 x 坐标的值。令**OriginalY**为 div 的 y 坐标。同样，无论何时发生滚动，无论方向如何，您都希望记住页面偏移量 X 和 Y。我们称它们为**OldX**和**OldY**

如果垂直滚动：

*   将 div 样式的位置值设置为绝对值。
*   将 div 样式的最高值设置为**OriginalY**
*   将 div 样式的左值设置为**OldX + FixAtX**

如果水平滚动：

*   设置要固定的 div 样式的位置值。
*   将 div 样式的顶部值设置为**OriginalY - OldY** （<- 这可能因浏览器计算 pageOffset 值的方式而异，）
*   将 div 样式的 Left 值设置为**FixAtX**

我认为这应该可以...由于您只是使用浏览器的渲染进行定位，因此应该非常流畅！

希望我正确理解了这个问题。

# android - 安卓快速报警

> ID：12061583
> 
> 赞同：0
> 
> 时间：2012-08-21T19:19:33.980
> 
> 标签：android, alarm

我对快速报警有点问题。

如果我将闹钟时间设置在正常的“快速闹钟”之前，闹钟可以正常工作。我如何设置闹钟，例如晚上 8:00，晚上 7:55 的快速闹钟，这种工作方式不同，不会打开

```
private void showQuickAlarmDialog() {
    View layout = mFactory.inflate(R.layout.quick_alarm_dialog, null);
    final TextView text1 = (TextView) layout
            .findViewById(android.R.id.text1);
    final SeekBar slider = (SeekBar) layout
            .findViewById(android.R.id.input);
    int last_snooze = mPrefs.getInt(PREF_LAST_QUICK_ALARM, 0);
    slider.setMax(59);
    slider.setProgress(last_snooze);
    text1.setText(AlarmClock.this.getString(R.string.minutes,
            String.valueOf(last_snooze + 1)));
    slider.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
        public void onProgressChanged(SeekBar seek, int value,
                boolean fromTouch) {
            text1.setText(AlarmClock.this.getString(R.string.minutes,
                    String.valueOf(value + 1)));
        }

        public void onStartTrackingTouch(SeekBar seek) {
        }

        public void onStopTrackingTouch(SeekBar seek) {
        }
    });

    AlertDialog d = new AlertDialog.Builder(this)
            .setTitle(R.string.quick_alarm)
            .setView(layout)
            .setNegativeButton(android.R.string.cancel, null)
            .setPositiveButton(android.R.string.ok,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int which) {
                            int snooze_min = slider.getProgress() + 1;
                            long snoozeTarget = System.currentTimeMillis()+ 1000 * 60 * snooze_min;
                            Alarms.calculateNextAlert(AlarmClock.this).getAlert();
                        //if (nextAlarm > snoozeTarget) {
                                 //alarm will fire before snooze will...
                        //}
                            //else {
                                Alarms.saveSnoozeAlert(
                                        AlarmClock.this,0,snoozeTarget,AlarmClock.this.getString(R.string.quick_alarm));

                                Alarms.setNextAlert(AlarmClock.this);
                                Toast.makeText(
                                        AlarmClock.this,
                                        getString(
                                                R.string.alarm_alert_snooze_set,
                                                snooze_min),
                                        Toast.LENGTH_LONG).show();
                                updateSnoozeVisibility();
                                mPrefs.edit()
                                        .putInt(PREF_LAST_QUICK_ALARM,
                                                snooze_min - 1).commit();
                        //  }
                        }
                    }).show();
}

private void updateSnoozeVisibility() {
    long next_snooze = mPrefs.getLong(Alarms.PREF_SNOOZE_TIME, 0);
    View v = (View) findViewById(R.id.snooze_message);
    if (next_snooze != 0) {
        TextView tv = (TextView) v.findViewById(R.id.snooze_message_text);
        Calendar c = new GregorianCalendar();
        c.setTimeInMillis(next_snooze);
        String snooze_time = Alarms.formatTime(AlarmClock.this, c);
        tv.setText(getString(R.string.snooze_message_text, snooze_time));

        v.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                v.setVisibility(View.GONE);
                Alarms.disableSnoozeAlert(AlarmClock.this);
                Toast.makeText(AlarmClock.this,
                        getString(R.string.snooze_dismissed),
                        Toast.LENGTH_LONG).show();
                Alarms.setNextAlert(AlarmClock.this);
            }
        });
        v.setVisibility(View.VISIBLE);
    } else {
        v.setVisibility(View.GONE);
    }
}

private void updateEmptyVisibility() {
    View v = findViewById(R.id.alarms_list_empty);
    if (v != null)
        v.setVisibility(mAlarmsList.getAdapter().getCount() < 1 ? View.VISIBLE
                : View.GONE);
} 
```

一句话。如果稍后设置正常警报，我将无法打开快速警报。

# c# - 将 SuiteTalk 应用程序连接到 NetSuite 上的 RESTlet

> ID：12061584
> 
> 赞同：0
> 
> 时间：2012-08-21T19:19:38.290
> 
> 标签：c#, netsuite

我有一个用 C# 开发的 SuiteTalk 应用程序，用于处理订单导入。我需要能够将应用程序连接到 NetSuite，以便在用户界面发生故障时手动启动导入。我不熟悉用 C# 编写侦听器应用程序，所以我正在寻找一些关于如何让它工作的指针。

-编辑- 添加一个限制：我无法使用网络服务器来完成任何这些。

***我*认为它是如何工作的：我** 设想 NetSuite 中的按钮按下会向 SuiteTalk 应用程序发出请求，该应用程序反过来会启动相关任务。

**我的问题：**

*   这个逻辑听起来对吗？
*   我应该从哪里开始？
*   你会推荐哪些资源来让某人快速上手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:53:35.803

大概您的 c# 应用程序在您自己的系统上运行并使用 SOAP 接口与 Netsuite 对话。

如果您的应用程序不在公共 Internet 上侦听来自 Netsuite 的请求，没有合理的方法可以让 Netsuite 直接触发您的外部应用程序。我相信您可以编写套件脚本来访问远程 Web 服务，但这实际上需要一个 Web 服务器。

另一种可能性是在 Netsuite 中创建某种数据，您的应用程序可以轮询以查看它是否应该执行。我不确定执行此操作的最佳方法。在我的脑海中，我认为您可以创建自定义记录类型并让按钮创建自定义记录。然后，您的 C# 应用程序可以检查该类型的记录是否存在，如果存在，则执行并删除该记录。

# excel - excel - 单元格格式 - 比较值

> ID：12061585
> 
> 赞同：0
> 
> 时间：2012-08-21T19:19:40.847
> 
> 标签：excel

我在 Excel 中有以下要求，但现在确定我需要创建的公式：

如果出现以下情况，需要以不同的颜色突出显示行：

*   第 1 列的值与同一行中第 4 列的值不匹配
*   第 2 列的值与同一行中第 5 列的值不匹配
*   第 3 列的值与同一行中第 6 列的值不匹配

这些值不是数字而是字符。

谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:37:04.390

正如@Gimp 提到的，这是一个条件格式问题（如果你不知道它叫什么，现在你知道了:)）。下面是一个如何完成您想要的示例，但我绝对建议您阅读它，因为它非常方便：

![在此处输入图像描述](../Images/cc6f28b66e2c68cc08719dc4658af740.png)

基本上，您正在设置迷你`IF`语句来检查某些条件。另外，请注意该`Stop if True`选项 - 这意味着如果您达到某个标准并且不想检查任何其他标准，它将停止格式化并保留该颜色。希望这可以帮助您入门！

# c# - 实体框架 - 具有继承属性的实体

> ID：12061587
> 
> 赞同：1
> 
> 时间：2012-08-21T19:19:44.777
> 
> 标签：c#, .net, entity-framework

我在这里搜索了线程，发现了多个类似的帖子，但没有解决方案

假设我的数据库中有一个用户表，我已经映射到一个简单的用户实体

```
public class User{
    public int UserId {get;set;}
    public string Username {get;set;}
} 
```

我想创建一个新类，它将封装一个 ExternalUser，它具有与 User 相同的字段，但添加了更多字段。我的 ExternalUser 的字段将从数据库中的视图中填充，该视图从 User 中提取字段以及 ExternalUser 所需的其他字段

```
public class ExternalUser : User{
    public int SomeExternalId{get;set;};
    public string SomeExternalProp{get;set;};
} 
```

但无论我如何定义这个新对象的映射，我都会收到以下错误：

属性“UserId”不是“ExternalUser”类型的声明属性。使用 Ignore 方法或 NotMappedAttribute 数据注释验证该属性是否已从模型中显式排除。确保它是有效的原始属性。

有人可以分享映射这个的正确方法。像这样的东西让我讨厌 EF，简单地继承 POCO 不应该导致它爆炸，尤其是当所有字段都存在于我所指向的基础视图中时。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-09T07:43:06.947

我不确定您的用例，但如果您可以选择制作base ，那么您可以使用`User`Table [per Concrete Type](https://weblogs.asp.net/manavi/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete-type-tpc-and-choosing-strategy-guidelines)方法。`abstract``class`

创建模型映射时，您需要创建`User`一个`abstract`类并调用：`MapInheritedProperties()``ExternalUser`

```
public abstract class User
{
    public int UserId { get; set; }
    public string Username { get; set; }
}

[Table("ExternalUser")]
public class ExternalUser : User
{
    public int SomeExternalId { get; set; }
    public string SomeExternalProp { get; set; }
} 
```

*请注意，我使用`[Table]`属性将实体名称映射到表名称（您也可以在`OnModelCreating`方法中执行此操作，但我发现使用`[Table]`属性更简洁）：*

这是`OnModelCreating`方法：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    base.OnModelCreating(modelBuilder);

    Database.SetInitializer<ApplicationDbContext>(new CreateDatabaseIfNotExists<ApplicationDbContext>());
    modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

    // I believe the inherited properties are mapped by default 
    modelBuilder.Entity<ExternalUser>().Map(m => 
    {
        m.MapInheritedProperties();
    });
} 
```

*请注意，我正在删除`PluralizingTableNameConvention`，因为我不想要复数表名。*

# asp.net-mvc-2 - mvc2下拉列表动态参数

> ID：12061608
> 
> 赞同：2
> 
> 时间：2012-08-21T19:20:49.590
> 
> 标签：asp.net-mvc-2

```
 <%   string disabled="new {disabled='disabled'}"; %>

  <%= Html.DropDownList("clientId", someObject, disabled)%> 
```

在上面的代码中，我希望将禁用的文本替换为我将该字符串设置为的任何值。当我检查页面上的 HTML 源代码时，我看到 new`{disabled='disabled'}`已作为新项目添加到下拉列表中，而不是属性。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:06:00.130

helper的第三个参数`DropDownList`必须是一个包含 HTML 属性的对象或 type 的对象`IDictionary<string, object>`。这是正确的解决方案：

```
<% var disabled = new { disabled = "disabled" }; %> 
```

# entity-framework - 如何在通过 MsDeploy 发布时迁移 Entity Framework DB

> ID：12061615
> 
> 赞同：9
> 
> 时间：2012-08-21T19:21:20.133
> 
> 标签：entity-framework, deployment, msdeploy, entity-framework-migrations

对于我当前的项目，我更愿意在发布时将我的数据库更新为正确的版本，而不是首先通过 App_Start 运行。

似乎支持通过与 Entity Framework (5.0 rc2) 一起提供的命令行工具“migrate.exe”进行手动升级。但我找不到任何关于其他人如何将此工具与 msdeploy 结合以在发布时而不是首次运行时升级数据库的任何信息。

我发现以下页面解释了如何使用 migrate.exe 工具： [http ://blog.overridethis.com/blog/post/2012/03/13/Automating-EF-43x-Data-Migrations-in-your -构建.aspx](http://blog.overridethis.com/blog/post/2012/03/13/Automating-EF-43x-Data-Migrations-in-your-Build.aspx)

但这迫使我以某种方式“知道”连接字符串信息。

我的最佳解决方案是：

1.  在 setParameters.xml 文件中配置连接字符串以在发布时进行替换
2.  在发布代码库 migrate.exe 后发布时使用正确的连接字符串调用

看来我搜索的是“实体框架 MSDeploy 提供程序”（参见：http: [//blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-beta-1-已发布.aspx](http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-beta-1-released.aspx)）但似乎他们前一段时间放弃了该选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-08T12:05:08.947

你有两个选择：

1.  在发布配置文件中配置 Visual Studio[数据库选项](https://msdn.microsoft.com/en-us/library/dd394698#efcfmigrations)；或者
2.  [在打包/发布 SQL](https://msdn.microsoft.com/en-us/library/dd576376)选项卡上配置您的项目属性。

我还没有使用它们中的任何一个，但我正在研究，因为我会有完全相同的场景。

# database - 在 Oracle 中查找修改后的表

> ID：12061616
> 
> 赞同：1
> 
> 时间：2012-08-21T19:21:26.947
> 
> 标签：database, oracle, oracle11g

所以我正在尝试修复数据加载，但是当我在我的 web 应用程序中执行特定操作时，我需要知道哪些表正在被更改。有没有办法检查数据库查询，即使它们来自我的应用程序，或者至少有一种方法可以找出正在修改哪些表，以便我可以手动跟踪更改？这适用于 Oracle 11g。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:31:45.500

我建议你试试这个：

```
EXEC dbms_output.enable(1000000);
DECLARE
  lc_seq_value VARCHAR(50);
  CURSOR table_list(p_field_like VARCHAR2) IS
    SELECT table_name  
      FROM all_tables
      WHERE table_name LIKE UPPER(p_field_like);
BEGIN
  FOR i IN table_list('TEST%') LOOP
    EXECUTE IMMEDIATE 'SELECT TO_CHAR(SCN_TO_TIMESTAMP(MAX(ORA_ROWSCN))) FROM '||
      i.table_name INTO lc_seq_value;
    dbms_output.put_line(lc_seq_value);
  END LOOP;
END;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T05:25:10.103

在 Oracle 11g 中，您可以使用 ASH（活动会话历史记录）来查找在给定时间哪个 SQL 处于活动状态。您确实需要调整或诊断包的许可证才能合法使用它。有关小演示，请参阅[Oracle 活动会话历史记录 (ASH)](http://psoug.org/reference/ash.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:58:35.800

最简单的方法 - 对你的数据库进行备份并在 Web 应用操作之后进行比较，否则只需添加一种审计触发器。当然，您可能会弄乱闪回查询。您也可以启用具有所需详细化级别的跟踪，以便查看您的 sql。

例如

```
SELECT * FROM employees
 AS OF TIMESTAMP
  TO_TIMESTAMP('2004-04-04 09:30:00', 'YYYY-MM-DD HH:MI:SS') 
```

# java - SWT 中的表的简单示例

> ID：12061619
> 
> 赞同：1
> 
> 时间：2012-08-21T19:21:48.683
> 
> 标签：java, swt

我的上一个项目创建了一个 Singleton 类并使用 Swing 来创建我的 TableModel，然后将填充的表添加到我的基本对话框类中。

然而，我的新项目必须使用 SWT 而不是 Swing。恐怕我对 SWT 知之甚少。

我希望能够创建一个表类（SelectionsTable.java）。在表类中，我希望能够创建一个具有 4 个列并从数组列表填充行值的简单表。

稍后我会担心如何将表格传递给我的 BaseDialog 类。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:24:53.513

[这里](http://www.eclipse.org/swt/snippets/#table)有直接来自 eclipse 的非常好的代码片段。你最感兴趣的应该是这个：[创建一个表（列、标题、行）](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet38.java)。它展示了如何创建一个包含多个列、标题和行的表格。

由于您似乎对 java 很熟悉，因此您应该能够弄清楚如何将其用于您的目的。

如果你想有一个适当`TableViewer`的`ContentProvider`，看看这个[Vogella](http://www.vogella.com/articles/EclipseJFaceTable/article.html)的优秀教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:27:52.507

ContentProvider 就像一个模型，为 TableViewer 提供输入。（表模型）

LabelProvider 是一个提供您将在表格单元格中显示的图像和文本的类。（类似于 Swing 中的 getValueAt()）

1.  在对话框中创建 TableViwer
2.  为 tableviewer 创建 TableViewerColumn（每列）并在 TableViewerColumn 上设置 LabelProvider()。LabelProvider.getImage() 将为内容提供程序在此列上提供的每个行对象调用 LabelProvider.getText()。

3.  设置 viewer.setContentProvider()

**它是这样工作的：** TableViewer 首先从它的内容提供者那里获得输入。假设您的内容提供商正在返回 RowObjects 列表。对于每个 RowObject，每个 TableViewerColumn 上的标签提供程序将被调用以在该特定单元格位置显示图像和文本（如 Swing 中的 colIndex、RowIndex）。

# android - 如何将所选文本转换为超链接？

> ID：12061622
> 
> 赞同：-1
> 
> 时间：2012-08-21T19:22:06.297
> 
> 标签：android, android-edittext, spannable

我想将所选文本从编辑文本转换为超链接。基本上我知道如何在超链接中转换文本，但不能在编辑文本中进行。

我试过**Linkify**，但没有用。

任何帮助，将不胜感激..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:49:29.147

这是我解决问题的方法。

文本 = 编辑文本

```
 int start = text.getSelectionStart();

            int end = text.getSelectionEnd();

            SpannableStringBuilder spb = new SpannableStringBuilder(text
                    .getText().toString());

            String hyper = text.getText().toString().substring(start, end);

            text.setText(hyper);

            text.setAutoLinkMask(Linkify.ALL); // Linkify.WEB_URLS

            text.setText(spb); 
```

# sql - SQL 选择前 1 个唯一

> ID：12061624
> 
> 赞同：0
> 
> 时间：2012-08-21T19:22:12.177
> 
> 标签：sql, sql-server

我有一个 SQL 查询，希望你能帮我弄清楚。

这应该很容易，我的脑袋今天不生产了。

这是表格的示例

**Tbl产品**

```
ID | SKU  | Price
-----------------
1  | ABC  | 10.00 
2  | DEF  | 5.00 
3  | OSKD | 6.00
4  | 123  | 6.00
5  | LPD  | 12.00
6  | TRE  | 3.00 
```

**TblCategories**

```
ID | Name  | Active |Sort 
-------------------------
1  | Home  | 1      |4 
2  | Garden| 1      |55 
3  | Misc  | 1      |2
4  | Test  | 0      |1 
```

**TblAlternateCategoryName**

```
ID | CategoryID | AltName
-------------------------
1  | 1          | House 
2  | 1          | Crib
3  | 3          | Anything 
```

**TblProductX类别**

```
ID | ProductID | CategoryID | SortOrder
---------------------------------------
1  | 1         | 1          | 1
2  | 1         | 2          | 1
4  | 2         | 2          | 4
5  | 2         | 3          | 6
6  | 3         | 3          | 6  
7  | 4         | 4          | 0 
8  | 5         | 2          | 1 
```

需要这个结果

```
 SKU  | Price | Category | AlternateCategory
 -------------------------------------------
 ABC  | 10.00 | Home     | House 
 DEF  | 5.00  | Misc     | Anything
 OSKD | 6.00  | Misc     | Anything
 LPD  | 12.00 | Garden   | Null 
```

规则

1.  每个产品返回一个类别。（最低的排序）
2.  产品必须在活动类别中。
3.  如果可用但不是必需的，请使用 AlternateCategory。
4.  排序有时可能是重复的。

提前致谢

这是原始的 SQL 语句

```
 DECLARE @feedID int =4
    SELECT Pro_Chl.id, 
       Pro_Chl.sku, 
       Pro_Chl.productname, 
       (SELECT top 1 tbl_componentsettinglist.componentsubtype 
            FROM   tbl_offers 
               INNER JOIN tbl_componentsettinglist 
                       ON tbl_offers.id = tbl_componentsettinglist.componentid 
            WHERE  ( tbl_componentsettinglist.componentsubtype = N'Free Shipping' ) 
               AND ( tbl_componentsettinglist.componenttype = N'Offer' ) 
               AND ( tbl_offers.startdate <= { fn NOW() } ) 
               AND ( tbl_offers.enddate > { fn NOW() } ) 
               AND ( tbl_offers.enabled = 1 ) 
               AND ( Pro_Chl.id = tbl_componentsettinglist.setting1 ) 
            ORDER  BY tbl_offers.[order]) AS FreeShipping, 
       TblCategories.name              AS CategoryName, 
       TblAlternateCategoryName.value     AS FeedCat 
    FROM   TblProducts AS Pro_Chl 
       INNER JOIN (
                            SELECT productid, 
                                      categoryid, 
                                      sortorder 
                               FROM   TblProductXCategories main 
                               WHERE  sortorder = (
                                                       SELECT top 1 Min(srt.sortorder) 
                                                       FROM   TblProductXCategories srt 
                                                              INNER JOIN TblCategories 
                                                                      ON srt.categoryid = 
                                                                             TblCategories.id 
                                                       WHERE  srt.productid = main.productid 
                                                            AND srt.categoryid = main.categoryid 
                                                              AND TblCategories.hidden = 0
                                               )

                    ) 
                     AS PxC

               ON ( Pro_Chl.id = PxC.productid 
                     OR Pro_Chl.parentid = PxC.productid ) 
       INNER JOIN TblCategories 
               ON PxC.categoryid = TblCategories.id 
       LEFT OUTER JOIN TblAlternateCategoryName 
                    ON PxC.categoryid = TblAlternateCategoryName.categoryid AND TblAlternateCategoryName.feedid = @feedID  
    WHERE  (
                     ( Pro_Chl.parentid = '' ) 
                     AND ( Pro_Chl.id NOT IN (SELECT parentid 
                                            FROM   TblProducts AS pc 
                                            WHERE  ( customproperties LIKE '%upc%' )) ) 

                     AND ( Pro_Chl.status = 1 ) 
                     AND ( Pro_Chl.manufacturerid IS NOT NULL ) 
                     AND ( Pro_Chl.manufacturerid <> '' ) 
                     AND ( Pro_Chl.manufacturerid <> '- No Manufacturer -' ) 
                     AND ( Pro_Chl.id NOT IN (SELECT productid 
                                            FROM   TblProductschoicecombinations 
                                            WHERE  available = 0) ) 
                     AND Pro_Chl.manufacturerid NOT IN ( 
                     'f46c9a25-8172-49a8-991a-a8219663453b' ) 
            ) 
            OR 
            (
                     ( Pro_Chl.parentid <> '' ) 
             AND ( Pro_Chl.customproperties LIKE '%upc%' ) 
             AND ( Pro_Chl.parentid IN (SELECT id 
                                            FROM   TblProducts AS cp 
                                            WHERE  ( status = 1 ) 
                                               AND ( parentid = '' )) ) 

             AND ( Pro_Chl.status = 1 ) 
             AND ( Pro_Chl.manufacturerid IS NOT NULL ) 
             AND ( Pro_Chl.manufacturerid <> '' ) 
             AND ( Pro_Chl.manufacturerid <> '- No Manufacturer -' ) 
             AND ( Pro_Chl.id NOT IN (SELECT productid 
                                            FROM   TblProductschoicecombinations 
                                            WHERE  available = 0) ) 
             AND Pro_Chl.manufacturerid NOT IN ( 
                     'f46c9a25-8172-49a8-991a-a8219663453b' 
                                               ) 
              ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:09:30.860

这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!3/01458/13)。此查询选择具有 min(TblCategory.Sort) 的类别。如果您需要使用 min(TblProductXCategories.SortOrder) 选择类别，只需将OVER 语句中**的按**列顺序替换为 TblProductXCategories.SortOrder。它适用于重复的排序顺序

```
with t as 
(select TblProductXCategories.*,TblCategories.Name CatName,
 row_number() over (partition by ProductID order by TblCategories.Sort) rownum 
  from TblProductXCategories
   join TblCategories on  TblProductXCategories.CategoryId = TblCategories.id 
         and TblCategories.Active=1 
 )
select TblProducts.SKU,TblProducts.Price,t.CatName,

(select top 1 AltName from TblAlternateCategoryName 
   where TblAlternateCategoryName.CategoryId=t.CategoryId order by Id )
from t 
left join TblProducts on t.productid=TblProducts.id
where rownum=1 
```

或没有 WITH 的等价物。[SQLFiddle](http://sqlfiddle.com/#!3/01458/17)：

```
select TblProducts.SKU,TblProducts.Price,t.CatName,
(select top 1 AltName 
        from TblAlternateCategoryName 
        where TblAlternateCategoryName.CategoryId=t.CategoryId 
        order by Id ) AltCat

from

(select TblProductXCategories.*,
        TblCategories.Name CatName,
        row_number() 
         over (partition by ProductID order by TblCategories.Sort) rownum 
 from TblProductXCategories
 join TblCategories  on  TblProductXCategories.CategoryId = TblCategories.id 
       and TblCategories.Active=1 
) t

left join TblProducts on t.productid=TblProducts.id
where rownum=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:49:57.570

Based on your sample data you will get two results for the `Alternate Category` since the `Home` category has two alternates, so the final results in 5 rows instead of the two you asked for. But the below query should give you the results you want:

```
select x1.sku, x1.price, c.name, ac.altname
from
(
  select x.sku, p.price, x.sort
  from 
  (
    select p.sku, min(c.sort) sort
    from products p
    left join  ProductXCategories pxc
      on p.id = pxc.productid
    left join Categories c
      on pxc.categoryid = c.id
    group by p.sku
  ) x
  inner join products p
    on x.sku = p.sku
) x1
inner join categories c
  on x1.sort = c.sort
left join AlternateCategoryName ac
  on c.id = ac.categoryid
where c.active = 1 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!3/8a714/28)

Edit: if you want the Alternate Categories to be combined in one column:

```
select distinct x1.sku,
  x1.price,
  c.name,
  STUFF((SELECT ',' + ac.altname
          FROM AlternateCategoryName ac
          WHERE
            c.id = ac.categoryid
          FOR XML PATH('') 
        ),1,1,'') altname
from
(
  select x.sku,
    p.price,
    x.sort
  from 
  (
    select p.sku,
      min(c.sort) sort
    from products p
    left join  ProductXCategories pxc
      on p.id = pxc.productid
    left join Categories c
      on pxc.categoryid = c.id
    group by p.sku
  ) x
  inner join products p
    on x.sku = p.sku
) x1
inner join categories c
  on x1.sort = c.sort
left join AlternateCategoryName ac
  on c.id = ac.categoryid
where c.active = 1 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!3/8a714/34)

Edit #2: you stated that you only want one alternate categor., You need to decide the criteria of which alt name you want but the following will select the `max(altname)`:

```
select x1.sku,
  x1.price,
  c.name,
  ac.altname
from
(
  select x.sku,
    p.price,
    x.sort
  from 
  (
    select p.sku,
      min(c.sort) sort
    from products p
    left join  ProductXCategories pxc
      on p.id = pxc.productid
    left join Categories c
      on pxc.categoryid = c.id
    group by p.sku
  ) x
  inner join products p
    on x.sku = p.sku
) x1
left join categories c
  on x1.sort = c.sort
left join
(
  select categoryid, max(altname) altname
  from AlternateCategoryName
  group by categoryid
) ac
  on c.id = ac.categoryid
where c.active = 1 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!3/8a714/36)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:37:37.170

以下查询忽略了替代类别（您说它不是必需的）。并且，它假定类别中的排序值没有重复：

```
select SKU, price, c.name
from (select P.SKU, p.price, 
             MIN(p.sort) as minsort
      from tblProducts p join
           tblProductXCategories pxc
           on p.id = pxc.productid join
           tblCategory c
           on pxc.categoryid = c.categoryid and
              active = 1
      group by P.SKU, p.price
     ) p join
     tblCategories c
     on p.minsort = c.sort 
```

它将所有内容连接在一起，计算最小排序，然后连接回类别信息。

如果您在排序中有重复项，则可以通过以下方式仅选择其中一项来解决问题：

```
select SKU, price, c.name
from (select P.SKU, p.price, 
             MIN(p.sort) as minsort
      from tblProducts p join
           tblProductXCategories pxc
           on p.id = pxc.productid join
           tblCategory c
           on pxc.categoryid = c.categoryid and
              active = 1
      group by P.SKU, p.price
     ) p join
     (select c.*,
             row_number() over (partition by sort order by newid()) as seqnum
      from tblCategories c
     ) c
     on p.minsort = c.sort and
        c.seqnum = 1 
```

这会输入一个随机序列号，然后选择第一个。当有关系时，它应该从大约相等的选项中进行选择。

# ios - MKMapView 自己缩小

> ID：12061625
> 
> 赞同：3
> 
> 时间：2012-08-21T19:22:30.283
> 
> 标签：ios, mkmapview, mapkit, mkcoordinateregion, mkcoordinatespan

这是我的一个小方法，它获取位置管理器的当前位置并将地图聚焦在其上方一点点，以便为我添加到地图顶部的其他一些子视图腾出空间。如果跨度的纬度/经度增量太大（超过 1.0），则每次设置区域时，跨度都会越来越大，直到地图一直缩小，即使没有实际接触地图。我认为这与重用地图视图的跨度有关，但我不知道到底发生了什么。

```
- (void)setRegion {
    CLLocationCoordinate2D coord = locationManager.location.coordinate;

    MKCoordinateSpan span = mapView.region.span;

    coord.latitude += 0.002 * (span.latitudeDelta / 0.012523);

    MKCoordinateRegion region = MKCoordinateRegionMake(coord, span);
    [mapViewGlobal setRegion:region animated:animated];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:25:15.417

来自 Apple 的文档“如果您想在不更改缩放级别的情况下更改中心坐标，请改用 setCenterCoordinate:animated:。” [MKMapView](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/occ/instm/MKMapView/setRegion%3aanimated%3a "MKMapView")

```
- (void)setCenterCoordinate:(CLLocationCoordinate2D)coordinate animated:(BOOL)animated 
```

MKMapView 将选择一个新区域，该区域非常适合重新定义的缩放级别，同时仍显示您的整个目标区域，并且每次向北移动时，跨度都会发生变化，事情就会失控。

此外，您计算纬度变化幅度的方法有点奇怪。除了在可以做到这一点时进行倍数和除法之外，它只能在一定的纬度（它们远离赤道）和一定的缩放级别上工作。您最好计算出地图需要滚动多少像素（大概是子视图高度的一半），然后使用此函数计算出需要将地图居中的位置。

```
- (CLLocationCoordinate2D)convertPoint:(CGPoint)point toCoordinateFromView:(UIView *)view 
```

另一种方法是将子视图放在 MKMapView 之外，但这会影响您的美观。

# wxpython - wxPython：如何使 TextCtrl 不填满整个面板？

> ID：12061626
> 
> 赞同：1
> 
> 时间：2012-08-21T19:22:30.027
> 
> 标签：wxpython, panel, textctrl

我有一个包含按钮的面板以及另一个本身包含 textCtrl 的面板。我有一个专门用于 textctrl 的面板，因为我试图在 textCtrl 周围设置自定义边框颜色。不幸的是，我无法让 textCtrl 不填充整个面板。我怀疑它与 SetSizerAndFit 有关，但我不确定。是否可以在 textCtrl 周围有一个自定义的彩色边框？这是代码：

```
class MainWindow(wx.Frame):
    def __init__(self,parent,id,title):

        wx.Frame.__init__(self,parent,wx.ID_ANY,title,size=(800,600))

    self.panel=wx.Panel(self,wx.ID_ANY,style=wx.BORDER_SIMPLE)
    self.panelText=wx.Panel(self.panel,wx.ID_ANY,
        size=(450,40),style=wx.BORDER_SIMPLE)

    self.panel.SetBackgroundColour("white")
    self.panelText.SetBackgroundColour("#27bbdc")

    size=self.panelText.GetSize()

    self.sizerControls=wx.BoxSizer(wx.HORIZONTAL)
    self.sizerMain=wx.BoxSizer(wx.VERTICAL)
    #self.sizerText=wx.BoxSizer(wx.HORIZONTAL)

    #-------------Objects------------
    self.text=wx.TextCtrl(self.panelText,-1, style=wx.TE_READONLY|wx.NO_BORDER,
        size=(size[0]-4,size[1]-4),pos=(1,1))
    image=wx.Image("Button_80x80.png",wx.BITMAP_TYPE_ANY).ConvertToBitmap()
    self.buttonFolder=wx.BitmapButton(self.panel,-1,bitmap=image,
        size=(95,95),style=wx.NO_BORDER)        

    #-------------Sizers-------------
    #self.sizerText.Add((0,0),1)
    #self.sizerText.Add(self.text,0,flag=wx.ALIGN_CENTER)
    #self.sizerText.Add((0,0),1)
    self.sizerControls.Add(self.panelText,1,flag=wx.ALIGN_CENTER)
    self.sizerControls.Add(self.buttonFolder,0,flag=wx.ALIGN_CENTER)
    self.sizerMain.Add(self.sizerControls,1,flag=wx.ALIGN_CENTER)

    #-------------Events-------------
    self.Bind(wx.EVT_BUTTON, self.OnButton, self.buttonFolder)

    self.panel.SetSizerAndFit(self.sizerMain)

    self.Show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T03:32:01.763

您的问题是`wx.TextCtrl`不在面板中居中。这是因为您将位置设置为 (1,1) （即左上角下方和右侧 1 个像素）

我运行了您的代码（注释掉与 相关的代码，`wx.BitmapButton`因为我没有该文件）。如果您将面板差异从 4 像素增加到 10 像素，您会看到：

![10 像素边框，不居中](../Images/75d0d04c9b3f382038d6c29ff8046793.png)

注意所有颜色都在右下角吗？

Mike Driscoll 已经给你答案了，但是你有点误解了。使用`wx.All`标志和大小调整器的目的不是创建一个可以设置颜色的边框，而是使您`wx.TextCtrl`在面板中居中并让面板的颜色显示出来。

看看这个代码片段

```
self.sizerText=wx.BoxSizer(wx.HORIZONTAL)
self.text=wx.TextCtrl(self.panelText,-1, style=wx.TE_READONLY|wx.NO_BORDER)
#dont' set the size nor the position
self.sizerText.Add(self.text, 1, flag=wx.ALL|wx.EXPAND, border=10)
#make the textCtrl expand in all possible directions but leave a 10 pixel border on all sides
#since the border is on left/right and top/bottom this is equivalent to panel size - 20
self.panelText.SetSizer(self.sizerText) 
```

这会导致这样的窗口： ![10 像素边框，居中](../Images/39102339aa436d83b3a2deda4b3732c4.png)

作为旁注，正如我在代码中提到的那样，设置面板大小 - 4 仅相当于 2 像素边框，这很难看到。这也可能是您问题的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:18:38.720

如果您不希望文本控件扩展，则在将其添加到 sizer 时不要将其比例设置为 1（一）。您甚至可以添加一个 wx.ALL 标志并在其周围放置几个像素的边框。您还可以查看小部件检查工具以了解它如何突出显示大小。然后你可以使用 sizer 作为边框：[http ://wiki.wxpython.org/Widget%20Inspection%20Tool](http://wiki.wxpython.org/Widget%20Inspection%20Tool)

或者在这个线程中查看 Robin Dunn 关于绘制自定义边框的回答：

[https://groups.google.com/forum/?fromgroups=#!topic/wxpython-users/aZUo4R2rubY](https://groups.google.com/forum/?fromgroups=#!topic/wxpython-users/aZUo4R2rubY)

# c# - 从其他类更改控件属性

> ID：12061627
> 
> 赞同：0
> 
> 时间：2012-08-21T19:22:31.610
> 
> 标签：c#, compact-framework, label

我正在使用 CompactFramework 来制作 WinCE 应用程序。

我有一个 Form1 和一个 Class1。在 Form1 中，我有一个 label1，我需要从 Class1 访问它。

如果我尝试：

```
Form1.label1 
```

尽管我将修饰符属性设置为公共，但它没有出现。

我怎样才能访问标签？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:18:07.893

问题是 Form1 是一个类，您需要该类的一个实例，因为您的标签不是静态的。

var myForm = new Form1(); myForm.label1.Text = "你好";

显然，您不想从您的类中创建新表单，因为您的应用程序可能创建了该表单。

因此，您应该将表单传递给班级。类是否被表单实例化？如果是这样，您可以将“this”传递给类以发送对实例化表单的引用。

但实际上，您不想这样做，因为它很难维护。更好的办法是让类引发表单可以订阅以更新自身的某种事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:49:20.453

Try to create property or method on the Form1 class to return label1 object

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:49:16.247

您可以将 Form1 实例化为 Class1，然后使用此实例设置 Form1.label1。这将是一个优雅的解决方案。检查此代码：

```
public partial class Form1 : Form
{

    public Label Label1 { get; set; }

    public void Caller()
    {
        MyClass cls = new MyClass();
        cls.Form1 = this;
        cls.DoSomeJob();
    }
}

public class MyClass
{
    public Form1 Form1 { get; set; }

    public void DoSomeJob()
    {
        Form1.Label1.Text = "Some text...";
    }
} 
```

# sql - SQL Server 存储过程中的条件语句

> ID：12061634
> 
> 赞同：0
> 
> 时间：2012-08-21T19:23:06.883
> 
> 标签：sql, sql-server, stored-procedures, conditional

我正在编写一个存储过程，例如 in update 语句，但我混淆了如何应用这种类型的东西？

我的存储过程是：

```
ALTER PROCEDURE [dbo].[Payment_SP]
    @reciptId varchar(50)=null,
    @balPay float=null,
    @payDone float=null,
    @payDate datetime=null,
    @fullfillId_FK varchar(50)=null,
    @clintId_FK int=null,
    @status varchar(50)=null,
    @operation int,
    @fullfillId varchar(50)=null
AS
BEGIN   
    if @operation = 3
    BEGIN
        UPDATE Recipt 
        SET balPay = @balPay 
        WHERE reciptId = @reciptId

        if @@rowcount = 0
            insert into Recipt(reciptId, balPay, payDone, payDate, fullfillId_FK, clintId_FK)
            values(@reciptId, @balPay, @payDone, @payDate, @fullfillId_FK, @clintId_FK)
        update Item_Full 
        set totCost = (select balPay from Recipt) 
        where fullfillId = @reciptId

        if @balPay='0'
        BEGIN
            update Item_Order 
            set status = 'CLOSE' 
            where status = 'FULLFILL' 
               or status = 'RUNNING' 
              and orderId = @reciptId
        END
        ELSE
        BEGIN
            update Item_Order 
            set status = 'RUNING' 
            where status = 'FULLFILL' 
              and orderId = @reciptId
        END
    END
END 
```

在这里，我使用了大量的表格和列。`Recipt`但是如果余额支付（@balPay = 0） ，那么我想在表中执行此操作，然后状态 = 关闭，否则如果有任何余额 > 0，那么状态 = 运行

但每次我获得状态都是`RUNING`在付款完成后。这意味着只有条件语句的 else 部分正在执行，而不是 if 部分

if 语句中应该有什么条件

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:39:43.177

@balPay 永远不会从 null 更新，所以你的 else 语句总是被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T19:12:48.727

好的，伙计们，我犯了一个愚蠢的拼写错误，那就是我在 else RUNING 中更改状态，如果条件正在寻找 RUNNING ...对不起，谢谢

# java - 如何使用 java 自签名 SAML 2.0 版本的 OpenSAML 断言？

> ID：12061644
> 
> 赞同：1
> 
> 时间：2012-08-21T19:23:32.080
> 
> 标签：java, saml, saml-2.0, opensaml

我可以使用 OpenSAML 创建断言，但我想对其进行签名。可以通过两种方式进行签名： 1\. 自签名
2\. 使用第三方（威瑞信等）

使用 OpenSAML 对断言进行自签名的步骤是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T20:36:38.823

要对断言进行自签名，您需要 jks 文件。以下是创建 jks 文件的说明：

1.  在您使用的任何操作系统上打开命令控制台并导航到 keytool.exe 所在的目录（通常是 JRE 所在的位置，例如 Windows 机器上的 c:\Program Files\Java\jre6\bin）。
2.  运行以下命令（其中有效性是证书到期前的天数）： keytool -genkey -keyalg RSA -alias selfsigned -keystore keystore.jks -storepass password -validity 360 -keysize 2048
3.  在提示中填写您的组织信息。当它询问您的名字和姓氏时，输入用户将输入的服务器的域名以连接到您的应用程序（例如 www.google.com）

使用该 jks 文件对断言进行自签名。对于自签名，您可以使用以下[链接中的示例](http://narendrakadali.wordpress.com/2011/06/05/sign-assertion-using-opensaml/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:31:48.290

谷歌搜索opensaml，java，签名断言给出了签名部分的[完整代码示例。](http://narendrakadali.wordpress.com/2011/06/05/sign-assertion-using-opensaml/)使用`openssl`或`keytool`生成密钥对和证书。

# git - 为 git 标记生成 GPG 密钥

> ID：12061645
> 
> 赞同：40
> 
> 时间：2012-08-21T19:23:34.347
> 
> 标签：git, gnupg

我正在尝试使用 git 命令行在 GitHub 中创建签名标签。我生成了一个带有（示例）用户名的 GPG 密钥`Full Name (skytreader) <fullname@gmail.com>`。完成后，我尝试创建一个[签名标签](https://git-scm.com/book/en/v2/Git-Tools-Signing-Your-Work)。但是我收到以下错误：

```
gpg: skipped "full <fullname@gmail.com>": secret key not available
gpg: signing failed: secret key not available
error: gpg failed to sign the data
error: unable to sign the tag 
```

我想我只需要使用指定的用户名创建另一个密钥。但是，输入名称“full”，`gpg`抱怨我的名字应该至少有 5 个字符长。

如何在 git 中使用此密钥？

我是否更改了 git 用于使用 GPG 签署我的标签的用户名，以便我获得至少 5 个字符长的真实姓名？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-05-23T23:49:03.527

首先，您需要检查您的 ID 是否有 gpg 密钥。

```
$ gpg --list-key 
```

如果你有应该出现这样的东西：

> 1.  酒馆 2048R/6AB3587A 2013-05-23
> 2.  uid xxx（用于 xxx 的 gpg）
> 3.  子 2048R/64CB327A 2013-05-23

如果没有 gpg 密钥。你应该创建

```
$ gpg --gen-key 
```

接下来你有这个输出：

> gpg (GnuPG) 2.0.14；版权所有 (C) 2009 Free Software Foundation, Inc. 这是免费软件：您可以自由更改和重新分发它。在法律允许的范围内，不提供任何保证。
> 
> 请选择您想要的钥匙类型：
> 
> 1.  (1) RSA 和 RSA（默认）
> 2.  (2) DSA 和 Elgamal
> 3.  (3) DSA（仅签名）
> 4.  (4) RSA（仅符号）
> 
> 你的选择？RSA 密钥的长度可能在 1024 到 4096 位之间。你想要什么尺寸的钥匙？(2048)
> 请求的密钥大小为 2048 位
> 请指定密钥的有效期。
> 
> ```
>  0 = key does not expire
>       <n>  = key expires in n days
>       <n>w = key expires in n weeks
>       <n>m = key expires in n months
>       <n>y = key expires in n years 
> ```
> 
> 密钥有效吗？(0)
> 密钥根本不会过期这
> 是正确的吗？（是/否）是
> 
> ```
> GnuPG needs to construct a user ID to identify your key.
> 
> Real name: xxx
> Email address: xxx@example.com
> Comment: gpg for xxx
> 
> You selected this USER-ID:
>     "xxx(gpg for xxx) <xxx@example.com>"
> 
> Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O
> You need a Passphrase to protect your secret key.
> 
> can't connect to `/xxx/.gnupg/S.gpg-agent': No such file or directory
> We need to generate a lot of random bytes. It is a good idea to perform
> some other action (type on the keyboard, move the mouse, utilize the
> disks) during the prime generation; this gives the random number
> generator a better chance to gain enough entropy. 
> ```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-21T20:04:57.113

提交者名称位于您的`~/.gitconfig`文件中。将该条目更改为真实姓名（无论如何，这就是您想要提交的方式）。您可以在您喜欢的编辑器中编辑该文件，或者直接发出：

```
git config --global user.name "<name>" 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-06-08T14:37:52.430

如果您已经生成了一个密钥，您可以告诉 git 使用该特定密钥，而不必担心您的 git 用户 ID（姓名+电子邮件）和 GPG 密钥的 ID 之间的匹配。不过，您应该让您的 git`user.email`匹配 GPG 密钥上的一封电子邮件，以便您的签名标签或提交对其他用户有用。

要在您的计算机上设置全局使用的密钥，请使用以下命令设置您的 git 全局配置：

```
git config --global user.signingkey 6AB3587A 
```

或者，您可以`user.signingkey`仅为您所在的当前存储库设置：

```
git config user.signingkey 6AB3587A 
```

# api - WSO2 API Manager - 它可以在后端将 REST 请求转换为 SOAP 请求吗？

> ID：12061650
> 
> 赞同：5
> 
> 时间：2012-08-21T19:23:42.390
> 
> 标签：api, rest, soap, wso2, wso2-am

我正在探索将 WSO2 API 管理器用于我们目前基于 SOAP 的旧版 API。理想情况下，我想向我们的客户公开一个 RESTful 接口，并让 API Manager 将其转换为传递给我们遗留系统的 SOAP 请求。搜索 WSO2 站点，我发现有一些方法可以使用 XSLT 转换来做到这一点，但仅限于使用 WSo2 ESB 产品时。

有没有办法在 API Manager 中处理这种转换？如何？如果没有，我能否以某种方式利用 ESB 产品并将其与 API Manager 产品结合起来？还是那是矫枉过正？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T15:40:16.410

REST 到 SOAP 的转换是 WSO2 ESB 的一个突出特性。要了解有关它的更多信息，请查看 [1] 中给出的示例。此示例中使用的 Payload Factory Mediator 是一种比 XSLT Mediator 更新的类型，并且在处理 SOAP 消息方面也比 XSLT Mediator 更有效。

WSO2 API Manager 是一个用于发布、管理和管理 API 的平台。WSO2 API 管理器是使用组件化的 Carbon 框架构建的，WSO2 ESB 的几乎所有组件都用于该框架。因此，从技术上讲，WSO2 ESB 可以完成的所有工作都可以由 WSO2 API Manager 完成；但是没有 WSO2 ESB 中的 GUI 的帮助；您将不得不使用基于 xml 的配置的源视图。但是当然要绕过这个障碍，您总是可以下载 WSO2 ESB 产品（它也是免费和开源的）并使用 GUI 创建所有必要的中介序列，并将配置从 WSO2 ESB 复制并粘贴到 WSO2 API 管理器，你就完成了。

在我看来，您需要的是 WSO2 ESB。在您的情况下，我假设您只有一个或几个 SOAP API，您需要将其公开为 REST API；您更多地关注的是 REST-SOAP 转换功能，而不是管理数百个 API 的能力。如果您不需要 API Manager 的核心功能，例如发布 API、版本控制、验证消费者、基于策略的限制和监控 API 使用（有关功能的完整列表，请查看 [2] 中的产品主页），然后你真的不想要 API Manager。但是，如果您有 API 管理要求，则可以使用 WSO2 API Manager。我认为您不应该仅仅因为您预见到某种 API 管理要求即将到来而使用 WSO2 API 管理器。

同时使用由 WSO2 API Manager 提供的 WSO2 ESB 也是一种解决方案。如果您在中介层执行繁重的中介，WSO2 甚至推荐这种架构。您甚至可以单独从 WSO2 ESB 开始，然后当适当的需求出现时，决定使用 WSO2 API 管理器将其放在前面。使用 WSO2 API 管理器在 WSO2 ESB 前端是轻而易举的事。

[1] [http://docs.wso2.org/wiki/display/ESB403/Sample+800+Introduction+to+REST+API](http://docs.wso2.org/wiki/display/ESB403/Sample+800+Introduction+to+REST+API)

[2] [http://wso2.com/products/api-manager/](http://wso2.com/products/api-manager/)

# javascript - 关于如何使用 BusterJs 资源配置选项的一个很好的例子？

> ID：12061654
> 
> 赞同：3
> 
> 时间：2012-08-21T19:24:08.897
> 
> 标签：javascript, unit-testing, buster.js

我正在寻找一个很好的例子来展示如何`resource`在配置文件中使用 busterJS 的属性`buster.js`来在测试用例中包含一个 .json 文件。

从文档中：

> **资源**
> 
> 可用于测试运行但未显式加载的其他资源。价值是一组资源。从服务器上的上下文路径提供资源。要在测试运行中请求资源，您需要使用`buster.env.contextPath`. 资源 /some/cookies.json 可以被请求为`jQuery.get(buster.env.contextPath + "/some/cookies.json")`；

[它还指出：](http://busterjs.org/docs/configuration/#resource)

> 当您使用 buster-server 和 buster-test 运行浏览器测试时，“资源”是在服务器上公开的东西。公开资源 `/something.json`允许您在测试中使用例如请求它 `jQuery.ajax({ url: "something.json" });`。

这是他们给出的例子：

```
 config["Browser build tests"] = {
    environment: "browser",
    libs: ["lib/**.js"],
    resources: [
        "src/**.js",
        { path: "/mylib.min.js",
          combine: ["src/base.js", "src/dom.js"] }
    ],
    sources: ["/mylib.min.js"],
    tests: ["test/**.js"]
}; 
```

但是，他们没有给出在单元测试中使用 JSON 文件的可靠示例。当我尝试按照他们的示例进行操作时，当我尝试执行`jQuery.ajax({ url: "[my-file-name-here]" })`.

有没有人成功使用过这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:42:00.280

这就是它应该如何工作：[https](https://gist.github.com/4554427) ://gist.github.com/4554427但我看到了奇怪的 responseText ，所以我需要看看为什么会发生这种情况......

# objective-c - CoreAudio 不会填充在设备上运行的缓冲区（但在模拟器中）

> ID：12061655
> 
> 赞同：0
> 
> 时间：2012-08-21T19:24:12.030
> 
> 标签：objective-c, ios, ios5, core-audio, circular-buffer

我正在构建一个 CoreAudio 应用程序，我需要在其中处理来自麦克风的原始输入样本。我使用两个线程，其中一个线程从麦克风输入产生样本，另一个线程正在消耗样本。这些线程共享一个（运行良好的）循环缓冲区，我[从 Github 获取了](https://github.com/michaeltyson/TPCircularBuffer)它的实现（一个很好的例子可以在[作者的博客](http://atastypixel.com/blog/a-simple-fast-circular-buffer-implementation-for-audio-processing/)上找到）。

作为我的问题的一个最小示例，我[在 Github 上整理了一个小型 XCode 项目](https://github.com/padde/BufferedSamples)，因此您可以看到完整的代码。App 将麦克风样本放入循环缓冲区，然后从另一个线程读取缓冲区。消费线程计算 500 个样本的[平均校正值](http://en.wikipedia.org/wiki/Average_rectified_value)(ARV)，并在控制台上输出 ARV。

当我在 iOS 模拟器 (5.1) 中运行应用程序时，一切正常，我得到了所需的输出：

```
2012-08-21 20:58:31.882 BufferedSamples[23505:6003] 88
2012-08-21 20:58:31.890 BufferedSamples[23505:6003] 108
2012-08-21 20:58:31.890 BufferedSamples[23505:6003] 137
2012-08-21 20:58:31.891 BufferedSamples[23505:6003] 137
2012-08-21 20:58:31.892 BufferedSamples[23505:6003] 106
2012-08-21 20:58:31.901 BufferedSamples[23505:6003] 140
... 
```

当我尝试在设备上运行应用程序（我尝试过 iPhone 3/3GS/4）时，`EXC_BAD_ACCESS`由于`NULL`指针，我在运行时收到错误。因此，我在 CoreAudio 回调函数中添加了一个`NULL`指针检查（在文件中`DummyRecorder.m`）：

```
// render samples into buffer
AudioBufferList bufferList;
bufferList.mNumberBuffers = 1;
bufferList.mBuffers[0].mNumberChannels = 1;
bufferList.mBuffers[0].mDataByteSize = inNumberFrames * kTwoBytesPerSInt16;
bufferList.mBuffers[0].mData = NULL;
AudioUnitRender(dummyRecorder->audioUnit, ioActionFlags, inTimeStamp, kInputBus, inNumberFrames, &bufferList);

// move samples to ring buffer
if (bufferList.mBuffers[0].mData != NULL)
    TPCircularBufferProduceBytes(&dummyRecorder->buffer, bufferList.mBuffers[0].mData, bufferList.mBuffers[0].mDataByteSize);
else
    NSLog(@"null pointer"); 
```

当我在模拟器中运行应用程序时，我仍然得到所需的输出，但在设备上，我得到以下内容：

```
2012-08-21 21:15:38.903 BufferedSamples[544:3b03] null pointer
2012-08-21 21:15:38.926 BufferedSamples[544:3b03] null pointer
2012-08-21 21:15:38.949 BufferedSamples[544:3b03] null pointer
2012-08-21 21:15:38.972 BufferedSamples[544:3b03] null pointer
2012-08-21 21:15:38.996 BufferedSamples[544:3b03] null pointer
2012-08-21 21:15:39.019 BufferedSamples[544:3b03] null pointer
... 
```

CoreAudio 怎么可能在模拟器中正确分配和填充缓冲区，但在设备上保持缓冲区不变？我错过了什么？

[我的示例的完整代码可以在 Github 上找到。](https://github.com/padde/BufferedSamples)

## 编辑

按照建议，我添加了一种[方法来检查](http://pastebin.com/zMc3xBMS)CoreAudio 调用后的错误`@MichaelTyson`。现在我在我的回调中这样做：

```
OSStatus err = AudioUnitRender(dummyRecorder->audioUnit, ioActionFlags, inTimeStamp, kInputBus, inNumberFrames, &bufferList);

// move samples to ring buffer
if (checkResult(err, "AudioUnitRender"))
    TPCircularBufferProduceBytes(&dummyRecorder->buffer, bufferList.mBuffers[0].mData, bufferList.mBuffers[0].mDataByteSize); 
```

我还更新了 Github 上的代码。在模拟器中运行应用程序不会产生任何错误，而在设备上运行它会给我以下错误：

```
2012-08-22 11:19:49.248 BufferedSamples[637:3b03] /DummyRecorder.m:50: AudioUnitRender result -50 FFFFFFCE Œˇˇˇ
2012-08-22 11:19:49.271 BufferedSamples[637:3b03] /DummyRecorder.m:50: AudioUnitRender result -50 FFFFFFCE Œˇˇˇ
2012-08-22 11:19:49.294 BufferedSamples[637:3b03] /DummyRecorder.m:50: AudioUnitRender result -50 FFFFFFCE Œˇˇˇ
2012-08-22 11:19:49.317 BufferedSamples[637:3b03] /DummyRecorder.m:50: AudioUnitRender result -50 FFFFFFCE Œˇˇˇ
2012-08-22 11:19:49.341 BufferedSamples[637:3b03] /DummyRecorder.m:50: AudioUnitRender result -50 FFFFFFCE Œˇˇˇ
2012-08-22 11:19:49.364 BufferedSamples[637:3b03] /DummyRecorder.m:50: AudioUnitRender result -50 FFFFFFCE Œˇˇˇ
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T21:25:03.143

弄清楚这些东西通常需要一些猜测工作，因为很难记住所有参数，但我要尝试的第一件事是在音频单元输入总线的输出范围上设置流格式（总线1）。

目前，您仅将其设置在输出总线（总线 0）的输入范围内，我不能 100% 确定这是否足够。

# database - Hibernate HQL 查询分析工具？

> ID：12061660
> 
> 赞同：2
> 
> 时间：2012-08-21T19:24:35.590
> 
> 标签：database, hibernate, hql

有没有类似 SQLServer 的 QueryAnalyser 的 HQL 查询分析工具？

我在 Google Code 中查看了 hiberlyzer，它在 2007 年只发布了一个版本，从那时起就没有做任何事情。我还查看了 Google Code 中的 Hibernate Query Analyzer，但它只有一个分析器，并且自 2009 年以来几乎没有更新。

还有其他我找不到的选择吗？

我有一个想简化的疯狂查询，但需要一些帮助来决定什么是重要的。（当一切都说完了，这个查询会生成 85 个 SQL 查询。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:37:58.723

我使用 Squirrel SQL，就我的目的而言，它运行良好......

[http://squirrel-sql.sourceforge.net/](http://squirrel-sql.sourceforge.net/)

... 新版本定期发布

# sql-server-2008 - 在 SSMS 2008 中聚焦结果窗格的快捷键

> ID：12061663
> 
> 赞同：9
> 
> 时间：2012-08-21T19:24:39.253
> 
> 标签：sql-server-2008, ssms

是否有快捷键可以聚焦结果窗格？我知道 Ctrl+R 显示和隐藏它，但窗格没有聚焦，这意味着我无法使用 PgDn 或箭头键向下滚动。我查看了键盘快捷键，但没有找到任何东西。此外，能够专注于查询编辑器窗格。

SQL Server 管理工作室 2008 R2

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-21T19:26:33.673

我讨厌发布单行作为答案，但是：

按`F6`或`Shift`+`F6`在窗格之间切换。

# c# - 将十进制格式化为字符串

> ID：12061667
> 
> 赞同：1
> 
> 时间：2012-08-21T19:25:04.453
> 
> 标签：c#, decimal, string-formatting

如何将此十进制：123456789012345678 格式化为字符串“1.234.567.890,12345678”？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:35:13.663

[在此处](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)查看有关自定义数字格式（任何类型）的更多信息

```
public string SpecialFormatDecimal(decimal input)
{
    return (input / 100000000).ToString("#,##0.00000000", System.Globalization.CultureInfo.GetCultureInfo("en-US"));
} 
```

谷歌上的简单搜索立即显示了答案。

如果您需要本地小数点和千位分隔符，您可以省略 CultureInfo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:37:38.917

Casperah 的答案很棒，但不要忘记，您可以使用标准数字格式

```
public string SpecialFormatDecimal(decimal input)
{
    return (input / 100000000).ToString("N8");
} 
```

# javascript - Phonegap ajax请求未在iOS设备上连接

> ID：12061668
> 
> 赞同：2
> 
> 时间：2012-08-21T19:25:20.783
> 
> 标签：javascript, ios, ajax, cordova

我正在尝试将 jquery ajax 请求发送到 Phonegap for iOS 中的服务器，但出现了问题。使用 $.ajax 函数，成功或错误回调都不会触发。我已将服务器 url 列入白名单。如果我在浏览器中运行应用程序，无论是在笔记本电脑上还是在移动 safari 上，它都可以正常工作，但在模拟器或设备上运行时什么也没有发生。这是几个小时前的工作。我能想到的唯一改变是我为临时分发添加了一个新的构建配置，但我不明白这有什么作用。

# objective-c - iOS 内部麦克风到 AirPlay（流媒体）

> ID：12061670
> 
> 赞同：1
> 
> 时间：2012-08-21T19:25:27.773
> 
> 标签：objective-c, ios, audio

有很多应用程序示例（包括源代码）a）录制音频（来自 iOS 设备的内部麦克风），以及 b）播放音频（通过 AirPlay）

我很难找到任何类型的示例/文档，这些示例/文档可能会演示如何同时（或在预期的网络延迟内）执行这两项操作。我有兴趣将音频从 iOS 设备的内部麦克风实时路由到 AirPlay 设备（Airport Express、Apple TV 等）。无需录音。

任何人都可以描述一种可能完成的方式，或者向我指出一些相关文档的方向吗？谢谢！

# oracle - 具有常量变量的 Oracle 包。我们如何根据客户来改变它

> ID：12061672
> 
> 赞同：0
> 
> 时间：2012-08-21T19:25:28.400
> 
> 标签：oracle, package

我有一个包含两个变量的包，这些变量的值如下所示。

```
person_name              CONSTANT VARCHAR2 (15)           := 'Adam';
person_city              CONSTANT VARCHAR2 (15)           := 'Houston'; 
```

这个包变量在我的数据库中用于存储过程、其他包等。

现在我希望这些变量具有基于正在调用的客户端服务器的值。我将所有这些都保存在如下表中

```
Server      Parameter       Value
Server1     person_name     Adam
Server1     person_city     Houston
Server2     person_name     Victor
Server2     person_city     Dallas 
```

因此，当从 server1 引用/调用包/SP 时，我希望我的 person_name 和 person_city 被默认为 Adam 和 Houston。同样，当从 server2 引用/调用包/SP 时，我希望我的 person_name 和 person_city 是 Victor 和 Dallas。

如何才能做到这一点？无论如何在oracle方面，调用特定SP或使用包变量的客户端？我编写了一个函数来获取如下值。

```
in package, 
person_name     CONSTANT VARCHAR2 (15)      :=GETPARAMVALUE(person_name);
person_city     CONSTANT VARCHAR2 (15)      :=GETPARAMVALUE(person_city); 
```

在函数中，我将查询表格

```
select * from parameterstable where parameter = (function's input) and servername = ???? 
```

我怎么知道这里的服务器名？

任何帮助/提示将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T19:36:43.833

假设`server1`和`server2`是连接到您的服务器的客户端计算机，

```
SYS_CONTEXT( 'USERENV', 'HOST' ) 
```

应该返回客户端机器的名称。您可以在`GetParamValue`函数中使用它来确定要读取配置表中的哪一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:33:07.883

首先，您应该告诉我们“服务器”是什么意思。一旦我们得到它 - 我们会尽力提供帮助。

在任何情况下，您都应该注意包变量在调用包时初始化一次，因此如果可能更改变量，您必须在包中刷新它们以不处理不正确的值。因此，您需要在每次使用它们时检索它们（例如在 sp 中），或者在设置表中添加更新/插入触发器，以便正确刷新包变量。

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sessio.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sessio.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:37:33.920

也许这样的事情将有助于识别服务器名称 -

```
SQL> select a.host_name,b.value from v$instance a, parameterstable b
     where a.host_name = b.server and b.parameter='person_name';

HOST_NAME      VALUE
---------   -----------
server1        Adam 
```

# solr - Solr 3.1 到 3.6 升级语法更改

> ID：12061673
> 
> 赞同：0
> 
> 时间：2012-08-21T19:25:37.047
> 
> 标签：solr, edismax

尝试从 Solr 3.1 升级和应用程序到 3.6.1 并偶然发现以下问题：如下所示的查询在 3.1 中有效，但在 3.6.1 中未返回任何结果：

> q=id:911 AND（格式：文本或格式：null）

**defType**设置为**edismax**并且**q.op**设置为**AND**。

有人可以指出我在发布说明或 SOLR 文档中解释何时以及为何引入更改的要点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:25:38.157

找到了原因。只是不相信这可能是一个[错误](https://issues.apache.org/jira/browse/SOLR-3377)。就这么简单。

# compilation - 哪些编程语言通常被编译成非机器特定的代码？

> ID：12061675
> 
> 赞同：0
> 
> 时间：2012-08-21T19:25:56.743
> 
> 标签：compilation, programming-languages

任何具体的原因也会很好。

正如一些人指出的那样；Java被翻译成字节码，在JVM中运行。有没有不依赖虚拟机的？历史或当代，过时与否。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:40:17.060

正如已经指出的，可移植的字节码是独立于平台的，你可以在例如找到一个**字节码**语言列表。[维基百科](http://en.wikipedia.org/wiki/Bytecode)。但它们依赖于解释器或虚拟机，即。JVM。
还有 LLVM，它以中间形式 (IF) 提供中间层。

# ruby-on-rails - 嵌入 Ruby 的内联 Div/表类的 Slim 语法

> ID：12061678
> 
> 赞同：2
> 
> 时间：2012-08-21T19:26:12.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, slim-lang

我有一个用 slim 定义的表：

```
 table
    tr
       td
          =_("Some Content")
       td
          =_("Some Content") 
```

我想为某些 td 标签添加一些类。我可以这样做：

```
 table
    tr
       td.extraclass
          =_("Some Content")
       td
          =_("Some Content") 
```

这为该 td 添加了“额外类”：

```
 <td class="extraclass"> Some Content </td> 
```

如何通过在其中嵌入一些 rails/ruby 来添加一个类？在正常的轨道上，我可以这样做：

```
 <td class="<%=@article.attribute%>"> 
```

我该怎么做？我认为我做不到：

```
 td.=_(@article.attribute) 
```

但我想在这里以类似的方式添加类。有人有什么建议吗？如果我不清楚我正在尝试做什么，请让我知道我可以添加什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:30:09.693

此功能的文档在[这里](http://slim-lang.com/docs.html#dynamic-content-in-attribute)：

```
td class="#{@article.attribute}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-26T15:02:01.260

根据[此处](http://www.rubydoc.info/gems/slim/frames#Attributes)的文档，您可以按如下方式实现：

`td class=@article.attribute`

顺便说一句，编写`td.class1 class=some_ruby_expr`两个类时会自动合并到结果`class`属性中。

# database - 名称标准化 - 删除变音符号

> ID：12061680
> 
> 赞同：1
> 
> 时间：2012-08-21T19:26:24.620
> 
> 标签：database, plsql, oracle11g

我继承了一个带有 item_names 表的数据库。

item_names 中的文本具有非标准文本，因此名称的一个版本是使用 getStandardizedName PL/SQL 函数创建的。该版本用于搜索目的（针对最终用户输入的搜索调用相同的函数）。

在这个函数中有很多东西，比如下面的代码。我的问题是，没有更好的方法来做到这一点吗？每百万个项目大约需要 90 分钟。不幸的是，目前的工作流程要求每周进行 5 到 6 次。

请注意，以下类型的'REPLACE'有80多个

```
 l_name := REPLACE(l_name, 'STE-', ' SAINT ');
   l_name := REPLACE(l_name, 'ST-', ' SAINT ');

   l_name := replace(l_name, '+','');
   l_name := replace(l_name, '-','');

   l_name := replace(l_name, '=','');
   l_name := replace(l_name, '_','');
   l_name := replace(l_name, '.',''); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:45:27.197

如果您可以识别常见的模式/分组，您应该能够用几个[regexp_replace](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions137.htm)调用来替换它们。您已经在评论中确定了标点符号示例。

```
l_name := regexp_replace(l_name, '([[:punct:]])', ' ') 
```

SAINT 对可以替换为：

```
l_name := regexp_replace(l_name, 'ST[E]{0,1}-', 'SAINT ') 
```

# ios - 在 xcode 中配置时出错

> ID：12061683
> 
> 赞同：0
> 
> 时间：2012-08-21T19:26:37.693
> 
> 标签：ios, provisioning

我在`Provisioning`帐户中拥有的是 ![在此处输入图像描述](../Images/f270f112d6b03284e971248a098e91ca.png)

然后我下载它们并拖入管理器/库/配置文件。但是，我总是得到这些状态

![在此处输入图像描述](../Images/fd88efe203a704aa44163b780f6c7a46.png)

我中间缺少什么..请就这个问题提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:56:11.507

当您的计算机上没有您的 iOS 开发证书的私钥时，会出现此问题。例如，如果您在新机器上安装了 XCode，就会发生这种情况。

[Apple在此处](http://developer.apple.com/library/ios/#technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TROUBLESHOOTING_FAQ-WHAT_DOES__VALID_SIGNING_IDENTITY_NOT_FOUND__MEAN_AND_HOW_DO_I_RESOLVE_IT_)为此类错误提供分步说明。

此问题已在另一篇[文章](https://stackoverflow.com/questions/6769345/xcode-4-valid-signing-identity-not-found-error-on-provisioning-profiles-on-a)中得到解决，您将看到有两种可能的解决方案：

*   最简单的方法是将您的开发配置文件从旧机器转移到新机器。
*   通过使用 Keychain 生成新的证书请求来撤销并生成新的开发配置文件

# jquery - jQuery动态创建复选框更改事件

> ID：12061685
> 
> 赞同：1
> 
> 时间：2012-08-21T19:26:45.820
> 
> 标签：jquery

ajax 调用后，我在页面上动态创建了复选框。

在这里使用一些帖子，我能够将事件附加到复选框的容器 div 并且事件现在触发。HTML

```
<div class="AvailableProducts" id="AvailableProducts">
     <ul><input type="checkbox" id="availableProduct" value="Apple" class="productsSelected"><span>Apple</span> 
     <br><input type="checkbox" id="availableProduct" value="Orange" class="productsSelected"><span>Orange</span> <br>
     </ul>
</div> 
```

我的事件如下所示

```
$(document).ready(function () {
        $('#AvailableAdvertisers').live('change', 'input:checkbox', function () {
            alert('Fired!');
        });
 }); 
```

现在我不知道如何获取选中了哪个复选框。谢谢。

编辑：明白了。我可以用下面的代码做到这一点

```
$(this + ":checked").val()
$(this + ":checked + span").text() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:28:55.737

```
$('input.productsSelected:checked') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:31:07.510

添加 rel 或 value 属性。然后您可以使用`.rel()`or`.attr()`方法以纯文本形式获取这些属性。

例如，如果您有一个复选框`value="chevy"`

```
var checkboxName = $('.mycheckbox').value(); 
```

会给你一个带有值的变量`"chevy"`

祝你好运
-布赖恩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:34:47.063

试试这个：http: [//jsfiddle.net/rhJzJ/2/](http://jsfiddle.net/rhJzJ/2/)

顺便说一句，您在多个元素上使用了相同的 ID，这是错误的。

# iphone - 旋转和裁剪图像 IOS

> ID：12061691
> 
> 赞同：2
> 
> 时间：2012-08-21T19:27:01.193
> 
> 标签：iphone, objective-c, ios, xcode

我正在对 an 执行旋转`UIImageView`，然后尝试裁剪其中的一部分并将其另存为`UIImage`. 旋转`UIImageView`但它总是裁剪照片的相同部分。所以裁剪没有考虑图像旋转。我究竟做错了什么？

```
//rotate image 
CGRect new = CGRectMake(0, 0, 100, 50);
CGAffineTransform rotation = CGAffineTransformMakeRotation(5);
[photo setTransform:rotation];

// crop image 
CGImageRef imageRef = CGImageCreateWithImageInRect([photo.image CGImage], new);
UIImage *croppedImage = [UIImage imageWithCGImage:imageRef]; 
CGImageRelease(imageRef);

// display crop bounds 
UIView* faceBounds = [[UIView alloc] initWithFrame:new];
faceBounds.layer.borderWidth = 2;
faceBounds.layer.borderColor = [[UIColor redColor] CGColor]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:32:43.807

使用以下代码段旋转图像数据。

输入数据是`inAngle`（弧度角）和`inImage`（`UIImage`实例）。

它的作用是创建一个图像上下文，对其应用转换并将原始图像绘制到该上下文中。生成的图像数据现在将存储在`resultImage`.

前三行处理边界结果图像帧的计算。

```
UIView *rotatedViewBox = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, inImage.size.width, inImage.size.height)];
rotatedViewBox.transform = CGAffineTransformMakeRotation(inAngle);
CGSize rotatedSize = rotatedViewBox.frame.size;

UIGraphicsBeginImageContext(rotatedSize);
CGContextRef bitmap = UIGraphicsGetCurrentContext();
CGContextTranslateCTM(bitmap, rotatedSize.width / 2.0f, rotatedSize.height / 2.0f);
CGContextRotateCTM(bitmap, inAngle);
CGContextScaleCTM(bitmap, 1.0f, -1.0f);
CGContextDrawImage(bitmap, CGRectMake(-inImage.size.width / 2.0f,
                                      -inImage.size.height / 2.0f,
                                      inImage.size.width,
                                      inImage.size.height),
                                      inImage.CGImage);
UIImage *resultImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-29T14:06:03.810

现在为时已晚，但现在有人可以试试[这个](https://github.com/SurpriseWave/SWImageRotation)

# bash - 在 bash 中编辑函数 - awk

> ID：12061692
> 
> 赞同：0
> 
> 时间：2012-08-21T19:27:06.387
> 
> 标签：bash

我有这样的功能...

```
 function size {

      export FILENAME=$1

      export SIZE=$(du -sb $FILENAME | awk '{ print $1 }')

      awk 'BEGIN{x = ENVIRON["SIZE"]
                 split("Byte KiloByte MegaByte GigaByte TeraByte PetaByte ExaByte ZettaByte YottaByte", type)
                 for(i=8; y < 1; i--)
                     y = x / (2**(10*i))
                     print y " " type[i+2]
      }'

 } 
```

大小 "/home/foo.bar" # 1 兆字节

如何插入：**打印 y " " type[i+2]**

到变量： SIZE_FILE ？

测试：SIZE_FILE=${print y " " type[i+2]} # 错误 :-(

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:36:23.243

$( expr ) 构造将评估“expr”的结果保存到一个变量中：

```
 theDate=$(date) 
```

您也可以使用反引号，但我认为 $()​​ 更具可读性：

```
 theDate=`date` 
```

因此，对于您的脚本，您将使用：

```
 function size {

          export FILENAME=$1

          SIZE=$(du -sb $FILENAME | awk '{ print $1 }')

          export FILE_SIZE=$(awk -v x=$SIZE 'BEGIN{
                     split("Byte KiloByte MegaByte GigaByte TeraByte PetaByte ExaByte ZettaByte YottaByte", type)
                     for(i=8; y < 1; i--)
                         y = x / (2**(10*i))
                         print y " " type[i+2]
          }')

    echo $FILE_SIZE

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:08:45.700

您可以在没有 的情况下执行此操作`awk`，它更适合处理文本文件。

```
function size () {

    # Non-environment variables should be lowercased
    # Always quote parameter expansions, in case they contain spaces
    local filename="$1"

    # Simpler way to get the file size in bytes
    local size=$(stat -c%s "$filename")

    # You could put all the units in an array, but we'll keep it simple.
    for unit in Byte KiloByte MegaByte GigaByte TeraByte PetaByte ExaByte ZettaByte YottaByte; do
        echo "$size $unit"
        (( size /= 1024 ))
    done

}

sizes=$( size $myfile ) 
```

# jquery - 使用分页时对包含选择元素的列中选定文本的整个数据表进行排序

> ID：12061693
> 
> 赞同：1
> 
> 时间：2012-08-21T19:27:19.323
> 
> 标签：jquery, jquery-plugins, datatables

我正在为我的表使用 DataTables。我有几列带有选择元素。我想要的是根据所选文本对这些列进行排序。在我能找到的所有示例中，排序都是基于值，而不是文本。

这是执行此操作的标准方式的示例（除了我将列转换为可见）并对值进行排序。

```
$.fn.dataTableExt.afnSortData['dom-select'] = function  ( oSettings, iColumn, iColumnVis)
    {  
            iColumn = oSettings.oApi._fnColumnIndexToVisible( oSettings, iColumn );

        var aData = [];

$( 'td:eq('+iColumn+') select', oSettings.oApi._fnGetTrNodes(oSettings) ).each( function () {
        aData.push( $(this).val() );

    } );
    return aData;
}; 
```

我试图做的是提取文本并将其推送到 aData。一些已选择的选项只是空的。

而不是“aData.push($(this).val());” 我这样做：

```
if($.trim($("#" + $(this).attr('id') + " option:selected").text())!=""){
         aData.push($("#" + $(this).attr('id') + " option:selected").text());
    }else{ 
         aData.push("");
} 
```

我排序但仍然不是按字母顺序。它只对可见行进行排序，而不是我必须分页到的行。

但是，当我选择查看足够多的行以便所有现有行都可以显示在一个页面上时，它似乎工作正常（因此，查看其他行不需要分页）。

使用分页时如何使用选择元素选择文本对整个表格进行排序？

**更新**

我的表配置（我从 firebug 复制了 aoColumnDefs 和 covis（因为我在服务器端构建它们），因此在下面的配置中格式可能不是 100% 正确，但内容是相同的）：

```
$('#mytickettable').dataTable( {              
        "bJQueryUI": true,
        "oLanguage": {                          
            "sUrl": "https://" + hostname + "/modules/core/localization/locale/" + lang.user_locale + "/LC_MESSAGES/datatables.tr",
             "sSearch": "Search all columns:"
         },
         "iDisplayLength": 25,
         "sPaginationType": "full_numbers",
         "sDom": 'RHF<"top"TClpf>rt<"bottom"ip><"clear">',
         "oTableTools": { 
             "aButtons": [{
                  "sExtends":    "text",
                  "sButtonText": lang.localized_text.SHOW_HIDE_TICKET_OVERVIEW,
                   "fnClick": ticketoverview_handler                                         
                 },
                 { "sExtends":    "text",
                   "sButtonText": lang.localized_text.SHOW_HIDE_QUICK_FILTER,
                   "fnClick": function ( nButton, oConfig, oFlash ) {
                      $("#agentfilterform").toggle();
                      $("#show_closed_tickets").toggle();
                      if(page=='myticketsmenu'){
                           $("#agentfilter_asigned_ownerform").toggle();
                      }
                    }
                  },
                  {
                     "sExtends":    "text",
                     "sButtonText": lang.localized_text.REFRESH_TABLE,
                     "fnClick": function ( nButton, oConfig, oFlash ) {
                                 oTable.fnReloadAjax();
                      }
                   },                                                                        
                   {
                      "sExtends": "xls",  
                      "sButtonText": "Excel",
                      "sAction": "flash_save",
                      "sFileName": "Ticketlist.xls",                                        
                      "mColumns": "visible"
                   },  
                   {
                      "sExtends": "csv",
                      "sButtonText": "CSV",
                      "sFileName": "Ticketlist.csv",
                      "sAction": "flash_save",
                      "mColumns": "visible"
//                    "bShowAll": false
                    }]
                },
          "oColVis": {
               "aiExclude": [12],
               "bRestore": true,
               "buttonText": lang.localized_text.SHOW_HIDE_COLUMNS,
               "iOverlayFade": 0
          },
          "aaSorting": [[0, 'desc']],
          "aoColumnDefs": 
               [{"asSorting":["desc","asc","desc"],"aTargets":[0]},  
                {"sWidth":"50px","aTargets":[0]},
                {"sWidth":"65px","aTargets":[3]}, 
                {"sWidth":"175px","aTargets":[4]},
                {"sWidth":"110px","aTargets":[5]},
                {"sWidth":"110px","aTargets":[6]},
                {"sWidth":"125px","aTargets":[7]},
                {"sWidth":"110px","aTargets":[8]},
                {"sSortDataType":"dom-select","aTargets":[3]},
                {"sSortDataType":"dom-select","aTargets":[5]},
                {"sSortDataType":"dom-select","aTargets":[6]},
                {"bVisible":false,"aTargets":[9]},
                {"bVisible":false,"aTargets":[10]},
                {"bSearchable":true,"aTargets":[11]},
                {"bSearchable":true,"aTargets":[12]},
                {"bVisible":false,"aTargets":[12]},
                {"sSortDataType":"dom-select","aTargets":[1]},
                {"bVisible":false,"aTargets":[1]},
                {"bSearchable":true,"aTargets":[1]},
                {"sWidth":"65px","aTargets":[1]},
                {"sSortDataType":"dom-select","aTargets":[2]},
                {"sWidth":"75px","aTargets":[2]}]                       
                ,
                "bScrollCollapse": true,
                "bStateSave": false,                 
                "bProcessing": true,
                "sAjaxSource": "https://" + hostname + "/modules/core/ticket/get_ticket_list.php",
                "fnServerParams": function (aoData) {                             
                          aoData.push({"name":"show_closed", "value":show_closed});
                          aoData.push({"name":"page", "value":page});
                 },
                 "fnInitComplete": tablesetuphandler,
                 "fnPreDrawCallback": function(oSettings){
                       var $tableRow = $('#mytickettable tbody tr:eq(' + markedRow + ')');
                       $($tableRow).removeClass('row_selected');
                  },
                  "fnDrawCallback": function(oSettings){   
                  $(".ColVis_Button").button(); //fixbutton                            
                       if (tableInitiated) {
                              markedRow = markNewRow(0,0 );
                              var table = document.getElementById("mytickettable");
                              var row = table.rows[markedRow+1];
                              var cell = row.cells[id_index];
                              var $id = cell.firstChild.nodeValue;                                    
                              if(oTable.fnSettings().fnRecordsDisplay()==0){
                              }else if(old_id!=$id && oTable.fnSettings().fnRecordsDisplay()>0){
                                   load_ticket_overview($id);
                              }                                
                         }

                  }

         }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:16:54.697

我不认为我有你在做什么的全貌，但是当你尝试这个时会发生什么`aData.push()`？

```
aData.push( $(":selected", this).text() ); 
```

当我尝试使用数据表下载中提供的[实时 dom 排序示例](http://datatables.net/release-datatables/examples/plug-ins/dom_sort.html)时，当我输入与选项值不同的文本时，分页和排序似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:34:49.507

根据@mg1075 的建议解决，但我在这里详细说明！

由于我遇到了一些问题，我认为可能是我将一些选定值的文本留空。为了减轻这种情况，我检查了文本是否为空，如果是这种情况，则检查 aData.push("") 。

我检查值是否为空的方式是这样的：

```
if($.trim($("#" + $(this).attr('id') + " option:selected").text())!=""){} 
```

这也是我将数据推送到 aData 的方式（修剪除外，但我没关系，因为用修剪打印出来仍然无法识别所有文本（见下文）。

```
aData.push($("#" + $(this).attr('id') + " option:selected").text()) 
```

现在这个奇怪的东西我不明白；修剪后的文本不为空的唯一一次是“问题”一词是选定的文本。当它是“事件”或其他任何东西时，它被认为是空的。**请如果有人可以有任何理论，那是为什么？**

所以@mg1075 实际上是正确的，我应该使用 aData.push( $(":selected", this).text() ); 反而。但是首先当我尝试它时，我在检查它是否为空时没有使用它，而只是用于推送数据。现在我只使用 aData.push( $.trim($(":selected", this).text())); 要添加数据，我不检查它是否为空，因为它无论如何都可以工作。

# html - 包装器下的两个 div 遵循包装器 div 的 margin-top 值，它不应该

> ID：12061696
> 
> 赞同：0
> 
> 时间：2012-08-21T19:27:33.250
> 
> 标签：html, css

所以我现在正在编写我的网站，我正在使用两个 div 在背景中创建一些渐变，其中 div#bg1 是灰色的，而 div#bg2 是深灰色的。但是当我添加包装器 div 时，bg1 和 bg2 仍然遵循包装器的顶部对齐，但它不应该。bg1 和 bg2 应该留在顶部。

**继承人的html：**

```
<div id="bg1"> </div>
<div id="bg2"> </div>
    <div id="wrapper"></div> 
```

**和样式表：**

```
div#wrapper {
  background-color: #FFFFFF;
  width: 800px;
  height: 1000px;
  margin-left:auto;
  margin-right:auto;
  margin-top: 30px;
  position: relative;
  z-index:3;
}

div#bg1 {
  width: 100%;
   margin:0px;
   padding:0px;
  height: 200px;
  background-color: #ccc;
  z-index: 2;
  position: absolute;
  box-shadow: inset 0px 10px 60px 0px rgba(0, 0, 0, 0.6);
}

div#bg2 {
  width: 100%;
   margin:0px;
   padding:0px;
  height: 100px;
  background-color: #444444;
  z-index: 2;
  position: absolute;
  box-shadow: inset 0px 10px 60px 0px rgba(0, 0, 0, 0.7);
} 
```

我目前在我的网站上有代码：http: [//andreassvarholt.com/test/test3/](http://andreassvarholt.com/test/test3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:32:44.137

您将两个 BG div 设置为绝对位置。

要将它们强制到顶部，您需要定义“顶部”CSS 属性。

```
 div#bg1 {
    top: 0;
  }

  div#bg2 {
    top: 0;
  } 
```

此外，我必须指出您的实现不优雅。只需制作一个 1 像素 x 200 像素的图像，作为背景图像平铺在身体上。将 div 堆叠在 div 之上只是为了一个简单的背景效果是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:33:41.393

使用 div 来创建背景渐变有点奇怪。为什么不直接使用在线提供的众多免费 css3 渐变生成器之一。自由而轻松。

祝你好运
-布赖恩

# javascript - 将画布 imageData 中的像素更改为 hsl(60, 100%, 50%)

> ID：12061697
> 
> 赞同：5
> 
> 时间：2012-08-21T19:27:36.683
> 
> 标签：javascript, html5-canvas

我想将 an 的像素更改`HTML5 canvas`为一个`hsl`值。它可以是`hsl`用户选择的任何值。

我可以得到画布imageData`var imageData = canvas.getImageData(0, 0, 200, 200);`

但是该`imageData.data`数组包含`rgba`. 实际上数组中的每个值都是一个字节，所以 -

`data[0] = r, data[1] = b, data[2] = g, data[3] = a, data[4] = r, data[5] = b, data[6] = g, data[7] = a`等等

有没有`api`可以用来操作 imageData 的？一个`api`可以抽象原始数据以便 -`data[0] = rgba, data[1] = rgba`等等？

这可能有这样的方法 -`data[0].setValueHSL(60, 100%, 50%);`

如果此 api 不存在，是否有可以创建/表示 hsl 值并将该值转换为 rgb 的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-11-28T22:48:36.153

我不确定您是否仍在寻找答案，因为这是很久以前提出的问题。但我试图做同样的事情并遇到了[为什么这个 Javascript RGB 到 HSL 代码不起作用的答案？](https://stackoverflow.com/questions/2348597/why-doesnt-this-javascript-rgb-to-hsl-code-work)，这应该可以解决问题：

```
function rgbToHsl(r, g, b) {
    r /= 255, g /= 255, b /= 255;

    var max = Math.max(r, g, b);
    var min = Math.min(r, g, b);
    var h, s, l = (max + min) / 2;

    if (max == min) {
        h = s = 0; // achromatic
    } else {
        var d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch(max) {
            case r: h = (g - b) / d + (g < b ? 6 : 0); break;
            case g: h = (b - r) / d + 2; break;
            case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
    }

    return 'hsl(' + Math.floor(h * 360) + ',' + Math.floor(s * 100) + '%,' + Math.floor(l * 100) + '%)';

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T16:14:33.040

你可以写一个像这样简单的

```
parseImageData = function(imageData) {
    var newImageData = [];
    for ( var i = imageData - 1; i>0; i-4) {
        newImageData.push([ imageData[i],
                            imageData[i-1],
                            imageData[i-2],
                            imageData[i-3] ]);
    }
    return newImageData;
} 
```

那么如果你想把它转换回来

```
parseNewImageData = function ( newImageData ) {
    var imageData = [];
    for ( var i = newImageData - 1; i>=0; --i) {
        imageData.push( imageData[i][0] );
        imageData.push( imageData[i][1] );
        imageData.push( imageData[i][2] );
        imageData.push( imageData[i][3] );
    }
    return imageData;
} 
```

超级简单，你可以让它专门做你需要做的事情！

我希望这有帮助！

# javascript - 多次将数组传递给函数

> ID：12061698
> 
> 赞同：0
> 
> 时间：2012-08-21T19:27:37.913
> 
> 标签：javascript

我正在学习 javascript，我试图弄清楚为什么我的下面的函数不能按预期工作。请参阅 2 个代码示例中的说明：

```
// First time I call the shoplist function I pass [1] in the argument. Results are as I expect:

var shopitems = [];

function shoplist(ids) {
    alert("ids passed to shoplist function: " + ids); // 1
    alert("current ids in shopitems var: " + shopitems); // (empty)
    shopitems.push(ids);
    alert("ids in shopitems after pushing: " + shopitems); // 1
    }

// Second time I call the shoplist functions I pass [1, 2] in the argument. Results are not what I would expect:

function shoplist(ids) {
    alert("ids passed to shoplist function: " + ids); // 1, 2
    alert("current ids in shopitems var: " + shopitems); // 1, 2  <--- Why is there 1, 2 and not only 1?
    shopitems.push(ids);
    alert("ids in shopitems after pushing: " + shopitems); // 1, 2, 1, 2 
```

**编辑：**这是完整的代码（警告：可能很混乱）：[http ://dpaste.org/wXMy5/](http://dpaste.org/wXMy5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:30:54.197

如果您在调用`shoplist()`. 因为 javascript 通过引用传递数组，并且只有一个引用进入`shopitems`数组，所以当您在将 ids 数组传递给第二次调用之前修改 ids 数组时`shoplist()`，您也无意中进行了修改`shopitems[0]`。如果您`shoplist()`第一次和第二次调用它的每个参数都是完全独立的数组，则不会出现此问题，但如果第二次调用只是传递了对第一个数组的修改，则会出现此问题。

快速说明是这样的：

```
// this will not have the problem because each call to shoplist
// is passing a completely separate array
var list = [1];
shoplist(list);
list = [1,2];      // create new array
shoplist(list);    // shoplist is [[1], [1,2]]

// this will have the problem because they are the same array
var list = [1];
shoplist(list);
list.push(2);     // modify first array
shoplist(list);   // shoplist is [[1,2], [1,2]] and both array elements are actually the same array 
```

更详细的解释：`.push(ids)`将任何内容`ids`作为新项目添加到`shopitems`数组的末尾。因此，每次调用 shoplist 时，您都会在 shopitems 末尾获得一个新商品。但是，由于您要添加的项目是一个数组，它会添加对该数组的引用，而不是该数组的副本。如果您随后更改了该数组，则 shopitems 数组条目将指向该数组的更改版本。

你可以在这段代码中看到：

```
var x = [];
var list = [];
x.push(1);       // contains contains [1]
list.push(x);    // list is [[1]]
x.push(2);       // x is [1,2]
list.push(x);    // list is [[1,2], [1,2]]  (contains two references to x) 
```

在此代码示例中， list 将包含两个元素，每个元素将指向`x`其 contains的同一个实时版本`[1,2]`。

这是因为默认情况下，javascript 会传递数组和对象之类的引用。当您将数组元素推送到容器数组中时，它不会将该变量的静态副本放入数组中。它放置了一个指向原始变量的指针。如果您随后更改原始变量，则该更改也会反映在数组中。

要将第二个条目与第一个条目分开，您需要有意识地制作第一个数组的副本并将该副本推送到容器数组中，或者您需要从头开始创建一个新数组并将其推送到容器数组中。

例如，以下是在容器数组中创建两个独立元素的几种方法：

```
var x = [];
var list = [];
x.push(1);       // contains contains [1]
list.push(x);    // list is [[1]]
x = [];          // set x to a new array (the old version of x is still in list)
x.push(1);       // x is [1]
x.push(2);       // x is [1,2]
list.push(x);    // list is [[1], [1,2]]  (contains two separate items) 
```

或者，复制一份`x`：

```
var x = [];
var list = [];
x.push(1);       // contains contains [1]
list.push(x);    // list is [[1]]
x = x.slice(0);  // make a copy of x, the old version of x is still in list
x.push(1);       // x is [1]
x.push(2);       // x is [1,2]
list.push(x);    // list is [[1], [1,2]]  (contains two separate items) 
```

这里要记住的重要一点是，在 javascript 中，对象赋值或数组赋值不会复制。它只是分配一个指向原始数据结构的指针。如果您更改原始数据结构，这将反映在您所做的任何分配中。

如果您是副本，则必须显式制作新数组或显式制作副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:34:23.510

我跑了这段代码...

```
var shopitems = [];

shoplist([1]);
shoplist([1,2]);

function shoplist(ids) {
    WScript.Echo("ids passed to shoplist function: " + ids); // 1
    WScript.Echo("current ids in shopitems var: " + shopitems); // (empty)
    shopitems.push(ids);
    WScript.Echo("ids in shopitems after pushing: " + shopitems); // 1
    } 
```

并得到了这个输出。

```
ids passed to shoplist function: 1
current ids in shopitems var:
ids in shopitems after pushing: 1
ids passed to shoplist function: 1,2
current ids in shopitems var: 1
ids in shopitems after pushing: 1,1,2 
```

在我看来它工作得很好。

# php - 更新时插入。复合键

> ID：12061704
> 
> 赞同：0
> 
> 时间：2012-08-21T19:27:56.167
> 
> 标签：php, mysql, insert

我对[这个](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)MySQL 语句有疑问。

我从[这篇文章中得到了这个](https://stackoverflow.com/questions/1952922/how-to-insert-a-record-or-update-if-it-already-exists)

但是，当我有这样的表时，我不确定如何构造查询。

```
 TableA
     --------
     id ==> Auto Increment field
     question_id
     form_id
     member_id
     event_id
     admin_id 
     desc
     is_cand_field
     c_field_id 
```

在这方面，`question_id, form_id, memmber_id, event_id, admin_id`可以相同。`desc, is_cand_field, c_field_id`可以换。插入时，我想检查此组合是否存在。如果存在，我想更新最后 3 个字段。如果没有，我想插入一条记录。

上面提到的查询是否可能。从页面上看不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:42:49.027

1.  在这些字段的组合上添加唯一键：

    ```
    ALTER TABLE `tablea` ADD UNIQUE INDEX `compound_key` (`question_id`, `form_id`, `member_id`, `event_id`, `admin_id`); 
    ```

2.  插入值并添加更新部分：

    ```
    INSERT INTO tablea (`question_id`, `form_id`, `member_id`, `event_id`, `admin_id`, `desc`, `is_cand_field`, `c_field_id`)
    VALUES (1, 2, 3, 4, 5, 1, 0, 1)
    ON DUPLICATE KEY UPDATE `desc` = VALUES(`desc`), is_cand_field = VALUES(`is_cand_field`), c_field_id = VALUES(`c_field_id`) 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:35:04.567

`ON DUPLICATE KEY UPDATE`您可以在该部分中添加多行。

```
INSERT INTO TableA (form_id, member_id, event_id, admin_id, desc, is_cand_field, c_field_id)
VALUES (2, 3, 4, 5, 'b', 0, 1)
ON DUPLICATE KEY UPDATE desc='a', is_cand_field=1, c_field_id=2 
```

# javascript - 向下滑动垂直菜单而不从子菜单中推动水平

> ID：12061705
> 
> 赞同：0
> 
> 时间：2012-08-21T19:28:18.757
> 
> 标签：javascript, css, drop-down-menu, menu

我有一个菜单列表，主标题向左浮动：

![主菜单](../Images/4273b10f3f06572897d470a81f58bc20.png)

当带有子菜单的菜单项处于悬停状态时，子菜单会下拉，但如果菜单比主标题宽（“商店”和“关于”之间的间距 - 正如我想的那样），则会将菜单向右推：

![子菜单](../Images/6c93b28a4cb1d9c2eb81ad83499e5181.png)

我试图让子菜单保持其高度（在页面上向下推其下方的内容），但不要根据其宽度将项目向右推。

使用`position: absolute`只是忽略子菜单打开时的高度。

希望有一些我想念的东西。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:45:22.710

我认为可以（仅？）通过 javascript 将内容向下推送。这是[更新的小提琴](http://jsfiddle.net/35dEr/4/)及其来源：

JS：

```
$(document).ready(function(){
    $("li.drop").hover(function(){
        $(this).addClass("hover");
        $('#nav').css('height', $(this).children('ul:first').height()+30+'px');
    }, function(){
        $(this).removeClass("hover");
        $('#nav').css('height', '');
    });
}); 
```

CSS：

```
#nav > li {
    position:relative;
    display:inline;
    margin:0px 15px;
    padding:0;
}

#nav > li ul {
    display: none;
    position:absolute;
    top:100%;
    left:0;
    min-width:200px;
}
#nav > li.hover ul {
    display: block;
}

#content {
    height: 50px;
    width: 100%;
    background: grey;
}

#nav ul {
    list-style-type: none;
    padding:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:40:34.970

尝试将子菜单的宽度设置为父菜单的宽度，然后设置：

```
text-overflow: inherit;
overflow: visible; 
```

在子菜单上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:08:49.653

我会动态定位子菜单并将其位置设置为绝对。您必须获取菜单按钮的左侧位置和高度，然后将左侧子菜单及其顶部设置为其父级的高度。不要忘记使用 offset() 来获取左侧位置，以防菜单嵌入到页面上的另一个容器中。

# ajax - 在Struts2中使用ajax上传文件时获取文件名

> ID：12061707
> 
> 赞同：0
> 
> 时间：2012-08-21T19:28:27.537
> 
> 标签：ajax, struts2, apache-commons-fileupload

我正在尝试在 struts2 框架 webapp 中使用 ajax 进行文件上传。我在动作映射中使用“fileupload”拦截器，我在动作中获取文件内容，但不是上传的文件名，即

```
private File file; // + its setters & getters methods.
private String fileName; // + its setter & getters methods.

System.Out.println(file.getName()); //prints some .tmp file 
```

**文件名**变量为空。

在进行 ajax 调用以获取上传文件的 FileName 时，我是否必须指定任何文件详细信息？

- 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:24:21.200

应该是这样的

如果您页面上的“名称”属性是“xxx”

```
private File xxx;
private String xxxContentType;
private String xxxFileName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:37:24.253

[文件上传拦截器](http://struts.apache.org/2.3.4.1/struts2-core/apidocs/org/apache/struts2/interceptor/FileUploadInterceptor.html)

您应该适当地提供 setter 方法。仔细遵循命名约定。参考上面的链接

[Struts2 文件上传示例](http://www.mkyong.com/struts2/struts-2-file-upload-example/)

# css - 背景图像周围的内容随着滚动条而变化

> ID：12061708
> 
> 赞同：0
> 
> 时间：2012-08-21T19:28:31.863
> 
> 标签：css, drupal

我正在尝试使用围绕内容区域的背景（两侧都有一点阴影），如下所示：http: [//i.imgur.com/5X5D7.jpg](http://i.imgur.com/5X5D7.jpg)

我在中间留出空间用于 980 像素的固定宽度布局。

我的身体 css 就是这样的：

```
body {
  margin: 0;
  padding: 0;
  background: url(../images/bg.jpg) center repeat-y;

} 
```

在没有内容的主页上看起来不错。但是当我进入一个输入了几段的测试页面并且滚动条出现在我的浏览器中时，出现了一条将背景和内容区域分开的轻微白线。

我尝试将背景图像阴影移动一个像素，但它在主页上不起作用..

我还可以在 CSS 中做些什么来防止这种情况发生吗？

我应该说我正在使用 zen 主题在 drupal 中尝试这个，并没有真正改变任何其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:55:40.310

为您制作了一个 jsfiddle：http: [//jsfiddle.net/Ja2SR/](http://jsfiddle.net/Ja2SR/)

从本质上讲，我认为您正在查看浏览器试图将 1px 一分为二，这是它永远做不到的。不过，我真的不明白为什么这是一个问题 - 这条线出现在内容区域内，在小提琴中你可以看到红色旁边是白色的，但如果你的内容区域也是白色的，并且两边都有填充，我认为确实如此......然后再多1个像素应该不会太糟糕。如果我假设错误，请纠正我！

# c++ - 如何正确扩展接口？

> ID：12061719
> 
> 赞同：5
> 
> 时间：2012-08-21T19:29:28.817
> 
> 标签：c++

我有基于另一个接口：

```
class IDrawable {
public:
   virtual ~IDrawable();
};

class IExtendedDrawable: public IDrawable {
public:
   virtual ~IExtendedDrawable();
};

class DrawableImplementation: public IDrawable {
public:
   virtual ~DrawableImplementation();
};

class ExtendedDrawableImplementation: 
   public DrawableImplementation, public IExtendedDrawable
{
public:
   virtual ~ExtendedDrawableImplementation();
}; 
```

然后`ExtendedDrawableImplementation`= `DrawableImplementation (+IDrawable)`+`IExtendedDrawable (+IDrawable)`

`IDrawable`同一班有两次是正确的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T19:47:31.743

我会怀疑你确实需要/想要多重继承。我认为它仅在有限的情况下是好的，接口就是其中之一（甚至 Java 也允许这样做）。

如上所述，使用虚拟继承，并确保`virtual`在接口`class`es 中只使用纯方法。

```
class IDrawable {
public:
   virtual ~IDrawable();
   virtual void doSomething() = 0;
};

class IExtendedDrawable: virtual public IDrawable {
public:
   virtual ~IExtendedDrawable();
   virtual void doSomethingElse() = 0;
};

class DrawableImplementation: virtual public IDrawable {
public:
   virtual ~DrawableImplementation();
   virtual void doSomething() {/*code here*/}
};

class ExtendedDrawableImplementation: 
   public DrawableImplementation, public IExtendedDrawable
{
public:
   virtual ~ExtendedDrawableImplementation();
   virtual void doSomething() {/*code here*/}
   virtual void doSomethingElse() {/*code here*/}
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T19:32:36.833

这在很大程度上取决于类内部的逻辑，但是 IMO 你最好使用组合来代替：

```
class ExtendedDrawableImplementation : public IExtendedDrawable
{
   IDrawable* drawableImplementation; //points to a DrawableImplementation
public:
   virtual ~ExtendedDrawableImplementation();
}; 
```

多重继承很少是答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T19:51:58.150

只是`ExtendedDrawableImplementation`从`IExtendedDrawable`. 这样它无论如何都会有两个接口。我不明白你为什么要从这里得到两者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T19:33:47.230

我不是 C++ 程序员，但据我记得，这是正确的。你没有 IDrawable 两次，但你有多个路径。见[http://en.wikipedia.org/wiki/Diamond_problem#The_diamond_problem](http://en.wikipedia.org/wiki/Diamond_problem#The_diamond_problem)

# html - 防止 HTML Tidy 剥离 PHP

> ID：12061721
> 
> 赞同：2
> 
> 时间：2012-08-21T19:29:34.857
> 
> 标签：html, htmltidy

我已经浏览了文档，但没有看到如何防止 tidy 剥离我的 PHP。我的配置如下：

```
anchor-as-name: no
doctype: omit
drop-empty-paras: no
fix-uri: no
literal-attributes: yes
merge-divs: no
merge-spans: no
numeric-entities: no
preserve-entities: yes
quote-ampersand: no
quote-marks: no
show-body-only: yes
indent: auto
indent-spaces: 4
tab-size: 4
wrap: 0
wrap-asp: no
wrap-jste: no
wrap-php: no
wrap-sections: no
tidy-mark: no
new-blocklevel-tags: article,aside,command,canvas,dialog,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary,meter 
new-inline-tags: video,audio,canvas,ruby,rt,rp,time,meter,progress,datalist,keygen,mark,output,source,wbr
force-output: yes
quiet: yes
show-warnings: yes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T22:58:00.727

似乎没有办法像这样在 php 中使用 tidy。（即使从 php 5.5 开始）在尝试了很多变体之后，包括应该是有效的 SGML 之类的东西，`<script language="php">`并且`<!-- <?php echo 1; ?> !-->` 它似乎主动剥离了 php 标签。

php 中的 tidy 库最常被用作输出过滤器；在发送到浏览器之前获取页面的所有输出并修复它的东西。最基本的示例就在[php 手册中。](http://www.php.net/manual/en/tidy.examples.basic.php)

```
<?php
//start the output buffer to capture all page output.
ob_start();
?>
<html>a html document
     <div><?php echo 'do your thing here' ?></div>
</html>
<?php
//get the contents of the output buffer.
$html = ob_get_clean();

// configure tidy
$config = array(
           'indent'         => true,
           'output-xhtml'   => true,
           'wrap'           => 200);
//tidy the html
$tidy = new tidy;
$tidy->parseString($html, $config, 'utf8');
$tidy->cleanRepair();
// Output the clean html.
echo $tidy; 
```

# postgresql - 分组中的postgres concat

> ID：12061729
> 
> 赞同：0
> 
> 时间：2012-08-21T19:30:32.027
> 
> 标签：postgresql, group-by, concat

关于 Postgresql 选择的一个问题。这可以正常工作：

```
SELECT 
  name,SUM(cash)
FROM 
  costumers
GROUP BY (name) 
```

但是如何在 GROUP BY 子句中连接两个（或更多）字段？这是我尝试过的：

```
SELECT 
  name,SUM(cash)
FROM 
  costumers
GROUP BY (name || ' ' || nickname) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:33:07.330

这将起作用，除了您需要选择分组依据的表达式：

```
SELECT 
    (name || ' ' || nickname) AS name_and_nickname,
    SUM(cash) AS total_cash
FROM costumers
GROUP BY (name || ' ' || nickname) 
```

另一种选择是通过用逗号分隔两个字段来分组：

```
SELECT 
    name, nickname, SUM(cash) AS total_cash
FROM costumers
GROUP BY name, nickname 
```

请注意，这两者*并不*完全等价。特别是这两行将与第一个版本在同一个组中结束，而在第二个版本中则在不同的组中：

```
name    | nickname  | cash
--------+-----------+----
foo     | bar baz   | 10
foo bar | baz       | 20 
```

第二个选项可能就是你的意思。

# javascript - 为计数器添加滑动效果

> ID：12061733
> 
> 赞同：0
> 
> 时间：2012-08-21T19:30:38.550
> 
> 标签：javascript, jquery

我目前有一个 javascript 计数器，它看起来像这样的输出。

```
out=
                "<div id='days'><span>"+ days +"</span></div>" + 
                "<div id='hours'><span>" + hours +"</span><</div>" + 
                "<div id='mins'><span>" + mins +"</span></div>" + 
                "<div id='secs'><span>" + secs +"</span></div>" ;
                document.getElementById('countbox').innerHTML=out;

                setTimeout("GetCount()", 1000); 
```

我想知道将一些jQuery用于效果的方法是什么，例如`.fadeOut()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:31:29.343

包装`countbox`一个 jQuery 对象并调用任何动画函数：

```
$("#countbox").fadeOut(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:40:11.123

要为数字设置动画，您可以在 jQuery 中包装`countbox`的孩子并调用动画，类似于 Joao 所说的：

`$('#countbox').children().fadeout();`

并将其放入您的`GetCount()`方法中。

编辑：

要获取单个数字（和更正的动画方法）：

`$('#countbox div').children().fadeOut();`

编辑#2：

我添加了这个以获得我认为是您想要的效果：

`var x = setInterval(function(){$('#countbox div').children().fadeOut()}, 1000);`

每个数字出现后都会淡出。

# html - 如何移动对象

> ID：12061745
> 
> 赞同：-5
> 
> 时间：2012-08-21T19:31:26.457
> 
> 标签：html

***Adobe Flash程序，给出坐标行走坐标的效果，其他格式可以学html5代码。***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:35:00.060

**[jQuery](http://api.jquery.com/animate/)**

```
$("div").animate() 
```

**Canvas**
MDN 教程[https://developer.mozilla.org/en-US/docs/Canvas_tutorial](https://developer.mozilla.org/en-US/docs/Canvas_tutorial)

**SVG** 拉斐尔[http://raphaeljs.com](http://raphaeljs.com)
d3.js [http://d3js.org](http://d3js.org)

# .net - 在 WinRT 中使用 COM 的性能如何？

> ID：12061751
> 
> 赞同：2
> 
> 时间：2012-08-21T19:31:38.703
> 
> 标签：.net, performance, com, windows-runtime, com-interop

我现在明白 WinRT 是基于多个实现（例如 Win32）的 API，但由于 COM 和新的 ECMA 335/CLI 元数据，它以“面向对象”的方式提供。（请参阅[Windows 8 运行时（WinRT/Windows 应用商店应用程序/Windows 10 通用应用程序）与 Silverlight 和 WPF 相比如何？](https://stackoverflow.com/questions/7416826/how-does-the-new-windows-8-runtime-winrt-compare-to-silverlight-and-wpf)）

作为 .Net 开发人员，由于性能不佳，我总是学会尽可能避免 P/Invoke、COM 或每个“外部/互操作”调用。（如果我们可以为本地库调用使用 C++/CLI 包装器，那就更好了）

*   COM WinRT API 的性能是否比传统 COM 更好？
*   如果是这样，是由于 ECMA 335 元数据还是新的实现？
*   我们有什么“隐藏”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:16:34.830

COM（或 WinRT，基本上是 COM）的性能问题将归结为异常“健谈”（即在很短的时间内进行大量调用）或数据编组。

如果您一直调用它，任何需要少量时间的方法调用都会损害性能。因此，我假设 WinRT 调用不如在同一个 .NET 程序集中从一种方法调用另一种方法快（我假设 JIT 会将其优化掉或将其优化为微不足道）。如果无法进行相同级别的优化，那么您会注意到方法调用 - 如果您过度使用它。例如，人们过去常说 C++ 中的虚方法调用会损害性能，仅仅是因为它们需要一个无法像普通函数调用那样优化的 vtable 间接。

虽然最大的性能损失是数据，但调用外部系统通常需要将您的数据转换为其他系统可以理解的格式 - 这比您意识到的更大的性能损失。即使您不必编组它，您也经常需要复制数据 - 因此，您必须复制整个数据，而不是传递 4 个字节的引用指针，或者将其固定，以便仍然可以从其他系统访问它在您的呼叫环境之外。这可能会以较小的方式损害性能，但仍然不如直接调用快。

我想说在这两种情况下，调用 WinRT 方法不会对你造成太大伤害，.NET 和 WinRT 之间有一层（类似于旧的自动生成的 COM 包装器），但显然要轻得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:04:56.723

*   *COM WinRT API 的性能是否比传统 COM 更好？*

WinRT 对象并没有什么神奇之处可以让它比等效的传统 COM 对象执行得更快。他们都是COM。不过，更快的是上市时间——WinRT 作为开发人员更容易处理。

*   *我们有什么“隐藏”？*

你已经自己回答了。

# python - python列出与谷歌解决方案不同的方式

> ID：12061754
> 
> 赞同：0
> 
> 时间：2012-08-21T19:31:51.200
> 
> 标签：python

我正在研究来自 Google 的 python 练习，但我无法弄清楚为什么我没有得到列表问题的正确答案。我看到了解决方案，他们的做法与我不同，但我认为我这样做的方式也应该有效。

```
# B. front_x
# Given a list of strings, return a list with the strings
# in sorted order, except group all the strings that begin with 'x' first.
# e.g. ['mix', 'xyz', 'apple', 'xanadu', 'aardvark'] yields
# ['xanadu', 'xyz', 'aardvark', 'apple', 'mix']
# Hint: this can be done by making 2 lists and sorting each of them
# before combining them.
def front_x(words):
  # +++your code here+++
  list = []
  xlist = []
  for word in words:
    list.append(word)
  list.sort()
  for s in list:
    if s.startswith('x'):
      xlist.append(s)
      list.remove(s)
  return xlist+list 
```

电话是：

```
front_x(['bbb', 'ccc', 'axx', 'xzz', 'xaa']) 
```

我得到： ['xaa', 'axx', 'bbb', 'ccc', 'xzz'] 当答案应该是： ['xaa', 'xzz', 'axx', 'b bb', 'ccc ']

我不明白为什么我的解决方案不起作用

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T19:34:01.777

您不应该在迭代列表时修改它。[请`for`](http://docs.python.org/reference/compound_stmts.html#the-for-statement)参阅[声明文档](http://docs.python.org/reference/compound_stmts.html#the-for-statement)。

```
 for s in list:
    if s.startswith('x'):
      xlist.append(s)
      list.remove(s)    # this line causes the bug 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:40:59.307

试试这个：

```
def front_x(words):
    lst = []
    xlst = []
    for word in words:
        if word.startswith('x'):
            xlst.append(word)
        else:
            lst.append(word)
    return sorted(xlst)+sorted(lst)

>>> front_x(['bbb', 'ccc', 'axx', 'xzz', 'xaa'])
['xaa', 'xzz', 'axx', 'bbb', 'ccc'] 
```

# objective-c - 块和 ARC - 发布版本复制或崩溃（由优化级别引起）

> ID：12061756
> 
> 赞同：10
> 
> 时间：2012-08-21T19:31:55.007
> 
> 标签：objective-c, ios, automatic-ref-counting, objective-c-blocks

我正在使用 Xcode 4.3.3 并为 iOS 5.0+ 进行开发。在开发 ARC iOS 应用程序时，我开始使用块作为异步操作的回调机制。该应用程序在模拟器和设备上运行良好。

然后我第一次运行探查器，它几乎马上就开始在我身上崩溃——特别是在尝试调用第一个回调块时出现 EXC_BAD_ACCESS。

经过一番调查，很明显行为上的差异是因为探查器默认以“发布模式”运行 - 特别是优化级别设置为“最快，最小 [-Os]”而不是“无 [-O0] ”。

例如，以下代码（针对此问题进行了简化）在尝试执行 callbackBlock 时会崩溃：

```
- (void) setCallbackBlock:(void (^)(NSString *input))block
{
    callbackBlock = block;
}

- (void) invokeCallbackWithInput:(NSString *)input
{
    if (callbackBlock) {
        callbackBlock(input);
    }
} 
```

调试它，调用 setCallbackBlock 并将优化级别设置为“None”，传入的块将是一个`NSStackBlock`，callbackBlock 将成为一个`NSMallocBlock`。

但是，在优化级别“最快、最小”的情况下，它仍然是`NSStackBlock`.

更改 setter 代码以使用`[block copy]`修复了崩溃问题（基于[iOS 5 块仅使用 Release Build 崩溃](https://stackoverflow.com/questions/10263110/ios-5-blocks-crash-only-with-release-build)）。

但是，另一个相关问题表明，ARC 不需要这样做 - 块变量被复制到 ARC 中的堆中 -[为什么 Objective-C 块在不将其复制到堆的情况下仍然可以工作？](https://stackoverflow.com/questions/11433943/why-does-objective-c-block-still-work-without-copying-it-to-the-heap)

所以我的问题是：这里发生了什么，为什么？（另外，这两个答案怎么可能是正确的......？）

**编辑**：为了澄清 callbackBlock 是如何被声明的——就在我的@implementation 上面这些方法是这样的：

```
@interface MyClass ()
{
    void (^callbackBlock)(NSString *input);
}

@end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T20:06:50.480

> 所以我的问题是：这里发生了什么，为什么？（另外，这两个答案怎么可能是正确的......？）

我实际上认为[另一个问题](https://stackoverflow.com/questions/11433943/why-does-objective-c-block-still-work-without-copying-it-to-the-heap)的答案是错误的，因为它没有回答关于 ARC 中块的特定问题。问题是关于将基于堆栈的块从一个函数/方法传递到另一个。答案是不同的东西，即在块中捕获 __block 变量。那是一个不同的问题。

您的问题的答案在[过渡到 ARC 发行说明的常见问题解答中：](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

> 当您在 ARC 模式下将块向上传递到堆栈时，块“正常工作”，例如在返回中。您不必再调用 Block Copy。在将堆栈“向下”传递到 arrayWithObjects: 和其他执行保留的方法时，您仍然需要使用 [^{} copy]。

因此，它的工作方式是，当您传递一个块（在您的情况下是在堆栈上分配的块文字）时，编译器在初始化该调用的参数时**不会复制该块。**如果需要，被调用的函数或方法有责任复制该块本身。

当您从函数或方法**返回块时，ARC 会自动复制块。**在这种情况下，编译器知道它**必须**为您复制到堆中，因此它会这样做。

因此，即使使用 ARC，您的 setter 也应该进行块复制。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T21:13:07.560

这是对 Firoze 答案的长评论。

文档[自动引用计数”第 7.5 节](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#misc.blocks)指出：

> 除了作为初始化`__strong`参数变量或读取`__weak`变量的一部分完成的保留之外，每当这些语义要求保留块指针类型的值时，它具有 a 的效果`Block_copy`。当优化器发现结果仅用作调用的参数时，它可能会删除此类副本。

这是我所看到的行为。

因此，如果`callbackBlock`是一个强实例变量，那么 ARC 应该*复制*任何堆栈分配的块传入`block`。即 Debug 版本是正确的，Release 版本是编译器错误。

如果这是正确的，那么您发现了一个编译器错误并应该报告它。无论哪种方式，报告它都不错，它应该产生一个明确的答案。

# ios - 在ios上将东向和北向转换为纬度和经度

> ID：12061759
> 
> 赞同：0
> 
> 时间：2012-08-21T19:32:01.660
> 
> 标签：ios, latitude-longitude

我有一个东向和北向数据集，我需要将它们转换为纬度和经度值。有谁知道如何在 iOS 上做到这一点。我曾尝试使用[convert eastings 和 northings](http://www.movable-type.co.uk/scripts/latlong-gridref.html) javascript 函数，但我在 do while 语句中陷入了无限循环。

如果有人对此事有任何想法或经验，请分享，我将不胜感激。

非常感谢

朱尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:15:29.970

你需要一个投影库，[proj4](http://trac.osgeo.org/proj/)是一个占主导地位的库。这是在 iOS 中使用它的有用描述： [https ://gis.stackexchange.com/questions/6658/how-to-integrate-proj4-into-an-ios-iphone-project](https://gis.stackexchange.com/questions/6658/how-to-integrate-proj4-into-an-ios-iphone-project)

您需要知道源坐标系是什么，例如 UTM、NAD、墨卡托等。

# javascript - JSON 对象不想初始化

> ID：12061760
> 
> 赞同：0
> 
> 时间：2012-08-21T19:32:03.123
> 
> 标签：javascript, json

您好我正在尝试使用从表单中获取的一些值创建一个 JSON 对象。出于某种原因，代码不起作用。我对输入的所有名称进行了三次检查，因此您可以假设它们是正确的。我确实将问题隔离到我实例化我的 JSON 对象的那一行：

```
 function createJSON()
    {
        if (document.forms["formIn"]["gender"][0].checked == true)
        {
            var g= "male";
        }
        else if (document.forms["formIn"]["gender"][1].checked == true)
        {
            var g= "male";
        }
        var jsonobj={"name":document.forms["formIn"]["name"].value, "surname":document.forms["formIn"]["surname"].value, "email":document.forms["formIn"]["email"], "dob":document.forms["formIn"]["dob"].value, "password":document.forms["formIn"]["password"].value, "cpassword":document.forms["formIn"]["confirm_password"].value, "gender":g}
        var jsonstr=JSON.stringify(jsonobj);
        alert(jsonstr);
        var newjobj=JSON.parse(jsonstr);
        alert(newjobj.email);
    } 
```

感谢大家的帮助。我只是在我的电子邮件之后没有 .value 。还清除了许多其他愚蠢的错误，但我的第二个警报仍然只显示 [object] [object]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:54:36.557

请试试这个：

```
function createJSON()
{
    var g = "unknown",
        jsonobj,
        jsonstr,
        newjobj;

    if (document.forms["formIn"]["gender"][0].checked == true)
    {
        g = "male";
    }
    else if (document.forms["formIn"]["gender"][1].checked == true)
    {
        g = "female";
    }
    jsonobj={"name":document.forms["formIn"]["name"].value, "surname":document.forms["formIn"]["surname"].value, "email":document.forms["formIn"]["email"], "dob":document.forms["formIn"]["dob"].value, "password":document.forms["formIn"]["password"].value, "cpassword":document.forms["formIn"]["confirm_password"].value, "gender":g}
    jsonstr=JSON.stringify(jsonobj);
    alert(jsonstr);
    newjobj=JSON.parse(jsonstr);
    alert(newjobj.email);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:40:09.760

`;`您在实例化 JSON 对象的末尾缺少 a 。不过其他一切似乎都还好。

# grails - Grails g：每个标签

> ID：12061761
> 
> 赞同：1
> 
> 时间：2012-08-21T19:32:03.787
> 
> 标签：grails

在 grails 中，我试图为该授权用户打印一个名为 Child 的域的每个实例。

我正在使用以下内容：

```
 <g:each var="child" in="${Child}">
    <p>Name: ${child.firstname}</p>
    <p>Surname: ${child.lastname}</p>
 </g:each> 
```

每个用户可以有几个孩子（孩子），我希望它列出当前登录用户的孩子。我正在使用 spring 源安全核心插件进行登录等。

这是我的例外：

> 类：groovy.lang.MissingPropertyException 消息：没有这样的属性：类的名字：com.fyp.timeline.Child 可能的解决方案：名字，姓氏

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T19:40:26.170

```
<g:each var="child" in="${user.children}">
   <p>Name: ${child.firstname}</p>
   <p>Surname: ${child.lastname}</p>
</g:each> 
```

*用户*是登录用户的一个实例，其中

```
User{
    static hasMany=[children:Child]
} 
```

# c# - 在 VS 2010 C# .NET Windows 窗体中重现 Microsoft 注册表编辑器“编辑二进制值”窗口

> ID：12061763
> 
> 赞同：1
> 
> 时间：2012-08-21T19:32:06.223
> 
> 标签：c#, visual-studio-2010, richtextbox, multiple-columns, regedit

我正在尝试从 Microsoft 内置注册表编辑器中重现一个窗口。该窗口是在单击值时从上下文菜单中选择“修改二进制数据...”时打开的窗口。

目标是使用 Windows 窗体在我的 .NET C# 应用程序中创建一个**相同的（！）窗口。**

问题是显示在包含二进制数据的窗口中的文本框。我曾尝试使用 RichTextBox，但它并不像看起来那么简单，尤其是在编辑数据和此文本框的行为时。

所以我有两个问题：

1.  如何使用 Windows 窗体在 C# 中实现相同的文本框？也许你知道一些其他的方法来重现这个文本框？
2.  我还需要这个文本框中使用的字体名称，我找不到它:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:44:11.897

我可以想到两种方法来解决这个问题。第一个是 DataGrid，经过精心设计，具有透明的网格线和列之间的精确边距，过滤器仅强制使用十六进制数字。所有这些都设置在一个用于 ASCII 显示的富文本框旁边，您的代码会同步它们之间的选择。

或者，您可以将 DataGrid 替换为 TextBoxes 的集合，再次为不可见边框设置样式，当用户添加更多数据时自动将新的文本框添加到集合中。

总而言之，这似乎是一项艰巨的工作，尤其是在 WinForms 中 - WPF 可能会使这更容易一些，尤其是样式，但仍然需要大量工作。

关于该控件的名称 - 我尝试使用 Spy++ 来嗅探它，它似乎已注册为一个名为“HEX”的窗口类，但我不确定这是否真的能让你有所收获：

![在此处输入图像描述](../Images/5b1d4e2acaf59687fe0dc8bd18faf807.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:53:28.223

这是一个包含 Winforms 十六进制编辑器控件的开源项目，看起来至少非常相似：

[http://sourceforge.net/projects/hexbox/](http://sourceforge.net/projects/hexbox/)

我想您可以根据自己的要求进行相应的修改。但请注意，该控件的源代码约为 6000 行代码（包括十几个实用程序类）。它直接继承自“Control”并使用 GDI+ 显示所有文本（因此无需修改 DataGrid 或 RichTextBox）。

# java - 用于将字段从基元演变为联合的 Avro 模式解析

> ID：12061765
> 
> 赞同：6
> 
> 时间：2012-08-21T19:32:14.467
> 
> 标签：java, avro

我正在使用 Avro 1.7.0 使用其[Java 的通用表示 API](http://avro.apache.org/docs/current/api/java/index.html)，并且在处理我们当前的模式演变案例时遇到了问题。我们在这里处理的场景是通过将字段更改为与该原始类型的联合来使原始类型字段成为可选的`null`。

我将使用一个简单的例子。基本上，我们的模式是：

*   初始：具有一个类型字段的记录`int`
*   第二个版本：相同的记录，相同的字段名称，但类型现在是和的`null`并集`int`

根据 Avro 规范的[架构解析章节](http://avro.apache.org/docs/current/spec.html#Schema+Resolution)，这种情况的解析应该是：

> **如果读者是一个联合，但作者不是**
> 读者联合中与作者模式匹配的第一个模式将针对它递归解析。如果没有匹配，则发出错误信号。

我的解释是，我们应该正确地解析使用初始模式序列化的数据，因为`int`它是读者模式中联合的一部分。

但是，当运行使用版本 2 读回使用版本 1 序列化的记录的测试时，我得到

**`org.apache.avro.AvroTypeException: Attempt to process a int when a union was expected.`**

这是一个测试，正好显示了这一点：

```
@Test
public void testReadingUnionFromValueWrittenAsPrimitive() throws Exception {
    Schema writerSchema = new Schema.Parser().parse("{\n" +
            "    \"type\":\"record\",\n" +
            "    \"name\":\"NeighborComparisons\",\n" +
            "    \"fields\": [\n" +
            "      {\"name\": \"test\",\n" +
            "      \"type\": \"int\" }]} ");

    Schema readersSchema = new Schema.Parser().parse(" {\n" +
            "    \"type\":\"record\",\n" +
            "    \"name\":\"NeighborComparisons\",\n" +
            "    \"fields\": [ {\n" +
            "      \"name\": \"test\",\n" +
            "      \"type\": [\"null\", \"int\"],\n" +
            "      \"default\": null } ]  }");

    // Writing a record using the initial schema with the 
    // test field defined as an int
    GenericData.Record record = new GenericData.Record(writerSchema);
    record.put("test", Integer.valueOf(10));        
    ByteArrayOutputStream output = new ByteArrayOutputStream();
    JsonEncoder jsonEncoder = EncoderFactory.get().
       jsonEncoder(writerSchema, output);
    GenericDatumWriter<GenericData.Record> writer = new 
       GenericDatumWriter<GenericData.Record>(writerSchema);
    writer.write(record, jsonEncoder);
    jsonEncoder.flush();
    output.flush();

    System.out.println(output.toString());

    // We try reading it back using the second schema 
    // version where the test field is defined as a union of null and int
    JsonDecoder jsonDecoder = DecoderFactory.get().
        jsonDecoder(readersSchema, output.toString());
    GenericDatumReader<GenericData.Record> reader =
            new GenericDatumReader<GenericData.Record>(writerSchema, 
                readersSchema);
    GenericData.Record read = reader.read(null, jsonDecoder);

    // We should be able to assert that the value is 10 but it
    // fails on reading the record before getting here
    assertEquals(10, read.get("test"));
} 
```

我想知道我的期望是否正确（这应该成功解决吧？）或者我没有正确使用 avro 来处理这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T21:51:30.033

将原始模式迁移到 null 和原始联合的期望是正确的。

上面代码的问题在于如何创建解码器。解码器需要作者的模式而不是读者的模式。

而不是这样做：

```
JsonDecoder jsonDecoder = DecoderFactory.get().
    jsonDecoder(readersSchema, output.toString()); 
```

它应该是这样的：

```
JsonDecoder jsonDecoder = DecoderFactory.get().
    jsonDecoder(writerSchema, output.toString()); 
```

[归功于 Doug Cutting 在 avro 的用户邮件列表中的答案： http](http://mail-archives.apache.org/mod_mbox/avro-user/201208.mbox/browser) ://mail-archives.apache.org/mod_mbox/avro-user/201208.mbox/browser

# spring - CXF - com.ctc.wstx.exc.WstxUnexpectedCharException：非法字符（（CTRL-CHAR，代码 5））

> ID：12061766
> 
> 赞同：4
> 
> 时间：2012-08-21T19:32:19.470
> 
> 标签：spring, cxf, illegal-characters

我在互联网上发现问题是soap请求包含unicode char for ,,ctrl + v"，这是Xml中的非法字符。我不知道这是如何进入String的，但我想在服务器端简单地删除它。

有人可以给我点如何解决这个问题吗？我发现了这个片段：

```
 XMLOutputFactory f = new WstxOutputFactory();
  f.setProperty(WstxOutputProperties.P_OUTPUT_INVALID_CHAR_HANDLER,
    new InvalidCharHandler.ReplacingHandler(' '));
  XMLStreamWriter sw = f.createXMLStreamWriter(...); 
```

有人可以告诉我如何配置 Spring 以使用此处理程序构建 WstxOutputFactory 吗？- **InvalidCharHandler.ReplaceingHandler(' ')**。谢谢你的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T13:12:04.227

解决方案非常简单：

```
 <jaxws:endpoint id="kservice"  
                    implementor="#kostrounService"
                    address="/call_kostroun" >
                    <jaxws:properties>
                           <entry key="javax.xml.stream.XMLOutputFactory"            valueref="xmlOutputFactory" />
                     </jaxws:properties>       
    </jaxws:endpoint> 
 <bean id="invalidCharHandler"   class="com.ctc.wstx.api.InvalidCharHandler$ReplacingHandler">
         <constructor-arg value=" "/>
   </bean>

   <bean id="xmlOutputFactory" class="com.ctc.wstx.stax.WstxOutputFactory"/>

   <bean class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
        <property name="targetObject">
            <ref local="xmlOutputFactory" />
        </property>
        <property name="targetMethod">
            <value>setProperty</value>
        </property>
        <property name="arguments">
            <list>
                 <util:constant static-field="com.ctc.wstx.api.WstxOutputProperties.P_OUTPUT_INVALID_CHAR_HANDLER"/>
                 <ref bean="invalidCharHandler" />
            </list>
        </property>
    </bean> 
```

此配置片段从肥皂消息中删除非法字符，然后应用程序运行;-)

# c# - Visual Studio 单元测试 Assert.AreEqual 失败，预期值和实际值相同

> ID：12061774
> 
> 赞同：7
> 
> 时间：2012-08-21T19:32:43.727
> 
> 标签：c#, .net, visual-studio-2010, unit-testing

在单元测试方面，我是一个完全的新手，所以如果这完全是无知，请原谅我。但即使我为预期值和实际值提供完全相同的值，我也无法让这种方法通过单元测试。当我设置断点并单步执行时，我已经确认预期变量和实际变量都是包含两项 blah 和 blah 的字符串数组。但是每次测试仍然失败，说明“Assert.AreEqual failed. Expected: System.String[] Actual:System.String[]”

```
namespace TestProject1

{
 public class Testing
 {
    public string[] PMDate(string lastPm)
    {
        if (string.IsNullOrEmpty(lastPm))
            return new []{"blah", "blah"};
        string[] results = lastPm.Split(new[] {" "}, StringSplitOptions.None);

        if (results.Length < 2)
            return new[] {"blah", "blah"};

        return results;
    }
 }
[TestClass()]
public class UnitTest1
{
    [TestMethod()]
    public void PmDateTest()
    {
        Testing test = new Testing();
        string[] expected = test.PMDate("01/01/1900");
        string[] actual = test.PMDate("01/01/1900");
        Assert.AreEqual(expected, actual);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-21T19:35:34.750

您的测试将使用`object.Equals`，它不会被数组覆盖。换句话说，这将打印错误：

```
var x = new[] { 0 };
var y = new[] { 0 };
Console.WriteLine(x.Equals(y)); 
```

您应该[`CollectionAssert`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.collectionassert.aspx)改为使用集合：

```
CollectionAssert.AreEqual(expected, actual); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:36:51.083

这是失败的，因为字符串数组是两个不同的对象，即使它们包含相同的值，它们也是不同的对象。您可以通过在运行时检查 expected.GetHashcode() 和 actual.GetHashCode() 来简单地验证这一点，您将看到哈希码不同

# vba - 做逻辑错了

> ID：12061782
> 
> 赞同：2
> 
> 时间：2012-08-21T19:33:13.337
> 
> 标签：vba

谁能看到这个逻辑中的问题？

我似乎陷入了无限循环，即使找到正确的 acqCode，代码也只会转到下一页。

```
 flagFound = 0

 Do 
        If StrComp(temp1, acqCode) = 0 then 
            Print #iOutFileNum, "It's 1st!!!! :)" 
            flagFound = 1
        Elseif StrComp(temp2, acqCode) = 0 then
            Print #iOutFileNum, "It's 2nd!!!! :)" 
            flagFound = 1
        Elseif StrComp(temp3, acqCode) = 0 then
            Print #iOutFileNum, "It's 3rd!!!! :)" 
            flagFound = 1
        Elseif StrComp(temp4, acqCode) = 0 then
            Print #iOutFileNum, "It's 4th!!!! :)"
            flagFound = 1
        Elseif StrComp(temp5, acqCode) = 0 then
            Print #iOutFileNum, "It's 5th!!!! :)"
            flagFound = 1
        Elseif StrComp(temp6, acqCode) = 0 then
            Print #iOutFileNum, "It's 6th!!!! :)"
            flagFound = 1
        Else
            If flagFound = 0 then 
                'go to next page
            End If
        End If
    Loop Until flagFound = 1'to end Do While 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:34:33.690

检查逻辑，我找不到任何问题。我会看看的结果`strcomp`。

`strcomp("A ","A")`返回 1，即使字符串在屏幕上看起来相同。也许 a`trim()`会有所帮助。

除非您需要以不区分大小写的方式进行比较（例如`"ABC" = "abc"`），否则直接字符串比较可能更具可读性。该`if..elseif..else`构造也可以重写为`select case`

```
flagFound = 0
Do
    Select Case acqcode
        Case temp1
            Debug.Print "It's 1st!!!! :)"
            flagFound = 1
        Case temp2
            Debug.Print "It's 2nd!!!! :)"
            flagFound = 1
        Case temp3
            Debug.Print "It's 3rd!!!! :)"
            flagFound = 1
        Case temp4
            Debug.Print "It's 4th!!!! :)"
            flagFound = 1
        Case temp5
            Debug.Print "It's 5th!!!! :)"
            flagFound = 1
        Case temp6
            Debug.Print "It's 6th!!!! :)"
            flagFound = 1
        Case Else
            Debug.Print "next page"
    End Select
Loop Until flagFound = 1 'to end Do While 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T20:02:37.923

尝试这个

```
flagFound = 0

Do 
    If StrComp(temp1, acqCode) = 0 then 
        Print #iOutFileNum, "It's 1st!!!! :)" 
        flagFound = 1
    Elseif StrComp(temp2, acqCode) = 0 then
        Print #iOutFileNum, "It's 2nd!!!! :)" 
        flagFound = 1
    Elseif StrComp(temp3, acqCode) = 0 then
        Print #iOutFileNum, "It's 3rd!!!! :)" 
        flagFound = 1
    Elseif StrComp(temp4, acqCode) = 0 then
        Print #iOutFileNum, "It's 4th!!!! :)"
        flagFound = 1
    Elseif StrComp(temp5, acqCode) = 0 then
        Print #iOutFileNum, "It's 5th!!!! :)"
        flagFound = 1
    Elseif StrComp(temp6, acqCode) = 0 then
        Print #iOutFileNum, "It's 6th!!!! :)"
        flagFound = 1
    End If

       If flagFound = 0 then 
            'go to next page
       End If

Loop Until flagFound = 1'to end Do While 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T00:19:49.487

我还用我自己的假数据检查了你的逻辑（我使用 Excel 进行测试，但如果你使用的是另一个应用程序，基本原理仍然相同）。

使用您的确切逻辑，我能够在 6 个条件中的任何一个条件下使循环终止于我想要的任何页面。所以这意味着你的一般逻辑是合理的。

由于您没有显示如何`temp*`填充变量或显示源数据，我可以得出的最可能的结论是您没有有效条件。

由于您的陈述，您有一个无限循环，因此只有另一种可能性被忽略。你的循环是否有可能实际上不是无限的（如果你会用完页面或出现溢出或我们的内存错误）？如果循环不是无限的，那么这可能意味着问题可能出在您的`Print`陈述中。尝试用 Debug.Print 替换它们，不要写入外部文件。如果它运行正确，那么这可能是你的问题。如果它仍然表现相同，那么这意味着您的问题必须是您的 String 比较永远不会正确的事实。

但是，如果它被锁定或似乎处于无限循环中，则您的`Print`语句中的文件可能试图写入也从未打开过。`Print`您没有显示它，但我相信您需要在尝试使用该语句写入文件之前执行以下操作：

```
fileNum = FreeFile ' next file number
Open file For Append As #fileNum  'or Output instead of append for a new file 
                                  ' (overwriting existing file) 
```

# html - Wordpress wp_nav_menu 仅在使用自定义菜单时才断开链接布局

> ID：12061784
> 
> 赞同：0
> 
> 时间：2012-08-21T19:33:16.477
> 
> 标签：html, css, wordpress, menu

我希望有一个简单的CSS修复。问题很简单，我正在制作一个自定义 wordpress 主题并且我正在使用一些自定义菜单，代码工作正常，但是我制作了一个带有分隔符的内联菜单 css 样式（由左边框：1px 等制成，请参阅 css。）并且有一个显示错误。

当它是默认的 wordpress 菜单（wordpress 页面列表）时，菜单显示正常，但是当我使用 wordpress 管理面板中的菜单编辑器插入自定义链接时，分隔符被某种空间推动！

请参阅[jsFiddle 说明](http://jsfiddle.net/gableroux/DkLbr/)生成的 html的问题

函数.php

```
register_nav_menus(
    array( 'header-menu' => __( 'Header Menu' ), 'footer-menu' => __( 'Footer Menu' ))
); 
```

页脚.php

```
<div id="last-footer">
<div id="last-footer-container" class="container_12">
    <div id="last-footer-menu" class="grid_12" align="center">
        <?php 
            wp_nav_menu( array( 'theme_location' => 'footer-menu' ) );
        ?>  
    </div>  
    <div class="clear"></div>
          <!-- other stuff here (widgets) -->
</div><!-- #last-footer-container end --> 
```

style.css（使用 lesscss 生成：P）

```
#last-footer {
  background:#222;
  color:white;
}
#last-footer-container {
  padding-bottom:10px;
  padding-top:10px;
}
#last-footer-container a { color:#a62e0d; }
#last-footer-container a:hover {
  text-decoration:none;
  color:#602000;
  text-shadow:1px 1px 1px black;
}
#last-footer-container span { float:left; }

#last-footer-menu ul {
  margin:0;
  padding:0;
}
#last-footer-menu ul li {
  border-left:1px solid #121212;
  border-right:1px solid #323232;
  display:inline;
  padding-left:10px;
  padding-right:10px;
  margin:0;
}
#last-footer-menu ul li:first-child { border-left:none; }
#last-footer-menu ul li:last-child { border-right:none; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:05:16.920

我想我会看看这个，结果它也让我发疯了。该问题与选择器`display: inline`上的有关`#last-footer-menu ul li`。

我最终只是浮动每个链接，然后使用这种古老的技术创建一个居中的导航菜单 -[水平居中无序列表](http://matthewjamestaylor.com/blog/beautiful-css-centered-menus-no-hacks-full-cross-browser-support)

这是 JS Fiddle -> [http://jsfiddle.net/rabmcnab/zvCsC/1/](http://jsfiddle.net/rabmcnab/zvCsC/1/)

我希望看到一些更清洁和更简洁的解决方案，我们将看看是否有人权衡使用更少的 CSS 更改来实现的替代方案。

# tfs - 手动更新文件

> ID：12061786
> 
> 赞同：0
> 
> 时间：2012-08-21T19:33:31.793
> 
> 标签：tfs

设想：

将解决方案签入 TFS。对解决方案的脱机/断开连接/未绑定副本进行更改，该副本成为“最新”版本。我想用这个断开连接的副本的文件更新 repo。

如何让 TFS 查看所有文件并确定哪些文件已更改，以便仅检查其中的文件？

如果这是 SVN，我只需将文件放在现有工作副本之上，它就可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:09:41.037

您是否有另一个绑定到 TFS 的解决方案副本？如果没有，您将需要一个。你有两个选择：

1.  通过右键单击解决方案节点并单击“脱机”，使解决方案“脱机”。然后，您可以将更改后的解决方案复制到绑定解决方案的顶部。再次加载解决方案时，再次右键单击解决方案并选择联机。这将扫描磁盘并确定发生了什么变化。
2.  您的其他选择是在绑定解决方案上递归运行“tf edit”，将更改后的解决方案复制到绑定解决方案之上，然后运行“tfpt uu”。“uu”代表撤消未更改，它将撤消对相同文件的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:25:16.727

我想不出任何优雅的方式，但您最好的选择是了解哪些文件已离线更改或添加，并将它们连接到 TFS 版本，同时删除旧的 TFS 文件。

为此，只需右键单击所有旧文件并删除它们或将它们从项目中排除，然后将新文件移动到它们的物理文件夹中并用更新版本替换它们。如果添加了文件，则将它们添加到正确的文件夹中。最后，通过单击“显示所有文件”确保在解决方案资源管理器中可以查看所有文件。最后，右键单击您更改的文件并为每个文件选择包含在项目中。

这样，您将只替换已更改的文件，而不必将整个解决方案签入 TFS，这使得您非常不清楚签入时更改了哪些文件。

# php - 在 PHP 中列出数据库中的文件和子文件夹

> ID：12061789
> 
> 赞同：0
> 
> 时间：2012-08-21T19:33:43.617
> 
> 标签：php

初学者：我似乎无法理解它的逻辑。已搜索但似乎从实际目录中列出了文件和文件夹，即。（开放目录）。

我的问题是：

我试图解决（在 PHP 中）如何从存储在数据库中的路径中列出文件和子文件夹。（没有对文件或目录的任何访问权限，因此仅来自路径名）

例如数据库显示：

```
main/home/television.jpg
main/home/sofa.jpg
main/home/bedroom/bed.jpg
main/home/bedroom/lamp.jpg 
```

因此，如果我指定`main/home`- 它显示：`television.jpg`，`sofa.jpg`以及子文件夹的名称：`bedroom`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:39:08.560

```
scanFolder('main/home');

function scanFolder($dir) {

    foreach (scandir($dir) as $file) {

        if (!in_array($file, array('.', '..'))) {

            if (is_dir($file)) {

                scanFolder($dir . '/' . $file);
            }
            else {

                echo $dir . '/' . $file . "\n";
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:38:01.167

如果文件名是目录，您可能希望检查每次迭代。如果是，请打开它并读取其内容并输出它们。递归函数在这种情况下效果最好。

[http://php.net/manual/en/function.is-dir.php](http://php.net/manual/en/function.is-dir.php)

# java - 带有缓冲区策略的 OS X 上的 JFrame 禁用圆角

> ID：12061796
> 
> 赞同：5
> 
> 时间：2012-08-21T19:34:24.313
> 
> 标签：java, macos, swing, graphics, graphics2d

我正在尝试在 OS X 中创建一个简单的 JFrame 窗口并在其上渲染一个简单的黑色方块，就像使用 Graphics2d 一样：

```
public Start() { 
    running = true;
    window = new JFrame("Finest Hour");
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    window.setPreferredSize(new Dimension(500, 500));
    window.setSize(window.getPreferredSize());
    FullScreenUtilities.setWindowCanFullScreen(window, true);
    window.setIgnoreRepaint(true);
    window.setVisible(true);
    window.createBufferStrategy(2);
    strategy = window.getBufferStrategy();
}

public static void main(String[] args) {
    Start s = new Start();
    s.loop();
}

public void loop() {
    Random random = new Random();
    while(running) {
        Graphics2D g = (Graphics2D) strategy.getDrawGraphics();
        g.setColor(Color.black);
        g.fillRect(20, 20, 40, 40);
        strategy.show();
    }
} 
```

但是，当我使用 strategy.show(); 时，窗口底部似乎没有圆角；：

![与 strategy.show](../Images/e21f73da96f96a19e42456f628918c0f.png)

渲染不带缓冲策略，即：Graphics2D = (Graphics2D) window.getGraphics(); 产生一个圆角的窗口：

![在此处输入图像描述](../Images/2408aaa2abb627bb7d3b80349c1a32f2.png)

我知道这是一个非常小的问题，但它仍然很烦人。有任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:14:12.973

对我来说很好。

![在此处输入图像描述](../Images/6347018584c1ca8cbf6f04fffd52f892.png)

```
public class TestMacFrame extends JFrame {

    public TestMacFrame() throws HeadlessException {            
        super("Testing");
        setSize(200, 200);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);            
        setLayout(new BorderLayout());
        add(new PaintPane());            
        setVisible(true);
    }

    protected class PaintPane extends JPanel {

        @Override
        protected void paintComponent(Graphics g) {    
            super.paintComponent(g);                
            int width = getWidth() - 1;
            int height = getHeight() - 1;                
            g.setColor(Color.BLACK);                
            int blockWidth = width / 2;
            int blockHeight = height / 2;                
            int x = (width - blockWidth) / 2;
            int y = (height - blockHeight) / 2;                
            g.fillRect(x, y, blockWidth, blockHeight);                
        }            
    }

    public static void main(String[] args) {    
        new TestMacFrame();            
    }
} 
```

现在，我不知道你想做什么，但我可以告诉你：

```
public void loop() {
    Random random = new Random();
    while(running) {
        Graphics2D g = (Graphics2D) strategy.getDrawGraphics();
        g.setColor(Color.black);
        g.fillRect(20, 20, 40, 40);
        strategy.show();
    }
} 
```

是个坏主意。首先，正如 SoboLAN 指出的那样，您正在尝试在[Event Dispatching Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)之外更新 UI 组件。摆动组件`Thread`不安全。

其次，这个循环最终会占用你的 CPU 周期，使你的应用程序和整个系统都无法使用。

**更新动画**

来，试试这个。这是一个非常基本的例子；）

```
public class TestMacFrame extends JFrame {

    private float angel = 0;
    private Timer timer;

    public TestMacFrame() throws HeadlessException {
        super("Testing");
        setSize(200, 200);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLayout(new BorderLayout());
        add(new PaintPane());
        setVisible(true);

        timer = new Timer(25, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                angel += 1;
                repaint();
            }
        });

        timer.setRepeats(true);
        timer.setCoalesce(true);
        timer.setInitialDelay(0);
        timer.start();
    }

    protected class PaintPane extends JPanel {

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D) g.create();

            int width = getWidth() - 1;
            int height = getHeight() - 1;

            g.setColor(Color.BLACK);

            int blockWidth = width / 2;
            int blockHeight = height / 2;

            int x = (width - blockWidth) / 2;
            int y = (height - blockHeight) / 2;

            g2d.setTransform(AffineTransform.getRotateInstance(Math.toRadians(angel), width / 2, height / 2));
            g2d.fillRect(x, y, blockWidth, blockHeight);
            g2d.dispose();

        }
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        new TestMacFrame();
    }
} 
```

# actionscript-3 - as3 flashdevelop中的类路径

> ID：12061808
> 
> 赞同：0
> 
> 时间：2012-08-21T19:35:18.593
> 
> 标签：actionscript-3, flashdevelop

我是 AS3 的新手。我使用 FlashDevelop 4。我没有 Adob​​e Flash，只有 FD（纯 AS3） 我的类路径有问题。我搜索了数据库，但没有发现任何可以帮助我的东西。所以问题如下。

我在 C:\AS App\Testing 中有项目“Testing”，文件为 Main.as。我还有文件夹 C:\AS App\W_T。在此文件夹中是文件 write_text.as。文件 Main.as 如下所示：

```
package
{
import flash.display.*;
import flash.text.TextField;
import flash.events.*;
import W_T.write_text;
public class Main extends Sprite
{
    var t:TextField=new TextField();

    public function Main():void
    {
            stage.addChild(t);
            stage.addEventListener(MouseEvent.CLICK, write);
    }

    public function write(me:MouseEvent):void
    {
        var wt:W_T.write_text = new W_T.write_text();
            t.x = 100;
            t.y = 100;          
            t.text = wt.output();
    }
}
} 
```

文件 write_text.as 如下所示：

```
package W_T
{
import flash.display.*;
import flash.text.TextField;
import flash.events.*;
import W_T.*;

public class write_text
{
    public function write_text()
    {
    }

    public function output():String 
    {
        var txt:String;

        txt = "From function !";
        return(txt);
    }
}
} 
```

我在全局类路径中制定了适当的规范。但我收到以下错误：

错误：找不到类型或不是编译时常量：write_text。var wt:W_T.write_text = new W_T.write_text();

错误：调用可能未定义的方法 write_text。var wt:W_T.write_text = new W_T.write_text();

找不到定义 W_T:write_text。导入 W_T.write_text；

你能帮我找出我做错了什么吗？

谢谢你。

EB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:16:18.767

问题是编译器没有找到您的 write_text.as 文件。默认情况下，它将在此处查看：

**C:\AS App\Testing\W_T\write_text.as**

尝试相应地调整，看看它是否有效。当您声明`package W_T { }`flash 时，将在名为 W_T 的子文件夹中查找与公共类同名的文件。

当您只是简单地`package { }`没有名称声明时，它将在您的类库路径的根目录中查找，如果您的 main.as 文件所在的位置似乎是一个名为“测试”的文件夹，那么它似乎是一个文件夹。

如果您想为您的类文件使用一个公共文件夹（不嵌套在单个项目文件夹中），您可以通过以下方式告诉 flash development 在哪里找到它们：项目 -> 属性，然后是类路径选项卡。默认情况下，flash develop 只会在与项目相关的文件夹中查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:46:12.820

问题是你没有告诉编译器（flex？）在哪里可以找到文件。当您将它添加为类路径时，您只会告诉 flash development 在哪里找到文件，而不是编译器。

首先，您必须检查如何编译，其次是如何为您的解决方案更改和添加类路径。

我通常通过 ant 脚本和 build.xml 文件执行此操作，不幸的是，我不记得“纯 as3”项目在编译方面是如何工作的

# c - gcc -W 警告标志

> ID：12061809
> 
> 赞同：12
> 
> 时间：2012-08-21T19:35:33.077
> 
> 标签：c, gcc

我正在学习 C，在一些示例中我发现“使用 gcc -W 启用警告”，

但在这里阅读文档：http: [//gcc.gnu.org/onlinedocs/gcc-4.6.3/gcc/Warning-Options.html](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/gcc/Warning-Options.html)

我找不到 -W 做什么。

有人可以解释吗？

我说的是W而不是w。

问候，

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-21T19:36:03.493

`-W`现在已被`-Wextra`新`gcc`版本弃用。

从`gcc`手册页：

```
 -Wextra
       This enables some extra warning flags that are not enabled by -Wall.
       (This option used to be called -W.  The older name is still supported, but
       the newer name is more descriptive.) 
```

# javascript - 从 Document.ready 中的包执行 javascript

> ID：12061811
> 
> 赞同：0
> 
> 时间：2012-08-21T19:35:39.717
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, asp.net-optimization

我使用 MVC4 默认模板。

我添加了一个脚本：`MyScript.js`在`/Scripts/MyApp/` 一个函数中：

```
function Testing()
{
    alert('test');
} 
```

在 global.asax 中：

```
 bundles.Add(new ScriptBundle("~/bundles/myapp").Include(
    "~/Scripts/MyApp/MyScript.js")); 
```

我想调用这个方法`/Views/Home/Index.cshml`

我尝试了下面的代码但没有成功：

```
<script type="text/javascript" lang="javascript">
    $(document).ready(function () {
        Testing();
    });
</script>    

@Scripts.Render("~/bundles/myapp") 
```

当我查看源代码时，链接就`MyScript.js`在那里，我可以导航到它（转到源代码）

但是没有执行`Testing()`中的方法 。`$(document).ready`

**更新1**

```
<script type="text/javascript" lang="javascript">

    $(document).ready(function () {
        alert("test");
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:38:00.080

尝试在捆绑包包含后放置内联脚本。标签上的`lang`属性也`script`被弃用：

```
@Scripts.Render("~/bundles/myapp")

<script type="text/javascript">
    $(document).ready(function () {
        Testing();
    });
</script> 
```

* * *

更新：

好的，我想你忘了包括 jquery，所以`$`没有定义函数:-)

因此，如果您想使用捆绑包进行操作：

```
bundles.Add(new ScriptBundle("~/bundles/myapp").Include(
    "~/Scripts/jquery-{version}.js", "~/Scripts/MyApp/MyScript.js")
); 
```

或者如果您不想使用捆绑包：

```
<script type="text/javascript" src="~/scripts/jquery-1.7.1.js"></script>
<script type="text/javascript" src="~/scripts/MyScript.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        Testing();
    });
</script> 
```

# ios - 当我的应用位于通知中心时，我如何才能看到 UIRemoteNotificationTypeNone？

> ID：12061813
> 
> 赞同：2
> 
> 时间：2012-08-21T19:36:00.747
> 
> 标签：ios, notifications, uilocalnotification, nsnotificationcenter

我有一个使用 iOS 5.1.1 的用户报告我的应用程序不允许他设置通知，即使他已将其放在通知中心。他给我发了一张截图，上面显示他清楚地把它放在了通知中心。但是如果应用程序不允许他设置通知，那是因为这段代码返回了 notificationIssue == YES：

```
BOOL notificationIssue = NO;
UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];
if (types == UIRemoteNotificationTypeNone) notificationIssue = YES; 
```

当然，我无法访问他的设备，所以我自己无法进一步调查，但我想知道是否有人知道该应用程序如何清楚地显示在通知中心，并启用了徽章、声音和警报，并且仍然没有通过这个测试？

我无法重现这一点，而且我还没有从其他人那里听说过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:51:06.500

`enabledRemoteNotificationTypes`仅引用设置->通知中的“警报样式”部分。

如果您将其设置为“无”并保留所有内容，您仍将获得 a`UIRemoteNotificationTypeNone`而您的`notificationIssue`将是`YES`. 出于同样的原因，用户可以禁用通知并将“警报样式”设置为横幅，而您的`notificationIssue`将设置为`NO`.

这引出了一个真正的问题......我如何找到其余的信息？现在，你没有。Apple 没有给我们提供查询这些信息的 API。我个人的建议是将其[报告给 Apple](http://bugreport.apple.com)并请求 API。这就是我们让他们知道我们希望 API 访问这些信息的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T04:50:38.717

我也遇到过这种情况（即使应用程序位于通知中心并且具有“横幅”的“警报样式”，也会`[[UIApplication sharedApplication] enabledRemoteNotificationTypes]`返回）。`UIRemoteNotificationTypeNone`

我发现在通知中心将“警报样式”切换为“无”，然后再切换回“横幅”可以解决我的测试设备上的问题。

# javascript - 将 serializeArray() 自定义为不同的数组格式

> ID：12061816
> 
> 赞同：1
> 
> 时间：2012-08-21T19:36:06.473
> 
> 标签：javascript, jquery, serializearray

想知道我必须做些什么来转换我当前正在发送的数据（使用`serializeArray()`）

```
data[0][name]:title
data[0][value]:This is my sample title
data[1][name]:description
data[1][value]:This is an (optional) description but I'm filling it out as an example
data[2][name]:source
data[2][value]:http://www.cnn.com
data[3][name]:category
data[3][value]:animals 
```

改为这样发送：

```
data[title]:This is my sample title
data[description:This is an (optional) description but I'm filling it out as an example
data[source]:http://www.cnn.com
data[category]:animals 
```

代码：

```
$(function() {
    $('input[type="submit"]').click(function() {
        var $data = $('#js-serialize').serializeArray();
        console.log($data);
        $.post('/echo/json', {
            'data': $data
        }, function(data) {
            console.log(data);
        }, 'json');
        return false;

    });

});

<form id="js-serialize">
<input name="title" placeholder="title" />
<input name="description" placeholder="description" />
<input name="source" placeholder="source" />
<input name="category" placeholder="category"/>
<input type="submit" name="submit" />
</form>​ 
```

演示：

[http://jsfiddle.net/someprimetime/bnPwN/5/](http://jsfiddle.net/someprimetime/bnPwN/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:39:28.307

您似乎正在寻找对象表示而不是数组。

jQuery 不支持`serializeObject()`开箱即用之类的东西。[然而，这个插件](http://danheberden.com/jquery-plugin-serializeobject-2011-04-01/)似乎完全符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T13:42:36.877

未经测试，但：

```
function serializeObject(serializedArray){
    var serializedObj={};
    serializedArray.forEach(function(i){
       serializedObj[i.name]=i.value;       
    });
    return serializedObj;
} 
```

# c++ - 在 Qt 中将文件保存到网络

> ID：12061818
> 
> 赞同：2
> 
> 时间：2012-08-21T19:36:07.863
> 
> 标签：c++, qt, network-programming, save, qfile

我需要将文件保存到我公司的网络。这需要不使用文件对话框或任何东西编码到我的应用程序中。当我在不指定路径的情况下保存文件时，它会完全保存在我的应用程序所在的目录中，但是当我尝试这样做时，网络没有任何反应。这是我必须保存的。

```
QFile outfile;
outfile.setFileName("//DTPRIMARY/MyFile.htm");
outfile.open(QIODevice::WriteOnly);
QTextStream out(&outfile);
out << textEdit->toHtml();
out.flush();
outfile.close(); 
```

我实际上想将其保存在这里，`\\DTPRIMARY\Inetpub\wwwroot`但取出了其他文件夹，认为这可能是问题的一部分，但事实并非如此。而且我使用'/'而不是'\'，因为这就是一些地方所说的（我从来没有真正理解为什么文件路径必须使用'\'或'/'虽然它可能是错误的同上。）

有谁知道该怎么做/我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:41:04.543

UNC 路径应该可以正常工作，您可以使用本地文件对其进行测试，例如`"\\?\C:\MyFile.htm"`C 驱动器顶部名为 MyFile.htm 的文件

通常路径是`\\machine\share` 例如`\\dtprimaray\share\MyFile.htm`

使用“/”的原因是C语言使用\表示下一个字符是特殊的，所以\t是制表符，\n是换行符。DOS 被复制（抱歉*受到影响*）一个使用“/”作为文件分隔符的早期操作系统，Microsoft 不希望 DOS 看起来太像副本。从那以后，它一直是错误的来源。

你可以对 C 说下一个 \ 真的是 \ - 但是当你必须写到mean和to mean`\\`时很容易出错 - 所以 Windows 让你使用`\\\\``\\``\\``\``/`

刚刚在我的机器上测试过

```
QFile file("//machinename/downloads/MyFile.htm");
file.open(QIODevice::WriteOnly);
file.write("blah");
file.close(); 
```

# lua - Lua：字符串后的模式匹配？

> ID：12061819
> 
> 赞同：2
> 
> 时间：2012-08-21T19:36:16.383
> 
> 标签：lua, lua-patterns

例如，我有这种格式的任意行：

目录 C:\Program Files\abc\def\

或类似的东西。

启用日志

我希望能够从第一行中提取“C:\Program Files\ab\def\”部分。同样，我想在第二行中提取“开”。变量和它的值之间的空格是任意的。我会知道变量的名称，但我需要根据它提取值。

所以基本上，我想删除第一个单词和第一个单词后面的一些任意空格，并返回直到行尾的剩余内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:46:11.543

假设“单词”的意思是“一串没有空格的字符”，您可以这样做：

```
for line in ioFile:lines() do
  local variable, value = line:match("(%S+)%s+(.+)")
  ... --Do stuff with variable and value
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:32:30.063

Nicol Bolas 展示了一种替代`string.match`方案，这是另一种替代方案：

```
function splitOnFirstSpace(input)
    local space = input:find(' ') or (#input + 1)
    return input:sub(1, space-1), input:sub(space+1)
end 
```

用法：

```
local command, param = splitOnFirstSpace(line) 
```

如果没有给出参数 ( `splitOnFirstSpace('no-param-here')`)，`param`则为空字符串。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T19:57:31.770

我不相信 Lua 是用 Ruby 或 Perl 之类的 split() 函数打包的。

发现这家伙搭建了一个lua版本的Perl的split函数： http: [//lua-users.org/lists/lua-l/2011-02/msg01145.html](http://lua-users.org/lists/lua-l/2011-02/msg01145.html)

如果您可以保证参数之前只有 1 个单词，并且该单词不包含任何空格，则可以在该行中读取，在其上运行 split 函数，并使用返回数组的 1 索引值作为您想要的值。

您也可以错误检查并确保在预期目录中获得“C:\”，或检查以确保字符串 == 为“On”或“Off”。由于使用硬编码的索引值，我真的提倡你错误检查你的期望值。没有什么比假设值错误更糟糕的了。

如果检测到错误，请确保将其记录或打印到屏幕上，以便您了解它。

这可能会捕获可能输入的字符串不正确的错误。

一些简单的代码模拟了我建议你做的事情：

```
line = "directory C:\Program Files\abc\def/";

contents = line.split(" "); --Split using a space
directory = contents[2]; --Here is your directory

if(errorCheckDir(directory))
--Use directory
end 
```

编辑：响应 Lua 下面的评论，确实从 1 开始索引，而不是 0。此外，如果目录包含空格（可能）而不是简单地使用内容 [2]，我将遍历除索引之外的所有内容1，然后将目录拼凑在一起，确保在附加的每个索引之间添加所需的空间。

所以在上面的例子中，contents[2] 和 contents[3] 必须被缝合在一起，中间有一个空格来恢复正确的目录。

目录 = 内容[2].." "..内容[3]

这可以很容易地使用其中有一个循环并返回正确目录的函数来自动化：

```
function recoverDir(contents)
    directory = "";
    --Recover the directory
    for i=2, table.getn(contents) do
        directory = directory..contents[i].." ";
    end
    --strip extra space on the end
    dirEnd = string.len(directory);
    directory = string.sub(directory,1,dirEnd-1);
    return directory; --proper directory
end 
```

# php - 获取用户和服务器时间之间的时差？

> ID：12061822
> 
> 赞同：0
> 
> 时间：2012-08-21T19:36:31.140
> 
> 标签：php, javascript, mysql, time, timezone

我想要一个功能，用户可以设置他希望每天在 H:mm AM/PM 他的时间向他发送一些每日报告。

然后，我必须确定在用户指定时间时它将在服务器上的时间。例如，如果用户将 5:00 PM 作为他希望发送电子邮件的时间，而他当前是 12:00 PM，而在服务器上当前是 10:00 PM，我想确定它将在什么时间服务器在下午 5:00 为用户服务。

如何使用 PHP / Javascript 实现这一目标？

我正在考虑通过javascript生成当前用户时间的MySQL TIME字符串（例如hh：mm：ss），将其传递给服务器，该服务器将在mysql查询中使用此字符串并对其执行TimeDiff（）？或者有没有更好的方法？

注意：客户已指定必须使用用户的时钟时间，而不是他当前的时区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:45:07.887

在您网址末尾的 Ajax 查询中，我会执行以下操作：

```
var ts = Math.round((new Date()).getTime() / 1000);
var url= "http://mysite.com/?usertime="+ts; 
```

然后在服务器端你可以使用类似的东西

```
$EstimatedTimeDifference = time()-$_GET['usertime']; 
```

所以现在你得到了服务器时间和浏览器时间之间的时间差（以秒为单位）（粗略地，忽略脚本生成 time() 所花费的时间）。从那里开始，它应该相当容易。将其舍入并除以 3600 以获得小时数差异等。

这些信息足以让你继续前进吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:47:37.043

只需使用 UTC 时间并将苹果与苹果进行比较：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/UTC](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/UTC)

[http://php.net/manual/en/function.gmdate.php](http://php.net/manual/en/function.gmdate.php)

# css - 矩形上的文本会杀死矩形的悬停效果

> ID：12061824
> 
> 赞同：1
> 
> 时间：2012-08-21T19:36:41.750
> 
> 标签：css, svg, hover

我有几个具有悬停效果的 svg 矩形，当鼠标悬停在矩形上时，矩形的背景颜色会发生变化。悬停效果通过 css 设置：

```
.myclass:hover {
    fill: rgb(255,128,0);
} 
```

除此之外，文本放置在每个矩形上方。一对文本和矩形定义了一个组。

```
<g>
    <rect class="myclass" x="10" y="10" width="40" height="40" />
    <text x="30" y="40" font-family="Verdana" font-size="10" fill="blue">ESC</text>
</g> 
```

悬停效果很好，但前提是光标不在文本上方。如果它正好在文本上方，则悬停效果消失。

我怎么能解决这个问题？

这是一个截图：在左边你可以看到悬停效果（背景是橙色），在右边你可以看到如果光标碰到矩形上的文本，效果是如何消失的：

![比较](../Images/f866ff8d44365cca29d588036133ac57.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:25:57.080

您需要使文本具有 pointer-events="none" 以便悬停忽略它。

```
<g>
    <rect class="myclass" x="10" y="10" width="40" height="40" />
    <text x="30" y="40" font-family="Verdana" font-size="10" fill="blue" pointer-events="none">ESC</text>
</g> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:46:04.850

问题是悬停被分配给位于文本后面的元素。因此，当您将鼠标悬停在文本上时，从技术上讲，您不再接触背景。

我的建议是将类应用于父元素，并将悬停分配给它。

```
<g class="myclass">
    <rect x="10" y="10" width="40" height="40" />
    <text x="30" y="40" font-family="Verdana" font-size="10" fill="blue">ESC</text>
</g> 
```

现在你的 CSS 看起来像这样，以子“rect”元素为目标：

```
.myclass:hover rect {
    fill: rgb(255,128,0);
} 
```

# php - 尝试不同的 odbc connect 调用

> ID：12061825
> 
> 赞同：0
> 
> 时间：2012-08-21T19:36:43.413
> 
> 标签：php, odbc

我想尝试连接到我不一定知道确切密码的数据库（使用 odbc）。也就是说，我有几个不同的选择密码可能是什么，我希望我的代码找出哪个是正确的。

如何使用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:55:07.493

只需将调用包装`odbc_connect`在一个 foreach 循环中，尝试所有密码：

```
function my_odbc_connect($dsn, $user, array $passwords) {
    foreach ($passwords as $password) {
        $connection = odbc_connect($dsn, $user, $password);
        if (is_resource($connection)) {
            return $connection;
        }
    }
    return false;
} 
```

然后就做

```
$connection = my_odbc_connect('blah', 'user', array('foo', 'bar', 'baz')); 
```

# php - isset($_POST['读取按钮']) - 无法正常工作

> ID：12061831
> 
> 赞同：0
> 
> 时间：2012-08-21T19:36:54.147
> 
> 标签：php

我创建了一个表单，如果他们“有东西”，用户将在其中选择是。我在具有发布操作的表单中使用它，然后将值发送到 .php 文件。当我尝试使用它检查按钮时，`if (isset($_POST['agentsele']))`它不会回读。我里面有一些打印语句要测试，但它永远不会通过。我将输入字段从按钮变为复选框并尝试读取它 - 它有效。转回去之后就不行了。

这里是输入字段。

```
<input type="button"  value="Yes" name="agentsele" class="agentsele"/> 
```

检查方法。

```
if (isset($_POST['agentsele'])) {

                $emailaction = 1;//email agent and set status to - enrolled - agent emailed
                echo "agent selected";
                exit;
            } 
```

如果选择了按钮，我还有一些 JQuery 会使更多的输入框向下滑动。

感谢您的时间。

更新-------- 整个表格

```
<form name="theform" action="insert.php" method="post" >
                <div class="CheckBoxContainer">
            <input type="checkbox" value"On" name="only-thisform"/>
            <?php 
            $setError=$_GET['seterror'];

            if ($setError == 1){

                echo "<div class='errorMsg'> *Required</div>";
            }
             ?>
            <br>
            <br>

            <input type="checkbox"  value="On" name="approval" id="approval"/>
             <?php 
             $setError=$_GET['seterror'];
             if ($setError == 1){

                echo "<div class='errorMsg'> *Required</div>";
             }

             ?>
            </div><!------------------------------------END   .CheckBoxContainer ------------------------------------------->
            <br>
            <br>

<script type="text/javascript"
     src="http://code.jquery.com/jquery-latest.min.js">
</script>   
<!-- javascript on client-side -->

<div class="DropDownSelector">
<?php

$dropdown = "<select name='CompanyNames' id='CompanyNames' >";

$dropdown .= "\r\n<option  id ='' name ='' value='' class=''  ></option>";

$dropdown .= "\r\n<option  id ='other' name ='other' value='other' class='other'  >other</option>";

while($row =$FNresult->fetch()) {

  $dropdown .= "\r\n<option  id ='firstname' name ='first' value='{$row['CompanyNames']}'>{$row['CompanyNames']}</option>";
}

$dropdown .= "\r\n</select>";

echo $dropdown;
?>
    <div class="DropdownDiscription">Please select your insurance company.  Select other if you do not see it listed. </div>
</div> <!------------------------------------------END .DropDownSelector -------------------------------------------------------->
<script type="text/javascript">  

var dropdown = $('#CompanyNames');
//var test = $('#firstname');
//document.write(dropdown.val());

dropdown.bind('change', function(){

     if(dropdown.val() == "other"){
        $(".otherbox").slideDown(1000,function(){
           // $(this).css("border", "2px red inset")            
        });  
         $(".InputDiscriptionother").slideDown(1000,function(){
           // $(this).css("border", "2px red inset")            
        });          
    }else{
          $(".otherbox").slideUp(1000); 
           $(".InputDiscriptionother").slideUp(1000);   
    }

    $.post('backgroundScript.php', 
        { 
            'CompanyNames': dropdown.val()

        },
        function(response) {
            $('#compname').val(response.Companyname);
            //$('#phone').val(response.phone);
            //$('#policynum').val(response.policynum);
            //$('#nameofPolicyholder').val(response.policyholder);
            //$('#mailing').val(response.mailing);
            // Repeat for all of your form fields
        },
        'json'
    );

});
</script>
<br>

<!--<input type="text" class="otherbox" />
<input type="text" class="otherbox" />

<input type="text" class="otherbox"/>-->

<div class="FormBody">

    <div class="InputContainer">
<span class="InputDiscriptionother">Insurance Company Name: </span><div class="InputInner"> <input type="text" name="compname" id="compname" class="otherbox" ></div><!----- END .InputInner ---------->

<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
<span class="InputDiscription">Insurance Phone number: </span><div class="InputInner"><input type="text"  name="phone" id="phone" ></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
     <div class="agensele"> Do you have an agent? <input type="button"  value="Yes" name="agentsele" class="agentsele"/></div><!----- END .InputInner ---------->
     <?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required only if selected</span>";
    }
else
    //echo "<span>*</span>"; 
?>
     <div class="noagensele"> Do you have an agent? <input type="button"  value="No" name="noagentsele" class="noagentsele"/> </div><!----- END .InputInner ---------->
</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="agent">Agent Name: </span><div class="InputInner"> <input type="text" name="agentname"  class="agentinput" ></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->

<div class="InputContainer">
<span class="agent">Agent Phone Number: </span><div class="InputInner"> <input type="text" name="agentphone"  class="agentinput" ></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<div class="InputContainer">
<span class="agent">Agent's Email: </span><div class="InputInner"> <input type="text" name="agentemail"  class="agentinput" ></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<div class="InputContainer">
<span class="agent">Confirm Agent's Email: </span><div class="InputInner"> <input type="text" name="agentemailone"  class="agentinput" ></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<script>
$(".agentsele").click(function () {
    $(this).css({ borderStyle:"inset", cursor:"wait" });
    //dropdown.bind('change', function(){   
    $(".agentinput").slideDown(1000,function(){
    });
    $(".agent").slideDown(1000,function(){
    });
    //$(".agentsele").css("visibility", "hidden");
    //$(".agensele").css("visibility", "hidden");
    $(".noagentsele").css("visibility", "visible");
    $(".noagensele").css("visibility", "visible");
});
$(".noagentsele").click(function () {
    $(this).css({ borderStyle:"inset", cursor:"wait" });
    //dropdown.bind('change', function(){   
    $(".agentinput").slideUp(1000,function(){
    });
    $(".agent").slideUp(1000,function(){
    });
    $(".agentsele").css("visibility", "visible");
    $(".agensele").css("visibility", "visible");
    $(".noagentsele").css("visibility", "hidden");
    $(".noagensele").css("visibility", "hidden");
});

</script>

<br>
    <div class="InputContainer">
    <span class="InputDiscription">Name of the Policyholder: </span><div class="InputInner"><input type="text" name="nameofPolicyholder" id="nameofPolicyholder"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
     <div class="InputInner"> Not the Policy Holder? <input type="checkbox"  value="On" name="notpolicyholder" class="notpolicyholder"/></div><!----- END .InputInner ---------->
</div><!---------------------------------END .InputContaienr ----------------------------------->

<br>
    <div class="InputContainer">
<span class="InputDiscription">Policy Number: </span><div class="InputInner"><input type="text" name ="policynum" id="policynum" ></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
<span class="InputDiscription">Policyholder mailing address: </span><div class="InputInner"><input type="text" name="mailing" id="mailing"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
<span class="InputDiscription">City: </span><div class="InputInner"><input type="text" name="city" id="city"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
    <!------------------------------------------STATE SELECTION CODE ------------------------------------------->
<?php
    function state_select ($name,$full_state,$selected = '') {

  $state_list = array("AL|Alabama","AK|Alaska","AZ|Arizona", "AR|Arkansas", "CA|California", "CO|Colorado", "CT|Connecticut", "DE|Delaware", "DC|Washington D.C.", "FL|Florida", "GA|Georgia", "HI|Hawaii", "ID|Idaho", "IL|Illinois", "IN|Indiana", "IA|Iowa", "KS|Kansas", "KY|Kentucky", "LA|Louisiana", "ME|Maine", "MD|Maryland", "MA|Massachusetts", "MI|Michigan", "MN|Minnesota", "MS|Mississippi", "MO|Missouri", "MT|Montana", "NE|Nebraska", "NV|Nevada", "NH|New Hampshire", "NJ|New Jersey", "NM|New Mexico", "NY|New York", "NC|North Carolina", "ND|North Dakota", "OH|Ohio", "OK|Oklahoma", "OR|Oregon", "PA|Pennsylvania", "RI|Rhode Island", "SC|South Carolina", "SD|South Dakota", "TN|Tennessee", "TX|Texas", "UT|Utah", "VT|Vermont", "VA|Virginia", "WA|Washington", "WV|West Virginia", "WI|Wisconsin", "WY|Wyoming");

  ?>
  <select name=<?=$name;?> id="state" onChange="submitform()"><?
    foreach ($state_list as $s) {
        $values = explode("|",$s);
        ?><option value="<?=$values[0];?>" <?
                if($selected == $values[0]) { ?>SELECTED<? }
                ?>>

                <?  if($full_state) { ?><?=$values[1];?><? } else { ?><?=$values[0];?><? } ?></option><?
    }
  ?></select><?
}
?>

<span class="InputDiscription">State: </span><div class="InputInner">
<?=state_select('state',false,'AL'); ?>
<input type="hidden" id="hiddenfield" name="hiddenfield" value="">
 </div><!----- END .InputInner ---------->

<?php

 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 

?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Zipcode: </span><div class="InputInner"><input type="text" name="zipcode" id="zipcode"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<br>
<div class="InputContainer">
<span class="InputDiscription">Year Of Vehicle: </span><div class="InputInner"><input type="text" name="YearOfVehicle" id="YearOfVehicle"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Make Of Vehicle: </span><div class="InputInner"><input type="text" name="MakeOfVehicle" id="MakeOfVehicle"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Model Of Vehicle: </span><div class="InputInner"><input type="text" name="ModelOfVehicle" id="ModelOfVehicle"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Vehicle Identification Number: </span><div class="InputInner"><input type="text" name="Vehicleid" id="Vehicleid"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Policy Effective Date: </span><div class="InputInner"><input type="text" name="Policyeffdate" id="Policyeffdate"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Policy Expiration Date: </span><div class="InputInner"><input type="text" name="Policyexpdate" id="Policyexpdate"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<br>
<h2>Employee Information</h2>

<div class="InputContainer">
<span class="InputDiscription">Employee Name: </span><div class="InputInner"><input type="text" name="EmployeeName" id="EmployeeName"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<br>
<div class="InputContainer">
<span class="InputDiscription">Employee Company Name: </span><div class="InputInner"><input type="text" name="EmployeeCompanyName" id="EmployeeCompanyName"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Agency/Franchise Number (or unique indicator): </span><div class="InputInner"><input type="text" name="Agency/FranchiseNumber" id="Agency/FranchiseNumber"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Todays Date: </span><div class="InputInner"><input type="text" name="TodaysDate" id="TodaysDate" value="
<?php

$today = date("n-j-Y"); 
echo $today;
?>">
</div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    //echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="CheckBoxContainer">
            <input type="checkbox" value"On" name="correct"/>The above printed name serves to identify the employee and shows intent of the employee that the above auto insurance information given is accurate.  
            <?php 
            $setError=$_GET['seterror'];

            if ($setError == 1){

                echo "<div class='errorMsg'> *Required</div>";
            }
             ?>
            <br>
            <br>

            <input type="checkbox"  value="On" name="agree" id="agree"/>The employee identified above confirms this document has been read, reviewed and understood and subsequently authorizes it as such. 
             <?php 
             $setError=$_GET['seterror'];
             if ($setError == 1){

                echo "<div class='errorMsg'> *Required</div>";
             }

             ?>
             <br>
             <br>
             <input type="checkbox"  value="On" name="understood" id="understood"/>The employee understands that if inaccurate information is discovered on the above auto insurance information table, on the employee's auto policy itself or if the auto insurance policy is cancelled for any reason, the employer will be notified. 
             <?php 
             $setError=$_GET['seterror'];
             if ($setError == 1){

                echo "<div class='errorMsg'> *Required</div>";
             }

             ?>
            </div><!------------------------------------END   .CheckBoxContainer ------------------------------------------->
            <br>
<?php 
 $setError=$_GET['seterror']; 
if($setError == 1){
echo "<script type='text/javascript'>alert('Please check to make sure all required fields are filled out!');</script>";
}
?>

<input type="Submit" name="Submit" >

</div><!-------------------------------------------END .FormBody ------------------------------------------------------->
</form> 
```

更新 - - - - - - - - - -

当我更改类型以提交它时，它工作但我不希望它直接将我发送到它插入数据的函数。如何阻止它提交。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:38:50.263

按钮值未随表单提交一起发送

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:39:14.493

按钮不能包含表单数据，请改用提交

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:54:33.660

您可以在表单中隐藏“输入”类型，并使用 jQuery 向按钮添加事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-29T21:41:48.110

首先，我们可以尝试标准化您的控制。

```
<input type="submit" name="Submit" value="Submit" /> 
```

[http://www.w3.org/TR/html401/interact/forms.html#h-17.4](http://www.w3.org/TR/html401/interact/forms.html#h-17.4)

* * *

也许对按钮的一些澄清也会有所帮助。

[http://www.w3.org/TR/html401/interact/forms.html#h-17.5](http://www.w3.org/TR/html401/interact/forms.html#h-17.5)

* * *

“*当我更改类型以提交时，它可以工作，但我不希望它直接将我发送到它插入数据的功能。我如何阻止它提交。* “

我的 JavaScript 有点生疏，但我相信您可以使用该`onsubmit`属性来做某事，或者您可以使用标签的`onload=""`属性`<form>`或更常见的`<body>`标签来注册一些功能。找一本好的 JavaScript 书籍，里面有关于表单的部分。

[http://www.amazon.com/JavaScript-Definitive-Guide-Activate-Guides/dp/0596805527/ref=sr_1_1?s=books&ie=UTF8&qid=1401399613&sr=1-1&keywords=javascript+the+definitive+guide](https://rads.stackoverflow.com/amzn/click/com/0596805527)

# objective-c - 不断更新一个 NSImageView

> ID：12061832
> 
> 赞同：1
> 
> 时间：2012-08-21T19:37:00.483
> 
> 标签：objective-c, cocoa

我有一个`NSImageView`需要重绘不断更新的图像。`NSImage`我有一个创建`NSImageView`.

使用多线程，我可以轻松地让模型对象在后台线程中不断更新其输出图像。但是由于 UI 交互应该在主线程上完成，我不能在后台线程上设置 NSImageView 的图像。如果我`NSImageView`在主线程上更新，程序将变得无响应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:46:45.253

我讨厌自相矛盾，但是为什么您认为在主线程上更新图像会使程序无响应？

如果计算下一个`NSImage`是瞬时的，那么从逻辑上讲，您应该只计算并显示最后一个，因为两者之间的任何一个都不会被感知。

如果计算下一个需要一些时间，则在主线程之外进行计算，然后将图像推送到主线程上的视图（例如，使用`performSelectorOnMainThread:...`）。主线程不会变得无响应，因为在您计算下一个图像以处理其他事件时，它有所有时间。

如果更新比显示器的帧速率更频繁，那么您可以通过设置自己`CVDisplayLink`并轮询正在更新图像的任何内容以在每次滴答时获得最新的图像来获得更好的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:57:57.890

不要`NSimageView`在后台线程上更新。它不是[线程安全](http://www.cocoabuilder.com/archive/cocoa/240060-nsimageview-setimage-theimage-thread-safe.html)的。你应该使用`performSelectorOnMainThread:withObject:waitUntilDone:`

# sql - 如何使用使用实体框架的程序在数据库中创建新表？

> ID：12061834
> 
> 赞同：-1
> 
> 时间：2012-08-21T19:37:06.843
> 
> 标签：sql, entity-framework, c#-4.0

我在现场有一个软件，我需要向它添加一个新表。我的实体框架中有表格，新客户得到表格。我如何更新其他人？

**补充：为了明确我的发展和新客户有桌子。如何更新旧客户数据库是个问题？**

因为它在我的模型中，所以我似乎应该调用一个 create 方法，一切都应该在幕后发生。

```
_context.NewTable.CreateTable(); 
```

但是认为我将不得不编写一个 sql 命令字符串来查看表是否存在以及是否不创建表。

```
IDVisitorEntities _context = new IDVisitorEntities ();

String cmd = IF NOT EXISTS ( SELECT [name] 
FROM sys.tables
WHERE [name] = NewTable )
CREATE TABLE NewTable (
ID int IDENITY,
NAME    VARCHAR(40))

_context.NewTable.CommandText (cmd); 
```

如果表不存在，我只想运行一次。所以这并不能解决这个问题。我真的不知道该怎么办。

**2013 年 5 月 6 日添加** 我认为 EF 对每个表都有属性集合，这可能有一个线索。可能必须使用 ICustomTypeDescriptor ...其他人有什么想法吗？

**添加于 2013 年 7 月**15 日 我开始构建它，在我的新工作中，这里是一个示例。我需要使用部分类创建一个文件，并将抽象和接口应用于它们。它还有很长的路要走，但这是一个开始......

```
namespace DataModelMAXFM
{
public abstract class ATable
    {
    private ArrayList _columns = new ArrayList();
    private ArrayList colsToAdd = new ArrayList(); 

    public ArrayList Columns
        {
        get
            {
            return _columns;
            }
        }

    public bool TableCreate(SqlConnection sqlConn)
        {
        //assuming table needs to be created (already checked) 
        //get column list
        //use for loop to create query string
        // run command 
        ITable thisItable;
        if (Columns.Count <= 0) //generate column list if not already created
            {
            if (!ColumnList())
                return false;
            }

        if (this is ITable)
            {
            thisItable = (ITable) this;
            }
        else
            {
            throw new Exception("");
            }

        StringBuilder sb = new StringBuilder("CREATE TABLE " + thisItable.GetTableName() + " (");
        bool flgFirst = true;  // to allow for proper comma placement 
        foreach (PropertyInfo prop in Columns)
            {
            String propType = this.GetDataType(prop);
            if (propType == String.Empty)//check to make sure datatype found a match, EF to SQL
                {
                return false;
                }

            if (!flgFirst)
                {
                sb.Append(", ");
                }
            else
                {
                flgFirst = false;
                }

            sb.Append(prop.Name + " " + propType);
            }
        // add right parentheses
        sb.Append(")");

        //now run query created above
        SqlCommand com;
        try
            {
            com = new SqlCommand(sb.ToString(), sqlConn);
            com.ExecuteNonQuery();
            }
        catch (Exception e)
            {
            Console.WriteLine("TableCreate  e:" + e.ToString());
            return false;
            }

        return true;
        }

    public bool TableExists(SqlConnection sqlConn)
        {
        SqlDataReader sdr = null;
        SqlCommand com;
        ITable thisItable;
        try
            {
            //create and execute command
            if (this is ITable)
                thisItable = (ITable)this;
            else
                {
                throw new Exception("");
                }
            com = new SqlCommand("Select * from INFORMATION_SCHEMA.COLUMNS where TABLE_NAME = " + thisItable.GetTableName(), sqlConn);
            sdr = com.ExecuteReader();
            if (!sdr.HasRows)//ie table does not exist
                {
                return false;
                }
            }
        catch (Exception e)
            {
            Console.WriteLine("TableCreate  e:" + e.ToString());
            return false;
            }

        //close datareader
        try
            {
            sdr.Close();
            }
        catch (Exception e)
            {
            Console.WriteLine("close sqldatareader TableExists  e: " + e.ToString());
            }
        return true;
        }

    public bool ColumnList()
        {

        bool flgListCreated = false;
        PropertyInfo[] propList = typeof(TransactionCategory).GetProperties();
        foreach (PropertyInfo prop in propList)
            {

            if (prop.CanRead && prop.CanWrite)
                {
                MethodInfo mget = prop.GetGetMethod(false);
                MethodInfo mset = prop.GetSetMethod(false);

                // Get and set methods have to be public
                if (mget == null)
                    {
                    continue;
                    }
                if (mset == null)
                    {
                    continue;
                    }
                Columns.Add(prop);

                if (!flgListCreated)
                    {
                    flgListCreated = true;
                    }
                }
            }
        return flgListCreated;
        }

    public bool ColumnsExist(SqlConnection sqlConn)
        {

        ITable thisItable;
        if (Columns.Count <= 0)
            {
            if (!ColumnList()) 
                return false; 
            }

        //2013-07-10 create basic connection and data reader 
        if (this is ITable)
            thisItable = (ITable)this;
        else
            {
            throw new Exception("");
            }
        SqlDataReader sdr = null;
        SqlCommand com;
        foreach (PropertyInfo prop in Columns)
            {
            try
                {
                //create and execute command
                com = new SqlCommand("Select * from INFORMATION_SCHEMA.COLUMNS where TABLE_NAME = " + thisItable.GetTableName() + " and COLUMN_NAME = " + prop.Name, sqlConn);
                sdr = com.ExecuteReader();

                //if no rows returned to datareader == column does not exist, add to ArrayList of columns to add
                if (!sdr.HasRows)
                    colsToAdd.Add(prop);
                }
            catch (Exception e)
                {
                Console.WriteLine(e.ToString());
                return false;
                }

            }
        //close datareader
        try
            {
            sdr.Close();
            }
        catch (Exception e)
            {
            Console.WriteLine("close sqldatareader ColumnsExist  e: " + e.ToString());
            }

        if (colsToAdd.Count == 0)
            return false;

        //returns true only if method worked and found columns to add to DB
        return true;
        }

    public bool ColumnsCreate(SqlConnection sqlConn)
        {
        ITable thisItable;
        StringBuilder sb = new StringBuilder();
        if (colsToAdd.Count <= 0)
            {
            if (!ColumnsExist(sqlConn)) //2013-07-08 - MAXIMUS\58398(BJH) //if no columns, attempt to create list
                return false; // if Column list was not created, return false
            }
        // add a array of the alter table
        if (this is ITable)
            thisItable = (ITable)this;
        else
            {
            throw new Exception();
            }

        sb.Append("ALTER TABLE " + thisItable.GetTableName() + " ADD ( ");
        bool flgFirst = true; // allows for no leading comma on first entry
        String propType;
        foreach (PropertyInfo prop in colsToAdd)
            {

            //make sure SQL datatype can be determined from EF data
            propType = this.GetDataType(prop);
            if (propType == String.Empty)
                throw new Exception("no datatype match found " + prop.Name + " " + prop.PropertyType.ToString()); 
            if (!flgFirst)
                {
                sb.Append(", ");
                }
            else
                {
                flgFirst = false;
                }
            sb.Append(prop.Name + " " + propType);
            }
        sb.Append(" )");

        SqlCommand com;
        try
            {
            com = new SqlCommand(sb.ToString(), sqlConn);
            com.ExecuteNonQuery();
            }
        catch (Exception e)
            {
            Console.WriteLine(e.ToString());
            return false;
            }
        return true;
        }
    public bool ColumnsUpdate(SqlConnection sqlConn)
        {
        if (ColumnsExist(sqlConn))
            return ColumnsCreate(sqlConn);
        else
            return false;
        }

    //method to convert from EF to SQL datatypes, see noted issues
    public String GetDataType(PropertyInfo pi)
        {
        String s = "";
        String pistr = pi.PropertyType.ToString();
        switch (pistr)
            {
            case "Byte[]":
                s = "binary";
                break;
            case "Boolean":
                s = "bit";
                break;
            case "String Char[]": // also maps to other options such as nchar, ntext, nvarchar, text, varchar
                s = "char";
                break;
            case "DateTime":
                s = "datetime";
                break;
            case "DateTimeOffset":
                s = "datetimeoffset";
                break;
            case "Decimal":
                s = "decimal";
                break;
            case "Double":
                s = "float";
                break;
            case "Int16":
                s = "smallint";
                break;
            case "Int32":
                s = "int";
                break;
            case "Int64":
                s = "bigint";
                break;
            case "Single":
                s = "real";
                break;
            case "TimeSpan":
                s = "time";
                break;
            case "Byte":
                s = "tinyint";
                break;
            case "Guid":
                s = "uniqueidentifier";
                break;
            case "Xml":
                s = "xml";
                break;
            default:
                Console.WriteLine("No datatype match found for " + pi.ToString() + " " + pi.PropertyType.ToString());
                return String.Empty;
            }
        return s;
        }

    }

public interface ITable
    {

    int ID
        {
        get;
        }

    bool TableUpdate(SqlConnection sqlConn);
    bool TableStoredProceduresCreate(SqlConnection sqlConn);
    bool TableStoredProceduresDrop(SqlConnection sqlConn);
    bool TableCreateTriggers(SqlConnection sqlConn);
    bool TableCreateViews(SqlConnection sqlConn);
    DataTable GetDataTable();
    DateTime dtTableImplemented
        {
        get;
        }

    String GetTableName();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:06:44.770

> 我如何更新其他人？

以及如何升级其他人的代码以要求该表？可能通过使用一些补丁或升级包，这个包也应该创建你的表。

> 因为它在我的模型中，所以我似乎应该调用一个 create 方法，一切都应该在幕后发生。

不。EF 本身没有定义数据库模式（除了为整个数据库创建创建 SQL 脚本）。EF Migrations 可以实现您正在寻找的东西，但这是 EF 4.3 和更新版本在使用代码优先和 DbContext API 时的功能。

# css - 打印（或 PDF）输出中的 CSS 页面计数器

> ID：12061835
> 
> 赞同：6
> 
> 时间：2012-08-21T19:37:21.257
> 
> 标签：css, pdf, printing, counter, princexml

```
@page { @top-right { content: "Page " counter(page) " of " counter(pages); } } 
```

例如，这是我发现将页码显示为“第 5 页，共 10 页”的唯一方法。但是，它似乎不起作用。我在一个简单的 HTML 页面中尝试过，但没有成功。

我想使用纯 html/css 在页面中的任何位置显示页码。

有没有人成功使它工作？如果是这样，我感谢您的支持。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T21:19:15.137

1.  您引用了一个（基本上是正确的）CSS 片段来从 HTML 输入创建 PDF 和打印输出（“分页媒体”），但您说：*“它似乎不起作用”*。

2.  然后，再往下两句，你说：*“我想在页面的任何位置显示页码”*。

**首先，第二点。**

*没有办法将页码放入 HTML 网站本身。此功能仅适用于**分页媒体**，例如 PDF 或从 HTML 创建的打印输出。*

*因此，它仅适用于 PDF 或打印输出。但即使在那里：也无法将页码放在 PDF 上或在任意位置打印页面。您唯一的选择是顶部和底部-left/-right/-center 边距框，在主页上没有。*

**第二点，第一点。**

现在将页码信息放入可能的这些位置......

由于您没有详细说明*哪些*设置不适用于您的设置，所以让我给您一个概要：

创建一个文件`my.css`并将以下内容放入其中（这不是您的问题所要求的最低要求，但添加了更多好东西供您试验）。

另外，首先我将解释*如何将它与 PrinceXML 一起使用*。

```
@page { size: A4 landscape;
    background: gray;
    border: solid 1pt blue;
    padding: 9pt;
    margin: 18pt 18pt 18pt 18pt;
    font-family: "Helvetica Narrow";
    @top-left {
       content: 'PrivateCopy';
       color: red;
       font-style: bolditalic;
              }
    @top {
       content: string(doctitle);
         }
    @bottom-left {
       content: 'My Super-Duper Manual';
       font-style: bold;
                  }
    @top-right {
       content: "Page " counter(page) " of " counter(pages);
       font-style: bold;
                  }
    @bottom {
       content: string(paratitle);
            }
  } 
```

将文件保存在磁盘上的某个位置。

***现在调用 PrinceXML 命令行并使用`-s my.css`***来应用样式表：

```
prince                                                           \
  --verbose                                                      \
  --javascript                                                   \
  --style=/path/to/my.css                                        \
    http://stackoverflow.com/questions/12061835/css-page-counter \
  --output=my-css-page-counter-question.pdf 
```

（显然，您需要调整您的路径以适应*my.css*样式表文件。但是...）瞧！，您在 PDF 中的 Stackoverflow 问题...

当然，您可以使用更多功能扩展*my.css 。*当然，您可以将它用于任何 HTML 文件的转换，甚至是本地文件与远程文件的混合：

```
prince                                                 \
  --verbose                                            \
  --javascript                                         \
  -s /path/to/my.css                                   \
   /home/nada.adly/Documents/title.html                \
   /home/nada.adly/Documents/chapter_1.html            \
   /home/nada.adly/Documents/chapter_2.html            \
   http://en.wikipedia.org/wiki/Cascading_Style_Sheets \
   http://stackoverflow.com/questions/tagged/css       \
  -o random.pdf 
```

现在除了使用和不使用 PrinceXML 之外的 CSS 以及*直接打印输出*。（当然，您总是可以打印由 PrinceXML 生成的 PDF ——但也许您根本不想使用 Prince？）

同样，您不清楚问题的范围：

1.  *作为浏览器用户，您是否*希望将这些页码打印到您可能会做的*任何*网站打印输出中？

2.  或者*您作为负责网站的网站管理员是否*希望确保这些页码进入您的网站访问者从您的内容中所做的打印输出？

我不会在这里详细说明这两点（因为我可能完全错过了你的观点），但是......

*   ...您应该搜索*“用户样式表”*和*“print.css”*以找出存储此 CSS 代码的确切位置（因为用户样式表的位置因浏览器而异）；

*   ...对于两种用途中的任何一种（网站管理员的样式表或用户样式表），CSS 代码都是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:43:02.397

这仅在打印 HTML 页面时有效。尝试将您的 HTML 页面打印或保存为 .xps 。您将看到页码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-19T22:30:10.787

如果您使用**Prince**，一切都会正常工作，您可以放心地依赖最新的 CSS3 标准，这将允许您生成打印质量的 PDF。

如果你不使用prince，那你就不走运了。有多种解决方法，但没有一个能真正发挥作用。

```
 @page { anything } 
```

在分页方面，在浏览器世界中几乎是无用的。某些浏览器中的某些边距似乎很好。另一个问题是缺少像“@top-right”这样的边距框的实现。我测试过的浏览器都没有听说过它们 :-) 同样，Prince 都知道它们。

**Chrome**不使用整个 @page 方法，并且在 chrome-print 对话框中有一个复选框，它允许您嵌入非常粗略的分页（“1/2”）。它不能以任何方式配置，并且完全忽略任何与页码相关的 css。

**Firefox**是一个更好的候选者，至少有一个有效的解决方法，但这里的问题是，计数器（页面）总是为零。因此，如果您想显示总页数，这种方法无济于事。

对于浏览器，最终归结为使用的 HTML/CSS 渲染引擎。所有库、独立解决方案和嵌入式浏览器都依赖于底层渲染器，如果该功能不支持或支持不充分，框架将无能为力（如 awesomoium、cefsharp 等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-06T14:44:54.850

如果您使用浏览器进行打印，则没有多少浏览器（截至 2013 年 12 月）支持所有 CSS Paged Media 规范。总的来说，您通常很确定支持分页符，但页眉和页脚在我测试过的任何浏览器中都不起作用。

但是，如果我使用 PrinceXML 打印，它可以正常工作：

```
"C:\...\prince.exe" http://localhost/Test/ -o C:\Pdf\prince.pdf 
```

我得到了所有的页眉和页脚、页码、动态内容。

您会发现随着规范的成熟，越来越多的浏览器/渲染引擎将添加完全支持。

# c++ - 模板变量作为字符串而不是 const char *

> ID：12061842
> 
> 赞同：7
> 
> 时间：2012-08-21T19:37:41.573
> 
> 标签：c++, string, templates, char

我喜欢向量，通常在数组上使用它们。出于这个原因，我创建了一个模板化的可变参数函数来初始化向量（包括在下面）。

标题（.h）：

```
template <typename T>
vector<T> initVector(const int argCount, T first, ...); 
```

来源（.hpp）：

```
template <typename T>
vector<T> initVector(const int argCount, T first, ...) {
    vector<T> retVec;
    retVec.resize(argCount);

    if(argCount < 1) { ... }

    retVec[0] = first;

    va_list valist;
    va_start(valist, first);
    for(int i = 0; i < argCount-1; i++) { retVec[i+1] = va_arg(valist, T); }
    va_end(valist);

    return retVec;
} 
```

它适用于大多数类型（例如 int、double ...），但不适用于字符串——因为编译器将它们解释为 'const char *'，因此

```
vector<string> strvec = initVector(2, "string one", "string two"); 
```

给我错误：

```
error: conversion from ‘std::vector<const char*, std::allocator<const char*> >’ to non-scalar type ‘std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >’ requested 
```

有没有办法让字符串参数被解释为字符串，而不必强制转换每个参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:42:09.400

因为常量的类型`"string one"`是`const char*`而不是`std::string`需要进行转换。`va_arg`不能进行这种转换，所以我们需要第二个模板参数：

```
template <typename VecT, typename EleT>
std::vector<VecT> init_vector(const size_t nargs, EleT first, ...) {
    std::vector<VecT> result;
    result.reserve(nargs);

    if (nargs == 0) {
        return result;
    }

    result.push_back(first);

    if (nargs == 1) {
        return result;
    }

    va_list valist;
    va_start(valist, first);

    for (int i = 1; i < nargs; ++i) {
        result.push_back(VecT(va_arg(valist, EleT)));
    }

    va_end(valist);

    return result;
}

std::vector<std::string> = init_vector<std::string>(2, "string one", "string two") 
```

请注意，我做了一些更改，最明显的是更改`resize`为`reserve`，以防止创建不必要的对象。

* * *

您也可以简单地使用它（没有元素数量混乱的风险，并且类型安全）：

```
const char *args[] = {"string one" , "string two"};
std::vector<std::string> strvec(args, args + sizeof(args)/sizeof(args[0])) 
```

* * *

或者使用 C++11 初始化列表：

```
std::vector<std::string> strvec = {"string one" , "string two"}; 
```

* * *

为了好玩，我做了这个更整洁、更安全的小东西，但不会泛化为任意数量的论点。它通过重载工作。以下是前三个重载和示例用法：

```
template<class C>
inline C init_container() {
    return C();
}

template<class C, class T>
inline C init_container(T arg0) {
    const T args[1] = {arg0};
    return C(args, args + 1);
}

template<class C, class T>
inline C init_container(T arg0, T arg1) {
    const T args[2] = {arg0, arg1};
    return C(args, args + 2);
}

std::vector<std::string> vec =
    init_container< std::vector<std::string> >("hello", "world"); 
```

可以在此处下载完整的标头（最多 100 个参数）：[https](https://gist.github.com/3419369) ://gist.github.com/3419369 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:50:35.560

尝试使用 2 个模板类型参数：

```
template <typename T, typename U>
vector<T> initVector(const int argCount, U first, ...) { 
```

很多时候（例如 for`int`等`double`）`T`并且`U`将是相同的。但新策略的不同之处在于，我们现在允许它们不同，前提是存在从 to 的隐式转换`U`（`T`例如 from `const char*`to `string`）。从某种意义上说，这应该是安全的，如果不存在隐式转换，您将收到编译时错误。

顺便说一句，有趣的策略——我从来没有想过`va_list`etc. 可以以这种方式使用！OTOH，我相信 C++11 中有新的机制允许从初始化列表直接初始化向量等，类似于你一直能够在 C 中初始化数组的方式`int a[] = { 3, 4, 5 };`，所以最好使用它.

# ruby-on-rails - 谁能帮我用check_box编辑一个布尔值？

> ID：12061844
> 
> 赞同：-2
> 
> 时间：2012-08-21T19:37:46.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

在我的 Rails 项目中，一切都运行良好，除了一件事。我正在尝试使用 check_box 编辑布尔值。但是当我去编辑时，无论 check_box 是否被选中，布尔值都保持为假。这是我的相关代码：

```
class SubnetsController < ApplicationController
  # GET /subnets
  # GET /subnets.json
  def index
    @subnets = Subnet.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @subnets }
    end
  end

  def normal
    @subnets = Subnet.all

    respond_to do |format|
      format.html # normal.html.erb
      format.json { render :json => @subnets }
    end
  end

  # GET /subnets/1
  # GET /subnets/1.json
  def show
    @subnet = Subnet.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render :json => @subnet }
    end
  end

  # GET /subnets/new
  # GET /subnets/new.json
  def new
    @subnet = Subnet.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render :json => @subnet }
    end
  end

  # GET /subnets/1/edit
  def edit
    @subnet = Subnet.find(params[:id])
  end

  # POST /subnets
  # POST /subnets.json
  def create
    @subnet = Subnet.new(params[:subnet])

    respond_to do |format|
      if @subnet.save
        format.html { redirect_to @subnet, :notice => 'Subnet was successfully created.' }
        format.json { render :json => @subnet, :status => :created, :location => @subnet }
      else
        format.html { render :action => "new" }
        format.json { render :json => @subnet.errors, :status => :unprocessable_entity }
      end
    end
  end

  # PUT /subnets/1
  # PUT /subnets/1.json
  def update
    @subnet = Subnet.find(params[:id])

    respond_to do |format|
      if @subnet.update_attributes(params[:subnet])
        format.html { redirect_to @subnet, :notice => 'Subnet was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render :action => "edit" }
        format.json { render :json => @subnet.errors, :status => :unprocessable_entity }
      end
    end
  end

  # DELETE /subnets/1
  # DELETE /subnets/1.json
  def destroy
    @subnet = Subnet.find(params[:id])
    @subnet.destroy

    respond_to do |format|
      format.html { redirect_to subnets_url }
      format.json { head :no_content }
    end
  end
end 
```

看法：

```
<%= form_for(@subnet) do |f| %>
  <% if @subnet.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@subnet.errors.count, "error") %> prohibited this subnet from being saved:</h2>

      <ul>
      <% @subnet.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :SubnetName %><br />
    <%= f.text_field :SubnetName %>
  </div>
  <div class="field">
    <%= f.label :FW_Context_BridgeGroup %><br />
    <%= f.number_field :FW_Context_BridgeGroup %>
  </div>
  <div class="field">
    <%= f.label :VlanNumber %><br />
    <%= f.number_field :VlanNumber %>
  </div>
  <div class="field">
    <%= f.label :FwVlan %><br />
    <%= f.number_field :FwVlan %>
  </div>
  <div class="field">
    <%= f.label :NetAddress %><br />
    <%= f.text_field :NetAddress %>
  </div>
  <div class="field">
    <%= f.label :DefaultRouter %><br />
    <%= f.text_field :DefaultRouter %>
  </div>
  <div class="field">
    <%= f.label :Netmask %><br />
    <%= f.text_field :Netmask %>
  </div>
  <div class="field">
    <%= f.label :Broadcast %><br />
    <%= f.text_field :Broadcast %>
  </div>
  <div class="field">
    <%= f.label :Notes %><br />
    <%= f.text_field :Notes %>
  </div>
  **<div class="field">
    <%= f.label :multicast %><br />
    <%= f.check_box :multicast %>
  </div>**
  <div class="actions">
    <%= f.submit %>
<% end %> 
```

移民：

```
class AddMulticast < ActiveRecord::Migration
  def up
    add_column :subnets, :multicast, :boolean, :default => 0
  end

  def down
    remove_column :subnets, :multicast
  end

end 
```

我知道我可能遗漏了一小段代码。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:48:53.727

我认为问题出在这里：

```
add_column :subnets, :multicast, :boolean, :default => 0 
```

你是什​​么意思`default => 0`？
布尔值可以得到两个值：`true`和`false`...`0`和`false`不一样...

您应该删除`:default => 0`或使用以下内容：

```
:multicast, :boolean, :default => false, :null => false 
```

# iphone - NSMutableArray 比较

> ID：12061847
> 
> 赞同：0
> 
> 时间：2012-08-21T19:37:58.577
> 
> 标签：iphone, objective-c, collections, nsmutablearray, foundation

我有两个`NSMutableArray`s。一个数组包含来自数据库的记录，另一个数组包含来自 Web 服务的记录。

我想使用唯一键（如`barcodeID`. 另外，如果`barcodeID`密钥相同，那么我想从数组中删除该项目。这就像我正在更新我的数据库记录。如果我们从 web 服务获得相同的记录，那么我不想插入它们。

请帮助我，我无法打破这个逻辑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T19:51:27.290

if `Product.barcodeID` uniquely identifies your objects, then you can use that member to implement `-[Product hash]` and `-[Product isEqual:]`.

then you can easily use `Product` in `NSSet`s. `NSSet` and `NSMutableSet` contain several methods to combine and remove sets.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:51:03.723

The brute force method of doing such comparison is for every record in one array is checked with every record in another. If you find it then stop and discard the object. if you do not find it, then you add it to the array. This of course will have a very high time complexity with a worse case scenario is O(n^2). you could shorten this down by using certain data structures inside your database and web service. Maybe storing them in sorted order or through some algorithm.

You should do some research yourself before asking this question. I shall leave you the option to find a way to optimize your code.

Good luck!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:11:01.167

这是蛮力方法的一种想法。如上所述，与替代方案相比，这非常慢。

```
- (void)myUpdateFunction
{
    NSMutableArray *baseDatabaseArray;
    NSMutableArray *baseWebServiceArray;

    for (int i = 0; i < baseWebServiceArray.count; i++) {
        id value = [[baseWebServiceArray objectAtIndex:i] valueForKey:@"barcodeID"];
        NSArray *array = [baseDatabaseArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"barcodeID = %@", value]];
        if (array.count > 0)
        {
            id obj = [array objectAtIndex:0];
            [baseDatabaseArray removeObject:obj];
        }
        [baseDatabaseArray addObject:[baseWebServiceArray objectAtIndex:i]];
    }
} 
```

我一直在使用[Magical Record](https://github.com/magicalpanda/MagicalRecord)并且喜欢它。不过，您必须为此使用 Core Data。这是我的更新代码在 Magical Record 中的样子。

```
- (void)updateDatabase
{
    Class class = NSClassFromString(self.managedObjectClassName);

    if ([class MR_countOfEntities] > 0) {
        for (NSArray *array in self.totalBatches) {
            [class MR_updateFromArray:array];
        }
    } else {
        for (NSArray *array in self.totalBatches) {
            [class MR_importFromArray:array];
        }
    }

    [self.totalBatches removeAllObjects];
} 
```

如果您对 Core Data 的感觉有任何疑问，或者如果您需要我了解算法，请随时提问。

# hibernate - Hibernate：删除子集合中的元素会导致更新

> ID：12061848
> 
> 赞同：0
> 
> 时间：2012-08-21T19:37:58.607
> 
> 标签：hibernate

My Collection 映射文件包含以下关系：

```
<set inverse="false" lazy="true" name="collectionMembers" sort="unsorted" cascade="save-update,delete-orphan">
        <key>
            <column name="COLLECTION_CD" />
        </key>
        <one-to-many class="CollectionMember" />
    </set> 
```

CollectionMember 映射文件则包含以下双向关系：

```
<many-to-one name="collection" class="Collection" lazy="false">
        <column name="COLLECTION_CD" length="36" not-null="true" />
    </many-to-one> 
```

所以一个 Collection 包含一个 CollectionMembers 的集合

我遇到的问题是，当我尝试通过从集合中删除 CollectionMember 来删除它时，我收到以下错误消息：

```
cannot update ("COLLECTION_MEMBER"."COLLECTION_CD") to NULL 
```

为什么它试图在这里执行更新而不是删除？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:25:51.017

*为什么它试图在这里执行更新而不是删除？*

因为`inverse="false"`告诉 Hibernate 集合负责关联，这意味着**从集合**中删除->**删除行之间的关联**->**将外键设置为 null**

你可能想要的是`inverse="true" cascade="all-delete-orphan"`

# javascript - jquery重复节点匹配和删除

> ID：12061851
> 
> 赞同：2
> 
> 时间：2012-08-21T19:38:05.017
> 
> 标签：javascript, jquery

我有 2 个具有以下内容的节点集；

```
obj1 "<p>the quick <b>brown</b> fox jumped over the fence</p>"
obj2 "<p>the quick <b>brown</b> fox </p>" 
```

我试图将 obj1 的内容与 obj2 匹配，然后删除匹配的节点以留下一个看起来像的对象。

```
output "<p>jumped over the fence</p>" 
```

使用 jquery $.match 返回一个错误并且 $.find 也没有产生任何结果，还有其他有效的方法来做我想要解决的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:13:01.723

不确定这是否符合要求，但变量对我来说看起来像 HTML 字符串，看起来你想逐字比较字符串而不丢失原始主要元素，我会做类似的事情：

```
var obj1 = "<p>the quick <b>brown</b> fox jumped over the fence</p>",
    obj2 = "<p>the quick <b>brown</b> fox </p>";

var obj3 = compare(obj1, obj2);

$('body').append(obj3);

function compare(elm1, elm2) {
    var obj = [],
        o1 = String($(elm1).html()).split(' '), //get <p>'s inner HTML as string and split on spaces to get each word
        o2 = String($(elm2).html()).split(' ');

    $.each(o1, function(i,e) { //iterate over each word inside <p> of first string
        if (e !== o2[i]) obj.push(e); //check if matches each word in the same loaction in the second string
    });
    //we should now have an array of the words that does not match each other
    return $(elm1).clone().html(obj.join(' ')); //join with new spaces and return the string as html contained in a clone of the original element.
} 
```

[**小提琴**](http://jsfiddle.net/u8WNP/)

[**FIDDLE**](http://jsfiddle.net/u8WNP/2/)作为函数调用（看起来更简单）！

应该补充一点，这不适用于以下内容：

```
var obj1 = "<p>the quick <b>brown</b> fox jumped over the fence</p>",
    obj2 = "<p>fox jumped over the fence</p>"; 
```

由于这些字符串不是逐字匹配的，尽管第二个是第一个等的一部分，但是在这种情况下要删除字符串的相似部分，您总是可以这样做：

```
var obj1 = "<p>the quick <b>brown</b> fox jumped over the fence</p>",
    obj2 = "<p>fox jumped over the</p>",
    o1 = String($(obj1).html()),
    o2 = String($(obj2).html());

var obj = $(obj1).clone().html(o1.replace(o2, '')); 
```

[**小提琴**](http://jsfiddle.net/u8WNP/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:11:27.077

只是快速刺一下。也许这有帮助。它将在 HTML 中保留粗体标记，并且可能不会涵盖您直接问题之外的任何内容。

```
var obj1 = "<p>the quick <b>brown</b> fox jumped over the fence</p>";
var obj2 = "<p>the quick <b>brown</b> fox </p>";

var result="";
var inTag=false;

for (i=0;i<obj1.length;i++)
{
    if(obj1[i]=='<')
        isTag=true;
    if(!isTag)
    {
        if(i<obj2.length-1)
        {
            if(obj1[i]!=obj2[i])
            {
                result+=obj1[i];
            }
        }
        else
        {
            result+=obj1[i];
        }
    }
    else
    {
        result+=obj1[i];
    }
    if(obj1[i]=='>')
        isTag=false;
}

$("#result").html(obj1+obj2 + "<p>Difference:</p>"+result);​ 
```

[http://jsfiddle.net/8qYV4/1/](http://jsfiddle.net/8qYV4/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:12:08.640

你可以做这样的事情

```
var obj1Txt= $(obj1).text();
var obj2txt= $(obj2).text();
var output= '<p>'+obj1txt.replace(obj2txt,'')+'</p>'; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-21T20:06:48.587

您可以尝试使用 $.html() 匹配字符串表示

```
return obj1.clone().html(obj1.html().replace(obj2.html(), '')) 
```

# curl - 使用多个 uri 获取 redirect_uri_mismatch 错误

> ID：12061855
> 
> 赞同：3
> 
> 时间：2012-08-21T19:38:19.370
> 
> 标签：curl, oauth-2.0

我正在尝试使用 Google Oauth v2。我进入我的 api 控制台并设置以下 2 个重定向 uri...

```
http://localhost:3000/auth/authenticate
http://localhost:3000/auth/google/getToken 
```

当我运行以下...

```
curl -d "code=<removed>&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fauth%2Fgoogle%2fgetToken&client_id=<removed>&client_secret=<removed>&grant_type=authorization_code" -X POST https://accounts.google.com/o/oauth2/token 
```

一切都很好，但是，

```
curl -d "code=<removed>&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fauth%2Fauthenticate&client_id=<removed>&client_secret=<removed>&grant_type=authorization_code" -X POST https://accounts.google.com/o/oauth2/token 
```

说不出来……

```
"error" : "redirect_uri_mismatch" 
```

我只是改变了这个，有传播时间框架吗？如何让两个 uris 工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T00:28:51.900

[如此处](http://hueniverse.com/2011/06/oauth-2-0-redirection-uri-validation/)所述，您第二次发送 redirect_uri 时将其发送以进行验证（它们需要匹配），这不是任意值。在请求访问令牌时，您需要将相同的 redirect_uri 值传递给您要求在授权后重定向用户的 redirect_uri 的值。否则谷歌（或任何其他提供商将生成错误消息）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-24T19:21:23.847

以防万一您使用的是**Google+ javascript button**，您必须输入`postmessage`而不是实际的 URI。我几乎花了一整天的时间才弄清楚这一点，因为谷歌文档出于某种原因并没有明确地支持它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T23:56:57.323

一个应用可以有多个 redirect_uri 值。但是，在令牌请求中需要使用在初始授权请求（用户被重定向的地方）中使用的相同 redirect_uri。在单个授权上更改 uri 将因该错误而失败。

# linux - 关于 CentOS 或任何 Linux 机器中的可执行路径

> ID：12061858
> 
> 赞同：3
> 
> 时间：2012-08-21T19:38:34.490
> 
> 标签：linux, centos, vim, vi

我已经在我的计算机上安装了 vim，我看到我的操作系统中有两个可执行文件，一个在 /usr/local/bin 中，另一个在 /usr/bin 中。我想使用 /usr/bin vim，但是，每当我输入 vim 时，它都会使用我不想要的 /usr/local/bin。因此，为了将 vim 的 PATH 设置为 /usr/bin 而不是 /usr/local/bin。我怎样才能做到这一点？因为，/usr/local/bin 中的 vim 不是很好，我的意思是它就像 vi 编辑器。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:42:17.660

这取决于你的外壳。如果您使用的是 bash，则可以`/usr/bin`通过将以下内容添加到文件中来将其放在 PATH 的`~/.bashrc`开头：

```
export PATH=/usr/bin:$PATH 
```

顺便说一句，像这样的问题更适合[unix.SE](https://unix.stackexchange.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:52:06.680

由您的发行版的包管理器安装和维护的程序进入`/usr/bin`；里面的东西`/usr/local/bin`是用于手动（编译和）安装的应用程序。我不知道你是如何在那里获得你的 Vim 版本的，但由于它可能不会自动更新并且你不喜欢它，只需将其删除（或如果你胆小，则重命名）它：

```
$ sudo rm /usr/local/bin/vim 
```

中也可能有对应的运行时文件`/usr/local/share/vim`；您也可以删除它们，尽管它们不会造成任何伤害，只是浪费磁盘空间。

# java - 组件坐标

> ID：12061860
> 
> 赞同：4
> 
> 时间：2012-08-21T19:38:53.470
> 
> 标签：java, swing, point, mouse-listeners, swingutilities

我正在尝试**获取组件相对于其父级的坐标**。例如，当我有一个大小为*500x500的**JFrame*时，它​​有一个孩子 - *JPanel* - 在*[50, 10]*我应该得到*[50, 10]*作为结果。不管看起来多么容易，我总是得到错误的坐标（*[0, 0]*或*[3, 24]*）。

 ***这是我的 JPanel 的代码：

```
class MyPanel extends JPanel implements MouseListener { 
    private Component parent;   
    private String strName;

    public MyPanel(Component pr, String name, int w, int h) {
        super();

        parent = pr;
        strName = new String(name);

        this.setLayout(null);
        this.setSize(w, h);
        this.setBackground(Color.WHITE);
        this.addMouseListener(this);

        this.setVisible(true);
    }

    /* MouseListener implementation */
    public void mouseClicked(MouseEvent event) {
            int x = event.getX(); int y = event.getY();
            Point pnt = new Point(SwingUtilities.convertPoint(this, new Point(0, 0), parent));
            System.out.println(strName + ":" + pnt);    
    }

    public void mouseEntered(MouseEvent event) { }

    public void mouseExited(MouseEvent event) { }

    public void mousePressed(MouseEvent event) { }

    public void mouseReleased(MouseEvent event) { }
} 
```

有任何想法吗？

[Java 二进制和源代码 (*.tar.xz)](https://dl.dropbox.com/u/90959340/java-mouse-listener.tar.xz)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T19:58:16.617

尝试这个：

```
Point pnt = new Point(SwingUtilities.convertPoint(this, event.getPoint(), parent)); 
```

isnatead 使用（至少在提供的代码段中从未使用过 BTW）：

```
 int x = event.getX();
    int y = event.getY(); 
```

你不应该这样做：

```
Point pnt = new Point(SwingUtilities.convertPoint(this, new Point(0,0), parent)); 
```

否则返回的坐标将始终与 (0,0) 有关。

您也可以这样做（我认为您会这样做，但忘记了 x 和 y :P）：

```
 int x = event.getX();
    int y = event.getY();
    Point pnt = new Point(SwingUtilities.convertPoint(this,
                                               new Point(x,y), parent)); 
```

编辑：

如果我明白你想要什么，那么为什么要打扰所有这些代码呢？在每个`JPanel`s`MouseListener`中`mouseClicked()`这样做：

```
public void mouseClicked(MouseEvent event) {
    System.out.println(this.getX()+" "+this.getY());//print x and why co-ords for MyJpanel
} 
```***

# ruby - 遍历 Excel 工作簿并为所有内容编制索引？

> ID：12061862
> 
> 赞同：2
> 
> 时间：2012-08-21T19:38:58.393
> 
> 标签：ruby, excel, csv, rubygems, iterator

这将在 Ruby 中完成。我提供了迄今为止我所尝试的内容。

我很好奇是否可以迭代一个 excel 工作簿（所以它将是多张工作表）并且基本上索引/记录所有内容所在的位置。假设我有一本 10 张的工作簿。我希望它抓取第一张纸，记录该纸的名称，然后移动到第一个单元格并开始索引（不确定单词是否正确）该纸上的数据。它将记录单元格位置，因此对于第一个 (1,A) 和其中的数据。我正在尝试将数据输出为诸如 CSV 文件之类的格式：![在此处输入图像描述](../Images/5b3b7da75685af050ec3c58f94ef3980.png)

我编写的一些代码基本上只是遍历工作簿中的每个工作表和每个单元格（删除空格）并获取其数据并放入 CSV ......没有工作表名称或单元格编号存在。我正在使用 roo 和 csv 宝石：

```
require 'rubygems'
require 'roo'

#Classes Used
class ArrayIterator
  def initialize(array)
    @array = array
    @index = 0
  end

  def has_next?
    @index < @array.length
  end

  def item
    @array[@index]
  end

  def next_item
    value = @array[@index]
    @index += 1
    value
  end
end

#Open up files to compare
w1 = Excelx.new ( "C:/Ruby/myworkbook.xlsx" )

$values = Array.new
i = 0.to_i
# Continue until no worksheets left
num_sheets = w1.sheets().size

while  (i < num_sheets)
      puts "i is currently : #{i}"
      puts "length of sheet array is : #{num_sheets}"

#Grab first sheet of each workbook
  w1.default_sheet = w1.sheets[i]
 1.upto(w1.last_row) do | row |
    1.upto(w1.last_column) do | column |
        string = w1.cell(row, column).to_s
        if (string.strip.empty?) 
          puts "Whitespace!"
                else
                  $values << string
        end
    end
 end
   i = i + 1.to_i
end  

count = 0.to_i
CSV.open('C:/Ruby/results.csv', "w") do |csv|   
 csv << ['String']
i = ArrayIterator.new($values)
   while i.has_next?
      csv << [i.next_item]
      count += 1
     end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:26:42.057

我冒昧地缩短了您的脚本，同时在产生错误的空纸上添加了检查。

```
require 'roo'

w1 = Excelx.new ( "C:/Ruby193/test/roo/book1.xlsx" )
CSV.open("book1.csv", "w") do |csv|   
  w1.sheets.each do |sheet|
    w1.default_sheet = sheet
    if w1.first_row && w1.first_column
      eval(w1.to_s).each do |index, value|
        csv << [sheet, index, value]
      end
    end
  end
end 
```

在 book1.csv 中给出

```
Sheet1,"[1, 1]",a1
Sheet1,"[1, 2]",b1
Sheet1,"[2, 1]",a2
Sheet1,"[2, 2]",b2
Sheet2,"[1, 1]",aa1
Sheet2,"[1, 2]",bb1
Sheet2,"[2, 1]",aa2
Sheet2,"[2, 2]",bb2 
```

# andengine - AndEngine sprite 导致强制关闭

> ID：12061869
> 
> 赞同：1
> 
> 时间：2012-08-21T19:39:12.803
> 
> 标签：andengine, sprite, forceclose

第一次海报，Android 编程新手。使用 Eclipse 经典，加载 android SDK 和 API。已经创建了一个 hello world 应用程序，以及随后的文本发送应用程序（android 开发网站）。现在正在使用 Jimmaru (http://jimmaru.wordpress.com/2011/09/28/andengine-simple-android-game-tutorial/) 教程 (GLES1) 开发游戏，尽可能使用 AndEngine (GLES1)告诉，当我寻找它时没有“simpleBaseGameActivity”的超类。我已经让空白屏幕显示得很好，但是添加玩家精灵的步骤会导致应用程序执行/加载时强制关闭。

这是我的一节课（SimpleGame）

```
package com.example.game;

import org.anddev.andengine.engine.Engine;
import org.anddev.andengine.engine.camera.Camera;
import org.anddev.andengine.engine.options.EngineOptions;
import org.anddev.andengine.engine.options.EngineOptions.ScreenOrientation;
import org.anddev.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.anddev.andengine.entity.scene.Scene;
import org.anddev.andengine.entity.scene.background.ColorBackground;
import org.anddev.andengine.entity.sprite.Sprite;
import org.anddev.andengine.entity.util.FPSLogger;
import org.anddev.andengine.opengl.texture.TextureOptions;
import org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas;
import org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory;
import org.anddev.andengine.opengl.texture.region.TextureRegion;
import org.anddev.andengine.ui.activity.BaseGameActivity;

import android.view.Display;

public class SimpleGame extends BaseGameActivity {

// initiates view
private Camera mCamera;

// Main Scene
private Scene mMainScene;
private Sprite player;

// Textures
private BitmapTextureAtlas mBitmapTextureAtlas;
private TextureRegion mPlayerTextureRegion;

@Override
public Engine onLoadEngine() {
    final Display display = getWindowManager().getDefaultDisplay();
    int cameraWidth = display.getWidth();
    int cameraHeight = display.getHeight();

    mCamera = new Camera(0, 0, cameraWidth, cameraHeight);

    return new Engine(new EngineOptions(true, ScreenOrientation.LANDSCAPE,
            new RatioResolutionPolicy(cameraWidth, cameraHeight), mCamera));
}

@Override
public void onLoadResources() {

    // This places player character on screen, file is in
    // assets/gfx/Player.png
    mBitmapTextureAtlas = new BitmapTextureAtlas(512, 512,
            TextureOptions.BILINEAR_PREMULTIPLYALPHA);

    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

    mPlayerTextureRegion = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(this.mBitmapTextureAtlas, this, "Player.png",
                    0, 0);

    mEngine.getTextureManager().loadTexture(mBitmapTextureAtlas);

}

@Override
public Scene onLoadScene() {
    mEngine.registerUpdateHandler(new FPSLogger());

    mMainScene = new Scene();
    mMainScene
            .setBackground(new ColorBackground(0.09804f, 0.6274f, 0.8784f));

    mMainScene.attachChild(player);

    final int PlayerX = this.mPlayerTextureRegion.getWidth() / 2;
    final int PlayerY = (int) ((mCamera.getHeight() - mPlayerTextureRegion
            .getHeight()) / 2);

    player = new Sprite(PlayerX, PlayerY, mPlayerTextureRegion);

    return mMainScene;
}

@Override
public void onLoadComplete() {
    // TODO Auto-generated method stub

}

} 
```

这是我的 AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.game"
android:versionCode="1"
android:versionName="1.0">

<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.CAMERA" />

<application android:label="@string/app_name"
    android:icon="@drawable/ic_launcher"
    android:theme="@style/AppTheme">
    <activity android:name="SimpleGame">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>

</application> 
```

这是我的 LogCat 文件

```
08-21 14:14:50.116: D/dalvikvm(12704): GC_EXTERNAL_ALLOC freed 76K, 50% free 2737K/5379K, external 0K/0K, paused 33ms

08-21 14:14:50.156: D/AndEngine(12704): UpdateThread interrupted. Don't worry - this Exception is most likely expected!

08-21 14:14:50.156: D/AndEngine(12704): java.lang.InterruptedException

08-21 14:14:50.156: D/AndEngine(12704):     at java.lang.Object.wait(Native Method)

08-21 14:14:50.156: D/AndEngine(12704):     at java.lang.Object.wait(Object.java:358)

08-21 14:14:50.156: D/AndEngine(12704):     at org.anddev.andengine.engine.Engine$State.waitUntilCanUpdate(Engine.java:722)

08-21 14:14:50.156: D/AndEngine(12704):     at org.anddev.andengine.engine.Engine.yieldDraw(Engine.java:472)

08-21 14:14:50.156: D/AndEngine(12704):     at org.anddev.andengine.engine.Engine.onTickUpdate(Engine.java:463)

08-21 14:14:50.156: D/AndEngine(12704):     at org.anddev.andengine.engine.Engine$UpdateThread.run(Engine.java:685)

08-21 14:14:50.316: D/AndroidRuntime(12704): Shutting down VM

08-21 14:14:50.316: W/dalvikvm(12704): threadid=1: thread exiting with uncaught exception (group=0x401cc568)

08-21 14:14:50.316: E/AndroidRuntime(12704): FATAL EXCEPTION: main

08-21 14:14:50.316: E/AndroidRuntime(12704): java.lang.NullPointerException

08-21 14:14:50.316: E/AndroidRuntime(12704):    at org.anddev.andengine.entity.Entity.attachChild(Entity.java:482)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at com.example.game.SimpleGame.onLoadScene(SimpleGame.java:71)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at org.anddev.andengine.ui.activity.BaseGameActivity.doResume(BaseGameActivity.java:169)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at org.anddev.andengine.ui.activity.BaseGameActivity.onWindowFocusChanged(BaseGameActivity.java:85)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onWindowFocusChanged(PhoneWindow.java:2106)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at android.view.View.dispatchWindowFocusChanged(View.java:3925)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:665)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1982)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at android.os.Handler.dispatchMessage(Handler.java:99)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at android.os.Looper.loop(Looper.java:130)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at android.app.ActivityThread.main(ActivityThread.java:3703)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at java.lang.reflect.Method.invokeNative(Native Method)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at java.lang.reflect.Method.invoke(Method.java:507)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)

08-21 14:14:50.316: E/AndroidRuntime(12704):    at dalvik.system.NativeStart.main(Native Method)

08-21 14:14:54.190: I/Process(12704): Sending signal. PID: 12704 SIG: 9 
```

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:44:30.807

移动这条线

`mMainScene.attachChild(player);`

到这两条线之间的一点

```
player = new Sprite(PlayerX, PlayerY, mPlayerTextureRegion);

return mMainScene; 
```

# c# - 为 JToken 生成键值

> ID：12061872
> 
> 赞同：1
> 
> 时间：2012-08-21T19:39:23.743
> 
> 标签：c#, json, key-value

我有服务器发送给我的键值 JToken。我如何通过 json.net 做同样的事情？

例子：

```
{
  "1_type": "sound",
  "1url": "http://example.com/sound.mp3",
  "2_type": "url",
  "2url": "http://example.com",
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:43:22.683

使用[Json.Net](http://json.codeplex.com/)

```
JObject jObj = new JObject();
jObj["1_type"] = "sound";
jObj["1url"] = "http://example.com/sound.mp3";
jObj["2_type"] = "url";
jObj["2url"] = "http://example.com";
var jsonString = jObj.ToString(); 
```

# java - 实现 Queue 使得 FindMin 和 FindMax 为 0(1)

> ID：12061873
> 
> 赞同：0
> 
> 时间：2012-08-21T19:39:25.757
> 
> 标签：java, algorithm, data-structures, queue

这是一个非常常见的问题，但我在任何地方都没有找到明确的答案。我正在做的是使用 2 stacks 实现 Queue ，并且在节点中连同 data ，我也维护 min 和 max 值。实现是用Java完成的。

现在，问题是，如果`first element is Max / Min`我将它出队，那么其余节点包含最小/最大值作为出队的那个。

例子 ：`10 7 8 9 2`

节点 - [数据，最大值，最小值]

`[10,10,10] , [7,10,7] ,[8,10,7] , [9,10,7] , [2,10,2]`

现在，如果我将其出列，则队列为：`[7,10,7] ,[8,10,7] , [9,10,7] , [2,10,2]`

并且最小值和最大值是错误的 (10,7) ，它应该是 (9,2)。

我的算法基本上适用于堆栈，我正在使用队列。那么我怎样才能修改我的算法，以便它给出正确的结果呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:52:23.453

查看 heapsort 中的[heapify()](http://en.wikipedia.org/wiki/Heapsort#Pseudocode)。我想这就是你需要的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:17:52.977

这是[你](http://en.wikipedia.org/wiki/Double-ended_priority_queue)需要的吗？

双端队列可以用两种方式编码：

*   有两个队列副本，并为每个元素维护到相应元素的链接

*   使用称为[min-max heap 的数据结构](http://en.wikipedia.org/wiki/Min-max_heap)

# java - 正则表达式 java 从 txtfile 中查找字符串

> ID：12061878
> 
> 赞同：0
> 
> 时间：2012-08-21T19:39:48.793
> 
> 标签：java, regex

```
exp("^[a[k][t][l]]{6}$");
exp("^(bEt).*(oc)$");
exp("^(bEt)$");
exp("^(a).*");
exp("bEt(oc)*");
exp("^(bEt).*"); 
```

**exp("[baba[bebe][bibi][bobo][bubu][fafa][fefe][fofo][fufu]");**

我想知道如何从txt 文件。我已经搜索了answears，但找不到它们。在我看来，最后一行将是解决方案，但它不是

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T19:42:20.687

`[]`创建一个[字符类](http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html)，`|`是`or`操作符。尝试

```
exp("baba|bebe|bibi|bobo|bubu|fafa|fefe|fofo|fufu"); 
```

这也可以缩短，另一种写法是

```
exp("bibi|([bf][aeou])\\1"); 
```

我强烈建议您浏览 Java 教程的完整[正则表达式部分](http://docs.oracle.com/javase/tutorial/essential/regex/index.html)。

# ajax - Ajax.BeginForm 重定向而不是替换 div 容器

> ID：12061880
> 
> 赞同：3
> 
> 时间：2012-08-21T19:39:57.547
> 
> 标签：ajax, asp.net-mvc, razor

> **可能重复：**
> [Ajax.BeginForm 导致重定向到部分视图而不是原地](https://stackoverflow.com/questions/7651591/ajax-beginform-results-in-redirect-to-partial-view-instead-of-in-place)

如何修复 mvc 4 razor 中的 ajax 重定向？

```
 <div id="ajax-container">
@using (Ajax.BeginForm("EditPlace", "Index", new AjaxOptions() { InsertionMode = InsertionMode.Replace, UpdateTargetId = "ajax-container" }))
{
    @Html.HiddenFor(m => m.Id);
    @Html.TextBoxFor(m => m.Name)
    @Html.TextBoxFor(m => m.Address)
    @Html.TextBoxFor(m => m.Phone)
    @Html.TextBoxFor(m => m.Site)
    @Html.TextAreaFor(m => m.WorkTime)
    <input type="submit" value="ОК" />
} 
```

服务器端：

```
public void EditPlace(int id, string name, string address, string phone, string site, string worktime)
    {
        var company = _entity.Companies.FirstOrDefault(linqCompany => linqCompany.Id == id);
        if (company == null)
            return;
        company.Name = name;
        company.Address = address;
        company.Phone = phone;
        company.Site = site;
        company.WorkTime = worktime;
        _entity.SaveChanges();
    } 
```

单击按钮后，我被重定向到 Index/EditPlace。

# heroku - Heroku 应用程序失败并显示代码 255

> ID：12061881
> 
> 赞同：3
> 
> 时间：2012-08-21T19:40:02.387
> 
> 标签：heroku, playframework, playframework-2.0

Heroku 的新手在这里。

我已经完成了这里描述的动作：

[http://www.playframework.org/documentation/2.0.2/ScalaTodoList](http://www.playframework.org/documentation/2.0.2/ScalaTodoList)

我已经设法在 Heroku 上设置了一个简单的 Play 应用程序。接下来，我尝试通过与之前相同的步骤上传我一直在自己的站点上开发的主应用程序。上传和编译工作正常，但应用程序不断崩溃，代码为 255。以下是日志：

```
2012-08-21T19:07:29+00:00 heroku[slugc]: Slug compilation started
2012-08-21T19:10:18+00:00 heroku[api]: Attach HEROKU_POSTGRESQL_GOLD resource by heroku-postgresql@addons.heroku.com
2012-08-21T19:10:18+00:00 heroku[api]: Release v2 created by heroku-postgresql@addons.heroku.com
2012-08-21T19:10:18+00:00 heroku[api]: Add DATABASE_URL config by email@gmail.com
2012-08-21T19:10:18+00:00 heroku[api]: Release v3 created by email@gmail.com
2012-08-21T19:10:18+00:00 heroku[api]: Add SBT_OPTS, PATH, REPO, JAVA_OPTS config by b.panait@gmail.com
2012-08-21T19:10:18+00:00 heroku[api]: Release v4 created by email@gmail.com
2012-08-21T19:10:18+00:00 heroku[api]: Release v5 created by email@gmail.com
2012-08-21T19:10:18+00:00 heroku[api]: Deploy 40c5224 by email@gmail.com
2012-08-21T19:10:19+00:00 heroku[slugc]: Slug compilation finished
2012-08-21T19:10:25+00:00 heroku[web.1]: Starting process with command `target/start -Dhttp.port=28820 -Xmx384m -Xss512k
 -XX:+UseCompressedOops`
2012-08-21T19:10:26+00:00 app[web.1]: This application is already running (Or delete the RUNNING_PID file).
2012-08-21T19:10:27+00:00 heroku[web.1]: Process exited with status 255
2012-08-21T19:10:27+00:00 heroku[web.1]: State changed from starting to crashed
2012-08-21T19:10:27+00:00 heroku[web.1]: State changed from crashed to starting
2012-08-21T19:10:30+00:00 heroku[web.1]: Starting process with command `target/start -Dhttp.port=21120 -Xmx384m -Xss512k
 -XX:+UseCompressedOops`
2012-08-21T19:10:31+00:00 app[web.1]: This application is already running (Or delete the RUNNING_PID file).
2012-08-21T19:10:32+00:00 heroku[web.1]: Process exited with status 255
2012-08-21T19:10:32+00:00 heroku[web.1]: State changed from starting to crashed
2012-08-21T19:32:43+00:00 heroku[web.1]: State changed from crashed to starting
2012-08-21T19:32:47+00:00 heroku[web.1]: Starting process with command `target/start -Dhttp.port=35227 -Xmx384m -Xss512k
 -XX:+UseCompressedOops`
2012-08-21T19:32:48+00:00 app[web.1]: This application is already running (Or delete the RUNNING_PID file).
2012-08-21T19:32:49+00:00 heroku[web.1]: Process exited with status 255
2012-08-21T19:32:49+00:00 heroku[web.1]: State changed from starting to crashed
2012-08-21T19:33:09+00:00 heroku[web.1]: State changed from crashed to starting
2012-08-21T19:33:13+00:00 heroku[web.1]: Starting process with command `target/start -Dhttp.port=3275 -Xmx384m -Xss512k
-XX:+UseCompressedOops`
2012-08-21T19:33:14+00:00 app[web.1]: This application is already running (Or delete the RUNNING_PID file).
2012-08-21T19:33:15+00:00 heroku[web.1]: Process exited with status 255
2012-08-21T19:33:16+00:00 heroku[web.1]: State changed from starting to crashed 
```

我不知道从哪里开始调查这里。主应用程序很大，有一些额外的依赖项并使用数据库。任何帮助表示赞赏。

EDIT1：好的，所以我已经从我的 git 存储库中删除了 RUNNING_PID （从 heroku 中删除它并没有真正起作用：[https](https://devcenter.heroku.com/articles/ssh-access) ://devcenter.heroku.com/articles/ssh-access ）。我还将我的 procfile 更新为：

```
web: target/start -Dhttp.port=${PORT} ${JAVA_OPTS} -DapplyEvolutions.default=true -Ddb.default.url=${DATABASE_URL} -Ddb.default.driver=org.h2.Driver 
```

我现在收到以下错误：

```
2012-08-21T20:24:45+00:00 heroku[slugc]: Slug compilation finished
2012-08-21T20:24:48+00:00 heroku[web.1]: Starting process with command `target/start -Dhttp.port=38558 -Xmx384m -Xss512k
 -XX:+UseCompressedOops`
2012-08-21T20:24:51+00:00 app[web.1]: Play server process ID is 2
2012-08-21T20:24:57+00:00 app[web.1]: [←[37minfo←[0m] play - database [default] connected at jdbc:h2:mem:play
2012-08-21T20:24:58+00:00 app[web.1]: [←[33mwarn←[0m] play - Your production database [default] needs evolutions!
2012-08-21T20:24:58+00:00 app[web.1]:
2012-08-21T20:24:58+00:00 app[web.1]: # --- Rev:1,Ups - f9a96e0
...
Copy of the evolution file.
...
2012-08-21T20:24:58+00:00 app[web.1]:
2012-08-21T20:24:58+00:00 app[web.1]: [←[33mwarn←[0m] play - Run with -DapplyEvolutions.default=true if you want to run
them automatically (be careful)
2012-08-21T20:24:58+00:00 app[web.1]: Oops, cannot start the server.
2012-08-21T20:24:58+00:00 app[web.1]: PlayException: Database 'default' needs evolution! [An SQL script need to be run o
n your database.]
2012-08-21T20:24:58+00:00 app[web.1]:   at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.s
cala:422)
2012-08-21T20:24:58+00:00 app[web.1]:   at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.s
cala:410)
2012-08-21T20:24:58+00:00 app[web.1]:   at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59
)
2012-08-21T20:24:58+00:00 app[web.1]:   at scala.collection.immutable.List.foreach(List.scala:45)
2012-08-21T20:24:58+00:00 app[web.1]:   at play.api.db.evolutions.EvolutionsPlugin.onStart(Evolutions.scala:410)
2012-08-21T20:24:58+00:00 app[web.1]:   at play.api.Play$$anonfun$start$1.apply(Play.scala:60)
2012-08-21T20:24:58+00:00 app[web.1]:   at play.api.Play$$anonfun$start$1.apply(Play.scala:60)
2012-08-21T20:24:58+00:00 app[web.1]:   at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59
)
2012-08-21T20:24:58+00:00 app[web.1]:   at scala.collection.immutable.List.foreach(List.scala:45)
2012-08-21T20:24:58+00:00 app[web.1]:   at play.api.Play$.start(Play.scala:60)
2012-08-21T20:24:58+00:00 app[web.1]:   at play.core.StaticApplication.<init>(ApplicationProvider.scala:51)
2012-08-21T20:24:58+00:00 app[web.1]:   at play.core.server.NettyServer$.createServer(NettyServer.scala:132)
2012-08-21T20:24:58+00:00 app[web.1]:   at play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:153)
2012-08-21T20:24:58+00:00 app[web.1]:   at play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:152)
2012-08-21T20:24:58+00:00 app[web.1]:   at scala.Option.map(Option.scala:133)
2012-08-21T20:24:58+00:00 app[web.1]:   at play.core.server.NettyServer$.main(NettyServer.scala:152)
2012-08-21T20:24:58+00:00 app[web.1]:   at play.core.server.NettyServer.main(NettyServer.scala)
2012-08-21T20:25:00+00:00 heroku[web.1]: Process exited with status 255
2012-08-21T20:25:00+00:00 heroku[web.1]: State changed from starting to crashed 
```

EDIT2：好的，我已经想出了如何解决进化问题。只需将 applyEvolutions.default=true 添加到 application.conf 即可自动应用进化。你必须小心这一点，因为如果你在进化中设置了析构函数，它可能会破坏你的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-06T11:23:18.313

正如 Alper 正确建议的那样，尝试将 -Dplay.evolutions.db.default.autoApplyDowns=true 添加到您的 Procfile 中。

它为我修好了。

# python - 在 python 中渲染矢量字母

> ID：12061882
> 
> 赞同：3
> 
> 时间：2012-08-21T19:40:07.607
> 
> 标签：python, svg, rendering, vector-graphics

我想渲染一个 truetype 字母以与 python 中的 shapely 模块一起使用。（假设我想对字母进行一些形态学操作。）

到目前为止，我设法使用 cairo 向 SVG 文件写了一封信（见下文）。该字母在文件标题中保存为曲线。曲线基本上是我所需要的，但我相信必须有一种比保存、处理和加载 SVG 文件更优雅的方式来获取曲线。

第二个任务是以合适的格式加载曲线，但我认为这是可以做到的。

```
#!/usr/bin/env python
#-*- coding: utf-8 -*-
import cairo
fo = file('test.svg', 'w')
WIDTH, HEIGHT  = 256, 256
surface = cairo.SVGSurface (fo, WIDTH, HEIGHT) ## Prepare a destination surface -> out to an SVG file!
ctx = cairo.Context (surface)
ctx.scale (WIDTH/1.0, HEIGHT/1.0) # Normalizing the canvas

ctx.move_to (0.1, 0.9)
ctx.set_font_size(1.)
character = "a"
ctx.show_text(character)

surface.finish() 
```

提前感谢您的提示！

* * *

编辑：我发现可以使用 text_path() 绘制真实曲线而不是 show_text()，但我仍然无法读取这些点...

```
print ctx.text_path("b")
ctx.set_source_rgb (0.3, 0.2, 0.5) # Solid color
ctx.set_line_width (0.02)
ctx.stroke () 
```

* * *

EDIT2：在我同事的帮助下，我们设法得到了与上述类似的结果。使用 fontforge 也可以渲染字形并将其保存到 SVG（在贝塞尔曲线中）。它可能对某人有用。

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
## Outputs a glyph as a SVG, using FontForge (requires package 'python-fontforge')
import fontforge
f = fontforge.open("/usr/share/fonts/truetype/ubuntu-font-family/Ubuntu-R.ttf")
g = f["Aring"]
print g
g.export("orig.svg") 
```

或者，可以在保存 SVG 之前对字形进行形态扩张。（然而，这是许多需要的唯一步骤。）

```
g.stroke("circular", 100, "round", "round", "removeinternal")  ## morphologic dilation of the glyph
g.export("stroke.svg") 
```

还可以建立精确的边界框。

```
print "Stroked: g.boundingBox() =", g.boundingBox() 
```

顺便说一句，尝试编写即使是微不足道的 Inkscape 插件也很令人沮丧，但我仍然相信这是完成任务的最佳方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:45:03.253

您可能需要直接使用[FreeType](http://code.google.com/p/freetype-py/)。该[`glyph-vector.py`示例](http://code.google.com/p/freetype-py/source/browse/trunk/examples/glyph-vector.py)显示了如何获取字形矢量信息。

# macos - 如何使用单声道 C# 写入 Mac OSX 首选项文件

> ID：12061892
> 
> 赞同：0
> 
> 时间：2012-08-21T19:40:52.653
> 
> 标签：macos, mono

我正在寻找使用 C# Mono 专门读写 Mac OS 10.6、10.7 和 10.8 首选项文件的指南和信息。但是，到目前为止，我并不挑剔，并且可以选择任何其他语言来做同样的事情。

是的，这可能是一个重复的问题，我只是没有时间自己研究。我不是“只想要答案给我”，因为老实说，从长远来看，这不会教给我任何东西。感谢您的帮助和建议^_^

编辑：顺便说一句，每天工作 8-10 小时很难做很多其他事情。我已经断断续续地进行了一些搜索，虽然我在 Mac 文档中找到了关于 Mac 编码偏好的稀疏材料，并且在这里和那里找到了一些 tuts，但在 Mono 驱动的偏好方面仍然没有太多具体的方式。我将使用 MonoMac 查看答案，感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:21:55.300

Mac OS SDK 中是否有 API 可以执行此操作？

如果是的话，这个 API 很可能是由[MonoMac](http://www.mono-project.com/MonoMac)包装的，然后你就可以使用它了。

# ajax - Ajax 请求重定向

> ID：12061893
> 
> 赞同：0
> 
> 时间：2012-08-21T19:40:54.107
> 
> 标签：ajax, perl, http

我正在做一个 Ajax 请求，在响应中取决于某些条件。我可能会发送带有位置（重定向）URL 的 301 状态代码。但是当我这样做时，重定向 URL 有一个 ajax 请求，但我希望它是一个普通请求而不是 ajax 请求。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:49:59.160

Javascript can't see the redirect response, only the final response from the URL the browser was redirected to. Javascript can try to recognize the situation by analyzing the response content: Maybe it expects JSON but gets HTML (e.g. a login page :-) )

To do it right you'd need to modify the service to return a non-redirect response code to the Javascript which it can then handle (e.g. 401 when the session expires and the user must log in again)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:52:34.177

it's pretty easy, you might want the server to return an url instead of performing redirection, end then use `window.location` to perform redirection in javascript :).

# maven-assembly-plugin - 在没有传递依赖项的情况下获取已部署的 jar-with-dependencies

> ID：12061896
> 
> 赞同：2
> 
> 时间：2012-08-21T19:41:11.700
> 
> 标签：maven-assembly-plugin, maven-dependency-plugin

我正在使用 maven-assembly-plugin 创建一个 jar 文件，其中包含运行我的应用程序所需的所有依赖项。程序集的配置使用指向我的自定义程序集的descriptorRef。

当我查看 maven 存储库时，我看到了 jar、pom 和 jar-with-dependencies，这是练习的重点。

当我使用 maven-dependency-plugin:2.4:get 拉取 jar-with-dependencies 时，除了将 jar-with-dependencies 复制到 dest 之外，它还会将传递依赖关系下拉到我的本地 maven 存储库。

我期望看到的行为，因为 jar-with-dependencies 已经嵌入了所有内容，所以只会检索该 jar 文件。换句话说，我期待我在调用依赖项时看到的行为：get with -Dtransitive=false。

我需要传递标志这一事实是否表明某些内容不正确或丢失，大概是在 pom 或程序集描述符中？我应该在 pom 或程序集中做一些不同的事情，以便 jar-with-dependencies 有一个空的依赖项列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:28:31.150

`maven-dependency-plugin`不（也不能）知道您的 jar-with-dependencies 确实已经包含所有依赖项。它只会查看您的工件的 POM 文件并下载 JAR 及其依赖项，除非您指定`-Dtransitive=false`.

这正是[`get`目标](http://maven.apache.org/plugins/maven-dependency-plugin/get-mojo.html)文档所说的：

> 从指定的远程存储库**传递**下载单个工件。

**更新：**

您的设置没有任何错误或缺失，但不可能让 maven 知道您的 JAR 确实包含所有依赖项。从 Maven 的角度来看，jar-with-dependencies 就像您的 Maven 存储库中的任何其他 JAR 文件一样。Maven 对 JAR 文件的内容一无所知。

# asp.net-mvc - MVC - 存储库

> ID：12061898
> 
> 赞同：1
> 
> 时间：2012-08-21T19:41:33.113
> 
> 标签：asp.net-mvc, entity-framework, repository

在我们的 MVC 实现中，我们有一个视图、控制器和一个模型

该模型是一个 .edmx 文件（实体框架）。

我们的控制器调用一个存储库，我们从实体框架中获取数据。

那么存储库是否被视为模型的一部分？它通常是模型的一部分，因为 M 是 MVC 可以有很多层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:49:45.793

存储库不是模型的一部分，它是自己的独立实体，也可以在需要时在控制器和/或模型级别调用。存储库只是一个存储区域，即数据库。

作为细分：

*   控制器负责处理所有 Web 请求，即`GET`和`POST`. 它还可以填充模型并为该请求返回适当的视图。

*   该模型包含要执行的域对象和逻辑（即从存储库中提取信息并处理要传递给视图的数据）。

*   视图返回基于模型中存储的数据的标记。

在某些实现中，诸如检查条件和存储库调用之类的附加逻辑也发生在控制器级别，这是一种称为胖控制器瘦模型的技术。

# php - 为什么这个 PHP 函数会无限循环？

> ID：12061901
> 
> 赞同：3
> 
> 时间：2012-08-21T19:41:40.687
> 
> 标签：php, cycle

```
function nonrecgen($min, $max, $amount) {
for($i=0;$i<$amount;$i++) {

$NrArray[$i] = rand($min,$max);
echo $NrArray[$i];
do  {
    for($j=0;$j<=$i;$j++) {
      if ($NrArray[$j] == $NrArray[$i]) {
      $NrArray[$i] = rand($min,$max);   }     
                          }
       $Reccuring = false;
   if ($i > 0) {
    for($k=0;$k<=$i;$k++) {
      if ($NrArray[$k] == $NrArray[$i]) {
       $Reccuring = true;               }
                          }
               }
    }
while ($Reccuring = true);
                          }
Return $NrArray;                                        
                                        }

$Test = nonrecgen(0,1,2);
print_r($Test); 
```

我想研究如何生成一组非重复数字，虽然这肯定不是我认为的最有效的方式，但我似乎无法弄清楚为什么它在第一次迭代时会无休止地循环。我一遍又一遍地尝试逻辑分析，但一定有我遗漏的东西。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-21T19:42:54.453

```
do {
...
} while ($Reccuring = true); 
```

因为您的 while 语句将 $Reccuring 设置为 true，而不是对其进行评估。

尝试：

```
do {
...
} while ($Reccuring === true); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T19:43:08.737

您当前正在分配一个值而不是检查（这将始终是正确的）。

将其更改为： `while ($Reccuring == true);`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-21T19:57:03.077

除了`=`你还在错误的地方`==`重置：`$Recurring`

```
<?
function nonrecgen($min, $max, $amount) 
{
    for($i=0;$i<$amount;$i++) 
    {
        $NrArray[$i] = rand($min,$max);
        do  
        {
            for($j=0;$j<=$i;$j++) 
            {
                if ($NrArray[$j] == $NrArray[$i]) 
                {
                    $NrArray[$i] = rand($min,$max);  
                }     
            }
            if ($i > 0) 
            {
                for($k=0;$k<=$i;$k++) 
                {
                    if ($NrArray[$k] == $NrArray[$i]) 
                    {
                        $Reccuring = true;               
                    }
                }
            }
            $Reccuring = false;
        }
        while ($Reccuring == true);
    }
    return $NrArray;                                        
}
$Test = nonrecgen(0,2,5);
echo "<pre>";
print_r($Test);
?> 
```

# c# - 如何通过 XAML 传递对象的类型

> ID：12061902
> 
> 赞同：1
> 
> 时间：2012-08-21T19:41:55.820
> 
> 标签：c#, silverlight, xaml

我正在尝试在 XAML 中获取类型对象。

```
x:Type={...} 
```

但我意识到 Silverlight 不支持它。我试图在以下问题中使用它（在`EnumerationExtension`课堂上）：

[将枚举属性数据绑定到 WPF 中的组合框](https://stackoverflow.com/questions/58743/databinding-an-enum-property-to-a-combobox-in-wpf)

我能做些什么来传递 XAML 中的类型？C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:49:27.557

if SL 5 then custom [`MarkupExtension`](http://msdn.microsoft.com/en-us/library/gg712747.aspx)
else `Binding` with [`Converter`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter%28v=vs.95%29.aspx) that returns `value.GetType()`

* * *

ME example:

```
public class TypeExtension : IMarkupExtension<Type>
{
    public string TypeName { get; set; }

    public TypeExtension() { }
    public TypeExtension(string typeName)
        : this()
    {
        if (typeName == null) throw new ArgumentNullException("typeName");

        TypeName = typeName;
    }

    public Type ProvideValue(IServiceProvider serviceProvider)
    {
        var typeResolver = (IXamlTypeResolver)serviceProvider.GetService(typeof(IXamlTypeResolver));
        var type = typeResolver.Resolve(TypeName);
        return type;
    }
} 
```

Note that there is no support for the constructors in SL 5, so you need to use the property names in XAML:

```
{me:Type TypeName=local:SomeClass} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:45:25.647

您可以[创建自定义标记扩展](http://www.wintellect.com/cs/blogs/jprosise/archive/2011/04/15/using-custom-markup-extensions-in-silverlight-5.aspx)（自 Silverlight 5 起可用）

或者你可以[使用这个](http://www.codeproject.com/Articles/305932/Static-and-Type-markup-extensions-for-Silverlight)

# java - 如何从与类不在同一文件夹中的文件创建 URL

> ID：12061908
> 
> 赞同：1
> 
> 时间：2012-08-21T19:42:16.930
> 
> 标签：java, audio

我想`AudioClip`从`URL`代表文件的 a 创建一个。我知道如果音频文件与类在同一个文件夹中，我可以使用`class_name.getResource(String filename)`, 然后使用`Applet.newAudioClip()`为 的创建音频剪辑`URL`，但是文件在不同的文件夹中是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:05:27.543

如果文件在您项目的存档中，您可以使用它`ClassLoader`来获取资源。
文件应该在存档的根目录中，或者在 META-INF 目录中

```
java.lang.ClassLoader.getResource(String name); 
```

# objective-c - 为什么我的同心圆上的角度越来越小？

> ID：12061910
> 
> 赞同：0
> 
> 时间：2012-08-21T19:42:32.583
> 
> 标签：objective-c, ios

绘制的第一个圆圈（最里面的一个）是可以的，但随后它们变得越来越不圆？我知道这一定与迭代有关。

```
//LOAD CIRCLES

circleWidth = 100;
circleHeight = 100;

for (int i = 0; i < 4; i++) {
UIView *circleView = [[UIView alloc] init];
circleView.frame = CGRectMake(0, 0, circleWidth, circleHeight);
circleView.center = self.view.center;
circleView.alpha = 0.7;
circleView.layer.cornerRadius = 50;
circleView.backgroundColor = [UIColor clearColor];
circleView.layer.borderColor = [[UIColor whiteColor] CGColor];
circleView.layer.borderWidth = 3;
circleHeight += 50;
circleWidth += 50;

[self.view addSubview:circleView];
[self.view sendSubviewToBack:circleView];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:48:02.663

您必须将cornerRadius 设置为至少一半`circleHeight`：

```
circleView.layer.cornerRadius = circleHeight * 0.5f; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:48:16.543

也许它必须做 circleView.layer.cornerRadius = 50 - 你正在增加 circleHeight 和 circleWidth 但不是cornerRadius

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:48:28.587

您在每次迭代中增加宽度和高度，但`cornerRadius`保持固定在 50，如果宽度和高度为 100（第一次迭代），这只会导致一个圆圈。您应该将 设置`cornerRadius`为`circleWidth * 0.5`。

# javascript - jquery 导致 dygraph 崩溃

> ID：12061922
> 
> 赞同：0
> 
> 时间：2012-08-21T19:43:10.133
> 
> 标签：javascript, jquery, document-ready, dygraphs

已经在整个网络上搜索了解决方案。首先，我使用 jqplot 来可视化 mysql 数据库，但是随着数组的增长，我试图切换到 dygraph，而且它针对时间日期进行了优化，问题是我无法让它在 ie explorer <9 上工作，尤其是关于文档作案手法。还测试了 ietester.... dygraph 的页面本身与图表一起使用，从中复制了重要部分但仍然无法使其正常工作，也许有人可以告诉我我的错误或者最好不要使用 dygraph？任何人都在使用这让它适用于internetexplorer 6-8？

问题是没有它的 jquery document.ready 函数一切正常......

```
<!DOCTYPE html> 
<html>
<head>
<!-- Framework,Diagramm-Klasse,Jqplot,Jqplot Plugin -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7; IE=EmulateIE9">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Konfigurationstool</title>
<script type="text/javascript" src="jquery-test.js"></script>
<!--[if IE]>
  <script type="text/javascript" src="excanvas.js"></script>
<![endif]-->
<script type="text/javascript" src="dygraph-combined.js"></script>

</head>

<body>

<script language="javascript" type="text/javascript">

$(document).ready(function()
{
g = new Dygraph(document.getElementById("diagrammpreview"), [[1,10,100], [2,20,80],   [3,50,60], [4,70,80]]
);
});
</script>

<div id="diagrammpreview" style="height:500px;width:500px;"></div>

</body>
</html> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T22:44:08.953

我在 IE 和 FF 中遇到了同样的问题。

```
$(window).load(function) { 
```

代替

```
 $(document).ready(function) { 
```

帮助，以及将 jquery 库直接包含到 html 文件中（尽管它包含在我的 CMS 中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:35:30.240

IE中的调试控制台说问题是什么？这可能是竞争条件或与 $ 变量的冲突。您可以尝试使用纯 JavaScript 替代准备/加载功能，例如：

```
window.onload=function() {
   g = new Dygraph(document.getElementById("diagrammpreview"), [[1,10,100], [2,20,80[3,50,60], [4,70,80]]);
}); 
```

# java - 未使用序列的数字主键；如何获得下一个值？

> ID：12061929
> 
> 赞同：0
> 
> 时间：2012-08-21T19:43:47.753
> 
> 标签：java, jpa, primary-key

我知道应该使用数据库序列来获取表中下一个键的值（让我们假设一个单列数字主键），但是如果不使用序列，你是否看到任何明显的代码气味以下代码（JPA 的代码是 Java，但该模式实际上是独立于语言和技术的）：

```
 boolean haveSucceeded = false;
  int _i = 0 ;
  while ((!haveSucceeded) && (_i++ < MAX_RETRIES)) {
     try {
          user.setId(getFacade().maxId()+1); // line A
          getFacade().create(user);          // line B
          haveSucceeded = true;
     } catch (javax.ejb.EJBTransactionRolledbackException exc) {
          debug("ConstraintValidationException, "+ ( (_i<MAX_RETRIES)?"retrying":"giving up"));
     }
  } 
```

由于并发访问（也可能来自其他应用程序实例）而发生重试以解决可能的冲突，并且因为不能保证*行 A*（计算最大值的位置）和*行 B*（插入行的位置）将对相同的数据进行操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:48:04.603

这看起来不是线程安全的。您应该以线程安全的方式：

*   锁定用户表
*   读取当前的 max(id)
*   添加 1 并将其用作下一个 id
*   解锁桌子

这近似于使用自动增量在数据库中发生的情况。

如果您无法锁定表，请同步该方法，无论是制作它`static synchronized`还是使用`static`锁定对象，例如：

```
 private static final Object lock = new Object();

 void yourMethod() {
     synchronized (lock) {
         // your code here
     }
 } 
```

如果您有多个服务器实例正在运行，那么这种方法是不够的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T20:07:14.170

如果您费心尝试通过重试访问，为什么不在使用接口“Connection”.createStatement() 将语句创建为 CONCUR_READ_ONLY 或 CONCUR_UPDATABLE 时设置“方法”。大多数情况下，数据库本身控制读取并发，但连接可以作为查询的一部分告诉数据库如何读取它。我不明白，当访问问题异常发生“如果有过”的可能性比读取并发的任何问题更多时，为什么还要为循环而烦恼。Niether 我能理解为什么如果你正在创建一个用户，你为什么要如此不区分数据值，你应该首先检查用户是否存在，然后中止这个过程并将一条消息发回给打算的新用户“选择另一个用户名“ ETC..

# jquery - 在单击按钮时设置 cookie，回发执行重定向

> ID：12061930
> 
> 赞同：1
> 
> 时间：2012-08-21T19:43:56.173
> 
> 标签：jquery, asp.net

我有一个点击事件，所以当一个按钮被点击时，我使用 jquery cookie 插件将用户下拉列表选择保存到一个 cookie 中：

```
$.cookie("mycookie", selection_values); 
```

当表单提交时，在服务器端，我做一个重定向：

```
Response.Redirect("/some/url"); 
```

当我检查 cookie 时，似乎有时会保存这些值，有时则不会。

是因为重定向到另一个页面，因此 cookie 没有一致地保存吗？某处有时间问题吗？

我的高级代码：

```
$(document).ready(function() {
  $(".mybutton").click(function() {

    // loop through controls, save to a variable

    $.cookie("mycookie", cookievalues);
  }

  // cookie
  var cookieValue = $.cookie("mycookie");
  if (cookieValue && cookieValue.length) {

       // split cookie values
       // loop through and pre-select drop down lists
  }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:05:37.150

您可以添加一个隐藏的服务器控制按钮（在具有可见性的 div 中：隐藏；），然后在 'mybutton'.click 函数中设置 cookie 后使用 jquery 来“单击”该按钮。通过这种方式，您可以判断这是否是时间问题。

# commonsware-cwac - 西瓦克。locpoll 如何停止正在运行的位置更新？

> ID：12061932
> 
> 赞同：0
> 
> 时间：2012-08-21T19:44:06.440
> 
> 标签：commonsware-cwac

我将 OMGStop() 方法修改为更像这样的方法：

```
public void cancelUpdates() {
    //TODO potential bug here
    if(pi == null)
        setPendingIntent();
    mgr.cancel(pi);     

    //Should one of these work?
    stopService(new Intent(applicationContext, LocationPoller.class));
    stopService(new Intent(applicationContext, LocationPollerService.class)); 
```

我将 pi (PendingIntent) 存储为我的活动类中的成员。这可以很好地从 AlarmManager 中删除 PendingIntent。

然而...

如果正在进行一项，我希望能够停止当前的位置调查。您当前的设计是否可行？我以为我可以停止服务，但 GPS 继续运行。

基本上，我要做的是在用户（我在旅途中）更改偏好（例如超时、使用 GPS 或更新周期）时停止一切。然后使用新值重新创建所有内容。

谢谢，

很棒的代码顺便说一句 - 正是我想要跟踪我的越野旅程:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T19:00:04.967

我遇到了同样的问题。- 有时我让鼠标指针悬停在“mgr.setRepeating(..)”上并阅读 Eclipse 的一些 (Indigo) 提示：“如果已经为同一个 IntentSender 安排了警报，它将首先被取消。” 但是到那时 IntentSender 可能会消失。这使我想到了以下“解决方案”（在原始 CommonsWare 代码中）：

```
if(pi == null) {
  Intent i = new Intent(this, LocationPoller.class);
  pi = PendingIntent.getBroadcast(this, 0, i, 0);
  mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
    SystemClock.elapsedRealtime() + 1000, PERIOD, pi);
}
mgr.cancel(); 
```

通过添加 1000 毫秒，我试图确保 AlarmManager 在被 cancel() 击中之前没有机会启动。

HTH，问候。

PS：我想引用 mparkes：“伟大的代码”！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:52:49.770

> 您当前的设计是否可行？

不，对不起。这在理论上是可以添加的，但可能有点棘手，而且目前绝对不存在。

> 基本上，我要做的是在用户（我在旅途中）更改偏好（例如超时、使用 GPS 或更新周期）时停止一切。然后使用新值重新创建所有内容。

这是一个完全合理的概念，只是不`LocationPoller`支持。`LocationPoller`更多地是为“每小时检查一次”的场景而设计的，在这种场景中，当用户碰巧在操作您的应用程序的 UI 时，从统计上来说不太可能进行检查。

# wordpress - 隐藏标题是 wordpress 帖子没有标题

> ID：12061935
> 
> 赞同：0
> 
> 时间：2012-08-21T19:44:15.127
> 
> 标签：wordpress

我相信事情正在变得温暖，没有标题正确显示空白，但标题现在不是链接也不是 h2，它只是纯文本。有什么建议么？

```
 <?php if (the_title()) { ?>

         <h2>
         <a href="'<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark">
         <?php the_title(); ?></a></h2>

       <?php } else { ?><?php }; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:55:00.447

```
<?php if (get_the_title() != "") { ?>
    <h2><a href="'<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_title(); ?></a></h2>
<?php } ?> 
```

应该管用。

# jasper-reports - Jasper 新字段/变量上的分页符

> ID：12061936
> 
> 赞同：2
> 
> 时间：2012-08-21T19:44:27.267
> 
> 标签：jasper-reports, ireport

我正在处理一份碧玉报告，我正在尝试找出一种方法让报告在变量更改时分页。变量其实是一个Field，我把字段的值放在一个变量里面。

现在，Jasper Reports 网站上有一个示例，说明如何像这样按计数来打破它

```
<groupExpression><![CDATA[new Boolean($V{BreakGroup_COUNT}.intValue()
> 5)]] ></groupExpression> 
```

但是，我不确定有什么方法可以比较上一个或下一个值并在此之后中断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:14:20.870

您只希望报表在 $F{MyField} 更改值时开始一个新页面。

在这种情况下，只需使用“组表达式”创建一个组：`$F{MyField}`

勾选该组的“在新页面上开始”选项。不需要变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:06:00.533

在 Document Structure 窗口中选择组的标题，然后在 Properties 窗口中选择 Start on New Page。

# objective-c - 向 CALayer 添加子层仅在 mouseDown 方法中有效

> ID：12061937
> 
> 赞同：0
> 
> 时间：2012-08-21T19:44:29.137
> 
> 标签：objective-c, macos, core-animation, calayer, nsview

我正在尝试将 CALayer 添加到 NSView。我没有工作的代码是

```
-(void) InsertCALayer
{
    newLayer = [CALayer layer];
    newLayer.frame = NSMakeRect(10, 10, 100, 100);
    newLayer.backgroundColor = CGColorCreateGenericRGB(0.5, 0.5, 0.5, 1.0);
    [rootLayer addSublayer:newLayer];
} 
```

但是，此代码没有显示任何内容。奇怪的是，我还实现了一个 mouseDown 事件处理程序，代码确实在那里工作：

```
-(void) mouseDown:(NSEvent *)theEvent
{   
    newLayer = [CALayer layer];
    newLayer.frame = NSMakeRect(10, 10, 100, 100);
    newLayer.backgroundColor = CGColorCreateGenericRGB(0.5, 0.5, 0.5, 1.0);
    [rootLayer addSublayer:newLayer];
} 
```

我可以确认这两种方法都肯定会被调用，但我很困惑为什么一种方法有效而另一种方法无效。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:52:34.827

是个

```
-(void) InsertCALayer 
```

加载视图层次结构后调用方法？如果您在调试器中的 InsertCaLayer 方法和“po”rootLayer 中设置断点，您是否有有效的对象？

在对视图层次结构进行更改之前，必须完全加载它。我想知道这是否是这里的问题。让我知道！

# c++ - Doxygen 文档主菜单中的命名空间

> ID：12061939
> 
> 赞同：3
> 
> 时间：2012-08-21T19:44:31.680
> 
> 标签：c++, configuration, namespaces, doxygen

本质上，我试图让“命名空间”出现在由 Doxygen 1.7.6.1 生成的文档的主菜单中。

当我使用 Doxygen 1.4.7 时，生成的文档包含主菜单中的命名空间，但是当我使用 Doxygen 1.7.6.1 时，生成的文档不包含主菜单中的命名空间。我不确定这是为什么。

在 Doxygen 1.7.6.1 的配置文件中，我将标签 SHOW_NAMESPACES 设置为 YES。

您能否建议我如何让命名空间出现在 Doxygen 1.7.6.1 生成的文档的主菜单中。在某个地方我可能会犯错吗？

非常感谢您的任何建议

# web-services - Sitecore 中的网络服务

> ID：12061940
> 
> 赞同：1
> 
> 时间：2012-08-21T19:44:33.323
> 
> 标签：web-services, sitecore

我对 Web 服务没有太多经验，但我希望这里有人可以就如何创建我正在搜索的内容给我一些建议，或者至少为我指明一个有用的教程的方向。

开始：

我有一个新闻栏目，里面有新闻。路径示例：content\home\news\（这里所有新闻项目都存储为单独的项目）。

现在我想获取新闻标题和文本字段，并将它们导出以在另一个网站、另一个域（不在 sitecore 解决方案中运行）上查看。我认为最聪明的解决方案是使用网络服务还是我错了？

如果是，我怎样才能在 Web 服务中以最简单的方式做到这一点？我试图找到一些有关如何执行此操作的文档，但没有任何运气。一些示例代码会很好。

真的希望这里有人可以提供一点帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:04:16.447

我同意史蒂夫的观点，使用 RSS 是实现这项工作的快速方法。然后在另一端，在 sitecore 之外，您可以通过 javascript 解析页面上的 rss：[Parse RSS with jQuery](https://stackoverflow.com/questions/226663/parse-rss-with-jquery)

# mysql - 我如何在 MySQL 中舍入到最近的 60 秒间隔

> ID：12061946
> 
> 赞同：4
> 
> 时间：2012-08-21T19:45:13.617
> 
> 标签：mysql, time, numbers, rounding

我有一张有通话记录的表格。详细信息有 phone_number 和 call_time，以**毫秒为单位**。哪一个 SQL 语句有一个四舍五入的 call_time 到**最接近前 60**秒的列？例子：

```
电话号码 | 通话时间 | 舍入时间
======================================
787-468-8965 | 45786 | 60
787-564-8945 | 128907 | 180

```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T19:48:30.833

*   转换为分钟。
*   使用该[`CEILING`](http://dev.mysql.com/doc/refman/5.6/en/mathematical-functions.html#function_ceiling)函数向上舍入到下一分钟。
*   转换回秒。

试试这个：

```
CREATE VIEW yourview AS
SELECT
    CEILING(call_time / 60000) * 60,
    -- etc... 
```

# git - 如何组合 git 提交

> ID：12061948
> 
> 赞同：4
> 
> 时间：2012-08-21T14:38:39.513
> 
> 标签：git

在我的本地 GIT 存储库中，我有以下提交：

A --> B --> C --> D

（其中 D 是头部）

我想将 B 和 C 组合/压缩成一个提交。我怎么能那样做？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T14:53:01.440

使用这个命令：

```
git rebase -i A ;# where A is A's commit hash 
```

在交互式编辑器中，更改行，应如下所示：

```
pick c7787af A
pick f9d9262 B
pick 6c363d0 C
pick 40f657d D 
```

对此：

```
pick c7787af A
pick f9d9262 B
squash 6c363d0 C
pick 40f657d D 
```

如果您希望放弃 C 的提交消息，但仍要压缩提交，请使用以下命令：

```
pick c7787af A
pick f9d9262 B
fixup 6c363d0 C
pick 40f657d D 
```

*永远不要*对你已经与合作者共享的分支进行变基。该操作会更改 SHA1 哈希，并导致非快进更新。

正如 Jason 在评论中指出的那样，另一种语法是`git rebase -i HEAD~4`. 当您将最近的历史重新定位到 squash 提交时（即，当很容易及时计算父母时），这避免了查找`A`哈希的麻烦。

# css - CSS定位问题

> ID：12061950
> 
> 赞同：0
> 
> 时间：2012-08-21T19:45:35.477
> 
> 标签：css

我目前正在处理此[页面](http://allfashionsunglasses.com/)，当它最初加载时，幻灯片缩略图将位于它们应该在的位置，但稍后会下降。我试过改变 CSS 从

```
.pika-thumbs {
    width: 995px;
    margin-left: 55px;
} 
```

到

```
.pika-thumbs {
    width: 995px;
    margin-left: 55px;
    position: relative;
    top: -150px;
    Z-index: 999;
} 
```

它完全停留在我希望它停留的位置，但是当我删除整个 CSS 之类的东西时，空间会一直存在并消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:48:22.613

您忘记了分号后`relative`：

```
.pika-thumbs {
    width: 995px;
    margin-left: 55px;
    position: relative;
    top: -150px;
    z-index: 999;
} 
```

**编辑：**

> 它完全停留在我希望它停留的位置，但是当我删除整个 CSS 之类的东西时，空间会一直存在并消失。

这是使用`position: relative`负值的现实。尝试`margin-top: -150px;`代替`top`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:50:04.420

定位，不是定位：

```
.pika-thumbs {
    width: 995px;
    margin-left: 55px;
    position: relative;
    top: -150px;
    z-index: 999;
} 
```

# asp.net-membership - ASP.NET MVC4 中的 WebSecurity 与 FormsAuthentication

> ID：12061953
> 
> 赞同：3
> 
> 时间：2012-08-21T19:45:46.263
> 
> 标签：asp.net-membership, asp.net-mvc-4

我想我正在尝试在项目中混合使用两个提供商，但我希望将网络安全与我的表单身份验证结合使用。我需要使用 Facebook 和 google 进行 OAUTH 身份验证的网络安全。

当我尝试使用 facebook 登录时出现的错误是

要调用此方法，该`Membership.Provider`属性必须是 的实例`ExtendedMembershipProvider`。

以下是代码示例。我怎样才能同时使用两者？

```
public ActionResult ExternalLoginCallback(string returnUrl)
        {
            AuthenticationResult result = OAuthWebSecurity.VerifyAuthentication(Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl }));
            if (!result.IsSuccessful)
            {
                return RedirectToAction("ExternalLoginFailure");
            }

            if (OAuthWebSecurity.Login(result.Provider, result.ProviderUserId, createPersistentCookie: false))
            {
                return RedirectToLocal(returnUrl);
            }

            if (User.Identity.IsAuthenticated)
            {
                // If the current user is logged in add the new account
                OAuthWebSecurity.CreateOrUpdateAccount(result.Provider, result.ProviderUserId, User.Identity.Name);
                return RedirectToLocal(returnUrl);
            }
            else
            {
                // User is new, ask for their desired membership name
                string loginData = OAuthWebSecurity.SerializeProviderUserId(result.Provider, result.ProviderUserId);
                ViewBag.ProviderDisplayName = OAuthWebSecurity.GetOAuthClientData(result.Provider).DisplayName;
                ViewBag.ReturnUrl = returnUrl;
                return View("ExternalLoginConfirmation", new RegisterExternalLoginModel { UserName = result.UserName, ExternalLoginData = loginData });
            }
        } 
```

和

```
public ActionResult Login(LoginModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            if (Membership.ValidateUser(model.UserName, model.Password))
            {
                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                if (Url.IsLocalUrl(returnUrl))
                {
                    return Redirect(returnUrl);
                }
                else
                {
                    return RedirectToAction("Index", "Home");
                }
            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:39:22.183

可能与我[MVC4 ExtendedMembershipProvider 和 entityframework](https://stackoverflow.com/questions/12181186/)的问题相同 。我删除了通用提供程序 nuget 包，这个特定错误消失了。

Jon Galloway 的这篇[“最近的”文章也可能会有所帮助。](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T17:24:33.807

如果您使用的是 Visual Studio，您可能希望节省所有这些精力。MVC 4 Internet 模板带有四个开箱即用的外部身份提供程序。我已经对它们进行了测试，Google 帐户、Microsoft 帐户、Facebook 登录和 Twitter 登录都可以正常工作，零代码行！

我认为 Web 表单模板也提供了相同的功能。

更多信息请访问[http://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:28:22.203

您可以使用`ExtendedMembershipProvider`. 例如：内置的`SimpleMembershipProvider`.

每个`ExtendedMembershipProvider` **IS A** `MembershipProvider`。

[在Jon Galloway 的博客](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)上阅读更多内容。

# css - 为什么我不能通过 CSS “-webkit-transform: rotateY(90deg);”隐藏一个 div？

> ID：12061954
> 
> 赞同：2
> 
> 时间：2012-08-21T19:45:47.237
> 
> 标签：css, transform, perspective, css-transforms

```
<!DOCTYPE html>
<meta charset="utf-8">
<title>An HTML Document</title>
<style>
    #container {
        -webkit-perspective: 300px;
        -moz-perspective: 300px;
    }
    #contents {
        width: 300px;
        height: 300px;
        background: red;
        -webkit-transform: rotateY(90deg);
        -moz-transform: rotateY(90deg);
    }
</style>
<div id="container">
    <div id="contents"></div>
</div> 
```

[http://jsfiddle.net/7Ss6m](http://jsfiddle.net/7Ss6m)

我想`.contents`用 CSS隐藏`transform: rotateY(90deg);`。但是上面的代码不能正常工作。如果我删除 CSS `perspective`，它可以正常工作。但我需要 CSS `perspective`。

当我还设置 CSS 时，如何在 Y 轴上成功旋转`.contents`到真正的 90 度？`perspective``.container`

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:04:33.307

显然，您的透视原点是错误的（即，它与您的 是离轴的`rotateY()`）。添加`-webkit-perspective-origin-x: 150px`似乎可以解决问题：[更新 fiddle](http://jsfiddle.net/7Ss6m/1/)。

# android - 未在列表视图中正确访问缓存中的图像

> ID：12061962
> 
> 赞同：0
> 
> 时间：2012-08-21T19:46:37.580
> 
> 标签：android, android-listview, android-imageview

我正在从服务器下载图像`ListView`并将其存储到 SD 卡中。

并且当下次列表视图出现时，我仅使用异步方法从 SD 卡访问它，我使用此方法，以便用户不需要访问服务器。

但是，当所有图像都从 SD 卡加载到 listview 中时，如果我滚动它的速度非常快，那么每次它尝试仅从 SD 卡访问它而不是从缓存中访问我猜。

从服务器下载图像时我也遇到了同样的问题，这就是为什么我想将它存储到 SD 卡中。但我面临同样的问题。

这是我的代码[ListImageDownloader](http://pastebin.com/emF4Ztxk)。在那里有一个函数被调用`downloadBitmap(String)`，我创建了另一个名为的函数`downloadSDBitmap(String)`，其代码如下

```
Bitmap downloadSDBitmap(String urlId) {

         Bitmap bitmap = null;
         File file = new File( 
                 fileLoc +"/"+ urlId+".png");

         if(file.exists()){
             Log.d("PATH" , file.getAbsolutePath());

             bitmap = BitmapFactory.decodeFile(file.getAbsolutePath());
         }

         return bitmap;

} 
```

除此之外，整个缓存代码都是一样的。所以任何人都可以帮助我如何改进它，`Gtalk`当我快速滚动时它只加载一次图像，如果我快速滚动图像保持原样并且不从网络获取

**更新**

这些是我的参数

```
final static int MAX_ENTRIES = 150;

private static final int HARD_CACHE_CAPACITY =50;
private static final int DELAY_BEFORE_PURGE = 10 * 1000; // in milliseconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:09:05.710

缓存从根本上依赖于可用内存。如果您的应用程序有剩余内存，您将需要实现一个很好的解决方案来缓存您的位图。

过去是`SoftReference`/`WeakReference`一种流行的缓存位图的方法（我在一年前尝试过，你可以[在这里阅读我的问题](https://stackoverflow.com/questions/5757969/softreference-gets-garbage-collected-too-early)）。但在 Android 的后期 API 中，垃圾收集器变得更加积极地收集它们，因此不再推荐使用它们。

现在推荐使用[LRU 缓存](http://developer.android.com/reference/android/util/LruCache.html)。[Android 开发者网站](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html#memory-cache)上有一个示例。

# objective-c - UIManagedDocument 上的 saveToURL 上的核心数据失败

> ID：12061965
> 
> 赞同：3
> 
> 时间：2012-08-21T19:46:57.293
> 
> 标签：objective-c, ios, core-data, uimanageddocument

我正在尝试设置核心数据，但是当我在其上运行`saveToURL`时，`UIManagedDocument`它无法创建它。这是我的代码；

```
@property (nonatomic, strong) UIManagedDocument *currentUserDatabase;

@synthesize currentUserDatabase = _currentUserDatabase;

- (void)setCurrentUserDatabase:(UIManagedDocument *)currentUserDatabase
{
    _currentUserDatabase = currentUserDatabase;
    [self useDocument];
} 

- (void)isUserLoggedIn
{
    if (!self.currentUserDatabase) {
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentationDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"Current User Database"];
        self.currentUserDatabase = [[UIManagedDocument alloc] initWithFileURL:url];
    }
}

- (void)useDocument
{
    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.currentUserDatabase.fileURL path]]) {
        [self.currentUserDatabase saveToURL:self.currentUserDatabase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            if (success) {
                NSLog(@"create success");
            } else {
                NSLog(@"create failed");
            }
            //[self getCurrentUser];
        }];
    } else if (self.currentUserDatabase.documentState == UIDocumentStateClosed) {
        [self.currentUserDatabase openWithCompletionHandler:^(BOOL success) {
            //[self getCurrentUser];
        }];
    } else if (self.currentUserDatabase.documentState == UIDocumentStateNormal) {
        //[self getCurrentUser];
    }
} 
```

`isUserLoggedIn`首先被调用，但是当它被创建时，我得到日志“创建失败” - 我不明白，因为没有错误。有什么方法可以获取错误信息吗？有谁知道为什么它不起作用？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T08:33:56.533

痛得解脱，我真的要开始逐字阅读我的密码了！我使用的是`NSDocumentationDirectory`而不是`NSDocumentDirectory`

# python - 如何在 Python 中指定文字生成器类型？

> ID：12061966
> 
> 赞同：3
> 
> 时间：2012-08-21T19:47:00.047
> 
> 标签：python, generator, assert, literals

我需要检查某个变量是否是生成器对象。我将如何指定文字生成器类型来代替 ??? 以下？

```
def go():
    for i in range(999):
    yield i
la = go()
print repr(type(la))

<type 'generator'>

assert type(la) == ??? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T19:48:37.370

使用`types.GeneratorType`（来自`types`模块）。但是，您应该考虑一下为什么要这样做。通常最好避免显式类型检查并尝试迭代对象并查看它是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T19:49:21.523

```
import types
assert isinstance(la, types.GeneratorType) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T19:48:48.827

一般来说，你不会。您将查找名称为`__iter__`和的属性`next`，这两个函数都是函数。

# vbscript - 通过 VBScript 的简单 CMD 参数

> ID：12061969
> 
> 赞同：1
> 
> 时间：2012-08-21T19:47:33.553
> 
> 标签：vbscript, batch-file, cmd

有一阵子了...

我有命令行参数：

```
xml sel -t  -v "computer/general/name" nsk1501901173m.xml > test.txt 
```

这会在指定的文本文档中产生我想要的结果，但我需要通过 VBScript 运行它，而对于我的生活，我无法弄清楚......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:43:11.137

在传递应用程序参数之前，您必须使用该[`WScript.Shell`](http://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx)对象来执行应用程序和（带有 /C 参数的命令外壳），请查看此示例[`cmd /c`](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/cmd.mspx?mfr=true)

```
Set objShell = CreateObject("WScript.Shell")
objShell.run "cmd /c xml sel -t  -v ""computer/general/name"" nsk1501901173m.xml > test.txt",1,true 
```

请记住必须从 xml.exe 应用程序所在的同一位置执行哪个脚本，或者最好将 xml.exe 应用程序的位置添加到`PATH`

# c# - 后台工作人员未取消

> ID：12061970
> 
> 赞同：0
> 
> 时间：2012-08-21T19:47:33.913
> 
> 标签：c#, wpf, .net-4.0, backgroundworker

所以我有一个网页抓取工具，它使用 backgroundworker 来处理每个页面。我还想提一下，我正在使用 MVVM 轻框架。

在我的 MainViewModel 构造函数中，我正在初始化后台工作程序：

```
backgroundWorker = new BackgroundWorker()
        {
            WorkerReportsProgress = true,
            WorkerSupportsCancellation = true
        };
        backgroundWorker.DoWork += new DoWorkEventHandler(backgroundWorker_DoWork); 
```

在 WebBrowser 控件的 LoadCompleted 事件上，我启动了后台工作程序：

```
wb = sender; //sender is the webbrowser control
        if (!backgroundWorker.IsBusy)
        {
            backgroundWorker.RunWorkerAsync();
        } 
```

我接下来的两种方法是 DoWork 和 StopWork：

```
private System.Threading.AutoResetEvent _resetEvent = new System.Threading.AutoResetEvent(false);
    private object wb;

    void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker wk = sender as BackgroundWorker;

        if (wb != null)
        {
            FetchPage(wb);

            if (wk.CancellationPending)
            {
                MessageBox.Show("Cancellation pending!");
            }

            _resetEvent.Set();
        }
    }

    private void StopWork(object sender)
    {
        backgroundWorker.CancelAsync();
        _resetEvent.WaitOne();
    } 
```

fetchpage 方法将获取 webbrowser 控件的源代码并开始解析它的内容。

在 FetchPage 内部，我使用 BeginInvoke 来更新我的 UI 线程：

```
Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Background, new Action(
            () =>
            { ... } 
```

我的问题：当我点击取消按钮时，StopWork 方法被调用，backgroundWorker 上的取消属性被正确设置为 true，但应用程序仍在继续。我的 if (wk.CancellationPending) 总是假的。

知道我在这里做错了什么吗？我在网上和 StackOverflow 上查看了大量示例，它们都陈述了我已经做过的相同事情。

谢谢。

编辑：

在 Ernos 回复后，我尝试将 CancellationPending 属性传递给 FetchPage 方法并在不同位置检查它，但它并没有停止处理。

```
void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker wk = sender as BackgroundWorker;

        if (wb != null)
        {
            FetchPage(wb, wk.CancellationPending);

            _resetEvent.Set();
        }
    } 
```

在 FetchPage 内部，我使用 BeginInvoke 来更新我的 UI 线程：

```
private void FetchPage(object sender, bool stopAll)
{
     if (stopAll)
     {
         return;
     }
Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Background, new Action(
            () =>
            { ... } 
```

我尝试和工作的是：

```
private bool stopAllWork = false;

...

private void StopWork(object sender)
    {
        stopAllWork = true;
        backgroundWorker.CancelAsync();
        _resetEvent.WaitOne();
    } 
```

然后在 DoWork 内部：

```
void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker wk = sender as BackgroundWorker;

        if (wb != null)
        {
            FetchPage(wb, stopAllWork);

            _resetEvent.Set();
        }
    } 
```

现在，由于这个实现，我担心是否会有任何流氓 backgroundWorkers 剩余？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:50:03.710

您需要评估方法的`CancellationPending`内部`FetchPage`。

您在工作量大后检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:00:42.187

埃尔诺是正确的。您正在检查它是否在完成所有工作后被取消。为了保持模块化，您可以考虑不将后台工作程序传递给 FetchPage；如果你应该取消，而是传递一个返回的函数。

```
public void FetchPage(WebBrowser wb, Func<bool> cancelNow)
{
  ...
  if(cancelNow()) {
    return;
  }
  ...
} 
```

你会这样称呼它

```
FetchPage(wb, () => wk.CancellationPending); 
```

但是您可以将该函数放在另一个不使用后台工作程序的应用程序中并像这样调用它：

```
FetchPage(wb, () => false); 
```

注意：确保您正在检查是否应该在工作完成时取消。例如，如果大部分工作发生在循环中，请检查循环内部。如果有一系列步骤，请在每个步骤之间进行检查。

# maven - Maven - 重命名文件，名称放在变量中

> ID：12061972
> 
> 赞同：1
> 
> 时间：2012-08-21T19:47:37.150
> 
> 标签：maven, properties, file-rename, maven-antrun-plugin

所以这是我的问题，我有文件，使用不同的配置文件时，每个文件都必须以不同的方式重命名。

所以我有 2 个 .properties 文件，你可以在 dev.properties 中找到 dev.properties 和 rec.properties：

```
machineName=marin
prefix=DEV
fileOneName=node 
```

在 rec.properties 你可以找到：

```
machineName=marin
prefix=REC
fileOneName=node 
```

我现在想要的是能够在设置 wich 配置文件以使用时使用这些变量的内容：

```
 <profile>
        <id>dev</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <!-- Filter name -->
            <cogepat.filter.properties>dev.properties</cogepat.filter.properties>
        </properties>
    </profile> 
```

但是我的变量在使用时没有被填充：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
                <executions>
                    <execution>
                        <id>run-ant-rename-war</id>
                        <phase>package</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <tasks>
                                 <copy file="mavencopyfrom/adeplacer.txt" tofile="mavencopyto/${prefix}_${fileOneName}${machineName}.txt"/>
                            </tasks>
                        </configuration>
                    </execution>
                </executions>
        </plugin>
    </plugins>
</build> 
```

我最终得到的是一个名为：

```
${prefix}_${fileOneName}${machineName}.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:39:59.917

尝试设置这样的属性：

```
<profile>
    <id>dev</id>
    <activation>
        <activeByDefault>true</activeByDefault>
    </activation>
    <properties>
        <machineName>marin</machineName>
        <prefix>DEV</prefix>
        <fileOneName>node</fileOneName>
    </properties>
</profile> 
```

这应该够了吧。

# iphone - 更改 UIView 的框架会导致新区域中的内容无法触摸

> ID：12061973
> 
> 赞同：0
> 
> 时间：2012-08-21T19:47:37.363
> 
> 标签：iphone, ios, uiview, frame, bounds

所以我想在特定条件（消息应用程序）的情况下扩展一个uiview。我使用此代码扩展和收缩视图（并在图片中移动适当的按钮以位于较新的扩展区域中）：

```
-(void)transformKeyBoardViewForPictureMessage:(int)heightToAdd
{
    //Resize whole view
    CGRect oldFrame = self.frame;
    self.frame = CGRectMake(oldFrame.origin.x, oldFrame.origin.y, oldFrame.size.width, oldFrame.size.height + heightToAdd);
    //move up the preview imageview
    CGRect previewFrame = self.picPreview.frame;
    self.picPreview.frame = CGRectMake(previewFrame.origin.x, previewFrame.origin.y + heightToAdd, previewFrame.size.width, previewFrame.size.height);
    //move up the remove pic button
    self.removePicButton.frame = CGRectMake(removeFrame.origin.x, removeFrame.origin.y + heightToAdd, removeFrame.size.width, removeFrame.size.height);
    self.backgroundColor = [UIColor lightGrayColor];
} 
```

这种工作方式是 removePicButton 和 picPreview 向上移动，我可以看到它们；但是我不能触摸 removePicButton 或“扩展框架”的新区域中的任何元素，此外背景颜色只会在视图的旧框架内重置，而不是新框架部分（只有清晰的背景）。

# r - 事件发生的代码开始

> ID：12061978
> 
> 赞同：0
> 
> 时间：2012-08-21T19:47:53.507
> 
> 标签：r

我有一个向量随着时间的推移给出事件（在这种情况下为叛乱）的存在/不存在，我想创建另一个给出事件开始的向量，即：

```
occurrence <- c(1, 1, 0, 0, 1, 0, 0, 1, 1, 1)
onset <- c(0, 0, 0, 0, 1, 0, 0, 1, 0, 0) 
```

以下循环将得到我需要的东西：

```
answer <- 0
for (t in 2:length(occurrence) {
  answer[t] <- ifelse((occurrence[t]-occurrence[t-1])==1, 1, 0)
}

> answer
[1] 0 0 0 0 1 0 0 1 0 0 
```

有没有更简单的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:02:04.327

使用`pmax()`和`diff()`：

```
c(NA, pmax(0, diff(occurrence)))
 [1] NA  0  0  0  1  0  0  1  0  0 
```

这是有效的，因为`diff()`计算连续元素之间的差异，导致`1`每次开始。然后您需要删除`0`and`-1`值。`pmax`是一个*并行*版本，`max()`并且可以方便地将所有更改`-1s`为零

```
diff(occurrence)
[1]  0 -1  0  1 -1  0  1  0  0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:55:16.480

您可以将先前的时间间隔与当前的时间间隔进行比较，并使用以下代码选择 0 后跟 1 的时间间隔：

```
> c(0, as.numeric(occurrence[-length(occurrence)] == 0 & occurrence[-1]==1) )
 [1] 0 0 0 0 1 0 0 1 0 0 
```

（我用前导 0 填充它，因为您不希望前导出现：1 被计为新事件。）

# android - 在 android 中推送通知：无法从 GCMIntentService 调用 Toast

> ID：12061982
> 
> 赞同：0
> 
> 时间：2012-08-21T19:48:10.313
> 
> 标签：android, android-intent, push-notification, google-cloud-messaging

我正在尝试在 Android 平台上使用 GCM 设置推送通知。

当我在 GCMIntentService 中执行此操作时：

```
@Override
protected void onMessage(Context context, Intent intent) {
     Toast.makeText(context,intent.getStringExtra("message"), Toast.LENGTH_LONG).show();
} 
```

我收到以下错误：`sending message to a Handler on a dead pool`

但是当我在我的主要意图中的任何地方运行同一行时，它工作得很好。

我尝试添加在 google 上找到的添加“Class.forName("android.os.AsyncTask");”的修复程序 到我的主要意图中的 onCreate 方法。但这无济于事。

**是否可以将 GCMIntentService 中的消息卸载到我的主要活动中，然后从那里简单地调用 Toast？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T21:18:58.863

你应该为此使用处理程序。代码如下：

```
private void handleMessage( Intent intent )
{
    final String message = intent.getExtras().getString("message");

  Thread t = new Thread()
    {

        public void run()
        {

            Message myMessage = new Message();
            Bundle resBundle = new Bundle();
            resBundle.putString( "message", message );
            myMessage.setData( resBundle );
            handler.sendMessage( myMessage );
        }
    };
    t.start();
 }

private Handler handler = new Handler()
{

      public void handleMessage( Message msg )
            {

             Toast.makeText( getBaseContext(), msg.getData().getString( "message" ), Toast.LENGTH_LONG ).show();
            }
}; 
```

此代码应在处理消息的 GCM 服务上实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:58:43.637

将上下文更改为`Toast.makeText(context, ...)`to`getApplicationContext()`怎么样？

# unit-testing - 使用 boost_check 结果

> ID：12061984
> 
> 赞同：0
> 
> 时间：2012-08-21T19:48:16.127
> 
> 标签：unit-testing, boost, shared-ptr

相同的 boost_check 命令在不同的文件中给出了不同的结果。

我在三个不同的文件中有相同的以下代码。

```
 boost_check ("bb" < "bbb" )  ; 
```

虽然其中两个通过了，但其中一个失败了。没有通过使用 boost::shared_ptr (v:1_41_0) 的类的关联；

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T03:14:49.760

“bb”和“bbb”是类型`const char *`

当你比较它们时，你是在比较指针，而不是字符串。哪个更少取决于许多其他事情，在编译时确定。

# asp.net - 删除后如何强制重新创建 OAuth Sql Server 数据库对象？

> ID：12061988
> 
> 赞同：0
> 
> 时间：2012-08-21T19:48:26.357
> 
> 标签：asp.net, sql-server, oauth

使用 ASP.net 4.5，我创建了一个会员数据库并设置了一些开放的身份验证提供程序。在调整数据库的过程中，我删除了打开的身份验证表（UsersOpenAuthAccounts 和 UsersOpenAuthData）——我找不到生成这些项目的脚本或任何其他方式来重新生成它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:48:26.357

ASP.Net 成员库创建一个名为 __MigrationHistory 的系统表。创建这些 OAuth 元素时，它会创建此表（如果缺少）并在那里创建一个记录，该记录用作指示不需要创建数据库项目的标志。删除表，成员库将重新创建元素。

您将收到指示 __MigrationHistory 表丢失的异常 - 忽略此错误，因为它将与其他元素一起重新创建。

但请注意 - __MigrationHistory 是 Entity Framework 使用的表...您可以将其顶起以尝试解决此问题，因此请随身携带备份。

# version-control - Bzr 无工作树实际源存储

> ID：12061993
> 
> 赞同：0
> 
> 时间：2012-08-21T19:48:37.233
> 
> 标签：version-control, dvcs, bazaar

我无法从集市文档中回答的问题。如果我有一个共享存储库，其分支没有工作树。因此，分支文件夹只有一个 .bzr/ 文件夹，而不是单个源代码文件或任何我可能进行版本控制的文件。

如果我在本地使用这个分支

```
bzr branch sharedrepository/somebranch localbranch 
```

我得到一个带有源代码的分支！共享存储库端存储的源到底在哪里？我查看了 .bzr 内部，但找不到。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T02:19:35.163

该`.bzr`目录包含存储库中的所有修订。当您从该存储库分支时，默认情况下，它会创建一个带有工作树的分支，并将最新修订签出到该工作树中。

修订数据在`.bzr`目录中打包和压缩，您将无法在其中找到浮动的单个源文件。

# sqlite - 如何在 SQLite 中找到每个组的最高公共数字？

> ID：12061998
> 
> 赞同：1
> 
> 时间：2012-08-21T19:48:59.730
> 
> 标签：sqlite, greatest-n-per-group

这是我的表格示例：

```
LETTER  NUMBER
a   1
a   2
a   4
b   1
b   2
b   3
c   1
c   2
c   3
d   1
d   2
d   3
e   1
e   2
e   3 
```

我想要的结果：

```
LETTER  NUMBER
a   2
b   2
c   2
d   2
e   2 
```

与“a”匹配的最大数字是 4，而其他字母则为 3。但是，它们共有的最高字母是 2。这就是结果表中 NUMBER 为 2 的原因。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:16:21.543

让我们打电话给你的桌子`l`。这是一个非常低效的解决方案：

```
select l.LETTER, max(l.NUMBER)
from l
where
    (select count(distinct LETTER) from l)
  = (select count(distinct l2.LETTER) from l as l2 where l2.NUMBER = l.NUMBER)
group by l.LETTER; 
```

有点乱是吧？