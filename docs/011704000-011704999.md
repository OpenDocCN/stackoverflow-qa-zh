# StackOverflow 问答 11704000-11704999

# django - 处理包含多行的 Excel 文件时出现错误 502

> ID：11704004
> 
> 赞同：3
> 
> 时间：2012-07-28T19:29:20.277
> 
> 标签：django, nginx

处理包含多行的 Excel 文件时出现错误 502。

使用 Django / Nginx

问题不在于文件的重量小于 1Mb。

此页面适用于 200 行的文件，当文件有更多行时问题开始，然后页面处理此文件的时间过长。

这是错误：

```
2012/07/28 14:29:54 [error] 18515#0: *34 upstream prematurely closed connection while reading response header from upstream, client: 127.0.0.1, server: localhost, request: "POST /import/ HTTP/1.1", upstream: "http://127.0.0.1:9000/import/", host: "localhost:8080", referrer: "http://localhost:8080/import/" 
```

我为变量使用了非常大的值，但我一直收到同样的错误。

这是网站的配置：

* * *

```
upstream app_server {
    server 127.0.0.1:9000 fail_timeout=3600s;
    keepalive 3600s;
}

server {
    listen 8080;
    client_max_body_size 4G;
    server_name localhost;

    keepalive_timeout           3600s;
    client_header_timeout       3600s;
    client_body_timeout         3600s;
    send_timeout                3600s;

    location /static/ {
        root  /my path/;
        autoindex on;
        expires 7d;
    }

    location /media/ {
        root  /my path/;
        autoindex on;
        expires 7d;
    }

    location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header Host $http_host;
        proxy_redirect off;  

        proxy_connect_timeout       3600s;
        proxy_send_timeout          3600s;
        proxy_read_timeout          3600s;      

        if (!-f $request_filename) {
            proxy_pass http://app_server;
            break;
        }       
    }
} 
```

* * *

这是全局配置：

* * *

```
user  www-data;
worker_processes  1;

error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include     /etc/nginx/mime.types;
    access_log  /var/log/nginx/access.log;
    sendfile        on;
    keepalive_timeout  3600s;
    tcp_nodelay        on;

    client_header_timeout       3600s;
    client_body_timeout         3600s;
    send_timeout                3600s;
    proxy_connect_timeout       3600s;
    proxy_send_timeout          3600s;
    proxy_read_timeout          3600s; 

    client_max_body_size 200m;
    client_body_buffer_size 128k;

    gzip  on;
    gzip_disable "MSIE [1-6]\.(?!.*SV1)";

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
} 
```

* * *

你能给我一些帮助吗？

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:48:50.420

最好的选择是重写例程以使用 django-celery，但如果你想要一个快速的解决方案，你可以尝试通过添加以下内容来升级 Nginx 中代理传递的超时：

```
proxy_connect_timeout 300s;
proxy_read_timeout 300s; 
```

你应该在 /var/nginx/sites-available/[site-config] 上添加这个配置到一个特定的站点或者 /var/nginx/nginx.conf 如果你想增加 nginx 服务的所有站点的超时时间。

如果您使用的是 gunicorn，则还必须添加 --timeout=300。例子：

```
gunicorn_django -D -b 127.0.0.1:8901 --workers=2 --pid=/var/webapp/campus.pid --settings=settings.production --timeout 300 --pythonpath=/var/webapp/campus/ 
```

参考：

*   [http://wiki.nginx.org/HttpProxyModule#proxy_connect_timeout](http://wiki.nginx.org/HttpProxyModule#proxy_connect_timeout)

*   [http://reinout.vanrees.org/weblog/2011/11/24/apache-nginx-gunicorn-timeout.html](http://reinout.vanrees.org/weblog/2011/11/24/apache-nginx-gunicorn-timeout.html)

*   [Gunicorn Nginx 超时问题](https://stackoverflow.com/questions/6816215/gunicorn-nginx-timeout-problem/9931216)

# mysql - mySQL 不同的加入？

> ID：11704012
> 
> 赞同：4
> 
> 时间：2012-07-28T19:30:13.427
> 
> 标签：mysql, left-join, distinct

我有以下数据库结构

```
table_1
  text_1 (INT)
  text_2 (INT)

i18n
  id_i18n (PK INT)
  locale  (PK VARCHAR(5))
  text    (TEXT) 
```

在 table_1 上，列 text_1 和 text_2 是指向某些 i18n.id_i18n 条目的外键。我可以轻松加入特定语言环境的条目

```
SELECT t1.text as text_1, t2.text as text_2
FROM table_1
LEFT JOIN i18n as t1 ON text_1 = t1.id_i18n and t1.locale = "en_us"
LEFT JOIN i18n as t2 ON text_2 = t2.id_i18n and t2.locale = "en_us" 
```

我还可以得到以下

```
row1: locale, text_1, text_2
row2: locale, text_1, text_2
row3: locale, text_1, null
row4: locale, text_1, text_2 
```

使用这个查询

```
SELECT t1.text as text_1, t2.text as text_2
FROM room
LEFT JOIN i18n as t1 ON text_1 = t1.id_i18n
LEFT JOIN i18n as t2 ON text_2 = t2.id_i18n and t1.locale = t2.locale
group by t1.locale; 
```

假设我有以下 i18n 条目

```
 id_i18n   locale  text
row1: 1         en_us   text_1_for[en_us]
row2: 1         en_gb   text_1_for[en_gb]
row3: 1         el_gr   text_1_for[el_gr]
row4: 2         en_us   text_2_for[en_us]
row5: 2         en_gb   text_2_for[en_gb]
row6: 2         pr_pk   text_2_for[pr_pk]
row7: 1         en_ca   text_1_for[en_ca] 
```

然后是一个链接到那些名为 tbl 的表

```
 id, i18n_text_1, i18n_text_2
row1 1   1            2 
```

我想产生一个结果集

```
 locale,  text_1,              text_2
row1: en_us    text_1_for[en_us]    text_2_for[en_us]
row2: en_gb    text_1_for[en_gb]    text_2_for[en_gb]
row3: el_gr    text_1_for[el_gr]    null
row4: pr_pk    null                 text_2_for[pr_pk]
row5: en_ca    text_1_for[en_ca]    null 
```

希望这可以帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T20:24:20.093

试试这个：

```
SELECT     a.locale, c.text AS text_1, d.text AS text_2
FROM       (SELECT DISTINCT locale FROM i18n) a
CROSS JOIN table_1 b
LEFT JOIN  i18n c ON b.text_1 = c.id_i18n AND a.locale = c.locale
LEFT JOIN  i18n d ON b.text_2 = d.id_i18n AND a.locale = d.locale 
```

## [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ae650/7/0)

* * *

**编辑**：这可能会更好：

```
SELECT
    a.locale, b.text_1, c.text_2
FROM
    (SELECT DISTINCT locale FROM i18n) a
LEFT JOIN
(
    SELECT b.locale, b.text AS text_1
    FROM   table_1 a
    JOIN   i18n b ON a.text_1 = b.id_i18n
) b ON a.locale = b.locale
LEFT JOIN
(
    SELECT b.locale, b.text AS text_2
    FROM   table_1 a
    JOIN   i18n b ON a.text_2 = b.id_i18n
) c ON a.locale = c.locale 
```

## [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ae650/11/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T19:34:47.597

你能做到吗

```
SELECT text
  FROM table_1
  JOIN i18n ON i18n_title = i18n.id_i18n OR i18n_name = i18n.id_i18n 
```

# javascript - 需要有关 javascript oops 的帮助

> ID：11704013
> 
> 赞同：4
> 
> 时间：2012-07-28T19:30:16.563
> 
> 标签：javascript, oop, object, prototype

```
var a = function () {};
a.prototype.test  = function () {
alert("hello");
} 
```

工作正常，但在以下代码中

```
var b = new Object();
b.prototype.test  = function () {
alert("hello");
} 
```

我收到此错误类型错误：无法设置未定义的属性“测试”，我无法获取它。

根据我的理解， b 已经从**Object**继承了原型对象。所以我们应该能够以下面的方式添加一个新属性，比如 b.prototype.x = 1 。

但是**Object** .prototype.x = 1 有效。

typeof **Object**和 a 给出函数，但 b 是对象

我不明白为什么 b.prototype.x = 1 不起作用

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:03:02.420

`Object`是一个函数，它有一个`prototype`属性。

`new Object()`创建一个没有`prototype`属性的对象。

* * *

如果要设置对象的原型，可能意味着设置对象构造函数的原型。

```
b.constructor.prototype.test = ... 
```

* * *

澄清一些原型/构造函数的废话：

一个函数有一个`prototype`，它是一个对象。它指定要添加到该函数实例的属性。

一个对象有一个`constructor`，它是一个函数。它指定用于创建对象的函数。

请注意，函数是一个对象，因此它也有一个`constructor`，即`Function`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T20:07:59.377

这是一个棘手的问题——原型字段有两种类型，一种是内部的，一种是外部的。您可以使用普通原型字段直接访问的外部字段。内部的用于在对象中找不到字段/键时进行查找。

如果这样做`new blah()`，它会创建一个新对象，其内部原型字段设置为 的外部原型字段`blah`。默认情况下，新建对象的外部原型字段为`undefined`. 特别是，这就是评估 b.prototype.x 失败的原因——您不能对未定义的值进行字段访问。如果您希望可以为新的外部原型创建一个新对象，例如`b = new Object(); b.prototype = {}`.

您可以在此处查看内部/外部原型字段：

```
Object.prototype.x = 4
b = new Object()
b.x // returns 4 
```

发生的事情是 b 的内部原型字段指向 Object.prototype，因此对失败的 b 的查找被重定向到在 Object.prototype 中进行查找。

我不知道为什么，但是新创建的函数将它们的外部原型字段设置为 Object——这导致第一个函数工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T19:39:40.743

你可以参考这个[资源](http://phrogz.net/js/classes/OOPinJS2.html)

它不适用于新对象，因为它没有`prototype`属性集。`prototype`属性指向您继承的对象。并且由于`new Object()`没有可继承的对象，因此将其`prototype`设置为`undefined`

`function`另一方面，默认情况下有一个超级对象（它继承）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T19:34:11.830

你应该可以这样做：

```
var b = {};
b.test = function() {
    alert('Hello');
}; 
```

# php - 如何通过 API 调用公开 Facebook 帖子

> ID：11704031
> 
> 赞同：0
> 
> 时间：2012-07-28T19:33:32.173
> 
> 标签：php, facebook, facebook-graph-api

我下载了 facebook sdk for php。我创建了一个 php 脚本来将消息发布到我的 facebook 墙上。问题是帖子是“私人的”，只有我能看到。我如何将其公开以供所有人查看？这是执行帖子的代码行：

```
$facebook->api("/me/feed", "post", array(
    message => $_REQUEST['msg'] ? $_REQUEST['msg'] : 'Forgot to check for msg',
    picture => "http://cdn.papyimg.com/wp-content/uploads/2011/03/Windows-95-500x312.png",
    link => "http://en.wikipedia.org/wiki/Windows_95",
    name => "Go windows 95",
    caption => "Caption - this is the best operating system in the world!",
    privacy => array('value'=>'EVERYONE'),
)); 
```

根据我对 API 中文档的理解，我有一个关于隐私的论点。但这不会改变我帖子的隐私状态。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:26:26.693

转到您的 Facebook 个人资料设置并单击应用程序。在列表中找到您的应用并将其删除。现在再次转到您的应用程序。当您被要求授权应用程序时，请确保为您的应用程序发布的帖子选择公共范围。如果您愿意，您还可以编辑应用程序的设置（在developers.facebook.com）并公开默认选项，请查看“身份验证对话框”部分。

# drupal - 是否可以在 Drupal 中的公开过滤器上实现条件选择？

> ID：11704034
> 
> 赞同：2
> 
> 时间：2012-07-28T19:33:44.663
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

我想知道是否可以使用视图暴露过滤器来实现类似于[http://bit.ly/MEdfiq的东西？](http://bit.ly/MEdfiq)那就是只显示与先前选择的暴露过滤器相关的数据？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:55:50.097

试试[Hierarchical Select](http://drupal.org/project/hierarchical_select) contrib 模块，这是一个很棒的模块来实现这一点。

这是[分层选择 API](http://drupal.org/node/532724)的文档。

希望这行得通……穆罕默德。

# objective-c - 如果 ARC 关闭，那么在编译时失败的正确方法是什么？

> ID：11704039
> 
> 赞同：1
> 
> 时间：2012-07-28T19:34:27.120
> 
> 标签：objective-c, automatic-ref-counting

我正在编写一些我希望分拆成库或至少与其他人共享的 Objective-C 代码。它需要ARC才能使用，如果没有启用ARC，它会泄漏内存。

如果 ARC 关闭，使代码无法编译的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T19:57:01.593

您可以在编译时检查 ARC

```
#if __has_feature(objc_arc) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T20:23:46.277

我认为更简洁的方法是将库编译为静态库。由于 ARC 将根据规则将发布调用合并到已编译的库中，因此从那时起，添加它的项目是 ARC 还是 MRC 都无关紧要——因此库用户不会有任何麻烦。

# c# - send email asp.net c#

> ID：11704042
> 
> 赞同：12
> 
> 时间：2012-07-28T19:34:42.050
> 
> 标签：c#, asp.net, email

Is it possible to send email from my computer(localhost) using asp.net project in C#? Finally I am going to upload my project into webserver but I want to test it before uploading.

I've found ready source codes and tried run them in localhost, but neither of them work succesfully. For example this code:

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.UI;
    using System.Web.UI.WebControls;
    using System.Net.Mail;

    namespace sendEmail
    {
        public partial class _default : System.Web.UI.Page
        {
            protected void Page_Load(object sender, EventArgs e)
            {

            }
            protected void Btn_SendMail_Click(object sender, EventArgs e)
            {
                MailMessage mailObj = new MailMessage(
                    txtFrom.Text, txtTo.Text, txtSubject.Text, txtBody.Text);
                SmtpClient SMTPServer = new SmtpClient("localhost");
                try
                {
                    SMTPServer.Send(mailObj);
                }
                catch (Exception ex)
                {
                    Label1.Text = ex.ToString();
                }
            }
        }
    } 
```

So how to send email using asp.net C#? Should I setup some server configurations?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-28T19:43:32.970

Sending Email from Asp.Net:

```
 MailMessage objMail = new MailMessage("Sending From", "Sending To","Email Subject", "Email Body");
    NetworkCredential objNC = new NetworkCredential("Sender Email","Sender Password");
    SmtpClient objsmtp = new SmtpClient("smtp.live.com", 587); // for hotmail
    objsmtp.EnableSsl = true;
    objsmtp.Credentials = objNC;
    objsmtp.Send(objMail); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-28T19:39:17.933

if you have a gmail account you can use google smtp to send an email

```
smtpClient.UseDefaultCredentials = false;
smtpClient.Host = "smtp.gmail.com";
smtpClient.Port = 587;
smtpClient.Credentials = new NetworkCredential(username,passwordd);
smtpClient.EnableSsl = true;
smtpClient.Send(mailMessage); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-28T20:24:05.867

Your code above should work fine, but you need to add the following to your web.config (as an alternative to any code-based SMTP configuration):

```
 <system.net>
    <mailSettings>
      <smtp deliveryMethod="Network">
        <network host="your.smtpserver.com" port="25" userName="smtpusername" password="smtppassword" />
      </smtp>
    </mailSettings>
  </system.net> 
```

If you don't have access to a remote SMTP server (I use my own POP3 / SMTP email details), you can set up an SMTP server in your local IIS instance, but you may run in to issues with relaying (as most ISP consumer IP addresses are black listed).

A good alternative, if you don't have access to an SMTP server, is to use the following settings instead of the above:

```
 <system.net>
    <mailSettings>
      <smtp deliveryMethod="SpecifiedPickupDirectory">
          <specifiedPickupDirectory pickupDirectoryLocation="C:\mail"/>
      </smtp>
    </mailSettings>
  </system.net> 
```

This will create a hard disk copy of the email, which is pretty handy. You will need to create the directory you specify above, otherwise you will receive an error when trying to send email.

You can configure these details in code as per other answers here (by configuring the properties on the SmtpClient object you have created), but unless you're getting the information from a data source, or the information is dynamic, it's superfluous coding, when .Net already does this for you.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-28T19:42:11.730

You can send email from ASP.NET via C# class libraries found in the `System.Net.Mail` namespace. take a look at the `SmtpClient` class which is the main class involved when sending emails.

You can find code examples [in Scott Gu's Blog](http://weblogs.asp.net/scottgu/archive/2005/12/10/432854.aspx) or on the [MSDN page of SmtpClient](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx).

Additionally you'll need an SMTP server running. I can recommend to use [SMTP4Dev](http://smtp4dev.codeplex.com/) mail server that targets development and does not require any setup.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T11:03:39.967

```
Create class name SMTP.cs then

using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Net.Mail;
using System.Net.Mime;
using System.Net;

/// <summary>
/// Summary description for SMTP
/// </summary>
public class SMTP
{
    private SmtpClient smtp;

    private static string _smtpIp;
    public static string smtpIp
    {
        get
        {
            if (string.IsNullOrEmpty(_smtpIp))
                _smtpIp = System.Configuration.ConfigurationManager.AppSettings["smtpIp"];

            return _smtpIp;

        }
    }

    public SMTP()
    {
        smtp = new SmtpClient(smtpIp);
     }

    public string Send(string From, string Alias, string To, string Subject, string Body, string Image)
    {
        try
        {
            MailMessage m = new MailMessage("\"" + Alias + "\" <" + From + ">", To);
            m.Subject = Subject;
            m.Priority = MailPriority.Normal;

            AlternateView av1 = AlternateView.CreateAlternateViewFromString(Body, System.Text.Encoding.UTF8, MediaTypeNames.Text.Html);

            if (!string.IsNullOrEmpty(Image))
            {
                string path = HttpContext.Current.Server.MapPath(Image);
                LinkedResource logo = new LinkedResource(path, MediaTypeNames.Image.Gif);
                logo.ContentId = "Logo";
                av1.LinkedResources.Add(logo);
            }

            m.AlternateViews.Add(av1);
            m.IsBodyHtml = true;

            smtp.Send(m);
        }
        catch (Exception e)
        {
            return e.Message;
        }

        return "sucsess";
    }
}

then 

on aspx page

protected void lblSubmit_Click(object sender, EventArgs e)
    {
        //HttpContext.Current.Response.ContentType = "text/plain";
        //Guid guid = Guid.NewGuid();
        string EmailMessage = "<html>" +
                                      "<head>" +
                                          "<meta http-equiv=Content-Type content=\"text/html; charset=utf-8\">" +
                                      "</head>" +
                                       "<body style=\"text-align:left;direction:ltr;font-family:Arial;\" >" +
                                       "<style>a{color:#0375b7;} a:hover, a:active {color: #FF7B0C;}</style>" +
                                              "<img src=\"" width=\"190px\"  height= \"103px\"/><br/><br/>" +
                                              "<p>Name:  " + nameID.Value + ",<br/><br/>" +
                                                "<p>Email:  " + EmailID.Value + ",<br/><br/>" +
                                                  "<p>Comments:  " + commentsID.Text + "<br/><br/>" +
                                             // "Welcome to the Test local updates service!<br/>Before we can begin sending you updates, we need you to verify your address by clicking on the link below.<br/>" +
                                              //"<a href=\""></a><br/><br/>" +

                                              //"We look forward to keeping you informed of the latest and greatest events happening in your area.<br/>" +
                                              //"If you have any questions, bug reports, ideas, or just want to talk, please contact us at <br/><br/>" +
                                              //"Enjoy! <br/>" + commentsID.Text + "<br/>" +

                                               //"Test<br/><a href=\"">www.Test.com</a></p>" +
                                      "</body>" +
                                  "</html>";

        lblThank.Text = "Thank you for contact us.";
       // string Body = commentsID.Text;
        SMTP smtp = new SMTP();
        string FromEmail = System.Configuration.ConfigurationManager.AppSettings["FromEmail"];
        string mailReturn = smtp.Send(EmailID.Value, "", FromEmail, "Contact Us Email", EmailMessage, string.Empty);
        //HttpContext.Current.Response.Write("true");
        nameID.Value = "";
        EmailID.Value = "";
        commentsID.Text = "";
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-06T08:46:04.167

Send Email with Attachment using asp.net C#

```
 public void Send(string from, string to, string Message, string subject, string host, int port, string password)
    {
        MailMessage email = new MailMessage();
        email.From = new MailAddress(from);
        email.Subject = subject;
        email.Body = Message;
        SmtpClient smtp = new SmtpClient(host, port);
        smtp.UseDefaultCredentials = false;
        NetworkCredential nc = new NetworkCredential(txtFrom.Text.Trim(), password);
        smtp.Credentials = nc;
        smtp.EnableSsl = true;
        email.IsBodyHtml = true;

        email.To.Add(to);

        string fileName = "";
        if (FileUpload1.PostedFile != null)
        {
            HttpPostedFile attchment = FileUpload1.PostedFile;
            int FileLength = attchment.ContentLength;
            if (FileLength > 0)
            {
                fileName = Path.GetFileName(FileUpload1.PostedFile.FileName);
                FileUpload1.PostedFile.SaveAs(Path.Combine(Server.MapPath("~/EmailAttachment"), fileName));
                Attachment attachment = new Attachment(Path.Combine(Server.MapPath("~/EmailAttachment"), fileName));
                email.Attachments.Add(attachment);
            }               
        }
        smtp.Send(email);

    } 
```

for complete tutorial step by step (with Video) visit [http://dotnetawesome.blogspot.in/2013/09/send-email-with-attachment-using-cnet.html](http://dotnetawesome.blogspot.in/2013/09/send-email-with-attachment-using-cnet.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-27T09:12:17.007

Below is the solution for you if you do not want to use gmail or hotmail:

```
SmtpClient smtpClient = new SmtpClient("mail.MyWebsiteDomainName.com", 25);

smtpClient.Credentials = new System.Net.NetworkCredential("info@MyWebsiteDomainName.com", "myIDPassword");
smtpClient.UseDefaultCredentials = true;
smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;
smtpClient.EnableSsl = true;
MailMessage mail = new MailMessage();

//Setting From , To and CC
mail.From = new MailAddress("info@MyWebsiteDomainName", "MyWeb Site");
mail.To.Add(new MailAddress("info@MyWebsiteDomainName"));
mail.CC.Add(new MailAddress("MyEmailID@gmail.com"));

smtpClient.Send(mail); 
```

Hope it help :)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-20T13:17:34.827

Server.mappath does not exist. There is no Server object.

# objective-c - iOS – UIToolbar 的动画故障

> ID：11704045
> 
> 赞同：1
> 
> 时间：2012-07-28T19:34:52.053
> 
> 标签：objective-c, animation, uitoolbar

当我将 a 添加`UIToolbar`到视图时，我遇到了一个“奇怪的”动画故障。我正在为 UIToolbar 设置动画，因此它与 a`UIPickerView`或 a一起从底部向上滑动`UIDatePicker`。起初我看到它在向上滑动，但动画完成后它很快就消失了。当我向下滑动（动画 UIPickerView 以从屏幕上向下滑动）时会发生这种情况，然后我又有另一个 UIPickerView 向上滑动。

我注意到，如果我`- performSelector...`在上滑调用中设置延迟（这可能是什么原因造成的？

**编辑**：也许我应该将`UIToolbar`和`UIDatePicker`放在一个新`UIView`容器中？

这是我正在使用的代码：

```
if ([self.view.subviews containsObject:self.dateRepeatPicker]) {

        [self dismissDateRepeatPickerSegmentChanged:NO];

         // "Hack", if I don't delay this call the UIToolbar will not display
         [self performSelector:@selector(showDatePicker) withObject:nil afterDelay:0.3];

} else if (![self.view.subviews containsObject:self.datePicker]) {

         [self showDatePicker];
}

- (void)dismissDateRepeatPickerSegmentChanged:(BOOL)segmentChanged {

    CGRect toolbarTargetFrame = CGRectMake(0, self.view.bounds.size.height, 320, 44);
    CGRect dateRepeatPickerTargetFrame = CGRectMake(0, self.view.bounds.size.height+44, 320, 216);

    [UIView animateWithDuration:0.2 

                     animations:^{
                         self.pickerToolbar.frame = toolbarTargetFrame;
                         self.dateRepeatPicker.frame = dateRepeatPickerTargetFrame;
                     }

                     completion:^(BOOL finished) {

                         if (segmentChanged) {

                             [self.pickerToolbar removeFromSuperview];
                             [self.dateRepeatPicker removeFromSuperview];
                             [self.remindMeTableView reloadData];

                         } else {

                             [self.pickerToolbar removeFromSuperview];
                             [self.dateRepeatPicker removeFromSuperview];
                         }

                     }];
}

- (void)showDatePicker {

    // Create the Toolbar over the Picker
    CGRect toolbarTargetFrame = CGRectMake(0, self.view.bounds.size.height-216-44, 320, 44);

    if (self.pickerToolbar == nil) {

        self.pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height, 320, 44)];
        self.pickerToolbar.barStyle = UIBarStyleBlack;
        self.pickerToolbar.translucent = YES;
    }

    UIBarButtonItem *spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"picker-dismiss.png"] style:UIBarButtonItemStyleBordered target:self action:@selector(dismissDatePickerToolbar)];
    [self.pickerToolbar setItems:[NSArray arrayWithObjects:spacer, doneButton, nil]];
    [self.view addSubview:self.pickerToolbar];

    // Create the Picker under the Toolbar
    CGRect datePickerTargetFrame = CGRectMake(0, self.view.bounds.size.height-216, 320, 216);

    if (self.datePicker == nil) {

        self.datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height+44, 320, 216)];
        [self.datePicker setMinuteInterval:5];

        [self.datePicker addTarget:self action:@selector(changeDate:) forControlEvents:UIControlEventValueChanged];

    }

    [self.view addSubview:self.datePicker];

    [UIView animateWithDuration:0.2 animations:^{

        self.pickerToolbar.frame = toolbarTargetFrame;
        self.datePicker.frame = datePickerTargetFrame;

    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:45:14.537

通过添加`UIPickerView`和`UIToolbar`到包含`UIView`然后为包含的 UIView 设置动画来解决。

# jsp - 多个操作的简单 Servlet 页面导航不起作用

> ID：11704047
> 
> 赞同：0
> 
> 时间：2012-07-28T19:35:02.680
> 
> 标签：jsp, jakarta-ee, servlets

我是 Java EE 的新手。开发演示应用程序。现在必须使用 JSP & Servlet 和 JDBC 来学习。

UserServlet.java 管理所有用户相关列表的导航、编辑和删除操作。所有 3 个 JSP 页面都有链接来导航它。JSP 页面位于 /WEB-INF/admin/。请参阅**调度方法**。

***有人请告诉我出了什么问题以及如何使用导航。修理它。***

**所有链接的错误：**

```
type Status report

message /Navigation/user/delete

description The requested resource (/Navigation/user/delete) is not available. 
```

**伺服器：**

```
package com.myapp.web;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/user/")
public class UserServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    public UserServlet() {
        super();
    }

    protected void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException,
            IOException {

        // String action = req.getServletPath();
        String action = req.getPathInfo();
        System.out.println("doGet action = " + action);

        if ((action == null) || (action.equals("/list"))) {

            System.out.println("/UserList.jsp");
            dispatch(req, res, "/UserList.jsp");

        } else if (action.equals("/edit")) {

            System.out.println("/UserEdit.jsp");
            dispatch(req, res, "/UserEdit.jsp");

        } else if (action.equals("/delete")) {

            System.out.println("/UserDelete.jsp");
            dispatch(req, res, "/UserDelete.jsp");

        }
    }

    protected void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException,
            IOException {

        String action = req.getPathInfo();
        System.out.println("doPost action = " + action);

        if (action.equals("/edit")) {

            res.sendRedirect(req.getContextPath() + "/user/list");

        } else if (action.equals("/delete")) {

            res.sendRedirect(req.getContextPath() + "/user/list");

        }
    }

    protected void dispatch(HttpServletRequest req, HttpServletResponse res, String page)
            throws ServletException, IOException {

        String path = "/WEB-INF/admin" + page;
        System.out.println(path);
        getServletContext().getRequestDispatcher(path).forward(req, res);
    }
} 
```

**JSP 页面链接。都一样**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>

<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>

<%@ taglib prefix="tags" tagdir="/WEB-INF/tags"%>

<tags:layout path="${pageContext.request.contextPath}" title="list of Users">
    <jsp:attribute name="search">
        <tags:search />
    </jsp:attribute>
    <jsp:body>
        <span class="right" style="margin-bottom: 3px;"><a href="${pageContext.request.contextPath}/user/list" class="btn btn-success">List</a></span>
        <br />
        <span class="right" style="margin-bottom: 3px;"><a href="${pageContext.request.contextPath}/user/edit" class="btn btn-success">Edit</a></span>
        <br />
        <span class="right" style="margin-bottom: 3px;"><a href="${pageContext.request.contextPath}/user/delete" class="btn btn-success">Delete</a></span>
    </jsp:body>
</tags:layout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-31T22:58:09.207

发生此错误是因为您使用 href 到页面 /Navigation/user/delete 并且此页面不存在。您必须创建此页面才能消除错误，但这并不能解决您的问题。

您在执行 req.getPathInfo() 时分析 url。据我了解，您有包含用户列表和编辑的页面，但没有单独的页面来删除它们。删除用户的单独逻辑。

```
String action = req.getPathInfo();//here you analyze url
String actionProperty = req.getParameter("action");//here you analyze property
if(actionProperty.equalsIgnoreCase("delete")){
    //you code for delete action
} 
```

并替换您的链接

```
<a href="${pageContext.request.contextPath}/user/delete" class="btn btn-success">Delete</a> 
```

有了这个

```
<a href="${pageContext.request.contextPath}/user?action=delete" class="btn btn-success">Delete</a> 
```

# html - 元素未从其类之一接收样式

> ID：11704048
> 
> 赞同：1
> 
> 时间：2012-07-28T19:35:05.137
> 
> 标签：html, css, styles

好吧，我有一个按钮元素如下：

```
<button class='secondary row_1 col_1 not-sticky'>Button</button> 
```

辅助等工作的样式，但它不会从“不粘”中获取样式。这是我的基本样式：

```
.not-sticky { color:#FFFFFF; }
.sticky-state { color:#000066; } 
```

单击按钮时，将运行此代码：

```
if ($(this).hasClass('sticky-state'))
    $same = true;

    //change old sticky classes to not sticky
    $('.sticky-state').removeClass('sticky-state').addClass('not-sticky');

    if (!$same)
        $(this).removeClass('not-sticky').addClass('sticky-state');// chain our jQuery methods 
```

运行此命令后，粘性状态的样式确实可以正常工作，并且文本颜色变为 #000066。

另外-通过使用chrome检查器，我能够验证类是否在非粘性和粘性状态之间正确变化，只是不粘性的样式根本没有显示

什么可能使不粘的样式根本不被应用？

谢谢

这是整个样式表：[http ://staging.easyzag.com/style.css](http://staging.easyzag.com/style.css)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:44:23.763

它适用于这个小提琴：http: [//jsfiddle.net/c7XHX/](http://jsfiddle.net/c7XHX/)

不知道是否`$same`已声明，但您始终需要声明您的 JavaScript 值。

# jquery - JQuery在gridview中获取单击按钮的位置

> ID：11704057
> 
> 赞同：0
> 
> 时间：2012-07-28T19:36:30.897
> 
> 标签：jquery, gridview

我对 JQuery 很陌生，取得了一些进展，但现在处于一个角落，所以非常感谢朝着正确的方向轻推。

我有一个 asp.net gridview（在更新面板中），它可以包含任意数量的行。在每一行我有几个显示产品价格和代码的数据绑定标签，在我有一个图像按钮的行上。我想要做的是当单击按钮以在按钮右侧的淡化 Div 中显示一些行数据时。例如，通知用户将商品添加到购物车中。

我已经阅读了行数据并使用行信息淡入了 div。但是很难获得单击按钮的位置，因此我可以将 Div 重新定位在适当的按钮旁边。

这是一些代码：

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
if (!Page.IsPostBack) 
{ 
    DataTable dt = new DataTable(); 
    dt.Columns.AddRange(new DataColumn[3] { new DataColumn("Item"), new DataColumn("Price"),   new     DataColumn("Code") }); 
    dt.Rows.Add("Shirt", 200, "abc"); 
    dt.Rows.Add("Football", 30, "xyz"); 
    dt.Rows.Add("Bat", 22.5, "sym"); 
    GridView1.DataSource = dt; 
    GridView1.DataBind(); 
} 
```

}

标记：我删除了更新面板，以减少代码大小。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Master.master" AutoEventWireup="true"
    CodeFile="test.aspx.cs" Inherits="test" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
    <script type="text/javascript"  src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/jquery-ui.js" type="text/javascript"></script>
    <link href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/themes/start/jquery-ui.css"
        rel="stylesheet" type="text/css" />
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="Main" runat="Server">
<script type="text/javascript">

    function pageLoad() {
        $("[id*=lnkSelect]").live("click", function () {

            //Get the values
            var code = $("#code").html($(".code", $(this).closest("tr")).html());
            var price = $("#price").html($(".price", $(this).closest("tr")).html());

            //Build the new HTML
            $(code).prepend("<br/>Item: ");
            $(code).append("<br/>Has been<br/>added to your cart.");
            $(code).append("<br/>Price: ");
            $(code).append(price);
            $(".tooltipleft").html(code); //Set the new HTML
            $(".tooltipleft").fadeIn("slow").fadeOut("slow"); //Show the div

            return true;
        });

    };
</script>
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
            <Columns>
                <asp:BoundField DataField="Item"/>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Label ID="lblPrice" runat="server" ForeColor="DimGray" CssClass="price" Text='<%# Eval( "Price") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Label ID="lblCode" runat="server" ForeColor="DimGray" CssClass="code" Text='<%# Eval( "Code") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:ImageButton ID="lnkSelect" runat="server" ImageUrl="~/Buttons/add_to_cart.png"
                            AlternateText="Add To Cart" ImageAlign="Right" CssClass="buttontag" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
    <div class="tooltipleft" id="tooltip">
    </div>
</asp:Content> 
```

将不胜感激任何帮助。

干杯

厘米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:37:58.937

这应该使您走上正确的轨道：

**编辑**
在评论中反映我的jsfiddle

```
 $("[id*=lnkSelect]").live("click", function () {
             var pos=$("#imgBut1").offset();
             $("#divinquestion").css({"position": "absolute", "display" : "block" }).show().offset({top:pos.top,left:pos.left+35});

          }); 
```

# github - 如何更新 Github 存储库

> ID：11704065
> 
> 赞同：0
> 
> 时间：2012-07-28T19:37:34.240
> 
> 标签：github

如果我有一个 github 存储库，我成功地将代码从我的本地计算机推送到，我该如何提交进一步的更新？我已经尝试过`git push origin master`，当我知道我正在对根本没有发送到 github 的文件进行更改时，它会通过说“Everything Up to Date”来返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:40:37.170

您需要先提交新更改。

```
git commit -a -m "Your message here" 
```

# ruby-on-rails - ActiveAdmin - 使用 current_admin_user 过滤可用操作

> ID：11704066
> 
> 赞同：4
> 
> 时间：2012-07-28T19:37:49.320
> 
> 标签：ruby-on-rails, ruby, activeadmin

我有一个像这样的活动管理资源：

```
ActiveAdmin.register Snippet do

  menu label: "Text Snippets"

  config.clear_sidebar_sections!

  index download_links: false do
    column :key if current_admin_user.developer?
    column :description
    column :contents
    default_actions
  end

  form do |f|
    f.inputs do
      f.input :description
      f.input :contents
    end
    f.buttons
  end

end 
```

请注意，在该块中，如果当前管理员用户是开发人员`index`，我只会添加该列。`key`我想将这种过滤应用于可用的操作。

我尝试在资源定义的顶部添加这个：

```
actions current_admin_user.developer ? :all : :index, :edit 
```

但我得到了`NameError`一个`current_admin_user`。出于某种原因，在配置块之外，`current_admin_user`不存在活动的管理员助手。

那么，我该如何根据当前用户的权限来过滤操作呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T17:18:52.943

你必须使用一个过程...... current_admin_user 只在它运行的应用程序时工作，而不是在你声明你的类时......

例子..

```
action_item :only => [:edit], :if => proc { current_admin_user.developer? } do
  #enter code here
end 
```

您也可以为此使用 CanCan.. 并将`controller.authorize_resource`其放在开头。检查 activeadmin 文档。

另一种方法是覆盖 ActiveAdmin 控制器中的 action_methods .. 像这样

```
actions :all

controller do
  def action_methods
    if current_admin_user.developer?
      super
    else
      super - ['show', 'destroy', 'new', 'create']
    end
  end
end 
```

如果您有多个角色，这很有效。

顺便说一句，你应该使用`developer?`而不是`developer`（当然，如果`developer`我怀疑该方法返回一个布尔值）

**更新**

在 0.6+ 版本中，您应该坚持使用 CanCan，有关更多信息，请查看 activeadmin 文档[http://www.activeadmin.info/docs/13-authorization-adapter.html#using_the_cancan_adapter](http://www.activeadmin.info/docs/13-authorization-adapter.html#using_the_cancan_adapter)

# java - ServletDispatcher 在我的 spring 项目中无法转换为 Javax.servlet.Servlet 异常

> ID：11704069
> 
> 赞同：15
> 
> 时间：2012-07-28T19:38:04.567
> 
> 标签：java, jakarta-ee, servlets, spring-mvc

启动 tomcat 服务器时出现异常

```
SEVERE: Servlet /MavenWeb threw load() exception
java.lang.ClassCastException: org.springframework.web.servlet.DispatcherServlet
cannot be cast to javax.servlet.Servlet 
```

我正在使用 spring3，但我的 lib 文件夹中有 jar spring2-5-6，我从 pom.xml 中删除了它，但仍然出现在 lib 文件夹中 - 尽管我不确定这是否是一个问题。我正在使用 Eclipse IDE。谢谢！！

```
<dependencies>
    <dependency>
      <groupId>org.hibernate.javax.persistence</groupId>
      <artifactId>hibernate-jpa-2.1-api</artifactId>
      <version>1.0.0.Draft-6</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-annotations</artifactId>
      <version>3.5.6-Final</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-beans</artifactId>
      <version>3.1.2.RELEASE</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-context</artifactId>
      <version>3.1.2.RELEASE</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-web</artifactId>
      <version>3.1.2.RELEASE</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-tx</artifactId>
      <version>3.1.2.RELEASE</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-webmvc</artifactId>
      <version>3.1.2.RELEASE</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>javax.servlet-api</artifactId>
      <version>3.1-b01</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-webflow</artifactId>
      <version>1.0.6</version>
      <scope>compile</scope>
    </dependency>
  </dependencies> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-28T19:45:52.793

您不应该在一个项目中使用多个版本的 Spring JAR，但这不是问题。

该问题很可能是由两个不同的类加载器加载的 servlet API 类引起的。您的 WAR 中可能有`servlet*.jar`或其他一些特定于容器的 JAR。通过将它们设置`<scope>`为`provided`in来删除它们`pom.xml`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:14:54.647

就我而言，图书馆没有问题。我正在更改要使用 Spring 实现的标准 Servlet，因此我遵循了[这些说明](http://www.codeproject.com/Tips/251636/How-to-inject-Spring-beans-into-Servlets?fid=1650916&df=90&mpp=50&noise=3&prof=True&sort=Position&view=None&spc=None&fr=3)，我在这里解释一下，以防页面稍后出现故障：

1.  实现`org.springframework.web.HttpRequestHandler`而不是扩展 javax.Servlet

    `public class MyServlet implements HttpRequestHandler {`

2.  在 applicationContext.xml 中创建了 bean（我是在 dispatcher-servlet.xml 中创建的）

    `<bean id="MyServlet" class="com.package.to.MyServlet"/>`

3.  **在Web.xml**中指定 servlet ，将旧类 ( **com.package.to.MyServlet** ) 更改为 Spring **HttpRequestHandlerServlet**。

    `<servlet> <servlet-name>MyServlet</servlet-name> <servlet-class>org.springframework.web.context.support.HttpRequestHandlerServlet</servlet-class> </servlet> <servlet-mapping> <servlet-name>MyServlet</servlet-name> <url-pattern>/MyServlet</url-pattern> </servlet-mapping>`

我必须做一个额外的步骤来避免关于 applicationContext.xml 在**web.xml中执行以下操作的 FileNotFoundException**

`<context-param> <param-name>contextConfigLocation</param-name> <param-value>/WEB-INF/dispatcher-servlet.xml</param-value> </context-param> <listener> <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class> </listener>`

# google-app-engine - GAE 搜索 API。获取匹配文件的总量

> ID：11704074
> 
> 赞同：2
> 
> 时间：2012-07-28T19:38:48.697
> 
> 标签：google-app-engine, full-text-search, gae-search

嗨，
我正在使用 GAE 搜索 API，它似乎是一个非常棒的功能，顺便说一下，它增加了标准数据存储查询中缺乏的重要功能。
但是我在实现标准分页时遇到了一个问题，即获得匹配查询文档的总量。当然，我可以使用光标实现带有“显示更多”按钮的列表，但能够获得总量也很棒。
关于如何做到这一点的任何想法？
非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:26:27.167

第1步：

设置你的准确性

```
QueryOptions options = QueryOptions.newBuilder()
        ...set other options
        .setNumberFoundAccuracy(1000);
        .build(); 
```

> 设置 Results.getNumberFound() 的准确度要求。如果设置，getNumberFound() 将至少精确到该数字。例如，当设置为 100 时，任何 getNumberFound() <= 100 都是准确的。此选项可能会增加相当大的延迟/费用，尤其是与 setFieldsToReturn(String...) 一起使用时。

步骤 2 运行查询

```
 Query query = Query.newBuilder().setOptions(options).build(queryString);
 Results<ScoredDocument> results = getIndex().search(query); 
```

第 3 步调用 getNumberFound()

```
 results.getNumberFound(); 
```

> 搜索找到的结果数。如果该值小于或等于对应的QueryOptions.getNumberFoundAccuracy()，那么它是准确的，否则它是一个近似值返回：找到的结果的数量

# node.js - Socket.io 客户端：收到错误“io is not defined”或“# has no method 'connect'" Ok so I'm basically having the same problem as this. But the answ 问问题 问问题 2012-07-28T19:38:57.183 2032 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Ok so I'm basically having the same problem as this. But the answers given there don't work for me. So let me re-explain my problem. First of all, here's my code: Server-Side Javascript (app.js) var io = require('socket.io'); ... var sio = io.listen(app); Client-Side Javascript (client.js) 3: var socket = (s)io.connect('http://localhost:3000'); //the (s) represents testing with and without the s out of desperateness :) Client-Side Template (Jade) script(src='/socket.io/socket.io.js') script(src='/javascripts/client.js') So from what I've read it seems like socket.io should be handling putting the socket.io.js file there but I'm guessing that I have something configured wrong because it's not doing that. Anyways the errors I get with this are: GET http://localhost:3000/socket.io/socket.io.js 404 (Not Found) Uncaught ReferenceError: io is not defined - client.js line 3 After doing some research it seemed that I could change the jade file to link directly to a stable file. So by changing my code to this: Client-Side Template (Jade) script(src='http://cdn.socket.io/stable/socket.io.js') script(src='/javascripts/client.js') Then the error that I get from this is: Uncaught TypeError: Object # has no method 'connect' - client.js line 3 I've been trying to figure this out for hours now. And it seems that I need to have socket.io-client so I made sure that it is installed. I dunno if this will but I am using Express.js as well and I will give you the layout of my files. /project app.js /node_modules package.json /public /routes /views /project/node_modules /connect /express /jade /jquery /socket.io /stylus /project/node_modules/socket.io /benchmarks index.js Makefile package.json restrict_jsonp.patch History.md /lib /node_modules Readme.md /project/node_modules/socket.io/node_modules /policyfile /redis /socket.io-client /project/public /images /javascripts /jquery /stylesheets /project/public/javascripts client.js Anyways, any help would be greatly appreciated! :) As Felix Loether pointed out, the API for Express changed from 2.* to 3.* After spending way too many hours trying to figure out the best way to re-work my code I decided to re-install express to an earlier version by doing this: npm install express@2.5.8 -g There is a lot more support (as of today) for Express 2.* so as I am still learning it's better for me to use the earlier version. node.jsexpresssocket.ioclient-side 4 1 回答 1 This answer is useful 1 正如 Felix Loether 指出的那样，Express 的 API 从 2.* 更改为 3.* 在花了太多时间试图找出重新编写代码的最佳方法之后，我决定通过以下方式将 express 重新安装到早期版本这样做： npm install express@2.5.8 -g Express 2.* 有更多支持（截至今天），因此我仍在学习，最好使用早期版本。 于 2012-07-31T21:47:20.717 回答 Related 1 c# - asp.net http 处理程序和 http 模块是否可以在不使用 IIS 的情况下工作？ 1 httpclient - Tapestry，来自另一个应用程序的请求处理 1 python - 如何使用 python webkit 仅显示特定的 div 1 mysql - Doctrine2 中的 SQL 查询 1 javascript - javascript中的组合框上的鼠标悬停不起作用 1 ios - 如何在 iOS MFMailComposeViewController 中预选邮件账户？ 2 jquery - 列出 Jquery 访问 2 jquery - JQuery - 使用 JQuery 格式化时出现问题 7 php - 如何将文件的内容分配给PHP中的变量 1 objective-c - 子类化 NSFontManager 不起作用 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11704075
> 
> 赞同：0
> 
> 时间：
> 
> 标签：node.js, express, socket.io, client-side

Ok so I'm basically having the same problem as [this](https://stackoverflow.com/questions/7603224/node-server-socket-io-io-is-not-defined). But the answers given there don't work for me. So let me re-explain my problem. First of all, here's my code:
**Server-Side Javascript (app.js)**

```
var io = require('socket.io');
...
var sio = io.listen(app); 
```

**Client-Side Javascript (client.js)**

```
3: var socket = (s)io.connect('http://localhost:3000');
//the (s) represents testing with and without the s out of desperateness :) 
```

**Client-Side Template (Jade)**

```
script(src='/socket.io/socket.io.js')
script(src='/javascripts/client.js') 
```

So from what I've read it seems like socket.io should be handling putting the socket.io.js file there but I'm guessing that I have something configured wrong because it's not doing that. Anyways the errors I get with this are:

```
GET http://localhost:3000/socket.io/socket.io.js 404 (Not Found)
Uncaught ReferenceError: io is not defined - client.js line 3 
```

After doing some research it seemed that I could change the jade file to link directly to a stable file. So by changing my code to this:
**Client-Side Template (Jade)**

```
script(src='http://cdn.socket.io/stable/socket.io.js')
script(src='/javascripts/client.js') 
```

Then the error that I get from this is:

```
Uncaught TypeError: Object #<Object> has no method 'connect' - client.js line 3 
```

I've been trying to figure this out for hours now. And it seems that I need to have socket.io-client so I made sure that it is installed. I dunno if this will but I am using Express.js as well and I will give you the layout of my files.
**/project**

```
app.js  /node_modules  package.json  /public  /routes  /views 
```

**/project/node_modules**

```
/connect  /express  /jade  /jquery  /socket.io  /stylus 
```

**/project/node_modules/socket.io**

```
/benchmarks  index.js  Makefile       package.json  restrict_jsonp.patch
History.md   /lib      /node_modules  Readme.md 
```

**/project/node_modules/socket.io/node_modules**

```
/policyfile  /redis  /socket.io-client 
```

**/project/public**

```
/images  /javascripts  /jquery  /stylesheets 
```

**/project/public/javascripts**

```
client.js 
```

Anyways, any help would be greatly appreciated! :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:47:20.717

正如 Felix Loether 指出的那样，Express 的 API 从 2.* 更改为 3.* 在花了太多时间试图找出重新编写代码的最佳方法之后，我决定通过以下方式将 express 重新安装到早期版本这样做：

```
npm install express@2.5.8 -g 
```

Express 2.* 有更多支持（截至今天），因此我仍在学习，最好使用早期版本。

# javascript - Jquery 搜索常见问题 - 稍作修改

> ID：11704079
> 
> 赞同：0
> 
> 时间：2012-07-28T19:39:26.200
> 
> 标签：javascript, jquery, search

我之前问过一个问题，但我需要更多信息。我发现了这个用于搜索常见问题项目的精彩片段：

[http://jsfiddle.net/pT6dB/](http://jsfiddle.net/pT6dB/)

我想找到一个包含“圆形和“地球”的问题。但是，如果我输入“圆形地球”，它会专门寻找它找不到的“圆形地球”。我希望它是一个“与”查询。

这会是一个简单的修改吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:44:21.467

您需要单独搜索每个术语，并建立一个查询。

```
var term = $(this).val().trim();

var words = term.split(' ');

var selector = "#result LI";

for(var i = 0; i < words.length; i++){
    selector += ':contains(' + words[i] + ')'
}

$(selector).show(); 
```

**更新：**这是给你的小提琴，增加了不区分大小写

[http://jsfiddle.net/pT6dB/](http://jsfiddle.net/pT6dB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-17T09:36:52.547

更新了 Fiddle 以搜索不区分大小写。

[http://jsfiddle.net/pT6dB/161/](http://jsfiddle.net/pT6dB/161/)

```
$(document).ready(function() {
    $('LI STRONG').click(function(e) {
        e.preventDefault(); // disable text selection
        $(this).parent().find('EM').slideToggle();
        return false; // disable text selection

    });

jQuery.expr[':'].Contains = function(a, i, m) {
  return jQuery(a).text().toUpperCase()
      .indexOf(m[3].toUpperCase()) >= 0;
};

jQuery.expr[':'].contains = function(a, i, m) {
  return jQuery(a).text().toUpperCase()
      .indexOf(m[3].toUpperCase()) >= 0;
};

    $('#search').keyup(function(e) {
        var s = $(this).val().trim();

        if (s === '') {
            $('#result LI').show();
            return true;
        }
        $('#result LI:not(:contains(' + s + '))').hide();

        $('#result LI:contains(' + s + ')').show();
        return true;
    });

}); // end document ready
```

```
#faq EM {
display:none;
}

#faq LI STRONG {
font-weight:normal;
color:#246;
text-decoration:underline;
cursor:pointer;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="faq">
    <p><label>Search</label><br />
<input id="search" value="" size="30" /></p>
<p>&nbsp;</p>
<ul id="result">
  <li><strong>How round is the Earth?</strong><br /><br /><em>
  Very round.
  <br /><br /></em></li>
  <li><strong>How rectangular is paper?</strong><br /><br /><em>
  Very rectangular.
  <br /><br /></em></li>
</ul>
</div><!-- #faq -->
```

# python - python无法访问suds方法

> ID：11704085
> 
> 赞同：0
> 
> 时间：2012-07-28T19:40:04.587
> 
> 标签：python, linux, api, soap, suds

我正在尝试在 python 中使用 SUDS 访问 SOAP api

```
from suds.client import Client
def initialize():
    url = 'http://uuuuuuuuuuuuuuu.com/wewewe/WsNBI?wsdl'
    username = 'xxxxx'
    password = 'ppppppp'
    client = Client(url)
    print client
    result = client.service.Login(nbiLogin NBILogin(username,password),)
    print result 
```

我无法调用登录方法，知道我该怎么做吗？

这些是查询返回的方法...

```
Suds ( https://fedorahosted.org/suds/ )  version: 0.4 GA  build: R699-20100913

Service ( WsNBIService ) tns="www.test.com"
   Prefixes (1)
      ns0 = "www.test.com"
   Ports (1):
      (WsNBIPort)
         Methods (5):
            GetClientAssociationInfo(nbiSession NBISession, clientAssociationReqData ClientAssociationReqData, )
            GetEvent(nbiSession NBISession, eventReqData EventReqData, )
            GetZDClientAssociationInfo(nbiSession NBISession, clientAssociationReqData ClientAssociationReqData, )
            Login(nbiLogin NBILogin, )
            Logout(nbiSession NBISession, )
         Types (22):
            GetClientAssociationInfo
            GetClientAssociationInfoResponse
            GetEvent
            GetEventResponse
            GetZDClientAssociationInfo
            GetZDClientAssociationInfoResponse
            Login
            LoginResponse
            Logout
            LogoutResponse
            authenticateResult
            clientAssociationDetail
            clientAssociationReqData
            clientAssociationResult
            eventDetail
            eventReqData
            eventResult
            eventType
            nbiLogin
            nbiResult
            nbiSession
            requestType 
```

**更新：**

```
#!/usr/bin/env python

from suds.client import Client

def initialize():
    url = 'http://xxxxxxx/xxxx/WsNBI?wsdl'
    username = 'xxxxx'
    password = 'pppppp'
    client = Client(url)
    login = client.factory.create("ns0:NBILogin")
    print login
    ws = login.nbiLogin(userName=username, password = password)
    result = client.service.Login(ws)
    print result
def main():
    initialize()

if __name__ == "__main__":
    main()

[root@server scripts]# ./flex_soap.py
(nbiLogin){
   UserName = None
   Password = None
 }
Traceback (most recent call last):
  File "./flex_soap.py", line 19, in ?
    main()
  File "./flex_soap.py", line 16, in main
    flexMaster()
  File "./flex_soap.py", line 12, in flexMaster
    ws = login.nbiLogin(userName=username, password = password)
AttributeError: nbiLogin instance has no attribute 'nbiLogin' 
```

**更新：**

```
#!/usr/bin/env python

from suds.client import Client

def initialize():
    url = 'http://xxxxx/intune/WsNBI?wsdl'
    username = 'uuuuu'
    password = 'pppp'
    client = Client(url)
    print client
    login = client.factory.create("ns0:NBILogin")
    print login
    login.UserName = username
    login.Password = password
    result = client.service.Login(login)
    print result
    event = client.factory.create("ns0:EventReqData")
    print event
def main():
    initialize()

if __name__ == "__main__":
    main()

[root@server scripts]# ./flex_soap.py

(nbiLogin){
   UserName = None
   Password = None
 }
(authenticateResult){
   Success = True
   Session =
      (nbiSession){
         Id = "0eda1622-473c-4dd6-b68e-4ff3c1ee27f6"
      }
 }
(eventReqData){
   EventType =
      (eventType){
         value = None
      }
   SerialNumbers =
      (SerialNumbers){
         SerialNumber[] = <empty>
      }
 } 
```

知道我怎么能得到这个方法

```
GetEvent(nbiSession NBISession, eventReqData EventReqData, ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:51:44.603

您的代码不是有效的 Python。`Login(nbiLogin NBILogin, )`意味着有一个方法`Login`接受一个 type 的参数`NBILogin`。这不是您应该使用的文字语法。尝试这样的事情：

```
 login = client.factory.create("ns0:NBILogin")
 login.UserName = username 
 login.Password = password 
 result = client.service.Login(login) 
```

这个输出：

```
(authenticateResult){
   Success = True
   Session =
      (nbiSession){
         Id = "0eda1622-473c-4dd6-b68e-4ff3c1ee27f6"
      }
 } 
```

意思是`result.Success == True and result.Session.Id == "0eda1622-473c-4dd6-b68e-4ff3c1ee27f6"`。

`GetEvent(nbiSession NBISession, eventReqData EventReqData, )`意味着您需要 2 个类型的参数`NBISession`和`EventReqData`.

您可以从中获得的会话`result`。构建`EventReqData`：

```
(eventReqData){
   EventType =
      (eventType){
         value = None
      }
   SerialNumbers =
      (SerialNumbers){
         SerialNumber[] = <empty>
      }
 } 
```

您需要创建`EventType`和`SerialNumbers`：

```
event_req_data = client.factory.create("ns0:EventReqData")
event_req_data.EventType = "put some appropriate event type here"
event_req_data.SerialNumbers = [10, 51, 1] # some serial numbers 
```

上面假设序列号是整数，否则通过以下方式创建每个`SerialNumber`与所有其他对象相同的方式`client.factory.create()`：

```
sns = event_req_data.SerialNumbers = client.factory.create('ns0:SerialNumbers')
for item in [10, 51, 1]:
    ns = client.factory.create('ns0:SerialNumber')
    ns.value = item
    sns.SerialNumber.append(ns) 
```

我没有看到`SerialNumbers`,`SerialNumber`列表中的类型，因此它可能会失败。

如果 suds 不能从字符串转换为`EventType`自身，那么您可以`EventType`使用`client.factory.create()`显式创建：

```
event_type = client.factory.create("ns0:EventType")
event_type.value = "put some appropriate event type here"
event_req_data.EventType = event_type 
```

拨打电话：

```
event = client.service.GetEvent(login.Session, event_req_data) 
```

# iphone - 如何将 AirPlay 集成到我的应用程序中？

> ID：11704086
> 
> 赞同：0
> 
> 时间：2012-07-28T19:40:03.770
> 
> 标签：iphone, ios, xcode, ios4, airplay

我制作了一个应用程序，可让您收听流媒体广播。我不知道如何将 AirPlay 集成到我的应用程序中？

这是让它播放的代码：

```
-(IBAction)play {
        if(clicked == 0) {
            clicked = 1;
            NSURL *url = [NSURL URLWithString:@"http://stream.domain.com/high.mp3"];
            audioPlayer = [[AVPlayer alloc] initWithURL:url];
            [audioPlayer play];
            [start setTitle:@"Stop" forState:UIControlStateNormal];
        }
        else {
            [audioPlayer pause];
            clicked = 0;
            [start setTitle:@"Start" forState:UIControlStateNormal];
        }
    } 
```

我需要添加什么才能让 AirPlay 共享此内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T22:05:51.587

正如@shabzo 提到的，[audioPlayer setAllowsAirPlayVideo:YES]，但是，在 iOS 5 上，这是默认设置。

您可能想在项目 plist 中设置“必需的背景模式”，以“应用程序播放音频”

为了获得 airplay routes 按钮，您需要添加 MPVolumeView。如果设备在网络上可用，这将显示播放按钮。如果您想要的只是路线按钮，您应该能够隐藏音量按钮。

您可能还对设置 [MPNowPlayingInfoCenter defaultCenter] 感兴趣，以确保将曲目信息和专辑封面发送到播放设备 (AppleTV)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:58:39.397

要为 AVPlayer 启用 Airplay，只需添加以下代码行：

```
[audioPlayer setAllowsAirPlayVideo:YES]; 
```

# python - Python 大随机整数和 Mersenne Twister 的精度

> ID：11704088
> 
> 赞同：4
> 
> 时间：2012-07-28T19:40:36.643
> 
> 标签：python, random, precision

我想知道 Python`random`函数的“精度”是什么意思。这里描述：

> 几乎所有的模块函数都依赖于基本函数`random()`，它在半开放范围[0.0, 1.0)内均匀地生成一个随机浮点数。Python 使用 Mersenne Twister 作为核心生成器。它产生 53 位精度浮点数，周期为 2**19937-1。

（http://docs.python.org/library/random.html?highlight=mersenne%20twister，访问 20120727）

我感兴趣的是我可以生成非常大的随机整数（长整数），其精度似乎远高于 2^53。例如（使用 Ipython）：

```
In [1]: from math import factorial as F
In [2]: from random import randint as R
In [3]: R(1, F(900))
Out[3]: 55655511302846458744179265243566263049348396362730789786376014445325896599604354914431619960209388364677180234108513221468671377813842671874148746886513973171423907294544220953849330089822288697383171078250181973489187774341795574648920075697792011317798969959919449394758519496792725695600701199089972009688412593325291810024048811890509220571436407156566269358600296506017343255050788936280200352509087073097532486502694101150248815092174847010359868156616901409331336760344351058867833528749797221612169430654334458578364850198977511061993233818849689759090377347376020160658362459773356292085856906573553086825560047089834757501023094429371408722563891227474029563545206865055657504766128286451181119906678062837368414582707728324415466848186858173236300969443478496634754744888060794778485246692104851885847515244146665974598354436781340057667983223238998674622833320199904840957000014767293658171874973067958145430346745707636676061629278168015549755791407108399231392952706279787486238512258804098030513575025870504347283221015756832157863142353915612138589145084128778032995695113870365505775392647256056048691602676699581153972467494111720212363912926352356346807790816796784781384561736415741104584667536002819103176714157723039428367564698686945824679882523439229215035996634289075127375256728472056511244548311771570743103809147045947583819651257115044154025329883682429231394004470689760531056853018427649916035935302356382633012319775473728455377657692268855776796385819792347680100513177355101630543290088996770992548670273727988974570199179655691444984337837105283447276788151912408533352627494948390016029881755603243934955207024221452181883522004648595373130617729041347013155205217774450836687880723915563507108222768637840614647145898936109917167237397888104669458661404234553707323638883064861414284282190898741067404128885188113697448726481104763682489126524054241797759521120664366845719767486252884585742737830119890190213053751046461419643379561983590174574185268661318409035375114305279020423595250660644954841798619767985549553380200803904976806468796334648515423467654573415304912570341635682203261002606581817207689816015969520503052648773609840260050676394927780076948629298559638703440007364834579712680931643829764810072128419905903786966L 
```

我想知道 53 位在什么意义上是`random`函数的精度限制。具体来说，如果我要求 Python 返回介于 1 和某个非常大的上限之间的伪随机数，那么该范围内的所有整数是否都具有相同的返回可能性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T19:54:23.560

53 位不是生成器的固有限制，它是 Python 在请求浮点数时返回的数量，因为浮点数具有 53 位精度。

您可以使用诸如 random.getrandbits 之类的东西直接获取随机整数。

更详细地说，CPython 中使用的 Mersenne Twister 一次生成 32 位。模块代码调用了两次，并结合结果生成一个 53 位浮点数。如果您调用 getrandbits，它将根据需要多次调用内部函数以生成 k 位。可以在[此处](http://hg.python.org/cpython/file/4e85e4743757/Modules/_randommodule.c)找到此代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T19:55:00.383

Python 所做的是通过两次调用 32 位版本的 MT19937 生成 64 位随机性，但由于该数字被限制为`[0.0, 1.0)`结果，因此被限制为 53 位精度（浮点格式的限制）。

如果您使用该类， Python`random.py`能够从`/dev/urandom`Windows 或 Windows `CryptGenRandom`（如果支持）中提取位。`random.SystemRandom`否则，它会通过从重复调用 MT19937 中提取连续位来生成更大的数字。

# javascript - javascript-如何确定 html 构造在当前选择的构造之前作为同级出现的次数

> ID：11704091
> 
> 赞同：3
> 
> 时间：2012-07-28T19:41:06.887
> 
> 标签：javascript, jquery

我已经使用 Javascript 获得了网页中当前选择的内容。

例如，下面给出了网页的示例 HTML——

```
 <div id="divText">Text 1
        <div id="divText1_1">Text 1_1</div>
        <div id="divText1_2">Text 1_2</div>
    </div> 
```

现在，用户选择了文本“Text 1_2”——从上面的 HTML 中，我们可以看到这是名为“divText”的 div 中的第二个 div——我如何使用 Js 代码获取这些信息？我想要的信息-“divText1_2”是其父 HTML 元素中的第二个 div。（我想知道在“divText1_2”之前发生的 div 的数量——当用户选择了“divText1_2”中的文本时）......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:04:34.573

如果您想要的信息只是该 div 中的文本，请尝试：

```
 $(document).ready(function () {

    alert($("#divText1_2").text());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:04:50.557

如果您在用户从浏览器中选择一些文本时不知道 div id，那么您可以使用 jquery 找到 html 元素，例如：

```
dom = $('*:contains("Text 1_2")'); 
```

创建一个 dom 数组，如：

```
dom_array = []
for( var j=0; j<dom.length; j++){
  dom_array[j] = dom[j];
} 
```

现在数组中的最后一个元素将是包含所选文本的确切 html 元素。（假设所选文本只会出现一次）

```
selected_id = dom_array[dom_array.length-1].id // 

var a = document.getElementById("divText");
    var arr = [];
    var div = document.getElementById("selected_id"); 
    for( var i=0; i<a.length; i++){
      arr[i] = a[i];
    }
    console.log(arr.indexOf(div)); 
```

# linux-kernel - 无法添加新的调度程序策略

> ID：11704093
> 
> 赞同：0
> 
> 时间：2012-07-28T19:41:26.367
> 
> 标签：linux-kernel, patch, scheduler

我正在修补内核 2.6.24 以引入新的调度策略，遵循这篇文章：[http](http://www.eetimes.com/design/embedded/4204929/Real-Time-Linux-Scheduling-Part-1) ://www.eetimes.com/design/embedded/4204929/Real-Time-Linux-Scheduling-Part-1 修补和重建过程很顺利，但重新启动后系统似乎根本没有打补丁。更具体地说，/include/linux/sched.h 的代码部分是：

```
...
#define SCHED_NORMAL        0
#define SCHED_FIFO      1
#define SCHED_RR        2
#define SCHED_BATCH     3
/* SCHED_ISO: reserved but not implemented yet */
#define SCHED_IDLE      5
#define SCHED_CASIO     6
... 
```

但重启后 /usr/include/bits/sched.h 看起来像

```
...
#define SCHED_OTHER 0
#define SCHED_FIFO  1
#define SCHED_RR    2
#ifdef __USE_GNU
# define SCHED_BATCH    3
#endif
... 
```

可能是什么问题呢？我正在使用带有核心双核 t7300 的 Ubuntu 8.04

谢谢，斯特凡诺

# javascript - 为什么这个js代码不起作用？

> ID：11704102
> 
> 赞同：-2
> 
> 时间：2012-07-28T19:43:01.830
> 
> 标签：javascript, jquery, knockout.js

我在 2 Model 上使用 knockout.js，但这不起作用。

```
function AppViewModel1(Name) {
    this.firstName = ko.observable(Name.fn);
    this.lastName = ko.observable(Name.ln);
}

function AppViewModel2(Name) {
    this.first = ko.observable(Name.fn);
    this.last = ko.observable(Name.ln);
}

 ko.applyBindings(new AppViewModel1({ fn : "yahoo", ln: ".in" }));
 ko.applyBindings(new AppViewModel2({ fn : "gmail", ln: ".com" })); 
```

谁能解释一下，我错在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:57:36.243

通常，Knockout 只允许绑定到单个视图模型。

一个视图模型可以包含对其他 JS 对象/类的引用，但只能绑定一个视图模型。

但是，在 Knockout 中有一个可用于绑定多个视图模型的插件：

[https://github.com/hunterloftis/knockout.namespaces](https://github.com/hunterloftis/knockout.namespaces)

看看它，看看它是否能解决你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T03:48:00.853

您需要限制绑定应用到 dom 的哪一部分。您可以在同一页面/文档上绑定多个视图模型，但它们*不能*重叠。因此，请指定一些 ID 并将绑定限制在页面的不同部分。

> 或者，您可以传递第二个参数来定义要在文档的哪个部分搜索数据绑定属性。例如，`ko.applyBindings(myViewModel, document.getElementById('someElementId'))`。这将激活限制为 ID 为 someElementId 的元素及其后代，如果您希望拥有多个视图模型并将每个模型与页面的不同区域相关联，这将非常有用。

来自[Knockout observables 文档](http://knockoutjs.com/documentation/observables.html)

例子：

```
function AppViewModel1(Name) {
    this.firstName = ko.observable(Name.fn);
    this.lastName = ko.observable(Name.ln);
}

function AppViewModel2(Name) {
    this.first = ko.observable(Name.fn);
    this.last = ko.observable(Name.ln);
}

ko.applyBindings(new AppViewModel1({ fn : "yahoo", ln: ".in" }),
    document.getElementById('gmailArea'));
ko.applyBindings(new AppViewModel2({ fn : "gmail", ln: ".com" }),
    document.getElementById('yahooArea')); 
```

如果您绝对必须在页面的相同部分访问相同的视图模型，那么您只需将它们全部合并到一个视图模型中。不漂亮，但 cest la vie。

例如

```
function AppViewModel1(Name) {
    this.gmailFirstName = ko.observable(Name.gmailFn);
    this.gmailLastName = ko.observable(Name.gmailLn);

    this.yFirst = ko.observable(Name.yFn);
    this.yLast = ko.observable(Name.yLn);
}

ko.applyBindings(new AppViewModel1({ gmailFn: "google", gmialLn: ".com", yFn : "yahoo", yLn: ".in" })); 
```

我没有使用命名空间插件 jimmym 链接，但这听起来很有趣。

# ruby-on-rails - 不同引擎上模型之间的 ActiveRecord 关系

> ID：11704106
> 
> 赞同：3
> 
> 时间：2012-07-28T19:43:45.403
> 
> 标签：ruby-on-rails, activerecord, rails-engines

我正在构建一个可能会有大量模型的 Rails 应用程序。现在假设我需要有用户，每个用户都有一个个人博客

我一直在一个单独的引擎（我们称之为 AuthEngine）上开发与用户相关的部分，它封装了用户模型、身份验证等。当时这似乎是最好的方法

与此同时，我的同事正在开发另一个引擎来处理博客功能（我们称之为 BlogEngine）。现在他需要访问存储在另一个引擎中的用户数据。他通过定义：

```
BlogEngine.user_class = "AuthEngine::User" 
```

这样，他可以轻松地询问用户数据，即使它没有存储在同一个引擎中。当我们想要定义模型之间的关系时，问题就来了

他可以轻松地说每篇博文都属于一个用户

```
has_one :user, :class_name => BlogEngine.user_class 
```

但据我所知，他不能指定每个用户都有多个帖子，因为用户模型在另一个引擎中

这样做的后果是他不能做类似的事情`@user.posts`，而是不得不做`Post.find_all_by_user(@user)`

有没有更优雅的方法来处理这个问题？我还考虑了每个引擎可以简单地在应用程序内部生成模型，去除封装的可能性，但是由于模型的数量会迅速增长，我认为这会使应用程序更加混乱，并且不那么可维护

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T06:46:30.967

我认为您应该在内部重新打开用户类`blog_engine`以定义`has_many :posts`关系，并且应该是适当的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T21:04:40.963

拥有一个只有关系作为引擎依赖项的通用模型 gem/engine 怎么样？这样您就可以访问每个引擎中的所有相关关系。

# ajax - 数据表仅在站点刷新后刷新

> ID：11704109
> 
> 赞同：0
> 
> 时间：2012-07-28T19:44:08.053
> 
> 标签：ajax, jsf, command

我使用 primefaces 和 dataTable 组件。在我的网站上，我有几种表格用于收集数据并将其保存在数据库中。这是由 ap:command 按钮触发的，其中“更新”属性包含显示 DB 内容的数据表的 id。当我提交表单时，组件（表）未更新。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:38:22.610

不是一个答案，而是一个帮助预测失败点的问题。数据表是与命令按钮分开的形式吗？如果是这样，假设您使用的是 ajax="true" （pf 组件的默认值），您将如何引用该表以确保它更新。如果您不使用 ajax，我猜这是支持 bean 中的陈旧数据问题。但没有更多信息，这很难。尝试附加源代码（如果您正在处理敏感的事情，请降低到您的舒适程度）。

高温高压

# web-services - 通用soap客户端工具

> ID：11704113
> 
> 赞同：5
> 
> 时间：2012-07-28T19:44:49.860
> 
> 标签：web-services, soap, wsdl, soapui, soap-client

我创建了一个我想测试的soap服务。但我不想创建一个soap客户端来测试它。我正在寻找一些可以解析wsdl并给出可以输入的参数列表然后给出soap响应的工具服务。

我知道[肥皂熊猫](http://www.soappanda.com)，但它不起作用，说无效的网址，因为我的肥皂服务网址中有一个连字符。

[SoapUi 体积](http://www.soapui.org)很大。我想要一个可以轻松下载的小工具

[soapclient](http://www.soapclient.com/soaptest.html)是一个网络工具，但它已经关闭。

请建议一些替代工具

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:48:45.500

试试[POSTER](https://addons.mozilla.org/en-us/firefox/addon/poster/) firefox-addon 可能是您想要的。:S

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T15:43:46.033

你可以试试：

1.  [http://www.service-repository.com/client/start](http://www.service-repository.com/client/start)或
2.  [http://membrane-soa.org/soap-client/](http://membrane-soa.org/soap-client/)

第二个对我来说更好，但它不适用于 SSL。

再见。

# class - D类的开销

> ID：11704115
> 
> 赞同：1
> 
> 时间：2012-07-28T19:45:08.677
> 
> 标签：class, d, overhead

我想我听说 D 类有两个字（2 void*）的开销，而不是 C++ 要求的一个字。我还听说 vtable 布局与 C++ 不兼容。我记错了吗？如果是这样，这些决定的理由是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T09:45:12.610

一些东西：

1.  在 C++ 中，没有虚函数的类的开销*为零。*
2.  在 D 中，一个类总是从 继承虚函数`Object`，所以它总是有这个`__vptr`开销，但也有一个`__monitor`，而 C++ 类对象没有。
3.  在 C++ 和 D 中，`vptr`类实现的每个接口都会有额外的。

vtable 布局与 C++ 不兼容，因为 D 包含一个指向`TypeInfo`实例的指针，该实例具有关于类的运行时类型信息。C++ 显然没有，所以它是不兼容的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T20:35:33.837

额外的指针指向同步类的监视器对象（显然已经讨论过为非同步类删除它，但还没有发生）。布局记录在规范的[ABI 部分](http://dlang.org/abi.html)。

我不确定 vtable 布局与 C++ 编译器的不同之处。其他人可能可以回答这个问题。

# powershell - 是否可以将 Export-ModuleMember 与 PowerShell 过滤器一起使用

> ID：11704117
> 
> 赞同：4
> 
> 时间：2012-07-28T19:45:47.070
> 
> 标签：powershell

假设我在 PowerShell 模块中定义了一个过滤器：

```
filter OddNumbers {
  $value = $_
  $value | ? {($_ % 2)}
} 
```

首先，是否可以使用导出此过滤器`Export-ModuleMember`？其次，如果可能的话，语法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T20:24:59.147

你有没有尝试过

```
Export-modulemember -function OddNumbers 
```

过滤器是一种特殊的功能，因此它应该可以工作。

# javascript - 如何手动设置时间选择器

> ID：11704119
> 
> 赞同：-1
> 
> 时间：2012-07-28T19:45:56.977
> 
> 标签：javascript, jquery, jquery-ui

我从[这里](http://haineault.com/media/jquery/ui-timepickr/page/)下载了时间选择器。在剪切了很多代码之后，我来到了这个简单的例子：

```
<html>
    <head>
        <title>jQuery.timepickr.js</title>
        <link rel="Stylesheet" media="screen" href="reset.css" />
        <link rel="Stylesheet" media="screen" href="styles.css" />
        <link rel="Stylesheet" media="screen" href="../dist/themes/default/ui.core.css" />
        <link rel="Stylesheet" media="screen" href="../src/css/ui.timepickr.css" />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.js"></script>
        <script type="text/javascript" src="jquery.utils.js"></script>
        <script type="text/javascript" src="jquery.strings.js"></script>
        <script type="text/javascript" src="jquery.anchorHandler.js"></script>
        <script type="text/javascript" src="jquery.ui.all.js"></script>
        <script type="text/javascript" src="../src/ui.timepickr.js"></script>

        <script type="text/javascript">
            $(function(){
              $('#timepicker').timepickr().focus();
              $('#timepicker').next().find('ol').show().find('li:eq(2)').mouseover();
            });
        </script>
    </head>
    <body id="themeroller">

        <div id="splash">
            <div id="demo">
                <div id="d-demo-wrapper-1" class="demo-wrapper">
                    <input id="timepicker" type="text" value="02:30" class="demo">
                </div>

            </div>
        </div>
    </body>
</html> 
```

我注意到，当我尝试从键盘手动设置时间时，数字会自动更改，然后鼠标不在输入字段中。我注意到即使在原始示例中我也无法手动设置数字。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:23:13.653

您可以设置默认值，通过使用`val`属性`timepickr`

```
$("#timepickr").timepickr({
            convention: 12,
            format12: "{h:02.d}:{m:02.d} {z:s}",
            rangeMin: $.range(0, 60),
            val: "02:00 am" //set your default time here
        }); 
```

# java - Admob 发布 ID 错误

> ID：11704120
> 
> 赞同：1
> 
> 时间：2012-07-28T19:46:09.790
> 
> 标签：java, android, sdk, admob, ads

我创建了一个付费应用程序，我正在尝试使用 admob 广告创建免费应用程序。我按照 Google 的 SDK 6.1 教程中的说明设置了整个项目，但是在运行时它不起作用。

我使用的代码和教程一样：Main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
    <TextView android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:text="@string/hello"/>
    <com.google.ads.AdView android:id="@+id/ad"
                           android:layout_width="wrap_content"
                           android:layout_height="wrap_content"
                           ads:adSize="BANNER"
                           ads:adUnitId="xxxxxxxxxx" 
                           ads:loadAdOnCreate="true"/>
</LinearLayout> 
```

BannerSample.java 包 com.google.example.ads.xml；

```
import android.app.Activity;
import android.os.Bundle;

/**
 * A simple {@link Activity} which embeds an AdView in its layout XML.
 */
public class BannerSample extends Activity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // This example requires no additional code since the optional
    // "loadAdOnCreate=true" XML attribute was used. If "loadAdOnCreate" were
    // not specified, the ad would have to be loaded by creating an AdRequest
    // and using Activity.findViewById() to get the AdView.
    //
    // The "loadAdOnCreate" XML attribute makes it simpler to get ads since no
    // code is required, but it also limits the developer's control over the ad
    // request since a generic AdRequest is used.
  }
} 
```

我得到的错误：

```
07-28 21:34:48.704: E/Ads(15980): JS: Uncaught ReferenceError: AFMA_getSdkConstants is not defined (about:blank:1)
07-28 21:34:48.704: E/Web Console(15980): Uncaught ReferenceError: AFMA_getSdkConstants is not defined at about:blank:1
07-28 21:36:48.841: E/Ads(15980): JS: Uncaught ReferenceError: AFMA_getSdkConstants is not defined (about:blank:1)
07-28 21:36:48.841: E/Web Console(15980): Uncaught ReferenceError: AFMA_getSdkConstants is not defined at about:blank:1
07-28 21:38:48.958: E/Ads(15980): JS: Uncaught ReferenceError: AFMA_getSdkConstants is not defined (about:blank:1)
07-28 21:38:48.958: E/Web Console(15980): Uncaught ReferenceError: AFMA_getSdkConstants is not defined at about:blank:1
07-28 21:40:49.066: E/Ads(15980): JS: Uncaught ReferenceError: AFMA_getSdkConstants is not defined (about:blank:1)
07-28 21:40:49.066: E/Web Console(15980): Uncaught ReferenceError: AFMA_getSdkConstants is not defined at about:blank:1
07-28 21:42:02.817: E/chromium(17098): external/chromium/net/disk_cache/stat_hub.cc:190: [0728/214202:ERROR:stat_hub.cc(190)] StatHub::Init - App com.google.example.ads.xml isn't supported.
07-28 21:42:02.827: E/chromium(17098): external/chromium/net/disk_cache/stat_hub.cc:190: [0728/214202:ERROR:stat_hub.cc(190)] StatHub::Init - App com.google.example.ads.xml isn't supported.
07-28 21:42:03.178: E/Ads(17098): JS: Uncaught ReferenceError: AFMA_getSdkConstants is not defined (about:blank:1)
07-28 21:42:03.198: E/Web Console(17098): Uncaught ReferenceError: AFMA_getSdkConstants is not defined at about:blank:1 
```

谢谢您的帮助！

**更新：** 新代码和错误是：BannerSample.java

```
package com.google.example.ads.xml;

import com.google.ads.AdRequest;
import com.google.ads.AdView;

import android.app.Activity;
import android.os.Bundle;
import android.os.Looper;

/**
 * A simple {@link Activity} which embeds an AdView in its layout XML.
 */
public class BannerSample extends Activity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // This example requires no additional code since the optional
    // "loadAdOnCreate=true" XML attribute was used. If "loadAdOnCreate" were
    // not specified, the ad would have to be loaded by creating an AdRequest
    // and using Activity.findViewById() to get the AdView.
    //
    // The "loadAdOnCreate" XML attribute makes it simpler to get ads since no
    // code is required, but it also limits the developer's control over the ad
    // request since a generic AdRequest is used.
    (new Thread() {
        public void run() {
             Looper.prepare();
             AdView view = (AdView) findViewById(R.id.ad);
             view.loadAd(new AdRequest());
        }
    }).start();
  }
} 
```

错误：

```
07-28 21:42:02.817: E/chromium(17098): external/chromium/net/disk_cache/stat_hub.cc:190: [0728/214202:ERROR:stat_hub.cc(190)] StatHub::Init - App com.google.example.ads.xml isn't supported.
07-28 21:42:02.827: E/chromium(17098): external/chromium/net/disk_cache/stat_hub.cc:190: [0728/214202:ERROR:stat_hub.cc(190)] StatHub::Init - App com.google.example.ads.xml isn't supported. 
```

**更新 2：** 对不起，我忘记发布清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.google.example.ads.xml"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:targetSdkVersion="15" android:minSdkVersion="3"/> 

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <meta-data android:value=" a1501435dfa5050 " android:name="ADMOB_PUBLISHER_ID" />
        <activity android:name=".BannerSample"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.google.ads.AdActivity"
                  android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:28:39.133

```
(new Thread() {
            public void run() {
                 Looper.prepare();
                adView.loadAd(new AdRequest());
            }
        }).start(); 
```

在 ICS 中，您不允许在主线程中执行网络操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:43:55.417

您不会相信这一点，但是当加载的页面具有错误的 DOM 结构时，我们在一个非常特定的设备 (HTC Desire C) 上收到此错误。我们可以使用以下损坏的 HTML 来重现它：

```
<html>
    <body></body>
</html>
Hello world!
</html> 
```

该应用程序将在没有任何堆栈跟踪的情况下崩溃，但有几个类似于以下内容的日志：

```
E/chromium(14074): external/chromium/net/disk_cache/stat_hub.cc:190: [1026/182205:ERROR:stat_hub.cc(190)] StatHub::Init - App com.myapp isn't supported. 
```

# html - 重新加载或刷新页面时更改字符集

> ID：11704121
> 
> 赞同：0
> 
> 时间：2012-07-28T19:46:21.763
> 
> 标签：html, character-encoding

我有一个 ASP.NET 页面，其编码在标头中定义，仅使用正确的编码加载一次，然后显示没有编码的数据（ASCII？）。

HTML 标头是这样写的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
<meta http-equiv="content-type" content="text/html" /> 
<meta http-equiv="charset" content="utf-8" /> 
```

应该显示为 UTF-8 的数据是从 SQL 中的 nvarchar 单元格中获取的，并放入 ASP.Net 中的 cookie 中。当页面第一次重新加载时，它看起来没问题：

```
Salé 
```

然后对于所有其他重定向/刷新，它显示为：

```
SalÃ© 
```

在浏览器中检查错误页面的源时，字符集元位于源中。

我的标题错了吗？如果没有，我将深入研究我的代码。

[编辑]

我尝试在 中使用 runat="server" 以编程方式更改标头`<head>`，但它不起作用。

```
Dim meta As System.Web.UI.HtmlControls.HtmlMeta = New System.Web.UI.HtmlControls.HtmlMeta()
meta.HttpEquiv = "content-type"
meta.Content = Response.ContentType + "; charset=" + Response.ContentEncoding.HeaderName
Page.Header.Controls.Add(meta) 
```

[编辑]

发现了一个类似的问题：[UTF-8 questions with characters from MySQL database (eg as Ã©)](https://stackoverflow.com/questions/9179763/utf-8-problems-with-characters-from-mysql-database-e-g-e-as-a)

# android - 如何在android中解析两行文本和图像

> ID：11704122
> 
> 赞同：1
> 
> 时间：2012-07-28T19:46:34.743
> 
> 标签：android, listview, xml-parsing

我有一个正在解析的提要，想知道如何解析两行信息和一个图像。我可以成功解析一行文本，但还没有弄清楚如何从中提取图像和我想要的第二行文本。这是我想要完成的图片

![我想要完成的例子](../Images/61eb1149d1b6b48477b90f9fd92d8074.png)

这是我的解析器的代码

```
 public class XmlPullFeedParser extends BaseFeedParser {

public XmlPullFeedParser(String feedUrl) {
    super(feedUrl);
}

public List<Message> parse() {
    List<Message> messages = null;
    XmlPullParser parser = Xml.newPullParser();
    try {
        // auto-detect the encoding from the stream
        parser.setInput(this.getInputStream(), null);
        int eventType = parser.getEventType();
        Message currentMessage = null;
        boolean done = false;
        while (eventType != XmlPullParser.END_DOCUMENT && !done){
            String name = null;
            switch (eventType){
                case XmlPullParser.START_DOCUMENT:
                    messages = new ArrayList<Message>();
                    break;
                case XmlPullParser.START_TAG:
                    name = parser.getName();
                    if (name.equalsIgnoreCase(ITEM)){
                        currentMessage = new Message();
                    } else if (currentMessage != null){
                        if (name.equalsIgnoreCase(LINK)){
                            currentMessage.setLink(parser.nextText());
                        } else if (name.equalsIgnoreCase(DESCRIPTION)){
                            currentMessage.setDescription(parser.nextText());
                        } else if (name.equalsIgnoreCase(PUB_DATE)){
                            currentMessage.setDate(parser.nextText());
                        } else if (name.equalsIgnoreCase(TITLE)){
                            currentMessage.setTitle(parser.nextText());
                        }   
                    }
                    break;
                case XmlPullParser.END_TAG:
                    name = parser.getName();
                    if (name.equalsIgnoreCase(ITEM) && currentMessage != null){
                        messages.add(currentMessage);
                    } else if (name.equalsIgnoreCase(CHANNEL)){
                        done = true;
                    }
                    break;
            }
            eventType = parser.next();
        }
    } catch (Exception e) {
        Log.e("Trey's Blog::PullFeedParser", e.getMessage(), e);
        throw new RuntimeException(e);
    }
    return messages;
}
 } 
```

我的列表活动

```
 public class MessageList extends ListActivity {

private List<Message> messages;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.activity_main);
    loadFeed(ParserType.XML_PULL);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Intent viewMessage = new Intent(Intent.ACTION_VIEW, 
            Uri.parse(messages.get(position).getLink().toExternalForm()));
    this.startActivity(viewMessage);
}

private void loadFeed(ParserType type){
    try{
        Log.i("Trey's Blog", "ParserType="+type.name());
        FeedParser parser = FeedParserFactory.getParser(type);
        long start = System.currentTimeMillis();
        messages = parser.parse();
        long duration = System.currentTimeMillis() - start;
        Log.i("Trey's Blog", "Parser duration=" + duration);
        String xml = writeXml();
        Log.i("Trey's Blog", xml);
        List<String> titles = new ArrayList<String>(messages.size());
        for (Message msg : messages){
            titles.add(msg.getTitle());
        }
        ArrayAdapter<String> adapter = 
            new ArrayAdapter<String>(this, R.layout.row,titles);
        this.setListAdapter(adapter);
    } catch (Throwable t){
        Log.e("Trey's Blog",t.getMessage(),t);
    }
}

private String writeXml(){
    XmlSerializer serializer = Xml.newSerializer();
    StringWriter writer = new StringWriter();
    try {
        serializer.setOutput(writer);
        serializer.startDocument("UTF-8", true);
        serializer.startTag("", "messages");
        serializer.attribute("", "number", String.valueOf(messages.size()));
        for (Message msg: messages){
            serializer.startTag("", "message");
            serializer.attribute("", "date", msg.getDate());
            serializer.startTag("", "title");
            serializer.text(msg.getTitle());
            serializer.endTag("", "title");
            serializer.startTag("", "url");
            serializer.text(msg.getLink().toExternalForm());
            serializer.endTag("", "url");
            serializer.startTag("", "body");
            serializer.text(msg.getDescription());
            serializer.endTag("", "body");
            serializer.endTag("", "message");
        }
        serializer.endTag("", "messages");
        serializer.endDocument();
        return writer.toString();
    } catch (Exception e) {
        throw new RuntimeException(e);
    } 
}
 } 
```

我的提要解析器

```
 public abstract class FeedParserFactory {
static String feedUrl = "http://treymorgan.net/feed";

public static FeedParser getParser(){
    return getParser(ParserType.ANDROID_SAX);
}

public static FeedParser getParser(ParserType type){
    switch (type){
        case SAX:
            return new SaxFeedParser(feedUrl);
        case DOM:
            return new DomFeedParser(feedUrl);
        case ANDROID_SAX:
            return new AndroidSaxFeedParser(feedUrl);
        case XML_PULL:
            return new XmlPullFeedParser(feedUrl);
        default: return null;
    }
}
 } 
```

和消息活动

```
 public class Message implements Comparable<Message>{
static SimpleDateFormat FORMATTER = 
    new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss Z");
private String title;
private URL link;
private String description;
private Date date;

public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title.trim();
}
// getters and setters omitted for brevity 
public URL getLink() {
    return link;
}

public void setLink(String link) {
    try {
        this.link = new URL(link);
    } catch (MalformedURLException e) {
        throw new RuntimeException(e);
    }
}

public String getDescription() {
    return description;
}

public void setDescription(String description) {
    this.description = description.trim();
}

public String getDate() {
    return FORMATTER.format(this.date);
}

public void setDate(String date) {
    // pad the date if necessary
    while (!date.endsWith("00")){
        date += "0";
    }
    try {
        this.date = FORMATTER.parse(date.trim());
    } catch (ParseException e) {
        throw new RuntimeException(e);
    }
}

public Message copy(){
    Message copy = new Message();
    copy.title = title;
    copy.link = link;
    copy.description = description;
    copy.date = date;
    return copy;
}

@Override
public String toString() {
    StringBuilder sb = new StringBuilder();
    sb.append("Title: ");
    sb.append(title);
    sb.append('\n');
    sb.append("Date: ");
    sb.append(this.getDate());
    sb.append('\n');
    sb.append("Link: ");
    sb.append(link);
    sb.append('\n');
    sb.append("Description: ");
    sb.append(description);
    return sb.toString();
}

@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((date == null) ? 0 : date.hashCode());
    result = prime * result
            + ((description == null) ? 0 : description.hashCode());
    result = prime * result + ((link == null) ? 0 : link.hashCode());
    result = prime * result + ((title == null) ? 0 : title.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Message other = (Message) obj;
    if (date == null) {
        if (other.date != null)
            return false;
    } else if (!date.equals(other.date))
        return false;
    if (description == null) {
        if (other.description != null)
            return false;
    } else if (!description.equals(other.description))
        return false;
    if (link == null) {
        if (other.link != null)
            return false;
    } else if (!link.equals(other.link))
        return false;
    if (title == null) {
        if (other.title != null)
            return false;
    } else if (!title.equals(other.title))
        return false;
    return true;
}

public int compareTo(Message another) {
    if (another == null) return 1;
    // sort descending, most recent first
    return another.date.compareTo(date);
}
 } 
```

我已经对此进行了一段时间的研究，但没有发现任何可以解决此问题的方法。任何人都可以提供的任何信息将不胜感激。解析很新，所以我试着去学习这个。再次感谢。

* * *

找到了一个很棒的教程来帮助我实现我想要做的视图，这里是它的链接。

[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

希望这会对某人有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:31:04.270

您正在使用`ArrayAdapter`this 调整字符串数组并在每个列表项上显示一个字符串。

您需要：

*   创建自定义适配器
*   延长`BaseAdapter`
*   传递一个代表一个列表项的自定义布局
*   `Message`把它传递给你的列表
*   在`getView()`方法中检索一个`Message`并设置标题描述和图像

这是你的罪魁祸首代码：

```
ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this, R.layout.row, titles);
this.setListAdapter(adapter); 
```

# c# - 控制器中的自定义可枚举类型作为参数（ASP.NET MVC）

> ID：11704125
> 
> 赞同：2
> 
> 时间：2012-07-28T19:46:52.247
> 
> 标签：c#, asp.net-mvc, controller

我从事一个 ASP.NET MVC 项目，该项目需要能够以可扩展的方式过滤数据。我决定使用一个类来表示单个过滤条件（我知道`Dictionary`此时它可能是一个，但我可能需要稍后添加其他属性）：

```
public class FilterCriterion
{
    public string FilterName { get; set; }

    public string FilterValue { get; set; }
} 
```

这是我想到的控制器方法签名，它将返回过滤后的数据：

```
public JsonResult GetMultipleShowDetailsByFilter(IEnumerable<FilterCriterion> filters, int pageNumber, int itemsPerPage) 
```

该方法将从网页调用（使用 JavaScript），并返回一个 JSON，其中包含一组实体，然后将显示在页面上。

我假设我需要某种转换器来接受原始状态的参数并创建和实现可枚举的对象`IEnumerable<FilterCriterion>`。也许我可以使用 a `ModelBinder`，但我不确定如何使用。

你能把我推向正确的方向吗？谢谢。

编辑：我没有按照建议传递数组。**当我进入控制器时，里面有正确数量的项目`filters`，但它们的属性（FilterName 和 FilterValue）都是 null**。下面我发布完整的代码以及客户端过滤器对象的内容。我究竟做错了什么？Javascript代码：

```
function filterChanged() {
    var activeFilters = $(':checked');
    var filters = new Array();
    $.each(activeFilters, function (i, val) {
        var newItem = new Object();
        newItem.FilterName = $(val).attr('data-filter-type');
        newItem.FilterValue = $(val).attr('data-filter-value');
        filters[i] = newItem;
    });

    $.getJSON('../DatabaseApi/GetMultipleShowDetailsByFilter',
        {
            'filters': filters,
            'pageNumber': 1,
            'itemsPerPage': 10
        },
        function(data) {
            fill(data);
        });
} 
```

创建的对象看起来如何（证明有数据，取自 VS Immediate Window）：

```
?filters
[[object Object],[object Object]]
    [0]: {...}
    [1]: {...}
    [prototype]: []
?filters[0]
{...}
    [prototype]: {...}
    FilterName: "Genre"
    FilterValue: "Animation" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T19:53:28.547

1.  将您的控制器签名更改为

    ```
    public JsonResult GetMultipleShowDetailsByFilter(FilterCriterion[] filters, int pageNumber, int itemsPerPage) 
    ```

2.  使用以下`POST`结构：

    ```
    filters[0].FilterName = 'aaa'
    filters[0].FilterValue = 'bbbb'
    filters[1].FilterName = 'ccc'
    filters[1].FilterValue = 'ddd'
    ...
    filters[n].FilterName = 'xxx'
    filters[n].FilterValue = 'yyy' 
    ```

    （你可以很容易地用 jQuery 做到这一点）

一个警告：您的索引编号应该是连续的，即没有间隙。

**更新主题启动器的更新**：您必须非常小心`POST`结构。嵌套的 JavaScript 对象不行。尝试使用这个：

```
function filterChanged() {
    var activeFilters = $(':checked');
    var data = {
        'pageNumber': 1,
        'itemsPerPage': 10
    }
    $.each(activeFilters, function (i, val) {
        data['filters[' + i + '].FilterName'] = $(val).attr('data-filter-type');
        data['filters[' + i + '].FilterValue'] = $(val).attr('data-filter-value');
    });

    $.getJSON('../DatabaseApi/GetMultipleShowDetailsByFilter',
        data,
        function(data) {
            fill(data);
        });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T22:03:43.917

看到这个[链接](http://erraticdev.blogspot.com.ar/2010/12/sending-complex-json-objects-to-aspnet.html)，在这里你可以看到插件`ToDictionary`工作得很好并且解决了这些问题，让我们的代码更干净：

JS：

```
function filterChanged() {

    var filters = [];
    $(':checked').each(function (i, el) {
        filters.push({
            'FilterName': $(this).data('filter-type'),
            'FilterValue': $(this).data('filter-value')
        });
    });

    var data = $.toDictionary({
        'filters': filters,
        'pageNumber': 1,
        'itemsPerPage': 10
    });

    var response = function (data) {
        fill(data);
    };

    $.getJSON('../DatabaseApi/GetMultipleShowDetailsByFilter', data, response);
} 
```

根据回复：[链接](https://stackoverflow.com/questions/560575/asp-net-mvc-how-to-pass-json-object-from-view-to-controller-as-parameter)

# javascript - 禁用对 Div Overlay 的点击，但允许子级点击

> ID：11704126
> 
> 赞同：1
> 
> 时间：2012-07-28T19:46:53.457
> 
> 标签：javascript, jquery, html

我有一个包含一些文本输入的 div。我希望单击这些文本输入并接收基本鼠标事件，但我想禁用包含的 div。有没有办法做到这一点？div 比其他一些元素具有更高的 z-index，它是绝对定位的，并且不允许我单击它下面的元素。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:53:27.087

您不能单击低于（深度）另一个元素的元素。为可操作的输入元素提供比覆盖 div 更高的 z-index（和 abs/rel 定位）。

# iis-7 - 如何在 localhost (IIS 7) 上部署 silverlight 网站

> ID：11704133
> 
> 赞同：2
> 
> 时间：2012-07-28T19:48:07.933
> 
> 标签：iis-7, silverlight-4.0, silverlight-5.0

我是 Silverlight 的新手，我创建了一个包含 DLL 项目、Silverlight 项目和 Silverlight.web 项目的应用程序。现在我想在 IIS 中发布或部署它，以便我可以测试 Silverlight Web 应用程序。有人可以帮我部署和发布 Silverlight Web 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:23:13.850

在 Visual Studio 中右键单击 Silverlight.Web 项目。
选择发布选项。
在“发布网站”窗口中输入您的网站配置。

如果您真的是 IIS 新手，您可以在打开的“发布 Web”窗口的文本框下方的“例如”中找到一个非常基本的设置来开始使用。“本地主机”和“默认网站/MyApp”。将 Silverlight mime 类型 (application/x-silverlight-app) 添加到您的 IIS 配置中。如何？> [http://learn.iis.net/page.aspx/262/configuring-iis-for-silverlight-applications/](http://learn.iis.net/page.aspx/262/configuring-iis-for-silverlight-applications/)

```
http://localhost/MyApp/SilverlightApplicationTestPage.aspx
```

应该指向您的网站。

从评论中回复您的扩展问题，
既然您现在看到登录页面，进一步的步骤
var canYouSeeAnySLonIIS = 您的登录页面是在 SL 中制作的吗？
尝试
{
If (!canYouSeeAnySLonIIS)
{
可能您不会为 Silverlight 应用程序设置 IIS。将 silverlight mime 类型添加到您的 IIS。如何 > [http://learn.iis.net/page.aspx/262/configuring-iis-for-silverlight-applications/](http://learn.iis.net/page.aspx/262/configuring-iis-for-silverlight-applications/)
}
else
{
我没有针对您的问题的具体解决方案，但在这里您可以启动一些现在来自 IIS 的 SL，这里有一个提示，可以帮助解决这个问题和任何其他类似问题。您可能想尝试使用 VS 在 IIS 中调试 SL 应用程序。如何？
在 IE 中启动您的登录 (SL) 页面（为简单起见）。在 vS 中，工具 > 附加到进程 > 搜索 iexplore.exe，确保选择类型列指示“Silverlight，x86”的那个，这是 SL 插件沙箱进程。附。瞧！
如果您使用的是 firefox，则略有不同，进程名称将是 plugin-container.exe
}
}
最后
{
通用调试提示 > [http://boxbinary.com/2010/04/debugging-silverlight-in-visual-studio-breakpoints -不被击中/](http://boxbinary.com/2010/04/debugging-silverlight-in-visual-studio-breakpoints-not-being-hit/)
}

# python - 创建一个新的文本文件，其中包含来自其他两个文本文件的特定信息

> ID：11704134
> 
> 赞同：-2
> 
> 时间：2012-07-28T19:48:13.620
> 
> 标签：python, python-3.x

我正在尝试将两个文本文件合并为一个。例如，

文件 1

```
NAME 3
ATOM 1 4 0 0 0 
```

文件 2

```
3  3  
(INPUT) - Node Node 1 
```

我希望第三个文本文件看起来像这样：

```
NAME 3            3  3
ATOM 1 4 0 0 0    (INPUT)-Node Node 1 
```

有没有人有关于如何将这些合并在一起的建议？

这就是我尝试过的：`paste -d "\n" file1.txt.file2.txt`它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:35:17.497

这可以工作：

```
with open(file1) as f1, open(file2) as f2:
    lines = [line_f1.strip() + line_f2.strip() for line_f1, line_f2 in zip(f1, f2)]

with open(file3, 'w') as f3:
    for line in lines:
        f3.write(line + '\n') 
```

# django - Django：定义全局函数以从表单和视图访问？

> ID：11704135
> 
> 赞同：1
> 
> 时间：2012-07-28T19:48:14.417
> 
> 标签：django

我有一个`get_non_open_deals()`包含一些业务逻辑的函数，它在表单和视图中都使用。

```
class CallsForm(ModelForm):       

    def __init__(self, company, *args, **kwargs):
        super(CallsForm, self).__init__(*args, **kwargs)                                        
        self.fields['deal_1'].queryset = self.get_non_open_deals(self.instance, company) 
```

我现在`forms`在`views`. 我想知道是否有一种方法可以在一个地方定义它以供双方访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T19:56:54.497

如果没有更多的代码示例可以使用它很难显示，但听起来这应该是模型上的一种方法。如果这需要在多个模型上工作，那么 mixin 或抽象基类可能是合适的。

```
class SomeModel(models.Model):
    def get_non_open_deals(self, company):
        # business logic here

class CallsForm(ModelForm):
    def __init__(self, company, *args, **kwargs):
        super(CallsForm, self).__init__(*args, **kwargs)                                        
        self.fields['deal_1'].queryset = self.instance.get_non_open_deals(company) 
```

至少，你可以让它成为你`models.py`模块中的一个函数。

# android - 最近更新后 DDMS/ADB 未检测到设备

> ID：11704137
> 
> 赞同：0
> 
> 时间：2012-07-28T19:48:28.980
> 
> 标签：android, device, adb, ddms

关于我可能做错了什么，我知之甚少，但我的 DDMS 和 ADB 突然停止检测我插入运行 Mac OS 10.7.4 的 MacBook Air 的任何 Android 设备。我相信这是在我最近从 Eclipse Indigo 运行更新 Android SDK 和 API 之后开始发生的。我手机上的一切都应该是这样（调试已打开，允许从未知来源安装应用程序已启用，等等）。我想知道最近是否有其他人遇到过这个问题并且知道如何解决它。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:38:07.260

好的，我发现这与最近的更新无关。事实上，这是因为我安装了 EasyTether，显然它干扰了 ADB。我在这里找到了答案：[OS X 10.6.6 and "adb devices" failed to list android devices](https://stackoverflow.com/questions/4680637/mac-os-x-10-6-6-and-adb-devices-fails-to-list-android-devices)。

# google-maps - “数据可能仍在加载”...错误:(

> ID：11704138
> 
> 赞同：0
> 
> 时间：2012-07-28T19:48:35.480
> 
> 标签：google-maps, google-fusion-tables

嗨，我有一张融合表的地图，位于[http://andyinman.com/open-city/index.html](http://andyinman.com/open-city/index.html)。融合表位于[https://www.google.com/fusiontables/DataSource?docid=1nZeH4nXDyPJX7iKKijMnBFWGtqI0vdy5xU74ANs](https://www.google.com/fusiontables/DataSource?docid=1nZeH4nXDyPJX7iKKijMnBFWGtqI0vdy5xU74ANs)。

出现“数据可能仍在加载”错误。我之前使用过完全相同的数据集，但点的标记不同，而且效果很好。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:46:23.180

您的查询无效。

我可以让它工作：

[从 4720188 中选择“位置”，其中“输入”（-1、1、2、3、5、6、7、8、9、10、11）和“接收日期”>=“2007 年 1 月 1 日”和'收到日期' <= '1/30/2007' AND ST_INTERSECTS('位置', CIRCLE(LATLNG(39.770668,-94.846031),1000))](http://www.geocodezip.com/v3_FusionTablesLayer_linktoA.html?lat=39.767040&lng=-94.846288&zoom=14&type=m&tableid=4720188&tablequery=SELECT%20%27Location%27%20FROM%204720188%20WHERE%20%20%27type%27%20IN%20%28-1%2C1%2C2%2C3%2C5%2C6%2C7%2C8%2C9%2C10%2C11%29%20AND%20%27DATE%20RECEIVED%27%20%3E%3D%20%271/1/2007%27%20AND%20%27DATE%20RECEIVED%27%20%3C%3D%20%271/30/2007%27%20AND%20ST_INTERSECTS%28%27Location%27%2C%20CIRCLE%28LATLNG%2839.770668%2C-94.846031%29%2C1000%29%29)

或者：

[从 4720188 中选择“位置”，其中“输入”（5、6、7、8、9、10、11）和“收到日期”>=“2007 年 1 月 1 日”和“收到日期”<=“1/” 30/2007' AND ST_INTERSECTS('位置', CIRCLE(LATLNG(39.770668,-94.846031),1000))](http://www.geocodezip.com/v3_FusionTablesLayer_linktoA.html?lat=39.767040&lng=-94.846288&zoom=14&type=m&tableid=4720188&tablequery=SELECT%20%27Location%27%20FROM%204720188%20WHERE%20%27type%27%20IN%20%285%2C6%2C7%2C8%2C9%2C10%2C11%29%20AND%20%27DATE%20RECEIVED%27%20%3E%3D%20%271/1/2007%27%20AND%20%27DATE%20RECEIVED%27%20%3C%3D%20%271/30/2007%27%20AND%20ST_INTERSECTS%28%27Location%27%2C%20CIRCLE%28LATLNG%2839.770668%2C-94.846031%29%2C1000%29%29)

但即使我将我认为无效的部分放入查询字符串中，我仍然没有收到可怕的“瓷砖可能仍在加载”消息。尝试将您正在使用的完整查询字符串输出到页面上的调试 div，然后将其粘贴到该测试地图上的框中。

# android - 如何每 X 秒更新一次自定义视图（通过调用 invalidate()）？（这是一个 BrickBreaker 游戏）

> ID：11704141
> 
> 赞同：1
> 
> 时间：2012-07-28T19:48:58.730
> 
> 标签：android

我正在尝试为 Android 编写 BrickBreaker 游戏，并且我希望能够每 X 秒更新我的 BrickBreakerView（包含球、桨等）。目前，UI 仅在用户触摸屏幕时更新。

在更新之间，我将更改桨、砖和球的数据，当调用 onDraw() 方法（UI 更新）时，我想用数据更新视图。

目前，我只有一个 paddle，当用户触摸屏幕并移动手指时，paddle 的位置会更新，并调用 invalidate()。这是我的代码：

```
 private Paddle paddle;
private int fingerAdjustor = 75;

public BrickBreakerView(Context context, AttributeSet attrs) {
    super(context, attrs);
    setBackgroundColor(Color.WHITE);
    setOnTouchListener(this);
    setOnClickListener(null);
    paddle = new Paddle(100, 675, 150,25);
    invalidate();
}
@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    if(event.getAction() == MotionEvent.ACTION_MOVE) {
        int x = (int) event.getX();
        paddle.setXPosition(x);
        invalidate();
    }
    return false;
}

@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);
    Paint paint = new Paint();
    paint.setColor(Color.BLUE);
    canvas.drawRect(paddle.getX()-fingerAdjustor, paddle.getY(), paddle.getX() + paddle.getPaddleWidth()-fingerAdjustor, paddle.getY() + paddle.getPaddleHeight(), paint);

} 
```

这会涉及使用某种计时器吗？如果你能给我一些例子或告诉我将如何实现它，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T02:46:31.673

在您的 onDraw 结束时，当您绘制完所有内容并且球和砖块的位置发生了变化时，再次调用 invalidate() 以更新新位置。

# javascript - 探究 jQuery 中 insertAfter 的效果

> ID：11704144
> 
> 赞同：0
> 
> 时间：2012-07-28T19:49:28.750
> 
> 标签：javascript, jquery, css

为了理解[.insertAfter](http://api.jquery.com/insertAfter/)的效果，我设计了一个 2 行 2 列的小表格测试。

```
 <table id="myTable" width="560" border="1" cellspacing="2" cellpadding="2">
        <tr>
          <td title="row 1*1" class="styletest">1*1</td>
          <td title="row 1*2" class="styletest">1*2</td>
        </tr>
        <tr>
          <td title="row 2*1" class="styletest">2*1</td>
          <td title="row 2*2" class="styletest">2*2</td>
        </tr>
     </table> 
```

jQuery代码是：

```
var $tooltip = $('<div id="tooltip"></div>');
$tooltip.insertAfter('#myTable').hide();//I want to know the code after inserting this element.

function showTooltip(cell) {
    $tooltip.show().text(cell.attr("title"));
}
$('.styletest').hover(function() {
    showTooltip($(this));
 }, function() {
    $tooltip.hide();
 }); 
```

测试包括悬停不同的单元格和显示工具提示。演示在[jsfiddle。](http://jsfiddle.net/zhshqzyc/twPZA/1/)

当我悬停不同的单元格时，我想知道源代码。例如，当我悬停第 1 行第 1 列时，快照喜欢： ![行1col1](../Images/224fde685833f422f3c42f117de21582.png) 当我悬停第 2 行第 2 列时，快照喜欢： ![行2col2](../Images/288f55a26928d8a7d7a45819c6cc735a.png)

问题：当鼠标悬停在第 1 行第 1 列和第 2 行第 2 列时；

1.  他们有相同的渲染源代码吗？（悬停时使用F12无法获取渲染代码）
2.  为什么工具提示显示在中间的相同位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:57:15.353

这是相同的元素，你只是改变它的内容和可见性。它不会移动，除了您使用 `text()`标记设置的内容之外，它也不会改变。

你不需要检查任何东西，源代码就在你的脚本中，你插入的就是你得到的，可以这么说！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:12:29.253

您可以检查仅适用`hover`于 firebug 的元素的样式：

检查具有悬停样式的元素，单击 DOM 节点，使其被选中并以蓝色突出显示。然后转到右侧的样式选项卡并单击小箭头，然后选择`:hover`现在 Firefox 将保持悬停样式，您可以在底部插入 div。

![在此处输入图像描述](../Images/fb0393a98c69d02ff0a918ea66634660.png)

在你的情况下，要么你有 CSS for 要么有`#tooltip`div 的样式以使文本居中。

# google-maps - 在圆圈标记内搜索

> ID：11704148
> 
> 赞同：0
> 
> 时间：2012-07-28T19:50:36.757
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我需要使用圆心的半径和位置作为参数来搜索圆内的标记。有人可以帮助我了解这次搜索的严重程度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:26:03.093

概念：

1.  制作要搜索的标记数组
2.  遍历标记数组，使用[几何库 computeDistanceBetween() 函数计算每个标记与中心点之间的距离](https://developers.google.com/maps/documentation/javascript/reference#spherical)
3.  将该距离与圆的半径进行比较，如果小于半径，则标记在圆内，否则在圆外。

[示例](http://www.geocodezip.com/v3_MW_example_map3_radiusSearch.html)（来自地理编码地址的中心点）

# objective-c - 如何知道表格视图中是否添加了一行

> ID：11704153
> 
> 赞同：2
> 
> 时间：2012-07-28T19:51:14.937
> 
> 标签：objective-c, delegates, nstableview

我有一个使用核心数据的项目，其中有一个数组控制器保存表视图的数据（使用核心数据创建）。
我需要将添加的任何行的第一列设置为可编辑（使用按钮触发插入）。
我试图在有方法的地方实现 NSTableViewDelegate：

```
- (void) tableView:(NSTableView *)tableView didAddRowView:(NSTableRowView *)rowView forRow: 
```

但问题是每次我添加一行时，这个方法不会被调用一次，而是每行调用一次，所以如果我有一个 10 行的表并插入一个新的，该方法会被调用 11 次。所以我真的不知道何时添加了新对象。
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-28T21:40:20.413

我认为您正在使用`- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath`执行插入。在此方法中，记下表格视图中对象的当前计数。而在 didAddRowView 方法中，仅查询 tableView 对象中的行数，如果总和比初始计数多 1，则您知道该行已添加。

老实说，尽管您知道当用户点击按钮以将行添加到表格视图时何时添加行，所以您应该假设已插入一行，而不是采用这种不优雅的方式. 我建议这样做是因为行插入几乎是即时的（除非您正在执行某种导致延迟的大型操作）。

# c# - 如何从gridview向数据库添加信息？

> ID：11704154
> 
> 赞同：2
> 
> 时间：2012-07-28T19:51:38.220
> 
> 标签：c#, database, gridview

我一直在尝试从 Windows 窗体（Gridview）向我的数据库添加新信息。这是我想出的方法（但它不起作用）：

```
private void agregarProducto(string id_producto, string id_proveedor, string id_categoria, string cantidad, string precio_actual, string codigo_barras)
{
    MySqlCommand cmd = new MySqlCommand();

    using (cmd = cn.CreateCommand())
    {
        cmd.CommandText = "INSERT INTO productos(id_producto, id_proveedor, id_categoria, cantidad, precio_actual, codigo_barras) VALUES (@id_producto, @id_proveedor, @id_categoria, @cantidad, @precio_actual, @codigo_barras)";
        cmd.CommandType = CommandType.Text;

        cmd.Parameters.AddWithValue("@id_producto", tbId_Prod);
        cmd.Parameters.AddWithValue("@id_categoria", tbId_categoria);
        cmd.Parameters.AddWithValue("@id_proveedor", tb_Id_proveedor);
        cmd.Parameters.AddWithValue("@cantidad", tbCantidad);
        cmd.Parameters.AddWithValue("@precio_actual", tbPrecioActual);
        cmd.Parameters.AddWithValue("@codigo_barras", tbCod_barras);

        cn.Open();
    }
} 
```

这就是所谓的事件：

```
private void btAgregarNuevo_Click(object sender, EventArgs e)
{
    agregarProducto(tbId_Prod.Text, tb_Id_proveedor.Text, tbId_categoria.Text, tbCantidad.Text, tbPrecioActual.Text, tbCod_barras.Text);
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:56:38.787

你还没有执行sql。打开连接后执行此操作

```
cmd.ExecuteNoneQuery(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T20:04:49.303

```
private void agregarProducto(string id_producto, string id_proveedor, string id_categoria, string cantidad, string precio_actual, string codigo_barras)
{
    MySqlCommand cmd = new MySqlCommand();

    using (cmd = cn.CreateCommand())
    {
        cmd.CommandText = "INSERT INTO productos(id_producto, id_proveedor, id_categoria, cantidad, precio_actual, codigo_barras) VALUES (@id_producto, @id_proveedor, @id_categoria, @cantidad, @precio_actual, @codigo_barras)";
        cmd.CommandType = CommandType.Text;

        cmd.Parameters.AddWithValue("@id_producto", tbId_Prod);
        cmd.Parameters.AddWithValue("@id_categoria", tbId_categoria);
        cmd.Parameters.AddWithValue("@id_proveedor", tb_Id_proveedor);
        cmd.Parameters.AddWithValue("@cantidad", tbCantidad);
        cmd.Parameters.AddWithValue("@precio_actual", tbPrecioActual);
        cmd.Parameters.AddWithValue("@codigo_barras", tbCod_barras);

        cn.Open();

        cmd.ExecuteNoneQuery();//This is the line you are missing

        cn.Close();
    }
} 
```

# asp.net - MapRoute 和母版页 (MVC3) - 请求不起作用

> ID：11704158
> 
> 赞同：2
> 
> 时间：2012-07-28T19:52:06.510
> 
> 标签：asp.net, vb.net, asp.net-mvc-3, maproute

下午好，

我有一个具有母版页的 Web 应用程序 (MVC3)。

我有以下链接 localhost/home/index?Id=10

在自己的主人中，当我发出请求（“id”）时，返回的值为 10。

实施路线时。让链接变成 localhost/home/index/10 在返回请求的母版页中（“id”）现在是空的。

```
routes.MapRoute("index", "home/index/{id}", New With {.controller = "Home", .action = "index"}, New With {.id = "\d+"}) 
```

我该如何解决这个请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:07:18.190

如果您正在使用路由，那么您需要请求与您的*路由令牌关联的**值*：

 *```
this.Request.RequestContext.RouteData.Values["id"] 
```*

# jsf - 数据表选择不起作用

> ID：11704163
> 
> 赞同：1
> 
> 时间：2012-07-28T19:53:02.267
> 
> 标签：jsf, jsf-2, primefaces

当我在我的 primefaces 数据表中选择一行时，行高亮显示，但未调用选择事件并且所选行数据不会发送到它。我还注意到我的 Eclipse 调试器似乎只是挂在 PrimeFaces 上，还有其他人注意到这一点吗？下面是我的.xhtml。

```
 <?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml"  
       xmlns:ui="http://java.sun.com/jsf/facelets" 
       xmlns:h="http://java.sun.com/jsf/html"
       xmlns:f="http://java.sun.com/jsf/core"
       xmlns:p="http://primefaces.org/ui" 
     >
<h:head>
    <h:outputStylesheet library="css" name="table-style.css"  />
</h:head>

<h:body>
<center>

<p:dataTable var="user" value="#{customer.getCustomerList()}"  
         selection="#{customer.selectedCustomer}" selectionMode="single"  
         rowSelectListener="#{custmoer.onUserSelect}" onRowSelectUpdate="userUpdateForm"
          onRowUnselectUpdate="userUpdateForm"
         paginator="true" rows="5" rowKey="#{user.customerID}" >

            <p:column>  
                <f:facet name="header">  
                    <h:outputText value="Id" />  
                </f:facet>  
                <h:outputText value="#{user.customerID}" />  
             </p:column>  

             <p:column > 

             <f:facet name="header">  

                <h:outputText value="Name" />  

             </f:facet>  

             <h:outputText value="#{user.name}" />  

             </p:column>  
            <p:column >  

             <f:facet name="header">  

                <h:outputText value="Address" />  

             </f:facet>  

             <h:outputText value="#{user.address}" />  

             </p:column>  

     </p:dataTable>  

    <p:inputText id="userUpdateForm" value="#{customer.selectedCustomer.name}" /> 
    </h:form>
    </center>
</h:body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:35:35.833

放入`<p:datatable>`一个`<h:form>`组件中。

可能这只是`<h:form>`您帖子中缺少的开始标签（包括`</h:form>`结束标签）。但是忘记将数据发布组件包装到 a`<h:form>`中是一个常见的错误，它会导致您描述的症状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T00:00:57.467

似乎问题是IE9。Firefox 的问题消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T22:03:58.417

你的 onXXX 属性绑定到不透明的字符串，当它们应该绑定到 javascript 片段（方法调用或执行某些代码的片段）时。我猜 javascript 正在引发异常，并且没有任何内容被发送到服务器，因为浏览器中的执行停止了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-18T15:46:29.607

如果数据表中存在另一个问题，例如在我的情况下，表是可编辑的，但我在添加它之后没有添加 editMode 属性，则可能会发生这种情况，选择也开始工作。

# javascript - 点击后背景淡入

> ID：11704164
> 
> 赞同：3
> 
> 时间：2012-07-28T19:53:08.123
> 
> 标签：javascript, jquery, css

我试图让这个背景在点击时淡入。我找到了一个很有帮助的教程，我最终创建了代码，因此它有两个图像，并且它们在单击时淡入淡出以显示图片。这是工作：[http ://www.mccraymusic.com/bgchangetest.html](http://www.mccraymusic.com/bgchangetest.html)

不过只有几个问题：

1.  如何在不随机选择图像的情况下完成这项工作？我希望它只是从纯黑色图像切换到带有鼓组的图像。（如果可能，交叉淡入淡出，但不是必需的）

2.  如何在页面上居中图像，使鼓的图像居中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:10:50.530

我猜这就是你所追求的：

```
$(function() {
    var images = ["black.jpg","bg.jpg"];
    $('<img>').attr({'src':'http://www.mccraymusic.com/assets/images/'+images[0],'id':'bg','alt':''}).appendTo('#bg-wrapper').parent().fadeIn(0);

    $('.entersite').click(function(e) {
        e.preventDefault();
        var image = images[1];
        $('#bg').parent().fadeOut(200, function() {
            $('#bg').attr('src', 'http://www.mccraymusic.com/assets/images/'+image); 
              $(this).fadeIn(1000);
        });
        $(this).fadeOut(1000, function() {
            $(this).remove();
        });
    });
});​ 
```

[**示范**](http://jsfiddle.net/GewXh/2/)

还补充说：

```
display: block;
margin-left: auto;
margin-right: auto; 
```

到您的`#bg`元素以使图像居中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:59:18.893

好吧，假设你使用 JQuery

你有 #backgroundid 和 #imageid
开始设置

```
$('#backgroundid').css('opacity',1);
$('#imageid').css('opacity',0); // setting opacity (transparency) to 0, invisible 
```

现在你有了#buttonid。
设置一个 jquery 事件，以便在单击它时淡出背景，并使用 JQuery 的动画淡入图像。

```
$('#buttonid').click(function() {
    $('#backgroundid').animate(function() {
        opacity : 0 // fade it to 0 opacity, invisible
    }, 1000); // animation will take 1000ms, 1second
    $('#imageid').animate(function() {
        opacity : 1 // fade it to full opacity, solid
    }, 1000);
}); 
```

**现在关于该图像居中。**
您可以让**css**管理它

```
body { /* Body or #imageid parent */
    text-align : center;
}
#imageid {
    margin: 0px auto;
} 
```

或者您可以坚持使用**JQuery**解决方案，使用绝对/固定定位。
首先，使用一些 css 来固定图像的位置

```
#imageid {
    position: absolute; // or fixed, if you want
} 
```

现在使用 JQuery 重新定位它

```
function positionImage() {
    var imagewidth = $('#imageid').width();
    var imageheight = $('#imageid').height();
    $('#imageid').css('left', ($(window).width() - imagewidth) / 2);
    $('#imageid').css('top', ($(window).height() - imageheight) / 2);
}
$(document).ready(positionImage); // bind the ready event to reposition
$(window).resize(positionImage); // on window resize, reposition image too 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T20:26:28.350

你最好使用任何可用的 jQuery 插件，因为它们会为多个浏览器优化和修复错误。

试试 lightBoxMe 插件 [http://buckwilson.me/lightboxme/](http://buckwilson.me/lightboxme/)

这是最简单的插件！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T19:58:36.813

如果您保留一个高度和宽度为 100% 且 bgcolor 为黑色的 div 元素。然后根据需要更改 div 的不透明度以获得淡入/淡出效果，这应该会产生相同的效果。我猜..

# php - 文件上传适用于 PHP4 但不适用于 PHP5

> ID：11704165
> 
> 赞同：1
> 
> 时间：2012-07-28T19:53:16.287
> 
> 标签：php, mysql, file-upload

我有一个在本地安装（PHP4/MySQL）中设计的应用程序，它运行良好。自从我将它移到实时安装（PHP5/MySQL）以来，我除了问题什么都没有！我修复了所有全局变量问题（让我学习 PDO，所以这不是一件坏事！）没有打开全局变量，所以我唯一的问题是文件上传。我尝试了 $_file 的 isset 测试，看起来变量从未设置过？有任何想法吗？

这是表单数据：

```
 <form enctype="multipart/form-data" method="post" action="script_add_product.php" >   

     <input class="cp_forms_upload" type="file" name="full_image" />

     <input class="cp_formsButton" type="submit" name="submit_button" value="Add Product" /></form> 
```

这是PHP：

```
 $full_image_url = $_FILES["full_image"]["name"];     

    if ((($_FILES["full_image"]["type"] == "image/gif")
    || ($_FILES["full_image"]["type"] == "image/jpeg")
    || ($_FILES["full_image"]["type"] == "image/pjpeg")
    || ($_FILES["full_image"]["type"] == "image/png"))
    && ($_FILES["full_image"]["size"] < 400000))
      {
     if ($_FILES["full_image"]["error"] > 0)
      {
       echo "Return Code: " . $_FILES["full_image"]["error"] . "<br />";
       }
     else
       {
      echo "Upload: " . $_FILES["full_image"]["name"] . "<br />";
      echo "Type: " . $_FILES["full_image"]["type"] . "<br />";
      echo "Size: " . ($_FILES["full_image"]["size"] / 1024) . " Kb<br />";
      echo "Temp file: " . $_FILES["full_image"]["tmp_name"] . "<br />"; 

      if (file_exists("../Uploads/" . $_FILES["full_image"]["name"]))
       {
         echo $_FILES["full_image"]["name"] . " already exists. ";
        } 
      else 
         {
         move_uploaded_file($_FILES["full_image"]["tmp_name"],
         "../Uploads/" . $_FILES["full_image"]["name"]);
         echo "Stored in: " . "../Uploads/" . $_FILES["full_image"]["name"];
     echo "<br /><br /><br />" . $full_image_url;
         }
       }

      }

      else
      {
     echo "Invalid file";
       } 
```

谢谢各位:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:59:53.387

您能否检查一下您的`php.ini`for if`file_uploads`是否设置为`On`.

```
; Whether to allow HTTP file uploads.
; http://ph .net/file-uplollow HTTP file uploads.
; http://php.net/file-uploads
file_uploads = On 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:36:47.523

见`php.ini`配置。

```
;;;;;;;;;;;;;;;;
; File Uploads ;
;;;;;;;;;;;;;;;;

; Whether to allow HTTP file uploads.
; http://php.net/file-uploads
file_uploads = On

; Temporary directory for HTTP uploaded files (will use system default if not
; specified).
; http://php.net/upload-tmp-dir
upload_tmp_dir = "...../tmp"

; Maximum allowed size for uploaded files.
; http://php.net/upload-max-filesize
upload_max_filesize = 128M 
```

它也可能有用`memory_limit`并`max_execution_time`在`php.ini`. 更多：[处理文件上传 -> 常见陷阱](http://php.net/manual/en/features.file-upload.common-pitfalls.php)

确保该文件夹`"../Uploads/"`存在并且有权在 apache/nginx 工作（`www_data`或类似）下为用户写入

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-28T23:01:11.883

这可能是问题吗？本节中的附加 '(' 括号：

```
if (($_FILES["full_image"]["type"] == "image/gif")
    || ($_FILES["full_image"]["type"] == "image/jpeg")
    || ($_FILES["full_image"]["type"] == "image/pjpeg")
    || ($_FILES["full_image"]["type"] == "image/png"))
    && ($_FILES["full_image"]["size"] < 400000)) 
```

# javascript - 用户登录时重新加载

> ID：11704171
> 
> 赞同：-1
> 
> 时间：2012-07-28T19:53:33.730
> 
> 标签：javascript, facebook-graph-api

当 facebook 用户登录我的应用程序时，我需要重新加载页面

说如果我使用

```
window.location.reload() 
```

页面无限期重新加载..用户登录后我只需要重新加载一次页面。

（附加信息：我使用 Facebook Javascript SDK 进行身份验证，使用 PHP 进行 MySql 查询）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:13:11.540

```
FB.api('/me', function(response) {
  if( response.name){
window.location.reload();

}
}); 
```

它就像文档一样直接[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

# jquery - caroufredsel 重新加载页面

> ID：11704173
> 
> 赞同：0
> 
> 时间：2012-07-28T19:54:02.720
> 
> 标签：jquery, caroufredsel

在我对 CSS 进行一些修改之前！一切都很好，但现在“carouFredSel”函数不断重新加载页面（奇怪的行为）演示页面的 url 是[http://demos.illucent.info/butts/index.html](http://demos.illucent.info/butts/index.html) 我认为这是在脚本底部的某个地方但是我不知道到底是哪一个

```
 <script type="text/javascript">
           $(document).ready(function() {

            $('#carousel1').carouFredSel({
             align:"left",
             width: '100%',
             prev: '#prev1',
             next: '#next1',
             items  : {
             visible  : 13,
             width  : "100%"
            },
             scroll : {
              items   : 2,
              duration  : 1500,
              pauseDuration : 3500
             }

            });
            $('#carousel2').carouFredSel({
             align:"left",
             width: '100%',
             prev: '#prev2',
             next: '#next2',
             items  : {
             visible  : 13,
             width  : "100%"
            },
             scroll : {
              items   : 2,
              duration  : 1500,
              pauseDuration : 3500
             }
            });
            $('#carousel3').carouFredSel({
             align:"left",
             width: '100%',
             prev: '#prev3',
             next: '#next3',
             items  : {
             visible  : 13,
             width  : "100%"
            },
             scroll : {
              items   : 2,
              duration  : 1500,
              pauseDuration : 3500
             }
            });
           //margins
           $(".carousel img").css({"margin":"0px 0px 0px 5px"});
           var items = $('.list_switch li a').each(function () {
           $(this).click(function () {
             //remove previous class and add it to clicked tab
             items.removeClass('current');
             $(this).addClass('current');
            });
             });
             //hide all content divs and show current one
             $('.wrapper').hide().eq(items.index($(this))).show('fast');

             // resume the slide on the selected slider
             $('.carousel').eq(items.index($(this))).trigger("play");
             $('.carousel').eq(items.index($(this))).trigger("slideTo");

           // select the first tab on page load       
           items[0].click();

           });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:52:49.533

我不认为这是因为 CSS 发生了变化。

在 $(document).ready 函数中，您正在调用集合中名为“items”的第一个项目的单击事件。

```
items[0].click(); 
```

您的项目集合中的第一个元素是这个超链接：

```
<a href="index.html"> 
```

重定向到同一页面。当页面重新加载时， $(document).ready 显然会再次运行，做同样的事情。

尝试注释掉

```
 items[0].click(); 
```

你应该会发现它不再发生。

# javascript - 带有扩展拉丁字母的正则表达式 (ä ö ü è ß)

> ID：11704182
> 
> 赞同：27
> 
> 时间：2012-07-28T19:54:44.327
> 
> 标签：javascript, node.js, regex, utf-8

我想在 Node.js 中做一些基本的字符串测试。假设我有一个用户输入姓名的表单，我想检查它是垃圾还是真实姓名。

令人高兴的是（或为我的支票感到遗憾）我得到了来自世界各地的用户，这意味着他们的名字包含非英语字符，例如`ä ö ü ß é`. 我曾经使用过，`/[A-Za-z -]{2,}/`但这与`"Jan Buschtöns"`.

我是否必须手动将所有可能的非英语但拉丁字符添加到我的 RegEx 才能工作？我不想要像`/[A-Za-z -äöüÄÖÜßéÉèÈêÊ...]{2,}/`.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-28T20:01:22.220

检查[http://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)和[http://xregexp.com/plugins/](http://xregexp.com/plugins/)

`\p{L}`如果要包含 unicode，则需要使用匹配任何字母字符。

说到 unicode，替代的`\w`就是`[\p{L}\p{N}_]`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-08-30T14:41:15.230

**更新**：*从 ES2018 开始，JavaScript 支持 Unicode 属性转义，例如`\p{L}`，它匹配 Unicode 认为是字母的任何内容。所有现代浏览器都支持此功能，因此只要您不关心古代浏览器，这可能就是要走的路。*

**ES2018 之前浏览器的旧答案**：

答案完全取决于您想要做什么。

如您所见，`[A-Za-z]`仅匹配没有变音符号的拉丁字母。

如果您只关心德语变音符号和*ß*连字，那么您可以将该部分替换为`[A-Za-zÄÖÜäöüß]`，例如：

```
/[A-Za-zÄÖÜäöüß -]{2,}/ 
```

但这可能不是您想要做的。您可能希望将拉丁字母与任何变音符号匹配，而不仅仅是德语中使用的那些。或者，也许您想匹配任何字母表中的任何字母，而不仅仅是拉丁语。

其他正则表达式方言有字符类来帮助你解决这样的问题，但不幸的是 JavaScript 的正则表达式方言有很少的字符类，它们在这里都没有帮助你。

（如果您不知道，“字符类”是匹配作为预定义字符组成员的任何字符的表达式。例如，`\w`是匹配任何 ASCII 字母、数字或下划线，并且`.`是匹配任何字符的字符类。）

这意味着您必须列出与您要匹配的字符相对应的每个 UTF-16 代码单元范围。

一个快速而肮脏的解决方案可能是说`[a-zA-Z\u0080-\uFFFF]`，或完整地说：

```
/[A-Za-z\\u0080-\\uFFFF -]{2,}/ 
```

这将匹配 ASCII 范围内的任何字母，但也将匹配任何超出 ASCII 范围的字符。这包括任何脚本中所有可能带有或不带有变音符号的字母字符。但是，它也包含很多不是字母的字符。不包括 ASCII 范围内的非字母，但包括 ASCII 范围外的非字母。

以上对于您的目的可能已经足够了，但如果不是，那么您将必须弄清楚您需要哪些字符范围并明确指定这些范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-07-15T21:39:27.997

如果您*只*想要拉丁字母，包括那些不太常见的变音符号`åēį`，但不包括例如中文、梵文和西里尔文字符，您可以`\p{Script=Latin}`与`u`标志一起使用。此功能称为*Unicode 属性转义*，并在 ES2018 中引入。

例如，`/\p{Script=Latin}+/u`将匹配仅包含拉丁字符的单词。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-23T11:45:16.813

这是一个 JavaScript/node.js 问题，但我几乎看不到任何实际的 JavaScript 代码来说明如何做到这一点。它有点棘手，因为它需要 Unicode "u" 标志：

```
// Result: '_ {_} [_]'
'ulike {adj} [ubøyelig]'.replace(/\p{L}+/gu, '_') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-05T21:36:11.643

我知道这个问题很老，但我正在开发一些 NPL 软件，我需要匹配大多数类似拉丁语的所有单词，我用下面的代码做到了这一点。

```
let myString = "Whatever you want here, ex. Bân-lâm-gú or bokmål or Português or Română or Slovenčina or Slovenščina";
let wordchar = "-A-Za-zᴀⱯɐᵄⱭɑᵅꬰꭤⱰɒᶛʙᴃᴯꞖꞗꞴꞵᴄↃↄꞳꭓꭕꭔÐðᶞꟇꟈꝹꝺᴅᴆꝱẟᴇꬲꬳꬴƎᴲǝⱻƏəₔᵊƐɛᵋEɘꞫɜᶟɞʚᴈᵌɤꝻꝼꜰℲⅎꟻꬵꝽᵹꞬɡᶢꬶɢᵷ⅁ꝾꝿƔɣˠƢƣʜǶƕⱵⱶꟵꟶꜦꜧꭜıꞮɪᶦꟾꟷᴉᵎᵻᶧƖɩᶥᴊKᴋꞰʞʟᶫꝆꝇᴌꬸꬹꬷꭝꝲꞀꞁ⅃ᴍꬺꟽꟿꝳɴᶰᴎᴻꬻꝴŊŋᵑꬼᴏᴑꬽꬾƆɔᵓᴐꬿᴒᴖᵔᴗᵕꞶꞷɷȢȣᴕᴽᴘꟼɸᶲⱷĸꞯꞂꞃƦʀꝚꝛᴙꭆɹʴᴚʁʶꭉꭇꭈꭊꭋꭌꭅꝵꝶꝜꝝſꟉꟊꞄꞅƧƨꜱƩʃᶴꭍƪʅꞆꞇᴛꝷꞱʇᴜᶸᴝᵙᴞꭒꭟꭎꭏꞍɥᶣƜɯꟺᵚᴟƱʊᶷᴠỼỽɅʌᶺᴡꟂꟃʍꭩꭖꭗꭘꭙꭙ̆ʏꭚʎ⅄ƍᴢꝢꝣƷʒᶾᴣƸƹȜȝÞþǷƿꝨꝩꝪꝫꝬꝭꝮꝯꝰꝸꜪꜫꜬꜭꜮꜯƼƽƄƅɁɂʔꜢꜣꞋꞌꞏʕˤᴤᴥᵜꜤꜥʖǀǁǃǂʗʘʬʭꞚꞛꞜꞝꞞꞟẚÀàÁáÂâẦầẤấẪẫẨẩÃãÃ̀ã̀Ã́ã́Ã̂ã̂Ã̌ã̌Ã̍ã̍Ã̎ã̎ĀāĀ̀ā̀Ā́ā́Ā̂ā̂Ā̃ā̃Ā̃́ā̃́Ā̄ā̄Ā̆ā̆Ā̆́ā̆́Ā̈ā̈Ā̊ā̊Ā̌ā̌ĂăẰằẮắẴẵẲẳȦȧȦ́ȧ́ǠǡÄäÄ́ä́Ä̀ä̀Ä̂ä̂Ä̃ä̃ǞǟǞ̆ǟ̆Ä̆ä̆Ä̌ä̌ẢảÅåÅǺǻÅ̂å̂Å̃å̃Å̄å̄Å̄̆å̄̆Å̆å̆A̋a̋ǍǎA̍a̍A̎a̎ȀȁȂȃA̐a̐A̓a̓A̧a̧À̧à̧Á̧á̧Â̧â̧Ǎ̧ǎ̧A̭a̭A̰a̰À̰à̰Á̰á̰Ā̰ā̰Ä̰ä̰Ä̰́ä̰́ĄąĄ̀ą̀Ą́ą́Ą̂ą̂Ą̃ą̃Ą̄ą̄Ą̄̀ą̄̀Ą̄́ą̄́Ą̄̂ą̄̂Ą̄̌ą̄̌Ą̇ą̇Ą̈ą̈Ą̈̀ą̈̀Ą̈́ą̈́Ą̈̂ą̈̂Ą̈̌ą̈̌Ą̈̄ą̈̄Ą̊ą̊Ą̌ą̌Ą̋ą̋Ą̱ą̱Ą̱̀ą̱̀Ą̱́ą̱́A᷎a᷎A̱a̱À̱à̱Á̱á̱Â̱â̱Ã̱ã̱Ā̱ā̱Ā̱̀ā̱̀Ā̱́ā̱́Ā̱̂ā̱̂Ä̱ä̱Ä̱̀ä̱̀Ä̱́ä̱́Ä̱̂ä̱̂Ä̱̌ä̱̌Å̱å̱Ǎ̱ǎ̱A̱̥a̱̥ẠạẠ́ạ́Ạ̀ạ̀ẬậẠ̃ạ̃Ạ̄ạ̄ẶặẠ̈ạ̈Ạ̈̀ạ̈̀Ạ̈́ạ̈́Ạ̈̂ạ̈̂Ạ̈̌ạ̈̌Ạ̌ạ̌Ạ̍ạ̍A̤a̤À̤à̤Á̤á̤Â̤â̤Ä̤ä̤ḀḁḀ̂ḁ̂Ḁ̈ḁ̈A̯a̯A̩a̩À̩à̩Á̩á̩Â̩â̩Ã̩ã̩Ā̩ā̩Ǎ̩ǎ̩A̩̍a̩̍A̩̓a̩̓A͔a͔Ā͔ā͔ȺⱥȺ̀ⱥ̀Ⱥ́ⱥ́ᶏꞺꞻⱭ̀ɑ̀Ɑ́ɑ́Ɑ̂ɑ̂Ɑ̃ɑ̃Ɑ̄ɑ̄Ɑ̆ɑ̆Ɑ̇ɑ̇Ɑ̈ɑ̈Ɑ̊ɑ̊Ɑ̌ɑ̌ᶐB̀b̀B́b́B̂b̂B̃b̃B̄b̄ḂḃB̈b̈B̒b̒B̕b̕ḆḇḆ̂ḇ̂ḄḅB̤b̤B̥b̥B̬b̬ɃƀᵬᶀƁɓƂƃʙ̇ʙ̣C̀c̀ĆćĈĉC̃c̃C̄c̄C̄́c̄́C̆c̆ĊċC̈c̈ČčČ́č́Č͑č͑Č̓č̓Č̕č̕Č̔č̔C̋c̋C̓c̓C̕c̕C̔c̔C͑c͑ÇçḈḉÇ̆ç̆Ç̇ç̇Ç̌ç̌ꞔꟄC̦c̦C̭c̭C̱c̱C̮c̮C̣c̣Ć̣ć̣Č̣č̣C̥c̥C̬c̬C̯c̯C̨c̨ȻȼȻ̓ȼ̓ꞒꞓƇƈɕᶝꜾꜿD́d́D̂d̂D̃d̃D̄d̄ḊḋD̊d̊ĎďD̑d̑D̓d̓D̕d̕ḐḑD̦d̦ḒḓḎḏD̮d̮ḌḍḌ́ḍ́Ḍ̄ḍ̄D̤d̤D̥d̥D̬d̬D̪d̪ĐđĐ̣đ̣Đ̱đ̱ᵭᶁƉɖƊɗᶑƋƌȡꝹ́ꝺ́Ꝺ̇ꝺ̇ᴅ̇ᴅ̣Ð́ð́Ð̣ð̣ÈèÉéÊêỀềẾếỄễÊ̄ê̄Ê̆ê̆Ê̌ê̌ỂểẼẽẼ̀ẽ̀Ẽ́ẽ́Ẽ̂ẽ̂Ẽ̌ẽ̌Ẽ̍ẽ̍Ẽ̎ẽ̎ĒēḔḕḖḗĒ̂ē̂Ē̃ē̃Ē̃́ē̃́Ē̄ē̄Ē̆ē̆Ē̆́ē̆́Ē̌ē̌Ē̑ē̑ĔĕĔ̀ĕ̀Ĕ́ĕ́Ĕ̄ĕ̄ĖėĖ́ė́Ė̃ė̃Ė̄ė̄ËëË̀ë̀Ë́ë́Ë̂ë̂Ë̃ë̃Ë̄ë̄Ë̌ë̌ẺẻE̊e̊E̊̄e̊̄E̋e̋ĚěĚ́ě́Ě̃ě̃Ě̋ě̋Ě̑ě̑E̍e̍E̎e̎ȄȅȆȇE̓e̓E᷎e᷎ȨȩȨ̀ȩ̀Ȩ́ȩ́Ȩ̂ȩ̂ḜḝȨ̌ȩ̌Ẽ̦ẽ̦ĘęĘ̀ę̀Ę́ę́Ę̂ę̂Ę̃ę̃Ę̃́ę̃́Ę̄ę̄Ę̄̀ę̄̀Ę̄́ę̄́Ę̄̂ę̄̂Ę̄̃ę̄̃Ę̄̌ę̄̌Ę̆ę̆Ę̇ę̇Ę̇́ę̇́Ę̈ę̈Ę̈̀ę̈̀Ę̈́ę̈́Ę̈̂ę̈̂Ę̈̌ę̈̌Ę̈̄ę̈̄Ę̋ę̋Ę̌ę̌Ę̑ę̑Ę̱ę̱Ę̱̀ę̱̀Ę̱́ę̱́Ę̣ę̣Ę᷎ę᷎ḘḙḚḛE̱e̱È̱è̱É̱é̱Ê̱ê̱Ẽ̱ẽ̱Ē̱ē̱Ḕ̱ḕ̱Ḗ̱ḗ̱Ē̱̂ē̱̂Ë̱ë̱Ë̱̀ë̱̀Ë̱́ë̱́Ë̱̂ë̱̂Ë̱̌ë̱̌Ě̱ě̱E̮e̮Ē̮ē̮ẸẹẸ̀ẹ̀Ẹ́ẹ́ỆệẸ̃ẹ̃Ẹ̄ẹ̄Ẹ̄̀ẹ̄̀Ẹ̄́ẹ̄́Ẹ̄̃ẹ̄̃Ẹ̆ẹ̆Ẹ̆̀ẹ̆̀Ẹ̆́ẹ̆́Ẹ̈ẹ̈Ẹ̈̀ẹ̈̀Ẹ̈́ẹ̈́Ẹ̈̂ẹ̈̂Ẹ̈̌ẹ̈̌Ẹ̍ẹ̍Ẹ̌ẹ̌Ẹ̑ẹ̑E̤e̤È̤è̤É̤é̤Ê̤ê̤Ë̤ë̤E̥e̥E̯e̯E̩e̩È̩è̩É̩é̩Ê̩ê̩Ẽ̩ẽ̩Ē̩ē̩Ě̩ě̩E̩̍e̩̍E̩̓e̩̓È͕è͕Ê͕ê͕Ẽ͕ẽ͕Ē͕ē͕Ḕ͕ḕ͕E̜e̜E̹e̹È̹è̹É̹é̹Ê̹ê̹Ẽ̹ẽ̹Ē̹ē̹Ḕ̹ḕ̹ɆɇᶒⱸᶕᶓɚᶔɝƐ̀ɛ̀Ɛ́ɛ́Ɛ̂ɛ̂Ɛ̃ɛ̃Ɛ̃̀ɛ̃̀Ɛ̃́ɛ̃́Ɛ̃̂ɛ̃̂Ɛ̃̌ɛ̃̌Ɛ̃̍ɛ̃̍Ɛ̃̎ɛ̃̎Ɛ̄ɛ̄Ɛ̆ɛ̆Ɛ̇ɛ̇Ɛ̈ɛ̈Ɛ̈̀ɛ̈̀Ɛ̈́ɛ̈́Ɛ̈̂ɛ̈̂Ɛ̈̌ɛ̈̌Ɛ̌ɛ̌Ɛ̍ɛ̍Ɛ̎ɛ̎Ɛ̣ɛ̣Ɛ̣̀ɛ̣̀Ɛ̣́ɛ̣́Ɛ̣̂ɛ̣̂Ɛ̣̃ɛ̣̃Ɛ̣̈ɛ̣̈Ɛ̣̈̀ɛ̣̈̀Ɛ̣̈́ɛ̣̈́Ɛ̣̈̂ɛ̣̈̂Ɛ̣̈̌ɛ̣̈̌Ɛ̣̌ɛ̣̌Ɛ̤ɛ̤Ɛ̤̀ɛ̤̀Ɛ̤́ɛ̤́Ɛ̤̂ɛ̤̂Ɛ̤̈ɛ̤̈Ɛ̧ɛ̧Ɛ̧̀ɛ̧̀Ɛ̧́ɛ̧́Ɛ̧̂ɛ̧̂Ɛ̧̌ɛ̧̌Ɛ̨ɛ̨Ɛ̨̀ɛ̨̀Ɛ̨́ɛ̨́Ɛ̨̂ɛ̨̂Ɛ̨̄ɛ̨̄Ɛ̨̆ɛ̨̆Ɛ̨̈ɛ̨̈Ɛ̨̌ɛ̨̌Ɛ̰ɛ̰Ɛ̰̀ɛ̰̀Ɛ̰́ɛ̰́Ɛ̰̄ɛ̰̄Ɛ̱ɛ̱Ɛ̱̀ɛ̱̀Ɛ̱́ɛ̱́Ɛ̱̂ɛ̱̂Ɛ̱̃ɛ̱̃Ɛ̱̈ɛ̱̈Ɛ̱̈̀ɛ̱̈̀Ɛ̱̈́ɛ̱̈́Ɛ̱̌ɛ̱̌Ə̀ə̀Ə́ə́Ə̂ə̂Ə̄ə̄Ə̌ə̌Ə̏ə̏F̀f̀F́f́F̃f̃F̄f̄ḞḟF̓f̓F̧f̧ᵮᶂƑƒꞘꞙF̱f̱F̣f̣ꜰ̇Ꝼ́ꝼ́Ꝼ̇ꝼ̇Ꝼ̣ꝼ̣G̀g̀ǴǵǴ̄ǵ̄ĜĝG̃g̃G̃́g̃́ḠḡḠ́ḡ́ĞğĠġG̈g̈G̈̇g̈̇G̊g̊G̋g̋ǦǧǦ̈ǧ̈G̑g̑G̒g̒G̓g̓G̕g̕G̔g̔ĢģG̦g̦G̱g̱G̱̓g̱̓G̮g̮G̣g̣G̤g̤G̥g̥G̫g̫ꞠꞡǤǥᶃƓɠɢ̇ɢ̣ʛƔ̓ɣ̓H̀h̀H́h́ĤĥH̄h̄ḢḣḦḧȞȟH̐h̐H̓h̓H̕h̕ḨḩH̨h̨H̭h̭H̱ẖḪḫḤḥḤ̣ḥ̣H̤h̤H̥h̥H̬h̬H̯h̯ĦħꟸĦ̥ħ̥ꞪɦʱⱧⱨꞕh̢ʜ̇ɧÌìÍíÎîÎ́î́ĨĩĨ́ĩ́Ĩ̀ĩ̀Ĩ̂ĩ̂Ĩ̌ĩ̌Ĩ̍ĩ̍Ĩ̎ĩ̎ĪīĪ́ī́Ī̀ī̀Ī̂ī̂Ī̌ī̌Ī̃ī̃Ī̄ī̄Ī̆ī̆Ī̆́ī̆́ĬĭĬ̀ĭ̀Ĭ́ĭ́İiIıİ́i̇́ÏïÏ̀ï̀ḮḯÏ̂ï̂Ï̃ï̃Ï̄ï̄Ï̌ï̌Ï̑ï̑I̊i̊I̋i̋ǏǐỈỉI̍i̍I̎i̎ȈȉI̐i̐ȊȋI᷎i᷎ĮįĮ̀į̀Į́į́į̇́Į̂į̂Į̃į̃į̇̃Į̄į̄Į̄̀į̄̀Į̄́į̄́Į̄̂į̄̂Į̄̆į̄̆Į̄̌į̄̌Į̈į̈Į̈̀į̈̀Į̈́į̈́Į̈̂į̈̂Į̈̌į̈̌Į̈̄į̈̄Į̋į̋Į̌į̌Į̱į̱Į̱́į̱́Į̱̀į̱̀I̓i̓I̧i̧Í̧í̧Ì̧ì̧Î̧î̧I̭i̭Ī̭ī̭ḬḭḬ̀ḭ̀Ḭ́ḭ́Ḭ̄ḭ̄Ḭ̈ḭ̈Ḭ̈́ḭ̈́I̱i̱Ì̱ì̱Í̱í̱Î̱î̱Ǐ̱ǐ̱Ĩ̱ĩ̱Ï̱ï̱Ḯ̱ḯ̱Ï̱̀ï̱̀Ï̱̂ï̱̂Ï̱̌ï̱̌Ī̱ī̱Ī̱́ī̱́Ī̱̀ī̱̀Ī̱̂ī̱̂I̮i̮ỊịỊ̀ị̀Ị́ị́Ị̂ị̂Ị̃ị̃Ị̄ị̄Ị̈ị̈Ị̈̀ị̈̀Ị̈́ị̈́Ị̈̂ị̈̂Ị̈̌ị̈̌Ị̌ị̌Ị̍ị̍I̤i̤Ì̤ì̤Í̤í̤Î̤î̤Ï̤ï̤I̥i̥Í̥í̥Ï̥ï̥I̯i̯Í̯í̯Ĩ̯ĩ̯I̩i̩I͔i͔Ī͔ī͔ƗɨᶤƗ̀ɨ̀Ɨ́ɨ́Ɨ̂ɨ̂Ɨ̌ɨ̌Ɨ̃ɨ̃Ɨ̄ɨ̄Ɨ̈ɨ̈Ɨ̧ɨ̧Ɨ̧̀ɨ̧̀Ɨ̧̂ɨ̧̂Ɨ̧̌ɨ̧̌Ɨ̱ɨ̱Ɨ̱̀ɨ̱̀Ɨ̱́ɨ̱́Ɨ̱̂ɨ̱̂Ɨ̱̈ɨ̱̈Ɨ̱̌ɨ̱̌Ɨ̯ɨ̯ᶖꞼꞽı̣ı̥Ɩ̀ɩ̀Ɩ́ɩ́Ɩ̂ɩ̂Ɩ̃ɩ̃Ɩ̈ɩ̈Ɩ̌ɩ̌ᵼJ́j́ĴĵJ̃j̃j̇̃J̄j̄J̇J̈j̈J̈̇j̈̇J̊j̊J̋j̋J̌ǰJ̌́ǰ́J̑j̑J̓j̓J᷎j᷎J̱j̱J̣j̣J̣̌ǰ̣J̥j̥ɈɉɈ̱ɉ̱ꞲʝᶨȷɟᶡʄK̀k̀ḰḱK̂k̂K̃k̃K̄k̄K̆k̆K̇k̇K̈k̈ǨǩK̑k̑K̓k̓K̕k̕K̔k̔K͑k͑ĶķK̦k̦K̨k̨ḴḵḴ̓ḵ̓ḲḳK̮k̮K̥k̥K̬k̬K̫k̫ᶄƘƙⱩⱪꝀꝁꝂꝃꝄꝅꞢꞣᴋ̇ĿŀL̀l̀ĹĺL̂l̂L̃l̃L̄l̄L̇l̇L̈l̈L̋l̋ĽľL̐l̐L̑l̑L̓l̓L̕l̕ĻļĻ̂ļ̂Ļ̃ļ̃L̦l̦ḼḽḺḻḺ̓ḻ̓L̮l̮ḶḷḶ̀ḷ̀Ḷ́ḷ́ḸḹḸ́ḹ́Ḹ̆ḹ̆Ḷ̓ḷ̓Ḷ̕ḷ̕Ḷ̣ḷ̣L̤l̤L̤̄l̤̄L̥l̥L̥̀l̥̀Ĺ̥ĺ̥L̥̄l̥̄L̥̄́l̥̄́L̥̄̆l̥̄̆L̥̕l̥̕L̩l̩L̩̀l̩̀L̩̓l̩̓L̯l̯ŁłŁ̇ł̇Ł̓ł̓Ł̣ł̣Ł̱ł̱ꝈꝉȽƚⱠⱡⱢɫꭞꞭɬᶅᶪɭᶩꞎȴʟ̇ʟ̣ƛƛ̓λ̴λ̴̓M̀m̀ḾḿM̂m̂M̃m̃M̄m̄M̆m̆ṀṁṀ̇ṁ̇M̈m̈M̋m̋M̍m̍M̌m̌M̐m̐M̑m̑M̓m̓M̕̕m̕M͑m͑ᵯM̧m̧M̨m̨M̦m̦M̱m̱Ḿ̱ḿ̱M̮m̮ṂṃṂ́ṃ́Ṃ̄ṃ̄Ṃ̓ṃ̓M̥m̥Ḿ̥ḿ̥M̥̄m̥̄M̥̄́m̥̄́M̥̄̆m̥̄̆M̬m̬M̩m̩M̩̀m̩̀M̩̓m̩̓M̯m̯ᶆm̢Ɱɱᶬᴍ̇ᴍ̣ǸǹŃńN̂n̂ÑñÑ̈ñ̈N̄n̄N̆n̆ṄṅṄ̇ṅ̇N̈n̈N̋n̋ŇňN̐n̐N̑n̑N̍n̍N̓n̓N̕n̕ꞤꞥᵰŅņŅ̂ņ̂Ņ̃ņ̃N̦n̦N̨n̨ṊṋN̰n̰ṈṉṈ́ṉ́N̮n̮ṆṇṆ́ṇ́Ṇ̄ṇ̄Ṇ̄́ṇ̄́Ṇ̓ṇ̓N̤n̤N̥n̥Ǹ̥ǹ̥Ń̥ń̥Ñ̥ñ̥Ñ̥́ñ̥́N̥̄n̥̄N̥̄́n̥̄́N̥̄̆n̥̄̆N̥̄̑n̥̄̑Ṅ̥ṅ̥N̥̑n̥̑N̥̑́n̥̑́N̥̑̄n̥̑̄N̯n̯N̩n̩Ǹ̩ǹ̩N̩̓n̩̓N̲n̲ƝɲᶮȠƞꞐꞑŊ̀ŋ̀Ŋ́ŋ́Ŋ̂ŋ̂Ŋ̄ŋ̄Ŋ̈ŋ̈Ŋ̈̇ŋ̈̇Ŋ̊ŋ̊Ŋ̑ŋ̑Ŋ̨ŋ̨Ŋ̣ŋ̣Ŋ̥ŋ̥Ŋ̥́ŋ̥́Ŋ̥̄ŋ̥̄Ŋ̥̄́ŋ̥̄́ᶇɳᶯȵɴ̇ɴ̣ÒòÓóÔôỐốỒồỖỗÔ̆ô̆ỔổÕõÕ̍õ̍Õ̎õ̎Õ̀õ̀ṌṍÕ̂õ̂Õ̌õ̌ṎṏȬȭŌōṒṓṐṑŌ̂ō̂Ō̃ō̃Ō̃́ō̃́Ō̄ō̄Ō̆ō̆Ō̆́ō̆́Ō̈ō̈Ō̌ō̌ŎŏŎ̀ŏ̀Ŏ́ŏ́Ŏ̈ŏ̈ȮȯȮ́ȯ́ȰȱO͘o͘Ó͘ó͘Ò͘ò͘Ō͘ō͘O̍͘o̍͘ÖöÖ́ö́Ö̀ö̀Ö̂ö̂Ö̌ö̌Ö̃ö̃ȪȫȪ̆ȫ̆Ö̆ö̆ỎỏO̊o̊ŐőǑǒO̍o̍O̎o̎ȌȍO̐o̐ȎȏO̓o̓ØøØ̀ø̀ǾǿØ̂ø̂Ø̃ø̃Ø̄ø̄Ø̄́ø̄́Ø̄̆ø̄̆Ø̆ø̆Ø̇ø̇Ø̇́ø̇́Ø̈ø̈Ø̋ø̋Ø̌ø̌Ø᷎ø᷎Ø̨ø̨Ǿ̨ǿ̨Ø̨̄ø̨̄Ø̣ø̣Ø̥ø̥Ø̰ø̰Ǿ̰ǿ̰Ø¸ø¸Ǿ¸ǿ¸ƟɵᶱƠơỚớỜờỠỡƠ̆ơ̆ỞởO᷎o᷎Ó᷎ó᷎O̧o̧Ó̧ó̧Ò̧ò̧Ô̧ô̧Ǒ̧ǒ̧ǪǫǪ̀ǫ̀Ǫ́ǫ́Ǫ̂ǫ̂Ǫ̃ǫ̃ǬǭǬ̀ǭ̀Ǭ́ǭ́Ǭ̂ǭ̂Ǭ̃ǭ̃Ǭ̆ǭ̆Ǭ̌ǭ̌Ǫ̆ǫ̆Ǫ̆́ǫ̆́Ǫ̇ǫ̇Ǫ̇́ǫ̇́Ǫ̈ǫ̈Ǫ̈̀ǫ̈̀Ǫ̈́ǫ̈́Ǫ̈̂ǫ̈̂Ǫ̈̃ǫ̈̃Ǫ̈̄ǫ̈̄Ǫ̈̌ǫ̈̌Ǫ̋ǫ̋Ǫ̌ǫ̌Ǫ̑ǫ̑Ǫ̣ǫ̣Ǫ̱ǫ̱Ǫ̱́ǫ̱́Ǫ̱̀ǫ̱̀Ǫ᷎ǫ᷎O̭o̭O̰o̰Ó̰ó̰O̱o̱Ò̱ò̱Ó̱ó̱Ô̱ô̱Ǒ̱ǒ̱Õ̱õ̱Ō̱ō̱Ṓ̱ṓ̱Ṑ̱ṑ̱Ō̱̂ō̱̂Ö̱ö̱Ö̱́ö̱́Ö̱̀ö̱̀Ö̱̂ö̱̂Ö̱̌ö̱̌O̮o̮ỌọỌ̀ọ̀Ọ́ọ́ỘộỌ̃ọ̃Ọ̄ọ̄Ọ̄̀ọ̄̀Ọ̄́ọ̄́Ọ̄̃ọ̄̃Ọ̄̆ọ̄̆Ọ̆ọ̆Ọ̈ọ̈Ọ̈̀ọ̈̀Ọ̈́ọ̈́Ọ̈̂ọ̈̂Ọ̈̄ọ̈̄Ọ̈̌ọ̈̌Ọ̌ọ̌Ọ̑ọ̑ỢợỌọO̤o̤Ò̤ò̤Ó̤ó̤Ô̤ô̤Ö̤ö̤O̥o̥Ō̥ō̥O̬o̬O̯o̯O̩o̩Õ͔õ͔Ō͔ō͔O̜o̜O̹o̹Ó̹ó̹O̲o̲ᴓᶗꝌꝍⱺꝊꝋƆ́ɔ́Ɔ̀ɔ̀Ɔ̂ɔ̂Ɔ̌ɔ̌Ɔ̃ɔ̃Ɔ̃́ɔ̃́Ɔ̃̀ɔ̃̀Ɔ̃̂ɔ̃̂Ɔ̃̌ɔ̃̌Ɔ̃̍ɔ̃̍Ɔ̃̎ɔ̃̎Ɔ̄ɔ̄Ɔ̆ɔ̆Ɔ̇ɔ̇Ɔ̈ɔ̈Ɔ̈̀ɔ̈̀Ɔ̈́ɔ̈́Ɔ̈̂ɔ̈̂Ɔ̈̌ɔ̈̌Ɔ̌ɔ̌Ɔ̍ɔ̍Ɔ̎ɔ̎Ɔ̣ɔ̣Ɔ̣̀ɔ̣̀Ɔ̣́ɔ̣́Ɔ̣̂ɔ̣̂Ɔ̣̃ɔ̣̃Ɔ̣̈ɔ̣̈Ɔ̣̈̀ɔ̣̈̀Ɔ̣̈́ɔ̣̈́Ɔ̣̈̂ɔ̣̈̂Ɔ̣̈̌ɔ̣̈̌Ɔ̣̌ɔ̣̌Ɔ̤ɔ̤Ɔ̤̀ɔ̤̀Ɔ̤́ɔ̤́Ɔ̤̂ɔ̤̂Ɔ̤̈ɔ̤̈Ɔ̱ɔ̱Ɔ̱̀ɔ̱̀Ɔ̱́ɔ̱́Ɔ̱̂ɔ̱̂Ɔ̱̌ɔ̱̌Ɔ̱̃ɔ̱̃Ɔ̱̈ɔ̱̈Ɔ̱̈̀ɔ̱̈̀Ɔ̱̈́ɔ̱̈́Ɔ̧ɔ̧Ɔ̧̀ɔ̧̀Ɔ̧́ɔ̧́Ɔ̧̂ɔ̧̂Ɔ̧̌ɔ̧̌Ɔ̨ɔ̨Ɔ̨́ɔ̨́Ɔ̨̀ɔ̨̀Ɔ̨̂ɔ̨̂Ɔ̨̌ɔ̨̌Ɔ̨̄ɔ̨̄Ɔ̨̆ɔ̨̆Ɔ̨̈ɔ̨̈Ɔ̨̱ɔ̨̱Ɔ̰ɔ̰Ɔ̰̀ɔ̰̀Ɔ̰́ɔ̰́Ɔ̰̄ɔ̰̄P̀p̀ṔṕP̃p̃P̄p̄P̆p̆ṖṗP̈p̈P̋p̋P̑p̑P̓p̓P̕p̕P̔p̔P͑p͑P̱p̱P̣p̣P̤p̤P̬p̬ⱣᵽꝐꝑᵱᶈƤƥꝒꝓꝔꝕᴘ̇Q́q́Q̃q̃Q̄q̄Q̇q̇Q̈q̈Q̋q̋Q̓q̓Q̕q̕Q̧q̧Q̣q̣Q̣̇q̣̇Q̣̈q̣̈Q̱q̱ꝖꝗꝖ̃ꝗ̃ꝘꝙʠɊɋR̀r̀ŔŕR̂r̂R̃r̃R̄r̄R̆r̆ṘṙR̋r̋ŘřR̍r̍ȐȑȒȓR̓r̓R̕r̕ŖŗR̦r̦R̨r̨R̨̄r̨̄ꞦꞧR̭r̭ṞṟṚṛṚ̀ṛ̀Ṛ́ṛ́ṜṝṜ́ṝ́Ṝ̃ṝ̃Ṝ̆ṝ̆R̤r̤R̥r̥R̥̀r̥̀Ŕ̥ŕ̥R̥̂r̥̂R̥̃r̥̃R̥̄r̥̄R̥̄́r̥̄́R̥̄̆r̥̄̆Ř̥ř̥R̬r̬R̩r̩R̯r̯ɌɍᵲꭨɺᶉɻʵⱹɼⱤɽɾᵳɿʀ̇ʀ̣Ꝛ́ꝛ́Ꝛ̣ꝛ̣S̀s̀ŚśŚ̀ś̀ŚśṤṥŜŝS̃s̃S̄s̄S̄̒s̄̒S̆s̆ṠṡṠ̃ṡ̃S̈s̈S̋s̋ŠšŠ̀š̀Š́š́ṦṧŠ̓š̓S̑s̑S̒s̒S̓s̓S̕s̕ŞşȘșS̨s̨Š̨š̨ꞨꞩS̱s̱Ś̱ś̱S̮s̮ṢṣṢ́ṣ́Ṣ̄ṣ̄ṨṩṢ̌ṣ̌Ṣ̕ṣ̕Ṣ̱ṣ̱S̤s̤Š̤š̤S̥s̥Ś̥S̬s̬S̩s̩S̪s̪ꜱ̇ꜱ̣ſ́ẛſ̣ᵴᶊʂᶳꟅⱾȿẜẝᶋᶘʆT̀t̀T́t́T̃t̃T̄t̄T̆t̆T̆̀t̆̀ṪṫT̈ẗŤťT̑t̑T̓t̓T̕t̕T̔t̔T͑t͑ŢţȚțT̨t̨T̗t̗ṰṱT̰t̰ṮṯT̮t̮ṬṭṬ́ṭ́T̤t̤T̥t̥T̬t̬T̯t̯T̪t̪ƾŦŧȾⱦᵵƫᶵƬƭƮʈȶᴛ̇ᴛ̣ÙùÚúÛûŨũŨ̀ũ̀ṸṹŨ̂ũ̂Ũ̊ũ̊Ũ̌ũ̌Ũ̍ũ̍Ũ̎ũ̎ŪūŪ̀ū̀Ū́ū́Ū̂ū̂Ū̌ū̌Ū̃ū̃Ū̄ū̄Ū̆ū̆Ū̆́ū̆́ṺṻŪ̊ū̊ŬŭŬ̀ŭ̀Ŭ́ŭ́U̇u̇U̇́u̇́U̇̄u̇̄ÜüǛǜǗǘÜ̂ü̂Ü̃ü̃ǕǖǕ̆ǖ̆Ü̆ü̆ǙǚỦủŮůŮ́ů́Ů̃ů̃ŰűǓǔU̍u̍U̎u̎ȔȕȖȗU̓u̓U᷎u᷎ỦủƯưỨứỪừỮữƯ̆ư̆ỬửỰựU̧u̧Ú̧ú̧Ù̧ù̧Û̧û̧Ǔ̧ǔ̧ŲųŲ̀ų̀Ų́ų́Ų̂ų̂Ų̌ų̌Ų̄ų̄Ų̄́ų̄́Ų̄̀ų̄̀Ų̄̂ų̄̂Ų̄̌ų̄̌Ų̄̌ų̄̌Ų̈ų̈Ų̈́ų̈́Ų̈̀ų̈̀Ų̈̂ų̈̂Ų̈̌ų̈̌Ų̈̄ų̈̄Ų̋ų̋Ų̱ų̱Ų̱́ų̱́Ų̱̀ų̱̀ṶṷṴṵṴ̀ṵ̀Ṵ́ṵ́Ṵ̄ṵ̄Ṵ̈ṵ̈U̱u̱Ù̱ù̱Ú̱ú̱Û̱û̱Ũ̱ũ̱Ū̱ū̱Ū̱́ū̱́Ū̱̀ū̱̀Ū̱̂ū̱̂Ü̱ü̱Ǘ̱ǘ̱Ǜ̱ǜ̱Ü̱̂ü̱̂Ǚ̱ǚ̱Ǔ̱ǔ̱ỤụỤ̀ụ̀Ụ́ụ́Ụ̂ụ̂Ụ̃ụ̃Ụ̄ụ̄Ụ̈ụ̈Ụ̈̀ụ̈̀Ụ̈́ụ̈́Ụ̈̂ụ̈̂Ụ̈̌ụ̈̌Ụ̌ụ̌Ụ̍ụ̍ṲṳṲ̀ṳ̀Ṳ́ṳ́Ṳ̂ṳ̂Ṳ̈ṳ̈U̥u̥Ü̥ü̥U̯u̯Ũ̯ũ̯Ü̯ü̯U̩u̩U͔u͔Ũ͔ũ͔Ū͔ū͔ɄʉᶶɄ̀ʉ̀Ʉ́ʉ́Ʉ̂ʉ̂Ʉ̃ʉ̃Ʉ̄ʉ̄Ʉ̈ʉ̈Ʉ̌ʉ̌Ʉ̧ʉ̧Ʉ̰ʉ̰Ʉ̰́ʉ̰́Ʉ̱ʉ̱Ʉ̱́ʉ̱́Ʉ̱̀ʉ̱̀Ʉ̱̂ʉ̱̂Ʉ̱̈ʉ̱̈Ʉ̱̌ʉ̱̌Ʉ̥ʉ̥ꞸꞹᵾᶙꞾꞿʮʯɰᶭƱ̀ʊ̀Ʊ́ʊ́Ʊ̃ʊ̃ᵿV̀v̀V́v́V̂v̂ṼṽṼ̀ṽ̀Ṽ́ṽ́Ṽ̂ṽ̂Ṽ̌ṽ̌V̄v̄V̄̀v̄̀V̄́v̄́V̄̂v̄̂V̄̃v̄̃V̄̄v̄̄V̄̆v̄̆V̄̌v̄̌V̆v̆V̆́v̆́V̇v̇V̈v̈V̈̀v̈̀V̈́v̈́V̈̂v̈̂V̈̄v̈̄V̈̌v̈̌V̊v̊V̋v̋V̌v̌V̍v̍V̏v̏V̐v̐V̓v̓V̧v̧V̨v̨V̨̀v̨̀V̨́v̨́V̨̂v̨̂V̨̌v̨̌V̨̄v̨̄V̨̄́v̨̄́V̨̄̀v̨̄̀V̨̄̂v̨̄̂V̨̄̌v̨̄̌V̨̈v̨̈V̨̈́v̨̈́V̨̈̀v̨̈̀V̨̈̂v̨̈̂V̨̈̌v̨̈̌V̨̈̄v̨̈̄V̨̋v̨̋V̨̱v̨̱V̨̱́v̨̱́V̨̱̀v̨̱̀V̨̱̂v̨̱̂V̨̱̌v̨̱̌V̱v̱V̱̀v̱̀V̱́v̱́V̱̂v̱̂V̱̌v̱̌Ṽ̱ṽ̱V̱̈v̱̈V̱̈́v̱̈́V̱̈̀v̱̈̀V̱̈̂v̱̈̂V̱̈̌v̱̈̌ṾṿV̥v̥ꝞꝟᶌƲʋᶹƲ̀ʋ̀Ʋ́ʋ́Ʋ̂ʋ̂Ʋ̃ʋ̃Ʋ̈ʋ̈Ʋ̌ʋ̌ⱱⱴꝨ́ꝩ́Ꝩ̇ꝩ̇Ꝩ̣ꝩ̣ẀẁẂẃŴŵW̃w̃W̄w̄W̆w̆ẆẇẄẅW̊ẘW̋w̋W̌w̌W̍w̍W̓w̓W̱w̱ẈẉW̥w̥W̬w̬ⱲⱳX̀x̀X́x́X̂x̂X̃x̃X̄x̄X̆x̆X̆́x̆́ẊẋẌẍX̊x̊X̌x̌X̓x̓X̕x̕X̱x̱X̱̓x̱̓X̣x̣X̣̓x̣̓X̥x̥ᶍỲỳÝýŶŷỸỹȲȳȲ̀ȳ̀Ȳ́ȳ́Ȳ̃ȳ̃Ȳ̆ȳ̆Y̆y̆Y̆̀y̆̀Y̆́y̆́ẎẏẎ́ẏ́ŸÿŸ́ÿ́Y̊ẙY̋y̋Y̌y̌Y̍y̍Y̎y̎Y̐y̐Y̓y̓ỶỷY᷎y᷎Y̱y̱ỴỵỴ̣ỵ̣Y̥y̥Y̯y̯ɎɏƳƴỾỿZ̀z̀ŹźẐẑZ̃z̃Z̄z̄ŻżZ̈z̈Z̋z̋ŽžŽ́ž́Ž̏ž̏Z̑z̑Z̓z̓Z̕z̕Z̨z̨Z̗z̗ẔẕZ̮z̮ẒẓẒ́ẓ́Ẓ̌ẓ̌Ẓ̣ẓ̣Z̤z̤Z̥z̥ƵƶᵶᶎꟆȤȥʐᶼʑᶽⱿɀⱫⱬƷ́ʒ́Ʒ̇ʒ̇ǮǯǮ́ǯ́Ʒ̥ʒ̥ᶚƺʓÞ́þ́Þ̣þ̣ꝤꝥꝦꝧƻꜮꜯʡʢꜲꜳꜲ́ꜳ́Ꜳ̋ꜳ̋Ꜳ̇ꜳ̇Ꜳ̈ꜳ̈Ꜳ̣ꜳ̣ÆæᴭÆ̀æ̀ǼǽÆ̂æ̂Æ̌æ̌Æ̃æ̃Æ̃́æ̃́Æ̃̀æ̃̀Æ̃̂æ̃̂Æ̃̌æ̃̌ǢǣǢ́ǣ́Ǣ̂ǣ̂Ǣ̃ǣ̃Ǣ̆ǣ̆Æ̆æ̆Æ̇æ̇Æ̈æ̈Æ̈̀æ̈̀Æ̈́æ̈́Æ̈̂æ̈̂Æ̈̌æ̈̌Æ̊æ̊Æ̋æ̋Æ᷎æ᷎Æ̨æ̨Æ̨̀æ̨̀Ǽ̨ǽ̨Æ̨̂æ̨̂Æ̨̈æ̨̈Ǣ̨ǣ̨Æ̨̌æ̨̌Æ̨̱æ̨̱Æ̱æ̱Æ̱̃æ̱̃Æ̱̈æ̱̈Æ̣æ̣Æ͔̃æ͔̃ᴁᴂᵆꬱꜴꜵꜴ́ꜵ́Ꜵ̋ꜵ̋Ꜵ̣ꜵ̣ꜶꜷꜶ́ꜷ́Ꜷ̣ꜷ̣ꜸꜹꜺꜻꜸ́ꜹ́Ꜹ̋ꜹ̋Ꜹ̨ꜹ̨Ꜹ̣ꜹ̣Ꜻ́ꜻ́ꜼꜽꜼ̇ꜽ̇Ꜽ̣ꜽ̣ȸǱǲǳʣǄǅǆꭦʥʤﬀﬃﬄﬁﬂʩĲĳꭡǇǈǉỺỻʪʫɮǊǋǌŒœꟹŒ̀œ̀Œ́œ́Œ̂œ̂Œ̃œ̃Œ̄œ̄Œ̄́œ̄́Œ̄̃œ̄̃Œ̄̆œ̄̆Œ̋œ̋Œ̌œ̌Œ̨œ̨Œ̨̃œ̨̃Œ̣œ̣Œ̯œ̯ɶᴔꭂꭁꭢꝎꝏꝎ́ꝏ́Ꝏ̈ꝏ̈Ꝏ̋ꝏ̋Ꝏ̣ꝏ̣ꭃꭄȹẞßﬆﬅʨᵺʦꭧʧꜨꜩꭀᵫꭐꭑꭣꝠꝡꝠ̈ꝡ̈Ꝡ̋ꝡ̋ꭠ&quot;;
let re = new RegExp(`(?<=[^${wordchar}]*)[${wordchar}]+(?=[${wordchar}]*)`, "g");
console.log(myString.match(re)); // ["Whatever", "you", "want", "here", "ex", "Bân-lâm-gú", "or", "bokmål", "or", "Português", "or", "Română", "or", "Slovenčina", "or", "Slovenščina"] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-27T14:04:34.197

对于我用过的俄语和拉丁字母

[\\wа-яА-Я]

# android - 如何使用shake命令停止旁白

> ID：11704186
> 
> 赞同：0
> 
> 时间：2012-07-28T19:55:17.087
> 
> 标签：android

我做了一个应用程序语音旁白。但是现在我需要在用户摇动应用程序时停止叙述。这意味着当用户摇动手机时，我想停止旁白。我做了配音部分。

# php - Bcrypt(4)（=4 次迭代）与 SHA512 还是不同的东西，每个密码都有唯一的盐？

> ID：11704200
> 
> 赞同：5
> 
> 时间：2012-07-28T19:57:43.263
> 
> 标签：php, cryptography, passwords, password-protection, bcrypt

**背景：**

我想在我的小网站上添加一个登录，这是一个在线 php 应用程序，我想构建它以便将来能够承受大量用户活动。

在进一步研究实现 LightOpenID 之前，我想添加一个普通登录。我正在学习的书名为 Head First PHP & MySQL (2008)，本章的最终代码`SHA('$user_password')`用作 mysql 查询的一部分。

当我对 Jeff Atwood 的作品感兴趣时，我很清楚 bcrypt 和 scrypt。但是由于没有 scrypt 的 php 实现并且没有专门的服务器来运行它，我决定至少现在考虑实现 bcrypt。

但是我并不完全天真，我知道我应该注意不要过度扩展我非常不起眼的托管资源。php 应用程序本身应该始终排在与资源有关的任何其他内容之前。

[Andrew Moore 的方法](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)看起来不错（尽管我必须看看如何在我的主机使用的 php 5.2.17 上实现它）并且它带有硬件速度提示：

> 您应该选择导致 200-250 毫秒工作的轮数。bcrypt 安全的部分原因是它很慢。您必须确保有多个回合保持该特征。——安德鲁·摩尔

另一位用户表示，对于他`microtime()`来说，Bcrypt(9) 的运行结果为 0.314，因此接近最优。

**问题：**

鉴于我只有非常简陋的资源可供使用，我想充分利用它们，将大部分资源留给 php 应用程序本身，**我还是最好使用 Bcrypt(4) 而不是其他东西吗？**

Bcrypt(4) 几乎立即返回 true，但它仍然保留 Moore 所说的那个特性吗？（这会是与 RAM 相关的部分，它使 GPU 暴力破解变得更加困难吗？）或者 SHA512**或其他东西**实际上会同样快但更安全在此刻？

我希望 Bcrypt(4) 在这种情况下获胜，但我真的知道吗？:p

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T20:07:32.377

安全性始终与您要保护的内容有关。

如果您更关心您的资源而不是您的安全性，那么 bcrypt(2) 已经是矫枉过正了。没有黑客会试图打破一个正常的应用程序，拥有更容易的目标网站，如 LinkedIn 和许多其他网站，这些网站只使用 sha 系列的功能，只需一次迭代，并且没有加盐。他们将追求“低垂的果实”。或者他们可以继续尝试破解您的应用程序，而不是在密码加密部分。

SHA-512 作为密码散列算法 [1] 并不比 SHA-1 更安全，它并不是为此目的而设计的。虽然它们仍然可以用作创建安全加密算法的原语，但这是任何人都不应该做的事情。为了被认为是安全的，加密算法必须是公开的以供同行评审，并且必须通过时间的考验。显然，必须针对您将要使用它们的内容进行设计。MD5、SHA-X 等是加密算法，但不是为存储密码而设计的。

只需向您的 bcrypt 添加或删除轮次。在这种情况下，我会使用 1 或 2。还要记住 1 轮！= 1 次迭代。它们呈指数增长。如果您了解 bcrypt 的工作原理，您会发现它不仅仅是迭代。例如，您提到了“每个密码的唯一盐”。Bcrypt 已经有了。

[1] 对于其他事情，它显然更安全

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T22:15:38.780

您应该查看系统的安全性，而不仅仅是 bcrypt。

当然，如果你想存储密码，bcrypt 或 PBKDF2 是继续的方式。确保为每个用户或密码使用足够大的随机盐。然后尝试最大化迭代次数。如果它很小，那么它就很小，但是任何迭代都比没有好。

请注意，这对窃听或中间人尝试（MitM）几乎没有作用。您应该为此使用 SSL；否则可以重播密码或哈希（如果您执行哈希客户端）。

此外，如果您想防止暴力攻击（攻击者尝试最常见的密码），您应该创建（或复制）一个好的密码管理方案。限制错误登录的数量并尝试让用户创建强密码。还要限制您返回给用户的有关不正确登录的信息量，该用户可能是攻击者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T23:16:41.853

> 或者此时 SHA512 或其他东西实际上会一样快但更安全吗？

缓慢是密码散列算法的一个主要特征（bcrypt 是其中之一，但 SHA-512 本身不是） - 您的算法越慢（相对于其他算法），攻击者就越难暴力破解密码基于哈希。从这个角度来看，单轮 SHA-512 不如 bcrypt 适合用于安全存储密码的目的，因为它要快得多。

在我看来，最好的方法是选择一个密码散列算法（bcrypt、PBKDF2、scrypt），然后调整工作因子以在速度和安全性之间进行最佳权衡，考虑到您可用的计算资源和特性你的系统。更高的工作系数 = 更安全，但也更耗费资源。

好消息是，与其他功能相比，用户通常很少使用您的登录功能，因此较慢/资源密集型登录功能的影响通常不是大问题。

# jquery - 通知栏从页面顶部滑入

> ID：11704202
> 
> 赞同：4
> 
> 时间：2012-07-28T19:57:48.693
> 
> 标签：jquery, css

在提交表单后，我想在页面中显示感谢消息。我用过这个 Jquery

```
$(document).ready(function(){
    $("#contactForm").submit(function(data) {
        $.post('web_contactoPrueba.php', {nombre: $('#nombre').val(), email: $('#email').val(), asunto: $('#asunto').val(), telefono: $('#telefono').val(), comentario: $('#comentario').val(), enviar: 'yes'}, function(data) {
            $("<div />", { class: 'topbar', text: data }).hide().prependTo("body")
            .slideDown('fast').delay(5000).slideUp(function() { $(this).remove(); $(location).attr('href','http://www.delagua.es/index.html');});
        }, 'text')
        return false;
    });
}); 
```

这个CSS

```
.topbar {
    background: #F68A0E;
    height: 60px;
    line-height:60px;
    font-size:25px;
    border-bottom: solid 2px #EEE;
    padding: 3px 0;
    text-align: center;
    color: white;
} 
```

当前的行为是它正确显示在页面顶部，但是当 submnit 按钮向下滚动时，我希望这个栏不是从页面顶部出现，而是从“当前页面视图”的顶部出现（这有意义吗？）并且没有下推页面的内容（这就是它现在所做的）。

是否有可能以简单的方式实现这一点（我自己不是盒子里最锋利的工具）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T20:06:44.327

我认为您可以通过在 CSS 属性中使用一些固定位置，轻松地将通知栏定位在当前视口的顶部。

```
.topbar {
    background: #F68A0E;
    height: 60px;
    line-height:60px;
    font-size:25px;
    border-bottom: solid 2px #EEE;
    padding: 3px 0;
    text-align: center;
    color: white;

    /* properties to "lock" the top bar at the top of the viewport. */
    position:fixed;
    top:0px;
    left:0px;
    width:100%;
} 
```

[jsFiddle 示例](http://jsfiddle.net/nBUUd/1/)

# actionscript-3 - 如何将 MXML 组件添加到 ActionScript 应用程序？

> ID：11704206
> 
> 赞同：0
> 
> 时间：2012-07-28T19:58:07.723
> 
> 标签：actionscript-3, apache-flex, mxml

我正在构建一个 ActionScript 3 项目，并且发现在 MXML 中编写一些组件会简化一些事情。

看来我需要扩展 Flex Application 类才能做到这一点。如果这是正确的，我该怎么做？

目前我的主要对象扩展了 Sprite。然后使用 将其他 Sprite 添加到其中`addChild()`，我希望其中之一包含 Flex 组件。肯定有办法不用完全用 MXML 重写我的应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:05:52.170

**编辑**正如评论中发布的那样，我在这里的解释主要是关于过渡到 Spark 应用程序，同样的想法适用于 MX 应用程序，除了 MX 你可以坚持使用 addChild，一般来说，你需要实现 IUIComponent 才能使用容器见文档：

> 注意：虽然该方法的子参数指定为 DisplayObject 类型，但该参数必须实现 IUIComponent 接口才能添加为容器的子级。所有 Flex 组件都实现了这个接口。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/Container.html#addChild](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/Container.html#addChild) () **结束编辑**

您可以将基类切换到 Application 而不是 Sprite，但是当向 Flex 4 应用程序添加元素时，它希望它们实现 IVisualElement。一般来说，您会将 addChild 调用切换到 addElement，并且您必须更改当前扩展 Sprite/MovieClip/DisplayObject 的其他类以扩展诸如 Group 之类的东西，以便它们实现 Flex 应用程序与它们一起工作的必要接口（通常是期望比较低级别的 Flash 对象提供更多的东西，因为它具有 LayoutManager、PopUpManager、组件生命周期等）。这里的问题是你会给你的组件增加一些重量，如果这是针对网络或桌面的，我不会太担心，但这会明显影响移动设备的性能。

不幸的是，它不是一个交钥匙类型的解决方案，它需要对代码进行一些手动修改，因为您必须根据其功能调用将每个对象更改为的内容，有时 Group 是其他时候您可能会得到的正确方法从其他容器或控件中获益更多。在某些情况下，您可能希望坚持使用当前较低级别的扩展（例如扩展 Sprite）并自己实现 IVisualElement。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/Container.html#addElement](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/Container.html#addElement) ()

如果您想为您的应用程序大规模切换到使用 MXML 文件，您还可以创建一个基本的 MXML 应用程序文件，并让它包含一个包含现有代码的脚本块（修改后构造函数代码移至创建完成）。或者，您可以拥有一个扩展应用程序的基本 .as 文件，然后将其用作 MXML 的基类，我将汇总一些示例。

**示例 1**一个非常基本的 MXML 应用程序文件

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               minWidth="955" minHeight="600">
    <fx:Script>
        <![CDATA[

        ]]>
    </fx:Script>
</s:Application> 
```

**示例 2**一个 AS3 类扩展应用程序和一个 MXML 类扩展该应用程序

[主.mxml]

```
<?xml version="1.0" encoding="utf-8"?>
<MyBaseApp
           xmlns="*"
           xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <s:Button id="btnControl"/>
</MyBaseApp> 
```

[MyBaseApp.as]

```
package
{
    import mx.events.FlexEvent;

    import spark.components.Application;
    import spark.components.Button;

    public class MyBaseApp extends Application
    {
        public var btnControl:Button;
        public function MyBaseApp()
        {
            super();
            addEventListener(FlexEvent.CREATION_COMPLETE, creationCompleteHandler);
        }
        private function creationCompleteHandler(event:FlexEvent):void
        {
            btnControl.label = "something I set in AS3";
        }
    }
} 
```

# r - R+bigmemory 包是否足以进行面向列的数据管理？

> ID：11704207
> 
> 赞同：0
> 
> 时间：2012-07-28T19:58:09.420
> 
> 标签：r, bigdata

我收集了各种金融时间序列。我的大部分分析都是面向列或面向行的，我很少需要执行任何类型的复杂查询。此外，我（到目前为止）几乎在 R 中进行所有分析。

因此，我正在认真考虑不部署任何类型的 RDBMS，而是直接在 R 中管理数据（保存 RDS 文件）。这将节省我安装管理数据库的痛苦，并可能提高数据加载速度。

有什么理由我应该考虑其他吗？你知道有人以这种方式管理他们的数据吗？我知道这很模糊，但我正在寻找意见，而不是答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T00:19:06.350

考虑机会成本。学习一门新的语言/生态系统——像 PostgreSQL 这样的东西肯定符合条件——将花费比你想象的更多的时间。这些技能可能很有价值，但它们会产生与您在现有分析上花费额外时间所获得的回报一样高的时间回报吗？

如果它是供个人使用并且没有紧迫的性能问题，请坚持使用 R。鉴于使用文本和 RDS 文件通常比使用成熟的数据库更容易做愚蠢的事情，只需确保备份所有内容。在过去的半年里，我从一个对基于云的存储的巨大怀疑者变成了一个巨大的转变者，除了我最敏感的信息之外，所有的信息现在都存储在那里。我使用 Dropbox，如果你搞砸了，它会保留以前版本的数据。

能够在智能手机角落的咖啡厅查看文档或脚本非常棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T20:36:59.330

如果在 R 中工作是您的舒适区。即使您的分析或运行时间更长，我也会将您的数据管理留在那里。

我最近有一个类似的决定：

1.  我是否应该朝着学习和应用新的（语言/方言/系统）的方向前进，以减少几毫秒的执行时间。

    或者...

2.  我是否应该继续使用我使用过的陈旧的旧工具，即使它们在执行时运行速度会变慢？

您的跑步产品是否只适合您？如果是这样，我只会坚持在 R 中进行数据管理。即使生产运行速度较慢。

如果您正在为银行、手机服务或类似的交易环境设计某些东西，我建议您找到超级解决方案。

但是，如果您的 R 产品适合您……我会留在 R 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T03:48:30.650

在 CRAN 中有一个逐列管理包，`colbycol`旨在为大型数据集提供类似 DB 的功能。我想作者一定也做过同样的分析。

# java - android中片段中的ClassNotFound异常

> ID：11704211
> 
> 赞同：1
> 
> 时间：2012-07-28T19:58:43.323
> 
> 标签：java, android

我有一个项目，我使用了在 android sdk 16（ADT 16）中正常运行的片段，但是当我在我的 adt20 上运行它时，它给了我这个异常：

```
 java.lang.ClassNotFoundException 
```

这是我的日志：

```
07-29 03:09:00.608: W/dalvikvm(467): Unable to resolve superclass of Lcom/powergroup/splitview/SplitviewActivity; (11)
07-29 03:09:00.608: W/dalvikvm(467): Link of class 'Lcom/powergroup/splitview/SplitviewActivity;' failed
07-29 03:09:00.667: D/AndroidRuntime(467): Shutting down VM
07-29 03:09:00.677: W/dalvikvm(467): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-29 03:09:00.728: E/AndroidRuntime(467): FATAL EXCEPTION: main
07-29 03:09:00.728: E/AndroidRuntime(467): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.powergroup.splitview/com.powergroup.splitview.SplitviewActivity}: java.lang.ClassNotFoundException: com.powergroup.splitview.SplitviewActivity in loader dalvik.system.PathClassLoader[/data/app/com.powergroup.splitview-2.apk]
07-29 03:09:00.728: E/AndroidRuntime(467):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
07-29 03:09:00.728: E/AndroidRuntime(467):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-29 03:09:00.728: E/AndroidRuntime(467):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-29 03:09:00.728: E/AndroidRuntime(467):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-29 03:09:00.728: E/AndroidRuntime(467):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-29 03:09:00.728: E/AndroidRuntime(467):  at android.os.Looper.loop(Looper.java:123)
07-29 03:09:00.728: E/AndroidRuntime(467):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-29 03:09:00.728: E/AndroidRuntime(467):  at java.lang.reflect.Method.invokeNative(Native Method)
07-29 03:09:00.728: E/AndroidRuntime(467):  at java.lang.reflect.Method.invoke(Method.java:521)
07-29 03:09:00.728: E/AndroidRuntime(467):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-29 03:09:00.728: E/AndroidRuntime(467):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-29 03:09:00.728: E/AndroidRuntime(467):  at dalvik.system.NativeStart.main(Native Method)
07-29 03:09:00.728: E/AndroidRuntime(467): Caused by: java.lang.ClassNotFoundException: com.powergroup.splitview.SplitviewActivity in loader dalvik.system.PathClassLoader[/data/app/com.powergroup.splitview-2.apk]
07-29 03:09:00.728: E/AndroidRuntime(467):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
07-29 03:09:00.728: E/AndroidRuntime(467):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
07-29 03:09:00.728: E/AndroidRuntime(467):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
07-29 03:09:00.728: E/AndroidRuntime(467):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-29 03:09:00.728: E/AndroidRuntime(467):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
07-29 03:09:00.728: E/AndroidRuntime(467):  ... 11 more
07-29 03:09:03.568: I/Process(467): Sending signal. PID: 467 SIG: 9 
```

如果它是一个错误，那么为什么它在 skd 16 中正常运行？我完全被困在这里:(

# c# - 如何安排消息弹出窗口并仅显示最后一条消息？

> ID：11704212
> 
> 赞同：0
> 
> 时间：2012-07-28T19:58:45.700
> 
> 标签：c#, .net, timer

我创建以下表单并单击 3 个按钮（随机）。在我单击一个按钮后，它必须在单击它 3 秒后显示相关消息。但是，如果我同时单击了另一个按钮，则必须显示该按钮的相关消息，并且必须取消队列中的前一条消息。

例如，如果我单击`button1`11.30.00，则相关消息应仅在 11.30.03 弹出，例如“您在 3 秒前单击：1”。但是，如果我`button2`在 11.30.03 之前单击另一个，例如在 11.30.02，则相关消息应在 11.30.05 弹出，例如“您在 3 秒前单击：2”，并且必须取消计划于 11.30.03 的消息。

这是我的代码：

```
private int signal = 0;

public Form1()
{
    InitializeComponent();
}

private void button1_Click(object sender, EventArgs e)
{
    signal = 1;
    displayMessage(signal);
}

private void button2_Click(object sender, EventArgs e)
{
    signal = 2;
    displayMessage(signal);
}

private void button3_Click(object sender, EventArgs e)
{
    signal = 3;
    displayMessage(signal);
}

private void displayMessage(int number) 
{       
    MessageBox.Show("You clicked : "+number+ "before 3 Seconds");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T20:06:28.400

设置按钮`Tag`：

```
button1.Tag = 1;
button2.Tag = 2;
button3.Tag = 3; 
```

然后设置`Click`事件：

```
button1.Click += button_Click;
button2.Click += button_Click;
button3.Click += button_Click; 
```

关于`Click`事件：

```
private void button_Click(object sender, EventArgs e)
{
    signal = (int) ((Button))sender.Tag;
    displayMessage(signal);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T20:09:22.707

启动计时器。根据按钮单击不断改变信号值，当经过的时间等于 3 秒时，显示来自 tick 事件的消息框。根据您的需要设置计时器间隔，这将反映在“相关消息”中。

```
int signal = 0;
System.Timers.Timer t = new System.Timers.Timer(3000);
private void Form1_Load(object sender, EventArgs e)
{
    //----------------------- other parts of code ---------------------

    // at last
    t.Elapsed += new System.Timers.ElapsedEventHandler(t_Elapsed);
    t.Start();
}

void t_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    if (signal == 0)
        return;

    t.Stop();
    MessageBox.Show("You clicked: " + signal + " before " + t.Interval + " Seconds");
    signal = 0;
    t.Start(); //move this to top of msgbox if you want timer to be reset right after poppin the msgbox.
}

private void button1_Click(object sender, EventArgs e)
{
    signal = 1;
    t.Stop();
    t.Start();
}

private void button2_Click(object sender, EventArgs e)
{
    signal = 2;
    t.Stop();
    t.Start();
}

private void button3_Click(object sender, EventArgs e)
{
    signal = 3; 
    t.Stop();
    t.Start();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T20:04:02.263

这不是一个有人会给你一个答案的地方，对该区域进行一些研究，然后在你遇到困难时发布。您想创建一个静态计时器并检查它是否在每个事件中完成

[http://msdn.microsoft.com/en-us/library/79b3xss3(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/79b3xss3(v=vs.80).aspx)

[http://msdn.microsoft.com/en-us/library/system.timers.timer(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer(v=vs.71).aspx)

# opencv - 使用旋转矩阵opencv

> ID：11704221
> 
> 赞同：2
> 
> 时间：2012-07-28T20:00:44.683
> 
> 标签：opencv, matrix, rotation

我有一个来自 opencv 中的 Core.Rodrigues 函数的旋转矩阵。我想通过这个旋转矩阵围绕原点旋转位于 (0, 0, 1) 的点。我该怎么做才能获得该点的新位置？

```
 Mat rmat= new Mat();
   Calib3d.Rodrigues(rvec, rmat); //rvec is the rotation vector from solvepnp
   double[] p= {0, 0, 1};
   Scalar scalar= new Scalar(p);
   Mat point= new Mat(1, 3, CvType.CV_64F, scalar);
   Mat newpoint= new Mat();
   Mat empty= new Mat();
   Core.gemm(point, rmat, 1, empty, 0, newpoint); 
```

newpoint 结果为 0, 0, 0，当我知道那是错误的

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:10:16.463

围绕原点旋转一个点的方法是将它与旋转矩阵预乘。我对 Core.gemm 不熟悉。这是一种更透明的方法。

```
Mat rmat= new Mat();
Calib3d.Rodrigues(rvec, rmat); //rvec is the rotation vector from solvepnp
Matx33f rotation_matrix = rmat;
Matx31f original_point(0,0,1);
Matx31f rotated_point = rotation_matrix*original_point; 
```

这应该更容易调试。检查rotation_matrix中存储的值，确保它们被初始化为合理的值（在调试器中可以看到Matx的内容）。您可以查看这些值并自己进行乘法以仔细检查您是否愿意。这个过程应该是完全透明的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:35:20.933

在您的代码中，您定义点 p 然后再也不使用它是巧合吗？另外，您使用矩阵点的值创建一个标量对象，然后使用该标量设置点的值？也许这是您错误的根源。

# php - 在 MySQL 数据库中存储 &(&) 的最佳方式

> ID：11704233
> 
> 赞同：8
> 
> 时间：2012-07-28T20:01:52.923
> 
> 标签：php, mysql, html, ampersand

我正在构建一个类别列表，但我不确定如何将 & 符号存储在 MySQL 数据库中。如果我使用`'&'`. 与以 html 格式使用它有什么不同`'&amp'`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T20:20:42.277

使用 '&' 可以节省几个字节。它不是 MySQL 的[特殊字符](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)。`&amp;`稍后您可以使用 PHP 的方法轻松生成for 输出[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)。当您的字段旨在保留简单信息时，您应该只使用纯文本，因为这通常更灵活，因为您可以稍后生成不同类型的标记等。例外：标记是由您希望将其布局决定与文本一起保存的用户生成的（如在富文本输入中）。如果您的输入中有标签等，您可能希望使用`&amp;`以保持一致性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T20:10:39.057

`&amp;`只有当数据库中的字段包含 HTML（如`<span class="bold">some text</span> &amp; more`）时，您才应将其存储 。在这种情况下，您应该非常小心[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)。

如果该字段包含一些一般数据（如用户名、标题...等），则仅应在将其放入 HTML 时对其进行转义（例如，使用[htmlentities ）。](http://php.net/manual/en/function.htmlentities.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T20:08:25.147

存储它`&amp;`是一种适当的方法。您可以回显它或在语句中使用它作为`&amp;`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-28T20:16:58.707

我们一直将 '&' 存储到数据库字段中，这样做很好（至少我从未听到过其他争论）。

如果您只在 HTML 页面中使用该字符串，您可以只存储`&amp;`我想的 HTML 安全版本。我建议存储 '&' 并在阅读时将其转义会更好（以防您将来需要在非 HTML 上下文中使用该字符串）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-28T20:26:39.127

如果`&amp;`您想拥有有效的 HTML 或避免出现问题，请使用`cut&copy`（浏览器[将其显示](http://jsbin.com/atufay/)为`cut©`）。

# php - php xpath 对 xml 文件运行多个查询，然后匹配结果

> ID：11704235
> 
> 赞同：1
> 
> 时间：2012-07-28T20:02:34.233
> 
> 标签：php, xml, xpath

我有一个包含交易的 XML 提要，我需要获取标题和图像。

我使用 xpath，这是一个示例：（`/deals/deal/deal_title`用于交易标题） `/deals/deal/deal_image`（用于交易图像）

问题是某些交易根本没有设置交易图像，因此当我将交易标题与交易图像链接时，有时会得到错误的图像。

为了追查问题，我创建了两个单独的数组：一个带有标题，另一个带有图像。

导致问题的奇怪之处在于，在图像数组上，空实例被移动到数组的末尾。

例如，如果我们假设“deal title2”没有图像而“deal title3”有图像，则“deal title3”图像用于“deal title2”。

使用此链接查看我制作的代码：http: [//pastebin.com/HEuTJQjZ](http://pastebin.com/HEuTJQjZ)

有趣的部分开始于：`$doc = new DOMDocument();`

基本上它所做的是执行许多 xpath 查询来获取标题、图像、价格等，然后将它们添加到数据库中。

当交易没有设置标签时，问题就开始了，因此它只使用下一个值。

我不明白它如何神奇地将所有空实例移动到底部。Xpath 不应该对结果进行排序，对吗？

我什至尝试使用 [] 运算符来获取特定图像，但没有帮助，因为结果以错误的方式排序。

示例提要：[http ://www.clickbanner.gr/xml/?xml_type=deals&affiliate_ID=14063](http://www.clickbanner.gr/xml/?xml_type=deals&affiliate_ID=14063)

**编辑：**

真正的问题是 xpath 没有按文档顺序对结果进行排序，而是修改了预期的顺序。这是一个错误还是什么，或者有没有办法强制结果按文档顺序排序？另请参阅：[XPath 查询结果顺序](https://stackoverflow.com/questions/8195733/xpath-query-result-order)

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:22:21.587

**`$k`为区间 中的任何值计算以下两个 XPath 表达式`[1, count(/deals/deal)]`：**

```
/deals/deal[$k]/deal_title 
```

和

```
deals/deal[$k]/deal_image 
```

通过这种方式，您知道是否选择了图像。

**例如，如果`count(/deals/deal)`是 3，那么您将评估这些 XPath 表达式**：

*   `/deals/deal[1]/deal_title` 和`deals/deal[1]/deal_image`

*   `/deals/deal[2]/deal_title` 和`deals/deal[2]/deal_image`

*   `/deals/deal[3]/deal_title` 和`deals/deal[3]/deal_image`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:35:23.167

我认为您应该尝试这种方式：

1.  演练`/deal/deal_id`标签值
2.  当搜索一对标签时：`/deal[/deal_id="$deal_id"]/deal_title`和`/deal[/deal_id="$deal_id"]/deal_image`（使用真正的 deal_id）代替`$deal_id`

您将获得每笔交易的交易标题和交易图像对，它们将匹配每个交易正确

# ember.js - 无法从 ember-data 扩展 DS.Model

> ID：11704237
> 
> 赞同：0
> 
> 时间：2012-07-28T20:02:41.640
> 
> 标签：ember.js, ember-data

这是我的模型

```
App.Person = DS.Model.extend({
    first_name: null,
    last_name: null,
    gender: null,
    profession: null,
    age: null
}); 
```

Firebug 给了我 2 个错误：

```
TypeError: Ember.EnumerableUtils is undefined
[Break On This Error]   

removeObject = Ember.EnumerableUtils.removeObject; 
```

这用于扩展 DS.Model

```
TypeError: DS.Model is undefined
[Break On This Error]   

App.Person2 = DS.Model.extend({ 
```

扩展 Ember.Object 使用相同的模型可以正常工作，我只是不能使用 DS。*

对于这些错误消息，Google 有 0 个结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:42:25.480

最可能的原因是 ember-data 和 ember 库的错误组合。大约 4 周前`Ember.ArrayUtils`改名为`Ember.EnumerableUtils`. 我假设您使用的是最新版本的 ember-data，但使用的是旧版本的 ember.js。如果您对边缘工作感到满意，您可以将 ember 升级到最新版本，或者只是在 ember-data 中进行查找和替换，但您可能会遇到其他一致性问题。

# ruby-on-rails - Rails - 如何让客户端在没有 AJAX 的情况下接收/处理来自服务器的消息？

> ID：11704242
> 
> 赞同：0
> 
> 时间：2012-07-28T20:03:52.430
> 
> 标签：ruby-on-rails, ajax, http

这可能是一个新手问题。我知道你可以很容易地在 Node.js 中做这种事情，但我不知道它叫什么，而且在 Google 上运气不佳。

基本上，我正在尝试使用 Ruby on Rails 构建一个简单的井字游戏服务器。玩家相互连接，并记录动作并实时处理结果。如果只是让用户向服务器发送消息，那么使用 AJAX 可以轻松完成。但是，我想让客户端等待并监听服务器指出另一个玩家已经移动，然后自动响应。我可以通过不断地用 AJAX ping 服务器来做到这一点，但必须有更好的方法。我觉得我错过了一些我还没有找到的大技术，只是因为我不完全确定如何描述它或它会被称为什么。

我想让客户端直接连接到服务器并保持实时连接吗？如果是这样，我该怎么做？如果不是，那么更好的方法是什么？在线游戏、股票行情和流媒体服务如何向客户提供它们的内容，Rails 为我提供了哪些工具来做类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:11:14.083

在 ruby​​ 中检查 eventmachine

一些链接

[https://github.com/eventmachine/eventmachine/wiki](https://github.com/eventmachine/eventmachine/wiki)

[http://20bits.com/article/an-eventmachine-tutorial](http://20bits.com/article/an-eventmachine-tutorial)

[http://rubysource.com/introduction-to-event-machine](http://rubysource.com/introduction-to-event-machine)

有一个 faye 和 private_pub gem 让事情变得更简单。

有可用的铁路广播。

[http://railscasts.com/episodes/260-messaging-with-faye](http://railscasts.com/episodes/260-messaging-with-faye)

[http://railscasts.com/episodes/316-private-pub](http://railscasts.com/episodes/316-private-pub)

我建议尝试建立在 faye 之上的 private_pub，它使用 eventmachine 可以解决您的大部分问题

pub/sub 模型有助于客户端订阅其频道，因此您可以将更新推送到最终将传递给客户端的频道。

你的问题和我的回答

问：我想让客户端直接连接到服务器并保持实时连接吗？如果是这样，我该怎么做？

A. 您可以使用 private_pub 或 faye 建立长连接并推送数据，也可以查看我们稍后的 pusher.com 他们提供的商业服务。

问：在线游戏、股票行情和流媒体服务如何向客户提供它们的内容，Rails 为我提供了哪些工具来做类似的事情？

A. AFAIK 每个人都使用某种推送技术。发布/订阅模型。ruby 有一些可用于此类要求的 gem，faye private_pub 其中一些..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:12:57.073

对于商业解决方案，请查看 Pusher，它几乎完全符合您的要求： http:
[//pusher.com/](http://pusher.com/)

对于开源解决方案，请查看 Faye（一个发布/订阅消息服务器）：
[http](http://faye.jcoglan.com/)
: //faye.jcoglan.com/ 和一些很棒的 railscasts 解释它：
[http ://railscasts.com/episodes/260-messaging-with- faye](http://railscasts.com/episodes/260-messaging-with-faye)
[http://railscasts.com/episodes/316-private-pub](http://railscasts.com/episodes/316-private-pub)

# python - Amazon ec2 - 部署 python 应用程序

> ID：11704251
> 
> 赞同：1
> 
> 时间：2012-07-28T20:04:52.680
> 
> 标签：python, deployment, amazon-web-services, virtual-machine

我阅读了整个文档，学到了很多东西。许多部分确实有据可查。[http://aws.amazon.com/documentation/](http://aws.amazon.com/documentation/)

问题是我是网络开发的新手。我知道如何在 gae 上部署我的应用程序，但我不知道如何在远程虚拟服务器上部署它。

亚马逊并没有真正解释如何部署 python 应用程序。具有'ealsticbeanstalk'的.net java和php的完整解决方案，但不适用于python。他们提到了一个名为“ActivePython”的第 3 方 AMI，但这对我没有多大帮助。

我希望你能帮我把事情弄清楚。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:11:18.837

如果您使用的是 DJango，请尝试查看 bitnami [bitnami 的 Django](http://bitnami.org/stack/djangostack#cloudImage) - 这确实让事情变得更容易

我最近在 EC2 上部署了一个 Django 应用程序，我的“大脑转储”就[在这里](http://nuclearcarrot.blogspot.co.uk/2013/03/brain-dump-of-getting-django-on-aws-ec2.html)

# java - 带有根元素的 Jackson JSON 反序列化

> ID：11704255
> 
> 赞同：47
> 
> 时间：2012-07-28T20:05:29.533
> 
> 标签：java, json, jackson, pojo

我对杰克逊有一个问题，我认为应该很容易解决，但这让我很生气。

假设我有一个看起来像这样的 java POJO 类（假设我的 Getters 和 Setters）：

```
class User {
    private String name;
    private Integer age;
} 
```

我想将看起来像这样的 JSON 反序列化为 User 对象：

```
{
  "user":
    {
      "name":"Sam Smith",
      "age":1
  }
} 
```

Jackson 给了我一些问题，因为 User 不是 JSON 中的第一级对象。我显然可以创建一个具有单个 User 对象的 UserWrapper 类，然后使用它进行反序列化，但我知道必须有一个更优雅的解决方案。

我该怎么做？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-28T20:22:03.397

*编辑：此解决方案仅适用于 jackson < 2.0*

对于您的情况，有一个简单的解决方案：

*   您需要使用`@JsonRootName(value = "user")`;注释您的模型类
*   您需要使用`om.configure(Feature.UNWRAP_ROOT_VALUE, true);`（对于 1.9）和`om.configure(DeserializationFeature.UNWRAP_ROOT_VALUE, true);`（对于版本 2）配置您的映射器。

就是这样！

* * *

```
@JsonRootName(value = "user")
public static class User {
    private String name;
    private Integer age;

    public String getName() {
        return name;
    }

    public void setName(final String name) {
        this.name = name;
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(final Integer age) {
        this.age = age;
    }

    @Override
    public String toString() {
        return "User [name=" + name + ", age=" + age + "]";
    }

}

ObjectMapper om = new ObjectMapper();
om.configure(Feature.UNWRAP_ROOT_VALUE, true);
System.out.println(om.readValue("{  \"user\":    {      \"name\":\"Sam Smith\",      \"age\":1  }}", User.class)); 
```

这将打印：

```
User [name=Sam Smith, age=1] 
```

# android - 使用 IntelliJ IDEA IDE 在模拟器上运行 Android 应用程序时出错

> ID：11704261
> 
> 赞同：1
> 
> 时间：2012-07-28T20:06:31.597
> 
> 标签：android, virtual

我正在尝试使用 IntelliJ IDEA 11 IDE 运行 Basic Android 应用程序。我在运行 Ubuntu 12 的 Virtual Box 下运行它。应用程序代码是这样的：package com.work;

```
import android.app.Activity;
import android.os.Bundle;

public class MyActivity extends Activity {
/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}
} 
```

但是当我运行这个应用程序时，我收到以下错误：

```
07-29 00:55:38.589: ERROR/Zygote(33): setreuid() failed. errno: 2
07-29 00:58:11.529: ERROR/Zygote(33): setreuid() failed. errno: 17
07-29 00:59:02.211: ERROR/BatteryService(68): usbOnlinePath not found
07-29 00:59:02.211: ERROR/BatteryService(68): batteryVoltagePath not found
07-29 00:59:02.262: ERROR/BatteryService(68): batteryTemperaturePath not found
07-29 00:59:03.200: ERROR/SurfaceFlinger(68): Couldn't open  
/sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
07-29 01:03:13.950: ERROR/EventHub(68): could not get driver version for   
/dev/input/mouse0, Not a typewriter
07-29 01:03:13.950: ERROR/EventHub(68): could not get driver version for 
/dev/input/mice, Not a typewriter
07-29 01:03:20.639: ERROR/System(68): Failure starting core service
    java.lang.SecurityException
    at android.os.BinderProxy.transact(Native Method)
    at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
    at android.os.ServiceManager.addService(ServiceManager.java:72)
    at com.android.server.ServerThread.run(SystemServer.java:184)
 07-29 01:04:02.261: ERROR/SoundPool(68): error loading   
/system/media/audio/ui/Effect_Tick.ogg
07-29 01:04:02.801: ERROR/SoundPool(68): error loading     
/system/media/audio/ui/KeypressStandard.ogg
07-29 01:04:03.243: ERROR/SoundPool(68): error loading     
/system/media/audio/ui/KeypressSpacebar.ogg
07-29 01:04:03.490: ERROR/SoundPool(68): error loading     
/system/media/audio/ui/KeypressDelete.ogg
 07-29 01:04:03.683: ERROR/SoundPool(68): error loading   
/system/media/audio/ui/KeypressReturn.ogg
07-29 01:05:57.194: ERROR/ThrottleService(68): Could not open GPS configuration file    
/etc/gps.conf
07-29 01:06:09.580: ERROR/logwrapper(169): executing /system/bin/tc failed: No such   
file or directory
07-29 01:06:09.890: ERROR/logwrapper(171): executing /system/bin/tc failed: No such 
file or directory
07-29 01:06:10.551: ERROR/logwrapper(174): executing /system/bin/tc failed: No such  
file or directory
07-29 01:06:17.370: ERROR/ActivityManager(68): ANR in com.android.settings
    Reason: Broadcast of Intent { act=android.intent.action.CLOSE_SYSTEM_DIALOGS (has  
 extras) }
    Load: 5.09 / 3.45 / 1.74
    CPU usage from 16398ms to 2030ms ago:
    system_server: 46% = 26% user + 19% kernel / faults: 258 minor 2 major
    bootanimation: 28% = 25% user + 3% kernel
    adbd: 7% = 0% user + 7% kernel
    qemud: 1% = 0% user + 1% kernel
    netd: 1% = 0% user + 1% kernel / faults: 21 minor
    logcat: 0% = 0% user + 0% kernel
    events/0: 0% = 0% user + 0% kernel
    servicemanager: 0% = 0% user + 0% kernel
    zygote: 0% = 0% user + 0% kernel / faults: 7 minor
    +re-initialized>: 0% = 0% user + 0% kernel
    +zygote: 0% = 0% user + 0% kernel
    +zygote: 0% = 0% user + 0% kernel
    +zygote: 0% = 0% user + 0% kernel
    TOTAL: 100% = 53% user + 43% kernel + 0% irq + 2% softirq
 07-29 01:06:29.433: ERROR/ActivityManager(68): Start proc com.android.launcher for   
 activity com.android.launcher/com.android.launcher2.Launcher: pid=177 uid=10025 gids= 
 {}Load: 5.07 / 3.5 / 1.77
    CPU usage from 14712ms to 921ms ago:
    system_server: 59% = 37% user + 21% kernel / faults: 151 minor 1 major
    bootanimation: 36% = 32% user + 3% kernel
    adbd: 2% = 0% user + 2% kernel
    qemud: 1% = 0% user + 1% kernel
    zygote: 0% = 0% user + 0% kernel / faults: 11 minor
    events/0: 0% = 0% user + 0% kernel
    logcat: 0% = 0% user + 0% kernel
    +re-initialized>: 0% = 0% user + 0% kernel
    TOTAL: 99% = 68% user + 29% kernel + 0% irq + 0% softirq
  07-29 01:06:38.670: ERROR/ActivityManager(68): ANR in com.android.settings
    Reason: Broadcast of Intent { act=android.intent.action.CLOSE_SYSTEM_DIALOGS (has   
  extras) }
    Load: 5.52 / 3.65 / 1.84
    CPU usage from 10310ms to 154ms ago:
    system_server: 52% = 34% user + 17% kernel / faults: 578 minor 1 major
    adbd: 4% = 0% user + 3% kernel
    logcat: 0% = 0% user + 0% kernel
    zygote: 0% = 0% user + 0% kernel / faults: 40 minor
    qemud: 0% = 0% user + 0% kernel
    init: 0% = 0% user + 0% kernel
    +ndroid.launcher: 0% = 0% user + 0% kernel
    +re-initialized>: 0% = 0% user + 0% kernel
    -bootanimation: 0% = 0% user + 0% kernel
    TOTAL: 100% = 62% user + 36% kernel + 0% irq + 1% softirq
 07-29 01:08:10.033: ERROR/ActivityManager(68): ANR in com.android.mms
    Reason: Broadcast of Intent { act=android.intent.action.BOOT_COMPLETED  
 cmp=com.android.mms/.transaction.MmsSystemEventReceiver }
    Load: 9.1 / 5.09 / 2.5
    CPU usage from 91361ms to 2237ms ago:
    system_server: 39% = 27% user + 11% kernel / faults: 5015 minor 3 major
    ndroid.launcher: 7% = 4% user + 3% kernel / faults: 5468 minor 4 major
    adbd: 2% = 0% user + 2% kernel
    qemud: 1% = 0% user + 1% kernel
    re-initialized>: 1% = 0% user + 0% kernel / faults: 3064 minor
    zygote: 0% = 0% user + 0% kernel / faults: 257 minor
    logcat: 0% = 0% user + 0% kernel
    events/0: 0% = 0% user + 0% kernel
    mmcqd: 0% = 0% user + 0% kernel
    installd: 0% = 0% user + 0% kernel / faults: 25 minor
    pdflush: 0% = 0% user + 0% kernel
    vold: 0% = 0% user + 0% kernel / faults: 5 minor
    rild: 0% = 0% user + 0% kernel / faults: 1 minor
    init: 0% = 0% user + 0% kernel
    servicemanager: 0% = 0% user + 0% kernel
    netd: 0% = 0% user + 0% kernel / faults: 5 minor
    mediaserver: 0% = 0% user + 0% kernel
    +fsck_msdos: 0% = 0% user + 0% kernel
    +m.android.phone: 0% = 0% user + 0% kernel
    +d.process.acore: 0% = 0% user + 0% kernel
    +d.process.media: 0% = 0% user + 0% kernel
    +roid.alarmclock: 0% = 0% user + 0% kernel
    +com.android.mms: 0% = 0% user + 0% kernel
    +re-initialized>: 0% = 0% user + 0% kernel
    TOTAL: 100% = 65% user + 33% kernel + 0% irq + 1% softirq
 07-29 01:08:10.671: ERROR/ActivityManager(68): act=android.view.InputMethodLoad: 9.1 / 
 5.09 / 2.5
    CPU usage from 91630ms to 2506ms ago:
    system_server: 39% = 27% user + 11% kernel / faults: 5015 minor 3 major
    ndroid.launcher: 7% = 4% user + 3% kernel / faults: 5468 minor 4 major
    adbd: 2% = 0% user + 2% kernel
    qemud: 1% = 0% user + 1% kernel
    re-initialized>: 1% = 0% user + 0% kernel / faults: 3064 minor
    zygote: 0% = 0% user + 0% kernel / faults: 257 minor
    logcat: 0% = 0% user + 0% kernel
    events/0: 0% = 0% user + 0% kernel
    mmcqd: 0% = 0% user + 0% kernel
    installd: 0% = 0% user + 0% kernel / faults: 25 minor
    pdflush: 0% = 0% user + 0% kernel
    vold: 0% = 0% user + 0% kernel / faults: 5 minor
    rild: 0% = 0% user + 0% kernel / faults: 1 minor
    init: 0% = 0% user + 0% kernel
    servicemanager: 0% = 0% user + 0% kernel
    netd: 0% = 0% user + 0% kernel / faults: 5 minor
    mediaserver: 0% = 0% user + 0% kernel
    +fsck_msdos: 0% = 0% user + 0% kernel
    +m.android.phone: 0% = 0% user + 0% kernel
    +d.process.acore: 0% = 0% user + 0% kernel
    +d.process.media: 0% = 0% user + 0% kernel
    +roid.alarmclock: 0% = 0% user + 0% kernel
    +com.android.mms: 0% = 0% user + 0% kernel
    +re-initialized>: 0% = 0% user + 0% kernel
    TOTAL: 100% = 65% user + 33% kernel + 0% irq + 1% softirq
  07-29 01:08:40.277: ERROR/ActivityManager(68): ANR in jp.co.omronsoft.openwnn
    Reason: Executing service jp.co.omronsoft.openwnn/.OpenWnnJAJP
    Load: 11.13 / 5.99 / 2.88
    CPU usage from 32462ms to 1576ms ago:
    system_server: 69% = 50% user + 18% kernel / faults: 1047 minor
    re-initialized>: 20% = 10% user + 9% kernel / faults: 3224 minor 4 major
    d.process.acore: 12% = 7% user + 5% kernel / faults: 3637 minor
    m.android.phone: 9% = 5% user + 3% kernel / faults: 3898 minor 9 major
    d.process.media: 5% = 3% user + 2% kernel / faults: 3170 minor
    adbd: 4% = 0% user + 4% kernel
    fsck_msdos: 4% = 2% user + 2% kernel / faults: 2161 minor 1 major
    roid.alarmclock: 3% = 1% user + 2% kernel / faults: 3118 minor
    qemud: 2% = 0% user + 2% kernel
    logcat: 1% = 0% user + 1% kernel
    ndroid.launcher: 0% = 0% user + 0% kernel / faults: 16 minor
    zygote: 0% = 0% user + 0% kernel / faults: 35 minor
    re-initialized>: 0% = 0% user + 0% kernel / faults: 31 minor
    events/0: 0% = 0% user + 0% kernel
    installd: 0% = 0% user + 0% kernel / faults: 2 minor
    pdflush: 0% = 0% user + 0% kernel
    servicemanager: 0% = 0% user + 0% kernel
    +re-initialized>: 0% = 0% user + 0% kernel
    +dexopt: 0% = 0% user + 0% kernel
    +com.android.mms: 0% = 0% user + 0% kernel
    TOTAL: 100% = 62% user + 35% kernel + 0% irq + 1% softirq
  07-29 01:10:17.328: ERROR/ActivityManager(68): ANR in jp.co.omronsoft.openwnn
    Reason: Executing service jp.co.omronsoft.openwnn/.OpenWnnJAJP
    Load: 10.77 / 7.32 / 3.74
    CPU usage from 126411ms to 5501ms ago:
    system_server: 31% = 18% user + 12% kernel / faults: 4061 minor
    re-initialized>: 10% = 6% user + 4% kernel / faults: 3695 minor
    adbd: 3% = 0% user + 3% kernel / faults: 12 minor
    qemud: 2% = 0% user + 2% kernel / faults: 15 minor
    logcat: 1% = 0% user + 0% kernel / faults: 42 minor
    m.android.phone: 0% = 0% user + 0% kernel / faults: 295 minor
    kswapd0: 0% = 0% user + 0% kernel
    fsck_msdos: 0% = 0% user + 0% kernel / faults: 343 minor
    events/0: 0% = 0% user + 0% kernel
    zygote: 0% = 0% user + 0% kernel / faults: 144 minor
    d.process.media: 0% = 0% user + 0% kernel / faults: 171 minor
    re-initialized>: 0% = 0% user + 0% kernel / faults: 176 minor
    d.process.acore: 0% = 0% user + 0% kernel / faults: 94 minor
    pdflush: 0% = 0% user + 0% kernel
    roid.alarmclock: 0% = 0% user + 0% kernel / faults: 59 minor
    installd: 0% = 0% user + 0% kernel / faults: 17 minor
    servicemanager: 0% = 0% user + 0% kernel / faults: 8 minor
    +ronsoft.openwnn: 0% = 0% user + 0% kernel
    +re-initialized>: 0% = 0% user + 0% kernel
    +dexopt: 0% = 0% user + 0% kernel
    -ndroid.launcher: 0% = 0% user + 0% kernel
    -re-initialized>: 0% = 0% user + 0% kernel
    TOTAL: 100% = 64% user + 34% kernel + 0% irq + 1% softirq
  07-29 01:10:49.375: ERROR/ActivityManager(68): ANR in com.android.launcher   
  (com.android.launcher/com.android.launcher2.Launcher)
    Reason: keyDispatchingTimedOut
    Load: 11.35 / 7.68 / 3.94
    CPU usage from 29037ms to 7003ms ago:
    system_server: 58% = 33% user + 24% kernel / faults: 874 minor
    re-initialized>: 19% = 7% user + 12% kernel / faults: 2597 minor
    re-initialized>: 14% = 9% user + 5% kernel / faults: 154 minor
    adbd: 6% = 0% user + 5% kernel
    qemud: 3% = 0% user + 2% kernel / faults: 1 minor
    logcat: 2% = 0% user + 1% kernel
    re-initialized>: 2% = 0% user + 1% kernel / faults: 29 minor
    d.process.acore: 1% = 0% user + 0% kernel / faults: 9 minor
    events/0: 0% = 0% user + 0% kernel
    m.android.phone: 0% = 0% user + 0% kernel / faults: 8 minor
    fsck_msdos: 0% = 0% user + 0% kernel / faults: 11 minor
    roid.alarmclock: 0% = 0% user + 0% kernel / faults: 12 minor
    d.process.media: 0% = 0% user + 0% kernel / faults: 4 minor
    pdflush: 0% = 0% user + 0% kernel
    servicemanager: 0% = 0% user + 0% kernel
    zygote: 0% = 0% user + 0% kernel
    +ronsoft.openwnn: 0% = 0% user + 0% kernel
    TOTAL: 100% = 50% user + 47% kernel + 0% irq + 2% softirq
  07-29 01:10:56.577: ERROR/ActivityManager(68): ANR in com.android.launcher    
  (com.android.launcher/com.android.launcher2.Launcher)
    Reason: keyDispatchingTimedOut
    Load: 11.35 / 7.68 / 3.94
    CPU usage from 29037ms to 7003ms ago:
    system_server: 58% = 33% user + 24% kernel / faults: 874 minor
    re-initialized>: 19% = 7% user + 12% kernel / faults: 2597 minor
    re-initialized>: 14% = 9% user + 5% kernel / faults: 154 minor
    adbd: 6% = 0% user + 5% kernel
    qemud: 3% = 0% user + 2% kernel / faults: 1 minor
    logcat: 2% = 0% user + 1% kernel
    re-initialized>: 2% = 0% user + 1% kernel / faults: 29 minor
    d.process.acore: 1% = 0% user + 0% kernel / faults: 9 minor
    events/0: 0% = 0% user + 0% kernel
    m.android.phone: 0% = 0% user + 0% kernel / faults: 8 minor
    fsck_msdos: 0% = 0% user + 0% kernel / faults: 11 minor
    roid.alarmclock: 0% = 0% user + 0% kernel / faults: 12 minor
    d.process.media: 0% = 0% user + 0% kernel / faults: 4 minor
    pdflush: 0% = 0% user + 0% kernel
    servicemanager: 0% = 0% user + 0% kernel
    zygote: 0% = 0% user + 0% kernel
    +ronsoft.openwnn: 0% = 0% user + 0% kernel
    TOTAL: 100% = 50% user + 47% kernel + 0% irq + 2% softirq
    Load: 11.88 / 7.99 / 4.1
    CPU usage from 20873ms to 4708ms ago:
    system_server: 55% = 28% user + 27% kernel / faults: 65 minor
    re-initialized>: 21% = 15% user + 5% kernel / faults: 141 minor
    re-initialized>: 8% = 2% user + 5% kernel / faults: 6 minor
    adbd: 7% = 0% user + 7% kernel
    qemud: 5% = 0% user + 5% kernel / faults: 7 minor
    logcat: 4% = 1% user + 2% kernel
    events/0: 2% = 0% user + 2% kernel
    re-initialized>: 1% = 0% user + 1% kernel / faults: 12 minor
    d.process.acore: 1% = 1% user + 0% kernel / faults: 5 minor
    pdflush: 0% = 0% user + 0% kernel
    fsck_msdos: 0% = 0% user + 0% kernel / faults: 6 minor
    roid.alarmclock: 0% = 0% user + 0% kernel / faults: 2 minor
    m.android.phone: 0% = 0% user + 0% kernel / faults: 1 minor
    d.process.media: 0% = 0% user + 0% kernel
    TOTAL: 100% = 47% user + 49% kernel + 0% irq + 2% softirq
  07-29 01:11:36.900: ERROR/ActivityManager(68): ANR in com.android.settings
    Reason: Broadcast of Intent { act=android.intent.action.CLOSE_SYSTEM_DIALOGS  
  cmp=com.android.settings/.widget.SettingsAppWidgetProvider (has extras) }
    Load: 13.0 / 8.87 / 4.58
    CPU usage from 47124ms to 3282ms ago:
    system_server: 48% = 30% user + 18% kernel / faults: 1222 minor
    re-initialized>: 15% = 10% user + 4% kernel / faults: 1526 minor 3 major
    adbd: 4% = 0% user + 4% kernel
    qemud: 2% = 0% user + 2% kernel
    logcat: 1% = 0% user + 0% kernel
    re-initialized>: 0% = 0% user + 0% kernel / faults: 22 minor
    zygote: 0% = 0% user + 0% kernel / faults: 75 minor
    d.process.acore: 0% = 0% user + 0% kernel / faults: 11 minor
    events/0: 0% = 0% user + 0% kernel
    pdflush: 0% = 0% user + 0% kernel
    d.process.media: 0% = 0% user + 0% kernel / faults: 34 minor
    fsck_msdos: 0% = 0% user + 0% kernel / faults: 28 minor
    m.android.phone: 0% = 0% user + 0% kernel / faults: 5 minor
    roid.alarmclock: 0% = 0% user + 0% kernel / faults: 1 minor
    servicemanager: 0% = 0% user + 0% kernel
    netd: 0% = 0% user + 0% kernel / faults: 5 minor
    +ronsoft.openwnn: 0% = 0% user + 0% kernel
    +ndroid.settings: 0% = 0% user + 0% kernel
    TOTAL: 100% = 54% user + 43% kernel + 0% irq + 1% softirq
   07-29 01:12:07.043: ERROR/ActivityManager(68): ANR in jp.co.omronsoft.openwnn
    Reason: Executing service jp.co.omronsoft.openwnn/.OpenWnnJAJP
    Load: 13.34 / 9.21 / 4.79
    CPU usage from 32868ms to 10154ms ago:
    ronsoft.openwnn: 48% = 31% user + 17% kernel / faults: 4021 minor 1 major
    system_server: 39% = 23% user + 15% kernel / faults: 166 minor 1 major
    re-initialized>: 19% = 16% user + 2% kernel / faults: 105 minor
    adbd: 4% = 0% user + 4% kernel
    qemud: 3% = 0% user + 2% kernel
    roid.alarmclock: 3% = 1% user + 1% kernel / faults: 199 minor
    logcat: 2% = 0% user + 1% kernel
    re-initialized>: 1% = 0% user + 0% kernel / faults: 23 minor
    d.process.acore: 1% = 0% user + 0% kernel / faults: 8 minor
    events/0: 0% = 0% user + 0% kernel
    fsck_msdos: 0% = 0% user + 0% kernel / faults: 18 minor
    d.process.media: 0% = 0% user + 0% kernel / faults: 2 minor
    m.android.phone: 0% = 0% user + 0% kernel / faults: 2 minor
    pdflush: 0% = 0% user + 0% kernel
    zygote: 0% = 0% user + 0% kernel
    +ndroid.settings: 0% = 0% user + 0% kernel
    TOTAL: 100% = 59% user + 37% kernel + 0% irq + 2% softirq 
```

如果可能的话，任何人都可以帮助我解决问题。我无法从错误中找出任何东西。以上是来自过滤器的日志，仅作为错误。如果需要，我也可以获取详细日志。让我知道以防万一遗漏了什么。

感谢期待。

# php - 致命错误：在 MAMP 中找不到类“COM”

> ID：11704262
> 
> 赞同：0
> 
> 时间：2012-07-28T20:06:34.597
> 
> 标签：php, com, mamp

我正面临这个问题

> 致命错误：在第 10 行的 /Applications/MAMP/htdocs/ctor/abc.php 中找不到类“COM”

abc.php 如下

```
<?php
ini_set ( 'max_execution_time', 300);

$filename = "abc.xlsx";

$sheet1 = 4;

$arr=array(1=>'a','b','c','d');

$excel_app = new COM("Excel.application") or Die ("Did not connect");

?> 
```

请提出一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:13:11.860

COM[仅在 Windows 上可用。](http://www.php.net/manual/en/com.requirements.php)

从路径中的“MAMP”中扣除，您似乎在 Apple 机器上。Mac OS 是基于 Unix 的。

# javascript - 每次新的点击都能产生新的图像吗？

> ID：11704264
> 
> 赞同：2
> 
> 时间：2012-07-28T20:06:56.567
> 
> 标签：javascript, html, onclick

我知道如何使用 onclick 或 onMouseOver 使图像出现，但我怎样才能使每次单击不仅在同一个地方产生适当的图像，而且例如在它之前的外观旁边连续产生适当的图像？我的想法是这样的：我点击reference1，然后出现一个picture1。然后我点击reference2，一个picture2出现在已经显示的picture1旁边。现在我再次点击reference1，我想连续看到图片1,2,1。我怎样才能做到这一点？我的理想是在填充时看到行滚动，并且删除按钮删除该行中的最后一个图像，甚至使图片跳出从文本字段中调用，但我可以自己搜索这些。我现在最关心的是新点击=新图像。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T20:25:16.810

这是一个例子。

```
<html>
  <head>
    <style>
      .refimg { width: 100px; height: 100px; }
      .choices a { margin-right: 2ex; }
      .choices img { display: none; }
      #target { display:block; width: 500px; overflow-x: scroll; border: 1px solid black; }
    </style>
  </head>
<body>
  Choices:
  <div class="choices">
    <a href="#" onclick="return putImage(image1);">ref1</a>
    <a href="#" onclick="return putImage(image2);">ref2</a>
    <image id="image1" src="image1.gif" class="refimg" />
    <image id="image2" src="image2.gif" class="refimg" />
  </div>
  <br />
  Selections: <input type="button" value="Delete" onclick="delImage()" />
  <nobr id="target">
  </nobr>

  <script>
  function putImage(src) {
    var a = src.cloneNode(true);
    a.id = ''; //clear id to prevent duplicate id
    target.appendChild(a);
    a.scrollIntoView(true);
    return false;
  }
  function delImage() {
    var a=target.children;
    if (a.length>0) target.removeChild(a[a.length-1]);
  }
  target.style.height=((target.offsetHeight-target.clientHeight)+100)+'px'; //extend height for scroll bar
  </script>

  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:29:55.917

假设这是相对简单的 - 您可以跟踪图像列表中的当前位置，然后创建一个处理当前图像的函数，然后增加该位置。让 onClick 事件调用此函数，然后就可以了。

可以在此处查看使用 JQuery 的实际示例：http: [//jsfiddle.net/8Q4LQ/](http://jsfiddle.net/8Q4LQ/)

# css - css显示中以下内容的区别？

> ID：11704266
> 
> 赞同：-1
> 
> 时间：2012-07-28T20:07:24.303
> 
> 标签：css

有人问我一个问题，以下之间有什么区别，我真的不知道答案。所以这里，有什么区别，

```
display:inline-block 
display:inline
display:block 
```

谢谢你的回答...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:16:37.120

您正在努力解决的主要问题是您在问题下的评论中的内联块。

inline-block 是一种让块元素内联显示的方法，因此您可以在它们上使用 inline-block ，而不是将它们浮动到左侧，将它们的行为保留为 div，但将它们改为内联元素。

例如，假设您有

```
​&lt;div style="display:block" >Test</div>
<div style="display:block" >Home</div>​ 
```

这将呈现为

> 测试
> 
> 家

然而

```
​&lt;div style="display:inline-block" >Test</div>
<div style="display:inline-block" >Home</div>​ 
```

将显示为

> 测试之家

此外，内联元素不能有宽度/高度属性。块元素可以。`inline-block`使块元素看起来像内联元素，但您仍然可以应用只有块元素可以拥有的样式。请参阅此[演示](http://jsfiddle.net/QJpX8/1)。

# javascript - 在 JavaScript 中，如何有条件地向对象添加成员？

> ID：11704267
> 
> 赞同：712
> 
> 时间：2012-07-28T20:07:24.557
> 
> 标签：javascript

我想创建一个有条件地添加成员的对象。简单的方法是：

```
var a = {};
if (someCondition)
    a.b = 5; 
```

现在，我想写一个更惯用的代码。我在尝试：

```
a = {
    b: (someCondition? 5 : undefined)
}; 
```

但现在，`b`是`a`其值为的成员`undefined`。这不是预期的结果。

有没有方便的解决方案？

**更新**

我寻求一个可以处理几个成员的一般情况的解决方案。

```
a = {
  b: (conditionB? 5 : undefined),
  c: (conditionC? 5 : undefined),
  d: (conditionD? 5 : undefined),
  e: (conditionE? 5 : undefined),
  f: (conditionF? 5 : undefined),
  g: (conditionG? 5 : undefined),
 }; 
```

* * *

## 回答 #1

> 赞同：1560
> 
> 时间：2016-11-12T08:22:24.297

我认为@InspiredJW 是用 ES5 做到的，正如@trincot 所指出的，使用 es6 是一种更好的方法。但是我们可以通过使用扩展运算符和逻辑与短路评估来添加更多的糖：

```
const a = {
   ...(someCondition && {b: 5})
} 
```

* * *

## 回答 #2

> 赞同：209
> 
> 时间：2018-07-05T22:00:21.353

```
const obj = {
   ...(condition) && {someprop: propvalue},
   ...otherprops
} 
```

现场演示：

```
const obj = {
  ...(true) && {someprop: 42},
  ...(false) && {nonprop: "foo"},
  ...({}) && {tricky: "hello"},
}

console.log(obj);
```

* * *

## 回答 #3

> 赞同：138
> 
> 时间：2012-07-28T20:45:40.753

在纯 Javascript 中，我想不出比您的第一个代码片段更惯用的东西了。

但是，如果使用 jQuery 库不是不可能的，那么[$.extend()](http://api.jquery.com/jQuery.extend/)应该满足您的要求，因为正如文档所述：

> 未定义的属性不会被复制。

因此，您可以编写：

```
var a = $.extend({}, {
    b: conditionB ? 5 : undefined,
    c: conditionC ? 5 : undefined,
    // and so on...
}); 
```

并获得你期望的结果（如果`conditionB`是`false`，那么`b`将不存在于`a`）。

* * *

## 回答 #4

> 赞同：114
> 
> 时间：2019-03-28T11:24:16.370

我建议如下：

```
const a = {
   ...(someCondition? {b: 5}: {})
} 
```

* * *

## 回答 #5

> 赞同：113
> 
> 时间：2016-07-20T14:10:35.617

使用 EcmaScript2015，您可以使用[`Object.assign`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)：

```
Object.assign(a, conditionB ? { b: 1 } : null,
                 conditionC ? { c: 2 } : null,
                 conditionD ? { d: 3 } : null); 
```

```
var a, conditionB, conditionC, conditionD;
conditionC = true;
a = {};
Object.assign(a, conditionB ? { b: 1 } : null,
                 conditionC ? { c: 2 } : null,
                 conditionD ? { d: 3 } : null);

console.log(a);
```

一些备注：

*   `Object.assign`就地修改第一个参数，但它也返回更新后的对象：因此您可以在更大的表达式中使用此方法，以进一步操作对象。
*   而不是`null`你可以通过`undefined`or `{}`，结果相同。您甚至可以提供`0`，因为[原始值是包装的，并且`Number`没有自己的可枚举属性](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Primitives_will_be_wrapped_to_objects)。

### 更简洁

进一步考虑第二点，您可以将其缩短如下（正如@Jamie 指出的那样），因为虚假值没有自己的可枚举属性（`false`, `0`, `NaN`, `null`, `undefined`, `''`, except [`document.all`](https://stackoverflow.com/questions/10350142/why-is-document-all-falsy)）：

```
Object.assign(a, conditionB && { b: 1 },
                 conditionC && { c: 2 },
                 conditionD && { d: 3 }); 
```

```
var a, conditionB, conditionC, conditionD;
conditionC = "this is truthy";
conditionD = NaN; // falsy
a = {};
Object.assign(a, conditionB && { b: 1 },
                 conditionC && { c: 2 },
                 conditionD && { d: 3 });
console.log(a);
```

* * *

## 回答 #6

> 赞同：63
> 
> 时间：2021-06-06T19:32:54.573

有条件地向对象添加成员

```
const trueCondition = true;
const falseCondition = false;
const obj = {
  ...(trueCondition && { student: 10 }),
  ...(falseCondition && { teacher: 2 }),
};

// { student: 10 } 
```

* * *

## 回答 #7

> 赞同：46
> 
> 时间：2020-07-15T12:03:20.403

**性能测试**

**经典**方法

```
const a = {};
if (someCondition)
    a.b = 5; 
```

**VS**

**传播算子**方法

```
const a2 = {
   ...(someCondition && {b: 5})
} 
```

***结果*：**

经典方法要快得多，因此请考虑到语法糖化较慢。

> testClassicConditionFulfilled(); // ~ 234.9ms
> testClassicConditionNotFulfilled(); // ~493.1ms
> testSpreadOperatorConditionFulfilled(); // ~2649.4ms
> testSpreadOperatorConditionNotFulfilled(); // ~2278.0ms

```
function testSpreadOperatorConditionFulfilled() {
  const value = 5;

  console.time('testSpreadOperatorConditionFulfilled');
  for (let i = 0; i < 200000000; i++) {
    let a = {
      ...(value && {b: value})
    };
  }
  console.timeEnd('testSpreadOperatorConditionFulfilled');
}

function testSpreadOperatorConditionNotFulfilled() {
  const value = undefined;

  console.time('testSpreadOperatorConditionNotFulfilled');
  for (let i = 0; i < 200000000; i++) {
    let a = {
      ...(value && {b: value})
    };
  }
  console.timeEnd('testSpreadOperatorConditionNotFulfilled');
}

function testClassicConditionFulfilled() {
  const value = 5;

  console.time('testClassicConditionFulfilled');
  for (let i = 0; i < 200000000; i++) {
    let a = {};
    if (value)
        a.b = value;
  }
  console.timeEnd('testClassicConditionFulfilled');
}

function testClassicConditionNotFulfilled() {
  const value = undefined;

  console.time('testClassicConditionNotFulfilled');
  for (let i = 0; i < 200000000; i++) {
    let a = {};
    if (value)
        a.b = value;
  }
  console.timeEnd('testClassicConditionNotFulfilled');
}

testClassicConditionFulfilled(); // ~ 234.9ms
testClassicConditionNotFulfilled(); // ~493.1ms
testSpreadOperatorConditionFulfilled(); // ~2649.4ms
testSpreadOperatorConditionNotFulfilled(); // ~2278.0ms
```

* * *

## 回答 #8

> 赞同：44
> 
> 时间：2020-04-01T08:34:26.317

更简化，

```
const a = {
    ...(condition && {b: 1}) // if condition is true 'b' will be added.
} 
```

* * *

## 回答 #9

> 赞同：30
> 
> 时间：2017-11-16T13:48:36.910

使用增强的对象属性怎么样，并且只在它是真实的情况下设置属性，例如：

```
[isConditionTrue() && 'propertyName']: 'propertyValue' 
```

因此，如果不满足条件，则不会创建首选属性，因此您可以丢弃它。请参阅：[http ://es6-features.org/#ComputedPropertyNames](http://es6-features.org/#ComputedPropertyNames)

**更新：** 最好遵循 Axel Rauschmayer 在他的博客文章中关于有条件地在对象文字和数组中添加条目的方法（[http://2ality.com/2017/04/conditional-literal-entries.html](http://2ality.com/2017/04/conditional-literal-entries.html)）：

```
const arr = [
  ...(isConditionTrue() ? [{
    key: 'value'
  }] : [])
];

const obj = {
  ...(isConditionTrue() ? {key: 'value'} : {})
}; 
```

对我帮助很大。

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2020-10-04T14:32:42.413

这可能是 ES6 中最短的解决方案

```
console.log({
   ...true && {foo: 'bar'}
})
// Output: {foo:'bar'} 
```

```
console.log({
   ...false && {foo: 'bar'}
})
// Output: {} 
```

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2012-07-28T20:10:40.423

我会这样做

```
var a = someCondition ? { b: 5 } : {}; 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2018-07-15T09:06:58.100

您可以无条件添加所有未定义的值，然后使用`JSON.stringify`将它们全部删除：

```
const person = {
  name: undefined,
  age: 22,
  height: null
}

const cleaned = JSON.parse(JSON.stringify(person));

// Contents of cleaned:

// cleaned = {
//   age: 22,
//   height: null
// } 
```

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2012-07-28T20:57:38.850

如果目标是让对象看起来是独立的并且在一组大括号内，你可以试试这个：

```
var a = new function () {
    if (conditionB)
        this.b = 5;

    if (conditionC)
        this.c = 5;

    if (conditionD)
        this.d = 5;
}; 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2014-12-10T01:54:55.853

这早就得到了回答，但是看着其他想法，我想出了一些有趣的衍生物：

## 为同一属性分配未定义的值，然后将其删除

使用匿名构造函数创建您的对象，并始终将未定义的成员分配给您在最后删除的同一个*虚拟成员。*这将为每个成员提供一行（我希望不是太复杂）+ 1 个附加行。

```
var a = new function() {
    this.AlwaysPresent = 1;
    this[conditionA ? "a" : "undef"] = valueA;
    this[conditionB ? "b" : "undef"] = valueB;
    this[conditionC ? "c" : "undef"] = valueC;
    this[conditionD ? "d" : "undef"] = valueD;
    ...
    delete this.undef;
}; 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2016-02-11T01:29:48.373

如果你希望做这个服务器端（没有 jquery），你可以使用 lodash 4.3.0：

```
a = _.pickBy({ b: (someCondition? 5 : undefined) }, _.negate(_.isUndefined)); 
```

* * *

这可以使用 lodash 3.10.1

```
a = _.pick({ b: (someCondition? 5 : undefined) }, _.negate(_.isUndefined)); 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-12-29T10:19:45.897

```
var a = {
    ...(condition ? {b: 1} : '') // if condition is true 'b' will be added.
} 
```

我希望这是根据条件添加条目的有效方法。有关如何有条件地在对象文字中添加条目的更多信息。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-05-18T22:59:06.383

使用 lodash 库，您可以使用**_.omitBy**

```
var a = _.omitBy({
    b: conditionB ? 4 : undefined,
    c: conditionC ? 5 : undefined,
}, _.IsUndefined) 
```

当您有可选的请求时，这很方便

```
var a = _.omitBy({
    b: req.body.optionalA,  //if undefined, will be removed
    c: req.body.optionalB,
}, _.IsUndefined) 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-09-15T18:29:20.757

这是我能想到的最简洁的解决方案：

```
var a = {};
conditionB && a.b = 5;
conditionC && a.c = 5;
conditionD && a.d = 5;
// ... 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-07-28T01:17:26.383

我更喜欢，使用它的代码，你可以运行这个代码

```
const three = {
  three: 3
}

// you can active this code, if you use object `three is null`
//const three = {}

const number = {
  one: 1,
  two: 2,
  ...(!!three && three),
  four: 4
}

console.log(number); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2012-07-28T20:50:24.190

我认为您第一种有条件地添加成员的方法非常好。我真的不同意不想拥有一个`b`值为. 使用操作员使用循环添加检查非常简单。但无论如何，您可以轻松编写一个函数来过滤掉成员。`a``undefined``undefined``for``in``undefined`

```
var filterUndefined = function(obj) {
  var ret = {};
  for (var key in obj) {
    var value = obj[key];
    if (obj.hasOwnProperty(key) && value !== undefined) {
      ret[key] = value;
    }
  }
  return ret;
};

var a = filterUndefined({
  b: (conditionB? 5 : undefined),
  c: (conditionC? 5 : undefined),
  d: (conditionD? 5 : undefined),
  e: (conditionE? 5 : undefined),
  f: (conditionF? 5 : undefined),
  g: (conditionG? 5 : undefined),
}); 
```

您还可以使用`delete`操作符在原地编辑对象。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2018-03-26T19:15:39.457

使用 lodash 库，您可以使用**_.merge**

```
var a = _.merge({}, {
    b: conditionB ? 4 : undefined,
    c: conditionC ? 5 : undefined,
}) 
```

1.  如果条件 B 是`false`& 条件 C 是`true`，那么`a = { c: 5 }`
2.  如果条件 B 和条件 C 都是`true`，则`a = { b: 4, c: 5 }`
3.  如果条件 B 和条件 C 都是`false`，则`a = {}`

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2019-05-06T12:38:22.757

**包装成一个对象**

像这样的东西有点干净

```
 const obj = {
   X: 'dataX',
   Y: 'dataY',
   //...
 }

 const list = {
   A: true && 'dataA',
   B: false && 'dataB',
   C: 'A' != 'B' && 'dataC',
   D: 2000 < 100 && 'dataD',
   // E: conditionE && 'dataE',
   // F: conditionF && 'dataF',
   //...
 }

 Object.keys(list).map(prop => list[prop] ? obj[prop] = list[prop] : null) 
```

**包装成一个数组**

或者，如果您想使用 Jamie Hill 的方法并且有很长的条件列表，那么您必须`...`多次编写语法。为了使它更简洁，您可以将它们包装到一个数组中，然后使用`reduce()`将它们作为单个对象返回。

```
const obj = {
  X: 'dataX',
  Y: 'dataY',
  //...

...[
  true && { A: 'dataA'},
  false && { B: 'dataB'},
  'A' != 'B' && { C: 'dataC'},
  2000 < 100 && { D: 'dataD'},
  // conditionE && { E: 'dataE'},
  // conditionF && { F: 'dataF'},
  //...

 ].reduce(( v1, v2 ) => ({ ...v1, ...v2 }))
} 
```

或者使用`map()`函数

```
const obj = {
  X: 'dataX',
  Y: 'dataY',
  //...
}

const array = [
  true && { A: 'dataA'},
  false &&  { B: 'dataB'},
  'A' != 'B' && { C: 'dataC'},
  2000 < 100 && { D: 'dataD'},
  // conditionE && { E: 'dataE'},
  // conditionF && { F: 'dataF'},
  //...

 ].map(val => Object.assign(obj, val)) 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2020-06-16T15:14:29.333

定义一个 var`let`并分配新属性

```
let msg = {
    to: "hito@email.com",
    from: "hifrom@email.com",
    subject: "Contact form",    
};

if (file_uploaded_in_form) { // the condition goes here
    msg.attachments = [ // here 'attachments' is the new property added to msg Javascript object
      {
        content: "attachment",
        filename: "filename",
        type: "mime_type",
        disposition: "attachment",
      },
    ];
} 
```

现在`msg`成为

```
{
    to: "hito@email.com",
    from: "hifrom@email.com",
    subject: "Contact form",
    attachments: [
      {
        content: "attachment",
        filename: "filename",
        type: "mime_type",
        disposition: "attachment",
      },
    ]
} 
```

在我看来，这是非常简单易行的解决方案。

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2021-08-07T19:08:32.533

为了完整起见，[`Object.defineProperty()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)如果您想添加额外的[描述符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#description)，您可以使用。请注意，我特意添加`enumerable: true`了该属性，否则该属性将不会出现在`console.log()`. 这种方法的优点是，[`Object.defineProperties()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperties)如果您想添加**多个新属性**，也可以使用（但是，这样每个属性都将依赖于相同的条件......）

```
const select = document.getElementById("condition");
const output = document.getElementById("output");
let a = {};
let b = {};

select.onchange = (e) => {
  const condition = e.target.value === "true";
  condition
    ? Object.defineProperty(a, "b", {
        value: 5,
        enumerable: true,
      })
    : (a = {});

  condition
    ? Object.defineProperties(b, {
        c: {
          value: 5,
          enumerable: true,
        },
        d: {
          value: 6,
          enumerable: true,
        },
        e: {
          value: 7,
          enumerable: true,
        },
      })
    : (b = {});

  outputSingle.innerText = JSON.stringify(a);
  outputMultiple.innerText = JSON.stringify(b);
};
```

```
Condition:
<select id="condition">
  <option value="false">false</option>
  <option value="true">true</option>
</select>
<br/>
<br/>
Single Property: <pre id="outputSingle">{}</pre><br/>
Multiple Properties: <pre id="outputMultiple">{}</pre>
```

# php - 针对用户输入的全面安全性 - PHP、MySQL

> ID：11704270
> 
> 赞同：0
> 
> 时间：2012-07-28T20:07:44.237
> 
> 标签：php, security, xss, code-injection, sanitize

> **可能重复：**
> [使用 PHP 清理用户输入的最佳方法是什么？](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)
> [什么是最好的 PHP 输入清理功能？](https://stackoverflow.com/questions/3126072/what-are-the-best-php-input-sanitizing-functions)
> [终极清洁/安全功能](https://stackoverflow.com/questions/4223980/the-ultimate-clean-secure-function)

**目标**：在进入数据库之前正确清理来自文本框的所有输入，然后将其输出到页面。对于我的用例，我需要在不消除数据输入的情况下防止潜在问题。此外，字符集在 HTTP 标头和 META 标记中都明确设置为 UTF-8，以防止出现格式错误的编码问题。数据库也设置为 UTF-8。

**规格**：PHP、MySQL、Apache

**示例代码**：

```
 function secureinput($input)
    {
       $input = htmlspecialchars($input, ENT_QUOTES ,'UTF-8');
       $input = strip_tags($input); //fail-safe for anything that gets through
       $input = mysql_real_escape_string($input);

       return $input;
    } 
```

**问题**：这仍然容易受到哪些攻击媒介（XSS、SQL 注入等）的攻击？

非常感谢任何可以提供帮助的人。这是我第一次发帖，尽管我总是先求助于 SO 来查找我的问题的答案。不幸的是，这一次我找不到任何其他问题可以回答我的问题，只有一小部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:21:37.163

## XSS 攻击

每当您输出用户输入的内容时，通过使用 htmlspecialchars()，您可以确保您不会受到 XSS 攻击。

## SQL 注入

Steve Friedl 在他的网站上提供了一些 SQL 注入和输入清理限制的示例：[http ://www.unixwiz.net/techtips/sql-injection.html](http://www.unixwiz.net/techtips/sql-injection.html)

即使您的代码***可以通过***mysql_real_escape_string() 免受 SQL 注入攻击，但最好使用参数化 SQL 并完全消除 SQL 注入的风险。如果您在 PHP 中使用 PDO 或 mysqli 而不是已弃用的 mysql 函数，您也会更加安全。

# macos - Apple Automator Applescript 动作给出“无法连接动作”错误

> ID：11704272
> 
> 赞同：1
> 
> 时间：2012-07-28T20:08:04.147
> 
> 标签：macos, applescript, automator

当我尝试从应用程序中运行 Automator 操作时遇到错误。我将其设置为服务。当我从 automator 中运行它时它可以工作，但是当我调用该服务时，它会给我一个对话框错误，内容如下：

```
The action "Run AppleScript encountered an error" 
```

我检查了日志，结果发现完整的错误是：

```
12-07-28 1:03:01.319 PM com.apple.automator.xpc.workflowServiceRunner: Could not connect the action buttonPressed: to target of class NSApplication
12-07-28 1:03:01.319 PM com.apple.automator.xpc.workflowServiceRunner: 2012-07-28 13:03:01.317 WorkflowServiceRunner[77170:1707] Could not connect the action buttonPressed: to target of class NSApplication
12-07-28 1:03:01.319 PM com.apple.automator.xpc.workflowServiceRunner: Could not connect the action buttonPressed: to target of class NSApplication
12-07-28 1:03:01.320 PM com.apple.automator.xpc.workflowServiceRunner: 2012-07-28 13:03:01.318 WorkflowServiceRunner[77170:1707] Could not connect the action buttonPressed: to target of class NSApplication
12-07-28 1:03:01.320 PM com.apple.automator.xpc.workflowServiceRunner: Could not connect the action buttonPressed: to target of class NSApplication
12-07-28 1:03:01.320 PM com.apple.automator.xpc.workflowServiceRunner: 2012-07-28 13:03:01.319 WorkflowServiceRunner[77170:1707] Could not connect the action buttonPressed: to target of class NSApplication
12-07-28 1:03:01.321 PM com.apple.automator.xpc.workflowServiceRunner: Could not connect the action buttonPressed: to target of class NSApplication
12-07-28 1:03:01.321 PM com.apple.automator.xpc.workflowServiceRunner: 2012-07-28 13:03:01.320 WorkflowServiceRunner[77170:1707] Could not connect the action buttonPressed: to target of class NSApplication
12-07-28 1:03:01.358 PM com.apple.automator.xpc.workflowServiceRunner: -[AMApplicationRegistry loadDefinitionAtURL:]: No application name for definition at URL file://localhost/Library/Automator/Office.definition/
12-07-28 1:03:01.358 PM com.apple.automator.xpc.workflowServiceRunner: 2012-07-28 13:03:01.356 WorkflowServiceRunner[77170:1707] -[AMApplicationRegistry loadDefinitionAtURL:]: No application name for definition at URL file://localhost/Library/Automator/Office.definition/
12-07-28 1:03:01.358 PM com.apple.automator.xpc.workflowServiceRunner: -[AMApplicationRegistry _loadDefinitionsAtURLS:]: Failed to load definition at URL file://localhost/Library/Automator/Office.definition/
12-07-28 1:03:01.358 PM com.apple.automator.xpc.workflowServiceRunner: 2012-07-28 13:03:01.357 WorkflowServiceRunner[77170:1707] -[AMApplicationRegistry _loadDefinitionsAtURLS:]: Failed to load definition at URL file://localhost/Library/Automator/Office.definition/
12-07-28 1:03:06.787 PM com.apple.automator.xpc.workflowServiceRunner: WorkflowServiceRunner received error running Workflow Service at /Users/juan/Library/Services/Lookup Citation.workflow: The action “Run AppleScript” encountered an error.
12-07-28 1:03:06.787 PM com.apple.automator.xpc.workflowServiceRunner: 2012-07-28 13:03:06.786 WorkflowServiceRunner[77170:1707] WorkflowServiceRunner received error running Workflow Service at /Users/juan/Library/Services/Lookup Citation.workflow: The action “Run AppleScript” encountered an error. 
```

[你可以在这里](http://cl.ly/IPgg)看到我的工作流程：

它由两部分组成：1）“询问文本”动作 2）“运行 AppleScript”动作，从 1 中获取文本，对其进行处理，然后提示用户“从列表中选择”

同样，当我在 Automator 中运行它时，这一切都有效，但是当我从应用程序中将它作为服务调用时它会失败。

PS：一旦解决了，我希望得到一些帮助，让焦点移到“询问文本”对话框，这样我就可以触发操作并开始输入我的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:14:28.233

不知道它做了什么，但它现在正在工作。

我唯一能想到的是我关闭了Automator。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T22:57:04.473

我最近收到与 Automator 服务相同的错误消息。问题是由于 Automator 在 AppleScript 代码中的“结束运行”之后自动附加“...”。我在 Applescript 编辑器中打开了代码完成功能，因此当编辑器有可能完成建议时会显示 3 个点，并且它也在 Automator 中执行此操作。

出于某种原因，在我关闭 Automator 之后，它在“运行 Applescript”自动操作窗口中的“结束运行”之后附加了这些点。所以这是我脚本的最后一行：“结束运行......”所以我在“运行”之后附加了一个空格，它永久删除了尾随句点，现在服务运行良好。

我不确定这是您遇到的问题，但可能值得检查。（令人沮丧的问题，我知道。）

# c# - debugView 显示没有 stderr 输出

> ID：11704273
> 
> 赞同：0
> 
> 时间：2012-07-28T20:08:05.763
> 
> 标签：c#, dll, stderr, debugview

我在 Win 7 64 位的 VS2010 下运行 debugView。我有调用 ac dll 的 ac# 应用程序。我的 C dll 中有一些 fprintf(stderr) 语句，我的 c# 代码中有一些 Console.Error writeLine 语句，但它们都没有出现在 DebugView 中。在我的 VS2010 中，我尝试将输出写入输出窗口，然后尝试立即窗口，但仍然没有显示。

难道我做错了什么？是否有关于 c# 和排除输出的 dll 的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:02:20.333

这是一个已知问题： [http ://bembengarifin.wordpress.com/2011/01/20/debugtrace-output-is-not-being-captured-by-debugview-when-vs2010-in-debug-mode/](http://bembengarifin.wordpress.com/2011/01/20/debugtrace-output-is-not-being-captured-by-debugview-when-vs2010-in-debug-mode/)

解决方案是编写自己的......不是一个非常吸引人的提议！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:13:36.757

您是否在 Capture 菜单中选择了 Capture Win32 和 Capture Global Win32？

Trace.WriteLine() C# 语句是否输出到调试视图？

# bash - 编写其他调用较少且需要用户输入才能继续的脚本

> ID：11704281
> 
> 赞同：2
> 
> 时间：2012-07-28T20:09:04.860
> 
> 标签：bash

我正在构建一个 bash 脚本，它按顺序运行许多不同的脚本。其中一个脚本 (https://get.rvm.io) 调用`less`并要求用户按下`q`以继续。自动化此的最佳方法是可以与其他脚本顺序运行（理想情况下不需要按“q”）？我目前正在使用以下方法调用脚本：

```
curl -L https://get.rvm.io | bash -s stable --ruby --gems=rails 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T20:33:25.697

尝试这样的事情：

```
curl -L https://get.rvm.io | LESS=-X+Gq bash -s stable --ruby --gems=rails 
```

该`-X`选项可防止终端切换到备用缓冲区。启动时将`+`其余字符作为命令执行`less`。`G`转到文件末尾并`q`退出。

# mysql - WampServer：如何创建新的 MySql 根密码？

> ID：11704282
> 
> 赞同：3
> 
> 时间：2012-07-28T20:09:05.743
> 
> 标签：mysql, wampserver

我从 MySql 中删除了所有用户并被排除在外。我怎样才能从头开始？我尝试删除服务器并重新安装，但显然还有一些文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:14:49.323

您是否尝试过此处提供的说明：

[http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T16:05:08.680

您的答案将只是登录到 localhost/phpmyadmin

如果它询问登录详细信息，只需输入 root 作为用户名，然后输入，您将看到：

在用户选项卡上方单击它，您将看到用户概述：

点击表格最后一行的编辑权限，然后你会看到全局权限检查所有，然后去下面你会看到更改密码，然后选择更改密码

并输入您的密码并单击“开始”，您就完成了：

# python - 在 pip 中拆分需求文件

> ID：11704287
> 
> 赞同：69
> 
> 时间：2012-07-28T20:09:41.463
> 
> 标签：python, syntax, installation, pip, package-management

为了创建 Python 虚拟环境，我使用 virtualenv 和 pip。工作流程非常简单：

```
$ virtualenv project
$ cd project
$ . bin/activate
$ pip install -r /path/to/requirements/req1.txt
$ pip install -r /path/to/requirements/req2.txt 
```

不同需求文件的数量可以增长到足以方便地一次包含它们，所以我宁愿说：

```
$ pip install -r /path/to/requirements/req1_req2.txt 
```

包含`req1_req2.txt`以下内容：

```
include /path/to/requirements/req1.txt
include /path/to/requirements/req2.txt 
```

或以其他方式：

```
$ pip install -r /path/to/requirements/*.txt 
```

这些都不起作用，无论它多么简单，我都不知道如何做我想做的事。

有什么建议吗？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-07-28T20:26:20.450

该`-r`标志不仅限于命令行使用，它也可以在需求文件中使用。因此，`pip install -r req-1-and-2.txt`当 req-1-and-2.txt 包含以下内容时运行：

```
-r req-1.txt
-r req-2.txt 
```

将安装 req-1.txt 和 req-2.txt 中指定的所有内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-09-15T08:37:55.383

请注意，您还可以根据分组拆分需求并将它们嵌入到一个文件中（或者再次可以根据您的环境准备多个需求文件），您可以执行。

比如这里的测试要求：

**要求-test.txt**

```
pylint==2.4.4
pytest==5.3.2 
```

这里的开发要求：

**需求-dev.txt**

```
boto3>=1.12.11 
```

包含您的其他需求的主需求文件：

**要求.txt**

```
-r requirements-dev.txt
-r requirements-test.txt 
```

现在，您只需安装嵌入其他需求的需求文件

```
pip3 install -r requirements.txt 
```

# javascript - 添加到 Safari 中的收藏夹/书签栏 (CMD +D)

> ID：11704289
> 
> 赞同：1
> 
> 时间：2012-07-28T20:09:53.487
> 
> 标签：javascript, jquery, safari, bookmarklet, bookmarks

经过大量研究，我没有发现任何支持 Safari 甚至支持此功能的想法。从 Safari 的 API 数量来看，我无法相信他们不允许将其嵌入到浏览器中。

如果有人对如何在不使用一些实际上不起作用的可怕插件的情况下实现这一点有任何想法，将不胜感激。

到目前为止，我已经使用以下方法处理了主要浏览器：

```
$("#bookmark").click(function() {
  var url = this.href;
  var title = this.title;
  if($.browser.mozilla) {
    window.sidebar.addPanel(title, url,"");
  } else if($.browser.msie || $.browser.webkit) { 
    window.external.AddFavorite(url, title); 
    if($.browser.safari) {
      alert("Balls");
    }
  } else if($.browser.opera ) {
    $(this).attr("href", url);
    $(this).attr("title", title);
    $(this).attr("rel", "sidebar");
    $(this).click();
  } else {
    //alert("Please press CTRL+D and click the link to bookmark it in your browser.");
  }
  return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:20:30.220

不幸的是，Safari 不允许您通过 javascript（以及 IE6/IE8）和其他一些方法添加书签。这是一种打击垃圾邮件/不需要的网站的尝试，将书签添加到您的浏览器 onload。

试试这样的脚本，这几乎是你能做的...

```
$("a.bookmark").click(function(e) {
            if ($.browser.opera == false) {
                    e.preventDefault();
                    var url = this.href;  
                    var title = this.title;

                    if ($.browser.mozilla == true) {
                            window.sidebar.addPanel(title, url, '');
                            return false;
                    } else if($.browser.msie == true) {  
                            window.external.AddFavorite( url, title);
                            return false;
                    } else {
                            alert('Please use CTRL + D to bookmark this website.');
                    }

    }
}); 
```

来自 Apple 论坛的信息 (https://discussions.apple.com/thread/1364657?start=0&tstart=0)

# c# - 在根目录创建树视图

> ID：11704290
> 
> 赞同：0
> 
> 时间：2012-07-28T20:09:57.423
> 
> 标签：c#, algorithm

我正在寻找一种方法来解决一个简单的问题，并找到了这个递归解决方案：[https ://stackoverflow.com/a/674119/536607](https://stackoverflow.com/a/674119/536607)

这很好，但它假设您有一个固定的起始根，然后在其下构建文件结构的其余部分。

我正在尝试提出一种算法，它基本上做同样的事情，除了没有第一个硬编码的根。例如，我有以下文件

```
Data/test.txt
Data/dir/results.txt
Another/image.jpg
file.dat 
```

将导致以下树

```
Data
   test.txt
   dir
      results.txt
Another
   image.txt
file.dat 
```

所以它几乎就像其他解决方案一样，除了我删除顶部根然后将所有内容推回。但我想你真的不能轻易做到这一点（你可以吗？那样会很方便）

这是我正在考虑的算法

*   首先，像往常一样分割路径
*   定义一个新方法，它将检查树视图是否包含一个键等于路径第一部分的节点（因为我们植根于目录）
*   如果存在，则返回该节点。否则，创建节点并返回它
*   现在将节点和其余路径部分传递给另一个方法，该方法将在步骤 3 中找到的节点视为根并从那里开始。

听起来应该可以。对第二步不太清楚，因为如果文件根植于它存储的任何位置怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:48:32.507

写了描述的算法。似乎按预期工作。不过，不太确定路径中没有目录的文件。

有人看到问题吗？

```
// start by getting the root
private void build_file_list(List<Entry> entries)
{
    TreeNode root;
    string[] pathbits;
    for (int i = 0; i < entries.Count(); i++)
    {
        pathbits = entries[i].name.Split(Path.DirectorySeparatorChar);
        root = get_root(pathbits[0]);
        add_path(root, pathbits);
    }
}

// returns existing node or creates a new one as needed
private TreeNode get_root(string key)
{
    if (explorer_view.Nodes.ContainsKey(key))
        return explorer_view.Nodes[key];
    else
        return explorer_view.Nodes.Add(key, key);
}

// now we have our root so we can start building the rest
private void add_path(TreeNode node, string[] pathbits)
{
    for (int i = 1; i < pathbits.Count(); i++)
        node = add_node(node, pathbits[i]);
}

// just recursively build nodes until end of file path
private TreeNode add_node(TreeNode node, string key)
{
    if (node.Nodes.ContainsKey(key))
        return node.Nodes[key];
    else
        return node.Nodes.Add(key, key);
} 
```

# node.js - 从 Node.js 输出到 Chrome 控制台

> ID：11704292
> 
> 赞同：25
> 
> 时间：2012-07-28T20:10:13.377
> 
> 标签：node.js, google-chrome, console

我正在寻找一种将 Node 变量直接输出到 google chrome 浏览器控制台的方法。与 a`console.log()`在客户端工作的方式相同。像[这样的 php](http://code.google.com/p/php-console/)。这将大大加快开发速度。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-11-05T10:29:40.027

注意：由于旧答案（写于 2014 年 9 月）指的是旧版本`node-inspector`，因此我的说明在 2017 年不再相关。此外，文档已经变得更好，所以我更新了我的原始答案：

**节点检查**器是您所需要的。它使用其开发人员工具打开一个 Chrome 实例以进行调试。

它也很容易使用：

**1.**安装

```
$ npm install -g node-inspector 
```

**2.**开始

```
$ node-debug app.js 
```

来源：[https ://github.com/node-inspector/node-inspector](https://github.com/node-inspector/node-inspector)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-19T16:53:19.687

您可能想尝试 NodeMonkey - [https://github.com/jwarkentin/node-monkey](https://github.com/jwarkentin/node-monkey)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-26T10:19:35.207

我知道这是一个老问题，但出现在我的谷歌搜索之上，所以也许有人会发现我的答案很有用。

所以你可以使用`node --inspect-brk index.js`

现在，您所要做的基本上就是`chrome://inspect`在您的 Chrome 地址栏中输入并点击`Open dedicated DevTools for Node`

在现在连接到 Node 的 DevTools 中，您将拥有您习惯使用的所有 Chrome DevTools 功能：

*   完整的断点调试，带黑盒的单步执行

*   转译代码的源映射

*   LiveEdit：使用 V8 的 JavaScript 热插拔评估

*   带有 ES6 功能/对象支持和自定义对象格式的控制台评估

*   使用火焰图采样 JavaScript 分析器

*   堆快照检查、堆分配时间线、分配分析

*   本机承诺的异步堆栈

希望有帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-28T20:17:13.387

我见过的最接近这个的是[Node JS 控制台对象调试检查器](https://github.com/ketamynx/node-codein)

有关用法和潜在问题，请参阅此帖子：http: [//thomashunter.name/blog/nodejs-console-object-debug-inspector/](http://thomashunter.name/blog/nodejs-console-object-debug-inspector/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-21T23:24:55.310

对于通过 ssh-shell (putty)**在 linux 上使用 nodejs 的用户：**

linux-ssh-shell 上的 nodejs 的问题是，您没有连接浏览器。我尝试了所有这些解决方案，但没有让它工作。

所以我用firebase（[https://firebase.google.com](https://firebase.google.com)）制定了一个解决方案，因为我的项目使用了firebase。如果您熟悉 firebase，那么这是一个很好的方法。如果没有，firebase 值得与 nodejs 结合使用——而且它是免费的！

在服务器端脚本（从节点开始）中使用自己的函数 log()：

```
// server-side:
// using new firebase v3 !
var fbRootRef = firebase.database();
var fbConsoleRef = fbRootRef.ref("/console");
var log = function(args) {
  fbConsoleRef.set({'obj': args});
}

// inside your server-code:
log({'key':'value'}); 
```

在客户端，您在此控制台对象上创建一个 firebase-reference：

```
// client side:
fbRootRef.child('/console').on('value', function(d) {
  var v = d.val();
  console.log(v);
}); 
```

现在，使用 log() 函数登录服务器端的所有内容都实时传输到 firebase-database 并从那里触发 client-console-reference 并登录到浏览器控制台。

如果有人需要帮助，我将更详细地解释，并可以提供此日志记录的更扩展版本，其中包含类型（console./log/warn/info），与标题信息分组（即服务器说：（文件名 + 行）。

为您的项目设置 firebase 最多需要 30 分钟，插入控制台功能需要 30 分钟。我认为它值得花时间！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-14T00:03:42.650

您可以使用[bonsole](https://github.com/Bert0324/bonsole)，这是一种在浏览器中记录内容的简单方法。即使在Linux下，也可以去局域网的ip查看。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-31T19:27:26.787

依赖最少的最简单方法是使用 WebSocket 连接将消息发送到浏览器。您可以在 Internet 上找到的任何 WebSocket 示例都足以完成此操作。其他所有内容都需要大量集成到主机系统中，如果您想在远程服务器上实际运行它，则无法正常工作。您也可以通过这种方式直接从浏览器控制台向服务器发送命令。

链接：
[https ://www.npmjs.com/package/websocket](https://www.npmjs.com/package/websocket)
[https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_client_applications](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_client_applications)

# python - 使用 Python 2.x 将 html 源内容转换为可读格式

> ID：11704302
> 
> 赞同：1
> 
> 时间：2012-07-28T20:11:32.660
> 
> 标签：python, html

蟒蛇 2.7

我有一个程序可以从网页的源代码中获取视频标题，但标题是以某种 HTML 格式编码的。

这是我迄今为止尝试过的：

```
>>> import urllib2
>>> urllib2.unquote('&pound;')
'&pound;' 
```

所以那没有用......然后我尝试了：

```
>>> import HTMLParser
>>> h = HTMLParser.HTMLParser()
>>> h.unescape('&pound;')
u'\xa3' 
```

如您所见，这既不起作用，也不起作用两者的任何组合。

我设法找出这`'&pound;'`是一个 HTML 字符实体名称。'\xa3' 我没能找到。

有谁知道如何做到这一点，如何将 HTML 内容转换为 python 中的可读格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:13:07.347

为什么那行不通？

```
In [1]: s = u'\xa3'

In [2]: s
Out[2]: u'\xa3'

In [3]: print s
£ 
```

当谈到取消转义 html 实体时，我总是使用：[http](http://effbot.org/zone/re-sub.htm#unescape-html) ://effbot.org/zone/re-sub.htm#unescape-html 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:15:57.943

视频标题字符串使用[HTML 实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)来编码特殊字符，例如与号和井号。

这是用于[井号](http://en.wikipedia.org/wiki/Pound_sign#Codepoints)(£)`\xa3`的 Python [Unicode 字符文字。](http://docs.python.org/howto/unicode.html#unicode-literals-in-python-source-code)在您的示例中，Python 显示[__repr__()](http://docs.python.org/reference/datamodel.html#object.__repr__) Unicode 字符串，这就是您看到转义的原因。如果你打印这个字符串，你可以看到它代表井号：

```
>>> import HTMLParser
>>> h = HTMLParser.HTMLParser()
>>> h.unescape('&pound;')
u'\xa3'
>>> print h.unescape('&pound;')
£ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T21:28:35.960

`&pound;`是[POUND SIGN](http://www.fileformat.info/info/unicode/char/a3/index.htm)的 html 字符实体，它是 unicode 字符 U+00A3。如果您打印它，您可以看到：

```
>>> print u'\xa3'
£ 
```

当您使用 时`unescape()`，您将字符实体转换为其本机 unicode 字符，这`u'\xa3'`意味着 - 单个 U+00A3 unicode 字符。

如果你想把它编码成另一种格式（例如 utf-8），你可以使用`encode`字符串的方法：

```
>>> u'\xa3'.encode('utf-8')
'\xc2\xa3' 
```

你得到一个代表单个“POUND SIGN”字符的两字节字符串。

我怀疑您对字符串编码的一般工作方式有点不清楚。您需要将字符串从字节转换为 unicode（有关使用 urllib2 执行此操作的一种方法，请参阅[此答案），然后对 html 进行转义，然后（可能）将 unicode 转换为您需要的任何输出编码。](https://stackoverflow.com/a/1020931/1002469)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T20:53:41.583

lxml、BeautifulSoup 或 PyQuery 做得很好。或这些的[组合](https://github.com/starenka/emery/blob/master/emery/page.py#L88)；）

# events - 当 tkinter 在新线程中运行时使用 `event_generate`

> ID：11704303
> 
> 赞同：2
> 
> 时间：2012-07-28T20:11:33.117
> 
> 标签：events, tkinter

我需要为在单独线程中运行的 tkinter 窗口生成虚拟事件。`event_generate`当 tkinter 在主线程中运行并且在另一个线程中生成事件时，从非 gui 线程调用应该是安全的并且运行良好。

出于某种原因，我需要生成事件的语句在主线程中运行（更具体地说，我希望这些语句位于模块的顶层）。

但是，当我`root = Tk(); root.mainloop()`在新线程和`root.event_generate("<<my-event>>")`主线程中进行操作时，会出现堆栈溢出。当我交换线程（`root = Tk(); root.mainloop()`在主线程和`root.event_generate("<<my-event>>")`新线程中）时，一切都会再次运行。

在我尝试生成事件之前，我已经注意 root 是完全构造的（并且也是空闲的）。

任何想法如何让这个设置工作？

（我使用的是 Python 3.2.3）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:19:13.970

自己找到了答案：只`root.mainloop()`放在辅助线程中，保留`root = Tk()`在主线程中。

# ruby-on-rails-3 - 在 Rails 3 上集成 CAS 身份验证

> ID：11704305
> 
> 赞同：0
> 
> 时间：2012-07-28T20:12:26.200
> 
> 标签：ruby-on-rails-3, authentication, model, cas

我已经从这个 github [https://github.com/rubycas/rubycas-client](https://github.com/rubycas/rubycas-client)集成了 RubyCAS-Client它正在工作并启动我的 CAS 服务器进行身份验证......但我遇到的问题是在插入**before_filter CASClient::Frameworks之后::Rails::Filter**在我的 application_controller.rb 上，我的模型不工作，我无法从我的模型中添加/编辑/删除东西。

我的 Rails 版本是 3.2.6，而 ruby​​ 版本是 1.8.7。

对这个问题有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:50:57.913

在 ruby​​cas/rubycas-client 自述文件的“安装”下，它说：

注意：为了与 Rails 3 兼容，请查看 [http://github.com/zuk/rubycas-client-rails](http://github.com/zuk/rubycas-client-rails)

编辑：该项目已移至[http://github.com/rubycas/rubycas-client-rails](http://github.com/rubycas/rubycas-client-rails)

# javascript - 如何在 JS 中包含文件或 PHP 代码？

> ID：11704307
> 
> 赞同：1
> 
> 时间：2012-07-28T20:12:41.547
> 
> 标签：javascript, jquery, include

如何包含代码，例如使用 Javascript？或者如果不能这样做，我如何包含整个 PHP 文件？

PS 找到了一些名为“require”或“include”的脚本，但我更喜欢两行代码而不是一个庞大的库（尽管使用 jQuery）。如果做不到，请告诉我，我会试着想点别的。

编辑：

好的，我想做的一个例子：

```
function foo() { if(x = 1) return 1; else return 0; } 
```

然后，如果函数返回 1，我想将 HTML/PHP 代码添加到 DIV 标记，或者我想包含一个包含该代码的 PHP 文件。

编辑＃2：

只有 HTML 怎么样？

```
document.getElementById('test').innerHTML = '<a href="google.com">a cool link</a>'; 
```

这似乎也不起作用。

我的代码中有一个 id="test" 的空 div 标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:22:26.657

```
function foo() { 
  if(x = 1) {$("#divid").load("somephp.php");return 1;} 
  else return 0; 
} 
```

或者

```
if (foo()) $("#divid").load("somephp.php"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:18:10.547

Javascript 可以调用任何文件，只要它在您的服务器上。
出于明显的安全原因，它不能调用用户本地文件上的文件。

然而，javascript 不能，也永远不能调用 PHP 代码，因为它不能执行 php 代码。这是因为由于 javascript 是客户端，用户可以在您的页面上调用他们自己的 javascript，并执行 PHP 代码，并可能会弄乱您的网站或浏览您的后端。

但是，您可以使用 javascript 将 HTML 代码添加到您的页面，相当简单地使用 DOM 元素或 JQuery 的 innerHTML 属性。
如果您愿意，Javascript 还可以调用更多的 javascript 代码，使用 eval()

如果您想使用 javascript 将文件从服务器调用到页面上，则必须使用**AJAX**

谷歌一下，你可以从头开始编码，或者使用 JQuery 方便的 AJAX 处理程序。

假设您有一个 php 文件 myfile.php，其中包含一些 html/php，并且您想将其插入到 id 为“mydiv”的 div 中，或者在 css 中，“#mydiv”

如果您只想快速加载 html /php 并将其推送到 div 中：

```
$("#mydiv").load("myfile.php"); 
```

如果您想最大限度地控制来自 html/php 文件的响应：

```
$.ajax({
    url: "myfile.php", // url to load
    success : function(data) { // on success function
        // data is the response of the ajax request, the response text
        // you can manipulate it here
        manipulateData(data);
        $('#mydiv').html(data); // set the html of the div
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T20:19:12.830

Javascript 可以包含的唯一文件是 Javascript 文件，无论扩展名是什么。唯一的方法是使用

```
<script src="path/to some/file.ext"></script> 
```

您应该注意该文件应该是 javascript 文本内容，否则可能会产生错误。

# c# - 如何从另一个解决方案打开自定义 DLL 文件/类？

> ID：11704308
> 
> 赞同：2
> 
> 时间：2012-07-28T20:12:49.977
> 
> 标签：c#, visual-studio-2010

如何打开从另一个项目/解决方案创建的 DLL 类/文件？

例如：我在引用的 DLL 中有一个类“AClass”。在调试项目时，我可以在我的项目中放置一个断点，然后进入 DLL 的类并查看变量并插入断点。但是，我需要一段时间才能通过单步执行代码来达到我真正想要的类（AClass）。有没有办法在解决方案中打开 AClass 文件并从那里插入断点，而不必逐步通过类来到达它？

我一直无法找到可以做到这一点的地方，但这似乎是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:16:13.167

推荐的方法是将 DLL 项目添加到您的解决方案中。项目旨在用于多种解决方案。

一旦 DLL 项目在解决方案中，您可以在主项目中添加一个“项目引用”。

通过这种方式，您可以在引用解决方案的 DLL 项目中设置断点。

# delphi - 如何在没有范围检查错误的情况下从字节“构建”一个负 32 位整数？

> ID：11704309
> 
> 赞同：4
> 
> 时间：2012-07-28T20:12:52.310
> 
> 标签：delphi, delphi-7, type-conversion

我需要将 21 位有符号整数（以三个 7 位字符提供）转换为 32 位有符号整数。我正在尝试使下面的功能起作用。如果我将 outval 定义为整数，则会对“outval := outval or $FFF00000”语句进行范围检查。如果我将 outval 更改为 longword，则会对“Val21bit := outval”进行范围检查。范围检查仅在值为负时进行。

除了关闭围绕作业的范围检查之外，是否有任何“正确”的方法来完成这项工作？

```
function Val21bit(sx:string):integer;       {Input of 3 character string, Vh, Vm, Vl}
var
  outval : longword; // define as Longword to allow or-ing in high bit
{        valueH : 0scccccc
         valueM : 0bbbbbbb
         valueL : 0aaaaaaa
         int    : ssssssss sssscccc ccbbbbbb baaaaaaa  }

begin
     outval := byte(sx[1]);                             //  00000000 00000000 00000000 0scccccc       highest order first
     outval := (outval shl 7) or ($7F and byte(sx[2])); //  00000000 00000000 00sccccc cbbbbbbb
     outval := (outval shl 7) or ($7F and byte(sx[3])); //  00000000 000scccc ccbbbbbb baaaaaaa
     if (outval and $00100000) <> 0 then                //              ^     if sign bit is high, fill in to left
         outval := outval or $FFF00000;                 //  ssssssss sssscccc ccbbbbbb baaaaaaa
     Val21bit  := outval;
end; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T23:35:55.363

是的，只需明确类型转换：

```
 Val21bit  := Integer(outval); 
```

# xcode - Xcode 4.3：IBOutlet 的重复连接

> ID：11704316
> 
> 赞同：3
> 
> 时间：2012-07-28T20:14:04.030
> 
> 标签：xcode, connection, storyboard, iboutlet

我正在使用 Xcode 4.3.3 学习斯坦福 CS193p 课程。我认为下面的屏幕截图非常不言自明。但无论如何我都会用文字来描述这个问题。

我将 UILabel 从情节提要控制拖动到相应的实现文件以制作 IBOutlet @property。然后，当单击编辑器左侧显示行号的实心圆圈时，我看到显示了两个连接。我不知道如何删除它。

此外，我在故事板的 UIlabel 连接检查器中只看到一个连接。

更奇怪的是，当我尝试在公共 preperty 的设置器中设置 UILabel 的文本时，它无法更新标签的文本：

```
 -(void) setQuestion:(NSString *)question
 {
     _question = question;
     self.questionLabel.text = question;
     NSLog(@"The quesion is %@",question);
     NSLog(@"The quesion label text is %@",self.questionLabel.text);
 } 
```

我使用两个 NSLog 进行调试并得到以下信息。它显示 NSString *question 是 @"What do you want your label to say?"，但 self.questionLabel.text 为空。赋值失败。我怀疑这与上面提到的重复连接有关。

> 2012-07-29 04:03:53.817 厨房水槽[18628:f803] 问题是你想让你的标签说什么？
> 2012-07-29 04:03:53.820 Kitchen Sink[18628:f803] 问题标签文本为 (null)

以下是显示重复连接的屏幕截图。我可能遗漏了一些明显的东西，请帮忙。

![在此处输入图像描述](../Images/8da26a1817256e83c5620270f6eb7083.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T03:27:17.197

我会追究到 Xcode 故事板的怪癖。

首先，尝试清理项目并重新构建。

如果您仍然有这个问题，请手动定义 @property 而无需通过执行以下操作从 AskerViewController 视图拖动到 AskerViewController 实现 (.m) 文件。

在 AskerViewController 的实现 (.m) 文件的接口部分中剪切 IBOutlet @property 行。单击情节提要中的标签。断开该标签与 AskerViewController 的任何绑定。清理项目。然后，粘贴回属性，并从标签控制拖动到情节提要文件中 AskerViewController 视图底部的视图控制器球体。

# javascript - 获取 INVALID_CHARACTER_ERR：DOM 异常 5

> ID：11704320
> 
> 赞同：2
> 
> 时间：2012-07-28T20:14:51.193
> 
> 标签：javascript, dom, domexception

我正在写一个简单的待办事项清单。用户输入文本并将其添加为`checkbox`. 但我收到这个错误我不知道它是怎么回事

> ```
> INVALID_CHARACTER_ERR: DOM Exception 5 
> ```

```
window.onload = function(){
    var textBox = document.getElementById("taskInput"),
        submitBtn = document.getElementById("submit"),
        taskPool = document.getElementById("todoTask");

    submitBtn.addEventListener("click", function(){
        var task = document.createElement("<input type=\"checkbox\">" + textBox.value + "</input>");
        taskPool.appendChild(task);
    });

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T20:18:40.943

[document.createElement](https://developer.mozilla.org/en/DOM/document.createElement)仅将标签名称作为其参数，您必须在之后设置类型和值

```
var task = document.createElement("input")
task.type = "checkbox";
task.value = textBox.value; 
```

输入标签也为空，没有结束标签或内部 html，该值被设置为标记中的属性。

# c++ - c++ 反向迭代器和特征

> ID：11704321
> 
> 赞同：1
> 
> 时间：2012-07-28T20:14:57.480
> 
> 标签：c++, eigen

我一直在使用 JF Sebastian[实现](https://stackoverflow.com/a/11681092/189035)的两个排序数组的 k 阶统计并取得了一些成功。

基本上，该算法将长度为 la 和 lb 的两个排序数组 A 和 B 作为输入，并以 log(la)+log(lb) 次返回它们并集的第 k^th 大元素。

但是，在我的应用程序中，在某些情况下 A 将按降序排序。幸运的是，我提前知道这些情况是什么。所以我总是可以这样做：

（`A.data()`并且`A.data()+A.size()`分别是 A.begin() 和 A.end() 的特征构造）。

```
if(normal case){               
   sol=nsmallest(A.data(),A.data()+A.size(),B.data(),B.data()+B.size(),k,std::less<float>());
   std::cout << sol << std::endl;
} 
```

以及 A 按降序排序的情况：

```
if(case with reverted sorted A){
   std::reverse(A.data(),A.data()+A.size());                    
   sol=nsmallest(A.data(),A.data()+A.size(),B.data(),B.data()+B.size(),k,std::less<float>());
   std::cout << sol << std::endl;
} 
```

这有效 [ :) ] 但看起来过于复杂 [ :( ] 并且（我怀疑）效率低下，特别是因为我需要在最后将 A 恢复为原始顺序。

我试图用`std::reverse`上面替换

```
typedef std::vector<float>::iterator iter_int; 
```

……

```
iter_int begin (x.segment(0,i).data());                                                         
iter_int end (x.segment(0,i).data()+x.segment(0,i).size());                                              
std::reverse_iterator<iter_int> rev_end(begin);     
std::reverse_iterator<iter_int> rev_iterator(end); 
```

但这会导致 g++ 畏缩：

```
error: no matching function for call to ‘nsmallest(std::reverse_iterator<__gnu_cxx::__normal_iterator<float*, std::vector<float> > >&, std::reverse_iterator<__gnu_cxx::__normal_iterator<float*, std::vector<float> > >&, Eigen::PlainObjectBase<Eigen::Matrix<float, -0x00000000000000001, 1> >::Scalar*, Eigen::PlainObjectBase<Eigen::Matrix<float, -0x00000000000000001, 1> >::Scalar*, int&, std::less<float>)’
nosix.cpp:62:93: note: candidate is:
nosix.cpp:19:5: note: template<class RandomIterator, class Compare> typename std::iterator_traits<_InputIterator>::value_type nsmallest(RandomIterator, RandomIterator, RandomIterator, RandomIterator, std::size_t, Compare) 
```

我不知道如何解决它。

但这并没有给出预期的结果：！

```
#include <algorithm>
#include <fstream>
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <vector>
#include <cassert>
#include <iterator>

#include <Eigen/Dense>
using namespace Eigen;
using Eigen::VectorXf;
using Eigen::VectorXi;
typedef std::vector<float>::iterator iter_int;   
template<class RandomIterator,class Compare>
typename std::iterator_traits<RandomIterator>::value_type
nsmallest(RandomIterator firsta,RandomIterator lasta,RandomIterator firstb,RandomIterator lastb,size_t n,Compare less) {
    assert(n<static_cast<size_t>((lasta-firsta)+(lastb-firstb)));
    if (firsta==lasta) return *(firstb+n);
    if (firstb==lastb) return *(firsta+n);

    size_t mida=(lasta-firsta)/2;
    size_t midb=(lastb-firstb)/2;
    if ((mida+midb)<n)
        return less(*(firstb+midb),*(firsta+mida))?
        nsmallest(firsta,lasta,firstb+midb+1,lastb,n-(midb+1),less):
        nsmallest(firsta+mida+1,lasta,firstb,lastb,n-(mida+1),less);
    else
        return less(*(firstb+midb),*(firsta+mida))?
        nsmallest(firsta,firsta+mida,firstb,lastb,n,less):
        nsmallest(firsta,lasta,firstb,firstb+midb,n,less);
}
int main(){  
    int p,q,n,k,l;
    float sol;
    std::cout << "enter p " << std::endl;
    std::cin >> p; 
    std::cout << "enter q " << std::endl;
    std::cin >> q;
    n=p+q;
    std::cout  << " enter k (>=) " << std::min(p,q) << " & <= " << n-1 << std::endl;
    std::cin >> k;

    srand(time(NULL));
    VectorXf v1=VectorXf::Random(p);
    srand(time(NULL));
    VectorXf v2=VectorXf::Random(q);
    VectorXf v3(n);
    v3 << v1, v2; //eigen-concatenation of vectors
    std::sort(v3.data(),v3.data()+v3.size()); 
    std::sort(v1.data(),v1.data()+v1.size(),std::greater<float>());
    std::sort(v2.data(),v2.data()+v2.size());
    //this gives the intended result:
    std::reverse(v1.data(),v1.data()+v1.size());   
    //this doesn't :(
    /*
    iter_int begin (v1.data()); 
    iter_int end (v1.data()+v1.size());  
    std::reverse_iterator<iter_int> rev_end(begin); 
    std::reverse_iterator<iter_int> rev_iterator(end); 
    sol=nsmallest(rev_iterator,rev_end,v2.data(),v2.data()+v2.size(),k,std::less<float>()); 
    /**/
    sol=nsmallest(v1.data(),v1.data()+v1.size(),v2.data(),v2.data()+v2.size(),k,std::less<float>());
    //if it works, these two should return the same.
    std::cout << sol << std::endl;  
    std::cout << v3(k) << std::endl;
    return 0;  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T20:59:03.390

您的`nsmallest`函数要求前 4 个参数的类型完全相同。

试试这个：

```
template<class RandomIteratorA, class RandomIteratorB, class Compare>
typename std::iterator_traits<RandomIteratorA>::value_type
nsmallest(RandomIteratorA firsta,RandomIteratorA lasta,RandomIteratorB firstb,RandomIteratorB lastb,size_t n,Compare less) {
...
} 
```

# xcode - 如何检查 AVPlayer 是否有视频或只有音频？

> ID：11704322
> 
> 赞同：7
> 
> 时间：2012-07-28T20:15:15.590
> 
> 标签：xcode, audio, video, avplayer

我尝试播放一些“媒体”，但在 AVPlayer 启动时我不知道它是音频还是视频。

我连接了播放器层，它工作正常。

```
self.avPlayerLayer = [AVPlayerLayer playerLayerWithPlayer:[[PCPlayerManager sharedManager] audioPlayer]];
avPlayerLayer.videoGravity = AVLayerVideoGravityResizeAspect;
avPlayerLayer.frame = CGRectMake(0, 0, videoView.frame.size.width, videoView.frame.size.height);
[videoView.layer addSublayer:avPlayerLayer]; 
```

但是如何检查是否有视频，以便添加/删除一些选项？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-25T10:04:55.197

来自 Apple 的示例代码项目 AVSimplePlayer：

```
// Set up an AVPlayerLayer according to whether the asset contains video.
if ([[(AVAsset *)asset tracksWithMediaType:AVMediaTypeVideo] count] != 0) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-08T20:23:18.587

对于 Swift 4.2，您可以执行以下操作：

```
func isAudioAvailable() -> Bool? {
   return self.player?._asset?.tracks.filter({$0.mediaType == AVMediaType.audio}).count != 0   
}

func isVideoAvailable() -> Bool? {
   return self.player?._asset?.tracks.filter({$0.mediaType == AVMediaType.video}).count != 0   
} 
```

或作为扩展

```
extension AVPlayer {
    var isAudioAvailable: Bool? {
        return self._asset?.tracks.filter({$0.mediaType == AVMediaType.audio}).count != 0
    }

    var isVideoAvailable: Bool? {
        return self._asset?.tracks.filter({$0.mediaType == AVMediaType.video}).count != 0
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T13:05:18.120

我不确定但`AVPlayerItem`有以下数组`[mPlayerItem.asset.tracks]`它包含两个对象，一个用于视频，另一个用于音频。按如下方式访问它以`[mPlayerItem.asset.tracks objectAtIndex:0]`获取视频和`[mPlayerItem.asset.tracks objectAtIndex:1]`音频。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-28T07:09:28.757

**更新：** sean-stayns 在 Swift 5.5 中的回答

```
extension AVPlayer {
    var isAudioAvailable: Bool? {
        return self.currentItem?.asset.tracks.filter({$0.mediaType == .audio}).count != 0
    }

    var isVideoAvailable: Bool? {
        return self.currentItem?.asset.tracks.filter({$0.mediaType == .video}).count != 0
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-06T21:34:44.307

我发现了这个更好的解决方案

```
func isVideoAvailable(item: AVPlayerItem) -> Bool {
        for video in item.tracks {
            if video.assetTrack?.mediaType == .video {
                return true
            }
        }
        return false
} 
```

和这个

```
 if currentItem.tracks.contains(where: { track in
     track.assetTrack?.mediaType == .video
  }) {

     // This Code goes Here!
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-14T23:11:25.277

这帮助了我：

```
 // source from https://stackoverflow.com/a/55581216 Changed for last release AVFoundation
    func isAudioAvailable() -> Bool? {
        return self.player.currentItem?.tracks.filter({$0.assetTrack!.mediaType == AVMediaType.audio}).count != 0
    }

    func isVideoAvailable() -> Bool? {
        return self.player.currentItem?.tracks.filter({$0.assetTrack!.mediaType == AVMediaType.video}).count != 0
    } 
```

# symfony - Symfony2缓存清除坏与sh

> ID：11704323
> 
> 赞同：0
> 
> 时间：2012-07-28T20:15:21.897
> 
> 标签：symfony, sh, runtimeexception

清除共享服务器上的 symfony2 缓存：

```
php app/console cache:clear --env=prod 
```

给我一个带有错误的红色框：

```
[RuntimeException]
sh:  :  command not found 
```

它曾经在服务器上工作过，不知道发生了什么变化以及如何纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:42:42.310

我建议：

1.  检查是否`app/console`具有执行权限
2.  检查`php`是否别名为正确`php5-cli`或您使用的任何内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:14:27.953

这是我的parameters.ini。我不确定到底是什么，因为我更改了几行。

# intellij-idea - 如何在 IntelliJ IDEA 中每次保存后自动优化导入

> ID：11704327
> 
> 赞同：109
> 
> 时间：2012-07-28T20:15:52.117
> 
> 标签：intellij-idea, ide

我想了解如何**在每次保存后自动优化导入，**就像我们做 Eclipse（*保存操作*）一样。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-07-28T20:36:56.163

IntelliJ IDEA 提供动态**优化导入**的选项`Settings`| `Editor`| `General`| `Auto Import`并在对话框中**优化导入选项。**`Commit Project`

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2014-12-30T13:22:26.430

提到的答案有效，但 JetBrains 插件存储库中还提供了 Intellij“保存操作”插件（以及其他功能）：**[Intellij Save Actions Plugin](https://plugins.jetbrains.com/plugin/7642?pr=idea_ce)**。

**安装**

文件>设置>插件>浏览存储库...>搜索“保存操作”>类别“代码工具”

**免责声明**

我是插件开发者

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-11-19T06:14:02.447

*第一步：*

```
CTRL + SHIFT + A or CMD + SHIFT + A (for mac) 
```

*第二步：*

搜索优化导入

*第三步：*

打开选项

[![在此处输入图像描述](../Images/d38a468de5666689ee693ecda8d80b61.png)](https://i.stack.imgur.com/tYQzk.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-26T23:28:38.060

在“Ultimate 2016.2”版本中是：

文件 > 其他设置 > 默认设置 > 自动导入 > 动态优化导入

# c# - 在 SQL Server 中将复选框的值存储为 0 或 1

> ID：11704331
> 
> 赞同：0
> 
> 时间：2012-07-28T20:16:27.870
> 
> 标签：c#, asp.net, sql-server, c#-4.0

我有四个这样的复选框，

```
<asp:CheckBoxList ID="CheckBoxList1" runat="server" 
                onselectedindexchanged="CheckBoxList1_SelectedIndexChanged" Width="190px">
                <asp:ListItem>Programming Contests</asp:ListItem>
                <asp:ListItem>Seminars/Workshops</asp:ListItem>
                <asp:ListItem>Social Gatherings</asp:ListItem>
                <asp:ListItem>Tech Support</asp:ListItem>
</asp:CheckBoxList> 
```

我想将这些复选框的值存储为表中的 0 或 1。此外，可能存在用户选择多个复选框的情况，如何处理？我在数据库中使用了“位”数据类型。但是我遇到的困惑是如何将这些复选框的**值存储为数据库中的 0 或 1？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:23:58.330

这真的很简单。您需要做的就是为您的数据库中的每个选项创建一个位字段。我没有看到任何其他合乎逻辑的方法。

从复选框返回的真或假值在 C# 中称为布尔值。布尔值在数据库中存储为将 true 转换为 1 和 false top 0 的位。

**编辑**：

如果您打算扩展选项，我会推荐以下内容。您可以创建一个包含所有选项的表并为其设置代码。然后创建一个链接表，其中将包含人员和他们想要的选项。如果用户选择多个选项，它们将被多次放入表中（每个选项一次）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:29:21.917

你可以试试这个：表格“checkboxlist”，其中包含字段 Id、描述来保存复选框列表项。然后让您的表格与用户选择的项目：表格“Checkboxanswers”，其中字段“checkboxitemId”是“checkboxlist”的id字段的外键，然后添加另一个位字段以指示它是否被选中.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T20:37:31.093

```
protected void CheckBoxList1_SelectedIndexChanged(object sender, EventArgs e)
{
  List<int> checkList = new List<int>();
  foreach (ListItem item in CheckBoxList1.Items)
  {
     if (item.Selected)
     {
        checkList.Add(1);
     }
     else
     {
        checkList.Add(0);
     }

     //Now you can use this list to pass it to Sql
  }
} 
```

# c++ - getprocaddress 的类似功能使用结构？

> ID：11704333
> 
> 赞同：1
> 
> 时间：2012-07-28T20:16:37.007
> 
> 标签：c++, dll, struct, code-injection, getprocaddress

我有一个来自游戏的 DLL，我要导入到 windows32 应用程序中，我已经成功加载它并调用了很多函数。但是，我需要使用的某个功能需要传递给它的结构。

似乎当我反汇编 DLL 时，我可以看到结构中的结构和数据类型，但是我将如何使用这个结构呢？

AFAIK GetProcAddress 不起作用？

我正在寻找一种使用这个结构的方法。

```
 *(_DWORD *)this = tagRX_GLOBAL___vftable_;
    RX__g_pGlobal = (struct tagRX_GLOBAL *)this; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:53:33.213

我建议您添加一个简单的函数，该函数将返回结构的地址。功能很好`GetProcAddress`。

# cakephp - 在 CakePHP 中，如何对特定文本文件进行以下操作并缓存它？

> ID：11704335
> 
> 赞同：0
> 
> 时间：2012-07-28T20:17:02.593
> 
> 标签：cakephp, caching, str-replace

基本上目前我有一个用另一种语言的脚本编写的文本文件。它将作为元素存储，并在需要时调用以作为文本提供。

我想使用以下内容操作此文件：

1.  将所有现有变量替换为存储该变量名称的 php 数组值。所以如果变量看起来像#foo，它就变成了$variables['foo']。
2.  从整个文件中创建一个数组，使每一行成为数组中的一行。

结果是这样的

```
return array(
  'first line of code which has a variable called ' . $variables['foo'] . 'in it',
  'second line...'
); 
```

最简单的方法是什么，有没有办法缓存这个过程，或者我应该把新文件保存并存储在我可以访问的地方吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:47:38.767

1.  使用`str_replace()`（文档：[php.net](http://php.net/manual/en/function.str-replace.php)）替换所有出现

2.  `explode()`按以下方式使用：[如何将字符串放入数组中，以换行符分割？](https://stackoverflow.com/questions/1483497/how-to-put-string-in-array-split-by-new-line)

缓存。
我建议你使用内置的 CakePHP 助手[视图缓存。](http://book.cakephp.org/2.0/en/core-libraries/helpers/cache.html)
要区分不同变量名称的不同缓存，请确保使用可区分变量名称的参数调用控制器函数。例如：

```
public function generate_script($varname){
    // some code
} 
```

如果在调用控制器方法时不知道区分变量（但例如在控制器方法内部确定），您应该查看[缓存 API](http://book.cakephp.org/2.0/en/core-libraries/caching.html#cache-api)

# java - Java Cli 命令行解析器

> ID：11704338
> 
> 赞同：3
> 
> 时间：2012-07-28T20:17:35.977
> 
> 标签：java, command-line-arguments

我正在尝试使用 Java cli commanlineparser 来解析以下参数，

```
java -OC:\mydirectory -NMyfile 
```

选项 -O 用于目录，-N 用于文件名。

我一直在网上寻找，但找不到一个很好的例子，这就是我想要做的，

```
Option option = new Option()
option.addOpton("O",true, "output directory)
option.addOpton("N",true, "file name)
...
CommandLineParser parser = new BasicParser();
...
if (cmd.hasOption("O")
... 
```

基本上，我正在尝试添加多个选项并能够解析它们。这是使用上述选项运行程序的正确方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:30:57.797

尝试以下操作：

```
...
Option opt1 = OptionBuilder.hasArgs(1).withArgName("output directory")
    .withDescription("This is the output directory").isRequired(true)
    .withLongOpt("output").create("O");

Option opt2 = OptionBuilder.hasArgs(1).withArgName("file name")
    .withDescription("This is the file name").isRequired(true)
    .withLongOpt("name").create("N")

Options o = new Options();
o.addOption(opt1);
o.addOption(opt2);
CommandLineParser parser = new BasicParser();

try {
  CommandLine line = parser.parse(o, args); // args are the arguments passed to the  the application via the main method
  if (line.hasOption("output") {
     //do something
  } else if(line.hasOption("name") {
     // do something else
  }
} catch(Exception e) {
  e.printStackTrace();
}
... 
```

*此外，您应该在命令行中的参数和值之间留一个空格。*

# php - PHP 致命错误：我正在尝试在 Symfony2 应用程序中实现 Form\AbstractType

> ID：11704340
> 
> 赞同：8
> 
> 时间：2012-07-28T20:17:52.333
> 
> 标签：php, symfony, namespaces

我收到以下错误：

```
Fatal error: Declaration of Bean\OauthServerBundle\Form\Type\AuthorizeFormType::buildForm() must be compatible with Symfony\Component\Form\FormTypeInterface::buildForm(Symfony\Component\Form\FormBuilderInterface $builder, array $options) in src/Bean/OauthServerBundle/Form/Type/AuthorizeFormType.php on line 25 
```

不知道为什么我会收到此错误。AbstractType::buildForm() 采用 FormBuilderInterface，Symfony2 为 FormBuilder 实现 FormBuilderInterface。

这是我的来源的内容：

```
<?php
namespace Bean\OauthServerBundle\Form\Type;

use Symfony\Component\Form\FormBuilder;
use Symfony\Component\Form\AbstractType;

class AuthorizeFormType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        /* some code ... */
   }

   /* more code ... */
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T20:37:38.477

> FormBuilderInterface，Symfony2 为 FormBuilder 实现了 FormBuilderInterface。

这并没有改变事实，`buildForm`必须在父类中声明并接受任何实现的对象`FormBuilderInterface`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-20T22:13:23.103

所以 symfony book 中的代码应该是这样的：

```
namespace Bean\OauthServerBundle\Form\Type;

use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\Form\AbstractType;

class AuthorizeFormType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        /* some code ... */
   }

   /* more code ... */
} 
```

你是这个意思吗？

# python - 比较 dateutil.relativedelta

> ID：11704341
> 
> 赞同：7
> 
> 时间：2012-07-28T20:18:02.923
> 
> 标签：python

我正在尝试在两个相对增量之间进行“>”比较：

```
if(relativedelta(current_date, last_activity_date) > relativedelta(minutes=15)): 
```

这是 Eclipse 中调试器窗口的输出：

[![调试窗口](../Images/3b8a18d5be7711cd2bf58087c0ce779b.png)](https://i.stack.imgur.com/Tddqy.png)

其中一个相对增量只有 15 分钟——远小于另一个。为什么这个比较返回 false 而不是如预期的那样？什么是更好的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T20:25:39.773

`dateutil.relativedelta`没有`__cmp__`明智地实现，因此无法比较实例。这个问题有一个[开放的错误](https://bugs.launchpad.net/dateutil/+bug/969928)；说 29 天或 1 个月是否更大没有意义的论点，因此整个事情都依赖于 python 的默认比较对我来说似乎有点站不住脚，但这只是一种观点。

根据您实际在做什么，使用`datetime.timedelta`可能是更好的解决方案。

# c - 为什么当大小大于 8192 字节时 realloc() 不起作用？

> ID：11704346
> 
> 赞同：0
> 
> 时间：2012-07-28T20:18:40.410
> 
> 标签：c, memory, heap-memory

```
 typedef struct {
      void *elems;//address of the memory block
      int elemSize; //
      int logicLen;//number of existing elements in vector
      int allocLen;//allocated space for the vector
  } vector;

  static void InsertNumbers(vector *numbers, long n, long d)
  {
    long k;
    long residue;

    for (k = 0; k < d; k++) {
      residue = (long) (((long long)k * (long long) n) % d);
      VectorAppend(numbers, &residue);
    }
  }

void VectorAppend(vector *v, const void *elemAddr)
{
   void *target=(char*)v->elems + (v->logicLen * v->elemSize);

   if(v->logicLen==v->allocLen){
    v->allocLen*=2;
    v->elems=realloc(v->elems,v->allocLen*v->elemSize);
    assert(v->elems!=NULL);
   }
   memcpy(target,elemAddr,v->elemSize);
   v->logicLen++;
} 
```

然后，我用下面这句话来调用 InsertNumbers()

```
vector aVector;
VectorNew(&aVector, sizeof(long),4);
long first=139269,second=3021377;
InsertNumbers(&aVector,first , second); 
```

好像3021377太大了……在`v->elems=realloc(v->elems,v->allocLen*v->elemSize);`我发现当v->allocLen=4096时，程序崩溃并说：这可能是由于堆的损坏为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T20:22:28.113

这不是您发布的代码的问题，这是其他地方的问题。

发生的情况是*您的程序*损坏了堆，然后`realloc`检测到堆已损坏。

您将需要按如下方式检测损坏：

1.  确保启用调试符号

2.  通过 Valgrind 运行你的程序

**编辑：**您添加的代码中存在严重错误。

```
void VectorAppend(vector *v, const void *elemAddr)
{
    void *target = (char *) v->elems + v->logicLen * v->elemSize;

    if (v->logicLen == v->allocLen) {
        v->allocLen *= 2;
        // Once you call 'realloc', the value of 'elems' might change
        // This means that 'target' is now INVALID
        // 'target' is based on the old value of 'elems'
        v->elems = realloc(v->elems,v->allocLen*v->elemSize);
        assert(v->elems != NULL);
    }
    memcpy(target, elemAddr, v->elemSize);
    v->logicLen++;
} 
```

要修复它，请将计算移至`target`重新分配下方：

```
void VectorAppend(vector *v, const void *elemAddr)
{
    if (v->logicLen == v->allocLen) {
        v->allocLen *= 2;
        v->elems = realloc(v->elems,v->allocLen*v->elemSize);
        assert(v->elems != NULL);
    }
    void *target = (char *) v->elems + v->logicLen * v->elemSize;
    memcpy(target, elemAddr, v->elemSize);
    v->logicLen++;
} 
```

**另一个错误：**您的评论中有错误，这是代码的一部分，我建议认真对待评论。

```
VectorNew(&aVector, sizeof(long), 4); // allocate 4*4 bytes 
```

注释不应该说“分配 4*4”字节，因为这会产生误导：有一天你会在非 Windows 的 64 位系统上编译程序，它将是 8x4 字节。你最好删除评论并阅读代码。

# objective-c - AC3 音频 FramesPerPacket 大小

> ID：11704351
> 
> 赞同：0
> 
> 时间：2012-07-28T20:19:22.730
> 
> 标签：objective-c, ios, audioqueueservices, audioqueue

我确实以以下方式创建音频队列

```
AudioQueueNewOutput(&audioFormat, audioQueueOutputCallback, (__bridge void*)self, NULL, NULL, 0, &mAudioQueue) 
```

格式如下

```
audioFormat.mFormatID = kAudioFormatAC3;                
audioFormat.mBytesPerPacket = 0;
audioFormat.mFramesPerPacket = mavfContext->streams[audio_index]->codec->frame_size;
audioFormat.mBytesPerFrame = 0;
audioFormat.mChannelsPerFrame = mavfContext->streams[audio_index]->codec->channels;
audioFormat.mBitsPerChannel = 0; 
```

创建失败并出现 kAudioFormatUnsupportedDataFormatError。我检查过它`mavfContext->streams[audio_index]->codec->frame_size`是 0。那么 ac3 媒体的 mFramesPerPacket 是否有任何标准值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:06:34.750

AC3 帧大小应为 256 * 个通道，因此我希望在这里：

`mFramesPerPacket = 256 * mChannelsPerFrame`.

# bash - bash：在也使用 read 的循环内嵌套交互式读取

> ID：11704353
> 
> 赞同：6
> 
> 时间：2012-07-28T20:19:44.177
> 
> 标签：bash, while-loop, interactive

如何在这个 while 循环中编写交互式响应？

```
#!/bin/bash

shows=$(< ${HOME}/.get_iplayer/tv.cache)

# ...
# ... stuff with shows omitted ...
# ...

function print_show {
# ...
    return
}

while read -r line
do
    print_show "$line"

    read -n 1 -p "do stuff? [y/n] : " resp  # PROBLEM

# ...
# resp actions omitted
# ...

done <<< "$shows" 
```

因此，读取、“处理”文件，然后在`while read`循环中使用生成的面向行的数据

但是 while 循环中的 read 行没有按预期工作，即它不等待用户响应，大概是由于`while read`它封装的上下文。

您能否建议如何解决此问题或替代机制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T21:08:08.933

您已正确确定原因是在

```
while ...; do ...; done <<< "$shows" 
```

循环，标准输入已被重定向，因此`read`不再从键盘读取。

您可以通过使用 0 以外的文件描述符来解决此问题；例如，

```
while read -r -u 3 line; do ...; done 3<${HOME}/.get_iplayer/tv.cache 
```

将为文件使用 FD 3 而不是 FD 0，允许正常`read`（不带`-u`）使用原始标准输入，或

```
while ...; do read -n 1 -p "do stuff? [y/n] : " -u 3 resp; done 3<&0 <<< "$shows" 
```

在用您的字符串替换 FD 0 之前将原始 FD 0 克隆到 FD 3 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:31:37.057

由于您已经将整个文件读入内存，请将其读入数组而不是单个字符串。

```
# Requires bash 4 or later
mapfile -t loop_input < $HOME/.get_iplayer/tv.cache

for line in "${loop_input[@]}"; do
    print_show "$line"
    read -n 1 -p "do stuff? [y/n] : " resp
done 
```

* * *

如果您仍然使用早期版本的 bash，我仍然建议将文件读入数组而不是单个字符串，但这不太方便。

```
declare -a loop_input
while read; do loop_input+=("$REPLY"); done

for line in "${loop_input[@]}"; do
    ...
done 
```

或者，您不能将文件全部读入内存：

```
while read -u 3 line; do
    ....
done 3< $HOME/.get_iplayer/tv.cache 
```

# html - Blogger 上的 Twitter 小部件 - 要么出现在所有页面上，要么根本不出现。为什么？

> ID：11704354
> 
> 赞同：0
> 
> 时间：2012-07-28T20:20:05.120
> 
> 标签：html, twitter, widget, hide, blogger

我只希望我的一个页面在侧边栏中显示 Twitter 列表小部件。（BLOGGER）。设计师模板。

我的代码如下：-

```
 <b:widget id='HTML4' locked='false' title='Twitter' type='HTML'>
        <b:includable id='main'>
        <b:if cond='data:blog.url == &quot;http://tfi-alumni-impact.blogspot.in/p/mouthpiece.html&quot; '>
        <!-- only display title if it's non-empty -->
        <b:if cond='data:title != &quot;&quot;'>
        <h2 class='title'><data:title/></h2>
        </b:if>
        <div class='widget-content'>
         <data:content/>
        </div>
        <b:include name='quickedit'/>
       </b:if>
       </b:includable>
       </b:widget

> 
```

但是，正如您在博客上看到的那样；它没有出现在右侧边栏上。我已经编辑了页面的html：-

```
<style type='text/css'>
#HTML1, #Slideshow1, #Image1, #Poll1, #HTML2, #HTML1 { display:none !important;}
</style> 
```

但我不认为这是问题所在。我做错了什么/我可以做些什么来实现我的目标？非常感谢！

# browser - 如何在隐藏的默认浏览器 C++ 中打开网页？

> ID：11704355
> 
> 赞同：2
> 
> 时间：2012-07-28T20:20:18.087
> 
> 标签：browser, default, hidden

**免责声明：** 我知道这个问题有[重复](https://stackoverflow.com/questions/2834597/how-to-open-webpage-in-hidden-default-browser-delphi)，但没有答案。克雷格·彼得森、梅森·惠勒和其他 13 人想知道为什么提出问题的人可能需要答案。他们说：

> 因为试图打开一个网页并对用户隐藏它听起来有点可疑，我们是这里的尊敬的编码人员，不想帮助任何人编写恶意软件。因此，请说服我们您有正当理由想要这样做，否则您不可能得到任何答案。

我试图编辑原始消息以提供这样的理由并希望得到答案，但修改已被**dgw**和**albertjan**拒绝，说：

> 此编辑不正确或试图回复或评论现有帖子

所以我再次提供这个问题的原因，我相信这是非常有效的。

原因：这可能需要运行特定的 Javascript 库，它不能在服务器上运行。例如，对于必须在默认浏览器中运行的 Google Analytics 代码（以避免 cookie 混淆）。当然，我们不想在用户桌面上打开任何页面，尽管没有什么可隐藏的。

请指教。

# symfony - 在 Doctrine2 中使用映射更新实体

> ID：11704367
> 
> 赞同：0
> 
> 时间：2012-07-28T20:21:18.953
> 
> 标签：symfony, doctrine-orm

我一直在做直接的 MySQL 很长一段时间，现在我正在尝试以 ORM 的方式做事。我有一个用户创建设计的网站。Design 表有一个映射到 User.id 的字段“userId”。Design 实体有一个值 $user，它定义了实体之间的关系：

```
/**
 * @ORM\ManyToOne(targetEntity="User")
 * @ORM\JoinColumn(name="userId", referencedColumnName="id")
 */
private $user; 
```

很好，我现在可以加载一个设计实体并使用 $design->user->lastname 获取用户的姓氏。

现在假设用户创建了一个新设计。我将实体保存为：

```
$design = new Design(); 
$design->setTitle($_POST['title']); 
$design->setUserId($_POST['userId']); 
$em = $this->getDoctrine()->getEntityManager(); 
$em->persist($design); 
$em->flush(); 
```

当我这样做时，它会失败并显示不允许空值的 userId 为空的消息。我以为我可能错误地传递了它，但是当我从 Design 实体中删除 $user 时它工作正常，所以我认为它也期望传递一个用户对象，例如：

```
$design->user = new User($userId) 
```

当我已经知道我所需要的 ID 时，我真的不想添加数据库调用来获取整个用户。处理这个最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:32:57.463

希望我已经了解您的数据库设计，即您是用户表和设计表。每个用户可能有许多设计。正确的？然后在您的设计实体中有一个字段用户及其 setter( `public setUser()`) 方法和一个 getter 方法( `public getUser()`)。在设计实体的持久化过程中，它总是期望 ORM 中的用户字段（而不是 id）有一个用户对象。在 ORM 中，用户和设计之间的前键关系由对象映射。

因此，在设计实体的持久性期间，您的情况 1\. 从 userId 创建用户对象。

```
 $em = $this->getDoctrine()->getEntityManager();//make your entity manager
   $userobj=$em->getRepository('yourBundle:User')->find($userId);
   $design = new Design(); 
   $design->setTitle($_POST['title']); 
   $design->setUser($userobj);  
   $em->persist($design); 
   $em->flush(); 
```

一件重要的事情确保在您的设计实体中没有字段 userId 而不是 user。如果您需要删除 userid 的 getter 和 setter 方法，还需要编辑您的 yml 文件或注释（如果您使用注释）

# jquery - 为 Ajax 序列化会话内容

> ID：11704376
> 
> 赞同：2
> 
> 时间：2012-07-28T20:22:55.533
> 
> 标签：jquery, ajax, session, serialization

我希望为 Ajax 请求序列化一些会话内容。与此类似的东西：

```
var data = $.session("data").serialize(); 
```

它适用于像这样的标准[jQuery ajax](http://api.jquery.com/jQuery.ajax/)函数：

```
$.ajax({
   type: "POST",
   url: "script.php",
   data: data,
   success: function() {
     ...
   }
}); 
```

[serialize()](http://api.jquery.com/serialize/)只对表单元素进行操作，所以我正在寻找类似的东西。以表示 SESSION 数据数组的形式处理数组的东西。

这是否存在或者我必须使用 foreach 循环手动序列化 POST 友好字符串中的会话内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:28:04.163

对这样的数据使用序列化函数的主要原因是当它来自多个来源时 - 例如包含许多输入字段的表单元素。表单上的一个序列化命令将返回所有数据。

如果您已经有一些 JavaSctipt 变量保存您的“会话”数据，您可以简单地通过 AJAX 调用将它们作为对象发送 - 如果您已经将所有数据都放在一个变量中，则无需序列化数据。

如果您想传递一些服务器会话变量，那么您可能需要考虑以下方法 - 您可以保存会话变量数据并将其编码为 json 对象，使用`json_encode()`. 之后，您只需将其回显到变量中即可将其传递给您的 JavaScript -

```
var sess_data = '<?php echo json_encode($_SESSION); ?>' ; 
```

然后，您可以通过 AJAX 调用传递变量 - 无需序列化数据。

```
$.ajax({
   type: "POST",
   url: "script.php",
   data: sess_data,
   success: function() {
     ...
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:25:50.327

我有点不清楚它是一个数组还是一个对象或其他什么，但你可以使用[$.param 来做](http://api.jquery.com/jQuery.param/)这个。

从文档：

> 创建数组或对象的序列化表示，适用于 URL 查询字符串或 Ajax 请求。

--

```
var data = $.session("data");

$.ajax({
   type: "POST",
   url: "script.php",
   data: {data: $.param(data)},
   success: function() {
     ...
   }
}); 
```

并在 PHP 中捕获它

```
parse_str($_POST['data'], $myVariable); 
```

# php - 从 mysql 循环中选择表行

> ID：11704378
> 
> 赞同：2
> 
> 时间：2012-07-28T20:23:01.760
> 
> 标签：php, mysql

我创建了一个while循环

```
while($row = mysql_fetch_Array($result)) { 
  echo '<tr class="record"> <td></td><td>'
     . $row['company'] .'</td><td>'
     . $row['project'].'</td><td>'
     . $row['assignee']. '</td><td>'
     . $row['current_milestone'] . '</td><td>'
     . $date=date("d-m-Y", strtotime($row['start_date'])).'</td><td>' ..'</td><td>'
     . $row['next_milestone'] . '</td><td>'
     .   $date=date("d-m-Y", strtotime($row['next_date']))
     .'</td></tr>' ; 
} 
```

这显示正确，但我的问题是：

用户如何选择单个行以便他/她可以编辑它。我希望用户可以选择他们想要的行，然后他们会被带到另一个屏幕，在那里他们可以进行更改。我可以弄清楚如何做我可以更新数据的部分。但这是选择行并收集正确的数据，我不明白该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:28:47.547

在其中嵌入一个`<a href='update.php?id=>`将记录 id 作为查询字符串中的参数传送到更新脚本的地方：

```
while($row = mysql_fetch_Array($result)) { 
  echo '<tr class="record"> <td></td><td>'
     // Insert a link with an id parameter.
     // Use whatever column value uniquely identifies your row
     . '<a href="update.php?id=' . $row['id'] . '"> Edit this! </a>' 
     // etc... 
     // etc...
     // etc...
     .'</td></tr>' ; 
} 
```

并通过以下方式在更新脚本上检索它：

```
// Assuming an integer id was passed...
// if it is some other string value, escape and quote it accordingly.
$id = intval($_GET['id']); 
```

您需要检查进行编辑的用户是否有权编辑该记录。换句话说，验证记录是否属于已登录用户，因为从技术上讲，任何人都可以使用任何 id 访问 URL，无论它是否属于他们。如：

```
UPDATE yourtable SET col1 = 'whatever', col2 = 'whatever' WHERE id = $id AND user_id = 'logged_in_user' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:30:44.550

1.  在您的数据库中创建某种主键（每个行/条目都不同的新字段）。示例：ID 字段
2.  创建一个接受 GET 参数的单独更新页面`id`。前任：`update.php`
3.  验证和清理`id`参数（确保它是有效的 id，而不是 SQL 注入尝试，并且用户有权编辑此 id）
4.  从数据库中加载该 ID 的信息。前任：`SELECT fields FROM table WHERE id = $id`
5.  显示一个表单，以便用户可以编辑信息。
6.  验证表单输入并更新表格。前任：`UPDATE table SET field1=newVal WHERE id = $ID`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T20:56:41.633

首先，您需要在表中创建一个主键，假设`primary_key`在这种情况下，以便访问具有确定且唯一 ID 的特定行。

其次，在表格中再添加一列：

```
while($row = mysql_fetch_Array($result)){
echo '<tr class="record"> <td></td><td>'
         . $row['company'] .'</td><td>'
         . $row['project'].'</td><td>'
         . $row['assignee']. '</td><td>'
         . $row['current_milestone'] . '</td><td>'
         . $date=date("d-m-Y", strtotime($row['start_date'])).'</td><td>' ..'</td><td>'
         . $row['next_milestone'] . '</td><td>'
         .   $date=date("d-m-Y", strtotime($row['next_date']))
         .'</td>' ; 
         ?>
         <td>
            <form action='update.php' method='post'>
               <input type="hidden" name="id" value="<?php echo $row['primary_key']; ?>">
               <input type="submit" value="Edit">
            </form>
         </td>
         <?php
         echo "</tr>";
    }
    ?> 
```

现在您知道需要在表单中显示哪一行的详细信息，`update.php` 代码`update.php`如下：

```
<?php
$id = $_POST['id'];
$result = mysql_query("SELECT * FROM table WHERE primary_key = '$id'");
$info = mysql_fetch_array($result);
?>
<form action='target.php' method='post'>
   Company: <input type="text" name="company" value="<?php echo $info['company']; ?>">
   Project: <input type="text" name="project" value="<?php echo $info['project']; ?>">
   .
   .
   <input type="hidden" name="id" value="<?php echo $info['primary_key']; ?>">
   <input type="submit" value="Save Changes">
</form> 
```

然后`target.php`你所要做的就是使用命令：

```
mysql_query("UPDATE table SET company='".$_POST['company']."' AND project='".$_POST['project']."' WHERE primary_key='".$_POST['id']."'); 
```

# python - OS X 10.8 升级后 Python pip 损坏

> ID：11704379
> 
> 赞同：69
> 
> 时间：2012-07-28T20:23:37.507
> 
> 标签：python, macos, pip

升级到 Mac OS X 10.8 (Mountain Lion) 并在尝试调用时出现以下错误`$ pip`：

```
Traceback (most recent call last):
  File "/usr/local/bin/pip", line 5, in <module>
    from pkg_resources import load_entry_point
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 2603, in <module>
    working_set.require(__requires__)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 666, in require
    needed = self.resolve(parse_requirements(requirements))
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 565, in resolve
    raise DistributionNotFound(req)  # XXX put more info here
pkg_resources.DistributionNotFound: pip==1.1 
```

更新：尝试通过再次执行安装过程来重新安装（使用[http://www.pip-installer.org/en/latest/installing.html#using-the-installer](http://www.pip-installer.org/en/latest/installing.html#using-the-installer)和`easy_install`），但没有成功，得到了相同的结果错误。

现在尝试以下方法：调用`$ sudo pip`并且上述错误消失。奇怪的是，在上述错误消息中找不到的目录指向 /System/Library/... 而 python 安装（新？）在 /Library/Frameworks/.. 中找到：

```
$ which python
/Library/Frameworks/Python.framework/Versions/Current/bin/python 
```

知道如何摆脱 sudo 吗？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-07-28T20:28:14.743

用于`easy_install`将您更新`pip`到最新版本：

`sudo easy_install -U pip`

还要确保您安装了最新`XCode`版本（4.4 版）`Command Line Tools`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-16T06:02:30.927

这对我有用

```
rm -f /usr/local/bin/easy_install
brew reinstall python
pip install --upgrade setuptools
pip install --upgrade pip 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-02T03:49:03.713

我有一个类似的错误，但`sudo pip`也没有工作。我正在使用python的“brew”安装（符号链接到/usr/local/bin），发现问题是pip和easy_install文件中的shebangs被硬编码为`#!/usr/bin/python`而不是`#!/usr/local/bin/python`，所以使用系统python版本而不是 brew 版本。

干杯，汤姆

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-13T19:47:19.930

我实际上无法执行建议的操作。我不得不执行：

```
xcode-select --install 
```

然后我就可以安装 ldap 模块了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-25T19:34:09.387

我在这里尝试了所有答案，从重新安装 easy_install 到安装新的 python 版本，对我没有任何帮助。

我所做的是在 /Library/Frameworks 文件夹中安装一个新的 Python 安装，并从 /usr/local/bin 符号链接到那个（由于某种原因，我的系统有一个从 /Library/Frameworks/Python.framework 到 /系统/框架/Python.framework）。我的想法是将 /System/Library/Frameworks 文件保留在 /usr/bin 中供系统命令使用，并让 /usr/local/bin 指向 /Library/Frameworks 中安装的另一个“用户空间”。为了做到这一点：

*   将 /System/Library/Framework/Python.framework 重命名为 _OLD_Python.framework

*   删除 /usr/local/bin 中的每个 python 文件（使用 sudo rm /usr/local/bin/python*）和 /usr/local/bin/pip*（但不要触摸 /usr/bin）

*   从官方网站（[http://www.python.org/getit/](http://www.python.org/getit/)）重新安装 python ==> 这将在 /Library/Framework 而不是 /System/Library/Framework 中重新安装 python

*   然后启动 Applications/Python/Update Shell Profile.command 命令，确保您的路径使用该路径

*   然后使用 /usr/local/bin 重新创建符号链接

    ln -s ../../Library/Frameworks/Python.framework/Versions/2.7/bin/python python

*   最后，将 _OLD_Python.framework 重命名为 Python.framework（因为这是 /usr/bin/python 指向的路径）

键入“which python”应该指向 /Library/... 而不是 /System/Library。从那里你应该能够正确地重新安装easy_install和pip。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-03T21:09:11.673

我通过使用自制软件重新安装 python 来解决这个问题： `brew install python`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-04T04:10:16.630

在小牛队，我发现

```
ls -l `which python`
/usr/local/bin/python -> ../../../Library/Frameworks/Python.framework/Versions/2.7/bin/python 
```

而 pip 显示

```
ls -l `which pip`
/usr/local/bin/pip 
```

我重命名了旧的`pip`并创建了一个指向正确 pip 二进制文件的符号链接，现在一切都很好。这可能不是最好的解决方案，但它确实有效。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-23T21:46:01.753

可以简单地更改权限，而不是更改所有权：

$ sudo chmod -R o+rX /Library/Python/2.7/site.packages

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-14T16:25:32.550

I usually had same issue with some project referencing `bonjour-py` in their `requirements.txt`, didn't know which or how to track that one at the moment.

And someone told me that **[pip-tool](https://github.com/nvie/pip-tools)**. It's actually a great alternative to identify which you have, and if you want to update them. And as a bonus it ignored well the `bonjour-py` error.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-30T18:22:34.210

我更改了 Python 文件夹的权限（从 root 到我的用户），现在一切都对我有用：

```
sudo chown -R <your_user>:wheel /Library/Python/2.7/site-packages/ 
```

不推荐用于有多个用户的机器。

# javascript - 使用 javascript 创建表单并将输入带回 php

> ID：11704395
> 
> 赞同：0
> 
> 时间：2012-07-28T20:26:16.677
> 
> 标签：javascript, forms, xmlhttprequest

一直在尝试让这个工作。我想要的是，当用户单击`create Card`表单时应该弹出多个字段，以便他们可以查看`$key[2]`和编写问题和答案。

如果有人能指出我正确的方向来使用 javascript 创建这个表单并解释如何将变量从该表单返回到 php，那就太棒了。我正在尝试使用`xmlhttprequest`，我不知道这是否最好。

```
<?php
if (isset($myNotes)) {
    foreach ($myNotes as $key) {
        Print "<li>$key[2] <a href=''><dif onclick='createCard()'>(Create Card)</dif></a></li>";
    }
}
?> 
```

```
function createCard()
{
    xmlhttp=new XMLHttpRequest();
    var question;
    var answer;

    question=prompt("Enter Q:","");
    answer=prompt("Enter Answer:","");

    xmlhttp.open("GET","control.php?q="+question, true);
    xmlhttp.send();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:11:42.857

您可以有一个隐藏的 Div，其中包含当用户单击 createCard 时显示的表单。

```
<div id="popupdiv" style="display:none">
<p>Question: <input type="text" id="question"></p>
<p>Answer: <input type="text" id="answer"></p>
<input type="button" onclick="processCard()">
</div>

function createCard(){

    // This displays the popup with your form.
    document.getElementById("popupdiv").style.display = "block";
}

function processCard(){

    // This grabs the data and sends it server and then hides the div again.
    var question = document.getElementById("question").value;
    var answer = document.getElementById("answer").value;
    xmlhttp=new XMLHttpRequest();
    xmlhttp.open("GET","control.php?q="+question+"&a="+answer, true); 
    xmlhttp.send();
    document.getElementById("popupdiv").style.display = "none";
}   

 <?php
 $question = $_GET['question'];
 $answer = $_GET['answer'];
 ?> 
```

# android - 如何提高/降低 texview/textfield 的值 - Android

> ID：11704402
> 
> 赞同：0
> 
> 时间：2012-07-28T20:26:42.337
> 
> 标签：android, user-interface

我正在为《魔术：聚会》等游戏制作积分计数器。我知道很多这样的存在，但仍然存在。

我需要一个以数字开头的文本视图或文本字段（我愿意接受建议），例如 20。然后用户可以按下 + 1、+ 2、+3、- 1、- 2、- 的按钮3，这将相应地更改显示的数字（按 + 2 会将值提高 2，例如从 20 到 22。有人可以帮我这样做吗？我不是懒惰，只是真的不知道，所以任何帮助将不胜感激，非常方便。

就像我说的，我很感激任何事情，但我对 Android 还是很陌生，所以答案必须合理详细。

编辑：添加了示例布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

        <EditText
            android:id="@+id/edittext1"
            android:textSize="25sp"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:text="20" >
            </EditText>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/button_plus_1"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="+ 1" />

            <Button
                android:id="@+id/button_minus_1"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="- 1" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/button_plus_2"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="+ 2" />

            <Button
                android:id="@+id/button_minus_2"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="- 2" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/button_plus_3"
                android:layout_width="0dp"
                android:layout_weight="1"
                android:layout_height="wrap_content"
                android:text="+ 3" />

            <Button
                android:id="@+id/button_minus_3"
                android:layout_width="0dp"
                android:layout_weight="1"
                android:layout_height="wrap_content"
                android:text="- 3" />

        </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:41:14.583

你试过什么？你做过一个hello world的例子吗？

1）获取小部件的句柄。findViewById(...)
2) 获取小部件中显示的字符串。
3) 使用 Integer.parseInt 将其转换为整数。
4) 添加你想要的值
5) 从小部件中，使用 setText 方法。

# ruby-on-rails - Palce 在 Rails 中为视图放置非通用辅助函数

> ID：11704405
> 
> 赞同：1
> 
> 时间：2012-07-28T20:27:09.767
> 
> 标签：ruby-on-rails, views, view-helpers

我是铁轨的初学者。在我的应用程序中编写其中一个视图时，我最终得到了一大块（约 100 行）丑陋的代码。它相当不通用，因为它主要由一些条件查找到特定于视图的常量散列组成。我想从视图文件中删除这段丑陋的代码。

放置这段代码的最佳位置是什么？具体来说，辅助模块是否适合此类非通用代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:31:36.477

将代码放入 中`app/helpers/application_helper.rb`，然后任何使用`application`布局呈现的视图都可以访问它。

另一种选择是定义一个*自定义*帮助模块，它不一定与给定的视图或控制器相关联（请参阅下面链接的视频），并且`include`它位于您希望具有该功能的视图/控制器的模块中。

辅助模块确实是用来调用它们的，但是要小心你如何声明你的方法，你可以在辅助模块中定义的内容是有限制的。

[这](http://techspry.com/ruby_and_rails/designing-helpers-in-ruby-on-rails/)是一篇很好的文章，概述了*2011 年 5 月的帮助模块*

[这](http://railscasts.com/episodes/64-custom-helper-modules/)是一个 RailsCast 概述*自定义*帮助模块（即自定义模块不一定与给定的控制器或视图相关联）。简短，甜蜜，切中要害。

# c++ - 最终的虚函数有什么意义？

> ID：11704406
> 
> 赞同：62
> 
> 时间：2012-07-28T20:27:24.383
> 
> 标签：c++, c++11, inheritance, final, virtual-functions

[Wikipedia](http://en.wikipedia.org/wiki/C%2B%2B11#Explicit_overrides_and_final)在 C++11 final 修饰符上有以下示例：

```
struct Base2 {
    virtual void f() final;
};

struct Derived2 : Base2 {
    void f(); // ill-formed because the virtual function Base2::f has been marked final
}; 
```

我不明白引入虚函数并立即将其标记为 final 的意义。这只是一个不好的例子，还是有更多的例子？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-07-28T21:16:21.677

通常`final`不会在基类的虚函数定义中使用。`final`将由重写函数的派生类使用，以防止进一步的派生类型进一步重写函数。由于覆盖函数通常必须是虚拟的，这意味着任何人都可以在进一步的派生类型中覆盖该函数。`final`允许一个人指定一个覆盖另一个但本身不能被覆盖的函数。

例如，如果您正在设计一个类层次结构并需要覆盖一个函数，但您不希望类层次结构的用户也这样做，那么您可能会在派生类中将函数标记为 final。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-28T21:06:35.983

对于要标记的函数，`final`它必须是`virtual`，即在 C++11 §10.3 段中。2：

> [...] 为方便起见，我们说任何虚函数都会覆盖自身。

第 4 段：

> 如果某个类 B 中的虚函数 f 用 virt-specifier final 标记，并且在从 B 派生的类 D 中，函数 D::f 覆盖了 B::f，则程序是非良构的。[...]

即，`final`只需要与虚函数（或与阻止继承的类）一起使用。因此，该示例需要`virtual`用于它是有效的 C++ 代码。

**编辑：**要完全清楚：“点”询问了为什么甚至使用虚拟的问题。使用它的底线原因是（i）因为代码不会编译，以及，（ii）为什么在一个足够的情况下使用更多类使示例更复杂？因此，仅使用一个具有虚拟最终函数的类作为示例。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-28T20:30:43.373

这对我来说似乎一点用都没有。我认为这只是演示语法的示例。

一种可能的用途是，如果您不希望 f 真正可覆盖，但您仍想生成一个 vtable，但这仍然是一种可怕的做事方式。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-28T20:42:54.330

> 我不明白引入虚函数并立即将其标记为 final 的意义。

该示例的目的是说明如何`final`工作，它就是这样做的。

*实际*目的可能是查看 vtable 如何影响类的大小。

```
struct Base2 {
    virtual void f() final;
};
struct Base1 {
};

assert(sizeof(Base2) != sizeof(Base1)); //probably 
```

`Base2`可以简单地用于测试平台细节，并且覆盖没有意义，`f()`因为它只是用于测试目的，所以它被标记为`final`. 当然，如果您这样做，那么设计中就有问题。我个人不会创建一个带有`virtual`函数的类来检查`vfptr`.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-03-28T23:23:47.303

添加到上面的好答案 - 这是一个众所周知的 final 应用程序（非常受 Java 启发）。假设我们在 Base 类中定义了一个函数 wait()，并且我们希望在它的所有后代中*只*实现一个 wait()。在这种情况下，我们可以将 wait() 声明为 final。

例如：

```
class Base { 
   public: 
       virtual void wait() final { cout << "I m inside Base::wait()" << endl; }
       void wait_non_final() { cout << "I m inside Base::wait_non_final()" << endl; }
}; 
```

这是派生类的定义：

```
class Derived : public Base {
      public: 
        // assume programmer had no idea there is a function Base::wait() 

        // error: wait is final
        void wait() { cout << "I am inside Derived::wait() \n"; } 
        // that's ok    
        void wait_non_final() { cout << "I am inside Derived::wait_non_final(); }

} 
```

如果 wait() 是*纯虚函数*，那将是*无用*的（并且不正确） 。在这种情况下：编译器会要求您在派生类中定义 wait()。如果你这样做，它会给你一个错误，因为 wait() 是最终的。

 ***为什么最终函数应该是虚函数？（这也令人困惑）**因为（imo）1）final的概念与虚函数的概念非常接近【虚函数有很多实现--final函数只有一种实现】，2）很容易实现final效果使用虚表。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-01-19T15:23:36.463

在重构遗留代码时（例如，从母类中删除一个虚拟方法），这对于确保没有子类使用这个虚拟函数很有用。

```
// Removing foo method is not impacting any child class => this compiles
struct NoImpact { virtual void foo() final {} };
struct OK : NoImpact {};

// Removing foo method is impacting a child class => NOK class does not compile
struct ImpactChildClass { virtual void foo() final {} };
struct NOK : ImpactChildClass { void foo() {} };

int main() {} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-07-26T21:52:46.220

这就是为什么您实际上可能选择在基类`virtual`和`final`基类中声明函数的原因：

```
class A {
    void f();
};

class B : public A {
    void f(); // Compiles fine!
};

class C {
    virtual void f() final;
};

class D : public C {
    void f(); // Generates error.
}; 
```

标记的功能`final` **也**必须是`virtual`。标记函数`final`可防止您在派生类中声明具有相同名称和签名的函数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-09-27T20:04:21.693

而不是这个：

```
public:
    virtual void f(); 
```

我觉得写这个很有用：

```
public:
    virtual void f() final
        {
        do_f(); // breakpoint here
        }
protected:
    virtual void do_f(); 
```

主要原因是在分派到任何潜在的许多重写实现之前，您现在有一个断点位置。可悲的是（恕我直言），说“最终”也需要你说“虚拟”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-31T11:05:54.180

我发现了另一种情况，将虚函数声明为 final 很有用。此案例是[SonarQube 警告列表的](https://sonarqube.com/coding_rules#rule_key=cpp%3AS1699)一部分。警告描述说：

> 在实例化覆盖成员函数的子类时，从构造函数或析构函数调用可覆盖的成员函数可能会导致意外行为。
> 
> 例如：
> - 按照约定，子类构造函数首先调用父类构造函数。
> - 父类构造函数调用父成员函数，而不是子类中覆盖的那个，这对子类的开发人员来说是混乱的。
> - 如果成员函数在父类中是纯虚函数，它会产生未定义的行为。

不合规代码示例

```
class Parent {
  public:
    Parent() {
      method1();
      method2(); // Noncompliant; confusing because Parent::method2() will always been called even if the method is overridden
    }
    virtual ~Parent() {
      method3(); // Noncompliant; undefined behavior (ex: throws a "pure virtual method called" exception)
    }
  protected:
    void         method1() { /*...*/ }
    virtual void method2() { /*...*/ }
    virtual void method3() = 0; // pure virtual
};

class Child : public Parent {
  public:
    Child() { // leads to a call to Parent::method2(), not Child::method2()
    }
    virtual ~Child() {
      method3(); // Noncompliant; Child::method3() will always be called even if a child class overrides method3
    }
  protected:
    void method2() override { /*...*/ }
    void method3() override { /*...*/ }
}; 
```

合规解决方案

```
class Parent {
  public:
    Parent() {
      method1();
      Parent::method2(); // acceptable but poor design
    }
    virtual ~Parent() {
      // call to pure virtual function removed
    }
  protected:
    void         method1() { /*...*/ }
    virtual void method2() { /*...*/ }
    virtual void method3() = 0;
};

class Child : public Parent {
  public:
    Child() {
    }
    virtual ~Child() {
      method3(); // method3() is now final so this is okay
    }
  protected:
    void method2() override { /*...*/ }
    void method3() final    { /*...*/ } // this virtual function is "final"
}; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-10T12:14:01.227

`virtual`+`final`用于一个函数声明中以使示例简短。

关于 and 的语法*，* Wikipedia示例通过引入包含 Base1和 Base2 包含（见下文）将更具表现力。`virtual``final``struct Base2 : Base1``virtual void f();``void f() final;`

## 标准

参考[N3690](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3690.pdf)：

*   `virtual``function-specifier`可以作为的一部分`decl-specifier-seq`
*   `final`可以是一部分`virt-specifier-seq`

没有规则必须将*关键字* `virtual`和*具有特殊含义的标识符* `final`一起使用。第 8.4 节，函数定义（注意 opt = 可选）：

> 功能定义：
> 
> attribute-specifier-seq(opt) decl-specifier-seq(opt) declarator virt-specifier-seq(opt) 函数体

## 实践

在 C++11 中，您可以`virtual`在使用`final`. 这在 gcc >4.7.1、clang >3.0 和 C++11、msvc 上编译，...（请参阅[编译器资源](https://godbolt.org/g/ySeyXd)管理器）。

```
struct A
{
    virtual void f() {}
};

struct B : A
{
    void f() final {}
};

int main()
{
    auto b = B();
    b.f();
} 
```

PS：[cppreference 上的示例](http://en.cppreference.com/w/cpp/language/final)也没有在同一声明中将 virtual 与 final 一起使用。

PPS：同样适用于`override`.*

# javascript - Facebook喜欢按钮太喜欢了

> ID：11704407
> 
> 赞同：0
> 
> 时间：2012-07-28T20:27:39.693
> 
> 标签：javascript, facebook

我正在尝试在“forumeiros”（免费论坛）上的所有帖子上点击“Like”按钮
当我在帖子上按“Like”时，它会随机地喜欢所有下一个帖子，对我来说没有任何意义
使用以下代码生成按钮：

```
jQuery(document).ready(function() {
    var url = new Array();
    var link = '';
    jQuery('.postbody .topic-title a[name]').each(function(index){
        link = "http://"+document.domain+jQuery(this).attr("href")+"/";
        link = link.replace('#', '/t');
        url.push(link);
    });
    jQuery('p.author').each(function(index){
        jQuery(this).after('<iframe src="http://www.facebook.com/plugins/like.php?href='+url[index]+'&amp;layout=standard&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=light&amp;height=55" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:24px;" allowTransparency="true"></iframe><hr> ');
    });
}); 
```

这里有两个生成的链接：
`http%3A%2F%2Fgmbrdebug-t.forumeiros.com%2Ft2-teste-teste%2Ft2%2F`
`http%3A%2F%2Fgmbrdebug-t.forumeiros.com%2Ft2-teste-teste%2Ft3%2F`

解码：（仅显示设置为 facebook iframe 的 href 属性）

`http://gmbrdebug-t.forumeiros.com/t2-teste-teste/t2/`
`http://gmbrdebug-t.forumeiros.com/t2-teste-teste/t3/`

那么，为什么当我首先按“喜欢”时，所有关注者也都“喜欢”了？它们是不同的。

编辑：所有网址都重定向到同一个地方，可能是这样吗？
如果是，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:40:23.867

如果生成的链接重定向到同一个地方，那么 Facebook 将它们视为同一个图节点。这就是为什么喜欢一个人会喜欢他们的“全部”——Facebook 将他们视为唯一的一件事。

您需要为每个帖子设置单独的链接，并将这些链接用于 Facebook 按钮。

# php - 将表单提交到数据库不起作用

> ID：11704411
> 
> 赞同：0
> 
> 时间：2012-07-28T20:28:46.290
> 
> 标签：php, mysql, html

所以我累了，已经尝试了几个小时，仍然找不到为什么它不起作用。了解我，这可能是我在某个地方犯的一些愚蠢的错误。Anyhoo，我有一个我需要能够提交的表单，然后输入的文本被插入到数据库中。但是，每当我按下提交时，它都会返回主页并且不插入任何内容。代码在这里：

```
//New Memory
<?php 
if ($x == 'new') {
?>

<a href="pensieve_elizabeth.php"><- Back</a>
<center>
<table width="400" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td>
          <form action="<?php echo $_SERVER['PHP_SELF'] ?>" method="post">
             <input type="hidden" name="submitted" value="submitted" />

             <p><b>Add Memory </b></p>
             <p>Title:<br> 
             <input class="textfield" name="title" maxlength="55" style="width:325px;">
             <br>
             Memory: <br>  
             <textarea class="textfield" name="entry" value="entry" id="entry" cols="30" rows="10" style="width:325px;"></textarea><br>

             <input type="submit" value=" Submit " />

             <input type="checkbox" name="private" value="1"> Private 

             <p>What thread does the memory belong to? (optional):<textarea class="textfield" name="links" rows="1" style="width:325px;"></textarea><br />

         </form>
     </td>
   </tr>
</table>
</center>

<?php

  if(isset($_POST['submitted'])) {

  $title = trim(addslashes(strip_tags(htmlspecialchars($_POST['title']))));
  $entry = trim(addslashes(strip_tags(htmlspecialchars($_POST['entry']))));
  $private = $_POST['private'];
  $links = $_POST['links'];

  if (empty($title)) message("Please give the memory a title.");
  if (empty($entry)) message("Your memory is empty.");

  mysql_query("INSERT INTO pensieve SET uid = '$userID', subject = '$title', memory = '$entry', dateline = '".date()."', private = '$private', links = '$links'") or die(mysql_error());

  message("You have successfully submitted this memory to your pensieve!","/pensieve_elizabeth.php");
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:32:34.630

你的查询是错误的。

```
 mysql_query("INSERT INTO pensieve SET uid = '$userID', subject = '$title', memory = '$entry', dateline = '".date()."', private = '$private', links = '$links'") or die(mysql_error()); 
```

一定是

```
mysql_query("INSERT INTO pensieve(uid, subject, memory, dateline, private, links) values('$userID', '$title', '$entry', '".date()."', '$private', '$links')") or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T20:42:51.527

首先在脚本顶部设置以下内容

```
 error_reporting(E_ALL); 
```

这将告诉您有关哪里出了问题以及在哪条线上的所有信息。

其次，我不明白你为什么要这样做

```
 INSERT INTO pensieve SET uid = '$userID', subject = '$title', 
 memory = '$entry', dateline = '".date()."', 
  private = '$private', links = '$links'"); 
```

您同时使用 INSERT 和 UPDATE 语法

如果你想插入使用

```
 "INSERT INTO pensieve ('uid', 'subject', 'memory', 'dateline', 
     'private', 'links')  VALUES ('$userID','$title','$entry','".date()."',
   '$private', '$links'"); 
```

以下将直接插入一行，而不考虑单个行中的重复值

如果你想更新使用

```
 "UPDATE pensieve SET uid = '$userID', subject = '$title', memory = '$entry', 
  dateline = '".date()."', private = '$private', links = '$links'" 
   WHERE 'something' = 'something_value' "; 
```

一起做

```
 $result = mysql_query("INSERT INTO pensive.......");
    if(!$result){
       mysql_error();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T19:38:50.333

```
 Add these two lines to the top of your script, this will show any sort of errors in the script or query execution:

    ini_set("display_errors","on");
    error_reporting(E_ALL);

    And for the data not getting inserted:
    check your query if all the mandatory/not null values are passed in the query or not. For example - I do not see userid being set in your script.  

   Your insert query syntax is wrong - the correct syntax is 
 insert into table1(col1,col2,col3) values(val1,val2,val3);

so your query would be :

$sql ="INSERT INTO pensieve(uid,subject,memory,dateline,private,links) values ('$userID','$title', '$entry','". date('Y-m-d H:i:s',time())."', '$private', '$links'";

if you want to update then :

$SQL = "UPDATE pensieve SET uid = '$userID', subject = '$title', memory = '$entry', dateline = '".date('Y-m-d H:i:s',time())."', private = '$private', links = '$links'"; 
```

# c++ - stroustrup ppp 第 8 章钻头

> ID：11704416
> 
> 赞同：3
> 
> 时间：2012-07-28T20:29:30.620
> 
> 标签：c++

对于那些已经阅读并完成了 stroustrup 的“编程原理和使用 c++ 的练习”中的练习的人，我在进行第 8 章练习的第一部分时遇到了麻烦。我在这部分遇到的主要问题是接近问题的结尾，它指出“在 Windows 上，您需要在项目中同时拥有**use.cpp**和**my.cpp**并使用**{ char cc; cin>>cc; }** in **use.cpp**能够看到你的输出。” 如果我们不允许**std_lib_facilities.h**用于**use.cpp**我们如何做到这一点？
当它说“在 Windows 上，你需要同时拥有**use.cpp**和**my.cpp**在一个项目中”？如果我想深入研究这个，请告诉我。

> 创建三个文件：**my.h**、**my.cpp**和**use.cpp**。头文件**my.h**包含
> 
> > **extern int foo;**
> > **无效 print_foo();**
> > **无效打印（整数）；**
> 
> **#include** **my.h**和**std_lib_facilities.h**的源代码文件**my.cpp**定义**print_foo()以使用****cout**打印foo 的值，并定义**print(int i)**以使用**cout打印****i**的值。将**#include** **my.h** 的源代码文件**use.cpp**定义**main()以将****foo**的值设置为**7**并使用**print_foo()打印它，并使用****print()**打印值 99 。请注意，**use.cpp**不 ************************************#include** **std_lib_facilities.h**因为它不直接使用任何这些设施。
> 
> 编译并运行这些文件。在 Windows 上，您需要在项目中同时拥有**use.cpp**和**my.cpp**并使用**{ char cc; 辛>>cc; }**在**use.cpp**能够看到你的输出。**********************************

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:35:35.763

```
{ char cc; cin>>cc; } 
```

用于从标准输入读取字符（**等待**输入）。在 VS 和其他 IDE 中，您需要这样做只是为了查看程序的输出，否则 cmd 窗口将关闭得太快而无法读取输出。您不需要`std_lib_facilities.h`，只需`include <iostream>`在函数末尾编写上面的代码即可`main`。

> 编译并运行这些文件。在 Windows 上，您需要在项目中同时拥有 use.cpp 和 my.cpp 并使用 { char cc; 辛>>cc; } 在 use.cpp 能够看到你的输出。

要在 Windows、VS 或其他 IDE 中编译，您需要包含这两个源文件。在 linux 上，您也需要两者，但是，编译过程（makefile 或 g++）明确需要这些文件，因此对于 windows，这些文件被强调。****

# javascript - 使用cdn避免神秘的javascript“脚本错误”

> ID：11704419
> 
> 赞同：5
> 
> 时间：2012-07-28T20:29:57.413
> 
> 标签：javascript, cdn, same-origin-policy

我正在使用一个脚本来检测 Javascript 错误并将它们报告给我的后端。但是，我收到了神秘的“脚本错误”消息，这对调试没有太大帮助。

根据[神秘的“脚本错误”。在 Chrome 和 Firefox 中以 Javascript 报告](https://stackoverflow.com/questions/5913978/cryptic-script-error-reported-in-javascript-in-chrome-and-firefox)的原因是因为引发错误的脚本来自与我的网站不同的来源。

由于我使用的是 CDN，因此我的所有脚本都有效地从另一个域提供。有没有办法在仍然使用 CDN 的同时获得更多有用的错误消息？

此外，一切都通过 SSL 提供，所以我想保留这种能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:55:36.350

我有一个类似的问题：我的脚本由一个子域提供服务并且属于同一来源限制。但是，我通过以下方式解决了这个问题：

1）像这样添加每个脚本标签：

```
<script type="text/javascript" src="http://subdomain.mydomain.tld" crossorigin="*.mydomain.tld" /> 
```

2）通过在每个虚拟主机中添加以下内容来修改 apache httpd.conf（您必须启用 mod_headers）：

```
<IfModule mod_headers.c>
Header add Access-Control-Allow-Origin "*.mydomain.tld"
</IfModule> 
```

在我的一台服务器上，除了替换之外，我无法使其正常工作

```
*.mydomain.tld 
```

经过

```
* 
```

请注意可能允许 * 钓鱼扩展信息的缺陷。有关 CORS、同源、img 和字体、cdn 的文档可用，但有关脚本标签跨域详细信息的可用文档非常少。

希望这可以帮助 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:35:48.783

Try using jsonp for the dataType attribute in [jQuery.ajax](http://api.jquery.com/jQuery.ajax/). The remote server will also need to support jsonp. It will get around the browser security preventing XSS.

Alternatively, you could use an IFrame and use jQuery within each window, but use HTML5 [postMessage](https://developer.mozilla.org/en/DOM/window.postMessage) to communicate back and forth between the windows on two different domains.

Or, if you control both servers you can set the headers for [same origin](https://developer.mozilla.org/en/http_access_control).

Jsonp has been my weapon of choice for this kind of problem. The others are just a legitimate.

# python - python re.sub，仅当模式出现在字符串的开头时才替换它

> ID：11704420
> 
> 赞同：-1
> 
> 时间：2012-07-28T20:30:14.693
> 
> 标签：python, regex

仅当模式出现在字符串的开头时才替换它。例如`str1 = "abab abadfadsf"`

我只想删除/替换 str1 开头的“ab”，即我想编写一个正则表达式，以便我可以`str2 = "ab abadfadsf"`从 str1获取`re.sub`

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T20:36:38.487

对于这种简单的情况，您最好使用内置的字符串方法 -​​ 正则表达式对于更复杂的匹配很有用，但不是必需的。

```
str2 = str1[2:] if str1.startswith('ab') else str1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T20:32:56.210

您可以使用`re.sub('^ab', '', 'abab abadfadsf')`
`^`代表字符串的开头。

# ruby-on-rails-3 - nginx 重写/proxy_pass 问题

> ID：11704421
> 
> 赞同：0
> 
> 时间：2012-07-28T20:30:20.233
> 
> 标签：ruby-on-rails-3, url-rewriting, nginx, passenger, proxypass

我做了一些广泛的搜索，并且有很多关于 nginx proxy_pass 问题的帖子。我已经尝试将我的问题修改为其中一些问题，但没有任何进展，所以就到这里。

我正在将一个基于 php 的网站重写为 Rails。原始网站本身是带有表单的简单 2 页。它使用 Apache 中的 mod_rewrite / mod_proxy 解决方案来屏蔽表单发布后站点继续的 url。

php 站点有 3 个目录，其中只有 3 个 .htaccess 文件，为了简单起见，让我们调用目录 a、b、c。每个 .htaccess 文件都包含以下内容

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule ^(.*)$ http://www.domainbeingpostedto.com/actual_letter_directory/$1 [P,L]
</IfModule> 
```

我不是 apache 专家，但我很确定 [P,L] 与 proxy_pass 相同并且在 nginx 中是最后一个？

我正在尝试为使用乘客和 nginx 转换为 rails cms 的 php 站点重写此解决方案。

到目前为止我的解决方案不起作用，因为 rails 应用程序只返回一个 404 页面未找到，所以我知道 proxy_pass 没有将发布请求转发到另一台服务器。我的 nginx.conf 文件是：

```
server {
    listen 80;
    server_name newtestappdomain.com;

    location /a/ {
        proxy_pass http://www.domaintoacceptdatapostandbemasked.com/;
        #rewrite ^/a/(.*)$ http://www.domaintoacceptdatapostandbemaskedcom/a/ last;
    }

    location /b/ {
        proxy_pass http://www.domaintoacceptdatapostandbemasked.com/;
        #rewrite ^/b/(.*)$ http://www.domaintoacceptdatapostandbemasked.com/b/ last;
    }

    location /c/ {
        proxy_pass http://www.domaintoacceptdatapostandbemasked.com/;
        #rewrite ^/c/(.*)$ http://www.domaintoacceptdatapostandbemasked.com/c/ last;

    }

    root /home/deploy/testapp/public;   # <--- be sure to point to 'public'!
    passenger_enabled on;

} 
```

如果我取消注释重写规则，它只会反弹到我试图屏蔽的另一个站点。我也做了一个标题跟踪来验证。没有看到任何发布到其他域的内容。我有点难过，因为我对 nginx 很陌生，不知道该怎么做。Apache 不适用于 rails 和 mod_rewrite / mod_proxy。任何见解都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:39:21.657

```
proxy_pass http://www.domaintoacceptdatapostandbemasked.com/; 
```

此规则将是对“/”位置的代理请求（proxy_pass uri 中的前导斜杠）（a/、b/ 和 c/ 将丢失）。

只需使用没有前导斜杠的uri，它应该可以完美运行

```
proxy_pass http://www.domaintoacceptdatapostandbemasked.com; 
```

如果需要更改uri，可以在proxy_pass之前使用rewrite。例如：

```
location /a/ {
    rewrite /(a/.*)$ /actual_letter_directory/$1 break; # as from you .htaccess example
} 
```

# android - 用于在 Android 中循环列表以获取权限列表

> ID：11704429
> 
> 赞同：1
> 
> 时间：2012-07-28T20:31:52.570
> 
> 标签：android, loops, append

我正在遍历一个列表并尝试将应用程序列表附加到字符串，但到目前为止我只能附加 1 个应用程序。如果我尝试添加到数组中并在列表视图中显示它，它工作正常。

```
for (PackageInfo pi : apps) {
    String[] permissions = pi.requestedPermissions;
    String internetpermissionsText = "";
    if (permissions != null) {
        for (String permission : permissions) {
            Log.d("TAG", permission);
                        if (permission.equals("android.permission.INTERNET")) {

                            String appname=pi.applicationInfo.loadLabel(packageManager).toString();

                            internetpermissionsText += appname + "\n";

                            Log.e("TAG", "Im in!");

                            }

                            internetPermission.setText(internetpermissionsText);

                        } 
```

应用程序列表应显示为

```
Angry Birds
Facebook
Twitter
Internet 
```

但它只是显示

```
Angry Birds 
```

Logcat（垃圾邮件太多） [http://pastebin.com/PEs8z0Kf](http://pastebin.com/PEs8z0Kf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:29:21.020

试试这种方式，正如我在上面的评论中所说：

```
String internetpermissionsText = "";
for (PackageInfo pi : apps) {
    String[] permissions = pi.requestedPermissions;
    if (permissions != null) {
        for (String permission : permissions) {
            Log.d("TAG", permission);
            if (permission.equals("android.permission.INTERNET")) {
                String appname=pi.applicationInfo.loadLabel(packageManager).toString();
                internetpermissionsText += appname + "\n";
                Log.e("TAG", "Im in!");

            }
        }
    }
}
internetPermission.setText(internetpermissionsText); 
```

# jquery - jQuery：在元素 IE 错误上使用 wrap()

> ID：11704431
> 
> 赞同：0
> 
> 时间：2012-07-28T20:32:06.717
> 
> 标签：jquery, internet-explorer

这在除 Internet Explorer 之外的所有浏览器中都可以正常工作：

```
$newContent.wrap("<img src='" + $altContent + "' />"); 
```

`wrap`似乎在元素上失败了。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T20:37:38.170

该`img`标签是一个自闭合标签，您甚至可以在您发布的代码中看到（它以 结尾`/>`）。因此，将元素包装在图像标签中的想法没有任何意义。例如：

```
<img src="">
    <div></div>
</img> 
```

那是无效的标记，它本质上是你告诉 jQuery 尝试做的事情。如果它适用于其他浏览器，那只是因为它们正确地猜测了您真正想要做什么。这一次，Internet Explorer 实际上并没有犯任何错误——你是 :)

# java - Java Jetty 内存使用情况

> ID：11704433
> 
> 赞同：1
> 
> 时间：2012-07-28T20:32:19.707
> 
> 标签：java, servlets, jetty

我正在运行一个 Jetty Web 服务器并使用它来执行一些 bash 脚本，具体取决于它通过 GET 接收到的参数。[我从未与 Jetty 合作过，所以我从这里](http://wiki.eclipse.org/Jetty/Tutorial/)拼凑了一些东西来让它工作。我的问题是，当没有请求时，它会在大约 100mb 的内存处闲置，大约 12 小时后，它会闲置高达 1gb 的内存。如果请求是合法的，这对于只运行 bash 脚本的东西来说似乎是一个可怕的事情。servlet 最终提供的平均文件大小约为 400kb。

服务器如何启动：

```
public void startServer() {

    String hostname = "localhost";
    int port        = 7500;

    Server server = new Server();

    Connector connector = new SelectChannelConnector();
    connector.setHost(hostname);
    connector.setPort(port);

    server.setConnectors(new Connector[]{connector});
    server.setStopAtShutdown(true);

    ServletContextHandler context = new ServletContextHandler();
    context.setContextPath("/");
    context.addServlet(new ServletHolder(new DaemonServlet()), "/call/*");

    HandlerList handlers = new HandlerList();
    handlers.setHandlers(new Handler[] { context });

    server.setHandler(handlers);
    server.start();
    server.join();
} 
```

小服务程序（DaemonServlet）：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException {

    String msg = "";

    String call = request.getParameter("call");
    ProcessBuilder pb = null;
    Process p = null;

    switch (call) {
    case "sendAction": // Sends an action to a process with a certain ID
        pb = new ProcessBuilder("/bin/bash", "/opt/test/process.sh", request.getParameter("process"), request.getParameter("action"));
        break;
    case "getFile": // Reads the file with the given ID into a string, to be returned by Jetty
        pb = new ProcessBuilder("/bin/bash", "/opt/test/getFile.sh", request.getParameter("fileId"));
        try {
            p = pb.start();
            BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
            String scriptOutput = "";
            String line;
            while ((line = br.readLine()) != null) {
                scriptOutput += line + '\n';
            }
            br.close();
            msg = scriptOutput;
            p.destroy();
            p = null;
        } catch (Exception e) {}
        break;
    }

    response.setContentType("text/html");
    response.setStatus(HttpServletResponse.SC_OK);
    response.getWriter().println(msg);
} 
```

这里有什么似乎设置不正确的地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:07:57.720

正如 Reimeus 所说，您可能应该在得到输出时回显它。如果采用这种方式，则应在发送流程输出**之前发送响应标头（内容类型、状态代码）。**

至少，您应该[使用 StringBuilder 而不是连接 Strings](http://jtechies.blogspot.com.ar/2012/07/item-51-beware-performance-of-string.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:39:45.043

它看起来像这条线：

```
scriptOutput += line + '\n'; 
```

正在消耗大量内存。为什么不通过响应写回信息呢？

# objective-c - document.getElementByTag

> ID：11704438
> 
> 赞同：0
> 
> 时间：2012-07-28T20:32:58.127
> 
> 标签：objective-c, ios4, stringbyevaluatingjavascr

我已经使用了 document.getElementById，但它不再起作用了。我想获得 0,01€ 的价值，但我做不到。我想把它保存在我的`NSString *price`但如何。HTML代码是

```
<tr class="price">
<td>0,01</td>
<td>EUR</td> 
```

我的想法是

```
NSString *price = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('price.td').innerText;"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:43:02.030

在这种情况下，tagName 是“td”而不是“price.td”，但如果您运行，`document.getElementsByTagName('id')`您将获得页面中的所有表格单元格，这可能不是您想要的。

如果页面中加载了 jQuery，您可以使用它`jQuery('.price td:first').text()`来获取价格。

如果它没有 jQuery 但您可以控制页面，您可以向它添加一个类 ( `<td class="my-price">12.44</td>`) 并使用`document.getElementsByClassName('my-price')[0].innerHTML`.

如果您无法控制页面并且它没有 jQuery，您将必须找到“价格”行，然后使用`document.getElementsByClassName('my-price')[0].childNodes[0].innerHTML`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:01:31.100

此外，更简洁、更灵活的方法是使用 Selectors API：

[http://www.w3.org/TR/selectors-api/](http://www.w3.org/TR/selectors-api/)

```
document.querySelector('.price td:first').innerText 
```

# php - 未捕获的异常“com_exception”和消息“来源： Microsoft Office Excel

> ID：11704440
> 
> 赞同：-2
> 
> 时间：2012-07-28T20:33:26.253
> 
> 标签：php

我正面临这个问题。

我的文件 abc.php 是

```
<?php 
 ini_set ( 'max_execution_time', 300);

$filename = "d:\abhi.xlsx";

$sheet1 = 4;

$arr=array(1=>'a','b','c','d');

$excel_app = new COM("Excel.application") or Die ("Did not connect"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T00:44:12.590

好的，这为我解决了

如果您已配置 IIS，请尝试以下操作：

*   运行“dcomcnfg”进入组件服务
*   打开组件服务 > 计算机 > 我的电脑 > DCOM 配置
*   搜索 Microsoft Excel 应用程序或您在 COM 上使用的适当应用程序
*   右键单击它并打开属性
*   选择“身份”选项卡
*   通常，默认情况下将其设置为“启动用户”。您必须将其更改为“交互式用户”。
*   应用这些新设置并测试您的 COM 应用程序。它现在应该可以正常工作了。

[http://www.php.net/manual/en/class.com.php](http://www.php.net/manual/en/class.com.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:37:00.577

将其更改`Excel.application`为`Excel.Application`

# ocaml - 如何从 OCaml 调用 Tk 函数（lablTk 没有）？

> ID：11704443
> 
> 赞同：1
> 
> 时间：2012-07-28T20:34:10.807
> 
> 标签：ocaml, tk

我正在尝试使用 lablTk 在 Linux 下的 OCaml 应用程序中构建 GUI。我想选择一个目录；Tk 有一个`chooseDirectory`为此调用的函数，但 lablTk 没有此函数。如何从标准对话框中选择目录？Tk 8.4 支持这个功能，我希望 OCaml 可以使用它。

实际上，关于 lablTk 的 Tk 模块的文档很少。我从[这个文档](http://docs.camlcity.org/docs/godipkg/3.11/godi-ocaml-labltk/lib/ocaml/std-lib/labltk/tk.cmi_pretty)中看到Tk 模块中有`getOpenFile`和之类的功能，但没有.`getSaveFile``chooseDirectory`

1.  如何在 Tk 模块中查看 lablTk 导出的函数？/usr/lib/ocaml/labltk/ 中没有 tk.mli 文件。是不是意味着 Tk 模块的 C 端直接绑定到 等函数`getOpenFile`，而不经过 OCaml 模块？
2.  如果 Tk 模块可以直接绑定这些函数，也许我可以做一点工作，直接调用一个不包含在 lablTk 中的 Tk 函数，比如`chooseDirectory`？是否可以通过以某种方式将其声明为“外部”来调用此函数（如何？），还是我需要做更多的工作？我会考虑在 C 中编写一个小包装器，以便我可以调用除了 lablTk 中可用的函数之外的更多 Tk 函数，如果这可能并且不是很耗时的话；还是我必须修改lablTk的源代码，重新编译并安装lablTk的自定义版本，这样我才能使用更多的Tk功能？如果是这样，我如何使用这些更改重新编译 lablTk，我应该记住什么？（我在哪里可以看到文档？）

# regex - 如何在较大的字符串中捕获特定范围的数字？

> ID：11704444
> 
> 赞同：0
> 
> 时间：2012-07-28T20:34:12.010
> 
> 标签：regex

我有一个 15 位数字，后跟一个可以是任意长度的数字。

例如：

15位数字+2位数字；

15位数字+3位数字；

15位号码+10位号码；

如何使用 RegEx 将前 15 位数字捕获为“第 1 部分”，将剩余的数字捕获为“第 2 部分”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:36:16.380

试试这个正则表达式：

```
^(\d{15})(\d+)$ 
```

解释：

```
^      Start of string
$      End of string
\d     Any digit
{15}   Repeat 15 times
+      Repeat one or more times.
(...)  Capturing group 
```

# javascript - jQuery - 使用“每个”将类添加到超链接时遇到问题

> ID：11704445
> 
> 赞同：0
> 
> 时间：2012-07-28T20:34:13.337
> 
> 标签：javascript, jquery, hyperlink, each

例如，我有一些 Javascript 可以找到包含“google”的页面中的所有超链接，并将 url 的开头更改为另一个 url。

我正在尝试向这个受影响的链接添加一个类，但是我在 JS 控制台中收到了很多“未定义”错误。我试过 alert($(this).innerHTML)) ，它显示了超链接的内容 - 类和诸如此类的东西。但由于某种原因，我不能附加一个类。我也尝试过使用 this.className += "socks"。~~这也会导致未定义的错误~~. 我想我错过了一些简单的东西！

还有一种在搜索中使用正则表达式的方法，我对 Javascript 很陌生。

这是我的代码：

> ```
> $("a[href*='google']").each(function(){ 
>       this.href = this.href.replace('http://www.google.co.uk','http://www.ask.com');
>       this.href = this.href.replace('http://www.google.com','http://www.ask.com');
>       $(this).addClass("socks");
>   }); 
> ```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:43:25.593

尝试

```
$("a[href*='google']").each(function(){ 

    var href = $(this).attr('href');
    href.replace('http://www.google.co.uk','http://www.ask.com');
    href.replace('http://www.google.com','http://www.ask.com');
    $(this).attr('href', href);
    $(this).addClass("socks");
}); 
```

而不是使用 this.href。我猜你的代码没有到达 addClass 部分......

此外，使用 firebug（如果是 firefox）或 chrome 开发工具（如果是 chrome）进行调试。您可以简单地设置断点、添加手表等...

（在这种情况下，请确保使用所谓的非缩小版 jQuery 以便于调试）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T20:44:49.633

我可以看到此代码没有错误：

[http://jsfiddle.net/p7Sgj/](http://jsfiddle.net/p7Sgj/)

看到这个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T20:46:14.157

如果您的 HTML 代码是

```
<a href="http://www.google.co.uk">Hello</a>
<a href="http://www.google.com">World</a> 
```

你的 CSS 是

```
.socks {
    color:#f00;
} 
```

那么你的代码应该可以正常工作。

[http://jsfiddle.net/k93TZ/2/](http://jsfiddle.net/k93TZ/2/) 在这里工作。

它可能是您的 html 或 css 代码。

# facebook - 提要帖子上的通知

> ID：11704446
> 
> 赞同：0
> 
> 时间：2012-07-28T20:34:29.207
> 
> 标签：facebook, facebook-graph-api, notifications

我有一个网站，用户使用 Facebook 进行身份验证，并根据用户在我的网站中的操作发布到朋友的墙上。

要在朋友的墙上发帖，我使用图形 api，发帖到“/userid/feed”。并且帖子正确显示在朋友的墙上。

我遇到的问题是，如果帖子上有链接（使用“链接”参数），它将不会显示在朋友 Facebook 的通知部分（即顶部的地球图标）。如果我只是在墙上发布一些消息和图片，它会显示在通知中，但不会显示链接。

这是预期的行为还是 API 中的错误？无论如何，我怎样才能确保我的用户的朋友在他们的 Facebook 上收到通知？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:26:14.387

是的，这是预期的行为。真的没有办法解决这个问题。您可以发送链接到帖子的应用程序请求，但它只会显示为应用程序通知，它会增加某些计数器，但不会增加顶部的地球。

# php - 将条件数组传递给教义 expr()->orx() 方法

> ID：11704447
> 
> 赞同：41
> 
> 时间：2012-07-28T20:34:29.507
> 
> 标签：php, oop, doctrine-orm, doctrine, dql

我需要用`QueryBuilder`这样的方式构建 DQL

```
[QUERY]... AND WHERE e.type = x OR e.type = Y OR e.type = N [...] 
```

我在数组中有类型如何将这个数组传递给我的查询生成器？

```
$qb->andWhere($qb->expr()->orx(CONDITIONS)); 
```

类型列表将是动态的，调用`$qb->andWhere`每个 foreach 类型循环只会产生更多 AND WHERE 不再有 OR。
我可以存储乘法`orx`表达式然后将其添加到`andWhere`？知道如何解决这个可能是常见问题吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-04-16T20:22:18.227

我希望如此，然后我发现了这个：

```
$conditions = array('e.type = x', 'e.type = Y', 'e.type = N');
$orX = $qb->expr()->orX();

foreach ($conditions as $condition) {
    $orX->add($condition);
}

$qb->add('where', $orX); 
```

使用@meze 建议，您可以简化代码并将*foreach*语句替换为：

```
$orX->addMultiple($conditions); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-08-27T13:04:50.190

@DEY 他的答案可以简化。不需要 foreach，这也有效：

```
$conditions = array('e.type = x', 'e.type = Y', 'e.type = N');

$orX = $qb->expr()->orX();
$orX->addMultiple($conditions);

$qb->where($orX); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-29T11:36:18.063

我知道明天会更好。解决方案很简单。您可以像这样制作 OR 表达式数组

```
$ors[] = $qb->expr()->orx('e.type = '.$qb->expr()->literal($value)); 
```

然后只需通过 join 方法将其添加到查询构建器的 andWhere()/Where() 方法中，如下所示：

```
$qb->andWhere(join(' OR ', $ors)); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-01-26T08:55:36.583

您也可以`...`在 php 中使用，例如：

```
$conditions = array('e.type = x', 'e.type = Y', 'e.type = N');
$criteria = Criteria::create();
$criteria->andWhere(Criteria::expr()->orX(...$conditions)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-05T18:34:11.017

您也可以[像这样使用](https://stackoverflow.com/questions/5026983/how-to-expand-an-array-elements-as-separate-parameters-to-a-function)[call_user_func_array](http://php.net/manual/en/function.call-user-func-array.php)函数。

它允许您调用将数组项作为参数传递的方法。

例如：

```
$conditions = array('e.type = x', 'e.type = Y', 'e.type = N');
$expr = $qb->expr();
call_user_func_array(array($expr, 'orX'), $conditions); 
```

# c - 链接器命令失败，Xcode 中的退出代码为 1

> ID：11704448
> 
> 赞同：2
> 
> 时间：2012-07-28T20:34:29.627
> 
> 标签：c, xcode, linker-errors

我在 Xcode 中编写 C 程序，我遇到了这个问题：

```
ld: 1 duplicate symbol for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有什么办法解决吗？

注意：我昨天刚刚将我的操作系统更新为 Mountain Lion。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:44:29.567

一个常见的错误是当你想*声明一个符号时在头中**定义*它：

 *例如，当您声明一个全局变量而忘记了，`extern`或者您定义了一个内联函数却忘记了`inline`. 在这些情况下，编译器会在包含此标头的每个编译单元中发出符号，并且您最终会得到一个符号的多个定义。

无论如何，您应该只寻找有问题的符号。*

# javascript - jquery next() 问题

> ID：11704449
> 
> 赞同：0
> 
> 时间：2012-07-28T20:34:41.763
> 
> 标签：javascript, jquery, html

我有这样的代码：

```
var parent = $("#delete-button").closest('div');
var head = parent.prev('h3');
var linktext = head.next('a'); 
```

代码达到：

```
var parent = $("#delete-button").closest('div');
var head = parent.prev('h3'); 
```

工作正常，我可以同时使用父变量和头变量，但是：

```
var linktext = head.next('a'); 
```

似乎不能正常工作，因为：

```
alert(linktext.html()); 
```

返回`null`

* * *

HTML（没有 div 和#delete-button，抱歉）：

```
<h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role="tab" aria-expanded="false" aria-selected="false" tabindex="0">
    <span class="ui-icon ui-icon-triangle-1-e"></span>
    <a href="#" tabindex="-1">first</a>
</h3> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:38:30.243

因为 next 搜索兄弟姐妹（并且只有 IMMEDIATE 兄弟姐妹，如果选择器不匹配，它会返回一个空集），而您正在搜索孩子。尝试

```
head.find('a') 
```

反而。

# sql - 将所有与具有不同列数的查询联合起来

> ID：11704450
> 
> 赞同：12
> 
> 时间：2012-07-28T20:35:20.407
> 
> 标签：sql, sqlite

我遇到了一个情况，我期望返回错误的 sqlite 查询实际上是成功的，我想知道是否有人能指出为什么这个查询是有效的。

```
CREATE TABLE test_table(
  k INTEGER,
  v INTEGER
);

INSERT INTO test_table( k, v ) VALUES( 4, 5 );

SELECT * FROM(
  SELECT * FROM(
    SELECT k, v FROM test_table WHERE 1 = 0
  )
  UNION ALL
  SELECT * FROM(
    SELECT rowid, k, v FROM test_table
  )
) 
```

[上面的sqlfiddle](http://sqlfiddle.com/#!7/0a28f/2)

我认为联合具有不同列数的两个选择会返回错误。如果我删除最外层`SELECT *`，那么我会收到我期望的错误：`SELECTs to the left and right of UNION ALL do not have the same number of result columns`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T15:28:07.067

答案似乎很简单：**是的，这是一个怪癖。** 我想用一个简短的例子来证明这一点。但事先，让我们查阅[文档](http://www.sqlite.org/lang_select.html#compound)：

> 可以使用 UNION、UNION ALL、INTERSECT 或 EXCEPT 运算符将两个或多个简单的 SELECT 语句连接在一起以形成复合 SELECT。在复合 SELECT 中，所有组成的 SELECT 必须返回相同数量的结果列。

因此，文档非常清楚地表明，两个`SELECTs`必须提供相同数量的列。但是，正如您所说，最外层`SELECT`奇怪地避免了这种“限制”。

**示例 1**

```
SELECT * FROM(
    SELECT k, v FROM test_table
  UNION ALL
    SELECT k, v,rowid FROM test_table
); 
```

结果：

```
k|v
4|5
4|5 
```

`rowid`正如评论中所指出的，第三列被简单地省略了。

**示例 2**

我们只是切换两个 select 语句的顺序。

```
 SELECT * FROM(
    SELECT k, v, rowid FROM test_table
  UNION ALL
     SELECT k, v FROM test_table
  ); 
```

结果

```
k|v|rowid
4|5|1
4|5| 
```

现在，sqlite 不会省略该列，而是添加一个空值。

**结论**

这使我得出结论，如果将 sqlite`UNION ALL`作为子查询处理，则它只会以不同的方式处理。

PS：如果你只是使用`UNION`它在任何情况下都会失败。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-08T03:17:35.863

UNION ALL 将在额外的列中返回具有空值的结果。

基本的 UNION 将失败，因为没有 ALL 的 UNION 必须在两个表中具有相同数量的列。

所以：

```
SELECT column1, column2 FROM table a
UNION ALL 
SELECT column1, column2, column3 FROM table b 
```

在第 3 列中返回 3 列，其中包含空值。

和：

```
SELECT column1, column2 FROM table a
UNION 
SELECT column1, column2, column3 FROM table b 
```

应该失败，因为列数不匹配。

总之，您可以向 UNION 添加一个空白列，以便您从每个表中选择 3 列，它仍然可以工作。

前任：

```
SELECT column1, column2, '' AS column3 FROM table a
UNION  
SELECT column1, column2, column3 FROM table b 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-27T06:35:54.687

如果您的第二个查询的列数较少，您可以这样做：

```
select col1, col2, col3, col4, col5
from table A

union all

select col1, col2, col3, col4, NULL as col5, 
from table B 
```

取而代之的是`NULL`，也可以使用一些字符串常量 - `'KPI' as col5`。

# php - 卡在分页的 youtube api 播放列表结果中，试图计算播放列表中所有视频的总时长

> ID：11704452
> 
> 赞同：1
> 
> 时间：2012-07-28T20:35:28.033
> 
> 标签：php, drupal, pagination, youtube-api, code-snippets

我想为我的 drupal 网站制作一个小 php 片段，它计算 youtube 播放列表中所有视频的所有持续时间。我设法在这个网站上找到了一个很好的起点，我做了一些改变，它几乎是好的：

```
<?php
$playlist_id = "266DBEDBE6892C11";
$url = "https://gdata.youtube.com/feeds/api/playlists/".$playlist_id."?v=2&alt=json&start-index=1&max-results=50";
$data = json_decode(file_get_contents($url),true);
$info = $data["feed"];
$video = $info["entry"];
$nVideo = count($video);
$length = 0;

echo "Playlist Name: ".$info["title"]['$t'].'<br/>';
echo "Number of Videos (".$nVideo."):<br/>";
for($i=0;$i<200;$i++){
$temporary_length =  $video[$i]['media$group']['yt$duration']['seconds'];
$length += $temporary_length;
echo "Lenght: ". $temporary_length ."<br/>";
}

echo "Length: " . $length ;

?> 
```

我的问题是，我无法分页，youtube 最多只能给我 50 个结果。我尝试使用 start-index 参数，但这对我不起作用。我搜索了 youtube api 页面，但我不知道该怎么做。我不是程序员，这是我有限的编程知识所能想到的。我应该在代码中添加什么来计算播放列表中的所有视频？或者，如果有人可以帮助我制作另一个片段，那也将是完美的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:36:15.670

抱歉无法在这里测试，但考虑到您遇到的错误，我认为您首先需要检查您从 youtube 收到的数据。

我还为您提供了一种友好的方式来测试当前页面和每页的请求。

```
<?php

//Configurable
$playlist_id = "266DBEDBE6892C11";
$results_per_request = 50;
$current_page = 1;

$start_index = $request_per_page * ($current_page - 1) + (($current_page > 1) ? 1 : 0);
$url = "https://gdata.youtube.com/feeds/api/playlists/".$playlist_id."?v=2&alt=json&start-index=".$start_index."&max-results=".$results_per_request;
$data = json_decode(file_get_contents($url),true);

if (is_array($data) && count($data) > 0)
{
$info = $data["feed"];
$video = $info["entry"];
$nVideo = count($video);
$length = 0;

echo "Playlist Name: ".$info["title"]['$t'].'<br/>';
echo "Number of Videos (".$nVideo."):<br/>";
for($i=0;$i<200;$i++){
$temporary_length =  $video[$i]['media$group']['yt$duration']['seconds'];
$length += $temporary_length;
echo "Lenght: ". $temporary_length ."<br/>";
}

echo "Length: " . $length ;
}
else
{
echo "Youtube did not return any more results."
}

?> 
```

# c++ - C++ Changing the parent class within the child class

> ID：11704455
> 
> 赞同：1
> 
> 时间：2012-07-28T20:36:13.713
> 
> 标签：c++, inheritance, pointers, parent

My very first post here! I have been using this site for many years as a reference and to find solutions to common problems. Unfortunately this problem I am facing is one that have not been found here yet! So here it is. I have been working on a project for some time now. My program has several thousand lines of code so I will not post it all here. Basically, I have a subclass in which I wish to change the parent class to one that has been already initialized in my code some place. I am not sure if this is possible or if it is good code practice. But I will let you guys be the judge of that! Here is the problem I am facing:

```
#include <stdio.h>

class Base

    public:
        int data;
        Base(int);
};

class Child : public Base
{
    public:
    Child(void);
        void run(Base*);
};

Base::Base(int var)
{
    data=var;
}

void Child::run(Base* base)
{
      this = base //I know that you can create a reference to the parent class
                    //by casting this pointer to a Base pointer, but was wondering
                   //if you can do this the other way around. 
    printf("%d\n",Base::data);
}

int main()
{
Base* base1 = new Base(5);
Base* base2 = new Base(3);
    Child one();

one.run(base1);

    delete base1;
    delete base2;
    base1=0;
    base2=0;
    return 0;
} 
```

So if this compiles(which it does not) it would outputt something like 5 and if I change the run method parameter to base2 it should print something like 3\. Is this possible? Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:40:59.437

You cannot do precisely what you want, but you may be able to do something similar. If the parent class has a *copy constructor*, which lets you create an instance which is a copy of another instance, then you can use that copy constructor to create your parent object while your child object is being constructed:

```
class Child : public Base
{
    public:
    Child(const Base &b) : Base(b) { ...} 
```

Now you have a `Child` object whose `Base` parts are identical to those of another `Base` object.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T20:42:47.857

No, you cannot do things like that. `This` is a READ-ONLY pointer. The line

```
 this = base; 
```

WILL generate a syntax error.

Base classes in C++ are static. They cannot be changed at run time.

Although, if your classes (both the base and the child) do not have virtual functions, the follwoing WILL work:

```
(Base&)*this = *base; 
```

At the same time I would discourage you to do this. The reason of discouraging is because such code would be highly vulnerable for changes. For example, if virtual method will be added to either of the classes, then the VMT will be overwritten. This may not work with multiple inheritance. In my experiments with MSVC I noticed that sometimes it changes the order of base classes in the binary layout of the class.

In other words, this can be used if you are **absolutely sure** of the layout that is used by compiler. If you are sure that compiler will not change this layout in the future. If not, better avoid this.

The right approach is to create a special method and copy in the data field by field.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T20:44:56.533

Consider `this` to be const. When you obtain a reference to the base class, you're simple obtaining a reference to some subset (portion) of the subclass; the base class instance is tightly bound to the class-as-a-whole (subclass instance in this case). You can direct how that base class is initialized (see Ernest's response), but you cannot break that link.

Usually the memory layout of a class-with-base-class is something like:

> [ ... | base-class | ... ... .. ]

It's literally embedded, as opposed to existing independently (the following is not normal, I'd even go so far as to state it never happens - but that's an internal compiler choice):

> [ ... | reference to-base-class | ... ... .. ] [ independent base-class instance ]

# sql - 如何在具有许多表的 mssql 中使用 distinct？

> ID：11704458
> 
> 赞同：0
> 
> 时间：2012-07-28T20:36:33.723
> 
> 标签：sql, duplicates, distinct, records

使用下面的 SQL 语句，我可以根据需要获取有关学生的所有信息，除了一个问题是重复记录，而实际上最后一次输入的记录只需要每个学生。

```
学生证年级学期
20012-000001 20012-20013 1
20012-000001 20012-20013 2
20012-000001 20012-20013 3    
20012-000001 20012-20013 4        
20012-000001 20012-20013 5

```

```
 sqlSTR = "SELECT tblStudent.StudentID AS '??? ??????' , (tblStudent.FirstName + ' ' + tblStudent.MiddleName + ' ' + tblStudent.GrandFatherName + ' ' + tblStudent.LastName) as '?????' ," & _
                "tblStudent.Gender as '?????', tblStudent.Citizenship as '???????', tblStudent.Type as '??? ?????'," & _
                "tblDepartment.DepartmentTitle as '?????', tblEnrolment.SchoolYear as '????? ????????',tblYearLevel.YearLevelTitle as '????? ???????',  " & _
                "'????'= CASE WHEN Len(tblGraduate.StudentID)<>12 THEN '???' ELSE ''End , " & _
                "'???? ???'= CASE WHEN Len(tblDropped.StudentID)<>12 THEN '???' ELSE ''End , " & _
                "'??????'= CASE WHEN tblStudent.Transferee ='True' THEN '???' ELSE ''End" & _
                " FROM tblDropped RIGHT JOIN " & _
                "(tblGraduate RIGHT JOIN " & _
                "(tblDepartment RIGHT JOIN " & _
                "(tblYearLevel RIGHT JOIN " & _
                "(tblSection RIGHT JOIN " & _
                "(tblStudent LEFT JOIN tblEnrolment " & _
                "ON tblStudent.StudentID = tblEnrolment.StudentID) " & _
                "ON tblSection.SectionID = tblEnrolment.SectionOfferingID) " & _
                "ON tblYearLevel.YearLevelID = tblEnrolment.YearLevelID) " & _
                "ON tblDepartment.DepartmentID = tblSection.DepartmentID) " & _
                "ON tblGraduate.StudentID = tblStudent.StudentID) " & _
                "ON tblDropped.StudentID = tblStudent.StudentID" & _
                " " & sFilter & _
                " ORDER BY tblStudent.StudentID DESC , tblYearLevel.YearLevelTitle ASC" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:43:52.783

将日期字段添加到包含记录并按最近过滤的表中。如果表已经有一个按日期包含 WHERE 子句？

如果我正确理解你的表格，最后一条记录总是在最后一个学期，如果你知道这个学期，只需为 Student_ID 做一个唯一的关键字

# oracle-coherence - 甲骨文一致性

> ID：11704459
> 
> 赞同：2
> 
> 时间：2012-07-28T20:36:38.003
> 
> 标签：oracle-coherence

我是 Oracle Coherence 的新手。我阅读了文档并使用命令提示符进行了动手操作。我在理解上没有问题。然后我用oracle coherence工具下载了eclipse。我为 oracle coherence 创建了应用程序客户端，如下所示 [http://docs.oracle.com/cd/E18686_01/coh.37/e18692/installjdev.htm](http://docs.oracle.com/cd/E18686_01/coh.37/e18692/installjdev.htm)

我也是这样跑的。它工作正常，就像我在控制台应用程序中所做的那样。然后我在同一个工作区创建了一个新项目，创建了一个访问命名缓存的主类，使用下面的代码放置和检索了一些值，

```
package coherenceClient;

import com.tangosol.net.CacheFactory;
import com.tangosol.net.NamedCache;

public class Main {
    public static void main(String[] args) {

        NamedCache cache = CacheFactory.getCache("myCache");

        cache.put("MyFirstCacheObject", "This is my first Cache Object");

        System.out.println(cache.get("MyFirstCacheObject"));
    }
} 
```

我重新获得了相同的价值。然后我创建了另一个类，尝试检索相同的值，但它返回 null。代码中是否有任何错误？

```
package coherenceClient;

import com.tangosol.net.CacheFactory;
import com.tangosol.net.NamedCache;

public class Recevier {
public static void main(String[] args) {

    NamedCache cache = CacheFactory.getCache("myCache");
    System.out.println(cache.get("MyFirstCacheObject"));
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:37:05.520

如果一致性缓存驻留在 JVM 中（它不是作为独立服务器运行），那么在您的程序完成后所有数据都会被丢弃（您使用内存存储）。试着把 Thread.sleep(200000); 到第一个程序结束，然后在超时内运行第二个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:56:06.070

在命令提示符下，您已经启动了服务器（作为独立的）并且客户端已加入服务器。因此，缓存中的所有数据都将可用，直到服务器停止，即使将数据插入缓存的客户端离开服务器会话也是如此。
但在上述情况下，一致性缓存驻留在 JVM(Eclipse) 本身中，而不是作为独立服务器。因此，当程序存在时，您将获得空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T12:27:55.253

当您运行第二个 JVM 时，检查原始一致性缓存服务器节点 stdout 以查看您是否真的看到新成员加入集群（检查 MemberSet）。您可能只是在运行两个完全不知道彼此的独立 JVM；因此 CacheFactory.getCache("myCache") 在每个 JVM 中创建缓存。

解决这个问题的方法是使用 cache-server.cmd 启动一致性缓存服务器，然后使用分布式/分区或复制方案运行 eclipse 程序。这样，即使您的程序退出，实际数据也会保存在一致性缓存服务器中，供第二个 JVM 在加入“同一集群”时检索。

# java - 如何对 hashmap 字符串、集合进行排序 > 按字符串[索引]

> ID：11704474
> 
> 赞同：0
> 
> 时间：2012-07-28T20:38:35.053
> 
> 标签：java, collections, hashmap, sorting

我想对这张地图进行排序：

```
Map<String, Collection<String[]>> map = new HashMap<String, Collection<String[]>>(); 
```

在地图中例如：

```
String key = "MyKey";
Collection<String[]> values = new ArrayList<String[]>();
map.put(key, values);

String[] firstValues = { "John", "21", "M"};
values.add(firstValues); //Name, Age, Gender

String[] secondValues = { "Jane", "31", "W"};
values.add(secondValues); 
```

等等

所以最后，我有： 地图：

```
Mykey : [["John", "21", "M"], ["Eve", "31", "W"]]; 
```

我想做：

```
Collection<String[]> values = map.get(key); 
```

然后按特定索引排序，例如按字母顺序按第一个索引（姓名）或按第二个索引（年龄）。所以在第一次排序之后将是：

```
Mykey : [["Eve", "31", "W"], ["John", "21", "M"]]; 
```

第二次排序后：

```
Mykey : [["John", "21", "M"], ["Eve", "31", "W"]]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T21:01:51.963

在我看来，您的代码就像是 Ruby 等动态语言经验丰富的开发人员编写的代码。您可能会发现这不是您使用 Java 的最佳途径。您应该`String[]`使用包含这些字符串作为属性的适当对象来建模。

另外我认为你的问题的地图部分不是很相关——你实际上是在处理你需要按其中一个属性排序的对象集合。您碰巧在地图中有几个这样的集合不会影响解决方案。

排序本身是按照@Havard Geithus 已经建议您的那样完成的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T20:47:59.770

使用指定比较器的 API `java.util.Collections.sort(List list, Comparator c)`，并根据需要实现它（一个用于名称，另一个用于年龄）

此外，不要使用`String[]{name, age, gender}`作为元素，而是创建一个`Person`将这些变量作为成员的类。我可能也会将您想要的两个比较器放在此类中：

```
public static final Comparator<Person> AGE_COMPARATOR = new Comparator<Person>() {
    @Override
    public int compare(Person p1, Person p2) {
        // implement
    }
}; 
```

现在你可以简单地打电话

```
Collections.sort(map.get(key), Person.AGE_COMPARATOR); 
```

假设您使用 List 接口而不是 @Vatev 建议的 Collection 接口：

```
Map<String, List<Person>> map = new HashMap<String, List<Person>>(); 
```

# gtk# - 如何在 gtk# 的 TextView 中获取光标下的文本行？

> ID：11704476
> 
> 赞同：2
> 
> 时间：2012-07-28T20:38:49.827
> 
> 标签：gtk#

我有一个 GTK# TextView，我想阅读**光标下的文本行**。我没有看到可以做到这一点的单一方法，所以我认为我需要组合几个方法调用，例如`Buffer.GetText`, `Buffer.GetIterAtOffset`, `Buffer.CursorPosition`，但对我来说正确的组合并不明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-18T08:36:20.340

TextIter 使用起来有点奇怪。Buffer.CursorPosition 为您提供当前位置。

很容易找到行尾：

```
var end = Buffer.CursorPosition;
end.ForwardToLineEnd(); 
```

要获取第一个字符，没有对称方法，因此您可以尝试：

```
var start = Buffer.CursorPosition;
start.BackwardChars(start.LineOffset); // LineOffset gives you the iter offset on the current line. 
```

# android - 由于 desktop.ini，eclipse 无法构建

> ID：11704478
> 
> 赞同：1
> 
> 时间：2012-07-28T20:39:27.127
> 
> 标签：android, eclipse

刚刚更新了 SDK 和 ADT，现在在这里运行一个测试项目，我无法构建它。

Android AAPT 问题“资源目录名称无效”，问题是放置在所有 res 文件夹中的 desktop.ini。如果我删除它，它就会被放回去。desktop.ini 还阻止构建 r.java，因为它依赖于一个干净的 res 文件夹。

如果重要的话，我的工作区位于 Google Drive 目录中。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:52:13.407

我用google drive也遇到了同样的问题，请用windows文件夹浏览器搜索，在整个项目文件夹中搜索desktop.ini，这样就可以全选，一次全部删除。不要尝试在文件夹中一一删除。（我在整个项目中有 1000+ 个 desktop.ini）

# spring - 在 grails.test.GrailsMock 上设置属性

> ID：11704481
> 
> 赞同：3
> 
> 时间：2012-07-28T20:39:55.457
> 
> 标签：spring, unit-testing, grails

我似乎无法弄清楚如何在服务单元测试中设置模拟服务的属性。我尝试过使用需求对象和`setProperty`似乎从 Grails 2 中消失的方法。

```
@TestFor(SomeService)
@Mock([HelperService])
class SomeServiceTests {

void testDoSomething() {
    def helperService = mockFor HelperService

    // tried this, error in method being tested
    helperService.setProperty('propToSet',['a','b'])
    // tried this, error in test
    helperService.demand.propToSet = ['a','b']
    // tried this, error in method being tested
    helperService.demand.getPropToSet() {['a','b']}

    service.helperService = helperService

    assert service.doSomething('aa') != null
}
} 
```

对于其中的大多数，错误是`No such property: propToSet for class: grails.test.GrailsMock`从我正在测试的需要它的方法中抛出的。上面的第二个选项实际上给出了一个硬错误。如何在模拟的 Grails 对象中设置属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:28:48.150

我对 Grails 模拟工具的体验也不是很好。所以我一直在使用 GMock 并对它感到满意。GMock 与所有 Grails 测试配合良好，包括控制器、服务和域类以及 Spock 的规范。

要使用它，只需将以下行放入 grails-app/conf/BuildConfig.groovy：

```
dependencies {
    test 'org.gmock:gmock:0.8.2'
} 
```

这是您的代码的 GMock 版本。

```
@WithGMock
@TestFor(SomeService)
class SomeServiceTests {

    void testDoSomething() {
        def helperService = mock(HelperService)
        helperService.propToSet.returns(['a', 'b'])    
        service.helperService = helperService
        play {
            assert service.doSomething('aa') != null
        }
    }

} 
```

请注意，您的模拟代码只会在`play { }`块中产生影响。所以我们需要这个块来包裹断言语句。

# azure - SSMA 不会将我的所有访问表都转换为 Azure

> ID：11704483
> 
> 赞同：0
> 
> 时间：2012-07-28T20:40:24.457
> 
> 标签：azure, data-migration, ms-access-2010

我有一个 Access 项目，其中表将放在 Azure 上，然后数据库拆分，以便前端保持 Access 表单（我知道不是很高的技术 :)）问题是，当我以前使用 SSMA 时，所有表被发现，一切都很好。从那时起，我添加了更多表格（添加到新版本的程序，而不是我已经转换为 Azure 的那个，这只是一个测试），但是当我尝试 SSMA 时，它只会找到最新的表格。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T21:02:34.200

自从我在 Access 中工作以来已经有一段时间了，但是您已经在 Access 数据库中移植到 Azure 的表现在是否链接到此 Access 数据库中的表？如果表是链接表（意味着它们在另一个数据源中），那么我不希望 SSMA 显示它们。

此外，我非常怀疑以这种方式将 Access 与 Azure 一起使用。Access 前端表单中没有内置重试逻辑，这意味着您在尝试保存、读取这些记录时会遇到暂时性错误，这些记录将不会得到很好的处理，并且您最终可能会处于不一致的状态。一个选择，除了从 Access 作为前端（如果不是一个选项）移开之外，是不依赖 Access Forms 为您提供的绑定，让您手动编写所有绑定代码来处理瞬态错误；但是，当您完成此操作时，您可能已经将表单重新编写到 Web 或桌面应用程序中。关于瞬态故障的文章：http: [//windowsazurecat.com/2010/10/best-practices-for-handling-transient-conditions-in-sql-azure-client-applications/](http://windowsazurecat.com/2010/10/best-practices-for-handling-transient-conditions-in-sql-azure-client-applications/)

# java - 不能使用公共静态方法？

> ID：11704484
> 
> 赞同：5
> 
> 时间：2012-07-28T20:40:33.427
> 
> 标签：java, android

这令人困惑。我正在查看[NotificationManager 类的 Android 2.2.2_r1 源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2.2_r1/android/app/NotificationManager.java/)，我看到了`getService()`定义为`public`and的方法`static`。但是，日食告诉我：

> 方法 getService() 未定义为类型 NotificationManager 上线

```
 Object o = NotificationManager.getService(); 
```

我的项目是针对 Android 2.2/ API Level 8 构建的。我尝试使用反射来查看方法名称和修饰符，果然，我回来了

`public static getService`

我在这里错过了什么吗？为什么eclipse会告诉我这个方法不存在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T20:59:42.600

[您将在这篇文章](http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/)中找到非常详细的答案。

简而言之：因为您针对 进行编译`android.jar`，它删除了所有隐藏的方法（例如您尝试访问的方法）。它们只会在运行时出现，供内部 android 使用。

* * *

但既然你也许也需要它。访问的正确方法`NotificationManager`是通过[`getSystemService`](http://developer.android.com/reference/android/content/Context.html#getSystemService%28java.lang.String%29)上下文的方法：

```
NotificationManager nm = (NotificationManager)ctx.getSystemService(Context.NOTIFICATION_SERVICE); 
```

作为`context`一个有效的上下文（比如你当前的活动）。

# c# - asp.net 多线程页面

> ID：11704485
> 
> 赞同：2
> 
> 时间：2012-07-28T20:40:37.657
> 
> 标签：c#, asp.net, .net, multithreading

我正在处理一个页面，该页面将通过从不同服务器获取数据来显示系统的当前状态。

在我的页面上，我有五个不同的标签和一个按钮。一旦我单击按钮，我想要五个不同的线程从服务器获取数据并更新相应的标签值。我使用以下代码制作了一个测试应用程序

```
protected void Page_Load(object sender, EventArgs e)
    {
        Thread t = new Thread(updateLbl);
        t.Start();
    }   

    protected void btnUpdateStatus_Click(object sender, EventArgs e)
    {
        Thread[] arrThread = new Thread[5];
        for (int i = 0; i < arrThread.Length; i++)
        {

            arrThread[i] = new Thread(new ParameterizedThreadStart(Update));
            arrThread[i].Name = "Thread" + (i + 1).ToString();

            arrThread[i].Start(
                new Parameters()
                    {
                        id = i + 1,
                        label = this.Master.FindControl("MainContent").FindControl ("Label" + (i + 1).ToString()) as Label
                    } as object);
        }
    }
    public void Update(object o)
    {
        Parameters p = o as Parameters;
        if (p != null && p.label != null)
        {
            p.label.Text = GetSystemState(p.id);
        }
    }
    class Parameters
    {
        public int id { get; set; }
        public Label label { get; set; }
    } 
```

它确实会更新标签的值，但页面会继续加载，直到检索到来自服务器的所有值，然后在页面上一次显示它们。

我想要一些东西，如果一个线程已经检索到它的数据，它的相应标签必须更新并可供客户使用，无论其他进程是否已检索到他们的数据，并且一旦检索到数据，它们必须得到更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:51:58.760

根本问题是了解 ASP.Net 页面生命周期

基本上，您在页面上使用多线程，但服务器将**响应发送给用户**，直到页面完成处理。

要获得所需的输出，请遵循以下方法：

[https://stackoverflow.com/a/11525692/1268570](https://stackoverflow.com/a/11525692/1268570)

欲了解更多信息：

*   [https://stackoverflow.com/a/11500932/1268570](https://stackoverflow.com/a/11500932/1268570)

# java - 将 BB 代码转换为 TextView 的 HTML

> ID：11704486
> 
> 赞同：0
> 
> 时间：2012-07-28T20:40:41.790
> 
> 标签：java, android, bbcode

我正在尝试将 BB 代码转换为 Java 中的 HTML 以用于 Android 项目。嵌入 bb 代码的文本示例如下所示：

> [b]This[/b] 是一些 [url="http://www.example.com"]example[/url] 文本来显示我的问题。
> 
> 也可能有几个段落 [i]of[/i] 文本和普通 URL [http://www.example.com](http://www.example.com)。

它需要在 TextView 中看起来像什么：

> **这**是一些显示我的问题的[示例](http://www.example.com)文本。
> 
> *也可能有*几段文本和普通 URL [http://www.example.com](http://www.example.com)。

不幸的是，我没有任何代码可以向您展示，因为我不知道该怎么做。我现在唯一能想到的就是制作很多正则表达式，但我不确定这是否是最好的解决方案。

最终这将全部显示在 Android`TextView`中。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:46:37.247

那里有一些 java BB 代码库。检查[此问题](https://stackoverflow.com/questions/849396/java-bbcode-library)以获取有关它们的信息。

# java - 日期到时间字符串转换一小时错误

> ID：11704495
> 
> 赞同：0
> 
> 时间：2012-07-28T20:41:54.397
> 
> 标签：java, android, string, date, time

例如，我有一个日期`2000-01-01T10:00:00Z`。这代表商店的营业时间，因此这意味着商店在 10 点钟营业。其他信息没用，是随机日期。我只需要将其表示为字符串：10:00。对于这个转换，我使用了一个简单的方法：

```
public String dateToString(Date date){
    SimpleDateFormat ft =  new SimpleDateFormat ("HH:mm");
    String time= ft.format(date);
return time;
} 
```

我认为这应该可行，首都 HH 代表 24 小时的时间。但是当我运行这段代码时，返回值为 11:00 ！为什么会这样，如何预防？格式功能是否会查看我的时区，并且日期中的设置是否错误（我认为我的手机设置是 mgt+1，因为我住在荷兰）？以及如何忽略这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:28:32.943

好的，找到了！Android 将日期转换为设备的时区。我不得不否决：

这有效：

```
public String dateToString(Date date){
    SimpleDateFormat ft =  new SimpleDateFormat ("HH:mm");
    ft.setTimeZone(TimeZone.getTimeZone("UTC"));
    String time= ft.format(date);
return time;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T21:48:10.067

# css - H2 跨度背景 - 宽度：自动无法正常工作

> ID：11704498
> 
> 赞同：0
> 
> 时间：2012-07-28T20:42:44.343
> 
> 标签：css, html

我带着更多问题回来了！

这可能是一件非常简单的事情，但它把我搞糊涂了。我有一个布局设置，以便页面和帖子（Wordpress）上的 H2 文本在两侧都有一个背景图像，通过使用 span:before 和 span:after 完成。

以下是它如何正常工作以及我希望整个 CSS 实现的目标：

[http://www.weburton.co.uk/content/demo/?page_id=121](http://www.weburton.co.uk/content/demo/?page_id=121)

目前这是通过 CSS 中的 min 和 max-widths 实现的。而且我已经将宽度部分设置为自动，它位于具有页面宽度的父元素下。我不明白线条如何不会根据 H2 的宽度自动调整大小。看，这里的问题：

[http://www.weburton.co.uk/content/demo/?p=36](http://www.weburton.co.uk/content/demo/?p=36)

这是使用的CSS：

```
#pagewrapper{ 
    width: 960px;
    margin: 0 auto;
    position: relative; 
    padding-top: 140px;
    text-transform: uppercase;
}

h2 span:before{background:url("http://weburton.co.uk/content/demo/wp-content/themes/epic/images/header_bg.jpg") repeat-x scroll left center transparent;content:" ";height:1px;margin-right:15px; left: 0%; position:absolute; margin-top: 15px; min-width: 25%; max-width: 50%; width: auto; }
h2 span:after{background:url("http://weburton.co.uk/content/demo/wp-content/themes/epic/images/header_bg.jpg") repeat-x scroll right center transparent;content:" ";height:1px; margin-left:15px; right: 0%;  position:absolute; min-width: 25%; max-width: 50%; width: auto;  margin-top: 15px; } 
```

基本上，我已经用尽了所有我能想到的选项。是否有我在这里遗漏的东西，或者是否有另一种方法可以使用其他东西来实现这种样式，但跨度更容易？

哦，我知道我有一些多余的样式调用，我正在清理它。:)

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:50:10.893

没有小提琴很难给你一个明确的答案，但我认为如果你尝试将显示属性更改为`display: inline-block`它应该可以解决问题。

这将导致元素充当块元素，同时仍内联显示（从而保留您当前的布局 - 块元素通常占据整个可用宽度，并且后跟换行符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:06:50.277

可能这就是你想要的

从 和中删除`min-width`和`max-width``h2 span:before``h2 span:after`

```
h2 span {
    position:relative;   
}
h2 span:before {
    left: -25%;
    width: 20%;
}
h2 span:after {
    right: -25%;
    width: 20%;
} 
```

# php - PHP uniqid() 的缩写形式来生成唯一的 url 令牌？

> ID：11704505
> 
> 赞同：4
> 
> 时间：2012-07-28T20:43:21.837
> 
> 标签：php, unique

> **可能重复：**
> [PHP 短哈希，如 URL 缩短网站](https://stackoverflow.com/questions/959957/php-short-hash-like-url-shortening-websites)

我需要一个函数，我可以在其中使用唯一的字母数字标记制作 url 标记，我会使用它，`uniqid`但对于用户喜欢的标记来说太长了，我必须去掉`uniqid`字符串的末尾多少才能让它更短但同时我可以在一秒钟内收到 1000 个请求（所以每毫秒 1 个）。我知道`uniqid`用于`microtime()`计算字符串。

这是可能的还是我必须使用其他功能。如果我必须使用其他功能，那么您能告诉我一两个吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T20:53:48.867

md4 似乎是最快的：[http](http://www.php.net/manual/en/function.hash.php) ://www.php.net/manual/en/function.hash.php但产生 32 个字符

crc32b 是 8 个字符，仍然是最快的哈希值之一

> echo hash('crc32b', 'http://stackoverflow.com');

这是 luka8088 在 1000 Kb 上发布的性能结果：

```
Results: (in microseconds)
   1\.  md4                           5307.912
   2\.  md5                           6890.058
   3\.  crc32b                        7298.946
   4\.  crc32                         7561.922
   5\.  sha1                          8886.098
   6\.  tiger128,3                    11054.992
   7\.  haval192,3                    11132.955
   8\.  haval224,3                    11160.135
   9\.  tiger160,3                    11162.996
  10\.  haval160,3                    11242.151
  11\.  haval256,3                    11327.981
  12\.  tiger192,3                    11630.058
  13\.  haval128,3                    11880.874
  14\.  tiger192,4                    14776.945
  15\.  tiger128,4                    14871.12
  16\.  tiger160,4                    14946.937
  17\.  haval160,4                    15661.954
  18\.  haval192,4                    15717.029
  19\.  haval256,4                    15759.944
  20\.  adler32                       15796.184
  21\.  haval128,4                    15887.022
  22\.  haval224,4                    16047.954
  23\.  ripemd256                     16245.126
  24\.  haval160,5                    17818.927
  25\.  haval128,5                    17887.115
  26\.  haval224,5                    18085.002
  27\.  haval192,5                    18135.07
  28\.  haval256,5                    18678.903
  29\.  sha256                        19020.08
  30\.  ripemd128                     20671.844
  31\.  ripemd160                     21853.923
  32\.  ripemd320                     22425.889
  33\.  sha384                        45102.119
  34\.  sha512                        45655.965
  35\.  gost                          57237.148
  36\.  whirlpool                     64682.96
  37\.  snefru                        80352.783
  38\.  md2                           705397.844 
```

ps 美味曾经对所有 URI 使用 MD5（所以对于任何 uri，delicious.com/md5hash）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:53:36.683

你有没有尝试过这样的事情？

```
$string = md5(rand()); 
```

如果太长，你可以用`substr()`它来缩短它。我发现它非常快。

# coffeescript - 干掉 ember.js 的计算属性

> ID：11704507
> 
> 赞同：2
> 
> 时间：2012-07-28T20:43:27.670
> 
> 标签：coffeescript, ember.js

我有一组非常相似的计算属性：

```
WZ.ExercisesHomeController = Em.ArrayController.extend
  content: Ember.A()

  arms: ( -> 
          @filterProperty('group.name', 'Arms')
        ).property('@each.isArms')

  abs:  ( -> 
          @filterProperty('group.name', 'Abs')
        ).property('@each.isAbs')

  back: ( -> 
          @filterProperty('group.name', 'Back')
        ).property('@each.isBack')

  chest: ( -> 
          @filterProperty('group.name', 'Chest')
        ).property('@each.isChest')

  legs: ( -> 
          @filterProperty('group.name', 'Legs')
        ).property('@each.isLegs') 
```

有什么办法可以将其更改为一个属性，可能是一组属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T03:29:00.767

是的。使用返回此过滤器函数的函数。

```
var filterFn = function(name) {
  return function() {
    return this.filterProperty('group.name', name);
  }.property('@each.is' + name);
};

Ember.ArrayController.create({
  arms: filterFn('Arms'),
  legs: filterFn('Legs'),
  ...
}); 
```

您甚至可以使用 Ember 的重新打开来动态添加过滤功能。

```
App.ArrayController = Ember.ArrayController.extend();

var names = ['Arms', 'Legs', ...];

var toAdd = {};
names.forEach(function(name) {
  toAdd[name] = filterFn(name);
});

App.ArrayController.reopen(toAdd); 
```

# javascript - 在javascript中返回两个字符串数组的差异的函数

> ID：11704509
> 
> 赞同：5
> 
> 时间：2012-07-28T20:43:42.003
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 Javascript 数组计算集合差异的最快或最优雅的方法是什么？](https://stackoverflow.com/questions/1723168/what-is-the-fastest-or-most-elegant-way-to-compute-a-set-difference-using-javasc)

我需要帮助设计一个函数，该函数将返回 Javascript 中两个字符串数组之间的差异（jQuery 也是可以接受的）。

我基本上是在寻找一个计算数组 A**减去**B的函数。

所以如果我们有以下“

```
A = ['伊斯坦布尔', '香港', '柏林'];
B = ['柏林', '波恩'];

```

调用`diff = minus(A,B)`结果应`diff`填充以下值`['Istanbul', 'Hong Kong']`

我不想使用像`JS Set`.

请帮忙提出建议...

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-28T20:48:21.943

```
function diff(A, B) {
    return A.filter(function (a) {
        return B.indexOf(a) == -1;
    });
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T20:47:30.200

最快的可能是常规循环

```
var A = ['Istanbul', 'Hong Kong', 'Berlin'],
    B = ['Berlin', 'Bonn'],
    C = [];

for (var i=A.length; i--;) {
   if (B.indexOf(A[i]) === -1) 
       C.push(A[i]);
}

console.log(C);
```

最优雅的是基于意见的，但类似

```
var A = ['Istanbul', 'Hong Kong', 'Berlin'],
    B = ['Berlin', 'Bonn'];

var C = A.filter(x => !B.includes(x));

console.log(C);
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T20:49:30.240

这里：

```
var minus = function ( a, b ) {
    return a.filter(function ( name ) {
        return b.indexOf( name ) === -1;
    });
}; 
```

**现场演示：http:** [//jsfiddle.net/SjF9p/](http://jsfiddle.net/SjF9p/)

# ruby-on-rails - 帮助程序在 rspec 测试中不可用

> ID：11704511
> 
> 赞同：0
> 
> 时间：2012-07-28T20:44:29.077
> 
> 标签：ruby-on-rails, rspec

中定义了`app/helpers`一个名为`SessionsHelper`. 当尝试从我那里访问这些方法时，`spec/requests/*`我收到一个`NoMethodError`.

是什么导致了这个问题？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:06:41.623

这是设计使然，如果您想在请求规范中使用辅助方法，则必须将它们包含在

```
include SessionsHelper 
```

# spring-mvc - JSTL 枚举标签

> ID：11704515
> 
> 赞同：2
> 
> 时间：2012-07-28T20:44:55.943
> 
> 标签：spring-mvc, jstl

我正在 Spring 中构建 Web 应用程序，并希望在 *.jsp 中将枚举值显示为标签

我的枚举：

```
public enum Type {BODY_WEIGHT, WEIGHTS}; 
```

现在我正在使用以下形式显示它：

```
 <form:select path="type" items="${typeLabels}" itemValue="value" itemLabel="label">
               <form:options/>
            </form:select> 
```

“typelabels”是将枚举值映射到标签的简单对象列表：

```
 List<ExerciseType> typeLabels = new ArrayList<ExerciseType>();
    typeLabels.add(new ExerciseType(Type.BODY_WEIGHT, "Body weight"));
    typeLabels.add(new ExerciseType(Type.WEIGHTS, "With weights")); 
```

效果很好。

现在我想显示具有枚举作为属性的对象列表：

```
 <c:forEach var="exercise" items="${list}" >
            <tr>
              <td>${exercise.title}</td>
              <td>${exercise.description}</td>
              <td>${exercise.type}</td>
            </tr>
          </c:forEach> 
```

显然，现在我得到了像“BODY_WEIGHT”和“WEIGHTS”这样的值。

有没有办法提供枚举值及其标签之间的映射列表，类似于前面的示例？

我不想用 BODY_WEIGHT("Body weight") 之类的东西对枚举中的标签进行硬编码，因为我想稍后本地化应用程序。

谢谢！

狮子座

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T22:43:29.220

将资源包关联到您的枚举，其中包含枚举名称作为键，枚举标签作为值。然后使用`<fmt:setBundle/>`和`<fmt:message>`以枚举名称作为键来显示关联的标签：

```
<fmt:setBundle basename="com.foo.bar.resources.Type" var="typeBundle"/>
<fmt:message key="${exercise.type}" bundle="${typeBundle}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-27T04:32:42.503

```
public enum UserType {
ADMIN("Admin"), USER("User"), TEACHER("Teacher"), STUDENT("Student");

private String code;

UserType(String code) {
    this.code = code;
}

public String getCode() {
    return code;
}

public static UserType fromCode(String userType) {
    for (UserType uType : UserType.values()) {
        if (uType.getCode().equals(userType)) {
            return uType;
        }
    }
    throw new UnsupportedOperationException("The code " + userType + " is not supported!");
} 
```

}

**在控制器中，您需要设置模型如下：**

```
ModelAndView model = new ModelAndView("/home/index"); 
```

model.addObject("user", new User()); model.addObject("类型", UserType.values());

**在 JSP 中你可以得到它如下：**

```
<form:select path="userType">
        <form:option value="" label="Chose Type" />
        <form:options items="${types}" itemLabel="code"  />
    </form:select> 
```

# php - 评论系统 - Ajax, Php & MySql

> ID：11704517
> 
> 赞同：0
> 
> 时间：2012-07-28T20:44:56.887
> 
> 标签：php, mysql, html, ajax, comments

我已经成功编写了一个**简单的评论系统**，它有两个字段：名称和评论。当用户输入值并按下提交时，它只需使用 Ajax 将评论添加到当前页面（不加载整个页面）。

现在，我还需要添加**“删除评论”**的能力，但我不知道如何实现。

如果您查看下面的代码，您会注意到在加载页面时我打印了所有现有评论，而在添加新评论时，我只是通过以下子代码将它们添加到 HTML 代码中：

> ```
> document.getElementById("result").innerHTML += 
>         "<font color='red' size='5'>" + str + "</font>";; 
> ```

我想声明一个数组来保存所有评论的值，并为每个“活动”的评论添加一个附加值。当这个值为真时，我打印当前评论，否则我不打印。

此外，我还没有成功实现这一点，这是一个好的解决方案吗？因为每次用户按下提交时，此解决方案都会重新打印所有评论。

有什么建议么？

我会很感激你的帮助。

这是我的代码：

> **主文件**

```
<html>
    <head>
    <title> </title>
    <script language="Javascript" src="ajax.js"> </script>
  </head>

  <body>
   <h1 align="center"><font color="#000080">Welcome, </font></h1>
   <p  align="center"><font color="#000080">Enter your name &amp; comment then press 
   "Submit Button"</font></p>
    <form name="f1" method="post">
       <p align="center"><font color="#000080">&nbsp;
        Enter your name: <input type="text" name="username" id="username">
        <font color="#000080">&nbsp;
        Enter your comment: <input type="text" name="comment" id="comment">
        <input value="Submit" type="button" 
       onclick='JavaScript:postRequest()' name="showdate"></font></p>

     </form>
     </br></br>

     <?php
     include_once("config.php");
     $query = "SELECT * FROM `comments` ORDER BY 'id'"; 
    //Execute query
     $qry_result = mysql_query($query) or die(mysql_error());

    // Insert a new row in the table for each person returned
     while($row = mysql_fetch_array($qry_result)){
        echo ' <p align="center">';
        echo "<font color='red' size='5'> name: </br>".$row['added_by'];
        echo " </br>comment: </br>".$row['comment'];
        echo "</font></p>";}
     ?>
    <div id="result" align="center">  </div>
</body>
</html> 
```

> **showcomments.php**

名称：' .$name; echo '评论：' .$content; 回声''？>

> **ajax.js**

```
 function postRequest() {
    var xmlHttp;
          try{
   // Opera 8.0+, Firefox, Safari
   xmlHttp = new XMLHttpRequest();
 }
             catch (e)
             {
               // Internet Explorer Browsers
               try{
                  xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
               }
               catch (e) {
                  try
                  {
                     xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
                  }
                  catch (e)
                  {
                     // Something went wrong
                     alert("Your browser broke!");
                     return false;
                  }
               }
             }

        var usr=window.document.f1.username.value;
        var cmnt=window.document.f1.comment.value;
        var url = "showcomments.php?username=" + usr +"&comment=" + cmnt;
        xmlHttp.open('GET', url, true);
        xmlHttp.setRequestHeader
              ('Content-Type', 'application/x-www-form-urlencoded');

        xmlHttp.onreadystatechange =function(){
            if(xmlHttp.readyState == 4){
                updatepage(xmlHttp.responseText);
            }
        }

        xmlHttp.send(url);
        }

     function updatepage(str){
        document.getElementById("result").innerHTML += 
            "<font color='red' size='5'>" + str + "</font>";;
        } 
```

（PS：我使用 MySql 创建了一个名为“comments”的表，其中包含以下列：Id、Added_by、comment。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:02:22.110

我不仅会在您的 PHP 文件中打印名称和注释，还会在表单中打印一个包含 ID 的隐藏字段。或者，更好的是带有 onClick="deleteComment(ID)" 的按钮。更重要的是：将每条评论放在一个带有 ID 的 p-tag 中，id=comment-id。您的 main.php PHP 文件将使用以下内容进行扩展：

```
while($row = mysql_fetch_array($qry_result)){
    echo ' <p align="center" id="'.$row['id'].'>';
    echo "<font color='red' size='5'> name: </br>".$row['added_by'];
    echo " </br>comment: </br>".$row['comment'];
    echo "</font></p>";} 
```

这个 (ajax) 函数 deleteComment(ID) 然后将要删除的评论的 ID 发送到另一个 PHP 脚本。这会将其从数据库中删除。

现在您有两个选择：您可以通过其 ID 删除页面上的 p-tag（这对于带有函数 $('IDofP').empty(); 的 jQuery 来说非常容易），或者您重新加载所有评论。

# php - 从 PHP 的下拉列表中获取多个值

> ID：11704519
> 
> 赞同：0
> 
> 时间：2012-07-28T20:45:06.050
> 
> 标签：php, html

这是我的下拉列表。

```
<p align="center"><select size="1" name="bo_chose" id="boID">
<option selected value="Select...">Select...</option>

<?php
while ($list_bo = mysql_fetch_array($select_brof)) {
echo "<option value=\"$list_bo[bo_name]     $list_bo[bo_code]\">$list_bo[bo_code],$list_bo[bo_name]</option>"; }
?>

</select></p> 
```

因此下拉菜单将首先显示“选择...”，然后将检索数据并列出 bo_name、bo_code in`<option>`

它运作良好。

问题是，我想将该值带到另一个 PHP 页面，该页面将删除下拉列表中的选定选项。当然 MySQL 和 PHP 会抱怨它不存在……为什么？

它将新值 $bo_chose（下拉列表的名称）作为新值作为 (bo_name, bo_code) — 作为一个值而不是拆分值。

因此，如果下拉列表是 (george Mike GM)，当我希望它只携带 bo_code 的“GM”时，数据会抱怨没有名为“George Mike GM”的值。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:14:27.913

只需用空格分隔值作为分隔符并选择第一个值。我可以知道为什么你首先需要携带姓名和身份证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:15:53.927

您应该只添加 $list_bo['bo_code'] 作为选项值而不是两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T21:19:49.093

如果我理解正确，您可以在 POST 表单中进行此选择，或者您通过 ajax 将其发送到要解析值的脚本。使用分隔符合并这两个变量。分隔符应该是一个你确定的字符，它永远不会在两个变量中的任何一个中。因此，您可以例如使用 ; 作为分隔符并写入 $list_bo[bo_name].';'.$list_bo[bo_code]。在接收脚本中，您只需按分隔符分解值，您将获得两个值作为数组。如果您不确定两个变量中会包含哪些字符，您可以在将其放入 html 之前对其进行 json_encode 或序列化。

# android-spinner - 带有 android 2.3 的屏幕中间出现微调器下拉菜单

> ID：11704520
> 
> 赞同：4
> 
> 时间：2012-07-28T20:45:11.800
> 
> 标签：android-spinner

我正在尝试使用 android 2.3 和 andorid 4.0。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/myColor"
    android:orientation="vertical" >

<Spinner 
            android:id="@+id/spinnerControl"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:layout_marginLeft="10dp" 
            android:textColor="@android:color/white"
            android:drawSelectorOnTop="true"
            android:divider="#000000"         
    android:dividerHeight="1dp" 
    style="@style/Sherlock.__Widget.Holo.Spinner"
            />
</LinearLayout> 
```

样式 xml 文件是 -

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="Sherlock.__Widget.Holo.Spinner" parent="@android:style/Widget">              
<item name="android:dropDownVerticalOffset">0dip</item>     
<item name="android:dropDownHorizontalOffset">0dip</item>     
<item name="android:dropDownWidth">wrap_content</item>     
<item name="android:gravity">left|center_vertical</item>     
<item name="android:spinnerMode">dropdown</item>     
<item name="android:clickable">true</item> 
</style> 
</resources> 
```

使用 android 4.0，我在微调器控件下获得微调器下拉菜单。但是对于andorid 2.3，它出现在屏幕中间，我不知道为什么。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:32:46.107

准确的说，是安卓4.0新增的主题。要获得这种风格，您需要提供名为“holo”的主题。但不幸的是，它不适用于 2.X 设备。因此，您将无法在 2.X 中获得这样的下拉菜单。

# multithreading - 即使辅助线程未完成运行，WCF REST 服务是否会向客户端返回响应？

> ID：11704521
> 
> 赞同：0
> 
> 时间：2012-07-28T20:45:28.823
> 
> 标签：multithreading, wcf, mixpanel

我正在尝试在我的 WCF REST Web 服务中实现一些分析逻辑，但我不想在这样做时损害性能。
我正在考虑启动一个新线程，该线程将与分析服务（Mixpanel）通信，而主线程执行实际工作，但我不确定这是否能完成我想做的事情。

我的假设是 Web 服务将在其主线程完成后立即返回响应，而辅助线程自行运行并且可能运行更长时间而无需客户端等待任何额外时间。

这是一个准确的假设吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:58:16.633

一些测试表明我的假设是准确的。

# forms - Symfony 形式。上传文件

> ID：11704525
> 
> 赞同：1
> 
> 时间：2012-07-28T20:45:50.367
> 
> 标签：forms, upload, entity, symfony-2.1

尝试使用 Entity 管理文件上传，但出现此错误：

> 致命错误：在第 327 行的 /home/projectpath/src/BS/MyBundle/Entity/Items.php 中的非对象上调用成员函数 move() 调用堆栈：0.0002 333264 1\. {main}() /home /projectpath/web/app_dev.php:0 0.0450 1158160 ...

这是实体类：

```
namespace BS\BackstretcherBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\HttpFoundation\File\UploadedFile;
use Symfony\Component\Validator\Constraints as Assert;

/**
* MB\MyBundle\Entity\Items
*
* @ORM\Table(name="items")
* @ORM\Entity
* @ORM\HasLifecycleCallbacks
*/
class Items
{
    private $filenameForRemove;

    /**
     * @Assert\File(maxSize="60000000")
     */
    public $file;
    ...

    protected function getUploadDir()
    {
       return 'images/items/';
    }

    protected function getUploadRootDir()
    {
      return __DIR__.'/../../../../web/'.$this->getUploadDir();
    }

    public function getWebPath()
    {
      return null === $this->file ? null : $this->getUploadDir().'/'.$this->getNameEn();
    }

    public function getAbsolutePath()
    {
      return null === $this->file ? null : $this->getUploadRootDir().'/'.$this->getNameEn().'.jpg';
    }

  /**
   * @ORM\PrePersist()
   * @ORM\PreUpdate()
   */
    public function preUpload()
    {
      if (null !== $this->file)
      {
         $this->file = $this->getId() .'.'. $this->file->guessExtension();
      }
    }

    /**
     * @ORM\PostPersist()
     * @ORM\PostUpdate()
     */
    public function upload()
    {
      if (null === $this->file)
      {
        return;
      }

      $this->file->move($this->getUploadRootDir(), $this->file);
      unset($this->file);
    }

    /**
     * @ORM\PostRemove()
     */
     public function removeUpload()
     {
       if ($file = $this->getAbsolutePath())
       {
         unlink($file);
       }
     } 
```

和控制器：

```
public function new_productAction(Request $request)
{
  $product = new Items();
  $product->setPrice(0);

  $form = $this->createFormBuilder($product)
    ->add('Type', 'choice', array(
      'choices'   => array('1' => 'Product', '0' => 'Article'),
      'required'  => false,))
    ->add('Price',  'number')
    ->add('nameEn', 'text')
    ->add('file', 'file', array('label' => 'Image', 'required' => true))
    ->getForm();

  if ($request->getMethod() == 'POST')
  {
    if ($form->isValid())
    {
      $form->bindRequest($request);
      $em = $this->getDoctrine()->getEntityManager();
      $em->persist($product);
      $em->flush();

      return new Response('<html><body>Success!</body></html>');
    }
  }

  return $this->render('MyBundle:Default:admin_page.html.twig', array(
    'form' => $form->createView(),
  ));
} 
```

Symfony 版本：2.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:18:17.473

我不认为 duke_nukem 再担心这个了，6 个月后，但如果其他人遇到这个问题，我遇到了完全相同的问题并在这里得到了很好的答案：

[symfony 2中的文件上传错误](https://stackoverflow.com/questions/14227666/error-with-file-upload-in-symfony-2?lq=1)

看起来 duke_nukem 和我犯了同样的错误。preUpload() 方法应为：

```
 /**
   * @ORM\PrePersist()
   * @ORM\PreUpdate()
   */
    public function preUpload()
    {
      if (null !== $this->file)
      {
         $this->path = $this->getId() .'.'. $this->file->guessExtension();
      }
    } 
```

当前代码转换`$this->file`为字符串，导致错误。路径实际上应该分配给`$this->path`.

另一个问题中的 Sybio 解决了这个问题，而不是我。我只是想传播爱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:03:11.183

有点奇怪

你的代码在你的控制器中是错误的。您必须在验证之前将您的请求绑定到您的表单。之后，您可以检索您的数据

```
if ($request->getMethod() == 'POST')
  {
    //Note: bindRequest is now deprecated
    $form->bind($request);
    if ($form->isValid())
    {
      //retrieve your model hydrated with your form values
      $product = $form->getData();

      //has upload file ?
      if($product->getFile() instanceof UploadedFile){
        //you can do your upload logic here wihtout doctrine event if you want
      }

      $em = $this->getDoctrine()->getEntityManager();
      $em->persist($product);
      $em->flush();

      return new Response('<html><body>Success!</body></html>');
    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:14:41.817

检查您的 php.ini 文件并确保 post_max_size 和 upload_max_filesize 都设置得足够大。

# css - 将 HTML“粘合”到图像上

> ID：11704527
> 
> 赞同：0
> 
> 时间：2012-07-28T20:46:01.290
> 
> 标签：css

这是我的困境，我有一个背景图像，上面有一个栏。我通过使用适合背景图像

```
body {
     background-image: url("foo");
     background-size: 100%;
} 
```

我也有一些我想*在*那个栏内的 html。问题是，当用户调整浏览器窗口的大小时，图像会调整以适应它（这是我想要它做的）但 html 保持在同一个位置，所以它被放在栏之外。有没有办法让我的 html 像图像一样调整大小，以便 html 看起来*粘*在图像上？有人可以给我一个css剪辑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:21:10.663

如果您希望栏可调整大小，请将其高度和宽度设置为容器高度和宽度的百分比量。当然，当窗口缩小到很大程度时，HTML 就会溢出，这是没有办法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:58:30.100

使用图像来指导布局的最大问题就是这个问题。不幸的是，哈里森，你没有解决方案可以让你在不改变图像的情况下跨浏览器或浏览器大小做你想做的事。如果可以的话，请张贴应该是什么样子的屏幕截图，以便我们可以帮助您修改背景以提高其兼容性

同时，我建议您从图像中删除条形并继续使用图像作为背景。然后使用 div`display: block;`并使用 bar 作为其背景。

# django - Django：如何进行聚合（GroupBy ID）和最新时间 戳？

> ID：11704529
> 
> 赞同：1
> 
> 时间：2012-07-28T20:46:27.597
> 
> 标签：django

我有一张这样的桌子：

```
ID    | Time Stamp
1     | 2012-07-28 18:57:48.160912+01 
1     | 2012-07-28 20:57:43.063327+01
2     | 2012-07-28 21:17:16.016665+01 
```

我想查看每个 id 的最新条目。

如果我这样做，我只会得到一个带有最新条目的对象：

```
open_deals = all_deals.latest('time_stamp'))

-->     2    | 2012-07-28 21:17:16.016665+01 
```

但我想得到

```
-->    1     | 2012-07-28 20:57:43.063327+01
       2     | 2012-07-28 21:17:16.016665+01 
```

我需要以某种方式聚合或分组 ID。但是文档中没有此功能。

有小费吗？谢谢

**更新：**

我尝试了以下解决方案：

```
result_list = [deal.dealchangelog_set.latest('time_stamp') for deal in open_deals]
        result_set = set()
        for item in result_list:
            result_set.add(item.pk)
        return open_deals.filter(pk__in = result_set) 
```

![在此处输入图像描述](../Images/ab3cd5288b9483bfeaf5089b3cc14697.png)

不幸的是，您可以看到该列表仍然包含三个对象而不是两个。:-(

这是我的模型（注意我没有使用 deal_id 作为 pk） pk 仍然是整数。就我而言，我需要获取最新的 deal_id，这不是唯一的。（为简单起见，我之前在这里将 uuid 显示为整数）

```
class Deal(models.Model):
    deal_id             = UUIDField()
    status              = models.ForeignKey(DealStatus, verbose_name=_(u"Deal Status"), null=True, blank=True)    
    contact             = models.ForeignKey(Contact)
    deal_type           = models.ForeignKey(DealType)    

class DealChangeLog(models.Model):
    deal                = models.ForeignKey(Deal)
    time_stamp          = CreationDateTimeField() 
```

**更新 2：**

```
def get_open_deals(call):
        all_deals = Deal.objects.filter(contact=call.contact)            
        closed_deals = all_deals.filter(status__in=[5, 6])
        closed_deal_list = []
        if closed_deals:
            for item in closed_deals:
                closed_deal_list.append(item.deal_id)
        open_deals = all_deals.exclude(deal_id__in=closed_deal_list)        
        result_list = [deal.dealchangelog_set.latest('time_stamp') for deal in open_deals]
        result_set = set()
        for item in result_list:
            result_set.add(item.pk)
        return open_deals.filter(pk__in = result_set) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:51:50.323

我不知道上下文，但我可能会像这样分解模型：

```
class Deal(models.Model):
    title = models.CharField()
    # maybe signal changes etcetera... 

class DealChangeLog(models.Model):
    deal = models.ForeignKey(Deal)
    date = models.DateTimeField(auto_now=True, auto_now_add=True) 
```

然后你可以通过列表理解来实现你的结果：

```
results = [deal.dealchangelog_set.latest('date') for deal in Deal.objects.all()] 
```

要将结果作为查询集获取，您可以执行以下操作：

```
Deal.objects.filter(id__in=[result.deal.id for result in results]) 
```

但是，如果您可以将结果作为列表处理，我认为额外查询没有多大意义

# c# - 从 Ruby 反序列化未知对象

> ID：11704532
> 
> 赞同：-3
> 
> 时间：2012-07-28T20:46:44.880
> 
> 标签：c#, ruby, reverse

我有一个从特定遗留程序序列化的对象，几乎没有关于该类型的文档。

我想将数据提取到 C# 中的可读结构中

我试过了：

*   在十六进制编辑器中打开文件并分析内容；他们是乱码，不是很清楚
*   没有太多描述，大概是压缩的

我知道的：

*   文件代表什么
*   我可以将更改（只要我不破坏任何校验和或任何东西）加载到遗留应用程序中
*   已经被Ruby序列化了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:33:44.640

您不应该使用 C# 来反序列化文件。您应该[在 Ruby 程序中解组数据](http://www.ruby-doc.org/core-1.9.3/Marshal.html)。然后，您的 Ruby 程序可以以 C# 可以轻松读取的语言中立格式（即 json、xml 等）发出它。

# python - 静态方法：获取类名？

> ID：11704534
> 
> 赞同：2
> 
> 时间：2012-07-28T20:47:05.510
> 
> 标签：python

有没有办法找到静态方法所属的类的名称？

```
class A(object):
    @staticmethod
    def my_staticmethod():
        return 'static'

    @classmethod
    def my_classmethod():
        return 'classmethod'

In [2]: A.my_staticmethod
Out[2]: <function utils.my_staticmethod>

In [3]: A.my_classmethod
Out[3]: <bound method type.my_classmethod of <class 'utils.A'>>
In [4]: A.my_classmethod.im_self.__name__
Out[4]: 'A' 
```

对于类方法，我可以通过获取类的名称，`A.my_classmethod.im_self.__name__`但对于静态方法我无法弄清楚。

任何想法？谢谢。

* * *

好吧，实际上这就是我想要做的。我正在尝试制作 2 个函数来“序列化/反序列化”一个函数/类方法/静态方法。

这意味着，有人可以将一个函数传递给序列化函数并获取一个字符串。

```
a_string = serialize(A.my_classmethod) 
```

例如，这个字符串可以存储在数据库中。然后，这个字符串应该足以解析函数以便能够调用它：

```
# later on...
f = deserialize(a_string)
# I can use my function
f(...) 
```

我可以使它适用于函数或类方法，但不适用于静态方法，因为我无法弄清楚它所属的类并使用 getattr ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:06:06.653

使用“巫毒”你可以解决它，但说真的 - 你只是想规避数据模型 - 那有什么好处？如果你想要一个类方法 - 使用一个类方法。如果它们是可以互换的，它们就不会不同！

并且：

```
@classmethod
def my_classmethod():
    return 'classmethod' 
```

真的应该是：

```
@classmethod
def my_classmethod(cls): # assuming no args
    return cls.__name__ # instead of A.my_classmethod.im_self.__name__ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T22:16:35.740

针对您对序列化/反序列化的评论，您可以更改接口：

```
def serialize(cls, function):
    return '{cls}.{func}'.format(cls=cls.__name__, func=function.__name__) 
```

您可以`sys.modules[__name__].__name__`用于任何模块级功能。

对于反序列化，您可能会发现`inspect.classify_class_attrs(cls)`有用。

# macos - NSView 拖动操作错误

> ID：11704540
> 
> 赞同：2
> 
> 时间：2012-07-28T20:47:57.850
> 
> 标签：macos, cocoa, encoding, drag-and-drop, nsview

我在 OS X 上用 Cocoa 编码。

我正在尝试接收一个拖放到我的 NSView 子类上的文件——我可以这样做；并**获取其内容和文件名并显示它们**- 我可以**第一次**对任何类型的文件执行此操作，但**第二次，当我尝试拖动另一个文件时，我只能设置标题`setTitle:`，但不能设置主体文本`setText:`**

**我得到的错误是：**

> 取消拖动，因为在拖动会话期间引发了异常“NSInternalInconsistencyException”（原因“无效参数不满足：aString！= nil”）

和

> -[NSTextFieldCell _objectValue:forString:errorDescription:], /SourceCache/AppKit/AppKit-1187/AppKit.subproj/NSCell.m:1532 中的断言失败

**我的代码（对不起，它很长！）：**

```
- (BOOL)performDragOperation:(id<NSDraggingInfo>)sender {
NSPasteboard *pboard;
NSDragOperation sourceDragMask;

sourceDragMask = [sender draggingSourceOperationMask];
pboard = [sender draggingPasteboard];

if ([[pboard types] containsObject:NSFilenamesPboardType]) {

    NSURL *file = [NSURL URLFromPasteboard:pboard];
    //NSData *data = [NSData dataWithContentsOfURL:file];

    NSError *error;
    NSStringEncoding encoding;
    NSString *contentString = [[NSString alloc] initWithContentsOfURL:file usedEncoding:&encoding error:&error];

    NSLog(@"Error: %@",error);

    NSString *last = [[file path] lastPathComponent];
    NSArray *parts = [last componentsSeparatedByString:@"."];
    NSString *filename = [parts objectAtIndex:0];
    NSString *fileType = [parts objectAtIndex:1];

    NSLog(@"FILETYPE: %@", fileType);

    if ([fileType isEqualToString:@"txt"] || [fileType isEqualToString:@"md"]) {
        [self setTitle:filename];

        if (self.textViewString == (id)[NSNull null] || self.textViewString.length == 0) {
            [self setText:contentString];
        } else {
            BOOL whatToDo = (NSRunCriticalAlertPanel(@"What do you want to do?", nil, @"Append", @"Replace", nil) == NSAlertDefaultReturn);

            if (whatToDo) {
                //Append
                [self setText:[NSString stringWithFormat:@"%@\n%@",self.textViewString,contentString]];
            } else {
                //Replace
                [self setText:contentString];
            }
        }
        return YES;
    } else {
        return NO;
    }
} else if ([[pboard types] containsObject:NSPasteboardTypeString]) {
    NSString *draggedString = [pboard stringForType:NSPasteboardTypeString];

    if (self.textViewString == (id)[NSNull null] || self.textViewString.length == 0) {
        [self setText:draggedString];
    } else {
        [self setText:[NSString stringWithFormat:@"%@\n%@",self.textViewString,draggedString]];
    }
    return YES;
}
else {
    return NO;
} 
```

}

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:15:04.050

听起来 Cocoa 在引发任何异常时会取消拖动，而当内部某些东西需要一个字符串并且正在获取一个`nil`值时，就会引发异常。

这只是一个猜测，没有更多信息，但我预测这`stringWithFormat:`会引发异常，因为它看起来是你所写内容中唯一真正可能脆弱的部分。

你正在做一些不明智的事情。首先，您假设这`-initWithContentsOfURL:usedEncoding:error:`是成功的。你不应该这样做。相反，您需要传递一个`NSError **`可以在错误时填写的值，测试是否`contentString`为 nil，如果是，请`error`相应地检查。我有一种感觉，你会发现你得到了`nil`，并且`error`会解释为什么。

可能不相关，但您`if (whatToDo)`并没有像您认为的那样做。由于`whatToDo`是指向自动释放`NSNumber`实例的指针，因此您的条件将*始终*评估为真，因为*指针*非零。您可能打算做的事情如下：

```
 BOOL whatToDo = (NSRunCriticalAlertPanel(@"What do you want to do?", nil, @"Append", @"Replace", nil) == NSAlertDefaultReturn);

    if (whatToDo) {
        //Append
        [self setText:[NSString stringWithFormat:@"%@\n%@",self.textViewString,contentString]];
    } else {
        //Replace

        [self setText:contentString];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:56:41.247

[非常感谢康拉德舒尔茨的这个答案](https://stackoverflow.com/a/11704702/447697)提供的许多提示和建议！我已经遵循了那里的建议和提示。

然而，我的问题被证明是非常非常基本的。它躺在线上`BOOL whatToDo = (NSRunCriticalAlertPanel(@"What do you want to do?", nil, @"Append", @"Replace", nil) == NSAlertDefaultReturn);`

事实证明，**必须**将一个字符串传递给第二个参数，但我传递的是`nil`. 固定的！

# c# - 根据作为搜索条件的另一个 xml 文件搜索文件的 xml 元素

> ID：11704550
> 
> 赞同：0
> 
> 时间：2012-07-28T20:48:46.127
> 
> 标签：c#, xml, xpath

我正在尝试根据查询 xml 文件搜索或获取一个文件的 xml 元素。此查询 xml 文件定义将搜索哪些元素并检索其值。即使元素存在，下面的代码也没有找到 xml 文件中的所有元素：

任何人都可以告诉我如何改进我的代码，或者找出问题所在？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;

namespace ReadXMLRecursively
{
    class Program
    {
        static void Main(string[] args)
        {

            doc.Load(@"C:\Requests.xml");
            doc2.Load(@"C:XmlLists.xml");

            XmlNodeList nList2 = doc2.SelectNodes("//Root/Element");

                    XmlNodeList nList = doc.SelectNodes("//Root/List");

                    foreach (XmlNode xmlNode in nList)
                    {
                        if (nList2 != null)
                            foreach (XmlNode n in nList2)
                            {
                                if (n.Attributes != null)
                                {
                                    string val = n.Attributes.GetNamedItem("SourceCol").Value;

                                    if (xmlNode[val] != null)
                                    {
                                        //if (n.Attributes != null) Console.WriteLine(n.Attributes.GetNamedItem("SourceCol").Value);
                                        XmlElement xmlElement = xmlNode[val];
                                        if (xmlElement != null) Console.WriteLine(xmlElement.Name);
                                    }
                                    else
                                    {
                                        Console.WriteLine(val + " not found");
                                    }
                                }
                            }
                        Console.WriteLine("------------- end------------------");
                    }
    }
} 
```

* * *

XML 文件 1

```
<root> 
  <list> 
       <FirstName>Abc</FirstName> 
       <LastName>LT</LastName> 
       <Occupatoin>Eng</Occupation> 
       <BirthDate></BirthDate> 
      ... 
 </list> 
</root> 
```

XML 文件 2

```
<root> 
  <Trainings> 
       <Java>Ab</Java> 
       <NET>b</NET> 
       <SQL>c</SQL> 
       <Powershell>d</Powershell> 
      ... 
 </Trainings> 
```

根据这个xml文件搜索上面的xml文件

```
<root> 
    <Element Name="Firstname /> 
    <Element Name="Lastname" /> 
    <Element Name="Occupation" /> 
    <Element Name="Java" /> 
    <Element Name="Net" /> 
    ... 
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:21:55.553

你写了：

> XmlNodeList nList = doc.SelectNodes("//Root/List");

在您的示例中，只有一个名为“list”的元素，因此您将`nList`只进入**一个**节点，其中包含一个包含所有子节点的长字符串，因此您无法通过循环获取它们。

如果要获取“列表”不同节点中任何元素的子节点，则需要将其更改为：
`XmlNodeList nList = doc.SelectNodes("//Root/List/*");`

# javascript - Knockout observable 数组不更新辅助表

> ID：11704552
> 
> 赞同：0
> 
> 时间：2012-07-28T20:49:14.450
> 
> 标签：javascript, knockout.js

我正在用一个可观察数组填充一个辅助表，该数组是另一个可观察数组的子级，但是当我从第一个表中选择一行时，辅助表中的记录不会更新以反映第一个表中的选定记录。我可以从日志消息中看到我对集合有可见性，因此看起来一切正常，但第二个表未显示预期结果。

请在此处查看我的 jsFiddle：

> [http://jsfiddle.net/D64Bj/5/](http://jsfiddle.net/D64Bj/5/)

您将在日志消息中看到，当我单击第一个表中的一行时，我可以看到集合中的第二个项目中有多少条记录，并且我得到了正确的 ID，但第二个表中的行没有更新。

有人看到我在这里做错了吗？关于使用 knockout.js 处理此问题的更好方法的任何建议？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:02:40.623

您需要使 ActiveTeam 成为 ko.observable，否则不会有任何绑定：

这是您需要的更改：

```
<tbody data-bind="foreach: ActiveTeam().Players">
...
myTeams.ActiveTeam = ko.observable(myTeams.Teams()[0]);
...
myTeams.ActiveTeam(item); 
```

编辑：[这是](http://jsfiddle.net/linorosa/D64Bj/6/)一个小提琴

# php - 由于 SQL 查询导致的 PHP 500 内部服务器错误

> ID：11704553
> 
> 赞同：1
> 
> 时间：2012-07-28T20:49:23.940
> 
> 标签：php, sql

我有一个 php 脚本，显示`500 Internal Server Error`ff 行是否在查询中。

```
 CONVERT(INT,cast(reverse(substring(char_data, 301, 4)) as BINARY(4))) AS maxexperience 
```

当我删除它时，一切都会很好。

```
$SQL = "SELECT TOP 10
    CONVERT(VARCHAR,substring(char_data, 9, 16)) AS name,
    CONVERT(INT,cast(reverse(substring(char_data, 7, 2)) as BINARY(2))) AS level,
    CONVERT(INT,substring(char_data, 25, 1)) AS type,
    CONVERT(INT,cast(reverse(substring(char_data, 263, 2)) as BINARY(2))) AS strength,
    CONVERT(INT,cast(reverse(substring(char_data, 265, 2)) as BINARY(2))) AS wisdom,
    CONVERT(INT,cast(reverse(substring(char_data, 267, 2)) as BINARY(2))) AS dexterity,
    CONVERT(INT,cast(reverse(substring(char_data, 269, 2)) as BINARY(2))) AS charisma,
    CONVERT(INT,cast(reverse(substring(char_data, 271, 2)) as BINARY(2))) AS intelligence,
    CONVERT(INT,cast(reverse(substring(char_data, 273, 2)) as BINARY(2))) AS constitution,
    CONVERT(INT,cast(reverse(substring(char_data, 309, 2)) as BINARY(2))) AS fame,
    CONVERT(INT,cast(reverse(substring(char_data, 301, 4)) as BINARY(4))) AS maxexperience
FROM CHAR_DATA0 WHERE CONVERT(INT, substring(char_data, 261, 1))=0x00 ORDER BY level DESC"; 
```

我尝试从 MSSMS - 2008 运行相同的脚本

```
 name       level   type    strength  wisdom  dexterity  charisma   intelligence    constitution    fame    maxexperience
 ladycharm  340     4       3510      1210    5200       2001       1120            4236            14265   1782451348 
```

它确实有效。但是从 php 脚本它给出了一个错误。请指教？谢谢你。

--- cpanel 上的错误日志 ---

```
 [Sat Jul 28 13:01:24 2012] [error] [client IP] File does not exist: /home/blazegam/public_html/test/404.shtml
 [Sat Jul 28 13:01:24 2012] [error] [client IP] File does not exist: /home/blazegam/public_html/test/favicon.ico
 [Sat Jul 28 13:00:38 2012] [error] [client IP] File does not exist: /home/blazegam/public_html/test/404.shtml
 [Sat Jul 28 13:00:38 2012] [error] [client IP] File does not exist: /home/blazegam/public_html/test/favicon.ico 
```

检查了所有日志，甚至尝试制作应该出错的脚本。我看到了那个脚本的错误。但不适用于这个脚本。它没有记录错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:32:20.020

那是一些疯狂的 SQL ......但我不认为这是你的“错误 500”的来源。

事实上，我认为根本原因可能是 HTTP 404: File not found:

`File does not exist: /home/blazegam/public_html/test/404.shtml`

相反，我认为：

1) 客户端请求的链接无效

2) 服务器尝试...但失败...生成错误 404

3) 最终，客户端收到错误 500

问：你*确定*你调用了正确的服务器端文件和目录吗？

PS：我不知道为什么w0rldart删除了他的回复。但是出于调试的目的，启用完整的错误报告实际上是一个不错的主意：

```
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T22:45:12.480

如果您有 PHP CLI，请尝试从命令行进行调试：

```
php -l /path/to/your/php_script.php 
```

对我来说，10 次中有 9 次，500 个状态代码来自一点语法错误……你能把实际的查询代码块粘贴到你的 PHP 文件中吗？我看到您粘贴了您正在使用的查询字符串，但这将有助于查看更多信息。

# ruby-on-rails-3.2 - 如何在 Rails_Admin 中仅显示类别的子类别

> ID：11704558
> 
> 赞同：0
> 
> 时间：2012-07-28T20:49:58.497
> 
> 标签：ruby-on-rails-3.2, rails-admin

我有以下型号：

```
Category

has_and_belongs_to_many :subcategories
has_many :resources

Subcategory

has_and_belongs_to_many :categories
has_and_belongs_to_many :resources
Resource

has_and_belongs_to_many :subcategories
belongs_to  :category 
```

在 Rails_Admin 创建或编辑资源时，我想显示所选类别的子类别。

如何在 rails_admin 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:28:41.253

这篇[文章](https://groups.google.com/forum/?fromgroups#!topic/rails_admin/rLCsCy7X50M)应该为您提供几个选项来满足您的需求。而且，这是另一篇[关于](https://gist.github.com/1093488)在 rails_admin 中为关系构建自定义视图的文章。

# 已编辑

查看这篇文章[Rails3 + Typus：将 habtm 关系显示为复选框](https://stackoverflow.com/questions/4270512/rails3-typus-display-habtm-relationship-as-checkboxes)

# html - iOS UIWebView 标题不会更新，除非调用此代码两次

> ID：11704560
> 
> 赞同：0
> 
> 时间：2012-07-28T20:50:13.070
> 
> 标签：html, ios, uiwebview, nsurlconnection, nsurl

除非我调用该方法两次，否则网页标题不会更新

```
NSURL *yourURL = [NSURL URLWithString: webpageURLLabel.text ];
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:yourURL];
[webpagePreview loadRequest:request];
webpagePreview.scalesPageToFit = YES;
webpageTitleLabel.text = [webpagePreview stringByEvaluatingJavaScriptFromString:@"document.title"]; 
```

对于如何解决这个问题，有任何的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:58:31.037

我猜你的请求还没有完成，所以你在那个页面上调用 javascript 还为时过早。您应该使调用类成为您的 webview 的代表并将标题设置为`webViewDidFinishLoad:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:22:50.900

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    webpageTitleLabel.text = [webpagePreview stringByEvaluatingJavaScriptFromString:@"document.title"];
} 
```

上面的代码解决了我的问题。

# html - iOS：解析 html 标签的最佳方式？

> ID：11704563
> 
> 赞同：0
> 
> 时间：2012-07-28T20:50:59.170
> 
> 标签：html, ios, parsing

在我的 JSON 应用程序中，我很好地解析了 JSON 数据，但问题是某些元素的格式如下：

`<b>Welcome!</b>`

（举一个非常基本的例子！）

我检查了未格式化的版本，但似乎没有，那么对于一些基本解析，我最好的选择是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:54:45.303

将此类用于 XPath [http://cocoawithlove.com/2008/10/using-libxml2-for-parsing-and-xpath.html](http://cocoawithlove.com/2008/10/using-libxml2-for-parsing-and-xpath.html)。

您可以轻松地解析 XML 和 HTML 标签。

```
NSArray *PerformXMLXPathQuery(NSData *document, NSString *query);
NSArray *PerformHTMLXPathQuery(NSData *document, NSString *query); 
```

请享用

# html - CSS Min-Height 不适用于所有浏览器

> ID：11704570
> 
> 赞同：1
> 
> 时间：2012-07-28T20:52:30.453
> 
> 标签：html, css

我最近一直在做一个网站。我试图获得一个围绕我所有内容的边框，并且至少与页面一样高。我的#Container 是应该展开以填满整个页面的 div。我正在尝试使用 min-height:100%; 在我的 CSS 中，但由于某种原因，它没有将边框扩展到整个页面。[这](http://usedatcollege.com/)是我的网站。主页是一个基本的 html 设置。

```
<div id="Container">
  <div id="header">
    <div id="menu">
        <ul id="navbar">
            <li><a id="nav1" class="nav-text" href="http://usedatcollege.com/">Home</a></li>
            <li><a id="nav2" class="nav-text" href="http://usedatcollege.com/bookdb.php">Books</a></li>
            <li><a id="nav3" class="add-text" href="http://usedatcollege.com/bookdbform.php">+</a></li>
            <li><a id="nav4" class="nav-text" href="http://usedatcollege.com/wanteddb.php">Wanted</a></li>
            <li><a id="nav5" class="add-text" href="http://usedatcollege.com/wanteddbform.php">+</a></li>
            <li><a id="nav6" class="nav-text" href="#">Info</a></li>
            <li><a id="nav7" class="nav-text" href="#">About</a></li>
            <li><div id="nav8"><a href=loginform.php class=linktext>Login</a><a class=slashtext>/</a><a href=register.php class=usertext>Register</a></div></li>
        </ul>
     </div>
  </div>    
  <div id="content">
    <h3>Home Page</h3>
  </div>
  <div id="footer">
    <div id="footertext">Copyright &copy; UsedAtCollege.com</div>
  </div>
</div> 
```

我的 CSS 也相当简单。我有一个 CSS 重置，我认为它不会影响它，因为我把它拿出来了，它仍然有问题。

```
* { 
  margin: 0; 
  padding: 0; 
}
#Container {
  width:980px;
  min-height:100%;
  margin-left:auto;
  margin-right:auto;
  margin-top:0px;
  border-style:solid;
  border-width:1px;
  border-color:rgb(154,154,154);
} 
```

这就是包含整个页面的 div 的 CSS 控件。

我只是想知道是否有人知道为什么最小高度没有将边框一直降低到屏幕底部？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T20:58:04.043

将此添加到您的 CSS

```
html, body {
    height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:14:31.433

在这种情况下，像 Firebug 或 DOM-Inspector 这样的东西会派上用场。如果您启动 Firebug，并在 Firebug 中查看您的页面内容，您会注意到您的正文本身并没有扩展整个页面，它仅扩展至页面长度的一半左右，与底部边框的位置相同显示。这是因为 body 只会根据其内容扩展，这里的内容是最小的，body 只会扩展同样多，`min-height: 100%`.

您可以通过将整个页面内容包装在绝对定位的包装器中来解决此问题`div`，将其`top`和`left`值设置为`0px`，并将高度和宽度设置为`100%`。然后边框将扩展到页面底部。当然，Firebug 仍然会显示主体仅扩展至半页，因为绝对放置的元素不会影响自然尺寸。为此，您必须使用相对定位，并调整`margin-top`到必要的值才能产生效果。

# url - 是否有用于以 1080p 显示视频的 YouTube URL 格式？

> ID：11704571
> 
> 赞同：10
> 
> 时间：2012-07-28T20:52:47.293
> 
> 标签：url, youtube

我知道有这段`&hd=1`代码可以开始 720p 的 YouTube 视频。是否有要在 YouTube 视频 URL 末尾添加以 1080p 开头的代码或技巧？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-11-19T21:34:10.057

似乎又开始工作了：）

使用示例：

前：

*   `http://www.youtube.com/watch?v=ecsCrOEYl7c`

后：

*   `http://www.youtube.com/watch_popup?v=ecsCrOEYl7c&vq=hd1080`

注意两者：

*   `watch_popup`
*   `&vq=hd1080`

其他可能的值可以在这里找到：

*   [https://developers.google.com/youtube/iframe_api_reference#Playback_quality](https://developers.google.com/youtube/iframe_api_reference#Playback_quality)

您还可以通过附加以下内容来更改播放器的开始时间（在本例中为 1 分 22 秒）：

*   `&t=1m22s`

一些文档可以在这里找到：

*   [https://developers.google.com/youtube/](https://developers.google.com/youtube/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T21:07:05.033

仅通过 URL 无法将质量设置为 1080p。几年前可以通过添加`&fmt=37`，但它不再起作用了。

但是，如果您可以使用 JavaScript，[YouTube API](https://developers.google.com/youtube/js_api_reference?hl=fr#Playback_quality)将允许您选择质量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T21:17:34.317

从[文档](https://developers.google.com/youtube/player_parameters#hd)：

> 高清（支持的播放器：AS2）
> 
> 值：0 或 1。默认值为 0。设置为 1 默认启用高清播放。这对 Chromeless Player 没有影响。如果视频的高清版本不可用，这也无效。如果启用此选项，请记住，连接速度较慢的用户可能无法获得最佳体验，除非他们关闭 HD。您应该确保您的播放器足够大，可以以原始分辨率显示视频。

AS2 播放器将于 2012 年 10 月停用，YouTube 网站上的嵌入代码默认加载 AS3 播放器。要显示 hd1080，您需要使用 JavaScript API。[此处](https://developers.google.com/youtube/js_api_reference#Playback_quality)描述了这些功能。

# iphone - 如何为应用内购买提供非消耗性内容？

> ID：11704573
> 
> 赞同：1
> 
> 时间：2012-07-28T20:52:52.227
> 
> 标签：iphone, ios, xcode, ipad, in-app-purchase

我正在开发一个学习钢琴的应用程序，我想在应用程序购买中提供非消耗性课程。课程所需的所有文件都将与应用程序捆绑在一起（因为它们不占用大量空间；两个 PDF，一个 .mid 和一个 .png）。目前，出于测试目的，我刚刚将课程硬编码到我的应用程序中，并且它们被加载到 viewDidLoad 上。

我的问题是如何存储一个课程库，以便在购买时可以修改以表明它已被购买？本质上，我要做的就是在收到完成的交易时，purchaseStatus 的值将从 0 变为 1。

存储的数据由许多字符串、NSNumbers 和一个 NSNumbers 数组组成。

我已经看到了一些选项，例如 plists 和 NSUserDefaults，但我真的很感谢一些关于最佳方法的建议。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:26:23.940

我想说将每个可购买模块的购买状态存储在您存储在 NSUserDefaults 中的 NSDictionary 中可能是最直接/最简单的选择。每次启动应用程序时，查询此字典以确定已购买的内容，并相应地向用户显示这些购买的实体（以表格视图中的条目、图标、不再隐藏的按钮等形式）。

Plists 也是公平的游戏，但它需要更多的维护（将 plist 存储在哪里，以便它可以由 iCloud 备份等），而 NSUserDefaults 已经为你处理了所有事情（它由 iCloud 备份）。

# ruby - 使用 Ruby 替换文本中的单词

> ID：11704574
> 
> 赞同：0
> 
> 时间：2012-07-28T20:52:57.760
> 
> 标签：ruby

我知道如何使用此代码来做到这一点

```
poem['sleepy'] = 'busy' 
```

上面的对象类型叫什么？它是一个数组吗？我如何将这首诗分配到文本的第一行，以替换位于该特定行的单词“sleepy”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T20:57:06.667

它不是一个数组，它是[`String`](http://www.ruby-doc.org/core-1.9.3/String.html)'s[`[]=`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-5B-5D-3D)方法。如果你只想替换某一行，你可以拆分诗歌字符串并使用以下[`split`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-split)方法得到一个数组：

```
lines = poem.split("\n") 
```

然后，您可以在您希望的线路上进行替换：

```
lines[3]["sleepy"] = "busy" 
```

然后你可以使用[`Array`](http://www.ruby-doc.org/core-1.9.3/Array.html)'s[`join`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-join)方法再次加入`Array`到 a中`String`：

```
poem = lines.join("\n") 
```

# jquery-mobile - 使用 simpleDialogue2 的问题

> ID：11704581
> 
> 赞同：0
> 
> 时间：2012-07-28T20:54:35.263
> 
> 标签：jquery-mobile

我正在尝试使用以下代码创建一个 simpleDialog2：

```
function deleteItem(itemID) {

  $('<div>').simpledialog2({
    mode: 'button',
    headerText: 'Are you sure?',
    headerClose: true,
  //  buttonPrompt: 'Please Choose One',
    buttons : {
      'Delete': {
        click: function () { 
          //$('#buttonoutput').text('OK');
        }
      },
       icon: "delete",
      'Cancel': {
        click: function () { 
         // $('#buttonoutput').text('Cancel');
        },
        theme: "c"
      }
    }
  })
} 
```

而且我每次都会收到此错误`TypeError: 'undefined' is not a function (evaluating '$('<div>').simpledialog2')`并且您可以提供的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T21:38:08.023

我的问题实际上是我没有以正确的顺序导入 simpleDialog2 语句，如[本页](http://dev.jtsage.com/jQM-SimpleDialog/demos2/install.html)所述。

# php - MySQL 表保存用户喜欢的页面

> ID：11704582
> 
> 赞同：0
> 
> 时间：2012-07-28T20:54:36.340
> 
> 标签：php, mysql, sql

如何为用户喜欢的主题设置表格？我有一个主题表和一个用户表（更实际但简化了此处的帖子）。用户生成的主题越来越多，我怎么能让用户喜欢页面？我会将主题的 id 放在用户表中还是将用户的 id 放在主题表中，或者创建一个新的喜欢表？我看到的问题是主题的数量可能（可能）非常大。我可以使用什么来创建一个允许用户 ID 和主题 ID 之间建立关系的系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T20:56:44.763

您可能会做的是“多对多”表结构

*   唯一的自动递增 id - `UINT (10) AUTO_INCREMENT`
*   包含用户 ID 的字段 - `UINT (10)`（或与您的主`user_id`字段匹配的内容）
*   包含“喜欢”主题 id 的字段 - `UINT (10)`（或与您的主要`topic_id`字段匹配的内容）

`user_id`和字段`topic_id`一起需要是唯一的。这意味着每个用户只能有一个特定喜欢的行。这确保（在数据库方面）不允许用户多次喜欢一个主题。

获得用户喜欢的主题看起来像这样 -

```
SELECT * FROM user_likes` WHERE `user_id`=USER_ID 
```

让用户喜欢看起来像这样 -

SELECT * FROM user_likes `WHERE`topic_id`=TOPIC_ID

* * *

正如其他人在他们的回答中所说的那样，以及在下面的评论中[@trevor](https://stackoverflow.com/questions/11704582/mysql-table-to-hold-pages-that-a-user-likes/11704592#comment15525011_11704592) -

> 不要忘记在用户 ID 上添加索引以支持检索用户喜欢的主题，并且主题上的单独索引用于支持每个用户查询的主题 -**没有这些，随着时间的推移添加更多数据，查询将变得更慢。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:56:59.810

一种方法是创建一个新表`UserLikedTopics`或类似的东西，其中有两列，一列保留 ，一列`UserId`保留`TopicId`. 对于用户“喜欢”的每个新主题，您将使用 UserId 和 TopicId 在表中添加一个新行。这样就很容易跟踪哪些用户喜欢哪些主题。

要获得某个用户喜欢的主题，您只需将 UserLikedTopics 与您的主题表连接起来，您就会拥有某个用户喜欢的所有主题的列表。您也可以反过来将其加入用户表中，以获取喜欢某个主题的用户列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T20:57:55.497

您将需要一个“喜欢”表。就像是：

```
CREATE TABLE `users_likes` (
    `user_id` INT(10) UNSIGNED NOT NULL,
    `topic_id` INT(10) UNSIGNED NOT NULL,
    PRIMARY KEY (`user_id`, `topic_id`),
    INDEX `topic_id` (`topic_id`)
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T21:02:27.890

创建一个单独的喜欢表，因为它是一个单独的实体，
将*喜欢*表与*用户*和*主题*表链接起来，用户**ID**和主题**ID**作为*喜欢*表中的*外键*..

 *有这样的结构会很好，以后如果您甚至不想要喜欢的功能，可以将其删除而不会影响其他表...*

# python - 如何使用正则表达式捕获未指定长度的前几位数字？

> ID：11704583
> 
> 赞同：-1
> 
> 时间：2012-07-28T20:54:39.863
> 
> 标签：python, regex

我有一些未指定的长度，后跟一个 15 位数字。

例如：

（未指定长度的随机数）+ 15 位数字 --> 3 + 15 位数字

（未指定长度的随机数）+ 15 位数字 --> 32831 + 15 位数字

（未指定长度的随机数）+ 15 位数字 --> 31 + 15 位数字

我可以在 Python 中使用 RegEx 来捕获“第 1 部分”（长度不确定）和最后 15 位数字作为“第 2 部分”吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T21:00:35.367

在我看来，除了最后 15 个字符之外，您只需要所有内容，为什么要为这个简单的任务使用正则表达式？我们可以简单地获取字符串的一部分（如果之前是数字，只需转换为字符串，执行此操作，然后再转换回来）：

```
>>> a = "3123456789123456" #3 + 15 digit number
>>> (a[:-15], a[-15:])
('3', '123456789123456')
>>> a = "32831123456789123456" #32831 + 15 digit number
>>> (a[:-15], a[-15:])
('32831', '123456789123456')
>>> a = "31123456789123456" #31 + 15 digit number
>>> (a[:-15], a[-15:])
('31', '123456789123456') 
```

好，易于。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T20:57:28.617

试试这个正则表达式：

```
^(\d+)(\d{15})$ 
```

解释：

```
^      Start of string
$      End of string
\d     Any digit
{15}   Repeat 15 times
+      Repeat one or more times.
(...)  Capturing group 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T20:58:19.490

当然，使用 regex`(\d*)(\d{15})`或矫枉过正`(?<!\d)(\d*)(\d{15})(?!\d)`

# c# - 需要帮助 ASP.net 中 AJAx 中的切换按钮

> ID：11704588
> 
> 赞同：0
> 
> 时间：2012-07-28T20:56:22.603
> 
> 标签：c#, asp.net, .net, ajax, togglebutton

我希望每次选中或取消选中复选框（使用 AJAX 中的切换按钮）时都更新页面。但我不能这样做。我尝试用按钮和图像按钮做同样的事情，它们工作得很好（但是当我尝试更新“onclick”功能中的切换按钮时遇到问题），但我想用切换按钮来做到这一点，我尝试了各种意味着在数据绑定和 checkchanged 事件中使用 Page_Load() 但徒劳无功。如何更正代码>

另外我想根据用户的分辨率调整我的背景大小。我该怎么做？我在网上冲浪并尝试用样式表做很多事情，但徒劳无功。请帮忙。

下面给出了来自 Vidual Studio 9 的代码。

**默认.aspx：**

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Confidentially for 'You'</title>
     <link id="Link1" rel="Stylesheet" href="StyleSheet.css" type="text/css" runat="server" />
</head>
<body background="eternal_hearts-normal.jpg" text="white">
    <form id="form1" runat="server">
    <div>
            <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
     <ContentTemplate> 
    <p align="center" runat="server" id="p1">
        <br />
    <br />
    <br />
    <br />

    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />Default Line</p>
            <p align="center" id="p2">
                <asp:Image ID="Image1" runat="server" EnableViewState="False" />
                <asp:CheckBox ID="CheckBox1" runat="server" 
                    oncheckedchanged="Page_Load" ondatabinding="Page_Load" />

                <cc1:ToggleButtonExtender ID="CheckBox1_ToggleButtonExtender" runat="server" 
                    Enabled="True" TargetControlID="CheckBox1" ImageWidth="19" 
                    ImageHeight="19" UncheckedImageUrl="ToggleButton_Unchecked.gif" 
                    CheckedImageUrl="ToggleButton_Checked.gif" ondatabinding="Page_Load">
                </cc1:ToggleButtonExtender>

                <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
                <asp:ImageButton ID="ImageButton1" runat="server" Height="23px" 
                    onclick="ImageButton1_Click" Width="30px" 
                    ImageUrl="~/ToggleButton_Unchecked.gif" />
                &nbsp;</p>
     </ContentTemplate> 
    </asp:UpdatePanel>
    </div>

    </form>
</body>
</html> 
```

**默认.aspx.cs：**

```
using System;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Threading;

public partial class _Default : System.Web.UI.Page 
{
    static int flag = 0;
    protected void Page_Load(object sender, EventArgs e)
    {
        if (flag == 1)
        {
            f();
            p1.InnerHtml = "Line 1";
        }
        else if (flag == 2)
        {
            f();
            p1.InnerHtml = "Line 2";
        }
        else if (flag == 3)
        {
            f();
            p1.InnerHtml = "Line 3";
        }
        flag++;
    }
    protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
    {
        Page_Load(null, EventArgs.Empty);
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        //if (flag == 0)
        //{
        //    flag++;
        //    p1.InnerHtml = "Line 1";
        //}
        //else if (flag == 1)
        //{
        //    flag++;
        //    p1.InnerHtml = "Line 2";
        //}
        //else if (flag == 2)
        //{
        //    flag++;
        //    p1.InnerHtml = "Line 3";
        //}

    }

    protected void f()
    {
        ImageButton1.ImageUrl = "ToggleButton_Unchecked.gif";
    }
    protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
    {

    }
} 
```

**样式表：**

```
img#background 
{
    min-width: 800px;
    width: 100%;
    height: auto;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
}

div.back
{
    overflow: hidden;
    left: 0;
    top: 0;
    position: absolute;
    z-index: -9999;
}

body
{
    text-align: center;
    left: 50pt;
    right: 50pt;
    font-family: 'Bookman Old Style';
    position: absolute;
    z-index: auto;
    width : 100%;
    height : 100%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:33:24.663

回答有点晚，但试试这个 - > [http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ToggleButton/ToggleButton.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ToggleButton/ToggleButton.aspx)

# java - 为什么 Java 垃圾收集器不收集垃圾？

> ID：11704589
> 
> 赞同：0
> 
> 时间：2012-07-28T20:56:34.327
> 
> 标签：java, garbage-collection

我正在玩一个可怕的数据结构，它基本上是一棵树，每个节点都将对其子节点的引用存储在一个`HashMap`对象中。每当我需要摆脱根及其除一个之外的所有子树时，我都会遇到释放内存的麻烦，方法是将后一个子树设置为新根。我认为这可能是我的数据结构中的一些错误，也许是我忘记在那里的一些参考，所以没有任何东西符合垃圾收集的条件。但我想先尝试一些更简单的东西，并实现了以下测试：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;

public class MyNode {
        MyNode next;
        int somedata;

        public MyNode(MyNode n) {
            next = n;
            somedata = 0;
        }

        public static void main(String[] args) throws IOException {
            MyNode p = new MyNode(null);
            BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
            for (int i=0; i<10000000; i++) {
                MyNode n = new MyNode(p);
                p = n;
            }
            while (p!=null) {
                MyNode p1 = p.next;
                p.next = null;
                p = p1;
            }
            in.readLine();
        }
} 
```

当 main 到达`in.readline()`时，我可以在 htop 中看到该进程仍然为自己分配了 250MB 左右，并且没有任何东西被释放。我显然首先尝试简单地做

```
p = null; 
```

而不是while循环。但它没有用，所以我想出了以前的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:25:03.397

你的问题有点不清楚 - 你真的得到了 OutOfMemoryErrors 吗？你想解决什么问题？您看到测试用例中表现出的行为有几个原因：

1.  当某些东西不再可以从 GC 根访问时，垃圾不会被收集——它只是变得有资格进行垃圾收集。GC 通常仅在分配失败时触发。由于您实际上并没有在循环中分配更多内存以使引用无效，因此完全有可能 GC 尚未运行。

2.  即使收集了垃圾，堆中的内存通常也不会返回给操作系统 - 因此从操作系统的角度来看它不会产生准确的答案。使用 VisualVM 或 jmap 和 jhat 之类的工具将是找出实际上仍在堆上的内容的最佳方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:10:40.693

垃圾收集器的行为是复杂的，不同的垃圾收集器可以使用根本不同的方法。你不能指望垃圾会立即被回收，即使你明确地调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T21:22:04.413

我以前见过这个。

htop 不是衡量 JVM 内存利用率的最佳方法。一直显示高分。VM 还喜欢保持其堆分配尽可能高。

我是否建议使用visualgc 或jconsole 来跟踪JVM 附带的jps 和jpstat。 [http://java.sun.com/performance/jvmstat/#Tools](http://java.sun.com/performance/jvmstat/#Tools)

此外，您有一个快速创建大量对象的循环，因此 gc 现在可能有时间启动。 System.gc 不能保证实际执行。这是一个提示，但它通常有效。

看看这篇关于 Java 堆利用率的帖子：http: [//it.toolbox.com/blogs/lim/how-to-get-details-on-jvms-heap-utilization-10609](http://it.toolbox.com/blogs/lim/how-to-get-details-on-jvms-heap-utilization-10609)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-07-28T21:00:30.410

您可以使用代码在 10000 个循环中手动调用一次垃圾收集

```
System.gc(); 
```

但是有一些副作用，例如垃圾收集器使用额外的 cpu 时间。

# xcode - Xcode：基于 NSDictionary 从 NSMutableArray 中删除对象

> ID：11704590
> 
> 赞同：1
> 
> 时间：2012-07-28T20:56:37.783
> 
> 标签：xcode, nsmutablearray, nsdictionary

我是 tableViews 和字典的新手，我遇到了问题！在 ViewDidLoad 中，我正在初始化许多 MutableArray，并且正在使用 NSDictionary 添加数据。例子：

```
- (void)viewDidLoad {
nomosXiou=[[NSMutableArray alloc] init];

[nomosXiou addObject:[[NSDictionary alloc] initWithObjectsAndKeys:@"Mary",@"name",@"USA",@"country", nil]];
[nomosXiou addObject:[[NSDictionary alloc] initWithObjectsAndKeys:@"Peter",@"name",@"Germany",@"country", nil]]; 

[super viewDidLoad];
// Do any additional setup after loading the view.} 
```

在之前的 ViewController 中，**用户选择了 Country**。基于该选择，我如何**从我的数组中删除所有其他条目？？？**

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:27:59.897

首先请注意，您的代码片段有错误。它应该是：

```
NSMutableArray *nomosXiou= [[NSMutableArray alloc] init]; 
```

有很多方法可以做你想做的事，但最直接的可能是以下几种：

```
NSString *countryName;    // You picked this in another view controller
NSMutableArray *newNomosXiou= [[NSMutableArray alloc] init];

for (NSDictionary *entry in nomosXiou) {
    if ([[entry objectForKey:@"country"] isEqualToString:countryName])
        [newNomosXiou addObject:entry];
} 
```

完成后将仅包含来自 中设置的国家/地区`newNomosXiou`的条目。`nomosXiou``countryName`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T22:46:07.563

像这样的东西可以完成这项工作：

```
NSMutableArray *nomosXiou = [[NSMutableArray alloc] init];
NSString *country = @"Germany"; // This is what you got from previous controller

// Some test data. Here we will eventually keep only countries == Germany
[nomosXiou addObject:[[NSDictionary alloc] initWithObjectsAndKeys:@"Mary",@"name",@"USA",@"country", nil]];
[nomosXiou addObject:[[NSDictionary alloc] initWithObjectsAndKeys:@"Peter",@"name",@"Germany",@"country", nil]];
[nomosXiou addObject:[[NSDictionary alloc] initWithObjectsAndKeys:@"George",@"name",@"Germany",@"country", nil]];

// Here we'll keep track of all the objects passing our test
// i.e. they are not equal to our 'country' string
NSIndexSet *indexset = [nomosXiou indexesOfObjectsPassingTest:^(id obj, NSUInteger idx, BOOL *stop){
    return (BOOL)![[obj valueForKey:@"country"] isEqualToString:country];
    }];

// Finally we remove the objects from our array
[nomosXiou removeObjectsAtIndexes:indexset]; 
```

# git - 更新已在 EC2 实例上克隆的 Github 存储库

> ID：11704594
> 
> 赞同：1
> 
> 时间：2012-07-28T20:57:00.600
> 
> 标签：git, amazon-ec2

有人可以解释正确的终端命令来更新我的 Amazon EC2 机器上的存储库吗？我已经完成了 git clone 'git url' 并且存储库现在在我的 EC2 实例上，但我想知道如何更新存储库。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T21:16:41.873

假设您使用正确的遥控器（即 master）设置 git，您可以使用`git pull`or `git pull origin`。

您可以在此处阅读有关遥控器的更多信息：http: [//git-scm.com/docs/git-remote](http://git-scm.com/docs/git-remote)。

用 列出当前遥控器`git remote`，并用类似的东西添加一个`git remote add linux-nfs git://linux-nfs.org/pub/linux/nfs-2.6.git`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T21:02:57.127

如果您想将克隆的 repo 更新为您从中克隆它的远程的当前状态，您可能需要[`git pull`](http://www.kernel.org/pub/software/scm/git/docs/git-pull.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T21:00:55.793

最有可能的是，您需要这样做：

```
git commit -a 
<This will take you into vim, hit the letter 'i' and begin typing your commit message. Then, Hit Esc, and type ':wq' and enter to save. 
git push 
```

祝你好运！

# macos - 在 Mac OS X 中从 Bash 访问当前用户的电子邮件和姓名

> ID：11704601
> 
> 赞同：2
> 
> 时间：2012-07-28T20:57:48.800
> 
> 标签：macos, bash

是否可以从 OS X 的命令行访问当前用户的姓名和电子邮件地址？如果是这样，它会怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-16T11:39:40.760

有一个开源 CLI 应用程序可以与联系人（以前称为通讯簿）进行交互。

## 设置

```
# install CLT, hombrew
brew install contacts 
```

## 当前用户的电子邮件

```
contacts -Hm -f '%e' 
```

## 当前用户名

```
contacts -Hm -f '%n' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-03T19:36:05.583

`id -F`将显示当前用户的全名。 `id`是 BSD 的替代品`whoami`，比使用`osascript`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T21:05:56.797

您可以使用 AppleScript 获取用户的全名。`osascript`从命令行调用命令：

```
osascript -e "long user name of (system info)" 
```

还有一个`system_profiler`命令，它确实提供了一堆信息，包括这一行：

```
User Name: First Last (username) 
```

但是`system_profiler`实在是太矫枉过正了。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-30T13:38:05.723

如果您想从用户的邮件首选项中抓取电子邮件帐户（假设他们使用 mail.app），您可以这样做

```
defaults read com.apple.mail|grep -A 1 EmailAddresses|grep @ 
```

# javascript - Node.js/Socket.io 可以在除 Firefox 之外的所有设备上运行，这可能是缓存问题吗？

> ID：11704605
> 
> 赞同：1
> 
> 时间：2012-07-28T20:58:05.567
> 
> 标签：javascript, node.js, firefox, websocket, socket.io

我正在修补 node.js 和 socket.io 并使用 Firefox。一开始它工作得很好，但是当我进行更新时，它就完全停止了工作。我通过最基本的发出/广播调用（之前一直运行良好）对其进行了测试，但它仍然无法正常工作。

它适用于我测试过的所有浏览器（Chrome、Opera、Safari），除了 Firefox，我最好的猜测是这将是某种缓存问题，所以我做了`npm cache clean`，但仍然没有运气。我尝试重新安装 node.js 和 socket.io 但它仍然无法正常工作。我知道它正在连接到服务器，因为它正在启动握手并说“欢迎使用 socket.io”。如果我直接去服务器，但除此之外没有任何工作。

如果有人知道可能发生了什么，我将不胜感激，我完全迷失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T20:35:32.900

好的伙计们，我知道是什么导致了它是 MAMP PRO 服务器名称。我没有使用 localhost:8888/mysite ，而是将本地主机设置为仅使用 mysite.com （我相信你们都知道，这对于开发目的要容易得多），并且由于某种原因，这导致了 Firefox 和套接字的问题。伊奥。

因此，如果有人遇到类似问题并且正在使用具有专用服务器名称的 MAMP，请尝试使用直接本地主机路径，看看它是否有效。

# javascript - javascript名称值不起作用

> ID：11704607
> 
> 赞同：0
> 
> 时间：2012-07-28T20:58:14.840
> 
> 标签：javascript, ruby-on-rails-3, coffeescript

所以现在我有一个表格......

```
<INPUT type="text" name="budget[unbudgeted_balance]" value="">   
<INPUT TYPE="button" NAME="button2" Value="Get Funds Value" onClick="writeText(this.form)"> 
```

还有一些这样的咖啡脚本......

```
window.writeText = (form) ->
  form.budget[unbudgeted_balance].value = "frack" 
```

像这样翻译成JS...

```
window.writeText = function(form) {
  return form.budget[unbudgeted_balance].value = "frack";
}; 
```

如果我这样做 name="budget" ...它可以工作。但是如果我做 name="budget[unbudgeted_balance]"，它就行不通，为什么会这样。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:08:14.240

该字段的名称是`budget[unbudgeted_balance]`。尝试：

```
form.elements["budget[unbudgeted_balance]"].value = "frack" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:01:31.407

我不知道coffeescript所以这只是一个猜测

```
window.writeText = (form) ->
  form["budget[unbudgeted_balance]"].value = "frack" 
```

# vba - 更改表格颜色的 VBA 宏

> ID：11704609
> 
> 赞同：2
> 
> 时间：2012-07-28T20:58:19.550
> 
> 标签：vba, ms-word

我有一个包含多个表格的 Word 文档。我希望能够选择表格（或表格中的单元格）并让表格中的每一行都以交替颜色着色。到目前为止，我已经创建了以下代码：

```
Sub ColorTable()
    '
    ' ColorTable Macro
    ' Alternately colors cells.
    '
    Selection.Collapse Direction:=wdCollapseStart
    If Not Selection.Information(wdWithInTable) Then
          MsgBox "Can only run this within a table"
          Exit Sub
    End If
    Dim RowCount, i, count, ColCount As Integer
    RowCount = ActiveDocument.Tables(1).Rows.count
    i = 0
    ColCount = ActiveDocument.Tables(1).Columns.count
    For i = 1 To RowCount
        For count = 1 To ColCount
            Selection.Shading.BackgroundPatternColor = RGB(184, 204, 228)
            'light
            Selection.MoveRight Unit:=wdCharacter, count:=1
        Next count
        Selection.MoveDown Unit:=wdLine, count:=1
        For count = 1 To ColCount
            Selection.Shading.BackgroundPatternColor = RGB(219, 229, 241)
            'dark
            Selection.MoveRight Unit:=wdCharacter, count:=1
        Next count
    Next i
End Sub 
```

宏运行没有错误，但以对角线模式更改单元格颜色。我猜问题出在我的 for 循环中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-13T19:52:28.800

```
With tblNew
  For i = 1 To .Rows.Count Step 2
    .Rows(i).Shading.Texture = wdTexture10Percent
       ' or
    .Rows(i).Shading.BackgroundPatternColor = RGB(219, 229, 241)
  Next
End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-28T18:10:13.400

经过几个月没有思考这个问题，我找到了答案。

```
Sub colorTable()
Dim rowCount As Integer
Dim colCount As Integer
Dim count As Integer
Dim row, col As Integer

Selection.Collapse Direction:=wdCollapseStart
If Not Selection.Information(wdWithInTable) Then
    MsgBox "Can only be run from a table"
    Exit Sub
End If

rowCount = Selection.Tables(1).Rows.count - 1
colCount = Selection.Tables(1).Columns.count
row = 0
col = 0

While row < rowCount
   count = 1
     While col < colCount
        Selection.Shading.BackgroundPatternColor = RGB(182, 204, 228)
        If count < colCount Then
            Selection.MoveRight unit:=wdCell, count:=1
            count = count + 1
        End If
        col = col + 1
    Wend
    col = 0
    If row = rowCount - 1 And rowCount Mod 2 = 1 Then
        Exit Sub
    End If

    'dark
        Selection.MoveRight unit:=wdCell, count:=1
        count = 1
        'For Each oCOl In Selection.Tables(1).Columns
        While col < colCount
            Selection.Shading.BackgroundPatternColor = RGB(219, 229, 241)
            If count < colCount Then
                Selection.MoveRight unit:=wdCell, count:=1
                count = count + 1
            End If
            col = col + 1
        Wend
        row = row + 2
        If row < rowCount Then
            Selection.MoveRight unit:=wdCell, count:=1
        End If
        col = 0
Wend
End Sub 
```

这可能不是最好的方法，我只是把它拼凑在一起，但它确实有效。我希望它可以帮助某人！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:32:53.413

我还没有测试过，但我认为你明白了主要思想

```
Sub ColorTable()
    Dim RowCount as Integer,s as String, row as Integer, ColCount As Integer
    RowCount = ActiveDocument.Tables(1).Rows.count
    ColCount = ActiveDocument.Tables(1).Columns.count
    For row = 1 To RowCount
        s=replace(Cell(row,1).Address,"$","")
        s=s & ":" & replace(Cell(row,ColCount).Address,"$","")
        Range(s).Shading.BackgroundPatternColor = iif(row mod 2 =0,RGB(184, 204, 228),RGB(219, 229, 241))
        Next count
    Next row
End Sub 
```

# iphone - iOS 5.1 中的 UINavigationController

> ID：11704615
> 
> 赞同：0
> 
> 时间：2012-07-28T20:59:15.760
> 
> 标签：iphone, objective-c, ios, ios5, uinavigationcontroller

我是 Objective-C 和 iOS 的新手。我跟着[UINavigationController](http://www.youtube.com/watch?v=XN4JRic6TM8)。

在视频的前 2:30 分钟，他使用 AppDelegate 接口和实现，并且那里提供了一些我的应用程序中没有的代码。

在界面中他有：

```
@Class ViewController;
...
@property(strong, nonatomic) ViewController *viewController; 
```

我没有。

而在 AppDelegate 的实现中，在他开始定义之前`navigationViewController`，他有几行代码， `didFinishLaunchingWithOption`比如：

```
self.windows = [[UIWindows alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
self.windows.rootViewController = self.viewController;
[self.windows makeKeyAndVisible]
return YES; 
```

我收到了警告`self.viewController`。

但我只有：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
} 
```

为了取消 NavigationViewController，他添加了这一行：

```
 UINavigationController *navigationViewController = [[UINavigationController alloc] initWithRootViewController:self.viewController
self.windows.rootViewController = navigationViewController; 
```

当我添加此代码时，我遇到了一个错误（`self.viewController`最后警告）。当我运行项目时，它只是在顶部显示导航，但我之前创建的 TableView 消失了。你能帮我解决这个问题吗？我的模拟器是 5.1 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:20:32.663

我假设这是他 youtube 系列的第 12 部分，他正在构建以前的代码。

无论如何，有很多方法可以将 rootViewController 添加到窗口中。（以编程方式，通过情节提要等）

获得与他的教程相匹配的项目设置的最简单方法是：

在 Xcode 中创建一个新的“单一视图”项目，并且不要启用 Storyboard。

这将创建一个带有 AppDelegate、ViewController 类和 ViewController xib 的项目。

（如果您选择通用应用程序，您将有 2 个 xib 文件）

打开这个新创建的项目的 AppDelegate，它应该非常接近他的截屏视频......

祝你好运！

（请注意，这已使用 XCode 4.3.3 进行了验证）

# php - 可捕获的致命错误：传递给 Foo::bar() 的参数 1 必须实现接口 BazInterface，给定 null

> ID：11704617
> 
> 赞同：5
> 
> 时间：2012-07-28T20:59:30.450
> 
> 标签：php, oop, types

在某些情况下，当您覆盖具有类型提示输入参数的方法时，如下所示：

```
class FooParent
{
    public function bar(BazInterface $baz)
    {
        // ...
    }
} 
```

并且您希望允许将空值作为输入参数传递。

如果您删除接口类型提示

```
class Foo extends FooParent
{
    public function bar($baz)
    {
        // ...
    }
} 
```

你会得到这样的错误：

```
Fatal error: Declaration of Foo::bar() must be compatible with that of FooParent::bar() 
```

如何在不更改父类的情况下允许空值？

这是一个真实的例子，因为父类可以是第三方库或框架的一部分，所以改变它不是一种选择。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T20:59:30.450

解决方案是将默认空值添加到输入参数，如下所示：

```
class Foo extends FooParent
{
    public function bar(BazInterface $baz = null)
    {
        // ...
    }
} 
```

这不是我所期望的，因为如果未提供默认值，则会将默认值分配给变量，我没想到它会影响允许的输入。但是我在[http://php.net/manual/en/language.oop5.typehinting.php](http://php.net/manual/en/language.oop5.typehinting.php)上看到了示例，所以我决定在这里记录它。希望有人会发现它有用。

# python - 用python写入文件

> ID：11704627
> 
> 赞同：-1
> 
> 时间：2012-07-28T21:00:54.553
> 
> 标签：python

这是我昨天的一个问题的延续。我正在尝试打开一个包含数字列表的文本文件。我想多次将这些数字写入一个新文件。循环的目的是能够多次写入源列表。在此示例中，我想打印 100 个数字的列表 10 次，因此我最终在输出文件中得到了 1000 个数字的列表。这是我正在使用的代码：

```
i = 10
while i > 0:
    with open ('C:/TestReq_100 Records.txt', 'r') as ipf:
       for line in ipf:
            num = line.strip()
            filename = 'processed.txt'
            with open('processed.txt', 'w') as opf:
                opf('%s' %num)

##           print num
    i = i - 1 
```

如果我注释掉与写入文件相关的代码并在解释器中使用 print 命令，代码会执行我想要的操作。我似乎无法在文本文件中获得相同的输出。再说一次，我不是学生。只是尝试创建文件以在我公司的软件中使用以进行测试...谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:02:32.883

您没有确切说明输出中的问题是什么，但试试这个：

```
 opf.write('%s\n' %num) 
```

代替

```
 opf('%s' %num) 
```

*备注*：

1.  您正在`write`输出文件对象上调用该方法
2.  您正在将换行符 ( `\n`) 添加到输出`print`中，默认情况下会这样做，这应该使您的 print 和 this 等效。

您一遍又一遍地打开*同一个*文件并写入它，这是您的意图吗？您只会保留您最后写入该文件的任何内容。在您的帖子中提供*更多详细信息*（关于输出的具体问题，以及您给定的输入和所需的输出将更容易帮助您实现目标）

**更新**基于下面评论中的更多信息。

按照这些思路构建您的程序（尽管由于缺乏明确的规范，确切的顺序有点*不确定，但您可以将其用作指南）：*

```
with open ('C:/TestReq_100 Records.txt') as ipf:
    with open('processed.txt', 'w') as opf:
        i = 10
        while i > 0:
            for line in ipf:
                num = line.strip()
                filename = 'processed.txt'
                write.opf('%s\n' %num)
##           print num
            i = i - 1 
```

输出文件在循环之前打开*一次。*

顺便说一句，如果您使用的是相当新的 Python 版本，您可以将两个`with`语句合并为一个：

```
with open('C:/TestReq_100 Records.txt') as ipf,open('processed.txt','w') as opf: 
```

请注意，您可以使用两个 for 循环，即用 for 循环替换当前的 while 循环，但这更多的是样式和语义问题，它不会影响代码的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T21:10:42.803

除了 Levon 的回答之外，您当前的程序还有一些问题。

*   与其手动初始化和递减索引，不如尝试使用`xrange`更简洁的方式完成相同的任务。

*   您正在为每个数字覆盖 processes.txt ；您应该与输入文件同时打开它。

*   目的是`i`什么？就目前而言，您的程序将执行完全相同的操作 10 次，因为`i`从未在循环内使用过。

*   `'%s' % num``num`当已经是一个字符串时没有什么特别的。

也就是说，这是您的程序的一个更简洁的版本，尽管`i`仍然没有特别做任何事情：

```
for i in xrange(10, 0, -1):
    with open('C:/TestReq_100 Records.txt', 'r') as ipf:
        with open('processed.txt', 'w') as opf:
            for line in ipf:
                num = line.strip()
                opf.write(num) 
```

您可能想澄清该程序的预期输出以获得更好的答案。

编辑：这是将文件多次复制到新文件中的更有效解决方案：

```
# Read the input data once.
with open('C:/TestReq_100 Records.txt', 'r') as ipf:
    ipdata = ipf.read()
# Add a newline to the end of the file if there isn't already one present.
# Without this, the last and first lines of the input might become single lines.
if ipdata[-1] != '\n':
    ipdata += '\n'
# Write to the output file multiple times.
with open('processed.txt', 'w') as opf:
    for i in xrange(10):
        opf.write(ipdata) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T21:09:00.620

你没有具体说明你的问题是什么，但看起来你至少有两个问题。

首先，您在`'w'`模式下多次打开同一个文件。 `'w'`mode 不会附加到现有文件，它会覆盖现有文件。所以你只会得到循环的最后一次迭代。您可以通过在循环开始之前打开文件并在结束后关闭它来解决此问题。如果需要，您仍然可以使用`with`语法来执行此操作。

其次，我认为你需要使用`opf.write()`而不是只是`opf()`，除非这是我不知道的语法。

试试这个：

```
with open ('C:/TestReq_100 Records.txt', 'r') as ipf:
    with open('processed.txt', 'w') as opf:
        i = 10
        while i > 0:
            for line in ipf:
                num = line.strip()
                filename = 'processed.txt'
                opf.write('%s' %num)
            i = i - 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T21:16:18.763

如果我理解正确，应该这样做......（在 2.7.x 中）

```
from itertools import islice

MAX = 10

with open('infile') as fin, open('outfile', 'w') as fout:
    for line in islice(fin, MAX):
        print >> fout, line.strip() 
```

# wordpress - 为什么 wordpress 现在在发布时从 HTML 编辑器中删除表单标签？

> ID：11704634
> 
> 赞同：2
> 
> 时间：2012-07-28T21:02:01.350
> 
> 标签：wordpress, wysiwyg

我正在尝试使用他们的代码将贝宝按钮插入到 wordpress 所见即所得编辑器的 HTML 选项卡中。当我在 chrome 中发布和查看源代码时，不会显示表单标签，并且单击时不会发生按钮操作。

然而，表单标签确实保留在 wordpress 中。

知道为什么这些不会延续吗？我从来没有发生过这种情况，上周它还在工作，同样的代码，同样的项目。

会不会是最新的 wordpress 升级？

这很奇怪，因为同一站点的另一个页面上的另一个按钮，同样来自贝宝，仍然可以工作..

来自贝宝的代码：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="QLFJU8MHD2XCN">
<input type="image" src="http://www.spmoh.com/wp-content/uploads/2012/06/donate-now.png" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:29:10.920

表单元素仍然存在于源代码中。我可以想到在 DOM 视图中删除它们的两个可能原因：

*   元素嵌套无效，例如 a 中的 h1 元素（即块级元素）。快速浏览一下，我在该页面上看不到任何可能导致它的内容，但

*   JavaScript 之后删除元素（例如一些流氓 jQuery 清理脚本）。

# android - Android AsyncTask：将视图添加到 AsyncTask 中的活动？

> ID：11704635
> 
> 赞同：1
> 
> 时间：2012-07-28T21:02:03.867
> 
> 标签：android, android-layout, twitter, android-asynctask

我正在为 twitter 应用程序开发一个搜索组件。我一直在常规课程中进行解析，并尝试以这种方式将视图添加到活动中，但没有奏效。在我的帖子中：
[Android 2.3.3: Crash when getting a LinearLayout from (LinearLayout)findViewById(R.id.<linear_layout_id>)](https://stackoverflow.com/questions/11663494/android-2-3-3-crash-when-getting-a-linearlayout-from-linearlayoutfindviewbyid)
一位非常有用的 stackoverflow 用户告诉我，我最好的选择是将所有解析调用放入 asynctask 和将视图添加到 onPostExecute() 上的活动。

所以我的问题是，我可以从 XML 中选择一个布局，添加一个视图，然后将它保存在 asyctask 的 onPostExecute() 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:15:40.653

是的，当然，要么传递视图，要么将包含视图的 Activity 传递给 AsyncTask 的构造函数。只要确保您不在 doInBackground 方法中使用这些对象。

事实上，我上周也做了类似的事情：

```
@Override
protected void onPostExecute(Article[] articles) {
    ArrayAdapter<Article> arrayAdapter = new ArticleAdapter(context, articles);
    listView.setAdapter(arrayAdapter);
    listView.setVisibility(View.VISIBLE);
    progressBar.setVisibility(View.GONE);
} 
```

listView 是作为构造函数参数传递的 ListView，与 context 相同，即包含视图的 Context（活动）。

编辑：假设您定义 AsyncTask 然后：

*   doInBackground 必须返回一个 Class3 对象并将 Class1 对象数组（定义为 Class1...）作为参数
*   onProgressUpdate 必须将 Class2 对象数组（定义为 Class2...）作为参数
*   onPostExecute 必须将 Class3 对象作为参数
*   ...

有关更多信息，您可以阅读 Android 文档：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:29:53.940

在 onPostExecute 中使用 runOnUiThread(mRunnable) 方法。如果您想对 ui 进行任何更改，则全部更改为 runOnUiThread。

# android - 如何在第一次点击和第二次点击时更改按钮文本

> ID：11704642
> 
> 赞同：0
> 
> 时间：2012-07-28T21:03:02.830
> 
> 标签：android, button

我有一组按钮，我想制作 xo 游戏。我想在第一次单击时更改按钮文本，然后在第二次单击时再次更改。

我已经制作了这个方法（已经将该方法分配给我的按钮）：-

```
private String  calltext = "x";
private String  calltext1 = "o";

public void MyMethod(View v){

   final Button btn = (Button) v;
   final Button.OnClickListener mylistener = new Button.OnClickListener(){

   public void onClick(View v) {                    
      btn.setText(calltext);
   };           
}};

btn.setOnClickListener(mylistener); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T21:10:39.460

```
public void onClick(View v) {
    String currentText = btn.getText().toString();
    btn.setText(currentText.equals("x") ? "o" : "x");
} 
```

使用此代码，每次单击按钮时，其文本将在“x”和“o”之间切换。

# algorithm - 我对 Floyd-Warshall、Dijkstra 和 Bellman-Ford 算法之间的区别是否正确？

> ID：11704643
> 
> 赞同：22
> 
> 时间：2012-07-28T21:03:18.993
> 
> 标签：algorithm, graph-theory, dijkstra, floyd-warshall, bellman-ford

我一直在研究这三个，我在下面陈述我的推论。有人能告诉我我是否足够准确地理解它们吗？谢谢你。

1.  Dijkstra 算法仅在您有单一来源并且您想知道从一个节点到另一个节点的最小路径时使用，但在[这种情况下会失败](http://i.stack.imgur.com/rmowk.png)

2.  当所有节点中的任何一个都可以成为源时，使用 Floyd-Warshall 算法，因此您希望从任何源节点到任何目标节点的最短距离。这仅在存在负循环时才会失败

**（这是最重要的一个。我的意思是，这是我最不确定的一个：）**

3.当只有一个来源时，Bellman-Ford 的使用与 Dijkstra 的一样。这可以处理负权重，**它的工作方式与 Floyd-Warshall 的相同，除了一个来源，对吧？**

如果你需要看一下，对应的算法是（由维基百科提供）：

贝尔曼福特：

```
 procedure BellmanFord(list vertices, list edges, vertex source)
   // This implementation takes in a graph, represented as lists of vertices
   // and edges, and modifies the vertices so that their distance and
   // predecessor attributes store the shortest paths.

   // Step 1: initialize graph
   for each vertex v in vertices:
       if v is source then v.distance := 0
       else v.distance := infinity
       v.predecessor := null

   // Step 2: relax edges repeatedly
   for i from 1 to size(vertices)-1:
       for each edge uv in edges: // uv is the edge from u to v
           u := uv.source
           v := uv.destination
           if u.distance + uv.weight < v.distance:
               v.distance := u.distance + uv.weight
               v.predecessor := u

   // Step 3: check for negative-weight cycles
   for each edge uv in edges:
       u := uv.source
       v := uv.destination
       if u.distance + uv.weight < v.distance:
           error "Graph contains a negative-weight cycle" 
```

迪杰斯特拉：

```
 1  function Dijkstra(Graph, source):
 2      for each vertex v in Graph:                                // Initializations
 3          dist[v] := infinity ;                                  // Unknown distance function from 
 4                                                                 // source to v
 5          previous[v] := undefined ;                             // Previous node in optimal path
 6                                                                 // from source
 7      
 8      dist[source] := 0 ;                                        // Distance from source to source
 9      Q := the set of all nodes in Graph ;                       // All nodes in the graph are
10                                                                 // unoptimized - thus are in Q
11      while Q is not empty:                                      // The main loop
12          u := vertex in Q with smallest distance in dist[] ;    // Start node in first case
13          if dist[u] = infinity:
14              break ;                                            // all remaining vertices are
15                                                                 // inaccessible from source
16          
17          remove u from Q ;
18          for each neighbor v of u:                              // where v has not yet been 
19                                                                                 removed from Q.
20              alt := dist[u] + dist_between(u, v) ;
21              if alt < dist[v]:                                  // Relax (u,v,a)
22                  dist[v] := alt ;
23                  previous[v] := u ;
24                  decrease-key v in Q;                           // Reorder v in the Queue
25      return dist; 
```

弗洛伊德-沃歇尔：

```
 1 /* Assume a function edgeCost(i,j) which returns the cost of the edge from i to j
 2    (infinity if there is none).
 3    Also assume that n is the number of vertices and edgeCost(i,i) = 0
 4 */
 5
 6 int path[][];
 7 /* A 2-dimensional matrix. At each step in the algorithm, path[i][j] is the shortest path
 8    from i to j using intermediate vertices (1..k−1).  Each path[i][j] is initialized to
 9    edgeCost(i,j).
10 */
11
12 procedure FloydWarshall ()
13    for k := 1 to n
14       for i := 1 to n
15          for j := 1 to n
16             path[i][j] = min ( path[i][j], path[i][k]+path[k][j] ); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-28T21:23:03.843

您对前两个问题以及 Floyd-Warshall 的目标（找到所有对之间的最短路径）是正确的，但对于 Bellman-Ford 和 Floyd-Warshall 之间的关系却不是：两种算法都使用动态规划来找到最短路径路径，但 FW 与从每个起始节点到每个其他节点运行 BF 不同。

在BF中，问题是：最多k步从源到目标的最短路径是多少，运行时间为O(E *V)。如果我们将它运行到其他节点，运行时间将是 O(E* V^2)。

在 FW 中，问题是：对于所有节点 i,j,k，从 i 到 j 通过 k 的最短路径是什么。这导致 O(V^3) 运行时间 - 每个起始节点都比 BF 好（对于密集图，高达 |V| 的因子）。

关于负循环/权重的另一个注意事项：Dijkstra 可能根本无法给出正确的结果。BF 和 FW 不会失败——它们会正确地声明没有最小权重路径，因为负权重是无界的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-29T10:05:36.160

单源最短路径：

Dijkstra 算法 - 不允许负权重 - O(E+Vlg(V))

贝尔曼福特算法 - 允许负重。但如果存在负循环，贝尔曼福特将检测到 -ve 循环 - O(VE)

有向无环图 - 顾名思义，它仅适用于 DAG - O(V+E)

所有对最短路径：

Dijkstra 算法 - 不允许负权重 - O(VE + V^2lg(V))

贝尔曼福特算法 - O(V^2E)

矩阵链乘法——复杂度与贝尔曼福特算法相同

Floyd Warshall 算法 - 使用动态规划方法 - 复杂度为 O(V^3)

# sql - 选择 SQL 语句无法读取最新的用户输入

> ID：11704644
> 
> 赞同：0
> 
> 时间：2012-07-28T20:35:17.347
> 
> 标签：sql, mysql, vb.net

我是 vb.NET 和 SQL 的新手。我想查看我的 vb.NET 程序中的最新输入。我该怎么做？其中床号是自动递增的。目前，这确实记录了数据库中的更改，但是当我想查看详细信息时，标签仍然为空，它应该是。

这是我的代码：

```
 Dim SQLStatement As String = "SELECT name, age, date_of_confinement,type_of_sickness, " _
                              "type_of_IV_fluid, number_of_bottles, drop_rate " _
                              "FROM patient WHERE bednumber=1"

    Dim cmd As MySqlCommand = New MySqlCommand

    With cmd
        .CommandText = SQLStatement
        .CommandType = CommandType.Text
        .Connection = SQLConnection
        .ExecuteNonQuery()

        '--read the records in database in phpmyadmin gui---
        Dim myReader As MySqlDataReader = cmd.ExecuteReader
        If myReader.Read Then
            ViewInfo.lblName.Text = myReader.GetString(0)
            ViewInfo.lblAge.Text = myReader.GetString(1)
            ViewInfo.lblDate.Text = myReader.GetString(2)
            ViewInfo.lblSickness.Text = myReader.GetString(3)
            ViewInfo.lblFluid.Text = myReader.GetString(4)
            ViewInfo.lblBottle.Text = myReader.GetString(5)
            ViewInfo.lblDrop.Text = myReader.GetString(6)

            myReader.Close()
        End If
    End With 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:52:35.207

尝试以这种方式更改 SQL 语句：

```
 Dim SQLStatement As String = "SELECT TOP 1 name, age, date_of_confinement,type_of_sickness, " _ 
                              "type_of_IV_fluid, number_of_bottles, drop_rate " _ 
                              "FROM patient ORDER BY bedumber DESC" 
```

这将按`bednumber`降序对患者表进行排序（因此最后插入的记录在顶部），然后获取第一个记录（TOP 1）。

当然，我认为这`bednumber`是一个数值列，其值由数据库以粗略的插入顺序自动生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T03:51:18.900

为了显示最新的输入，我将在我的查询中执行此操作

```
 Dim SQLStatement As String = "SELECT name, age, date_of_confinement,type_of_sickness, " _
                              "type_of_IV_fluid, number_of_bottles, drop_rate " _
                              "FROM patient WHERE badnumbre=(SELECT MAX(bednumber) from patien )" 
```

我使用 Sub 查询

我希望它运行良好:)

# android - NFC 标签未在 Android 4.1 Jelly Bean 中打开应用

> ID：11704648
> 
> 赞同：0
> 
> 时间：2012-07-28T21:05:05.873
> 
> 标签：android, nfc, android-4.2-jelly-bean, ndef

我正在开发一个使用 NFC 打开活动的 android 应用程序。所以我们写了一个带有特定 MIME-Type 的 NFC 标签，就像在 API 示例中一样，所以只有我的应用程序可以打开其中的数据。它在 Android 2.3.3 到 Android 4.0.4 上运行良好。

现在，在我将三星 Galaxy Nexus 升级到 Android 4.1 Jelly Bean 后，NFC 标签不再打开我的应用程序。有趣的是，当手机在默认的 android nfc 阅读器中显示标签时，它会识别标签的 mime 类型。

所以问题是......为什么Android 4.1 Jelly Bean中的NFC标签没有打开应用程序？

我的 AndroidMenifest.XML 中的 Intent 代码：

```
 <activity 
        android:name=".ActivityToOpenWithNfcTag"
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="application/com.android.barcodeScanner" />
        </intent-filter>
    </activity> 
```

如果我在标签和应用程序中使用“text/plain”mime 类型，它可以工作，但我需要我独特的 mime 类型。

请帮忙！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T19:38:37.087

我遇到了同样的问题，我发现在 Jelly Bean 中，它将 mimetype 转换为所有小写。我看到在您的 mimetype 标记中它有一个大写的`"S"`.

所以试试这个：

`mimeType = "application/com.android.barcodescanner"`

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:50:44.353

在 JellyBean 中，对标签的 NDEF 检测和解析进行了改进并变得更加严格。可能您的 NDEF 消息在某种程度上无效。例如，检查 NDEF 消息内的有效负载长度值，并将其与存储在标签上的总 NDEF 消息长度进行比较。

# zend-framework - Zend Framework ACL 在调用 model_dbtable 时无法正常工作

> ID：11704649
> 
> 赞同：0
> 
> 时间：2012-07-28T21:05:25.300
> 
> 标签：zend-framework, frameworks

嗨某人！

我有一个想在 Zend Framework 中解决的问题。情况如下：我有一个 indexController，我在其中放置了一个 getAktGroupMailAction - 我的 ACL 上有什么 - 就像这里：

```
public function getAktGroupMail(){
    $ggroup = new Application_Model_DbTable_Groups();
    //return $groupN = $ggroup->getUserAktGroupMail();      
} 
```

如果我没有在单词“return”之前放置“//”字符，我会收到错误消息：

> 致命错误：在 /var/www/hobu/library/Zend/Acl.php:365 中未捕获的异常 'Zend_Acl_Exception' 和消息 'Resource 'error' not found' 堆栈跟踪：#0 /var/www/hobu/library/Zend /Acl.php(846): Zend_Acl->get('error') #1 /var/www/hobu/application/plugins/AccessCheck.php(19): Zend_Acl->isAllowed('user', 'error', '错误') #2 /var/www/hobu/library/Zend/Controller/Plugin/Broker.php(309): Application_Plugin_AccessCheck->preDispatch(Object(Zend_Controller_Request_Http)) #3 /var/www/hobu/library/Zend /Controller/Front.php(941): Zend_Controller_Plugin_Broker->preDispatch(Object(Zend_Controller_Request_Http)) #4 /var/www/hobu/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch() #5 /var/www/hobu/library/Zend/Application.php(366):Zend_Application_Bootstrap_Bootstrap->run() #6 /var/www/hobu/public/index.php(26): Zend_Application->run() #7 {main} Next exception 'Zend_Controller_Exception' with message 'Resource 'error' not found# 0 /var/www/hobu/library/Zend/Acl.php(846): Zend_Acl->get('error') #1 /va in /var/www/hobu/library/Zend/Controller/Plugin/Broker。第 312 行的 php

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:27:29.350

您没有包含导致错误的“访问检查”插件的代码，但我猜这是`Zend_Acl`使用当前控制器/操作名称调用的。如果是这样，则底层问题与 ACL 无关。您`$groupN = $ggroup->getUserAktGroupMail()`正在引发异常，这导致请求被路由到错误控制器。由于您尚未设置名为“错误”的资源，因此在检查用户是否可以访问该控制器时会生成 ACL 错误。

我建议您修改您的访问检查插件，以便在控制器名称为“错误”时不检查权限。这应该可以消除您的 ACL 错误消息，让您看到并解决根本问题。

# django - 减少 Django 数据库调用

> ID：11704650
> 
> 赞同：0
> 
> 时间：2012-07-28T21:05:29.470
> 
> 标签：django, django-models, django-templates

我注意到我的 django 代码经常使用完全相同的查询调用我的数据库。

我知道当我实际需要数据显示在页面上或进行评估时，会产生 db hit。但是，我的模板代码如下所示：

模板：

```
{% if item.listing %}
        {{ item.name }} text <strong>{{ item.listing|lowestprice }}</strong>  more text
{% else %}
        {{ item.name }} even more text
{% endif %}
     ....
{% for listed_item in item.listing %}
     ....
{% endfor %} 
```

自定义过滤器：

```
def lowestprice(value):
   try:
      val = unicode(value[0].price) + unicode(value[0].symbol)
      return val
   except:
      return "not available" 
```

此代码命中我的数据库三次。第一个在我的自定义过滤器上的模板`{% if .. %}`第二个，第三个在`{% for %}`循环上。

列表是我的模型类的一种方法，它返回一个带有一些非常昂贵的连接的原始 SQL 查询集。

```
def listing(self):
    return Universe.objects.raw("ONE HELL OF A QUERY") 
```

我怎样才能减少我的代码只命中数据库一次？

编辑：使用`with`作品，但是否有可能避免自定义过滤器上的数据库命中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:24:07.397

您应该使用`with`一次昂贵的查询并将其存储在上下文中。

```
{% with item.listing as item_listing %}
   {% if item_listing %} ... {% endif %} ... etc ...
{% endwith %} 
```

# django - 如何限制 Django 中外键的选择但始终包含当前值？

> ID：11704657
> 
> 赞同：0
> 
> 时间：2012-07-28T21:06:45.687
> 
> 标签：django, django-models, django-forms, django-admin

我在这里使用了这种方法：[https ://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.limit_choices_to](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.limit_choices_to)

将 ModelA 中外键的选择限制为 ModelB 中标记为“活动”的条目。这样，我可以稍后在它们过时时停用 ModelB 条目。然后，当用户输入新的 ModelA 时，只显示活动的 ModelB 条目。

但是，如果我去修改一个旧的 ModelA，它引用了一个非活动的 ModelB，非活动的 ModelB 不会出现在列表中。所以我无法保存信息（现在，我正在通过管理员工作）。有没有好的方法来处理这个？最好显示正确的列表（所有活动的 ModelB），然后只包括当前选择的 ModelB，即使它是非活动的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T17:36:38.957

这将做你想要的。基本上，它会检查表单是否正在现有的 ModelA 对象上呈现，如果是，它会更改 ModelB 字段的查询集以过滤所有活动的 ModelB 对象以及当前分配的对象。

```
class ModelAAdminForm(forms.ModelForm):
    class Meta:
        model = ModelA

    def __init__(self, *args, **kwargs):
        super(ModelAAdminForm, self).__init__(*args, **kwargs)
        if self.instance.id and self.instance.modelb:
            q = Q(active=True)| Q(id=self.instance.modelb.id)
            self.fields['modelb'].queryset = ModelB.objects.filter(q)
        else:
            self.fields['modelb'].queryset = ModelB.objects.filter(active=True)

class ModelAAdmin(admin.ModelAdmin):
    form = ModelAAdminForm 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T22:17:59.853

您可以`formfield_for_foreignkey`使用[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey)

您必须将当前对象值附加到`Q`kwargs["queryset"] 中。

# python - Windows PowerShell - 与 Python 脚本远程 PC 交互

> ID：11704659
> 
> 赞同：3
> 
> 时间：2012-07-28T21:06:53.733
> 
> 标签：python, windows, powershell

我想编写一个 PowerShell 脚本，它将在远程 PC 上执行 Python 脚本。该脚本提示用户输入“Y”或“N”以继续执行它。

要远程登录，我输入

```
enter-pssession -ComputerName <Computer Name> -Credential <DOMAIN>\<username> 
```

然后我输入：

```
python ".\update_software.py" 
```

该脚本在提示之前打印出文本，但我收到以下错误消息，而不是提示：

```
python.exe : Traceback (most recent call last):
    + CategoryInfo          : NotSpecified: (Traceback (most recent call last)::String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

 File ".\update_software.py", line 19, in <module>
_runner.execute()
 File "C:\aimplatform2\aim\software_updater\run_update.py", line 76, in execute
 res = raw_input("> ")
 EOFError: EOF when reading a line 
```

如果有帮助，我正在运行 Windows XP 并远程连接到 Windows XP 机器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:44:45.890

根据python文档，

```
raw_input([prompt]) -> string

Read a string from standard input.  The trailing newline is stripped.
If the user hits EOF (Unix: Ctl-D, Windows: Ctl-Z+Return), raise EOFError.
On Unix, GNU readline is used if enabled.  The prompt string, if given,
is printed without a trailing newline before reading. 
```

因此，您必须在 raw_input 函数中按下（或 Powershell 可能已插入）CTRL+Z Enter。

# ruby-on-rails - 使用 json (Rails) 创建新的模型条目

> ID：11704662
> 
> 赞同：3
> 
> 时间：2012-07-28T21:07:13.367
> 
> 标签：ruby-on-rails, json

在我的 Rails 应用程序中，我试图从 json 客户端创建一个新用户。但是，我对作为 json 正文发送的内容有点坚持。该请求已正确发送到正确的控制器，但是我不断收到我的验证错误作为响应。它说电子邮件和用户名不能为空。我做错了吗？

我正在发布到这个 url *localhost:3000/users.json*

我正在尝试将其作为 json 请求发送：

```
{
 "user":
  {
   "email": "foo@foo.com",
   "username": "noob1",
  }
} 
```

在我的创建动作中，我有这个：

```
 # POST /users
  # POST /users.json
  def create
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        format.html { redirect_to @user, notice: 'User was successfully created.' }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end 
```

这是我的路线：

```
users GET    /users(.:format)          users#index
          POST   /users(.:format)          users#create
 new_user GET    /users/new(.:format)      users#new
edit_user GET    /users/:id/edit(.:format) users#edit
     user GET    /users/:id(.:format)      users#show
          PUT    /users/:id(.:format)      users#update
          DELETE /users/:id(.:format)      users#destroy 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:17:48.810

你用什么来发送 POST？确保您将`Content-Type`标题设置为`application/json`.

另外，尝试发布到`localhost:3000/users.json`.

# php - 没有从 Memcached 获得改进的性能

> ID：11704663
> 
> 赞同：2
> 
> 时间：2012-07-28T21:07:13.880
> 
> 标签：php, memcached, prestashop

我有一个基于 prestashop 的电子商务网站（GoDaddy Linux Centos VPS）。我试图减少 pingdom 所说的“等待时间”，即我的服务器通过 php 和 mysql 生成 html 所需的时间。

我相信我已经正确安装了 memcached，但是当我启用它时，我没有得到改进的性能。

这里发生了什么？

```
STAT pid 3403
STAT uptime 3210
STAT time 1343508734
STAT version 1.4.4
STAT pointer_size 64
STAT rusage_user 0.045993
STAT rusage_system 0.162975
STAT curr_connections 10
STAT total_connections 31
STAT connection_structures 12
STAT cmd_get 4507
STAT cmd_set 1260
STAT cmd_flush 2
STAT get_hits 4491
STAT get_misses 16
STAT delete_misses 2
STAT delete_hits 2
STAT incr_misses 0
STAT incr_hits 0
STAT decr_misses 0
STAT decr_hits 0
STAT cas_misses 0
STAT cas_hits 0
STAT cas_badval 0
STAT auth_cmds 0
STAT auth_errors 0
STAT bytes_read 6144475
STAT bytes_written 21262077
STAT limit_maxbytes 536870912
STAT accepting_conns 1
STAT listen_disabled_num 0
STAT threads 4
STAT conn_yields 0
STAT bytes 147189
STAT curr_items 340
STAT total_items 1260
STAT evictions 0 
```

这是最近的 pingdom 测试：[http ://tools.pingdom.com/fpt/#!/zdViZURr3/http://www.kikbo.com/buy](http://tools.pingdom.com/fpt/#!/zdViZURr3/http://www.kikbo.com/buy)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:44:37.230

您必须配置 prestashop 以在后台使用 memcache。因此只需转到首选项-> 性能选项卡并向下滚动。将 prestashop 设置为使用缓存并选择 memcache 作为缓存选项。

然后，您必须指定 prestashop 应该使用的内存缓存服务器。然后，您应该会立即看到性能提升！

不幸的是，prestashop 在 memcache 方面存在一些问题（信息没有被刷新，......）。我写了一篇关于此的博客文章，其中包含一些代码来解决这个问题： http: [//www.supnig.com/blog/caching-mysql-results-with-memcached](http://www.supnig.com/blog/caching-mysql-results-with-memcached)

# objective-c - 在Objective C中将HSB颜色转换为RGB

> ID：11704664
> 
> 赞同：4
> 
> 时间：2012-07-28T21:07:21.337
> 
> 标签：objective-c, ios, colors

我正在尝试使用[此算法](https://stackoverflow.com/a/5590028/458960)将 HSB 值转换为 RGB 值，但我没有得到正确的值。我有 29 的固定 s，100 的固定 b，并且正在为 h 值生成 0-360 之间的随机整数，并将它们输入函数以获取 RGB：

![在此处输入图像描述](../Images/a2b7ef48be55827b1adabf320ddd4d4e.png)

```
float h = (arc4random() % 360);
float s = 29;
float b = 100;
HSL2RGB(h, s, b, &red, &green, &blue);
NSLog(@"r:%f g:%f b:%f", red, green, blue); 
```

输出：

```
r:2971.000000 g:2971.000000 b:2971.000000 
```

我也试过这个：

```
float h = (arc4random() % 360)/1000.0;
float s = 0.29;
float b = 1.0;
HSL2RGB(h, s, b, &red, &green, &blue);
NSLog(@"r:%f g:%f b:%f", red, green, blue); 
```

输出：

`r:1.000000 g:1.000000 b:1.000000`

我做错了什么，还是这个算法搞砸了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T21:43:52.710

您可以使用 UIKit 直接轻松地获取使用 HSB 构造的颜色的 RGB 分量。

```
UIColor *color = [UIColor colorWithHue: hue saturation: saturation
                            brightness: brightness alpha: alpha];
if ( [color getRed: &red green: &green blue: &blue alpha: &alpha] ) {
    // color converted
} 
```

如果您只关心使用颜色，则可以跳过`if`并直接使用它。

根据 Apple 的[UIColor 文档](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIColor_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006892-CH3-SW47)：

> 如果颜色在兼容的颜色空间中，则颜色将转换为 RGB 格式，并将其组件返回给您的应用程序。如果颜色不在兼容的颜色空间中，则参数不变。

在这种情况下，兼容的色彩空间是 RGB 或 HSB。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T21:26:32.533

我不知道你的算法，但我应该你使用这个算法：

```
typedef struct
{
    double r;       // percent [0 - 1]
    double g;       // percent [0 - 1]
    double b;       // percent [0 - 1]
    double a;       // percent [0 - 1]
} RGBA;

typedef struct
{
    double h;       // angle in degrees [0 - 360]
    double s;       // percent [0 - 1]
    double v;       // percent [0 - 1]
} HSV;

- (RGBA)RGBfromHSV:(HSV)value
{
    double      hh, p, q, t, ff;
    long        i;
    RGBA        out;
    out.a       = 1;

    if (value.s <= 0.0) // < is bogus, just shuts up warnings
    {       
        if (isnan(value.h)) // value.h == NAN
        {   
            out.r = value.v;
            out.g = value.v;
            out.b = value.v;
            return out;
        }

        // error - should never happen
        out.r = 0.0;
        out.g = 0.0;
        out.b = 0.0;
        return out;
    }

    hh = value.h;
    if(hh >= 360.0) hh = 0.0;
    hh /= 60.0;
    i = (long)hh;
    ff = hh - i;
    p = value.v * (1.0 - value.s);
    q = value.v * (1.0 - (value.s * ff));
    t = value.v * (1.0 - (value.s * (1.0 - ff)));

    switch(i)
    {
        case 0:
            out.r = value.v;
            out.g = t;
            out.b = p;
            break;
        case 1:
            out.r = q;
            out.g = value.v;
            out.b = p;
            break;
        case 2:
            out.r = p;
            out.g = value.v;
            out.b = t;
            break;

        case 3:
            out.r = p;
            out.g = q;
            out.b = value.v;
            break;
        case 4:
            out.r = t;
            out.g = p;
            out.b = value.v;
            break;
        case 5:
        default:
            out.r = value.v;
            out.g = p;
            out.b = q;
            break;
    }
    return out;     
} 
```

我将它用于我的项目中，我对此没有任何问题。:)

# sencha-touch-2 - 如何测试 Sencha 2 应用程序？

> ID：11704665
> 
> 赞同：0
> 
> 时间：2012-07-28T21:07:25.520
> 
> 标签：sencha-touch-2

我在文档中看不到任何“如何测试 Sencha 2 应用程序”——真的没有框架支持测试吗？应该如何测试 Sencha 2 应用程序，最好的做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:43:36.030

找到一个关于测试的好 Sencha 博客：

[http://www.sencha.com/blog/automating-unit-tests/](http://www.sencha.com/blog/automating-unit-tests/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T00:42:59.663

这是一个由 5 部分组成的系列，涵盖使用 Jasmine（Sencha 内部使用）的单元测试和使用 Siesta 的集成测试（专为 Sencha 应用程序级别测试而构建）。

*   [http://pivotallabs.com/sencha-touch-bdd-part-1/](http://pivotallabs.com/sencha-touch-bdd-part-1/) - Jasmine 单元测试
*   [http://pivotallabs.com/sencha-touch-bdd-part-2/](http://pivotallabs.com/sencha-touch-bdd-part-2/) - 单元测试模型。
*   [http://pivotallabs.com/sencha-touch-bdd-part-3/](http://pivotallabs.com/sencha-touch-bdd-part-3/) - 测试视图和模拟商店
*   [http://pivotallabs.com/sencha-touch-bdd-part-4/](http://pivotallabs.com/sencha-touch-bdd-part-4/) - 使用 PhantomJS 进行无头测试
*   [http://pivotallabs.com/sencha-touch-bdd-part-5/](http://pivotallabs.com/sencha-touch-bdd-part-5/) - 控制器测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:37:25.927

在本地服务器（如 wampserver、apache tomcat 等）下运行您的应用程序。

请务必使用仅支持 Webtk 引擎的 Chrome、Safari 等 Web 浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T19:43:08.060

正如评论链接中所引用的......最好的方法是在本地主机上运行它。我使用 xampp 来做到这一点。您还需要安装 Sencha SDK 工具等。您可以在此处找到有关如何使用 sencha 命令设置您的应用程序进行测试的官方指南：http://docs.sencha.com/touch/2-0/#!/ [guide /命令](http://docs.sencha.com/touch/2-0/#!/guide/command)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T23:35:27.140

我建议使用带有 Cucumber、Capybara 和 Selenium 的 Rails 架构来测试您的 Sencha Touch 2 Web 应用程序。这对我来说效果很好。

# jquery - 如何使用 jquery 设置背景图像和位置？

> ID：11704667
> 
> 赞同：0
> 
> 时间：2012-07-28T21:07:56.540
> 
> 标签：jquery, html, css

我有这段代码，它允许我在将鼠标悬停在链接上时让颜色淡入淡出，但我希望背景图像随之淡出。我不确定如何在我的代码中设置背景图像和位置。

```
$(document).ready(function() {
   var $imageUrl = "../images/TopNavigationArrows.png";
   var cssBg = ?

   $(".link").hover(function() {
       // Hover State
       $(this).animate({ color: "#FFEFCA" }, 200);

   },function() {
       // Default State
       $(this).animate({ color: "#FFF" }, 200);
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:11:58.560

您不能为背景图像设置动画以淡入。您可能需要做的是在当前元素的较低 z-index 处添加一个包含背景图像的附加元素，并使用正常`fadeIn/fadeOut`功能将其淡入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:14:47.280

您可以像这样在 html 中指定图像的位置：

<button onclick="location.href='01.html'" style="position: absolute; left: 15px; top: 200px ;"> <img src="left.gif"

> < /按钮>

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-28T21:13:48.637

您可以为任何元素设置 css 属性，如下所示：

```
$(this).css({
    background-image:url('image.gif'),
    background-repeat:no-repeat,
    background-attachment:fixed,
    background-position:center, 
    top: 100,
    left: 100
}); 
```

我想这就是你要问的？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-28T21:17:03.490

如果你想动画颜色，你必须使用jQuery颜色动画UI，jQuery本身没有这个功能。

# php - 将 CakePHP 与 phpBB 集成时的类冲突

> ID：11704671
> 
> 赞同：2
> 
> 时间：2012-07-28T21:08:49.340
> 
> 标签：php, cakephp, conflict, forum, phpbb

我有一个现有的 Web 应用程序，我正在尝试添加一个论坛 - 选择的论坛是 phpBB。我试图将两者联系起来，以便在我的应用程序和论坛中使用用户和会话。

不幸的是，phpBB 包含一个“用户”类，它与我已经在我的站点中广泛实现的用户类发生冲突（“无法重新声明用户类..”blablabla）。

我自己尝试了一些事情但没有成功，并且看到了使用名称空间的建议，CakePHP 尚不支持这些名称空间。

有什么办法可以重命名我的用户类？有没有其他人遇到过类似的问题，并在不同的论坛软件上取得了成功？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:34:19.040

也许不是一个明确的解决方案，但更多的是一个思路：
加载 phpBB 类别名如何？
[`ClassRegistry::init()`](http://api.cakephp.org/class/class-registry)允许您加载一个类并为其分配一个别名。

# django - Django调试工具栏非常不准确的总结结果

> ID：11704673
> 
> 赞同：3
> 
> 时间：2012-07-28T21:09:00.950
> 
> 标签：django, django-debug-toolbar

我在 django 1.4 上使用 django 调试工具栏。问题是，它给了我不正确的总结结果。

例如，在产生一个查询的登录页面上（检查用户是否已登录）。DT 说有 43 个查询需要 17.27 毫秒。但是，当我实际单击 SQL 查询选项卡时，它确实显示了正确的结果—— 1 次查询在 0.47 毫秒内。

DT 是否与 1.4 或其他版本不兼容，还是有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:23:50.237

根据 github，这似乎是一个已知问题。我最近遇到了完全相同的问题。

[https://github.com/django-debug-toolbar/django-debug-toolbar/issues/88](https://github.com/django-debug-toolbar/django-debug-toolbar/issues/88)

我设法通过简单地将 django-toolbar 更新到最新版本来解决这个问题。

# ruby-on-rails - 无法使用 mongoid 和 MongoDB 将新记录保存到我的 rails 模型

> ID：11704674
> 
> 赞同：2
> 
> 时间：2012-07-28T21:09:04.363
> 
> 标签：ruby-on-rails, mongodb, mongoid

有一段时间没有更改我的代码，它工作正常。但是从昨天开始，我发现我无法通过 mongoid 将我的新记录保存到 mongod db。

背景：

```
gem 'rails', '3.2.5'
gem 'mongo', "1.6.2"
gem "mongoid", "2.4.7" 
```

mongo 服务器版本：db 版本 v2.0.5，pdfile 版本 4.5 MongoDB shell 版本：2.0.5

rails 模型和数据大小（仍处于开发模式）：3 个模型（用户：164K，关系：122M，状态：370K）

问题：无法保存新用户记录，如此处所示，即使它通过了约束（比如我有唯一的 uid、id_str）。

```
[2] pry(main)> User.count
=> 164325
[3] pry(main)> u=User.new(uid: 1001, id_str: "1001")
=> #<User _id: 501452f346b0a14fb5000001, _type: nil, created_at: nil, updated_at: nil, uid: 1001, id_str: "1001", name: nil, screen_name: nil, location: nil>
[4] pry(main)> u.save
=> true
[5] pry(main)> User.count
=> 164325
[6] pry(main)> u.save!
=> true
[7] pry(main)> User.count
=> 164325 
```

Rails 日志文件：

```
MONGODB (0ms) blog_development['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil}).limit(-1)
MONGODB (0ms) blog_development['users'].insert([{"_id"=>BSON::ObjectId('501452f346b0a14fb5000001'), "uid"=>1001, "id_str"=>"1001", "updated_at"=>2012-07-28 21:00:39 UTC, "created_at"=>2012-07-28 21:00:39 UTC}])
MONGODB (0ms) blog_development['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil}).limit(-1)
MONGODB (0ms) blog_development['$cmd'].find({"count"=>"users", "query"=>{}, "fields"=>nil}).limit(-1) 
```

mongodb.log 文件中什么都没有，因为操作太快了

导致不保存问题的原因可能是什么？

更新：我在 mongo shell 中的数据库状态：

```
"ns" : "blog_development.users",
    "count" : 164325,
    "size" : 159656080,
    "avgObjSize" : 971.5872813022972,
    "storageSize" : 177336320,
    "numExtents" : 14,
    "nindexes" : 3,
    "lastExtentSize" : 36089856,
    "paddingFactor" : 1.0099999999963194,
    "flags" : 1,
    "totalIndexSize" : 22729280,
    "indexSizes" : {
        "_id_" : 9598624,
        "uid_1" : 6091120,
        "screen_name_1" : 7039536
    },
    "ok" : 1 
```

操作系统为：2.6.38-8-generic #42-Ubuntu SMP Mon Apr 11 03:31:24 UTC 2011 x86_64 x86_64 x86_64 GNU/Linux

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T03:03:34.630

您正在使用`save`遵循“ [upsert](http://rdoc.info/github/mongoid/mongoid/Mongoid/Persistence%3asave) ”语义的方法。如果可以找到与您的条件 ( `(uid: 1001, id_str: "1001")`) 匹配的现有文档，它将被更新而不是插入新文档。

```
 u=User.new(uid: 1001, id_str: "1001")

 u.save
=> true 
```

由于您实际上打算创建一个新文档，因此您应该使用`insert`：

```
u.insert 
```

或者，您也可以`_id`在您的类中允许自定义并在创建时指定它。您需要[覆盖默认为只读的 Mongoid 的 _id 字段](http://mongoid.org/en/mongoid/docs/documents.html#custom_ids)。

# java - 在重新创建活动时保持变量值

> ID：11704675
> 
> 赞同：0
> 
> 时间：2012-07-28T21:09:54.167
> 
> 标签：java, android, eclipse

谁能告诉我一种方法，当我重新创建活动时，我可以持续更新用于跟踪游戏得分的变量？

每次游戏结束时，用户都有机会“继续玩”，这会重置游戏，这也会重置分数，因为变量在 GameActivity 类中。我是否必须创建一个单独的课程并将分数作为一个包传递给那里，然后再将其传回娱乐？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:36:15.953

您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html/)

放置/编辑数据：

```
SharedPreferences score = getSharedPreferences("Score",0);
                    SharedPreferences.Editor edit = score.edit();
                    edit.putInt("Scores", 50);
                    edit.commit(); 
```

获取数据：

```
 SharedPreferences score = getSharedPreferences("Score", 0);
   int score = settings.getInt("Score", 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:21:05.750

你可以看看这里的例子：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

我认为您可能会使用内部存储选项。

要设置和重置变量，我认为您可以使用 onPause/onResume/onCreate 活动覆盖来决定何时更新变量。您可能还有一种方法来重置分数。我认为在您的应用程序中为这种能力创建自己的类是有意义的，因为它将有助于将记分板逻辑与您的其余代码分开。

# c# - 如何将图像添加到 TreeView.Tag？

> ID：11704680
> 
> 赞同：0
> 
> 时间：2012-07-28T21:10:44.010
> 
> 标签：c#, winforms, treeview

我添加这样的文本：

```
TreeNode treeNode = new TreeNode("Person");
String[] str = new string[] {"name", "age"};

this.TreeView.Nodes.Add(treeNode);
this.TreeView.Nodes[0].Tag = str; 
```

.png 扩展名中的图像

另一个问题是一个图像中的所有图标，就像一个数组： ![在此处输入图像描述](../Images/59207ec6c7d9b25f912302494e643461.png)

我应该如何从这张图片中获取这个图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:49:28.123

您可以使用以下方式拆分图像，根据您的需要更新代码

对于获胜形式

```
 private List<Image> GetImages(string imageFile)
    {
        var images = new List<Image>();
        Image rootImage = Image.FromFile(imageFile);
        for (int i = 0; i < 6; i++)
        {
            Image image = CropImage(rootImage, new Rectangle(10 + i * 60, 0, 70, 60));
            images.Add(image);
        }
        return images;
    }

    private static Image CropImage(Image image, Rectangle area)
    {
        var bmpImage = new Bitmap(image);
        Bitmap bmpCrop = bmpImage.Clone(area, bmpImage.PixelFormat);
        return (bmpCrop);
    } 
```

对于 wpf

```
 var image = new Image {Width = 70, Height=60};
        var source = new BitmapImage(new Uri(filePath));
        var bitmap = new CroppedBitmap(source, new Int32Rect(0, 0, 70, 60));
        image.Source = bitmap; 
```

您可以在创建图像后填充标签属性

# timer - CUDA：CUtil 计时器 - 经过时间的混淆

> ID：11704681
> 
> 赞同：1
> 
> 时间：2012-07-28T21:10:45.937
> 
> 标签：timer, cuda, initialization, elapsedtime

当我评估我的程序时，我发现在某些时候我得到了高达 100 毫秒的时间间隔。我已经搜索了每个操作，但单独没有操作花费这个时间。然后我注意到无论我在哪里进行 cudaThreadSynchronize 调用，第一次调用都需要 100 毫秒。然后我在下面写了这样一个例子。在第一行调用 cudaThreadSynchronize 时，发现最后经过的时间值小于 1 毫秒。但如果不调用它，则平均需要 110 毫秒。

```
int main(int argc, char **argv)
{
    cudaThreadSynchronize(); //Comment out it then get 110msec as elapsed time..

    unsigned int timer;
    cutCreateTimer(&timer);
    cutStartTimer(timer);

    float *data;
    CUDA_SAFE_CALL(cudaMalloc(&data, sizeof(float) * 1024));

    cutStopTimer(timer);
    printf("CUT Elapsed: %.3f\n", cutGetTimerValue(timer));

    cutDeleteTimer(timer);

    return EXIT_SUCCESS;
} 
```

我认为一开始的 cudaThreadSynchronize() 会处理 CUDA 库的初始化。完全初始化内核的方法是否正确，不会影响其他操作的时间评估？在开始时调用 cudaThreadSynchronize 是否足够和正确，或者是否有任何正确的方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:23:26.633

为了使用 CUDA，必须首先在 GPU 上创建一个“CUDA 上下文”，这大约需要 70-100 毫秒。在您的示例`cudaThreadSynchronize();`中，正在制作上下文。上下文只为您的应用程序创建一次。在进行时序分析时，我还做了一个虚拟内存副本来创建上下文（正如您在上面使用 所做的那样`cudaThreadSynchronize();`）。

# neo4j - 如何从 Neo4j 服务器插件登录？

> ID：11704687
> 
> 赞同：4
> 
> 时间：2012-07-28T21:12:13.633
> 
> 标签：neo4j, graph-databases

我正在尝试调试我正在编写的 Neo4J Server 插件中的问题。有我可以输出的日志吗？在哪里或如何做到这一点并不明显。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T18:18:18.243

好问题。我认为您可以使用Java Logging？这应该被路由到正常的日志记录系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-05-05T15:44:46.670

只需注入`org.neo4j.logging.Log`包含 Neo4j 存储过程实现的类即可。

```
public class YourProcedures {

    @Context
    public Transaction tx;

    @Context
    public Log log;

    @Procedure(value = "yourProcedure", mode = Mode.READ)
    public Stream<YourResult> yourProcedure(@Name("input") String input) {
       log.debug("something");
    }
} 
```

然后将日志转储到标准 Neo4j 日志文件中。级别由`GraphDatabaseSettings.store_internal_log_level`配置控制。级别也可以在运行时更改。只需注入`DependencyResolver`bean 并定义这个管理过程。（该框架有监听器连接到重新配置内部日志框架的配置更改。这是我能找到的最简单的解决方案。）

```
@Context
public DependencyResolver dependencyResolver;

@Procedure(value = "setLogLevel", mode = Mode.DBMS)
@Description("Runtime change of logging level")
public void setLogLevel(@Name("level") String level) {
    Config config = dependencyResolver.resolveDependency(Config.class);
    config.set(GraphDatabaseSettings.store_internal_log_level, Level.valueOf(level));
} 
```

* * *

## 更新：

这个 ^ 解决方案有效，但是当想要使用 Log4j 中通常的日志记录方式时它是不够的 - 不同的记录器按层次结构组织，每个记录器都有自己的级别。该`org.neo4j.logging.Log`组件只是`GlobalProcedures`该类的 Log4j 记录器的包装器。此记录器只是层次结构中的许多记录器之一。事实上，包装器阻止了对底层框架更丰富特性的访问。（不幸的是，`@Context Log`在类中定义由某些注释限定记录器区分的多个字段`YourProcedures`也是不可能的，因为字段注入是由驱动的，因此根据字段类型，`Map<Class,instance>`对于任何带注释的字段只有一个可能的实例注入。）`@Context-`

**解决方案 1：** 在接受的答案中使用 JUL。缺点是，JUL 无论如何都会将日志事件重定向到底层 Log4j，因此如果在 JUL 中定义了记录器层次结构，则必须将 Log4j 设置为尽可能低的级别，以使 JUL 级别敏感。

**解决方案2：** 直接使用Log4j（即`public static final Logger logger = LogManager.getLogger("some.identifier.in.hierarchy")`在`YourProcedures`）。尽管有可能以编程方式重新定义配置存在一些问题，但我放弃了这个解决方案只是因为我在非 docker 环境中部署这个解决方案时遇到了一些问题。

**解决方案 3：（**最终选择）我定义了自定义组件`LogWithHierarchy`（它可以`ExtensionFactory`使用 s 从自己加载的内容构建`ServiceLoader`- 我在[APOC 配置实现](https://github.com/neo4j-contrib/neo4j-apoc-procedures/blob/4.2/core/src/main/java/apoc/ApocConfigExtensionFactory.java)中受到启发）。该组件提供表单等API `debug(loggerName, message)`。`info(loggerName, message)`该组件知道原始`Log`，深入到其log4j`LoggerContext`并将所有日志记录请求重定向到此中的特定记录器`LoggerContext`。日志消息最终以`debug.log`. 有了这个解决方案，原始的 log4j 记录器层次结构被充分利用，级别可以在运行时动态更改（`setLogLevel`必须更改以在上述操作上进行操作`LoggerContext`），并且仍然使用标准 Neo4j 插件支持来实现所有内容。

# azure - 如何从 Azure 表存储 api 调用中获取 x-ms-request-id

> ID：11704688
> 
> 赞同：0
> 
> 时间：2012-07-28T21:12:36.377
> 
> 标签：azure, azure-storage, azure-table-storage

我在 Windows azure 应用程序上的 azure tablestorage api 调用出现缓慢行为。我需要获取特定调用的请求 ID（响应标头中的 x-ms-request-id）。有没有办法使用 storageclient api 来获取它？存储客户端 api 是否甚至公开了这个 id？如果没有，还有其他方法可以获取此 ID 吗？

我通过以下方式使用api：

```
 public UserDataModel GetUserData(String UserId)
    {
        UserDataModel osudm = null;
        try
        {
            var result = (from c in GetServiceContext().OrgUserIdTable
                          where (c.RowKey == UserId)
                          select c).FirstOrDefault();

            UserDataSource osuds = new UserDataSource(this.account);
            osudm = osuds.GetUserData(result.PartitionKey, result.UserName);
        }
        catch (Exception e)
        {
        }
        return osudm;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T07:25:42.337

您在此处询问的内容更多与 WCF 数据服务相关，而不是与 Windows Azure 相关（存储客户端客户端 API 使用它）。以下是一些示例代码，您可以如何访问响应标头：

```
 var tableContext = new MyTableServiceContext(...);
    DataServiceQuery<Order> query = tableContext.Orders.Where(o => o.RowKey == "1382898382") as DataServiceQuery<Order>;
    IEnumerable<Order> result = query.Execute();
    QueryOperationResponse response = result as QueryOperationResponse;

    string requestId;
    response.Headers.TryGetValue("x-ms-request-id", out requestId); 
```

因此，您首先要做的就是创建您的查询并将其转换**为 TType 的 DataServiceQuery**。然后，您可以对该查询调用**Execute**方法并将其转换为**QueryOperationResponse**。此类将使您可以访问所有标头，包括**x-ms-request-id**。

请注意，在这种情况下，您将无法使用**FirstOrDefault**，因为这不会返回**IQueryable**并且您无法将其**强制转换为 TType 的 DataServiceQuery**（除非有其他方法可以使用 WCF 数据服务）。

**注意：**调用这么慢的原因可能是您的查询引起的。当您查询**OrgUserIdTable**表时，您只根据 RowKey 进行筛选。我不知道您在该表中有多少数据或分区，但如果您不使用 PartitionKey，这可能会对性能产生重大影响。您必须知道，如果不包括 PartitionKey，您将强制搜索所有分区（可能在多个服务器上），这可能会导致调用如此缓慢。

我建议您查看以下实际指南，以更好地了解分区如何以及为什么与 Windows Azure 存储中的性能相关：[为 Windows Azure 表存储设计可扩展分区策略](http://msdn.microsoft.com/en-us/library/windowsazure/hh508997.aspx)

# python - Django - 将输出发送给用户后执行方法

> ID：11704693
> 
> 赞同：0
> 
> 时间：2012-07-28T21:14:10.060
> 
> 标签：python, django

我有一个很长（大约 1 秒）的诊断方法来调用每个用户的请求。在渲染并将输出发送给用户之后调用此方法非常好。我怎么能在 Django 中做到这一点？有什么指南可以找到有关它的信息吗？不幸的是，不能考虑使用任何队列系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:36:28.280

您可以使用`request_finished`信号并在每个请求结束时启动您的功能。看看[https://docs.djangoproject.com/en/dev/ref/signals/#django.core.signals.request_finished](https://docs.djangoproject.com/en/dev/ref/signals/#django.core.signals.request_finished)

# php - 如何将文本文件转换为基于 php 数组的新文本文件？

> ID：11704694
> 
> 赞同：0
> 
> 时间：2012-07-28T21:14:10.323
> 
> 标签：php, text

我有一个看起来像这样的文本文件：

```
Line one
Line two
Line three 
```

我想将其转换为：

```
return array(
  'Line one',
  'Line two',
  'Line three'
); 
```

并将其保存为新文件。我不想一遍又一遍地执行相同的explode/preg_split，这真的没有意义。我只是想从原始文件创建一个静态文件，并在更新原始文件时更新它。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:16:06.020

使用[`file`](http://php.net/file)函数读取文件：

```
$array = file('file1.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); 
```

并输出它，使用[`file_put_contents`](http://php.net/file_put_contents)and [`implode`](http://php.net/implode)：

```
file_put_contents('file2.txt', implode("\n", $array)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T21:22:40.587

```
$array = file($thefile,FILE_IGNORE_NEW_LINES|FILE_SKIP_EMPTY_LINES);
file_put_contents($theotherfile, "return array(\n  ".implode(",\n  ", $array)."\n);"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T21:35:32.757

您可以使用它`var_export()`来生成所需的输出。

例子：

```
$array = array();
for ($i = 0; $i < 10; $i++) {
    $array[md5($i)] = sha1($i);
}

echo var_export($array); 
```

结果：

```
array (
  'cfcd208495d565ef66e7dff9f98764da' => 'b6589fc6ab0dc82cf12099d1c2d40ab994e8410c',
  'c4ca4238a0b923820dcc509a6f75849b' => '356a192b7913b04c54574d18c28d46e6395428ab',
  'c81e728d9d4c2f636f067f89cc14862c' => 'da4b9237bacccdf19c0760cab7aec4a8359010b0',
  'eccbc87e4b5ce2fe28308fd9f2a7baf3' => '77de68daecd823babbb58edb1c8e14d7106e83bb',
  'a87ff679a2f3e71d9181a67b7542122c' => '1b6453892473a467d07372d45eb05abc2031647a',
  'e4da3b7fbbce2345d7772b0674a318d5' => 'ac3478d69a3c81fa62e60f5c3696165a4e5e6ac4',
  '1679091c5a880faf6fb5e6087eb1b2dc' => 'c1dfd96eea8cc2b62785275bca38ac261256e278',
  '8f14e45fceea167a5a36dedd4bea2543' => '902ba3cda1883801594b6e1b452790cc53948fda',
  'c9f0f895fb98ab9159f51fd0297e236d' => 'fe5dbbcea5ce7e2988b8c69bcfdfde8904aabc1f',
  '45c48cce2e2d7fbdea1afc51c7c6ad26' => '0ade7c2cf97f75d009975f4d720d1fa6c19f4897',
) 
```

# php - PHP：电子邮件验证和接受来自某个域的电子邮件地址

> ID：11704698
> 
> 赞同：3
> 
> 时间：2012-07-28T21:14:31.823
> 
> 标签：php

我目前正在使用 AJAX/JS 来获得无需单击按钮或刷新页面的表单。我的询问是关于电子邮件验证的。现在，PHP 代码检查电子邮件地址是否有效。我只想让它接受来自某个域的电子邮件。如何通过 php 实现只接受来自的电子邮件地址`gmail`？[**例子**](http://webprolearner.ueuo.com/dropdown-menu/test1.php)

**用于验证电子邮件的 PHP：**

```
if($_POST) {
    $email = $_POST['email'];
    if (preg_match('|^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$|i', $email)) {
        echo ('<div id="email_input"><span id="resultval">'.$email.'</span></div>');
    }
    else {
        echo ('<div id="email_input"><span id="resultval">Include a valid email address.</span></div>');
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T21:24:37.027

PHP 有一个简单的功能可以帮助您检查电子邮件地址是否有效：

```
$isValid = filter_var($email, FILTER_VALIDATE_EMAIL); 
```

要检查电子邮件地址是否是 gmail 地址，可以使用以下方法：

```
list ($user, $domain) = explode('@', $email);
$isGmail = ($domain == 'gmail.com'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T21:25:20.790

小心你的正则表达式，[它不会验证所有实际的电子邮件地址](http://www.regular-expressions.info/email.html)。

您有一个内置的 PHP 函数来检查电子邮件是否有效：

```
$email = filter_var($_POST['email'], FILTER_VALIDATE_EMAIL); 
```

如果返回 true，那么您只需检查字符串是否以`@gmail.com`. 请注意，此功能可能存在[一些奇怪的问题](https://stackoverflow.com/questions/8553021/php-filter-var-email-error/8553106#8553106)，因为电子邮件验证标准可能令人惊讶。

如果你真的想要一个验证所有电子邮件地址的正则表达式，这里是：

`(?:[a-z0-9!#$%&'*+/=?^_{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T21:19:30.843

你应该把你的正则表达式改成这个

```
'|^[A-Z0-9._%+-]+@gmail\.com$|i' 
```

# jdbc - 连接到数据源 phpstorm

> ID：11704699
> 
> 赞同：3
> 
> 时间：2012-07-28T21:14:46.283
> 
> 标签：jdbc, odbc, mysql-connector, phpstorm

我正在尝试将 PHPStorm 连接到我网站服务器上的数据库，该数据库托管在 BlueHost 的 Linux 机器上。

为了做到这一点，我点击了屏幕右侧的数据源选项卡，+ 图标，然后*DB 数据源*弹出一个数据源属性对话框。我为源输入了一个名称，将*Data Source Level*设置为*Project*。然后下载 MySQL Connector/J-5.1.18 JDBC Driver Files。这用大约 6-7 个类填充了 JDBC 驱动程序类，包括*com.mysql.jdbc.Driver*。

我相信我遇到的问题是在数据库 URL 上。它要求我不熟悉的 jdbc:// url。我使用了示例格式 jdbc:mysql://[host][,failoverhost...][:port]/[database] 以及我的用户名和密码。

对于主机，我尝试了*localhost*和 mysql 服务器*框的名称###.bluehost.com*。端口 3306，数据库的名称非常简单。

尝试测试连接时收到此错误...

```
Connection to Data Source failed
java.sql.SQLException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:344)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2332)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
in RemoteDriverImpl.connect(RemoteDriverImpl.java:27)
in LocalDataSource.getConnection(LocalDataSource.java:105) 
```

此问题与此处其他问题的主要区别在于，这不是连接到 wamp 或 mamp 堆栈，而是连接到远程数据库。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-20T08:53:44.607

如果您正在使用 Mamp 并且遇到此问题，只需打开 MAMP 并取消选中“仅允许本地访问”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T05:34:25.560

BlueHost 要求我将我的 IP 地址范围添加到允许的访问主机列表中。我使用的是共享主机帐户，因此 BlueHost 似乎允许在共享主机帐户上进行远程连接。

我通过在我的主机帐户的 cPanel 中单击 PHPMyAdmin 旁边的“远程 MySQL”来做到这一点。cPanel 自动检测到我的 IP 范围并建议我添加它。一旦我这样做了，其他一切都到位了。

感谢 LazyOne 为我指明了正确的方向。

# node.js - MQTTJS - 从客户端对象中提取版本号/用户名/密码

> ID：11704700
> 
> 赞同：0
> 
> 时间：2012-07-28T21:14:54.127
> 
> 标签：node.js, coffeescript, mqtt

[我对https://github.com/adamvr/MQTT.js](https://github.com/adamvr/MQTT.js)的服务器做错了吗？我看到`client.id`进来很好。其他一切都是未定义的；我使用 3.1 用户/通行证与另一个代理验证了 MQTT 客户端的信息，所以我知道问题不存在。

```
 clients = { }

    server = mqtt.createServer (client) =>
      console.log 'Broker:mqtt:createServer'

      # Catch when client connects
      client.on 'connect', (packet) =>
        console.log 'Broker:connect'

        client.connack
          returnCode: 0

        client.id = packet.client

        console.log 'version: ' + client.versionNum # undefined
        console.log 'client: ' + client.id # COMES THROUGH FINE!
        console.log 'username: ' + client.username # undefined
        console.log 'password: ' + client.password # udefined

        clients[client.id] = client

        console.log 'clients: ' + JSON.stringify clients

   ...

    server.listen 1883 
```

我还在项目下创建了一个问题：[https ://github.com/adamvr/MQTT.js/issues/22](https://github.com/adamvr/MQTT.js/issues/22)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:07:07.317

您在事件中收到的客户端对象`connect`不包含您正在寻找的任何参数。具有正确值的唯一原因`client.id`是您在上面的行中设置了它。与事件一起传递的`packet`包含属性。

```
clients = { }

server = mqtt.createServer (client) =>
  console.log 'Broker:mqtt:createServer'

  # Catch when client connects
  client.on 'connect', (packet) =>
    console.log 'Broker:connect'

    client.connack
      returnCode: 0

    client.id = packet.client

    console.log 'version: ' + packet.versionNum
    console.log 'client: ' + packet.client
    console.log 'username: ' + packet.username
    console.log 'password: ' + packet.password

    clients[client.id] = client

    console.log 'clients: ' + JSON.stringify clients

 ...

server.listen 1883 
```

# php - 试图在 php 中插入 php

> ID：11704706
> 
> 赞同：0
> 
> 时间：2012-07-28T21:15:42.337
> 
> 标签：php, string

我尝试在这个 php 字符串中使用双引号和单引号。然而，没有成功。如何在 php 中调用 php？

```
<?php echo wpws_get_content('<?php the_field('rate_my_professor_link''); ?>','.comment','html','user_agent=Bot+at+mysite.com&on_error=error_show&')?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T21:18:12.897

你只需要这样做：

```
<?php echo wpws_get_content(the_field('rate_my_professor_link'), '.comment', 'html', ''user_agent=Bot+at+mysite.com&on_error=error_show&'); ?> 
```

您可以将函数直接放入其他函数中。

# c# - Validator controls must always have Display="Dynamic"

> ID：11704709
> 
> 赞同：3
> 
> 时间：2012-07-28T21:15:58.567
> 
> 标签：c#

i've been working on this for some time now but I can't seem to be able to find the answer... Google doesn't really help me today!

I'm working on an C# website that uses a lot of forms with a lot of validation on it. Big forms which have to be typed by hand, (no problems there though).

The problem that I have is that I always want my ValidationControls to have the Display Property set to dynamic.

I have found a work around but I'm not convinced that this is the best solution.

Currently I have a BaseValidatorControlAdapter that sets the validators display type to "Dynamic" like this:

```
public class BaseValidatorControlAdapter : ControlAdapter
{
    protected override void Render(System.Web.UI.HtmlTextWriter writer)
    {
        System.Web.UI.WebControls.BaseValidator _control = (System.Web.UI.WebControls.BaseValidator)this.Control;
        _control.Display = System.Web.UI.WebControls.ValidatorDisplay.Dynamic;
        base.Render(writer);
    }
} 
```

This is then triggerd by adding an App_Browser which looks like this

```
<browsers>
    <browser refID="Default">
        <controlAdapters>
            <adapter controlType="System.Web.UI.WebControls.BaseValidator"
                     adapterType="BaseValidatorControlAdapter" />
        </controlAdapters>
    </browser>
</browsers> 
```

My question for you is. Is it possible for me to set the default value of Display for any validator control. Because my current solution just overrides what there is right now and there is no way of changing that. Therefor when the situation arrises that I do need something else then dynamic in the display option there is no solution for it.

I'm almost convinced that there is a better solution to this.

Any advice is appreciated!

**Edit august 2nd 2012:**

I finally settled with the solution to override the default asp.net controls and add the following constructor to them

```
public controlname ()
  : base ()
{
    this.Display = "Dynamic";
} 
```

I added all these controls to a namespace and now I can do

```
<validator:RequiredField ID="RqrdFld_x" runat="server" Display="Static" /> 
```

Essentially overriding the default value in my control definition and overriding the default control Display value of Dynamic in the constructor.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:32:27.497

What you can do then use such code in `Page_Init` event:

```
foreach(Control control in Page.Controls){
  if(control is System.Web.UI.WebControls.BaseValidator)
  {
     control.Display = "Static";
  }
} 
```

It will find all the controls and set the `Display` property accordingly.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T11:55:52.373

This [link](http://ondotnet.com/pub/a/dotnet/2004/08/30/themesandskins.html) should be helpful in solving your problem.

You can use a skin file to set defaults for web controls accross a .NET site.

I have added a folder called DefaultTheme to my App_Theme folder and added a file to it called Skin.skin, with the following contents:

```
<asp:RequiredFieldValidator runat="server" Display="Dynamic" />
<asp:CompareValidator runat="server" Display="Dynamic" />
<asp:RegularExpressionValidator runat="server" Display="Dynamic" /> 
```

..allowing me to have a default setting for a number of different validators (or other controls) across my website.

# jquery - jquery 动态填充元素并执行特定于每个元素的回调的正确方法？

> ID：11704718
> 
> 赞同：0
> 
> 时间：2012-07-28T21:16:51.773
> 
> 标签：jquery

我试图找出在 jquery 中执行此操作的最佳方法。我正在通过 ajax 调用获取一些数据，并将其填充到页面中。我们正在处理一个简单的笔记应用程序。每个笔记都有自己的一组数据。我已经包含了我目前正在使用的代码。填充到 DOM 中的注释有多种方法（如链接），它们可以做不同的事情，例如保存、删除、恢复。当这些被点击时，我想进行另一个 ajax 调用并进行 POST。但是，我如何确定保存或删除来自哪个便笺？

我应该如何处理点击事件？我应该为每个动态元素的 id 创建一个选择器吗？这听起来不太理想，我也不知道该怎么做。我可以有一个事件处理程序来创建一个匿名函数并解析 id，其中 id 包含一个唯一标识符和一个指令，例如保存、删除等。这两个似乎都不是最好的选择。stackoverflow 有什么推荐的？

```
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
    <link rel="stylesheet" type="text/css" href="layout.css" />
    <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
        $.ajax({
            url: 'noteGet.php',
            data: "",
            dataType: 'json',
            success: function(rows)
                {
                    for (var i in rows) {
                        var noteId = rows[i][0];
                        var noteContent = rows[i][2];
                        $('#allNotes')
                            .append('<span id="stickyNote'+noteId+'" class="stickyNote"><textarea id="stickyNoteTextArea'+noteId+'" class="stickyNoteTextArea">'+noteContent+'</textarea><a href="#" id="stickyNoteSave'+noteId+'">save</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" id="stickyNoteDelete'+noteId+'">delete</a></span>')
                    }
                }
            });

            $('#allNotes').on('click', 'a', function() {
                //what to do
            });

        });
    </script>

</head>
<body>
    <span id="links"></span>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:26:12.213

您可以简单地`class`为每个元素提供相同的属性，并提供操作链接（保存、删除等）、它们自己的类，以便您也可以识别它们。

```
$.ajax({
  url: 'noteGet.php',
  data: "",
  dataType: 'json',
  success: function(rows){
    $.each(rows,function(index,elem)){
      var noteContent = elem[2];
      $('#allNotes').append(HTML); // see below for HTML content.
    });
  }
});

$('#allNotes .stickyNote .save_action').on('click', function(e) {
  // user clicked on a save action

  // retrieve the original id from the parents rel parameter.
  var noteId = $(this).parent().attr('rel');

  e.preventDefault();
});

$('#allNotes .stickyNote .delete_action').on('click', function(e) {
  // user clicked on a delete action

  // retrieve the original id from the parents rel parameter.
  var noteId = $(this).parent().attr('rel');

  e.preventDefault();
}); 
```

* * *

如果您想在一个主要功能中捕获它们，然后决定从那里做什么，您可以测试类属性的存在

```
$('#allNotes .stickyNote a').on('click',function(){

  // retrieve the original id from the parents rel parameter.
  var noteId = $(this).parent().attr('rel');

  if ($(this).hasClass('save_action')){
    // user clicked on a save action
  }
  if ($(this).hasClass('delete_action')){
    // user clicked on a delete action
  }

  e.preventDefault();
}); 
```

我将在这里为您单独列出实际的 HTML，以便更容易看到 -

```
<span rel="'+index+'" id="stickyNote'+index+'" class="stickyNote">
  <textarea id="stickyNoteTextArea'+index+'" class="stickyNoteTextArea">'+noteContent+'
  </textarea>
  <a href="#" class="save_action" id="stickyNoteSave'+index+'">save</a>
  <a href="#" class="delete_action" id="stickyNoteDelete'+index+'">delete</a>
</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T22:06:37.493

首先，您必须在 ajax 调用响应时将事件绑定到您的元素 - 在`ajax` `success`函数中。

在事件处理程序中，您可以获得触发事件的元素：

```
//what to do
var element = $(this);
var noteId  = element.attr('id');
// then manipulate with it - parse or some else 
```

* * *

您还可以`note_id`在动态创建注释时将信息存储在 attr 中：

```
 .append('....<a href="#" _noteId="'+noteId+'">delete</a>....') 
```

然后使用这个属性：

```
// what to do
var noteId = $(this).attr('_noteId'); 
```

* * *

如果您想为所有人提供一个处理程序（不是好主意），您可以存储`action_type`：

```
 .append('....<a href="#" _noteId="'+noteId+'" _actionType="delete">delete</a>....'); 
```

并使用它：

```
// what to do
var el = $(this);
var noteId = el.attr('_noteId');
var actionType = el.attr('_actionType');
// then 'switch (actionType) ...'  or some else 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-28T21:27:39.610

当您将笔记元素添加到页面时，您可以将要用于笔记的任何数据放在笔记本身的数据属性中：

```
$.ajax({
 url: 'noteGet.php',
 data: "",
 dataType: 'json',
 success: function(rows) {
   for (var i in rows) {
    var noteId = rows[i][0];
    var noteContent = rows[i][2];
    var noteEl = $('<span id="stickyNote'+noteId+'" class="stickyNote"><textarea id="stickyNoteTextArea'+noteId+'" class="stickyNoteTextArea">'+noteContent+'</textarea><a href="#" id="stickyNoteSave'+noteId+'">save</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" id="stickyNoteDelete'+noteId+'">delete</a></span>');
    noteEl.appendTo('#allNotes').find("a").data("id", noteId);
   }
  }
}); 
```

然后你可以在你的点击处理程序中访问它：

```
$('#allNotes').on('click', 'a', function(e) {
    var noteId = $(e.target).data("id");
    // operate
}); 
```

祝你好运！

# objective-c - 如何使用位置或其他旋转图像

> ID：11704725
> 
> 赞同：0
> 
> 时间：2012-07-28T21:17:59.267
> 
> 标签：objective-c, ios5, xcode4.3

想象一个中间有一个 UIImageView 的 UIView，当我旋转 iphone 时，图像仍然向上看，这意味着当我向右旋转 iphone 时， UIImageView 以相同的度数向左旋转。我见过一些应用程序，比如 iAngle Meter 使用这个选项，那么我该怎么做呢？

钯。我只知道如何旋转图像，我使用：

```
#define M_PI 3.14159265358979323846264338327950288 //pi
#define DEGREES_TO_RADIANS(angle) (angle / 180.0 * M_PI)

- (void)rotateImage: (UIImageView *)image duration:(NSTimeInterval)duration curve:(int)curve degrees:(CGFloat)degrees {
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:duration];
[UIView setAnimationCurve:curve];
[UIView setAnimationBeginsFromCurrentState:YES];

CGAffineTransform transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(degrees));
image.transform = transform;

[UIView commitAnimations];
} 
```

应用线：

```
[self rotateImage:logoAnim duration:0.5 curve:UIViewAnimationCurveEaseIn degrees:-30]; 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:30:29.260

查看 UIViewController 的方法：

```
 -(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)orientation
                                             duration:(NSTimeInterval)duration {

     } 
```

它会在何时开始旋转到您通过 info.plist 和 -shouldRotateToInterfaceOrientation: 方法启用到您的应用程序的方向时通知您。

# ruby-on-rails-3 - 为标签和类别创建操作和路由

> ID：11704727
> 
> 赞同：1
> 
> 时间：2012-07-28T21:18:14.177
> 
> 标签：ruby-on-rails-3, routes, categories, acts-as-taggable-on, controller-actions

我正在使用 Rails 3.2.5 为自己创建一个博客，并且正在尝试`tags`正确处理`categories`。我想允许用户单击`link_to`带有标签名称的 a ，将它们带到具有相同标签的其他条目并且 URL 为`'root.com/tag/selected-tag'`。对于类别，我希望 URL 具有相同的内容`'root.com/category/selected-category'`。我已经开始使用它并使用`acts_as_taggable_on`标记和简单的类别（当我决定我想要什么类别时`text input`将成为一个）。`select input`

我将如何处理这个问题？我尝试为`tags`and创建一个控制器`categories`，每个控制器只有一个`index`动作。因为`'tags#index'`我有：

```
@entries = Entry.order('created_at desc').tagged_with(params[:format]).paginate(:page => params[:page], :per_page => 10) 
```

对于每个`tag`的链接，我都有：

```
= link_to tag, tag_path(tag) 
```

出于某种原因，`tag`被传递为`:format`，这就是我得到 的原因`tagged_with(params[:format])`。

我`'categories#index'`定义为：

```
@entries = Entry.order('created_at desc').where(:category => params[:format]).paginate(:page => params[:page], :per_page => 10) 
```

的`category`链接是：

```
 - entry.tag_list.each do |tag|
    = link_to tag, tag_path(tag) 
```

由于`tags`and`category`被传递为`:format`URL 的显示为`'root.com/tag.selected-tag'`and `'root.com/category.selected-category'`。

我将如何处理`tags`并`categories`正确实现使 URL 显示为`'root.com/tag/selected-tag'`and `'root.com/category/selected-category'`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T21:32:41.100

下面可能会做你想要的：

在您的路线中： `match 'tag/:tag' => 'tags#index', :as => :tag`

然后，当有人访问时`example.com/tag/some-tag-here`，您可以通过以下方式访问控制器中的标签： `params[:tag]`

您可以通过以下方式链接到您的路线：

`link_to tag, tag_path(:tag => tag)`

类似的解决方案也应该适用于类别。

# c++ - * 运算符重载中的操作数顺序

> ID：11704729
> 
> 赞同：7
> 
> 时间：2012-07-28T21:18:26.063
> 
> 标签：c++, operator-overloading

我正在为我的游戏物理引擎编写一个 vec3 类。

我做了一个运算符重载，允许我将一个向量乘以一个标量（以缩放向量）：

```
const vec3 operator*( const real n ) const
{
    return vec3(
        m_x * n,
        m_y * n,
        m_z * n
    );
} 
```

*如果*我在计算中使用正确的顺序，这可以正常工作：

```
float rImpulse;
vec3 vContactNormal;
...
vec3 vImpulse = vContactNormal * rImpulse; 
```

如果我改变乘法的顺序（例如，如果我在计算中将标量放在首位），那么编译器不喜欢这样并将其突出显示为错误。

我可以更新我的 vec3 类，这样乘法的顺序就无关紧要了吗？如何？（看到答案我估计要拍脑门了！）

**更新**

我已经从 vec3 类中删除了我原来的运算符重载，并将以下两个运算符重载放在 vec3 类之外：

```
const vec3 operator*( const vec3 & v, const real r )
{
    return vec3( 
        v.x() * r, 
        v.y() * r, 
        v.z() * r 
    );
}
const vec3 operator*( const real n, const vec3 & v )
{
    return v * n;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T21:19:36.903

您需要在类外（或在类内，作为 a `friend`）声明一个自由运算符：

```
const vec3 operator*( const real n, vec3 v )
{
    //no need to re-implement, since you already have v * n defined
    return v * n;
} 
```

原因是，当声明为类成员时，第一个运算符是隐式的`this`，所以你基本上已经定义了`vec3 * real`.

# mysql - 无法重新导入批处理脚本生成的 .sql 文件

> ID：11704730
> 
> 赞同：0
> 
> 时间：2012-07-28T21:19:25.487
> 
> 标签：mysql, mysqldump, batch-file, windows-scripting, mysql-backup

我正在使用以下[批处理脚本](http://www.jonnyreeves.co.uk/2011/mysql-dump-backup-batch-script-for-windows/)。

当我从命令行**手动**使用 mysqldump 命令时，它会生成一个大小相同的**.sql文件。**

 **但是，当我尝试使用以下方法将此 .sql 加载到数据库时：

```
mysql -u root -p db < file.sql 
```

它不加载任何东西，不创建数据库表/文件。脚本中有错误吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:50:05.943

**对于处于相同情况的任何人，这就是我所做的并且有效：**

我**换**了行：

```
set mysql_path="......\bin" 
```

经过：

```
set mysql_path="......\bin\mysqldump" 
```

和行：

```
%mysql_path%\mysqldump.exe --user %mysql_username% --password=%mysql_password% 
--all-databases --opt > "%output_path%\%date%_%time%.sql" 
```

经过：

```
%mysql_path% -u %mysql_username% -p%mysql_password% %dbname% >
%output_path%\%date_time%.sql 
```

现在它正在工作。
我真的不知道为什么使用以前的方法不起作用，**如果您知道为什么，请随时发表评论，以便我们都能理解。****

# c# - 如何在 C# 中播放在线资源中的 .mp3 文件？

> ID：11704731
> 
> 赞同：1
> 
> 时间：2012-07-28T21:19:29.303
> 
> 标签：c#, winforms, mp3

[我的问题与这个问题](https://stackoverflow.com/questions/7556672/mp3-play-from-stream-on-c-sharp)非常相似

> 我有音乐网址。网址如[http://site.com/audio.mp3](http://site.com/audio.mp3)。我想在线播放这个文件，比如 youtube。你知道一个类或代码可以做到这一点吗？

**如何在线播放 mp3 而无需全部下载来播放？**

*播放文件缓存将被创建，但至少立即播放文件*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T21:44:42.240

我找到了 NAudio 库 [http://naudio.codeplex.com/的解决方案](http://naudio.codeplex.com/)

**解决方案**

```
public static void PlayMp3FromUrl(string url)
{
    using (Stream ms = new MemoryStream())
    {
        using (Stream stream = WebRequest.Create(url)
            .GetResponse().GetResponseStream())
        {
            byte[] buffer = new byte[32768];
            int read;
            while ((read = stream.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, read);
            }
        }

        ms.Position = 0;
        using (WaveStream blockAlignedStream =
            new BlockAlignReductionStream(
                WaveFormatConversionStream.CreatePcmStream(
                    new Mp3FileReader(ms))))
        {
            using (WaveOut waveOut = new WaveOut(WaveCallbackInfo.FunctionCallback()))
            {
                waveOut.Init(blockAlignedStream);
                waveOut.Play();                        
                while (waveOut.PlaybackState == PlaybackState.Playing )                        
                {
                    System.Threading.Thread.Sleep(100);
                }
            }
        }
    }
}` 
```

*我在这里找到了答案 [使用 C# 从流中播放音频](https://stackoverflow.com/questions/184683/play-audio-from-a-stream-using-c-sharp)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:34:44.283

许多像 IrKlang 这样的库都提供流音频支持，如果你正在寻找最小的开发工作，我建议你看看它！

[http://www.ambiera.com/irrklang/](http://www.ambiera.com/irrklang/)

# libgdx - LIBGDX：我如何判断声音何时播放完毕？

> ID：11704733
> 
> 赞同：18
> 
> 时间：2012-07-28T21:19:34.757
> 
> 标签：libgdx

Sound API 似乎缺少一个指示声音已播放完毕的函数。有没有其他方法可以确定声音是否完成？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T21:54:21.690

据我所知，OpenAL 和 Android 的底层声音后端甚至不会在内部跟踪信息，尽管音乐 API 根据文档具有 isPlaying() 函数和 getPosition() 函数，但并非没有向 libgdx 提交[补丁](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/audio/Music.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T12:35:58.370

只需设置这个

```
sound.setLooping(false); 
```

这样它就不会一次又一次地运行。

并检查声音是否正在播放。

做一个布尔变量

```
boolean soundplaying; 
```

在渲染方法中这样做

```
if(sound.isPlaying()){
soundplaying =true
} 
```

并做一个日志

```
gdx.app.log("","sound"+soundplaying); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-02-22T17:58:13.397

您可以通过存储例如`play()`并`loop()`返回的声音实例 ID 来跟踪这一点。示例代码：

```
private Sound sound;
private Long soundId;

...

public void startSound()  {
    if (soundId != null) {
        return;
    }
    soundId = sound.loop();   // or sound.play()
}

public void stopSound() {
    sound.stop(soundId);
    soundId = null;
} 
```

如果您不想`stopSound()`从客户端代码调用，您可以只调用它`startSound()`而不是`return`, 以确保停止任何先前的声音。

# sql - 使用导入包在 Sql Server 中导入日期值

> ID：11704737
> 
> 赞同：1
> 
> 时间：2012-07-28T21:20:11.350
> 
> 标签：sql, sql-server, excel, visual-studio-2008

我在使用 Sql Server 中的 Visual Studio 导入数据时遇到了一个烦人的问题。我使用 Visual Studio 创建了一个 SSIS 导入包来导入 Excel 文件 (.xlsx)。我导入的工作表有一列填充了 datetype 值。有些值是左对齐的，有些是右对齐的。如果我将整个列格式化为日期类型，我仍然会在该列上得到两种不同类型的对齐方式：例如 4/1/2011 是右对齐，13/01/2011 是左对齐。我为该列导入带有 nvarchar 的文件，我得到左对齐值的 NULL 值。如果我为该列导入具有 datetime 数据类型的文件，我会得到右对齐的 NULL 值。

我不在乎我的 Sql 数据库中的信息是如何“登陆”的，无论是 nvarchar 还是 datetime，但我需要完整的信息，没有 NULLS。这似乎主要是一个 Excel 问题，因为 Excel 不会将这些值视为相同的数据类型，因此存在不同类型的对齐。请问有什么建议吗？感谢任何建议/建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:36:21.083

我认为你在这里有两个问题。一，右对齐的值被解释为日期，但它们是错误的，因为 Excel 认为它们是 m/d/yyyy 而你想要 d/m/yyyy。二，左对齐的值被解释为文本。

不幸的是，当数据已经存在时对列应用格式不会改变底层存储。由于 Excel 已经将数据弄乱了，您需要自己解析出正确的值。

上述每个问题都需要不同的解决方案。这是一个视觉效果，显示了我如何分解问题和相应的修复：

![在此处输入图像描述](../Images/2eaa80a97845a2c5e150204c6d98bf91.png)

首先注意中提到的日期格式`columns A, D, E, F`。这解释了为什么 2011 年 4 月 1 日的“固定”版本看起来与源代码相同。事实上，固定版本是 1 月 4 日，而源是 4 月 1 日。

这是流程和公式：

B 列和 C 列是助手。他们希望简化`column D`. 这里的错误无关紧要；它们将在最后一步被忽略：

```
B3: =FIND("/",A3)
C3: =FIND("/",A3,B3+1) 
```

D 列通过解析数字在斜线中的位置并建立日期值来处理解释为文本的数据。您不需要这个，但为了清楚起见，我将其展示出来：

```
D3: =DATE(RIGHT(A3,4),MID(A3,B3+1,C3-B3-1),LEFT(A3,B3-1)) 
```

E 列处理解释为日期但 d 和 m 颠倒的数据。同样，不需要，但为了清楚起见：

```
E3: =DATE(YEAR(A3),DAY(A3),MONTH(A3)) 
```

F 列将 D 和 E 与 an 结合在一起`IF`以应用适当的修复：

```
F3: =IF(ISERROR(VALUE(A3)),DATE(RIGHT(A3,4),MID(A3,B3+1,C3-B3-1),LEFT(A3,B3-1)),DATE(YEAR(A3),DAY(A3),MONTH(A3))) 
```

# android - XML 解析（将数据从 XML 移动到列表中）

> ID：11704740
> 
> 赞同：0
> 
> 时间：2012-07-28T21:20:42.227
> 
> 标签：android, xml

我正在构建一个包含列表的应用程序，列表中的每个项目都有一些值（名称、描述和日期）。我制作了一个 XML 文件，其中包含列表中任何项目的结构。
我还有另一个 XML 文件，其中包含列表中的项目（每个`<item>`标签都有`<name>`和`<desc>`子项`<date>`）
问题是我不知道如何将所有内容放在正确的位置。我在网上搜索过它，我发现它叫XML Parsing，但是我找到的唯一教程就是[这个](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)，但是它写的不清楚所以我没有理解它..
有人可以解释一下或者给我一个很好的教程吗？

**编辑：**
[*这是*](http://pastebin.com/HSp4sS15)结构 XML 文件
[*这是*](http://pastebin.com/GKDu9xdm)内容 XML 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T12:21:31.093

您设置为 a 的数据`string-array`未正确构建为显示在`ListView`. 它应该是这样的：

```
 <string-array name="exams">
        <item>@array/exam1</item>
        <item>@array/exam2</item>
        <item>@array/exam3</item>
        <item>@array/exam4</item>
    </string-array>
    <string-array name="exam1">
        <item>One</item>
        <item>11111111One</item>
        <item>25/7/12</item>
    </string-array>
    <string-array name="exam2">
        <item>Two</item>
        <item>2222222222Two</item>
        <item>28/7/12</item>
    </string-array>
    <string-array name="exam3">
        <item>Three</item>
        <item>333333333333Three</item>
        <item>29/1/10</item>
    </string-array>
    <string-array name="exam4">
        <item>Four</item>
        <item>444444444Four</item>
        <item>21/2/11</item>
    </string-array> 
```

要在适合`ListView`您编写的数据结构中解析它（部分代码来自此答案：[Android Resource - Array of Arrays](https://stackoverflow.com/questions/4326037/android-resource-array-of-arrays)）：

```
 Resources res = getResources();
        ArrayList<Exam> extractedData = new ArrayList<Exam>();
        TypedArray ta = res.obtainTypedArray(R.array.exams);
        int n = ta.length();
        for (int i = 0; i < n; ++i) {
            int id = ta.getResourceId(i, 0);
            if (id > 0) {
                extractedData.add(new Exam(res.getStringArray(id)));
            } else {
                // something wrong with the XML, don't add anything
            }
        }
        ta.recycle(); 
```

该类`Exam`是一个简单的数据持有者类：

```
public class Exam {
    String name, desc, date;

    public Exam(String[] dataArray) {
        this.name = dataArray[0];
        this.desc = dataArray[1];
        this.date = dataArray[2];
    }
} 
```

然后，您将`extractedData` `ArrayList`在自定义适配器中使用您的行布局：

```
public class CustomAdapter extends ArrayAdapter<Exam> {

    private LayoutInflater mInflater;

    public CustomAdapter(Context context, int textViewResourceId,
            List<Exam> objects) {
        super(context, textViewResourceId, objects);
        mInflater = LayoutInflater.from(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = mInflater.inflate(
                    R.layout.your_layout_file, parent, false);
        }
        Exam e = getItem(position);
        ((TextView) convertView.findViewById(R.id.name)).setText(e.name);
        ((TextView) convertView.findViewById(R.id.desc)).setText(e.desc);
        ((TextView) convertView.findViewById(R.id.date)).setText(e.date);
        return convertView;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:28:25.540

我最近通过遵循本教程学习了如何在 android 中解析 XML

[http://developer.android.com/training/basics/network-ops/xml.html](http://developer.android.com/training/basics/network-ops/xml.html)

希望能帮助到你 ：）

# mysql - 如何从 mysql 数据库中获取数据并在 UITableView 中显示

> ID：11704744
> 
> 赞同：0
> 
> 时间：2012-07-28T21:21:17.920
> 
> 标签：mysql, xcode, uitableview, login

我想制作一个人们必须登录的应用程序，当他们登录时，他们可以从 MYSQL 数据库中获取自己的个人数据，并将该数据显示到 UITableView 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T19:42:44.173

```
 @implementation FromDataBase

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        //Load Password and Username
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; 
        LoadUsername = [defaults objectForKey:@"TheUsername"];

        NSUserDefaults *pass = [NSUserDefaults standardUserDefaults]; 
        LoadPassword = [pass objectForKey:@"ThePassword"];

        //Gets the php
        FindURL = [NSString stringWithFormat:@"http://localhost/FromDB/DB.php?username=%@",LoadUsername];
        // to execute php code
        URLData = [NSData dataWithContentsOfURL:[NSURL URLWithString:FindURL]];

        // to receive the returend value
        DataResult = [[NSString alloc] initWithData:URLData encoding:NSUTF8StringEncoding];

        FriendsArray = [DataResult componentsSeparatedByString:@"///"];

        NSLog(@"%@", FriendsArray);

        SearchFriends = [[NSMutableArray alloc] initWithArray:FriendsArray];

    }

    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
        return 1;
    }
    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
        return [SearchFriends count];
    }
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
        if (!cell) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
        }
        cell.textLabel.text = [SearchFriends objectAtIndex:indexPath.row];
        return cell;
    }

    - (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

        TheSellected = [SearchFriends objectAtIndex:indexPath.row]; 

        UIAlertView *alert = [[UIAlertView alloc] 
                              initWithTitle:TheSellected
                              message:@"" 
                              delegate:self 
                              cancelButtonTitle:@"OK" 
                              otherButtonTitles:nil, nil];
        [alert show];
        return;

    }
@end 
```

现在是 PHP：

```
<?php
if (isset ($_GET["username"]))
        $username = $_GET["username"];
            else{
        $username = "";
            }

//DateBase Infomation
$DB_HostName = "localhost";
$DB_Name = "Users";
$DB_User = "root";
$DB_Pass = "";
$DB_Table = Friends;

//Connecting To Database
$con = mysql_connect($DB_HostName,$DB_User,$DB_Pass);
mysql_select_db($DB_Name,$con);

if(!$con)
{
        die('Connection Failed'.mysql_error());
}

$result = mysql_query("select * from $DB_Table ");

$numrows = mysql_num_rows($result);

if ($numrows!=0){

    while ($row = mysql_fetch_assoc ($result)){
        $Friends = $row['Friends'];
                echo "$Friends///";
    }

}else{
echo "FAILED :(";   
}
?> 
```

我希望这能帮到您 ：）

# asp.net - Global.asax 中的 ASP.NET 路由

> ID：11704745
> 
> 赞同：9
> 
> 时间：2012-07-28T21:21:29.023
> 
> 标签：asp.net, routing, webforms

我正在尝试按照以下方式在我的 Web 表单应用程序中添加路由：

[http://msdn.microsoft.com/en-us/library/cc668201.aspx#adding_routes_to_a_web_forms_application](http://msdn.microsoft.com/en-us/library/cc668201.aspx#adding_routes_to_a_web_forms_application)

我在 Global.asax 文件中添加了这样的路由：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.MapPageRoute("", "/WebsiteName/{combinedPin}", "~/Default.aspx");
} 
```

然后我尝试像这样在本地访问我的网站：

http://localhost:12345/WebsiteName/test36u

但是我收到一条找不到资源的消息，所以我认为我的路线不正确。任何人都可以看到我的代码有问题吗？

任何指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T21:43:03.753

您不需要将您的网站名称指定为路线的一部分，请尝试使用以下代码：

```
routes.MapPageRoute("", "{combinedPin}", "~/Default.aspx"); 
```

使用上面的代码，您的链接将如下所示：

```
http://localhost:12345/WebsiteName/test36u 
```

但是，如果您的意图是您的用户使用名为的段访问您的站点： `WebsiteName`然后使用：

```
routes.MapPageRoute("", "WebsiteName/{combinedPin}", "~/Default.aspx"); 
```

但是在前面的代码中，您的用户必须按如下方式访问您的资源：（虽然可能不是预期的结果）

```
http://localhost:12345/WebsiteName/WebsiteName/test36u 
```

# jquery - 使用动态大小的图像缩放 ImageMap 坐标

> ID：11704746
> 
> 赞同：4
> 
> 时间：2012-07-28T21:21:30.160
> 
> 标签：jquery, image, scale, imagemap, imagemapster

我正在寻找一种方法来使我的动态缩放图像适合我正在制作的图像映射。我正在使用 jquery 来缩放具有窗口大小的图像：

```
$(window).bind("load resize", function(){

        $(".post img").height($(window).height()-110);
        $(".post img").width(($(".post img").newHeight() / $(".post img").oldHeight()) * $(".post img").oldWidth());

}); 
```

但是我制作的 ImageMaps 保持原始大小。我正在寻找 ImageMapster，但无法弄清楚如何自动使所有图像映射缩放。

这是它的页面：http: [//www.dersuawesome.com/home/](http://www.dersuawesome.com/home/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T07:08:47.887

在你使用的**imagemapster**中： $('img').mapster('resize',width,height,duration);

来自原始 imagemapster 文档的引用：

> $('img').mapster('resize',width,height,duration); --- 图像：图像的新宽度或高度：图像的新高度持续时间：（可选）0 | 毫秒（为调整大小设置动画）这会将图像映射调整为指定的尺寸。请注意，应传递宽度>或高度，另一个将以与原始图像相同的纵横比进行计算。如果两者都通过，则仅使用宽度来计算新尺寸：比例必须与原始图像保持相同。

引用结束。例如。当图像应变为 900 像素宽时，您可以使用：

```
$('img').mapster('resize',900,null,2000); 
```

在这里，我告诉 imagemapster 使用 2000 毫秒来调整大小以获得平滑的效果。将其放入代码的 onconfigured-section 对我来说效果很好：

```
onConfigured: function(){
         $('img').mapster('resize',900,null,2000);
        } , 
```

# c++ - C++：构造函数歧义

> ID：11704749
> 
> 赞同：0
> 
> 时间：2012-07-28T21:22:02.640
> 
> 标签：c++, constructor, ambiguity, ambiguous

这会引起歧义吗？：

```
class A { ... };
class B : public A {
//...
B(const B& b);
B(const A& a);
//...
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T21:38:24.210

**更新：**提问者似乎已经从问题中删除了类名。这是编写此答案的原始代码：

```
class Vector2D { ... };
class Vector3D : public Vector2D {
//...
Vector3D(const Vector2D& b);
Vector3D(const Vector3D& a);
//...
}; 
```

我之前说“不”，但我改变了主意。这是模棱两可的，我想不出一个很好的理由来`Vector3D`继承 from `Vector2D`。

从数学的角度来看，2D 向量空间可以扩展到 3D 向量空间，但是有许多扩展可供选择——它们不是唯一的。因此，当您创建一个从 2D 向量类继承的 3D 向量类时，您将 3D 空间中的 2D 空间的一个嵌入设为“特权”，而所有其他嵌入则处于劣势。我不认为这特别有用。

您正在做的另一件事是您说“每个 3D 向量都是 2D 向量”，这有点愚蠢。例如，也许你写了一个函数：

```
// Compute the angle between two vectors
double angle(Vector2D x, Vector2D y); 
```

假设您*忘记*编写 3D 矢量的版本。现在，编译器将无法给您错误消息：相反，您的 3D 矢量将使用您在创建类时选择的“特权”投影投影到 2D 空间，您将得到错误的答案。现在假设您添加另一个函数：

```
// Compute the angle between two 3D vectors
double angle(Vector3D x, Vector3D y); 
```

现在，还是有问题。

```
Vector3D x = ...;
Vector2D y = ...;
double a = angle(x, y); 
```

这将使用 x 的 2D 投影，同样，您不会收到编译器警告。你只会得到错误的答案。

**总结：**这是最糟糕的歧义：编译器会给你意想不到的答案。

Vector3D 不应继承自 Vector2D。这在数学上是不合逻辑的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T23:00:42.777

在引用基类和派生类型的重载构造函数之间进行选择时，通常没有歧义。

如果参数是派生自基类型 ( `A`) 但不是派生类型 ( `B`) 或派生自派生类型的类型，则显然只有引用基的构造函数是匹配的。

如果参数是派生类型，则调用采用基类的构造函数所需的转换需要派生到基类型，此时调用引用派生类型的构造函数只需要标识转换，因此后者是更好的匹配。

如果参数是派生自派生类型 ( `B`) 的类，那么采用派生类型 () 的构造函数`B`仍然是更好的匹配，因为标准规定绑定到派生类型的引用比绑定到该类型的基础。（ISO/IEC 14882:2011 13.3.3.2 / 4 - 对隐式转换序列进行排序 [over.ics.rank]）

显然，如果你足够努力，你仍然会产生歧义。

例如

```
struct S {
    operator A() const;
    operator B() const;
};

S s;
B b(s); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T21:31:39.553

运算符`&`生成引用。

在您的情况下，第一种类型是对 Vector3D 类型的引用，另一种是对 Vector2D 类型的引用，因此它们是不同的类型。

由于它们是不同的类型，它们会使您的构造函数的签名不同，并且它们不会产生歧义。

答案是不。

# multithreading - 并发和线程书籍

> ID：11704750
> 
> 赞同：3
> 
> 时间：2012-07-28T21:22:03.680
> 
> 标签：multithreading, concurrency

对于非特定语言的线程和并发编程书籍有什么建议吗？涵盖不同类型互斥体、等待条件、信号量及其与线程应用程序连接的概念的书籍。

如果您有一本特定于语言的书，我希望它不涉及托管或脚本语言，例如 Java、C#、Python 等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T21:34:42.843

查看[*The Little Book of Semaphores*](http://greenteapress.com/semaphores/)，这是一本“介绍并发编程同步原理的免费（在两个意义上的）教科书”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:31:25.310

在特定操作系统的上下文中学习并发性怎么样？我在 MINIX 操作系统的架构课上学习了多线程等。MINIX 的好处在于它对学生来说很容易理解。这本书是《The MINIX Book》，去图吧。

# c# - 如何锯齿状列表 C#

> ID：11704752
> 
> 赞同：-1
> 
> 时间：2012-07-28T21:22:05.240
> 
> 标签：c#

我正在尝试创建一个锯齿状数组，但由于我正在使用的数据的动态性，我不想浪费资源来创建一个大型锯齿状数组。

我目前正在做：

```
int[][][] data = new data[Int16.MaxValue][][]; 
```

我不知道数据集有多大，或者有没有比通过列表更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T21:25:46.250

是的，你应该使用`List<T>`.

在这种情况下，您将使用`List<List<List<int>>>`.

你的数组：

`int[][][] data = new data[Int16.MaxValue][Int16.MaxValue][Int16.MaxValue];`

将占用 (2^16)^3 = 2^48 = 比您拥有的更多存储空间，更不用说该声明不是有效的 C#。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:26:46.717

如果您在初始化时不知道需要多少空间，那么最好使用动态调整大小的列表。

使用与此类似的变量：

```
List<List<List<int>>> data = new List<List<List<int>>>(); 
```

这个变量允许你添加`List<List<int>>`'s 到它，那些列表包含`List<int>`'s，当然也包含`int`'s

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T21:31:19.273

如果你绝对不想使用列表，你总是可以复制列表在幕后所做的：用少量元素创建你的数组，当你达到最大值时，创建一个是原始大小两倍的新数组，复制您现有的数组放入其中，并处理您的原始数组。继续这个模式，直到你完成。我建议改用 Lists，但如果出于某种原因您不想使用 Lists，那么您可以通过这种方式解决它。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-28T21:30:35.077

事实上，您可以创建锯齿状数组，而无需定义第二维和更多维。

```
int[][][] jagged = new int[256][][]; 
```

但在大型数据集上，使用流数据更有效——即`IEnumerable<T>`.

# java - 记录器中的 ZipException

> ID：11704753
> 
> 赞同：0
> 
> 时间：2012-07-28T21:22:10.020
> 
> 标签：java

我在 twitter 上运行一个爬虫，它捕获了一些异常 twitter 抛出

```
Logger.getLogger(TwitterCrawl.class.getName()).log(Level.SEVERE, null, ex1); 
```

但偶尔，每周一次或两次我得到这个例外

很难调试，因为它不会经常发生。

```
Exception in thread "main" java.lang.InternalError
    at sun.misc.URLClassPath$JarLoader.getResource(URLClassPath.java:752)
    at sun.misc.URLClassPath.getResource(URLClassPath.java:168)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:192)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at sun.misc.Launcher$ExtClassLoader.findClass(Launcher.java:229)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:300)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.util.ResourceBundle$RBClassLoader.loadClass(ResourceBundle.java:445)
    at java.util.ResourceBundle$Control.newBundle(ResourceBundle.java:2383)
    at java.util.ResourceBundle.loadBundle(ResourceBundle.java:1406)
    at java.util.ResourceBundle.findBundle(ResourceBundle.java:1365)
    at java.util.ResourceBundle.findBundle(ResourceBundle.java:1292)
    at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1234)
    at java.util.ResourceBundle.getBundle(ResourceBundle.java:715)
    at java.util.logging.Level.getLocalizedName(Level.java:223)
    at java.util.logging.SimpleFormatter.format(SimpleFormatter.java:64)
    at java.util.logging.StreamHandler.publish(StreamHandler.java:179)
    at java.util.logging.ConsoleHandler.publish(ConsoleHandler.java:88)
    at java.util.logging.Logger.log(Logger.java:458)
    at java.util.logging.Logger.doLog(Logger.java:480)
    at java.util.logging.Logger.log(Logger.java:569)
    at com.twittercrawl.TwitterUpdate.getResults(TwitterUpdate.java:153)
    at com.twittercrawl.TwitterUpdate.updateTweets(TwitterUpdate.java:83)
    at com.twittercrawl.TwitterUpdate.runUpdate(TwitterUpdate.java:64)
    at com.twittercrawl.TwitterCrawl.main(TwitterCrawl.java:73)
Caused by: java.util.zip.ZipException: error in opening zip file
    at java.util.zip.ZipFile.open(Native Method)
    at java.util.zip.ZipFile.<init>(ZipFile.java:114)
    at java.util.jar.JarFile.<init>(JarFile.java:133)
    at java.util.jar.JarFile.<init>(JarFile.java:70)
    at sun.misc.URLClassPath$JarLoader.getJarFile(URLClassPath.java:643)
    at sun.misc.URLClassPath$JarLoader.access$600(URLClassPath.java:538)
    at sun.misc.URLClassPath$JarLoader$1.run(URLClassPath.java:605)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.misc.URLClassPath$JarLoader.ensureOpen(URLClassPath.java:597)
    at sun.misc.URLClassPath$JarLoader.getResource(URLClassPath.java:750)
    ... 27 more 
```

# javascript - 如何在运行时添加的对象上执行 Jquery 插件

> ID：11704755
> 
> 赞同：1
> 
> 时间：2012-07-28T21:22:31.657
> 
> 标签：javascript, jquery, plugins, runtime, textarea

我有一个`JQuery`插件可以计算`textarea`. 但是，如果我在运行时添加了 textarea，`append("<textarea></textarea>")`例如，。

如何在附加的上执行这个插件`textarea`？

```
$("textarea").charCount({
                        allowed: 200,       
                        warning: 30,
                        counterText: 'Characters left: '    
                }); 
```

在运行时添加 textarea ..

```
$("#btnAddStep").click(function () {
                var text = "" +
                " <div class='row-fluid'>" +
                "   <div class='span10'>" +
                "      <input type='text' class='span12' placeholder='Type something…'>" +
                "  </div>" +
                " <div class='span2'>" +
                "    <div class='btn-group'>" +
                "        <button class='btn btn-mini' id='btnAddStep'><i class='icon icon-plus'></i></button>" +
                "        <button class='btn btn-mini'><i class='icon icon-minus'></i></button>" +
                "    </div>" +
                "  </div>" +
                " </div>" ;

                $("#response>#steps").append(text);
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:36:36.257

在用于将文本区域添加到 div 的按钮的单击事件处理程序中，添加对插件方法的调用。

由于我看不到整个代码，我将假设插件也在运行时自动调用，在 a`$(document).ready()`或类似的东西中。如果在调用后添加 textarea，则需要重新运行插件。

您所要做的就是将您发布的代码再次添加到您的点击事件代码中，但是为了提高效率，而不是在每个文本区域上重新运行插件，我建议您添加另一个选项来搜索 textareas使用特定的类，然后在对它们运行插件后删除该类。这样，您可以为所有新文本区域提供此类，并且在插件在它们上运行后，它将永远不会再查看它们。

祝你好运！

编辑：我的一个朋友正看着我，建议我澄清一下：你不必以任何方式修改你的插件（当然，我看不到完整的代码，所以我不能 100% 确定这一点，但是让我们说我有 95% 的把握）。您要做的是更改事件处理程序（以及在 document.ready 中进行的任何调用 - 从技术上讲，它是一个事件处理程序），如下所示：

```
$("#buttonID").click(function() {
    ...your code...
    $("#placeToAddNewTextArea").append("<textarea class="newTA"></textarea>");
    $("textarea.newTA").charCount({ ......... });
    $("textarea.newTA").removeClass("newTA");
}); 
```

换句话说，您可以使用 CSS 作为标志，并在插件代码之外创建、使用和删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T03:08:01.807

查看 jQuery SuperLive。

根据作者的说法：

> jQuery SuperLive 是我最喜欢的新插件。Allen Mackley 和我创建了这个来解决大量的应用 JS 问题。无论页面上何时存在元素，我们都需要插件来工作，并且，如果曾经添加过属性，插件应该重新启用。
> 
> SuperLive 做到了这一切。
> 
> 这在 IE 中不起作用。即不支持突变事件。还需要 jQuery 1.7

演示视频：[http ://www.youtube.com/watch?v=mh5mGR2GyLY](http://www.youtube.com/watch?v=mh5mGR2GyLY)

下载：[http ://code.google.com/p/jquery-superlive/downloads/list](http://code.google.com/p/jquery-superlive/downloads/list)

# ssl - 谷歌网络字体和 SSL 错误

> ID：11704756
> 
> 赞同：19
> 
> 时间：2012-07-28T21:22:38.717
> 
> 标签：ssl, webfonts

我的网站与 Google webfonts 配合良好，直到用户点击网站的 SSL 部分。

那时，chrome 会抛出**部分编码错误**，而我的 cufon 菜单会丢失它的字距调整。

我在这个 css 中包含了我的 webfont：

```
@font-face {
src: local('Lusitana'), url(https://themes.googleusercontent.com/static/fonts/lusitana
/v1/tAIvAkRzqMJf8Y4fM1R7PXYhjbSpvc47ee6xR_80Hnw.woff) format('woff');
} 
```

我的 js 控制台然后给了我这个错误：

> [已阻止] [https://domain.com/ecommerce.php上的页面运行来自](https://domain.com/ecommerce.php)[http://fonts.googleapis.com/css?family=Lusitana:regular,700&subset=latin](http://fonts.googleapis.com/css?family=Lusitana:regular,700&subset=latin)的不安全内容 。

有什么想法可以让谷歌字体强制 SSL 吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-25T04:18:48.097

您是否尝试过在网址中替换`https://`为`//`？该请求应自动使用正确的协议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-16T13:48:18.350

在您的 HTML 页面（或模板）上找到这一行：

```
<link href='http://fonts.googleapis.com/css?family=Dosis:400,700' rel='stylesheet' type='text/css'> 
```

并将其更改为：

```
 <link href='//fonts.googleapis.com/css?family=Dosis:400,700' rel='stylesheet' type='text/css'> 
```

这个简单的更改将使您的浏览器以适用的模式（HTTP 与 HTTPS）调用 Google 字体页面。

享受！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T09:13:27.927

要加载将在非安全和 SSL 模式下工作的谷歌字体，请在页面标题中尝试以下操作 - （并删除您在 CSS 中调用 https:// 的内容）：

```
<script type="text/javascript">
  WebFontConfig = { google: { families: [ 'Droid+Serif::latin' ] } };
  (function() {
  var wf = document.createElement('script');
  wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
    '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
  wf.type = 'text/javascript';
  wf.async = 'true';
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(wf, s);
})();
</script> 
```

在我的示例中，我使用的是 Droid Serif 字体，因此请与您的交换。

[您可以在此处阅读有关此内容的更多信息。](https://developers.google.com/fonts/docs/webfont_loader)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-29T01:23:35.990

我也遇到了由 WordPress 中的主题引起的错误。它导致页面加载缓慢，开发控制台报告以下错误：

*混合内容：“https://xxxxxxx.co.uk/”页面通过 HTTPS 加载，但请求的样式表不安全“http://fonts.googleapis.com/css? 家庭=机器人+衬线%3A400%2C700%2C400italic%2C700italic&ver=5.4.1'。此请求已被阻止；内容必须通过 HTTPS 提供。*

罪魁祸首是名为“Fresh and Clean”的 Wordpress 主题。它继承了 2014 年编写的代码，其中包含“pre-SSL”编码实践

要解决此问题，只需在主题中的以下文件中进行更改：

**/wp-content/themes/wpex-freshandclean/functions/scripts.php**

在里面寻找任何出现`http://` 并将每一个更改为`https://`

# php - 表单字段和数据库表字段的名称相同吗？

> ID：11704761
> 
> 赞同：5
> 
> 时间：2012-07-28T21:23:21.210
> 
> 标签：php, mysql, html, database, forms

将 HTML 表单名称与表字段名称同名是否被认为是不好的做法？我正在构建一些动态 sql 插入查询，目前我正在使用一些正则表达式将名称更改为相关数据库字段，因为我觉得否则可能不安全，您有什么意见？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T21:27:36.987

我写了一个函数来`INSERT`为我做查询，这取决于这个事实。它采用`$_POST`变量名称并将`INSERT`它们放入相应的列中。

正如对 OP 的评论中所说，这没关系，并且在大多数情况下，可以节省您回过头来记住您是否使用过`first_name,` `firstname,`或`first.`

另外，请记住，您的用户永远不会看到数据库列名，他们只会在查看源代码时看到表单名称。因此，没有太多可担心的！

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:27:29.073

我认为这可以帮助你减少你需要做的编码。尽管它看起来像一个漏洞，但最重要的是检查来自用户的值是否存在恶意数据。我不认为这可能是有害的，因为知道您正在使用哪些数据库字段并没有给黑客带来太多帮助。他们仍然需要侵入数据库服务器才能访问您的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T21:28:21.967

这些名称应该足以让您阅读，但“不可预测”（缺少更好的术语）足以让攻击者无法猜测私有部分。

表单名称并不重要，但密码字段的好名称是`the_users_password`or `passphrase_for_account`。

# android - 带有复选框的 Android 弹出窗口

> ID：11704765
> 
> 赞同：0
> 
> 时间：2012-07-28T21:24:28.573
> 
> 标签：android, checkbox, popupwindow

在我的应用程序中，我希望有一些与 Android 内置弹出菜单非常相似的内容（请参见下面的链接），但它还需要包含复选框和图像，并且我应该能够在关闭之前选择多个复选框（使用打开的相同按钮它）。[是否可以使用android 弹出菜单](http://developer.android.com/guide/topics/ui/menus.html#PopupMenu)来做到这一点？有没有更好的办法？有没有办法在 android 2.1（这是我的演示设备上的版本）上做到这一点？

谢谢你的时间，里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:50:48.273

您可以在 Android 3+ 中使用溢出菜单。但是有一种方法可以通过使用[ActionBar Sherlock](http://actionbarsherlock.com/)在较低的 API 中使用它。请参阅 ABS 的演示应用程序。也有它的示范。它应该看起来像[这样](https://a248.e.akamai.net/camo.github.com/e1d9b5eeab84fc2b15a6e101afba2a0f3f317301/687474703a2f2f692e696d6775722e636f6d2f79733651452e706e67.)。

# javascript - Hidden Div 中的 NicEdit 被调整为小

> ID：11704769
> 
> 赞同：6
> 
> 时间：2012-07-28T21:25:37.683
> 
> 标签：javascript, jquery, html, nicedit

我正在尝试将 NicEdit 编辑器用于隐藏在 div 中的文本区域。当用户单击一个按钮时，目标文本区域的父 div 就会显示出来。textarea 的宽度设置为父 div 的 100%。问题是父 div 是隐藏的，因此在显示父 div 之前 textrea 没有宽度。如果我尝试在显示其父 div 的同时附加 NicEdit 编辑器，则编辑器看起来很小。

```
<script type="text/javascript">

function add_task_editor() {
        new nicEditor({buttonList : ['fontSize','bold','italic','underline','strikeThrough','subscript','superscript','ul','link']}).panelInstance('task_description');
    };

$('#trigger_it').click(function (e) {
 $('#parent_div').show();
 add_task_editor();

});
</script>
<div id="parent_div" style="display: none;">
<textarea id="task_description"></textarea>
</div> 
```

有没有办法解决这个问题，以便在加载后编辑器的宽度设置为父 div 的 100%？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T06:59:48.537

就我而言，这适用于 jquery：

```
new nicEditor().panelInstance('myArea');

$('.nicEdit-panelContain').parent().width('100%');
$('.nicEdit-panelContain').parent().next().width('100%'); 
```

或绝对宽度：

```
$('.nicEdit-panelContain').parent().width('400px');
$('.nicEdit-panelContain').parent().next().width('400px'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T01:43:50.020

@Hans 的答案与我一起工作......但我还需要添加它来调整包含正在编辑的文本的 div 的大小（当不使用下面的行时，只有该 div 周围的容器被调整大小）：

```
$('.nicEdit-main').width('100%'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-27T21:03:44.517

```
$('.nicEdit-panelContain').parent().width('100%');
$('.nicEdit-panelContain').parent().next()
    .width($('.nicEdit-panelContain').parent().width()-2); 
```

如果 textarea 的父级具有道具“padding-left”或“padding-right”，则将“-2”添加到“width”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-13T15:13:47.840

这对我最有效：

```
new nicEditor().panelInstance('nic-me');
$('.nicEdit-panelContain').parent().width('100%');
$('.nicEdit-panelContain').parent().next().width('98%');
$('.nicEdit-main').width('100%'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-28T22:01:55.273

当然，基本上在编辑器创建之后，检查它以找到它的 ID 或它具有的类，`$('#editorsID').width('100%');`例如设置它的宽度。

或者也许找到它的父 div 的宽度（以像素为单位）并将其设置为该值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-11T23:51:16.483

在面板上尝试了多种调整大小之后..这对我有用..

```
bkLib.onDomLoaded(function() {
    new nicEditor().panelInstance('textarea_id');
    document.querySelector('div[unselectable="on"]').setAttribute('style', '');
}); 
```

基本上只是删除 nicEdit 脚本在加载时设置的默认宽度，它应该自动调整面板宽度..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-06T07:27:58.383

对于那些有同样问题的人，我对其进行了优化，它看起来完全正常：

```
$(document).ready(function(){
    bkLib.onDomLoaded(function() {
        new nicEditor({fullPanel : true}).panelInstance('myArea');
        $('.nicEdit-panelContain').parent().css({width:'100%', padding:"0"});
        $('.nicEdit-panelContain').parent().next().css({width:'100%', padding:"5px"});
        $('.nicEdit-main').css({width:'100%', padding:"0", minHeight:"80px"});
    });
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-14T16:57:41.703

这解决了我的情况！谢谢

```
$(document).ready(function(){
        bkLib.onDomLoaded(function() {
        new nicEditor({fullPanel : true, maxHeight:100}).panelInstance('myArea');
        $('.nicEdit-panelContain').parent().width('100%');
        $('.nicEdit-panelContain').parent().next().width('98%');
        $('.nicEdit-main').width('100%');
        });
    }); 
```

# android - 如何获取 Android AdMob 广告的 testDevice ID

> ID：11704785
> 
> 赞同：2
> 
> 时间：2012-07-28T21:28:16.740
> 
> 标签：android, android-layout, admob

> **可能重复：**
> [如何获取 Admob 的设备 ID](https://stackoverflow.com/questions/4524752/how-can-i-get-device-id-for-admob)

我的活动有一个 ListView，我在底部放了一个广告。当我在模拟器上运行应用程序时，我看到了测试广告。当我在手机上运行时，我会收到一个实际的广告。我想在我的手机上测试而不是得到真正的广告。

我按照 AdMob 网站上的说明在 logcat 中查找说明如何手动将设备 ID 添加到 AdRequest 的消息。问题是这条消息永远不会出现在 logcat 中。这是运行 4.1 的 RAZR。[在Aracem 回答](https://stackoverflow.com/questions/9681400/android-get-device-id-for-admob)的 SO 帖子中，我读到编码字符串在开发人员选项首选项面板中可用，我找到了它。当我阅读[此命令的指南](https://developers.google.com/mobile-ads-sdk/docs/admob/intermediate#addtestdevice)时，设备 ID 的格式是字母数字（例如“E83D20734F72FB3108F104ABC0FFC738”），但我手机中的值包含字母、数字和破折号（例如“MQKF-RB61-BBKS-E”）。

我已将编码的设备 ID 添加到 XML **googleads:testDevices 中**，并且我还手动将 AdRequest 添加到我的 onCreate 中，并将 addTestDevice 与此字符串一起使用。都不工作。

我注意到的一件事是有效的命名空间是*googleads*，而不是示例中所示的*广告。*当我使用*ads*时，我在 XML 中得到前缀错误。我猜随着从 4.x 到 6.1 的切换，命名空间发生了变化。

我可以通过最小的项目实现这一点，其中 onCreate 只调用 super 和 setContentView。

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mainLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<ListView
    android:id="@+id/list"
    android:layout_above="@+id/adView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
<com.google.ads.AdView
    xmlns:googleads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@id/adView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    googleads:adSize="BANNER"
    googleads:adUnitId="@string/admob_id"
    googleads:loadAdOnCreate="true"
    googleads:testDevices="TEST_EMULATOR, MQKF-RB61-BBKS-E" /> 
```

显现

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="16" />
<application android:label="@string/app_name" >
    <activity
        android:name="mainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />
</application> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T01:11:46.673

在 Logcat 中，您将找到设备 ID。你会看到类似的东西

要在此设备上获取测试广告，请调用 adRequest.addTestDevice(" *** *")

# iphone - 除非点击两次按钮，否则 iOS 网页不会加载

> ID：11704793
> 
> 赞同：1
> 
> 时间：2012-07-28T21:29:12.023
> 
> 标签：iphone, html, ios, uiwebview, nsstring

```
- (IBAction)saveButton:(id)sender
{
    NSURL *yourURL = [NSURL URLWithString: webpageURLLabel.text ];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:yourURL];
    if ([self checkURL] == YES) {
        [webpagePreview loadRequest:request];
        webpagePreview.scalesPageToFit = YES;
    }
}

- (BOOL)checkURL
{
    NSString *arrayOfStrings = [NSArray arrayWithObjects:@"http://", @"https://", nil];
    NSString *stringToSearchWithin = webpageURLLabel.text;

    BOOL found=NO;
    for (NSString *s in arrayOfStrings)
    {
        if ([stringToSearchWithin rangeOfString:s].location != NSNotFound)
        {
            found = YES;
            break;
        } else
        {
            webpageURLLabel.text = [NSString stringWithFormat:@"http://%@", webpageURLLabel.text];
            found = YES;
            break;
        }
    }
    return found;
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    webpageTitleLabel.text = [webpagePreview stringByEvaluatingJavaScriptFromString:@"document.title"];
} 
```

我调试了它，看起来它应该加载。但是由于某种原因，当您第一次点击按钮时，什么也没有发生。

如果用户再次点击该按钮，它就可以正常工作。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:35:54.213

在我看来，第一次单击按钮时`webpageURLLabel.text`可能没有有效的 URL，因此请求无效。然后当`[self checkURL]`被调用时，`webpageURLLabel.text`被设置为一个有效的 URL，所以下一次点击有效。

也许您应该`-checkURL`在创建`NSURLRequest`?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:48:19.450

中也存在问题`checkURL`。请注意，它总是返回 YES。for 循环内部的逻辑简化为：

```
if (some condition) {
    found = YES;
    break;
} else {
    // Fix webpageURLLabel.text
    found = YES;
    break;
} 
```

但是，请考虑如果您有一个以 . 开头的有效条目会发生什么`@"https://"`。第一次通过循环时，if 条件失败，因此`@"http://"`被添加到 URL 的前面并返回。于是`@"https://valid.com"`变成`@"http://https://valid.com"`. 您需要将所有内容都移到`else`for 循环之外，并且只有在 found 不正确时才这样做。

# matlab - MATLAB - 矢量脚本

> ID：11704795
> 
> 赞同：0
> 
> 时间：2012-07-28T21:29:35.383
> 
> 标签：matlab, vector

我最近开始学习 MatLab，今天写了以下脚本作为我练习的一部分，看看我们如何生成向量：

```
x = [];
n = 4;
for i = i:n
    x = [x,i^2];
end
x 
```

当我运行这个脚本时，我得到了我所期望的，即以下向量：

```
x = 0 1 4 9 16 
```

但是，如果我之后第二次运行该脚本，我只会得到以下输出：

```
x = 16 
```

这是什么原因？为什么我第二次运行脚本时只得到最后一个向量条目作为输出，而不是整个向量？如果有人可以向我解释这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T23:32:56.517

从一个新的工作区开始，`i`将只是[复数](http://www.mathworks.com/help/techdoc/ref/i.html) `1i`（如`x^2=-1`）。我想你在第一次运行时收到了这个警告：

```
Warning: Colon operands must be real scalars. 
```

所以 for 语句基本上循环了`for i = real(1i):4`。请注意`real(1i)=0`.

当您再次使用已经初始化的变量重新运行脚本时（假设您没有`clear`工作区），`i`将引用一个包含 的最后一个值的变量`4`，隐藏`i`具有相同名称的内置函数，并执行 for 循环：

```
x=[];
for i=4:4
    x = [x, i^2]
end 
```

它只迭代一次，因此你最终得到`x=16`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T21:38:08.030

你忘了初始化`i`。
第一次执行后`i`是 4 并且仍然是 4。
然后你初始化`x`为一个空向量但是因为`i`是 4 循环只运行一次。

清除您的工作区并在首次执行之前和之后对其进行检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T22:07:56.383

这可能是一个简单的错字吗？

> 对于 i = i:n

实际上应该意味着

```
for i = 1:n 
```

因为 i 在第一次运行时（可能）未初始化，因此为 0，所以它工作得很好。第二次，i 仍然是 n (=4)，并且只运行一次。

此外，作为性能提示：在循环的每次迭代中，您都会增加向量的大小，更有效（和更多 matlaboid）的方法是首先使用基值创建向量，例如使用

```
x = 1:n 
```

然后将每个值平方

```
x = x^2 
```

在 Matlab 中，应该优先使用向量运算（或更高维度的矩阵运算）而不是迭代循环方法，因为它使 matlab 有机会进行优化操作。这种方式通常也更具可读性。

# c# - 使用控制/项目标签来存储引用？

> ID：11704796
> 
> 赞同：0
> 
> 时间：2012-07-28T21:29:55.433
> 
> 标签：c#

我只是注意到基本上每个控件和控件上的项目都有一个标签属性，所以我正在考虑为它们分配一些引用（对其他对象），我稍后会在用户选择其中一个项目时检索并使用它们控制。

使用这样的标签有什么问题吗？我不想开始滥用标签，如果它们不是被设计成那样使用的话。

例如，我在文件条目列表中收集了一个文件列表。每个条目都包含诸如文件大小和文件类型之类的信息。

显示文件名列表的 ListView 不包含对我需要从中检索数据的实际条目的引用。

所以我只会为标签中的正确条目分配一个引用。

还有其他方法可以做到这一点吗？或者我应该只使用标签并记下我在此应用程序中如何使用标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:39:08.550

MSDN 说：

`A common use for the Tag property is to store data that is closely associated with the control. For example, if you have a control that displays information about a customer, you might store a DataSet that contains the customer's order history in that control's Tag property so the data can be accessed quickly.`

因此，您对 Tag 属性的使用本身并没有错。
在我看来，在正确记录该财产的使用方面存在困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:40:09.123

是的，您可以使用该`Tags`属性。它旨在为控件保留一些信息，而不必继承它来为信息添加属性。

不过，你应该小心你在`Tag`财产中存储的东西。只包含数据的简单对象很好，但要小心存储一次性的东西，因为您还需要为清理控件指定一个事件，您可以在其中处理数据。

# flash - 在 ie9 上强制使用 Flash SVG 查看器时如何导航到 SVG

> ID：11704807
> 
> 赞同：1
> 
> 时间：2012-07-28T21:31:38.757
> 
> 标签：flash, svg, internet-explorer-9, embed, getelementbyid

我尝试获取嵌入在 .svg 中的元素`<object>`。我使用 svgweb 并强制使用 Flash 查看器。我创建了一个小演示 html 文档：

```
<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8">
  <title></title>
  <script src="svg.js"></script>
  <meta name="svg.render.forceflash" content="true">
 </head>
 <body>
   <!--[if !IE]>-->
    <object data="simple.svg" type="image/svg+xml"
        width="500" height="500" id="testSVG"> <!--<![endif]-->
   <!--[if lt IE 9]>
   <object src="simple.svg" classid="image/svg+xml"
        width="500" height="500" id="testSVG"> <![endif]-->
   <!--[if gte IE 9]>
   <object data="simple.svg" type="image/svg+xml"
        width="500" height="500" id="testSVG"> <![endif]-->
</object> 
```

flash 渲染`<object>`器用`<div id="testSVG" style="visibility: hidden;" type="image/svg+xml" width="500" height="500" data="simple.svg">`.

svg 非常简单：

```
 <svg  xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink">
  <rect id="rect" x="10" y="10" height="100" width="100"
      style="stroke:#ff0000; fill: #0000ff"/>
 </svg> 
```

现在，我尝试`<rect>`根据手册（[http://svgweb.googlecode.com/svn/trunk/docs/UserManual.html#manipulate_objects](http://svgweb.googlecode.com/svn/trunk/docs/UserManual.html#manipulate_objects)）获取 -element：

```
var obj = document.getElementById('testSVG');
var doc = obj.contentDocument; // grab the document object inside your SVG file
var myRect = doc.getElementById('myRect'); 
```

ie9 告诉我该对象不支持属性或方法“getElementById”。

我也在chrome上试过这个。代替`<div>`上面的，flash 渲染器生成一个`<embed src="/svg.swf" quality="high" wmode="transparent" width="500" height="500" id="testSVG" name="testSVG" swliveconnect="true" allowscriptaccess="always" type="application/x-shockwave-flash" flashvars="uniqueId=testSVG&amp;sourceType=string&amp;clipMode=both&amp;debug=true&amp;svgId=testSVG" pluginspage="http://www.macromedia.com/go/getflashplayer" style="visibility: visible; " class="embedssvg">`.

`doc.getElementById('myRect')`确实返回一个对象。在 Firefox 中，`obj.contentDocument`返回`undefined`.

我不关心 chrome 和 ff，因为它们有足够的原生 svg 支持。但我确实需要 ie9 才能让我在 svg 中添加元素 - 我该怎么做；我究竟做错了什么？

# mercurial - 让 Jenkins 检测对 Mercurial 子存 储库的更改

> ID：11704809
> 
> 赞同：0
> 
> 时间：2012-07-28T21:32:23.640
> 
> 标签：mercurial, jenkins, jenkins-plugins, mercurial-subrepos

有没有办法让 Jenkins 轮询功能检测到子存储库中发生了更改，即使该更改尚未提交给父存储库？

实际上，我希望我正在寻找一个可以`pull -u`在任何子存储库上执行的插件，然后在开始构建之前提交并将该更改推送到父级。我在官方插件列表中看不到类似的东西，并且正在考虑构建一个自定义插件来支持它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:55:08.680

这可以通过为子存储库创建作业并轮询它们以进行更改来完成。然后在子仓库作业中设置一个构建步骤，该步骤将执行脚本/批处理文件以自动“提升”父仓库中的子仓库。之后，您有几个选择，让您的依赖项目轮询父 repo 以等待此“升级”变更集，或者您可以在子 repo 作业中进行构建后步骤以启动所需的构建。

# antlr - 我怎样做... ？仅在 ANTLR 上使用词法分析器规则

> ID：11704814
> 
> 赞同：0
> 
> 时间：2012-07-28T21:33:04.473
> 
> 标签：antlr, lexer

我正在尝试使用添加的语法对自定义 .c 文件进行简单的解析。

例如： test.c 。

```
// I don’t need this in output
int func1(int a, int b);

//I need this.
@parseme int func2(int a, int b);

//and this …
@parseme
void func3() 
{
Int a;
//put here where ever 
…
{
                                //inside block
                }
return;
} 
```

.

我想在词法分析器阶段使用模糊解析方法，然后在解析器规则上，使用 TokenRewriteStream 和模板重写令牌。

好吧，这是一个词法分析器……

```
lexer grammar Lexi;

options {filter = true;}

// Pick everything between @parseme and ';' or '{ }'
METHOD
                :               HEADER .* (';' | BODY )
                ;

fragment
HEADER
                :               '@' ('parseme' | 'PARSEME') ;

fragment
BODY:   '{' .* '}' ;

. 
```

......对于专家来说，问题很简单：1- Lexer 在找到 ';' 时停止解析 在到达“@parseme void func3() ... 上的最后一个 '}' 之前。“ 2- 在块右卷曲中找到时，Lexer 停止解析。3-当然还有更多的案例尚未测试。

问题真的很明显。也解决了吗？？我希望如此 ！！</p>

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:01:57.093

回答我自己。

```
lexer grammar Lexi;

options {filter = true;}

// Pick everything between @parseme and ';' or '{}'
METHOD
    :   METHOD_HEADER (~'{')* METHOD_END ;

fragment
METHOD_HEADER
    :   '@' ('parseme' | 'PARSEME') ;

fragment
METHOD_END
    :   (';' | BLOCK ) ;

fragment
BLOCK
    :   '{' ( ~('{' | '}') | BLOCK )* '}' ;

WS  :   (' '|'\r'|'\t'|'\n')+ ; 
```

解决方案非常简单。

# web - 如何从技术上描述这个所需的网站功能（涉及超时、登录）

> ID：11704818
> 
> 赞同：0
> 
> 时间：2012-07-28T21:33:53.637
> 
> 标签：web, session-cookies, user-experience, session-timeout

在 eBay 等网站上，如果您暂停会话，并说您正在看一只鞋，当您（睡后）回到页面时，您会看到这双鞋，但您已注销.

但是，一旦您重新登录，您就会立即被定向到该鞋款。

我在想我说：“从网站超时后，重新登录后直接返回发生超时的页面。”

但是如何描述此功能（例如，我们将使用哪些技术）？此外，它是否需要大量资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:44:50.540

通常是通过将“返回”URL 传递到登录页面来完成的。

所以....（登录）

*   访问鞋子页面
*   会话超时
*   通过 js 超时或下一页刷新，用户将看到已注销的鞋子页面
*   该页面上的登录链接包括鞋子页面的网址，例如`Login.php?ReturnTo=ShoePage.php`

请注意，这适用于网站。您还添加了一个`web service`完全不同的标签 - Web 服务没有“当前页面”的概念

如果您决定将用户的最后一页存储在数据库中，如果访问的最后一页不再有效，会发生什么情况？您还将为每个页面加载添加 1 Db 操作（以更新最后访问的页面）。没有真正的性能问题，但值得了解。这是稍微不标准的行为，因此您需要确保用户知道他们被重定向的原因

# c++ - 我可以使用 select 结合标准输入和接受吗？

> ID：11704823
> 
> 赞同：2
> 
> 时间：2012-07-28T21:34:37.640
> 
> 标签：c++, select, pthreads

我正在尝试在 C++/Linux 中实现一个服务器，该服务器定期从终端获取用户输入。最初我实现了两个单独的线程来处理这种行为。但我意识到我需要类似 pthread_cancel 的东西来取消服务器线程，以防用户想要关闭服务器。

然后我决定在同一个线程中处理这两个动作可能会更好，所以我不必担心资源泄漏。所以我现在有一个“选择”调用，它选择标准输入 fd 以及我接受的 fd。我的代码看起来像这样......

```
fdset readfds;
FD_SET(acceptfd, &readfds);
FD_SET(stdinfd, &readfds);
while(1) {
  select(n, &readfds, NULL, NULL, NULL);
  ....
} 
```

出于某种原因，我不再能够从标准输入读取输入。当我从我的 fd 集中删除两个 fd 中的一个时，这工作正常，另一个 ome 按预期执行。但是当我把它们都留在里面时，虽然 acceptfd 仍然接受传入的连接，但 stdinfd 无法响应终端输入。

有谁知道我在这里可能做错了什么？这种方法是否存在固有缺陷？我是否应该专注于将这两个动作保持为单独的线程并找出一种干净退出的方法？

谢谢阅读！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:39:39.510

正如 Ambroz 评论的那样，多路复用标准输入和一些听过的 fd 是可能的。

但是`select`是一个旧的、几乎过时的系统调用，您应该更喜欢使用[`poll(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html). 如果你坚持仍然使用`select(2)`系统调用，你应该首先清除循环内的`readfds`第一个。`FD_ZERO`并且`FD_SET`宏应该在 while 循环内，因为`select`允许修改`readfds`.

系统`poll`调用更可取，`select`因为`select`对进程可以拥有的文件描述符的数量施加了有线限制（通常为 1024，而现在内核能够处理更大数量的 fd，例如 65536）。换句话说，`select`要求每个 fd < 1024（今天是错误的）。`poll`能够处理任何一组任何 fd。第一个参数`poll`是一个数组（`calloc`如果你愿意，你可以），它的大小是你想要多路复用的 fd 的数量。在您的情况下，它是两个（stdin 和第二个侦听的 fd），因此您可以将其设为局部变量。确保在每次调用之前清除并初始化它`poll`。

您可以使用调试器进行调试，例如`gdb`或仅使用`strace`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T22:13:00.883

这段[`epoll`](http://www.kernel.org/doc/man-pages/online/pages/man4/epoll.4.html)代码对我有用：

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <unistd.h>
#include <sys/epoll.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

#define PORT 4711

int main(void) {
    int sockfd = socket(AF_INET, SOCK_STREAM, 0);
    struct sockaddr_in addr;
    addr.sin_family = AF_INET;
    addr.sin_port = htons(PORT);
    addr.sin_addr.s_addr = htons(INADDR_ANY);
    bind(sockfd, (struct sockaddr*) &addr, sizeof (addr));
    listen(sockfd, 10);

    int epollfd = epoll_create1(0);
    struct epoll_event event;
    // add stdin
    event.events = EPOLLIN|EPOLLPRI|EPOLLERR;
    event.data.fd = STDIN_FILENO;
    if (epoll_ctl(epollfd, EPOLL_CTL_ADD, STDIN_FILENO, &event) != 0) {
        perror("epoll_ctr add stdin failed.");
        return 1;
    }
    // add socket
    event.events = EPOLLIN|EPOLLPRI|EPOLLERR;
    event.data.fd = sockfd;
    if (epoll_ctl(epollfd, EPOLL_CTL_ADD, sockfd, &event) != 0) {
        perror("epoll_ctr add sockfd failed.");
        return 1;
    }

    char *line = NULL;
    size_t linelen = 0;
    for (;;) {
        int fds = epoll_wait(epollfd, &event, 1, -1);
        if (fds < 0) {
            perror("epoll_wait failed.");
            return 2;
        }
        if (fds == 0) {
            continue;
        }

        if (event.data.fd == STDIN_FILENO) {
            // read input line
            int read = getline(&line, &linelen, stdin);
            if (read < 0) {
                perror("could not getline");
                return 3;
            }
            printf("Read: %.*s", read, line);
        } else if (event.data.fd == sockfd) {
            // accept client
            struct sockaddr_in client_addr;
            socklen_t addrlen = sizeof (client_addr);
            int clientfd = accept(sockfd, (struct sockaddr*) &client_addr, &addrlen);
            if (clientfd == -1) {
                perror("could not accept");
                return 4;
            }
            send(clientfd, "Bye", 3, 0);
            close(clientfd);
        } else {
            // cannot happen™
            fprintf(stderr, "Bad fd: %d\n", event.data.fd);
            return 5;
        }
    }

    close(epollfd);
    close(sockfd);
    return 0;

} 
```

# iphone - CodeSign 错误：SDK“iOS 5.1”中的产品类型“应用程序”需要代码签名

> ID：11704827
> 
> 赞同：3
> 
> 时间：2012-07-28T21:34:57.067
> 
> 标签：iphone, ios, xcode, code-signing

我最近购买了一台新的 Macbook Air，安装了包括 Xcode 在内的所有软件，我开始着手我的项目，但我不断收到代码签名错误！

我已经从 iOS 开发页面下载了我的证书/配置文件，但仍然一无所获！

我检查了我的钥匙串并没有发现任何问题？

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T23:11:39.660

您确定您的计算机具有与证书关联的私钥吗？简单地下载证书是行不通的。如果您无法取回私钥，那么您应该撤销并重新创建您的证书。然后更新配置文件。

# macos - 如何在 Firefox 中允许链接的键盘焦点？

> ID：11704828
> 
> 赞同：171
> 
> 时间：2012-07-28T21:35:26.863
> 
> 标签：macos, firefox, keyboard, accessibility, tabindex

在 Webkit 浏览器中转到这个超简单的小提琴并单击输入：

[http://jsfiddle.net/eK4TT/](http://jsfiddle.net/eK4TT/)

```
<input type="text">
<input type="text">
<input type="text">
<a href="#">my first link</a>
<a href="#">my second link</a>
<a href="#">my third link</a> 
```

然后，请注意，您可以使用`Tab`键（和`Shift`+`Tab`以相反的顺序导航）在输入和链接中进行键盘导航。

现在，看看 Mac OS 上的 Firefox 中的相同小提琴并做同样的事情。输入获得焦点，但链接不会获得焦点。这不是 CSS 显示问题。焦点从最后一个输入跳转到 URL 栏。

我`tabindex`在标记中尝试了无尽的声明组合，但无济于事，例如：

[http://jsfiddle.net/eK4TT/1/](http://jsfiddle.net/eK4TT/1/)

这到底是怎么回事？我将接受任何具有以下内容的答案：

a）在 Firefox 中工作的小提琴
b）对 Mozilla 头脑中到底发生了什么的解释。它似乎与[规范](http://www.w3.org/TR/WCAG20-TECHS/H4)相矛盾。

* * *

## 回答 #1

> 赞同：373
> 
> 时间：2012-07-29T22:27:54.403

好的，有人向我解释了这一点。这是Mac的问题。Mozilla 忠实于 Mac OS 中的操作系统设置。

在用户端有两种不同的方法。两者似乎都有效：

1.  在*System Preferences* → *Keyboard*的*Shortcuts*窗格中，选中底部的“所有控件”单选。

2.  在 Firefox 中，`about:config`在 URL 栏中键入“”。mac上没有`accessibility.tabfocus`偏好，所以你必须做一个。右键单击窗口，创建一个新的“整数”首选项，并将其设置为 7。

这些都不是很明显。此外，这些都不是开发人员的服务器端解决方案，这令人沮丧。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2021-02-15T13:11:39.730

在 MacOS Big Sur 上是这样完成的：

勾选复选框`Use keyboard navigation...`

[![勾选底部的使用键盘导航。](../Images/698d28a342dca4f2d3a7caa12129fcf1.png)](https://i.stack.imgur.com/FYrRR.png)

我也不必破解 about:config

# jquery - 如何将 td 重置为其本机宽度

> ID：11704834
> 
> 赞同：4
> 
> 时间：2012-07-28T21:36:00.033
> 
> 标签：jquery, html, css

这是我的问题的一个小演示：

[http://jsfiddle.net/k2Pqw/4/](http://jsfiddle.net/k2Pqw/4/)

在将红色调整`td`到一定宽度后，我想将其设置回原来的样子。应用 25% 不会让它像其他`td`s 一样动态调整，它只是停留在 25%，当黑框改变它的大小时你可以看到。

所以我想我的问题是：

1.  `td`手动设置之前的宽度是多少？
2.  我该如何重置它？

有任何想法吗？感谢您的反馈！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T21:37:51.967

如何将其设置为宽度：自动？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:43:02.717

这取决于您想要达到的目标。如果只是一次将所有 tds 重置为默认宽度，只需使用`width: auto`. 但是，如果您想在那里对其进行动画处理，则要复杂一些。您需要将每列的宽度保存为变量，然后将其动画化。

这是来自 jsFiddle 的更新示例：http: [//jsfiddle.net/k2Pqw/5/](http://jsfiddle.net/k2Pqw/5/)

```
$(document).ready(function () {
var blaW = $('#bla').width(), beW = $('#be').width();

$("#bla").animate({ width: "500px" }, 1000, function () {})
         .animate({width: blaW+'px'}, 1000, function () {});
$("#be").delay(2500)
        .animate({ width: "500px" }, 1000, function () {})
        .animate({width: beW+'px' }, 1000, function () {});
}); 
```

和html：

```
<table id="myTable">
<tr>
  <td style="background-color:Aqua;">salamander</td>
  <td style="background-color:Red;" id="bla">s</td>
  <td style="background-color:Black;" id="be">s</td>
  <td style="background-color:Green;">s</td>
</tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T21:40:19.680

它被设置为`auto`。您可以在 Chrome 的开发者工具或 Firebug 中的“默认样式”下看到它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T21:42:29.777

您是否应该能够添加和删除设置特定宽度的类。如果类被删除，它将回退到 % 宽度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T21:51:10.353

如果您`width`使用 JavaScript（或 jQuery，因为它只是花哨的 JS）设置了任何样式（不仅仅是 ），那么您可以通过将样式设置为`""`（空字符串）来重置它。这基本上会从元素的内联样式中删除该样式属性，让样式表再次接管。

# c# - 如何使用极乐世界项目？

> ID：11704835
> 
> 赞同：7
> 
> 时间：2012-07-28T21:36:00.173
> 
> 标签：c#, wpf, themes, expression-blend

CodePlex 上的[Elysium](http://elysium.codeplex.com/)项目看起来很有趣。一个问题。我不知道如何使用它。我只能假设用户知道他或她在做什么。我显然没有。[我从这里](http://elysium.codeplex.com/releases/view/82202)下载调试二进制文件。它有一个用于加载文件的批处理文件，并且看起来运行没有错误。但我不知道从这里去哪里。当我打开 Blend 时，我看不到任何模板或主题。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-28T22:10:51.953

*   从 Codeplex 或 Nuget 下载二进制文件。
*   添加对二进制文件的引用：`Elysium.Theme.dll`、`Microsoft.Expression.Interactions.dll`和`Microsoft.Windows.Shell.dll``System.Windows.Interactivity.dll`
    *   注意：如果您通过 Nuget 执行此程序包附带的某些二进制文件，则无法正确添加，因此您必须手动添加它们。
*   向应用程序添加新窗口时，请将此命名空间添加到 XAML：`xmlns:metro="http://schemas.codeplex.com/elysium/theme"`
*   然后更改您的 XAML，使窗口不仅仅是一个`<Window ..>...</Window>`，而是一个`<metro:Window ..>...</metro:Window>`.
*   Elysium 网站上的测试项目中还有许多其他示例，展示了如何使用自定义控件等。

那应该让你开始。

祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T01:07:01.517

对于 Elysium 1.5 及更高版本，这是步骤

*   **下载**并**解压**zip 文件。
*   寻找“ **Elysium.dll** ”和“ **Elysium.Notifications.dll** ”。如果您使用的是 x86 系统，则可能需要再次解压 zip。
*   添加对 Elysium.dll 和 Elysium.Notifications.dll 的**引用**
*   在 Visual Studio**工具箱中添加 Elysium 主题控件**
*   **将任何 Elysium 主题控件拖放**到您的用户界面，Visual Studio 将自动在 xaml.xml 中添加 xmlns 引用。

有关完整的分步指南，请参阅[http://bizvise.com/2012/09/24/how-to-install-elysium-on-visual-studio-project/ 。](http://bizvise.com/2012/09/24/how-to-install-elysium-on-visual-studio-project/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-25T08:39:38.123

[从这里](http://elysium.asvishnyakov.com/Downloads.cshtml#header)下载 SDK并安装 SDK。它与 Visual Studio 集成，您还拥有 Metro WPF 模板。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-13T22:37:04.477

对于 Elysium 2.0 版，这是我所做的：

1.  在此处下载[SDK](http://elysium.asvishnyakov.com/en/)。
2.  提取**.zip**文件。
3.  安装正确的**.exe**文件（x86 或 x64）。
4.  重新启动 Visual Studio（如果已打开）。
5.  使用 WPF Metro 应用程序创建一个新项目： ![在此处输入图像描述](../Images/dd1fe91a7ae8209e87dc40c637fdfa0e.png)

6.  最后，您可以在工具栏上手动添加控件： ![在此处输入图像描述](../Images/30da69b7f55a073fd20afdd129da71ab.png)

如果你喜欢这个扩展，那么你可以在他们的网站上捐款。

# c++ - 创建线程时丢失成员数据

> ID：11704842
> 
> 赞同：0
> 
> 时间：2012-07-28T21:36:43.103
> 
> 标签：c++, c, multithreading, pthreads

我发现很难解释这个问题，所以我会发布代码并解释发生了什么，然后询问如何让它做我想要的。首先，我在子进程中创建一个线程：

```
pid_t childpid = fork();

if(childpid == -1){
  cout << "Failed to fork." << endl;   
}
else if(childpid == 0){     
  //request threads
  pthread_t p1, p2, p3;          

  struct arg_struct args1, args2, args3;

  args1.name = "data Joe Smith";
  args1.num_req = n;
  args1.buff_size = b;
  pthread_create(&p1, NULL, &mythreadfunc, (void *)&args1);   
} 
```

这是`struct arg_struct`：

```
struct arg_struct{
    string name;
    int num_req;
    int curr_value;
    int buff_size;
}; 
```

和`mythreadfunc:`

```
void *mythreadfunc(void *arguments){ 
    struct arg_struct *args = (struct arg_struct *)arguments;
    string local_name = args->name;     
    int local_num_req = args->num_req;
    //request new thread
    RequestChannel chan("control", RequestChannel::CLIENT_SIDE);
    cout << "done." << endl;
    string reply1 = chan.send_request("newthread");

    cout << "Reply to request 'newthread' is " << reply1 << "'" << endl;

    RequestChannel chan2(reply1, RequestChannel::CLIENT_SIDE); 

    cout<<"local_name:  "<<local_name<<endl;    //returns incorrect value***
    cout<<"local_num_req:  "<<local_num_req<<endl;  //returns incorrect value***

    //close up all channels
    string reply2 = chan2.send_request("quit");
    cout << "Reply to request 'quit' is '" << reply2 << "'" << endl;
    string reply3 = chan.send_request("quit");
    cout << "Reply to request 'quit is '"<< reply3 << "'" << endl;
} 
```

在利用`local_name`和的两条线中`local_num_req`，存在问题。我编译得很好，但是这两个变量似乎每次都存储不同的东西。有时它可以正常工作，而有时它们保存垃圾值并且程序从不执行它们（或任何后续）。我尝试使用`args->name`没有局部变量的原始名称（即），但问题是一样的。我最好的猜测是我`args_struct`错误地处理了变量，但我不知道为什么它只会在部分时间失败。

如何在 中获得正确的变量值`mythreadfunc`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T21:42:05.893

在堆上为您的新线程创建参数，它超出了调用函数的范围，因此对您的线程无效：

```
struct arg_struct *arg1 = new arg_struct;

args1->num_req = n;
// etc...

pthread_create(&p1, NULL, &mythreadfunc, (void *) args1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:59:09.260

`p1`并且`args1`一旦创建新线程，它们就会超出范围，因此它们在`mythreadfunc`运行时不再存在。

要修复代码，您需要使这些对象的生命周期长于使用它们的新线程的生命周期。这可以通过在堆上创建对象来完成，或者通过在封闭范围内创建它们来确保它们在新线程完成之前不会超出范围：

```
pthread_t p1, p2, p3;
struct arg_struct args1, args2, args3;

pid_t childpid = fork();

if(childpid == -1){
  cout << "Failed to fork." << endl;   
}
else if(childpid == 0){     
  //request threads

  args1.name = "data Joe Smith";
  args1.num_req = n;
  args1.buff_size = b;
  pthread_create(&p1, NULL, &mythreadfunc, (void *)&args1);   
}

// ...

void* res = pthread_join(&p1);

// safe for `args1` to go out of scope now 
```

# .htaccess - 为已部署的项目配置基本 url Symfony2

> ID：11704843
> 
> 赞同：1
> 
> 时间：2012-07-28T21:36:47.070
> 
> 标签：.htaccess, deployment, symfony, base-url

我已经将 Symfony2 项目部署到服务器上。我在项目文件夹中添加了一个 .htaccess 文件来自动访问 /web/app.php 文件。

这是我添加的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    <IfModule mod_vhost_alias.c>
      RewriteBase /booking/itinerary/
    </IfModule>

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ web/app.php [QSA,L]
</IfModule> 
```

我遇到的问题是我无法将路由的基本 url 设置为 /booking/itinerary。我从 symfony 收到以下错误：

> 未找到“GET /booking/itinerary/”的路线

尽管“预订/行程”应该使用“/”模式路由到“主页”。

我怎样才能解决这个问题？因为改变项目中的所有路线会很痛苦。

# javascript - 如何使用 cookie.js 的工作示例

> ID：11704845
> 
> 赞同：2
> 
> 时间：2012-07-28T21:36:56.757
> 
> 标签：javascript, jquery

我想知道您是否可以帮助/向我展示如何在我的示例中使用 cookie.js，我一直在强调试图弄清楚这一点。我必须提前说明我是新手，所以我很谦虚，并且会喜欢一个简单的例子来说明如何使用 cookie.js

我希望在页面刷新后在我的子菜单 div 上保持相同的状态。我构建了一个 jsFiddle 来展示在没有 cookie 的情况下导航是如何工作的。

[http://jsfiddle.net/replacement4/nKFt7/60/](http://jsfiddle.net/replacement4/nKFt7/60/)

这是我使用 cookie 的尝试。

[http://jsfiddle.net/replacement4/nvf3V/3/](http://jsfiddle.net/replacement4/nvf3V/3/)

我希望这是简单的事情，我只是想念理解......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:49:27.447

切换时，您的 cookie 值似乎未设置。最简单的方法是向切换方法添加回调。

```
function updateCookie(){

    $.cookie('submin_visible', $('#sub-nav-wrapmin').is(':visible').toString());
}

$('.button').click(function(){
        $('#sub-nav-wrapmin').toggle(500,updateCookie);
// OR
         $('#sub-nav-wrap').toggle(500,function(){
           $.cookie('submin', $('#sub-nav-wrap').is(':visible').toString());
         });
    }); 
```

可能有一个更优雅的解决方案，但是查看代码这是最简单的；）

# awk - 用于将当前行与下一行进行比较并根据条件打印其中一行的 awk 解决方案

> ID：11704846
> 
> 赞同：9
> 
> 时间：2012-07-28T21:37:12.903
> 
> 标签：awk, getline

我有一个如下所示的输入文件（第一列是位置编号，第二列是应随时间增加的计数）：

```
1       0
1       2
1       6
1       7
1       7
1       8
1       7
1       7
1       9
1       9
1       10
1       10
1       9
1       10
1       10
1       10
1       10
1       10
1       10
1       9
1       10
1       10
1       10
1       10
1       10
1       10 
```

我想修复它看起来像这样（替代计数与先前计数减少）：

```
1       0
1       2
1       6
1       7
1       7
1       8
1       8
1       8
1       9
1       9
1       10
1       10
1       10
1       10
1       10
1       10
1       10
1       10
1       10
1       10
1       10
1       10
1       10
1       10
1       10
1       10 
```

我一直在尝试为此使用 awk ，但由于我似乎无法弄清楚如何重置行号（NR？）所以它会读取每一行，它是下一行，而不是两行一次。这是我到目前为止的代码，有什么想法吗？

```
awk '{a=$1; b=$2; getline; c=$1; d=$2; if (a==c && b<=d) print a"\t"b; else print c"\t"d}' original.txt > fixed.txt 
```

此外，这是我目前得到的输出：

```
1       0
1       6
1       7
1       7
1       9
1       10
1       9
1       10
1       10
1       9
1       10
1       10
1       10 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T21:43:27.350

也许你想要的只是：

```
awk '$2 < p { $2 = p } { p = $2 } 1' input-file 
```

如果第二列中的值为负数，这将在第一行失败，因此请执行以下操作：

```
awk 'NR > 1 && $2 < p ...' 
```

This simply sets the second column to the previous value if the current value is less, then stores the current value in the variable p, then prints the line.

Note that this also slightly modifies the spacing of the output on lines that change. If your input is tab-separated, you might want to do:

```
awk 'NR > 1 && $2 < p { $2 = p } { p = $2 } 1' OFS=\\t input-file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T21:47:06.967

This script will do what you like:

```
{
  if ($2 < prev_count)
    $2 = prev_count
  else
    prev_count = $2

  printf("%d   %d\n", $1, $2)
} 
```

This is a verbose version to be easily readable :)

# drupal-7 - 视图中实体引用的字段集合

> ID：11704847
> 
> 赞同：1
> 
> 时间：2012-07-28T21:37:37.440
> 
> 标签：drupal-7, views

我一直在修补这个问题并尝试研究几个小时。我仍然熟悉 Drupal 7 的实体 API，并且一直在尝试使用 PHP，但无济于事——我认为由于我疲惫的大脑过度思考，我错过了一些非常明显的东西。

我有两种内容类型，CT1 和 CT2。CT1 有一个可以保存多个字段集合值的字段。在此字段集合 (field_coll_ct2) 中，字段之一 (field_ct2_ref) 是对内容类型 CT2 节点的实体引用。

现在，当我查看 CT1 类型的单个节点时，我想要一个块视图，它将显示该 CT1 节点的 field_coll_ct2 字段集合字段中引用的所有 CT2 节点。

我的主要方法是在同类关系的非字段集合字段上工作，它是在 Content:NID 上的视图中添加上下文过滤器。从那里开始，由于它是一个块，并且 URL 参数传递是不可能的（在 7-8 种不同的内容类型之间存在如此多的这种关系，在每个节点的不同元组中，使用 URL 绝对不可行用于参数传递）我将其设置为“PHP”类型的“提供默认值”和“允许多个值”，这就是它变得毛茸茸的地方。

我需要获取当前查看节点的 field_coll_ct2 字段集合中的所有 field_ct2_ref 实体引用。我试过使用：

```
$wrapper = entity_metadata_wrapper($entity_type, $entity);
return $wrapper->field_coll_ct2->field_ct2_ref->value(); 
```

或者

```
$node=menu_get_object(); 
foreach ($node->field_coll_ct2['und'] as $record) 
{ 
$values[]= $record['value'];
} 
foreach($values as $val){
$tgts[]=$val['every'][index]['possible'];
}
return $tgts[omg]; 
```

并且可能接近上述一百种变体，试图让它返回一些模糊地类似于对 CT2 类型节点的实体引用的东西。

我似乎无法深入挖掘实体/字段引用以获取适用于具有这种关系的所有非字段集合字段的 field_ct2_ref['und'][0]['target_id']。或者我收到 AJAX 错误，告诉我“未知数据属性 field_coll_ct2”或控制台错误，说我尝试向这些数组对象抛出的每个索引（甚至只是获取其中一个值）都是错误的。

有没有更简单的方法来做到这一点？我是否遗漏了一些简单而明显的东西——无论是我实现 View 的方式还是 PHP 本身？

对于它的价值，我已经能够通过选择与“引用实体：field_ct2_ref”的关系来缩小视图结果而无需任何上下文过滤器，但它显示了由任何 CT1 类型节点而不是特定 CT1 类型节点引用的所有 CT2 节点我在看。

谢谢！

# php - PHP字符串包含一个子字符串

> ID：11704852
> 
> 赞同：0
> 
> 时间：2012-07-28T21:38:23.097
> 
> 标签：php, substring, performance

我有两个单词列表，比如说listA和listB。我想检查 listB 中的每个单词是否包含在 listA 中。直观的方法是查找 listB 中的每个单词并检查：

```
$pos = strpos($word , $listBContent) ; 
if( $pos != false) { ... } 
```

但我担心这种过程太“昂贵”——假设 listA 和 listB 每个包含 n 个单词，复杂度将是 O(n^2)。有什么方法可以让我更有效地运行这个特定的过程吗？我想过使用后缀树，但我不知道是否可以（以及如何）从单词列表而不是单个单词中创建一个。任何建议都会有所帮助，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:42:10.320

有一个函数叫做[`array_intersect`](http://php.net/manual/en/function.array-intersect.php)：

```
<?php
$array1 = array("a" => "green", "red", "blue");
$array2 = array("b" => "green", "yellow", "red");
$result = array_intersect($array1, $array2);
print_r($result);
?> 
```

# css - 请，需要添加一个特殊的类

> ID：11704854
> 
> 赞同：1
> 
> 时间：2012-07-28T21:38:36.857
> 
> 标签：css, class, html

我试图在“最后一个”之前添加第三类，但如何？如果我像这样添加它，我总是会遇到语法错误：

```
<li class="THIRD CLASS" class="last"><a href="contact.php"class="transition">Contact Us</a></li> 
```

请帮我，

真挚地。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:43:15.013

永远不要在标识符中使用空格（让它在 CSS 或 Java 或其他中）。所以`THIRD_CLASS`。

为了同时使用两种样式，请将它们放在同一个类属性中，用空格分隔

```
 <myTag class="my_style my_other_style"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T21:41:21.380

你可以做：

```
<li class="last anotherclass"><a href="contact.php"class="transition">Contact Us</a></li> 
```

它们将按照声明的顺序应用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T21:41:47.517

这是不正确的。你应该使用

```
<li class="THIRD_CLASS last"><a href="contact.php"class="transitio... 
```

有两个区别：

1.  我只使用一个类属性用空格分隔名称
2.  我将“THIRD CLASS”重命名为“THIRD_CLASS”，因为类名中不应包含空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T21:41:58.293

每个标签只能有一个类属性，并且类名必须是一个单词，例如

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T21:42:01.383

只需这样做：

```
<li class="THIRD_CLASS last"><a href="contact.php"class="transition">Contact Us</a></li> 
```

# c# - DataGrid 单元格的绑定样式

> ID：11704857
> 
> 赞同：0
> 
> 时间：2012-07-28T21:39:30.550
> 
> 标签：c#, wpf, datagrid, styles

我的问题很简单。我有一个数据网格和一个绑定的项目集合。数据显示没有任何问题，但我想格式化单元格。

集合中的项目简单地说了这个结构：

```
{ 
public string Text { get; set; }
public string Title {get;set;}
public Brush BGBrush { get; set; }
public Brush Color { get; set; }
} 
```

我像这样映射它：

```
<DataGridTextColumn Binding="{Binding Path=Text}" Header="{Binding Path=Title}" Foreground="{Binding Path=Color}" /> 
```

数据显示，但前景和背景没有改变。任何帮助将不胜感激。我可能做错了，但我只是在学习数据网格。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:36:50.053

您需要按以下方式使用`DataGridTemplateColumn`您的案例：

```
 <DataGridTemplateColumn Header="Column 1"  Width="150">
                <DataGridTemplateColumn.CellTemplate  >
                    <DataTemplate>
                        <TextBlock Text="{Binding Text}" Foreground="{Binding Color}"  />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn> 
```

希望能帮助到你

# vba - 获取最后一个非空白单元格的行索引。

> ID：11704860
> 
> 赞同：1
> 
> 时间：2012-07-28T21:39:52.807
> 
> 标签：vba, excel, excel-2007

我是编码宏的新手，只是有一个简单的问题。我一直在尝试做的是选择一个空单元格之前的所有数据点，然后存储最后一个点的行索引。例如，在下面的代码中，我将选择第 1-4 行，并且将存储的行索引为 4。到目前为止，我有这段代码可以选择数据点：

```
Cells(2, 2).Select
Range(Selection, Selection.End(xlDown)).Select 
```

我只需要存储最后一行索引。示例数据：

```
1\. 342
2\. 342
3\. 324
4\. 234
5\. <This would be an empty cell>
6\. 43242
7\. 342
8\. 32423
9\. 4324 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T00:54:50.593

尝试这个

```
LastRow = Cells(2, 2).End(xlDown).Row 
```

如果您打算选择范围，请使用

```
LastRow = Selection.Row + Selection.Rows.Count - 1 
```

虽然我建议不要选择范围。改用这个

```
Dim rng As Range
Set rng = Range(Cells(2, 2), Cells(2, 2).End(xlDown))
LastRow = rng.Row + rng.Rows.Count - 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T22:57:14.863

```
' column = whatever column you're working with

For evalRows = 1 to Range(Selection, Selection.End(xlDown)).Row

  If IsEmpty(Cells(evalRows, column).Value) Then

    ' you can only refer to the previous row if you're not on the first row
    If evalRows = 1 then

      ' do nothing

    Else

      ' refer to previous row
      lastUsefulRow = Offset(evalRows - 1, column).Row

    End If

  End If

Next 
```

# c - 使用 Ruby C API 测试符号的相等性

> ID：11704861
> 
> 赞同：3
> 
> 时间：2012-07-28T21:39:52.467
> 
> 标签：c, ruby, ruby-c-extension

我正在尝试找到一种在 Ruby C API 中测试符号相等性的方法。考虑以下 C 函数：

```
static VALUE test_symbol_equality(VALUE self, VALUE symbol) {
  if (rb_intern("test") == symbol) {
    return Qtrue;
  } else {
    return Qfalse;
  }
} 
```

从 Ruby 的角度来看，此方法的行为与预期不同：

```
test_symbol_equality(:test)    # => false 
```

为什么会这样？我如何需要更改代码以实现预期的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T22:00:23.487

在您的示例中，您没有比较相同的内容。

`rb_intern`返回 an `ID`，但您将其与`VALUE`直接进行比较。您首先必须“解包” `VALUE`，检索`ID`与之关联的 。用这个替换你的`if`语句应该可以解决你的问题：

```
if (rb_intern("test") == SYM2ID(symbol)) {
    ... 
```

# php - 根据来自 ajax 响应的输入接受额外的用户输入

> ID：11704871
> 
> 赞同：0
> 
> 时间：2012-07-28T21:40:52.560
> 
> 标签：php, javascript, ajax

我从用户那里得到 2 个输入：

1.  *区域*
2.  *时间*

基于这些，我正在展示当时该地区*的**可用*餐厅。我还想将这些餐厅提供的所有美食显示为复选框。然后，用户可以从这些复选框中进行选择，也可以根据菜系过滤餐厅。

我面临的问题是，在我展示了这些餐厅提供的所有菜肴后，我无法找到一种方法来根据这些菜肴更改结果。

这可以通过创建 2 个`xmlhttpreq`对象来解决吗？请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:18:19.720

只需确保您的原始对象具有有关每家餐厅美食的相关信息，然后您就可以根据过滤器中是否包含特定选项来过滤您向用户显示的选项。由于隐藏/显示选项不需要任何服务器参与，因此不需要另一个 AJAX 请求。

[这个 jsfiddle 演示](http://jsfiddle.net/vmCHG/1/)展示了一种简单过滤餐厅列表的方法（使用一点 jQuery）。DOM 操作是相当基本的，`change`如果你不想使用 jQuery，可以很容易地在原生 JS 中模拟事件。

```
var time = "8:00pm";
var parameters = {
    area: 1,
    time: time
};

// Initially only r1, r2, r5 shown
var restaurants = {
    r1: { name:"One", cuisine: "Thai", area: "1", time: time },
    r2: { name:"Two", cuisine: "Chinese", area: "1", time: time},
    r3: { name:"Three", cuisine: "American", area: "2", time: time },
    r4: { name:"Four", cuisine: "Mediterranean", area: "1", time: "9:00pm"},
    r5: { name:"Five", cuisine: "American", area: "1", time: time }
};

$(document).ready(function() {
    parameters.cuisine = $('input[name="cuisine"]:checked').map(function() {
        return $(this).val();
    }).toArray();

    writeRestaurants();

    $('input[name="cuisine"]').change( function(){
        var $this = $(this);
        var a = parameters.cuisine;
        if( $this.is(':checked') ) {
            a.push($this.val());           
        }
        else {
            var k = a.indexOf($this.val());
            a.splice(k, 1);
        }   
        writeRestaurants();
    });
});

function writeRestaurants() {
    $('#restaurants').empty();
    for (var i in restaurants ) {
        var include = true;
        for (var param in parameters) {
            if( param == 'cuisine' ){
                if (parameters[param].indexOf(restaurants[i][param]) < 0) {
                    include = false;
                }
            }
            else if (restaurants[i][param] != parameters[param]) {
                include = false;
            }
        }
        if (include) {
            $('#restaurants').append('<p>'+restaurants[i].name+'</p>');
        }
    }
}​ 
```

# javascript - 从文件名中获取文件路径

> ID：11704874
> 
> 赞同：0
> 
> 时间：2012-07-28T21:41:30.043
> 
> 标签：javascript, fso

我需要你的帮助。

如何使用 javascript 根据给定的文件文件名查找文件路径？

IE。

该函数将执行以查找要包含在以下位置的 database.mdb：C:\primaryfolder\database\database.mdb

```
function find_filepath("database.mbd") {
   alert(filepath)
} 
```

提前感谢大家的帮助

非常感谢和赞赏

干杯

周杰伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:47:05.467

现代浏览器中的 JavaScript 不能直接访问文件系统。它们在沙盒中。你可以使用**IE**和**ActiveX**来做你想做的事情。

# c# - 实体框架查询多个数据源

> ID：11704877
> 
> 赞同：1
> 
> 时间：2012-07-28T21:41:55.970
> 
> 标签：c#, sql-server, entity-framework, mongodb, multiple-databases

有没有一种方法可以让我使用实体框架同时查询多个数据源，如（mongodb、sql server、oracle）。例如，用户帐户和配置文件位于 sql server 上，其他数据位于 mongodb 上，用于快速访问，其他数据位于 oracle 上。EF 是否支持以这种方式查询多个数据源？或者是否有任何其他可能支持此类功能的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:47:29.820

不，EntityFramework 不能这样做。事实上，它甚至不能对来自一个数据库的两个不同上下文进行查询。

您可以在 EF 之上编写自己的抽象层，它将适当地转发您的查询。

**更新：**作为事后的想法 - 我不认为写一个 DAL 来统治他们是一个好主意。不同的数据源通常意味着不同的关注点，这意味着您应该将它们分开为不同的服务。乍一看并不那么方便，但从长远来看，它（通常）是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:50:33.093

他们不是实体框架的直接方式。但是您可以创建 EDMX，然后可以链接不同的服务器，这意味着您将拥有多个数据源

我建议的 EDMX 项目称为 ADO.NET 实体数据模型

# ruby-on-rails - 编写功能测试时覆盖默认设置是否作弊？

> ID：11704880
> 
> 赞同：1
> 
> 时间：2012-07-28T21:41:57.713
> 
> 标签：ruby-on-rails, rspec, functional-testing

我正在为 Rails 应用程序编写一些测试，以确保我的索引操作正在对结果进行分页。我不想为测试创建 25 个以上的对象（每页的默认项目是 25 个），所以我将测试中的 default_per_page 参数更改为更合理（出于测试目的）2。

这是否违反了我没有想到的任何最佳实践规则？在我的脑海中，它恰好位于聪明的黑客和可耻的组合线上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T22:21:42.397

### 明确定义测试目标

我认为“作弊”这个词有点误导，因为测试是为了*你*在练习和维护代码方面的好处。为此，任何能够实现您的测试目标的东西都不是真正的作弊。真正的问题是，你的实际目标是什么？

### 锻炼行为，而不是实施

假设您的测试目标是确保分页应该跨页面拆分记录。也许你的测试说：

```
it 'should successfully paginate records into 2 pages' do
  # test that pagination creates two pages
end 
```

在这种情况下，通过减少夹具/工厂设置使测试变得更简单可以澄清测试。您不是在测试第一页是否有 25 条记录；您只是在测试分页将结果分成两页。您已经根据预期行为构建了测试框架，并定义了一个非脆弱测试，以防万一您将来以不同方式分页时提供灵活性。

另一方面，如果您使用自己的自定义分页代码，而不是使用广泛使用且经过实战考验的分页 gem，那么您当然应该测试*所有*边界条件，而不是每页 25 条记录的单个用例. 单个测试肯定不足以测试此处的所有相关排列，因此如果这是您的实际测试目标，则需要相应地扩展测试。

# objective-c - 存储充满 NSImage 的 NSCache 的最简单方法

> ID：11704890
> 
> 赞同：2
> 
> 时间：2012-07-28T21:43:10.587
> 
> 标签：objective-c, persistence, nsimage, nscache

持久存储`NSCache`充满`NSImage`s 的最简单方法是什么？我**不是**在寻找核心数据，这对于存储带有图像的字典来说似乎有点过分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:07:48.093

如果您只有一组图片，我只需从用户那里获取一条路径并使用 NSImage`TIFFRepresentation`获取每张图片的 NSData 实例，然后可以使用 NSFileManager 和 NSFileHandle 将其写入路径。

如果您有图像随附的信息，例如标签，我会将其与识别图像的标题一起放入一系列字典中。然后你可以使用 NSArray 的`writeToFile:atomically:`方法写出一个 plist。

# xpath - XPath 中的反向引用

> ID：11704898
> 
> 赞同：1
> 
> 时间：2012-07-28T21:44:03.077
> 
> 标签：xpath

我学习 XPath 越多，我就越需要反向引用

例如，当我在一些中间步骤中发现一些信息时，有时我需要稍后使用这些信息。这个问题实际上有一个解决方法，在谓词表达式的能力的帮助下也包含 XPathes。工作解决方案可能看起来像这样

```
/foo/item[@attrtocheck = ../../otheritem[@anotherattr]] 
```

但是这种方法的问题是我只是根据某些标准评估谓词，并且不能基于此获得多个后续结果。即使有许多具有相同@anotherattr 的其他项目，我也无法收集它们。所以更好的解决方案是

```
/foo/item[@attrtocheck]/../../otheritem[@anotherattr=BACKREFERENCING_ATTRTOCHECK_VALUE] 
```

但只要我知道这是不可能的。

如果标准中没有解决方案，也许某些工具/库中有扩展？实际上我实现了自己的引擎，如果已经存在非标准语法，我会采用它。

**更新**：迈克尔凯评论后，更多关于我为什么错过这个功能

实际上，我正在为 AST（抽象语法树）执行 XPath 搜索。我不是第一个尝试这样做的人（网络搜索 [Xpath AST]）。这种搜索揭示了树的不同部分之间非常紧密的关系。例如，当我在某个上下文中（例如在某个其他方法中）找到一些调用时，我想知道这个符号是否作为虚函数引入，如果它是然后将其输出到结果中。在这种情况下，我的第一次搜索会产生一些以前未知的符号（函数名），我想在以下子路径中使用它（搜索类声明及其关键字）。因此，反向引用将非常有帮助。

我认为如果它适用于 AST，那么在其他结构化数据中就有可能存在这种关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:09:41.400

在 XQuery 中，您可以使用`let .. return`来声明临时变量。像这样：

```
 /foo/item[@attrtocheck]/(let $backreference := @attrtocheck return ../../otheritem[@anotherattr=$backreference]) 
```

在 XPath 2 中，您可以使用 for 循环模拟 let 表达式：

```
 /foo/item[@attrtocheck]/(for $backreference in @attrtocheck return ../../otheritem[@anotherattr=$backreference]) 
```

或者您可以按预期使用 for 循环，并且不使用“反向引用”：

```
 for $value in /foo/item[@attrtocheck]/@attrtocheck  return otheritem[@anotherattr=$value] 
```

在这种情况下，由于比较是存在的，您可以使用：

```
otheritem[@anotherattr = /foo/item/@attrtocheck] 
```

（顺便说一句，我还编写了自己的 XPath 实现，并且我有用于变量声明的语法 ((values := /xx/a/@id)[0], /xx/b[@id = $values]) := 定义变量，并且 ()[0] 防止 $values 在返回的序列中。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T07:41:18.613

我接受了 BeniBela 解决方案（Dimitre Novatchev 也提到过），尽管我发现这个功能在某种程度上缺乏 XPath 1.0 缩写语法的简单性和表现力。

我还考虑实现我自己的函数来反向引用以前找到的值。它将接受负偏移以相对引用先前的步骤，并且绝对地（从表达式的开头）。所以这会以类似的方式结束

```
 /foo/item[@attrtocheck]/../../otheritem[@anotherattr=backref(-2)] 
```

XPath 中没有我想的这样的函数，我不会丢失一般语法，并且在路径期间引用前面的步骤乘以时间看起来比多个 for 语句更具表现力

# ruby-on-rails-3 - Rails 可以 CarrierWave 保存图像吗？

> ID：11704900
> 
> 赞同：0
> 
> 时间：2012-07-28T21:44:43.677
> 
> 标签：ruby-on-rails-3, activerecord, carrierwave

我正在使用 CarrierWave 在 Amazon S3 上为我的记录存储一些徽标图像。我希望载波在记录被破坏时不删除图像。

有没有办法故意抑制这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:14:46.330

如果您使用 ActiveRecord 的`delete`方法而不是`destroy`，则不会触发回调，并且您的图像将保留。

# git - 罕见的 Git 服务器错误：“拒绝 pubkey”（但密钥经过测试有效）

> ID：11704914
> 
> 赞同：2
> 
> 时间：2012-07-28T21:48:11.177
> 
> 标签：git, authentication, ssh, putty, gitolite

我这里有一个可能是客户问题的特殊问题。但是，我收到服务器错误。所以请通读一遍，也许你会同意我的观点，这是一个非常奇怪的问题，希望你能帮助我解决它！:)

这是我的情况：

我在家里用 Git 和 Gitolite 服务器设置了一个使用密钥身份验证的设置。直到上周，我的私钥和公钥都经过验证并正常工作。现在在我的客户端计算机 #1 上，我不可能从我的 Git 服务器推送/拉取任何引用。

我已经尝试使用完全相同的存储库（安装在同一驱动器上）但使用笔记本电脑使用相同的密钥，并且我的服务器将接受该密钥......

我尝试卸载/重新安装 Git，生成其他密钥对，重新检查我的 SSH 配置，重新启动我的服务器服务，但没有任何效果。当我在调试模式下检查我的 SSH 日志时，我几乎没有得到任何有关错误的详细信息：

```
Jul 28 06:46:28 git-server sshd[5100]: debug1: Forked child 19124.
Jul 28 06:46:28 git-server sshd[19124]: Set /proc/self/oom_adj to 0
Jul 28 06:46:28 git-server sshd[19124]: debug1: rexec start in 5 out 5 newsock 5 pipe 7 sock 8
Jul 28 06:46:28 git-server sshd[19124]: debug1: inetd sockets after dupping: 3, 3
Jul 28 06:46:28 git-server sshd[19124]: Connection from xx.xx.xx.xx port 53847
Jul 28 06:46:28 git-server sshd[19124]: debug1: Client protocol version 2.0; client software version PuTTY_Local:_Jun__3_2012_14:48:17
Jul 28 06:46:28 git-server sshd[19124]: debug1: no match: PuTTY_Local:_Jun__3_2012_14:48:17
Jul 28 06:46:28 git-server sshd[19124]: debug1: Enabling compatibility mode for protocol 2.0
Jul 28 06:46:28 git-server sshd[19124]: debug1: Local version string SSH-2.0-OpenSSH_5.5p1 Debian-6+squeeze1
Jul 28 06:46:28 git-server sshd[1002]: debug1: server_input_channel_req: channel 0 request winadj@putty.projects.tartarus.org reply 1
Jul 28 06:46:28 git-server sshd[1002]: debug1: session_by_channel: session 0 channel 0
Jul 28 06:46:28 git-server sshd[1002]: debug1: session_input_channel_req: session 0 req winadj@putty.projects.tartarus.org
Jul 28 06:46:29 git-server sshd[19124]: debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-1024
Jul 28 06:46:29 git-server sshd[19124]: debug1: Checking blacklist file /etc/ssh/blacklist.RSA-1024
Jul 28 06:46:29 git-server sshd[19124]: debug1: temporarily_use_uid: 1001/1001 (e=0/0)
Jul 28 06:46:29 git-server sshd[19124]: debug1: trying public key file /home/gitolite/.ssh/authorized_keys
Jul 28 06:46:29 git-server sshd[19124]: debug1: fd 4 clearing O_NONBLOCK
Jul 28 06:46:29 git-server sshd[19124]: debug1: restore_uid: 0/0
Jul 28 06:46:29 git-server sshd[19124]: debug1: temporarily_use_uid: 1001/1001 (e=0/0)
Jul 28 06:46:29 git-server sshd[19124]: debug1: trying public key file /home/gitolite/.ssh/authorized_keys
Jul 28 06:46:29 git-server sshd[19124]: debug1: fd 4 clearing O_NONBLOCK
Jul 28 06:46:29 git-server sshd[19124]: debug1: restore_uid: 0/0
**Jul 28 06:46:29 git-server sshd[19124]: Failed publickey for gitolite from xx.xx.xx.xx port 53847 ssh2**
Jul 28 06:46:29 git-server sshd[19124]: debug1: do_cleanup 
```

现在我认为我的服务器运行良好，因为我已经在其他两个客户端位置测试了我的 Putty 密钥，并且一切正常。也许是我的工作站无法发送我的 Putty 密钥。如果这是客户问题，这里是我的电脑规格：

*   英特尔 i7 3770 x64
*   Windows 7旗舰版
*   16GB 内存

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T12:35:19.373

检查公钥的格式是否如下：

```
ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAIEA5k6P+EKZ/G8+YT8kpHUmyp2d+4S/1kIAqPQcIt+qjpf9i0v9pwWCJdgYhiwD18pjUL2tM0D6zofKF3mQJdJbW22yAqBQ/YmswEHcH+1/QxHxaYHvXxaqakgvFcWW3DZ/ShsgWfJyhw7naKMWKcgAJJHPJfmAHtEWPLDhBAzpEQc= 
```

并检查它是否是已知主机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-03T20:58:35.870

经过这么长时间；问题解决了！

显然，注册表的腻子问题使 ToirtoiseGit Windows 客户端感到困惑。我很惊讶这个案例在任何地方都没有记录。感谢找到解决方案的朋友。

所以在 Windows 上，所有会话信息和 Putty 设置都位于此处

```
HKEY_CURRENT_USER\Software\SimonTatham\PuTTY 
```

通过删除之后自动重新生成的“Sessions”和“SshHostKeys”文件夹，解决了这个问题。但我们不知道为什么。

更多挖掘使我们得出结论，当通过 putty 接口更改默认设置时，它会导致 Plink（ToirtoiseGit 的 putty 代理）坚持 Putty 的默认设置，而不是专注于“自动加载的 putty 键“ 环境。

**底线是**

1.  如果您有这些症状，请清空位于`HKEY_CURRENT_USER\Software\SimonTatham\PuTTY\Sessions\Default Settings`
2.  或者...根本不要在 Putty 中编辑/保存默认设置！！！

我希望这个解决方案也能帮助其他人！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T04:17:46.740

我在 Windows 上遇到了类似的 PuTTY 问题，我更改了用于对各种服务器进行身份验证的密钥。但是在我保存的一些会话中，它仍然有指向原始密钥文件的路径，该路径不再有效。

解决方案是浏览保存的会话并删除有问题的密钥文件 - 我认为它在 Connection/SSH/Auth 下

# jquery - 如何在 parent-div 中调整 div 的大小，同时 parentdiv 也调整大小？

> ID：11704917
> 
> 赞同：1
> 
> 时间：2012-07-28T21:49:13.240
> 
> 标签：jquery, css, jquery-ui, jquery-ui-resizable

我对 jQuery 很陌生，但我非常喜欢它！为开发者点赞！:)

我的问题是关于可调整大小的功能。情况如下：

我有一个 div（parent-div），并且在我有 5 个其他 div（彼此直接相邻，让我们称它们为 div-a 到 div-e）。parent-div 代表一个时间跨度（它越长，它代表的时间越多），五个 childrendiv 代表该时间跨度内的五个阶段。

现在，我希望能够调整（比如说）child-div-c 的大小（它代表的 fase 需要更多时间）。当我调整 C 的大小时，div 的 D 和 E 必须向左移动，因为它们的 fase 只是稍后发生，而不是更短或更长。当我调整 C 的大小时，父 div 也必须调整大小，因为总时间跨度会更长。

我希望这很清楚。问题是：

如何将 div 移动到调整大小的 div 旁边？如何调整父div的大小？

我知道 $(".selector).resizable ({}) 事件，并且我得到了它的工作。但是当我有 2 个 div 彼此相邻时，我正在调整其中一个的大小，它并没有移动。

提前致谢！

编辑：尽管这个问题被否决了，但我找到了答案并制作了一个 JSfiddle。请参阅我对已接受答案的评论。

我的第二个问题的答案是这样的：

```
$(".selector").resizable( {
       resize: function(event, ui) {
            var widthTotal = 0;
            $(".travelcontainer > .travelfase").each(function(index, element) {
                widthTotal = $(this).innerWidth() + widthTotal;
            });
}); 
```

希望这对其他人也有帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T21:54:26.433

如果您的子 div 正在显示，`float:left`或者`display:inline-block`您在调整前一个子项的大小后不必做任何事情来移动子项。

如果您的父 div 具有固定宽度，则您必须计算子元素的总数并手动设置（或动画）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T22:15:59.767

[http://jsfiddle.net/MjSfy/1/](http://jsfiddle.net/MjSfy/1/)这很简单。只需将子 div 与`float:left`or对齐`display:inline-block`。然后，每当您更改一个子 div 的宽度时，父级也会进行调整。

**更新：**

使用类似这样的东西在运行时设置 div 的宽度：

```
$("#div-a").css("width", "50px");​ 
```

更新的小提琴： http: [//jsfiddle.net/MjSfy/2/](http://jsfiddle.net/MjSfy/2/)和[http://jsfiddle.net/MjSfy/3/](http://jsfiddle.net/MjSfy/3/)

# android - Android-NDK “java.lang.UnsatisfiedLinkError”

> ID：11704920
> 
> 赞同：2
> 
> 时间：2012-07-28T21:49:50.450
> 
> 标签：android, android-ndk

我是 NDK 的新手。

我有一个具有以下功能的 cpp 文件

```
/* This is a trivial JNI example where we use a native method
 * to return a new VM String. See the corresponding Java source
 * file located at:
 *
 *   apps/samples/hello-jni/project/src/com/example/hellojni/HelloJni.java
 */
JNIEXPORT jstring JNICALL
Java_com_some_player_MainActivity_stringFromJNI( JNIEnv* env,
                                                  jobject thiz )
{
    return env->NewStringUTF("Hello from JNI!");
} 
```

调用它的 Java 类

```
package com.some.player;
public class MainActivity extends Activity {
    public native String stringFromJNI();
    static {
        System.loadLibrary("hello-jni");
    }

     @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       TextView tv = (TextView) findViewById(R.id.textView);
       tv.setText(stringFromJNI());
    }
} 
```

制作文件

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := hello-jni
LOCAL_SRC_FILES := hello-jni.cpp

include $(BUILD_SHARED_LIBRARY) 
```

问题是，当我调用本机函数时，我得到了

```
07-28 23:42:34.256: E/AndroidRuntime(32398): java.lang.UnsatisfiedLinkError: stringFromJNI 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T22:11:04.290

其实我发现我需要添加

```
extern "C" {
    JNIEXPORT jstring JNICALL Java_com_some_player_MainActivity_stringFromJNI( JNIEnv* env, jobject thiz )
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T22:07:17.883

方法参数中的本机代码存在错误

`return env->NewStringUTF("Hello from JNI!");`

代替

`return (*env)->NewStringUTF(env, "Hello from JNI !");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-25T06:41:27.483

要在 cpp 中使用 c 调用约定，您可以使用

```
extern "C" { /*methods*/ }; 
```

例如：

```
#include <jni.h>
#include <string>
extern "C" {
JNIEXPORT jstring JNICALL
Java_com_test_ndk_ndktest_MainActivity_stringFromJNI(
        JNIEnv *env,
        jobject /* this */) {
    std::string hello = "Hello from C++";
    return env->NewStringUTF(hello.c_str());
}
JNIEXPORT jint JNICALL
Java_com_test_ndk_ndktest_MainActivity_add(JNIEnv *env, jobject instance, jint a, jint b) {
    return (a + b);
}
}; 
```

# c# - Winforms 在另一个线程中更新 DataGridView

> ID：11704921
> 
> 赞同：0
> 
> 时间：2012-07-28T21:49:56.213
> 
> 标签：c#, multithreading, winforms, user-interface

你好大师我在表单中有一个 DataGridView 对象。在服务类中，我有一个方法

```
Form.CheckForIllegalCrossThreadCalls = false;
Thread tr1 =
    new Thread(() =>
    {
        List<Musteri> list = null;
        IEnumerable<Musteri> result = from Musteri m in Db4OService.Database
                                      where (
                                                m.servisAdi.Contains(text) ||
                                                m.il.Contains(text))
                                      select m;
       list = result.ToList<Musteri>();

        DataGridView dataGridView = ((DataGridView)sayfa.Controls.Find("dataGridView1", false)[0]);
        DataTable dt = ListToDataTable(list);
        try
        {
            dataGridView.DataSource = dt;
            dataGridView.Refresh();
        }
        catch (Exception e)
        {
                Console.Write(e);

        } 

    });
tr1.Start(); 
```

此方法每次都从 textBox 的 textChanged 方法调用。所以我想让打字时流畅。当我在一个线程中做所有事情时，我必须等待搜索方法完成才能输入另一个字母。我的方法不起作用:(欢迎任何帮助。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:43:25.990

不想在这里学习您的英语，但尚不清楚您帖子中的代码是在 TextChangedEvent 上调用还是代码生成 TextChangeEvent。此外，该代码是否适用于生涩的打字？我希望代码有问题。

1.  我将假设在您的 TextChangedEvent 上调用提供的代码，该代码从数据库中查找数据并填充网格。
2.  我看到您正在尝试从非 GUI 线程更新您的网格。首先，从非 GUI 线程更新 GUI 是个坏主意。
3.  根据我对您想要做的事情的理解，最好让这个线程成为一个可跟踪的变量，所以当用户输入一些文本时，如果您的搜索仍然没有返回，您可能想要停止您的数据库查找，因为用户可能输入了更多内容。底线是用户键入可能会更改您的搜索条件和显示结果，因此您应该能够取消搜索和网格更新，否则您只是在浪费资源搜索用户不再感兴趣的内容。

下面是我将如何编码：

```
bool searching = false;
object searchThreadLock = new object();
Thread searchThread = null;

void TextChangedEvent() {
    lock (searchThreadLock) {
        if (searching && searchThread != null && searchThread.IsAlive)
            searchThread.Abort();

        lookupForData();
    }
}

void lookupForData() {
    searchThread = new Thread( () => {
        // Your code to retrieve relevant data from DB based on your TextChangedEvent goes here
        searching = true;
        try {
            List<Musteri> list = null;
            IEnumerable<Musteri> result = 
                from Musteri m in Db4OService.Database
                    where (
                        m.servisAdi.Contains(text) ||
                        m.il.Contains(text))
                    select m;
            list = result.ToList<Musteri>();
            DataTable dt = ListToDataTable(list);
            updateGrid(dt);
        } catch (ThreadAbortException ex) {
        } finally {
            searching = false;
        }
    } );
    searchThread.start();
}

void updateGrid(DataTable dt) {
    DataGridView dataGridView = ((DataGridView)sayfa.Controls.Find("dataGridView1", false)[0]);
    if (dataGridView.InvokeRequired) {
        dataGridView.BeginInvoke(new Action<DataTable>(updatdeGrid), dt);
        return;
    }

    // Your code to update the grid goes here
    dataGridView.DataSource = dt;
    dataGridView.Refresh();
} 
```

PS：请注意 Thread.Abort 通常是一个坏主意，它应该由您的应用程序特定逻辑代替以停止数据库搜索。我已将其落实到位，因为我不确定如何正确停止您的 LINQ 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T08:41:06.810

```
Form.CheckForIllegalCrossThreadCalls = false; 
```

这很糟糕，学会不要使用它。永远永远永远永远。阅读有关调用的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T21:59:17.310

[您将不得不使用BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)将工作分开并由另一个线程完成， 这将免费帮助文本框在后台完成工作时保持解冻状态

# ruby-on-rails - 控制器中的 Rails SystemStackError（堆栈级别太深）

> ID：11704925
> 
> 赞同：1
> 
> 时间：2012-07-28T21:50:58.553
> 
> 标签：ruby-on-rails, ruby, stack-overflow

我有一个简单的控制器在 Twitter 上进行搜索。我的搜索在 Rails 控制台上运行良好，但是当我运行它时出现堆栈溢出错误并且无法弄清楚发生了什么。我的日志文件显示了一遍又一遍运行的索引方法。

```
Controller 

class TimelinesController < ApplicationController
  def index
    @timelines = Twitter.search("Ford Edge", :rpp => 3, :result_type => "recent")
    respond_to do |format|
        format.html index.html.erb
        format.json { render json: @timelines }
    end
  end
end

View

<% @timelines.each do |timeline| %>
  <tr>
    <td><%= timeline.from_user %></td>
    <td><%= timeline.text %></td>
  </tr>
<% end %> 
```

欣赏任何想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:00:46.060

我认为这是违规行：`format.html index.html.erb`

`index.html.erb`不在引号中，因此它看起来像是对 ruby​​ 的一系列方法调用，其中第一个是`index`，它导致了无限递归。

当您在没有参数的情况下调用时，Rails 应该为您呈现正确的模板`format.html`，如果没有，请确保将模板名称包含在引号中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T22:05:11.657

尝试：

@时间线。**结果**.each{...

;)

# database - 构建期间未分配 Django 通用外键字段，但可以在构建后分配

> ID：11704926
> 
> 赞同：1
> 
> 时间：2012-07-28T21:51:01.647
> 
> 标签：database, django, generic-foreign-key

我对 Django 通用外键有一个奇怪的问题，如果我使用构造函数分配它，通用字段将不会粘住。它只会在施工后坚持。我找不到有关此的任何信息，因此我正在为此创建一个新问题。任何想法为什么会发生这种情况？

下面是我的课

```
class Answer(models.Model):
    question = models.OneToOneField(Question)
    date = models.DateField()

    # Generic relation to contain heterogeneous data of class *Data
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    answer_data = generic.GenericForeignKey('content_type', 'object_id')

    def __unicode__(self):
        question = ""
        if hasattr(self, 'question'):
            question = self.question.__unicode__()
        else:
            question = "Question undefined"

        answer = ""
        if hasattr(self, 'answer_data'):
            answer = self.answer_data.__unicode__()
        else:
            answer = "Answer undefined"

        return "Question: {" + question + "}; Answer: {" + answer + "}" 
```

这是我的 shell 会话，它演示了这个问题：

```
>>> from nequals1.models import *
>>> import datetime
>>> q = Question(text="Is this a question?")
>>> d = CharData(data="Yes, this is a question")
>>> a = Answer(question=q, date = datetime.datetime.now(), answer_data=d)
>>> a
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/Library/Python/2.7/site-packages/django/db/models/base.py", line 373, in __repr__
    u = unicode(self)
  File "/Users/kheck/PycharmProjects/neq1/nequals1/models.py", line 30, in __unicode__
    answer = self.answer_data.__unicode__()
AttributeError: 'NoneType' object has no attribute '__unicode__'
>>> a.answer_data=d
>>> a
<Answer: Question: {Is this a question?}; Answer: {Yes, this is a question}> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:27:22.447

您还没有保存`d`（或任何项目，就此而言），因此它没有可用于`object_id`通用关系字段的 id。先保存再分配给`a`.

# gallery - 缩略图和颜色框

> ID：11704928
> 
> 赞同：0
> 
> 时间：2012-07-28T21:51:07.877
> 
> 标签：gallery, thumbnails, colorbox

我正在尝试创建一个包含许多缩略图的页面，然后当您单击其中一个缩略图时，它会显示一个隐藏的图像颜色框。我已经尝试了几件事，我得到的最接近的显示在下面的代码中。问题是，一旦它到达一个缩略图下的一组图像的末尾，它就不会循环（我希望它循环）-而是移动到第二个缩略图下包含的下一组隐藏图像，依此类推。

感谢任何建议，如果代码到处都是，请随时告诉我。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'/>
    <title>ColorBox Examples</title>
    <link rel="stylesheet" type="text/css" href="css/page.css">
    <link rel="stylesheet" href="colorbox.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7\. /jquery.min.js"></script>
    <script src="../colorbox/jquery.colorbox.js"></script>
    <script>
        $(document).ready(function(){
            //Examples of how to assign the ColorBox event to elements
            $(".group1").colorbox({rel:'group1'});
            $(".group2").colorbox({rel:'group2', transition:"fade"});
            $(".group3").colorbox({rel:'group3', transition:"none", width:"75%", height:"75%"});
            $(".group4").colorbox({rel:'group4', slideshow:true});
            $(".ajax").colorbox();
            $(".youtube").colorbox({iframe:true, innerWidth:425, innerHeight:344});
            $(".iframe").colorbox({iframe:true, width:"80%", height:"80%"});
            $(".inline").colorbox({inline:true, width:"50%"});
            $(".callbacks").colorbox({
                onOpen:function(){ alert('onOpen: colorbox is about to open'); },
                onLoad:function(){ alert('onLoad: colorbox has started to load the targeted content'); },
                onComplete:function(){ alert('onComplete: colorbox has displayed the loaded content'); },
                onCleanup:function(){ alert('onCleanup: colorbox has begun the close process'); },
                onClosed:function(){ alert('onClosed: colorbox has completely closed'); }
            });

            //Example of preserving a JavaScript event for inline calls.
            $("#click").click(function(){ 
                $('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text("Open this window again and this message will still be here.");
                return false;
            });
        });
    </script>
</head>
<body>
            <div id = "imgHolder">
    <a class="group1" title="Photo1" href="../content/Largeimg1.jpg"><img alt="" src="../content/img1.jpg"></a>
    <a class="group1 hidden" title="Photo2" href="../content/Largeimg2.jpg"></a>
    <a class="group1 hidden" title="Photo3" href="../content/Largeimg3.jpg"></a>
    <a class="group1 hidden" title="Photo4" href="../content/Largeimg4.jpg"></a>
    <a class="group1 hidden" title="Photo5" href="../content/Largeimg5.jpg"></a>
    <a class="group1 hidden" title="Photo6" href="../content/Largeimg6.jpg"></a>
    <a class="group1" title="Photo7" href="../content/Largeimg2.jpg"><img alt="" src="../content/img2.jpg"></a>
    <a class="group1 hidden" title="Photo8" href="../content/Largeimg8.jpg"></a>
    <a class="group1 hidden" title="Photo9" href="../content/Largeimg9.jpg"></a>
    <a class="group1 hidden" title="Photo10" href="../content/Largeimg10.jpg"></a>
    <a class="group1 hidden" title="Photo11" href="../content/Largeimg11.jpg"></a>
    <a class="group1 hidden" title="Photo12" href="../content/Largeimg12.jpg"></a>
    <a class="group1" title="Photo13" href="../content/Largeimg3.jpg"><img alt="" src="../content/img3.jpg"></a>
    <a class="group1 hidden" title="Photo14" href="../content/Largeimg14.jpg"></a>
    <a class="group1 hidden" title="Photo15" href="../content/Largeimg15.jpg"></a>
    <a class="group1 hidden" title="Photo16" href="../content/Largeimg16.jpg"></a>
    <a class="group1 hidden" title="Photo17" href="../content/Largeimg17.jpg"></a>
    <a class="group1 hidden" title="Photo18" href="../content/Largeimg18.jpg"></a>
    <a class="group1" title="Photo19" href="../content/Largeimg4.jpg"><img alt="" src="../content/img4.jpg"></a>
    <a class="group1 hidden" title="Photo20" href="../content/Largeimg20.jpg"></a>
    <a class="group1 hidden" title="Photo21" href="../content/Largeimg21.jpg"></a>
    <a class="group1 hidden" title="Photo22" href="../content/Largeimg22.jpg"></a>
    <a class="group1 hidden" title="Photo23" href="../content/Largeimg23.jpg"></a>
    <a class="group1 hidden" title="Photo24" href="../content/Largeimg24.jpg"></a>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:59:19.790

提供与属性`rel`相同的`data-group`属性。

```
$(".photo").colorbox({ rel: $(this).data('group') }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:02:29.170

您需要一些东西来表明您希望这些链接如何组合在一起。这是一种方法的示例：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'/>
    <title>ColorBox Examples</title>
    <link rel="stylesheet" type="text/css" href="css/page.css">
    <link rel="stylesheet" href="colorbox.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7\. /jquery.min.js"></script>
    <script src="../colorbox/jquery.colorbox.js"></script>
    <script>
        $(document).ready(function(){
            $(".photo").colorbox({rel:function(){
                return $(this).attr('data-group');
            }});
        });
    </script>
</head>
<body>
    <div id = "imgHolder">
    <a data-group='1' class="photo" title="Photo1" href="../content/Largeimg1.jpg"><img alt="" src="../content/img1.jpg"></a>
    <a data-group='1' class="photo hidden" title="Photo2" href="../content/Largeimg2.jpg"></a>
    <a data-group='1' class="photo hidden" title="Photo3" href="../content/Largeimg3.jpg"></a>
    <a data-group='1' class="photo hidden" title="Photo4" href="../content/Largeimg4.jpg"></a>
    <a data-group='1' class="photo hidden" title="Photo5" href="../content/Largeimg5.jpg"></a>
    <a data-group='1' class="photo hidden" title="Photo6" href="../content/Largeimg6.jpg"></a>
    <a data-group='2' class="photo" title="Photo7" href="../content/Largeimg2.jpg"><img alt="" src="../content/img2.jpg"></a>
    <a data-group='2' class="photo hidden" title="Photo8" href="../content/Largeimg8.jpg"></a>
    <a data-group='2' class="photo hidden" title="Photo9" href="../content/Largeimg9.jpg"></a>
    <a data-group='2' class="photo hidden" title="Photo10" href="../content/Largeimg10.jpg"></a>
    <a data-group='2' class="photo hidden" title="Photo11" href="../content/Largeimg11.jpg"></a>
    <a data-group='2' class="photo hidden" title="Photo12" href="../content/Largeimg12.jpg"></a>
    <a data-group='3' class="photo" title="Photo13" href="../content/Largeimg3.jpg"><img alt="" src="../content/img3.jpg"></a>
    <a data-group='3' class="photo hidden" title="Photo14" href="../content/Largeimg14.jpg"></a>
    <a data-group='3' class="photo hidden" title="Photo15" href="../content/Largeimg15.jpg"></a>
    <a data-group='3' class="photo hidden" title="Photo16" href="../content/Largeimg16.jpg"></a>
    <a data-group='3' class="photo hidden" title="Photo17" href="../content/Largeimg17.jpg"></a>
    <a data-group='3' class="photo hidden" title="Photo18" href="../content/Largeimg18.jpg"></a>
    <a data-group='4' class="photo" title="Photo19" href="../content/Largeimg4.jpg"><img alt="" src="../content/img4.jpg"></a>
    <a data-group='4' class="photo hidden" title="Photo20" href="../content/Largeimg20.jpg"></a>
    <a data-group='4' class="photo hidden" title="Photo21" href="../content/Largeimg21.jpg"></a>
    <a data-group='4' class="photo hidden" title="Photo22" href="../content/Largeimg22.jpg"></a>
    <a data-group='4' class="photo hidden" title="Photo23" href="../content/Largeimg23.jpg"></a>
    <a data-group='4' class="photo hidden" title="Photo24" href="../content/Largeimg24.jpg"></a>
    </div>
</body>
</html> 
```

# jquery-mobile - jQuery Mobile ChangePage 替代方案

> ID：11704930
> 
> 赞同：2
> 
> 时间：2012-07-28T21:51:21.723
> 
> 标签：jquery-mobile

有没有办法在 jQuery Mobile 中更改页面但仍有 $(document).ready 函数启动？我在调用 $.mobile.changePage 时似乎遇到了一些问题，因为我的页面并不总是完全加载......

或者不是寻找changePage的替代品，有没有办法在页面被changePage加载到DOM后刷新页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:22:59.643

**这个答案是错误且无用的，所以这是一个真正可以帮助人们的答案...... - Jasper**

文档：http: [//jquerymobile.com/demos/1.1.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)

具体来说，您正在寻找 reloadPage 选项：

> **reloadPage** ( *boolean* , default: false) 强制重新加载页面，即使它已经在页面容器的 DOM 中。仅当 changePage() 的 'to' 参数是 URL 时使用。

所以，这样的事情会起作用：

```
$.mobile.changePage('/some/url.html', {
    reloadPage : true
}); 
```

您还可以绑定到特定伪页面的 pageinit 事件，以便专门为这些伪页面运行代码：

```
$(document).delegate('#page-1', 'pageinit', function () {
    //run code for #page-1 pseudo-page
}).delegate('#page-2', 'pageinit', function () {
    //run code for #page-2 pseudo-page
}).delegate('#page-3', 'pageinit', function () {
    //run code for #page-3 pseudo-page
}); 
```

然后，我建议将整个站点的所有代码放在一个 .js 文件中，并将其包含在每个文档的任何 data-role="page" 或 data-role="dialog" 元素中或之外。这样，无论用户如何登陆网站或四处导航，您网站的代码都将始终存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T22:02:13.890

在 jQuery Mobile 中，ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序（即使用 限定的所有事件`$(document).ready()`）仅针对第一页执行。要在显示页面时执行特定事件，您可以尝试将其放在特定页面上，

```
$(document)
  .unbind("pageshow.somenamespace")
  .bind("pageshow.somenamespace", 
    function() {
      // code here
    }
  ); 
```

# facebook - 尝试将照片直接发布到新闻提要

> ID：11704931
> 
> 赞同：0
> 
> 时间：2012-07-28T21:51:24.530
> 
> 标签：facebook, photo

我可以将我的 android 应用程序中的照片发布到我的 Facebook 墙上，并且它被放置在一个应用程序专用相册中。为了让我的朋友能够看到这篇文章，我必须通过点击照片帖子上的分享从 FB 内部分享它。

我想要的是能够将照片直接发布到新闻提要以及消息和名称参数。

我正在使用我/照片，但我不应该使用我/饲料吗？我正在为图片使用 putbytearray 方法。

这在不同的论坛上上下讨论过，但我还没有找到好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:21:27.337

您所描述的可以通过 Facebook 操作来完成。但是，fb 要求照片是用户生成的。您必须向 fb 申请批准才能执行此操作。

请阅读： [https ://developers.facebook.com/docs/opengraph/usergeneratedphotos](https://developers.facebook.com/docs/opengraph/usergeneratedphotos)

# php - 由于身份验证问题，无法发布到 Facebook 墙上？

> ID：11704935
> 
> 赞同：1
> 
> 时间：2012-07-28T21:52:38.073
> 
> 标签：php, facebook

我无法将以下代码发布到用户 ID 为 514559322 的用户的墙上。但是，如果我将 $uid 的值替换为字符串“me”，我可以发布到我自己的墙上。

```
<?php
require_once "../src/facebook.php";

$app_id = "my app id";
$app_secret = "my app secret";
$uid = 514559322;

// Init facebook api.
$facebook = new Facebook(array(
        'appId' => $app_id,
        'secret' => $app_secret,
        'cookie' => true
));

// Get the url to redirect for login to facebook
// and request permission to write on the user's wall.
$login_url = $facebook->getLoginUrl(
    array('scope' => 'publish_stream')
);

// If not authenticated, redirect to the facebook login dialog.
// The $login_url will take care of redirecting back to us
// after successful login.
if (! $facebook->getUser()) {
    echo <<< EOT
<script type="text/javascript">
top.location.href = "$login_url";
</script>;
EOT;

    exit;
}

// Do the wall post.
$facebook->api("/$uid/feed", "post", array(
    message => "Hello win95",
    picture => "http://cdn.papyimg.com/wp-content/uploads/2011/03/Windows-95-500x312.png",
    link => "http://en.wikipedia.org/wiki/Windows_95",
    name => "Go windows 95",
    caption => "Caption - this is the best operating system in the world!"
));
?> 
```

如何允许我的 php 脚本使用 uid 514559322 发布用户墙？

在 api 调用周围添加一个 try catch 循环后，这是我得到的异常消息：

```
OAuthException: (#1) An error occured while creating the share 
```

那么在我的代码中，我在哪里提供身份验证信息？或适当的身份验证令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:31:21.783

您的用户需要为“offline_access,publish_stream”验证您的应用程序（尽管现在已被替换，请参见此处[http://developers.facebook.com/roadmap/offline-access-removal/](http://developers.facebook.com/roadmap/offline-access-removal/)）。

然后，您可以在 api 调用中注入令牌

```
$res = $facebook->api('/me/feed', 'POST', $post); 
```

其中 $post 是 $access_token 和 $message 的数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T22:33:03.813

你忘记了`access_token`参数：

```
// Do the wall post.
$facebook->api("/$uid/feed", 'post', array(
    'access_token' => $facebook->getAccessToken(),
    'message' => "Hello win95",
    'picture' => "http://cdn.papyimg.com/wp-content/uploads/2011/03/Windows-95-500x312.png",
    'link' => "http://en.wikipedia.org/wiki/Windows_95",
    'name' => "Go windows 95",
    'caption' => "Caption - this is the best operating system in the world!"
)); 
```

或者，您需要`offline_access`许可，这不好，因为很快就会被弃用..

# mysql - 更改 php.ini 后仍然收到带有 XAMPP 错误的 mutillidae

> ID：11704939
> 
> 赞同：1
> 
> 时间：2012-07-28T21:53:13.393
> 
> 标签：mysql, xampp, penetration-testing

最近下载了 Mutillidae 和 XAMPP，在 localhost 上启动并运行它，得到了很多错误，这对于这个应用程序来说显然是正常的，可以通过修改 php.ini 中的一行来停止显示警告，只显示错误来解决。但是，我仍然遇到限制大量信息存储功能的错误。

它说它已连接到 MySQL，尽管有大量其他错误，但以下似乎是导致所有其他错误的错误：

```
Line    113
Code    0
File    /opt/lampp/htdocs/mutillidae/classes/MySQLHandler.php
Message /opt/lampp/htdocs/mutillidae/classes/MySQLHandler.php on line 108: Error  executing query: () (0) [Exception]
Trace   #0 /opt/lampp/htdocs/mutillidae/set-up-database.php(56):MySQLHandler->executeQuery('CREATE DATABASE...') #1 {main}
Diagnotic Information   CREATE DATABASE owasp10 
```

我过去只使用 SQLlite 在 Django 上进行开发，并且从未正确安装 MySQL，所以我认为这很可能是 SQL 错误，即使 XAMPP 安装得很好。我浏览了谷歌，几乎没有关于 mutillidae 中这些错误的文档。如果有人知道如何解决这个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:25:07.433

根据您粘贴的内容，它可以是以下两种情况之一：

1.  您尚未修改配置以更改 Mutillidae 附带的默认用户。但是，我认为情况并非如此，因为您会更早地看到连接错误。
2.  您尚未向正在使用的 MySQL 用户授予创建权限。您必须具体授予用户某些权限，具体取决于用户可以执行的操作。在这种情况下，特别是看看它的 mutillidae，你可以说：

    ```
    grant all privileges on *.* to 'user'@'host' 
    ```

如果这不起作用，你可以给 Jeremy Druin 发电子邮件，或者按照他的方式发送推文。他通常非常乐于帮助人们解决问题。

# javascript - 关于 d3.layout.pack() 的几个简单问题

> ID：11704940
> 
> 赞同：3
> 
> 时间：2012-07-28T21:53:35.033
> 
> 标签：javascript, json, d3.js, transitions, circle-pack

请看一下这个简单的 jsfiddle： http: [//jsfiddle.net/perikut/9qUVW/2/](http://jsfiddle.net/perikut/9qUVW/2/) （对不起，如果使用 Firefox，我不知道为什么它看起来不太好......）

![在此处输入图像描述](../Images/506f16f5d693965472be7ea12c69f431.png)

在我们的对象中，我们是否可以使用“儿童”以外的其他词来指示从何处提取数据？（我看到的所有例子都遵循这个数据结构，见下文）。我们应该在哪里指出？

我认为我的代码非常有缺陷（请参阅 jsfiddle），因为我被迫声明两次“组”参数以便从组/父项中显示/隐藏子项。

没有办法直接选择 group1 的子节点并应用动画吗？我以后想要一个更复杂的数据结构，所以我需要先了解这种基础知识。

当前数据结构：

```
data = {
name:'root',
group:'no_group',
children:[
    {
        group: 'group1',
        children:[
            { group:'group1',name:'a1',value:10,color:'red' },
            { group:'group1',name:'a2',value:40,color:'lightcoral' }
        ]
    }
    , { .... } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:56:49.193

在 D3 的[分层布局](https://github.com/mbostock/d3/wiki/Hierarchy-Layout)中，所有节点都填充有一组[标准属性](https://github.com/mbostock/d3/wiki/Hierarchy-Layout#wiki-nodes)，包括“父”属性。因此，您可以避免指定“组”属性，而在选择特定节点的子节点时使用“父”：

```
d3.selectAll("circle").filter(function(d) { return d.parent.name === "foo"; }); 
```

或者，如果您有对节点对象本身的引用，则可以按对象引用进行比较。

```
var parent = nodes.filter(function(d) { return d.name === "foo"; });
d3.selectAll("circle").filter(function(d) { return d.parent === parent; }); 
```

这里我假设每个节点都有一个“名称”属性。

您还提到使用从不同属性中检索子项。是的，这可以使用[“children”访问器](https://github.com/mbostock/d3/wiki/Hierarchy-Layout#wiki-children)来实现。请注意，这会将节点的子节点存储在该节点上名为“children”的属性中，从而覆盖可能已经存在的任何内容。

# django - Google Appengine、Django、Haystack 和 CloudSQL

> ID：11704945
> 
> 赞同：1
> 
> 时间：2012-07-28T21:54:19.493
> 
> 标签：django, google-app-engine, django-haystack, google-cloud-sql

有谁知道使用 cloudsql db 在 appengine 上使用什么 haystack 后端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:39:22.287

我有一个类似的问题，并没有找到任何 GAE 友好的方式来使用 Django Haystack。你也许可以用 Whoosh 做一些事情，因为它是纯 Python，但我有疑问。

另一种方法是使用[Django nonrel search](http://www.allbuttonspressed.com/projects/nonrel-search)。它不包含 Haystack 及其相关后端的所有功能，但它可能会提供您需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T20:04:22.923

尝试托管的 Elastic Search 解决方案，例如 searchbox.io。[有关让它与 Haystack 一起工作的](http://dev.searchbox.io/python/)更多信息，请点击此处。

# c# - 点击功能生成元素

> ID：11704947
> 
> 赞同：0
> 
> 时间：2012-07-28T21:54:23.993
> 
> 标签：c#, wpf, events, user-interface

我有一个通过代码填充的网格。这是我的实现：

```
for (int i = 1; i <= 3; i++)
{
     for (int j = 0; j < 3; j++)
     {
          Image oImage = new Image();
          Window.myGrid.Children.Add(oImage);

          oImageSource.UriSource = oImageUri;

          oImage.Source = oImageSource;

          Grid.SetRow(oImage, i);
          Grid.SetColumn(oImage, j);
     }
} 
```

我正在寻找一个解决方案，用它我将能够做下一个：

当有人点击`oImage`我作为孩子添加的对象时，将触发一个函数，并且插槽的**行**和**列**将是它的参数。

因此，如果我有下一个网格（每个数字代表一个附加到网格的对象）：

## 1 | 2 | 3

## 4 | 5 | 6

## 7 | 8 | 9

点击`9`会触发功能`func(2, 2)`（行和列的索引为2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:13:05.090

您可以利用 lambda 表达式的*闭包*特性来完成这项工作，但您必须小心。

在您的内部`for`循环中，您执行以下操作：

```
Image oImage = new Image();
Window.myGrid.Children.Add(oImage);

var row = i;
var col = j;
oImage.MouseUp += (sender, args) => func(row, col); 
```

这会将指定的 lambda 表达式附加到实例的`MouseUp`事件`Image`，这将使用适当的值调用您的函数。lambda 表达式将关闭这些变量，即使在它们离开作用域之后，它也会记住它们的值。

这里的关键是您需要使用*本地范围*的变量作为参数。通过这样做，您将创建一个新副本，`row`并且`col`每次都通过循环。更具体地说，您***不能***使用`func(i,j)`- lamba 将“记住”最后一个值，`i`并且`j`将始终调用`func(3,3)`所有 9 个图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T04:47:16.373

您可以将图像绑定到处理程序，例如

```
oImage.MouseUp +=new MouseButtonEventHandler(oImage_MouseUp); 
```

然后在处理程序中，您可以使用 Grid.GetColumn 和 Grid.GetRow 来获取属性

```
private void oImage_MouseUp(object sender, MouseButtonEventArgs e)
    {
        Image bb = (Image)sender;
        func(Grid.GetRow(bb), Grid.GetColumn(bb));
    } 
```

# ios - 关于枚举的 iOS 警告

> ID：11704950
> 
> 赞同：0
> 
> 时间：2012-07-28T21:54:33.423
> 
> 标签：ios, for-loop, nsstring, nsarray, enumeration

```
NSString *arrayOfStrings = [NSArray arrayWithObjects:@"http://", @"https://", nil];
NSString *stringToSearchWithin = webpageURLLabel.text;

BOOL found=NO;
for (NSString *s in arrayOfStrings) 
```

for 循环说

> 集合表达式类型“NSString *”可能无法响应“countByEnumeratingWithState:objects:count:”

我如何解决它？现在它只是一个警告，但我宁愿看不到任何警告

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T21:57:10.740

您将 arrayOfStrings 声明为 NSString。它应该是 NSArray

# java - 播放框架。无需编译

> ID：11704951
> 
> 赞同：6
> 
> 时间：2012-07-28T21:55:03.953
> 
> 标签：java, web-applications, compilation, playframework, jit

我被介绍到 Play 框架，我发现其中一件令人惊奇的事情是不需要编译项目。您只需要保存编辑的文件并重新加载网页。

我被告知 Java 源代码被编译为字节码，然后使用 JIT 编译器进行编译，那么 Play 框架内部的魔力是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-29T07:10:05.030

在 DEV 模式下运行时，Play 通过检查 java 文件的最后修改日期，并将它们与运行时生成的 .class 文件交叉引用来工作。如果它发现某些东西发生了变化，那么它会在运行时重新编译它们。

在 Play 1.x 中 - 使用 eclipse jdt 编译器 (org.eclipse.jdt.internal.compiler.Compiler) 完成重新编译。如果您想查看 Play 1.x 中的代码，只需查看以下类 - [https://github.com/playframework/play/blob/master/framework/src/play/classloading/ApplicationCompiler.java](https://github.com/playframework/play/blob/master/framework/src/play/classloading/ApplicationCompiler.java)

在 Play 2.x 中，Play 似乎是通过与 SBT 工具互连来实现的。看看这个 - [https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/core/system/ApplicationProvider.scala](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/core/system/ApplicationProvider.scala)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T22:12:15.040

尽管您没有用最简单的语言提到哪个版本的 Play 让您如此惊讶，但可以这样描述：Play in`development mode`监视属于您的应用程序的所有文件，如果有任何更改，它会重新编译所需的部分。因此 DEV 不应该用于生产 - 因为它是性能的冗余损失。否则：当您在生产模式下启动应用程序时，它将避免立即重新编译，但会获得性能。

在 Play 2 运行应用程序是开发模式完成

```
play run 
```

或者

```
play ~run 
```

（第一个命令在下一页命中后重新编译代码，第二个在下一个文件更改后）

在生产模式下运行应用程序可以完成

```
play start 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T22:09:24.850

如果您谈论的是 Play framework 1.x，它有一个应用程序类管理器，它会自动加载 java 源文件并将其编译为字节码（使用 Eclipse Java Compiler），此外它还会使用 Javassist 增强编译后的代码。检查[https://github.com/playframework/play/tree/master/framework/src/play/classloading](https://github.com/playframework/play/tree/master/framework/src/play/classloading)中的代码。

# javascript - 提交表单 onChange 不起作用

> ID：11704952
> 
> 赞同：0
> 
> 时间：2012-07-28T21:55:04.377
> 
> 标签：javascript, html

任何想法为什么这不起作用？（提交到当前页面的空操作）

```
 <form action="" method="post" onchange="this.form.submit();">
        <span>Show by page</span>
        <select id="catfilternumber" name="lpp">
            <option value="6">6</option>
            <option value="12">12</option>
            <option value="24">24</option>
        </select>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:56:54.173

您的 onchange 必须在 select 而不是在表单上

# php - 从列表中获取最近的目录

> ID：11704954
> 
> 赞同：0
> 
> 时间：2012-07-28T21:55:15.580
> 
> 标签：php, list, directory, closest

我有一个动态的目录数组，如下所示：

```
array(4) {
  [0]=>
  string(34) "C:\www\www\mb\core"
  [1]=>
  string(59) "C:\www\www\mb\core\plugins\enabled\response"
  [2]=>
  string(56) "C:\www\www\mb\core\plugins\enabled\tests"
  [3]=>
  string(52) "C:\www\www\mb\core\templates\default"
} 
```

我还有另一个目录要测试：`C:\www\www\mb\core\plugins\enabled\includes`

我需要通过一个函数知道哪个目录最接近这个目录。这里的一切都是未知的和动态的。我已经尝试过 foreach+strpos+string size 但它变得如此丑陋，以至于我停下来来这里寻求帮助，但它也没有奏效。:-P

在此先感谢并为我的英语不好感到抱歉，

维尼修斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:00:43.607

好吧，我会完全按照你的描述做……

```
function closest_path($path, $paths) {
    $maxMatch = null;
    $maxMatchLength = 0;

    foreach($paths as $item) {
        if(strlen($item) > $maxMatchLength && strpos($path, $item) === 0) {
            $maxMatch = $item;
            $maxMatchLength = strlen($item);
        }
    }

    return $maxMatch;
} 
```

# backbone.js - Backbone 应该如何监听文件上传？

> ID：11704957
> 
> 赞同：0
> 
> 时间：2012-07-28T21:55:25.903
> 
> 标签：backbone.js, backbone-events, backbone-views

我使用隐藏的 iframe 和 javascript 编写了一个按钮文件上传来提交表单。我试图让主干在它成功时进行监听，这样我就可以为要插入页面的图像创建一个新的 div，但我对如何监听事件还很陌生。我的方法非常原始，所以反馈会很棒——

提交文件后，PHP 将上传到数据库，完成后会将“成功”发送到 iframe。

Backbone，当 Upload 被点击时，将在一定的时间间隔通过 Jquery 检查隐藏 iframe 中的 Success 或 Failed，然后在看到 html 中的文本后为视图创建一个新的广告。

这似乎是一种非常糟糕的处理方式，但我找不到优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T18:08:52.750

为什么需要 Backbone 来监听它？通常，在您的上传请求之后，您应该有“成功”回调来完成所有相关工作。如果您出于某种原因必须使用 Backbone 工具，只需发出自定义事件 model.trigger('uploadDone'))，然后在 model.on('uploadDone', function(){}) 某处获取监听器

# java - OpenGL 元素不可见

> ID：11704958
> 
> 赞同：1
> 
> 时间：2012-07-28T21:55:28.667
> 
> 标签：java, android, opengl-es, glsurfaceview

我正在尝试制作小型 3D 场景，其中有 4 个可以用户旋转和放大/缩小的金字塔。

我写了以下代码。它工作得很好，但是当我将金字塔延迟到远处（-100 个单位）时，它们不会被绘制。我不知道为什么。glTranslatef() 有一些限制吗？

```
 public class PrespectiveView extends GLSurfaceView implements GLSurfaceView.Renderer
    {
        MainActivity thiz;
        Triag t = new Triag();
        public PrespectiveView(MainActivity a)
        {
            super(a);
            thiz = a;
            setRenderer(this);
        }

        float _width = 320, _height = 462;

        public void onSurfaceCreated(GL10 gl, EGLConfig arg1)
        {
            gl.glMatrixMode(GL10.GL_PROJECTION);
            float size = .01f * (float) Math.tan(Math.toRadians(45.0) / 2); 
            float ratio = _width / _height;
            gl.glFrustumf(-size, size, -size/ratio, size/ratio, 0.1f, 100.0f);
            gl.glMatrixMode(GL10.GL_MODELVIEW);
            gl.glEnable(GL10.GL_DEPTH_TEST);
            gl.glClearColor(0.5f, 0.8f, 0.8f, 1f);
            gl.glEnable(GL10.GL_CULL_FACE);
            gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
            gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
        }

        public void onSurfaceChanged(GL10 gl, int arg1, int arg2)
        {
            _width = arg1;
            _height = arg2;
            gl.glViewport(0, 0, arg1, arg2);
        }

        float[][] transArr = {{-1f,1f, 0f},{1f,1f, -1f},{-1f,-1f, -2f},{1f,-1f, -3f}};
        public void onDrawFrame(GL10 gl)
        {
            gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
            gl.glLoadIdentity();
            gl.glTranslatef(0f, 0f, -50f+CameraDist);
            gl.glRotatef(CameraAX, 1f, 0f, 0f);
            gl.glRotatef(CameraAY, 0f, 1f, 0f);
            for(int i = 0; i < 4; i++)
            {
                gl.glPushMatrix();
                gl.glTranslatef(transArr[i][0], transArr[i][1], 0);
                t.draw(gl);
                gl.glPopMatrix();
            }
            thiz.write(""+CameraDist);
        }
        boolean UpDown;
        float CameraAX = 0, CameraAY = 0, CameraDist = 0, tempX, tempY;
        @Override public boolean onTouchEvent(MotionEvent e)
        {
            if(e.getAction() == MotionEvent.ACTION_DOWN)
            {
                tempX = e.getX();
                tempY = e.getY();
                UpDown = e.getY() > _width/2;
                return true;
            }

            if(UpDown)
            {
                CameraAY -= (tempX-e.getX())/5;
                CameraAX -= (tempY-e.getY())/5;
            }
            else
            {
                CameraDist -= (tempY-e.getY())/2;
            }
            tempX = e.getX();
            tempY = e.getY();

            return true;   
        }
    }

//Triag draw
public void draw(GL10 gl)
{
   gl.glColor4f(1, 1, 1, 1);
   gl.glVertexPointer(3, GL10.GL_FLOAT, 0, f);
   gl.glColorPointer(4, GL10.GL_FLOAT, 0, c);
   gl.glDrawElements(GL10.GL_TRIANGLES, 12, GL10.GL_UNSIGNED_SHORT, s);
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:38:17.913

您正在将金字塔平移到视锥体的远剪切平面（`gl.glFrustumf(-size, size, -size/ratio, size/ratio, 0.1f, 100.0f);`线定义了这一点）。

如果您希望它更远可见，请增加远剪裁平面（当前`100.0f`），但请注意，如果您进行任何类型的深度测试，您的深度值将变得越远越不准确。如果您发现任何 z 轴冲突，请尽可能增加近剪裁平面而不剪裁世界中的对象（目前`0.1f`）。

# javascript - 每次点击在 2 个类之间切换

> ID：11704959
> 
> 赞同：0
> 
> 时间：2012-07-28T21:55:38.353
> 
> 标签：javascript, menu, onclick, toggleclass

我正在尝试解决如何在这之间进行更改：

```
 <li class="menu"> 
```

和这个：

```
 <li class="menu open"> 
```

每次点击菜单。基本上，如果关闭，则菜单在每次单击时打开，如果打开，则在每次单击时关闭

代码片段：

```
<div id="headerbar">
<div class="topbar">
  <div class="fill">
    <div class="container">

      <ul>
            <li><a href="./index.php"><img src="./img/home_icon.png" alt="Home"></a></li>
      </ul>

      <ul>
        <li class="menu">
          <a href="#" class="menu">Menu Heading</a>
        <ul class="menu-dropdown">
            <li><a href="http://google.com">Option 1</a></li>
            <li><a href="http://google.com">Option 2</a></li>
            <li><a href="http://google.com">Option 3</a></li>
            <li><a href="http://google.com">Option 4</a></li>
          </ul>
        </li>
      </ul>

    </div>
  </div>
</div>
</div> 
```

我已经阅读了一些关于 toggleClass 的帖子，但似乎无法让它工作。如果有人可以简单地为我分解它，将不胜感激！

这是来自 CSS 的剪辑：

```
.topbar div > ul a.menu:hover,
.nav a.menu:hover,
.topbar div > ul li.open .menu,
.nav li.open .menu,
.topbar div > ul .dropdown-toggle:hover,
.nav .dropdown-toggle:hover,
.topbar div > ul .dropdown.open .dropdown-toggle,
.nav .dropdown.open .dropdown-toggle {
  background: #444;
  background: rgba(255, 255, 255, 0.05);
}
.topbar div > ul .menu-dropdown,
.nav .menu-dropdown,
.topbar div > ul .dropdown-menu,
.nav .dropdown-menu {
  background-color: #333;
}
.topbar div > ul .menu-dropdown a.menu,
.nav .menu-dropdown a.menu,
.topbar div > ul .dropdown-menu a.menu,
.nav .dropdown-menu a.menu,
.topbar div > ul .menu-dropdown .dropdown-toggle,
.nav .menu-dropdown .dropdown-toggle,
.topbar div > ul .dropdown-menu .dropdown-toggle,
.nav .dropdown-menu .dropdown-toggle {
  color: #ffffff;
}
.topbar div > ul .menu-dropdown a.menu.open,
.nav .menu-dropdown a.menu.open,
.topbar div > ul .dropdown-menu a.menu.open,
.nav .dropdown-menu a.menu.open,
.topbar div > ul .menu-dropdown .dropdown-toggle.open,
.nav .menu-dropdown .dropdown-toggle.open,
.topbar div > ul .dropdown-menu .dropdown-toggle.open,
.nav .dropdown-menu .dropdown-toggle.open {
  background: #444;
  background: rgba(255, 255, 255, 0.05);
}
.topbar div > ul .menu-dropdown li a,
.nav .menu-dropdown li a,
.topbar div > ul .dropdown-menu li a,
.nav .dropdown-menu li a {
  color: #999;
  text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
}
.topbar div > ul .menu-dropdown li a:hover,
.nav .menu-dropdown li a:hover,
.topbar div > ul .dropdown-menu li a:hover,
.nav .dropdown-menu li a:hover {
  background-color: #191919;
  background-repeat: repeat-x;
  background-image: -khtml-gradient(linear, left top, left bottom, from(#292929),     to(#191919));
  background-image: -moz-linear-gradient(top, #292929, #191919);
  background-image: -ms-linear-gradient(top, #292929, #191919);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #292929), color-stop(100%, #191919));
  background-image: -webkit-linear-gradient(top, #292929, #191919);
  background-image: -o-linear-gradient(top, #292929, #191919);
  background-image: linear-gradient(top, #292929, #191919);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#292929', endColorstr='#191919', GradientType=0);
  color: #ffffff;
}
.topbar div > ul .menu-dropdown .active a,
.nav .menu-dropdown .active a,
.topbar div > ul .dropdown-menu .active a,
.nav .dropdown-menu .active a {
  color: #ffffff;
}
.topbar div > ul .menu-dropdown .divider,
.nav .menu-dropdown .divider,
.topbar div > ul .dropdown-menu .divider,
.nav .dropdown-menu .divider {
  background-color: #222;
  border-color: #444;
}
.topbar ul .menu-dropdown li a, .topbar ul .dropdown-menu li a {
  padding: 4px 15px;
}
li.menu, .dropdown {
  position: relative;
}
a.menu:after, .dropdown-toggle:after {
  width: 0;
  height: 0;
  display: inline-block;
  content: "&darr;";
  text-indent: -99999px;
  vertical-align: top;
  margin-top: 8px;
  margin-left: 4px;
  border-left: 4px solid transparent;
  border-right: 4px solid transparent;
  border-top: 4px solid #ffffff;
  filter: alpha(opacity=50);
  -khtml-opacity: 0.5;
  -moz-opacity: 0.5;
  opacity: 0.5;
}
.menu-dropdown, .dropdown-menu {
  background-color: #ffffff;
  float: left;
  display: none;
  position: absolute;
  top: 40px;
  z-index: 900;
  min-width: 160px;
  max-width: 220px;
  width: 160px;
  margin-left: 0;
  margin-right: 0;
  padding: 6px 0;
  zoom: 1;
  border-color: #999;
  border-color: rgba(0, 0, 0, 0.2);
  border-style: solid;
  border-width: 0 1px 1px;
  -webkit-border-radius: 0 0 6px 6px;
  -moz-border-radius: 0 0 6px 6px;
  border-radius: 0 0 6px 6px;
  -webkit-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  -moz-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  -webkit-background-clip: padding-box;
  -moz-background-clip: padding-box;
  background-clip: padding-box;
}
.menu-dropdown li, .dropdown-menu li {
  float: none;
  display: block;
  background-color: none;
}
.menu-dropdown .divider, .dropdown-menu .divider {
  height: 1px;
  margin: 5px 0;
  overflow: hidden;
  background-color: #eee;
  border-bottom: 1px solid #ffffff;
}
.topbar .dropdown-menu a, .dropdown-menu a {
  display: block;
  padding: 4px 15px;
  clear: both;
  font-weight: normal;
  line-height: 18px;
  color: #808080;
  text-shadow: 0 1px 0 #ffffff;
}
.topbar .dropdown-menu a:hover,
.dropdown-menu a:hover,
.topbar .dropdown-menu a.hover,
.dropdown-menu a.hover {
  background-color: #dddddd;
  background-repeat: repeat-x;
  background-image: -khtml-gradient(linear, left top, left bottom, from(#eeeeee), to(#dddddd));
  background-image: -moz-linear-gradient(top, #eeeeee, #dddddd);
  background-image: -ms-linear-gradient(top, #eeeeee, #dddddd);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #eeeeee), color-stop(100%, #dddddd));
  background-image: -webkit-linear-gradient(top, #eeeeee, #dddddd);
  background-image: -o-linear-gradient(top, #eeeeee, #dddddd);
  background-image: linear-gradient(top, #eeeeee, #dddddd);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#eeeeee', endColorstr='#dddddd', GradientType=0);
  color: #404040;
  text-decoration: none;
  -webkit-box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.025), inset 0 -1px rgba(0, 0, 0, 0.025);
  -moz-box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.025), inset 0 -1px rgba(0, 0, 0, 0.025);
  box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.025), inset 0 -1px rgba(0, 0, 0, 0.025);
}
.open .menu,
.dropdown.open .menu,
.open .dropdown-toggle,
.dropdown.open .dropdown-toggle {
  color: #ffffff;
  background: #ccc;
  background: rgba(0, 0, 0, 0.3);
}
.open .menu-dropdown,
.dropdown.open .menu-dropdown,
.open .dropdown-menu,
.dropdown.open .dropdown-menu {
  display: block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:35:32.413

如果您不使用 jQuery 并且需要在纯 javascript 中执行此操作，那么您可以这样做：

```
// function called by click to toggle class on parent
function toggleMenu(item) {
    toggleClass(item.parentNode, "open");
    return(false);    // don't do other default handling for the click
}

// utility functions for adding, removing classes
function addClass(elem, cls) {
    var oldCls = elem.className;
    if (oldCls) {
        oldCls += " ";
    }
    elem.className = oldCls + cls;
}

function removeClass(elem, cls) {
    var str = " " + elem.className + " ";
    elem.className = str.replace(" " + cls + " ", "").replace(/^\s+/g, "").replace(/\s+$/g, "");
}

function hasClass(elem, cls) {
    var str = " " + elem.className + " ";
    var testCls = " " + cls + " ";
    return(str.indexOf(testCls) != -1) ;
}

function toggleClass(elem, cls) {
    if (hasClass(elem, cls)) {
        removeClass(elem, cls);
    } else {
        addClass(elem, cls);
    }
} 
```

而且，在您的 HTML 中，我向一项添加了 onclick 处理程序：

```
 <ul>
    <li class="menu">
      <a href="#" onclick="toggleMenu(this)">Menu Heading</a>
    <ul class="menu-dropdown">
        <li><a href="http://google.com">Option 1</a></li>
        <li><a href="http://google.com">Option 2</a></li>
        <li><a href="http://google.com">Option 3</a></li>
        <li><a href="http://google.com">Option 4</a></li>
      </ul>
    </li>
  </ul> 
```

工作演示：http: [//jsfiddle.net/jfriend00/2pVmF/](http://jsfiddle.net/jfriend00/2pVmF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T22:03:36.340

你已经标记了你的 question `toggleclass`，这是一个 jQuery 特定的标记。假设你真的在使用 jQuery，那么它是一个[`click`](http://api.jquery.com/click)处理程序的简单应用，并且[`toggleClass`](http://api.jquery.com/toggleClass)：

```
$(".menu").click(function() {
    // Toggle the class
    $(this).toggleClass("open");
}); 
```

如果您想做进一步的事情，而不仅仅是切换课程：

```
$(".menu").click(function() {
    var $this = $(this);

    // Toggle the class
    $this.toggleClass("open");

    // Further work
    if ($this.hasClass("open")) {
        // The menu is now open, do stuff related to that...
    }
    else {
        // The menu is now closed, do stuff related to that...
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T23:26:56.270

如果您正在使用支持[classList](https://developer.mozilla.org/en/DOM/element.classList)的现代浏览器，您可以简单地拥有：

```
 element.classList.toggle("open"); 
```

`element`您想要“切换”css 类的元素的引用在哪里。但是，`jQuery`类似的库更适用于此类操作，尤其是与事件侦听器结合使用时。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-28T22:05:41.680

如果使用 jquery 使用

```
$(".menu").addClass("open");  
$(".menu").removeClass("open"); 
```

# c# - 从 UI 窗口窗体中分离数据

> ID：11704961
> 
> 赞同：1
> 
> 时间：2012-07-28T21:56:09.167
> 
> 标签：c#, windows, forms

我正在创建我的第一个 Windows 窗体项目，我正在寻找一些建议。现在，我有两种形式。一个从用户那里获取产品信息，另一个将其显示在表格中。我有一个包含产品集合的库存类。我想表单不应该实例化这个集合，他们应该只是可以访问它。但如果是这种情况，我在哪里实例化我的库存类？一旦我这样做了，我如何将数据从这个类传递到我的表单？请注意，我不允许使用数据绑定。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:03:03.047

您可以在此处使用单例模式。[在此处](http://en.wikipedia.org/wiki/Singleton_pattern)阅读更多相关信息。例如

```
public class Inventory
{
private Inventory instance;

private Inventory() {}
public Inventory Instance { get {
if(instance == null) instance = new Inventory();
return instance;
} 
}

//other code goes here 
```

}

稍后您的每个表单都可以访问此类的单个实例并使用它`Inventory.Instance.someMethod()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T22:51:38.343

在我看来，您在询问数据访问层 (DAL)。

这种层可以在物理上（在不同的程序集中）或在逻辑上（在同一个程序集中，但不同的命名空间）内置到应用程序中，以从应用程序的其余部分抽象数据源。该数据源可以是数据库、一些外部文本文件或简单的硬编码数据。

考虑以下示例：

```
public class Product
{
    public int Id { get; set; }
}

public class ProductsDAL
{
    public static IEnumerable<Product> GetProducts()
    {
        return new List<Product>(new Product[]
            { 
                new Product() { Id = 1 },
                new Product() { Id = 2 }
            });
    }
} 
```

在上面的示例中，ProductsDAL 类将处理抽象数据的来源，远离调用它以获取该信息的对象。大多数 DAL 类都有用于创建、读取、更新和删除它们用来访问的对象的方法（通常称为 CRUD）。

```
public class MyForm : Form
{
    private IEnumerable<Product> products;

    private void MyForm_Load(object sender, EventArgs e)
    {
        this.products = ProductsDAL.GetProducts();
    }
} 
```

使用 DAL 类，您可以请求它从它使用的任何来源检索产品，并将该信息加载到您的表单中。一旦你有了这些信息，你想做什么完全取决于你。您可以很好地遍历可用的产品，并将它们加载到组合框、网格中，无论您的场景需要什么。

使用这种方法，您可以替换数据源，例如我示例中的硬编码列表，以及访问数据库和一些表以稍后提取数据。在这种情况下，您只需将 ProductsDAL.GetProducts 方法中的硬编码列表替换为您的数据库调用。

# html - 调试链接 - 链接不显示图像

> ID：11704962
> 
> 赞同：0
> 
> 时间：2012-07-28T21:56:15.170
> 
> 标签：html

我在一个网站上工作。第一个链接完美运行，但另一个没有显示图像。我试图观察代码但无法调试它。谁能帮帮我？谢谢。

```
 <a href="http://58288iexfdp1lwci0h-9r13c9s.hop.clickbank.net/?tid=COOKBOOK" target="_blank">
    <img src="cookbook.jpg" style="height: 236px; width: 320px;"/>
  </a>
  <a href="http://6b865fo5jgp9ou742emfsh9v8l.hop.clickbank.net/?tid=CB=MONEY" target="_blank">
    <img src="money.jpg" style="height: 236px; width: 320px;"/>
  <a href="http://09980bkznoq6nmbkxdfao80r34.hop.clickbank.net/?tid=ABS" target="_blank">
    <img src="abs.jpg" style="height: 236px; width: 320px;"/>
  <a href="http://f52e1kf3eoyxov2si8tj3lctde.hop.clickbank.net/?tid=DIET" target="_blank">
    <img src="diet.jpg" style="height: 236px; width: 320px;"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:59:36.857

您`<a>`没有关闭，即您缺少`</a>`不起作用的链接。

```
<a href="http://58288iexfdp1lwci0h-9r13c9s.hop.clickbank.net/?tid=COOKBOOK" target="_blank">
  <img src="cookbook.jpg" style="height: 236px; width: 320px;"/>
</a>
<a href="http://6b865fo5jgp9ou742emfsh9v8l.hop.clickbank.net/?tid=CB=MONEY" target="_blank">
  <img src="money.jpg" style="height: 236px; width: 320px;"/>
</a>
<a href="http://09980bkznoq6nmbkxdfao80r34.hop.clickbank.net/?tid=ABS" target="_blank">
  <img src="abs.jpg" style="height: 236px; width: 320px;"/>
</a>
<a href="http://f52e1kf3eoyxov2si8tj3lctde.hop.clickbank.net/?tid=DIET" target="_blank">
  <img src="diet.jpg" style="height: 236px; width: 320px;"/> 
</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T22:00:34.953

您只关闭了第一个`<a>`标签。

```
<a href="http://58288iexfdp1lwci0h-9r13c9s.hop.clickbank.net/?tid=COOKBOOK" target="_blank">
  <img src="cookbook.jpg" style="height: 236px; width: 320px;"/>
</a>
<a href="http://6b865fo5jgp9ou742emfsh9v8l.hop.clickbank.net/?tid=CB=MONEY" target="_blank">
    <img src="money.jpg" style="height: 236px; width: 320px;"/>
</a>
<a href="http://09980bkznoq6nmbkxdfao80r34.hop.clickbank.net/?tid=ABS" target="_blank">
    <img src="abs.jpg" style="height: 236px; width: 320px;"/>
</a>
<a href="http://f52e1kf3eoyxov2si8tj3lctde.hop.clickbank.net/?tid=DIET" target="_blank">
    <img src="diet.jpg" style="height: 236px; width: 320px;"/> 
</a> 
```

# sql - 模糊日期存储和搜索

> ID：11704964
> 
> 赞同：3
> 
> 时间：2012-07-28T21:56:28.777
> 
> 标签：sql, database, datetime

我正在寻找一个数据库来保存关于一组图片的元数据，我想要的一个字段是拍摄日期。我希望能够以粗略或细粒度的精度存储它，例如对于数码图片，精确到秒的时间戳将可用，但我希望能够将图片标记为在特定的年份，甚至是特定的十年（十年是我会去的最粗略的十年）拍摄，并且能够以这种方式搜索，例如请求所有 90 年代的照片，或所有 1992 年的照片或所有照片某一天的照片等

我想知道是否有一种内置的方法可以用 SQL 做到这一点，或者是否有另一种更好的方法。我考虑过分解日期并分别存储每个部分，例如有十年字段、一年字段、一个月字段等，但这似乎是一种有点笨拙的做事方式。

只要是免费的，我就不会担心我使用哪种 SQL 技术。我现在正在看H2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T21:58:54.593

对于准确日期的模糊*搜索*，您不需要单独存储每个部分。您可以调整 where 子句。对于 2012 年的所有内容：

```
SELECT * FROM yourtable
WHERE yourtime >= '2012-01-01' AND yourtime < '2013-01-01' 
```

如果你想要一个特定的日子：

```
SELECT * FROM yourtable
WHERE yourtime >= '2012-07-28' AND yourtime < '2012-07-29' 
```

或特定时间：

```
SELECT * FROM yourtable
WHERE yourtime >= '2012-07-28 13:00:00' AND yourtime < '2012-07-28 14:00:00' 
```

为了使所有这些查询高效，您可以向时间戳列添加索引。

* * *

关于如何*存储*模糊日期，一种选择是有一个日期范围：

```
id    taken_from            taken_to               title
1     2011-01-01 00:00:00   2012-01-01 00:00:00    a pic of my car last year 
```

* * *

对于模糊日期的模糊搜索，您可以执行以下操作：

![模糊日期搜索](../Images/8f6f29a9791cad77f286ca4db0897ec1.png)

在伪 SQL 中：

```
SELECT
    *,
    (LEAST(@to, taken_to) - GREATEST(@from, taken_from)) /
    (GREATEST(@to - taken_to) - LEAST(@from, taken_from)) AS relevancy
FROM yourtable
WHERE taken_to >= @from AND taken_from < @to 
```

您可能希望按相关性进行排序，并且您可能希望包括其他因素，例如某些搜索词的全文搜索返回的相关性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T22:10:45.177

你可以只用两列来做到这一点：一列用于时间戳，另一列用于精度级别。然后你必须定义一个精度比例，以及一些标准来在时间戳上编码较低精度的日期。

例如，精度标度可以是：

```
0   full timestamp
1   day
2   month
3   year
4   decade 
```

有了它，您可以像这样存储日期：

```
timestamp                 |  precision   | notes
--------------------------+--------------+---------------------
2012-07-05 14:00:00       |  0           | full precision
--------------------------+--------------+---------------------
2012-07-05 00:00:00       |  1           | precision up to day
--------------------------+--------------+---------------------
2012-07-01 00:00:00       |  2           | month and year
--------------------------+--------------+---------------------
2012-01-01 00:00:00       |  3           | year
--------------------------+--------------+---------------------
2010-01-01 00:00:00       |  4           | decade
--------------------------+--------------+--------------------- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T22:47:35.313

我过去使用过 CHAR 和 VARCHAR，用问号或破折号替换缺失的部分。问号表示“未知”，破折号表示“不适用”。事实证明，这对于用户（复杂诉讼中的秘书和律师助理）来说足够直观，对于律师来说足够灵活，并且分类合理。

这*确实*意味着您的“日期”不再是 SQL 日期。也就是说，日期/时间算术和间隔兼容性在它完全有效的情况下的鲁棒性要低得多。（什么是“1960 年代加上 20 天？”是更长的十年，还是变化的十年？）这是否重要取决于应用程序。我认为这对您的应用程序来说不是问题。

详细信息和注意事项在[dba.stackexchange.com上](https://dba.stackexchange.com/a/6066/1064)

# python - AES 解密计数器模式

> ID：11704966
> 
> 赞同：1
> 
> 时间：2012-07-28T21:56:31.543
> 
> 标签：python, aes, pycrypto

我有一个 64 个字符的字符串。前 32 个字符代表 IV，后 32 个字符是加密消息。每个字符代表 4 位，因此我必须成对解释字符串以获得单个字节。

我想做的是复制反模式解密的工作原理。据我了解这个过程，我应该能够将我的密文与我的 IV 加密进行异或，这应该会产生纯文本。（请注意，我的密文 = 16 字节 = 一个块，所以我相信这里不需要填充或增加 IV。）

不管我怎么做，我都没有得到任何清晰的输出。我认为我的问题是我如何加密我的 IV，但我不确定。我一直在攻击这个，但我无处可去。谁能看到我做错了什么？这是我写的代码：

```
def decryptCTR(key, ciphertext):
    IV = ciphertext[:32]
    C0 = ciphertext[32:64]
    #convert into 16 byte strings
    key = array.array('B', key.decode("hex")).tostring()
    IV = array.array('B', IV.decode("hex")).tostring()

    # ENCRYPT iv with the key
    encodeAES = lambda c, s: base64.b64encode(c.encrypt(s))
    cipher = AES.new(key, AES.MODE_CFB)
    encryptedIV = encodeAES(cipher, IV)

    #xor the encrypted iv with the ciphertext block
    print "XOR: " + strXOR(encryptedIV, C0)

    return 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T23:52:59.617

答案确实很简单：不要加密 IV。IV 应以明文形式发送。

# jquery - jQuery：如何更改滑块动画

> ID：11704970
> 
> 赞同：0
> 
> 时间：2012-07-28T21:57:22.447
> 
> 标签：jquery, slider

我在 jQuery 中有一个简单的滑块，它可以旋转图像（.tip-image）和附加到它们的文本（.tip-box）。我想从文本（.tip-box）中删除动画，以便在更改为下一个项目时立即显示，但将动画保留在图像上。

```
(function($) {
  $(document).ready( function() {
    $('#training-tips-slider a').click(function(e) {
      var $active = $('.training-tips-post.active');
      var $next = $(this.hash);
      $active.addClass('last-active');
      $active.removeClass('active');
      $next.addClass('active');
      $next.css({opacity:0}).animate({opacity:1}, 800, function() {$active.removeClass('last-active');})

      $('#training-tips-slider a').removeClass('active');
      $(this).addClass('active');
      e.preventDefault();
    });
    });

    var current = 1;
    function autoAdvance() {
        if( current==-1 )
            return false;
        $('#training-tips-slider a').eq(current%$('#training-tips-slider a').length).trigger('click',[true]);
        current++;
    }
    // The number of seconds that the slider will auto-advance:
    var changeEvery = 15;
    var itvl = setInterval( function() { autoAdvance() }, changeEvery*1000 );
})(jQuery); 
```

CSS：

```
.training-tips-post {background: #fff; z-index: 8;}
.training-tips-post.last-active {z-index: 9;}
.training-tips-post.active {z-index: 10;} 
```

HTML：

```
<div id="training-tips-post-1" class="training-tips-post active">
  <div class="tip-image">
    <img class="wp-post-image" height="220" width="680" src="path-to-my-image1.jpg">
  </div>

  <div class="tip-box">
    <h2>TIP HEADER 1</h2>
    <p class="tip-text">This a text for item number 1</p>
  </div>

</div> <!-- END of #training-tips-post-1 -->

<div id="training-tips-post-2" class="training-tips-post">
  <div class="tip-image">
    <img class="wp-post-image" height="220" width="680" src="path-to-my-image2.jpg">
  </div>

  <div class="tip-box">
    <h2>TIP HEADER 2</h2>
    <p class="tip-text">This a text for item number 2</p>
  </div>
</div>  <!-- END of #training-tips-post-2 -->

<div id="training-tips-post-3" class="training-tips-post">
<div class="tip-image">
<img class="wp-post-image" height="220" width="680" src="path-to-my-image3.jpg">
</div>

<div class="tip-box">
<h2>TIP HEADER 3</h2>
<p class="tip-text">This a text for item number 3</p>
</div>

</div>  <!-- END of #training-tips-post-3 -->

<!-- SLIDER -->
<ul id="training-tips-slider">
  <li><a href="#training-tips-post-1" title="Featuring: TIP 1" class="active">Spánek</a></li>
  <li><a href="#training-tips-post-2" title="Featuring: TIP 2" >Poslušnost psa</a></li>
  <li><a href="#training-tips-post-3" title="Featuring: TIP 3">Spánek</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:09:49.357

看来您的代码在`.training-tips-post`包含图像和文本的每个完整 div 中都消失了。您可以尝试通过更改此行来淡入图像：

```
$next.find(".tip-image").css({opacity:0}).animate({opacity:1}, 800, function() {$active.removeClass('last-active');}) 
```

可能需要一些额外的调整来平滑过渡，但您的文本应该立即可见。

# javascript - 为什么两个相同的对象不相等？

> ID：11704971
> 
> 赞同：54
> 
> 时间：2012-07-28T21:57:38.027
> 
> 标签：javascript

似乎下面的代码应该返回一个 true，但它返回 false。

```
var a = {};
var b = {};

console.log(a==b); //returns false
console.log(a===b); //returns false 
```

这有什么意义？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-28T22:05:11.423

`==`常规 ( ) 和严格 ( ) 相等之间的唯一区别`===`是严格相等运算符禁用类型转换。由于您已经在比较相同类型的两个变量，因此您使用的相等运算符类型无关紧要。

无论您是使用常规相等还是严格相等，对象比较仅`true` **在您比较相同的确切对象**时才评估。

也就是说，给定`var a = {}, b = a, c = {};`, `a == a`, `a == b`, 但是`a != c`。

两个不同的对象（即使它们都具有零或完全相同的属性）永远不会相等比较。如果您需要比较两个对象属性的相等性，[这个问题有非常有帮助的答案](https://stackoverflow.com/q/201183/201952)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-28T22:08:19.413

> 这有什么意义？

因为对象引用的“相等”，就`==`and`===`运算符而言，**纯粹**基于引用是否引用**同一个**对象。[这在抽象相等比较算法](http://ecma-international.org/ecma-262/5.1/#sec-11.9.3)（由 使用`==`）和[严格相等比较算法](http://ecma-international.org/ecma-262/5.1/#sec-11.9.6)（由 使用）中明确阐述`===`。

在您的代码中，当您说`a==b`or时`a===b`，您不是在比较*objects*，而是在比较引用`a`并`b`查看它们是否引用同一个对象。这就是 JavaScript 的定义方式，并且与许多（但不是全部）其他语言中相等运算符的定义方式一致（Java、C# [除非运算符被覆盖，因为[它是用于`string`](https://msdn.microsoft.com/en-us/library/system.string.op_equality(v=vs.110).aspx)] 和 C++ 例如）。

JavaScript 没有内置的*equivalence*概念，即对象之间的比较，指示它们是否等效（例如，具有相同的属性和相同的值，如 Java 的`Object#equals`）。您可以在自己的代码库中定义一个，但没有任何内在定义它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-04T21:37:49.197

**从 Javascript 权威指南。**

对象不按值比较：即使两个对象具有相同的属性和值，它们也不相等。数组也是如此：即使它们以相同的顺序具有相同的值。

```
var o = {x:1}, p = {x:1};  // Two objects with the same properties
o === p                    // => false: distinct objects are never equal 
var a = [], b = [];        // Two distinct, empty arrays 
a === b                    // => false: distinct arrays are never equal 
```

对象有时被称为引用类型，以区别于 JavaScript 的原始类型。使用这个术语，对象值是引用，我们说对象是通过引用进行比较的：两个对象值是相同的当且仅当它们引用相同的底层对象时。

```
var a = {};   // The variable a refers to an empty object. 
var b = a;    // Now b refers to the same object. 
b.property = 1;     // Mutate the object referred to by variable b. 
a.property          // => 1: the change is also visible through variable a. 
a === b       // => true: a and b refer to the same object, so they are equal. 
```

如果我们想比较两个不同的对象，我们必须比较它们的属性。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-24T06:53:17.440

```
use JSON.stringify(objname);

var a = {name : "name1"};
var b = {name : "name1"};

var c = JSON.stringify(a);
var d = JSON.stringify(b);

c==d;
//true 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-07-03T18:31:29.350

### 下面是对JavaScript中`{} === {}`返回原因的快速解释：`false`

* * *

来自 MDN 网络文档 - [`Working with objects: Comparing objects`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects#Comparing_objects).

> 在 JavaScript 中，对象是一种引用类型。两个不同的对象永远不会相等，即使它们具有相同的属性。只有将相同的对象引用与其自身进行比较才会产生 true。

```
// Two variables, two distinct objects with the same properties
var fruit = {name: 'apple'};
var fruitbear = {name: 'apple'};

fruit == fruitbear; // return false
fruit === fruitbear; // return false 
```

```
// Two variables, a single object
var fruit = {name: 'apple'};
var fruitbear = fruit;  // Assign fruit object reference to fruitbear

// Here fruit and fruitbear are pointing to same object
fruit == fruitbear; // return true
fruit === fruitbear; // return true

fruit.name = 'grape';
console.log(fruitbear); // output: { name: "grape" }, instead of { name: "apple" } 
```

> 有关比较运算符的详细信息，请参阅[比较运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-28T22:00:01.330

`===`，对象的[严格相等](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comparison_Operators)运算符检查身份。

> 如果两个对象引用同一个对象，则它们是严格相等的。

这是两个不同的对象，所以它们是不同的。

想想两张空白的纸。它们的属性相同，但它们不是一回事。如果你在其中一个上写一些东西，另一个就不会改变。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-07T12:10:25.450

> 这有什么意义？

想象一下这两个对象：

```
var a = { someVar: 5 }
var b = { another: 'hi' } 
```

现在如果你这样做了`a === b`，你会直觉地认为它应该是错误的（这是正确的）。但是您认为这是错误的，因为对象包含不同的键，还是因为它们是*不同的对象*？接下来想象从每个对象中删除键：

```
delete a.someVar
delete b.another 
```

现在两者都是空对象，但相等性检查仍将完全相同，因为您仍在比较`a`和是否`b`是同一个对象（而不是它们是否包含相同的键和值）。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-28T22:02:19.743

这是一种解决方法：`Object.toJSON(obj1) == Object.toJSON(obj2)`

通过转换为字符串，比较基本上会在字符串中

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2020-07-14T07:01:49.377

```
In Javascript each object is unique hence `{} == {}` or `{} === {}` returns false. In other words Javascript compares objects by identity, not by value.

 1\. Double equal to `( == )` Ex: `'1' == 1` returns true because type is excluded 

 2\. Triple equal to `( === )` Ex: `'1' === 1` returns false compares strictly, checks for type even 
```

# android - 按钮功能。如何关闭应用程序

> ID：11704972
> 
> 赞同：0
> 
> 时间：2012-07-28T21:57:52.427
> 
> 标签：android, button

我想创建一个关闭我的应用程序的发光按钮，首先（当它是基本的不发光按钮时）我尝试使用finish（）完成我的应用程序；但现在它不起作用，因为当我将它放在代码中的某个位置时它不起作用，我不知道为什么。也许这个功能不适用于所有项目？？

```
settings.setImageDrawable(getApplicationContext().getResources().getDrawable(R.drawable.set tings_button)); 
    settings.setOnClickListener(new OnClickListener() {

    public void onClick(View button) {
        if (button.isSelected()){
            button.setSelected(false);
        }
        else {
            button.setSelected(true);            

        }       

    }

finish();

     }); 
```

我尝试使用 systemexit 和 finish(); 我应该做什么以及应该在哪里放置一个退出命令来完成我的应用程序？

PS。是的，我读过其他类似的主题，但是问题比我的要复杂得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:43:51.160

我认为您需要在 onClick 内完成：

```
settings.setImageDrawable(getApplicationContext().getResources().getDrawable(R.drawable.set tings_button)); 
    settings.setOnClickListener(new OnClickListener() {

    public void onClick(View button) {
        if (button.isSelected()){
            button.setSelected(false);
        }
        else {
            button.setSelected(true);            
        }       
        finish();
    }
     }); 
```

# c# - 令人惊讶的子字符串行为

> ID：11704974
> 
> 赞同：13
> 
> 时间：2012-07-28T21:57:57.360
> 
> 标签：c#, string

我今天在使用 Substring 方法时遇到了这种行为：

```
static void Main(string[] args) {
    string test = "123";
    for (int i = 0; true; i++) {
        try {
            Console.WriteLine("\"{0}\".Substring({1}) is \"{2}\"", test, i, test.Substring(i));
        } catch (ArgumentOutOfRangeException e) {
            Console.WriteLine("\"{0}\".Substring({1}) threw an exception.", test, i);
                break;
        }
    }
} 
```

输出：

```
"123".Substring(0) is "123"
"123".Substring(1) is "23"
"123".Substring(2) is "3"
"123".Substring(3) is ""
"123".Substring(4) threw an exception. 
```

"123".Substring(3) 返回一个空字符串，"123".Substring(4) 抛出异常。但是，“123”[3] 和“123”[4] 都超出范围。这[记录在 MSDN 上](http://msdn.microsoft.com/en-us/library/hxthx5h6.aspx)，但我很难理解为什么 Substring 方法是这样编写的。我希望任何越界索引要么总是导致异常，要么总是导致空字符串。有什么见解吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-28T22:33:45.857

的内部实现`String.Substring(startindex)`是这样的

```
public string Substring(int startIndex)
{
    return this.Substring(startIndex, this.Length - startIndex);
} 
```

所以你要求一个零字符长度的字符串。（AKA String.Empty）我同意你的观点，这在 MS 部分并不清楚，但没有更好的解释，我认为给出这个结果比抛出异常更好。

深入实现`String.Substring(startIndex, length)`我们会看到这段代码

```
if (length == 0)
{
    return Empty;
} 
```

所以，因为 length=0 在第二个重载中是一个有效的输入，所以我们也得到了第一个重载的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T22:38:56.853

.Net-Substring 的文档明确指出，如果索引大于字符串的长度，则抛出异常，在“123”为 3 的情况下。

我猜原因可能是因为兼容性，要创建与 C++ 子字符串函数相同的行为。在 C++ 中，

```
test.substr(3) 
```

由于 NULL 终止，将返回一个空字符串，这意味着字符串“123”实际上包含 4 个字符！（最后一个是 \0）。

这可能是具有这种行为的意图，即使每个规范的.Net 没有以 null 结尾的字符串（尽管实现实际上确实......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T22:25:55.413

此实现提供的一个便利是，如果您有一个循环对一些任意字符串执行某些操作（例如，返回字符串的后半部分），您不必将空字符串作为特殊情况处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T22:26:10.267

不知道为什么，也想不出一个很好的理由，但我想如果你想检查一个子字符串调用是否在字符串的末尾，返回 string.Empty 比抛出异常更便宜。

另外我想你只是在索引字符之后询问字符串的一部分，这部分是空白的，而之后的索引确实超出了范围

# ruby-on-rails - 如何在 ruby on rails 上分隔帐户页面和首页

> ID：11704977
> 
> 赞同：0
> 
> 时间：2012-07-28T21:58:45.997
> 
> 标签：ruby-on-rails, heroku

我现在正在开发一个 Rails 应用程序。用于本地化。我想使用如下方法。

1.  站点首页
    协议：http
    域：国家代码之间的多个子域：en.myapp.com、it.myapp.com、fr.myapp.com

2.  帐户页面
    协议：https
    域：一个使用 i18n 更改用户之间语言的主域。

对于 SEO，我想将静态页面（促销页面）放入国家之间的单独服务器中。

我正在使用heroku。如何连接 heroku 服务器上的动态内容和多个不同服务器中的静态内容？

例如，当用户从静态页面输入帐户页面时，我想传递 :locale 之类的属性。可能吗？

**编辑**
我搜索了这个问题，现在认为下面的方法会很好。

将子域静态页面托管到单独的服务器或单独的 Heroku 应用程序中。当用户在每个子域页面中更改语言并重定向到其他子域页面时，设置类似“:locale = ko-kr”的cookie：ko-kr.myapp.com

在主域和子域之间共享 cookie（如果用户已经登录，则使用数据库中的国家和地区代码）。当用户进入注册或登录页面时，根据 cookie 动态更改语言。

这种方法有效吗？如果您知道替代方法，我想知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:21:35.287

您使用的是什么数据库存储？使用 MySQL，这可能会变得非常棘手。

您需要一个中央 MySQL 服务器，除非您想体验 db 分片，这对于新项目 IMO 来说太过分了。使用中央服务器，MySQL 和您所在国家/地区服务器之间的延迟将比用户访问另一个国家/地区的服务器时遇到的延迟要糟糕得多！

如果我是你，我会注册一个 CDN 来加快所有网站的网站加载速度。易于设置。

在您的目标国家/地区实际拥有一台服务器并没有多大帮助。它是一长串谷歌排名因素中的一个参数……从我目前发现的结果来看，它并不是一个非常重要的参数。

# c# - 从字符串中提取 URL

> ID：11704978
> 
> 赞同：0
> 
> 时间：2012-07-28T21:58:48.493
> 
> 标签：c#, regex, string, extract

假设我的字符串是

```
http://www.test.com\r\nhttp://www.hello.com<some text here>http://www.world.com 
```

我想提取字符串中的所有 URL。输出应如下所示：

```
http://www.test.com
http://www.hello.com
http://www.world.com 
```

我怎样才能做到这一点？

字符串中没有 html 标记，因此使用 HTMLAgilityPack 提取它们不是一个可行的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T22:30:32.543

在其他答案和评论中，我实际上可以实现的最简单的方法是拆分方式。你知道这里有很多盲目的猜测，最好的选择之一可能是：

```
using System.Text.RegularExpressions;

public static List<string> ParseUrls(string input) {
    List<string> urls = new List<string>();
    const string pattern = "http://"; //here you may use a better expression to include ftp and so on
    string[] m = Regex.Split(input, pattern);
    for (int i = 0; i < m.Length; i++)
        if (i % 2 == 0){
            Match urlMatch = Regex.Match(m[i],"^(?<url>[a-zA-Z0-9/?=&.]+)", RegexOptions.Singleline);
            if(urlMatch.Success)
                urls.Add(string.Format("http://{0}", urlMatch.Groups["url"].Value)); //modify the prefix according to the chosen pattern                            
        }
    return urls;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T22:04:49.663

由于“:”不是 URL 中的有效字符，因此可以假设当您搜索“http://”时，您将获得一个良好、有效的 URL 开头。

搜索这个并找到你的开始。

您可以构建您可能遇到的已知良好 TLD 的列表（这将有所帮助：[http](http://en.wikipedia.org/wiki/List_of_Internet_top-level_domains) ://en.wikipedia.org/wiki/List_of_Internet_top-level_domains ）

你知道这将是你的终点；所以你可以从字符串的开头搜索这些。

从头开始，从这个索引开始。跳过后面的所有内容，这不好。

我假设您没有子目录；因为你没有列出任何一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T22:05:16.120

您可以通过搜索和拆分“http://”来使用[此问题](https://stackoverflow.com/questions/2245442/c-sharp-split-a-string-by-another-string)中的字符串拆分逻辑。如果您确实需要“http://”部分，您可以随时添加它。

编辑：*请注意，之后您必须在每个 URL 的末尾搜索和过滤（例如？） \r\n ，但这应该不是一个大问题......*

# django - 将 django 模型类导入实用程序模块

> ID：11704980
> 
> 赞同：1
> 
> 时间：2012-07-28T21:58:57.687
> 
> 标签：django, django-models

我在默认位置的 models.py 模块中有两个模型类。

```
PythonFinal
    |_   manage.py
    |_  template
    |_ PythonFinal
    |       |_  __init__.py
    |       |_  settings.py
    |       |_  urls.py
    |       |_  swgi.py
    | 
    |      
    |___ fertility
            |_  __init__.py
            |_  models.py
            |_  tests.py
            |_  views.py
            |_  dateUtils.py 
```

我只是想将类导入 dateUtils.py

```
from fertility.models import Cycle, Period

if __name__ == '__main__':
    p1 = Period(periodFirstDay='2012-7-26' , periodNumber=4) 
```

如果我运行这个模块，我会得到

```
ImportError: no module named fertility 
```

如果我尝试从 python 命令行导入模型，我会得到

```
import models    
Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
      File "models.py", line 1, in <module>
        from django.db import models
      File "/usr/local/lib/python2.6/dist-packages/django/db/__init__.py", line 11, in <module>
        if DEFAULT_DB_ALIAS not in settings.DATABASES:
      File "/usr/local/lib/python2.6/dist-packages/django/utils/functional.py", line 184, in inner
        self._setup()
      File "/usr/local/lib/python2.6/dist-packages/django/conf/__init__.py", line 40, in _setup
        raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
    ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

我将我的项目根文件夹添加到 ~/.bashrc 中的 PYTHONPATH 中。我的 wsgi.py 读取

```
import os
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "PythonFinal.settings") 
```

我不认为这不是循环导入，因为我得到的是 ImportError 而不是 NamingError，而且我还没有很多导入。出于显而易见的原因，我需要能够将我的模型导入其他模块，我可以进行单元测试，或者我需要另一个简单的工作流程来完成相同的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:03:54.807

如果`PythonFinal`在 中`/home/users/jeremy/django/PythonFinal`，那么`/home/users/jeremy/django`应该在您的`PYTHONPATH`环境变量中，并且`DJANGO_SETTINGS_MODULE`应该设置为`"PythonFinal.PythonFinal.settings"`. 然后你可以使用

```
from PythonFinal.fertility.models import Cycle, Period 
```

从 Python 命令行。

然而，更常见的是将`settings.py`文件放在与 相同的文件夹中`manage.py`，并且许多工具和教程都期望这种设置......

# php - gettext 不翻译所有 utf-8 字符

> ID：11704988
> 
> 赞同：0
> 
> 时间：2012-07-28T22:00:08.430
> 
> 标签：php, gettext, multilingual

test.php 文件回显了一些用于测试的希腊字母

```
<head>
<meta charset = "UTF-8" />
</head>
<?php
$language = "en_US";
$lang_path = "language";
putenv("LC_ALL=$language");
setlocale(LC_ALL, $language);
bindtextdomain("lang", $lang_path);
bind_textdomain_codeset("lang","UTF-8");
textdomain("lang");
echo gettext("α");
echo gettext("β");
echo gettext("γ");
echo gettext("δ");
echo gettext("ε");
echo gettext("ζ");
?> 
```

我的文件夹和文件的结构类似于

```
 language/en_US/LC_MESSAGES/lang.mo and lang.po 
```

mo 文件已正确编译，它必须转换为 abcdez。在 poedit 中，我到处使用 utf-8。代码产生 αβcδεζ ，所以只有字母 c 被翻译！我已经重新启动了我的服务器，我的系统中安装了 en_US 编码，但我不明白为什么只翻译一个字母..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:11:54.233

我在阅读 zend 和 cakephp 代码时编写了一个简单的实现。它不支持复数，它只是替换单词，因此您不仅可以替换一种语言。

测试.php 文件

```
<head>
<meta charset = "UTF-8" />
</head>
<?php
    require_once "gettext.php";
    echo __("something");
    echo __("α");
    echo __("β");
    echo __("γ");
    echo __("δ");
    echo __("ε");
    echo __("ζ");
?> 
```

获取文本.php 文件

```
<?php
define('APPPATH','/opt/lampp/htdocs/test/');
/* please change APPPATH to an ultimate directory of the language folder */

/**
 * Loads the binary .mo file and returns array of translations
 *
 * @param string $filename Binary .mo file to load
 * @return mixed Array of translations on success or false on failure
 */
    function loadMo($filename) {
        $translations = false;

        // @codingStandardsIgnoreStart
        // Binary files extracted makes non-standard local variables
        if ($data = file_get_contents($filename)) {
            $translations = array();
            $header = substr($data, 0, 20);
            $header = unpack("L1magic/L1version/L1count/L1o_msg/L1o_trn", $header);
            extract($header);

            if ((dechex($magic) == '950412de' || dechex($magic) == 'ffffffff950412de') && $version == 0) {
                for ($n = 0; $n < $count; $n++) {
                    $r = unpack("L1len/L1offs", substr($data, $o_msg + $n * 8, 8));
                    $msgid = substr($data, $r["offs"], $r["len"]);
                    unset($msgid_plural);

                    if (strpos($msgid, "\000")) {
                        list($msgid, $msgid_plural) = explode("\000", $msgid);
                    }
                    $r = unpack("L1len/L1offs", substr($data, $o_trn + $n * 8, 8));
                    $msgstr = substr($data, $r["offs"], $r["len"]);

                    if (strpos($msgstr, "\000")) {
                        $msgstr = explode("\000", $msgstr);
                    }
                    $translations[$msgid] = $msgstr;

                    if (isset($msgid_plural)) {
                        $translations[$msgid_plural] =& $translations[$msgid];
                    }
                }
            }
        }
        // @codingStandardsIgnoreEnd

        return $translations;
    }   

    /*
        Your system folder must be ULTIMATE_PATH/language/$language
        where language is a parametre like en,el,fr or english or whatever
        domain is the name of the mo file without mo extension e.g. default
        You can pass this parameteres with the __ function below
    */
    function translate($singular, $language = null, $domain = null) {
        $directory = APPPATH."language/"; // your path to language folder
        if (strpos($singular, "\r\n") !== false) {
            $singular = str_replace("\r\n", "\n", $singular);
        }

        if (is_null($language) ) { // default el
            $language = "el";
        }

        if (is_null($domain)) {
            $domain = "default";
        }

        $localeDef = $directory . $language;
        $file = $localeDef."/".$domain;
        $translations = null;

                if (is_file($file . '.mo')) {
                    $translations = loadMo($file . '.mo');
                }

        if (!empty($translations[$singular])) {

                $trans = $translations[$singular];

                if (strlen($trans)) {
                    return $trans;
                }
            }

        return $singular;
    }
    /*
    take language (must be in language folder) from $_GET["lang"];
    */
    function __($singular) {
        if (!$singular) {
            return;
        }
        if (isset($_GET["lang"]) ) // you can use cookie, session etc
            $translated = translate($singular,$_GET["lang"]);
        else 
            $translated = translate($singular);
        return $translated;
    }
?> 
```

在我的代码中，我有默认语言 el，你可以使用 GET['lang'] 获得语言。（您可以将其更改为 COOKIE、SESSION 等。mo 文件也必须称为 default.mo。（您也可以在代码中进行更改）。因此您可以在您的目录中拥有：

```
test.php
gettext.php
language/el/deafult.mo
language/en/default.mo 
```

默认为 el/default.mo，您可以在 url 中使用 ?lang=en 更改为 en。

# android - 如何动态改变形状颜色？

> ID：11704995
> 
> 赞同：0
> 
> 时间：2012-07-28T22:01:15.470
> 
> 标签：android, android-button

我在 xml 中有一个形状：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">
    <corners android:topLeftRadius="8dip"
        android:topRightRadius="8dip"
        android:bottomLeftRadius="8dip"
        android:bottomRightRadius="8dip"/>
</shape> 
```

我希望这个形状是按钮的形状。但是当我宣布：

```
button.setBackgroundDrawable(the shape) 
```

之后我无法更改按钮颜色。它总是给我黑色背景，我想动态改变颜色。我试过了：

```
button.getBackground().setColorFilter(color, PorterDuff.Mode.MULTIPLY); 
```

它没有任何影响。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T00:47:23.110

两个我都试过了......

GradientDrawable bgShape = (GradientDrawable)b​​1.getBackground();

bgShape.setColor(Color.GREEN);

或者

b1.getBackground().setColorFilter(Color.GREEN, Mode.MULTIPLY);

或者

b1.getBackground().setColorFilter(Color.parseColor("#bbb000"),Mode.DARKEN);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T23:52:13.110

不确定这是否适合您，但请尝试一下。这个对我有用：

```
 button.getPaint().setColor(Color.GREEN); 
```

然后显然你可以将“绿色”更改为其他颜色。请注意，Android 不会使用所有颜色作为默认颜色，仅使用原色和主要颜色，如红色、蓝色、绿色、黄色等。

希望这可以帮助！

# c# - 捕获 Web 响应流

> ID：11704996
> 
> 赞同：2
> 
> 时间：2012-07-28T22:01:37.370
> 
> 标签：c#, url, stream

当我经过

> [http://www.youtube.com/watch?v=Zi8vJ_lMxQI](http://www.youtube.com/watch?v=Zi8vJ_lMxQI)

作为参数，下载的是 HTML 代码而不是视频。

```
public void StreamDownload(Uri currentUrl)
        {
            int dataLength;
            int bytesRead;

            WebRequest req = WebRequest.Create(currentUrl);
            WebResponse response = req.GetResponse();
            string oFileName = System.IO.Path.GetFileName(URLBox.Text);

            oFileName = AdditionalFunctions.CorrectFname(oFileName); //this function replaces forbidden characters with '♥'.

            Stream dataStream = response.GetResponseStream();

            byte [] buffer = new byte[1024];

            FileStream oFile = new FileStream(oFileName,FileMode.Append);

            dataLength = (int)response.ContentLength;

            do
            {
                bytesRead = dataStream.Read(buffer, 0, buffer.Length);
                oFile.Write(buffer, 0, bytesRead);
            }
            while (bytesRead != 0);
        } 
```

**由于评论而编辑**
是否有从指定 URL 提取视频流的通用算法？Youtube 只是一个例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:29:20.557

您的代码可能很好，但您使用的 url 用于网页而不是视频文件本身。

检查呈现的 html 源代码*（右键单击页面和“查看源代码”）*。你应该在那里找到网址。

您还可以从您的 youtube-link 遍历 html 以在您的代码中找到源 url。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T23:32:49.447

正如我在评论中所说：WEBPAGE（你从你的 URL 获得的）是带有 PLAYER 组件的媒体，该媒体将通过某种流媒体访问。

因此，首先，您必须解析网页以查找您的流 URL 是否存在于某处。如果不是，则需要某种网络数据包捕获来确定最近从尝试加载/播放视频的进程打开了哪个连接，然后从该连接捕获数据。

棘手的东西。

对于 YouTube：

[从 YouTube 下载视频](https://stackoverflow.com/questions/1083164/downloading-video-from-youtube)

# php - 从 PHP 数组中发布多个值

> ID：11704999
> 
> 赞同：2
> 
> 时间：2012-07-28T22:02:15.477
> 
> 标签：php, arrays, forms, foreach

我正在编写一个奇幻宠物游戏。目前，我正在开发一种工具来帮助用户管理他们的个人商店库存。该工具包括更改每件商品的销售价格的选项 - 这就是我的问题所在。在这里，让我告诉你：

**的HTML**

```
<form method="post">
<input type="text" name="cost[$item_id]" value="" />
<input type="submit" name="submit" value="Submit" />
</form> 
```

$item_id 是一个变量，对应于正在编辑的项目。它必须包含在数组中，否则......我将不知道哪个价格对应哪个项目。

另外，这个脚本：

```
<input type="text" name="cost[$item_id]" value="" /> 
```

重复商店库存中的商品数量。因此，表单可以包含无限数量的这些条目。因此数组。

**剧本**

```
if(isset($_POST['update'])) {

foreach ($_POST['cost'] as $key => $value) {
$submitted_array = array_keys($_POST['cost']); 
echo ($_POST['cost'][$submitted_array[0]] . " " . $submitted_array[0]); 
}

} 
```

上面的脚本有效......但是，它只会打印数组中的第一组数据。

现在，这似乎很好 - 但是，还记得我说过我可以拥有无​​限数量的成本条目吗？那是我的问题 - 当我使用变量替换上面脚本中的“0”时，该函数停止一起工作。如果我知道数组总共包含多少个条目，我可以重复这个函数——但我不知道。那么我能做什么呢？我的问题有简单的解决方案吗？

可以在表单中添加一个隐藏字段来指定要更改的项目数量 - 我只是不知道这是否会有所帮助。

如果您想查看表格的屏幕标题以更好地理解我在说什么，只要问，您就会收到！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T22:05:16.287

那是因为你`$submitted_array`多次重写变量，而你只需要一次。

```
if (isset($_POST['update'])) {
    $submitted_array = array_keys($_POST['cost']);
    foreach ($_POST['cost'] as $key => $value) {
        echo ($_POST['cost'][$submitted_array[0]] . " " . $submitted_array[0]);
    }
} 
```

此外，考虑到您的`cost`阵列，您根本不需要使用`array_keys`：

```
if (isset($_POST['update'])) {
    foreach ($_POST['cost'] as $item_ID => $item_cost) {
        echo ($item_ID . " " . $item_cost);
    }
} 
```