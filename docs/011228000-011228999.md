# StackOverflow 问答 11228000-11228999

# c# - 将 .txt 文件导入 .xlsx 文件

> ID：11228000
> 
> 赞同：4
> 
> 时间：2012-06-27T14:02:01.470
> 
> 标签：c#, excel, import, xlsx, text-files

我正在研究将 .txt 文件（非分隔）转换为 Excel 电子表格的脚本。我的问题发生在我需要提取可能在 5-10 个字符之间的数据并且每行有几组数据的地方。

每行可以在每个字段中包含以下数量的字符，并且每行有五个字段可以拉入：

> ```
> 10 char    10 char   10 char  17 char           10 char
> 
> 523452    D918      20120418  1FD7X2XTACEB8963820120606  
> 523874    L9117244  20120409  3C6TDT5H0CG12130200000000
> 535581    G700      20120507  5GYFUD CT        00000000 
> ```

我基本上需要能够拉出 10,10,10,17,10 并将它们放在 Excel 中的一行中。我可以像现在一样拉出单元格，但它基于空格分隔，当字段不占用全部空间时会导致问题，我最终会得到一个带有空白单元格的 Excel 表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:03:06.777

您可以使用`String.Substring`（您的标签读取`C#`）：

```
using System;
using System.IO;

class Test 
{
  public static void Main() 
  {
     try 
     {
        // Create an instance of StreamReader to read from a file.
        // The using statement also closes the StreamReader.
        using (StreamReader sr = new StreamReader("TestFile.txt")) 
        {
            String line;
            // Read and display lines from the file until the end of 
            // the file is reached.
            while ((line = sr.ReadLine()) != null) 
            {
                String Chunk1 = line.Substring( 0, 10);  // First 10
                String Chunk2 = line.Substring(10, 10);  // Second 10
                String Chunk3 = line.Substring(20, 10);  // Third 10
                String Chunk4 = line.Substring(30, 17);  // Now 17
                String Chunk5 = line.Substring(47);      // Remainder (correction: Chunk2 --> Chunk5)
                Console.WriteLine("Chunks 1: {0} 2: {1} 3: {2} 4: {3} 5: {4})",
                     Chunk1, Chunk2, Chunk3, Chunk4, Chunk5);

            }
            Console.ReadLine();
        }
     }
     catch (Exception e) 
     {
        // Let the user know what went wrong.
        Console.WriteLine("The file could not be read:");
        Console.WriteLine(e.Message);
     }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-09T09:54:36.343

如果从 Excel 中导入（数据、获取外部数据、从文本、固定宽度），则不需要代码：

[![SO1228000 示例](../Images/d757a8b80524b09bea8f747659eb526d.png)](https://i.stack.imgur.com/9pwZn.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:23:38.450

您可以使用 Mid() 获取字符串的特定部分。如果在 中保留一行`currentLine`，您可以像这样提取字段：

```
Dim fields(5)
fields(1) = Mid(currentLine, 1, 10)
fields(2) = Mid(currentLine, 11, 10)
fields(3) = Mid(currentLine, 21, 10) 
```

等等。

# android - 安卓后台定位跟踪

> ID：11228001
> 
> 赞同：2
> 
> 时间：2012-06-27T14:02:02.910
> 
> 标签：android

我正在开发一个以定期方式获取位置详细信息的应用程序。我尝试了服务和广播接收器，但未能在特定时间范围内实现位置详细信息，比如 30 分钟左右。有什么帮助或建议我通过它我可以一次又一次地获得位置详细信息.. 在 adv 中表示感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:37:47.927

您是否尝试过使用警报管理器？您可以执行以下操作以定期更新位置：

1.注册一个报警管理器，每 30 分钟调用一次服务。

2.确保您获得唤醒锁，以便设备从睡眠中唤醒。

3.警报管理器接受一个待处理的意图，当警报被触发时，该意图又调用广播接收器/服务。

4.从此 BroadCastReciever 调用服务将更新您的位置。 [检查此问题以获取完整代码。](https://stackoverflow.com/questions/2775628/android-how-to-periodically-send-location-to-a-server)[还有这个。](https://stackoverflow.com/questions/9407309/send-current-location-to-server-periodically-in-android)

# web-scraping - 单击输入标签，而不是表单

> ID：11228003
> 
> 赞同：0
> 
> 时间：2012-06-27T14:02:05.383
> 
> 标签：web-scraping, mechanize, mechanize-ruby, mechanize-python

我`mechanize`用来刮几页。分页是通过 javascript post 实现的，分页链接实际上是`input`按钮。这些不包括在表格中。知道如何触发这些点击吗？

我仍在编写脚本，可以使用`mechanize-ruby`或`mechanize-python`。任何一个解决方案都会有所帮助。

按钮的html是：

```
<input name="px" value="1" class="pSel" disabled="true\" type="button">
<input name="px" value="2" class="page_select" onclick="apply_pagination(this);" type="button">
<input name="px" value="3" class="page_select" onclick="apply_pagination(this);" type="button">
...
<input name="px" value="10" class="page_select" onclick="apply_pagination(this);" type="button"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:17:39.270

使用 mechanize-ruby，您可以通过以下方式找出 POST 参数：

1.  查看`apply_pagination`javascript 方法并找出它发回 Web 服务器的内容。

2.  单击浏览器上的其中一个链接并使用 [HTTPFox] (https://addons.mozilla.org/en-us/firefox/addon/httpfox/) 之类的内容监视 POST 请求。

有了它，您可以轻松地复制 Web 服务器对用户代理的期望并做一些接近于此的事情；

```
next_page = agent.post("http://example.com/", { "foo" => "bar" }) 
```

# asp.net-mvc-3 - 尝试加载 64 位 C++/CLI 程序集时出现 ASP.NET MVC3 运行时错误

> ID：11228007
> 
> 赞同：5
> 
> 时间：2012-06-27T14:02:14.463
> 
> 标签：asp.net-mvc-3, razor, compiler-errors, c++-cli

**更新：**在找出导致 ASP.NET/Razor 错误的原因后更新了问题。

我有一个 ASP.NET MVC3 项目，它引用了一个 C++/CLI 项目，该项目配置为编译为 x64，因为它必须在 Windows Azure 中运行（C++/CLI 没有 AnyCPU 设置）。

问题是，一旦我将 C++/CLI 项目的平台设置配置为 x64（在 Build->Configuration Manager 中），构建解决方案，然后打开一个随机视图，我就会收到关于 ASP.NET 尝试加载的警告不正确的格式汇编后跟由 Razor 语法错误导致的一堆错误。

一些随机视图的截图：
![在此处输入图像描述](../Images/da6b362172217cc1079e5ab13bb6e692.png)

日志截图： ![VS2010 错误列表](../Images/48369a319f3005aea616142e3d743c88.png)

主要错误是：

> 警告：ASP.NET 运行时错误：无法加载文件或程序集“LZGEncoder”或其依赖项之一。试图加载格式不正确的程序。

即使发生这种情况，我仍然可以编译和运行解决方案，并且可以很好地使用引用的 C++/CLI 程序集，所以这不会阻止开发，但它确实很麻烦（尤其是当它阻止 IntelliSense 并且我看不到是否我的 Razor 代码中有任何*真正的*错误）。

如果我将 C++/CLI 的平台重置为 Win32，那么所有错误都会消失，但是在运行解决方案时，我当然会遇到同样的格式错误，但在我的 MVC3 网页中。

这是 ASP.NET 中的错误还是我忘记配置某些内容？我能够在工作和家里（有和没有 Azure）重现错误，所以我不认为这是我的 VS2010 安装。谢谢。

**更新：**
现在我创建了一个 C# 包装器，使用 P/Invoke 直接调用 C 库，它工作得很好，所以我什至不再需要 C++/CLI 包装器，但这并不能回答这个问题，所以我会保持开放。

我怀疑这是 MVC3/Razor 或 VS2010 中的一个错误，它们都有新版本即将推出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:37:07.083

我找出了导致问题的原因，这是因为 C++/CLI dll 被编译为 x64。ASP.NET 运行时似乎不喜欢这样，并且只在 Win32 或 AnyCPU 平台上运行良好，即使代码确实可以编译和运行。

C++/CLI 项目的唯一 2 个平台选项是 Win32 和 x64，我需要它是 x64，因为它将被发布到 Azure 云，但这会导致这些运行时错误，另一方面 Win32 会根本不在 Azure 上运行。

我最终做的是创建一个 C# 包装器，它使用 P/Invoke 直接调用我的 C 库，因为 C# 项目平台设置可以设置为“AnyCPU”，所以现在错误消失了。

*因此，总而言之，如果您在包含 Razor 代码的解决方案中引用任何类型的项目/dll，请确保将其编译为 AnyCPU 或 Win32，而不是 x64。*

感谢大家！我想这毕竟是 ASP.NET MVC3 中的一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:29:53.873

根据我的说法，C++ 包装器不会导致您遇到的错误。

1.  为什么屏幕截图底部有模棱两可的参考错误？您是否在同一台机器上安装了 MVC 3 和 MVC 4？
2.  顶部的错误似乎是因为缺少 .dll 引用。添加 Visual Studio 建议的引用。

除此之外，您是否直接在 MVC Web 项目中添加对此 C++ 包装器的引用？你能创建另一个 C# 库项目并在那里使用这个包装器并通过这个 dll 公开功能吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:13:49.460

如果它在运行时工作，我认为这不是 ASP.NET/Windows Azure 问题。似乎问题与 Visual Studio 安装有关。我建议您重新安装 Visual Studio、ASP.NET MVC 和 Windows Azure 工具，看看它是否可以正常工作。

此致，

明旭。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-27T17:07:34.480

我在特定项目中遇到了同样的问题，但是我没有任何 DLL 编译为 x64。为了解决这个问题，我一直在做的是清理项目，这似乎可以解决问题。自从问题开始以来，我唯一能想到的在我的系统上发生了变化，那就是我安装了 Visual Studio 2012 RC。

# xsl-fo - 如何设置margin-left而不被子元素继承？

> ID：11228008
> 
> 赞同：4
> 
> 时间：2012-06-27T14:02:18.350
> 
> 标签：xsl-fo

我需要在页眉（xsl-region-before）中设置所有内容**的左边**距和**右边距。**我试图将该属性添加到 <fo:block> 中，该属性又包含所有标题内容。然而，边距被子块继承，这不是我想要的。

有没有办法在不被继承的情况下设置边距？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T13:49:04.490

我找到了一种解决方法：在内部块中将边距设置为负数：

```
<fo:block margin-left="10mm" margin-right="10mm">
    <fo:table>
        <fo:table-column column-width="100%" />
        <fo:table-body>
            <fo:table-row>
                <fo:table-cell text-align="left">
                    <fo:block margin-left="-10mm" margin-right="-10mm">
                        Some text
                    </fo:block>
                </fo:table-cell>
            </fo:table-row>
        </fo:table-body>
    </fo:table>
</fo:block> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-10T09:47:37.020

这是我的痛苦。每个赛季当我开始使用 XSL-FO 时，我都会遇到这个麻烦。

解决方案。现在和永远。

1\. 如果你想要外部块的边距（我最喜欢的）。谢谢约伯特。

```
<fo:block-container
    margin-left="3pt"
    margin-right="3pt"
    >
    <fo:block-container margin="0"> 
```

2\. 如果您要在表格上设置边距（我不喜欢这样做，但我应该让我的团队记住）。谢谢大卫·曼贡。

```
<fo:table
    margin-left="3pt"
    margin-right="3pt"
    >
    <fo:table-body
        start-indent="0"
        end-indent="0"
        > 
```

3\. 仅用于表中的单个具体单元格来覆盖缩进（）。谢谢你。

```
<fo:table
    margin-left="3pt"
    margin-right="3pt"
    >
    <fo:table-body>
        <fo:table-row>
            <fo:table-cell>
                <fo:block-container margin="0">
                    ... content ... 
```

4\. 还有 Arne Evertsson 的负边距（看看他的答案）。

5\. 在一些奇怪的情况下。如果您使用填充，那么不要忘记添加 margin="0"

```
<fo:block-container padding="0 3pt" margin="0">
    <fo:block> 
```

6\. 如果有些麻烦，然后考虑使用经验法则 - 不要在父元素上使用填充，在子元素上使用边距。在你的布局掌握中。

```
<!-- Set borders. -->
<fo:block-container xsl:use-attribute-sets="borderDefault">
    <!-- It's like a padding on a parent. -->
    <fo:table-and-caption margin="2pt"> 
```

所有这些方法都经过测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-04T09:38:08.270

您可以在表格主体元素上使用以下属性：

开始缩进=“0pt” 结束缩进=“0pt”

DMA

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-03T22:52:25.337

我能够使用两个嵌套`<fo:block-container>`元素来解决这个问题。

```
<fo:block-container margin-left="1in">
<fo:block-container margin-left="0in">
...stuff...
</fo:block-container>
</fo:block-container> 
```

它之所以有效，是因为内部块容器现在以 0 的边距传递给它的孩子。

我还没有尝试过，`<fo:block>`但我敢打赌它也可以在那里工作。 `<fo:block-container>`可能是你想要的。

# php - 如何设置特定用户对后端 Joomla 2.5.4 中特定模块的访问权限？

> ID：11228009
> 
> 赞同：4
> 
> 时间：2012-06-27T14:02:20.290
> 
> 标签：php, joomla, acl, joomla2.5

我有 Joomla 2.5.4，其中我有两种不同类型的用户组，现在我希望这两个用户都可以在管理员（后端）处访问特定的模块/组件

请指导我找到实现这一目标的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:31:35.727

刚刚成功完成了这些步骤：

1.  从用户/访问级别/添加新访问级别创建了我自己的 ACL
2.  从用户/组/添加新组创建我自己的用户组
3.  添加了仅允许该访问级别的新管理模块
4.  转到扩展/扩展管理器并选择管理选项卡
5.  选择了已安装的管理组件
6.  单击选项，然后选择权限选项卡
7.  调整了我添加的组的访问权限

如果我还没有完全理解您的问题，或者这不能满足您的需求，那么[JED](http://extensions.joomla.org/extensions/access-a-security/site-access/backend-a-full-access-control)的管理员用户插件可能会满足您的需求。

# c# - 在 Asp.net C# 中浏览 Ftp FolderView 文件

> ID：11228010
> 
> 赞同：2
> 
> 时间：2012-06-27T14:02:22.283
> 
> 标签：c#, ftp, asp.net-4.0, filebrowse

在我的 Web 应用程序中，我需要为用户提供浏览其 FTP 位置的便利，就像 Asp.Net 的文件浏览一样。

为此，我使用`OpenFileDialog`了 Windows 窗体。它适用于任何本地位置，但不适用于任何 ftp 位置。

下面是我的代码。

```
 protected void BtnOpenFileDialog_Click(object sender, EventArgs e)
    {
        var t = new Thread(SelectFolder);
        t.IsBackground = true;
        t.SetApartmentState(ApartmentState.STA);
        t.Start();
    }

    private void SelectFolder()
    {
        Stream myStream = null;
        OpenFileDialog openFileDialog1 = new OpenFileDialog();

        openFileDialog1.InitialDirectory = "ftp://username:password@ftpidaddress/";
        openFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
        openFileDialog1.FilterIndex = 2;
        openFileDialog1.RestoreDirectory = false;

        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            try
            {
                if ((myStream = openFileDialog1.OpenFile()) != null)
                {
                    using (myStream)
                    {
                        // code to read the stream here.
                    }
                }
            }
            catch (Exception ex)
            {
                // exception handing here
            }
        }
    } 
```

如果我做错了什么，请建议我。或者如果有其他方法可以建议我。

# php - 获取所有使用我的 facebook 应用程序的用户

> ID：11228014
> 
> 赞同：-1
> 
> 时间：2012-06-27T14:02:34.933
> 
> 标签：php, facebook

> **可能重复：**
> [如何获取使用您的 Facebook 应用程序的人的所有用户 ID](https://stackoverflow.com/questions/4776881/how-to-get-all-the-user-ids-of-people-who-are-using-your-facebook-application)

如何获取所有正在使用 facebook 应用程序的用户？

我可以检索所有使用 facebook AP 并获​​取访问令牌的用户吗，因为现在我的 facebook Ap 只有一个 userId，我不想获取令牌，所以我可以访问有关他们的更多信息。我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:07:53.587

我了解到我必须在身份验证时将 facebook 用户 ID 存储在我自己的数据库中（并取消授权回调以删除），但我很乐意承认我错了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:08:39.567

不，只有当用户主动与您的应用交互时，您才能获得访问令牌。

你能做的最多的就是向 API 查询你的实际用户的朋友的信息——因此你必须首先从用户那里获得朋友的权限，它只为你那些没有阻止应用程序的用户的朋友提供扩展数据在他们的设置中访问该数据。

# java - 处理线程中的数据库连接丢失 - Java

> ID：11228023
> 
> 赞同：1
> 
> 时间：2012-06-27T14:03:04.080
> 
> 标签：java, mysql, database

我有一个 Swing 应用程序，它使用来自外部 mysql 数据库的一些数据。

我希望这些数据是最新的，所以我有一个线程每 10 秒检查一次是否有新数据可用。

这是我的代码：

> ```
> public void run() {
>     maj.getIgor().open(); // open the connection to Mysql
>     while (true) {
>         try { 
> ```

```
 if (maj.getIgor().getConnexion().isValid(2)) {
                maj.checkProduits(); // update the datas
            } else {
                maj.getIgor().close();
                maj.getIgor().open();
                System.out.println("Re-try to open connection");

            }
            ThreadIgor.sleep(10000);

        } catch (SQLException ex) {
            Logger.getLogger(ThreadMajProduits.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InterruptedException ex) {
            try {
                Thread.currentThread().interrupt();
                maj.getIgor().close();

            } catch (SQLException ex1) {
                Logger.getLogger(ThreadMajProduits.class.getName()).log(Level.SEVERE, null, ex1);
            }

            break;

        }
    }
} 
```

我想知道这是否是做我想做的事情的正确方法，如果没有风险，这个线程会通过尝试连接到数据库来阻止我的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:51:04.147

首先，一旦您使用连接池来连接到您的数据库，您的线程就不应该有问题导致您的应用程序出现任何延迟。如果你没有使用连接池，你最终会在你的主应用线程中引入暂停，甚至是竞争条件，如果你没有正确同步你的线程。

阅读您的问题时，我的脑海中闪过一个想法，如果有兴趣，请继续阅读，如果我猜错了，请忽略！

您所做的本质上是轮询数据库以获取“新”数据。问题是，即使您确实在其中一个民意调查中获得了更新的数据，您的用户执行的下一个事务不会基于陈旧数据，您也*不会变得更安全。*这是一个基本的并发问题，无论您使用什么“技巧”，您都无法*在*事务中处理它。

如果您要完成的是动态更新用户正在操作的某种形式的数据，那么正确的做法是使用“last-update”或“version”列之类的东西。然后，当您的用户尝试将他们的更新推送到数据库时，在您的事务中，您将检查您的用户一直在编辑的数据的“最后更新”或“版本”是否与DB，从而确保在此期间没有其他人编辑过相同的数据。

# jquery - 第一次打开 jquery 对话框时出现奇怪的问题（在 asp.net gridview 中）

> ID：11228027
> 
> 赞同：7
> 
> 时间：2012-06-27T14:03:17.870
> 
> 标签：jquery, asp.net

我在更新面板中有一个网格视图。gridview 中的字段之一是 ASP.net `linkbutton`，如下所示：

```
 <ItemTemplate>
       <asp:LinkButton ID="hlSortOrder" runat="server" CssClass="hlDialog" OnClick="LoadLog"
        Text='<%# DataBinder.Eval(Container, "DataItem.SortOrder") %>'></asp:LinkButton>
  </ItemTemplate> 
```

当有人单击链接按钮时`OnClick`，我将创建的方法称为`LoadLog`. LoadLog 看起来像这样：

```
protected void LoadLog(object sender, EventArgs e)
        {
            GridViewRow gr = (GridViewRow)((DataControlFieldCell)((LinkButton)sender).Parent).Parent;
            Label l = (Label)gr.FindControl("lblID");
            DataSet ds;

            ds = BL.GetRunoffAnswerLog(Convert.ToInt64(l.Text));

            if (ds != null)
            {
                if (ds.Tables[0].Rows.Count == 0)
                {
                    gvLog.Visible = false;
                    gvLog.DataSource = null;
                    lblRowsCount.Text = "No log for this record!";
                }
                else
                {
                    lblRowsCount.Text = ds.Tables[0].Rows.Count.ToString() + " row(s) found for this record.";
                    gvLog.DataSource = ds.Tables[0];
                    gvLog.DataBind();
                    gvLog.Visible = true;
                }
            }
            ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "openDialog", "$('#dialog').dialog({draggable: true, modal: true, height: 500, width: 750, title: 'Log', open: function (type, data) {$(this).parent().appendTo('form');}});", true);
        } 
```

基本上，它获取网格视图行的句柄，从数据库中拉回一些数据并将其分配给 gvLog 源。之后注意最后一行：

`ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "openDialog", "$('#dialog').dialog({draggable: true, modal: true, height: 500, width: 750, title: 'Log', open: function (type, data) {$(this).parent().appendTo('form');}});", true);`

我必须这样做才能打开我的对话框。当我第一次点击我的gridview中的一行时，我得到这个：

![在此处输入图像描述](../Images/c4e644e139857e018230325dd80aeb16.png)

请注意，它只真正显示了标题……很奇怪。但是，一旦我再次单击同一行，它就会显示整个对话框：

![在此处输入图像描述](../Images/0561c37a15218f50659a5dc1170d0237.png)

它只发生在第一次点击时，如果我继续点击不同的行它工作正常。我应该补充一点，我必须添加以下 jquery 代码：

```
 <script type="text/javascript">
        $(document).ready(function () {
            var prm = Sys.WebForms.PageRequestManager.getInstance();

            prm.add_endRequest(function () {
                $("#dialog").hide();
                // re-bind your jQuery events here 
           });
        ....more code... 
```

基于这个讨论：[jQuery $(document).ready and UpdatePanels?](https://stackoverflow.com/questions/256195/jquery-document-ready-and-updatepanels)

如果我在回发的那一刻没有该代码，则此对话框所在的整个 div 总是显示在我的页面上，我不希望那样...

正如下面一位成员所提到的。我相信发生的事情是您第一次单击链接按钮时，客户端事件首先发生，即打开实际打开的对话框，即使我在服务器端代码中引发此事件......如上所示，仅当您单击“LoadLog”事件点击我注册这个jquery opendialog。但似乎这仍然会在第一次打开对话框，并且一旦您第二次单击它，才会显示数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:18:58.417

我有很多关于 jQuery awesomeness 和 UpdatePanels 的问题。试试这个方法：

1.  将您用于对话框的 div 放在更新面板之外。不要在后面的代码中创建对话框。而是在页面加载时创建对话框。由于您的对话框位于更新面板之外，因此不会被破坏。确保不要自动打开它。
2.  向您的对话框 div 添加一个额外的 div 以保存您的内容。
3.  创建一个javascript函数
    *   清除对话框中任何先前内容的内容 div 的内容
    *   将控件附加`gvLog`到对话框内容 div，类似于`$('#dialogContent').append($('#<%= gvLog.ClientID %>'));`
    *   显示对话框
4.  现在在你后面的代码中调整 RegisterClientScriptBlock 来调用这个新的 javascript 函数。

**示例**
***代码背后的代码：***

```
public partial class _Default : System.Web.UI.Page 
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            //load in some dummy data
            Dictionary<int, string> vals = new Dictionary<int, string>()
            {
                {1, "ONE"},
                {2, "TWO"},
                {3, "THREE"},
                {4, "FOUR"},
                {5, "FIVE"},
                {6, "SIX"}
            };

            gvData.DataSource = vals;
            gvData.DataBind();
        }
    }

    protected void LoadLog(object sender, EventArgs e)
    {
        LinkButton lb = (LinkButton)sender;
        var key = lb.CommandArgument;

        Random r = new Random();
        Dictionary<int, int> dict = new Dictionary<int, int>();

        for (int i = 0; i <= r.Next(5, 20); i++)
        {
            dict.Add(r.Next(), r.Next());
        }

        gvLog.DataSource = dict;
        gvLog.DataBind();

        //show log in dialog on client
        ScriptManager.RegisterStartupScript(up, up.GetType(), "openDialog", "showLog();", true);
    }
} 
```

***设计师代码：***

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
    <link href="ui-lightness/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript">
        $(function () { 
            //setup dialog
            $('#dialog').dialog({draggable: true, 
                                modal: true, 
                                height: 500, 
                                width: 750, 
                                title: 'Log',
                                autoOpen: false});
        });

        function showLog() {
            //clear any old log data
            $('#dvContent').empty();
            //append current log
            $('#<%= gvLog.ClientID %>').appendTo($('#dvContent'));
            //show dialog
            $('#dialog').dialog('open');
        }
    </script>
</head>

<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="sp" runat="server" />
    <div>
        <asp:UpdatePanel ID="up" runat="server">
            <ContentTemplate>
                <asp:GridView ID="gvData" runat="server">
                    <Columns>
                        <asp:TemplateField>
                            <ItemTemplate>
                                <asp:LinkButton ID="lbShowLog" runat="server" Text="Show Log" 
                                    OnClick="LoadLog" CommandArgument='<%# Eval("Key") %>' />
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                </asp:GridView>

                <div style="display:none;">
                    <asp:GridView ID="gvLog" runat="server">
                    </asp:GridView>
                </div>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>

    <div id="dialog" style="display:none;">
        <div id="dvContent">

        </div>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:46:35.403

看到[这个](http://praveenbattula.blogspot.com/2009/08/jquery-dialog-open-only-once-solution.html)

尝试添加呼叫`$('#dialog').dialog('open')`

您的第一个电话`$('#dialog').dialog([Parmas])`可能是创建它但没有打开它。

像这样的东西：

```
 ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "openDialog", "$('#dialog').dialog({draggable: true, modal: true, height: 500, width: 750, title: 'Log', open: function (type, data) {$(this).parent().appendTo('form');}});$('#dialog').dialog('open');", true); 
```

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:19:16.247

对于您的问题，有一个非常棘手的解决方案，它将使您免于更新面板和 jquery 的所有麻烦。

首先，我们将不依赖 RegisterClientScriptBlock 函数，而是通过隐藏字段完成所有操作。

1.  创建一个隐藏字段，该字段将标记是否显示显示对话框。
2.  创建一个 javascript 函数来检查隐藏字段是否具有值。如果隐藏字段有值，则显示显示对话框并依赖隐藏字段获取数据，否则不显示对话框，这将解决回发显示对话框的问题。
3.  将动画扩展器添加到更新面板

`<cc1:UpdatePanelAnimationExtender ID="UpdatePanelAnimationExtender1" TargetControlID="UpdatePanel1" runat="server"> <Animations> <OnUpdated> <Parallel duration="0">
<ScriptAction Script="YouFunctionCall();" /> </Parallel> </OnUpdated> </Animations> </cc1:UpdatePanelAnimationExtender>`

并在此 javascript 函数结束时清除隐藏字段。

那么会发生什么，在回发时，javascript将运行以检查标志是否设置，它会发现标志为空，当您在更新面板内单击时，您的服务器端代码将运行并设置隐藏字段标志和所需的任何其他信息，然后更新面板动画扩展器将在更新面板更新后运行 javascript 函数，并检查隐藏字段并发现它填充了数据，并将触发显示对话框，然后重置标志以便任何其他回发不会显示对话框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T11:00:21.120

在打开对话框之前尝试修改*DOM*

### 在代码中：

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "openDialog", "$(this).parent().appendTo('form'); 
```

### 在 JS 中：

```
$('#dialog').dialog({draggable: true, modal: true, height: 500, width: 750, title: 'Log', true); 
```

# iphone - 手机游戏。iPad3 的 2 倍问题

> ID：11228028
> 
> 赞同：0
> 
> 时间：2012-06-27T14:03:19.270
> 
> 标签：iphone, ios, ipad

运行 iPhone 游戏时出现问题，该问题在 iPad3 上大幅降低帧速率，但在 iPad2 上没有。

在 iPad2 上点击 2x 时，它只是缩放并像以前一样工作。在 iPad3 上点击 2x 按钮时，帧速率急剧下降。

视网膜 iPhone 一直很好。

任何信息将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:23:56.880

出现这种情况是因为在新 iPad 上，当 iPad 设置为 2x 时，视网膜 iPhone 应用程序实际上会以其视网膜分辨率 (960 x 640) 正确显示。在上一代 iPad 上，当缩放到 2 倍时，它仍然使用非视网膜图形。

结果，您会看到性能损失，因为在新 iPad 上它实际上使用的是视网膜图形，而不仅仅是升级。

# email - 蚂蚁邮件IOException

> ID：11228035
> 
> 赞同：0
> 
> 时间：2012-06-27T14:03:42.390
> 
> 标签：email, ant, jakarta-mail

尝试完成 ant 邮件任务后，我收到一个无用的错误。这是有问题的代码：

```
<mail mailhost="smtp.gmail.com" user="blah" password="blahblah" enableStartTLS="true" subject="jMeter test results from nightly build.">
<from address="me@from.com"/>
<to address="me@me.com"/>
<message>This is an automated message containing results from the most recent discovery build.</message>
<attachments>
    <fileset dir="${basedir}">
        <include name="JMeter-Results*"/>
    </fileset>
</attachments>
</mail> 
```

这是错误：

```
[jmeter] Tidying up remote @ Wed Jun 27 07:40:08 MDT 2012 (1340804408618)
[jmeter] ... end of run
 [xslt] Processing C:\ant-Jmeter\Needed Files\JMeterResults.jtl to C:\ant-Jmeter\Needed Files\JMeter-Results.html
 [xslt] Loading stylesheet C:\ant-Jmeter\Needed Files\jmeter-results-detail-report_21.xsl
 [mail] Sending email: jMeter test results from nightly build.
 [mail] Failed to send email: IOException while sending message

BUILD FAILED
C:\ant-Jmeter\Needed Files\build.xml:22: Problem while sending mime mail:
Total time: 5 minutes 24 seconds 
```

这在过去可以正常工作，但我将它单独放置了几个星期，现在它无法正常工作。任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:48:52.823

不知道。可能有一种方法可以为 ant 任务打开 JavaMail 会话调试，这可能会为您提供有关问题所在的线索，或者至少可以帮助您确定这是 ant 问题还是邮件发送问题。

# sql-server - 用于创建聚集主键的 SQL Server 语法

> ID：11228039
> 
> 赞同：6
> 
> 时间：2012-06-27T14:03:50.943
> 
> 标签：sql-server, sql-server-2008-r2

我想将表移动到新文件组。使用[接受的答案作为起点](https://stackoverflow.com/a/2438060/12597)：

```
CREATE CLUSTERED INDEX CIX_YourTable
   ON dbo.YourTable(YourClusteringKeyFields)
   WITH DROP_EXISTING
   ON [filegroup_name] 
```

我调整它以适应我的使用：

```
CREATE CLUSTERED INDEX PK_AuditLog_AuditLogID
   ON dbo.AuditLog(AuditLogID)
   WITH DROP_EXISTING
   ON [TheOtherFileGroup] 
```

给出错误：

> 消息 1907，级别 16，状态 1，第 1 行
> 无法重新创建索引 'PK_AuditLog_AuditLogID'。新索引定义与现有索引强制执行的约束不匹配。

这是，我假设，因为`PK_AuditLog_AuditLogID`是

*   聚集索引
*   一个主键

所以我需要语法来创建主键聚集索引`WITH DROP_EXISTING`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T14:08:25.070

```
CREATE UNIQUE CLUSTERED INDEX PK_AuditLog_AuditLogID
   ON dbo.AuditLog(AuditLogID)
   WITH DROP_EXISTING
   ON [TheOtherFileGroup] 
```

保留了逻辑主键约束*（*尽管在 2012 年进行了测试）

```
CREATE TABLE dbo.AuditLog
(
AuditLogID int constraint PK_AuditLog_AuditLogID primary key
)

CREATE UNIQUE CLUSTERED INDEX PK_AuditLog_AuditLogID
   ON dbo.AuditLog(AuditLogID)
   WITH DROP_EXISTING
   ON [Primary]

SELECT CONSTRAINT_TYPE  /*Returns PRIMARY KEY*/
FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS
WHERE CONSTRAINT_NAME = 'PK_AuditLog_AuditLogID' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-05T20:29:11.207

尽管不适用于您的特定问题，但另一种可能性是某人可能正试图以不同于最初的顺序向 PK 添加列。`sys.indexes`如果您尝试从and中的 info 重新创建索引`sys.index_columns`，请确保您是根据以下顺序构建的`sys.index_columns.key_ordinal`

# git - 如何重写历史记录以便删除文件夹中的所有更改？

> ID：11228042
> 
> 赞同：3
> 
> 时间：2012-06-27T14:03:55.853
> 
> 标签：git

这个问题是关于重写 git 历史的。六个月前，我决定对存储库的现有子文件夹进行更改，现在我改变了主意，想要撤消该操作以及所有相关的历史记录。请注意，我希望该子文件夹之外的更改应保持原样。

因此，具体来说，我正在尝试从某个日期开始删除在 repo 的一个子文件夹中所做的所有更改的历史记录。

我希望的最终结果应该看起来像在该日期之后没有在子文件夹中进行过编辑/添加/删除。

查看[Remove file from git repository (history)](https://stackoverflow.com/questions/2164581/remove-file-from-git-repository-history)的答案，以及[http://dalibornasevic.com/posts/2-permanently-remove-files-and-folders-from-a-git-repository](http://dalibornasevic.com/posts/2-permanently-remove-files-and-folders-from-a-git-repository)，最接近的我'有是这样的：

```
git filter-branch --index-filter 'git rm -r -f --cached --ignore-unmatch TheFolderToRemove' --prune-empty --all xxxxxx..HEAD 
git reset --hard
git remote rm origin
rm -r .git/refs/original/
git reflog expire --expire=now --all
git gc --aggressive
git prune 
```

这将删除子文件夹中的所有文件。

有人可以告诉我如何修改它，以便它只删除文件夹中应用的更改吗？非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T14:15:57.760

运行`filter-branch`with`git rm --cached`告诉 git 删除目录并暂存该删除！它只做你告诉它做的事情。

### 如果您仍然有原始对象：（ ^([即您实际上并没有运行`gc`和`prune`）])

您想用于从索引中取消`git reset`对该*目录*的更改，而不是删除目录本身：

```
$ git filter-branch --index-filter 'git reset -q xxxxxx TheFolderToRemove' \
>     --prune-empty -- --all xxxxxx..HEAD 
```

您希望文件夹所在`xxxxxx`状态的提交在哪里。

### 如果您仍然没有原始对象：（^([即您从存储库中修剪了旧树）])

签出文件夹显示为已删除的提交（我相信它应该是之后的提交`xxxxxx`），撤消删除，修改提交，并将其余历史记录重新设置在顶部：

```
$ git checkout -b temp <commit_after_xxxxxx>
$ git checkout HEAD^ <removed_folder>
$ git commit --amend
[temp abcdef1] <message> 
```

然后，如果`master`是您唯一的分支：

```
$ git rebase --preserve-merges temp master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T21:22:34.847

`git filter-branch --force --index-filter 'git rm -rf --cached --ignore-unmatched somefolder/somefolder' --prune-empty --tag-name-filter cat -- --all`

-rf 参数以递归方式删除该文件夹或子文件夹中的所有文件。

# sql-server - 解释死锁并修复它

> ID：11228043
> 
> 赞同：3
> 
> 时间：2012-06-27T14:03:55.983
> 
> 标签：sql-server, sql-server-2008, entity-framework, deadlock

我需要了解这是如何可能的，即我想了解其机制。

![在此处输入图像描述](../Images/1133ad369d0709cb919888e179007a6a.png) ![在此处输入图像描述](../Images/4b1592e8aef6ac3cc9b17358677df864.png)

受害者进程是一个大的联合类型查询，涉及大约6个表（实体框架）

右边的过程是由多个语句组成的插入/更新批处理。

我不能给出 SQL，因为它们在死锁事件中被截断。

我见过涉及 2/3 表和写操作的死锁，但我无法解释这一点。发生了什么？我看到涉及索引，这是有效的索引 - 我需要它。

在一个每分钟大约 100 个这样的选择和每秒大约 1 个这样的插入的系统上，我每周可能会遇到这种死锁 3 次

```
<deadlock-list>
 <deadlock victim="process2fdc4e088">
  <process-list>
   <process id="process2fdc4e088" taskpriority="0" logused="0" waitresource="KEY: 28:72057594054049792 (7303a0672d4e)" waittime="713" ownerId="928827354" transactionname="user_transaction" lasttranstarted="2012-06-27T06:32:35.030" XDES="0x9982e3b0" lockMode="S" schedulerid="3" kpid="15300" status="suspended" spid="84" sbid="2" ecid="0" priority="0" trancount="1" lastbatchstarted="2012-06-27T06:32:35.137" lastbatchcompleted="2012-06-27T06:32:35.030" clientapp="sss" hostname="aaa" hostpid="4080" loginname="aaa" isolationlevel="read committed (2)" xactid="928827354" currentdb="28" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
    <executionStack>
     <frame procname="adhoc" line="1" sqlhandle="0x020000009b2fc809e2d580f750aacd7697bcc9fab8b85647">
SELECT 
[UnionAll2].[C3] AS [C1], 
[UnionAll2].[C4] AS [C2], 
[UnionAll2].[C5] AS [C3], 
[UnionAll2].[C6] AS [C4], 
[UnionAll2].[C7] AS [C5], 
[UnionAll2].[C8] AS [C6], 
[UnionAll2].[C9] AS [C7], 
[UnionAll2].[C10] AS [C8], 
[UnionAll2].[C11] AS [C9], 
[UnionAll2].[C12] AS [C10], 
[UnionAll2].[C13] AS [C11], 
[UnionAll2].[C14] AS [C12], 
[UnionAll2].[C15] AS [C13], 
[UnionAll2].[C16] AS [C14], 
[UnionAll2].[C17] AS [C15], 
[UnionAll2].[C18] AS [C16], 
[UnionAll2].[C19] AS [C17], 
[UnionAll2].[C20] AS [C18], 
[UnionAll2].[C21] AS [C19], 
[UnionAll2].[C22] AS [C20], 
[UnionAll2].[C23] AS [C21], 
[UnionAll2].[C24] AS [C22], 
[UnionAll2].[C25] AS [C23], 
[UnionAll2].[C1] AS [C24], 
[UnionAll2].[C26] AS [C25], 
[UnionAll2].[C27] AS [C26], 
[UnionAll2].[C28] AS [C27], 
[UnionAll2].[C29] AS [C28], 
[UnionAll2].[C30] AS [C29], 
[UnionAll2].[C31] AS [C30], 
[UnionAll2].[C32] AS [C31], 
[UnionAll2].[C33] AS [C32], 
[UnionAll2].[C34] AS [C33], 
[UnionAll2].[C35] AS [C34], 
[UnionAll2].     </frame>
    </executionStack>
    <inputbuf>
SELECT 
[UnionAll2].[C3] AS [C1], 
[UnionAll2].[C4] AS [C2], 
[UnionAll2].[C5] AS [C3], 
[UnionAll2].[C6] AS [C4], 
[UnionAll2].[C7] AS [C5], 
[UnionAll2].[C8] AS [C6], 
[UnionAll2].[C9] AS [C7], 
[UnionAll2].[C10] AS [C8], 
[UnionAll2].[C11] AS [C9], 
[UnionAll2].[C12] AS [C10], 
[UnionAll2].[C13] AS [C11], 
[UnionAll2].[C14] AS [C12], 
[UnionAll2].[C15] AS [C13], 
[UnionAll2].[C16] AS [C14], 
[UnionAll2].[C17] AS [C15], 
[UnionAll2].[C18] AS [C16], 
[UnionAll2].[C19] AS [C17], 
[UnionAll2].[C20] AS [C18], 
[UnionAll2].[C21] AS [C19], 
[UnionAll2].[C22] AS [C20], 
[UnionAll2].[C23] AS [C21], 
[UnionAll2].[C24] AS [C22], 
[UnionAll2].[C25] AS [C23], 
[UnionAll2].[C1] AS [C24], 
[UnionAll2].[C26] AS [C25], 
[UnionAll2].[C27] AS [C26], 
[UnionAll2].[C28] AS [C27], 
[UnionAll2].[C29] AS [C28], 
[UnionAll2].[C30] AS [C29], 
[UnionAll2].[C31] AS [C30], 
[UnionAll2].[C32] AS [C31], 
[UnionAll2].[C33] AS [C32], 
[UnionAll2].[C34] AS [C33], 
[UnionAll2].[C35] AS [C34], 
[UnionAll2]    </inputbuf>
   </process>
   <process id="processd5471948" taskpriority="0" logused="1204" waitresource="PAGE: 28:1:102676" waittime="864" ownerId="928827514" transactionname="user_transaction" lasttranstarted="2012-06-27T06:32:35.363" XDES="0x1e0f0d3f0" lockMode="IX" schedulerid="4" kpid="19116" status="suspended" spid="77" sbid="2" ecid="0" priority="0" trancount="2" lastbatchstarted="2012-06-27T06:32:35.377" lastbatchcompleted="2012-06-27T06:32:35.377" clientapp="DitatTMS" hostname="sss" hostpid="4080" loginname="sss" isolationlevel="read committed (2)" xactid="928827514" currentdb="28" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
    <executionStack>
     <frame procname="adhoc" line="1" stmtstart="50" stmtend="250" sqlhandle="0x020000003859c72d14e4f731cc12f95e6e3ed8b75668b3b9">
update [dbo].[MBLTripStopAttribute]
set [AttributeValue] = @0
where ([TripStopAttributeKey] = @1)     </frame>
     <frame procname="unknown" line="1" sqlhandle="0x000000000000000000000000000000000000000000000000">
unknown     </frame>
    </executionStack>
    <inputbuf>
(@0 varchar(max) ,@1 int)update [dbo].[MBLTripStopAttribute]
set [AttributeValue] = @0
where ([TripStopAttributeKey] = @1)
select [RowVersion]
from [dbo].[MBLTripStopAttribute]
where @@ROWCOUNT &gt; 0 and [TripStopAttributeKey] = @1    </inputbuf>
   </process>
  </process-list>
  <resource-list>
   <keylock hobtid="72057594054049792" dbid="28" objectname="DitatApp.dbo.MBLTripDriver" indexname="IX_MBLTripDriver_UpdatedOn_DriverKey" id="lock873ee900" mode="X" associatedObjectId="72057594054049792">
    <owner-list>
     <owner id="processd5471948" mode="X"/>
    </owner-list>
    <waiter-list>
     <waiter id="process2fdc4e088" mode="S" requestType="wait"/>
    </waiter-list>
   </keylock>
   <pagelock fileid="1" pageid="102676" dbid="28" objectname="DitatApp.dbo.MBLTripStopAttribute" id="lock92d2c200" mode="SIU" associatedObjectId="72057594055163904">
    <owner-list>
     <owner id="process2fdc4e088" mode="S"/>
    </owner-list>
    <waiter-list>
     <waiter id="processd5471948" mode="IX" requestType="convert"/>
    </waiter-list>
   </pagelock>
  </resource-list>
 </deadlock>
</deadlock-list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:21:20.650

看起来进程 84 持有一个共享意图更新页面锁 A。它正在等待 B 上的共享密钥锁。

进程 77 持有 B 上的独占键锁。它正在等待 A 上的意图独占页锁。

下一步是检索这些进程正在执行的 SQL 语句。

# php - Plesk API 中的异常 HTTP 标头

> ID：11228046
> 
> 赞同：0
> 
> 时间：2012-06-27T14:04:04.043
> 
> 标签：php, http, curl, plesk

[Plesk API](http://download1.parallels.com/Plesk/PPP9/Doc/en-US/plesk-9.5-api-rpc-guide/) *的文档提供了以下 cURL 函数。

```
function curlInit($host, $login, $password)

{

  $curl = curl_init();

  curl_setopt($curl, CURLOPT_URL, "https://{$host}:8443/enterprise/control/agent.php");

  curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);

  curl_setopt($curl, CURLOPT_POST,           true);

  curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);

  curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);

  curl_setopt($curl, CURLOPT_HTTPHEADER,

         array("HTTP_AUTH_LOGIN: {$login}",

                "HTTP_AUTH_PASSWD: {$password}",

                "HTTP_PRETTY_PRINT: TRUE",

                "Content-Type: text/xml")

  );

  return $curl;
} 
```

我有一些问题。

1.  在其他任何地方，我从未见过带有下划线的 HTTP 标头。这是文档中的错误吗？

2.  到底是`HTTP_PRETTY_PRINT`什么？搜索这个只会让我回到 Plesk 文档。我在其他任何地方都看不到它。

3.  使用`HTTP_AUTH_LOGIN`and`HTTP_AUTH_PASSWD`代替 有什么问题`CURLOPT_USERPWD`？

顺便说一句，无论我尝试什么选项，我都会收到来自 Plesk 的以下回复。

```
HTTP/1.1 404 Not Found
X-UA-Compatible: IE=EmulateIE7
Content-Type: text/html
Content-Length: 345
Date: Wed, 27 Jun 2012 14:58:15 GMT
Server: sw-cp-server 
```

```
<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>404 - Not Found</title>
 </head>
 <body>
  <h1>404 - Not Found</h1>
 </body>
</html> 
```

* Parallels Plesk Panel 9.5:: API RPC 协议开发人员指南 > 客户端代码示例 > PHP 客户端应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T05:07:57.323

1.  Plesk 使用自己的标题。在自定义 HTTP 请求中，您可以添加任何有效的标头。例如，一些网络服务器会添加自己的标题，例如“由：xxxx 提供支持”，所以没关系。
2.  漂亮的 XML 输出需要漂亮的打印头。
3.  标题`HTTP_AUTH_LOGIN`包含面板用户登录名。标题`HTTP_AUTH_PASSWD`包含面板用户密码。`CURLOPT_USERPWD`不需要。
4.  尝试使用这些选项：

    ```
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_ENCODING, 'UTF-8');
    curl_setopt($ch, CURLOPT_POSTFIELDS, $packet);
    curl_setopt($ch, CURLOPT_TIMEOUT, 1200); //wait 20min
    $response = curl_exec($ch); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:30:30.170

**对于第 4 点：**

404 表示该文件`.../enterprise/control/agent.php`已从服务器中删除。许多人在几个月前这样做是为了在补丁发布之前防止安全漏洞。我建议检查`/usr/local/psa/admin/logs/httpsd_access_log`文件是否有错误以及可用性`/usr/local/psa/admin/htdocs/enterprise/control/agent.php`

# sql - 在选择语句中使用一个单元格的值（使用 sqlcmd 运行）

> ID：11228047
> 
> 赞同：2
> 
> 时间：2012-06-27T14:04:04.840
> 
> 标签：sql, sql-server, tsql, plsql, sqlcmd

编辑：我的错误是我在第一个 select 语句之后有一个“go”，这会导致 @variableName 超出范围。

我有一堆相互依赖的查询，我想在另一个查询中使用第一个返回的值。例如，我想使用第一个查询的产品 ID：

```
SELECT ProductID,
FROM mproducts 
WHERE (ProductCode='$(product)' 
    or ProductCode='$(product)' 
    or BuildSysProductCode='$(product)'); 
```

在第二个

```
SELECT ProductVersionID, 
FROM cb_mproductversions
WHERE ProductID=***variableName***
go 
```

我研究了变量，我已经看到了一些将值存储到变量中的方法，比如做

```
DECLARE @variableName
SELECT @variableName AS productID 
FROM mproducts 
... 
```

但似乎@variableName 的范围只是下一个选择语句，当我到达 DECLARE 之后的那个之后，它说它没有被声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:08:27.627

您可以结合这两个查询：

```
SELECT ProductVersionID, 
FROM cb_mproductversions
WHERE ProductID IN
  (
     SELECT ProductID,
     FROM mproducts 
     WHERE (ProductCode='$(product)' or ProductCode='$(product)' or BuildSysProductCode='$(product)');
  ) 
```

我使用 是`IN`因为 INNER 查询可能返回多个`ProductID`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:07:27.683

像这样使用它

```
DECLARE @variableName int
SELECT @variableName = productID FROM mproducts WHERE .. 

SELECT ProductVersionID
FROM cb_mproductversions
WHERE ProductID = @variableName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:10:04.553

你可以做：

```
SELECT ProductVersionID, 
FROM cb_mproductversions
WHERE ProductID in 
(
    SELECT ProductID,
    FROM mproducts 
    WHERE (ProductCode='$(product)' or ProductCode='$(product)' or BuildSysProductCode='$(product)')
) 
```

# ios5 - 在 appdelegate 中获取选定的选项卡

> ID：11228048
> 
> 赞同：0
> 
> 时间：2012-06-27T14:04:12.897
> 
> 标签：ios5, xcode4

我想得到一个代码，我想在 appdelegate 中选择标签索引。我可以在我的视图控制器中得到这个，但我怎样才能在我的 appdelegate 中得到这个？

有人可以帮我做这件事吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:07:42.530

您可以使用 MyTabBar.selectedIndex 并将 Object 放入 AppDelegateClass 中。或者如果您已经有 TabBar Avaliable，您可以使用

```
AppDelegate *app = [[UIApplication sharedApplication] delegate];
NSLog(@"%i",app.Tab.selectedIndex); 
```

如果您需要在同一个课程中获得它，那么您可以使用

```
NSLog(@"%i",self.Tab.selectedIndex); 
```

如果您想阻止用户转到另一个选项卡，您可以使用委托

```
-(BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController{
    if (tabBarController.selectedIndex == 3) {
            //if the user will select tab  3 so user will not go to it 
        return NO;
    }else{
            // if any other tab so return yse will let you to other tabs
        return YES;
    }

} 
```

# grails - java.io.NotSerializableException 将 hasMany 更改为 ArrayList

> ID：11228050
> 
> 赞同：1
> 
> 时间：2012-06-27T14:04:17.777
> 
> 标签：grails, serialization, validation

```
class Author {

    String name

    ArrayList<Book> books = []

    static hasMany = [books: Book]

    static mapping = {
      books cascade: "all-delete-orphan"
    }

} 
```

当我尝试保存对象时发生错误。“java.io.NotSerializableException”。有任何想法吗？我需要在课堂上实现 Serializable 吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:16:42.153

这是解决方案：

```
class Author {

    String name

    SortedSet books

    static hasMany = [books: Book]

    static mapping = {
      books cascade: "all-delete-orphan"
    }

}

   class Book implements Comparable {
      String title

      static belongsTo = [author: Author]

      int compareTo(obj) {
        title.compareTo(obj.title)
      }

   } 
```

# c# - VS2008 使用 xcopy 构建错误

> ID：11228069
> 
> 赞同：0
> 
> 时间：2012-06-27T14:05:38.177
> 
> 标签：c#, .net, visual-studio-2008, build, xcopy

我从事的一个 .NET 项目最近遇到了构建错误。该项目之前构建没有问题，并且此错误在我尝试过的几台开发机器上仍然存在。我在搜索中看到了类似但不相同的帖子，这些帖子建议编辑构建命令。您如何编辑项目的构建命令，此 xcopy 命令是否存在明显问题？

自上次构建解决方案以来，没有任何更改。我只需要更新几个 ComponentOne 组件的许可。我已经恢复到以前构建的版本，现在有同样的错误。是否有任何我可能无意中做出的可能导致问题的更改？

```
xcopy C:\Subversion Code\Subversion\Mrw\trunk\MrwMeasureApp\MrwReports C:\Subversion    Code\Subversion\Mrw\trunk\MrwMeasureApp\bin\Debug\MrwReports\ /Y
Invalid number of parameters
c:\WINDOWS\Microsoft.NET\Framework\v3.5\Microsoft.Common.targets(3397,13): error MSB3073: The command "xcopy C:\Subversion Code\Subversion\Mrw\trunk\MrwMeasureApp\MrwReports C:\Subversion Code\Subversion\Mrw\trunk\MrwMeasureApp\bin\Debug\MrwReports\ /Y" exited with code 4.
Done building project "MrwMeasureApp.vbproj" -- FAILED. 
```

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:08:21.920

您应该将参数用引号括起来，就像这样。

```
xcopy
   "C:\Subversion Code\Subversion\Mrw\trunk\MrwMeasureApp\MrwReports"
   "C:\Subversion Code\Subversion\Mrw\trunk\MrwMeasureApp\bin\Debug\MrwReports\"
   /Y 
```

仅为可见性而断开的线条。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:09:06.727

您应该引用路径参数：

```
xcopy "C:\Subversion Code\Subversion\Mrw\trunk\MrwMeasureApp\MrwReports" "C:\Subversion Code\Subversion\Mrw\trunk\MrwMeasureApp\bin\Debug\MrwReports\" /Y 
```

# mysql - 确保列中的值不同

> ID：11228071
> 
> 赞同：0
> 
> 时间：2012-06-27T14:05:50.940
> 
> 标签：mysql, sql, database, stored-procedures, stored-functions

我有一个表，其中的值不应该相同。由于糟糕的实现软件不会检查以确保用户是否输入了重复项，因此我被委托编写一个“简单”的 sql 语句或函数来查看列中的所有值并确保它们不是完全相同的。sql 本身将每月执行一次，因此它不必高效。

该列存储 int ，我想增加一个重复值，并且每次都继续这样做，直到表中没有更多条目具有该列的相同值。有什么建议我应该怎么做？我不知道从哪里开始。

感谢任何人的洞察力。

编辑：抱歉忘了提到数据中不重复的值应该保持不变。这些是用于客户的设置，只有当它们具有重复值时我们才应该惩罚它们。如果他们不这样做，那么我们不应该破坏他们的设置，否则他们会生气。

它只是一张表，包含很多列，但这一特定列特别是 int 类型并且从不包含任何空值，不应该有任何重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:20:32.920

要了解问题的大小，请尝试以下内容，它是 Oracle 语法，因为我不知道 mysql，但应该有一个等价物。

```
SELECT your_col, COUNT(your_col)
  FROM your_table
 GROUP BY your_col 
```

我真的不认为当你发现一个重复值时增加一个值是要走的路，你可能会在解决第一个重复值时创建另一个重复值，有效地在每个增量之后你必须从头开始再次检查。正确的方法是对用于输入数据的任何内容添加验证以拒绝任何重复项。那么至少你只需要清理一次数据。

抱歉，如果这不是您所希望的:-)

ETA 你的公司错了，每周运行一次 sql 不会便宜，至少从长远来看是这样。你在需要缝合的东西上打石膏。现在接受打击并解决根本问题要好得多，首先，一个不想要任何重复的列，但无论如何都允许输入它们？有一个主要的 WTF 开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:22:07.827

```
 create table tableName (KeyCol int identity(1,1), intCol int)
 insert into tableName values (1), (2), (2), (3), (5), (6), (5), (7), (9)

While exists (
    select intCol
    from tableName
    group by intCol
    having count(*) > 1
)
begin

    declare @newValue int

    select @newValue = min(t1.intCol) + 1
    from tableName t1
    left join tableName t2
    on t1.intCol + 1 = t2.intCol
    where t2.intCol is null

    update tx
    set intCol = @newValue
    from tableName tx
    where intCol = 
    (select top 1 intCol
    from tableName t1
    group by intCol
    having count(*) > 1
    order by intCol)
    and KeyCol = (select min(KeyCol) from tableName t2 where t2.intCol = tx.intCol)
end

select * from tableName order by 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:10:32.323

为什么不删除此列并使用唯一数据重新创建或重新填充它并在其上放置 UNIQUE INDEX？

# vba - 用于从少于 4 个字符的列中删除行的宏

> ID：11228074
> 
> 赞同：0
> 
> 时间：2012-06-27T14:05:58.993
> 
> 标签：vba, excel

当特定“NAME”列中的字符少于 4 个时，我正在使用以下代码尝试删除整行。（即第 1 行中的标题为 NAME 的列） 数据库当前有大约 10,000 行。我知道现在的代码很接近，但是在尝试运行它时出现 VB 错误。我想我可能会按名称错误地搜索特定列。

```
Sub Macro2()

' Macro to delete rows if there are less than 4 in the NAME column

    Dim LR As Long, i As Long
    Application.ScreenUpdating = False
    LR = Range("NAME" & Rows.Count).End(xlUp).Row
    For i = LR To 1 Step -1
        If Len(Range("NAME" & i).Value) < 4 Then Rows(i).Delete
    Next i
    Application.ScreenUpdating = True

End Sub 
```

编辑：我在以下行中收到 VBA 错误：

```
LR = Range("NAME" & Rows.Count).End(xlUp).Row 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:08:54.973

正如其他人在上述评论中提到的那样，您的陈述

```
LR = Range("NAME" & Rows.Count).End(xlUp).Row 
```

并且，

```
Len(Range("NAME" & i).Value) 
```

只是在您给定的程序中对 VBA 没有任何意义，因为它们相当于说。

```
Range(Name81).Value '81 is a random number 
```

除非您的工作簿中有一个名为 Name81（或任何其他数字）的已定义名称，否则该代码将产生运行时错误。

我认为这会让你想要你想要的：

```
Sub Macro2()

' Macro to delete rows if there are less than 4 in the NAME column

    Dim LR As Long, i As Long, lngCol as Long

    lngCol = Rows(1).Find("NAME",lookat:=xlWhole).Column 'assumes there will always be a column with "NAME" in row 1

    Application.ScreenUpdating = False

    LR = Cells(Rows.Count, lngCol).End(xlUp).Row

    For i = LR To 1 Step -1

        If Len(Cells(i, lngCol).Value) < 4 Then Rows(i).Delete

    Next i

    Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-10T20:51:08.180

对于下面的答案。如何编辑代码以使行删除仅适用于某一行及以下？IE。如果这应该从第 4 行开始运行。

子宏2()

' 如果 NAME 列中少于 4 行，则删除行的宏

```
Dim LR As Long, i As Long, lngCol as Long

lngCol = Rows(1).Find("NAME",lookat:=xlWhole).Column 'assumes there will always be a column with "NAME" in row 1

Application.ScreenUpdating = False

LR = Cells(Rows.Count, lngCol).End(xlUp).Row

For i = LR To 1 Step -1

    If Len(Cells(i, lngCol).Value) < 4 Then Rows(i).Delete

Next i

Application.ScreenUpdating = True 
```

结束子

# android - Android - 子类化 ImageView - 错误膨胀类

> ID：11228076
> 
> 赞同：1
> 
> 时间：2012-06-27T14:06:00.470
> 
> 标签：android, android-layout, android-4.0-ice-cream-sandwich

所以我知道“错误膨胀类”通常是因为构造函数丢失或格式错误......但我让 eclipse 生成它们，它们看起来与我见过的其他示例相似。该错误指向我试图将自定义类添加到布局的 XML 文件。

我假设我必须以某种方式声明扩展的 ImageView，但我不知道如何这样做。您可以提供的任何帮助将不胜感激。

错误

```
06-27 09:12:18.655: D/AndroidRuntime(1487): Shutting down VM
06-27 09:12:18.655: W/dalvikvm(1487): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-27 09:12:18.675: I/dalvikvm(1487): threadid=3: reacting to signal 3
06-27 09:12:18.715: I/dalvikvm(1487): Wrote stack traces to '/data/anr/traces.txt'
06-27 09:12:18.755: E/AndroidRuntime(1487): FATAL EXCEPTION: main
06-27 09:12:18.755: E/AndroidRuntime(1487): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mytheral.android.AnimationTimer/com.mytheral.android.AnimationTimer.AnimationTimerActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class AnimationImageView
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.os.Looper.loop(Looper.java:137)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at java.lang.reflect.Method.invokeNative(Native Method)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at java.lang.reflect.Method.invoke(Method.java:511)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at dalvik.system.NativeStart.main(Native Method)
06-27 09:12:18.755: E/AndroidRuntime(1487): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class AnimationImageView
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.app.Activity.setContentView(Activity.java:1835)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at com.mytheral.android.AnimationTimer.AnimationTimerActivity.onCreate(AnimationTimerActivity.java:15)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.app.Activity.performCreate(Activity.java:4465)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-27 09:12:18.755: E/AndroidRuntime(1487):     ... 11 more
06-27 09:12:18.755: E/AndroidRuntime(1487): Caused by: java.lang.ClassNotFoundException: android.view.AnimationImageView
06-27 09:12:18.755: E/AndroidRuntime(1487):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.view.LayoutInflater.createView(LayoutInflater.java:552)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:636)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
06-27 09:12:18.755: E/AndroidRuntime(1487):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
06-27 09:12:18.755: E/AndroidRuntime(1487):     ... 21 more 
```

XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <AnimationImageView
        android:id="@+id/progress_bar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

动画定时器活动

```
package com.mytheral.android.AnimationTimer;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class AnimationTimerActivity extends Activity {
    /** Called when the activity is first created. */

    private static final String TAG = "AnimationTimer";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Log.v(TAG, "onCreate");
        AnimationImageView image= (AnimationImageView) findViewById(R.id.progress_bar);

        image.StartAnimation();
    }
} 
```

动画图像视图

```
package com.mytheral.android.AnimationTimer;
import java.util.Timer;
import java.util.TimerTask;
import android.content.Context;
import android.net.Uri;
import android.os.Handler;
import android.os.Message;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.ImageView;

public class AnimationImageView extends ImageView {

    private static final String TAG = "AnimationImageView";

    private Timer imgTimer;
    private int currentFrame = 0;
    private int maxFrame = 269; //Testing Value
    private String fileName = "green_flag_"; //Testing Value

    public int getCurrentFrame() {
        return currentFrame;
    }

    public void setCurrentFrame(int currentFrame) {
        this.currentFrame = currentFrame;
    }

    public int getMaxFrame() {
        return maxFrame;
    }

    public void setMaxFrame(int maxFrame) {
        this.maxFrame = maxFrame;
    }

    public String getFileName() {
        return fileName;
    }

    public void setFileName(String fileName) {
        this.fileName = fileName;
    }

    public AnimationImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public AnimationImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public AnimationImageView(Context context) {
        super(context);
    }

    public void StartAnimation() {

        Log.v(TAG, "onCreate");

        currentFrame = 0;
        maxFrame = 269;
        imgTimer = new Timer();

        try {
            imgTimer.scheduleAtFixedRate(new TimerTask() {

                @Override
                public void run() {

                    imgUpdateHandler.sendEmptyMessage(0);

                }}, 0, 67);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private Handler imgUpdateHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            Log.v(TAG, "imgUpdateHandler: currentFrame: " + currentFrame);

            Uri imgUri;

            if (currentFrame <= maxFrame) 
            {
                int i = currentFrame;

                imgUri = Uri.parse("android.resource://com.mytheral.android.AnimationTimer/drawable/" + fileName + String.format("%04d", i));

                //Uncomment if images don't cycle... Prior Android work around
                //image.setImageURI(null);

                try {
                    setImageURI(imgUri);
                } catch (Exception e) {
                    e.printStackTrace();
                }

                currentFrame++;
            }

            if (currentFrame > maxFrame) 
            {
                Log.v(TAG, "imgUpdateHandler: stopAnimation");

                imgTimer.cancel();
                imgTimer.purge();
            }
        }       
    };
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T14:07:14.603

而不是这种用途

```
<AnimationImageView 
```

利用

```
<com.mytheral.android.AnimationTimer.AnimationImageView
     android:id="@+id/progress_bar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" /> 
```

或者

```
<view class="com.mytheral.android.AnimationTimer.AnimationImageView"
         android:id="@+id/progress_bar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" /> 
```

/>

# linux - 如何在我的 64 位 RHEL6 上获取 libpam.so.0（32 位）？

> ID：11228078
> 
> 赞同：7
> 
> 时间：2012-06-27T14:06:10.733
> 
> 标签：linux, db2, redhat

我正在尝试在我的 RHEL6 机器上安装 DB2 Enterprise Server。不幸的是，它似乎需要 32 位版本的 libpam.so.0 来执行某些例程。这台机器运行 64 位版本，似乎安装了 lib……我假设它是 64 版本。有什么方法可以获取和安装 DB2 安装程序使用的 32 位版本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-25T17:07:39.107

yum install pam.i686 是您应该在命令行中输入的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T16:35:58.090

这可能是相关的，[http: //www-01.ibm.com/support/docview.wss?uid=swg21573357](http://www-01.ibm.com/support/docview.wss?uid=swg21573357)

看来你需要安装 pam-1.1.1-10.el6.i686.rpm

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-26T22:01:45.383

另一种方法是安装 package `libpam.so.0`，它代表 32 位版本的 libpam：

```
yum install libpam.so.0 
```

这在 Db2 LUW V11.1 文档的表 1 中有所提及。SLES 和 RHEL 发行版的软件包要求：

[https://www.ibm.com/docs/en/db2/11.1?topic=servers-linux#r0008865__t-sles-rhel](https://www.ibm.com/docs/en/db2/11.1?topic=servers-linux#r0008865__t-sles-rhel)

# python - Python，删除目录：错误文件存在

> ID：11228079
> 
> 赞同：6
> 
> 时间：2012-06-27T14:06:11.173
> 
> 标签：python, unix, python-2.4

我需要开发一个脚本来启动一些计算。A 希望此脚本通过删除一些临时目录来正确处理 ^C。我在 signal_handler 中尝试了几个版本的代码：

```
shutil.rmtree(self.temp) 
```

甚至

```
os.system("rm -rf " + self.temp) 
```

当我中断执行并调用处理程序以删除目录时，我收到如下错误：

```
OSError: [Errno 17] File exists : 'foo' 
```

或者

```
rm: Unable to remove directory foo: File exists 
```

执行后，我要删除的目录是空的，可以`rm -r`在shell中用a删除。但是，如果我执行代码：

```
for f  in os.listdir(self.temp):
    os.remove(os.path.join(self.temp,f))

for f in os.listdir(self.temp):
    print f

os.rmdir(self.temp) 
```

当然，我遇到了错误，但是第二个循环找到了这个文件：`.nfsA13D3`

有人可以解决我的问题吗？谢谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T07:22:10.273

这是 nfs 挂载文件系统的一个众所周知的问题，*并且*您的某些实用程序没有关闭文件。即使您将其删除，操作系统也可以使文件保持活动状态，但在涉及 nfs 时这是不可能的。操作系统的解决方案是创建该临时 .nfs 文件并保留它，直到文件描述符正在使用中。

这个问题没有真正的解决方案。当最后一个描述符关闭时，.nfs 文件将消失，但（空）目录仍然存在。唯一可能的解决方法是找到仍然打开的文件描述符并关闭它，但这取决于它是否在您的程序中。就我而言，它在一个外部的编译库中，我没有机会找到它泄漏的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T06:58:40.657

感谢您的评论，我在我的 python 代码中打开文件，而我的 signal_handler 没有检查我的文件对象是否已关闭。这就是为什么我无法在脚本中删除包含这些文件的目录。

# animation - 使用数组动画图像

> ID：11228081
> 
> 赞同：0
> 
> 时间：2012-06-27T14:06:23.263
> 
> 标签：animation, uiimage

我正在使用这样的数组为一些图像设置动画

```
NSArray *weatherFrames = [NSArray array];
weatherFrames = [[NSArray alloc] initWithObjects:
             [UIImage imageWithData:Data1],
             [UIImage imageWithData:Data2],
             [UIImage imageWithData:Data3],
             [UIImage imageWithData:Data4],
             [UIImage imageWithData:Data5],                 
             nil];
weatherImage.animationImages = weatherFrames;
weatherImage.animationDuration = 10.00;
weatherImage.animationRepeatCount = 1;
[weatherImage release]; 
```

我想要做的是当有人触发呼叫（即来自 IBAction）时暂停动画。这是可能的还是有更好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:09:40.183

[我从这里](https://stackoverflow.com/questions/11103227/pause-uiimageview-animation)的答案中复制了解决方案。

```
-(void)pauseLayer:(CALayer*)layer
{
    CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
    layer.speed = 0.0;
    layer.timeOffset = pausedTime;
}

-(void)resumeLayer:(CALayer*)layer
{
    CFTimeInterval pausedTime = [layer timeOffset];
    layer.speed = 1.0;
    layer.timeOffset = 0.0;
    layer.beginTime = 0.0;
    CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;
    layer.beginTime = timeSincePause;
} 
```

而要让 CALayer 传递给 pauseLayer 函数，可以使用以下代码。

```
CALayer *player = ImageView.layer;
[self pauseLayer:player]; 
```

# android - Sim 联系人不会显示

> ID：11228090
> 
> 赞同：1
> 
> 时间：2012-06-27T14:07:06.617
> 
> 标签：android, android-contacts

我刚刚创建了一个应用程序，当我按下一个按钮并检索所选联系人的号码时，我设法获取了电话联系人。

我的问题是我只看到电话联系人而不是 SIM 联系人。

我的代码是：

```
@Override
    public void onActivityResult(int reqCode, int resultCode, Intent data) {
        super.onActivityResult(reqCode, resultCode, data);
        if (resultCode!=0){
             Uri uri = data.getData();
             Cursor cursor=this.getContentResolver().query(uri, null, null, null, null);

                while (cursor.moveToNext()) { 
                String contactId = cursor.getString(cursor.getColumnIndex( 
                  ContactsContract.Contacts._ID)); 
                String hasPhone = cursor.getString(cursor.getColumnIndex( 
                  ContactsContract.Contacts.HAS_PHONE_NUMBER)); 
                if ((Integer.parseInt(cursor.getString( cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0)) { 
                             // You know have the number so now query it like this
             Cursor phones = getContentResolver().query( 
               ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
               null, 
               ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ contactId, 
                   null, null); 
                 while (phones.moveToNext()) { 

                  phoneNumber = phones.getString( 
                   phones.getColumnIndex( 
                      ContactsContract.CommonDataKinds.Phone.NUMBER));

                 } 
                 phonenumber.setText(phoneNumber);

                 phones.close(); 
                } 
              }

        }

    } 
```

还有一些我无法理解的东西。

Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI); 开始活动（意图）；

显示所有联系人，但我不能选择一个和结果

Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI); startActivityForResult(intent, 1);

只显示手机中的联系人，这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T06:38:19.270

将此添加到您的意图中：

```
intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE); 
```

其他都很好。

# c++ - C++ OpenGL 从 2D 切换到 3D

> ID：11228093
> 
> 赞同：1
> 
> 时间：2012-06-27T14:07:12.503
> 
> 标签：c++, opengl, perspective, orthographic, projection-matrix

我在 C++ Visual Studio 2008 Forms 应用程序中使用 OpenGL，当布尔设置为真/假时，我希望 GL 控件在 3D 和 2D 之间切换。

3D 绘图工作正常，2D 绘图工作正常，从一个切换到另一个时出现问题。因此，如果我在 2D 中启动应用程序绘图，它可以完美地工作并且与 3D 相同，但是如果我在运行时更改布尔值，它将不会绘制任何东西。

这是我从一个更改为另一个的代码。

```
if(opciones->draw3D){
    GL::MatrixMode(MatrixMode::Modelview);
    GL::LoadIdentity();
    GL::Viewport(0, 0, w, h);
    Matrix4 lookat = Matrix4::LookAt(100, 100, 100, 0, 0, 0, 0, 0, 1);
    GL::LoadMatrix(lookat);
    GL::Scale(this->zoom, this->zoom, this->zoom);

    GL::Rotate(xrot, 1.0f, 0.0f, 0.0f);
    GL::Rotate(yrot, 0.0f, 1.0f, 0.0f);
    GL::Clear(ClearBufferMask::ColorBufferBit | ClearBufferMask::DepthBufferBit);
    GL::ClearColor(Color::LightGray);
// Draw3D
}
else {
    GL::MatrixMode(MatrixMode::Projection);
    GL::LoadIdentity();
    GL::Ortho(5, w-5, 5, h-5, -1, 1); 
    GL::Viewport(5, 5, w-5, h-5); 

    GL::Clear(ClearBufferMask::ColorBufferBit|ClearBufferMask::DepthBufferBit);
    GL::ClearColor(Color::LightGray);
    GL::MatrixMode(MatrixMode::Modelview);
    GL::LoadIdentity();

// Draw 2D
} 
```

我不知道做错了什么，但我想我没有清除一些矩阵或其他东西，因为就像我之前所说的，当变量`draw3D==true`在开始时它完美地绘制并且当变量`draw3D==false`在开始时它完美地绘制在 2D 中，但运行时的更改使其无法正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T14:11:16.567

您需要将投影矩阵设置为 3D 模式。我猜默认情况下您的框架正在为您设置透视投影。当您在 2d 部分执行 GL::Ortho() 时，这将被覆盖。

# javascript - Freebase - Javascript 中的 MQL

> ID：11228095
> 
> 赞同：1
> 
> 时间：2012-06-27T14:07:15.120
> 
> 标签：javascript, freebase, mql

freebase 网站上的示例

[http://wiki.freebase.com/wiki/MQL_Manual_Javascript_Example](http://wiki.freebase.com/wiki/MQL_Manual_Javascript_Example)

使用[http://api.freebase.com/api/service/mqlread](http://api.freebase.com/api/service/mqlread)

```
<script>                                
function listAlbums(band) {     // Display albums by the specified band.
    var envelope = {                       // The mqlread query envelope
    query : {                          // The MQL query 
        type: "/music/artist",         // Find a band
        name: band,                    // With the specified name
        album: [{                      // We want to know about albums
        name:null,                 // Return album names
        release_date:null,         // And release dates
        sort: "release_date",      // Order by release date
        "release_type!=":"single"  // Don't include singles
        }]
    }
    };

    var output = $("#output");                          // Output goes here
    output.html("<h1>Albums by " + band + "</h1>");     // Display a title

    // Invoke mqlread and call the function below when it is done.
    // Adding callback=? to the URL makes jQuery do JSONP instead of XHR.
    jQuery.getJSON("http://api.freebase.com/api/service/mqlread?callback=?",
           {query: JSON.stringify(envelope)},   // URL parameters
           displayResults);                     // Callback function

    // This function is invoked when we get the result of our MQL query
    function displayResults(response) {  
    if (response.code == "/api/status/ok" &&        
        response.result && response.result.album) { // Check for success...
        var list = $("<ul>");                       // Make <ul> tag.
        output.append(list.hide())                  // Keep it hidden
        var albums = response.result.album;         // Get albums.
        jQuery.each(albums, function() {            // Loop through albums.
        list.append($("<li>").html(this.name)); // Make <li> for each.
        });
        list.show("normal");                        // Reveal the list
    }
    else {                                          // On failure...
        output.append("Unknown band: " + band);     // Display message.
    }
    }
}
</script> 
```

这显然已被弃用；是否有使用新的[https://www.googleapis.com/freebase/v1/mqlread](https://www.googleapis.com/freebase/v1/mqlread) API 的代码示例？似乎在网上找不到太多（我仍在学习绳索）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T22:29:32.550

新 API 发生了一些变化。您可以使用这样的新 API 在 Javascript 中运行相同的查询：

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
</head>
<body>
<script>
  var API_KEY = 'YOUR-API-KEY-GOES-HERE';
  var service_url = 'https://www.googleapis.com/freebase/v1/mqlread';
  var band = "The Rolling Stones";
  var query = {                         
    type: "/music/artist",        
    name: band,                   
    album: [{                     
    name:null,                
    release_date: null,        
    sort: "release_date",     
    "release_type!=":"single"  
    }]
  };
  var params = {
    'key': API_KEY,
    'query': JSON.stringify(query)
  };
  $.getJSON(service_url + '?callback=?', params, function(response) {
    $.each(response.result.album, function(i, album) {
      $('<div>', {text:album['name']}).appendTo(document.body);
    });
  });
</script>
</body>
</html> 
```

# python - 如何从从第四个选项卡开始到行尾的行中删除文本？

> ID：11228096
> 
> 赞同：1
> 
> 时间：2012-06-27T14:07:15.370
> 
> 标签：python, parsing, tabs

我刚开始编程，所以我有点菜鸟。

我正在尝试使用 python 从 .txt 表中删除一列。所有列都由制表符分隔。这是一个示例行：

```
100226.SCO0401  1   440 COG0001 glutamate-1-semialdehyde 2,1-aminomutase 
```

我想删除第四个选项卡之后的行中的所有文本（“谷氨酸-1-半醛 2,1-氨基变位酶”部分）。

我见过一些人导入 csv 来解决这个问题，但我在想一些简单的事情，比如：

```
def remove(infilename, outfilename):
    # Open original file and output file
    infile = open(infilename, 'rt')
    outfile = open(outfilename, 'wt')

    # Read lines and remove annotation
    for line in infile:
        outfile.write(line['**everything-until-the-fourth-tab**']

    # Close files
    infile.close()
    outfile.close() 
```

粗体部分是我现在的问题。有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:08:28.100

用于`.split('\t')`将行中的条目拆分为数组。然后，您可以使用 对数组进行切片`[:4]`，只保留前 4 个元素。最后，再次加入它`'\t'.join`：

```
for line in infile:
     columns = line.split('\t')
     columns = columns[:4]
     outfile.write('\t'.join(columns)) 
```

作为一个单行：

```
for line in infile:
     outfile.write('\t'.join(line.split('\t')[:4])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:31:48.857

我认为使用该`csv`模块可能是最简单的解决方案：

```
with open(infilename, 'rb') as infile, open(outfilename, 'wb') as outfile:
    writer = csv.writer(outfile, delimiter='\t')
    for row in csv.reader(infile, delimiter='\t'):
        writer.writerow(row[:4]) 
```

# ios - 我应该学习原生 iOS 开发（Objective-C）还是完善我在 Javascript 和 Titanium Appcelerator 方面的知识？

> ID：11228099
> 
> 赞同：8
> 
> 时间：2012-06-27T14:07:23.137
> 
> 标签：ios, titanium, native, appcelerator-mobile

基本上我需要你的建议，我的好朋友：D

在过去的六个月里，我正在使用[Titanium Appcelerator](http://www.appcelerator.com/)移动框架探索/学习/开发 iOS 应用程序。我的经历大多是好的或非常好的。

**Titanium 的一些负面**影响会浪费时间，尤其是在设备上进行测试时。仅使用 Xcode（本机）时，您的应用程序会立即在设备上启动，而使用 Titanium 您必须等待一段时间（1-2 分钟）才能构建应用程序，然后将其安装到设备上（iTunes 或 iPhone 配置）效用）。

基本上你可以在本地做的所有事情都可以用 Javascript + Titanium 来做。如果 Titanium 不支持 iOS 框架的某些部分，您可以构建一个原生 Objective-C 模块并在您的 Javascript 代码中包含这些功能。

我现在使用 Titanium Appcelerator 并使用 Javascript 构建应用程序感到非常自在。我还在为 iOS 构建一些模块时学习了一些 Objective-C。例如。我在我的第一个 iOS 应用[Spellery中使用的](http://itunes.apple.com/us/app/id517057897)[DeviceMotion](https://github.com/Dino4674/Movement)。

**现在的问题**：

大多数公司只想要本地开发人员并且对 Titanium 持怀疑态度。Titanium 与其他跨平台 SDK（例如 PhoneGap）不同，因为在这里您实际上使用了本机组件（按钮、标签等）并且您的应用程序没有在 WebView 中运行。但如果公司想要原生，那么你不能强迫他们使用 Titanium。

由于我想将开发移动应用程序作为工作，我是否应该放弃过去六个月对 Titanium 的深入探索并学习本地编程这些应用程序？

你对此有什么想法，因为我认为学习/完善它们没有任何意义？

我现在是 Appcelerator Titanium 的忠实粉丝，所以这是一个非常沉重的决定。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T14:12:53.293

坦率地说，我仍然建议学习更多的 Objective-C。它是一种非常强大的语言，它旨在让您更轻松地处理 Apple 认为必需的许多事情（例如，动画、持久性、数据库、MVC）。Apple 非常紧密地围绕 Objective-C 设计了他们的框架，要真正很好地使用它们，你必须从他们的语言中使用它们。另外，您还知道哪些其他语言？一方面，我发现 Objective-C 在来自 C/C++ 和脚本语言 (Ruby) 之后要容易得多。这完全取决于你想要在你的应用中有多少 iOSness。即使它 Titanium 可以让用户端感受到 iOSy，iOSy 代码实际上编写和维护真的很有趣。它可以是一个非常漂亮的框架。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-29T10:11:31.637

Ahhhmmmm ...我不确定stackoverflow管理员是否会删除我的答案。请原谅我，我将花几分钟时间阅读这篇冗长的回复（如果您有兴趣继续阅读）。

我在 2010 年创办了自己的公司。我们只在基于 php、mysql、html、jquery 的网站上工作。随着移动平台越来越受到关注，我们开始开发基于 Sencha Touch + PhoneGap 的移动应用程序。2011 年底，我用 Sencha Touch + PhoneGap 培训了我的 12 名开发人员。您可以了解在一个新框架中学习和培训一个由 12 名开发人员组成的团队需要付出多少努力。

在开发了两打以上基于PhoneGap的专业应用程序之后，我们意识到它与原生应用程序相去甚远。只有一个例子就足够了——PhoneGap 应用程序需要更长的时间来将初始 html 页面加载到 webview 中。在启动画面之后出现一个空白的白色屏幕（在 android 上更可怕！）。在最近的 phonegap 版本中，它已修复。但是使用 phonegap 的人非常清楚它与真正的 obj-c 应用程序还有多远。我们在PhoneGap+Sencha Touch 框架中工作了一年。

我们停止了在 PhoneGap 的工作，并开始在 Titanium 中学习和培训我的 12 个人。我知道从头开始创建另一个新框架是多么艰巨的工作。我们与钛合作了 2 年，为 iOS 和 Android 开发了 30 多个成功的钛专业应用程序。我们有开发钛模块的专家。举个例子，我们在 iOS 和 Android 上都开发了 PayPal 钛模块。（你一定是在傻笑，这有什么了不起的！它已经由钛团队开发了）。不，不使用旧的 MPL 库。我们使用了最新的 Paypal sdk 2.8.0，并且没有可用的在线模块使用它。

2014 年年中，我们开始开发 Tinder/Lovoo 克隆类型的应用程序。我们为类似的动画开发了一个 ti 模块（通过实现 UIView drawRect）。一切正常。但是当它在 iPhone 上运行时，设备变得过热，并且动画页面上的电池电量急剧耗尽。我们创建了一个示例演示 Xcode 应用程序并应用了相同的动画，在 Instruments 中进行了测试，一切都很好。内存或处理器没有过载，设备保持凉爽，电池性能良好。我们尝试了一切可能的方法来使其在钛模块中变得更好，但没有运气。最后发现钛本身需要巨大的足迹来运行它自己庞大的框架，并且对于每一个动作，它都会触发大量代理事件并继续监听不必要的事件。复杂的 UIView 动画让它变得疯狂。这只是一个例子 - 在 android 上它是一个很长的故事。

为什么公司决定使用钛？第一个答案是它是跨平台的。您只需在 js 中编写代码，它就可以在 iOS 和 Android 上运行。哈哈。。开个玩笑！对于真正的专业应用程序来说并非如此。Android版本有很多差异和错误，Android版本还有很多工作要做。实际上，我们永远无法为 Android 使用相同的 iOS 代码库精确副本。因此，跨平台理论仅适用于课堂项目。如果您不相信我制作了一个简单的钛 android 项目来捕获图像，请将其上传到服务器上，然后从服务器再次显示它。拿一个 Galaxy S5，在横向模式下（右手边的主页按钮）拍照（不是纵向模式），你可以看到图像方向搞砸了。哦！我忘了，如果你在服务器上上传图片，从钛的安卓应用程序中，图片扩展名变成 .txt

在 Obj-C UINavigationController 中，popToRootViewControllerAnimated 方法是导航回主页的重要功能。这个方法在 Titanium 中是不可用的！

我们花了数百个额外的时间来解决这些尴尬的问题。我的开发团队厌倦了钛。

你现在肯定会问我，为什么我们一开始没有启动 Obj-C？所有钛金属开发人员的答案都是一样的——Javascript 很简单，Web 开发人员已经熟悉它。这是一个大错误。我们将 iPhone 应用程序视为 Web 应用程序。一个网络应用程序在网络浏览器上运行，更具体地说，它在 iPhone 上运行在 iPhone 的 Safari 中。“Safari”本身是一款移动应用，我们希望 Web 应用能够以相同的速度以类似的视觉动画形式运行，这是不可能的。CSS3 动画永远不会与基于 iOS 矢量的 UIView 动画相同。

iOS 不是一个框架或库，它是一个操作系统。Titanium 是一个用 Obj-C 编写的框架。你不能在 Titan 中使用 Xcode 的 Storyboard UI 设计工具。Xcode 开发人员知道 UI 界面设计的“约束”是多么性感。而这种使用约束的视觉吸引力在 Titanium 中是完全缺失的。虽然 ti 团队声称我们可以使用 Ti.UI.FILL/SIZE 等进行约束。但是在我们迁移到原生 Obj-C 之后，我们知道这个约束系统是多么强大！

我只是把头发拉出来，后悔为什么我害怕看到那些带有方括号的 Obj-C 语法并跳回钛合金。仅仅看着 Obj-C 的不熟悉的语法，感觉就像你回到了现代几十年。幸运的是 Swift 的存在，现在在 Xcode 中编写代码变得更加容易。尽管将现有的流行且强大的 Obj-C 库（如 AFNetworking、MBProgressHUD、OpenCV）迁移到 Swift 需要一些时间。

老实说，我真的觉得 Titanium、PhoneGap、Xamarin 等跨平台框架应该被禁止。他们的执照应该被吊销。Titan 是否为您提供原生 iOS 或 Android 中没有的任何额外功能？相反，功能少得多，错误多得多。我不明白为什么，他们如何利用这种现代尖端技术将人们拉回过去，而没有人能阻止他们！引导开发者走错方向怎么可能是合法的？如果 iOS 9 “今天”发布，Titanium 会在下周内为您提供所有新的 API 吗？绝不。他们只是让你退缩，让你不得不使用他们有限的错误 API 集，你需要为模块付费，这可以很容易地在本机代码中完成。

如果你精通javascript，逻辑感强，相信我你可以在很短的时间内学会Obj-C。当您失去调试钛问题的时间和精力时，您可以在本机 Obj-C 中变得更有效率。嗯..关于android我不会说那么高。因为 Android 永远无法与 iOS 相提并论。iOS 诞生于 Mac OS，一个成熟的桌面操作系统。你知道安卓。

不要陷入跨平台困境的陷阱。大量的 Titanium API 仅适用于 iOS，你知道为什么，Android 设备便宜，硬件便宜，不能流畅地运行动画。

最后，远离任何一种平台，坚持纯原生操作系统，不管一开始有多难，从长远来看，你会得到很好的回报，相信我！

对于 Titanium 团队，我查看了您的 Obj-C 和 Java 源代码。我很尊重你们，你们确实是 Obj-C、Java、node.js、python 和 javascript 方面的专家并且经验丰富。但为什么？你为什么把人们引向错误的方向？您非常清楚构建钛金属 android/ios 模块并对其进行测试浪费了多少时间。你为什么不把你的努力放在更好的东西上。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-27T14:58:55.230

我同意之前答案中所说的一切，您似乎已经接受回到光明的一面——不错的选择！

我只想补充一点：不要将这六个月视为浪费。在您使用 Titanium 期间，您了解了很多技术细节，以及 iOS 的可能性和局限性，当您切换到 Objective-C 时，这些应该会很有用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-27T14:24:04.687

我敢打赌，很多其他人会加入其他“重复”问题的帖子，以及他们自己的激烈意见。所以我会把它留给他们，并提供我自己的经验。

我认为有充分的理由深入了解两者。原因如下：

Titanium 可让您真正快速地构建应用程序，而且它每天都在变得越来越可靠。我最近构建了一个应用程序来直接比较 Titanium、本机和几个竞争对手框架之间的开发时间。Native大约是一个半星期。竞争对手大约是 2 周。钛是3天。这给了我很多时间来玩这个应用程序，并使产品比竞争对手好得多。我还能够让它在 Android 和移动 Web 上运行得一样好。我有大约 5 个基于平台的条件，所以代码有很好的奇偶性。

Native 有你提到的优势。我要补充一点，您还可以访问平台提供的任何内容。了解原生将告诉您如何构建应用程序（即使使用 JavaScript），以及如何为这些应用程序构建模块。您也可以尝试打开 Titanium 生成的 Xcode 项目，并通过它直接在设备上运行。您可能需要进行干净的构建（在 Xcode 中），但它比通过 iTunes 运行更快。

另外，我认为 Objective-C 本身就是一门优美的语言。它与我“长大”时使用的代码（Java、C#、PHP、VB 等）非常不同。花了一段时间才习惯它，但我很高兴我投入的时间。

免责声明：我为 Appcelerator 工作。希望你能在上面区分观点和事实。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-27T14:21:35.467

要添加到@Linuxios 的出色答案：

既然你说你想进入移动开发作为职业，那么绝对要学习 Objective-C、XCode 和 iOS SDK。最后，这将取决于您、您的雇主以及在某种程度上您的客户的需求。但了解 iOS 是必不可少的。

此外，根据我的经验，如果应用程序很复杂，那么原生将是可行的方法，如果仅仅是为了便于调试，并且正如您所说，构建时间更短。

**更新**：要补充的另一件事是，如果性能是关键（即游戏），那么本机（C/C++/Objective-C）是要走的路。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-27T14:12:57.127

查看您感兴趣的职位发布，这应该可以回答您的问题。如果雇主正在寻找 XCode 专业知识并且对 Titanium 不感兴趣，那么请关注 XCode...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-29T10:26:04.273

从我的角度来看，学习原生应用程序开发、iOS 和 Android 总是非常有用的。正如您已经提到的，大多数公司都在寻找原生应用程序开发人员，因为他们不想过多地依赖外部公司或框架，而不是平台的实际开发人员（Android、iOS 等）。我还认为，一旦你能够开发原生应用程序，这比使用 Titanium 或 PhoneGap 等框架要容易得多。此外，提高自己的技能总是好的，尤其是原生应用程序开发是一个可以学到很多东西的领域。不仅仅是语言，还有底层移动操作系统的架构。特别是对于苹果来说，我认为学习原生开发是至关重要的。

最后但同样重要的是，我建议您继续使用 Swift。它是一种伟大而强大的语言，修复了 Objective-C 的许多弱点。您基本上可以使用 Swift 从头开始​​，而不需要 Objective-C。完整的 Cocoa-API 可以通过 Swift 访问。但如果你愿意，你仍然可以结合 Objective-C 和 Swift。例如，如果您需要使用尚未在 Swift 中实现的外部库。

希望我能帮到你一点。

# python - 使用 Python 的简单动态 Web 应用程序

> ID：11228101
> 
> 赞同：1
> 
> 时间：2012-06-27T14:07:30.953
> 
> 标签：python, event-handling

我将如何编写一个基本上看起来像这样的简单 Web 应用程序（实际上，它没有，但一旦我得到以下部分，我将能够从那里找到我的方式）：

1.  用户登录（即我需要某种身份验证）。
2.  用户输入一个数字。
3.  每 X 秒，服务器计算在前 X 秒内输入的所有数字的平均值。
4.  向用户显示平均值。
5.  数字最接近平均值的（唯一）用户在他的分数帐户上获得 +1。

对于服务器端脚本，我想使用 Python。对于数据库访问，我将使用 SQLAlchemy。服务器是 Apache。假设我已经使用以下字段设置了数据库：用户名、密码（散列）、分数。我知道怎么做（2）、（4）和（5）。对于 (4) 我可能会使用 XMLHttpRequest 虽然我不确定这是否是最好的解决方案。因为我的最终应用程序无论如何都需要 JavaScript，所以 XMLHttpRequest 应该没问题。

@(1) 我想我可以在 Python 中使用“Cookie”模块找到解决方案，但我不知道这是否是正确的方法。那么，什么是会话管理的简单但安全的方法呢？

@(3) 这是我正在努力解决的主要问题。我已经查看了“套接字”模块，但我不确定这是否适合该任务。显然，我需要有一些循环

1.  听 X 秒并收集所有数字
2.  计算平均值，确定最近的用户
3.  更新用户帐户

我不关心的一件事是与旧浏览器或 IE 的合规性。

你能推荐一些我应该研究的东西，或者甚至提供一些代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:20:34.170

好的，首先你需要将 Python 连接到 apache - 为此我推荐[mod_wsgi](http://code.google.com/p/modwsgi/)。

然后到第 1 步 - 您可以创建自己的 Web 表单并查询用户的密码，并为他们设置一个 cookie 以记住他们的会话（您可以将活动会话存储在数据库中或使用一些加密技巧将其保存在 cookie 中） .

关于其他功能，您只需要在 python 后端和前端之间进行良好的通信 - 我建议在前端使用[jQuery](http://jquery.com/)，它可以解析来自您的应用程序的 XML，或者如果它真的很简单，只需输出字符串并让 webapp拿来。

在进入最终实现之前，我建议您阅读[AJAX 教程](http://kooneiform.wordpress.com/2010/02/28/python-and-ajax-for-beginners-with-webpy-and-jquery/)，该教程似乎很好地涵盖了基础知识，您可以使用内置服务器进行调试，而无需打扰 apache 设置。

或者，您可以使用框架（例如非常轻量级的[Bottle](http://bottlepy.org/docs/dev/)），这将为您节省大量时间。

此外，关于您正在努力解决的问题-您实际上不需要守护程序检查，因为可以在每次访问时计算数据-只需确保您使用时间戳存储您的提交。另外，您没有说如果在最后 X 秒时间范围内没有提交会发生什么 - 正确答案是零吗？

最后，这似乎是一个相当“动态”的应用程序——你将如何确保没有竞争条件？如果不采取一些特殊的预防措施，在高流量环境中可能很难获得可靠的结果。

# html - 如何在我自己的应用程序中从 iTunes 中提供 30 秒的歌曲预览

> ID：11228102
> 
> 赞同：1
> 
> 时间：2012-06-27T14:07:31.550
> 
> 标签：html, itunes

我正在实现一个用于创建音乐播放列表的 Web 应用程序，并从 iTunes 加载歌曲元数据。现在我想通过我的网站进行 30 秒的歌曲预览。谁能告诉我这可能没有注册 iTunes 附属程序？

# java - 如何根据复选框状态创建标签？

> ID：11228103
> 
> 赞同：1
> 
> 时间：2012-06-27T14:07:34.797
> 
> 标签：java, arrays, dynamic, checkbox, labels

我正在编写一个小程序来购买音乐。基本上它有 16 首歌曲，song1、song2、song3、song4 等作为复选框。用户应该能够选择他/她想要购买的歌曲，然后单击添加到购物车以显示购物车。根据在前一屏幕中所做的检查，购物车应该有标签。

例如：如果选中歌曲 1、3 和 5，购物车应显示三个标签 - 歌曲 1、3 和 5。

那么，如何在检查的基础上创建标签，而不必事先创建 16 个标签，从而弄得一团糟？我应该以某种方式使用数组吗？

这有点复杂，因为我已经在卡片布局中创建了复选框。我写了一个小程序（使用普通的旧记事本），带有单选按钮来选择一种流派。选择一个单选按钮会显示 4 首歌曲（这是我使用卡片的地方）。

```
 content_cat.setLayout(new BoxLayout(content_cat,                

                                BoxLayout.Y_AXIS));
   content_cat.add(Box.createRigidArea(new Dimension(0,30)));
   category_label = new JLabel("Select the category");
   category_label.setAlignmentX(Component.CENTER_ALIGNMENT);
   content_cat.add(category_label);
   content_cat.add(Box.createRigidArea(new Dimension(0,30)));
   pop = new JRadioButton("Pop");
   pop.setAlignmentX(Component.LEFT_ALIGNMENT);
   content_cat.add(pop);
   content_cat.add(Box.createRigidArea(new Dimension(0,30)));
   rock = new JRadioButton("Rock");
   rock.setAlignmentX(Component.LEFT_ALIGNMENT);
   content_cat.add(rock);
   content_cat.add(Box.createRigidArea(new Dimension(0,30)));
   jazz = new JRadioButton("Jazz");
   jazz.setAlignmentX(Component.LEFT_ALIGNMENT);
   content_cat.add(jazz);
   content_cat.add(Box.createRigidArea(new Dimension(0,30)));
   hiphop = new JRadioButton("Hip hop");
   hiphop.setAlignmentX(Component.LEFT_ALIGNMENT);
   content_cat.add(hiphop);
   content_cat.add(Box.createRigidArea(new Dimension(0,30)));

   group = new ButtonGroup();
   group.add(pop);
   group.add(rock);
   group.add(jazz);
   group.add(hiphop);

   pop.addItemListener(this);
   rock.addItemListener(this);
   jazz.addItemListener(this);
   hiphop.addItemListener(this);

   //List Panel

   content_list = new Panel();
   gbc_content.gridx = 1;
   gbc_content.gridy = 0;
   gbc_content.weightx = 3;
   gbc_content.weighty = 1; 
   gbc_content.fill = GridBagConstraints.BOTH;
   content.add(content_list,gbc_content);

    content_list.setLayout(new GridBagLayout());

    //List Title Panel

    list_title = new Panel();
    gbc_list.gridx = 0;
    gbc_list.gridy = 0;
    gbc_list.weightx = 1;
    gbc_list.weighty = 1; 
    gbc_list.fill = GridBagConstraints.BOTH;
    content_list.add(list_title,gbc_list);
    list_label = new JLabel("List of CD's Available");
    list_title.add(list_label);

    //List Cards Panel

    list_card = new Panel();
    list_card.setLayout(new CardLayout());
    gbc_list.gridx = 0;
    gbc_list.gridy = 1;
    gbc_list.weightx = 1;
    gbc_list.weighty = 4; 
    gbc_list.fill = GridBagConstraints.BOTH;
    content_list.add(list_card,gbc_list);

    //Pop card

    card_pop = new Panel();
    card_pop.setLayout(new BoxLayout(card_pop,                     

                                               BoxLayout.Y_AXIS));
    card_pop.add(Box.createRigidArea(new Dimension(0,30)));
    pop1 = new JCheckBox("21 - Adele");
    pop1.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_pop.add(pop1);
    card_pop.add(Box.createRigidArea(new Dimension(0,30)));
    pop2 = new JCheckBox("D'elles - Celine Dion");
    pop2.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_pop.add(pop2);
    card_pop.add(Box.createRigidArea(new Dimension(0,30)));
    pop3 = new JCheckBox("Invincible - Michael Jackson");
    pop3.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_pop.add(pop3);
    card_pop.add(Box.createRigidArea(new Dimension(0,30)));
    pop4 = new JCheckBox("Speak Now - Taylor Swift");
    pop4.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_pop.add(pop4);
    card_pop.add(Box.createRigidArea(new Dimension(0,30)));

     //Rock card

    card_rock = new Panel();
    card_rock.setLayout(new BoxLayout(card_rock,                   

                                               BoxLayout.Y_AXIS));
    card_rock.add(Box.createRigidArea(new Dimension(0,30)));
    rock1 = new JCheckBox("Let It Be - Beatles");
    rock1.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_rock.add(rock1);
    card_rock.add(Box.createRigidArea(new Dimension(0,30)));
    rock2 = new JCheckBox("Viva la Vida - Coldplay");
    rock2.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_rock.add(rock2);
    card_rock.add(Box.createRigidArea(new Dimension(0,30)));
    rock3 = new JCheckBox("Meteora - Linkin Park");
    rock3.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_rock.add(rock3);
    card_rock.add(Box.createRigidArea(new Dimension(0,30)));
    rock4 = new JCheckBox("Dark Horse - Nickelback");
    rock4.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_rock.add(rock4);

    //Jazz card

    card_jazz = new Panel();
    card_jazz.setLayout(new BoxLayout(card_jazz,                   

                                               BoxLayout.Y_AXIS));
    card_jazz.add(Box.createRigidArea(new Dimension(0,30)));
    jazz1 = new JCheckBox("Come Sing With Me - Frank Sinatra");
    jazz1.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_jazz.add(jazz1);
    card_jazz.add(Box.createRigidArea(new Dimension(0,30)));
    jazz2 = new JCheckBox("Closer - Josh Groban");
    jazz2.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_jazz.add(jazz2);
    card_jazz.add(Box.createRigidArea(new Dimension(0,30)));
    jazz3 = new JCheckBox("Little Broken Hearts - Norah Jones");
    jazz3.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_jazz.add(jazz3);
    card_jazz.add(Box.createRigidArea(new Dimension(0,30)));
    jazz4 = new JCheckBox("Genius and Friends - Ray Charles");
    jazz4.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_jazz.add(jazz4);
    card_jazz.add(Box.createRigidArea(new Dimension(0,30)));

    //Hiphop card

    card_hiphop = new Panel();
    card_hiphop.setLayout(new BoxLayout(card_hiphop,               

                                               BoxLayout.Y_AXIS));
    card_hiphop.add(Box.createRigidArea(new Dimension(0,30)));
    hiphop1 = new JCheckBox("Curtis - 50 Cent");
    hiphop1.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_hiphop.add(hiphop1);
    card_hiphop.add(Box.createRigidArea(new Dimension(0,30)));
    hiphop2 = new JCheckBox("Freedom - Akon");
    hiphop2.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_hiphop.add(hiphop2);
    card_hiphop.add(Box.createRigidArea(new Dimension(0,30)));
    hiphop3 = new JCheckBox("Relapse - Eminem");
    hiphop3.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_hiphop.add(hiphop3);
    card_hiphop.add(Box.createRigidArea(new Dimension(0,30)));
    hiphop4 = new JCheckBox("Takin' Over");
    hiphop4.setAlignmentX(Component.LEFT_ALIGNMENT);
    card_hiphop.add(hiphop4);
    card_hiphop.add(Box.createRigidArea(new Dimension(0,30)));

    pop1.addItemListener(this);
    pop2.addItemListener(this);
    pop3.addItemListener(this);
    pop4.addItemListener(this);

    rock1.addItemListener(this);
    rock2.addItemListener(this);
    rock3.addItemListener(this);
    rock4.addItemListener(this);

    jazz1.addItemListener(this);
    jazz2.addItemListener(this);
    jazz3.addItemListener(this);
    jazz4.addItemListener(this);

    hiphop1.addItemListener(this);
    hiphop2.addItemListener(this);
    hiphop3.addItemListener(this);
    hiphop4.addItemListener(this);

  list_card.add(card_pop,POP);
  list_card.add(card_rock,ROCK);
  list_card.add(card_jazz, JAZZ);
  list_card.add(card_hiphop, HIPHOP); 
```

底部有一个按钮可以“添加到购物车”。单击它时，它会打开一个带有购物车的新框架，这就是我要显示所选歌曲的地方。

这是事件处理代码

```
public void itemStateChanged(ItemEvent e)
{
 CardLayout cl = (CardLayout)(list_card.getLayout());
 if(e.getSource() == pop)
 cl.show(list_card, POP);
 if(e.getSource() == rock)
 cl.show(list_card,ROCK);
 if(e.getSource() == jazz)
 cl.show(list_card, JAZZ);
 if(e.getSource() == hiphop)
 cl.show(list_card, HIPHOP);
}

public void actionPerformed(ActionEvent e)
{
 if(e.getSource() == atc) //add to cart button
  {
   cart = new JFrame("Cart");
   cart.setVisible(true);
  }
} 
```

所以基本上，使用 appletviewer 或网络浏览器打开小程序，选择每个流派下需要的歌曲，单击添加到购物车以显示购物车的框架。

抱歉复制粘贴这么多代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:26:42.693

像这样的东西怎么样：

创建歌曲：

```
ArrayList<String> songsSelection = new ArrayList();
ArrayList<Song> songs = new ArrayList();

//add all songs you want
songs.add( new Song(1, "Song 1")); 
songs.add( new Song(1, "Song 1")); 
songs.add( new Song(1, "Song 1")); 
```

创建一个动作以识别选择，在这里您可以根据复选框状态删除或添加歌曲到选择

```
class SongAction implements ActionListener{
    public void actionPerformed(ActionEvent e) {
        JCheckBox temp = (JCheckBox)e.getSource();
        if (temp.isSelected())
            songsSelection.add(temp.getName());
        else
            songsSelection.remove(temp.getName());
        updateCart();
    }
} 
```

创建复选框

```
for(Song s : songs){
    JCheckBox cb = new JCheckBox(s.getName());
    cb.addActionListener(new SongAction());
    frame.add( cb );
} 
```

现在您可以在选择后更新您的购物车

```
public void updateCart(){
    panel.removeAll(); // clean the labels container
    for(String name : songsSelection ){
        panel.add(new JLable(name))
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:13:04.363

在我看来，这里真正的问题是您是否需要使用标签？使用 JTextArea 来显示选择购买的歌曲不是同样有效且容易得多吗？

# iphone - 无法设置视图控制器的委托

> ID：11228104
> 
> 赞同：1
> 
> 时间：2012-06-27T14:07:35.593
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, delegates

我正在尝试像这样推送视图控制器：

```
SampleViewControllerB *svcb = [self.storyboard instantiateViewControllerWithIdentifier:@"viewB"];
svcb.delegate = self;
[self.navigationController pushViewController:svcb animated:YES]; 
```

如果我删除该 `svcb.delegate = self;`行，它可以正常编译并正常工作。但是，如果我尝试添加它，它将无法编译并给出错误

```
Property 'delegate' not found on object of type 'SampleViewControllerB *' 
```

有人知道如何解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:14:36.100

这是你的问题。你必须`delegate`在你的类中定义你自己的属性，并自己调用它。请务必记住也要制定委托协议！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:09:28.193

`UIViewControler`没有委托属性，如果您需要向您添加委托，`SampleViewControllerB`则需要显式定义它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:13:35.050

在 SampleViewControllerB 的 .h 中制作 parentViewController 变量说..

```
ParentViewController *parentObject ; 
```

并使其具有相同的属性

```
@property(nonatomic,retain) ParentViewController *parentObject ; 
```

并在 SampleViewControllerB 类的 .m 中合成

```
@synthesize parentObject ; 
```

现在使用您推送控制器的代码

```
SampleViewControllerB *svcb = [self.storyboard instantiateViewControllerWithIdentifier:@"viewB"];
svcb.parentObject = self;
[self.navigationController pushViewController:svcb animated:YES]; 
```

希望对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:10:29.787

对于 Delegate 属性，您需要在 SampleViewControllerB 类的协议中添加委托方法。

# javascript - Math.floor(Math.random()) +1 实际上做了什么？

> ID：11228111
> 
> 赞同：6
> 
> 时间：2012-06-27T14:07:42.577
> 
> 标签：javascript

当您`Math.floor(Math.random()*10)+1`应该根据我的理解选择1-10之间的随机数时。

但是，当我将 更改为`+1`更高或更低的任何数字时，`1`我会得到相同的结果。为什么是这样？究竟是什么`+1`意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T14:11:13.810

随机数生成器产生一个 0.0 <= n < 1.0 范围内的值。如果您想要一个介于 1 和某个数字之间的数字，则需要应用`+1`偏移量。

一般可以使用：

```
Math.floor(Math.random() * N) + M 
```

这将生成 M 和 M + N - 1 之间的值。

**[演示小提琴](http://jsfiddle.net/dLL8P/1/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T14:10:07.480

`Math.random()`生成一个介于 0 和 1 之间的随机数。

因此`Math.random()*10`生成一个 0 到 10 之间的随机数，以及`(Math.random()*10)+1`一个 1 到 11 之间的数字。

`Math.floor()`去掉这个数字的小数，并使它成为一个从 0 到 10 的整数。

[您可以在此处查看](http://jsfiddle.net/wwnTr/)逻辑的顺序进展

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-07T19:02:55.393

整数在 1 到 10 之间

*   **Math.random()**生成 0 到 1 之间的数字（有很多小数位）。

等：math.random() [随机返回：0.19157057767733932]
（*这个数字仍然有很多小数位*）

要获得随机整数，您需要将随机生成的数字乘以 10。

etc
math.random()*10 =[随机返回：2.9757621488533914]

*   由于该数字仍有许多小数位，请使用**floor() 方法**将数字向下/最近的整数舍入，这将给出 0 到 9 之间的 ua 值。然后，您可以加 1 使其成为 1 到 10 之间的数字。

等：
math.floor(0.6) [return 0]
math.floor(0.6)+ 1 [return 1]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-17T14:35:03.873

基本的：

`(random() >= 0)`总是`true`

`(random() < 1)`总是`true`

`(Math.floor(random()) == 0)`总是`true`

最大：

`(Math.floor(random() * 10) >= 0)`总是`true`

`(Math.floor(random() * 10) < 10)`总是`true`

最低限度：

`(Math.floor(random() * 10) + 1 >= 1)`总是`true`

`(Math.floor(random() * 10) + 1 < 11)`总是`true`

最大回合：

`(Math.round(random() * 10, 0) >= 0)`总是`true`

`(Math.round(random() * 10, 0) <= 10)`总是`true`

# spring - 弹簧秒表 - 嵌套调用

> ID：11228120
> 
> 赞同：0
> 
> 时间：2012-06-27T14:08:12.453
> 
> 标签：spring, stopwatch

我正在使用此链接[http://www.wikijava.org/wiki/Spring_Timer](http://www.wikijava.org/wiki/Spring_Timer)中介绍的方式使用弹簧秒表。我想测量方法的嵌套部分，即有统计数据将输出执行方法 x 所需的总时间以及执行从方法 x 或方法 z 调用的另一个方法 y 的部分所需的时间从 y 调用，依此类推。（嵌套调用）。
但我不能这样做，它给了我一个错误，秒表已经在运行并且不能停止它两次。请问，您对如何完成此操作有任何建议。任何形式的帮助表示赞赏。提前致谢，

错配

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:28:35.403

我不认为 Spring Stopwatch 有那么花哨，您可以根据需要进行嵌套测量。您需要做什么来使用新的 StopWatch 实例测量每个嵌套层。如果您希望输出看起来嵌套，您可以尝试使用一个 stopWatch 中的 prettyPrint 作为另一个 stopWatch 的任务名称，但我不确定结果如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:12:39.880

使用没有单个静态实例的秒表实用程序`StopWatch`。

# assembly - 数据十进制转二进制

> ID：11228123
> 
> 赞同：-1
> 
> 时间：2012-06-27T14:08:18.880
> 
> 标签：assembly, binary, integer-arithmetic

1.  将 X10 转换为二进制 X2 ；您必须确定并准确说明以二进制表示 X10 需要多少位。将表示 X2 所需的位数四舍五入到最接近的 4 的倍数，并以该位数表示 X2，每个 4 位组之间有一个空格。

x10 58927634 我已将 x10 转换为 x2

11100000110010101000010010

但我无法理解它所说的部分，将表示 X2 所需的位数的值四舍五入到最接近的 4 倍数，请我真的需要帮助我只需要一个解释来解决这个问题我不需要回答只是解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:13:56.843

您只需要确定需要多少位来表示您的十进制数 - 然后将其四舍五入，使其成为 4 的倍数。示例：

```
Decimal = 19
Binary = 10011
Bits needed (minimum) = 5
Bits needed (rounded up) = 8
Final binary string = 0001 0011

Decimal = 58927634
Binary = 11100000110010101000010010
Bits needed (minimum) = 26
Bits needed (rounded up) = 28
Final binary string = 0011 1000 0011 0010 1010 0001 0010 
```

# android - 单击刷新菜单按钮后如何强制更新位置？

> ID：11228125
> 
> 赞同：3
> 
> 时间：2012-06-27T14:08:23.283
> 
> 标签：android, google-maps

我只是想知道单击菜单中的刷新项后是否可以强制更新位置以获取移动设备的位置。

这是我在论坛中找到的以下代码，我想添加一个新功能。

```
import android.os.Bundle;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

import com.google.android.maps.OverlayItem;

import android.graphics.drawable.Drawable;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.Toast;

public class MapLocator extends MapActivity implements LocationListener {
    /** Called when the activity is first created. */

     private MapView mapView;
     private LocationManager lm;
     private MapController mc;
     private double lat = 0;
     private double lng = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);

    mapView = (MapView) this.findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);

    mc = mapView.getController();
    mc.setZoom(14);

    int FIVE_MINUTES = 5 /*Minutes*/ * 60 /*sec per min*/ * 1000 /*ms per sec*/;
    lm = (LocationManager) this.getSystemService(LOCATION_SERVICE);
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,  FIVE_MINUTES, 0, this);
    lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,  FIVE_MINUTES, 0, this);

     Drawable drawable= this.getResources().getDrawable(R.drawable.loc_seven);
     ListItimizedOverlay itemizedoverlay = new ListItimizedOverlay(drawable);
     GeoPoint p = new GeoPoint(33000000,84000000);
     OverlayItem overlayitem = new OverlayItem(p, "Hello from", "Tahiti");
     itemizedoverlay.addOverlayItem(overlayitem);
     mapView.getOverlays().add(itemizedoverlay);

}

 @Override
 protected boolean isRouteDisplayed()
 {
 return false;
 }

 @Override
 public boolean onKeyDown(int keyCode, KeyEvent event)
 {
     if (keyCode == KeyEvent.KEYCODE_S)
     {
         mapView.setSatellite(!mapView.isSatellite());
         return true;
     }
 return super.onKeyDown(keyCode, event);
 }

 @Override
 public void onLocationChanged(Location location)
 {
     Log.d("msg","1");

     lat = location.getLatitude();
     lng = location.getLongitude();
        Toast.makeText(
                getBaseContext(),
                "Location change to : Latitude = " + lat + " Longitude = "
                    + lng, Toast.LENGTH_SHORT).show();
     GeoPoint p = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
     mc.animateTo(p);
     mc.setCenter(p);
     mc.setZoom(14);
     Drawable drawable= this.getResources().getDrawable(R.drawable.loc_seven);
     ListItimizedOverlay itemizedoverlay = new ListItimizedOverlay(drawable);
     OverlayItem overlayitem = new OverlayItem(p, "", "");
     itemizedoverlay=  (ListItimizedOverlay ) mapView.getOverlays().get(0);
     itemizedoverlay.clear();
     itemizedoverlay.addOverlayItem(overlayitem);
     mapView.getOverlays().add(itemizedoverlay);

 }

 @Override
 public void onProviderDisabled(String provider)
 {
 }

 @Override
 public void onProviderEnabled(String provider)
 {
 }

 @Override
 public void onStatusChanged(String provider, int status, Bundle extras)
 {
 }

  //Menu with 2 items Refresh and exit

    public boolean onCreateOptionsMenu(Menu menu2) {

        MenuInflater inflater = getMenuInflater();

        inflater.inflate(R.layout.menumap, menu2);

        return true;
     }

      public boolean onOptionsItemSelected(MenuItem item) {

          switch (item.getItemId()) {
            case R.id.refresh:
                /* 
---------------------------------------------------------------------------------------
 code to add in order to refrech the location and position the mobile  
on the map using the drawable in the itemizedoverlay. I have tried this : 
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,  0, 0, this);
    lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);
and nothing is changed i still see the old position on the map

and I have tested the app on a sony Ericsson Xperia x10.

I am using google API 10 if this might help.

------------------------------------------------------------------------------------------
*/

                return true;

           case R.id.exit:

               finish();
               return true;
         }
         return false;}

} 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T14:59:05.290

这段代码应该可以解决问题：

```
 lm.requestSingleUpdate(LocationManager.GPS_PROVIDER, this, null);
        Location loc = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        lat = loc.getLatitude();
        lng = loc.getLongitude(); 
```

# mysql - MySQL索引问题，对于中大表上相对少量的索引行，简单查询耗时太长

> ID：11228130
> 
> 赞同：1
> 
> 时间：2012-06-27T14:08:37.207
> 
> 标签：mysql, performance, indexing

我有一个相对较大的表（5,208,387 行，400mb 数据/670mb 索引），我用来搜索的所有列都是索引。 `name`并且`type`是 VARCHAR(255) BTREE INDEX 并且`sdate`是包含时间戳的 INTEGER 列。

我无法理解一些问题，首先这个查询很慢（5秒）：

```
SELECT *
FROM `mytable`
WHERE `name`  LIKE 'hello%my%big%text%thing%'
AND `type` LIKE '%'
ORDER BY `sdate` DESC LIMIT 3 
```

解释以上内容：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE      mytable range   name        name    257 NULL    5191    Using where 
```

虽然这个速度非常快（5 毫秒）：

```
SELECT *
FROM `mytable`
WHERE `name`  LIKE 'hello.my%big%text%thing%'
AND `type` LIKE '%'
ORDER BY `sdate` DESC LIMIT 3 
```

解释以上内容：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE      mytable range   name        name    257 NULL    204 Using where 
```

由于索引，扫描的行数不同是有意义的，但是拥有 5k 个索引行需要 5 秒似乎太多了。

此外，排序`name`而不是`sdate`使查询非常快，但我需要按时间戳排序。

我不明白的第二件事是，在将最后一列添加到索引之前，数据库的索引为 1.4GB，而不是在运行 OPTIMIZE/REPAIR 之后，大小仅为 670MB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:16:48.133

问题是，只有第一个*之前*`%`的部分可以利用索引，其余的`like`字符串需要处理所有匹配`hello%`或`hello.my%`没有帮助的行。此外，按另一列排序然后使用索引，可能需要第二遍，或者至少是扫描而不是已经排序的索引。获得更好性能的选项（可以彼此独立实施）是：

1.  在 name 列上使用全文索引并使用`MATCH() AGAINST()`搜索而不是`LIKE`使用`%`'s。
2.  添加`sdate`to in 索引`combined (name,sdate)`可以很好地加速排序。

# vb.net - 在 Visual Basic 中通过另一个项目启动一个项目

> ID：11228136
> 
> 赞同：0
> 
> 时间：2012-06-27T14:08:42.590
> 
> 标签：vb.net

我在vb中的记事本程序存放在C:\libraries\My Documents\Visual Studio 2010\Projects\notepad\notepad\bin\debug\notepad.exe
而我的井字游戏程序存放在C:\libraries\My Documents\Visual Studio 2010\Projects\Tic-Tac-Toe\Tic-Tac-Toe\bin\debug\Tic-Tac-Toe.exe

这些是应用程序的路径（双击时将运行的路径）

现在，我想在 Visual Basic 中创建第三个项目。它只有两个按钮。一，运行井字游戏和另一个运行记事本。我如何实现这一目标？也就是说，当我单击另一个项目上的按钮时，如何使一个项目运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:16:29.693

您只需调用该`Process.Start`方法并将要启动的可执行文件的文件路径传递给它。还有其他方法可以提供更大的灵活性，但我想这足以满足您的需要。例如：

```
Process.Start("C:\libraries\My Documents\Visual Studio 2010\Projects\notepad\notepad\bin\debug\notepad.exe") 
```

但是，我建议将路径放在 app.config 或其他配置位置，因为该路径可能会在其他 PC 上更改。

# php - 从html制作动态网页

> ID：11228137
> 
> 赞同：0
> 
> 时间：2012-06-27T14:08:44.293
> 
> 标签：php, javascript, html

我有一个网页可以检索数据（通过 ajax/php）并将其显示在 html div（`id='parent'`）中。我想添加一个打印功能，它将获取内容`parent`并将其显示在另一个页面中。

我以前从未制作过动态网页。我显示的所有信息都只是通过 ajax 拉到主页上。所以我真的不知道从哪里开始。我认为这与我在许多互联网站点的 url 中看到的那些长字符串有关，但我不知道！我是否只使用 url 字符串来存储有关页面当前状态的信息，以便用户可以使用后退按钮返回到他们正在查看的内容。后退按钮会自动工作，还是我必须听它并根据我从该字符串中提取的内容重新加载页面？

非常感谢有人能给我指出一些好的文章或制定一些我应该采取哪些步骤的模式

1.  从页面中提取数据
2.  把它放在另一个页面上（或者它是另一个页面？我只是清除我所在的页面并用其他数据重新填充它吗？？）
3.  启用后退按钮以返回第一页。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:17:41.733

您正在谈论的那些长字符串听起来像 SessionID。这个想法是，您将需要在网站请求之间共享的所有数据存储在服务器上，并通过此 ID 识别用户，以便在她请求下一个网站时检索正确的数据集。

PHP 已经支持这种开箱即用的方式。PHP 会话处理功能的文档可以在这里找到： [http ://www.php.net/manual/en/book.session.php](http://www.php.net/manual/en/book.session.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:19:38.010

要将 ajax 中的数据放入另一个标签中，您可以执行以下操作

```
<script>
var page_request = false;

function ajax_request(url)
{
    if (window.XMLHttpRequest) // if Mozilla, Safari etc
        page_request = new XMLHttpRequest()
    else if (window.ActiveXObject)
    { // if IE
        try
        {
            page_request = new ActiveXObject("Msxml2.XMLHTTP");
        } 
        catch (e)
        {
            try
            {
                page_request = new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch (e) {}
        }
    }
    else
        return false

    page_request.open('GET', url);
    page_request.send(null);

    return page_request.responseText;
}

function ChangeDiv(id, url)
{
    document.getElementById(id).innerHTML =  ajax_request(url);
}
</script> 
```

然后只需使用您想要的 url 调用 ChangeDiv（例如 'http://website.com/page.php?params=1'）

# iphone - [__NSDate timeIntervalSinceNow]：消息发送到释放的实例

> ID：11228139
> 
> 赞同：0
> 
> 时间：2012-06-27T14:08:44.683
> 
> 标签：iphone

为在 iPhone 设备上测试应用程序而按两次倒带时应用程序崩溃并显示消息`[__NSDate timeIntervalSinceNow]: message sent to deallocated instance`

```
-(void)pauseTimer{
pauseStart = [[NSDate dateWithTimeIntervalSinceNow:0] retain];

previousFireDate = [[timer fireDate] retain];

[timer setFireDate:[NSDate distantFuture]];
}

-(void)dealloc
{
[audioPlayer release];
[pauseStart release];
[previousFireDate release];
[super dealloc];
}

  -(void)playpauseAction:(id)sender {

if([audioPlayer isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
    [audioPlayer pause];
    [self pauseTimer];
    [self pauseLayer:self.view.layer];
}else{
    [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
    [audioPlayer play];
    [self resumeTimer];
    [self resumeLayer:self.view.layer];

    if(isFirstTime == YES)
    {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                      target:self
                                                    selector:@selector(displayviewsAction:)
                                                    userInfo:nil
                                                     repeats:NO];
        isFirstTime  = NO;
    }
   } 
   }

 -(void)rewind:(id)sender{
[timer invalidate];
audioPlayer.currentTime = 0;
MainViewController *viewController = [[[MainViewController alloc] init]autorelease];
viewController.view.frame = CGRectMake(0, 0, 320, 480);
[self.view addSubview:viewController.view]; 
[self.view addSubview:toolbar];
[self playpauseAction:_playButton];
} 
```

当再次按下倒带按钮并故意在 iphone 设备上测试应用程序时，应用程序崩溃并给出消息**[__NSDate timeIntervalSinceNow]: message sent to deallocated instance**

任何想法有什么问题。

感谢帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:28:01.773

已移除

```
 [pauseStart release];
  [previousFireDate release]; 
```

从 dealloc 方法。

这解决了我的问题。

# c# - Windows 窗体到 WPF MVVM

> ID：11228142
> 
> 赞同：0
> 
> 时间：2012-06-27T14:08:53.000
> 
> 标签：c#, .net, wpf, xaml, mvvm

我正在使用 MVVM 模式和绑定将代码从 Windows 窗体重构为 WPF。

我的 Windows 窗体代码：

```
searchCriteriaListBox.Items.Add("Cat"); 
```

我的 WPF XAML：

```
<ListBox Height="288" HorizontalAlignment="Left" Margin="18,206,0,0" VerticalAlignment="Top" Width="1042" /> 
```

如何使用 WPF 绑定实现相同的“添加”操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:17:23.340

将 Page/Window/UserControl（根级别的）的 DataContext 设置为 ViewModel。

`Items`在 ViewModel 中创建属性。

使用以下作为 searchCriteriaListBox 的绑定

```
 {Binding Items, Mode=TwoWay}

<ListBox  ItemsSource="{Binding Items, Mode=TwoWay}" Height="288" HorizontalAlignment="Left" Margin="18,206,0,0" VerticalAlignment="Top" Width="1042" /> 
```

在视图模型中，放置一个 AddItemCommand。

在 AddItemCommand.Execute 中，将项目添加到 Items 集合

将[MVVM Light](http://mvvmlight.codeplex.com/)用于一些可重用的项目，并[使用 Model-View-ViewModel 设计模式阅读 WPF 应用程序](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:32:01.760

将您的列表框绑定到一个可观察的集合，然后简单地从该集合中添加/删除项目以进行更新，您实际上不应该将数据添加到 xaml 中的框中。

看看这个视频，我发现它在学习 mvvm 时非常有用 - [http://www.youtube.com/watch?v=tKfpvs7ZIyo](http://www.youtube.com/watch?v=tKfpvs7ZIyo)

# .net - 无法在 Windows Server 2008 R2 上的 IIS7.5 中获得 net.pipe 绑定

> ID：11228144
> 
> 赞同：5
> 
> 时间：2012-06-27T14:09:03.123
> 
> 标签：.net, wcf, wcf-binding, net.pipe

我正在尝试在 2 个进程（在同一个盒子上）之间的服务器上配置 net.pipe 绑定。我在 Windows 7 中本地运行所有这些，但在生产服务器（Windows Server 2008 R2）上，它无法运行。

我可以验证我有：

*   向 IIS“网站”添加了 net.pipe 绑定（添加 * 作为信息）。
*   将 net.pipe 添加到 IIS“网站”的“高级设置”中的绑定列表中。

这就是我的开发机器所需的全部内容。还有什么我需要做的吗？

我得到的错误来自一个简单的控制台应用程序测试客户端：

> 未处理的异常：System.ServiceModel.EndpointNotFoundException：net.pipe://nameOfService.svc 上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。---> System.IO.PipeException：在您的本地计算机上找不到管道端点“net.pipe://nameOfService.svc”。`

这是一些配置：

客户：

```
<system.serviceModel>
    <bindings>
        <netNamedPipeBinding>
            <binding name="NetNamedPipeBinding_IWebAppNotifyService">
                <security mode="None" />
            </binding>
        </netNamedPipeBinding>
    </bindings>
    <client>
        <endpoint address="net.pipe://nameOfService.svc"
            binding="netNamedPipeBinding" bindingConfiguration="NetNamedPipeBinding_IWebAppNotifyService"
            contract="ServiceReference2.IWebAppNotifyService" name="NetNamedPipeBinding_IWebAppNotifyService" />
    </client>
</system.serviceModel> 
```

服务器：

```
<bindings>
  <netNamedPipeBinding>
    <binding name="WebAppNotifyServiceBinding" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" transactionFlow="false" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="10" maxReceivedMessageSize="65536">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="None">
      </security>
    </binding>
    <binding name="ScannerManagerCommandBinding">
      <security mode="None" />
    </binding>
  </netNamedPipeBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="WebAppNotifyServiceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="True" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<services>
  <service name="MonitoringApp.Notifier.WebAppNotifyService" behaviorConfiguration="WebAppNotifyServiceBehavior">
    <host>
      <baseAddresses>
        <add baseAddress="net.pipe://nameOfService.svc" />
        <add baseAddress="http://nameOfService" />
      </baseAddresses>
    </host>
    <endpoint address="" binding="netNamedPipeBinding" bindingConfiguration="WebAppNotifyServiceBinding" contract="X.Y.IWebAppNotifyService" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services> 
```

**更新：**

与承载 net.pipe 绑定的网站关联的应用程序池在“NetworkService”用户下运行，如果这有所不同的话。

我已经在 .NET 3.5.1 的 Windows 功能下启用了非 HTTP 激活，尽管它是在 .NET 4 下运行的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T14:27:11.977

*   您是否启用了 Windows 服务`Net.Pipe Listener Adapter`和`Windows Process Activation Service`？
*   您是否`net.pipe`在站点级别启用了绑定？
*   您是否`net.pipe`在 vdir 级别添加了协议？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-24T04:54:04.017

对于 SharePoint 安全令牌服务，我在 net.pipe://localhost/ 上遇到了相同的 EndPointNotFound 错误。

它适用于我的开发系统，但不适用于生产。

对我来说，这是因为 Dell Change Auditor Agent 服务正在我的生产服务器上运行。

[https://blogs.msdn.microsoft.com/spses/2016/01/21/sharepoint-2013-unable-to-viewedit-office-documents-in-browser-using-office-web-apps-2013/](https://blogs.msdn.microsoft.com/spses/2016/01/21/sharepoint-2013-unable-to-viewedit-office-documents-in-browser-using-office-web-apps-2013/)

# vba - 保存传入电子邮件附件的规则不适用于全新安装的 Outlook

> ID：11228148
> 
> 赞同：1
> 
> 时间：2012-06-27T14:09:20.233
> 
> 标签：vba, outlook

我们正在从一台服务器迁移到另一台服务器，用于保存正在运行的附件的 VBA 脚本已经放弃了新服务器上的幽灵。

这是 Outlook 的全新安装。

下面的脚本：

```
Public Sub saveAttachmentAll(itm As Outlook.MailItem)
Dim objAtt As Outlook.Attachment
Dim saveFolder As String

saveFolder = "D:\www\phones"
For Each objAtt In itm.Attachments

    objAtt.SaveAsFile saveFolder & "\" & objAtt.DisplayName

    Set objAtt = Nothing

    Next

End Sub 
```

我已经测试了 Outlook 规则，Outlook 正在对其执行其他操作，但此脚本不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:28:56.027

所以事实证明我不得不禁用宏安全（这不是最好的）并重新启动 Outlook。相当简单，但我有一段时间摸不着头脑......！

# php - 在 AMAZON EC2 上的 fedora 实例中更新 PHP

> ID：11228152
> 
> 赞同：0
> 
> 时间：2012-06-27T14:09:35.260
> 
> 标签：php, amazon-ec2, fedora

我有一个在 Amazon EC2 中运行的 Fedora 实例。问题是，我已经安装了一个 php，但我想更新（PS：有人已经给了我安装了 php 的实例）。当我尝试命令时： yum update php 出现错误消息。

```
 Setting up Update Process
   Setting up repositories
   Cannot find a valid baseurl for repo: updates-released
   Error: Cannot find a valid baseurl for repo: updates-released 
```

我试图取消注释 yum 存储库文件中的 baseurl 行，但出现了一个新错误。

```
Setting up Update Process
   Setting up repositories
    http://download.fedora.redhat.com/pub/fedora/linux/core/updates/4/i386/repodata/repomd.xml: [Errno 4] IOError: <urlopen error (-2, 'Name or service not known')>
   Trying other mirror.
   Cannot open/read repomd.xml file for repository: updates-released
   failure: repodata/repomd.xml from updates-released: [Errno 256] No more mirrors to try.
   Error: failure: repodata/repomd.xml from updates-released: [Errno 256] No more mirrors to try. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:10:07.827

您收到的错误听起来像是与连接或 DNS 相关的问题 - 查看您是否可以 ping 'download.fedora.redhat.com'，然后查看是否可以使用 wget 尝试获取该文件。

此外，您的 /etc/yum.repos.d/ 目录可能包含一个包含无效存储库的存储库文件——我不确定他们是否仍在发布 Fedora 4 的更新（它是在 2004 年左右发布的）。最好的办法是确保 /etc/fedora-release 中的版本与该存储库配置文件中的版本匹配。

# python - 具有多个文件的瓶子框架

> ID：11228153
> 
> 赞同：15
> 
> 时间：2012-06-27T14:09:41.793
> 
> 标签：python, frameworks, bottle

我已经阅读了瓶子文档，但我找不到如何将瓶子与多个文件一起使用的示例。以下是我所做的方式并且它正在工作，但我不确定这是否是正确的方式（我在 API 中看到过`merge()`，`mount()`但不确定它们是否与此相关）。请给我意见。

1.  all.py（这是运行的主文件）

    ```
    #! /usr/bin/python
    from bottle import route, run

    import hello1
    import hello2    # if I have 10 files, it will be 10 imports

    run(host='localhost', port=8080, debug=True) 
    ```

2.  你好1.py

    ```
    #! /usr/bin/python
    from bottle import route, run

    @route('/hello1')
    def hello1():
        return "Hello world no.1" 
    ```

3.  你好2.py

    ```
    #! /usr/bin/python
    from bottle import route, run

    @route('/hello2')
    def hello2():
        return "Hello world no.2" 
    ```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-08T21:18:06.370

我想使用一个单一的瓶服务器来服务于一套微应用程序，并且为了实现良好的关注点分离，我想做你一直在寻找的事情。

这是我解决任务的方法：

**rootApp.py**（您的主文件）

```
from bottle import Bottle
from clientApp import clientApp

rootApp = Bottle()
@rootApp.route('/')
def rootIndex():
    return 'Application Suite Home Page'

if __name__ == '__main__':
    rootApp.merge(clientApp)
    rootApp.run(debug=True) 
```

**clientApp.py**（需要合并到套件中的新应用）

```
from bottle import Bottle

clientApp = Bottle()

@clientApp.route('/clientApp')
def clientAppIndex():
    return 'Client App HomePage' 
```

我不确定这是否是最好的方法，但它似乎可以毫无怨言地工作，并且省去了必须在本来可以相互了解的[应用程序之间共享端口的麻烦。](https://stackoverflow.com/questions/17044939/python-bottle-can-run-two-programs-on-the-same-address-and-port-on-windows)该方法确实源于设计偏好，但如果有人可以演示如何/是否可以使用 AppStack 来获得相同的结果，我将不胜感激。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:41:37.007

如果您将代码拆分为 10 个 Python 模块，您将执行 10 次导入。您可以迭代`__import__`：

```
for i in range(1, 11):
    __import__('hello%d' % i) 
```

但这并不是一个好主意。为什么*需要*10 个带有微框架的模块？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-29T15:22:47.597

不确定最好的方法，但确实[可以使用](https://bottlepy.org/docs/dev/api.html)**mount()** 并且对我来说看起来不错（使用 python 3.6 + Bottle 0.12.13 测试）。

**首先**，在文件中构建您的“子应用程序”之一`app1.py`：

```
from bottle import Bottle

server1 = Bottle()
@server1.route('/')
def root():
    return 'Hello from sub app 1' 
```

**然后**你在你的主应用程序中使用它：

```
from bottle import Bottle
from app1 import server1 

mainApp = Bottle()

if __name__ == "__main__":
    mainApp.mount('/appli1', server1)
    mainApp.run() 
```

**我们走吧：**

点击你的服务器地址：[http://myServer/appli1](http://myServer/appli1)

如果您需要一个功能齐全的示例，请告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T17:52:13.090

为什么您希望每个视图有一个模块？视图通常以某种逻辑方式分组，例如：

*   `/`, `/post/:id`, `/tags`/,`/tag/:tag`在`blog.py`,
*   `/admin`, `/admin/newpost`,`/admin/editpost/:id`在`admin.py`,
*   等等。

您还应该阅读Flask 文档中的[Becoming Big一章。](http://flask.pocoo.org/docs/patterns/packages/)对于中型应用程序，您可能希望创建一个布局类似于以下内容的包：

```
/yourapplication
    /runserver.py
    /yourapplication
        /__init__.py
        /views.py
        /static
            /style.css
        /templates
            layout.html
            index.html
            login.html 
```

对于更大的应用程序，将视图拆分为子包。

# web - 内存网页浏览

> ID：11228155
> 
> 赞同：1
> 
> 时间：2012-06-27T14:09:45.820
> 
> 标签：web, screen-scraping

他们是否有任何方式在抓取 html 后执行网页 javascript 的加载事件，而无需任何浏览器。即我需要抓取通过 javascript 呈现的网页内容，例如 bbc 新闻网页的视频在页面加载后通过 javascript 呈现，我有兴趣抓取视频链接和镜头描述。[http://www.bbc.co.uk/news/video_and_audio/](http://www.bbc.co.uk/news/video_and_audio/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:47:26.147

我经常使用 webkit 执行此操作： [http ://webscraping.com/blog/Scraping-JavaScript-webpages-with-webkit/](http://webscraping.com/blog/Scraping-JavaScript-webpages-with-webkit/)

```
import sys  
from PyQt4.QtGui import *  
from PyQt4.QtCore import *  
from PyQt4.QtWebKit import *  

class Render(QWebPage):  
  def __init__(self, url):  
    self.app = QApplication(sys.argv)  
    QWebPage.__init__(self)  
    self.loadFinished.connect(self._loadFinished)  
    self.mainFrame().load(QUrl(url))  
    self.app.exec_()  

  def _loadFinished(self, result):  
    self.frame = self.mainFrame()  
    self.app.quit()  

url = 'http://sitescraper.net'  
r = Render(url)  
html = r.frame.toHtml() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:15:16.710

**不**，据我所知。如果内容由 Javascript 呈现，则需要一个浏览器。可以自动化浏览器：[http ://seleniumhq.org/](http://seleniumhq.org/)

# javascript - 如何显示上传的图像将其存储在本地存储中

> ID：11228159
> 
> 赞同：0
> 
> 时间：2012-06-27T14:09:52.937
> 
> 标签：javascript, jquery, backbone.js

我制作了一个对象，其中存储了用户的姓名、年龄、电子邮件和他上传的图像。我想在 div 中显示他上传的图像（比如说），我不知道如何做这件事。我试过这个：

```
$(function () {
    $('img').load(function () {
        var canvas = document.createElement("canvas");
        canvas.width = this.width;
        canvas.height = this.height;
        // Copy the image contents to the canvas
        var ctx = canvas.getContext("2d");
        ctx.drawImage(this, 0, 0);
        localStorage[this.id] = canvas.toDataURL("image/png");
    })
}) 
```

但如何使用 javascript 或 jquery 显示此图像？（没有任何插件）我有 5 个这样的对象要显示在页面上。任何解决方案都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-24T18:33:41.423

尝试这个

```
 var imgCanvas = document.createElement("canvas"),
    imgContext = imgCanvas.getContext("2d");

    // Make sure canvas is as big as the picture
    imgCanvas.width = this.width;
    imgCanvas.height = this.height;

    // Draw image into canvas element
    imgContext.drawImage(image, 0, 0, imgCanvas.width,imgCanvas.height);
    // Save image as a data URL
    imgInfom = imgCanvas.toDataURL("image/png");
    localStorage.setItem("imgInfo",imgInfom);

    document.body.style.background = 'url('+imgInfom+')'; 
```

在这里，我将图像显示为身体的背景图像，您也可以使用其他选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T08:10:32.080

**试试这个，效果很好**

```
 <input type="file" id="image-input" />
        <img id="image-container" />
        <script type="text/javascript">
        (function(){
              /** @type {Node} */
          var imgInput = document.getElementById( "image-input" ),
              /** @type {Node} */
              imgContainer = document.getElementById( "image-container" ),
              /** Restore image src from local storage */
              updateUi = function() {
                imgContainer.src = window.localStorage.getItem( "image-base64" );
              },
              /** Register event listeners */
              bindUi = function(){
                imgInput.addEventListener( "change", function(){
                  if ( this.files.length ) {
                    var reader = new FileReader();
                    reader.onload = function( e ){
                      window.localStorage.setItem( "image-base64", e.target.result );
                      updateUi();
                    };
                    reader.readAsDataURL( this.files[ 0 ] );
                  }
                }, false );
              };

        updateUi();
        bindUi();
        }()); 
```

# css - 将下拉菜单从悬停更改为 onclick

> ID：11228165
> 
> 赞同：0
> 
> 时间：2012-06-27T14:10:17.097
> 
> 标签：css

我正在寻找下拉菜单（onlcick）

经过多次搜索，我终于找到了一个

但问题是，我拥有的代码是基于（悬停）而不是（onclick）

我想通过 javascript 或 css 将代码转换为 onclick 而不是悬停

我的代码：

```
<style>
ul.dropdown,
ul.dropdown li,
ul.dropdown ul {
 list-style: none;
 margin: 0;
 padding: 0;
}

ul.dropdown {
 position: relative;
 z-index: 597;
 float: left;
}

ul.dropdown li {
 float: left;
 min-height: 1px;
 line-height: 1.3em;
 vertical-align: middle;
}

ul.dropdown li.hover,
ul.dropdown li:hover {
 position: relative;
 z-index: 599;
 cursor: default;
}

ul.dropdown ul {
 visibility: hidden;
 position: absolute;
 top: 100%;
 left: 0;
 z-index: 598;
 width: 100%;
}

ul.dropdown ul li {
 float: none;
}

ul.dropdown ul ul {
 top: 1px;
 left: 99%;
}

ul.dropdown li:hover > ul {
 visibility: visible;
}
</style>
<ul class="dropdown">
    <li><a href="./" class="dir">Download Drivers</a>
        <ul>
            <li><a href="./">Download Drivers</a></li>
            <li><a href="./">Driver Widget</a></li>
            <li><a href="./">NVIDIA Software</a></li>
        </ul>
    </li>
    <li><a href="./">Shop</a></li>
    <li><a href="./" class="dir">Products</a>
        <ul>
            <li><a href="./">Desktop</a></li>
            <li><a href="./">Workstation</a></li>
            <li><a href="./">Servers</a></li>
            <li><a href="./">Motherboard</a></li>
        </ul>
    </li>
    <li><a href="./" class="dir">Technologies</a>
        <ul>
            <li><a href="./">NVIDIA SLI</a></li>
            <li><a href="./">NVIDIA Hybrid SLI</a></li>
        </ul>
    </li>
</ul>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T14:50:28.940

这是你想要的效果吗？在这里看小提琴：http: [//jsfiddle.net/UQwJz/4/](http://jsfiddle.net/UQwJz/4/) [编辑]

我重新发明了你的 CSS 并让它变得更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:17:59.163

1）修改你想要下拉的菜单的css，添加一个`display:none;`（这将使它们不显示）

2）将一个分配`id`给根菜单项，另一个可以使用第一个构建到根项下的列表（您想要下拉的）

3）在同一个元素声明中，有`onclick=dropdown()`. 例子

`<li id='menu1' onclick=dropdown()><ul id='menu1menu' >`这将在单击该元素时调用下拉功能。

```
<li><a href="./" id='drivers' onclick=dropdown() class="dir">Download Drivers</a>
    <ul id='driversmenu'>
        <li><a href="./">Download Drivers</a></li>
        <li><a href="./">Driver Widget</a></li>
        <li><a href="./">NVIDIA Software</a></li>
    </ul>
</li> 
```

4）有这个功能：点击时，该功能会检查li下的ul是否显示，然后使其具有相反的显示值。您可以对所有菜单使用相同的功能，前提是您为 uls 提供与父 li+'menu' 相同的 id。

```
 function dropdown()
        {
            if(document.getElementById(window.event.srcElement.id+'menu').style.display=='block'){
                document.getElementById(window.event.srcElement.id+'menu').style.display='none';
            }
            else{ 
                document.getElementById(window.event.srcElement.id+'menu').style.display='block';
            }
        }; 
```

# c# - 强制一个函数在单击按钮上的另一个函数之前完成执行

> ID：11228167
> 
> 赞同：0
> 
> 时间：2012-06-27T14:10:19.333
> 
> 标签：c#, javascript, buttonclick

在这里，我试图在单击一次按钮时执行两个函数，即一个 javascript 和一个 c# 代码。问题是这两个函数同时执行。这是我的函数：

Javascript函数

```
 function exportCharts() {
            var exportFormat = 'JPG';
            initiateExport = true;
            for (var chartRef in FusionCharts.items) {
                if (FusionCharts.items[chartRef].exportChart) {
                    document.getElementById("linkToExportedFile").innerHTML = "Exporting...";
                    FusionCharts.items[chartRef].exportChart({ "exportFormat": exportFormat });
                }
                else {

                    document.getElementById("linkToExportedFile").innerHTML = "Please wait till the chart completes rendering...";
                }
            }
        } 
```

c#代码：

```
 protected void imgBTNExportPPT_Click(object sender, ImageClickEventArgs e)
        {
            try
            {
                PredictExportToPPT objOExporttoPPT = new PredictExportToPPT();

                PredictionModel();

                string reportNames = ObjCommon.GetBIReportNames("Prediction", "Report");
                reportNames += ObjCommon.GetBIReportNames("Prediction", "Table");

                objOExporttoPPT.ExportToPPTPredict(ObjPredictInputParameter, reportNames, ObjSharedEntities.PredictTableData);

                string itemname = "PPTOutput.pptx";
                HttpContext.Current.Response.Clear();
                HttpContext.Current.Response.ContentType = "pptx";
                HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment; filename=" + itemname + "");
                HttpContext.Current.Response.BinaryWrite(System.IO.File.ReadAllBytes(HttpContext.Current.Server.MapPath(DataTemplate.PPTOutputTemplateFilePath)));
                HttpContext.Current.Response.Flush();
                HttpContext.Current.Response.End();

            }
            catch (Exception exceptionMessage)
            {
                throw (exceptionMessage);
            }
            finally
            {
                GC.Collect();
            }
        } 
```

按钮点击代码

```
 <asp:ImageButton ID="imgBTNExportPPT" runat="server" Width="15" Height="15" border="0" OnClientClick="return exportCharts()" OnClick="imgBTNExportPPT_Click" /> 
```

如果我尝试将**System.Threading.Thread.Sleep**用于 c# 代码，则 javascript 代码首先执行但不完全执行。它等到 c# 代码执行，最后同时生成两个输出。我希望它发生在另一个之后。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:18:14.983

**我已经测试过它正在工作**

```
<asp:ImageButton ID="imgBTNExportPPT" runat="server" Width="15" Height="15" border="0" OnClientClick="exportReport()" OnClick="imgBTNExportPPT_Click" />

   <script>
            function exportReport() {
              exportCharts();
             __doPostBack("imgBTNExportPPT","");
         }
    </script> 
```

如果您使用的是母版页，则：

代替

```
__doPostBack("imgBTNExportPPT",""); 
```

和

```
__doPostBack("ctl00$MainContent$imgBTNExportPPT", ""); 
```

# c# - StructureMap 开放通用

> ID：11228168
> 
> 赞同：0
> 
> 时间：2012-06-27T14:10:23.387
> 
> 标签：c#, generics, structuremap

我有一种情况，我需要从一个开放的通用基类中按名称获取一个具体类。

我的班级层次结构：

```
public class Foo { }

public class Bar { }

public abstract class OpenGenericBaseClass<T> where T : class { }

public class ConcreteClass1 : OpenGenericBaseClass<Foo> { }

public class ConcreteClass2 : OpenGenericBaseClass<Bar> { } 
```

我的注册表代码：

```
For(typeof(OpenGenericBaseClass<>)).Use(x => x.GetInstance<ConcreteClass1>());

For(typeof(OpenGenericBaseClass<>)).Add(x => x.GetInstance<ConcreteClass2>()).Named("Class2"); 
```

我的程序代码：

```
 ObjectFactory.Configure(
            x => x.Configure(
                a => a.Scan(
                    b =>
                    {
                        b.AssembliesFromApplicationBaseDirectory();
                        b.LookForRegistries();
                    })));

        var c1 = ObjectFactory.GetInstance(typeof(OpenGenericBaseClass<>));

        var c2 = ObjectFactory.GetNamedInstance(typeof(OpenGenericBaseClass<>), "Class2"); 
```

第一次调用 GetInstance 方法（对于 c1）返回一个好的“ConcreteClass1”对象。但是对于第二次调用（对于 c2），我得到一个异常： **StructureMap 异常代码：200 找不到 PluginType TestStructureMapGeneric.OpenGenericBaseClass`1 的名为“Class2”的实例**

我怎样才能得到我的 c2 命名的具体实例？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:12:38.253

似乎 StructureMap 不支持添加命名配置来打开泛型类型。但是，为什么需要一个开放的泛型类型？在 StructureMap 中使用开放泛型类型将泛型参数从一个类传输到另一个类，这就是为什么您不能在`For(typeof(OpenGenericBaseClass<>)).Use(typeof(ConcreteClass1))`没有异常的情况下使用该构造而必须使用 lambda。

对于这个特定的例子，我可以通过添加一个基类而不使用开放的泛型类型来解析类型：

```
 public abstract class BaseClass {}
 public abstract class OpenGenericBaseClass<T> : BaseClass where T : class {} 
```

并使用以下注册表代码：

```
 For<BaseClass>().Use<ConcreteClass1>();
 For<BaseClass>().Add<ConcreteClass2>().Named("Class2"); 
```

现在，我可以使用以下代码轻松解决实例：

```
 var c1 = ObjectFactory.GetInstance<BaseClass>(); // of type ConcreteClass1
 var c2 = ObjectFactory.GetNamedInstance<BaseClass>("Class2"); // of type ConcreteClass2 
```

# linux - 如何找到旧版本 GLIB 的安装位置？

> ID：11228173
> 
> 赞同：6
> 
> 时间：2012-06-27T14:10:35.607
> 
> 标签：linux, ubuntu, gtk, glib

我正在尝试安装`atk-2.4.0`，但出现错误：

```
 'pkg-config --modversion glib-2.0' returned 2.32.3, but GLIB (2.26.1)
*** was found! 
```

我也尝试更新`PKG_CONFIG_PATH`以包含路径，`glib-2.0.pc`但仍然出现相同的错误。谁能帮我找到2.26.1的安装位置我对Ununtu比较陌生？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T15:57:36.950

发表评论作为回应：
从中`find /usr/ -iname "*glib*.pc"`发现`.pc`与相关的文件`glib`在`/usr/lib/pkgconfig`&中可用`/usr/local/lib/pkgconfig`。检查系统包管理，似乎该版本`2.26.1`是从存储库安装的。`glib`从存储库安装的路径*通常* `/usr/lib`是（在 64 位系统的情况下，这可能会有所不同，其中 32 位和 64 位库有不同的文件夹）。因此，似乎`glib`也已经从源安装（通过安装路径猜测`/usr/local/lib`）哪个版本`2.32.2`。如果您需要将版本`2.32.2`设置`PKG_CONFIG_PATH`为`/usr/local/lib/pkgconfig`&希望这会`LD_LIBRARY_PATH`有所`/usr/local/lib/`
帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T15:56:03.637

您必须同步您`PKG_CONFIG_PATH`和`LD_LIBRARY_PATH`环境变量。假设您的前缀是`/usr/local`以下应设置：

```
PKG_CONFIG_PATH=/usr/local/lib/pkgconfig
LD_LIBRARY_PATH=/usr/local/lib 
```

您可能还需要设置其他变量来编译 glib 依赖的软件：

```
ACLOCAL_PATH=/usr/local/share/aclocal/
PATH=/usr/local/bin:$PATH 
```

# gnuplot - Gnuplot 不会读取 $ 字符

> ID：11228174
> 
> 赞同：1
> 
> 时间：2012-06-27T14:10:37.283
> 
> 标签：gnuplot

我有一个非常简单的脚本：

```
#!/bin/bash
gnuplot << EOF
set term postscript portrait
set output 'out.ps'

plot 'data_file' u 3:($2==0.0 ? $2:1/0)

EOF 
```

`data_file`看起来像这样：

```
 O4     -1.20     -0.33     -5.20  
O9.5     -1.10     -0.30     -3.60  
  B0     -1.08     -0.30     -3.25  
B0.5     -1.00     -0.28     -2.60  
B1.5     -0.90     -0.25     -2.10  
B2.5     -0.80     -0.22     -1.50  
  B3     -0.69     -0.20     -1.10  
.... 
```

我已经尝试了几种组合，但我仍然总是得到同样的错误：

```
gnuplot> plot 'S-K_data' u 3:(==0.0 ? :1/0)
                          ^
         line 0: invalid expression 
```

如您所见，它不是在读取`$2`字符，我只是不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:13:46.870

在此处未引用的文档中，变量被扩展。尝试

```
gnuplot << 'EOF' 
```

或者

```
gnuplot << \EOF 
```

您选择哪一种是个人喜好问题（您可以使用任何引用机制，所以`EOF""`可行，但以上两种是最常见的）。当 heredoc 定界符不加引号时，shell 将扩展`$2`为传递给脚本的第二个参数。（尝试使用 2 个参数调用脚本。）当引用 heredoc 分隔符时，不会发生这种扩展。

# objective-c - 如何将 NSArray 复制到另一个 NSArray？

> ID：11228175
> 
> 赞同：3
> 
> 时间：2012-06-27T14:10:47.003
> 
> 标签：objective-c, copy, nsarray

我有很多不同`NSArrays`的，根据用户的选择，我希望将其中一个复制到新的`NSArray`。如何将一个复制`NSArray`到另一个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T14:12:45.253

可以有几种方法-

1.  `array1 = [array2 copy];`

2.  使用`initWithArray`方法。

3.  也可以使用`initWithArray:copyItems:`方法。（如果为`NSMutableArray`）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T15:55:07.673

你可以使用

```
NSArray *_newArray = [NSArray arrayWithArray:_oldArray]; 
```

或者如果你更喜欢，你可以使用：

```
NSArray *_newArray = [[NSArray alloc] initWithArray:_oldArray]; 
```

（在这种情况下，第一个数组的对象不会被复制，它只会在第二个保留前面`NSArray`，您可以从任何数组中删除对象，它不会影响另一个数组，但是如果您更改任何对象中的任何对象NSArray 它也将在另一个中更改，因为旧数组和新数组都在使用相同的对象实例。）

如果您的计划是在新数组中创建旧对象的另一个实例：

```
NSArray *_newArray = [[NSArray alloc] initWithArray:_oldArray copyItems:true]; 
```

如果您正在使用 ARC，则无需执行任何其他操作，如果您不是，则在两者的情况下，`-initWithArray:`或者`-initWithArray:copyItems:`您应该`[_newArray release];`在不想再使用后使用 释放阵列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-23T02:42:25.443

也

```
NSArray *newArray = [oldArray copy]; 
```

如果您需要从新数组中添加/删除，制作可变副本的最简单方法是：

```
NSMutableArray *editableArray = [oldArray mutableCopy]; 
```

上述函数都进行浅拷贝，对于深拷贝，正如@holex 和@rishi 提到的

```
NSArray *newArray = [[NSArray alloc] initWithArray:oldArray copyItems:true];
NSMutableArray *editableArray = [[NSMutableArray alloc] initWithArray:oldArray copyItems:true]; 
```

# iphone - 如何实现uitableviews的轮播？

> ID：11228178
> 
> 赞同：1
> 
> 时间：2012-06-27T14:10:57.380
> 
> 标签：iphone, uitableview, icarousel

我需要实现一个循环**滚动轮播**，其中每个视图都是一个**表格视图**，其中的数据是从互联网加载的。

我真的不知道哪个是实现它的最佳**方法**，我想也许是在使用 nick lockwood 的**icarousel**，但我不完全确定。

关于哪种方法最好的想法？

感谢您为我提供的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:15:05.963

我现在正在使用 iCarousel 做一个项目，您可以在

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view 
```

将 UITableViews 作为子视图添加到返回的视图（或仅返回表）应该没有任何问题。

不过，您在尝试滚动表格时可能会遇到一些问题，我在自定义视图上遇到了 UITouchGestureRecognizers 的问题，最后不得不禁用 iCarousel 的那些。

# unity3d - 在 Unity 中使用 GL Studio 视频

> ID：11228179
> 
> 赞同：0
> 
> 时间：2012-06-27T14:11:01.763
> 
> 标签：unity3d

我的软件人员正试图弄清楚是否可以让 GL Studio (OpenGL) 生成视频以在游戏中显示在材质上。

简而言之，我们让 GL Studio 根据用户的输入动态为显示单元创建视频。我们正试图让正在制作的视频出现在游戏中。有没有办法抓取之前在窗口中渲染的视频并在游戏中显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:43:02.803

我还没有听说过 GL Studio 以这种方式集成到 Unity 中。你问过 GL Studio 的支持吗？支持@disti.com

干杯，

乔纳森

# c# - 从 WCF 数据服务返回 DataTable 的替代方法

> ID：11228180
> 
> 赞同：0
> 
> 时间：2012-06-27T14:11:01.707
> 
> 标签：c#, wcf, datatable, powerpivot

我有一个报告应用程序，它连接到用户系统并返回要在报告中使用的数据。由于我无法控制他的数据，也不知道我一直在使用 C# DataTables 来保存数据的数据结构。

没有要求公开我的应用程序通过 Web 服务通过 PowerPivot 返回的数据，现在我知道我需要使用 WCF 数据服务来实现这一点。

我的问题是我不想返回一个 DataTable 对象，我宁愿将它转换为更易于管理的东西并返回它。

有人可以提出替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:15:52.597

我建议您在数据表上使用 Xml 序列化，这更易于管理，也是一种很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:21:46.890

看看 DataTableSurrogate，它在 SyncFramework 中用于序列化 DataTables。

[MSDN 数据表代理](http://msdn.microsoft.com/de-de/library/microsoft.synchronization.data.datatablesurrogate.aspx)

# backbone.js - 缺少主干视图的模型，但我不明白为什么

> ID：11228185
> 
> 赞同：1
> 
> 时间：2012-06-27T14:11:19.170
> 
> 标签：backbone.js

我有一个简单但令人困惑的问题。我有以下代码：

```
<div id="restaurant_locations"></div>

<script type="text/javascript">
  $(function() {
    window.router = new Lunchhub.Routers.RestaurantLocationsRouter({
      restaurantLocations: <%= @restaurant_locations.to_json.html_safe -%>
    });
    Backbone.history.start({pushState: true});
  });
</script> 
```

引发此错误：

```
Uncaught TypeError: Cannot call method 'toJSON' of undefined 
```

但是，如果我取出`{pushState: true}`零件，并且不`Backbone.history.start()`带任何参数，它就可以正常工作。

在错误旁边，它说`show_view.js: 19`。这是该部分的`show_view.js`外观：

```
 ShowView.prototype.template = JST["backbone/templates/restaurant_locations/show"];

    ShowView.prototype.render = function() {
      $(this.el).html(this.template(this.model.toJSON())); // LINE 19
      Uncaught TypeError: Cannot call method 'toJSON' of undefined
      return this;
    } 
```

所以我猜`this.model`是未定义的。这是`show_view`咖啡脚本：

```
Lunchhub.Views.RestaurantLocations ||= {}

class Lunchhub.Views.RestaurantLocations.ShowView extends Backbone.View
  template: JST["backbone/templates/restaurant_locations/show"]

  render: ->
    $(@el).html(@template(@model.toJSON() ))
    return this 
```

如果我能做到`@model`它需要的样子，我想它可能会解决问题。但我不知道`@model`从哪里来或什么。

我需要做什么？

**编辑：**我走得更远了。在下面的`show`函数中，`id`设置为“restaurant_locations”，当然没有`@restaurantLocations`id 为 的成员`restuarant_locations`。`id`set set to的事实`restaurant_locations`有一定的意义；我点击的网址是`http://localhost:3000/restaurant_locations`. 但它似乎应该调用`index`函数，而不是`show`，如果那是我要去的 URL。

```
class Lunchhub.Routers.RestaurantLocationsRouter extends Backbone.Router
  initialize: (options) ->
    @restaurantLocations = new Lunchhub.Collections.RestaurantLocationsCollection()
    @restaurantLocations.reset options.restaurantLocations

  routes:
    "new"      : "newRestaurantLocation"
    "index"    : "index"
    ":id/edit" : "edit"
    ":id"      : "show"
    ".*"        : "index"

  newRestaurantLocation: ->
    @view = new Lunchhub.Views.RestaurantLocations.NewView(collection: @restaurantLocations)
    $("#restaurant_locations").html(@view.render().el)

  index: ->
    @view = new Lunchhub.Views.RestaurantLocations.IndexView(restaurantLocations: @restaurantLocations)
    $("#restaurant_locations").html(@view.render().el)

  show: (id) ->
    restaurant_location = @restaurantLocations.get(id)

    @view = new Lunchhub.Views.RestaurantLocations.ShowView(model: restaurant_location)
    $("#restaurant_locations").html(@view.render().el)

  edit: (id) ->                   
    restaurant_location = @restaurantLocations.get(id)

    @view = new Lunchhub.Views.RestaurantLocations.EditView(model: restaurant_location)
    $("#restaurant_locations").html(@view.render().el) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:41:09.380

> `id`设置为`"restaurant_locations"`，当然也没有 of 的成员`@restaurantLocations`和`id`of `"restuarant_locations"`。

听起来您有路由问题，所以让我们看看您的路由：

```
routes:
  "new"      : "newRestaurantLocation"
  "index"    : "index"
  ":id/edit" : "edit"
  ":id"      : "show"
  ".*"       : "index" 
```

我在那里看到了几个问题。首先，路由不是正则表达式，所以`".*"`不匹配什么`/.*/`（即任何字符序列），它实际上匹配任意数量的句点（即/^.*$/）；您可以自己运行它[`_routeToRegex`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L948)，看看会发生什么`'.*'`：

```
var namedParam    = /:\w+/g;
var splatParam    = /\*\w+/g;
var escapeRegExp  = /[-[\]{}()+?.,\\^$|#\s]/g;
//...
_routeToRegExp: function(route) {
  route = route.replace(escapeRegExp, '\\$&')
               .replace(namedParam, '([^\/]+)')
               .replace(splatParam, '(.*?)');
  return new RegExp('^' + route + '$');
}, 
```

下一个问题是它`":id"`几乎可以匹配任何东西。`routeToRegexp`转换`":id"`为`/^([^/]+)$/`; 该正则表达式匹配任何非空的非斜杠序列，特别是，它将匹配您的大多数其他路线匹配的内容。

因此，当您期望从 击中`'.*': 'index'`时`/restaurant_locations`，您实际上是在击中`':id': 'show'`，并且您很幸运，`'/new'`并且`'/index'`也没有被 匹配`':id'`。请记住，(Java|Coffee)Script 对象中元素的顺序是实现定义的，因此它们在源代码中出现的顺序实际上并不重要；许多 JavaScript 实现会尊重源代码顺序，但从不依赖它。

由于路由顺序无关紧要，您必须将您的`routes`键视为一个简单的无序集合，并且您 - 人类 - 必须确保您的路由模式确实匹配不同的事物。如果您确实需要重叠路由模式并且需要它们以特定顺序匹配，那么您可以使用[`route`](http://documentcloud.github.com/backbone/#Router-route)路由器中的方法以[`initialize`](http://documentcloud.github.com/backbone/#Router-constructor)所需的顺序手动添加路由（作为路由模式或正则表达式）。

* * *

**执行摘要：**修复您的路线，使其与不同的事物相匹配。

# javascript - 尝试在 webGL 中实现 glulookat 失败

> ID：11228187
> 
> 赞同：0
> 
> 时间：2012-06-27T14:11:20.860
> 
> 标签：javascript, jquery, math, webgl

好的，所以我在 0,0,0 处绘制了一个块，并且我有这个 glulookat

```
function ugluLookAtf(eyex, eyey, eyez, centerx, centery, centerz, upx, upy, upz){
        var forward = new Array(3); 
        var side = new Array(3); 
        var up = new Array(3);
        var m = new Array(4);
        for(var i = 0; i < m.length; i++){
            m[i] = new Array(m.length)
        }

        forward[0] = centerx - eyex;
        forward[1] = centery - eyey;
        forward[2] = centerz - eyez;

        var f = Math.sqrt(forward[0]*forward[0]+forward[1]*forward[1]+forward[2]*forward[2]);

        forward[0] =  forward[0]/f;
        forward[1] =  forward[1]/f;
        forward[2] =  forward[2]/f;

        up[0] = upx;
        up[1] = upy;
        up[2] = upz;

        side[0] = forward[1] * up[2] - up[1] * forward[2];
        side[1] = forward[2] * up[0] - up[2] * forward[0];
        side[2] = forward[0] * up[1] - up[0] * forward[1];

        var f = Math.sqrt(side[0]*side[0]+side[1]*side[1]+side[2]*side[2]);

        side[0] =  side[0]/f;
        side[1] =  side[1]/f;
        side[2] =  side[2]/f;

        up[0] = forward[1] * side[2] - side[1] * forward[2];
        up[1] = forward[2] * side[0] - side[2] * forward[0];
        up[2] = forward[0] * side[1] - side[0] * forward[1];

        __identf(m[0][0]);
        m[0][0] = side[0];
        m[1][0] = side[1];
        m[2][0] = side[2];

        m[0][1] = up[0];
        m[1][1] = up[1];
        m[2][1] = up[2];

        m[0][2] = -forward[0];
        m[1][2] = -forward[1];
        m[2][2] = -forward[2];

        glMultMatrixf(m[0][0]);
        glTranslatef(-eyex, -eyey, -eyez);
    } 
```

被调用：`ugluLookAtf(0,0,-10,0,0,0,0,1,0);`

然而我什么也没看到，所以我认为这是我的 glulookat 函数。

我的问题是，我是否正确地为 glulookat 做数学？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:29:31.887

由于这是javascript，`glMultMatrixf(m[0][0])`没有意义。`glMultMatrixf`只使用左上角的数字会做什么？

C 版本接受一个指针，它可以增加它以获取矩阵的其他元素。在 Javascript 中，这是行不通的。

# php - PHP OOP 消息在页面刷新时不断显示

> ID：11228193
> 
> 赞同：0
> 
> 时间：2012-06-27T14:11:32.500
> 
> 标签：php, oop, post-redirect-get

我有一个相对简单的类，它删除了一个帖子：

```
function delete_post($postid, $reason){

    //Stuff to delete post      
    $this->delete_response = 'Thanks, your course has been removed.';

} 
```

此函数在打开表单的页面顶部调用。如果表单提交，同一页面会检查 POST[] 并执行该功能，如下所示：

```
if(!empty($_POST['removecourse'])){
    $courseManager->delete_post($_POST['courseid'], $_POST['cancel-reason']);
    echo $courseManager->delete_response;
}; 
```

所以我的问题是......当我刷新页面时，消息不断显示。我知道这是因为我要重新提交表格，并且因为没有这样的 P/R/G 模式，但由于我是 OOP 的新手，我想知道我这样做是否正确，或者是否有人可以建议一种类似于 PRG 的方式或其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:15:04.703

添加一个 if that test if somthing changed, 比如 mysql_affected_rows

```
function delete_post($postid, $reason)
{
    //Stuff to delete post
    if(mysql_affected_rows())
    {
       $this->delete_response = 'Thanks, your course has been removed.';
    }
} 
```

# iphone - 第二次点击登录按钮在 iPhone Salesforce (PhoneGap) 应用程序中不起作用

> ID：11228195
> 
> 赞同：1
> 
> 时间：2012-06-27T14:11:38.073
> 
> 标签：iphone, html, cordova, salesforce, phonegap-plugins

```
My Xcode Version is 4.3.2
iOS Simulator Version is 5.1 
PhoneGap Version Cordova-1.8.1 
```

我正在开发 Salesforce iPhone 应用程序。这是我的登录屏幕：

![在此处输入图像描述](../Images/3f68f4d7b57b87cd7d67915a7309f0b2.png)

当我点击登录按钮时，它会引导我进入 salesforce 登录页面： ![在此处输入图像描述](../Images/78c6eec323f1388e95462a4fe3f29ddb.png)

之后，当我点击登录按钮时，什么都没有发生。它在 iOS 模拟器 4.3 中正常工作。这是浏览器兼容性问题吗？

# asp.net - C#：“Microsoft.Reporting.WebForms.ReportViewer”类型存在于 ReportingServicesWebUserInterface.dll 和 Microsoft.ReportViewer.WebForms.dll 中

> ID：11228197
> 
> 赞同：14
> 
> 时间：2012-06-27T14:11:43.763
> 
> 标签：asp.net, reporting-services, reportviewer

在搜索了很多类似的帖子、解决方法后，我决定自己发帖。

```
Compilation Error

Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. 

Compiler Error Message: CS0433: 
The type
    'Microsoft.Reporting.WebForms.ReportViewer' 
exists in both 
    'c:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\reportmanager\Bin\ReportingServicesWebUserInterface.dll'
and
    'c:\WINDOWS\assembly\GAC_MSIL\Microsoft.ReportViewer.WebForms\9.0.0.0__b03f5f7f11d50a3a\Microsoft.ReportViewer.WebForms.dll' 
```

*更新：*

大多数类似的帖子都存在一个问题，即它们的 2 个冲突 DLL 的版本分别为 8.0.0.0 和 9.0.0.0 左右。或者它们位于 TEMPORARY 文件夹中。我不认为我的问题可以用这样的帖子来解决。

在我们的 ReportServer 上有一个 Report.aspx，它呈现一个报告。我想用我自己的文件替换这个文件，以修改页面布局，如下所示：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Report.aspx.cs" Inherits="WebApplication._Default" %>

<%@ Register 
    Assembly="Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
    Namespace="Microsoft.Reporting.WebForms"
    TagPrefix="rsweb" %>

<!DOCTYPE>
<html>
    <head runat="server"></head>
    <body>
        <div>
            <form id="reportform" runat="server">
                <div>
                    <rsweb:ReportViewer
                        ID='ReportViewerRoot'
                        runat='server'
                        ProcessingMode='Remote'
                        Height='100%'
                        Width='100%'
                        AsyncRendering='False'
                        SizeToReportContent='True'
                    />
                </div>
            </form>
        </div>
    </body>
</html> 
```

这需要引用 MS.ReportViewer.WebForms.DLL

我的 Project.csproj 文件有这个：

```
<Reference Include="Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL" /> 
```

我无法卸载 C:\WINDOWS 中的任何 DLL，因为它说它是其他应用程序所必需的。
![窗口\程序集](../Images/e46a11f8912a6dd5cb45ad62b2f08480.png)

我也尝试过修改 web.config，添加一些dependentAssemnly，但不确定什么会有用（它对上面提到的版本差异很有用）。

此外，我在 web.config 中有这些行：

```
<compilation defaultLanguage="c#" debug="false" tempDirectory="C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\RSTempFiles\">
    <assemblies>
        <clear />
        <add assembly="ReportingServicesWebServer" />
    </assemblies>
</compilation> 
```

谢谢您的意见。我期待收到您的建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T13:16:36.373

令人满意的解决方案！

在 aspx 中插入 ReportViewer 对象时，会自动添加 DLL 引用（并指向*GAC WebForms*）。我需要这个引用（无法成功手动引用 GAC DLL），然后我删除了 aspx 中的 ReportViewer。另外，我添加了对冲突 DLL *ReportingServicesWebUserInterface.DLL*的引用。这会将问题（来自 post 的错误输出）移动到 VS，而不仅仅是在 SSRS 服务器上。

添加新的 ReportViewer() 时，我会在 VS 中收到错误消息。

解决方案如下：给不需要的 DLL 一个别名（实际上不在代码中使用它）。这将告诉编译器在使用 WebForms 时不要使用此 DLL。见图片

![DLL 引用 + 别名](../Images/a8e72b5f6c40b61f5a75b467f81d8e51.png)

报告.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Report.aspx.cs" Inherits="MyWebApplication._Default" %>

<!DOCTYPE>

<html>
<head runat="server">
    <title></title>
</head>
<body>
    <div>
    <div style="background-color:Red;width:100px;height:100px;">Hoi</div>
    </div>
    <form id="formID" runat="server">
    test
    </form>
    <div>haha</div>
</body>
</html> 
```

报告.aspx.cs

```
public partial class _Default : System.Web.UI.Page
{
    ReportViewer ReportViewerRoot;

    protected void Page_Load(object sender, EventArgs e)
    {
        AddRV();
    }

    public void AddRV()
    {
        ReportViewerRoot = new ReportViewer()

        formID.Controls.Add(ReportViewerRoot);

        SetReportViewer();
        SetServerReport();
    }

    public void SetReportViewer()
    {
        ReportViewerRoot.ID = "ReportViewerRoot";
        ReportViewerRoot.ProcessingMode = ProcessingMode.Remote;
    }

    private void SetServerReport()
    {
        ServerReport serverReport = ReportViewerRoot.ServerReport;

        // Set the report server URL and report path
        serverReport.ReportServerUrl = new Uri("http://localhost/reportserver");
        serverReport.ReportPath = Request.QueryString["ItemPath"];
        serverReport.Refresh();
    }
} 
```

参考来源：[外部别名演练](http://blogs.msdn.com/b/ansonh/archive/2006/09/27/774692.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-01T05:46:38.377

我解决了我的问题，即从我的 Web.Config 中删除一个程序集在我的情况下，版本 10 和 11 结合在一起。我从 Config 中删除以下代码

```
 <add assembly="Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845DCD8080CC91"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-04T15:24:08.013

这可能发生的另一个原因是如果您有嵌套的应用程序。IE。App1 内的 App2。

App1 的 web.config 可能会与 App2 混淆。确保它们没有引用同一程序集的不同版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T08:02:04.273

不是在这个答案中，而是在下一个答案中我已经提出了令人满意的解决方案！:)

这个解决方案也确实有效，但在开发周期/可读性/可维护性方面并不令人满意。

我的 Report.aspx 文件只包含这一行：

```
<%@ Page Language="C#" AutoEventWireup="true"
CodeBehind="Report.aspx.cs" Inherits="WebApplication._Default" %> 
```

我的 Report.aspx.cs 确实包含以下代码：

```
 HtmlGenericControl body = new HtmlGenericControl();
        HtmlForm form = new HtmlForm();
        ReportViewerRoot = new ReportViewer();

        Controls.Add(body);
        body.Controls.Add(form);
        form.Controls.Add(ReportViewerRoot); 
```

我的 ReportManager/Web.config 包含以下附加标签：

```
<!-- added enableSessionState -->
<pages validateRequest="false" enableSessionState="true" />

<httpModules>
    <clear />
    <!-- added -->
    <add name="Session"  type="System.Web.SessionState.SessionStateModule"/>
</httpModules>

<httpHandlers>
    <!-- added -->
    <add verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</httpHandlers> 
```

Ps：我无法将report.aspx中的html代码与reportviewer（aspx或cs）结合起来。我也不能通过使用在 aspx 中动态添加 ReportViewer`<% AddRV(); %>`

Pss Web.config 帮我解决了这些错误：

> *在远程模式下，报表查看器控件需要启用会话状态或在配置文件中指定报表服务器连接信息。*

* * *

> *报告查看器 Web 控制 HTTP 处理程序尚未在应用程序的 web.config 文件中注册。添加到 web.config 文件的 system.web/httpHandlers 部分。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-16T19:16:58.703

在 web.config 中包含一个标签dependentAssembly 以强制特定版本：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
     <dependentAssembly>
        <assemblyIdentity name="Microsoft.ReportViewer.WebForms" publicKeyToken="89845dcd8080cc91" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-14.0.0.0" newVersion="14.0.0.0" />
      </dependentAssembly> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-01-29T09:54:53.690

去

HKEY_CLASSES_ROOT\Installer\Assemblies\Global

通过右键单击该程序集并选择删除来搜索程序集并删除完整行。

# ajax - JSF，用ajax定期刷新一个组件？

> ID：11228198
> 
> 赞同：16
> 
> 时间：2012-06-27T14:11:46.180
> 
> 标签：ajax, jsf, notifications, refresh

我正在开发一个应用程序 JSF，我想定期刷新一个带有 ajax 的组件，例如 facebook 通知区域行为。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-27T14:16:33.217

民意调查是您需要使用的

> 轮询组件在指定的时间间隔内进行 ajax 调用。

例如 Primefaces 民意调查

```
<h:form id="form">
    <h:outputText id="txt_count" value="#{counterBean.count}" />
    <p:poll interval="3" listener="#{counterBean.increment}" update="txt_count" />
</h:form> 
```

展示[Primefaces Ajax Poll的链接](http://www.primefaces.org/showcase/ui/ajax/poll.xhtml)

纯 JSF 方法是使用将调用定期的 js 计时器`document.getElementById('someFormId:idOfButton').click();`

或jQuery`$("#someFormId\\:idOfButton").click();`

而按钮看起来像这样

```
<h:commandButton id="idOfButton">
    <f:ajax render="txt_count"></f:ajax>
</h:commandButton> 
```

像这样的东西

```
setInterval(function(){$("idOfButton").click()},3000); 
```

有关计时器[JavaScript 计时事件的更多信息](http://www.w3schools.com/js/js_timing.asp)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T21:59:38.697

在 RichFaces 中也有一个投票组件。[这是他们](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/a4j_poll.html)提供的一个很好的例子

```
<a4j:region>
      <h:form>
            <a4j:poll id="poll" interval="1000" enabled="#{userBean.pollEnabled}" reRender="poll,grid"/>
      </h:form>
</a4j:region>

<h:form>
      <h:panelGrid columns="2" width="80%" id="grid">
           <h:panelGrid columns="1">
                <h:outputText value="Polling Inactive" rendered="#{not userBean.pollEnabled}" />
                <h:outputText value="Polling Active" rendered="#{userBean.pollEnabled}" />
                <a4j:commandButton style="width:120px" id="control" value="#{userBean.pollEnabled?'Stop':'Start'} Polling" reRender="poll, grid">  
                     <a4j:actionparam name="polling" value="#{!userBean.pollEnabled}" assignTo="#{userBean.pollEnabled}"/>
                </a4j:commandButton>
          </h:panelGrid>
          <h:outputText id="serverDate" style="font-size:16px" value="Server Date: #{userBean.date}"/>
    </h:panelGrid>
</h:form> 
```

# iphone - 缩放时保持 UIButton 相对

> ID：11228200
> 
> 赞同：1
> 
> 时间：2012-06-27T14:12:00.347
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个 UIScrollview，里面有一个 UIImageview 显示平面图。我在滚动视图中还有一个 UIButton 用作标记/图钉。

我已经通过在图像上捏/双击实现了缩放，但是当图像滚动和/或缩放时 UIButton 元素显然不会移动。

我尝试了以下代码来尝试在缩放完成后重新定位按钮：

```
[myButton setFrame:CGRectMake(
                          (myButton.frame.origin.x - myButton.frame.size.width / 2) * _scrollView.zoomScale,
                          (myButton.frame.origin.y - myButton.frame.size.height / 2) * _scrollView.zoomScale,
                          myButton.frame.size.width, myButton.frame.size.height)]; 
```

这会将按钮移动到左上角。

有没有人知道我应该做些什么来保持按钮相对于图像（就像标记在谷歌地图上所做的一样）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:53:45.163

我最近回答了一个[与此非常相似的问题。](https://stackoverflow.com/q/11158919/1439815)如果您不需要实时更新（仅在缩放完成时更新），那么您应该能够使用此处概述的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:09:40.217

好的，这已通过以下方式解决：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setBackgroundImage:[UIImage imageNamed:@"Marker.png"] forState:UIControlStateNormal];
button.frame = CGRectMake(640.0, 230.0, 30.0, 46.0);
[button addTarget:self action:@selector(aMethod:)forControlEvents:UIControlEventTouchUpInside];
[self.imageView addSubview: button];
self.imageView.userInteractionEnabled = YES; 
```

基本上通过直接将按钮添加到 imageView 然后启用 userInteraction，我能够获得所需的所有功能。

# javascript - PhoneGap 无法传递查询字符串

> ID：11228203
> 
> 赞同：0
> 
> 时间：2012-06-27T14:12:10.260
> 
> 标签：javascript, html, cordova

我有一个 index.html 和 edit.html 并尝试执行以下操作，但是通过单击第二个和第三个链接，模拟器向我显示了一条错误消息：Application Error, A network error occurred (file://android_asset/www/ edit.html?id=2) 和 (file://android_asset/www/edit.html?id=3)

```
<!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="width=320; user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>PhoneGap</title>
      <link rel="stylesheet" href="master.css" type="text/css" media="screen" title="no title">
      <script type="text/javascript" charset="utf-8" src="cordova-1.8.0.js"></script>
      <script type="text/javascript" charset="utf-8" src="main.js"></script>

  </head>
  <body   id="stage" class="theme">
    <h1>Welcome to XXX!</h1>

    <a href = "edit.html"> 1</a>
    <a href = "edit.html?id=2"> 2</a>
    <a href = "edit.html?id=3"> 3</a>

  </body>
</html> 
```

我的 edit.html 只是一个 html 标题和正文。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:52:43.903

是的，这是 Android 中的错误，而不是 PhoneGap。去为这个谷歌问题加注星标以添加你的声音：

[http://code.google.com/p/android/issues/detail?id=17535](http://code.google.com/p/android/issues/detail?id=17535)

在其他新闻中，我们相信我们将在月底发布的 1.9.0 版本中解决问题。

# ipad - 用于 Google 地图的 IPAD 上的画布叠加层令人毛骨悚然

> ID：11228204
> 
> 赞同：1
> 
> 时间：2012-06-27T14:12:17.610
> 
> 标签：ipad, google-maps, canvas

我正在使用带有 OverlayView 的 Google Maps V3 将 HTML5 Canvas 放到地图上。我将 DIV 附加到叠加层，DIV 中包含 Canvas 元素。

在地图被平移/放大等之后，我：

*   移动 DIV（左侧，顶部 CSS 属性）以重新居中 DIV/Canvas
*   我在画布上重绘图形

这在桌面浏览器中运行速度非常快。但是，在 IPAD2 上它真的很慢，并且在移动 DIV 和重新绘制 Canvas 之间存在延迟，因此每次移动/重新绘制地图时它都会跳来跳去。

几乎就像 IPAD 逐块重绘 Canvas 元素一样（就像常规的地图图块一样）。为什么它会这样做呢？HTML5 Canvas 在 IPAD 上通常非常快，与在瓷砖中绘制无关。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:14:22.643

看来这与使您的 Canvas 对象太大有关。我让它的高度是谷歌地图的两倍，宽度是谷歌地图的两倍，所以屏幕尺寸总共是 4 倍，这似乎真的让事情变慢了……

# php - Htaccess 忽略文件夹

> ID：11228206
> 
> 赞同：0
> 
> 时间：2012-06-27T14:12:27.990
> 
> 标签：php, .htaccess

我正在尝试为站点创建管理系统，但 htaccess 破坏了它 D：

管理部分位于名为`admin`.

我的 htacces 很远：

```
Options +FollowSymLinks -Indexes

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(admin)$ admin/index.php
RewriteRule ^([\wæøå]+)$ index.php?page=$1 [QSA]
RewriteRule ^([\wæøå]+)/$ index.php?page=$1 [QSA]

RewriteRule ^(nyhed)/([\w\d\-æøå]+)$ index.php?page=$1&nyhed=$2 [QSA]
RewriteRule ^(nyhed)/([\w\d\-æøå]+)/$ index.php?page=$1&nyhed=$2 [QSA] 
```

但不会让我进入那个文件夹吗？

所以我`if`在我的索引中做了一个：

```
if($_GET["page"] == "admin"){
    header("location:http://google.com");
} 
```

但这也无济于事，也没有错误 D：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:02:59.100

RewriteCond 行可以在你拥有它们时串在一起，但它们只会影响它们得出的第一条规则。

```
Options +FollowSymLinks -Indexes

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?page=$1 [QSA] 
```

这会将所有对不存在的目录和文件的请求发送到 index.php。存在的文件和目录不会受到影响。其他规则是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:25:47.783

这是你的问题：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f 
```

您正在重写一个名为的目录，该目录`admin`显然存在于您的文件系统中，如 Apache 所说：

`if this path does not exist as a directory path or as a file path continue with the rewrites`

这就是为什么它并没有完全按照您期望的方式重写。

# postgresql - 如何处理数据仓库 (PostgreSQL) 文档？

> ID：11228213
> 
> 赞同：1
> 
> 时间：2012-06-27T14:12:51.623
> 
> 标签：postgresql, documentation, data-warehouse

我们在 PostgreSQL 数据库中确实有一个小型数据仓库，我必须记录所有表。

我想我可以为每一列和每一表添加评论并使用管道“|” 分隔符添加更多属性。然后我可以使用信息模式和数组函数来获取文档并使用任何报告软件来创建所需的输出。

```
select
    ordinal_position,
    column_name,
    data_type,
    character_maximum_length,
    numeric_precision,
    numeric_scale,
    is_nullable,
    column_default,
    (string_to_array(descr.description,'|'))[1] as cs_name,
    (string_to_array(descr.description,'|'))[2] as cs_description,
    (string_to_array(descr.description,'|'))[3] as en_name,
    (string_to_array(descr.description,'|'))[4] as en_description,
    (string_to_array(descr.description,'|'))[5] as other
from 
    information_schema.columns columns
    join pg_catalog.pg_class klass on (columns.table_name = klass.relname and klass.relkind = 'r')
    left join pg_catalog.pg_description descr on (descr.objoid = klass.oid and descr.objsubid = columns.ordinal_position)
where 
    columns.table_schema = 'data_warehouse'
order by 
    columns.ordinal_position; 
```

这是一个好主意还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:30:18.117

除非您必须包含系统表的描述，否则我不会尝试将您的描述硬塞到 pg_catalog.pg_description 中。制作自己的桌子。这样您就可以将列保留为列，而不必使用笨重的字符串函数。

或者，考虑按照[javadoc](http://en.wikipedia.org/wiki/Javadoc)的行向您的主模式文件添加特殊格式的注释。然后编写一个工具来提取这些评论并创建一个文档。这样，评论与他们正在评论的内容保持接近，并且您根本不必弄乱数据库来生成报告。例如：

```
--* Used for authentication.
create table users
(
  --* standard Rails-friendly primary key.  Also an example of
  --* a long comment placed before the item, rather than on the 
  --* the same line.
  id serial primary key,
  name text not null,     --* Real name (hopefully)
  login text not null,    --* Name used for authentication
  ...
); 
```

您的文档工具会读取文件，查找`--*`评论，找出评论与内容相关的内容，并生成某种报告，例如：

```
table users: Used for authentication
  id: standard Rails-friendly primary key.  Also an example of a
      long comment placed before the item, rather than on the same
      line.
  name: Real name
  login: Name used for authentication 
```

您可能会注意到，通过适当的注释，主模式文件本身就是一个非常好的报告，也许不需要其他任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T12:23:48.043

如果有人感兴趣，这里是我用于我的小型文档项目的初始加载的内容。文档位于两张表中，一张用于描述表，一张用于描述列和约束。我很感激任何反馈。

```
/* -- Initial Load - Tables */

drop table dw_description_table cascade;

create table dw_description_table  (
  table_description_key serial primary key,
  physical_full_name character varying,
  physical_schema_name character varying,
  physical_table_name  character varying,
  Table_Type  character varying,   -- Fact Dimension   ETL Transformation
  Logical_Name_CS character varying,
  Description_CS character varying,
  Logical_Name_EN character varying,
  Description_EN character varying,
  ToDo  character varying,
  Table_Load_Type character varying,   --Manually TruncateLoad  AddNewRows
  Known_Exclusions character varying,
  Table_Clover_Script character varying
);

insert into dw_description_table (physical_full_name, physical_schema_name, physical_table_name) (

select 
    table_schema || '.' || table_name as physical_full_name, 
    table_schema, 
    table_name 
from 
    information_schema.tables 
where 
    table_name like 'dw%' or table_name like 'etl%'
)

/* -- Initial Load - Columns */

CREATE TABLE dw_description_column (
  column_description_key serial,
  table_description_key bigint,
  physical_full_name text,
  physical_schema_name character varying,
  physical_table_name  character varying,
  physical_column_name  character varying,
  ordinal_position  character varying,
  column_default  character varying,
  is_nullable  character varying,
  data_type  character varying,
  logical_name_cs  character varying,
  description_cs  character varying,
  logical_name_en  character varying,
  description_en  character varying,
  derived_rule  character varying,
  todo  character varying,
  pk_name  character varying,
  fk_name  character varying,
  foreign_table_name  character varying,
  foreign_column_name  character varying,
  is_primary_key boolean,
  is_foreign_key boolean,
  CONSTRAINT dw_description_column_pkey PRIMARY KEY (column_description_key ),
  CONSTRAINT fk_dw_description_table_key FOREIGN KEY (table_description_key)
      REFERENCES dw_description_table (table_description_key) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION  
);

insert into dw_description_column  ( 
    table_description_key ,  
    physical_full_name ,  
    physical_schema_name ,  
    physical_table_name  ,  
    physical_column_name ,  
    ordinal_position  ,  
    column_default  ,
    is_nullable  ,
    data_type  ,  
    logical_name_cs  ,  
    description_cs  ,  
    logical_name_en  ,  
    description_en  ,  
    derived_rule  ,  
    todo  ,  
    pk_name  ,
    fk_name  ,
    foreign_table_name  ,  
    foreign_column_name  ,  
    is_primary_key ,  
    is_foreign_key ) 

(

with

dw_constraints as (
SELECT  
    tc.constraint_name, 
    tc.constraint_schema || '.' || tc.table_name || '.' || kcu.column_name as physical_full_name,  
    tc.constraint_schema,
    tc.table_name, 
    kcu.column_name, 
    ccu.table_name AS foreign_table_name, 
    ccu.column_name AS foreign_column_name,
    TC.constraint_type
FROM 
    information_schema.table_constraints AS tc  
    JOIN information_schema.key_column_usage AS kcu ON (tc.constraint_name = kcu.constraint_name and tc.table_name = kcu.table_name)
    JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name
WHERE 
    constraint_type in ('PRIMARY KEY','FOREIGN KEY')
    AND tc.constraint_schema = 'bizdata'
    and (tc.table_name like 'dw%' or tc.table_name like 'etl%')
group by
    tc.constraint_name, 
    tc.constraint_schema,
    tc.table_name, 
    kcu.column_name, 
    ccu.table_name ,
    ccu.column_name,
    TC.constraint_type

)

select 
    dwdt.table_description_key,
    col.table_schema || '.' || col.table_name || '.' || col.column_name as physical_full_name, 
    col.table_schema as physical_schema_name, 
    col.table_name as physical_table_name, 
    col.column_name as physical_column_name, 
    col.ordinal_position, 
    col.column_default, 
    col.is_nullable, 
    col.data_type,
    null as Logical_Name_CS ,
    null as Description_CS ,
    null as Logical_Name_EN,
    null as Description_EN ,
    null as Derived_Rule ,
    null as ToDo,
    dwc1.constraint_name pk_name,
    dwc2.constraint_name as fk_name,
    dwc2.foreign_table_name,
    dwc2.foreign_column_name,
    case when dwc1.constraint_name is not null then true else false end as is_primary_key,
    case when dwc2.constraint_name is not null then true else false end as foreign_key
from 
    information_schema.columns col
    join dw_description_table dwdt on (col.table_schema || '.' || col.table_name = dwdt.physical_full_name )
    left join dw_constraints dwc1 on ((col.table_schema || '.' || col.table_name || '.' || col.column_name) = dwc1.physical_full_name and dwc1.constraint_type = 'PRIMARY KEY')
    left join dw_constraints dwc2 on ((col.table_schema || '.' || col.table_name || '.' || col.column_name) = dwc2.physical_full_name and dwc2.constraint_type = 'FOREIGN KEY') 
where 
    col.table_name like 'dw%' or col.table_name like 'etl%'
) 
```

# sql-server-2008 - 解决 SQL Server 2008 视图中的临时表问题

> ID：11228216
> 
> 赞同：0
> 
> 时间：2012-06-27T14:13:01.037
> 
> 标签：sql-server-2008, view, temp-tables

我用这种格式写了一个查询..

```
Select * INTO #xyz FROM () 
```

后来我想用它来创建一个视图，如......

```
CREATE VIEW aaa
AS 
   Select * INTO #xyz FROM () 
```

但出现以下错误：

1.  关键字“INTO”附近的语法不正确。
2.  临时表上不允许视图或函数

有人可以建议一个解决方法吗？是否可以使用临时表来创建视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:21:07.070

您当然不能在视图中使用 select into。并且 termp 表也不合适。请改用与临时表等效的派生表。例子：

假设你有：

```
select t1.id, t2.field1 into #temp from table1 t1
join Table2 t2 on t1.id = t2.id
where t2.somefield2 = 'mytest'

select t1.id, t2.field1, t1.field1
from mytable2 t1
join #Temp t2 on t1.id = t2.id
where t2.somefield = 'test' 
```

然后你可以使用：

```
select t1.id, t2.field1, t1.field1
from mytable2 t1
join (select t1.id, t2.field1 
        from table1 t1
        join Table2 t2 on t1.id = t2.id
        where t2.somefield2 = 'mytest') t2 
    on t1.id = t2.id
where t2.somefield = 'test' 
```

您也可以使用 CTE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:18:28.463

正如错误消息所说，无法使用临时表。

您应该使用也可以在视图中指定的永久表或 CTE。

CTE 可以根据您的情况为您提供帮助。如果您在研究 CTE 是什么后认为合适，请用一些上下文描述您的问题。简而言之，CTE 是一个查询，您可以多次引用它，过去人们使用临时表。

[http://msdn.microsoft.com/en-us/library/ms190766(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms190766(v=sql.105).aspx)

# java - Spring中作为bean属性的完整路径

> ID：11228217
> 
> 赞同：4
> 
> 时间：2012-06-27T14:13:10.407
> 
> 标签：java, spring

说，我在 Spring 上下文中有以下 bean：

```
<bean class="some.class.BlabBlahBlah">
    <property name="location" value="classpath:somefile.xml"/>
</bean> 
```

当前`somefile.xml`放置在 中`src/main/java`，但我想将其放置在文件系统中的某个位置。有没有办法做到这一点？我试图设置完整路径而不是这个`classpath:`，但它没有用。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T14:26:45.950

通过[参考（表 4.1）](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/resources.html#resources-implementations)，您可能应该使用文件系统资源路径：

```
<property name="location" value="file:/path/to/file.xml" /> 
```

# java - 属性文件：使用键作为变量

> ID：11228218
> 
> 赞同：14
> 
> 时间：2012-06-27T14:13:15.033
> 
> 标签：java

我想使用属性文件中定义的键作为变量，如下所示：

```
key1= value1
key2= value2
key3= key1 
```

我尝试：

```
key3= {key1} 
```

或者

```
key3= ${key1} 
```

但它不起作用！

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-27T14:18:12.787

Java 的内置 Properties 类不能满足您的需求。

但是有第三方库可以做到。 [Commons Configuration](http://commons.apache.org/configuration/)是我成功使用的一种配置。该[`PropertiesConfiguration`](http://commons.apache.org/proper/commons-configuration/apidocs/org/apache/commons/configuration2/PropertiesConfiguration.html)课程完全符合您的要求。

因此，您可能有一个名为的文件`my.properties`，如下所示：

```
key1=value1
key2=Something and ${key1} 
```

使用此文件的代码可能如下所示：

```
CompositeConfiguration config = new CompositeConfiguration();
config.addConfiguration(new SystemConfiguration());
config.addConfiguration(new PropertiesConfiguration("my.properties"));

String myValue = config.getString("key2"); 
```

`myValue`将`"Something and value1"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:04:10.437

.xml 更好：使用最新的 Maven。你可以用 maven 做一些整洁的事情。在这种情况下，您可以创建一个包含以下行的 .properties 文件：

```
key1 = ${src1.dir}
key2 = ${src1.dir}/${filename}
key3 = ${project.basedir} 
```

在 maven 的 pom.xml 文件（放置在项目的根目录中）中，您应该执行以下操作：

```
<resources>
    <resource>
        <filtering>true</filtering>
        <directory>just-path-to-the-properties-file-without-it</directory>
        <includes>
            <include>file-name-to-be-filtered</include>
        </includes>
    </resource>
</resources>

...

<properties>
    <src1.dir>/home/root</src1.dir>
    <filename>some-file-name</filename>
</properties> 
```

这样，您将在构建时更改键值，这意味着编译后您将在属性文件中拥有这些值：

```
key1 = /home/root
key2 = /home/root/some-file-name
key3 = the-path-to-your-project 
```

当您与 pom.xml 文件位于同一目录中时，使用此行编译： mvn clean install -DskipTests

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:26:44.690

当您在属性文件中定义键的值时，它将被解析为文字值。因此，当您定义 时`key3= ${key1}`，key3 的值为“${key1}”。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Properties.html#load(java.io.InputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Properties.html#load(java.io.InputStream) )

我同意 csd，普通的配置文件可能不是你的选择。我更喜欢使用 Apache Ant ( [http://ant.apache.org/](http://ant.apache.org/) )，您可以在其中执行以下操作：

```
<property name="src.dir" value="src"/>
<property name="conf.dir" value="conf" /> 
```

然后稍后当您想使用密钥“src.dir”时，只需将其命名为：

```
<dirset dir="${src.dir}"/> 
```

使用 Apache Ant 的另一个好处是您还可以将 .properties 文件加载到 Ant 构建文件中。只需像这样导入它：

```
<loadproperties srcFile="file.properties"/> 
```

# javascript - 一个小的 XML 修饰符

> ID：11228221
> 
> 赞同：0
> 
> 时间：2012-06-27T14:13:25.053
> 
> 标签：javascript, xml, html

我的公司与另一家公司合作，该公司为我们提供各种闪光仪，我们使用这些闪光仪并与我们的软件集成。这些仪表使用 XML 文件进行配置，这些文件不是特别大，但对于那些不知道他们在看什么的人来说并不直观。我自己开发了一些小东西，我可以提供给我们的客户和员工配置这个软件，使用某种形式的 GUI 界面，无论多么简单，都可以用来修改这些 XML 文件，然后保存它们，客户端边。这个想法是，这可以被放入现场安装、本地打开和使用的包中。

我们目前有一个本地 html 页面，该页面显示所有仪表的功能并存储在安装包中，以便客户可以选择他们想要使用的仪表。这导致我最初考虑扩展这个 html 页面以提供我正在寻找的功能。通过对 XML/HTML DOM 和一些 JavaScript 的各种研究，我意识到虽然我可以做我想做的操作，但没有办法在不安装另一块PHP 等软件。

我正在寻找的是有人告诉我我离基地很远，并且有一种干净的方式可以使用 HTML/JavaScript/XML 来做我想做的事情（我知道这很可能是梦想，但仍然是可取的），或指导什么语言可以用小尺寸实现。目前我们安装的包只有26mb左右，供参考。我不介意做进一步的研究，为了可行性，这实际上只是一个开始/计划的步骤。所以希望我不必在客户端机器上安装任何新软件，这可以在没有服务器端交互的本地机器上实现，以节省最小的空间。

提前感谢大家的反馈。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:24:28.383

这是一个可以帮助您操作 XML 的代码片段，您可以将输出保存在另一个 XML 文件中。只需使用 html/php/css/Javascript 进行布局。

```
 var req = new Request({
    method : 'get',
    url: 'templates/absolu/animation.xml',
    onSuccess: function(txt,xml){
      /* we grab the XML data, particularly the content of diapositive tags */

      x=xml.documentElement.getElementsByTagName("diapositive");
      for (i=0;i<x.length;i++){
        xx=x[i].getElementsByTagName("image");
        {
          try{listeImages[i] = xx[0].firstChild.nodeValue;}
          catch (er){listeImages[i] = '';
                     list[i]['Image'] = xxx[0].firstChild.nodeValue;}
        }
        xx=x[i].getElementsByTagName("url");
        {
          try{listeURL[i] = xx[0].firstChild.nodeValue;}
          catch (er){listeURL[i] = '';
                     list[i]['URL'] = xxx[0].firstChild.nodeValue;}
        }
        xx=x[i].getElementsByTagName("text");
        {
          try{listeTextes[i] = xx[0].firstChild.nodeValue;
              liste[i]['Texte'] = xxx[0].firstChild.nodeValue;}
          catch (er){listTextes[i] = '';}
        }
        xxx=x[i].getElementsByTagName("date");
        {
        try{listeDates[i] = xxx[0].firstChild.nodeValue;}
          catch (er){listeDates[i] = "21112035";}
        }
      } 
```

这是我的 XML 文件的内容（片段）

```
 <diaporama>
      <diapositive>
      <date>01012015</date>
      <image>images/promos/promo-1.jpg</image>
      <url><![CDATA[index.php?option=com_content&view=article&id=70&Itemid=66&promo=FR2&promoname=Avantages_du_cable_30_95]]></url>
  </diapositive>  

  <diapositive>
    <date>01012015</date>
    <image>images/promos/promo-2.jpg</image>
    <url><![CDATA[index.php?option=com_content&view=article&id=70&Itemid=66&promo=FR2&promoname=Avantages_du_cable_30_95]]></url>
  </diapositive>
</diaporama> 
```

希望对你有一点帮助！祝你今天过得愉快！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:33:19.563

有很多背景，但我不完全确定您问题的技术方面。一部分似乎与 HTML5 本地存储有关——这里有一个[文件 API](http://www.w3.org/TR/file-writer-api/)可能会有所帮助，但我自己还没有尝试过。

您问题的另一部分是关于在浏览器客户端上修改 XML。可能最好的解决方案是使用 XSLT，一种旨在转换 XML 的语言。

[Saxon-CE](http://www.saxonica.com/ce/doc/about/intro.xml)是用于浏览器的 XSLT 2.0 处理器。作为一个 JavaScript 应用程序，它具有 JavaScript 互操作性，您需要在需要时与客户端上的本地存储集成。我知道您处于早期阶段，但如果您正在寻找可行的选择，那么 Saxon-CE 可能应该在您的名单上。

# design-patterns - Cocos2d的顶层模式是什么

> ID：11228222
> 
> 赞同：1
> 
> 时间：2012-06-27T14:13:30.507
> 
> 标签：design-patterns, cocos2d-iphone

谁能告诉我 cocos2d 的顶级模式的名称。我的意思是不要在模型、视图和控制器中拆分信息，尽管这也可以做到。（我仍然认为这是一种解决方法，并且似乎不符合框架的想法）。那么为什么 cocos2d 中没有使用 MVC 的概念，而使用的是什么模式呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:19:03.000

从上到下，它看起来像这样：

> 场景->图层->节点

由于它是游戏驱动的，它更少 MVC，更多基于循环。因此，您可以随意组织代码。这是 cocos 的一大优点，它是围绕许多范式设计的。

如果您想使用块而不是委托，*您可以*.
如果你想要一个基于事件的游戏，而不是基于循环的游戏，*你可以*.
如果您想在 2D 游戏中加入 3D 元素，*您可以*.
如果你想在你的游戏中加入一个 UIKit 元素，*你可以*.

这应该是 cocos2D 的座右铭：*you can* .

# ruby-on-rails-3 - Capistrano & jruby & rvm - Bundler::GemNotFound: 在任何来源中都找不到 rake-0.9.2.2

> ID：11228223
> 
> 赞同：1
> 
> 时间：2012-06-27T14:13:31.233
> 
> 标签：ruby-on-rails-3, rvm, capistrano, rvm-capistrano

我`Bundler::GemNotFound: Could not find rake-0.9.2.2 in any of the sources`在使用 capistrano 部署我的应用程序以及处理`deploy:assets:precompile`.

命令是： `cd /opt/app/deploy/entercamp/releases/20120627132117 && /usr/local/rvm/rubies/jruby-1.6.7/bin/jruby --1.9 -S bundle exec rake RAILS_ENV=staging RAILS_GROUPS=assets assets:precompile`

我在服务器上手动尝试了该命令，它工作得很好。我可以看到 rake-0.9.2.2 安装在`bundle:install`部署过程的结果输出中。

问题可能出在哪里？

详细信息在：[https ://gist.github.com/3005237](https://gist.github.com/3005237)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:10:21.927

这在 rvm-capistrano 项目的 Michal 的帮助下得到了解决。

它引发此错误是因为 jruby 默认安装版本为 1.8，并且它在部署时尝试切换到 1.9 并导致问题。

解决方法是默认安装jruby 1.9版本：`rvm install jruby-1.6.7.2 --1.9`然后就可以了。

# java - 我想在变量中存储 0 到 100 之间的数字 - 我应该使用 INT 还是 BYTE，为什么？

> ID：11228225
> 
> 赞同：0
> 
> 时间：2012-06-27T14:13:35.483
> 
> 标签：java, types

我知道这是一个 n00b 问题，但我想定义一个变量，其值介于JAVA`0`和`100`JAVA 之间。我可以使用 INT 或 BYTE 作为数据类型——但哪一种是最好的。为什么？（好处？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:19:21.250

要么 要么`int`将`byte`用于存储该范围内的数字。

哪个最好取决于您的目标是什么。

*   如果您需要将大量这些数字存储在一个数组中，那么 a`byte[]`将比`int[]`具有相同长度的 a 占用更少的空间。

*   （令人惊讶的是）由于 JVM 执行堆栈帧/对象帧布局的方式，`byte`变量占用与 ... 相同的空间量。`int`

*   如果您正在使用这些值进行大量算术等运算，则`int`比`byte`. 在 Java 中，算术和按位运算会自动将操作数提升为`int`，因此当您需要分配回 a 时，`byte`您需要使用`(byte)`类型转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:15:27.323

从技术上讲，两者都不合适——如果您需要存储小数部分，则需要一个浮点数。

我个人认为，除非您实际上遇到资源受限的问题（嵌入式系统、大数据等），否则如果您使用 int. 良好的风格是关于人们易读的，因此表明您正在使用整数可能比过早优化并因此迫使您的代码的未来维护者（包括您自己）推测该变量的*真实*性质更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:16:31.567

使用字节数据类型存储 -128 到 127 之间的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:17:04.343

我认为由于您使用`0.00`了小数，这意味着您希望允许小数。最好的方法是使用浮点类型：`double`或`float`.

但是，如果您不需要小数，并且数字始终是整数，则可以使用`int`或`byte`。Byte 可以容纳高达 +127 或低至 -128 的任何内容，并且占用的空间比 int 少得多。

在您的系统上使用 32 位整数，您`byte`将占用 1/4 的空间！缺点是在对字节进行算术运算时必须小心——它们可能会溢出，如果超出范围会导致意外结果。
如果您正在使用基本的 IO 功能，例如创建声音或读取旧文件格式，那么字节是无价的。但要注意符号约定：负数设置了高位。但是，在进行普通数值计算时，我总是使用 int，因为它可以在需要时轻松扩展到更大的值，并且 32 位 cpu 确实具有最小的速度成本。唯一的问题是，如果您要存储大量它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T14:20:57.193

引用[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)：

> **byte：** byte 数据类型是一个 8 位有符号二进制补码整数。它的最小值为 -128，最大值为 127（含）。byte 数据类型可*用于在大型数组中节省内存*，其中内存节省实际上很重要。它们*也可以用来代替 int ，它们的限制有助于澄清您的代码*；变量的范围有限这一事实可以作为一种文档形式。
> 
> **int：** int 数据类型是一个 32 位有符号二进制补码整数。它的最小值为 -2,147,483,648，最大值为 2,147,483,647（含）。对于整数值，*此数据类型通常是默认选择，除非有理由（如上述）选择其他类型*。这种数据类型很可能对于您的程序将使用的数字足够大，但如果您需要更广泛的值，请改用 long。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T14:29:26.547

嗯，这取决于你在做什么......就像我说的那样使用 int ，因为它是声明整数的标准方式。但是，如果您做一些需要内存优化的特定操作，那么在这种情况下，字节可能会更好。

# java - 如何查找 JVM 尝试加载的类的列表和顺序（而不是已经加载的类）

> ID：11228228
> 
> 赞同：0
> 
> 时间：2012-06-27T14:13:38.390
> 
> 标签：java, jvm

我正在尝试调试 Sun JVM 尝试加载我调用的静态方法未使用的类的问题，这会导致`NoClassDefFoundError`. 详情如下：

方法`A.x()`调用`B.getTZ_OFFSET()`，它甚至在控件到达之前就遇到`NoClassDefFoundError`了。我查看了其中的所有静态变量和块，它们都没有引用或任何与之密切相关的东西。我假设仅仅导入类不会导致类被加载。`OraclePreparedStatement``getTZ_OFFSET``B``OraclePreparedStatement`

如何根据尝试加载的 JVM 找出依赖关系`OraclePreparedStatement`？

该开关`-verbose:class`仅给出已成功加载的类列表，而不是 JVM 尝试加载的类列表。有没有办法获得这些信息？

任何帮助将不胜感激。

我知道导入 ojdbc.jar 会导致问题消失，但我对根本原因更感兴趣，即为什么它首先尝试加载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:27:38.680

您的 JVM 找不到的类可能在许多地方被引用：在您调用的方法的参数列表中、返回类型、您正在使用的类的类（静态）成员、任何超类的类成员和静态初始化程序。您必须检查所有这些地方才能找到隐藏的参考。NoClassDefFoundError 也可能掩盖了您收到的其他一些错误，例如创建并引用不存在的类的异常对象。

确定加载顺序类的一种方法是实现您自己的类加载器。您只需要扩展类 ClassLoader 并覆盖方法 loadClass(String, boolean)，由此您可以打印出被请求的类的标准名称，然后委托给 super.loadClass(String, boolean)。

# linux - 从文件中提取文本的更简单方法

> ID：11228233
> 
> 赞同：2
> 
> 时间：2012-06-27T14:13:53.107
> 
> 标签：linux, bash, text-processing

我已经使用 Hugin 使用的命令行工具编写了一个批处理脚本来生成全景图。其中几个工具的一个有趣之处是它们允许多核使用，但必须在命令中标记此选项。

到目前为止我想出了什么：

```
#get the last fields of each line in the file, initialize the line counter
results=$(more /proc/cpuinfo | awk '{print ($NF)}')
count=0

#loop through the results till the 12th line for cpu core count
for result in $results; do
  if [ $count == 12 ]; then
    echo "Core Count: $result"
  fi
  count=$((count+1))
done 
```

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:17:14.623

`result=$(awk 'NR==12{print $NF}' /proc/cpuinfo)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:18:55.507

要回答有关获取第一/最后这么多行的问题，您可以使用[`head`](http://unixhelp.ed.ac.uk/CGI/man-cgi?head)and [`tail`](http://unixhelp.ed.ac.uk/CGI/man-cgi?tail)，例如：

```
cat /proc/cpuinfo | awk '{print ($NF)}' | head -12 | tail -1 
```

但是，与其搜索第 12 行，不如从语义上搜索任何包含核心的行。例如，某些机器可能有多个内核，因此您可能需要对结果求和：

```
cat /proc/cpuinfo | grep "cores" | awk '{s+=$NF} END {print s}' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T14:29:52.507

```
count=$(getconf _NPROCESSORS_ONLN) 
```

请参阅[getconf(1)](http://pubs.opengroup.org/onlinepubs/9699919799/toc.htm)和[sysconf(3) 常量](http://www.gnu.org/software/libc/manual/html_node/Constants-for-Sysconf.html)。

根据 Linux 手册页，`_SC_NPROCESSORS_ONLN`“可能不是标准的”。我的猜测是这需要 glibc 甚至是专门的 Linux 系统。如果这不起作用，我可能会考虑`/sys/class/cpuid`（也许有更好的东西？） over parsing `/proc/cpuinfo`。以上都不是完全可移植的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T14:18:50.613

有很多方法：

```
head -n 12 /proc/cpuinfo | tail -1 | awk -F: '{print $2}'
grep 'cpu cores' /proc/cpuinfo | head -1 | awk -F: '{print $2}' 
```

等等。

但我必须注意，您只获取第一部分的信息`/proc/cpuinfo`，我不确定这是否是您所需要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T14:27:28.563

如果 cpuinfo 改变它的格式 ;) ？也许这样的事情会更好：

```
cat /proc/cpuinfo|sed -n 's/cpu cores\s\+:\s\+\(.*\)/\1/p'|tail -n 1 
```

并确保对核心求和。我的有 12 或 16 个；）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T16:29:58.903

不确定您要做什么以及为什么上面所说的 ormaaj 也不起作用。根据您的描述，我的直觉会更简单。

```
grep processor /proc/cpuinfo  | wc -l 
```

# java - 带有特殊字符的枚举：如何？

> ID：11228235
> 
> 赞同：1
> 
> 时间：2012-06-27T14:14:00.123
> 
> 标签：java, enums, special-characters, java-6

我目前正在研究解析器。我走一棵树，其中大部分是非常确定的（我可以找到有限数量的值）。

通常在这些情况下，我会使用我希望找到的值的名称创建一个枚举，如下所示：

```
public enum myElements{
    like, 
    not_like,// "not like" is transformed in not_like by parser
    exists;
} 
```

在这种情况下，我可以通过这种方式检查字符串是否属于枚举：

```
String my_string;
myElements.valueOf(my_string); 
```

问题是目前我使用特殊字符（{">"、"<"、"<>"、...）无法使用特殊字符创建枚举值。

我想要的是将枚举与那些特殊字符元素相关联，例如

```
public enum myElements{
    greather_than(">"), 
    smaller_than("<")
} 
```

并继续使用简单的东西：

```
myElements.valueOf(my_string); 
```

目前我在所有地方都使用枚举，但对于这些元素，我使用 table。我想协调这个

顺便说一句，由于一些依赖关系，我使用 Java6。

欢迎提出想法，谢谢！

**编辑 ：**

这是我使用的当前表格版本的示例：

```
public static String[] compElements = {">", "<", "<>", "=", "<=", ">="}; 
```

与 valueOf 等效：

```
Arrays.asList(compElements).contains(my_string); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:17:54.777

听起来您只想让枚举存储所有“灵活”名称的映射，将名称映射到枚举值。您将无法使用`valueOf`，但您可以轻松编写自己的静态方法来返回相关的映射值。在静态初始化程序块中创建地图。（不要忘记，当自动调用构造函数时，静态初始化器*不会*执行。）

示例代码：

```
public enum Foo {
  // Idiomatic Java names. You could ignore those if you really want,
  // and overload the constructor to have a parameterless one which calls
  // name() if you really want.
  FIRST("first"),
  SECOND("second"),
  WITH_SPACE("with space");

  private static final Map<String, Foo> nameToValueMap;

  static {
    // Really I'd use an immutable map from Guava...
    nameToValueMap = new HashMap<String, Foo>();
    for (Foo foo : EnumSet.allOf(Foo.class)) {
      nameToValueMap.put(foo.friendlyName, foo);
    }
  }

  private final String friendlyName;

  private Foo(String friendlyName) {
    this.friendlyName = friendlyName;
  }

  public String getFriendlyName() {
    return friendlyName;
  }

  public static Foo fromFriendlyName(String friendlyName) {
    return nameToValueMap.get(friendlyName);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:18:25.887

您可以使用 Map 将枚举与特殊字符配对。

```
myElements.valueOf(my_string); 
```

可能

```
MyClass.translateToEnum(my_string); 
```

这将使用您的 Map 对象来确定要返回的枚举。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:17:05.763

您可以覆盖每个枚举的 toString 方法来保存您需要的值。我不确定这是否是你所追求的？

# android - 片段中的 Listview 导致内存泄漏

> ID：11228239
> 
> 赞同：5
> 
> 时间：2012-06-27T14:14:26.553
> 
> 标签：android

我有一个 FragmentActivity，其中`FragmentMediaOverview`包含一个`MediaItemView`s 列表（每个都有一个 imageview 和一些文本），然后单击其中一个打开详细信息片段的项目。现在，当我从列表到详细片段多次返回（通过后退按钮）和来回（单击列表项）时，我最终遇到了 OOM 错误。我将`SoftReference`s 用于列表项和详细信息片段中的位图。根据 MA​​T，`MediaItemView`s 和`FragmentMediaOverview`实例的数量越来越多，但我就是不知道为什么。

我读了这个[Android: AlertDialog 会导致内存泄漏](https://stackoverflow.com/questions/7083441/android-alertdialog-causes-a-memory-leak/)，但无法`null`通过侦听器解决它。

这是我的代码：

FragmentMediaOverview.java

（这不是 ListFragment，因为对于平板电脑布局`MediaAdapter`需要连接到 gridview）

```
public class FragmentMediaOverview extends Fragment {
    private static String TAG = FragmentMediaOverview.class.getSimpleName();

    private MediaAdapter adapter;
    private OnMediaSelectedListener selListener;
    private ArrayList<BOObject> mediaItems;

    private ViewGroup layoutContainer;    
    private AdapterView itemContainer; // list or gridview

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        Log.d(TAG, "onCreateView");
        layoutContainer = (ViewGroup) inflater.inflate(R.layout.fragment_media_overview, null);

        return layoutContainer;
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        selListener = (OnMediaSelectedListener) activity;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        itemContainer.setOnItemClickListener(null);
        selListener = null;
        adapter = null;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        initUi(layoutContainer);
        displayMedia();
    }

    private void initUi(ViewGroup layoutContainer) {
        itemContainer = (AdapterView) layoutContainer.findViewById(android.R.id.list);
        itemContainer.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                BOMedia mediaItem = ((BOMedia) mediaItems.get(position));
//the FragmentActivity is coordinating the FragmentTransactions
                selListener.onMediaSelected(mediaItem);
            }
        });
    }

    private void displayMedia() {
        Log.d(TAG, "Displaying List");
        if (mediaItems == null) {
            loadMedia();
            return;
        }

        Log.d(TAG, "List: " + mediaItems.size() + ", adapter: " + itemContainer.getAdapter());

        if (adapter == null) {
            Log.d(TAG, "Create Adapter with " + mediaItems.size());

            adapter = new MediaAdapter(getActivity(), mediaItems);
        }

        if (itemContainer.getAdapter() == null) {
            itemContainer.setAdapter(adapter);
        } else {
            adapter.setItems(mediaItems);
            adapter.notifyDataSetChanged();
        }

    }

    private void loadMedia() {
        FragmentHelper.showProgressSpinner(layoutContainer, android.R.id.list);
        DbHelper.getInstance().getMedia(mediaType, new DbQueryFinishListener() {

            @Override
            public void onDbCallFinish(ArrayList<BOObject> objects) {
                if (!getActivity().isFinishing()) {
                    mediaItems = objects;
                    Collections.sort(mediaItems, new Comparator<BOObject>() {
                        final Collator c = Collator.getInstance(Locale.GERMAN);
                        @Override
                        public int compare(BOObject s1, BOObject s2) {
                            if (s2 != null && ((BOMedia) s2).getTitle() != null && s1 != null
                                    && ((BOMedia) s1).getTitle() != null) {
                                return c.compare(((BOMedia) s1).getTitle(),((BOMedia) s2).getTitle());
                            } else {
                                return 0;
                            }
                        }
                    });
                    displayMedia();
                    FragmentHelper.hideProgressSpinner(layoutContainer, android.R.id.list);
                }
            }

            @Override
            public void onDbCallException(Exception exception) {
                if (!getActivity().isFinishing()) {
                    FragmentHelper.hideProgressSpinner(layoutContainer, android.R.id.list);
                }
            }
        });

    }
} 
```

媒体适配器.java

```
public class MediaAdapter extends BaseAdapter {
    private static final String TAG = MediaAdapter.class.getSimpleName();
    private Context context;
    private ArrayList<BOObject> mediaItems;

    public MediaAdapter(Context c, ArrayList<BOObject> mediaItems) {
        super();
        context = c;
        this.mediaItems = mediaItems;
    }

    @Override
    public int getCount() {
        return mediaItems.size();
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = new MediaItemView(context);
        }
        ((MediaItemView)convertView).initialize((BOMedia) mediaItems.get(position));        
        return convertView;
    }

    public void setItems(ArrayList<BOObject> mediaItems) {
        this.mediaItems = mediaItems;
    }
} 
```

MediaItemView.java

```
public class MediaItemView extends LinearLayout {
    private static final String TAG = MediaItemView.class.getSimpleName();
    private BOMedia item;
    private SoftReference<Bitmap> bm;
    private ImageView iv;
    private Context ctx;

    public MediaItemView(Context context) {
        super(context);
        LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        layoutInflater.inflate(R.layout.view_media_item, this);
        this.ctx = context;
    }

    /** Init the view with a new BOMedia object
     * @param mediaItem
     */
    public void initialize(BOMedia mediaItem) {
        this.item = mediaItem;
        initUI();
    }

    private void initUI() {
        TextView title = (TextView) findViewById(R.id.itemText);
        iv = (ImageView) findViewById(R.id.itemImage);

        title.setText(Html.fromHtml(item.getTitle()));
        iv.setImageBitmap(null);
        bm = null;
        System.gc();
        iv.invalidate();
        if (item.getFilepathThumb() != null && !item.getFilepathThumb().equals("")) {

            ExpansionPackManager.getInstance().getBitmapResource(item.getFilepathThumb(), false,
                    new BitmapReadListener() {

                        @Override
                        public void onFileRead(BitmapResponseMessage message) {
                            Log.d(TAG, "Bitmap read: " + message.getFilepath());
                            Bitmap image = message.getBitmap();
                            if (image != null && message.getFilepath().equals(item.getFilepathThumb())) {
                                bm = new SoftReference<Bitmap>(image);
                                iv.setImageBitmap(bm.get());
                                Log.d(TAG, "image set");
                            } else {
                                Log.d(TAG, "image too late: " + image);
                            }
                        }

                        @Override
                        public void onFileException(Throwable exception) {
                            Log.d(TAG, "image exception");
                        }
                    });

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:00:52.260

在 MediaItemView 中，位图的大小必须太大。如果位图是 600x600 并且您想要显示大小为 50x50 的图像，您可以使用`Bitmap.createScaledBitmap`. 您还应该在加载位图时使用位图缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:29:56.977

这是因为在滚动时会重新创建`View`for rach 子项。`ListView`这对资源来说非常沉重。为避免这种情况，请在适配器中使用持有者类`getView()`来保存和重用视图。这称为`Efficient Adapter`. 例如见`Efficient List Adapter`中`API demos`。[http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T04:54:42.770

您还可以使用：

```
android:hardwareAccelerated = true 
```

从 开始`Android 3.0 (API level 11)`，`Android 2D`渲染管道旨在更好地支持硬件加速。硬件加速使用`GPU`.

欲了解更多信息[http://developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

# php - 在我的特定 PHP 应用程序中，我还能做些什么来对抗 XSS 漏洞？

> ID：11228242
> 
> 赞同：2
> 
> 时间：2012-06-27T14:14:38.313
> 
> 标签：php, xss, owasp

我已经阅读了 OWASP 的 XSS[预防备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)，但我并没有真正认识到我的应用程序有这些规则。我不觉得我有这些规则中指出的任何漏洞。

我正在做一个遵循以下所有原则的 PHP 应用程序：

1.  没有一个用户输入直接显示在 HTML 页面上，而无需在服务器端进行处理和清理

2.  我所有的用户输入都用`htmlentities()`. 这足够了吗？（我使用准备好的语句进行 SQL 注入）

3.  一些用户输入`maxlength`在服务器端具有 5 个字符的条件。这是否有助于防止 XSS？（因为我几乎看不到 XSS 代码短于 6 个字符）

4.  除了来自数据库的数据之外，唯一显示给用户的用户输入是通过 ajax 发送到服务器的，使用而不是（使用 jQuery）进行清理`htmlentities`并重新引入 DOM`text()``html()`

在我的情况下，我应该担心 XSS 吗？我还能做些什么来保护自己免受 XSS 攻击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:10:52.693

> 我所有的用户输入都使用 htmlentities() 进行了清理。这足够了吗？（我使用准备好的语句进行 SQL 注入）

**没有**。首先，您应该过滤**输出**，而不是输入。在编程中永远不要相信任何数据，即使是那些来自你自己数据库的数据！在输入时，您只需将其转义以用于 SQL、日志等。但您还必须过滤基本的 html + 一些特殊字符：`\0 & < > ( ) + - = " ' \`输出。htmlentities() 是不够的。

假设您在网站上有一张图片：

```
<img src="xxx" onload="image_loaded({some_text_from_db});"> 
```

`{some_text_from_db}`将会`);alert(String.fromCharCode(58,53,53)`

如果您仅使用 htmlentities 对其进行转义，它将变为：

<img src="" onload="image_loaded( **);alert(String.fromCharCode(58,53,53)** );">

> 一些用户输入在服务器端具有 5 个字符的最大长度条件。这是否有助于防止 XSS？（因为我几乎看不到 XSS 代码短于 6 个字符）

总是在服务器端检查数据，如果你也想在客户端，没关系，但总是在服务器端也这样做。许多现代浏览器（chrome、ff、opera）允许用户“即时”编辑页面，以便他们可以轻松删除 maxlength 属性。

> 除了来自数据库的数据，唯一显示给用户的用户输入是通过 ajax 发送到服务器的，使用 htmlentities 进行清理，并使用 text() 而不是 html()（使用 jQuery）在 DOM 中重新引入

来自 .text() jquery 文档：

> 我们需要注意，此方法会根据需要对提供的字符串进行转义，以便在 HTML 中正确呈现。为此，它调用 DOM 方法 .createTextNode()，该方法将特殊字符替换为其 HTML 实体等效项（例如 < 表示 <）。

所以可能是的，应该足够了，但要注意从 text() 中转义，就像上面的例子一样。

您的应用程序过滤应如下所示：

*   **输入**用户 -> 过滤器 -> 应用程序
*   **输出**应用 -> 过滤器 -> 用户

不仅仅是输入过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:23:08.093

我建议将[HTMLawed](http://www.bioinformatics.org/phplabware/internal_utilities/htmLawed/)或[HTMLPurifier](http://htmlpurifier.org/)用于需要显示为 HTML 的用户输入，或者只是从用户输入中*完全*剥离不应该包含它的所有 HTML。HTMLPurifier 是两者中更强大的一个，在我使用它的任何项目中，我从未遇到过任何 XSS 问题。

# c# - 重定向时控制器方法参数为空

> ID：11228244
> 
> 赞同：2
> 
> 时间：2012-06-27T14:14:48.807
> 
> 标签：c#, asp.net-mvc

这有效：

```
 [HttpPost]
    public ActionResult Slots(Slots slots, ICollection<int> jobNos)
    {
        if (!ModelState.IsValid)
            return View(new SlotsViewModel() { JobNos = jobNos, Slots = slots });

        //
        // Do stuff
        //

        return View("MyResults", jobNos);
    }

    public ActionResult MyResults(ICollection<int> jobs)
    {
        return View(jobs);
    } 
```

但是，这不起作用。

```
 [HttpPost]
    public ActionResult Slots(Slots slots, ICollection<int> jobNos)
    {
        if (!ModelState.IsValid)
            return View(new SlotsViewModel() { JobNos = jobNos, Slots = slots });

        //
        // Do stuff
        //

        return RedirectToAction("MyResults", new { jobs = jobNos });
    }

    public ActionResult MyResults(ICollection<int> jobs)
    {
        return View(jobs);
    } 
```

当我重定向到新操作时，ICollection 作业应该有一个计数 > 0 时为空。

任何人都知道为什么重定向会清空集合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:21:14.413

`RedirectToAction`向客户端浏览器返回 302 响应，因此浏览器将对指定的 URL发出新的**GET请求。**

在这种情况下，如果你真的想在这两个（无状态）HTTP请求之间传递集合，你需要一些临时存储机制，比如`TempData`

```
TempData["Jobs"] =jobNos ;
return RedirectToAction("MyResults"); 
```

并在其他 ActionMethod 中读取

```
public ActionResult MyResults()
{
  var model=TempData["Jobs"] as List<int>;
  return View(model);
} 
```

`TempData`使用`Session`场景背后的对象来存储数据。但是一旦读取数据，数据就会终止。

# java - 如何将不可打印指定为 Hadoop 流中的键值分隔符

> ID：11228259
> 
> 赞同：1
> 
> 时间：2012-06-27T14:15:43.903
> 
> 标签：java, hadoop, hadoop-streaming

态度。我正在使用 stream.map.output.field.separator= 来指定分隔符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:15:25.160

我不确定您是否可以通过 -Dkey=value 通用选项语法传入不可打印的字符，但您应该能够修改代码以允许对类似转义的代码进行特殊解释：

*   [http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.3/src/contrib/streaming/src/java/org/apache/hadoop/streaming/PipeMapper.java?view=markup](http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.3/src/contrib/streaming/src/java/org/apache/hadoop/streaming/PipeMapper.java?view=markup) -第 78 行是从作业 conf 中读取分隔符的位置

修改此代码，您可以检测到类似`&#x`example 的前缀并将尾随字符视为十六进制编码，因此 tab 可以作为`-Dstream.map.output.field.separator=&#x09`.

# c# - 验证十进制值的列表（或该列表的子列表）是否可以等于某个总和

> ID：11228261
> 
> 赞同：7
> 
> 时间：2012-06-27T14:15:48.297
> 
> 标签：c#, linq, algorithm, list

嗨，我有一个`List<decimal>`]0;1] 之间的包含值。我想检查这些值的总和（或小计）是否等于 1（或几乎）。

我还可以使用`Linq`函数来过滤或操作列表。

期望的结果：

*   包含 {0.7, 0.7, 0.7} 的列表应返回 false；
*   包含 {0.7, 0.3, 0.7} 的列表应返回 true；
*   包含 {0.777777, 0.2, 0.1} 的列表应返回 false；
*   包含 {0.33333, 0.33333, 0.33333} 的列表应该返回 true；
*   包含 {0.4, 0.5, 0.6, 0.3} 的列表应返回 true。

显然，我想要性能成本最低的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:45:51.137

更新——现在不重复总结试试这个

```
bool isClose(IEnumerable<decimal> list, decimal epislon) {
  return isClose(Enumerable.Empty<decimal>(),list,0,list.Sum(),epislon);
}
// Define other methods and classes here
bool isClose(IEnumerable<decimal> left,IEnumerable<decimal> right, decimal leftSum,decimal rightSum, decimal epsilon) {
  if (leftSum>=1-epsilon && leftSum<=1+epsilon) return true;
  if (leftSum>1+epsilon) return false;
  if (leftSum+right.Sum()< 1-epsilon) return false;
  if (!right.Any()) return false;

  for (var i=0;i<right.Count();i++) {
    var skip=right.Skip(i);
    var newItem=skip.First();
    if (isClose(left.Concat(skip.Take(1)),skip.Skip(1),leftSum+newItem,rightSum-newItem,epsilon)) return true;
  }
  return false;
}

isClose(new[] {0.7m,0.7m,0.7m},0.001m); // returns false
isClose(new[] {0.7m,0.3m,0.7m},0.001m); //returns true
isClose(new[] {0.777777m,0.2m,0.1m},0.001m); //returns false
isClose(new[] {0.33333m,0.33333m,0.33333m},0.001m); //returns true 
```

编辑第五次测试

```
isClose(new[] {0.4m, 0.5m, 0.6m, 0.3m},0.001m); //returns true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:36:02.513

这是*子集和*问题，是背包问题的一个特例。这很难（NP完全）。最著名的算法具有指数复杂度。然而，有多项式复杂度的近似算法。这些回答了“是否存在总和为 1±ε 的子集？”的问题。

*   [http://www.cs.dartmouth.edu/~ac/Teach/CS105-Winter05/Notes/nanda-scribe-3.pdf](http://www.cs.dartmouth.edu/~ac/Teach/CS105-Winter05/Notes/nanda-scribe-3.pdf)
*   [http://en.wikipedia.org/wiki/Subset_sum_problem](http://en.wikipedia.org/wiki/Subset_sum_problem)
*   Knuth 的 TAOCP（可能）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T15:03:44.217

这是一种相当直接、幼稚、蛮力的方法。它不会是有效的，但希望它更容易理解。

```
private const decimal threshold = .001M;

public static bool CloseEnough(decimal first, decimal second, decimal threshold)
{
    return Math.Abs(first - second) < threshold;
}

private static bool SubsetSum(List<decimal> data, int desiredSum)
{

    int numIteratons = (int)Math.Pow(2, data.Count);

    for (int i = 1; i < numIteratons; i++)
    {
        decimal sum = 0;
        int mask = 1;
        for (int j = 0; j < data.Count && sum < desiredSum + threshold; j++)
        {
            if ((i & mask) > 0)
            {
                sum += data[j];
            }
            mask <<= 1;
        }

        if (CloseEnough(sum, desiredSum, threshold))
        {
            return true;
        }
    }

    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:52:05.117

```
public static bool SubListAddsTo(this IEnumerable<decimal> source,
  decimal target, decimal tolerance)
{
  decimal lowtarget = target - tolerance;
  decimal hightarget = target + tolerance;
  HashSet<decimal> sums = new HashSet<decimal>();
  sums.Add(0m);
  List<decimal> newSums = new List<decimal>();

  foreach(decimal item in source)
  {
    foreach(decimal oldSum in sums)
    {
      decimal sum = oldSum + item;
      if (sum < lowtarget)
      {
        newSums.Add(sum);//keep trying
      }
      else if (sum < hightarget)
      {
        return true;
      }
      //else { do nothing, discard }
    }
    foreach (decimal newSum in newSums)
    {
      sums.Add(newSum);
    }
    newSums.Clear();
  }
  return false;
} 
```

测试者：

```
List<decimal> list1 = new List<decimal>(){0.7m, 0.7m, 0.7m}; 
List<decimal> list2 = new List<decimal>(){0.7m, 0.3m, 0.7m};
List<decimal> list3= new List<decimal>(){0.777777m, 0.2m, 0.1m};
List<decimal> list4 = new List<decimal>() { 0.33333m, 0.33333m, 0.33333m };
List<decimal> list5 = new List<decimal>() { 0.4m, 0.5m, 0.6m, 0.3m };

Console.WriteLine(list1.SubListAddsTo(1m, 0.001m));  //false
Console.WriteLine(list2.SubListAddsTo(1m, 0.001m));  //true
Console.WriteLine(list3.SubListAddsTo(1m, 0.001m));  //false
Console.WriteLine(list4.SubListAddsTo(1m, 0.001m));  //true
Console.WriteLine(list5.SubListAddsTo(1m, 0.001m));  //true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T15:29:56.457

**编辑：**我的原始代码不允许近似值（0.9999 = 1）。

这使用变体数量的位图来掩盖源数组中的值，以强制所有变体。

在百万计数循环中对所有五个测试用例进行测试时，这比接受的答案快大约 7.5 倍（大约 41 秒对大约 5.5 秒）。它大约是 David B 的 sln 的两倍，比 Servy 的 sln 快约 15%。

```
 public static bool Test(decimal[] list, decimal epsilon)
    {
        var listLength = list.Length;
        var variations = (int)(Math.Pow(2, listLength) - 1);
        var bits = new bool[9];

        for (var variation = variations; variation > 0; variation--)
        {
            decimal sum = 0;

            bits[1] = (variation & 1) == 1;
            bits[2] = (variation & 2) == 2;
            bits[3] = (variation & 4) == 4;
            bits[4] = (variation & 8) == 8;
            bits[5] = (variation & 16) == 16;
            bits[6] = (variation & 32) == 32;
            bits[7] = (variation & 64) == 64;
            bits[8] = (variation & 128) == 128;

            for (var bit = listLength; bit > 0; bit--)
            {
                if (bits[bit])
                {
                    sum += list[bit - 1];
                }
            }

            if (Math.Abs(sum - 1) < epsilon)
            {
                return true;
            }
        }

        return false;
    } 
```

**编辑：**这个 NewTest 版本比上述版本快 30%，比公认的解决方案快十倍以上。它消除了构建用于提供位掩码的数组，以支持 Servy 的方法，这是大部分改进的来源。它还删除了带来边际改进的 Math.Abs​​ 调用。

```
 private const decimal Epislon = 0.001m;
    private const decimal Upper = 1 + Epislon;
    private const decimal Lower = 1 - Epislon;

    private static bool NewTest(decimal[] list)
    {
        var listLength = list.Length;
        var variations = (int)(Math.Pow(2, listLength) - 1);

        for (var variation = variations; variation > 0; variation--)
        {
            decimal sum = 0;
            int mask = 1;

            for (var bit = listLength; bit > 0; bit--)
            {
                if ((variation & mask) == mask)
                {
                    sum += list[bit - 1];
                }
                mask <<= 1;
            }

            if (sum > Lower && sum < Upper)
            {
                return true;
            }
        }

        return false;
    } 
```

# c - freopen 用于在定向到文件后将输出重定向回标准输出

> ID：11228263
> 
> 赞同：1
> 
> 时间：2012-06-27T14:15:53.510
> 
> 标签：c

我正在使用我的共享库将 freopen 用于 GUI 应用程序，这样我就可以将调试消息从标准输出重定向到文件

我一直在使用基于 C++ 参考站点中的片段的代码：

```
/* freopen example: redirecting stdout */
#include <stdio.h>

int main ()
{
  freopen ("myfile.txt","w",stdout);
  printf ("This sentence is redirected to a file.");
  fclose (stdout);
  return 0;
} 
```

这重定向`stdout`到`myfile.txt`并最终关闭`stdout`

有没有办法重定向到一个文件，然后有效地删除重定向，`stdout`然后像往常一样打印到屏幕而不是用 关闭它`fclose`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:40:56.240

不，不是纯C。如果你可以假设一个特定的系统（例如POSIX），可能有一些选项。

但坦率地说，`freopen`IMO 是不是一个 hack，只需要与预先编写的代码兼容。如果您正在编写新代码，则应该将 传递`FILE *`给相关函数并使用`fprintf`而不是`printf`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:10:31.380

我以前没有这样做过，但是尝试使用 dup 在 freopen 之前创建一个新的文件描述符，它是 stdout 的副本，然后使用 dup2 将该新描述符的属性复制回 stdout。

[http://linux.die.net/man/2/dup2](http://linux.die.net/man/2/dup2)

这是假设您的系统甚至有 dup。让我知道它是否有效！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-03T20:13:05.443

这会将标准输出返回到显示器（默认标准输出）：

```
freopen( "CON", "w", stdout ); 
```

取自这里：http: [//support.microsoft.com/kb/58667](http://support.microsoft.com/kb/58667)

# asp.net-mvc - RenderAction 与 RenderPartial 性能

> ID：11228272
> 
> 赞同：7
> 
> 时间：2012-06-27T14:16:15.113
> 
> 标签：asp.net-mvc, asp.net-mvc-3

根据 Brad Wilson 的说法，RenderAction*比*RenderPartial 慢。

但是，有没有人得到任何显示性能差异的统计数据？

我正在开发一个页面由“小部件”组成的应用程序。

我有两个选择：

**视图级别的合成**

为每个小部件调用 RenderAction。这是迄今为止最简单的方法，但确实意味着我们正在为每个小部件执行完整的 MVC 循环。

**控制器级别的组合**

为包含每个小部件所需数据的页面编写一个 ViewModel。为每个小部件调用 RenderPartial。这实现起来要复杂得多，但确实意味着我们只会创建一个 MVC 循环。

我在一个页面上使用 3 个不同的小部件测试了上述方法，渲染时间的差异为 10 分之一秒（几乎不值得担心）。

但是，有没有人得到比这更具体的测试结果，或者可能有尝试两种方法的经验？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T15:00:49.997

我最近处理了一个遇到性能问题的应用程序，并发现一个视图正在对 RenderAction 进行四次调用，另外还有一个在布局中。我发现每次调用 RenderAction——即使我添加了一个返回空视图的虚拟操作——也需要大约 200-300 毫秒（在我的本地机器上）。乘以调用次数，您会在页面上获得巨大的性能影响。在我的例子中，有四个调用导致大约一秒钟的不必要的服务器端开销。相比之下，对 RenderPartial 的调用大约为 0-10 毫秒。

我会尽可能避免使用 RenderAction 来支持 RenderPartial。控制器应负责返回所有必要的信息。在小部件的情况下，如果您需要多个小部件的多个操作，我会尝试将它们组合成一个操作，这样 RenderAction 开销只会发生一次，但如果您的站点运行良好，我会将它们分开以实现更简洁的设计。

**编辑：**我使用 MiniProfiler 收集了这些信息并点击了该站点。它不是超级准确，但它确实清楚地显示了差异。

**编辑：**正如奥斯卡在下面指出的那样，有问题的应用程序可能有一些密集的代码，为 global.asax 中的每个请求运行。此命中的大小取决于应用程序代码，但 RenderPartial 将完全避免执行另一个 MVC 循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T15:01:42.930

我建议另外 2 个选项，都需要在控制器级别组合视图模型，并且两者都可以一起工作（取决于数据）

1.  Html.DisplayFor() - 显示模板
2.  通过扩展方法的助手

如果您想将这些小部件保存在不同的程序集中，选项 2 效果很好，毕竟它们只是返回字符串的函数。我认为它也有最好的性能，但当然你失去了“设计师友好”的模板。我认为考虑可维护性方面很重要，而不仅仅是原始性能（直到您真正需要它，即使那样，缓存也更有帮助）。

对于小东西（日期或名称格式等）我会使用助手，因为 html 通常是一个带有类的跨度，对于更复杂的东西我会使用显示模板。

# c# - 用于 Web UI 控件的 Asp.net 通用数据绑定方法

> ID：11228273
> 
> 赞同：3
> 
> 时间：2012-06-27T14:16:19.663
> 
> 标签：c#, asp.net, data-binding

我正在尝试编写一个通用方法来绑定任何 asp.net UI 控件（下拉列表、列表框等）。这是我设想的方法应该是什么样的：

```
public static void  AnyUIObjectDataBinder(Object anyUIcontrol, int id, string dataTextField, string dataValueField)
{
    anyUIcontrol.DataSource = GetList(id);
    anyUIcontrol.DataTextField = dataTextField;
    anyUIcontrol.DataValueField = dataValueField;
    anyUIcontrol.DataBind();
} 
```

我很想知道是否有可能有这样的方法接受任何 asp.net UI 控件并设置其绑定属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T14:28:51.393

尝试作为

```
public static void  AnyUIObjectDataBinder(ListControl anyUIcontrol, int id, string dataTextField, string dataValueField)
{
    anyUIcontrol.DataSource = GetList(id);
    anyUIcontrol.DataTextField = dataTextField;
    anyUIcontrol.DataValueField = dataValueField;
    anyUIcontrol.DataBind();
} 
```

# mysql - MySql 延迟/丢弃 UPDATE/INSERT/DELETE 语句

> ID：11228275
> 
> 赞同：0
> 
> 时间：2012-06-27T14:16:21.200
> 
> 标签：mysql, jpa, eclipselink

我使用 MySQL 5.5 作为 Web 应用程序的基于 EclipseLink 的持久性后端的数据库。Web 应用程序是在 Java 7 上使用 Wicket 1.5 构建的。测试环境在 Jetty 7/Mac OSX Lion 上运行，生产环境在 Tomcat 6/Red Hat Enterprise 6.1 上运行。

这就是发生的情况：在 web 应用程序上，一个轻量级的 cms，在执行了许多写操作之后，写操作开始被延迟或丢弃。阅读查询日志显示，不知何故，这些操作不会立即执行（即使我在代码中明确执行所有事务提交），但稍后，由另一个写入操作触发，突然执行较旧的写入操作（在单个交易）。请注意，它们不一定按顺序执行（可能是线程问题？）。

该错误在生产环境中比在测试环境中发生得更早，但最终两者都发生。它仅在我使用 MySql 数据库时发生，而不是在我用于单元测试代码的内存 H2 数据库中发生。我开始认为这是 Tomcat 以某种方式缓存表单提交的问题，但由于在 Jetty 测试环境中，我可以重现我专注于 MySQL 的问题。

现在我绝不是 MySQL 专家，但我尝试了一些对 query_cache 系统变量的摆弄，但无济于事。我也希望也许设置 flush=on 会有所帮助，但它没有。

我基于上述的问题是，如果这确实是 MySQL 问题，还是我必须检查其他地方？如果是这样，任何人都可以指出出了什么问题吗？也许这是一个相当广泛的问题，但如果它的任何部分对某人敲响了警钟，那真的很有帮助。

提前致谢。

**编辑：**

我包含了 EclipseLink 日志的一部分。如我所见，Thread ...-20,5 使用 UoW ...7099 进行所有工作。然后由于某种原因它切换到线程…-17,5。该线程请求新的 UoW …1848。到目前为止一切顺利，但在这段摘录的最后，EL 实际上将持久化操作分配给 ...7099，同时提交 ...1848。请注意，我没有在我的代码中明确请求 UoW，我只使用 EntityManager。在日志下方，您还可以找到 persistence.xml。

**EclipseLink 日志**

```
 [EL Finest]: 2012-07-10 14:52:16.113--UnitOfWork(1257127099)--Thread(Thread[qtp1629549850-20,5,main])--persist() operation called on: NewsItem(id=0, header=7, content=7, timeStamp=2012-07-10T14:52:16.113+02:00).
[EL Finest]: 2012-07-10 14:52:16.114--UnitOfWork(1257127099)--Thread(Thread[qtp1629549850-20,5,main])--assign sequence to the object (258 -> NewsItem(id=0, header=7, content=7, timeStamp=2012-07-10T14:52:16.113+02:00))
[EL Finer]: 2012-07-10 14:52:16.114--UnitOfWork(1257127099)--Thread(Thread[qtp1629549850-20,5,main])--begin unit of work commit
[EL Finest]: 2012-07-10 14:52:16.115--UnitOfWork(1257127099)--Thread(Thread[qtp1629549850-20,5,main])--Execute query InsertObjectQuery(NewsItem(id=258, header=7, content=7, timeStamp=2012-07-10T14:52:16.113+02:00))
[EL Finest]: 2012-07-10 14:52:16.115--ServerSession(1463061321)--Connection(1934751546)--Thread(Thread[qtp1629549850-20,5,main])--Connection acquired from connection pool [default].
[EL Finer]: 2012-07-10 14:52:16.116--ClientSession(1223119569)--Connection(1934751546)--Thread(Thread[qtp1629549850-20,5,main])--begin transaction
[EL Fine]: 2012-07-10 14:52:16.116--ClientSession(1223119569)--Connection(1934751546)--Thread(Thread[qtp1629549850-20,5,main])--INSERT INTO NEWSITEM (ID, CONTENT, HEADER, TIMESTAMP) VALUES (?, ?, ?, ?)
    bind => [258, 7, 7, 10 juli 2012 14:52]
[EL Finer]: 2012-07-10 14:52:16.118--ClientSession(1223119569)--Connection(1934751546)--Thread(Thread[qtp1629549850-20,5,main])--commit transaction
[EL Finest]: 2012-07-10 14:52:16.118--ServerSession(1463061321)--Connection(1934751546)--Thread(Thread[qtp1629549850-20,5,main])--Connection released to connection pool [default].
[EL Finer]: 2012-07-10 14:52:16.119--UnitOfWork(1257127099)--Thread(Thread[qtp1629549850-20,5,main])--end unit of work commit
[EL Finer]: 2012-07-10 14:52:16.119--UnitOfWork(1257127099)--Thread(Thread[qtp1629549850-20,5,main])--resume unit of work
[EL Finest]: 2012-07-10 14:52:16.12--UnitOfWork(1257127099)--Thread(Thread[qtp1629549850-20,5,main])--Execute query ReportQuery(referenceClass=NewsItem sql="SELECT COUNT(ID) FROM NEWSITEM")
[EL Finest]: 2012-07-10 14:52:16.12--ServerSession(1463061321)--Connection(1934751546)--Thread(Thread[qtp1629549850-20,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2012-07-10 14:52:16.12--ServerSession(1463061321)--Connection(1934751546)--Thread(Thread[qtp1629549850-20,5,main])--SELECT COUNT(ID) FROM NEWSITEM
[EL Finest]: 2012-07-10 14:52:16.122--ServerSession(1463061321)--Connection(1934751546)--Thread(Thread[qtp1629549850-20,5,main])--Connection released to connection pool [default].
[EL Finest]: 2012-07-10 14:52:16.122--UnitOfWork(1257127099)--Thread(Thread[qtp1629549850-20,5,main])--Execute query ReadAllQuery(referenceClass=NewsItem sql="SELECT ID, CONTENT, HEADER, TIMESTAMP FROM NEWSITEM ORDER BY TIMESTAMP DESC")
[EL Finest]: 2012-07-10 14:52:16.122--ServerSession(1463061321)--Connection(1934751546)--Thread(Thread[qtp1629549850-20,5,main])--Connection acquired from connection pool [default].
[EL Fine]: 2012-07-10 14:52:16.122--ServerSession(1463061321)--Connection(1934751546)--Thread(Thread[qtp1629549850-20,5,main])--SELECT ID, CONTENT, HEADER, TIMESTAMP FROM NEWSITEM ORDER BY TIMESTAMP DESC
[EL Finest]: 2012-07-10 14:52:16.124--ServerSession(1463061321)--Connection(1934751546)--Thread(Thread[qtp1629549850-20,5,main])--Connection released to connection pool [default].
[EL Finer]: 2012-07-10 14:59:32.322--ServerSession(1463061321)--Thread(Thread[qtp1629549850-17,5,main])--client acquired: 1003847240
[EL Finer]: 2012-07-10 14:59:32.322--ClientSession(1003847240)--Thread(Thread[qtp1629549850-17,5,main])--acquire unit of work: 1029031848
[EL Finest]: 2012-07-10 14:59:32.322--UnitOfWork(1257127099)--Thread(Thread[qtp1629549850-17,5,main])--persist() operation called on: NewsItem(id=0, header=8, content=8, timeStamp=2012-07-10T14:59:32.322+02:00).
[EL Finest]: 2012-07-10 14:59:32.323--UnitOfWork(1257127099)--Thread(Thread[qtp1629549850-17,5,main])--assign sequence to the object (259 -> NewsItem(id=0, header=8, content=8, timeStamp=2012-07-10T14:59:32.322+02:00))
[EL Finer]: 2012-07-10 14:59:32.323--UnitOfWork(1029031848)--Thread(Thread[qtp1629549850-17,5,main])--begin unit of work commit
[EL Finer]: 2012-07-10 14:59:32.323--UnitOfWork(1029031848)--Thread(Thread[qtp1629549850-17,5,main])--end unit of work commit
[EL Finer]: 2012-07-10 14:59:32.323--UnitOfWork(1029031848)--Thread(Thread[qtp1629549850-17,5,main])--resume unit of work
[EL Finer]: 2012-07-10 14:59:32.324--UnitOfWork(1029031848)--Thread(Thread[qtp1629549850-17,5,main])--release unit of work 
```

**持久性.xml**

```
<persistence-unit name="mySqlJpaPu" transaction-type="RESOURCE_LOCAL">
  <properties>
    <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
    <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost/xxx" />
    <property name="javax.persistence.jdbc.user" value="xxx" />
    <property name="javax.persistence.jdbc.password" value="xxx" />
    <property name="eclipselink.ddl-generation" value="create-tables" />
    <property name="eclipselink.logging.level" value="ALL"/>
  </properties>
</persistence-unit> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:48:10.343

我严重怀疑这是 MySQL 数据库的问题。相反，我怀疑这是 EclipseLink 与事务管理器交互的问题。您没有提到您是否使用外部事务管理器（JTA 或 OTS）。

当`commit`调用 UnitOfWork 方法时，应该会导致将更改应用于数据库。这是真的，除非 UnitOfWork 是父 UnitOfWork 的子代。对于子 UnitOfWork，该`commit`方法不会将更改应用于数据库；相反，它会将任何更改传递给其父 UnitOfWork。

如果是我的代码，我会检查它以确认我没有处理嵌套的工作单元。我将验证对 acquireUnitOfWork 方法的调用是在会话对象上，而不是在另一个 UnitOfWork 对象上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:55:41.760

您如何获得 EntityManagers 并开始/提交交易？看起来您可能正在获取一个新的 EntityManager 并使用它来开始/提交事务，而不是您进行更改的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:56:40.727

在 EclipseLink 中启用日志记录并检查日志。事务在日志中显示是否正确，事务的写入部分是否符合您的预期？

您使用的是什么类型的连接池和事务控制？包括您的 persistence.xml。

您是如何创建 EntityManagers 的（我假设您使用的是 JPA？）。听起来您正在与不同的线程/请求共享同一个 EntityManager。每个线程/请求/事务都应该有自己的 EntityManager。

# mysql - 无论年份如何，在mysql中选择两个日期之间的数据

> ID：11228276
> 
> 赞同：1
> 
> 时间：2012-06-27T14:16:26.850
> 
> 标签：mysql, date

无论年份如何，我都需要选择两个给定日期（例如 11 月 10 日和 1 月 25 日）之间的所有条目。

如果只是 1 月 25 日和 11 月 10 日，那就容易多了。但是我将如何构建查询以查找 11 月 10 日和 1 月 25 日之间的所有数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T14:25:34.670

您可以使用 MySQL 的[`DAYOFYEAR()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_dayofyear)功能：

```
DAYOFYEAR(field) BETWEEN DAYOFYEAR(A) AND DAYOFYEAR(B) 
```

如果`DAYOFYEAR(A)>DAYOFYEAR(B)`那么您的应用程序需要替换`BETWEEN`为`NOT BETWEEN`或交换参数的顺序。如果您需要在 SQL 中执行此操作：

```
DAYOFYEAR(field) BETWEEN
   LEAST(DAYOFYEAR(A), DAYOFYEAR(B)) AND GREATEST(DAYOFYEAR(A), DAYOFYEAR(B)) 
```

请注意闰年，因为该[`DAYOFYEAR()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_dayofyear)功能会考虑到闰年

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:40:11.050

如果您有确切的字符串“11 Nov”和“25 Jan”，则不使用任何会话变量等：

```
SELECT * FROM t1 
    WHERE c1 BETWEEN 
      DATE(REPLACE(STR_TO_DATE('11 Nov','%d %b'),'0000',YEAR(NOW()))) AND 
      IF( DATE(REPLACE(STR_TO_DATE('25 Jan','%d %b'),'0000',YEAR(NOW())))
          < DATE(REPLACE(STR_TO_DATE('11 Nov','%d %b'),'0000',YEAR(NOW()))),
          DATE(REPLACE(STR_TO_DATE('25 Jan','%d %b'),'0000',YEAR(NOW())+1)),
          DATE(REPLACE(STR_TO_DATE('25 Jan','%d %b'),'0000',YEAR(NOW())))); 
```

以上是经过测试的，很疯狂。

# javascript - 使用javascript打印txt文件

> ID：11228280
> 
> 赞同：4
> 
> 时间：2012-06-27T14:16:33.033
> 
> 标签：javascript, file, printing

我想知道是否可以使用 javascript 打印位于服务器中的 txt 文件。我注意到 window.print() 只是打开当前网页的打印对话框

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T14:37:45.570

您只能为用户打开打印对话框，这是应该的。如果您只想打印文本文档，有几种方法可以触发它的打印对话框。它们需要遵循同源[策略](http://en.wikipedia.org/wiki/Same_origin_policy)（您的 HTML 和 TXT 文件需要在同一个域中）。

最简单的方法是使用文本文件打开一个弹出窗口，并在返回的窗口句柄上调用 print：

```
w = window.open('text.txt');
w.print(); 
```

如果您希望用户预览文本文件，您可以使用 iframe 代替：
[我建议将 JS 排除在 HTML 之外，这只是举例]

```
<iframe id="textfile" src="text.txt"></iframe>
<button onclick="print()">Print</button>
<script type="text/javascript">
function print() {
    var iframe = document.getElementById('textfile');
    iframe.contentWindow.print();
}
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T14:45:13.840

JQuery 选项

```
<body>

    <div id="txtdiv"></div>

    <script type="text/javascript">
      $('#txtdiv').load('trial.txt', function()
      {
        window.print(); //prints when text is loaded
      });

    </script>
 </body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-08T11:02:38.060

如果您只是不想删除页面的内容并从文件中打印一些文本，您可以在此处执行此操作：

```
<body>

....some tags....

<script type="text/javascript">
// or onclick function
$.load('test.txt', function( printContent ){
    history.pushState( printContent, 'Print title', '/print_page' );
    document.write( printContent );
    if( window.print() ){
         document.location = '/back_page/';
         // or history.go(-1);
    } else {
         document.location = '/history/';
    }
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T14:24:55.690

您是正确的，`window.print()`只是打开了当前网页的打印对话框。

我建议您编写 JavaScript 代码来打开一个新窗口，将文本加载到该窗口中，然后`print()`在该窗口上调用该函数。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-27T14:23:25.547

您可以通过创建 Web 服务来做到这一点。

1.  创建一个 Web 服务，并在 Web 服务中进行打印。

2.  从 JavaScript 调用 Web 服务。

如果您想知道如何使用 web 服务进行打印[，stackoverflow 中有一个线程](https://stackoverflow.com/questions/174/how-do-i-print-an-html-document-from-a-web-service)可能会有所帮助。不要只看问题，也要浏览答案。

# jquery - jQuery 手风琴菜单和自动高度

> ID：11228283
> 
> 赞同：0
> 
> 时间：2012-06-27T14:16:39.523
> 
> 标签：jquery, accordion, jquery-ui-accordion

我有 jQuery 手风琴菜单。具有以下内容：

[http://jsfiddle.net/eXKEB/](http://jsfiddle.net/eXKEB/)

一切正常，没有问题。但是我的清单太长了。所以，我想在单击时`caption`获取具有自动高度的内容。

所以，我想在我的 js 代码中使用自动高度选项。谢谢。

# c# - ASP.net 中 Razor 输出电子邮件的语法

> ID：11228289
> 
> 赞同：3
> 
> 时间：2012-06-27T14:17:08.610
> 
> 标签：c#, razor

让我们说 `{ string domain="domain.com"; }`

我喜欢输出

`webmaster@domain.com`，所以我用

`webmaster@@domain`不工作

请建议正确的语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:40:42.060

也许不是最简单的方法，但我会尝试

```
@Html.Raw(string.Format("webmaster@{0}", domain)) 
```

正如OP（聪明地）注意到的那样

```
@string.Format("webmaster@{0}", domain) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:02:42.650

我能想到的最简单的方法：

```
webmaster@@@domain 
```

-或者-

```
@("webmaster@" + domain) 
```

# asp.net - 上传 Excel 文件并从中提取数据，并使用 MVC asp.net 将该数据放入数据库

> ID：11228292
> 
> 赞同：0
> 
> 时间：2012-06-27T14:17:14.030
> 
> 标签：asp.net, asp.net-mvc, entity-framework, linq-to-sql, c#-4.0

我想在服务器的某个文件夹中使用（HTML.Input）上传一个 Excel 文件，并且还想从中提取数据并将该数据放入数据库中。那么 MVC Asp.net 中是否有任何智能方法可以上传和提取数据，然后将数据放入数据库中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:21:25.700

没有这种聪明的方法。你不得不：

1.  [上传文件](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)。
2.  使用现有的 ODBC 机制连接到 Excel。找出[excel 的连接字符串](http://www.connectionstrings.com/excel-2007)。
3.  并进行相应的处理。

# bash - 试图编写一个脚本来自动杀死一个程序（mac/unix - kill tomcat）

> ID：11228295
> 
> 赞同：3
> 
> 时间：2012-06-27T14:17:19.887
> 
> 标签：bash, shell, unix

手动，这里是过程：

```
ps -ef | grep tomcat 
```

结果如下：

`0 39107 1 0 5:40PM ttys004 5:22.34 /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home/bin/java -Djava.util.logging.config.file=/opt/local/tomcat7/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -server -Xms384m -Xmx768m -XX:NewSize=256m -XX:NewRatio=2 -XX:PermSize=128m -XX:MaxPermSize=384m -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+CMSIncrementalMode -XX:+CMSIncrementalPacing -XX:+CMSClassUnloadingEnabled -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djava.endorsed.dirs=/opt/local/tomcat7/endorsed -classpath /opt/local/tomcat7/bin/bootstrap.jar:/opt/local/tomcat7/bin/tomcat-juli.jar -Dcatalina.base=/opt/local/tomcat7 -Dcatalina.home=/opt/local/tomcat7 -Djava.io.tmpdir=/opt/local/tomcat7/temp org.apache.catalina.startup.Bootstrap start`

第二个数字是 pid。

然后我做

```
sudo kill tomcat_pid 
```

我怎样才能自动化呢？

附言。我知道有一个shutdown.sh 脚本。我试过了，但它从来没有用过。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T14:57:57.073

`ps -ef | grep tomcat | awk '{ print $2 }' | xargs kill`将提取第二个数字并将其传递给`kill`. 实际上，您可能希望`ps -efww`确保获得整个命令行。

这确实不是最好的方法。理想情况下，您应该在创建稍后要杀死的进程时存储 PID，以确保您不会杀死意外发生的与您正在搜索的字符串匹配的东西（以及其他潜在问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T05:03:48.767

这是使用 bash 脚本杀死所有正在运行的 tomcat 进程的脚本

```
 #!/bin/sh
  ARG=$1 
  for file in `find /proc -regex /proc/[0-9]+ 2> /dev/null`; do
     if `grep --silent org.apache.catalina.startup.Bootstrap $file/cmdline 2> /dev/null`; then 
          base=`basename $file`
          echo "Trying to " kill $ARG $base "tomcat process"
          kill $ARG $base
     fi  
  done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T00:22:13.013

this is my script for Ubuntu Linux uses bash its not automatic but finding and killing tomcat comes to
pressing enter if you do want to kill a process and typing process number manually.

```
#/bin/bash
if [ `whoami` != root ]; then
    echo "Please run this script as root or using sudo"
    exit
fi
echo
echo "finding proceses that have name java and established connections status"
echo
echo "Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name"
netstat --tcp --numeric --programs  | grep "ESTABLISHED" | grep "java"
echo 
echo "finding proceses that use port 8080"
echo
netstat --tcp --numeric --programs | grep ":8080" 
echo -n "Do you wish to kill a process listed above?[Y/n]"
read choose
if [ "$choose" = "Y" ] || [ "$choose" = "y" ] || [ -z "$choose" ]
then 
echo "enter pid to kill"
read procesId
kill -9 $procesId
fi
echo "done exiting"
exit 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-06T21:47:31.310

尝试：

`pkill -f catalina; sleep 3`

**pkill：**根据名称和其他查找或发送信号进程。
**sleep 3**：等待 3 秒，在尝试立即启动 tomcat 时很有用。

# javascript - 将纯 JavaScript 和 jQuery 结合在一起

> ID：11228298
> 
> 赞同：2
> 
> 时间：2012-06-27T14:17:30.157
> 
> 标签：javascript, jquery

我有一个小问题。我有一个带有左栏和右栏的页面布局。我想让列相等，所以我一直在使用一些 javascript 来很好地使它们相等。但是在右栏中，我有一个 div，我想在加载时隐藏它，并在按下时切换。我正在使用 jquery 来实现这一点并取得良好的效果。问题是第一个 javscript 正在修复两列的高度，如果我固定的高度不那么深，那么当用户切换到查看内容时，内容会浮在两列的底线上方。希望这是有道理的。

我在想，如果我将所有内容都转换为 jquery，我可能有机会在隐藏之前传递右容器的高度大小，然后如果它太小，则添加右列的高度，然后将两列拉平.

这很难解释，但希望有人能理解我想要实现的目标。

```
 <script type="text/javascript">
    $(document).ready(function () {
        var contact_height = $("#ContentBlock").height();

        $("#ContentBlock").hide();

        $(".contact-us").click(function () {

            if ($('#ContentBlock').is(":hidden")) {
                $('#arrowopenclose').removeClass("panelCollapsed");
                $('#arrowopenclose').addClass("panelExpanded");
            } else {
                $('#arrowopenclose').removeClass("panelExpanded");
                $('#arrowopenclose').addClass("panelCollapsed");
            }

            $("#ContentBlock").slideToggle('fast');
            return false;
        });

    })
</script>

<script type="text/javascript">
function fixHeight(one, two) {
    if (document.getElementById(one)) {
        var lh = document.getElementById(one).offsetHeight + 15;

        //figure out how tall rh is and add contact_height + 15 if the space is smaller then contact_height
        var rh = document.getElementById(two).offsetHeight;
        var nh = Math.max(lh, rh);
        document.getElementById(one).style.height = nh + "px";
        document.getElementById(two).style.height = nh + "px";
    }
}

window.onload = function () {
    fixHeight('rightcolumn', 'content-container');
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:22:25.893

首先，jQuery 是一个 JavaScript 代码库。所以 jQuery 代码就是 JavaScript 代码。

如果我正确理解了您的问题，那么您是说您用 JavaScript（不使用 jQuery）编写了一些代码来对齐两列。你调用函数`fixHeight`。

您还有一些用户可以单击的东西，它会导致执行匿名函数，该函数会展开和折叠屏幕上的面板。但是，当该函数执行时，两列不再像`fixHeight`.

我向您建议，解决方案可能是`fixHeight`从您的匿名函数中调用，如下所示：

```
 $(".contact-us").click(function () {

        if ($('#ContentBlock').is(":hidden")) {
            $('#arrowopenclose').removeClass("panelCollapsed");
            $('#arrowopenclose').addClass("panelExpanded");
        } else {
            $('#arrowopenclose').removeClass("panelExpanded");
            $('#arrowopenclose').addClass("panelCollapsed");
        }

        $("#ContentBlock").slideToggle('fast');

        fixHeight(one, two);

        return false;
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:43:27.490

我接受了 Rodolfo 的建议，并使用纯 css 重新创建了大小相等的列。感谢所有回复。

# ruby - ruby 的文档/xquery 示例

> ID：11228299
> 
> 赞同：1
> 
> 时间：2012-06-27T14:17:31.067
> 
> 标签：ruby

我想在 Ruby 中使用 xquery 解析一个 xml 文件，我找到了这个 lib [ruby​​-xquery](http://rubygems.org/gems/ruby-xquery)。但它没有很好的记录。谁能告诉我一些如何使用 API 的例子？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:21:34.227

Zorba XQuery 处理器还有一个 ruby​​ 绑定：[http ://www.zorba-xquery.com/html/documentation/2.5.0/ruby/ruby_test_8rb-example](http://www.zorba-xquery.com/html/documentation/2.5.0/ruby/ruby_test_8rb-example)

例如，[http](http://www.zorba-xquery.com/html/demo) ://www.zorba-xquery.com/html/demo 上的应用程序由 ruby​​ on rails 提供支持。源代码位于[https://code.launchpad.net/~zorba-coders/zorba/web-try.zorba-xquery.com](https://code.launchpad.net/~zorba-coders/zorba/web-try.zorba-xquery.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:22:39.733

似乎没有维护 xquery，我建议查看 Nokogiri 以解析和使用 xml。它易于使用，有很多示例，并且记录得非常好。

```
http://nokogiri.org/

http://nokogiri.org/tutorials 
```

甚至还有关于使用 nokogiri 的 Railscast :)

```
http://railscasts.com/episodes/190-screen-scraping-with-nokogiri/ 
```

# django - 在 Django 中使用 FTP 而不是 HTTP 进行文件传输

> ID：11228301
> 
> 赞同：0
> 
> 时间：2012-06-27T14:17:48.393
> 
> 标签：django, ftp, filefield, django-file-upload

有没有什么方法可以使用 FileField 在 Django 中传输大文件..因为每次我使用简单的上传处理程序时，由于产生巨大的流量而发生连接超时错误。我正在考虑使用 FTP，但不知道如何实现。有什么建议么？？？

上传处理程序方法如下所示：

```
 def handle_uploaded_file(file_abs_path,f):
         destination = open(file_abs_path, 'wb+')
         for chunk in f.chunks():
              destination.write(chunk)
         destination.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:39:36.317

[django-storages](http://django-storages.readthedocs.org/en/latest/index.html)包括一个 FTP 和 SFTP 存储后端。绝对值得一看，但也要寻找任何相关的未解决问题。

# c - 尝试解析 xml 文件时出现分段错误

> ID：11228304
> 
> 赞同：0
> 
> 时间：2012-06-27T14:17:55.147
> 
> 标签：c, xml, libxml2

我是 C 编程的新手。我想创建可以使用 libxml2 读取 XML 文件的 C 程序。我测试了这段代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <libxml/xmlmemory.h>
#include <libxml/parser.h>

// Declare functions
void parseSystemProperties(char *xmlFileName);
void parseSystemModules(xmlDocPtr doc, xmlNodePtr cur);
void parseSystemConfiguration(xmlDocPtr doc, xmlNodePtr cur);
void parseProfiles(xmlDocPtr doc, xmlNodePtr cur);
void parseMonitoringPort(xmlDocPtr doc, xmlNodePtr cur);
void parseWebServicePort(xmlDocPtr doc, xmlNodePtr cur);
void parseBindingInterfaces(xmlDocPtr doc, xmlNodePtr cur);
void parseExtensions(xmlDocPtr doc, xmlNodePtr cur);

int main(int argc, char **argv) {
    char *xmlFileName;

    if (argc <= 1) {
        printf("Usage: %s inputfile.xml\n", argv[0]);
        return (0);
    }

    // Get the file name from the argv[1]
    xmlFileName = argv[1];

    // Custom function to parse XML file
    parseSystemProperties(xmlFileName);

    return (1);
}

// Parsing the XML file and Reading the Element Nodes

void parseSystemProperties(char *xmlFileName) {
    xmlDocPtr doc; // pointer to parse xml Document
    xmlNodePtr cur; // node pointer. It interacts with individual node

    // Parse XML file
    doc = xmlParseFile(xmlFileName);

    // Check to see that the document was successfully parsed.
    if (doc == NULL) {
        fprintf(stderr, "Error!. Document is not parsed successfully. \n");
        return;
    }

    // Retrieve the document's root element - system-properties
    cur = xmlDocGetRootElement(doc);

    // Check to make sure the document actually contains something
    if (cur == NULL) {
        fprintf(stderr, "Document is Empty\n");
        xmlFreeDoc(doc);
        return;
    }

    /* We need to make sure the document is the right type.
     * "system-properties" is the root type of the documents used in user Config XML file
     */
    if (xmlStrcmp(cur->name, (const xmlChar *) "system-properties")) {
        fprintf(stderr, "Cannot find system-properties");
        xmlFreeDoc(doc);
        return;
    }

    /* Get the first child node of cur.
     * At this point, cur points at the document root,
     * which is the element "root"
     */

    cur = cur->xmlChildrenNode;

    // This loop iterates through the elements that are children of "root"
    while (cur != NULL) {
        if ((!xmlStrcmp(cur->name, (const xmlChar *) "system-modules"))) {
            parseSystemModules(doc, cur);
        }
        cur = cur->next;
    }

    cur = cur->xmlChildrenNode;

    // This loop iterates through the elements that are children of "root"
    while (cur != NULL) {
        if ((!xmlStrcmp(cur->name, (const xmlChar *) "system-configuration"))) {
            parseSystemConfiguration(doc, cur);
        }
        cur = cur->next;
    }

    /* Save XML document to the Disk
     * Otherwise, you changes will not be reflected to the file.
     * Currently it's only in the memory
     */
    // xmlSaveFormatFile (xmlFileName, doc, 1);

    /* free the document */
    xmlFreeDoc(doc);

    /*
     * Free the global variables that may
     * have been allocated by the parser.
     */
    xmlCleanupParser();

    return;

} // end of function

// Get Modules part
// -------------------------------------------

void parseSystemModules(xmlDocPtr doc, xmlNodePtr cur) {
    xmlChar *key;
    xmlAttrPtr attr;

    // Get the sub Element Node of system-configuration node
    cur = cur->xmlChildrenNode;

    // This loop iterates through the elements that are children of system-configuration
    while (cur != NULL) {
        if ((!xmlStrcmp(cur->name, (const xmlChar *) "extensions"))) {
            parseExtensions(doc, cur);
        }
        cur = cur->next;
    }

    return;

} // end of function()

void parseExtensions(xmlDocPtr doc, xmlNodePtr cur) {
    xmlChar *key;
    xmlAttrPtr attr;

    // Get the sub Element Node of Profiles node
    cur = cur->xmlChildrenNode;

    // This loop iterates through the elements that are children of Profiles
    while (cur != NULL) {
        if ((!xmlStrcmp(cur->name, (const xmlChar *) "extension"))) {
            key = xmlGetProp(cur, (const xmlChar*) "module");
            fprintf(stderr, "module: %s\n", key);
            xmlFree(key);
        }
        cur = cur->next;
    }

    return;

} // end of function()

// Get Configuration part
// -------------------------------------------

void parseSystemConfiguration(xmlDocPtr doc, xmlNodePtr cur) {
    xmlChar *key;
    xmlAttrPtr attr;

    // Get the sub Element Node of system-configuration node
    cur = cur->xmlChildrenNode;

    // This loop iterates through the elements that are children of system-configuration
    while (cur != NULL) {
        if ((!xmlStrcmp(cur->name, (const xmlChar *) "profiles"))) {
            parseProfiles(doc, cur);
        }
        cur = cur->next;
    }

    return;

} // end of function()

void parseProfiles(xmlDocPtr doc, xmlNodePtr cur) {
    xmlChar *key;
    xmlAttrPtr attr;

    // Get the sub Element Node of Profiles node
    cur = cur->xmlChildrenNode;

    // This loop iterates through the elements that are children of Profiles
    while (cur != NULL) {
        if ((!xmlStrcmp(cur->name, (const xmlChar *) "profile"))) {
            // Get monitoring-port
            parseMonitoringPort(doc, cur);
            // Get web-service-port
            parseWebServicePort(doc, cur);
            parseBindingInterfaces(doc, cur);
        }
        cur = cur->next;
    }

    return;

} // end of function()

// Monitoring Port

void parseMonitoringPort(xmlDocPtr doc, xmlNodePtr cur) {
    xmlChar *key;
    xmlAttrPtr attr;

    // Get the sub Element Node of Profile node
    cur = cur->xmlChildrenNode;

    // This loop iterates through the elements that are children of Profile
    while (cur != NULL) {
        if ((!xmlStrcmp(cur->name, (const xmlChar *) "monitoring-port"))) {
            key = xmlGetProp(cur, (const xmlChar*) "port");
            fprintf(stderr, "monitoring-port: %s\n", key);
            xmlFree(key);
        }
        cur = cur->next;
    }

    return;

} // end of function()

// web service port

void parseWebServicePort(xmlDocPtr doc, xmlNodePtr cur) {
    xmlChar *key;
    xmlAttrPtr attr;

    // Get the sub Element Node of Profile node
    cur = cur->xmlChildrenNode;

    // This loop iterates through the elements that are children of "root"
    while (cur != NULL) {
        if ((!xmlStrcmp(cur->name, (const xmlChar *) "web-service-port"))) {
            //parseMonitoringPort (doc, cur);
            key = xmlGetProp(cur, (const xmlChar*) "port");
            fprintf(stderr, "web-service-port: %s\n", key);
            xmlFree(key);
        }
        cur = cur->next;
    }

    return;

} // end of function()

// binding interface

void parseBindingInterfaces(xmlDocPtr doc, xmlNodePtr cur) {
    xmlChar *key;
    xmlAttrPtr attr;

    // Get the sub Element Node of Profile node
    cur = cur->xmlChildrenNode;

    // This loop iterates through the elements that are children of "root"
    while (cur != NULL) {
        if ((!xmlStrcmp(cur->name, (const xmlChar *) "socket-binding"))) {
            //parseMonitoringPort (doc, cur);
            key = xmlGetProp(cur, (const xmlChar*) "interface");
            fprintf(stderr, "interface: %s\n", key);
            xmlFree(key);
        }
        cur = cur->next;
    }

    return;

} // end of function() 
```

这是我要阅读的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<system-properties version="1.0">
    <system-modules>
        <extensions>
            <extension module="NetworkModule"/>
            <extension module="MonitoringModule"/>
            <extension module="OracleModule"/>
            <extension module="DataFilterModule"/>          
        </extensions>   
    </system-modules>
    <system-configuration>
        <profiles>
            <profile name="default">
                <monitoring-port port="6051"/>
                <web-service-port port="7050"/>
                <socket-binding interface="management" ipaddress="192.168.1.101" port="6050"/>
                <socket-binding interface="monitoring" ipaddress="192.168.1.106" port="7050"/>
                <network-pool threads="40"/>                    
            </profile>
        </profiles>
    </system-configuration>
</system-properties> 
```

不幸的是，当我运行示例时出现此错误：

```
[rcbandit@Laptop Ctest]$ ./test xmlfile.xml
module: NetworkModule
module: MonitoringModule
module: OracleModule
module: DataFilterModule
Segmentation fault (core dumped)
[user@Laptop Ctest]$ 
```

当我删除此行时，代码有效：

```
cur = cur->xmlChildrenNode;

    // This loop iterates through the elements that are children of "root"
    while (cur != NULL) {
        if ((!xmlStrcmp(cur->name, (const xmlChar *) "system-modules"))) {
            parseSystemModules(doc, cur);
        }
        cur = cur->next;
    } 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:28:52.953

尝试：

```
cur = (cur) ? cur->xmlChildrenNode : NULL; 
```

您还可以将其添加到循环逻辑中：

```
for(cur = (cur) ? cur->xmlChildrenNode: NULL; cur; cur = cur->next) {
// This loop iterates through the elements that are children of "root"  
    if ((!xmlStrcmp(cur->name, (const xmlChar *) "system-modules"))) {
        parseSystemModules(doc, cur);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:35:49.907

问题在这里：

```
// This loop iterates through the elements that are children of "root"
while (cur != NULL) {
    if ((!xmlStrcmp(cur->name, (const xmlChar *) "system-modules"))) {
        parseSystemModules(doc, cur);
    }
    cur = cur->next;
}

cur = cur->xmlChildrenNode; 
```

`while` 退出时`cur`是`NULL`& 取消引用它的下一条语句，即。`cur = cur->xmlChildrenNode;`因此在`cur->xmlChildrenNode`.
也许您可以尝试在单循环中进行比较，可能在这些行上：

```
while (cur != NULL) {
    if ((!xmlStrcmp(cur->name, (const xmlChar *) "system-modules"))) {
        parseSystemModules(doc, cur);
    }
    else if ((!xmlStrcmp(cur->name, (const xmlChar *) "system-configuration"))) {
        parseSystemConfiguration(doc, cur);
    }
    cur = cur->next;
} 
```

希望这可以帮助！

# r - 写入数据不保留编码

> ID：11228307
> 
> 赞同：13
> 
> 时间：2012-06-27T14:18:07.160
> 
> 标签：r, encoding, character-encoding

我有一个如下字符串：

```
str <- "ていただけるなら"
Encoding(str) #returns "UTF-8" 
```

我将其写入磁盘：

```
write.table(str, file="chartest", quote=F, col.names=F, row.names=F) 
```

现在我查看 Notepadd++ 中的文件，该文件设置为 UTF-8，没有 BOM 编码，我得到了这个：

```
<U+3066><U+3044><U+305F><U+3060><U+3051><U+308B><U+306A><U+3089> 
```

在这个过程中出了什么问题？我希望书面文本文件显示 R 中出现的字符串。

这是在 Windows 7，R 版本 2.15 上

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-28T15:16:11.330

这是 Windows 中 R 的一个烦人的“功能”。到目前为止，我发现的唯一解决方案是以编程方式临时将您的语言环境切换到解码相关文本脚本所需的适当语言环境。因此，在上述情况下，您将使用日语语言环境。

```
## This won't work on Windows
str <- "ていただけるなら"
Encoding(str) #returns "UTF-8"
write.table(str, file="c:/chartest.txt", quote=F, col.names=F, row.names=F)
## The following should work on Windows - first grab and save your existing locale
print(Sys.getlocale(category = "LC_CTYPE"))
original_ctype <- Sys.getlocale(category = "LC_CTYPE")
## Switch to the appropriate local for the script
Sys.setlocale("LC_CTYPE","japanese")
## Now you can write your text out and have it look as you would expect
write.table(str, "c:/chartest2.txt", quote = FALSE, col.names = FALSE, 
            row.names = FALSE, sep = "\t", fileEncoding = "UTF-8")
## ...and don't forget to switch back
Sys.setlocale("LC_CTYPE", original_ctype) 
```

以上生成了您可以在此屏幕截图中看到的两个文件。第一个文件显示了 Unicode 代码点，这不是您想要的，而第二个文件显示了您通常期望的字形。

![日语文本](../Images/088899a8a4e0ddd8ab2c10a1ed0e38fc.png)

到目前为止，没有人能够向我解释为什么会在 R 中发生这种情况。这不是 Windows 的一个不可避免的特性，因为正如我在[这篇](https://stackoverflow.com/questions/11069908/r-extracting-clean-utf-8-text-from-a-web-page-scraped-with-rcurl)文章中提到的，Perl 以某种方式解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:22:48.707

您是否尝试过使用参数`fileEncoding`？

```
write.table(str, file="chartest", quote=F, col.names=F, row.names=F, fileEncoding="UTF-8") 
```

# javascript - 使用 JqPlot 更改圆环图的主题

> ID：11228308
> 
> 赞同：1
> 
> 时间：2012-06-27T14:18:10.620
> 
> 标签：javascript, jquery, jqplot

我的问题的主要目标是在 Donut Change 上添加特定的颜色。我用谷歌搜索了一段时间，我认为 JqPlot 是最好的库，但我在尝试更改 JqPlot 上的甜甜圈图主题时遇到了问题：

我在这里找到了文档：

[http://www.jqplot.com/deploy/dist/examples/theming.html](http://www.jqplot.com/deploy/dist/examples/theming.html)

[http://www.jqplot.com/docs/files/jqplot-themeEngine-js.html](http://www.jqplot.com/docs/files/jqplot-themeEngine-js.html)

所以我尝试像这样应用主题：

```
var gabe = {
    seriesColors: ["#4bb2c5", "#EAA228", "#c5b47f", "#579575", "#839557", "#958c12"],
    grid: { backgroundColor: '#000000' }
}
... {my chart}
plot3.themeEngine.newTheme('gabe', gabe);
plot3.activateTheme('gabe'); 
```

但只有背景发生了变化。如何更改甜甜圈颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:27:43.830

问题是您没有将 in 放置`seriesColors`在`seriesStyles`. 以下代码取自您提供的第一个链接:)

```
 gabe = {
        seriesStyles: {
            seriesColors: ['red', 'orange', 'yellow', 'green', 'blue', 'indigo'],
            highlightColors: ['lightpink', 'lightsalmon', 'lightyellow', 'lightgreen', 'lightblue', 'mediumslateblue']
        },
        legend: {
            fontSize: '8pt'
        },
        title: {
            fontSize: '18pt'
        },
        grid: {
            backgroundColor: 'rgb(211, 233, 195)'
        }
    };
    plot.themeEngine.newTheme('gabe', gabe);
    plot.activateTheme('gabe'); 
```

[这就是它的作用。](http://jsfiddle.net/Boro/NYewy/42/)

[此示例显示所有都被应用，而不是](http://jsfiddle.net/Boro/NYewy/43/)（`seriesColors`正如我们为这个注释掉的`seriesStyles`）。因此，结论`seriesColors`必须放在`seriesStyles`.

我做了这个分析，因为这是我第一次接触主题功能，乍一看，`jqPlot`在你提供的代码片段中一切似乎都很好。

# php - PHP 对 MYSQL 的查询，在 WHERE 中没有可用的 ELSE 选项

> ID：11228314
> 
> 赞同：0
> 
> 时间：2012-06-27T14:18:20.327
> 
> 标签：php, mysql, select

我的脚本是为复选框答案准备的，但如果没有带有 instruktor 或 instruktor_poczatkowy 等的复选框来选择整个列，并且如果选择一些选项来仅执行此选项，我也想这样做。

```
$dbr = dbq("SELECT * FROM `table` WHERE instruktor LIKE '%' OR instruktor in ('$instruktor1', '$instruktor2', '$instruktor3', '$instruktor4',
                           '$instruktor5', '$instruktor6', '$instruktor7', '$instruktor8', '$instruktor9', '$instruktor10', '$instruktor11', '$instruktor12')
                            AND instruktor_poczatkowy in ('$instruktor_poczatkowy1', '$instruktor_poczatkowy2',
                           '$instruktor_poczatkowy3', '$instruktor_poczatkowy4', '$instruktor_poczatkowy5', '$instruktor_poczatkowy6',
                           '$instruktor_poczatkowy7', '$instruktor_poczatkowy8', '$instruktor_poczatkowy9', '$instruktor_poczatkowy10',
                           '$instruktor_poczatkowy11', '$instruktor_poczatkowy12') AND lokalizacja in ('$lokalizacja1','$lokalizacja2', '$lokalizacja3',  '$lokalizacja4', '$lokalizacja5')
                            AND status in ('$status1', '$status2', '$status3', '$status4')
AND chce_mail like '$chce_mail2' AND klub like '$klub2' order by nazwisko"); 
```

我希望它像这样工作：

```
 $dbr = dbq("SELECT * FROM `table` WHERE instruktor LIKE '%' OR instruktor in ('$instruktor1', '$instruktor2', '$instruktor3', '$instruktor4',
                           '$instruktor5', '$instruktor6', '$instruktor7', '$instruktor8', '$instruktor9', '$instruktor10', '$instruktor11', '$instruktor12')
                           ELSE instruktor = % AND instruktor_poczatkowy in ('$instruktor_poczatkowy1', '$instruktor_poczatkowy2',
                           '$instruktor_poczatkowy3', '$instruktor_poczatkowy4', '$instruktor_poczatkowy5', '$instruktor_poczatkowy6',
                           '$instruktor_poczatkowy7', '$instruktor_poczatkowy8', '$instruktor_poczatkowy9', '$instruktor_poczatkowy10',
                           '$instruktor_poczatkowy11', '$instruktor_poczatkowy12') ELSE instruktor_poczatkowy = % AND lokalizacja in ('$lokalizacja1','$lokalizacja2', '$lokalizacja3',  '$lokalizacja4', '$lokalizacja5')
                           ELSE lokalizacja = % AND status in ('$status1', '$status2', '$status3', '$status4') ELSE status = %
AND chce_mail like '$chce_mail2' AND klub like '$klub2' order by nazwisko"); 
```

但不要没有办法做到这一点......有人可以给我一个建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:28:54.727

```
LIKE '%' 
```

这意味着您的价值可以是任何东西，这始终是正确的（我想您的价值为 null 时除外）

```
LIKE 'foo' 
```

这意味着您的价值正是 'foo'

```
LIKE '%foo' 
```

这意味着您的值以 'foo' 结尾

```
LIKE 'foo%' 
```

这意味着您的值以 'foo' 开头

```
LIKE '%foo%' 
```

这意味着您的值包含 'foo'

# x++ - 在查找覆盖方法中传递 FromControl

> ID：11228316
> 
> 赞同：2
> 
> 时间：2012-06-27T14:18:23.807
> 
> 标签：x++, dynamics-ax-2012

我需要更新 AX 中的表单以使用复杂的下拉框。为此，我需要重写 Lookup 方法。根据我的代码示例，这样的代码应该可以工作：

```
public void lookup(FormControl _formControl){} 
```

不幸的是，我收到编译错误“方法覆盖的参数数量不正确”。据我所知，这个错误没有任何意义，因为这是对该方法的有效覆盖。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:34:34.533

表单上数据源字段的查找方法应定义为：

```
public void lookup(FormControl _formControl, str _filterStr) {} 
```

窗体上控件的查找方法应定义为：

```
public void lookup() {} 
```

在 AOT 中，如果您右键单击要创建函数的方法节点并选择覆盖方法/查找，AX 将为您创建一个具有正确签名的方法。

# postgresql - Postgres 跨多个磁盘分布数据

> ID：11228318
> 
> 赞同：22
> 
> 时间：2012-06-27T14:18:26.377
> 
> 标签：postgresql

我需要您的帮助来解决问题，因为我对 Postgres 还很陌生，阅读手册并没有帮助。

我们有一台带有 4 个内部硬盘的服务器。我们创建了一个带有几个表的 Postgres 数据库。我们希望能够将数据分布在这 4 个磁盘上。

我们想在某个地方（例如表空间创建阶段）指定加载到一组表中的数据应该分布在 4 个磁盘上。

您能给我们提供语法或指出正确的方向吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-27T14:29:49.283

1.  在不同的磁盘上创建四个表空间（参见：[http](http://www.postgresql.org/docs/current/static/sql-createtablespace.html) ://www.postgresql.org/docs/current/static/sql-createtablespace.html ）
2.  将表的内容移动到表空间，以便数据按照您打算使用的方式分发`ALTER TABLE foobar SET tablespace = foospace`，请参见此处：[http ://www.postgresql.org/docs/current/static/sql-altertable.html](http://www.postgresql.org/docs/current/static/sql-altertable.html)
3.  使用 将表索引的内容移动到表空间`alter index idx_foo set tablespace = spacefoo`，请参见此处：[http ://www.postgresql.org/docs/current/static/sql-alterindex.html](http://www.postgresql.org/docs/current/static/sql-alterindex.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-27T15:25:18.653

最好的方法是创建一个 RAID-0 或 RAID-10 阵列，让操作系统为您处理。RAID-0 没有冗余，因此任何单个驱动器故障都是灾难性的。RAID-10 允许任何一个磁盘发生故障并继续以良好的性能正常工作。由于写入性能非常差，请避免使用 RAID-5 或 RAID-6。

# php - PHP中的整数连接问题

> ID：11228319
> 
> 赞同：1
> 
> 时间：2012-06-27T14:18:26.693
> 
> 标签：php, string

我有以下代码：

```
function isValidAuthor($authorID){
    $query = "SELECT * FROM jos_users WHERE id=".$authorID;
    ...
} 
```

`$authorID`是一个整数，并从这里调用：

```
if(!$this->_helper->isValidAuthor($settings['default_author'])) 
```

但是，`$query`总是以`SELECT * FROM #__users WHERE id=`. 我尝试将其转换`$authorID`为字符串，并检查了`$settings['default_author'])`，这就是我想要的。如何让查询使用`$authorID`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:23:46.347

尝试`echo $authorID;`

很可能里面什么都没有……

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T14:21:11.607

试试这个：

```
function isValidAuthor($authorID){
    $query = "SELECT * FROM jos_users WHERE id='".$authorID."'";
    ...
} 
```

# .net - 新的 HttpClient 代理设置问题

> ID：11228324
> 
> 赞同：2
> 
> 时间：2012-06-27T14:18:39.390
> 
> 标签：.net, networking, .net-4.5, async-await, dotnet-httpclient

我正在尝试根据新的 fw 4.5 功能（例如 HttpClient 和 await/async）重写旧的网络身份验证逻辑，并且我在请求和响应之间遇到了意外的延迟（大约 15 秒）。我猜这是因为客户端试图从 IE 中查找/使用代理，就像使用旧的 HttpRequest/WebClient 一样。这是代码：

```
public static async Task<AuthResult> GetDataFromServiceAsync(string url, string login, string password)
{
     Debug.WriteLine("[" + DateTime.Now + "] GetDataFromServiceAsync");
     var handler = new HttpClientHandler { Credentials = new NetworkCredential(login, password)/*, UseProxy = false*/ };
     var client = new HttpClient(handler) { MaxResponseContentBufferSize = Int32.MaxValue };
     try
     {
         var resp = await client.GetAsync(new Uri(url));
         var content = resp.Content.ReadAsStringAsync().Result;
         var auth = ParseContent(content);
         Debug.WriteLine("[" + DateTime.Now + "] Returning AuthResult : " + auth);
         return new AuthResult { Success = auth, Exception = null};
     }
     catch (Exception exception)
     {
         //
         Debug.WriteLine("[" + DateTime.Now + "] Returning error AuthResult : " + exception.Message);
         return new AuthResult { Success = false, Exception = exception }; ;
         }
     }
} 
```

此方法与 api 中的其他方法包装在一起，实际上与当前情况无关：

```
public async Task<AuthResult> IsAuthenticated(string login, string password)
{
    Debug.WriteLine("[" + DateTime.Now + "] Starting ISAuthenticationService.IsAuthenticated");
    // ... (cut) ...
    // async
    var authResult = await ISHelpers.GetDataFromServiceAsync(url, login, password);
    Debug.WriteLine("[" + DateTime.Now + "] Ending ISAuthenticationService.IsAuthenticated");
    return authResult;
} 
```

身份验证发生在各自的 ViewModel 命令中：

```
private async void ExecuteAuthenticationCommand()
{
    // Test stub
    //var authService = new Helpers.MockupAuthenticationService();
    var authService = new Helpers.ISAuthenticationService();
    var auth = await authService.IsAuthenticated(Login, Password);
    if (auth.Success)
    {
        MessageBox.Show("Authentication success");
        Messenger.Default.Send<LoginDataItem>(_dataItem);
    }
    else
    {
        MessageBox.Show(auth.Exception.Message, "Incorrect login data");
    }
 } 
```

调试输出：

```
[27.06.2012 16:54:10] Starting ISAuthenticationService.IsAuthenticated
[27.06.2012 16:54:10] GetDataFromServiceAsync
[27.06.2012 16:54:25] ParseContent in GetDataFromServiceAsync
[27.06.2012 16:54:25] Returning AuthResult : True
[27.06.2012 16:54:25] Ending ISAuthenticationService.IsAuthenticated 
```

当我在 HttpClientHandler 设置中取消注释 UseProxy = false 时，延迟消失并且身份验证没有延迟。即使我没有取消注释 UseProxy （每十次运行一次），有时也会出现同样的问题。问题是 - 这是一个错误还是什么？尝试从服务器端调试，发现轮询请求之间没有差异。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T20:21:26.913

这不是错误。IE 的默认设置是尝试自动检测代理，这可能需要 30 秒。要禁用自动检测，您需要将 UseProxy 设置为 False。

实际上，这些设置与 IE 并没有真正的关系。只是 IE 使用（和设置）系统的默认设置。HttpClient 和 WebClient 都使用系统的默认设置，除非您覆盖它们。

至于检测速度，取决于系统设置。如果您在 IE 或 Chrome 中禁用自动代理检测，您会注意到您的浏览器在重新启动后第一次打开的速度要快得多。这是因为它不会尝试检测代理。代理检测过程在[自动代理检测](http://msdn.microsoft.com/en-us/library/fze2ytx2.aspx)中进行了描述，包括几个步骤：

1.  找到最后使用的代理配置脚本
2.  从 DHCP 发现代理
3.  使用 DNS 查找名为 WAPD 的机器

步骤 #2 和 #3 可能需要很长时间，具体取决于您的网络基础设施，甚至可能涉及超时。

# regex - 正则表达式中的 perl 正则表达式

> ID：11228325
> 
> 赞同：3
> 
> 时间：2012-06-27T14:18:41.233
> 
> 标签：regex, perl, quotes

在 perl 中有很多次我想在匹配的另一个替换运算符完成后用它自己替换匹配的字符串。例如，我有一个应用程序，我需要在其中查找带引号的字符串并从中删除空格。一种方法是：

```
while($str =~ s/"([^"])+"//){
   $temp = $1;
   $temp2 = $temp;
   $temp =~ s/ /_/g;
   $str =~ s/$temp2/$temp1/;
} 
```

这似乎也是可能的：

```
$str =~ s/"([^"])+"/replace_spaces($1)/gx;
sub replace_spaces(){
    $word = shift;
    $word =~ s/ /_/g;
    return $word;
} 
```

有没有一种纯粹的正则表达式方法，通过某种方式在正则表达式中嵌套正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:26:29.580

对于手头的特定任务，最好使用[Text::ParseWords](http://search.cpan.org/perldoc/Text%3a%3aParseWords)：

```
#!/usr/bin/env perl

use strict; use warnings;
use feature 'say';
use Text::ParseWords;

my $input = q{This is "a t e s t " string. "Hello - world  !"};
my @words = shellwords $input;

for my $word ( @words ) {
    $word =~ s/ +//g;
    say "'$word'";
} 
```

另请参阅[如何拆分 [character] 分隔的字符串，除非在 [character] 内？](http://perldoc.perl.org/perlfaq4.html#How-can-I-split-a-%5bcharacter%5d-delimited-string-except-when-inside-%5bcharacter%5d?)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:36:13.783

是的，您可以这样做，但在每种情况下，您都需要发明新的正则表达式。在这种情况下没有灵丹妙药。

您必须使用下划线更改空格，但不能全部更改，只有在引号分隔的子字符串内。您检查的最后一个条件是向前看和向后看断言，但这些检查并不容易制定。

例如：

```
$ perl -pe 's/(?<=")(\S+)\s+(?=.*")/$1_/g;'
a b "c d" e f
a b "c_d" e f 
```

但这远非完美。这适用于最简单的情况。这不是一个解决方案，它只是一个想法的演示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:47:20.720

你可以试试：

```
 $str =~ s{"([^"]+)"}{do{(local$_=$1)=~y/ /_/;$_}}eg; 
```

或者，为了更好的可读性：

```
 $str =~ s/
             "([^"]+)"     # all inside double quotes to $1
            / do{          # start a do block
                 local $_ = $1; # get a copy from $1
                 y| |_|;        # transliterate ' ' to '_'
                 $_             # return string from block
                }          # end the do block
            /xeg; 
```

问候

rbo

# jsf - PrettyFaces 偶尔使用 text/plain 而不是 text/html

> ID：11228336
> 
> 赞同：0
> 
> 时间：2012-06-27T14:19:35.627
> 
> 标签：jsf, facelets, jsf-1.2, prettyfaces

我们一直在尝试解决为什么我们使用 JSF 1.2 构建的应用程序似乎呈现 HTML 源代码而不是按预期呈现页面。我们正在使用 PrettyFaces 来美化 URL。Mozilla Firebug 偶尔会为网页显示“text/plain”的 Content-Type 响应标头，但是当我们刷新同一页面时，它显示为“text/html”的 Content-Type 没问题。

为了确定，我们还在响应过滤器中包含了一个显式的 response.setContentType("text/html")。

1.  IE 9.0：大部分时间运行良好，但偶尔会出现问题
2.  IE 8.0：经常出现问题，有时有效，有时无效
3.  Safari (Windows) 和 Chrome 20：经常出现问题，有时有效，有时无效

* * *

## HTML 源代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script type="text/javascript" src="/js/include.js"></script>
        <script type="text/javascript" src="/js/tabs.js"></script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

* * *

## .htaccess

```
Order allow,deny
Allow from all
IndexIgnore * 
```

任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:35:54.653

这听起来不像 PrettyFaces 的问题，因为 PF 不会更改渲染输出的内容类型。我认为这听起来您可能在您的漂亮配置中使用了不正确的或 @ViewId。

我首先要确保您转发到将由 faces servlet 处理的正确视图 ID。如果您在不调用 faces servlet 的情况下转发到 JSF 视图*文件（例如 /faces/* *，而不是 /actual/view/*）

这种遗漏会导致您描述的行为。

这有帮助吗？~林肯

# xaml - Telerik Metro XAML Windows 8 图表控件和绑定

> ID：11228342
> 
> 赞同：0
> 
> 时间：2012-06-27T14:19:59.227
> 
> 标签：xaml, charts, telerik, windows-runtime

我正在构建一个使用 Windows 8 Metro XAML 预览控件的应用程序。我已经下载并检查了示例应用程序，但它主要使用代码隐藏来定义图表所需的所有内容。我正在尝试用绑定完成类似的事情，但图表仍然是空的。实际上，他们得到了数据，但什么也没画（例如，我可以看到 RadPieChart 的边界线和 RadCartesianChart 的全零）。这是 RadPieChart 的代码：

```
<telerik:RadPieChart>
    <telerik:PieSeries ItemsSource="{Binding AssetsData}" />
</telerik:RadPieChart> 
```

AssetsData 是这样定义的：

```
private ElementCollection<PieDataPoint> assetsData;
public ElementCollection<PieDataPoint> AssetsData
{
    get
    {
        return assetsData;
    }
    set
    {
        assetsData = value;
        Notify("AssetsData");
    }
} 
```

填充数据，如下所示：

```
PieSeries series = new PieSeries();
series.RadiusFactor = 0.9;

foreach (var entry in dataSource)
{
    series.DataPoints.Add(new PieDataPoint() { Value = entry.Percentage, Label = entry.Title });
}

assetsData = series.DataPoints; 
```

当我在示例应用程序中使用代码隐藏 (C#) 时，一切正常。我定义系列，将数据点添加到系列并将该系列添加到图表控件。当使用相同的数据并尝试像这样绑定时，它不起作用。

我在这里做错了什么？

我检查了集合中的值是否设置正确，并且它们是正确的（因为我使用的逻辑与我使用代码隐藏时的逻辑相同，所以实际上应该没有任何区别，而且没有）。

另外，有没有办法设置 RadCartesianChart 根据正在绘制的数据来缩放它的最小值和最大值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:44:43.453

我也在控件方面苦苦挣扎，直到我意识到您必须以编程方式定义调色板时，我才设法让图表向我展示任何东西。目前我有这个例子，但下周我会在图表上做更多的工作，我可以为你发布一些更好的代码。但这至少可以让你开始！

```
 <Grid Height="520" Grid.Row="1" Margin="10">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
          </Grid.RowDefinitions>
          <StackPanel Grid.Row="0" Background="#007EA9" Height="auto" Width="500">
            <Border Background="#007EA9">
              <telerik:RadCartesianChart x:Name="barChart" Margin="0,6,0,0" Height="250" Width="230">
                <telerik:RadCartesianChart.HorizontalAxis>
                  <telerik:CategoricalAxis LabelFitMode="MultiLine">
                    <telerik:CategoricalAxis.LabelStyle>
                      <Style TargetType="TextBlock">
                        <Setter Property="MaxWidth" Value="10" />
                        <Setter Property="Margin" Value="4" />
                      </Style>
                    </telerik:CategoricalAxis.LabelStyle>
                  </telerik:CategoricalAxis>
                </telerik:RadCartesianChart.HorizontalAxis>
                <telerik:RadCartesianChart.VerticalAxis>
                  <telerik:LinearAxis Maximum="200" Minimum="0">
                    <telerik:LinearAxis.LabelStyle>
                      <Style TargetType="TextBlock">
                        <Setter Property="Width" Value="10" />
                        <Setter Property="TextAlignment" Value="Right" />
                      </Style>
                    </telerik:LinearAxis.LabelStyle>
                  </telerik:LinearAxis>
                </telerik:RadCartesianChart.VerticalAxis>
                <telerik:RadCartesianChart.Grid>
                  <telerik:CartesianChartGrid MajorLinesVisibility="Y" />
                </telerik:RadCartesianChart.Grid>
              </telerik:RadCartesianChart>
            </Border>
          </StackPanel>
          <StackPanel Grid.Row="1" Height="auto" Width="500" Margin="0,35,0,0">
            <Border Background="#007EA9">
              <telerik:RadPieChart x:Name="pieChart" Margin="0,0,0,0" Height="250" Width="230" />
            </Border>
          </StackPanel>
        </Grid> 
```

C# 代码

```
 private void CreateSuckyChart()
    {
        double value;

        pieChart.Palette = ChartPalettes.DefaultDark;
        barChart.Palette = ChartPalettes.DefaultDark;

        var data = new List<WBDataEntry> { new WBDataEntry { Data = "Benchpress", Value = 70 }, new WBDataEntry { Data = "Squats", Value = 15 }, new WBDataEntry { Data = "Lat pulls", Value = 205 }, new WBDataEntry { Data = "Lunges", Value = 55 } };
        var series = new BarSeries();
        series.CategoryBinding = new PropertyNameDataPointBinding("Date");
        series.ValueBinding = new PropertyNameDataPointBinding("Value"); 
        this.barChart.Series.Add(series);
        var series2 = new PieSeries();
        var labelDefinition = new ChartSeriesLabelDefinition();
        labelDefinition.Margin = new Thickness(-10, 0, 0, 0);
        labelDefinition.DefaultVisualStyle = this.Resources["PieChartLabelStyle"] as Style;
        series2.LabelDefinitions.Add(labelDefinition);
        series2.RadiusFactor = 0.7;
        series2.AngleRange = new AngleRange(-90, 360);

        this.pieChart.Series.Add(series2);

        foreach (WBDataEntry indicator in data) // Class WBDataEntry has two properties, Value and Date
        {
            series2.DataPoints.Add(new PieDataPoint() { Value = indicator.Value, Label = indicator.Data });

            series.DataPoints.Add(new CategoricalDataPoint() { Value = indicator.Value , Label = indicator.Data });

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:49:48.930

我看到您已经找到了解决方案，但我想我会在这里发布解决方案。这是我的xml：

```
<Grid>
    <Grid.Resources>
        <t:ChartPalette x:Key="CustomPalette">
            <t:ChartPalette.FillEntries>
                <t:PaletteEntryCollection>
                    <SolidColorBrush Color="Red"></SolidColorBrush>
                    <SolidColorBrush Color="Green"></SolidColorBrush>
                    <SolidColorBrush Color="Blue"></SolidColorBrush>
                    <SolidColorBrush Color="Purple"></SolidColorBrush>
                </t:PaletteEntryCollection>
            </t:ChartPalette.FillEntries>
            <t:ChartPalette.StrokeEntries>
                <t:PaletteEntryCollection>
                    <SolidColorBrush Color="Red"></SolidColorBrush>
                    <SolidColorBrush Color="Green"></SolidColorBrush>
                    <SolidColorBrush Color="Blue"></SolidColorBrush>
                    <SolidColorBrush Color="Purple"></SolidColorBrush>
                </t:PaletteEntryCollection>
            </t:ChartPalette.StrokeEntries>
        </t:ChartPalette>
    </Grid.Resources>

    <tpri:RadLegendControl LegendProvider="{Binding ElementName=pieChart}">
        <tpri:RadLegendControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Vertical"/>
            </ItemsPanelTemplate>
        </tpri:RadLegendControl.ItemsPanel>

        <tpri:RadLegendControl.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <Ellipse Fill="{Binding Fill}" Stroke="{Binding Stroke}" StrokeThickness="1" Width="10" Height="10"/>
                    <TextBlock Text="{Binding Title}" Foreground="{Binding Fill}"  Margin="10" FontStyle="Italic"/>
                </StackPanel>
            </DataTemplate>
        </tpri:RadLegendControl.ItemTemplate>
    </tpri:RadLegendControl>

    <t:RadPieChart x:Name="pieChart" Palette="{StaticResource CustomPalette}">
        <t:PieSeries ItemsSource="{Binding ScoreCard}" RadiusFactor="0.8">
            <t:PieSeries.ValueBinding>
                <t:PropertyNameDataPointBinding PropertyName="Total"/>
            </t:PieSeries.ValueBinding>

            <t:PieSeries.LegendTitleBinding >
                <t:PropertyNameDataPointBinding PropertyName="Name"></t:PropertyNameDataPointBinding>
            </t:PieSeries.LegendTitleBinding>
        </t:PieSeries>
    </t:RadPieChart>
</Grid> 
```

对于记分卡绑定，我有这个：

```
private ObservableCollection<TestQuestionResult> _scoreCard;
public ObservableCollection<TestQuestionResult> ScoreCard
{
    get { return _scoreCard; }
    set { _scoreCard = value; Notify("ScoreCard"); }
} 
```

数据类如下所示：

```
public class TestQuestionResult
{
    public string Name { get; set; }
    public int Correct { get; set; }
    public int Incorrect { get; set; }
    public int Total { get; set; }
} 
```

此方法生成用于测试的虚拟数据：

```
private void Init()
{
    var list = new ObservableCollection<TestQuestionResult>();
    var ran = new Random(-1);

    for (var ix = 0; ix < 7; ix++)
    {
        var tq = new TestQuestionResult()
        {
            Name = ix.ToString(),
            Correct = ran.Next(321, 932),
            Incorrect = ran.Next(321, 932),
        };

        tq.Total = tq.Correct + tq.Incorrect;
        list.Add(tq);
    }

    ScoreCard = list;
} 
```

我希望这至少可以节省其他人我花在上面的时间。:)

# html - C/C++ 中#define 的 HTML 等价物是什么？

> ID：11228345
> 
> 赞同：4
> 
> 时间：2012-06-27T14:20:21.617
> 
> 标签：html, cordova, include

我有多个 HTML 文件，它们只有一点点不同——这里和那里有一些文本和 Javascript 常量。我想让维护一个主版本变得容易，并使生成变体变得简单。

像 C/C++ 中的编译时替换这样的东西会简单而完美：

```
#define CONSTANT 1.23456 
```

**如何？有任何想法吗？**

* * *

附加信息：

*   使用 HTML 5
*   这些 HTML 文件用于 PhoneGap，因此不允许使用服务器端内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T14:22:54.267

您可以为此使用模板引擎。我对来自 twitter [http://twitter.github.com/hogan.js/的这个非常满意](http://twitter.github.com/hogan.js/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T15:10:35.147

在实践中，HTML 中没有这样的机制。此类事情使用各种工具处理，例如高级编辑器、预处理工具和 PHP 等服务器端技术。如果您愿意，您甚至可以[使用 C 预处理器](http://www.cs.tut.fi/~jkorpela/html/cpre.html)，尽管大多数人使用不同的东西。

在理论上，HTML 具有 SGML 和 XML 的“实体”机制。它从未在 HTML 浏览器中实现，尽管实体是 SGML 的一部分并且 HTML 名义上是基于 SGML 的。（像 é 这样的所谓“字符实体”是`&eacute;`在临时基础上实现的，而不是通过实体机制的实现。）

支持真正 XHTML（而不仅仅是由 HTML 规则处理的 XHTML）的浏览器实现了实体机制，因此您实际上可以编写例如

```
<!ENTITY CONSTANT "1.23456"> 
```

在 DTD 和

```
&CONSTANT; 
```

在文档内容中。见[演示](http://www.cs.tut.fi/~jkorpela/test/entitydef.xhtml)。但这仅适用于使用 XHTML 媒体类型提供文档的情况，这反过来又会阻止旧版本的 IE 显示页面。

# sql-server-2005 - 使用格式文件 sql server 2005 批量插入

> ID：11228347
> 
> 赞同：1
> 
> 时间：2012-06-27T14:20:27.417
> 
> 标签：sql-server-2005, bulkinsert

我想创建一个存储过程，它使用格式文件将 txt 文件导入现有表，并更新导入中将为空的某些字段。导入文件只会更新一列，我需要手动为其他列分配值。

```
bulk insert QueryData from 'E:\TrackInputLogs\NMSLog.txt'
with(FORMATFILE = 'E:\TrackInputLogs\NMSFormat.fmt', 
ROWTERMINATOR='\n') 
```

我需要同时更新以下列

```
dateimported = getdate()
idkey = asdfg
importmethod = manual 
```

哦，顺便说一句，这是一个现有表，我不想删除当前内容，但导入也会更新 idkey 与文件内容关联的值匹配的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:33:17.037

我对中文字符有同样的问题，最后它只是在格式文件中将 SQLNCHAR 更改为 SQLCHAR ......

```
9.0
4
1 SQLCHAR 0 10  ","    1 Field1 SQL_Latin1_General_CP1_CI_AS 
2 SQLCHAR 0 10  ","    2 Field2 SQL_Latin1_General_CP1_CI_AS
3 SQLCHAR 0 6   ","    3 Field3 SQL_Latin1_General_CP1_CI_AS
4 SQLCHAR 0 100 "\r\n" 4 Field4 SQL_Latin1_General_CP1_CI_AS 
```

# php - 在没有 Javascript 的 post 方法中重定向到带有变量的 url

> ID：11228349
> 
> 赞同：2
> 
> 时间：2012-06-27T14:20:32.330
> 
> 标签：php, html

如果满足条件，我想将我的页面重定向到另一个页面，例如 samplepage1.php

```
$id = $_POST['id'];
$name=$_POST['name'];
if($max>$count){
//action on the same page
}
else{
//redirect to URL:index.php/samplepage2.php with the values $id & $name in POST METHOD
} 
```

我需要一个解决方案，以便必须通过帖子将值发布到“samplepage2.php”，但严格不使用javascript来实现自动提交（我不喜欢javascript的帮助，好像用户可以在浏览器中将其关闭）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:25:01.673

@nickb 对他的评论是正确的。如果您的表单或其他任何东西处理 javascript 并且会影响您的页面可以做什么和不可以做什么，那么试图弄清楚如何容纳 $_POST 是没有意义的。

但是，处理此问题的一种方法是将您的 $_POST 切换到该页面的 $_SESSION。

所以像：

```
$_SESSION['form1'] = $_POST; 
```

当你到达下一页时（确保在每一页的开头都有 session_start() ），如果你真的想的话，你可以把它切换回来。不要忘记`unset($_SESSION['form1'])`一旦你完成它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:29:35.143

试试这个 ：

```
$id = $_POST['id'];
$name=$_POST['name'];
if($max>$count){
//action on the same page
}
else{
$url = 'http://yourdomain.com/samplepage2.php';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, 'id='.$id);
curl_exec($ch);
curl_close($ch);$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, 'name='.$name);
curl_exec($ch);
curl_close($ch); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:37:02.580

如果`curl`在您的服务器上启用，则您可以使用 curl 将`POST`数据发送到另一个表单，

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "index.php/samplepage2.php");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, true);

$data = array(
    'id' => 'value of id',
    'name' => 'value of name'
);

curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch); 
```

# mongodb - 消息应用程序的 MongoDB 结构

> ID：11228351
> 
> 赞同：35
> 
> 时间：2012-06-27T14:20:32.893
> 
> 标签：mongodb, database-schema, bson

我正在思考一个用于处理消息应用程序的良好文档结构。

我基本上需要三种（或四种）类型的对象：

1.  用户（用户名、电子邮件、密码等）
2.  联系人列表（包含不同的联系人或联系人组）
3.  对话（对话是一些人之间的信息集合）
4.  消息（包含消息正文、一些时间戳和创建者。）

我的想法是将联系人嵌入到用户文档中，并将消息嵌入到对话文档中：

**1\. 用户**

```
{
    username: 'dev.puS',
    usernameCanonical: 'dev.pus', // used for unique constraints
    email: 'developement.pus@gmail.com,
    emailCanonical: 'developement.pus@gmail.com,
    salt: 'some hash',
    password: 'hash with salt',
    logs: { last_login: 12.06.2008, last_password_reset: 04.03.2007 },
    state: { online: true, available: false },
    contacts: [ user_id1, user_id2, user_id3 ]
} 
```

**2\. 对话**

```
{
    members: [ user_id1, user_id2 ],
    messages: [
        { author: user_2, body: 'Hi what's up' },
        { author: user_1, body: 'Nothing out here :(' },
        { author: user_2, body: 'Whanna ask some question on stackoverflow' },
        { author: user_1, body: 'Okay, lets go' }
    ]
} 
```

你觉得这个架构怎么样？

我认为将它们分开会更好（因此每个文档都是自己的），因为每个文档都有不同的更新频率。但我真的没有任何经验，所以听到一些建议会很好:)

问候

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-05-25T01:31:01.300

我看到这个问题很老了，但是对于任何有兴趣的人来说，都问了一个类似的问题，一个答案看起来可行[https://stackoverflow.com/a/30830429/132610](https://stackoverflow.com/a/30830429/132610)

```
Conversation : {
 id: 123,
 members: [ user_id1, user_id2 ]
}
Message { conversationId: 123, author: user_2, body: 'Hi what's up' }
Message { conversationId: 123, author: user_1, body: 'Whanna ask some question on stackoverflow' } 
```

## 更新#1

1) 可扩展性：MongoDB 在非常大的集合中可以很好地扩展。每个集合数十亿条消息。有一种称为分片的技术可以让您将较大的集合拆分到多个节点。

2）阅读。由于 MongoDB 具有索引机制，因此读取可与任何经过微调的数据库引擎相媲美。所以阅读不会成为问题。特别是，当一个对话（组|房间）的参与者较少时，例如两个人互相发送消息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-27T18:23:43.690

您的问题实际上是架构设计之一。我建议看看这个关于 MongoDB 模式设计的页面，以了解选择和权衡：[http ://www.mongodb.org/display/DOCS/Schema+Design](http://www.mongodb.org/display/DOCS/Schema+Design)

此外，您可能应该查看该文档“另请参阅”部分中的链接。我特别推荐视频演示。

最后，您可能应该查看此文档，以讨论消息/评论数据库的三种可能模式，包括每种设计的权衡：http: [//docs.mongodb.org/manual/use-cases /存储评论/](http://docs.mongodb.org/manual/use-cases/storing-comments/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-31T19:43:23.717

请找到我的建议：

```
 Person : {
        person_id: '123',
        last_login: 12.06.2008,
        online: true
    }

Conversation : {
 conversation_id: append the greater person_id to the lower person_id, // person_1_id =123 and person_2_id =124 then its 123124

messages: [ 
        { message_id: 1, 
          message_text : 'Hi what's up',
          sender_id : 123,
          receiver_id: 124,
          timestamp : 12344567891
        },
        { message_id: 2, 
          message_text : 'fine',
          sender_id : 124,
          receiver_id: 123,
          timestamp : 12344567891
        }
       ]
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-03-25T16:37:29.907

这是我的建议

```
{
"_id" : ObjectId("5a9e9581a2147c0c0f00002e"),
"id_members1" : "5a9e9581a2147c0c0f02345t",
"id_members2" : "5a9e9581a2147c0c0f02134g",
"name" : [ 
    "Omar", 
    "Mohamed"
],
"messages" : [ 
    {
        "author" : "Omar",
        "body" : "salam 3likom",
        "create_at" : ISODate("2018-03-07T09:04:04.000Z")
    }, 
    {
        "author" : "Mohamed",
        "body" : "Wa3likom salam",
        "create_at" : ISODate("2018-03-07T09:04:04.000Z")
    }, 
    {
        "author" : "Mohamed",
        "body" : "wach teshak",
        "create_at" : ISODate("2018-03-07T09:04:04.000Z")
    }, 
    {
        "author" : [ 
            "Omar", 
            "Mohamed"
        ],
        "body" : "test msg",
        "create_at" : ISODate("2018-03-25T15:30:05.000Z")
    }
],
"comments" : [ 
    null, 
    {
        "author" : [ 
            "Omar", 
            "Mohamed"
        ],
        "body" : "test msg",
        "create_at" : ISODate("2018-03-25T15:28:11.000Z")
    }, 
    {
        "author" : [ 
            "Omar", 
            "Mohamed"
        ],
        "body" : "test msg",
        "create_at" : ISODate("2018-03-25T15:28:31.000Z")
    }
] 
```

}

# c - dtrace 从应用程序访问全局变量

> ID：11228352
> 
> 赞同：2
> 
> 时间：2012-06-27T14:20:34.163
> 
> 标签：c, dtrace

假设我的应用程序代码如下所示：

```
#include <stdio.h>
int global_var;

void change_var(){
    global_var++;
}    

int main(void){
    change_var();
    retrun 0;
} 
```

现在，您能告诉我，是否可以`global_var`在 dtrace 脚本中访问并打印它？

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:40:30.523

你可以，但你必须知道变量的地址。你的 D 会像

```
self->kp = (int *) copyin(<address>, sizeof (int));
printf("global_var = 0x%d\n", *self->kp) 
```

# android - 既然我们已经升级了 Android，自定义按钮在应用程序中看起来很糟糕

> ID：11228354
> 
> 赞同：1
> 
> 时间：2012-06-27T14:20:39.027
> 
> 标签：android, android-layout

我在 Android 2.2 中开发我的应用程序已经有一段时间了，我对它非常满意。然而，技术进步，是时候升级老女孩以使用 Honeycomb 和 ICS...

看起来不正确的一件事是我屏幕上的按钮。这很令人沮丧，但我似乎无法找到一种方法让它们看起来像以前那样。我的按钮使用自定义可绘制对象，它是一个 XML 文件，而不是实际的图形。它看起来像这样：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape>
            <gradient
                android:startColor="#444444"
                android:endColor="#444444" />

            <stroke
                android:width="1dip"
                android:antialias="true" 
                android:color="@android:color/white" />

            <corners
                android:radius="8dip" />

            <padding
                android:left="2dip"
                android:top="2dip"
                android:right="2dip"
                android:bottom="2dip" />
        </shape>
    </item>
</selector> 
```

按钮在 layout.xml 文件中抓取此代码，如下所示：

```
<Button
    android:id="@+id/button1"
    android:layout_weight="1"
    android:layout_width="1dp"
    android:layout_margin="2dp"
    android:longClickable="true"
    android:visibility="invisible"
    android:layout_height="fill_parent"
    android:background="@drawable/def_gray"
    android:layout_gravity="center_vertical"
    android:textColor="@android:color/white"
    android:gravity="center_horizontal|center_vertical" /> 
```

这用于生成一个漂亮、专业的圆角矩形按钮，带有白色边框和灰色中心。但是，现在我在三星 Galaxy Tab 2（运行 ICS）上运行我的代码，边框的圆形部分不是白色的——它们是灰色的，而且看起来很糟糕。我发现如果我将笔画增厚到 2dip，边角会变白，但我真的更愿意保留该软件的早期版本外观。

我从经验中了解到，如果我用 Paint & Canvas 绘制带有曲线的东西，这个问题的答案是确保开启抗锯齿。但是，即使 XML 有一个 android:antialias 键（您可以在该部分中看到它——但它不起作用），我还是不知道如何使用它。

有没有人有什么建议？？

谢谢，R。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:45:07.113

这可能只是屏幕质量。或者，它可能是边界和中心之间的混叠。

此代码可能会绕过别名：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape>
            <gradient
                android:endColor="#444444"
                android:startColor="#444444" />

            <corners android:radius="8dip" />
        </shape>
    </item>
    <item>
        <shape>
            <solid android:color="#00000000"/>

            <stroke
                android:antialias="true"
                android:width="1dip"
                android:color="@android:color/white" />

            <corners android:radius="8dip" />
        </shape>
    </item>
</layer-list> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T20:58:44.117

You could create a 9 patch drawable which won't have this anti-aliased look to it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T15:09:25.923

我能找到的唯一答案是将白色轮廓的大小从 1dp 增加到 2dp。我能想到这会起作用的原因是曲线的颜色混叠，但我没有直接解决这个问题。起初，这真的不是我想要的样子，但它在我身上长大了。

# objective-c - tableview 上的 setediting = true 使单元格附件视图消失？

> ID：11228358
> 
> 赞同：3
> 
> 时间：2012-06-27T14:20:49.593
> 
> 标签：objective-c, ios, uitableview

我在每个 tableview 单元格上都有一个 UISwitchView，并希望允许对单元格进行重新排序。问题是当我在表格视图上设置 setEditing=true 时，附件（switchview）消失了。有没有办法同时保留？

**编辑**

```
static NSString *CellIdentifier = @"Edit Sources Cell";
UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; 
} 

// Configure the cell...
NSUInteger row = [indexPath row];
Source *source = [self.sources objectAtIndex:row];

cell.textLabel.text = source.name;

UISwitch *switchView = [[UISwitch alloc] initWithFrame:CGRectZero];
switchView.tag = row;
cell.accessoryView = switchView;
[switchView setOn:source.switchedOn animated:NO];
[switchView addTarget:self action:@selector(switchChangedForSource:)  forControlEvents: UIControlEventValueChanged] ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T14:51:31.773

UITableViewCell 有一个附加属性 ,`editingAccessoryView`用于在单元格处于编辑模式时显示的视图。

我不知道您是否可以将相同的 UISwitch 实例分配给`accessoryView`and`editingAccessoryView`属性，或者您是否需要创建两个实例。（一个视图一次只能有一个父视图，但 UITableViewCell 实际上是在做显示视图的工作，所以它可能足够聪明来处理这种情况。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:39:11.843

是的，有办法保留它们。

您应该制作**一个自定义单元格视图**，**您可以将每个 UI 元素添加到此自定义单元格**，包括切换视图（或其他任何内容），并且当您将表格的编辑设置为 true 时，您**不会有问题**，因为在自定义单元格上查看 UI 元素不会消失。

标准表格单元格的 UI 元素不是由您控制的，这就是为什么您只能同时看到其中一个内置附件的原因。当您使用自定义单元格视图时，它永远不会发生。

我希望您熟悉自定义单元格视图，但如果您不熟悉，我也可以提供确切的代码，但想法就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:26:41.707

如果您的意思是它在重新排序控件**下**消失了，如果您在代码中添加开关，则可以通过调整属性将其重新定位到不同的位置`autoresizingMask`，或者如果您在 IB 中构建它，则可以通过图形方式调整 Autosizing。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:25:34.613

我认为您需要将您的表格视图单元格子类化。如果您的子类为 YES，则以编程方式将`UISwitch`向左移动。`self.isEditing``UITableViewCell`

# html - 用跨度标签影响seo是否打破一个词

> ID：11228368
> 
> 赞同：5
> 
> 时间：2012-06-27T14:21:12.397
> 
> 标签：html, css, seo

我想知道是否使用 span 标签分解单词以更改第一个字母的字体大小，会影响谷歌机器人阅读单词的能力吗？受此影响的词是关键字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T14:22:26.750

不，这不会损害您的 SEO 工作。使用标记来实现视觉效果是很正常的，因为`<span>`没有语义意义，它显然不会改变单词对搜索引擎的权重。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:58:32.823

没有明确的答案：没有关于搜索引擎做什么的规范，而且它们是不同的。期望他们忽略`span`标记是很自然的，但他们不必这样做。

但是，如果有一种简单的方法可以避免使用这种标记拆分单词，那么采用这种方法是最安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:06:39.823

你可以做复合词和单独的词。例如，单词 paperweight 可以针对 paperweight 和“paper weight”进行优化。使用 HTML span 标签，Google 将对镇纸和“镇纸”进行排名，您的用户将看到正确的镇纸。有关详细信息以及如何证明这一点，请参阅[https://plus.google.com/communities/104061601962995568302](https://plus.google.com/communities/104061601962995568302)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:26:35.747

当您可以在单词周围的跨度上使用伪元素选择器时，为什么要首先分解单词？[http://www.w3schools.com/cssref/sel_firstletter.asp](http://www.w3schools.com/cssref/sel_firstletter.asp)

* * *

正如 John Conde 提醒我的那样，w3schools 并不是一个很好的网站，所以如果你想要更好的参考[http://reference.sitepoint.com/css/pseudoelement-firstletter](http://reference.sitepoint.com/css/pseudoelement-firstletter)应该可以。

# ios - 发布操作时在 Facebook 时间轴上获取“应用名称”

> ID：11228372
> 
> 赞同：0
> 
> 时间：2012-06-27T14:21:25.300
> 
> 标签：ios, facebook, facebook-ios-sdk

所以我想在这张[图片](https://skitch.com/pekpongpaet/89amt/first-time-ever)中有类似的东西。基本上，当您发布您的操作时，您有一个“获取应用程序名称”。你如何使用 facebook-ios-sdk 做到这一点？您需要设置哪些打开图表设置才能使其出现在您的时间线上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:24:15.810

它叫`Action links`. 您可以为任何帖子设置操作链接。

```
NSDictionary* actionLinks = [NSArray arrayWithObjects:[NSDictionary 
  dictionaryWithObjectsAndKeys: @"text here",@"text",@"link here",
                                @"href", nil], nil];

  NSString *actionLinksStr = [jsonWriter stringWithObject:actionLinks];

  NSMutableDictionary* params = [NSMutableDictionary
                                 dictionaryWithObjectsAndKeys:
                                 @"Share on Facebook",  @"user_message_prompt",
                                 actionLinksStr, @"action_links",

                                 nil]; 
```

> Open Graph Actions 是用户可以在您的应用中执行的高级“交互”。当这些动作被发布时，这些活动可能会出现在用户的时间轴或他们朋友的新闻提要和代码中。Open Graph Action Links 与任何 Open Graph 故事中的 Like 和 Comment 操作一起显示，允许朋友快速采取行动来响应故事，而无需离开该故事。反过来，这将通过更少的用户点击推动更多的分发到您的应用程序。

仅供参考：[https ://developers.facebook.com/docs/opengraph/actionlinks/](https://developers.facebook.com/docs/opengraph/actionlinks/)

# c# - 用于查询 Web 服务/方法的 Lambda 表达式？

> ID：11228375
> 
> 赞同：0
> 
> 时间：2012-06-27T14:21:30.240
> 
> 标签：c#, asp.net, web-services, lambda

我有一个 Web 服务，它只是通过一个名为`GetAll()`.

现在，如果我不想要所有数据怎么办？如果我只想要基于查询或某些条件的几个实体怎么办。发送所有实体/对象然后在消费者端处理“查询”感觉有点傻。这是对带宽的浪费，也是对时间的浪费，因为查询数据库中所有对象/实体的查询需要相当长的时间。

是否有可能以某种方式发送一个 lambda 表达式或其他东西作为参数，然后让服务根据该表达式查询数据库，然后将所有对象的列表返回给消费者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:28:41.893

根据您的项目设置方式，它可能不是您的解决方案，但您可能希望查看 OData Web 服务。

[http://www.dotnetexpertguide.com/2012/03/odata-service-with-asp-net-web-api.html](http://www.dotnetexpertguide.com/2012/03/odata-service-with-asp-net-web-api.html)

如果您将数据返回为`IQueryable<T>`Then 您基本上可以将过滤器传递到 URL 以返回您需要的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:25:58.040

这样做可能不是一个好主意。最好提供客户端需要的方法，如果需要，客户端可以进一步过滤。但是，我不是一个判断你的问题的人，所以，引用[这篇文章](https://stackoverflow.com/questions/6443433/how-can-i-pass-a-lambda-expression-to-a-wcf-service)：

> 充其量你可以让它接受一个表达式的序列化版本，但不是一个 lambda，lambda 是一个方法指针，一个表达式是可以编译、分析等的东西的表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:27:38.427

AFAIK - lambda 不会可序列化，因此无法通过网络发送。

但是，您的问题暗示了一些非常糟糕的设计决策，例如不受限制的结果集非常糟糕。您应该考虑使用过滤器对象或其他东西向查询添加谓词。至少你应该考虑做类似的事情：

> GetAll（int 开始，int 跳过）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:59:47.417

不，您不能在 WCF 方法中传递 lambda 或委托。有关更多详细信息，请参阅[此主题](https://stackoverflow.com/questions/837274/in-wcf-is-it-possible-to-pass-a-delegate-to-the-remote-object)

当我遇到您的任务时，我使用了其中一种方法

1.  为过滤器参数创建一个单独的类并将一个实例传递给服务器。在服务器端，您需要根据传递的对象形成查询。
2.  使用 a`Dictionary<string,string>`作为过滤器参数的容器。在这种情况下，在服务器端，如果您有枚举、guid 等，则需要解析值。如果我们有多个过滤器参数值，它也会受到限制。但无需创建单独的类。

# visual-studio-2010 - 如何避免在 IWizard 中创建默认项目？

> ID：11228381
> 
> 赞同：1
> 
> 时间：2012-06-27T14:21:43.280
> 
> 标签：visual-studio-2010, c#-4.0, vsix, visual-studio-extensions

**要求：**

用户必须在指定的路径（比如在 C:\MyProject\XYZTest 下）创建项目。如果不是（比如用户给了 C:\MyProject\DummyFolder），那么应用程序应该终止而不创建任何项目。

观察下面的代码

```
public void ProjectFinishedGenerating(Project project)
        {
            try
            {
                string l_basepath = string.Empty;
                var ProjectProperties = project.ProjectItems;
                var SolnPath = ProjectProperties.Item(1).FileNames[1];

                if (SolnPath.IndexOf("XYZTest") > 0)
                {
                       //set the project path
                }
                else
                {
                    MessageBox.Show("Please select valid project location");
                    Application.Exit();

                }
} 
```

代码正在执行检查，如果项目位置路径包含“XYZLocation”字符串，那么只有用户可以继续创建项目，否则应用程序应该退出。

这可行，但关键是，在退出后它也会创建默认项目。因为我们已经在IWizard的“ProjectFinishedGenerating”方法中实现了。

所以，为了避免这种情况，我认为我们需要在IWizard的**“RunStarted”**方法中进行。但在那里我无法得到

```
var ProjectProperties = project.ProjectItems;
 var SolnPath = ProjectProperties.Item(1).FileNames[1]; 
```

问题是

```
a) Is my idea and approach is correct (to do in the RunStarted method)?
b)If so, how can I do it?
c)If not, what is the way to achieve so? 
```

意思是，如果应用程序存在，则不应该在用户指定的任何位置生成任何项目。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T10:43:53.073

我唯一的解决方案是*Application.Exit();* . 此解决方案无效，因为它会杀死整个视觉工作室。

# java - 查找所有匹配的子字符串，而不仅仅是“最扩展”的子字符串

> ID：11228384
> 
> 赞同：13
> 
> 时间：2012-06-27T14:21:49.870
> 
> 标签：java, regex, substring

编码

```
String s = "y z a a a b c c z";
Pattern p = Pattern.compile("(a )+(b )+(c *)c");
Matcher m = p.matcher(s);
while (m.find()) {
    System.out.println(m.group());
} 
```

印刷

```
a a a b c c 
```

哪个是对的。

但从逻辑上讲，子字符串

```
a a a b c
a a b c c
a a b c
a b c c
a b c 
```

也匹配正则表达式。

那么，我怎样才能让代码也找到那些子字符串，即不仅是*最扩展*的子字符串，还有它的*子*字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T14:50:39.980

您可以使用[不情愿的限定词](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)，例如`*?`and `+?`。这些匹配尽可能少，与标准相反`*`，`+`它们是贪婪的，即尽可能匹配。尽管如此，这只允许您找到特定的“子匹配”，而不是全部。使用前瞻控制非捕获组可以实现更多控制，也在文档中进行了描述。但是为了真正找到所有子匹配项，您可能必须自己做一些事情，即构建正则表达式对应的自动机并使用自定义代码对其进行导航。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:49:00.877

您将需要一个[惰性量词](http://en.wikipedia.org/wiki/Regular_expression#Lazy_quantification)。

请尝试以下方法：

```
Pattern p = Pattern.compile("(a )+(b )+((c )*?)c"); 
```

另请注意，我`c`再次对“”进行了分组，因为我认为这就是您想要的。否则你会发现任意多个空格，而不是“ `c`”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:28:32.287

我在这里能想到的唯一方法是生成原始字符串的所有可能子字符串的列表，并将正则表达式与它们中的每一个进行匹配，保留匹配的那些项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:35:44.923

我不知道任何可以返回所有有效匹配的正则表达式引擎。

但是我们可以应用一些逻辑来生成所有候选字符串并将其呈现给正则表达式。

通过枚举给定输入的所有可能子字符串来构造候选。

```
var str = "y z a a a b c c z y z a a a b c c z";
var regex = new Regex("(a )+(b )+(c *)c");

var length = str.Length;

for (int start = 1; start <= length;start++){

    for (int groupLength = 1;  start + groupLength - 1 <= length ;groupLength++){

        var candidate = str.Substring(start-1,groupLength); //.Dump();

        //("\"" + candidate + "\"").Dump();

        var match = regex.Match(candidate);

        if (match.Value == candidate )
        {
            candidate.Dump();
        }

    }
} 
```

这给

```
a a a b c c 
a a b c c 
a b c c 
```

这似乎是正确的答案，但与您的结果相矛盾：

```
a a a b c => I state that this is not a match
a a b c c ok
a a b c => I state that this is not a match
a b c c ok
a b c => I state that this is not a match 
```

例如，您提供的正则表达式

```
(a )+(b )+(c *)c 
```

与结果中的第一个条目不匹配

```
a a a b c 
```

如果您认为起始位置不重要，上述逻辑可以生成相同的匹配。例如，如果您只是再次重复给定的输入：

```
"y z a a a b c c z y z a a a b c c z" 
```

它会给：

```
a a a b c c
a a b c c
a b c c
a a a b c c
a a b c c
a b c c 
```

如果您认为位置不重要，您应该对此结果进行区分

如果认为可能匹配，则应添加输入为空字符串的琐碎情况。

仅供参考，这是正则表达式检查的所有候选人

```
"y"
"y "
"y z"
"y z "
"y z a"
"y z a "
"y z a a"
"y z a a "
"y z a a a"
"y z a a a "
"y z a a a b"
"y z a a a b "
"y z a a a b c"
"y z a a a b c "
"y z a a a b c c"
"y z a a a b c c "
"y z a a a b c c z"
" "
" z"
" z "
" z a"
" z a "
" z a a"
" z a a "
" z a a a"
" z a a a "
" z a a a b"
" z a a a b "
" z a a a b c"
" z a a a b c "
" z a a a b c c"
" z a a a b c c "
" z a a a b c c z"
"z"
"z "
"z a"
"z a "
"z a a"
"z a a "
"z a a a"
"z a a a "
"z a a a b"
"z a a a b "
"z a a a b c"
"z a a a b c "
"z a a a b c c"
"z a a a b c c "
"z a a a b c c z"
" "
" a"
" a "
" a a"
" a a "
" a a a"
" a a a "
" a a a b"
" a a a b "
" a a a b c"
" a a a b c "
" a a a b c c"
" a a a b c c "
" a a a b c c z"
"a"
"a "
"a a"
"a a "
"a a a"
"a a a "
"a a a b"
"a a a b "
"a a a b c"
"a a a b c "
"a a a b c c"
"a a a b c c "
"a a a b c c z"
" "
" a"
" a "
" a a"
" a a "
" a a b"
" a a b "
" a a b c"
" a a b c "
" a a b c c"
" a a b c c "
" a a b c c z"
"a"
"a "
"a a"
"a a "
"a a b"
"a a b "
"a a b c"
"a a b c "
"a a b c c"
"a a b c c "
"a a b c c z"
" "
" a"
" a "
" a b"
" a b "
" a b c"
" a b c "
" a b c c"
" a b c c "
" a b c c z"
"a"
"a "
"a b"
"a b "
"a b c"
"a b c "
"a b c c"
"a b c c "
"a b c c z"
" "
" b"
" b "
" b c"
" b c "
" b c c"
" b c c "
" b c c z"
"b"
"b "
"b c"
"b c "
"b c c"
"b c c "
"b c c z"
" "
" c"
" c "
" c c"
" c c "
" c c z"
"c"
"c "
"c c"
"c c "
"c c z"
" "
" c"
" c "
" c z"
"c"
"c "
"c z"
" "
" z"
"z" 
```

也很高兴知道 2 种主要类型的正则表达式（NFA 和 DFA）如何工作

来自[http://msdn.microsoft.com/en-us/library/e347654k.aspx](http://msdn.microsoft.com/en-us/library/e347654k.aspx)

> .NET（我认为也是 JAVA）是 NFA 正则表达式引擎（与 DFA 相对），当它处理特定的语言元素时，引擎使用贪婪匹配；也就是说，它尽可能多地匹配输入字符串。但它也会在成功匹配子表达式后保存其状态。如果匹配最终失败，引擎可以返回到保存状态，以便尝试其他匹配。这种放弃成功的子表达式匹配以使正则表达式中的后续语言元素也可以匹配的过程称为回溯。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-27T17:17:18.850

鉴于这些非常具体的限制（即这不是一般情况下的解决方案），这将起作用：

```
import java.util.Set;
import java.util.TreeSet;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class test {

    public static void main(String[] args) {

        String s = "y z a a a b c c z";

        Pattern p = Pattern.compile("(a )+(b )+(c ?)+");
        Set<String> set = recurse(s, p, 0);
    }

    public static Set<String> recurse(String s, Pattern p, int depth) {
        int temp = depth;
        while(temp>0) {
            System.out.print("  ");
            temp--;
        }
        System.out.println("-> " +s);

        Matcher matcher = p.matcher(s);
        Set<String> set = new TreeSet<String>();

        if(matcher.find()) {
            String found = matcher.group().trim();
            set.add(found);
            set.addAll(recurse(found.substring(1), p, depth+1));
            set.addAll(recurse(found.substring(0, found.length()-1), p, depth+1));
        }

        while(depth>0) {
            System.out.print("  ");
            depth--;
        }
        System.out.println("<- " +s);
        return set;
    }
} 
```

我有理由确定您可以对其进行调整以适用于其他情况，但是递归到匹配的字符串意味着重叠匹配（如@ahenderson 指出的那样）将不起作用。

# cocoa - 如何使用 NSCoding 对 unichar 数组进行编码

> ID：11228385
> 
> 赞同：1
> 
> 时间：2012-06-27T14:21:50.497
> 
> 标签：cocoa, nscoding, nscoder

我的自定义对象包含一组`unichar`原语。但是 NSCoder 中没有`encodeUnichar:ForKey`方法。我的解决方案是将我的二维`unichar`数组转换为一个`NSString`然后对其进行编码。

但是，缺少对字符进行编码的方法让我觉得我错过了一些明显的东西，尤其是因为我在 Stack Overflow 上找不到答案。

在我开始我的 NSString 方法之前，有谁知道是否有一种更简单的方法可以在 NSCoding 协议中内置？

谢谢李。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:27:26.767

固定大小数据的 AC 数组最好使用`encodeBytes:length:forKey:`. 有关完整详细信息，请参阅[编码和解码 C 数据类型](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Archiving/Articles/codingctypes.html)。

# java - 在另一个 Task Java 中调度任务

> ID：11228386
> 
> 赞同：0
> 
> 时间：2012-06-27T14:21:50.910
> 
> 标签：java, scheduled-tasks, executorservice

我开发了一个程序，每两分钟调用一次 db 来检查新任务

```
public static void main(String[] args) {
ScheduledExecutorService scheduler =     Executors.newSingleThreadScheduledExecutor();
scheduler.scheduleWithFixedDelay(new ESMSCampaignTask(), 0, 2, TimeUnit.MINUTES);
} 
```

现在从数据库检查代码并执行线程

```
public void run() {

    ExecutorService execService = Executors.newFixedThreadPool(5);

    List<ScheduledCampaigns> scheduledCampaignsList =   campaignsService.getScheduledCampaigns();

    for (ScheduledCampaigns campaign : scheduledCampaignsList) {

        String cmpName = "SCH_CAMPAIGNS_" + campaign.getCampaign_id();

        execService.execute(new Runnable() {
            public void run() {
                smppService.submitShortMessage(campaign);
            }
        });

    }//EO For Loop

}//EO Run 
```

我正在寻找的解决方案是如何获得上述线程的完成状态，以便相应地更新数据库？

我试图 execService.awaitTermination(500, TimeUnit.SECONDS);

但是在现有线程完成任务之前，我将无法启动新线程。

所以解决方案应该提供这样的功能，我可以在每两分钟后启动新线程而无需等待现有线程完成，同时我继续获取线程完成的状态，因此我相应地更新数据库。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:34:21.673

如果你使用`ExcecutorService.submit()`而不是`execute`，你可以得到一个`Future`对象。将其存储在一个向量中，然后您可以遍历该向量中的项目以检查它们的完成状态。

```
/**  keep track of currently running tasks */
Vector runningTasks<Future> = new Vector<Future>();

public void run(){
  for (ScheduledCampaigns campaign : scheduledCampaignsList) {

    String cmpName = "SCH_CAMPAIGNS_" + campaign.getCampaign_id();

    Future f = execService.submit(new Runnable() {
        public void run() {
            smppService.submitShortMessage(campaign);
        }
    });
    runningTasks.add(f);

  }//EO For Loop

  // which tasks have just completed?
  Vector<Future> justCompletedTasks = new Vector<Future>();

  // check currently executing tasks
  for (Future task : runningTasks){
   if( task.isDone() || tasks.isCancelled() ){
      justCompletedTasks.add(task);
   }
  } // EO check executing tasks

  // remove completed tasks from current list
  runningTasks.removeAll(justCompletedTasks);
} // EO run 
```

抱歉，这是未经测试的，但希望这个想法有用吗？

# android - Android 浏览器默认缩放问题

> ID：11228388
> 
> 赞同：0
> 
> 时间：2012-06-27T14:21:53.880
> 
> 标签：android, css, mobile

我有一个为桌面响应构建的网站，并使用媒体查询为各种移动尺寸加载额外的样式表。我有一个为 iPad 构建的样式表，其加载宽度在 768 像素到 1024 像素之间，效果很好，我也有一个为 iPhone 加载了 320 像素到 480 像素之间的表单，这也很好。我有第三张表加载在这两者之间，用于 Android，这就是我的麻烦所在。经过一些调整后，我让它在 Android 上几乎可以完美加载，只是它太放大了。缩小可以为您提供预期的视图，但是通过元标记调整缩放和像素密度等内容没有用，而且通常会造成更多麻烦.

到底是怎么回事？？

# c# - 将数据库连接字符串放在 .resx 文件中

> ID：11228389
> 
> 赞同：1
> 
> 时间：2012-06-27T14:21:58.167
> 
> 标签：c#, .net, c#-4.0

我们可以将数据库连接字符串放在 C# 类库项目类型的 .resx 文件中吗？如果是这样，有什么优点和缺点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:26:50.817

您可以将任何您想要的内容放入 resx 文件并读回，这应该没有任何问题。就优势而言，与将其放入应用程序配置文件相比，您不会从中获得任何优势。相反，访问字符串变得更加麻烦，并且您无法在运行时更改它们。

一般来说，我认为将连接字符串放入 resx 和使用编译时常量将其编译到代码中几乎没有区别。

不用说，带有密码的字符串永远不应该作为纯文本进入 config 或 resx 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:26:19.883

我们当然可以。这个问题是资源文件被编译成一个程序集，所以你不能在不重新编译项目的情况下覆盖该值。所以我建议使用配置文件而不是资源文件来配置连接字符串等配置参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:29:42.277

我们可以放置 -> 是的。它只是一个字符串，

优点 -> 1\. 本地化（并非所有数据库都支持所有文化的全球化，但我仍然看到不同语言的用户名/密码） 2\. 密码可以加密/混淆

缺点 1.修改需要重新编译。（这是可以在配置文件中设置它们的基本原因）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:28:01.470

您可以将任何字符串放在 resx 文件中，因此可以将 db 连接信息放在那里。[将它放在app.config 文件](http://msdn.microsoft.com/en-us/library/ms254494%28v=vs.80%29.aspx)中更为习惯。

# asp.net-mvc - 在另一个列表中编辑可变长度列表

> ID：11228390
> 
> 赞同：2
> 
> 时间：2012-06-27T14:21:59.860
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-binding, variable-length

可以修改 Steven Sanderson 的方法[以](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)在另一个可变长度集合中编辑一个可变长度集合，**而不需要肮脏的黑客攻击**吗？

问题在于，当另一个集合中有一个集合时，子项中字段的前缀在 Steven 的方法中省略了父集合前缀（更重要的是索引）。

**假设我知道父集合的名称，我可以将它传递给子集合**，但我无论如何都看不到将父项的索引传递给子字段，尽管它在页面中可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:31:55.553

我想你会发现这很有帮助。

[http://www.joe-stevens.com/2011/06/06/editing-and-binding-nested-lists-with-asp-net-mvc-2/](http://www.joe-stevens.com/2011/06/06/editing-and-binding-nested-lists-with-asp-net-mvc-2/)

干杯

# entity-framework-4 - 通用存储库与 ObjectSet

> ID：11228393
> 
> 赞同：3
> 
> 时间：2012-06-27T14:22:14.513
> 
> 标签：entity-framework-4, repository, objectset

博客圈似乎有一个共同的共识，即 Entity Framework 4 的一大特点是能够在通用 ObjectSet 之上创建通用存储库。通用存储库的示例实现基本上是围绕 ObjectSet 的包装器，它只是转换方法调用。没有有意义的逻辑在发生。经过一番思考后，我开始问自己：通用存储库给我带来了什么好处，而 ObjectSet 本身还没有提供？ObjectSet 具有所有必需的功能 (CRUD)。因为它实现了 IEnumerable（甚至是 IQueryable），它提供了所有的 Linq 扩展，可以很容易地准确地指定你想要的数据。究竟是什么证明了通过一些 IRepository 绕道而行，

谢谢并恭祝安康，

彼得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:53:37.433

实现存储库模式的原因是为了使模拟数据源更容易进行自动化单元测试。

如果您的模型上下文实现了一个接口（例如 IRepository），并且您的业务逻辑类允许通过构造函数（依赖注入）传入 IRepository 对象，则单元测试可以创建自己的 IRepository 数据对象并将它们传递给单元测试。这意味着您可以在没有数据库支持的情况下进行单元测试，这比针对外部数据库进行测试更简单、更可靠。

# jquery - Internet Explorer 中的 Jquery“this”

> ID：11228394
> 
> 赞同：0
> 
> 时间：2012-06-27T14:22:16.360
> 
> 标签：jquery, html, internet-explorer

我在下面的代码中遇到了一些 IE 问题：

```
var energia = $(".energia").html().replace("%", "");
var guias = $(".guias").html().replace("%", "");
var pavim = $(".pavim").html().replace("%", "");
var rede_a = $(".rede_agua").html().replace("%", "");
var rede_d = $(".rede_drena").html().replace("%", "");
var total = $(".total").html().replace("%", "");

$('div.progresso').css({ backgroundPosition: "0px 85px" });
$('div.progresso').bind('mouseover', function() {
    var fclass = $(this).attr("class");
    switch (fclass) {
        case (fclass = "progresso energia"):
            $(this).stop().animate({ backgroundPosition: "(0px " + energia + "px)" }, { duration: 500 });
            break;
        case (fclass = "progresso guias"):
            $(this).stop().animate({ backgroundPosition: "(0px " + guias + "px)" }, { duration: 500 });
            break;
        case (fclass = "progresso pavim"):
            $(this).stop().animate({ backgroundPosition: "(0px " + pavim + "px)" }, { duration: 500 });
            break;
        case (fclass = "progresso rede_agua"):
            $(this).stop().animate({ backgroundPosition: "(0px " + rede_a + "px)" }, { duration: 500 });
            break;
        case (fclass = "progresso rede_drena"):
            $(this).stop().animate({ backgroundPosition: "(0px " + rede_d + "px)" }, { duration: 500 });
            break;
        default:
            fclass = null;
            break;
    }
}); 
```

这里是 HTML：

```
<div class="ball ball_energia grande bold"><div class="progresso energia">10%</div></div>
    <div class="ball ball_guias grande bold"><div class="progresso guias">10%</div></div>
    <div class="ball ball_pavim grande bold"><div class="progresso pavim">30%</div></div>
    <div class="ball ball_rede_agua grande bold"><div class="progresso rede_agua">90%</div></div>
    <div class="ball ball_rede_drena grande bold"><div class="progresso rede_drena">80%</div></div>
    <div class="ball_maior grande2 bold"><div class="progresso_maior total">50%</div></div> 
```

该函数必须在其各自的 div 中捕获每个数字并对待自己执行我调用的函数，该函数必须将每个 div 与其数字分开并为它们分别更改背景的位置。

在 chrome 和 firefox 中，该功能运行良好，但在 IE 中，它不起作用并且它作为单个数字运行.. 我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:38:48.867

这是 HTML5 数据属性的一个很好的用例。jQuery 已经对这些值提供了支持，因此您也可以使用较旧的用户代理。

你最终得到的是更清晰的代码：

**HTML 标记**

```
<div class="ball ball_energia grande bold">
    <div data-position="energia" data-position-value="10%" class="progresso">
        10%
    </div>
</div> 
```

注意`data-position-value`我放在元素上的属性。我还包含了一个`data-postition`属性，但我们不会在示例中使用它，因为现在`switch`根本不需要 。

**Javascript**

```
$('div.progresso').bind('mouseover', function() {
    var value= $(this).data("position-value");
    $(this).stop().animate({ backgroundPosition: "(0px " + value + "px)" }, { duration: 500 });

    // for testing, output the value being used
    $('#display').html(value);
}); 
```

在此代码块中，我们使用该`data()`方法从元素中提取所需的值。然后，我们可以使用通用的脚本行将背景更改为所需的位置。

看看它在行动：http: [//jsfiddle.net/Mrra3/](http://jsfiddle.net/Mrra3/)

**文档**

*   `data-`MDN上的全局属性（参见 部分） - [https://developer.mozilla.org/en/HTML/Global_attributes](https://developer.mozilla.org/en/HTML/Global_attributes)
*   `element.dataset`在 MDN - [https://developer.mozilla.org/en/DOM/element.dataset](https://developer.mozilla.org/en/DOM/element.dataset)
*   jQuery `data`- [http://api.jquery.com/data/](http://api.jquery.com/data/)

# javascript - 模糊整个页面 - 鼠标悬停显示内部非模糊的圆圈

> ID：11228399
> 
> 赞同：1
> 
> 时间：2012-06-27T14:22:33.430
> 
> 标签：javascript, jquery, css

我已经为我的个人网页制定了这个很酷的想法。

我基本上只是想模糊其中的`<body>`一切。

**鼠标悬停 - 鼠标出现一个圆圈，内部不模糊**。

 **任何简单的 JS / jQuery 或 CSS 解决方案？

*在圆圈内轻松切换缩放会很酷；但可以没有。*

（类似于这张照片： http: [//medialoot.com/images/thumbs/640x440x1_Parallax_Wordpress_Theme_Preview31.jpg](http://medialoot.com/images/thumbs/640x440x1_Parallax_Wordpress_Theme_Preview31.jpg)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:29:55.950

只是几个想法：

这个小提琴做了你建议的事情：http: [//jsfiddle.net/jamygolden/CGFBT/2/light/](http://jsfiddle.net/jamygolden/CGFBT/2/light/)

您必须修改悬停效果，使其仅使鼠标下方的元素不模糊。

对于图像，您可以为每个图像制作一个精灵，其中包括一个模糊和聚焦的版本，当您悬停时会翻转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:29:04.863

之前这里有几个关于这个的话题，简短的回答是“不，不容易，即使是艰难的方式也不太可能达到你在 100% 之后的效果”。我认为鼠标悬停部分将是痛苦的部分。

[高斯模糊 onHover 使用 jQuery](https://stackoverflow.com/questions/1966949/gaussian-blur-onhover-using-jquery)

[整个网页的模糊效果](https://stackoverflow.com/questions/6267067/blur-effect-on-the-entire-webpage) 这个有一些不错的链接**

# r - 设置打印的默认小数位数

> ID：11228403
> 
> 赞同：7
> 
> 时间：2012-06-27T14:22:49.473
> 
> 标签：r, decimal

我正在运行代码来生成输出，我希望所有输出都以小数点后 1 位打印。然而，代码使用了我通常使用的函数，我不想在这些函数中指定打印输出是四舍五入的。

这个问题的答案[Formatting Decimal places in R](https://stackoverflow.com/questions/3443687/formatting-decimal-places-in-r)建议使用`options(digits=2)`or `round(x, digits=2)`。

第一个选项是一般设置，非常适合四舍五入`1.234`，`1.2`但会打印`12.345`为`12`

如果放在函数中，第二个选项会起作用，但我不想碰它们。这个一般怎么设置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T14:57:35.773

你可以这样做：

```
print <- function(x, ...) {
    if (is.numeric(x)) base::print(round(x, digits=2), ...) 
    else base::print(x, ...)
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T16:35:50.607

我喜欢`formatC`打印具有指定小数位数的数字。这样，`1`应始终打印为`"1.0"`when`digits = 1`和`format = "f"`. 您可以为 numeric 类的对象创建 S3 打印方法，如下所示：

```
print.numeric<-function(x, digits = 1) formatC(x, digits = digits, format = "f")

print(1)
# [1] "1.0"

print(12.4)
# [1] "12.4"

print(c(1,4,6.987))
# [1] "1.0" "4.0" "7.0"

print(c(1,4,6.987), digits = 3)
# [1] "1.000" "4.000" "6.987" 
```

# c++ - 地址减法值总是12？变量的大小很小吗？

> ID：11228404
> 
> 赞同：5
> 
> 时间：2012-06-27T14:22:50.080
> 
> 标签：c++, c, assembly, integer, size

我目前正在使用 C、C++ 和 ASM。我可以看到 ebp 减法值之间总是有 12 的差异。我的反汇编代码：

代码：

```
int main()
{
    int abc = 10;
    int def = 20;
    short int a = 1;
    long int b = 1000;

    //PlayFloat();

    GetValue();
    return 0;
} 
```

已拆线：

```
 push        ebp  
 mov         ebp,esp  
 sub         esp,0F0h  
 push        ebx  
 push        esi  
 push        edi  
 lea         edi,[ebp+FFFFFF10h]  
 mov         ecx,3Ch  
 mov         eax,0CCCCCCCCh  
 rep stos    dword ptr es:[edi]  
    ;int abc = 10;
 mov         dword ptr [ebp-8],0Ah  
    ;int def = 20;
 mov         dword ptr [ebp-14h],14h  
    ;short int a = 1;
 mov         eax,1  
 mov         word ptr [ebp-20h],ax  
    ;long int b = 1000;
 mov         dword ptr [ebp-2Ch],3E8h  

    ;//PlayFloat();

    ;GetValue();
 call        004110EB  
    ;return 0;
 xor         eax,eax 
```

但为什么？Int 占用 4 个字节，short 仅 2 个字节。那么为什么会有 12 的差异呢？请帮忙。

**编辑：** 在已发布的 asm 代码中似乎是相同的。我已经在设置中设置了。

```
_TEXT   SEGMENT
_b$ = -44                       ; size = 4
_a$ = -32                       ; size = 2
_def$ = -20                     ; size = 4
_abc$ = -8                      ; size = 4
_main   PROC                        ; COMDAT

; 18   : {

    push    ebp
    mov ebp, esp
    sub esp, 240                ; 000000f0H
    push    ebx
    push    esi
    push    edi
    lea edi, DWORD PTR [ebp-240]
    mov ecx, 60                 ; 0000003cH
    mov eax, -858993460             ; ccccccccH
    rep stosd

; 19   :    int abc = 10;

    mov DWORD PTR _abc$[ebp], 10        ; 0000000aH

; 20   :    int def = 20;

    mov DWORD PTR _def$[ebp], 20        ; 00000014H

; 21   :    short int a = 1;

    mov eax, 1
    mov WORD PTR _a$[ebp], ax

; 22   :    long int b = 1000;

    mov DWORD PTR _b$[ebp], 1000        ; 000003e8H

; 23   : 
; 24   :    //PlayFloat();
; 25   : 
; 26   :    GetValue();

    call    _GetValue

; 27   :    return 0;

    xor eax, eax

; 28   : }

    pop edi
    pop esi
    pop ebx
    add esp, 240                ; 000000f0H
    cmp ebp, esp
    call    __RTC_CheckEsp
    mov esp, ebp
    pop ebp
    ret 0
_main   ENDP
_TEXT   ENDS 
```

如您所见，还有 12 的差异。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T14:35:49.680

这是调试代码。变量之间的空间用 0CCCCCCCCh 填充以检测例如缓冲区溢出。

我相信你不会在发布版本中看到这一点。但是您必须实际使用这些变量，因此它们不会在发布版本中被优化掉。

# ruby-on-rails-3 - 如何将原始 html 字符串属性嵌入到 .hamlc 模板中？

> ID：11228405
> 
> 赞同：2
> 
> 时间：2012-06-27T14:22:50.680
> 
> 标签：ruby-on-rails-3, backbone.js, client-side-templating, hamlc

目前我有带有rails后端的骨干RIA。我正在使用 haml_coffee_assets gem 进行客户端模板。但我想念那里的rails view helpers。

我决定将原始 html 字符串添加到我的主干模型中。所以，我的咖啡脚本中有这种对象

```
Object
  avatar: "/avatars/small/missing.png"
  avatar_link: "<a href="/users/ortepko" class="author" id="user-nick-76"><img src="/avatars/small/missing.png" width="32" /></a>"
  humanized_messages_number: "1 Message "
  id: 76
  login_name_link: "<a href="/users/ortepko" class="author" id="user-nick-76">ortepko</a>" 
```

我的模板代码变得非常简单

```
.text_content
  .comment
    = @contact.avatar_link
    .text
      = @contact.login_name_link
      .messages
        %a{href: '#'}
          = @contact.humanized_messages_number 
```

现在我想渲染一个模板

```
JST['messages/yet_another_template'] {contact: contact} 
```

但它似乎不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T12:15:46.167

我在这里找到了答案： [Coffee HAML (.hamlc) 中的部分](https://stackoverflow.com/questions/9201593/partials-in-coffee-haml-hamlc)

我的模板应该看起来像

```
.text_content
  .comment
    != @contact.avatar_link
    .text
      != @contact.login_name_link
      .messages
        %a{href: '#'}
          = @contact.humanized_messages_number 
```

感谢 Netzpirat！

# neural-network - 神经网络精度

> ID：11228407
> 
> 赞同：1
> 
> 时间：2012-06-27T14:22:54.707
> 
> 标签：neural-network

我想知道神经网络是否能够回归值非常接近的目标值。例如：

```
input [100 150 200 300]
output [0.99903 0.99890 0.99905 0.99895] 
```

还是应该处理输出或目标数据？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:35:46.933

神经网络输入/输出值的三个规则：

1.  规范化您的数据。
2.  规范化您的数据。
3.  [规范化](http://en.wikipedia.org/wiki/Normalization_%28statistics%29)您的数据。

尝试对数据进行一些归一化方案，然后查看输出点之间的距离。当然，不要忘记对输入也这样做。

[如果您的数据有多个维度， PCA](http://en.wikipedia.org/wiki/Principal_component_analysis)也会很有帮助，但这些数据是一维的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:38:58.250

kwatford 是对的，规范化你的数据！

理论上，神经网络可以学习这样的目标。但我们正在研究具有不精确实数表示的真实计算机。现在，想想这个：你训练你的神经网络，在训练期间，当前的预测是这样的：

> 输入 [100 150 200 300]
> 
> 输出 [0.99905 0.99890 0.99903 0.99895]

我只是翻转了 100 和 200 的结果。因此，误差平方和将为 4e-10。添加到神经网络权重的值会更小。当您使用单精度浮点数时，您已经遇到了这个数字的问题。GNU Octave 中的一个示例演示了这一点：

```
single(0.99905)+single(1e-10)
ans =  0.99905 
```

这意味着在大多数 ANN 实现中，这是不可能的，或者：标准化您的数据。:)

# c# - 如何向 CodeContracts 证明 while 循环后的条件为真

> ID：11228414
> 
> 赞同：0
> 
> 时间：2012-06-27T14:23:31.833
> 
> 标签：c#, .net, code-contracts

我正在尝试使用 CodeContracts。我从一个小功能开始

```
public static string MyTrim(string text)
{
    Contract.Requires(text != null);
    Contract.Ensures(Contract.Result<string>().Length == 0 || Contract.Result<string>()[0] != ' ');
    var sCurrent = text;
    while (sCurrent.Length != 0 && sCurrent[0] == ' ')
    {
        sCurrent = sCurrent.Substring(1);
    }
    return sCurrent;
} 
```

Code Contracts 对我说我没有证明 Ensures。但是在while循环之后，我知道条件是错误的。所以我知道

```
Scurrent.Length == 0 || Scurrent[0] != ' ' 
```

这正是我的保证条件。我能做些什么来向代码合同解释这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T22:40:49.313

我已经研究了您的示例中发生的情况，这只是由于析取循环条件而导致的静态检查器的限制。我们会努力解决这个问题。

# google-maps - 为什么我的 Google 地图是“Hello world”？页面显示为空？

> ID：11228417
> 
> 赞同：0
> 
> 时间：2012-06-27T14:23:37.667
> 
> 标签：google-maps, google-maps-api-3, boilerplate

我在下面有我的页面的来源；我尝试将 Google Maps 加载到 Boilerplate 3 中，并且得到一个没有 JavaScript 错误的空白页面。如何改进？

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title></title>
  <meta name="description" content="">

  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/style.css">

  <script src="js/libs/modernizr-2.5.3.min.js"></script>
  <style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0; padding: 0 }
    #map_canvas { height: 100%, width: 100% }
  </style>
</head>
<body>
  <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
  <header>

  </header>
  <div role="main">

    <div id="map_canvas">
    </div>

  </div>
  <footer>

  </footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')</script>

  <script src="js/plugins.js"></script>
  <script src="js/script.js"></script>

<script>

function initialize()
    {
    var myoptions = {
        zoom: 4,
        center: new google.maps.LatLng(42.881944, -87.627778),
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };
    var map = new google.maps.Map(document.getElementById('map_canvas'),
    myoptions);

    }

function load_script()
    {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "http://maps.google.com/maps/api/js?key=AIzaSyAi288X8h9Y4fXM21Q0-my6O6kiLaDeC7M&sensor=false&callback=initialize";
    document.body.appendChild(script);
    }

window.onload = load_script;
</script>
</body>
</html> 
```

- 编辑 -

我从 Google 的示例中拼凑的代码首先开始绘制地图，然后擦拭屏幕并说我的密钥不能用于它：

```
<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAi288X8h9Y4fXM21Q0-my6O6kiLaDeC7M&sensor=true">
    </script>
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>
</head>
<body onload="initialize();">
<script>
function initialize() {
  var myOptions = {
    zoom: 8,
    center: new google.maps.LatLng(-34.397, 150.644),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"),
myOptions);
}

function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src =
"http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=false&callback=initialize";
  document.body.appendChild(script);
}

window.onload = loadScript;
</script>
<body>
<div id="map_canvas" style="width: 100%; height: 100%"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:35:38.360

定义 map_canvas div 的宽度。

# php - .htaccess，将语言代码重写为 PHP 变量

> ID：11228418
> 
> 赞同：1
> 
> 时间：2012-06-27T14:23:38.380
> 
> 标签：php, regex, .htaccess, mod-rewrite

我试图在这里找到一些例子，但它们都不适合我。我是一个使用 RE 的新手

我需要一些关于 .htacess > RewriteRule 的帮助。我怎么能做到这一点？

```
www.mysite.pt/folder/?a=home&id=22 -> www.mysite.pt/folder/index.php?lang=pt&a=home&id=22

www.mysite.pt/folder/en/?a=home&id=22 -> www.mysite.pt/folder/index.php?lang=en&a=home&id=22 
```

**笔记：**

*   有和没有“www”

*   ?a=home&id=22 只是一个例子，我想附加
    整个查询字符串。

*   在我发布网站之前需要“文件夹”，因为我必须
    在我的客户端服务器上测试它（例如 www.mysite.pt/site_v2/）。

在此先感谢您的帮助，

佩德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:03:18.337

您只想支持 EN 和 PT 吗？

我还希望你有很多图像、CSS、文件等。你也想要这些的 EN 和 PL 版本吗？无论如何，让我们现在专注于脚本。在这里，您要获取 URI `/somefolder/en/`，然后 `/somefolder/`。如果您使用的是 DOCroot，`.htaccess`那么您将需要这个：

```
RewriteEngine On
RewriteBase   /

RewriteRule   ^(.*?)/en/$   $1/en/index.php?lang=en  [L,NS,QSA]
RewriteRule   ^(.*?)/$      $1/pl/index.php?lang=pt  [L,NS,QSA] 
```

[在mod_rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)中查找 L、NS、QSA 标志。你需要 NS 标志来阻止子查询咬你。QSA 标志将该`lang`参数与查询列表的其余部分合并。

如果您想要一个固定文件夹，则将`(.*?)`and替换`$1`为固定文件夹名称。还要记住，您的 HTML 引用也需要正常工作。例如，如果一个页面包含一个图像`src="images/mygif.gif"`，那么这将要么`<same directory as HTML file>/images/mygif.gif`从浏览器的角度解析，例如，`/folder/en/images/mygif.gif`所以你需要弄清楚在哪里映射这些图像并添加相应的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:36:15.373

我主要可以帮助你解决正则表达式。我过去做了一些 htaccess 干预，但不知道细节。

**www.mysite.pt/folder/?a=home&id=22 => www.mysite.pt/folder/index.php?lang=pt&a=home&id=22**

```
regex
(www\.)?mysite\.pt/folder/\?(.*)
replace with
www.mysite.pt/folder/index.php?lang=pt&$1 
```

**www.mysite.pt/folder/en/?a=home&id=22 => www.mysite.pt/folder/index.php?lang=en&a=home&id=22**

```
regex
(www\.)?mysite\.pt/folder/en/\?(.*)
replace with
www.mysite.pt/folder/index.php?lang=en&$1 
```

我记得您指定重写规则的顺序很重要，AFAIK 第一个获胜。

为什么？可能是多个正则表达式匹配

这两个正则表达式不是这种情况，而是需要注意的事情

# css - 右浮动跨度似乎不在父 div 中

> ID：11228427
> 
> 赞同：2
> 
> 时间：2012-06-27T14:24:24.757
> 
> 标签：css

我试图在我的消息栏中浮动一个跨度。出于某种原因，在我的网页上，右侧的浮动跨度在视觉上显示在 div 下方。在 JS fiddle 中它看起来不错。是什么推动了它？

示例：http: [//jsfiddle.net/g6wWB/](http://jsfiddle.net/g6wWB/)

html:

```
<div class="msg">
    Some thext here
    <span class="goright">Close</span>
</div> 
```

CSS：

```
.msg {
    background-color: green;
}

.goright {
    float:right;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T14:26:54.423

我相信这只是 IE7 及以下内容本身将浮动元素向下推的问题。在现代浏览器中，它不应该被按下。但是要解决这个问题，将浮动跨度放在内容应该可以工作之前。

```
<div class="msg">
    <span class="goright">Close</span>
    Some thext here
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:33:35.497

另一种可能的解决方案是，如果您想完全控制 的放置，`span`则使用绝对定位。

```
.msg {
    background-color: green;
    position: relative;
}

.goright {
    position: absolute;
    right: 0;
    top: 0;
}​ 
```

这样，无论内容多少，无论div内元素的顺序如何，都不会被下推。

# sql - SQL查询：选择值低于阈值的最后一条记录

> ID：11228432
> 
> 赞同：2
> 
> 时间：2012-06-27T14:24:35.717
> 
> 标签：sql, database, sybase

给定这个示例数据集：

```
-----------------------------
| item   | date       | val |
-----------------------------
| apple  | 2012-01-11 |  15 |
| apple  | 2012-02-12 |  19 |
| apple  | 2012-03-13 |   7 |
| apple  | 2012-04-14 |   6 |
| orange | 2012-01-11 |  15 |
| orange | 2012-02-12 |   8 |
| orange | 2012-03-13 |  11 |
| orange | 2012-04-14 |   9 |
| peach  | 2012-03-13 |   5 |
| peach  | 2012-04-14 |  15 |
----------------------------- 
```

我正在寻找对于每个**项目**的查询，它将选择**val**低于**CONST=10的第一个****日期**，之后不再返回。在这个例子中，这将是：

 ****```
-----------------------------
| item   | date       | val |
-----------------------------
| apple  | 2012-03-13 |   7 |
| orange | 2012-04-14 |   9 |
----------------------------- 
```

这甚至可以不使用游标吗？我在 Sybase 中寻找这个。

如果没有游标这是不可能的，我可以用编程语言处理记录。然而，在那种情况下，由于在我的真实用例中完整的历史很长，我需要一个“合适的”查询，它只选择“足够”的记录来计算我最终想要的记录：**val**低于**CONST**的最新记录没有回到它上面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:55:56.550

这将返回详细的结果集。

```
select tablename.* from tablename
inner join 
(
    select tablename.item, min(tablename.[date]) as mindate 
                from tablename
        inner join (
                        select 
                             item, 
                             max([date]) lastoverdate 
                        from tablename 
                        where val>@const 
                        group by item
                               ) lastover
        on tablename.item = lastover.item
        and tablename.[date]> lastoverdate
    group by tablename.item
) below
    on tablename.item = below.item
    and tablename.date = below.mindate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:24:19.453

对于 MySql：

```
select t.item, t.date1, t.val
from 
(
  select min(date) date1, item from tablename  t
  where not exists (select 1 from tablename where item = t.item 
                    and date1 > t.date1 and val >= 10)
and val < 10
  group by item
) a
inner join 
@t t
on a.item = t.item and a.date1 = t.date1 
```

对于不同的数据库，例如 MS-sql 2005+：

```
select item, date, val from 
(
  select *, row_number() over (partition by item order by date) rn
  from tablename t
  where not exists (select 1 from @t where item = t.item and 
                    date > t.date and val >= 10)
  and val < 10
) a where rn = 1 
```****

# facebook - 2 种不同类型的用户 facebook 访问令牌？

> ID：11228433
> 
> 赞同：0
> 
> 时间：2012-06-27T14:24:36.420
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

我已经设置了一个 facebook 应用程序，因此人们可以使用图形 api 将我网站上的内容直接发布到 facebook。

我请求离线访问和 manage_pages 以便他们不必登录到 facebook，而只需登录到我的网站。

我还设置了发布到他们直接从网站管理的粉丝页面的功能。

这两件事绝对有效，因为我有一个粉丝页面，并且我在我的网站上授权了它，并且能够直接从我的网站向它发布内容。

问题是，当我将访问令牌发送到 facebook /accounts?access_token=XXX 时，即使某些用户确实在管理，也没有返回任何内容（他们向我发送了一个屏幕截图，显示他们是页面的管理员）

看着访问令牌，我注意到我的看起来像（这是假的）：

200785063253279|561ec27497172e3ddvs32dsc.1-10002342352350235|kB2_OoBtsgscsVW2mKMijfNdvb0

而有问题的用户有一个访问令牌，例如（再次 - 假的）：

AAAC2nOrFTH0BAJjMgS3h22ADhirwsfweRT35235LGcZCGisrefwae5tSF535DGlLKJOIBMnrMnI324sfasdSFOIjo325sIigfWOE1aNbvd8wAZD

我不禁注意到两者之间的巨大差异。有原因吗？这就是为什么当我向 facebook 发送请求时我没有得到任何页面信息的原因吗？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:57:16.273

第一个访问令牌是旧的访问令牌格式，第二个访问令牌是新的访问令牌格式。

这种新格式在一年前宣布： [https](https://developers.facebook.com/blog/post/497/) ://developers.facebook.com/blog/post/497/ 并于去年九月推出： [https ://developers.facebook.com/blog/post/2011/09/09 /平台更新--运营-开发者-爱/](https://developers.facebook.com/blog/post/2011/09/09/platform-updates--operation-developer-love/)

您从系统获得的任何新访问令牌都将采用新格式。

# javascript - 读取 iframe 内容并将它们存储在变量中

> ID：11228434
> 
> 赞同：0
> 
> 时间：2012-06-27T14:24:39.243
> 
> 标签：javascript, jquery, iframe

我有一个 iframe，可以说它包含以下文本：

`<h1> Hello World</h1><h2>Good Morning</h2>
<h3>Try this http://www.google.com</h3></body></html>`

我想阅读上面找到的链接并访问它。任何的想法？我无法使用控制台执行此操作，因为我需要从此页面获取 cookie

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:29:13.670

除非 iframe 与父页面属于同一域，否则您无法执行此操作。

如果是这样，您可以使用以下脚本：

```
var link = $('#iframeid').contents().find('h3').html(); //Thanks to rob for the correction 
```

然后，您只需从变量的其他文本中过滤掉链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:31:12.843

获取 iframe 的内容，即使它在您的域之外：

```
var link = $('#MyiFrame').contents().find('h3').text();
//now parse the link variable to what you need, maybe split it at :// 
//and the following space afterwards 
```

祝你好运！

# qt - Qt包括可执行文件内的资源目录结构

> ID：11228435
> 
> 赞同：1
> 
> 时间：2012-06-27T14:24:46.480
> 
> 标签：qt, qtwebkit

我正在使用 QWebView 运行 Web 应用程序。有 650 多个文件。将 Web 应用程序的目录放在源目录中不会导致可执行文件捆绑该目录。

如何包含整个 Web 应用程序目录，以便可执行文件能够呈现文件。

注意：我目前已将 index.html 添加为资源，并且可以使用 qrc:// 访问它 - 但由于我无法将整个目录结构添加到 qrc（可以吗？），可执行文件不包含其他文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:49:06.250

对于要使用 Qt 资源系统**的每个文件**，您需要将 XML 节点放入`.qrc`文件中。

 **这可以使用一个简单的预构建脚本来完成。看看[`qrcgen`](http://pyinsci.blogspot.de/2011/09/generating-qt-resource-files-from-whole.html)。引用此链接后面的博客文章：

> 我创建的脚本[qrcgen](https://github.com/fccoelho/qrcgen)采用目录和前缀，递归扫描目录并生成与扫描目录同名的**.qrc文件。**它解决了我的问题，我希望它可以帮助其他人。它也可以通过 PyPI 获得，只是“ **easy_install qrcgen** ”。

* * *

为了在`.qrc`目录内容发生更改时更新文件，您需要将此步骤包含在构建过​​程中：

*   对于**C++/Qt**项目，您可以在 QtCreator 的构建配置中添加此步骤，或者在您的 qmake 文件中添加一条`system(...)`语句。请注意，此类命令通常不可移植。（如果它不是可移植的，您可以在多个命令周围放置一些操作系统条件。）

*   对于**PyQt/PySide**项目，我不知道该怎么做，但我相信你也能找到解决方案。**

# git - 未能锁定 refs/heads/master

> ID：11228436
> 
> 赞同：23
> 
> 时间：2012-06-27T14:24:49.413
> 
> 标签：git

我对 git 比较陌生，正面临这个问题。git push 命令显示以下错误。我将从一开始就向您解释我一直在尝试做的事情。我创建了一个子模块，提交并推送它。推送会引发以下错误。

```
Salman@PC_HOME ~/git/breakit-web-app (master)
$ git push origin master
error: refs/heads/master does not point to a valid object!
Counting objects: 4, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 421 bytes, done.
Total 3 (delta 1), reused 0 (delta 0)
remote: bb/acl: salmanmanekia is allowed. accepted payload.
error: Ref refs/heads/master is at 6a47a0fd398610a75bdab8976f842dc0efd89f86 but expected 00000000000000000000000000000000000000000
remote: error: failed to lock refs/heads/master

To ssh://git@bitbucket.org/majuri/breakit-web-app.git
 ! [remote rejected] master -> master (failed to lock)
error: failed to push some refs to 'ssh://git@bitbucket.org/majuri/breakit-web-app.git' 
```

这是一个屏幕截图： ![在此处输入图像描述](../Images/e8a0a3311cc6c06938775a90cc4010a4.png)

在那之后，我尝试了一些解决方案，但都没有奏效。我还将简要解释我一直在尝试的内容。

1：从 bitbucket 存储库中，我注意到有一些悬空提交（图 2 中的红色箭头），所以我给出了以下命令来解决 git gc 和 git prune。

2：我也尝试了 git revert HEAD 和 git push origin HEAD --force 之类的命令，但似乎都没有。 ![在此处输入图像描述](../Images/574a957aed720c79a37a94ad65f2be2e.png)

其他详情：

```
$ git rev-parse --symbolic-full-name master
refs/heads/master

$ git rev-parse master
0da090c5cbde10ff19602a2722ae05231c30dff5

$ git show-ref master
0da090c5cbde10ff19602a2722ae05231c30dff5 refs/heads/master
6a47a0fd398610a75bdab8976f842dc0efd89f86 refs/remotes/origin/master 
```

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2016-05-30T12:13:41.690

您必须更新 git 已知的 HEAD。它对你来说是透明的。

1.  去`master`分行

    ```
    git checkout master 
    ```

2.  从远程获取更新到本地存储库

    ```
    git fetch 
    ```

3.  使用 rebase 而不是 merge 更新本地存储库。看看[和之间的](https://stackoverflow.com/a/37724516/2394026)[区别`git pull``git rebase`](https://stackoverflow.com/a/37724516/2394026)

    ```
    git rebase origin/master 
    ```

4.  推送你的`master`分支

    ```
    git push origin master:master 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-12T09:17:43.143

git pull origin master --rebase

这对我有用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-13T12:52:49.437

如果您尝试了上述所有步骤但均无效，请尝试以下命令。

```
rm -fr ".git/rebase-merge" 
```

# php - PHP/MySQL 调试 + 优化

> ID：11228445
> 
> 赞同：2
> 
> 时间：2012-06-27T14:25:11.297
> 
> 标签：php, mysql

我的数据库中存储了大约 100,000 个商家，该表包含他们的姓名、纬度、经度

现在我的搜索功能接受纬度/经度输入，并找到半径 10 英里内的商店。然而，这 100,000 家商户中有很多是特许经营商（即关联商店组）。对于特许经营权，我只想显示最近的商店，而隐藏同一特许经营权的其余商店（如果在 10 英里半径范围内有多个位置）。

我试过做：

```
SELECT SQL_CALC_FOUND_ROWS *, xxxxx as Distance
FROM table
WHERE isActive = 1
GROUP BY Name
HAVING Distance < 10
ORDER BY Distance ASC 
```

xxxxx 是根据输入纬度/经度计算距离的函数：

```
((ACOS(SIN('$lat'*PI()/180)*SIN(`Latitude`*PI()/180) + COS('$lat'*PI()/180)*COS(`Latitude`*PI()/180)*COS(('$long'-`Longitude`)*PI()/180))*180/PI())*60*1.1515) 
```

但是它没有返回正确的结果。与没有“GROUP BY”子句的相同查询进行比较时，无论是特许经营店还是非特许经营店，我得到的结果都要少得多。我想知道有什么问题？

而且，速度真的很慢。我有名称列索引。但我认为“GROUP BY Name”是瓶颈，因为 MySQL 必须进行大量字符串比较？假设可以修复 GROUP BY 错误，我想知道我有什么选择可以加快速度。是否值得设置一个“Business_Group”列并对商店进行预处理，以便为特许经营店分配一个 Business_Group ID，这样 GROUP BY 会更快，因为它比较 int？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:38:45.097

尝试对派生表进行分组

```
SELECT * FROM (
    SELECT *, xxxxx as Distance FROM table WHERE isActive = 1 
    HAVING Distance < 10 ORDER BY Distance ASC
) AS all
GROUP BY Name 
```

在未分组查询`HAVING`中，作为即时过滤器适用于每条记录，并`GROUP BY`适用于整个组，因此首先用所有数据填充组，然后使用`HAVING`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:46:47.423

**使用计算列**的 [视图](http://dev.mysql.com/doc/refman/5.0/en/views.html)制作虚拟表 **`xxxxx`**

 **并使用表和[视图](http://dev.mysql.com/doc/refman/5.0/en/views.html)的连接。

这将更快和优化。**

# java - 拥有类中所有者类的反向引用的java组合

> ID：11228447
> 
> 赞同：1
> 
> 时间：2012-06-27T14:25:21.020
> 
> 标签：java, composition

业主等级：

```
class University {
  List<Student> studentCollection;
  public void addStudent();
  public void removeStudent();
} 
```

拥有类：

```
class Student {
  String name;
  public void setName();
  public String getName();
} 
```

这里的大学是由学生组成的，如果我们删除大学对象，它的所有学生都应该被删除。

但我想问学生它在哪所大学？我们可以更改学生班级以获得大学的参考吗？

提议的班级

```
class Student {
  String name;
  University univRef;
  /* ... */
} 
```

这仍然是合适的组成吗？在 UML 中可以将其标记为组合吗？还是应该改成双向关联？

注意：搜索答案没有成功并且在格式化方面遇到了困难:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:28:33.670

阅读文档`java.lang.ref.*`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:35:58.203

以学生身份提及大学和从大学向所有学生提及是双向关联。它也比作文更合适，因为大学不是由学生组成的。

但请确保清楚，当您从大学中删除学生时，您也会更新该学生对大学的引用。这两个操作应该原子地完成，一定要彻底测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:30:10.840

是的，它仍然是一个组合。学生仍然归大学所有，当大学被烧毁时，他们仍然被杀。

正式地说，第一个组合（没有反向引用）在 UML 类图中建模，在 University 端有一个实心菱形，在 Student 端有一个箭头。没有后向引用的组合则以不带箭头的形式表示。然而，很多人在使用箭头时并不是很严格，使用第二种表示法也用于单向合成。

To be clear you should model it with two arrows: One with a filled diamond from the University to the Student, the other without diamond from the Student to the University.

# datasource - 如何获取 xtragrid 过滤和排序的数据源？

> ID：11228449
> 
> 赞同：1
> 
> 时间：2012-06-27T14:25:31.433
> 
> 标签：datasource, xtragrid

我有一个绑定到 bindingSource 的 xtraGrid 控件（v12.1），最后从 LINQ 到实体查询（EF4.3.1）获取其数据，最终用户可以过滤和排序 gridView，我有一个 Stimulsoft 报告，显示当用户单击 PrintListButton 时 gridView 的内容，如何获取 xtragrid 过滤和排序的数据源，以便将其附加到报告中？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:27:35.163

```
var data = GetDataView(xtraGridControl1);
report.RegData("List", data.ToTable());

        public DataView GetDataView(GridControl gc)
        {
            DataView dv = null;

            if (gc.FocusedView != null && gc.FocusedView.DataSource != null)
            {
                var view = (ColumnView)gc.FocusedView;
                var currentList = listBindingSource.List.CopyToDataTable().DefaultView; //(DataView)

                var filterExpression = GetFilterExpression(view);
                var sortExpression = GetSortExpression(view);

                var currentFilter = currentList.RowFilter;

                //create a new data view 
                dv = new DataView(currentList.Table) {Sort = sortExpression};

                if (filterExpression != String.Empty)
                {
                    if (currentFilter != String.Empty)
                    {
                        currentFilter += " AND ";
                    }
                    currentFilter += filterExpression;
                }
                dv.RowFilter = currentFilter;
            }
            return dv;
        }

        public string GetFilterExpression(ColumnView view)
        {
            var expression = String.Empty;

            if (view.ActiveFilter != null && view.ActiveFilterEnabled
                          && view.ActiveFilter.Expression != String.Empty)
            {
                expression = view.ActiveFilter.Expression;
            }
            return expression;
        }

        public string GetSortExpression(ColumnView view)
        {
            var expression = String.Empty;
            foreach (GridColumnSortInfo info in view.SortInfo)
            {
                expression += string.Format("[{0}]", info.Column.FieldName);

                if (info.SortOrder == DevExpress.Data.ColumnSortOrder.Descending)
                    expression += " DESC";
                else
                    expression += " ASC";
                expression += ", ";
            }
            return expression.TrimEnd(',', ' ');
        } 
```

# mysql - 如何表示分类的多对多数据库关系，其中类别特定于关系的一侧

> ID：11228453
> 
> 赞同：3
> 
> 时间：2012-06-27T14:25:36.730
> 
> 标签：mysql, database, many-to-many, relationship

我正在建立一个数据库来管理项目分配，而给我带来特别麻烦的一个部分是为员工分配他们正在从事的每个项目的职位。

# 要求

1.  一个员工可以同时参与多个项目
2.  一个项目有多个员工
3.  一个项目有多个职位
4.  员工在项目的一个职位下工作
5.  多个员工可以在一个项目中以相同的职位工作

我不确定如何使用表格来表示它；我想出的每个布局要么使员工能够以不同项目的职位从事项目工作，要么他们能够以两个不同的职位从事同一个项目。

# 示例图

![问题末尾的图片链接](../Images/83cfb2808cdb3a5d478b3f7c929b74b2.png)

基本上，我有三个表：

# 表

*   项目
    *   项目名称（唯一）
    *   **项目编号**
*   雇员
    *   员工姓名（唯一）
    *   **员工ID**
*   职称
    *   标题
    *   项目 ID（Title-ProjectID 唯一）
    *   **标题 ID**

然后是一个交叉引用表，称为分配。到目前为止，我为作业提出的两种方法如下：

# 示例 1

*   作业
    *   员工ID
    *   项目 ID（EmployeeID-ProjectID 唯一）
    *   标题 ID（唯一）
    *   **作业 ID**

这种方式将员工限制为每个项目一个头衔，但允许他们在分配中使用不属于该项目的头衔。

# 示例 2

*   作业
    *   员工ID
    *   职务 ID（EmployeeID-TitleID 唯一）
    *   **作业 ID**

这种方式通过职称将员工分配到项目中，因此不可能将某人分配到具有无效职称的项目中。但是，这允许将员工分配到多个头衔下的同一项目。

同样，图表可在此处获得：http: [//i.imgur.com/IbR0P.png](https://i.imgur.com/IbR0P.png)

我知道必须有一种方法可以干净地做到这一点，但我没有接受过任何真正的数据库设计方面的正式培训，除了如何建立多对多关系之外，我无法通过搜索找到任何东西，这不是这正是我需要帮助的地方。

谢谢！

*   编辑 1
    *   粗体主键字段（在图表图像中加下划线，但很难分辨，因为它们是最后一个字段）
    *   在问题中的分配表中添加了 AssignmentID（主键）（存在于设计中，在创建问题和图表时忘记包含）
*   编辑 2
    *   添加了缺失的要求 (5)
    *   添加了示例和要求的标题
*   编辑 3
    *   我现在有10个代表，所以我可以放图表！
*   编辑 4
    *   添加了唯一键的标识符（图中标识的各个唯一键，但我不知道如何在 DIA 中执行复合键）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:35:00.640

向您的表添加一个 ID 字段`Job Titles`- 我们称之为`JobTitleID`

现在你的`Assignments`桌子有`Employee ID`和`JobTitleID`。

这当然意味着，要找到员工的项目，您需要通过`Assignments`表**和**`Job Titles`表连接

**编辑**

在评论中讨论后，请忽略以上内容，我仅将其作为历史。

现在这是新版本：您的`Assignments`桌子需要（您已经考虑过）

*   员工ID
*   项目编号
*   标题 ID
*   作业 ID

但它也需要一个`UNIQUE INDEX(EmployeeID, ProjectID)`——这将使一名员工不可能以不同的头衔在**同一个项目中。**

仍然允许同一头衔下的多名员工，以及一名员工在**不同**项目中的多个头衔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:35:29.603

按照您提到的第一种方式进行。它不会将一个人限制为一个职位，您可以使用相同的 Employee ID 和 Project ID 但使用不同的 Title ID 创建另一条记录，只需使用新的 Assignment ID 作为主键。

您甚至可能想从职位表中取出项目 ID。

# android - 带有 CheckedTextView 和图标的 ListView 在 Android 2.x 设备上检查错误项目

> ID：11228455
> 
> 赞同：2
> 
> 时间：2012-06-27T14:25:43.240
> 
> 标签：android, listview, checkedtextview

我有一个 ListView，其中包含一堆具有图标、文本和复选框的项目。

列表行的布局如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
...>

    <ImageView
        android:id="@+id/list_icon"
        ... />

    <CheckedTextView
        android:id="@android:id/text1"        
            android:checkMark="?android:attr/listChoiceIndicatorMultiple"
    ... />

</LinearLayout> 
```

该列表使用以下方式填写：

```
ArrayList<HashMap<String, ?>> datalist = new ArrayList<HashMap<String, ?>>();
for (Item item : mItems) {
        HashMap<String, Object> data = new HashMap<String, Object>();
        data.put("info", item.info);
        data.put("icon", item.icon);
        datalist.add(data);
}

ListAdapter adapter = new SimpleAdapter(getContext(), datalist, R.layout.list_item,
            new String[] { "info", "icon" }, new int[] { android.R.id.text1, R.id.list_icon });

list.setAdapter(adapter);
list.setItemsCanFocus(false);
list.setOnItemClickListener(this); 
```

onItemClick 处理程序如下所示：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    CheckedTextView ctv = (CheckedTextView) view.findViewById(android.R.id.text1);
    if (ctv != null) {
        ctv.setChecked(!ctv.isChecked());
    }
} 
```

当我用三个列表项填充应用程序并单击最后一项时，在 Android 2.x 设备上，第一项将被选中，如果我再次单击，最后一项将被选中。每次我单击一个项目并且顺序似乎发生变化时，该列表都会再次填充。

我在 onItemClick 处理程序中检查了交付的 CheckedTextView 是持有我单击的项目的字符串的实际视图，但仍然检查了另一个项目。

知道这里发生了什么吗？我认为这可能是由适配器中的共享视图引起的......（convertView）。如果是这样，我该如何规避这个问题？

提前致谢。

# java - 代表该网站而不是用户在 YouTube 上发布来自 Google App Engine 网站的视频

> ID：11228462
> 
> 赞同：1
> 
> 时间：2012-06-27T14:26:01.630
> 
> 标签：java, google-app-engine, youtube

我正在寻找在 YouTube 上托管我的网站视频的解决方案。我看到的问题是，从 YouTube API 上的文档看来，视频将代表用户发布，而不是来自我的网站。

用户将成为版主，因此他们将发布内容。添加他们上传到网站的内容似乎很容易。但该视频仍归他们所有，他们可以使用自己的帐户直接将其从 YouTube 中删除。

有人可以为此建议任何API吗？有没有办法将一些帐户嵌入到 webapp 并代表该帐户发布？似乎客户端 YouTube 身份验证可以做到这一点，但它现在已经过时了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:52:01.823

基本上，YouTube（或任何其他视频托管服务）不鼓励人们代表其他人上传视频，原因有很多。其中之一是出现了很多隐私问题，如果他们要上传受版权保护的东西，你就会受到责备，因为你想签署它们，就好像你自己上传它们一样。由于他人的过错违反了 YouTube 条款和条件，您可能会冒着被禁止自己帐户的风险。

避免让用户代表他们上传视频并简单地通过您的服务为他们提供所有工具来做到这一点的最佳方法，但他们仍然以自己的名义上传视频。这也可以保护您的用户，例如，如果他们想在某一时刻删除它，他们不必要求您这样做，或者他们不确定他们是否能够控制它，因为谁拥有视频没有真正的联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:32:30.990

使用 OAuth，他们都应该使用开发人员密钥进行身份验证，因此使用相同的帐户。

[https://developers.google.com/youtube/2.0/developers_guide_protocol_authentication](https://developers.google.com/youtube/2.0/developers_guide_protocol_authentication)

# entity-framework-4 - 使用 Entity Framework 4.3 的过滤器加载导航属性

> ID：11228463
> 
> 赞同：0
> 
> 时间：2012-06-27T14:26:02.807
> 
> 标签：entity-framework-4, navigation-properties

几天前，我提出了一个[关于](https://stackoverflow.com/questions/11168505/auditing-a-table-with-ef-code-first)映射两个类`Message`和`MessageStatusHistory`使用 EF 的问题。映射进展顺利，但我`StatusHistory`在类中将导航属性`Message`与`MessageStatusHistory`对象相关联时遇到了一些问题。我只为一个用户加载消息，并且只想要与该用户有关的状态。就像我想显示用户是否将消息标记为已读/未读以及何时。如果我使用如下默认加载机制，它将加载与消息相关的所有历史记录，而与用户无关：

```
IDbSet<Message> dbs = _repo.DbSet;
dbs.Include("StatusHistory").Where(x=>x.MessageIdentifier == msgIdentifier); 
```

为了仅过滤一个用户的历史记录，我尝试了以下技巧：

```
IDbSet<Message> dbs = _repo.DbSet;
var q = from m in dbs.Include("StatusHistory")
        where m.MessageIdentifier == msgIdentifier
        select new Message
        {
            MessageIdentifier = m.MessageIdentifier,
            /*OTHER PROPERTIES*/
            StatusHistory = m.StatusHistory
                             .Where(x => x.UserId == userId).ToList()
        };

return q.ToList();//THROWING ERROR ON THIS LINE 
```

我收到错误消息：

```
The entity or complex type 'MyLib.Biz.Message' cannot be constructed in a LINQ 
to Entities query. 
```

我也尝试过发表评论`StatusHistory = m.StatusHistory.Where(x => x.UserId == userId).ToList()`，但没有帮助。

请帮助我获取过滤后的 StatusHistory 的消息。

**编辑：-**上面是用这个代码解决的：

```
var q = from m in _repository.DBSet.Include("Histories")
        where m.MessageIdentifier == id
        select new {
                     m.Id,/*OTHER PROPERTIES*/
                     Histories = m.Histories.Where(x => 
                                   x.SenderId == userId).ToList()
                   };

var lst = q.ToList();
return lst.Select(m => new Message{
           Id = m.Id, MessageIdentifier = m.MessageIdentifier, 
           MessageText = m.MessageText, Replies = m.Replies, 
           ReplyTo = m.ReplyTo, Histories = m.Histories, SenderId = 
           m.SenderId, SenderName = m.SenderName, CreatedOn = m.CreatedOn
       }).ToList(); 
```

但是，如果我尝试包含对消息的回复：

```
from m in _repository.DBSet.Include("Replies").Include("Histories") 
```

`q.ToList()`使用for将查询转换为 List 时出现错误`Histories = m.Histories.Where(x=> x.SenderId == userId).ToList()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:38:30.743

关于您的 EDIT 部分：您不能`ToList()`在投影中使用，只需将其保留`IEnumerable<T>`为 a 并`List<T>`在构建`Message`. 您也不需要创建两个列表对象，您可以使用以下命令从 LINQ to Entities 查询切换到 LINQ to Objects（第二个`Select`）`AsEnumerable()`：

```
var list = (from m in _repository.DBSet
            where m.MessageIdentifier == id
            select new {
                // ...
                Histories = m.Histories.Where(x => x.SenderId == userId)
            })
            .AsEnumerable() // database query is executed here
            .Select(m => new Message {
                // ...
                Histories = m.Histories.ToList(),
                // ...
            }).ToList();

return list; 
```

请注意，`Include`当您将投影与`select`. 您需要制作要包含投影一部分的属性 - 正如您已经对`select new { Histories....`.

# sql - SQL CONVERT 和 FLOOR 查询

> ID：11228466
> 
> 赞同：1
> 
> 时间：2012-06-27T14:26:06.460
> 
> 标签：sql, tsql, floor

这两个查询有什么区别？为什么他们给出不同的结果？

**查询 1**

```
DECLARE @test nvarchar
SET @test = CONVERT(nvarchar, FLOOR(10.5))
SELECT @test 
```

结果：

```
['1'] 
```

**查询 2**

```
SELECT CONVERT(nvarchar, FLOOR(10.5)) 
```

结果：

```
['10'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T14:28:01.583

```
DECLARE @test nvarchar 
```

那是 1 个字符长，因此会截断其分配的值；添加一个（大小）

# php - 使用 Flash 和 php 创建点对点游戏？

> ID：11228467
> 
> 赞同：-1
> 
> 时间：2012-06-27T14:26:10.217
> 
> 标签：php, mysql, ajax, web, p2p

如果我想创建一个网站，其中包含使用 actionscript 3.0 设计的台球等游戏，我可以使用 php、mySQL 和 AJAX 来实现吗？我需要它进行实时更新，例如：当一名球员投篮时，另一名球员看到它移动以及聊天功能等。我显然没有问如何做到这一点，我只是问我应该用什么语言设计网站我有一个 Flash 游戏，想以 p2p 形式启动它。

我对构建 Web 应用程序知之甚少，我只想知道我是否走在正确的轨道上。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:36:57.897

> 我可以使用 php、mySQL 和 AJAX 来实现吗？

是的你可以。

看这篇文章：[http ://coding.smashingmagazine.com/2012/05/09/building-real-time-commenting-system/](http://coding.smashingmagazine.com/2012/05/09/building-real-time-commenting-system/)

但我会使用[node.js](http://nodejs.org/)和[socket.io](http://socket.io/)进行实时通信。

# eclipse - 在 PlayN 中，如何升级到 PlayN 版本 1.3.1 而不会出现“java.library.path 中没有 lwjgl”错误？

> ID：11228471
> 
> 赞同：0
> 
> 时间：2012-06-27T14:26:25.040
> 
> 标签：eclipse, maven, lwjgl, playn

### 更新

我无法正确更新的原因是我没有正确安装游戏的 jar 文件。通过首先在命令行上运行它来解决这个问题：

```
mvn install:install-file -DgroupId=com.mygame -DartifactId=mygame-core -Dversion=0.9-beta -Dpackaging=jar -Dfile=/home/klenwell/projects/mygame/playn/mygame/java/target/mygame-java-0.9-beta.jar 
```

然后，在 Eclipse 中，我右键单击 java 文件夹 > Maven > 测试。这更新了我的所有依赖项，包括 lwjgl。

否则，请参阅[thomasbroad 的回答](https://stackoverflow.com/a/11265797/1093087)。

### 原始问题

我已经就此主题咨询了以下权威机构并应用了他们的各种建议：

*   [http://lwjgl.org/installation.php](http://lwjgl.org/installation.php)

*   [http://www.lwjgl.org/wiki/index.php?title=Setting_Up_LWJGL_with_Maven](http://www.lwjgl.org/wiki/index.php?title=Setting_Up_LWJGL_with_Maven)

*   [http://www.lwjgl.org/wiki/index.php?title=Setting_Up_LWJGL_with_Eclipse](http://www.lwjgl.org/wiki/index.php?title=Setting_Up_LWJGL_with_Eclipse)

*   [https://stackoverflow.com/a/11065814/1093087](https://stackoverflow.com/a/11065814/1093087)

*   [https://groups.google.com/forum/?fromgroups#!topic/playn/E2t7gNh4ab0](https://groups.google.com/forum/?fromgroups#!topic/playn/E2t7gNh4ab0)

*   [https://groups.google.com/d/msg/playn/3D4JZ1Dbm-E/HmPHofS2fqgJ](https://groups.google.com/d/msg/playn/3D4JZ1Dbm-E/HmPHofS2fqgJ)

部分问题是我不确定我应该遵循 Maven 说明还是 Eclipse 说明。我已经尝试了两者之间的一切。

我正在使用 Maven 在 Eclipse 上的 Ubuntu 12.04 64 位中工作。一切正常，直到我将 POM 文件中的 PlayN 版本从 1.2 更改为 1.3.1 并引入了 lwjgl 依赖项。

**我所期望的工作：**

1) 下载 lwjgl（最新版​​本 2.8.4）并按照 lwjgl.org 说明进行测试（成功）

2）更新相应的POM文件

2A) 将 lwjgl.version 作为属性添加到 mygame/pom.xml

```
 <properties>
    <playn.version>1.3.1</playn.version>
    <lwjgl.version>2.8.4</lwjgl.version>
  </properties> 
```

2B) 将 lwjgl 作为依赖项添加到 mygame/mygame-java/pom.xml

```
 <dependency>
    <groupId>org.lwjgl.lwjgl</groupId>
    <artifactId>lwjgl</artifactId>
    <version>${lwjgl.version}</version>
  </dependency> 
```

3) 在 Eclipse > Run As > Run Configurations > Arguments 中右键单击 mygame-java 项目，然后将其中一个`-Djava.library.path=target/natives`或添加`-Djava.library.path=/absolute/path/to/my/lwjgl/lib`到 VM 参数。（我已经尝试了两种变体。）

我可以在 Eclipse 中看到我的 java 项目文件夹下列出的依赖项。当我遵循 Eclipse 的 lwjgl.org 指南时，我可以看到 java 项目文件夹下列出的 jar。但我仍然得到错误。

在经历了两个小时令人头疼的挫折之后，我希望有人能指出我的致命疏忽，或者提供明确的指示来帮助我重新开始工作。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:46:34.300

不久前，我将我的项目从 1.2 升级到了 1.3。我只更新了我的`pom.xml`文件以引用新版本的 PlayN 。我没有手动安装`lwjgl`，也没有添加`lwjgl`依赖项，因为该依赖项是由 PlayN 隐式引入的

**手动将**[此处](http://code.google.com/p/playn-samples/source/detail?r=dbf7ff37d3ba0f87c912143f9f01ee4012b35a80#)找到的差异应用到您的项目，到您的 pom。

关键部分是 java pom 中告诉 Maven 解包本机依赖项的部分。这部分实际上是在之前的 diff 中添加的，所以你可能也想看看[那里](http://code.google.com/p/playn-samples/source/detail?r=21ad9a3babc277ddc13fd91903ef115f7d3e4ccc)。

现在，您的 IDE 很可能会告诉您，您的项目与您的 pom 不是最新的，请**更新您的项目**，这应该会引入`lwjgl`依赖项并正确设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:52:08.773

我相信您应该将`-Djava.library.path`参数添加到 VM Arguments，而不是运行时配置中的 Program Arguments。

另一个 -using maven- 选项在[Getting Started 页面](http://code.google.com/p/playn/wiki/GettingStarted#Running_the_imported_samples)上进行了描述，值得注意的是，默认的嵌入式 Maven 对于开发来说是错误的，你应该下载并使用至少 Maven 3.0.3，因为它在页面上提到（但我猜你已经这样做了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T04:42:25.190

我刚刚使用 PlayN 1.4 开始了一个新项目，并在 Eclipse 中再次遇到了这个问题。解决方法如下：

右键单击 mygame-java > 运行方式 > 运行配置...

然后将以下内容添加到参数选项卡下的 VM 参数中：

```
-Djava.library.path=target/natives 
```

然后成功作为应用程序运行。

在某一时刻，我还运行了`mvn install:install-file...`有问题的命令，但我不确定这是否有必要。

# actionscript-3 - Flash：你能在 Stage3D 中播放视频吗？

> ID：11228474
> 
> 赞同：0
> 
> 时间：2012-06-27T14:26:35.430
> 
> 标签：actionscript-3, flash, stage3d, starling-framework

例如，我想知道是否可以使用视频（FLV、H264 或其他任何东西......）作为纹理？

我正在构建 2D GPU 加速游戏（在 Starling Framework 的帮助下）并且需要使用 45 秒长的视频作为背景。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:46:55.880

是的，您可以使用 StageVideo。

[http://www.adobe.com/devnet/flashplayer/articles/stage_video.html](http://www.adobe.com/devnet/flashplayer/articles/stage_video.html)

[http://www.gotoandlearn.com/play.php?id=134](http://www.gotoandlearn.com/play.php?id=134)

# ruby - 动态创建哈希和数组

> ID：11228479
> 
> 赞同：0
> 
> 时间：2012-06-27T14:26:45.830
> 
> 标签：ruby, syntactic-sugar

我正在寻找解决问题的 Ruby-est 方法。

我的应用程序中有与此类似的代码：

```
data = [1,2,3,4]
a = []
b = []
h = {}
data.each do |val|
  h[val] = func1(val)
  a.push func2(val)
  b.push func3(val)
end 
```

当然，这是一种简化。给定这样的代码，我想做的是消除此代码段的第 2-4 行，以便我有类似的内容：

```
 h, a, b = data.some_func{|val|
   # do something
 } 
```

我的直觉是这`map`还不够，但我不确定我需要什么。我的代码有效，但看起来不是很红。我应该在这里做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:32:38.793

我认为我的例子不是最好的，但是......你可以决定

```
h, a, b = data.each_with_object([ {}, [], [] ]) do |val, obj|
  obj[0][val] = func1 val
  obj[1] << func2(val)
  obj[2] << func3(val)
end 
```

**编辑：除非您了解**[each_with_object](http://apidock.com/rails/Enumerable/each_with_object)，否则这很难阅读……也许您的初始解决方案是最好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:41:22.500

也许这不完全是您所要求的，但至少它是可读的：

```
data = [1,2,3,4]
h = data.each_with_object({}) { |e, m| m[e] = func1(e) }
a = data.map &method(:func2)
b = data.map &method(:func3) 
```

但是，正如您所说，您的示例是对实际任务的简化，因此它可能对您不起作用。在这种情况下，我建议保留您的原始解决方案。

# android - Achartengine 图表最初不显示

> ID：11228486
> 
> 赞同：2
> 
> 时间：2012-06-27T14:27:27.680
> 
> 标签：android, achartengine

现在我在我的 Android 项目中使用 aChartEngine 库。到目前为止，它运行良好。我不知道的一件事是如何让它最初显示。显示我的数据的唯一方法是单击并平移图表上的某处或按缩放按钮。所以最初显示的是缩放按钮，而不是图形本身。我搜索了渲染器的方法，但没有任何效果。我在创建渲染器后调用`mSeriesRenderer.setShowGrid(true);`它并且它不显示。我也尝试过，`repaint()`甚至没有工作。我在错误的时间打电话吗？

```
public void onResume()
{
    if(mMeterObs.getGraph() == null)
    {
        LinearLayout layout = (LinearLayout)findViewById(R.id.chart);
        mMeterObs.setGraph(ChartFactory.getLineChartView(this, mMeterObs.getMultipleSeries(), mMeterObs.getSeriesRenderer()));
        layout.addView(mMeterObs.getGraph(), LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        mMeterObs.repaint();
    }
    else
        mMeterObs.repaint();
} 
```

`mMeterObs.getMultipleSeries()`并且`mMeterObs.getSeriesRenderer()`一开始都是空的，但它应该仍然能够显示网格和轴，对吧？

在构造函数中`mMeterObs`我称之为：

```
mSeriesRenderer.setXLabels(12);
    mSeriesRenderer.setYLabels(10);
    mSeriesRenderer.setShowGrid(true);
    mSeriesRenderer.setXLabelsAlign(Align.RIGHT);
    mSeriesRenderer.setYLabelsAlign(Align.RIGHT);
    mSeriesRenderer.setZoomButtonsVisible(true);
    mSeriesRenderer.setRange(new double[] { 0.0, 10.0, -1.0, 1.0 });
    //mSeriesRenderer.setPanEnabled(true);
    mSeriesRenderer.setZoomLimits(new double[] { -10, 20, -10, 40 });
    mSeriesRenderer.setGridColor(Color.LTGRAY);
    mSeriesRenderer.setShowGrid(true);
    mSeriesRenderer.setShowAxes(true);
    mSeriesRenderer.setPointSize(.5f); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:12:06.260

我建议你添加一些数据系列。网格仅沿标签显示，但您没有标签。

# sql-server-2008 - SQL中的CASE语句中是否可以有多个Select语句

> ID：11228488
> 
> 赞同：0
> 
> 时间：2012-06-27T14:27:32.633
> 
> 标签：sql-server-2008, foxpro

我正在尝试将 Foxpro DB 迁移到 SQL Server。我在 Foxpro 中有一个 CASE 语句，它的工作原理是这样的。

```
CASE *variable* = 1 
    SELECT * FROM TABLEA INTO CURSOR A
CASE *variable* = 2
    SELECT * FROM TABLEB INTO CURSOR B
CASE *variable* = 3
    SELECT * FROM TABLEC INTO CURSOR C 
```

* * *

```
CASE *variable* = N
    SELECT * FROM TABLEN INTO CURSOR N 
```

有没有办法在不使用 IF 的情况下将此 CASE 语句转换为 SQL？我假设在 SQL Server CASE 中只能在 SELECT 中编写。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:29:44.580

这是你要问的：

```
SELECT * FROM IIF(var = 1, 'table1', IIF(var = 2, 'table2', 'table3')) INTO CURSOR IIF(var = 1, 'cur1', IIF(var = 2, 'cur2', 'cur3')) 
```

# jquery - 为用户选择某些复选框的按钮

> ID：11228494
> 
> 赞同：-2
> 
> 时间：2012-06-27T14:27:40.637
> 
> 标签：jquery, html, forms, checkbox

我有一个汽车制造商的清单……总共大约 70 个。我想在顶部有一组按钮，当用户单击它们时，会自动检查为它们制造的预定汽车。因此，例如，当用户选择“进口”按钮时，讴歌、本田、现代、起亚、马自达、三菱、日产、Scion、斯巴鲁、铃木、丰田和大众的复选框会被自动选中。

有人可以在这里指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:29:46.143

为每个组创建一个单独的 CSS 类并将这些类分配给适当的元素。

然后当按下相应的按钮时，在复选框上设置选中的属性。

假设每个按钮都将类`type-buttons`和 ID 属性设置为所需的`type`，即`id="imports"`.

```
$('.type-buttons').click(function(){
    var type = $(this).attr('id');
    $('input:checkbox.' + type).attr('checked','checked'); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:29:50.197

将一个类添加到您想要选择的复选框中，然后在用户单击按钮时使用该类来检查它们。就像是：

```
$('.defaultOnAcura').attr('checked', 'true'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:45:38.080

享受：http: [//jsfiddle.net/v9p5C/](http://jsfiddle.net/v9p5C/)

Toggler 按钮有一个`data-filter`属性，它指定要切换的内容：

```
<input type="button" data-filter='us' value="USA"><br>
<input type="button" data-filter='jp' value="Japanese"><br>
<input type="button" data-filter='de' value="German"><br>
<input type="button" data-filter='import' value="Import"><br> 
```

复选框有一个`data-tags`属性，它是一个 JSON 标签数组：

```
<input type="checkbox" data-tags='["us"]'>Cadillac<br>
<input type="checkbox" data-tags='["jp","import"]'>Mazda<br>
<input type="checkbox" data-tags='["de","import"]'>VW<br>
<input type="checkbox" data-tags='["hu","import"]'>Rába<br> 
```

最后是一些 jQuery 让它工作：

```
$(document).on('click','input[type="button"]',function(e){

    var filter = $(this).data('filter');

    $('input[type="checkbox"]').each(function(){
        var $checkbox = $(this);
        var tags = $checkbox.data('tags');
        $.each( tags, function(){
            if( filter == this ) $checkbox.prop("checked", !$checkbox.prop("checked"));
        });
    });

}); 
```

# cakephp - Cakephp 如何验证一个数组以确保它至少有五个或更多项目

> ID：11228496
> 
> 赞同：0
> 
> 时间：2012-06-27T14:27:51.113
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0

大家好，我的代码需要帮助。我有一个表格，学生可以选择他们获得的科目、分数和成绩。科目和成绩是一个下拉菜单，它们处于循环中。我希望学生至少输入五门科目，包括英语。每个主题都由一个主题代码引用。你能帮我做这件事吗？

我的控制器功能是

```
subject_code' => $this->data['ApplicantOlevelQualification']['subject_code'][$i],
'grade' =>  $this->data['ApplicantOlevelQualification']['grade'][$i], 
```

我的模型如下

```
public $validate = array(
'grade' => array(
        'notempty' => array(
        'rule' => array('notempty'),
        // extra keys like on, required, etc. go here...
    ),
    'ruleName2' => array(
        'rule' => array('inList', array('A', 'B','C','D','E')),
        'message' => 'Not in range.',
    ),
),
'subject_code' => array(
        'numeric' => array(
            'rule' => array('numeric'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T05:15:11.747

您需要创建自定义验证。

看看这里： [http ://book.cakephp.org/1.3/view/1179/Custom-Validation-Rules](http://book.cakephp.org/1.3/view/1179/Custom-Validation-Rules)

一个例子：

```
<?php
class User extends AppModel {
    var $name = 'User';

    var $validate = array(
        'promotion_code' => array(
            'rule' => array('limitDuplicates', 25),
            'message' => 'This code has been used too many times.'
        )
    );

    function limitDuplicates($check, $limit){
        //$check will have value: array('promomotion_code' => 'some-value')
        //$limit will have value: 25
        $existing_promo_count = $this->find( 'count', array('conditions' => $check, 'recursive' => -1) );
        return $existing_promo_count < $limit;
    }
}
?> 
```

# maven - Ant 中的 WSDL2Java

> ID：11228498
> 
> 赞同：2
> 
> 时间：2012-06-27T14:27:57.510
> 
> 标签：maven, ant, wsdl, wsdl2java

在 ant 构建文件中使用 WSDL 生成 Java 代码的确切方法是什么？给出了很多方法，但大多数都不是 Ant 重组的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:45:42.810

为此有[Axis Ant Task](http://axis.apache.org/axis/java/ant/ant.html)。还有[CXF的处事方式](http://cxf.apache.org/docs/wsdl-to-java.html)。我会使用 Apache CXF，如下所示：

```
<target name="cxfWSDLToJava">
  <java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" fork="true">
    <arg value="-client"/>
    <arg value="-d"/>
    <arg value="src"/>
    <arg value="MyWSDL.wsdl"/>
    <classpath>
      <path refid="cxf.classpath"/>
    </classpath>
  </java>
</target> 
```

# facebook-graph-api - 仅获取特定属性 Graph API

> ID：11228502
> 
> 赞同：0
> 
> 时间：2012-06-27T14:28:14.420
> 
> 标签：facebook-graph-api, attributes

我只想得到喜欢的计数而不是喜欢的数据，可以使用 fields=like_count 或其他东西来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:32:24.340

是的，您可以使用`fields`仅获取这些属性。检查[这一点](https://developers.facebook.com/tools/explorer?method=GET&path=1274834235%3Ffields%3Dname)，某些字段对于某些对象是固定的。

如果您使用 fql，请使用 . 运算符例如：

> 用户邮箱

# c# - 无法从 C# 调用 COM DLL

> ID：11228506
> 
> 赞同：1
> 
> 时间：2012-06-27T14:28:36.190
> 
> 标签：c#, c++, com, invoke

我正在尝试使用来自 C#(4.0) 服务的 COM 调用 C++ 和 C# DLL。DLL 已在同一服务器 (win2003) 上注册，并且当前正在使用 COM 从 C++ 服务调用而没有问题（超过 100k 次）。DLL 公开了一个接口“ExecuteTransaction”，它接受两个参数。

当我尝试从 C# 调用它们时，我看到了一系列不同的错误

COM DLL 启动但出错：

```
- 0x800706be;远程过程调用失败。;
8004d00a;[Microsoft][ODBC driver for Oracle]在资源管理器中登记失败
```

然后 C# 服务将出错：

```
System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.Runtime.InteropServices.COMException：操作中止（来自 HRESULT 的异常：0x80000007）
   --- 内部异常堆栈跟踪结束 ---
   在 System.RuntimeType.InvokeDispMethod（字符串名称，BindingFlags invokeAttr，对象目标，对象 [] 参数，布尔 [] byrefModifiers，Int32 文化，字符串 [] 命名参数）
   在 System.RuntimeType.InvokeMember（字符串名称、BindingFlags bindingFlags、Binder binder、Object 目标、Object[] providedArgs、ParameterModifier[] 修饰符、CultureInfo 文化、String[] namedParams）
```

另一个 C++ DLL 将简单地挂起事件日志中的消息：

```
MS DTC 组件遇到内部错误。进程正在终止。错误细节：非 MS DTC XA 库在函数 oerhms ntdll!KiFastSystemCallRet + 0x0 + 0xb837ce8 中引发异常
```

代码是

```
using System;
using System.Collections.Generic;
using System.Reflection;
using System.EnterpriseServices;
using System.Data;
using System.Threading;
using System.Runtime.InteropServices;

....
int orderId = 65827;
int datasetId = 119849;
object objBM = null;
System.Guid bmGuid = new Guid("{43AFB035-9CFF-11D3-859D-0008C729AAEA}");

Type objBMType = Type.GetTypeFromCLSID(bmGuid);
objBM = Activator.CreateInstance(objBMType);
object[] args = {orderId,datasetId};
object c = objBMType.InvokeMember("ExecuteTransaction", System.Reflection.BindingFlags.InvokeMethod, null, objBM, args); 
```

调用 C# COM+ dll 也会产生问题。该服务将出错

```
System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.Runtime.InteropServices.COMException：远程过程调用失败。（来自 HRESULT 的异常：0x800706BE）
   --- 内部异常堆栈跟踪结束 ---
   在 System.RuntimeType.InvokeDispMethod（字符串名称，BindingFlags invokeAttr，对象目标，对象 [] 参数，布尔 [] byrefModifiers，Int32 文化，字符串 [] 命名参数）
   在 System.RuntimeType.InvokeMember（字符串名称、BindingFlags bindingFlags、Binder binder、Object 目标、Object[] providedArgs、ParameterModifier[] 修饰符、CultureInfo 文化、String[] namedParams）
```

服务和 dll 都在同一台服务器上。我究竟做错了什么？我是否缺少 using 语句？我查看了 WEB 上的示例，然后尝试了但都给出了相同的错误？有趣的是，DLL 启动但内部失败，就像我调用它们的方式不正确一样

# unix - 产生读取错误

> ID：11228509
> 
> 赞同：7
> 
> 时间：2012-06-27T14:28:42.830
> 
> 标签：unix, testing

在测试套件中通过写入`/dev/full`. 有没有一种很好的技术来产生读取错误？我目前正在使用 LD_PRELOAD 来覆盖`read`，但这似乎太复杂且不可移植（不是 /dev/full 是可移植的......）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T12:59:14.807

除了从目录中读取（如上一个答案中所述）之外，您还可以尝试读取`/proc/self/mem`以获取错误（这应该让您`EIO`在 Linux 上得到错误）。解释请见：[https ://unix.stackexchange.com/a/6302](https://unix.stackexchange.com/a/6302)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-29T21:33:33.107

一种适用于所有主要单元的方法是实现一个小型[FUSE](http://en.wikipedia.org/wiki/Filesystem_in_Userspace)文件系统。EIO 是您的用户空间文件系统驱动程序出错时的默认错误代码，因此很容易实现。[Perl](http://search.cpan.org/perldoc?Fuse)和[Python](https://pypi.python.org/pypi/fuse-python)绑定都带有示例以开始使用，您可以快速编写一个文件系统，该文件系统主要反映现有文件，但在精心选择的位置注入 EIO。

有一个现有的这样的文件系统：[petardfs](http://sourceforge.net/projects/witme/files/petardfs/)（[文章](http://archive09.linux.com/feature/119199)），我不知道它开箱即用的效果如何。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T23:59:54.087

根据 (OS X) read(2) 联机帮助页，如果“[a]n 尝试读取目录”，read(2) 将生成错误。因此，您可以打开(2) 一个目录（确保 prot 不允许写入，否则会引发错误），然后尝试从中读取。这看起来像是在“正常”情况下可能发生的唯一错误（即没有做诸如故意破坏 FILE* 结构之类的事情）。

我假设您在谈论 C 或类似语言中的 read(2) 错误，但即使在高级语言中，您也可以打开一个目录并尝试从中读取（尽管我只是尝试过）用Python，太聪明了，不让你打开目录……）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T02:44:13.777

您也可以将非法指针作为要读取的缓冲区传递，这将返回-EFAULT。就像是 ：

```
read(fd, (char *)0, cout); 
```

谢谢铃木

# ruby-on-rails - 在 Savon 中强制执行 XML 结构顺序

> ID：11228511
> 
> 赞同：0
> 
> 时间：2012-06-27T14:28:48.653
> 
> 标签：ruby-on-rails, ruby, savon

我目前正在尝试使用 Rails 2.3.8、Savon 和 OX 的 SOAP API 为 Open-Xchange 的本地实例构建一种供应服务。

通过控制台，我可以发出以下有效的命令；

```
>> client = Savon::client("http://192.168.2.195/servlet/axis2/services/OXContextService?wsdl")
=> #<Savon::Client:0x2b5151bad790 @wsdl=#<Savon::Wasabi::Document:0x2b5151bad678 @document="http://192.168.2.195/servlet/axis2//services/OXContextService?wsdl", @request=#<HTTPI::Request:0x2b5151bad628>>, @http=#<HTTPI::Request:0x2b5151bad628>, @config=#<struct Savon::Config _logger=#<Savon::Logger:0x2b5151bad6c8 @device=#<IO:0x2b514a775ad0>>, pretty_print_xml=nil, raise_errors=true, soap_version=1, env_namespace=nil, soap_header=nil>>
>> client.request :list_by_database do
?> soap.body = {
?> :auth => {
?> :login => "oxadminmaster",
?> :password => "admin_master_password"
>> },
?> :db => {
?> :id => 3
>> }
>> }
>> end
HTTPI executes HTTP GET using the net_http adapter
SOAP request: https://192.168.2.195/servlet/axis2/services/OXContextService.OXContextServiceHttpsSoap11Endpoint/
SOAPAction: "urn:listByDatabase", Content-Type: text/xml;charset=UTF-8, Content-Length: 657
<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ins0="http://soap.admin.openexchange.com" xmlns:ns="http://soap.admin.openexchange.com" xmlns:ins1="http://dataobjects.soap.admin.openexchange.com/xsd" xmlns:ins2="http://dataobjects.rmi.admin.openexchange.com/xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:env="http://schemas.xmlsoap.org/soap/envelope/"><env:Body><ins0:listByDatabase><ins0:db><ins1:id>3</ins1:id></ins0:db><ins0:auth><ins2:login>oxadminmaster</ins2:login><ins2:password>admin_master_password</ins2:password></ins0:auth></ins0:listByDatabase></env:Body></env:Envelope>
HTTPI executes HTTP POST using the net_http adapter
warning: peer certificate won't be verified in this SSL session
SOAP response (status 200): 
```

它可以工作，那里没有问题。但是，当我尝试以下代码时...

```
class Ox_Context_Service
  extend Savon::Model

  attr_accessor :data, :returnCode

  document "http://192.168.2.195/servlet/axis2/services/OXContextService?wsdl"

  def list_by_database oxMasterUser, oxMasterPassword
    begin
    response = client.request :list_by_database do
      soap.body = {
        :auth => {
          #for the sake of testing
          :login => "#{oxMasterUser}",
          :password => "#{oxMasterPassword}"
        },
        :db => {
          :id => 3
          #For the sake of testing
        }
      }
      end
      if response.success?
        data = response.body[:list_by_database_response][:return]
        if data
          @data = data
          @returnCode = "#{response.http.code}"
        end
      end
    end
  rescue Savon::Error => fault
    @data = {}
    @returnCode = "#{fault}"
  end
end 
```

使用以下 CURL ...

`curl localhost:4545/oxContextService/list_by_database -d 'oxUsername=oxadminmaster' -d 'oxPassword=admin_master_password'`

我得到...

```
HTTPI executes HTTP GET using the net_http adapter
SOAP request: https://192.168.2.195/servlet/axis2/services/OXContextService.OXContextServiceHttpsSoap11Endpoint/
SOAPAction: "urn:listByDatabase", Content-Type: text/xml;charset=UTF-8, Content-Length: 657
<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ins0="http://soap.admin.openexchange.com" xmlns:ns="http://soap.admin.openexchange.com" xmlns:ins1="http://dataobjects.soap.admin.openexchange.com/xsd" xmlns:ins2="http://dataobjects.rmi.admin.openexchange.com/xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:env="http://schemas.xmlsoap.org/soap/envelope/"><env:Body><ins0:listByDatabase><ins0:auth><ins2:login>oxadminmaster</ins2:login><ins2:password>admin_master_password</ins2:password></ins0:auth><ins0:db><ins1:id>3</ins1:id></ins0:db></ins0:listByDatabase></env:Body></env:Envelope>
HTTPI executes HTTP POST using the net_http adapter
warning: peer certificate won't be verified in this SSL session
SOAP response (status 500):
<?xml version='1.0' encoding='UTF-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><soapenv:Fault><faultcode>soapenv:Server</faultcode><faultstring>Authentication failed</faultstring><detail /></soapenv:Fault></soapenv:Body></soapenv:Envelope> 
```

所以 - 两个相同的调用，两个不同的结果。这里可能出了什么问题，所以？

编辑： Rails 调用失败，因为***Auth***块首先发送，而不是最后发送。我认为新问题是如何在不明确写出 XML 的情况下强制执行 XML 结构顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:17:32.437

```
 soap.body = {
    :auth => {
      #for the sake of testing
      :login => "#{oxMasterUser}",
      :password => "#{oxMasterPassword}"
    },
    :db => {
      :id => 3
      #For the sake of testing
    }
    :order! => [:db, :auth]
 } 
```

将`order!`根据该数组强制执行特定顺序。经验教训：阅读手册。

# c++ - 使用字符指针测试条件

> ID：11228512
> 
> 赞同：1
> 
> 时间：2012-06-27T14:28:49.173
> 
> 标签：c++, c

```
int main()
{
  char *p,c;
  for(p="Hello World";c=*p;++p)
  {
    printf("%c",c);
  }
} 
```

在上面的代码中，我知道 ++p 将使指针 'p' 指向“Hello World”中的下一个字符。而且我还知道在 C 或 C++ 中没有对数组执行边界检查。程序是“Hello World”。我如何能够测试条件使用

```
c=*p; 
```

'c=*p' 返回什么。据我了解，当 '++p' 到达 'hello world' 的末尾时，指针 'p' 应该指向一些垃圾值并且循环应该打印一些垃圾价值观。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T14:30:10.193

`c=*p;`不返回任何东西，它是一个表达式。`for`循环**评估**赋值后的值`c`。

> 当'++p'到达'hello world'的末尾时，指针'p'应该指向一些垃圾值

并不真地。在到达结尾之前，它到达**空终止字符**- `'\0'`。这是`0`。它被分配给`c`并将中断条件评估为`false`。所以循环在超出范围**之前完成。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T14:32:54.500

C 字符串根据定义以 NULL 字符结尾`'\0'`，如果它是字符串，则必须以 NULL 结尾。因此`c = *p`，当字符串结束时将指向一个 NULL 字符，在您的情况下，它是`'d'`. 并且 ASCII 表中的 NULL 字符有一个整数值 0，它的计算结果为 false 并退出`for`循环。

请注意，如果 C 字符串不以 NULL 字符结尾（那么起初它不是 C 字符串），那么基本上没有办法检测到它是字符串，因为它将被存储为字节序列。在这种情况下，它将只是一个字节数组或一个字符串，这取决于我们如何解释。

也不是`c = *p`不*返回*任何东西，它是一个表达式，它被*评估*。`e = *p`将 var 的当前值指向的值传输`p`到 var`c`中，其值是表达式的最终计算值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T14:30:50.160

字符串以空字符（又名 with `\0`）终止，因此最后`p`应该指向终止字符串的空字符，因此`c`将被`\0`视为错误条件。

# xtk - 未正确显示 ASCII STL 文件

> ID：11228519
> 
> 赞同：0
> 
> 时间：2012-06-27T14:28:56.657
> 
> 标签：xtk

我的问题似乎类似于[无法可视化加载的数据](https://stackoverflow.com/questions/10428608/not-able-to-visualize-a-loaded-data)，但我没有控制台错误，并且我已经在我的 Chrome 浏览器中添加了“-allow-file-access-from-files”标志。这是我的Java编码，

```
window.onload = function() {

var r = new X.renderer3D();
  r.init();

  pros = new X.mesh();
  pros.file = 'file:///C:/Users/Nathan/Downloads/JB Farmer STL ACII.stl';
  pros.caption = 'Prosthetic';

  r.add(pros);

  r.render();

}; 
```

我是否应该“玩弄”相机位置，我知道我必须在 Three.js 中这样做。也许模型需要法线？我不确定它是否。除了 Three.js，我还没有使用过 3D 建模。

更新：嗯，我不确定这是怎么回事，但我意识到 XTK 生成了 2 canvases 。我看了前两节课，他们有一节。^ 现在去掉了多余的画布，一定是复制了一块，就在里面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:48:33.180

如果您修改没有空格的文件名会发生什么？

JB Farmer_STL_ACII.stl 而不是 JB Farmer STL ACII.stl

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:48:28.587

目前，xtk 的加载器似乎并没有为本地完成。我的意思是：它使用 XMLHttpRequest (XHR) 通过 GET 请求获取文件。首先，必须将请求发送到可以处理它的东西（由 Wamp 模拟的服务器或本地主机或等效设备）。然后让我们想象一下，如果一个浏览器，无论是哪一个，通过他的 url 在客户端的文件上允许 XHR，并想象我是一个海盗，而你来到我的网站。我很了解 Windows，我知道在 C:/Windows/System32 中总是有一个文件可以找到您的个人数据。我该怎么办 ？一个XHR！你被黑了。这是一个故事，但你看到了这个想法。

**这就是为什么浏览器允许访问本地文件的唯一方法是 HTML5 File API 和 HTML5 Drag&Drop API**（不幸的是......）。*实际上，克服该限制的一种方法是在客户端使用二进制代码（flash、java applet）*。客户端是唯一可以要求打开文件或删除文件的人，因此浏览器肯定不会因为他而出现任何安全故障。

**因此，您应该使用 Wamp 之类的东西对其进行测试，并使用“http://localhost/.../myfile.stl”之类的 url 或相对 url“/.../myfile.stl”之类的 url 访问您的文件，或者执行如果您真的想要本地文件，请跟随。**

几周前，我为 xtk 和本地文件的私有格式编写了自己的解析器，它运行良好，我只是使用 HTML5 API 读取文件并从中获取 String 或 BinaryArray，然后编写了一个解析器，将其转换为X.mesh。所以我认为最好的办法是为 HTML5 文件 API 扩展 X.loader，或者像我一样手动加载文件。

***以下来自 Haehn 的 jsFiddle 有帮助***：[这里](http://jsfiddle.net/haehn/TaeEF/)！

# android - 保持活动标题设置为活动片段的标题

> ID：11228520
> 
> 赞同：1
> 
> 时间：2012-06-27T14:29:03.467
> 
> 标签：android, android-fragments, android-viewpager

我已经设置了一个应用程序，其中`ViewPager`包含`FragmentPagerAdapter`. 但是，我想`ActionBar`根据主要片段更新标题。这是一些代码，来自`FragmentAdapter`：

```
public void setPrimaryItem(ViewGroup container, int pos, Object object) {
    this.cur = pos;
    getItem(pos).onPrimary(pos);
} 
```

来自`Activity`：

```
public void setTitle(int pos, String title) {
    if (pos == this.fa.cur) { // this.fa is the FragmentAdapter
        super.setTitle(title);
    }
} 
```

从我`Fragment`的一个：

```
public void onPrimary(int pos) {
    this.pos = pos;
    if (this.activity != null && this.title != null)
        this.activity.setTitle(pos, this.title);
}

private void setTitle(String title) {
    this.title = title;
    if (this.activity != null && this.title != null)
        this.activity.setTitle(this.pos, title);
} 
```

虽然这似乎在干净启动后有效，但在某些情况下它开始下降；尤其是当碎片被摧毁然后被重建时，似乎。有没有人对此有更好/更清洁/更简单的解决方案？

# linux - 用于配置的 CMake 转义变量

> ID：11228523
> 
> 赞同：3
> 
> 时间：2012-06-27T14:29:09.723
> 
> 标签：linux, cmake

目前我正在使用以下语法设置 RPATH：

```
SET(CMAKE_INSTALL_RPATH   "${CMAKE_INSTALL_RPATH}:$ORIGIN/../lib") 
```

它适用于使用 CMake 的二进制构建。问题是它不适用于我使用 CMake 使用其自动配置脚本构建的第三方二进制文件。我正在使用以下命令进行配置：

```
add_custom_target(
                  third_party_bin ALL
                  COMMAND ./configure
                  --with-ld-opt=\"-Wl,-rpath,${CMAKE_INSTALL_RPATH}\"
                  --prefix=${CMAKE_INSTALL_PREFIX}
                  ) 
```

第三个路径配置生成的 Makefile 如下所示：

```
" -Wl,-rpath,':RIGIN/../lib' -lstdc++" 
```

我想我需要`${CMAKE_INSTALL_RPATH}`正确地逃脱。我还尝试使用以下选项：

```
add_custom_target(
                  third_party_bin ALL
                  COMMAND ./configure
                  --with-ld-opt=\"-Wl,-rpath,\$\$ORIGIN/../lib\"
                  --prefix=${CMAKE_INSTALL_PREFIX}
                  ) 
```

和

```
add_custom_target(
                  third_party_bin ALL
                  COMMAND ./configure
                  --with-ld-opt=\"-Wl,-rpath,\\$\$ORIGIN/../lib\"
                   --prefix=${CMAKE_INSTALL_PREFIX}
                  ) 
```

但没有任何效果。

转义值的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-02T09:51:16.997

`add_custom_target`接受一个`VERBATIM`论点。根据文档：

> 如果`VERBATIM`给出，则命令的所有参数都将为构建工具正确转义，以便调用的命令接收每个参数不变。`add_custom_target` 请注意，在看到参数之前，CMake 语言处理器仍然使用一级转义。建议使用 ，`VERBATIM`因为它可以实现正确的行为。未给出时`VERBATIM`，行为是特定于平台的，因为没有对特定于工具的特殊字符的保护。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T14:36:50.720

如果我没看错，那么您希望避免 shell 解释 $ 变量...如果是这样，请使用单引号 (') 而不是双引号 (")。shell 不会解释用单引号括起来的变量。

# matlab - 矩阵和子矩阵之间的反卷积

> ID：11228526
> 
> 赞同：4
> 
> 时间：2012-06-27T14:29:13.367
> 
> 标签：matlab, image-processing, convolution, deconvolution

我有一个矩阵`a=[[1 2 3]; [4 5 6]; [7 8 9]]`和一个子矩阵`b=[[5 6];[8 9]]`。

matlab中是否有反卷积的方法`(a,b)`？

我正在寻找一种方法来识别可能的巨型矩阵中是否存在子矩阵。通过一种反卷积，我希望获得类似于矩阵的东西，周围和`1`子矩阵存在的地方都是零。

在上面的示例中，a`1`在右下角。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:23:55.610

[这里](https://dsp.stackexchange.com/questions/2969/deconvolution-of-1d-signals/3560#3560)有更好的解释。

* * *

为简单起见，让我们谈谈一维反卷积。

您的信号可以表示为向量，卷积是与三对角矩阵相乘。

例如：

您的矢量/信号是：

```
 V1
    V2
    ...
    Vn 
```

您的过滤器（卷积元素）是：

```
 [b1 b2 b3]; 
```

所以矩阵是`nxn`：（让它被称为`A`）：

```
[b2 b3 0  0  0  0.... 0]
[b1 b2 b3 0  0  0.... 0]
[0  b1 b2 b3 0  0.... 0]
.....
[0  0  0  0  0  0...b2 b3] 
```

卷积是：

```
 A*v; 
```

反卷积是

```
 A^(-1) * ( A) * v; 
```

显然，在某些情况下，去卷积是不可能的。然后你会有单数`A`。但如果`A^-1`存在，则需要计算它，并将其应用于结果。

* * *

对于 2D 情况，它有点复杂，但想法是一样的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T14:56:34.083

如果您想找到另一个内部小矩阵的存在或存在的可能性，那么您正在寻找相关性，而不是反卷积。

最简单的方法是使用`normxcorr2`，它返回一个值矩阵 [-1..1]，其中 1 表示找到小矩阵的像素。

缺点/好处是 normxcorr2 对增益不敏感，这意味着如果你正在寻找 [1 2 3 4] 那么你也会找到 [2 4 6 8]

# php - PHP 在 onclick 事件中获取内容

> ID：11228529
> 
> 赞同：1
> 
> 时间：2012-06-27T14:29:27.040
> 
> 标签：php, javascript, html, get, onclick

我有一个这样的页面源：

```
<div class="ajax-checklist-widget"><div id="ShowResultsLabel" class="ajax-checklist-select" onclick="showproductlist(17342171, 545763, 'ShowResultsList')">
    <div class="ajax-checklist-select-control">
        <span rel="0" class="ajax-checklist-select-value">This is something</span>
    </div>
</div> 
```

当我在浏览器中单击时`This is something`，会显示一个选项列表。我想使用 PHP 获得这些选项，`file_get_contents`但不幸的是这些选项不在网页源代码中。

任何人都知道如何检索这些选项？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:11:51.043

这是因为选项是动态更改的，通常是由 ajax 完成的。

尝试找出哪个 url 正在发送选项值。您可以使用 firebug 在 Net 选项卡中查看 XHR 连接，或从其他浏览器进行其他类似调试。

当您获得发送选项值的 url 时`file_get_content`，使用在 XHR 中发送的相同参数直接发送给它。

# arrays - 给定一个数字 X ，在两个排序数组中找到两个元素，例如 A[i]+B[j] = X in O(n+m)

> ID：11228532
> 
> 赞同：6
> 
> 时间：2012-06-27T14:29:36.537
> 
> 标签：arrays, algorithm, sorting, big-o

鉴于以下问题，我将不胜感激任何更正，因为我没有解决当前问题（取自我教授的考试之一！！！）：

**备注：**这不是作业！

**问题：**

给定两个排序数组`A`（带有长度`n`）和`B`（带有长度`m`），其中每个

元素（在两个数组中）是一个实数和一个数字`X`（也是一个实数），

我们想知道是否存在`a ∈ A`and `b ∈ B`，例如：

`a + b = X` ，在`O(n+m)`运行时间。

**解决方案 ：**

首先，我们从两个数组的末尾开始检查，因为我们不需要大于 的数字`X`：

*   我 = n
*   k = 米

*   而 A[i] > X , i = i -1

*   而 B[k] > X , k = k -1

定义 j = 0 。现在从当前`i`的 in`A`和`j`in开始运行`B`：

*   `while i > 0 , j < k` ：
*   `if A[i]+B[j] == X`，然后返回两个单元格
*   别的`j = j+1 , i = i -1`

最后我们要么有这两个元素，要么我们会在一个或两个数组中超出界限，这意味着`a + b = X`确实不存在这样的两个元素。

任何评论将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T14:32:32.580

你不应该同时调整`i`和`j`。如果总和太大，你应该减少`i`。如果太小，请增加`j`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T14:35:09.830

这个问题是以下问题的特例： [Find number in sorted matrix (Rows n Columns) in O(log n)](https://stackoverflow.com/questions/10589975/find-number-in-sorted-matrix-rows-n-columns-in-olog-n?lq=1)

考虑一个用 填充的矩阵`C[i,j] = A[i] + B[j]`，然后从其中一个角开始，`i`如果总和太大，则减少，如果太小，则增加`j`。当然，您不必`C`在程序中创建和/或填充此矩阵，只需假设您知道此矩阵的任何元素：它是`A[i] + B[j]`，您可以随时立即计算它。得到的算法是`O(m+n)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-15T21:49:39.783

我对家庭作业有同样的问题。在上网查之前我已经练过了。这是我的解决方案（Python），希望一些大佬看到并帮助我改进它

```
# 1.3\. Given two sorted arrays a and b and number S. Find two elements such that sum a[i] + b[j] = S.Time O(n). 
```

def find_elem_sum(alist, blist, S): # O(n)

```
if alist is None or alist == [] or blist is None or blist == []:
    return None

# find the numbers which are less than S in the lists
#
#
# pretend it is done

a_length = len(alist)
b_length = len(blist)
a_index, b_index = 0, 0
count = 0
while alist and a_index < a_length and b_index < b_length:
    count += 1
    if alist[a_index] + blist[b_index] < S:
        if a_index < a_length - 1:
            a_index += 1
        if a_index == a_length - 1:
            b_index += 1;
        continue
    elif alist[a_index] + blist[b_index] > S:
        alist = alist[:a_index]
        a_length = len(alist)
        a_index = a_length - 1
    elif alist[a_index] + blist[b_index] == S:
        return [a_index, b_index, count]

return None 
```

# asp.net-mvc-3 - 使用 iTextSharp 时难以将图像插入 PDF

> ID：11228540
> 
> 赞同：1
> 
> 时间：2012-06-27T14:29:53.937
> 
> 标签：asp.net-mvc-3, xml-parsing, itextsharp

在为我的 MVC3 应用程序设置动态生成 PDF 的方法时，我参考[了这篇博文。](http://www.codeproject.com/Articles/66948/Rendering-PDF-views-in-ASP-MVC-using-iTextSharp)

在我想将图像添加到 PDF 之前，我一切正常。

这是我在没有图像的情况下正常运行的确切视图：

```
@model MyApp.Models.Student

@{
    Layout = null;
}

<?xml version="1.0" encoding="UTF-8" ?>
<itext creationdate="2/4/2013 5:49:07 PM" producer="iTextSharpXML">
    <paragraph leading="18.0" font="unknown" size="16.0" align="Center">
        <chunk>Orders in PDF</chunk>
    </paragraph>
    <paragraph leading="18.0" font="unknown" size="10.0" align="Center">
        <chunk>First Name: @Html.DisplayFor(model => model.FirstMidName) </chunk><newline />
        <chunk>Last Name: @Html.DisplayFor(model => model.LastName)</chunk><newline />
    </paragraph>
    <paragraph leading="18.0" font="unknown" size="10.0" align="Default">
    <chunk font="unknown" size="12.0">Orders:</chunk><newline />
    </paragraph>
</itext> 
```

这是我试图用来包含图像的内容：

```
<?xml version="1.0" encoding="UTF-8" ?>
<itext creationdate="2/4/2013 5:49:07 PM" producer="iTextSharpXML">
    <paragraph leading="18.0" font="unknown" size="16.0" align="Default">
        <chunk>Orders in PDF</chunk>
        <image url="/Content/images/myImage.jpg" plainwidth="194.0" plainheight="202.0" />
    </paragraph>
    <paragraph leading="18.0" font="unknown" size="10.0" align="Default">
        <chunk>First Name: @Html.DisplayFor(model => model.FirstMidName) </chunk><newline />
        <chunk>Last Name: @Html.DisplayFor(model => model.LastName)</chunk><newline />
    </paragraph>
    <paragraph leading="18.0" font="unknown" size="10.0" align="Default">
    <chunk font="unknown" size="12.0">Orders:</chunk><newline />
    </paragraph>
</itext> 
```

尝试使用图像生成 PDF 时，`Exception Occurred`当应用程序尝试解析 ( `textHandler.Parse(xmldoc);`) xml 以生成 pdf 时出现错误。错误的内部异常状态：`"The network path was not found.\r\n"`. 我假设我遇到了这个问题，因为我不知道应该如何将图像包含到这个 iTextSharpXML 页面中，并且无法找到有关如何执行此操作的适当文档。

我只想将图像放在 PDF 顶部的中心 - 我应该如何正确格式化它？

**更新**

如果我将“图像”标签更改为如下所示：

```
<paragraph leading="18.0" font="unknown" size="16.0" align="Center">
    <chunk>Orders in PDF</chunk>
    <img src="/Content/images/myImage.jpg" />
</paragraph> 
```

我可以生成 PDF，但没有图像出现 - 没有错误，但它看起来与没有图像的第一个 pdf 相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:05:20.463

您需要为图像标签提供绝对网址

```
<image url="http://myserver/Content/images/myImage.jpg"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T19:46:18.017

我有同样的问题，我能够看到使用此代码设置的图像：

```
<image url="@Context.Server.MapPath("/Content/images/myImage.jpg")" /> 
```

# objective-c - 如何将 NSTableView 与来自不同控制器的数组（控制器）绑定连接？

> ID：11228547
> 
> 赞同：0
> 
> 时间：2012-06-27T14:30:09.357
> 
> 标签：objective-c, macos, nstableview, cocoa-bindings

在过去的几天里，我一直在解决这个问题，但我自己无法弄清楚。我完成了 Apple 教程并进行了一些研究，但还没有找到答案：

我想在视图“A”上显示一个基于视图的 NSTableView，但我想从具有 dataArray 的 dataController 接收数据。

当我将 arrayController 放在视图“A”上时，我无法将它连接到我的 dataArray。当我将它放在另一个控制器的视图“B”上时，我无法将 NSTableView 连接到它。

当然，我可以将整个数组复制到另一个 viewController 中，使用它并稍后保存。但这对我来说似乎很奇怪。

谢谢你的时间！

# vb.net - linq concat column by val

> ID：11228550
> 
> 赞同：0
> 
> 时间：2012-06-27T14:30:19.307
> 
> 标签：vb.net, linq, list, group-by

我只是在寻找如何使用 LINQ 对列表进行分组。

```
Class Item
    Public col1 As String
    Public col2 As String
    Public col3 As String
    Public description As String
    Public Sub New(ByVal col1 As String, ByVal col2 As String, 
                   ByVal col3 As String, ByVal description As String)
        Me.col1 = col1
        Me.col2 = col2
        Me.col3 = col3
        Me.description = description
    End Sub
End Class  

    Dim ItemList As New List(Of Item)
    ItemList.Add(New Item("A", "A", "A", "1"))
    ItemList.Add(New Item("A", "A", "A", "2"))
    ItemList.Add(New Item("A", "B", "A", "3"))
    ItemList.Add(New Item("A", "B", "A", "4"))
    ItemList.Add(New Item("A", "B", "B", "5"))
    ItemList.Add(New Item("A", "B", "C", "6")) 
```

结果应该是 4 个项目的列表：

```
 '[0] = "A", "A", "A", "1 2"
    '[1] = "A", "B", "A", "3 4"
    '[2] = "A", "B", "B", "5"
    '[3] = "A", "B", "C", "6" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:47:19.390

如果我理解您按 3 列分组并加入它们的描述的要求，那么以下 LINQ 语句应该可以工作：

```
var query = from item in ItemList
            group item by
                new { Col1 = item.col1, Col2 = item.col2, Col3 = item.col3 }
            into g
            select new
            {
                 Col1 = g.Key.Col1,
                 Col2 = g.Key.Col2,
                 Col3 = g.Key.Col3,
                 Description = String.Join(" ", g.Select(xx => xx.description))
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:04:16.500

```
Class Item
    ...
    Public ReadOnly Property id As String
        Get
            Return col1 & "_" & col2 & "_" & col3
        End Get
    End Property
End Class  

Dim groups = ItemList.GroupBy(Function(item) item.id)
Dim result = From g in groups
             Select New Item(g(0).col1, g(0).col2, g(0).col3,
                             String.Join(" "c, g.Select(Function(i) i.description))) 
```

# ruby-on-rails - 在 Rails 3 中路由自定义操作

> ID：11228551
> 
> 赞同：4
> 
> 时间：2012-06-27T14:30:21.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个非常简单的问题。试图找出在 rails 3 中路由自定义操作的最简单方法是什么。

假设我有控制器`UsersController`和动作`promote_to_premium`

也不

```
http://localhost:3000/users/#{user_id}/promote_to_premium 
```

两者都不

```
http://localhost:3000/users/promote_to_premium/#{user_id} 
```

作品。

我是否应该在 routes.rb 中指定与 new/delete/update/create/ect/.... 不同的每个自定义操作？？？？？？？

谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-27T14:32:46.250

是的，您需要在您的 routes.rb 中指定。
例子：

```
resources :users do
  member do
    post :promote_to_premium
  end
end 
```

这样你就可以像这样访问路由：

```
http://localhost:3000/users/#{user_id}/promote_to_premium 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:33:49.053

您应该在 routes.rb 中使用它：

```
match "/users/:id/promote_to_premium" => "users#promote_to_premium" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T15:35:09.573

您应该在 routes.rb 文件中提及控制器中自定义方法的路由。

您可以使用`get""`or 或 a`match""=>""`指定路由，`"post"`
当您编写 get `"controller/something"`something 时，应该是控制器中名称为“something”的操作（方法）。但是在您的情况下，您不能使用`get"controller/:id"`，因为您的控制器中没有`":id"`方法。因此，您应该`match`在控制器中`controller/:id`添加一些内容。`'action'`因此你需要写

```
"match users/:id/promote_to_premium"=>  "users#promote_to_premium" 
```

但是如果你正在向数据库中写入一些东西，那么你应该使用' `post`'。据我所知，我想你可以试试

```
match 'users/:id/promote_to_premium' => 'users#promote_to_premium', :via => :post 
```

您可以在以下链接中了解有关路线的更多信息：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:32:31.600

是的，您需要指定每条路线。`resource`实际上，您也可以使用命令定义正常路线。

有一个特定的通配符命令允许访问任何操作，但它仅用于调试目的，因为它允许访问您可能不希望访问的操作：

```
match ':controller(/:action(/:id(.:format)))' 
```

# asp.net - 允许稍后在 ASP.NET 上进行翻译

> ID：11228552
> 
> 赞同：0
> 
> 时间：2012-06-27T14:30:34.583
> 
> 标签：asp.net, localization, external

我有一个应用程序，目前通过 .resx 文件有两个本地化选项。我想允许其他用户根据需要将网站翻译成他们自己的语言。

1）有没有办法做到这一点？2）或者他们是否必须通过某种 .resx 创建者创建一个 .resx 文件并将其发送给我，以便我可以将其添加到我的项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:33:35.400

当 asp.net 动态编译您的网站时，您可以稍后附加新的 resx。

我喜欢[Resex](http://resex.codeplex.com/)作为 resx 文件编辑器，因为它允许对资源进行分类并帮助查找未翻译的字符串。

# java - 弹簧行为模拟

> ID：11228554
> 
> 赞同：3
> 
> 时间：2012-06-27T14:30:37.133
> 
> 标签：java, swing, timer, paintcomponent, imageicon

基本上，我想在绘制的图像上模拟弹簧行为。我想让它通过几次迭代来放大和缩小（就像它固定在弹簧上一样）。

我在网上找到的所有示例都指向这门课-[`FloatSpring.java`](https://java2s.com/Open-Source/Java/Game/jme-game-console/com/captiveimagination/game/control/FloatSpring.java.htm)

它应该提供所需的计算，以应用取决于各种 FloatSpring 类设置的类似弹簧的效果将 A 点移动到 B 点。问题是我没有找到一个如何正确使用它的清晰示例。

我做了这个小例子来测试`FloatSpring`：

```
public static void main ( String[] args )
{
    // Some image to bounce
    final ImageIcon icon =
            new ImageIcon ( WebProgressOverlayExample.class.getResource ( "icons/ava1.jpg" ) );

    // Component to paint image on
    JComponent spring = new JComponent ()
    {
        // Zoom value (1f = 100% = normal size)
        float zoom = 1f;

        {
            // Basic spring settings
            final FloatSpring fs = new FloatSpring ( 100 );
            fs.setPosition ( zoom );

            // Animation delay
            final int delay = 1000 / 24;

            // Animator
            new Timer ( delay, new ActionListener ()
            {
                private float elapsed = 0f;

                public void actionPerformed ( ActionEvent e )
                {
                    // Increasing elapsed time and updating spring
                    elapsed += delay;
                    fs.update ( 3f, elapsed );

                    // Updating zoom value and component
                    zoom = fs.getPosition ();
                    repaint ();
                }
            } ).start ();
        }

        protected void paintComponent ( Graphics g )
        {
            super.paintComponent ( g );

            // Scaled image
            int width = Math.round ( icon.getIconWidth () * zoom );
            int height = Math.round ( icon.getIconHeight () * zoom );
            g.drawImage ( icon.getImage (), getWidth () / 2 - width / 2,
                    getHeight () / 2 - height / 2, this );
        }

        public Dimension getPreferredSize ()
        {
            return new Dimension ( 500, 500 );
        }
    };

    JFrame frame = new JFrame ();
    frame.add ( spring );
    frame.pack ();
    frame.setLocationRelativeTo ( null );
    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.setVisible ( true );
} 
```

在此示例中，属性应在计时器周期内从**1f**`zoom`反弹到**3f**，并最终将组件图像上的显示引导至 3X 缩放。类似于简单的动画过渡。

 ****FloatSpring 类应该没问题 - 我只是不明白如何正确使用它。确切地说 - 我应该指定什么作为`springK`和`dampingK`值以及`time`财产目的还不清楚......

我真的很感激那里的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T19:39:30.643

这是[一个](http://sscce.org/)使用[`FloatSpring`](http://www.java2s.com/Code/Java/2D-Graphics-GUI/Asimplespringsimulationinonedimension.htm).

![蹦极](../Images/5e65b4a8d24ba1aa8100747168d9e55e.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.AbstractAction;
import javax.swing.Icon;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.Timer;
import javax.swing.UIManager;

/**
* @see http://stackoverflow.com/a/11233735/230513
*/
public class Test {

    private static Spring spring = new Spring();

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(spring);
                frame.add(new JButton(new AbstractAction("Start") {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        spring.start();
                    }
                }), BorderLayout.SOUTH);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
                spring.start();
            }
        });
    }

    private static class Spring extends JComponent {

        private static final int SIZE = 500;
        private static final int DELAY = 1000 / 20; // ~20Hz
        private final Icon icon = UIManager.getIcon("OptionPane.informationIcon");
        private final FloatSpring fs = new FloatSpring(42);
        private final int target = 0;
        private final float delta = 1f / SIZE;
        private float elapsed = 0f;
        private Timer timer = new Timer(DELAY, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                if ((int) fs.getPosition() < (target + 1)) {
                    timer.stop();
                    return;
                }
                elapsed += delta;
                fs.update(target, elapsed);
                repaint();
            }
        });

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            int x = (getWidth() - icon.getIconWidth()) / 2;
            int y = (int) fs.getPosition();
            icon.paintIcon(this, g, x, y);
            int xc = x + icon.getIconWidth() / 2;
            g.drawLine(xc, 0, xc, y);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(SIZE / 2, SIZE);
        }

        public void start() {
            timer.stop();
            elapsed = 0;
            fs.setPosition(SIZE - icon.getIconHeight());
            fs.setVelocity(0);
            timer.start();
        }
    }
} 
```****

# php - 即使输入正确的值也无法登录

> ID：11228555
> 
> 赞同：-1
> 
> 时间：2012-06-27T14:30:37.993
> 
> 标签：php, mysql, database, login

> **可能重复：**
> [未定义的索引：C:\wamp\www\Website\storeadmin\admin_login.php..中的用户名和密码相同](https://stackoverflow.com/questions/11224291/undefined-index-username-in-c-wamp-www-website-storeadmin-admin-login-php-and)

```
//admin_login.php
<?php
session_start();
if(isset($_SESSION["member"])){
    header("location:index.php");
    exit();
}

?>
<?php
if(isset($_POST["username"]) && isset($_POST["password"])){     // <-  Check the user has clicked the button
  $manager = preg_replace('#[A-Za-z0-9]#i',"",$_POST["username"]);
  $password = preg_replace('#[A-Za-z0-9]#i',"",$_POST["password"]);

include "../storescripts/connect_to_mysql.php";
$sql = mysql_query("SELECT * FROM admin WHERE username ='$manager' AND password ='$password'LIMIT 1");
$exist_count = mysql_num_rows($sql);
if($exist_count == 1){
    while(mysql_fetch_array($sql)){
        $id = $row["id"];
        }

    $_SESSION["id"]= $id;
    $_SESSION["manager"]= $manager;
    $_SESSION["password"]= $password;
    header("location:index.php");
    exit();

    }
    else{
    echo 'This information is incorrect,try again <a href = "index.php">Click Here</a>';
    exit();
    }
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title> AdminLogin</title>
<link rel="stylesheet" href="../style/style.css" type="text/css" media="screen"/>
</head>

<body>
<div  id="mainWrapper" > 
    <?php include_once("../template_header.php");?>
    <div id="pageContent" > 
    <div align="left" "style="margin-left:040px;"><h1>Please login to continue</h1><br />
    </div>
    <form id="form1" name="form1" method="post" action="admin_login.php"> 
    UserName<br />
    <input type="text" name="username" id="username" size="40"/>
    Password<br />
    <input type="password" name="password" id="password" size="40"/> 
    <br />
    <br />
    <br /> 
    <input type="submit" name="button" id="button" value="LogIn"/>  
    </form>
    </div>
    <?php include_once("../template_header.php");?>
</div>
</body>
</html>
//index.php
<?php
session_start();
if(!isset($_SESSION["member"])){
    header("location:admin_login.php");
    exit();
}

$managerID = preg_replace('#[^0-9]#i',"",$_SESSION["id"]);
$manager = preg_replace('#[A-Za-z0-9]#i',"",$_SESSION["manager"]);
$password = preg_replace('#[A-Za-z0-9]#i',"",$_SESSION["password"]);

include "../storescripts/connect_to_mysql.php";
$sql = mysql_query("SELECT * FROM admin WHERE id ='managerID' AND username ='$manager' AND password ='$password'LIMIT 1");
$exist_count = mysql_num_rows($sql);
if($exist_count == 0){
    echo("Your login session data in not in the database");
    exit();
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<html >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Service Admin Area</title>
<link rel="stylesheet" href="../style/style.css" type="text/css" media="screen"/>
</head>

<body>
<div  id="mainWrapper" > 
    <?php include_once("../template_header.php");?>
    <div id="pageContent" > 
    <div align="left" "style="margin-left:040px;"><h1>Hello Store Manager .What would you loke to do today</h1><br />
    <h3><a href="inventory_list.php">Manage Inventory</a></h3><br/><h3><a href="">Manage Me</a></h3><br/></div></div>
    <?php include_once("../template_header.php");?>
</div>
</body>
</html> 
```

我面临的问题是，即使我输入了我通过 phpmyadmin 设置的数据库中指定的正确用户名和密码，我也无法登录到我的 index.php 页面。每次我尝试登录时，它都会调用[echo '此信息不正确，请重试单击此处'] 如 admin_login.php 中所述。我有点沮丧。你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:38:08.037

我不确定你为什么使用 preg_replace。在我看来，您正在清除变量。这就解释了为什么您无法在数据库中找到自己。尝试删除 preg_replace 看看会发生什么。此外，当您执行 SQL 查询时，您忘记了密码和限制之间的空格。

希望这能解决你的问题

# jquery - 让 PageDown 和 MathJax 一起工作

> ID：11228558
> 
> 赞同：21
> 
> 时间：2012-06-27T14:30:54.613
> 
> 标签：jquery, mathjax, pagedown

我正在实现一个用户界面，它应该看起来很像[math.stackexchange.com](https://math.stackexchange.com/)上的用户界面：

1.  [像你在stackoverflow](http://stackoverflow.com)上习惯的那样使用花哨的 Markdown
2.  `$`使用... -符号之间的 MathJax 解析公式`$`。

所以我下载了 PageDown 演示并进行了设置，效果很好。现在我尝试让 MathJax 在每次`<textarea>`更改时动态加载。

MathJax 为这种方法提供了一个[示例](http://www.mathjax.org/resources/docs/?typeset.html)，但我无法让它运行。这就是“我的”代码的样子：

```
 <link rel="stylesheet" type="text/css" href="demo.css" />

    <script type="text/javascript" src="../../Markdown.Converter.js"></script>
    <script type="text/javascript" src="../../Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="../../Markdown.Editor.js"></script>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [["$","$"],["\\(","\\)"]]
        }
      });
    $("#wmd-input").keypress(function(event){
        UpdateMath($(this).val());
    });
    </script>
    <script type="text/javascript" src="../../../mathjax-MathJax-07669ac/MathJax.js?config=TeX-AMS_HTML-full">
    </script>
</head>
<body>
    <script>
      (function () {
        var QUEUE = MathJax.Hub.queue;  // shorthand for the queue
        var math = null;                // the element jax for the math output.

        QUEUE.Push(function () {
          math = MathJax.Hub.getAllJax("#wmd-preview")[0];
        });

        window.UpdateMath = function (TeX) {
          QUEUE.Push(["Text",math,"\\displaystyle{"+TeX+"}"]);
        }
      })();
    </script>

    <div class="wmd-panel">
        <div id="wmd-button-bar"></div>
        <textarea class="wmd-input" id="wmd-input" value=""/>

    </textarea>
    </div>
    <div id="wmd-preview" class="wmd-panel wmd-preview"></div>
    <br /> <br />
    <script type="text/javascript">(function () {
                 var converter1 = Markdown.getSanitizingConverter();
            var editor1 = new Markdown.Editor(converter1);
            editor1.run();
        })();
    </script>
</body> 
```

`keypress`每次触发事件时，此代码段都应更新预览。相反，在页面加载时，tex 渲染得很好，但只要我开始输入`$`...`$`代码就会打印在预览框中。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-27T16:35:07.030

您当前的设置存在几个问题。首先，您借用的示例是更新*单个*方程式的示例，而不是包含多个方程式的段落。为此，您需要考虑[第二个动态示例](http://cdn.mathjax.org/mathjax/latest/test/sample-dynamic-2.html)（来自 MathJax[示例页面](http://cdn.mathjax.org/mathjax/latest/test/examples.html)）。您应该在浏览器控制台中收到与`null`值有关的错误消息（除非`math`您`null`从编辑器中的一些数学开始）。

但是还有第二个问题，那就是 wmd 编辑器会更新 wmd-preview 区域，你应该配合它进行 MathJax 更新，否则它可能会在 MathJax 工作时改变 div 的内容. Wmd 在更新时也比每次按键都更智能（例如，箭头键不会导致更新），因此协调起来也会更有效。wmd 的 SE 版本具有允许您执行此操作的挂钩，我怀疑您正在使用的那个也可以。

最后，你将不得不做更多的工作来保护数学免受 Markdown 引擎的影响，这样下划线和反斜杠之类的东西在出现在数学中时就不会被 Markdown 处理。这有点棘手，但没有它，您将遇到很多问题，因为您的 TeX 代码没有得到正确处理。

要处理最后两个问题，您可以考虑查看[MSE](http://cdn.sstatic.net/js/mathjax-editing.js)用于将 MathJax 连接到 wmd 的代码。也许这会给你一些关于如何做的线索。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-04T20:53:59.540

我只是将[标记](https://github.com/chjj/marked)（Pagedown 之外的另一个 Markdown 库）和“MathJax”组合成“markdown+mathjax 实时编辑器”。

查看演示： http: [//kerzol.github.io/markdown-mathjax/editor.html](http://kerzol.github.io/markdown-mathjax/editor.html)

并获取来源：[https ://github.com/kerzol/markdown-mathjax](https://github.com/kerzol/markdown-mathjax)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-10-16T23:51:38.770

我创建[了一个基本示例](https://szego.github.io/pagedown-mathjax-example/example.html)，说明如何使用对 Stack Exchange 的[mathjax-editing.js](http://dev.stackoverflow.com/content/js/mathjax-editing.js)的轻微修改使 Pagedown 和 MathJax 协同工作。

Stack Exchange 的代码基于 Davide Cervone 的代码，[请参阅他对另一个答案的评论](https://stackoverflow.com/questions/11228558/let-pagedown-and-mathjax-work-together/21563171#comment17371250_11231030)。

该示例的代码可以在[github](https://github.com/szego/pagedown-mathjax-example)上查看。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-02-12T16:55:38.720

Stack Overflow 上的 Geoff Dalgas 刚刚发布了他们的 MathJax + PageDown 集成代码[作为要点](https://gist.github.com/gdalgas/a652bce3a173ddc59f66)。有关更多详细信息，请参阅[Meta 帖子](https://meta.stackexchange.com/a/274581/1869)。

# objective-c - 在索引处打印数组对象：i 会引发编译器错误

> ID：11228559
> 
> 赞同：1
> 
> 时间：2012-06-27T14:30:59.757
> 
> 标签：objective-c, arrays, printing

这里有点混乱。

我将一个类中的一些对象添加到一个数组中。现在我正在尝试遍历这些对象并将它们与所有变量一起打印（到控制台）。

```
NSArray *stockArray=[NSArray arrayWithObjects:stock1, stock2, stock3, nil];

    for (int i=0; i<4; i++)
    {
        StockHolding *stockItem=[[StockHolding alloc]init];
        stockItem=[stockArray objectAtIndex:i];
        [print stockItem];
    } 
```

我的 Stock Holding 类有几个属性，我在 .h 中声明并在 .m 中与 print 方法一起综合。

但是，当我尝试在上面的代码中使用它来打印“stockItem”时，我收到编译器错误“使用未声明的标识符'print'”

这是没有意义的，因为 Stock Holding 类在 .h 中声明 print 并在 .m 中实现：

```
-(void) print{
NSLog(@"Current purchase price is %f, current price is %f, 
number of shares are %i, cost in dollars is %f, value is dollars is %f", 
purchaseSharePrice, currentSharePrice, 
numberOfShares, self.costInDollars, self.valueInDollars);
} 
```

我应该使用另一种方式来打印这些数组对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:35:15.713

你的语法是倒退的。它应该是：

```
[stockItem print]; 
```

Objective-C 语法如下：

```
[object method]; 
```

# javascript - Javascript函数性能

> ID：11228562
> 
> 赞同：0
> 
> 时间：2012-06-27T14:31:15.703
> 
> 标签：javascript, html, performance, time-complexity

我正在研究 javascript 和 json，但我写的每一行代码都是另一个问题。我已经完成了一个适用于 json 的脚本，但我是一个初学者，我写的东西的表现并不是那么好。代码只有在我使用 firebug 或其他工具逐步调试时才有效，这让我认为代码的执行（或代码的一部分......如您将看到的创建表的那个）需要时间太长，所以浏览器会停止它。

我的代码是：

```
var arrayCarte = [];
var arrayEntita = [];
var arraycardbyuser = [];

function displayArrayCards() {
    var richiestaEntity = new XMLHttpRequest();

    richiestaEntity.onreadystatechange = function() {
        if(richiestaEntity.readyState == 4) {
            var objectentityjson = {};
            objectentityjson = JSON.parse(richiestaEntity.responseText);

            arrayEntita = objectentityjson.cards;
        }
    }
    richiestaEntity.open("GET", "danielericerca.json", true);
    richiestaEntity.send(null);

    for(i = 0; i < arrayEntita.length; i++) {

        var vanityurla = arrayEntita[i].vanity_urls[0] + ".json";
        var urlrichiesta = "http://m.airpim.com/public/vurl/";

        var richiestaCards = new XMLHttpRequest();
        richiestaCards.onreadystatechange = function() {
            if(richiestaCards.readyState == 4) {
                var objectcardjson = {};
                objectcardjson = JSON.parse(richiestaCards.responseText);

                for(j = 0; j < objectcardjson.cards.length; j++)
                arrayCarte[j] = objectcardjson.cards[j].__guid__; //vettore che contiene i guid delle card

                arraycardbyuser[i] = arrayCarte;

                arrayCarte = [];
            }
        }
        richiestaCards.open("GET", vanityurla, true);
        richiestaCards.send(null);
    }

    var wrapper = document.getElementById('contenitoro');

    wrapper.innerHTML = "";

    var userTable = document.createElement('table');

    for(u = 0; u < arrayEntita.length; u++) {
        var userTr = document.createElement('tr');

        var userTdcard = document.createElement('td');
        var userTdinfo = document.createElement('td');

        var br = document.createElement('br');

        for(c = 0; c < arraycardbyuser[u].length; c++) {
            var cardImg = document.createElement('img');
            cardImg.src = "http://www.airpim.com/png/public/card/" + arraycardbyuser[u][c] + "?width=292";
            cardImg.id = "immaginecard";
            userTdcard.appendChild(br);
            userTdcard.appendChild(cardImg);

        }

        var userdivNome = document.createElement('div');
        userdivNome.id = "diverso";
        userTdinfo.appendChild(userdivNome);

        var userdivVanity = document.createElement('div');
        userdivVanity.id = "diverso";
        userTdinfo.appendChild(userdivVanity);

        var nome = "Nome: ";
        var vanityurl = "Vanity Url: ";
        userdivNome.innerHTML = nome + arrayEntita[u].__title__;
        userdivVanity.innerHTML = vanityurl + arrayEntita[u].vanity_urls[0];

        userTr.appendChild(userTdcard);
        userTr.appendChild(userTdinfo);
        userTable.appendChild(userTr);
    }

    wrapper.appendChild(userTable);
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:34:54.260

您已经创建了一个竞争条件（各种） - 您无需等到 AJAX 被解析并且您的数据已被写入正确的变量中，然后再继续处理页面逻辑的其余部分。

当您在调试器中运行它时，您最终会给代码足够的时间来完成 AJAX 请求，然后再尝试使用您在`onstatechange`处理程序中填充的变量。

使用 jQuery 和延迟对象，这段代码会容易*得多：*

```
var arrayCarte, arrayEntita, arraycardbyuser;

// do first seeding request
var req1 = $.ajax(...);

var req2 = [];
req1.done(function(objectentityjson) {

    arrayEntita = objectentityjson.cards;

    // initiate the inner AJAX requests
    for (var i = 0; i < arrayEntita.length; ++i) {

        var tmp = $.ajax(...);
        tmp.done(function(objectcardjson) {
            // process the sub data here
            ...
        });

        req2.push(tmp);  // keep the object around for later sync-up
    }
});

// this'll only fire when all of the inner AJAX requests have completed
$.when.apply($, req2).done(function() {
     // do the rest of your page setup here
     ...
}); 
```

# c++ - For循环与赋值运算符

> ID：11228563
> 
> 赞同：0
> 
> 时间：2012-06-27T14:31:16.290
> 
> 标签：c++, copy, bit-manipulation

直接赋值（*即* `=`）与将某些内容投射到`char*`然后使用`for`循环逐字节复制它是否相同？^*
我想知道一种方法是否比另一种方法有优势。

```
struct A
{
    int a;
    int b;
} Test;

void* Buffer = malloc(1024);

// Casting and byte copying
for (int i=0; i != 8; i++)
{
    ((char*)Buffer)[i] = ((char*)Test)[i];
}

// Assignment
((A*)Buffer)[0] = Test; 
```

* * *

^(* 所有类型都可以按位复制。)

编辑：根据答案，memcopy 是否与 '=' 相同

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T14:33:35.617

这基本上就是`memcpy`这样做的，并且对[POD 类型](http://en.wikipedia.org/wiki/Plain_old_data_structure)有效（假设`sizeof(Test)`确实是 8）。但是，`memcpy`几乎可以肯定会更快，因为编译器将具有特殊优化的汇编程序例程。

如果您使用非 POD 类型尝试此（或），您将调用**未定义的行为。**`memcpy`所以一般来说，你应该使用`std::copy`或只使用赋值。

您还应该避免`malloc`使用 C++，因为它不是类型安全的；如果需要，请使用`new`, 或[放置。`new`](http://en.wikipedia.org/wiki/Placement_new)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:02:19.283

首先，这不是 C++。这是丑陋的 C。您正在手动分配一块大小为 1024 字节的内存，并在裸指针中捕获其地址。此外，在代码示例中，您永远不会释放任何它，从而泄漏了 MB 内存。当涉及到 C++ 时，这被认为是一种非常糟糕的做法。

C++ 不是带有类的 C，它是一种美丽的语言，它只能通过与标准库结合使用并坚持更好的设计模式来表达自己在更好的内存管理中。甚至`new`在不必要的时候都回避，更不用说`malloc`。

```
for (int i=0; i != 8; i++) 
```

此外，您在这里做出了危险的假设，这可能导致未定义的行为。

```
((char*)Buffer)[i] = ((char*)Test)[i]; 
```

我什至不打算对此发表评论。天啊……不仅不好，而且没用。您正试图将一个`struct` `A`躺在堆栈上的实例（一个常规的“对象”/var）强制转换为`char*`. 你错过了`&Test`.

**如果您选择这条路**，请使用 memcpy，但请考虑改进您的 C++ 方法。memcpy 接受三个参数，一个目标，一个源和字节大小。确保两者匹配，您将获得快速的每字节副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:08:49.143

使用运算符的直接赋值`=`绝对*不同于*`for`复制字节的循环。操作员尊重类型，它的`=`作用取决于类型。在大多数情况下，逐字节复制是未定义的行为。在您的特定情况下，我希望编译器生成的东西相当于将数据视为 unsigned long long，并仅使用一两条机器指令进行复制。但这仅仅是因为您定义的类型的特殊性。一般来说，给编译器尽可能多的信息，并相信它；它通常会做得更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T15:30:35.443

这不是对 OP 问题的直接回答，而是对我认为他正在努力实现的目标的回答。

将格式化数据写入可传输格式是[序列化](http://en.wikipedia.org/wiki/Serialization)，在 C++ 中，有几种方法可以做到这一点。有几件事情需要考虑：格式是否应该是 ascii、xml、二进制，如果是二进制，是否应该是跨平台的（字节序、对齐）。在任何情况下，将结构复制到字节缓冲区的幼稚方式几乎是不可取的。

您可以考虑以下选项：

*   当它可能是 ascii 格式时，最直接的方法是使用 iostreams
*   [boost.序列化](http://www.boost.org/libs/serialization)
*   外部库（很公平：boost 也是其中之一）：poco、google 缓冲协议、...
*   滚动你自己的（基于转换原语）

另见[这个问题](https://stackoverflow.com/questions/234724/how-to-serialize-in-c)

# c++ - msleep() 是否给其他线程循环？

> ID：11228574
> 
> 赞同：0
> 
> 时间：2012-06-27T14:32:00.963
> 
> 标签：c++, sleep

在多线程应用程序中，是

```
while (result->Status == Result::InProgress) Sleep(50);
//process results 
```

好于

```
while (result->Status == Result::InProgress);
//process results 
```

? 这样，我问第一种方法是否会在等待结果而不是不断旋转时对其他线程有礼貌？我正在等待的操作通常需要大约 1-2 秒，并且在不同的线程上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:34:29.430

我建议在这种情况下使用信号量而不是轮询。如果您更喜欢主动等待，那么睡眠是比不断评估循环条件更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:33:26.850

是的，睡眠和变体放弃了处理器。其他线程可以接管。但是有更好的方法来等待其他线程。

不要使用空循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:49:16.687

它更好，但不是很多。

只要`result->Status`不是`volatile`，编译器就可以减少

```
while(result->Status == Result::InProgress); 
```

到

```
if(result->Status == Result::InProgress) for(;;) ; 
```

因为条件在循环内不会改变。

调用外部（因此是隐式`volatile`）函数`Sleep`会改变这一点，因为这可能会修改`result`结构，除非编译器知道`Sleep`永远不会修改数据。因此，根据编译器的不同，第二种实现进入无限循环的可能性要小得多。

也不能保证访问`result->Status`是原子的。对于特定的内存布局和处理器架构，读取和写入此变量可能包含多个步骤，这意味着调度程序可能会决定在中间介入。

由于此时您所交流的只是一个简单的是/否，并且接收线程也应该等待否定答复，因此最好的方法是使用您的操作系统提供的适当线程同步原语来实现此效果。这样做的好处是，当条件发生变化时，您的线程会立即被唤醒，并且在此期间它不使用 CPU，因为操作系统知道您的线程正在等待什么。

在 Windows 上，使用[`CreateEvent`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682396%28v=vs.85%29.aspx)and co。使用事件对象进行通信；在 Unix 上，使用一个[`pthread_cond_t`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_cond_wait.html)对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T14:51:15.537

That depends on your OS scheduling policy too.For example Linux has CFS schedular by default and with that it will fairly distribute the processor to all the tasks. But if you make this thread as real time thread with FIFO policy then code without sleep will never relenquish the processor untill and unless a higher priority thread comes, same priority or lower will never get scheduled untill you break from the loop. if you apply SCHED_RR then processes of same priority and higher will get scheduled but not lower.

# tridion - 在 Tridion 代理查询上应用不止一种排序

> ID：11228580
> 
> 赞同：14
> 
> 时间：2012-06-27T14:32:18.073
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我有一个代理查询，我需要按 2 个不同的字段排序（使用 JSP 和 2011 SP1）

API 具有我正在应用的方法“addSorting”。

然而，似乎第二个 addSorting 调用覆盖了第一个 addSorting 调用——而不是添加第二个排序：

```
// Sort by Date
CustomMetaKeyColumn customMetaKeyColumnDate = new CustomMetaKeyColumn("date", MetadataType.DATE);
query.addSorting(new SortParameter(customMetaKeyColumnDate, SortParameter.DESCENDING));

// Sort by Owner
CustomMetaKeyColumn customMetaKeyColumnOwner = new CustomMetaKeyColumn("owner", MetadataType.STRING);
query.addSorting(new SortParameter(customMetaKeyColumnOwner, SortParameter.ASCENDING)); 
```

他们单独排序工作正常。

这是预期的吗？addSorting 真的是 setSorting - 只能指定 1 个排序，还是我错过了组合 2 个排序的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T16:48:42.313

addSorting 方法工作得很好。但是，它根本不适用于 CustomMeta 列！！！已确认有关此主题的缺陷，摘要如下：“SortParameter 不适用于两个元数据字段”。对于 2011SP1，这仍然是一个未解决的缺陷，计划仅在下一个版本中修复。

干杯，丹尼尔。

# ant - 导入时自动调用 Ant 目标

> ID：11228581
> 
> 赞同：2
> 
> 时间：2012-06-27T14:32:19.417
> 
> 标签：ant

我有一个相当简单的问题。我们通常将其作为 Ant 的 build.xml 文件执行

```
<project default="" name="Caterpillar Common settings">
    <property name="some.name" value="some.value" />
</project> 
```

因此，如果我们将其导入另一个 .xml 项目，它会将“some.name”设置为“some.value”。

有时设置这个“some.name”有点复杂，需要一些写在几个小目标内的逻辑。

问题：如何像顶级标签一样自动调用目标？

我试过`<antcall>`了，显然顶级不是它的那杯茶吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:50:36.117

[Ant 任务](http://ant.apache.org/manual/Tasks/ant.html)可用于调用其他 Ant 项目中的目标。

> 默认情况下，当前项目的所有属性都将在新项目中可用。或者，您可以将该`inheritAll`属性设置为 false，并且只有“用户”属性（即，在命令行上传递的那些）将传递给新项目。在任何一种情况下，传递给新项目的属性集都将覆盖在新项目中设置的属性

构建构建的一种方法是首先调用您的子项目，然后使用该`Ant`任务调用主项目。

在以下示例中，**project2.xml**初始化属性，然后由主项目文件**build.xml**使用。

## 项目2.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="project2" default="initialize">
  <dirname property="project2.dir" file="${ant.file.project2}" />
  <property name="caterpillar.dir" location="${project2.dir}" />

  <target name="initialize">
    <property name="some.name" value="some.value" />
    <ant dir="${caterpillar.dir}" antfile="build.xml" target="build" />
  </target>
</project> 
```

## 构建.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Caterpillar-Common-Settings">
  <target name="build">
    <echo message="${some.name}" />
  </target>
</project> 
```

构建将从命令行初始化，如下所示：

```
$ ant -f project2.xml 
```

## 输出

```
Buildfile: /home/caterpillar/project2.xml

initialize:

build:
     [echo] some.value

BUILD SUCCESSFUL
Total time: 0 seconds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:55:36.157

采用

```
<Sequential>
    <echo message="something" />
</sequential> 
```

不需要宏定义来封装它。

# jakarta-ee - Primefaces dataTable 仅添加单行

> ID：11228589
> 
> 赞同：0
> 
> 时间：2012-06-27T14:32:31.220
> 
> 标签：jakarta-ee, jsf-2, primefaces

我一直在挖掘档案以找到可能有帮助的答案，但似乎没有什么真正适用的。

我在 jsf 中有一个包含嵌套数据表的页面，其中包含来自支持 bean 的列表。该页面似乎没有任何问题地保存数据，但是当我尝试使用 p:collector Primefaces 对象添加我的任一数据表时，我的数据表只显示一行。我总是在两个列表中添加一个空对象。

列表中包含的对象是实现 Serializable 的自定义对象。

我的 backing bean 是 ConversationScoped，backing bean 中的数据在对话开始时被实例化。

这是我的主页：

```
<ui:composition template="/templates/pageLayout.xhtml">

    <ui:define name="pageContent">

        <h:form id="genericWorkflowMainForm" enctype="multipart/form-data">

            <p:panel id="actionList">
                <div align="right">
                    <p:commandButton id="addActionButton" value="Add Action" update="actionTable" 
                                     action="#{createGenericWorkflowBean.addAction}" ajax="false">
                        <p:collector id="addActionCollector" value="#{createGenericWorkflowBean.actionRow}" 
                                     addTo="#{createGenericWorkflowBean.genericWorkflowData.actionGroup.actionCompletionList}"/>
                    </p:commandButton>
                </div>
                <h:dataTable id="actionTable" var="actions"
                             value="#{createGenericWorkflowBean.genericWorkflowData.actionGroup.actionCompletionList}">
                    <h:column>
                        <h:outputLabel value="Action  " /> 
                        <h:inputTextarea id="actionText" value="#{actions.actionRecord.actionText}" />
                        <br/>
                        <p:panel id ="actioneePanel">
                            <div align="right">
                                <p:commandButton id="addApproverButton" value="Add Approver" onclick="addApprover.show()"/>
                            </div>
                            <h:dataTable value="#{actions.actionRecord.actionees}" id="actioneeListValues" var="actioneeRecord">
                                <h:column>

                                    <h:outputText id="actioneeLabel" value="Actionee  " />
                                    <h:outputText id="actionee" value="#{actioneeRecord.user.user.name}" />

                                    <h:outputText id="actioneeCommentlabel" value="Comments  " rendered="#{actioneeRecord.user.display}"/>
                                    <h:inputTextarea id ="actioneeComment" value="#{actioneeRecord.userComment}" rendered="#{actioneeRecord.user.display}"/>

                                    <br/>
                                    <p:commandLink id="removeActionee" value="Remove" update="actioneeListValues" rendered="#{!actioneeRecord.user.display}">
                                        <p:collector value="#{actioneeRecord}" removeFrom="#{actions.actionRecord.actionees}"/>
                                    </p:commandLink>

                                </h:column>

                            </h:dataTable>

                            <p:dialog id="addApprover" header="Add Approver" widgetVar="addApprover" modal="false" closable="false"
                                      resizable="false" width="250">
                                <div>
                                    <p:autoComplete id="autoCompleteApprover" value="#{createGenericWorkflowBean.newApprover}"
                                                    /**//>
                                    <br/>
                                    <p:commandButton id="addNewApprover" title="Add Approver" value="Add"
                                                     update="actioneeListValues" onclick="addApprover.hide()" ajax="false"
                                                     action="#{createGenericWorkflowBean.addApprover()}">
                                        <p:collector value="#{createGenericWorkflowBean.newApprover}" 
                                                     addTo="#{actions.actionRecord.actionees}"/>

                                    </p:commandButton>

                                </div>
                            </p:dialog>
                        </p:panel>
                    </h:column>
                </h:dataTable>
            </p:panel>

        </h:form>
    </ui:define>
</ui:composition> 
```

以下是与 p:collector 添加和删除列表部分相关的支持 bean 的部分。

```
@Named
@ConversationScoped
public class CreateGenericWorkflowBean extends WorkflowBean {

    @Inject
    Conversation conversation;

    private Actionee newApprover;

    private ActionCompletionRecord actionRow = new ActionCompletionRecord();

    private Actionee actioneeRow = new Actionee();

    public GenericWorkflowData getGenericWorkflowData() {
        return (GenericWorkflowData) getData();
    }

    public void addApprover() {

        setNewApprover(new Actionee());

    }

    public void addAction() {
        actionRow = new ActionCompletionRecord();
    }

} 
```

我还在学习 JSF 和 Primefaces，所以我不知道我是否做过一些永远不会奏效的事情。

任何帮助将不胜感激。

马特·泰瑟姆

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-21T20:48:17.997

实体类具有@override 方法，这些方法是在通过创建新实体向导创建新实体时生成的。从实体中删除所有覆盖的方法并保存。就这样。现在它将起作用。

# java - EntityManager 返回的 JPA 的 Query 对象是否可重用？

> ID：11228590
> 
> 赞同：7
> 
> 时间：2012-06-27T14:32:31.390
> 
> 标签：java, jpa

假设我正在循环创建 JPA 查询：

```
for(A elem : collection) {
  emanager.createQuery("update A a set a.x=:y where a.id=:id")
          .setParameter("id",elem.id)
          .setParameter(":y", 123)
          .executeUpdate();
} 
```

我可以重复使用返回的`Query`实例吗？

```
Query query = emanager.createQuery("update A a set a.x=:y where a.id=:id");
for(A elem : collection) {
  query
          .setParameter("id",elem.id)
          .setParameter(":y", 123)
          .executeUpdate();
} 
```

它是否适用于所有实例`Query`？`NamedQuery`, `NativeQuery`, 等等 当然，我说的是在同一个事务中重用一个实例`EntityManager`，即在同一个事务中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-05T18:20:15.343

我尝试了完全相同的事情，在循环中执行相同的查询（更新），并且在第二次执行时得到“数据不匹配”。所以我把 createQuery 放在循环中，它工作正常。不完全是我所期望的。我会说这不是 JPQL - 它是 NamedNativeQuery。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-27T14:37:36.023

它可用于查询。据我尝试工作。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-06-27T16:43:27.873

为什么不尝试使用 EntityManager 方法来持久化、更新、删除数据库中的寄存器？

```
emanager.persist(elem); // creates a register in the database, set the annotation for autoincrement id of new registers in the Entity for better performance.

emanager.merge(elem); // updates a register in the database, chance the values of the Entity values and merge to persist changes to the register.

emanager.remove(emanager.merge(elem)); // delete registers from database, you need to merge de entity before deleting to avoid deleting problems. 
```

所以你可以这样做并且可以正常工作：

```
for(A elem : collection) emanager.merge(elem); 
```

# reportviewer - 用于 SQL Server 2012 的 Report Viewer 2012 Redistributable

> ID：11228603
> 
> 赞同：2
> 
> 时间：2012-06-27T14:33:02.553
> 
> 标签：reportviewer, sql-server-2012

刚刚从 SQL Server 2008 R2 迁移到 SQL Server 2012。所以我遇到了麻烦：我找不到 Report Viewer 2012 Runtime。我在 Microsoft 下载中发现只有 CTP 和 Beta 版本。我在哪里可以下载它？谢谢你。

# asp.net-mvc-3 - 使用 LINQ .Join() 方法

> ID：11228604
> 
> 赞同：0
> 
> 时间：2012-06-27T14:33:03.607
> 
> 标签：asp.net-mvc-3, linq, entity-framework

我想使用`.Join()`LINQ 中的方法来执行以下 SQL：

`select * from Enquiries e, QuoteLines q where e.EnquiryId = q.EnquiryId and e.AccountNum = '123' and q.LineNumber = 'ABC123'`

用于`AccountNum`和`LineNumber`将动态传递给方法的参数。

我将如何转移它以使用 LINQ`.Join()`方法？

```
public ActionResult EnquirySearch(string id)
{
    var enquiries = new List<Enquiries>();    

    if(id.Contains(' '))
    {
        string[] searchArr = id.Split(' ');
        // want to do my LINQ here
        // this will be split so the first element in the array is the AccountNum
        // and the second element in the array is the LineNumber
    }
    else
    {
        enquiries = context.Enquiries.Where(x=>x.QuoteRef.Contains(id) 
        || x.AccountNum.Contains(id) || x.Owner.Contains(id));
    }
    return View(enquiries);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:37:18.500

在表达式查询中表达联接更容易，它类似于：

```
var query = from e in Enquiries
            join q in QuoteLines on e.EnquiryId equals q.EnquiryId
            where e.AccountNum == accountNum && q.LineNumber == lineNumber
            select new { Enquiry = e, QuoteLine = q }; 
```

或者您可以“早期”过滤 - 这会在 LINQ to Objects 中产生影响，但几乎可以肯定不会在 LINQ to SQL / EF 中：

```
var query = from e in Enquiries
            where e.AccountNum == accountNum
            join q in QuoteLines.Where(qq => qq.LineNumber == lineNumber)
              on e.EnquiryId equals q.EnquiryId
            select new { Enquiry = e, QuoteLine = q }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T22:00:01.013

使用加入（）

```
var query = context.Enquiries.Where(e=>e.AccountNum == accountNum)
.Join(context.QuoteLines.Where(q=>q.LineNumber==lineNumber),
 e => e.EnquiryID, q => q.EnquiryID,(e,q)=>e); 
```

这似乎更棘手，但它确实有智能感知支持。我不知道第四个参数是如何工作的，但确实如此。

# python - 我应该如何在我的 Mac 上设置我的第一个 MySQL 数据库？

> ID：11228605
> 
> 赞同：0
> 
> 时间：2012-06-27T14:33:04.190
> 
> 标签：python, mysql, database

这是我第一次尝试建立数据库。我的意图是将它与 Python 一起使用来创建一个允许用户登录的网站，因此它需要保存用户的电子邮件地址、姓名、密码等。我知道我以后可以使用行和列来做到这一点，但我是还没有。现在，我想知道如何创建一个新的 MySQL 数据库。这是在终端中做的事情，还是我用 Python 编写然后执行它？现在我所拥有的只是 Python 文件中的以下内容。在终端中执行它什么也没返回，这让我相信我已经安装了 MySQL；现在只是实际创建我的第一个数据库的问题。

```
#!/usr/bin/python

import MYSQLdb 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T14:49:36.663

您的脚本没有返回任何错误的事实并不意味着安装了 MySQL，只是安装了 Python 的 MySQL 客户端（安装了 MySQLdb）。

您可以通过尝试通过命令行连接来测试您的机器上是否运行了 mysql：

```
mysql -u username -ppassword 
```

如果你确实需要在你的机器上安装 MySQL，这个页面： [http ://blog.mclaughlinsoftware.com/2011/02/10/mac-os-x-mysql-install/](http://blog.mclaughlinsoftware.com/2011/02/10/mac-os-x-mysql-install/)

包含分步安装指南。（基本上下载 MySQL 包并将其安装在您的 Mac 上，设置用户名和密码）。

然后，您需要使用命令行或图形客户端（谷歌为此，有几个选项）登录 MySQL，并创建一个新数据库，这可能取决于您的客户端（图形或非图形），但谷歌“创建新的数据库mysql”，你会很好。

此外，您需要创建一个新用户并授予先前创建的数据库的权限（同样，google 是您的朋友）。

完成所有这些后，您的机器上运行了一个数据库，准备好接收数据，您就可以开始使用它了！

现在到蟒蛇...

如果您已经安装了 MYSQLdb 包（它在运行时不会导致错误的事实似乎表明您已经安装了），那么您需要连接到它并执行您的查询：

```
db=MySQLdb.connect(host="localhost",user="youruser",passwd="yourpwd",db="yourdb")
db.query("select * from your_table")
result = db.store_result()
rows = []
for row in result.fetch_row(0):
    rows.append(row) 
```

然后对你的行做任何你想做的事情......有关更复杂的示例，请参阅 MySQLDB 上的文档。

我希望这能让你开始。

# python - 无法从 ipv4 网络解析 ipv6 dns 名称

> ID：11228606
> 
> 赞同：1
> 
> 时间：2012-06-27T14:33:04.207
> 
> 标签：python, dns, screen-scraping, cdn, ipv6

我遇到了一个奇怪的问题，这似乎是 ipv6 与 ipv4 dns 名称的问题。

我有一个实时刮板，它在我的服务器上运行，该服务器在 ipv6 网络上运行。抓取后，此抓取器通过 ajax 调用将一些 url 返回到网页上的图像，然后通过抓取器返回的链接将图像显示在我本地机器上的浏览器中。但是这些 url 在我的本地网络上没有解析。我的本地机器不在 ipv6 网络上运行。此外，被抓取的网页通过 CDN 托管图像，因此抓取器将根据其运行的机器/位置返回结果/指向图像的链接。

举个例子：

服务器抓取[http://www.flipkart.com/it-s-not-bike-0224060872/p/itmczyx5zzktubhy?pid=9780224060875](http://www.flipkart.com/it-s-not-bike-0224060872/p/itmczyx5zzktubhy?pid=9780224060875)并返回以下链接：

[http://img-ipv6.flixcart.com/image/book/8/7/5/it-s-not-about-the-bike-my-journey-back-to-life-275x275-imadarucmnec3hds.jpeg](http://img-ipv6.flixcart.com/image/book/8/7/5/it-s-not-about-the-bike-my-journey-back-to-life-275x275-imadarucmnec3hds.jpeg)

当我从位于另一个地理位置的本地计算机然后是我的服务器（刮板）访问此图像时，它无法解析上面的链接。在我的本地机器上使用 curl 它报告：

curl: (7) 无法连接到 2001:df0:23e:9002::17: 网络不可达

在服务器上做同样的事情可以完美地下载图像。

我不确定为什么指向图像的链接应该在一个网络中工作而不在另一个网络中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:37:58.943

显然`img-ipv6.flixcart.com`应该只解析为 IPv6 地址，而不是 v4 地址：它只是具有`2001:df0:23e:9002::17`您显然无法从 PC 访问的 IPv6 地址。

通过 IPv4 连接，图像的地址为[http://img7.flixcart.com/image/book/8/7/5/it-s-not-about-the-bike-my-journey-back-to- life-275x275-imadarucmnec3hds.jpeg](http://img7.flixcart.com/image/book/8/7/5/it-s-not-about-the-bike-my-journey-back-to-life-275x275-imadarucmnec3hds.jpeg)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:37:27.400

服务器名称`img-ipv6.flixcart.com`只有一个 IPv6 地址。它没有 IPv4 地址。

您将只能在具有 IPv6 连接的服务器上访问该主机名。

# oracle - Oracle：通过 dbms_scheduler 启动作业时出错

> ID：11228608
> 
> 赞同：0
> 
> 时间：2012-06-27T14:33:05.873
> 
> 标签：oracle, jobs

这是我使用的指令：

```
BEGIN
  DBMS_SCHEDULER.RUN_JOB(25950);
  commit;
END; 
```

这是我得到的错误

```
ORA-00931: missing identifier
ORA-06512: at "SYS.DBMS_UTILITY", line 132
ORA-06512: at "SYS.DBMS_UTILITY", line 164
ORA-06512: at "SYS.DBMS_UTILITY", line 218
ORA-06512: at "SYS.DBMS_SCHEDULER", line 437
ORA-06512: at line 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:36:31.397

`run_job`期望`job_name`，而不是 id。

从[文档](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_sched.htm#autoId67)：

```
DBMS_SCHEDULER.RUN_JOB (
   job_name                IN VARCHAR2,
   use_current_session     IN BOOLEAN DEFAULT TRUE); 
```

# visual-studio-2010 - 根据项目位置更改 Visual Studio 的颜色？

> ID：11228609
> 
> 赞同：5
> 
> 时间：2012-06-27T14:33:06.900
> 
> 标签：visual-studio-2010, visual-studio

我想有一些指标表明我正在使用的项目要么在 dev 分支中，要么在 release 分支中。有没有办法根据项目路径的一部分在 Visual Studio 中设置某些东西的颜色？

我认为 Productivity Power Tools 选项卡颜色编码会很好用，只是他们的 Reg Ex 选项只查看选项卡名称，而不是整个路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:05:36.140

我安装了 VSCommands 2010 Lite，它是免费的，可以根据解决方案的文件路径将文本放在标题栏中。所以对我来说，我有路径“ **Main\Source\Solution.sln** ”和“ **Release\[releaseNum]\Solution.sln** ”，它们在标题栏中显示为“ **Solution.sln - Main Source** ”和“ **Solution.sln -分别释放[releaseNum]** ”。

```
Friendly Name: {solutionName} - {branchName} {version}
Friendly Name - Solution Path Regex: .*\\(?<branchName>.*).*\\(?<version>.*)\\(?<solutionName>.*(?:.sln)) 
```

实际上我重复 {branchName} {version} 多次以使其更明显。这对我的目的来说足够好。

# java - “getAppletContext().showDocument(new URL”不重定向

> ID：11228611
> 
> 赞同：0
> 
> 时间：2012-06-27T14:33:23.510
> 
> 标签：java, applet

我在我的主代码中集成了以下代码：

```
import java.applet.*;
import java.awt.Graphics;
import java.net.MalformedURLException;
import java.net.URL;

public class AppletExample extends Applet {

    public void init() {

       try {
             getAppletContext().showDocument(new URL("http://www.google.com"), "_blank");
       }
       catch (MalformedURLException ex) {
            System.out.println(ex.getMessage());
       }
    }

    public void paint( Graphics g ) {

       g.drawString("Go Google", 0,100);
    }

} 
```

这个想法是`getAppletContext().showDocument(new URL("http://www.google.com"), "_blank");`在小程序中重定向用户，但它不会这样做。除了_blank，我还尝试过不同的东西，比如_self

该怎么办？为什么不重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:43:26.360

有多种情况会发生这种情况：

首先，引用`AppletContext`-JavaDoc：

> [**无效的显示文档（URL 网址）**](http://docs.oracle.com/javase/6/docs/api/java/applet/AppletContext.html#showDocument%28java.net.URL%29)
> 
> 请求浏览器或小程序查看器显示由 url 参数指示的网页。浏览器或小程序查看器确定显示网页的窗口或框架。**不是浏览器的小程序上下文可能会忽略此方法。**

并引用您的特定方法调用（这是重载版本）：

> [**void showDocument(URL url, 字符串目标)**](http://docs.oracle.com/javase/6/docs/api/java/applet/AppletContext.html#showDocument%28java.net.URL,%20java.lang.String%29)
> 
> [...] 小程序查看器或浏览器可以*随意忽略`showDocument`。*

因此，如果您没有在浏览器中查看 Applet，或者浏览器确实决定忽略您的呼叫，您将无能为力。

* * *

此外，它似乎取决于 VM 的实现，如果它甚至首先被支持。请参阅 Apple Mailing-List 中的这篇[较早的帖子](http://lists.apple.com/archives/java-dev/2001/Apr/msg00658.html)。

最后但并非最不重要的一点是，当我自己尝试时，它起作用了，但是该请求被 PopUp-Blocker 阻止（并且必须手动授予）。我用了：

*   火狐浏览器 12.0
*   Java(TM) SE 运行时环境（内部版本 1.7.0_04-b20），64 位
*   全部在 Linux 上

# html - 如何制作边距：0px 自动适用于围绕浮动 div 的容器

> ID：11228614
> 
> 赞同：2
> 
> 时间：2012-06-27T14:33:26.760
> 
> 标签：html, css, css-float

我有一个容器 (#out) 包装一个容器 (#inner)，该容器本身承载一些浮动的容器 (#innest)。

如果我指定宽度，为什么 margin: 0px auto 仅将容器#inner 居中，我该如何避免这种情况？我.innest 的数量可能不同，所以我无法为#inner 设置固定宽度。

[http://jsfiddle.net/dyyes/](http://jsfiddle.net/dyyes/) => 不工作 [http://jsfiddle.net/dyyes/1/](http://jsfiddle.net/dyyes/1/) => 使用固定宽度

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:37:11.537

检查小提琴的工作：

[http://jsfiddle.net/dyyes/8/](http://jsfiddle.net/dyyes/8/)

```
#inner
{
    text-align:center;    
    border: 1px solid #C00;
}
.innest{
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:35:47.783

`text-align:center;`像[这样](http://jsfiddle.net/dyyes/6/)使用

# java - 在java中使用单独的线程调用多个Web服务？

> ID：11228616
> 
> 赞同：-1
> 
> 时间：2012-06-27T14:33:31.053
> 
> 标签：java, multithreading, struts

我必须在一种方法中调用多个 Web 服务，每个 Web 服务由并发/并行中的单独线程执行。每个 Web 服务都会返回一个`ArrayList`. 注意：在这种情况下，某些 Web 服务可能会失败或需要更多时间来处理响应，我必须跳过这些失败结果。我怎样才能做到这一点？我试过这个[示例代码](http://jsfiddle.net/hari034/35nKX/)。

```
public class MultiThreadsEx{     

    public class Task implements Runnable {  
    private Object result;          
    private String id;      
    int maxRowCount = 0;    
    public Task(String id) {              
        this.id = id;          
    }            
    public Object getResult() {
        return result;          
    }            
    public void run() {              

        try {  
            System.out.println("Running id=" + id+" at "+Utilities.getCurrentJavaDate("DD/MM/YYYY HH:MM:SS"));  
            if(id.equalsIgnoreCase("1")){
                /**Getting Details from Amazon WS*/
                maxRowCount = AmazonUtils.getweather(cityname);
            }else if(id.equalsIgnoreCase("2")){
                /**Getting Details from Google WS* /
                maxRowCount = GoogleUtils.getWeather(cityName);
            }
            // call web service                  
            //Thread.sleep(1000);                  
            //result = id + " more";      
            result = maxRowCount;
        } catch (InterruptedException e) {                  
            // TODO do something with the error                 
            throw new RuntimeException("caught InterruptedException", e);              
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }         
    }      
    }       
    public  static void runInParallel(Runnable runnable1, Runnable runnable2) {          
        try {              
            Thread t1 = new Thread(runnable1);  
            Thread t2 = new Thread(runnable2);                
            t1.start();              
            t2.start();                

        } catch (Exception e) {             
            // TODO do something nice with exception              
            throw new RuntimeException("caught InterruptedException", e);          
        }      
    }        
    public void foo() {  
        try {
            Task task1 = new Task("1");   
            Task task2 = new Task("2");            
            runInParallel(task1, task2);            
            System.out.println("task1 = " + task1.getResult()+" at "+Utilities.getCurrentJavaDate("DD/MM/YYYY HH:MM:SS"));          
            System.out.println("task2 = " + task2.getResult()+" at "+Utilities.getCurrentJavaDate("DD/MM/YYYY HH:MM:SS"));
        } catch (Exception e) {
            //TODO Auto-generated catch block
            e.printStackTrace();
        }       
    } 
```

但是`run()`返回类型是 void 那么如何返回结果呢？高度赞赏示例。我是多线程/并发线程概念的新手，所以如果我做错了什么，请指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:39:47.013

考虑替换`Runnable - run`为`Callable - call`. 这将允许您从线程任务返回结果：

```
public class Task implements Callable<Object> { 

     private Object result;

     public Object call() {
          // compute result
          return result;
     } 
} 
```

现在使用`ExecutorService`：

```
public static void runInParallel(Callable<Object> c1, Callable<Object> c2) {                       
        ExecutorService exec = Executors.newFixedThreadPool(2);
        Future<Object> f1 = exec.submit(c1);
        Future<Object> f2 = exec.submit(c2);
} 
```

稍后在代码中您可以使用`f1.get()`并`f2.get()`等待任务的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:47:08.033

将 Runnable 的结果传递回创建它的对象的常用方法是将创建对象传递给 Runnable 的构造函数。任务完成后，您可以调用创建对象中的方法并传递结果数据。

# ruby-on-rails - ActiveRecord has_many ：通过多个来源的关联

> ID：11228621
> 
> 赞同：0
> 
> 时间：2012-06-27T14:33:39.240
> 
> 标签：ruby-on-rails, ruby, activerecord, associations, has-many-through

我有一个自引用`has_many :through`模型，它有另一个 has_and_belongs_to_many 和另一个模型。基本上是这样的：

```
class Foo << ActiveRecord::Base
  has_and_belongs_to_many :bars
  has_many :foo_links
  has_many :foo_parents, :through => :foo_links, :foreign_key => :foo_parent_id, :class_name => "Foo"
  has_many :foo_children, :through => :foo_links, :foreign_key => :foo_child_id, :class_name => "Foo"
end 
```

我希望能够让一个`foo_child`项目能够属于`bars`它所分配的任何`bars`一个，以及它的一个`foo_ancestors`（`foo_parents`及其`foo_parents`等）被分配的任何一个。我基本上希望把这样的东西放在一起：

```
has_many :inherited_bars, :through => :foo_parents, :source => [:bars, :inherited_bars] 
```

我从来没有见过这样的例子，但我想知道是否有可能有一个关联是从一个直通关联合并的关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:40:56.430

我认为 has_many 关联总是与某处的 id 绑定以指示关系，并允许您修改它。例如。您可以向 has_many 数组添加一个新元素，并将结果持久化回数据库。如果您可以将两个源合并在一起，您将无法通过此链接行。

一种可能的方法是这种只读方式：

```
has_many :a
has_many :b

def sum
  a + b
end 
```

# spring - Spring Roo Web MVC 插入 - 无默认主键

> ID：11228622
> 
> 赞同：0
> 
> 时间：2012-06-27T14:33:45.793
> 
> 标签：spring, primary-key, spring-roo

我有一个由 Spring roo 生成的 Web MVC 项目。我对 MSSQL DB 进行了逆向工程，需要创建自己的主键，但无法使用 Roo 生成的输入进行插入（预计自动增量或自生成 ID）。有任何想法吗？尝试此操作时，我从控制台收到以下消息。

```
ERROR org.hibernate.util.JDBCExceptionReporter - Field 'id' doesn't have a default value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:19:21.723

@ManyToOne/@JoinColumn 的 DBRE 代码生成似乎有点不正确。代码生成器错误地将此类字段设置为“insertable = false”，然后在插入引用表期间忽略此特定外键列引用。如果需要，将其更改为“insertable = true”以及“可更新”，并且应该很好。

# c# - C# WPF 自定义安装位置

> ID：11228624
> 
> 赞同：0
> 
> 时间：2012-06-27T14:33:47.913
> 
> 标签：c#

因此，IT 向导巧妙地放置了新的 GPO，以防止用户 PC 访问 Windows 中的 AppData 文件夹结构。但是，当您发布应用程序时，安装的应用程序默认为 C:\user\roaming\appdata，那么应用程序将无法再访问该目录。

如何创建自定义安装路径供应用程序使用？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:45:04.227

[这个关于更改 InstallLocation 属性的链接有](http://www.hardcodet.net/2008/12/arpinstalllocation-for-visual-studio-setups)帮助吗？

另请记住，用户设置存储在 AppData 文件夹中，因此如果您使用它，您可能也需要解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:48:32.057

我将创建一个**安装和部署**项目来处理安装。**使用设置向导**项目模板很容易添加。在此项目中，您将能够指定应用程序文件夹的默认位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:54:05.650

我的假设如果您使用 ClickOnce 部署，则无法定义安装路径。ClickOnce 的想法是确保它不需要管理员权限来安装更新，因此它保存在用户应用程序配置文件下。这里有[讨论](http://social.msdn.microsoft.com/Forums/en/winformssetup/thread/84b5ed72-2406-4518-97e7-f7c6cf7132a7)

如果有理由放置您的数据并使其免受 ClickOnce 更新的影响。请参阅此处[保护数据免受 ClickOnce 部署的影响](http://robindotnet.wordpress.com/2009/08/19/where-do-i-put-my-data-to-keep-it-safe-from-clickonce-updates/)

@Kevin 提到的另一个选项创建独立的 MSI 安装程序将允许您指定应用程序安装路径，但这将是手动干预。

我个人不知道为什么需要阻止访问用户 AppData 文件夹（也许重新定义 GPO 以允许某些应用程序文件夹访问）如果您想继续使用 ClickOnce 部署可以解决这个问题

# typo3 - 从虚拟和源代码安装 TYPO3

> ID：11228626
> 
> 赞同：0
> 
> 时间：2012-06-27T14:33:51.583
> 
> 标签：typo3

我想使用虚拟包和源包安装typo3，它是如何完成的？我将 tar.gz 解压缩到每个自己的目录中还是将它们混合到一个目录中？

即使创建 ENABLE_INSTALL_TOOL 文件并授予权限，安装仍然被锁定。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:38:38.207

也有`source+dummy`可用的软件包，下载并解压缩。仅当您要添加缺少的元素或更新源时，单独下载`dummy`或打包才有意义。`source`

[http://typo3.org/download/](http://typo3.org/download/)

# jquery - jQuery使用输入和 div 进行模拟 我有一个输入字段和一个带有跨度子项的分区 option 1 option 2 option 3 option 4

> ID：11228628
> 
> 赞同：1
> 
> 时间：2012-06-27T14:34:05.573
> 
> 标签：jquery, select, html, input, focus

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:44:14.303

我想我找到了 [http://jsfiddle.net/NQbgX/1/](http://jsfiddle.net/NQbgX/1/)

```
$('body').click(function(){
    if (!$("#input").is(":focus")) {
        $('#content').hide();
    }           
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:54:44.583

您可以`setTimeout`像[这样](http://jsbin.com/uxerus/2/edit)使用它，以便有足够的时间点击跨度进行注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:14:26.330

我认为这是正确的用法：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<style type="text/css">
#content { margin:0px; padding:0px; list-style-type:none; display:none;}
#content li { margin:0px; padding:0px; list-style-type:none;}
#content li a { 
    display:inline-block; 
    padding:10px; 
    text-align:left; 
    color:white; 
    background-color:black;
    text-decoration:none; 
    width:150px;
}
​#input ​{ height:25px; width:167px;}​
</style>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function(e) {
    $('#input').focus(function(){
        $('#content').slideDown('fast');
    });
    $('#content li a').click(function(){
        var x = $(this).attr('title');
        $('#input').attr('value',x);
        $('#content').slideUp('fast');
    }); 
});
</script>
</head>
<body>
<input type="text" id="input" name="input" value="" />
<ul id="content">
    <li><a href="#" title="option1">Option1</a></li>
    <li><a href="#" title="option2">Option2</a></li>
    <li><a href="#" title="option3">Option3</a></li>
    <li><a href="#" title="option4">Option4</a></li>
</ul>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
</body>
</html> 
```

然后只需在输入旁边添加一个箭头图像，以便 #content 在单击时会向上滑动。

# php - ajax jquery 未解决

> ID：11228631
> 
> 赞同：0
> 
> 时间：2012-06-27T14:34:26.103
> 
> 标签：php, jquery, ajax

这个问题综合了两个尚未解决的问题：

我正在尝试实现一些 ajax 方法来在网页上发布一些评论。我使用这样的ajax方法：

```
<button id="my-btn">Make an Ajax request!</button>

<script >
  $('#my-btn').click(function() {
    var comment = $('#id1').val();   
    var m = {$id2};
     var data = new Array();
     data[0]= comment;
    data[1]= m;

    $.post('{$postURL}', data, function(callback_data){

    alert('hello');

    });

  });
</script> 
```

其中 m = {$id2}; 是由于一个聪明的变量。

alert('hello') 有效，但未处理 php 代码： {$postURL} 需要方法 comment(){$comment = $_POST[$data[0]]; $m = $_POST[$data[1]];...}。所以，postURL 就像："index.php?post=comment"，方法是comment()。当然，当我用“index.php?post=comment”替换 {$postURL} 时，没有任何反应，因为我仍然有 alert('hello') 消息，但方法 comment() 没有处理任何内容。这个方法是否被调用？或者是否存在错误的语法，例如 $_POST[$data[0]] 和 $_POST[$data[1]] 无法通过 comment() 方法识别。

index.php 的工作方式是将 : 重定向到另一个 php 页面，将其命名为 mypage.php，我们可以在其中找到 comment() 方法。

此外，一些非常奇怪的事情：当我用 $.post("{$whatever}" 破坏 $.post("{$postURL}" 时，我仍然有一个 alert('hello') 消息！更奇怪的是，当我放一个alert(callback_data); 在回调函数中，我收到一条巨大的警报消息，其中包含我的整个 php 代码......

最好的，纽本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:40:21.357

Smarty 使用这些花括号，因此您需要使用 {ldelim} 和 {rdelim} 将它们弹出，而且您不会将帖子数据作为 assoc 数组发送，因此不会设置 $_POST['comment'] 等 - 试试这个反而：

```
<script>
  $('#my-btn').click(function() {ldelim}
    var comment = $('#id1').val();   
    var m = {$id2};
    var data = {ldelim}
      comment: $('#id1').val(),
      m: {$id2}
    {rdelim};
    $.post("{$postURL}", data, function(callback_data){ldelim}
      alert('hello');
    {rdelim});
  {rdelim});
</script> 
```

# c# - c# / .net 文本框行为

> ID：11228634
> 
> 赞同：0
> 
> 时间：2012-06-27T14:34:31.263
> 
> 标签：c#, asp.net, .net, textbox

我不时遇到的事情我不知道为什么会发生

如果我在按钮单击事件中采用简单的代码行：

```
textbox1.Text = textbox2.Text; 
```

单击按钮时，textbox1 中的文本消失并且 textbox2 未更新。两个文本框都将 EnableViewState 设置为 true。

如果页面加载时 textbox1 为空，则会发生这种情况，但是如果它是在页面加载时从数据库中填充的，那么 textbox2 将采用 textbox1 中的文本。

网上好像没找到合适的解释，谁能给点意见？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T14:37:29.063

作业从右到左。您正在将 textbox2 中的文本分配给 textbox1 的文本。这就是为什么 textbox2 没有更新，而 textbox1 为空白的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:48:33.233

当我单击按钮时页面再次加载，所以如果我放

```
if (!this.IsPostBack) 
```

在页面加载中并放置所有其他代码，例如从选择中填充文本框，然后它可以正常工作

谢谢

# c# - javascript函数中的C#参数

> ID：11228635
> 
> 赞同：2
> 
> 时间：2012-06-27T14:34:32.780
> 
> 标签：c#, javascript, asp.net

我需要使用 C# 参数调用 JS 函数。

这是在 HTML 表中。

```
 <td onclick="OpenWindow(<%= cbYear.SelectedValue%>, 2);return false;">
        &nbsp;
    </td> 
```

JS函数：

```
function OpenWindow(annee, mois) {

    //Call existing global function to obtain a reference to the window manager
    var oManager = GetRadWindowManager();
    //Show a particular existing window
    oManager.open(null, "RadWindow1");
} 
```

问题只是它不再适用于参数（它完美地工作没有）...有谁知道为什么，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:44:19.720

尝试以下操作：

```
<td onclick='<%= "OpenWindow(" + cbYear.SelectedValue + ", 2);return false;" %>'>
        &nbsp;
</td> 
```

或这个：

```
<td id="td1" runat="server">
   &nbsp;
</td> 
```

从代码中：

```
td1.Attributes.Add("onClick", "OpenWindow(" + cbYear.SelectedValue + ", 2);return false;"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:55:10.337

我唯一一次看到`<%=...%>`将 HTML 控件（在本例中）呈现到浏览器中时，使用该属性`<td>`将其转换为服务器端控件。`runat="server"`

**如果**是这种情况，我建议您将以下内容放在代码隐藏文件中（假设您有代码隐藏），然后`onclick`从标记中删除

```
myTdCell.Attributes("onclick") = string.Format("OpenWindow({0},2);", cbYear.SelectedValue); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:42:23.577

尝试在您的动态值周围加上引号：

```
<td onclick="OpenWindow('<%= cbYear.SelectedValue%>', 2);return false;">
        &nbsp;
</td> 
```

否则，js 可能会尝试将*值*解释为变量。

# objective-c - UILabel 文本右对齐

> ID：11228637
> 
> 赞同：8
> 
> 时间：2012-06-27T14:34:37.503
> 
> 标签：objective-c, ios, xcode, ios5

我希望我的文字应该正确对齐。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:@"lisn"];
cell=[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"lisn"] autorelease];
CGSize  textSize = { 210.0, 10000.0 };
CGSize size = [[gMessageArray objectAtIndex:indexPath.row] sizeWithFont:[UIFont systemFontOfSize:12] constrainedToSize:textSize lineBreakMode:UILineBreakModeWordWrap];

UILabel *lisnerMessage=[[[UILabel alloc] init] autorelease];
lisnerMessage.backgroundColor = [UIColor clearColor];
[lisnerMessage setFrame:CGRectMake(75 ,20,size.width + 5,size.height+2)];
lisnerMessage.numberOfLines=0;
lisnerMessage.textAlignment=UITextAlignmentRight;
lisnerMessage.text=[gMessageArray objectAtIndex:indexPath.row];
[cell.contentView addSubview:lisnerMessage];
return cell
} 
```

但我的文字不正确请帮助

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T14:36:57.567

因为您正在使用 sizeWithFont 然后将框架设置为该大小，所以您的文本正确对齐。尝试在标签中添加浅灰色的背景色，看看我在说什么。您的标签应设置为与表格单元格相同的大小，并允许文本在其中流动。然后它将向右对齐。

**更新样本**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"lisn"];
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"lisn"];

    UILabel *lisnerMessage = [[UILabel alloc] init];
    lisnerMessage.backgroundColor = [UIColor clearColor];
    [lisnerMessage setFrame:cell.frame];
    lisnerMessage.numberOfLines = 0;
    lisnerMessage.textAlignment = NSTextAlignmentRight;
    lisnerMessage.text = [gMessageArray objectAtIndex:indexPath.row];
    [cell.contentView addSubview:lisnerMessage];

    return cell
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-09T04:12:53.860

标签右对齐

```
yourLabel.textAlignment = NSTextAlignmentRight; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T07:34:39.550

最后我解决了我的问题。我犯了一个小错误

```
[lisnerMessage setFrame:CGRectMake(75 ,20,size.width + 5,size.height+2)]; 
```

我只是删除`size.width`并给出我的特定坐标 200 之后文本对齐。

```
[lisnerMessage setFrame:CGRectMake(75 ,20,200,size.height+2)]; 
```

谢谢大家的回复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:44:50.537

为什么不在界面生成器/情节提要中制作标签并选择“右对齐”选项？然后将其连接为一个名为 lisnerMessage 的属性， `lisnerMessage.text=[gMessageArray objectAtIndex:indexPath.row];` 这将显着减少您编写的代码量并且绝对可以工作。

# jquery - 从文本框中获取 txt 框 id

> ID：11228638
> 
> 赞同：0
> 
> 时间：2012-06-27T14:34:41.303
> 
> 标签：jquery, ajax

下午，

我正在为从数据库返回的项目的代码中的多个文本框设置 ID。例如...

```
<input type="text" id="abcd1234" value="0.00"> 
```

基本上，在返回项目时设置了 id，我需要使用 jQuery 获取 id，这样我就可以用新价格更新文本框中的值。

我需要返回 1）id 和 2）值，以便我可以处理它。有人能建议我怎么做吗？

更新：这是我要使用的更新功能...请忽略传递过来的数据，因为一旦我能够从上面提到的文本框中获取价格，我就会更新它。- 删除数据。:)

```
$('.update').live('click', function () {
    $('#saving').show();

    $.ajax({ type: "POST",
        url: "../Web.asmx/UpdateData",
        data: **JSON will go here**,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response) {
            $('#saving').hide();
            $('#infoMsg').show();
            $('#infoMsg').addClass('er-green');
            $('#infoMsg').html("Product was updated successfully.");
        },
        error: function (msg) {
            $('#saving').hide();
            $('#infoMsg').show();
            $('#infoMsg').addClass('er-yellow');
            $('#infoMsg').html("We are unable to update the product at this time.");
        }
    });
}); 
```

非常感谢...

艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:59:19.830

好的，所以我所做的是设置表格行的 ID，这是最简单的选择！

一旦我有了这个，我就能够获取 sku/id 和文本框值并像这样更新数据库。

非常感谢大家的帮助和解决方案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:37:23.450

没有真正干净的方法来做到这一点——通常，它不应该真的这样做。使用 ID 的意义与此相反——使用 id 查找控件，而不是使用其他属性查找 ID。（提示：如果您真的想这样做，请查看您可以放在控件上的其他属性，并使用它进行搜索。）

和编辑：只是想到了一个更好的方法。将该输入包装在一个 div 中，通过 id 找到该 div，然后将其解析为子元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:38:51.940

不确定您想要哪个事件的输入元素的 ID。加载 DOM 后，以下脚本将为您提供文本类型的所有 Input 元素的 ID

```
$(function(){

  var items=$("input[type='text']");
  $.each(items,function(){
    var item=$(this);

    var itemId=item.attr("id");  // get the ID of element
    alert(itemId);

    item.val("New value");  // set new value
  });

}); 
```

工作示例[http://jsfiddle.net/p5zbT/4/](http://jsfiddle.net/p5zbT/4/)

**编辑：根据评论**

要让他的文本属于一个表，请像这样更改您的选择器

```
 var items=$("#dataTable input[type='text']"); 
```

这将选择表（或任何 HTML 元素）内`input`类型为的元素。`text``ID``dataTable`

工作样本：http: [//jsfiddle.net/p5zbT/9/](http://jsfiddle.net/p5zbT/9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:39:13.177

```
$.each($('input[type=text]'), function(i,obj){
  console.log('ID : '+$(this).attr('id')+', Value : '+$(this).val());
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T14:39:45.757

不是很清楚你在问什么，但是如果你需要遍历所有输入元素并对它们做一些事情，你可以使用下面的 jQuery 代码

```
$("input[type='text']").each(function() {
    // do work here
    console.log(this.id);
}); 
```

# ios - 重新加载 UITableView 数据无法正常工作

> ID：11228642
> 
> 赞同：0
> 
> 时间：2012-06-27T14:34:55.013
> 
> 标签：ios, uitableview, reload

我有一个从我的 web 服务接收到的数组对象，用于填充 UITableView。我正在尝试实现一种从 web 服务获取新数组并重新定义填充表的数组然后重新加载 tableView 以使用该数组中的新对象的方法。这是应该完成工作的方法：

```
WSCaller *caller = [[WSCaller alloc]init];

    arrayFromWS = [caller getArray];
    [self.table reloadData]; 
```

它不起作用。有任何想法吗？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

NSString *CellIdentifier = @"productsCellIdentifier";

ProductsCell *cell = nil;

cell = (ProductsCell *)[self.table dequeueReusableCellWithIdentifier:CellIdentifier];

if (!cell) 
{
    NSArray *topLevelObjects = [[NSBundle mainBundle]loadNibNamed:@"ProductsCell" owner:nil options:nil];

    for (id currentObject in topLevelObjects) 
    {
        if ([currentObject isKindOfClass:[ProductsCell class]]) 
        {
            cell = (ProductsCell *)currentObject;
            break;
        }
    }
}

if (productsMutableArray) 
{
    cell.backgroundColor = [UIColor whiteColor];
    cell.productName.text = [[self.productsMutableArray objectAtIndex:indexPath.row]objectForKey:@"name"];

}

return cell;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [productsMutableArray count];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:02:34.743

您的数据源实现是错误的（或者至少是片段）。

首先，您没有保留 arrayFromWS：

```
WSCaller *caller = [[WSCaller alloc] init];
arrayFromWS = [caller getArray];
[self.table reloadData]; 
```

其次，在您的 tableView:numberOfRowsInSection: 和 tableView:cellForRowAtIndexPath: 方法上，您使用的是不同的数组 (productsMutableArray)。

为了解决这个问题，我建议将上面的代码更改为（假设您的 productsMutableArray 是一个强/保留属性：

```
WSCaller *caller = [[WSCaller alloc] init];
self.productsMutableArray = [NSMutableArray arrayWithArray:[caller getArray]];
[self.table reloadData]; 
```

# python - windows下python应用的配置文件存放在哪里

> ID：11228645
> 
> 赞同：9
> 
> 时间：2012-06-27T14:35:08.757
> 
> 标签：python, windows

我有一个必须在 Windows 和 Linux 上运行的 python 程序。我通常将一些配置选项存储在文件中，位于程序目录的子目录中。

对于 Windows，我将其转换为 exe 并为其创建了安装程序。现在我遇到了处理配置文件的问题。

保存配置文件的最佳位置是什么？我已经读过 Windows`os.environ['APPDATA']+'myAppName'`是必须使用的路径。这是对的吗？是标准的吗？它是否可以在所有版本的 Windows 中至少从 XP 中运行（至少在英语和西班牙语中）？

PD：我对使用 ConfigParser 不感兴趣。配置文件是我自己的格式，我有用于读取/写入的工作代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T14:42:51.407

将设置存储在用户目录中通常是一个好主意。

这些天来，您可能应该使用[appdirs](https://pypi.org/project/appdirs/)库之类的东西来找到存储配置的好路径。

在大多数 Unices 下，只需在主目录中存储一个（最好是点前缀的）文件。在 OS X 下，您需要在用户的 Library 文件夹中为您的应用程序创建一个目录，并将您的文件存储在那里。在 Windows 下，APPDATA 是为您的应用程序构建目录的好地方。它应该适用于所有 Windows 本地化版本，并且看起来它也适用于 Windows XP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:39:13.073

在 Linux 上，通常将配置文件存储在用户主目录中，例如`~/.myprogramrc`. 在 Windows Vista 及更高版本上，用户也有一个主目录（/Users/username），并且建议将您的设置存储在一个子文件夹（/Users/useranem/myprogram）中。将设置存储在应用程序文件夹中会生成 UAC 警告。

在 Windows XP 上，用户没有主文件夹。一些程序选择将配置放在“我的文档”文件夹中，我想这是一个很好的地方。

# java - 什么是泛型的正确用法解决了这个编译错误？

> ID：11228649
> 
> 赞同：4
> 
> 时间：2012-06-27T14:35:21.957
> 
> 标签：java, oop, design-patterns, generics

重用前面的例子，想象一个动物园，其中新到的动物必须由动物园管理员“处理”（想想将它们登记到动物园）。每只动物的登记过程取决于其类别分类（哺乳动物、鸟类等）。

由于分类学类别之间的根本差异，这些过程有所不同 - 例如，鸟类有翅膀，哺乳动物有牙齿。您可能还会有一些对所有动物都适用的共享过程，但我在这里省略了它们。

这是代码：

动物.java

```
public interface Animal {

    public AnimalProcessor<? extends Animal> getAnimalProcessor();
} 
```

哺乳动物.java

```
public abstract class Mammal implements Animal {

    @Override
    public AnimalProcessor<Mammal> getAnimalProcessor() {

        return new MammalProcessor();
    } 

    // Specific to mammals
    public abstract int getToothCount();

} 
```

鸟.java

```
public abstract class Bird implements Animal {

    @Override
    public AnimalProcessor<Bird> getAnimalProcessor() {

        return new BirdProcessor();
    }

    // Specific to birds
    public abstract float getWingspan();
} 
```

AnimalProcessor.java

```
public interface AnimalProcessor<T extends Animal> {

    public void process(T critter);
} 
```

哺乳动物处理器.java

```
public class MammalProcessor implements AnimalProcessor<Mammal> {

    @Override
    public void process(Mammal a) {
        System.out.println("Tooth count is " + a.getToothCount());
    }

} 
```

BirdProcessor.java

```
public class BirdProcessor implements AnimalProcessor<Bird> {

    @Override
    public void process(Bird a) {
        System.out.print("Wingspan is " + a.getWingspan());
    }

} 
```

獾.java

```
public class Badger extends Mammal {

    @Override
    public int getToothCount() {
        return 40;
    }
} 
```

Condor.java

```
public class Condor extends Bird {

    @Override
    public float getWingspan() {
        return 2.9f;
    }
} 
```

ZooKeeper.java

```
import java.util.List;

public class ZooKeeper {

    public void processNewAnimals(List<Animal> newcomers)
    {
        for(Animal critter : newcomers)
        {
            AnimalProcessor<? extends Animal> ap = critter.getAnimalProcessor();

                        // This line has a compilation error!
            ap.process(critter);
        }
    }
} 
```

主类.java

```
import java.util.LinkedList;
import java.util.List;

public class MainClass {

    public static void main(String[] args) {

        ZooKeeper keeper = new ZooKeeper();

        List<Animal> animals = new LinkedList<Animal>();

        animals.add(new Badger());
        animals.add(new Condor());

        keeper.processNewAnimals(animals);

    }
} 
```

任何地方都没有警告，但**ap.process(critter)**无法编译。我知道这是因为`AnimalProcessor<Bird>`不是类型，但我看不出如何解决问题*。*`AnimalProcessor<Animal>`调用`<T extends Animal>` `getAnimalProcessor()`将返回一个合适的`AnimalProcessor<T extends Animal>`，但我无法在代码中表达这一点。

也许我一开始就不应该把 AnimalProcessor 拉出来？

当然，目标是能够在`Reptile`不改变核心的情况下添加 .

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T14:44:44.997

```
public interface Animal<THIS extends Animal<THIS>> {
    AnimalProcessor<THIS> getAnimalProcessor();
}
public abstract class Mammal implements Animal<Mammal> { 
```

有点像`Enum<E extends Enum<E>>`。

删除该方法可能是一个更好的主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:52:32.217

AnimalProcessor.java：

```
public interface AnimalProcessor<T extends Animal> {
    public void process(Animal critter);
} 
```

哺乳动物处理器.java

```
public class MammalProcessor implements AnimalProcessor<Mammal> {
    @Override
    public void process(Animal a) {
        System.out.println("Tooth count is " + ((Mammal)a).getToothCount());
    }
} 
```

# mysql - 在列（键）表中使用 id 的正确方法是什么 - 前缀或后缀

> ID：11228650
> 
> 赞同：2
> 
> 时间：2012-06-27T14:35:28.767
> 
> 标签：mysql, database

我有列 id、用户名、电子邮件和密码的表用户。我还有另一个与表用户有关系的表。

有些开发者使用前缀方式（column `id_user`），有些开发者使用后缀方式（column `user_id`）。

哪种方式是正确的，为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T14:37:08.973

没有正确的方法，只是口味问题。我会在后缀上使用前缀，因为它将名称中更有意义的部分放在首位，使其阅读速度稍快（或者我想像这样）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T14:53:49.467

使用 ID 是一种 SQL 反模式，不应使用。与使用 tablename ID 方法相比，它更可能导致问题，因为人们将在允许他们的 dbs 中使用自然连接并连接到错误的 id 或在复杂的 sql 中报告很容易连接到错误的 id（来自不同的比你加入的表）如果你使用表名ID，你会得到一个语法错误。此外，PK 和 FK 具有相同的名称更有意义。确切地知道您要加入的内容变得更加简单。

使用 IDTablename 或 tablenameID 是一个选择问题。在我访问过的所有数据库（我职业生涯中的数千个）中，大多数似乎更喜欢 tablenameId。无论选择什么，都要通过数据库保持一致。使用数据库非常烦人，其中一些表使用 Id，一些使用 tablenameId，一些使用 tablename_id，一些使用 Id_tablename，一些使用 IDtablename。模式一致性比命名对象中的任何其他因素都更重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-06T11:05:48.563

作为记录：

我在这里收集有关命名约定的信息

[https://medium.com/southprojects/database-naming-convention-the-definitive-guide-90424d6c2d36](https://medium.com/southprojects/database-naming-convention-the-definitive-guide-90424d6c2d36)

到目前为止，我发现**user_id**（如果数据库允许带有大小写的列，则为**UserId** ）比**id_user**（**IdUser**）使用得更多。但是，两者都是有效的。

此外，Oracle 曾经说过正确的方法是 user_id_pk 但我认为这种意识形态已经过时了。

# mysql - MySQL优化可以解决吗？

> ID：11228652
> 
> 赞同：4
> 
> 时间：2012-06-27T14:35:29.797
> 
> 标签：mysql, sql, database, optimization

我有一个表格，其中包含有关“交易”的数据。交易要么已关闭，要么已打开，并在“is_closed”列中标记。（这是，或当然，索引）。

大约有 10,000 个“打开”行和 10,000,000 个“关闭”行。每个“打开”行大约每秒更新一次。（此处仅更新未索引的字段）。一旦一行被“关闭”，它将永远不会再被更新。（只读）。

我永远不需要运行处理打开和关闭行的选择，所以问题是；我应该将表分成两个表（打开和关闭），结构相同吗？

单个表的缺点是每秒钟我都会对 10,000,000 行表运行更新。两个表的缺点是存在一种代码重复，当关闭“交易”时，我需要将它们从一个表中删除，然后添加到另一个表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:59:56.070

把它们分成两张桌子。我认为没有缺点：

*   *两个表的缺点，就是有一种代码重复*

所以呢？您的目标是性能，而不是更少的代码行数。

*   *并且在关闭“交易”时，我需要将它们从一张桌子上删除，然后添加到另一张桌子上。*

多几行代码。一些 UPDATE 程序将被转换为 INSERT/DELETE 程序。

* * *

优点是：

*   您在两个表中都少了一个索引。
*   任何复合索引（包括`open/closed`标志）都会有点窄。
*   更重要的是，您在表中具有高流量的所有索引都会小得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:49:24.693

如果收盘与开盘的比率 >= 1000（如您所述），那么制作两个不同的表会更好。

您可以通过使用多态性来避免代码重复。您可以通过名称**AbstractDeal**创建一个抽象交易基类，然后扩展两个具体类**OpenDeal**和**CloseDeal**。您可以将这两个具体类分别映射到您的表中。

我希望这将是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T15:54:01.497

在某些情况下，像您这样的布尔值（true 和 false，或 1 和 0）列是可以的，但是如果您发现自己为这样的列建立索引，那么您可能已经越界了。

如果这些值是均匀分布的（50% 正确，50% 错误），MySQL 甚至不会使用索引，除非它是一个覆盖索引。通过二级索引查找每一行的成本很高，其中大部分数据集将被返回，因此 MySQL 将改为执行简单的表扫描。

在您的情况下，由于您正在查询较小的分布（1% 错误），因此 MySQL 可能实际上会使用该索引。

但是，您必须想知道为什么必须在索引中存储这么多甚至没有被使用的真实值，然而，它们会减慢索引更新，并且只是浪费空间。

**...修改...**

相反，请考虑以另一个表的形式将索引存储在外部。考虑添加一个名为 open_deals 的表，其结构如下，其中 deal_id 是交易和 open_deals 的主键：

```
deal_id
----------
100
121
135 
```

要获得您的公开交易，只需执行以下操作：

```
SELECT deals.*
FROM open_deals
STRAIGHT_JOIN deals
  ON deals.deal_id = open_deals.deal_id 
```

我们使用直接连接，因为我们总是知道我们将从左到右连接，并且我们正在使 MySQL 不必考虑它。

由于 open_deals 仅包含单个索引列，因此该索引将充当覆盖索引。在正确配置的强大服务器上，索引将存储在内存中，因此表会非常快。

在内部，连接类似于使用原始二级索引，但没有所有这些未使用值的开销。

为了获得最佳性能，请确保将新值附加到 open_deals 表的末尾，或者换句话说，所有新值都应该大于上一个值，但无论如何您都在这样做。

要将交易设置为打开，将其附加到 open_deals 表，并将其标记为已关闭，从 open_deals 表中删除 id。

这里的优点是您不必在表之间移动记录，不必更新其他索引（使用 InnoDB 的聚集索引更糟）。此处更新的唯一索引是 open_deals 表上相当小的索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T14:42:43.953

我认为您可以按状态列对表进行[分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)，因此您在逻辑上将拥有 1 个表。[列表分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning-list.html)似乎适合您的情况。然后，如果需要，您可以进一步细分“封闭”分区......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T14:48:09.270

只要两个表都在同一个表空间中，您几乎不会从拆分或分区表中获得任何收益——代码简单的好处非常有利于将其保持在一个表空间中。

InnoDB 将进行行级锁定，因此您最终不会因已关闭的交易阻塞未完成的交易而告终。

# php - 需要 php-config shell 脚本

> ID：11228653
> 
> 赞同：0
> 
> 时间：2012-06-27T14:35:37.487
> 
> 标签：php, gcc, configuration, compilation

我想在 Windows 下为 PHP 编译扩展，我需要运行这样的命令：

```
g++ `php-config --includes` -fPIC -c some_script.cpp 
```

但是当我运行这个命令时，我收到了一个错误：

```
g++: error: `php-config: No such file or directory
g++: error: unrecognized option '--includes`' 
```

我在哪里可以获得 php-config shell 脚本而不重新编译 PHP（在 Windows 下）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:45:06.937

问题不在于您没有脚本，而在于 Windows shell 不知道您要做什么，因为它不支持反引号。该命令想要运行`php-config`脚本并在命令中包含输出，但`g++`它被传递`\`php-config `as the first argument, and`--includes`` 作为第二个参数，这对 GCC 来说不是有效的参数。

您不能在 Windows 中运行 UNIX shell 命令。要么使用 UNIX 风格的 shell（例如通过 Cygwin 或 Mingw32），要么只使用不同的命令，例如找出必要的包含标志并使用它们：

```
g++ -I/some/path -fPIC -c some_script.cpp 
```

# android - Gridview 多行 Textview 被截断

> ID：11228655
> 
> 赞同：8
> 
> 时间：2012-06-27T14:35:38.363
> 
> 标签：android, gridview, textview

我有一个`GridView`，每个单元格下面都有一个`ImageView`with `TextView`。不幸的是，如果`TextView`文本超过一行，文本就会被截断。我已经尝试了一切，但我找不到解决方案。

似乎 的行高`GridView`是问题而不是实际文本，因为您可以在`Textview`.

这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GridView gridView = (GridView) findViewById(R.id.gridView1);
    gridView.setAdapter(new ImageAdapter());

    gridView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View v, int position, long id) {
            startActivity(new Intent(Main.this, Acronyms.class));
        }

    });
}

public class ImageAdapter extends BaseAdapter {

    private Integer[] iconImg = { 
            R.drawable.acronyms, R.drawable.acronyms,
            R.drawable.acronyms
    };
    private String[] iconTitle = {
            "Acronyms", "Cardiac Strips",
            "Test 3"
    };

    public int getCount() {
        return iconImg.length;
    }

    public Object getItem(int arg0) {
        return null;
    }

    public long getItemId(int arg0) {
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) { 
            LayoutInflater inflater = getLayoutInflater();
            view = inflater.inflate(R.layout.icon, null);
            TextView textView = (TextView) view.findViewById(R.id.icon_text);
            textView.setText(iconTitle[position]);
            ImageView imageView = (ImageView) view.findViewById(R.id.icon_image);
            imageView.setImageResource(iconImg[position]);

        } else {
            view = convertView;
        }

        return view;
    }
} 
```

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#a3e6ff"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:paddingBottom="10dp"
        android:paddingTop="10dp"
        android:shadowDx="0"
        android:shadowDy="0"
        android:shadowRadius="25"
        android:text="Example"
        android:textColor="#248fb7"
        android:textSize="40dp"
        android:typeface="serif" android:gravity="center_horizontal"/>

    <GridView
        android:id="@+id/gridView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:columnWidth="90dp"
        android:horizontalSpacing="10dp"
        android:numColumns="3"
        android:stretchMode="columnWidth"
        android:verticalSpacing="15dp" >
    </GridView>

</LinearLayout> 
```

和我的 icon.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/grid_icon_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/icon_image"
        android:layout_width="90dp"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/icon_text"
        android:layout_width="90dp"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:maxLines="2"
        android:singleLine="false"
        android:text="Samples Samples"
        android:textColor="#FFFFFF"
        android:textSize="15dp"
        android:typeface="serif" />

</LinearLayout> 
```

这是一个屏幕截图： ![多线切断](../Images/e4451d7ac41be449093c43ac62efc4a1.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T18:48:13.687

我解决了使用，当我定义它时

```
 TextView.setLines(2); 
```

在 xml 中，textview 是

```
 android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:50:24.923

**[编辑1]**

您可以尝试对 icon.xml 使用相对布局而不是线性布局。

如果这不起作用，那么我将移至静态高度 TextView。从您的屏幕截图来看，您似乎将始终使用相同的图像，并且文本将是 1 行或 2 行。只需将文本高度设为静态以允许 2 行。

**[ORIGINAL]** 我认为问题出在 icon.xml 的线性布局定义中。在您的定义中，您的布局具有“match_parent”作为宽度和高度参数。你应该，因为这些本质上是gridview中的子视图，是“wrap_content”。这是我认为应该是的

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"     
    android:id="@+id/grid_icon_layout"     
    android:layout_width="wrap_content"     
    android:layout_height="wrap_content"     
    android:gravity="center_horizontal"     
    android:orientation="vertical" >

    <ImageView android:id="@+id/icon_image"         
        android:layout_width="90dp"         
        android:layout_height="wrap_content" />       

    <TextView android:id="@+id/icon_text"         
        android:layout_width="90dp"         
        android:layout_height="wrap_content"         
        android:gravity="center_horizontal"         
        android:maxLines="2"         
        android:singleLine="false"         
        android:text="Samples Samples"         
        android:textColor="#FFFFFF"         
        android:textSize="15dp"         
        android:typeface="serif" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-22T03:50:47.753

更改 LinearLayout 的 ConstraintLayout。确保您使用的是 ConstraintLayout，如果可能，请使用 LinearLayout 进行更改。对于长文本，约束不是很好。

# vbscript - VBscript 使用 7zip 压缩日志文件

> ID：11228664
> 
> 赞同：2
> 
> 时间：2012-06-27T14:36:07.887
> 
> 标签：vbscript, zip

希望有人看看我的脚本并告诉我我在哪里搞砸了。

这是一个压缩日志文件的脚本，然后我想将它们移动到一个将通过网络共享的新文件夹中。现在我只是想获得正确使用 7zip 压缩文件的部分。

我对 VB 很陌生（比如 2 天），所以我认为有一些语法问题。

脚本在下面找到，提前感谢您的所有建议和帮助

```
Option Explicit

WScript.Echo "Press to start zipping log files."

Dim objFile, objPath, objFolder, Command, PathLogs, RetVal
Dim objFSO: Set objFSO = CreateObject("Scripting.FileSystemObject")
Dim objShell: Set objShell = CreateObject("WScript.Shell")

PathLogs = "C:\Testscripts\testfolder\" 'This path just has some test logs 
```

' 遍历日志并压缩并移动每个文件（如果需要，您可以只移动带有 '.log' 扩展名的文件）

```
Set objPath = objFSO.GetFolder(PathLogs)
For Each objFile In objPath.Files
If (LCase(objfso.GetExtensionName(objFile)) = "log") Then
    Wscript.Echo objFile.Name
    ' zip and move files
    'Command = """C:\Program Files\7-zip\7z.exe"" -m -ex """ & PathLogs &     \objFile.Name objfso.GetBaseName(objFile) & "*.zip"" """ & PathLogs & objFile.Name & """"
     Command = ""C:\Program Files\7-zip\7z.exe"" a -m -ex " & PathLogs & "" & objFile.Name & ".zip " & PathLogs & "" & objFile.Name & "
        WScript.Echo "Command: " & Command
RetVal = objShell.Run(Command,0,true)

End If

Next

WScript.Echo "Zip Successful." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:58:12.993

你有你的报价错误。要在字符串中使用引号，您必须复制引号。

```
Command = """C:\Program Files\7-zip\7z.exe"" a -m -ex " _ 'this is the first part of the string
          & PathLogs & objFile.Name & ".zip " & PathLogs & objFile.Name 
```

如果您的日志文件或路径日志可以包含空格，它们也必须被引用。

# python - 构建 Python 应用程序（最终用于 deb 打包）

> ID：11228667
> 
> 赞同：2
> 
> 时间：2012-06-27T14:36:17.260
> 
> 标签：python, packaging

所以我用 Python 编写了一个应用程序，它有一个主 .py 文件，最近我编写了一些它将使用的库（一些更多的 py 文件）。我将如何在 Ubuntu 中“安装”它？在添加库之前，我只是有一个 bash 脚本，它将主 py 文件复制到 /usr/bin 以便用户可以使用 $ appname.py 运行应用程序

对于将来部署为 .deb 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T15:08:23.330

我认为您可以利用 setup.py 知道如何将 python 脚本安装为常规 unix 程序的事实：

请参阅此文档： [http ://docs.python.org/distutils/setupscript.html#installing-scripts](http://docs.python.org/distutils/setupscript.html#installing-scripts)

我认为总体而言，这取决于您希望流程的集成/专业程度。

无论如何，setuptools/distutils 是 Pythonic 的方式。

如果您想更进一步并通过常规的 debian/ubuntu 工具（如 apt-get/aptitude 等）安装应用程序，那么有些人已经为 setuptools 编写了插件来创建常规的 debian/ubuntu 软件包。

请参阅此模块： http: [//pypi.python.org/pypi/stdeb/](http://pypi.python.org/pypi/stdeb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:45:10.747

假设您将应用程序安装到 /opt 中，并且您已经正确处理了 python 代码本身的导入，只需对 main.py 文件进行符号链接即可满足您的需求。

```
ln -s -T /opt/appname/main.py /usr/bin/appname.py 
```

这也适用于 .deb 部署，只需确保在部署脚本中包含符号链接。

# php - PHP如何在不复制变量的情况下循环遍历关联数组？

> ID：11228669
> 
> 赞同：1
> 
> 时间：2012-06-27T14:36:30.880
> 
> 标签：php, arrays, loops, foreach, associative-array

这对于带有简单 for 语句的常规数组很容易做到。例如：

```
 $b= array('A','B','C');
    $s=sizeof($b);
    for ($i=0; $i <$s ; $i++) $b[$i]='your_face';
    print_r($b); 
```

但是如果我使用 assoc 数组，我似乎没有任何简单的方法可以做到这一点。我当然可以使用 foreach 循环，但它实际上是复制 $value 变量而不是返回指向实际数组实体的指针。EG，这不起作用：

```
 $b= array('A'=>'A','B'=>'B','C'=>'C');
    foreach ($b as $v) $v='your_face';
    print_r($b); 
```

当然，我们可以有一些像这样的愚蠢想法：

```
 $b= array('A'=>'A','B'=>'B','C'=>'C');
    foreach ($b as $k => $v) $b[$k]='your_face';
    print_r($b); 
```

但这将是一个尴尬的解决方案，因为它会冗余地重新创建从未使用过的 $v 变量。

那么，循环访问关联的更好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:39:08.567

你可以试试：

```
foreach(array_keys($b) as $k) {
    $b[$k] = 'your_face';
}

print_r($b); 
```

请参阅以下链接以获取说明：http `array_keys`: [//php.net/manual/en/function.array-keys.php](http://php.net/manual/en/function.array-keys.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:40:18.190

不确定这是否是您想要的，但这里有：

```
foreach(array_keys($b) as $k) $b[$k] = 'your_face'; 
```

# haskell - 你如何在 Repa 中计算 a[i] = f(a[i-1]) ？

> ID：11228676
> 
> 赞同：6
> 
> 时间：2012-06-27T14:36:53.617
> 
> 标签：haskell, repa

是否可以在 Repa 中计算一个依赖于过去值（即较小的索引）的数组？给出了数组的初始部分（例如，`a[0]`）。（请注意，我使用类似 C 的符号来表示数组的元素；请不要混淆。）

我阅读了[教程](http://www.haskell.org/haskellwiki/Numeric_Haskell%3a_A_Repa_Tutorial)并快速检查了hackage，但我找不到执行此操作的功能。

（我想在一维数组中进行这种计算在 Repa 中没有意义，因为你不能并行化它。但我认为你可以在二维或更多维的情况下并行化它。）

**编辑**`f`：也许我应该更具体地说明我想使用哪种。由于没有办法在 case`a[i]`是标量的情况下进行并行化，所以让我们关注 case`a[i]`是 N dim 向量的情况。我不需要`a[i]`更高维（例如矩阵），因为您可以将其“展开”为向量。因此，`f`是一个将 R^N 映射到 R^N 的函数。

大多数情况下，它是这样的：

```
b = M a[i-1]
a[i][j] = g(b)[j] 
```

其中`b`是一个 N 暗向量，`M`是一个 N × N 矩阵（不假设稀疏性），并且`g`是一些非线性函数。我想为`i=1,..N-1`给定`a[0]`的`g`和计算它`M`。我希望有一些通用的方法来（1）并行化这种类型的计算和（2）分配中间变量，例如`b`高效的（在类 C 语言中，你可以重用它，如果 Repa 或类似的库可以像魔术一样做到这一点而不会破坏纯度）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:14:19.233

我看不到 Repa 这样做的方式。但是有 Vector：[Data.Vector.iterateN](http://hackage.haskell.org/packages/archive/vector/0.9.1/doc/html/Data-Vector.html#v%3aiterateN)构建你想要的向量。然后[Data.Array.Repa.fromUnboxed](http://hackage.haskell.org/packages/archive/repa/3.2.1.1/doc/html/Data-Array-Repa.html#v%3afromUnboxed)将其从 Vector 转换为 Repa。

```
iterateN :: Int -> (a -> a) -> a -> Vector aSource 
```

> O(n) 将函数 n 次应用于值。第零个元素是原始值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:05:40.497

编辑：实际上，我想我误解了这个问题。我会在这里留下我的答案，以防它对其他人有用......

您可以使用`traverse` [http://hackage.haskell.org/packages/archive/repa/3.2.1.1/doc/html/Data-Array-Repa.html#v:traverse](http://hackage.haskell.org/packages/archive/repa/3.2.1.1/doc/html/Data-Array-Repa.html#v:traverse)：

```
Prelude Data.Array.Repa R> let x = fromListUnboxed (Z :. 10 :: DIM1) [1..10]
Prelude Data.Array.Repa R> R.computeUnboxedS $ R.traverse x (\ (Z :. i) -> (Z :. (i - 1))) (\f  (Z :. i) -> f (Z :. (i + 1)) - f (Z :. i))
AUnboxed (Z :. 9) (fromList [1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0]) 
```

剖析它：

```
 R.computeUnboxedS $                            -- force the vector to be "real"
    R.traverse x                                   -- traverse the vector
    (\ (Z :. i) -> (Z :. (i - 1)))                 -- function to get the shape of the result
    (\f (Z :. i) -> f (Z :. (i + 1)) - f (Z :. i)) -- actual "stencil" 
```

将其扩展到多维数组应该是微不足道的。

# ios - iOS 企业内部分发流程

> ID：11228678
> 
> 赞同：0
> 
> 时间：2012-06-27T14:36:57.040
> 
> 标签：ios, xcode, enterprise

我们目前有一个带有分发证书的企业帐户，其中安装了分发配置文件（其中包含我们所有应用程序的通配符应用程序 ID）。它们正确安装在我们的机器上，并且每个目标都指向正确的配置文件。我们一直在尝试让应用程序正确安装，但它只喜欢已包含在我们的配置门户中注册设备列表中的设备。这些设备恰好通过 Xcode 包含在内。我了解，使用企业许可证，不需要通过 UDID 在门户中拥有设备的要求，它应该允许分发到公司内部的设备。我们有大约 10 个目标具有不同的包标识符后缀，但符合我们的分发通配符配置文件。我们已经包含了一项权利。

```
get-task-allow: NO
application-identifier: $(AppIdentifierPrefix)$(CFBundleIdentifier)
keychain-access-groups:
  Item 0: $(AppIdentifierPrefix)$(CFBundleIdentifier) 
```

一切都正确编译并且代码签名有效，但尝试通过无线方式将应用程序分发到其他设备会返回“无法下载”错误。我们运行 CI，我们有一个脚本来编译和代码签名所有内容，然后生成一个包含所有应用程序的网页，以便用户可以测试它们。分发配置文件设置为“内部”，并使用我们正在使用的证书进行签名。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:26:39.790

弄清楚了。似乎一切都设置正确，我们只是在我们的脚本中使用了一个旧的、挥之不去的分发配置文件。该配置文件将嵌入应用程序，因此无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:30:19.007

我们刚刚配置了一个与您所描述的非常相似的设置。我们希望使用通配符配置文件来 OTA 分发具有不同应用程序 ID 的多个应用程序，而无需在配置文件中指定设备 UUID。

虽然我们很快就让它适用于 iPad 应用程序，但我花了我生命中的大部分时间，想知道为什么我不能让它适用于 iPhone 版本。我遇到了同样烦人的“无法下载”错误，并且设备日志中没有任何关于可能出现问题的线索。

事实证明，问题出在我的 .plist 文件上，其中包含对 512px 图标的错误引用。一个 512px 的图标甚至没有被使用，但在 .plist 中有一个不存在的 URL 足以破坏整个 OTA 安装过程。我最终只是从我的 .plist 中删除了“全尺寸图像”部分，现在它就像一个魅力！

# iphone - 我们如何在iphone的tableview中为每个单元格设置不同的标签值

> ID：11228681
> 
> 赞同：0
> 
> 时间：2012-06-27T14:37:01.613
> 
> 标签：iphone

我是 iPhone 新手。我想为表格视图中的每个单元格设置不同的标记值。例如，我有一个包含 6 个单元格的表格视图。在这里我想将标记值设置为第一个单元格为 4，第二个单元格的标记值为 1，就像我们所有 6 个单元格一样必须设置 6 个不同的值。如果有人知道这一点，请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:35:51.517

如果您有固定数量的单元格，则可以`cellForRowAtIndexPath`通过检查每个单元格来执行此操作。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
        if (indexPath.row == 0) {
            cell.tag = 4;
        }
        else if(indexPath.row == 1)
        {
            cell.tag = 1;
        }
        else if(indexPath.row == 2)
        {
            ...so on
        }
        return cell;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:44:44.063

您可以在 TableViewControler 的 cellForRowAtIndexPath 方法中设置标记值。在那里，您应该拥有视图控制器已知的所有可用数据，并且您可以访问即将显示的每个单元格。

由于 UITableViewCell 继承自 UIView 只需键入

```
cell.tag = value; //with value being what you want to assing in this case. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:40:09.177

你可以这样设置...

```
 cell.tag = indexPath.row + 1.. 
```

它会将您的单元格标签设置为 1 到 6 ...

这可能会帮助你

# php - 未定义的偏移量 0，但仍然给我正确的结果

> ID：11228683
> 
> 赞同：2
> 
> 时间：2012-06-27T14:37:04.530
> 
> 标签：php

```
$options = array('health', 'strength', 'agility', 'stamina', 'defence');

$total = array();

foreach ($options as $value)
{
    foreach ($objects as $object)
    {
        $total[$value] += $object->$value;
    }
}

var_dump($total); 
```

我在一个名为`$objects`. 它正在将数据提供给`$total`它应该做的事情。

但由于某种原因，它抱怨一些未定义的偏移量。

```
 Notice: Undefined index: health in C:\wamp\www\objbattle\index.php on line 32 
```

第 32 行是：`$total[$value] += $object->$value;`

为什么！？我该如何摆脱它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:40:08.313

因为`$total['health']`在第一次迭代中不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:42:40.817

这是因为您尝试增加未初始化的值。先尝试初始化它们。

```
$total = array('health' => 0, 'strength' => 0, 'agility' => 0, 'stamina' => 0, 'defence' => 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:45:06.463

通过 for each 的第一个循环不存在关键的“健康”。因此，您将收到通知。

你可以做：

```
$total[$value] = 0; 
```

就在第二个 foreach 的正上方。

或者，您可以以懒惰的方式进行操作并取消通知：

```
error_reporting(E_ALL ^ ~E_NOTICE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:40:16.817

我希望是因为您正在尝试增加未初始化的值...

尝试在第一轮分配，如下所示：

```
$total[$value] = $object->$value; 
```

或更简单地说，初始化数组值...

```
$total = array();
$total['health'] = 0;
etc... 
```

或者像@josmith 在他的回答中建议的那样做

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T15:26:46.593

为什么！？我认为是因为设置了报告哪些 PHP 错误。

# java - 将 JAXB 声明为依赖项。为什么？

> ID：11228688
> 
> 赞同：5
> 
> 时间：2012-06-27T14:37:18.460
> 
> 标签：java, maven, jaxb, jersey

为什么要将 JAXB 声明为 Java 应用程序的依赖项，因为它无论如何都随 JRE 一起提供并且不能在应用程序类路径中被覆盖？

以[jersey-json](http://download.java.net/maven/2/com/sun/jersey/jersey-json/1.8/jersey-json-1.8.pom)为例，在他们的 POM 文件中，他们声明了对 jaxb-impl 的依赖关系，甚至没有指定确切的版本。他们这样做有什么收获？

而且，当我在自己的 POM 文件中添加对[jersey-json](http://download.java.net/maven/2/com/sun/jersey/jersey-json/1.8/jersey-json-1.8.pom)的依赖项时，我的类路径中最终会出现 jaxb-api.jar 和 jaxb-impl.jar。我为什么要发生这种情况？如果我不将文件放到认可的库目录中，默认的 JVM 实现不会被加载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:24:37.860

我在链接的 pom 中看到：

```
 <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-impl</artifactId>
    </dependency> 
```

但是还有一个父 pom，因此您可能希望跟踪该跟踪，以查看是否在此处指定了实际版本和/或范围（并向下传播）。

但如果不是，那么我猜 Jersey 团队认为 JAXB 2 API 已经足够成熟，可以让他们指定对 JAXB 实现的松散依赖。

JRE 附带了 JAXB impl 的特定实现，它在最长的时间里等同于 JAXB RI 2.1.7。但与此同时，在您的应用程序中，有一种机制可以轻松地换成您选择的另一种实现。

当然，您可以使用内置的 JRE JAXB 实现，如果它适用于您的应用程序，您肯定应该尝试。

尽管如此，可能导致您需要单独的 JAXB 实现的一些原因包括：遗留错误（在较新版本中已解决）；需要更新的 JAXB API，例如 JAXB 2.2.x（在更新的 JRE 版本中提供）；想要完全使用不同的实现（因为它恰好具有更好的 API 和/或针对您的特定用途的性能）等...

所以回到你的球衣问题，我再次猜测他们希望让开发人员能够灵活地引入他们选择的 JAXB 实现。我认为他们的指南中的某处有一定程度的建议。但是，JAXB RI 被特别标记为依赖项这一事实削弱了这一论点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:43:14.183

这听起来像是泽西人错误地定义了他们的依赖。如果您运行的环境提供了依赖项，则应使用“提供”范围定义。

# jquery - jQuery UI Datepicker maxDate 选项的手动日期输入验证

> ID：11228689
> 
> 赞同：11
> 
> 时间：2012-06-27T14:37:18.770
> 
> 标签：jquery, jquery-ui, date, jquery-validate, jquery-ui-datepicker

我在需要允许手动输入日期的页面上有 jQuery datepicker，但还需要验证日期不超过一天。选择器控件已通过 maxDate 进行限制，但是当手动输入日期时，他们可以输入超过一天的日期。一个（我）如何阻止它？这是我到目前为止所拥有的：

```
$(".datepicker").attr("placeholder", "mm-dd-yyyy").datepicker({
    showOn: "button",
    maxDate: "+1",
    showOtherMonths: true
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T15:20:05.263

如果通过直接输入更改控件的值，我不确定 datepicker 是否会触发事件。您可以将函数绑定到`.change()`事件：

```
$(".datepicker").attr("placeholder", "mm-dd-yyyy").datepicker({
    dateFormat: "mm-dd-yy",                 // since you have defined a mask
    maxDate: "+1",
    showOn: "button",
    showOtherMonths: true

}).on("change", function(e) {
    var curDate = $(this).datepicker("getDate");
    var maxDate = new Date();
    maxDate.setDate(maxDate.getDate() + 1); // add one day
    maxDate.setHours(0, 0, 0, 0);           // clear time portion for correct results
    if (curDate > maxDate) {
        alert("Invalid date");
        $(this).datepicker("setDate", maxDate);
    }
}); 
```

[**演示在这里**](http://jsfiddle.net/7Q4Bt/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-01-15T16:23:52.603

我有完全相同的要求，这是对我有用的解决方案，就像一个魅力：

```
 $(".datepicker").attr("placeholder", "mm-dd-yyyy").change(function(){
    $(this).datepicker('setDate', $(this).datepicker('getDate'));
  }).datepicker({
      showOn: "button",
      maxDate: "+1",
      showOtherMonths: true
  }); 
```

从 Salman A 的[回答中引用的修改](https://stackoverflow.com/a/11229630/1403118)[过的](http://jsfiddle.net/hs84yk7m/1/)小提琴

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-20T04:27:29.470

好吧，上面的答案是正确的，但是它没有验证表单，用户仍然可以提交表单，

我做了一些研究，但找不到 ny，最后我写了这个工作正常并验证表单的函数，并且在输入正确的日期之前不允许提交表单，希望它有帮助！

您唯一需要做的就是添加此代码，然后它将应用于具有“datePicker”类的所有字段。

```
 $(".datePicker").datepicker({
            dateFormat: 'd/mm/yy',
            changeMonth: true,
            changeYear: true,
            firstDay: 1,
            minDate: Date.parse("1900-01-01"),
            maxDate: Date.parse("2100-01-01"),
            yearRange: "c-90:c+150"
        });

        // validation in case user types the date out of valid range from keyboard : To fix the bug with out of range date time while saving in sql 
        $(function () {
            $.validator.addMethod(
                "date",
                function (value, element) {

                    var minDate = Date.parse("1900-01-01");
                    var maxDate = Date.parse("2100-01-01");
                    var valueEntered = Date.parse(value);

                    if (valueEntered < minDate || valueEntered > maxDate) {
                        return false;
                    }
                    return !/Invalid|NaN/.test(new Date(minDate));
                },
                "Please enter a valid date!"
            );
        }); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-02-12T17:42:40.383

一种选择是通过输入字段来消除手动输入日期的能力`readonly`。这将限制用户手动输入任何疯狂的东西，并强制使用日期选择器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-12T11:23:00.737

My solution is re-set the date with entered one to trigger datepicker's internal checks. By comparing the old value and new one you can check if date is changed:

```
$(".datepicker").datepicker({
  showOn: "button",
  maxDate: "+1",
  showOtherMonths: true}).on('change', function(e) {
        var oldDate = $(this).datepicker('getDate');
        $(this).datepicker('setDate', $(this).datepicker('getDate'));
        var newDate = $(this).datepicker('getDate');
        if (oldDate.getTime() !== newDate.getTime()){
            $(this).val('');
        }
    }); 
```

# bash - 从 bash 中的 CSV 文件的列中删除空格

> ID：11228691
> 
> 赞同：2
> 
> 时间：2012-06-27T14:37:22.263
> 
> 标签：bash

我有一个 CSV 文件，其中每一列在实际值之后都包含不必要的空格（或制表符）。我想创建一个新的 CSV 文件，使用 bash 删除所有空格。

例如

输入 CSV 文件中的一行

```
abc def pqr             ;valueXYZ              ;value PQR              ;value4 
```

输出 csv 文件中的同一行应该是

```
abc def pqr;valueXYZ;value PQR;value4 
```

我尝试使用 awk 修剪每一列，但没有奏效。谁能帮我解决这个问题？

提前致谢 ：）

我编辑了我的测试用例，因为这里的值可以包含空格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:28:31.580

```
$ cat cvs_file | awk 'BEGIN{ FS=" *;"; OFS=";" } {$1=$1; print $0}' 
```

1.  Set the input field separator (`FS`) to the regex of zero or more spaces followed by a semicolon.
2.  Set the output field separator (`OFS`) to a simple semicolon.
3.  `$1=$1` is necessary to refresh `$0`.
4.  Print `$0`.

* * *

```
$ cat cvs_file
abc def pqr             ;valueXYZ              ;value PQR              ;value4

$ cat cvs_file | awk 'BEGIN{ FS=" *;"; OFS=";" } {$1=$1; print $0}'
abc def pqr;valueXYZ;value PQR;value4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:48:55.240

如果值本身总是没有空格，那么规范的解决方案（在我看来）将是使用`[tr](http://linux.die.net/man/1/tr)`：

```
$ tr -d '[:blank:]' < CSV_FILE > CSV_FILE_TRIMMED 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:51:47.550

这将用一个空格替换多个空格：

```
sed -r 's/\s+/ /g' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T15:12:50.753

如果您知道列数据将以什么结尾，那么这是一种万无一失的方法：

`sed 's|\(.*[a-zA-Z0-9]\) *|\1|g'`

字符类将是您放置数据结尾的地方。

Otherwise, if you know more than one space is not going to come in your fields, then you could use what user1464130 gave you.

If this doesn't solve your problem, then get back to me.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-06T08:05:57.423

I found one way to do what I wanted that is remove blank line and remove trailing newline of a file in an efficient way. I do this with :

```
grep -v -e '^[[:space:]]*$' foo.txt 
```

from [Remove blank lines with grep](https://stackoverflow.com/questions/3432555/remove-blank-lines-with-grep)

# android - notifyDataSetChanged() 没有变化/黑屏；

> ID：11228698
> 
> 赞同：0
> 
> 时间：2012-06-27T14:37:33.467
> 
> 标签：android, listview, adapter, baseadapter

我想做这样的事情。

按下*刷新*按钮时，它将刷新列表。活动代码是这样的：

```
 adapter = new TweetAdapter(Welcome.this, tweets, users);
        tweetsList.setAdapter(adapter);

    private void refreshAdapter() {
        adapter.clear();
        adapter.refresh(tweets, users);
    } 
```

`refreshAdapter()`当我需要更改列表项时调用。这里`tweets`&`users`是`ArrayList`&`HashMap`项目

适配器部分是这样的：

```
public void clear() {
    this.tweets.clear();
    this.users.clear();
}

public void refresh(ArrayList<Tweet> tweets, HashMap<String, User> users) {
    this.tweets.addAll(tweets);
    this.users.putAll(users);
    Collections.sort(this.tweets, new TweetTimeComparator());
    notifyDataSetChanged();
} 
```

但不幸`notifyDataSetChanged();`的是不工作。通过单击*刷新*列表要么变黑（最长时间）或没有响应（一段时间）。

如果您发现错误或建议我该怎么做，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:42:07.627

我认为您正在清除数据

```
this.tweets.clear();
this.users.clear(); 
```

..我认为推文和用户都有相同的参考（从活动传递到适配器），所以推文和两个用户（在适配器和活动上都指向相同的 ArrayLists）所以两者都很清楚，所以这些行没有意义因为两者都是空的

```
this.tweets.addAll(tweets);
this.users.putAll(users); 
```

尝试

```
public TweetAdapter(Context context, ArrayList<Tweet> tweets, HashMap<String, User> users) { 

mInflater = LayoutInflater.from(context); 
this.tweets = new ArrayList<Tweet>(); 
this.users = new HashMap<String, User>();

this.tweets.addAll(tweets);
this.users.putAll(users);

Collections.sort(this.tweets, new TweetTimeComparator()); 
} 
```

..

```
public void refresh(ArrayList<Tweet> tweets, HashMap<String, User> users) {

  this.tweets.clear();
    this.users.clear();

    this.tweets.addAll(tweets);
    this.users.putAll(users);
    Collections.sort(this.tweets, new TweetTimeComparator());
    notifyDataSetChanged();
} 
```

但注意：现在引用两个推文（在适配器和活动上）和两个用户（在适配器和活动上）是不同的。

在其他使用 this.tweets.addAll(tweets); 的地方不应该有像 adapter.tweets = activity.tweets 这样的直接赋值

# php - 如果密码正确，PHP 从另一台服务器下载 .zip 文件

> ID：11228699
> 
> 赞同：0
> 
> 时间：2012-06-27T14:37:35.927
> 
> 标签：php, ftp, download, zip

我正在开发自己的 CMS。我将 CMS 的最新更新放入服务器上的更新文件夹中，文件名为 update.zip。

有没有办法让我在更新服务器上调用一个带有变量的 PHP 文件，例如[http://updateserver.com/update.php?pass=JDFSDH324723HDSFSDJFDSHSD3](http://updateserver.com/update.php?pass=JDFSDH324723HDSFSDJFDSHSD3)

如果通行证正确，那么系统可能会下载 .zip 文件？

或者，如果你们能想出一种更好的方法来制作更新系统，我愿意接受建议:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:55:57.623

在更新服务器上：

```
<?php
if ($_GET['pass'] == $thepassword) {
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: '.filesize($zipfile));
    header('Content-Type: application/zip');
    readfile($zipfile);
    exit();
}
else {
    echo 'error';
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:59:21.120

我不建议在这里使用密码。如果您正在尝试制作一个可以自我更新的 CMS，就像某些 CMS 一样，您最好使用匿名下载，不要检查谁下载了它。

如果您的目标是让人们为此付费，那么您最好在服务器端为每个客户端注册一个密钥。然后，当他们连接更新时，他们将发送密钥，如果她在您的数据库中并且有效，您将输出您的 zip 文件。如果没有，你不会。

如果您的 CMS 用于私人用途或您的公司，我认为匿名下载会更好，因为您不应该将更新 URL 提供给任何人。

另外，不要使用函数`readfile`，只需在 zip 位置添加标题即可。

# facebook - 如何使用 java 解析用户的 facebook 好友列表？

> ID：11228702
> 
> 赞同：0
> 
> 时间：2012-06-27T14:37:40.083
> 
> 标签：facebook, json, facebook-graph-api, servlets

我正在制作一个 facebook 应用程序。我能够使用图形 api 获取用户的朋友列表。朋友列表以 JSON 的形式返回。如何使用 java 解析它？我有 json 简单库，但我有麻烦使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:47:54.917

这里：

```
String response = .....

JSONArray arr = (JSONArray)JSONValue.parse(response);
JSONObject obj = (JSONObject)JSONValue.parse(response); 
```

您应该能够根据您的要求知道返回的响应是数组还是对象。

* * *

# 编辑

如果你得到一个包含数组的 json 对象：

```
String response = .....

JSONObject obj = (JSONObject)JSONValue.parse(response);

if (obj.containsKey("xxxx")) {
    JSONArray arr = (JSONArray)obj.get("xxxx");
} 
```

JSONObject 支持 java.util.Map 接口，JSONArray 支持 java.util.List 接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:43:52.500

**编辑：这是完整的 JSON 库而不是 org.json 简单库。请查看 Nitzan 对 org.json 简单库的回答**

您需要从`JSONObject`. 例如，假设你`JSONObject`的名字叫 jObj：

`jObj.getString("parameter_name");`

如果给定一个 JSONArray，则需要通过执行以下操作从 JSONArray 中获取正确的 JSONObject：

`JSONObject jObj = jArray.getJSONObject(0);`

将 0 替换为`JSONObject`您要检索的

# javascript - 以数组形式调用带有参数的 javascript 函数

> ID：11228707
> 
> 赞同：1
> 
> 时间：2012-06-27T14:38:01.167
> 
> 标签：javascript

我正在尝试从一个字符串以及一个应该被视为多个参数的数组中执行一个函数。

例子：

```
var app = {
  bar : function(val1, val2, val4){
    console.log(val1+val2+val3);
  }
};

fn_name = "bar";
fn_args = ['one', 'two', 'three'];

app[fn_name](fn_args); 
```

这段代码的问题`fn_args`是作为单个参数传递而不是作为单独的参数传播，有解决方法吗？我仍然想通过`fn_name`和`fn_args`动态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:39:44.763

使用`apply`方法：

```
app[fn_name].apply(app, fn_args); 
```

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:40:22.900

使用`function.apply()`.

```
app[fn_name].apply(app, fn_args); 
```

第一个参数是`this`函数内部的上下文 ( )，第二个参数是其项应作为参数传递的数组。

# python - 如何使用 setup.py develop “半安装”通常作为鸡蛋安装的插件？

> ID：11228709
> 
> 赞同：0
> 
> 时间：2012-06-27T14:38:22.440
> 
> 标签：python, trac, egg, setup.py

我正在尝试使用`Trac`and调试插件问题`TracMercurial`。当打包为鸡蛋并正常部署时，该插件对我来说不太适用。

使用 setup.py develop 会导致插件不可见。使用 setup.py install 工作正常，但我无法调试结果，我打算通过向插件添加一些日志记录代码来做到这一点，这样当模块尝试加载时，我将能够检查环境并查看它失败的地方。

我尝试执行此命令，以便可以开始调试插件中的 python 代码以查看失败的位置以及原因：

```
c:\workdir> python setup.py develop --exclude-scripts --install-dir "C:\...\python\Lib\site-packages" 
```

这样做之后，site-packages 目录中有一个 egg-link 文件，但是 Trac 没有看到该插件。但是，如果我使用“setup.py install”，并将完整的 .egg 复制到 site-packages 目录，那么 Trac 确实会看到该插件。

显然我不理解“setup.py develop”模式。我的目标是开始调试不在任何虚拟环境中的插件，只需简单地使用“setup.py develop”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:01:34.700

我推荐trac.edgewall.org 的 wiki 文档中有关 Trac（插件）[开发设置](http://trac.edgewall.org/wiki/TracDev/DevelopmentEnvironmentSetup)的权威且相当详尽的信息。在那里你会找到所有必需的部分和一些选项。您可能错过了指向该 Trac 环境的插件目录的[`-md`选项](http://trac.edgewall.org/wiki/TracDev/DevelopmentEnvironmentSetup#DebuggingPlugins)，因为您想让插件代码可用。

查看[TracDeveloperPlugin](http://trac-hacks.org/wiki/TracDeveloperPlugin)和 Odd Simon Simons 关于[Trac 请求分析](https://www.coderesort.com/u/simon/blog/2011/09/06/trac_profiling)的博客，了解更多调试选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:11:46.690

如果[`setuptools`](https://pypi.python.org/pypi/setuptools)或[`distribute`](https://pypi.python.org/pypi/distribute/)已安装，您可以使用`easy_install`带有`-Z`选项的命令来安装解压缩的鸡蛋：

```
python setup.py easy_install -Z 
```

因此您仍然可以编辑已安装的源代码。

# java - 是否可以断言文本字段中存在手动输入的文本以验证“撤消”按钮的功能？

> ID：11228711
> 
> 赞同：0
> 
> 时间：2012-06-27T14:38:26.600
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我有一个表格，下面有一个表格。您可以填写表格，但点击“撤消”按钮会将输入的任何信息恢复到进行编辑之前的状态。

我想断言手动输入的文本，以便我可以确认“撤消”按钮正在恢复字段。除非保存该项目，否则“值”属性不会更改，因此我不能将其用于断言的属性。如果有帮助，下面是字段的 XPath。

```
<table id="userAdminForm" class="c4i-ui-fieldGrid">
  <tbody>
    <tr>
      <td class="c4i-labelCell">
      <td class="c4i-fieldCell" rowspan="1" colspan="1">
        <div class="c4i-fieldDiv rel" style="min-height: 36px">
           <input id="userName" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" type="text" value="Super User" name="userName" role="textbox" aria-disabled="false" aria-readonly="false" aria-multiline="false"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:20:37.570

我发现我需要从 html 中获取“value”属性来获取文本。以下代码在运行时可以通过测试，如果“oldtext”字符串不是所需的文本，它将失败。

感谢 Hari 让我走上正轨。

```
WebElement userName = findElementById("userName");
    userName.click();
    userName.clear();
    userName.sendKeys("testforUndo");

    WebElement undo = findElementById("cancel");
    undo.click();

    String text = findElementById("userName").getAttribute("value");
    String oldtext = "Testing";

    Assert.assertTrue(text.equals(oldtext)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:38:40.700

您可以先使用以下方式在用户名字段中输入一些文本 -

```
driver.findElement(By.id("userName")).sendKeys("some name"); 
```

然后您可以单击**撤消**按钮。如果您提供 html 页面的完整源代码，那么我可以为您提供单击撤消按钮的代码。

然后阅读用户名字段中的文本 -

```
String text = driver.findElement(By.id("userName")).getText(); 
```

然后您可以验证文本的值并检查撤消按钮的功能。如果文本为空，则表示**撤消**按钮工作正常。

# conditional - gnuplot，如何仅标记某些点？

> ID：11228714
> 
> 赞同：8
> 
> 时间：2012-06-27T14:38:35.247
> 
> 标签：conditional, gnuplot, labels

我正在使用以下`gnuplot`命令来创建绘图：

```
#!/bin/bash
gnuplot << 'EOF'
set term postscript portrait color enhanced
set output 'out.ps'

plot 'data_file' u 3:2 w points , '' u 3:2:($4!=-3.60 ? $1:'aaa') w labels

EOF 
```

`data_file`看起来像这样：

```
 O4     -1.20     -0.33     -5.20  
O9.5     -1.10     -0.30     -3.60  
  B0     -1.08     -0.30     -3.25  
B0.5     -1.00     -0.28     -2.60  
B1.5     -0.90     -0.25     -2.10  
B2.5     -0.80     -0.22     -1.50  
  B3     -0.69     -0.20     -1.10 
```

我希望 gnuplot 用 column 中找到的字符串标记**所有**点`1`，**除了**column`4`等于的那个点，`-3.60`在这种情况下我想要`aaa`字符串。我得到的是`$4=-3.60`数据点被正确标记为`aaa`，但其余的根本没有被**标记**。

* * *

**更新：gnuplot 使用条件语句将****数字**显示为标签没有问题，即：任何列，但`1`正确显示为尊重所施加条件的每个点的标签。也就是说，该行将列`2`（数字）显示为符合条件语句的点标签：

```
plot 'data_file' u 3:2 w points , '' u 3:2:($4!=-3.60 ? $2:'aaa') w labels 
```

**更新 2**`1` ：如果我将它作为一个**整体**绘制，即**不使用**条件语句，它在将列绘制为点标签时也没有问题。也就是说，这条线正确地绘制了列（字符串）中的**所有点标签：**`1`

```
plot 'data_file' u 3:2 w points , '' u 3:2:1 w labels 
```

* * *

很明显，问题在于将条件语句与字符串列**一起使用。**这些单独使用的任何一个都可以正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T13:21:09.307

也许以更干净的方式，这应该有效。如果标签没有在字符串中打开，它似乎无法显示计算出的数字。

```
#!/bin/bash
gnuplot << 'EOF'
set term postscript portrait color enhanced
set output 'out.ps'

plot 'data_file' u 3:2 w points , '' u 3:2:($4!=-3.60 ? sprintf("%d",$1):'aaa') w labels

EOF 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T18:59:06.347

这是你想要的吗？

```
#!/bin/bash

gnuplot << 'EOF'
set term postscript portrait color enhanced
set output 'out.ps'
plot 'data_file' u 3:2 w points , \
     '' u (($4 == -3.60)? 1/0 : $3):2:1 w labels

EOF 
```

我在这里所做的只是将第 4 列等于 -3.6 的 (x) 点设置为 NaN ( `1/0`)。由于 gnuplot 忽略了这些点，生活是美好的。我认为您的脚本的问题在于您正在过滤 gnuplot 需要字符串输入的列 - 尽管我没有充分使用它来验证这一点。我刚刚将过滤器切换到 gnuplot 需要数字（x 位置）的列，它工作得很好。

# iphone - 浮点数只打印整数？

> ID：11228715
> 
> 赞同：1
> 
> 时间：2012-06-27T14:38:37.493
> 
> 标签：iphone, objective-c, ios, cocoa-touch, sdk

为什么当我在循环中运行此代码时，控制台中只打印整数？

```
for (int i = 1; i <= 50; i++) {
        zombieSpeed[i] = (((arc4random()%40)+2)/7);
        NSLog(@"%f", zombieSpeed[i]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T14:39:47.603

问题就在这里

```
zombieSpeed[i] = (((arc4random()%40)+2)/7); 
```

而不是 40, 2, 7 你应该使用 40.0, 2.0, 7.0

还要确保 ZombieSpeed 是浮点类型

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:41:06.293

此行需要使用`Float`值 (40.0, 2.0, 7.0)

```
zombieSpeed[i] = (((arc4random()%40)+2)/7); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:41:19.147

除法是整数除法，使用显式小数点作为 40.0 或类型转换，以便至少一个操作数是浮点数，它将整个表达式向上转换为浮点数。确保您分配计算机值的任何左侧变量都是具有相等或更大宽度的浮点类型（以保持精度）。

# css - css：如何在div中垂直对齐表格

> ID：11228717
> 
> 赞同：0
> 
> 时间：2012-06-27T14:38:43.933
> 
> 标签：css

我想将第二个表格垂直对齐到 div 的顶部。我试过`style="vertical-align:top;"`了，但它似乎不起作用。代码：

```
<div class="q">
  <table>
    <tr>
      <td><table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:45:17.220

将`vertical-align`属性设置在`td`

```
td {
    vertical-align: top;
} 
```

[演示](http://jsfiddle.net/6JvLp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:50:33.177

没关系，通过应用 style="vertical-align: top;" 修复它 到 td 标签

# ms-word - 微软word中的倒计时

> ID：11228720
> 
> 赞同：0
> 
> 时间：2012-06-27T14:38:46.787
> 
> 标签：ms-word

Microsoft word 允许我们添加日期时间戳，它将更新日期时间并与系统日期时间同步。我正在寻找一个类似的项目。有倒计时项目吗？

用法：当我向同事发送文件时，我提到此事件将在 5 分钟内发生。

```
Ex: I will kick the build in 5 minutes. 
```

我试图用以下方式表达同样的意思

```
Build will happen in 5:00 Minutes 
```

一秒钟后

```
 Build will happen in 4:59 Minutes 
```

五分钟后

```
Build will happen in 0:00 Minutes 
```

或者

```
Build happend 
```

MSword 有能力做到这一点吗？

谢谢，

埃森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:26:37.963

没有可用的倒数计时器控制。您必须编写一个宏来为您执行此操作。即使您使用宏，除非收据用户启用其内容，否则他不会看到它。我建议使用 javascript 并使用 html 正文发送电子邮件

# lotus-notes - Designer 客户端搜索中的原始字段信息

> ID：11228722
> 
> 赞同：0
> 
> 时间：2012-06-27T14:38:50.463
> 
> 标签：lotus-notes

我正在我们的一个数据库中搜索我们正在取消的字段，并发现了许多不再使用该字段但显示搜索命中的表单。

```
<item name='Edit_Date' summary='false' sign='true'>
<rawitemdata type='400'>
AAAAAAAAAAA=
</rawitemdata></item> 
```

我认为他们之前已经在这方面进行了清理，这可能代表了该字段曾经存在的文档。虽然我知道编辑 DXL 可能会破坏设计，但为了完整起见，我可能会在 DXL 中清除这些内容。所以，两个问题：

1.  我对明显的“误报”的来源是正确的吗？
2.  您认为在 DXL 中删除那些误报值得冒险吗？

在此先感谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:05:35.727

如果它没有出现在设计器中并且没有保存在文档中，则可能是损坏。

“AAAAAAAAAAAAA=”不是腐败。当 Notes 将 NSF 设计元素转换为 DXL 时，它无法 100% 映射某些东西，它会创建二进制表示。

这是为了允许 DXL 数据 100% 往返。

保存时删除元素应该没有问题，除了该字段将消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:50:48.490

如果您在设计中不再使用文档中的字段（并且您确定永远不需要返回数据），那么只需针对所有文档运行公式代理：

```
FIELD Edit_Date := @DeleteField 
```

# regex - Sublime Text2如何用参数替换？

> ID：11228724
> 
> 赞同：3
> 
> 时间：2012-06-27T14:38:51.447
> 
> 标签：regex, editor, sublimetext

我有一个文本，如：“test 1 test 2 test 3”，我想替换为：“test d1 test d2 test d3”，为此我认为我可以使用正则表达式：“\d”，然后在替换使用“d（参数）”，所以我可以捕捉到数字 1、2 和 3。它可能在 sublime text 2 中，就像在 notepad++ 或 editplus 中一样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T14:43:35.070

在 Ctrl + H (Replace...) 你应该启用正则表达式 (Alt+R) 然后你应该使用

```
\d+ 
```

在查找内容和

```
d$0 
```

在替换为

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T14:41:28.723

Sublime 是一个非常新的编辑器 AFAIK，所以它会有一个不错的正则表达式引擎，让我们希望

你的问题可能是一个简化，我想我读到你想用相同的东西替换 test 加上一个数字，但在它前面加上 ad

正则表达式

```
test (\d+) 
```

用。。。来代替

```
test d$1 
```

如果他们需要 3 人一组，调整起来相当容易。让我们知道您是否可以继续。

# jquery - 如果图像保存在缓存中，jQuery .load 不会触发（仅限 Chrome）

> ID：11228736
> 
> 赞同：4
> 
> 时间：2012-06-27T14:39:17.613
> 
> 标签：jquery, image, google-chrome, jquery-load

出于某种原因，如果图像保存在缓存中（仅限 Chrome），jQuery .load 不会触发。

这是[jsfiddle](http://jsfiddle.net/uYmWQ/)

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:32:31.643

这是因为，如果当前**src**和**新 src**相同，则不会加载新图像，因为两者相同。这样做的技巧是使当前的**src**值变为空白。

```
$("#btn").click(function(){
    $("#tst").attr('src','');
    $("#tst").attr('src','https://www.google.co.il/images/srpr/logo3w.png');
}); 
```

​<a href="http://jsfiddle.net/Vaishak/uYmWQ/2/">jsFiddle 演示链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-20T10:59:44.427

例如，您可以使用时间戳：

```
 var timestamp = new Date().getTime();
    $("#image_test")
      .attr("src", "http://www.sandiegovips.com/wp-content/uploads/2014/05/test-image.jpeg?timestamp="+timestamp)
      .load(function() {
             alert("image loaded!");
       }); 
```

```
<img id='image_test' src=""/>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:46:37.227

您可以通过在图像的 url 中包含时间戳来绕过缓存。这将导致每次请求时刷新缓存的图像。

# javascript - 在嵌套函数中访问 javascript 对象属性

> ID：11228737
> 
> 赞同：2
> 
> 时间：2012-06-27T14:39:20.380
> 
> 标签：javascript

再会，

我创建了一个管理数据访问的对象。我的应用程序将使用几个不同的数据存储，因此我创建了一个简单的工厂来在提供程序之间切换：

```
var dataProvider = {
company: {
    getAllCompanies: function (callback) {
        var impl = factory.createProvider(implInstance.current)
        impl.company.getAllCompanies(callback);
    }
}
projects: {
    getAllProjects: function (callback) {
        var impl = factory.createProvider(implInstance.current)
        impl.projects.getAllProjects(callback);
    }
}
} 
```

这一切都很好，但我宁愿将我的 impl 变量放在 dataProvider 级别。不过，我不确定如何正确访问它，因为当我嵌套得太深时，“this”并没有为我提供正确的范围。我想要以下内容：

```
var dataProvider = {
impl: function () { return factory.createProvider(implInstance.current) },
company: {
    getAllCompanies: function (callback) {
        //THIS WON'T WORK
        this.impl.company.getAllCompanies(callback);
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T14:44:23.627

您需要为此使用模块设计模式：

```
var dataProvider = (function () {
    var getImpl = function () {
        return factory.createProvider(implInstance.current);
    };
    return {
        company: {
            getAllCompanies: function (callback) {
                getImpl().company.getAllCompanies(callback);
            }
        },
        projects: {
            getAllProjects: function (callback) {
                getImpl().projects.getAllProjects(callback);
            }
        }
    }
})(); 
```

# php - PHP分数分配

> ID：11228738
> 
> 赞同：0
> 
> 时间：2012-06-27T14:39:21.320
> 
> 标签：php, arrays, loops

我有一个网页，人们可以在其中发布 0 到 10 之间的单个数字。

就像每天一次的乐透单号生成一样。我希望我的 PHP 脚本检查所有用户发布的数字，并将 +1 或 -1 的分数分配给相对的赢家（或输家）。

问题是，一旦我在数据库中查询获胜用户的列表，我想更新他们的“分数”字段（在“用户”表中）。我在想这样的循环（伪代码）

```
foreach winner{
    update score +1
} 
```

但这意味着如果有 100 个获胜者，那么将有 100 个查询。有没有办法用一个查询进行某种批量插入？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:44:45.570

您没有指定数字的存储方式。如果有大量的人发帖，一个不错的选择是使用数据库来存储他们的号码。

例如，您可以`lotto`使用三个字段调用一个表`posted_number`：`score`和`email`。`posted_number`在该字段上创建一个（非唯一！）索引。

```
create table lotto (posted_number integer(1) unsigned, score integer, email varchar(255), index(posted_number)); 
```

要更新他们的分数，您可以执行两个查询：

```
update lotto set score = score+1 where posted_number = <randomly drawn number here>
update lotto set score = score-1 where posted_number = <randomly drawn number here> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:46:15.160

我假设您正在使用带有 sql 的数据库，并建议您可能想做类似的事情

```
UPDATE `table` SET `score`=`score`+1 WHERE `number`=3; 
```

以及相应的失败者-1（奇怪，看不到-1的理由）。

但是，如果没有更多详细信息，我将无法提供进一步的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:04:16.343

假设我们有一个名为`posts`and的数据表`users`。显然，`users`包含赌徒的数据（带有一个方便的`id`字段和`points`他们拥有的点数），并`posts`包含`post_id`行的 ID 字段，`user_id`即用户的 ID，`value`以及发布的数字本身。

现在您只需在脚本中实现以下 SQL 查询：

`UPDATE users INNER JOIN posts ON users.id = posts.user_id SET users.points = (users.points + 1) WHERE posts.value = 0;`

末尾`0`的位置将替换为随机抽取的数字。

**这个查询会做什么？**使用该`INNER JOIN`构造，它将在两个表之间创建一个*链接。*自动，如果`posts.value`匹配我们的号码，它将*链接* `posts.user_id`到`users.id`，知道哪个用户必须`points`修改他/她。如果有人赌博`0`，并且他的 ID( `posts.user_id`) 是`8170`，则该`points`字段将为拥有的用户更新`user.id = 8170`。

如果您更改查询以使其成为`(users.points - 1)`和`WHERE posts.value != 0`，您将让非获胜者扣除一分。它可以根据需要进行调整。

**小心点！**每次每日抽奖后，帖子表都需要截断或存档。

另一种选择是存储`time()`用户投注数字的时间戳（在 PHP 中），并在执行时检查存储的时间戳......是否在当天的开始和结束之间。

*提示：您可以使用图形数据库软件（如 Microsoft Access 或 LibreOffice Base）`JOIN`在图形显示器上模拟您的 s 等。它使初学者更容易**建模此类问题。**如果您不想要桌面安装的软件，尝试安装`phpMyAdmin`也是另一种解决方案。*

* * *

***编辑：***

### 非关系数据库

如果您要使用非关系型数据库，您首先需要获取所有获胜者`ID`：

```
SELECT user_id FROM posts WHERE value=0; 
```

这将为您提供多行的结果。现在，您将需要逐一检查此结果，并执行以下查询：

```
UPDATE users SET points=(users.points + 1) WHERE id=1; 
```

（`0`是中奖号码，是用户更新`1`的并发数。）`id`

不使用 MySQL 的关系功能，但使用 MySQL 数据库，脚本将如下所示：

```
<?php
$number = 0; // This is the winning number we have drawn

$result = mysql_query("SELECT user_id FROM posts WHERE number=" .$number);

while ( $row = mysql_fetch_assoc($result) )
{
    $curpoints_result = mysql_query("SELECT points FROM users WHERE user_id=" .$row['user_id']);
    $current_points = mysql_fetch_assoc($curpoints_results);

    mysql_query("UPDATE users SET points=" .($current_points['points'] + 1). " WHERE user_id=" .$row['user_id']);
}
?> 
```

该`while`构造使此循环一直运行，直到结果（获胜者列表）的每一行都被更新。

*哦，我**知道**MySQL 是一个**关系**数据库，但它就是它的本质：一个**示例**。*

# c# - 如何生成“OnCheckedChanged”来控制“RadCombobox”上的“CheckBox”？

> ID：11228739
> 
> 赞同：0
> 
> 时间：2012-06-27T14:39:30.360
> 
> 标签：c#, telerik, dom-events, radcombobox, rad-controls

我遇到在为 radCombobox 中的控件“checkBox”实现简单事件“OnCheckedChanged”时遇到困难。我在网上找到了很多用 Javascript 编写事件的例子，但从来没有用 C#！为什么？用 C# 生成这个事件是不可能的吗？

这是我的例子：

```
<telerik:RadComboBox ID="RadComboBoxSelectedEntity" runat="server" AutoPostBack="false" EnableCheckAllItemsCheckBox="false" EmptyMessage="Tous" CheckedItemsTexts="DisplayAllInInput" CheckBoxes="true" width="300px"  
AllowCustomText="true" DataTextField="name" DataValueField="name"  HighlightTemplatedItems="true">  
<ItemTemplate> 
<asp:CheckBox runat="server" ID="CheckBox"    Text='<%# DataBinder.Eval(Container, "Text") %>' OnCheckedChanged="checkedChangeCombobox" AutoPostBack="true" />  
<asp:Label ID="lblSearchRef" runat="server" Text='<%# DataBinder.Eval(Container, "Text") %>' Visible="true" /> 
</ItemTemplate> 
<CollapseAnimation Duration="200" Type="OutQuint" />
</telerik:RadComboBox> 
```

以及 Javascript 事件“OnCheckedChanged”：

```
<script language="javascript" type="text/javascript">
    function checkedChangeCombobox(sender, eventArgs) {
        var item = eventArgs.get_item();
        sender.set_text("You checked " + item.get_text());
    }
</script> 
```

但我需要在 C# 中实现它！像那样：

```
protected void checkedChangeCombobox(object sender, EventArgs e)
{

     CheckBox myCheckBoxes = sender as CheckBox;
     string textChk = myCheckBoxes.Text;

} 
```

但不工作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:54:08.590

您需要在 ItemDataBound 事件中为组合框分配复选框事件处理程序，如下所示：

```
private void RadComboBoxSelectedEntity_ItemDataBound(object sender, Telerik.Web.UI.RadComboBoxItemEventArgs e)
{
    ((CheckBox)e.Item.FindControl("CheckBox")).CheckedChanged += checkedChangeCombobox;
} 
```

# c# - 如何将代理身份验证详细信息添加到 webclient 对象

> ID：11228744
> 
> 赞同：4
> 
> 时间：2012-06-27T14:39:46.740
> 
> 标签：c#, proxy, webclient

我有一些代码会引发 407 未经授权的异常。

我正在尝试下载一个文件，下面是我的示例代码。我尝试过使用 netcredentials 和 webproxy，但徒劳无功。

```
WebClient webClient = new WebClient();
NetworkCredential netCred=new NetworkCredential();
netCred.UserName="<<userid>>";
netCred.Password="<<password>>";
netCred.Domain="<<windowsdomainname>>";
webClient.Credentials = netCred;
WebProxy wp = new WebProxy();
wp.Credentials = netCred;
wp.Address = new Uri(@"http://proxy-xx.xxxx.co.uk:8080/proxy.pac");
webClient.Proxy = wp;
webClient.DownloadFile("http://www.win-rar.com/postdownload.html?&L=0", @"c:\winrar.exe"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T21:27:14.323

在找到您的问题之前，我得到了 407。将您的源代码修改为以下内容，这对我有用：

```
try
{
    var netCred = new NetworkCredential { UserName = "ununun", Password = @"pwpwpw", Domain = @"domain" };
    var webProxy = new WebProxy { Credentials = netCred };
    var webClient = new WebClient { Proxy = webProxy };
    webClient.DownloadFile(url, saveFileName);
}
catch (Exception ex)
{
    Console.WriteLine("Exception:\n{0}\n{1}", ex.Message, ex.StackTrace);
    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T01:43:16.833

This is what I do yesterday.

```
WebClient client = new WebClient();
ICredentials cred;
cred = new NetworkCredential(user, password);
client.Proxy = new WebProxy("xxxx-proxy", true, null, cred); 
```

Hope it help !

# c# - 带有母版页的跨页回发的奇怪行为 System.NullReferenceException

> ID：11228747
> 
> 赞同：1
> 
> 时间：2012-06-27T14:39:48.800
> 
> 标签：c#, exception-handling, nullreferenceexception

我正在使用 C# ASP.NET，我做了一个跨页回发，它工作正常，没有母版页。

但是在使用 Master page 时，相同的逻辑失败并得到上述错误。我是 ASP.NET 的新手，请详细告诉我。

我的代码是

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="View_Information.aspx.cs" Inherits="View_Information" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<p>
    Module 3: Assignment 1</p>
<div>
        Total Data You Have Entered
        <br />
        <br />
        Name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:Label ID="Label1" runat="server"></asp:Label>
        <br />
        <br />
        Address:&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:Label ID="Label2" runat="server"></asp:Label>
        <br />
        <br />
        Thanks for submitting your data.<br />
    </div>
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="Placehodler2" Runat="Server">
</asp:Content> 
```

后面的代码是

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class View_Information : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    if (PreviousPage != null && PreviousPage.IsPostBack)
    {
        TextBox nametextpb = (TextBox)PreviousPage.FindControl("TextBox1");
        //Name of controls should be good to identify in case application is big
        TextBox addresspb = (TextBox)PreviousPage.FindControl("TextBox2");
        Label1.Text =  nametextpb.Text; //exception were thrown here

        Label2.Text =  addresspb.Text;

    }

    else
    {
        Response.Redirect("Personal_Information.aspx");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:44:46.920

问题是，对于母版页，您的控件现在需要放置在`ContentPlaceHolder`控件中。

> FindControl 方法可用于访问其 ID 在设计时不可用的控件。该方法仅搜索页面的直接或顶级容器；它不会递归搜索页面中包含的命名容器中的控件。要访问从属命名容器中的控件，请调用该容器的 FindControl 方法。

您现在需要递归搜索控件以`TextBox`从`PreviousPage`. 你可以在这里看到[一个例子](http://www.codinghorror.com/blog/2005/06/recursive-pagefindcontrol.html)。在该站点上还指出，您可以通过 full 获得控制权`UniqueID`，在您的情况下，它将通过以下方式工作：

```
TextBox nametextpb = (TextBox)PreviousPage.FindControl("ctl00$ContentPlaceHolder1$TextBox1") 
```

**编辑：**认为包含我用来定位`UniqueID`目标控件的代码不会有什么坏处。

在 Page_Load 中：

```
var ids = new List<string>();
BuildControlIDListRecursive(PreviousPage.Controls, ids); 
```

以及方法定义：

```
private void BuildControlIDListRecursive(ControlCollection controls, List<string> ids)
{
    foreach (Control c in controls)
    {
        ids.Add(string.Format("{0} : {2}", c.ID, c.UniqueID));
        BuildControlIDListRecursive(c.Controls, ids);
    }
} 
```

然后只需从 ids 列表中找到您的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:17:30.220

`(TextBox)PreviousPage.FindControl("TextBox1");`must have returned `null`，表示未找到控件。

尝试`Page.Master.FindControl()`改用。

# python - 在 pyglet 中定期更改图像（精灵？）

> ID：11228749
> 
> 赞同：2
> 
> 时间：2012-06-27T14:39:54.077
> 
> 标签：python, sprite, pyglet

如何使此代码工作：只需安装并更改 pyglet`"assassin1.png"`并`"assassin2.png"`使用存储在将此代码保存到文件的目录中的图像名称。

```
import pyglet

class Assassin(pyglet.sprite.Sprite):
    def __init__(self, batch):
        pyglet.sprite.Sprite.__init__(self, pyglet.resource.image("assassin1.png"))
        self.x = 50
        self.y = 30
    def forward_movement(self):
        pass # How do I continously change between 'assassin1.png' and 'assassin2.png'?    

class Game(pyglet.window.Window):
    def __init__(self):
        pyglet.window.Window.__init__(self, width = 315, height = 220)
        self.batch_draw = pyglet.graphics.Batch()
        self.player = Assassin(batch = self.batch_draw)
        self.fps_display = pyglet.clock.ClockDisplay()
        self.keys_held = []      
        self.schedule = pyglet.clock.schedule_interval(func = self.update, interval = 1/60.) 

    def on_draw(self):
        self.clear()
        self.fps_display.draw()
        self.batch_draw.draw()
        self.player.draw()  

    def on_key_press(self, symbol, modifiers):
        self.keys_held.append(symbol)
        if symbol == pyglet.window.key.RIGHT:
            self.player.forward_movement()
            print "The 'RIGHT' key was pressed"

    def on_key_release(self, symbol, modifiers):
        self.keys_held.pop(self.keys_held.index(symbol))

    def update(self, interval):
        if pyglet.window.key.RIGHT in self.keys_held:
            self.player.x += 50 * interval

if __name__ == "__main__":
    window = Game()
    pyglet.app.run() 
```

说明：此代码创建一个黑色背景屏幕，其中显示 fps，并在位置 (50, 30) 处显示图像“assassin1.png”。只要按住右方向按钮，图像就会向右移动。

目标：**我想实现，只要按住右方向按钮并且图像正在移动，`assassin1.png`图像就会周期性地（每 0.25 秒左右）更改为第二张图像`assassin2.png`。这是为了制造图像正在行走的模糊错觉。**

**我如何实现这个目标？**

我已经在 Assassin 类中创建了一个空`forward_movement()`方法，这似乎是放置代码以实现我的目标的合适位置。但是，如果您想将代码放在另一个地方，那也可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T10:30:42.673

[pyglet.sprite.Sprite](https://pyglet.readthedocs.io/en/latest/modules/sprite.html#pyglet.sprite.Sprite)类允许您随时将其图像编辑为[动画](https://pyglet.readthedocs.io/en/latest/modules/image/animation.html#module-pyglet.image.animation)。因此，在 sprites 构造函数中，我们定义了一个行走动画：

```
def __init__(self, batch):
    # The image to display when not moving
    self._img_main = pyglet.image.load('assassin.png')

    self._img_right_1 = pyglet.image.load('assassin1.png')
    self._img_right_2 = pyglet.image.load('assassin2.png')
    self.anim_right = pyglet.image.Animation.from_image_sequence([
        self._img_right_1, self._img_right_2], 0.5, True)
    # 0.5 is the number in seconds between frames
    # True means to keep looping (We stop it later)

    pyglet.sprite.Sprite.__init__(self, self._img_main)
    #... 
```

接下来我们添加一个函数来更轻松地更改动画：

```
def forward_movement(self, flag=True):
    if flag:
        self.image = self.anim_right # Now our sprite animates
    else:
        self.image = self._img_main 
```

最后我们在适当的时候调用该函数：

```
#...
def on_key_press(self, symbol, modifiers):
    self.keys_held.append(symbol)
    if symbol == pyglet.window.key.RIGHT:
        self.player.forward_movement(True)
        print "The 'RIGHT' key was pressed"

def on_key_release(self, symbol, modifiers):
    self.keys_held.pop(self.keys_held.index(symbol))
    if symbol == pyglet.window.key.RIGHT:
        self.player.forward_movement(False) # We have stopped moving
#... 
```

瞧！当用户按下右键时，精灵会移动并动画！

# android - 将图像视图另存为 sdcard 中的 jpeg 图像

> ID：11228750
> 
> 赞同：0
> 
> 时间：2012-06-27T14:39:57.550
> 
> 标签：android

```
public class MapDemoActivity extends Activity {

Button capture;

    ImageView image;
    int cameracode=100;
    Bitmap bm;
    Boolean result;
    FileOutputStream fos;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        capture=(Button)findViewById(R.id.capture);
        capture.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                image=(ImageView)findViewById(R.id.image);
                Intent i=new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(i, cameracode);
                image.setDrawingCacheEnabled(true);
                bm = image.getDrawingCache();

                try {
                    fos = new FileOutputStream("sdcard/image.jpg");
                    result=bm.compress(CompressFormat.JPEG, 75, fos);

                    fos.flush();
                    fos.close();
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block

                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block

                    e.printStackTrace();
                }

            }
        });

    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub

                    if(requestCode==100)
                    {

                        bm=(Bitmap) data.getExtras().get("data");
                        image.setImageBitmap(bm);

                    }

        super.onActivityResult(requestCode, resultCode, data);
    }
} 
```

在这个程序中，我正在从相机捕获图像并显示到图像视图然后我试图将其转换为 Jpeg 以存储在 sdcard 中...但是当我按下**捕获图像**按钮 prog 强制关闭.. & 在 sdcard 中创建的空 jpeg 文件...我想将 jpeg 文件存储到 sdcard

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:46:11.370

`startActivityForResult`是一个异步调用，因此在该调用之后您所拥有的所有内容都会在等待捕获完成之前立即执行。您应该将保存代码移动到`onActivityResult`.

此外，您不应硬编码，而应`sdcard`改为使用`Environment.getExternalStorageDirectory()`。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    capture=(Button)findViewById(R.id.capture);
    capture.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            image=(ImageView)findViewById(R.id.image);
            Intent i=new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(i, cameracode);
        }
    });

}
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub

    if(requestCode==100)
    {

        bm=(Bitmap) data.getExtras().get("data");
        image.setImageBitmap(bm);

        if(bm == null) {
            return; //probably user cancelled;
        }

        try {
            fos = new FileOutputStream(new File(Environment.getExternalStorageDirectory(), "image.jpg"));
            result=bm.compress(CompressFormat.JPEG, 75, fos);

            fos.flush();
            fos.close();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block

            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block

            e.printStackTrace();
        }

    }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

最后，您可能希望在尝试保存之前检查您是否确实获得了图像，因为用户可能已取消图像捕获。

除此之外，我建议您发布完整的 logcat 堆栈跟踪。或许里面还有什么不祥之物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:45:54.787

尝试将您的目标目录更改为：

```
try {
                fos = new FileOutputStream("/mnt/sdcard/MyActivity/image.jpg");
                result=bm.compress(CompressFormat.JPEG, 75, fos);

                fos.flush();
                fos.close(); 
```

确保在写入目录之前创建目录。

```
 String dir  = "/mnt/sdcard/MyActivity/";
        directory = new File(dir);
        if (!directory.exists()) {
            directory.mkdirs();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:54:50.803

我认为 startActivityForResult 之后的部分代码被执行，并且位图尚不可用。您应该将其直接保存在 onActivityResult 上。

此外，您是否要求 Android 通过提供以下意图来保存您的图像：

```
final Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);  
intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(getTempFile(this)) );   
startActivityForResult(intent, TAKE_PHOTO_CODE); 
```

getTempFile 是一个函数，它返回我想要的路径。

PS：您是否在清单中要求许可？你需要

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.CAMERA" /> 
```

# objective-c - 在 iOS 中为联系人添加按钮

> ID：11228751
> 
> 赞同：0
> 
> 时间：2012-06-27T14:40:00.363
> 
> 标签：objective-c, ios, addressbook

我有一个注册新 URL 方案（'myapp://'）的应用程序。

我想让地址簿跟踪使用 URL 方案的联系人的地址，就像它对电子邮件、SMS、Facetime、电话等所做的那样。

我想让联系信息页面上有一个按钮来启动我的应用程序并从联系信息页面传递“myapp://”URL。

有没有办法向通讯簿中的联系人添加按钮，例如“发送消息”或“Facetime”按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:46:36.457

不可以。一般来说，一个应用程序不能更改另一个应用程序；一切都是沙盒。

但是您可以添加一个 URL，并且您的 URL 方案只是一个普通的 URL，尽管它在您的 iPhone 之外不起作用。所以它会显示为链接而不是按钮，但它的工作方式相同。

# jqgrid - jqGrid 为 alertmod 设置 zIndex

> ID：11228764
> 
> 赞同：2
> 
> 时间：2012-06-27T14:40:24.060
> 
> 标签：jqgrid, z-index

我已经成功地增加了编辑、添加、删除和搜索选项的 zIndex，但 alertmod 仍处于 z-index 950 使其始终落后于父模式。

alertmod 是单击编辑或删除而不选择任何行时的警告消息。有没有办法更改 alertmod 的 zIndex？

新代码但仍然无法正常工作...我是否按错误顺序放置了它

```
$("#list-employees-grid").jqGrid('navGrid',"#list-employees-pager",{alertzIndex:3234},
  {edit:true,add:false,del:true,search:true,},
  {zIndex:1234}, //option for edit
  {zIndex:2234}, // for add
  {zIndex:3234}, // del
  {zIndex:4234, multipleSearch:true, multipleGroup:true}  // search

  ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:09:51.150

在某些情况下可以创建“alertmod”。例如，如果您的意思是来自`navGrid`您可以使用的`alertzIndex`选项的警报，该选项当前未记录在`navGrid` [参数](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3anavigator#parameters)列表中。不过，您可以使用警报对话框使用的以下选项：`alertcap`、`alerttop`、`alertleft`、`alertwidth`、`alertheight`、`closeOnEscape`、`alertzIndex`。有关详细信息，请参见代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.0/js/grid.formedit.js#L1748)。

例如，您可以为`alertzIndex`by设置默认值

```
$.extend($.jgrid.nav, {alertzIndex: 1005}); 
```

**更新**：我发布[了功能请求](http://www.trirand.com/blog/?page_id=393/feature-request/support-default-values-for-jgrid-createmodal/#p26863)，可以解决常见情况下警报对话框选项的问题。

**更新 2**：功能请求已在 github 上的 jqGrid 代码中实现（请参见[此处](https://github.com/tonytomov/jqGrid/commit/2eaaee270e8b98c539fdcaa3da1a9728100da899)）。所以在下一个版本（4.4.0 之后的下一个版本）中可以使用

```
$.extend($.jgrid.jqModal, {zIndex: 1005}); 
```

`z-Index`为jqGrid 显示的所有警报消息设置默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:06:34.990

是的，有一个`alertzIndex`选项可用于指定自定义 zIndex。例如：

```
jQuery("#grid_id").jqGrid({
 ...
 pager : '#gridpager',
 ...
}).jqGrid('navGrid', '#gridpager', {alertzIndex: customZIndex, ...}); 
```

[jqGrid Navigator 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3anavigator)中缺少此选项，并且可能在“参数”部分中有一个条目。如果您查看[grid.formedit.js](https://github.com/tonytomov/jqGrid/blob/master/js/grid.formedit.js)并浏览到第`navGrid`1702 行的函数定义，您可以在源代码中看到所有可能的选项。

这有帮助吗？

# python - 如何使用 lxml 进行 Python XPath 不区分大小写的搜索？

> ID：11228767
> 
> 赞同：7
> 
> 时间：2012-06-27T14:40:35.913
> 
> 标签：python, xpath, html-parsing, lxml, lowercase

我正在尝试使用`lower-case`XPath 中的函数匹配国家或地区。`translate`有点乱，所以使用小写字母并且我的 Python 版本 2.6.6 支持 XPath 2.0 我相信因为小写字母仅在 XPath 2.0 中可用。

我正在寻找如何在我的情况下使用小写字母。希望这个例子是不言自明的。我正在寻找`['USA', 'US']`输出（如果小写评估 Country 和 country 相同，则可能会同时发生这两个国家）。

**HTML：文档.htm**

```
<html>
    <table>
        <tr>
            <td>
                Name of the Country : <span> USA </span>
            </td>
        </tr>
        <tr>
            <td>
                Name of the country : <span> UK </span>
            </td>
        </tr>
</table> 
```

**Python ：**

```
import lxml.html as lh

doc = open('doc.htm', 'r')
out = lh.parse(doc)
doc.close()

print out.xpath('//table/tr/td[text()[contains(. , "Country")]]/span/text()')
# Prints : [' USA ']
print out.xpath('//table/tr/td[text()[contains(. , "country")]]/span/text()')
# Prints : [' UK ']

print out.xpath('//table/tr/td[lower-case(text())[contains(. , "country")]]/span/text()')
# Prints : [<Element td at 0x15db2710>] 
```

**更新 ：**

```
out.xpath('//table/tr/td[text()[contains(translate(., "ABCDEFGHIJKLMNOPQRSTUVWXYZ", "abcdefghijklmnopqrstuvwxyz") , "country")]]/span/text()') 
```

现在问题仍然存在，我可以将翻译部分存储为全局变量“handlecase”并在执行 XPath 时打印该全局变量吗？

**像这样的工作：**

```
handlecase = """translate(., "ABCDEFGHIJKLMNOPQRSTUVWXYZ", "abcdefghijklmnopqrstuvwxyz")"""

out.xpath('//table/tr/td[text()[contains(%s , "country")]]/span/text()' % (handlecase)) 
```

但为了简单和可读性，我想像这样运行它：

```
out.xpath('//table/tr/td[text()[contains(handlecase , "country")]]/span/text()') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T18:23:21.023

我相信得到你想要的最简单的事情就是编写一个 XPath 扩展函数。

通过这样做，您可以编写一个`lower-case()`函数或不区分大小写的搜索。

您可以在此处找到详细信息：http: [//lxml.de/extensions.html](http://lxml.de/extensions.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T04:09:41.207

**使用**：

```
 //td[translate(substring(text()[1], string-length(text()[1]) - 9),
                  'COUNTRY :',
                  'country'
                  )
        =
         'country'
       ]
        /span/text() 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
  "//td[translate(substring(text()[1], string-length(text()[1]) - 9),
                  'COUNTRY :',
                  'country'
                  )
        =
         'country'
       ]
        /span/text()
       "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<html>
        <table>
            <tr>
                <td>
                    Name of the Country : <span> USA </span>
                </td>
            </tr>
            <tr>
                <td>
                    Name of the country : <span> UK </span>
                </td>
            </tr>
        </table>
</html> 
```

**计算 XPath 表达式并将选定的两个文本节点复制到输出：**

```
 USA  UK 
```

**说明**：

1.  我们使用实现 XPath 2.0 标准函数的 XPath 1.0 表达式的特定变体`ends-with($text, $s)`：这是：

......

```
$s = substring($text, string-length($text) - string-length($s) +1) 
```

.2\. 下一步是使用该`translate()`函数将结束的 10 个字符的长字符串转换为小写，消除任何空格或任何“：”字符。

.3\. 如果结果是字符串（全小写）“country”，那么我们选择 this 的 s= `span`child 的子文本节点（在这种情况下只有一个） `td`。

# javascript - XSS上的数据 URI 是否可被利用？

> ID：11228771
> 
> 赞同：10
> 
> 时间：2012-06-27T14:40:47.717
> 
> 标签：javascript, html, cross-domain, xss, data-uri

看完这篇文章，我没有一个明确的答案：

[http://palizine.plynt.com/issues/2010Oct/bypass-xss-filters/](http://palizine.plynt.com/issues/2010Oct/bypass-xss-filters/)

*   浏览器会将 text/html 数据 URI 有效负载解释为执行标签`<img>` `src`的文档吗？`<script>`

*   如果不是，那么在第三方 HTML 中允许数据 URI 是否安全？

*   对于这个用例，浏览器级别存在哪些安全机制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T18:11:06.263

[MSDN 文档](http://msdn.microsoft.com/en-us/library/cc848897)说 IE 没有：

> 出于安全原因，数据 URI 仅限于下载的资源。数据 URI 不能用于导航、脚本或填充框架或 iframe 元素。

另一方面，Mozilla 确实允许[iframe](https://bugzilla.mozilla.org/show_bug.cgi?id=296871)和[脚本](https://bugzilla.mozilla.org/show_bug.cgi?id=255107)执行：

> 数据：继承其引荐来源的网址允许它们用于生成或窗口内容，父可以与之交互。Gecko 一直都是这样做的（我们有很多分散在各处的安全检查，不得不担心它）。

[Safari](https://bugs.webkit.org/show_bug.cgi?id=17352)和[Chromium](https://code.google.com/p/chromium/issues/detail?id=58999)沙箱数据 URI 执行，有效地将它们视为跨域请求。

> 我们目前将 data: URIs 标记为无法访问任何其他来源，包括其他 data: URIs。

HTML5 规范规定：

> 如果从数据生成文档或图像：作为 HTTP 重定向的位置返回的 URL（或其他协议中的等效项）

> 来源是重定向到数据的 URL 的来源：URL。

> 如果从数据生成文档或图像：在另一个文档或脚本中找到的 URL

> 原点是在调用导航算法时由现有设置对象指定的原点的别名，或者，如果不涉及脚本，则是启动到该 URL 的导航的元素的节点文档的别名。

> 如果以其他方式获取文档或图像（例如，数据：用户输入的 URL、使用 createDocument() API 创建的文档、数据：作为 HTTP 重定向位置返回的 URL 等）

> 来源是创建文档或图像时分配的全局唯一标识符。

RFC6454 补充道：

> URI 不一定与自身同源。例如，数据 URI [RFC2397] 与自身不同源，因为数据 URI 不使用基于服务器的命名机构，因此具有全局唯一标识符作为来源。

CSSHTTPRequest[库](https://github.com/nbio/csshttprequest)使用数据 URI 来执行跨站点 GET 请求，但这是它在所有浏览器中最多可以执行的操作。

**参考**

*   [HTML生活标准：起源](https://html.spec.whatwg.org/multipage/browsers.html#origin)

*   [RFC 6454：Web 起源概念](https://www.rfc-editor.org/rfc/rfc6454)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:16:19.210

可以通过这种方式注入数据，但需要注意的是，也可以在图像本身的二进制数据中注入数据。不管怎样，没有什么是 100% 安全的。曾经。如果您使用的是 codeigniter 框架，您可以通过以下方式非常可靠地保护自己免受此影响

```
 $this->security->xss_clean() 
```

除此之外，您还可以构建您自己的脚本版本，使用正则表达式删除危险的东西。记住在构建这样的脚本时要注意不同的字符编码。

# ios - 在 iOS 的 xcode 中，如何将文本字段与两个字符串进行比较？

> ID：11228772
> 
> 赞同：1
> 
> 时间：2012-06-27T14:40:52.553
> 
> 标签：ios, xcode, string, if-statement

这个问题可能看起来有点令人困惑，但我有一个看起来像这样的 if 语句

```
if ([textAnswer.text isEqualToString:@"Fish"])

{
    wrong.textColor = [UIColor greenColor];
    wrong.text = @"Correct";
        } else {
            wrong.textColor = [UIColor redColor];
            wrong.text = @"Wrong, try again";
                } 
```

有没有一种简单的方法让它等于两个字符串，即如果他们在 textAnswer 字段中输入 Fish or Chips 是正确的？

我试过这样输入

```
 ([textAnswer.text isEqualToString:@"Fish",@"Chip"]) 
```

但是 Xcode 会标记一个错误，说只有一个语句而不是两个语句。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T14:42:44.607

它需要是两个比较和它们的结果的组合意义：`if ([textAnswer.text isEqualToString:@"Fish"] || [textAnswer.text isEqualToString:@"Chips"])`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:49:41.280

您还可以检查字符串是否在数组中：

```
NSArray *goodStrings;
NSUInteger index;

goodStrings = [NSArray arrayWithObjects:
               @"Fish", @"Chips", "Beer", nil];

index = [goodStrings textAnswer.text];
if(index == NSNotFound) {
    // not found
} else {
    // found
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:51:10.523

代码 Phillip postet 是正确的。但是，如果您有超过 2 或 3 个要比较的字符串，则可以将它们全部放在 NSArray 中并执行以下操作：

```
NSArray *yourArray = [@"Word1 Word2 Word3" componentsSeparatedByString:@" "];
NSString *yourString = @"Fish";

if([yourArray containsObject:yourString]){
 /* Do Something */
} 
```

# c# - 在会话中存储之前强制评估匿名类型查询

> ID：11228775
> 
> 赞同：0
> 
> 时间：2012-06-27T14:40:57.350
> 
> 标签：c#, asp.net, linq-to-sql, operator-precedence

我需要带回几个用户特定的数据集以绑定到经常（重新）加载（可能无法使用回发数据）的搜索页面的下拉列表。我想访问数据库一次，并在必要时从会话数据中填充下拉列表，而不是再次从数据库中获取它。

当我设置会话（最后一行，下面）时，它会存储评估结果，还是每次都会引用会话重新运行查询？如果是后者，那么在设置会话之前强制评估同时仍保持使用匿名类型的最佳方法是什么？

```
public class CustomClass
{
    public IQueryable Results1 { get; set; }
    public IQueryable Results2 { get; set; }
}

public static CustomClass GetResults()
{
    var results1 = (
        from t in Table
        select new
        {
            t.Id,
            t.Value
        };

    var results2 = (
        from t in Table
        select new
        {
            t.Id,
            t.Value
        };

    return 
        new CustomClass
        {
            Results1 = results1,
            Results2 = results2
        };
}

*****

Session["Results"] = GetResults(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:43:47.083

只需使用`.ToList()`on`result1`和`result2`。

```
return  
    new CustomClass 
    { 
        Results1 = results1.ToList(), 
        Results2 = results2.ToList() 
    }; 
```

# pug - 让jade编译成index.php而不是index.html

> ID：11228776
> 
> 赞同：6
> 
> 时间：2012-06-27T14:41:05.133
> 
> 标签：pug

我怎样才能让玉编译成 index.php 而不是 index.html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T12:14:02.373

没有找到“配置方式”，但在 Codekit 中手动我们可以指定输出文件并设置 index.php 而不是 index.html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T22:32:47.970

在 CodeKIT 上转到配置和页面底部，将 *.html 更改为 *.php 查看图像![点击这里](../Images/dd64b715d85b941b3e3190516ef394ce.png)以查看更改位置！

# sql - 使用游标检查行中的每一列并为每个匹配返回行

> ID：11228784
> 
> 赞同：0
> 
> 时间：2012-06-27T14:41:27.300
> 
> 标签：sql, cursor, sql-server-2000

我正在修复以前的开发人员存储过程，该存储过程旨在根据字符串匹配条件连接一堆表，然后搜索连接的表并返回信息以及信息如何匹配的描述。

该过程当前查看连接表中的每一列，当它找到匹配项时，它会在结果表中创建一个新行并进入源表中的下一列。问题是当连续有多个匹配时，第一个匹配之后的任何内容都不会产生。

我需要一个像这样的表：

```
----A---B---C---D---E---F---G---H---I---
|                                      |
1.-------------------------------------|
|   N   Y   Y   N   N   N   N   N   N  |
2.--------------------------------------
|   Y   N   N   N   N   N   N   N   N  |
3.--------------------------------------
|   N   Y   N   N   Y   Y   N   N   N  |
---------------------------------------- 
```

生成一个表格：

```
----A---B---C---D---E---F---G---H---I---
|                                      |
1.--------------------------------------
|   found a match in row 1-B           |
2.--------------------------------------
|   found a match in row 1-C           |
3.--------------------------------------
|   found a match in row 2-A           |
4.--------------------------------------
|   found a match in row 3-B           |
5.--------------------------------------
|   found a match in row 3-E           |
6.--------------------------------------
|   found a match in row 3-F           |
---------------------------------------- 
```

有没有比为需要检查的每一列创建单独的例程更有效的方法来查找所有匹配项。我被告知游标可以解决这个问题，但是这个查询已经需要相当长的时间来运行。

如果它有帮助，这里是原始程序：

```
SELECT  
    CASE WHEN (rpfname LIKE @SearchString OR rplname LIKE @SearchString) AND rlrelcode = 'A' THEN 2
        WHEN ((rpfname LIKE @SearchString OR rplname LIKE @SearchString) AND (rlrelcode LIKE 'c%' OR rlrelcode LIKE 'REL%' OR rlrelcode = 'E')) OR clname1 LIKE  @SearchString  OR clname2 LIKE  @SearchString OR clcontact LIKE  @SearchString  OR clrefer LIKE  @SearchString OR mcontact LIKE  @SearchString THEN 3 
        ELSE 1 END  AS type, 
    ISNULL(CAST(mmatter AS VARCHAR(100)), '<Matter does not exist>') AS client_matter_number,
    clnum, 
    mdesc1 AS matter_description, 
    ISNULL(mbillaty, udvalue) AS ttk,
    ISNULL(mopendt, clopendt)  AS open_date, 
    mclosedt  AS close_date, 
    LTRIM(ISNULL(clname1, '') + ISNULL(' ' + clname2, '')) AS client_name, 
    CASE WHEN (rpfname LIKE  @SearchString  OR rplname LIKE  @SearchString ) THEN LTRIM(ISNULL(rpfname, '') + ISNULL(' ' + rplname, ''))
        WHEN rddesc LIKE  @SearchString  THEN LTRIM(rddesc  )
        WHEN (clname1 LIKE  @SearchString  OR clname2 LIKE  @SearchString )  THEN LTRIM(ISNULL(clname1, '') + ISNULL(' ' + clname2, ''))
        WHEN clcontact LIKE  @SearchString  THEN LTRIM(clcontact)
        WHEN clrefer LIKE  @SearchString  THEN LTRIM(clrefer)
        WHEN cddesc LIKE  @SearchString  THEN LTRIM(cddesc)
        WHEN mname LIKE  @SearchString  THEN LTRIM(mname)
        WHEN mdesc1 LIKE  @SearchString  THEN LTRIM(mdesc1)
        WHEN mddesc LIKE  @SearchString  THEN LTRIM(mddesc)
        WHEN mcontact LIKE  @SearchString  THEN LTRIM(mcontact)
        WHEN fdesc1 LIKE  @SearchString  THEN LTRIM(fdesc1)
        WHEN fdnarr LIKE  @SearchString  THEN LTRIM(fdnarr)
        WHEN subdesc1 LIKE  @SearchString   THEN LTRIM(subdesc1)
        WHEN subnarr LIKE  @SearchString   THEN LTRIM(subnarr) END AS found_search_string, 
    CASE WHEN rpfname LIKE  @SearchString  OR rplname LIKE  @SearchString THEN dbo.stcGetRelationNarrative(rlindex) 
        ELSE '' END AS notes, 
    CASE WHEN (rpfname LIKE  @SearchString  OR rplname LIKE  @SearchString) THEN rlrelation 
        ELSE '' END AS relationship,
    CASE WHEN (rpfname LIKE  @SearchString  OR rplname LIKE  @SearchString) AND rlrelcode = 'A' THEN 'A'
        WHEN ((rpfname LIKE  @SearchString  OR rplname LIKE  @SearchString) AND (rlrelcode LIKE 'c%' OR rlrelcode LIKE 'REL%' OR rlrelcode = 'E')) OR clname1 LIKE  @SearchString  OR clname2 LIKE  @SearchString OR clcontact LIKE  @SearchString  OR clrefer LIKE  @SearchString OR mcontact LIKE  @SearchString THEN 'CF' 
        ELSE '?' END  AS relation_code,
    CASE WHEN (rpfname LIKE  @SearchString  OR rplname LIKE  @SearchString ) THEN 'RP Name'
        WHEN rddesc LIKE  @SearchString  THEN 'RP Narrative' 
        WHEN (clname1 LIKE  @SearchString  OR clname2 LIKE  @SearchString)  THEN 'Client Name'
        WHEN clcontact LIKE  @SearchString  THEN 'Client Contact'
        WHEN clrefer LIKE  @SearchString  THEN 'Client Referral'
        WHEN cddesc LIKE  @SearchString  THEN 'Client Narrative'
        WHEN mname LIKE  @SearchString  THEN 'Matter Name'
        WHEN mdesc1 LIKE  @SearchString  THEN 'Matter Description'
        WHEN mddesc LIKE  @SearchString  THEN 'Matter Narrative'
        WHEN mcontact LIKE  @SearchString  THEN 'Matter Contact'
        WHEN fdesc1 LIKE  @SearchString  THEN 'Folder Description'
        WHEN fdnarr LIKE  @SearchString  THEN 'Folder Narrative'
        WHEN subdesc1 LIKE  @SearchString   THEN 'Submatter Description'
        WHEN subnarr LIKE  @SearchString   THEN 'Submatter Narrative' END AS source_of_information 
FROM crlparty rp WITH (NOLOCK) 
    LEFT OUTER JOIN 
    crllink r  WITH (NOLOCK) 
        ON r.rpindex = rp.rpindex  
    FULL OUTER JOIN  
    matter m WITH (NOLOCK) 
        ON rlmatter = m.mrelated 
    LEFT OUTER JOIN 
    mattdesc md WITH (NOLOCK) 
        ON m.mmatter = md.mmatter 
    FULL OUTER JOIN  
    client c WITH (NOLOCK)  
        ON ISNULL(m.mclient, r.rlclnum) = c.clnum 
    LEFT OUTER JOIN
    clidesc cd WITH (NOLOCK)
        ON c.clnum = cd.clnum 
    LEFT OUTER JOIN
    crldesc rpd WITH (NOLOCK)
        ON rpd.rpindex = r.rpindex
    LEFT OUTER JOIN 
    udf u WITH (NOLOCK)
        ON u.udjoin = c.clnum AND 
            u.udfindex=40
    FULL OUTER JOIN
    folder f WITH (NOLOCK) 
        ON m.mmatter = f.fmatter
    LEFT OUTER JOIN 
    foldnarr fn WITH (NOLOCK) 
        ON f.findex = fn.findex 
    FULL OUTER JOIN
    submatter s WITH (NOLOCK) 
        ON r.rlmatter = s.smatter
    LEFT OUTER JOIN 
    subnarr sn WITH (NOLOCK) 
        ON s.sindex = sn.sindex

WHERE (rp.rpfname LIKE  @SearchString  OR rp.rplname LIKE  @SearchString ) OR
    rpd.rddesc LIKE  @SearchString  OR 

    (c.clname1 LIKE  @SearchString  OR c.clname2 LIKE  @SearchString )  OR
    c.clcontact LIKE  @SearchString  OR
    c.clrefer LIKE  @SearchString  OR
    cd.cddesc LIKE  @SearchString  OR

    m.mname LIKE  @SearchString  OR
    m.mdesc1 LIKE  @SearchString  OR
    md.mddesc LIKE  @SearchString  OR 
    m.mcontact LIKE  @SearchString  OR

    f.fdesc1 LIKE  @SearchString  OR
    fn.fdnarr LIKE  @SearchString  OR

    s.subdesc1 LIKE  @SearchString   OR
    sn.subnarr LIKE  @SearchString 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:02:14.647

我最终将所有逻辑从存储过程转移到应用程序。存储过程只是简单地连接表并执行一些简单的过滤器。然后我使用应用程序 (C#) 返回我想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:59:17.407

我确信有更有效的方法，但我并不完全确定大局 - 但只是简单地回答“我需要一个像......这样的桌子”的问题，这是一个快速而肮脏的

```
 SELECT ID, 'Found a match in row ' + CAST(Id as varchar(8))+ '-A' FROM YOURTABLE WHERE A = 'Y'
  UNION  ALL SELECT ID, 'Found a match in row ' + CAST(Id as varchar(8))+ '-B' FROM YOURTABLE  WHERE B = 'Y'
  UNION  ALL SELECT ID, 'Found a match in row ' + CAST(Id as varchar(8))+ '-C' FROM YOURTABLE WHERE C = 'Y' 
```

# django - 在 django 处理大请求时维持 http 连接（20 分钟以上）

> ID：11228786
> 
> 赞同：1
> 
> 时间：2012-06-27T14:41:31.720
> 
> 标签：django, http

我有一个正在生成 csv 下载的 django 站点。csv 的内容由用户定义的参数决定。用户可能会在服务器上设置需要大量思考时间的参数。我需要一种维持 http 连接的方法，这样浏览器就不会弹出错误消息。我听说可以发送间歇性 http 标头来执行此操作。谁能指出我在 django 网站上设置的正确方向？

（不幸的是，我遇到了缓慢报告的可能性 - 改进我的 sql 不会减轻这种情况）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T14:50:28.230

不要在网上做。触发离线任务，使用一点 Javascript 重复调用检查任务是否完成的视图，并在准备好时重定向到完成的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T14:51:47.050

在后台执行耗时的任务，而不是阻止用户及其浏览器 20 分钟（这不是一个好主意）。当任务完成并生成结果时，只需通知用户，以便他/她只需要下载准备好的结果。

# java - 在 Java SDK Amazon S3 中配置路径样式

> ID：11228792
> 
> 赞同：12
> 
> 时间：2012-06-27T14:42:05.773
> 
> 标签：java, amazon-s3, amazon-web-services

我正在使用Amazon 提供的[AWS Java SDK与 S3 服务进行交互。](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/index.html)

似乎默认情况下，SDK 对存储桶使用虚拟主机样式（即存储桶由*存储桶名称*.s3.amazonaws.com 引用。例如：

```
PUT / HTTP/1.1
Host: a-given-bucket.s3.amazonaws.com
Date: Tue, 26 Jun 2012 10:39:40 GMT
Content-Type: application/x-www-form-urlencoded; charset=utf-8
Content-Length: 0 
```

但是，我需要在我的应用程序中使用路径样式，如下所示：

```
PUT /a-given-bucket/ HTTP/1.1
Host: s3.amazonaws.com
Date: Thu, 21 Jun 2012 16:27:32 GMT
Content-Type: application/x-www-form-urlencoded; charset=utf-8
Content-Length: 0 
```

请问Ja​​va SDK可以使用path-style吗？在积极的情况下，我该怎么做？我查看了 ClientConfiguration 和 AmazonS3Client 类，但我没有看到任何方法来做到这一点......

如果重要的话，我的 SDK 版本是：2.0.0v201206151133。

谢谢！

* * *

费尔明

PD。为简单起见，示例中省略了一些标题。

**编辑：** 这样的功能（用于配置 AmazonS3Client 使用的 URL 路径样式）在您有带有点（“。”）的存储桶的情况下非常有用。具有虚拟主机样式的 HTTPS 请求不起作用，请参阅[this](http://shlomoswidler.com/2009/08/amazon-s3-gotcha-using-virtual-host.html)和[this](http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html)。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-06-03T10:37:32.367

*withPathStyleAccess*方法已被弃用。请改用以下内容：

```
AmazonS3 s3client = AmazonS3Client.builder()
            .withCredentials((new AWSStaticCredentialsProvider(credentials)))
            .withEndpointConfiguration(new AwsClientBuilder.EndpointConfiguration("host", "region"))
            .withPathStyleAccessEnabled(true)
            .build(); 
```

* * *

不推荐使用的方法：

现在这是可能的，我不确定它是什么时候引入的，但它至少在 Java AWS SDK 的 1.7.8 版本中可用。

只需在您的 AmazonS3 实例上调用[setClientOptions ：](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3.html#setS3ClientOptions%28com.amazonaws.services.s3.S3ClientOptions%29)

```
AmazonS3 client = new AmazonS3Client(credentials);
client.setS3ClientOptions(new S3ClientOptions().withPathStyleAccess(true)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-05-04T22:25:21.127

对于 SDK v2，您可以通过以下方式启用路径样式：

```
 public S3Client build() {

        final S3Configuration config = S3Configuration.builder()
                .pathStyleAccessEnabled(true)
                .build();

        return S3Client.builder()
                .serviceConfiguration(config)
                // other set up
                .build();
    } 
```

亚马逊原计划从 2020 年 9 月起弃用路径样式访问，但此弃用已被推迟：[https ://forums.aws.amazon.com/ann.jspa?annID=6776](https://forums.aws.amazon.com/ann.jspa?annID=6776)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-14T23:32:19.840

无法使用 Java SDK 强制 V1（路径样式）存储桶寻址。唯一的例外是您的存储桶名称无法通过 DNS 寻址，在这种情况下，SDK 将自动使用 V1 寻址。例如，当您的存储桶名称包含句点时（因此不鼓励这样做），就会发生这种情况。

如果你想要这个功能，你必须修改`AmazonS3Client`类以允许它。

[https://github.com/amazonwebservices/aws-sdk-for-java/](https://github.com/amazonwebservices/aws-sdk-for-java/)

但是，我不确定我是否相信您“需要”使用 V1 存储桶寻址的说法。SDK 已经处理了所有需要 V1 寻址的情况——或者如果您发现不需要的情况，请在论坛中告诉我们。

[https://forums.aws.amazon.com/forum.jspa?forumID=70](https://forums.aws.amazon.com/forum.jspa?forumID=70)

# ruby-on-rails - ActiveModel：危险使用 send()？

> ID：11228795
> 
> 赞同：2
> 
> 时间：2012-06-27T14:42:13.907
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activemodel

在[RailsCast 219](http://railscasts.com/episodes/219-active-model?view=asciicast)中，提供了以下代码来创建一个用于从表单来回传送数据的类，但没有任何 ActiveRecord 持久性：

```
class Message
  include ActiveModel::Validations

  attr_accessor :name, :email, :content

  validates_presence_of :name
  validates_format_of :email, :with => /^[-a-z0-9_+\.]+\@([-a-z0-9]+\.)+[a-z0-9]{2,4}$/i
  validates_length_of :content, :maximum => 500

  def initialize(attributes = {})
    attributes.each do |name, value|
      send("#{name}=", value)
    end
  end
end 
```

我是 Ruby 新手，但这`send("#{name}=", value)`似乎是在邀请攻击者将任意值分配给任意字段。这是一个问题吗？一些评论者提出了[类似的问题](http://railscasts.com/episodes/219-active-model?view=comments#comment_109494)，但没有回应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:52:03.400

`send`是动态调用方法的常用方式（当您事先不知道要调用什么时）。

如果您担心安全性，则绝对应该进行一些验证。这是一个简单的限制检查：

```
def initialize(attributes = {})
  attributes.each do |name, value|
    if [:name, :email, :content].include?(name)
      send("#{name}=", value)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T12:42:33.627

当我最近问了一个与同一个 RailsCast 相关的[问题](https://stackoverflow.com/questions/17031262)时，被告知初始化程序很危险，但遗憾的是没有给出任何理由。

经过更深入的研究，我现在认为该方法*不会*引入任何安全漏洞，原因是 jdoe 在对您的问题的评论中没有提到。send 方法不会绕过访问器方法，因此属性的安全性通常由访问器声明控制。

但是，我建议进行验证检查，以提高针对尝试分配不可访问或不存在的属性的鲁棒性。类似于 Sergio 的建议，但更笼统：

```
attributes.each do |name, value|
  send("#{name}=", value) if respond_to?("#{name}=")
end 
```

# tfsbuild - 在使用自定义构建程序集的 TFS 构建模板中出现错误“无法加载活动......”我该如何解决这个问题？

> ID：11228801
> 
> 赞同：2
> 
> 时间：2012-06-27T14:42:31.710
> 
> 标签：tfsbuild

[我从http://versionedtfsbuild.codeplex.com/](http://versionedtfsbuild.codeplex.com/)下载了自定义构建程序集。在获取工作区和更新内部版本号之间的活动中，我很难在 xaml 中解决错误。
我的构建模板文件夹下的文件夹中有自定义程序集，并且构建控制器指向该文件夹。
我已经刷新并重新启动了我的构建控制器，并且已经重新编译了自定义程序集源代码。错误仍然存​​在。
导入部分的程序集右侧还有一个红点。我可以成功地进行构建，但构建日志中没有错误。

有人能告诉我如何让这个工作吗？我对 TFSBuild 非常陌生，并对其进行评估，看看这是否可以用来帮助我们的构建过程。到目前为止，我无法让任何自定义程序集工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:21:26.530

从评论中复制答案：你不应该这样做，但一旦我这样做了，它就解决了我的问题。我将 DLL 复制到我机器上的这个文件夹中。构建服务器很好。C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies。这是搜索路径的一部分。

您是否创建了一个项目，其中包含您的构建模板 XAML 和对自定义构建程序集的引用？

这是学习使用 TFS 2010 构建自定义的绝佳资源。 [http://www.ewaldhofman.nl/post/2010/04/20/Customize-Team-Build-2010-e28093-Part-1-Introduction.aspx](http://www.ewaldhofman.nl/post/2010/04/20/Customize-Team-Build-2010-e28093-Part-1-Introduction.aspx)

这部分听起来像是与您正在尝试做的事情有关。 [http://www.ewaldhofman.nl/post/2010/05/13/Customize-Team-Build-2010-e28093-Part-5-Increase-AssemblyVersion.aspx](http://www.ewaldhofman.nl/post/2010/05/13/Customize-Team-Build-2010-e28093-Part-5-Increase-AssemblyVersion.aspx)

我希望这有帮助。TFSBuild 是非常可定制的，应该能够满足您的构建过程需求。我用它来自动化许多类型的构建和部署。

# scala - Scala：当类型参数是成员类型时，让集合的类型参数在“收集”中存活

> ID：11228802
> 
> 赞同：5
> 
> 时间：2012-06-27T14:42:32.153
> 
> 标签：scala, type-inference, type-parameter, partialfunction

通常，当收集与特定类型匹配的序列的所有元素时，生成的集合既有原始集合的类型，也有为以下选择的类型：

```
trait Foo
trait Bar

trait Baz {
  // Works
  def def1(foo: Seq[Foo]): Seq[Foo with Bar] = 
    foo collect {case foobar: Bar => foobar}
} 
```

当输入类型由有界成员类型参数化并且我想要返回的只是由绑定类型（不是成员类型）参数化的序列时，这甚至可以工作：

```
trait Baz {
  type memberType <: Foo

  // Works
  def2(foo: Seq[memberType]): Seq[Foo with Bar] =
    foo collect {case foobar: Bar => foobar}
} 
```

但是，当我实际上想要返回由成员类型参数化的序列时，这会失败：

```
trait Baz {
  type memberType <: Foo

  // Fails
  def def3(foo: Seq[memberType]): Seq[memberType with Bar] =
    foo collect {case foobar: Bar => foobar}
} 
```

错误信息：

```
error: type mismatch;
 found   : Seq[this.Foo with this.Bar]
 required: Seq[Baz.this.memberType with this.Bar]
    foo collect {case foobar: Bar => foobar} 
```

为了恢复功能，我可以在`collect`调用中包含成员类型，但这似乎是多余的，因为由于签名，每个元素都必须匹配该类型：

```
trait Baz {
  type memberType <: Foo

  // Works
  def def4(foo: Seq[memberType]): Seq[memberType with Bar] =
    foo collect {case foobar: memberType with Bar => foobar}
} 
```

有没有办法定义一系列成员类型，以便他们在`collect`编辑时记住他们的成员类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:03:31.847

这不是答案，而只是一些观察。这有效：

```
trait Baz[A <: Foo] {
  def def3(foo: Seq[A]): Seq[A] =
    foo collect {case foobar => foobar}
} 
```

但这不是：

```
trait Baz[A <: Foo] {
  def def3(foo: Seq[A]): Seq[A] =
    foo collect {case foobar: Bar => foobar}
} 
```

这也不是：

```
trait Baz[A] {
  def def3(foo: Seq[A]): Seq[A] =
    foo collect {case foobar: Bar => foobar}
} 
```

所以它似乎是模式匹配器的效果；我认为这与`collect`特别无关。一旦您将类型添加到匹配案例中，它就会以某种方式丢失信息：-/

但作为 Kaito，我实际上也很惊讶你的前两个案例*确实*有效。类型推断算法必须（并且似乎合理）在已知的稳定类型 ( `Foo`) 和类型参数或类型成员之间产生差异。您可能需要在 scala 语言邮件列表中询问，以获得一些编译器专家来回答这个问题......

# javascript - 如何在 javascript 中编码 UTF-8 字符？

> ID：11228810
> 
> 赞同：2
> 
> 时间：2012-06-27T14:42:49.490
> 
> 标签：javascript, utf-8

我在显示 mysql 数据库中的值时遇到问题。所以值在mysql数据库中保存为UTF-8（正确），我正在将JSON格式的数据检索到javascript（正确），然后当我在javascript中打印结果时，我没有看到正确的迹象，因为我正在使用克罗地亚语字母。

我把它放在了头部：

`<meta name="http-equiv" content="Content-type: text/html; charset=UTF-8"/>` 在脚本部分：

```
<script type="text/javascript" charset="utf-8"> 
```

接下来我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:14:49.210

字符编码必须在真正的 HTTP 响应`Content-Type`标头上设置，而不仅仅是在元标记上。当 HTTP 请求检索 HTML 输出时，元标记将被忽略。在 webbrowser 的开发者工具集中，您可以通过在 Chrome/IE9/Firebug 中按 F12 获得，您必须能够浏览 HTTP 响应标头，如下所示：

![在此处输入图像描述](../Images/df2fa368f512aa479762664f57e86125.png)

根据评论，您显然是在使用 PHP 为 HTTP 响应生成 HTML 输出。然后，您应该使用它的[`header()`](http://php.net/manual/en/function.header.php)功能来设置正确的响应标头。在将任何字符写入响应**之前**，将以下行添加到您的 PHP 脚本中。

```
header("Content-Type: text/html;charset=UTF-8"); 
```

### 也可以看看：

*   [PHP UTF-8 备忘单](http://developer.loftdigital.com/blog/php-utf-8-cheatsheet)

# python - 打印按值排序的字典

> ID：11228812
> 
> 赞同：27
> 
> 时间：2012-06-27T14:42:57.910
> 
> 标签：python, sorting, dictionary, loops

我基本上是在尝试遍历 dict 并从最大值到最小值打印出键/值。我一直在搜索这个网站，很多人都在使用 lambda，但我不确定它是如何工作的，所以我现在试图避免它。

```
dictIterator = iter(sorted(bigramDict.iteritems()))
for ngram, value in dictIterator:
    print("There are " + str(value) + " " + ngram) 
```

查看上面的代码，我假设它会生成一个迭代器，它按从大到小的顺序返回键/值对，但事实并非如此。

任何人都可以看到问题是什么？或另一种方法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-27T14:56:13.930

可以通过将第一个元素视为比第二个元素更重要等来利用 sort 对元组起作用的事实：

```
d = { "a":4, "c":3, "b":12 }
d_view = [ (v,k) for k,v in d.iteritems() ]
d_view.sort(reverse=True) # natively sort tuples by first element
for v,k in d_view:
    print "%s: %d" % (k,v) 
```

输出：

```
b: 12
a: 4
c: 3 
```

**编辑：**单行，生成器表达式：

```
sorted( ((v,k) for k,v in d.iteritems()), reverse=True) 
```

输出：

```
[(12, 'b'), (4, 'a'), (3, 'c')] 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-27T14:59:12.023

您可以使用 的`key`参数`sorted`按第二项排序：

```
>>> d = { "a":4, "c":3, "b":12 }
>>> from operator import itemgetter
>>> for k, v in sorted(d.items(), key=itemgetter(1)):
    print k, v

c 3
a 4
b 12
>>> 
```

**编辑：**单线，以相反的顺序：

```
>>> d = {"a": 4, "c": 3, "b": 12}
>>> [(k, v) for k, v in sorted(d.items(), key=lambda x: x[1], reverse=True)]
[('b', 12), ('a', 4), ('c', 3)]
>>> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T14:58:25.323

```
>>> d = { "a":4, "c":3, "b":12 }
>>> from operator import itemgetter
>>> lst = sorted(d.iteritems(), key=itemgetter(1))
>>> for t in lst: print '%s : %d' % (t[0], t[1])
... 
c : 3
a : 4
b : 12 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:46:50.380

```
d = { "a":4, "c":3, "b":12 }
for v in sorted( d.values() ):
    for key in d:
        if d[ key ] == v:
            print key, v
            break 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-19T08:22:44.120

这是 Python 3 的解决方案：

```
d = { "a":4, "c":3, "b":12 }
sorted(((v, k) for k, v in d.items()), reverse=True) 
```

# android - 如何为 Android 安装 Open NFC Simulator？

> ID：11228815
> 
> 赞同：4
> 
> 时间：2012-06-27T14:43:21.673
> 
> 标签：android, emulation, nfc, nfc-p2p, open-nfc

我正在按照[这些说明](http://open-nfc.org/wp/editions/android/#compilation)安装和使用适用于 Android 的 Open NFC Simulator。我找不到他们在第 2 步中谈到的 Open NFC 图像。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:13:50.307

您可以从此链接[下载它并提取 addon_open_nfc_4.4.1_android_4.0.3 文件夹。](http://sourceforge.net/projects/open-nfc/files/Open%20NFC%204.4.1%20%2813312%29/Open%20NFC%20SDK%20for%20Android%20v4.4.1%20%2813751%29.zip/download)并将其添加到您的附加文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:17:38.030

好的，联系了开发人员，他们告诉我最新版本（4.4.2）不包含编译的源代码。所以我使用了[旧版本 (4.4.1)](http://sourceforge.net/projects/open-nfc/files/Open%20NFC%204.4.1%20%2813312%29/Open%20NFC%20SDK%20for%20Android%20v4.4.1%20%2813751%29.zip/download)，其中包含目录 Open NFC SDK for Android v4.4.1 (13751)\android_sdk\OpenNFC_AddOn\MAN_NFC_1204-314 Open NFC - Android ICS 4.0.3 - SDK v0.1 中的说明

# nant - Watin 和 Nant 的例子

> ID：11228816
> 
> 赞同：0
> 
> 时间：2012-06-27T14:43:26.337
> 
> 标签：nant, watin

你能给我一个简单的 nant 构建文件示例，它从 .csproj 文件构建具有所有需要的依赖项的 watin/nunit 测试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:11:06.930

这是我最终为我的项目设计的 nant 构建文件：

```
<?xml version="1.0"?>
<project name="WatInTests" default="test">
  <include buildfile="common.properties" />
  <include buildfile="properties_watin.properties" />
  <property name="run.dir" value="${jenkins.jobs.dir}\<my_project>\workspace" />     
  <property name="currentFileset" value="${projectFileset}"/>
  <property name="precondition.test" value="${currentFileset}.Tests.PreconditionTest"/>
  <property name="results.folder" value="${results.dir}\${now.datetime}"/>  

  <target name="clean">  
   <delete verbose="true">
     <fileset basedir="${project.build.dir}">
       <include name="**\*" />
     </fileset>
   </delete>
<copy file="App.config" 
        tofile="${uitests.dir}\${currentFileset}\App.config" inputencoding="utf-8" 
        outputencoding="utf-8" overwrite="true">
            <filterchain>
                <expandproperties />
            </filterchain>
        </copy>
  </target>
  <target name="build" depends="clean">
                <echo message="Start building ${currentFileset}"/>
                <copy file="${nunit.reference}" todir="${uitests.dir}\${currentFileset}\bin\debug" failonerror="true"/>                
                <copy file="${nunit_core.reference}" todir="${uitests.dir}\${currentFileset}\bin\debug" failonerror="true"/>
                <exec program="${project.utils.msbuild.exe}" workingdir="${uitests.dir}\${currentFileset}">
                          <arg value="${ProjectSlnPath}"></arg>                                 
                          <arg value="/p:Configuration=${BuildMode}"></arg>
                </exec>
                <echo message="Build succeeded"/>
                <echo message="Copy build to ${run.dir}"/>
                <copy todir="${run.dir}" overwrite="true">
                  <fileset basedir="${watintests.dir}\${currentFileset}\bin\debug">
                       <exclude name="*.svn" />
                  </fileset>
                </copy>
   </target>

  <target name="precondition" depends="build">
     <mkdir dir="${results.folder}" />
     <exec program="${nunit.file}" failonerror="true" verbose="true" workingdir="${run.dir}">
                <arg value="/run:${precondition.test}" />
                <arg value="${run.dir}\${nunit.config.file}" />
     </exec>     
  </target>
  <target name="test" depends="precondition">
     <exec program="${nunit.file}" verbose="true" workingdir="${run.dir}"> 
                <arg value="/exclude:Precondition" />               
                <arg value="${run.dir}\${nunit.config.file}" />
     </exec>
     <copy file="${run.dir}\TestResult.xml" todir="${results.folder}" failonerror="true"/>
</target>
</project> 
```

# firefox - 背景图像在 Mozilla Firefox 中不起作用

> ID：11228817
> 
> 赞同：0
> 
> 时间：2012-06-27T14:43:26.643
> 
> 标签：firefox, css

正文背景未在 Firefox 中显示。

这是我的 CSS

```
body{
    font-family:"Trebuchet MS", Helvetica, sans-serif;
    font-size:15px;
    color: #fff;
    overflow-x:hidden;
    background: url(../images/2.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover; 
    -o-background-size: cover;
    background-size: cover; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T15:01:30.870

通常当我遇到这个问题时，错误来自图像的路径。如果我是你，我会尝试将其从相对路径 url('../images/yourimage.jpg') 更改为绝对路径：例如。url('home/user/Desktop/website/images/yourimage.jpg')。

如果您的站点链接到包含图像的文件夹（它应该），则不需要这样做。您只需要 url('image/yourimage.jpg'); 因为您的站点已经从该文件夹中提取文件

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-12T13:45:28.757

我过去遇到过这个问题.....除非您在媒体查询中将显示属性设置为“阻止”，否则您的背景图像将无法在 Firefox 和 Internet Explorer 中使用。

例如：

```
@media only screen and (max-width:740px) {
  table.Class {
    background:url('images/divider_small.png') no-repeat 10px 0; 
    width:430px;
    height:22px; 
    display:block;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T06:05:24.227

我有同样的问题问题是文件路径，我有“url（'/images/yourimage.jpg'）”，它在chrome中加载但没有在ie和firefox中加载，所以我改为url（'../images/ yourimage.jpg') 并且它起作用了

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T14:48:00.533

我注意到您的图片的 URL 周围没有“”。在 W3C 学校，它说你应该：

例如：

```
background-image:url('yourImage.png'); 
```

请看这里：

[http://www.w3schools.com/css/tryit.asp?filename=trycss_background-image](http://www.w3schools.com/css/tryit.asp?filename=trycss_background-image)

# .net - 在 VB.NET 的 List(Of String) 中查找重复项

> ID：11228818
> 
> 赞同：4
> 
> 时间：2012-06-27T14:43:28.657
> 
> 标签：.net, vb.net, list

我有一个`customers`列表（字符串），我试图在其上找到重复的客户。

```
If Not customers.Count = customers.Distinct.ToList.Count Then
     customers = customers.Except(customers.Distinct.ToList)
End If 
```

但我得到以下异常：

> ```
> InvalidCastException
> Unable to cast object of type '<ExceptIterator>d__99`1[System.String]' to type 
> ```
> 
> 'System.Collections.Generic.List`1[System.String]'。

这是在列表中查找重复项的正确方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T14:45:59.187

```
customers = customers.GroupBy(Function(m) m) _
                 .Where(Function(g) g.Count() > 1) _
                 .Select(Function(g) g.Key).ToList 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-27T14:59:55.180

VB版本：

```
Dim duplicates = listOfItems.GroupBy(Function(i) i)_
                            .Where(Function(g) g.Count() > 1)_
                            .[Select](Function(g) g.Key) 
```

C＃：

```
var duplicates = customers.GroupBy(x => x)
                          .Where(g => g.Count() > 1)
                          .Select(g => g.Key); 
```

# gridview - 需要在 IE8+ 中工作的 GridView 中冻结列的解决方案

> ID：11228819
> 
> 赞同：0
> 
> 时间：2012-06-27T14:43:30.677
> 
> 标签：gridview

我一直在寻找太久才能找到解决 GridView 中列冻结的解决方案。我找到了很多答案，但几乎所有答案都需要 CSS 表达式，这在 IE8 中已被淘汰。这个问题有解决方案吗？

所以，为了清楚起见，我有一个现有的网格，我的任务是添加这个新功能。我需要能够动态冻结前几列（如在 Excel 中）。显然，列标题需要同时被冻结。除了 IE8+ 之外，它不需要任何支持。

在较旧的 DataGridView 中，有一个 column 属性允许您执行此操作：

```
this.dataGridView1.Columns["AddToCartButton"].Frozen = true; 
```

不幸的是，这似乎已从 GridView 中删除。公平地说，我在管子上发现了它，但我从未真正使用过它，所以不知道它是否有效或如何工作。

是否有替代方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:52:37.460

每个`DataGridViewColumn`、`DataGridViewRow`和`DataGridViewCell`都有一个`ReadOnly`可以设置为的属性`true`。一个好的做法是将列（或行或单元格）`InheritedStyle.BackColor`设置为`System.Drawing.Color.LightGray`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:47:21.673

我写的jQuery插件可以固定标题和冻结列，它可以应用于GridView。看图片： ![在此处输入图像描述](../Images/e6f769aebbb9334a926c04e034ba2a63.png)

在网站上查看更多信息：http: [//gridviewscroll.aspcity.idv.tw/](http://gridviewscroll.aspcity.idv.tw/)

支持的浏览器

*   Internet Explorer 7、8（IE 9 兼容性）
*   Internet Explorer 9 (9.0.8112)
*   Windows 7 预览版上的 Internet Explorer 10
*   谷歌浏览器(23.0.1271.64 m)
*   火狐 (16.0.2)
*   苹果 Safari (5.1.7)

# android - PopupWindow 中的 Horizo ntalScrollView

> ID：11228823
> 
> 赞同：1
> 
> 时间：2012-06-27T14:43:40.717
> 
> 标签：android, popupwindow, horizontalscrollview

我尝试使用 preView 创建弹出窗口，用户可以在其中查看图库中的图像。但是第一张和第二张图片被隐藏了，并且在 scrollView 的末尾是空白区域，就像在屏幕截图中一样。

![在此处输入图像描述](../Images/621d112eb7c9c6b30f2bb915230cb3f4.png)

我尝试使用
layout.addView(imageView);

```
private void showAttachmentPopup() {
    LayoutInflater layoutInflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View popupView = layoutInflater.inflate(R.layout.attachemnts_file_popup, null, false);
    PopupWindow pw = new PopupWindow(popupView, LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, true);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    params.addRule(RelativeLayout.BELOW, findViewById(R.id.layout_sent).getId());
    popupView.setLayoutParams(params);
    LinearLayout layout_attachment = (LinearLayout) popupView.findViewById(R.id.layout_attachment);
        RoundedImageView roundedImageView = new RoundedImageView(this);
        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT, Gravity.CENTER);
        lp.setMargins(5, 5, 5, 5);
        roundedImageView.setLayoutParams(lp);
        roundedImageView.setScaleType(RoundedImageView.ScaleType.FIT_XY);
        roundedImageView.setImageBitmap(bitmap);
        layout_attachment.addView(roundedImageView);

    pw.setOutsideTouchable(true);
    pw.setBackgroundDrawable(new BitmapDrawable());
    pw.showAtLocation(mBtnAttach, Gravity.BOTTOM | Gravity.LEFT, locateView(mBtnAttach).bottom, locateView(mBtnAttach).right);
} 
```

如果我尝试添加此位图几次，则会发生此错误。在我的 xml 中只是将 Horizo​​ntalScrollView 和 LinearLayout 放到这里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:41:06.337

我（猜想）我有同样的问题，看起来一样。

帮助我的是设置adjustViewBounds：

```
roundedImageView.setAdjustViewBounds(true); 
```

希望它适合你的情况！

# ruby - Ruby 和 Mongo - 如何查询集合

> ID：11228825
> 
> 赞同：0
> 
> 时间：2012-06-27T14:43:44.833
> 
> 标签：ruby, mongodb

我有一个这样的数据库连接：

```
db = Mongo::Connection.new.db("app-development") 
```

但是当我尝试查询这样的集合时：

```
@users = User.all.limit(50) 
```

我收到了这个错误：

```
NoMethodError (undefined method `users' for #<Mongo::DB:0x10ed5f3b8>): 
```

我的收藏称为用户。获取这些数据的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:13:14.463

你确定你有正确的用户案例吗？是“用户”还是“用户”？

你可以试试：

```
@users = users.find("").limit(1); 
```

这是我用来学习的资源... [http://api.mongodb.org/ruby/current/file.TUTORIAL.html](http://api.mongodb.org/ruby/current/file.TUTORIAL.html)

吉姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T01:43:59.280

解决方案是这样的：

```
db = Mongo::Connection.new.db("app-development") 
```

变成

```
db = Mongo::Connection.new.db("app-development").collection("your_collection") 
```

然后，您将以您想象的方式对数据库进行操作。

# objective-c - performSelector:withObject: 及其保留行为

> ID：11228826
> 
> 赞同：11
> 
> 时间：2012-06-27T14:43:45.850
> 
> 标签：objective-c, memory-management, retain, nsobject, performselector

这是 SO 中已经回答的问题，但**我在 Apple 文档中的任何地方都找不到它**。你能指出我正确的方向吗？

在以下主题中

[在将对象传递给 -performSelector:withObject:afterDelay: 之前是否必须保留它？](https://stackoverflow.com/questions/1240308/do-i-have-to-retain-an-object-before-passing-it-to-performselectorwithobjecta)

[performSelector:withObject:afterDelay:inModes 对保留计数的影响](https://stackoverflow.com/questions/4414699/the-effect-on-retain-count-of-performselectorwithobjectafterdelayinmodes)

[调用 performSelector:withObject:afterDelay 的对象是否被 NSRunLoop 保留？](https://stackoverflow.com/questions/10928118/is-object-that-calls-performselectorwithobjectafterdelay-get-retained-by-the-n)

默认行为似乎如下：**它保留接收者和参数**。

我正在使用以下代码

```
[[self delegate] performSelector:@selector(tryToSendStoreData:) withObject:userData]; 
```

`userData`自动释放的对象在哪里。

记录保留计数（**我知道这样做可能无效**）传入的数据会增加其保留计数。在委托上调用该方法时，保留计数不等于 1。

所以，我的问题是：我需要执行一些内存管理以避免泄漏还是我必须信任 Apple 的东西？在这里，我以不可知论者的身份发言，因为我找不到合适的文档。

先感谢您。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T17:56:16.683

您正在查看文档中的错误功能。

**保持**

`performSelector:withObject:afterDelay:`和类似的函数（**with** `afterDelay`）保留接收者和参数，因为稍后执行

**无保留**

`performSelector:withObject:`和类似的函数（**没有** `afterDelay`）不保留任何东西，因为它们只是直接调用函数。

```
[[self delegate] performSelector:@selector(tryToSendStoreData:) withObject:userData]; 
```

做同样的事情

```
[[self delegate] tryToSendStoreData:userData]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-19T07:53:36.403

虽然@newacct 给出了正确的答案，但这不是@Flex_Addicted 提出的问题，即来自Apple 文档的引用表明观察到的行为确实得到保证。以下是（部分）引用，但我们必须经过几个圈才能到达那里 -

[performSelector:withObject:afterDelay:](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)的文档指出

> 此方法设置一个计时器以在当前线程的运行循环上执行 aSelector 消息。

所以接下来我们转到文档，`NSRunLoop`我们发现只有一种方法存在允许在运行循环中排队的能力 -
[performSelector:target:argument:order:modes:](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/Reference/Reference.html "performSelector:target:argument:order:modes:")，其文档指出

> 此方法设置一个计时器，以便在下一次运行循环迭代开始时在当前线程的运行循环上执行 aSelector 消息。计时器被配置为在模式参数指定的模式下运行...**接收器保留目标和参数对象，直到选择器的计时器触发，然后将它们作为其清理的一部分释放。**

当然，没有什么可以保证`[NSObject performSelector:withObject:afterDelay:]`总是使用`[NSRunLoop performSelector:target:argument:order:modes:]`（尽管如果有人可以为此提供文档，这个答案将是完整的），但至少这是朝着回答圣经谜语之谜迈出的一步。

# jquery - 如何防止使用jquery选择复选框

> ID：11228828
> 
> 赞同：0
> 
> 时间：2012-06-27T14:43:48.007
> 
> 标签：jquery

我正在向用户显示一个带有几个复选框的表单。其中一些将被预先选择，而另一些则不会。

如下所示：

```
<input type="checkbox" name="box" value="9"> nine
<input type="checkbox" name="box" value="10"> ten
<input type="checkbox" name="box" value="11"> eleven
<input type="checkbox" name="box" value="12" checked> twelve 
```

请注意，在最后一个复选框中，`checked`关键字是使用脚本添加的。

现在，即使我在物理上取消选择 check `twelve`，我的 javascript 代码也不明白该复选框不再被选中。

*更新* 我之前粘贴了错误的链接。这是更新的 jsfiddle 链接：http: [//jsfiddle.net/JLSUK/20/](http://jsfiddle.net/JLSUK/20/)

我要完成的工作仅在用户选择了 checkbox 时才提醒用户 `twelve`。但是，即使未选中该复选框，我也会收到已选中的警报。我认为这是因为我有`checked`实际的 HTML 内容，但是，自从第一次加载页面以来，我无法删除它，我必须向用户展示他们选择了这个特定的复选框。

这对 jQuery 可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:47:43.370

您正在向数组中添加元素，但您永远不会删除它们。所以每次用户点击“更新”时，你只是在填充你的数组。在某些时候，您需要清除数组，或者从中删除先前的选择（取决于您的确切逻辑）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T14:48:58.597

在你的 jsfiddle 你有：

```
$('#update').click(function () { 
```

而你的`input`是：

```
<input type="submit" id="something" value="update" /> 
```

尝试将您的 jquery 更改为：

```
$('#something').click(function () { 
```

jQuery 中的`#*`选择器指的是`id`，而不是`value`.

* * *

你还有：

```
if (jQuery.inArray('8', selected) >= 0 && jQuery.inArray('11', selected) >=0) 
```

您的复选框都没有值，`8`因此这永远不会是“真”。

* * *

还将数组声明为新数组：

```
var selected = new Array(); 
```

* * *

[**查看工作演示**](http://jsfiddle.net/Curt/JLSUK/10/)

选择“八”和“十一”，您的弹出窗口将出现

* * *

**编辑：**看到问题编辑后，您需要添加以下行以清除先前的数组项：

```
var selected = []; 
```

[http://jsfiddle.net/JLSUK/20/](http://jsfiddle.net/JLSUK/20/)

# ruby - Ruby 每个，不同的动作取决于索引，有一个模式？

> ID：11228829
> 
> 赞同：6
> 
> 时间：2012-06-27T14:43:48.193
> 
> 标签：ruby, erb

好的，所以我的标题可能会令人困惑。我想要做的是循环遍历一组模型，对于前两个，渲染一个模板，接下来的四个渲染一个不同的模板，接下来的两个渲染与第一个相同的模板，依此类推。

像这样：

```
 <% ads.each do |ad| %>
    <% # if it's 1-2, 7-8, 13-14 and so on render as big' %>
      <%= render 'front/home/big_ad', ad: ad %>
    <% # if it's 3-6, 9-12, 15-18 and so on render as small' %>
      <%= render 'front/home/small_ad', ad: ad %>
    <% end %>
  <% end %> 
```

实现此目的最干净的方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T14:48:20.527

如果您的组甚至更长，那么您可以使用`in_groups_of`命令，并在它们之间交替，但使用这些规范，最简单的方法是：

```
<% ads.each_with_index do |ad, index| %>
  <% if (index % 6 < 2) %>
    <%= render 'front/home/big_ad', ad: ad %>
  <% else %>
    <%= render 'front/home/small_ad', ad: ad %>
  <% end %>
<% end %> 
```

# python - Windows 上 Python 2.7 的 Python caldav 安装失败

> ID：11228834
> 
> 赞同：-1
> 
> 时间：2012-06-27T14:44:02.250
> 
> 标签：python, lxml, caldav

尝试使用 easy_install 为 Python 2.7 安装 caldav。lxml 失败了，我找到了它的二进制安装程序，适用于除 2.7 之外的所有 Python 版本。

使用 easy_install 我得到以下信息：

```
Running lxml-2.3.4\setup.py -q bdist_egg --dist-dir c:\users\jimste~1\appdata\lo
cal\temp\easy_install-vhvbst\lxml-2.3.4\egg-dist-tmp-qs4ol2
Building lxml version 2.3.4.
Building without Cython.
ERROR: 'xslt-config' is not recognized as an internal or external command,
operable program or batch file.

** make sure the development packages of libxml2 and libxslt are installed **

Using build configuration of libxslt
warning: no files found matching 'lxml.etree.c' under directory 'src\lxml'
warning: no files found matching 'lxml.objectify.c' under directory 'src\lxml'
warning: no files found matching 'lxml.etree.h' under directory 'src\lxml'
warning: no files found matching 'lxml.etree_api.h' under directory 'src\lxml'
warning: no files found matching 'etree_defs.h' under directory 'src\lxml'
warning: no files found matching 'pubkey.asc' under directory 'doc'
warning: no files found matching 'tagpython*.png' under directory 'doc'
warning: no files found matching 'Makefile' under directory 'doc'
error: Setup script exited with error: Unable to find vcvarsall.bat 
```

lxml 如果失败。知道如何在 Windows 上为 Python 2.7 安装它吗？

谢谢-吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:45:55.990

我今天找到了这个问题的答案。Python 2.7 的 lxml 的 Windows 二进制安装位于此处： [http ://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml](http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml)

# view - 在 XPages 视图数据源中按列排序

> ID：11228835
> 
> 赞同：0
> 
> 时间：2012-06-27T14:44:04.773
> 
> 标签：view, xpages

我有一个动态视图控件（我自己的），它由可配置的视图数据源提供。我需要能够按各种列对视图进行排序。有没有办法使用视图数据源来做到这一点，还是我需要自己动手？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:11:47.270

出于效率原因，排序应由 domino 运行时处理。视图必须有正确的列标记为已排序或可按用户排序。这会在 NSF 中创建索引。然后，数据源有一些属性可以根据您要排序的列的名称来控制正在使用的排序索引。extlib DataView 控件显示了如何通过 JSF DataModel 在 Java 中完成此操作。此外，您可能会考虑使用 extlib/up1 中的 DynamicViewpanel，因为它会为您完成所有这些工作。

# hash - 为短代码选择校验和以防止输入错误

> ID：11228836
> 
> 赞同：5
> 
> 时间：2012-06-27T14:44:06.380
> 
> 标签：hash, checksum

我需要选择一个校验和算法来检测用户何时通过在代码末尾添加 1 个字符（也在 [A-Z0-9] 中）输入错误的 4 个字符 [A-Z0-9] 代码。

对 ASCII 代码求和并应用模数是一个糟糕的解决方案，因为不会注意到反转 2 个击键。

我可能会使用 Fletcher 算法，但我想知道是否有人知道为此用例设计的算法（非常少量的字节，取决于位置）？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T12:26:06.617

您可以尝试 ISO 7064 Mod x,y 算法。根据 ISO 描述：

ISO/IEC 7064:2002 中指定的校验字符系统可以检测 ( [http://www.iso.org/iso/home/store/catalogue_ics/catalogue_detail_ics.htm?csnumber=31531](http://www.iso.org/iso/home/store/catalogue_ics/catalogue_detail_ics.htm?csnumber=31531) )：

*   所有单个替换错误（将单个字符替换为另一个字符，例如 4234 替换为 1234）；
*   所有或几乎所有单个（本地）转置错误（两个单个字符的转置，相邻或它们之间有一个字符，例如 12354 或 12543 用于 12345）；
*   全部或几乎全部移位错误（整个字符串向左或向右移位）；
*   高比例的双重替换错误（同一字符串中有两个单独的单一替换错误，例如 7234587 对应 1234567）；
*   所有其他错误的比例很高。

您可以找到一些部分实现，例如：

*   [http://code.google.com/p/checkdigits/wiki/CheckDigitSystems](http://code.google.com/p/checkdigits/wiki/CheckDigitSystems)（包括几种校验和算法的 Java 和 Javascript 实现）。
*   [http://www.codeproject.com/Articles/16540/Error-Detection-Based-on-Check-Digit-Schemes](http://www.codeproject.com/Articles/16540/Error-Detection-Based-on-Check-Digit-Schemes)（解释并包括 VC 实现）。

例如，您可以使用 ISO 7064 Mod 37,36，它可以使用 0-9 和 AZ（数据和校验字符）。算法的详细描述（如果您不想购买 ISO）可以在以下位置找到：

*   [http://www.cdfa.ca.gov/ahfss/animal_health/pdfs/NAIS/Program_Standard_and_Technical_Reference10-07.pdf](http://www.cdfa.ca.gov/ahfss/animal_health/pdfs/NAIS/Program_Standard_and_Technical_Reference10-07.pdf)（用于动物识别）
*   [http://www.ifpi.org/content/library/GRid_Standard_v2_1.pdf](http://www.ifpi.org/content/library/GRid_Standard_v2_1.pdf)（也被音乐行业使用）
*   [http://www.ddex.net/sites/default/files/DDEX-DPID-10-2006.pdf](http://www.ddex.net/sites/default/files/DDEX-DPID-10-2006.pdf)（其他媒体公司）

# java - 如何取消代理休眠对象

> ID：11228838
> 
> 赞同：8
> 
> 时间：2012-06-27T14:44:14.883
> 
> 标签：java, hibernate

如何取消代理休眠对象，以便支持多态性？

考虑以下示例。A 类和 B 类是两个休眠实体。B有两个亚型C和D。

```
List<A> resultSet = executeSomeHibernateQuery();
for(A nextA : resultSet) {
    for(B nextB : nextA.getBAssociations() {
        if(nextB instanceof C) {
            // do something for C
        } else if (nextB instanceof D) {
            // do something for D
        }
    }
} 
```

此代码无法执行 C 或 D 块，因为 B 集合已被延迟加载，并且 B 的所有实例都是 Hibernate 代理。我想要一种取消代理每个实例的方法。

注意：我意识到可以优化查询以急切地获取所有 B。我正在寻找替代方案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T14:46:04.693

这是我们的解决方案，添加到我们的持久性实用程序中：

```
public T unproxy(T proxied)
{
    T entity = proxied;
    if (entity instanceof HibernateProxy) {
        Hibernate.initialize(entity);
        entity = (T) ((HibernateProxy) entity)
                  .getHibernateLazyInitializer()
                  .getImplementation();
    }
    return entity;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-03-07T13:27:59.100

现在 Hibernate 有专门的方法：[org.hibernate.Hibernate#unproxy(java.lang.Object)](https://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/Hibernate.html#unproxy-java.lang.Object-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T19:08:57.663

使用 HibernateProxy 和 getImplementationMethod 的解决方案是正确的。

但是，我假设您遇到了这个问题，因为您的集合被定义为一个接口，并且 hibernate 正在向该接口提供代理。

这导致了设计问题，为什么有“if”和“instanceof”而不是使用接口方法来做你需要的事情。

所以你的循环变成：

```
for(B nextB : nextA.getBAssociations() {
    nextB.doSomething();
} 
```

这样，hibernate 会将对“doSomething()”的调用委托给实际的实现对象，而您永远不会知道其中的区别。

# javascript - 在 Jquery 上解析 JSON

> ID：11228839
> 
> 赞同：2
> 
> 时间：2012-06-27T14:44:16.947
> 
> 标签：javascript, jquery

嗨，我有这段代码来解析 JQUERY 上的 JSON

```
var json_text2 = $.parseJSON('{"data":[["1340650436","2.00000"],["1340736844","4.00000"]],"label":"Waist Size (cm)"},{"data":[["1340736861","3.40000"],["1340650514","4.00000"]],"label":"Arm Size (Inch)","yaxis":"2"}'); 
```

但是我在 Firebug 上遇到了这个错误

```
JSON.parse: unexpected non-whitespace character after JSON data 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T14:50:00.043

有效的 JSON 字符串必须是单个对象或对象数组。将您的对象包装在数组括号中`[]`：

```
var json_text2 = $.parseJSON('[{"data":[["1340650436","2.00000"],["1340736844","4.00000"]],"label":"Waist Size (cm)"},{"data":[["1340736861","3.40000"],["1340650514","4.00000"]],"label":"Arm Size (Inch)","yaxis":"2"}]'); 
```

# javascript - Highcharts.js，如何放大一个图表以调整另一个图表的大小，就像 Stackoverflow 所做的那样？

> ID：11228847
> 
> 赞同：2
> 
> 时间：2012-06-27T14:44:43.077
> 
> 标签：javascript, svg, highcharts

我想复制 StackOverflow 如何建立他们的[声誉柱形图](https://stackoverflow.com/users/702275/tim-peterson?tab=reputation)。

具体来说，我对放大底部图表以调整顶部图表大小的行为感兴趣。我想知道 Highcharts.js 中是否有一个选项，或者这是否是 SO 制作的自制扩展。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:36:34.097

它看起来很像这个演示，除了这是一个折线图而不是柱形图：[http ://www.highcharts.com/demo/dynamic-master-detail](http://www.highcharts.com/demo/dynamic-master-detail)

也可用于在 jsfiddle 上进行测试：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/dynamic-master-detail/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/dynamic-master-detail/)

这是 Stackoverflow 的实际代码的 jsfiddle，它已最小化，但您明白了：http: [//jsfiddle.net/abex2/1/](http://jsfiddle.net/abex2/1/)

# mysql - InnoDB 全文搜索（无 lucene）

> ID：11228852
> 
> 赞同：2
> 
> 时间：2012-06-27T14:44:49.327
> 
> 标签：mysql, full-text-search

我有个问题。我有一个运行 MySQL 5.1.x 的托管 VPS 服务器。我目前正在构建一个新的数据库，我想在其中存储推文（通过搜索、流、时间线等）。所以我想使用 InnoDB 数据库引擎，因为行锁定！但不幸的是，MySQL 5.1 不支持 InnoDB 表中的全文搜索。

问题是我不能自己更新我的服务器。所以我无法安装 MySQL 5.6（应该支持全文搜索），也无法安装 lucene（或 solr 或其他）。

是否有其他选项可以在 MySQL 或其他方式中实现全文搜索。或者也许在 PostgreSQL 中（以前从未使用过）

到目前为止，我唯一的其他选择是使用非托管 VPS，但我不喜欢这样 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:22:29.183

您可以查看[MyISAM](http://dev.mysql.com/doc/refman/5.0/en/myisam-storage-engine.html)引擎，但它不是事务性的。

另一种可能的解决方案是使用引擎[MyISAM](http://dev.mysql.com/doc/refman/5.0/en/myisam-storage-engine.html)或 ARIA 创建另一个表，并在新表和“存储推文”表之间创建关系，因此在插入“新表”之前，请确保“存储推文”未锁定。

# x86 - x86 SIMD 内部函数的头文件

> ID：11228855
> 
> 赞同：153
> 
> 时间：2012-06-27T14:44:54.400
> 
> 标签：x86, header-files, sse, simd, intrinsics

哪些头文件为不同的 x86 SIMD 指令集扩展（MMX、SSE、AVX...）提供了内在函数？在网上似乎不可能找到这样的清单。如我错了请纠正我。

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2012-06-27T14:45:09.623

这些天你通常应该只包括`<immintrin.h>`. 它包括一切。

GCC 和 clang 将阻止您使用内在函数来执行您在编译时未启用的指令（例如，使用`-march=native`or`-mavx2 -mbmi2 -mpopcnt -mfma -mcx16 -mtune=znver1`或其他）。

MSVC 和 ICC 将允许您在编译时不启用任何内容的情况下使用内部函数，但您仍应*在*使用 AVX 内部函数之前启用 AVX。

* * *

从历史上看（在`immintrin.h`引入所有内容之前），您必须手动包含您想要的最高级别内在函数的标题。

这对于 MSVC 和 ICC 可能仍然有用，可以阻止自己使用您不需要的指令集。

```
<mmintrin.h>  MMX
<xmmintrin.h> SSE
<emmintrin.h> SSE2
<pmmintrin.h> SSE3
<tmmintrin.h> SSSE3
<smmintrin.h> SSE4.1
<nmmintrin.h> SSE4.2
<ammintrin.h> SSE4A
<wmmintrin.h> AES
<immintrin.h> AVX, AVX2, FMA 
```

包括其中一个拉入所有以前的拉（除了仅 AMD 的 SSE4A：`immintrin.h`不拉入）

一些编译器也有`<zmmintrin.h>`AVX512。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-06-27T15:59:30.743

在 GCC/clang 上，如果你只使用

```
#include <x86intrin.h> 
```

它将包括根据编译器开关启用的所有 SSE/AVX 标头，`-march=haswell`例如`-march=native`. 此外，一些 x86 特定指令类似于`bswap`或`ror`可用作内在函数。

* * *

此标头的 MSVC 等效项`<intrin.h>`

* * *

**如果您只想要便携式 SIMD，请使用`#include <immintrin.h>`**

MSVC、ICC 和 gcc/clang（以及我认为的其他编译器，如 Sun）都支持英特尔唯一的内部函数查找器/搜索工具记录的 SIMD 内部函数的此标头：[https ://software.intel.com/sites/landingpage/IntrinsicsGuide /](https://software.intel.com/sites/landingpage/IntrinsicsGuide/)

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2014-03-10T03:22:49.467

标头名称取决于您的编译器和目标体系结构。

*   对于 Microsoft C++（面向 x86、x86-64 或 ARM）和适用于 Windows 的 Intel C/C++ 编译器`intrin.h`
*   对于针对 x86/x86-64 的 gcc/clang/icc 使用`x86intrin.h`
*   对于使用 NEON 以 ARM 为目标的 gcc/clang/armcc`arm_neon.h`
*   对于 gcc/clang/armcc，使用 WMMX 以 ARM 为目标`mmintrin.h`
*   对于带有 VMX（又名 Altivec）和/或 VSX 的针对 PowerPC 的 gcc/clang/xlcc 使用`altivec.h`
*   对于使用 SPE 的 gcc/clang 目标 PowerPC`spe.h`

您可以使用条件预处理指令处理所有这些情况：

```
#if defined(_MSC_VER)
     /* Microsoft C/C++-compatible compiler */
     #include <intrin.h>
#elif defined(__GNUC__) && (defined(__x86_64__) || defined(__i386__))
     /* GCC-compatible compiler, targeting x86/x86-64 */
     #include <x86intrin.h>
#elif defined(__GNUC__) && defined(__ARM_NEON__)
     /* GCC-compatible compiler, targeting ARM with NEON */
     #include <arm_neon.h>
#elif defined(__GNUC__) && defined(__IWMMXT__)
     /* GCC-compatible compiler, targeting ARM with WMMX */
     #include <mmintrin.h>
#elif (defined(__GNUC__) || defined(__xlC__)) && (defined(__VEC__) || defined(__ALTIVEC__))
     /* XLC or GCC-compatible compiler, targeting PowerPC with VMX/VSX */
     #include <altivec.h>
#elif defined(__GNUC__) && defined(__SPE__)
     /* GCC-compatible compiler, targeting PowerPC with SPE */
     #include <spe.h>
#endif 
```

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2015-07-02T13:23:37.730

从这个[页面](http://www.g-truc.net/post-0359.html)

```
+----------------+------------------------------------------------------------------------------------------+
|     Header     |                                         Purpose                                          |
+----------------+------------------------------------------------------------------------------------------+
| x86intrin.h    | Everything, including non-vector x86 instructions like _rdtsc().                         |
| mmintrin.h     | MMX (Pentium MMX!)                                                                       |
| mm3dnow.h      | 3dnow! (K6-2) (deprecated)                                                               |
| xmmintrin.h    | SSE + MMX (Pentium 3, Athlon XP)                                                         |
| emmintrin.h    | SSE2 + SSE + MMX (Pentium 4, Athlon 64)                                                  |
| pmmintrin.h    | SSE3 + SSE2 + SSE + MMX (Pentium 4 Prescott, Athlon 64 San Diego)                        |
| tmmintrin.h    | SSSE3 + SSE3 + SSE2 + SSE + MMX (Core 2, Bulldozer)                                      |
| popcntintrin.h | POPCNT (Nehalem (Core i7), Phenom)                                                       |
| ammintrin.h    | SSE4A + SSE3 + SSE2 + SSE + MMX (AMD-only, starting with Phenom)                         |
| smmintrin.h    | SSE4_1 + SSSE3 + SSE3 + SSE2 + SSE + MMX (Penryn, Bulldozer)                             |
| nmmintrin.h    | SSE4_2 + SSE4_1 + SSSE3 + SSE3 + SSE2 + SSE + MMX (Nehalem (aka Core i7), Bulldozer)     |
| wmmintrin.h    | AES (Core i7 Westmere, Bulldozer)                                                        |
| immintrin.h    | AVX, AVX2, AVX512, all SSE+MMX (except SSE4A and XOP), popcnt, BMI/BMI2, FMA             |
+----------------+------------------------------------------------------------------------------------------+ 
```

因此，一般而言，您可以仅包含`immintrin.h`以获取所有 Intel 扩展，或者`x86intrin.h`如果您想要包括`_bit_scan_forward`and在内的所有内容，`_rdtsc`以及所有矢量内在函数都包括仅 AMD 的。如果您反对包含更多您实际需要的内容，那么您可以通过查看表格来选择正确的包含。

`x86intrin.h`是获得[AMD XOP 内在函数的推荐方法（仅限推土机，甚至未来的 AMD CPU）](https://en.wikipedia.org/wiki/XOP_instruction_set)，而不是拥有自己的标头。

`_mm_fmadd_ps`如果您对未启用的指令集使用内部函数（例如，即使您包含`immintrin.h`并启用了 AVX2 ，也未启用 fma），某些编译器仍会生成错误消息。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2017-02-27T19:11:16.963

**20200914：**最新的最佳实践：（**`<immintrin.h>`**也受**MSVC**支持）

我将把剩下的答案留作历史用途；它可能对较旧的编译器/平台组合有用......

* * *

正如许多答案和评论所述，`<x86intrin.h>`是x86[-64] SIMD 内在函数**的**综合标头。它还为其他 ISA 扩展提供内在函数支持指令。`gcc`, `clang`, 并且`icc`都解决了这个问题。我需要对支持标头的版本进行一些挖掘，并认为列出一些发现可能很有用......

*   **gcc** : 支持`x86intrin.h`first 出现在`gcc-4.5.0`. `gcc-4`发布系列不再维护，`gcc-6.x`而是*当前*稳定的发布系列。`gcc-5`还介绍了所有版本中`__has_include`存在的扩展。处于预发布（回归测试等）并遵循当前版本控制方案，将发布为.`clang-3.x``gcc-7``gcc-7.1.0`

*   **clang**：`x86intrin.h`似乎所有`clang-3.x`版本都支持。最新的稳定版本是`clang (LLVM) 3.9.1`. 开发分支是`clang (LLVM) 5.0.0`. 目前尚不清楚该`4.x`系列发生了什么。

*   **Apple clang**：令人讨厌的是，Apple 的版本控制与项目的版本不对应`LLVM`。也就是说，当前版本: `clang-800.0.42.1`, 基于`LLVM 3.9.0`. 第一个`LLVM 3.0`基于版本似乎`Apple clang 2.1`又回到了`Xcode 4.1`. `LLVM 3.1`首先出现在`Apple clang 3.1`（数字巧合）中`Xcode 4.3.3`。

    Apple 还定义了`__apple_build_version__`例如`8000042`. 这似乎是可用的最稳定、严格递增的版本控制方案。如果您不想支持旧版编译器，请将这些值之一设为最低要求。

因此，任何最新版本（`clang`包括 Apple 版本）都应该与`x86intrin.h`. 当然，除了`gcc-5`，您始终可以使用以下内容：

```
#if defined (__has_include) && (__has_include(<x86intrin.h>))
#include <x86intrin.h>
#else
#error "upgrade your compiler. it's free..."
#endif 
```

您不能真正依赖的一个技巧是`__GNUC__`使用`clang`. 由于历史原因，版本控制一直停留在`4.2.1`. `x86intrin.h`标题之前的版本。它有时对保持向后兼容的简单 GNU C 扩展很有用。

*   **icc**：据我所知，`x86intrin.h`至少从 Intel C++ 16.0 开始就支持标头。版本测试可以通过以下方式执行：`#if (__INTEL_COMPILER >= 1600)`。此版本（可能还有更早的版本）还提供对`__has_include`扩展的支持。

*   **MSVC**：这似乎`MSVC++ 12.0 (Visual Studio 2013)`是第一个提供`intrin.h`标头的版本 -*不是* `x86intrin.h`......这表明：`#if (_MSC_VER >= 1800)`作为版本测试。当然，如果您尝试编写可在所有这些不同编译器之间移植的代码，那么此平台上的标头名称将是您遇到的最少问题。

# c# - WPF MVVM 中实体框架的免费数据库

> ID：11228856
> 
> 赞同：0
> 
> 时间：2012-06-27T14:44:55.950
> 
> 标签：c#, wpf, database, entity-framework, mvvm

我想使用免费数据库在我的 WPF 应用程序（PixelSense）中进行一些数据绑定（存储）。

我已经将 SQL Server 2010 与 Visual Studio 2010 一起使用，它工作得非常好。

我还听说，由于某些不兼容问题，Entity Framework 不能很好地与 MySQL 配合使用，而且 SQLite 不支持布尔值。

在这种情况下你对我有什么建议？

`Edit`

谢谢，我选择了**Microsoft SQL Server 2008 R2 Express**

为什么 : `Free`, by `Microsoft`, 几乎一样`SQL Server`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T14:46:49.310

在微软世界中，您可以使用：

*   [Sql 服务器快递](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)
    *   每个 DB 大小限制 10Gb
*   [Sql Local DB](http://msdn.microsoft.com/en-us/library/hh510202.aspx)，它是 Sql Server 用户实例的替代品。它是 Sql Server Express 的一部分。
    *   每个 DB 大小限制 10Gb
*   [Sql 紧凑型](http://msdn.microsoft.com/library/cc645984.aspx)
    *   每个数据库大小限制为 4Gb

由于它是 Microsoft 产品，因此您出现问题的可能性较小。

我更喜欢 Sql Compact，因为它的二进制文件占用少。然而，至少在我几年前使用的版本中，存在一些限制（ntext 不太支持）。

[很高兴知道，不支持](https://stackoverflow.com/a/11197393/588868)Access 数据库。虽然 Access 的名声不好，但对于本地应用来说，它是有道理的。

~~在 Microsoft World 之外，[SqlLite](http://www.codeproject.com/Articles/236918/Using-SQLite-embedded-database-with-entity-framewo)享有盛誉。~~

# .net - 在异步 WCF 代理上调用 EndSomeMethod

> ID：11228859
> 
> 赞同：0
> 
> 时间：2012-06-27T14:44:59.550
> 
> 标签：.net, wcf, asynchronous, iasyncresult

我在 WCF 代理上有一个返回 void 的方法。如果 return 是 non-void，我需要调用相应的 End... 方法来获取结果，但是如果 return 是 void 怎么办？

例如：

```
 ModuleProxy.Instance.Controller.BeginSaveConfiguration(Module.Name, Proxy_EndSaveConfig, null);
    ...
}

private void Proxy_EndSaveConfig(IAsyncResult ar) {
    ModuleProxy.Instance.Controller.EndSaveConfiguration(ar);
} 
```

我只是传递一个空回调然后从不调用`EndSaveConfiguration`，代理会坚持一些事情还是最终进入一个奇怪的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:05:34.587

通常你的异步请求应该超时。默认值为 10 分钟。如果要减少它，请将其绑定配置更改为较低的值。

# javascript - javascript中的函数数据类型

> ID：11228868
> 
> 赞同：4
> 
> 时间：2012-06-27T14:45:21.283
> 
> 标签：javascript, types, functional-programming

如何在 javascript 中构造函数和递归数据类型？

我希望能够做一些 ML 之类的事情：

```
datatype binary_node = Node of binary_node*binary_node 
                     | Lead of int 
```

前段时间我参加了一门函数式编程课程——出于某种随机原因，该课程是在 Scheme 中，我们通过制作 tubles 来构造数据类型，从数据类型的名称开始，然后是“有效负载”，这是在 Javascript 中执行函数式编程风格的数据类型的方法？

```
construct_node(n1,n2) -> 
    ("Node", n1, n2).

construct_leaf(int_value) ->
    ("Leaf", int_value). 
```

然后是类型检查器：

```
is_node(n) ->
    if (n[0] == "Node") ->
        is_binary_tree(n[1])  and is_binary_tree(n[2])
    else
        false
is_leaf(l) ->
    if(l[0] == "Leaf") ->
        is_integer(n[1])
    else 
        false
is_binary_tree(t) ->
    is_node(t) or is_leaf(t) 
```

在 javascript 中执行此操作的最聪明的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:02:56.913

JavaScript 通常以[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)的方式使用。这样，您不需要定义任何特殊的数据类型。任何具有属性`node1`并且`node2`可以被视为二叉树节点的对象。

```
var n = {
    node1: {
        node1: 456,
        node2: 789
    },
    node2: 1002
};

function isNode(x) {
    return x && isBinaryTree(x.node1) && isBinaryTree(x.node2);
}

function isLeaf(x) {
    return typeof x === 'number';
}

function isBinaryTree(x) {
    return isNode(x) || isLeaf(x);
} 
```

请注意，上述函数用于递归检查整个树的完整性，而不是在遍历期间逐个节点区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:35:39.000

我见过的一种方法是为代数数据类型的每种情况创建一个构造函数，并使用 instanceof 测试来实现分支。例如，这就是[Roy 语言](http://roy.brianmckenna.org/)实现模式匹配和标记联合的方式。

```
var Node = function(a, b){
    //protect against people forgetting to use "new" to call the constructor:
    if(!(this instanceof Node)){ return new Node(a, b) }

    //optionaly do extra type checking, if that is your thing:
    if(!(a instanceof Leaf)){ /*...*/ }
    if(!(b instanceof Leaf)){ /*...*/ }

    //save properties
    this.node1 = a;
    this.node2 = b;
};

var Leaf = function(value){
    /*...*/
    this.value = value;
}; 
```

这样，内部“__proto__”属性的标记和有效负载是对象中通常的实例属性。

我喜欢这种方法的一个原因是它非常“类型安全”。内部原型属性是不可编辑的，并且使用构造函数或对象（而不是符号或字符串）使其较少受到名称冲突的影响，无论是与不同类型还是与对象的属性。

另一个好处是，与依赖于鸭子类型不同，这种方法还可以无缝地与枚举和其他不同情况具有相同属性集的情况一起使用。

Javascript 的一个坏处是，就像在 LISP 案例中一样，它没有内置对解构的支持，因此您可能想要创建一个自定义匹配函数，如下所示。

```
var match_tree = function(x, cases){
    //just a helper function to make things pretty
    if(x instanceof Node){
        return cases.node.call(this, x.node1, x.node2);
    }else if(x instanceof Leaf){
        return cases.leaf.call(this, x.value);
    }else{
        throw new TypeError("pattern match failed");
    }
};

var sum_leaves = function(tree){
    return match_tree(tree, {
        node: function(val){ return val },
        leaf: function(left, right){
           return sum_leaves(left) + sum_leaves(right);
        }
    });
 }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T07:59:00.083

我是一种叫做[Roy](http://roy.brianmckenna.org)的语言的创造者。Roy 是一种具有静态类型、代数数据类型和模式匹配的语言。它还编译为 JavaScript。

您的示例将如下所示：

```
data Tree = Node Tree Tree | Leaf Number 
```

Number 是内置的 JavaScript 类型。

现在我们可以在 ADT 上进行模式匹配：

```
let isNode n = match n
  case (Node a b) = true
  case (Leaf l) = false

let isLeaf l = match l
  case (Leaf l) = true
  case (Node a b) = false 
```

这是 JavaScript 输出：

```
var Node = function(Tree_0, Tree_1) {
    if(!(this instanceof Node)) {
        return new Node(Tree_0, Tree_1);
    }
    this._0 = Tree_0;
    this._1 = Tree_1;
};
var Leaf = function(Number_0) {
    if(!(this instanceof Leaf)) {
        return new Leaf(Number_0);
    }
    this._0 = Number_0;
};
var isNode = function(n) {
    return (function() {
        if(n instanceof Node) {
            var a = n._0;
            var b = n._1;
            return true;
        } else if(n instanceof Leaf) {
            var l = n._0;
            return false;
        }
    })();
};
var isLeaf = function(l) {
    return (function() {
        if(l instanceof Leaf) {
            var l = l._0;
            return true;
        } else if(l instanceof Node) {
            var a = l._0;
            var b = l._1;
            return false;
        }
    })();
}; 
```

# android - 通过 Android CalendarContract 接受邀请

> ID：11228873
> 
> 赞同：0
> 
> 时间：2012-06-27T14:45:38.157
> 
> 标签：android, calendar

我正在开发一个项目，该项目涉及使用 Android 日历 API 读取和操作数据。我将使用 API 14 CalendarContract 和用于旧设备的更可疑的未记录 API 来执行此操作，以实现一些向后兼容性。

我目前正在玩数据库，以了解它们是如何工作的。到目前为止，一切都很好。

我发现的一个问题是，当我尝试更改参加者的状态（用户的状态，而不是任何其他参加者的状态）时，这似乎实际上并没有接受该活动的邀请。

例如，使用 2 个谷歌日历帐户，我这样做： 帐户 A 在设备上登录 帐户 B 创建事件并邀请帐户 A 事件显示在帐户 A 设备上 尝试通过日历 API 接受邀请。

这是我正在努力的最后一步。

这就是我正在做的事情：

```
ContentValues event = new ContentValues();

event.put("attendeeStatus", "1");//accept

Uri eventsUri = Uri.parse(getCalendarUriBase() + "attendees");
Uri eventUri = ContentUris.withAppendedId(eventsUri, id);

iNumRowsUpdated = getContentResolver().update(eventUri, event, null, null); 
```

这成功地将数据库中的参加者状态更新为 1。

但是，这不会更新他们的实际出席情况。所以我的问题是，数据库模式中是否有另一个字段用于此目的？还是有更好/更有效的解决方案？和/或是否可以强制它与谷歌日历系统同步，以便我可以看到账户 A 已接受账户 B 的谷歌日历账户？

值得注意的是，我尝试了以下方法：

```
getContentResolver().notifyChange(eventUri, null);

getContentResolver().notifyChange(eventsUri, null); 
```

这没有帮助。

注意：上面的代码专门针对 4.0 之前的设备，但对于 ICS 来说已经足够接近了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:43:08.343

问题已解决：

以上内容适用于 Google 日历帐户，但无法通过 Exchange 连接正确同步。

# java - Android FragmentManager 监听器

> ID：11228875
> 
> 赞同：2
> 
> 时间：2012-06-27T14:45:40.483
> 
> 标签：java, android

在寻找存储和通知侦听器的最佳方式（弱引用与强引用，匿名侦听器与垃圾收集器）时，我看了一下 Google 如何实现他们的侦听器。以下来自 FragmentManager 类的代码：

```
ArrayList<OnBackStackChangedListener> mBackStackChangeListeners;

public void removeOnBackStackChangedListener(OnBackStackChangedListener listener) {
    if (mBackStackChangeListeners != null) {
        mBackStackChangeListeners.remove(listener);
    }
}

void reportBackStackChanged() {
    if (mBackStackChangeListeners != null) {
        for (int i=0; i<mBackStackChangeListeners.size(); i++) {
           mBackStackChangeListeners.get(i).onBackStackChanged();
        }
    }
} 
```

如果在其 中删除了一个侦听器`onBackStackChanged`，则类似于：

```
@Override
void onBackStackChanged()
{
    mFragmentManager.removeOnBackStackChangedListener(this);
} 
```

在我看来，ArrayList 中的下一个侦听器将被跳过。

我错过了什么吗？这是不应该做的事情吗？

# python - 将 HTML 表单数据导入 python

> ID：11228878
> 
> 赞同：0
> 
> 时间：2012-06-27T14:45:43.280
> 
> 标签：python, html

我想用我的 python 应用程序获取 HTML 表单数据并处理提交的数据（例如字符串）。

带有表单的 html 文件将存储在本地，并且将从浏览器输入值。然后我想将提交的值带到我的 python 应用程序中。

如何处理表单操作并将其链接到我的应用程序？请指出我正确的方向。

BR,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:12:58.647

对我来说，听起来您只想在本地打开一个静态 html 文件并记录和提交表单。

如果是这种情况，请理解您仍然需要某种在本地运行的 Web 服务器来接收 POST 或 GET 数据。

这本身很容易成为一个简单的 python 脚本，请查看[这个问题](https://stackoverflow.com/questions/530787/simple-http-web-server)以获取想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:03:51.963

如果您只是想从您想要创建的 Web 应用程序中执行您的应用程序，那么您可以使用从裸 cgi 脚本（比如... Perl）到 PHP 脚本甚至 Django（基于 Python 的 Web 框架）的任何内容。这一切都取决于你喜欢做什么:)

如果您打算将 Python 应用程序与 Web 应用程序集成，您可以尝试在 Django Web 框架中进行。

# c# - 线条形状和 Shananagins

> ID：11228879
> 
> 赞同：2
> 
> 时间：2012-06-27T14:45:49.563
> 
> 标签：c#, wpf

所以，基本上我试图在两个椭圆的中心之间画一条线

我认为应该这样做：

```
Path myPath = new Path();
myPath.Stroke = System.Windows.Media.Brushes.Black;     
myPath.StrokeThickness = 4;
myPath.HorizontalAlignment = HorizontalAlignment.Left;
myPath.VerticalAlignment = VerticalAlignment.Center;
EllipseGeometry myEllipseGeometry = new EllipseGeometry();
myEllipseGeometry.Center = new System.Windows.Point((xQuard * 10) + 100, yQuard * 10);
myEllipseGeometry.RadiusX = 2;
myEllipseGeometry.RadiusY = 2;
myPath.Data = myEllipseGeometry;
GraphPanel.Children.Add(myPath);

//if it's not the first point...
if (prevA != 0.0)
{
Path iLine = new Path();
iLine.Stroke = Brushes.Black;
iLine.StrokeThickness = 4;
iLine.HorizontalAlignment = HorizontalAlignment.Left;
myPath.VerticalAlignment = VerticalAlignment.Center;
LineGeometry iLineGeometry = new LineGeometry();

iLineGeometry.StartPoint = myEllipseGeometry.Center;

iLineGeometry.EndPoint = new System.Windows.Point(prevA, prevB);

iLine.Data = iLineGeometry;
GraphPanel.Children.Add(iLine);

}

//Set the previous point(s)
prevA = (xQuard * 10) + 100;
prevB = yQuard * 10; 
```

* * *

现在如您所见，我已将 Line 的 StartPoint = 设置为第一个椭圆起点

但是.... ![在此处输入图像描述](../Images/7749cf5ffa8eb0fd5f2c56b8f991b9b2.png)

为什么图中Line的起点不是左边点的中心？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:53:53.630

我想你的意思`iLine.VerticalAlignment`不是`myPath.VerticalAlignment`第二次，对吧？

# objective-c - NSNumber 字面量和固定宽度整数类型

> ID：11228883
> 
> 赞同：0
> 
> 时间：2012-06-27T14:45:57.490
> 
> 标签：objective-c

我有三种固定宽度的整数类型：

```
typedef int16_t TABCellManagedDataKey;
typedef int16_t TABCellManagedDataIndex;
typedef int32_t TABCellManagedDataKeyWithIndex; 
```

这是使用它们的代码：

```
TABCellManagedDataKeyWithIndex keyWithIndex = key << 16 | index;
[[self managedModel] setObject:model forKey:@(keyWithIndex)]; 
```

使用文字的新`@()`语法`NSNumber`，是否可以安全地执行以下操作？

```
[[self managedModel] setObject:model forKey:@(key << 16 | index) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:47:43.887

是的。没事儿。`@(N)`是一样的`[NSNumber numberWithX:N]`。

# sql - SQL Server Management Studio 中的存储过程依赖项

> ID：11228886
> 
> 赞同：4
> 
> 时间：2012-06-27T14:46:03.930
> 
> 标签：sql, sql-server

我对MS世界了解不多，但现在恰好是我必须使用SQL Server Management Studio 2008。

我的问题：我在表中有一个列，我需要查看所有可能对其起作用的存储过程。

我尝试右键单击并转到“查看依赖项”，但这似乎并没有返回它应该返回的所有内容。

像这样的问题：[SQL Server Dependencies](https://stackoverflow.com/questions/299128/sql-server-dependencies)有提供 3 种解决方案的答案

1.  付费第三方工具。
2.  编写自己的脚本。
3.  将所有内容导出到文本文件中并对其进行 grepping。

怎么回事？我错过了一些明显的东西吗？事情真的是这样运作的吗？我想这是一个非常常见的用例：你想改变表并且你想确保你不会破坏任何东西。或者，如果您是第一次使用数据库查看一个新项目，并且您想查看某些列是如何填充存储过程的。实际上没有快速简便的内置工作流程来执行此操作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T14:56:25.940

如果您需要按名称查找数据库对象（例如表、列、触发器） - 请查看名为[SQL Search的](http://www.red-gate.com/products/sql-development/sql-search/)**免费**Red-Gate 工具，它会在您的整个数据库中搜索任何类型的字符串。

![在此处输入图像描述](../Images/06aa8195296565da03113074a84f9fa1.png)

![在此处输入图像描述](../Images/2b38d4018a9fbf766a665542ad2c611d.png)

对于任何 DBA 或数据库开发人员来说，它都是一个很棒的必备工具——我是否已经提到它完全**免费**用于任何用途？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:08:22.970

使用此查询：

```
SELECT ROUTINE_NAME, ROUTINE_DEFINITION 
FROM INFORMATION_SCHEMA.ROUTINES 
WHERE ROUTINE_DEFINITION LIKE '%YOUR COLUMN %' 
AND ROUTINE_TYPE='PROCEDURE' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-03T18:23:03.110

我花了很多时间试图找到一种快速识别列级别依赖项的方法，而无需搜索文本或使用第三方应用程序。另一个挑战是跨多个数据库查找表名可能重复的依赖关系，这会在搜索 SP 文本时导致误报。

从 SQL 2008 开始，有一个函数可以在字段级别返回跨数据库的依赖关系。

下面的代码有一些例外情况：

*   如果在已删除的表/字段上存在具有无效引用的存储过程，它将失败（顺便说一下，我发现这对于查找被表修改意外破坏的 SP 很有用）。
*   在 SP 以不寻常的方式使用临时表的情况下，它不会找到所有依赖项。
*   在某些情况下，我发现它为复杂的存储过程返回了误报。

[MSDN 文档](http://technet.microsoft.com/en-us/library/bb630351%28v=sql.100%29.aspx)

此代码应从 SP 所在的数据库中运行，以便能够跨越其他数据库依赖项。

```
SELECT      
--SP, View, or Function
ReferencingName = o.name,
ReferencingType = o.type_desc,

--Referenced Field
ref.referenced_database_name, --will be null if the DB is not explicitly called out
ref.referenced_schema_name, --will be null or blank if the DB is not explicitly called out
ref.referenced_entity_name,
ref.referenced_minor_name

FROM sys.objects AS o 
cross apply sys.dm_sql_referenced_entities('dbo.' + o.name, 'Object') ref
where o.type in ('FN','IF','V','P','TF') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T15:03:33.690

我想知道为什么您无法通过“查看依赖项”对话框看到依赖项，因为它对我来说非常好用。不过，您可以查询 'sys.sql_expression_dependencies' 系统视图并获取所需的依赖信息。

例子

```
SELECT OBJECT_NAME(referencing_id),OBJECT_NAME(referenced_id)  
FROM sys.sql_expression_dependencies 
WHERE referenced_id = OBJECT_ID('XXX') 
```

您当然可以投射您可能需要的其他信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-09T07:16:38.330

单个查询中所有依赖对象的列表。

从 sys.procedures A 中选择不同的 A.name A.object_id = B.object_id 上的内部连接 ​​sys.sql_dependencies B；

或者

select distinct A.name from sys.objects A 内部连接 ​​sys.sql_dependencies B on A.object_id = B.object_id where A.type_desc = '提到你的对象类型';

# php - Gearman - 客户

> ID：11228888
> 
> 赞同：2
> 
> 时间：2012-06-27T14:46:10.013
> 
> 标签：php, linux, gearman

研究 PHP/Gearman。我试图了解 Gearman 服务器/进程如何确定构成“有效”客户端的内容。

在我看到的文档中，文档显示了许多连接到 Gearman 服务器的客户端。但是，我没有找到任何描述服务器如何“验证”工作人员或限制工作人员/客户端访问/从服务器获取工作的内容。

例如，我创建了一个 Gearman 服务器，并且我有一个包含 5 台子机的网络，每台子机都有一个“worker”。我邪恶的朋友史蒂夫向网络添加了另一台机器，它有自己的工人..

如何阻止史蒂夫的工作人员从我的服务器获取工作！

有没有办法让客户/工人自己注册，所以我基本上可以为客户/工人分配 ID？？？

我相当肯定有办法做到这一点，但我还没有遇到过。

我正在使用 PHP/MySQL/Gearman 在 Linux 环境中进行测试。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:57:05.457

与 memcached 一样，**gearman 没有任何访问控制或身份验证**。

您最好的解决方案是依赖您的操作系统，例如防火墙规则。

即**iptables**应该阻止所有传入端口 4730（标准 gearman 端口）的流量，像这样

`iptables -A INPUT -p tcp --dport 4730 -s server1 -j ACCEPT`

...

`iptables -A INPUT -p tcp --dport 4730 -s server5 -j ACCEPT`

`iptables -A INPUT -p tcp --dport 4730 -j DROP`

这样，您仍然可以从 localhost 使用 Gearman。

*免责声明：这条规则在我的脑海中，请在生产服务器上运行之前仔细检查这些规则。*

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:00:19.533

通过监听 (1) 仅在本地主机上或 (2) 如果您需要外部访问，请设置适当的防火墙规则。Gearman 的创建目的是尽可能减少开销，没有身份验证协议。如果这还不够，那么只能在 localhost 上侦听并使用 SSH 隧道连接到该机器。还有一种可能是使用该`HTTP`协议（参见[此处](http://gearman.org/index.php?id=manual%3ajob_server)），并在其前面放置一个验证代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-10T21:12:56.607

Gearman 服务器应该只能在您的内部网络上访问。您的应用程序所在的网络不应该有未经授权的设备。您的应用程序服务器不应与您的无线路由器共享网络。Gearman 只会将作业发送到注册到具有相同任务名称的特定服务器的服务器。如果您公司的一名员工开玩笑地向您的生产 Gearman master 注册了一个同名的任务，那么您的问题就更大了。

# java - 如何阻止intellij删除诸如“import javax.servlet.http.*;”之类的导入？

> ID：11228895
> 
> 赞同：5
> 
> 时间：2012-06-27T14:46:25.447
> 
> 标签：java, intellij-idea

我不知道我做了什么，但是每当我使用“import lib.*”时，intellij 都会从字面上删除导入。

我只是想编写一个简单的 servlet 类，但我导入了所有内容，然后再优化导入。

我该如何禁用它？

# windows-phone-7 - Windows 推送通知服务 - 如何获取证书？

> ID：11228896
> 
> 赞同：4
> 
> 时间：2012-06-27T14:46:34.370
> 
> 标签：windows-phone-7, push-notification, ssl-certificate, mpns

根据 MSDN 文档，要每天发送超过 500 个推送通知，您的服务需要一个证书来建立到 WNS 的 SSL 隧道。

我在这里看到[http://msdn.microsoft.com/library/windows/apps/ff941099(v=vs.105).aspx](http://msdn.microsoft.com/library/windows/apps/ff941099(v=vs.105).aspx)如何上传证书，但是如何获得证书？我是否需要在托管我的服务的 Web 服务器上安装证书？如果我在 Windows Azure 中托管我的服务怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-03T15:01:12.477

首先，这个问题是关于 MPNS（微软推送通知服务），而不是 WNS（Windows 通知服务）。它们是两个独立的服务，WNS 现在是 Microsoft 的首选平台。

Microsoft 在此处提供 MPNS 批准的 CA（证书颁发机构）列表：

*   [适用于 Windows Phone OS 7.1 的 SSL 根证书](http://msdn.microsoft.com/en-US/library/windows/apps/gg521150(v=vs.105).aspx)

获取证书的过程与所有 CA 大致相同。您需要创建一个以您的域名为证书CN（通用名称）的CSR（证书签名请求），并将其发送给CA。CA 对特定有效期（通常为 1、2 或 3 年）收取一定费用。在颁发 SSL 证书之前，他们通常会进行某些检查以确保您确实拥有该域名，例如通过邮寄域名的 WHOIS 所有者和/或要求您创建一个特殊的 DNS 记录。

获得证书后，您需要将其作为客户端证书安装在服务器中，以便向 MPNS 服务器发出推送通知调用。您如何做到这一点取决于您的服务器架构（.NET、Java 等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:15:32.733

[http://www.verisign.co.uk/](http://www.verisign.co.uk/)

您需要一个注册域名，然后您可以注册购买证书，我认为几年前我为我的应用程序找到的最便宜的是 99 美元，但现在这可能不正确。

祝你好运，

# php - facebook扩展访问令牌登录

> ID：11228905
> 
> 赞同：0
> 
> 时间：2012-06-27T14:46:47.820
> 
> 标签：php, facebook

我有以下代码：

```
 $facebook = new Facebook(array(
                'appId'  => ID,
                'secret' => SECRET,
                'cookie' => true));

   $fb_uid = $facebook->getUser();

   if($fb_uid)
   {
   // check if person with fb_uid as facebook id in database, 
   // if so log them in. If not, register them.

    $fb_user = $facebook->api('/' . $fb_uid);

     I then get their email address using $fb_user['email'] and facebook_id and store in the database as a means to log them in the future 
```

即使该人使用 facebook 登录，有时 $fb_uid 也会返回 false ...我认为这是因为访问令牌过期。如何更改此代码以合并扩展访问令牌以将用户登录到我的站点？

不推荐使用离线访问令牌，因此我需要使用扩展访问令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:11:03.783

您的 cookie 即将过期。不要使用 cookie 和屏幕抓取，而是使用 OAuth。

请参阅此处的示例：http: [//eggie5.com/20-getting-started-w-facebook-api](http://eggie5.com/20-getting-started-w-facebook-api)

# sql - 从sql server到oracle的参数转换

> ID：11228908
> 
> 赞同：0
> 
> 时间：2012-06-27T14:46:50.963
> 
> 标签：sql, sql-server, oracle

SQL Server 查询中的这个参数 - 我复制到我正在编写的 Oracle 查询，但它没有编译：

> PROCEDURE OGEN.DBD_NOT_GET_NOTES_DETAIL 的编译错误
> 
> 错误：PLS-00103：在预期以下情况之一时遇到符号“（”：
> 
> := 。) , @ % 默认字符
> 符号 ":=" 被替换为 "(" 以继续。行: 6 文本: , NOTETYPE NUMERIC(1) = 1

如何在 Oracle 中编写代码？

完整的 SQL Server T-SQL 查询：

```
ALTER PROCEDURE [OEN].[DB_NOT_GET_NOTES_DETAIL]
(
@FACILITYKEY CHAR(4),
@DATEFROM DATETIME, 
@DATETHRU DATETIME,
@UNITSTR VARCHAR(250),
@NOTETYPE NUMERIC(1) = 1
)
AS
BEGIN
    SELECT P.FACILITY_KEY, P.PAT_NUMBER, P.PATIENT_ID, 
             OEN.DATEONLY(N.CREATED_ON) CREATED_ON, N.NOTE_HEADER,
             N.CREATED_BY, P.LAST_NAME, P.FIRST_NAME, P.MIDDLE_NAME, P.UNIT_CODE 
       FROM OEN.EN_M_PATIENT_MAST P INNER JOIN OPTC.NOT_M_MAST N
        ON (P.PAT_NUMBER = N.PAT_NUMBER AND N.FACILITY_KEY = @FACILITYKEY)
        WHERE N.NOTE_STATUS = 0 
        AND (OEN.DATEONLY(N.CREATED_ON) BETWEEN OEN.DATEONLY(@DATEFROM) AND OEN.DATEONLY(@DATETHRU))
        AND (@UNITSTR IS NULL OR @UNITSTR = '' OR CHARINDEX(P.UNIT_CODE, @UNITSTR) % 2 = 1)
        AND @NOTETYPE = 1

END 
```

甲骨文版本：

```
CREATE OR REPLACE PROCEDURE OEN.DBD_NOT_GET_NOTES_DETAIL (
  FACILITYKEY varchar2
, DATEFROM DATE
, DATETHRU DATE
, UNITSTR varchar2
, NOTETYPE NUMERIC(1) = 1

, OCURSOR OUT SYS_REFCURSOR
) as
BEGIN
  OPEN OCURSOR FOR
    SELECT P.FACILITY_KEY, 
    P.PAT_NUMBER, 
    P.PATIENT_ID,
      OEN.DATEONLY(N.CREATED_ON) CREATED_ON, N.NOTE_HEADER,
             N.CREATED_BY, P.LAST_NAME, P.FIRST_NAME, P.MIDDLE_NAME, P.UNIT_CODE 

      FROM OEN.EN_M_PATIENT_MAST P 
      INNER JOIN OPTC.NOT_M_MAST N ON (P.PAT_NUMBER = N.PAT_NUMBER AND N.FACILITY_KEY = FACILITYKEY)
      WHERE N.NOTE_STATUS = 0 
        AND (OEN.DATEONLY(N.CREATED_ON) BETWEEN OEN.DATEONLY(DATEFROM) AND OEN.DATEONLY(DATETHRU))
        AND CREATED_ON BETWEEN DATEFROM AND DATETHRU
       AND (UNITSTR IS NULL OR P.UNIT_CODE = UNITSTR);
    END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:53:43.017

我的猜测是你需要

```
NOTETYPE NUMBER(1) := 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:34:52.177

函数的参数不应具有长度、比例或精度。所以`NOTETYPE`需要声明参数

```
NOTETYPE NUMERIC 
```

如果要为参数分配默认值，则语法为

```
<<parameter declaration>> DEFAULT <<default value>> 
```

放在一起，你的参数声明应该是

```
, NOTETYPE NUMERIC DEFAULT 1 
```

作为一般的文体问题，尽管这可能不会导致任何错误

*   我强烈建议将程序的参数锚定到数据模型中的适当类型。所以，例如，`FACILITYKEY OPTC.NOT_M_MAST.FACILITY_KEY%TYPE`。如果将来您需要执行诸如增加列长度之类的操作，则可以调整参数。
*   我强烈建议对参数采用一种命名约定，将它们与数据库列区分开来。为参数名称添加前缀是一种流行的做法（即`p_facility_key optc.not_m_mast.facility_key%type`）。由于您没有`@`像在 SQL Server 中那样使用前缀，因此很容易无意中使参数名称与表中的列名称相匹配。由于名称解析优先于列名而不是局部变量，因此很容易编写无意中使用列而不是局部变量的代码。

例如，此函数将返回`EMP`表中的每一行。

```
CREATE OR REPLACE FUNCTION get_emps( empno IN emp.empno%type )
  RETURN sys_refcursor
IS
  l_rc sys_refcursor;
BEGIN
  OPEN l_rc 
   FOR SELECT *
         FROM emp e
        WHERE e.empno = empno;
  RETURN l_rc;
END; 
```

*   由于此方法的目标是向调用者返回某些内容，而不是进行计算，因此它确实应该声明为 a`FUNCTION`而不是 a`PROCEDURE`并且应该声明为`RETURN`the`sys_refcursor`而不是具有`OUT`参数。

# java - 在 Customiz 映射中获取请求参数映射？

> ID：11228913
> 
> 赞同：1
> 
> 时间：2012-06-27T14:47:06.133
> 
> 标签：java, collections

我希望我的自定义映射中的请求参数映射像

```
Map<String, String> reqMap =(HashMap<String, String>)request.getParameterMap(); 
```

上面的语句给了我以下异常

```
java.lang.ClassCastException: java.util.Collections$UnmodifiableMap 
```

谁能指导我如何在自定义地图中获取所有请求参数？不想写 for 循环来一一获取参数，这会导致我出现性能问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-06T10:03:03.750

谨防将 Map 转换`String, String`为自 Java 6 以来 `request.getParameterMap()`返回类型的 Map 。 [http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap())`String, String[]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:53:04.087

```
Map<String, String> reqMap = request.getParameterMap();
CustomMap<String, String> customMap = new CustomMap<String,String>();
customMap.putAll(reqMap); 
```

当然，您可能需要在`putAll()`实现中遍历地图元素。否则是不可能的。

**更新：** 刚看到你的评论，泰语很容易，

```
Map<String, String> reqMap = request.getParameterMap();
Map<String, String> newMap= new HashMap<String,String>();
newMap.putAll(reqMap); 
```

或者，您甚至可以将`reqMap`作为构造函数参数传递给`new HashMap<String, String>(reqMap);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-04T09:07:11.730

你可以试试这个方法：

```
public LinkedHashMap<String, String> returnMapOfRequest(HttpServletRequest request) 
    {
        LinkedHashMap<String, String> map = new LinkedHashMap<String, String>();
        try 
        {
            Enumeration<String> parameterNames = request.getParameterNames();
            Enumeration<String> headerNames = request.getHeaderNames();
            while(headerNames.hasMoreElements()) 
            {
                String headerName = headerNames.nextElement();
                Enumeration<String> headers = request.getHeaders(headerName);
                while(headers.hasMoreElements())
                {
                    String headerValue = headers.nextElement();
                    map.put(headerName, headerValue);
                }
            }
            HttpSession session = request.getSession();
            Enumeration e = session.getAttributeNames();
            while(e.hasMoreElements())
            {
                String key = (String) e.nextElement();
                map.put(key, session.getAttribute(key));
            }
            while(parameterNames.hasMoreElements())
            {
                String paramName = parameterNames.nextElement();
                String[] paramValues = request.getParameterValues(paramName);
                for(int i = 0; i < paramValues.length; i++) 
                {
                    String paramValue = paramValues[i];
                    map.put(paramName, paramValue);
                }
            }
        }
        catch(Exception e)
        {
            logger.error("Exception in returnMapOfRequest  ::  ", e);
        }
        return map;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T14:50:24.383

改变：

```
Map<String, String> reqMap =(HashMap<String, String>)request.getParameterMap(); 
```

到：

```
Map<String, String> reqMap =(Map<String, String>)request.getParameterMap(); 
```

# cloud-foundry - vmc 隧道无法选择客户端，说请消除歧义：mysqldump 还是 mysql？

> ID：11228922
> 
> 赞同：0
> 
> 时间：2012-06-27T14:47:29.567
> 
> 标签：cloud-foundry

我正在尝试通过 vmc 隧道连接到 mysql 服务。在我必须选择一项服务之前，一切都很好。

日志：

在端口 10000 上启动到 mysql-7624 的隧道。 1：无 2：mysqldump 3：mysql 您要启动哪个客户端？：mysql 请消除歧义：mysqldump 还是 mysql？您想启动哪个客户端？：mysql 请消除歧义：mysqldump 还是 mysql？

你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:41:16.037

请输入与客户端名称相对应的您希望启动的客户端编号，即 2 用于 mysqldump 或 3 用于 mysql。

# javascript - 用空值初始化 JQuery Datepicker

> ID：11228931
> 
> 赞同：5
> 
> 时间：2012-06-27T14:47:59.637
> 
> 标签：javascript, jquery

此代码仍将字段设置为今天的日期

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.date').datepicker({ dateFormat: "mm/dd/yy", changeMonth: true,
            changeYear: true, yearRange: '1900:2020', defaultDate: ''
        });

    });

</script> 
```

如何普遍配置字段以空白开头？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T14:52:24.070

如果该字段显示今天的日期，那是因为输入字段的填充方式。datepicker 将从 html 元素具有的任何值开始，无论它是什么：

[演示](http://jsfiddle.net/QXhfU/)

如果您无法通过更改标记来控制输入字段的值，但仍需要重置输入字段，则必须手动执行此操作：

```
$(document).ready(function () {
    $('.date').datepicker({ dateFormat: "mm/dd/yy", changeMonth: true,
        changeYear: true, yearRange: '1900:2020'
    }).val('');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-07T11:13:21.503

```
$("#start-date-filter").datepicker({
        更改月份：真，
        更改年份：是的，
        dateFormat: 'yyyy-mm-dd',
        年份范围：'-2：+4'
}).val('');

```

# php - Yii 包括 CSS 和 JS 文件

> ID：11228936
> 
> 赞同：3
> 
> 时间：2012-06-27T14:48:09.610
> 
> 标签：php, css, yii

我已经读了很长时间了……我很困惑-

你能帮忙看看有什么区别：

```
Yii::app()->clientScript->registerCssFile(Yii::app()->baseUrl.'/css/some-file.css');

<link rel="stylesheet" type="text/css" href="<?php echo Yii::app()->request->baseUrl; ?>/css/some-file.css 
```

这是性能问题，还是只是语法不同？

谢谢，丹尼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T14:56:59.627

`registerCssFile`始终在`<head>`标签之间注册文件，即使您在视图中的某处调用它也是如此。如果您关心 HTML 验证（a `<link>`in`<body>`无效），但仍希望在视图中包含 CSS 文件，这将很有帮助。

`registerCssFile`实际上有助于提高性能，因为 CSS 仅在您需要时才注册（并且需要它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:00:20.730

您使用它的方式是相同的。要验证这一点，请检查页面的来源（在您的浏览器中）并检查 Yii::app()->clientScript->registerCssFile 创建的语句。

但是，clientScript 允许您控制脚本在 HTML 文件中的位置。查看：[http](http://www.yiiframework.com/doc/api/1.1/CClientScript#registerScriptFile-detail) : //www.yiiframework.com/doc/api/1.1/CClientScript#registerScriptFile-detail 并查找 POS_HEAD、POS_BEGIN、POS_END。

可能更重要的是：在 MVC 哲学中，您希望在视图文件中包含与 HTML 输出相关的所有内容。Yii::app()->clientScript 允许您从视图文件中添加 CSS 和 JS 文件。这就是你想要的。

# mysql - 来自八个表的多个 JOIN 和 SELECT 语句

> ID：11228938
> 
> 赞同：0
> 
> 时间：2012-06-27T14:48:19.107
> 
> 标签：mysql, sql, labview

我正在尝试创建一个 SQL 语句，它采用八个不同的数字并从一个​​数据库中搜索八个不同的表以获取相应的值。我不断收到无效的语法，但我不知道为什么。这是我的代码：

```
SELECT cable_length.ID, drawing.ID, optional.ID, output_type.ID, pressure_range.ID, pressure_type.ID, series.ID, termination.ID 
FROM
(
    SELECT value AS cable_length FROM A1 WHERE A1.id = %s
    JOIN SELECT value AS drawing FROM A2 WHERE A2.id = %s,
    JOIN SELECT value AS optional FROM A3 WHERE A3.id = %s,
    JOIN SELECT value AS output_type FROM A4 WHERE A4.id = %s,
    JOIN SELECT value AS pressure_range FROM A5 WHERE A5.id = %s,
    JOIN SELECT value AS pressure_type FROM A6 WHERE A6.id = %s,
    JOIN SELECT value AS series FROM A7 WHERE A7.id = %s, 
    JOIN SELECT value AS termination FROM A8 WHERE A8.id = %s
); 
```

%s 将仅更改为数字。每个表中的列名是“ID”和“Value”。我想按“ID”搜索并返回“Value”。表名是 cable_length 等。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:01:01.623

如果您知道所有 8 个值都存在，则可以像这样加入：

```
SELECT  A1.value as cable_length
  , A2.value as drawing
  , A3.value as optional
  , A4.value as output_type
  , A5.value as pressure_range
  , A6.value as pressure_type
  , A7.value as series
  , A7.value as termination
FROM A1, A2, A3, A4, A5, A6, A7, A8
WHERE A1.ID = %s
  AND A2.ID = %s
  AND A3.ID = %s
  AND A4.ID = %s
  AND A5.ID = %s
  AND A6.ID = %s
  AND A7.ID = %s
  AND A8.ID = %s 
```

如果您不知道这一点，但可以保证第一个值存在，那么您的查询必须变得更丑，因为您需要左连接。

```
SELECT  A1.value as cable_length
  , A2.value as drawing
  , A3.value as optional
  , A4.value as output_type
  , A5.value as pressure_range
  , A6.value as pressure_type
  , A7.value as series
  , A7.value as termination
FROM A1
  LEFT JOIN A2
    ON A2.ID = %s
  LEFT JOIN A3
    ON A3.ID = %s
  LEFT JOIN A4
    ON A4.ID = %s
  LEFT JOIN A5
    ON A5.ID = %s
  LEFT JOIN A6
    ON A6.ID = %s
  LEFT JOIN A7
    ON A7.ID = %s
  LEFT JOIN A8
    ON A8.ID = %s
WHERE A1.ID = %s 
```

如果没有保证存在任何值，则破解方法是有一个子查询，它是`UNION ALL`8 个查询中的一个，它返回 8 列，只有一个填充，然后选择`MAX`每列的作为该列的名称。

这是一个糟糕的技巧，我过去曾使用过它来避免许多只偶尔加入的左连接的性能问题。

顺便说一句，名为 A1..A8 的 8 个表表明您需要有数据库经验的人来查看您的设计并为您提供更好的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:01:57.253

也许这就是你想要的。也许不是，我只是重写了您的查询：

```
SELECT
  cable_length.ID,
  drawing.ID,
  optional.ID,
  output_type.ID,
  pressure_range.ID,
  pressure_type.ID,
  series.ID,
  termination.ID 
FROM (SELECT ID FROM A1 WHERE A1.id = %s) AS cable_length
JOIN (SELECT ID FROM A2 WHERE A2.id = %s) AS drawing
JOIN (SELECT ID FROM A3 WHERE A3.id = %s) AS optional
JOIN (SELECT ID FROM A4 WHERE A4.id = %s) AS output_type
JOIN (SELECT ID FROM A5 WHERE A5.id = %s) AS pressure_range
JOIN (SELECT ID FROM A6 WHERE A6.id = %s) AS pressure_type
JOIN (SELECT ID FROM A7 WHERE A7.id = %s) AS series
JOIN (SELECT ID FROM A8 WHERE A8.id = %s) AS termination; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:12:10.543

UNION ALL 在这种情况下可以工作，但它可能不是最好的解决方案，更不用说混乱了（请参阅@btilly 提供的答案）。另请注意，这是 SQL Server 语法，可能与 MySql 略有不同

```
select max(cable_length), max(drawing), max(optional), max(output_type), max(pressure_range), max(pressure_type), max(series), max(termination)

from
(
    SELECT value as cable_length, null, null, null, null, null, null, null, null 
    FROM cable_length WHERE id = %s

    UNION ALL

    SELECT null, value as drawing, null, null, null, null, null, null, null 
    FROM drawing WHERE id = %s

    UNION ALL

    SELECT null, null, value as optional, null, null, null, null, null, null 
    FROM optional WHERE id = %s

    UNION ALL

    SELECT null, null, null, value as output_type, null, null, null, null, null 
    FROM output_type WHERE id = %s

    UNION ALL

    SELECT null, null, null, null, value as pressure_range, null, null, null 
    FROM pressure_range WHERE id = %s

    UNION ALL

    SELECT null, null, null, null, null, value as pressure_type, null, null 
    FROM pressure_type WHERE id = %s

    UNION ALL

    SELECT null, null, null, null, null, null, value as series, null 
    FROM series WHERE id = %s

    UNION ALL

    SELECT null, null, null, null, null, null, null, value as termination 
    FROM termination WHERE id = %s
); 
```

# python - Python - 确定列表是否对称的算法

> ID：11228939
> 
> 赞同：2
> 
> 时间：2012-06-27T14:48:20.390
> 
> 标签：python

所以我被困在这个问题上，我被要求在 Python 中编写一个函数来检查一个 n 维数组（就是他们所谓的吗？）是否“对称”，这意味着该行数组的 1 == 第 1 列，第 2 行 == 第 2 列，第 3 行 == 第 3 列，依此类推。目标是有一个函数，如果对称则返回布尔值 True，否则返回 False。

我设法编写了一个有效的函数，但它只适用于大小为完美正方形的列表（例如 2 x 2、4 x 4），并且我的一些测试用例是“不规则”大小的（例如 2 x 5、3 x 2)。对于这些列表，我最终会在此处获得列表索引超出范围错误代码：

```
def symmetric(square):
    final_result = []
    x = 0
    y = 0
    while x < len(square):
        row_list = []
        col_list = []
        while y < len(square[x]):
            print "(x, y): %d, %d" % (x, y)
            print "(y, x): %d, %d" % (y, x)
            row_list.append(square[x][y])
            col_list.append(square[y][x])
            y = y + 1
        if row_list == col_list:
            final_result.append(True)
        else:
            final_result.append(False)
        x = x + 1

    for x in final_result:
        if x == False:
            return False
    return True 
```

还有我在这里失败的测试用例：

```
print symmetric([[1, 2, 3, 4],
                [2, 3, 4, 5],
                [3, 4, 5, 6]])
#Expected result: >>> False
#List index out of range

# This one actually returns the correct result, I'm just including it here
# for reference.
#print symmetric([["cat", "dog", "fish"],
#                ["dog", "dog", "fish"],
#                ["fish", "fish", "cat"]])
#Expected result: >>> True
#Actual result: >>> True

print symmetric([[1,2,3],
                 [2,3,1]])
#Expected Result: >>> False
#Actual result: list index out of range 
```

有人可以帮我修改代码，使其适用于这些“不规则形状”的数组吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T15:15:26.877

这段代码将为您完成所有工作：

```
def symmetric(square):
    square = [tuple(row) for row in square]
    return square == zip(*square) 
```

在您的解决方案中，您自己做了太多的工作。Python 将为您比较序列，因此更简单的方法是将正方形转置，使其行变为列，反之亦然，然后将其与原始值进行比较。

我们可以使用[zip 函数](http://docs.python.org/library/functions.html#zip)转置正方形。这需要许多序列并返回一个包含每个序列的第一个的元组，然后返回一个包含每个序列的第二个的元组，依此类推。通过传递`square`，`*square`我们将每一行作为一个单独的参数传递；这具有转置正方形的效果。

唯一的复杂之处是`zip`返回元组而不是列表，因此我们必须确保`square`是元组列表，以便比较有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:51:15.503

您可以将此检查放在函数的开头：

```
for row in square:
    if len(row) != len(square):
        return False 
```

或者可能更短

```
if not all(len(square) == len(row) for row in square): return False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T15:13:23.900

这是主要测试的替代版本：

```
for i, line in enumerate(matrix):
    for j in range(len(line)):
        if a[i][j] != a[j][i]:
             return False
return True 
```

当然，建议您测试矩阵是否为正方形的所有其他答案都成立。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:54:33.930

在开头附近添加：

```
for row in square:
    if len(row) != len(square):
        return False 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T00:58:50.773

Python3的一个版本

```
def symmetric(L)
    return all(i==j for i,*j in zip(L ,*L)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-30T18:13:28.593

值`y = 0`应该在第一个 while 循环内。像这样：

```
def symmetric(square):
    final_result = []
    x = 0
    while x < len(square):
         y = 0
        row_list = []
        .
        . 
```

# python - Python嵌入

> ID：11228941
> 
> 赞同：5
> 
> 时间：2012-06-27T14:48:23.717
> 
> 标签：python, gcc, embed

我想要一个嵌入 Python 解释器和一个小脚本的大型二进制文件 - 我对整个静态链接、配置和制作以及 GCC 等都是全新的。请问，有人可以向我描述构建此类可执行文件的基本步骤吗？

我在 MacOS 10.6 上，我下载了 Python 3.3 beta。然后，我创建了“test.c”：

```
#include <Python.h>

int
main(int argc, char *argv[])
{
  Py_Initialize();
  PyRun_SimpleString("from time import time,ctime\n"
                     "print('Today is', ctime(time()))\n");
  Py_Finalize();
  return 0;
} 
```

现在，在一个文件夹中，我有“Python-3.3.0b1”文件夹和“test.c”文件。

我输入：

```
gcc -I ./Python-3.3.0b1 -o test test.c 
```

但我有很多“包含”错误。

但我什至不确定这是否是正确的继续..？我应该首先以某种方式构建 Python，然后将其与“test.c”“链接”吗？

顺便说一句，如果 Python 发布，他们是否使用相同的“./configure”和“make”过程？他们是否使用了一些特殊选项，或者我是否能够构建与 python.org 提供的非常相似（相同）的 Python 可执行文件？

另外，我尝试了这个“./configure”和“make”，它创建了一个名为“build/lib.macosx-10.6-x86_64-3.3”的文件夹，里面有很多 *.so 文件（？），但没有什么叫做“python “或类似的......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:05:01.763

问题是 gcc 对您的 Python 安装不够了解，并且没有正确链接所有标头。您需要从中获取该信息`distutils`并尝试弄清楚如何将该信息获取到 gcc 中。这在 Python 文档的嵌入部分的[链接要求](http://docs.python.org/extending/embedding.html#linking-requirements)中有更好的解释。

但是有一个更简单的方法。有一个名为的脚本`pymkfile.py`将创建一个`make`包含您需要的所有信息的文件。[请参阅本教程](https://www6.software.ibm.com/developerworks/education/l-pythonscript/l-pythonscript-ltr.pdf)的第 4 节。

从第 4 节开始，一个与您尝试做的*非常相似的示例：*

> 嵌入 Python 代码的最简单方法是使用 PyRun_SimpleString() 函数。这个函数向解释器发送一行代码。因为解释器是持久的，所以它就像在交互式 Python 会话中键入单独的行，这意味着您可以通过在每一行代码中调用 PyRun_SimpleString 来为解释器执行新行。例如，以下代码运行一个简单的 Python 程序来拆分和重组字符串：

```
#include <Python.h>
int main()
{
printf("String execution\n");
Py_Initialize();
PyRun_SimpleString("import string");
PyRun_SimpleString("words = string.split('rod jane freddy')");
PyRun_SimpleString("print string.join(words,', ')");
Py_Finalize();
return 0;
} 
```

> 可以看到基本结构很简单。您有初始化和最终确定步骤，其中嵌入的是对 Python 解释器的调用。要编译程序，请复制代码并将其保存到名为 pystring.c 的文件中。首先，使用脚本构建一个合适的 Makefile：

```
$ pymkfile.py pystring > Makefile 
```

> 现在，运行`make`以实际构建代码。创建最终应用程序后，运行应用程序以查看结果：

```
$ ./pystring

String execution
rod, jane, freddy 
```

> 您刚刚使用 C 包装器执行了一段简单的 Python 代码。您可以使用相同的基本技术来执行许多使用嵌入在应用程序中的 Python 的不同任务。唯一明显的限制是，本质上，这两个组件是分开的。嵌入式 Python 解释器和宿主 C 应用程序之间没有通信。
> 
> 所以，你给解释器一些代码，它执行并打印出来；请注意您不必从解释器获取输出，然后打印它：解释器将信息直接发送到标准输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T14:52:46.187

您是否考虑过使用 py2app？如果您只对发布脚本而不是编写 C 代码感兴趣，那么它可以更好地满足您的需求。

[http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html](http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T21:03:02.260

> 另外，我尝试了这个“./configure”和“make”，它创建了一个名为“build/lib.macosx-10.6-x86_64-3.3”的文件夹，里面有很多 *.so 文件（？），但没有什么叫做“python “或类似的......？

这些`.so`文件是目标文件。python 可执行文件仅在您调用之后生成`make install`，因此三个步骤：

```
./configure
make
make install 
```

最后一步通常涉及`sudo`

**确保您没有替换您的系统 Python。**不是一个好主意。

如果您在 OS X 上，通常的方法是与 OS X Python 系统框架链接。这“看起来”像嵌入式 Python，但您正在链接到现有系统 Python。系统 Python 链接目标`libpython.dylib`在`/usr/lib`

如果您不反对使用 Xcode，只需 Google 'embedded Python OS X' 并找到一个很好的教程。

我第一次使用[这个教程。](http://www.ragestorm.net/tutorial?id=21)

# excel - 在保留格式的同时从 R 写入 excel 中的模板

> ID：11228942
> 
> 赞同：30
> 
> 时间：2012-06-27T14:48:26.880
> 
> 标签：excel, r

我在 R 中有一个数据框，它想要写入 excel（或 csv）并以良好的格式输出（例如，带有边框、表格的标题，而不是从单元格 A1 开始）。

目前，我使用函数 write.table 将我的数据帧写入 csv 文件，然后将数据复制并粘贴到 excel 中的文档中，在该文档中，我的表格已准备好格式化为模板。

当它只有一个数据框时，这不是一个主要问题，但我现在想为多个数据框做这件事，并在 excel 中的多个选项卡中使用它们。

有没有一种方法可以自动将我的数据框复制到现有 excel 电子表格中的特定单元格，并正确设置所有格式？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-27T15:24:54.020

正如 Joran 所说，您拥有[XLConnect](http://cran.r-project.org/web/packages/XLConnect/index.html)软件包。仔细阅读该软件包的[文档](http://cran.r-project.org/web/packages/XLConnect/XLConnect.pdf)或[小插图](http://cran.r-project.org/web/packages/XLConnect/vignettes/XLConnect.pdf)，以确切了解可能的情况。

使用 XLConnect 您通常会覆盖单元格样式，除非您将样式操作设置为“无”使用

```
setStyleAction(wb,XLC$"STYLE_ACTION.NONE") 
```

为了让你走上正确的道路，一个简单的例子：

```
require(XLConnect)
wb <- loadWorkbook("test.xlsx", create=TRUE)
setStyleAction(wb,XLC$"STYLE_ACTION.NONE")

Data <- data.frame(
  a = 1:10,
  b = letters[1:10]
)

writeWorksheet(wb,Data,"aSheet",startRow=1,startCol=1,header=TRUE)

saveWorkbook(wb) 
```

前

![在此处输入图像描述](../Images/309b321ca376b422c7fd232a94e11bd1.png)

后

![在此处输入图像描述](../Images/73c77fb43d8b1ac94a370556a93bd09f.png)

* * *

编辑：正如 Dirk Eddelbuettel 所指出的，您可以使用该`xlsx`软件包执行相同的操作。我个人使用`XLConnect`它，因为它可以同时处理 xls 和 xlsx，并且看起来比我用于处理 EXCEL 文件的任何旧包都稳定得多。我还没用过这个`xlsx`包。您可以查看[数据导入/导出上的 CRAN 页面](http://cran.r-project.org/doc/manuals/R-data.html#Reading-Excel-spreadsheets)以了解可用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-19T22:27:15.240

一些用户询问如何使用该`xlsx`软件包进行操作。

[在STHDA](http://www.sthda.com/english/wiki/r-xlsx-package-a-quick-start-guide-to-manipulate-excel-files-in-r)有一个非常好的和广泛的`xlsx`包使用示例。

它有单元格格式的示例，具有多个工作表的工作簿，如何添加图形等。

# xml - XML 中的黑名单词

> ID：11228948
> 
> 赞同：1
> 
> 时间：2012-06-27T14:48:45.963
> 
> 标签：xml, regex, blacklist

我的要求是：“*不允许列入黑名单的单词出现在特定的 XML 标记中*”。

我正在尝试使用 XML 正则表达式模式的 xs:restriction。

我引用了以下链接：[Restrict word list in XML schema](https://stackoverflow.com/questions/812790/restrict-word-list-in-xml-schema)。

例如：列入黑名单的词：**字节、bing、ding**

问题：如果单词以相同的字母 ( **b** ) 开头，则***字节***通过***bing***条件，*反之亦然*。

我可以使用 AND 运算符吗？还有其他更简单的方法吗？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:03:51.173

不管你做了什么，你都错了；而且我们无法通过阅读您引用的那个长线程来真正弄清楚您做了什么，所以您必须告诉我们。告诉我们您想要实现的目标可能也是一个好主意，因为可能有更好的方法。撇开别的不说，世界自 2009 年以来一直在发展，您或许可以使用 XSD 1.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:51:22.967

在 XSD 1.1 中，您可以这样做：

```
<xs:assert test="not(tokenize($value, '\s+') = ('byte', 'bing', 'ding'))"/> 
```

Saxon 和 Xerces 目前支持 XSD 1.1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T22:29:22.957

在最初的问题中，它相对简单，将每个禁用*词*转换为允许*模式*列表。但是在这种情况下，结果列表会发生冲突，因此您必须在生成完整的模式列表时同时考虑所有单词：

*   以除`b`或以外的任何内容开头`d`
*   开始于`b`, 下一个字符 not`y`或`i`
*   以 开头`by`，下一个字符不是`t`
*   以 开头`byt`，下一个字符不是`e`
*   以`byte`AND 开头至少还有一个字符
*   `byt`,`by`或`b`
*   以 开头`d`，下一个字符不是`i`
*   `bi`以or开头`di`，下一个字符不是`n`
*   `bin`以or开头`din`，下一个字符不是`g`
*   以`bing`or开头`ding`AND 至少还有一个字符
*   `bin`, `bi`, `b`, `din`,`di`或`d`

结果：

```
<xsd:pattern value=
  "([^bd].*|b[^yi].*|by[^t].*|byt[^e].*|byte.+|b(yt?)?|d[^i].*|[bd]i[^n].*|[bd]in[^g].*|[bd]ing.+|[bd](in?)?)"
/> 
```

可能可以编写一个程序来生成正则表达式，但这看起来需要大量的工作。自从我写了对原始问题的回答以来，我还没有研究过这个问题；正如@MichaelKay 所说，我希望同时出现更好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T14:21:37.230

根据 Michael Kay 的回答，我已经使用 XSD 1.1 实现了逻辑。（我不得不将*$value*更改为*@name*）

步骤： 1\. 将以下代码与最新的 Xerces 1.1 实现 jar 文件一起使用。

```
<xs:element name="random-element">
    <xs:complexType>
        <xs:attribute name="name" use="required" type="xs:string" />
        <xs:attribute name="value" use="optional" type="xs:string" />
        <xs:assert test="not(tokenize(@name, '\s+') = ('byte', 'bing', 'ding'))"/>
    </xs:complexType>
</xs:element> 
```

3\. 使用以下代码验证：

```
 final SchemaFactory schemaFactory = SchemaFactory.newInstance(Constants.W3C_XML_SCHEMA11_NS_URI);
 final Schema schema = schemaFactory.newSchema(schemaFile);
 final Validator validator = schema.newValidator();
 validator.validate(xmlFile); 
```

常量**W3C_XML_SCHEMA11_NS_URI**非常重要，否则会*失败*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-09T13:17:27.187

如果可能的话，XSD 1.1 可能是最好的选择。其他答案已经涵盖了这一点，我倾向于相信他们:-)

在 XSD 1.0 中，堆叠否定的唯一方法是`xs:pattern`使用否定集重复限制条件 ( )，每个（正）断言一个，例如：

```
<xs:pattern value="([^(byte)]" />
<xs:pattern value="([^(bing)])" />
<xs:pattern value="([^(ding)])" /> 
```

您还可以进一步指定每个单词、每个字母等的大小写。

只要你否定你被“列入黑名单”的整个事情，你就应该能够用相对易读的模式来构建它。

# java - Java：RandomStringUtils 随机种子

> ID：11228951
> 
> 赞同：3
> 
> 时间：2012-06-27T14:48:53.180
> 
> 标签：java, random, apache-commons

我一直在使用`RandomStringUtils`生成随机 ID 作为数据库密钥：

```
import org.apache.commons.lang.RandomStringUtils;
public class RandomStringTest {
    public static void main(final String[] args) {
        for (int i = 0; i <= 10; i++) {
            final String id = RandomStringUtils.random(8,
                    "0123456789abcdefghijklmnopqrstuvwxyz");
            System.out.println(id);
        }
    }
} 
```

密钥空间足够大，

```
len("0123456789abcdefghijklmnopqrstuvwxyz")^8 = 2821109907456 ≃ 10^12 
```

**随机机制是否正确播种？**在将其应用于生产之前，我需要知道密钥是否已正确分配。

顺便说一句，测试代码在执行几次时没有显示重复，但这远非可靠的证据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T15:01:34.217

[我发现](http://svn.apache.org/repos/asf/commons/proper/lang/trunk/src/main/java/org/apache/commons/lang3/RandomStringUtils.java)的实现中没有提供种子，只有一个`new Random()`. 但是有一种[方法](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/RandomStringUtils.html#random%28int,%20int,%20int,%20boolean,%20boolean,%20char%5B%5D,%20java.util.Random%29)可以让您提供自己的随机源

```
random(int count, int start, int end, 
        boolean letters, boolean numbers, 
        char[] chars, java.util.Random random) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:03:02.420

您不应该使用随机生成器来生成唯一密钥。没有什么能保证唯一性。为什么不使用 UUID 生成器或数据库序列？

为什么要正确分配密钥？主键唯一重要的是它的唯一性。并且种子对分布没有任何影响，AFAIK。

# asp.net - ASP 删除 DataTable 类中基于表达式的列中的只读

> ID：11228960
> 
> 赞同：0
> 
> 时间：2012-06-27T14:49:12.547
> 
> 标签：asp.net, datatable, readonly, calculated-columns

根据[http://msdn.microsoft.com/en-us/library/ms810291.aspx](http://msdn.microsoft.com/en-us/library/ms810291.aspx)，您不能更改 DataTable 中基于表达式的列的 ReadOnly 属性。我需要找出一种方法来评估 DataTable 列上的表达式，然后设置 .Expression = null，然后允许编辑该列：

以下代码不起作用，因为当您设置 Expression == null 时，它会将 DataTable 中的值重置为 DBNull：

```
_persistedDataTable.Columns[currentDataColumn.ColumnName].Expression = null;
_persistedDataTable.Columns[currentDataColumn.ColumnName].ReadOnly = false; 
```

我的想法是，我将当前的 DataTable 逐行复制到一个新的 DataTable 中，而不保留架构，允许我编辑新的 DataTable 值（无论它们是否由表达式派生）......我只是不确定这该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:00:53.320

我是这样做的：

```
String dateFilter = "IIF([data_type] = 'smalldatetime', 'true!', '')";
            String targetFilter = "[source_field]"; 

            DataTable tempDataTable = new DataTable();

            //create fields field
            DataColumn order = new DataColumn("order", Type.GetType("System.Int32"));
            tempDataTable.Columns.Add(order);
            order.AutoIncrement = true;
            order.AutoIncrementSeed = 1;
            order.ReadOnly = false;

            _sourceDataAdapter.Fill(tempDataTable);
            tempDataTable.Columns.Add(new DataColumn("date_format", Type.GetType("System.String"), dateFilter));
            tempDataTable.Columns.Add(new DataColumn("target_field", Type.GetType("System.String"), targetFilter));

            tempDataTable.BeginInit();
            tempDataTable.EndInit();

            _dataTable.Columns.Add(new DataColumn("order", Type.GetType("System.Int32")));
            _dataTable.Columns.Add(new DataColumn("local_field", Type.GetType("System.String")));
            _dataTable.Columns.Add(new DataColumn("length", Type.GetType("System.Int32")));
            _dataTable.Columns.Add(new DataColumn("data_type", Type.GetType("System.String")));
            _dataTable.Columns.Add(new DataColumn("decimals", Type.GetType("System.Int32")));

            _dataTable.Columns.Add(new DataColumn("date_format", Type.GetType("System.String")));
            _dataTable.Columns.Add(new DataColumn("target_field", Type.GetType("System.String")));

            using (DataTableReader reader = tempDataTable.CreateDataReader())
            {
                while(reader.Read())
                {
                    if (reader.HasRows)
                    {
                        _dataTable.Rows.Add(reader.GetValue(0), reader.GetValue(1), reader.GetValue(2), reader.GetValue(3), reader.GetValue(4), reader.GetValue(5), reader.GetValue(6));
                    }
                }
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-29T19:57:14.093

no you dont. You want to make a new column that has a copy of the expressioned data, and make that RW.

# c++ - 在C中从char指针转换为整数

> ID：11228964
> 
> 赞同：-5
> 
> 时间：2012-06-27T14:49:25.960
> 
> 标签：c++, casting

我有一个 char 类型指针数组**buf**，我想将它的每个元素转换为 unsigned int 并将其存储在 unsigned int 或 int**数组**中。

问题是，下面代码的第二个代码命令在转换为 unsigned int 后返回一个负值，而我只期望从 0 到 255 的正值。为什么当我使用 unsigned 它时它返回负值？我应该怎么做才能使第二行代码中的转换只返回 0 到 255 之间的正值？

```
int array [100];
array[l]=((unsigned int(buf[0]))*5)); 
```

请帮帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:51:56.187

第二条指令太复杂了。

将您的说明分成不同的行。

*   在一行中，访问“char 类型指针数组”中实际存储的值。

*   在随后的一行中，将其转换为您想要的任何内容。

这将帮助您诊断问题，并使代码更具可读性和可维护性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:12:00.847

我认为你应该`array`声明为`unsigned int`. 此外，使用`unsigned char`to cast 而不是`unsigned int`然后将其分配给`array`元素。这是因为将负值转换为无符号目标类型将根据 C++ 标准第 4.7 节第 2 节。

```
unsigned int array [100];
array[l]=((unsigned char(buf[0]))*5)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:54:22.930

你`*(reinterpret_cast<unsigned char *>(&buf[0])))`不想`(unsigned int(buf[0]))`。在将其乘以 5`int` *之前*，不要忘记将其转换为 an 。

# mysql - 如何在 mysql 查询中应用 GROUP_CONCAT

> ID：11228965
> 
> 赞同：1
> 
> 时间：2012-06-27T14:49:27.937
> 
> 标签：mysql, sql, group-concat

如何`GROUP_CONCAT`在此查询中申请？

**询问**

```
SELECT WEEK(cpd.added_date) AS week_no,COUNT(cpd.result) AS death_count
FROM cron_players_data cpd WHERE cpd.player_id = 81
AND cpd.result = 2 AND cpd.status = 1
GROUP BY WEEK(cpd.added_date); 
```

查询输出结果画面

![在此处输入图像描述](../Images/f632222f4aa40cf06aa9921d8654e2f2.png)

**结果必填**

```
23,24,25 AS week_no 2,3,1 AS death_count 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:04:21.627

试试这个

```
select
  group_concat(t.week_no) as Weeks,
  group_concat(t.death_count) as DeathCounts
from (SELECT
    WEEK(cpd.added_date) AS week_no,
    COUNT(cpd.result) AS death_count
      FROM cron_players_data cpd
      WHERE cpd.player_id = 81
      AND cpd.result = 2
      AND cpd.status = 1
      GROUP BY WEEK(cpd.added_date)) as t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:05:46.800

*这个替代*解决方案怎么样：

询问

```
select group_concat( week_no ) as week_no, group_concat( death_count ) as death_count
from (
    SELECT WEEK(cpd.added_date) AS week_no,COUNT(cpd.result) AS death_count
    FROM cron_players_data cpd WHERE cpd.player_id = 81
    AND cpd.result = 2 AND cpd.status = 1
    GROUP BY WEEK(cpd.added_date)
) grouped_data
; 
```

# mysql - 请指导我在 BETWEEN 查询中做错了什么

> ID：11228967
> 
> 赞同：0
> 
> 时间：2012-06-27T14:49:29.767
> 
> 标签：mysql

我正在尝试运行以下脚本

```
SELECT field_value 
  FROM jos_js_res_record_values jrv 
 INNER 
  JOIN jos_js_res_record jr 
    ON jrv.record_id = jr.id 
 where field_id = 49 
 WHERE jr.ctime BETWEEN '2011-21-03' AND '2012-01-03' 
 ORDER BY jr.user_id ASC; 
```

但这显示了以下错误

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'WHERE jr.ctime BETWEEN '2011-21-03' AND '2012-01-03' ORDER BY jr.user_id ASC ' 附近使用正确的语法

**请指导我我做错了什么..**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:50:29.533

你说的是`WHERE`两次。第二个`WHERE`必须是`AND`.

# java - 排除字段 - 使用推土机进行映射

> ID：11228974
> 
> 赞同：3
> 
> 时间：2012-06-27T14:50:05.050
> 
> 标签：java, mapping, dozer

我想像这样使用推土机排除一个字段：

```
 <mapping>
    <class-a>com.core.model.Model</class-a>
    <class-b>com.core.model.ModelIS</class-b>
    <field>
        <a>person</a>
        <b>person</b>
        <a-hint>com.core.Person</a-hint>
        <b-hint>com.core.PersonIS</b-hint>
    </field>
        <field-exclude>
                    <a>age</a>
                    <b>age</b>
            </field-exclude>
    </mapping> 
```

所以类 Model 包含一个 Person 对象，而 Person 有一个 age 对象，我怎样才能从这个映射中排除年龄？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T08:31:13.413

`<field-exclude>`是正确的方法，但它适用于它所应用的映射，在这种情况下是模型类。

如果模型类有一个`age`对象，那么（给定您的映射）它将被排除在外。但是`age`对象在对象树中更深，它位于模型中的人员字段上，因此必须在映射人员字段时应用它。

将您的映射替换为以下映射，它应该可以工作：

```
<mapping>
    <class-a>com.core.model.Model</class-a>
    <class-b>com.core.model.ModelIS</class-b>
    <field>
        <a>person</a>
        <b>person</b>
        <a-hint>com.core.Person</a-hint>
        <b-hint>com.core.PersonIS</b-hint>
    </field>
</mapping>

<mapping>
    <class-a>com.core.Person</class-a>
    <class-b>com.core.PersonIS</class-b>
    <field-exclude>
        <a>age</a>
        <b>age</b>
    </field-exclude>
</mapping> 
```

# perl - 为什么 undef 变成空字符串？

> ID：11228975
> 
> 赞同：3
> 
> 时间：2012-06-27T14:50:12.537
> 
> 标签：perl

```
use strict;
use warnings;
use Data::Dumper;

my %h;
my $undef = undef;
$h{''}='test2';
$h{$undef} = 'test';

print Dumper (\%h); 
```

创建以下输出：

```
$VAR1 = {
          '' => 'test'
        }; 
```

为什么会这样？我有 Perl 5.12.3。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T14:51:36.460

所有哈希键都是字符串。用作哈希键的非字符串值被强制转换为字符串，并在该上下文中`undef`变为。`''`

# c# - C#中的SQL插入查询不更新数据库

> ID：11228977
> 
> 赞同：0
> 
> 时间：2012-06-27T14:50:22.137
> 
> 标签：c#, sql-server, database-connection

这是我下面的代码。程序运行良好。我没有任何例外。但最后，该表不包含新插入的行。（注意，连接字符串是正确的）。

```
string Name = "myname";
string Age = "myage";

string sql = "INSERT INTO Student (Name, Age) VALUES ('" + Name + "','" + Age + "')";

SqlConnection conn = new SqlConnection(ConfigHelper.GetConnectionString());
SqlCommand cmd = new SqlCommand(sql, conn);
cmd.ExecuteNonQuery();
conn.Close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T14:55:46.930

导致您所问问题的主要问题是连接从未打开。

**在连接打开之前，您无法执行该命令**。

* * *

还有一些其他问题：

*   我看不到错误处理，这将帮助您识别错误。可能有一些东西吞噬了你的错误，所以你看不到它们。
*   您正在连接字符串，这使您可以使用[SQL Injection](https://www.owasp.org/index.php/SQL_injection)。我强烈建议学习[参数化查询](http://msdn.microsoft.com/en-us/library/bb738521.aspx)。
*   您没有使用 using 语句进行连接，这将确保自动关闭和处置

[这里](http://msdn.microsoft.com/en-us/library/ms971481.aspx#adonetbest_topic5)列出了几个最佳实践。这是正确使用“使用”语句的摘录。

> **在 C# 中使用“Using”语句**
> 
> 对于 C# 程序员，确保始终关闭 Connection 和 DataReader 对象的一种便捷方法是使用 using 语句。离开 using 语句的范围时，using 语句会自动对正在“使用”的对象调用 Dispose。例如：

```
//C#
string connString = "Data Source=localhost;Integrated Security=SSPI;Initial Catalog=Northwind;";
using (SqlConnection conn = new SqlConnection(connString))
{
  SqlCommand cmd = conn.CreateCommand();
  cmd.CommandText = "SELECT CustomerId, CompanyName FROM Customers";

  conn.Open();

  using (SqlDataReader dr = cmd.ExecuteReader())
  {
    while (dr.Read())
      Console.WriteLine("{0}\t{1}", dr.GetString(0), dr.GetString(1));
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:13:06.317

首先：**开始使用参数化查询！**否则，您的代码总是容易受到 SQL 注入攻击 - 而不是您想要处理的事情。

假设您正在使用此功能（取决于连接字符串，您在原始问题中没有向我们展示）：整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量！Visual Studio 将在`.mdf`文件周围进行复制，并且**很可能**，您的`INSERT`工作正常 - 但您最终只是查看了**错误的 .mdf 文件**！

如果您想坚持使用这种方法，请尝试在`myConnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`VictoryDatabase`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=VictoryDatabase;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样...

# ios5 - 从 cellForRowAtIndexPath 内部创建自定义 UITableView 表格单元格

> ID：11228985
> 
> 赞同：0
> 
> 时间：2012-06-27T14:50:33.403
> 
> 标签：ios5, uitableview

很好奇如何从 tableView:cellForRowAtIndexPath: 中处理自定义表格单元格。

我在 viewDidLoad 中实例化了一个自定义表格单元格。我的问题是，当没有可重复使用的单元格时，如何处理 cellForRowAtIndexPath 中的情况？例如，返回搜索结果时。如果需要，如何创建新的自定义单元格？我在下面包括了相关的方法。

谢谢

```
 -(void)viewDidLoad
 {
   [super viewDidLoad];

   //Load custom table cell
     UINib *customCellNib = [UINib nibWithNibName:@"CustomItem" bundle:nil];

   //Register this nib, which contains the cell
    [[self tableView] registerNib:customCellNib forCellReuseIdentifier:@"CustomItemCell"];

   //.... More stuff here

  }

  - (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {

     CustomItemCell *cell =
    [tableView dequeueReusableCellWithIdentifier:@"CustomItemCell"];

     // If there is no reusable cell of this type, create a new one
     if (!cell) {

       //Is this right?
       cell = [[CustomItemCell alloc] init];

     }

          //Set up cell with data here...

    return cell;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:51:17.200

I ended up solving this by accessing the main bundle, looking for the custom table cell nib file. When we find our custom table cell class, we assign iVar "cell" to that object.

```
- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

   static NSString *cellID = @"CustomItemCell";
   CustomItemCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

   // If there is no reusable cell of this type, create a new one

   if(cell == nil){

    NSArray *nibObjects = [[NSBundle mainBundle]loadNibNamed:@"CustomCell" owner:nil options:nil];
    for (id currentObject in nibObjects) {
        if([currentObject isKindOfClass:[CustomItemCell class]])
        {
            cell = (CustomItemCell *)currentObject;

        }

    }

  } 
   //Assign data to cell here   
} 
```

# javascript - Alpha 通道的图像映射

> ID：11228987
> 
> 赞同：6
> 
> 时间：2012-06-27T14:50:39.457
> 
> 标签：javascript, html, imagemap

```
<img src="circle.png" onclick="alert('clicked')"/> 
```

假设 circle.png 是一个 400x400 像素的透明背景图片，中间有一个圆圈。

我现在得到的是整个图像区域（400x400px）都是可点击的。我想要的是只有圆圈（非透明像素）是可点击的。

当然我知道在这个例子中我可以使用`<map>`标签和一个圆形区域，但我正在寻找一个通用的解决方案，它将考虑到实际的图像透明度并适用于任何类型的图像（即非规则形状）。

我能看到的最复杂的方法是根据每个像素 alpha 跟踪图像的轮廓，转换为路径（也许简化）并作为地图应用。

有没有更有效/更直接的方法来做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T15:29:59.353

使用`canvas`标签，您可以确定给定点下像素的颜色值。您可以使用事件数据来确定坐标，然后检查透明度。剩下的就是将图像加载到画布中。

首先，我们会处理：

```
 var ctx = document.getElementById('canvas').getContext('2d');
  var img = new Image();
  img.onload = function(){
    ctx.drawImage(img,0,0);
  };
  img.src = [YOUR_URL_HERE]; 
```

第一个位抓取画布元素，然后创建一个`Image`对象。当图像加载时，它被绘制在画布上。很简单！除了...如果图像与代码不在同一个域中，那么您将面临同域策略安全性。为了获取我们图像的数据，我们需要将图像托管在本地。您还可以对图像进行 base64 编码，这超出了此答案的范围。（有关执行此操作的工具，请参阅[此 url ）。](http://www.motobit.com/util/base64-decoder-encoder.asp)

接下来，将单击事件附加到画布上。当该点击进入时，我们将检查透明度并仅对不透明的点击区域执行操作：

```
 if (isTransparentUnderMouse(this, e))
        return;
    // do whatever you need to do
    alert('will do something!'); 
```

魔术发生在函数`isTransparentUnderMouse`中，它需要两个参数：目标画布元素（`this`在点击处理程序的范围内）和事件数据（例如，在本例中）。现在我们来看看肉：

```
var isTransparentUnderMouse = function (target, evnt) {
    var l = 0, t = 0;
    if (target.offsetParent) {
        var ele = target;
        do {
            l += ele.offsetLeft;
            t += ele.offsetTop;
        } while (ele = ele.offsetParent);
    }
    var x = evnt.page.x - l;
    var y = evnt.page.y - t;
    var imgdata = target.getContext('2d').getImageData(x, y, 1, 1).data;
    if (
        imgdata[0] == 0 &&
        imgdata[1] == 0 &&
        imgdata[2] == 0 &&
        imgdata[3] == 0
    ){
        return true;
    }
    return false;
}; 
```

首先，我们做一些跳舞来获得相关元素的精确位置。我们将使用该信息传递给 canvas 元素。`getImageData`除其他外，这将为我们提供一个`data`包含我们指定位置的 RGBA 的对象。

如果所有这些值都是 0，那么我们正在查看透明度。如果不是，则存在一些颜色。-edit- 如评论中所述，我们真正需要查看的唯一值是上`imgdata[3]`例中的最后一个值。值是 r(0)g(1)b(2)a(3)，透明度由 a, alpha 决定。您可以使用相同的方法来查找您知道 rgba 数据的任何不透明度的任何颜色。

在这里试试：http: [//jsfiddle.net/pJ3MD/1/](http://jsfiddle.net/pJ3MD/1/)

（**注意：**在我的示例中，由于我提到的域安全性，我使用了 base64 编码的图像。您可以忽略该部分代码，除非您也打算使用 base64 编码）

同样的例子，为了好玩而对鼠标光标进行了更改：http: [//jsfiddle.net/pJ3MD/2/](http://jsfiddle.net/pJ3MD/2/)

**文档**

*   `Image`MDN 上的对象 - [https://developer.mozilla.org/en/DOM/Image](https://developer.mozilla.org/en/DOM/Image)
*   `canvas`在 MDN 上使用图像的教程- [https://developer.mozilla.org/en/Canvas_tutorial/Using_images](https://developer.mozilla.org/en/Canvas_tutorial/Using_images)
*   MDN 上的 Canvas 门户 - [https://developer.mozilla.org/en/HTML/Canvas](https://developer.mozilla.org/en/HTML/Canvas)
*   MDN 上的HTML`canvas`元素 ( `getContext`) - [https://developer.mozilla.org/en/DOM/HTMLCanvasElement/](https://developer.mozilla.org/en/DOM/HTMLCanvasElement/)
*   `CanvasRenderingContext2D`在 MDN ( `getImageData`) - [https://developer.mozilla.org/en/DOM/CanvasRenderingContext2D](https://developer.mozilla.org/en/DOM/CanvasRenderingContext2D)
*   MDN 上的像素操作 - [https://developer.mozilla.org/En/HTML/Canvas/Pixel_manipulation_with_canvas/](https://developer.mozilla.org/En/HTML/Canvas/Pixel_manipulation_with_canvas/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T15:14:02.627

您可以使用 HTML5 画布执行此操作。将图像绘制到画布中，将单击处理程序附加到画布，然后在处理程序中检查单击的像素是否透明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T09:26:52.430

谢谢克里斯的这个好答案

我在代码中添加了几行来处理缩放画布

所以我现在要做的是创建一个与图像在其上绘制的精确像素大小的画布。像（对于 220 像素 * 120 像素的图像）：

```
<canvas width="220" height="120" id="mainMenu_item"></canvas> 
```

并使用 css 缩放画布：

`#mainMenu_item{ width:110px; }`

调整后的 isTransparentUnderMouse 函数如下所示：

```
 var isTransparentUnderMouse = function (target, evnt) {

    var l = 0, t = 0;
    if (target.offsetParent) {
        var ele = target;
        do {
            l += ele.offsetLeft;
            t += ele.offsetTop;
        } while (ele = ele.offsetParent);
    }

    var x = evnt.pageX - l;
    var y = evnt.pageY - t;

    var initialWidth = $(evnt.target).attr('width');
    var clientWidth = evnt.target.clientWidth;
    x = x * (initialWidth/clientWidth);

    var initialHeight = $(evnt.target).attr('height');;
    var clientHeight = evnt.target.clientHeight;
    y = y * (initialHeight/clientHeight);

    var imgdata = target.getContext('2d').getImageData(x, y, 1, 1).data;

    if (
        imgdata[0] == 0 &&
        imgdata[1] == 0 &&
        imgdata[2] == 0 &&
        imgdata[3] == 0
    ){
        return true;
    }
    return false;
}; 
```